# StackOverflow 问答 14367000-14367999

# delphi - 检测子控件何时调整大小？

> ID：14367002
> 
> 赞同：7
> 
> 时间：2013-01-16T20:15:01.530
> 
> 标签：delphi, user-interface, vcl

有没有办法让父控件检测子控件何时调整大小？我正在考虑编写一个面板控件，它在子控件调整大小时调整大小（类似于 HTML DIV 元素扩展以适应其内容的方式）。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T20:52:57.380

为了回答您的实际问题，我相信在`AlignControls`调整子控件大小或移动子控件时会调用窗口控件的方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T20:38:30.590

`TControl`并`TWinControl`具有为您处理自动调整大小的内置支持。您所要做的就是将该`TControl.AutoSize`属性设置为 True。它被声明为`protected`in `TControl`，因此您必须将其提升为`public`或者`published`如果您希望您的组件用户设置它。否则，只需将其设置在组件的构造函数中。

`CanAutoSize()`如果您想自定义父控件相对于其子控件的大小，则可以覆盖虚拟方法。

# css - 上下文 id 选择器 css

> ID：14367010
> 
> 赞同：1
> 
> 时间：2013-01-16T20:15:17.853
> 
> 标签：css, css-selectors

我在不应用此规则时遇到问题：

```
h1#header_i { color:red; } 
```

这有效：

```
h1 { color:red; } 
```

这有效：

```
#header_i { color:red; } 
```

我试图仅将规则应用于div中的`<h1>`标签。`id="header_i"`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:16:32.303

您正在寻找[后代选择器](http://www.w3.org/TR/CSS2/selector.html#descendant-selectors)：

```
#header_i h1 {
    color: red;
} 
```

[http://cssdesk.com/hCxEv](http://cssdesk.com/hCxEv)

# php - PHP MySql 使用 FIND_IN_SET 方法加入列的行

> ID：14367011
> 
> 赞同：0
> 
> 时间：2013-01-16T20:15:24.027
> 
> 标签：php, mysql

我有这个带有名称设置的 MySql TABLE：

![在此处输入图像描述](../Images/35b6d86211fe2f53009ab0c94a994bd7.png)

我需要为 JOIN 和 FIND_IN_SET 方法从标题（设置表）中`select`精选文章。我尝试使用此代码，但我不知道如何为精选文章“行”工作：`row``columns`

```
SELECT  a.*
    FROM    articles a
            INNER JOIN settings b
            ON FIND_IN_SET(a.ID, b.title) <> 0 
```

如何选择这一行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:10:13.480

你可以这样得到

```
SELECT title FROM settings WHERE title LIKE  '%featuredarticle%' 
```

# java - Java，二维数组排序

> ID：14367017
> 
> 赞同：7
> 
> 时间：2013-01-16T20:15:50.453
> 
> 标签：java, arrays, sorting

我对 Java 很陌生，但正在进入它。但是，我无法理解为什么我在这里找到的这个示例不起作用：

上课开始时：

```
String[][] spritesPaint = new String[20][20]; 
```

在方法：

```
for (int funct1 = 0; funct1 <= 2; funct1++) {
    if (funct1 == 0) {
        for (int funct2 = 0; funct2 < rEnemyNumber; funct2++) {
            spritesPaint[0][funct2] = new Integer(rEnemyY[funct2])
                    .toString();
            spritesPaint[1][funct2] = rEnemyGraphic[funct2];
        }
    } else if (funct1 == 1) {
        Arrays.sort(Integer.valueOf(spritesPaint[0].toString()),
                new Comparator<Integer[]>() {
                    @Override
                    public int compare(final Integer[] entry1,
                            final Integer[] entry2) {
                        final Integer time1 = entry1[0];
                        final Integer time2 = entry2[0];
                        return time1.compareTo(time2);
                    }
                });

    } else if (funct1 == 2) {
        for (int funct3 = 0; funct3 < rEnemyNumber; funct3++) {
            if (rEnemyCheck[funct3] == true) {
                nextPaint = getImage(base, rEnemyGraphic[funct3]);
                System.out.println("Next: " + nextPaint);

                g.drawImage(nextPaint, rEnemyX[funct3] + worldCenterX,
                        rEnemyY[funct3] + worldCenterY, this);
            }
        }
    }
} 
```

基本上，我想要做的是有一个二维数组，我在其中存储对象在屏幕上的 Y 位置以及与该对象相关的图像路径，然后按 Y 位置整数对其进行排序。这应该允许我以正确的顺序将元素绘制到屏幕上以获得等距透视图。

但是，我不断收到此错误：

```
The method sort(T[], Comparator<? super T>) in the type Arrays 
is not applicable for the arguments (Integer, new Comparator<Integer[]>(){}) 
```

请帮助我，我一直在扭曲我的大脑好几个小时试图理解为什么我现在得到这个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:20:23.837

`Integer.valueOf(spritesPaint[0].toString())`是一个整数，但是从您的描述来看，您似乎想要对一维数组中的字符串进行排序，`spritesPaint[0]`就好像它们是整数一样。这是一个可以做到这一点的修改：

```
Arrays.sort(spritesPaint[0], new Comparator<String>() {
    @Override public int compare(final String entry1, final String entry2) {
        final Integer time1 = Integer.valueOf(entry1);
        final Integer time2 = Integer.valueOf(entry2);
        return time1.compareTo(time2);
    }
}); 
```

或者，如果您尝试按数组第二维的第一个元素对数组的第一维进行排序，请进行如下修改：

```
Arrays.sort(spritesPaint, new Comparator<String[]>() {
    @Override public int compare(final String[] entry1, final String[] entry2) {
        final Integer time1 = Integer.valueOf(entry1[0]);
        final Integer time2 = Integer.valueOf(entry2[0]);
        return time1.compareTo(time2);
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T20:20:03.750

错误消息意味着，您传递的不是 T（通用）类型的数组，而是整数。所以，你在哪里：

```
Arrays.sort(Integer.valueOf(spritesPaint[0].toString()), ... 
```

你想通过

```
Arrays.sort(arrayToBeSorted, ... 
```

（另外，你的变量可以用更好的名字，因为我真的不明白这个例子在做什么......）

# vb.net - URL 重写规则 - 查询字符串值的子文件夹

> ID：14367019
> 
> 赞同：0
> 
> 时间：2013-01-16T20:15:55.790
> 
> 标签：vb.net, url, iis, url-rewriting

我正在尝试创建一个规则，它将从 URL 中获取子文件夹并将其转换为查询字符串值，例如：

如果我导航到此 URL：`http://www.example.com/myfolder` 我希望阅读`http://www.example.com/default.aspx?folder=myfolder`

这就是我要做的事情：

```
<rule name="Rewrite Language">
  <match url="([a-z]{2})(.*)" />
  <conditions logicalGrouping="MatchAll">
    <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
    <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
  </conditions>
  <action type="Rewrite" url="/default.aspx?code={R:2}" />
</rule> 
```

但这不会返回完整的子文件夹值。老实说，我从这个网站的一个类似问题中偷了这个，我必须承认我真的不知道这一切意味着什么！

我可能以错误的方式处理此问题，我的问题是我无法确定子文件夹将是什么，因为它是从随机的 6 个字符字母数字值动态生成的。

任何帮助将不胜感激。

大卫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:20:04.210

IIS 管理器有一个用于创建规则的 GUI / 向导界面，我通常发现它比手动将规则输入到 web.config 文件中更快、更容易。值得一试：`IIS Manager -> select your site / application -> URL Rewrite -> Add Rule(s)`。

我认为以下规则会为您解决问题：

```
<rule name="RewriteUserFriendlyURL1" stopProcessing="true">
    <match url="^([^/]+)/?$" />
    <conditions>
        <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
        <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
    </conditions>
    <action type="Rewrite" url="default.aspx?folder={R:1}" />
</rule> 
```

基本上，“匹配 url”是一个[正则表达式](http://www.regular-expressions.info/)，用于识别 URL 的一部分。在这种情况下，它会捕获一个包含一个或多个字符（/ 除外）的组，在 URL 的末尾带有一个可选的 /。然后它将重写 url`default.aspx?folder=`后跟匹配的值（`{R:1}`指第一个捕获的组，其中将包含文件夹名称）。

如果您只有一个子文件夹名称（不是嵌套文件夹），这将起作用。

您还可以添加第二条在相反方向起作用的规则，因此浏览到`http://www.example.com/default.aspx?folder=myfolder`会导致用户看到`http://www.example.com/myfolder`：

```
<rule name="RedirectUserFriendlyURL1" stopProcessing="true">
    <match url="^default\.aspx$" />
    <conditions>
        <add input="{REQUEST_METHOD}" pattern="^POST$" negate="true" />
        <add input="{QUERY_STRING}" pattern="^folder=([^=&amp;]+)$" />
    </conditions>
    <action type="Redirect" url="{C:1}" appendQueryString="false" />
</rule> 
```

# ssh - 如何使用 python 3.2 使用 scp 发送文件？

> ID：14367020
> 
> 赞同：3
> 
> 时间：2013-01-16T20:15:58.920
> 
> 标签：ssh, python-3.2, libssh2

我正在尝试通过no-ack的python byndings for libssh2将一组文件发送到远程服务器，但由于缺乏文档，我对库的使用完全不知所措。

我尝试使用 libssh2 的 C 文档失败。

由于我使用的是 python 3.2，所以 paramiko 和 pexpect 是不可能的。任何人都可以帮忙吗？

编辑：我刚刚在 no-Ack 的博客评论中发现了一些代码。

```
import libssh2, socket, os

SERVER = 'someserver'
username = 'someuser'
password = 'secret!'

sourceFilePath = 'source/file/path'
destinationFilePath = 'dest/file/path'

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect((SERVER, 22))

session = libssh2.Session()
session.startup(sock)

session.userauth_password(username, password)

sourceFile = open(sourceFilePath, 'rb')

channel = session.scp_send(destinationFilePath, 0o644, os.stat(sourceFilePath).st_size)

while True:
    data = sourceFile.read(4096)
    if not data:
        break
    channel.write(data)

exitStatus = channel.exit_status()
channel.close() 
```

似乎工作正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T14:47:06.963

以下是如何在 Python 3.2 中使用 libssh2**获取文件。**no-Ack 向我展示了这一点。您需要 libssh2 的 Python3 绑定[https://github.com/wallunit/ssh4py](https://github.com/wallunit/ssh4py)

```
import libssh2, socket, os

SERVER = 'someserver'
username = 'someuser'
password = 'secret!'

sourceFilePath = 'source/file/path'
destinationFilePath = 'dest/file/path'

sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
sock.connect((SERVER, 22))

session = libssh2.Session()
session.startup(sock)

session.userauth_password(username, password)
(channel, (st_size, _, _, _)) = session.scp_recv(sourceFilePath, True)

destination = open(destinationFilePath, 'wb')

got = 0
while got < st_size:
    data = channel.read(min(st_size - got, 1024))
    got += len(data)
    destination.write(data)

exitStatus = channel.get_exit_status()
channel.close() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-15T18:12:39.230

下面很简单，但如果你在 linux 中运行，它不是通用的方法，如果你在 Windows 中运行，则可以工作。告诉我你是否知道要在所有操作系统平台上通用，即。

```
import os

os.system("sshpass -p 'your password' scp /opt/pysftp_server.txt root@172.19.113.87:/home") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-24T19:30:42.470

> 使用 Paramiko 库在 Python 中执行此操作（即不通过 subprocess.Popen 或类似方法包装 scp）。

狂热：[https ://stackoverflow.com/a/69596/1270589](https://stackoverflow.com/a/69596/1270589)

# ajax - AJAX 错误处理/检查

> ID：14367028
> 
> 赞同：0
> 
> 时间：2013-01-16T20:16:19.737
> 
> 标签：ajax

我正在使用我在另一个站点中使用过的方法。我不知道为什么，但 AJAX 不断出错发布“Arraynull”。我理解这意味着“数组为空”，但是当我运行 mysql 语句时，我得到了很多结果。

数据是从 Joomla 中的 MVC 组件构建的，在我测试它时，查询非常简单。

```
function loadOpenhouse() {
    $db = JFactory::getDBO();
    $query = "
        SELECT *
            FROM ".$db->nameQuote('#__mls').";";
    $db->setQuery($query);
    $openhouse = $db->loadRowList();
    echo $openhouse;
} 
```

然后视图只是将它放入 JSON 并回显它。

```
function display($tpl = null) {
        $model = $this->getModel();
        $array = $model->loadOpenhouse();
        echo json_encode($array);
} 
```

同样，简单的 AJAX 调用...

```
function runQuery(){

var url = 'index.php?option=com_singleprop&view=raw&format=raw';

$.ajax({
    url: url,
    dataType: 'json',
    success: function(data){ 
        $('#prop_details').append(data);
    },
    error: function(jqXHR, error, errorThrown) {  
            alert(jqXHR.responseText); 
    }
});

}; 
```

但在警报中，我不断收到“Arraynull”。数组不应为空。当我在 CMD 中运行查询时，我得到了值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:19:09.350

而不是回显查询结果返回它。

```
return $openhouse; 
```

# c# - 无法在 MVC 3 中使用 VAR 字符串添加多个 html 类

> ID：14367031
> 
> 赞同：2
> 
> 时间：2013-01-16T20:16:27.223
> 
> 标签：c#, html, asp.net-mvc, asp.net-mvc-3, razor

我在使用 MVC 3 时遇到了这个奇怪的问题，因为我无法使用变量将多个类分配给 html 字符串。每次我在字符串中使用空格时，它似乎都会中断。例如，如果我使用这个变量：

```
var MultipleClasses = "ClassOne ClassTwo"; 
```

然后将其作为类分配给 html 元素：

```
<tr class = @MultipleClasses>blah blah</tr> 
```

第二类总是显示在引号之外：

```
<tr class = "ClassOne" ClassTwo>blah blah</tr> 
```

有任何想法吗？或者，有什么解决方法的建议吗？非常感激！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T20:18:42.270

试试这个：

```
<tr class = "@MultipleClasses">blah blah</tr> 
```

这是因为你在属性值周围没有引号，然后你在做一个空格，所以它认为你正在尝试在 html 元素上启动下一个属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:20:42.880

在我的示例中，我有一个操作链接，并且我对其应用了多个类，例如，请参阅打击：

```
@Html.ActionLink("Administration", "Index", "Admin", null, new { @class = "btn btn_c" }) 

My css is as follows:

.btn
{
    color: yellow;
}

.btn_c
{
    background-color: red;
} 
```

# html - HTML表格格式问题

> ID：14367036
> 
> 赞同：1
> 
> 时间：2013-01-16T20:16:47.220
> 
> 标签：html, css, html-table

我目前有一个看起来像这样的代码：

```
<table border="1">
  <tbody>
    <tr>
      <td></td>
      <td></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table> 
```

我想改变它，使格式看起来像这样：

![http://i.stack.imgur.com/1xvmZ.png](../Images/f12df0520047809afc00ae9051a64230.png)

但是，似乎无论我尝试什么，都行不通。如何更改我的代码以使我的表格看起来像图像中的表格？CSS、大小和形状无关紧要，我只是在努力获得正确的模板。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:18:19.707

尝试使用[rowspan](http://www.w3schools.com/tags/att_td_rowspan.asp)：

```
<table border="1">
  <tbody>
    <tr>
      <td rowspan="2"></td>
    </tr>
    <tr>
      <td></td>
      <td></td>
    </tr>
  </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:19:01.733

您缺少的是 rowspan 标签。在 tbody 标签之后插入以下内容：

```
<tr>
<td rowspan="2"></td>
</tr> 
```

# backbone.js - 同一个父级下的2个看似独立的视图应该如何交互

> ID：14367037
> 
> 赞同：3
> 
> 时间：2013-01-16T20:16:51.253
> 
> 标签：backbone.js

请考虑以下场景：

```
<ParentView>
     <FilterSubview></FilterSubview>
     <ListSubview></ListSubview>
</ParentView> 
```

举个例子：我有一个视图，它依次显示带有过滤器的视图（用户可以选择显示书籍、杂志或两者）和带有项目的列表。filter 和 list 都有对应的模型。过滤器 - 我们可以过滤什么。列表 - 所有项目的列表。

用例：用户看到完整列表，然后可以通过仅选择所需类别来过滤结果。

问题：

*   这两个视图应该如何交互？他们应该互相了解还是应该由父视图处理？
*   谁应该存储过滤列表以显示？它可以是直接列出子视图模型，也可以是父视图可以过滤完整列表，然后将其传递给渲染。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T20:35:36.097

您的问题没有一个正确答案，但我将尝试在这里解释一种常见的惯用方式。

两个兄弟视图不应该互相认识。相反，他们应该通过某种中介通过事件进行交互。由于在您的情况下，两者都`FilterView`共享`ListSubView`一个负责渲染它们的公共父视图，因此您可以让父视图调解事件：

```
var ParentView = Backbone.View.extend({
  initialize: function() {
      this.listenTo(this.filterView, "filter", this.filterChanged);
  },
  filterChanged: function(filterValue) {
      this.listSubView.filter(filterValue);
  }
});

var FilterView = Backbone.View.extend({
  events: {
      "change .filter" : "filterValueChanged"
  },
  filterValueChanged: function() {
      var filterValue = //get filter value...
      this.trigger("filter", filterValue);
  }
}); 
```

或者（最好，甚至）你可以去掉一个中间人并使用[中介者](http://addyosmani.com/largescalejavascript/#mediatorpattern)模式。为此，您需要第三个组件，其工作是在不应该相互了解的各方之间传递消息。如果您使用的是 Backbone 0.9.9，则内置了这样一个中介：`Backbone`根对象为此目的充当全局事件总线。

所以：

```
//ListSubView
this.listenTo(Backbone, "listfilterchanged", this.filterChanged);

//FilterView
Backbone.trigger("listfilterchanged", filterValue); 
```

然后是谁应该对列表数据负责的问题。我倾向于让最专业的组件负责，但只有**一个**组件负责。在您的情况下，这意味着`ListSubView`应该管理过滤列表，但前提是`ParentView`不需要对其进行操作。不过，这只是一个概括，所以对它持保留态度，做适合你情况的事情。

# c - 在 C 中使用 printf 打印多个字符串

> ID：14367038
> 
> 赞同：0
> 
> 时间：2013-01-16T20:16:50.690
> 
> 标签：c, string, printf, scanf

> **可能重复：**
> [如何在特定字符串之后打印值](https://stackoverflow.com/questions/14362869/how-to-print-a-value-after-a-specific-string)

因此，对于我的原始作业，我必须在字符串“myprop=”之后打印一个字符，但不是有人告诉我，我需要在 = 符号之后打印几个字符串而不打印注释。

一个例子是：myprop=this is a sentence //value。基本上我需要修改 sscanf 和 printf 函数。

```
const char *get_filename_property()
{
  const char *filename  = "myfile.properties";
  const char *propkey = "myprop=";
  char buffer[1024], *buffPtr, lastChar, value[50];
  int line_num=1;
  FILE *fp;
  fp=fopen("myfile.properties", "r");
  if (fp == NULL)
  {  
    perror("Error opening file\n\n");
    return -1;
  } 

  while(fgets(buffer, 1024, fp) != NULL)
  {
    if((strstr(buffer, propkey)) != NULL)
    {  
      printf("\nmyprop= found on line %d\n", line_num);
      sscanf(buffer,"%*[^=]=%s",value); 
      printf("\nvalue is %s\n", value);
    }
    line_num++;
  } 

  if(fp)
  { 
    fclose(fp); //close the file if it is still open
  }

  return 0;
}      

int main(int argc, char *argv[]) 
{  
  get_filename_property();
  system("pause");
  return(0);
} 
```

# php - php使用json发布http请求

> ID：14367043
> 
> 赞同：0
> 
> 时间：2013-01-16T20:16:59.733
> 
> 标签：php

嗨，我正在尝试使用 POST 方法发送这个 json 对象，但我不确定如何包含下面的标题，我检查了很多示例，但没有人使用下面列出的标题。

这是我的 php 处理页面的代码，该页面将处理从 form.html 接收到的输入，并将创建要传输到 http 服务器（外部平台）的 json 对象

```
<?php 
$host ="10.10.237.8"; 
$puerto = 21098; 
$BUFF = 2048; 
$socket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP); 
$conexion = socket_connect($socket, $host, $puerto); 
if($conexion) 
{ 
    $msisdn=$_POST["msisdn"]; 
    $mensaje=$_POST["mensaje"]; 
    $php_array = array( 
        "numero" => $msisdn, 
        "mensaje" => "$mensaje", 
    ); 
    $json_array=json_encode($php_array); 
    echo "Conexion Exitosa, puerto: " . $puerto."\n\n"; 
    echo $json_array; 
    socket_write($socket, $json_array); 
    // Receive the results (if any) from the server 
    $server_response = socket_read($socket, $BUFF); 
    $decoded_response = json_decode($server_response, true); // decode the data received 
    echo $decoded_response['passphrase']; // and spit the results 
} 
else 
{ 
    echo "\nLa conexion TCP no se pudo realizar, puerto: ".$puerto; 
} 
socket_close($socket); 
?> 
```

这些是标题信息，我应该在哪里包含它们？怎么做 ？使用卷曲？你有一个很好的例子吗？

```
POST /SMBULK/BATCH HTTP/1.0
Authorization: Basic dGVzdDp0ZXN0
Host: 10.10.237.8:21098
Content-Length: 395
User-Agent: Wget/1.12 (solaris2.10)
Content-Type: application/x-www-form-urlencoded
Connection: Keep-Alive
Accept: */* 
```

我希望你能帮助我。上面的 php 代码不起作用，因为某些信息（POST、Content-Length、Content-Type、User-Agent...等）未包含在内（包含的“主机”除外）。

我设法做到了，但它不起作用：

```
<?php
$str_obj_json='{
"method":"SUBMIT","params":{
"batchType":"submit",
"batchId":"alvarons",
"origAddr":"550",
"origTon":2,
"userData":"Movistar les desea Feliz Navidad",
"submits":
 [
  {
  "messId":"mess127_001",
  "destAddr":"51975375377"}
 ]
  }
}';
$ch = curl_init('http://10.10.237.8:21098/SMBULK/BATCH');
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
curl_setopt($ch, CURLOPT_POSTFIELDS, $str_obj_json);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_HTTPHEADER, array(
'Content-Type: application/x-www-form-urlencoded',
'Content-Length: 395',
'Authorization: Basic dGVzdDp0ZXN0',
'User-Agent: Wget/1.12 (solaris2.10)',
'Connection: Keep-Alive',
'Accept: */*')
);
$result = curl_exec($ch);
?> 
```

怎么了 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T09:29:27.717

要使用 cUrl 发送 json 对象，您必须将“Content-Type: application/json”添加到标题

```
curl_setopt($curl, CURLOPT_HTTPHEADER,
                array(
'Content-type: application/json'
'Content-Length: 395',
'Authorization: Basic dGVzdDp0ZXN0',
'User-Agent: Wget/1.12 (solaris2.10)',
'Connection: Keep-Alive',
'Accept: */*'); 
```

# python - 比较 SQLAlchemy 中的 DateTime 和 Interval

> ID：14367052
> 
> 赞同：5
> 
> 时间：2013-01-16T20:17:41.330
> 
> 标签：python, mysql, sqlalchemy, flask-sqlalchemy

我有这堂课：

```
class Monitor(db.Model):
    '''
    Base Monitor class.
    '''
    __tablename__ = 'monitor'
    id = db.Column(db.Integer(), primary_key=True)
    last_checked = db.Column(db.DateTime(timezone=False))
    poll_interval = db.Column(db.Interval(),
                              default=datetime.timedelta(seconds=300)) 
```

我有这个查询，我试图只返回自（现在 - 间隔）以来未检查过的对象：

```
monitors = db.session.query(Monitor).\
           filter(or_(Monitor.last_checked < (datetime.utcnow() - Monitor.poll_interval)),
                      Monitor.last_checked == None).\
           all() 
```

但是查询什么也不返回。我很难找出正确的方法来做到这一点。我是在正确的轨道上还是我错过了什么？我使用 MySQL 作为数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T00:56:23.483

你的括号是错误的。我相信你想要的是：

```
monitors = db.session.query(Monitor).\
       filter(or_(Monitor.last_checked < (datetime.utcnow() - Monitor.poll_interval),
                  Monitor.last_checked == None)).\
       all() 
```

# c# - WPF 应用程序部署环境中的图像读取

> ID：14367057
> 
> 赞同：0
> 
> 时间：2013-01-16T20:18:14.527
> 
> 标签：c#, wpf, visual-studio-2010, visual-studio-2008, resources

我有一个像这样的 WPF 应用程序项目目录

![在此处输入图像描述](../Images/d71257b2b9e7988268319c2e48d06eb5.png)

实际上，我在 Visual Studio 项目中添加了一个名为“Resources”的文件夹，并在其中添加了一些图像。实际上，该文件夹是在上面的位置创建的。我们可以在上面的图片中看到。“Resource”文件夹中图像的默认属性如下所示

```
BuilAction:Resource
Copy output Directory:Do not Copy 
```

我正在从这个文件夹中读取一个名为“form1.ico”文件的图像，如下所示

```
<Window
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008" xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" x:Class="MyApp.FrmMain"
    Title="MyApp" Height="768" Width="1024" WindowStartupLocation="CenterScreen" x:Name="MainWindow" WindowStyle="None" Loaded="MainWindow_Loaded" ShowInTaskbar="False" ResizeMode="NoResize" WindowState="Maximized" mc:Ignorable="d" Icon="/MyApp;component/Resources/form1.ico" StateChanged="Window_StateChanged"> 
```

如果我使用 Visual Studio 2008 运行应用程序，每个人都认为工作正常。但是资源文件不是在 Bin 文件夹中创建的。我的问题是，如果我将 bin 文件夹从这个位置复制到另一个位置，然后运行创建的 exe bin 应用程序崩溃（似乎它正在搜索图像的绝对路径）如果我将资源文件夹移动到另一个位置也会发生这种情况。我试图设置像这样的图像属性

```
BuilAction:Content
Copy output Directory:copy always 
```

现在它正在 bin 文件夹中创建一个文件夹名称“资源”。但它甚至没有通过 Visual Studio 运行应用程序。它抛出一个异常，说它找不到特定的图标。

*   任何人都可以解释为什么会这样吗？
*   部署应用程序时如何复制这些资源文件夹？因为我需要我的应用程序在部署环境中从该文件夹中读取文件。
*   如果我将属性设置为嵌入式资源，是否可以在运行时用另一个图像替换图像？

提前致谢：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:40:06.520

要引用相对路径，请将您的图标位置设置为；

```
Icon="Resources/form1.ico" 
```

我不确定为什么您的图像没有被复制。

我刚刚尝试过，我的图标被复制到资源目录中的调试目录中。

可以肯定的是，您是否确定将**图标**的“构建操作”设置为“**内容**”，并将“复制到输出目录”设置为“**始终复制**”？

另外，再次确定...您是否在项目中包含该文件？也就是说，如果您将“显示所有文件”选项设置为打开，如果您右键单击该图标，则可以将其包含在项目中。

# ruby-on-rails - 如何在仪表板中显示 ActiveAdmin 菜单选项卡？

> ID：14367058
> 
> 赞同：1
> 
> 时间：2013-01-16T20:18:15.443
> 
> 标签：ruby-on-rails, activeadmin

我的 Rails 应用程序中有太多模型。而且它们不适合活动管理员的顶部菜单栏。

我想知道如何通过仪表板在垂直菜单中显示顶部菜单选项卡？

提前致谢。

例如：

*   模型 1
*   模型 2
*   模型 3
*   ...

![活跃管理员](../Images/87e0a2b7caf0be8876f48ef12917afe4.png)

**仪表板.rb**

```
ActiveAdmin.register_page "Dashboard" do

  menu :priority => 1, :label => proc{ I18n.t("active_admin.dashboard") }

  content :title => proc{ I18n.t("active_admin.dashboard") } do
    div :class => "blank_slate_container", :id => "dashboard_default_message" do
      span :class => "blank_slate" do
        span I18n.t("active_admin.dashboard_welcome.welcome")
        small I18n.t("active_admin.dashboard_welcome.call_to_action")
      end
    end

    # Here is an example of a simple dashboard with columns and panels.
    #
    # columns do
    #   column do
    #     panel "Recent Posts" do
    #       ul do
    #         Post.recent(5).map do |post|
    #           li link_to(post.title, admin_post_path(post))
    #         end
    #       end
    #     end
    #   end

    #   column do
    #     panel "Info" do
    #       para "Welcome to ActiveAdmin."
    #     end
    #   end
    # end
  end # content
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:55:52.623

您可以使用该方法的`:parent`选项`menu`将每个模型分配到每个模型的管理文件中的下拉菜单中。

所以：

```
ActiveAdmin.register User do
  menu :parent => "User Data"
end 
```

如果您想在仪表板页面上创建链接列表，您的代码将如下所示：

```
 content :title => proc{ I18n.t("active_admin.dashboard") } do
    columns do
      column do
        panel "Models" do
          ul do
            li link_to("Users", admin_users_path)
            li link_to("Admin Users", admin_admin_users_path)
          end
        end
      end
   end 
```

# c++ - ACE/ActivationQueue 的 POCO 等价物是什么？

> ID：14367059
> 
> 赞同：1
> 
> 时间：2013-01-16T20:18:18.277
> 
> 标签：c++, poco, message-queue, ace

[Poco::NotificationQueue](http://pocoproject.org/docs/Poco.NotificationQueue.html)是否与[ACE/ActivationQueue](http://www.riverace.com/ACE/ace55/html/ace/classACE__Activation__Queue.html)相同？

# deployment - 有没有办法对heroku HTTP Post部署挂钩进行身份验证？

> ID：14367062
> 
> 赞同：1
> 
> 时间：2013-01-16T20:18:29.023
> 
> 标签：deployment, heroku

Heroku 允许您在部署应用程序后 ping URL：

[https://devcenter.heroku.com/articles/deploy-hooks#http-post-hook](https://devcenter.heroku.com/articles/deploy-hooks#http-post-hook)

但是，我没有看到这些请求被签名或以其他方式进行身份验证。

除了使用晦涩的网址之外，还有什么方法可以对这些进行身份验证？

-缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:45:01.560

您可以并且应该使用 HTTP 基本身份验证。

# jquery - jQuery处理未定义的数组值

> ID：14367069
> 
> 赞同：0
> 
> 时间：2013-01-16T20:18:53.417
> 
> 标签：jquery, arrays, class, variables, undefined

我正在查找数组值以来回导航滑块，并且在我的逻辑中遇到了关于未定义值的漏洞。就目前而言，我在数组中查找当前幻灯片，添加或减去数组中的位置，如果该值存在，则更新位置。但是，如果数组中的值不存在（即数组中有 3 个对象并且滑块试图查找#4），它会引发类型错误。

需要一种更好的方式来表达“如果存在价值，则更新）。看起来很简单，但我还没有想到一个好的解决方案。

我想我可以很容易地摆脱这个`update`变量，但我认为最好在数组中查找一次值并将其保存以用于 body 类更新，知道我的意思吗？

请参阅下面的代码，谢谢！

```
function slide(direction){

/* Get Current */

    var current = $bod.attr('class'),
        next,
        update;

/* Navigate */

    if (direction === 'right'){

        next = $current + 1;

    } else if (direction === 'left'){

        next = $current - 1;

    } else if (direction === 'home'){

        next = $home;
    }

/* Update */

    // Issue is here. If the next slide is undefined, everything crashes

    update = $slides[next].slide;

    // Was trying to address the issue with this line:

    if (update){

        $bod.removeClass(current).addClass(update);

        $current = next;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:23:26.847

试试下面的。

```
update = $slides[next] ? $slides[next].slide : false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:25:10.643

您应该检查边界。

```
if ((direction === 'right') && ($current < $slides.length - 1)){
  next = $current + 1;
} else if ((direction === 'left') && ($current > 0)){
  next = $current - 1;
} else if (direction === 'home'){
  next = $home;
} 
```

# sql-server - 如何在不使用 Top 子句的情况下在 T-SQL 中选择 Top %？

> ID：14367070
> 
> 赞同：1
> 
> 时间：2013-01-16T20:18:55.180
> 
> 标签：sql-server, tsql

如何在不使用 Top 子句的情况下从表中选择 Top 40%（或 Top percent，赋值有点模棱两可）？这个问题是针对 T-SQL、SQL Server 2008 的。我不允许在作业中使用 Top。

谢谢。

这是我尝试过的，但似乎很复杂。没有更简单的方法吗？

```
select top (convert (int, (select round (0.4*COUNT(*), 0) from MyTable))) * from MyTable 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:22:00.080

试试这个`NTILE`功能：

```
;WITH YourCTE AS
(
    SELECT 
        (some columns),
        percentile = NTILE(10) OVER(ORDER BY SomeColumn DESC)
    FROM
        dbo.YourTable
)
SELECT *
FROM YourCTE
WHERE percentile <= 4 
```

这`NTILE(10) OVER(....)`会在您的数据上创建 10 组百分比 - 因此，前 40% 是第 40 组。该结果的 1、2、3、4

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T20:23:06.817

使用 NTILE

```
CREATE TABLE  #temp(StudentID CHAR(3),  Score  INT)

INSERT #temp  VALUES('S1',75 )
INSERT #temp  VALUES('S2',83)
INSERT #temp  VALUES('S3',91)
INSERT #temp  VALUES('S4',83)
INSERT #temp  VALUES('S5',93 )
INSERT #temp  VALUES('S6',75 )
INSERT #temp  VALUES('S7',83)
INSERT #temp  VALUES('S8',91)
INSERT #temp  VALUES('S9',83)
INSERT #temp  VALUES('S10',93 )

SELECT * FROM (
SELECT NTILE(10) OVER(ORDER BY Score) AS NtileValue,*
FROM #temp) x
WHERE NtileValue <= 4
ORDER BY 1 
```

有趣的是，我今天在博客上写了 NTILE：[有人使用 NTILE() 窗口函数吗？](http://blogs.lessthandot.com/index.php/DataMgmt/DBProgramming/does-anyone-use-the-ntile)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T20:36:36.153

`NTILE(10)`到目前为止给出的答案的一个问题是，如果表有 15 行，它们将返回 8 行 (53%) 而不是正确的数字来弥补 40% (6)。

如果行数不能被桶数整除，则额外的行都进入第一个桶而不是均匀分布。

这种替代方法（借用 SQL Menace 的表）避免了这个问题。

```
WITH CTE
     AS (SELECT *,
                ROW_NUMBER() OVER ( ORDER BY Score) AS RN,
                COUNT(*) OVER()                     AS Cnt
         FROM   #temp)
SELECT StudentID,
       Score
FROM   CTE
WHERE  RN <= CEILING(0.4 * Cnt ) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T20:25:57.960

为任意数量的记录计算并设置 ROWCOUNT。然后对有限集执行查询。

```
declare @rc as integer
select @rc = count(*)*0.40 from CTE
Set ROWCOUNT @rc
select * from CTE 
```

ROWCOUNT 尚未弃用 - 请参阅[http://msdn.microsoft.com/en-us/library/ms188774.aspx](http://msdn.microsoft.com/en-us/library/ms188774.aspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T20:29:59.423

使用 Top t-sql 命令：

```
select top 10 [Column_1],
[Column_2] from [Table]
order by [Column_1] 
```

使用分页方法：

```
select 
[Column_1],
[Column_2]
from 
    (Select ROW_NUMBER() Over (ORDER BY [Column_1]) AS Row,
    [Column_1],
    [Column_2]
    FROM [Table]) as [alias]
WHERE (Row between 0 and 10) 
```

这是按 [Column_1] 排序的前 10 名...请注意，这是使用 [variable] 文档方法。

如果您可以提供列名和表名，我可以编写更有益的 t-sql，例如要找到前 40%，您将需要执行另一个子查询来获取所有行的计数，然后进行除法，我'在我进行主要查询之前，我可能会将此作为查询。

# php - Magento：从一个组中获取所有客户

> ID：14367071
> 
> 赞同：4
> 
> 时间：2013-01-16T20:18:56.273
> 
> 标签：php, magento

就像标题上所说的那样，我需要将所有用户分配给特定的组。

在 magento 中，我创建了一个名为“customers”的客户组，ID 为 4。

现在我需要使用自定义脚本列出该组中除 magento 之外的所有用户，但我找不到解决方案。

使用这个小代码，我可以获得所有注册用户，你知道我如何过滤它以仅获得组 ID 4 中的客户吗？

```
 $collection = Mage::getModel('customer/customer')
        ->getCollection()
        ->addAttributeToSelect('*');
    $result = array();
    foreach ($collection as $customer) {
        $result[] = $customer->toArray();
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-16T21:16:49.117

您可以轻松地将过滤器添加到集合中，以返回特定组的所有客户。

```
$collection = Mage::getModel('customer/customer')
        ->getCollection()
        ->addAttributeToSelect('*')
        ->addFieldToFilter('group_id', 4); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:22:47.477

我认为您应该添加： ->addFieldToFilter('customer_group_id','1');

# php - 如何使用 PEAR PHP Http_Request2 库以 PUT 方法发送数据

> ID：14367075
> 
> 赞同：2
> 
> 时间：2013-01-16T20:19:21.263
> 
> 标签：php, web-services, rest, pear, http-put

我正在使用 PEAR 库 Http_Request2。我一直没有成功搜索有关如何发出 PUT 请求并将参数传递给 Web 服务的文档。谁能提供一些帮助？

对于 POST 请求，很简单：

```
 $request = new HTTP_Request2 ( "http://my.url.com");
 $request->setMethod(HTTP_Request2::METHOD_POST);
 $request->addPostParameter('data', "blah"); //easy to add post params...
 $response = $request->send(); 
```

但是，将方法更改为 PUT 时，我不知道如何发送数据：

```
 $request = new HTTP_Request2 ( "http://my.url.com");
 $request->setMethod(HTTP_Request2::METHOD_PUT);

 // ?????  missing secret sauce to add data to put request....

 $response = $request->send(); 
```

有人伸出援手吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:44:43.810

您需要使用`setBody()`来设置您的 PUT 数据。不要忘记标题，例如

```
$request->setHeader('Content-type: application/json');
$request->setBody('{"foo":"bar"}');
$response = $request->send(); 
```

# c# - 在 C# 中使用 Excel 将单元格值传输到二维字符串数组

> ID：14367077
> 
> 赞同：2
> 
> 时间：2013-01-16T20:19:27.003
> 
> 标签：c#, excel, multidimensional-array, vba

我需要有人来创建一种方法，将 Excel 电子表格中的所有单元格值转换为 2D 数组。

我正在使用 C# 中的功能区与 Excel 一起工作，但我无法让它工作。

```
 private string[,] GetSpreadsheetData () 
  {
        try
        {
            Excel.Application exApp =
            Globals.TSExcelAddIn.Application as Excel.Application;
            Excel.Worksheet ExWorksheet = exApp.ActiveSheet as Excel.Worksheet;
            Excel.Range xlRange = ExWorksheet.get_Range("A1","F188000");

            object[,] values = (object[,])xlRange.Value2;
            string[,] tsReqs = new string[xlRange.Rows.Count, 7];
            char[] alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ".ToCharArray();

            for (int i = 0; i < tsReqs.GetLength(0); i++)
            {
                for (int z = 0; z < tsReqs.GetLength(1); z++)
                {
                    if(values[i+1,z+1] != null)
                        tsReqs[i, z] = values[i + 1, z + 1].ToString();
                }
            }
            return tsReqs;
        }

        catch
        {
            MessageBox.Show
                ("Excel has encountered an error. \nSaving work and exitting");
            return null;
        }
    } 
```

另外，如果有人有更有效的方法来做到这一点，我将不胜感激。

```
 Excel.Range xlRange = ExWorksheet.get_Range("A1","F188000"); 
```

从 A1 一直读取到 F188000 单元格，我只是希望它继续读取，直到它到达绝对没有数据的行。

```
 -        Caught: "Index was outside the bounds of the array." (System.IndexOutOfRangeException)  Exception Message = "Index was outside the bounds of the array.", Exception Type = "System.IndexOutOfRangeException" 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T22:13:14.380

您可以考虑使用`ExWorksheet.UsedRange`而不是`ExWorksheet.get_Range("A1","F188000")`

**编辑：**另外，我认为如果您使用 Range 的 .Text 字段，该值会自动转换为字符串，因此此处无需使用 .Value2

```
Excel.Range rng = ExWorksheet.UsedRange;
int rowCount = rng.Rows.Count;
int colCount = rng.Columns.Count;

string[,] tsReqs = new string[rowCount, colCount];

for (int i = 1; i <= rowCount; i++)
{
    for (int j = 1; j <= colCount; j++)
    {
        string str = rng.Cells[i, j].Text;
        tsReqs[i - 1, j - 1] = str;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:57:19.453

尝试这个

```
 private static void printExcelValues(Worksheet xSheet)
    {
        Range xRng =xSheet.Cells.SpecialCells(
            XlCellType.xlCellTypeConstants);
        var arr = new string[xRng.Rows.Count,xRng.Columns.Count];
        foreach (Range item in xRng)
        {
            arr[item.Row-1,item.Column-1]=item.Value.ToString();
        }
    } 
```

您可以使用 | 指定更多单元格类型，如 XlCellType.xlCellTypeFormulas 或您想要的任何其他类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T14:03:23.107

我不得不做一些非常相似的事情。读取一个 excel 文件需要一段时间……我采取了不同的方法，但我完成了工作并获得了立竿见影的效果。

首先，我给每一列自己的数组。我将电子表格中的每一列保存为 CSV（逗号分隔）文件。用记事本打开该文件后，我能够将用逗号分隔的 942 个值复制到数组的初始化中

```
int[] Column1 = {300, 305, 310, ..., 5000};
                 [0]  [1]  [2]  ...  [941] 
```

现在...如果您为每个列执行此操作，则该位置将类似于您的“电子表格”的每个“列”的“行”。

这种奇怪的方法对我来说非常有效，因为我需要将用户输入尺寸与电子表格中“宽度”列中的值进行比较，以获取有关电子表格中每个相应尺寸的信息。

注意：如果您的单元格包含字符串而不是像我这样的整数，您可以使用枚举方法：

```
enum column1 { thing_1, thing_2, ..., thing_n,}
                 [0]      [1]           [n] 
```

这是我的代码如果您想看一下：（这不是将电子表格转换为某些数组的代码-这只是几行代码，具体取决于您的列数-这是我编写的整个查找方法)

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace PalisadeWorld
{   
//struct to store all the positions of each matched panel size in an array 'Identities'
struct ID
    {
        public int[] Identities;
        public ID(int[] widths, int rows)
        {   
            //Column1 from spreadsheet
            int[] allWidths = { 300, 305, 310, 315, 320, 325, 330, ..., 5000 };
            int i,j;
            int[] Ids = new int[rows];

            for (i = 0; i < rows; i++)
            {
                for (j = 0; j < 941; j++)
                {
                    if (widths[i] == allWidths[j])
                    {
                        Ids[i] = j;
                        break;
                    }
                }
            }
            this.Identities = Ids;
        }
        public override string ToString()
        {
            string data = String.Format("{0}", this.Identities);
            return data;
        }
    }

class LookUpSheet
{   
    //retrieve user input from another class
    public int[] lookUp_Widths {get; set;}
    public int lookUp_Rows { get; set; }

    //Method returning desired values from Column2
    public int[] GetNumPales1()
    {
        //column2
        int[] all_numPales = { 2, 2, 2, 2, 2, 2, 2, 2, 2, ..."goes on till [941]"...};
        int[] numPales = new int[lookUp_Rows];

        ID select = new ID(lookUp_Widths, lookUp_Rows);

        for (int i = 0; i < lookUp_Rows; i++)
        {
            numPales[i] = all_numPales[select.Identities[i]];
        }

        return numPales;
    }
    //Method returning desired values from Column3
    public int[] GetBlocks1()
    {
        //column3
        int[] all_blocks = { 56, 59, 61, 64, 66, 69, 71, 74, "goes on till [941]"...};
        int[] blocks = new int[lookUp_Rows];

        ID select = new ID(lookUp_Widths, lookUp_Rows);

        for (int i = 0; i < lookUp_Rows; i++)
        {
            blocks[i] = all_blocks[select.Identities[i]];
        }
        return blocks;
    } 
```

...

继续浏览我的电子表格的每一列

真的希望这可以帮助某人。干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T22:02:31.497

您的数组大小不同。您的值来自`A1:F188000`6 列，但您正在循环遍历`tsReqs`7 列的列。看起来您正在尝试考虑`values`将是一个基于 1 的数组的事实，但没有正确考虑这一点。

将声明更改`tsReqs`为：

```
string[,] tsReqs = new string[xlRange.Rows.Count, 6]; 
```

你应该没事。

# java - 哈希表中的关键内容的最佳实践

> ID：14367081
> 
> 赞同：7
> 
> 时间：2013-01-16T20:19:39.017
> 
> 标签：java, algorithm, data-structures, hashmap, hashtable

最好的查找结构是`HashTable`. *它平均*提供恒定的访问（在最坏的情况下是线性的）。
这取决于哈希函数。好的。
我的问题如下。假设一个好的实现，`HashTable`例如`HashMap`是否有关于映射中传递的键的最佳实践？我的意思是建议键必须是不可变对象，但我想知道是否有其他建议。
例如密钥的大小？例如，在一个好的哈希映射中（以上述方式），如果我们用作`String`键，“瓶颈”不会出现在字符串比较中`equals`（试图找到键）吗？那么钥匙应该保持小吗？还是有不应该用作键的对象？例如`URL`? 在这种情况下，您如何选择使用什么作为密钥？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:10:15.613

HashMap 表现最好的键可能是 Integer，其中`hashCode()`和`equals()`实现为：

```
public int hashCode() {
    return value;
}

public boolean equals(Object obj) {
    if (obj instanceof Integer) {
        return value == ((Integer)obj).intValue();
    }
    return false;
} 
```

也就是说，HashMap 的目的是将某些对象（值）映射到其他对象（键）。哈希函数用于寻址（值）对象的事实是提供快速、恒定时间的访问。

> 建议密钥必须是不可变对象，但我想知道是否还有其他建议。

建议是将对象映射到您需要的对象：不要认为更快；但想想什么是最适合您的业务逻辑来处理要检索的对象。

重要的要求是**键对象必须是不可变**的，因为如果您在将键对象存储到 Map 之后更改它，以后可能无法检索关联的值。

中的*关键词*是。你的对象应该只是*map*。如果你牺牲了优化键的映射任务，那么你就违背了 Map 的目的——可能没有实现任何性能提升。`HashMap``Map`

 *我 100% 同意您问题中的前两条评论：

> 主要的限制是它必须是你想要查找的东西;)
> – Oli Charlesworth
> 
> 一般规则是使用您需要查找的任何内容作为键。
> ——路易斯·瓦瑟曼

记住优化的两条规则：

1.  不。
2.  （仅限专家）还没有。

第三条规则是：*profile before to optimize*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:32:26.027

您应该使用您想使用的任何键来查找数据结构中的内容，它通常是特定于域的约束。话虽如此，请记住`hashCode()`和`equals()`都将用于在表中查找键。

`hashCode()`用于查找键的位置，while`equals()`用于确定您要搜索的键是否真的是我们刚刚找到的键`hashCode()`。

例如，考虑使用[单独的链接](http://en.wikipedia.org/wiki/Hash_table#Separate_chaining)`a`在表中`b`具有相同哈希码的两个键。然后，一旦我们找到包含and的列表的索引，就需要测试表中是否可能同时存在and 。`a``a.equals(key)``a``b``a``b``hashCode()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T00:46:38.717

> 建议密钥必须是不可变对象，但我想知道是否还有其他建议。

**值的键应该是`final`。**

大多数时候，对象的一个​​字段被用作键。如果该字段发生更改，则地图将找不到它：

```
void foo(Employee e) {
  map.put(e.getId(), e);
  String newId = e.getId() + "new";
  e.setId(newId);
  Employee e2 = e.get(newId);
  // e != e2 !
} 
```

所以`Employee`根本不应该有一个`setId()`方法，但这很困难，因为当你写的时候`Employee`你不知道它会被什么键控。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T23:26:47.153

I digged up the implementation. I had an assumption that the effectiveness of the `hashCode()` method will be the key factor.

When I looked into the `HashMap()` and the `Hashtable()` implementation, I found that the implementation is quite similar (with one exception). Both are using and storing an internal hash code for all entries, so that's a good point that `hashCode()` is not so heavily influencing the performance.

Both are having a number of buckets, where the values are stored. It is important balance between the number of buckets (say n), and the average number of keys within a bucket (say k). The bucket is found in O(1) time, the content of the bucket is iterated in O(k) size, but the more bucket we have, the more memory will be allocated. Also, if many buckets are empty, it means that the `hashCode()` method for the key class does not the hashcode wide enough.

The algorithm works like this:

```
Take the `hashCode()` of the Key (and make a slight bijective transformation on it)
Find the appropriate bucket
Loop through the content of the bucket (which is some kind of LinkedList)
Make the comparison of the keys as follows:
1\. Compare the hashcodes 
    (it is calculated in the first step, and stored for the entry)
2\. Examine if key `==` the stored key (still no call) 
    (this step is missing from Hashtable)
3\. Compare the keys by `key.equals(storedKey)` 
```

To summarize:

*   hashCode() is called once per call (this is a must, you cannot do without it)
*   equals() is called if the hashCode is not so well spread, and two keys happen to have the same hashcode

The same algorithm is for `get()` and `put()` (because in put() case you can set the value for an existing key). So, the most important thing is **how the `hashCode()` method was implemented**. That is the most frequently called method.

Two strategies are: **make it fast** and **make it effective** (well-spread). The JDK developers made efforts to make it both, but it's not always possible to have them both.

*   `Numeric` types are good
*   `Object` (and non-overriden classes) are good (`hashCode()` is native), except that you cannot specify an own `equals()`
*   `String` is **not good**, iterates through the characters, but caches after that (see my comment below)
*   Any class with synchronized hashCode() is not good
*   Any class that has an iteration is not good
*   Classes that have hashcode cache are a bit better (depends on the usage)

*Comment on the String*: To make it fast, in the first versions of JDK the String hash code calculation was made for the first 32 characters only. But the hashcode it produced was not well spread, so they decided to take all the characters into the hashcode.*

# oracle - Oracle 从两个表中选择数据，如果一个为空，则返回 null

> ID：14367085
> 
> 赞同：3
> 
> 时间：2013-01-16T20:19:45.943
> 
> 标签：oracle, select, join

我在 oracle 数据库中有两个表（fruit_cost 和fruit_availability），详细信息如下：

**fruit_cost 如下所示：**

fruit_name | fruit_cost
苹果|高分辨率照片| CLIPARTO 30
橙| 7
瓜 | 14

**fruit_availability 看起来像这样：**

fruit_name | fruit_availability
表是空

的，有什么好的选择可以得到这样的结果：

fruit_name | 水果成本 | fruit_availability
苹果 | 30 | 空
橙 | 7 | 空
瓜| 14 | 空值

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T20:27:09.983

您可以使用`LEFT JOIN`.

A`LEFT JOIN`将返回表中的所有记录，`fruit_cost`而不管表中是否有匹配的记录`fruit_availability`。您的查询将如下所示：

```
select fc.fruit_name, 
  fc.fruit_cost,
  fa.fruit_availability
from fruit_cost fc
left join fruit_availability fa
  on fc.fruit_name = fa.fruit_name 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/8ba9f/3)

结果是：

```
| FRUIT_NAME | FRUIT_COST | FRUIT_AVAILABILITY |
------------------------------------------------
|      melon |         14 |             (null) |
|     orange |          7 |             (null) |
|      apple |         30 |             (null) | 
```

如果您在学习连接语法时需要帮助，这里有一个很好[的连接可视化解释](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T20:28:00.527

甲骨文语法：

```
select *
from fruit_cost fc, fruit_availability fa
where fc.fruit_name = fa.fruit_name (+); 
```

SQL Fiddle[在这里](http://www.sqlfiddle.com/#!4/0d889/1)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:27:40.660

```
select c.fruit_name, c.fruit_cost, a.fruit_availability
from fruit_cost c 
   left outer join on fruit_availability a on
   c.fruit_name = a.fruit_name
order by c.fruit_name 
```

# sql - 仅 SQL 拉取最近日期的记录

> ID：14367088
> 
> 赞同：1
> 
> 时间：2013-01-16T20:19:49.120
> 
> 标签：sql, sql-server

更新：它现在可以正确提取每件商品最近交付的供应商名称。我现在遇到的问题是它没有提取以前没有交付的记录（空白 dlvry_dt）。有谁知道如何解决这一问题？

到目前为止，非常感谢您的帮助！

```
;WITH Items As(
Select 
a.bin, a.item, d.item_description As 'Vintage', a.min_reorder, 
c.minor_item_class, c.minor_class_description, a.qty_available, 
a.reorder_threshold As 'Par', a.avg_unit_cost, 
a.qty_available*a.avg_unit_cost As 'Valuation', e.dlvry_dt, g.supplier, 
g.supplier_name,
RowNum = ROW_NUMBER() OVER(PARTITION BY a.item ORDER BY dlvry_dt DESC)

from argus.STORE_INVENTORY a, argus.MAJOR_ITEM_CLASS b,
argus.MINOR_ITEM_CLASS c, argus.ITEM_MASTER d, argus.DELIVERY e

inner join argus.delivery_line_item f
on e.delivery = f.delivery
and e.purchase_order = f.purchase_order
and e.customer = f.customer
and e.store = f.store
and e.supplier = f.supplier
full outer join argus.supplier g
on e.supplier = g.supplier

where a.customer = 10005
and a.store = 1
and d.item = a.item
and b.major_item_class = c.major_item_class
and d.minor_item_class = c.minor_item_class
and (b.major_item_class = 15 or b.major_item_class = 17 or b.major_item_class = 14)
and (c.minor_item_class = 830 or c.minor_item_class = 175 or c.minor_item_class = 880 or c.minor_item_class = 661 or c.minor_item_class = 651 or c.minor_item_class = 785 or c.minor_item_class = 716 or c.minor_item_class = 810 or c.minor_item_class = 850 or c.minor_item_class = 885 or c.minor_item_class = 998 or c.minor_item_class = 840 or c.minor_item_class = 855 or c.minor_item_class = 280) 
and f.line_item_status <> 'D'
and e.customer = 10005
and e.store = 1
and f.item = a.item
--and (c.minor_item_class = 176 or c.minor_item_class = 651 or c.minor_item_class = 661 or c.minor_item_class = 716 or c.minor_item_class = 810 or c.minor_item_class = 830 or c.minor_item_class = 840 or c.minor_item_class = 850 or c.minor_item_class = 855 or c.minor_item_class = 885 or c.minor_item_class = 998) 
Group By c.minor_class_description, a.bin, a.item, d.item_description, a.min_reorder, a.qty_available, a.reorder_threshold, a.avg_unit_cost, c.minor_item_class, e.dlvry_dt, g.supplier, g.supplier_name

)
Select bin, item, Vintage, min_reorder, minor_item_class, minor_class_description, qty_available, Par, avg_unit_cost,  Valuation, dlvry_dt, supplier, supplier_name
From Items
Where RowNum =1
Order By minor_class_description 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:28:20.157

一种方法是使用 CTE（通用表表达式）。

使用此 CTE，您可以按某些标准（即您的）对您的数据进行分区，`Item`并让 SQL Server 为每个“分区”从 1 开始为您的所有行编号，并按某些标准排序。

所以尝试这样的事情：

```
;WITH Items AS
(
   SELECT 
       Item, Vintage, Qty, DeliveryDate,
       RowNum = ROW_NUMBER() OVER(PARTITION BY Item ORDER BY DeliveryDate DESC) 
   FROM 
       dbo.YourTableHere   -- possibly several JOINs
   WHERE
      ......
)
SELECT 
   Item, Vintage, Qty, DeliveryDate
FROM 
   Items
WHERE
   RowNum = 1 
```

在这里，我只为每个“分区”（即每个`Item`）选择“第一个”条目 - 按降序排列`DeliveryDate`。

这是否接近你正在寻找的东西？

**更新：**如果您也想在 中包含可能的`NULL`条目`DeliveryDate`，您可以使用类似

```
 RowNum = ROW_NUMBER() OVER(PARTITION BY Item ORDER BY ISNULL(DeliveryDate, '99991231' DESC) 
```

变成`NULL`9999 年 12 月 31 日的日期 - 当按降序排序时，这些日期总是排在第一位。

# list - 在 Sencha Architect 中将静态和动态元素添加到 Ext-JS 列表

> ID：14367092
> 
> 赞同：1
> 
> 时间：2013-01-16T20:19:56.250
> 
> 标签：list, extjs, touch, store, ext.list

我正在使用 Sencha Architect 开发 Sencha 2 移动应用程序。我想要一个带有两个分隔符的列表。一个分隔符将被称为“当前位置”，列表元素也将显示“当前位置”，可以单击它。下一个标题会说“我的位置”，在它下面它将是一个由名为 locationStore 的商店填充的列表。

我知道如何从商店填充列表，但我不确定如何将静态元素（标题和单个列表项）与动态元素（标题和更长的列表）混合。

我在几个视图中重用了这个列表，所以如果它可以从商店以某种方式填充，那就太好了。

希望有人在这个话题上有两分钱。

凉爽的。

# scala - 在 scala shell 脚本中增加 scala/java 堆大小

> ID：14367094
> 
> 赞同：2
> 
> 时间：2013-01-16T20:20:03.263
> 
> 标签：scala, memory-management, out-of-memory, heap-memory

我有一个带有以下标头的 scala shell 脚本：

```
#! /bin/sh
env JAVA_OPTS="-Xmx20g"
exec scala -classpath ./target/scala-2.9.1/classes:lib/* "$0" "$@"
!# 
```

不幸的是，无论我如何设置 JAVA_OPTS 变量，程序都会因内存不足错误而终止。

如何在这样的 shell 脚本中正确配置堆大小而不弄乱全局 JAVA_OPTS 环境变量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:31:44.707

来自 Scala 帮助：

> 到达 java 运行时的 scala 选项：
> 
> ...
> 
> -J<arg> -J 被剥离并按原样传递给 java

因此，您可以`-J-Xmx20g`向 scala 添加参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:14:26.247

为 Scala REPL 使用的 JVM 提供命令行选项：

```
$ env JAVACMD=JAVA JAVA_OPTS="-Xmx1024M -Xms16M -Xss16M" scala 
```

从 REPL 验证：

```
val r = Runtime.getRuntime
println("Memory usage: "+ (r.totalMemory - r.freeMemory) + " of " + r.maxMemory) 
```

内存使用量：66712264 of 954728448

# c# - 为 iOS 应用创建 C# RSA 公钥

> ID：14367097
> 
> 赞同：1
> 
> 时间：2013-01-16T20:20:07.730
> 
> 标签：c#, objective-c, rsa

我们有这个商业案例，我们的 c# web 应用程序将为相应的 iOS 移动设备生成一个公钥/私钥对。移动设备将使用公钥加密数据并将其发送回服务器。

我正在使用以下 c# 代码。

```
 const int PROVIDER_RSA_FULL = 1;
        const string CONTAINER_NAME = "KeyContainer";
        CspParameters cspParams;
        cspParams = new CspParameters(PROVIDER_RSA_FULL);
        cspParams.KeyContainerName = CONTAINER_NAME;
        cspParams.Flags = CspProviderFlags.UseMachineKeyStore;
        cspParams.ProviderName = "Microsoft Strong Cryptographic Provider";
        var rsa = new RSACryptoServiceProvider(2048,cspParams);
        rsa.PersistKeyInCsp = false;
        string publicPrivateKeyXML = rsa.ToXmlString(true); 
```

之后，我不知道如何将 rsa.ToXmlString 以它可以与 Objective-c 加密库支持的格式获取到 iOS 应用程序。如何在不使用 OpenSSL 的情况下将公钥（模数 + 指数）转换为 iOS 可以理解和加密数据的东西。这个密钥生成会发生很多（不是一次），任何新的库都必须在使用前获得批准。因此，不需要额外库的答案受到青睐。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-05-28T00:41:25.580

请使用此参考中的此 C#，此类将生成 SSh pem 样式的公共和私有 RSA 密钥：

[示例类](https://stackoverflow.com/questions/23734792/c-sharp-export-private-public-rsa-key-from-rsacryptoserviceprovider-to-pem-strin/23739932#23739932)

# javascript - 如何将属性添加到嵌套的javascript数组（对象）？

> ID：14367101
> 
> 赞同：2
> 
> 时间：2013-01-16T20:20:21.530
> 
> 标签：javascript, object, recursion

我正在尝试向 javascript 嵌套数组对象添加属性...

我需要遍历树获取文本属性的值并将其转换为小写并将此数据添加为新属性（lowerText）

旧数组：

```
 var oldObject= [{
        text: "Subgroup3",
        items: [{
            text: "subgroup5",
            items: [{
                text: "subgroup6",
                items: [{
                    text: "subgroup7",
                    items: [{
                        text: "subgroup8"
                    }]
                }]
            }]
        }]
    }] 
```

我需要如下的新数组对象：

```
 var newObject= [{
        text: "Subgroup3",
        lowerText:"subgroup3",
        items: [{
            text: "subgroup5",
            lowerText:"subgroup5",
            items: [{
                text: "subgroup6",
                lowerText:"subgroup6",
                items: [{
                    text: "subgroup7",
                    lowerText:"subgroup7",
                    items: [{
                        text: "subgroup8",
                        lowerText:"subgroup8",
                    }]
                }]
            }]
        }]
    }] 
```

这是我尝试过的，循环遍历每个对象并将项目（数组）传递给递归函数来设置属性，但它似乎不能正常工作。不知道我做错了什么，有人可以帮我处理这段代码吗？

```
for (var i = 0; i < data.length; i++) {
                    data[i].lowerText=data[i].text.toLowerCase();
                    loopTree(data[i].items);
                }

function loopTree(node){
 if (node) {
        $.each(node, function (idx, item) {
            item.lowerText=item.text.toLowerCase();
            if(item.items){
                loopTree(item.items)
            }
        });
    }
    } 
```

编辑：下面的代码完成了这项工作。

```
 for (var i = 0; i < data.length; i++) {
                    if(data[i]){
                        process( data[i]);
                    }
                }

function process(val) {
    val.lowerText = val.text.toLowerCase();  
    if(val.items){
        for(var i = 0, len = val.items.length; i < len; i++) {
            process(val.items[i]);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:35:23.703

如果您不想克隆对象而只是修改现有对象，请尝试以下操作：

```
function process(val) {
   val.lowerText = val.text.toLowerCase();

   for(var i = 0, len = val.items.length; i < len; i++) {
       process(val.items[i]);
   }
}

process(obj); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T20:24:54.540

如果要保留旧数组中的值，只需将新对象推送到旧数组中：

`oldObject.push(newObject[0]);`

如果你只需要替换整个数组，它微不足道，

`oldObject = newObject;`

# c# - MVVMCross 将值传递给具有 2 个构造函数的 ViewModel

> ID：14367104
> 
> 赞同：3
> 
> 时间：2013-01-16T20:20:31.293
> 
> 标签：c#, variables, constructor, mvvmcross

我有 2 `ViewModels`(`ConfigurationViewModel`和`EditConfigurationViewModel`)。在`ConfigurationViewModel`我有以下代码：

```
 public ConfigurationViewModel()
    {
        NewConfigCommand = new MvxRelayCommand(DoNewConfig);
        EditConfigCommand = new MvxRelayCommand<ConfigurationSet>(DoEditConfig);
    }

    private void DoNewConfig()
    {
        this.RequestNavigate<EditConfigurationViewModel>();
    }

    private void DoEditConfig(ConfigurationSet config)
    {
        this.RequestNavigate<EditConfigurationViewModel>(new { id = config.Id.ToString() });
    } 
```

在 EditConfigurationViewModel 我有以下代码：

```
 public EditConfigurationViewModel()
    {
        Configuration = new ConfigurationSet();
    }

    public EditConfigurationViewModel(string id)
    {
        Configuration = ConfigDataStore.GetConfiguration(Guid.Parse(id));
    } 
```

我想要实现的是非常简单的......在触发`ConfigurationViewModel`时`NewConfigCommand`，我想导航到`EditConfigurationViewModel`，并使用无参数构造函数。当`EditConfigCommand`被触发时，我想使用接收`string`.

这段代码的问题是，无论触发什么命令，总是使用无参数构造函数，并且代码永远不会到达另一个构造函数。

我做了一些实验，通过删除无参数构造函数，结果是调用了另一个构造函数，我得到了预期的结果`EditConfigurationCommand`，但是如果我尝试触发`NewConfigurationCommand`异常，则由于无参数构造函数的不存在（到目前为止，一切都很好）。

不幸的是，此时我没有安装 VS2010，所以我无法通过 PCL 代码进行调试......我做了一些“眼睛调试”并找到了这个类`MvxViewModelLocator`。我认为问题出在此处。也许在`DoLoad`尝试获取`MethodInfo`...的方法中

在这一点上，我只想知道我是否做错了什么，或者这是否是预期的结果。同时我想我会冒险安装VS2010并祈祷它不会破坏任何东西......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:15:01.343

在 PCL 调试问题上，为什么不直接添加 Win8 或 WP7/8 UI - 然后您可以通过 PCL 代码进行调试...

* * *

关于主要问题 - 关于如何使用多个构造函数......我建议你**不要**。

对我来说，edit 和 new 是两个不同的视图和两个不同的视图模型——它们可能共享共同的属性和共同的布局——但这可以通过继承、使用 UserControls、使用`include`axml 等来实现。

有关我通常用于新建和编辑的示例，请参阅[https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/ViewModels](https://github.com/slodge/MvvmCross/tree/vnext/Sample%20-%20CustomerManagement/CustomerManagement/CustomerManagement/ViewModels)

* * *

如果您确实坚持使用一个视图模型，那么您可以考虑为 New 使用“神奇值” - 例如，如果 Guid.Empty 被传递，那么这意味着新的？

* * *

或者，您可以删除无参数构造函数，并为第二个构造函数添加默认值：

```
public EditConfigurationViewModel(string id = null)
{
    Guid value;
    if (id == null || !Guid.TryParse(id, out value))
    {
        Configuration = new ConfigurationSet();
    }
    else
    {
        Configuration = ConfigDataStore.GetConfiguration(value);
    }
} 
```

我认为这会奏效吗？

* * *

最后，如果这些都不适合您，那么您可以考虑覆盖 ViewModel 构造机制。

为了帮助解决这个问题，最近有一篇相当详细的文章介绍了如何为 MvvmCross 编写自己的默认 ViewModelLocator - 请参阅[http://slodge.blogspot.co.uk/2013/01/navigating-between-viewmodels-by-more.html](http://slodge.blogspot.co.uk/2013/01/navigating-between-viewmodels-by-more.html)

使用这种方法，您可以创建一个更加自定义的导航模型 - 或者如果这是唯一的特殊视图模型，那么我怀疑您可以创建一个默认的 viewModelLocator，例如：

```
public class MyViewModelLocator
    : MvxDefaultViewModelLocator
{
    public override bool TryLoad(Type viewModelType, IDictionary<string, string> parameterValueLookup,
                                 out IMvxViewModel model)
    {
        if (viewModelType == typeof(EditConfigurationViewModel))
        {
            string id;
            if (parameterValueLookup.TryGetValue("id", out id))
            {
                model = new EditConfigurationViewModel(id);
            }
            else
            {
                model = new EditConfigurationViewModel();
            }
            return true;
        }
        return base.TryLoad(viewModelType, parameterValueLookup, IMvxViewModel model);
    }
} 
```

并使用以下方法在 App.cs 中注册该定位器：

```
protected override IMvxViewModelLocator CreateDefaultViewModelLocator()
{
     return new MyViewModelLocator();
} 
```

# jakarta-mail - Java邮件阅读使用spring邮件适配器不一致的行为

> ID：14367105
> 
> 赞同：0
> 
> 时间：2013-01-16T20:20:34.123
> 
> 标签：jakarta-mail, spring-integration

我正在使用 spring 3.0.6 和 spring 集成 2.0.3。如果我将电子邮件标记为未读，或者如果我多次收到新电子邮件，适配器没有阅读它。我不确定 IMAP 服务器或 API 是否有问题。以下是相同的调试日志。

```
 { DEBUG: JavaMail version 1.4.5
DEBUG: successfully loaded resource: /META-INF/javamail.default.providers
DEBUG: Tables of loaded providers
DEBUG: Providers Listed By Class Name: {com.sun.mail.smtp.SMTPSSLTransport=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], com.sun.mail.smtp.SMTPTransport=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc], com.sun.mail.imap.IMAPSSLStore=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], com.sun.mail.pop3.POP3SSLStore=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun Microsystems, Inc], com.sun.mail.imap.IMAPStore=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], com.sun.mail.pop3.POP3Store=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsystems, Inc]}
DEBUG: Providers Listed By Protocol: {imaps=javax.mail.Provider[STORE,imaps,com.sun.mail.imap.IMAPSSLStore,Sun Microsystems, Inc], imap=javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc], smtps=javax.mail.Provider[TRANSPORT,smtps,com.sun.mail.smtp.SMTPSSLTransport,Sun Microsystems, Inc], pop3=javax.mail.Provider[STORE,pop3,com.sun.mail.pop3.POP3Store,Sun Microsystems, Inc], pop3s=javax.mail.Provider[STORE,pop3s,com.sun.mail.pop3.POP3SSLStore,Sun Microsystems, Inc], smtp=javax.mail.Provider[TRANSPORT,smtp,com.sun.mail.smtp.SMTPTransport,Sun Microsystems, Inc]}
DEBUG: successfully loaded resource: /META-INF/javamail.default.address.map
DEBUG: getProvider() returning javax.mail.Provider[STORE,imap,com.sun.mail.imap.IMAPStore,Sun Microsystems, Inc]
DEBUG: mail.imap.fetchsize: 16384
DEBUG: mail.imap.statuscachetimeout: 1000
DEBUG: mail.imap.appendbuffersize: -1
DEBUG: mail.imap.minidletime: 10
2013-01-16 11:58:00,232 [task-scheduler-1] DEBUG org.springframework.integration.mail.ImapMailReceiver - connecting to store [imap://username:*****@IMAP server IP:143/Inbox]
DEBUG: trying to connect to host "IMAP server IP", port 143, isSSL false
* OK The Microsoft Exchange IMAP4 service is ready. BURCA1
A0 CAPABILITY
* CAPABILITY IMAP4 IMAP4rev1 AUTH=NTLM AUTH=GSSAPI AUTH=PLAIN STARTTLS IDLE NAMESPACE LITERAL+
A0 OK CAPABILITY completed.
DEBUG IMAP: AUTH: NTLM
DEBUG IMAP: AUTH: GSSAPI
DEBUG IMAP: AUTH: PLAIN
DEBUG: protocolConnect login, host=IMAP server IP, user=username, password=<non-null>
DEBUG IMAP: AUTHENTICATE PLAIN command trace suppressed
DEBUG IMAP: AUTHENTICATE PLAIN command result: A1 OK AUTHENTICATE completed.
A2 CAPABILITY
* CAPABILITY IMAP4 IMAP4rev1 AUTH=NTLM AUTH=GSSAPI AUTH=PLAIN STARTTLS IDLE NAMESPACE LITERAL+
A2 OK CAPABILITY completed.
DEBUG IMAP: AUTH: NTLM
DEBUG IMAP: AUTH: GSSAPI
DEBUG IMAP: AUTH: PLAIN
A3 LIST "" Inbox
* LIST (\Marked \HasChildren) "/" INBOX
A3 OK LIST completed.
2013-01-16 11:58:00,488 [task-scheduler-1] DEBUG org.springframework.integration.mail.ImapMailReceiver - opening folder [imap://username:*****@IMAP server IP:143/Inbox]
DEBUG: connection available -- size: 1
A4 SELECT INBOX
* 26 EXISTS
*** 0 RECENT**
* FLAGS (\Seen \Answered \Flagged \Deleted \Draft $MDNSent)
* OK [PERMANENTFLAGS (\Seen \Answered \Flagged \Deleted \Draft $MDNSent)] Permanent flags
* OK [UIDVALIDITY 5298] UIDVALIDITY value
* OK [UIDNEXT 213] The next unique identifier value
A4 OK [READ-WRITE] SELECT completed.
2013-01-16 11:58:00,553 [task-scheduler-1] INFO  org.springframework.integration.mail.ImapMailReceiver - attempting to receive mail from folder [INBOX]
A5 SEARCH UNANSWERED UNDELETED NOT (SEEN) ALL
* SEARCH
A5 OK SEARCH completed.
2013-01-16 11:58:00,590 [task-scheduler-1] DEBUG org.springframework.integration.mail.ImapMailReceiver - found 0 new messages
A6 EXAMINE INBOX
* 26 EXISTS
* 0 RECENT
* FLAGS (\Seen \Answered \Flagged \Deleted \Draft $MDNSent)
* OK [PERMANENTFLAGS ()] Permanent flags
* OK [UIDVALIDITY 5298] UIDVALIDITY value
* OK [UIDNEXT 213] The next unique identifier value
A6 OK [READ-ONLY] EXAMINE completed.
A7 CLOSE
A7 OK CLOSE completed.
DEBUG: added an Authenticated connection -- size: 1 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:48:43.553

协议跟踪清楚地表明服务器认为您没有“最近”消息，也没有未答复和未查看（且未删除）的消息。如果您单独检查每条消息，您会发现任何此类消息吗？

# java - NoClassDefFoundError 当类已经在同一个 java 文件中声明时

> ID：14367109
> 
> 赞同：0
> 
> 时间：2013-01-16T20:20:40.753
> 
> 标签：java, android, exception

我在我的 android 项目的同一个 java 文件中声明了一个类，我的代码由于某种原因无法识别它？当我在模拟器中运行它时，我在运行时得到一个 NoClassDefFoundError 。

当我尝试在模拟器中运行我的 android 应用程序时出现以下错误：

```
01-16 19:58:41.394: E/dalvikvm(2648): Could not find class 'nl.sogeti.android.gpstracker.viewer.map.overlay.AsyncOverlay$SegmentOsmOverlay', referenced from method nl.sogeti.android.gpstracker.viewer.map.overlay.AsyncOverlay.<init>
01-16 19:58:41.394: W/dalvikvm(2648): VFY: unable to resolve new-instance 939 (Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentOsmOverlay;) in Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay;
01-16 19:58:41.394: D/dalvikvm(2648): VFY: replacing opcode 0x22 at 0x0044
01-16 19:58:41.394: W/dalvikvm(2648): Unable to resolve superclass of Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentMapQuestOverlay; (562)
01-16 19:58:41.394: W/dalvikvm(2648): Link of class 'Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentMapQuestOverlay;' failed
01-16 19:58:41.404: W/dalvikvm(2648): VFY: unable to find class referenced in signature (Lcom/mapquest/android/maps/Overlay;)
01-16 19:58:41.404: W/dalvikvm(2648): Unable to resolve superclass of Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentOsmOverlay; (1422)
01-16 19:58:41.404: W/dalvikvm(2648): Link of class 'Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentOsmOverlay;' failed
01-16 19:58:41.414: W/dalvikvm(2648): VFY: unable to find class referenced in signature (Lorg/osmdroid/views/overlay/Overlay;)
01-16 19:58:41.414: W/dalvikvm(2648): Unable to resolve superclass of Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentOsmOverlay; (1422)
01-16 19:58:41.414: W/dalvikvm(2648): Link of class 'Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentOsmOverlay;' failed
01-16 19:58:41.427: D/dalvikvm(2648): DexOpt: unable to opt direct call 0x16f6 at 0x4e in Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay;.<init>
01-16 19:58:41.434: W/dalvikvm(2648): Unable to resolve superclass of Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentMapQuestOverlay; (562)
01-16 19:58:41.434: W/dalvikvm(2648): Link of class 'Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay$SegmentMapQuestOverlay;' failed
01-16 19:58:41.434: D/dalvikvm(2648): DexOpt: unable to opt direct call 0x16f2 at 0x55 in Lnl/sogeti/android/gpstracker/viewer/map/overlay/AsyncOverlay;.<init>
01-16 19:58:41.468: D/AndroidRuntime(2648): Shutting down VM
01-16 19:58:41.474: W/dalvikvm(2648): threadid=1: thread exiting with uncaught exception (group=0x40a70930)
01-16 19:58:41.514: E/AndroidRuntime(2648): FATAL EXCEPTION: main
01-16 19:58:41.514: E/AndroidRuntime(2648): java.lang.NoClassDefFoundError: nl.sogeti.android.gpstracker.viewer.map.overlay.AsyncOverlay$SegmentOsmOverlay
01-16 19:58:41.514: E/AndroidRuntime(2648):     at nl.sogeti.android.gpstracker.viewer.map.overlay.AsyncOverlay.<init>(AsyncOverlay.java:92)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at nl.sogeti.android.gpstracker.viewer.map.overlay.BitmapSegmentsOverlay.<init>(BitmapSegmentsOverlay.java:23)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at nl.sogeti.android.gpstracker.viewer.map.LoggerMapHelper.onCreate(LoggerMapHelper.java:195)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at nl.sogeti.android.gpstracker.viewer.map.GoogleLoggerMap.onCreate(GoogleLoggerMap.java:90)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.app.Activity.performCreate(Activity.java:5104)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.os.Looper.loop(Looper.java:137)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at java.lang.reflect.Method.invokeNative(Native Method)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at java.lang.reflect.Method.invoke(Method.java:511)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-16 19:58:41.514: E/AndroidRuntime(2648):     at dalvik.system.NativeStart.main(Native Method)
01-16 19:59:01.474: W/Trace(2666): Unexpected value from nativeGetEnabledTags: 0 
```

这是我的代码：

```
AsyncOverlay(LoggerMap loggermap, Handler handler)
{
  mLoggerMap = loggermap;
  mHandler = handler;
  mWidth = 1;
  mHeight = 1;
  mPaint = new Paint();
  mActiveZoomLevel = -1;
  mActiveBitmap = Bitmap.createBitmap(mWidth, mHeight, Bitmap.Config.ARGB_8888);
  mActiveTopLeft = new GeoPoint(0, 0);
  mActivePointTopLeft = new Point();
  mCalculationBitmap = Bitmap.createBitmap(mWidth, mHeight, Bitmap.Config.ARGB_8888);

  mOsmOverlay = new SegmentOsmOverlay(mLoggerMap.getActivity(), mLoggerMap, this);
  mMapQuestOverlay = new SegmentMapQuestOverlay(this);
} 
```

这是我的课：

```
 static class SegmentOsmOverlay extends org.osmdroid.views.overlay.Overlay {
   AsyncOverlay mSegmentOverlay;
  LoggerMap mLoggerMap;

  public SegmentOsmOverlay(Context ctx, LoggerMap map, AsyncOverlay segmentOverlay)
  {
     super(ctx);
     mLoggerMap = map;
     mSegmentOverlay = segmentOverlay;
  }

  public AsyncOverlay getSegmentOverlay()
  {
     return mSegmentOverlay;
  }

  @Override
  public boolean onSingleTapUp(MotionEvent e, org.osmdroid.views.MapView openStreetMapView)
  {
     int x = (int) e.getX();
     int y = (int) e.getY();
     GeoPoint tappedGeoPoint = mLoggerMap.fromPixels(x, y);
     return mSegmentOverlay.commonOnTap(tappedGeoPoint);
  }

  @Override
  protected void draw(Canvas canvas, org.osmdroid.views.MapView view, boolean shadow)
  {
     if (!shadow)
     {
        mSegmentOverlay.draw(canvas);
     }
  }
} 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:18:06.203

尝试清理您的项目（项目-> clean..），然后刷新您的项目（右键单击项目名称-> refresh..）

让我知道它是否有效。

# php - jQuery 将 div 更改为 HTML5 contenteditable 并传递给 php

> ID：14367121
> 
> 赞同：1
> 
> 时间：2013-01-16T20:21:17.660
> 
> 标签：php, jquery, html, contenteditable

当前我有以下 div

```
 <div class="tag-header">
    <?php echo $row->name; ?>
 </div> 
```

我使用 .attr 将 contenteditable 添加到 div

```
$('.tag-header').attr("contenteditable", "true"); 
```

但我的问题是如何将值传递给 php 并发布到数据库？*注意：我还没准备好使用 ajax 只是普通的 php 提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:27:28.833

在这里添加了一个[演示](http://jsfiddle.net/pHKdC/)

将 html 更新为

```
<form>
<div class="tag-header">
    <?php echo $row->name; ?>
 </div>
<input type="hidden" id="tagval" />
</form> 
```

然后使用focusout事件绑定

```
$(".tag-header").focusout(function() {
   $("#tagval").val($(".tag-header").text());
}); 
```

提交表单以获取 PHP 中的值。

# javascript - JavaScript WebSockets API 的机制

> ID：14367123
> 
> 赞同：8
> 
> 时间：2013-01-16T20:21:29.800
> 
> 标签：javascript, asynchronous, websocket

我一直在尝试理解一些用于打开 websocket 的代码：

```
var ws = new WebSocket('ws://my.domain.com');
ws.onopen = function(event) {
    ...
} 
```

我的问题是握手如何开始？如果它是在 WebSocket 构造函数中启动的，那么如果那时还没有设置 onopen 怎么调用呢？如果 WebSocket 构造函数创建了一个执行握手的线程，那么在握手结束之前是否必须足够快地定义 onopen？如果是这样，那听起来有点危险，因为如果 JS 虚拟机变慢，握手可能会在定义 onopen 之前完成，这意味着事件没有被处理。还是设置 onopen 功能会触发握手？

有人可以向我解释一下 API 的机制吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T20:41:14.377

`onopen`在当前（同步）代码执行结束之前，它不会寻找函数。那是因为连接（因此调用`onopen`回调）是异步的。考虑：

```
let x = false;
setTimeout(function () {
    x = true
}, 1000);
while(!x){
    console.log('waiting!');
} 
```

那里的`while`循环永远不会结束，但你可能会怀疑它会在一秒钟后结束。

如果您`onopen`通过执行耗时（但同步）的代码来延迟函数的初始化，那么这并不危险。另一方面，如果您`setTimeout`初始化，`onopen`则无法保证在 WebSockets 连接准备好时是否已定义它，因为您无法确定首先执行哪个回调。

如果你在 C++ 中做同样的事情，你会为此使用线程。在 JavaScript 中，回调机制不是基于线程的；它只是表现得像线程（参见上面的无限循环）。

> 单线程一次执行一个代码单元，其他代码单元排队，直到当前代码单元完成执行

来源：[http ://www.slideshare.net/clutchski/writing-asynchronous-javascript-101](http://www.slideshare.net/clutchski/writing-asynchronous-javascript-101)

重要的是要了解，即使您在 1 秒内执行某些操作`setTimeout`，它也可能不会在*一秒钟*后执行- 如果线程很忙，它可能永远不会被执行。

因此，如果您启动 WebSocket 连接并运行类似于上述循环但等待连接准备好它可能永远不会结束。

对于不熟悉 JS 的程序员来说，这种行为可能看起来很奇怪。因此，为了便于阅读，我尽可能在需要它们的函数的同时或紧随其后定义回调。

如果您想显式使用线程和并发执行，请阅读有关[Web Workers的更多信息](http://en.wikipedia.org/wiki/Web_worker)

**参考：**

*   [JavaScript 计时器的工作原理](http://ejohn.org/blog/how-javascript-timers-work/)
*   [了解 JavaScript 计时器](http://javascriptweblog.wordpress.com/2010/06/28/understanding-javascript-timers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-23T09:54:58.770

您不需要任何 setTimeout 功能。我为此使用了一个库，我的代码如下所示：

```
var pushstream = new PushStream({
  host: window.location.hostname,
  port: window.location.port,
  modes: "websocket"
});
pushstream.onmessage = _manageEvent;

function _manageEvent(eventMessage) {
  console.log(eventMessage);
} 
```

这让我对 websockets 以及如何在 Javascript 中实现客户端有了深入的了解：[https ://github.com/wandenberg/nginx-push-stream-module/blob/master/misc/js/pushstream.js](https://github.com/wandenberg/nginx-push-stream-module/blob/master/misc/js/pushstream.js)

还有服务器：[https ://github.com/wandenberg/nginx-push-stream-module/](https://github.com/wandenberg/nginx-push-stream-module/)

它有很好的记录，我希望它有所帮助:)

# xslt - 没有命名空间的 XML

> ID：14367127
> 
> 赞同：4
> 
> 时间：2013-01-16T20:21:37.157
> 
> 标签：xslt, namespaces, transform, xml-namespaces

我需要从信封中提取 XML。但我无法获得预期的输出。我需要摆脱输出中的命名空间。

我的输入：

```
<ns1:input xmlns:ns1="http://mysapmle.org/" xmlns="http://othersample.org/">
        <sample>
            <inner tc="5">Test</inner>
            <routine>Always</routine>
        </sample>
</ns1:input> 
```

我的预期输出：

```
<sample>
    <inner tc="5">Test</inner>
    <routine>Always</routine>
</sample> 
```

我的实际输出：

```
 <sample xmlns="http://othersample.org/">
            <inner tc="5">Test</inner>
            <routine>Always</routine>
        </sample> 
```

我的 XSLT：

```
<xsl:output omit-xml-declaration="yes" indent="yes" />

<xsl:template match="/">
    <xsl:copy copy-namespaces="no">
        <xsl:apply-templates select="//sample" />           
    </xsl:copy>     
</xsl:template> 

<xsl:template match="@*|node()">
    <xsl:copy copy-namespaces="no">
        <xsl:apply-templates select="@*|node()" />          
    </xsl:copy>     
</xsl:template> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:41:29.283

这应该适用于剥离命名空间：

```
<xsl:output omit-xml-declaration="yes" indent="yes" />

<xsl:template match="/">
   <xsl:apply-templates select="*/*" />
</xsl:template>

<xsl:template match="@*">
    <xsl:attribute name="{local-name()}">
        <xsl:value-of select="."/>          
    </xsl:attribute>     
</xsl:template>

<xsl:template match="*">
    <xsl:element name="{local-name()}">
        <xsl:apply-templates select="@* | node()" />
    </xsl:element>
</xsl:template> 
```

但我有点怀疑你是否需要这样做。如果您要附加 this 的 XML 使用相同的命名空间，并且这是 this 包含的 XML 应该具有的命名空间，那么此 XML 中是否有命名空间声明应该无关紧要。

# windows - 为公共图书馆创建信息屏幕，如何使浏览器全屏运行且“不可关闭”？

> ID：14367129
> 
> 赞同：0
> 
> 时间：2013-01-16T20:21:53.697
> 
> 标签：windows, macos, browser, fullscreen

我目前正在为公共图书馆开发一个网站，该网站的一部分将在他们设置的一些触摸屏显示器上运行。

我需要启动一个全屏运行的浏览器，并且不能被鼠标关闭。我已经查看了由 javascript 启用的浏览器全屏模式，但是使用该解决方案，当鼠标进入屏幕顶部时，菜单栏（在 OSX 上）仍然显示。我需要一个没有菜单项或任何东西的全屏，只能通过键盘关闭。

有没有人对如何实现这一点有任何想法？我对 Windows 或 OSX 上的任何黑客解决方案持开放态度。

# c - WinApi Win32 编程 - 按钮单击不发送 WM_COMMAND 消息

> ID：14367131
> 
> 赞同：0
> 
> 时间：2013-01-16T20:21:56.833
> 
> 标签：c, winapi, window

我一直在研究一个选项卡控制程序，最近才在 StackOverflow 上发帖寻求帮助。目前程序运行如下：

1.  开始于`winMain`，创建`main_hwnd`生成`WM_CREATE`并被`wndProc`调用
2.  `tab_hwnd`被创建为`SysTabControl32`
3.  `tab0_hwnd`, `tab1_hwnd`, ...,`tab4_hwnd`被创建
    *   在`tab0_hwnd`中，创建静态文本和按钮
4.  返回`winMain`并被`ShowWindow()`调用`main_hwnd`，`tab_hwnd`并且`tab0_hwnd`
5.  进入一个循环，直到程序关闭。

当程序运行时，一切都是可见的；但是，按钮无法正常工作。同时，我在使用搜索错误时`GetLastError()`，`FormatMessage()`发现创建windows后`tab#_hwnd`（其中#=0,1,2,3和4），出现如下错误：

错误6：句柄无效

我不确定为什么会出现此错误以及为什么按钮不起作用。另一位用户在之前的帖子中提出了以下建议：

"`WM_COMMAND`被发送到直接父窗口，而不是祖父母，所以你要么必须子类化你的选项卡控件，要么让你的按钮将你的主窗口作为父窗口。- 安东·科瓦连科

编辑 1：我不确定如何按照 Anton Kovalenko 的建议对我的选项卡控件进行子类化。任何指向教程/注释解释的链接都将非常有帮助。

这是当前代码：

```
#define WIN32_LEAN_AND_MEAN
#pragma comment(lib, "comctl32.lib")

#define ID_FILE_EXIT                    101
#define ID_HELP_ABOUT                   102
#define ID_B_BLANK                      1001
#define ID_B_HOME                       1002
#define ID_B_SAVE                       1003

#include <strsafe.h>
#include <windows.h>
#include <CommCtrl.h>
#include <iostream>
#include <ShlObj.h>

HWND main_hwnd, tab_hwnd, tab0_hwnd, tab1_hwnd, tab2_hwnd, tab3_hwnd, tab4_hwnd;
HINSTANCE tab_hinst;
TCHAR HomePath[MAX_PATH*2], SavePath[MAX_PATH*2];
WNDCLASSEX wc;
bool success=FALSE;
MSG msg;
HWND button;
static HWND text;
TCITEM tie;
int focus = 0, NotifyCase = 0;

void ErrorExit(LPTSTR lpszFunction) 
{ 
    // Retrieve the system error message for the last-error code

    LPVOID lpMsgBuf;
    LPVOID lpDisplayBuf;
    DWORD dw = GetLastError(); 

    FormatMessage(
        FORMAT_MESSAGE_ALLOCATE_BUFFER | 
        FORMAT_MESSAGE_FROM_SYSTEM |
        FORMAT_MESSAGE_IGNORE_INSERTS,
        NULL,
        dw,
        MAKELANGID(LANG_NEUTRAL, SUBLANG_DEFAULT),
        (LPTSTR) &lpMsgBuf,
        0, NULL );

    // Display the error message and exit the process

    lpDisplayBuf = (LPVOID)LocalAlloc(LMEM_ZEROINIT, 
        (lstrlen((LPCTSTR)lpMsgBuf)+lstrlen((LPCTSTR)lpszFunction)+40)*sizeof(TCHAR)); 
    StringCchPrintf((LPTSTR)lpDisplayBuf, 
        LocalSize(lpDisplayBuf) / sizeof(TCHAR),
        TEXT("%s failed with error %d: %s"), 
        lpszFunction, dw, lpMsgBuf); 
    MessageBox(NULL, (LPCTSTR)lpDisplayBuf, TEXT("Error"), MB_OK); 

    LocalFree(lpMsgBuf);
    LocalFree(lpDisplayBuf);
    ExitProcess(dw); 
}
// Call with ErrorExit(TEXT("ANYTHINGHERE"));

    LRESULT CALLBACK WndProc(HWND hwnd, UINT Msg, WPARAM wParam, LPARAM lParam)
{
    switch(Msg)
    {
        case WM_CREATE:
            {
                tab_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD,
                    CW_USEDEFAULT, CW_USEDEFAULT, 681, 338,
                    hwnd, NULL, tab_hinst, NULL);

                tab0_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                //ErrorExit(TEXT("HERE")); //<--- This gives error 6: Handle invalid

                text = CreateWindow("Static","Home Directory",WS_CHILD | WS_VISIBLE,0,50,150,50,tab0_hwnd, 0, tab_hinst,0);
                text = CreateWindow("Static","C:\\",WS_CHILD | WS_VISIBLE,200,50,150,50,tab0_hwnd, 0, tab_hinst,0);
                button = CreateWindow("Button","Navigate to...", BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,350,42,100,25,tab0_hwnd,(HMENU)ID_B_HOME,tab_hinst,0);  
                text = CreateWindow("Static","Save Directory",WS_CHILD | WS_VISIBLE,0,100,150,50,tab0_hwnd, 0, tab_hinst,0);
                text = CreateWindow("Static","C:\\",WS_CHILD | WS_VISIBLE,200,100,150,50,tab0_hwnd, 0, tab_hinst,0);
                button = CreateWindow("Button","Save to...", BS_PUSHBUTTON | WS_CHILD | WS_VISIBLE ,350,92,100,25,tab0_hwnd,(HMENU)ID_B_SAVE,tab_hinst,0);

                tab1_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                tab2_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                tab3_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                tab4_hwnd = CreateWindowEx(
                    0,
                    "SysTabControl32",
                    "",
                    WS_CHILD,
                    1, 22, 679, 315,
                    tab_hwnd, NULL, tab_hinst, NULL);

                tie.mask = TCIF_TEXT;
                tie.pszText = "Paths";
                TabCtrl_InsertItem(tab_hwnd, 0, &tie);
                tie.pszText = "Output";
                TabCtrl_InsertItem(tab_hwnd, 1, &tie);
                tie.pszText = "Parameters";
                TabCtrl_InsertItem(tab_hwnd, 2, &tie);
                tie.pszText = "Configurations";
                TabCtrl_InsertItem(tab_hwnd, 3, &tie);
                tie.pszText = "Run";
                TabCtrl_InsertItem(tab_hwnd, 4, &tie);

                HMENU hMenu, hSubMenu;

                hMenu = CreateMenu();

                hSubMenu = CreatePopupMenu();
                AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, "&File");
                AppendMenu(hSubMenu, MF_STRING, ID_FILE_EXIT, "&Exit");

                hSubMenu = CreatePopupMenu();
                AppendMenu(hMenu, MF_STRING | MF_POPUP, (UINT)hSubMenu, "&Help");
                AppendMenu(hSubMenu, MF_STRING, ID_HELP_ABOUT, "&About");

                SetMenu(hwnd, hMenu);
            }
            break;
        case WM_NOTIFY:
            switch(((LPNMHDR)lParam) ->code)
            {
                case TCN_SELCHANGING:
                    switch(TabCtrl_GetCurFocus(tab_hwnd))
                    {
                        case 0:
                            ShowWindow(tab0_hwnd,SW_HIDE);
                            break;
                        case 1:
                            ShowWindow(tab1_hwnd,SW_HIDE);
                            break;
                        case 2:
                            ShowWindow(tab2_hwnd,SW_HIDE);
                            break;
                        case 3:
                            ShowWindow(tab3_hwnd,SW_HIDE);
                            break;
                        case 4:
                            ShowWindow(tab4_hwnd,SW_HIDE);
                            break;
                        default:
                            return DefWindowProc(hwnd, Msg, wParam, lParam);
                            break;
                    }
                    break;
                case TCN_SELCHANGE:
                    switch(TabCtrl_GetCurFocus(tab_hwnd))
                    {
                        case 0:
                            ShowWindow(tab0_hwnd,SW_SHOW);
                            break;
                        case 1:
                            ShowWindow(tab1_hwnd,SW_SHOW);
                            break;
                        case 2:
                            ShowWindow(tab2_hwnd,SW_SHOW);
                            break;
                        case 3:
                            ShowWindow(tab3_hwnd,SW_SHOW);
                            break;
                        case 4:
                            ShowWindow(tab4_hwnd,SW_SHOW);
                            break;
                        default:
                            return DefWindowProc(hwnd, Msg, wParam, lParam);
                            break;
                    }
                    break;
                default:
                    return DefWindowProc(hwnd, Msg, wParam, lParam);
            }
            break;
        case WM_COMMAND:
            //MessageBox(tab0_hwnd,"HERE","OKAY",NULL);
            switch(LOWORD(wParam))
            {
                case ID_FILE_EXIT:
                    PostMessage(hwnd, WM_CLOSE, 0, 0);
                    break;
                case ID_HELP_ABOUT:
                    return MessageBox(0, "This program is an alteration of ...", "About", MB_OK);
                case ID_B_HOME:
                    if(BN_CLICKED == HIWORD(wParam)){
                        MessageBox(tab0_hwnd,"HERE","OKAY",NULL);
                    }
                    break;
                case ID_B_SAVE:
                    if(BN_CLICKED == HIWORD(wParam)){
                    }
                    break;
                case ID_B_BLANK:
                    break;
                default:
                    return DefWindowProc(hwnd, Msg, wParam, lParam);
            }
            break;
        case WM_CLOSE:
            DestroyWindow(hwnd);
            break;  
        case WM_DESTROY:
            PostQuitMessage(0);
            break;
        default:
            return DefWindowProc(hwnd, Msg, wParam, lParam);
    }
    return 0;
}

int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance,
    LPSTR lpCmdLine, int nCmdShow)
{
    InitCommonControls();
    tab_hinst = hInstance;

    wc.cbSize        = sizeof(WNDCLASSEX);
    wc.style         = 0;
    wc.lpfnWndProc   = WndProc;
    wc.cbClsExtra    = 0;
    wc.cbWndExtra    = 0;
    wc.hInstance     = hInstance;
    wc.hIcon         = LoadIcon(NULL, IDI_APPLICATION);
    wc.hCursor       = LoadCursor(NULL, IDC_ARROW);
    wc.hbrBackground = (HBRUSH)(COLOR_WINDOW+1);
    wc.lpszMenuName  = NULL;
    wc.lpszClassName = "Home";
    wc.hIconSm       = LoadIcon(NULL, IDI_APPLICATION);

    if(!RegisterClassEx(&wc))
        MessageBox(NULL, "Window Registration Failed!", "Error!", MB_ICONEXCLAMATION | MB_OK);

    main_hwnd = CreateWindowEx(
        WS_EX_CLIENTEDGE,
        "Home",
        "The Home page",
        WS_CAPTION | WS_SYSMENU | WS_MINIMIZEBOX,
        CW_USEDEFAULT, CW_USEDEFAULT, 700, 400,
        NULL, NULL, hInstance, NULL);

    if(main_hwnd == NULL) {
        MessageBox(NULL, "Window Creation Failed!", "Error!", MB_ICONEXCLAMATION | MB_OK);
        return 0;
    }

    ShowWindow(main_hwnd, nCmdShow);
    ShowWindow(tab_hwnd,SW_SHOW);
    ShowWindow(tab0_hwnd,SW_SHOW);
    UpdateWindow(main_hwnd);

    do{
        PeekMessage(&msg, NULL, NULL, NULL, PM_REMOVE);
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    } while(msg.message!=WM_CLOSE && msg.message!=WM_QUIT);
    return msg.wParam;
} 
```

# jquery - 将 jQuery $(this) 分离成 ajax？

> ID：14367134
> 
> 赞同：0
> 
> 时间：2013-01-16T20:22:18.597
> 
> 标签：jquery, arrays, this, jquery-ui-draggable

我需要在单独的 php 文件中使用以下坐标，我想最好的方法是通过 ajax 传输。

html如下：

```
 <div id="canvas">
 <div class="point1">
 <div class="coord"></div>
 </div>

 <div class="point2">
 <div class="coord"></div>
 </div>

 <div class="point3">
 <div class="coord"></div>
 </div> etc
 </div> 
```

我目前编写的 jQuery UI 可拖动函数当前显示了每个 div 的顶部和左侧位置，直接在被拖动的 div 下方：

```
...
element = this;
var top = $(this).position().top;
var left = $(this).position().left;
$('.coord', this).text('Top: ' + top + 'px' + ' Left: ' + left + 'px');
... 
```

但是为了现在使用 PHP 变量中的每个点坐标，我是否需要先拆分`$('.coordinates', this) etc`成一个数组以通过 ajax 传输到 php - 如果是这样，有人知道怎么做吗？

还是有更简单的方法-我确定可能有？！？我只是有点困惑！

感谢任何建议或指示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:30:29.717

好吧，我不是那么先进，但如果你想将数据从 javascript(jquery) 传递到 PHP，正如你所说的 ajax 使用 jquery 方法 $.post：

```
 $.post("file.php", { coordTop: top , coordLeft: left },
  function(data) {// ON REQUEST DONE YOU CAN RETURN (echo, print,..) DATA
    alert("Data: " + data);
  }); 
```

在 PHP 文件中，您可以使用 $_POST["coordTop"] 和 $_POST["coordLeft"] 捕获这些变量

# java - 小文件的多个映射器

> ID：14367136
> 
> 赞同：0
> 
> 时间：2013-01-16T20:22:35.180
> 
> 标签：java, hadoop, hdfs, teradata, sqoop

我正在开发基于 Hive 的 ETL 应用程序。一项功能要求是我们将 Hive 中的一些数据导出到 Teradata（这是正在使用的现有解决方案），反之亦然。我的问题与出口有关。

我正在使用带有 Teradata 连接器的 sqoop 来导出 HDFS 文件。有些文件虽然有一百 K 条记录，但非常小 ~ 7MB。所以 sqoop 在导出时只使用一个映射器（我指定了 -m 选项，但它不起作用）。这成为一个相当缓慢的过程。

有没有办法在集群中的多个映射器之间划分单个文件（小于 HDFS 块大小）中的数据？

（由于 sqoop 在映射器之间划分行，因此导入速度很快，这已成为一个比较点，我必须使导出工作更快）

编辑：- 软件版本：
Hadoop：MapR M3 - hadoop 0.20
Sqoop：1.4.2
Teradata Connector for Sqoop：1.0.5

# actionscript-3 - 使用 Red5 进行网络摄像头录制时丢失帧

> ID：14367140
> 
> 赞同：2
> 
> 时间：2013-01-16T20:22:46.297
> 
> 标签：actionscript-3, red5, live-streaming

我正在尝试使用[此示例](http://flashvisions.com/red5/record-live-stream-with-red5-media-server/)保存实时流。我正在 localhost 上进行测试，Red5 版本是 1.0。

`streamPublishStart`方法接收流，用方法将其保存为flv `saveAs`。但是我录制的flv文件只有1帧（不是第二帧，用GOM Player检查）。但是，如果我附加一个侦听器来流式传输并检查收到的包，我可以看到它们不断出现。

这就是我测试它的方式；

```
public void streamPublishStart(IBroadcastStream stream) {
    try {
        stream.addStreamListener(new IStreamListener() {
            @Override
            public void packetReceived(IBroadcastStream streamObj, IStreamPacket packet) {  
                System.out.println(packet.getTimestamp() + " - " + packet.getDataType());
            }
        });

        stream.saveAs(stream.getPublishedName(), false);
    } catch (Exception e) {
        e.printStackTrace();
    }
} 
```

此代码打印时间戳，直到我停止记录。我试图从收到的包中保存这些字节并将它们与`saveAs`创建的文件方法合并，没有任何反应。

可能是什么问题？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T14:42:39.663

我降级到[Red5 0.8.0 Final](https://code.google.com/p/red5/)、Java 6 并使用了[SimpleRecorder 示例](http://red5.googlecode.com/svn/flash/trunk/samples/)，它工作正常。

我找不到 oflaDemo 的源代码，但是您可以使用[JD java 反编译器将类转换为 .java 文件](http://java.decompiler.free.fr/?q=jdgui)

`webapps/oflaDemo/WEB-INF/classes`从安装程序安装后，oflaDemo 类位于目录中。

这不是一个实际的答案，但这将保持正确的答案，直到出现更好的答案。

# sas - 现场功能的 SAS 问题

> ID：14367141
> 
> 赞同：2
> 
> 时间：2013-01-16T20:22:46.123
> 
> 标签：sas

因此，我正在对 SAS 例程进行一些“逆向工程”——将其带到 SQL 和 Pentaho。

我尝试直接通过它，但我注意到很多冗余过程，所以我开始在思维导图中映射所有内容，以识别所有冗余并在对 SQL 执行任何操作之前对其进行处理。

我偶然发现了这些行：

```
use table1
    read all into A
use table2
    read all into B
fieldA = nrow(B);
fieldB = B[,n:fieldA];
fieldC = 2.33*sqrt(A`*fieldB*A); 
```

而且我不知道如何映射这个过程，特别是“fieldB”和 sqrt 中的方程。

谁能帮我一把？

（编辑）好吧，乔真的帮我解决了将军问题……我仍然存在的两个疑问是：

1-“字段B = B [，n：字段A]；” 这是什么意思？我的意思是，如果 n 是静态的，我现在会做什么，但是我遇到了流程的另一部分......

```
use table1;
    read all into A;
use table2;
    read all into B;
fieldA = ncol(B);
fieldB = ncol(A);
ncurvas = fieldA/fieldB;
N = J(ncurvas+1,1,fieldB);
N[1] = 1;
NCUM = cusum(N)-1;
fieldC = B[,(NCUM[&t]+1):NCUM[&t+1]]; 
```

在涉及 fieldC 之前，我都很好。我了解 cusum 所做的一切，但我真的不知道 fieldC 上会发生什么。当我用 &t = 1 检查它时，它显示了一个从 B 开始的 18x18 矩阵，从 B[1,1] 开始 - 但是当我尝试另一个数字，比如 10 时，它从 B 的 col163 开始。

2-我不知道这是否与我至少到目前为止不理解的矩阵变换/乘法有关，但为什么“2.33*sqrt(A`*fieldB*A)”（原始的fieldC ) 返回单个值？它不应该返回一个矩阵吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:52:40.753

那是 SAS/IML，只是为了清楚（与 Base SAS 非常不同）。

FieldB 是 B 的所有行，以及 B 的一些列。 'n' 没有在那里定义，所以我不知道它会是什么；如果它是 1，那么它将是一个方阵（因此，如果它是 4 行 5 列，那么 fieldB 是一个 4x4 的矩阵，去掉了第五列）。

此测试代码显示结果：

```
proc iml;
B={1 2 3 4 5, 4 5 6 7 8, 7 8 9 10 11, 10 11 12 13 14};
print B;
fieldA = nrow(B);
print FieldA;
fieldB = B[,1:fieldA];
print FieldB;
quit; 
```

结果：

```
B 
1 2 3 4 5 
4 5 6 7 8 
7 8 9 10 11 
10 11 12 13 14 

fieldA 
4 

fieldB 
1 2 3 4 
4 5 6 7 
7 8 9 10 
10 11 12 13 
```

FieldC 使用矩阵变换和矩阵乘法。SQRT 将返回一个矩阵，其中每个值都是原始值的平方根，所以这就像你想象的那样简单。矩阵乘法比较复杂；在 SAS 参考中查找更多详细信息：http: [//support.sas.com/documentation/cdl/en/imlug/59656/HTML/default/viewer.htm#langref_sect14.htm](http://support.sas.com/documentation/cdl/en/imlug/59656/HTML/default/viewer.htm#langref_sect14.htm)

不过，维基百科页面实际上在回答如何实际操作方面要好一些。 [http://en.wikipedia.org/wiki/Matrix_multiplication#Matrix_product_.28two_matrices.29](http://en.wikipedia.org/wiki/Matrix_multiplication#Matrix_product_.28two_matrices.29)

最后，A` 是 A 的转置，可能对确保矩阵乘法的行数/列数很重要。顺便说一句，我有点惊讶 fieldB 不是此处 A 的行数的子集，除非此处未披露的数据背后存在某种关系。

# php - 难以理解如何在扩展类中声明父类的函数？

> ID：14367147
> 
> 赞同：3
> 
> 时间：2013-01-16T20:23:13.977
> 
> 标签：php, oop

```
class Bar{        
    public function test(){
        $this->testPublic();
        $this->testPrivate();
    }

    public function testPublic(){
        echo "Bar::testPublic\n";
    }

    private function testPrivate(){
        echo "Bar::testPrivate\n";
    }        
}

class Foo extends Bar{
    public function testPublic(){
        echo "Foo::testPublic\n";
    }
    private function testPrivate(){
        echo "Foo::testPrivate\n";
    }

}

$myFoo = new Foo();
$myFoo->test();
//Foo::testPublic
//Bar::testPrivate 
```

我在理解这个输出时遇到了很多麻烦。有人能给我一个清晰简洁的解释吗？我正在学习 OOP，想知道如何使用扩展来覆盖父类函数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:26:40.833

该`test()`方法调用2个方法：

1.  `testPublic`- 这是一个公共的，所以它在`Foo`. 所以`Foo::testPublic`被称为
2.  `testPrivate`- 这是一个私人的，所以它只对每个班级本身可见。对于调用方方法（它是`Bar`） - 它是`Bar::testPrivate`

所以 - 如果方法是`public`或`protected`- 它可以被覆盖并从祖先/孩子调用；如果是`private`- 它不能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:28:30.390

*$this*引用当前对象。因此，当您执行以下操作时。

> $this->testPublic();

它将为实现该功能的最**顶层类调用 testPublic()。**

如果你只想调用父类，那么就有 parent 关键字。

> 父::testPublic();

这将在当前对象**下面**的类上调用 testPublic() 。

注意不要将 -> 运算符与 :: 运算符混淆。

:: 运算符引用对象的*类*定义，其中 as -> 引用对象的实例。

```
 self::testPublic();
 $foo::testPublic(); 
```

它引用了一个名为 testPublic() 的静态函数，并且静态方法是在类级别定义的。

```
 $foo->testPublic();
 $this->testPublic(); 
```

它引用一个函数作为对象实例的一部分，并且有一个 vtable 用于查找应该调用哪个对象实例级别。

# wordpress - 在 WordPress 中的用户名旁边显示管理员角色

> ID：14367149
> 
> 赞同：1
> 
> 时间：2013-01-16T20:23:20.847
> 
> 标签：wordpress

`administrator`如果这个人有这个角色，有没有办法在用户名旁边显示一个额外的文本？

我只想显示这个角色的额外文本，我可以使用什么钩子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:44:59.010

是的，您可以使用 filter `the_author`，如下所示：

```
add_filter( 'the_author', 'author_admin_so_14367149' );

function author_admin_so_14367149( $display_name ) 
{
    // Block the filter in the dashboard (admin area)
    if( is_admin() )
        return $display_name;

    global $authordata;

    // User has administrator role, add string to display name
    if( in_array( 'administrator', $authordata->roles ) )
        $display_name = $display_name . ' (admin)';

    return $display_name;
} 
```

对于评论部分，还有另一个过滤器，检查是不同的：

```
add_filter( 'get_comment_author', 'comment_author_admin_so_14367149' );

function comment_author_admin_so_14367149( $author ) 
{
    // Block the filter in the dashboard (admin area)
    if( is_admin() )
        return $author;

    $user = get_user_by( 'login', $author );

    // User has administrator role, add string to display name
    if( in_array( 'administrator', $user->roles ) )
        $author = $author . ' (admin)';

    return $author;
} 
```

# java - Java中的时间表实现？

> ID：14367152
> 
> 赞同：0
> 
> 时间：2013-01-16T20:23:30.623
> 
> 标签：java

我需要一个`Timetable`可以工作的类（一个解释这个想法的粗略例子）：

```
Timetable timetable = new Timetable("Mon-Fri 8:00-17:00");
Date eta = timetable.increment(new Date(), 3, Calendar.HOURS); 
```

`eta`应该是时间点，正好比当前时间提前 3 小时，但只考虑 8:00 到 17:00 之间的时间。这听起来像是一个面试问题，但出于商业目的，我需要这样的课程，而且我怀疑已经存在一些开源实现。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T20:58:19.163

我认为这非常接近将字符串解析为日期，然后使用**java.util.Calendar**来添加或减去日期。

检查这个 [http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#add(int](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Calendar.html#add(int) , int)

```
 // create a calendar
      Calendar cal = Calendar.getInstance()

      // print current date
      System.out.println("The current date is : " + cal.getTime());

      // add 20 days to the calendar
      cal.add(Calendar.DATE, 20);
      System.out.println("20 days later: " + cal.getTime());

      // subtract 2 months from the calendar
      cal.add(Calendar.MONTH, -2);
      System.out.println("2 months ago: " + cal.getTime());

      // subtract 5 year from the calendar
      cal.add(Calendar.YEAR, -5);
      System.out.println("5 years ago: " + cal.getTime()); 
```

# php - 如何知道错误在哪里？

> ID：14367154
> 
> 赞同：2
> 
> 时间：2013-01-16T20:23:39.117
> 
> 标签：php

我有 3 类 A、B 和 C，如下所示：

一个.php

```
<?php
abstract class A {
    public static function getInstance() {
        $child = get_called_class();
        $instance = new $child;
    }
}
?> 
```

b.php

```
<?php
class B extends A {
    const MY_CONSTANT = SomeClass::UNKNOWN_CONSTANT;
}
?> 
```

c.php

```
<?php

include 'a.php';
include 'b.php';
B::getInstance();
//Here will got an error 
//Fatal error: Class 'SomeClass' not found in a.php on line 5 

?> 
```

显然 B 类中存在错误，但是当我调用 B::getInstance() 方法时，该错误消息是“致命错误：第 5 行的 a.php 中找不到类 'SomeClass'”

我不明白为什么该错误消息没有告诉我“b.php on line 3”中的错误？如何知道真正的错误位置并对其进行调试？

# 编辑 1

我认为 PHP 应该在第 3 行的 b.php 中告诉我错误，否则我将很难调试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:27:06.973

行号将始终是触发异常或错误的行。

看看 PHP 函数[`debug_backtrace()`](http://ca1.php.net/manual/en/function.debug-backtrace.php)。它提供了有关您正在寻找的调用堆栈的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:28:49.643

在您尝试创建 B 的实例之前，不会创建非静态 MY_CONSTANT。B 的静态方法是从 A 继承的静态方法，然后它尝试实例化 B 并发现其非静态值之一爆炸。

# excel - 如何检查目录中由 VBA 中的 InputBox 给出的文件名？

> ID：14367159
> 
> 赞同：0
> 
> 时间：2013-01-16T20:24:14.723
> 
> 标签：excel, vba

我的代码要求用户输入文件名。我们会说我们在目录“C:\Users\aUser\Desktop\myFolder”中有 5 个文本文件。这些文本文件被命名为 A、B、C、D 和 E。

如果文本文件存在，那么我想用我已经制作的脚本覆盖内容。如果文本文件不存在，我想用他们输入的文件名制作一个，然后[使用我已经编写的脚本]填充它。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T15:52:01.727

你解释它的方式，似乎最简单的工作流程是：

1）如果存在则删除文件

```
Sub test()

Dim FSO As FileSystemObject

Dim sPath As String

sPath = "U:\Test.txt"

Set FSO = New FileSystemObject
If FSO.FileExists(sPath) Then
    FSO.DeleteFile (sPath)
End If

End Sub 
```

将脚本（我假设也是一个 txt 文件）复制到路径中： FileCopy "U:\Script", sPath

如果您在字符串变量中有脚本：

```
Set txtFile = FSO.CreateTextFile(sPath, True)
txtFile.WriteLine(sText)
FSO.Close
End Sub 
```

如果脚本包含在数组中，您可以循环遍历数组并生成多个写入行。
不要忘记参考 Microsoft Scripting Runtime 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:13:47.950

像这样的东西

*   定位登录用户的文件夹，而不考虑操作系统
*   检查用户输入文件是否包含在主列表中（由 持有`StrFiles`）
*   然后要么创建一个新文件，如果它不存在，或者
*   为您提供一个逻辑分支来添加您的覆盖脚本

    子

**代码**

```
GetFiles()
Dim wsShell As Object
Dim objFSO As Object
Dim objFil As Object
Dim strFolder As String
Dim StrFile As String
Dim StrFiles()
StrFiles = Array("A.txt", "B.txt", "C.txt")
Set wsShell = CreateObject("wscript.shell")
strFolder = wsShell.specialFolders("Desktop") & "\myFolder"
StrFile = Application.InputBox("Please enter A.txt, B.txt", "File Selection", , , , , 2)
If IsError(Application.Match(StrFile, StrFiles, 0)) Then
MsgBox StrFile & " is invalid", vbCritical
Exit Sub
End If
If Len(Dir(strFolder & "\" & StrFile)) = 0 Then
'make file
Set objFSO = CreateObject("scripting.filesystemobject")
Set objFil = objFSO.createtextfile(strFolder & "\" & StrFile, 2)
objFil.Close
Else
'write over file
'add your code here
End If
End Sub 
```

# regex - ASP 提取中的正则表达式

> ID：14367163
> 
> 赞同：0
> 
> 时间：2013-01-16T20:24:34.107
> 
> 标签：regex, asp-classic

好的，我来自 PHP 背景，但我需要使用经典 ASP 从 URL 中提取一些内容。

```
$url = 'http://domain.com/page1/link.asp'; 
```

ASP 代码将去除 http:// 或 http:// www 并仅提取 domain.com (page1) (link.asp)

在 PHP 中，您可以使用 preg_match 函数，但 ASP 版本如何工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:54:33.767

以下应该有效（未经测试）：

```
Dim regEx, strFinal

Set regEx = New RegExp
regEx.Pattern = "^https?://(www\.)?";
regEx.IgnoreCase = True

strFinal = regEx.Replace("http://domain.com/page1/link.asp", "") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-13T08:52:48.577

这是工作。（经测试）

```
Dim regEx, strFinal

Set regEx = New RegExp
regEx.Pattern = "^https?://(www\.)?"
regEx.IgnoreCase = True

strFinal = regEx.Replace("http://www.domain.com/page1/link.asp", "")
Response.Write strFinal 
```

# java - 如何在 a 中配置以下模式 ?

> ID：14367164
> 
> 赞同：0
> 
> 时间：2013-01-16T20:24:42.913
> 
> 标签：java, jsf, primefaces, icefaces

下午好

具体问题是：带图案的数字0应应用以下格式0000-00，带图案的数字201201应应用以下格式如2012-01等

呃试图

```
<h:inputText value="#{periodo.periodo}">
  <f:convertNumber pattern="####-####">
  </f:convertNumber>
</h:inputText> 
```

但结果是数字 0: 0 -

对此的任何帮助将非常感谢我/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:10:20.897

您可以使用如下所示的 converdateTime

```
<f:convertDateTime pattern="yyyy-MM">
</f:convertDateTime> 
```

您可以定义您的日期模式。

# ruby-on-rails-3 - rails admin - scss 错误

> ID：14367166
> 
> 赞同：0
> 
> 时间：2013-01-16T20:24:54.630
> 
> 标签：ruby-on-rails-3, sass, rails-admin

我安装了 rails admin 并在尝试访问时出现错误`/admin`：

![在此处输入图像描述](../Images/1dec2cecf4f9ceb4e80001ee28a02a68.png)

我的`Gemfile`：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

gem 'devise'
gem 'rails_admin'

gem 'pg'
gem 'haml'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'therubyracer'
  gem 'less-rails'
  gem 'coffee-script'

  gem 'uglifier', '>= 1.0.3'
end 
```

我有自定义较少的样式`app/assets/stylesheets/*`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:42:01.177

原来是 twitter bootstrap & rails admin 不兼容。

Rails 管理员尝试加载`bootstrap.less`位于`app/assets/stylesheets`.

解决方法：重命名`bootstrap.less`为`bootstrap-mine.less`.

# javascript - 运行 javascript 函数时 CSS 动画停止

> ID：14367168
> 
> 赞同：5
> 
> 时间：2013-01-16T20:24:56.533
> 
> 标签：javascript, jquery, css-animations

假设我有这个 javascript 函数：

```
 function pauseComp(ms) {
     var date = new Date();
     var curDate = null;
     do { curDate = new Date(); }
     while(curDate-date < ms);
    } 
```

和一个 css3 动画（例如，`<i class="icon-spinner icon-spin"></i>`来自新的[font-awesome 3](http://fortawesome.github.com/Font-Awesome/#examples)）。当我运行上面的 javascript 函数时，它会在函数运行时停止微调器。**看看我在说[什么](http://jsfiddle.net/JU4St/1/)**。基本上，javascript 会停止 css 动画，我想知道为什么，或者是否有其他人注意到这一点/找到了解决方法。我尝试将它放在 setTimeout(fn,0) 中，其中 fn 是长进程，但后来意识到为什么这也不起作用（js 不是多线程的）。有人见过这种情况吗？

更新：有趣的是，这在 Safari 中似乎不是什么大问题，尽管与浏览器界面的交互仍然受到影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:34:22.520

浏览器页面是单线程的。更新 UI 发生在与您的 javascript 程序相同的线程上。这也意味着在执行 Javascript 代码时任何动画都不会绘制新帧。通常，这没什么大不了的，因为大多数 JS 代码执行得非常快，比单个动画帧还快。

所以最好的建议就是：不要那样做。不要长时间锁定 JS 引擎。找出一种更清洁的方法来做到这一点。

* * *

但是，如果必须，有办法。[您可以通过HTML5 的 Web Workers API](https://developer.mozilla.org/en-US/docs/DOM/Using_web_workers)获得额外的线程。旧版浏览器不支持此功能，但它允许您从主网页和它自己的线程中运行一些长时间运行的 CPU 吸收代码，然后让它在完成后将一些结果回传到您的页面。

# jquery - Onmouseover 恢复为原始文本

> ID：14367170
> 
> 赞同：1
> 
> 时间：2013-01-16T20:25:15.777
> 
> 标签：jquery, html, css, onmouseover

因此，我将 onmouseover 应用于安吉丽娜朱莉图像，以更改上面显示“一些示例文本”的元素的文本。我怎样才能让它恢复到原来的文本，上面写着“你每天服用的 Contrabang”。预先感谢您的帮助。Jsfiddle 在这里[http://jsfiddle.net/cntra/VSCXy/9/](http://jsfiddle.net/cntra/VSCXy/9/)

HTML：

```
<div class="columa">     
<div id="text-display">
<span id="targetElm">Your Daily Dose of Contrabang</span>
</div>

<div class="morphing-tinting">
<a href="#" class="changeTextClass" rel="targetElm|some sample text">
<span class="image-wrap" style="position:relative; left: 0px; top:0; display:inline-block;        
background:url
(http://www.howmuchdotheyweigh.com/wp-content/uploads/2011/02/angelina-jolie.jpg)
 no-repeat center center; width: 250px; height: 250px;">
</span></a> 
```

CSS：

```
 #text-display
 {top:; position: relative;
 display:inline-block;padding:5px 10px; 
 font-family: sans-serif; font-weight:bold; font-size:50px; 
 color: white; text-align: center; line-height: 1.2em;margin:0px;   
 background-color:#E94F78;}

.morphing-tinting .image-wrap {
position: absolute;

-webkit-transition: 1s;
-moz-transition: 1s;
transition: 1s;

-webkit-border-radius: 30em;
-moz-border-radius: 30em;
border-radius: 30em;
}

.morphing-tinting .image-wrap:hover{
-webkit-border-radius: 30em;
-moz-border-radius: 30em;
border-radius: 30em;
} 
```

JS

```
$('.changeTextClass').hover(function(){
    var elmData = $(this).attr('rel').split('|');
    $('#'+elmData[0]).text(elmData[1]);
});

    var elmData,origText;
$('.changeTextClass').hover(function(){
    elmData = $(this).attr('rel').split('|');
    origText = $('#'+elmData[0]).text();
    $('#'+elmData[0]).text(elmData[1]);
 }, function(){
    $('#'+elmData[0]).text(origText);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:31:06.327

你的小提琴工作得很好，你所拥有的只是旧的悬停正在破坏新的影响。请参阅：http: [//jsfiddle.net/VSCXy/10/](http://jsfiddle.net/VSCXy/10/)（注意我删除了安吉丽娜，因为她是 NSFW）

更新js部分：

```
var elmData,origText;
$('.changeTextClass').hover(function(){
    elmData = $(this).attr('rel').split('|');
    origText = $('#'+elmData[0]).text();
    $('#'+elmData[0]).text(elmData[1]);
 }, function(){
    $('#'+elmData[0]).text(origText);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:40:54.980

您可以缓存原始文本并使用 handlerOut 回调将文本设置回原始文本。

```
.hover( handlerIn(eventObject), handlerOut(eventObject) ) 
```

因此，在准备好 DOM 时，我会这样做：

```
$(document).ready(function()
{
  var originalText = $('#targetElm').text();

  $('.changeTextClass').hover(
    function() {
      var elmData = $(this).attr('rel').split('|');
      $('#targetElm').text(elmData[1]);
    },
    function() {
      $('#targetElm').text(originalText);
    }
  );
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:36:03.070

将您的脚本更改为以下内容：

```
var elmData,origText;
$('.changeTextClass').hover(function(){
    elmData = $(this).attr('rel').split('|');
    origText = $('#targetElm').text();
    $('#'+elmData[0]).text(elmData[1]);
 }, function(){
    $('#'+elmData[0]).text(origText);
}); 
```

您删除了第一个悬停功能，然后在第二个中更改了 origText 的内容以及所有想要的工作。

# jquery - 在可变长度序列中使用 jQuery addClass

> ID：14367172
> 
> 赞同：2
> 
> 时间：2013-01-16T20:25:26.603
> 
> 标签：jquery, for-loop, sequence, addclass

我正在尝试使用 jQuery 生成我自己的画廊，其中包含可点击缩略图的 div，当点击相应的缩略图时显示/隐藏大图像。

我已经让它工作了，但只有画廊中有已知数量的图像（在本例中为 3）。如果我在画廊中有 30 张图片怎么办？我不想写出 30 次以下的代码！

我真正想要的是更改此代码....

```
$('#slideshow-thumbs img.1').click( function() {
    $('#main-slideshow img.show').removeClass('show').addClass('hide');
    $('#main-slideshow img.1').removeClass('hide');
    $('#main-slideshow img.1').addClass('show');
});

$('#slideshow-thumbs img.2').click( function() {
    $('#main-slideshow img.show').removeClass('show').addClass('hide');
    $('#main-slideshow img.2').removeClass('hide');
    $('#main-slideshow img.2').addClass('show');
});

$('#slideshow-thumbs img.3').click( function() {
    $('#main-slideshow img.show').removeClass('show').addClass('hide');
    $('#main-slideshow img.3').removeClass('hide');
    $('#main-slideshow img.3').addClass('show');
}); 
```

...到更像这样的格式（其中 n 是一个数字，j 是画廊中的图像总数）：

```
for (n=1; n<=j; n++) {

$('#slideshow-thumbs img.n').click( function() {
    $('#main-slideshow img.show').removeClass('show').addClass('hide');
    $('#main-slideshow img.n').removeClass('hide');
    $('#main-slideshow img.n').addClass('show');
});

} 
```

但是我不知道如何在 jQuery 中正确编写它，因为我是新手。真的很感激一些帮助！我还希望脚本计算 j （画廊中的图像总数）也是（通过从我假设的 html 中检测它），以便该脚本适用于任何大小的任何画廊。

提前感谢您的帮助。

相关HTML：

```
<div id="main-slideshow">
    <img class="1 show" src="images/booklet-open.jpg"/>
    <img class="2 hide" src="images/booklets.jpg" />
    <img class="3 hide" src="images/poster-1.jpg" />
</div>

<div id="slideshow-thumbs">
    <img class="1 active" src="images/booklet-open-thumb.jpg" />
    <img class="2 inactive" src="images/booklets-thumb.jpg" />
    <img class="3 inactive" src="images/poster-1-thumb.jpg" />
</div> 
```

相关CSS：

```
.inactive {
    opacity:0.5;
}

.active {
    opacity: 1;
}

.hide {
    display:none;
}

.show {
    display:block;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:28:20.200

你很接近，只需要使用变量 n，而不是字符串。我还结合了最后两个语句，因为您不需要重新获取元素。正如 Danny 指出的那样，您可以通过以下方式找到 j。

**尝试 1（错误）：**

```
var j = $('#slideshow-thumbs img').size()

for (n=1; n<=j; n++) {
    $('#slideshow-thumbs img.' + n).click( function() {
        $('#main-slideshow img.show').removeClass('show').addClass('hide');
        $('#main-slideshow img.' + n).removeClass('hide').addClass('show');
    });
} 
```

但是，这种解决方案容易受到[循环问题](https://stackoverflow.com/questions/1451009/javascript-infamous-loop-problem)的影响。本质上，由于该部分代码位于闭包中，因此`n`即使在`for`循环继续进行后，它也会保留对变量的引用。因此，当单击 img 时，它会查找最大 n 值（在本例中为 4），但没有任何反应。为避免这种情况，请尝试将使用的值放入`n`对象（在本例中为函数）。有很多解决方案，请随意尝试。

**尝试 2（正确）：**

```
var j = $('#slideshow-thumbs img').size()

for (n=1; n<=j; n++) {
    $('#slideshow-thumbs img.' + n).click( function() {
        toggleImages(n);
    });
}

function toggleImages(n) {
    $('#main-slideshow img.show').removeClass('show').addClass('hide');
    $('#main-slideshow img.' + n).removeClass('hide').addClass('show');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:43:01.290

你不需要这么多的类和 for 循环。看看这个演示[http://jsfiddle.net/eaTjM/1/](http://jsfiddle.net/eaTjM/1/)

```
$("#slideshow-thumbs img").click(function(){
  $(this).addClass("active").siblings().removeClass("active");
  $("#main-slideshow img").eq($(this).prevAll().length)
    .addClass("show").siblings().removeClass("show")
}); 
```

`$(this).prevAll().length`给我们点击的预览索引，`.eq()`方法通过这个索引给出图像。

# php - 回显sql数组得到的最大值

> ID：14367173
> 
> 赞同：-2
> 
> 时间：2013-01-16T20:25:42.660
> 
> 标签：php

我得到了以下数组

```
Array (
    [G_ID] => 11
    [Username] => student
    [Password] => admin
    [gender] => m
    [email] => dsfsdas
    [phone] => hgjhg
    [address] => surat
    [birthdate] => 
    [interest] => 
    [goal] => 
    [User_Type] => student
    [Conform] => 1
    [l_name] => student
    [f_name] => student
    [clg_name] => scatt
    [branch] => cseq
    [avatar] => 11avatarJaguar_Logo.jpg
    [Student_Master_ID] => 11
    [Staff_Master_ID_Staff_Master] => 
    [Branch] => cseq
    [Semester] => 8
    [PEN] => 090490131013
    [SPI_1] => 6.50
    [SPI_2] => 5.20
    [SPI_3] => 7.5
    [SPI_4] => 6.5
    [SPI_5] => 8.0
    [SPI_6] => 7.1
    [SPI_7] => 8.0
    [SPI_8] => 0
    [0] => 6.50
    [max(SPI_1)] => 6.50
    [1] => 8.0
    [max(SPI_2)] => 8.0
    [2] => 7.5
    [max(SPI_3)] => 7.5
    [3] => 6.5
    [max(SPI_4)] => 6.5
    [4] => 8.0
    [max(SPI_5)] => 8.0
    [5] => 7.1
    [max(SPI_6)] => 7.1
    [6] => 8.0
    [max(SPI_7)] => 8.0
    [7] => 0
    [max(SPI_8)] => 0
) 
```

我想打印这个`max(SPI_1)`值。我怎样才能打印这个值？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:29:22.483

您应该阅读[数组](http://php.net/manual/en/language.types.array.php)。

```
//    key     => value
// max(SPI_1) => 6.50 
```

有了这些知识，您只需执行以下操作：

```
echo $student["max(SPI_1)"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:30:10.040

假设数组存储为`$array`

```
echo $array['max(SPI_1)']; 
```

这行不通吗？

# sql - 如何在 SQL 中按时间分组

> ID：14367174
> 
> 赞同：2
> 
> 时间：2013-01-16T20:25:48.443
> 
> 标签：sql, sql-server

> **可能重复：**
> [SQL Query Group By Datetime 问题？](https://stackoverflow.com/questions/3693619/sql-query-group-by-datetime-problem)

我正在开发一个包含 2 个步骤的应用程序。

*   扫描日志并将其中的数据保存在数据库中。
*   从数据库中读取数据并可视化数据。

第一步或多或少已经完成。我试图用第二步来解释背景和我的要求。

数据库中的每一行都包含一些信息，如 logdate、logfilename、LogType、logMessage 等。所以我想例如编写 SQL 来总结每天给定的 LogType。

这是列：

```
[LogDate] [datetime] NOT NULL,
[Computer] [varchar](50) NOT NULL,
[Type] [varchar](50) NOT NULL,
[FileName] [varchar](100) NOT NULL,
[LineNo] [int] NOT NULL,
[UserName] [varchar](50) NOT NULL,
[Message] [varchar](max) NOT NULL, 
```

如果我想使用 Type=TDBError 显示所有行，我想输出可能是这样的：

```
Date        Sum
2012-10-01  3
2012-10-02  12
2012-10-03  40
2012-10-05  24
2012-10-06  18 
```

因此，在日期 2012-10-01，DB 中有 3 行 Type=TDBError。在日期 2012-10-02 有 12 个等。

我应该如何为此编写 SQL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:33:43.567

```
Select Cast(FLOOR(CAST(DATE as float)) as DateTime) as Date,COUNT(*) as [SUM]
from Log_Table_Name
Group by Cast(FLOOR(CAST(DATE as float)) as DateTime)
order by Cast(FLOOR(CAST(DATE as float)) as DateTime) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:28:57.427

GROUP BY DATEPART(day, date), DATEPART(month, date), DATEPART(year, date)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T20:29:49.220

假设 SQL Server 2008 或更新版本：

```
SELECT 
  [Date] = CONVERT(DATE, LogDate), 
  [Sum] = COUNT(*)
FROM dbo.Log_Table_Name
WHERE [Type] = 'DBError'
GROUP BY CONVERT(DATE, LogDate)
ORDER BY [Date]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T20:30:48.047

你可以按时间分组

```
GROUP BY date(log_date), month(log_date), day(log_date) 
```

# javascript - Google Chart 表格中的标题行修复不起作用

> ID：14367180
> 
> 赞同：1
> 
> 时间：2013-01-16T20:26:10.790
> 
> 标签：javascript, google-visualization

我发现，理论上，当您向下滚动表格时，Google Chart 应该会自动修复表格的标题行：

> “当用户滚动时，标题行保持固定。” （[https://developers.google.com/chart/interactive/docs/gallery/table](https://developers.google.com/chart/interactive/docs/gallery/table) - 概述）

出于某种奇怪的原因，我的表格没有修复标题行。这是代码。我基本上从 Google 的页面（上面的链接）复制了相同的示例代码，并在其中添加了大约 40 行。我错过了什么吗？我已经在 Firefox 和 Chrome 中尝试过，同样的事情，没有修复。

```
<html>
  <head>
    <script type='text/javascript' src='https://www.google.com/jsapi'></script>

    <script type='text/javascript'>
      google.load('visualization', '1', {packages:['table']});
      google.setOnLoadCallback(drawTable);
      function drawTable() {
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Column0');
        data.addColumn('number', 'Column1'); 
        data.addRows([
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1],
          ['a',1]
        ]);

        var table = new google.visualization.Table(document.getElementById('table_test'));
        table.draw(data, {showRowNumber: true});
      }
    </script>
  </head>
  <body>
    <div id="table_test" style="width: 200px;"></div>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T07:59:43.150

如果您在表格中添加“高度”属性，当您垂直向下滚动页面时，它会将标题行保持在顶部。使用您的示例，只需将以下内容添加到您的选项中。

你的代码：

```
table.draw(data, {showRowNumber: true}); 
```

调整后的代码：

```
table.draw(data, {showRowNumber: true, height: 200}); 
```

如果您有大量数据希望某人滚动，这很有用，但它不是您认为的那样。如果您想让行标题“浮动”，则必须使用绝对定位和一些花哨的 CSS 来处理滚动页面时的工作方式（假设页面滚动）。如上所述使用高度要容易得多。

# java - 动画 JFrame 的位置

> ID：14367181
> 
> 赞同：0
> 
> 时间：2013-01-16T20:26:15.677
> 
> 标签：java, swing, animation, jframe

我做了一个简单的`JFrame`(320 X 64) 我在屏幕顶部显示 (未装饰 (true);)。有没有一种简单的方法来绘制`JFrame`屏幕上方，向下滑动，等待几秒钟，然后返回并处理？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:56:07.750

您将需要使用`Swing Timer`和`JFrame#setLocation(int x,int y)`

这是我做的一个小例子：

它只是简单地开始 a从起始坐标向下（在 y 轴上）`Swing Timer`移动*未装饰* `JFrame`，直到它到达通过`GraphicsEnvironment#getMaximumWindowBounds()`. 然后它开始一个新的`Swing Timer`2500 毫秒，然后`JFrame`回到屏幕顶部，而不是`dispose()` `JFrame`完成后：

```
import java.awt.Dimension;
import java.awt.GraphicsEnvironment;
import java.awt.event.ActionEvent;
import javax.swing.AbstractAction;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.Timer;

public class AnimateJFrame {

    private JFrame frame;

    public AnimateJFrame() {
        initComponents();
    }

    private void initComponents() {
        frame = new JFrame() {
            @Override
            public Dimension getPreferredSize() {
                return new Dimension(300, 300);
            }
        };
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setUndecorated(true);
        frame.pack();
        frame.setVisible(true);

        createAndStartDownwardTimer(frame);
    }

    private void createAndStartDownwardTimer(final JFrame frame) {
        new Timer(25, new AbstractAction() {
            int screenHeight = GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds().height;
            int y = frame.getY();

            @Override
            public void actionPerformed(ActionEvent ae) {
                if (frame.getY() + frame.getHeight() < screenHeight) {
                    y += 10;
                    frame.setLocation(frame.getX(), y);
                } else {
                    createAndStartUpwardTimer(2500 - 15);//15milis approx latency
                    ((Timer) ae.getSource()).stop();
                }
            }
        }).start();
    }

    private void createAndStartUpwardTimer(int initialDelay) {
        Timer t = new Timer(25, new AbstractAction() {
            int y = GraphicsEnvironment.getLocalGraphicsEnvironment().getMaximumWindowBounds().height - frame.getHeight();

            @Override
            public void actionPerformed(ActionEvent ae) {
                if (frame.getY() > 0) {
                    y -= 10;
                    frame.setLocation(frame.getX(), y);
                } else {
                    frame.dispose();
                    ((Timer) ae.getSource()).stop();
                }
            }
        });
        t.setInitialDelay(initialDelay);
        t.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                new AnimateJFrame();
            }
        });
    }
} 
```

# python - Python unittest - ValueError：没有这样的测试方法 : 运行测试

> ID：14367182
> 
> 赞同：4
> 
> 时间：2013-01-16T20:26:19.830
> 
> 标签：python, unit-testing

我有一个使用 unittest 的非常简单的设置，但我收到了一个我不明白的错误。

```
# mytestcase.py
import unittest

class MyTestCase(unittest.TestCase):
    def test_one(self):
        self.assertTrue(True)
    def test_two(self):
        self.assertTrue(False)

def initialize():
    return MyTestCase()

if __name__ == '__main__':
    unittest.main() 
```

如果我执行上述文件，我会得到以下结果，这是我所期望和理解的：

```
> python mytestcase.py
.F
======================================================================
FAIL: test_two (__main__.MyTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "mytestcase.py", line 7, in test_two
    self.assertTrue(False)
AssertionError: False is not true

----------------------------------------------------------------------
Ran 2 tests in 0.000s

FAILED (failures=1) 
```

但我想以另一种方式运行这些测试，从`my_test_manager.py`：

```
# my_test_manager.py
import mytestcase

test_case = mytestcase.initialize()
test_suite = unittest.TestLoader().loadTestsFromTestCase(test_case)
test_suite_result = unittest.TestResult()
test_suite.run(test_suite_result)
for err in test_suite_result.errors:
    print err
for fail in test_suite_result.failures:
    print fail 
```

但是如果我尝试运行这个文件，它会崩溃如下：

```
> python my_test_manager.py 
Traceback (most recent call last):
  File "my_test_manager.py", line 3, in <module>
    test_case = mytestcase.initialize()
  File "/Users/Jon/dev/test-tools/practice/mytestcase.py", line 11, in initialize
    return MyTestCase()
  File "/usr/local/Cellar/python/2.7.3/Frameworks/Python.framework/Versions/2.7/lib/python2.7/unittest/case.py", line 191, in __init__
    (self.__class__, methodName))
ValueError: no such test method in <class 'mytestcase.MyTestCase'>: runTest 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:30:56.853

您不需要创建实例；返回 MyTestCase 类本身：

```
def initialize():
    return MyTestCase 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-24T11:29:30.467

谢谢它像你建议的那样工作。

```
from mytestcase import MyTestCase
import unittest
test_suite = unittest.TestLoader().loadTestsFromTestCase(MyTestCase)
test_suite_result = unittest.TestResult()
test_suite.run(test_suite_result)
for err in test_suite_result.errors:
    print("hello")
for fail in test_suite_result.failures:
    print("no hello") 
```

# html - 在我的网站上播放声音

> ID：14367184
> 
> 赞同：5
> 
> 时间：2013-01-16T20:26:24.380
> 
> 标签：html, embed

我使用代码在我的网站上播放背景音乐..

```
<embed src="1.wav" autostart="true" loop="true"
width="2" height="0">
</embed> 
```

但是这段代码不会播放无限循环的音乐..一旦音轨结束它就不会重复..我应该怎么做才能一次又一次地重复音乐..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-26T03:49:41.230

这是我发现效果最好的...只需将“yoursounds”替换为您选择的实际文件名。

```
<audio autoplay loop controls>
    <source src="yoursound.ogg">
    <source src="yoursound.mp3">
</audio> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:34:01.943

尝试改用音频标签：

```
<audio autoplay loop>
    <source src="sound.ogg">
    <source src="sound.mp3"> 
</audio> 
```

您需要同时使用 mp3 和 ogg 文件才能在所有浏览器中正确播放声音。~~例如 Firefox 不支持 mp3 文件。~~由于其大小，在网站上使用 .wav 也会受到严重反对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:31:04.660

而不是 loop='true' 尝试使用 loop='infinite' 如下

```
<embed src="1.wav" autostart="true" loop="infinite"
width="2" height="0">
</embed> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:31:43.470

HTML5 解决方案是音频标签[http://www.w3schools.com/tags/tag_audio.asp](http://www.w3schools.com/tags/tag_audio.asp)

这是较旧的解决方案： http: [//drayblog.gotdns.com/index.php/2009/05/13/html-embed-an-audio-clip-and-repeat-loop-it/](http://drayblog.gotdns.com/index.php/2009/05/13/html-embed-an-audio-clip-and-repeat-loop-it/)

```
<EMBED SRC="/audio/media.mp3" AUTOSTART="true" HIDDEN="True" LOOP="True"/>
<NOEMBED>
    <object type="audio/mp3" data="http://www.domain.com/audio/media.mp3"><param name="src" value="http://www.domain.com/audio/media.mp3"></param><param name="autostart" value="true"></param><param name="hidden" value="True"></param><param name="loop" value="true"></param>
    </object>
</NOEMBED> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T20:39:00.280

试试[jPlayer](http://jplayer.org/)。它是一个 html5 媒体播放器，将回退到 flash。这是其中一个演示的示例：

```
$("#jquery_jplayer_1").jPlayer({
    ready: function () {
        $(this).jPlayer("setMedia", {
            m4a:"http://www.jplayer.org/audio/m4a/TSP-01-Cro_magnon_man.m4a",
            oga:"http://www.jplayer.org/audio/ogg/TSP-01-Cro_magnon_man.ogg"
        });
    },
    swfPath: "../js",
    solution: "flash, html",
    supplied: "m4a, oga",
    wmode: "window"
});

<div id="jquery_jplayer_1" class="jp-jplayer"></div> 
```

[http://jplayer.org/latest/demo-01-solution-flash-html/](http://jplayer.org/latest/demo-01-solution-flash-html/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-20T18:28:35.833

```
<audio hidden="true" autoplay loop controls>
    <source src="source.mp3">
</audio> 
```

它会按照您的意愿正常工作...

# ios - GarageBand 类型 UI 的时间线对象类型？

> ID：14367188
> 
> 赞同：0
> 
> 时间：2013-01-16T20:26:45.810
> 
> 标签：ios, xcode, cocoa

我正在开发一个需要 Garageband 类型界面的时间线应用程序。我不是一名新开发人员，我有 CGI 方面的背景，并且从事 Mac 开发人员已有 20 多年，但我对制作什么**样**的对象来代表时间轴中的对象有点困惑。他们是 UIViews 吗？用 QuartzCore 绘制？我用谷歌搜索了这个概念，看了一些书，结果一无所获。关于如何制作这些物品的任何想法？我宁愿问，然后从一个方向开始，并意识到可能会有更好的方法。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:50:05.100

鉴于它们允许用户交互，它们可能被实现为自定义`UIView`子类。由于视图是由层支持的，并且由于时间线并没有飞来飞去并制作疯狂的复杂动画，所以没有一个很好的理由让 UI 直接从层构建。

# scala - 有关于将 Scala 2.9 编译器插件迁移到 2.10 的任何信息吗？

> ID：14367189
> 
> 赞同：16
> 
> 时间：2013-01-16T20:26:45.913
> 
> 标签：scala, scala-2.10, scala-compiler

我有一个 Scala 2.9 编译器插件（源代码），在 2.9 中工作得很好，但甚至不能用 2.10 编译。有几十个（可能有 100 多个）相同类型的错误，例如：

```
 [scalac] C:\***.scala:31: error: illegal cyclic reference involving class Global
    [scalac]   val fileSeparator = System.getProperty("file.separator");
    [scalac]                       ^ 
```

...最终以：

```
 [scalac] scala.reflect.internal.Types$TypeError: illegal cyclic reference involving class Global
    [scalac]     at scala.reflect.internal.Types$class.defineBaseClassesOfCompoundType(Types.scala:1731)
    [scalac]     at scala.reflect.internal.SymbolTable.defineBaseClassesOfCompoundType(SymbolTable.scala:12)
    [scalac]     at scala.reflect.internal.Types$CompoundType.baseClasses(Types.scala:1581)
    [scalac]     at scala.reflect.internal.Types$TypeRef.baseClasses(Types.scala:2369)
    [scalac]     at scala.reflect.internal.Types$SimpleTypeProxy$class.baseClasses(Types.scala:248)
    [scalac]     at scala.reflect.internal.Types$SingletonType.baseClasses(Types.scala:1292)
    [scalac]     at scala.reflect.internal.Types$Type.findMembers(Types.scala:1058)
    [scalac]     at scala.reflect.internal.Types$Type.membersBasedOnFlags(Types.scala:683)
    [scalac]     at scala.reflect.internal.Types$Type.implicitMembers(Types.scala:637)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.collect$1(Contexts.scala:630)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.collectImplicitImports(Contexts.scala:642)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:670)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Contexts$Context.implicitss(Contexts.scala:675)
    [scalac]     at scala.tools.nsc.typechecker.Implicits$ImplicitSearch.bestImplicit(Implicits.scala:1378)
    [scalac]     at scala.tools.nsc.typechecker.Implicits$class.inferImplicit(Implicits.scala:82)
    [scalac]     at scala.tools.nsc.Global$$anon$1.inferImplicit(Global.scala:490)
    [scalac]     at scala.tools.nsc.typechecker.Implicits$class.inferImplicit(Implicits.scala:37)
    [scalac]     at scala.tools.nsc.Global$$anon$1.inferImplicit(Global.scala:490)
    [scalac]     at scala.tools.nsc.typechecker.Typers$Typer.hasImport$1(Typers.scala:764)
    [scalac]     at scala.tools.nsc.typechecker.Typers$Typer.scala$tools$nsc$typechecker$Typers$Typer$$action$1(Typers.scala:766)
    [scalac]     at scala.tools.nsc.typechecker.Typers$Typer$$anonfun$checkFeature$1.apply$mcV$sp(Typers.scala:788)
    [scalac]     at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3$$anonfun$apply$1.apply(Analyzer.scala:100)
    [scalac]     at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3$$anonfun$apply$1.apply(Analyzer.scala:100)
    [scalac]     at scala.collection.immutable.List.foreach(List.scala:309)
    [scalac]     at scala.collection.generic.TraversableForwarder$class.foreach(TraversableForwarder.scala:32)
    [scalac]     at scala.collection.mutable.ListBuffer.foreach(ListBuffer.scala:45)
    [scalac]     at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3.apply(Analyzer.scala:100)
    [scalac]     at scala.tools.nsc.Global$GlobalPhase.applyPhase(Global.scala:461)
    [scalac]     at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3$$anonfun$run$1.apply(Analyzer.scala:90)
    [scalac]     at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3$$anonfun$run$1.apply(Analyzer.scala:90)
    [scalac]     at scala.collection.Iterator$class.foreach(Iterator.scala:727)
    [scalac]     at scala.collection.AbstractIterator.foreach(Iterator.scala:1156)
    [scalac]     at scala.tools.nsc.typechecker.Analyzer$typerFactory$$anon$3.run(Analyzer.scala:90)
    [scalac]     at scala.tools.nsc.Global$Run.compileUnitsInternal(Global.scala:1574)
    [scalac]     at scala.tools.nsc.Global$Run.compileUnits(Global.scala:1548)
    [scalac]     at scala.tools.nsc.Global$Run.compileSources(Global.scala:1544)
    [scalac]     at scala.tools.nsc.Global$Run.compile(Global.scala:1654)
    [scalac]     at scala.tools.ant.Scalac.executeInternal(Scalac.scala:699)
    [scalac]     at scala.tools.ant.Scalac.execute(Scalac.scala:647)
    ... 
```

我需要一些关于 2.10 中发生了哪些变化或如何以其他方式处理此问题的信息或帮助......我尝试谷歌搜索并查看论坛，但发现关于此主题的信息很少。

将不胜感激任何帮助！

编辑：附加信息。这显然是在使用 ant 任务（参见堆栈跟踪）。该任务已定义：

```
 <taskdef resource="scala/tools/ant/antlib.xml">
        <classpath>
          <pathelement location=".../scala-library.jar"   />
          <pathelement location=".../scala-reflect.jar"   />
          <pathelement location=".../scala-compiler.jar"  />
        </classpath>
    </taskdef> 
```

编辑 2：更多附加信息：我设法使用命令行 2.10 编译器编译了这个插件**（**由于其他事情失败了还没有运行它）（记住 - 在 2.9 世界中一切都很好） - 基于 ant 的构建继续失败同样的方式（错误？）。我不得不做出两个改变。首先处理可变参数。有一种方法如：

```
 def foo(arg: String*) { ... } 
```

还有另一种方法实际上是它的同义词，它**是**用 2.9 Scala 编写的：

```
 def bar = foo _; 
```

我必须将其更改为以下内容才能使其正常工作：

```
 def bar(arg: String*) = foo(arg: *); 
```

另一个处理 'hasAssignedAnnotations' 不再出现在 ValOrDefDef.symbol 中（我只是将其注释掉以使其编译，而不是真正的修复）。

再说一次，有没有人知道可以帮助我迁移的网站或文档 - 即在我需要的方面从 2.9 更改为 2.10，包括编译器插件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T22:16:48.140

我认为没有任何可用的文档。如果我没记错的话，Martin Odersky 在[此演示文稿](http://hacking-scala.posterous.com/new-features-in-scala-210)中说，编辑了 1000 多个文件。对于 2.10，他们重写了大部分编译器以支持更好的反射。作为副作用，[宏](http://docs.scala-lang.org/overviews/macros/overview.html)突然出现。当然，另一个副作用是许多编译器插件停止工作。

[理论上你可以浏览/搜索scala 源代码](https://github.com/scala/scala/tree/2.10.x)的 git 历史，但实际上这很可能太耗时了。一些编译器插件已转换为宏，因为它们更容易发布。我不知道这是否适合您。

您最好的选择可能是查看对 scala 附带的插件所做的更改。我找到了包含大量信息和更改的延续插件的[这个提交](https://github.com/scala/scala/commit/6bb5975289c5b11cb8c88dd4629286956b5d3d27#src/continuations/plugin/scala/tools/selectivecps)（*新的反射 - 显示 190 个更改的文件，其中包含 9,001 个添加和 6,403 个删除）。*我希望这有任何帮助。

# c++ - WM_PAINT Bitblitting 多次？

> ID：14367196
> 
> 赞同：0
> 
> 时间：2013-01-16T20:27:15.413
> 
> 标签：c++, winapi, bitmap, wm-paint, bitblit

这适用于 C++ - win32。基本上，我已经从文件中将图像（bmp）加载到 HBITMAP 中，并将它的 bitblitted 到主窗口的设备上下文中。

如果我想更改图像，我将如何再次调用它？

我调用了 InvalidateRectangle() 和 UpdateWindow() 但这会导致窗口控件闪烁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:35:22.323

通常，您使该区域无效（例如 via `InvalidateRect`）并让您的`WM_PAINT`处理程序重新绘制它。您经常闪烁的原因是因为您没有覆盖`WM_ERASEBKGND`处理程序，您的`WM_PAINT`处理程序没有进行双缓冲绘制，或者您正在使（或重新绘制）比您需要的更大的区域无效。

此页面可能会有所帮助：[无闪烁绘图：消除应用程序闪烁的技术](http://www.catch22.net/tuts/flicker-free-drawing)

# php - ajax在文本框中显示查询结果

> ID：14367204
> 
> 赞同：1
> 
> 时间：2013-01-16T20:28:00.373
> 
> 标签：php, ajax

好的，所以我已经在我的 GoDaddy 托管帐户上安装了 jQuery。我需要在文本框中显示结果并完成我的 HTML，它获取用户输入、按钮单击和结果区域 (div id=status)。我想简单地将结果放在一个框中，而不必刷新页面。我正在尝试这个 json 的东西和 AJAX 来完成这个，我试图找出我的尝试有什么问题。这是HTML。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1  /DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<script language='JavaScript' type='text/javascript'>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Test</title>

</head>
<body>
<p>Miles <input name="miles" id="miles" type="text" /> <button type="button" name="getdata" id="getdata">Submit</button></p>
<p></p>
<div id="status">

</div>
<script type="text/javascript" language="javascript">
$('getdata').click(function(){

   $.ajax({
           url: 'process.php',
           type:'POST',
           dataType: 'json',
           success: function(output_string){
                   $('#result_table').append(output_string);
               }
           ));

});
</script>
</body>
</html> 
```

它应该被发送到 process.php 文件：

```
<?php
$hostname = 'myhost.com';
$username = 'ratetable';
$password = 'mypassword';

$miles = (int) $_POST['miles'];

try 
{
   $db = new PDO("mysql:host=$hostname;dbname=ratetable", $username, $password);

   foreach($db->query('SELECT * FROM rates WHERE mileage<= ' . $miles . ' ORDER BY mileage DESC LIMIT 1') as $row) {
   $output_string .= '<input type='text' name='answer' value='" . $row['ratepermile'] . "'>';

   }
}         
echo json_encode($output_string);
catch (PDOException $e) {
   echo $e->getMessage();
   throw($e);
}
?> 
```

我试图用一个例子来构造它，但什么也没有发生……甚至 HTML 表单也没有。这有什么问题？

谢谢你看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:31:42.603

您的选择器错误`$('getdata')`应该是`$('#getdata')`，您必须在 id 前面加上 a`#`才能选择具有其 id 的元素。您还必须将参数传递给发布请求

```
$.ajax({
       url: 'process.php',
       type:'POST',
       data: {miles: $('#miles').val()},
       dataType: 'json',
       success: function(output_string){
               $('#result_table').append(output_string);
       }
)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T11:09:22.953

试试这个，

```
$('#result_table').val(output_string); 
```

# java - Sikuli 日志记录设置

> ID：14367206
> 
> 赞同：3
> 
> 时间：2013-01-16T20:28:05.007
> 
> 标签：java, logging, automation, sikuli, sikuli-script

我在我的 java 应用程序中使用 sikuli-script.jar。它在控制台中写入大量日志消息。所以，我想禁用日志记录或更改日志记录级别。我怎么能做到这一点？那里使用什么日志库以及如何配置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T16:44:45.260

如果您使用的是 Java，则可能需要查看[Sikuli-API](http://code.google.com/p/sikuli-api/ "谷歌代码上的 Sikuli-API")。它试图更像是一个标准的 Java 库。

Sikuli-API 使用[SLF4J](http://www.slf4j.org "SLF4J")，因此您只需将其连接到您使用的任何日志记录框架（我非常喜欢[Logback](http://logback.qos.ch/ "回溯")），它将使用该配置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-20T18:27:38.493

您可以在脚本顶部包含此行以禁用操作日志，例如标准输出上的鼠标单击日志：D

```
Settings.ActionLogs=0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T20:32:56.937

我运行了一些 Sikuli 脚本几次，从未注意到任何详细的输出。我认为您可以通过将这样的选项传递给 JVM来**[覆盖它：](http://doc.sikuli.org/javadoc/org/sikuli/script/Debug.html)**

```
-Dsikuli.Debug=ERROR 
```

或者

```
-Dsikuli.Debug=0 
```

这是一个未经测试的答案。你必须自己尝试一下。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-10T15:33:11.063

在 sikuli-java.jar 中，sikuli-basics 允许访问一些可配置的选项：

Settings.ActionLogs
Settings.InfoLogs

可以将其中一个/两者都分配为 false 以禁用日志记录。

或者，可以使用 Debug.setLogFile(filename) 将输出重定向到文件而不是标准输出。

祝你好运，西库利人！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-06-12T01:25:16.940

对于 Mac OS X 10.11.5 和 JDK 1.8 下的 Sikuli 1.1.0，这是我在通过 CLI 运行脚本时可以抑制日志记录的唯一方法：

```
java -Dsikuli.Debug=-2 -jar /Applications/SikuliX.app/Contents/Java/sikulix.jar -r /path/to/your/test.sikuli 
```

笔记：

1）您必须将 -Dsikuli.Debug 设置为 -2 才能使其工作（感谢@NullPointer）

2）您必须将 -Dsikuli.Debug=-2 作为 JVM 选项放在“java”之后，而不是将其放在命令末尾

# c# - 扩展任务管理器 Windows 8

> ID：14367211
> 
> 赞同：0
> 
> 时间：2013-01-16T20:28:25.873
> 
> 标签：c#, c++, windows, taskmanager

我想知道是否有任何方法可以用 C# 之类的语言扩展任务管理器，但我也可以使用 C++ 或其他任何可行的方法。我想添加一些新功能，例如搜索、杀死所有具有相同名称的进程，以及想到的其他功能，但我不知道要开始。

注意：我不想替换它或从头重写它，只是添加一些新功能。
我还发现了这个链接[Is it possible to add features to Vista/7 taskmgr.exe?](https://stackoverflow.com/questions/1694878/is-it-possible-to-add-functionality-to-vista-7-taskmgr-exe/1694935#1694935) 但它适用于 VIsta/7，考虑到它已经完全重新设计，我只是希望 8 中有所改变。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:05:07.357

如果我是对的，您想知道的是是否有办法通过基于插件的方法（如 Office/Ie/Outlook 插件）扩展 TaskManager。答案是不。然而，我有一种不同的方法可以帮助你做你想做的事，但会做更多的工作。我建议的是基于 Com 互操作的注入和覆盖。使用 Spy++，您可以看到 TaskManager 窗口的窗口类/属性是什么。然后你需要编写一个最小化的程序（系统托盘？！）并监视一些识别窗口/类名称以在消息系统中弹出。Windows 消息可以被拦截和挂接。[http://www.codeproject.com/Articles/33459/Spying-Window-Messages-from-the-Inside](http://www.codeproject.com/Articles/33459/Spying-Window-Messages-from-the-Inside)可能会有所帮助。
一旦你得到你的窗口句柄。您可能需要找到选项卡控制组。并注入一个新的选项卡元素。发布您可以将您认为的任何内容放入选项卡元素的帖子。

这是推测性的，并且假设您要添加的所有新更改最终都会出现在新选项卡中。

我希望这对您有所帮助。

PS：答案并不完全是推测性的。对于我工作场所的一些内部使用，我制作了一个原型，它可以做一些类似于 Outlook 的事情，并覆盖一些默认功能，这些功能本身没有被 Add in 框架公开。请注意，这将需要大量测试并且有些不可靠/不稳定

# python - setUpModule、tearDownModule 和导入在鼻子下可能会出现故障

> ID：14367213
> 
> 赞同：8
> 
> 时间：2013-01-16T20:28:30.573
> 
> 标签：python, unit-testing, nose, nosetests

我有一些我正在用鼻子发现和运行的 Python 单元测试。我观察到 setUpModule()、tearDownModule() 和测试模块导入的一些奇怪顺序。我有这个（示例）目录结构：

```
test1.py
test_dir/test2.py 
```

test1.py 和 test2.py 看起来像这样：

```
import sys
import unittest

def flushwrite(text):
    sys.stdout.write(text + '\n')
    sys.stdout.flush()

flushwrite("import %s" % __name__)

def setUpModule():
    flushwrite("setUp %s" % __name__)

def tearDownModule():
    flushwrite("tearDown %s" % __name__)

class Test(unittest.TestCase):
    def test1(self):
        flushwrite("running %s.test1" % __name__) 
```

当我运行时`nosetests -s test1.py test_dir/test2.py`，我看到这个序列：

1.  导入测试1
2.  导入测试2
3.  设置测试1
4.  运行 test1.test1
5.  拆解测试1
6.  设置测试2
7.  运行 test2.test1
8.  拆解测试2

这是我所期望/渴望的。当我运行`nosetests -s test1.py test_dir`（使用测试发现来查找 test2.py）时，我看到了这个序列：

1.  导入测试1
2.  导入测试2
3.  设置测试1
4.  运行 test1.test1
5.  设置测试2
6.  运行 test2.test1
7.  **拆解测试2**
8.  拆解测试1

请注意，test1 的 tearDown 在 test2 的测试之后执行。这意味着test2运行时系统不处于干净状态！显然，在从大型目录树中发现的数千个测试的生产环境中，这可能是一个问题。

这是怎么回事？我是不是误会了什么？有没有办法确保 tearDownModule 在每个测试模块之后运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-03T21:11:27.780

Since your `test2.py` file is under the same module as `test1.py`, the `setUpModule` and `tearDownModule` methods from `test1.py` both apply to `test2.py`.

I'd just use `setUpClass` and `tearDownClass` and place them inside your Test class. This way you will make sure that the setUp and tearDown are tied to each class separately.

# ruby-on-rails-3 - 如何在单独的存储库中使用前端代码和 API 进行集成测试？

> ID：14367215
> 
> 赞同：1
> 
> 时间：2013-01-16T20:28:34.993
> 
> 标签：ruby-on-rails-3, backbone.js, integration-testing

有什么策略可以做到这一点？我们有一个目前完全集成的 Rails 代码库（同一个应用程序提供 JS 资产和后端繁重的工作），但正在考虑将两者提取到单独的服务中，每个服务都在自己的 git 存储库中并在单独的服务器上运行.

我计划使用一个小型 ruby​​ HTTP 客户端对 API 进行单元/验收测试，该客户端也将作为 API 端点的文档，并且 JS 前端（Brunch.io、Backbone、Chaplin）将在内部进行单元/验收测试也...但是我觉得我应该编写将两者结合在一起的黄瓜测试，对吗？那些杯子住在哪里？在哪个回购？

在这里欣赏任何见解。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:18:06.630

一般来说，如果您的代码既适用于服务器又适用于客户端，那么保存它的“正确”位置取决于应用程序的哪一侧更中心或“更重”：客户端或服务器。

话虽这么说，从您在问题中描述事物的方式来看，听起来您认为 Rails 应用程序是“主要的”。例如，您提到您当前有“JS 资产”集成/由您的“Rails 代码库”提供服务......而不是您的 JS 服务器提供的 Rails 资产；-)

所以这在理论上回答了问题，但我也认为出于实际原因将代码放入 Rails 代码库是有意义的：Cucumber 是 Rails 工具，而不是 JS 工具。您可能会使用它来测试一些非 Ruby 代码，但最终它是由 Ruby 运行的。

我不确定，但我怀疑如果您尝试将 Cucumber 规范放入您的 JS 代码库，然后尝试从 Rails 代码库运行它们，您会为自己制造麻烦。另外，这确实将两个代码库紧密结合在一起：要运行您的测试，您需要两个代码库都在您的测试运行器上，而如果您将 Cucumber 的东西保留在 Rails 中，那么您的测试运行器可能只有您的 Rails 代码，它可以针对不同的代码运行有你的 JS 代码的服务器。

因此，最终在我看来，Cucumber 的东西属于 Rails-land ……但反过来（并将其与您的 JS 存储库一起存储）对我来说似乎也不可怕，只是可能会有更多问题。

# objective-c - 自动检测 iOS/OS X 和 XCode 4.5 中已弃用的 SDK 方法？

> ID：14367219
> 
> 赞同：0
> 
> 时间：2013-01-16T20:28:54.010
> 
> 标签：objective-c, cocoa-touch, cocoa, xcode4.5, deprecated

只是偶然，我看到 presentModalViewController:animated: 在 iOS 6.0 中被列为[弃用，](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/DeprecationAppendix/AppendixADeprecatedAPI.html)但当我故意包含发送此消息的代码时，它似乎不会在 XCode 4.5 中生成任何警告。我正在使用最新版本的 XCode 针对“最新 iOS (iOS 6.0)”进行构建，但编译时不会生成警告。我已经在 Build Settings 中检查了所有语言和 Objective-C 的 LLVM 编译器警告，但我没有看到发送弃用消息的警告设置，仅用于覆盖它们。但是，我搜索了 StackOverflow，并且看到了在早期版本的 XCode 上[抑制 gcc 的弃用警告的提及。](https://stackoverflow.com/questions/2622017/suppressing-deprecated-warnings-in-xcode)这是切换到 LLVM 的副作用，还是有我不理解的设置？

（如果没有，人们是否希望我编写一个工具来自动抓取 Apple SDK 文档并搜索目录以查找按 SDK 版本发送的已弃用消息？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:33:50.860

`-Wdeprecated-declarations`是您正在寻找的警告。或者只是用`-Wall`.

# jquery - 即使没有孩子，KendoUI Treeview 也会显示曲折

> ID：14367222
> 
> 赞同：2
> 
> 时间：2013-01-16T20:29:07.513
> 
> 标签：jquery, json, kendo-ui, kendo-treeview

我有一个 kendoui 树视图，显示从 json 数据源获得的一些数据。树视图正在工作，但即使没有子项，它也会显示子项的扭曲。

我相信这与我的 json 字符串有关，但在这一点上我不相信我可以改变它。

这是json字符串：

```
[{"Title":"Shared Documents","spriteCssClass":"folder","LastModified":"1/15/2013 10:42:20 AM","Items":[{"Title":"Folder 1","spriteCssClass":"folder","LastModified":"1/15/2013 10:42:20 AM","Items":[{"Title":"Subfolder 1","spriteCssClass":"folder","LastModified":"1/15/2013 10:41:52 AM","Items":[]},{"Title":"Test Tax Document.docx","spriteCssClass":"docx","LastModified":"1/15/2013 10:42:20 AM","Items":[]}]}]}] 
```

我认为问题在于即使没有项目， Items[] 仍然存在。

这是我的树视图的代码...

```
var treeDS = new kendo.data.HierarchicalDataSource({
            data: json,
            schema: {
                model: {
                    children: "Items"
                }
            }
        });

var treeview = $("#CCA_DocLibTreeViewer_Tree").kendoTreeView({
            template: "#= item.Title # - #= item.LastModified # <a href='\\#'>View</a>",
            dataSource: treeDS,
            dataTextField: ["Title", "Title"]
        }).data("kendoTreeView"); 
```

关于我能做些什么的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:05:07.680

你是对的，问题是如果它`Items`没有任何`length`它假设有孩子。

解决方案是要么不生成那些空的`Items`，要么定义`treeDS`为：

```
var treeDS = new kendo.data.HierarchicalDataSource({
    data  : json,
    schema: {
        model: {
            children   : "Items",
            hasChildren: function (node) {
                return (node.Items && node.Items.length > 0);
            }
        }
    }
}); 
```

你可以看到我已经定义了一个`hasChildren`函数来验证它是否`node.Items`存在并且它`length`实际上大于`0`。

[您可能会在这里](http://jsfiddle.net/OnaBai/9e6TX/)看到它在 JSFiddle 中运行

# c++ - C++中堆栈溢出和分段错误的危险

> ID：14367225
> 
> 赞同：2
> 
> 时间：2013-01-16T20:29:19.417
> 
> 标签：c++, segmentation-fault, stack-overflow

我试图了解对象（变量、函数、结构等）如何在 c++ 中工作。在这种情况下，我看到基本上有两种存储它们的方法：堆栈和堆。因此，无论何时使用堆存储都需要手动解除分配，但如果使用堆栈，则会自动完成解除分配。所以我的问题与不良做法可能导致程序本身或计算机的各种问题有关。例如：

1.-假设我通过使用函数的无限迭代来运行具有递归解决方案的程序。理论上程序崩溃（堆栈溢出），但它会给计算机本身带来一些麻烦吗？（可能是 RAM 或 SO）。

2.- 如果我忘记释放堆上的内存会发生什么。我的意思是，它只是给程序带来麻烦还是对计算机来说是永久性的。我的意思是这样的记忆可能永远不能再使用了。

3.- 得到分段错误（堆）的问题是什么。

欢迎与此相关的其他一些危险或关心。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T20:51:20.567

> 因此，每当使用堆栈存储时，都需要手动解除分配，但如果使用堆，则会自动完成解除分配。

当您在函数中使用堆栈（函数中的局部变量）时，它们会在函数结束（返回）时自动释放。

当您从堆中分配时，分配的内存保持“正在使用”，直到它被释放。如果你不这样做，你的程序，如果它运行了足够长的时间并继续分配“东西”，将使用它所有可用的内存，并最终失败。

请注意，“stackfault”几乎不可能在应用程序中恢复，因为堆栈已满时不再可用，并且大多数“从错误中恢复”的操作将涉及使用一些堆栈内存。处理器通常有一个特殊的陷阱来从堆栈故障中恢复，但这会影响操作系统，如果操作系统确定应用程序已用完堆栈，它通常毫不留情 - 它只是立即“杀死”应用程序.

> 1.-假设我通过使用函数的无限迭代来运行具有递归解决方案的程序。理论上程序崩溃（堆栈溢出），但它会给计算机本身带来一些麻烦吗？（可能是 RAM 或 SO）。

不，计算机本身并不会因此受到伤害。如果您的程序没有保存用户正在处理的内容，当然可能会丢失数据。

除非硬件设计非常糟糕，否则很难编写对计算机造成任何损害的代码，除了丢失存储的数据（当然，如果您编写的程序从第一个扇区到最后一个扇区填满整个硬盘，您的数据将被您的程序填充磁盘的任何内容覆盖 - 这很可能导致机器无法再次启动，直到您在磁盘上重新安装操作系统）。但是 RAM 和处理器不会因错误的编码而损坏（幸运的是，大多数程序员时不时会犯错误）。

> 2.- 如果我忘记释放堆上的内存会发生什么。我的意思是，它只是给程序带来麻烦还是对计算机来说是永久性的。我的意思是这样的记忆可能永远不能再使用了。

一旦程序完成（并且大多数使用“太多内存”的程序确实会在某个时候以某种方式终止）。

当然，操作系统和其他应用程序处理“根本没有可用内存”的能力会有所不同。操作系统本身一般都可以，但是一些写得不好的驱动程序可能会崩溃，如果你不走运，会导致你的系统重新启动。由于没有足够的内存，应用程序更容易崩溃，因为当没有可用内存时，分配最终以 NULL（零）作为“返回地址”。在现代操作系统中使用地址零几乎总是会导致“分段错误”或类似问题（有关更多信息，请参见下文）。

但这些都是极端情况，大多数系统都设置成这样一个应用程序吞噬所有可用内存就会在系统的其余部分受到影响之前失败 - 并非总是如此，当然不能保证“导致”问题的应用程序是如果操作系统仅仅因为“消耗大量内存”而杀死应用程序，那么第一个被杀死的应用程序。Linux 确实有一个“内存不足杀手”，这是确保系统可以继续工作的一种非常激烈的方法[通过“工作”的某种定义]。

> 3.- 得到分段错误（堆）的问题是什么。

分段错误与堆没有直接关系。术语分段错误来自较旧的操作系统（Unix 风格），它们将内存的“段”用于不同的用途，而“分段错误”是指程序超出分配的段时。在现代系统中，内存被分成“页面”——通常每个 4KB，但一些处理器有更大的页面，并且许多现代处理器支持“大页面”，例如 2MB 或 1GB，用于大块内存.

现在，如果您使用的地址指向不存在（或不是“您的”）的页面，则会出现分段错误。这通常会在那时和那里结束应用程序。您可以“捕获”分段错误，但在我知道的所有操作系统中，尝试从这个“陷阱”继续是无效的 - 但您可以例如存储一些文件来解释发生的事情并帮助解决问题后来等等

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T20:32:48.467

首先，您对堆栈/堆分配的理解是倒退的：堆栈分配的数据在超出范围时会自动回收。动态分配的数据（使用`new`or分配的数据`malloc`），通常是堆分配的数据，必须使用`delete`/手动回收`free`。但是，您可以使用 C++ 析构函数 ( [RAII](https://stackoverflow.com/questions/2321511/what-is-meant-by-resource-acquisition-is-initialization-raii) ) 自动回收动态分配的资源。

其次，您提出的 3 个问题与 C++ 语言无关，而是仅针对您运行 C++ 程序的环境/操作系统来回答。现代操作系统通常会隔离进程，因此行为不端的进程不会t 践踏操作系统内存或其他正在运行的程序。例如，在 Linux 中，每个进程都有自己的地址空间，由内核分配。如果行为不端的进程试图写入其分配的地址空间之外的内存地址，操作系统将发送一个 SIGSEGV（分段错误），这通常会中止该进程。较旧的操作系统，如 MS-DOS，没有这种保护，因此写入无效指针或触发堆栈溢出可能会使整个操作系统崩溃。

同样，对于大多数主流的现代操作系统（Linux/UNIX/Windows 等），内存泄漏（动态分配但从未回收的数据）只会影响分配它们的进程。当进程终止时，进程分配的所有内存都由操作系统回收。但同样，这是操作系统的特性，与 C++ 语言无关。可能有一些较旧的操作系统永远不会回收泄漏的内存，即使是操作系统也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:54:15.800

`1.- Let'suposse that I run a program with a recursion solution by using an infinite iteration of functions. Theoretically the program crashes (stack overflow), but does it cause some trouble to the computer itself? (To the RAM maybe or to the SO).`

堆栈溢出不应给操作系统或计算机造成麻烦。任何现代操作系统都为每个进程提供了一个隔离的地址空间。当一个进程试图在其堆栈中分配比可用空间更多的数据时，操作系统会检测到它（通常通过异常）并终止该进程。这保证不会影响其他进程。

`2.- What happens if I forget to dealocate memory on the heap. I mean, does it just cause trouble to the program or it is permanent to the computer in general. I mean it might be that such memory could not be used never again or something.`

这取决于您的程序是否是一个长时间运行的进程，以及您未能释放的数据量。在长时间运行的进程（例如服务器）中，反复出现的内存泄漏可能会导致[抖动](http://en.wikipedia.org/wiki/Thrashing_%28computer_science%29)：一段时间后，您的进程将使用大量内存，以至于无法放入您的物理内存。这本身不是问题，因为操作系统提供[虚拟内存](http://en.wikipedia.org/wiki/Virtual_memory)，但操作系统将花费更多时间将内存页面从物理内存移动到磁盘，而不是做有用的工作。这可能会影响其他进程，并且可能会显着降低系统速度（以至于重新启动它可能会更好）。

`3.- What are the problems of getting a segmentation fault (the heap).`

分段错误会使您的进程崩溃。它与堆的使用没有直接关系，而是与访问不属于您的进程的内存区域相关（因为它不是其地址空间的一部分，或者因为它是，但它已被释放）。根据您的进程在做什么，这可能会导致其他问题：例如，如果进程在崩溃发生时正在写入文件，那么它很可能最终会损坏。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:55:50.477

首先，stack 表示自动内存，heap 表示手动内存。两者都有解决方法，但这通常是一个更高级的问题。

1.  在现代操作系统上，您的应用程序会崩溃，但操作系统和机器作为一个整体将继续运行。这条规则当然有例外，但它们（再次）是一个更高级的话题。

2.  从堆中分配然后在完成后不释放只是意味着即使您没有使用它，您的程序仍然被认为正在使用它。如果未选中，您的程序将无法分配内存（内存不足错误）。如何处理内存不足错误可能意味着从崩溃（未处理的错误导致未处理的异常或访问 NULL 指针并生成分段错误）到奇怪的行为（捕获异常或测试 NULL 指针但没有特殊处理情况下）一无所有（妥善处理）。

在现代操作系统上，当您的应用程序退出时，内存将被释放。

1.  通常意义上的分段错误只会使您的应用程序崩溃。操作系统可能会立即关闭文件或套接字句柄。它还可以执行应用程序内存的转储，以便您可以尝试使用旨在执行此操作的工具在死后对其进行调试（更高级的主题）。

或者，大多数（我认为？）现代操作系统将使用一种特殊的方法来告诉程序它做了坏事。然后由程序的代码决定它是否可以从中恢复，或者是否可以为操作系统添加额外的调试信息，或者其他什么。

1.  我建议您研究一下自动指针（也称为智能指针），以使您的堆表现得有点像堆栈——当您使用完它时会自动释放内存。如果您使用的是现代编译器，请参阅 std::unique_ptr。如果找不到该类型名称，请查看 boost 库 (google)。这是一个更高级但非常有价值的知识。

希望这可以帮助。

# android - SQLLite 可以支持按笔画或发音排序吗？

> ID：14367226
> 
> 赞同：2
> 
> 时间：2013-01-16T20:29:21.530
> 
> 标签：android, sqlite, sorting

当我的 android 设备语言设置为日语/中文时，我正在处理一些显示问题，有没有办法可以通过亚洲单词的发音或笔画查询 SQLite 数据顺序？

任何建议将不胜感激！

绿色的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T09:21:17.200

在 SQL 中，比较/排序算法称为*排序规则*。

SQLite 将允许在其 C API 中[定义其他排序规则](http://www.sqlite.org/c3ref/create_collation.html)，但这不会在 Android SQLite API 中导出。

你也可以

*   将数据读入内存并在代码中排序；或者
*   从数据中预先计算排序键并将其存储在可用于排序的单独数据库字段中。

# android - TextView.settext() 不工作，Button.settext() 工作良好

> ID：14367231
> 
> 赞同：0
> 
> 时间：2013-01-16T20:29:37.560
> 
> 标签：android, button, textview, settext

我一直在研究一个使用 Runtime.exec 并获取其输出的类，但是它不是很稳定......现在我使用这个类来获取命令“ls /sdcard/”的输出（知道我有我的清单中的正确权限）...（我将在下面编写代码）我的问题是命令的 Text 输出可以显示为 Toast ，它可以设置为 button 的文本，但不能设置为一个文本视图！当我运行我`TextView.settext()`的时，TextView 根本不显示任何文字！更奇怪的是，如果我使用`settext()`like`TextView.settext("Hey there , I am reset");`它可以工作并显示该文本！以下是代码：

MainActivity.class/ **Button.setOnClickListener**：

```
B1.setOnClickListener(new View.OnClickListener() {          
    public void onClick(View arg0) {
        String sdcard = File.separator+Environment.getExternalStorageDirectory().toString()+File.separator; //unused
        String[] arr = {"ls" , "/sdcard/..ROMS/"};//unused - was for experimentation
        String r = shell.sendSingleCommand("ls /sdcard/"); //"r" should now hold the output (stdin and stderr) of the command - shell is defined as Shells shell = new Shells();
        B3.setText(r); //Text of the button changes to the String r
        text.setText(r); //Text is blank , no text is shown at all , not even what it originally was - "text" is my TextView ... Here's my problem
        Show(r); // a method that shows a Toast for a given String - shows the String r normally in a normal Toast ...

    }
}); 
```

**MainActivity 中大多数变量的声明：**

```
 final Button B1 = (Button) findViewById(R.id.button1);
        final Button B2 = (Button) findViewById(R.id.button2);
        final Button B3 = (Button) findViewById(R.id.button3);
        final SharedPreferences pref = getSharedPreferences("seaskyways.testingproject",0);     
        final TextView text = (TextView) findViewById(R.id.testing_text_view);
        final Shells shell = Shells.Shells(); //which returns new Shells() 
```

**布局/activity_main.xml：**

```
<ScrollView xmlns:tools="http://schemas.android.com/tools"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity" >

    <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <Button
            android:id="@+id/button1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:layout_alignParentTop="true"
            android:layout_marginLeft="37dp"
            android:text="Button 1" />

        <Button
            android:id="@+id/button2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentRight="true"
            android:layout_alignParentTop="true"
            android:layout_marginRight="52dp"
            android:text="Button 2" />

        <Button
            android:id="@+id/button3"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@+id/button1"
            android:layout_centerHorizontal="true"
            android:text="Button 3" />

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentBottom="true"
            android:layout_alignParentLeft="true"
            android:layout_alignParentRight="true"
            android:layout_below="@+id/button3" >

            <TextView
                android:id="@+id/testing_text_view"
                android:layout_width="222dp"
                android:layout_height="236dp"
                android:gravity="center|top"
                android:padding="10sp"
                android:text="Hey there !"
                android:textAppearance="?android:attr/textAppearanceMedium"
                android:textColor="@color/abs__primary_text_holo_dark" />

        </ScrollView>
</RelativeLayout>
</ScrollView> 
```

**显示（）**：

```
public void Show(String a){
    Toast.makeText(getApplicationContext(),a , Toast.LENGTH_SHORT).show();
} 
```

Shells.class/ **sendSingleCommand()**：

```
public String sendSingleCommand(String singlecmd) { 
    String a = "";
    final BufferedReader in ;
    final BufferedReader er;

    final String r;

        try {
            p = Runtime.getRuntime().exec(singlecmd);           
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    in = new BufferedReader(new InputStreamReader(p.getInputStream()));
    er = new BufferedReader(new InputStreamReader(p.getErrorStream()));
    try{
        String n;

        while((n = er.readLine())!=null){
            a = a + n + "\n";
        }

        while((n=in.readLine())!=null){
            a = a +"\n"+ n;
            while((n = er.readLine())!=null){
                a = a +"\n"+ n;
            }
        }
    }catch(Exception e){
        e.printStackTrace();
    }
    p.destroy();
    try {
        in.close();
        er.close();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    final StringBuilder build = new StringBuilder();
    build.append(a);
    if(a.startsWith("null")){
        build.substring(4);
    }
    a= build.toString();
    return a;
} 
```

AndroidManifest.xml（如果需要）：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="seaskyways.testingproject"
    android:versionCode="1"
    android:versionName="beta" >

    <uses-sdk
        android:minSdkVersion="14"
        android:targetSdkVersion="17" />
    <uses-permission 
        android:name="android.permission.READ_EXTERNAL_STORAGE"
        />

    <application
        android:allowBackup="true"

        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/Theme.Sherlock" >
        <activity
            android:name="seaskyways.testingproject.MainActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Holo" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="seaskyways.testingproject.MenuActivity"
            android:label="@string/title_activity_menu" >
        </activity>
        <activity
            android:name="seaskyways.testingproject.Splash"
            android:label="@string/title_activity_splash" android:theme="@style/Theme.Sherlock.Dialog" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="seaskyways.testingproject.HorizontalScrollView"
            android:label="@string/title_activity_splash" >
            <intent-filter>
                <action android:name="android.intent.action.HSV" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

如果您需要在评论中了解任何内容，请！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:12:20.350

ScrollView 只能承载一个直接子级

尝试使用此布局：更改为您使用的名称并尝试一下。

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <RelativeLayout
            android:layout_width="match_parent"
            android:layout_height="138dp" >

            <Button
                android:id="@+id/button1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="Button" />

            <Button
                android:id="@+id/button2"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentLeft="true"
                android:layout_alignParentTop="true"
                android:layout_marginLeft="104dp"
                android:text="Button" />

            <Button
                android:id="@+id/button3"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_alignParentRight="true"
                android:layout_alignParentTop="true"
                android:layout_marginRight="43dp"
                android:text="Button" />

            <ScrollView
                android:id="@+id/scrollView1"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="50dp"
                android:layout_marginTop="50dp" >

                <LinearLayout
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <TextView
                        android:id="@+id/textView1"
                        android:layout_width="wrap_content"
                        android:layout_height="wrap_content"
                        android:text="TextView" />

                </LinearLayout>
            </ScrollView>

        </RelativeLayout>

    </LinearLayout>

</ScrollView> 
```

# dialog - RCP 关于全宽打开对话框

> ID：14367232
> 
> 赞同：0
> 
> 时间：2013-01-16T20:29:46.050
> 
> 标签：dialog, size, eclipse-rcp

我的 RCP 应用程序有问题。当我打开关于对话框时，它会以整个屏幕宽度打开，这看起来很奇怪。

有没有办法调整默认的关于对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T08:52:49.630

为什么不尝试使用命令 promt unsing -clean 作为参数运行 Eclipse 应用程序

eclipse.exe - 清洁

# filesystemwatcher - Net FileSystemWatcher 不再在 Server 2008 上运行

> ID：14367234
> 
> 赞同：2
> 
> 时间：2013-01-16T20:29:52.020
> 
> 标签：filesystemwatcher

这不是直接关于代码的问题，而是 FileSystemWatcher/OS 行为。我有一个应用程序，它监控成千上万的日志文件。该应用程序运行多年，没有任何问题。它在 Server 2003 上针对托管在 Server 2003 上的共享运行。

如果它在 Server 2008 (R2) 上运行并且存储在 Server 2008 (R2) 上，则不会生成太多事件。我做了一个简单的复制来显示差异[但正如我所说：长期运行的旧 proggi 确实可以正常工作]。生成日志的应用程序不在我的代码控制之下。在我的重现中——用暂停写这样的日志——即使是对作者和/或底层流的刷新也无济于事]。

在 Server 2003 上，每次更新 [来自日志应用程序的写入操作] 都会导致 FSW 触发大小更改事件。在 Server 2008 上，仅当应用程序开始写入日志文件并且日志文件关闭时才会发生这种情况。中间没有任何事件了。将 REG 键设置为写入 NTFS 时间戳不会改变此行为。

我无法在 MS 打电话，但可能有人已经看到这种行为并且知道解决方法。

我想到的解决方法是：降级到 Server 2003 或 Linux。两者都按预期工作。

任何想法都非常受欢迎。

此致，

++马布拉

[净 2.0 => 4.0; 毫无疑问：所有补丁，操作系统也]

[编辑]

抱歉，我的分析中有错误....随着我的应用程序移至 Server 2008，一个新的应用程序进入了要监视的文件集[永远不要同时更改两件事....]。新应用程序有另一种行为，然后是我以前读过的日志的应用程序....

(1)旧应用程序使用：打开/追加、写入、关闭。
(2)新应用使用：打开/创建、写入、休眠、写入、休眠、写入、关闭。

FSW 为我提供了旧应用程序行为的更改事件，但没有为新应用程序行为提供更改事件。FSW Notifyfilters.Size 不像我预期的那样工作。因此，无法使用 FSW 监控新应用程序的日志。我发现没有解决方法可以仅针对大小更改触发 chnaged 事件。

但这保持：Windows Server 2008 ！Windows Server 2003 和带有单声道的 Linux 甚至为您提供了 (2) 的更改事件！！！！！！所以，我的“头衔”还不错；-)

现在对 .Net 不满意....

如果有人可能有想法，请现在告诉我！

并为我草率的第一次分析感到抱歉... ;-)

兄弟，++马布拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:44:32.340

只是为了这种情况，有人在看这个......

几周前，我在 MS.Connect 上打开了一个问题，他们将其发送给了 VS 团队。

坏消息来自今天，他们首先将问题设置为“无法修复”，然后关闭。

我认为这是对错误的间接确认，该错误不会被修复。

我完全失望了。

无论如何，最好的问候，

++马布拉

[=> MS 连接问题](http://connect.microsoft.com/VisualStudio/feedback/details/777417/notifyfilters-size-does-not-raise-events-on-server-2008-r2-windows-7 "微软连接")

# mysql - 写一个大的sql查询还是通过代码来处理？

> ID：14367235
> 
> 赞同：0
> 
> 时间：2013-01-16T20:29:58.083
> 
> 标签：mysql, ruby-on-rails-3.2

我以这种方式构建了 2 个表：

```
Trips
- id
- organization_id REQUIRED
- collaboration_organization_id OPTIONAL
...other useless fields...

Organizations
- id
- name REQUIRED
...other useless fields... 
```

现在我被要求创建这种类型的报告：

> 我想要每个组织的所有旅行的总和，考虑到如果他们有一个collaboration_organization_id 它应该算作0.5，显然collaboration_organization_id 中的组织也得到+0.5

因此，每当我有一个设置了组织 ID 和协作组织 ID 的旅行时，这两个组织的旅行都算作 0.5。如果只设置了 organization_id，则它计为 1。

现在我的问题由两部分组成：

**1.**

> 在 SQL 中“解决”所有问题是一个好主意吗？

我已经知道如何通过代码解决它，我的想法目前是“选择所有行程（仅这 3 个字段）并开始计算 ruby​​”。请考虑我在 Rails 上使用 ruby​​，所以仍然可以说“不，因为它只能在 mysql 上工作”。

**2.**

> 如果第 1 点是“是”，我不知道如何在每次需要的地方计算 0.5，因为 count 是一个“投入即做”功能

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T23:01:14.110

我对 ruby​​ on rails 不熟悉，但这是你可以用 MySQL 做到这一点的方法。

样本数据：

```
CREATE TABLE Trips(
  id int not null primary key,
  organization_id int not null,
  collaboration_organization_id int null
  );

INSERT INTO Trips (id,organization_id,collaboration_organization_id)
VALUES
(1,1,5),
(2,1,1),
(3,1,2),
(4,11,1),
(5,1,null),
(6,2,null),
(7,10,null),
(8,6,2),
(9,1,3),
(10,1,4); 
```

MySQL 查询：

```
SELECT organization_id,
sum(CASE WHEN collaboration_organization_id IS null THEN 1 ELSE 0.5 End) AS number
FROM Trips
GROUP BY organization_id; 
```

通过以下方式试用：[http ://www.sqlfiddle.com/#!2/1b01d/107](http://www.sqlfiddle.com/#!2/1b01d/107)

**编辑：添加协作组织**

样本数据：

```
 CREATE TABLE Trips(
  id int not null primary key,
  organization_id int not null,
  collaboration_organization_id int null
  );

INSERT INTO Trips (id,organization_id,collaboration_organization_id)
VALUES
(1,1,5),
(2,1,1),
(3,1,2),
(4,11,1),
(5,1,null),
(6,2,null),
(7,10,null),
(8,6,2),
(9,1,3),
(10,1,4);

CREATE TABLE Organizations(
  id int auto_increment primary key,
  name varchar(30)
  );

INSERT INTO Organizations (name)
VALUES
("Org1"),
("Org2"),
("Org3"),
("Org4"),
("Org5"),
("Org6"),
("Org7"),
("Org8"),
("Org9"),
("Org10"),
("Org11"),
("Org12"),
("Org13"),
("Org14"),
("Org15"),
("Org16"); 
```

MySQL查询：

```
SELECT O.id, O.name,
sum(CASE WHEN T.collaboration_organization_id IS null THEN 1 ELSE 0.5 End) AS number
FROM Organizations AS O LEFT JOIN Trips AS T  
ON T.organization_id = O.id OR T.collaboration_organization_id = O.id
WHERE T.collaboration_organization_id = O.id OR O.id = T.organization_id
GROUP BY O.id; 
```

[http://www.sqlfiddle.com/#!2/ee557/15](http://www.sqlfiddle.com/#!2/ee557/15)

# python - 区分 WSGI 应用程序中的调试和生产环境

> ID：14367237
> 
> 赞同：5
> 
> 时间：2013-01-16T20:30:00.643
> 
> 标签：python, web-applications, wsgi, dev-to-production

我们需要在 Python WSGI 应用程序中加载不同的配置选项，根据生产或调试环境（特别是一些与应用程序需要向其发布作业的任务服务器相关的服务器配置信息）。到目前为止，我们实现它的方式是`debug`在我们的部署脚本中设置一个全局变量——它确实正确地修改了部署设置。但是，当我们执行应用程序时，我们需要将调试变量设置为`True`- 因为它的默认值是`False`.

到目前为止，很难正确确定调试变量的工作方式，因为它是在部署时设置的，而不是在执行时设置的。我们可以在调用`serve_forever`调试 WSGI 服务器的方法之前设置它，但我不知道这意味着什么以及该解决方案有多好。

在 WSGI 应用程序中区分调试和生产环境的常用模式是什么？如果我需要在系统参数中传递它，或者如果有任何其他不同的方式，请告诉我。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:55:37.967

如果您的设置允许，请考虑使用环境变量。您的生产服务器可能有一个环境变量值，而开发服务器有另一个值。然后在执行您的应用程序时，您可以检测环境变量的值并相应地设置“调试”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:44:21.113

我不喜欢使用环境变量。尝试使其与您的应用程序配置一起使用，可以通过以下方式覆盖：

*   导入非版本化文件（在*开发*环境中），并`try-except`带有适当的日志通知。
*   命令行参数（`argparse`来自标准库）

# php - Facebook作为页面发布到用户墙

> ID：14367246
> 
> 赞同：-1
> 
> 时间：2013-01-16T20:30:21.280
> 
> 标签：php, facebook

好的，我无法弄清楚这里的问题是什么...我正在尝试将其作为页面发布到用户墙上。我不断收到字符串（53）“（＃200）目标用户尚未授权此操作”这是完整代码

```
 session_start();
      $config = array();
      $config['appId'] = 'xxxxxxxxx';
      $config['secret'] = 'xxxxxxxx';
      $config['fileUpload'] = false; // optional
      $facebook = new Facebook($config);

        $params = array(
          'scope' => 'user_birthday, user_likes, publish_actions, email, publish_stream, manage_pages',
          'redirect_uri' => 'xxxxxxxxxxxxx'
        );

        $loginUrl = $facebook->getLoginUrl($params);
        $logoutUrl = $facebook->getLogoutUrl();
        $user_id = $facebook->getUser();
    ?>
    <html>
      <head></head>
      <body>

      <?
        if($user_id) {
          try {
            echo 'Please <a href="' . $logoutUrl . '">logout.</a>';
            $user_profile = $facebook->api('/me','GET');
            echo "Name: " . $user_profile['name'];
            $access_token = $facebook->getAccessToken();
            $page_id = 'xxxxxxxxxx';
            $result = $facebook->api("/me/accounts");
            foreach($result["data"] as $page) {
                if($page["id"] == $page_id) {
                    $page_access_token = $page["access_token"];
                    break;
                }
            }
            if( !empty($page_access_token) ) {
                $args = array(
                    'access_token'  => $page_access_token,
                    'message'       => "Hello Billy!!"
                );
                $post_id = $facebook->api("/{$user_profile['id']}/feed","post",$args);

            } else {
            }

    //        $page = $facebook->api("/{$page_id}",'GET');

          } catch(FacebookApiException $e) {
            error_log($e->getType());
            error_log($e->getMessage());
            ?><pre><?var_dump($e->getMessage())?></pre><?
          }   
        } else {
    ///
          echo 'Please <a href="' . $loginUrl . '">login.</a>';

        }

      ?>

      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:10:43.270

只是为了确认一下，您正在尝试向用户的个人资料或时间线发帖，并让帖子以主页作为发件人显示？

这是不可能的，而且从来没有。API 根本不支持它。

# ruby - 正则表达式锚 \< 和 \> 有什么区别？

> ID：14367248
> 
> 赞同：0
> 
> 时间：2013-01-16T20:30:22.277
> 
> 标签：ruby, regex, ruby-1.9.3

我刚刚向`Regex`主播介绍了自己`\<`和`\>`. 但是我没有找到任何代码来查看它们是如何在代码中实际使用的。因此，在这种情况下，您能否帮助我在代码的帮助下理解它们在满足目的方面有何不同？

我从[Cheat Sheet](http://www.cheatography.com/davechild/cheat-sheets/regular-expressions/)中找到了这些。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:33:18.410

它们表示“单词开头”（`\<`）和“单词结尾”（`\>`），其中“单词”是字母数字字符串。但是，我不认为 Ruby 支持它们。它们似乎特定于正则表达式引擎的一小部分，尤其是 POSIX ERE。

大多数正则表达式引擎（包括 Ruby）只有单词边界 ( `\b`)，它们匹配单词的开头*或*结尾，它们足以满足大多数用例。

例如， `/bar\b/`将匹配`"bar"`or (part of)`"rebar"`但不匹配`"barf"`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:38:29.717

`\<`表示表达式的起始字符和`\>`字符结束。您可以在 rubular.com 在线测试 ruby​​ 中的[reqexp](http://rubular.com)。

例如，这应该给你真实的：

```
"<Hello>" =~ /\<Hello\>/ 
```

# sql - 如何将运算符 IN 与返回两列的子查询一起使用

> ID：14367253
> 
> 赞同：0
> 
> 时间：2013-01-16T20:30:30.060
> 
> 标签：sql, sql-server-2008

各位大师，我需要您的帮助。

有表：

```
DataCollection
==================
PK            Code
smallint      RestaurantCode
smallint      Year
tinyint       Month
money         Amount
money         AccumulativeMonthsAmount
... 
```

我需要每家餐厅上个月的 AccumulateAmount。

首先，我得到了“当年”的每家餐厅的最后一个月（对于这种情况）：

```
SELECT RestaurantCode, MAX(Month) as Month FROM DataCollection
WHERE (Year >= 2012 AND YEAR <= 2012) GROUP BY RestaurantCode 
```

现在我想将其用作子查询，以获取 Last - AccumulativeMonthsAmount ：

```
SELECT AccumulativeMonthsAmount FROM DataCollection
WHERE (RestaurantCode, Month)
    IN (SELECT RestaurantCode, MAX(Month) as Month FROM DataCollection
        WHERE (Year >= 2012 AND YEAR <= 2012) GROUP BY RestaurantCode) 
```

但是运营商IN，不工作，我该怎么办？

按年份和月份排序的示例数据：

```
RestCode Amount Accumulative Year Month
123      343.3   345453.65   2012    12
123      124.7   345329.00   2012    11
...
122      312.2   764545.00   2012    12
122      123.4   764233.00   2012    11
...
999      500.98    2500.98   2012     6
999      100.59    2000.00   2012     5
... 
```

我想获得每家餐厅最后一个月的累积：

```
RestCode Accumulative Month
123         345453.65    12
122         764545.00    12
99          2500.98      6
... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:33:13.193

```
SELECT dc.AccumulativeMonthsAmount 
  FROM dbo.DataCollection AS dc
  INNER JOIN 
  (
    SELECT RestaurantCode, MAX(Month)
      FROM dbo.PAL_Entries_Relatives
      WHERE [Year] = 2012
      GROUP BY RestaurantCode
  ) AS r(rc, m)
ON dc.RestaurantCode = r.rc
AND dc.[Month] = r.m; 
```

随着要求的变化：

```
;WITH x AS 
(
  SELECT RestCode, Accumulative, [Month],
    rn = ROW_NUMBER() OVER (PARTITION BY RestCode ORDER BY [Month] DESC)
    FROM dbo.DataCollection -- or is it dbo.PAL_Entries_Relatives?
)
SELECT RestCode, Accumulative, [Month]
  FROM x
  WHERE rn = 1
  ORDER BY [Month] DESC, RestCode DESC; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:34:25.607

SQL Server 中不允许使用该语法。你可以做类似的事情`EXISTS`：

```
SELECT AccumulativeMonthsAmount
FROM DataCollection dc
WHERE exists (select 1
              from PAL_Entries_Relatives er
              where  (Year >= 2012 AND YEAR <= 2012)
              group by RestaurantCode
              having er.RestaurantCode = dc.RestaurantCode and
                     max(er.month) = dc.Month
             ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:37:39.053

```
SELECT AccumulativeMonthsAmount
FROM DataCollection
  INNER JOIN PAL_Entries_Relatives
    ON DataCollection.RestaurantCode = PAL_Entries_Relatives.RestaurantCode
WHERE (Year >= 2012 AND YEAR <= 2012)
GROUP BY DataCollection.RestaurantCode
HAVING AccumulativeMonthsAmount.Month = MAX(PAL_Entries_Relatives.Month) 
```

# csv - 将记录附加到 csv 文件的批处理脚本

> ID：14367256
> 
> 赞同：1
> 
> 时间：2013-01-16T20:30:50.233
> 
> 标签：csv, windows-7, batch-file, algorithmic-trading

我在 csv 中有一堆股票数据，我正在对交易策略进行回测。问题是如果昨天发现信号，我的策略会购买公开市场价格，不幸的是我的数据仅在一天结束时发布，这意味着我不知道我是否应该在市场收盘后进入交易，当数据发布。但是因为我的策略是仅根据昨天的数据进行交易，我认为一种解决方法是简单地在代表下一个交易日的数据的末尾附加一条记录，并且只显示昨天收盘时的当天价格，以免造成利润损失。因此，例如说我的一个 csv 看起来像这样（虽然不是这种格式，但实际文件没有标题并且用逗号分隔）

```
Date     |   Open  |   High  |   Low   |   Close  |  Volume  |
20121228 |  12.23  |  12.80  |  12.23  |   12.60  |  129690  |
20121231 |  13.16  |  13.20  |  12.83  |   13.10  |  141290  |
20130102 |  13.03  |  13.42  |  12.97  |   13.23  |  112390  |
20130103 |  13.23  |  13.80  |  12.23  |   12.60  |  100990  |
20130104 |  12.83  |  12.84  |  12.23  |   12.40  |   89690  | 
```

我想附加以下记录：

```
20130105 |  12.40  |  12.40  |  12.40  |   12.40  |   89690  | 
```

所以我需要增加日期 1，然后将之前的收盘价复制到其他定价字段，我认为最好保持交易量不变。这将每天循环遍历文件夹，以便为所有文件添加一个虚拟字段，以便我可以更及时地获得信号。然后在每天结束时，我有另一个批处理文件，我已经开始清理我的数据文件夹并用真实的定价数据覆盖。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T02:35:19.817

这应该可以，但它需要 Bash，你可以从现有的 Cygwin 安装中获得它。

```
ls | while read csvfile
do
  IFS=, read olddate open high low close volume < <(tac $csvfile)
  read newdate < <(date -d "$olddate + 1 day" +%Y%m%d)
  echo $newdate,$close,$close,$close,$close,$volume >> $csvfile
done 
```

[使用 Bash Shell 日期命令获取昨天或明天](http://cyberciti.biz/tips/linux-unix-get-yesterdays-tomorrows-date.html)

# spring - 用spring使用hibernate的正确方法是什么

> ID：14367258
> 
> 赞同：2
> 
> 时间：2013-01-16T20:30:55.380
> 
> 标签：spring, hibernate, integration

我最近开始使用hibernate和spring。

一开始我被告知要使用 sessionFactory 和 openSession 以及 beginTransaction 来进行数据库调用。

后来我听说了 dao，所以我开始通过创建一个接口来使用它，在一个类中实现这个接口，然后让这个类扩展 HibernateDAOSupport。

我认为这是非常可靠的，直到一位同事告诉我这种方式已被弃用并且我不应该使用 HibernateDAOSupport 类。而是在我的 dao 实现类中使用 SessionFactory 实例，并在新的单独服务类中使用该类的实例。由于这似乎也是一个很好的方法，所以我决定走这条路。

刚才我读到这个方法也被新版本的spring弃用了......所以我的问题是：到底什么是把hibernate和spring结合在一起的正确最新方法？

我也听说过关于实体经理的讨论，那是什么？

我正在寻找使用它们的一般方法，如果一般规则有任何例外，请同时提供这些例外的示例。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T23:59:57.130

这是将 Hibernate 集成到 Spring 中的众多方法之一......

您的服务（或 DAO）类应该看起来像这样简单：-

```
// annotate this class so that Spring is aware of it 
@Service
public class EmployeeServiceImpl implements EmployeeService {

    @Autowired
    private SessionFactory sessionFactory;

    // this is straight-up HQL... really, no magic here
    @Override
    @SuppressWarnings("unchecked")
    public Collection<Employee> getAllEmployees() {
        return sessionFactory.getCurrentSession()
                .createQuery("from Employee e order by e.lastName, e.firstName")
                .list();
    }
} 
```

现在，您需要配置`sessionFactory`，否则自动装配将失败。所以，这就是你配置它的方式： -

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:aop="http://www.springframework.org/schema/aop"
        xmlns:tx="http://www.springframework.org/schema/tx"
        xmlns:jee="http://www.springframework.org/schema/jee"
        xsi:schemaLocation="
            http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
            http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
            http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd
            http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee.xsd">

    <!-- 
        When creating the session factory, point it to your existing hibernate.cfg.xml.
        You can also port your entire Hibernate configuration and HBM mappings here, but
        for simplicity sake, I'll reference the existing hibernate.cfg.xml here so that we 
        are not cluttering Spring configuration file with Hibernate-specific configuration.
    -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="configLocation" value="classpath:hibernate.cfg.xml"/>
    </bean>

    <!-- If you are running in production, you will want to use JNDI connection -->
    <jee:jndi-lookup id="dataSource" jndi-name="java:comp/env/jdbc/myapp"/>

    <!-- If you are running testcases, you might want to use JDBC instead -->
    <!--
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
        <property name="driverClassName" value="net.sourceforge.jtds.jdbc.Driver"/>
        <property name="url" value="jdbc:jtds:sqlserver://machine/myapp"/>
        <property name="username" value="myapp"/>
        <property name="password" value="myapp"/>
    </bean>
    -->

    <bean id="transactionManager" class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

    <tx:advice id="txAdvice">
        <tx:attributes>
            <tx:method name="*" propagation="REQUIRED"/>
        </tx:attributes>
    </tx:advice>

    <aop:config proxy-target-class="true">
        <aop:advisor pointcut="execution(* com.myapp..*.*(..))" advice-ref="txAdvice"/>
    </aop:config>

</beans> 
```

有两种配置事务的方法：1）使用`@Transactional`并且您可以注释哪些类（或特定方法）需要正确的事务处理，以及 2）使用 AOP 并用事务包装所有代码。

在上面的示例中，我将所有代码与`com.myapp`带有事务的基本包一起包装。您可以更改（或添加）切入点以减少事务包装器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T23:24:10.410

关于 Spring 中的 Hibernate，至于 2013 年，不推荐使用 HibernateDaoSupport（以及 HibernateTemplate）。它在 Hibernate 4.0 中不起作用。

我认为使用带有针对 Hibernate 特定和带注释 属性的[`@Transactional`](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html#transaction-declarative)带注释的类来自动装配 JPA 配置的持久性上下文是当前的默认选择。`sessionFactory.getCurrentSession()``@PersistenceContext``EntityManager`

JPA 是一个标准，而 Hibernate 不是，但是大多数 Hibernate 特定的东西都可以在 JPA 配置中工作（当然这意味着您将不再遵守标准，并且更难切换到另一个 JPA 实现），只有少数仅在纯 Hibernate 中可用，例如，您无法从[JPA 2.0 之前](https://stackoverflow.com/questions/31446/detach-an-entity-from-jpa-ejb3-persistence-context)的会话中分离独立对象。在专有框架中实现一些新功能比更改标准更简单，但我相信 JPA 2.0 适合大多数情况。

[StackOveflow 1](https://stackoverflow.com/questions/9881611/whats-the-difference-between-jpa-and-hibernate) [2](https://stackoverflow.com/questions/3137974/difference-hibernate-3-5-jpa-2-0/) [3](https://stackoverflow.com/questions/1770211/similarity-and-difference-between-jpa-and-hibernat)等上有很多类似的问题。

使用 JPA 配置的一个很好的论点是它可以与[Spring Data JPA](http://www.springsource.org/spring-data/jpa)一起使用- 一个简化实现存储库的框架（您只需要声明接口而不是在接口和基于通用存储库的类之间保持并行层次结构）。

# javascript - 替换表格每一行的所有div标签

> ID：14367259
> 
> 赞同：3
> 
> 时间：2013-01-16T20:30:54.973
> 
> 标签：javascript, html, razor, asp.net-mvc-4

我正在尝试替换动态创建的表的每一行上相同的 div 标签。我不知道该怎么做。现在我可以让这个函数工作，但它只替换了第一行 div 标签。这是我的代码：

```
<script type="text/javascript">
function Calc() {
    var qty = 0;
     qty=parseInt(document.getElementById('qtyEntry').value);
    var weight = parseInt(document.getElementById('weight').innerHTML);
    var cube = parseInt(document.getElementById('cube').innerHTML);
    var carton = parseInt(document.getElementById('carton').innerHTML);

     var newWeight = 0;
     var newCube = 0;
     var newCarton = 0;

    newWeight = qty *weight ;
    newCube = qty * cube;
    newCarton = qty * carton;

     document.getElementById('weight').innerHTML = newWeight;
     document.getElementById('cube').innerHTML = newCube;
     document.getElementById('carton').innerHTML = newCarton;
} 
```

```
 @{int seq=0;
               foreach (var item in Model)
               {
                   seq++;
                <tr>
                  <td>@seq</td>
                    <td>@item.sku</td>
                    <td>@item.description</td>
                    <td><input type=text id="qtyEntry" name="buildQty" size="3" onchange="Calc()"/></td>
                    <td> <div id="carton">@item.cartonQty</div></td>
                    <td> <div id="weight">@item.weight</div></td>
                    <td><div id="cube">@item.cube</div></td>
                    <td></td>
                </tr>

                }
            } 
```

所以基本上我想在用户更改 buildQty 的文本字段时更新纸箱、重量和立方体数量。我希望每一行都更新。即使我正在更新另一行上的文本，现在也只有第一行更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:37:40.980

明显的问题：`id`'s 意味着是*独一无二的*。你的不是。所以它只访问第一个。试试这个作为改变：

标记：

```
<tr>
              <td>@seq</td>
                <td>@item.sku</td>
                <td>@item.description</td>
                <td><input type=text id="qtyEntry@(seq)" name="buildQty@(seq)" size="3" onchange="Calc(@(seq))"/></td>
                <td> <div id="carton@(seq)">@item.cartonQty</div></td>
                <td> <div id="weight@(seq)">@item.weight</div></td>
                <td> <div id="cube@(seq)">@item.cube</div></td>
                <td></td>
</tr> 
```

js：

```
function Calc(seq) {
 var qty = 0;
 qty=parseInt(document.getElementById('qtyEntry'+seq).value);
 var weight = parseInt(document.getElementById('weight'+seq).innerHTML);
 var cube = parseInt(document.getElementById('cube'+seq).innerHTML);
 var carton = parseInt(document.getElementById('carton'+seq).innerHTML);

 var newWeight = 0;
 var newCube = 0;
 var newCarton = 0;

 newWeight = qty *weight ;
 newCube = qty * cube;
 newCarton = qty * carton;

 document.getElementById('weight'+seq).innerHTML = newWeight;
 document.getElementById('cube'+seq).innerHTML = newCube;
 document.getElementById('carton'+seq).innerHTML = newCarton;
} 
```

但请注意！这可能会改变您的模型绑定，您将需要重新审视您从帖子中接受这一点的方式。我会假设它现在没有正确发布，因为它`name`也不是唯一的（这与模型绑定有关）。

# javascript - node.js 文件写入位置参数不起作用

> ID：14367261
> 
> 赞同：7
> 
> 时间：2013-01-16T20:30:57.253
> 
> 标签：javascript, node.js

我很难让 node.js 在正确的位置写入我的文件。这是我的问题的一个示范案例：

```
fs = require('fs');
foo = fs.openSync('foo.txt','r+');
fs.writeSync(foo, "hello", 0, 5, 5);
fs.close(foo); 
```

`foo.txt`有一行：

```
12345678901234567890 
```

预期的输出是 for`foo.txt`包含`12345hello1234567890`，但我得到的是`hello678901234567890`. 我在跑步`node v0.8.16`。

这是一个错误，还是我做错了什么？

编辑：我一直在参考这些文档：[fs.writeSync(fd, buffer, offset, length, position)](http://nodejs.org/api/fs.html#fs_fs_writesync_fd_buffer_offset_length_position)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T21:08:34.033

正如文档链接所说，第二个参数是 a `Buffer`，但在您的代码中，您传递的是一个字符串。这样做会导致 Node 退回到为向后兼容而存在的不同函数签名。

```
function(fd, str, position, encoding); 
```

所以传递正确的论点

```
var buf = new Buffer("hello");
fs.writeSync(foo, buf, 0, buf.length, 5); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T21:13:23.793

这是 Node.js 源代码所说的：

lib\fs.js

```
 fs.writeSync = function(fd, buffer, offset, length, position) {
  if (!Buffer.isBuffer(buffer)) {
    // legacy string interface (fd, data, position, encoding)
    position = arguments[2];

    buffer = new Buffer('' + arguments[1], arguments[3]);
    offset = 0;
    length = buffer.length;
  }
  if (!length) return 0;

  return binding.write(fd, buffer, offset, length, position);
}; 
```

如果您仔细查看第二个参数是否不是缓冲区，则**位置**变为**偏移量**并且偏移量变为 0

# vbscript - VBS 或 CMD 文件根据文件名模式匹配将文件移动到文件夹中

> ID：14367266
> 
> 赞同：1
> 
> 时间：2013-01-16T20:31:12.463
> 
> 标签：vbscript, cmd

寻求一些指导...

我有一个目录，它定期接收名称包含以下信息的文件：

showname-episode-segment.mov

我正在寻找一种将这些文件移动到现有目录中的方法，该目录以文件名的 showname 部分命名。如果存在没有第一个连字符分隔符的文件，则应跳过该文件。如果引入了一个新节目并且相应的文件夹不存在，它将被创建。

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:49:58.680

VBScript 可能是最简单的。以下是一些关于如何做你需要的一切的片段。

```
Dim fso
Set fso = CreateObject("Scripting.FileSystemObject")
' create a new folder
If Not fso.FolderExists(folderPath) Then
   Set newfolder = fso.CreateFolder(folderPath)
End If
' move a file
If fso.FileExists(filePathAndName) Then
   fso.MoveFile filePathAndName, folderPath
End If
' check file name
Set folder = fso.GetFolder(folderPath)
Set files = folder.Files
For each file In files
    If InStr(file.Name, "-") > 0 Then
        'the file name has a "-" in it
    End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:43:50.753

一个简单的批处理文件就可以解决问题。定义要查找传入文件的位置以及要创建显示文件夹的位置。然后使用一个简单的 FOR 列出所有具有该`*-*.mov`格式的传入文件。使用 FOR /F 解析节目名称（第一个之前的文本`-`）。如果 show 文件夹不存在，则创建它，然后移动该文件。

```
@echo off
setlocal
set "incomingFolder=c:\video\incoming"
set "showsFolder=c:\video\shows"

for %%F in ("%incomingFolder%\*-*.mov") do (
  for /f "delims=-" %%A in ("%%~nF") do (
    if not exist "%showsFolder\%%A" md "%showsFolder%\%%A"
    move "%%F" "%showsFolder%\%%A"
  )
) 
```

# objective-c - 如何将主包中的目录复制到 NSPasteBoard？

> ID：14367267
> 
> 赞同：1
> 
> 时间：2013-01-16T20:31:20.323
> 
> 标签：objective-c, xcode, macos, cocoa

我一直在尝试文件路径和不同类型的不同组合，但基本上我想做的是复制一个名为“test”的文件夹，该文件夹位于我的资源文件夹中。

当我给出一个绝对路径（例如：/Users/dw/src/Menulet）时，将文件夹复制到`NSPasteBoard`作品上，但是当我尝试使用我的 mainBundle 的资源路径时它不起作用。这是我目前拥有的代码：

```
NSString *resourceFolder = [[NSURL fileURLWithPath:[[NSBundle mainBundle]
                                          resourcePath]] absoluteString];

NSPasteboard *pboard = [NSPasteboard pasteboardWithName:NSDragPboard];
[pboard declareTypes:[NSArray arrayWithObject:NSURLPboardType] owner:nil];

NSString *SDKPathString = [[NSString alloc] initWithFormat:@"%@test/",
                                                        resourceFolder];
NSURL *SDKPathURL = [[NSURL alloc] initWithString:SDKPathString];

[pboard writeObjects:[NSArray arrayWithObject:SDKPathURL]]; 
```

结果是找不到文件：

`__CFPasteboardIssueSandboxExtensionForPath: error for [/Users/dw/Library/Developer/Xcode/DerivedData/Menulet-bvwpfkjlcufhxubvaxubgnubtfgi/Build/Products/Debug/Menulet.app/Contents/Resources/test]`

如何复制目录？

![问题截图](../Images/2286b3c2da1913ccd6973c2127380026.png)

**编辑：** ![问题仍然存在](../Images/4ec969f7c47acbf4792ed7d7175896c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:42:10.020

我的猜测是，`'/'`当你这样做时，你错过了一个角色：

```
NSString *SDKPathString = [[NSString alloc] initWithFormat:@"%@test/",
                                                    resourceFolder]; 
```

确实 resourceFolder 是一条路径，我通常使用这样的东西：

```
NSString* SDKPathString= [resourceFolder stringByAppendingPathComponent: @"test"]; 
```

即使在您的情况下，您也可以通过在 .`'/'`之前放置一个字符来简单地纠正错误`"test"`。但我认为这更容易记忆。

**更新**

不是说如果你创建一个组 Xcode 也会创建一个文件夹。如果您想确保 Xcode 这样做，请使用 finder 创建一个文件夹并将其拖到项目中。检查这些选项：

![在此处输入图像描述](../Images/65cb97711b0c506d8f43617b306edc1c.png)

这样文件夹就被实际创建了，并且也被添加到了包中。

**更新 2**

您不应该尝试将项目文件夹中的目录移动到正确的位置，而是将其放在包中您想要的任何位置，前提是该目录已复制到包中。

一旦这样做，捆绑包将为您管理一切。所以只需使用以下命令搜索目录：

```
- (NSString *)pathForResource:(NSString *)name ofType:(NSString *)extension; 
```

所以在你的情况下：

```
NSBundle* bundle= [NSBundle mainBundle];
NSString *SDKPathString = [ bundle pathForResource: @"test" ofType: @""]; 
```

# macos - 无法在 Mac OSX 上的 Monodevelop 中从 .Resx 文件中获取字符串值

> ID：14367272
> 
> 赞同：0
> 
> 时间：2013-01-16T20:31:39.817
> 
> 标签：macos, resources, mono, monodevelop, resx

来自这个问题：
[C#、Localization、Resources 和 MonoDevelop](https://stackoverflow.com/questions/6567964/c-localization-resources-and-monodevelop)
在答案部分它说：
“通常的做法是将资源以 .resx 形式存储在项目中，MonoDevelop 在构建项目时会自动将它们编译成 .resources 文件（您必须手动编译 .txt 文件）。不幸的是，MD 没有针对 resx 文件的特殊编辑工具，因此您必须直接编辑 XML。

我有一个可以在 Windows 上使用 vs2008 的应用程序。
我正在尝试将其移植到 Mac OSX。
我有一个包含不同字符串的 .resx 文件。
当我使用：
Resources.Properties.Resources.Distributor_ARDL
我得到：
{System.Reflection.TargetInvocationException：调用的目标已引发异常。---> System.OverflowException：数字溢出。在（包装器托管到本机）对象：__icall_wrapper_mono_array_new_specific（intptr，int）在 System.Drawing.Icon.InitFromStreamWithSize（System.IO.Stream 流，Int32 宽度，Int32 高度）[0x00000] 在 System.Drawing：0。 Icon..ctor (System.Runtime.Serialization.SerializationInfo info, StreamingContext context) [0x00000] in :0 at (wrapper managed-to-native) System.Reflection.MonoCMethod:InternalInvoke (System.Reflection.MonoCMethod,object,object[ ],System.Exception&) 在 System.Reflection.MonoCMethod.Invoke (System.Object obj, BindingFlags invokeAttr, System.Reflection.Binder binder, System.Object[] 参数, System.Globalization.CultureInfo 文化) [0x00000] 中：

所以我想知道 resx 文件是否正常工作。
如果其他人在这个问题上有任何运气。
resx 的构建选项设置为 embeddedresouce。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:53:17.323

嗨，经过一番闲逛后，我发现 mono 不喜欢我创建的几个 .icon 文件。到目前为止，我不确定它不喜欢什么（因为它确实喜欢 8 个中的 3 个）所以一旦我删除了它构建好的文件。花了一些时间来查看它们是什么，因为错误与图标文件无关，只是第一次调用资源文件。干杯

# android - addHeaderView 和缺少列表分 隔符的问题

> ID：14367278
> 
> 赞同：2
> 
> 时间：2013-01-16T20:31:55.763
> 
> 标签：android, android-layout, android-listview

我正在使用

```
mList.addHeaderView(mHeader, null, false); 
```

在 Android 中添加一个（不可选择的）标题到我的列表中。呈现列表时，标题不可选择，但是标题底部和第一个列表项之间的列表分隔符（行）丢失。有谁知道这个问题的解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:50:32.600

尝试

```
mList.addHeaderView(mHeader) 
```

在你的 onItemClick 方法中考虑额外的索引。

# xml - 为 SAML 2.0 联合中的一个 SP 生成自定义属性 - 身份

> ID：14367279
> 
> 赞同：1
> 
> 时间：2013-01-16T20:31:57.343
> 
> 标签：xml, identity, saml, saml-2.0, federated-identity

我们有一个 SAML 2.0 联合环境（IDP 和 SP）。我想为仅为一个 SP 创建的断言生成自定义属性。因此，我不会修改 IDP 配置。

我们需要创建的 SAML 断言片段：

> < saml:Attribute *NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri" >
> Name="urn:oasis:names:tc:SAML:2.0:profiles:attribute:DCE:groups"* >
> 
> > < saml:AttributeValue xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" >
> > xsi:type="xsd:string"> *ABCD*

根据 SAML2 规范，我们需要修改 SP 扩展元数据以提供该属性。常量字符串“ABCD”是我们要发送的属性。我已经这样修改了，但没有结果。任何人都可以提供见解吗？

> <属性名称="urn:oasis:names:tc:SAML:2.0:profiles:attribute:DCE:groups">
> 
> > ```
> >  < Value>urn:oasis:names:tc:SAML:2.0:attrname-format:uri|ABCD</Value> 
> > ```
> > 
> > < /属性>

也试过：

> < 属性名称="urn:oasis:names:tc:SAML:2.0:profiles:attribute:DCE:groups" nameformat="urn:oasis:names:tc:SAML:2.0:attrname-format:uri">
> 
> > ```
> >  < Value>"ABCD"</Value> 
> > ```
> > 
> > < /属性>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T06:45:10.913

查看元数据规范，您似乎使用以下语法来定义您希望 IDP 提供的属性。当然，必须将 IDP 配置为允许将此类属性导出到..

```
<AttributeConsumingService>
   <ServiceName xml:lang="en">youname</ServiceName>
   <RequestedAttribute 
      NameFormat="urn:oasis:names:tc:SAML:2.0:attrname-format:theformat"
      Name="theAttributeName"
      FriendlyName="humanReadableName"/>
</AttributeConsumingService> 
```

此规范位于第 21 页 [https://www.oasis-open.org/committees/download.php/35391/sstc-saml-metadata-errata-2.0-wd-04-diff.pdf](https://www.oasis-open.org/committees/download.php/35391/sstc-saml-metadata-errata-2.0-wd-04-diff.pdf)

# android - ListFragment 中的 onClickListener 没有响应

> ID：14367280
> 
> 赞同：0
> 
> 时间：2013-01-16T20:32:04.287
> 
> 标签：android, android-listview, android-listfragment

对 onClickListener 没有响应的原因感到困惑。是因为按钮设置在一个布局中，但绑定到另一个布局？任何帮助，将不胜感激。

```
public class ActivityList extends ListFragment

{
private ActivityDbAdapter mDbHelper;
private Long mRowId=Long.valueOf(1);
private Activity mContext; //changed to private
AlertDialog activity_relationship;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
    Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
mContext=this.getActivity();
mDbHelper=new ActivityDbAdapter(mContext);
mDbHelper.open();
Cursor activity = mDbHelper.fetchAll(mRowId);
View view = (View) inflater.inflate(R.layout.activity_activity_row, container,false);
Button relationship = (Button) view.findViewById(R.id.show_relationship_activities);

String[] from = new String[]{ActivityDbAdapter.COLUMN_NAME_VALUE1_RELATIONSHIP , //from and too.
        ActivityDbAdapter.COLUMN_NAME_VALUE1_EDUCATION,
        ActivityDbAdapter.COLUMN_NAME_VALUE1_RECREATION,
        ActivityDbAdapter.COLUMN_NAME_VALUE1_MIND, ActivityDbAdapter.COLUMN_NAME_VALUE1_DAILY};

int[] to = new int[]{R.id.relationship_value,R.id.education_value, R.id.recreation_value,
        R.id.mind_value, R.id.daily_value};

SimpleCursorAdapter contacts = 
    new SimpleCursorAdapter(mContext, R.layout.activity_activity_row, activity, from, to); //my cursor adapter 

relationship.setOnClickListener(new OnClickListener() {

    @Override
    public void onClick(View arg) {

        Log.e("Why","Are you not working?");

        Cursor activity = mDbHelper.fetchAll(mRowId);

     String mactivity_relationship=activity.getString(                                              //define all of the Strings. Gahh!!
            activity.getColumnIndexOrThrow(ActivityDbAdapter.COLUMN_NAME_ACTIVITY1_RELATIONSHIP));

        AlertDialog activity_relationship=new AlertDialog.Builder(mContext).create();
        activity_relationship.setTitle("Relationship Activities");
        String activities=(mactivity_relationship+"\n"+mactivity_relationship2+"\n"+mactivity_relationship3+
                "\n"+mactivity_relationship4+"\n"+mactivity_relationship5);
        activity_relationship.setMessage(activities);
        activity_relationship.show();

    }

});

setListAdapter(contacts);

return inflater.inflate(R.layout.activity_activity_list, container, false);

}

} 
```

正如我现在拥有的那样，日志甚至没有出现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:36:22.373

您可能希望在以下位置返回您实际创建的视图（并用于获取`Button`）`onCreateView`：

```
//...
return view; 
```

而不是返回一个新膨胀的布局（并丢失前一个`Button`）：

```
return inflater.inflate(R.layout.activity_activity_list, container, false); 
```

或者从您膨胀并返回的文件中添加`view`到视图中。`R.layout.activity_activity_list`

# java - Creating a Jar File Containing Another Jar File

> ID：14367282
> 
> 赞同：0
> 
> 时间：2013-01-16T20:32:12.693
> 
> 标签：java, android, jar

I've created an Android project that does some very simple network stuff. This project is standalone, and I've successfully exported it as a jar file and imported it into other projects I've worked on. When exporting this project, I am ONLY exporting the class files that are used for the project. (No system files: ie. Manifest, etc)

I want to leave this project as standalone since it is used in other projects and will be used more in the future.

However, we have other projects that need the features of the network jar and some other features. What I would like to do is create a new project, import the network jar file. Create wrappers for all the functions in the network jar file, then add more functionality.

Afterwards I want to package this project up as a jar file, so that I can use it solely for projects that require that extra functionality.

Having this project as a jar is important, because this component might be given to other people to use, and easy/simple integration is required.

This seamed like it should be pretty straight forward to me. But I am getting noClassDef errors and Verify errors.

I even stripped the project down to a single function that returns a static String from the original network jar and passed that through and still got a "could not find method xxxx referenced from method xxxx" log and then a unable to resolve static method warning, then a No ClassDefFoundError. Here's the logcat.

![log ](../Images/05fdb3dea1c6b3c2e02cc17cf5016d2e.png)

What is the proper way to do this?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:35:14.050

Jar files that want to use embedded jars must define a custom class loader, like [JarClassLoader](http://www.jdotsoft.com/JarClassLoader.php).

If you want to use a single jar file you also have options like OneJar, JarJar, and ProGuard.

# sql-server-2008 - MSSQL Full Text 可以找到文档相似之处吗？

> ID：14367284
> 
> 赞同：1
> 
> 时间：2013-01-16T20:32:15.890
> 
> 标签：sql-server-2008, full-text-search

我正在寻找一种方法来将 MSSSQL 全文文档中的相似之处与它们自己在同一个表/列中或分别与不同表中的文档相关联/查找相似之处。我已经为表格全文编制索引，但现在需要了解如何查找相似的文档。考虑以下示例：

我有一个存储客户问题的票务系统：

TicketID 文本列

1234 我的电脑有病毒。

1235 我的鼠标坏了。

1236 我的电脑有病毒

提交新工单时，我想使用 TicketID 编号，比如 1236，我可以将其传递到存储过程中，查看表中哪些其他文档是相似的，并根据最高相似度以某种排序顺序返回它们。所以在这种情况下，1236 与 1234 更接近。

我在研究中发现的只是搜索特定单词或短语的能力，但我想传递整个文档的内容。有谁知道这样做的方法？

# paypal - 如何在 payflowlink.paypal.com 页面上显示/提交项目以及我的替代方案是什么？

> ID：14367286
> 
> 赞同：1
> 
> 时间：2013-01-16T20:32:30.073
> 
> 标签：paypal, payflowlink

有没有一种方法可以在 payflowlink.paypal.com 页面上显示产品列表，类似于将数据发布到 PayPal Payments Standard (https://www.paypal.com/cgi-bin/webscr) 时可以执行的操作。

从文档来看，似乎无法像在 PayPal Payments Standard 上那样使用**item_name**之类的字段，因此我正在寻找一个简单的替代方案。

我可以使用 PayPal 付款标准，但该页面将显示电子邮件地址而不是 manager.paypal.com 中配置的徽标。

谢谢

# objective-c - Xcode：使用每个视图重新加载控制器的一部分

> ID：14367287
> 
> 赞同：1
> 
> 时间：2013-01-16T20:32:32.837
> 
> 标签：objective-c, xcode

我正在开发一个 iPhone 应用程序，该应用程序通过 viewDidLoad 建立连接并将数据拉入表中。我希望控制器，或者至少是表格，在每次显示控制器时重新加载，即使有人刚刚从一个选项卡切换到另一个选项卡或关闭并重新打开此控制器上的应用程序。有没有办法做到这一点？我似乎找不到任何东西，这也很难搜索。我发现了关于何时将代码放入 viewDidLoad 的讨论，但没有找到另一种在控制器显示时运行的方法。

谢谢，谢丽尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:34:49.637

你想用

```
-(void)viewDidAppear:(BOOL)animated {

    [super viewDidAppear:animated];

    //code to reload table viewdata

} 
```

每次视图出现时，都会调用此方法。我在我的应用程序中经常使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:32:29.433

只在一个地方注入代码是没有办法的。

您可以考虑一种解决方法，例如从所需的代码部分发送自定义“重新加载请求”通知：

1.  `viewDidAppear:`在您的视图控制器中
2.  `applicationDidBecomeActive:`（如果有表格）
3.  `tabBarController:didSelectViewController:`（如果用桌子切换到控制器上）
4.  `tabBar:didSelectItem:`（同上）
5.  等等

在您的视图控制器中，只需观察此通知并在需要时重新加载数据。

不过，更重要的是：你*真的*需要在如此苛刻的要求下重新加载数据吗？在大多数情况下，数据重新加载发生在

1.  视图控制器`viewDidLoad:`被称为
2.  它是手动启动的（例如按钮）
3.  自上次收到更新以来已经过了很长时间

否则只是矫枉过正。

# c# - MSChart 不显示最大标签

> ID：14367291
> 
> 赞同：1
> 
> 时间：2013-01-16T20:32:43.273
> 
> 标签：c#, wpf, winforms, charts, mschart

我必须指出，我的图表托管在 WPF 中，也许这很重要。

![在此处输入图像描述](../Images/c574df577fc3849448c283fe1208ee68.png)

这里没有什么花哨的。当我明确设置最小值和最大值属性时，不显示顶部 AxisY 标签。右 AxisX 随机隐藏。对于某些数据，它是可见的，对于其他数据则不可见。

我只想制作没有轴边距的图表，并在两个轴上显示最小和最大标签。

# ruby - 使用 SMTP 和 Gmail 的通知电子邮件在 Redmine 上不起作用

> ID：14367297
> 
> 赞同：2
> 
> 时间：2013-01-16T20:32:58.980
> 
> 标签：ruby, smtp, gmail, redmine

我安装并运行了 Redmine 2.2.1，但我无法让通知电子邮件正常工作。我不断收到以下错误：

```
An error occurred while sending mail (getaddrinfo: Name or service not known) 
```

我无法弄清楚我错过了什么。我按照这些[说明](http://www.redmine.org/projects/redmine/wiki/EmailConfiguration)使用 Gmail 设置电子邮件通知，但似乎无论我对 configuration.yml 文件进行什么更改，我仍然会收到相同的错误。

这是我的 configuration.xml 文件的样子：

```
production:
email_delivery:
  delivery_method: :smtp
smtp_settings:
  tls: true
  enable_starttls_auto: true
  address: "smtp.gmail.com"
  port: 587
  domain: "smtp.gmail.com"
  authentication: :plain
  user_name: "email@mydomain.com"
  password: "mypassword" 
```

其他所有内容都被注释掉了。

我尝试更改和删除`tls`和`enable_starttls_auto`选项，但对 configuration.yml 文件的更改不会影响错误消息。

我还检查了我在其他论坛上发现的常见错误，例如配置文件中的选项卡或生产：配置被定义两次等。

我在我的 Gmail 帐户上启用了 SMTP。

我也尝试设置 ActionMailer，但我不确定我应该用它做什么，或者我什至需要这样做。没有提到任何地方都需要这样做。我已经安装并设置了它，但不确定它是否在做任何事情。

```
Redmine 2.2.1
ruby 1.8.7 (2012-02-08 patchlevel 358) [x86_64-linux]
Rails 3.2.11
gem version 1.8.24
Amazon AMI Linux 
```

生产日志：

```
Started GET "/redmine/admin/test_email" for 98.xxx.xx.xx at Wed Jan 16 12:28:23 -0800     2013
Processing by AdminController#test_email as HTML
  Current user: oscarm (id=3)
  Rendered mailer/test_email.text.erb within layouts/mailer (0.1ms)
Redirected to http://mydomain/redmine/settings   /edit?tab=notifications
Completed 302 Found in 35ms (ActiveRecord: 0.7ms)
Started GET "/redmine/settings/edit?tab=notifications" for 98.xxx.xx.xx at Wed Jan 16 12:28:23 -0800 2013
Processing by SettingsController#edit as HTML
Parameters: {"tab"=>"notifications"}
Current user: oscarm (id=3)
Rendered settings/_general.html.erb (6.8ms)
Rendered settings/_display.html.erb (9.0ms)
Rendered settings/_authentication.html.erb (5.9ms)
Rendered settings/_projects.html.erb (5.9ms)
Rendered queries/_columns.html.erb (6.5ms)
Rendered settings/_issues.html.erb (12.6ms)
Rendered settings/_notifications.html.erb (6.4ms)
Rendered settings/_mail_handler.html.erb (1.9ms)
Rendered settings/_repositories.html.erb (10.3ms)
Rendered common/_tabs.html.erb (66.2ms)
Rendered settings/edit.html.erb within layouts/admin (67.0ms)
Rendered admin/_menu.html.erb (5.6ms)
Rendered layouts/base.html.erb (19.3ms)
Completed 200 OK in 222ms (Views: 91.3ms | ActiveRecord: 4.3ms) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T17:09:22.640

所以我弄清楚我的问题是什么......

1.  我一直在修改 configuration.yml 文件，并希望 redmine 每次重新加载页面时都能读取它，但事实并非如此。Redmine 仅在启动时读取配置文件，因此每次更改配置文件时都必须重新启动 redmine。

2.  我尝试的其中一件事是在 redmine/plugin 中安装 action_mailer_optional_tls 插件，但我最终发现该插件仅适用于 ruby​​ 1.8.6，而我正在使用内置此功能的 ruby​​ 1.8.7。从 redmine/plugin 中删除 action_mailer_optional_tls 目录并重新启动 redmine 后，我能够发送通知电子邮件:-)

所以这是我使 redmine 与 gmail 一起工作的最终配置：

```
production:
  email_delivery:
    delivery_method: :smtp
  smtp_settings:
    address: "smtp.gmail.com"
    port: 587
    domain: "smtp.gmail.com"
    authentication: :plain
    user_name: "myemail@mydomain.com"
    password: "mypassword"
    enable_starttls_auto: true 
```

希望这可以帮助有同样问题的人。

# html - 适合不同设备/浏览器的多种网站图标大小

> ID：14367302
> 
> 赞同：0
> 
> 时间：2013-01-16T20:33:16.790
> 
> 标签：html, favicon, ico

我想知道如何拥有多种尺寸的网站图标并将正确的尺寸提供给正在查看该网站的相应浏览器/设备。

我读过拥有多种尺寸是一种很好的做法，因为您的网站可以通过传统浏览器查看，但也可以通过平板电脑和智能手机查看。因此，最好为查看站点的设备提供完美的图标大小。

如何做到这一点？据我所知，您网站的根目录中有一个“favicon.ico”，仅此而已。但是在这里处理多种大小，例如多个文件，让我有点失望。你如何做到这一点？

另外，我看到 Adob​​e Photoshop 和 Illustrator 没有导出为 .ico 文件格式的功能，有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:37:36.533

似乎这可能已经在这个问题中得到了回答：[How to have multiple favicon size,但默认情况下只提供 16x16？](https://stackoverflow.com/questions/9150691/how-to-have-multiple-favicon-sizes-yet-serve-only-a-16x16-by-default)

虽然个人而言，优化良好的 32x32 ico 很小，我通常不会费心制作 16x16 版本，但浏览器会自动缩小它。

# php - 使用 $_SERVER['HTTP_REFERER'];，但修改为 www

> ID：14367304
> 
> 赞同：0
> 
> 时间：2013-01-16T20:33:23.677
> 
> 标签：php, html, mysql

我正在使用这样的代码从入站链接中获取 URL：

```
$inbound_url = $_SERVER['HTTP_REFERER'];

//then do some stuff writing the url to a database table, but....
//ONLY IF the url doesn't already exist in the table 
```

假设链接来自同一网站，同一网页，但仅在 www 不同。所以我得到了这个：1）[http://www.mysite.com/page.html](http://www.mysite.com/page.html) 2）[http://mysite.com/page.html](http://mysite.com/page.html)

这在我的表中出现了两次，因为一个有 www 而一个没有。

有没有办法解析 $_SERVER['HTTP_REFERER']; 的结果 要么：1）添加www。它丢失的地方，或者 2) 删除 ...http://...www 的所有内容。或 ..http://

一如既往地提前感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:35:52.290

你当然可以。一些简单的字符串操作和替换应该是您`www`从任何 URL 中删除所需的全部 -

```
$inbound_url = str_replace('http://www','http://',$inbound_url); 
```

[如文档](http://php.net/manual/en/function.str-replace.php)中所定义-

> `str_replace()`- 用替换字符串替换所有出现的搜索字符串

请注意，我将 包括`http://`在搜索中，以便字符串`www` URL 的任何其他出现都保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:35:48.990

用这个

```
$url = 'http://stackoverflow.com';
$d = array_shift( explode( '.', str_replace('www.', '', parse_url( $url, PHP_URL_HOST )) ) );
echo $d; //stackoverflow 
```

或者你也可以使用

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)函数

# c - 无法增加取消引用指针的值

> ID：14367305
> 
> 赞同：0
> 
> 时间：2013-01-16T20:33:31.070
> 
> 标签：c, pointers, increment, fopen, dereference

我似乎对一个应该计算文件中各种字符类型的简单程序有疑问。即使文件根本不是空的，它也总是打印零。我认为它与指针有关，可能是错误的。我还想知道在这种情况下是否需要初始化变量？

```
// fun.h

void count_char(FILE *f, unsigned *newl, unsigned *let, unsigned *num, unsigned *spec_char);

// main.c

#include <stdio.h>
#include "fun.h"

int main()
{
    unsigned newline = 0, number = 0, letter = 0, special_character = 0;
    char path[256];
    FILE *f_read;
    printf("Insert a file path: ");
    gets(path);
    f_read = fopen(path, "r");
    if(f_read == NULL)
    {
        perror("The following error occurred");
        return 1;
    }
    count_char(f_read, &newline, &number, &letter, &special_character);
    printf("File content:\n\tnewline - %u\n\tletters - %u\n\tnumbers - %u\n\tspecial characters - %u\n", newline, number, letter, special_character);
    return 0;
}

// fun.c

#include <stdio.h>
#include <ctype.h>

void count_char(FILE *f, unsigned *newl, unsigned *let, unsigned *num, unsigned *spec_char)
{
    char c;
    while((c = fgetc(f)) != EOF)
    {
        if(c == '\n')
            *newl++;
        else if(isalpha(c))
            *let++;
        else if(isdigit(c))
            *num++;
        else
            *spec_char++;
    }
    return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:58:17.487

当你做这样的事情时：`*newl++;`; 发生的情况是，首先，指针递增（即使其指向下一个内存位置），然后根据运算符优先级取消引用。

如果要取消引用然后递增，则必须使用括号，如下所示：`(*newl)++;`

# wordpress - Wordpress 和 mod 重写 URL 到类别页面

> ID：14367308
> 
> 赞同：0
> 
> 时间：2013-01-16T20:33:43.660
> 
> 标签：wordpress, .htaccess, mod-rewrite

目标 - 为 URL 的简短版本显示正确的页面

.htaccess 文件：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteRule ^wholesale/?$ /products-page/wholesale/$1 [NC] # Handle requests for "wholesale"
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

但是当我去[http://www.utatz.com/wholesale](http://www.utatz.com/wholesale)时，它​​不会加载[http://www.utatz.com/products-page/wholesale/的内容](http://www.utatz.com/products-page/wholesale/)

任何线索我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:42:36.987

让我说清楚：

选项 1）
您要输入以下 URL：
**yoursite/wholesale/并且能够看到与您在：** **yoursite/products-page/wholesale/**
完全相同的内容

 **实现这一点的最简单方法是添加一个“批发”页面并创建一个带有修改循环的自定义模板页面。

[http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates](http://codex.wordpress.org/Pages#Creating_Your_Own_Page_Templates)
[http://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

或者

选项2）
您要输入：
**yoursite/wholesale/a-product/**
并且能够看到相当于：
**yoursite/products-page/wholesale/a-product/**

如果这是您想要实现的目标，您应该专注于添加/修改 WordPress 自己的 RewriteRules，您应该避免使用 .htaccess，因为您可以指示 WP 了解任何给定的永久链接结构。

作为介绍，我建议您查看[http://www.hongkiat.com/blog/wordpress-url-rewrite/](http://www.hongkiat.com/blog/wordpress-url-rewrite/)

**不要忘记**：每次更改永久链接结构时，请转到`Settings -> Permalinks`并单击保存更改，否则更改可能在您这样做之前不会应用。

我不确定这是否可以使用 .htaccess，但 WordPress 中的规则看起来像`RewriteRule`以下示例的第一个所示：

```
Options +FollowSymLinks -MultiViews
RewriteEngine On
RewriteBase /
RewriteRule ^wholesale/(.+)/?$ /index.php?category_name=wholesale&name=$1 [NC] # (.+) represents the title of a post with the "wholesale" category
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L] 
```

当你使用时`add_rewrite_rule`应该看起来有点像：

```
add_rewrite_rule('^wholesale/([^/]*)/?','index.php?category_name=wholesale&name=matches[1]','top'); 
```

上面的示例仅在`(.+)`/`([^/]*)`表示帖子时才有效，如果它是自定义帖子类型，它将不起作用，因为您必须添加表示此类自定义帖子类型的变量。**

# javascript - 如何让咖啡脚本在 Heroku 上编译？

> ID：14367309
> 
> 赞同：0
> 
> 时间：2013-01-16T20:33:47.433
> 
> 标签：javascript, heroku, compilation, coffeescript

我正在使用 Rails 3.2 并将其作为 Gemfile：

```
gem 'rails', '3.2.11'

group :development do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
end

group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'
gem 'coffee-script'

group :test do
  gem 'capybara', '1.1.2'
end

group :production do
  gem 'pg', '0.12.2'
  gem 'therubyracer-heroku', '~> 0.8.1.pre3'
end 
```

我的 webapp 在 localhost 上运行良好，但由于咖啡脚本文件，它不能在 Heroku 上运行。如果这有任何帮助，我会在 Heroku Cedar 上。我查看了 Heroku webapp 中的源代码，看起来我的 cofeescript 并没有像 Heroku 那样被编译成缩小的 javascript。如何让咖啡脚本在 Heroku 上编译？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T22:09:06.307

我们需要更多地了解您的应用程序以检查每一种可能性。

一个好的起点是`rake assets:precompile`确保您可以在本地运行它。这是 Heroku 将要运行的命令——或者如果设置正确则应该运行。

为了更进一步，我建议你阅读 Heroku 上的资产管道，并确保你“越过你的 t 并点缀你的 i”

*   [http://guides.rubyonrails.org/asset_pipeline.html](http://guides.rubyonrails.org/asset_pipeline.html)
*   [https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar](https://devcenter.heroku.com/articles/rails3x-asset-pipeline-cedar)

如果您仍然遇到问题，您可以使用更具体的信息编辑此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:35:46.170

在 Heroku 的 Cedar 上，不需要将 therubyracer-heroku 包含在 Gemfile 中。检查我的源代码中的 application.js，我发现咖啡脚本确实被编译成 javascript。问题是我的咖啡脚本依赖的其他一些文件存储在 app/assets/libs 中。我不认为 Heroku 走得那么深，所以我相信 JavaScript 并没有全部加载。我也不需要运行`rake assets:precompile`。这是有效的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.11'

group :development do
  gem 'sqlite3', '1.3.5'
  gem 'rspec-rails', '2.11.0'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '3.2.5'
  gem 'coffee-rails', '3.2.2'
  gem 'uglifier', '1.2.3'
end

gem 'jquery-rails', '2.0.2'

group :test do
    gem 'capybara', '1.1.2'
end

group :production do
  gem 'pg', '0.12.2'
end 
```

# templates - EmberJS：模板不呈现控制器属性

> ID：14367310
> 
> 赞同：0
> 
> 时间：2013-01-16T20:33:48.907
> 
> 标签：templates, controller, ember.js

我正在尝试设置一个非常基本的 emberJS 应用程序。这里是：

```
<!doctype html>
<html>
    <head>
            <script src="js/jquery.js"></script>
            <script src="js/handlebars-1.0.rc.1.js"></script>
            <script src="js/ember.js"></script>
            <script>
                    window.App = Ember.Application.create();

                    App.ApplicationController = Ember.Controller.extend({
                            firstName: "Trek",
                            lastName: "Glowacki"
                    });
            </script>
    </head>

    <body>
            <script type="text/x-handlebars" data-template-name="application">
                    <div>
                            Name: {{firstName}} {{lastName}}
                    </div>
            </script>
    </body>
</html> 
```

由于某种原因，只有**Name:**被渲染。为什么'firstName'和'lastName'为空的任何建议？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T18:37:10.140

通过更新使用的库解决了这个问题（参见 Sean Keating 的回答）

# c++ - 了解源代码中头文件连接的库

> ID：14367311
> 
> 赞同：2
> 
> 时间：2013-01-16T20:33:48.930
> 
> 标签：c++, c, connection

有一个库或其他东西可以创建项目源代码的标头依赖关系图。

例如，您有一个类（class1.hpp 和 class1.cpp、cmethods.h 和 cmethods.c 以及 mainFile.cpp 中的主程序）。

得到这样的图表。

![在此处输入图像描述](../Images/b849ed889813bb70b690d68037f845e1.png)

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:49:51.410

我不确定是否支持包含文件层次结构，但您可能想检查[Doxygen](http://sourceforge.net/projects/doxygen/)它进行源代码分析并能够绘制图表。

另请参阅此介绍[学习 doxygen 以获取源代码文档](http://www.ibm.com/developerworks/aix/library/au-learningdoxygen/)。

如果没有条件包含 (#ifdef)，您还可以轻松地自行解析源文件并为[graphviz](http://www.graphviz.org/)生成输入文件。

# entity-framework - 如何在 Entity Framework 中连接两个多对多表？

> ID：14367317
> 
> 赞同：6
> 
> 时间：2013-01-16T20:33:59.650
> 
> 标签：entity-framework, many-to-many

我有几张表我想一起加入：

*   用户
*   用户角色
*   工作流角色
*   角色
*   工作流程

我想生成的等效 sql 类似于

```
select * from Users u
inner join UserRoles ur on u.UserId = ur.UserId
inner join WorkflowRoles wr on wr.RoleId = ur.RoleId
inner join Workflow w on wr.WorkflowId = w.Id
where u.Id = x 
```

我想根据用户在一个查询中的角色来获取用户参与的所有工作流。我发现你可以得到这样的结果：

```
user.Roles.SelectMany(r => r.Workflows) 
```

但这会为每个角色生成一个查询，这显然不太理想。

有没有一种适当的方法可以做到这一点，而不必求助于生成视图或编写直接 sql 之类的技巧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T21:17:15.283

您可以尝试以下两个查询：

这个可读性更好，我认为：

```
var workflows = context.Users
    .Where(u => u.UserId == givenUserId)
    .SelectMany(u => u.Roles.SelectMany(r => r.Workflows))
    .Distinct()
    .ToList(); 
```

（`Distinct`因为一个用户可以有两个角色，并且这些角色可能包含相同的工作流。如果没有`Distinct`重复的工作流将被返回。）

但是这个表现更好，我相信：

```
var workflows = context.WorkFlows
    .Where(w => w.Roles.Any(r => r.Users.Any(u => u.UserId == givenUserId)))
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:13:46.790

所以事实证明，您选择的顺序会有所不同：

```
user.Select(x => x.Roles.SelectMany(y => y.Workflows)).FirstOrDefault() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:49:23.633

没有机会对此进行测试，但它应该可以工作：

```
Users.Include(user => user.UserRoles).Include(user => user.UserRole.WorkflowRoles.Workflow) 
```

如果以上不正确，那么您是否可以发布您的班级结构？

# java - 从结果集中选择（单击不是 SQL 选择）特定结果

> ID：14367322
> 
> 赞同：0
> 
> 时间：2013-01-16T20:34:22.230
> 
> 标签：java, jsp, servlets

我会尽力解释。

我有一个 doPost 可以返回特定部门的所有员工。

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

PrintWriter out = null; 
Connection conn = null;
Statement stmt = null;
ResultSet res = null;

String department = request.getParameter("department");

try
{

    response.setContentType("text/html");

    out = response.getWriter();

    out.println("<BODY>");
    out.println("<TABLE BORDER=1>");
    out.println("<TR>");
    out.println("<TD>Id</TD>");
    out.println("<TD>Name</TD>");

    conn = ConnectionManager.getConnection();
    stmt = conn.createStatement();

    res = stmt.executeQuery("select * from employees where department ='" + request.getParameter("department") + "'");

    if(department.isEmpty())
    {
        String message = "Employee Name Invalid";
        request.setAttribute("message", message);
        RequestDispatcher dispatcher = getServletContext().getRequestDispatcher("/test.jsp");
        dispatcher.forward(request, response);
    }
    if (department.matches(department))

    {

        while(res.next())
        {                   
            out.println("<TR>");
            out.println("<TD>" + res.getString(1) + "</TD>");   
            out.println("<TD><a href='employeeDetail.jsp'>"+ res.getString(3) + "  " + res.getString(2) +"</a></TD>");      

            HttpSession session = request.getSession();
            session.setAttribute("name", res.getString(3));
            session.setAttribute("lname", res.getString(2));
            session.setAttribute("id", res.getString(1));
            session.setAttribute("dob", res.getString(6));
            session.setAttribute("address", res.getString(8));
            session.setAttribute("city", res.getString(9));
            session.setAttribute("state", res.getString(10));
            session.setAttribute("zip", res.getString(11));
            session.setAttribute("phone", res.getString(13));

            session.setAttribute("hd", res.getString(7));
            session.setAttribute("ext", res.getString(14));
            session.setAttribute("dept", res.getString(18));
            session.setAttribute("notes", res.getString(16));

        }
    }

    out.println("</TABLE>");
    out.println("</BODY>");
}         
catch (Exception e)
{
    throw new ServletException(e.toString());
} 
```

选择销售部门后，结果为：

标识名称

1 南希 D ..... 2 安德鲁 F ..... 3 珍妮特 L .....

每个名称都超链接到一个employeeDetail.jsp。由于某种原因，它没有显示在上面的列表中。

当我单击任何链接（南希、安德鲁、珍妮特）时，我只会得到最后一个元素（珍妮特）的结果。

我的问题是如何获取我点击的员工的具体详细信息？

我试过查找这个，但我认为我没有正确地问这个问题。

此外，我将不胜感激任何关于我可以对我的 servlet 进行更改的指针。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:09:37.747

你的循环在这里：

```
while(res.next()) {
  ...
} 
```

不断更新客户端的会话状态到下一个结果。您将需要客户端提供某种形式的信息（可能是员工的 ID）来确定应将哪些员工信息实际保存到客户端的会话状态中。

关于更改 servlet 的建议，我想说您应该完全放弃使用会话状态来进行此用途。例如，类似于以下内容：

```
/departmentServlet?department={DEPARTMENT_ID}
=> returns a list of employees (without saving anything to the session state)
=> each link should be of the form "/employeeDetails?id={CURRENT_EMPLOYEE_ID}"

/employeeDetails?id={EMPLOYEE_ID}
=> calls the SQL again but only for the provided employee ID
=> returns whatever information required by the client for the given employee 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:10:23.177

employeeDetail.jsp 中 select 查询的条件是什么？此代码创建的链接不包含来自所选员工的任何信息（例如 db id）。我认为您使用保存的会话信息，但是此代码会在每个 for 循环中覆盖会话 - 这就是会话将包含最后一个员工的信息的原因。

# image-processing - Opencv Features2d：相似对象识别

> ID：14367324
> 
> 赞同：1
> 
> 时间：2013-01-16T20:34:24.617
> 
> 标签：image-processing, opencv, feature-detection

我正在使用 opencv 来检测两个对象是否相似。我应用了 opencv 可用的某些方法来净化图像以便更好地识别。结果，我现在有了一个我感兴趣的关键点向量。

我将这些关键点提供给 siftfeaturedetector，但结果并不令人满意（它将图像 1 中的每个点与图像 2 中的所有点匹配）。我使用 surf 来计算描述符，并使用 flann 来匹配我已经计算的关键点。

有没有办法让任何特征检测器比较这两个图像以获得更好的结果？或者也许我不应该使用特征检测器（有什么替代方法）？

我比较的图像具有独特的形状（但不相等的形状），但方向和大小不同。

# java - Spring MVC - jar 文件是否可以引用不在 jar 文件中的属性文件？

> ID：14367327
> 
> 赞同：1
> 
> 时间：2013-01-16T20:34:41.857
> 
> 标签：java, spring, jakarta-ee, spring-mvc, properties

我有一个 Spring MVC Web 应用程序，它具有以下结构：

```
myapp
    |-META-INF
    |-WEB-INF
        |-classes
        |   |-conf
                |-application.properties
        |-lib
        |   |-externalApp.jar
        |       |-conf
        |           |-applicationContext.xml
        |
        |-applicationContext.xml
        |-myapp-servlet.xml 
```

在`myapp/WEB-INF/applicationContext`中，我导入了`applicationContext.xml`jar 文件中的文件，如下所示：

```
<import resource="classpath:WEB-INF/conf/applicationContext.xml" /> 
```

导入资源中的 bean 工作正常，我可以在我的 Web 应用程序的控制器/服务类中看到它们。

我遇到的问题是 jar 文件（即`WEB-INF/lib/externalApp.jar/applicationContext.xml`）中的上下文文件具有用于加载属性文件的配置。属性必须由 Web 应用程序设置，因此属性文件位于 webapp 中。jar 文件的上下文文件中的配置如下所示：

我希望上述属性加载 Web 应用程序中的属性文件，因此我将其值设置为如下所示：

```
<bean class="com.myapp.ExternalAppPropertyPlaceholderConfigurer">
        <property name="location" value="classpath:conf/application.properties" />
        <property name="ignoreUnresolvablePlaceholders" value="true" />
</bean> 
```

通过上述设置，jar 文件中期望这些属性可用的类仍然无法访问这些属性。

我猜的问题是如何获取`WEB-INF/classes/conf/application.properties`位于 .jar 文件中的对象可以访问的属性文件`WEB-INF/lib/externalApp.jar`。

查看我得到的堆栈跟踪，看起来导入的上下文文件中引用的对象在加载属性之前首先加载，这不是我想要的。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:46:04.613

您可以像这样使用[classpath*:](http://static.springsource.org/spring/docs/3.0.x/reference/resources.html#resources-classpath-wildcards)前缀

```
<bean class="com.myapp.ExternalAppPropertyPlaceholderConfigurer">
    <property name="location" value="classpath*:conf/application.properties" />
    <property name="ignoreUnresolvablePlaceholders" value="true" />
</bean> 
```

**编辑**

由于您`conf/application.properties`在您的网络应用程序中，因此您必须在您的网络应用程序应用程序上下文中定义它（而不是像现在这样在 jar 中）。并在导入 jar 的 applicationContext 之前定义它。即在您的网络应用程序应用程序上下文中放置这样的内容：

```
<bean class="com.myapp.ExternalAppPropertyPlaceholderConfigurer">
    <property name="location" value="classpath:conf/application.properties" />
    <property name="ignoreUnresolvablePlaceholders" value="true" />
</bean>
<import resource="classpath*:/conf/applicationContext.xml" /> 
```

并从您的 jar applicationContext 中删除属性的声明。

# java - 如何将 3D 矩阵逆时针旋转 90 度？

> ID：14367330
> 
> 赞同：2
> 
> 时间：2013-01-16T20:34:56.427
> 
> 标签：java, matrix, rotation, rotational-matrices

我试图在 Java 中将矩阵逆时针旋转 90 度。我找到了有关如何使用 2D 矩阵执行此操作的答案，但我的矩阵是 3D。

以下是我发现如何进行 2D 旋转的方法：

```
static int[][] rotateCW(int[][] mat) {
    final int M = mat.length;
    final int N = mat[0].length;
    int[][] ret = new int[N][M];
    for (int r = 0; r < M; r++) {
        for (int c = 0; c < N; c++) {
            ret[c][M-1-r] = mat[r][c];
        }
    }
    return ret;
} 
```

那么我将如何旋转 3D 矩阵呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T21:14:56.460

通过将矩阵与[旋转矩阵相乘](http://en.wikipedia.org/wiki/Rotation_matrix)

x 轴的基本矩阵是：

```
 | 1     0      0    |
Rx(a) = | 0  cos(a) -sin(a) |
        | 0  sin(a)  cos(a) | 
```

对于 90 度，只需设置 cos(90) = 0 和 sin(90) = 1，这将导致：

```
 | 1     0      0    |
Rx(a) = | 0     0     -1    |
        | 0     1      0    | 
```

# python - 如何在python中建立和求解联立方程

> ID：14367331
> 
> 赞同：9
> 
> 时间：2013-01-16T20:34:56.100
> 
> 标签：python, math, numpy

对于一个固定整数`n`，我有一组联`2(n-1)`立方程如下。

```
M(p) = 1+((n-p-1)/n)*M(n-1) + (2/n)*N(p-1) + ((p-1)/n)*M(p-1)

N(p) = 1+((n-p-1)/n)*M(n-1) + (p/n)*N(p-1)

M(1) = 1+((n-2)/n)*M(n-1) + (2/n)*N(0)

N(0) = 1+((n-1)/n)*M(n-1) 
```

`M(p)`被定义为`1 <= p <= n-1`。 `N(p)`被定义为`0 <= p <= n-2`。另请注意，这`p`只是每个方程中的一个常数整数，因此整个系统是线性的。

我一直在使用 Maple，但我想现在设置这些并在 python 中解决它们，也许使用`numpy.linalg.solve`（或任何其他更好的方法）。我实际上只想要`M(n-1)`. 例如，当`n=2`答案应该是`M(1) = 4`，我相信。这是因为方程变为

```
M(1) = 1+(2/2)*N(0)
N(0) = 1 + (1/2)*M(1) 
```

所以

```
M(1)/2 = 1+1 
```

所以

```
M(1) = 4\. 
```

如果我想插入`n=50`，比如说，你如何在 python 中设置这个联立方程组，以便 numpy.linalg.solve 可以解决它们？

**更新** 答案很好，但他们使用方程组稀疏的密集求解器。发布后续[使用 scipy 稀疏矩阵求解方程组](https://stackoverflow.com/questions/14380899/using-scipy-sparse-matrices-to-solve-system-of-equations)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T22:43:23.460

更新：使用 scipy.sparse 添加了实现

* * *

这按顺序给出了解决方案`N_max,...,N_0,M_max,...,M_1`。

要求解的线性系统是形状`A dot x == const 1-vector`。 `x`是寻求的解决方案向量。
在这里，我对方程进行了排序，`x`即`N_max,...,N_0,M_max,...,M_1`。然后我从 4 个块矩阵
构建- 系数矩阵。`A`

这是示例案例的快照，`n=50`展示了如何导出系数矩阵并理解块结构。系数矩阵`A`为浅蓝色，常数右侧为橙色。寻求的解决方案向量`x`在这里是浅绿色的，用于标记列。第一列显示了上述给定方程中的哪一个。行 (= eq.) 已导出： ![在此处输入图像描述](../Images/de6261754c682ff27dea25dce506b393.png)

正如 Jaime 所建议的，乘以`n`改进代码。这没有反映在上面的电子表格中，但已在下面的代码中实现：

**使用 numpy 实现：**

```
import numpy as np
import numpy.linalg as linalg

def solve(n):
    # upper left block
    n_to_M = -2\. * np.eye(n-1) 

    # lower left block
    n_to_N = (n * np.eye(n-1)) - np.diag(np.arange(n-2, 0, -1), 1)

    # upper right block
    m_to_M = n_to_N.copy()
    m_to_M[1:, 0] = -np.arange(1, n-1)

    # lower right block
    m_to_N = np.zeros((n-1, n-1))
    m_to_N[:,0] = -np.arange(1,n)

    # build A, combine all blocks
    coeff_mat = np.hstack(
                          (np.vstack((n_to_M, n_to_N)),
                           np.vstack((m_to_M, m_to_N))))

    # const vector, right side of eq.
    const = n * np.ones((2 * (n-1),1))

    return linalg.solve(coeff_mat, const) 
```

**使用 scipy.sparse 的解决方案：**

```
from scipy.sparse import spdiags, lil_matrix, vstack, hstack
from scipy.sparse.linalg import spsolve
import numpy as np

def solve(n):
    nrange = np.arange(n)
    diag = np.ones(n-1)

    # upper left block
    n_to_M = spdiags(-2\. * diag, 0, n-1, n-1)

    # lower left block
    n_to_N = spdiags([n * diag, -nrange[-1:0:-1]], [0, 1], n-1, n-1)

    # upper right block
    m_to_M = lil_matrix(n_to_N)
    m_to_M[1:, 0] = -nrange[1:-1].reshape((n-2, 1))

    # lower right block
    m_to_N = lil_matrix((n-1, n-1))
    m_to_N[:, 0] = -nrange[1:].reshape((n-1, 1))

    # build A, combine all blocks
    coeff_mat = hstack(
                       (vstack((n_to_M, n_to_N)),
                        vstack((m_to_M, m_to_N))))

    # const vector, right side of eq.
    const = n * np.ones((2 * (n-1),1))

    return spsolve(coeff_mat.tocsr(), const).reshape((-1,1)) 
```

示例`n=4`：

```
[[ 7.25      ]
 [ 7.76315789]
 [ 8.10526316]
 [ 9.47368421]   # <<< your result
 [ 9.69736842]
 [ 9.78947368]] 
```

示例`n=10`：

```
[[ 24.778976  ]
 [ 25.85117842]
 [ 26.65015984]
 [ 27.26010007]
 [ 27.73593401]
 [ 28.11441922]
 [ 28.42073207]
 [ 28.67249606]
 [ 28.88229939]
 [ 30.98033266]  # <<< your result
 [ 31.28067182]
 [ 31.44628982]
 [ 31.53365219]
 [ 31.57506477]
 [ 31.58936225]
 [ 31.58770694]
 [ 31.57680467]
 [ 31.560726  ]] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-17T14:01:21.883

这是一种完全不同的方法，使用`sympy`. 它不是很快，但它允许我准确地复制你的方程的 RHS，限制我需要做的思考（总是一个加号），并给出分数的答案。

```
from sympy import Integer, Symbol, Eq, solve

def build_equations(n):
    ni = n
    n = Integer(n)
    Ms = {p: Symbol("M{}".format(p)) for p in range(ni)}
    Ns = {p: Symbol("N{}".format(p)) for p in range(ni-1)}
    M = lambda i: Ms[int(i)] if i >= 1 else 0
    N = lambda i: Ns[int(i)]

    M_eqs = {}
    M_eqs[1] = Eq(M(1), 1+((n-2)/n)*M(n-1) + (2/n)*N(0))
    for p in range(2, ni):
        M_eqs[p] = Eq(M(p), 1+((n-p-1)/n)*M(n-1) + (2/n)*N(p-1) + ((p-1)/n)*M(p-1))

    N_eqs = {}
    N_eqs[0] = Eq(N(0), 1+((n-1)/n)*M(n-1))
    for p in range(1, ni-1):
        N_eqs[p] = Eq(N(p), 1+((n-p-1)/n)*M(n-1) + (p/n)*N(p-1))

    return M_eqs.values() + N_eqs.values()

def solve_system(n, show=False):

    eqs = build_equations(n)
    sol = solve(eqs)

    if show:
        print 'equations:'
        for eq in sorted(eqs):
            print eq
        print 'solution:'
        for var, val in sorted(sol.items()):
            print var, val, float(val)

    return sol 
```

这使

```
>>> solve_system(2, True)
equations:
M1 == N0 + 1
N0 == M1/2 + 1
solution:
M1 4 4.0
N0 3 3.0
{M1: 4, N0: 3}
>>> solve_system(3, True)
equations:
M1 == M2/3 + 2*N0/3 + 1
M2 == M1/3 + 2*N1/3 + 1
N0 == 2*M2/3 + 1
N1 == M2/3 + N0/3 + 1
solution:
M1 34/5 6.8
M2 33/5 6.6
N0 27/5 5.4
N1 5 5.0
{M2: 33/5, M1: 34/5, N1: 5, N0: 27/5} 
```

和

```
>>> solve_system(4, True)
equations:
M1 == M3/2 + N0/2 + 1
M2 == M1/4 + M3/4 + N1/2 + 1
M3 == M2/2 + N2/2 + 1
N0 == 3*M3/4 + 1
N1 == M3/2 + N0/4 + 1
N2 == M3/4 + N1/2 + 1
solution:
M1 186/19 9.78947368421
M2 737/76 9.69736842105
M3 180/19 9.47368421053
N0 154/19 8.10526315789
N1 295/38 7.76315789474
N2 29/4 7.25
{N2: 29/4, N1: 295/38, M1: 186/19, M3: 180/19, N0: 154/19, M2: 737/76} 
```

这似乎与其他答案相匹配。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T22:08:04.230

这很麻烦，但可以解决您的问题，除非在转录系数时出现非常可能的错误：

```
from __future__ import division
import numpy as np    
n = 2
# Solution vector is [N[0], N[1], ..., N[n - 2], M[1], M[2], ..., M[n - 1]]
n_pos = lambda p : p
m_pos = lambda p : p + n - 2
A = np.zeros((2 * (n - 1), 2 * (n - 1)))
# p = 0
# N[0] + (1 - n) / n * M[n-1] = 1
A[n_pos(0), n_pos(0)] = 1 # N[0]
A[n_pos(0), m_pos(n - 1)] = (1 - n) / n #M[n - 1]
for p in xrange(1, n - 1) :
    # M[p] + (1 + p - n) /n * M[n - 1] - 2 / n * N[p - 1] +
    #  (1 - p) / n * M[p - 1] = 1
    A[m_pos(p), m_pos(p)] = 1 # M[p]
    A[m_pos(p), m_pos(n - 1)] =  (1 + p - n) / n # M[n - 1]
    A[m_pos(p), n_pos(p - 1)] = -2 / n # N[p - 1]
    if p > 1 :
        A[m_pos(p), m_pos(p - 1)] = (1 - p) / n # M[p - 1]
    # N[p] + (1 + p -n) / n * M[n - 1] - p / n * N[p - 1] = 1
    A[n_pos(p), n_pos(p)] = 1 # N[p]
    A[n_pos(p), m_pos(n - 1)] = (1 + p - n) / n # M[n - 1]
    A[n_pos(p), n_pos(p - 1)] = -p / n # N[p - 1]
if n > 2 :
    # p = n - 1
    # M[n - 1] - 2 / n * N[n - 2] + (2 - n) / n * M[n - 2] = 1
    A[m_pos(n - 1), m_pos(n - 1)] = 1 # M[n - 1]
    A[m_pos(n - 1), n_pos(n - 2)] = -2 / n # N[n - 2]
    A[m_pos(n - 1), m_pos(n - 2)] = (2 - n) / n # M[n - 2]
else :
    # p = 1 
    #M[1] - 2 / n * N[0] = 1
    A[m_pos(n - 1), m_pos(n - 1)] = 1
    A[m_pos(n - 1), n_pos(n - 2)] = -2 / n

X = np.linalg.solve(A, np.ones((2 * (n - 1),))) 
```

但它提供了一个解决方案

```
>>> X[-1]
6.5999999999999979 
```

for `M(2)`when `n=3`，这不是你想出的。

# sql - SQL 约束，以防止根据其先前值更新列

> ID：14367332
> 
> 赞同：7
> 
> 时间：2013-01-16T20:34:57.353
> 
> 标签：sql, postgresql, check-constraints

是否可以使用检查约束（或其他一些技术）来防止在更新记录时设置与其先前值相矛盾的值。

一个示例是 NULL 时间戳，表示发生了某些事情，例如“file_exported”。一旦文件被导出并具有非 NULL 值，就不应再次将其设置为 NULL。

另一个例子是命中计数器，其中整数只允许增加，但不能减少。

如果有帮助，我正在使用 postgresql，但我希望看到适合任何 SQL 实现的解决方案

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T23:40:39.840

使用触发器。这是一个简单的 PL/PgSQL`ON UPDATE ... FOR EACH ROW`触发器的完美工作，它可以同时看到`NEW`和`OLD`值。

请参阅[触发程序](http://www.postgresql.org/docs/current/static/plpgsql-trigger.html)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-18T00:15:24.273

lfLoop 有最好的方法来解决这个问题。但是要继续使用触发器的 Craig Ringer 的方法，这里有一个示例。本质上，您在更新之前将列的值设置回原始（旧）值。

```
CREATE OR REPLACE FUNCTION example_trigger()
  RETURNS trigger AS
$BODY$
BEGIN
     new.valuenottochange := old.valuenottochange;
     new.valuenottochange2 := old.valuenottochange2;
     RETURN new;
END
$BODY$
  LANGUAGE plpgsql VOLATILE
  COST 100;

DROP TRIGGER IF EXISTS trigger_name ON tablename;
  CREATE TRIGGER trigger_name BEFORE UPDATE ON tablename
    FOR EACH ROW EXECUTE PROCEDURE example_trigger(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-17T21:44:49.853

> 一个示例是 NULL 时间戳，表示发生了某些事情，例如“file_exported”。一旦文件被导出并具有非 NULL 值，就不应再次将其设置为 NULL。
> 
> 另一个例子是命中计数器，其中整数只允许增加，但不能减少。

在这两种情况下，我根本不会将这些更改记录为带注释的表上的属性。'exported' 或 'hit count' 是一个独特的概念，代表与它们相关的对象相关但正交的现实世界概念：

所以他们只是不同的关系。因为我们只希望“file_exported”出现一次：

```
CREATE TABLE thing_file_exported(
    thing_id INTEGER PRIMARY KEY REFERENCES(thing.id),
    file_name VARCHAR NOT NULL
) 
```

命中计数器同样是一个不同的表：

```
CREATE TABLE thing_hits(
    thing_id INTEGER NOT NULL REFERENCES(thing.id),
    hit_date TIMESTAMP NOT NULL,
    PRIMARY KEY (thing_id, hit_date)
) 
```

你可能会查询

```
SELECT thing.col1, thing.col2, tfe.file_name, count(th.thing_id)
FROM thing 
LEFT OUTER JOIN thing_file_exported tfe
    ON (thing.id = tfe.thing_id)
LEFT OUTER JOIN thing_hits th
    ON (thing.id = th.thing_id)
GROUP BY thing.col1, thing.col2, tfe.file_name 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T22:18:22.847

PostgreSQL 中的存储过程和函数可以访问旧值和新值，并且该代码可以访问任意表和列。在存储过程中构建简单的（粗略的？）有限状态机并不难。你甚至可以用这种方式构建表驱动的状态机。

# c# - 并行任务与委托

> ID：14367333
> 
> 赞同：3
> 
> 时间：2013-01-16T20:35:01.253
> 
> 标签：c#, c#-4.0, task-parallel-library

我现在需要决定如何构建我的异步代码。我需要从我的函数 Func1() 一次调用 20 个不同的 Web 服务，当它们都返回一个 xml 答案时，将所有结果加入一个大 xml。

我考虑过使用 TPL 任务。像这样的东西：

```
var task = Task.Factory.StartNew (call the web service1...);
var task2 = Task.Factory.StartNew (call the web service2...);
var task3 = Task.Factory.StartNew (call the web service3...);

task.WaitAll(); 
```

听起来不错还是有更好的方法来完成工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-02T11:51:45.043

几个月前我们需要这样的东西来同时处理多个远程 URL。[我们通过从SemaphoreSlim](http://msdn.microsoft.com/en-us/library/system.threading.semaphoreslim.aspx)类派生我们自己的类来实现这一点。

你可以实现这样的事情：

```
/// <summary>
    /// Can be used to process multiple URL's concurrently.
    /// </summary>
    public class ConcurrentUrlProcessor : SemaphoreSlim
    {
        private int initialCount;
        private int maxCount;
        private readonly HttpClient httpClient;

        /// <summary>
        /// Initializes a new instance of the <see cref="T:System.Threading.SemaphoreSlim" /> class, specifying the initial number of requests that can be granted concurrently.
        /// </summary>
        /// <param name="initialCount">The initial number of requests for the semaphore that can be granted concurrently.</param>
        public ConcurrentUrlProcessor(int initialCount)
            :base(initialCount)
        {
            this.initialCount = initialCount;
            this.maxCount = int.MaxValue;
            this.httpClient = new HttpClient();
        }
        /// <summary>
        /// Initializes a new instance of the <see cref="T:System.Threading.SemaphoreSlim" /> class, specifying the initial and maximum number of requests that can be granted concurrently.
        /// </summary>
        /// <param name="initialCount">The initial number of requests for the semaphore that can be granted concurrently.</param>
        /// <param name="maxCount">The maximum number of requests for the semaphore that can be granted concurrently.</param>
        public ConcurrentUrlProcessor(int initialCount, int maxCount)
            : base(initialCount, maxCount) 
        {
            this.initialCount = initialCount;
            this.maxCount = maxCount;
            this.httpClient = new HttpClient();
        }
        /// <summary>
        /// Starts the processing.
        /// </summary>
        /// <param name="urls">The urls.</param>
        /// <returns>Task{IEnumerable{XDocument}}.</returns>
        public virtual async Task<IEnumerable<XDocument>> StartProcessing(params string[] urls)
        {
            List<Task> tasks = new List<Task>();
            List<XDocument> documents = new List<XDocument>();

            SemaphoreSlim throttler = new SemaphoreSlim(initialCount, maxCount);
            foreach (string url in urls)
            {
                await throttler.WaitAsync();

                tasks.Add(Task.Run(async () =>
                {
                    try
                    {
                        string xml = await this.httpClient.GetStringAsync(url);

                        //move on to the next page if no xml is returned.
                        if (string.IsNullOrWhiteSpace(xml))
                            return;

                        var document = XDocument.Parse(xml);
                        documents.Add(document);
                    }
                    catch (Exception)
                    {
                        //TODO: log the error or do something with it.
                    }
                    finally
                    {
                        throttler.Release();
                    }
                }));
            }

            await Task.WhenAll(tasks);

            return documents;
        }
    } 
```

以及相应的单元测试：

```
 [Test]
    public async void CanProcessMultipleUrlsTest()
    {
        string[] urls = new string[] 
        {
            "http://google.nl",
            "http://facebook.com",
            "http://linkedin.com",
            "http://twitter.com" 
        };

        IEnumerable<XDocument> documents = null;
        ConcurrentUrlProcessor processor = new ConcurrentUrlProcessor(100);

        documents = await processor.StartProcessing(urls);

        Assert.AreEqual(4, documents.Count());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T10:53:12.977

我想到了两种方法。

**一个**。您现在这样做的方式，但使用延续`ContinueWith`/`ContinueWhenAll`如[本答案](https://stackoverflow.com/questions/11649628/task-chaining-wait-for-the-previous-task-to-completed/11649731#11649731)和本[文章](http://www.codeproject.com/Articles/152765/Task-Parallel-Library-1-of-n)中所述。因此，对于您的情况，您可以使用子任务的单个延续，所以

```
TaskCreationoptions op = TaskCreationOptions.AttachedToParent;
Task.Factory.StartNew(() => 
{
    var task1 = Task.Factory.StartNew (CallService(1));
    var task2 = Task.Factory.StartNew (CallService(2));
    var task3 = Task.Factory.StartNew (CallService(3));
})
.ContinueWith(ant => { SomeOtherselegate }); 
```

[或者您可以按照此处](https://stackoverflow.com/questions/11904821/proper-way-to-use-continuewith-for-tasks)的说明链接延续。

另一种方法是使用`ContinueWhenAll`.

```
var task1 = Task.Factory.StartNew (CallService(1));
var task2 = Task.Factory.StartNew (CallService(2));
var task3 = Task.Factory.StartNew (CallService(3));
var continuation = Task.Factory.ContinueWhenAll(
    new[] { task1, task2, task3 }, tasks => Console.WriteLine("Done!")); 
```

这里唯一要考虑的是你可以拥有可变数量的任务的方式，但这很容易，我会让你解决这个问题。

**乙**。另一种方法是使用 .NET4.5+ 和`async`/ `await`。所以你的代码会是这样的

```
private async void CallAllServicesAsync()
{
    await CallServiceAsync(1);
    await CallServiceAsync(2);
    await CallServiceAsync(3);
} 
```

在哪里

```
private Task CallServiceAsync(int serviceNumber)
{
    return Task.Run(() = > { SomeMethod(); });
} 
```

上面的代码相当于显示的第一个代码，但框架会在幕后为您处理一切。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-02T10:32:00.733

我在这里只能想到两种主要方法：

1.  有一个地方，你会在收到它后立即聚合。这可以通过类似*ContinueWith()*方法来完成。但是，您需要在聚合代码中处理同步，最后您仍然需要等到所有任务完成。因此，只有在聚合需要很长时间并且可以并行完成时，这种方法才有意义。

2.  你做这件事的方式 - 又好又简单:)

至于使用*async*，我会投票赞成使用[TaskFactory.ContinueWhenAll()](http://msdn.microsoft.com/en-us/library/dd321473.aspx)方法。这样你就不会阻塞任何线程，代码看起来比有多个*等待*更好（取决于口味）并且可能会有更少的开销（可能取决于实现）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-02T11:33:43.757

正确的使用方法`async`是首先定义一个`CallServiceAsync`自然异步的（即，使用`HttpClient`或者是/方法的`TaskFactory.FromAsync`包装器）。它不*应该*使用.`Begin``End`*`Task.Run`*

 *一旦你有一个 natural-asynchronous `CallServiceAsync`，那么你可以同时发出 20 个调用并（异步地）等待它们：

```
public async Task<XDocument> GetAllDataAsync()
{
  var task1 = CallServiceAsync(1);
  var task2 = CallServiceAsync(2);
  var task3 = CallServiceAsync(3);
  ...
  XDocument[] results = await task.WhenAll(task1, task2, task3, ...);
  return JoinXmlDocuments(results);
} 
```

这种方法根本不会阻塞任何线程。

您可以通过以下方式使其性能稍微提高一点`ConfigureAwait(false)`：

```
XDocument[] results = await task.WhenAll(task1, task2, task3, ...).ConfigureAwait(false); 
```*

# java - 获得焦点时如何制作 JComboBox 下拉菜单？

> ID：14367334
> 
> 赞同：5
> 
> 时间：2013-01-16T20:35:02.880
> 
> 标签：java, swing, drop-down-menu, jcombobox

我发现当用户希望用户从中进行选择时，吸引人们注意 jcombobox 的一种有用方法是在用户完成前一个项目时通常将其下拉到获得焦点的位置。这如何在 Java 中完成？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-16T20:40:55.037

你可以这样做：

```
comboBox.addFocusListener(new FocusAdapter() {

   @Override
   public void focusGained(FocusEvent e) {
      comboBox.showPopup();
   }
}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T20:40:27.027

你要[`JComboBox#setPopupVisible`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComboBox.html#setPopupVisible%28boolean%29)

添加一个`FocusListener`来监控获得的焦点，你应该是对的。

根据组合框是否可编辑，您可能还需要向编辑器添加焦点侦听器

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-10T06:23:47.257

右键单击组合框。转到事件--->鼠标---->鼠标输入。它会带你到：private void jComboBox1MouseEntered(java.awt.event.MouseEvent evt) {} 在花括号内，输入：jComboBox1.showPopup();

它应该看起来像：

```
private void jComboBox1MouseEntered(java.awt.event.MouseEvent evt) {                                        
        // TODO add your handling code here:
        jComboBox1.showPopup();
    } 
```

# sql - 在存储过程中使用同义词

> ID：14367341
> 
> 赞同：1
> 
> 时间：2013-01-16T20:35:20.300
> 
> 标签：sql, sql-server, sql-server-2008

我在使用定义的另一个数据库中有一个表的同义词

```
create synonym TableA for otherDb.dbo.TableA 
```

我有一个本地定义的存储过程

```
CREATE PROCEDURE dbo.spGetTableA
AS 
BEGIN
SELECT * FROM TableA
END 
```

现在当我打电话给 SP

```
EXEC spGetTableA 
```

我收到以下错误
Invalid object name 'TableA'

直接调用 SQL 时`SELECT * FROM TableA`
效果很好。

知道我为此工作缺少什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:41:36.840

您可能从默认架构不是 dbo 的用户调用存储过程。因此，在创建同义词和在查询中引用表时，都应该始终引用模式。

```
DROP SYNONYM TableA;
GO
CREATE SYNONYM dbo.TableA FOR OtherDB.dbo.TableA;
GO
ALTER PROCEDURE dbo.spGetTableA
AS
BEGIN
  SELECT * FROM dbo.TableA;
END
GO
EXEC dbo.spGetTableA; 
```

我希望我可以`dbo.`在代码中加粗所有这些引用。它们很重要，应该***始终***存在。

请阅读：

*   [要改掉的坏习惯：避免使用模式前缀](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)

# sql - Oracle SQL 中的最后一个订单项

> ID：14367345
> 
> 赞同：0
> 
> 时间：2013-01-16T20:35:30.380
> 
> 标签：sql, oracle

我需要在客户表和订单表之间以 1:N 的关系列出客户表中的列、第一个订单的日期和最后一个订单的所有数据。我正在使用 Oracle 10g。

如何做到这一点的最佳方法？

```
表客户
---------------
身份证号
名称 VARCHAR2(200)
订阅日期 DATE

表顺序
---------------
身份证号
id_order NUMBER
购买日期 DATE
购买价值 NUMBER

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:49:20.583

这是一种方法，使用`row_number`函数、一个连接和聚合：

```
select c.*,
       min(o.purchase_date) as FirstPurchaseDate, 
       min(case when seqnum = 1 then o.id_order end) as Last_IdOrder,
       min(case when seqnum = 1 then o.purchase_date end) as Last_PurchaseDate,
       min(case when seqnum = 1 then o.purchase_value end) as Last_PurchaseValue
from Customer c join
     (select o.*,
             row_number() over (partition by o.id order by purchase_date desc) as seqnum
      from orders o
     ) o
     on c.customer_id = o.order_id
group by c.customer_id, c.name, c.subscribe_date 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:49:44.823

如何将`customer`表连接到表并不明显`orders`（`order`是 Oracle 中的保留字，因此您的表无法命名`order`）。如果我们假设`id_order`in`orders`连接到`id`in`customer`

```
SELECT c.id customer_id,
       c.name name,
       c.subscribe_date,
       o.first_purchase_date,
       o.id last_order_id,
       o.purchase_date last_order_purchase_date,
       o.purchase_value last_order_purchase_value
  FROM customer c
       JOIN (SELECT o.*,
                    min(o.purchase_date) over (partition by id_order) first_purchase_date,
                    rank() over (partition by id_order order by purchase_date desc) rnk
               FROM orders o) o ON (c.id = o.id_order)
 WHERE rnk = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:53:52.477

也许像这样假设表中的`ID`字段`Order`实际上是`Customer ID`：

```
SELECT C.*, O1.*, O2.purchase_Date as FirstPurchaseDate
FROM Customer C
LEFT JOIN 
(
  SELECT Max(purchase_date) as pdate, id
  FROM Orders
  GROUP BY id
) MaxPurchaseOrder 
  ON C.Id = MaxPurchaseOrder.Id
LEFT JOIN Orders O1 
  ON MaxPurchaseOrder.pdate = O1.purchase_date 
  AND MaxPurchaseOrder.id = O1.id
LEFT JOIN 
(
  SELECT Min(purchase_date) as pdate, id
  FROM Orders
  GROUP BY id
) MinPurchaseOrder 
  ON C.Id = MinPurchaseOrder.Id
LEFT JOIN Orders O2 
  ON MinPurchaseOrder.pdate = O2.purchase_date 
  AND MinPurchaseOrder.id = O2.id 
```

还有[sql 小提琴](http://www.sqlfiddle.com/#!4/4a7ea/6)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:44:57.250

我对您的字段名称感到困惑，但我假设 ORDER.id 是 CUSTOMER 表中的 id。

最早的订单日期很容易。

```
select CUSTOMER.*, min(ORDER.purchase_date)
from CUSTOMER
  inner join ORDER on CUSTOMER.id = ORDER.id
group by CUSTOMER.* 
```

要获取最后的订单数据，请再次将其连接到 ORDER 表。

```
select CUSTOMER.*, min(ORD_FIRST.purchase_date), ORD_LAST.*
from CUSTOMER
  inner join ORDER ORD_FIRST on CUSTOMER.id = ORD_FIRST.id
  inner join ORDER ORD_LAST on CUSTOMER.id = ORD_LAST.id
group by CUSTOMER.*, ORD_LAST.*
having ORD_LAST.purchase_date = max(ORD_FIRST.purchase_date) 
```

# memory-management - 为什么 C++ 中的 free() 函数只释放 8 个字节的内存？

> ID：14367346
> 
> 赞同：-2
> 
> 时间：2013-01-16T20:35:32.583
> 
> 标签：memory-management, malloc, free, dynamic-memory-allocation, realloc

> **可能重复：**
> [为什么在释放指针后取消引用指针时会得到不同的结果？](https://stackoverflow.com/questions/1078677/why-do-i-get-different-results-when-i-dereference-a-pointer-after-freeing-it)

在字符的情况下也尝试过，它做了什么，在 8 个值之后第 9 个值是正确的，而前 8 个显示垃圾值，就像这里的情况一样，前两个值显示垃圾，而第三个值是原样。因此只有前 8 个字节被释放。为什么会这样？您还可以增加要检查的数组中的索引数。有人请解释一下 FREE() 方法在这里如何工作？

```
#include<iostream>
using namespace std;
#include<conio.h>
int main()
{
int *arr;
arr=(int *)malloc(sizeof(int)*3);
arr[0]=10;
arr[1]=20;
arr[2]=30;

free(arr);
for(register int i=0;i<3;i++)
{
cout<<arr[i]<<endl;
}
getch();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:39:04.770

释放 arr 后，您正在使用它的值。那是无效的，并且没有定义任何结果。在这种情况下，我猜你的 free 实现是使用前 8 个字节来保存一些记录（例如空闲列表指针或伙伴长度）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:39:06.167

`free()`基本上只是告诉运行时系统“我已经完成了这个内存，你可以在方便的时候将它重用于其他事情。” 换句话说，`free()`完全不支持在之后读取内存，并且可能会给出任何价值，包括从准确读回您编写的内容到使程序崩溃的范围内的任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:39:53.380

对 free() 的调用通知内存分配器该内存可以在将来的分配中重用。它不会以某种方式神奇地使您之前收到的指针无效。那个指针仍然指向……某处。根据系统中发生的其他情况，您的原始值可能仍位于指向的内存位置。

如果

> arr=(int *)malloc(sizeof(int)*3);

设置`arr`为 say `0xabcdabcd`（表示内存中的地址），`arr`在您调用`free`. 那个地址还有东西。那东西可能是也可能不是你放在那里的价值观。

# c++ - C++ 中的哪些方法和库最适合且最容易为 Web 创建（服务器）后端？

> ID：14367348
> 
> 赞同：2
> 
> 时间：2013-01-16T20:35:38.433
> 
> 标签：c++, web-services, cgi, fastcgi

C++ 中的哪些方法和库最适合且最容易为 Web 创建（服务器）后端？你对你所尝试的或从这个列表有什么建议？

1.  Fastcgi Daemon - Yandex 的开源框架，用于在 C++ 上设计高负载 FastCGI 应用程序 [https://github.com/golubtsov/Fastcgi-Daemon](https://github.com/golubtsov/Fastcgi-Daemon)

2.  FastCGI 很简单，因为它实际上是只有几个扩展的 CGI。[http://www.fastcgi.com/drupal/](http://www.fastcgi.com/drupal/)

3.  一个用于编写 CGI 应用程序的 C++ 类库 [http://www.gnu.org/software/cgicc/](http://www.gnu.org/software/cgicc/)

4.  IIS 7.0 的本机 C\C++ 模块 [http://www.iis.net/learn/develop/runtime-extensibility/develop-a-native-cc-module-for-iis](http://www.iis.net/learn/develop/runtime-extensibility/develop-a-native-cc-module-for-iis)

5.  Apache API C++ 食谱 [http://wolfgang.groogroo.com/apache-cplusplus/](http://wolfgang.groogroo.com/apache-cplusplus/)

6.  C++/Delphi - 嵌入式 WebServer/ISAPI，带有简单的前端构建器（html、css、extjs）[http://unigui.com/demo](http://unigui.com/demo)

# javascript - 什么是标记 ASP.NET 自定义控件需要 JS 库的好方法

> ID：14367351
> 
> 赞同：1
> 
> 时间：2013-01-16T20:35:52.080
> 
> 标签：javascript, asp.net, custom-controls

正如问题所说，我正在开发一个自定义 asp.net 控件，我需要以某种方式让用户知道它需要在页面上引用几个 JS 库。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:50:24.673

DOM 完全加载后检查是否存在所需的库：

```
function init() {
    if(!jQuery) {
        alert('This control requires jQuery');
    }
}

window.onload = init; 
```

上面的代码会给你这个想法。修改以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:05:00.927

除了文档之外，我不建议任何其他内容，但如果您真的需要它，您可以在标头中使用另一个脚本检查依赖 JS 对象（在应该插入依赖 JS 的位置之后）并相应地提醒用户。如;

```
if (typeof someDependencyObject === 'undefined')
{
    alert("someDependencyObject is required with SomeASP-NET Control.");
} 
```

但更好的方法是在您的自定义控制代码中注册您自己的脚本，使用`ClientScript.RegisterClientScriptBlock`.

```
<script runat="server">
    public void Page_Load(Object sender, EventArgs e)
    {
        String jsName = "MyCustomScript";
        Type type = this.GetType();

        // Register the script if not already registered.
        if (!Page.ClientScript.IsClientScriptBlockRegistered(type, jsName))
        {
            StringBuilder js = new StringBuilder();
            js.Append("<script type=\"text/javascript\">");
            js.Append("function someFunc() {  } ");
            js.Append("</script>");
            Page.ClientScript.RegisterClientScriptBlock(type, jsName, js.ToString());
        }
    }
</script> 
```

请参阅[此处的文档](http://msdn.microsoft.com/en-us/library/btf44dc9.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:38:32.090

1.  注释
2.  使用您的 asp.net 控件和所需的 JavaScript 库创建一个 nuget 包。

我会投票给第二个选项，但我也大量使用 nuget。

# java - JSoup - 如何在 a 之前获取一个 href (url/link) ？

> ID：14367358
> 
> 赞同：1
> 
> 时间：2013-01-16T20:36:28.930
> 
> 标签：java, css-selectors, html-parsing, jsoup

鉴于以下情况：

```
<li class="med grey mkp2">
    <a href="http://www.amazon.com/gp/offer-listing/B004N627KS/ref=sr_1_1_olp?ie=UTF8&amp;qid=1357396214&amp;sr=8-1&amp;keywords=097855073358&amp;condition=new"><span class="price bld">$28.15</span> new <span class="grey">(14 offers)</span></a> </li> 
```

我需要获取href，这听起来很简单，对吧？但是，我可以找到要从中获取的正确列表项的唯一方法是获取`<span class="price bld">`，因此我需要的 href 在它之前。它类似于[使用 jsoup 从其他 div/id 类中的类中提取 href](https://stackoverflow.com/questions/7481930/extracting-href-from-a-class-within-other-div-id-classes-with-jsoup)，但相反。

可以有许多带有 css 类“med gray mkp2”的列表项，但我只需要那些带有 class="price bld" 的跨度的内容。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:45:54.060

只能选择目标元素（the `<a>`），不能选择子元素（the `<span>`），否则只会返回`<span>`元素。在这种特殊情况下，您可以使用`:has()`选择器来检查目标元素是否具有所需的子元素。

```
Elements elements = document.select("a:has(.price.bld)"); 
```

### 也可以看看：

*   [Jsoup 选择器食谱](http://jsoup.org/cookbook/extracting-data/selector-syntax)

    > `:has(seletor)`：查找包含与选择器匹配的元素的元素；例如`div:has(p)`

# formatting - 如何在 C 中打开和读取文件？

> ID：14367361
> 
> 赞同：0
> 
> 时间：2013-01-16T20:36:56.527
> 
> 标签：formatting, fread

我正在启动一个新程序，第一步是读取在以前的程序中写入的文件。程序无法在`fseek()`线路和`fread()`线路之间运行，我收到以下错误：

```
debug assertion failed
expression:(stream!=NULL) 
```

我的代码如下：

```
#include <stdio.h>
#include <string.h>

int main (void)
{
    int m = 0;
    char stream[20];
    FILE *fp;

    /* opens a file which had data written into it in a previous program */
    fp = fopen("codetree.bin", "r");

    /* makes sure the file pointer is set at the beginning of the file */
    fseek(fp, 0, SEEK_SET);

    m = sizeof(stream);
    fread(&stream, m, 1, fp);
    /* ... */
} 
```

如果我添加以下行来检查 fopen 是否成功：

```
 if (fp == NULL) {
        printf("fopen() error...%s\n", strerror(errno)); 
    } 
```

我收到以下错误：

```
 no such file or directory exists 
```

我在代码中忽略或遗漏了什么？

# html - 定位与另一个元素的位置相关的元素

> ID：14367363
> 
> 赞同：0
> 
> 时间：2013-01-16T20:37:07.627
> 
> 标签：html, css

我有四个div：

```
<div class="a">I'm A</div>

<div class="b">I'm B</div>

<div class="c">I'm C</div>

<div class="x">I'm X</div> 
```

包括 X 在内的所有 div 元素都是固定位置的。！我想重新定位与 div B 的位置相关的 div X，使 div X 在 div B 的顶部。我该怎么做才能说明所有元素都应该有一个固定位置的事实，也就是说，它们不会在页面移动时移动是滚动的？如果重新定位 div B，则 div X 也将重新定位以保持在 div B 的顶部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:38:56.897

完成此操作的唯一方法是嵌套`.x`在以下内容中`.b`：

```
<div class="a">I'm A</div>

<div class="b">I'm B
    <div class="x">I'm X</div>
</div>

<div class="c">I'm C</div> 
```

然后绝对定位`.x`在`.b`.

* * *

这是小提琴：http: [//jsfiddle.net/jTzZU/](http://jsfiddle.net/jTzZU/)

# linux - Moses 的语料库文件格式

> ID：14367364
> 
> 赞同：0
> 
> 时间：2013-01-16T20:37:20.397
> 
> 标签：linux, moses

我正在使用 Moses 制作语言模型。

我按照此链接中的说明进行操作：[基线系统：Moses](http://www.statmt.org/wmt11/baseline.html)

我有 google 1-gram 文件，看起来像：

```
</S>    95119665584
<S>     95119665584
,       30578667846
.       22077031422
<UNK>   21594821357
the     19401194714
-       16337125274
of      12765289150
and     12522922536 
```

这意味着“of”这个词出现了 12,765,289,150 次。

现在我想从这个文件中创建一个语言模型（“构建语言模型”），

我不知道这种文件格式是否适用于 Moses。

在本教程中，他们正在使用“europarl-v6.en”，但我无法在网上找到它来检查文件格式。

# 最后编辑：

我需要将每个字母表示为单词，因此“hello”变成了“hell o”。

在按照我所说的表示每个单词之后，我应该使用哪种格式？

应该是：

```
o f
o f
o f
a n d
a n d 
```

或者像原来的格式：

```
o f       12765289150
a n d     12522922536 
```

或者也许是其他格式？

它仍然算作 google n-gram 吗？

我点击了链接：[如何使用 Google Web N-gram corpus to build an LM](http://www-speech.sri.com/projects/srilm/manpages/srilm-faq.7.html) as @ MukundKRoy 建议，但我不知道如何在我的情况下使用它（1-gram,2-gram ...my新文件不是 const）。

如果有人能告诉我这个文件应该是什么格式以便尽可能简单地与 SRILM 一起使用，我会很高兴。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:08:59.230

SRILM 正在处理 1-2-3..-grams，不要打扰。

我做过类似的事情，看看这里：

[Moses 安装和培训贯穿始终](http://www.statmt.org/moses_steps.html)

在`PART II - Build a Model`, section`Build Language Model`中，它与 google n-grams 完美配合。

让我知道这是否对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:42:56.950

您可以使用它`CMU-Cambridge Statistical Language Modeling Toolkit`来构建您的语言模型。参考`wfreq2vocab`和`text2wngram`。我认为这种 LM 格式适用于 moses。

# javascript - 单击链接并且 javascript 正在操作 DOM 时，在 Spotify 应用程序中保留浏览器历史记录

> ID：14367365
> 
> 赞同：0
> 
> 时间：2013-01-16T20:37:26.953
> 
> 标签：javascript, dom, onclick, spotify, browser-history

基本上，我编写了一个 Spotify 应用程序，它只包含一个页面 (index.html)，所有链接都触发`onclick()`了操作 DOM 的 javascript 函数。例如，我展示了最初的 4 张专辑，并有一个“查看更多专辑”链接来加载和呈现其余专辑。我这样做是为了让最初的 4 张专辑只加载一次。`pushState()`在我阅读细则之前，我没有意识到有限制。[Spotify](https://developer.spotify.com/technologies/apps/guidelines/integration/#integratingwiththespotifyapplicationshistory)表示，如果您尝试使用`pushState()`. 我不想重新编写应用程序以在每次链接点击时加载新的 html 页面。我尝试了他们使用完整 URI 的方法（例如。`<a href='spotify:app:chirp:best_of:index'>`），但它的行为不正常（[代码](https://github.com/chirpradio/chirpradio-spotify/blob/master/app/app.js#L124)）。关于一般方法的建议？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:40:53.897

`pushState`Spotify 应用程序不支持。如果您想在历史记录中创建一个新条目，以便用户单击后退按钮返回到之前的状态，那么您应该有如下链接：

```
<a href='spotify:app:chirp:best_of:2009'>See More</a> 
```

`models.EVENT.ARGUMENTSCHANGED`您将通过观察事件来检测用户何时点击。

您可以查看[GitHub 上的 Spotify 应用教程，](https://github.com/spotify/apps-tutorial)它使用了类似的方法。

如果您不想创建新条目，而只是追加一些专辑，则无需导航到任何新 URI，然后`seeMoreAlbumsOfTheYearOnClick`像当前一样执行您的功能。

请注意，如果您不假装导航到任何新 URL，则应将事件变量传递给您的`seeMoreAlbumsOfTheYearOnClick`函数并调用`event.preventDefault();`. 另一种可能性是使用`button`元素。

# python - 在 Python 中取消转义 unicode 转义，但不包括回车和换行

> ID：14367369
> 
> 赞同：1
> 
> 时间：2013-01-16T20:37:32.560
> 
> 标签：python, utf-8

我有一个 ASCII 编码的 JSON 文件，其中包含 unicode 转义（例如，`\\u201cquotes\\u201d`）和换行符在字符串中转义（例如，``"foo\\r\\nbar"`）。在 Python 中是否有一种简单的方法可以通过取消转义 unicode-escapes 来生成 utf-8 编码文件，但保持换行符不变？

调用`decode('unicode-escape')`字符串将解码 unicode 转义（这是我想要的），但它也会解码回车符和换行符（我不想要）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:42:14.477

当然有，使用正确的工具并要求[`json`模块](http://docs.python.org/2/library/json.html)将数据解码为 Python `unicode`；然后将结果编码为 UTF-8：

```
import json

json.loads(input).encode('utf8') 
```

仅用于`unicode-escape`实际的 Python 字符串文字。JSON 字符串与 Python 字符串不同，尽管它们乍一看可能非常相似。

简短的演示（考虑到 python 交互式解释器将字符串作为文字回显）：

```
>>> json.loads(r'"\u201cquotes\u201d"').encode('utf8')
'\xe2\x80\x9cquotes\xe2\x80\x9d'
>>> json.loads(r'"foo\r\nbar"').encode('utf8')
'foo\r\nbar' 
```

请注意，JSON 解码器的解码`\r`就像`\n`python 文字一样。

如果您绝对*必须*只处理`\uabcd`JSON 输入中的 unicode 文字，而其余部分保持不变，那么您需要使用正则表达式：

```
import re

codepoint = re.compile(r'(\\u[0-9a-fA-F]{4})')
def replace(match):
    return unichr(int(match.group(1)[2:], 16))

codepoint.sub(replace, text).encode('utf8') 
```

这使：

```
>>> codepoint.sub(replace, r'\u201cquotes\u201d').encode('utf8')
'\xe2\x80\x9cquotes\xe2\x80\x9d'
>>> codepoint.sub(replace, r'"foo\r\nbar"').encode('utf8')
'"foo\\r\\nbar"' 
```

# javascript - 通过模板工具包来自多行字符串的意外令牌非法

> ID：14367372
> 
> 赞同：0
> 
> 时间：2013-01-16T20:37:36.620
> 
> 标签：javascript, template-toolkit

我在由 template::toolkit 预处理的 html 页面中有一个 js 脚本。

脚本如下；

```
<script>
    $(function(){ 
    var floot = {
        id : [% floot.id %],
        image : '[% floot.image %]',
        title : "[% floot.title %]",
        desc : "[% floot.desc %]",
        history : []
    };
            /* unrelated stuff */
            /* set click event to display the floot details in an overlay */
    $('#' + floot.id).children('.openDetails').click(function() { 
        bubbleDetails(floot, user);
    });
</script> 
```

问题是 floot.desc 可以包含换行符 - 这是一个描述，我想保留它们，但是换行符上的 js barfs 芯片给出了 Unexpected token 错误。

例如，我尝试了许多 TT 过滤器

```
[% floot.desc | html_line_break | replace('\n', ' ') %] 
```

这成功地删除了换行符并用 <\br> 替换它们（请原谅反斜杠，否则编辑器正在解释 br s）但是它不起作用，然后页面会在其中呈现 <\br> 而不是休息。

在这个阶段，我认为这样做的唯一方法是在 bubbleDetails 中搜索 floot.desc 中的 <\br> 并用换行符替换它的任何出现，但是我想检查是否有人知道更好，更少笨拙的方法吗？

感谢您的输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:57:27.830

我以前从未使用过这个包，但是看看这个文档，它看起来可能是你需要的：

[http://template-toolkit.org/docs/manual/VMethods.html](http://template-toolkit.org/docs/manual/VMethods.html)

向下滚动到 dquote 部分

也转义双引号，这可能会很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T23:44:17.737

有用于处理 JSON 转换的 TT 插件，如果没有明确地做，这就是你有效的。如果可能的话，应该避免代码生成——让插件担心这些神秘的问题。

我喜欢 JSON::Escape，你可以这样执行：

```
[% USE JSON::Escape; %]
<script>
    $(function(){ 
    var floot = [% floot.json %];
    floot.history = []; // might not even be necessary?
    };
            /* unrelated stuff */
            /* set click event to display the floot details in an overlay */
    $('#' + floot.id).children('.openDetails').click(function() { 
        bubbleDetails(floot, user);
    });
</script> 
```

[这个相关的问题和答案](https://stackoverflow.com/a/13578228/14750)也可能有用。

如果你这样做并且错误仍然存​​在，那么正如@agreco所说，它一定是`bubbleDetails()`函数中的问题。

# java - 程序不替换字母

> ID：14367376
> 
> 赞同：0
> 
> 时间：2013-01-16T20:37:45.300
> 
> 标签：java

我目前正在学习如何在 Java 中使用数组列表，但我遇到了一个简单但烦人的问题..

```
import java.util.*;

public class ReplacingALetter
{   
 public static void main (String[] args)
 {
    String word = "Banana";

    List underscore = new ArrayList(word.length());

    int i;
    for (i=0; i<word.length(); i++)
    {
        underscore.add(i, "x"); 

    }

    System.out.print(underscore);

    System.out.println();
    System.out.print("Enter a letter: ");

    Scanner sc = new Scanner(System.in);

    String letter = sc.nextLine();

    if (sc.equals("B"))
      {
        underscore.set(word.indexOf("B"),"B");
      }

    System.out.print(underscore);

 }   
} 
```

出于某种原因，它没有用字母 B 替换数组“下划线”中的第一个 x：/

该代码的输出是 [ xxxxxx ]

但是当我输入这段代码时：

```
 import java.util.*;

public class ReplacingALetter
{   
 public static void main (String[] args)
 {
    String word = "Banana";

    List underscore = new ArrayList(word.length());

    int i;
    for (i=0; i<word.length(); i++)
    {
        underscore.add(i, "x"); 

    }

    System.out.print(underscore);

    System.out.println();
    System.out.println("Switching First x with B: ");

    underscore.set(word.indexOf("B"),"B");

    System.out.print(underscore);

 }   
} 
```

它工作得很好，输出是 [ B xxxxx ]

无法弄清楚我做错了什么......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:42:10.210

我在您的 2 个示例中发现的唯一区别是，一个使用 if 条件：

```
if (sc.equals("B")) {
    underscore.set(word.indexOf("B"),"B");
} 
```

而另一个执行

```
 underscore.set(word.indexOf("B"),"B"); 
```

无条件地。你`sc`是一个`java.util.Scanner`，`"B"`是一个字符串。它们不能相等，因此在您的第一个示例中永远不会调用该方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:41:44.813

`if (sc.equals("B"))`这个条件总是`false`因为`sc`不是类的对象`String`。

您应该将代码更改为：

```
if (letter.equals("B")) {
    underscore.set(word.indexOf("B"),"B");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:40:42.230

```
if (letter.equals("B"))
      {
        underscore.set(word.indexOf("B"),"B");
      } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:41:30.587

您必须检查 letter 是否等于 B 而不是 sc 是否等于 B。

```
String letter = sc.nextLine();    
    if (letter.equals("B"))
      {
        underscore.set(word.indexOf("B"),"B");
      } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T20:41:36.327

修改这个片段

```
 Scanner sc = new Scanner(System.in);

    String letter = sc.nextLine();

    if (sc.equals("B"))
      {
        underscore.set(word.indexOf("B"),"B");
      } 
```

至

```
Scanner sc = new Scanner(System.in);

String letter = sc.nextLine();

if (letter.equals("B"))
  {
    underscore.set(word.indexOf("B"),"B");
  } 
```

在前者中，您将 Scanner 对象与永远不相等的字符串“B”进行比较。在后者中，它将从标准输入读取的字符串与“B”进行比较。

# powershell - Excel自动化速度慢？

> ID：14367377
> 
> 赞同：2
> 
> 时间：2013-01-16T20:38:04.583
> 
> 标签：powershell, excel, automation, office-interop, vba

我正在使用以下 Powershell 脚本来删除`NumberFormat`大量文件的列中的单元格，以便显示所有分数。该列可能有小数、文本或日期等；仅需要应用这些十进制/货币格式（格式为`0*`or `*#*`）的单元格

但是它很慢（每秒检查/更新两个或三个单元格）。有更好/更快的方法吗？

```
 $WorkBook = $Excel.Workbooks.Open($fileName)
    $WorkSheet = $WorkBook.Worksheets.Item(1)
    $cell = $WorkSheet.Cells

    $ColumnIndex = 10 # The column may have decimal, text or date, etc.
    $i = 2

    while ($cell.Item($i, 1).value2 -ne $Null)
      # Replace it to find the last row# of column 1 may cut the time in half? How?
    {
        $c = $cell.Item($i, $ColumnIndex)

        if (($c.NumberFormat -like "0*") -or $c.NumberFormat -like "*#*")
        {
            "$i : $($c.NumberFormat) $($c.value2) "
            $c.NumberFormat = $Null
        }
        $i++
    } 
```

**更新：**

.Net`Microsoft.Office.Interop.Excel`会快得多吗？或者将文件转换为 xlsx 格式并使用`System.IO.Package.IO`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T17:56:06.030

阅读评论后，我提高了速度。谢谢大家。

1.  尽量减少细胞的访问。我删除了输出行`"$i : $($c.NumberFormat) $($c.value2) "`并更改

    `if (($c.NumberFormat -like "0*") -or $c.NumberFormat -like "*#*")`
    到
    `$f = $c.NumberFormat`
    `if ($f -like "0*" -or $f -like "*#*")`

2.  我还`$lastRow = $cell.SpecialCells(11, 1).Row`用来获取最后一行编号并将循环更改为`while ($i -le $lastRow)`.

3.  `$Excel.ScreenUpdating = False` also helped reduced some time.

# c# - 在 C# 中设置对 null 的引用

> ID：14367380
> 
> 赞同：3
> 
> 时间：2013-01-16T20:38:06.730
> 
> 标签：c#, pointers, memory-management

我一直在寻找这个信息很长时间。从来没见过有人问这样的问题。我知道我们可以在不安全的代码中使用 C# 中的指针，但事实并非如此。问题是：

```
MyClass beta = new MyClass();
MyClass alpha = beta;
beta = null; 
```

我现在需要做的是将 beta 设置为 null 并将 alpha 设置为 null。假设我在一个函数中返回了 alpha，所以我无法再访问它，那么，如何将它设置为 null？在 c++ 中，如果 beta 和 alpha 是指针，我可以释放 beta 指向的内存，但我不知道在 c# 中这样做的方法。

以更基本的方式，假设我必须将两个变量都设置为 null，但我只能访问其中一个。

* * *

编辑

我确实看到了一些与我所做的问题无关的答案......我会再次尝试解释。我正在创建一个做一些运动效果的类，并返回一个可用于暂停或停止此运动的实例。使用这个类的程序员习惯于 `if(variable != null)` 在使用它之前测试变量。我需要的是，当运动结束时，他们拥有的实例变为空，所以他们知道它不再有用了。

有什么办法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-16T20:41:39.977

您需要添加一个额外的间接层。用 C++ 术语来说，`MyClass`是一个指向对象的指针，因此要将两个指针都设置为 null，您需要将指针传递给指针，以便您可以将指向指针的指针解析为仅指向指针的指针，将其设置为 null , 并且两个双指针都将解析为`null`.

在 C# 中添加额外的间接层通常意味着创建一个新类。

```
public class Wrapper<T>
{
    public T Value { get; set; }
} 
```

使用它，我们可以使`alpha`and `beta`each 成为`Wrapper<MyClass>`对象（确保它们都是 的相同实例`Wrapper`），并且要影响两个“指针”，您只需将to设置`Value`为.`Wrapper``null`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:44:11.870

除非您的类包含一次性对象，否则不需要 Dispose 对象，并将其设置为 null 只会使对象为 null ，这不会释放内存，但如果您稍后需要检查该对象会有所帮助...

如果你的类需要被标记为一次性的，因为它需要清理它的内存使用，请考虑让你的类从[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx "msdn IDisposable 信息")继承！界面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:44:23.373

如果您需要获得某种 AV/异常（以匹配访问已删除对象的 C++ 行为），您可以获得的最接近的方法是使对象 IDisposable 并在对象被处置后抛出所有方法/属性（类似于流派生对象的方式表现）。

```
MyClass beta = new MyClass();
MyClass alpha = beta;
beta.Dispose();

alpha.Method(); // should throw  ObjectDisposedException. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:46:20.593

你也不需要这样做。C# 内存是自动管理的，因此当没有更多对它们的引用时，它们会被释放。如果您因为捕获了 OutOfMemoryException 而特别*想*释放某些东西，那么是的，您可以开始将其设置为 null 并强制垃圾收集器，正如@JanesAbouChleih 指出的那样。`.Dispose`调用该方法并实现可能需要的任何其他清理代码`MyClass`（关闭文件、刷新缓冲区等）要好得多。

一些参考资料：

[http://msdn.microsoft.com/en-us/magazine/bb985010.aspx](http://msdn.microsoft.com/en-us/magazine/bb985010.aspx)

[http://msdn.microsoft.com/en-us/library/ms973837.aspx](http://msdn.microsoft.com/en-us/library/ms973837.aspx)

此外，关于如何/何时/为什么处置东西的类似问题：[你需要处置对象并将它们设置为空吗？](https://stackoverflow.com/questions/2926869/do-you-need-to-dispose-of-objects-and-set-them-to-null)

# perl - 多维哈希排序 - Perl

> ID：14367382
> 
> 赞同：0
> 
> 时间：2013-01-16T20:38:14.163
> 
> 标签：perl

我真的需要一些帮助来理解这个哈希并用排序处理它。

这是哈希：

```
$VAR1 = {

    Key1:Key1_si => {

        'KeyA' => {
            Keya => 'abcd, defg',
            keyb => '1000',
            keyc =>  '80%',
            keyd =>  '2011.10.09',
            keye => '1234-UR-DDDD',
            keyf => 'rwh',
            keyg => '600',
            keyh => 'red',
            keyi => '900',
            keyj => '',
            keyk =>'int4678_tt',
        },

        'KeyB' => {

            Keya => 'abcd, defg',
            keyb => '2000',
            keyc =>  '100%',
            keyd =>  '2011.11.09',
            keye => '1234-UR-DDDD',
            keyf => 'rwh',
            keyg => '500',
            keyh => 'red',
            keyi => '400',
            keyj => '',
            keyk =>'int4678_tt',
        },
    },

}; 
```

问题：我想根据值不同的“keyc”对该哈希进行排序。所以，我想在下面的基础上进行排序：

```
Key1:Key1_si->KeyB->Keyc

Key1:Key1_si->KeyA->keyc 
```

另外，我希望输出带有排序值以及其他属性，例如：

打印：

```
Key1:Key1_si KeyB Keya keyd Keyc keyf

Key1:Key1_si KeyA keya keyd Keyc keyf 
```

有人可以帮助我使用 perl 中的代码来执行上述排序。我将非常感谢您的时间和努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T23:15:48.343

您想要对密钥对列表进行排序，因此您必须从构建密钥对列表开始。对数组的引用是显而易见的答案。一旦你弄清楚了这一点，一切都是直截了当的。

构建键列表：

```
my @unsorted_keys;
for my $k1 (keys(%$VAR1)) {
   for my $k2 (keys(%{ $VAR1->{$k1} })) {
      push @unsorted_keys, [ $k1, $k2 ];
   }
} 
```

对这些键进行排序：

```
my @sorted_keys = sort {
   my ($a_k1, $a_k2) = @$a;
   my ($b_k1, $b_k2) = @$b;

   ( my $a_pc = $VAR1->{$a_k1}{$a_k2}{keyc} ) =~ s/%//;
   ( my $b_pc = $VAR1->{$b_k1}{$b_k2}{keyc} ) =~ s/%//;

   $a_pc <=> $b_pc
} @unsorted_keys; 
```

遍历排序的键：

```
for (@sorted_keys) {
   my ($k1, $k2) = @$_;
   my $hash = $VAR1->{$k1}{$k2};
   ... do stuff with %$hash ...
} 
```

# python - 连接到 SQL Server 的“意外 EOF”

> ID：14367383
> 
> 赞同：3
> 
> 时间：2013-01-16T20:38:17.490
> 
> 标签：python, sql-server, pymssql

我正在尝试使用 pymssql 连接到在 Windows Server 2008 上运行的 SQL Server 2012 数据库。

```
db = pymssql.connect(host='xxx',user='xxx',password='xxx',database='xxx') 
```

但是，我收到以下错误：

> OperationalError: (20017, 'DB-Lib 错误消息 20017, 严重性 9:\n来自服务器的意外 EOF\nDB-Lib 错误消息 20002, 严重性 9:\n自适应服务器连接失败\n')

完整的错误是：

```
Traceback (most recent call last):
  File "XXX.py", line 2, in <module>
    conn = pymssql.connect(host = 'XXX.com', user = 'xxx', password = 'xxx', database = 'xxx')
  File "pymssql.pyx", line 556, in pymssql.connect (pymssql.c:7990)
    raise OperationalError(e[0])
OperationalError: (20017, '\xa0\xff\xaf\x02\x90_\x8d\x02L\xd6\xa7\x02\xda\xad;DB-Lib error message 20017, severity 9:\nUnexpected EOF from the server\nDB-Lib error message 20002, severity 9:\nAdaptive Server connection failed\n') 
```

有人可以帮我弄清楚发生了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-18T02:37:47.473

我猜这可能是完全连接失败。我知道它说“EOF”，但有时这样的错误消息会产生误导。

我想看看你是否可以先从运行脚本的地方[ping 主机。](http://www.wikihow.com/Ping-an-IP-Address)

其次，我会看看您是否可以在您正在使用的端口上获得[tcp 连接。](http://kb.acronis.com/content/7503)

当您使用 https 连接到 http 端口时，我听说过 http 连接上的 EOF 错误。我不确定这是否适用于此。

这是在谷歌上出现的。它可能会有所帮助：

[http://sourceforge.net/projects/pymssql/forums/forum/124111/topic/1672338](http://sourceforge.net/projects/pymssql/forums/forum/124111/topic/1672338)

如果以上所有方法都有效，我会仔细检查用户名和密码是否正确；甚至可能创建一个新用户。

最后，我会检查客户端库和服务器库版本是否兼容。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-07-06T10:03:35.803

`pymssql`需要`freetds`正常工作。在 macOS 上，`/usr/local/etc/freetds.conf`在您首选的文本编辑器中打开，然后更新以下配置：

```
[global]
# TDS protocol version
# tds version = auto
tds version = 7.0 
```

您可以再试一次，看看错误是否消失。

参考[这里](https://pyyou.wordpress.com/2009/02/01/install-pymssql-and-how-to-deal-with-db-lib-error-message-20009-severity-9/)。

# oauth-2.0 - Shopify：获取 OAuth 访问令牌时出现问题

> ID：14367387
> 
> 赞同：7
> 
> 时间：2013-01-16T20:38:30.840
> 
> 标签：oauth-2.0, meteor, shopify

我已经毫无问题地在 OAuth 的第 1 步中检索了授权代码，但对于我来说，我无法完成获取访问令牌的帖子。我总是遇到同样的错误：

`content: "{"error":"invalid_request","error_description":"Could not find Shopify API appli... (length: 103)"`

这是我的代码的样子……Meteor.http.post 是一个标准的发布请求。我已经尝试了各种组合，但没有任何运气。我正在本地主机上开发：

```
var url = 'https://' + shopName + '/admin/oauth/access_token';    
var data = { client_id: apiKey, client_secret: secret, code: code };

Meteor.http.post(url, data,
    function(error, result) {
        debugger;
    }); 
```

[Meteor.post 是此处记录](http://docs.meteor.com/#meteor_http_post)的标准服务器端发布请求。我尝试过参数（如 Node Wrapper）、数组（如 PHP）和其他东西的组合。我不知道。

是因为我在 localhost 上开发并且服务器调用现在需要 https 吗？我的帖子数据结构错了吗？

任何其他想法我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T06:50:57.853

我知道您说过您尝试了参数，但将参数作为数据放入这样的数据是行不通的。尝试这个..

```
var url = 'https://' + shopName + '/admin/oauth/access_token';    
var data = { client_id: apiKey, client_secret: secret, code: code };

Meteor.http.post(url, {params:data},
    function(error, result) {
        debugger;
}); 
```

# iphone - iOS/Obj-C UIScrollView 视图未正确添加

> ID：14367389
> 
> 赞同：1
> 
> 时间：2013-01-16T20:38:39.780
> 
> 标签：iphone, ios, objective-c, uiscrollview, uipagecontrol

我正在尝试使用连接的页面控件制作基本的滚动视图，但我的代码遇到了一些问题。我的 viewDidLoad 方法如下所示：

```
- (void)viewDidLoad{
[super viewDidLoad];
NSLog (@"View did load");
// Do any additional setup after loading the view, typically from a nib.

scrollView.delegate = self;
scrollView.pagingEnabled=YES;

NSArray *frames = [NSArray arrayWithObjects:[UIColor redColor], [UIColor greenColor], [UIColor blueColor], nil];
for (int i = 0; i < frames.count; i++) {
    CGRect frame;
    frame.origin.x = self.scrollView.frame.size.width * i;
    frame.origin.y = 0;
    frame.size = self.scrollView.frame.size;

    UIView *subview = [[UIView alloc] initWithFrame:frame];
    subview.backgroundColor = [frames objectAtIndex:i];
    [self.scrollView addSubview:subview];
    NSLog (@"Looped, i = %i color = %@", i, [frames objectAtIndex:i]);
}

self.scrollView.contentSize = CGSizeMake(scrollView.frame.size.width * frames.count, scrollView.frame.size.height);
NSLog(@"The width is: %f", self.scrollView.frame.size.width);
} 
```

问题似乎是我尝试添加到视图中的彩色框架从未出现（甚至不是第一个）。如果我没有启用 ARC，我会在每个循环结束时释放 CGRect 帧，但它真的应该用 ARC 自己做，对吧？

当我在模拟器和我的实际手机上运行应用程序时，我得到一个黑屏，底部有 UIPageControl 点。当我在 ScrollView 上滑动手指时没有任何反应，但如果我将它拉到一侧很远，pageControl 将移动到下一个“点”。

最后一个 NSLog 语句总是输出 0.0000，表示没有任何视图被添加到滚动视图中。

非常感谢所有帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:51:31.283

问题是在 viewDidLoad 中进行。将您的代码移动到 viewDidAppear: 它应该可以正常工作。在 viewDidLoad 中尚未设置帧。

# grails - 从 Grails 自定义标签加载静态资源，配置：'head'

> ID：14367391
> 
> 赞同：0
> 
> 时间：2013-01-16T20:38:47.603
> 
> 标签：grails, grails-2.0, custom-tags

我正在尝试编写一个 Grails 自定义标签，该标签（除其他外）会触发资源的包含，因此`<myTags:view name="foo"/>`会加载诸如`js/views/foo.js`. 我希望它加载`disposition: 'head'`.

我可以使用`<r:external/>`，但这不会把它放在 中`<head>`，它只会产生一个内联`<script/>`标签。我可以使用`<r.script/>`，但这并不能让我引用路径；我必须让我的自定义标签读取文件并将其转储到`out`.

现在，如果`foo.js`是它自己的模块，我可以做类似`r.require([module: 'foo'])`的事情： ，但它不是；部分原因是我不想在`ApplicationResources.groovy`. 但也许我可以`ApplicationResources.groovy`通过阅读可用文件以编程方式创建模块——这可能吗？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:35:41.007

我最终朝着以`ApplicationResources.groovy`编程方式创建模块的方向前进，因此自定义标签可以使用`<r:require/>`.

这个想法是，对于每个 Backbone 视图，在 下`web-app/myApp/views`，文件中有一个 Backbone 视图，`.js`文件中有一个 Handlebars 模板`.handlebars`（按照惯例，具有相同的名称）。该`.handlebars`文件被声明为普通模块，但由 Handlebars-Resources 插件预编译。

中的一些代码`ApplicationResources.groovy`查找所有视图并创建相应的资源模块：

```
GrailsApplication grailsApplication = Holders.getGrailsApplication()
File viewsDir = grailsApplication.parentContext.getResource("myApp/views").file;
if (viewsDir.exists() && viewsDir.isDirectory() && viewsDir.canRead()) {
    String[] viewsJS = viewsDir.list().findAll { name -> 
        name.endsWith("View.js") 
    }
    String[] views = viewsJS.collect { name ->
        name.substring(0, name.length() - ".js".length())
    }

    for (view in views) {
        "${view}" {
            dependsOn 'backbone', 'backbone_relational', 'handlebars'
            resource url: "dpg/views/${view}.handlebars", 
                     attrs: [type: 'js'], 
                     disposition: 'head'
            resource url: "dpg/views/${view}.js", 
                     disposition: 'head'

        }
    }
} 
```

然后是标签库：

```
class ViewsTagLib {
    static namespace = "myApp"

    def view = { attrs ->
        r.require(module: "${attrs.name}View")
        out << "<${attrs.tagName} id='${attrs.id}'></${attrs.tagName}>"
    }
} 
```

在 GSP 中调用它：

```
<myApp:view tagName="div" name="foo" id="foo1"/>
<myApp:view tagName="div" name="foo" id="foo2"/> 
```

产生：

```
<html>
    <head>
        ...
        <!--
            Automagically generated modules (included only once).
            Should put these in the same bundle, but handlebars-resources
            gets confused.
        -->
        <script src="/myApp/static/bundle-bundle_fooView_handlebars.js" 
                type="text/javascript" ></script>
        <script src="/myApp/static/bundle-bundle_fooView_head.js" 
                type="text/javascript" ></script>
    </head>
    <body>
        ...
        <div id="foo1"></div> <!-- backbone placeholder for 1st view instance-->
        <div id="foo2"></div> <!-- backbone placeholder for 2nd view instance-->
    </body>
</html> 
```

它并不漂亮，但混乱大部分是隐藏的，它应该大大减少样板文件和忘记向多个文件添加魔术字符串的机会。

# sql - 用黄瓜测试时sql错误无法在事务中启动事务

> ID：14367396
> 
> 赞同：7
> 
> 时间：2013-01-16T20:39:00.407
> 
> 标签：sql, ruby-on-rails, cucumber, bdd

我是黄瓜新手，我正在学习 BDD

当我尝试填写表格并创建记录时，会显示此 sqlite 错误，尽管在我的浏览器中手动尝试代码时没有错误。

我正在使用rails 4。

这是我的控制器代码

```
class Admin::ItemsController < ApplicationController
    def index
        @items=Item.all
    end

    def new
        @item=Item.new
    end

    def create
        @item=Item.new items_params
            respond_to do |format|
                if @item.save
                    format.html { redirect_to admin_items_path }
                else
                    format.html { redirect_to new_admin_items_path }
                end
            end
    end

private
    def items_params
        params.require(:item).permit(:name,:price)      
    end
end 
```

这是我的功能文件

```
Feature: Manage Items
  In order to make a store
  As an admin
  I want to create and manage items

  Scenario: Items List
    Given I go to the new admin item page
    And I fill in "Name" with "Shampoo"
    And I fill in "Price" with "50"
    When I press "Create"
    Then I should be on the admin items page
    And I should see "Shampoo" 
```

和步骤定义

```
require File.expand_path(File.join(File.dirname(__FILE__), "..", "support", "paths"))

Given /^I go to the (.+)$/ do |page_name|
  visit path_to(page_name)
end

And /^I fill in "([^\"]*)" with "([^\"]*)"$/ do |field, value|
  fill_in(field.gsub(' ', '_'), :with => value)
end

When /^I press "([^\"]*)"$/ do |button|
  click_button(button)
end

Then /^I should be on the (.+)$/ do |page_name|
  current_path.should == path_to(page_name)
end

And /^I should see "(.*?)"$/ do |arg1|
  page.should have_content(arg1)
end 
```

此错误显示在第 4 步中，即单击创建按钮和调用 items#create 时。

我不知道代码有什么问题，希望有人能帮忙。

**更新：**

我想问题出在 cucumber-rails 的弃用 [https://github.com/cucumber/cucumber-rails/issues/231](https://github.com/cucumber/cucumber-rails/issues/231)

完整跟踪：

```
Using the default profile...
WARNING: Nokogiri was built against LibXML version 2.7.8, but has dynamically loaded 2.9.0
DEPRECATION WARNING: ActionController::Integration is deprecated and will be removed, use ActionDispatch::Integration instead. (called from <module:Rails> at /home/phanindra/.gem/ruby/1.9.1/gems/cucumber-rails-1.3.0/lib/cucumber/rails/world.rb:9)
DEPRECATION WARNING: ActionController::IntegrationTest is deprecated and will be removed, use ActionDispatch::IntegrationTest instead. (called from <module:Rails> at /home/phanindra/.gem/ruby/1.9.1/gems/cucumber-rails-1.3.0/lib/cucumber/rails/world.rb:9)
Feature: Manage Items
  In order to make a store
  As an admin
  I want to create and manage items

  Scenario: Items List                       # features/manage_items.feature:6
DEPRECATION WARNING: #increment_open_transactions is deprecated and has no effect. (called from start at /home/phanindra/.gem/ruby/1.9.1/gems/database_cleaner-0.9.1/lib/database_cleaner/active_record/transaction.rb:11)
    Given I go to the new admin item page    # features/step_definitions/item_steps.rb:3
    And I fill in "Name" with "Shampoo"      # features/step_definitions/item_steps.rb:7
    And I fill in "Price" with "50"          # features/step_definitions/item_steps.rb:7
    When I press "Create"                    # features/step_definitions/item_steps.rb:11
      SQLite3::SQLException: cannot start a transaction within a transaction: begin transaction (ActiveRecord::StatementInvalid)
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb:353:in `block in begin_db_transaction'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:305:in `block in log'
      /home/phanindra/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract_adapter.rb:300:in `log'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/sqlite3_adapter.rb:353:in `begin_db_transaction'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:129:in `initialize'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:17:in `new'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract/transaction.rb:17:in `begin'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:231:in `begin_transaction'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:208:in `within_new_transaction'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract/database_statements.rb:201:in `transaction'
      /home/phanindra/rails/activerecord/lib/active_record/transactions.rb:209:in `transaction'
      /home/phanindra/rails/activerecord/lib/active_record/transactions.rb:319:in `with_transaction_returning_status'
      /home/phanindra/rails/activerecord/lib/active_record/transactions.rb:269:in `block in save'
      /home/phanindra/rails/activerecord/lib/active_record/transactions.rb:280:in `rollback_active_record_state!'
      /home/phanindra/rails/activerecord/lib/active_record/transactions.rb:268:in `save'
      /home/phanindra/rails/activerecord/lib/active_record/persistence.rb:37:in `create'
      ./app/controllers/admin/items_controller.rb:11:in `create'
      /home/phanindra/rails/actionpack/lib/action_controller/metal/implicit_render.rb:4:in `send_action'
      /home/phanindra/rails/actionpack/lib/abstract_controller/base.rb:189:in `process_action'
      /home/phanindra/rails/actionpack/lib/action_controller/metal/rendering.rb:10:in `process_action'
      /home/phanindra/rails/actionpack/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
      /home/phanindra/rails/activesupport/lib/active_support/callbacks.rb:393:in `_run__143383953690284082__process_action__callbacks'
      /home/phanindra/rails/activesupport/lib/active_support/callbacks.rb:78:in `run_callbacks'
      /home/phanindra/rails/actionpack/lib/abstract_controller/callbacks.rb:17:in `process_action'
      /home/phanindra/rails/actionpack/lib/action_controller/metal/rescue.rb:29:in `process_action'
      /home/phanindra/rails/actionpack/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'
      /home/phanindra/rails/activesupport/lib/active_support/notifications.rb:158:in `block in instrument'
      /home/phanindra/rails/activesupport/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
      /home/phanindra/rails/activesupport/lib/active_support/notifications.rb:158:in `instrument'
      /home/phanindra/rails/actionpack/lib/action_controller/metal/instrumentation.rb:30:in `process_action'
      /home/phanindra/rails/actionpack/lib/action_controller/metal/params_wrapper.rb:245:in `process_action'
      /home/phanindra/rails/activerecord/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
      /home/phanindra/rails/actionpack/lib/abstract_controller/base.rb:136:in `process'
      /home/phanindra/rails/actionpack/lib/abstract_controller/rendering.rb:44:in `process'
      /home/phanindra/rails/actionpack/lib/action_controller/metal.rb:195:in `dispatch'
      /home/phanindra/rails/actionpack/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
      /home/phanindra/rails/actionpack/lib/action_controller/metal.rb:231:in `block in action'
      /home/phanindra/rails/actionpack/lib/action_dispatch/routing/route_set.rb:77:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/routing/route_set.rb:77:in `dispatch'
      /home/phanindra/rails/actionpack/lib/action_dispatch/routing/route_set.rb:45:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/journey/router.rb:69:in `block in call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/journey/router.rb:57:in `each'
      /home/phanindra/rails/actionpack/lib/action_dispatch/journey/router.rb:57:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/routing/route_set.rb:614:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/params_parser.rb:30:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/flash.rb:233:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/cookies.rb:443:in `call'
      /home/phanindra/rails/activerecord/lib/active_record/query_cache.rb:36:in `call'
      /home/phanindra/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:632:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
      /home/phanindra/rails/activesupport/lib/active_support/callbacks.rb:373:in `_run__2084705409073281596__call__callbacks'
      /home/phanindra/rails/activesupport/lib/active_support/callbacks.rb:78:in `run_callbacks'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/debug_exceptions.rb:18:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'
      /home/phanindra/rails/railties/lib/rails/rack/logger.rb:32:in `call_app'
      /home/phanindra/rails/railties/lib/rails/rack/logger.rb:16:in `block in call'
      /home/phanindra/rails/activesupport/lib/active_support/tagged_logging.rb:67:in `block in tagged'
      /home/phanindra/rails/activesupport/lib/active_support/tagged_logging.rb:25:in `tagged'
      /home/phanindra/rails/activesupport/lib/active_support/tagged_logging.rb:67:in `tagged'
      /home/phanindra/rails/railties/lib/rails/rack/logger.rb:16:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/request_id.rb:21:in `call'
      /home/phanindra/rails/activesupport/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
      /home/phanindra/rails/actionpack/lib/action_dispatch/middleware/static.rb:63:in `call'
      /home/phanindra/rails/railties/lib/rails/engine.rb:508:in `call'
      /home/phanindra/rails/railties/lib/rails/application.rb:95:in `call'
      ./features/step_definitions/item_steps.rb:12:in `/^I press "([^\"]*)"$/'
      features/manage_items.feature:10:in `When I press "Create"'
    Then I should be on the admin items page # features/step_definitions/item_steps.rb:15
    And I should see "Shampoo"               # features/step_definitions/item_steps.rb:19

Failing Scenarios:
cucumber features/manage_items.feature:6 # Scenario: Items List

1 scenario (1 failed)
6 steps (1 failed, 2 skipped, 3 passed)
0m3.476s 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-21T15:30:28.453

看起来您正在使用 DatabaseCleaner，默认情况下它会在事务中运行您的每个功能。同时，ActiveRecord 本身在保存项目时会启动一个事务。不幸的是，SQLite 不支持嵌套事务。

如果您[将 DatabaseCleaner 策略更改](https://github.com/bmabey/database_cleaner#how-to-use)为`:truncation`它应该避免此错误。或者，您可以针对功能更强大的数据库（如 PostgreSQL）进行测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T09:00:48.933

这对我有用。按照 Andy H 的建议，编辑您的 Gemfile 以从 github 上的最后一个源中提取。

```
gem 'database_cleaner', github: 'bmabey/database_cleaner' 
```

# c - 为什么在我的 C 反向列表函数中内存泄漏？

> ID：14367397
> 
> 赞同：0
> 
> 时间：2013-01-16T20:39:01.213
> 
> 标签：c, memory, malloc, free, memory-leaks

我对指针和内存模型相当陌生，所以如果这很明显，请原谅，但我正在编写一个程序来测试一个反转列表的函数反转。无论如何，我将它放在三个文件中，C5.c、C5-driver.c 和 C5.h。它们按以下顺序排列：

```
#include "C5.h"
#include <stdlib.h>
#include <stdio.h>

struct node *cons(int fst, struct node *rst) {
    struct node *new = malloc(sizeof(struct node));
    if (new == NULL) {
        printf("cons: out of memory\n");
        abort();
    }
    (*new).first = fst; /* same as (*new).first = fst */
    (*new).rest = rst;
    return new;
}

struct node *reverse(struct node *lst) {
    struct node *ans = NULL;
    while (lst != NULL) {
        ans = cons((*lst).first, ans);
        lst = (*lst).rest;
    }    
    return ans;
}

void free_list(struct node *lst) {
    struct node *p;
    while (lst != NULL) {
        p = lst->rest;
        free(lst);
        lst = p;
    }
}

void print_list(struct node *lst) {
    printf("( "); 
    while (lst != NULL) {
        printf("%d ", (*lst).first);
        lst = (*lst).rest;
    }
    printf(")\n");
} 
```

```
C5-驱动程序.c

```
#include <stdlib.h>
#include <stdio.h>
#include "C5.h"

int main() {
    struct node *lst1 = cons(5, NULL);
    struct node *lst2 = cons(3, lst1);
    struct node *lst3 = cons(1, lst2);
    print_list(lst3);
    lst3 = reverse(lst3);
    print_list(lst3);
    free_list(lst3);
} 
```

C5.h

struct node {
    int first;
    struct node *rest;
};

struct node *cons(int ,struct node *);
struct node *reverse(struct node *);
void print_list(struct node *);
void free_list(struct node *); 
```

但是 XCode 告诉我存在内存泄漏。

我假设它是在使用 cons 之后，但是我尝试创建一个新的`struct node *ans = new`和免费的（新的）；带返回答案；但这不起作用。如您在上面看到的，我也尝试过 free_list 。

谢谢~

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:43:36.370

反向函数调用分配内存的 cons，然后覆盖 lst3 指针。内存泄漏是 lst3 被覆盖，这使得无法恢复该内存。

您可能应该创建一个新变量，例如`struct node *lst3_reverse`and `lst3_reverse = reverse(lst3)`。然后你可以安全地做`free_list(lst3)`和`free_list(lst3_reverse)`释放内存。

# java - 从 Java 运行 Ping -t 并在关闭时结束进程

> ID：14367400
> 
> 赞同：2
> 
> 时间：2013-01-16T20:39:11.170
> 
> 标签：java, command, runtime

我有一个简单的 GUI 程序，其中一个功能是从文件 ping 目标。使用普通 ping xxxx 时，我的 ping 运行良好，但是当使用 -t 命令运行它时，我注意到即使关闭命令窗口 ping.exe 仍然显示在进程列表中。我知道可以使用 ctrl+c 结束该过程，但是当用户关闭 cmd 窗口时，是否有其他方法可以结束该过程？

我目前正在使用此代码：

```
try {
            ipPing = VNC.getIp().concat(ext);
            String command = "ping " + ipPing;
            Runtime rt = Runtime.getRuntime();
            rt.exec(command);
            rt.exec(new String[]{"cmd.exe", "/C", "\"start;" + command + "\""});

        } catch (IOException e) {
        } 
```

任何建议和提示将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:01:59.297

我不确定它是否有效，但您可以尝试[Process.destroy()](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html#destroy%28%29)。像这样的东西：

```
ProcessBuilder pb = new ProcessBuilder("cmd.exe", "/C", "\"start;" + command + "\"");
Process p = pb.start();
//...
p.destroy(); 
```

另外，不要写空的 catch 块：

```
} catch (IOException e) {
} 
```

因为如果抛出异常，将很难注意到。当然，除非您知道可以忽略该异常。

更新：

linux 操作系统的概念证明：

```
public static void main(String[] args) throws IOException {
    ProcessBuilder pb = new ProcessBuilder("ping","localhost");
    pb.redirectErrorStream(true);
    Process p = pb.start();
    InputStreamReader isr = new InputStreamReader(p.getInputStream());
    int ch,count = 0;
    StringBuffer sb = new StringBuffer();
    while((ch =isr.read()) > -1) {            
        sb.append((char)ch);                
       if ((char)ch == '\n') {
          System.out.println( sb.toString());
          sb = new StringBuffer();
       }
       if (count++ == 2) {
           System.out.println("destroying process");
           p.destroy();
       }
    }        
} 
```

输出：

```
destroying process
PING localhost (127.0.0.1) 56(84) bytes of data.

Exception in thread "main" java.io.IOException: Stream closed
64 bytes from localhost (127.0.0.1): icmp_req=1 ttl=64 time=0.031 ms

at java.io.BufferedInputStream.getBufIfOpen(BufferedInputStream.java:145)
at java.io.BufferedInputStream.read(BufferedInputStream.java:308)
at sun.nio.cs.StreamDecoder.readBytes(StreamDecoder.java:264)
at sun.nio.cs.StreamDecoder.implRead(StreamDecoder.java:306)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:158)
at sun.nio.cs.StreamDecoder.read0(StreamDecoder.java:107)
at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:93)
at java.io.InputStreamReader.read(InputStreamReader.java:151)
at com.infobip.rhino.Killer.main(Killer.java:24)
Java Result: 1 
```

因为错误流被重定向到输出流，所以这些行搞砸了

# iphone - 提交到 Apple App Store。开发者帐户注册/续订

> ID：14367403
> 
> 赞同：-1
> 
> 时间：2013-01-16T20:39:15.270
> 
> 标签：iphone, ios, ios5, app-store

我已经创建了一个 phonegap 应用程序，我准备将我的免费应用程序提交到苹果应用商店。但我首先需要注册一个开发者 ID。我看到每年有 99 美元的订阅费。我的问题是这个。如果我现在提交我的应用程序并获得批准，我是否需要在明年续订 99 美元的费用才能使该应用程序保持可用？或者我可以让我的开发者 ID 过期吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:43:16.983

如果您不续订，您的应用将从商店中删除。如果您的应用程序不是免费的，也将无法向您付款。

# c++ - C++ 和结构（具有多重继承）

> ID：14367408
> 
> 赞同：5
> 
> 时间：2013-01-16T20:39:29.857
> 
> 标签：c++, struct, multiple-inheritance

我一直在研究我正在从事的项目的 C++ 和结构；目前我正在使用“链式”模板结构将数据字段添加为伪特征。

虽然它有效，但我认为我更喜欢多重继承，如下例所示：

```
struct a {
    int a_data;
}; // 'Trait' A

struct b {
    int b_data;
}; // 'Trait' B

struct c : public a, public b {
    int c_data;
}; // A composite structure with 'traits' A and B.

struct d : public b {
    int d_data;
}; // A composite structure with 'trait' B. 
```

我的实验代码示例表明它们工作正常，但是当事情变得复杂时，我对它的实际工作方式有点困惑。

例如：

```
b * basePtr = new c;
cout << basePtr->b_data << endl;
b * basePtr = new d;
cout << basePtr->b_data << endl; 
```

每次都可以正常工作，即使通过使用指针作为参数的函数调用也是如此。

我的问题是代码如何知道 b_data 存储在派生结构之一中的位置？据我所知，结构仍然使用没有额外数据的压缩结构（即 3 个 int 结构仅占用 12 个字节，2 个 int 8 个字节等）。当然，它需要某种额外的数据字段来说明 a_data 和 b_data 存储在给定结构中的位置吗？

这更像是一个好奇的问题，因为无论如何它似乎都可以工作，如果有多个实现在使用中，我会很乐意接受一个例子。虽然我确实有点担心，因为我想通过进程间消息队列传输这些结构后面的字节，并想知道它们是否会在另一端被解码（所有使用队列的程序都是由同一编译器编译并在单个平台上运行）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:49:11.567

在这两种情况下，`basePtr`真的*是*指向类型对象的指针`b`，所以没有问题。这个对象不是一个完整的对象，而是一个更衍生对象的子对象（这实际上是技术术语），这一事实并不重要。

`d *`从to`b *`和 from `c *`to的（静态、隐式）转换`b *`负责调整指针值，使其真正指向`b`子对象。所有信息都是静态已知的，因此编译器会自动进行所有这些计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:49:16.150

**[您应该在内存管理](http://en.wikipedia.org/wiki/C++_classes#Memory_consumption)**和**[类继承](http://en.wikipedia.org/wiki/C++_classes#Inheritance)**内容下阅读关于 C++ 类的维基百科值。

基本上，编译器创建类结构，因此在编译时它知道类的每个部分的偏移量。

当你调用一个变量时，编译器知道它的类型和它的结构，如果你把它转换成一个基类，它只需要跳转到右边的偏移量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T20:49:32.923

在大多数实现中，指针转换，比如 from `c*`to `b*`，将在必要时自动调整地址。在声明中

```
b * basePtr = new c; 
```

new 表达式分配一个`c`对象，该对象包含一个`a`基类子对象、一个`b`基类子对象和一个`c_data`成员子对象。在原始内存中，这可能看起来只有三个整数。new 表达式返回创建的完整`c`对象的地址，该地址（在大多数实现中）与`a`基类子对象的地址和`a_data`成员子对象的地址相同。

但是`new c`，带有 type的表达式`c*`用于初始化`b*`指针，这会导致隐式转换。编译器设置为完整对象中基类子对象`basePtr`的地址。不难，因为编译器知道从对象到其唯一子对象的偏移量。`b``c``c``b`

之后，like 表达式`basePtr->b_data`不需要知道完整的对象类型是什么。它只知道它`b_data`位于 的开头`b`，因此它可以简单地取消引用`b*`指针。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T20:49:34.510

细节取决于 C++ 实现，但在这种情况下，使用非虚拟继承，您可以这样想：

`c`有两个子对象，一个带有 type `a`，一个带有 type `b`。

当您将指向 的指针强制转换`c`为指向 的指针时`b`，编译器足够智能，因此强制转换的结果是指向原始指针所引用对象的`b`子对象的指针。`c`这可能涉及更改返回指针的数值。

通常，单继承时，子对象指针将具有与原始指针相同的数值。对于多重继承，它可能不会。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-16T21:08:30.187

是的，有一些额外的字段定义了每个子组件在聚合中的偏移量。但是它们并不存储在聚合本身中，而是最有可能（尽管关于如何做到这一点的最终选择留给编译器设计人员）存储在位于数据段隐藏侧的辅助结构中。

你的对象不是多态的（你错误地使用了它们，但我稍后会谈到），而只是像这样的化合物：

```
c[a[a_data],b[b_data],c_data];
            ^
            b* points here 

d[b[b_data],d_data]
  ^
  b* points here 
```

（请注意，实际布局可能取决于特定的编译器甚至使用的优化标志）

`b`开头相对于开头的偏移量`c`或`d`不依赖于特定对象实例，因此它不是保留在对象中所需的值，而只是在编译器已知但不一定可用的一般描述`d`中`c`你。

编译器知道，给定 a`c`或 a `d`，`b`组件从哪里开始。但是给定 a`b`无法知道它是在 a`d`还是 a内`c`。

您错误地使用对象的原因是您不关心它们的破坏。您将它们分配给`new`，但之后从未`delete`-ed 它们。

而且您不能只是调用`delete baseptr`，因为`b`子组件中没有任何内容可以告诉聚合它实际上是（在运行时）的一部分。

有两种编程风格可以解决它：

*   经典的 OOP，假设实际类型在运行时是已知的，并假装所有类都有一个`virtual`析构函数：它为所有结构提供了一个额外的“ghost”字段（v-table 指针，指向“辅助描述符”，包含所有虚函数的地址），使发起的析构函数调用`delete`实际上被分派到最派生的那个（因此 delete`pbase`将实际调用`c::~c`或`d::~d`取决于实际对象）

*   泛型编程风格，假设您以其他方式（很可能从模板参数）知道实际的派生类型，所以您不会`delete pbase`，而是`static_cast<actual_derived_class*>(pbase)`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-16T21:27:55.907

继承是一种方法的抽象，用于重用其下另一个类的函数。如果该方法位于其下方的类中，则可以从该类中调用该方法。结构使您能够像在数据结构中一样拥有变量，类似于使用变量或函数的类。

```
class trait
{
  //variable definition 
  //variable declaration

  function function_name(variable_type variable_name, and more)
  {
    //operation on variables in function call
  }

  variable_name = function_name(variable_name);

  struct struct_name
  { 
    //variable definition
  }

  struct_name = {value_1, value_2, and more}

  operation on struct_name.value_1
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-17T03:46:11.973

编译时知识和运行时知识是有区别的。编译器的部分工作是尽可能多地使用编译时信息，以避免必须在运行时执行操作。

在这种情况下，每条数据在给定类型中的确切位置的所有细节在编译时都是已知的。所以编译器不需要在运行时知道它。每当您访问特定成员时，它只会使用其编译时知识来计算您需要的数据的适当偏移量。

指针转换也是如此。它将在转换指针值时调整指针值，以确保该点位于适当的子部分。

这样做的部分原因是来自单个类或结构的数据值永远不会与类定义中未提及的任何其他数据值交错，即使该结构是另一个结构的子组件，无论是通过组合还是继承. 因此，任何单个结构的相对布局总是相同的，无论它在内存中的哪个位置找到。

# erlang - erlang中基于字符串格式的匹配函数

> ID：14367409
> 
> 赞同：2
> 
> 时间：2013-01-16T20:39:30.043
> 
> 标签：erlang

我有来自外部来源的用户信息，我需要检查该用户是否处于活动状态。有时我有一个用户和一个服务器，有时我有用户@服务器。前一种情况没问题，我只有：

```
active(User, Server) ->
    do whatever. 
```

我想对 User@Server 案例做的事情是这样的：

```
active([User, "@", Server]) ->
    active(User, Server). 
```

似乎不起作用。例如，当使用 a@b 在 erlang 终端中调用 active 时，我收到一个错误，即不匹配。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:57:18.143

您可以对字符串进行标记以获得结果：

```
active(UserString) ->
    [User,Server] = string:tokens(UserString,"@"),
    active(User,Server). 
```

如果您需要更详细的内容，或者更好地处理电子邮件地址等内容，那么可能是时候深入研究在`re`模块中使用正则表达式了。

```
active(UserString) ->
    RegEx = "^([\\w\\.-]+)@([\\w\\.-]+)$",
    {match, [User,Server]} = re:run(UserString,RegEx,[{capture,all_but_first,list}]),
    active(User,Server). 
```

**注意：**提供的正则表达式*不足以*验证电子邮件地址，它只是一个示例，它允许所有字母数字字符包括下划线 ( `\\w`)、点 ( `\\.`) 和破折号 ( `-`)，由 at 符号分隔。如果匹配没有拉伸字符串的整个长度，它将失败：（`^`到`$`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T23:37:10.460

关于模式匹配的注释，对于您的问题的真正解决方案，我认为应该使用@chops 建议。

在将模式与字符串匹配时，我认为记住 erlang 字符串实际上是整数列表很有用。所以字符串`"@"`实际上是相同的`[64]`（64 是 ascii 代码`@`）

这意味着您匹配模式`[User, "@", Server]`将匹配类似的列表：`[97,[64],98]`，但不匹配`"a@b"`（列表形式为`[97,64,98]`）。

要匹配你需要做的字符串`[User,$@,Server]`。运算符为您提供字符的`$`ascii 值。

但是，此匹配模式将匹配字符串限制为 1 个字符`@`，然后是一个字符...

可以通过`[User, $@ | Server]`允许服务器部分具有任意长度来改进它，但该`User`变量仍将仅匹配一个字符（我看不到解决方法）。

# android - 如何直接从网络上的 CSV 导入

> ID：14367413
> 
> 赞同：1
> 
> 时间：2013-01-16T20:39:39.233
> 
> 标签：android, networking, csv

我以前在这个论坛上有点活跃，但我变得很忙，没有时间再编程了，反正我现在又回到了它，我需要一些帮助......

我将如何让我的应用程序从位于我的网络上的 CSV 文件中获取实时统计信息...... CSV 文件大约每分钟更新一次，所以我需要一种直接从网络读取的方法......程序还必须对 csv 文件进行排序，并且只提取某些值，但是在我弄清楚这个问题之后，我会担心这方面的问题。有人可以帮忙吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:56:33.693

~~假设您对 Web 服务器上的文件感兴趣。~~ 您在这里有 2 个解决方案。制作你的 G: 驱动网络共享或安装 Apache for windows 并使用我的代码派生从网络服务器获取 csv 文件。

网络共享路由：

您的 Android 设备需要像 AndSMB 这样的 Samba 客户端。这将用于从您的 Windows 框中安装共享驱动器并将文件复制到您的设备。然后，您需要像打开其他文件一样打开该文件。使用此 Q/A 作为起点：[在 android 中从 sdcard 读取特定文件](https://stackoverflow.com/questions/3779944/reading-a-specific-file-from-sdcard-in-android)

阿帕奇路线：

安装和配置 Apache：[http ://httpd.apache.org/docs/2.2/platform/windows.html](http://httpd.apache.org/docs/2.2/platform/windows.html)

这应该适合您想要做的事情。你的调用者会实现类似于我的回调的东西。调用者实例化实现 AsyncTask 的类。这用于使网络流量远离主 GUI 线程。如果不这样做，您将在 3.0(?) 及更高版本上遇到问题。根据您的需要对代码进行切片和切块。~~我真的需要把它作为一个项目放在 github 上。~~该项目适用于需要完整代码的任何人：[https ://github.com/nedwidek/Android-Rest-API](https://github.com/nedwidek/Android-Rest-API)

打回来：

```
package com.hatterassoftware.restapi;

import java.net.URL;
import java.util.HashMap;

import android.os.AsyncTask;
import android.util.Log;

/**
 * An AsyncTask implementation for performing POSTs on the Hypothetical REST APIs.
 */
public class GetTask extends AsyncTask<String, String, HttpReturn>{
    private String restUrl;
    private RestCallback callback;
    private HashMap<String, String> headers;
    private String username;
    private String password;

    final String TAG = "GetTask";

    /**
     * Creates a new instance of PostTask with the specified URL, callback, and
     * request body.
     * 
     * @param restUrl The URL for the REST API.
     * @param callback The callback to be invoked when the HTTP request
     *            completes.
     * @param requestBody The body of the POST request.
     * 
     */
    public GetTask(String restUrl, RestCallback callback, HashMap<String, String> headers, String username, String password){
        this.restUrl = restUrl;
        this.callback = callback;
        this.headers = headers;
        this.username = username;
        this.password = password;
    }

    @Override
    protected HttpReturn doInBackground(String... params) {
        try {
            RestHttpUrlConnection request = new RestHttpUrlConnection(new URL(restUrl), headers, username, password);
            return request.doGetRequest();
        } catch (Throwable t) {
            Log.e(TAG, "Exception in doInBackground", t);
            return new HttpReturn(new RestException(t));
        }
    }

    @Override
    protected void onPostExecute(HttpReturn result) {
        Log.d(TAG, "Entered onPostExecute");
        Log.d(TAG, "result.status = " + result.status);
        Log.d(TAG, "result.content = " + result.content);
        callback.onTaskComplete(result);
        super.onPostExecute(result);
    }
}
package com.hatterassoftware.restapi;

import java.net.URL;
import java.util.HashMap;

import android.os.AsyncTask;
import android.util.Log;

/**
 * An AsyncTask implementation for performing POSTs on the Hypothetical REST APIs.
 */
public class GetTask extends AsyncTask<String, String, HttpReturn>{
    private String restUrl;
    private RestCallback callback;
    private HashMap<String, String> headers;
    private String username;
    private String password;

    final String TAG = "GetTask";

    /**
     * Creates a new instance of PostTask with the specified URL, callback, and
     * request body.
     * 
     * @param restUrl The URL for the REST API.
     * @param callback The callback to be invoked when the HTTP request
     *            completes.
     * @param requestBody The body of the POST request.
     * 
     */
    public GetTask(String restUrl, RestCallback callback, HashMap<String, String> headers, String username, String password){
        this.restUrl = restUrl;
        this.callback = callback;
        this.headers = headers;
        this.username = username;
        this.password = password;
    }

    @Override
    protected HttpReturn doInBackground(String... params) {
        try {
            RestHttpUrlConnection request = new RestHttpUrlConnection(new URL(restUrl), headers, username, password);
            return request.doGetRequest();
        } catch (Throwable t) {
            Log.e(TAG, "Exception in doInBackground", t);
            return new HttpReturn(new RestException(t));
        }
    }

    @Override
    protected void onPostExecute(HttpReturn result) {
        Log.d(TAG, "Entered onPostExecute");
        Log.d(TAG, "result.status = " + result.status);
        Log.d(TAG, "result.content = " + result.content);
        callback.onTaskComplete(result);
        super.onPostExecute(result);
    }
}

package com.hatterassoftware.restapi;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.DataOutputStream;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.OutputStreamWriter;
import java.net.Authenticator;
import java.net.HttpURLConnection;
import java.net.PasswordAuthentication;
import java.net.ProtocolException;
import java.net.URL;
import java.util.HashMap;

import android.util.Base64;
import android.util.Log;

public class RestHttpUrlConnection {

    private HttpURLConnection connection;

    final String TAG = "RestHttpUrlConnection";

    protected RestHttpUrlConnection(URL url, HashMap<String,String> headers, final String username, final String password) throws IOException {
        connection = (HttpURLConnection) url.openConnection();

        if(headers != null) {
            for(String key: headers.keySet()) {
                Log.d(TAG, "Adding header: " + key + "; " + headers.get(key));
                connection.addRequestProperty(key, headers.get(key));
            }
        }

        if(username != null) {
            String auth = "Basic " + Base64.encodeToString((username + ":" + password).getBytes(), Base64.DEFAULT);

            connection.addRequestProperty("Authorization", auth);
        }
    }

    public HttpReturn doPostRequest(String postData) throws IOException {
        return doPostOrPut(true, postData);
    }

    public HttpReturn doGetRequest() throws IOException {
        return doGetOrDelete(true);
    }

    public HttpReturn doPutRequest(String putData) throws IOException {
        return doPostOrPut(false, putData);
    }

    public HttpReturn doDeleteRequest() throws IOException {
        return doGetOrDelete(false);
    }

    private HttpReturn doGetOrDelete(boolean isGet) throws ProtocolException, IOException {
        if (isGet) {
            connection.setRequestMethod("GET");
        } else {
            connection.setRequestMethod("DELETE");
        }

        String line;
        StringBuffer output = new StringBuffer(1024);
        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            while ((line = in.readLine()) != null) output.append(line);
        } catch (Exception e) {
            HttpReturn httpReturn = new HttpReturn(connection.getResponseCode(), output.toString());
            httpReturn.restException = new RestException(e);
            return httpReturn;
        }

        return new HttpReturn(connection.getResponseCode(), output.toString());
    }

    private HttpReturn doPostOrPut(boolean isPost, String data) throws ProtocolException, IOException {
        connection.setDoOutput(true);
        connection.setDoInput(true);
        connection.setInstanceFollowRedirects(false);
        connection.setFixedLengthStreamingMode(data.getBytes().length);
        if (isPost) {
            connection.setRequestMethod("POST");
        } else {
            connection.setRequestMethod("PUT");
        }

        DataOutputStream out = new DataOutputStream(connection.getOutputStream());
        out.writeBytes(data);
        out.flush();
        out.close();

        connection.connect();

        String line;
        StringBuffer output = new StringBuffer(1024);
        try {
            BufferedReader in = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            while ((line = in.readLine()) != null) output.append(line);
        } catch (Exception e) {
            HttpReturn httpReturn = new HttpReturn(connection.getResponseCode(), output.toString());
            httpReturn.restException = new RestException(e);
            return httpReturn;
        }

        return new HttpReturn(connection.getResponseCode(), output.toString());     
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:46:58.247

使包含 csv 的磁盘可用于您的设备，以便您可以使用类似的 url

```
http://192.168.1.1/some.csv (run a webserver like apache)
or 
file://somedrive/somedir/some.csv (mount the disk). 
```

然后解析 csv 并存储您所追求的数据。

在那之后睡 X 分钟，然后重新调用你的打开/解析函数。实际上，您的程序现在将无限循环，直到您告诉它停止或退出应用程序。

希望这可以帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:54:23.167

假设您的 CSV 文件可以通过 HTTP(S) 访问，您可以使用它`HTTPURLConnection`来访问资源，通过对象的`getBody()`方法提取数据`Response`。假设您不需要在之前或之后同步更新 UI，您可以将其实现为新的`Runnable`，然后调用`start()`它。否则，您将需要阅读[AsyncTask](https://androidresearch.wordpress.com/2012/03/17/understanding-asynctask-once-and-forever/)。

对于轮询行为，您需要表达您的等待条件（即它是否在 Activity 运行时一直这样做；它是否需要在后台运行？它应该在*x*尝试后停止还是在*y*为真时停止，等等.) 但您可以`sleep()`在进行网络活动之前调用线程。

抱歉，如果答案含糊不清 - 听起来您正在寻找一些基本的指向正确的方向。否则，请发布有关您需要的更多详细信息...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T20:55:13.570

您是否有机会发布本地 Web 服务器并将 csv 文件下载到设备？下载后，您可以相应地读取和解析文件。

在我看来，你应该在你的 Android 应用程序中创建一个服务，它会休眠 X 分钟然后恢复工作。您还可以通过 IntentService 完成工作并使用 AlarmManager 编写警报。在任何这些情况下，您都可以通过 ResultReceivers 更新屏幕（活动）。

希望能帮助到你。

如果可以，请更具体地说明您想要实现的应用行为，以便为您提供更好的指导。

# sql-server-2005 - 输出参数在 SQL Server 2005 中给出不同的结果

> ID：14367422
> 
> 赞同：0
> 
> 时间：2013-01-16T20:40:20.707
> 
> 标签：sql-server-2005

我已经存储了 proc，我在其中调用了另一个存储的 proc。

```
 Declare @itemNumber varchar(20),@productID int
 EXEC usp_find_productID
    @itemNumber = '35677',
    @productID = @productID OUTPUT 
```

此 sp 在变量 @productID 中返回 productID，但也作为结果集表返回。有人能告诉我为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:48:21.570

我敢打赌你会在存储过程中找到类似的东西：

```
SELECT @ProductID 
```

而且两台服务器上的存储过程实际上是不同的。

当然我们不能说，因为你没有发布重要的部分（实际的存储过程代码）。

# css - 找不到要修改的正确 CSS

> ID：14367424
> 
> 赞同：0
> 
> 时间：2013-01-16T20:40:28.077
> 
> 标签：css, drupal

我正在使用 Drupal 7 构建一个站点并且遇到了 CSS 问题。我试图将这个注册页面上的所有内容都包装在中心，同时减小下拉按钮的宽度。我相信我已经将问题缩小到我的 logintobaggan（drupal 模块）css 表。但是按钮“宽度”似乎来自foundation.min.css（根据chrome元素）。你们将如何解决这个 CSS 问题？我比较新，所以请不要太苛刻;)。谢谢！

[http://medicaldoctorapps.com/user/register](http://medicaldoctorapps.com/user/register)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:44:55.010

我会得到 Firebug 或类似的浏览器内开发工具，选择您有兴趣查看其 CSS 属性的元素，然后准确查看正在应用或覆盖哪些规则。您甚至可以在工具中修改 CSS，直到您想要为止。

从这样的工具中，我可以看到按钮宽度没有明确定义，而是基本上来自按钮内文本字符串周围的填充量（5px）。

从该文件的第 41 行开始定义规则：

[http://medicaldoctorapps.com/sites/all/modules/logintoboggan/logintoboggan.css?mgqhxk](http://medicaldoctorapps.com/sites/all/modules/logintoboggan/logintoboggan.css?mgqhxk)

# nginx - nginx + magento 无法编辑类别

> ID：14367425
> 
> 赞同：1
> 
> 时间：2013-01-16T20:40:31.310
> 
> 标签：nginx, magento-1.7

Magento 版本。1.7.0.2

**问题**

我无法在 nginx 实例上运行的 magento 中编辑/删除类别。有没有人遇到过这样的问题，谷歌搜索出现了不起作用的解决方案。

*Nginx 配置*

```
server {

    listen       80;
    server_name  localhost;
    client_max_body_size 20M;

    access_log log/access.log main;
    error_log log/error.log;

    root   /www/public_html;

    index index.php index.html index.htm;

    gzip on;
    gzip_disable "msie6";

    gzip_comp_level 6;
    gzip_min_length  1100;
    gzip_buffers 16 8k;
    gzip_proxied any;
    gzip_types text/plain application/xml text/css text/js text/xml application/x-javascrip text/javascript application/json application/xml+rss;

    location / {
      try_files $uri $uri/ @handler;
      expires 30d;
    }

   include web_default_params;

   location ^~ /includes/           { deny all; }
   location ^~ /lib/                { deny all; }
   location ^~ /media/downloadable/ { deny all; }
   location ^~ /pkginfo/            { deny all; }
   location ^~ /report/config.xml   { deny all; }
   location ^~ /var/                { deny all; }

   location @handler {
        rewrite ^(.*) /index.php?$1 last;
   }

   location ~ \.php$ {
        include fastcgi_params;
        fastcgi_pass backend-php;
        fastcgi_split_path_info ^(.+\.php)(/.*)$;
        fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
        fastcgi_param QUERY_STRING $query_string;
        fastcgi_param PATH_INFO $fastcgi_script_name;
        fastcgi_param  HTTPS off;
   }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-17T06:47:17.387

更改以下配置后

```
location @handler {
  rewrite ^(.*) /index.php?$1 last;
} 
```

至

```
 location @handler { 
      rewrite / /index.php;
   } 
```

并包括以下内容（## 转发路径，如 /js/index.php/x.js 到相关处理程序）

```
 location ~ \.php/ { 
      rewrite ^(.*\.php)/ $1 last;
   } 
```

问题消失了

# python - 检查 Pip-Install 模块是否安装正确

> ID：14367432
> 
> 赞同：2
> 
> 时间：2013-01-16T20:41:11.640
> 
> 标签：python, pip

如何检查“pip-install”模块是否安装正确？我想我前一段时间安装了它，但是当我输入 pip 时，`install scikit-learn`我收到了“无效语法”消息。我正在使用 Python 2.7，Vista 32 位。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:45:32.293

最简单的smoketest是：启动python命令行，导入包。

# show-hide - 单击链接以隐藏所有其他内容 div

> ID：14367438
> 
> 赞同：1
> 
> 时间：2013-01-16T20:41:30.363
> 
> 标签：show-hide

示例：（werkwijze 是自定义的，我也有与其他名称相同的代码，例如 -contact）

```
 $(function() {
        $('#activator-werkwijze').click(function(){
            $('#overlay-werkwijze').fadeIn('fast',function(){
                $('#box-werkwijze').animate({'bottom':'0px'},800);
            });
        });
        $('#boxclose-werkwijze').click(function(){
            $('#box-werkwijze').animate({'bottom':'-600px'},800,function(){
                $('#overlay-werkwijze').fadeOut('fast');
            });
        });
    }); 
```

activator 显示内容，boxclose 关闭内容。单击所有激活器会打开所有内容，而它只需要打开一个并关闭其他..

编辑得到它修复：这是有效的脚本，（覆盖是无用的）jsfiddle.net/8y7Sr/126/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:53:27.427

您需要提供有关如何调用弹出脚本的更多信息。如果您使用的是 jquery，您可以关闭所有然后打开一个

```
$('.className').slideDown(200);
$('#specificItem').slideUp(200); 
```

但同样，你应该更详细地解释你是如何打电话的，以获得更好的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:56:04.157

例如，放入函数 jQuery

if($('.hide').css('display')=='block'){ $('.hide').slideUp(); }else{ $('.hide').slideDown(); }

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-20T11:20:48.047

```
$(function() {
    $('.activator').each(function(){
        $(this).click(function(){
            showHideAnimation(clickedObj);
        });
    });
}

function showHideAnimation(clickedObj)
{
    $('.activator').each(function(){
        if($(this).id == clickedObj.id) {
            $(this).fadeIn('fast',function(){
                $(this).animate({'bottom':'0px'},800);
            });
        } else {
            $(this).animate({'bottom':'-600px'},800,function(){
                $(this).fadeOut('fast');
            });
        }
    }
} 
```

如果它不能正常工作，请尝试这个，然后只用**这个替换****$(this)**

# vim - 在命令模式下将 :E 映射到 :Explore？

> ID：14367440
> 
> 赞同：20
> 
> 时间：2013-01-16T20:41:34.273
> 
> 标签：vim

我怎样才能映射`:E`到`:Explore`？我已经安装了一个扩展，`E464: Ambiguous use of user-defined command`如果我`:E`现在这样做的话，但我的手指不会忘记命令！

我试过`map :E :Explore`了，但这很难看，因为它使访问其他命令变得困难。

我试过这些：

```
cmap :E<CR> :Explore<CR>
cmap :E^M :Explore^M 
```

（其中`^M`= control-v + enter）但是除非我真的非常快地按Enter，否则这些不起作用。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-01-16T20:45:57.387

`:E`通常就足够了，就好像`:Explore`唯一一个以 . 开头的已定义命令一样`E`。您显然定义了多个这样的命令，因此`:E`模棱两可并导致错误。

`:cmap`导致立即的文字替换，因此具有不需要的副作用。一个稍微好一点的替代方法是`:cabbrev`，它可以用来定义命令模式的缩写：

```
cabbrev E Explore 
```

这会触发跟随`E``Enter`or `E``Space`。前者是需要的，因为键入`:``E``Enter`会调用`:Explore`，但后者在命令模式下再次具有副作用。

为了`:E`正确地别名为`:Explore`，它必须定义为一个单独的命令：

```
command! E Explore 
```

但是，`:command E`列出了所有以 开头的已定义命令`E`，揭示了这一点`:E`并`:Explore`具有不同的属性。例如，`:E ~`由于`:E`不接受任何参数，因此无法执行。此外，与 不同的是`:Explore`，`:E`不会自动完成目录。

为了弥补这些缺陷，`:E`必须以完全相同的方式定义`:Explore`. Executing显示了在其中定义`:verbose command Explore`的脚本的位置；然后可以以相同的方式定义，并添加：`:Explore``:E``<args>`

```
command! -nargs=* -bar -bang -count=0 -complete=dir E Explore <args> 
```

虽然可以从 提供的信息中推断出大部分这些属性`:command Explore`，但仍然可能存在差异，例如`-bar`在这种情况下。

注意 如果`:Explore`和`:Example`被定义，`:Exp`并且`:Exa`是可以使用的最短的明确命令。`:E`如上所述，显式别名为其中之一会覆盖 Vim 的默认行为并允许消除歧义。但是，`:Ex`仍然会模棱两可。

# c# - C#：从文件路径（字符串）初始化 HttpPostedFileBase

> ID：14367443
> 
> 赞同：0
> 
> 时间：2013-01-16T20:41:37.527
> 
> 标签：c#, file, path, httppostedfilebase

我有一个路径（存储为字符串） - 例如`\\documents\doc1.txt`. 我正在尝试使用字符串路径表示的文件初始化 HttpPostedFileBase 类型的变量。请问我该怎么做？我看过像这样的方法

```
 Model.File[count] = File.Open(item.PictureDirectory, FileMode.Open); 
```

但这些返回 System.io.filestream 对象。

```
FileStream file = File.OpenRead(filepath); 
```

但是如何将其转换为 httppostedfilebase？

我正在尝试完全按照[此处发布的内容](https://stackoverflow.com/q/12672447/807223)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:15:28.660

首先，在另一个问题链接中，有一个需要 a`HttpPostedFileBase`作为输入的方法，然后要求您发送一个*不会*自动传输为 a的文件`HttpPostedFileBase`，这表明您需要重构该方法。在 Pommy 的示例中，也许输入`Stream`会更合适？

现在，如果你绝对必须有一个 的实例`HttpPostedFileBase`，这就是你要面对的。[该类是 abstract](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilebase.aspx)，因此您永远不会直接构造它。相反，您需要构造一个继承类。在标准库中，`HttpPostedFileWrapper`继承并`HttpPostedFile`作为[构造函数输入](http://msdn.microsoft.com/en-us/library/system.web.httppostedfilewrapper.httppostedfilewrapper.aspx)。

但问题是，构造函数`HttpPostedFile`是内部的，所以在 System.Web 库之外，您不是直接构造实例。

那么，您的选择是：

1.  在 System.Web 中找到一个工厂或其他方法，它们将为您构造一个 HttpPostedFile 实例（我怀疑您不会找到那个）。
2.  实现你自己的继承类 base `HttpPostedFileBase`。这应该很简单，它只是一个小类，并且根据您使用它的代码，您甚至可能不必实现所有方法。
3.  如果可能的话，我推荐的方法 - 重构您的代码以*不*使用`HttpPostedFileBase`，然后`Stream`改用。

# javascript - 如何隐藏 onclick 动作？

> ID：14367445
> 
> 赞同：1
> 
> 时间：2013-01-16T20:41:41.967
> 
> 标签：javascript, html, onclick

如何编辑代码，使 OnClick 功能自动工作？这是代码：

```
<form name="statusUpdate" action="" method="">
        <textarea style="width:0; height: 0;" name="status" id="status" readonly>VARIABLE 1  http://bit.ly/VxwZWv </textarea>
        <br />
        <input type="button" onclick="updateStatusViaJavascriptAPICalling(); return false;" value="KLIKNIJ, ABY ROZPOCZAC" />
    </form> 
```

和功能：

```
 function updateStatusViaJavascriptAPICalling(){
            var status  =   document.getElementById('status').value;
                FB.api('/me/feed', 'post', { message: status }, function(response) {
                    if (!response || response.error) {
                         alert('Error occured');
                    } else {
                         alert('Ok. Teraz w menu wybierz opcje GENERUJ ');
                    }
               });
        } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T20:51:44.370

没有**jQuery：**

```
<body onload="javascript:function();"> 
```

**或者**

```
<head>
    <script type="text/javascript">
        window.onload=function(){
        };
    </script>
</head> 
```

或者，如果使用 jquery，只需将其放在您的 document.ready 函数中，然后它将发生在页面加载而不是按钮单击时。

如果您希望该按钮存在并被隐藏，则没有人可以单击它...但是您可以使用隐藏的输入来执行此操作，然后“有时”运行该功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:47:29.340

将 onload 属性添加到 HTML Body 标记：

```
<body onload="updateStatusViaJavascriptAPICalling();"> 
```

# .net - C# Math.Pow() 坏了

> ID：14367448
> 
> 赞同：5
> 
> 时间：2013-01-16T20:41:51.120
> 
> 标签：.net, math, floating-point, pow, exponent

不，这不（据我了解）涉及整数除法或浮点舍入问题。

我的确切代码是：

```
 static void Main(string[] args)
    {
        double power = (double)1.0 / (double)7.0;
        double expBase = -128.0;
        System.Console.WriteLine("sanity check: expected: -128 ^ 0.142857142857143 = -2\.    actual: " + expBase + " ^ " + power + " = " + Math.Pow(expBase, power));
        System.Console.ReadLine();
    } 
```

输出是：

`sanity check: expected: -128 ^ 0.142857142857143 = -2\. actual: -128 ^ 0.14285 7142857143 = NaN`

此代码的目标框架是（根据解决方案属性）.NET Framework 4.0 Client Profile。

奇怪的是，我在网络上的任何地方都没有找到任何提及这一点。我在这里吃疯药吗！？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-16T20:46:23.443

似乎与指定的完全一样；来自[Math.Pow() 的备注](http://msdn.microsoft.com/en-us/library/system.math.pow.aspx)部分`Pow(x,y)`；

> 参数
> x < 0 但不是 NegativeInfinity；y 不是整数、NegativeInfinity 或 PositiveInfinity。
> 
> 结果
> NaN

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-16T20:47:06.637

**Joachim**的回答解释说 pow 的行为符合其规范。

为什么 pow() 是这样指定的？因为`1.0/7.0`不等于1/7。您要求 的`0.14285714285714285`幂`-128.0`，并且该属性没有实数，因此结果正确为 NaN。对于所有的奇数`n != 1`,`1.0/(double)n`不能完全表示，因此您不能使用 来计算 x 的第 n 个根`pow(x, 1.0/(double)n)`。因此`pow(x, y)`指定为负 x 和非整数 y 返回 NaN - 对于任何这些情况都没有适当的实际结果。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T21:08:23.930

这里的问题是“第七根”的数学定义是一个[多值函数](http://mathworld.wolfram.com/MultivaluedFunction.html)。虽然这是真的

> (-2) ⁷ = -128

这并不*意味着*-2 是 (-128) ^(1/7)的唯一答案。在复平面中，七次方根函数是多值的并且有许多可能的答案（就像 4 的平方根可以被认为是 +2 或 -2，但 +2 是通常的答案）。

为了简化此类表达式的数学处理，按照惯例为所讨论的函数选择[主值](http://mathworld.wolfram.com/PrincipalValue.html)，以便函数变为单值。在七根的情况下，主要值是[Wolfram Alpha 为 (-128) ^(1/7)](https://www.wolframalpha.com/input/?i=%28-128%29%5E%281%2F7%29)给出的值。

C# 中的`Math.Pow()`函数尝试返回函数的主体值`pow`。当结果的主要值是复数时，它返回`NaN`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T20:49:45.150

负实数的分数幂是复数（详细解释请参见[数学论坛）。](http://mathforum.org/library/drmath/view/62979.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-24T21:09:32.963

我修复了 Math.Pow()。

它现在有一个更大的接受域（即对于参数：x < 0 但不是 NegativeInfinity；y 是分子为 1 和奇数分母的分数），并返回新域区域的实数结果。

换句话说，(-128)^(1/7) 返回 -2。

注意：由于双浮点精度限制，它适用于大多数（但不是全部）小数指数。

下面是我编写的 Math.Pow() 包装器的代码。

```
public class MathUtil
{
    /// <summary>
    /// Wrapper for Math.Pow()
    /// Can handle cases like (-8)^(1/3) or  (-1/64)^(1/3)
    /// </summary>
    public static double Pow(double expBase, double power)
    {
        bool sign = (expBase < 0);
        if (sign && HasEvenDenominator(power)) 
            return double.NaN;  //sqrt(-1) = i
        else
        {
            if (sign && HasOddDenominator(power))
                return -1 * Math.Pow(Math.Abs(expBase), power);
            else
                return Math.Pow(expBase, power);
        }
    }

    private static bool HasEvenDenominator(double input)
    {
        if(input == 0)
            return false;
        else if (input % 1 == 0)
            return false;

        double inverse = 1 / input;
        if (inverse % 2 < double.Epsilon)
            return true;
        else
            return false;
    }

    private static bool HasOddDenominator(double input)
    {
        if (input == 0)
            return false;
        else if (input % 1 == 0)
            return false;

        double inverse = 1 / input;
        if ((inverse + 1) % 2 < double.Epsilon)
            return true;
        else
            return false;
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-04-21T10:09:49.857

对于 1.0/3 != 1/3 ，我使用 Rational 可以准确表示 Microsoft.SolverFoundation.Common 中的 1/3 。请参阅：[https ://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.common .rational%28v=vs.93%29.aspx?f=255&MSPPError=-2147217396](https://msdn.microsoft.com/en-us/library/microsoft.solverfoundation.common.rational%28v=vs.93%29.aspx?f=255&MSPPError=-2147217396)

而且我可以捕获 1/3 的奇数根链接，因为我可以获得分母。

如果我得到一个根是斧头，我使用代码获取分子和分母。

```
 var at = (double)ax.Numerator;
            var down = (double)ax.Denominator; 
```

有理可以使2/6=1/3。

但是 Rational.Pow 不能计算 powerBase 不是正数。

我发现 powerBase 不是正数，分母是偶数，分子是奇数。

```
 if (at % 2 == 1 && down % 2 == 0)
            {
                return Double.NaN;
            } 
```

如果分母是奇数，我使用`x = x * -1`

```
 if (at % 2 == 1 && down % 2 == 1)
            {
                x = Math.Pow(x, (int)at);
                x = x * -1;
                return -1 * Math.Pow(x, 1.0 / (int)down);
            } 
```

如果 Numerator 是偶数，则 Numerator 的 pow 使得 powerBase 为正。

与 pow(x,2/3) 一样，如果 x 不是正数，则使用 pow(x,2) 时为正数

```
 x = Math.Pow(x, (int)at);
            return Math.Pow(x, 1.0 / (int)down); 
```

您可以使用的代码

```
 if (x < 0)
        {                
            var at = (double)ax.Numerator;
            var down = (double)ax.Denominator;

            if (at % 2 == 1 && down % 2 == 0)
            {
                return Double.NaN;
            }
            if (at % 2 == 1 && down % 2 == 1)
            {
                x = Math.Pow(x, (int)at);
                x = x * -1;
                return -1 * Math.Pow(x, 1.0 / (int)down);
            }
            x = Math.Pow(x, (int)at);
            return Math.Pow(x, 1.0 / (int)down);
        }
        else
        {
            return Math.Pow(x, a);
        } 
```

# video - 在 x86 架构上写入板载视频内存？

> ID：14367450
> 
> 赞同：3
> 
> 时间：2013-01-16T20:42:07.333
> 
> 标签：video, graphics, hardware

我想通过直接写入板载视频硬件来测试我的真实硬件。

我怎么做？

这是针对我自己的操作系统项目的，它必须直接针对我的板载显卡，而不是任何`nVidia`卡等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:46:13.133

您可以从地址开始直接写入为 EGA/VGA 标准化的内存地址

> A000:0000

[http://en.wikipedia.org/wiki/Video_Graphics_Array#Addressing_details](http://en.wikipedia.org/wiki/Video_Graphics_Array#Addressing_details)

模式 X 允许比 VGA 兼容硬件上的 VGA 标准支持的分辨率稍高一些。

[http://en.wikipedia.org/wiki/Video_Graphics_Array#Programming_tricks](http://en.wikipedia.org/wiki/Video_Graphics_Array#Programming_tricks)

如果您的 BIOS 支持 VESA，您可以使用 VESA BIOS 调用来设置扩展视频模式

[http://en.wikipedia.org/wiki/VESA_BIOS_Extensions](http://en.wikipedia.org/wiki/VESA_BIOS_Extensions)

有详细介绍 VESA 编程（即使是摘要也太广泛，无法在此处的答案中包含），它提供了开始使用 VESA 模式编程所需的几乎所有内容

[http://www.monstersoft.com/tutorial1/VESA_intro.html](http://www.monstersoft.com/tutorial1/VESA_intro.html)

# heroku - Heroku 不使用 Unicorn 和 Rails 2.3 应用程序提供静态/公共文件夹

> ID：14367454
> 
> 赞同：5
> 
> 时间：2013-01-16T20:42:11.783
> 
> 标签：heroku, assets, unicorn, cedar

我已经能够让 Unicorn 在 Heroku 的 Cedar Stack 上使用我的 Rails 2.3 应用程序正确启动，但是，它不能从公共文件夹中正确地提供静态资产。我尝试将这一行放在我们的 config/environments/production.rb 中：

```
config.serve_static_assets = true 
```

但是随后我们的应用程序无法正确加载。没有它，应用程序启动正常，只是不提供静态文件。那行代码与 Rails 2.3 不兼容吗？

对于具有相同配置的人的注意事项，请确保在您的应用程序根目录中创建一个 config.ru。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-03T19:24:22.553

只是预感，但请查看[Heroku Ruby 支持文档的注入插件部分](https://devcenter.heroku.com/articles/ruby-support#injected-plugins)。它讨论了一个可以通过在应用程序初始化后注入此配置来解决此问题的 gem。

# c# - C# 在运行时访问对象属性

> ID：14367459
> 
> 赞同：1
> 
> 时间：2013-01-16T20:42:41.620
> 
> 标签：c#, object, reflection

![在此处输入图像描述](../Images/1805e22b677a750daa98dbb7c99fb49c.png)

我正在调用返回此对象的 Web 服务。我知道我应该在 C# 中使用对象反射来访问`sentBatchTotal`. 但是，我一生都无法弄清楚如何到达这处房产。我在这里和 MSDN 上查看了其他几篇文章，但并没有深入了解。

这是我的代码，我做错了什么？

```
private void button1_Click(object sender, EventArgs e)
{
    prdChal.finfunctions service = new prdChal.finfunctions();
    //Type thisObject = typeof()

    //Type myType = myObject.GetType();
    //IList<PropertyInfo> props = new List<PropertyInfo>(myType.GetProperties());

    String ThisName = "";
    Object StatusReturn = new Object();

    StatusReturn = service.UpdateGrantBillStatus(fundBox.Text, toBox.Text, fromBox.Text);
    var type = StatusReturn.GetType();
    var propertyName = type.Name;
    //var propertyValue = propertyName.GetValue(myObject, null);error here 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:50:23.173

不要首先将您的 StatusReturn 变量声明为对象类型。

```
//Object StatusReturn = new Object();

var StatusReturn = service.UpdateGrantBillStatus(fundBox.Text, toBox.Text, fromBox.Text);
if (StatusReturn.Count() > 0)
{
    var fixedAsset = StatusReturn[0];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:48:51.537

```
dynamic d = service.UpdateGrantBillStatus(fundBox.Text, toBox.Text, fromBox.Text);
string result = (string)d[0].sentBatchTotal; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T20:49:47.660

以下代码使用反射。

```
StatusReturn = service.UpdateGrantBillStatus(fundBox.Text, toBox.Text, fromBox.Text);
var type = StatusReturn.GetType();
var pi = type.GetProperty("sentBatchTotal");
if (pi != null) {
    var propertyValue = pi.GetValue(StatusReturn, null);
} 
```

但是你不能只使用 webservice-method 返回类型而不是对象吗？比你可以直接读取属性。

就像是：

```
WhatEverTypeYourServiceReturns StatusReturn = service.UpdateGrantBillStatus(fundBox.Text, toBox.Text, fromBox.Text);
string sentBatchTotal = StatusReturn.sentBatchTotal; 
```

# entity-framework - 带有实体框架菜单的 Visual Studio 2012 Express

> ID：14367460
> 
> 赞同：1
> 
> 时间：2013-01-16T20:42:42.777
> 
> 标签：entity-framework, visual-studio-2012

我安装了 VS 2012 beta 版本，然后按照[本教程](http://msdn.microsoft.com/en-us/data/jj200620.aspx)安装了 Entity 框架，它运行良好。

VS 2012 beta 已过期，所以我得到了 VS 2012 Express。我尝试遵循相同的教程，但现在我在右键单击项目菜单中没有“实体框架逆向工程师代码优先”。

这是 Visual Studio 2012 Express 的限制吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T03:21:29.437

EF Power Tools 在 Express SKU 上不可用 - 您至少需要 Pro 版本。请参阅此线程以获得更详细的答案：[如何在我的 PC 上正确版本的 VS 上安装 EFPowerTool Beta](https://stackoverflow.com/questions/13441728/how-to-install-efpowertool-beta-on-the-right-version-of-vs-on-my-pc)

# deployment - 根据执行的 Gradle 任务将不同的文件复制到构建目录

> ID：14367464
> 
> 赞同：1
> 
> 时间：2013-01-16T20:43:01.603
> 
> 标签：deployment, properties, zip, gradle, multi-tier

我为 Gradle 创建了一个插件，以部署到我公司的 OpenVMS 目录结构中，该目录结构添加`deployDev`、`deployTest`，并且在提供凭据时，将`deployProd`任务添加到应用程序构建中。我已将所有环境的配置文件提取到一个单独的项目中，以便我们可以将配置与应用程序分开部署。

这些自定义任务取决于应用程序插件的`distZip`任务，我还没有找到一个好方法来根据调用的任务（例如，`deployDev`包括开发配置）将适当的配置文件放入 zip 中。

我尝试在配置阶段让 deploy* 任务复制配置文件：

```
task distZip(type:Zip, overwrite:true) {
   archiveName = 'config.zip'
   from "build/props"
}

deployDev.configure {
    copyResources('dev')
}

deployTest.configure {
    copyResources('test')
}

project.tasks.findByName('deployProd')?.configure {
    copyResources('prod')
}

def copyResources(String environment){
    copy {
        from "src/$environment/resources"
        into 'build/props'
    }
} 
```

由于在所有任务上执行配置阶段，这不起作用，因此即使我们执行`deployDev`，测试配置也已复制到开发资源上。

我也试过：

```
file('build/props').mkdirs()

task distZip(type:Zip, overwrite:true) {
   archiveName = 'config.zip'
   from "build/props"
   outputs.upToDateWhen {false}
}

gradle.taskGraph.whenReady { graph ->
   if (graph.hasTask('deployProd')) {
       copyResources('prod')
   }else if(graph.hasTask('deployTest')){
       copyResources('test')
   }else if(graph.hasTask('deployDev')){
      copyResources('dev')
   }
}

def copyResources(String environment){
   copy {
        from "src/$environment/resources"
        into 'build/props'
    }
} 
```

然而，有了这个提议，`distZip`任务总是是最新的。有没有正确的方法来做到这一点？

# javascript - 文本区域编辑中的问题

> ID：14367465
> 
> 赞同：3
> 
> 时间：2013-01-16T20:43:03.920
> 
> 标签：javascript, dom-events, textarea

我正在处理用户输入（包括选项卡）的文本区域中制作一种文本编辑器。每次用户输入内容时，我都会运行一个`paginate()`在页面上正确分页文本的函数，该函数大约需要 20 毫秒。现在，因为我不希望在对文本区域进行分页时处理第二个输入，所以我添加了一个条件，但这样我就失去了`ctrl`-V</kbdI 功能。因此，遵循@Gabriel Gartz 在这篇文章中的建议：[关于输入问题的文本区域](https://stackoverflow.com/questions/14185964/textarea-on-input-issue)。

我通过首先保存上下文和事件再次调用该函数。该函数确实被再次调用，但粘贴仍然没有发生！

html:

```
<textarea id="taEditor"></textarea> 
```

Javascript：

```
$("#taEditor").on('click keydown cut paste', processUserInput);

var IsProcessingEvent = false;

function processUserInput(e) {
    if(!IsProcessingEvent) {
        IsProcessingEvent = true;
        //do various stuff before the textarea changes like: get value, get   cursor pos etc
        var taValueBefore = document.getElementById("taEditor").value;
        if (e.keyCode === 9) {
          e.preventDefault();
          e.stopPropagation();
          document.getElementById("taEditor").value += "\t";
        }
        getcursorpos();

        //do various stuff after the textarea changes like: get value, get   cursor pos etc  
        setTimeout(function() {
            var taValueAfter = document.getElementById("taEditor").value;
            getcursorpos();
          if (taValueAfter !== taValueBefore) {
            paginate(); //this function paginates the text in the textarea and sets the cursor
            //paginate() takes about 20 milliseconds
          }
          if (doAgain.repeat) {
            var lastEvent = doAgain;
            doAgain.repeat = false;
            document.getElementById("debug").innerHTML += "rerun: " + lastEvent.ctx.id + ":" + lastEvent.e.type + "<br>";
            setTimeout(processUserInput.bind(lastEvent.ctx), 0, lastEvent.e);
          }
          document.getElementById("debug").innerHTML += e.type + "<br>";
          IsProcessingEvent = false;
        }, 0);
    } else {
      //save context and event
      document.getElementById("debug").innerHTML += "isprocessing: " + e.type + "<br>";
          doAgain = {
            ctx: this,
            e: e,
                  repeat: true
      };
      //i need to preventdefault here, because processUerInput also processes the TAB key and if i don't use preventdefault then the cursor will move focus to other elements during the pagination
          e.preventDefault();
          e.stopPropagation();
      return false;
    }
}

var doAgain = {
    ctx: "",
    e: "",
    repeat: false
};

function getcursorpos() {
  //for simplicity reasons it's empty
}

function paginate() {
  var i = 0;
  var k = 0;
  //simulate 20-30 milliseconds of delay for pagination
  for (i=0;i<100000000;i++) {
    k++;
  }
  //for simplicity reasons it's empty
} 
```

jsfiddle：

[http://jsfiddle.net/63pkE/1/](http://jsfiddle.net/63pkE/1/)

**重现问题：尝试在 textarea 中按 ctrl-v。**

我不明白我做错了什么。

***编辑***

这是一个新的 jsfiddle，我在其中替换了

```
 setTimeout(processUserInput.bind(lastEvent.ctx), 0, lastEvent.e); 
```

符合

```
 setTimeout(function() {
          processUserInput.call(lastEvent.ctx, lastEvent.e);
        }, 0); 
```

因为`.bind`不是跨浏览器，但它仍然不起作用。

[http://jsfiddle.net/63pkE/2/](http://jsfiddle.net/63pkE/2/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T23:56:19.510

试试这个，看看是否有效，我没有注意到与您的原始代码行为有任何区别，现在复制粘贴工作。

```
function processUserInput(e) {
    if(!IsProcessingEvent) {
        if(!e.ctrlKey){
            IsProcessingEvent = true;
        }
    //Rest of the code 
```

如果按下 Ctrl 键，则 e.ctrlKey 返回 true。

# c# - 无法移动标签

> ID：14367466
> 
> 赞同：0
> 
> 时间：2013-01-16T20:43:09.223
> 
> 标签：c#, winforms, labels

我在一个表格上有 20 个图表；它们是宽矩形。所以现在我需要在图表旁边放一个原始数字。我将在绘图例程绘制一条描绘它的线时更改此数字。

我需要这样做 20 次；每个频道一个。用户选择矩形的位置（通过一些 NumericUpDown 控件）。

结果，包含 20 个图形的 20 个矩形将位于 20 个不同的位置；大体一致，但仍有变数。我用五个整数处理这个；即， `X_start, Y_start, Height, Width, Spacing`。

我的第一个想法是制作 20 个标签，将它们放在图表旁边，并更改其中的文本。

[我在这里](https://stackoverflow.com/questions/3967840/c-sharp-how-to-create-an-array-of-label)阅读了有关制作标签数组的信息

然后我试着像这样编码它......

```
for (int i = 0; i < 20; i++)
{
    RawNumberLabels[i].Text = "0";
    RawNumberLabels[i].Location.X = RawNumberLabel_x;  // error 
} 
```

错误说..`Cannot modify (blah blah blah "Location.X") because it is not a variable.`

所以我尝试了这个：

```
Point RawXY = new Point((int)RawNumberLabel_x, Y_Pos);

for (int i = 0; i < 20; i++)
{
     RawNumberLabels[i].Text = "0";
     RawNumberLabels[i].Location.Offset(RawXY);   // fixes that one

     // Then  this next line is all full of fail
     RawNumberLabels[i].Size.Width = (int)UpDownsFromTheUser.Starting_RawNumberWidth; 
```

现在我不能改变`Size.Width`，因为它不是一个变量。

好的，那么我如何在屏幕上的 20 个其他矩形旁边放置 20 个标签，以便它们的 X、Y、高度和宽度与这 20 个其他矩形的 X、Y 和高度整齐地匹配？

更好的是，有没有更好的方法将 20 个原始数字放在像这样的 20 个矩形旁边？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:01:06.257

从[文档中](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.size.aspx)：

> 因为`Size`类是值类型（`Structure`在 Visual Basic 中，`struct`在 Visual C# 中），所以它是按值返回的，这意味着访问该属性会返回控件大小的副本。因此，调整从该属性返回的 Size 的 Width 或 Height 属性不会影响控件的 Width 或 Height。要调整控件的 Width 或 Height，必须设置控件的 Width 或 Height 属性，或者将 Size 属性设置为新的 Size。

***编辑：** [这](http://msdn.microsoft.com/en-us/library/system.windows.forms.label.aspx)是标签类，这可能是一个很好的参考点。*

# c# - Bootstrapper.AutoMapper 和 Profile 注册顺序

> ID：14367469
> 
> 赞同：1
> 
> 时间：2013-01-16T20:43:22.673
> 
> 标签：c#, automapper, bootstrapper, automapper-2

我正在使用 AutoMapper 2.2.0 开发 ASP.NET MVC 3 应用程序。我声明了一些 AutoMapper 配置文件，当我手动初始化它们时，一切正常。

```
AutoMapper.Mapper.Initialize(x =>
{
    x.AddProfile<ProdutoToProdutoViewModel>();                    
    x.AddProfile<IPagedListProdutoToIPagedListProdutoViewModel>();
    x.AddProfile<ItemToItemViewModel>();
    x.AddProfile<CarrinhoToCarrinhoViewModel>();
});
//This is working 
```

但是当我尝试使用 Bootstrapper.AutoMapper 2.0.3.0 初始化它们时......

```
Bootstrapper.With.AutoMapper().Start(); 
```

...抛出配置异常：

```
The following property on eGuruShop.Web.ViewModels.ItemViewModel cannot be mapped:
Itens
Add a custom mapping expression, ignore, add a custom resolver, or modify the destination type eGuruShop.Web.ViewModels.ItemViewModel.
Context:
Mapping to property Itens from eGuruShop.Domain.CatalogoProdutos.Item to eGuruShop.Web.ViewModels.ItemViewModel
Mapping to property Itens from System.Collections.Generic.IList`1[[eGuruShop.Domain.CatalogoProdutos.Item, eGuruShop.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] to System.Collections.Generic.IList`1[[eGuruShop.Web.ViewModels.ItemViewModel, eGuruShop.Web, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]
Mapping from type eGuruShop.Domain.CatalogoProdutos.Carrinho to eGuruShop.Web.ViewModels.CarrinhoViewModel
Exception of type 'AutoMapper.AutoMapperConfigurationException' was thrown 
```

配置`CarrinhoToCarrinhoViewModel`文件取决于`ItemToItemViewModel`配置文件，当我将初始化顺序更改为

```
AutoMapper.Mapper.Initialize(x =>
{
    x.AddProfile<ProdutoToProdutoViewModel>();                    
    x.AddProfile<IPagedListProdutoToIPagedListProdutoViewModel>();
    x.AddProfile<CarrinhoToCarrinhoViewModel>();
    x.AddProfile<ItemToItemViewModel>();
});
//Exception 
```

我有和以前一样的例外。

我怀疑 Bootstrapper 以错误的顺序初始化配置文件，但我不知道如何在不放弃 Bootstrapper 的情况下解决它。对这个问题有什么建议或解决方案吗？

谢谢

# hide - ActionBarSherlock：显示和隐藏 ActionBar + StatusBar

> ID：14367470
> 
> 赞同：0
> 
> 时间：2013-01-16T20:43:25.730
> 
> 标签：hide, actionbarsherlock, statusbar

我正在尝试以全屏方式隐藏和显示我的应用程序。我根据 Eclipse 模板启动了一个新的 FullScreenActivity。

这是我用来显示/隐藏 ActionBar + NotificationBar 的代码

```
public void hide() {
    if ((mFlags & FLAG_FULLSCREEN) != 0) {
        mActivity.getSupportActionBar().hide();
        mActivity.getWindow().setFlags(
                WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);

    }
    mOnVisibilityChangeListener.onVisibilityChange(false);
    mVisible = false;
}

public void show() {
    if ((mFlags & FLAG_FULLSCREEN) != 0) {
        mActivity.getSupportActionBar().show();         
        mActivity.getWindow().setFlags(0,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);            
    }
    mOnVisibilityChangeListener.onVisibilityChange(true);
    mVisible = true;
} 
```

它有点工作，但我的大问题是 ActionBar 与通知重叠：

![在此处输入图像描述](../Images/7b5c16c8265cc8d39047cc6d0e50ef7d.png)

知道什么是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:06:39.397

自我回答：

我不得不删除模板中自动生成的这些行：

```
 if ((mFlags & FLAG_LAYOUT_IN_SCREEN_OLDER_DEVICES) == 0) {
        mActivity.getWindow().setFlags(
                WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
                        | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS,
                WindowManager.LayoutParams.FLAG_LAYOUT_IN_SCREEN
                        | WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);
    } 
```

# java - 包名 org.omg 中的 omg 代表什么

> ID：14367474
> 
> 赞同：-2
> 
> 时间：2013-01-16T20:43:50.447
> 
> 标签：java, corba

OMG 代表[CORBA API 的](http://docs.oracle.com/javase/1.4.2/docs/api/org/omg/CORBA/package-summary.html).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T20:44:42.957

它代表[对象管理组](http://www.omg.org)。

# excel - Excel VBA 使用选定的工作表

> ID：14367482
> 
> 赞同：7
> 
> 时间：2013-01-16T20:44:20.253
> 
> 标签：excel, vba

Excel VBA 新手在这里。我只需要一个宏来刷新我正在查看的单张工作表上的查询。我已经有了刷新宏，但我总是必须指定要刷新的工作表名称。是否可以在我正在查看的任何工作表上运行宏？这是当前状态下的宏：

```
Sub Refresh_Query()
Sheets("Sheet1").Select
Range("B6").Select
Selection.QueryTable.Refresh BackgroundQuery:=False
End Sub 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T20:48:34.550

您要使用[`ActiveSheet.Name`](http://msdn.microsoft.com/en-us/library/office/aa174742%28v=office.11%29.aspx)，例如：

```
Sub Refresh_Query()
    Sheets(ActiveSheet.Name).Select
    Range("B6").Select
    Selection.QueryTable.Refresh BackgroundQuery:=False
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:48:22.133

这应该有效：

```
Sub Refresh_Query()
    ActiveSheet.QueryTables(1).Refresh BackgroundQuery:=False
End Sub 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T05:38:26.203

OP不明确：文本要求刷新活动工作表上的所有查询表，但示例代码仅刷新包含单元格的一个查询表`B3`

要仅刷新一个查询表，请使用

```
Sub RefreshOneQuery()
    Dim qt As QueryTable
    On Error Resume Next  ' in case there is no qt containing cell B6
    Set qt = Range("B6").QueryTable
    On Error GoTo 0
    If Not qt Is Nothing Then
        qt.Refresh BackgroundQuery:=False
    End If
End Sub 
```

要刷新工作表上的所有查询表，请使用

```
Sub RefreshAllQueries()
    Dim qt As QueryTable
    For Each qt In ActiveSheet.QueryTables
        qt.Refresh BackgroundQuery:=False
    Next
End Sub 
```

# jquery - 如何通过单击子链接获取父 LI 的值？

> ID：14367485
> 
> 赞同：0
> 
> 时间：2013-01-16T20:44:25.370
> 
> 标签：jquery

> **可能重复：**
> [获取 jquery 选择器的父元素](https://stackoverflow.com/questions/7765931/getting-a-parent-element-for-a-jquery-selector)

我有一个项目清单：

```
 <div id="wrap"><ul class="thumbs noscript">
        <li id="1">
        <a class="thumb" href="photos/10-01.jpg" title="" />
        <img src="photos/10-01_thumb.jpg" alt="" />
        </a>
        <div class="caption">
        <div class="download"><a href="#" class="add2cart">Save Image</a></div>
        <div class="image-title">Titre de la photo #1</div>
        <div class="image-desc">Description de la photo #1</div>
        </div>
        </li> /* and so on with li's and different ID's... */ 
```

我无法获取 li ID 的值，因此无法获取标题。在这里阅读并尝试了几乎所有答案，一旦我在我的网站上进行测试，它们将无法工作......知道吗？TY伙计们

```
$(document).ready(function(){
    $("#wrap > ul > li > .caption > .download > .add2cart").click(function(){
        var thisID = $(this).closest('li').attr("id");
        alert(thisID);
    });
}); 
```

正确答案（见下文）：insomiac，tyvm 也感谢 Diodeus 指出 ID 问题。感谢所有回答的人;）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:51:45.130

使用“数据”api 存储值，然后单击检索该值而不是使用 id。

```
<li id="img" data-val="1">
            <a class="thumb" href="photos/10-01.jpg" title="" />
            <img src="photos/10-01_thumb.jpg" alt="" />
            </a>
            <div class="caption">
            <div class="download"><a href="#" class="add2cart">Save Image</a></div>
            <div class="image-title">Titre de la photo #1</div>
            <div class="image-desc">Description de la photo #1</div>
            </div>
    </li> /* and so on with li's and different ID's... */ 
```

jQuery：

```
 $(document).ready(function(){
        // if you want the value of li, using the child click.
        // Do something like this, if you want the click on "thumb".
        $('.thumb').click(function(e){
             e.preventDefault();
            var val = $(this).closest('li').data('val');
         });

     }); 
```

在[jsfiddle上工作](http://jsfiddle.net/MUBHF/)

更新您的 js 代码：

```
$(document).ready(function(){
    $(".add2cart").click(function(e){
        e.preventDefault();
        // Use prop if your jquery version is above 1.6.. 
        var thisID = $(this).closest('li').prop("id");
        alert(thisID);
    });
}); 
```

注意：从 jQuery 1.6 开始，.attr() 方法为尚未设置的属性返回 undefined。此外，.attr() 不应用于普通对象、数组、窗口或文档。要检索和更改 DOM 属性，请使用 .prop() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:49:34.763

对于您的特定情况，您可以使用`$(this).parent().attr('id')`：

```
$('li a').on('click', function () {
   alert('you clicked a link within a li with id=' + $(this).parent().attr('id')); 
   } 
); 
```

[http://jsfiddle.net/8QZ2s/](http://jsfiddle.net/8QZ2s/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:51:56.410

您也可以使用 .closest

```
$(this).closest('li').attr('id'); 
```

如果您的控件进一步嵌套，这将确保它实际上是在找到 li 而不是另一个父元素。

# sql-server - 如何根据列号创建临时表？

> ID：14367492
> 
> 赞同：1
> 
> 时间：2013-01-16T20:44:57.240
> 
> 标签：sql-server, tsql

如何根据列数创建临时表？

例如，如果 count 为 20，则创建一个包含 20 列的临时表（都是 nvarchar 类型）。

如果 count 为 10，则创建仅包含 10 列的临时表。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T20:53:55.150

如果您**真的**很想按照书面方式执行此操作，您可以使用如下动态 SQL：

```
DECLARE @ColCount int = 20
DECLARE @Ct int = 1
DECLARE @SQL nvarchar(max) = ''

SET @SQL = 'CREATE TABLE #VarTemp('

WHILE @Ct < @ColCount+1
BEGIN
    SET @SQL += 'Col' + CAST(@Ct as nvarchar(8)) + ' nvarchar(256),'
    SET @Ct = @Ct + 1
END
SET @SQL = LEFT(@SQL, (LEN(@SQL) - 1))
SET @SQL += ')'

SELECT @SQL 
```

只需将输出的 SQL 字符串放入另一个窗口，或者如果您信任它，您可以将其更改`SELECT`为`EXEC`.

# ios - UIImageView 的大小问题

> ID：14367494
> 
> 赞同：0
> 
> 时间：2013-01-16T20:45:10.227
> 
> 标签：ios, ios5, uiscrollview, ios6, uiimageview

好朋友。

我正在为面向 iOS 5.10 或更高版本的电子书创建一个基于页面的通用应用程序。我有一些问题。

我写

```
 _pageData = [NSArray arrayWithObjects:
                 [UIImage imageNamed:@"kkkn_0003.png"],
                 [UIImage imageNamed:@"kkkn_0004.png"],
                 [UIImage imageNamed:@"kkkn_0005.png"],
                 [UIImage imageNamed:@"kkkn_0006.png"],
                 [UIImage imageNamed:@"kkkn_0007.png"],
                 [UIImage imageNamed:@"kkkn_0008.png"],
                 [UIImage imageNamed:@"kkkn_0009.png"],
                 [UIImage imageNamed:@"kkkn_0010.png"],
                 [UIImage imageNamed:@"kkkn_0011.png"],
                 [UIImage imageNamed:@"kkkn_0012.png"],
                 nil]; 
```

在 ModelController.m 中。所有图像尺寸相同，102410 x 1536。

我使用Storyboard，我首先将一个UIScrollView 放到UIView 上，连接到DataViewController.h 并命名为滚动，然后将一个UIImageView 也连接到DataViewController.h 并命名为imgv。

在 DataViewController.m 中，我合成如下。

```
 @synthesize dataObject = _dataObject;
               @synthesize imgv = _imgv;
               @synthesize scroll = _scroll; 
```

但是这里有一些问题。所以我在 viewWillAppear 函数中编写了如下代码。

```
 NSLog( @"ImageView bounds %f, %f, %f, %f", _imgv.bounds.origin.x, _imgv.bounds.origin.y, _imgv.bounds.size.width, _imgv.bounds.size.height);
               NSLog( @"ImageView Frame %f, %f, %f, %f", _imgv.frame.origin.x, _imgv.frame.origin.y, _imgv.frame.size.width, _imgv.frame.size.height); 
```

首先，在运行 iOS 5.1 的 iPhone4S 上，它显示 ImageView bounds 0.000000, 0.000000, 320.000000, 480.000000 ImageView Frame 0.000000, 34.000000, 320.000000, 480.000000 并且工作正常。

但是在运行 iOS 6.0.2 的 iPhone 5 上，它显示相同的值，所以我在顶部和底部有两个浅黄色边距。这是第一个问题。

其次，在运行 iOS 5.1 的 iPad2 上，它显示

```
 ImageView bounds 0.000000, 0.000000, 688.000000, 944.000000
               ImageView Frame 0.000000, 0.000000, 688.000000, 944.000000 
```

这意味着 UIImageView 不是全屏的，我可以在屏幕上看到它的边框。而且， UIImageView 不适合中心。

在运行 iOS 6.0.2 的 iPad 4th gen 上运行时，它显示

```
 ImageView bounds 0.000000, 0.000000, 768.000000, 1024.000000
               ImageView Frame 0.000000, 0.000000, 768.000000, 1024.000000 
```

在第一页，但在接下来的页面中，它显示

```
 ImageView bounds 0.000000, 0.000000, 688.000000, 944.000000
               ImageView Frame 0.000000, 0.000000, 688.000000, 944.000000 
```

我什么也没做，但 UIImageView 的大小在第一页和其他页面之间是不同的。UIImageView 也不是全屏模式，所以我又看到了边框。

你有什么好的解决办法吗？

谢谢你的帮助。胜

# objective-c - 在我的应用中集成 Dropbox 应用

> ID：14367500
> 
> 赞同：0
> 
> 时间：2013-01-16T20:45:23.987
> 
> 标签：objective-c, dropbox-api

所以，这就是我想要完成的任务。在我的应用程序中，我有一个文本字段，其中显示了我的 iOS 设备中存在的所有应用程序和文件的列表。其中之一将是保管箱。当我点击投递箱时，它应该打开投递箱应用程序并询问用户凭据。一旦用户输入他的凭据，它应该保存它们，并且在他下次再次登录时不应该询问。现在，在我之前提到的那个文本框中，我应该得到我的 Dropbox 文件夹中的文件列表。

我是 iOS 应用程序开发的新手，所以任何以链接、文档形式提供的帮助都会有很大帮助。请给我一个关于如何完成这项任务的简要想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:26:48.057

既然你说的链接：

**教程链接**

*   [http://www.mathiastauber.com/integration-o-dropbox-in-your-ios-application/](http://www.mathiastauber.com/integration-o-dropbox-in-your-ios-application/)
*   [http://www.mathiastauber.com/integration-of-dropbox-in-your-ios-application-authentication/](http://www.mathiastauber.com/integration-of-dropbox-in-your-ios-application-authentication/)
*   [http://programmaticallytakingscreenshot.blogspot.com/2011/04/dropbox-integration-in-iphone.html](http://programmaticallytakingscreenshot.blogspot.com/2011/04/dropbox-integration-in-iphone.html)

**Dropbox 链接**

*   [http://www.dropbox.com/developers/apps](http://www.dropbox.com/developers/apps)
*   [https://www.dropbox.com/developers/start/setup#ios](https://www.dropbox.com/developers/start/setup#ios)

您应该考虑使用`Table Views`来显示您的数据而不是文本字段。

*   [http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/](http://www.appcoda.com/ios-programming-tutorial-create-a-simple-table-view-app/)

关于表视图的 Apple 文档：

*   [http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/AboutTableViewsiPhone/AboutTableViewsiPhone.html)

祝你好运！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:54:22.810

您提出的建议违反了 iOS 的沙盒原则。应用程序不知道它们自己的文档文件夹之外的任何内容，并且无权在该区域之外读取或写入。

存储在 Dropbox 中的文件可通过 Dropbox API 访问，因此您将能够实现您设计的这一部分，但设备上的大多数其他应用程序对您来说是不可见或不可访问的。

# powershell - Invoke-WmiMethod 在 Win8(PS3.0) 和 Win7(PS2.0) 上表现不同

> ID：14367503
> 
> 赞同：1
> 
> 时间：2013-01-16T20:45:38.943
> 
> 标签：powershell, wmi, powershell-2.0

我将从我刚刚为 SO 问题所做的答案中复制粘贴一些代码。我遇到的问题是为什么`Invoke-WmiMethod`在 Windows 8（PS3.0）上工作时在我的 Windows 7（PS2.0）机器上返回错误。这是代码：

```
#Username/Group to give permissions to
$trustee = ([wmiclass]'Win32_trustee').psbase.CreateInstance()
$trustee.Domain = "domainname"
$trustee.Name = "username"

#Accessmask values
$fullcontrol = 2032127
$change = 1245631
$read = 1179785

#Create access-list
$ace = ([wmiclass]'Win32_ACE').psbase.CreateInstance()
$ace.AccessMask = $fullcontrol
$ace.AceFlags = 3
$ace.AceType = 0
$ace.Trustee = $trustee

#Securitydescriptor containting access
$sd = ([wmiclass]'Win32_SecurityDescriptor').psbase.CreateInstance()
$sd.ControlFlags = 4
$sd.DACL = $ace
$sd.group = $trustee
$sd.owner = $trustee

#Arguments - Arguments: access, description, max. allowed, name, password, path, type(0 = drive/folder share)
Invoke-WmiMethod -Class Win32_Share -Name Create -ArgumentList @($sd, "TestDescription", 100, "TestName$", "", "C:\Test", 0) 
```

`Invoke-WmiMethod`在 Windows 7 机器上执行时返回错误，而在 Windows 8 上工作正常。如果我`$sd`用 $null 替换（访问参数）它在 win7 上运行良好。错误是：

```
Invoke-WmiMethod <<<< -Class win32_share -name Create -ArgumentList @($sd, "TestDescription", 100, "TestName$", "", "C:\Test", 0) 
+ CategoryInfo : InvalidOperation: (:) [Invoke-WmiMethod], ManagementException + FullyQualifiedErrorId : InvokeWMIManagementException,Microsoft.PowerShell.Commands.InvokeWmiMethod' 
```

这是使用的参数列表`Invoke-WmiMethod`：

```
PS C:\Windows> ([wmiclass]'win32_share').GetMethodParameters('create')

__GENUS          : 2
__CLASS          : __PARAMETERS
__SUPERCLASS     : 
__DYNASTY        : __PARAMETERS
__RELPATH        : 
__PROPERTY_COUNT : 7
__DERIVATION     : {}
__SERVER         : 
__NAMESPACE      : 
__PATH           : 
Access           : 
Description      : 
MaximumAllowed   : 
Name             : 
Password         : 
Path             : 
Type             : 
PSComputerName   : 
```

谁能帮我理解为什么`Invoke-WmiMethod`在 w8 上工作时不喜欢我在 w7 上的访问参数？如果我运行它，它接受`$sd`两者：`([wmiclass]'Win32_share').Create(.....)`使用它的定义：

```
PS C:\Windows> ([wmiclass]'win32_share').Create

OverloadDefinitions   
-------------------                                             
System.Management.ManagementBaseObject Create(System.String Path, System.String Name, System.UInt32 Type, System.UInt32 MaximumAllowed, System.String Description, System
.String Password, System.Management.ManagementObject#Win32_SecurityDescriptor Access) 
```

# php - 如何重复一个函数（x 次，每次唯一输出）？

> ID：14367505
> 
> 赞同：6
> 
> 时间：2013-01-16T20:45:52.020
> 
> 标签：php

我正在尝试创建一个将重复功能 X 次的应用程序。每次，该函数都会生成一个随机数。生成代码后，代码将创建一个包含新随机数的数组。任何帮助，将不胜感激。

我有创建随机数并将其连字符连接的代码，但我无法调用函数 cardNumber 重复自身 x 次并将结果放入数组中。

```
function hyphenate($str) {
    return implode("-", str_split($str, 4));
}

function cardNumber() { 
    for ($s = '', $i = 0, $z = strlen($a = 'ABCDEFGHJKLMNOPQRSTUVWXYZ')-1; $i != 2; $x =      rand(0,$z), $s .= $a{$x}, $i++);

    $uid = uniqid(true);
    $ccn = substr_replace($uid, $s, 0, 0);
    $upperccn = strtoupper($ccn);
    $editedccn = hyphenate($upperccn);
    return $editedccn;
};

$array = array(str_repeat(cardNumber(), 2));
var_dump ($array); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-16T20:47:47.780

只需使用一个循环：

```
$i = 0;
$times_to_run = 16;
$array = array();
while ($i++ < $times_to_run)
{
    $array[] = cardNumber();
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2017-01-23T14:04:18.163

这是一种更易读的方法，也更容易输入

```
foreach(range(1,20) as $i) { 
   ...
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-01-16T20:48:56.077

```
$num = amount of times to execute
for($i =0; $i < $num; $i++){
    $array[] = cardNumber();
}
#then
var_dump($array); 
```

# mysql - 轻松删除 SQL 表中的重复条目

> ID：14367510
> 
> 赞同：0
> 
> 时间：2013-01-16T20:46:02.197
> 
> 标签：mysql, sql

我想轻松删除此表中的重复条目

```
CREATE TABLE IF NOT EXISTS `mups` (
  `idgroupe` varchar(15) NOT NULL,
  `fan` bigint(20) DEFAULT NULL
) ENGINE=InnoDB DEFAULT CHARSET=utf8; 
```

例子 ：

如果我有 3 个这样的条目

```
 ('36','143')
  ('36','143')
  ('36','143') 
```

我只想保留一排

一个主意 ？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:51:23.290

如果您`UNIQUE`使用关键字在两列上定义索引`IGNORE`，MySQL 将删除每条记录的所有副本，但只有一个副本：

```
ALTER IGNORE TABLE mups ADD UNIQUE (idgroupe, fan) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T17:47:49.197

**如果没有指向此表的外键关系**，您可以使用（临时）表并在那里复制不同的行：

```
CREATE TABLE temp_mups AS 
SELECT DISTINCT *
FROM mups ; 
```

然后删除所有内容`mups`：

```
DELETE 
FROM mups ; 
```

添加所需的`UNIQUE`约束：

```
ALTER TABLE mups
ADD CONSTRAINT mups_UQ
  UNIQUE (idgroupe, fan) ; 
```

取回数据：

```
INSERT INTO mups 
  (idgroupe, fan)
SELECT idgroupe, fan
FROM temp_mups ; 
```

并安全地删除临时表：

```
DROP TABLE temp_mups ; 
```

在 SQL-Fiddle 中测试：**[test-1](http://sqlfiddle.com/#!2/d8aa3/1)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:50:05.870

您可以找出重复项是这样的：

```
SELECT idgroupe, fan, count(*)
FROM mups
GROUP BY idgroupe, fan
HAVING count(*) > 1 
```

# javascript - 使用 jQuery 进行表格分页

> ID：14367511
> 
> 赞同：-1
> 
> 时间：2013-01-16T20:46:12.753
> 
> 标签：javascript, jquery, jquery-ui

我在使用 jQuery 对我的 webProject 上的表格进行分页时遇到问题 这是我的代码，我看不出我做错了什么

这是我的html

```
<script type="text/javascript" src="${ctx}/js/device/device.js"></script>
<script type="text/javascript" src="${ctx}/js/jquery/jquery.paginate.js"></script>
<script type="text/javascript" src="${ctx}/js/jquery/jquey.js"></script>
<link rel="stylesheet" type="text/css" href="${ctx}/css/paginate.css" media="screen" />

<table id="deviceholder">
        <c:forEach var="device" items="${devices}">
            <tr>
                <td><a href="<c:url value="/device/update/${device.id}"/>">${device.name}</a></td>
                <td><a href="<c:url value="/device/update/${device.id}"/>">${device.code}</a></td>
                <td><a href="<c:url value="/comandos/${device.id}"/>"><img
                        src="${ctx}/images/comandos.png" alt="Comandos" title="Comandos"></a></td>
                <td><a id="${device.id}" class="delete" href="#"><img
                        src="${ctx}/images/editar.png" alt="Editar" title="Editar"></a></td>
            </tr>
        </c:forEach>
        </table> 
```

这是我的 JavaScript

```
$("deviceholder").paginate({
        start       : 1,
        display     : 8,
        border                  : true,
        border_color            : '#fff',
        text_color              : '#fff',
        background_color        : 'black',  
        border_hover_color      : '#ccc',
        text_hover_color        : '#000',
        background_hover_color  : '#fff', 
        images                  : false,
        mouse                   : 'press'}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:52:21.887

试试这个改变

```
$("#deviceholder").paginate({ 
```

请注意`#`选择器开头的 ，以查找具有该 id 的元素。

[选择器参考](http://api.jquery.com/category/selectors/)

* * *

有许多分页插件...您使用的是哪一个？

另外，不管你想在 jQuery 之后加载哪一个。那是：

```
<script type="text/javascript" src="${ctx}/js/jquery/jquey.js"></script>
<script type="text/javascript" src="${ctx}/js/jquery/jquery.paginate.js"></script> 
```

不是

```
<script type="text/javascript" src="${ctx}/js/jquery/jquery.paginate.js"></script>
<script type="text/javascript" src="${ctx}/js/jquery/jquey.js"></script> 
```

# windows - 是否有提供托管虚拟机以针对不同操作系统测试桌面软件的服务？

> ID：14367514
> 
> 赞同：2
> 
> 时间：2013-01-16T20:46:23.273
> 
> 标签：windows, hosting, virtual-machine

我有一个桌面应用程序，我（作为开发人员）需要对其进行测试，并且远程 QA 团队也需要对其进行测试。该应用程序是一些 B2B 软件的插件，因此我需要考虑两个主要变量：

1.  操作系统版本
2.  【B2B软件】版本

这产生了很多潜在的图像。

因为虚拟机镜像太大，不得不通过来回发送文件来共享镜像会很痛苦。如果有一些托管服务可以让我和 QA 从已知的最后状态快速轻松地创建、克隆和恢复图像，那就太好了。

我基本上是在寻找 Rackspace 或 Windows Azure 类型的服务，*但对于客户端操作系统*。这存在吗？

# scala - 如何使用正则表达式的模式匹配

> ID：14367516
> 
> 赞同：1
> 
> 时间：2013-01-16T20:46:24.100
> 
> 标签：scala

下面的代码是我用来解析文件中的 href 链接的代码：

```
 def parseFile(){
    val source = scala.io.Source.fromFile("C:\\Users\\Adrian\\Desktop\\parsefile.txt")
    val lines = source.getLines
    val Pattern = "\\s*(?i)href\\s*=\\s*(\\\"([^\"]*\")|'[^']*'|([^'\">\\s]+))"

    for (line <- source.getLines) {
        println(line)
    line match {
        case Pattern(c) => println(c)
        case _ => None
    }
   }

    source.close ()
  } 
```

来自 parsefile 的示例行：

```
 <A HREF="www.google.com" title="test">test</A> 
```

但我收到这个 Eclipse 编译时错误：

```
Multiple markers at this line
    - not found: value c
    - value Pattern is not a case class constructor, nor does it have an unapply/unapplySeq method 
```

应该如何声明 'c' 才能访问捕获组 String ？

我将上面的代码基于这个问题的公认答案：

[如何在 Scala 中使用正则表达式进行模式匹配？](https://stackoverflow.com/questions/4636610/regex-and-pattern-matching-in-scala)使用的代码是：

```
val Pattern = "([a-cA-C])".r
word.firstLetter match {
   case Pattern(c) => c bound to capture group here
   case _ =>
} 
```

欢迎对解析文件的替代方法提出任何建议。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:52:21.233

您的代码之间存在显着差异：

```
val Pattern = "\\s*(?i)href\\s*=\\s*(\\\"([^\"]*\")|'[^']*'|([^'\">\\s]+))" 
```

和例子：

```
val Pattern = "([a-cA-C])".r 
```

注意结尾`.r`。这会将字符串转换为正则表达式模式。regexp 模式有一个 unaplySeq 方法，因此它适用于模式匹配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T20:53:44.023

的类型`Pattern`是`String`，但应该是`Regex`。只需将调用添加`.r`到您的模式字符串。

# ember.js - 在最新的 Ember 中，如何仅使用模型的 id/名称链接到路由，而不是在链接页面中提供其所有属性？

> ID：14367517
> 
> 赞同：15
> 
> 时间：2013-01-16T20:46:31.213
> 
> 标签：ember.js, ember-router

我在从 Ember 1.0-pre2 转换到最新的 master ( [43354a98](https://github.com/emberjs/ember.js/commit/43354a98a5e441095132b1407f3e1f4809326802) ) 和新路由器时遇到了一个问题，即——

如果我有一条仅加载一堆记录的名称和 ID 的路线，并尝试将这些记录中的每一个链接到另一个应该显示完整模型的路线，当我到达新路线时，新模型永远不会加载, name 和 ID 是唯一可用的属性。

示例代码：

```
App.Router.map(function() {
  this.route("index");
  this.resource("birds");
  this.resource("bird", {
    path: "/birds/:bird_id"
  });
});

App.BirdsController = Ember.ArrayController.extend({
  birds: [
    {
      name: "Pigeon",
      id: "b.15"
    }, {
      name: "Chicken",
      id: "b.133"
    }, {
      name: "Turkey",
      id: "b.126"
    }, {
      name: "Ostrich",
      id: "b.4"
    }, {
      name: "Barn Owl",
      id: "b.47"
    }
  ]
});

App.BirdRoute = Ember.Route.extend({
  model: function(params) {
    return App.Bird.find(params.bird_id);
  }
});

{{#each bird in birds}}
  <li>{{#linkTo "bird" bird}}{{bird.name}}{{/linkTo}}</li>
{{/each}} 
```

其中 App.Bird.find() 运行一些 XHR 以从一组远程 API（不使用 ember-data）构建 Ember.Object。为了简化问题，鸟类列表被硬编码到这个例子的控制器中；在我的真实应用程序中，列表来自远程 API。

我看到的行为是，如果您从 /birds 开始并单击其中一个链接，路由器将转换为“bird”，然后您到达 /#/birds/b.5，但 App.Bird.find() 是从来没有打电话，我在页面上唯一的数据是“姓名”和“身份证”。但是，如果您随后重新加载页面，它会调用 App.Bird.find() 并正确构建并显示模型。

是否有某种方法可以强制从 URL 中的 ID 进行反序列化，或者只是将 ID 传递给 linkTo 而不是它将假定为完整的对象？我有一个类似的实现可以在旧路由器上正常工作。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-17T01:01:40.053

似乎永远不会在使用导航时调用`model`钩子......也许这是因为使用你正在将一个对象从路由传递给路由，而 ember 认为你不需要调用，因为它认为 id 已经反序列化为对象。这似乎是有道理的，因为当您重新加载页面时会被调用。`App.BirdRoute``{{#linkTo}}``{{#linkTo}}``birds``model``model`

我使用`setupController`钩子调用您的`App.Bird.find()`方法并将结果传递给控制器​​。这可以通过直接 URL 或`{{#linkTo}}`单击来调用。如果由`{{#linkTo}}`帮助程序链接调用，`setupController`则`model`参数将是`bird`与帮助程序一起传递的对象`{{#linkTo}}`。如果直接从 URL 调用，则从钩子返回的值将作为参数`model`传入。`setupController``model`

[这是一个 JSFiddle 示例](http://jsfiddle.net/cteegarden/TULVH/5/)

[具有可访问 URL 的示例](http://jsfiddle.net/cteegarden/TULVH/5/show/)

```
App.BirdRoute = Ember.Route.extend({
  model: function(params) {
    return {id: params.bird_id};
  },
  setupController: function(controller, model) {
    var bird_model = App.BirdTest.find(model.id);
    controller.set("content", bird_model);
  }
}); 
```

# facebook - 将 Facebook App 2 次添加到粉丝专页

> ID：14367520
> 
> 赞同：0
> 
> 时间：2013-01-16T20:46:46.043
> 
> 标签：facebook

我创建了一个应用程序，你可以在网上看到：

[http://www.facebook.com/pages/Hotel-Des-Balances/302383665689?sk=app_102064213296864](http://www.facebook.com/pages/Hotel-Des-Balances/302383665689?sk=app_102064213296864)

但是我已经在 iframe 中创建了选项卡，我想直接在 facebook 中创建它们，这样我就有了 Game1 的 Tab1 和 game2 的 Tab2，而无需创建多个 Facebook 应用程序！

如何创建多个添加到页面？

# html - Mozilla和chrome的结构布局差异

> ID：14367521
> 
> 赞同：1
> 
> 时间：2013-01-16T20:46:49.933
> 
> 标签：html, css, layout, flexbox, vendor-prefix

我有一个在 ie 和 chrome 上运行良好的简单网站，但在 Firefox 中有点时髦。我有一个黄色矩形的 div 和一个位于其顶部的相同颜色的导航栏，但由于某种原因，Firefox 将导航移动到 div 的正下方。这是我的代码：

```
<section>
<div id="wrapper">
<nav id="flexbox">
    <div><a href="gallery.html">Gallery</a></div>
    <div><a href="events.html">Events</a></div>
    <div><a href="default.html">Home</a></div>
    <div><a href="membership.html">Membership</a></div>
    <div><a href="contactus.html">Contact Us</a></div>
</nav>
</div>
</section> 
```

使用以下CSS：

```
section {
    max-width:100%;
    margin:-2px;
    padding:-2px;
    border:-2px;
}

#wrapper {
    max-height:40px;
    width:90%;
    margin-left:auto;
    margin-right:auto;
    background-color:#f5b00e;
}

#flexbox {
    margin-top: 40px;
    display:-ms-flexbox;
    display:-webkit-box-flex;
    width:65%;
    min-width:600px;
    max-height:40px;
    -ms-flex-pack:distribute;
    margin-left:auto;
    margin-right:auto;
    background-color:#f5b00e;

    -webkit-box-flex:1.0;
    display:-webkit-box;
    -webkit-box-orient:horizontal;
    -webkit-box-pack:center;
    -webkit-box-align:center;

    -moz-box-flex:1.0;
    display:-moz-box;
    -moz-box-orient:horizontal;
    -moz-box-pack:center;
    -moz-box-align:center;
 }

#flexbox > div {
    min-height: 20px;
    min-width: 80px;
    margin: 5px;
    text-align:right;

    -webkit-box-flex:1.0;
    display:-webkit-box;

    -moz-box-flex:1.0;
    display:-moz-box;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:57:15.367

如果您只想为 firefox 创建一些 CSS 规则，您可以将以下内容添加到您的样式表中，并将仅 firefox 的样式放入其中，请参见下面的示例：

```
@-moz-document url-prefix() { 
  .body a {
     color:red;
  }
} 
```

通常，如果 Firefox 拒绝按照您的要求执行操作，例如它不允许背景位置，那么您应该仅将其用作最后的手段，因此我在这种情况下使用它来加载仅适用于 Firefox 用户大小的不同背景图像。

# java - 是否有一个 Java WindowListener 在显示窗口之前被调用？

> ID：14367527
> 
> 赞同：1
> 
> 时间：2013-01-16T20:47:00.217
> 
> 标签：java, swing, awt, event-listener

是否有一个 Java WindowListener 在显示窗口之前被调用？

我已经尝试过`windowOpened`（下面的示例）和`componentShown`. 这两个都在窗口显示**后被调用。**在显示窗口**之前**是否有任何侦听器被调用？

```
window.addWindowListener(new WindowAdapter() {
    @Override
    public void windowOpened(WindowEvent evt) {
        < ... code ... >    
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:45:19.417

如您所愿，这是由评论编译的答案。（也许有时有人会搜索该答案；））这里的解决方案可能会通过子类化
来覆盖您`JFrame`的 's方法。 `setVisible(boolean)``JFrame`

该方法可能如下所示：

```
@Override
public void setVisible(boolean visible)
{
   if(visible) //Window is going to be shown
   {
       //your code you want to be executed before window is shown
   }

   //finally show or hide window
   super.setVisible(visible);
} 
```

在这种情况下，您需要重构代码以使用新的子类，只需找到每个“新 JFrame”并将其替换为“新 YourFrameSub”（每个编辑器或 IDE 都应该能够做到这一点）。
这样，您可以确保在显示任何内容**之前执行您的代码。**
记得用a `SwingWorker`or sth。像这样`ProgressBar`在 a`JDialog`中显示类似的东西，向用户展示某些东西将花费比预期更长的时间。当然，这仅在您计划执行长时间运行的操作（如执行 IO 操作）时才会发生。

# android - Android：如何在单选模式ListView中选择更改时收到通知？

> ID：14367533
> 
> 赞同：2
> 
> 时间：2013-01-16T20:47:32.037
> 
> 标签：android

我希望我的 ListView 突出显示所选项目，直到选择更改。另外，我希望在选择更改时收到通知。

为了完成第一个任务，我调用`list.setChoiceMode(ListView.CHOICE_MODE_SINGLE)`.

我不确定如何完成第二个。单击列表项时，永远不会通知我的 OnItemSelectedListener ，并且 OnItemClickListener 不足是因为在发生 OnItemClick 事件时，我的 ListView 的 checkedItem 已被修改，因此无法区分单击事件是否导致选择更改（它是可能/很可能已选择单击的项目）。

一种选择是将当前检查的索引存储在成员变量中，我可以使用它来确定单击事件是否对应于选择更改。但是这种丑陋的，所以，对于这种选择模式，当然有办法用提供的侦听器来做到这一点？

```
public class Temp extends Activity implements OnItemClickListener, OnItemSelectedListener
{
    ListView mView;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);

        List<String> strings = new ArrayList<String>();
        strings.add("1");
        strings.add("2");
        strings.add("3");
        strings.add("4");
        strings.add("5");

        mView = new ListView(this);
        mView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        mView.setAdapter(new ArrayAdapter<String>(this, android.R.layout.simple_list_item_activated_1, strings));
        mView.setItemChecked(0, true);

        mView.setOnItemClickListener(this);
        mView.setOnItemSelectedListener(this);

        setContentView(mView);
    }

    @Override
    public void onItemSelected(AdapterView<?> parent, View view, int position, long id)
    {
        //this never gets called
        Log.e("item selected", ""+position);
    }

    @Override
    public void onNothingSelected(AdapterView<?> parent)
    {
        Log.e("nothing seleted", "");
    }

    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position, long id)
    {
                //by the time this occurs, position == mView.getCheckedItemPosition()
        Log.e("item clicked", ""+position);
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T20:51:54.867

> 单击列表项时，永远不会通知我的 OnItemSelectedListener。

OnItemSelectedListener 仅在您使用轨迹球、键盘导航或使用其他类型的非触摸导航时由 ListView 调用。它与选择模式无关。

> 一种选择是将当前检查的索引存储在成员变量中，我可以使用它来确定单击事件是否对应于选择更改。

这是最好的选择。它只涉及一个额外的`int`和一个 if 语句。

# algorithm - 将网格划分为四面体？

> ID：14367536
> 
> 赞同：4
> 
> 时间：2013-01-16T20:47:45.077
> 
> 标签：algorithm, math, model, 3d, geometry

假设我有一些由面和线连接的任意点集，以形成一个封闭的多面体。有没有什么算法可以将这样的网格划分为一组四面体？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:24:10.390

您可以构建 中的点的受约束的 Delaunay 三角剖分（即四面体化）`R^3`，其中约束是边和三角形面的列表。

但请注意——在大于 2 的维度中，并不总是可以直接形成这种受约束的三角剖分！一个很好的例子是[Schonhardt Polyhedron](http://en.wikipedia.org/wiki/Sch%C3%B6nhardt_polyhedron)。为了处理这样的多面体，有必要通过引入额外的顶点来“拆分”约束。据我了解，尽管已经提出了一系列启发式方法，但确定执行此操作的“最佳”方法仍然是一个开放的研究领域。

您可能对[Jonathan Shewchuk](http://www.cs.berkeley.edu/~jrs/)在该领域的研究/软件感兴趣，特别是他的论文：

*   [受约束的 Delaunay 四面体化和可证明良好的边界恢复](http://www.cs.berkeley.edu/~jrs/papers/cdtbasic.pdf)
*   [通过 Flips 更新和构造约束 Delaunay 和约束正则三角剖分](http://www.cs.berkeley.edu/~jrs/papers/cdtflip.pdf)

解决高维约束三角剖分的一些问题。

另外，我假设您的问题很重要 - 具有一组定义非凸多面体的约束。在凸约束的情况下，这些应该直接通过计算无约束的 Delaunay 三角剖分来恢复，该三角剖分保证存在于任何维度。

# python - 为什么使用 xargs --max-procs 对具有无缓冲输出的 python 进程进行加扰？

> ID：14367538
> 
> 赞同：3
> 
> 时间：2013-01-16T20:47:45.637
> 
> 标签：python, pipe, stdout, buffered

我正在执行多个 python 进程，如下所示：

```
find /path/to/logfiles/*.gz | xargs -n1 -P4 python logparser.py 
```

并且输出偶尔会被打乱。

输出流是无缓冲的，写入的大小小于默认系统（osx 10.8.2，python 2.7.2）定义的 512 字节的 PIPE_BUF，所以我相信写入应该是原子的，但输出偶尔会被打乱。我一定会遗漏一些东西，任何建议都将不胜感激。

谢谢。

脚本的简化骨架是：

```
import argparse
import csv
import gzip

class class UnbufferedWriter(object):
    """Unbuffered Writer from 
       http://mail.python.org/pipermail/tutor/2003-November/026645.html

    """

    def __init__(self, stream):
        self.stream = stream

    def write(self, data):
        self.stream.write(data)
        self.stream.flush()

    def __getattr__(self, attr):
        return getattr(self.stream, attr)

def parse_records(infile):
    if infile.name.endswith('.gz'):
        lines = gzip.GzipFile(fileobj=infile)
    else:
        lines = infile

    for line in lines:
        # match lines with regex and filter out on some conditions.
        yield line_as_dict

def main(infile, outfile):
    fields = ['remote_addr', 'time', 'request_time', 'request', 'status']
    writer = csv.DictWriter(outfile, fields, quoting=csv.QUOTE_ALL)

    for record in parse_records(infile):
        row_as_dict = dict(
            remote_addr=record.get('remote_addr', ''),
            time=record.get('time', ''),
            request_time=record.get('request_time', ''),
            request=record.get('request', ''),
            status=record.get('status', '')
        )
        writer.writerow(row_as_dict)

if __name__ == '__main__':

    parser = argparse.ArgumentParser()
    parser.add_argument('infile', nargs='?', type=argparse.FileType('r'), default=sys.stdin)
    parser.add_argument('outfile', nargs='?', type=argparse.FileType('w', 0), default=sys.stdout)

    pargs = parser.parse_args()
    pargs.outfile = UnbufferedWriter(pargs.outfile)

    main(pargs.infile, pargs.outfile) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:44:03.653

您可能要考虑使用[GNU Parallel](http://www.gnu.org/software/parallel/)。默认情况下，输出会被缓冲，直到实例完成运行：

> 在运行输出数据的作业时，您通常不希望多个作业的输出一起运行。GNU 并行默认对每个作业的输出进行分组，因此在作业完成时会打印输出。如果您希望在作业运行时打印输出，您可以使用 -u。

我相信运行脚本的最佳方式是 vai：

```
find /path/to/logfiles/*.gz | parallel python logparser.py 
```

或者

```
parallel python logparser.py ::: /path/to/logfiles/*.gz 
```

您可以使用标志指定要运行的进程数`-j`，即`-j4`.

Parallel 的好处是它支持输入参数的笛卡尔积。例如，如果您想为每个文件迭代一些额外的参数，您可以使用：

```
parallel python logparser.py ::: /path/to/logfiles/*.gz ::: 1 2 3 
```

这将导致跨多个进程运行以下内容：

```
python logparser.py /path/to/logfiles/A.gz 1
python logparser.py /path/to/logfiles/A.gz 2
python logparser.py /path/to/logfiles/A.gz 3
python logparser.py /path/to/logfiles/B.gz 1
python logparser.py /path/to/logfiles/B.gz 2
python logparser.py /path/to/logfiles/B.gz 3
... 
```

祝你好运！

# web-applications - 在Jetty 8中使用WebAppProvider，Jetty部署了WAR然后找不到

> ID：14367539
> 
> 赞同：0
> 
> 时间：2013-01-16T20:47:47.640
> 
> 标签：web-applications, jetty

我正在尝试使用 Jetty`WebAppProvider`来监视 WAR 的目录并部署它们。一切似乎都运行良好：Jetty 报告说它正在将 WAR 部署到我期望的上下文中。但是当我尝试访问该页面时，Jetty 在那里找不到任何东西。

我的服务器代码是

```
public static void main(String[] args) throws Exception {
    Server httpServer = new Server(3030);
    DeploymentManager deploymentManager = new DeploymentManager();
    httpServer.setDumpBeforeStop(true);

    ContextHandlerCollection contextHandlerCollection = new ContextHandlerCollection();
    contextHandlerCollection.setServer(httpServer);
    deploymentManager.setContexts(contextHandlerCollection);

    WebAppProvider appProvider = new WebAppProvider();
    appProvider.setMonitoredDirName("/tmp/wars/");
    appProvider.setScanInterval(1);
    appProvider.setDeploymentManager(deploymentManager);
    appProvider.setExtractWars(true);

    httpServer.addBean(deploymentManager);
    httpServer.addBean(contextHandlerCollection);
    httpServer.addBean(appProvider);

    httpServer.start();
} 
```

如果我使用 jetty-runner jar 并单独部署它们，我的 WAR 文件部署良好，但使用上面的代码，我看到如下输出：

```
2013-01-16 15:34:30.571:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/sample,file:/private/var/folders/qg/1t5k32g9567cwwl7y6tfdhj40000gn/T/jetty-0.0.0.0-3030-sample.war-_sample-any-/webapp/},/private/tmp/wars/sample.war
2013-01-16 15:34:30.571:INFO:oejsh.ContextHandler:started o.e.j.w.WebAppContext{/sample,file:/private/var/folders/qg/1t5k32g9567cwwl7y6tfdhj40000gn/T/jetty-0.0.0.0-3030-sample.war-_sample-any-/webapp/},/private/tmp/wars/sample.war
2013-01-16 15:34:30.571:DBUG:oejuc.AbstractLifeCycle:starting HelloServlet 
```

（有更多调试文本表明我的 webapp 已启动并位于`/sample`）

当我访问时`127.0.0.1:3030/sample`（我将服务器放在端口 3030），我收到一条 404 消息，并且 Jetty 记录

```
2013-01-16 15:34:47.799:DBUG:oejs.Server:REQUEST /sample on AsyncHttpConnection@63ce0072,g=HttpGenerator{s=0,h=-1,b=-1,c=-1},p=HttpParser{s=-5,l=10,c=0},r=1
2013-01-16 15:34:47.799:DBUG:oejs.Server:RESPONSE /sample  200 handled=false 
```

我无法弄清楚我错过了什么。有没有人有这种设置的工作示例？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:36:40.237

您正在使用 WebAppProvider，但没有将其附加到 DeploymentManager（至少不是正确的方式）

示例用法： http: [//git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/LikeJettyXml .java?h=jetty-8](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/example-jetty-embedded/src/main/java/org/eclipse/jetty/embedded/LikeJettyXml.java?h=jetty-8)

消除：

```
appProvider.setDeploymentManager(deploymentManager); 
```

设置 appProvider 后在某处添加：

```
deploymentManager.addAppProvider(appProvider); 
```

您还需要向服务器添加处理程序：

```
HandlerCollection handlers = new HandlerCollection();
RequestLogHandler requestLogHandler = new RequestLogHandler();
handlers.setHandlers(new Handler[] { contextHandlerCollection, new DefaultHandler(), requestLogHandler });
StatisticsHandler stats = new StatisticsHandler();
stats.setHandler(handlers);
httpServer.setHandler(stats); 
```

# javascript - 下次登录时如何清除我的客户缓存

> ID：14367541
> 
> 赞同：10
> 
> 时间：2013-01-16T20:48:06.027
> 
> 标签：javascript, caching, webserver, browser-cache

我有一个在 hostgator 上运行的应用程序。当我对 js 文件进行更改时，我的用户在清除缓存之前看不到更改。这是将更改推送到我的应用程序的唯一选择吗？基本上，我应该进行更改，更新文件，然后请求所有用户清除他们的缓存？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T20:50:49.020

您需要对文件包含使用版本控制。每当您更改文件包含的 URI 时，浏览器将找不到缓存匹配并重新下载包含。

例如：

```
<script type="text/javascript" src="include/232/init.js"></script> 
```

其中 232 是您的可修改版本号，每当您发布新代码时都应更改该版本号。

或者，您可以使用查询字符串：

```
<script type="text/javascript" src="include/init.js?232"></script> 
```

关键是，当您希望访问者重新下载文件时，您应该以某种方式更改文件包含 URI。

如果您使用 PHP 或其他服务器端语言，您可以设置此版本控制以在您的文件包含被修改时自动发生：http: [//derek.io/blog/2009/auto-versioning-javascript-and-css-files/](http://derek.io/blog/2009/auto-versioning-javascript-and-css-files/)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-16T20:50:43.220

您可以将虚拟查询字符串附加到资产 URL：

```
<link href="http://mysite.com/main.css?v=1" rel="stylesheet" /> 
```

然后，每当您对 CSS 进行任何更改时，只需提高版本号即可。

这种技术称为**缓存清除**。[搜索谷歌](https://www.google.com/?q=cache+busting)，你会得到许多不同的变化。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T20:50:52.533

解决此问题的一个技巧是将带有某种版本或时间戳的查询字符串附加到您的`link`Javascript 调用中。例如：

```
<script src="myexternal.js?20130116" type="text/javascript"></script> 
```

这个例子很简单，但证明了这一点。基本上，这会告诉浏览器在无法识别完整路径时加载文件。每当您更改您的 javascript 文件并希望您的用户获取最新版本时，只需在问号（查询字符串）之后更新该时间戳或值。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-16T20:51:02.567

您无法清除客户端浏览器的缓存，但可以使用缓存清除技术，例如向文件添加版本控制

```
<link rel="stylesheet" href="/css/example.css?v1.0" type="text/css" /> 
```

然后当你做出改变时

```
<link rel="stylesheet" href="/css/example.css?v1.1" type="text/css" /> 
```

它可以是时间戳或其他任何东西，只是需要有所不同。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-01-16T20:53:45.593

我用来避免这个问题的技巧是修改更新脚本的 url。由于资源名称不同，这将强制客户端再次下载脚本。

最简单的方法：在 url 末尾使用版本号`js/my-script.js?v=1.0`。

更好的方法（所有导航器 100% 支持）：更改文件名本身`js/my-script.v1.0.js`。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-01-16T20:51:37.797

我有时使用的一个简单技巧是在 JavaScript/CSS 文件的路径中添加一些虚拟参数。浏览器本质上会看到不同的 URL，并且不会使用它的缓存版本。

```
$jsFile = '/js/myFile.js';                // probably cached
$jsFile = '/js/myFile.js?r='.time();      // won't ever be cached 
```

您无法真正清除客户端缓存，但您*可以*欺骗客户端浏览器，使其*认为*这是它第一次看到此文件并会再次下载它。

到达稳定版本后，不要忘记禁用此功能。缓存文件是加快应用程序加载时间的好方法。

# oracle-adf - 如何在控制台中显示 ADF - 业务组件 SQL 查询？

> ID：14367543
> 
> 赞同：3
> 
> 时间：2013-01-16T20:48:11.213
> 
> 标签：oracle-adf

我正在尝试显示（在控制台中打印）与 ADF-BC 对应的 SQL 查询。我不知道如何使用 Jdeveloper 11.1.1.1.0 和 Oracle 11g 做到这一点。我只想看看在将它们发送到 Oracle 之前将执行哪些 SQL 查询。问题是我正在处理现有的 Web 应用程序（用 ADF-BC 编写）并且响应时间太长。所以我想用 SQL Developer 测试查询并制定一些“解释计划”，看看我如何优化它。

或者，如果有人知道如何从`executeQueryForCollection(Object qc, Object[] params, int noUserParams)` 方法中获取 SQL 查询字符串（在调试模式下）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-03-07T14:20:06.003

使用 Oracle **12c**和 JDeveloper 12.1.3，您有两种选择：

*   如果您使用集成的 weblogic 服务器，您可以配置 Oracle 诊断日志记录（单击服务器日志窗口中的操作菜单），并放置`oracle.jbo`到级别`FINEST`
*   `oracle.jbo.server.ViewObjectImpl`您可以在子类实现中检索您的 SQL 查询，`executeQueryForCollection(Object qc, Object[] params, int noUserParams)`方法是记录或观察`this.getQuery()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-30T17:32:03.237

使用 Java 运行时选项运行应用程序 -Djbo.debugoutput=console 这将在日志窗口中打印信息。我会打印很多信息，所以你应该快速关闭它。要在文件中获取相同的信息，请使用 -Djbo.debugoutput=file 这会将信息打印到文件中，并且仅将文件名写入日志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-02-28T13:29:12.653

> **在独立 WLS 中启用诊断消息**在 12.2.1.2 中测试

在以下示例中，将使用 JDeveloper 随附的 WLS 作为 Windows 机器中的独立设备。
转到 WLS bin 目录。在我们的例子中 %JDEV_SYSTEM_DIR%\DefaultDomain\bin\ 例如 C:\JDeveloper\mywork\system11.1.1.3.37.56.60\DefaultDomain\bin\ （注意：查看相关帖子以从运行 WLS 的日志中找出 JDEV_SYSTEM_DIR。）

打开文件 setDomainEnv.cmd 在文件顶部注释后输入以下行

```
set DIAGNOSTIC_OPTIONS=-Djbo.debugoutput=file -Djbo.logging.show.function=true 
```

然后修改以下行

```
set JAVA_PROPERTIES=-Dwls.home=%WLS_HOME% -Dweblogic.home=%WLS_HOME% 
```

（在同一行。）到

```
set JAVA_PROPERTIES=-Dwls.home=%WLS_HOME% -Dweblogic.home=%WLS_HOME% %DIAGNOSTIC_OPTIONS% 
```

[http://adfhowto.blogspot.ca/2011/01/enable-diagnostic-messages-on-you.html](http://adfhowto.blogspot.ca/2011/01/enable-diagnostic-messages-on-you.html)

# asp.net - 如何在 Visual Studio 2012 的自定义数据库中创建 sql 成员表

> ID：14367548
> 
> 赞同：2
> 
> 时间：2013-01-16T20:48:50.360
> 
> 标签：asp.net, sql, visual-studio-2012, membership-provider

我曾经在 vs2010 中创建网站项目，并在另一个数据库托管服务器（如 GoDaddy）中创建一个简单的 SQL MEMBERSHIP SCHEMA。我的数据库模式表如下所示。

```
aspnet_Applications
aspnet_Membership
aspnet_Paths
aspnet_PersonalizationAl lUsers
aspnet_PersonalizationPeruser
aspnet_Profile
aspnet_Roles
aspnet_SchemaVersions
aspnet_Users
aspnet_Usersl nRoles
aspnet_Web Event_Events 
```

但现在我正在尝试新的 VS2012。默认项目使用休闲表创建一个本地数据库：

```
Applications
Memberships
Profiles
Roles
Users
UserslnRoles 
```

，这与我以前看到的架构完全不同。没有`aspnet_`前缀，并且表格不同...我不能只重命名表格。

该`aspnet_regsql`工具创建旧版本。带`aspnet_`前缀..

如何在 Visual Studio 2012 中创建这个新架构？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-17T21:17:55.647

好的，经过一番研究，这是一个解决方案..

在 vs2012 中，当使用 asp.net framework 4.5 时，我不需要创建这个表。您只需将正确的连接字符串放在 web.config 文件中并将其命名为“DefaultConnection”。

当您的注册表单尝试创建新用户帐户时，它会验证表是否存在并自行创建所有表。

就是这样，很简单。

# c++ - SSE：将 __m128 转换为浮点数

> ID：14367553
> 
> 赞同：7
> 
> 时间：2013-01-16T20:49:11.343
> 
> 标签：c++, c, sse

我有以下一段 C 代码：

```
__m128 pSrc1 = _mm_set1_ps(4.0f);
__m128 pDest;
int i;
for (i=0;i<100;i++) {
       m1 = _mm_mul_ps(pSrc1, pSrc1);      
       m2 = _mm_mul_ps(pSrc1, pSrc1);        
       m3 = _mm_add_ps(m1, m2);             
       pDest = _mm_add_ps(m3, m3); 
}

float *arrq = (float*) pDest; 
```

直到 for 循环结束之前的一切都有效。我现在要做的是将 __m128 类型转换回浮动。由于它存储了 4 个浮点数，我想我可以轻松地将其转换回浮点数*。我究竟做错了什么？（这是一个测试代码，所以不要怀疑）。我基本上尝试了我能想到的所有可能的转换。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-16T20:51:42.230

你需要用`_mm_store_ps`它来把它放回浮动中。代码：

```
// result must be 16-byte aligned
float result [4];
_mm_store_ps (result, pDest);

// If result is not 16-byte aligned, use _mm_storeu_ps
// On modern CPUs this is just as fast as _mm_store_ps if
// result is 16-byte aligned, but works in all other cases as well
_mm_storeu_ps (result, pDest); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-02T11:10:12.010

我相信如果你施法得当，施法是有效的。我面前没有代码，但我很确定这对我有用：

```
float *arrq = reinterpret_cast<float*>(&pDest); 
```

请注意，它使用 C++ 强制转换来描述您在做什么，并将其*地址*转换为指针。

# c# - 扩展 rss 提要并从 SyndicationFeed for Win8 应用程序读取项目

> ID：14367561
> 
> 赞同：1
> 
> 时间：2013-01-16T20:49:21.597
> 
> 标签：c#, windows-8, rss, syndicationfeed

我已经使用自定义字段项扩展了 RSS 提要，例如，使用图像 url (http://linktoimage

我正在阅读 RSS 提要：

```
 SyndicationFeed feed = await client.RetrieveFeedAsync(new Uri(feedUrl)); 
```

但是为了阅读新元素，我需要使用项目扩展 SyndicationFeed（它需要一个默认的 RSS 项目）。我找不到最近的例子来说明如何做到这一点。大多数可用代码无法应用于 Win8 应用程序。我找到的最接近的是：

```
 i.ElementExtensions.First(element => element.NodeName == "imgurl").NodeValue); 
```

但这导致了异常错误。当查看元素的值时，它向我显示的是已发布的标签而不是值。我希望它找到第一个 imgurl 标签并返回它的值。就像在我找到代码的代码中一样（[http://code.msdn.microsoft.com/windowsapps/XAML-Twitter-Client-e343d336](http://code.msdn.microsoft.com/windowsapps/XAML-Twitter-Client-e343d336)）

使用“SyndidationFeed”时，如何读取和添加到提要中的额外 xml 标签（作为字符串）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:44:11.720

最好的方法是使用 LINQ。例如，阅读 WordPress RSS（注意评论）：

```
XmlDocument xDoc = await XmlDocument.LoadFromUriAsync(new Uri(blog.URL)); //URL you're trying to read
        StringReader stringReader= new StringReader(xDoc.GetXml());
        XmlReader xmlReader = XmlReader.Create(stringReader);
        XDocument loadedPosts = XDocument.Load(xmlReader); //this can be done simpler using HttpClient.GetStringAsync
        XNamespace dc = "http://purl.org/dc/elements/1.1/";
        XNamespace content = XNamespace.Get("http://purl.org/rss/1.0/modules/content/"); //declare namespaces for dc:content
        var data = from query in loadedPosts.Descendants("item") //gets all the "item" tags
                   select new Post //class you must create
                   {
                       NombreBlog = (string)query.Parent.Element("title"), //then you simply change 'Element("title")' with 'Element("propertyYouWant")'
                       Titulo = (string)query.Element("title"),
                       Autor = (string)query.Element(dc + "creator"),
                       Contenido = (string)query.Element(content + "encoded"),
                       PubDate = (string)query.Element("pubDate"),
                       Link = (string)query.Element("link"),
                       ID = getId((string)query.Element("guid")),
                       Imagen = getImage((string)query.Element(content + "encoded"))
                   }; 
```

通过这种方式，您可以获得所需的所有属性或标签，例如，您甚至可以为它们分配函数，传递标签并仅返回图像源。

# java - Tomcat 6 - 如何配置摘要 SHA-256

> ID：14367574
> 
> 赞同：1
> 
> 时间：2013-01-16T20:49:47.730
> 
> 标签：java, mysql, authentication, tomcat6

我正在使用 Tomcat 6，目前表单身份验证在 MySql 数据库中用作明文密码。我已经在密码中添加了加密以散列 SHA-256 中的密码，它似乎可以工作，但是当我尝试使用 server.xml 中的 digest="SHA-256" 和 digestEncoding="base64" 通过 Tomcat 6 进行身份验证时，它不会进行身份验证。如果我从数据库中复制密码并将其输入密码字段，我可以验证我的用户。

如何让 Tomcat 允许我使用普通密码但在 MySql 中存储的哈希密码对用户进行身份验证？

这是我添加到我的应用程序的哈希代码：

```
 MessageDigest messageDigest = MessageDigest.getInstance("SHA-256");
    byte bin[] = messageDigest.digest(password.getBytes("UTF-8"));
    return Base64.encodeBase64String(bin); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T15:23:56.960

这个问题的答案实际上很简单——创建一个自定义的 Tomcat 领域。领域是执行实际身份验证的部分，如果您想针对您的数据库进行测试（特别是如果加密或散列），领域身份验证方法是您必须覆盖的。

见[http://www.christianschenk.org/blog/setup-your-own-tomcat-security-realm/](http://www.christianschenk.org/blog/setup-your-own-tomcat-security-realm/)

# multithreading - Perl - Win32::GUI 和线程泄漏的标量

> ID：14367577
> 
> 赞同：0
> 
> 时间：2013-01-16T20:49:58.883
> 
> 标签：multithreading, perl, win32gui, scalar

我只是将 Win32-GUI 与线程（Perl 5.16）结合使用，我想出了一些我不太理解的警告和错误。

代码如下：

```
 use strict;
    use warnings;
    use Win32::GUI();
    use threads;

    my $main = Win32::GUI::Window->new(
        -name => 'main',
        -title => 'Multithreaded Test',
        -size => [300,100],
    );
    my $button1 = $main->AddButton(
        -name => 'button1',
        -text => 'Click me',
        -pos => [10,10],
        -width => 120,
    );
    sub button1_Click {
        my $thread1 = threads->create(\&do_something);
        $thread1->join();
    }
    sub do_something {
        sleep(1);
    }
    $main->Center();
    $main->Show();
    Win32::GUI::Dialog(); 
```

当我单击按钮并在 1 秒后加入线程时，我得到以下控制台输出：

> 在全局销毁期间，可在 C:/Perl/site/lib/Win32/GUI.pm 第 3480 行对错误池 35bcd90 而不是 2a1718 进行释放。在全局销毁期间，可在 C:/Perl/site/lib/Win32/GUI.pm 第 3480 行对错误池 35bcd90 而不是 2a1718 进行释放。标量泄露：1

我发现了几个关于这个“标量泄露”问题的主题，但遗憾的是不是一个有效的解决方案。

你有什么主意吗？

谢谢，

最大限度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:06:01.267

这可能不是问题，但您需要`Terminate`为您的`main`窗口提供一个停止主消息循环的处理程序。像这样

```
sub main_Terminate { -1 } 
```

# css - 100% 高度的 div 遇到问题

> ID：14367578
> 
> 赞同：0
> 
> 时间：2013-01-16T20:50:03.947
> 
> 标签：css, html, height

我对 CSS 100% 高度有一个奇怪的问题。我的站点的站点如下：

```
<html>
  <body>
    <div id="container">
      <div id="header"></div>
      <div id="content"></div>
    </div>
  </body>
</html> 
```

我试图让容器的最小高度为 100%，所以我的 CSS 如下：

```
html { min-height: 100%; }
body { height: 100%; }
#container { height: 100%; } 
```

问题是，`#container`不会填充 100% 的高度，只会根据 and 中的内容量进行扩展`#header`，`#content`如果`#header`and`#content`为空或已删除，`#container`则根本不会扩展。

我觉得我必须忽略一些非常简单的事情，但一直在看这个并且我处于死胡同！有人可以指出问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:52:31.807

**百分比高度**：要将百分比高度设置为`#container`，其父元素必须具有特定高度。在这种情况下，您可以使用`height:100%`或来实现您想要的特定效果`min-height:100%`。要实现其中任何一个，每个祖先的`#container`高度或最小高度必须为 100%。

```
html, body, #container {
    height: 100%;
} 
```

或者

```
html, body, #container {
    min-height: 100%;
} 
```

[JS 小提琴示例](http://jsfiddle.net/gMKLN/)

* * *

**使用`min-height`vs.`height`**：在您问题的狭窄范围内，它们将具有相同的效果。但是在同时具有高度和最小高度的页面上：

*   如果 min-height 大于 height（指定或未指定），将使用 min-height。
*   如果 height 大于 min-height （无论指定或未指定），将使用高度。

如果指定了最大高度（例如`#container { max-height: 50px }`），这将超过高度。但是，最大高度不能超过最小高度。[在此链接上阅读更多内容](http://www.w3.org/TR/CSS2/visudet.html#min-max-heights)。

*注意：* [`min-height`某些版本的 Internet Explorer 不支持](http://caniuse.com/#feat=minmaxwh)。

# angularjs - Angular.js：基于对象中的项目的 ng-repeat

> ID：14367581
> 
> 赞同：2
> 
> 时间：2013-01-16T20:50:19.803
> 
> 标签：angularjs

基本上在页面上有两个 ng-repeats 共享一个对象。只有当它们与数据匹配时，我才想重复项目`type`。

模拟对象

```
 $scope.events = [
            {
                date: "1/16/13",
                time: "11:30",
                type: "First",
                restaurant: "Quiznos",
                location: "Echo",
                cuisine: "American",
                link: "http://google.com/event?id=239292"
            },
            {
                date: "1/16/13",
                time: "1:30",
                type: "Second",
                restaurant: "Snarfs",
                location: "5th Floor",
                cuisine: "American",
                link: "http://google.com"
            }
]; 
```

标记

```
 <tr ng-repeat="event in events.type " onClick="window.open('{{event.link}}','_blank');">
                <td>{{event.time}}</td>
                <td>{{event.restaurant}}</td>                   
                <td>{{event.location}}</td>
                <td>{{event.cuisine}}</td>
        </tr> 
```

所以我想要两个 ng-repeats。on 用于 type = First，一个用于 type = Second

就像是`ng-repeat="event in events.type = 'First'"`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T21:01:29.107

您正在寻找[过滤器过滤器](http://docs.angularjs.org/api/ng.filter%3afilter)...

```
<tr ng-repeat="event in events | filter:{ type: 'First'}"/> 
```

# visual-studio - 如何从 Visual Studio 中的解决方案为特定项目运行干净的构建

> ID：14367582
> 
> 赞同：54
> 
> 时间：2013-01-16T20:50:22.707
> 
> 标签：visual-studio, command-line, msbuild

假设我需要在命令行中构建一个完整的解决方案（它有多个项目），是否可以为特定项目运行干净的构建并为项目的其余部分运行增量构建？

谢谢。

* * *

## 回答 #1

> 赞同：110
> 
> 时间：2013-01-16T20:52:38.063

使用 msbuild 并传递 Clean 和 Rebuild 目标：

```
msbuild path\to\solution\yoursolution.sln /t:Clean;Rebuild 
```

或者，如果您只想重建单个项目：

```
msbuild path\to\project\yourproject.csproj /t:Clean;Rebuild 
```

msbuild 在 Windows SDK 或 Visual Studio 命令提示符下可用。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-05-21T17:06:31.263

```
MSBuild.exe MultiProjectSolution.sln /t:"ProjectName:clean" 
```

将仅清理解决方案中的指定项目。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T21:12:43.317

清理特定项目：

```
msbuild MyProjectFile1 /t:Clean
msbuild MyProjectFile2 /t:Clean
... 
```

对于您需要清理的所有项目，必须重复此操作，因为 MSBuild 仅接受命令行上的单个项目。

逐步构建整个解决方案：

```
msbuild MySolutionFile 
```

请注意，这将为项目和解决方案构建默认配置/平台，通常是 Debug/AnyCPU 或 Debug/Win32。如果你想要特定的配置/平台，你必须像这样添加参数：`/p:Configuration=Release /p:Platform=x64`到每个 msbuild 命令行。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-10-27T14:18:12.873

只是在 PowerShell 中使用的一个小改进：

```
pathTo\MSBuild.exe pathTo\solutionfile.sln /target:"clean;Build" 
```

[不同目标的来源](https://docs.microsoft.com/en-us/visualstudio/msbuild/msbuild-targets?view=vs-2019)

# django - Django REST Framework - 发布包含自然键的外键字段？

> ID：14367595
> 
> 赞同：12
> 
> 时间：2013-01-16T20:51:10.727
> 
> 标签：django, django-models, django-rest-framework

我最近开始使用 Django REST 框架（以及 Django 和 Python——我是 RTOS/嵌入式系统人员！）以实现 RESTful Web API。还没有任何无法通过 Google 解决的问题，但是这个问题已经让我难倒了几个小时。

我有一个嵌入式系统，它监听与一系列设备相关的事件——类似于电话拨打电话，为了简洁起见，我将在这里讨论。电话有一个号码和大量与之相关的呼叫（它已拨打）。呼叫具有关联的电话（发出呼叫的电话）和创建时间。发生调用时，应将其发布到 API。我有一个嵌入式系统，它监听呼叫及其始发电话号码，并将它们提交给 API。由于嵌入式系统知道电话号码，我希望它提交：`{"srcPhone":12345678}`而不是`{"srcPhone":"http://host/phones/5"}`. 这避免了我的嵌入式系统需要知道每部电话的主键（或每次要提交呼叫时按号码获取电话）。

谷歌和 Django 文档建议我可以使用自然键来实现这一点。我的尝试如下：

**模型.py**

```
from django.db import models
from datetime import datetime
from pytz import timezone
import pytz
from django.contrib.auth.models import User

# Create your models here.
def zuluTimeNow():
    return datetime.now(pytz.utc)

class PhoneManager(models.Manager):
    def get_by_natural_key(self, number):
        return self.get(number=number)

class Phone(models.Model):
   objects     = PhoneManager()
   number      = models.IntegerField(unique=True)

   #def natural_key(self):
   #    return self.number

   class Meta:
      ordering = ('number',)

class Call(models.Model):
    created    = models.DateTimeField(default=zuluTimeNow, blank=True)
    srcPhone   = models.ForeignKey('Phone', related_name='calls')

    class Meta:
        ordering = ('-created',) 
```

**视图.py**

```
# Create your views here.
from radioApiApp.models import Call, Phone
from radioApiApp.serializers import CallSerializer, PhoneSerializer
from rest_framework import generics, permissions, renderers
from rest_framework.reverse import reverse 
from rest_framework.response import Response
from rest_framework.decorators import api_view

@api_view(('GET',))
def api_root(request, format=None):
    return Response({
        'phones': reverse('phone-list', request=request, format=format),
        'calls': reverse('call-list', request=request, format=format),
    })

class CallList(generics.ListCreateAPIView):
    model = Call
    serializer_class = CallSerializer
    permission_classes = (permissions.AllowAny,)

class CallDetail(generics.RetrieveDestroyAPIView):
    model = Call
    serializer_class = CallSerializer
    permission_classes = (permissions.AllowAny,)

class PhoneList(generics.ListCreateAPIView):
   model = Phone
   serializer_class = PhoneSerializer
   permission_classes = (permissions.AllowAny,)

class PhoneDetail(generics.RetrieveDestroyAPIView):
   model = Phone
   serializer_class = PhoneSerializer
   permission_classes = (permissions.AllowAny,) 
```

**序列化程序.py**

```
from django.forms import widgets
from rest_framework import serializers
from radioApiApp import models
from radioApiApp.models import Call, Phone

class CallSerializer(serializers.HyperlinkedModelSerializer):
   class Meta:
       model = Call
       fields = ('url', 'created', 'srcPhone')

class PhoneSerializer(serializers.HyperlinkedModelSerializer):
   calls = serializers.ManyHyperlinkedRelatedField(view_name='call-detail')
   class Meta:
      model = Phone
      fields = ('url', 'number', 'calls') 
```

为了进行测试，我创建了一个号码为 123456 的电话。然后我 POST {"srcPhone":123456} 到`http://host/calls/`（在 urls.py 中配置以运行 CallList 视图）。这会在 /calls/ 处产生 AttributeError -“int”对象没有属性“startswith”。异常发生在 rest_framework/relations.py（第 355 行）中。如果有帮助，可以发布整个跟踪。在阅读了relationship.py 后，看起来REST 框架并没有按号码查找电话，而是将srcPhone 属性当作一个URL 来处理。这通常是正确的，但我希望它通过自然键查找电话，而不是提供 URL。我在这里错过了什么？

谢谢！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-17T09:16:12.327

您正在寻找的是`SlugRelatedField`. 请参阅[此处的文档](http://django-rest-framework.org/api-guide/relations.html#slugrelatedfield)。

> 但处理 srcPhone 属性，就好像它是一个 URL。

确切地。您正在使用`HyperlinkedModelSerializer`，因此`srcPhone`默认情况下，关键是使用超链接关系。

`'int' object has no attribute 'startswith'`您看到的异常是因为它需要一个 URL 字符串，但接收的是一个整数。真的应该导致描述性验证错误，所以我[为此创建了一个票证](https://github.com/tomchristie/django-rest-framework/issues/590)。

如果您改为使用类似这样的序列化程序：

```
class CallSerializer(serializers.HyperlinkedModelSerializer):
    srcPhone = serializers.SlugRelatedField(slug_field='number')

    class Meta:
        model = Call
        fields = ('url', 'created', 'srcPhone') 
```

然后，`'srcPhone'`键将改为使用关系`'number'`目标上的字段来表示关系。

我计划在不久的某个时候对关系文档进行更多的工作，所以希望这在未来会更加明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T22:53:52.317

（不能作为评论发布，太长了）

汤姆上面的回答解决了这个问题。

但是，我还希望有一个超链接字段返回到电话资源。SlugRelatedField 允许我使用属于电话的整数字段提交，但是在获取结果呼叫资源时，它也序列化为整数。我确定这是预期的功能（让它从整数序列化似乎不是很优雅，而是从超链接序列化）。我找到的解决方案是将另一个字段添加到 CallSerializer:`src = serializers.HyperlinkedRelatedField(view_name='phone-detail',source='srcPhone',blank=True,read_only=True)`并将该字段添加到 Meta 类。然后我只 POST srcPhone（一个整数）和 GET srcPhone 加上 src，这是一个到 Phone 资源的超链接。

# python - Pip 安装不适用于 Scikit-Learn

> ID：14367596
> 
> 赞同：3
> 
> 时间：2013-01-16T20:51:12.220
> 
> 标签：python, scikit-learn

当我尝试进入`pip install scikit-learn`Python shell 时，我收到“无效语法”消息。我已经安装了 Scipy 和 Numpy，所以不应该有任何依赖问题。怎么了？而且我还是 Python 新手，所以我不想手动安装该模块。我在 Vista 32 位上使用 Python 2.7。

感谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-16T21:07:20.710

如果您使用 Windows 可执行文件（.exe 文件）安装了所有内容，您还应该将其安装为可在此处下载的可执行文件 - [Scikit Learn Executables](http://sourceforge.net/projects/scikit-learn/files/)

或者，

python shell 不是运行`pip`命令的地方。所以在windows中打开命令行终端并执行`pip install -U scikit-learn`

然后去python shell并导入它。

# c - 有人可以解释 C 指针吗

> ID：14367597
> 
> 赞同：-6
> 
> 时间：2013-01-16T20:51:19.350
> 
> 标签：c, pointers

有人可以解释为什么 v[2] 最终的值为 -3，而不是空的，或者 25 吗？

```
#include <stdio.h>

 int main ()
 {
   int v[5];
   int *z = &v[0];
   *z=12;
   z++;
   *z=16;
   z++;
   *z=-3;
   z++;
   *z=25;

   printf ("%d", v[2]);
   return 0;
 } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:56:03.480

```
#include <stdio.h>
int main ()
{
    int v[5];
    int *z = &v[0]; // z points to v[0]
    *z=12; // v[0] = 12
    z++;   // z points to v[1] now
    *z=16; // v[1] = 16
    z++;   // z points to v[2] now
    *z=-3; // etc
    z++;   // etc
    *z=25; // etc
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:58:09.880

每次都得到 -3，因为这是数组中的第三个元素（请记住，0 算作第一个数组槽）。每次增加 Z (Z++) 时，都会指向下一个可用插槽。*Z = some_Number 只是将该值分配给指向的数组槽。

```
 printf ("%d", v[3]); //should give you 25 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:06:04.253

`z`是一个指向整数数组的指针，这段代码：

`*z=12;`等价于`v[0]=12;`因为 z 被取消引用。

但是，您不是在递增`*z`，这是取消引用的指针，`v[0]`并且会导致`v[0]`'s 的值递增。

相反，您正在递增`z`，这是指针自己的值 - 的地址`v[0]`。

`z`是一个指针，当你在这里增加它时：`z++;`结果本质上是数组中的下一个元素`v[0]`。

在您的代码中，生成的数组将像这样填充：

`*z=12;`=`v[0]=12;`

`z++;`

`*z=16;`=`v[1]=16;`

等等。

# jsf - 将属性值设置为 JSF 代码

> ID：14367601
> 
> 赞同：0
> 
> 时间：2013-01-16T20:51:29.327
> 
> 标签：jsf, jsf-2

我很感兴趣如何将值设置为 JSF 页面。例如像这样的东西。

```
itemValue="#{ud.datacenterId = datacenters.datacenterid}" 
```

如何直接将 datacenters.datacenterid 的值分配给 ud.datacenterId？这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:54:28.217

您只能使用 action(listener) 方法来做到这一点。

例如

```
<h:commandButton ... action="#{ud.setDatacenterId(datacenters.datacenterid)}" /> 
```

或者

```
<h:commandButton ... actionListener="#{ud.setDatacenterId(datacenters.datacenterid)}" /> 
```

或者

```
<h:commandButton ...>
    <f:setPropertyActionListener target="#{ud.datacenterId}" value="#{datacenters.datacenterid}" />
</h:commandButton> 
```

或者

```
<h:commandButton ...>
    <f:ajax listener="#{ud.setDatacenterId(datacenters.datacenterid)}" />
</h:commandButton> 
```

等等

如果您的后续问题实际上是“如何在页面加载期间调用它？”，那么您实际上有一个不同的问题。根据您的问题历史，您正在使用 PrimeFaces。那就看看吧[`<p:remoteCommand autoRun="true">`](http://www.primefaces.org/showcase/ui/remoteCommand.jsf)。我仍然只是想知道这一切是否[真的](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)是您想到的具体功能需求的正确解决方案。

# python - 如何通过使用“动态”代码来减少此示例中的条件开销

> ID：14367605
> 
> 赞同：1
> 
> 时间：2013-01-16T20:51:31.393
> 
> 标签：python

在这个幼稚的代码示例中，我遇到的问题是，每次调用 .do() 时，都需要处理一个条件列表，以使类按预期运行。这不是很有效，我很确定还有另一种方法，但我不能指望它。

我可以采取什么方法使这个类的行为更加相同，但以更有效的方式？

```
class translate():
    def __init__(self, EN=True, FR=False, DE=False, SP=False):
        self.EN=EN
        self.FR=FR
        self.DE=DE
        self.SP=SP

    def do(self, word):
        if self.EN:
            self.en(word)
        if self.FR:
            self.fr(word)
        if self.DE:
            self.de(word)
        if self.SP:
            self.sp(word)

    def en(self, word):
        print "In English: %s"%(word)

    def fr(self, word):
        print "In French: %s"%(word)

    def de(self, word):
        print "In German: %s"%(word)    

    def sp(self, word):
        print "In Spanish: %s"%(word)

tr=translate(FR=True)
tr.do("blah") 
```

我可以这样做，但我只能做一种语言：

```
 class translate():
    def __init__(self, EN=False, FR=False, DE=False, SP=False):
        if EN:
            self.do=self.en
        elif FR:
            self.do=self.fr
        elif DE:
            self.do=self.de
        elif SP:
            self.do=self.sp
        else:
            self.do=self.unkown

    def en(self, word):
        print "In English: %s"%(word)

    def fr(self, word):
        print "In French: %s"%(word)

    def de(self, word):
        print "In German: %s"%(word)    

    def sp(self, word):
        print "In Spanish: %s"%(word)

    def unknown(self, word):
        print "Unknown: %s"%(word)

tr=translate(FR=True)
tr.do("blah") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:06:21.297

在您的原始代码中，`do`可以调用多个翻译方法。因此，我们应该跟踪一个列表（或者可能是一组）翻译方法：

```
class Translate():
    def __init__(self, EN=True, FR=False, DE=False, SP=False):
        self.translators = [method for lang, method in
                            zip((EN, FR, DE, SP),
                                (self.en, self.fr, self.de, self.sp))
                            if lang]

    def do(self, word):
        for method in self.translators:
            method(word)

    def en(self, word):
        print "In English: %s" % (word)

    def fr(self, word):
        print "In French: %s" % (word)

    def de(self, word):
        print "In German: %s" % (word)

    def sp(self, word):
        print "In Spanish: %s" % (word)

tr = Translate(FR=True)
tr.do("blah") 
```

产量

```
In English: blah
In French: blah 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:18:44.780

您实际上并没有在任何地方存储翻译，因此您只需在为对象初始化的每种语言输入单词时按拼写打印单词。您需要一个系统来存储和检索翻译，并为您提供为给定单词设置翻译的所有值。这会起作用：

```
class WordTranslationMap(dict):

    def __init__(self):
        dict.__init__(self, languages)
        for language in languages:
            self[language] = None

    def all(self):
        for language, translation in self.iteritems():
            if translation is not None:
               yield (language, translation)

class TranslationDictionary(dict):

    def __init__(supported_languages=['EN', 'SP', 'FR', 'DE']):
        dict.__init__(self)
        self.supported_languages = supported_languages

    def __getitem__(self, key):
        try:
            return dict.__getitem__(self, key)
        except KeyError:
            word = WordTranslationMap(self.supported_languages)
            self[key] = word
            return word

words = TranslationDictionary()
words['hello']['EN'] = 'hello'
words['hello']['FR'] = 'bonjour'
for translation in words['hello'].all:
     print translation 
```

或者，先按语言组织：

```
class WordToken(object):
    def __init__(value, translation_dictionary, word_id=None):
        self.value = value
        self.word_id = translation_dictionary.next_id.next() if word_id is None else word_id
        self.translation_dictionary= translation_dictionary

    def __getitem__(self, key):
        try:
            return self.translation_dictionary[key][self.word_id]
        except KeyError:
            return None

    def __setitem__(self, key, value):
        self.translation_dictionary[key][self.word_id] = value

    def all(self):
        for language, translations in self.translation_dictionary.language_dictionaries.iteritems():
            try:
                yield (language, str(translations[self.word_id]))
            except KeyError:
                pass

    def __str__(self):
        return self.value

class LanguageDictionary(dict):

    def __init__(self, translation_dictionary):
        dict.__init__(self)
        self.translation_dictionary = translation_dictionary

    def add_word(self, word):
        word = WordToken(word, self.translation_dictionary)
        self[word.word_id] = word

    def __setitem__(self, key, value):
        try:
            if value.word_id != key:
                raise ValueError('Tried to set translation to word object that does not match language dictionary key.')
        except AttributeError:
            value = WordToken(value, self.translation_dictionary, key)
        dict.__setitem__(self, key, value)

class TranslationDictionary(object):

    def __init__(self):
        self.next_id = itertools.count(start=0, step=1)
        self.language_dictionaries = defaultdict(LanguageDictionary)

    def __getitem__(self, key):
        return self.language_dictionaries[key]

dictionary = TranslationDictionary()
dictionary['EN'].add_word('hello')
dictionary['EN']['hello']['FR'] = 'bonjour'
for translation in dictionary['EN']['hello'].all():
    print translation 
```

# sql - 删除精确的重复项

> ID：14367609
> 
> 赞同：5
> 
> 时间：2013-01-16T20:51:36.033
> 
> 标签：sql, sql-server, tsql, sql-server-2008-r2

我在表中有大约 2000 个完全相同的重复项，我想删除其中一个是否有办法：示例数据如下所示：

```
Year    ID   Name   Type
2015    200  John   S
2015    200  John   S 
2014    100  Peter  T
2014    100  Peter  T 
```

我希望输出为：

```
Year    ID   Name   Type
2015    200  John   S
2014    100  Peter  T 
```

我试过使用 Row_number 但不知道如何删除

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-16T20:55:31.010

我将假设您想***保留***一行，而不是***删除***一行。如果您只想针对这组特定的值或处理所有重复项，也不清楚。

```
;WITH x(y,i,n,t,r) AS 
(
  SELECT [Year], ID, Name, [Type],
    ROW_NUMBER() OVER (PARTITION BY [Year], ID, Name, [Type] ORDER BY [Year])
  FROM dbo.table_name
  /*
    WHERE [Year] = 2015
    AND ID = 200
    AND Name = 'John'
    AND [Type] = 'S'
  */
)
DELETE x WHERE r > 1; 
```

如果要删除一行并保留 1999 个重复项，则将最后一行更改为：

```
DELETE x WHERE r = 1; 
```

如果您只想处理此集合，请删除`/*`and `*/`。

我还建议远离不好的列名，例如`year`and `type`（在很多情况下它们需要方括号）和`ID`（这是什么意思？）。

# java - 在网络与 gps 提供商之间连接

> ID：14367610
> 
> 赞同：0
> 
> 时间：2013-01-16T20:51:36.293
> 
> 标签：java, android, geolocation

如果我从上一个位置移动 200 米，我创建了一个应用程序，它每 10 分钟生成一个位置。它基于网络和 gps 提供商。

我的问题是，如果我长时间在同一个地方，就会发生错误。让我们假设 gps 提供商生成了一个精度为 600 的位置，而网络提供商生成了一个精度为 800 的位置。我的应用程序将选择 gps 提供商，下一次 gps 生成位置的时间是我通过 200 个无线电但看起来网络位置不断生成位置，其中一些可能更准确，然后我的位置发生了变化而我在同一个地方。

这是一个问题，因为在同一个地方呆了几个小时会为我生成位置的音调而不是 1（这是我正在寻找的）。

我没有附上代码，因为我猜这是更理论的问题。

**编辑**代码附件

更新请求：

```
mLocationManager.requestLocationUpdates(provider, TEN_SECONDS*6*10, TEN_METERS*20, listener); 
```

在位置之间进行选择：

```
 if(gpsLocation == null || gpsLocation.getAccuracy() > 1000)
    {
        if(!(networkLocation == null || networkLocation.getAccuracy() > 1000))
            location = networkLocation;
    }
    else
        if(networkLocation == null)
        {
            if(gpsLocation.getAccuracy() < 1000)
                location = gpsLocation;
        }
        else
            if(gpsLocation.getAccuracy() < networkLocation.getAccuracy() && gpsLocation.getAccuracy() < 500)
                location = gpsLocation;
            else
                if(networkLocation.getAccuracy() < 1000)
                    location = networkLocation;
    if(location!=null)
    {
        Message.obtain(mHandler,
                UPDATE_LATLNG,
                location.getLatitude() + ", " + location.getLongitude()).sendToTarget();
         if (mGeocoderAvailable) 
            doReverseGeocoding(location);
    } 
```

这是处理程序：

```
 mHandler = new Handler() 
    {
        public void handleMessage(Message msg) 
        {
            if(msg.what == UPDATE_ADDRESS)
            {
                LocationService.this.address = (String) msg.obj;
                new SendLocation(LocationService.this.id,(String)msg.obj); //sends location to the db
                LocationService.this.gpsLocation = null;
                LocationService.this.networkLocation = null;
            }
        }
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:24:32.620

如果您通过 GPS 提供商获取位置，它会更准确，因此如果下次您通过网络提供商获取位置并且相差超过 500 米，则将其存储为值，如果位置小于此值由网络提供商提供跳过它。如果位置由 GPS 提供，则将其存储为当前位置。

# c - 使用 SSE SIMD 转换函数

> ID：14367611
> 
> 赞同：0
> 
> 时间：2013-01-16T20:51:37.210
> 
> 标签：c, function, sse, simd

我试图在函数中使用 sse simd 指令来评估一个值。

```
 double integrate (double from, double to,double* counter)
{

    __m128d sum=_mm_setzero_pd();
    __m128d val=_mm_setzero_pd();
    __m128d width;
    __m128d fr=_mm_set1_pd(from);
    __m128d t=_mm_set1_pd(to);
    __m128d one=_mm_set1_pd(1.0);
    __m128d a,b,c,step;
    double result=0,i=0;

    width=_mm_set1_pd((to-from)/1000);

    while(i<1000){
    step = _mm_loadu_pd(&counter[i]);
    a    = _mm_mul_pd(step,width);
    b    = _mm_add_pd(fr,a);
        val  = _mm_div_pd(one,b);   
    c    = _mm_mul_pd(val,width);
    sum  = _mm_mul_pd(sum,c);
    i=i+2;
    }

    for(int i=0; i<1000; i++) {
        result += sum[i];
    }

    return result;
} 
```

它需要 3 个参数，其中两个是双精度的，其中一个是用于将数组传递给函数的双指针。我尝试转换的代码是这样的；

```
double integrate (double from, double to)
{
    double sum=0,val=0,width;
    int i;
    width=(to-from)/1000;

    for(i=1;i<1000;i++){    
    val=1/(from+(i*width));
    sum=sum+(val*width);
    }

    return sum;
} 
```

代码评估一个值，但它不是我预期的。据我所知，我真正的问题是关于这部分；

```
step = _mm_loadu_pd(&counter[i]); 
```

我想要做的是将称为计数器的数组中的数字（保存从 0 到 999 的数字）传递到步进向量 2 数字中（例如 r0:0 r1:1,r0:2,r1:3）并评估其他的东西.我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:35:14.240

改变：

```
step = _mm_loadu_pd(&counter[i]); 
```

至：

```
step = _mm_set1_pd(counter[i]); 
```

# session - 读取或写入会话时的线程安全问题

> ID：14367613
> 
> 赞同：1
> 
> 时间：2013-01-16T20:51:38.723
> 
> 标签：session, servlets, thread-safety, session-variables

作者在这里说：http: [//java.dzone.com/articles/session-and-clustered-java-web](http://java.dzone.com/articles/session-and-clustered-java-web) ：

> 使用 servlet，您可以自己将对象放入会话中并从会话中取出对象。单独来说，这会带来线程安全问题......

现在会话是每个用户一个。因此，作为用户请求的一部分，当用户操作会话时，没有其他请求可以操作同一会话。那么我们这里怎么会有线程安全问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T20:55:07.807

如果同一用户使用同一浏览器并打开多个选项卡，则可能有两个请求操纵同一会话。

# java - 为什么我得到空指针异常？

> ID：14367617
> 
> 赞同：0
> 
> 时间：2013-01-16T20:51:48.977
> 
> 标签：java, android, sqlite, cursor, nullpointerexception

我正在使用以下代码从数据库中获取数据：

```
Cursor cursor = db.query(News_Table, null, null, null, null, null, null);

if (cursor != null) 
{
    cursor.moveToFirst();
}
allNews = new News[cursor.getCount()];
int i = 0;

while (!(cursor.isLast())) 
{
    allNews[i] = new News(cursor.getInt(0), cursor.getString(2),
            cursor.getString(1));
    cursor.moveToNext();
    i++;
} 
```

这就是我的桌子的样子： ![在此处输入图像描述](../Images/a247489f87040f00c46e1e73b6ee5f90.png)

但是每次我的最后一行没有被提取并且我得到一个空指针异常。这是日志猫屏幕： ![在此处输入图像描述](../Images/02a933cfad89372ed4fb243716f69472.png)

为什么我的代码只正确运行 n-1 行并在第 (n) 行出现问题，其中 n 是我的新闻表中的总行数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T20:56:26.447

cursor.isLast() 将在光标位于最后一行时返回 true，因此您的 while 循环将在尚未读取和处理最后一行的那一刻停止。通常迭代游标的模式是（注意这也不调用`moveToFirst()`）

```
Cursor cursor = getACursor();
int i = 0;
while (cursor.moveToNext()) {
   /// do something with this row
   allNews[i] = new News(cursor.getInt(0), cursor.getString(2),cursor.getString(1));
   i++;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T20:56:31.507

```
while (!(cursor.isLast())) 
```

我认为问题而不是`isLast()`. 你明确地说如果不是最后一行。

将while循环更改为：

```
 while (cursor.moveToNext()) {
   //Your code.
} 
```

# jquery - jquery prev 在单击链接后隐藏一个 div 并显示另一个

> ID：14367622
> 
> 赞同：0
> 
> 时间：2013-01-16T20:52:04.167
> 
> 标签：jquery, html

请原谅这个问题的菜鸟。几天来，我一直在努力尝试使这项工作正常进行！

请在这里查看我的[小提琴](http://jsfiddle.net/x3cbZ/5/)。

基本上我正在尝试设计一个产品视图页面，如果您单击缩略图，页面右侧会显示更大的图像（和信息）。重复的代码是用php动态生成的。

我尝试使用“上一个”选择器，但它似乎不起作用，除非我要显示的 div 与链接位于相同的包含 div 中（它不能正确显示更大的图像）。我试过prevAll，但这也没有用..现在真的卡住了！该链接嵌套在我在小提琴示例中模拟的两个 div 中，因为我认为这会对事情产生影响。

**HTML**

```
 <div class="big_pic">
    <p>product 1</p>
</div>
<div class="div1">
  <div class="div2">
    <a href="javascript:void(0)" onClick="showContent(this)">Click for product 1</a>
  </div>
</div>

<div class="big_pic">
  <p>product 2</p>
</div>
<div class="div1">
  <div class="div2">
    <a href="javascript:void(0)" onClick="showContent(this)">Click for product 2</a>
  </div>
</div> 
```

**CSS**

```
.big_pic {
  position: absolute;
  top: 50px;
  left: 0px;
  display: none;
  border: 1px black solid;
} 
```

**狡猾的Jqerying！**

```
function showContent(e) {
  $('.big_pic').hide('fast');
  $(e).prev('div.big_pic').show('slow');
} 
```

该功能背后的理念是在显示新的 div 之前清除所有以前显示的 div。

提前感谢任何人都可以为我提供的任何光线！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:00:48.127

`prev`只选择被选元素的前一个兄弟元素，你可以使用[最接近](http://api.jquery.com/closest/)的方法选择`a`目标元素的兄弟元素的祖父母，然后`prev`方法。

```
function showContent(e) {
  $('.big_pic').hide('fast');
  $(e).closest('.div1').prev('div.big_pic').show('slow');
} 
```

[http://jsfiddle.net/yP4cz/](http://jsfiddle.net/yP4cz/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:08:29.493

你说得对，'big_pic' div 只会显示它是否与链接在同一个 div 中。这就是 prev 的工作原理。它会去上一个兄弟姐妹。

您想要的是使用 .parent() 向上移动 DOM。所以我使用你的 HTML 的 javascript 看起来像这样：

```
function showContent(e) {
  $('.big_pic').hide('fast');
  $(e).parent().parent().prev('div.big_pic').show('slow');
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:04:51.113

`prev()`选择上一个兄弟，所以要选择'big_pic'作为兄弟，你首先需要到达对应的'div1'。

由于`e`代表链接，您可以使用`.parents()`它来获取包含它的'div1'，然后从那里使用`prev()`获取相应的'big_pic'。例如：

```
$(e).parents('div.div1').prev('div.big_pic').show('slow'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:05:50.427

在 html 中没有 onclick 的情况下做这样的事情：

```
$(function(){
  $('.div2 a').on('click', function(){
    $(this).closest('.div1').prev('.big_pic').show('slow');
  });
}); 
```

jsfiddle：http: [//jsfiddle.net/x3cbZ/7/](http://jsfiddle.net/x3cbZ/7/)

# php - 如何从 Xcode（目标 c）向 php 发送和接收数据

> ID：14367623
> 
> 赞同：1
> 
> 时间：2013-01-16T20:52:07.573
> 
> 标签：php, ios, objective-c, xcode, nsurlrequest

我正在尝试将用户名和密码从 xcode 发送到我制作的 php 文件中。由于我是 xcode 和 php 的新手，并且出于我正在制作的简单应用程序的目的，用户名和密码是预定义的“123456”。我在将用户名和密码发送到 php 站点并收到响应时遇到了很多麻烦。当我的代码进行通信并建立连接时，它不会读取 php 文件中回显的变量。相反，它获取页面的整个源代码。我的代码如下：

目标C代码：

// 我设置了一个警报视图，并设置了两个按钮（继续 = buttonIndex==0 和取消 = buttonIndex==1）

```
 // The user continues from the alert view

    if(buttonIndex==0)
{
    NSString* username = @"123456";
    NSString* pass = @"123456";

    // I combine the two strings to send to the php page, and insert a : between the two strings

    NSString* combined = [NSString stringWithFormat:@"%@:%@", username, pass];
    NSString *post = combined;

    // Now I attempt to post the data to the php page
    NSData *postData = [post dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];

    NSString *postLength = [NSString stringWithFormat:@"%d", [postData length]];

    NSURL *url = [NSURL URLWithString:@"http://www.sulaimanmajeed.com/login.php"];
    NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];
    [theRequest setHTTPMethod:@"POST"];
    [theRequest setValue:postLength forHTTPHeaderField:@"Content-Length"];
    [theRequest setHTTPBody:postData];

    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

    if( theConnection )
    {
        webData = [[NSMutableData data] retain];
    }
    else
    {

    }
} 
```

}

现在，我还有其他在发帖时需要调用的方法：

```
 -(void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [webData setLength: 0];
}

-(void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [webData appendData:data];
}

-(void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    [connection release];
    [webData release];
}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{

    NSString *loginStatus = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
    // NSLog(loginStatus);
    dataOutput.text = loginStatus;
    [loginStatus release];

    [connection release];
    [webData release];
} 
```

我的 php 代码非常简单：

```
<?php

$usernameEntered = $_GET['user']; $passwordEntered = $_GET['pass']; $full = 'Choose';

$username = array(
    "123456",   "234567",   "345678",   "456789" );

$password = array(
    "123456",   "234567",   "345678",   "456789" );

$accounts = array(
    "Chequings-874576",
    "Savings-793756",
    "Visa-018375",
    "Mastercard-375836" );

$b = 0; $elementsInArray = count($accounts);

$isTrue = "FALSE";

if (($usernameEntered== $username[0]) && ($passwordEntered == $password[0])) {
    $isTrue = "TRUE"; } elseif ((usernameEntered == $username[1]) && ($passwordEntered == $password[1])) {
    $isTrue = "TRUE"; } elseif ((usernameEntered == $username[2]) && ($passwordEntered == $password[2])) {
    $isTrue = "TRUE"; } elseif ((usernameEntered == $username[3]) && ($passwordEntered == $password[3])) {
    $isTrue = "TRUE"; } else {
    $isTrue = "FALSE"; }

if( $isTrue == "TRUE" ) {   for ($i=0; $i < $elementsInArray; $i++)   {       $b = $i;    $full  = $full . ':' . $accounts[$b] ;   }
     echo $full;

}

if( $isTrue == "FALSE" ) {
          echo "error:error 2:test 1:test 2:test 3";

}

?> 
```

所以，dataOutput.text 应该返回一个“真”值，因为我提供的用户名和密码是默认的“123456”。但是 dataOutput.text 只返回网站的整个源代码。有人可以帮助我找出为什么它不输出 true，以及我的代码哪里出错了吗？我已经为此工作了2天，我很困惑。先感谢您。

附言

我在 dataOutput 中收到的输出是：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><!-- HTML generated by Network Solutions Website Builder --><html xmlns="http://www.w3.org/1999/xhtml"><head><title>Sulaiman Majeed login</title><meta name="robots" content="index, follow" /><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1" /><meta name="description" content="Welcome to my website"><meta http-equiv="cache-control" content="no-cache"/><meta http-equiv="pragma" content="no-cache"/><meta http-equiv="expires" content="-1"/><script type="text/javascript" src="/scripts/user.js"></script><script type="text/javascript" src="/scripts/jquery.js"></script><script type="text/javascript" src="/scripts/simplegallery.js"></script><script type="text/javascript" src="/scripts/photo_album.js"></script><link type="text/css" href="/scripts/PrebuiltBlockStructure.css" media="screen" rel="stylesheet"><link rel="stylesheet" media="screen" href="/scripts/template.css" id="wb-template.css" /><link rel="stylesheet" media="all" href="/scripts/layout3.css" id="wb-layout3.css" /><link rel="stylesheet" media="all" href="/scripts/website.css" id="wb-website.css" /><link rel="stylesheet" media="print" href="/scripts/print.css" id="wb-print.css" /><link rel="stylesheet" media="all" href="/scripts/12custom.css" id="wb-custom.css" /><link rel="stylesheet" media="all" href="/scripts/icwebsiteelement.css" id="wb-icwebsiteelement.css" /><link rel="stylesheet" media="all" href="/share/scripts/PrebuiltBlockStructure.css" id="wb-/share/scripts/PrebuiltBlockStructure.css" /></head><body onload="initClientMenu();sizeColumns();"><!-- Start content section --><div id="wb-container-outer"> <div id="wb-container-inner"> <div id="wb-layout"> <div id="wb-layout-inner"> <div id="wb-layout-top-header"> <div id="wb-navigation-subtop-header">                                              </div> <div id="wb-top-subbasenav"></div> </div> <div id="wb-header-nav"> <div id="wb-navigation-top-header"> <div id="wb-navigation-bottom-header">                                                    </div> </div> </div> <div id="wb-layout-header"> <div id="wb-layout-header-mask" class="wb_region">           <table id="wb_con__42340" class="wb_con" cellpadding="0" cellspacing="0" width="100%"> <tr> <td id="wb_col__45678" class="wb_col" width="50%" valign="top" style="">                             </td><td id="wb_col__5673453" class="wb_col" width="50%" valign="top" style=""></td> </tr> </table>        </div> </div> <div id="wb-layout-header-base"></div> <div id="wb-layout-top-2"> <div id="wb-navigation-subtop">                         <div><a href="home.html" class="tertiary" target="_self"><h3>Home</h3></a></div> <div><a href="resume.html" class="tertiary" target="_self"><h3>Resume</h3></a></div>                      </div> <div id="wb-top-subbasenav"></div> </div> <div id="wb-container-contentwrapper"> <div id="wb-layout-sidebar"> <div id="wb-navigation"> <div id="wb-navigation-top"> <div id="wb-navigation-bottom">                                     <div><a href="home.html" class="tertiary" target="_self"><h3>Home</h3></a></div> <div><a href="resume.html" class="tertiary" target="_self"><h3>Resume</h3></a></div>                                  </div> </div> </div> <div id="wb-basenav"></div> <div id="wb-navbasewrap" class="wb_region"> <div class="wb_dropzone_y"> </div>           <table id="dz-tablewb_element_text__02773140" class="dz-table" cellspacing="0" cellpadding="0" width="100%"> <tr> <td align="left"> <div id="wb_element_text__02773140" class="ic-element"> <div></div> </div> </td> </tr> </table>        </div> </div> <div id="wb-layout-main"> <div id="wb-layout-main-inner-1"> <div id="wb-layout-main-inner-2" class="wb_region wb-text-content">           <table id="wb_cl__12342346" cellpadding="0" cellspacing="0" class="" width="100%"> <tr> <td>              <table id="wb_con__056756794678680" class="wb_con" cellpadding="0" cellspacing="0" width="100%"> <tr> <td id="wb_col__089563564560" class="wb_col" width="100%" valign="top" style="">                               </td> </tr> </table>                       <table id="wb_con__1231213564678" class="wb_con" cellpadding="0" cellspacing="0" width="100%"> <tr> <td id="wb_col__335786456" class="wb_col" width="70%" valign="top" style="">                                    <table id="dz-tablewb_element_php__1358289049875_15" class="dz-table" cellspacing="0" cellpadding="0" width="100%"> <tr> <td align="left"> <div id="wb_element_php__1358289049875_15" class="ic-element"><php?  ;  ?></div> </td> </tr> </table> </td><td id="wb_col__234456134" class="wb_col" width="30%" valign="top" style="">                                   </td> </tr> </table>              <table id="wb_con__5675679467868" class="wb_con" cellpadding="0" cellspacing="0" width="100%"> <tr> <td id="wb_col__8956356456" class="wb_col" width="100%" valign="top" style="">                                </td> </tr> </table>           </td> </tr> </table>        </div> </div> </div> <div style="clear: both"></div> </div> <div id="wb-layout-footer"> <div id="wb-layout-footer-inner-1" class="wb_region"> <div class="wb_dropzone_y"> </div>                  </div> </div> </div> </div> </div> </div><table border="0" width="100%" cellpadding="0" cellspacing="0" id="other_footer"> <tr> <td align="left" valign="middle"><p style="font-size: 10px; font-style: normal; font-family: arial,verdana,sans-serif;  font-style: normal;"><a style="text-decoration: none; font-size: 10px; font-style: normal; font-family: arial,verdana,sans-serif;  font-style: normal;" title="Web hosting" href="http://ads.networksolutions.com/landing?code=P61C100S1N0B142A1D255E0000V100">Web Hosting</a> powered by Network Solutions®</p></td> </tr> </table> <!-- End content section --><!-- Start nsWebstats code.  Copyright 2010 networksolutions.com More info available at http://networksolutions.com --><script type="text/javascript">var pageName="login"; document.write(unescape('%3Cscript src="'+(location.href.split(':')[0] =='https'?'https':'http')+'://stats.netsolads.com/jsconfig?pid=288656091%26mg=all%26lc=1%26pe=1"%3E%3C/script%3E'));</script><!--End nsWebStats tracking code. --></body></html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:13:07.930

我确信有更好的方法来做到这一点，但你可以在 UIWebView 中加载 php 文件，然后运行脚本，然后当你想检索变量时，你可以用 php 打印它们，然后使用 javascript 来检索它们和使用其他人在这里提到的方法将变量从javascript传输到objective-c：[iOS从UIWebView检索javascript变量](https://stackoverflow.com/questions/14342609/ios-retrieving-javascript-variables-from-uiwebview/14342785#14342785)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:27:36.433

如果有人对答案感兴趣，那对于一些琐碎的数据发送来说有点矫枉过正，我建议看看 ActiveMQ。您可以设置一个服务器，您的 iOS 设备可以订阅服务器上的队列，以识别其他客户端是否在队列中发送数据。

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T22:37:44.997

您是否使用一些 wordpress 插件或其他可能干扰您的 php 文件的 php 文件运行 php 类？

```
<script type="text/javascript">var pageName="token"; document.write(unescape('%3Cscript src="'+(location.href.split(':')[0] =='https'?'https':'http')+'://stats.netsolads.com/jsconfig?pid=288656091%26mg=all%26lc=1%26pe=1"%3E%3C/script%3E'));</script><!--End nsWebStats tracking code. --> 
```

# java - 带开关的 Android 编码（字符串）

> ID：14367629
> 
> 赞同：38
> 
> 时间：2013-01-16T20:52:27.743
> 
> 标签：java, android, string, switch-statement

当我尝试一些代码时，我正在 Eclipse 上开发一个 android 应用程序

```
switch(String){
 ......
} 
```

它给了我以下错误

```
Cannot switch on a value of type String for source level below 1.7\. Only convertible int values or enum variables are permitted 
```

所以我将编译器更改为 1.7，然后它给了我另一个错误

```
Android requires compiler compliance level 5.0 or 6.0\. Found '1.7' instead. Please use Android Tools > Fix Project Properties. 
```

那么，无论如何让 switch(String) 在 android 应用程序中工作？或者我别无选择，只能使用

```
if(){}
else if(){}
else if(){}
........ 
```

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2013-11-01T07:48:32.253

随着 API 19 KitKat 的发布，您现在可以做到这一点！！！！这是现有项目的 android studio 所需的更改。确保您使用的是 JDK 1.7 或更高版本以及 Gradle 插件 0.6.1 或更高版本

> ```
> android {
> compileSdkVersion 19
> buildToolsVersion "19.0.0"
> 
> defaultConfig {
>     minSdkVersion 7
>     targetSdkVersion 19
> }
> 
> compileOptions {
>     sourceCompatibility JavaVersion.VERSION_1_7
>     targetCompatibility JavaVersion.VERSION_1_7
> } } 
> ```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2013-01-16T20:53:29.797

`switch`关于`String`对象的语句是 Java 1.7 中引入的一个新特性。不幸的是，Android 需要 1.6 或 1.5 版本。这就是为什么你必须暂时忘记这种结构的原因。

您可以通过存储将要执行的方法的映射来避免使用 if-statements-chain `String`: `Map<String, Method>`。你总是`Method`可以用一些`Handler`对象封装它。在这里查看更多信息：[如何删除大型 if-else-if 链](https://stackoverflow.com/questions/7349883/how-to-remove-large-if-else-if-chain)

和

[为什么不能在字符串上切换](https://stackoverflow.com/questions/2913495/refactoring-if-else-logic/2913518#2913518)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-16T20:53:23.193

你没有选择。您不能`Switch`使用字符串（至少现在是这样）。以下消息明确符合这一点。

> Android 要求编译器合规级别为 5.0 或 6.0。改为找到“1.7”

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-08-26T11:42:50.923

您可以使用最新的 android 构建工具来做到这一点。Android 从 API 19 开始支持 Java 7 功能。

最好的部分是，即使您将 minSdkVersion 设置为低于 19，它也会起作用。引用这个[android 开发者页面](http://tools.android.com/tech-docs/new-build-system/user-guide#TOC-Using-sourceCompatibility-1.7)：

> 请注意，对于除 try with resources 之外的所有语言功能，您都可以使用值早于 19 的 minSdkVersion。如果您想对资源使用 try，您还需要使用 19 的 minSdkVersion。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-29T18:33:02.570

这是带有 java 5 或 6 的 android 的其他替代方案

```
public enum Command  {text, image, other};

String enumTest = "text";
try{
    Command command  = Command.valueOf(enumTest);
}
catch(Exception e){
    Log.e("Tag", "Command not found: " + enumTest);
}
switch (command){
   case image:
      break;
   case  text:
       break;
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-09T01:55:48.270

由于我假设大多数人都在使用至少 Java 7 的 Android Studio，那么现在的答案是，**是的，您可以在 Android 中切换字符串**，即使 minSdkVersion 版本 < 19 也是如此。这是一个如何做到这一点的示例，取自[Java SE 文档](http://docs.oracle.com/javase/7/docs/technotes/guides/language/strings-switch.html)：

```
public String getTypeOfDayWithSwitchStatement(String dayOfWeekArg) {
     String typeOfDay;
     switch (dayOfWeekArg) {
         case "Monday":
             typeOfDay = "Start of work week";
             break;
         case "Tuesday":
         case "Wednesday":
         case "Thursday":
             typeOfDay = "Midweek";
             break;
         case "Friday":
             typeOfDay = "End of work week";
             break;
         case "Saturday":
         case "Sunday":
             typeOfDay = "Weekend";
             break;
         default:
             throw new IllegalArgumentException("Invalid day of the week: " + dayOfWeekArg);
     }
     return typeOfDay;
} 
```

文档还指出：

*   使用字符串切换通常比链式`if`-更快`else`。
*   就好像每个案例都在使用`String.equals`.

# java - 如何从 Android 应用程序中的按钮获取文本

> ID：14367637
> 
> 赞同：1
> 
> 时间：2013-01-16T20:53:02.160
> 
> 标签：java, android

我正在尝试创建一个 java 应用程序，但在尝试从按钮中获取文本时遇到了障碍。我有一个使用一组按钮创建的布局。每个按钮都有一个文本值，例如“1.0 Mev”。当我单击此 1.0 MeV 按钮时，我希望将按钮文本“1.0 MeV”存放在字符串变量中。我有几个按钮，所以我希望它自动将按钮的名称传递给我单击的按钮的字符串变量，但我似乎无法掌握如何做到这一点。这是我执行这些操作的相关代码。

这是特定按钮布局的 xml 代码。

```
<Button
android:id="@+id/pointonemev_button"
android:layout_width="fill_parent"
android:layout_height="40dp"
android:onClick="setEnergy"
android:text="@string/pointonemev_label"
android:textSize="12.5sp" /> 
```

所以你可以看到当按钮被点击时它调用了方法 setEnergy

```
public void setEnergy(View view)
    {
        i = new Intent(this, chooseBodyRegion.class);
        Button energy = (Button) findViewById(view.getId());
        energyChoice = (String) energy.getText();
        startActivity(i);
    } 
```

意图被声明为全局变量。单击按钮并访问此方法后，startActivity 将成为下一个类，并且 energyChoice 变量中应存储类似“1.0 MeV”的内容。但我不知道如何在 java 应用程序中使用 getText() 变量，也不知道如何继续。谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:06:25.030

你可以调用继承自的[`getText()`](http://developer.android.com/reference/android/widget/TextView.html#getText%28%29)方法。它返回 a ，您可以直接调用它。`Button``TextView``CharSequence``toString()`

```
energyChoice = energy.getText().toString(); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T21:05:14.377

使用 view.getText() 获取按钮的文本。

希望能帮助到你。

# html - CSS 兄弟选择器

> ID：14367641
> 
> 赞同：0
> 
> 时间：2013-01-16T20:53:29.087
> 
> 标签：html, css, css-selectors

以下是html代码：

```
<div class="wrapper">
  <div class="menu-wrap">
    <ul>
     <li>
       <input type="radio" id="link1" />
     </li>
    </ul>
  </div>

  <div class="content-wrap">
    <div id="link1-content"><p>Just a paragraph</p></div>
  </div>
</div> 
```

下面是css代码：

```
#link1:checked ~ #link1-content { display: none;} 
```

我正在尝试使用 input[type=radio] 创建 css 点击。我的问题是兄弟选择器不起作用。

如何编写适当的兄弟选择器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:00:33.433

您正在尝试做一些兄弟选择器不能做的事情。您将无法设置样式`#link1-content`，因为它与`#link1:checked`. 正如@sirko 所说，这应该使用 Javascript/JQuery 来完成（请参阅下面的代码段）。

**源** [子和兄弟选择器——CSS技巧](http://css-tricks.com/child-and-sibling-selectors/)

> 请注意，在通用兄弟选择器和相邻兄弟选择器中，逻辑都发生在同一个父元素中。

**一个非常简单的 jQuery 解决方案：**

```
$('#link1').change(function(){
  $('#link1-content').toggle();
}); 
```

[代码笔示例](http://codepen.io/NickTomlin/pen/jwluh)

# html - Html 模式不为空也不为负

> ID：14367644
> 
> 赞同：1
> 
> 时间：2013-01-16T20:53:33.840
> 
> 标签：html, css, input, pattern-matching, haml

我怎样才能写出这样的模式：

*   1) 非负数：所以只有从 1 到 999 的数字
*   2) Null 不能是第一个字符
*   3) 非空字段

例如：01, , -1, 1500, abc 等 - 为假

现在我只有数字检查：

```
:pattern => "[0-9]{1,4}" 
```

那么如何写我的模式呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:03:14.473

假设您的意思是不允许使用符号（+ 或 -），并且“Null Can't be first char”意味着输入不得以数字零 (0) 开头，除非输入正好为 0，以下是 HTML 代码：

```
<input pattern="0|[1-9]\d{0,2}" required> 
```

# c# - 如何模仿asp.net中的后退按钮

> ID：14367647
> 
> 赞同：0
> 
> 时间：2013-01-16T20:53:40.720
> 
> 标签：c#, asp.net

我正在开发一个 asp.net webform 项目。它有一个编辑表单，在几个文本和组合框中显示从数据库中检索到的成员数据。用户可以编辑任何这些项目。编辑后，当他们单击“验证”按钮时，将通过 Server.Transfer 方法将他们带到 verifyAndSave.aspx 页面。这个新页面有两个按钮：保存和取消。当他们单击“取消”按钮时，它应该将他们带回到之前的页面，所有已编辑的数据都完好无损。对于取消按钮的点击事件，在后面的代码中，我再次使用了Server.transfer。它转到较早的页面，但问题是它只显示数据库中的数据。用户所做的任何编辑都消失了。但是，如果我使用后退按钮，我会看到用户所做的所有编辑。请让我知道如何正确实现取消按钮。

坦斯克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T20:59:47.880

ASP.NET 按钮代码如下所示：

```
<asp:button id="btnCancel" runat="server" text="Cancel" OnClientClick="JavaScript:window.history.back(1); return false;" /> 
```

如果您想从后面的代码中执行此操作，可以尝试以下操作：

```
ClientScript.RegisterStartupScript(Me.GetType(), "goBack", "history.go(-1);", True) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T20:55:50.633

```
<a href="javascript: history.go(-1);">Back</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T20:59:12.797

我会在初始页面上有确认功能/标记。然后使用 jQuery 隐藏/显示两个面板，具体取决于是否按下了下一个或取消。这样就没有回发，也不会丢失任何数据。

```
$('#NextBtn').Click(function(){
     $('#PanelInitial').hide()
     $('#PanelConfirm').show()
});
$('#CanelBtn').Click(function(){
     $('#PanelInitial').show()
     $('#PanelConfirm').hide()
}); 
```

# java - 如何在Java中有效地找到两个范围列表中的所有重叠

> ID：14367648
> 
> 赞同：1
> 
> 时间：2013-01-16T20:53:40.920
> 
> 标签：java, range

我在有效地查找两个列表中的所有重叠范围时遇到问题。
这个问题类似于[This](https://stackoverflow.com/questions/10424283/fastest-algorithm-for-finding-overlap-between-two-very-large-lists) question，但输入不同。

我有 2 个输入文件，一个包含多行范围和数据对，另一个包含要查找交点的范围列表。

我已经编写了一个文件阅读器类，它从数据文件中读取，一次返回一个对象，其中包含范围和数据对的列表，但是当我尝试查找两个范围列表的重叠时遇到了麻烦。

目前我正在做的是暴力破解，将数据列表中的每个范围与交集列表中的每个其他范围进行比较，但是由于数据文件**非常**大，因此需要很长时间。

示例对象：
这是数据列表中的对象：

```
public DataModel {
    private int start; {set; get;}
    private int end; {set; get;}
    //Other Data
} 
```

范围模型只是成对整数（开始，结束）的列表。

```
while (fileParser.hasNext()) {
    dataList = fileParser.next();
    for (DataModel data : dataList)
        for (RangeModel range : rangeList)
            if(overlaps(data, range))
                print(range.getString + " " + data.getString);
} 
```

为清楚起见进行编辑：

DataModel 以不同长度的相似范围的较小数据包给出，但它们大多在 20 以下，因此将在相同的 RangeModel 和每个新的 DataModel 上重复运行比较。**所有**数据的总范围约为 20 亿，但这并不重要。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:03:43.300

我可以想到不同的优化，但它们取决于您希望在检查后获得什么样的数据。

对数据和范围进行排序并按顺序处理它们可以立即提高性能，因为测试一个以 100 开头的范围与另一个以 50 结尾的范围是没有意义的。

另一个改进是“压缩”范围。如果您有 (1-10)、(10-20)、(20-30) 等范围，那么您可以轻松地将它们替换为单个 (1-30) 范围，并减少测试次数。您可以创建一个适当的 AggregateRange 类来跟踪其组成范围的身份，以防您仍然想知道哪个原始范围导致重叠。

另一个改进是在处理数据列表时巧妙地使用以前的结果。例如：假设您测试数据范围（1-10）并且它恰好不重叠。如果下一个测试数据范围是 (2-8)，您不需要针对这些范围进行测试，因为您之前的结果保证它不会重叠。

这种改进背后的基本思想是将任何未经测试的数据范围的开始推进到并包括最后一个非重叠数据范围的结束。如果新的开始超过它自己的结束，则不需要测试，因为它不重叠。这意味着非重叠 (1-20) 应将未经测试的 (10-100) 转换为未经测试的 (20-100)。这可能难以实现，因此请注意不要过度使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:03:48.257

检查我的理解是否正确：

*   DataModel 和 RangeModel 表示范围。（DataModel 可能包含更多数据，但无关紧要）。
*   大约有。200万`DataModel`s，还有少量`RangeModel`s。（不过，我的解决方案没有利用这种不对称性）
*   有必要将 DataModel 中的范围保留为不同的实体，即使它们是重叠的。（如果您只对交叉点感兴趣，则可以在它们彼此靠近时折叠范围作为优化）。

我将要描述的方法可以在 2 个范围列表之间进行范围交集，而不管范围看起来如何（重叠、大范围等）。限制是 2 个范围列表的大小之和（排序是瓶颈）和找到的范围数量（迭代是瓶颈）。

将范围分割成2个对象，表示`EndPoint`：值（，标记是数据，还是要查询的范围）。`int``boolean``EndPoint``null``EndPoint``int`

将`EndPoint`两个范围列表中的所有 s 放在一起，按值对它们进行排序，通过将 start 放在 end 端点前面（如果您认为 touch 是交集）来打破平局。排序步骤的复杂度为 O((m + n)log(m + n))。

`EndPoint`根据这个伪代码循环遍历排序的 s：

```
open_data = HashSet()
open_range = HashSet()

for e in endpoints:
  if e is start of range:
    if e is data:
      print e intersect with all in open_range
      open_data.add(e)
    else: // e is range to test
      print e intersect with all in open_data
      open_range.add(e)
  else: // e is end of range
    if e is data:
      open_data.remove(e.startPoint)
    else: // e is range to test
      open_range.remove(e.startPoint) 
```

从 HashSet 中添加和删除是摊销 O(1)。问题在于打印交叉点，即 O(k)，其中 k 是交叉点的数量，在最坏的情况下可能高达 O(m * n)。

综合起来，在最坏的情况下，复杂度为 O((m + n)log(m + n) + m * n)。根据数据的属性，您也许可以做得更好。这是一个非常通用的解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:06:31.513

理想的解决方案将取决于数据的具体特征，但对两个输入集进行排序将是一个很好的第一步，这将允许您减少所需的比较量。

一种选择是创建一个从 min(startTime) 到 max(endTime) 的数组，并在每个位置存储对覆盖该范围的输入值的引用。

因此，如果您的输入是
A:[1-5] 和 B:[3-7]，那么您的数据结构可能类似于

```
1: A
2: A
3: A,B
4: A,B
5: A,B
6: B
7: B 
```

然后要测试 [2-4] 与数据集的交集，您只需在数组列表中查找 2,3,4 并将结果连接起来。

如果您只关心是否存在交叉路口，而不是确切的路口所在的位置，则可以进一步提高速度。或者，如果您只关心一个十字路口，而不是所有十字路口。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:34:10.213

您可以对每个范围列表进行排序 o(N ln N) 并执行这些范围 O(N) 的合并排序

这将以最少的 CPU 时间显示任何重叠范围。

# coldfusion - 将空字符串转换为整数

> ID：14367652
> 
> 赞同：3
> 
> 时间：2013-01-16T20:53:50.247
> 
> 标签：coldfusion, integer, string

目前，我的应用程序显示此错误消息：

“值 '' 不能转换为数字。”

这并不让我感到惊讶。该变量刚刚添加，因此对于在我创建新字段之前使用该应用程序的任何人来说，该变量都是一个空字符串。

```
<td><cfif studentRecruitComments neq "">
        <a href="javascript: showContent('#studentRecruitComments#')">
            #studentRecruit#
        </a>
     <cfelse>
         #studentRecruit#
     </cfif>
</td>
<cfset tstudentRecruit = tstudentRecruit + studentRecruit> 
```

最后的数学是一个计数系统。该变量`tstudentRecruit`在此行之前也设置为 0，因此它肯定位于 studentRecruit 变量中。将空字符串转换为整数的正确方法是什么？这里有什么明显的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-17T14:48:52.107

您可以简单地使用 val() 函数，该函数返回数字，或者如果转换失败，则返回零。因此，您不必检查您的变量是否为数字。

```
<cfset tstudentRecruit = tstudentRecruit + val(studentRecruit)> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T22:24:36.100

我会稍微更改代码以阅读：

```
<td>
    <cfif NOT Len(trim(studentRecruitComments))>
        <a href="javascript: showContent('#studentRecruitComments#')">
            #studentRecruit#
        </a>
     <cfelse>
         #studentRecruit#
     </cfif>
</td>
<cfif NOT isNumeric(studentRecruit)>
    <cfset studentRecruit = 0>
</cfif>
<cfset tstudentRecruit = tstudentRecruit + studentRecruit> 
```

我在这里做的几件事：

首先，更改**cfif studentRecruitComments neq ""**以实际检查字符串的长度，而不是检查它是否为空。我正在添加修剪以删除可能存在的任何空白。

然后我检查变量**studentRecruit**是一个数字，如果不是，我将它设置为 0，这样你的代码就不会失败。

显然我并不真正了解您的代码的上下文，因为我认为它可以进一步改进。

但是，使用我的代码片段会导致错误消失。

高温高压

# sql - CASE - WHEN 连接表时

> ID：14367661
> 
> 赞同：-1
> 
> 时间：2013-01-16T20:54:44.223
> 
> 标签：sql, sql-server-2008, case, inner-join

我有 2 张桌子：

```
AppDetailFee table has AppID (PK), TypeID, Amount
AppDetail table has AppID (PK) 
```

我在 AppID 上加入了两个表，我需要检查以下内容的 TypeID 和金额。有3种情况：

```
If TypeID = 6 and Amount = 0 then  print appid and amount zero
If typeID = 6 and amount <> 0  - bypass and do not print
When TypeID <> 6 then print zero 
```

下面是我使用的代码，但是我得到了所有不等于零且数量为零的行的结果。

任何帮助，将不胜感激。谢谢

```
SELECT  ad.AppID
      , MAX(case when (adf.TypeID = 6 AND adf.Amount = 0) then 0 
                 when (adf.TypeID = 6 AND adf.Amount <> 0) then Adf.Amount
       ELSE 0 END) AS FeeAmount

FROM         
      AppDetail AS ad   

inner join  AppDetailFee adf ON
      ad.AppID = adf.AppID 

WHERE  adf.Amount =0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:02:26.843

您有一个`WHERE`条款正在删除不符合条件的所有内容：

```
WHERE  adf.Amount =0 
```

尝试删除它并运行您的查询：

```
SELECT  ad.AppID
      , MAX(case when (adf.TypeID = 6 AND adf.Amount = 0) then 0 
                 when (adf.TypeID = 6 AND adf.Amount <> 0) then Adf.Amount
                 else 0 END) AS FeeAmount
FROM  AppDetail AS ad   
inner join  AppDetailFee adf ON
      ad.AppID = adf.AppID 
group by ad.AppID 
```

您还缺少`GROUP BY`查询中的子句。

# macos - 如何在 Adob e Air 应用程序中从 Mac 打开网络文件夹？

> ID：14367662
> 
> 赞同：1
> 
> 时间：2013-01-16T20:54:57.377
> 
> 标签：macos, actionscript, air, network-share

我有一个需要引用位于共享网络文件夹中的文件的 Air 应用程序。在 Windows 上运行的 Air 应用程序中，我可以通过 File 对象访问共享，如下所示：

```
var folder:File = new File("file:///\\\\server\\share\\parent_folder\\folder"); 
```

在 Mac 上，这是行不通的，而且我在该路径上找不到任何变化。***我可以使用路径“smb://server/share/parent_folder/folder”通过 Finder***连接到服务器，然后我可以通过一些（看似）复杂的卷挂载构造一个 File 对象，其名称似乎有所不同关于“//server/share”有多少现有挂载（例如，“/Volumes/share”、“/Volumes/share-1”等）

有没有办法从 Air 应用程序中连接到 Mac 上的共享服务器文件夹，而用户无需先通过 Finder 进行连接？最坏的情况，有没有办法从 Air 中执行控制台命令？大概我可以自己安装共享。除了要求 Mac 用户首先通过查找器手动连接到服务器，然后在每次运行应用程序时为应用程序提供共享路径之外，我想不出其他解决方法！

提前感谢任何可行的解决方案！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T14:53:14.413

对于 Mac 问题，使用 File 的 resolvePath() 方法来引用文件/文件夹；请参阅[http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#resolvePath](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/File.html#resolvePath) ()

例如：

```
var folder:File = File.applicationDirectory.resolvePath("absolute/path/to/folder"); 
```

注意不要使用“file:///”，斜杠应该是“/”而不是“\”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:20:40.287

如果我没记错的话，你必须挂载网络路径。但是用户可以挂载网络驱动器并在用户登录时自动重新连接，这样他们就不必在每次使用您的应用程序时重新连接。看看[http://osxdaily.com/2010/09/20/map-a-network-drive-on-a-mac/](http://osxdaily.com/2010/09/20/map-a-network-drive-on-a-mac/)它有自动连接的说明。

# php - php date() 日期和时间卡住了

> ID：14367664
> 
> 赞同：-7
> 
> 时间：2013-01-16T20:55:02.743
> 
> 标签：php, mysql, date, datetime

我正在使用一个剪切粘贴代码，它会分解时间和日期戳，以这种格式 DD/MM/YY HH:MM:SS PM 将其保存在 mysql 中。当它执行时，日期固定为 16/01/13，时间固定为 11:59。我不太了解php，所以不知道出了什么问题。

这是代码

```
 $datm9=date("d/m/y h:i:s A");
                //explode the date
                    $datm_pass=explode(" ",$datm9);
                    $datm_pass_set = $datm_pass[1].$datm_pass[2];
                    $hours_test = explode(":",$datm_pass[1]);
                    $hours_t = $hours_test[0];
                    $hoursext_t =$datm_pass[2];
            //if only for the date 

                if(($hours_t=='12' && $hoursext_t=='AM')or ($hours_t=='01' && $hoursext_t=='AM') or ($hours_t=='02' && $hoursext_t=='AM') or ($hours_t=='03' && $hoursext_t=='AM')){

                    $datm_pass_set_d = explode("/",$datm_pass[0]);
                    $fd=($datm_pass_set_d[0]-1);
                    $dat_fix = $fd."/".$datm_pass_set_d[1]."/".$datm_pass_set_d[2];

                    //09/11/11 11:59:49 AM
                    $datm = $dat_fix." "."11:59:49 AM";
                    //$datm=date("d/m/y h:i:s A");  
                    $today=$dat_fix;        
            }else{

            $datm=date("d/m/y h:i:s A");
            $today=date('d/m/y');
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:03:53.377

mysql 的标准/本机日期格式是`yyyy-mm-dd hh:mm:ss`. 如果您输入其他任何内容，mysql 将尽其所能解释它，但会失败（就像您的情况一样）。不要尝试使用其他格式。所有爆炸的东西是怎么回事？如果你想操纵日期变量，那么不要使用时间->字符串->whatever->string->whatever->等的所有往返...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:09:42.793

你退房了吗

```
strtotime 
```

您将享受该功能。

像这样的东西可能适合你

```
//convert date
function convertDate($date, $into = 'F jS, Y') {
    $asdate = strtotime($date);
    $asdate = date($into, $asdate);
    return $asdate;
} 
```

没有必要为约会而疯狂...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:33:02.900

现在您知道 TimeStamp/DateTime/Date/Time 等的 mysql 字符串格式。您可以在简单的过程中为 php 脚本创建任何格式以使用 php 日期时间类，请参阅： http: [//php.net/manual/en/datetime。 createfromformat.php](http://php.net/manual/en/datetime.createfromformat.php)

# python - Django：如何在从单独的视图中保存对象后立即查询它们？

> ID：14367670
> 
> 赞同：0
> 
> 时间：2013-01-16T20:55:26.313
> 
> 标签：python, django, django-models, django-forms, django-views

假设我想**在上一页通过一个表单查询并显示****用户*刚刚***上传的所有图片（一次上传多张图片，每张在db中做成一个单独的对象）。

**最好的方法是什么？**

由于上传图像的视图与显示图像的视图不同，第二个视图如何知道哪些图像是该上传的一部分？我考虑在第一个视图中创建和保存图像对象，收集`pk`s，并将它们传递给第二个视图，但我知道这是不好的做法。那么我应该如何确保第二个视图知道要查询哪些主键呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T20:59:53.620

这就是[会话](https://docs.djangoproject.com/en/dev/topics/http/sessions/?from=olddocs)的用途 - 您将 pk 存储到会话中，然后在下一页将它们读回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:00:13.743

模型数据库中还有哪些其他字段？您可以添加一个上传后自动设置的upload_id，将其发送到下一个视图，并在数据库中查询。

# git - 如何在我的仓库中使用克隆的子模块提交？

> ID：14367671
> 
> 赞同：2
> 
> 时间：2013-01-16T20:55:30.517
> 
> 标签：git, version-control, git-submodules, git-commit, git-add

我已经为我的`.vim`目录创建了一个 repo，这样我就不需要在每次更改我正在使用的机器时都修改它。

所以我现在有类似的东西：

```
user@.vim$ tree -L 3 -a
.
|-- autoload
|   `-- pathogen.vim
|-- bundle
|   |-- jedi-vim
|   |   |-- after
|   |   |-- AUTHORS.txt
|   |   |-- autoload
|   |   |-- build
|   |   |-- CONTRIBUTING.md
|   |   |-- ftplugin
|   |   |-- .git
|   |   |-- .gitignore
|   |   |-- .gitmodules
|   |   |-- jedi
|   |   |-- LICENSE.txt
|   |   |-- plugin
|   |   `-- README.rst
|   |-- vim-colors-solarized
|   |   |-- autoload
|   |   |-- bitmaps
|   |   |-- colors
|   |   |-- doc
|   |   |-- .git
|   |   `-- README.mkd
|   |-- vim-surround
|   |   |-- doc
|   |   |-- .git
|   |   |-- .gitignore
|   |   |-- plugin
|   |   `-- README.markdown
|   `-- xmledit
|       |-- build.vim
|       |-- doc
|       |-- ftplugin
|       |-- Makefile
|       `-- README.mkd
`-- .git
    |-- //*** MY GIT REPO 
```

当我这样做`git add .`或任何其他操作时，`add`我无法将`jedi`目录添加到我的本地存储库中。

这是`.gitmodules`我那里唯一的文件：

```
$ cat ./bundle/jedi-vim/.gitmodules
[submodule "jedi"]
        path = jedi
        url = git://github.com/davidhalter/jedi.git 
```

这就是我得到的`git status`

```
#       modified:   bundle/jedi-vim (untracked content) 
```

我应该怎么做才能完成这项工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:00:53.163

您可以重新添加子模块。有一点不一致。

删除`.gitmodules`，执行 a`git rm --cached path/to/submodule`并删除`.git/config`.

现在再次添加它

```
git submodule add url path 
```

# shopify - Shopify 主题 Ruby Gem 错误

> ID：14367677
> 
> 赞同：0
> 
> 时间：2013-01-16T20:55:50.713
> 
> 标签：shopify

您好，我正在尝试使用 shopify_theme gem 来管理本地 shopify 开发并利用版本控制，但是我不断收到以下错误。我已经查看了 shopify 的 API 文档以及主题 gem repo 上的自述文件，但似乎无法让它工作......

（这里的 github 仓库：[https](https://github.com/Shopify/shopify_theme) ://github.com/Shopify/shopify_theme ）

```
Kenneths-MacBook-Pro:anglersden kennethprince$ theme configure xxxxxxxxxxxAPIKEYxxxxxxxxxxxxx PASSWORDETC https://xxxxxxxAPIKEYxxxxxxxxxxxx@TESTSTORE.myshopify.com/admin
  create  config.yml 
```

Kenneths-MacBook-Pro:anglersden kennethprince$ 主题下载

/Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/protocol.rb:141:in

`read_nonblock': 对等点重置连接 (Errno::ECONNRESET)

```
from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/protocol.rb:141:in `rbuf_fill'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/protocol.rb:122:in `readuntil'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/protocol.rb:132:in `readline'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:2562:in `read_status_line'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:2551:in `read_new'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:1319:in `block in transport_request'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:1316:in `catch'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:1316:in `transport_request'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:1293:in `request'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:1286:in `block in request'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:745:in `start'

from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/1.9.1/net/http.rb:1284:in `request'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/httparty-0.9.0/lib/httparty/request.rb:81:in `perform'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/httparty-0.9.0/lib/httparty.rb:438:in `perform_request'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/httparty-0.9.0/lib/httparty.rb:385:in `get'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/shopify_theme-0.0.7/lib/shopify_theme.rb:10:in `asset_list'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/shopify_theme-0.0.7/lib/shopify_theme/cli.rb:30:in `download'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/task.rb:27:in `run'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/invocation.rb:120:in `invoke_task'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor.rb:275:in `dispatch'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/thor-0.16.0/lib/thor/base.rb:425:in `start'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/gems/shopify_theme-0.0.7/bin/theme:24:in `<top (required)>'

from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/bin/theme:19:in `load'
from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/bin/theme:19:in `<main>'
from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `eval'
from /Users/kennethprince/.rvm/gems/ruby-1.9.3-p327/bin/ruby_noexec_wrapper:14:in `<main>' 
```

我还尝试使用 API 连接到商店，请参见下面的代码。

```
Kenneths-MacBook-Pro:anglersden kennethprince$ irb
1.9.3-p327 :001 > require 'rubygems'
 => false 
1.9.3-p327 :002 > true
 => true 
1.9.3-p327 :003 > require 'rubygems'
 => false 
1.9.3-p327 :004 > require 'rubygems' true
SyntaxError: (irb):4: syntax error, unexpected keyword_true, expecting $end
    from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/bin/irb:16:in `<main>'
1.9.3-p327 :005 > true
 => true 
1.9.3-p327 :006 > require 'rubygems'
 => false 
1.9.3-p327 :007 > require 'shopify_api'
LoadError: cannot load such file -- shopify_api
    from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'
    from (irb):7
    from /Users/kennethprince/.rvm/rubies/ruby-1.9.3-p327/bin/irb:16:in `<main>'
1.9.3-p327 :008 > puts RUBY_VERSION
1.9.3
 => nil 
1.9.3-p327 :009 > 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-28T02:09:21.743

这是我在 Mac 上安装 ruby​​ 的方式的问题。安装新硬盘后，我安装了 RVM 和 Homebrew，一切正常。

# asp.net-mvc-3 - 无法加载类型“System.Runtime.Serialization.Json.DataContractJsonSerializer”

> ID：14367685
> 
> 赞同：2
> 
> 时间：2013-01-16T20:56:23.347
> 
> 标签：asp.net-mvc-3, mono, ubuntu-12.04, servicestack, apache2.2

我是 mono/linux 的新手，我尝试使用 mod_mono 在 ubuntu/apache2 上托管我现有的 asp.net mvc3 网站。一切正常，除了对 ServiceStack 服务的调用在反序列化来自服务的响应时似乎失败（该服务位于托管在不同 proc 中的同一台机器上）。我查看了 mono gac 并且程序集在那里（正确的版本/密钥）。此外，如果我从 monodevelop/xsp 运行网站，一切正常。任何关于为什么类型加载失败的想法都值得赞赏。

```
 Could not load type 'System.Runtime.Serialization.Json.DataContractJsonSerializer' from assembly 'System.ServiceModel.Web, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.

    Stack Trace:

    System.TypeLoadException: Could not load type 'System.Runtime.Serialization.Json.DataContractJsonSerializer' from assembly 'System.ServiceModel.Web, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35'.
      at ServiceStack.ServiceClient.Web.JsonServiceClient.DeserializeFromStream[List`1] (System.IO.Stream stream) [0x00000] in :0
      at ServiceStack.ServiceClient.Web.ServiceClientBase.HandleResponse[List`1] (System.Net.WebResponse webResponse) [0x00000] in :0
      at ServiceStack.ServiceClient.Web.ServiceClientBase.Send[List`1] (System.String httpMethod, System.String relativeOrAbsoluteUrl, System.Object request) [0x00000] in :0 
```

我在用：

```
    Mono 运行时版本：2.10.8.1（Debian 2.10.8.1-5ubuntu1）；
    ASP.NET 版本：4.0.30319.1
    服务栈 3.9.32

```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-28T05:16:16.600

我遇到了同样的问题。发生这种情况是因为 ServiceStack 库在运行时找不到 System.ServiceModel.Web 的 3.5 版本。我将 3.5 版本从单声道“gac”复制到我的应用程序 bin 目录中，一切都开始正常工作。您的系统/部署中的路径可能不同，但这是我使用的：

```
cp /usr/lib/mono/gac/System.ServiceModel.Web/3.5.0.0__31bf3856ad364e35/System.ServiceModel.Web.dll /var/www/path/to/web/app/bin/ 
```

# php - 读取网络驱动器上的文件

> ID：14367687
> 
> 赞同：9
> 
> 时间：2013-01-16T20:56:28.150
> 
> 标签：php, networking

我在 Windows Server 上运行 Xampp；Apache 使用本地帐户作为服务运行。在此服务器上，网络共享安装为 X: 具有特定凭据。

我想访问位于 X: 上的文件并运行以下代码

```
<?php
echo shell_exec("whoami");
fopen('X:\\text.txt',"r");
?> 
```

并得到

```
theservername\thelocaluser
Warning: fopen(X:\text.txt) [function.fopen]: failed to open stream: No such file or directory 
```

我尝试运行 Apache，而不是作为服务，而是直接通过启动 httpd.exe ... 并且代码有效。

我看不出是什么导致了服务和应用程序之间的差异以及如何使其工作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-16T20:58:23.637

您无法使用驱动器号执行此操作，因为网络映射驱动器仅适用于单个用户，因此不能被服务使用（即使您要为该用户安装它）。

您可以做的是直接使用 UNC 路径，例如：

```
fopen('\\\\server\\share\\text.txt', 'r'); 
```

但是请注意，PHP 对 UNC 路径的文件系统访问存在一些问题。一个例子是[我为 imagettftext 提交的一个错误](https://bugs.php.net/bug.php?id=61988)，但也存在与`file_exists`and相关的问题`is_writeable`。我没有报告后者，因为正如您从我长期存在的错误中看到的那样`imagettftext`，这有什么意义。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T20:58:38.070

对于网络共享，您应该使用 UNC 名称：“//server/share/dir/file.ext”

如果您使用 IP 或主机名，它应该可以正常工作：

```
$isFolder = is_dir("\\\\NAS\\Main Disk");
var_dump($isFolder); //TRUE

$isFolder = is_dir("//NAS/Main Disk");
var_dump($isFolder); //TRUE

$isFolder = is_dir("N:/Main Disk");
var_dump($isFolder); //FALSE 
```

# nlp - QAnswering NLP 中的权重到质量等可互换术语的映射

> ID：14367690
> 
> 赞同：2
> 
> 时间：2013-01-16T20:56:34.333
> 
> 标签：nlp, information-retrieval, synonym

我一直在研究 C# 中的问答引擎。我已经实现了大多数现代系统的功能并取得了很好的效果。尽管有 Wordnet 的帮助，但我还未能解决的一个问题是将用户输入更改为正确的术语。

例如

```
changing Weight -> Mass
changing Tall   -> Height 
```

我的问题是关于是否存在某种资源可以帮助我完成将术语更改为正确术语的任务。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T03:00:29.120

我知道如何有效地做到这一点的唯一方法是拥有大量的用户查询会话和对会话的幸福度度量，然后找到用词 x 代替词 y（可能给定一些上下文 z）之间的相关性，从而提高用户的幸福感。

[这是一篇关于生成查询替换](http://classes.soe.ucsc.edu/ism293/Spring09/material/papers/lec5/jones-www2006-generating-query-subs.pdf)的合理论文。

这是一篇关于[从锚文本生成同义词](http://research.microsoft.com/pubs/179963/paper-final.pdf)的新论文，它不需要查询日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T03:26:59.657

查看 WordNet 中的所有同义词集`Mass`，`Weight`我可以看到没有共享同义词集，因此没有共同意义。确实具有相同含义的单词可以通过它们的同义词集标签进行匹配，我相信您已经意识到。

在我自己的自然语言引擎 (http://nlp.abodit.com) 中，我允许用户在他们定义的语法中使用任何同义词集标签，但在这种情况下我仍然会创建两个单独的语法规则，一个识别关于质量的问题，一个识别关于质量的问题认识有关体重的问题。

但是，还有一些 Wordnet 文件也可以为您提供同义词集之间的类关系。例如，如果您在我的演示页面中输入“定义质量”，您将看到：-

```
4\. wn30:synset-mass-noun-1
the property of a body that causes it to have weight in a gravitational field
--type--> wn30:synset-fundamental_quantity-noun-1
--type--> wn30:synset-physical_property-noun-1
ITokenText, IToken, INoun, Singular 
```

如果你对“重量”做同样的事情，你也会发现它与“物理属性”也有阶级关系。

在我的系统中，您可以编写一个规则来识别有关“物理属性”的问题，也许还有一个命名对象，然后尝试找出他们可能询问的物理属性。而且，也许，如果你不能匹配，也许只是告诉他们所有关于物体的物理特性。

我系统中的方法签名将类似于...

```
 ... QuestionAboutPhysicalProperties (... IPhysicalProperty prop,
                                          INamedObject obj, ...) 
```

...在代码中，我会查看 obj 的属性并尝试找到一个名为“prop”的属性。

# drools - 为什么我的 KnowledgeAgent 不考虑规则更改？

> ID：14367695
> 
> 赞同：0
> 
> 时间：2013-01-16T20:57:12.940
> 
> 标签：drools, rules, business-rules

我有一个 Drools Expert KnowledgeAgent 的简单用例。我正在使用 Drools 5.3.0.Final，我的规则已经在 Guvnor 5.3.0.Final 中编译。

我的变更集 xml 文件如下所示：

```
 <add>
       <resource type="PKG" source="http://ssmdeoasd01.susalud.com:7777/drools-guvnor/org.drools.guvnor.Guvnor/package/co.com.sura.seguros.adultomayor.consultas/LATEST"/>
   </add> 
```

Tha PKG 包含来自单个简单 DTABLE 的规则。

当我更改 DTABLE 并将其上传到 Guvnor（当应用程序仍在运行时）时，Drools Expert 确实识别出更改，但不应用它。控制台如下所示：

```
Compilando reglas ...
Reglas compiladas ...
Tiempo de compilacion de reglas: 0 ms
Obteniendo manager ...
Manager obtenido ...
Obteniendo sesión de conocimiento ...
listKnowledgePackages.size(): 1
Sesión de conocimiento obtenida ... 
3 Padre
2 Hermanos
1 Conyuge
[2013-01-16 15:54:17,670:debug] ResourceChangeScanner attempt to scan 1 resources
[2013-01-16 15:54:17,684:debug] ResourceChangeScanner modified resource=[UrlResource path='http://ssmdeoasd01.susalud.com:7777/drools-guvnor/org.drools.guvnor.Guvnor/package/co.com.sura.seguros.adultomayor.consultas/LATEST'] : 1358369287000 : 1358369637000
[2013-01-16 15:54:17,684:debug] ResourceChangeNotification received ChangeSet notification
[2013-01-16 15:54:17,684:debug] ResourceChangeScanner thread is waiting for 60 seconds.
[2013-01-16 15:54:17,684:debug] ResourceChangeNotification processing ChangeSet
[2013-01-16 15:54:17,684:debug] ResourceChangeNotification ChangeSet modified resource=[UrlResource path='http://ssmdeoasd01.susalud.com:7777/drools-guvnor/org.drools.guvnor.Guvnor/package/co.com.sura.seguros.adultomayor.consultas/LATEST'] for listener=org.drools.agent.impl.KnowledgeAgentImpl@10655dd
[2013-01-16 15:54:17,686:debug] ResourceChangeNotification thread is waiting for queue update
Compilando reglas ...
Reglas compiladas ...
Tiempo de compilacion de reglas: 0 ms
Obteniendo manager ...
Manager obtenido ...
Obteniendo sesión de conocimiento ...
listKnowledgePackages.size(): 1
Sesión de conocimiento obtenida ... 
3 Padre
2 Hermanos
1 Conyuge 
```

即使 KnowledgeAgent 识别出更改，规则仍保持编译不变，结果中不会反映任何更改。

我没有针对 KnowledgeAgent 的特定配置，也没有特定的扩展。我使用了默认侦听器等。

为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T00:48:44.327

我犯了一个错误。

我正在使用现有的知识库构建代理。然后，当代理被实例化时，我从该代理获取基础并保持对该基础的引用，以便始终从该基础获取会话。我认为如果代理中的基础发生了变化，那么我的基础（从代理获得）也会改变。

然后，当 Guvnor 中的规则发生变化时，代理确实完成了它的工作并重新创建了它的知识库，但由于我总是引用代理实例化后立即获得的基础并从旧知识库获取会话，所以执行的规则是那些在旧基地的。

引用现在可以了，规则的更改反映在执行中:)

# python - Python 2.7.1、编解码器和 MySQLdb；为什么不需要设置文件编码

> ID：14367697
> 
> 赞同：2
> 
> 时间：2013-01-16T20:57:21.910
> 
> 标签：python, unicode, python-2.7, mysql-python, codec

我有一个小的 Python 程序，它从文件中读取 SQL 语句并在 MySQL 数据库上运行它们。该文件以 UTF-8 编码，数据库也使用 UTF-8。

如果我不设置数据库编码，我会得到每个人都问的关于“'latin-1'编解码器无法编码字符......”的常见错误。所以我使用设置数据库和文件编码

```
con.set_character_set('utf8')
fh = codecs.open(fname,'r','utf8') 
```

现在它可以工作了，但是当我不设置文件编码（或仅使用内置打开）时，它也可以工作，就在数据库中。“工作”是指生成的数据库记录在假设 UTF-8 的 WordPress 中正确显示。

如果我想要魔法，我会用 Ruby 编写代码。在这种情况下，Python 在做什么，为什么不需要告诉它文件编码？

不用说我在这方面做了很多搜索，而且我的 Google-foo 通常都很好。这里和博客中有大量关于为什么需要设置编码以及如何设置编码的帖子，但我没有找到任何关于它为什么有时会起作用的信息。

编辑：我使用包含“谢谢”的文件对此进行了简单的测试。</p>

```
file
  E2 80 9C 54 68 61 6E 6B 20 79 6F 75 2E E2 80 9D
codecs utf8
  201C 54 68 61 6E 6B 20 79 6F 75 2E 201D 
```

尝试使用 codecs.open(myfile,'r','ascii') 读取它返回“UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2”

从文件中读取产生了一个字节字符串，所以看起来魔法正在发生在插入数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-19T15:51:35.233

当你使用

```
fh = codecs.open(fname,'r','utf8') 
```

`fh.read()`返回一个 Unicode。如果你使用这个 unicode 并使用你的数据库驱动程序（例如 mysql-python）将数据插入到你的数据库中，那么驱动程序负责将 unicode 转换为字节。驱动程序正在使用由设置的编码

```
con.set_character_set('utf8') 
```

如果你使用

```
fh = open(fname, 'r') 
```

然后`fh.read()`返回一个字节串。您将受到任何字节的摆布`fname`。幸运的是，根据您的帖子，该文件以 UTF-8 编码。由于数据已经是一串字节，驱动程序不执行任何编码，只是将字节串原样传送给数据库。

无论哪种方式，相同的 UTF-8 编码字节字符串都会插入到数据库中。

* * *

让我们看一下定义[codecs.open](http://hg.python.org/cpython/file/8f2edea69d5d/Lib/codecs.py#l841)的源代码：

```
def open(filename, mode='rb', encoding=None, errors='strict', buffering=1):

    if encoding is not None:
        if 'U' in mode:
            # No automatic conversion of '\n' is done on reading and writing
            mode = mode.strip().replace('U', '')
            if mode[:1] not in set('rwa'):
                mode = 'r' + mode
        if 'b' not in mode:
            # Force opening of the file in binary mode
            mode = mode + 'b'
    file = __builtin__.open(filename, mode, buffering)
    if encoding is None:
        return file
    info = lookup(encoding)
    srw = StreamReaderWriter(file, info.streamreader, info.streamwriter, errors)
    # Add attributes to simplify introspection
    srw.encoding = encoding
    return srw 
```

特别注意如果设置了 no 会发生什么`encoding`：

```
file = __builtin__.open(filename, mode, buffering)
if encoding is None:
     return file 
```

所以本质上与未设置编码时`codecs.open`的内置相同。`open`内置`open`函数返回一个文件对象，其`read`方法返回一个**str**对象。*它根本不解码。*

相反，当您指定编码时，将`codecs.open`返回 a`StreamReaderWriter`并`srw.encoding`设置为`encoding`。现在，当您调用`StreamReaderWriter`'s`read`方法时，通常会返回一个**unicode对象。**首先**str**对象必须使用指定的编码进行解码。

在您的示例中，`str`对象是

```
In [19]: content
Out[19]: '\xe2\x80\x9cThank you.\xe2\x80\x9d' 
```

如果您将编码指定为`'ascii'`，则`StreamReaderWriter`尝试`content`使用`'ascii'`编码进行解码：

```
In [20]: content.decode('ascii')

UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 0: ordinal not in range(128) 
```

这并不奇怪，因为`ascii`编码只能解码 0--127 范围内的字节，并且`'\xe2'`中的第一个字节`content`具有该范围之外的序数值。

* * *

具体而言：**当您不指定编码时**：

```
In [13]: with codecs.open(filename, 'r') as f:
   ....:     content = f.read() 

In [14]: content
Out[14]: '\xe2\x80\x9cThank you.\xe2\x80\x9d' 
```

`content`是一个`str`。

**当您指定有效编码时**：

```
In [22]: with codecs.open(filename, 'r', encoding = 'utf-8') as f:
   ....:     content = f.read()

In [23]: content
Out[23]: u'\u201cThank you.\u201d' 
```

`content`是一个`unicode`。

**当您指定无效编码时**：

```
In [25]: with codecs.open(filename, 'r', 'ascii') as f:
   ....:     content = f.read()
UnicodeDecodeError: 'ascii' codec can't decode byte 0xe2 in position 0: ordinal not in range(128) 
```

你得到一个`UnicodeDecodeError`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-19T16:01:26.917

在Python 中[有关 Unicode](http://docs.python.org/2/howto/unicode.html#reading-and-writing-unicode-data)的本教程中，在第 4 段中，它是这样写的，描述了`codecs.open(filename, mode, [encoding])`您正在使用的函数：

> `encoding`是一个给出要使用的编码的字符串；如果它保留为 None，则返回一个接受 8 位字符串的常规 Python 文件对象。

此外，在[对 File object 的引用中](http://docs.python.org/2.7/library/stdtypes.html#file.encoding)，据说

> ( `file.encoding`) 也可能是 None，在这种情况下，文件使用系统默认编码来转换 Unicode 字符串。

在没有编码参数的情况下调用`codecs.open()`，返回一个 File 对象，其编码属性为`None`(tested)，因此使用 Unicode 的系统默认值，在您的情况下必须是 UTF-8。这就解释了为什么当你不明确时它会如此巧妙地工作。

# ruby-on-rails - time_select 空白字段保存表单提交时的默认时间

> ID：14367705
> 
> 赞同：3
> 
> 时间：2013-01-16T20:57:43.393
> 
> 标签：ruby-on-rails, ruby-on-rails-3, time-select

我无法理解我的 time_select 选项。我的目标是在表单提交后仅在我的显示操作中呈现用户创建的时间选择。

然而，正在发生的事情是为用户未触及的所有 time_select 字段呈现默认时间 12:00 AM。我正在寻找一种方法来阻止默认时间值的保存（如果我不得不猜测，这是不可能的），或者创建一个允许我阻止默认时间值呈现的条件。

到目前为止，我已经查看了以下内容但没有成功：

1.  [datetime_select 上的零值？](https://stackoverflow.com/questions/559584/nil-value-on-datetime-select)
2.  [可选的 time_select 和 allow_blank 默认为 00:00](https://stackoverflow.com/questions/10851659/optional-time-select-with-allow-blank-defaults-to-0000)
3.  [Rails time_select 设置默认值](https://stackoverflow.com/questions/8695745/rails-time-select-set-default)
4.  [Rails 3：如何防止我的验证通过 time_select 下拉列表中的“零时间”？](https://stackoverflow.com/questions/9514520/rails-3-how-to-prevent-my-validations-to-pass-a-nil-time-from-time-select-dro)
5.  [http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_select)

这是我的代码：

```
_form.html.erb (only the snippet that I am having trouble with for brevity)

                    <td>
                    <span style="display: block; width: auto; margin-left: 4%">
                        <%= f.time_select :med1_time_of_day1, { include_blank: true, twelve_hour: true, minute_step: 15, ampm: true }, style: "width: 45%;" %>
                    </span>
                    <span style="display: block; width: auto; margin-left: 4%">
                        <%= f.time_select :med1_time_of_day2, { include_blank: true, twelve_hour: true, minute_step: 15, ampm: true }, style: "width: 45%;" %>
                    </span>
                    <span style="display: block; width: auto; margin-left: 4%">
                        <%= f.time_select :med1_time_of_day3, { include_blank: true, twelve_hour: true, minute_step: 15, ampm: true }, style: "width: 45%;" %>
                    </span>
                    <span style="display: block; width: auto; margin-left: 4%">
                        <%= f.time_select :med1_time_of_day4, { include_blank: true, twelve_hour: true, minute_step: 15, ampm: true }, style: "width: 45%;" %>
                    </span>
                </td>
                <td> 
```

* * *

```
show.html.erb

<table class="table table-bordered table-striped">
        <thead>
            <th>Medication Name & Instructions for Use</th>
            <th>Time of Day</th>
            <th>
                Day(s) of the Month Medication was Taken
            </th>
        </thead>
        <tbody>
            <td>
                <%= @med_record_form.med1_name %>
                <%= @med_record_form.med1_instruct %>
            </td>
            <td>
                <% unless @med_record_form.med1_time_of_day1.nil? %>
                    <%= @med_record_form.med1_time_of_day1.strftime("%I:%M %p") %>
                    <br />
                <% end %>
                <% unless @med_record_form.med1_time_of_day2.nil? %>
                    <%= @med_record_form.med1_time_of_day2.strftime("%I:%M %p") %>
                    <br />
                <% end %>
                <% unless @med_record_form.med1_time_of_day3.nil? %>
                    <%= @med_record_form.med1_time_of_day3.strftime("%I:%M %p") %>
                    <br/>
                <% end %>
                <% unless @med_record_form.med1_time_of_day4.nil? %>
                    <%= @med_record_form.med1_time_of_day4.strftime("%I:%M %p") %>
                    <br />
                <% end %>
            </td>
        </tbody>
    </table> 
```

> 注意：我也尝试过替换@instance_var.nil？与@instance_var.blank？和@instance_var.empty？没有成功。

* * *

以防万一需要控制器...

```
 med_record_forms_controller.rb

    class MedRecordFormsController < ApplicationController
  before_filter :get_resident

  def index
    @med_record_form = @resident.med_record_forms
  end

  def new
    @med_record_form = @resident.med_record_forms.build
  end

  def create
    @med_record_form = @resident.med_record_forms.build(params[:med_record_form])
    if @med_record_form.save
      redirect_to [@resident, @med_record_form] #, flash_class[:success] = "Form was created!"
    else
      render 'new' #, flash[:error] = "There was a problem with the form"
    end
  end

  def show
    @med_record_form = @resident.med_record_forms.find(params[:id])
  end

  def update
    @med_record_form = @resident.med_record_forms.find(params[:id])
    if @med_record_form.update_attributes(params[:med_record_form])
      flash[:success] = "Form updated"
      redirect_to controller: 'residents', action: 'show', id: params[:id]
    else
      render 'edit', flash[:error] = "Unable to update form"
    end
  end

  def edit
    @med_record_form = @resident.med_record_forms.find(params[:id])
  end

  def destroy
    @med_record_form = @resident.med_record_forms.find(params[:id])
    @med_record_form.destroy
    flash[:notice] = "You sure?"
    redirect_to resident_med_record_forms_path
  end

  private
  # get_resident converts the resident_id given by the routing
  # into an @resident object, for use in this controller & coresponding views
  def get_resident
    @resident = Resident.find(params[:resident_id])
  end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T21:02:01.643

这个问题与此类似：[Optional time_select with allow_blank defaults to 00:00](https://stackoverflow.com/questions/10851659/optional-time-select-with-allow-blank-defaults-to-0000)

我发现 time_select 的默认设置将时间部分设置为空白，但有一个隐藏的日期组件未设置为空白。当您查看参数时，您可以看到这一点：

> "my_time(1i)"=>"1", "my_time(2i)"=>"1", "my_time(3i)"=>"1", "my_time(4i)"=>"", "my_time( 5i)"=>""

您需要在控制器中将时间设置为 nil，如下所示：

```
def create
  @med_record_form = @resident.med_record_forms.build(params[:med_record_form])
  @med_record_form.med1_time_of_day1 = nil if params[:med_record_form]["med1_time_of_day1(4i)"].blank? && 
        params[:med_record_form]["med1_time_of_day1(5i)"].blank?
  if @med_record_form.save
    redirect_to [@resident, @med_record_form] #, flash_class[:success] = "Form was created!"
  else
    render 'new' #, flash[:error] = "There was a problem with the form"
  end
end 
```

# regex - 如何在两个其他单词之间查找超过 3 个字符的单词

> ID：14367707
> 
> 赞同：2
> 
> 时间：2013-01-16T20:57:53.297
> 
> 标签：regex, regex-lookarounds

我有两句话：

```
Today one dog will eat 2 kg of meats more than a cat
Human always prefer dog and cat 
```

在正则表达式的帮助下：

1.  我想找到有狗和猫在一起没有人的句子
2.  我还需要在 dog 和 cat 之间有超过 3 个字符的单词，我们找不到人类

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:02:44.887

假设您要匹配的字符串包含一个句子：

```
"^(?!.*human)(?=.*dog)(?=.*cat)" 
```

如果字符串包含`dog`and`cat`但不包含 ，将匹配`human`。

`dog`对于您的第二个问题（在and之间查找所有超过两个 (!) 字符的单词`cat`，您需要两个步骤（至少在 Java 中）：

首先，找到正则表达式之间`dog`和`cat`使用正则表达式之间的字符串部分

```
"(?<=dog).*(?=cat)" 
```

然后，在匹配结果上，使用正则表达式`"\\w{3,}"`查找长度为 3 或以上的所有字母数字单词。

# javascript - https 页面上的书签

> ID：14367711
> 
> 赞同：6
> 
> 时间：2013-01-16T20:58:15.090
> 
> 标签：javascript, https, bookmarklet

我正在尝试制作一个可在 youtube 和其他视频网站上使用的书签，以便轻松地从视频中获取信息并将其存储在其他地方。

从今天开始，显然我不能再这样做了，因为 youtube 强制自己使用 https 连接，并且从我在 chrome 控制台窗口上读到的内容来看，书签不在 https 页面上运行。有解决方法吗？

这是编辑后的代码：

```
javascript:(function(){var jsCode=document.createElement('script');jsCode.setAttribute('src','http://[mysite]/b/enter.php?i=userid&r='+Math.random());document.body.appendChild(jsCode);}()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:10:21.333

Google Chrome（可能还有其他浏览器？）阻止从 HTTPS 文档访问 HTTP 资源。这是为了防止“[混合内容](https://developer.mozilla.org/en-US/docs/Security/MixedContent)”攻击，在这种攻击中，不安全的 HTTP 脚本可能会在网络传输过程中[被攻击者截获](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)并更改为执行任何类型的恶意活动（例如，将 cookie 或敏感页面信息泄露给第三方）。此类违规行为将撤消 HTTPS 授予的任何保护。

Chrome 曾经提供一个突出的警告，指出不安全的资源被阻止，但现在它不再这样做了，所有不安全的加载都会默默地失败。目前唯一可用的解决方案是在提供脚本时自己使用 HTTPS。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-07T20:12:31.187

在 Firefox 中，如果您想在 https 页面上运行引用 http 的书签，解决此问题的方法是暂时禁用`security.mixed_content.block_active_content`. 有两种方法可以做到这一点。

1.  转到`about:config`新选项卡，搜索`security.mixed_content.block_active_content`然后将值切换为`false`. 运行您的小书签，然后将其切换回`true`（因为您可能希望它大部分时间都打开）。

2.  使用附加组件/扩展来切换块。快速搜索出现了[Toggle Mixed Active Content](https://addons.mozilla.org/en-US/firefox/addon/toggle-mixed-active-content/)，快速测试似乎效果很好。可能还有其他人。

玩得开心，小心点。这里是龙！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T21:00:17.283

> 小书签不在 https 页面上运行

为什么不？

尝试自己更改为 HTTPS 域。当您在 HTTPS 域上时，通常会阻止 HTTP 内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-05-09T04:27:24.197

[我使用Greasemonkey userscript](https://groups.google.com/d/msg/greasemonkey-users/mw61Ynw5ORc/Gl_BNUhtSq0J)为这个问题创建了一个解决方法“修复” 。您现在可以在所有 CSP 和 https:// 网站上拥有小书签，并且将小书签放在一个漂亮、易于编辑的库文件中，而不是单独压缩到书签中。

# c# - 何时使用 ISourceBlock 或 IObservable

> ID：14367718
> 
> 赞同：2
> 
> 时间：2013-01-16T20:58:37.857
> 
> 标签：c#, task-parallel-library, system.reactive, tpl-dataflow

我需要使用推模型返回一组项目（而不是拉，如 IEnumerable）。但是，我不确定是否应该使用响应式扩展中的 IObservable 或 TPL 数据流中的 ISourceBlock。

它们看起来很相似，在什么情况下应该选择一个而不是另一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:23:29.313

基本上，我认为答案归结为您将如何使用结果。如果您想使用 TPL 数据流处理它们，请返回`ISourceBlock<T>`. 如果您要使用 Rx 处理它们，请使用`IObservable<T>`.

如果您不知道，我认为最好返回`ISourceBlock<T>`，因为[它可以很容易地转换为`IObservable<T>`](http://msdn.microsoft.com/en-us/library/hh160306)。

# java - 使用 XJC 或 xmlBeans 生成代理类失败

> ID：14367722
> 
> 赞同：1
> 
> 时间：2013-01-16T20:58:47.163
> 
> 标签：java, jaxb, xjc, amazon-mws

我正在尝试使用 XJC 2.2.4-2 和剧集文件生成代理类。最初的剧集生成使用 amazon.xsd 运行良好，但随后使用该剧集的请求失败。

我也尝试过 xmlbeans`scomp`命令，但也失败了。

我正在运行的命令是：

`xjc.exe -extension -b amazon.episode amzn-base.xsd``scomp -src amazonGeneratedClasses -out feedsApi.jar new`new 是一个包含所有 xsd 文件的目录 。

哪个输出：

[新江城]

```
parsing a schema...
[ERROR] SCD "AmazonOnly" didnt match any schema component
  line 69 of file:/C:/Users/roberth/Programming_Projects/new/amazon.episode

[ERROR] SCD "Amazon-Vendor-Only" didnt match any schema component
  line 60 of file:/C:/Users/roberth/Programming_Projects/new/amazon.episode

Failed to parse a schema. 
```

第 60 行：

```
 <jaxb:bindings scd="Amazon-Vendor-Only">
      <jaxb:class ref="amazon.AmazonVendorOnly"/>
    </jaxb:bindings> 
```

第 69 行：

```
 <jaxb:bindings scd="Amazon-Only">
      <jaxb:class ref="amazon.AmazonOnly"/>
    </jaxb:bindings> 
```

文件 amazon.AmazonVendorOnly 和 amazon.AmazonOnly 确实存在。

[XMLBeans]

```
MerchantListingsReport.xsd:27:8: error: Invalid QName value: Can't resolve prefix 'tns'
amzn-header.xsd:17:5: error: sch-props-correct.2: Duplicate global element: Header (Original global element found in file: aces.xsd)
AmazonACES.xsd:109:2: error: sch-props-correct.2: Duplicate global element: Aspiration (Original global element found in file: aces.xsd)
AmazonACES.xsd:118:2: error: sch-props-correct.2: Duplicate global element: BaseVehicle (Original global element found in file: aces.xsd)
AmazonACES.xsd:127:2: error: sch-props-correct.2: Duplicate global element: BedLength (Original global element found in file: aces.xsd)
AmazonACES.xsd:136:2: error: sch-props-correct.2: Duplicate global element: BedType (Original global element found in file: aces.xsd)
AmazonACES.xsd:145:2: error: sch-props-correct.2: Duplicate global element: BodyNumDoors (Original global element found in file: aces.xsd)
AmazonACES.xsd:154:2: error: sch-props-correct.2: Duplicate global element: BodyType (Original global element found in file: aces.xsd)
AmazonACES.xsd:163:2: error: sch-props-correct.2: Duplicate global element: BrakeABS (Original global element found in file: aces.xsd)
AmazonACES.xsd:172:2: error: sch-props-correct.2: Duplicate global element: BrakeSystem (Original global element found in file: aces.xsd)
AmazonACES.xsd:181:2: error: sch-props-correct.2: Duplicate global element: CylinderHeadType (Original global element found in file: aces.xsd)
AmazonACES.xsd:190:2: error: sch-props-correct.2: Duplicate global element: DisplayOrder (Original global element found in file: aces.xsd)
AmazonACES.xsd:191:2: error: sch-props-correct.2: Duplicate global element: DriveType (Original global element found in file: aces.xsd)
AmazonACES.xsd:200:2: error: sch-props-correct.2: Duplicate global element: EngineBase (Original global element found in file: aces.xsd)
AmazonACES.xsd:209:2: error: sch-props-correct.2: Duplicate global element: EngineDesignation (Original global element found in file: aces.xsd)
AmazonACES.xsd:218:2: error: sch-props-correct.2: Duplicate global element: EngineMfr (Original global element found in file: aces.xsd)
AmazonACES.xsd:227:2: error: sch-props-correct.2: Duplicate global element: EngineVIN (Original global element found in file: aces.xsd)
AmazonACES.xsd:236:2: error: sch-props-correct.2: Duplicate global element: EngineVersion (Original global element found in file: aces.xsd)
AmazonACES.xsd:252:2: error: sch-props-correct.2: Duplicate global element: FrontBrakeType (Original global element found in file: aces.xsd)
AmazonACES.xsd:261:2: error: sch-props-correct.2: Duplicate global element: FrontSpringType (Original global element found in file: aces.xsd)
AmazonACES.xsd:270:2: error: sch-props-correct.2: Duplicate global element: FuelDeliverySubType (Original global element found in file: aces.xsd)
AmazonACES.xsd:279:2: error: sch-props-correct.2: Duplicate global element: FuelDeliveryType (Original global element found in file: aces.xsd)
AmazonACES.xsd:288:2: error: sch-props-correct.2: Duplicate global element: FuelSystemControlType (Original global element found in file: aces.xsd)
AmazonACES.xsd:297:2: error: sch-props-correct.2: Duplicate global element: FuelSystemDesign (Original global element found in file: aces.xsd)
AmazonACES.xsd:306:2: error: sch-props-correct.2: Duplicate global element: FuelType (Original global element found in file: aces.xsd)
AmazonACES.xsd:323:2: error: sch-props-correct.2: Duplicate global element: IgnitionSystemType (Original global element found in file: aces.xsd)
AmazonACES.xsd:332:2: error: sch-props-correct.2: Duplicate global element: Make (Original global element found in file: aces.xsd)
AmazonACES.xsd:341:2: error: sch-props-correct.2: Duplicate global element: MfrBodyCode (Original global element found in file: aces.xsd)
AmazonACES.xsd:351:2: error: sch-props-correct.2: Duplicate global element: MfrLabel (Original global element found in file: aces.xsd)
AmazonACES.xsd:360:2: error: sch-props-correct.2: Duplicate global element: Model (Original global element found in file: aces.xsd)
AmazonACES.xsd:369:2: error: sch-props-correct.2: Duplicate global element: Note (Original global element found in file: aces.xsd)
AmazonACES.xsd:387:2: error: sch-props-correct.2: Duplicate global element: Part (Original global element found in file: aces.xsd)
AmazonACES.xsd:396:2: error: sch-props-correct.2: Duplicate global element: PartType (Original global element found in file: aces.xsd)
AmazonACES.xsd:405:2: error: sch-props-correct.2: Duplicate global element: Position (Original global element found in file: aces.xsd)
AmazonACES.xsd:414:2: error: sch-props-correct.2: Duplicate global element: Qty (Original global element found in file: aces.xsd)
AmazonACES.xsd:415:2: error: sch-props-correct.2: Duplicate global element: RearBrakeType (Original global element found in file: aces.xsd)
AmazonACES.xsd:424:2: error: sch-props-correct.2: Duplicate global element: RearSpringType (Original global element found in file: aces.xsd)
AmazonACES.xsd:433:2: error: sch-props-correct.2: Duplicate global element: Region (Original global element found in file: aces.xsd)
AmazonACES.xsd:451:2: error: sch-props-correct.2: Duplicate global element: SteeringSystem (Original global element found in file: aces.xsd)
AmazonACES.xsd:460:2: error: sch-props-correct.2: Duplicate global element: SteeringType (Original global element found in file: aces.xsd)
AmazonACES.xsd:469:2: error: sch-props-correct.2: Duplicate global element: SubModel (Original global element found in file: aces.xsd)
AmazonACES.xsd:508:2: error: sch-props-correct.2: Duplicate global element: TransmissionBase (Original global element found in file: aces.xsd)
AmazonACES.xsd:517:2: error: sch-props-correct.2: Duplicate global element: TransmissionControlType (Original global element found in file: aces.xsd)
AmazonACES.xsd:526:2: error: sch-props-correct.2: Duplicate global element: TransmissionMfr (Original global element found in file: aces.xsd)
AmazonACES.xsd:535:2: error: sch-props-correct.2: Duplicate global element: TransmissionMfrCode (Original global element found in file: aces.xsd)
AmazonACES.xsd:544:2: error: sch-props-correct.2: Duplicate global element: TransmissionNumSpeeds (Original global element found in file: aces.xsd)
AmazonACES.xsd:553:2: error: sch-props-correct.2: Duplicate global element: TransmissionType (Original global element found in file: aces.xsd)
AmazonACES.xsd:562:2: error: sch-props-correct.2: Duplicate global element: VehicleType (Original global element found in file: aces.xsd)
AmazonACES.xsd:571:2: error: sch-props-correct.2: Duplicate global element: WheelBase (Original global element found in file: aces.xsd)
AmazonACES.xsd:580:2: error: sch-props-correct.2: Duplicate global element: Years (Original global element found in file: aces.xsd)
PIES_5.0_02_01_2006.xsd:4548:2: error: sch-props-correct.2: Duplicate global type: MaintenanceType (Original global type found in file: AmazonPIES.xsd
)
PIES_5.0_02_01_2006.xsd:4591:2: error: sch-props-correct.2: Duplicate global type: ImageStyle (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:4664:2: error: sch-props-correct.2: Duplicate global type: FileType (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:4706:2: error: sch-props-correct.2: Duplicate global type: ImageResolution (Original global type found in file: AmazonPIES.xsd
)
PIES_5.0_02_01_2006.xsd:4756:2: error: sch-props-correct.2: Duplicate global type: ImageRepresentation (Original global type found in file: AmazonPIES
.xsd)
PIES_5.0_02_01_2006.xsd:4799:2: error: sch-props-correct.2: Duplicate global type: ColorMode (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:4846:2: error: sch-props-correct.2: Duplicate global type: Background (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:4894:2: error: sch-props-correct.2: Duplicate global type: OrientationView (Original global type found in file: AmazonPIES.xsd
)
PIES_5.0_02_01_2006.xsd:4977:2: error: sch-props-correct.2: Duplicate global type: ImageFileEncodeType (Original global type found in file: AmazonPIES
.xsd)
PIES_5.0_02_01_2006.xsd:5065:2: error: sch-props-correct.2: Duplicate global type: LanguageCode (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:5113:2: error: sch-props-correct.2: Duplicate global type: LinkCode (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:5215:2: error: sch-props-correct.2: Duplicate global type: ItemIDQualifier (Original global type found in file: AmazonPIES.xsd
)
PIES_5.0_02_01_2006.xsd:5270:2: error: sch-props-correct.2: Duplicate global type: KitsUOM (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:5384:2: error: sch-props-correct.2: Duplicate global type: PackageUOM (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:5432:2: error: sch-props-correct.2: Duplicate global type: PackageDimUOM (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:5475:2: error: sch-props-correct.2: Duplicate global type: ShippingScope (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:5518:2: error: sch-props-correct.2: Duplicate global type: Bulk (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:5561:2: error: sch-props-correct.2: Duplicate global type: WeightUOM (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:5604:2: error: sch-props-correct.2: Duplicate global type: CountryCode (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:6121:2: error: sch-props-correct.2: Duplicate global type: TransportMethod (Original global type found in file: AmazonPIES.xsd
)
PIES_5.0_02_01_2006.xsd:6168:2: error: sch-props-correct.2: Duplicate global type: Regulated (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:6212:2: error: sch-props-correct.2: Duplicate global type: PackagingGroupCode (Original global type found in file: AmazonPIES.
xsd)
PIES_5.0_02_01_2006.xsd:6258:2: error: sch-props-correct.2: Duplicate global type: ExtendedProductInformationCode (Original global type found in file:
 AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:6417:2: error: sch-props-correct.2: Duplicate global type: RegulationsExceptionCode (Original global type found in file: Amazo
nPIES.xsd)
PIES_5.0_02_01_2006.xsd:6466:2: error: sch-props-correct.2: Duplicate global type: PriceBreakUOM (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:6545:2: error: sch-props-correct.2: Duplicate global type: PriceUOM (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:6681:2: error: sch-props-correct.2: Duplicate global type: DescriptionCode (Original global type found in file: AmazonPIES.xsd
)
PIES_5.0_02_01_2006.xsd:6748:2: error: sch-props-correct.2: Duplicate global type: PriceType (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:6865:2: error: sch-props-correct.2: Duplicate global type: OQUOM (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:6974:2: error: sch-props-correct.2: Duplicate global type: GTINQualifier (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:7025:2: error: sch-props-correct.2: Duplicate global type: HazardousMaterialCode (Original global type found in file: AmazonPI
ES.xsd)
PIES_5.0_02_01_2006.xsd:7070:2: error: sch-props-correct.2: Duplicate global type: StateCode (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:7247:2: error: sch-props-correct.2: Duplicate global type: ContactType (Original global type found in file: AmazonPIES.xsd)
PIES_5.0_02_01_2006.xsd:7290:2: error: sch-props-correct.2: Duplicate global type: QualityGradeLevel (Original global type found in file: AmazonPIES.x
sd)
PIES_5.0_02_01_2006.xsd:13:2: error: sch-props-correct.2: Duplicate global element: PartInformation (Original global element found in file: AmazonPIES
.xsd)
TypeDefinitions.xsd:36:2: error: sch-props-correct.2: Duplicate global type: CurrencyCode (Original global type found in file: PIES_5.0_02_01_2006.xsd
)
Time to build schema type system: 3.525 seconds
BUILD FAILED 
```

不幸的是，XSD 文件都被标记为机密，所以我无法在这里分享它们的内容。话虽这么说，如果有人有任何预感，建议甚至是方向，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T15:17:30.813

这可能是也可能不是答案，因为我不知道您设置的确切细节，但这个问题强烈地提醒了我这一点，所以我认为它可能会有所帮助。请注意，这仅适用于使用 XJC 的 JAXB。但是，此问题的基础实际上可能是 Apache Xerces 和/或其 JRE 等效项中的错误，因此您选择的绑定框架可能不会产生影响。JRE Xerces fork 和最新的 Xerces 版本都存在问题，因此切换 XML API 实现对我也没有任何作用。

我有一个 Maven 项目，它非常简单地包含一个主模式、主模式包含的一些其他模式（相同的命名空间）和一个绑定文件。然后我有任意数量的其他 Maven 项目，每个项目都有自己的模式，这些模式可以导入主要的模式（不同的命名空间）。由于主模式及其包含的 JAXB 实体已经由第一个 Maven 项目生成，我也希望使用一个情节文件来确保其他项目将简单地扩展它，而不是重新生成代码。这将允许我分发单独的罐子。

这是第一个主要项目的 Maven pom (Maven 3)：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>acme.xml</groupId>
    <artifactId>acme-xml-main</artifactId>
    <packaging>jar</packaging>
    <version>1.0.0</version>
    <name>Acme XML main models</name>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
    </dependencies>
    <build>
        <outputDirectory>${basedir}/target/classes-${compilerTarget}</outputDirectory>
        <testOutputDirectory>${basedir}/target/test-classes-${compilerTarget}</testOutputDirectory>
        <resources>
            <resource>
                <directory>${basedir}/src/main/resources</directory>
                <excludes>
                    <!-- Filtering out any svn folders -->
                    <exclude>**/.svn</exclude>
                    <!-- Filtering out JAXB binding files -->
                    <exclude>**/*.xjb</exclude>
                    <!-- Filtering out XML catalogs -->
                    <exclude>**/*.cat</exclude>
                </excludes>
            </resource>
        </resources>
        <!-- First we need to generate Java source files based on the schemas -->
        <plugins>
            <plugin>
                <groupId>org.jvnet.jaxb2.maven2</groupId>
                <artifactId>maven-jaxb21-plugin</artifactId>
                <version>0.8.0</version>
                <executions>
                    <execution>
                        <id>xjc-generate</id>
                        <goals>
                            <goal>generate</goal>
                        </goals>
                        <configuration>
                            <schemaDirectory>${basedir}/src/main/resources/acme/schemas</schemaDirectory>
                            <schemaLanguage>XMLSCHEMA</schemaLanguage>
                            <addCompileSourceRoot>true</addCompileSourceRoot>
                            <episode>true</episode>
                            <removeOldOutput>true</removeOldOutput>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <target>1.6</target>
                    <encoding>${project.build.sourceEncoding}</encoding>
                    <optimize>true</optimize>
                 <source>1.6</source>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.4</version>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12</version>
            </plugin>
        </plugins>
    </build>
</project> 
```

这些模式与 XJC 生成的类一起打包。我想在“扩展”它的其他项目中引用这个项目（或更具体地说，它的 jar）。

这是一个这样的扩展的 Maven pom：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>acme.xml</groupId>
    <artifactId>acme-xml-sub</artifactId>
    <packaging>jar</packaging>
    <version>1.0.0</version>
    <name>Acme XML sub models</name>
    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    </properties>
    <dependencies>
        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>acme.xml</groupId>
            <artifactId>acme-xml-main</artifactId>
            <version>1.0.0</version>
            <scope>provided</scope>
        </dependency>
    </dependencies>
    <build>
        <outputDirectory>${basedir}/target/classes-${compilerTarget}</outputDirectory>
        <testOutputDirectory>${basedir}/target/test-classes-${compilerTarget}</testOutputDirectory>
        <!-- Resources to include into the packaged build -->
        <resources>
            <resource>
                <directory>${basedir}/src/main/resources</directory>
                <excludes>
                    <!-- Filtering out any svn folders -->
                    <exclude>**/.svn</exclude>
                    <!-- Filtering out JAXB binding files -->
                    <exclude>**/*.xjb</exclude>
                    <!-- Filtering out XML catalogs -->
                    <exclude>**/*.cat</exclude>
                </excludes>
            </resource>
        </resources>
        <plugins>
            <!-- First we need to generate Java source files based on the schemas -->
            <plugin>
                <groupId>org.jvnet.jaxb2.maven2</groupId>
                <artifactId>maven-jaxb21-plugin</artifactId>
                <version>0.8.2</version>
                <executions>
                    <execution>
                        <id>xjc-generate</id>
                        <goals>
                            <goal>generate</goal>
                        </goals>
                        <configuration>
                            <!-- The extension flag needs to be on in order to use the episode file -->
                            <args>
                                <arg>-extension</arg>
                            </args>
                            <schemaDirectory>${basedir}/src/main/resources/acme/sub/schemas</schemaDirectory>
                            <schemaLanguage>XMLSCHEMA</schemaLanguage>
                            <addCompileSourceRoot>true</addCompileSourceRoot>
                            <!-- No need to generate an episode for this compilation... -->
                            <episode>false</episode>
                            <!-- The catalog makes sure we can resolve the main schema -->
                            <catalog>${basedir}/src/main/resources/acme/sub/schemas/catalog.cat</catalog>
                            <!-- Using the episode file from the main model jar -->
                            <episodes>
                                <episode>
                                    <groupId>acme.xml</groupId>
                                    <artifactId>acme-xml-main</artifactId>
                                    <version>1.0.0</version>
                                    <scope>compile</scope>
                                </episode>
                            </episodes>
                            <removeOldOutput>true</removeOldOutput>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <target>1.6</target>
                    <encoding>${project.build.sourceEncoding}</encoding>
                    <optimize>true</optimize>
                    <excludes>
                        <!-- This exclude avoids compiling the ObjectFactory class that -->
                        <!-- XJC insists on generating for the default package name of the main -->
                        <!-- namespace. Please leave this in to avoid any trouble. -->
                        <exclude>**/acme/main/ObjectFactory.java</exclude>
                    </excludes>
                 <source>1.6</source>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.5</version>
                <configuration>
                    <encoding>${project.build.sourceEncoding}</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <version>2.4</version>
                <configuration>
                    <archive>
                        <addMavenDescriptor>false</addMavenDescriptor>
                    </archive>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-surefire-plugin</artifactId>
                <version>2.12</version>
            </plugin>
        </plugins>
    </build>
</project> 
```

我遇到的第一个问题是找不到用于导入子模式的主模式。让我们调用主模式`main.xsd`，假设它有目标命名空间`http://www.acme.com`，并且它的 JAXB 类被放在`acme.main`绑定文件的包中。

对于解析模式，您可以使用目录。所以这是我尝试的第一件事。在子项目中，我添加了一个包含以下内容的 catalog.cat 文件：

```
--
  Resolving the main XML Schema system ID.
--
SYSTEM "main.xsd" "classpath:/acme/schemas/main.xsd"

--
  Resolving the main namespace to the corresponding schema file.
--
PUBLIC "http://www.acme.com" "classpath:/acme/schemas/main.xsd" 
```

你可以看到上面第二个Maven pom中引用的catalog.cat。我为 SYSTEM ID 尝试了一大堆不同的方法，但无论我做了什么，在类路径上解析模式似乎都不起作用。所以我转向创建一个自定义目录解析器来为我处理这个问题。这是我用主模式/JAXB 模型 jar 文件打包的 Java 类。我将此依赖项添加到第一个 Maven pom ...

```
<dependency>
    <groupId>com.sun.org.apache.xml.internal</groupId>
    <artifactId>resolver</artifactId>
    <version>20050927</version>
    <scope>provided</scope>
</dependency> 
```

...并创建了一个自定义目录解析器，它始终将某些系统 ID 和主命名空间 URI 链接到我的主架构。

然后我将第二个 Maven pom 的 XJC 生成配置调整为：

```
<!-- First we need to generate Java source files based on the schemas -->
<plugin>
    <groupId>org.jvnet.jaxb2.maven2</groupId>
    <artifactId>maven-jaxb21-plugin</artifactId>
    <version>0.8.2</version>
    <!-- Need this dependency for the custom catalog resolver -->
    <dependencies>
        <dependency>
            <groupId>acme.xml</groupId>
            <artifactId>acme-xml-main</artifactId>
            <version>1.0.0</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>
    <executions>
        <execution>
            <id>xjc-generate</id>
            <goals>
                <goal>generate</goal>
            </goals>
            <configuration>
                <!-- The extension flag needs to be on in order to use the episode file -->
                <args>
                    <arg>-extension</arg>
                </args>
                <schemaDirectory>${basedir}/src/main/resources/acme/sub/schemas</schemaDirectory>
                <schemaLanguage>XMLSCHEMA</schemaLanguage>
                <addCompileSourceRoot>true</addCompileSourceRoot>
                <!-- No need to generate an episode for this compilation... -->
                <episode>false</episode>
                <!-- The catalog makes sure we can resolve the main schema -->
                <catalog>${basedir}/src/main/resources/acme/sub/schemas/catalog.cat</catalog>
                <catalogResolver>acme.xml.tools.AcmeCatalogResolver</catalogResolver>
                <!-- Using the episode file from the general model bundle -->
                <episodes>
                    <episode>
                        <groupId>acme.xml</groupId>
                        <artifactId>acme-xml-main</artifactId>
                        <version>1.0.0</version>
                        <scope>compile</scope>
                    </episode>
                </episodes>
                <removeOldOutput>true</removeOldOutput>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

有了这个，以及目录解析器的一些控制台输出以找出发生了什么，最终可以从类路径中解析主模式。但事情还没有完全准备好。

每当我在主模式中使用包含时，为了确保可以将其分解为不同的文件和组定义以清楚起见，我会发现 XML 处理器抱怨重复定义。似乎各种文件将通过不同的路径（一些系统 ID、其他命名空间、一些完整路径、其他相对...）来解析，这似乎会导致问题。尽管这些不同的路径指向本质上是同一个文件，但从它加载的任何内容都将被 XML 处理器视为单独的定义。似乎 XML 验证 API 并不擅长创建一个连贯的 Schema 对象，并且只是不断地查找内容，而没有意识到它正在通过不同的路径查看同一个文件。

因此，我在自定义目录解析器中添加了更多内容，以确保始终以相同的方式处理包含的文件。这是生成的类：

```
package acme.xml.tools;

import com.sun.org.apache.xml.internal.resolver.tools.CatalogResolver;
import java.io.InputStream;
import java.net.URL;
import java.util.Collections;
import java.util.HashSet;
import java.util.Set;
import javax.xml.transform.Source;
import javax.xml.transform.TransformerException;
import javax.xml.transform.stream.StreamSource;
import org.xml.sax.InputSource;

public class AcmeCatalogResolver extends CatalogResolver {

    private final static String namespace = "http://www.acme.com";
    private final static Set<String> systemIDs;
    static {
        final Set<String> temp = new HashSet<String>();
        temp.add("main.xsd");
        temp.add("Main.xsd");
        temp.add("MAIN.xsd");
        systemIDs = Collections.unmodifiableSet(temp);
    }

    @Override
    public InputSource resolveEntity(String publicId, String systemId) {

        //If the public ID is the main namespace, get the input source
        //based on the system ID
        if(publicId != null && publicId.trim().equals(namespace)) {
            final InputSource source = getInputSource(systemId);
            source.setPublicId(publicId);
            return source;
        }

        //Otherwise, check if the system ID is one of the allowed references
        //to the main schema and return that
        if(systemId != null && systemIDs.contains(systemId.trim())) {
            final InputSource source = getMainSchemaInputSource();
            source.setPublicId(publicId);
            return source;
        }

        //Still nothing: check for file or jar URIs to the main schema
        if(systemId != null && (systemId.startsWith("file:") || 
                systemId.startsWith("jar:"))) {
            boolean match = false;
            for(final String id : systemIDs) {
                match = systemId.endsWith(id);
                if(match)
                    break;
            }
            if(match) {
                final InputSource source = getMainSchemaInputSource();
                source.setPublicId(publicId);
                return source;
            }
        }

        //Final option: use only the system ID to find the source
        if(systemId != null && !systemId.isEmpty()) {
            final InputSource source = getInputSource(systemId);
            source.setPublicId(publicId);
            return source;
        }

        //This should not be necessary, but just in case...
        return super.resolveEntity(publicId, systemId);

    }

    @Override
    public Source resolve(String href, String base) throws TransformerException {

        if(href != null && href.trim().equals(namespace)) {
            final StreamSource source = getMainSchemaSource();
            source.setPublicId(href);
            return getMainSchemaSource();
        }

        return super.resolve(href, base);

    }

    @Override
    public String getResolvedEntity(String string, String string1) {

        return super.getResolvedEntity(string, string1);

    }

    private InputSource getInputSource(String systemId) {

        final int lastSlash = systemId.lastIndexOf('/');
        if(lastSlash >= 0)
            systemId = systemId.substring(lastSlash + 1);
        final int lastBackSlash = systemId.lastIndexOf('\\');
        if(lastBackSlash >= 0)
            systemId = systemId.substring(lastBackSlash + 1);

        final URL url = 
            this.getClass().getResource("/acme/schemas/" + systemId);

        final InputStream stream = 
            this.getClass().getResourceAsStream("/acme/schemas/" + systemId);

        final InputSource source = new InputSource(stream);
        source.setSystemId(url.toString());

        return source;

    }

    private InputSource getMainSchemaInputSource() {

        final URL url = 
            this.getClass().getResource("/acme/schemas/main.xsd");

        final InputStream stream = 
            this.getClass().getResourceAsStream("/acme/schemas/main.xsd");

        final InputSource source = new InputSource(stream);
        source.setSystemId(url.toString());

        return source;

    }

    private StreamSource getGeneralSchemaSource() {

        final URL url = 
            this.getClass().getResource("/acme/schemas/main.xsd");

        final InputStream stream = 
            this.getClass().getResourceAsStream("/acme/schemas/main.xsd");

        final StreamSource source = new StreamSource(stream);
        source.setSystemId(url.toString());

        return source;

    }

} 
```

有了这个，我终于让它工作了。我希望这可以在某种程度上为您提供解决方案的途径。

是的，脏得要命。我正在扩展 Sun 内部课程。我基本上只是使用目录文件将对主模式或其名称空间的请求定向到一些硬编码整个交易的 hacky 类。但至少它是这样工作的。由于显然 Sun 无法解决已开放多年的 JAXP 实现中的问题！而且我认为甲骨文也不会胡说八道。但是您最好确保他们会尝试将 XML 强加于您的喉咙以进行任何敢于离开主板的程序交互。Apache 的 Xerces 实现也没有解决任何问题。考虑到 W3C XML Schema 规范的灾难，我并不能真正责怪他们。

对最后一点感到抱歉，当事实证明，在 Java 中使用 XML Schema 做琐碎的事情之外的任何事情都会立即变成精神折磨时，我只需要不时发泄一下。如果 JAXB 不是那么有用，我不会为此烦恼。

# jquery - jQuery Mobile-DW-添加更多页面的可定制启动器设计？

> ID：14367724
> 
> 赞同：0
> 
> 时间：2013-01-16T20:58:46.547
> 
> 标签：jquery, jquery-mobile

使用 Adob​​e 为其入门 JQuery Mobile 站点示例提供的模板进行离线练习。
[http://www.adobe.com/devnet/dreamweaver/articles/dw-template-jqmobile.html](http://www.adobe.com/devnet/dreamweaver/articles/dw-template-jqmobile.html)

但我发现我似乎不能建立超过 4 页。我用内容制作了第五页，但出现了黑屏。我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:01:20.410

您的 HTML 中可能有 ab 错误。

这是一个使用额外第五页构建的 adobe 示例。将其复制到单个文件中并进行测试，所有 js/css 文件都是硬编码的，因此您无需担心：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title></title>`enter code here`
        <link href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" rel="stylesheet" type="text/css" />
        <script src="http://www.maja-klajic.info/js/jquery-1.8.2.min.js" type="text/javascript"></script>       
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js" type="text/javascript"></script>
    </head>
    <body>
        <div data-role="page" id="page">
            <!-- The 'logo' DIV below was added to the default markup -->
            <div class="logo"></div>
            <div data-role="header" class="heading">
                <h1>Your Organization</h1>
            </div>
            <div data-role="content">   
                <ul data-role="listview" class="mainmenu">
                    <li><a href="#page2">Who We Are</a></li>
                    <li><a href="#page3">What We Do</a></li>
                    <li><a href="#page4">About Us</a></li>
                    <li><a href="#page5">Fift Page</a></li>                 
                </ul>       
            </div>
            <div data-role="footer">
                <h4>&copy;2011 &bull; Your Organization Name</h4>
            </div>
        </div>

        <div data-role="page" id="page2">
            <div data-role="header">
                <h1>Who We Are</h1>
            </div>
            <div data-role="content">   
                <p>Nunc auctor bibendum eros. Maecenas porta accumsan mauris. Etiam enim enim, elementum sed, bibendum quis, rhoncus non, metus. Fusce neque dolor, adipiscing sed, consectetuer et, lacinia sit amet, quam. Suspendisse wisi quam, consectetuer in, blandit sed, suscipit eu, eros. Etiam ligula enim, tempor ut, blandit nec, mollis eu, lectus. Nam cursus. Vivamus iaculis. Aenean risus purus, pharetra in, blandit quis, gravida a, turpis. Donec nisl. Aenean eget mi. Fusce mattis est id diam. Phasellus faucibus interdum sapien. Duis quis nunc. Sed enim.</p>       
            </div>
            <div data-role="footer">
                <h4>&copy;2011 &bull; Your Organization Name</h4>
            </div>
        </div>

        <div data-role="page" id="page3">
            <div data-role="header">
                <h1>What We Do</h1>
            </div>
            <div data-role="content">
                <h2>Maecenas porta accumsan mauris</h2>
                <p>Nunc auctor bibendum eros. Maecenas porta accumsan mauris. Etiam enim enim, elementum sed, bibendum quis, rhoncus non, metus. Fusce neque dolor, adipiscing sed, consectetuer et, lacinia sit amet, quam. Suspendisse wisi quam</p>
                <figure>
                    <img src="images/photo.jpg" alt="photo" width="120" />
                    <figcaption>Duis a eros lit ora tor quent per conu bia nos tra per.</figcaption>
                </figure>
                <p>Consectetuer in, blandit sed, suscipit eu, eros. Etiam ligula enim, tempor ut, blandit nec, mollis eu, lectus. Nam cursus. Vivamus iaculis. Aenean risus purus, pharetra in, blandit quis, gravida a, turpis. Donec nisl. Aenean eget mi. Fusce mattis est id diam. Phasellus faucibus interdum sapien. Duis quis nunc. Sed enim.</p>
                <p>Nunc auctor bibendum eros. Maecenas porta accumsan mauris. Etiam enim enim, elementum sed, bibendum quis, rhoncus non, metus. Fusce neque dolor, adipiscing sed, consectetuer et, lacinia sit amet, quam. Suspendisse wisi quam, consectetuer in, blandit sed, suscipit eu, eros. Etiam ligula enim, tempor ut, blandit nec, mollis eu, lectus. Nam cursus. Vivamus iaculis. Aenean risus purus, pharetra in, blandit quis, gravida a, turpis. Donec nisl. Aenean eget mi. Fusce mattis est id diam. Phasellus faucibus interdum sapien. Duis quis nunc. Sed enim.</p>
            </div>
            <div data-role="footer">
                <h4>&copy;2011 &bull; Your Organization Name</h4>
            </div>
        </div>

        <div data-role="page" id="page4">
            <div data-role="header">
                <h1>About Us</h1>
            </div>
            <div data-role="content">   
                <p>Nunc auctor bibendum eros. Maecenas porta accumsan mauris. Etiam enim enim, elementum sed, bibendum quis, rhoncus non, metus. Fusce neque dolor, adipiscing sed, consectetuer et, lacinia sit amet, quam. Suspendisse wisi quam, consectetuer in, blandit sed, suscipit eu, eros. Etiam ligula enim, tempor ut, blandit nec, mollis eu, lectus. Nam cursus. Vivamus iaculis. Aenean risus purus, pharetra in, blandit quis, gravida a, turpis. Donec nisl. Aenean eget mi. Fusce mattis est id diam. Phasellus faucibus interdum sapien. Duis quis nunc. Sed enim.</p>
            </div>
            <div data-role="footer">
                <h4>&copy;2011 &bull; Your Organization Name</h4>
            </div>
        </div>          

        <div data-role="page" id="page5">
            <div data-role="header">
                <h1>This is fifth page</h1>
            </div>
            <div data-role="content">   
                <p>This is fifth page</p>
            </div>
            <div data-role="footer">
                <h4>&copy;2011 &bull; Your Organization Name</h4>
            </div>
        </div>          
    </body>
</html> 
```

# php - 如果记录存在于另一个模型中，Cakephp 在 findAll 上返回 true

> ID：14367725
> 
> 赞同：0
> 
> 时间：2013-01-16T20:58:51.540
> 
> 标签：php, api, rest, cakephp

我目前正在使用 CakePHP 为事件构建一个 REST api。现在我有一个事件表和一个包含 event_id 和 user_id 列的 event_attendees 表。目前，当我响应用户请求发回所有事件的列表时，每个事件都有其详细信息的字段，并且通过与用户模型链接的模型，所有参加它的用户的列表。但是，我希望每个活动也有“参加”字段，该字段指示当前用户是否正在参加活动（这显然可以通过查看 event_attendees 表来确定）。因此，每当我在 Event 模型上调用 findAll() 时，我都希望每个事件也具有“参加”字段。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:07:51.610

如果您想远离全局变量，最好的办法是检索当前用户的事件列表和事件列表。两个循环，您将突出显示用户正在参加的事件列表。

例子：

```
# In the user model
class User extends AppModel {
    var $hasAndBelongsToMany = array('Event' => array('class' => 'Event'));
}

# In the controller
$allEvents = $this->Events->find('all');
$userAndEvents = $this->User->findForId($userId); 
```

这假设您的用户和事件之间存在多对多关系。换句话说，一个用户可以参加许多活动，而一个活动可以由许多用户参加。

# c++ - 通用重试机制 - 无法使用 C++11 功能

> ID：14367726
> 
> 赞同：2
> 
> 时间：2013-01-16T20:58:53.200
> 
> 标签：c++, function-pointers

我有一个实现重试机制的宏，如下所示：

```
#define RETRY(function_name, param_list, max_attempts, retry_interval_usecs, error_var) \
    do {                                                                                                   \
        int _attempt_;                                                                                     \        
                                                                                               \
        for (_attempt_ = 0; _attempt_ < max_attempts; _attempt_++)                                         \
        {                                                                                                  \
            error_var = function_name param_list;                                                          \
            if (error_var == SUCCESS)                                                         \
            {                                                                                              \
                break;                                                                                     \
            }                                                                                              \
                                                                                                           \
            usleep(retry_interval_usecs);                                                                  \
        }                                                                                                                                                                                                                                                                                                   \
    } while (0) 
```

这是功能性的，但我一直听说在 C++ 应用程序中`defines`是不利的。

现在我研究了一个以函数指针作为参数的重试函数。但我似乎错过了一些东西，因为我无法编译这段代码。

注意：下面的这段代码是非功能性的，我想我可以发布一个简单的代码来说明我想要做什么：

```
void retry(int (*pt2Func)(void* args))
{
    const int numOfRetries = 3;
    int i = 1;
    do
    {
        //Invoke the function that was passed as argument
        if((*pt2Func)(args)) //COMPILER: 'args' was not declared in this scope
        {
          //Invocation is successful
          cout << "\t try number#" << i <<" Successful \n";
          break;
        }

        //Invocation is Not successful
        cout << "\t try number#" << i <<" Not Successful \n";
        ++i;

        if (i == 4)
        {
          cout<< "\t failed invocation!";
        }

    }while (i <= numOfRetries);
}

int Permit(int i)
{
    //Permit succeeds the second retry
    static int x = 0;
    x++;
    if (x == 2 && i ==1 ) return 1;
    else return 0;
}

int main()
{
    int i = 1;
    int * args = &i;

    retry(&Permit(args));
} 
```

所以基本上我的问题是：

*   如何将具有不同参数（类型和数量）的通用函数传递给重试方法？没有将函数封装在一个类中？

那可行吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:52:58.397

所有现有的答案都是 C++11，所以这里对你的代码做一个小的修改，使它可以使用 boost（它是 C++03）工作

```
//takes any function or function like object
//expected function takes no parameters and returns a bool
template<class function_type>
void retry(function_type function, int numOfRetries = 3)
{
    int i = 1;
    do
    {
        //Invoke the function that was passed as argument
        if(function())
            blah blah blah 
```

主要是

```
int main()
{
    int i = 1;
    //bind takes a function and some parameters
    //and returns a function-like object with a different parameter set
    //in this case, the function Permit, and the first thing it gets passed is i
    //this means the resulting function-like object doesn't need any parameters
    //return type is the same as the original function
    retry(boost::bind(Permit, i));
} 
```

[C++03编译和执行的证明](http://ideone.com/tZN87N)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:01:53.993

以下解决方案使用了 C++11 功能 - 无法使用 C++11 的补充是在解决方案开发开始后完成的。

一种 C++ 方法是使用[`std::function`](http://en.cppreference.com/w/cpp/utility/functional/function).

以下代码给出了函数、“可调用”类和 lambda 表达式的示例。

```
#include <string>
#include <iostream>
#include <functional>
#include <unistd.h>

// Minimalistic retry 
bool retry( std::function<bool()> func, size_t max_attempts, 
    unsigned long retry_interval_usecs ) {
  for( size_t attempt { 0 }; attempt < max_attempts; ++attempt ) {
    if( func() ) { return true; }
    usleep( retry_interval_usecs );
  }
  return false;
}

// Ex1: function
int f(std::string const u) {
  std::cout << "f()" << std::endl;
  return false;
}

// Ex2: 'callable' class
struct A {

  bool operator() (std::string const & u, int z) {
    ++m_cnt;
    std::cout << "A::op() " << u << ", " << z << std::endl;

    if( m_cnt > 3 ) {
      return true;
    }
    return false;
  }

  int m_cnt { 0 };
};

int main() {

  A a;

  bool const r1 = retry( std::bind(f, "stringparam1"), 3, 100 );
  bool const r2 = retry( std::bind(a, "stringparam2", 77), 5, 300 );
  // Ex 3: lambda
  bool const r3 = retry( []() -> bool
    { std::cout << "lambda()" << std::endl; return false; }, 5, 1000 );

  std::cout << "Results: " << r1 << ", " << r2 << ", " << r3 << std::endl;

  return 0;
} 
```

使用 gcc 4.7.2 对此进行了测试。输出：

```
f()
f()
f()
A::op() stringparam2, 77
A::op() stringparam2, 77
A::op() stringparam2, 77
A::op() stringparam2, 77
lambda()
lambda()
lambda()
lambda()
lambda()
Results: 0, 1, 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:08:49.250

有两种方法。

使用可变参数模板函数：

```
// All in header file:
template <typename F, typename... Args>
void retry1(F func, Args&& ... args) {
    //...
    if (func(std::forward<Args>(args)...))
    ; //...
}

// Call like:
retry1(Permit, i); 
```

或使用 a`std::function`和 lambda：

```
// In header file
void retry2(std::function<bool()> func);

// In a source file
void retry2(std::function<bool()> func) {
    //...
    if (func())
    ; //...
}

// Call like:
retry2([]() -> bool { return Permit(i); }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:05:19.680

好吧，如果您使用的是 C++11，那么您就有[Lambda 表达式](http://msdn.microsoft.com/en-us/library/dd293608.aspx)。

还有这个问题：[编写一个接受 lambda 表达式作为参数的函数](https://stackoverflow.com/questions/3203305/write-a-function-that-accepts-a-lambda-expression-as-argument)，提供另一个相关示例。

看到你不能使用 C++11 后编辑

在这种情况下，我只会保留宏并忘记它。虽然有些人可能不喜欢它，但您有充分的理由使用它 - 它比其他解决方案更容易且更有意义。只需将其写在宏上方的评论中，这样 5 年后，当人们试图弄清楚为什么您决定不使用`std:forward`或 lambda 表达式时，他们就会知道。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-03T06:49:41.913

FWIW，我正在尝试修复您的初始示例。（可能还有其他缺点，没有人会走这条路，因为有更好的解决方案）

您对重试的初始定义可以写成：

```
void retry(int (*pt2Func)(void* args), void* args) 
```

它获取一个函数指针（指向返回的函数和 int 以及一个 void* 参数）和一个附加 (void*) 参数。

现在的`Permit`功能是：

```
int Permit(void* pvi) 
```

主函数现在调用 retry/Permit 如下：

```
 retry(&Permit, static_cast<void*>(args)); 
```

* * *

完整示例

```
#include <iostream>
using std::cout;

void retry(int (*pt2Func)(void* args), void* args)
{
    const int numOfRetries = 3;
    int i = 1;
    do
    {
        //Invoke the function that was passed as argument
        if((*pt2Func)(args)) //not changed: args is now declared
        {
          //Invocation is successful
          cout << "\t try number#" << i <<" Successful \n";
          break;
        }

        //Invocation is Not successful
        cout << "\t try number#" << i <<" Not Successful \n";
        ++i;

        if (i == 4)
        {
          cout<< "\t failed invocation!";
        }

    }while (i <= numOfRetries);
}

int Permit(void* pvi)
{
    //Permit succeeds the second retry
    int i = *(static_cast<int*>(pvi));
    static int x = 0;
    x++;
    if (x == 2 && i ==1 ) return 1;
    else return 0;
}

int main()
{
    int i = 1;
    int * args = &i;

    retry(&Permit, static_cast<void*>(args));
} 
```

# c - strchr 实现是如何工作的

> ID：14367727
> 
> 赞同：20
> 
> 时间：2013-01-16T20:59:02.110
> 
> 标签：c, pointers, constants, strchr

我尝试编写自己的 strchr() 方法实现。

现在看起来像这样：

```
char *mystrchr(const char *s, int c) {
    while (*s != (char) c) {
        if (!*s++) {
            return NULL;
        }
    }
    return (char *)s;
} 
```

最后一行原来是

```
return s; 
```

但这不起作用，因为 s 是 const。我发现需要有这个演员表（char *），但老实说我不知道​​我在那里做什么:(有人能解释一下吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-16T21:26:33.837

我相信这实际上是 C 标准对`strchr()`函数的定义中的一个缺陷。（我很高兴被证明是错误的。）（回复评论，它是否真的是一个缺陷是有争议的；恕我直言，它仍然是糟糕的设计。它*可以*安全使用，但不安全地使用它太容易了。）

以下是 C 标准所说的：

```
char *strchr(const char *s, int c); 
```

> strchr函数在**s**指向的字符串中**定位**第一次出现的**c** （转换为**char** ） 。终止空字符被认为是字符串的一部分。

 **这意味着这个程序：

```
#include <stdio.h>
#include <string.h>

int main(void) {
    const char *s = "hello";
    char *p = strchr(s, 'l');
    *p = 'L';
    return 0;
} 
```

即使它仔细地将指向字符串文字的指针定义为指向 的指针，也具有未定义的行为，因为它修改了字符串文字。至少 gcc 不会对此发出警告，并且程序会因分段错误而死亡。**`const`** `char`

问题是`strchr()`接受一个`const char*`参数，这意味着它承诺不修改`s`指向的数据——但它返回一个 plain `char*`，它允许调用者修改相同的数据。

这是另一个例子；~~它没有未定义的行为，但~~它在没有任何强制转换的情况下悄悄地修改了一个`const`合格的对象（进一步思考，我相信它具有未定义的行为）：

```
#include <stdio.h>
#include <string.h>

int main(void) {
    const char s[] = "hello";
    char *p = strchr(s, 'l');
    *p = 'L';
    printf("s = \"%s\"\n", s);
    return 0;
} 
```

我认为，这意味着（回答您的问题）C 实现`strchr()`必须将其结果转换`const char*`为`char*`，或做一些等效的事情。

这就是为什么 C++ 在它对 C 标准库所做的少数更改之一中，`strchr()`用两个同名的重载函数替换：

```
const char * strchr ( const char * str, int character );
      char * strchr (       char * str, int character ); 
```

当然C不能这样做。

另一种方法是`strchr`用两个函数替换，一个接受 a`const char*`并返回 a `const char*`，另一个接受 a`char*`并返回 a `char*`。与 C++ 不同，这两个函数必须有不同的名称，也许`strchr`和`strcchr`.

（从历史上看，在已经定义`const`之后被添加到 C中。这可能是在不破坏现有代码的情况下保持不变的唯一方法。）`strchr()``strchr()`

`strchr()`不是唯一存在此问题的 C 标准库函数。受影响的功能列表（我*认为*这个列表是完整的，但我不保证）是：

```
void *memchr(const void *s, int c, size_t n);
char *strchr(const char *s, int c);
char *strpbrk(const char *s1, const char *s2);
char *strrchr(const char *s, int c);
char *strstr(const char *s1, const char *s2); 
```

（全部在 中声明`<string.h>`）和：

```
void *bsearch(const void *key, const void *base,
    size_t nmemb, size_t size,
    int (*compar)(const void *, const void *)); 
```

（在 中声明`<stdlib.h>`）。所有这些函数都采用指向`const`数组初始元素的数据的指针，并返回`const`指向该数组元素的非指针。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-17T01:03:45.187

从非修改函数返回指向 const 数据的非 const 指针的做法实际上是C 语言中相当广泛使用的*习语。*它并不总是很漂亮，但它已经相当成熟了。

这里的原理很简单：`strchr`它本身就是一个非修改操作。然而，我们需要`strchr`常量字符串和非常量字符串的功能，这也会将输入的常量传播到输出的常量。C 和 C++ 都没有为这个概念提供任何优雅的支持，这意味着在这两种语言中，您必须编写*两个*几乎相同的函数，以避免在 const 正确性方面承担任何风险。

在 C++ 中，您可以通过声明两个具有相同名称的函数来使用函数重载

```
const char *strchr(const char *s, int c);
char *strchr(char *s, int c); 
```

在 C 语言中，您没有函数重载，因此为了在这种情况下完全执行 const 正确性，您必须提供两个具有*不同*名称的函数，例如

```
const char *strchr_c(const char *s, int c);
char *strchr(char *s, int c); 
```

尽管在某些情况下这可能是正确的做法，但通常（并且正确地）认为它过于繁琐并且涉及 C 标准。您可以通过仅实现一个功能以更紧凑（尽管风险更大）的方式解决这种情况

```
char *strchr(const char *s, int c); 
```

它将非常量指针返回到输入字符串中（通过在出口处使用强制转换，就像您所做的那样）。请注意，这种方法不违反语言的任何规则，尽管它为*调用者*提供了违反它们的方法。通过抛弃数据的常量性，这种方法只是将观察常量正确性的责任从函数本身委托给调用者。只要调用者知道发生了什么并记得“玩得好”，即使用 const 限定指针指向 const 数据，由此类函数创建的 const 正确性墙中的任何临时漏洞都会立即修复。

我认为这个技巧是一种完全可以接受的方法，可以减少不必要的代码重复（尤其是在没有函数重载的情况下）。标准库使用它。假设您了解自己在做什么，您也没有理由避免它。

现在，至于您对 的实现`strchr`，从风格的角度来看，这对我来说看起来很奇怪。我会使用循环头来迭代我们正在操作的整个范围（完整的字符串），并使用内部`if`来捕获提前终止条件

```
for (; *s != '\0'; ++s)
  if (*s == c)
    return (char *) s;

return NULL; 
```

但这样的事情总是个人喜好问题。有人可能更愿意

```
for (; *s != '\0' && *s != c; ++s)
  ;

return *s == c ? (char *) s : NULL; 
```

有人可能会说在函数`s`内部修改函数参数 ( ) 是一种不好的做法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:04:10.913

`const`关键字表示不能修改参数。

你不能`s`直接返回，因为`s`被声明为`const char *s`并且函数的返回类型是`char *`. 如果编译器允许您这样做，则可以覆盖该`const`限制。

添加显式强制转换以`char*`告诉编译器您知道自己在做什么（尽管正如 Eric 解释的那样，如果您不这样做会更好）。

更新：为了上下文，我引用了埃里克的回答，因为他似乎已经删除了它：

> 您不应该修改 s，因为它是一个 const char *。
> 
> 相反，定义一个表示 char * 类型结果的局部变量，并在方法主体中使用它代替 s。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:15:01.160

**函数返回值应该是一个指向字符的常量指针：**

`strchr`接受 a`const char*`并且也应该返回`const char*`。您正在返回一个具有潜在危险的非常量，因为返回值指向输入字符数组（调用者可能希望常量参数保持不变，但如果它的任何部分作为`char *`指针返回，则它是可修改的）。

**如果未找到匹配的字符，则函数返回值应为 NULL：**

如果找不到寻找的字符，也`strchr`应该返回。`NULL`如果它在找不到字符时返回非 NULL，或者在这种情况下返回 s，调用者（如果他认为行为与 strchr 相同）可能会假设结果中的第一个字符实际上匹配（没有 NULL 返回值无法判断是否匹配）。

（我不确定这是否是你打算做的。）

**这是执行此操作的函数示例：**

我为此功能编写并运行了几个测试；我添加了一些非常明显的完整性检查以避免潜在的崩溃：

```
const char *mystrchr1(const char *s, int c) {
    if (s == NULL) {
        return NULL;
    }
    if ((c > 255) || (c < 0)) {
        return NULL;
    }
    int s_len;
    int i;
    s_len = strlen(s);
    for (i = 0; i < s_len; i++) {
        if ((char) c == s[i]) {
            return (const char*) &s[i];
        }
    }
    return NULL;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-15T09:53:38.293

毫无疑问，每当您编写代码尝试使用 的`char*`结果`mystrchr`来修改*传递*给`mystrchr`.

修改字符串文字是一种安全禁忌，因为它可能导致程序异常终止并可能导致拒绝服务攻击。当您将字符串文字传递给函数 take 时，编译器可能会警告您`char*`，但它们不是必需的。

如何正确使用 strchr？让我们看一个例子。

这是一个不该做什么的例子：

```
#include <stdio.h>
#include <string.h>

/** Truncate a null-terminated string $str starting at the first occurence 
 *  of a character $c. Return the string after truncating it.
 */
const char* trunc(const char* str, char c){
  char* pc = strchr(str, c);
  if(pc && *pc && *(pc+1)) *(pc+1)=0;
  return str;
} 
```

看看它如何`str`通过指针修改字符串文字`pc`？那不是bueno。

这是正确的方法：

```
#include <stdio.h>
#include <string.h>

/** Truncate a null-terminated string $str of $sz bytes starting at the first 
 *  occurrence of a character $c. Write the truncated string to the output buffer 
 *  $out.
 */
char* trunc(size_t sz, const char* str, char c, char* out){
  char* c_pos = strchr(str, c);
  if(c_pos){
    ptrdiff_t c_idx = c_pos - str;
    if((size_t)n < sz){
      memcpy(out, str, c_idx); // copy out all chars before c
      out[c_idx]=0; // terminate with null byte
    }
  }
   return 0; // strchr couldn't find c, or had serious problems
} 
```

**看看如何使用返回的指针`strchr`来计算字符串中匹配字符的索引？然后使用索引（也等于到该点的长度减去一）将字符串的所需部分复制到输出缓冲区。**

你可能会想“哦，这太愚蠢了！我不想使用 strchr，如果它只会让我成为 memcpy。” 如果这就是您的感受，那么我从来没有遇到过使用 while 循环和 ,`strchr`等`strrchr`无法摆脱的用例。有时它实际上比正确使用 strchr 更干净。`isspace``isalnum`**

# sql - SQL Select 使用 Pivot 或 CASE 组合输出表中的行值

> ID：14367732
> 
> 赞同：4
> 
> 时间：2013-01-16T20:59:24.477
> 
> 标签：sql, database, postgresql, pivot, crosstab

我正在使用 PostgreSQL 数据库并有一个如下表：

```
--------------------------------------
| Date  | MetricType  | MetricValue  |
--------------------------------------
| date1 | MetricA     | val          |
--------------------------------------
| date1 | MetricB     | val          |
--------------------------------------
| date1 | MetricC     | val          |
--------------------------------------
| date2 | MetricA     | val          |
--------------------------------------
| date2 | MetricB     | val          |
--------------------------------------
| date2 | MetricC     | val          |
-------------------------------------- 
```

如您所见，每个日期都有一组指标类型，每种类型都有一个值。我想编写一个 Select 语句，将这些数据组合在下面的庄园中

```
------------------------------------------
| Date  | MetricA  | MetricB  | MetricC  | 
------------------------------------------
| date1 | val      | val      | val      |
------------------------------------------
| date2 | val      | val      | val      |
------------------------------------------ 
```

我不确定如何编写此 Select 语句来获得这些结果。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:07:50.390

这种数据转换是一个*枢纽*。如果您的数据库没有数据透视函数，那么您可以使用带有`CASE`表达式的聚合函数：

```
select Date,
  max(case when MetricType = 'MetricA' then MetricValue end) MetricA,
  max(case when MetricType = 'MetricB' then MetricValue end) MetricB,
  max(case when MetricType = 'MetricC' then MetricValue end) MetricC
from yourtable
group by Date 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!1/c0941/1)

结果是：

```
|  DATE | METRICA | METRICB | METRICC |
---------------------------------------
| date1 |     val |     val |     val |
| date2 |     val |     val |     val | 
```

您也可以使用表上的多个连接来执行此操作：

```
select a.date as Date,
 a.MetricValue as MetricA,
 b.MetricValue as MetricB,
 c.MetricValue as MetricC 
from yourtable a
left join yourtable b 
  on a.date = b.date and b.MetricType = 'MetricB'
left join yourtable c 
  on a.date = c.date and c.MetricType = 'MetricC'
where a.MetricType = 'MetricA' 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!1/73c1a/12)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-16T21:03:28.070

见[http://www.artfulsoftware.com/infotree/queries.php#78](http://www.artfulsoftware.com/infotree/queries.php#78)

对于教程，您要查找的内容称为“枢轴” 这也可以使用 CASE 完成，如下所示：http://stackoverflow.com/questions/1241178/mysql-rows-to-columns

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-16T23:33:30.030

实际上，Postgres**确实**具有枢轴功能。安装附加模块[**tablefunc**](https://stackoverflow.com/q/11750755/939860)。
在此相关问题下查找更多详细信息和解释：
[PostgreSQL Crosstab Query](https://stackoverflow.com/questions/3002499/postgresql-crosstab-query)

您的查询可能如下所示。假设指标是数据类型`integer`：

```
SELECT * FROM crosstab(
   'SELECT date, metrictype, metricvalue 
    FROM   tbl
    ORDER  BY 1,2'  -- could also just be "ORDER BY 1" here

   ,$$VALUES ('MetricA'::text), ('MetricB'), ('MetricC')$$)
AS ct ("Section" text, "MetricA" int, "MetricB" int, "MetricC" int); 
```

对于简单的查询[，@Bluefeet 演示的](https://stackoverflow.com/a/14367867/939860)`CASE`语句就可以了。但是对于更长的列列表/更大的表，此查询执行*得*更快并且更短。

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:08:07.163

```
 select a.date as Date,
     a.metric as MetricType ,
b.metric as MetricType ,
     c.metric as MetricType 
    from (select distinct date from yourtable where metric = 'metricA')  a
    join yourtable b on a.date = b.date and b.metric = 'metricB'
    join yourtable c on a.date = c.date and c.metric = 'metricC' 
```*

# c# - 通用存储库和多种 PK 类型

> ID：14367736
> 
> 赞同：3
> 
> 时间：2013-01-16T20:59:33.467
> 
> 标签：c#, .net, linq-to-sql, repository-pattern

我正在尝试使用 Linq To SQL 实现通用存储库。我的问题在于我的一些基础表有`int`ID 和一些`Guid`ID。我该如何解释呢？

```
public T GetById(int id)
{
    return this._context.GetTable<T>().Single(x => x.ID.Equals(id));
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:01:51.283

将另一个通用参数添加到存储库接口。

```
public interface IRepo<TType, PKType>
{
    TType GetById(PKType id);
} 
```

然后实施它。

```
public class CustomerRepo : IRepo<Customer, Guid>
{
    public Customer GetById(Guid id)
    {
        // code to get from repo
    }
} 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2013-01-16T21:02:20.113

好吧，首先 - GetById 没有任何意义，听说过 LINQ 吗？让用户决定。有的话就去。

其次，即使你坚持这一点，仍然有泛型。

GetById (T id)

会走那么远，您可以在泛型上拥有多个类型，但您假设“id”作为名称，这需要一个接口。

事实上，你有更严重的问题，如

> GetTable().Single(x => x.ID.Equals(id));

在这种情况下可能会在编译器中爆炸，没有限制要求 T 具有 id 字段。因此，您不能在通用方法中使用它。

就是这样 - 正如我在开始时所说，通过剥夺用户语言（linq）的重要部分的力量，您基本上是在创建通用坏存储库的另一个反模式实现。

# python - Python 和 Apache Pig：通过文件传递参数/参数？

> ID：14367742
> 
> 赞同：1
> 
> 时间：2013-01-16T20:59:58.713
> 
> 标签：python, parameters, hadoop, arguments, apache-pig

引用：[Apache Pig 参数替换](http://wiki.apache.org/pig/ParameterSubstitution "磷")

这是一个双重问题。我有一个 Python 脚本，我将参数传递给该脚本，该脚本又使用传递的参数运行 Pig 脚本。

Apache Pig 0.8.1 不支持命令行参数中的空格（将来我的公司可能会更新到支持它的 0.9.x）。但是，**Pig 0.8.1 参数文件 ( `param_file`) 是否支持空白？**

我的最终目标是创建一个包含默认变量的 Python 文件。有没有更好的方法：**我应该通过读取 Python 参数文件`eval()`吗？**到目前为止，我还没有遇到任何更好的解决方案。如果我选择这样做，我可以将此文件用作一组 Pig 参数，因为两者都使用相似的语法标准。或者，我会将参数写入一个文件，然后运行 ​​Pig 脚本。

# google-api - google places api 是否返回最新的五个或最旧的五个或随机五个评论？

> ID：14367748
> 
> 赞同：1
> 
> 时间：2013-01-16T21:00:26.350
> 
> 标签：google-api, google-places-api, google-places

我正在使用谷歌地方 api。我想在 google 地方查看商家的所有评论。但是文档说它只返回五个评论的数组。

现在，我想知道有没有办法获得所有评论？google places api 是否返回最新的五个或最旧的五个或随机五个评论？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T16:11:36.683

当我上次使用 Places API（6 个月前）时，它只会返回 5 条“最有帮助”的评论。我在文档和措辞中找不到建议将其更改为最新评论。

[https://developers.google.com/places/documentation/details#PlaceDetailsResults](https://developers.google.com/places/documentation/details#PlaceDetailsResults)

更新：目前用户正在通过 Google Places API 功能请求更改排序顺序，从“最有帮助”更改为最新 - [http://code.google.com/p/gmaps-api-issues/issues/detail ?id=4258&q=apitype%3APlacesAPI%20type%3AEnhancement%20reviews&sort=-stars&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Internal%20Stars](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4258&q=apitype%3APlacesAPI%20type%3AEnhancement%20reviews&sort=-stars&colspec=ID%20Type%20Status%20Introduced%20Fixed%20Summary%20Internal%20Stars)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T17:46:32.437

Google Places API 总是返回 5 条最新评论。没有其他方法可以获取超过五条评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-25T07:54:44.090

目前没有提供返回超过前 5 条评论的 Places API。如果您想请求此功能，您可以提交 Places API -[功能请求。](https://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)

# javascript - 以html形式选择标签

> ID：14367749
> 
> 赞同：4
> 
> 时间：2013-01-16T21:00:28.767
> 
> 标签：javascript, html, forms, knockout.js

我想`<form>`从客户端发送，其中一个字段`<form>`是`<select>`.
我正在使用淘汰赛数据绑定。

```
<form method="get" action="http://google.com/" target="_blank">
    <input data-bind="text: name" name="meow">
    <select name="dog" data-bind="options: objects, 
                                  optionsText: function(item){return item.secid},
                                  optionsValue : $data.id">
    </select>
    <input type='submit'>
</form> 
```

但是来自 select 的值在请求中始终为空。有任何想法吗？
[JSFiddle](http://jsfiddle.net/x5Y4G/)在这里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:05:40.623

替换`$data.id`为`function(item){return item.id}`

# android - 在 Android 平板电脑中未检测到方向更改

> ID：14367753
> 
> 赞同：0
> 
> 时间：2013-01-16T21:00:46.847
> 
> 标签：android, cordova, jquery-mobile

我目前在我的应用程序底部有这个代码（我已经尝试过其他各种代码）来检测方向变化：

```
function orientation_changed (){
    if ( is_portrait() )
    {
        alert('ABC');
    }
    else if ( is_landscape() )
    {
        alert('234');
    }
    clearTimeout(window.t);
    delete window.t;
}

window.t = undefined;
window.onorientationchange = function (event)
{
    window.t = setTimeout('orientation_changed();', 250);
}

function is_landscape()
{
    var uagent = navigator.userAgent.toLowerCase();
    if ( uagent.search('ipad') > -1 )
    {
        var r = ( window.orientation == 90 || window.orientation == -90 );
    }
    else
    {
        var r = ( screen.width > screen.height );
    }
    return r;
}

function is_portrait()
{
    var uagent = navigator.userAgent.toLowerCase();
    if ( uagent.search('ipad') > -1 )
    {
        var r = ( window.orientation == 0 || window.orientation == 180 );
    }
    else
    {
        var r = ( screen.width < screen.height );
    }
    return r;
} 
```

但它永远不会着火。我尝试了其他方法来改变平板电脑的方向，但似乎都没有。我的清单如下所示：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android" android:windowSoftInputMode="adjustPan"
      package="com.pp.editable" android:versionName="1.1" android:versionCode="5" android:hardwareAccelerated="true">
    <supports-screens
        android:largeScreens="true"
        android:normalScreens="true"
        android:smallScreens="true"
        android:xlargeScreens="true"
        android:resizeable="true"
        android:anyDensity="true"
        />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.VIBRATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.RECORD_VIDEO"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />   
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />   
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.BROADCAST_STICKY" />

    <application android:icon="@drawable/icon" android:label="@string/app_name"
        android:hardwareAccelerated="true"
        android:debuggable="true">
        <activity android:name="editabledelights" android:label="@string/app_name"
                android:theme="@android:style/Theme.Black.NoTitleBar"
                android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-sdk android:minSdkVersion="7" android:targetSdkVersion="17"/>
</manifest> 
```

我正在使用联想 IdeaPad。我正在使用 JQuery mobile 和 Cordova 2.3.0。难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:06:51.553

这是因为您添加了“sceenSize”属性，只需将其删除

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T14:11:28.050

我觉得很笨。在联想上，它仅在系统设置中设置为纵向：P。必须启用方向切换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:53:57.050

您可能忘记添加事件侦听器来检测方向变化。

```
// attach the onOrientationChange event listener in your script tag
window.addEventListener( 'onorientationchange', OnOrientationChange, false ); 
```

希望有帮助。

# mysql - 适用于 where group-by plus plus order-by 的索引

> ID：14367755
> 
> 赞同：4
> 
> 时间：2013-01-16T21:00:50.910
> 
> 标签：mysql, indexing, group-by, sql-order-by

我有使用 order-by group-by 的查询

```
选择计数（*），归档2
从 table1 where field1>x group by filed2 order by count(*) desc

```

此查询的最佳索引是什么。
我应该单独索引filed1，field2还是一起索引？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T21:15:41.123

您应该以两种不同的顺序创建包含两列的索引

```
ALTER TABLE table1 ADD INDEX field1_field2_ndx (field1,field2);
ALTER TABLE table1 ADD INDEX field2_field1_ndx (field2,field1); 
```

*您不应创建单独*的索引，因为使用两列创建索引将导致查询仅通过索引来满足查询。它永远不需要碰桌子。

即使您创建了单独的索引，查询优化器也会选择两列索引。

现在您有了两个索引，只需相信查询优化器会选择正确的索引。根据查询，EXPLAIN 计划将选择`field2_field1_ndx`索引。

# ruby-on-rails - 在一组电子邮件地址中搜索任意两个地址之间的相似性

> ID：14367764
> 
> 赞同：1
> 
> 时间：2013-01-16T21:01:38.533
> 
> 标签：ruby-on-rails, algorithm, mongodb, mongoid

我正在寻找一种方法来搜索数据库并找到电子邮件地址之间的相似之处。我唯一能想到的解决方案是 O(N^2)，并且涉及一个嵌套循环。基本上抓住一个电子邮件地址，然后一遍又一遍地检查其余地址。这将非常消耗，因为我正在处理数据库中的 100,000 个电子邮件地址。如果有什么不同，这将作为 Ruby on Rails 应用程序的后台作业来实现。

有没有办法做到这一点？

我真的只是在寻找基本的相似之处。一个例子是

```
docjohnson@gmail.com
docjohnson1@gmail.com
docjohnson333@gmail.com
docjohnson@hotmail.com 
```

我希望那些都标记为彼此相似。

谢谢您的帮助！

编辑：我正在使用通过 Mongoid 连接到 ROR 的 Mongo 数据库，如果这完全改变了游戏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:20:15.503

计算每个电子邮件地址的“签名”；例如，签名可能是地址的用户名部分的前五个字符。对所有电子邮件地址进行排序，以将具有相同签名的电子邮件地址放在一起；如果你的签名算法做得很好，那么每组签名应该指的是同一个人。您必须根据您的数据和您对相似性的定义来调整签名算法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:24:01.877

我建议您从“规范化”电子邮件开始：

1.  从用户名部分去除尾随数字，例如`john123`-> `john`。

2.  可能会从用户名中删除一些标点符号，例如`john.smith`-> `johnsmith`。

3.  从域部分中删除一些主机，例如`mail.foo.com`-> `foo.com`；但不是`math.mit.edu`-> `mit.edu`。

在执行 1 和 2 之后，您应该将原始电子邮件收集到将规范用户名映射到原始用户名的哈希表中，这样当您完成后，您只需要遍历规范用户名。

# ruby-on-rails - 无法部署 Heroku

> ID：14367766
> 
> 赞同：0
> 
> 时间：2013-01-16T21:01:47.253
> 
> 标签：ruby-on-rails, heroku

为了尝试推动 Heroku，我参考了几个不同的来源。

我得到的错误代码是：

```
An error occurred while installing sqlite3 (1.3.7), and Bundler cannot continue.
   Make sure that `gem install sqlite3 -v '1.3.7'` succeeds before bundling.

  Failed to install gems via Bundler.

  Heroku push rejected, failed to compile Ruby/rails app 
```

我已经尝试了几种 Gemfile 配置，但这是我目前拥有的：

```
group :production, :staging do
  gem "pg"
end

group :development, :test do
  gem "sqlite3-ruby", "~> 1.3.0", :require => "sqlite3"
end 
```

之后我也尝试了不同的捆绑包..捆绑，捆绑安装，捆绑安装--无需开发

我不断收到同样的错误。

请帮忙

谢谢

ps：请注意，我是新手。所以请尽可能具体。

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T22:03:39.957

尝试（在 fedora 上）或等效的，然后单独安装此 gem 或重新启动捆绑包。

```
yum install sqlite-devel 
```

# regex - 正则表达式字符串转换/提取

> ID：14367770
> 
> 赞同：0
> 
> 时间：2013-01-16T21:01:55.163
> 
> 标签：regex, string

代码：

```
https://aaa.bbb.net/ccc/211099_589944494365122_1446403980_n.jpg 
```

如何`589944494365122`使用正则表达式摆脱该字符串？

到目前为止我能做的最好的事情`_(.*)`就是`589944494365122_1446403980_n.jpg`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:07:27.693

首先，您应该概括您的问题描述，如下所示：如何在第一个字符串之后获得最长的非空数字子`_`字符串？您真正要求的正则表达式是`(589944494365122)`，但这不是您所期望的。

根据我对你想要什么的猜测，答案可能是`_(\d+)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:19:17.747

这行得通；

```
var s = "https://aaa.bbb.net/ccc/211099_589944494365122_1446403980_n.jpg";
var m = /_([^_]*)/.exec(s);
console.log( m[1] ); // 589944494365122 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T00:58:07.020

我可以在您的输入中看到的提取规则是：

```
211099_589944494365122_1446403980
[0-9]+_ part we want  _[0-9]+ 
```

因此，具有后视和前瞻的正则表达式将有所帮助：

```
'(?<=\d_)\d+(?=_\d)' 
```

用 grep 测试：

```
kent$  echo " https://aaa.bbb.net/ccc/211099_589944494365122_1446403980_n.jpg"|grep -Po '(?<=\d_)\d+(?=_\d)'
589944494365122 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T21:05:37.010

我会选择`\d+_(\d+)_\d+_n\.jpg`，但根据 URL 的确切规范，这可能需要一些调整。

同样取决于语言，这可能需要稍作改动。我建议的解决方案例如可以在 Ruby 中工作（以及许多其他正则表达式实现）。这里`\d`匹配任何数字，`\d+`表示一个或多个数字。我假设之前的字母`.jpg`总是`n`，但您可以通过替换`n`为`.`（任何字符）或替换为`\w`（任何单词字符）来更改它。

# c# - 何时担心 SQL 注入保护

> ID：14367771
> 
> 赞同：6
> 
> 时间：2013-01-16T21:01:59.177
> 
> 标签：c#, sql

小背景：我是这家公司唯一的程序员。我正在使用预先存在的框架。

也就是说，该公司有一个 dll(Database.dll)，其中包含“我需要的所有数据库交互”。例如，它有一个`Query()`, `Update()`,`Insert()`等。现在，我正在编写的项目设置了对 Database.dll 的引用。我的项目接受零用户输入。最接近用户输入的是一个下拉框，用户可以从中选择一个日期。没有太多经验，我很好奇我是否还需要担心 SQL 注入？如果是这样，查询会写成

```
var query = string.Format("SELECT timestamp FROM table1 WHERE date = \"{0}\" 
                           AND measured_dist = bit_loc AND rop > 0" , Date)) 
```

作为参数化查询就足够了吗？`Query()`请记住，所有查询执行都由我被告知必须使用且无法编辑 的预先存在的查询执行处理。

**编辑**

这个程序是一个 WinForm 应用程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:08:00.530

如评论中所述，答案是“总是”。因为向其中添加参数并正确执行它会*很容易*，而不是串联：只需第一次就正确执行。另外：您是否认为注入不是您显示的代码中唯一的问题？该代码也容易受到本地化/国际化的影响。对于在不同文化中配置 PC 的用户会发生什么？日期和数字会以不同的方式呈现 - 并且经常会中断。参数不会发生这种情况。另外：名称中通常有撇号:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T21:05:51.770

请扩展@KirkWoll 的非常有效的评论，任何时候您将任何用户输入（或自动来源的输入）合并到 SQL 语句中，您的程序就会面临 SQL 注入的风险。

作为一个政策问题，您永远不应该使用任何此类输入构建您自己的 SQL 语句。

始终清理输入并始终使用参数化查询作为抵御 SQL 注入的第一道防线。

如果你以前没见过，xkcd 上有一个很棒的插图

[http://xkcd.com/327/](http://xkcd.com/327/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-16T21:20:15.467

鉴于这是一个 WinForms 程序，访问数据库的唯一安全方法是使用带参数的存储过程。然后创建一个**只能**访问这些 SP 的用户。其他任何东西都不安全。

虽然带有参数的查询在与可能具有“攻击”输入的 Web 应用程序一起使用时可作为一种安全措施，但在与可以反汇编并重写为任何内容的本地应用程序一起使用时它们会失败。如果您不提供 SP 安全性，您将迷失方向。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-16T21:07:16.230

即使用户交互可能是下拉菜单，老练的攻击者也有可能插入不在选择列表中的值。所以是的，你仍然应该警惕 SQL 注入。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-16T21:15:32.947

即使没有 SQL 注入之类的东西，我也会使用准备好的语句。它们只是更容易使用，在某些情况下，它们允许数据库缓存语句，下次使用时不必编译它。Oracle 会这样做，我认为 SQL Server 会这样做，我不知道 MySQL 是否会这样做。

您应该始终假设存在黑客，即使在内部 Intranet 项目中，我使用准备好的语句并使用随机数来防止 CSRF。

# excel - Excel 数据验证 - 正则表达式？

> ID：14367774
> 
> 赞同：9
> 
> 时间：2013-01-16T21:02:07.123
> 
> 标签：excel, validation

我在 Excel 2007 电子表格中有一个列，我希望将数据限制为值“COM [1-4] 或 1-65535”。如何让 Excel 强制执行这组值？

泰，弗雷德

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T21:22:10.427

不是很灵活，但你可以使用 Custom `Data Validation`，这个公式：

```
=OR(AND(LEN(A2)=4,LEFT(A2,3)="COM",MID(A2,4,1)>="1",MID(A2,4,1)<="4"),OR(AND(A2>=1,A2<=65535))) 
```

我认为这可以将其范围缩小到您在评论中指定的范围。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T21:06:58.467

您将需要创建一个支持正则表达式的自定义 VBA 函数（或宏）。我亲自做过，所以我知道这是可能的:-)

如果这是一次性问题，可以通过使用复杂的`FIND()`/ `MID()`/`SUBSTITUTE()`等来解决（实际上这是我的日常工作），但我不建议这样做，除非你想盯着可能的 5 行单元格充满Excel功能。

**编辑：**如果您有或需要提供更多信息，我会更新此信息。

**编辑：**这是在 Excel 中使用正则表达式作为函数的方法：

```
Function REFIND(strValue As String, strPattern As String, Optional blnCase As Boolean = True) As Boolean

    Dim objRegEx As Object
    Dim blnValue As Boolean

    ' Create regular expression.
    Set objRegEx = CreateObject("VBScript.RegExp")
    objRegEx.Pattern = strPattern
    objRegEx.IgnoreCase = blnCase

    ' Do the search test.
    blnValue = objRegEx.Test(strValue)

    REFIND = blnValue End Function
End Function 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-16T21:30:40.160

在功能区 >> 数据 >> 数据验证中使用以下内容。然后 Allow = Custom 并在公式中添加以下内容：

```
=OR(AND(E5 >= 1, E5 <= 65535), E5 = "COM1", E5 = "COM2", E5 = "COM3", E5 = "COM4") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-01-25T00:26:33.063

对于这个特定问题，使用标准数据验证无需 VBA、Regex 或公式即可工作：

允许：列出源：“COM1,COM2,COM3,COM4,​​1-65535”

这还在单元格中提供了一个下拉列表以帮助用户。

# android - 如何明确地将项目添加到操作栏中的溢出菜单

> ID：14367777
> 
> 赞同：0
> 
> 时间：2013-01-16T21:02:19.920
> 
> 标签：android, menu, action

我想知道是否可以将项目直接放在操作栏上的溢出菜单中。我正在为我的应用程序使用 ActionbarSherlock（如果这是相关的）。我有几个菜单项，例如：添加、删除、排序、关于应用程序等。这些都是我的操作栏菜单的项目。我只想将“添加”留在外面，其余的放在溢出菜单中。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:06:24.187

> 我想知道是否可以将项目直接放在操作栏上的溢出菜单中。

是的，将属性设置[`showAsAction`](http://developer.android.com/guide/topics/resources/menu-resource.html)为`"never"`：

```
<item android:id="@+id/item"
      android:title="@string/item"
      android:showAsAction="never"/> 
```

# asp.net-mvc - 在 ASP MVC 视图中的 foreach 循环中创建条件

> ID：14367783
> 
> 赞同：0
> 
> 时间：2013-01-16T21:02:59.407
> 
> 标签：asp.net-mvc, foreach

是否有在视图页面中使用的“foreach”循环中创建条件的语法？

```
@foreach (var item in Model.Where(item.Status != "C") {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.TableName)
    </td>
    .
    .
    . 
```

这个 foreach 的语法不正确，有人知道它应该是什么吗？（表格的其余部分被截断）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:08:30.523

```
@foreach (var item in Model.Items.Where(i => i.Status != "C") {
<tr>
    <td>
        @Html.DisplayFor(modelItem => item.TableName)
    </td> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:14:25.047

您在 foreach 行的末尾缺少一个括号：

```
@foreach (var item in Model.Where(item.Status != "C")) { 
```

# python - 在向标准输出显示消息时不要干扰用户输入

> ID：14367785
> 
> 赞同：2
> 
> 时间：2013-01-16T21:03:25.987
> 
> 标签：python, stdout, stdin, readline

我刚刚做了一个小聊天 CLI 应用程序，它实际上工作得很好！

不幸的是，当一个人输入一条消息并同时接收其他人的消息时，两者都是交错的......这会变得非常糟糕：

```
elton: Hey!
john: how are you doing?
fine anjohn: still not to bed?!
d john: haha
you?elton: fine and you? 
```

我正在寻找一种方法来避免这种问题。例如“保留”最后一行供用户输入或在接收到数据时处理一些动作以重新计算用户输入的位置。

经过一番研究，我发现我将使用 getch() 逐个检索每个字符。这样我就可以定期检查是否有新消息正在等待显示并处理这种情况。

但是如果我使用 getch() 我必须手动重新定义基本操作（例如退格、左右移动......），一些字符占用超过一个字节。简而言之，它无法使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:13:43.450

做这种事情的常用方法是编写“控制台模式 GUI”而不是纯 CLI。

例如，您可以非常轻松地创建一个非常简单的界面，其中包含一个`ROWS-2`x`COLS`输出窗口、一个`1`x`COLS`分隔线或模式行以及一个`1`x`COLS`输入窗口——如 IRC 客户端、emacs 等中所见。例如：

或者你可以做一个拆分视图，其中一个`ROWS/2`x`COLS`窗口用于其他人/人的聊天，而在该窗口下方的`ROWS/2`x`COLS`窗口用于用户当前和以前的消息，如大多数早期 Unix 聊天程序中所见。

或者像一些现代 IRC 客户端所做的那样，随处可见的窗口会在适当的时候弹出和消失。

Python 具有`curses`内置支持，但在 Windows 上不支持。如果你想要一个跨平台的解决方案，或者一个仅限 Windows 的解决方案，请参阅[python 中跨平台控制台应用程序中的 curses-like library](https://stackoverflow.com/questions/1244897/curses-like-library-for-cross-platform-console-app-in-python)，答案可能就在那里。

这是来自 IRC 客户端 BitchX 的屏幕截图，让您了解无需太多工作即可实现的功能： ![婊子X](../Images/554ae5abb3b9857d5a2ec50c687f8f0c.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:19:36.420

据我所知，您在这里有几个选择。通常只需调用 getch，您就可以在所谓的“熟”模式下运行终端。这意味着终端只是按照字符到达的顺序显示字符，没什么特别的。但是，正如您所发现的那样，您会遇到竞争条件。

选项 1：您一次读取一个字符，缓冲整行。当新行到达并且您想将其打印出来时，您必须（a）抓住某种打印互斥锁（程序内部），（b）清除当前行（print '\r[ space][space][space]...\r')，(c) 打印输入行 + '\n'，以及 (d) 将先前的缓冲区恢复到屏幕（通过打印）并解锁互斥锁。

这变得丑陋。快速地。正如您所发现的，没有行编辑支持或任何花哨的东西。这种方法唯一的好处是它可能适用于大约 99% 的终端。

选项 2：您将终端置于原始模式。在这种模式下，您可以完全控制终端，但是您会失去非常基本的功能（例如，除非您手动输出，否则键入一个键不会显示它）。您仍然需要手动实现导航等功能，但至少它会起作用。这种方法可能是最灵活的，给你最大的控制权，但是这样工作非常困难，这就是他们发明的原因......

选项 3：您使用 ncurses（或类似的终端库）。这些概念有点难，但比在纯原始模式下做事要容易得多。编辑和窗口化（或者如您所说，保留一行）是内置的。该界面可能比您从熟模式中获得的更漂亮。

**编辑**我在这里谈论了很多关于 *nix 终端的内容，其中大部分不适用于 Windows。

# actionscript-3 - 将模型传递给其他组件

> ID：14367789
> 
> 赞同：0
> 
> 时间：2013-01-16T21:03:47.483
> 
> 标签：actionscript-3, apache-flex

我正在调试模型上的 ArrayCollection 未在 UI 中更新的问题（即使我在新数据中看到它）。

我想知道将该模型传递给其他组件（即顶级组件）是否会导致问题。

例如，这是我在顶层的模型：

```
[Bindable]
        private var meetingInfo:MeetingInfoModel; 
```

现在在这里我将它传递给同一个类中的一个组件：

```
<meetingViewStack:MeetingViewStack id="mainPanelContainer"
                                   newAttachmentsList="{meetingInfo.newAttachmentList}"
                                   meetingInfo="{meetingInfo}"
                                   currentState="{getPanelState(currentState)}"
                                   inCreateMeeting="false" 
                                   includeIn="runSinglePanel, runDoublePanel"
                                   height="100%"
                                   width="100%"
                                   /> 
```

以下是我在该 MeetingViewStack 组件中声明该属性的方式：

```
[Bindable] 
        public var meetingInfo:MeetingInfoModel = MeetingInfoModel.getInstance(); 
```

绑定应该在 MeetingViewStack 中正常工作吗？即使该属性是由另一个组件传递给它的。

我的意思是我真的没有迫切需要传递它。它是一个模型，我可以在那里声明它。

感谢您提供任何有用的提示！

更新：

我已验证当我更新 meetingInfo 属性时调用了 setter。但是，当我在 meetingInfo 模型中更新数组集合时，它不会被调用，即

```
meetingInfo.docsAndAttachmentsList.sort = nameSort;
        meetingInfo.docsAndAttachmentsList.refresh(); 
```

我怎样才能让它工作？这就是我真正想要的。

这是 MeetingInfoModel 类：

```
package com.fmr.transporter.model 
```

{ 进口 com.fmr.transporter.events.CustomEvent; 导入 com.fmr.transporter.events.xmppServicesEvents.XMPPContactsLoadedEvent；导入 com.fmr.transporter.services.httpservices.UserServices；导入 com.fmr.transporter.services.xmppservices.XMPPServices；导入 com.fmr.transporter.util.util；导入 com.fmr.transporter.vo.ContactVO；导入 com.fmr.transporter.vo.MeetingVO；导入 com.fmr.transporter.vo.ParticipantVO；

```
import flash.events.EventDispatcher;

import mx.collections.ArrayCollection;
import mx.events.CollectionEvent;

import org.igniterealtime.xiff.data.im.RosterItemVO;

[Bindable]
public final class MeetingInfoModel extends EventDispatcher
{
    //Universal INFO
    public var generalInfo:GeneralInfoModel;
    public var meetingVO:MeetingVO = new MeetingVO();
    public var meetingId:String;

    public var bulletinBoardLiveMembers:ArrayCollection = new ArrayCollection();

    public var xmppServices:XMPPServices;

    public var declinedParticipantsGroup:ArrayCollection = new ArrayCollection();
    public var notJoinedParticipantsGroup:ArrayCollection = new ArrayCollection();
    public var conferenceRoomParticipantsGroup:ArrayCollection = new ArrayCollection();
    public var otherLocationParticipantsGroup:ArrayCollection = new ArrayCollection();

    public var documentList:ArrayCollection = new ArrayCollection();

    public var newAttachmentList:ArrayCollection = new ArrayCollection();
    public var docsAndAttachmentsList:ArrayCollection = new ArrayCollection();

    public var bulletinBoardMsgList:ArrayCollection = new ArrayCollection();

    private var _participantList:ArrayCollection = new ArrayCollection();
    public var dismissedMeetingIDs:Array = [];
    public var visibleToastWindows:Array = [];

    public function MeetingInfoModel()
    {
        generalInfo = GeneralInfoModel.getInstance();
        xmppServices = XMPPServices.getInstance();
        _participantList.addEventListener(CollectionEvent.COLLECTION_CHANGE, allParticipantsChangeHandler);
        bulletinBoardLiveMembers.addEventListener(CollectionEvent.COLLECTION_CHANGE, bulletinBoardLiveMembersChangeHandler);
    }

    private static var model:MeetingInfoModel = null;

    public static function getInstance():MeetingInfoModel
    {
        if (model == null)
        {
            model = new MeetingInfoModel();
        }
        return model;
    }

    public function displayToastForThisMeeting(meetingID:Number):Boolean
    {
        //trace("model::meetingID = " + meetingID);
        var doDisplayToast:Boolean = false;
        var containsMeetingID:Boolean = false;
        //the first one
        if(dismissedMeetingIDs.length == 0)
        {
            //trace("dismissedMeetingIDs.length = 0");
            doDisplayToast = true;
            dismissedMeetingIDs.push(meetingID);
        }
        else
        {
            for(var i:int=0; i < dismissedMeetingIDs.length; i++)
            {
                //trace("dismissedMeetingIDs[" + i + "] = " + dismissedMeetingIDs[i]);
                if(meetingID == dismissedMeetingIDs[i])
                {   //this one has already been dismissed
                    doDisplayToast = false;
                    containsMeetingID = true;
                    break;
                }
                else
                {
                    doDisplayToast = true;
                    containsMeetingID = false;
                }
            }

            if(containsMeetingID == false)
            {
                dismissedMeetingIDs.push(meetingID);
            }
        }
        return doDisplayToast;
    }

    public function setAllParticipants(value:ArrayCollection):void
    {
        _participantList = value;
        dispatchEvent(new CustomEvent(CustomEvent.HAVE_PARTICIPANT_LIST));
        calculateGroups();
    }

    public function getParticipant(loginName:String):ParticipantVO
    {   
        for each (var item:ParticipantVO in _participantList)
        {
            if (item.loginName == loginName)
            {
                return item;
            }
        }
        return null;    
    }

    private function allParticipantsChangeHandler(event:CollectionEvent):void
    {
        calculateGroups();
    }

    private function bulletinBoardLiveMembersChangeHandler(event:CollectionEvent):void
    {
        calculateGroups();
    }

    private function isInRoster( loginName:String ):Boolean { 
        for each (var newContactVO:ContactVO in model.generalInfo.allGroup)
        {
            if ( newContactVO.profileVO.email == loginName ) {
                return true;
            }
        }
        return false;
    }

    public function calculateGroups():void
    {
        var allGroup:ArrayCollection = generalInfo.allGroup;

        var participantsRosterGroup:ArrayCollection = new ArrayCollection();
        var declinedParticipantsGroup:ArrayCollection = new ArrayCollection();
        var notJoinedParticipantsGroup:ArrayCollection = new ArrayCollection();
        var conferenceRoomParticipantsGroup:ArrayCollection = new ArrayCollection();
        var otherLocationParticipantsGroup:ArrayCollection = new ArrayCollection();

        var notDeclinedParticipantsGroup:ArrayCollection = new ArrayCollection();

        for each (var item:Object in _participantList)
        {
            //because participant list contains both people and rooms, we must test to see if this is a participant
            if(item is ParticipantVO)
            {
                var xmppLoginName:String = util.formatEmailToUserName(item.loginName);
                for each (var newContactVO:ContactVO in allGroup)
                {

                    if ( item.loginName != model.generalInfo.ownerUser.loginName ) {
                        var rosterVO:RosterItemVO = newContactVO.rosterItemVO;

                        if (rosterVO.jid.node == xmppLoginName)
                        {
                            try {
                                var contactVO:ContactVO = new ContactVO();
                                //add the photo to the roster entry for each person in the meeting
                                if ( newContactVO.profileVO ) {
                                    rosterVO.photo = newContactVO.profileVO.photo;
                                    contactVO.profileVO = xmppServices.findProfile(rosterVO.jid);
                                    contactVO.profileVO = newContactVO.profileVO;
                                }
                                else {
                                    rosterVO.photo = null;
                                }

                                contactVO.rosterItemVO = rosterVO;

                            }
                            catch (e:Error) {
                                trace(e.message);
                            }

                            if (item.status == "declined")
                            {
                                declinedParticipantsGroup.addItem(contactVO);
                            }
                            else
                            {
                                notDeclinedParticipantsGroup.addItem(contactVO);
                            }
                            break;
                        }
                    }
                }
            }

        }

        for each (var contact:ContactVO in notDeclinedParticipantsGroup)
        {
            var joined:Boolean = false;
            if ( contact.rosterItemVO ) {
                for each (var memberName:String in bulletinBoardLiveMembers)
                {
                    if (contact.rosterItemVO.jid.node == memberName)
                    {
                        joined = true;

                        if (contact.rosterItemVO.jid.resource == "theconfroomimsittingin"  )
                        {
                            conferenceRoomParticipantsGroup.addItem(contact);
                        }
                        else
                        {
                            otherLocationParticipantsGroup.addItem(contact);
                        }
                        //dispatchEvent "DW has joined the meeting"
                        break;
                    }
                }
            }

            if (!joined)
            {
                notJoinedParticipantsGroup.addItem(contact);
            }
        }

        this.notJoinedParticipantsGroup = notJoinedParticipantsGroup;
        this.declinedParticipantsGroup = declinedParticipantsGroup;
        this.otherLocationParticipantsGroup = otherLocationParticipantsGroup;
        this.conferenceRoomParticipantsGroup = conferenceRoomParticipantsGroup;
    }

    public function clearMeeting():void
    {
        meetingId = "";
        _participantList.removeAll();
        docsAndAttachmentsList.removeAll();
        documentList.removeAll();
        newAttachmentList.removeAll();
        bulletinBoardMsgList.removeAll();
        bulletinBoardLiveMembers.removeAll();
    }
    [Bindable]
    public function get participantList():ArrayCollection
    {
        return _participantList;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:15:23.443

认为您的绑定方式错误。

在顶层它应该是：

```
[Bindable] private var meetingInfo:MeetingInfoModel = MeetingInfoModel.getInstance(); 
```

在 MeetingViewStack 组件内部：

```
[Bindable] public var meetingInfo:MeetingInfoModel; 
```

它还可能取决于 MeetingInfoModel 类中的哪些属性是 [Bindable]。

# sql - 存储过程的 Visual Studio 2010 函数导入返回错误数据，忽略参数

> ID：14367790
> 
> 赞同：0
> 
> 时间：2013-01-16T21:03:48.530
> 
> 标签：sql, visual-studio, entity-framework, stored-procedures

**TL;DR - SQL 存储过程的函数导入返回错误数据；所有其他调用存储过程的方法都返回正确的数据。**

我的 SQL Server 2008 R2 服务器中有一个具有以下签名的存储过程

```
ALTER PROCEDURE [dbo].[GetCrashCountByTime]
    @start_date datetime,
    @end_date datetime,
    @moving_avg bit = 0,
    @issue_id int = null,
    @granularity int -- Either 1, 2, 3, 4, or 5 for Minute, Hour, Day, Month, Year grouping
    -- Other inputs removed for brevity
WITH RECOMPILE
AS
BEGIN
    -- ...SQL goes here...
END 
```

来自 SQL 的示例调用如下所示：

```
DECLARE @return_value int
EXEC    @return_value = [dbo].[GetResultsByTime]
        @start_date = '2013-01-14',
        @end_date = '2013-01-16',
        @issue_id = 1637,
        @granularity = 2 -- equivalent to grouping by Hour
SELECT  'Return Value' = @return_value
GO

time                        | count | avg
-----------------------------------------
2013-01-14 00:00:00.0000000 | 2     | 0
2013-01-14 01:00:00.0000000 | 1     | 0
2013-01-14 02:00:00.0000000 | 1     | 0
2013-01-14 03:00:00.0000000 | 1     | 0
... 
```

关键是@granularity 参数决定了结果的分组方式——按分钟、小时、天、月或年。例如，通过稍微改变调用以使用 Date (3)，我得到不同的结果（如预期的那样）：

```
DECLARE @return_value int
EXEC    @return_value = [dbo].[GetResultsByTime]
        @start_date = '2013-01-14',
        @end_date = '2013-01-16',
        @issue_id = 1637,
        @granularity = 3
SELECT  'Return Value' = @return_value
GO

time                        | count | avg
-----------------------------------------
2013-01-14 00:00:00.0000000 | 21    | 0
2013-01-15 00:00:00.0000000 | 80    | 0
2013-01-16 00:00:00.0000000 | 0     | 0
... 
```

（暂时忽略 avg，这无关紧要）。

当我直接从 SQL 以这种方式调用它时，我已经验证该函数正在工作。

我正在使用这个存储过程来绘制使用实体框架插件（EF 版本 4.0.0.0）的 MVC 应用程序中的一些数据。首先，我使用数据库中的更改更新了 .edmx 文件。我打开模型资源管理器并为 GetResultsByTime 添加了一个函数导入，使用向导自动生成一个新的复杂类型 GetResultsByTime_Result。但是，当我使用生成的函数时，我得到的结果就好像我已经传入了“Day”以获得粒度而不是我指定的结果。例如，

在 C# 代码中调用 SP：

```
var data = db.GetResultsByTime(param.StartDate, param.EndDate, param.IssueId, param.Granularity).ToList(); // param.Granularity is an Enum value, in this case GranularityType.Hour
// data has only 2 entries, instead of 24 or so as expected 
```

当我使用服务器资源管理器执行存储过程时，我再次得到正确的结果：

```
Running [dbo].[GetCrashCountByTime] ( @start_date = 2013-01-14, @end_date = 2013-01-16, @issue_id = 1637, @granularity = 2 ).
day                            crash_count                                                                                                                                                                                                                                                      avg_count                                                                                                                                                                                                                                                        
------------------------------ ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- 
2013-01-14 00:00:00.0000000    2                                                                                                                                                                                                                                                                0                                                                                                                                                                                                                                                                
2013-01-14 01:00:00.0000000    1                                                                                                                                                                                                                                                                0                                                                                                                                                                                                                                                                
2013-01-14 02:00:00.0000000    1                                                                                                                                                                                                                                                                0 
```

有人有想法么？我尝试将@granularity 添加到定义存储过程的 SELECT 中，以确保我在 SQL 中获得与我期望的值相同的值，并且它始终返回我传入的相同值，只有其余数据为虽然我已经通过了 3（天）。

我为冗长道歉，我只是想确保我没有遗漏任何重要的细节。

编辑：在 Matthew 的建议下，我通过包含 Stack Exchange MiniProfiler 来打开分析功能。从网站请求数据后，Profiler 显示生成的 SQL 为：

```
ExecuteStoreCommands CreateFunctionObjectResult ExecuteFunction ExecuteFunction GetCrashCountByTime CrashesByDay
DECLARE @start_date DateTime2 = '2013-01-01T00:00:00',
        @end_date DateTime2 = '2013-01-17T09:14:00',
        @issue_id int = 1637,
        @granularity int = 2

[dbo].[GetCrashCountByTime] 
```

我选择了“小时”，它解析为 2，如此处所示。

编辑2：

还有另一个输入变量，@moving_avg 位，它控制是否计算平均值。所以存储过程中有一个部分，例如：

```
CREATE PROCEDURE [dbo].[GetResultsByTime]
    -- ...
    @moving_avg bit = 0,
    -- ...

IF @moving_avg = 0
BEGIN
    -- Do calculation without average
END
ELSE
BEGIN
    -- Calculate average
END 
```

查看生成的 SQL 时，我看到 @moving_avg 被设置为 null。我更改了检查 null 或 0 的过程：

```
IF @moving_avg = 0 OR @moving_avg IS NULL
BEGIN
    -- Do calculation without average
END 
```

现在它似乎在“倾听”粒度论点。

现在修复我在使用“分钟”粒度时发现的错误 - 谢谢大家！

# python - 清除 pyglet 资源缓存

> ID：14367791
> 
> 赞同：1
> 
> 时间：2013-01-16T21:03:51.017
> 
> 标签：python, resources, pyglet

有没有办法清除pyglet中的资源缓存？资源的源图像在磁盘上发生更改，我需要重新加载它，但 pyglet 使用缓存的资源。这就是我所做的：

```
pyglet.resource.path = [self.path]
pyglet.resource.reindex()
self.img = pyglet.resource.image(self.filename) 
```

然后磁盘上的图像文件发生变化，我想重新加载它，我再次执行上述操作，但 pyglet 似乎使用缓存的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T02:40:54.423

我在使用 pyglet 时遇到了同样的问题。这是我想出的解决方案：

```
def clear_cache(filename):
        if filename in pyglet.resource._default_loader._cached_images:
            del pyglet.resource._default_loader._cached_images[filename] 
```

这个对我有用！

解释：

在`pyglet`源代码中四处寻找之后，该`resource`模块似乎将图像名称记录在一个名为`_cached_images`.

似乎当您像在示例中那样使用资源模块时，会在资源模块`_default_loader`中创建一个名为的对象。因此，缓存位于`_default_loader._cached_images`.

我确信有更好的方法来完成我所做的事情，例如子类化资源并`clear_cache`在那里添加我自己的方法。但是我是编程新手，我不太了解`resource`模块中的所有内容，所以这是我想出的最好的。

# xcode - Xcode中的重复符号错误

> ID：14367793
> 
> 赞同：8
> 
> 时间：2013-01-16T21:04:00.013
> 
> 标签：xcode, compiler-errors, duplicates, symbols

添加自己的框架后尝试构建项目时，我在 Xcode 4.5.1 中遇到“重复符号”错误。我验证了重复的框架文件，但没有。但是当我将框架添加到项目中时，它会抱怨这些错误。请建议..

```
duplicate symbol _NXArgc in:
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o
/Users/idcc/Test/MyFW/Products/MyTestFW.framework/MyTestFW

duplicate symbol _NXArgv in:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o
/Users/idcc/Test/MyFW/Products/MyTestFW.framework/MyTestFW

duplicate symbol ___progname in:
  /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o
/Users/idcc/Test/MyFW/Products/MyTestFW.framework/MyTestFW

duplicate symbol _environ in:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o
/Users/idcc/Test/MyFW/Products/MyTestFW.framework/MyTestFW

duplicate symbol start in:
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk/usr/lib/crt1.3.1.o
/Users/idcc/Test/MyFW/Products/MyTestFW.framework/MyTestFW
ld: 8 duplicate symbols for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

提前致谢..

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-29T09:31:15.713

我在使用两个第三方框架时遇到了同样的问题。我通过从构建设置中的“其他链接器标志”中删除“all_load”解决了这个问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-30T01:20:39.370

这些符号在标准 C 库的启动代码 crt.o 中。通常它应该是初始化全局变量和对象的可执行文件的入口点。它还将调用您的主要功能。

但是对于一个框架，你不应该将它包含在你的二进制文件中，因为框架不应该有 main。我相信您在框架的目标构建设置中将“与标准库链接”选项设置为“是”。这会将 crt.o 链接到您的框架中。而且当你将框架链接到一个项目中时，会有重复的符号。

请在构建设置中将选项“与标准库链接”设置为 NO。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-05T07:14:29.247

您的应用程序提供了一个实现，其中有 8 个重复符号。

您可能有多种方法可以做到这一点：

您有两个模块声明同一个类。也许不再需要一个？

您正在导入文件 .m 和 .h 中的任何头文件：-（从一个地方删除。）

您正在某处导入任何 .m 文件。:- (导入 .h 文件而不是 .m 文件)

您已经在任何 .h 文件中的 @interface{} 外部（上方）定义并声明了任何 const 变量，它可能被重复。:- （在 .m 文件中执行。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-07-21T09:37:16.997

`.h`还要检查是否在应用程序的文件中正确定义了常量等全局变量。

定义全局变量的正确方法是在文件中使用`extern`变量。`.h`

注意：这不是以前的 Xcode 版本的问题。我遇到了 Xcode 6.3 的问题并解决了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-30T15:53:54.960

如果您仅在模拟器中运行应用程序时遇到此问题，则可以通过删除本地文件夹来解决

```
~/Library/Developer/CoreSimulator 
```

Xcode 将在第一次构建和运行后恢复它。 **请确保在执行此操作之前备份任何设置**（尤其是与模拟器设备相关的设置）。

*在 Xcode 版本 7.2.1 (7C1002) 上测试*

# javascript - 如何记录。创建一个脚本然后立即使用它

> ID：14367799
> 
> 赞同：0
> 
> 时间：2013-01-16T21:04:11.647
> 
> 标签：javascript, asynchronous, settimeout

[http://jsbin.com/iwuhum/1/](http://jsbin.com/iwuhum/1/)

我正在尝试添加一个脚本元素，该元素具有`var myVar = "hello world"`，并且紧随其后，我想使用`myVar`. 不幸的`typeof myVar`是`undefined`，除非我做的`setTimeout`不止一个`0`。 `setTimeout`的`0`不起作用。我复制了 Google Analytic 创建脚本元素的方法，他们似乎让它工作得很好。我错过了什么吗？

**注意：**由于某种原因，jsbin 的行为与将这段代码复制/粘贴到 .html 文件并在本地尝试不同。我想 jsbin 已经有一个延迟，这使得`setTimeout`of`0`工作。

```
(function () {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.defer = false;
    ga.src = 'http://bakersdozen13.lfchosting.com/test.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})(); // note: the () executes it immediately (or it should!)

$("#out").append('typeof myVar is ' + typeof myVar); // "undefined" :(

setTimeout(function() {
    $("#out").append('<br/>typeof myVar is ' + typeof myVar); // "undefined" :(
}, 0);    

setTimeout(function() {
    $("#out").append('<br/>typeof myVar is ' + typeof myVar); // "string"
}, 1000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:06:10.703

我会认为这里的问题是脚本在您第一次调用 typeof 时尚未加载。

您最好使用`onload`或类似 jquery`ready`的事件来触发脚本加载时的回调。

```
 ga.onload = function(){
        $("#out").append('typeof myVar is ' + typeof myVar);
    } 
```

**作为对评论的回应**，类似以下的内容应该可以工作，但这是一个坏主意：

```
var xhReq = new XMLHttpRequest();
//The false at the end makes the request sychronous
xhReq.open("GET", "http://bakersdozen13.lfchosting.com/test.js", false);
xhReq.send(null);
// I know eval is evil, but this is just a demonstration. This won't happen until the page is loaded.
eval(xhReq.responseText);
// Assuming myVar is a global variable initialized within the script this should now work
$("#out").append('typeof myVar is ' + typeof myVar); 
```

进一步阅读：[https ://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests](https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest/Synchronous_and_Asynchronous_Requests)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:23:48.510

脚本文件必须加载。没有办法等待它加载。由于看起来您正在使用 jQuery，因此请使用 getScript()

```
$.getScript("http://bakersdozen13.lfchosting.com/test.js", function() { 
    alert(myVar);
}); 
```

[JSFiddle](http://jsfiddle.net/U9e82/)

# jquery - JS If/Else 使类忽略特定的 JS

> ID：14367802
> 
> 赞同：1
> 
> 时间：2013-01-16T21:04:31.973
> 
> 标签：jquery, if-statement

基本上，我编写了一些自定义 JS 来在页面之间进行淡入/淡出。该脚本本身运行良好，因此当我单击任何新链接时，内容会淡出并随着新页面淡入。我遇到的问题是，当我单击“mailto：someone@gmail.com”之类的链接时，它会加载电子邮件程序，但该网站仍然会淡出，内容不会淡入。我想要的是使某些链接成为我可以添加到 JS 的类，因此当单击它们时，我的淡入淡出 JS 不会加载，链接将在没有 JS 的情况下正常工作。我想我可以把它包装在一个 if/else 语句中，比如：

```
if (.thisclass).clicked
 {not load the below JS}
else
 { here is my original JS} 
```

这是我的代码：

```
 //  Menu Animation
    $(function() {
    $("#menu").css("display", "none");

    $("#menu").fadeIn(500);

    $("a").click(function(event){
        event.preventDefault();
        linkLocation = this.href;
        $("#menu").delay(400).fadeOut(500, redirectPage);      
    });

    function redirectPage() {
        window.location = linkLocation;
    }
});
   $(function (){
       $("#menu").addClass("visible");

//  mainFade Animation 
});
    $(function() {
    $("#mainFade").css("display", "none");

    $("#mainFade").delay(400).fadeIn(500);

    $("a").click(function(event){
        event.preventDefault();
        linkLocation = this.href;
        $("#mainFade").fadeOut(500, redirectPage);      
    });

    function redirectPage() {
        window.location = linkLocation;
    }
});
   $(function (){
       $("#mainFade").addClass("visible");
});

//  Slogan Animation 

    $(function() {
    $("#line1").css("display", "none");

    $("#line1").delay(800).fadeIn(500);

});
$(function() {
    $("#line2").css("display", "none");

    $("#line2").delay(1400).fadeIn(500);

});
$(function() {
    $("#line3").css("display", "none");

    $("#line3").delay(1600).fadeIn(500);

});

$(function() {
    $("#demo").css("display", "none");

    $("#demo").delay(2100).fadeIn(500);

}); 
```

这是该站点的链接以供参考。联系页面有一些 Mailto 链接。

[网站](http://revolveis.net/ag)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:10:59.040

您可以将两个`$("a").click(function(event){`函数都更改为`$("a").not('.email-class').click(function(event){`. 这将在没有`email-class`该类的任何链接上触发动画。

# java - LWJGL OpenGL 黑屏

> ID：14367803
> 
> 赞同：3
> 
> 时间：2013-01-16T21:04:37.650
> 
> 标签：java, opengl, lwjgl

我刚刚开始学习 LWJGL/OpenGL 来创建 3D 游戏，所以我从小处着手，尝试制作一条简单的线条（2D）显示。窗口加载正常，大小合适，但显示屏上没有绘制任何内容。有一个空白屏幕，我似乎对代码所做的任何更改都不会影响屏幕上绘制的内容。这可能是因为我对如何正确执行此操作缺乏了解，或者这可能是我的代码/计算机中的问题。我尝试在我的初始化代码中添加和删除各种东西，例如 glEnable(GL_TEXTURE_2D) 和 glDisable(GL_TEXTURE_2D)，我尝试在渲染代码中调用 pushMatrix 和 popMatrix，我尝试在 GL11 初始化代码中定义视口但没有似乎正在工作。我的代码如下：

```
import static org.lwjgl.opengl.GL11.*;
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.*;

public class Main {
    public Main(String[] args) throws LWJGLException{
        Logging.info("Starting up "+Info.title+" v"+Info.version+"!");
        initDisplay();
        initGL11();
        startGameLoop();
    }
    public static void main(String[] args) throws LWJGLException{
        new Main(args);
    }
    public void initDisplay(){
        try {
            Logging.info("Initializing display...");
            Display.setDisplayMode(new DisplayMode(800, 600));
            Display.setTitle(Info.title);
            Display.create();
            Logging.info("Display initialized!");
        } catch (LWJGLException e) {
            Logging.severe(e);
            Display.destroy();
        }
    }
    public void initGL11() throws LWJGLException{
        glMatrixMode(GL_PROJECTION);
        glLoadIdentity();
        glOrtho(0f, 800f, 600f, 0f, 0f, 1f);
        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();
    }
    public void startGameLoop(){
        while(!Display.isCloseRequested()){
            glBegin(GL_LINE);
                glColor3f(1f,0f,0f);
                glVertex2f(0f,0f);
                glVertex2f(1f,1f);
            glEnd();

            Display.update();
            Display.sync(60);
        }
        Logging.info("Closing down!");
        Display.destroy();
        System.exit(0);
    }
} 
```

*Logging 和 Info 类只是对一些控制 System.out 和存储静态变量的类的静态引用。这些不会影响 LWJGL 或 OpenGL，所以我认为包含它们没有多大意义。*

在我的构建路径中，我有**lwjgl.jar**、**lwjgl_util.jar**和**slick_util.jar**并且本机正确链接到 lwjgl.jar。启动项目时我没有收到任何错误，并且输出正常。我不知道为什么我仍然会出现黑屏。如果它有任何用途，我将按照[本](http://www.youtube.com/watch?v=0v56I5UWrYY&list=SP19F2453814E0E315)教程系列来创建我的项目，并且它在视频中似乎工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T21:22:21.907

你忘记打电话了`glClear(GL_COLOR_BUFFER_BIT)`。它应该总是在你绘制之前被调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:17:44.023

```
glOrtho(0f, 800f, 600f, 0f, 0f, 1f);
...
glVertex2f(0f,0f);
glVertex2f(1f,1f); 
```

尝试提交与您的近剪裁平面不重合的几何图形。

或调整附近的剪裁平面：

```
glOrtho(0f, 800f, 600f, 0f, -1f, 1f); 
```

我还建议偶尔清除帧缓冲区。

# amazon-web-services - 使用多个 amazon ws 帐户

> ID：14367804
> 
> 赞同：0
> 
> 时间：2013-01-16T21:04:41.007
> 
> 标签：amazon-web-services

我目前管理多个 AWS 账户，从命令行这样做可能很烦人。每次我必须删除 .ec2 文件夹中的公共和私有证书并手动将它们替换为另一个帐户以获得访问权限时。

我有办法处理多个证书/帐户吗？

当我第一次创建命令行时，我按照这里的手册[http://www.robertsosinski.com/2008/01/26/starting-amazon-ec2-with-mac-os-x/](http://www.robertsosinski.com/2008/01/26/starting-amazon-ec2-with-mac-os-x/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:56:31.123

这就是我所做的：

创建以下脚本并将其另存为`~/bin/aws.sh`：

```
#!/bin/bash
export EC2_REGION='us-east-1'
case "$1" in
"rbn") 
   export AWS_ACCESS_KEY='AKKDHH2HVQSHVQ32A'
   export AWS_SECRET_KEY='vizCQvkKhmMioAP/BXSe4HANGh47azvAF'
   export AWS_ACCOUNT='RBN'
   ;;
"gl") 
   export AWS_ACCESS_KEY='AKIADFGDFHHTP7ELQ'
   export AWS_SECRET_KEY='Ty+mNit235235235ETiJY/rEfxJwbQ2h+b'
   export AWS_ACCOUNT='AnotherCompanyA'
   ;;
"mcg") 
   export AWS_ACCESS_KEY='AKIAJKA2F5KRZQDBZS7A'
   export AWS_SECRET_KEY='tuQIiXgHY0B3nTEy6WaUzTsZwHUg1DiJtlAb'
   export AWS_ACCOUNT='AnotherCompanyB'
   ;;
*) 
   export AWS_ACCOUNT="No account"
   ;;
esac
echo "$AWS_ACCOUNT is active." 
```

然后创建以下别名：

```
alias aws='client=$1 source aws.sh $client' 
```

然后我就执行它：

```
[jjbegin@bane ~]$ aws rbn
RBN is active.
[jjbegin@bane ~]$ 
```

# c++ - 如何通过指针数组访问类的成员函数？

> ID：14367805
> 
> 赞同：0
> 
> 时间：2013-01-16T21:04:41.957
> 
> 标签：c++, class, pointers

我有一个非常标准的类，其中包含一些公共成员函数和私有变量。

我的问题最初源于无法动态命名我的类的对象实例，所以我创建了一个类类型的指针数组：

```
static CShape* shapeDB[dbSize]; 
```

我有一些提示来获取要传递给构造函数的字段的信息（这似乎有效）：

```
shapeDB[CShape::openSlot] = new CShape(iParam1,sParam1,sParam2); 
```

openSlot 会正确递增，因此如果我要创建另一个 CShape 对象，它将有指向它的 next 指针。下一段代码不起作用并始终崩溃：

```
cout << shapeDB[2]->getName() << " has a surface area of: " << shapeDB[2]->getSA() << shapeDB[2]->getUnits() << endl; 
```

指针数组在 main 之外全局声明，get() 函数在返回字符串或整数的类中是公共的。我不确定我做错了什么，但我确定与指针设置有关。我正在编写此代码以尝试了解有关类/指针的更多信息，并且由于找不到其他人尝试这样做而感到非常困惑。

我也很好奇 CShape 新实例的名称是什么......？如果有任何其他方法可以动态创建对象实例并跟踪名称以便能够为成员函数访问它们，我全都听好了。

我尝试了各种指针引用/取消引用的排列，但大多数都无法编译。如果有人认为这会有所帮助，我可以发布更大的代码块或所有代码。

```
class CShape {
    int dim[maxFaces];
    int faces;
    string units;
    string type;
    string name;
    bool initialized;
    int slot;
public:
    static int openSlot;

    CShape();
    CShape(int, string, string); // faces, units, name
    ~CShape();

    void initialize(void);

    // external assist functions
    int getA(void) {
        return 0;
    }
    int getSA(void) {
        int tempSA = 0;

        // initialize if not
        if(initialized == false) {
            initialize();
        }

        // if initialized, calculate SA
        if(initialized == true) {
            for(int i = 0; i < faces; i++)
            {
                tempSA += dim[i];
            }
            return(tempSA);
        }

        return 0;
    }
    string getUnits(void) {
        return(units);
    }
    string getName(void) {
        return(name);
    }

    // friend functions
    friend int printDetails(string);
};

// constructor with values
CShape::CShape(int f, string u, string n) {

    initialized = false;
    faces = f;
    units = u;
    name = n;
    slot = openSlot;
    openSlot++;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:10:34.957

我的猜测是您使用 CShape 构造函数来增加 CShape::openSlot？您可能在读取之前更改了值，因此指针存储在不同的位置。

尝试用固定值替换 openSlot 以排除此 CShape::option。

-- 添加了代码 --

我很确定这是问题所在，构造函数在赋值之前执行，这意味着 lhs. 将在 CShape::openSlot 递增后进行评估。

# matlab - 绘制结构化数据 (x,y,value)

> ID：14367806
> 
> 赞同：1
> 
> 时间：2013-01-16T21:04:41.743
> 
> 标签：matlab, plot

我正在尝试`imagesc`在 Matlab 中绘制数据集。数据集的结构如下：

```
x1  y1  value1
x2  y2  value2
x3  y3  value3
... 
```

**问题：**
当我尝试像这样绘制它时：

```
imagesc(x,y,value) 
```

该图仅是一维的。

`plot3`当我使用 z 轴的值绘制它时，它工作得很好。

如何使用可视化此数据集`imagesc`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:30:21.853

`imagesc`需要一个矩阵结构而不是您提到的 3 向量，并假设数据用于均匀空间网格。所以我会改用`scatter`开始。一种仍然使用的方法`imagesc`是插值到一个统一的网格并从你拥有的 3 个向量中构造一个矩阵：

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T01:30:09.380

如果你想转换你的非统一数据，你正在寻找的功能是`griddata`. 它处理插值并返回值矩阵。这可以通过`imagesc`或`surf`其他方式绘制。

`scatter`通常是更好的方法，但这取决于您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:10:46.680

尝试查看 imagesc 函数的源代码。你可以看看它是如何制作的。要查看它，请编写：

```
edit imagesc 
```

# sql-server - SQL Server 字符串连接奇数/截断

> ID：14367807
> 
> 赞同：1
> 
> 时间：2013-01-16T21:04:44.360
> 
> 标签：sql-server, string, concatenation, truncation

有以下查询：

```
Select
    'SpO2'      = CONVERT(VARCHAR(MAX), CONVERT(INT, CONVERT(FLOAT, [C120]))),
    'Separator' = '% on .',
    'FiO2'      = CONVERT(VARCHAR(MAX), CONVERT(INT, CONVERT(FLOAT, [C130]))),
    'VALUE'     = CONVERT(VARCHAR(MAX), CONVERT(INT, CONVERT(FLOAT, [C120]))) 
                  + '% on .' 
                  + CONVERT(VARCHAR(MAX), CONVERT(INT, CONVERT(FLOAT, [C130])))
From... 
```

对于给定的行，我可能有以下内容：

SpO2 = '96'，分隔符 = '% on.'，FiO2 = '97'，值 = '9'

或者...

SpO2 = '100'，分隔符 = '% on.'，FiO2 = '97'，值 = '1'

显然，在#1 中，我想要'96% on .97'，而在#2 中，我想要'100% on .97'。

显然，它正在截断字符串，只返回“VALUE”的第一个字符，但为什么呢？这在 SQL Server 2008 R2 上有效（我认为？）。当前的故障正在使用 SSMS 2012 发生。我疯了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T12:23:22.250

出于某种原因，我突然想到问题可能出在我放在两个转换值之间的字符串文字上。

果然，以下似乎解决了这个问题：

```
Select
    'VALUE'     = CONVERT(VARCHAR(MAX), CONVERT(INT, CONVERT(FLOAT, [C120]))) 
                  + CONVERT(VARCHAR(MAX),'% on .')
                  + CONVERT(VARCHAR(MAX), CONVERT(INT, CONVERT(FLOAT, [C130])))
From... 
```

虽然这在技术上是一个“答案”，但我肯定喜欢有人向我解释它。为什么世界上没有

```
'% on .' 
```

简单地理解为类型`VARCHAR`或至少`CHAR(6)`？它与领先的“％”有关吗？这需要逃避还是什么？

# java - JUnit、Spring (SpringJUnit4ClassRunner) 和 Spring 接线工作不正常（尝试从 Eclipse 和命令行 Maven 运行）？

> ID：14367815
> 
> 赞同：2
> 
> 时间：2013-01-16T21:05:10.513
> 
> 标签：java, spring, unit-testing, junit, spring-test

我遇到了一个问题，即我试图通过 spring 配置连接的 bean 不起作用？在我的测试用例中进行检查期间，bean 访问器显示为 null（但我确实在日志中观察到 setter 实际上将其设置为有效值。真的可以使用一些帮助......

这是代码：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations="/test-context.xml")
public abstract class HistoryCompress extends TestBase {

    private CompressionArchive compressArchive;
    public void setCompressionArchive(CompressionArchive value)
    {
        this.logInfo("setting compression archive: %s, name: %s",value,value.getcompressionFormat());
        this.compressArchive=value;
    }

    protected CompressionArchive getCompressionArchive()
    {
        return this.compressArchive;
    }

    @Test
    public void getArchiveTypeName()
    {
        logInfo("test");
        this.assertNotNull(this.getCompressionArchive(),"compression archive is null");     
        this.assertNotNull(this.getCompressionArchive().getcompressionFormat(), "format name is null");
        logInfo("format: %s",this.getCompressionArchive().getcompressionFormat());
    }

}

public class HistoryZipCompress extends HistoryCompress 
{
    public HistoryZipCompress()
    {
        this.logInfo("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-");
        this.logInfo("-=-=-=--=- C'Tor HistoryZipCompress");
        this.logInfo("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-");
    }

}

public interface CompressionArchive {
    public String getcompressionFormat();
    public Map<String,String> getArchiveHashes(InputStream stream,String password) throws Exception;
}
public class CompressionArchiveZip extends IntegrationBase implements CompressionArchive
{
   /* implementation methods*/
} 
```

* * *

然后我试图用下面的配置来连接它

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xmlns:jaxws="http://cxf.apache.org/jaxws"
    xmlns:util="http://www.springframework.org/schema/util" 
    default-autowire="byName"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">

    <context:annotation-config />       
    <bean class="gdg.scc.integration.testcases.file.history.HistoryZipCompress">
        <property name="compressionArchive"  ref="zipArchive" />
    </bean>     
    <bean id="zipArchive" class="gdg.scc.integration.global.helpers.compression.impl.CompressionArchiveZip" />
</beans> 
```

当我运行它时，我观察到 HistoryZipCompress 被实例化了 3 次不同的时间，这是在 HistoryZipCompress 上运行 getArchiveTypeName 的结果：

```
16-Jan 13:21:09 - INFO - main - org.springframework.context.support.GenericApplicationContext - 刷新 org.springframework.context.support.GenericApplicationContext@2bfe605c：启动日期 [2013 年 1 月 16 日星期三 13:21:09 MST] ; 上下文层次的根
16-Jan 13:21:09 - INFO - main - org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor - JSR-330 'javax.inject.Inject' 发现并支持自动装配注释
zipArchive,extensionToMimeType]; 工厂层次结构的根
16-Jan 13:21:09 - INFO - main - integration.testcases.file.history.HistoryZipCompress - -=-=-=-=-=-=-=-=-=-=-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
16-Jan 13:21:09 - INFO - main - integration.testcases.file.history.HistoryZipCompress - -=-=-=--=- C'Tor HistoryZipCompress
16-Jan 13:21:09 - INFO - main - integration.testcases.file.history.HistoryZipCompress - -=-=-=-=-=-=-=-=-=-=-=-=-=- =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
16-Jan 13:21:09 - INFO - main - integration.testcases.file.history.HistoryZipCompress - 设置压缩存档：integration.global.helpers.compression.impl.CompressionArchiveZip@6a367507，名称：zip
16-Jan 13:21:09 - 信息 - 主要 - integration.testcases.file.history.HistoryZipCompress - 测试
16-Jan 13:21:09 - INFO - Thread-0 - org.springframework.context.support.GenericApplicationContext - 关闭 org.springframework.context.support.GenericApplicationContext@2bfe605c：启动日期 [1 月 16 日星期三 13:21:09 MST 2013]; 上下文层次的根
16-Jan 13:21:09 - INFO - Thread-0 - org.springframework.beans.factory.support.DefaultListableBeanFactory - 破坏 org.springframework.beans.factory.support.DefaultListableBeanFactory@578bb31a 中的单例：定义 bean [fileSystemAPIUrl,fileTypeGenerator ,regexToExtensionMap,activeMQMessageProperties,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,integration.testcases.file .history.HistoryZipCompress#0,zipArchive,extensionToMimeType]; 工厂层次结构的根

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:10:58.963

使用@Autowired 注释该字段：

```
@Autowired
private CompressionArchive compressArchive; 
```

在 xml 配置中抛弃 HistoryZipCompress - 它在那里做什么？您不需要创建测试类的另一个实例，运行程序会为您执行此操作。

您需要将测试对象注入 CompressionArchive 实例。Spring runner 管理您的测试对象（HistoryCompress），但不知道您想要注入 CompressionArchive 实例。

# .htaccess - htaccess 仅在特定目录匹配时才重定向到域（非递归）

> ID：14367816
> 
> 赞同：0
> 
> 时间：2013-01-16T21:05:11.703
> 
> 标签：.htaccess, directory, rewrite, conditional-statements, rule

我正在尝试完成这样的*RewriteCond*但我遇到了正则表达式的问题

**仅**当当前地址为 domain2.tld/test/ 而**不是**domain2.com/test/_appz/ 时才重定向到 domain1.tld

域可能无关紧要：

仅当当前地址由目录 /test/ 组成时才重定向到 domain1.tld ，但在 /test/ **_appz** / 和更深的位置**不包含**

我想达到的条件：

domain2.tld/test/ >>> 重定向

domain2.tld/test/_appz/ >>> 留

otherdomain.tld >>> 留下

**编辑：**

我正在为自己的目的编写自己的 CMS，有 2 个域指向同一个 public_html，

一种是官方的，一种仅用于通过 CMS 访问。

```
cms.domain2.tld/test/ >>> redirect to domain1.com

cms.domain2.tld/test/_appz/ >>> no redirect

domain1.tld>>> no redirect (as it will be loop) 
```

**domain1.tld**和**cms.domain2.tld**指向**.htaccess**所在 的同一个目录

提前感谢4您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T23:11:59.640

您可以使用 mod_alias 或 mod_rewrite 进行重定向。请注意，使用 mod_alias，您**不想**使用该`Redirect`指令，该指令将虚拟链接两个路径节点，这不是您想要的。

### mod_alias

在**domain2.tld**的文档根目录下的 htaccess 文件中，添加：

```
RedirectMatch ^/test/?$ http://domain1.tld/ 
```

如果您想要永久重定向：

```
RedirectMatch 301 ^/test/?$ http://domain1.tld/ 
```

### mod_rewrite

如果您有可能干扰 mod_alias 的重写规则，那么您可能只想坚持使用 mod_rewrite。此外，如果**domain1.tld**和**domain2.tld**共享同一个文档根目录，您将无法使用 mod_alias。你想要这样的东西：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} domain2.tld$ [NC]
RewriteRule ^/?test/?$ http://domain1.tld/ [L,R] 
```

如果您想要永久重定向，请将标志更改为`[L,R=301]`.

# performance - 从 Oracle 10g 获取 Clob 导致 CPU 使用率高

> ID：14367822
> 
> 赞同：0
> 
> 时间：2013-01-16T21:05:41.737
> 
> 标签：performance, oracle, spring, jdbc, clob

我正在尝试在我的 Java 程序中从 Oracle 10g 读取数据，其中一列是 CLOB 类型，如下所示（注意：数据是 CLOB 类型的列）：

```
private final static String LOAD_QUERY 
        = "SELECT id, data FROM table WHERE id = ?";

    public SomeObject loadById(long id){
        SomeObject obj = null;
        try {
            obj = jdbcTemplate.queryForObject(LOAD_QUERY,
                    new ParameterizedRowMapper<SomeObject>() {
                public Model mapRow(ResultSet rs, int rowNum) throws SQLException {
                    long id = rs.getLong("id");
                    String data = rs.getString("data");
                    return new SomeObject(id, data);
                }
            }, id);
        } catch (Exception e) {
            throw new SomeException("Error during SQL query", ErrorCode.INTERNAL_ERROR, e);
        }
        return obj;
    } 
```

存储在 CLOB 中的数据大小高达 44Mb。我能够成功检索 CLOB 值，但它对 cpu 使用率造成了很大影响。使用 Java VisualVM 运行分析器后，似乎是 IO 问题。我应该如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T22:54:00.337

如果它是一个大块，我建议尝试通过流检索内容。通过使用getString，将分配一个大数组，也可能是二级缓存分配的一个大数组，甚至可以分配多个数组，而值是通过底层框架的不同层复制的值。所有这些字符串分配和复制都会导致高 CPU 使用率。

# groovy - 如何使用带有 jenkins email-ext 插件的过滤域？

> ID：14367828
> 
> 赞同：2
> 
> 时间：2013-01-16T21:05:53.640
> 
> 标签：groovy, jenkins, email-ext

目前，我的 Jenkins 实例向提交者发送电子邮件（以防构建失败）。我希望使用 email-ext 插件并编写一个 groovy 脚本，该脚本只会在提交属于我要定义的特定域的情况下发送电子邮件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-07-30T15:12:17.920

您可以使用默认预发送脚本来执行此操作，例如：

```
recipients = msg.getRecipients(javax.mail.Message.RecipientType.TO)
filtered = recipients.findAll { addr -> addr.toString().contains('@gooddomain.com') }
msg.setRecipients(javax.mail.Message.RecipientType.TO, filtered as javax.mail.Address[]) 
```

来自：[https ://wiki.jenkins-ci.org/display/JENKINS/Email-ext+Recipes](https://wiki.jenkins-ci.org/display/JENKINS/Email-ext+Recipes)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T23:52:43.330

您可以使用预发送脚本来执行此操作。它使您可以完全访问 MimeMessage 对象，因此您可以遍历 To 中的人员列表，如果列表中存在您不想要的域，您可以设置 cancel = True

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T03:05:23.273

通常 Jenkins 使用来自人员配置的电子邮件（Jenkings -> 人员 -> 配置）。
如果您不想向某些人发送电子邮件，只需删除电子邮件地址即可。

# c - 编译内联 MMX 汇编程序时出错：后缀或操作数无效

> ID：14367830
> 
> 赞同：0
> 
> 时间：2013-01-16T21:05:59.170
> 
> 标签：c, gcc, assembly, mmx

以下代码：

```
simd(n, is)
long *is;
{   
   long i;
   asm("pxor %mm0,%mm0");
   for (i = 0; i < n; i += W) {

       asm("movq %0 %%mm1\n\t"
           "paddq %%mm1 %%mm0"
           :
           :"m"(is[i])          );

   }
   return 0;
} 
```

我无法理解为什么它无法编译并出现以下错误：

```
/tmp/ccrDnFTm.s: Assembler messages:
/tmp/ccrDnFTm.s:29: Error: suffix or operands invalid for `movq'
/tmp/ccrDnFTm.s:30: Error: junk `%mm0' after register 
```

**为什么？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:07:17.793

操作数必须用逗号分隔：

```
movq %0, %%mm1 
```

# javascript - 强制浏览器下载具有相同 src 的多个脚本标签

> ID：14367837
> 
> 赞同：0
> 
> 时间：2013-01-16T21:06:10.993
> 
> 标签：javascript, browser, browser-cache

我有一个脚本标签

```
<div id='CommentBox'></div>
<script src="http://www.mywebsite.com/widget.js" type="text/javascript" /> 
```

这个 javascript 创建一个评论框。（如脸书评论框）

但是当用户多次复制/粘贴相同的脚本标签时，Chrome 和 IE9 不会再次请求第二、第三个文件，因为它已被缓存。但实际上人们希望在同一页面中多次使用评论框。我怎样才能打破浏览器缓存并强制它下载尽可能多的人粘贴在他们的博客中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:07:14.130

你这样做是错的。

如果您想要两个或更多注释框，只需调用该代码两次。脚本包含**不像**函数调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-17T10:51:14.017

而不是您编写的代码，请使用以下代码：

主 HTML 文件：

```
<html>

<head>
    <script src="http://www.mywebsite.com/widget.js" type="text/javascript" />
</head>

<body>

  <div id="CommentBox"></div> 

   <script type="text/javascript">
     Func1();
   </script>

 </body>

</html> 
```

小部件.js 文件：

```
function FUNC1(){
   alert("Hello");
} 
```

# ios - coredata 间歇性崩溃 [NSEntityDescription entityForName:inManagedObjectContext:]

> ID：14367838
> 
> 赞同：2
> 
> 时间：2013-01-16T21:06:11.883
> 
> 标签：ios, xcode, ipad, core-data, crash

我有一位客户使用的 iPad 2 发生了崩溃，我无法重现它。

崩溃报告：

```
Last Exception Backtrace:
0   CoreFoundation                  0x37a5429e __exceptionPreprocess
1   libobjc.A.dylib                 0x32b3b97a objc_exception_throw
2   CoreData                        0x317438d8 +[NSEntityDescription entityForName:inManagedObjectContext:]
3   MyApp                           0x000fc916 -[DetailViewController fetchedResultsController] (DetailViewController.m:237)
4   MyApp                           0x000fc374 -[DetailViewController addToMySermons] (DetailViewController.m:170)
5   MyApp                           0x000fc080 -[DetailViewController actionSheet:didDismissWithButtonIndex:] (DetailViewController.m:140)
6   UIKit                           0x35db60cc -[UIActionSheet(Private) _popoutAnimationDidStop:finished:]
7   UIKit                           0x35a73aae -[UIViewAnimationState sendDelegateAnimationDidStop:finished:]
8   UIKit                           0x35ae88ca -[UIViewAnimationState animationDidStop:finished:]
9   QuartzCore                      0x30a91bd4 CA::Layer::run_animation_callbacks(void*)
10  libdispatch.dylib               0x358924b2 _dispatch_client_callout
11  libdispatch.dylib               0x358971b8 _dispatch_main_queue_callback_4CF$VARIANT$mp
12  CoreFoundation                  0x37a27f36 __CFRunLoopRun
13  CoreFoundation                  0x3799aeb8 CFRunLoopRunSpecific
14  CoreFoundation                  0x3799ad44 CFRunLoopRunInMode
15  GraphicsServices                0x3989a2e6 GSEventRunModal
16  UIKit                           0x35ab22f4 UIApplicationMain
17  MyApp                           0x000f595a main (main.m:16)
18  MyApp                           0x000f5910 start + 36 
```

我可以看到它发生在 +[NSEntityDescription entityForName:inManagedObjectContext:] 调用中，如下所示：

```
NSEntityDescription *entity = [NSEntityDescription entityForName:@"StoredPage" inManagedObjectContext:self.managedObjectContext]; 
```

self.managedObjectContext 是从 UISplitViewController 左侧的 UITableViewController 传入的。

这对我和成千上万使用该应用程序的人来说都很好，只有这个人有问题。我们让他删除了该应用程序并重新安装它并重新启动他的 iPad，但它没有帮助。

有没有办法让我捕捉到实际抛出的异常并将其显示在 UIAlertView 中，以便我可以看到实际发生的情况，还是我必须获取他的 UDID 并给他一个调试版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-23T11:02:27.313

对我来说，问题是 ManagedObjectContext 没有持久存储协调器。

为了发现引发的异常的详细信息，我执行了以下操作

`NSEntityDescription *entity = nil; @try { // do something entity = [NSEntityDescription entityForName:@"MyEntity" inManagedObjectContext:managedObjectContext]; } @catch (NSException *exception) { // error happened! do something about the error state NSLog(@"exception creating entity for managedobject content MyEntity = %@", exception); return nil; } @finally { // do something to keep the program still running properly }`

其中记录了以下内容：

```

为 managedobject 内容创建实体的异常 MyEntity = +entityForName: nil 不是用于搜索实体名称“MyEntity”的合法 NSPersistentStoreCoordinator

```

我很欣赏这是一个老问题，但我怀疑这并不是一个不常见的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T22:42:56.350

你的核心数据模型改变了吗？

当 Core Data 模型文件与创建数据库文件时使用的文件不匹配时，我看到了一些难以重现和奇​​怪的崩溃。

最好通过始终创建核心数据模型（模式）的新“版本”来避免这种情况。

![选择核心数据模型文件并在编辑器菜单中选择添加模型版本...](../Images/daeee046567555d7a7e14e94ac61c1e1.png)

# .net - 在 .NET 应用程序中使用大量嵌入式资源有什么缺点？

> ID：14367839
> 
> 赞同：3
> 
> 时间：2013-01-16T21:06:13.537
> 
> 标签：.net, performance, embedded-resource

在 .NET 应用程序中使用大量嵌入式资源有什么缺点？

例如 500-2000 个文件，每个 100KB？立即想到由于大小而导致的加载时间，但还有别的吗？

# ruby - Ruby JSON.parse 错误

> ID：14367849
> 
> 赞同：1
> 
> 时间：2013-01-16T21:06:41.217
> 
> 标签：ruby, regex, json

我正在构建一个针对 API 使用 cURL 命令的脚本。我发送格式化为`application/json`请求的 cURL 命令并获取结果，然后将其解析为 Ruby 哈希。

当我使用 cURL POST 命令获得格式正确的 JSON 响应时，这非常有用。但是，当使用 cURL GET 命令时，我会返回一个包含标题的 JSON 文档：

```
puts r:

HTTP/1.1 200 OK
X-Compute-Request-Id: req-7e625990-068b-47d1-8c42-9d3dd3b27050
Content-Type: application/json
Content-Length: 1209
Date: Wed, 16 Jan 2013 20:47:41 GMT

{ <JSON DATA> } 
```

当我尝试执行 a 时，`JSON.parse(r)`我在“HTTP/1.1.”处收到了意外的令牌错误。

我的方法：

```
def list_flavors

    r = %x(curl -s -k -D - -H \"X-Auth-Token: #{$token}\" -X 'GET' http://10.30.1.49:8774/v2/27e60c130c7748f48b0e3e9175702c30/flavors -H 'Content-type:     application/json')

   response = JSON.parse(r)

   response
end 
```

有没有办法使用正则表达式将正文从 JSON 文档中提取出来然后解析？

或者当我从 cURL 获得响应时，我会以错误的方式解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:08:32.107

在将字符串传递到`JSON.parse`. `JSON.parse`只需要有效的 json。

我建议您使用非常通用的 ruby[​​ Net::HTTP](http://apidock.com/ruby/Net/HTTP)和/或[OpenURI](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/open-uri/rdoc/OpenURI.html)库，而不是卷曲并使用批发的东西作为字符串，这将允许您轻松访问没有标头的响应正文。

# java - Java正则表达式中负前瞻断言的奇怪之处

> ID：14367854
> 
> 赞同：4
> 
> 时间：2013-01-16T21:06:52.813
> 
> 标签：java, regex

我正在努力理解 Java 中正则表达式的行为，并且遇到了一些看起来很奇怪的事情。在下面的代码中，由于我在测试中无法理解的原因，测试突然失败，消息标签为“6 个字母匹配，否定”（随后的两个测试也失败了）。我是不是盯着这个看太久了，还是真的发生了什么奇怪的事情？我与可变长度的负前瞻断言（？！X）无关，但我很乐意听到任何理论，甚至是确认其他人遇到同样的问题并且它不是特定于我的JVM。抱歉正则表达式太做作了，但你不想看到真实的东西:)

```
// $ java -version
// java version "1.7.0_10"
// Java(TM) SE Runtime Environment (build 1.7.0_10-b18)
// Java HotSpot(TM) 64-Bit Server VM (build 23.6-b04, mixed mode)

// test of word without agreement
String test = "plusieurs personne sont";

// match the pattern with curly braces
assertTrue("no letters matched", Pattern.compile("plusieurs personne\\b").matcher(test).find());
assertTrue("1 letters matched", Pattern.compile("plusieurs personn\\p{Alpha}{1,100}\\b").matcher(test).find());
assertTrue("2 letters matched", Pattern.compile("plusieurs person\\p{Alpha}{1,100}\\b").matcher(test).find());
assertTrue("3 letters matched", Pattern.compile("plusieurs perso\\p{Alpha}{1,100}\\b").matcher(test).find());
assertTrue("4 letters matched", Pattern.compile("plusieurs pers\\p{Alpha}{1,100}\\b").matcher(test).find());
assertTrue("5 letters matched", Pattern.compile("plusieurs per\\p{Alpha}{1,100}\\b").matcher(test).find());
assertTrue("6 letters matched", Pattern.compile("plusieurs pe\\p{Alpha}{1,100}\\b").matcher(test).find());
assertTrue("7 letters matched", Pattern.compile("plusieurs p\\p{Alpha}{1,100}\\b").matcher(test).find());
assertTrue("8 letters matched", Pattern.compile("plusieurs \\p{Alpha}{1,100}\\b").matcher(test).find());

// match the negative pattern (without s or x) with curly braces
assertTrue("no letters matched, negative", Pattern.compile("plusieurs (?!personne[sx])\\w+").matcher(test).find());
assertTrue("1 letters matched, negative", Pattern.compile("plusieurs (?!personn\\p{Alpha}{1,100}[sx])\\w+").matcher(test).find());
assertTrue("2 letters matched, negative", Pattern.compile("plusieurs (?!person\\p{Alpha}{1,100}[sx])\\w+").matcher(test).find());
assertTrue("3 letters matched, negative", Pattern.compile("plusieurs (?!perso\\p{Alpha}{1,100}[sx])\\w+").matcher(test).find());
assertTrue("4 letters matched, negative", Pattern.compile("plusieurs (?!pers\\p{Alpha}{1,100}[sx])\\w+").matcher(test).find());
assertTrue("5 letters matched, negative", Pattern.compile("plusieurs (?!per\\p{Alpha}{1,100}[sx])\\w+").matcher(test).find());
// the assertion below fails (is false) for reasons unknown
assertTrue("6 letters matched, negative", Pattern.compile("plusieurs (?!pe\\p{Alpha}{1,100}[sx])\\w+").matcher(test).find());
assertTrue("7 letters matched, negative", Pattern.compile("plusieurs (?!p\\p{Alpha}{1,100}[sx])\\w+").matcher(test).find());
assertTrue("8 letters matched, negative", Pattern.compile("plusieurs (?!\\p{Alpha}{1,100}[sx])\\w+").matcher(test).find()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:26:22.070

让我们看看前瞻如何匹配：

```
pe           literal, matches "pe"
r            matches \p{Alpha}{1,100}
s            matches [sx] 
```

因此，负前瞻不匹配（字符串的尾部 ,`"onne sont"`在这里无关紧要）。

如果您的想法是下一个单词不应以 s 或 x 结尾，那么放在后面可能会有所帮助`\\b`。`[sx]`永远记住，负前瞻不会对失败*感到抱歉*，也不会回溯以找出如何*使您的正则表达式不匹配*。

UPD：让我们仔细看看案例 5 以将其与案例 6 进行比较。这里我们使用*假设*匹配（对于前瞻中的表达式），因此我们必须考虑它如何（几乎）发生的几种变体。

```
per          literal, would match "per" -- it's always so
             -- let's try to imagine how the rest could match:
sonn         would match \p{Alpha}{1,100}
e            wouldn't match [sx], FAIL
             -- or maybe
s            would match \p{Alpha}{1,100}
o            wouldn't match [sx], FAIL
             -- or maybe yet
so           would match \p{Alpha}{1,100}
n            wouldn't match [sx], FAIL. 
```

如果第二个词是“个性化”，我们将有另一个有趣的**冒险**。

UPD2：评论中的讨论促使我在这里添加一个概括：

正则表达式之所以有吸引力，是因为它们具有人类思维的一个重要特征：[确认偏差](http://en.wikipedia.org/wiki/Confirmation_bias)。当我们写正则表达式时，我们*希望*它们匹配；即使我们的工作是防止无效输入，我们大部分时间都会考虑*有效输入。*正则表达式匹配器通常共享这个属性：它*想要*匹配并且*讨厌*失败。这就是为什么子表达式 like`\p{Alpha}{1,100}`并不意味着“在尝试匹配输入的其余部分之前吃掉可用的最长的 Alpha 块”。粗略地说，“考虑长度在 [1,100] 内的每个*可能*的 Alpha 块，为整个表达式找到匹配的方法”。

这就是为什么使用正则表达式时，很容易忽略复杂表达式的*误报*：被错误接受的无效输入。这个问题不会出现，当我们使用负前瞻时它会变得*更加明显：*

在否定前瞻中，正则表达式匹配器*想要*匹配内部表达式（使外部表达式失败）。人类程序员仍然*想*匹配外部表达式；正如我们在示例中看到的，这个因素确实会影响我们对内在表达的推理。我们认为它*不应该如此努力地匹配*（例如，它应该以一种愚蠢的方式处理子表达式，立即吃掉尽可能长的输入）。匹配器像往常一样工作，但*我们*对理想行为的想法现在与*它的*算法不同步。内在表达的误报（很难注意到），成为外在表达的假阴性（我们注意到并讨厌）。

# segmentation-fault - 使用电子围栏时的Openmpi segfault

> ID：14367857
> 
> 赞同：3
> 
> 时间：2013-01-16T21:07:08.210
> 
> 标签：segmentation-fault, mpi, openmpi, electric-fence

我试图在我的一个使用电围栏的程序中找到一些内存错误。我的程序使用 OpenMPI，当我尝试运行它时，它会出现以下回溯：

```
Program received signal SIGSEGV, Segmentation fault.
2001    ../sysdeps/x86_64/multiarch/memcpy-ssse3-back.S: No such file or directory.
__memcpy_ssse3_back () at ../sysdeps/x86_64/multiarch/memcpy-ssse3-back.S:2001
(gdb) bt
#0  __memcpy_ssse3_back ()
    at ../sysdeps/x86_64/multiarch/memcpy-ssse3-back.S:2001
#1  0x00007ffff72d6b7f in ompi_ddt_copy_content_same_ddt ()
   from /usr/lib/libmpi.so.0
#2  0x00007ffff72d4d0d in ompi_ddt_sndrcv () from /usr/lib/libmpi.so.0
#3  0x00007ffff72dd5b3 in PMPI_Allgather () from /usr/lib/libmpi.so.0
#4  0x00000000004394f1 in ppl::gvec<unsigned int>::gvec (this=0x7fffffffdd60, 
    length=1) at qppl/gvec.h:32
#5  0x0000000000434a35 in TreeBuilder::TreeBuilder (this=0x7fffffffdc60, 
    octree=..., mygbodytab=..., mylbodytab=..., cellpool=0x7fffef705fc8, 
---Type <return> to continue, or q <return> to quit---
    leafpool=0x7fffef707fc8, bodypool=0x7fffef6bdfc0) at treebuild.cxx:93
#6  0x000000000042fb6b in BarnesHut::BuildOctree (this=0x7fffffffde50)
    at barnes.cxx:155
#7  0x000000000042af52 in BarnesHut::Run (this=0x7fffffffde50)
    at barnes.cxx:386
#8  0x000000000042b164 in main (argc=1, argv=0x7fffffffe118) at barnes.cxx:435 
```

我的代码的相关部分是：

```
 me = spr_locale_id();
   world_size = spr_num_locales();
   my_elements = std::shared_ptr<T>(new T[1]);

   world_element_pointers = std::shared_ptr<T*>(new T*[world_size]);

   MPI_Allgather(my_elements.get(), sizeof(T*), MPI_BYTE,
       world_element_pointers.get(), sizeof(T*), MPI_BYTE,
       MPI_COMM_WORLD); 
```

我不确定为什么 __memcpy_ssse3_back 会导致段错误。当我在没有电围栏的情况下运行时，这部分程序不会出现段错误。有谁知道发生了什么？我正在使用 openmpi 版本 1.4.3

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-21T09:45:36.227

错误有两个可能的原因：

在较旧的 Open MPI 版本中存在的数据复制例程中存在一个[错误](https://svn.open-mpi.org/trac/ompi/ticket/1903)，该错误似乎已在版本 1.4.4 中修复。如果是这种情况，将 Open MPI 库升级到更新版本将解决问题。

另一个可能的原因是`my_elements`类型为单个项目的数组`T`。在`MPI_Allgather`调用中，您传递一个指向该元素的指针，但您指定`sizeof(T*)`为要发送的字节数。默认情况下，Electric Fence 将新分配的内存放在内存页的末尾，然后立即插入不可访问的内存页。如果`T`碰巧比指针类型短（例如`T`is`int`并且您在 64 位 LP64 平台上运行），则将发生对不可访问的内存页面的访问，从而导致段错误。由于您的意图是实际发送指向数据的指针，因此您应该将`MPI_Allgather`指针传递给返回的值`my_elements.get()`。

顺便说一句，传递指针并不是一件好事。MPI 提供了自己的可移植 RDMA 实现。请参阅MPI 标准[的单面通信](http://www.mpi-forum.org/docs/mpi22-report/node229.htm#Node229)章节。它有点麻烦，但至少应该是便携的。

# jquery - 将hammer.js限制为水平滑动

> ID：14367858
> 
> 赞同：3
> 
> 时间：2013-01-16T21:07:08.307
> 
> 标签：jquery, hammer.js

我正在使用 Hammer.js，它似乎工作得很好，并且确实提到我可以限制水平和垂直方向，但我似乎无法让它禁用垂直滑动。基本上我有一个画布外导航，我只想使用水平滑动来显示。

```
(function ($) {
    var $sw = $('#left-content');

    $sw.on('swipe', function (event) {
        event.preventDefault();
        $('#ns-tool-bar, #left-content').toggleClass('slide');
    });
}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-24T01:57:00.290

您可以使用 event.direction

就像是

```
if(event.direction == 'right' || event.direction == 'left'){
    //do your stuff
} 
```

应该管用

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-29T15:53:22.753

我认为雪莉的回答已经过时了。我相信当前的 API 使用 event.gesture.direction。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-07T08:31:30.903

您也可以只注册`swipeleft`和`swiperight`活动。请参阅[源代码](https://github.com/EightMedia/hammer.js/blob/master/src/gestures.js#L203)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-18T18:01:39.907

绑定仅 swipeRight 或 swipeLeft 适用于 iOS 和（我相信）Android，但不适用于 IE。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-01T14:04:38.493

silent_shelly 的回答是正确的，尽管您也可以锁定拖动方向：

```
drag_block_horizontal: false
drag_block_vertical: false 
```

纪录片可以[在](https://github.com/EightMedia/hammer.js/wiki/Getting-Started)“手势选项”部分下找到

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-02-07T08:35:05.727

我结合了所有答案并添加了 event.gesture.preventDefault() 作为一个工作示例：

```
$sw.hammer({ drag_lock_to_axis: true }).on("swipe drag", function(event) {
    event.gesture.preventDefault();
    if (event.gesture.direction == Hammer.DIRECTION_LEFT || event.gesture.direction == Hammer.DIRECTION_RIGHT)
        if(event.type == "swipe"){
            swipeAction(event);
        } else {
            dragAction(event);
        }
    }
}); 
```

我还捕获了事件类型，因此您可以添加功能，例如在滑动时跳转整个容器宽度，但当然您可以忽略它。

# gcc - boost::program_options 给出 malloc 错误

> ID：14367866
> 
> 赞同：6
> 
> 时间：2013-01-16T21:07:42.473
> 
> 标签：gcc, boost, malloc, macports, boost-program-options

我有以下玩具程序，它在 OSX 10.6 上的 MacPorts gcc 出现错误

```
#include <boost/program_options.hpp>
namespace po = boost::program_options;

#include <iostream>
using namespace std;

int main(int ac, char* av[])
{
        po::options_description desc("Allowed options");
        desc.add_options()  ("help", "produce help message")  ;

        po::variables_map vm;        
        po::store(po::parse_command_line(ac, av, desc), vm);
        po::notify(vm);    

        if (vm.count("help")) {
            cout << desc << "\n";
            return 0;
        }
        cout << "Program continues\n";
        return 0;
} 
```

我安装了 MacPorts 的 boost 1.52 版。我将程序编译为

```
g++ a.cpp -lboost_program_options-mt -L/opt/local/lib -g -O0 
```

它编译得很好：

```
$ ./a.out
Program continues 
```

但它无法打印帮助信息：

```
$ ./a.out --help
Allowed options:
a.out(40110) malloc: *** error for object 0x7fff70ca3500: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug
Abort trap 
```

我听说如果库是用不同版本的 gcc 编译的，而不是用于构建程序的版本，就会发生这样的事情。我该如何检查？我有

```
$ g++ --version
g++ (MacPorts gcc47 4.7.2_2) 4.7.2 
```

**更新**：这似乎适用于具有较旧 Boost 的 Linux 机器。

**更新 2**：gdb 的输出如下

```
(gdb) run 
Starting program: /Users/yasir/Downloads/mask.util/a.out --help
Reading symbols for shared libraries ++++.. done
Allowed options:
a.out(42256) malloc: *** error for object 0x7fff70ca3500: pointer being freed was not allocated
*** set a breakpoint in malloc_error_break to debug

Program received signal SIGABRT, Aborted.
0x00007fff821030b6 in __kill ()
(gdb) bt
#0  0x00007fff821030b6 in __kill ()
#1  0x00007fff821a39f6 in abort ()
#2  0x00007fff820bb195 in free ()
#3  0x00000001001188b4 in std::basic_stringbuf<char, std::char_traits<char>, std::allocator<char> >::overflow ()
(gdb) 
```

**更新 3**：该程序在 Xcode gcc42 上运行良好，该问题仅在 MacPorts gcc 上出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:27:10.970

您的错误最可能的原因是 program_options 头文件中提供的接口与编译库中拾取的实现之间存在不匹配。这可能是因为您不小心从不同版本的 boost 中获取了已编译的库，也可能是因为您使用不同版本的编译器编译了库，而不是您用于编译测试程序的库。

# php - 如何使用 PHP 从包含其他列文本的表格中获取图像

> ID：14367872
> 
> 赞同：0
> 
> 时间：2013-01-16T21:08:00.967
> 
> 标签：php, mysql, image, blob

各位开发者您好！我正在尝试从我的数据库中检索图像以将其包含在我创建的这个表中。我在 Google 上查找的所有示例都是从仅包含图像的 1 个表中检索图像，但在这种情况下，我无法使其正常工作。

```
<?php
                    $Con = mysql_connect('localhost','root','');
                      if($Con === false)
                      {
                        echo "Not Connected";
                      }

                      else
                      {

                        $select = mysql_select_db("symfony");
                        $TableName = "main";
                        $SQLstring = "SELECT * FROM $TableName ";
                        $QueryResult = mysql_query($SQLstring);
                        $Row = mysql_fetch_row($QueryResult);
                            do {

                                echo "<div class='art-content-layout'>";
                                echo "<div class='art-content-layout-row'>";
                                echo "<div class='art-layout-cell' style='width: 33%'>";
                                echo"   <p><img width='259' height='194' class='art-lightbox' name='image' src='../images/3.jpg'><br></p>";
                                echo "</div>";
                                echo "<div class='art-layout-cell' style='width: 67%'>";
                                echo "<p></p>";
                                echo "<table border>";
                                echo "<tbody>";
                                echo "<tr>";
                                echo "<tr>";
                                    echo "<th colspan='3' align='left'><b> Owner : $Row[0]</b></th>";
                                echo "</tr>";
                                echo "<tr>";
                                    echo "<td colspan='3'><b>$Row[1]:</b>";

                                   echo  "</td>";
                                echo "</tr>";

                                echo "<tr>";
                                    echo "<td><b>Price:$Row[9] US Dollar </b></td>";
                                echo "</tr>";
                                echo "<tr>";
                                    echo "<td><b> City: $Row[4] </br> Hood: $Row[4] </br> Qdr: $Row[5] </br> Street:$Row[6] </br> Property Number :$Row[7] </br> Room Number : $Row[8] </b></td>";
                                    echo" <td><b>Description : $Row[10] </b></td>";

                                echo "</tr>";
                                echo"<tr>";
                                    echo" <td><b>Type : $Row[12] </b></td>";
                                    echo "<td><b>Contact : $Row[1] </b></td>";
                                echo "</tr>";
                                echo "</tr>";
                                echo "</tbody>";
                                echo "</table> <br><p></p>";

                                echo "</div>";
                                echo "</div>";
                                echo "</div>";
                                $Row = mysql_fetch_row($QueryResult);
                                } while ($Row);     
                        }   
                ?> 
```

我试图这样做，它仍然没有工作：

```
$img = $Row[15];
//column 15 is the Blob the image
                        $img = mysql_fetch_array($QueryResult);
                            $content = $img['15'];
                            //header('Content-type: image/jpg'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:25:11.763

我假设您只是在回显期望看到图片的图像的二进制源。这不是图片的工作方式。通常在这种情况下，您会在表格中回显一个图像标签，该标签链接到另一个传递 id（或其他唯一标识符）的脚本。另一个脚本从数据库中提取图像并发送正确的标头。就像是：

```
//in the table where you want to show the image
//assuming id is in column 0, change to whatever 
echo "<img src='image.php?id={$Row[0]}'>"; 
```

然后创建一个脚本 image.php

```
//send out image header
header('Content-type: image/jpg');

//get the id from the url
$id = isset($_GET['id'])?(int)$_GET['id']:0;

if($id > 0){
    //query database for image blob
    $sql = "SELECT `imageData` FROM `table` WHERE `id`={$id}";

    if($numRows){
        //echo out the blob data
        echo $Row[0];
    } else {
        //no row found in database, echo default image
        readfile("/path/to/noImage.jpg");
    }
} else {
    //invalid id passed, echo default image
    readfile("/path/to/noImage.jpg");
} 
```

你仍然需要做连接/查询的事情，实际上你应该使用 PDO/mysqli 因为 mysql_* 函数已被弃用并标记为删除。这应该让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:27:06.703

你不能做你想做的事。您需要将逻辑分成两个脚本。确实没有办法在与其他数据相同的过程中获取图像数据，因为 IMG 标签被提供了一个不是原始数据的 SRC，而是要求服务器提供图像。

在生成 HTML 的当前脚本中，您只需要让 IMG 标记将 SRC 引用为执行检索图像数据工作的新脚本。就像是：

```
echo"   <p><img width='259' height='194' class='art-lightbox' name='image' src='display_image.php?id=" . $Row[0] . "'><br></p>"; 
```

我假设 $Row[0] 持有当前记录的唯一键。然后编写另一个脚本 display_image.php，它只获取图像数据并使用正确的标题来显示它：

```
$currentId = $_REQUEST['id'];
//  Your query code would be here using the $currentId to just retrieve the desired record
$SQLstring = "SELECT your_image_column_name FROM $TableName WHERE id = $currentId";
$QueryResult = mysql_query($SQLstring);
$img = mysql_fetch_array($QueryResult);
$content = $img['your_image_column_name'];
header('Content-type: image/jpg');
echo $content; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:15:00.410

如果要在字符串中使用数组项，请使用`{`和`}`围绕它，或使用字符串连接：

```
$row = array(1,2,3);
echo "this is item1: {$row[0]}";
echo "and this is item2: ".$row[1]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T00:35:23.730

我讨厌成为放弃的孩子，但在创建 image.php 之后

```
<?php
                $Con = mysql_connect('localhost','root','');
                  if($Con === false)
                  {
                    echo "Not Connected";
                  }
                  else
                  {
                        $select = mysql_select_db("symfony");
                        $id = $_REQUEST['id'];
                        $query = mysql_query("SELECT image1 FROM main WHERE id='".$id."'");
                        $row = mysql_fetch_array($query);
                        $content = $row['image1'];
                        header('Content-type: image/jpg');
                                 echo $content;
                  }
            ?> 
```

然后是html

```
 echo"   <p><img width='259' height='194' class='art-lightbox' name='image' src='image.php?id=".$Row[16]."'><br></p>";
// where $row[16] is the image Column 
```

之后我收到一个错误：

> 图像无法显示，因为它包含错误

我尝试上传不同的类型。我不知道在数据库中设置 mime 类型是否也很重要。我什至使用了这个家伙教程：

[第 1 部分](http://forum.codecall.net/topic/40286-tutorial-storing-images-in-mysql-with-php/) [第 2 部分](http://forum.codecall.net/topic/40849-tutorial-storing-images-in-mysql-with-php-part-ii-display-your-images/)

现在毕竟这一切！我的解决方案只是将文件移动到服务器上的某个位置！保存名称而不是 Blob，然后检索图像的名称，这将是文件夹上的路径！

# regex - 正则表达式不返回此语法的匹配项

> ID：14367875
> 
> 赞同：1
> 
> 时间：2013-01-16T21:08:19.313
> 
> 标签：regex

我想知道您是否可以提供建议，我主要在您的网站上搜索了类似的示例，但作为程序员，您的答案对于像我这样是这类事情的初学者的人来说似乎非常复杂

基本上我们有一个文件名结构，它最少有 5 个字符，最多有 6 个字符，并以`1`or开头`2`，然后是句号，`.`然后只有 1 到 5 之间的数字`.`

示例文件名如下

> 123456.1

我正在尝试创建一个正则表达式，当针对文本文件列表运行时，它将根据上面的语句选择正确的文件名，但是我已经尝试过了，但它不起作用

如果我尝试不使用`1|2`它来获取参考，但我需要第一个数字是`1`或`2`

```
^1|2\d{5,6}][\.][0-5]{1}$ 
```

希望这能从文本文件中挑选出任何以`1`或`2`和最小 5 位和最大 6 位数字开头的数字，然后是一个句号，然后是另一个数字

基本上我希望它挑选的一些例子如下：

```
123456.1  OK
25689.2   OK
061589.2  NOT OK
1235.6    NOT OK
765812.1  NOT OK
289657.5  OK 
```

我希望我提供了足够的信息，如果没有，请告诉我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:10:51.867

`^[12]\d{4,5}\.[1-5]$`应该管用。

简短说明：

*   `[12]`匹配 1 或 2
*   `\d{4,5}`匹配任何长度为最小 4 和最大 5 的（任何）数字序列（因为我们已经匹配了第一个数字`[12]`）
*   `\.`匹配一个句点
*   `[1-5]`匹配 1 到 5 之间的任何数字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:37:43.833

如果您实际上是在验证数字，为什么不实际验证数字呢？（这个答案可能有点矮）

```
 class Program
    {
        private static readonly string[] Items =
        {
            "123456.1",
            "25689.2",
            "061589.2", //NOT
            "1235.6", //NOT
            "765812.1", //NOT
            "289657.5"
        };
        static void Main()
        {
             foreach (string item in Items)
             {
                 Console.WriteLine(Validate(item));
             }
            Console.ReadKey();
        }
        static bool Validate (string item)
        {
            decimal d;
            if (decimal.TryParse(item,out d))
            {
                if (((d < 10000.1m) || (d > 299999.5m)) ||
                    ((d > 29999.5m) &&  (d < 100000.1m))) return false;
                // validate fraction here
                var i = d - decimal.Truncate(d);
                return (i >= 0.1m && i <= 0.5m);
            } 
            return false;
        }
    } 
```

# django - django 使用 mod_wsgi 在 apache 上运行会导致任何内存泄漏吗？

> ID：14367884
> 
> 赞同：-1
> 
> 时间：2013-01-16T21:08:40.920
> 
> 标签：django, apache, mod-wsgi

目前的配置我已经完美运行了一年多。

我的 apache 配置为包含这个 mod_wsgi 配置：

```
 Alias /uploads/ "/home/django/myproject/uploads/"
<Directory "/home/django/myproject/uploads/">
    Order allow,deny
    Options Indexes
    Allow from all 
    IndexOptions FancyIndexing
</Directory>

Alias /static/ "/home/django/myproject/sitestatic/"
<Directory  "/home/django/myproject/sitestatic/">
    Order allow,deny
    Options Indexes
    Allow from all 
    IndexOptions FancyIndexing
</Directory>

WSGIScriptAlias / "/home/django/myproject/apache/django.wsgi"
<Directory "/home/django/myproject/apache">
    Order deny,allow
    Allow from all 
</Directory> 
```

我的 /home/django/myproject/apache/django.wsgi 看起来像这样：

```
import os
import sys 

sys.path.append('/home/django')
sys.path.append('/home/django/myproject')

os.environ['DJANGO_SETTINGS_MODULE']='myproject.settings'

import djcelery
djcelery.setup_loader()

import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

我猜很典型。

在我的 httpd.conf 我有这一行：

```
 Include "/home/django/myproject/apache/apache_django_wsgi.conf" 
```

每当加载此 conf 时，apache 进程都会以 100% 的速度跳转，导致我出现 MemoryErrors ...

当我注释掉上面的 include 行时，启动 apache 很顺利，而且应该是内存明智的。

我在 apache 日志中找不到任何内容，甚至将其设置为调试模式。

很明显，这个内存泄漏，如果我可以这样称呼它，它是由 mod_wsgi 或我的 django 应用程序引起的。

您建议如何跟踪错误/隔离问题？任何反馈表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:22:26.197

问题是我的一个 django 应用程序中的一个错误功能，它将所有内容都保存在内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:42:30.640

您可以在 apache 配置中配置 mod_wsgi 使用的资源。试试这个

```
 WSGIDaemonProcess yourname.com processes=1 threads=2 display-name=%{GROUP}
    WSGIProcessGroup yourname.com
    WSGIScriptAlias / /home/django/myproject/apache/django.wsgi 
```

您可以设置进程数和线程数等。在此处查看选项[http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess](http://code.google.com/p/modwsgi/wiki/ConfigurationDirectives#WSGIDaemonProcess)

# python - 在没有记录器实例的情况下将自定义处理程序添加到 Python 记录模块？

> ID：14367885
> 
> 赞同：0
> 
> 时间：2013-01-16T21:08:41.827
> 
> 标签：python, logging

[这是对如何从 Python 日志记录模块获得非阻塞/实时行为](https://stackoverflow.com/questions/14349563/how-to-get-non-blocking-real-time-behavior-from-python-logging-module-output-t/14353888#14353888)的答案的后续问题？[（输出到 PyQt QTextBrowser）](https://stackoverflow.com/questions/14349563/how-to-get-non-blocking-real-time-behavior-from-python-logging-module-output-t/14353888#14353888)由[X.Jacobs](https://stackoverflow.com/users/1006989/x-jacobs)提供。

在 Python 日志记录模块中，添加自定义处理程序的常规方法是定义一个继承自的处理程序类`logging.Handler`（我们称之为 this `CustomLogHandler`）。要将其附加到`logging`进程，我们通常这样做：

```
import logging

class CustomLogHandler(logging.Handler):
    ... (some code here)...

logger = logging.getLogger()
logger.addHandler(CustomLogHandler) 
```

where`addHandler`是`logger`实例的方法。

**问题**：假设我们**不想**得到一个`logger`（即我们**不想**做上面的事情）。是否可以将其附加`CustomLogHandler`到`logging`自身？

请参阅[如何从 Python 日志记录模块获得非阻塞/实时行为中的评论？（输出到 PyQt QTextBrowser）](https://stackoverflow.com/questions/14349563/how-to-get-non-blocking-real-time-behavior-from-python-logging-module-output-t/14353888#14353888)作为上下文。

前提是可以在不引用`logger`实例的情况下使用自定义处理程序。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:12:15.493

`logging.getLogger()`返回根记录器实例，该对象没有进一步的“向上”，并且没有其他任何*东西*可以将处理程序附加*到*根之外。

模块级功能，如`logging.error()`使用根记录器；引用[文档](http://docs.python.org/2/library/logging.html#logging.error)：

> `logging.error(msg[, *args[, **kwargs]])`
> 在根记录器上记录级别为 ERROR 的消息。参数被解释为 debug()。

换句话说，像`logging.error()`简单地调用这样的函数`getLogger().error()`。

将您的附加`CustomLogHandler`到根记录器是将其添加到模块的正确方法。

# c++ - 实现涉及 Windows HANDLE 对象的复制构造函数

> ID：14367888
> 
> 赞同：1
> 
> 时间：2013-01-16T21:08:50.453
> 
> 标签：c++, constructor, copy, winsock, handle

我是使用win32 API的新手，所以请多多包涵。

我目前正在处理一个涉及 Winsock 的 C++ 项目，但我对使用事件对象 HANDLE 类型的复制构造函数的正确方法感到困惑。

概述（代码如下）：在尝试使用 IOCP 并保持一切可扩展性时，我有一个线程来检查多个接受事件。每个 ServerConnection 对象都拥有自己的由 WSACreateEvent() 创建的接受事件对象、其关联的低级套接字和相关的状态/变量。

我的问题是，我试图实现“三巨头”，但我不太确定应该如何“复制”句柄。

DuplicateHandle() 似乎创建了一个新句柄，但它指向同一个对象，但这对于 ServerConnection “副本”而言没有意义（我们想要一个具有相同状态的新对象，对吧？）。

至于使用复制赋值运算符，我不确定它会对事件对象 HANDLE 做什么。

服务器连接.h

```
class ServerConnection
{
public:
    //...constructors, destructors, etc...

    virtual HANDLE getAcceptEvent();

    virtual void setAcceptEvent(HANDLE eventObj);

protected:

private:

    HANDLE assocAcceptEvent;

    //..other variables...
}; 
```

服务器连接.cpp

```
ServerConnection::ServerConnection(ServerConnection &that)
{
   //blah blah...other vars

   //? This does not seem right as the HANDLE is logically a pointer;
   //Assigning like this just points another handle to the same event obj
   //If the other ServerConnection object closes the handle...not good.
   this.assocAcceptEvent = that.assocAcceptEvent;

   //The only thing that make slightly more sense, is just to create a whole new one
   //if I answered my own question, then great...but I wanted to make sure
   this.assocAcceptEvent = WSACreateEvent(); 

   //assume check for WSACreateEvent failing with WSAGetLastError() and
   //handle appropriately
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:13:07.940

您无法以合理的方式复制句柄（即，`DuplicateHandle`不做您想做的事）这一事实使我认为该对象不应该是可复制的......

您必须问自己的问题是：ServerConnection 的副本实际上意味着什么？你会在哪里/如何使用它？

我不知道答案，因为我不知道您的整体设计对 ServerConnection 意味着什么 - 但它说 ServerConnection 的事实让我认为它是“连接”到某物的东西，因此不能轻易复制。

# javascript - Javascript下雪功能？

> ID：14367889
> 
> 赞同：0
> 
> 时间：2013-01-16T21:09:03.993
> 
> 标签：javascript

这就是我正在做的功能，我唯一想要改变的是让雪出现在一切的后面；所以它不在 div 之类的之上；我只是希望它出现在一切的背景中。这是代码。

```
 <script type="text/javascript">
    // Set the number of snowflakes (more than 30 - 40 not recommended)
    var snowmax=35

    // Set the colors for the snow. Add as many colors as you like
    var snowcolor=new Array("#aaaacc","#ddddff","#ccccdd","#f3f3f3","#f0ffff")

    // Set the fonts, that create the snowflakes. Add as many fonts as you like
    var snowtype=new Array("Times","Arial","Times","Verdana")

    // Set the letter that creates your snowflake (recommended: * )
    var snowletter="*"

    // Set the speed of sinking (recommended values range from 0.3 to 2)
    var sinkspeed=0.6

    // Set the maximum-size of your snowflakes
    var snowmaxsize=30

    // Set the minimal-size of your snowflakes
    var snowminsize=8

    // Set the snowing-zone
    // Set 1 for all-over-snowing, set 2 for left-side-snowing
    // Set 3 for center-snowing, set 4 for right-side-snowing
    var snowingzone=1

    ///////////////////////////////////////////////////////////////////////////
    // CONFIGURATION ENDS HERE
    ///////////////////////////////////////////////////////////////////////////

    // Do not edit below this line
    var snow=new Array()
    var marginbottom
    var marginright
    var timer
    var i_snow=0
    var x_mv=new Array();
    var crds=new Array();
    var lftrght=new Array();
    var browserinfos=navigator.userAgent
    var ie5=document.all&&document.getElementById&&!browserinfos.match(/Opera/)
    var ns6=document.getElementById&&!document.all
    var opera=browserinfos.match(/Opera/)
    var browserok=ie5||ns6||opera

    function randommaker(range) {
            rand=Math.floor(range*Math.random())
        return rand
    }

    function initsnow() {
            if (ie5 || opera) {
                    marginbottom = document.body.scrollHeight
                    marginright = document.body.clientWidth-15
            }
            else if (ns6) {
                    marginbottom = document.body.scrollHeight
                    marginright = window.innerWidth-15
            }
            var snowsizerange=snowmaxsize-snowminsize
            for (i=0;i<=snowmax;i++) {
                    crds[i] = 0;
                lftrght[i] = Math.random()*15;
                x_mv[i] = 0.03 + Math.random()/10;
                    snow[i]=document.getElementById("s"+i)
                    snow[i].style.fontFamily=snowtype[randommaker(snowtype.length)]
                    snow[i].size=randommaker(snowsizerange)+snowminsize
                    snow[i].style.fontSize=snow[i].size+'px';
                    snow[i].style.color=snowcolor[randommaker(snowcolor.length)]
                    snow[i].style.zIndex=1000
                    snow[i].sink=sinkspeed*snow[i].size/5
                    if (snowingzone==1) {snow[i].posx=randommaker(marginright-snow[i].size)}
                    if (snowingzone==2) {snow[i].posx=randommaker(marginright/2-snow[i].size)}
                    if (snowingzone==3) {snow[i].posx=randommaker(marginright/2-snow[i].size)+marginright/4}
                    if (snowingzone==4) {snow[i].posx=randommaker(marginright/2-snow[i].size)+marginright/2}
                    snow[i].posy=randommaker(2*marginbottom-marginbottom-2*snow[i].size)
                    snow[i].style.left=snow[i].posx+'px';
                    snow[i].style.top=snow[i].posy+'px';
            }
            movesnow()
    }

    function movesnow() {
            for (i=0;i<=snowmax;i++) {
                    crds[i] += x_mv[i];
                    snow[i].posy+=snow[i].sink
                    snow[i].style.left=snow[i].posx+lftrght[i]*Math.sin(crds[i])+'px';
                    snow[i].style.top=snow[i].posy+'px';

                    if (snow[i].posy>=marginbottom-2*snow[i].size || parseInt(snow[i].style.left)>(marginright-3*lftrght[i])){
                            if (snowingzone==1) {snow[i].posx=randommaker(marginright-snow[i].size)}
                            if (snowingzone==2) {snow[i].posx=randommaker(marginright/2-snow[i].size)}
                            if (snowingzone==3) {snow[i].posx=randommaker(marginright/2-snow[i].size)+marginright/4}
                            if (snowingzone==4) {snow[i].posx=randommaker(marginright/2-snow[i].size)+marginright/2}
                            snow[i].posy=0
                    }
            }
            var timer=setTimeout("movesnow()",50)
    }

    for (i=0;i<=snowmax;i++) {
            document.write("<span id='s"+i+"' style='position:absolute;top:-"+snowmaxsize+"'>"+snowletter+"</span>")
    }
    if (browserok) {
            window.onload=initsnow
    }

    </script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:11:24.680

改变

```
snow[i].style.zIndex=1000 
```

将其设置为

```
snow[i].style.zIndex=-1; 
```

# java - Java打印数组错误

> ID：14367890
> 
> 赞同：1
> 
> 时间：2013-01-16T21:09:14.087
> 
> 标签：java

我是Java的新手，写了这个类来尝试几个数组选项..你能请教printarray方法中的错误是什么..Eclipse给我指出了一个错误，但我无法调试

```
public class arrarytest {
public static void main(String args[]){
    int[] x = {1,2,3,4};
    for(int y:x){
        System.out.println(y);
    }
    double[] mylist = {1.9,2.9,3.9,4.9};

    for (int i =0; i<mylist.length; i++){
        System.out.println(mylist[i]);
    }

    double total = 0;
    for (int i =0; i < mylist.length; i++){
        total +=mylist[i];
    }
    System.out.println("Total is="+ total);

    public static void printArray(int[] array) {
          for (int i = 0; i < array.length; i++) {
            System.out.print(array[i] + " ");
          }
        }

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:10:24.590

您尚未指定 eclipse 显示的错误是什么，但一个问题似乎是：

```
 public static void printArray(int[] array) {
          for (int i = 0; i < array.length; i++) {
            System.out.print(array[i] + " ");
          }
        } 
```

您在 main 方法中有上述方法。将其移到主要方法之外。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:11:55.047

格式化并更正了一些括号：

```
public static void main(final String args[]) {
    final int[] x = { 1, 2, 3, 4 };
    for (final int y : x) {
        System.out.println(y);
    }
    final double[] mylist = { 1.9, 2.9, 3.9, 4.9 };

    for (int i = 0; i < mylist.length; i++) {
        System.out.println(mylist[i]);
    }

    double total = 0;
    for (int i = 0; i < mylist.length; i++) {
        total += mylist[i];
    }
    System.out.println("Total is=" + total);
}

public static void printArray(final int[] array) {
    for (int i = 0; i < array.length; i++) {
        System.out.print(array[i] + " ");
    }
} 
```

输出：

```
1
2
3
4
1.9
2.9
3.9
4.9
Total is=13.6 
```

# java - 使用 ajax 调用将用户重定向到不同页面的 .php 文件的问题

> ID：14367896
> 
> 赞同：0
> 
> 时间：2013-01-16T21:10:04.127
> 
> 标签：java, php, javascript, ajax, ssl

大家好，我正在创建一个 TOS 弹出窗口，如果用户拒绝 .ajax 函数，则会调用一个 .php 文件，该文件会破坏他们的会话并将它们发送回登录页面。

这是一个受 SSL 锁保护的站点，所以我收到一条错误消息：

`where the ajax function is that gets the other page with the destroy session and redirect`显示不安全内容的页面来自`the login page which is suppose to be sent to, the user.`

功能：

```
function decline(){

 $("#dialog-container").dialog( 'close' );
 /*****run ajax to kill session of current user and return to login page ******/
  $.ajax({ url: 'termsofservice/declinedkill.php',
         data: {},
         type: 'get',
         success: function(output) {
                  }
});
} 
```

这是被拒绝的kill.php：

```
session_start();
session_destroy();

header("location:/PCG/mainlogin.php"); 
```

我确保我没有使用任何包含其他文件等的链接......所以不确定出了什么问题。

谢谢，大卫:)

编辑：

这是我正在使用的更新链接：

```
$.ajax({ url: '//mysite.com/PCG/termsofservice/declinedkill.php',
         data: {},
         type: 'post',
         success: function(output) {
                  }
}); 
```

拒绝kill.php

```
header("location:https://mysite.com/PCG/mainlogin.php"); 
```

所以现在我没有收到该消息，但我没有被重定向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:13:05.780

如果您的站点在 SSL 上，您还需要调用脚本的 SSL URL。

所以像这样：

```
function decline(){

 $("#dialog-container").dialog( 'close' );
 /*****run ajax to kill session of current user and return to login page ******/
  $.ajax({ url: '//yoursite.com/termsofservice/declinedkill.php',
         data: {},
         type: 'get',
         success: function(output) {
                  }
});
} 
```

// 代替 https:// 或 http:// 它用于自动选择正确的 URI 方案。它们被称为相对于协议的 URL。[检查此链接](http://paulirish.com/2010/the-protocol-relative-url/)以了解有关它们的更多信息。

# c# - 如何从 WPF 中的列表框中删除选中的项目？

> ID：14367898
> 
> 赞同：3
> 
> 时间：2013-01-16T21:10:12.100
> 
> 标签：c#, wpf, list, itemtemplate

我一直在研究清单应用程序，并且正在使用 a`ListBox`来显示数据。我正在使用数组来填充`ListBox`基于用户按下的按钮。（我不知道这是否是最佳做法，但它现在有效。）用户完成这些步骤后，他可以使用以下命令删除项目：

```
private void SendSelected()
{
    while (lstToDo.SelectedItems.Count > 0)
    {
        lstToDo.Items.Remove(lstToDo.SelectedItem);
    }
} 
```

问题是今天我学会了如何使用下面的xaml将`CheckBox`es添加到我的：`ItemTemplate`

```
<ListBox.ItemTemplate>
    <DataTemplate>
        <StackPanel Orientation="Horizontal">
            <CheckBox Padding="10">                            
                <CheckBox.LayoutTransform>
                    <ScaleTransform ScaleX="1" ScaleY="1" />
                </CheckBox.LayoutTransform>
            </CheckBox>
            <TextBlock Text="{Binding}"/>
        </StackPanel>
    </DataTemplate>
</ListBox.ItemTemplate> 
```

现在删除按钮仍然有效......但是我想对其进行调整，以便它删除选中的项目而不是选定的项目。在winforms中，我曾经这样做过：

```
while (lstToDo.CheckedItems.Count > 0)
{
    lstToDo.Items.Remove(lstToDo.CheckedItems[0]);
} 
```

但在 WPF 中，显然这种方法不起作用，我只是不知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:15:29.457

您可以将复选框绑定到 ListBoxItem 的 IsSelected 属性

```
<DataTemplate>
    <CheckBox Content="{Binding .}" IsChecked="{Binding RelativeSource={RelativeSource AncestorType={x:Type ListBoxItem}}, Path=IsSelected" />
</DataTemplate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:16:20.770

对您的数据使用包装器，其中将包括特定于视图的数据，例如 IsChecked 属性。将属性绑定到CheckBox，然后你就可以找到所有被选中的项目...

简单示例：

```
public class CheckedItem<T> where T : class
{
    public T Data { get; set; }
    public bool IsChecked { get; set; }
} 
```

所以不是你的列表，`MyItem`而是创建一个列表`CheckedItem<MyItem>`

不只是相应地更改绑定：

```
<ListBox.ItemTemplate>
        <DataTemplate>
            <StackPanel Orientation="Horizontal">
                <CheckBox Padding="10" IsChecked={Binding IsChecked}>                            
                    <CheckBox.LayoutTransform>
                        <ScaleTransform ScaleX="1" ScaleY="1" />
                    </CheckBox.LayoutTransform>
                </CheckBox>
                <TextBlock Text="{Binding Data}"/>
            </StackPanel>
        </DataTemplate>
    </ListBox.ItemTemplate> 
```

如果您只想删除已检查的项目，您可以像这样获取它们：

```
List<CheckedItem<MyItem>> MyItems; 
...
...

foreach (var Item in MyItems)
{
    if (!Item.IsChecked)
    {
         lstToDo.Items.Remove(Item);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:27:27.397

```
 private void RemoveButton_Click(object sender, RoutedEventArgs e)
  {   
   foreach(CheckedItem in lstToDo.SelectedItems)
  {
    (lsttoDo.ItemsSource as List).Remove(CheckedItem);
  }
    lsttoDo.Items.Refresh();
 } 
```

在你的`c#`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T21:28:15.140

您可以只`Model`为您创建一个带有 Checked 属性的 Items，这样，如果您更改 UI 中的数据，`MyList`则会更新，如果您`MyList`在代码中更新项目，UI 将反映更改。

因此，如果您从中删除所有选中的项目，`MyList`它们将从`ListBox`

```
public partial class MainWindow : Window
{
    private ObservableCollection<MyObject> _myItems = new ObservableCollection<MyObject>();

    public MainWindow()
    {
        InitializeComponent();
        MyItems.Add(new MyObject { Name = "Test1" });
        MyItems.Add(new MyObject { Name = "Test2" });
        MyItems.Add(new MyObject { Name = "Test3" });
        MyItems.Add(new MyObject { Name = "Test4" });
    }

    public ObservableCollection<MyObject> MyItems
    {
        get { return _myItems; }
        set { _myItems = value; }
    }

    public void RemoveItems()
    {
        // Remove any items fro MyList that "IsChecked"
    }
}

public class MyObject : INotifyPropertyChanged
{
    private string _name;
    private bool _isChecked;

    public string Name
    {
        get { return _name; }
        set { _name = value; NotifyPropertyChanged("Name"); }
    }

    public bool IsChecked
    {
        get { return _isChecked; }
        set { _isChecked = value; NotifyPropertyChanged("IsChecked"); }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

xml:

```
<Window x:Class="WpfApplication8.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="199" Width="206" Name="UI">
    <Grid DataContext="{Binding ElementName=UI}">
        <ListBox ItemsSource="{Binding MyItems}">
            <ListBox.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <CheckBox Padding="10" IsChecked="{Binding IsChecked}">
                            <CheckBox.LayoutTransform>
                                <ScaleTransform ScaleX="1" ScaleY="1" />
                            </CheckBox.LayoutTransform>
                        </CheckBox>
                        <TextBlock Text="{Binding Name}"/>
                    </StackPanel>
                </DataTemplate>
            </ListBox.ItemTemplate>
        </ListBox>
    </Grid>
</Window> 
```

# regex - 匹配链接中的href和'a'值

> ID：14367901
> 
> 赞同：1
> 
> 时间：2013-01-16T21:10:13.877
> 
> 标签：regex, html-parsing

如何匹配链接中的 href 和 'a' vlaue？

所以从下面提取“www.google.com”和“test”：

```
<A HREF="www.google.com/test.html" title="test">test</A> 
```

这是我正在尝试的：`'<A HREF=(.+).html'`但它不匹配？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T04:22:47.923

试试这个：

```
<A.*HREF\s*=\s*(?:"|')([^"']*)(?:"|').*>(.*)<\/A> 
```

Group1 和 Group2 将为您提供所需的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T05:27:06.663

HTML 的正则表达式可能很难更改，但这种情况下的正则表达式会是；

[`<A HREF="\(.*\)" .*>\(.*\)</A>`](http://refiddle.com/gjv)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:12:33.523

因为文本`html`没有出现在您的标签中......

# ruby - Heroku - 在 Sinatra 应用程序中插入 config.ru 后应用程序错误 H10

> ID：14367906
> 
> 赞同：0
> 
> 时间：2013-01-16T21:10:30.793
> 
> 标签：ruby, heroku, sinatra

我试图将应用程序部署到 Heroku，但是当我推送我的 config.ru 文件时出现错误。

关注 Heroku 的日志：

```
2013-01-16T21:04:14+00:00 heroku[web.1]: Starting process with command `bundle exec rackup config.ru -p 29160`
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in `initialize'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `<main>'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in `instance_eval'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:137:in `start'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/config.ru:in `new'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:304:in `wrapped_app'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/bin/rackup:4:in `<top (required)>'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:40:in `parse_file'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:200:in `app'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/config.ru:in `<main>'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:40:in `eval'
2013-01-16T21:04:16+00:00 app[web.1]: /app/config.ru:1:in `block in <main>': undefined method `﻿require' for #<Rack::Builder:0x0000000281d6a0 @run=nil, @map=nil, @use=[]> (NoMethodError)
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:254:in `start'
2013-01-16T21:04:16+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/rackup:19:in `load'
2013-01-16T21:04:17+00:00 heroku[web.1]: State changed from starting to crashed
2013-01-16T21:04:17+00:00 heroku[web.1]: Process exited with status 1
2013-01-16T21:04:18+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=mazzocato.herokuapp.com fwd=201.95.41.116 dyno= queue= wait= connect= service= status=503 bytes=
2013-01-16T21:04:19+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=mazzocato.herokuapp.com fwd=201.95.41.116 dyno= queue= wait= connect= service= status=503 bytes=
2013-01-16T21:04:20+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/favicon.ico host=mazzocato.herokuapp.com fwd=201.95.41.116 dyno= queue= wait= connect= service= status=503 bytes=
2013-01-16T21:04:37+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=mazzocato.herokuapp.com fwd=201.95.41.116 dyno= queue= wait= connect= service= status=503 bytes=
2013-01-16T21:04:06+00:00 heroku[web.1]: Unidling 
```

按照我的 config.ru 文件：

```
require './app'
run Sinatra::Application 
```

我的主要文件是`app.rb`

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T08:51:28.110

（试图将此作为评论推送......格式不正确）

仅从日志中很难知道。你的 app.rb 文件里有什么？通常人们会这样做：

```
require 'rubygems'
require 'sinatra' # or Bundle.require
require 'app/mystuff'

run Sinatra::Application 
```

但是很难知道您是否需要 sinatra 以及“app.rb”文件中的所有其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T17:57:44.377

登录 heroku，然后将 dynos 的数量缩放为 0。保存，然后重新缩放。发生在我身上几次，每次都有效。

# php - PHP递归导航

> ID：14367910
> 
> 赞同：0
> 
> 时间：2013-01-16T21:10:36.350
> 
> 标签：php, mysql, recursion

所以我有这个关于递归数组的问题。我想要的是从我的数据库中获取一个带有 PHP 的递归数组，这样我就可以创建一个带有子菜单的导航菜单，而无需创建另一个表。

这是我到目前为止的功能；

```
function getMenu($tree = null){
        $tree2 = array();
        $tree = getPages();
        foreach($tree as $i => $item){
            if($item->parent_id == $item->ID){
                $tree2[$item->ID] = $item;
                $tree2[$item->ID]['submenu'] = getMenu($tree, $item->ID);
            }
        }

        return $tree2;
    } 
```

为了清楚起见，我并没有自己创建这个函数，而是从[http://www.jugbit.com/php/php-recursive-menu-with-1-query/](http://www.jugbit.com/php/php-recursive-menu-with-1-query/)得到它，并在我认为正确的地方进行了调整

$tree 变量来自这个函数；

```
function getPages($limit = null,$sort = null) {
     global $db;
     $query = $db->prepare('SELECT * FROM pages ORDER BY Position');
     $query->execute();
     return $query->fetchAll(PDO::FETCH_CLASS);
} 
```

现在，在过去的两天里，我一直在为此烦恼，试图弄清楚我做错了什么。

如果我打印 getMenu 函数，我得到的只是一个空数组，我不知道为什么。它确实让 foreach 正确，我认为这不是问题，但我不是 100% 确定..

我希望这个问题很清楚，但如果不是，我很抱歉，并会在需要的地方澄清。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T21:17:43.320

在`getPages`中，如果你希望它返回一个关联数组，那么你需要这样做：

```
return $query->fetchAll(PDO::FETCH_ASSOC); 
```

然后你`getMenu`会看起来像：

```
function getMenu($tree = null, $parent = 0) {
    if (!isset($tree))
        $tree = getPages();

    $tree2 = array();
    foreach($tree as $i => $item) {
        if($item['id'] == $parent) {
            $tree2[$item['id']] = $item;
            $tree2[$item['id']]['submenu'] = getMenu($tree, $item['id']);
        }
    }

    return $tree2;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T22:05:20.167

你的代码有很多问题......

首先，您使用以`$tree`3 种不同方式命名的变量，我很确定您正在覆盖该变量的内容而没有意义。

$tree 是函数的参数，然后在该行中被覆盖`$tree = getPages();`- 因此传入的任何参数都消失了。然后，您将它用作该行中的迭代器`foreach($tree as $i => $item)`- 同样，那里的任何内容都再次被覆盖。

看看如果你修复它会发生什么。

其次，您的 SQL 语句检索整个“页面”表，而不是当前页面的子表。

第三，当你递归时，你传入了第二个参数，但在函数声明中没有占位符，所以参数消失得无影无踪。

# php - 在 wordpress 通讯模板中使用 user_meta

> ID：14367914
> 
> 赞同：0
> 
> 时间：2013-01-16T21:10:46.270
> 
> 标签：php, wordpress, newsletter

是否有任何 wordpress 通讯插件允许使用他们的元数据（即 user_meta）向系统中的每个用户发送定制的电子邮件？

我正在尝试使用[http://wordpress.org/extend/plugins/newsletter/](http://wordpress.org/extend/plugins/newsletter/)，我在使用一些预定义变量的默认模板中看到了

*   {姓名}
*   {电子邮件}
*   {取消订阅网址}

根据接收用户，这些变量会随着发送的每封电子邮件而改变。

知道是否有任何方法可以使用`$user_ID`and`get_user_meta(...)`吗？

如果不可能，是否有任何时事通讯插件可以让我这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:05:07.573

我最终制作了一个插件来做到这一点

[http://wordpress.org/extend/plugins/personal-newsletter/](http://wordpress.org/extend/plugins/personal-newsletter/)

# java - 将预览图像坐标映射到图片图像坐标

> ID：14367919
> 
> 赞同：1
> 
> 时间：2013-01-16T21:10:55.167
> 
> 标签：java, android, camera, android-camera, android-view

我在这个问题上使用了我的 Google-fu 无济于事。`Camera`我的问题：我有一个 Android 应用程序，它使用下面的类在预览顶部覆盖一个椭圆`EllipseView`：

```
public class EllipseView extends View {

    private Paint paint = new Paint();

    public EllipseView(Context context) {
        super(context);
        paint.setAntiAlias(true);
        paint.setStyle(Paint.Style.STROKE);
        paint.setStrokeWidth(5.0f);
        paint.setColor(Color.GREEN);
        paint.setAlpha(0x60);
    }

    @Override
    public void onDraw(Canvas canvas) {
        Point canvasCenter = new Point(canvas.getWidth() / 2, canvas.getHeight() / 2);
        RectF oval = new RectF(canvasCenter.x - 100, canvasCenter.y - 75, canvasCenter.x + 100, canvasCenter.y + 75);

        canvas.drawOval(oval, paint);
        canvas.drawCircle(canvasCenter.x, canvasCenter.y, 5, paint);
    }

} 
```

`oval`是否可以在捕获的图片中找到相同的坐标？或者，我是否必须手动确定转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T11:04:32.957

*   获取预览表面的宽度和高度
*   获取所取位图的宽高
*   一个一个除以得到宽度转换和高度转换的比率
*   在预览表面中找到椭圆的位置
*   使用比率来计算它在位图上的位置
*   施展你的魔法...

    更详细的帮助[在这里](https://stackoverflow.com/questions/11334984/correspondence-between-imageview-coordinates-and-bitmap-pixels-android)

# iphone - xcode 崩溃报告

> ID：14367923
> 
> 赞同：1
> 
> 时间：2013-01-16T21:11:05.437
> 
> 标签：iphone, xcode, crash-reports

我在测试应用程序时确实收到了应用程序崩溃报告。我不太了解应用程序崩溃报告。使用 pjsip 连接到 voip 服务器并使用 lua 脚本进行一些 xml 解析。应用程序在测试期间崩溃。有人可以看看崩溃报告并说出报告的真实内容。是不是占用了太多内存？套接字超时的原因？这是什么意思？cpu过热？

```
Hardware Model:      iPhone3,1
OS Version:          iPhone OS 6.0.1 (10A523)
Kernel version:      Darwin Kernel Version 13.0.0: Wed Oct 10 23:29:02 PDT 2012; root:xnu-   2107.2.34~2/RELEASE_ARM_S5L8930X
Date:                2013-01-16 22:03:05 +0100
Exception Code:      0xdeadfeed
Reason:              Timeout on socket /var/run/lockdown/checkin.2732 waiting for     com.apple.crashreportmover to checkin for Xcode. spawn=1358370169 select=1358370169 now=1358370184
Thermal Level:       0
Thermal Sensors:    3264 3017 5310 3268 3323 3193 3161 3516 3500 3496 0 0 0 0 0 0 0 0 0 0 0
Frontmost process PID:    2952
Frontmost process PID:    66
Jetsam Level:              0
Free Pages:            36939
Active Pages:          24076
Inactive Pages:         9098
Purgeable Pages:        5613
Wired Pages:           17742
Speculative Pages:      5277
Throttled Pages:       36039
Busy Buffer Count:         0
Pages Wanted:              0
Pages Reclaimed:           0 
```

我找不到有关异常代码的信息

```
Exception Code:      0xdeadfeed 
```

# asp.net - 如何减少信号器中的额外响应？

> ID：14367924
> 
> 赞同：0
> 
> 时间：2013-01-16T21:11:11.123
> 
> 标签：asp.net, signalr

我做了一个聊天项目。当有人发送消息时，我运行此代码为所有客户端发送消息

```
public void SendMessage(string message)
{
  Clients.RecieveMessage(message);
} 
```

但是当 10 个用户同时发送消息时，所有客户端都会收到 10 个响应。
如何优化和减少这种反应？

我执行了以下代码

```
public void SendMessage(string message)
{
  Clients.RecieveMessage(message);
  Clients.RecieveMessage("Test");
} 
```

但我对每条消息都有单独的回复。
为什么 SignalR 不结合这些响应？如何将这些消息合并为一个响应？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:59:45.970

如果您想将这 10 条不同的消息组合成一个 PersistentResponse，SignalR 不会公开执行此操作的方法。但是，如果负载高到足以导致 SignalR 一次性将多条消息拉出总线，SignalR 将自动将消息组合成单个 PersistentResonse。

基本上，SignalR 将根据需要动态减少响应以处理负载，所有这些都应该对服务器和客户端上的 SignalR 开发人员完全透明。

如果问题是您认为使用长轮询传输的客户端过于频繁地发出请求，您可以手动设置 LongPollDelay。默认情况下，一旦收到消息，长轮询客户端将立即重新连接。使用非零 LongPollDelay，客户端将在延迟过去后重新连接。

```
// Set long-polling reconnect delay to two seconds (stored in milliseconds)
SignalR.Transports.LongPollingTransport.LongPollDelay = 2000; 
```

在延迟期间发送的所有消息将在后续请求中立即返回给长轮询客户端。如果在 LongPollDelay 期间始终有消息发送，这将有效地将长轮询传输转换为正常轮询传输。

自然地这样做会增加延迟。我还应该注意 LongPollDelay 仅在 JavaScript 客户端上受到尊重。因此，如果您使用的是 .NET 客户端，即使更改此设置，它也会在收到响应后立即继续重新连接。

# ios - 无法点击 UIScrollView 单元格内的 UITableView

> ID：14367927
> 
> 赞同：3
> 
> 时间：2013-01-16T21:11:26.670
> 
> 标签：ios, uitableview

我有一个包含 UITableView 的 UIScrollView。

表格视图中的单元格不响应点击。（即 -`(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`永远不会被调用）。

表格视图不需要滚动。

如果我将 UITableView 移出 UIScrollView （使其成为兄弟而不是孩子），那么它应该可以正常工作。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:16:39.937

我曾经尝试过同样的事情并且它奏效了。检查要设置的表视图的委托，而不仅仅是数据源。希望这可以帮助。

# javascript - 在网页底部和靠近顶部之间动态调整元素的大小

> ID：14367929
> 
> 赞同：3
> 
> 时间：2013-01-16T21:11:33.680
> 
> 标签：javascript, jquery, css, dynamic

我正在尝试让 iframe 从网页顶部动态调整 150px 的大小，然后向下移动到网页底部，无论某人的浏览器高度如何。主体的宽度和高度都设置为 100% 并隐藏溢出。

如果我的问题仍然没有意义[，这里有一些视觉效果](http://goawaymom.com/home.html) iframe 应该始终位于底部，距离顶部 150 像素，并且您应该始终能够看到 iframe 中底部元素的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:25:27.520

这是一个 Jquery 解决方案：

[jsfiddle](http://jsfiddle.net/YV3Bu/ "jsfiddle")

Javascript：

```
$(document).ready(function(){

var winHeight = $(window).height();

var frameHeight = winHeight - 150;

$("#frame").css("height",frameHeight+"px");

}); 
```

HTML-CSS

```
<iframe id="frame" src="http://goawaymom.com/messages.html"  />

#frame{
position:fixed;
top:150px;
overflow-x:scroll;

} 
```

#frame 位置不需要固定！

另外，我建议将其包装为一个函数并在窗口调整大小时触发，如下所示：

```
$(window).resize(function(){

whateverYouCalledIt();
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:16:24.780

用于`$(window).dimension();`获取窗口的尺寸。用于`$("#my_iframe").css();`设置高度和宽度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:21:08.443

如果您需要非 js 解决方案，请尝试将 iframe 包装到 div 中并使用 css：

```
div{
    position: absolute;
    top: 150px;
    bottom: 0;
    right: 0;
    left: 0;
}
iframe{
    width: 100%;
    height: 100%;
} 
```

# php - PayPal 的使用 PayPal 支付的沙箱在确认时挂起

> ID：14367930
> 
> 赞同：1
> 
> 时间：2013-01-16T21:11:43.613
> 
> 标签：php, paypal, sandbox

我正在尝试使用他们的 PHP API 将 PayPal 集成到我的网站中。我已经完成了创建沙盒商家和沙盒用户帐户的设置，并将所有必要的代码放入相关页面，并将我的用户/密码/密钥等包含在功能页面中。

然而，当我测试时，我看到正确的价格，登录，按“确认付款”，然后小弹出窗口关闭，我留在“加载”页面（URL [https://www.sandbox. paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s2](https://www.sandbox.paypal.com/webapps/checkout/webflow/sparta/expresscheckoutvalidatedataflow?execution=e1s2)）永远不会去任何地方。登录我的 PayPal Sandbox 账户显示交易不成功。

任何想法发生了什么？

解决了

原来我的服务器正在使用 open_basedir 禁用一个巧合命名的目录中的脚本（我在 Plesk 服务器上存在的祸根）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:32:17.517

PHP 的 open_basedir 正在禁用 php 确认脚本。巧合命名的目录。

# python - cgi python中的Webbrowser模块

> ID：14367931
> 
> 赞同：0
> 
> 时间：2013-01-16T21:11:46.683
> 
> 标签：python, cgi

我想制作一个简单的程序，从用户那里获取输入，然后打开一个包含该信息的网页。我是 cgi 的新手，但有一点 python 经验。我已经使用本地 cgi 服务器运行了以下脚本。

这是我启动网页的主文件的样子：

```
#!usr/bin/env/python
import re
import webbrowser
import cgi

form = cgi.FieldStorage()
input_from_user = form.getvalue('input_from_html')
product_numbers =  re.split(';', input_from_user)

for i in product_numbers:
    launch_code = "http://www.proshop.dk/" + i
    webbrowser.open_new_tab(launch_code) 
```

我有另一个负责表单和输入的文件：

```
#!/usr/bin/env python
print """Content-type: text/html

<form method="post" action="proshopapp.py">
<textarea name="input_from_html" cols="40" rows="5">
Enter comments here...
</textarea>
<br/>
<input type="submit" value="Submit">
</form>""" 
```

当我按下按钮时没有任何反应。但我已经测试过输入是否被接收。我希望网络浏览器启动我传递给它的链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T18:56:33.197

功能：

```
webbrowser.open_new_tab() 
```

将在脚本中工作以在本地浏览器中打开新选项卡；但是，这不适用于在客户端打开新浏览器选项卡的 cgi 脚本。相反，重写您的“proshopapp.py”文件以生成带有[javascript 的网页以打开新选项卡](https://stackoverflow.com/questions/4907843/open-url-in-new-tab-using-javascript)。

# php - 如何动态设置 if 和 elseif 条件？

> ID：14367932
> 
> 赞同：-1
> 
> 时间：2013-01-16T21:11:52.203
> 
> 标签：php

一般来说我以前做的是这个

```
if($_GET['page'] == 'hello') { //This page is always there
   echo 'hello';
} elseif($_GET['page'] == 'world') {
   echo 'world';
} elseif($_GET['page'] == 'demo') {
   echo 'demo';
} 
```

但是现在我动态地从我的数据库中获取这些页面名称，那么如果我动态地检索这些名称，我该如何设置呢？那么当我检索页面名称时如何制作这样的东西

`demo1`, `demo2`, `demo3`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:16:38.750

像这样的东西？

```
if ($_GET['page'] == 'hello') {
    echo 'hello';
} else {
    $pagesFromDatabase = array();
    foreach ($pagesFromDatabase as $page) {
        if ($page['slug'] == $_GET['page']) {
            // do something with page
        }
    }
} 
```

假设这`$pagesFromDatabase`是一个关联数组，其中每一行包含引用 $_GET 中可能的 'page' 参数的键 'slug'。

如果您指的是 Wordpress，您可以像这样检索页面：

```
get_page_by_path($_GET['page']); 
```

[http://codex.wordpress.org/Function_Reference/get_page_by_path](http://codex.wordpress.org/Function_Reference/get_page_by_path)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T21:17:21.777

You can use something like:

```
$page = array('hello');
#database loop
$page[] = $row[your_page_row];
#end database loop

if(in_array($_GET['page'], $page){#for strict comparison in_array($_GET['page'], $page, true);
    echo $_GET['page'];#you might need to use something like htmlspecialchars();
} 
```

# c# - 在定义的 While 之外使用类

> ID：14367935
> 
> 赞同：0
> 
> 时间：2013-01-16T21:11:59.837
> 
> 标签：c#, asp.net, sql, scope, datareader

我试图让我的应用程序检查我的 SQL 数据库中的 Admins 表，然后获取当前用户所属部门的名称。之后，我想检查另一个表并仅选择属于该部门的新闻项目。

下面显示了我将如何处理它，但是问题在于在 While 循环之外使用 mydepartment 变量（在第二个 SQL 查询中使用）。

除此以外，一切正常。任何帮助，将不胜感激。

```
public string username = System.Web.HttpContext.Current.User.Identity.Name.Split('\\')[1];
public string mydepartment;

protected void Page_Load(object sender, EventArgs e)
{
    lblUser.Text = username.ToString();
    SqlConnection myConnection = new SqlConnection();
    myConnection.ConnectionString = @"Data Source=.\SQLEXPRESS;AttachDbFileName=|DataDirectory|\Database1.mdf;Integrated Security=True;User Instance=True";

    myConnection.Open();
    string selectretrieveSQL = ("SELECT * FROM Admins WHERE userid = '" + username.ToString() + "'");
    SqlCommand retrieveinfocmd = new SqlCommand(selectretrieveSQL, myConnection);
    SqlDataReader reader = retrieveinfocmd.ExecuteReader();

    while (reader.Read())
    {
        ListItem newItem = new ListItem();
        newItem.Text = reader["Department"].ToString();
        newItem.Value = reader["userid"].ToString();
        UserIds.Items.Add(newItem);
        mydepartment = reader["Department"].ToString();
        mydepartmentlbl.Text = reader["Department"].ToString();
    }
    reader.Close();

    string selectNewsSQL = ("SELECT * FROM NewsItems WHERE Department = '" + mydepartment + "'");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T22:06:14.213

首先，我强烈建议您创建一些类来保存数据库对象的属性。

例如，您的**管理员**可能如下所示：

```
public class Admin
{
  public string Username { get; set; }
  public string Department { get; set; }

  // .. More properties here
} 
```

接下来，您应该创建一些方法来为您完成脏活。我将从数据库初始化开始：

```
static SqlConnection InitializeDatabase(string connectionString)
{
  var connection = new SqlConnection(connectionString);
  connection.Open();

  return connection;
} 
```

所以也许你有一个`Admin`适合你的方法：

```
static IEnumerable<Admin> GetAdminsByUsername(SqlConnection connection, 
                                              string username)
{
  var adminList = new List<Admin>();

  // You really should be using stored procedures here instead...
  var query = @"SELECT * FROM Admins WHERE Username = @Username";

  using (var command = new SqlCommand(query, connection))
  {
    command.Parameters.AddWithValue("@Username", username);

    using (var reader = command.ExecuteReader())
    {
      while (reader.Read())
      {
        var adminUsername = reader["Username"].ToString();
        var adminDepartment = reader["Department"].ToString();

        var admin = new Admin
        {
          Username = adminUsername,
          Department = adminDepartment
        };

        adminList.Add(admin);
      }
      reader.Close();

      return adminList;
    }
  }
} 
```

然后你`Page.Load`可能看起来像这样：

```
protected void Page_Load(object sender, EventArgs e)
{
  var connectionString = @"Data Source=.\SQLEXPRESS;AttachDbFileName=|DataDirectory|\Database1.mdf;Integrated Security=True;User Instance=True";

  using(var connection = InitializeDatabase(connectionString))
  {
    var admin = GetAdminsByUsername(connection, username).FirstOrDefault();

    if(admin == null)
    {
      // No admin was found, do something here.
      return;
    }

    var newItem = new ListItem();
    newItem.Text = admin.Department.
    newItem.Value = admin.Username;

    // Keep your controls named consistently, don't use shorthands
    // since you already have IntelliSense to auto-complete them for you

    usernameLabel.Text = admin.Username;
    departmentLabel.Text = admin.Department;
  } 
```

这至少应该让你朝着正确的方向开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T01:10:02.837

撇开以前的海报所说的一切，我都同意，所提供的代码将不起作用，因为在那个 while 循环期间，您正在做的是用用户信息填充列表框或某种下拉列表（部门为Display 和 Userid 作为值）。

如果您希望能够基于部门获得更多信息，您需要处理该列表框或选择的 SelectedIndexChanged 事件（或类似事件），获取当前选定的文本值，*然后*创建第二个查询并执行它。

然而; 请务必遵循以前海报的建议，您不必使用存储过程，但您确实应该在查询中使用参数。想象一下，如果某个讨厌的人设法通过**l33t';drop table Admins**的 UserID 会发生什么。然后您的页面将执行以下操作：

```
SELECT * FROM Admins WHERE userid = 'l33t';drop table Admins; 
```

哎呀......我知道在你的具体情况下你不接受用户输入，但迟早你会......

希望这可以帮助。

# delphi - 如何确定在 Delphi XE3 的 FireMonkey 中是否有 GPU 可用

> ID：14367937
> 
> 赞同：2
> 
> 时间：2013-01-16T21:12:10.923
> 
> 标签：delphi, gpu, firemonkey

我正在 FireMonkey (FM2) 中进行一些图像转换，这些转换在某些低端机器上不起作用，我如何（以编程方式）确定是否存在 GPU，以便在没有 GPU 的情况下可以做一些更平凡的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:12:23.663

这可以通过 FMX.Types 中的 GlobalUseHWEffects 全局变量来确定。如果为 true，图像过渡效果将起作用。

# c++ - 从 VS IDE 运行单元测试时解析 DLL 路径

> ID：14367940
> 
> 赞同：4
> 
> 时间：2013-01-16T21:12:23.767
> 
> 标签：c++, visual-studio, unit-testing, dll, ide

产品：VisualStudio 2012 及其测试基础设施

我有一个包含一个 C++ DLL 项目 (MyClassLib.dll) 和一个单元测试项目 (TestMyClassLib.dll) 的解决方案 (MySolution)

当我使用调试配置构建解决方案时，所有结果都会发布到 MySolution\Debug

但是，当我尝试运行调试测试（测试 > 调试 > 所有测试）或（测试 > 运行 > 所有测试）时，无法解析 DLL MyClassLib.dll。

我的假设是，当单元测试基础设施运行时，工作目录是单元测试的项目目录。

我尝试将 TestMyClassLib 项目的工作目录设置为我的所有 DLL 发布的位置（MySolution\Debug），但这似乎并没有为测试基础设施运行的位置设置工作目录。

什么是解决此问题的*简单*（不添加额外副本）和*优雅*（不更改我的 PATH）解决方案？从 IDE 运行时，是否没有可以为单元测试基础架构设置的“工作目录”设置？

我希望看到默认值是 $(OutDir) 而不是 $(ProjectDir) 或它使用的任何东西。这将使端到端 IDE 体验的默认行为保持一致。

# ruby-on-rails - 运行 rake 资产时出现字符编码错误：预编译

> ID：14367942
> 
> 赞同：3
> 
> 时间：2013-01-16T21:12:37.543
> 
> 标签：ruby-on-rails, twitter-bootstrap, character-encoding, sass, asset-pipeline

我有一个 rails 应用程序，当我尝试运行时出现奇怪的错误`rake assets:precompile`。它看起来像这样：

```
rake aborted!
Invalid US-ASCII character "\xE2"
  (in /Users/lee/Code/draper/app/assets/stylesheets/application.css.scss)
(sass):9 
```

我不确定无效字符可能会滑入我的代码中。我正在使用 Twitter Bootstrap（boostrap-sass gem），我的`bootstrap_and_overrides.css.scss`文件似乎是罪魁祸首。我已经尝试在 text mate 中从头开始重新创建这个文件，以取出任何奇怪的字符，但这没有用。似乎唯一可行的是将其添加到我的顶部`bootstrap_and_overrides.css.scss`：

```
@charset "UTF-8"; 
```

这使我可以运行 rake assets:precompile 然后部署到 Heroku，但这似乎是一种 hack 和肮脏的修复。我可以将其他使用 bootstrap-sass 的应用程序部署到 Heroku，而且 Heroku 能够在部署时运行 rake assets:precompile。现在解决它的唯一方法是在部署到 Heroku 之前包含`@charset "UTF-8";`然后在`rake assets:precompile`本地运行，以便它在部署期间跳过该步骤。

我不知道我哪里错了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:16:57.267

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-17T12:00:06.627

为您的文件声明正确的编码不是 hack，文本文件总是需要声明的编码和物理编码。无论如何，您可以删除文件上带有 iconv 的所有非 ascii 字符：

```
iconv -t ASCII//IGNORE -f UTF8 < application.css.scss > application.css.scss.ascii 
```

然后生成的文件几乎可以使用任何编码。

# ruby-on-rails - 不同域指向同一个应用程序的 Rails 页面缓存

> ID：14367943
> 
> 赞同：0
> 
> 时间：2013-01-16T21:12:40.553
> 
> 标签：ruby-on-rails, caching

我有一个相同的 Rails 应用程序，其中包含许多域名和细微的 UI 差异。每个域可能有不同的语言环境（en、es、fr 等）。

我`caches_page`用来缓存`users`控制器的所有对象。我已经尝试[了这个解决方案](https://stackoverflow.com/a/11304404/471313)，并稍作修改以使用域和语言环境而不是子域。

```
 def self.page_cache_path(path,extension)  
    MyApp::Application.config.action_controller.page_cache_directory + '/cache' + @root_site.to_s + "/" + path + extension
  end

  def cache_page(content = nil, options = nil, gzip = Zlib::BEST_COMPRESSION)
    path = [@root_site, I18n.locale].join("/") # nil would add slash to 2 ends
    path << case options
    when Hash
      url_for(options.merge(:only_path => true, :skip_relative_url_root => true, :format => params[:format]))
    when String
      options
    else
      if request.path.empty? || request.path == '/'
        '/index'
      else
        request.path
      end
    end
    super(content, path, gzip)
  end 
```

这段代码似乎可以很好地写入缓存文件，将域名作为第一个文件夹：

```
Write page /Users/user/Sites/myapp/public/cache/domain1.com/en/users/john.html (1.7ms)
Completed 200 OK 
```

我看到的问题是当我访问任何缓存页面时它没有检索缓存：

```
Started GET "/users/john" for 127.0.0.1 at 2013-01-16 19:04:18 -0200
Processing by UsersController#show as HTML
...
Write page /Users/user/Sites/myapp/public/cache/domain1.com/en/users/john.html (1.7ms)
Completed 200 OK 
```

在我的`users`控制下，我只有这个

```
caches_page :show 
```

任何人都知道是什么阻止了从缓存文件中读取以及如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T04:49:26.533

如果您希望 Rails 按主机名缓存 + 按主机名提供正确的缓存，那么您应该`caches_action :show`改用。缓存将存储在 Rails.cache 中，并由 Rails 自己的机制提供服务。

> 动作缓存在内部使用片段缓存和一个环绕过滤器来完成这项工作。片段缓存根据请求的主机和路径命名。[在http://david.example.com/lists/show/1](http://david.example.com/lists/show/1)访问的页面将生成一个名为 david.example.com/lists/show/1 的片段。 [http://api.rubyonrails.org/classes/ActionController/Caching/Actions.html](http://api.rubyonrails.org/classes/ActionController/Caching/Actions.html)

**但是**，如果您想保留页面缓存并在提供缓存内容时完全避免使用 Rails，您应该配置您的*Web 服务器*以通过组合主机名在自定义路径中查找静态文件。

例如，引用nginx conf 的[page_cache_fu示例](https://github.com/yeah/page_cache_fu)

```
if (-f $document_root/cache/$host/$uri/index.html) {
  rewrite (.*) /cache/$host/$1/index.html break;
}

if (-f $document_root/cache/$host/$uri.html) {
  rewrite (.*) /cache/$host/$1.html break;
} 
```

我没有测试过上面的conf，但这就是想法。在大多数网络服务器上都应该可以实现

# php - 使用 strtotime 问题比较两个日期，因为那一年发生了变化

> ID：14367953
> 
> 赞同：0
> 
> 时间：2013-01-16T21:13:34.607
> 
> 标签：php, timestamp, strtotime

嗨，我有这个代码

```
if  ((date('m/d/Y' , $row->dates)) <= (date('m/d/Y', strtotime("-3 day"))) ) 
```

基本思想是我从我的数据库中提取一个日期（$row->dates），看看今天的日期是否比数据库中的日期晚了 3 天以上。

这对于 2012 年直到 2013 年的日期非常有效。对于包含 2012 年的拉取日期，它现在始终满足 else 条件，并且 2013 年日期现在可以完美运行。

存储在数据库中的日期采用 unix 时间戳形式，即 1351141261。

在比较两个日期时，我无法弄清楚我哪里出错了。显然，年部分中有一些东西把事情搞砸了。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:15:03.493

为什么要将日期转换为字符串？

```
$row->dates <= strtotime('-3 days') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T21:16:31.743

为什么不使用 MySQL 的内置函数来做到这一点

```
SELECT randomdate WHERE randomdate >= DATE_ADD(CURDATE(), INTERVAL -3 DAY); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T21:15:11.043

比较为时间戳而不是格式化字符串。

问题是它们的数量级不是从高到低。

例如，如果您格式化为`Y-m-d`，则顺序实际上是正确的。

（从技术上讲，PHP 按字典顺序比较字符串。）

# iphone - 在定义的路径内裁剪 UIImage

> ID：14367954
> 
> 赞同：2
> 
> 时间：2013-01-16T21:13:39.640
> 
> 标签：iphone, ios, objective-c, ipad

> **可能重复：**
> [在 CGMutablePath 内绘制 UIImage](https://stackoverflow.com/questions/14249304/drawing-uiimage-inside-a-cgmutablepath)

我的 drawRect 中有一条如下所示的路径：

```
CGContextSetLineWidth(context, 1.5);
CGContextSetStrokeColorWithColor(context, [UIColor whiteColor].CGColor);    
CGContextAddEllipseInRect(context, rect);
CGContextStrokePath(context);

CGContextClip(context);
CGContextTranslateCTM(context, 0.0, rect.size.height);
CGContextScaleCTM(context, 1.0, -1.0);
CGContextDrawImage(context, rect, self.image_.CGImage);

UIGraphicsBeginImageContext(rect.size);
UIImage * circleUserProfile = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

[circleUserProfile drawAtPoint:CGPointMake(0, 0)];

CGContextRestoreGState(context); 
```

我有一个 UIImage，我想让 UIImage 夹在这个圆圈内。上面的代码似乎在做我之前在[这里](https://stackoverflow.com/questions/14249304/drawing-uiimage-inside-a-cgmutablepath)问过的事情，但仍然不起作用。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:44:21.590

当你调用 时`UIGraphicsBeginImageContext`，你正在创建一个新的上下文，推送你以前的上下文（你完成了所有的绘图），并使新的（空的）上下文成为当前上下文。`UIGraphicsGetCurrentContext`您需要在调用和执行绘图之前开始您的图像上下文。

# php - 更改父类取决于变量

> ID：14367967
> 
> 赞同：2
> 
> 时间：2013-01-16T21:14:45.650
> 
> 标签：php, oop

我如何设置父类取决于某些语句？

例子

```
$switcher = true;

if($switcher) {
 class a extends class1{
 ...
}
else {
 class a extends class2 {
 ...
} 
```

我需要这样的东西

```
$myclass = $switcher ? 'class1' : 'class2';

class a extends $myclass { //sure this will not work 
```

`$myclass`但是没有怎么使用`eval`

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-16T21:16:47.567

类是在编译时解析的，而不是运行时解析的，所以实际上你*不能*. 考虑改为创建 2 个具有不同父级的类，并根据您的`$switcher`. 尝试在运行时更改继承层次结构没有多大意义。

您的预期方法似乎急需重新思考架构。如果`class1`和`class2`是不同的类，那么根据定义，它们不应该有太多共同点，可以与下游子类互换，如果它们*确实*有很多共同点，则可能指向继承层次结构中更高的问题，其中一个可能是需要从另一个继承。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T21:17:12.650

The common sense approach would be the one of declaring two classes, let's call them `A1` and `A2`, one extending `Class1`, the other extending `Class2`. Then, you decide which one you want to instantiate.

However you can't do exactly what you want it without `eval`. PHP supports anonymous functions and closures, but doesn't support anonymous classes.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T21:20:26.603

你可以这样做：

```
class MyCommon {}
class MyClassA extends MyCommon {}
class MyClassB extends MyCommon {}

$switcher = true;

if ($switcher) {
    $myinstance = new MyClassA();
} else {
    $myinstance = new MyClassB();
}

var_dump($myinstance instanceof MyCommon); // true, because of inheritance
var_dump($myinstance instanceof MyClassA); // true
var_dump($myinstance instanceof MyClassB); // false
var_dump(get_class($myinstance)); // "MyClassA" 
```

# css - 具有自动高度的相对位置 div 上的 CSS 间距底部

> ID：14367968
> 
> 赞同：1
> 
> 时间：2013-01-16T21:14:45.963
> 
> 标签：css, height, spacing, css-position

我正在尝试在具有相对位置和自动高度的 div 底部添加空间。有人可以指出我正确的方式吗？

我的代码：http: [//jsfiddle.net/Pdz3g/](http://jsfiddle.net/Pdz3g/)

我尝试在#content 中使用：

```
margin-bottom: 20px; 
```

但是在定义了顶级规则时是无用的。

和：

```
bottom: 20px; 
```

由于某些原因也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:32:05.393

相对定位将允许您根据位移、它的高度以及它与视口一侧的距离将元素移动到视口之外，因此您不能确保`#content`完全可见......

参见例如： http: [//jsfiddle.net/Pdz3g/1/](http://jsfiddle.net/Pdz3g/1/)因为高度是已知的，所以它工作的地方，由于`min-height`. 如果块垂直增长，它的底部将再次隐藏在视口之外。

如果您想对该元素进行更多控制，请不要使用相对定位...

# c# - JsonObject.GetNamedObject() 顺序

> ID：14367976
> 
> 赞同：1
> 
> 时间：2013-01-16T21:15:02.947
> 
> 标签：c#, .net, json

我正在尝试使用 using 读取 JSON `Windows.Data.Json`。但是由于某种原因 GetNamedObject() 以一种非常愚蠢的方式返回我的对象​​..

这是我的 JSON：

```
{
   "schedule":{
      "schedule":{
         "Monday":{
            "1":{
               "class":"oo5",
               "classroom":"K53"
            },
            "2":{
               "class":"oo5",
               "classroom":"K53"
            }
         },
         "Tuesday":{
            "2":{
               "class":"biol6",
               "classroom":"S12"
            },
            "8":{
               "class":"loC",
               "classroom":"126"
            },
            "9":{
               "class":"loC",
               "classroom":"126"
            }
         },
         "Wednesday":{
            "3":{
               "class":"entlC",
               "classroom":"K51"
            }
         },
         "Thursday":{
            "3":{
               "class":"wisb3",
               "classroom":"S29"
            },
            "8":{
               "class":"inf8",
               "classroom":"S22"
            }
         },
         "Friday":{
            "1":{
               "name":"dhr. F. Lange de",
               "class":"schk1",
               "classroom":"S09"
            }
            "7":{
               "name":"mw. O. Beek ter",
               "class":"nat2",
               "classroom":"S10"
            }
         }
      }
   }
} 
```

注意：这是一个缩短的版本。

我试图按照给定的顺序读出日期：“星期一、星期二、星期三、星期四、星期五”。

我正在使用以下 C# 代码：

```
JsonObject JSON_OBJ_root;
JsonObject.TryParse(return_json, out JSON_OBJ_root);
JsonObject JSON_OBJ_schedule = JSON_OBJ_root.GetNamedObject("schedule");
JsonObject JSON_OBJ_days = JSON_OBJ_schedule.GetNamedObject("schedule"); //I think this is the problem 
```

当我使用调试器和查找时`JSON_OBJ_days`：

[http://i.stack.imgur.com/WX5I5.png](http://i.stack.imgur.com/WX5I5.png)

翻译：

```
Woensdag = Wednesday
Vrijdag = Friday
Donderdag = Thursday
Dinsdag = Tuesday
Maandag = Monday 
```

因此，出于某种原因，GetNamedObject() 以随机顺序返回其对象。这只是脑筋急转弯！谁能告诉我这是为什么以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T10:17:10.133

对象在 JSON 中没有顺序。您应该使用要保存项目顺序的数组。

你的 JSON 应该是这样的：

```
{
    "schedule": {
        "schedule": [
            {
                "name_day": "Monday",
                "schedule": [
                    {
                        "class": "oo5",
                        "classroom": "K53"
                    },
                    {
                        "class": "oo5",
                        "classroom": "K53"
                    }
                ]
            },
            {
                "name_day": "Tuesday",
                "schedule": [
                    {
                        "class": "oo5",
                        "classroom": "K53"
                    },
                    {
                        "class": "oo5",
                        "classroom": "K53"
                    }
                ]
            }
        ]
    }
} 
```

注意 [ 而不是 {。“[”代表一个数组，其中在描述对象时使用 {。

# regex - 重写一些不以斜杠结尾的 URL，并以一些特定的单词开头

> ID：14367978
> 
> 赞同：1
> 
> 时间：2013-01-16T21:15:15.853
> 
> 标签：regex, apache, rewrite

实际上我用 PHP 做这个，但我想在 Apache 级别上做这个（.htaccess）

我想对以下开头的网址进行 301 重定向：*noticias|analises|meteorologia|artigos|videos*而不是以斜杠或 .html 结尾

我想重定向到带有斜杠的页面。

在这些情况下重定向：

```
/noticias  --> /noticias/
/noticias/soja --> /noticias/soja
/noticias/soja/pag-2 --> /noticias/soja/pag-2/ 
```

但在这种情况下不是：

```
/noticias/soja/1105-soja-opera-em-alta.html 
```

拜托，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T21:42:13.600

只需将其放入目录的`.htaccess`文件中：

```
# noticias/
RewriteEngine on
RewriteRule ^index.php$ http://www.example.com/noticias/ [r=301,nc] 
```

或者对于第二个目录：

```
# noticias/soja/
RewriteEngine on
RewriteRule ^index.php$ http://www.example.com/noticias/soja/ [r=301,nc] 
```

对于第三个目录：

```
# noticias/soja/pag-2/
RewriteEngine on
RewriteRule ^index.php$ http://www.example.com/noticias/soja/pag-2/ [r=301,nc] 
```

# css - 位置用占位符固定

> ID：14367983
> 
> 赞同：3
> 
> 时间：2013-01-16T21:15:41.357
> 
> 标签：css, height, css-position

我有一个动态高度的 div。这个 div 需要定位：固定。下面的 div 应该从第一个 div 结束的地方垂直开始。

原因是 div 是一个应该保持在顶部的标题。但是，内容应该在标题之后开始。这样当页面滚动时，标题保持固定，其余部分照常滚动。为内容设置顶部边距通常可以解决问题，但这种类型的标题具有动态高度。有任何想法吗？

编辑：我能想到的一种解决方案是两次打印标题并将第二个设置为位置：相对和可见性：隐藏。虽然它应该可以工作，但它似乎是一个糟糕的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T21:21:01.050

固定和绝对定位的元素在正常页面流之外。您不能单独使用 CSS 设置相对于它们或在它们之外的其他内容。

这是一个小提琴，以防万一，呃，小提琴。

[http://jsfiddle.net/fX7cH/1/](http://jsfiddle.net/fX7cH/1/)

```
<div id="page">
  <div id="header"></div>
  <div id="content"></div>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T19:51:52.643

这种特定情况的解决方案是为相应样式表（桌面、移动）的内容 div 定义不同的 margin-top 值。然而，这不是一个通用的解决方案。问题是移动布局中的菜单在块显示中具有每个列表项。因此，根据项目的数量，内容 div 的 margin-top 需要手动调整。不完全优雅，但对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-27T23:50:47.023

我已经为此苦苦挣扎了一段时间，虽然并不完美，但这是一个不同的解决方案，它使用再次进入标题的任何动态内容作为占位符来获得完全相同的高度，然后使用 CSS 在视觉上隐藏内容和`aria-hidden="true"`HTML对屏幕阅读器隐藏的属性。这里没有搞乱边距。

[https://jsfiddle.net/lukehatfield/zmcj3htx/](https://jsfiddle.net/lukehatfield/zmcj3htx/)

```
<div class="page">
  <div class="header">HEADER</div>
  <div class="header-placeholder" aria-hidden="true">HEADER</div>
  <div class="content">CONTENT</div>
</div> 
```

# c++ - 匹配除双引号外的任何字符

> ID：14367984
> 
> 赞同：0
> 
> 时间：2013-01-16T21:15:49.470
> 
> 标签：c++, regex

我想要一个允许我匹配除双引号字符 (") 之外的任何字符的模式。更清楚地说，我想要一个匹配的正则表达式`Hello World`，但不会匹配`Hello "World"`。

我正在使用 C++，所以没有 Java regexp utils 等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T21:20:22.880

正则表达式

```
^[^"]*$ 
```

匹配任何不包含引号的字符串。

作为一个 C++ 字符串，`"^[^\"]*$"`我想应该是 。

# java - GWT CellTable 与回车键交互

> ID：14367985
> 
> 赞同：0
> 
> 时间：2013-01-16T21:15:55.010
> 
> 标签：java, gwt, keyboard

您好，我有一个 CellTable，当我在键盘上按 Enter 或单击鼠标时，我想在单元格中选择一个元素。

问题是当我按下键时没有任何反应

这是我的代码，可以在 celltable 上启用输入键功能

```
 CellTable<Value> table = new CellTable<Value>();

    public void onCellPreview(CellPreviewEvent<Value> event) {
                    if (event.getNativeEvent().getKeyCode() == KeyCodes.KEY_ENTER) { // operation} 
```

这也是鼠标点击的功能

```
.addSelectionChangeHandler(new SelectionChangeEvent.Handler() {
                        public void onSelectionChange(SelectionChangeEvent event) { 
```

我的问题是，在键盘上按“enter”一开始不会运行，但是当我选择它然后按 enter 时会运行。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T13:00:29.873

这很简单。

当您按“输入”时，您的计算机上会引发一个事件，您的浏览器也是如此。

该事件被传播到“ACTIVE”元素。也就是说，如果您有一个打开的浏览器和控制台，并且活动窗口（焦点窗口）在前面，那么如果您按“输入”并且 cmd 控制台将更改一行，则浏览器上不会发生任何事情。

同样的事情也发生在 webApp 上。当某物具有**焦点**时，只有这样它才能对点击/按键事件做某事。

例如：打开一个 web 邮件，如 hotmail/gmail 等。单击页面内的任意位置（不是文本框）。按 Enter（没有任何反应）。在文本框（用户名或密码）内单击。按 Enter。注意发生了一些事情。为什么？因为“了解事件”的对象现在已聚焦（活动）。

如果您希望它发生在视图的加载上，那么您可以明确地将焦点设置在加载时的项目上（尽管这不会达到您想要的效果）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-11T09:58:52.850

1-您不应该首先禁用keyboardSelectionPolicy。

2-您应该将此块添加到构造函数或 onLoad 方法：

```
table.addCellPreviewHandler(new CellPreviewEvent.Handler<GuiltyAccusationInfoDto>() {
@Override
public void onCellPreview(CellPreviewEvent<GuiltyAccusationInfoDto> event) {
    if (event.getNativeEvent().getKeyCode() == KeyCodes.KEY_UP || event.getNativeEvent().getKeyCode() == KeyCodes.KEY_DOWN
            || event.getNativeEvent().getKeyCode() == KeyCodes.KEY_LEFT || event.getNativeEvent().getKeyCode() == KeyCodes.KEY_RIGHT
            || event.getNativeEvent().getKeyCode() == KeyCodes.KEY_PAGEUP || event.getNativeEvent().getKeyCode() == KeyCodes.KEY_PAGEDOWN) {
        selectionModel.setSelected(listOfData.get(table.getKeyboardSelectedRow()), true);
    }
}}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T11:20:44.783

覆盖`onBrowserEvent`中的 ID 列`CellTable`，检查是否按下了 ENTER：

```
 Column<T, Boolean> idCol = new Column<T, Boolean>(new CheckboxCell()) {
        @Override
        public Boolean getValue(T obj) {
            return selectionModel.isSelected(item);
        }

        @Override
        public void onBrowserEvent(Context context, Element elem, T object, NativeEvent event) {
            if (event.getKeyCode() == KeyCodes.KEY_ENTER) {
                selectionModel.setSelected(object, !selectionModel.isSelected(item));
                return;
            }
            super.onBrowserEvent(context, elem, object, event);
        }
    }; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T05:12:10.197

CellPreviewEvent 为您提供在单元格上触发的任何事件。除非您选择一个单元格，否则它不会被触发。所以首先你需要在按下回车之前通过键盘导航或鼠标选择一个单元格

# c++ - 非构造函数成员函数中的显式字符串行为

> ID：14367986
> 
> 赞同：1
> 
> 时间：2013-01-16T21:15:58.477
> 
> 标签：c++

我希望我的问题标题正确。

我有一个非常大/旧的数据库，其中包含许多非空终止字符数组和一些 std::string 类型。我正在创建一个将使用该数据库的工具，并且我想确保它对于非空终止字符数组的安全性。理想情况下，我希望同时支持这两种类型，以便开发人员轻松使用该工具。

```
void AddCell( const std::string & _cell_str );
void AddCell( const char * _cell_data, size_t _array_size ); 
```

但是，有一个特定的场景可能会出现问题：如果新开发人员不知道 char 数组是非空终止的并且出于懒惰决定使用 std::string 的隐式转换，因为他不必输入数组大小，那么 std::string 可能会显示一些不需要的字符。

我该如何处理这个问题？我应该强迫某人指定 std::string 的长度吗？我应该只删除 std::string 重载函数并让每个人都从他们的 std::string 中使用 c_str() 吗？理想情况下，我只使用显式关键字，但它仅适用于构造函数。我对避免使用 std::string 犹豫不决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-16T21:34:14.397

有不同的事情可以做。其中之一是`delete`重载`const char*`：

```
void AddCell(const std::string&);
void AddCell(const char*) = delete;
void AddCell(const char*,size_t); 
```

将函数标记为`delete`在使用时会触发编译器错误，但不会将其从重载的候选函数集中删除。如果用户通过了`const char*`第二个重载将被拾取并且编译器将尖叫重载被删除。

当然，您还可以为已知大小的数组提供包装器，以便它们可以安全无缝地传递文字：

```
template <size_t N>
void AddCell(const char (&array)[N]) {
   AddCell(array, N);
} 
```

这允许`AddCell("MyCell")`，因为字面量是一个数组，而最好的候选者是模板，它将依次分派给`(const char*,size_t)`具有适当大小的重载。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-16T21:20:35.020

您可以更改第一个重载，以便不采用 std::string 引用，而是采用对您创建的具有从 std::string 的隐式转换的新类型的引用。所以你不会看到来自 const char* 的隐式转换，但会毫无问题地使用 std::string。

# powershell - 递归设置文件属性

> ID：14367989
> 
> 赞同：5
> 
> 时间：2013-01-16T21:16:12.063
> 
> 标签：powershell

这段代码：

```
Get-ChildItem $targetConfig -Recurse | Set-ItemProperty -Name IsReadOnly -Value $false 
```

返回几个错误：

> Set-ItemProperty：属性 System.Boolean IsReadOnly=False 不存在。在 line:1 char:56 + Get-ChildItem $targetConfig -Recurse | Set-ItemProperty <<<< -Name IsReadOnly -Value $false + CategoryInfo : ReadError: (System.Boolean IsReadOnly=False:PSNoteProperty) [Set-ItemProperty], IOException + FullyQualifiedErrorId : SetPropertyError,Microsoft.PowerShell.Commands.SetItemPropertyCommand

这个错误是什么意思？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T21:17:53.220

它发生是因为：

```
Get-ChildItem $targetConfig -Recurse 
```

返回 DirectoryInfo 和 FileInfo。并且 Set-ItemProperty 无法为 DirectoryInfo 设置“只读”。

要处理这种使用：

```
Get-ChildItem $targetConfig -Recurse |
    Where-Object {$_.GetType().ToString() -eq "System.IO.FileInfo"} |
    Set-ItemProperty -Name IsReadOnly -Value $false 
```

# python - 请求前烧瓶 - 为特定路线添加例外

> ID：14367991
> 
> 赞同：71
> 
> 时间：2013-01-16T21:16:21.183
> 
> 标签：python, flask

在函数（如下）中，如果用户尚未登录`before_request()`，我想将用户重定向到。是否有一个特殊变量可以为我提供当前 URL，如下例所示？`/login`

```
@app.before_request
def before_request():
    # the variable current_url does not exist
    # but i want something that works like it
    if (not 'logged_in' in session) and (current_url != '/login'):
        return redirect(url_for('login')) 
```

我需要检查当前 URL 是否为`/login`，因为如果我不这样做，服务器将进入无限循环。

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2013-01-16T21:52:50.583

您可以检查请求对象上的几个属性，记录[在这里](http://flask.pocoo.org/docs/api/#flask.Request.path)，`request.path`可能是您想要的。我可以建议[`request.endpoint`](http://flask.pocoo.org/docs/api/#flask.Request.endpoint)，所以如果您决定将您的视图路由到另一个 url 或多个 url，您将被覆盖

```
@app.before_request
def before_request():
    if 'logged_in' not in session and request.endpoint != 'login':
        return redirect(url_for('login')) 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2015-10-07T19:22:16.710

您可以使用装饰器。以下示例展示了如何在特定请求之前检查 API 密钥：

```
from functools import wraps

def require_api_key(api_method):
    @wraps(api_method)

    def check_api_key(*args, **kwargs):
        apikey = request.headers.get('ApiKey')
        if apikey and apikey == SECRET_KEY:
            return api_method(*args, **kwargs)
        else:
            abort(401)

    return check_api_key 
```

你可以使用它：

```
@require_api_key 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-02-14T01:18:11.323

[这是使用flask-login](http://flask-login.readthedocs.org/en/latest/)接受的答案的实现：

```
@app.before_request
def require_authorization():
    from flask import request
    from flask.ext.login import current_user

    if not (current_user.is_authenticated or request.endpoint == 'login'):
        return login_manager.unauthorized() 
```