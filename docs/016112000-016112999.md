# StackOverflow 问答 16112000-16112999

# java - GAE - 是否有 setParameters 对应的 declareParameters 用于数据存储查询？

> ID：16112004
> 
> 赞同：1
> 
> 时间：2013-04-19T19:17:58.737
> 
> 标签：java, google-app-engine, google-cloud-datastore

在[Datastore Queries 文档](https://developers.google.com/appengine/docs/java/datastore/jdo/queries)中，可以看到使用 Query 对象方法调用设置查询的示例：

```
Query q = pm.newQuery(Person.class);
q.setFilter("lastName == lastNameParam");
q.setOrdering("height desc");
q.declareParameters("String lastNameParam");
List<Person> results = (List<Person>) q.execute("Smith"); 
```

我喜欢这种风格，因为它使每个部分都易于阅读并且易于理解正在做什么。但是，最后他们在实际`execute`行中为“lastNameParam”传递了值“Smith”。从我的角度来看，为了保持一致，应该有一个`setParameters`Query 方法，以便以与声明参数名称相同的方式清楚地说明传递给参数的值。我还没有找到这样的查询方法。一个存在吗？如果没有，是否有充分的理由不这样做？还是我的想法很愚蠢，我的推理没有根据？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T17:42:35.707

有一种现有的方法可以做到这一点。该功能`setParameter()`可用。例如，问题中的代码可以通过以下方式完成：

```
Query q = pm.newQuery(Person.class);
q.setFilter("lastName == lastNameParam");
q.setOrdering("height desc");
q.declareParameters("String lastNameParam");
q.setParameter("lastNameParam", "Smith");
List<Person> results = (List<Person>) q.execute(); 
```

我可能对原始问题的构想很糟糕，因为这与 Google App Engine 或 Google Datastore 几乎没有关系，主要涉及 Java 的 Query 类。无论如何，这是可行的解决方案。

# ms-access - 确定使用什么用户“ms 访问数据库”链接到另一个数据库

> ID：16112005
> 
> 赞同：0
> 
> 时间：2013-04-19T19:17:59.150
> 
> 标签：ms-access, ms-access-2010

尝试将表从另一个数据库导入 ms-access 数据库时，出现错误

```
You don't have permission to import, export, or link to 'exampleTbl.'
To import, export, or link to this object, you must have Read Design and Read Data permissions for it. 
```

我检查了要从中导入的数据库，并且我的计算机用户名能够读取和写入该数据库。

所以我在想，也许我试图导入的访问数据库正在使用不同的用户名来获取数据。

简而言之，我如何在尝试将表导入 ms access 数据库时找出正在使用的用户名。

从 ms-access 数据库导入。外部数据->访问->浏览到数据库->打开->检查导入表->确定->选择表->所需的表单击确定->然后出现错误。

# java - compareTo 不能应用于 java.util.Date (Java)

> ID：16112009
> 
> 赞同：0
> 
> 时间：2013-04-19T19:18:14.290
> 
> 标签：java, compareto

我正在用 Java 编写约会程序，遇到如下错误：

```
AppointmentNew.java:68: unreported exception java.text.ParseException; must be caught or declared to be thrown
        Date lowDate = sdf.parse(stdin.nextLine());
                                ^
AppointmentNew.java:70: unreported exception java.text.ParseException; must be caught or declared to be thrown
        Date highDate = sdf.parse(stdin.nextLine());  
                                 ^
AppointmentNew.java:77: unreported exception java.text.ParseException; must be caught or declared to be thrown
           Date newCurrentDate = sdf.parse(currentDate); 
```

该程序假设允许用户进行新约会，当他们这样做时，他们可以输入日期和描述（他们可以根据需要多次执行此操作），然后他们可以选择一系列日期让程序打印出来（假设打印出他们提供的日期范围内的约会”。这是我的错误发生的地方......

这是我的代码：

```
import java.util.*;
import java.text.SimpleDateFormat;
import java.util.Date;

public class AppointmentNew 
{
public static void main (String[] args)
{
  ArrayList<String> list = new ArrayList<String>();
  Scanner stdin = new Scanner(System.in);
  String choice = "";
  int choiceNum = 0;
  String date = "";
  String descrip = "";
  int type = 0;
  String typeChose = "";

  System.out.println("Welcome to Appointment App!\n");
  System.out.println("\t============================");

  do
  {
     System.out.print("\n\tMake Choice (1: New, 2: Print Range, 3: Print All, 4: Quit) ");
     choice = stdin.nextLine();
     choiceNum = Integer.parseInt(choice);

     if (choiceNum == 1)
     {
        System.out.print("\n\n\tEnter New Appointment Date in mm/dd/yyyy format: ");
        date = stdin.nextLine();

        System.out.print("\n\n\tEnter New Appointment Description: ");
        descrip = stdin.nextLine();

        System.out.print("\n\n\tEnter Type (1 = Once, 2 = Daily, 3 = Monthly): ");
        type = stdin.nextInt();
        stdin.nextLine();

        if (type == 1)
        {
           Once once = new Once(date, descrip);
           typeChose = "One-Time";
        }
        else if (type == 2)
        {
           Daily daily = new Daily(date, descrip);
           typeChose = "Daily";
        }
        else
        {
           Monthly monthly = new Monthly(date, descrip);
           typeChose = "Monthly";
        }
        String stringToAdd = "";
        stringToAdd = (date + " : \"" + descrip + "\", " + typeChose);
        list.add(stringToAdd);

        System.out.println("\n\n\tNew " + typeChose + " Appointment Added for " + date + "\n");
        System.out.println("\t============================\n");

     }

     if (choiceNum == 2)
     {
        System.out.print("\n\n\tEnter START Date in mm/dd/yyyy format: ");
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
        Date lowDate = sdf.parse(stdin.nextLine());
        System.out.print("\n\n\tEnter END Date in mm/dd/yyyy format: ");
        Date highDate = sdf.parse(stdin.nextLine());  

        for(int i = 0; i < list.size(); i++)
        {
           int dateSpot = list.get(i).indexOf(" ");
           String currentDate = list.get(i);
           currentDate.substring(0, dateSpot);
           Date newCurrentDate = sdf.parse(currentDate); 

           if (newCurrentDate.compareTo(lowDate) >= 0 && newCurrentDate.compareTo(highDate) <= 0)
           {
              System.out.println("\n\t" + list.get(i));   
           }
        }
     }

     if (choiceNum == 3)
     {
        for(int i = 0; i < list.size(); i++)
        {
           System.out.println("\n\t" + list.get(i));     
        }
     }

  }while (choiceNum != 4);      
 }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T19:20:23.290

问题是您正在尝试将*字符串*与日期进行比较。那有什么意思？

您应该将 转换`String`为`Date`（例如 with `SimpleDateFormat`） - 或者理想情况下，使用[Joda Time](http://joda-time.sf.net) - 然后在将它们都作为相同类型时比较值。

编辑：如评论中所述，这也不是您想要的：

```
SimpleDateFormat sdf = new SimpleDateFormat("mm/dd/yyyy"); 
```

`mm`表示*分钟*，`SimpleDateFormat`而不是*几个月*。你想要`MM/dd/yyyy`。有关更多详细信息，请参阅[`SimpleDateFormat`文档](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:20:30.190

```
currentDate.compareTo(lowDate) 
```

`currentDate`是`String`和`lowDate`是`Date`。你正在尝试`compareTo`两种不同的东西。

转换`currentDate`为 Date 对象，然后调用`compareTo();`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:25:50.203

这很正常，您将日期类型的对象与字符串进行比较。使用 SimpleDateFormat（或其他格式）将您的字符串转换为日期，您将能够比较这两个对象。

```
Date correctCurrentDate = sdf.parse(currentDate); 
```

为了避免在测试程序中添加 try/catch，我一般写了 main 方法，如：

```
public static void main (String[] args) throws Exception 
```

当然，对于在生产中运行的程序，您应该使用 try/catch 来处理异常。但这对于测试程序来说很烦人。

# android - Robolectric“无法创建 android.widget.Button”错误

> ID：16112014
> 
> 赞同：1
> 
> 时间：2013-04-19T19:18:30.543
> 
> 标签：android, robolectric, android-testing

当我尝试运行我的 robolectric 测试时，我收到异常：
`java.lang.RuntimeException: Failed to create a android.widget.Button`
但是，如果活动不包含任何按钮，一切运行正常，但我需要按钮 :) 我使用 robolectric `2.0-alpha-3-SNAPSHOT`，而且几天前所有测试都成功运行。
有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T14:35:07.317

终于我解决了这个问题！我的按钮使用的文本颜色定义如下： `<color name="TEXT">@android:color/white</color>`似乎 robolectric 不支持`@android:color`值，因此将其替换为`<color name="TEXT">#FFF</color>`解决了我的问题

# bash - 将命令回显到带有换行符的文件

> ID：16112016
> 
> 赞同：0
> 
> 时间：2013-04-19T19:18:41.393
> 
> 标签：bash, file, shell, echo

我想像这样回声 ettercap：

```
sudo echo $(ettercap -i eth0 -Tq) > /file 
```

当我“cat”文件时，它应该给我这样的东西：

```
ettercap NG-0.7.4.2 copyright 2001-2005 ALoR & NaGA

Listening on eth0... (Ethernet)

... 
```

但相反，它给了我这个：

```
ettercap NG-0.7.4.2 copyright 2001-2005 ALoR & NaGA Listening on eth0... (Ethernet) ... 
```

我该如何解决？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:25:16.497

你应该做：

```
sudo ettercap -i eth0 -Tq > /file 
```

而已！

* * *

如果在将变量保存到文件之前需要此输出，请使用`$()`运算符：

```
output=$(ettercap -i eth0 -Tq)
echo "$output" > /file 
```

请注意，"$output" 周围的双引号对于维护空格至关重要

# jquery - Twitter Bootstrap 不适用于 Visualforce

> ID：16112017
> 
> 赞同：0
> 
> 时间：2013-04-19T19:18:45.660
> 
> 标签：jquery, twitter-bootstrap, visualforce

我正在尝试将 Bootstrap 与 Visualforce 一起使用。我创建了适当的静态资源，但它没有显示 twitter 引导行为。有人能告诉我为什么吗？这是我尝试集成的过程，首先我添加了 Bootstrap 目录并将此引导程序命名为静态资源，然后我上传了最新的 jQUery.js 文件并将此 JQUery1 资源命名为

```
<apex:page showHeader="false" standardStylesheets="false" controller="hello11">

  <head>
    <title>Bootstrap 101 Template</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Bootstrap -->
    <apex:includeScript value="{!$Resource.JQUery1}"/>

<apex:stylesheet value="{!URLFOR($Resource.bootstrap, 'bootstrap/css/bootstrap.css')}"/>

<apex:includeScript value="{!URLFOR($Resource.bootstrap, 'bootstrap/js/bootstrap.js')}"/>

  </head>
  <body>
    <h1>Hello, world!</h1>
   <div class="row-fluid">
  <div class="span12">
    Fluid 12
    <div class="row-fluid">
      <div class="span6">
        Fluid 6
        <div class="row-fluid">
          <div class="span6">Fluid 6</div>
          <div class="span6">Fluid 6</div>
        </div>
      </div>
      <div class="span6">Fluid 6</div>
    </div>
  </div>
</div>
  </body>
</apex:page> 
```

我没有得到引导效果，而是得到下面 ![在此处输入图像描述](https://i.stack.imgur.com/Pi7UO.png) 的屏幕，你可以看到控制台中没有错误意味着所有资源都已正确加载现在怀疑是为什么它没有显示流体效果任何人都可以描述为什么我没有得到流体效果？ ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:22:01.957

样式表文件似乎没有正确加载，您可以检查“网络”选项卡吗？单击此处并重新加载页面，您将看到某些 HTTP 请求是否返回“未找到”（404）错误代码。然后你应该检查你的路径。

# jquery - 在 Firefox 和 IE 上使用 event.stopPropagation()

> ID：16112023
> 
> 赞同：1
> 
> 时间：2013-04-19T19:19:02.403
> 
> 标签：jquery, internet-explorer, firefox, stoppropagation

为什么这段代码不适用于 Firefox 和 IE？在铬上很好。

```
$(document).click(function(e) {
    if ($(".contentIconDesk").hasClass('markIconDesk')) {           
        $(".contentIconDesk").removeClass('markIconDesk');          
        wndSelected = "";   
    }       
});

function markMe(icon, wnd) {
    event.stopPropagation();            
    if ($('#'+icon).hasClass('markIconDesk')) {
        $(".contentIconDesk").removeClass('markIconDesk');
        wndSelected = "";               
    } else {
        $(".contentIconDesk").removeClass('markIconDesk');
        $('#'+icon).addClass('markIconDesk');
        wndSelected = wnd;                  
    }       
}; 
```

如果我的 HTML 中有一些 div，`MarkMe();`则调用该函数。`onClick()`问题出在`event.stopPropagation()`. 当我单击添加类时，浏览器会单击`$(document)`.

如果有一个好的建议而不是使用上面的代码，那就太好了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:40:43.377

你可以试试这个。对于 HTML 中的 div，修改如下：

```
<div id="something1" onclick="markMe('icon1', 'wnd1', event)">
<div id="something2" onclick="markMe('icon2', 'wnd2', event)">
<div id="something3" onclick="markMe('icon3', 'wnd3', event)"> 
```

在你的 js 中使用它：

```
function markMe(icon, wnd, e) {

    if (!e) var e = window.event;
    e.stopPropagation();

    $(".contentIconDesk").removeClass('markIconDesk');
    if ($('#' + icon).hasClass('markIconDesk')) {
        wndSelected = "";
    } else {
        $('#' + icon).addClass('markIconDesk');
        wndSelected = wnd;
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-23T18:15:33.707

IE 在它的 DOM 中不支持 stopPropagation 方法。您可以改用 event.cancelBubble = true （我的意思是，事件对象的 cancelBubble 属性）。看看[这个](https://stackoverflow.com/questions/7596364/whats-the-difference-between-cancelbubble-and-stoppropogation)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:21:10.447

因为`event`在这段代码中未定义：

```
event.stopPropagation(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T19:24:04.073

您需要将事件作为`MarkMe`函数的参数传递

```
function markMe(icon, wnd, event) {
   event.stopPropagation(); 
   //...
} 
```

然后当你调用它时，它应该是这样的：

```
$('#myDiv').click(function(e) {
    //...
    MarkMe(icon, wnd, e);
}); 
```

# c# - 消息在 IBM MQ 上被覆盖

> ID：16112024
> 
> 赞同：1
> 
> 时间：2013-04-19T19:19:06.147
> 
> 标签：c#, .net, ibm-mq

我正在发送 3 条消息

Message1 - 相关 id:5000

空消息（无正文/消息）-相关 id:5001

Message2 - 相关 id:5002

我的出站队列流程是这样的

Message1 - 相关 id:5000

*Message1-correlation id:5001 => 在空消息上覆盖相同的先前消息。**

Message2 - 相关 id:5002

上面的第二行不应该有 Message1，而是空的。有什么想法吗？

> 我的获取方法

```
 mqGetMsgOpts = new MQGetMessageOptions();
                if (mqQueue != null)
                {
                    //Get options for the messsage                
                    mqGetMsgOpts.Options = MQC.MQGMO_BROWSE_FIRST | MQC.MQGMO_WAIT |  MQC.MQOO_INQUIRE;
                    mqGetMsgOpts.MatchOptions = MQC.MQMO_NONE;
                    mqGetMsgOpts.WaitInterval = 5000;  // 5 seconds limit for waiting
                }

              if (mqMsg.MessageLength > 0 && mqMsg.DataLength > 0)
              {
                messageData = mqMsg.ReadString(mqMsg.MessageLength);
              } 
```

如果我不做长度检查，我会得到流阅读器相关的异常。

> 我的放置方法

```
if(mqQueue==null)
  mqQueue = mqQMgr.AccessQueue("Queue Name", MQC.MQOO_OUTPUT | MQC.MQOO_INPUT_SHARED | MQC.MQOO_INQUIRE);

   mqMsg.WriteString(message); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-15T15:52:04.420

我可以想象两个可能导致这种情况的问题。

1.  您的放置应用程序没有为消息 2 发送空消息正文。
2.  您的获取应用程序正在向您显示消息一中的消息缓冲区。如果没有从 MQ 传递的消息缓冲区，您之前的消息缓冲区内容将保留。

为了确定发生在您身上的情况，我建议您放置所有消息，但在运行示例获取它们之前，请运行类似提供的示例 amqsget 以排除 1 的可能性。

然后您可以专注于应用程序中的获取缓冲区。如果 MQ 说返回消息的长度为零，请确保您没有使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T14:16:09.343

我没有听说过消息在 WMQ 中被覆盖。我怀疑这一定是应用程序的问题。这行代码：

```
mqGetMsgOpts.Options = MQC.MQGMO_BROWSE_FIRST | MQC.MQGMO_WAIT |  MQC.MQOO_INQUIRE; 
```

该`MQC.MQGMO_BROWSE_FIRST`选项将使 WMQ 始终返回满足 MQMD 结构中指定条件的第一条消息。`MQGMO_BROWSE_NEXT`如果稍后修改此选项以指定读取队列中的下一条消息，我无法从您的代码片段中看出。

而不是`MQC.MQGMO_BROWSE_FIRST`您可以指定`MQGMO_BROWSE_NEXT`选项来连续阅读消息。

您还指定`MQC.MQOO_INQUIRE`了对 GMO 选项无效的选项。你需要删除它。

更多详细信息浏览选项在[这里](http://pic.dhe.ibm.com/infocenter/wmqv7/v7r5/topic/com.ibm.mq.doc/fg12840_.htm)

# math - 平均而言，这个不正确的循环会迭代多少次？

> ID：16112026
> 
> 赞同：9
> 
> 时间：2013-04-19T19:19:15.310
> 
> 标签：math, random, for-loop, language-agnostic

在某些情况下，循环需要运行随机次数的迭代，范围从`min`到`max`，包括 到 。一种可行的解决方案是执行以下操作：

```
int numIterations = randomInteger(min, max);
for (int i = 0; i < numIterations; i++) {
   /* ... fun and exciting things! ... */
} 
```

许多初级程序员犯的一个常见错误是这样做：

```
for (int i = 0; i < randomInteger(min, max); i++) {
   /* ... fun and exciting things! ... */
} 
```

这将重新计算每次迭代的循环上限。

我*怀疑*这并没有给出循环迭代次数的均匀分布，范围从`min`到`max`，但我不确定当你做这样的事情时你会得到*什么分布。*有谁知道循环迭代次数的分布是什么？

作为一个具体的例子：假设`min`= 0 和`max`= 2。那么有以下几种可能：

*   当 时`i = 0`，随机值为 0。循环运行 0 次。
*   当 时`i = 0`，随机值非零。然后：
    *   当 时`i = 1`，随机值为 0 或 1。然后循环运行 1 次。
    *   当 时`i = 1`，随机值为 2。然后循环运行 2 次。

第一个事件的概率是 1/3。第二个事件的概率为 2/3，在其中，第一个子案例的概率为 2/3，第二个事件的概率为 1/3。因此，平均分布数为

> 0 × ¹ / [3] + 1 × ² / [3] × ² / [3] + 2 × ² / [3] × ¹ / [3]
> 
> = 0 + ⁴ / [9] + ⁴ / [9]
> 
> = ⁸ / [9]

请注意，如果分布确实是均匀的，我们希望得到 1 次循环迭代，但现在我们平均只能得到⁸ / [9]。我的问题是是否可以推广这个结果以获得更精确的迭代次数值。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:26:12.030

Final edit (maybe!). I'm 95% sure that this isn't one of the [standard distributions that are appropriate](http://en.wikipedia.org/wiki/List_of_probability_distributions#With_finite_support). I've put what the distribution is at the bottom of this post, as I think the code that gives the probabilities is more readable! A plot for the mean number of iterations against `max` is given below.

![enter image description here](https://i.stack.imgur.com/zPVaE.png)

Interestingly, the number of iterations tails off as you increase max. Would be interesting if someone else could confirm this with their code.

If I were to start modelling this, I would start with the [geometric distribution](http://en.wikipedia.org/wiki/Geometric_distribution), and try to modify that. Essentially we're looking at a discrete, bounded distribution. So we have zero or more "failures" (not meeting the stopping condition), followed by one "success". The catch here, compared to the geometric or Poisson, is that the probability of success changes (also, like the Poisson, the geometric distribution is unbounded, but I think structurally the geometric is a good base). Assuming min=0, the basic mathematical form for P(X=k), 0 <= k <= max, where k is the number of iterations the loop runs, is, like the geometric distribution, the product of k failure terms and 1 success term, corresponding to k "false"s on the loop condition and 1 "true". (Note that this holds even to calculate the last probability, as the chance of stopping is then 1, which obviously makes no difference to a product).

Following on from this, an attempt to implement this in code, in R, looks like this:

```
fx = function(k,maximum)
{
    n=maximum+1;
    failure = factorial(n-1)/factorial(n-1-k) / n^k;
    success = (k+1) / n;
    failure * success
} 
```

This assumes min=0, but generalizing to arbitrary `min`s isn't difficult (see my comment on the OP). To explain the code. First, as shown by the OP, the probabilities all have `(min+1)` as a denominator, so we calculate the denominator, `n`. Next, we calculate the product of the failure terms. Here `factorial(n-1)/factorial(n-1-k)` means, for example, for min=2, n=3 and k=2: 2*1\. And it generalises to give you (n-1)*(n-2)*... for the total probability of failure. The probability of success increases as you get further into the loop, until finally, when `k=maximum`, it is 1.

Plotting this analytic formula gives the same results as the OP, and the same shape as the simulation plotted by John Kugelman.

![enter image description here](https://i.stack.imgur.com/JToa5.png)

Incidentally the R code to do this is as follows

```
plot_probability_mass_function = function(maximum)
{
    x=0:maximum;
    barplot(fx(x,max(x)), names.arg=x, main=paste("max",maximum), ylab="P(X=x)");
}

par(mfrow=c(3,1))
plot_probability_mass_function(2)
plot_probability_mass_function(10)
plot_probability_mass_function(100) 
```

Mathematically, the distribution is, if I've got my maths right, given by:

![enter image description here](https://i.stack.imgur.com/UqWIo.gif)

which simplifies to

![enter image description here](https://i.stack.imgur.com/CsaaT.gif)

(thanks a bunch to [http://www.codecogs.com/latex/eqneditor.php](http://www.codecogs.com/latex/eqneditor.php))

The latter is given by the R function

```
function(x,m) { factorial(m)*(x+1)/(factorial(m-x)*(m+1)^(x+1)) } 
```

Plotting the mean number of iterations is done like this in R

```
meanf = function(minimum)
{
    x = 0:minimum
    probs = f(x,minimum)
    x %*% probs
}

meanf = function(maximum)
{
    x = 0:maximum
    probs = f(x,maximum)
    x %*% probs
}

par(mfrow=c(2,1))
max_range = 1:10
plot(sapply(max_range, meanf) ~ max_range, ylab="Mean number of iterations", xlab="max")
max_range = 1:100
plot(sapply(max_range, meanf) ~ max_range, ylab="Mean number of iterations", xlab="max") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:50:08.423

[这是我用matplotlib](http://matplotlib.org/)绘制的一些具体结果。X 轴是`i`达到的值。Y 轴是达到该值的次数。

分布显然不均匀。我不知道它是什么发行版；我的统计知识很生疏。

### 1\. 最小值 = 10，最大值 = 20，迭代次数 = 100,000

![](https://i.stack.imgur.com/odOZ7.png)

### 2\. 最小值 = 100，最大值 = 200，迭代次数 = 100,000

![](https://i.stack.imgur.com/dCM9M.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:40:48.643

我不知道它背后的数学，但我知道如何计算它！在哈斯克尔：

```
import Numeric.Probability.Distribution

iterations min max = iteration 0
  where
  iteration i = do
    x <- uniform [min..max]
    if i < x
      then iteration (i + 1)
      else return i 
```

现在`expected (iterations 0 2)`为您提供 ~0.89 的预期值。也许具有必要数学知识的人可以解释我在这里实际在做什么。因为您从 0 开始，所以循环将始终至少运行`min`几次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:23:23.927

我相信，如果有足够的执行次数，它仍然会符合`randomInteger`函数的分布。

但这可能是一个更适合在[MATHEMATICS](https://math.stackexchange.com/)上提出的问题。

# linux - pmap 输出中的零（删除）是什么？

> ID：16112028
> 
> 赞同：6
> 
> 时间：2013-04-19T19:19:20.983
> 
> 标签：linux, memory-management

Linux中命令输出的`zero (deleted)`下列是什么`Mapping`意思？`pmap -x pid`它与 有何不同`anon`？我无法从手册页中找到任何内容。

```
Address   Kbytes     RSS   Dirty Mode   Mapping
adf00000     132      36      36 rw---    [ anon ]
adf21000     892       0       0 -----    [ anon ]
ae0ff000       4       0       0 -----    [ anon ]
aea69000     504       0       0 rw-s-  zero (deleted)
aeae7000       4       0       0 -----    [ anon ]
aeae8000    8192      24      24 rw---    [ anon ]
af2e8000   65536   11968       0 rw-s-  apc.eEfjkY (deleted)
b32fd000     236       8       0 r-x--  libxslt.so.1.1.26
b3338000       4       4       4 rw---  libxslt.so.1.1.26 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T13:45:18.630

您可以观察到列下`shared`由“ **s** ”指示的映射`mode`显示为已删除。`MAP_SHARED`调用中标志声明的共享映射`mmap`将在 pmap 中显示为已删除，因为进程使用的共享内存区域必须只计算一次。

至于零，所有不受文件支持的映射都被`zero`初始化。我们知道linux只有在数据写入的时候才会分配内存。

因此，任何**共享**和**未初始化**的区域（进程没有写入数据）都将被 pmap 记为`zero(deleted)`.

我还观察到，如果您删除`MAP_SHARED`并用 say 替换它`MAP_PRIVATE`，

`addr = mmap(NULL,4096,PROT_READ | PROT_WRITE,MAP_ANON|MAP_PRIVATE,-1,0)`

零（已删除）将不再出现在 pmap 输出中。

# c# - 如何在.NET 中向控制台应用程序进程发送控制中断（或等效信号）？

> ID：16112029
> 
> 赞同：2
> 
> 时间：2013-04-19T19:19:24.160
> 
> 标签：c#, .net, console-application, interrupt, break

假设我启动了一个进程来运行像 7z.exe (7-Zip Archiver) 这样的控制台应用程序。我正在创建没有窗口的进程，并且正在重定向标准输出。

我想知道如何停止“Process.Kill”以外的进程，因为这会导致留下不完整/损坏的存档文件。

如果我在从普通命令控制台窗口运行 7z.exe 时按 CTRL-BREAK，它会正常关闭并删除不完整的文件。

如果 cmd.exe 可以启动一个进程并向其发送 ctrl-break 信号，那么我自己的应用程序如何启动一个进程并向其发送 ctrl-break（或等效）信号，以便该进程正常关闭？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:09:28.437

如果需要，你可以做一个 thread.sleep 来暂停它。如果你想完全停止它，我会设置一个监视变量，然后暂停你的线程，处理任何现有数据（这可能是 7zip 正在做的），然后执行 process.kill。我认为没有（或不知道）一种方法可以“优雅地”自动处理中止进程。程序员可以优雅地处理中断的退出条件，这取决于您。

# jsp - 字符编码 - RequestDispatcher

> ID：16112030
> 
> 赞同：2
> 
> 时间：2013-04-19T19:19:30.597
> 
> 标签：jsp, servlets, character-encoding

我有一个 servlet，我使用

```
String error = "error";
request.setAttribute("loginError", error);
request.setCharacterEncoding("UTF-8");
request.getRequestDispatcher("/index.jsp").forward(request, response); 
```

我用

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-9"
pageEncoding="ISO-8859-9"%> 
```

在我的jsp页面中，也

```
request.setCharacterEncoding("UTF-8"); 
```

但是如果我转发一个页面，这个页面的编码就不起作用。我该如何处理这种编码？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-03-17T18:00:31.970

我有同样的问题，我找到了你未回答的问题。我通过添加解决了它

```
response.setContentType("text/html;charset=UTF-8"); 
```

# java - 将 LinkedBlockingQueue<> 中的数据放入非对象类型的数组中

> ID：16112034
> 
> 赞同：2
> 
> 时间：2013-04-19T19:19:50.860
> 
> 标签：java, exception, casting, classcastexception, toarray

我正在尝试使用 .toArray() 从 LinkedBlockingQueue 复制到 dataStuff[] 数据数组，但出现异常

```
Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [LdataStuff;
    at Main.main(Main.java:30) 
```

使用以下代码

```
public static BlockingQueue<dataStuff> recurseFragments = new LinkedBlockingQueue<dataStuff>();

    public static void main(String args[]) throws IOException
    {
        dataStuff[] data = (dataStuff[]) recurseFragments.toArray();
    } 
```

我知道它在将 recurseFragments 吐入数组之前将其放入 object[] 中，但是为什么强制转换不起作用，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:24:02.247

尝试使用[其他 toArray 方法](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html#toArray%28T%5b%5d%29)

```
dataStuff[] data = recurseFragments.toArray(new datastuff[0]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:25:36.547

尝试这个：

```
dataStuff[] data = recurseFragments.toArray(new dataStuff[0]) 
```

使用 toArray 的这个签名，您可以获得正确的返回类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:28:18.700

因为`toArray()`返回一个`Object[]`

```
Object[] toArray(); 
```

所以，你应该 `toArray(T[] a)`改用。

```
<T> T[] toArray(T[] a); 
```

以这种方式使用它：

```
recurseFragments.toArray(new datastuff[0]); 
```

# javascript - EmberJS View - 检测是否所有子视图都已呈现

> ID：16112035
> 
> 赞同：4
> 
> 时间：2013-04-19T19:19:51.280
> 
> 标签：javascript, callback, ember.js, views, render

设想：

*   呈现笔记集合（异步加载）
*   两个视图：表示笔记列表的 NoteView 和表示单个笔记的 NoteOnListView
*   我必须运行一些代码（masonry.js）来放置它们，但它需要首先呈现所有笔记，它需要知道这些孩子的数量和属性

我有一个模板*notes.hjs*：

```
{{#each note in controller}}
    {{view App.NoteOnListView}}
{{/each}} 
```

和观点：

```
App.NotesView = Ember.View.extend({
    didInsertElement: function() {
        console.log('the list has been rendered');
    }
});

App.NoteOnListView = Ember.View.extend({
    didInsertElement: function() {
        console.log('a note has been inserted');
    },
    afterRender: function() {
        console.log('a note has been rendered');
    }
}); 
```

控制台输出：

```
the list has been rendered 
XHR finished loading: "http://localhost:3000/notes"
a note has been rendered
a note has been inserted
a note has been rendered
a note has been inserted
// ... 
a note has been rendered
a note has been inserted
// This is where I need to run code! 
```

对于这个问题，我有一些可能的解决方案，但它们看起来都很老套。有没有一种好方法可以告诉 NotesView 等到它的所有孩子都被渲染？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-21T01:52:42.403

如果您将策略更改为[继承 Ember.CollectionView](http://emberjs.com/api/classes/Ember.CollectionView.html)，您可以使用以下方法来接收您的子视图已完成渲染的通知。

```
App.CV = Ember.CollectionView.extend( {
    itemViewClass : Ember.View.extend( {
        templateName : 'item'
    } ),

    onChildViewsChanged : function( obj, key ){
        var length = this.get( 'childViews.length' );
        if( length > 0 ){
            Ember.run.scheduleOnce( 'afterRender', this, 'childViewsDidRender' );
        }
    }.observes( 'childViews' ),

    childViewsDidRender : function(){
        //child views have finished rendering!     
    }
} ); 
```

这是一个在 Ember 1.0 RC2 中演示此技术的[示例。](http://jsfiddle.net/ethan_selzer/bwyeT/2/)

有关 Ember.run.scheduleOnce 的更多信息，请参阅[文档](http://emberjs.com/api/classes/Ember.run.html#method_scheduleOnce)。

# javascript - Chrome 扩展：获取页面上的所有图像

> ID：16112036
> 
> 赞同：4
> 
> 时间：2013-04-19T19:19:52.777
> 
> 标签：javascript, image, google-chrome-extension

在 Google 文档和 Stackoverflow 中阅读了数小时后，我决定发布这个问题。已经有一些类似的，但我还没有找到真正帮助我的答案。但是，我正在尝试获取嵌入页面的所有图像的列表，以便在 Chrome 扩展中使用它。我试过用简单的 Javascript (document.images) 来做，但没有得到任何条目。经过一些研究，我发现从页面读取元素的唯一方法是使用 EventListener。该功能应使用 chrome 上下文菜单启动。

```
 chrome.contextMenus.create({
    title: "ExampleFunction", 
    contexts:["page"], 
    onclick: exampleFunction,
}); 
```

这部分工作正常，但是调用函数后如何获取图像？我尝试了一些使用事件监听器的方法，终于得到了这个功能：

```
function downloadImages(info,tab) {
    alert('o');
    chrome.extension.onRequest.addListener(function(result){
        for (var i in result.images) {
            allImages.push(result.images[i]);
        }
        alert(allImages[0]);
    });
} 
```

第一个警报完美无缺，但其他一切都无济于事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:04:30.510

首先，您必须实际获取图像，这样做的方法是使用[`content script`](http://developer.chrome.com/extensions/content_scripts.html). 我假设你的 onclick 是一个错字，而你有这个：

```
chrome.contextMenus.create({
  title: "ExampleFunction", 
  contexts:["page"], 
  onclick: downloadImages,
}); 
```

然后你会想要这样的东西：

```
function downloadImages(info,tab) {
  alert('o');
  chrome.tabs.executeScript(tab.id,{file:"script.js"});
}

chrome.runtime.onMessage.addListener(function(message){
  //In case you want to do other things too this is a simple way to handle it
  if(message.method == "downloadImages"){
    message.images.forEach(function(v){
      allImages.push(v);
    });
    alert(allImages[0]);
  }
}); 
```

然后对于您的 script.js：

```
var images = [];
for(var i = 0; i < document.images.length; i++){
  images.push(document.images[i].src);
}
chrome.runtime.sendMessage({method:"downloadImages",images:images}); 
```

这会抓取图像数组并将`src`每个图像的返回到您的背景页面，这样您就可以对它做任何您想做的事情。

# perl - 使用 perl 搜索模式

> ID：16112039
> 
> 赞同：-1
> 
> 时间：2013-04-19T19:20:04.660
> 
> 标签：perl, search, design-patterns

Perl 新手。

在 FTP 服务器上查找搜索模式时需要帮助

下面的例子

```
# more file1
1 
2
3 
```

目录

```
# ls
1
2
3
4 
```

如何使用 perl 搜索文件中的模式并匹配目录中的文件。并显示如下

```
1
2 
3 
```

感谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:28:27.667

```
my $dir = "/path/to/some/dir";
my $filename = "some_filename";
my @files_to_find = ();

open my $file, '<', $filename or die $!;
while( my $line = <$file> ) {
    chomp $line;
    push @files_to_find, $line;
}
close $file;

for my $f (@files_to_find) {
    print "$f\n" if -e "$dir/$f";
} 
```

# javascript - 计算另一页上的课程并显示它们

> ID：16112044
> 
> 赞同：0
> 
> 时间：2013-04-19T19:20:51.197
> 
> 标签：javascript, jquery

为了在将文档添加到站点时节省大量编辑数字的工作，我决定使用 javascript 来计算类中元素的数量`doc`。

我主要有两个问题：

*   显示变量时出现问题。我最初认为这是因为我没有添加`function`，但是当我尝试添加它时，变量仍然没有显示。

*   我想计算的类的元素在另一个页面上，我不知道如何链接到它。为此，我尝试过`var x = $('URL: /*pageURL*/ .doc').length;`但没有奏效。

本质上，我希望具有所述类名的总元素并将其显示在 span 元素中。

目前我有一些类似于下面显示的内容：

```
 <script>
 var Items = $('.doc').length;
 document.getElementById("display").innerHTML=Items;
 </script>
 <span id="display"></span> 
```

[在此处](http://en.wikipedia.org/wiki/Special%3aStatistics)找到了一个类似的示例，其中显示了文章的总数。

**编辑：**

@ian 此代码将添加到主页 domain.net/home.html。我想链接到包含此文档的页面 domain.net/documents.html。我以前在某个地方看到过这种情况，如果我没记错的话，他们`url:domainname.com/count`在代码中的某个地方使用过。希望这可以帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:32:53.553

这是一个 jQuery 调用，用于检索 url“./”（此页面）并解析所有具有类“lsep”“$('.lsep', data)”的元素的结果数据。如果您从浏览器的调试控制台中运行它，您应该会返回一个大于 5 左右的数字。

```
$.get("./", function(data, textStatus, jqXHR)
{
    console.log("Instances of class: " + $('.lsep', data).length)
}); 
```

[要记住的一件重要事情是，如果您尝试调用的 URL 不在同一来源](http://en.wikipedia.org/wiki/Same_origin_policy)，您将遇到问题。

这是一个更新的代码片段，用于执行您所描述的操作：

```
$(document).ready(
    function ()
    {
      //var url = "/document.html" //this is what you'd have for url
      //var container = $("#display"); //this is what you'd have for container
      //var className = '.data'; //this is what you'd have for className

        var url = "./"; //the document you want to parse
        var container = $("#question-header"); //the container to update
        var className = '.lsep'; //the class to search for

        $.get(url, function (data, textStatus, jqXHR) {
            $(container).html($(className, data).length);
        });
    }
); 
```

如果您从浏览器的调试控制台运行上述代码，它将用使用类名“.lsep”的实例数替换“**在另一个页面上计数并显示它们”的问题标题文本。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:38:15.313

首先，您必须等到`document`准备好后再操作`DOM`元素，除非您的代码放在您操作的元素的定义**之后**，而您的示例中并非如此。您可以将 a 传递`function`给，`$`它只会在文档准备好时运行它。

```
$(function () {
    //html() allows to set the innerHTML property of an element
    $('#display').html($('.doc').length);
}); 
```

现在，如果你的元素属于另一个`document`，那显然是行不通的。但是，如果您曾经`window.open`打开另一个窗口，其中包含包含`.doc`元素的文档，您可以将上述脚本放在该页面中，并依赖于在父窗口`window.opener`中引用。`span`

```
$('#display', opener.document.body).html($('.doc').length); 
```

另一种选择是使用**ajax**访问其他页面的内容。在这里，`data`将包含`your_other_page.html`文档的 HTML，然后您可以使用 jQuery 像 DOM 结构一样对其进行操作。

```
$.get('your_other_page.html', function(data) {
    $('#display').html($('.doc', data).length);
}); 
```

# jquery - 以jquery形式获取值

> ID：16112052
> 
> 赞同：0
> 
> 时间：2013-04-19T19:21:41.513
> 
> 标签：jquery, get

我真的很震惊这里。我有一个表单，我想提交它并在 Jquery 中的其他表单上获取价值：

```
<form id="rentals_form" name="popup_form" action="rentals.php" method="POST">
    <input alt="" style="display:none;" id="copy_id" name="copy_id" type="text">
</form>

<button 
    class="save_button" 
    value="copy_listing_button" 
    onclick="document.forms[$('#copy_listing option:selected').val()+'_form'].submit();" 
    style="font-size:11px; padding:0 3px 0 3px;">
        Go
</button> 
```

现在我需要在其他页面上获取值`rentals.php`：

```
$(document).ready(function() 
{
    // here I want to get copy_id value.please note this is jquery so i want to get in jquery
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:28:11.383

当您按下 menu.html 中的任何按钮 a、b 或 c 时，您说它会加载 index.html。因此，一旦 index.html 在浏览器中加载，当前 dom 中的上一页中的任何按钮都没有历史记录。

您需要做的是从 menu.html 提交信息，然后可以在 index.html 中使用这些信息。请参阅表单提交，或至少查看请求参数。

您可以使用“window.location”在 index.html 上的 javascript 中访问请求参数并搜索字符串。

编辑：我看到你更新了这个问题。请参阅下面发布的有关使用 php 访问请求参数的其他答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:39:48.327

请参考以下链接。它可以帮助您实现目标。 [PHP 将变量传递到下一页](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)

```
$(document).ready(function() {
    $('#button_ID').live('click',function(e){
        e.preventDefault();
        var currentId = $(this).attr('id'); 
        var form_id = $('#'+currentId).closest('form').attr('id');
        var copy_id = $("#"+form_id+" input[name=copy_id]").val();

        $.post('rentals.php', { copy_id : copy_id }, function (data) {  
            alert(data);
        }, 'json'); 
        return false;
    });
}); 
```

在rentals.php 上使用$_POST['copy_id'] 获取copy_is 的值；

# python - 从 Sublime Text 2 运行 .py 文件

> ID：16112054
> 
> 赞同：1
> 
> 时间：2013-04-19T19:21:47.443
> 
> 标签：python, sublimetext2

大家好，我是编程新手。

我正在学习 Python，我想使用 Sublime Text 作为 IDE。

我搜索并发现如果没有“eofError”，就不可能从 sublime text2 运行 python 代码。

现在，我想知道是否可以通过键盘快捷键直接从 sublime 文本启动 .py，而不是保存它，然后返回 Windows 资源管理器，然后双击它。

我希望它在这样的窗口中打开：http: [//image.noelshack.com/fichiers/2013/16/1366399189-nnnnn.png](http://image.noelshack.com/fichiers/2013/16/1366399189-nnnnn.png)

谢谢。

* * *

我刚刚在这里找到了一个与 IDLE 中的“F5”键基本相同的解决方案。

感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:28:55.887

伟大的编辑。这是在 Sublime Text 2 中创建宏的资源：

[http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-banish-repetitive-tasks-with-sublime-text-2-macros/](http://webdesign.tutsplus.com/tutorials/workflow-tutorials/quick-tip-banish-repetitive-tasks-with-sublime-text-2-macros/)

上一篇文章可能也有您正在寻找的内容：

[在 Sublime Text 2 中以交互方式运行 Python](https://stackoverflow.com/questions/14080041/running-python-interactively-from-within-sublime-text-2)

# ios - ListView 的 iOS 复杂查询

> ID：16112059
> 
> 赞同：0
> 
> 时间：2013-04-19T19:22:10.177
> 
> 标签：ios, core-data

我有一个模型：

```
Place:
title
address
category <--->> Category:
                title 
```

我希望有一个表格视图，其中部分作为类别名称，但能够根据地点标题进行搜索。现在，为仅具有与某些指定 searchText 匹配的类别和标题的表视图获取一组数据的最佳方法是什么？我目前将结果放在 NSDictionary 中，但它似乎效率不高。特别是在执行删除类型操作时 - 我遇到了很多问题。目前我正在执行以下操作，但更愿意直接返回 FetchedResultsController。

```
+ (NSMutableDictionary *)getDictionaryResultsInContext: (NSManagedObjectContext *)context
                                         forSearchText: (NSString *)searchText {

    NSFetchRequest *req = [NSFetchRequest fetchRequestWithEntityName:@"Place"];
    if(![searchText isEqualToString:@""] && searchText != nil){
        req.predicate = [NSPredicate predicateWithFormat:@"(category.name CONTAINS[cd] %@) OR (placeTitle CONTAINS[cd] %@) OR (details CONTAINS[cd] %@)", searchText, searchText, searchText];
        NSLog(@"ModelHelper.getResults: Search text given, creating predicate: %@", req.predicate);
    }
    req.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"placeTitle"
                                                                                 ascending:YES
                                                                                  selector:@selector(localizedCaseInsensitiveCompare:)]];
    NSFetchedResultsController *controller = [[NSFetchedResultsController alloc]initWithFetchRequest:req
                                                                                managedObjectContext:context
                                                                                  sectionNameKeyPath:nil
                                                                                           cacheName:nil];
    NSError *error = nil;
    [controller performFetch:&error];
    if (error) {
        NSLog(@"- Model Search ERROR: %@ (%@)", [error localizedDescription], [error localizedFailureReason]);
    }

    NSLog(@"- Got results: %i", [controller.fetchedObjects count]);

    NSMutableDictionary* ret = [[NSMutableDictionary alloc]init];

    for(Place* obj in controller.fetchedObjects){
        if(obj != nil){
            NSManagedObjectID* categoryId = obj.category.objectID;
            if(categoryId != nil){
                NSMutableArray* ary = (NSMutableArray*)[ret objectForKey:categoryId];
                if(ary == NULL){
                    ary = [[NSMutableArray alloc]init];
                    [ret setObject:ary forKey:categoryId];
                }
                [ary addObject:obj];
            }
            else {
                // Shouldnt happen
                NSLog(@"- Category was nil.");
            }
        }
        else {
            // Shouldnt happen
            NSLog(@"- Place was nil.");
        }
    }

    return(ret);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:52:43.383

您的数据模型没有意义。你真的想要一个多对多的关系。

类别只有在可以包含多个地点时才有意义。所以`category->place`关系必须是对多的。可选地，一个地方可以属于多个类别，`place->category`也可以属于多个类别；如果不是，它应该是一对一的关系。

所以要么

```
Place <<----------> Category 
```

或者

```
Place <<--------->> Category 
```

但不是您问题中的版本。在您的场景中，作为餐厅的地方将获得标题为“餐厅”的类别，而对于下一个为餐厅的地方，您必须创建一个标题为“餐厅”的新类别。没有意义。

在简单的情况下（一对多），您的谓词是

```
[NSPredicate predicateWithFormat:
  @"title CONTAINS[cd] %@ OR address CONTAINS[cd] %@", searchTerm, searchTerm]; 
```

对于更复杂的情况（多对多），您会遇到一个地方可以在多个部分中列出的问题。因此，您必须获取类别，使用类别位置的计数作为每个部分中的行数，并使用此谓词进行过滤：

```
[NSPredicate predicateWithFormat:
  @"ANY places.title CONTAINS[cd] %@ OR ANY places.address CONTAINS[cd] %@",
  searchTerm, searchTerm]; 
```

# java - JMX：将 AttributeList 转换为 Map

> ID：16112061
> 
> 赞同：0
> 
> 时间：2013-04-19T19:22:12.420
> 
> 标签：java, jmx

我正在编写一个使用 JMX 的监控应用程序。我想将`AttributeList`返回的转换为一个`Map`，其键是属性名称，值是属性值。在我的搜索中，我只找到了一种依赖于使用 EJB 容器的方法。我想要的是一个不依赖任何容器的轻量级解决方案。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:54:10.317

我不确定我是否正确理解了您的问题，但此方法会将[AttributeList](http://docs.oracle.com/javase/1.5.0/docs/api/javax/management/AttributeList.html)转换为地图。

```
public Map<String, Object> attrListToMap(AttributeList attrList) {
    Map<String, Object> attributeMap = new HashMap<String, Object>(attrList.size());
    for(Attribute attr: attrList.asList()) {
        attributeMap.put(attr.getName(), attr.getValue());
    }
    return attributeMap;
} 
```

# grails - Grails 动态查找器会被应用程序代码破坏吗？

> ID：16112062
> 
> 赞同：1
> 
> 时间：2013-04-19T19:22:22.537
> 
> 标签：grails, branch, grails-orm, dynamic-finders

我正在处理的项目中有一些代码，其中动态查找器在一个代码分支中的行为与在另一个代码分支中的行为不同。

这行代码返回我所有的广告商（其中有 8 个），无论我在哪个分支。

```
Advertiser.findAllByOwner(ownerInstance) 
```

但是当我开始添加条件时，事情变得很奇怪。在分支 A 中，以下代码返回我的所有广告客户：

```
Advertiser.findAllByOwner(ownerInstance, [max: 25]) 
```

但在分支 B 中，该代码仅返回 1 个广告客户。

应用程序代码的更改似乎不可能影响动态查找器的工作方式。我错了吗？还有什么可能导致这不起作用吗？

**编辑**

我被要求发布我的班级定义。我不会发布所有内容，而是发布我认为重要的部分：

```
static mapping = {
    owner fetch: 'join'
    category fetch: 'join'
    subcategory fetch: 'join'
}

static fetchMode = [
      grades: 'eager',
      advertiserKeywords: 'eager',
      advertiserConnections: 'eager'
] 
```

此代码存在于分支 B 中，但在分支 A 中不存在。当我将其拉出时，事情现在按预期工作。

我决定用这个代码做更多的挖掘，看看我能观察到什么。当我使用`withCriteria`而不是动态查找器时，我发现了一些有趣的东西：

`Advertiser.withCriteria{owner{idEq(ownerInstance.id)}}`

我发现这返回了数千个重复项！所以我尝试使用`listDistinct`：

`Adviertiser.createCriteria().listDistinct{owner{idEq(ownerInstance.id)}}`

现在这将返回我的所有 8 个广告商，没有重复。但是如果我试图限制结果呢？

```
Advertiser.createCriteria().listDistinct{
    owner{idEq(ownerInstance.id)}
    maxResults 25
} 
```

现在这会返回一个结果，就像我的动态查找器一样。当我加速`maxResults`到 100K 时，现在我得到了全部 8 个结果。

那么发生了什么？似乎连接或急切获取（或两者）生成的 sql 返回了数千个重复项。默认情况下，Grails 动态查找器必须返回不同的结果，所以当我不限制它们时，我没有发现任何奇怪的东西。但是一旦我设置了一个限制，由于记录是按 ID 排序的，前 25 条记录都将是重复记录，这意味着只会返回一个不同的记录。

至于joins和eager fetching，我不知道代码试图解决什么问题，所以我不能说是否有必要；问题是，为什么在我的班级中有这段代码会产生这么多重复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:55:29.620

我发现添加了 Eager fetching（许多级别的深度）是为了加快某些报告的呈现速度，因为正在进行数百次查询。曾尝试过按需获取，但其他开发人员很难使用查找器或 Grails 标准深入一层以上。

所以对上述问题的一般答案是：**我们需要找到一种方法来对单个查询进行渴望获取，而不是默认情况下会在其他地方造成巨大的噩梦，这种方法可以在树下超过一层**

下一个问题是，怎么做？Grails 对它的支持不是很好，但是可以通过简单地使用 Hibernate 的 Criteria 类来实现。这是它的要点：

```
 def advertiser = Advertiser.createCriteria()
            .add(Restrictions.eq('id', advertiserId))
            .createCriteria('advertiserConnections', CriteriaSpecification.INNER_JOIN)
                .setFetchMode('serpEntries', FetchMode.JOIN)
                .uniqueResult() 
```

现在广告客户的`advertiserConnections`, 将被急切获取，`advertiserConnections`'`serpEntries`也将被急切获取。您可以根据需要沿着树向下走。然后你可以默认让你的类变得懒惰——它们绝对应该用于`hasMany`场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T11:09:46.453

由于您的查询正在检索重复项，因此 25 条记录的限制有可能返回相同的数据，因此您的不同将减少到一条记录。

尝试为您的类定义`equals()`and `hashCode()`，特别是如果您有一些具有复合主键的类，或者用作`hasMany`.

我还建议您尝试消除可能性。逐一删除 fetch 和 eager 以查看它如何影响您的结果数据（无限制）。

# c++ - 如何使用 ffmpeg 的 swscale 从 NV12 转换为 RGB32？

> ID：16112063
> 
> 赞同：1
> 
> 时间：2013-04-19T19:22:23.533
> 
> 标签：c++, video, ffmpeg

假设我在内存中有一个 NV12 帧作为字节数组。我知道：

*   它的宽度和高度
*   它的步幅（包括填充在内的线的总宽度），根据 NV12 规范，对于 Y 和 UV 分量来说是相同的
*   我知道 Y 从哪里开始，U 从 Y +（步幅 * 高度）开始，V 从 U + 1 开始（与 U 交错）。

现在这就是我到目前为止所拥有的：

```
SwsContext* context = sws_getContext(frameWidth, frameHeight, AV_PIX_FMT_NV12, frameWidth, frameHeight, AV_PIX_FMT_RGB32, 0, nullptr, nullptr, nullptr);
sws_scale(context, 
```

所以我不知道[sws_scale](http://ffmpeg.org/doxygen/0.6/swscale_8h.html#8a2e20acdddf0767448ff4912d7e1eee)的参数应该是什么：

*   srcSlice：指向字节数组的指针？它显然应该是一个指向指针的指针，但我所拥有的只是一个一维字节数组。
*   srcStride ：显然需要一组步幅，但我对整个文件只有一个步幅。我应该传递一个只有一个元素的数组吗？
*   srcSliceY ：我猜是第一个字节的偏移量？那么应该是0。
*   srcSliceH ：我猜的帧高度
*   dst ：再一次指向一个指针，但我的目标输出实际上只是另一个字节数组......
*   dstStride : Width * 4 我猜？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T09:46:20.083

```
/// uint8_t * Y;
/// uint8_t * out;

// 2 planes for NV12: Y and interleaved UV
uint8_t * data[2] = {Y, Y + Stride * Height}; 

// Strides for Y and UV
// U and V have Stride/2 bytes per line; 
// Thus, we have 2 * Stride/2 bytes per line in UV plane
int linesize[2] = {Stride, Stride}; 

uint8_t * outData[1] = {out}; // RGB have one plane 
int outLinesize[1] = {frameWidth*4}; // RGB32 Stride

sws_scale(context, data, linesize, 0, Height, outData, outLinesize); 
```

# bash - 使用 make 编写 Bash 脚本

> ID：16112066
> 
> 赞同：4
> 
> 时间：2013-04-19T19:22:30.187
> 
> 标签：bash, makefile

我有一个生成文件，用于在我正在处理的存储库中运行简单的 bash 脚本。我正在尝试进行新的 make 调用，它将自动将我登录到我的 mySQL 数据库。我的用户名和密码存储在一个已知位置的 .zinfo 文件中（例如“/u/r/z/myid/.zinfo”）。我正在尝试读取此文件的行以获取我的密码，其格式为：

```
user = csj483
database = cs495z_csj483
password = fjlID9dD923 
```

这是我试图从 makefile 运行的代码，但它不起作用。如果我直接在 shell 中运行相同的代码，它似乎可以正常工作。请注意，我必须使用双 $$s 因为 make 不喜欢单的。

```
login:
    for line in $$(cat /u/z/users/cs327e/$$USER/.zinfo); \
    do \
        PASSWORD=$$line; \
        echo $$PASSWORD; \
    done 
    echo $$PASSWORD 
```

此时，我只是想获取密码，它应该是 PASSWORD 在循环中设置的最后一个值。如果有人可以建议一种更简单的方法来检索密码，或者在我的代码中指出我的错误，我将不胜感激。最终，我还想检索数据库名称，也将不胜感激。我是 bash 新手，但在许多其他语言方面经验丰富。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T19:39:29.053

您没有具体说明“不工作”的含义；在提问时，请始终非常清楚您键入的命令、得到的结果（最好是剪切和粘贴）以及为什么这不是您所期望的。

无论如何，您看到的最有可能的行为是第一个回显显示您期望的输出，但第二个没有。这是因为将在*单独的 shell*`make`中调用配方中的每个逻辑行。因此，for 循环在一个 shell 中运行并设置环境变量，然后该 shell 退出，最后一个在新 shell 中运行......不再设置。*`PASSWORD``echo``PASSWORD`*

 *您需要将整个命令行放在配方中的单个逻辑行中：

```
login:
         for line in $$(cat /u/z/users/cs327e/$$USER/.zinfo); do \
             PASSWORD=$$line; \
             echo $$PASSWORD; \
         done \
         && echo $$PASSWORD 
```

最后一件事要记住：您说您正在运行 bash 脚本，但 make 不*运行*bash。无论您个人使用什么 shell，它都会运行`/bin/sh`（想象一下如果 makefile 使用用户碰巧使用的任何 shell 会造成怎样的破坏！）。您最好的选择是以可移植的 shell 语法编写配方。如果您真的不能这样做，请务必`SHELL := /bin/bash`在您的设置中`Makefile`强制 make 使用 bash。

预计到达时间：

关于你更大的问题，你有很多选择。如果您完全可以控制 zinfo 文件的格式，那么我强烈建议您将其定义为使用与用于定义变量的 shell 相同的语法。`=`在上面的示例中，如果您删除了符号周围的空格，如下所示：

```
user=csj483
database=cs495z_csj483
password=fjlID9dD923 
```

然后你就有了一个带有变量赋值的有效 shell 脚本。现在您可以在 makefile 中获取此脚本，并且您的生活非常轻松：

```
login:
        . /u/z/users/cs327e/$$USER/.zinfo \
            && echo user is $$user \
            && echo database is $$database \
            && echo password is $$password 
```

如果您无法控制 zinfo 文件的语法，那么生活会更加艰难。您可以使用 eval，如下所示：

```
login:
        while read var eq value; do \
            eval $$var="$$value"; \
        done < /u/z/users/cs327e/$$USER/.zinfo \
            && echo user is $$user \
            && echo database is $$database \
            && echo password is $$password 
```

此版本仅在“=”周围有空格时才有效。如果您想同时支持两者，那也是可行的。*

# iphone - 如何验证下载文件的完整性？

> ID：16112069
> 
> 赞同：1
> 
> 时间：2013-04-19T19:22:53.737
> 
> 标签：iphone, ios, objective-c, networking, nsurlconnection

StoreKit 有一个错误，可能导致不完整的下载被标记为“已完成”。

我见过一些应用程序在应用内购买对它们进行完整性检查后下载大文件。这是怎么做到的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:32:02.463

我在自己的应用程序中所做的事情是传递一个带有将要下载的资源列表的 JSON。除了传递资源的 URL，我还传递了它的校验和。下载给定文件后，我将 JSON 中的校验和与文件本身的校验和进行了比较。你可以使用这样的[东西](https://stackoverflow.com/questions/1524604/md5-algorithm-in-objective-c)。

# c# - 我的datagridview一直说找不到名为URL的列

> ID：16112070
> 
> 赞同：0
> 
> 时间：2013-04-19T19:22:55.740
> 
> 标签：c#, csv, datagridview

我收到一个名为 URL 未找到错误的列。

我添加了一个新的 dataGridView 并创建了 2 列。我将列命名为 URL 和 Offensive。我仅将 CSV 文件中的数据导入第 1 列。

```
 TextFieldParser parser = new TextFieldParser(@"C:\\file.csv");
 parser.TextFieldType = FieldType.Delimited;
 parser.SetDelimiters(",");
 while (!parser.EndOfData)
 {
    //Processing row
    string[] fields = parser.ReadFields();
    foreach (string field in fields)
    {
       //TODO: Process field
       DataGridViewRow row = (DataGridViewRow)dataGridView1.Rows[0].Clone();                    
       row.Cells["URL"].Value = field;
       row.Cells["Offensive"].Value = "";
       dataGridView1.Rows.Add(row);
    }
 }
 parser.Close(); 
```

# macos - EC2 生成的密钥 ssh 设置 OSX

> ID：16112072
> 
> 赞同：0
> 
> 时间：2013-04-19T19:23:02.503
> 
> 标签：macos, ssh

情况如下：

*   我使用 EC2 控制台生成并下载了 ssh 密钥作为 .pem 文件
*   我用 PC 把这个密钥给了我的同事，他已经能够使用 PuTTY 很好地登录到服务器。
*   我已经尝试了几个小时来找出将 .pem 文件放在哪里以便我可以调用

    ssh -v [服务器 IP 地址] -l [用户名]

我知道 IP 地址和用户名是准确的，因为这是我的同事正在使用的。我将 .pem 文件放在哪里，我设置了哪些权限？似乎每个关于这些东西的教程都假设您使用 ssh-keygen 生成了密钥，它显然会为您处理所有这些，而 EC2 上的说明并没有告诉您除了下载密钥之外该怎么做。

我目前的设置是这样的：

*   我复制了 .pem 文件中的文本并将其放入 ~/.ssh/id_rsa
*   我将权限设置为 chmod 600 id_rsa
*   我收到一个以“权限被拒绝（公钥）”行结尾的大错误

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:07:18.007

只需使用 ssh -i keyfile.pem user@host.com。这将使用身份文件（EC2 提供给您的.pem）

# ruby-on-rails - 使用 Nokogiri 提取元素

> ID：16112078
> 
> 赞同：2
> 
> 时间：2013-04-19T19:23:27.023
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, xpath, nokogiri

想知道是否有人可以帮助解决以下问题。我正在使用 Nokogiri 从[http://www.bbc.co.uk/sport/football/tables抓取一些数据](http://www.bbc.co.uk/sport/football/tables)

我想得到联赛表信息，到目前为止我得到了这个

```
def get_league_table # Get me Premier League Table
  doc = Nokogiri::HTML(open(FIXTURE_URL))
  table = doc.css('.table-stats')
  teams = table.xpath('following-sibling::*[1]').css('tr.team')
  teams.each do |team|
  position = team.css('.position-number').text.strip
  League.create!(position: position)
  end
end 
```

所以我想我会抓住.table-stats，然后用一类团队获取表格中的每一行，这些行包含我需要的所有信息，如位置编号、播放量、团队名称等。

一旦我在 tr.team 我想我可以做一个循环来从行中获取相关信息。

它是我坚持的 xpath 部分（除非我正在接近整个错误？），如何从 .t​​able-stats 进入 tr.team 类？

任何人都可以提供任何指示吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:26:26.050

这是我为动态解析表而制作的脚本，我根据您的情况对其进行了调整：

```
require 'open-uri'
require 'nokogiri'

url = 'http://www.bbc.co.uk/sport/football/tables'
doc = Nokogiri::HTML.parse(open url)
teams = doc.search('tbody tr.team')

keys = teams.first.search('td').map do |k|
  k['class'].gsub('-', '_').to_sym
end

hsh = teams.flat_map do |team|
  Hash[keys.zip(team.search('td').map(&:text))]
end

puts hsh 
```

# bash - Unix 脚本正在对输入进行排序

> ID：16112083
> 
> 赞同：0
> 
> 时间：2013-04-19T19:23:39.663
> 
> 标签：bash, unix

我有一段时间在这里完成我的家庭作业。也许你们会建议阅读什么或我可以使用哪些命令来创建以下内容：

创建一个 shell 脚本测试，其作用如下：

1.  该脚本将在终端屏幕上显示以下消息：输入文件名（通配符确定）
2.  该脚本将读取名称列表。
3.  对于列表中属于正确文件的每个文件，显示一个表格，列出文件中最常用的 10 个单词，按照最常用的顺序排列。包括计数。
4.  一遍又一遍地重复步骤 1-3，直到用户指示文件结束。这是通过输入单个字符 Ctrl-d 作为文件名来完成的。

这是我到目前为止所拥有的：

```
#!/bin/bash
echo 'Enter file names (wild cards OK)'
read input_source
if test -f "$input_source"
then 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:35:30.913

## 如何查找文件中最常用的十个单词

假设：

1.  给出的文件每行一个单词。
2.  文件并不大，因此效率不是主要问题。

您可以使用`sort`and`uniq`来查找文件中非唯一值的计数，然后`tail`切断除最后十个之外的所有值，并使用反向数字排序将它们按降序排列。

```
sort "$afile" | uniq -c | tail | sort -rd 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:42:24.030

一些技巧：

1.  可以访问完整的 bash 手册：起初令人生畏，但它是非常宝贵的参考资料——http: [//www.gnu.org/software/bash/manual/bashref.html](http://www.gnu.org/software/bash/manual/bashref.html)

2.  您可以在命令行获得有关 bash 内置函数的帮助：尝试`help read`

3.  该`read`命令可以使用选项处理打印提示`-p`（请参阅上一个提示）

4.  您将使用`while`循环完成最后一步：

    ```
    while read -p "the prompt" filenames; do 
        # ...
    done 
    ```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T22:01:35.463

我通常会忽略家庭作业问题，而没有表现出一些进步和努力学习的东西——但你很厚颜无耻，所以我会破例。

这就是你想要的

```
while read -ep 'Files?> ' files
do
    for file in $files
    do
        echo "== word counts for the $file =="
        tr -cs '[:alnum:]' '\n' < "$file" | sort | uniq -c | tail | sort -nr
    done
done 
```

现在=至少尝试了解上述内容...

ps：投票结束...

# c# - 使用可用和不可用时间的历史记录查找一段时间内的可用时间

> ID：16112086
> 
> 赞同：3
> 
> 时间：2013-04-19T19:24:00.243
> 
> 标签：c#, datetime

对于给定的时间跨度，例如 2013-01-01 08:00 和 2013-01-02 08:00（24 小时），随着时间的推移，某人可能已按顺序输入记录以表明它们可用或不可用。如果新输入的记录的时间跨度重叠，则只允许使用不同的类型（可用或不可用）。发生更改时会保留可用性记录。

如何确定给定的时间跨度是否完全可用？

例如，我可能有以下记录：

```
RecId | Start DateTime   | End DateTime     | Type
=====================================================
1     | 2013-01-01 08:00 | 2013-01-02 08:00 | Available
2     | 2013-01-01 08:00 | 2013-01-02 08:00 | Unavailable
3     | 2013-01-01 17:00 | 2013-01-02 08:00 | Available
4     | 2013-01-01 08:00 | 2013-01-02 17:00 | Available
5     | 2013-01-01 12:00 | 2013-01-02 14:00 | Unavailable 
```

鉴于上述记录，此人目前在 2013 年 1 月 1 日 08:00 至 12:00 和 14:00 至次日凌晨 0800 有空。

我现在想检查个人是否在 2013-01-01 11:00 到 2013-01-01 15:00 之间有空。答案应该是否定的，因为记录表明该人在该日期的 12:00 至 14:00 之间没有时间。

如果有帮助，该应用程序将查看某人是否有资格与另一名员工交换全部或部分预定轮班。可以与其他人进行轮班不同部分的多次交易。有人可以将他们的整个轮班换掉，然后为其他人工作该轮班的一部分，只要部分不重叠。当安排新交易时，我们需要能够检查员工实际上是否可以在请求的时间段内自由交易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T15:08:36.853

您可以使用[.NET 的时间段库](http://www.codeproject.com/Articles/168662/Time-Period-Library-for-NET)来计算重叠和相交的时间段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:30:15.267

如果我理解您的问题，则完全可用 =*连续*可用，即没有干预的不可用记录槽。换句话说，某人在某个日期上午 9 点到下午 5 点有空，但也有记录说在同一天从下午 2 点到下午 4 点不可用，则该日期从上午 9 点到下午 5 点不可用。

因此，要确定某人是否可用于给定的所需跨度，您检查是否没有不可用的跨度在该所需跨度内开始或结束，并检查可用跨度是否在该所需跨度开始或与之同时开始之前开始，并在所需跨度结束时或在所需跨度结束后结束。

PS您还必须确保所需的跨度不属于不可用的跨度。

PPS 复杂性——或缺乏简单性——是由您使用可以重叠的可用性和不可用性的开始和结束范围造成的；另一种方法是创建代表一天中的时间段的实体（也许最小的是一刻钟），并且对于每个人的每个时间段，您都知道该人是否有空。然后您可以查询数据库并要求给定插槽范围内的每个插槽的状态 = AVAILABLE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:08:33.277

您似乎正在记录三种状态（可用、不可用和未定义），而只需要两种状态（可用或不可用）。

如果您将某个人设为不可用的默认状态（因为他们大部分时间都不在工作），那么您需要维护的只是可用时间段。这使得检查插槽是否空闲变得微不足道。

如果一个插槽是空闲的，那么您只需在交易后该插槽中的任何一个仍然空闲的情况下创建新的可用时段。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:31:10.917

将记录的条目抽象为具有以下结构的对象列表： `class AvailableSlot { public DateTime start; public DateTime end; }`

现在您可以使用 LINQ 来解决您的问题：

```
 var availableSlots = new List<AvailableSlot>();
        //Read the record file and populate availableSlots
        DateTime inputStart = DateTime.Now; 
        DateTime inputEnd = DateTime.Now.AddHours(2);
        var isAvailable = availableSlots.Any(a => a.start <= inputStart && a.end >= inputEnd); 
```

# macos - 使用 'sed' 将第一次出现的打开/关闭 XML 标记替换为另一个标记名称

> ID：16112089
> 
> 赞同：1
> 
> 时间：2013-04-19T19:24:08.807
> 
> 标签：macos, shell, sed, replace

假设我有一个如下所示的 XML：

```
<a>
<b>...</b>
<c>...</c>
<c>...</c>
<d>..</d>
</a> 
```

如何告诉 sed（在 Mac 上）仅将第一次出现的 <c>...</c> 更改为 <e>...</e>，同时仍保留其间的内容 (\1)开始和结束标签？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:43:29.670

这应该这样做：

```
sed '1,/<c>/s/^<c\(.*\)c>$/<e\1e>/' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:43:36.593

您可以像这样使用 sed：

```
sed -E '1,/<c>.*<\/c>/s#<c>(.*)</c>#<e>\1</e>#' inFile 
```

### 现场演示：http: [//ideone.com/fzsZg5](http://ideone.com/fzsZg5)

# angularjs - 集成 Karma 和 webstorm

> ID：16112091
> 
> 赞同：8
> 
> 时间：2013-04-19T19:24:21.437
> 
> 标签：angularjs, webstorm, karma-runner

我想为 Windows 集成 Karma 和 webstorm，我已经按照这个网站的步骤进行操作：http://mobicon.tistory.com/273 [（](http://mobicon.tistory.com/273)将其翻译成英文）但不起作用。

我创建了一个 Karma 服务器和一个 Karma 运行：

在 Node Js File 文本字段的路径中，我从节点模块中指向了一个业力文件：

C:\Users\xxx\AppData\Roaming\npm-cache\karma\0.8.4\package\bin\karma

在服务器启动和 Karma Run 运行的应用程序参数中

我收到以下错误：

```
module.js:340
    throw err;
          ^
Error: Cannot find module 'optimist'
    at Function.Module._resolveFilename (module.js:338:15)
    at Function.Module._load (module.js:280:25)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (C:\Users\Javito\AppData\Roaming\npm-cache\karma\0.8.4\package\lib\cli.js:2:16)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)

Process finished with exit code 1 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-28T08:40:05.707

问题是我指向的 Karma 执行文件（节点 App JS 文件的路径），这是我对服务器和运行的配置：

业力服务器：

![业力服务器配置](https://i.stack.imgur.com/Iwvv2.png)

业力运行：

![业力运行配置](https://i.stack.imgur.com/zRV6D.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-08-01T04:05:48.937

尝试在 Webstorm 中运行sails app（app.js nodejs）给了我Ubuntu 14（32位）中的乐观错误。我通过运行修复它：

> sudo npm install optimist

干杯!

# java - JDBC 错误：无法在 DB 查询中执行字符串

> ID：16112092
> 
> 赞同：-3
> 
> 时间：2013-04-19T19:24:25.233
> 
> 标签：java, mysql, bash, jdbc

我想将**字符串**作为参数传递给我的**JDBC**程序。该代码适用于**INT**类型输入，但会在字符串类型输入上捕获块。

我想修改程序，使其可以随机捕获所有类型的输入。因为，我需要运行以下 java prog。在 bash 脚本中。所以一旦生成了类文件，我应该为程序提供随机输入并获得输出......

```
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;

import com.mysql.jdbc.Statement;

public class JDBC_run {

    public static void main(String[] args) throws Exception {

        Connection conn = null;
    //  int var = 123050044 ;
        String var = "sir"; 

        Class.forName("com.mysql.jdbc.Driver"); 
        conn = DriverManager.getConnection( "jdbc:mysql://localhost/test?user=root&password=root");
        ResultSet rs;
        System.out.println("Connected?");
        try{
          Statement st = (com.mysql.jdbc.Statement) conn.createStatement();
          rs = st.executeQuery("SELECT type FROM Table_new WHERE id = " + var);
          while ( rs.next() ) {
                String lastName = rs.getString("type");
                System.out.println(lastName);
            }
          }

      catch(SQLException s){
          System.out.println("wrong !!");
          }
}
} 
```

对于**int var = 123050044**，输出为

```
Connected?
student 
```

对于**String var = "sir"**，输出为

```
Connected?
wrong !! 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:26:13.473

```
SELECT type FROM Table_new WHERE id = " + var 
```

适用于`int`. 当使用`String`上述查询时，应该如下所示（注意：这很容易发生 SQL 注入，请使用 PreparedStatement 而不是普通的 SQL 字符串。）

```
SELECT type FROM Table_new WHERE id = ' " + var +"'" 
```

否则你会得到`SQLException`（我想你就是这种情况）。

在块中打印异常`catch`将为您提供更多线索。

# css - 如何将 django-compressor 与多个导入通用文件的 LESS 文件一起使用？

> ID：16112093
> 
> 赞同：5
> 
> 时间：2013-04-19T19:24:30.433
> 
> 标签：css, django, less, django-compressor

我在我的 Django 项目中组织了模板，使得站点上的每个页面都包含一个“通用”LESS 文件，并且每个页面还可以指定另一个包含页面特定样式的 LESS 文件。

问题是我需要特定于页面的 LESS 文件才能引用“通用”LESS 文件中的变量。我认为最简单的方法是简单地将变量声明移动到两个 LESS 文件都可以的单独文件中`@import`。

但是，Django 应用程序使用单独的目录来存储它们的静态文件。最后，文件系统看起来像这样：

```
- 常见的
   - 静止的
      -CSS
         - 定义.less
         - common.less
- 其他
   - 静止的
      -CSS
         - 其他.less
```

两者都`common.less`需要`other.less`导入`definitions.less`。在这种情况下`common.less`很简单：

```
@import "definitions.less"; 
```

以下是页面中实际包含 LESS 文件的方式，以防万一：

```
{% load compress %}
{% load static %}

{% compress css %}
    <link href="{% static "css/common.less" %}"
          rel="stylesheet" type="text/less">
{% endcompress %} 
```

确保两个 LESS 文件都可以使用公共变量定义的最简单方法是什么？我想避免组合 LESS 文件有几个原因：

*   它消除了松耦合的好处（停用应用程序而不会对站点的其余部分产生任何副作用的能力）。
*   由于必须获取所有应用程序的所有样式，因此增加了为单个页面检索的附加数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-15T10:43:36.153

我们在我们的应用程序中做同样的事情——我们有一个公共文件 main.less，它包含在许多其他 less 文件中。但是，我们没有遇到这个问题。我认为有几种方法可以解决它 - 您可以更改静态文件的位置。

django STATICFILES_DIRS 中有一个设置——如果你愿意，你似乎可以更改静态文件的位置，而不是嵌套在这样的应用程序中。 [https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-STATICFILES_DIRS](https://docs.djangoproject.com/en/dev/ref/settings/#std:setting-STATICFILES_DIRS)

我们的代码看起来像这样

```
{% compress css %}
{% include "_base_css.html" %}
{% endcompress %} 
```

然后 _base_css.html 只包含所有的 less 文件，我们的 main.less 首先出现。

```
## _base_css.html
<link rel="stylesheet" type="text/less" href="{{ STATIC_URL }}css/main.less">
<link rel="stylesheet" type="text/less" href="{{ STATIC_URL }}css/about.less">
<link rel="stylesheet" type="text/less" href="{{ STATIC_URL }}css/dashboard.less"> 
```

从您的问题中我不清楚错误是什么，但我相信您的常见 less 文件需要在任何其他 less 文件可访问之前包含在内。在您的代码片段中，您似乎没有包含它。在压缩方面，我不认为将您所有的站点范围内的 css 压缩到一个文件中太糟糕了——它是第一次下载，然后被完全缓存。

希望这会有所帮助。

# c# - 如何重定向到另一个页面传递数据但没有 C# 中的帖子

> ID：16112097
> 
> 赞同：2
> 
> 时间：2013-04-19T19:24:43.950
> 
> 标签：c#, asp.net, post

当用户访问我的页面时，`_mypage.aspx?querystring_`我不希望查询字符串保留在地址栏中，因为如果他们刷新，我不想重复依赖该值的操作。
我试图从查询字符串中获取值并将其发布到同一页面，但它给出的效果几乎相同：刷新将重新发布。

我试图重定向将值添加到哈希 (#)，但哈希值不会返回到服务器。

我有哪些选择？如何在没有帖子但保留数据的情况下重定向到另一个或同一页面？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:28:42.997

如果您在同一个网站内，您可以使用它[`Session`](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)来存储数据。

```
HttpContext.Current.Session["asdf"] = someObject; 
```

它被存储为一个对象，因此您必须适当地转换它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:31:12.943

Session 是一种常用的机制，用于在 Querystring 或 POST 变量之外“传递”值。

```
Session["test"] = "Test word";
string test = (string)Session["test"]; 
```

但是，我会告诉你，如果你想要最好的方式来处理这种情况，你应该研究 POST-REDIRECT-GET 模式。[http://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

基本上，您更新数据的主要操作是通过 POST 处理的。如果成功，然后您将重定向到 GET，其中包含您的查询字符串参数（例如“updated=True”或其他任何内容。

这样做时，用户无法意外或有意重新触发实际的数据保存操作，因为如果他们重新加载他们登陆的页面（GET 页面），则不会更改任何数据，并且他们的确认消息会保留相同。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T19:32:37.350

**使用[发布/重定向/获取](http://en.wikipedia.org/wiki/Post/Redirect/Get)模式**

在**ASP.NET**中，您可以使用 Session，如@gunr2171 的回答中所述。

在**ASP.NET MVC**中，您可以使用 TempData。

要在最终页面支持多次屏幕刷新，可以使用以下`TempData.Keep()`方法：

```
TempData.Keep("TempDataKeyValue1");
SomeModelClass model = (SomeModelClass)TempData["TempDataKeyValue1"]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T19:36:24.273

如果以某种方式适用于您之后的内容，我会在您使用查询字符串获取请求时执行该操作，最后您重定向到没有查询字符串的 url（相同）（Post-Redirect-Get）。

但是，您也可以使用**cookie**：

1.  服务器接收查询字符串 url
2.  服务器向不带查询字符串的 url 发送重定向响应，添加包含查询字符串的 cookie
3.  服务器接收不带查询字符串但带有 cookie 的 URL
4.  服务器根据 cookie-value 执行操作，删除 cookie 并发送显示操作结果的最终响应。

页面的刷新将不再有 cookie。

# javascript - 在选择时将下拉菜单的数据复制到文本框？

> ID：16112102
> 
> 赞同：1
> 
> 时间：2013-04-19T19:25:09.783
> 
> 标签：javascript, jquery, html, jquery-mobile

假设您有这个下拉菜单：

```
<select>
   <option value="10">Apple</option>
   <option value="20">Orange</option>
</select>

<input type="name" />
<input type="price" /> 
```

如果用户从下拉菜单中选择“橙色”，则文本框的值应为：

```
<input type="name" value="Orange" />
<input type="price" value="20" /> 
```

或者如果它是“Apple”，那么文本框的值应该是`Apple`and `10`。

这对 Jquery 或 Jquery Mobile 是否可行，如果是的话如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:30:33.723

[http://jsfiddle.net/f23uP/](http://jsfiddle.net/f23uP/)

```
$('select').change(function(){

$('input[type=name]').val($('option:selected',this).text());
    $('input[type=price]').val($(this).val());
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:28:54.120

是的

```
$("select").change(function() {
    var price = this.value;
    var selText = $("select option:selected").text();

    $("input[type='name']").val(selText);
    $("input[type='price']").val(price);
}); 
```

像这样的东西应该工作

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T19:32:00.947

**jQuery** :

```
$("#s").on("change",function(){
    $("#text").val($(this).children().filter("option:selected").text());
    $("#price").val($(this).val());
}); 
```

**标记**：

```
<select id="s">
   <option value="10">Apple</option>
   <option value="20">Orange</option>
</select>

<input type="text" id="text" />
<input type="text" id="price" /> 
```

**jsFiddle**：http: [//jsfiddle.net/hescano/NnsDt/](http://jsfiddle.net/hescano/NnsDt/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T19:35:42.370

我认为您对输入类型有点困惑。这个[MDN 链接](https://developer.mozilla.org/en-US/docs/HTML/Element/Input)会有所帮助。

如果我理解正确，您想从选择中获取值和标签并将它们存储在相应的文本框中。这是我的解决方案：

HTML：

```
<select id="fruit">
   <option></option>
   <option value="10">Apple</option>
   <option value="20">Orange</option>
</select>

<input type="text" id="name" />
<input type="text" id="price" /> 
```

jQuery：

```
$("#fruit").change(function() {
     var name = $(this).find(":selected").text();
     var price =  $(this).val();
     $("#name").val(name);
     $("#price").val(price);
}); 
```

请注意，这个 jQuery 只`select`为 onchange 绑定水果，而不是绑定所有`select`

# sql - 在自身子查询上加入表

> ID：16112104
> 
> 赞同：0
> 
> 时间：2013-04-19T19:25:17.060
> 
> 标签：sql, sql-server, subquery

我试图更好地理解子查询，但下面的这个脚本有问题。（SQL Server 数据库）

```
SELECT division_name, business_name, assignment_code, assignment_desc, last_name, first_name, total_salary, assign_fte, birth_year
  FROM table1 join
  (SELECT division_name, last_name, first_name, assignment_code, emp_id 
  FROM table1) raw
   WHERE raw.year_time = year_time
  AND division_name <> raw.division_name
  AND last_name = raw.last_name
  AND first_name = raw.first_name
    ORDER BY last_name, first_name 
```

我需要做的是加入同一张表并提取员工为两个不同部门工作的数据。上面的代码在 where 子句附近有一个语法错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:32:06.847

您缺少 JOIN 的 ON 部分

IE..

```
SELECT division_name, business_name, assignment_code, assignment_desc, last_name, first_name, total_salary, assign_fte, birth_year
  FROM table1 join
  (SELECT division_name, last_name, first_name, assignment_code, emp_id 
  FROM table1) raw ON raw.year_time = year_time
   WHERE
   division_name <> raw.division_name
  AND last_name = raw.last_name
  AND first_name = raw.first_name
    ORDER BY last_name, first_name 
```

# d3.js - 如何停止 d3 力图布局模拟？

> ID：16112108
> 
> 赞同：4
> 
> 时间：2013-04-19T19:25:41.733
> 
> 标签：d3.js, force-layout

一旦你 d3.layout.force()....start() 在 D3 中进行强制布局模拟，它也会继续进行活动事件。

我想设置 5 秒的超时时间，让图形力布局模拟成形并停止（调用 .stop() 或 alpha(0)。这可以停止，但只要我拖动一个节点，模拟就会再次开始。

以下代码也可从[jsfiddle](http://jsfiddle.net/guidoextras/trzfw/)轻松测试，在**最后一行**显示将发出**stop()**并且模拟立即停止，但只要**拖动**任何节点，模拟就会再次开始。我认为这是在强制拖动中硬编码的。有没有办法禁用/注销它？

```
var svgContainer = d3.select("#svgContainer");

var element0a = svgContainer.append("g").attr("class","node").attr("transform","translate(100,100)");
var element0b = element0a.append("rect").attr("x",0).attr("y",0).attr("width",20).attr("height",10).attr("fill","red");

var element1a = svgContainer.append("g").attr("class","node").attr("transform","translate(100,200)");
var element1b = element1a.append("rect").attr("x",0).attr("y",0).attr("width",20).attr("height",10).attr("fill","green");

var element2a = svgContainer.append("g").attr("class","node").attr("transform","translate(100,300)");
var element2b = element2a.append("rect").attr("x",0).attr("y",0).attr("width",20).attr("height",10).attr("fill","blue");

var nodeArray = new Array();
nodeArray[0] = { id : "000", label : "label 000", ui : element0a };
nodeArray[1] = { id : "001", label : "label 001", ui : element1a };
nodeArray[2] = { id : "002", label : "label 002", ui : element2a };

var linkArray = new Array();

var force = self.force = d3.layout.force()
    .nodes(nodeArray)
    .links(linkArray)
    .gravity(.05)
    .distance(80)
    .charge(-100)
    .size([600, 600])
    .start();

var node = svgContainer.selectAll("g.node")
    .data(nodeArray)
    .call(force.drag);

force.on("tick", function() {
      node.attr("transform", function(d) {return "translate(" + d.x + "," + d.y + ")";});
    });

// HERE !!!! Without the stop() the simulation goes fine. With the stop() the simulation will immediately stop, but will continue as soon as you drap something. I want the simulation to never start again. 

force.stop(); 
```

这是示例的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/UKIph.gif)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T20:50:34.780

在内部拖动节点时调用的函数中重新启动模拟。但是，您可以覆盖此行为。事件名称为“drag.force”，您可以通过`force.drag`. 您可以直接修改坐标，而不是通常的行为，而无需像这样重新启动模拟：

```
var node...
  .call(force.drag().on("drag.force", function() {
    d3.select(this).attr("transform", "translate(" + d3.event.x + "," + d3.event.y + ")");
  })); 
```

这对应于正常的拖动行为。在您执行此操作之前，建议停止模拟以防止拖动事件和强制刻度干扰。只需`force.stop()`在您修改的事件处理程序的开头调用。

最后，您需要重置拖动事件的原点，否则当您再次拖动它们时，您会注意到被拖动的元素“跳”回其原始位置。这以与修改事件处理程序类似的方式完成。您只需获取当前翻译并以预期格式返回坐标。

```
var node...
  .call(force.drag().origin(function() {
    var t = d3.transform(d3.select(this).attr("transform")).translate;
    return {x: t[0], y: t[1]};
  })); 
```

完整的代码在更新的 jsfiddle[中](http://jsfiddle.net/trzfw/1/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:15:47.020

设置一个适当的“摩擦”应该可以做到，尽管你不能控制它需要停止的时间：

```
var force = self.force = d3.layout.force()
  .nodes(nodeArray)
  .links(linkArray)
  .gravity(.05)
  .distance(80)
  .charge(-100)
  .friction(0.5)
  .size([600, 600])
  .start(); 
```

# tomcat7 - Tomcat 7 URI 解码在 Linux 和 Windows 中的工作方式不同

> ID：16112110
> 
> 赞同：0
> 
> 时间：2013-04-19T19:25:46.437
> 
> 标签：tomcat7, utf

我在 Windows 7 和 Debian 中有 tomcat7。他们两个在连接器内都有 URIEncoding="UTF-8" 。我打开网址喜欢

```
 http://myhost.com/d/P2ILfNOPL-%2BAp3YljV-axQ 
```

Windows tomcat 给了我 %2B ，Linux 将它解码为 + 号。我想让他们以保存方式行事。如何？我的调试代码是：

```
 response.getWriter().write(request.getRequestURI()); 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T21:45:29.287

似乎 getRequestURI() 从未解码，我应该改用 getPathInfo() 。

# php - 投票系统竖起大拇指和向下故障排除

> ID：16112111
> 
> 赞同：0
> 
> 时间：2013-04-19T19:25:46.657
> 
> 标签：php, javascript, ajax

目标是在一页上有多个图像，并允许公众对它们进行投票。然后我有一个 AJAX 命令来删除投票按钮并感谢您的投票。当我为每个图像手动键入 HTML 时，我可以让它工作，但是当我将值放入数组并希望 PHP 做代码它停止工作。

当我点击向上或向下时，我使用 chrome 并在网络选项卡下点击 F12，它显示“Uncaught SyntaxError: Unexpected token }”

我相信这与 '' 和 "" 组合有关......

我已经尝试过两种方式同样的错误。当我使用 ' ' 包装变量时，它不会改变变量......

当我使用“”来包装变量时，页面解析但相同的未捕获语法错误。

我试过使用 eval($output) ，它只会在第 2 行给出一个解析错误......

希望这足够清楚。任何帮助是极大的赞赏！

```
<script>
function getVote(var1,var2)
{
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        document.getElementById(var2).innerHTML=xmlhttp.responseText;
    }
  }
xmlhttp.open("GET","poll_vote.php?vote="+var1,true);
xmlhttp.send();
}
</script>
</head>
<body>
<? 
$shirts = "C001,C002,C003,C004";
$i = 0;
foreach (explode(",",$shirts) as $shirt) {
$i++;
$output .= "
<div align='center'>
<img src='shop/images/web/$shirt.jpg' width='250' height='293'>
<br />
<div id='poll$i' align='center'>
<a href='#' onClick='getVote('Yes,$shirt,poll$i')'><img src='/images/vtu.jpg' width='50' height='64'></a>
<a href='#' onClick='getVote('No,$shirt,poll$i')'><img src='/images/vtd.jpg' width='50' height='64'></a>
</div>
<br />";
};
echo("$output");
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:36:30.707

`'`是的，您的代码确实不匹配`"`。您实际上是在合并 3 种不同的语言，并且每种语言都将引号用于不同的目的。[使用HEREDOC](http://php.net/heredoc)至少从引用方程中消除 PHP 角度：

```
echo <<<EOL
...
<div id="poll{$i}" align="center">
             ^--^-- note the use of {}
<a href="#" onclick="getVote('Yes,{$shirt},poll{$i}')"> etc...

EOL; 
```

请注意，您的 JS 调用也可能不正确。您传入一个包含 3 个不同逗号分隔值的字符串，但您的函数定义需要**两个**参数值。

# mongodb - 无法在 MongoDB 中创建集合

> ID：16112116
> 
> 赞同：0
> 
> 时间：2013-04-19T19:26:05.770
> 
> 标签：mongodb, mongodb-query

我试图在 MongoDB 中以以下格式创建一个新集合。但我不能这样做。

以下是我的收藏创​​建代码。任何人都可以尝试相同的代码并尝试创建收藏。请帮助我。提前致谢。

```
db.MasterAccount_AccountUser.insert
(
 {
MasterAccountID: 100,
MasterAccountName: 'LMS Plumber Inc',
AccountOwner: 'John',
AccountUser:[
         {
        AccountUserID: 1001,
        AccountUserName: 'John',
        AccountUserRole: 'Admin',
        AccountUserEmailID: 'john@lms.com',
        AccountUserPhoneNumber: '8132546363'
             },
         {
        AccountUserID: 1002,
        AccountUserName: 'Matt',
        AccountUserRole: 'User', 
        AccountUserEmailID: 'matt@lms.com',
        AccountUserPhoneNumber: '8132546362'
         },
         {
        AccountUserID: 1003,
        AccountUserName: 'Dan',
        AccountUserRole: 'User',
        AccountUserEmailID: 'dan@lms.com',
        AccountUserPhoneNumber: '8132568945'
         }  
        ]       
  }
) 
```

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:45:55.773

这被 shell 视为两个单独的语句。

第一个是`db.MasterAccount_AccountUser.insert`，第二个语句是代码的其余部分。简单地向上移动`(`到第一行将导致它将整个事情视为一个陈述。像这样：

```
db.MasterAccount_AccountUser.insert(
 {
MasterAccountID: 100,
MasterAccountName: 'LMS Plumber Inc',
AccountOwner: 'John',
AccountUser:[
         {
        AccountUserID: 1001,
        AccountUserName: 'John',
        AccountUserRole: 'Admin',
        AccountUserEmailID: 'john@lms.com',
        AccountUserPhoneNumber: '8132546363'
             },
         {
        AccountUserID: 1002,
        AccountUserName: 'Matt',
        AccountUserRole: 'User', 
        AccountUserEmailID: 'matt@lms.com',
        AccountUserPhoneNumber: '8132546362'
         },
         {
        AccountUserID: 1003,
        AccountUserName: 'Dan',
        AccountUserRole: 'User',
        AccountUserEmailID: 'dan@lms.com',
        AccountUserPhoneNumber: '8132568945'
         }  
        ]       
  }
) 
```

# java - 从绝对文件路径创建动态 JTree

> ID：16112119
> 
> 赞同：1
> 
> 时间：2013-04-19T19:26:15.693
> 
> 标签：java, swing, awt, jtree

```
private void createNodes(DefaultMutableTreeNode top) {
    List <String> files = new ArrayList<String>();      
    //getFileNames() returns array list of file name with complete path
    //eg C:/lanceTest1/directory1/sample.txt
    files = getFileNames();     
    DefaultMutableTreeNode node = null;
    for (String fileName : files) {
        node = new DefaultMutableTreeNode(fileName);
        top.add(node);               
    }
} 
```

上面的函数创建下面的窗口。

![在此处输入图像描述](https://i.stack.imgur.com/wT4wL.jpg)

我想如下所示（例如第一个文件），

```
The Java Series
 |__C
  |__lanceTest
   |__directory1
    |__PDxxxx_Splunk_Solution_Architecture_Doc_v0.9.doc 
```

我是摇摆新手，awt。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:38:00.413

*   请阅读 Oracle 教程[如何使用树](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)

*   [关于描述的方法、侦听器、其余方法的示例](https://java2s.com/Tutorial/Java/0240__Swing/Catalog0240__Swing.htm)

*   例如

![在此处输入图像描述](https://i.stack.imgur.com/6L1gA.jpg)![在此处输入图像描述](https://i.stack.imgur.com/3urum.jpg)

从代码

```
import java.awt.*;
import java.io.File;
import java.util.Collections;
import java.util.Vector;
import javax.swing.*;
import javax.swing.event.TreeSelectionEvent;
import javax.swing.event.TreeSelectionListener;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;

public class FileTree extends JPanel {

    private static final long serialVersionUID = 1L;

    public FileTree(File dir) {
        setLayout(new BorderLayout());
        JTree tree = new JTree(addNodes(null, dir));
        tree.addTreeSelectionListener(new TreeSelectionListener() {
            @Override
            public void valueChanged(TreeSelectionEvent e) {
                DefaultMutableTreeNode node = (DefaultMutableTreeNode) e.getPath().getLastPathComponent();
                System.out.println("You selected " + node);
            }
        });
        DefaultTreeCellRenderer renderer = (DefaultTreeCellRenderer) tree.getCellRenderer();
        renderer.setLeafIcon(null);
        renderer.setClosedIcon(null);
        renderer.setOpenIcon(null);
        JScrollPane scrollpane = new JScrollPane();
        scrollpane.getViewport().add(tree);
        add(BorderLayout.CENTER, scrollpane);
    }

    private DefaultMutableTreeNode addNodes(DefaultMutableTreeNode curTop, File dir) {
        String curPath = dir.getPath();
        DefaultMutableTreeNode curDir = new DefaultMutableTreeNode(curPath);
        if (curTop != null) {
            curTop.add(curDir);
        }
        Vector<String> ol = new Vector<String>();
        String[] tmp = dir.list();
        for (int i = 0; i < tmp.length; i++) {
            ol.addElement(tmp[i]);
        }
        Collections.sort(ol, String.CASE_INSENSITIVE_ORDER);
        File f;
        Vector<Object> files = new Vector<Object>();
        for (int i = 0; i < ol.size(); i++) {
            String thisObject = ol.elementAt(i);
            String newPath;
            if (curPath.equals(".")) {
                newPath = thisObject;
            } else {
                newPath = curPath + File.separator + thisObject;
            }
            if ((f = new File(newPath)).isDirectory()) {
                addNodes(curDir, f);
            } else {
                files.addElement(thisObject);
            }
        }
        for (int fnum = 0; fnum < files.size(); fnum++) {
            curDir.add(new DefaultMutableTreeNode(files.elementAt(fnum)));
        }
        return curDir;
    }

    @Override
    public Dimension getMinimumSize() {
        return new Dimension(200, 400);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(200, 400);
    }

    public static void main(final String[] av) {
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                JFrame frame = new JFrame("FileTree");
                frame.setForeground(Color.black);
                frame.setBackground(Color.lightGray);
                Container cp = frame.getContentPane();
                if (av.length == 0) {
                    cp.add(new FileTree(new File(".")));
                } else {
                    cp.setLayout(new BoxLayout(cp, BoxLayout.X_AXIS));
                    for (int i = 0; i < av.length; i++) {
                        cp.add(new FileTree(new File(av[i])));
                    }
                }
                frame.pack();
                frame.setVisible(true);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-20T02:56:44.763

另请参见[文件浏览器 GUI](https://codereview.stackexchange.com/questions/4446/file-browser-gui)。

![](https://i.stack.imgur.com/yswnE.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T16:18:44.363

感谢你的帮助。基本上我想从我从数据库中检索的路径中表示文件系统。文件/目录实际上并不存储在数据库中，而是从绝对/相对路径动态生成的。

我在这里找到了答案...

[从路径列表中表示文件系统（文件/目录）的 Java 树](https://stackoverflow.com/questions/10929775/java-tree-to-represent-filesystem-files-dir-from-list-of-paths)

# wpf - 如何在 Windows 8 应用程序中禁用容器回收？

> ID：16112120
> 
> 赞同：0
> 
> 时间：2013-04-19T19:26:16.207
> 
> 标签：wpf, xaml, user-interface, windows-8, ui-virtualization

如果您有时间，请创建一个新的**空白应用 (XAML)**模板并编写以下 XAML 代码。

我认为创建**WPF 应用程序**是没有用的，因为它看起来好像容器回收不起作用。此外，*GridView*必须替换为*ListView*。

```
<Page.Resources>
  <vm:MainViewModel x:Key="Main" />
</Page.Resources>

<Page.DataContext>
  <Binding Source="{StaticResource Main}" />
</Page.DataContext>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}"
      VerticalAlignment="Center">
  <Grid.Resources>
    <Style x:Key="GridViewStyle1"
           TargetType="GridView">
      <Setter Property="Template">
        <Setter.Value>
          <ControlTemplate TargetType="GridView">
            <ScrollViewer HorizontalSnapPointsAlignment="Near"
                          HorizontalSnapPointsType="MandatorySingle">
              <ItemsPresenter VirtualizingStackPanel.VirtualizationMode="Standard" />
            </ScrollViewer>
          </ControlTemplate>
        </Setter.Value>
      </Setter>
    </Style>
  </Grid.Resources>
  <GridView Style="{StaticResource GridViewStyle1}"
            ItemsSource="{Binding Items}"
            SelectionMode="None">
    <GridView.ItemTemplate>
      <DataTemplate>
        <StackPanel Orientation="Horizontal"
                    Loaded="StackPanel_Loaded">
          <Grid Width="800"
                Height="400">
            <ScrollViewer HorizontalScrollBarVisibility="Hidden"
                          VerticalScrollBarVisibility="Visible">
              <Border Background="#b7d84b">
                <TextBlock Foreground="Black"
                           Text="{Binding Message}" />
              </Border>
            </ScrollViewer>
          </Grid>
        </StackPanel>
      </DataTemplate>
    </GridView.ItemTemplate>
  </GridView>
</Grid> 
```

创建视图模型和*Item*类：

```
public class MainViewModel
{
    private const int NumberOfItems = 10000;

    public ObservableCollection<Item> Items
    {
        get;
        private set;
    }

    public MainViewModel()
    {
        var tempCollection = new ObservableCollection<Item>();

        for (var index = 0; index < NumberOfItems; ++index)
        {
            var item = new Item
            {
                Id = index,
                Message = GetMessage(index)
            };

            tempCollection.Add(item);
        }

        Items = tempCollection;
    }

    private string GetMessage(int index)
    {
        var sb = new StringBuilder();

        for(var i = 0; i < 100; ++i)
        {
            sb.Append("...\n");
        }

        sb.Append("This is item #");
        sb.Append(index);

        return sb.ToString();
    }
}

public class Item
{
    public string Message { get; set; }
    public int Id { get; set; }
} 
```

启动应用程序时，您可以滚动浏览一系列项目。我注意到，当您垂直滚动特定项目以便可以看到“这是项目#x”消息时，您会在向右滚动后再次看到另一条消息“这是项目#x”（尽管您没有滚动项目垂直。）

这是因为项目是虚拟化的。并且当一个项目变为现实时，将使用池中的一个容器。如果你运气不好，容器已经滚动了......

池中有 10 个项目：

![代码隐藏文件中的程序输出](https://i.stack.imgur.com/DFMr2.png)

文件背后的代码：

```
private readonly DateTime _start;

public MainPage()
{
    this.InitializeComponent();
    _start = DateTime.Now;
}

[Conditional("DEBUG")]
public void WriteDebugMessage(string message)
{
    var span = DateTime.Now - _start;
    Debug.WriteLine(
        "{0:D2}:{1:D2}:{2:D3} - {3}",
        span.Minutes,
        span.Seconds,
        span.Milliseconds,
        message);
}

private void StackPanel_Loaded(object sender, RoutedEventArgs e)
{
    WriteDebugMessage("StackPanel loaded.");
} 
```

接下来，我重铸了 ItemsPresenter 对象：

```
<ItemsPresenter VirtualizingStackPanel.VirtualizationMode="Standard"/> 
```

如果它有效，它不会提高性能。

有谁知道这个问题的优雅解决方案？我不想因为公共领域太多而被解雇；）我还考虑过写一个附加属性...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:02:22.257

**更新：**

我还是不知道为什么

```
<ItemsPresenter VirtualizingStackPanel.VirtualizationMode="Standard"/> 
```

不起作用。所以我最新的解决方案是 hack。此外，向左滚动可能会显示一个被放回的项目，尽管您已经垂直滚动了它。我使用 MainPage.xaml.cs 中的附加属性来定义每个垂直*ScrollViewer*的垂直偏移量：

```
public static double GetVerticalOffset(DependencyObject obj)
{
    return (double)obj.GetValue(VerticalOffsetProperty);
}

public static void SetVerticalOffset(DependencyObject obj, double value)
{
    obj.SetValue(VerticalOffsetProperty, value);
}

public static readonly DependencyProperty VerticalOffsetProperty =
    DependencyProperty.RegisterAttached("VerticalOffset", typeof(double), typeof(MainPage), new PropertyMetadata(-1.0, OnVerticalOffsetPropertyChanged));

private static void OnVerticalOffsetPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var sv = d as ScrollViewer;
    if (sv != null)
    {
        sv.ScrollToVerticalOffset((double) e.NewValue);
    }
} 
```

每次在数据虚拟化解决方案中请求特定项目的数据时，项目的*VerticalOffset*属性都会设置为 0。这会触发委托，因为默认值为 -1。

# python - 从包含列表的不同 txt 文件中返回匹配的字符串。新行上的每个项目

> ID：16112123
> 
> 赞同：0
> 
> 时间：2013-04-19T19:26:54.510
> 
> 标签：python, string, compare

我对 python 以及一般的编程都很陌生。我有两个文本文件。每一个都是一个列表，每个项目都在一个新行上。

我试图在每个列表中查找匹配的字符串，忽略大小写和某些标点符号（“，”，“-”，“\n”）。这是我到目前为止所拥有的：

基本上我需要翻译列表项并在 2 之间进行比较

List1.txt

```
Proper Title Here
A Title Here, crap
B Title Here-more crap
C Title Here
D Title Here
E Title Here 
```

List2.txt

```
Proper Title Here
B Title Here-more crap
Q Title List item 
```

代码：

```
import re 
list1_file = open("list1.txt", "r")
list2_file = open("list2.txt", "r")

list1 = list1_file.readlines()
list2 = list2_file.readlines()

for eachlistone in list1:
    list1nosp = eachlistone.replace(" ", "")

for eachlisttwo in list2:
    list2nosp = eachlisttwo.replace(" ", "") 
```

应该输出：

```
Proper Title Here
B Title Here-more crap 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:38:21.907

阅读第一个列表并删除不需要的标点符号

```
data = file1.read()
data = data.lower() #make it all lowercase
data = re.sub("[,-]","",data) #replace unwanted punctuation
list1= data.splitlines() 
```

对第二个列表做同样的事情

```
data = file2.read()
data = data.lower() #make it all lowercase
data = re.sub("[,-]","",data) #replace unwanted punctuation
list2= data.splitlines() 
```

然后只需打印两个列表的交集

```
print "\n".join(set(list1).intersection(list2)) 
```

# c - C中的字符串反转：我做错了什么？

> ID：16112124
> 
> 赞同：4
> 
> 时间：2013-04-19T19:27:03.870
> 
> 标签：c, string

我正在阅读 K&R C，主要是为了刷我的 C 技能，并且在尝试编写程序来反转给定字符串时，我遇到了一个困扰着我的错误，*最糟糕的是，我无法调试 - 也没有线索可能是什么原因。*

我的代码如下：

```
#include <stdio.h>
#include <string.h>

char * reverse(char *string);

int main(int argc, char *argv[])
{
    printf("Please input a string: \t");

    char string[256];

    scanf("%s", string);

    char *reversed = reverse(string);

    printf("The reversed string is %s\n", reversed);

    return 0;
}

char * reverse(char string[])
{
    int size = strlen(string);
    printf("DEBUG: The size of the string that we got as input was: %d\n", size);
    int counter;
    char reversed[size + 1];

    for(counter = size - 1; counter >= 0; counter--) {
        reversed[size - counter] = string[counter];
        printf("DEBUG: The character copied now was %c and was at index %d\n", string[counter], counter);
    }

    reversed[size + 1] = '\0';

    printf("DEBUG: The reversed string is %s\n", reversed);

    return reversed;
} 
```

*（请原谅乱扔代码逻辑的调试语句。除此之外，请随时纠正您可能看到的任何错误，并随时提出改进建议）*

现在，我的代码正在运行（大部分情况下），但错误是它复制了我没有输入的字符。以下是两次测试运行的（有趣的）结果：

第一个：

```
nlightnfotis@crunchbang:~/SoftwareExperiments$ ./reverse
Please input a string:  fotis
DEBUG: The size of the string that we got as input was: 5
DEBUG: The character copied now was s and was at index 4
DEBUG: The character copied now was i and was at index 3
DEBUG: The character copied now was t and was at index 2
DEBUG: The character copied now was o and was at index 1
DEBUG: The character copied now was f and was at index 0
DEBUG: The reversed string is $sitof
The reversed string is $sitof 
```

***（注意`$`）***

第二个：

```
nlightnfotis@crunchbang:~/SoftwareExperiments$ ./reverse
Please input a string:  lol
DEBUG: The size of the string that we got as input was: 3
DEBUG: The character copied now was l and was at index 2
DEBUG: The character copied now was o and was at index 1
DEBUG: The character copied now was l and was at index 0
DEBUG: The reversed string is lol
The reversed string is lol 
```

在这里更准确地描述：

![错误](https://i.stack.imgur.com/O0tL2.png)

比我更有知识和经验的人可以向我解释我的代码有什么问题，或者给我一个提示，告诉我为什么我会遇到这个令人沮丧的错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T19:29:21.690

您正在返回一个局部变量：

```
char * reverse(char string[]) {    
  char reversed[size + 1];
  ....
  return reversed;
} 
```

一旦函数返回，分配在堆栈上的局部变量`reversed`将不复存在。`reverse`因此，对它的任何引用都会`main`导致未定义的行为。

要解决此问题，您可以执行以下任一操作：

1.  制作函数`void`并修改输入数组。

2.  将数组声明`reversed`为静态，以便其生命周期更改为程序的生命周期。

3.  动态分配（然后取消分配）`reversed`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T19:32:03.290

总是同样的错误，一遍又一遍......

我。

```
char reversed[size + 1];
// ...
return reversed; 
```

您正在返回一个自动数组，该数组在函数返回后立即超出范围 - 未定义的行为。做`reversed`一个变量来避免这种情况（然后在你开始相信它是魔法之前`static`阅读关键字）。`static`

二、

```
char string[256];
scanf("%s", string); 
```

输入带有空格的字符串时可能出现缓冲区溢出和错误。将此更改为

```
fgets(string, sizeof(string), stdin); 
```

三、

```
char reversed[size + 1];
// ...
reversed[size + 1] = '\0'; 
```

另一个缓冲区溢出。在 C 中，数组从 0 开始索引。

* * *

是时候阅读一本好的 C 书了。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T19:32:24.063

除了 codaddict 的帖子和 H2CO3 的精彩解释之外，您还有一个错误：

```
 char reversed[size + 1];
 reversed[size + 1] = '\0'; 
```

这将导致出界索引。说`size = 10`，那么`size +1 =11`。`reversed`char 数组的 索引值为`0,1,2,3,...,10`. 因此，`reversed[11]` 会给你带来麻烦。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T15:12:21.687

好的，用上面发现的错误加上我自己的答案进行了注释：

```
char * reverse(char string[])
{
    int size = strlen(string);
    printf("DEBUG: The size of the string that we got as input was: %d\n", size);
    int counter;

    /* BUGBUG: You are using a stack variable to store the return string.
     * char *reversed = malloc(sizeof(char) * (size + 1))
     * to allocate a string that can be returned safely.
     */
    char reversed[size + 1];

    for(counter = size - 1; counter >= 0; counter--) {
        /* BUGBUG: You are setting the wrong char in "reversed", it should be
         * reversed[size - 1 - counter].  You want the "size - 1" char from the original
         * to be copied to the 0 position of the reversed
         */
        reversed[size - counter] = string[counter];
        printf("DEBUG: The character copied now was %c and was at index %d\n", string[counter], counter);
    }

    /* BUGBUG: You are setting the null character one past the end of the string.
     * Here you want reversed[size], which with 0-indexing is the size+1'st
     * character.
     */
    reversed[size + 1] = '\0';

    printf("DEBUG: The reversed string is %s\n", reversed);

    /* BUGBUG: Just to stress this -- you cannot expect this to work; that it
     * does so is accidental because the call stack is not cleaned.  If the calling
     * function called another function (say printf) then the printf is likely to 
     * overwrite the contents of reversed.
     */
    return reversed;
} 
```

# javascript - Jquery resize() 导致屏幕闪烁和 div 偏移

> ID：16112125
> 
> 赞同：6
> 
> 时间：2013-04-19T19:27:06.117
> 
> 标签：javascript, jquery, resize, window, dom-manipulation

**的背景：**

我正在尝试创建一个系统，该系统允许使用鼠标向上滚动和鼠标向下滚动来滚动一种地图，如下所示：

```
 -------
|       |
|   1   |
|       |
 -------
 -------    -------   -------   -------
|       |  |       | |       | |       |
|   2   |  |   3   | |   4   | |   5   |
|       |  |       | |       | |       |
 -------    -------   -------   -------
                                -------
                               |       |
                               |   6   |
                               |       |
                                ------- 
```

上面的每个框都在 javascript 中重置为浏览器的高度和宽度。当您上下滚动鼠标时，浏览器将滚动到地图中的相同位置，从 div 1 开始，然后是 2，依此类推。这个定位是通过我的滚动功能设置的，它监听鼠标滚动并在顶部添加适当的填充，在左侧添加边距，以创建上面地图的错觉。

这是它的codepen：

[http://codepen.io/lorenzoi/pen/mxejJ](http://codepen.io/lorenzoi/pen/mxejJ)

这是它的javascript：

```
$(function(){

    $(window).on('resize', function(){
        var $divs = $('.vertical, .horizontal > div'),
        ww =  $(this).width(),
        wh =  $(this).height();

        $divs.css({
            height : wh,
            width : ww
        });

        $('.horizontal').each(function(){
            var $container = $(this),
            nbChildren = $container.children().length;
            posY = $container.offset().top,

            $container.css({
                height: ww*(nbChildren-1) + wh,
                width: ww*(nbChildren)
            });
        });
    }).trigger('resize');

    $(window).on('scroll', function(){
        var wh = $(window).height(),
        scroolTop = $(window).scrollTop();

        $('.horizontal').each(function(){
            var $container = $(this),
            posY = $container.offset().top,
            height = $container.height(),
            nbChildren = $container.children().length,
            marginMax = $container.width()/nbChildren*(nbChildren-1),
            marginL = scroolTop - posY;

            if(marginL<0) marginL = 0;
            else if (marginL>marginMax) marginL = marginMax;
            $container.css('marginLeft', -marginL);
            $container.css('paddingTop', marginL);
        });
    }).trigger('scroll');

}); 
```

**问题：**

调整窗口大小会创建一个奇怪的 div 偏移量，当为 div 2 到 5 调用滚动函数时，它会自行修复。在这些 div 中调整大小时，它们似乎会自行偏移，然后只有在调用滚动函数时才会修复。

.trigger('调整大小'); 应该总是被调用，是吗？我不知道为什么只有在创建滚动功能时才会调用它。

如何补救？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-23T12:04:04.573

使用计时器就足够了：

```
$(function(){
    var timeoutResize;

    $(window).on('resize', function(){
        clearTimeout(timeoutResize);
           timeoutResize = setTimeout(function(){
           var $divs = $('.vertical, .horizontal > div'),
           ww =  $(this).width(),
           wh =  $(this).height();

           $divs.css({
               height : wh,
               width : ww
           });

           $('.horizontal').each(function(){
               var $container = $(this),
               nbChildren = $container.children().length;
               posY = $container.offset().top,

               $container.css({
                   height: ww*(nbChildren-1) + wh,
                   width: ww*(nbChildren)
               });
           });
       },100);
    }).trigger('resize');

    ...

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-29T00:45:07.693

. . 您需要考虑，每当用户垂直调整窗口大小时，滚动位置都会受到影响，并且它也会影响您的背景滚动（因为它基于当前滚动位置）。

. . 最简单的修复方法是`$(window).trigger('scroll');`在调整大小处理程序代码的末尾简单地调用，所以你让它保持干燥。[我在我的 CodePen fork](http://codepen.io/dnunes/pen/gjrtd)上做了这个改变。一探究竟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:32:18.187

如果您有一个运行过于频繁的事件处理程序，您可以像这样限制它：

```
function throttle(ms, fn) {
    var allow = true;
    function enable() {
        allow = true;
    }
    return function(e) {
        if (allow) {
            allow = false;
            setTimeout(enable, ms);
            fn.call(this, e);
        }
    }
} 
```

然后将您的处理程序传递给`throttle`您分配它的时间。`n`根据您提供的第一个参数，它将返回一个最多每毫秒运行一次的函数。

```
$(window).resize(throttle(100, function(e) {
    // do heavy work
})); 
```

# java - 每次我在我的 servlet 上收到请求时如何执行 Listener 类

> ID：16112129
> 
> 赞同：4
> 
> 时间：2013-04-19T19:27:14.130
> 
> 标签：java, servlets, listener, web.xml

在我的 servlet 上接收请求时，我想执行一个与之相关的侦听器类，其中包含一些指令。

所以我在 myListener 上实现了接口 ServletContextListener，如下所示：

```
public class MyContextListener implements ServletContextListener {

    @Override
    public void contextDestroyed(ServletContextEvent arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void contextInitialized(ServletContextEvent arg0) {
        System.out.println("Context Created");
    }

} 
```

在我的 web.xml 上：

```
 <servlet>
    <servlet-name>StartUp</servlet-name>
    <servlet-class>com.servlets.StartUp</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>StartUp</servlet-name>
    <url-pattern>/StartUp</url-pattern>
  </servlet-mapping>

  <listener>
    <listener-class>com.servlets.MyContextListener</listener-class>
  </listener> 
```

那么，在我的 StartUp servlet 上接收请求时，我该如何执行我的侦听器呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:32:16.487

旨在[`ServletContextListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContextListener.html)侦听. `ServletContext`也就是说，它只在 webapp 的启动和关闭时被调用。

你需要一个[`ServletRequestListener`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequestListener.html)：

```
@WebListener
public class MyRequestListener implements ServletRequestListener {

    @Override
    public void requestInitialized(ServletRequestEvent event) {
        System.out.println("Request initialized");
    }

    @Override
    public void requestDestroyed(ServletRequestEvent event) {
        System.out.println("Request destroyed");
    }

} 
```

或者，也许只是一个简单的[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)。不同之处在于您可以将其配置为侦听特定的 URL 模式或特定的 servlet，甚至专门转发、包含和/或错误的请求。

```
@WebFilter("/StartUp") // or @WebFilter(servletNames={"StartUp"})
public class StartUpServletFilter implements Filter {

    @Override
    public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain) throws IOException, ServletException {
        System.out.println("Before StartUp servlet is invoked");
        chain.doFilter(req, res);
        System.out.println("After StartUp servlet is invoked");
    }

    // Don't forget the init() and destroy() boilerplate.

} 
```

# sql - SQL 窗口函数 - SELECT DISTINCT ORDER BY LIMIT

> ID：16112134
> 
> 赞同：4
> 
> 时间：2013-04-19T19:27:58.617
> 
> 标签：sql, performance, postgresql, window-functions, postgresql-performance

我的 PostgreSQL 数据库中有这 3 个表：

*   **艺术家：**身份证，姓名
*   **专辑：** id，标题，年份，artist_id
*   **歌曲：** id，标题，album_id

基本上每个艺术家都有多张专辑，每张专辑都有多首歌曲。

我的查询正确返回了 25 个不同的 Artist.id，他们有一首歌曲的标题以“The”开头，按专辑年份排序：

```
SELECT id
FROM (

    -- Remove the duplicate artists
    SELECT DISTINCT ON (a.id) id, row
    FROM (

        -- Get all matching artists 
        -- This is slow because there is no limit
        SELECT
            artist.id,
            row_number() OVER(ORDER BY album.year DESC) as row
        FROM artist
        LEFT JOIN album ON album.artist_id = artist.id
        LEFT JOIN song ON song.album_id = album.id
        WHERE song.title ilike 'The %'
        ORDER BY album.year DESC

    ) as a

) as b
ORDER BY row
LIMIT 25 
```

然而，它是缓慢且低效的，因为最里面的查询没有限制，因此它将搜索整个表以查找所有可能的匹配项。理想情况下，当找到 25 个不同的艺术家 ID 时，它会停止搜索。

可以重写或优化此查询以更快地执行吗？

我认为[窗口函数](http://www.postgresql.org/docs/9.2/static/tutorial-window.html)可以在这里加快速度，但我一直无法找出可行的方法。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:38:57.097

```
select id, year
from (
    SELECT DISTINCT ON (artist.id) artist.id, album.year
    FROM artist
    inner JOIN album ON album.artist_id = artist.id
    inner JOIN song ON song.album_id = album.id
    WHERE song.title ilike 'The %'
    ORDER BY artist.id, album.year DESC
) s
order by year desc
LIMIT 25 
```

当 ilike 表达式确实以 a 开头时，索引 on`song.title`会有所帮助`%`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T10:43:00.637

试试这个，

```
Select id, year
from (
    SELECT DISTINCT ON (artist.id) artist.id, album.year
    FROM artist
    rightJOIN album ON album.artist_id = artist.id
    left JOIN song ON song.album_id = album.id
    WHERE song.title ilike 'The %'
    ORDER BY artist.id, album.year DESC
) s
order by year desc
LIMIT 25 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T04:22:52.133

试试这个，应该比你当前的查询更快

```
SELECT
  artist.id,                        
  MAX( album.year ) as latest_album_date
FROM 
  artist
  JOIN album ON album.artist_id = artist.id  -- JOIN, not LEFT JOIN
  JOIN song ON song.album_id = album.id      -- Since you have song.title in WHERE clause, it makes no sense to make these as a LEFT JOIN
WHERE 
  song.title ilike 'The %'
GROUP BY
  artist.id
ORDER BY
  latest_album_date DESC
limit 25; 
```

[**SQLFIDDLE**](http://sqlfiddle.com/#!1/83b61/22)

# python - 尝试在 QML 中获取子子属性时出现 PyQt 段错误

> ID：16112136
> 
> 赞同：2
> 
> 时间：2013-04-19T19:28:08.697
> 
> 标签：python, qt, segmentation-fault, pyqt

我试图[在 Python 中的角色中返回一个对象，并在 QML 中获取另一个对象的引用](https://stackoverflow.com/questions/15306872/return-an-object-in-a-role-in-python-and-get-a-reference-of-another-object-in-qm)。最后，我发现我可以用`Property`它来做。

但是，我想获得 QML 中另一个对象的另一个引用的引用，PyQt 只是段错误。我切换到 PySide，但运行它时它仍然崩溃。

我做错了什么吗？

广发银行说

```
Cannot access memory at address 0xb
Cannot access memory at address 0x3 
```

主文件

```
import sys
from PySide import QtCore, QtGui, QtDeclarative
from PySide.QtCore import Property, Signal, QObject

class TweetModel(QtCore.QAbstractListModel):
    def __init__(self, prototype, parent=None):
        QtCore.QAbstractListModel.__init__(self, parent)
        self.setRoleNames(prototype.roles)
        self.tweets = []

    def appendRow(self, item):
        self.tweets.append(item)

    def rowCount(self, parent=QtCore.QModelIndex()):
        return len(self.tweets)

    def data(self, index, role):
        return self.tweets[index.row()].data(role)

class UserItem(QtCore.QObject):
    def __init__(self, item, parent=None):
        super(UserItem, self).__init__()
        self._data = item

    @QtCore.Property(str)
    def name(self):
        return self._data.get('name')

class TweetItem(QObject):
    roles = {
        QtCore.Qt.UserRole + 1: 'id',
        QtCore.Qt.UserRole + 6: 'original',
    }

    id_changed = Signal()

    def __init__(self, id=None, original=None, author=None, parent=None):
        QObject.__init__(self, parent=parent)

        self._data = {'original': original,
                'id': id, 'author': author}

    def data(self, key):
        return self._data[self.roles[key]]

    @Property(str, constant=True)
    def id(self):
        return self._data['id']

    @Property(QtCore.QObject, constant=True)
    def original(self):
        return self._data['original']

    @Property(QtCore.QObject, constant=True)
    def author(self):
        return UserItem(self._data['author'])

if __name__ == "__main__":
    model = TweetModel(TweetItem)
    item = TweetItem("0001", None, {'name': 'test'}, model)
    item_2 = TweetItem("0002", item, None, model)
    item_3 = TweetItem("0003", item_2, None, model)
    model.appendRow(item_3)

    App = QtGui.QApplication(sys.argv)
    view = QtDeclarative.QDeclarativeView()
    view.rootContext().setContextProperty("mymodel", model)
    view.setSource(QtCore.QUrl.fromLocalFile("main.qml"))
    view.show()
    App.exec_() 
```

main.qml

```
import QtQuick 1.0

Rectangle {
    width: 360
    height: 360

    ListView {
        anchors.fill: parent
        model: mymodel
        delegate: Item { 
            Text { 
                text: id + " " + original.id + " " + original.original.author.name
            } 
        }
    } 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:06:11.763

我认为这是[垃圾收集](http://pyqt.sourceforge.net/Docs/PyQt4/gotchas.html#garbage-collection)问题。

你`UserItem`在`author`方法中创建的你之后在 python 代码中的任何地方都不会被引用，并且会被垃圾收集。

为避免这种情况，您可以`UserItem`在您的`main`:

```
item = TweetItem("0001", None, UserItem({'name': 'test'}), model) 
```

或`TweetItem`在创建时将其存储：

```
if not self._author:
    self._author = UserItem(self._data['author'])
return self._author 
```

我可能会采用第一种方式，或者将 dict 传递给 the`TweetItem`并将其转换为`UserItem`in `__init__`：

```
self._data = {'original': original,
        'id': id, 'author': UserItem(author)} 
```

# ios - ios - 捏/缩放图像，以触摸为中心

> ID：16112140
> 
> 赞同：4
> 
> 时间：2013-04-19T19:28:18.370
> 
> 标签：ios, uigesturerecognizer, cgaffinetransform, uipangesturerecognizer, uipinchgesturerecognizer

我可以让捏/缩放功能像这样工作：

```
- (void)twoFingerPinch:(UIPinchGestureRecognizer *)recognizer
{

    if([recognizer state] == UIGestureRecognizerStateBegan) {
        _lastScale = 1.0;
    }

    CGFloat scale = 1.0 - (_lastScale - [recognizer scale]);

    CGAffineTransform currentTransform = self.imageForEditing.transform;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);

    [self.imageForEditing setTransform:newTransform];

    _lastScale = [recognizer scale];

} 
```

问题是图像会根据其中心进行缩放，因此如果您首先平移图像使其不居中，然后捏合/缩放，它不会放大到触摸之间的区域。我认为这一定是一个已经解决和解决的常见问题，但我一直无法找到解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2017-05-09T13:39:14.973

```
@objc private func pinchHandler(gesture: UIPinchGestureRecognizer) {
    if let view = gesture.view {

        switch gesture.state {
        case .changed:
            let pinchCenter = CGPoint(x: gesture.location(in: view).x - view.bounds.midX,
                                      y: gesture.location(in: view).y - view.bounds.midY)
            let transform = view.transform.translatedBy(x: pinchCenter.x, y: pinchCenter.y)
                                            .scaledBy(x: gesture.scale, y: gesture.scale)
                                            .translatedBy(x: -pinchCenter.x, y: -pinchCenter.y)
            view.transform = transform
            gesture.scale = 1
        case .ended:
            // Nice animation to scale down when releasing the pinch.
            // OPTIONAL
            UIView.animate(withDuration: 0.2, animations: {
                view.transform = CGAffineTransform.identity
            })
        default:
            return
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T11:27:32.120

您可以将图层的锚点设置为两个捏触的“中心”：

```
- (void)twoFingerPinch:(UIPinchGestureRecognizer *)recognizer
{

    if([recognizer state] == UIGestureRecognizerStateBegan) {
        _lastScale = 1.0;
        if ([recognizer numberOfTouches] >= 2) { //should always be true when using a PinchGR
            CGPoint touch1 = [recognizer locationOfTouch:0 inView:self.imageForEditing];
            CGPoint touch2 = [recognizer locationOfTouch:1 inView:self.imageForEditing];
            CGPoint mid;
            mid.x = ((touch2.x - touch1.x) / 2) + touch1.x;
            mid.y = ((touch2.y - touch1.y) / 2) + touch1.y;
            CGSize imageViewSize = self.imageForEditing.frame.size;
            CGPoint anchor;
            anchor.x = mid.x / imageViewSize.width;
            anchor.y = mid.y / imageViewSize.height;
            self.imageForEditing.layer.anchorPoint = anchor;
        }
    }

    CGFloat scale = 1.0 - (_lastScale - [recognizer scale]);

    CGAffineTransform currentTransform = self.imageForEditing.transform;
    CGAffineTransform newTransform = CGAffineTransformScale(currentTransform, scale, scale);

    [self.imageForEditing setTransform:newTransform];

    _lastScale = [recognizer scale];

} 
```

这样，图像应该相对于两次触摸之间的中心进行缩放。

有关更多详细信息，请参阅[核心动画编程指南 - 核心动画基础](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T05:53:56.257

试试下面的代码来放大/缩小并使用捏手势识别器转换视图的中心。将这段代码放在你的 UIGestureRecognizerStateBegan 中：

```
 previousTouchPoint = [pinchRecognizer locationInView:self.view]; 
```

这在你的 UIGestureRecognizerStateChanged 中：

```
 //zoom in/out view based on scale
        CGFloat zoomScale = pinchRecognizer.scale;
        CGRect tRect = pinchedView.bounds;
        tRect.size.width = pinchedView.frame.size.width * zoomScale;
        tRect.size.height = pinchedView.frame.size.height * zoomScale;
        pinchedView.bounds = tRect;

        //sets the center of view
        CGPoint currentTouchPoint = [pinchRecognizer locationInView:self.view];
        CGPoint tCenter = pinchedView.center;
        tCenter.x -= (previousTouchPoint.x - currentTouchPoint.x);
        tCenter.y -= (previousTouchPoint.y - currentTouchPoint.y);
        pinchedView.center = tCenter;
        previousTouchPoint = [pinchRecognizer locationInView:self.view]; 
```

# ios - iOS：背景颜色——UITableView 和附件具有相同的背景颜色

> ID：16112143
> 
> 赞同：5
> 
> 时间：2013-04-19T19:28:23.073
> 
> 标签：ios, objective-c, uitableview, uisearchbar

我有一个 UISearchBar。当我选择单元格时，我希望整个单元格都有一个 [UIColor grayColor];

使用下面的代码，contentView 颜色显示为灰色；但是，背景附件类型颜色显示为蓝色：

![在此处输入图像描述](https://i.stack.imgur.com/clvzd.png)

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {     

UITableViewCell *cell = [self.searchDisplayController.searchResultsTableView cellForRowAtIndexPath:indexPath];
    cell.contentView.backgroundColor = [UIColor grayColor];

    if (self.lastSelected && (self.lastSelected.row == indexPath.row))
    {
        cell.accessoryType = UITableViewCellAccessoryNone;
        [cell setSelected:NO animated:TRUE];
        self.lastSelected = nil;
    } else {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        cell.accessoryView.backgroundColor = [UIColor grayColor]; // Not working
        [cell setSelected:TRUE animated:TRUE];

        UITableViewCell *old = [self.searchDisplayController.searchResultsTableView cellForRowAtIndexPath:self.lastSelected];
        old.accessoryType = UITableViewCellAccessoryNone;
        [old setSelected:NO animated:TRUE];
        self.lastSelected = indexPath;
    } 
```

如何使蓝色也显示为 [UIColor grayColor]？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T20:31:27.770

您正在更改内容视图的背景颜色，它只是单元格视图的一部分。

![UITableViewCell 表示](https://i.stack.imgur.com/DjZaj.jpg)

更改整个单元格的背景颜色。但是，您不能这样做，`tableView:didDeselectRowAtIndexPath:`因为它不会像[这里](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html)解释的那样工作。

> **注意**：如果要更改单元格的背景颜色（通过 UIView 声明的 backgroundColor 属性设置单元格的背景颜色），您必须在`tableView:willDisplayCell:forRowAtIndexPath:`委托的方法中进行，而不是在`tableView:cellForRowAtIndexPath:`数据源中进行。

`tableView:didSelectRowAtIndexPath:`在您的情况下，通过将索引保存在 ivar 中并重新加载表视图来跟踪您选择的行。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    _savedIndex = indexPath;
    [tableView reloadData];
}

- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([_savedIndex isEqual:indexPath]) {
         cell.backgroundColor = [UIColor grayColor];
    }  
} 
```

# javascript - 当浏览器不在“前面”时，通过按键控制 Web 应用程序

> ID：16112149
> 
> 赞同：0
> 
> 时间：2013-04-19T19:28:45.720
> 
> 标签：javascript, google-chrome, browser

就像主题说的那样，我想知道即使我在浏览器前面有其他应用程序，是否可以控制我的 Web 应用程序？

首选。使用 javascript！

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:43:26.770

不，这是不可能的。想象一下这会暴露出巨大的安全漏洞。您希望在最小化浏览器中运行的网页能够读取您在文字处理器中输入的字母吗？

此外，从纯粹的技术角度来看，这种机制将是有问题的。如果您打开了多个浏览器窗口，哪个应该“获取”击键？如果答案是“所有这些”，那么如果针对某个特定打开浏览器实例的命令针对所有这些实例，那可能会非常糟糕。（例如，在一个打开的 Web 应用程序中，`Ctrl+N`跳到下一首歌曲，但在另一个中，`Ctrl+N`创建一个新文档。如果您同时打开两个页面，这样的捕获机制将执行这两个操作！）

当然，在用户同意的情况下，这样的功能*可能*可以安全地实现（与来自麦克风`getUserMedia`的输入相比——如果你点击“允许”，它并不完全是窃听），但目前还没有 API 或规范允许这样的功能。

# jquery - 使用 JQuery 创建的 Div 不起作用

> ID：16112153
> 
> 赞同：0
> 
> 时间：2013-04-19T19:29:08.183
> 
> 标签：jquery, html, jquery-ui, jquery-autocomplete

我对 JQuery 有一个奇怪的问题，我正在尝试使用一个文本字段，它使用 JQuery UI 的自动完成来显示建议，并将每个选定的文本值附加到一个 div。除了每个文本标签，还有一个删除链接，但我无法让它工作。

自动完成功能就像一个魅力：

```
 $( "#games" ).autocomplete({
                source: "<?php echo base_url('game/game/autocomplete'); ?>",
                dataType: "json",
                type: "POST",
                minLength: 1, // how many character when typing to display auto complete
                // handling the select
                select: function( event, ui ) {
                  $('#showgames').append('<span id="'+ui.item.value+'">'+ui.item.value+'<a href=# class="removegame">Remove</span>');
                    $('#games').val('');
                    return false;
                }
            });
            // removing game items
            $('.removegame').click(function(){
                // The following never happens
                    alert("hi");
                });

  <div id="showgames">
       // anchor links are generated by jquery here, within individual spans.
       // these are not working
            </div>

            <div id="testing">
                // This works
                <a class=removegame href=#>Test link</a></span> 
            </div> 
```

自动完成字段：（游戏）

```
 <td align="left"><label for="genres">Genre(s):</label></td> 
```

showgames div 的每个跨度对应于从“游戏”文本字段中获得的每个值。在这里，单击带有删除游戏的链接没有任何作用。它实际上应该像上面那样进入函数，并显示一个警报，但它从未发生过。

相反，如果我使用类 removegame 在页面上创建一个锚标记项，它就可以工作。但是当它使用 jQuery 生成时，它不起作用。我被逼疯了。有人可以帮帮我吗？

非常感谢您提前！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:30:53.333

你需要使用`.on`这种方式

```
$("#showgames").on('click','.removegame',function(){
        // The will happen now
        alert("hi");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:32:46.690

由于您的链接是动态创建的，因此在将删除功能附加到链接时它们并不存在。相反，当点击事件发生时，最好编写代码来检查元素上的 removegame 类：

```
$("#showgames").on('click', '.removegame', function(){
    // Your code here
    console.log("hello");
}); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-19T19:32:56.700

在您的选择功能中，您需要在新添加的链接上连接事件。基本上，您可以移动此代码：

```
 // removing game items
    $('.removegame').click(function(){
        // The following never happens
            alert("hi");
        }); 
```

在您的选择功能内。

# php - JavaScript 和 SO 策略：与服务接口而不引入对例如 ASP.net 的依赖

> ID：16112160
> 
> 赞同：0
> 
> 时间：2013-04-19T19:29:31.783
> 
> 标签：php, javascript, asp.net, json, angularjs

所以我有一个程序通过在 localhost:8080 上运行的 HTTP 提供 JSON，我希望将前端连接到它（AngularJS）。

我很想知道是否有任何方式与这样的服务进行交互，而不需要引入对 ASP.NET 或 PHP 等的依赖，以便充当服务和浏览器之间的代理。

我理解同源策略，跨站脚本威胁 yada yada yada。感谢所有建设性的贡献。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:31:39.447

我会考虑使用 jsonp 而不是 json 来避免上述跨站点脚本...

这是另一个相同的答案

[Ajax 跨域调用](https://stackoverflow.com/questions/648048/ajax-cross-domain-calls)

# python - 枕头2.0.0教程

> ID：16112161
> 
> 赞同：12
> 
> 时间：2013-04-19T19:29:41.017
> 
> 标签：python, image, pillow

我正在尝试为python学习枕头2.0.0，但老实说，我不知道从哪里开始，因为我找不到任何教程或文档，而且[这里](http://pillow.readthedocs.org/en/latest/)的结构很糟糕，它只是一个一个地描述了模块，所以我进不去。

您是否有以下链接：

1.  教程/文档
2.  一段简单的代码编写一个 png 并将其保存到文件中
3.  一个使用我可以阅读的图像库的注释良好的程序的链接

我在 windows 7 上使用 python 3.3 有什么不同吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T20:18:05.093

Pillow 是 PIL 的一个分支，可以从 PIL 函数和类中使用。你可以搜索PIL教程！

[安装枕头](https://pypi.python.org/pypi/Pillow/2.1.0)（你可以在windows中安装pip或easy_install然后写`pip install pillow`或`easy_install pillow`）

[http://effbot.org/imagingbook/introduction.htm](http://effbot.org/imagingbook/introduction.htm)

[http://www.geeks3d.com/20100930/tutorial-first-steps-with-pil-python-imaging-library/](http://www.geeks3d.com/20100930/tutorial-first-steps-with-pil-python-imaging-library/)

[http://nadiana.com/pil-tutorial-basic-advanced-drawing](http://web.archive.org/web/20130115175340/http://nadiana.com/pil-tutorial-basic-advanced-drawing)

[http://nadiana.com/pil-tutorial-how-create-button-generator](http://web.archive.org/web/20130115175715/http://nadiana.com/pil-tutorial-how-create-button-generator)

[http://pythonvision.org/basic-tutorial](http://pythonvision.org/basic-tutorial)

[http://python.developpez.com/cours/pilhandbook/php/introduction.php](http://python.developpez.com/cours/pilhandbook/php/introduction.php)

[http://www.riisen.dk/dop/pil.html](http://www.riisen.dk/dop/pil.html)

# r - 从状态转换的图表流程图

> ID：16112162
> 
> 赞同：24
> 
> 时间：2013-04-19T19:29:47.003
> 
> 标签：r, plot, flowchart

我正在尝试找到一种在 R 中绘制类似这样的图形的方法：

![使用inkscape创建的图像](https://i.stack.imgur.com/Ycr5E.png)

这是状态之间的转换，我希望框等于人口大小，箭头表示转换的大小。我看过[Diagram](http://cran.r-project.org/web/packages/diagram/vignettes/diagram.pdf)包，但它的流程图似乎太粗糙了。

1.  有没有更好的软件包可以做到这一点？
2.  如果 1 == FALSE：还有其他更适合的软件吗？
3.  如果 1 & 2 == FALSE：我想最后的手段是网格[矩形](http://stat.ethz.ch/R-manual/R-devel/library/grid/html/grid.roundrect.html)和[贝塞尔曲线箭头](http://stat.ethz.ch/R-manual/R-devel/library/grid/html/grid.bezier.html)，有什么想法可以快速实现吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-05-06T21:02:36.783

好的，所以我无法抗拒，我按照@agstudy 的建议根据网格包做了一个绘图。有几件事仍然困扰着我：

*   贝塞尔箭头不跟随直线，而是直接指向盒子而不是以一定角度进入。
*   我不知道贝塞尔曲线的一个很好的分级选项，似乎通常很少支持 R 中的渐变（我读过的大多数解决方案都是关于多行的）

# 解决它

好的，经过大量工作，我终于完全正确了。我的包的新 0.5.3.0 版本有情节的代码。

![在此处输入图像描述](https://i.stack.imgur.com/HAoKU.png)

# 旧代码

这是情节：

![例子](https://i.stack.imgur.com/QHdau.png)

和代码：

```
#' A transition plot
#' 
#' This plot purpose is to illustrate how states change before and
#' after. In my research I use it before surgery and after surgery
#' but it can be used in any situation where you have a change from 
#' one state to another
#'  
#' @param transition_flow This should be a matrix with the size of the transitions.
#'  The unit for each cell should be number of observations, row/column-proportions 
#'  will show incorrect sizes. The matrix needs to be square. The best way to generate
#'  this matrix is probably just do a \code{table(starting_state, end_state)}. The rows 
#'  represent the starting positions, while the columns the end positions. I.e. the first
#'  rows third column is the number of observations that go from the first class to the 
#'  third class.
#' @param box_txt The text to appear inside of the boxes. If you need line breaks
#'  then you need to manually add a \\n inside the string. 
#' @param tot_spacing The proportion of the vertical space that is to be left
#'  empty. It is then split evenly between the boxes.
#' @param box_width The width of the box. By default the box is one fourth of
#'  the plot width.
#' @param fill_start_box The fill color of the start boxes. This can either 
#'  be a single value ore a vector if you desire different colors for each 
#'  box. 
#' @param txt_start_clr The text color of the start boxes. This can either 
#'  be a single value ore a vector if you desire different colors for each 
#'  box.
#' @param fill_end_box The fill color of the end boxes. This can either 
#'  be a single value ore a vector if you desire different colors for each 
#'  box.
#' @param txt_end_clr The text color of the end boxes. This can either 
#'  be a single value ore a vector if you desire different colors for each 
#'  box.
#' @param pt The point size of the text
#' @param min_lwd The minimum width of the line that we want to illustrate the
#'  tranisition with. 
#' @param max_lwd The maximum width of the line that we want to illustrate the
#'  tranisition with. 
#' @param lwd_prop_total The width of the lines may be proportional to either the 
#'  other flows from that box, or they may be related to all flows. This is a boolean
#'  parameter that is set to true by default, i.e. relating to all flows.
#' @return void 
#' @example examples/transitionPlot_example.R
#' 
#' @author max
#' @import grid
#' @export
transitionPlot <- function (transition_flow,
                            box_txt = rownames(transition_flow),
                            tot_spacing = 0.2,
                            box_width = 1/4, 
                            fill_start_box = "darkgreen",
                            txt_start_clr = "white",
                            fill_end_box = "steelblue",
                            txt_end_clr = "white",
                            pt=20,
                            min_lwd = 1,
                            max_lwd = 6,
                            lwd_prop_total = TRUE) {
  # Just for convenience
  no_boxes <- nrow(transition_flow)

  # Do some sanity checking of the variables
  if (tot_spacing < 0 ||
        tot_spacing > 1)
    stop("Total spacing, the tot_spacing param,",
      " must be a fraction between 0-1,",
      " you provided ", tot_spacing)

  if (box_width < 0 ||
        box_width > 1)
    stop("Box width, the box_width param,",
      " must be a fraction between 0-1,",
      " you provided ", box_width)

  # If the text element is a vector then that means that 
  # the names are the same prior and after
  if (is.null(box_txt))
    box_txt = matrix("", ncol=2, nrow=no_boxes)
  if (is.null(dim(box_txt)) && is.vector(box_txt))
    if (length(box_txt) != no_boxes)
      stop("You have an invalid length of text description, the box_txt param,",
          " it should have the same length as the boxes, ", no_boxes, ",",
          " but you provided a length of ", length(box_txt))
    else
      box_txt <- cbind(box_txt, box_txt)
  else if (nrow(box_txt) != no_boxes ||
        ncol(box_txt) != 2)
    stop("Your box text matrix doesn't have the right dimension, ", 
         no_boxes, " x 2, it has: ", 
         paste(dim(box_txt), collapse=" x "))

  # Make sure that the clrs correspond to the number of boxes
  fill_start_box <- rep(fill_start_box, length.out=no_boxes)
  txt_start_clr <- rep(txt_start_clr, length.out=no_boxes)
  fill_end_box <- rep(fill_end_box, length.out=no_boxes)
  txt_end_clr <- rep(txt_end_clr, length.out=no_boxes)

  if(nrow(transition_flow) != ncol(transition_flow))
    stop("Invalid input array, the matrix is not square but ",
      nrow(transition_flow), " x ", ncol(transition_flow))

  # Set the proportion of the start/end sizes of the boxes
  prop_start_sizes <- rowSums(transition_flow)/sum(transition_flow)
  prop_end_sizes <- colSums(transition_flow)/sum(transition_flow)

  if (sum(prop_end_sizes) == 0)
    stop("You can't have all empty boxes after the transition")

  getBoxPositions <- function (no, side){
    empty_boxes <- ifelse(side == "left", 
      sum(prop_start_sizes==0), 
      sum(prop_end_sizes==0))

    # Calculate basics
    space <- tot_spacing/(no_boxes-1-empty_boxes)

    # Do the y-axis
    ret <- list(height=(1-tot_spacing)*ifelse(side == "left", 
                                              prop_start_sizes[no], 
                                              prop_end_sizes[no]))
    if (no == 1){
      ret$top <- 1
    }else{
      ret$top <- 1 - 
        ifelse(side == "left", 
               sum(prop_start_sizes[1:(no-1)]), 
               sum(prop_end_sizes[1:(no-1)])) * (1-tot_spacing) -
        space*(no-1)
    }
    ret$bottom <- ret$top - ret$height
    ret$y <- mean(c(ret$top, ret$bottom))

    ret$y_exit <- rep(ret$y, times=no_boxes)
    ret$y_entry_height <- ret$height/3
    ret$y_entry <- seq(to=ret$y-ret$height/6,
                       from=ret$y+ret$height/6,
                       length.out=no_boxes)

    # Now the x-axis
    if (side == "right"){
      ret$left <- 1-box_width
      ret$right <- 1
    }else{
      ret$left <- 0
      ret$right <- box_width
    }

    txt_margin <- box_width/10
    ret$txt_height <- ret$height - txt_margin*2
    ret$txt_width <- box_width - txt_margin*2

    ret$x <- mean(c(ret$left, ret$right))

    return(ret)
  }

  plotBoxes <- function (no_boxes, width, txt, 
    fill_start_clr, fill_end_clr, 
    lwd=2, line_col="#000000") {

    plotBox <- function(bx, bx_txt, fill){
      grid.roundrect(y=bx$y, x=bx$x, 
        height=bx$height, width=width, 
        gp = gpar(lwd=lwd, fill=fill, col=line_col))

      if (bx_txt != ""){
        grid.text(bx_txt,y=bx$y, x=bx$x, 
          just="centre", 
          gp=gpar(col=txt_start_clr, fontsize=pt))
      }
    }

    for(i in 1:no_boxes){
      if (prop_start_sizes[i] > 0){
        bx_left <- getBoxPositions(i, "left")
        plotBox(bx=bx_left, bx_txt = txt[i, 1], fill=fill_start_clr[i])
      }

      if (prop_end_sizes[i] > 0){
        bx_right <- getBoxPositions(i, "right")
        plotBox(bx=bx_right, bx_txt = txt[i, 2], fill=fill_end_clr[i])
      }
    }
  }

  # Do the plot
  require("grid")
  plot.new()
  vp1 <- viewport(x = 0.51, y = 0.49, height=.95, width=.95)
  pushViewport(vp1)

  shadow_clr <- rep(grey(.8), length.out=no_boxes)
  plotBoxes(no_boxes, 
            box_width, 
            txt = matrix("", nrow=no_boxes, ncol=2), # Don't print anything in the shadow boxes
            fill_start_clr = shadow_clr, 
            fill_end_clr  = shadow_clr,
            line_col=shadow_clr[1])
  popViewport()

  vp1 <- viewport(x = 0.5, y = 0.5, height=.95, width=.95)
  pushViewport(vp1)
  plotBoxes(no_boxes, box_width, 
            txt = box_txt,
            fill_start_clr = fill_start_box, 
            fill_end_clr  = fill_end_box)

  for (i in 1:no_boxes){
    bx_left <- getBoxPositions(i, "left")
    for (flow in 1:no_boxes){
      if (transition_flow[i,flow] > 0){
        bx_right <- getBoxPositions(flow, "right")

        a_l <- (box_width/4)
        a_angle <- atan(bx_right$y_entry_height/(no_boxes+.5)/2/a_l)*180/pi
        if (lwd_prop_total)
          lwd <- min_lwd + (max_lwd-min_lwd)*transition_flow[i,flow]/max(transition_flow)
        else
          lwd <- min_lwd + (max_lwd-min_lwd)*transition_flow[i,flow]/max(transition_flow[i,])

        # Need to adjust the end of the arrow as it otherwise overwrites part of the box
        # if it is thick
        right <- bx_right$left-.00075*lwd
        grid.bezier(x=c(bx_left$right, .5, .5, right), 
                    y=c(bx_left$y_exit[flow], bx_left$y_exit[flow], 
                        bx_right$y_entry[i], bx_right$y_entry[i]), 
                    gp=gpar(lwd=lwd, fill="black"),
                    arrow=arrow(type="closed", angle=a_angle, length=unit(a_l, "npc")))
        # TODO: A better option is probably bezierPoints

      }
    }
  }
  popViewport()
} 
```

该示例是通过以下方式生成的：

```
# Settings
no_boxes <- 3
# Generate test setting
transition_matrix <- matrix(NA, nrow=no_boxes, ncol=no_boxes)
transition_matrix[1,] <- 200*c(.5, .25, .25)
transition_matrix[2,] <- 540*c(.75, .10, .15)
transition_matrix[3,] <- 340*c(0, .2, .80)

transitionPlot(transition_matrix,  
  box_txt = c("First", "Second", "Third")) 
```

我也将此添加到我的[Gmisc-package](http://gforge.se/gmisc/)中。享受！

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-20T08:31:05.007

这只是为了表明`plotmat`可以用于此：

```
library(diagram)

M  <- matrix(nrow = 4, ncol = 4, byrow = TRUE, data = 0)
C <- M
A <- M
M[2, 1] <- "f11" 
M[4, 1] <- "f12" 
M[2, 3] <- "f21" 
M[4, 3] <- "f22"
C[4, 1] <- -0.1
C[2, 3] <- 0.1
A[2, 1] <- A[2, 3] <- A[4, 3] <-4
A[4, 1] <-  8

col   <- M
col[] <- "red"
col[2, 1] <- col[4, 1] <- "blue"
plotmat(M, pos = c(2, 2), curve = C, name = c(1,1,2,2),
        box.size=c(0.05,0.03,0.03,0.05), box.prop = 2,
        arr.lwd=A,
        lwd = 1, box.lwd = 2, box.cex = 1, cex.txt = 0.8, 
        arr.lcol = col, arr.col = col, box.type = "rect",
        lend=3) 
```

![在此处输入图像描述](https://i.stack.imgur.com/MeaBJ.png)

一些微调和可能的修改函数应该会给你你想要的图表。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-19T21:31:39.870

我的回答只是一个概念证明，以证明该情节使用`grid`and的可行性`bezier`。我`lattice`用来绘制场景，然后`grid`打包在`native`. 这只是一个开始，我想你可以轻松完成它。

![在此处输入图像描述](https://i.stack.imgur.com/IKFVB.png)

```
library(grid)
library(lattice)

dat <- data.frame(x=c(1,1,2,2),
                  y=c(1,2,1,2),
                  weight=c(2,1,1,2),
                  text=c('B','A','B','A'))
cols <- colorRampPalette(c("grey", "green"))(nrow(dat))
xyplot(y~x,data=dat,groups=weight,
       xlim=extendrange(dat$x,f=1),
       ylim=extendrange(dat$y,f=1),
       panel=function(x,y,groups,...){
         lapply(seq_along(x),function(i){
         grid.roundrect(x[i],y[i],
                        width=.5, 
                        height=.5*groups[i],
                        gp=gpar(fill=cols[i],lwd=5,col='blue'),
                        def='native')
         grid.text(x[i],y[i],label=dat$text[i],
                    gp=gpar(cex=5,col='white'),
                   def='native')
        })
         xx <- c(x[1]+0.25, x[1]+0.25, x[3]-0.25, x[3]-0.25)
         yy <- c(y[1], y[1], y[3], y[3])
         grid.bezier(xx, yy,
                     gp=gpar(lwd=3, fill="black"),
                     arrow=arrow(type="closed"),
                     def='native')
         xx <- c(x[1]+0.25, 1, 2, x[4]-0.25)
         yy <- c(y[1], 2, 1, y[4])
         grid.bezier(xx, yy,
                     gp=gpar(lwd=3, fill="black"),
                     arrow=arrow(type="closed",
                                 length=unit(0.5, "inches")),
                     def='native')
         xx <- c(x[2]+0.25, x[2]+0.25, x[4]-0.25, x[4]-0.25)
         yy <- c(y[2], y[2], y[4], y[4])
         grid.bezier(xx, yy,
                     gp=gpar(lwd=3, fill="black"),
                     arrow=arrow(type="closed",
                                 length=unit(0.5, "inches")),
                     def='native')

         }) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-30T04:07:55.113

非常旧的帖子，但问题的一部分是术语。一旦您知道如何称呼某物，就更容易弄清楚如何表示数据。这些图表是 [桑基图](https://en.wikipedia.org/wiki/Sankey_diagram)

我个人喜欢[Mike Bostock 的 D3js 库](https://bost.ocks.org/mike/sankey/)来制作这些图表，但 R 也可以。

要在 R 中执行此操作，请参阅此[Stack Post](https://stackoverflow.com/questions/19730604/visualize-in-r-flow-from-one-set-of-objects-to-another)或[R-Blogger](https://www.r-bloggers.com/creating-custom-sankey-diagrams-using-r/)帖子

# python - 从子模块导入父模块

> ID：16112166
> 
> 赞同：4
> 
> 时间：2013-04-19T19:30:03.473
> 
> 标签：python, django

我遇到了一个我不明白的导入错误，并且无法在其他 SO 问题中找到解决方案：

我有这个 django 结构：

*   项目根/
    *   应用/
        *   __init__.py
        *   我的应用程序/
            *   __init__.py
            *   模型.py
            *   视图.py
            *   报告/
                *   __init__.py
                *   R1.py
                *   R2.py

在 R1.py 或 R2.py 中的任何一个中，声明

```
from apps.my_app.models import MyModel 
```

引发 ImportError。我知道 MyModel 存在......我在 views.py 中以完全相同的方式导入它。

在 apps.my_app.reports.__init__.py 我有以下几行：

```
from R1 import R1_Report
from R2 import R2_Report 
```

因为 RX_Report 类是在每个文件中定义的。

这就是我能想到的所有潜在相关信息......有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:34:33.400

啊……没关系。这是一个循环导入。通过切换解决了

```
from apps.my_app import reports
...
reports.stuff() 
```

至

```
import apps.my_app
...
apps.my_app.reports.stuff() 
```

在模型.py

# c++ - 我可以（应该）将我的 DBClientConnection 用作全局变量吗？

> ID：16112169
> 
> 赞同：1
> 
> 时间：2013-04-19T19:30:17.673
> 
> 标签：c++, qt, mongodb

*   视窗 7 SP1

*   2010 年

*   MongoDB 2.2.0

*   Qt 4.8.4

编写单线程应用程序。我总是将 DBClientConnection 作为引用参数传递给任何需要访问 MongoDB 的函数。我可以使用全局变量来代替传递参数吗？

这是在使用 Qt 的 QKeyEvent 时出现的。这是用这个原型实现的：

```
void keyPressEvent(QKeyEvent * key_event); 
```

重新实现：

```
void QWidget::keyPressEvent ( QKeyEvent * event ) 
```

我想从哪个函数调用 MongoDB 函数，但我无权访问 keyPressEvent 中的 DBClientConnection。因此，为什么我正在考虑将 DBClientConnection 设为全局。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:52:03.243

推荐的解决方案是您的数据库对象的抽象。

[这是C#中概念的解释](http://www.remondo.net/repository-pattern-example-csharp/)

但简单地说，C++ 的目的是定义一个接口。就这样。`IDatabase`或`IRepository`。

正如您所建议的那样，它或多或少具有全局值的作用，但如果您真的想要，您会将其隐藏到`Factory`, 或`DependencyInjection`机制...或全局值中。`Singleton`

但是具体`class MyMongoDatabase`实现连接的东西，并指向真正的 mongoDb 应该打扰这个指针。不是你的应用程序的其余部分。**最重要的是，如果它在您计划访问数据库的 QWidget::keyPressEvent 之类的 GUI 内部**。

```
class MyMongoDatabase : public IDatabase
{
    private:
        void connect();
        void disconnect();

    public:
        std::vector<Something> query_something(int param);
        void insert(AnOtherThing& thing);
        //.... other crud operations
}; 
```

在您的逻辑/业务代码中，您只能拥有：

```
IDatabase& database = getDatabase();
std::vector<Something> somethings = database.query_something(); 
```

并且`IDatabase`会暴露所有查询、插入和其他 CRUD 操作的功能。背后的想法被称为“松散耦合”。

看看它是否值得编码。这取决于您在应用程序中执行此类操作的次数。一般来说，对于像数据库这样大的东西，这是一个非常好的主意。

# android - FrameLayout 和 LinearLayout，在底部绘制按钮

> ID：16112175
> 
> 赞同：1
> 
> 时间：2013-04-19T19:30:53.367
> 
> 标签：android, xml, layout

对此有很多不同的建议，但它们似乎都不适用于 layout:gravity 等（尽管我可能做错了）。

我希望在屏幕底部绘制我的按钮，而不是在屏幕顶部的默认位置绘制它们。我确信有一种简单的方法可以做到这一点。

目前，按钮绘制在顶部

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:game_view="http://schemas.android.com/apk/res/pap.crowslanding"
android:layout_width="fill_parent"
android:layout_height="wrap_content" >

<FrameLayout
    android:id="@+id/flayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_above="@+id/button1"
    android:orientation="vertical" >

    <pap.crowslanding.GameView
        android:id="@+id/game_view"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        game_view:ballDiam="@dimen/ballDiam"
        game_view:cellWidth="@dimen/cellWidth"
        game_view:pixelHeight="@dimen/pixelHeight"
        game_view:pixelWidth="@dimen/pixelWidth" />

    <pap.crowslanding.MazeBall
        android:id="@+id/mazeball"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="invisible"
        game_view:ballDiam="@dimen/ballDiam"
        game_view:cellWidth="@dimen/cellWidth" />
</FrameLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="bottom"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom"
        android:layout_weight="1"
        android:text="@string/right" >
    </Button>

    <Button
        android:id="@+id/button2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/down" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:49:59.860

父容器是 a `RelativeLayout`，所以你只需要添加`android:android:layout_alignParentBottom=true`到你的`LinearLayout`并去掉那个`layout_gravity`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:35:55.677

您可以尝试以下方法：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:game_view="http://schemas.android.com/apk/res/pap.crowslanding"
android:layout_width="match_parent"
android:layout_height="wrap_content" >

<FrameLayout
    android:id="@+id/flayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/button1"
    android:orientation="vertical" >

    <pap.crowslanding.GameView
        android:id="@+id/game_view"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        game_view:ballDiam="@dimen/ballDiam"
        game_view:cellWidth="@dimen/cellWidth"
        game_view:pixelHeight="@dimen/pixelHeight"
        game_view:pixelWidth="@dimen/pixelWidth" />

    <pap.crowslanding.MazeBall
        android:id="@+id/mazeball"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:visibility="invisible"
        game_view:ballDiam="@dimen/ballDiam"
        game_view:cellWidth="@dimen/cellWidth" />
    </FrameLayout>
    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="@string/right" >
    </Button>

    <Button
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:text="@string/down" />
</RelativeLayout> 
```

然后你需要调整你的按钮，使它们不在彼此之上（`android:layout_toRightOf="@+id/button_name"`和`android:layout_toLeftOf=...`）。我不知道你想要左右哪个。你也应该使用`match_parent`而不是`fill_parent`. `fill_parent`在 API 8 中已弃用（我认为是 8，但我知道它已被弃用）。

# dynamics-crm-2011 - 在从null更新到有效值时，CRM 2011上的更新插件未触发

> ID：16112177
> 
> 赞同：0
> 
> 时间：2013-04-19T19:30:54.097
> 
> 标签：dynamics-crm-2011, crm, dynamics-crm-online

我有一个在“更新”、“异步”、“后期操作”上注册的插件。此插件检查作为选项集的字段的更改，并执行某些功能。每当将选项集值从一个值更新为另一个值时，此插件都会按预期工作。但是当我将它从 null 更新为有效值时甚至无法触发。我的意思是从默认值（未分配的值）到有效值。

我错过了什么吗？或者这是预期的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T13:22:36.707

对于在更新特定字段时触发的插件，您必须将其注册为在任何字段更改时触发，或者当您关注的特定字段发生更改时触发。我的猜测是您已经指定了一个字段子集来触发更新，并且您的特定选项集字段不包括在内。

# java - BoxLayout 未显示所有组件

> ID：16112178
> 
> 赞同：1
> 
> 时间：2013-04-19T19:30:57.893
> 
> 标签：java, swing, jpanel, boxlayout

我不知道如何解决这个问题，我在使用 BoxLayout 的主 JPanel 中有几个 JPanel（用于绘图）。JPanel 具有设置的最小尺寸和首选尺寸。主 JPanel 仅显示五个中的三个，因为它太小了。我尝试将主 JPanel 的大小设置得相当大，还尝试添加一个滚动条，但没有任何显示。

这是一些代码：

```
public static void main(String[] args) throws XMLStreamException, IOException {
    JFrame frame = makeFrame(500, 500);
    JPanel panel = new JPanel();
    panel.setSize(1800, 1800);
    JScrollPane scroller = new JScrollPane(panel);  

    panel.setLayout(new BoxLayout(panel, BoxLayout.Y_AXIS));

    frame.add(scroller);

    test1(panel);

}
public static JFrame makeFrame(int sizex, int sizey){

    JFrame frame = new JFrame();

    frame.setTitle("FDA");
    frame.setSize(sizex, sizey);
    frame.setLocationRelativeTo(null);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.setVisible(true);
    return frame;
} 
```

`test1`将六个大小为 360x360 的 JPanel 添加到`panel`.

使用滚动条，我只能看到其中一个 JPanel，并且没有出现滚动条。

编辑：在绘制主 JPanel 之前，我必须等到所有计算完成，这就是为什么它没有显示最后 3 个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:26:41.240

*   `frame.setVisible(true);`在创建和添加之前执行`JComponents`（到这个已经可见的 JFrame）

*   请问什么`test1(panel);`

# gmaps4rails - 无法渲染 gmaps4rails 地图

> ID：16112179
> 
> 赞同：1
> 
> 时间：2013-04-19T19:30:58.777
> 
> 标签：gmaps4rails

好的，我已经尝试了几个小时用 gmaps4rails 渲染谷歌地图，但我无法弄清楚，所以我希望在这里得到一些想法。我想我已经很接近了。

这是我所做的：

*   在 github 上完成了设置步骤：[https ://github.com/apneadiving/Google-Maps-for-Rails](https://github.com/apneadiving/Google-Maps-for-Rails)
*   注意到我视图中的 gmaps4rails 方法调用在标记中添加了一些 JS 代码，因此我在对 Gmaps.load_map() 的 JS 调用上放置了一个断点。在这个方法中，我在 Gmaps.map.initialize() 上设置了一个断点。此时，我的页面中显示了一个空白 div 区域（要渲染地图的位置），但是当我单步执行此行时，该区域被隐藏（特别是在初始化中的地图创建期间是隐藏发生的地方：return新的 google.maps.Map(document.getElementById(this.map_options.id)，mergedOptions))。之后的下一行是对地图标记的调用，它提供了一个 lat/lng 对象数组，看起来像这样： Gmaps.map.markers = [{"lat":90.2765777,"lng":-37.7498712} ]，所以基本上它'
*   还注意到我的 firebug 网络选项卡中对 google maps api 的几次调用（调用 maps.gstatic.com、mt0.googleapi.com 和 maps.googleapi.com）。
*   确保 gmaps4rails css 文件正在下载到我的浏览器会话中（我正在获取 gmaps4rails.css）。
*   在某个时候尝试使用 google api 密钥在我的视图上添加一个脚本标签，但后来发现我真的不需要它的最新版本，如下所述：[Google Maps API-Key in gmaps4rails](https://stackoverflow.com/questions/5042829/google-maps-api-key-in-gmaps4rails)
*   在 SO 上搜索了一些类似的问题，发现这些无济于事：[gmaps4rails not shown map](https://stackoverflow.com/questions/8245013/gmaps4rails-not-showing-map) , [gmaps4rails is not displayed the map](https://stackoverflow.com/questions/12398445/gmaps4rails-is-not-displaying-the-map)

我想我错过了一些非常简单的东西，因为数据似乎已经到位，可以渲染地图。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T13:10:39.353

事实证明，我将 gmaps4rails 的 map_container div 包装在我自己的地图 div 中，这让 gmaps4rails 无法正常工作。我假设 gmaps4rails 的 JS 逻辑插入并依赖于它自己的 div#map。所以基本上不要将您的 gmaps4rails 调用包装在 id="map" 的 div 中。

在我的haml中，我有这个：

```
#map
  = gmaps4rails(@mapData) 
```

当我只需要这个时：

```
= gmaps4rails(@mapData) 
```

或者：

```
#foo
  = gmaps4rails(@mapData) 
```

# android - 整数资源不是预期的

> ID：16112180
> 
> 赞同：0
> 
> 时间：2013-04-19T19:31:00.550
> 
> 标签：android, android-resources

我的 strings.xml 文件中有以下整数资源

```
<item type="integer" name="pID" format="integer">374</item>
<item type="integer" name="vID" format="integer">3468</item> 
```

我想从我的代码中调用它们以获取 374 和 3468。

但是，当我输出到 Logcat...

```
Log.d("MainActivity.onCreate","pID: "+R.integer.pID+" vID: "+R.integer.vID); 
```

我看到以下...

```
pID: 2131230720 vID: 2131230721 
```

为什么分别返回 3468`R.integer.vID`和`R.integer.pID`374 以外的整数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:34:33.783

您正在打印出资源 ID。改为使用`Resources.getInteger(resourceId)`。

[http://developer.android.com/guide/topics/resources/more-resources.html#Integer](http://developer.android.com/guide/topics/resources/more-resources.html#Integer)

# php - 使用 PHP 处理时 FFmpeg“无法打开文件”错误消息

> ID：16112181
> 
> 赞同：2
> 
> 时间：2013-04-19T19:31:01.963
> 
> 标签：php, ffmpeg

我正在使用`ffmpeg`从多个视频文件中获取图像。我`ffmpeg`准备好我的代码，但是当我编写代码时出现以下错误`exec`。

```
ffmpeg version 0.8.6-4:0.8.6-0ubuntu0.12.04.1, Copyright (c) 2000-2013 the Libav developers
built on Apr  2 2013 17:02:36 with gcc 4.6.3

*** THIS PROGRAM IS DEPRECATED ***
This program is only provided for compatibility and will be removed in a future release. Please use avconv instead.
//files info...
//files info...
Incompatible pixel format 'yuv420p' for codec 'mjpeg', auto-selecting format 'yuvj420p'
//file info...
[buffer @ 0x1513c40] Buffering several frames is not supported. Please consume all available frames before adding a new one.
 Last message repeated 75 times
[image2 @ 0x1513460] Could not open file : /test/project
av_interleaved_write_frame(): Input/output error 
```

我只显示颜色突出显示的错误消息。我的代码：

```
 $ffmpeg ="/usr/bin/ffmpeg";

 $image_source_path = '/test/project/test.mp4';
 $ALL_PLACE_WIDTH = 300;
 $ALL_PLACE_HEIGHT = 300;

 $image_cmd = " -r 1 -ss 00:00:10 -t 00:00:01 -s ".$ALL_PLACE_WIDTH."x".$ALL_PLACE_HEIGHT."   -f image2 " ;

 $dest_image_path = '/test/project';

 $str_command= $ffmpeg  ." -i " . $image_source_path . $image_cmd .$dest_image_path;
 shell_exec($str_command); 
```

看来我的 Linux 想让我切换到`avconv`. 我不确定如何修复这些错误。有人可以给我一个提示吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-20T11:49:40.670

您应该始终显示**完整**的输出而不是剪切部分。`ffmpeg`在您的示例中，如果您显示执行的实际命令行而不是其周围的整个 PHP 代码，则错误会更加明显。

在您的情况下，您的问题是命令如下所示：

```
ffmpeg -i /test/project/test.mp4 -r 1 -ss 00:00:10 -t 00:00:01 -f image2 /test/project 
```

但是，`/test/project`是一个文件夹，而不是有效的输出图像路径。`/text/project/image%04d.jpg`如果您想从头开始创建图像，则可以使用`image0001.jpg`。

如果您的真正目标是只导出一个缩略图，请使用以下`vframes`选项：

```
ffmpeg -i /test/project/test.mp4 -r 1 -ss 00:00:10 -vframes 1 /test/project/image.jpg 
```

在较新的版本`ffmpeg`中，您也可以使用`-frames:v`。

* * *

您可以`ffmpeg`在 Ubuntu 中使用，但它是旧版本。您可以使用`avconv`来自[Libav](http://libav.org/)`ffmpeg`或来自[FFmpeg](http://ffmpeg.org/download.html)的原始文件——我建议[从源代码编译它](http://ffmpeg.org/trac/ffmpeg/wiki/UbuntuCompilationGuide)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-26T10:50:41.307

我遇到了同样的问题，在我的情况下，我有错误的文件名（例如 00:00:00.png）所以它基本上是一个操作系统限制而不是 ffmpeg 希望这有帮助

# canvas - 我们如何从 onClick 事件中获取鼠标画布的相对 x,y 坐标？

> ID：16112183
> 
> 赞同：2
> 
> 时间：2013-04-19T19:31:04.943
> 
> 标签：canvas, dart

我从[https://github.com/sethladd/bad-aliens-dart/blob/master/web/Game.dart](https://github.com/sethladd/bad-aliens-dart/blob/master/web/Game.dart)找到了以下代码：

```
 ClientRect rect = ctx.canvas.getBoundingClientRect();
    clientBoundingRect = new GamePoint(rect.left, rect.top);
...
    GamePoint getXandY(e) {
      num x =  e.clientX - clientBoundingRect.x - (ctx.canvas.width/2);
      num y = e.clientY - clientBoundingRect.y - (ctx.canvas.height/2);
      return new GamePoint(x, y);
    } 
```

我已经测试过，但它没有计算出画布中正确的鼠标位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:03:05.173

[CanvasElement.getBoundingRect()](http://api.dartlang.org/docs/releases/latest/dart_html/CanvasElement.html#getBoundingClientRect)现在返回 a`Rect`而不是 a `ClientRect`。否则，代码似乎对我来说可以正常工作。

**更新：**请注意，坏外星人将原点放置在画布的中心。也许你想把它留在左上角？如果是这样，那么不要减去画布尺寸的一半：

```
GamePoint getXandY(e) {
  num x =  e.clientX - clientBoundingRect.x;
  num y = e.clientY - clientBoundingRect.y;
  return new GamePoint(x, y);
} 
```

# inno-setup - 我可以告诉 Inno Setup *not* 创建 unins000 文件吗

> ID：16112184
> 
> 赞同：9
> 
> 时间：2013-04-19T19:31:10.880
> 
> 标签：inno-setup, uninstallation

我正在使用 Inno Setup 将第三方安装程序与我构建的另一个 EXE 打包在一起，以准备我们公司的安装环境。完成后，我真的很想从最终用户的计算机中删除所有安装程序文件。我尝试`deleteafterinstall`在使用 Inno 创建的临时目录上使用，但它不起作用。Inno 自动创建`unins000.exe`并`unins000.dat`在安装目录中。所以当它试图删除根目录时，它发现它不是空的。

我不需要 Inno 的卸载程序，因为 3P 应用程序有自己的。我可以告诉 Inno Setup**不要**创建 unins000 文件吗？或者我可以告诉它删除临时目录，即使它不为空？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-19T20:51:20.157

我已经搜索并搜索了文档，但找不到它。然后我在文档中搜索了其他内容，它就在那里。使用以下行停止创建卸载文件。

```
[Setup]
Uninstallable = no 
```

不过，我仍然无法删除它创建的临时目录。

# css - fieldset 将 div 中的字段向右对齐

> ID：16112189
> 
> 赞同：0
> 
> 时间：2013-04-19T19:31:28.740
> 
> 标签：css, fieldset

我正在尝试将我的字段集 Number2 中的 2 个字段和 div 中的弃权日期与类 container2 对齐，但是它失败了，我希望这些字段与 Number 和 Date 的级别相同，并且我希望它在右边，但我是有麻烦。
这是 jsFiddle 代码：http: [//jsfiddle.net/3Ex5g/](http://jsfiddle.net/3Ex5g/)

这是部分

```
 <div class="container2"> 
                    <label for="txtusuario">Number2:</label>
                    <input type="text" size="8" id="txtusuario" name="txtusuario" class="ui-state-default ui-corner-bottom ui-corner-top"/>
                    <br>
                    <br>

                    <label for="txtpass">Date of Aprobation:</label>
                    <input type="text" id="" class="ui-state-default ui-corner-bottom ui-corner-top"/>

                </div> 
```

谢谢！请帮忙

# javascript - jQuery 在浏览器调整大小时从 DOM 添加/删除

> ID：16112190
> 
> 赞同：0
> 
> 时间：2013-04-19T19:31:29.950
> 
> 标签：javascript, jquery, dom, browser, resize

我正在使用我编写的一些 jQuery（我不太擅长 JavaScript/jQuery），它在浏览器调整大小时添加/删除 div（在本例中为 .show500、.hide500）。这是代码：

```
//Completely add/remove divs completely from DOM on browser resize

        $(function(){

            $(window).resize(function(){

                var win = $(this); //this = window

                if (win.width() <= 500) { 

                    $('.show500').add();

                    $('.hide500').remove();

                } else if (win.width() > 500) { 

                    $('.hide500').add();

                    $('.show500').remove();

                }

            });

        }); 
```

所以如果浏览器窗口小于或等于 500，则将 .show500 添加到 DOM 中，并从 DOM 中删除 .hide500。

然后，如果浏览器宽度大于 500，则将 .hide500 添加到 DOM 中，并从 DOM 中删除 .show500。

但是，当我使用此代码时，默认情况下会显示 .hide500 div，然后当我缩小浏览器大小时，会隐藏 .hide500 div 而不会显示 .show500 。然后当我展开浏览器时，两个 div 都消失了。

这是代码的jsFiddle：http: [**//jsfiddle.net/XzrPR/**](http://jsfiddle.net/XzrPR/)

我将不胜感激你们的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:35:15.310

您`else if`可以简化为 just `else`，我认为您的意思是使用`.show()`代替`.add()`和`.hide()`代替`.remove()`：

```
if (win.width() <= 500) { 
    $('.show500').show();
    $('.hide500').hide();
} else {
    $('.hide500').show();
    $('.show500').hide();
} 
```

但是，您也可以使用[纯 CSS 使用媒体查询来](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)做到这一点：

```
.show500 {
    display: none;
}
.hide500 {
    display: block;
}
@media all and (max-width: 500px) {
  .show500 {
     display: block;
  }
  .hide500 {
    display: none;
  }
} 
```

[http://css-tricks.com/css-media-queries/](http://css-tricks.com/css-media-queries/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:35:05.990

*   你想用[`.show()`](http://api.jquery.com/show/)不`.add()`
*   你想使用[`.hide()`](http://api.jquery.com/hide/)而不是`.remove()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:35:59.673

一个非常简单的媒体查询示例，用于隐藏/显示，而不是添加/删除：

```
@media (mix-width:501px) and (max-width:9999px) {
    .show500    { display:none; }
    .hide500    { display:block; }
} 

@media (max-width:500px){
    .show500    { display:block; }
    .hide500    { display:none; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:38:21.863

[.remove()](http://api.jquery.com/remove/)从 DOM 中移除元素，你无法取回它们

试试这个方法

```
 if (win.width() <= 500) { 
    $('.show500').show();
    $('.hide500').hide();
 } else if (win.width() > 500) { 
    $('.hide500').show();
    $('.show500').hide();
 } 
```

[工作小提琴](http://jsfiddle.net/mohammadAdil/XzrPR/5/)

# linux - 如何在 BASH 中捕获 href 链接

> ID：16112191
> 
> 赞同：0
> 
> 时间：2013-04-19T19:31:30.887
> 
> 标签：linux, string, bash, centos5

我有一个正则表达式的输出行，如下所示：

```
<a href="google.com">"test link"</a><br> 
```

如何将不带引号的 google.com 捕获到变量中？鉴于 url 可能包含许多 '/' 例如（以下随机组成的胡言乱语）

```
http://www.google.com/search/something/lulz/here2;i=!mfo1iu489fn1o2jlk21m4098mdoi 
```

编辑：在上述情况下，我想要整个 url 字符串，而不仅仅是 www.google.com。

注意：不希望加载第 3 方库等以执行此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:52:38.030

试试这个纯 bash 正则表达式解决方案

```
shopt -s nocasematch    #Dont care about the character case
text='<a href="hTTtp://www.google.com/search/something/lulz/here2;i=!mfo1iu489fn1o2jlk21m4098mdoi">"test link"</a><br>'
regex='(<a\ +href=\")([^\"]+)(\">)'
[[ $text =~ $regex ]] && echo ${BASH_REMATCH[2]} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:58:56.247

```
shopt -s nocasematch

TEXT='<a href="http://www.google.com/search/something/lulz/here2;i=!mfo1iu489fn1o2jlk21m4098mdoi">"test link"</a><br>'

TEXT=${TEXT##*href=\"}
TEXT=${TEXT%%\"*}
TEXT=${TEXT##*//}
TEXT=${TEXT%%/*}

echo $TEXT 
```

# java - Eclipse 调试，更改 BigDecimal 上的变量值

> ID：16112195
> 
> 赞同：2
> 
> 时间：2013-04-19T19:31:43.493
> 
> 标签：java, eclipse, debugging, bigdecimal

如何`BigDecimal`在 Eclipse 中的变量部分进行调试时提供值？

例如：

```
BigDecimal bd = new BigDecimal(21);
if(bd.equals(new BigDecimal(20))) {
..
} 
```

我已经在语句上设置了断点`if`，现在我想将`bd`值更改为`20`，以便我的`if`块在调试时执行。我已经尝试了很多方法，但我得到了一个错误。

我试过`new BigDecimal(21)`了，但我得到了一个错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-10-14T21:55:53.373

您需要使用类的完整名称：

```
new java.math.BigDecimal() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:17:13.370

*   确保变量“bd”**未标记为 final**
*   转到变量选项卡，右键单击“bd”
*   “改变价值……”
*   输入新的 java.math.BigDecimal(21), "OK"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T05:41:47.053

如果您在调试过程中遇到调试视图的任何限制，那么只需在您已经打开的 Java 编辑器中编写一行代码，例如

```
bd = new BigDecimal(42); 
```

选择新编写的代码，然后从上下文菜单中选择“[执行](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/menus/run/ref-menu-run.htm)”。然后点击`Ctrl``Z`删除该代码并继续调试。任何时候都不要保存编辑器！

这样您就可以在调试会话期间执行任意修复。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T16:43:22.910

在调试时修改 BigDecimal 变量的值时我也遇到了一些问题，但我发现了一个可能对您有帮助的小技巧：在 Java 类中复制您正在调试的一些代码以修改变量，例如`myVar = myVar.add(new BigDecimal(1))`（在这个例如，`myVar`是一个 BigDecimal 变量，我将其添加 1) 并评估该表达式 (Ctrl + Shift + i)，它将分配新值。当然，在继续执行之前，您应该保存原始值并重新分配它，这只是一种解决方法。
希望它有帮助，问候。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-03-30T15:21:25.013

在 Eclipse 的“更改对象值”对话框中输入

```
java.math.BigInteger.valueOf(20) 
```

您不能使用 BigInteger(YOUR_INT) 创建 BigInteger，因为此构造函数不是公共的。转到 Eclipse 中的变量视图并打开“更改对象值”（右键单击要更改的 BigInteger 类型的变量）。 [更改对象值对话框](https://i.stack.imgur.com/JedIp.png)

# iphone - 以编程方式向 iPad Messages 应用程序发送消息

> ID：16112196
> 
> 赞同：-2
> 
> 时间：2013-04-19T19:31:46.850
> 
> 标签：iphone, ios, objective-c, ipad

我正在尝试以编程方式将消息发送到 iPad 消息应用程序，但不知道该怎么做。我知道我可以将 MFMessageComposeViewController 用于 SMS，但我如何使用它（或其他东西？）通过 Messages 发送消息（适用于 iPad 和 iPod）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:36:01.370

如果您在 iPad 上正确设置了 Messages.app，我相信 MFMessageComposeViewController 可以在 iPad 上运行。

使用 MFMessageComposeViewController 的 canSendText 方法来确定设备是否允许发送文本（SMS 或消息）

# php - 在 Ajax 请求中运行两次的代码

> ID：16112197
> 
> 赞同：0
> 
> 时间：2013-04-19T19:31:50.593
> 
> 标签：php, yii

在`if(!$validate)`块`mail`函数中真正运行一次。

我想知道为什么在`if($validate)`块`mail`功能运行两次！！！？？？

该问题仅在`Ajax`请求和第一次`view page`加载时提出。之后该`if($validate)`块运行一次，在其他请求`if($validate)`块上真正运行一次。

```
public function  actionCEmail()
{
    $model = $this->loadModel(Yii::app()->user->id);
    $model->scenario = 'CEmail';

    if(isset($_POST['User'])){
        $model->attributes = $_POST['User'];
        $validate=$model->validate();

        if(Yii::app()->request->isAjaxRequest){
            if(!$validate) {
                $to='test@example.ds';
                $subject='test';
                $message='this is test';
                mail($to,$subject,$message);
                Yii::app()->end();
            }
            if($validate){
                $to='test@example.ds';
                $subject='test';
                $message='this is test';
                mail($to,$subject,$message);
                Yii::app()->end();
            }
        }
    }

    if(Yii::app()->request->isAjaxRequest)
        $this->renderPartial('_cemail',array('model'=>$model),false,true);
    else
        $this->render('update',array('model'=>$model,'form'=>'_cemail'));
} 
```

如果您需要任何信息，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T11:25:06.003

```
if(Yii::app()->request->isAjaxRequest)
{
$error=CActiveForm::validate(array($model,$profile));
if($error!='[]') {
$to='test@example.ds';
                $subject='test';
                $message='this is test';
                mail($to,$subject,$message);
Yii::app()->end();
        }}
if(isset($_POST['User'])){
        $model->attributes = $_POST['User'];
$validate=$model->validate();
if($validate){
                $to='test@example.ds';
                $subject='test';
                $message='this is test';
                mail($to,$subject,$message);
                Yii::app()->end();
            }} 
```

尝试做这样的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T14:51:35.547

**已解决：**`if($validate)`阻塞执行两次的原因是：**一次**是在 Ajax 验证时，**一次是**在单击`ajaxSubmitButton`提交表单时。

有没有办法区分这两者？为了理解点击了什么时间`ajaxSubmitButton`？还是其他东西？

# asp.net - 如何在 vb.net 应用程序中使用 asp.net web api

> ID：16112200
> 
> 赞同：1
> 
> 时间：2013-04-19T19:31:56.923
> 
> 标签：asp.net, vb.net, asp.net-web-api

就像我最初的问题一样。
我想知道在**vb.net 中有一个用于使用 asp.net web api 的内容**。
我是初学者 asp.net 程序员。
我正在观看有关如何制作 web api 的视频。
但似乎找不到任何关于在 vb.net 应用程序中使用 Web 服务的迹象。

我只想发送`serialized objects`到`web service`.
拥有`web service deserialize`对象并根据其内容做出决定并将响应发送回应用程序。

我需要开始测试，`web service`并且我想让我的应用程序与`api`.
这又回到了这个问题。如何从`web api`in发送和接收数据`vb.net`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-27T14:24:46.227

一个帖子的例子：

```
Public Class Form1
    Private Sub submit_Click(sender As System.Object, e As System.EventArgs) Handles submit.Click
        Dim user As String
        Dim pass As String
        user = uname.Text
        pass = passwd.Text

        Dim request As WebRequest = WebRequest.Create("http://domain.com/test.php")
        request.Method = "POST"
        Dim postData As String
        postData = "username=" & user & "&password=" & pass
        Dim byteArray As Byte() = Encoding.UTF8.GetBytes(postData)
        request.ContentType = "application/x-www-form-urlencoded"
        request.ContentLength = byteArray.Length
        Dim dataStream As Stream = request.GetRequestStream() 
```

> ```
> do what you want with the stream 
> ```

```
 reader.Close()
        dataStream.Close()
        response.Close()
    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-09T02:39:27.063

```
Private Function PostApiCall(txtV As String) As String
        Try
            Dim endPoint As String = "https://gorest.co.in/public-api/users"
            'Contruct Json Request
            Dim dictData As New Dictionary(Of String, Object)
            dictData.Add("FetchStart", txtV)
            dictData.Add("FetchSize", "uday")
            dictData.Add("CustomerName", "gundeti")
            dictData.Add("gender", "male")
            'Params
            Dim reqString() As Byte
            Dim resByte As Byte()
            Dim responseFromApi As String

        Dim client As WebClient = New WebClient()

        client.Headers("Content-type") = "application/json"
        'client.Headers("Authorization") = "Basic " & Convert.ToBase64String(Encoding.[Default].GetBytes("username:password"))
        client.Headers("Authorization") = "Bearer elHd6Cv3Ae2P70mPvfPx9gNnjfbHU-kd9FID"
        client.Encoding = Encoding.UTF8
        Dim jsonReq = JsonConvert.SerializeObject(dictData, Formatting.Indented)
        reqString = Encoding.Default.GetBytes(jsonReq)

        resByte = client.UploadData(endPoint, "post", reqString)
        responseFromApi = Encoding.Default.GetString(resByte)
        Return responseFromApi
    Catch ex As Exception
        Throw (ex)
    End Try
End Function 
```

# c++ - KeyValuePairs 列表数组，使用链接管理模板哈希表

> ID：16112201
> 
> 赞同：0
> 
> 时间：2013-04-19T19:31:59.460
> 
> 标签：c++, hashtable

## 所以我目前正在做一个项目，旨在帮助我更多地了解哈希表

但是，我在实现 HashTable 的数据成员时遇到了重大困难，该成员应该是模板链接列表的数组，其类型为 KeyValuePair。

该程序的要求之一是我实现了链式寻址，并且允许用户初始化 Data 数组的长度，所以我几乎被迫使用链表数组。

由于我在插入 Data 成员时遇到问题，我假设我的 Data 成员声明可能有问题（在以下代码段的底部）：

```
template <typename DATA_TYPE>
class HashTable
{
    typedef pair<const int, DATA_TYPE> KeyValuePair;

private:
    int Size;
    int Keys;
    list<KeyValuePair>* Data; 
```

据我了解，这应该允许我指向链接列表数组的元素。

但是，当涉及到初始化我的数组（并插入到我的数组中，稍后我将向您展示）时，我不太清楚出了什么问题。

这是我的构造函数和析构函数：

```
public:
HashTable(const int& size = INITIAL_SIZE)
{
    assert( size > 0 );
    Keys = 0;
    Size = size;
    Data = new list<KeyValuePair>[Size];
    /*for(int i = 0; i<Capacity; i++)
        Data[i] = new list<DATA_TYPE>;*/
}

~HashTable()
{
    delete[] Data;
} 
```

这是我的插入函数，它会导致在 std::list 中出现断点，这（我认为）是因为我试图使用 list.merge() 访问 NULL“.Next”指针。但我不确定：

```
void Insert(const DATA_TYPE& value)
{
    int hashIndex;
    hashIndex = HashCode(value);

    KeyValuePair* newPair = new KeyValuePair(hashIndex, value);
    list<KeyValuePair>* newHash = new  list<KeyValuePair>;

    newHash->push_back(*newPair);
    while(hashIndex>Size)
    {
        hashIndex-=Size;
    }
    //Data[hashIndex]->push_back(value);
    Data[hashIndex].merge(*newHash);
} 
```

过去几天我一直在做这件事，真的需要一些新鲜的眼睛来审视我正在做的事情，并确认或帮助我的想法......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T16:00:38.350

## 弄清楚了！

因此，最困难的问题之一是无法在调试窗口中查看数组指针的数据元素，因为它始终只指向数组的开头或某个点。

但是，无论如何，（除了修复我的原始代码中的内存泄漏之外）**主要问题是**（正如我所想的那样）我试图将一个初始化的链表与一个未初始化的链表合并。

**为了解决这个问题**，在下面的代码片段中，我使用了 std::list.push_back() 函数。它初始化列表并且不会覆盖该哈希索引中可能已经存在的任何值。

为了检查我实际上是在散列值，我创建了一个搜索函数（给定一个数据值）查找索引并输出保存在该索引处的字符串。

```
void Insert(const DATA_TYPE& value)
{
    int hashIndex;
    hashIndex = HashCode(value);

    KeyValuePair newPair = KeyValuePair(hashIndex, value);

    while(hashIndex>Size)
    {
        hashIndex-=Size;
    }

    Data[hashIndex].push_back(newPair);
} 
```

（遗憾的是，我不得不等待才能发布答案）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:37:33.280

为什么要在构造函数中删除数据

```
HashTable(const int& size = INITIAL_SIZE)
{
    Keys = 0;
    Size = size;
    if(size!=INITIAL_SIZE)
    {
        delete[] Data;  <------------
        Data = new list<KeyValuePair>[Size];
    }
} 
```

没有什么可删除的，只是做

```
 HashTable( int size = INITIAL_SIZE)
{
    assert ( size > 0 );
    Keys = 0;
    Size = size;
    Data = new list<KeyValuePair>[Size];
} 
```

还

```
while(hashIndex>Size)
{
    hashIndex-=Size;
}
//Data[hashIndex]->push_back(value);
Data[hashIndex].merge(*newHash); 
```

如果`hashIndex == Size`，您将访问一个超出范围的元素。

# ios - Phonegap 中的远程页面内容

> ID：16112202
> 
> 赞同：0
> 
> 时间：2013-04-19T19:32:00.250
> 
> 标签：ios, cordova

我有一个 phonegap ios 应用程序，该应用程序具有在本地运行的多个功能，但是对于一个页面，我想在页面的一部分中显示远程内容。这将用于诸如有关应用程序的最新消息之类的信息，然后可以远程更新该应用程序并提取数据。理想情况下引入一个页面。

我已经尝试过 iframe，但即使允许所有 url，iframe 也是空白的。还有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:12:56.397

由于 2.3 版本的 Phonegap 包含[InAppBrowser](http://docs.phonegap.com/en/2.6.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)，您可以使用它打开外部 url，也可以使用 childbrowser 插件

# ios - iOS 像 Mint 应用一样绘制简单的条形图

> ID：16112203
> 
> 赞同：0
> 
> 时间：2013-04-19T19:32:00.633
> 
> 标签：ios, objective-c, charts

我想在 Mint 应用程序中创建一个自定义单元格，它的功能几乎相同。如何使用收入和支出数据绘制两个条形图？

谢谢，

![自定义单元格](https://i.stack.imgur.com/SYKz3.png)

我做到了这一点：

```
-(void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    UIColor * earningStartColor = [UIColor colorWithRed:15/255.0f green:227/255.0f blue:0/255.0f alpha:1.0f];
    UIColor * earningEndColor = [UIColor colorWithRed:15/255.0f green:188/255.0f blue:0/255.0f alpha:1.0f];

    CGRect earningRect = CGRectMake(5, 32, 60, 13);

    UIBezierPath *pathE = [UIBezierPath bezierPathWithRoundedRect:earningRect
                                                     cornerRadius:3.0];
    [pathE addClip];

    drawGlossAndGradient(context, earningRect, earningStartColor.CGColor, earningEndColor.CGColor);

    UIColor * spentStartColor = [UIColor colorWithRed:255/255.0f green:88/255.0f blue:67/255.0f alpha:1.0f];
    UIColor * spentEndColor = [UIColor colorWithRed:255/255.0f green:52/255.0f blue:49/255.0f alpha:1.0f];

    CGRect spentRect = CGRectMake(5, 52, 25, 13);    

    UIBezierPath *pathS = [UIBezierPath bezierPathWithRoundedRect:spentRect
                                                    cornerRadius:5.0];
    [pathS addClip];

    drawGlossAndGradient(context, spentRect, spentStartColor.CGColor, spentEndColor.CGColor);
} 
```

但是，在 addClip 之后，绘图停止，因此只显示一个条形图。如果我将 addClip 包裹在 CGContextSaveGState 和 CGContextRestoreGState 周围，则只有第二个条形角是圆角的。

我还尝试子类化视图并在视图上绘制，然后将其作为子视图添加到我的 tableviewcell 并使用cornerRadius，但绘图实际上位于视图后面，因此它显示为圆形视图（带有背景），后面有矩形栏. 我认为这应该比现在更容易。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T10:33:01.327

你的错误是因为`[pathE addClip];`

关于`addClip`方法，苹果文档说：

> 重要提示：如果需要移除裁剪区域进行后续的绘制操作，必须在调用该方法之前保存当前的图形状态（使用CGContextSaveGState函数）。当您不再需要剪切区域时，您可以使用 CGContextRestoreGState 函数恢复之前的绘图属性和剪切区域。

所以你应该保存之前的图形状态`addClip`并恢复之后的图形状态`addClip`

这可以帮助您：

```
-(void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    UIColor * earningStartColor = [UIColor colorWithRed:15/255.0f green:227/255.0f blue:0/255.0f alpha:1.0f];
    UIColor * earningEndColor = [UIColor colorWithRed:15/255.0f green:188/255.0f blue:0/255.0f alpha:1.0f];

    CGRect earningRect = CGRectMake(5, 32, 60, 13);

    UIBezierPath *pathE = [UIBezierPath bezierPathWithRoundedRect:earningRect
                                                     cornerRadius:3.0];
    CGContextSaveGState(context);
    [pathE addClip];

    drawGlossAndGradient(context, earningRect, earningStartColor.CGColor, earningEndColor.CGColor);
    CGContextRestoreGState(context);

    UIColor * spentStartColor = [UIColor colorWithRed:255/255.0f green:88/255.0f blue:67/255.0f alpha:1.0f];
    UIColor * spentEndColor = [UIColor colorWithRed:255/255.0f green:52/255.0f blue:49/255.0f alpha:1.0f];

    CGRect spentRect = CGRectMake(5, 52, 25, 13);

    UIBezierPath *pathS = [UIBezierPath bezierPathWithRoundedRect:spentRect
                                                     cornerRadius:5.0];
    [pathS addClip];

    drawGlossAndGradient(context, spentRect, spentStartColor.CGColor, spentEndColor.CGColor);
} 
```

PS：我认为您可以将您的帖子发布`drawGlossAndGradient`到 stackoverflow ，以便其他人可以轻松提供帮助，并且可能对搜索答案的其他人有所帮助。

我伪造了`drawGlossAndGradient`方法

```
void drawGlossAndGradient(CGContextRef context, CGRect rect, CGColorRef startColor,
                          CGColorRef endColor) {
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
    CGFloat locations[] = {0.0, 1.0};

    NSArray *colors = [NSArray arrayWithObjects:(__bridge id) startColor, (__bridge id) endColor, nil];

    CGGradientRef gradient = CGGradientCreateWithColors(colorSpace,
                                                        (__bridge CFArrayRef) colors, locations);

    CGPoint startPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMinY(rect));
    CGPoint endPoint = CGPointMake(CGRectGetMidX(rect), CGRectGetMaxY(rect));

    CGContextAddRect(context, rect);
    CGContextClip(context);
    CGContextDrawLinearGradient(context, gradient, startPoint, endPoint, 0);

    CGGradientRelease(gradient);
    CGColorSpaceRelease(colorSpace);

} 
```

效果如下：

![在此处输入图像描述](https://i.stack.imgur.com/9vhT4.jpg)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:36:05.493

这不过是`UIView`带有渐变和圆角的。[这](http://www.raywenderlich.com/32283/core-graphics-tutorial-lines-rectangles-and-gradients)对你来说绰绰有余。

圆角：

```
#import <QuartzCore/QuartzCore.h>
...

view.layer.cornerRadius = 5;
view.layer.masksToBounds = YES; 
```

取自[这里](https://stackoverflow.com/questions/1509547/uiview-with-rounded-corners)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-20T00:05:28.073

如果您想节省一些编码，请查看[Core Plot](http://code.google.com/p/core-plot/)，这是一个用于绘制和动画图形的 Mac/iOS 框架。

# authentication - Zend Framework 2 身份验证

> ID：16112208
> 
> 赞同：0
> 
> 时间：2013-04-19T19:32:07.403
> 
> 标签：authentication, zend-framework2

我有一个概念问题。为客户在网站上工作。非常简单的网站。一种迷你 CMS，几乎每个部分都是数据库驱动的。我的想法不是让主站点然后有一个单独的部分进行编辑，我会检查身份验证并让管理员用户直接编辑该部分。

我的问题是，应该在哪里进行身份验证？从控制器检查是否可能/有效？或者我应该在模块上检查它？

我正在使用 zfcUser （如果这有什么不同的话）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T22:04:41.163

你应该有两条路线。一个从数据库中获取页面和所有包含内容的部分。应该创建另一个路由来更新内容。

当你有两条路线时，你可能也有两个动作。甚至可能有两个控制器。使用`Zend\Permission\Acl`或`Zend\Permission\Rbac`您可以“保护”更新内容的一个路由、操作或控制器。

如果您想要更轻松地集成 ZfcUser 和 ACL，请使用[BjyAuthorize](https://github.com/bjyoungblood/BjyAuthorize)。如果您更喜欢使用 RBAC，最好使用[ZfcRbac](https://github.com/ZF-Commons/ZfcRbac)。

# python - 在 Pandas 中将列乘以标量

> ID：16112209
> 
> 赞同：4
> 
> 时间：2013-04-19T19:32:08.407
> 
> 标签：python, pandas

假设我有一个 pandas DataFrame，它有两列名为“A”和“B”。

现在假设我还有一个带有键“A”和“B”的字典，并且字典指向一个标量。也就是说，dict['A'] = 1.2 和'B'类似。

有没有一种简单的方法可以将 DataFrame 的每一列乘以这些标量？

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T22:41:36.753

正如 Wouter 所说，推荐的方法是将 dict 转换为 pandas.Series 并将两个对象组合在一起：

`result = df * pd.Series(myDict)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:35:07.067

你可以这样做：

```
for col in df.columns:
     df[col] *= myDict[col] 
```

# html - 垂直+水平居中 DIV 元素的奇怪行为

> ID：16112210
> 
> 赞同：0
> 
> 时间：2013-04-19T19:32:08.837
> 
> 标签：html, css

我正在尝试垂直和水平对齐网页上的 div。这个问题经常被问到，我用谷歌搜索了我所有的问题，但是无论我尝试从其他人那里复制代码，我都无法让我的工作，div 只是漂浮在网站之外的某个地方。据我了解，父 DIV 需要相对定位，子 DIV 需要绝对定位。从 CSS-Tricks 获得以下子 DIV 的内容（负边距正好是高度和宽度的一半）：

```
width: 850px;
height: 400px;
position: absolute;
left: 50%;
top: 50%;
margin-left: -425px;
margin-top: -200px; 
```

检查我的[测试站点](http://ortrading.com)（[jsfiddle](http://jsfiddle.net/Malachute/7TuVm/)）的例子。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:36:49.623

摆脱：

```
margin-top: -200px;
margin-bottom: -200px; 
```

在内容 div 中。你是这个意思吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:42:38.343

您的容器实际上没有高度

例如看这个

[http://jsfiddle.net/7TuVm/3/](http://jsfiddle.net/7TuVm/3/)

我将高度设置为 2000px 你必须向下滚动才能看到你的盒子

```
height: 2000px; 
```

# php - 将 2 行合并为一个结果 MySQL

> ID：16112216
> 
> 赞同：2
> 
> 时间：2013-04-19T19:32:37.183
> 
> 标签：php, mysql

我检查了其他一些问题，但似乎找不到任何可以回答我的具体问题的问题。

下表是此查询的结果：

```
SELECT teacher.teacherID, unitName FROM teacher INNER JOIN unit ON teacher.teacherID=unit.teacherID ORDER BY teacherID ASC 
```

![桌子](https://i.stack.imgur.com/UoDe1.png)

我实际上需要显示的结果是这样的：

![表 2](https://i.stack.imgur.com/SSJZs.png)

有没有办法修改我当前的查询以便实现这一点？我不确定这在 MySQL 中是否可行，但正如我在过去所学到的，你永远不应该低估查询的力量！（这是在花费时间使用凌乱的嵌套循环尝试操作数组后发现的，而不是我设法在查询中完成所有操作）

编辑：[SQL小提琴](http://sqlfiddle.com/#!2/c3af9/1)

谢谢，我将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:33:58.767

是的，您需要使用[GROUP BY](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)和 GROUP_CONCAT：

```
SELECT teacher.teacherID, GROUP_CONCAT(unitName)
FROM teacher
INNER JOIN unit ON teacher.teacherID=unit.teacherID
GROUP BY teacher.teacherID
ORDER BY teacherID ASC 
```

此查询直接在您的 SQL Fiddle 中工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:55:20.150

对 alexn 的答案稍作调整，以使您的格式与逗号后的空格相匹配：

```
SELECT teacher.teacherID, GROUP_CONCAT(unitName SEPARATOR ', ')
FROM teacher
INNER JOIN unit ON teacher.teacherID=unit.teacherID
GROUP BY teacher.teacherID
ORDER BY teacherID ASC 
```

# c# - html select（下拉）控件在asp.net中选择索引更改事件

> ID：16112218
> 
> 赞同：3
> 
> 时间：2013-04-19T19:32:44.950
> 
> 标签：c#, asp.net, drop-down-menu, webforms

当值发生更改时，我试图将后端代码放入我的 html 选择控件（下拉菜单）中，以触发后端方法，但我找不到该事件。我试过这样：

```
<select id="ddlCompany" name="select2" onchange="ddlCompany_SelectedIndexChanged" runat="server" class="dropdown nostyle sel1" style="width:100%;" placeholder="Select Company" /> 
```

没有什么变化。谁能建议我如何解决这个问题？谢谢，拉齐亚莱

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:38:30.160

将此添加到您的代码后面：

```
protected void ddlCompany_SelectedIndexChanged(object sender, EventArgs e)
{
     //code here
} 
```

这对你的标记：

```
OnSelectedIndexChanged="ddlCompany_SelectedIndexChanged" AutoPostBack="True" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T19:39:24.287

尝试使用 SelectedIndexChanged 属性而不是 onchange，如下所示：

```
<select id="ddlCompany" name="select2" OnSelectedIndexChanged="ddlCompany_SelectedIndexChanged" runat="server" class="dropdown nostyle sel1" style="width:100%;" placeholder="Select Company" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:43:24.487

如果您使用的是下拉列表服务器控件。转到设计器视图，选择下拉列表服务器控件并右键单击并选择**Properties**。现在在属性窗口中，单击***事件***图标，然后您可以看到该`SelectedIndexChanged`事件。双击右侧空白处，Visual Studio 将为您生成相关代码。

![在此处输入图像描述](https://i.stack.imgur.com/57aLo.png)

# jboss7.x - JBoss EAP 6 中的 mod_cluster、虚拟主机和 jboss 根上下文

> ID：16112228
> 
> 赞同：3
> 
> 时间：2013-04-19T19:33:19.030
> 
> 标签：jboss7.x

我们在 Linux 上运行 Apache 2.2、mod_cluster 1.1 和 JBoss EAP 6.0.1 (JBoss 7)。

我试图在 JBoss 中设置虚拟主机，而不在 jboss-web.xml 中设置虚拟主机。目标是让[http://my.example.com/](http://my.example.com/)通过 apache/mod_cluster 路由并为在上下文根 / 上运行的应用程序提供服务。该应用程序在独立模式下运行良好。

阿帕奇配置：

```
LoadModule slotmem_module       modules/mod_slotmem.so
LoadModule proxy_cluster_module modules/mod_proxy_cluster.so
LoadModule advertise_module     modules/mod_advertise.so
LoadModule manager_module       modules/mod_manager.so

Listen 192.168.1.2:6666
<VirtualHost 192.168.1.2:6666>
    ManagerBalancerName mycluster
    ServerAdvertise On
    CreateBalancers 0
    ... other content snipped ...
</VirtualHost>

<VirtualHost *:80>
       ServerAdmin my@email.address
       ProxyPass / balancer://mycluster stickysession=JSESSIONID|jsessionid nofailover=On
       ProxyPassReverse / balancer://mycluster
       ProxyPreserveHost On
       ServerName my.example.com
</VirtualHost> 
```

该应用程序具有 jboss-web.xml 的以下内容：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<jboss-web>
    <context-root>/</context-root>
</jboss-web> 
```

部署应用程序的服务器使用的配置文件是这样配置的：

```
<virtual-server name="default-host" enable-welcome-root="false" default-web-module="my-app-name">
    <alias name="my.example.com"/>
</virtual-server> 
```

我们有一个带有名为 my-app-name.war 的 war 文件的应用程序。（我在提供和不提供 default-web-module 的情况下都试过了，结果相同）

当我在应用程序服务器上启动 jboss 时，它们似乎可以毫无问题地启动应用程序：

```
[Server:MyApp] 12:17:34,786 INFO  [org.jboss.web] (MSC service thread 1-3)
JBAS018210: Registering web context:
[Server:MyApp] 12:17:34,811 INFO  [org.jboss.as.server] (Controller Boot Thread)
JBAS018559: Deployed "my-app-name.war"
[Server:MyApp] 12:17:34,823 INFO  [org.jboss.as] (Controller Boot Thread) JBAS015874:
JBoss EAP 6.0.1.GA (AS 7.1.3.Final-redhat-4) started in 35274ms - Started 502 of 649
services (146 services are passive or on-demand)
[Host Controller] 12:17:34,829 INFO  [org.jboss.as.host.controller] (proxy-threads -
1) JBAS010919: Registering server MyApp 
```

当我尝试访问[http://my.example.com](http://my.example.com)时，出现 apache 错误：

```
proxy: CLUSTER: (balancer://mycluster). All workers are in error state 
```

当我在网络服务器上检查 /mod_cluster-manager 时，我没有看到 / 定义的上下文根。但是，我确实看到了由同一集群中的另一个应用程序定义的上下文根，该应用程序使用不同的配置文件：

```
context: 1 [/OtherApp] vhost: 1 node: 3 status: 1
context: 2 [/OtherApp] vhost: 1 node: 2 status: 1 
```

另一个应用程序在[http://mydefaulthost.com/OtherApp](http://mydefaulthost.com/OtherApp)上运行良好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-07T17:01:09.697

你的没有配置

从上面的列表中删除根上下文

```
<subsystem xmlns="urn:jboss:domain:modcluster:1.1">
    <mod-cluster-config advertise-socket="modcluster" excluded-contexts="ROOT,invoker,jbossws,juddi,console" proxy-list="192.168.0.62:6666" connector="ajp">
        <dynamic-load-provider>
            <load-metric type="busyness"/>
        </dynamic-load-provider>
    </mod-cluster-config>
</subsystem> 
```

# php - 使用二维关联 php 数组中的值进行链接选择

> ID：16112229
> 
> 赞同：0
> 
> 时间：2013-04-19T19:33:27.523
> 
> 标签：php, html, chained

我有一个形式的二维数组：

```
Array ( [0] => Array ( [A] => aaa [B] => bbb [C] => ccc [D] => ddd ) [1] => Array ( [A] => aaaa=1 [B] => bbb1 [C] => ccc1 [D] => ddd1 ) ... ) 
```

我有一个像这样的表格：

```
A: choose A
B: choose B
C: choose C 
```

其中选择菜单的 A、B 和 C 的内容是根据先前选择的选择菜单选项填充的。

就像 A 的值是*android、ios、windows*一样，B 的值是*htc、lumia、iphone、samsung*，而 C 的值是*htc one、htc first、lumia 920、iphone4、iphone5、galaxy 4*。

有谁知道我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-18T14:14:04.297

这也是我的问题。大多数在线教程都提出了一种链式选择方法，该方法使用直接从数据库中获取的数据，而不是数组中已有的数据。

你可以从这个在线教程开始，我发现它非常有用，至少对我来说： http: [//tutorialzine.com/2011/11/chained-ajax-selects-jquery/](http://tutorialzine.com/2011/11/chained-ajax-selects-jquery/)

在“ajax.php / 2”部分中，您可以根据数组中的数据创建选择框。

我没有发现它完全准备好复制粘贴，它需要进行一些调整以符合我的要求，但最终，它奏效了。

# php - 测试一个 PDO 查询，如果失败，做其他事情

> ID：16112235
> 
> 赞同：1
> 
> 时间：2013-04-19T19:34:01.173
> 
> 标签：php, mysql, pdo, try-catch

问候溢出的同胞，

我正在使用 PHP PDO 语句和 MySQL。我有一个安全的管理表单，允许管理员输入 MySQL 查询的后半部分，然后将其保存到数据库中。例如查询的第一部分是：

```
SELECT COUNT(1) AS count, SUM(`url_count`) AS total 
FROM `table_name` WHERE `tablekey_id` = 1 
```

并且用户可以将以下内容保存到`sql_count`列中的数据库中：

```
AND `row_is_live` = 1 AND `title` > ''; 
```

因此，在我的程序中，我想执行查询，但是作为用户输入，查询可能会失败。所以我想测试一下查询是否会失败，如果会失败，那么我想做其他事情以免停止我的程序。

这是我正在使用的代码。我目前正在尝试一个 try catch 块，但它会停止代码的执行。

```
$table = new PatternsGenerator($baseDomain, true);
$sectionRowsQuery = $db->getTopLevelPatternRows($sectionId);
$returnArray = array();
$index = 1;

while ($row = $sectionRowsQuery->fetch()) {
    if(isset($row['sql_count']) && strlen($row['sql_count']) > 0) {
        try {
            $counts = $db->getCountsWithStoredQuery($row['sql_count']);
            throw new Exception("This is an exception");
        } catch (Exception $e) {
            $counts = array('total' => 1, 'count' => 0);
        }
    } else {
        $counts = array('total' => 0, 'count' => 0);
    }

    $table->getTopLevelRow_1($returnArray, $row['title'], $counts, $row['id'], $index);
    $index++;
}

... more code .... 
```

我的问题是，如何在不停止执行其余代码的情况下测试 MySQL 查询以查看它是否会失败？请和谢谢大家。

* * *

编辑：

好的，我发现了问题。函数 getCountsWithStoredQuery($storedQuery) 试图 fetchAll()。因此，如果查询失败，则在其上执行 fetchAll() 并且程序失败。我只需将 fetchAll() 移动到 try 块，以便在查询成功完成后执行。

感谢所有认真对待这个问题的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:48:14.143

事实上，多标准搜索以及因此有条件地创建的查询在 Web 开发中是一项非常微不足道的任务。

所以，你最好遵循这种通用的方式，而不是走危险的弯路，让用户自由地做任何 SQL 注入。

创建一系列条件，根据用户的选择添加查询部分并不是什么大问题。

但首先你需要明白

*   **没有查询一定会失败**
*   **不允许用户在查询中注入 SQL**

# html - 试图在页眉和页脚之间放置 html 内容（googlemap） - CSS - HTML

> ID：16112238
> 
> 赞同：6
> 
> 时间：2013-04-19T19:34:16.970
> 
> 标签：html, css, google-maps

我试图在页眉和页脚之间放置一个 googlemap 地图作为主要内容，但地图获得 100% 并将页脚向下推，我想在它们之间放置地图，这样如果我调整窗口大小，所有内容都会自动调整没有出现左栏来滚动内容，但是我错过了一些东西，请有人帮我一把吗？

```
<html>
    <head>
    <style type="text/css">
html, body, #map-canvas {
    margin: 0;
    padding: 0;
    height: 100%;
}

#wrapper {
    height: auto !important;
    min-height: 100%;
    height: 100%;
    position: relative; /* Required to absolutely position the footer */
}

#footer {
    height: 20px; /* Define height of the footer */
    position: absolute;
    bottom: 0; /* Sit it on the bottom */
    left: 0;
    width: 100%; /* As wide as it's allowed */
}

#content {
    padding-bottom: 20px; /* This should match the height of the footer */
}
    </style>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
        var map;
        function initialize() {
          var mapOptions = {
            zoom: 8,
            center: new google.maps.LatLng(-34.397, 150.644),
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          map = new google.maps.Map(document.getElementById('map-canvas'),
              mapOptions);
        }

        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
    </head>
<body>
    <div id="wrapper">
        <div id="header">Header added just for demonstration purposes</div>
        <div id="content"><div id="map-canvas"></div></div>
        <div id="footer">And this is my footer</div>
    </div>
</body>
</html> 
```

提前问候和感谢。

编辑：这里的 jsfiddle 链接，有一些变化，但同样的问题，如果你试图得到：一个视图中的页眉，地图和页脚实际上你不能，出现滚动条，因为地图正在推动在页脚下方：http: [//jsfiddle.net/PYaDq/197/](http://jsfiddle.net/PYaDq/197/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-20T02:05:13.387

我一直在与这样的问题作斗争，我认为关键是绝对定位，我认为这就是你想要得到的：

```
<html>
    <head>
    <style type="text/css">
        html, body, #map-canvas {
            height: 100%;
            }
        body {
            margin: 0px;
            padding: 0px;
            border: 0;
            outline: 0;
            }
        #header {
            top: 0;
            right: 0;
            left: 0;
            position: absolute;
            }
        #wrapper {
            left: 0px;
            top: 40px;
            bottom: 18px;
            right: 0;
            position: absolute;
        }

        #footer {
            bottom: 0;
            right: 0;
            left: 0;
            position: absolute;
            width:100%;
        }

        #content {
            top: 1px;
            bottom: 0px;
            /*padding-left: 10px;*/
            overflow: auto;
            position: absolute;
            left: 0;
            right: 0;
        }

    </style>
        <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
        var map;
        function initialize() {
          var mapOptions = {
            zoom: 8,
            center: new google.maps.LatLng(-34.397, 150.644),
            mapTypeId: google.maps.MapTypeId.ROADMAP
          };
          map = new google.maps.Map(document.getElementById('map-canvas'),
              mapOptions);
        }

        google.maps.event.addDomListener(window, 'load', initialize);

    </script>
    </head>
<body>
   <div id="header">Header added just for demonstration purposes</div>
    <div id="wrapper">
        <div id="content">
            <div id="map-canvas"></div>
        </div>
    </div>
        <div id="footer">And this is my footer</div>

</body>
</html> 
```

你可以在这里测试它：http: [//jsfiddle.net/cespinoza/s6Q4V/](http://jsfiddle.net/cespinoza/s6Q4V/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:49:19.323

我强烈建议将 css3 媒体查询作为一种选择。一般搜索会发现很多好的资源。

媒体查询旨在更改设备（和浏览器）宽度，并具有与其他样式标签类似的格式。你可能有类似的东西：

```
@media screen and (min-width: 400px) and (max-width: 700px)
{
    #content
    {
    }
} 
```

这将在您指定的范围内覆盖样式设置。

希望这可以帮助。

# image - 使用 apache 服务器处理图像

> ID：16112239
> 
> 赞同：0
> 
> 时间：2013-04-19T19:34:27.907
> 
> 标签：image, apache, image-processing, imdb

可能是这个问题的标题是错误的，但在本节中我可以正确解释我的问题。

下面提到的链接是由 IMDB 网站托管的电影 (ZD30) 的图像。

[imdb.com/images/M/MV5BMTcyODUwODY5NV5BMl5BanBnXkFtZTcwMDY4NTE4OA@@。*V1.jpg* _](http://ia.media-imdb.com/images/M/MV5BMTcyODUwODY5NV5BMl5BanBnXkFtZTcwMDY4NTE4OA@@._V1_.jpg)

但是当你改变链接到这个

[http://ia.media-imdb.com/images/M/MV5BMTcyODUwODY5NV5BMl5BanBnXkFtZTcwMDY4NTE4OA@@._V1._SX200_CR0,0,0,0_.jpg](http://ia.media-imdb.com/images/M/MV5BMTcyODUwODY5NV5BMl5BanBnXkFtZTcwMDY4NTE4OA@@._V1._SX200_CR0,0,0,0_.jpg)

结果我得到相同的图像，但宽度不同，尺寸更小。这种技术给我留下了深刻的印象，也想在我的网站上实施。

任何帮助将不胜感激。

非常感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T10:45:26.557

您可以维护自己的图像服务器，并检查请求，例如。

?URL=ABC_20x20.jpg

在您的最后处理图像并通过更改一个响应客户端。

# iphone - 检测 UICollectionView 的滚动方向，从 REST 加载数据

> ID：16112241
> 
> 赞同：4
> 
> 时间：2013-04-19T19:34:31.757
> 
> 标签：iphone, ios, ipad, uicollectionview, uiscrollviewdelegate

假设标准配置（向上/向下），我想检测用户何时`UIColletionView`向上或向下滚动（这是的子类`UIScrollView`并符合`UIScrollViewDelegate`）。我没有直接从代表那里看到任何信息来检测这一点，尽管我可能看多了一些东西。

如果我知道用户滚动的方向，那么我可以使用这些`UICollectionViewDatasource`方法来确定是否应该从 REST 服务器加载更多数据，或者清除我已经必须管理固定内存空间的信息。

// 如果向下滚动，则显示部分

```
- (UICollectionReusableView *)collectionView:(UICollectionView *)cv viewForSupplementaryElementOfKind:(NSString *)kind atIndexPath:(NSIndexPath *)indexPath { 
```

// 如果向下滚动，部分中的最后一个单元格将消失

```
- (void)collectionView:(UICollectionView *)collectionView didEndDisplayingCell:(UICollectionViewCell *)cell forItemAtIndexPath:(NSIndexPath *)indexPath{ 
```

// 如果向上滚动，则显示部分中的最后一个单元格

```
- (UICollectionViewCell *)collectionView:(UICollectionView *)cv cellForItemAtIndexPath:(NSIndexPath *)indexPath { 
```

// 如果向上滚动，部分正在消失

```
- (void)collectionView:(UICollectionView *)collectionView didEndDisplayingSupplementaryView:(UICollectionReusableView *)view forElementOfKind:(NSString *)elementKind atIndexPath:(NSIndexPath *)indexPath{ 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T19:55:35.020

您可以检查 UIScrollView 的（ UICollectionView 继承自） panGestureRecognizer 属性并执行以下操作：

```
CGPoint scrollVelocity = [collectionView.panGestureRecognizer velocityInView:collectionView.superview];
if (scrollVelocity.y > 0.0f) {
    NSLog(@"going down");
} else if (scrollVelocity.y < 0.0f) {
    NSLog(@"going up");
} 
```

**斯威夫特 3.1**：

```
let scrollVelocity = collectionView.panGestureRecognizer.velocityInView(collectionView.superview)
if (scrollVelocity.y > 0.0) {
    print("going down")
} else if (scrollVelocity.y < 0.0) {
    print("going up")
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T17:07:24.440

你也可以使用这个：

```
CGPoint translation = [collectionView.panGestureRecognizer translationInView:collectionView.superview];
        if (translation.y > 0) {
            NSLog(@"DOWN");
        } else {

            NSLog(@"UP");
        } 
```

更准确的

# ruby - ruby 'daemonized' 脚本出现意外问题

> ID：16112242
> 
> 赞同：1
> 
> 时间：2013-04-19T19:34:32.327
> 
> 标签：ruby, daemons

我这里有一个突然改变行为的脚本，我不知道为什么。据我所知，没有对脚本进行任何更改，也没有对红宝石或宝石进行任何更改。

首先，这是脚本：

```
require 'rubygems'
require 'daemons'
require 'beanstalk-client' 
require 'sequel'
require 'fileutils'
require 'chronic'

APP_DIR = File.dirname(File.expand_path(__FILE__))
ROOT_DIR = File.expand_path(File.join(APP_DIR,'..', '..'))
$LOAD_PATH.unshift(APP_DIR)
$LOAD_PATH.unshift(ROOT_DIR)
$LOAD_PATH.unshift(File.join(ROOT_DIR, 'lib'))
$LOAD_PATH.unshift(File.join(ROOT_DIR, 'db'))
$LOAD_PATH.unshift(File.join(ROOT_DIR, 'scripts'))
$LOAD_PATH.unshift(File.join(ROOT_DIR, 'models'))
$LOAD_PATH.unshift(File.join(ROOT_DIR, 'systems', 'shared', 'models'))

puts "Starting Daemon..."
Daemons.run_proc(File.join('var', 'background_jobs'), :log_output => true) do

  require 'environment'

  puts "renaming log file..."
  FileUtils.mkdir_p('var')
  begin 
    FileUtils.mv(File.join('var', 'background_jobs.output'), File.join('var', "#{Time.now.to_s.gsub(":","").gsub(" ", '_')}.log"))
  rescue
    # NOP
  end

  SequelOutput.prepare_database(MyDatabase::DB)
  beanstalk = Beanstalk::Pool.new(["0.0.0.0:11300"])
  loop do
    beanstalk_job = beanstalk.reserve 
    begin
      jh = beanstalk_job.ybody
      puts "processing #{jh[:job_id]}"
      job = MyDatabase::DB[:project__jobs].filter(:id => jh[:job_id]).first

      script_name = MyDatabase::DB[:project__available_tasks].filter(:id => job[:script_id]).get(:name)
      task = eval(camelize script_name).new(job)
      puts "processing script: #{script_name} aka (#{camelize script_name}) with #{task.steps} steps"

      task.process
      puts "finished #{jh[:job_id]}"
    rescue
      # NOP 
    end
    beanstalk_job.delete
  end
end 
```

该脚本名为“run.rb”，路径为 /var/www/main/projects/systems/background。该脚本由位于“主”文件夹中的两个不同的 bash 脚本调用。第一个称为“background_restart.sh”，调用 ruby​​ 解释器和完全限定名称，如下所示：

```
cd /var/www/main
/usr/local/rvm/rubies/ruby-1.8.7-p249/bin/ruby /var/www/main/projects/systems/background/run.rb stop
/usr/local/rvm/rubies/ruby-1.8.7-p249/bin/ruby /var/www/main/projects/systems/background/run.rb start 
```

现在失败了，仅向终端输出“终止”。另一个名为“deploy.sh”的脚本部署 Web 应用程序，但失败并显示相同的输出（它的第一个和最后一个命令分别是停止和启动）。

我无法解释为什么这突然开始失败。

其他一些需要注意的事项：

1.  如果我在后台目录中，则可以在终端中调用脚本的完全限定路径。
2.  将 bash 脚本中的目录更改为“背景”首先似乎解决了这个问题，尽管这对我来说有点不满意。
3.  当我部署时，会出现进一步的问题：

部署脚本基本上将当前生产代码移动到另一个目录，并将更新的代码放在它的位置。当它重新启动时，我希望'run.rb'脚本在'background'中重新创建'var'文件夹（根据第24行），但是守护程序gem错误如下：

```
Starting Daemon...
/usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons/pidfile.rb:94:in `initialize': No such file or directory - /var/www/main/projects/systems/background/var/background_jobs.pid (Errno::ENOENT)
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons/pidfile.rb:94:in `open'
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons/pidfile.rb:94:in `pid='
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons/application.rb:254:in `start_proc'
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons/application.rb:294:in `start'
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons/controller.rb:70:in `run'
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons.rb:193
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons/cmdline.rb:112:in `call'
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons/cmdline.rb:112:in `catch_exceptions'
    from /usr/local/rvm/gems/ruby-1.8.7-p249/gems/daemons-1.1.0/lib/daemons.rb:192:in `run_proc'
    from run.rb:19 
```

现在我可以通过在终端中创建'var'文件夹并再次运行它来解决这个问题，所以如果你想知道我为什么要打扰你们，我相信你们中的一些人会明白这是一个问题我不想简单地破解。我想弄清楚这里发生了什么，并尝试回到我以前的状态！

# php - 替换字段的 PHP 更改值

> ID：16112246
> 
> 赞同：0
> 
> 时间：2013-04-19T19:34:46.417
> 
> 标签：php, mysql

我有一个包含许多字段（id、电子邮件、用户名等）的 MySQL 表，并且我想再添加大约 26 个字段，为简单起见，将它们称为“a”到“z”。它们都将具有默认值=0，但其中 4 个最初具有值 1 到 4（例如，a=1、b=2、c=3、d=4、e=0、f=0、g= 0, h=0...)。我想要做的是通过表单提交将“m”的值更新为 =1，但现在 a 的值是 =0。每次将数字 1-4 分配给特定字段时，需要将保存该值的字段切换为 0，以便始终只分配 1 到 4 的单个实例。

我是否提供了足够的信息？很遗憾，输入此内容后，我几乎比以前更困惑！我开始做这件事，打算把头发拔掉，但我已经秃了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:39:35.243

你为什么要这样做？

听起来更简单的解决方案是拥有 4 个字段（f1、f2、f3、f4），每个字段的值都可以是 AZ（或空白/空格/空）。

这将使所有未来的操作变得更加简单。

# json - Jquery json给出错误400

> ID：16112249
> 
> 赞同：0
> 
> 时间：2013-04-19T19:35:05.037
> 
> 标签：json

我正在尝试从我的公正页面获取 json 提要。

[这是](http://jsfiddle.net/makingthings/j6EhL/)我在控制台中收到错误 400 的代码。但是，如果我粘贴

```
https://api.justgiving.com/apikey/v1/fundraising/pages/James-Grubb 
```

在浏览器中，我成功获取了提要。有任何想法吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T06:11:53.117

你可以编辑你的小提琴。它按预期提取 ID。

```
$(document).ready(function() {
    $.getJSON('https://api.justgiving.com/bd5985e8/v1/fundraising/pages/James-Grubb?lang=en-us&format=json&callback=?', function(res){
    alert('Acitvity ID ' + res.activityId);
    $("#result").text(res.activityId);
});
}); 
```

大多数生成的 API 密钥并不打算共享，因此请调查是否应该使其无效。

# firefox - http-on-examine-response 上的 Firefox 扩展列表，仅针对带有 200 状态代码的响应

> ID：16112252
> 
> 赞同：0
> 
> 时间：2013-04-19T19:35:09.520
> 
> 标签：firefox, firefox-addon

我在 http-on-examine-response 上定义了一个观察者

```
httpRequestObserver = {

observe: function(request, aTopic, aData){

        if (aTopic == "http-on-examine-response") {
             request.QueryInterface(Ci.nsIHttpChannel);

             var newListener = new TracingListener();
             request.QueryInterface(Ci.nsITraceableChannel);

             newListener.originalListener = request.setNewListener(newListener);

    }
}, 
QueryInterface: function(aIID){
    if (typeof Cc == "undefined") {
        var Cc = components.classes;
    }
    if (typeof Ci == "undefined") {
        var Ci = components.interfaces;
    }
    if (aIID.equals(Ci.nsIObserver) ||
    aIID.equals(Ci.nsISupports)) {
        return this;
    }

    throw components.results.NS_NOINTERFACE;

},
}; 
```

我只想在响应的响应代码为 200 的情况下添加侦听器。基本上我想要完成的是避免 3xx 响应。但我无法从标题中读取 ResponseCode。如何在此处获取响应代码.

在此先感谢您的帮助...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T01:04:43.470

你可以使用`httpChannel.responseStatus`，这里是[文档](https://developer.mozilla.org/en-US/docs/XPCOM_Interface_Reference/nsIHttpChannel)。

因此，将您的`observe`功能更改为

```
observe: function(request, aTopic, aData){
        if (aTopic !== 'http-on-examine-response') {
            return;
        }
        let httpChannel = request.QueryInterface(Ci.nsIHttpChannel);
        if (httpChannel.responseStatus !== 200) {
            return;
        }

        // do your stuff...
        let traceableChannel = event.subject.QueryInterface(Ci.nsITraceableChannel);
        let newListener = new TracingListener();
        newListener.originalListener = traceableChannel.setNewListener(newListener);

    }
}, 
```

# javascript - 第二次点击的不同功能

> ID：16112258
> 
> 赞同：0
> 
> 时间：2013-04-19T19:35:32.167
> 
> 标签：javascript, jquery, function, click, toggle

我设法设置了一个脚本来更改表格中的字符并更改某些字符的颜色。我想要做的是在第二次点击时有不同的字符和颜色，但我不知道我会怎么做。

```
var isStart = false;
var letterString = "D0E916C0A8CED059359C02DARREN KORB - PALE WATCHERS.mp3E415AAB0014400E104B40DE96A0";
var letters = letterString.split('');
var currentLetter = 0;
var intervalID;

function changeLetter() {
    $("#t-"+currentLetter).text(letters[currentLetter - 1]);
    currentLetter +=1 ;
    if (currentLetter == 23) {
        $("#t-23").css("color", "#d49a9a");   
    }
    if (currentLetter == 24) {
        $("#t-24").css("color", "#d49a9a");             
    }
    if (currentLetter == 25) {
        $("#t-25").css("color", "#d49a9a");             
    }
        if (currentLetter == 26) {
           $("#t-26").css("color", "#d49a9a");             
    }
}

$(document).ready(function() {
    var image = $('#content').click(function() {
        if  (!isStart) {
            isStart = true;
           intervalID =  setInterval(changeLetter, 100);
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:44:26.570

添加一个变量来计算点击次数，然后在您的点击函数中，递增并检查该值以确定您要执行的操作。像这样：

```
var currentLetter = 0;
var intervalID;
var clickCount = 0; // <-- add this line

if  (!isStart) {
    clickCount++;
    if (clickCount == 1) {
        //do the first click stuff
    }
    if (clickCount == 2) {
        //do the second click stuff
    }
} 
```

如果您想处理两次以上的点击，您可能需要使用 switch 语句，默认情况下将针对您未专门处理的所有计数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:49:05.807

使用 jQuery 的`.one()`方法。它允许您捕获一次事件，然后您可以通过后续点击执行其他操作。

```
var image = $('#content').one('click' function() {
    // doSomething

    $(this).on('click', function() {
        if  (!isStart) {
            isStart = true;
           intervalID =  setInterval(changeLetter, 100);
        }
    });
}); 
```

# apache - Apache 和 504 错误

> ID：16112269
> 
> 赞同：1
> 
> 时间：2013-04-19T19:35:56.697
> 
> 标签：apache, tomcat, mod-jk

我正在使用`Apache`和。`Tomcat``mod_jk`

当客户端请求大小为 15-20 KB 的文件时，我的 Apache 服务器一直无法预料`504 errors`地响应（服务器响应太慢或代理太不耐烦）。

Apache 应该提供这些静态 XML 文件，所以我认为这是 Apache 的问题。

在试图找出 504 错误的来源时，我应该在我的 Apache 日志中寻找什么？

# python - 如何monkeypatch内置函数datetime.datetime.now？

> ID：16112273
> 
> 赞同：11
> 
> 时间：2013-04-19T19:36:03.600
> 
> 标签：python, unit-testing, datetime, monkeypatching, pytest

我想确保`datetime.datetime.now()`返回特定的日期时间以进行测试，我该怎么做？我试过 pytest 的猴子补丁

```
monkeypatch.setattr(datetime.datetime,"now", nowfunc) 
```

但这给了我错误`TypeError: can't set attributes of built-in/extension type 'datetime.datetime'`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T19:39:22.850

正如错误告诉您的那样，您无法对用 C 实现的许多扩展类型的属性进行猴子补丁。（其他 Python 实现可能具有与 CPython 不同的规则，但它们通常具有类似的限制。）

解决这个问题的方法是创建一个子类，然后对这个*类*进行猴子补丁。

例如（未经测试，因为我手头没有`pytest`......但它适用于手动猴子补丁）：

```
class patched_datetime(datetime.datetime): pass
monkeypatch.setattr(patched_datetime, "now", nowfunc)
datetime.datetime = patched_datetime 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:39:11.727

正如错误所示，您不能。如果需要这样做，则需要更改被测代码，使其具有调用 的实用函数`datetime.datetime.now()`，并将所有引用更改为指向该函数。然后，您可以对该函数进行monkeypatch 以返回您选择的时间。

# html - Z-index 堆叠顺序

> ID：16112276
> 
> 赞同：0
> 
> 时间：2013-04-19T19:36:11.403
> 
> 标签：html, css, z-index

考虑以下 jsfiddle：http: [//jsfiddle.net/dHaM8](http://jsfiddle.net/dHaM8)

HTML：

```
<div class="first"><img src="http://placekitten.com/g/200/300"/></div>
<div class="second"></div>
<div class="third"><p class="test"> test test test </p></div> 
```

CSS：

```
.first img {position:fixed; top: 10; left: 10; z-index: 1}
.test {position:fixed; top: 10; left: 10; z-index: 10}
.first {
    background-color: #a6a6a6;
    height: 600px;
    background-attachment: fixed;
    background-image: url("http://placehold.it/1000x500");
}

.second {
    background-color: #fff;
    min-height: 500px;
    z-index:2;
    position:relative;
}

 .third {
    background-color: #ff0000;
    min-height: 500px;
    background-attachment: fixed;
    position:relative;
    z-index:3;
 } 
```

我想做的是：

小猫应该固定在 div “first” 中，如果您查看 CSS，这已经实现了。

但是，第三个 div 中的文本没有显示！

如果我将 div 设置为高于小猫的 div，则文本将显示在我不希望发生的第一个 div 中。我只希望它显示在第三个 div 中。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:49:42.467

给出位置：相对于`<p>`标签。见[小提琴](http://jsfiddle.net/anpsmn/zvfxn/2/)

```
.test {position:relative; top: 10px; left: 10px; z-index: 10} 
```

# android - 在 post 请求中将 JSON 传输到服务器

> ID：16112277
> 
> 赞同：3
> 
> 时间：2013-04-19T19:36:14.333
> 
> 标签：android, json, post, http-post

服务器接受两个参数：`String`和`JSON`。提示，正确我`JSON`在 POST 请求中传输和字符串？

```
try {
    HttpClient httpClient = new DefaultHttpClient();
    HttpPost httpPost = new HttpPost("my_url");
    List parameters = new ArrayList(2);
    JSONObject jsonObject = new JSONObject();
    jsonObject.put("par_1", "1");
    jsonObject.put("par_2", "2");
    jsonObject.put("par_3", "3");
    parameters.add(new BasicNameValuePair("action", "par_action"));
    parameters.add(new BasicNameValuePair("data", jsonObject.toString()));
    httpPost.setEntity(new UrlEncodedFormEntity(parameters));
    HttpResponse httpResponse = httpClient.execute(httpPost);
    Log.v("Server Application", EntityUtils.toString(httpResponse.getEntity())+" "+jsonObject.toString());

} catch (UnsupportedEncodingException e) {
    Log.e("Server Application", "Error: " + e);
} catch (ClientProtocolException e) {
    Log.e("Server Application", "Error: " + e);
} catch (IOException e) {
    Log.e("Server Application", "Error: " + e);
} catch (JSONException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T20:09:34.050

我不确定您的问题是什么，但这是我发送 JSON 的方式（使用您的数据示例）。

Android/JSON 构建：

```
JSONObject jo = new JSONObject();
jo.put("action", "par_action");
jo.put("par_1", "1");
jo.put("par_2", "2");
jo.put("par_3", "3"); 
```

Android / 发送 JSON：

```
URL url = new URL("http://domaintoreceive.com/pagetoreceive.php");

HttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url.toURI());

// Prepare JSON to send by setting the entity
httpPost.setEntity(new StringEntity(jo.toString(), "UTF-8"));

// Set up the header types needed to properly transfer JSON
httpPost.setHeader("Content-Type", "application/json");
httpPost.setHeader("Accept-Encoding", "application/json");
httpPost.setHeader("Accept-Language", "en-US");

// Execute POST
response = httpClient.execute(httpPost); 
```

* * *

PHP/服务器端：

```
<?php
if (file_get_contents('php://input')) {
    // Get the JSON Array
    $json = file_get_contents('php://input');
    // Lets parse through the JSON Array and get our individual values
    // in the form of an array
    $parsedJSON = json_decode($json, true);

    // Check to verify keys are set then define local variable, 
    // or handle however you would normally in PHP.
    // If it isn't set we can either define a default value
    // ('' in this case) or do something else
    $action = (isset($parsedJSON['action'])) ? $parsedJSON['action'] : '';
    $par_1 = (isset($parsedJSON['par_1'])) ? $parsedJSON['par_1'] : '';
    $par_2 = (isset($parsedJSON['par_2'])) ? $parsedJSON['par_2'] : '';
    $par_3 = (isset($parsedJSON['par_3'])) ? $parsedJSON['par_3'] : '';

    // Or we could just use the array we have as is
    $sql = "UPDATE `table` SET 
                `par_1` = '" . $parsedJSON['par_1'] . "',
                `par_2` = '" . $parsedJSON['par_2'] . "',
                `par_3` = '" . $parsedJSON['par_3'] . "'
            WHERE `action` = '" . $parsedJSON['action'] . "'";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:26:21.253

I really see much better having a RestClient class in order to have more code scalability,but basically I think your code is good, for basic solutions.Here I post a proper RestClient class, wich implements a POST or a GET:

```
public class RestClient {

private ArrayList<NameValuePair> params;
private ArrayList<NameValuePair> headers;
private String url;
private String response;
private int responseCode;

public String GetResponse()
{
    return response;
}

public int GetResponseCode()
{
    return responseCode;
}

public RestClient(String url)
{
    this.url = url;
    params = new ArrayList<NameValuePair>();
    headers = new ArrayList<NameValuePair>();
}

public void AddParam(String name, String value)
{
    params.add(new BasicNameValuePair(name, value));
}

public void AddHeader(String name, String value)
{
    headers.add(new BasicNameValuePair(name, value));
}

public void Execute(RequestType requestType) throws Exception
{
    switch(requestType)
    {
        case GET:
        {
            String combinedParams = "";
            if (!params.isEmpty())
            {
                combinedParams += "?";
                for (NameValuePair p : params)
                {
                    String paramString = p.getName() + "=" + URLEncoder.encode(p.getValue(),"UTF-8");

                    if  (combinedParams.length() > 1)
                        combinedParams += "&" + paramString;
                    else
                        combinedParams += paramString;
                }
            }
            HttpGet request = new HttpGet(url + combinedParams);

            for (NameValuePair h: headers)
                request.addHeader(h.getName(),h.getValue());

            ExecuteRequest(request, url);
            break;
        }
        case POST:
        {
            HttpPost request = new HttpPost(url);

            for (NameValuePair h : headers)
            {
                request.addHeader(h.getName(), h.getValue());
            }

            if(!params.isEmpty()){
                request.setEntity(new UrlEncodedFormEntity(params, HTTP.UTF_8));
            }

            ExecuteRequest(request, url);
            break;
        }
    }
}

public void ExecuteRequest(HttpUriRequest request, String url) 
{
    HttpClient client = new DefaultHttpClient();
    HttpResponse httpResponse;
    try
    {
        httpResponse = client.execute(request);
        responseCode = httpResponse.getStatusLine().getStatusCode();

        HttpEntity entity = httpResponse.getEntity();

        if (entity != null)
        {
            InputStream in = entity.getContent();
            response = ConvertStreamToString(in);
            in.close();
        }
    }
    catch (ClientProtocolException e)  {
        client.getConnectionManager().shutdown();
        e.printStackTrace();
        } catch (IOException e) {
        Log.e("REST_CLIENT", "Execute Request: " + e.getMessage()); 
        client.getConnectionManager().shutdown();

        e.printStackTrace();
    }       
}

private String ConvertStreamToString(InputStream in)
{
    BufferedReader reader = new BufferedReader(new InputStreamReader(in));
    StringBuilder sb = new StringBuilder();

    String line = null;
    try 
    {
        while ((line = reader.readLine()) != null) {
        sb.append(line + "\n");
    }
    }
    catch (IOException e) 
    {
        e.printStackTrace();
    } 
    finally 
    {
        try 
        {
            in.close();
        } 
        catch (IOException e) 
        {
             Log.e("REST_CLIENT", "ConvertStreamToString: " + e.getMessage());  
            e.printStackTrace();
        }
    }
    return sb.toString();
} 
```

With this you can easily do a POST like this, for example:

```
RestClient rest = new RestClient(url)
rest.addHeader(h.name,h.value);
rest.Execute(RequestType.POST); 
```

# python - Python try except continue 无法打印预期结果

> ID：16112286
> 
> 赞同：0
> 
> 时间：2013-04-19T19:36:52.370
> 
> 标签：python, exception, dictionary, python-2.7

有人可以指出我哪里出错了，这里到底发生了什么，除了继续或解决这个问题的更好方法。

```
dic = {'arun': 123213, 'hari': 31212, 'akila': 321, 'varun': 12132, 'apple': 3212}
u1 = {'arun': 123123, 'orange': 1324214}
u2 = {'akila': 1234124, 'apple': 123123}
u3 = {'hari': 144}
u4 = {'anna': 23322}
for key, value in dic.iteritems():
    try:
        A = u1[key]
        B = u2[key]
        C = u3[key]
        D = u4[key]

    except KeyError:
        continue
    print A, B, C, D  # fails to print 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T19:40:26.403

如果任何查找失败，`continue`它将跳到下一个键。`dic`您想使用即使找不到密钥也能保证给出结果的操作，例如[`dict.get`](http://docs.python.org/2/library/stdtypes.html#dict.get)：

```
for key, value in dic.iteritems():
    A = u1.get(key)  # A is None if not found
    # ...
    print A, B, C, D 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:40:51.063

您的 'uX' 字典没有与 'dic' 相同的键，因此在尝试检索这些值时会失败。然后，您将捕获异常并调用“继续”，它会在您的打印语句执行之前自动跳回循环的顶部。

尝试取出 try/except 语句，Python 解释器会吐出一个错误，说明问题出在哪里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:40:52.403

*   `u2['hari']`将引发异常
*   `u3['akila']`也会引发异常
*   `u4['varun']`也会再次引发异常

您每次都尝试使用字典中的项目，尽管该项目不存在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T21:14:09.597

试试这个：

```
dic = {'arun': 123213, 'hari': 31212, 'akila': 321, 'varun': 12132, 'apple': 3212}
u1 = {'arun': 123123, 'orange': 1324214}
u2 = {'akila': 1234124, 'apple': 123123}
u3 = {'hari': 144}
u4 = {'anna': 23322}

for key in dic:
    print list(d.get(key) for d in (u1, u2, u3, u4)) 
```

它将您的输出打印为列表：

```
>>> for key in dic:
...     print list(d.get(key) for d in (u1, u2, u3, u4))
... 
[123123, None, None, None]
[None, 1234124, None, None]
[None, 123123, None, None]
[None, None, 144, None]
[None, None, None, None] 
```

# scala - Scala 2.10, Double.isNaN, and boxing

> ID：16112287
> 
> 赞同：5
> 
> 时间：2013-04-19T19:36:56.183
> 
> 标签：scala, boxing, scala-2.10

In Scala 2.10, is `someDouble.isNaN` expected to box? Running my code calling `.isNaN` through a decompiler, I still see telltale calls to `double2Double` in my code. Given the new `AnyVal` work in 2.10, I'd expect it to be no worse than `java.lang.Double.isNaN(someDouble)` at runtime with no spurious allocations. Am I missing something?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T20:07:04.083

Unfortunately, `isNaN` is a method on `java.lang.Double`, and it is essential to have an implicit conversion to `java.lang.Double`, so the Scala `RichDouble` value class cannot reimplement `isNaN` to be fast, and when you use `isNaN` you box to `java.lang.Double`.

Since this leaves only slow or awkward ways to test for `NaN`, I define

```
implicit class RicherDouble(val d: Double) extends AnyVal {
  def nan = java.lang.Double.isNaN(d)
} 
```

and then I can just use `.nan` to check.

# api - 我们可以更便宜地使用 Google 自定义搜索 API 吗？

> ID：16112289
> 
> 赞同：3
> 
> 时间：2013-04-19T19:37:03.183
> 
> 标签：api, google-search-api

我们需要有一个 Google 的关键字跟踪器。我们实际上有，但是成本是一个问题。

有基于这样的跟踪器的[SheerSEO ，他们提供的关键字跟踪服务似乎比谷歌便宜。](http://www.sheerseo.com/)虽然我们没有做新的 SheerSEO，但我们必须从 Google 获取关键字。

**纯搜索引擎优化**

*   400 个关键字，每月 15 美元。
*   每周刷新
*   获取每个关键字的前 20 页
*   [定价页面](http://www.sheerseo.com/seo-monitoring-tools/pricing.html)

每月关键字成本为 15/400 美元 = 0.0375 美元，公司也从中受益。
所以我假设他们至少赚了一半的钱（不过应该更多）。
在此假设下：**每个关键字每月约 0.019 美元**

**Google 自定义搜索**（用于搜索整个网络，而不是特定域）

*   每 1000 个查询的费用为 5 美元。
*   单个查询不提供超过 1 页（10 个结果）。
*   [定价页面（底部）](https://developers.google.com/custom-search/v1/overview#Pricing)

应用 SheerSEO 限制：
每个关键字需要前 20 页的 20 次查询，每周，即每月 80 次查询。
1000 / 80 = 12.5 个关键字每月 5 美元
每个关键字是 5**美元/12.5 美元 = 0.4 美元/月**

我们考虑过使用 SheerSEO API，但他们不允许使用 API 添加关键字，关键字必须手动添加。

我们能否让我们的成本像 SheerSEO 一样便宜，或者换句话说，他们如何做到这一点？还有其他我们忽略的 Google 服务吗？Google 自定义搜索 API 比 SheerSEO 贵 21 倍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:43:06.507

我认为这是题外话，但我猜大多数客户实际上并没有跟踪 400 个关键字。

此外，您每天可以获得 100 次免费查询，相当于每月 3000 次免费查询。所以我的猜测是他们也在利用这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:59:32.403

你在比较苹果和橘子。Google 自定义搜索旨在嵌入到网站中以创建自定义搜索引擎——它不是为自动使用而构建的。事实上，[Google 自定义搜索的服务条款](http://www.google.com/cse/docs/tos.html)明确禁止您将其用于关键字跟踪器：

> **1.4 适当的行为。**您不得也不得允许任何第三方：[...] (f) 通过或从任何第三方直接或间接访问、启动和/或激活服务 [ *Google 自定义搜索*]，或以其他方式将服务纳入任何网站或网站以外的其他方式 [*嵌入 Google 自定义搜索小部件以显示搜索结果的网站*]。

第 1.4 节还有许多其他小节将禁止这种使用，但这是措辞更明显的小节之一。重点是，它不是收集 SEO 信息的工具。

# loops - cfloop 中的总和值

> ID：16112300
> 
> 赞同：2
> 
> 时间：2013-04-19T19:37:46.950
> 
> 标签：loops, coldfusion, cfloop

我指的是以前的 SO [Coldfusion Calculate Sum Total (Loop? )](https://stackoverflow.com/questions/7830784/coldfusion-calculate-sum-total-loop)，它被标记为正确答案，但代码对我不起作用。

我正在尝试从多个领域创建一个总计。但我收到的错误是“未定义变量 xxx”。这是因为我试图从循环中为所有记录附加值

```
<cfoutput>
<cfquery name="ActivityReceipts" dbtype="query">
    SELECT
          activity,
          qty_approved,
          location,
          payment_amount, 
          shipping_cost,
          handling_cost 
   FROM   rc.RC1
   WHERE  id_number = '#Receipts.id_number#'
</cfquery>

<cfloop query="ActivityReceipts">
<tr>
<td style="text-align:left;">#ActivityReceipts.activity#</td>
<td style="text-align:left;">#ActivityReceipts.qty_approved#</td>
<td style="text-align:left;">#ActivityReceipts.location#</td>
<td style="text-align: right; padding-right: 80px;">#ActivityReceipts.payment_amount#</td>
</tr>

<cfset grandTotal =  grandTotal + ( #ActivityReceipts.payment_amount# + #ActivityReceipts.handling_cost# + #ActivityReceipts.Shipping_cost# ) />

</cfloop>

<td>#grandTotal#</td>
</cfoutput> 
```

请注意，如果我将 grandTotal 变量设置行更改为

```
<cfset grandTotal =  ( #ActivityReceipts.payment_amount# + #ActivityReceipts.handling_cost# + #ActivityReceipts.Shipping_cost# ) /> 
```

它不会导致错误，但它也只对最后一行求和，而不是对所有行求和。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:43:26.847

您需要在循环之前为总 var 设置默认值...

```
<cfset grandTotal = 0> 
```

此外，如果您不打算输出或引用 var，则不需要加上井号。

```
<cfset grandTotal =  grandTotal + ( ActivityReceipts.payment_amount + ActivityReceipts.handling_cost + ActivityReceipts.Shipping_cost ) /> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T19:43:48.373

你必须`grandTotal`像这样初始化：

```
<cfset grandTotal = 0>
<cfloop query="ActivityReceipts">
    <tr>
        <td style="text-align:left;">#ActivityReceipts.activity#</td>
        <td style="text-align:left;">#ActivityReceipts.qty_approved#</td>
        <td style="text-align:left;">#ActivityReceipts.location#</td>
        <td style="text-align: right; padding-right: 80px;">
            #ActivityReceipts.payment_amount#
       </td>
   </tr>

   <cfset grandTotal =  grandTotal + ( ActivityReceipts.payment_amount 
                                       + ActivityReceipts.handling_cost 
                                       + ActivityReceipts.Shipping_cost 
                                   ) />
</cfloop> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T19:50:28.843

这是一种没有循环的方法。

```
grandTotal = ArraySum(ActivityReceipts["payment_amount"])
+ ArraySum(ActivityReceipts["handling_cost"])
+ ArraySum(ActivityReceipts["Shipping_cost"]); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T19:41:43.207

您必须先定义和初始化变量`grandTotal`，然后才能执行类似`<cfset grandTotal = grandTotal + ...`. 只需执行以下操作：

```
 ...
</cfquery>

<cfset grandTotal= 0>

<cfloop query="ActivityReceipts">
  ... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-19T19:42:00.910

`<cfset grandtotal=0>`从循环之前开始。由于您在循环中引用它，并且它没有被初始化，所以您会变得不确定。

# asp.net - 更改 asp 脚本的 URL 变量

> ID：16112301
> 
> 赞同：1
> 
> 时间：2013-04-19T19:37:54.160
> 
> 标签：asp.net, asp-classic

该脚本当前添加了整个 url（包括 /default.html），而我要更改的是 url 的最后一部分。我想删除 default.html（本质上是 url 的文件名部分）。

所以基本上我想改变的这部分代码是这样的：

```
if matches = 1 Then
    Response.Redirect( urlLink ) //Would like to add new code here to change url that is passed
end if 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:16:10.663

尝试这个：

```
Dim url
url = Mid(urlLink, 1, InStrRev(urlLink, "/")) 
```

要检查您的 urlLink 变量中是否存在“/”字符，请使用以下命令：

```
If InStr(urlLink, "/") > -1 Then
    Dim url
    url = Mid(urlLink, 1, InStrRev(urlLink, "/"))
End If 
```

这将获取原始 URL，并读取直到找到最后一个“/”字符。

# c# - 为什么不使用过滤器时 Linq 只返回一个对象

> ID：16112309
> 
> 赞同：0
> 
> 时间：2013-04-19T19:38:33.880
> 
> 标签：c#, .net, linq, collections, ienumerable

我真的不知道如何解释这个问题。抱歉，如果它是重复的帖子。下面的代码可以正常工作。将 ID 为 1031 的产品返回给我，当我运行过滤器时（在哪里），我得到了相同的产品（因为这个产品在部门和类别中）。好的！但是当我删除 where 1031 （第二行代码）时，它不再起作用了。称为 GroupsID 的 IEnumerable 属性在（部门的）内部只有一个值。它很奇怪。当放置 where product.id == 1031 时，该属性有 2 个值（49 和 137），但是当我删除 where product.id==1031 时，它只返回每个产品的第一个组值（部门）。我列表中的所有产品都只有一个值（大多数情况下为 49）。

```
 model.Products = from product in context.Products
                        where product.ID == 1031
                        orderby Guid.NewGuid()
                        select new ProductViewModel()
                        {
                            ID = product.ID,
                            FullDescription = product.FullDescription,
                            FileName = (from image in product.ProductImages
                                        select image.FileName).FirstOrDefault(),
                            Price = (from priceList in product.PriceListProducts
                                    select priceList.Price).FirstOrDefault(),
                            GroupsID = (from related in product.ProductGroupRelateds
                                        select related.ProductGroup_ID)
                        };

    CategoryViewModel ctg = model.Categories.Where(categ => categ.FriendlyUrl.ToLower().Equals(filter.ToLower()) || categ.FriendlyUrl.ToLower().Equals(categoryURL.ToLower())).Select(categ => new CategoryViewModel() { ID = categ.ID, Name = categ.Name, FriendlyUrl = categ.FriendlyUrl, Index = categ.Index }).DefaultIfEmpty(null).First();
    if (ctg != null)
        model.Products = model.Products.Where(product => product.GroupsID.Contains(ctg.ID));

    DepartmentViewModel dpt = model.Departments.Where(depto => depto.FriendlyUrl.ToLower().Equals(filter.ToLower()) || depto.FriendlyUrl.ToLower().Equals(departmentURL.ToLower())).Select(depto => new DepartmentViewModel() { ID = depto.ID, Name = depto.Name, FriendlyUrl = depto.FriendlyUrl, Index = depto.Index }).DefaultIfEmpty(null).First();
    if (dpt != null)
        model.Products = model.Products.Where(product => product.GroupsID.Contains(dpt.ID)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:01:32.683

删除`orderby Guid.NewGuid()`. 一般来说，这不是洗牌的好方法，在某些情况下可能会破坏你的代码。以更好的方式实现您的 shuffle，例如，请参阅[Is using Random and OrderBy a good shuffle algorithm？](https://stackoverflow.com/questions/1287567/is-using-random-and-orderby-a-good-shuffle-algorithm)或[IEnumerable 上的扩展方法需要洗牌](https://stackoverflow.com/questions/5807128/an-extension-method-on-ienumerable-needed-for-shuffling)。简短的版本是您可以使用的代码：

```
public static IEnumerable<T> Shuffle<T>(this IEnumerable<T> source, Random rng)
{
    T[] elements = source.ToArray();
    for (int i = elements.Length - 1; i >= 0; i--)
    {
        // Swap element "i" with a random earlier element it (or itself)
        // ... except we don't really need to swap it fully, as we can
        // return it immediately, and afterwards it's irrelevant.
        int swapIndex = rng.Next(i + 1);
        yield return elements[swapIndex];
        elements[swapIndex] = elements[i];
    }
} 
```

# python - 显式链接本地共享对象库

> ID：16112310
> 
> 赞同：1
> 
> 时间：2013-04-19T19:38:39.597
> 
> 标签：python, c, gcc, makefile, centos6

我正在`Makefile`为 C 库编译 Python 包装器。该文件的内容如下（由于信息安全原因更改了库名称）。行号仅供参考，不包含在文件数据本身中。

```
 1 CC = gcc                    
  2 CFLAGS = -Wall -fPIC -shared
  3 EXAMPLE_LIB = example
  4 PYTHON = /usr/include/python2.6
  5 LIBS = -L./$(EXAMPLE_LIB) -lexample
  6 INCLUDE = -I./$(EXAMPLE_LIB)/include -I$(PYTHON)
  7 DEPS = test.h
  8 OBJ = test.o
  9 SHARED = test.so
 10 
 11 .PHONY : build
 12 
 13 all: build $(SHARED)
 14 
 15 build:
 16    ./$(EXAMPLE_LIB)/config shared
 17    $(MAKE) -C $(EXAMPLE_LIB)
 18 
 19 %.o: %.c $(DEPS)
 20    $(CC) $(CFLAGS) $(INCLUDE) -c -o $@ $<
 21 
 22 $(SHARED): $(OBJ)
 23    $(CC) $(CFLAGS) $(LIBS) -o $@ $+
 24 
 25 clean:
 26    $(MAKE) clean -C $(EXAMPLE_LIB)
 27    rm $(OBJ)
 28    rm $(SHARED) 
```

`EXAMPLE_LIB`共享对象文件`example.so`正在正确编译并存在于，并且第`<project-directory>/example/example.so`3 方库的正确头文件存在于`<project-directory>/example/include`.

我遇到的问题是`example.so`共享对象库的不同版本（功能较少）安装在全局系统上，并且链接到我的库（`test.so`）而不是本地（自编译）副本中。`undefined symbol`尝试在 Python 中导入库时，这会导致错误。

当我使用检查`test.so`共享对象库时，`ldd`我看到`/usr/lib64/example.so.1`正在加载而不是`<project-directory>/example/example.so`. 或演示：

```
[mike@tester myproject]$ ldd test.so 
    linux-vdso.so.1 =>  (0x00007fff803ff000)
    example.so.1 => /usr/lib64/example.so.1 (0x00007f98700e8000)
    libc.so.6 => /lib64/libc.so.6 (0x00007f986fd55000)
    libdl.so.2 => /lib64/libdl.so.2 (0x00007f986fb50000)
    libz.so.1 => /lib64/libz.so.1 (0x00007f986f93a000)
    /lib64/ld-linux-x86-64.so.2 (0x0000003afda00000) 
```

**有没有我可以传递给 GCC 的选项来告诉它显式链接共享对象库的本地版本？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:49:22.047

问题在于，`-L`只需在搜索路径中添加一个目录，`-l`就可以在搜索路径的任何位置找到该库。所以：

```
LIBS = -L./$(EXAMPLE_LIB) -lexample 
```

... 可能会在、、等中查找`libexample.so`（或`libexample.a`！） ，然后再查找。`/usr/lib``/usr/local/lib``/usr/lib64``./example`

有关详细信息，请参阅GCC 文档中的[链接选项](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Link-Options.html#Link-Options)和[目录搜索选项。](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Directory-Options.html#Directory-Options)

如果要显式指定库，只需将其路径传递给链接器：

```
LIBS = ./$(EXAMPLE_LIB)/libexample.so 
```

正如文档明确所说：

> 使用 -l 选项和指定文件名的唯一区别是 -l 用“lib”和“.a”包围库并搜索多个目录。

因此，如果您不希望它搜索多个目录，请不要使用`-l`.

# node.js - Node.js：使用 html 渲染获取 css 文件

> ID：16112316
> 
> 赞同：5
> 
> 时间：2013-04-19T19:39:11.347
> 
> 标签：node.js

如何在我的 HTML 文件中包含 CSS 文件并在 Node.js 中呈现 HTML？

这就是我所做的：

```
<link rel="stylesheet" type="text/css" href="./general.css" /> 
```

然后是我去 localhost:8333/general.css 时的错误：

```
Cannot GET /general.css 
```

我的模块渲染器脚本如下：

```
app.set('views', __dirname);
app.engine('html', engines.mustache);
app.set('view engine', 'html'); 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T20:26:03.207

You can to use Express' static middleware to serve static files like (client-side) JS and CSS:

```
app.use(express.static()); 
```

That will, by default, try and find static files in `./public` (relative to the script you configure the middleware from):

```
yourproject/app.js   <-- if configured here
yourproject/public/  <-- it will look here 
```

If you use this in your HTML/template:

```
<link rel="stylesheet" type="text/css" href="/css/general.css" /> 
```

The middleware will find and (if found) serve `./public/css/general.css`.

If you want a setup where your CSS files are in the same directory as your application script, you can tell the middleware where to look for files by passing a directory as first argument:

```
app.use(express.static(__dirname)); 
```

# javascript - 意外的标记 }。摄氏度到华氏温度转换器

> ID：16112327
> 
> 赞同：0
> 
> 时间：2013-04-19T19:39:43.733
> 
> 标签：javascript

在我回答这个问题之前，我只想说一件事。我是一个对编程感兴趣的年轻人，所以如果答案超级简单，请不要对我发火。PS。对不起我的英语不好：P

事情就是这样。我正在尝试在 JavaScript 中制作华氏温度和摄氏温度之间的转换器。我根本无法理解我`enter code here`做错了什么。我的代码；

```
//Line 2 asks the user what he/she want to convert. Either celcius to farenheit, or farenheit to celcius
var userChoice = prompt("For converting farenheit to celcius, type FtoC. For converting celcius to farenheit, type CtoF");

//Defines a function to calculate the math
var celciustofarenheit = function (userChoice) {
    if (userChoice === "CtoF")
        var CtoFchoice = prompt("Whats the degree you want to convert?")
            var result1 = CtoFchoice * 9 / 5 + 32;
                console.log(CtoFchoice, "is", result1, "in farenheit!")
}
    if (userChoice === "FtoC") {
        var FtoCchoice = prompt("Whats the number you want to convert?")
            var result2 = FtoCchoice - 32 * 5 / 9;
                console.log(FtoCchoice, "is", result2, "in celcius!")
    }
}; 
```

请告诉我我做错了什么，而不仅仅是粘贴正确的代码！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:41:01.620

您在 . 之后缺少一个花括号`if (userChoice === "CtoF")`。如果您正确缩进代码，您将直接发现此类错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:42:43.063

正确的代码

```
//Defines a function to calculate the math
var celciustofarenheit = function (userChoice) {
    if (userChoice === "CtoF") {
        var CtoFchoice = prompt("Whats the degree you want to convert?");
        var result1 = CtoFchoice * 9 / 5 + 32;
        console.log(CtoFchoice, "is", result1, "in farenheit!");
    }

    if (userChoice === "FtoC") {
        var FtoCchoice = prompt("Whats the number you want to convert?");
        var result2 = FtoCchoice - 32 * 5 / 9;
        console.log(FtoCchoice, "is", result2, "in celcius!");
    }
}; 
```

# f# - 如何进行并行过滤

> ID：16112330
> 
> 赞同：2
> 
> 时间：2013-04-19T19:39:56.563
> 
> 标签：f#, parallel-processing, task-parallel-library, plinq

如何在 F# 中实现并行过滤？基本上我想`Array.Parallel.Choose`用序列表达式创建一个数组。

我试过：

```
Async.Parallel [for x in 1..40 do yield async { if x % 5 = 0 then return x }] 
```

但这是类型不匹配，因为 if 并不总是有值（即`Async<unit>`不是`Async<'a>`）。

我正在迭代一大组数字（1,000,000,000 +），所以我不想预先生成序列。

if 语句中的实际检查是：

```
let isPalindrome (x : int) = let numberArray = x.ToString().ToCharArray()
                             numberArray = Array.rev numberArray 
```

尝试使用 PSeq：

```
[for x in 990000..999999 do for y in 990000..999999 do yield (x, y, x*y)]
|> PSeq.filter(fun (x, y, z) -> isPalindrome z)
|> Seq.max 
```

这导致`OutOfMemoryException`.

丑陋的解决方法：

```
let numberArray = [|990000..999999|]
let result = numberArray |> Array.Parallel.collect(fun x -> [| for y in numberArray do if isPalindrome (x*y) then yield (x, y, x*y)|])
             |> Array.maxBy(fun (x, y, z) -> z) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:37:13.163

```
let isPalindrome (x : int) = let numberArray = x.ToString().ToCharArray()
                             numberArray = Array.rev numberArray 
```

我想出了如何使用该`PSeq`库对序列进行延迟过滤：

```
let generator =
    seq {
        for x in 990000..999999 do 
            for y in 990000..999999 do 
                yield (x, y, x*y) 
    }

generator
|> PSeq.filter(fun (x, y, z) -> isPalindrome z)
|> Seq.max 
```

真实：00：00：28.938，CPU：00：01：49.078，GC gen0：3448，gen1：2，gen2：0

可悲的是，这比我丑陋的黑客要慢：

```
let numberArray = [|990000..999999|]
let result = numberArray |> Array.Parallel.collect(fun x -> [| for y in numberArray do if isPalindrome (x*y) then yield (x, y, x*y)|])
             |> Array.maxBy(fun (x, y, z) -> z) 
```

真实：00：00：24.779，CPU：00：01：32.109，GC gen0：2680，gen1：18，gen2：1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-05T20:15:46.347

基于 Array.Choose 实现的更高效的解决方案：

```
 open System.Collections.Concurrent
 open System.Threading.Tasks
 open System

 let parallelFilter f (array: 'T[]) = 

            let inputLength = array.Length                      

            let isChosen : bool [] = Array.zeroCreate inputLength                
            let mutable outputLength = 0        
            let range = Partitioner.Create(0,inputLength)
            Parallel.ForEach(
                         range,
                         (fun () ->0),
                         (fun (start,finish) _ count -> 
                            let mutable localCount = 0
                            for i in start .. finish-1 do
                                match f array.[i] with 
                                | true -> () 
                                | false -> 
                                    isChosen.[i] <- true                                      
                                    localCount <- localCount+1
                            localCount),
                          Action<int> (fun x -> System.Threading.Interlocked.Add(&outputLength,x) |> ignore )
                          ) |> ignore         

            let output = Array.zeroCreate outputLength
            let mutable curr = 0
            for i = 0 to isChosen.Length-1 do 
                if isChosen.[i] then 
                    output.[curr] <- output.[i]
                    curr <- curr + 1
            output 
```

# highcharts - 未捕获的类型错误：无法调用未定义的方法“attr”

> ID：16112334
> 
> 赞同：0
> 
> 时间：2013-04-19T19:40:12.493
> 
> 标签：highcharts, highstock

我下载了 Highstock 的 1.3.1 版本，现在我在 highstock.js 代码中遇到了这个错误。它与滚动条有关。如果我将滚动条关闭图表并且导航器渲染正常，或者如果我关闭导航器图表和滚动条渲染正常但是两者都打开我在这部分代码的某处收到此错误。我可以在 1.2.2 版本上运行完全相同的图表，并且运行良好。任何帮助，将不胜感激。

if (r) this.drawScrollbarButton(0), this.drawScrollbarButton(1), k[e]({translateX: i,translateY: v(F + x)}), o[e]({width: j}) , g = n + d, h = c - G, h < y && (D = (y - h) / 2, h = y, g -= D), this.scrollbarPad = D, l[e]({ x: V(g) + G % 2 / 2,width: h}), y = n + d + c / 2 - 0.5, this.scrollbarRifles.attr({visibility: c > 12 ? "visible" : "hidden "})[e]({d: ["M", y - 3, n / 4, "L", y - 3, 2 * n / 3, "M", y, n / 4, "L" , y, 2 * n / 3, "M",

未捕获的类型错误：无法调用未定义的方法“attr”

y + 3, n / 4, "L", y + 3, 2 * n / 3]});

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T19:12:22.840

您没有将数据推送到图表中。您正在将数据推送到全局范围内的变量中。当您创建全局变量为空的图表时，它将为 Highcharts 制作空变量的副本。当您推送数据时，Highcharts 对象中的变量保持为空。

这是一个更新的示例，说明了上述问题：http: [//jsfiddle.net/8Esve/1/](http://jsfiddle.net/8Esve/1/)

在`data`您需要调用的方法中`this.series[0].setData(Pressure);`，例如实际更新图表。这是[http://jsfiddle.net/8Esve/2/的一个例子](http://jsfiddle.net/8Esve/2/)

# sitecore - 具有 GUID 值的站点核心搜索索引

> ID：16112335
> 
> 赞同：3
> 
> 时间：2013-04-19T19:40:17.170
> 
> 标签：sitecore, sitecore6

我需要找到一种方法来从 Sitecore 搜索索引查看器中找到结果的字段值（GUID 值）。

当我们单击 Sitecore indexviewer 并搜索索引时，同样的事情会返回包含文档数量（字段值和字段名称）的结果。现在我需要排除所有以“__”开头的字段，并且我需要在配置文件中排除这些字段。

请提供有关如何查找字段值的方法以及有关如何在配置字段中排除字段值的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-22T10:57:43.673

注意 guid 的存储方式，作为短 ID？

在大多数情况下，您应该确保在索引和搜索期间没有对 guid 进行标记。（使用关键字查询和 NO_TOKENIZE）。

# java - 具有两个相同参数的递归

> ID：16112338
> 
> 赞同：0
> 
> 时间：2013-04-19T19:40:20.730
> 
> 标签：java, recursion, binary-search-tree

我正在研究一种递归方法，该方法在二叉搜索树中输出最小的字符串，它在树中具有反向，但我觉得我完成这项任务的方式做得不好。

我有一个将根变量**两次**传递给递归重载方法的驱动程序方法。我觉得这不仅令人困惑，而且被认为是不好的做法。我通过它两次的原因是为了跟踪原始根变量，以便我可以将它传递给需要它的搜索方法。有没有其他方法可以做到这一点，还是我坚持下去？

相关代码：

```
 public String smallRev() {
        return smallRev(root,root); // <--- Bad practice?
    }

    private static String smallRev(StringNode temproot, StringNode root) {
        String result;
        if (temproot == null) {
            result = "";
        } else if (search(root, revString(temproot.getString()))) { //<-- Used here
            result = temproot.getString();
        } else {
            String left = smallRev(temproot.getLeft(),root); // <-- Here
            String right = smallRev(temproot.getRight(),root); // <-- & Here
            if (!left.equals("")) {
                result = left;
            } else {
                result = right;
            }
        }
        return result;
    } 
```

# mysql - 在分组中显示空日期？

> ID：16112339
> 
> 赞同：1
> 
> 时间：2013-04-19T19:40:20.743
> 
> 标签：mysql, date, count, group-by

我目前正在使用 MySQL 来计算过去一周按日期创建的行数。这是我的表的示例：
![我的桌子](https://i.stack.imgur.com/P2u7N.png)
使用以下 SQL 查询（考虑到它是 2013 年 4 月 20 日）

```
SELECT DATE(Date) AS Date,
       COUNT(id) AS Count
FROM notes
WHERE UNIX_TIMESTAMP(Date) + 604800 >= UNIX_TIMESTAMP()
GROUP BY DAY(Date)
ORDER BY Date ASC 
```

我得到以下结果。
![输出](https://i.stack.imgur.com/1FsZ0.png)
但是，由于我正在经历过去的一周，我还想要没有这样的行的日子：

![期望的输出](https://i.stack.imgur.com/hGgnl.png)

我将如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:47:19.063

我相信最简单的方法是

```
select a.*, b.`Count`
   FROM 
   (
   select date(now()) as dt 
   union all
   select date(now()-interval 1 day)
   -- then the same for - 2 day, -3 , etc
   )a
   LEFT JOIN 
   (
     --your query
   )b ON (a.dt = b.`date`) 
```

# excel - 1 个工作表中的 2 个宏，单击查看复选标记，双击查看 x

> ID：16112343
> 
> 赞同：0
> 
> 时间：2013-04-19T19:40:29.717
> 
> 标签：excel, vba

我一直在尝试将 2 个宏组合到 1 个工作表中，我只想使用鼠标单击以选中复选标记并双击 x 我该怎么做？我附加了我使用的宏，它是相同的公式：第二个宏的 string = "C2:C80, E2:E80" 和 Target.Value = "r"。Target.Cells.Counts = 2

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

    Const sCheckAddress As String = "B2:B80, D2:D80"

    Dim rngIntersect As Range

    If Target.Cells.Count = 1 Then

        On Error Resume Next
        Set rngIntersect = Intersect(Me.Range(sCheckAddress), Target)
        On Error GoTo 0

        If Not (rngIntersect Is Nothing) Then
            Target.Font.Name = "Marlett"
        Target.Value = "a"

        End If

    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T02:11:57.390

您想要做的事情必须分成两个单独的事件：

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)
    Application.EnableEvents = False
    Const sCheckAddress As String = "B2:B80, D2:D80"

    Dim rngIntersect As Range

    If Target.Cells.Count = 1 Then

        On Error Resume Next
        Set rngIntersect = Intersect(Me.Range(sCheckAddress), Target)
        On Error GoTo 0

        If Not (rngIntersect Is Nothing) Then
            Target.Font.Name = "Marlett"
        Target.Value = "r"
        ' I'm not overly happy with this next line, but at least it gets you out of activating the cell.
        Target.Offset(0, 1).Select
        End If

    End If
    Application.EnableEvents = True

End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Application.EnableEvents = False
    Const sCheckAddress As String = "B2:B80, D2:D80"

    Dim rngIntersect As Range

    If Target.Cells.Count = 1 Then

        On Error Resume Next
        Set rngIntersect = Intersect(Me.Range(sCheckAddress), Target)
        On Error GoTo 0

        If Not (rngIntersect Is Nothing) Then
            Target.Font.Name = "Marlett"
        Target.Value = "a"

        End If

    End If
Application.EnableEvents = True
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T02:51:58.763

@sous2817 发布了一个很好的答案。我想扩展这个想法——但如果你喜欢这个方法，请给 @sous2817 的答案，因为我所做的只是稍微修改一下。

每当您重复代码时，最好考虑如何对其进行子程序化或将其部分转换为您可以使用和重用的函数。

这将您的代码分隔，使其更易读（通常），并且如果您的文件结构稍后需要更改代码，也许最重要的是使维护更容易。例如，您在两个子例程中有许多共同的元素：

*   `sCheckAddress`表示范围地址的字符串变量
*   检查 target.cells.count 是否 = 1
*   检查目标是否与`sCheckAddress 相交

我将这些公共元素放在一个函数中，该函数告诉子例程何时对目标采取行动。虽然这在这个范围的项目中看起来微不足道，但在您处理更大和更复杂的 VBA 编程时养成一个好习惯。

```
Private Sub Worksheet_BeforeDoubleClick(ByVal Target As Range, Cancel As Boolean)

Application.EnableEvents = False

If UpdateCell(Target) Then  `<~~ Use a custom function to determine whether to act on this cell.
    With Target
        .Font.Name = "Marlett"
        .Value = "r"
        .Offset(0, 1).Select
    End With
End If

Application.EnableEvents = True

End Sub

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
Application.EnableEvents = False

If UpdateCell(Target) Then `<~~ Use a custom function to determine whether to act on this cell.
    With Target
        .Font.Name = "Marlett"
        .Value = "r"
    End With
End If

Application.EnableEvents = True

End Sub 
```

这是检查以确保您`Target`的范围只有一个单元格的函数。它还会执行第二次检查以确保与`Target`您的`sCheckAddress`. `True` *只有当*它同时满足这两个条件时，它才会返回一个值，然后允许事件宏更新`Target`.

```
Private Function UpdateCell(rng As Range) As Boolean
Const sCheckAddress As String = "B2:B80, D2:D80"

'Establish conditions that return "FALSE"
If rng.Cells.Count <> 1 Then Exit Function  '<~~ Make sure only one cell triggered the event.'
If Intersect(Me.Range(sCheckAddress), rng) Is Nothing Then Exit Function  '<~~ Make sure the cell is in your sCheckAddress Range.'

UpdateCell = True

End Function 
```

# javascript - IE7 中用于查看控制台日志消息的开发人员工具

> ID：16112345
> 
> 赞同：11
> 
> 时间：2013-04-19T19:40:38.923
> 
> 标签：javascript, internet-explorer-7

在 IE 8 中，我看到了开发人员工具部分，并且能够访问其 javascript 控制台并查看我在其中编写的控制台日志......但我在 IE 7 中找不到这样的东西？它在哪里 ？有吗？我只想在 IE 7 中查看控制台日志命令的输出

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-19T19:41:57.780

开发者工具在版本 8 中被添加到 Internet Explorer 中，不幸的是它们在 IE7 原生中不可用，但是可以通过[额外的下载](http://www.microsoft.com/en-us/download/details.aspx?id=18359)来添加它们。根据文档，此插件不提供额外的 Javascript 调试功能。您可以查看适用于 IE7 的 Firebug Lite，但它不如 Firebug 或 Developer Tools 强大，但它确实提供了一个用于记录脚本输出的基本控制台。

要查看 Firebug Lite 的功能/缺失功能，[请访问此页面](https://getfirebug.com/firebuglite#WhatsNot)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T19:47:47.660

IE 7 有开发者工具栏，它没有开发者工具那么多的特性/支持。这是对附加组件的引用：

[http://www.microsoft.com/en-us/download/details.aspx?id=18359](http://www.microsoft.com/en-us/download/details.aspx?id=18359)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-09T03:58:02.063

以上这些答案中的链接都是无效链接，Firebug Lite似乎无法安装在我的Window Vista，IE7上，最后，以下对我有用：

[http://www.my-debugbar.com/wiki/CompanionJS/Installing](http://www.my-debugbar.com/wiki/CompanionJS/Installing)

它为 IE6 或 IE7 提供了一个控制台，因此您可以查看错误是什么（在控制台日志中）

*   截屏

[![在此处输入图像描述](https://i.stack.imgur.com/NkfTU.png)](https://i.stack.imgur.com/NkfTU.png)

# php - 将文件引用作为函数参数传递

> ID：16112347
> 
> 赞同：2
> 
> 时间：2013-04-19T19:40:41.417
> 
> 标签：php, file-io

我想将文件引用作为函数参数传递。我不确定这在 php 中是如何工作的，但在 js 中，只要变量是全局定义的，它似乎就可以了。显然这不是 js，但我不确定如何更改我的代码来解决这个问题。

在我的文件的开头，我定义了如下内容：

```
$myfileref = fopen('../some/path.txt', 'w');

function writeHeader($fileref){
  fwrite($fileref, 'some text here\n');
} 
```

然后我想这样称呼它：

```
writeHeader($myfileref); 
```

我究竟做错了什么？

这是我的代码：

```
<?php

$outfile = fopen('outfile.txt', 'w');
$path = '.';

$one_html = fopen('../write_dir/one.html', 'w');
if(!is_resource($one_html)){
    die("fopen failed");
}
$two_html = fopen('../write_dir/two.html', 'w');
if(!is_resource($two_html)){
    die("fopen failed");
}
$three_html = fopen('../write_dir/three.html', 'w');
if(!is_resource($three_html)){
    die("fopen failed");
}

function searchFiles($dir){
    $outpath = getcwd() . '/../write_dir/';
    $in_dir = 'none';
    $f_one = $f_two = $f_three = false;
    $thisdir = new RecursiveDirectoryIterator($dir, RecursiveDirectoryIterator::SKIP_DOTS);
    $files = new RecursiveIteratorIterator($thisdir, RecursiveIteratorIterator::SELF_FIRST);
    global $one_html, $two_html, $three_html;

    foreach($files as $object){
        if($object->isDir()){
            if(strpos($object->getPathname(), 'one') == true){
                if(!$f_one){
                    echo "in one \n";
                    fileHeader($one_html);
                    $f_one = true;
                }
                $in_dir = 'one';
            }
            else if(strpos($object->getPathname(), 'two') == true){
                if(!$f_two){
                    echo "in two \n";
                    fileHeader($two_html);
                    $f_two = true;
                }
                $in_dir = 'two';
            }else if(strpos($object->getPathname(), 'three') == true){
                if(!$f_three){
                    echo "in three  \n";
                    fileHeader($three_html);
                    $f_three = true;
                }
            }
        }
    }
}

function fileHeader($fileref){
    fwrite($fileref, "<table border=\"1\">\n");
    fwrite($fileref, '<tr bgcolor=\"#CCCCCC\">\n');
    fwrite($fileref, '<th>name</th>');
    fwrite($fileref, '<th>description</th>');
    fwrite($fileref, '<th>authors</th>');
    fwrite($fileref, '<th>version</th>');
    fwrite($fileref, '</tr>');
}

searchFiles('.');

?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:46:44.533

将文件描述符（资源）传递给 PHP 中的函数并没有什么神奇之处。它们将像常规参数一样处理。

以下示例将按原样工作。（像你的）

```
<?php

// define your function
function write($fd, $message) {
    fwrite($fd, $message);
}

// open a file
$fd = fopen('/tmp/a.txt', 'w');

// make sure that opening succeeded
if(!is_resource($fd)) {
    die('fopen failed');
}

// write to the file
write($fd, 'hello world');

// close the file
fclose($fd); 
```

* * *

**看到原代码后**更新：****

 **您只是错过了将这些文件描述符作为参数传递给函数`searchFiles`。所以它们不在`searchFiles()`. 请参阅手册页[变量范围](http://www.php.net/manual/en/language.variables.scope.php)。

将函数声明更改为：

```
function searchFiles($dir, $one_html, $two_html, $three_html){ 
```

并在调用时将这些值传递给函数：

```
searchFiles('.', $one_html, $two_html, $three_html); 
```

我希望你明白你做错了什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:13:43.607

我真的看不出上面的代码有什么问题......我的猜测是

```
writeHeader($myfileref);                     <-- -you are calling this
$myfileref = fopen('log.txt', 'w');          <-- -- Before tHis 

function writeHeader($fileref){
  fwrite($fileref, 'some text here\n');
} 
```

切换位置，它应该可以工作，或者只是使用`SplFileObject`您可以使用的方式`easily force type to your function`示例：

```
$file = new SplFileObject("log.txt", "w");
if (! $file->isWritable())
    throw new Exception("I can't write to this");

writeHeader($file);

function writeHeader(SplFileObject $file) {
    $file->fwrite("The 1st Header\r\n");
    $file->fwrite("The 2nd Header\r\n");
    $file->fwrite("The 3rd Header\r\n");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:43:39.437

PHP 对大多数事情都是按值传递的，因此您需要强制按引用传递：

```
function writeHeader(&$myfileref) {
                     ^--- 
 ...
} 
```

因此 writeHeader() 中的 myfileref 是对函数外部“真实”文件句柄的引用。**

# java - Java 内部类和 HashMap

> ID：16112352
> 
> 赞同：1
> 
> 时间：2013-04-19T19:40:52.713
> 
> 标签：java, hashmap, inner-classes

所以我正在研究一个Java项目，我的一个类使用内部嵌套类（TypesOfQuestions），当我尝试将内部类中的问题添加到HashMap时，它不允许我，我不是确定为什么。

```
public abstract class TypesOfQuestions {

Map<String, Double> scores = new TreeMap<String, Double>();
String text;
double points;

public TypesOfQuestions(String text, double points) {

}

public static class TrueFalse extends TypesOfQuestions {
    public TrueFalse(String text, double points, boolean answer) {
        super(text, points);
    }
} 
```

另一门课是考试，

```
public class Exam {
private String x;
private Map<Integer, Questions> q;

public HoldExam(String x) {
    q = new HashMap<Integer, Questions>();
    this.x = x;
}

public void addTrueFalseQuestion(int questionNumber, String text, 
                                 double points, boolean answer){
    q.put(questionNumber, new TrueFalse (text, points, answer));

}
} 
```

我尝试了很多不同的东西，但我不断收到错误，为此我得到了

```
No enclosing instance of type TypesOfQuestions is accessible. 
Must qualify the allocation with an enclosing instance of type TypesOfQuestions 
(e.g. x.new A() where x is an instance of TypesOfQuestions). 
```

安德德我不知道该怎么办！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:43:04.720

`TrueFalse`可能应该是`static`，因为它与 ; 的外部实例无关`TypesOfQuestions`。它*是*一个`TypesOfQuestions`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:43:24.100

将您的嵌套类更改为静态，以便它不需要对外部类的隐式引用。

```
 public static class TrueFalse extends TypesOfQuestions { ... } 
```

*允许没有*static 限定符的内部类访问外部类的成员。这要求它们持有对外部类的隐式引用。

# c# - 使用“new”在继承的接口中隐藏基成员：这是个好主意吗？

> ID：16112353
> 
> 赞同：7
> 
> 时间：2013-04-19T19:40:54.187
> 
> 标签：c#, inheritance, interface

是否建议在派生接口中使用“new”关键字来为具有相同名称的属性或方法提供更多派生的返回值？

假设我有一个接口 IDocument：

```
public interface IDocument
{
    IParagraphs Paragraphs { get; }

    IRevisions Revisions { get; }

    IStyles Styles { get; }
} 
```

并派生出一个 IRtfDocument。

```
public interface IRtfDocument: IDocument
{
   string Rtf { get; }
   ...
} 
```

我还为 IParagraphs、IRevisions 和 IStyles 提供了更多衍生接口：IRtfParagraphs、IRtfRevisions、IRtfStyles。许多特定于 RTF 的需求推动了他们的创作。

当我访问 RTF 文档的段落时，我想避免将它们转换为 IRtfParagraphs。修订和样式相同。最好避免同时使用“IRtfParagraphs”和“IParagraphs”。所以我想做*的*是：

```
public interface IRtfDocument : IDocument
{
    new IRtfParagraphs Paragraphs { get; }

    new IRtfRevisions Revisions { get; }

    new IRtfStyles Styles { get; }

    string Rtf { get; }
} 
```

这被认为是好的做法吗？它似乎适合这种情况，但我想由你们 C# 退伍军人来运行它。

**更新：**所以我实际上继续尝试使用我的界面中描述的“新”。我的 RtfDocument 类最终需要 IDocument.Styles 属性*和*IRtfDocument.Styles 属性。虽然我可以让 IDocument.Styles 属性返回 IRtfDocument.Styles 的值，但在实现两个属性时感觉不太对劲。

似乎编译器没有考虑到*IRtfStyles*派生自 IStyles 的事实，所以它坚持认为我两者都有。如果[Liskov 替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)让我在 RtfDocument 类中实现 IRtfDocument.Styles 那就太好了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T19:44:49.757

更简单的解决方案可能只是拥有一个通用接口：

```
public interface IFooBox<T>
    where T : IFoo
{
   T Foo { get; }
} 
```

然后，您可以`IFooBox<IFoo>`为您的基本对象或`IFooBox<IEnhancedFoo>`增强版本提供一个。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T19:46:49.560

这种类型的定义将迫使 的实现者`IEnhancedFooBox`显式地`IFoo.Foo`与`IEnhancedFooBox.Foo`. 由于这项工作变得乏味，我倾向于将此保留用于泛型接口扩展非泛型接口的情况。

例如，考虑以下接口。

```
interface IFutureValue {
    object Result { get; }
}

interface IFutureValue<T> : IFutureValue {
    new T Result { get; }
} 
```

*可以通过使用 为所有*“未来值”实现通用处理程序`IFutureValue`，其中使用特定类型的未来值的代码可以使用`IFutureValue<T>`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T19:55:23.770

要回答这个问题，

> 这被认为是好的做法吗？

**通常**`new`，不赞成使用. 然而，就像编程中的所有皱眉一样，这是一个判断问题。如果您发现在您的上下文中有意义的用途，并且您已经排除了其他途径，例如 @Servy 的示例，那么请摇滚. 准备好捍卫你的决定。**`new``new`**

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T20:03:00.267

您使用新修饰符存在很大的潜在问题。假设我们使用您的接口：

```
public interface IFoo
{
    string Name { get; set; }
}

public interface IEnhancedFoo : IFoo
{
    int BarCount { get; set; }
}

public interface IFooBox
{
    IFoo Foo { get; set; }
}

public interface IEnhancedFooBox : IFooBox
{
    new IEnhancedFoo Foo { get; set; }
} 
```

构建我们的类：

```
public class EnhancedFooBox : IEnhancedFooBox
{
    public IEnhancedFoo Foo { get; set; }

    IFoo IFooBox.Foo { get; set; }
}

public class FooBase : IFoo
{
    public string Name { get; set; }
}

public class EnhancedFoo : IEnhancedFoo
{
    public int BarCount { get; set; }

    public string Name { get; set; }
} 
```

构建一些采用接口的方法......

```
static void Test1(IFooBox myBlah)
{
    myBlah.Foo = new FooBase();
    myBlah.Foo.Name = "FooBase";
}

static void Test2(IEnhancedFooBox myBlah)
{
    myBlah.Foo = new EnhancedFoo();
    myBlah.Foo.Name = "EnhancedFoo";
} 
```

然后使用这个逻辑：

```
static void Main(string[] args)
{
    var myBlah = new EnhancedFooBox();
    Test2(myBlah); //first assign name to EnhancedFoo
    Test1(myBlah); //second assign name to FooBase
    Console.Write(myBlah.Foo.Name);
    Console.ReadKey();
} 
```

什么是预期的输出？应该是 FooBase 还是 EnhancedFoo？

> 增强型Foo

程序员不知道该属性已被修改为新的，不会得到预期的输出。这是使用泛型解决的。**

# pdf - 使用itext将静态pdf添加到动态生成的pdf中

> ID：16112361
> 
> 赞同：2
> 
> 时间：2013-04-19T19:41:40.187
> 
> 标签：pdf, merge, itext, document, writer

我在将已经存在的 pdf 添加到我刚刚生成的当前 pdf 中时遇到问题。我看到了 PdfCopy，但我的情况有点不同。我有一个即时生成的pdf，在将其发送给客户端之前，我需要在其中添加一个现有的pdf。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T07:37:24.503

如果您不介意丢失现有 PDF 中可能存在的所有交互性，您可以使用`PdfReader`和`PdfImportedPage`. 请先阅读[文档](http://www.manning.com/lowagie2/samplechapter6.pdf)，更具体地说是标题为“导入页面”的第 6.2.1 节。您还可以下载示例[ImportingPages1](http://itextpdf.com/examples/iia.php?id=110)或查看以下代码片段：

```
PdfReader reader = new PdfReader(existing_pdf);
PdfImportedPage page = writer.getImportedPage(reader, pagenumber);
document.setPageSize(reader.getPageSize(pagenumber));
document.newPage();
PdfContentByte canvas = writer.getDirectContent();
canvas.addTemplate(page, 0, 0); 
```

此片段是从内存中编写的。如果它不能立即工作，您可能需要在这里和那里调整它。

# php - 使用 PHPmail 功能发送邮件，但有多个帐户

> ID：16112365
> 
> 赞同：1
> 
> 时间：2013-04-19T19:41:59.010
> 
> 标签：php, for-loop, while-loop, phpmailer, bulk-mail

我有 1000 个成员的数据库，其中包含用户的电子邮件 ID，并开发了使用单个管理员帐户向数据库中的所有用户发送邮件的代码 - 管理员登录在代码中被硬编码。

现在我想把它带到下一个级别，所有管理员的登录名都将存储在另一个数据库中，代码将从数据库中读取登录名并发送邮件。例如，代码将使用 admin#1 登录向 user#1-50 发送邮件，并使用 admin2 登录向 user#51-100 发送邮件，依此类推。

下面是我正在尝试的代码，似乎多个循环存在一些问题。有人可以帮忙吗。

```
<?php
error_reporting(E_ALL);
//error_reporting(E_STRICT);
ini_set("display_errors", "on");
ini_set('max_execution_time', 300); //300 seconds = 5 minutes
ini_set('memory_limit', '6500M'); //Maximum amount of memory a script may consume (128MB by default)
date_default_timezone_set('UTC');

require_once('../class.phpmailer.php');
//include("class.smtp.php"); // optional, gets called from within class.phpmailer.php if not already loaded

$mail                = new PHPMailer();
$body                = file_get_contents("contents.html");
$body                = preg_replace('/[\]/','',$body);

$mail->IsSMTP();        
$mail->Host          = "ssl://smtp.gmail.com";
$mail->SMTPAuth      = true;
$mail->SMTPKeepAlive = true;
$mail->Port          = 465;
$mail->Subject       = "Subject";
$mail->AddReplyTo ('example@domain.com', 'test');

$mail->body         = $body;
$mail->AltBody      = "To view the message, please use an HTML compatible email viewer!";
$mail->IsHTML(true);
$mail->MsgHTML($body);

$con = mysql_connect("localhost","root","password");
if (!$con)
      {
      die('Could not connect: ' . mysql_error());
      }
mysql_select_db("test") or die(mysql_error()); //Databasename

$query1  = "SELECT * FROM loginids WHERE Count >= 1"; //count is column name in table loginids
$result1 = mysql_query($query1) or die(mysql_error());
$row1    = mysql_fetch_array ($result1);

$Counter = 1;
$startnum1 = 0;
$endnum1 = 0;

while ($Counter <= 3) { 

 $mail->Username    = $row1["UserName"]; 
 $mail->Password    = $row1["Password"]; 
 $mail->From        = $row1["UserName"];
 $mail->FromName    = $row1["FromName"];

 $startnum1 = $endnum1;
 $endnum1   = $startnum1 + 2;

 $query2    = "SELECT EmailID FROM dummy Limit $startnum1,$endnum1";
 $result2   = mysql_query($query2) or die(mysql_error());

        while ($row2 = mysql_fetch_array ($result2)) {
            $mail->AddAddress($row2["EmailID"]);
          //$mail->AddStringAttachment($row["EmailID"], "contents.html");

          if(!$mail->Send()) {
            echo "Mailer Error (" . str_replace("@", "&#64;", $row2["EmailID"]) . ') ' . $mail->ErrorInfo . '<br />';
          } else {
            echo "Message sent From : " .$row1["UserName"]." Message sent to :" . $row2["EmailID"] . ' (' . str_replace("@", "&#64;", $row2["EmailID"]) . ')<br />';
          }
          $mail->ClearAddresses();
        }
$Counter++;     
}
?> 
```

嗨，伙计们，感谢您的宝贵反馈，非常感谢。我仍在学习，似乎还有很多事情要做。我已经相应地更新了我的代码（上面），但仍然无法发送邮件。我不确定我是否正确使用了循环。所以这就是我我正在尝试在代码中进行操作。我想使用每个帐户发送（比如说）50 封邮件。我有 3 个电子邮件帐户，$Counter 正在检查我的帐号。startnum1/endnum1 表示每个帐户应发送的电子邮件数量。

```
so $startnum1, $endnum1 should also be changed dynamically for each account #.
for e.g.  
account#1, $startnum1=1, $endnum1=50
account#2, $startnum1=51, $endnum1=100
and so on.. 
```

现在，当我尝试此代码时，我收到“Mailer Error (recipient at domain.com) 以下发件人地址失败：gmail.com 上的 sender1 ：在未连接的情况下调用 Mail()”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:47:59.627

你有错误的查询。您在任何地方都没有定义`$startnum1`and `$endnumb1`，因此内部查询变为：

```
SELECT emailid FROM dummy Limit ,
                               ^^^--syntax error 
```

由于您的代码中绝对**没有**错误处理，并且只是假设每个阶段都成功，难怪您无法找出失败的原因。

至少，您的查询调用应该类似于

```
$result = mysql_query($sql) or die(mysql_error());
                          ^^^^^^^^^^^^^^^^^^^^^^ 
```

**永远不要**使用 来抑制错误`@`，也**永远不要**忽略返回值。当您遇到明显问题时，这是更适用的千亿倍。

你的代码相当于把你的手指塞在耳朵里，然后说“lalala 听不到你的声音”，而忽略了 MySQL 可能做的一切来帮助你找出问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-20T04:41:42.950

阅读代码时会想到的一些事情。

*   您正在***迭代 4 次***向每个登录发送邮件。***这是你想要的吗？***( `for ($Counter = 0; $Counter <= 4; $counter += 1) {`)

*   ***您正在***使用 @ 抑制错误，因此您实际上不知道何时有错误。在你的情况下：`@mysql_select_db("test");`你甚至不知道你是否连接到一个存在的数据库（因为错误被忽略）。输入喜欢`mysql_select_db("test") or die(mysql_error());`

*   你有***不必要的括号***：我相信`$Username = ($row1["UserName"]);`有效，但输入 $Username = $row1["UserName"]; 就足够了

*   ***分配不正确？***价值观：

我猜想：

```
 $Username   = ($row1["UserName"]); 
 $Password   = ($row1["Password"]); 
 $From       = ($row1["UserName"]);
 $FromName   = ($row1["FromName"]);

 $mail->Username; 
 $mail->Password; 
 $mail->From;
 $mail->FromName; 
```

你正在尝试做：

```
 $Username   = $row1["UserName"]; 
 $Password   = $row1["Password"]; 
 $From       = $row1["UserName"];
 $FromName   = $row1["FromName"];

 $mail->Username = $Username;
 $mail->Password = $Password;
 $mail->From = $From;
 $mail->FromName = $FromName; 
```

*   ***未赋值***

    $query2 = "SELECT emailid FROM dummy Limit $startnum1,$endnum1";

应该是这样的

```
$startnum1 = 0;
$endnum1 = 99;
$query2     = "SELECT emailid FROM dummy Limit $startnum1,$endnum1"; 
```

否则查询将失败。

看一下这段代码：

```
 $mail->body       = $body;
  $mail->AltBody    = "To view the message, please use an HTML compatible email viewer!"; // optional, comment out and test
  $mail->IsHTML(true);
  $mail->MsgHTML($body); 
```

似乎您可以***在所有循环之外使用以上***（否则定义了很多次相同的值）

```
 $mail->AddAddress($row2["emailid"], $row2["emailid"]); 
```

您正在添加 id 而不是实际的邮件地址（无论如何看起来都是这样）

```
$mail->AddAddress($row2["emailid"], $row2["emailid"]); 
```

除此之外，您还***添加了两次相同的“emailid”***。

***不应使用 Mysql-functions***，因为函数已被弃用，并且很快将从 php.ini 中删除。请改用***PDO***或***mysqli***。

我希望以上内容可以帮助您朝着正确的方向前进。

# magento - Magento 布局参考不向左

> ID：16112370
> 
> 赞同：0
> 
> 时间：2013-04-19T19:42:11.817
> 
> 标签：magento

所以请帮帮我..我只是想把默认购物车移到左边

```
<reference name="left">
    <block type="checkout/cart_sidebar" name="cart_sidebar" template="checkout/cart/sidebar.phtml" before="-">
        <action method="addItemRender"><type>simple</type><block>checkout/cart_item_renderer</block><template>checkout/cart/sidebar/default.phtml</template></action>
        <action method="addItemRender"><type>grouped</type><block>checkout/cart_item_renderer_grouped</block><template>checkout/cart/sidebar/default.phtml</template></action>
        <action method="addItemRender"><type>configurable</type><block>checkout/cart_item_renderer_configurable</block><template>checkout/cart/sidebar/default.phtml</template></action>
        <block type="core/text_list" name="cart_sidebar.extra_actions" as="extra_actions" translate="label" module="checkout">
            <label>Shopping Cart Sidebar Extra Actions</label>  
        </block>
    </block>
</reference> 
```

我将参考块设置为“左”，但推车没有出现在左侧，但它已经从右侧消失了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:33:20.800

页面是否使用 2columns-left 布局？如果不是，您将永远不会在左侧边栏中看到任何内容。您可以通过布局更新来解决此问题：

```
<reference name="root">
    <action method="setTemplate"><template>page/2columns-left.phtml</template></action>
</reference> 
```

# c# - 在 awesomium 中使用鼠标单击（c#）

> ID：16112372
> 
> 赞同：1
> 
> 时间：2013-04-19T19:42:12.483
> 
> 标签：c#, mouse, awesomium

我正在使用 awesomium，并且正在尝试使用命令“InjectMouseDown”。不幸的是，什么也没发生。我正在尝试使用以下代码：

```
private void newbrowser()
        {
            dir = "C:\\AwCache\\" + RandomString(10);

            _webView = WebCore.CreateWebView(800, 600);
            _webView.ParentWindow = this.Handle;
            using (WebSession session = WebCore.CreateWebSession(dir, new WebPreferences() { /*CustomCSS = "body { zoom: 75%; }", ProxyConfig = proxyok,*/ }))
            {
                _webView.Source = new Uri("http://www.google.com");
                _webView.DocumentReady += WebViewOnDocumentReady;
            }
        }
private void WebViewOnDocumentReady(object sender, UrlEventArgs urlEventArgs)
        {
            timer1.Enabled = true;
        }
private void timer1_Tick(object sender, EventArgs e)
        {
                _webView.InjectMouseMove(5, 100);
                _webView.InjectMouseDown(MouseButton.Left);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T17:25:12.143

在 timer1_tick 中，添加**InjectMouseUp(MouseButton.Left);** 也是。一旦我将所有三个鼠标事件（InjectMouseMove、Inj​​ectMouseDown、InjectMouseUp）注入到 WebView 中，它就起作用了。

下面是对我有用的示例代码（虽然是用 C++ 编写的）。

```
 void Containerclass::mousePressed(ofMouseEventArgs &e)
 {
   webview->InjectMouseMove(e.x - loc.x, e.y - loc.y); 
   webview->InjectMouseDown(MouseButton_Left);
   webview->InjectMouseUp(MouseButton_Left);
 } 
```

# node.js - 使用 mandrill 将用户添加到列表

> ID：16112377
> 
> 赞同：0
> 
> 时间：2013-04-19T19:42:39.663
> 
> 标签：node.js, mailchimp, mandrill

我正在尝试在 heroku 上创建一个简单的页面，为即将推出的产品收集电子邮件。我正在尝试使用 nodejs mandrill api 包装器来完成此操作，但看起来没有将用户添加到列表的方法。列表订阅似乎是一个非常基本的 ESP 功能，我是否遗漏了什么，或者是否有某些原因导致它不包含在 api 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T12:50:02.777

Mandrill 不存储您的订阅者（与 mailchimp 不同），仅将您的收件人列入黑名单。您必须构建自己的存储层。

# ruby - 更改 Rubygem 源的阅读顺序

> ID：16112381
> 
> 赞同：5
> 
> 时间：2013-04-19T19:42:53.237
> 
> 标签：ruby, rubygems, gem

我创建了一个我自己托管的私人宝石。一切都很顺利，直到有人在 ruby​​gems.org 上创建了一个同名的 gem。由于 ruby​​gems.org 的优先级高于我的 gem 服务器 url。我无法再安装我的 gem。我试图删除 ruby​​gems 源：

```
$ sudo gem source -r http://rubygems.org 
```

并重新安装它，使其出现在 gem 源列表之后，但它不起作用。

有没有办法改变 gem 源的查找顺序？

请注意，我不想重命名我的 gem。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:50:23.157

你可以试试`specific_install`宝石：

`gem install specific_install gem specific_install -l <git-url>`

另一种方法是像这样显式声明 gem 服务器：

`gem install mygem -s http://gems.example.com`

在我看来，最好的选择是使用 Bundler。在您的 Gemfile 中添加：

`gem 'mygem', :git => 'git://git.example.com/myrepo.git'`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-05T16:45:00.150

似乎你不能有一个空的 gem 缓存。如果您使用 手动删除[http://rubygems.org](http://rubygems.org)缓存`gem source -r http://rubygems.org`，并且没有定义其他来源，它会自动重新填充。真的是一种令人讨厌的错误功能。

对我来说，诀窍是添加我的源（内部服务器），然后手动读取 ruby​​gems。

```
$ gem source add http://internal-server/
$ gem source
*** CURRENT SOURCES ***

 http://rubygems.org/
 http://internal-server/
$ gem source -r http://rubygems.org/
$ gem source
*** CURRENT SOURCES ***

http://internal-server/
$ gem source -a http://rubygems.org/
$ gem source
*** CURRENT SOURCES ***

http://internal-server/
http://rubygems.org/ 
```

# ksh - ksh 中命令输出的数组分配

> ID：16112385
> 
> 赞同：0
> 
> 时间：2013-04-19T19:43:21.787
> 
> 标签：ksh

我想将命令的输出分配给数组，但遇到了以下问题：

```
temp=`<some_command>`
eval set -A array $temp
print $temp
print "***${array[0]},${array[1]}***" 
```

该命令的输出类似于：

```
""
"D"
"M"
"N" 
```

在我的预期中，`${array[0]}`应该是`""`，并且`${array[1]}`应该是“D”。

但是，结果如下：

```
" "D" "M" "N" # $temp
*** D M N,*** # ${array[0]},${array[1]} 
```

只是无法弄清楚数组的第一个元素如何扫描所有输出。以及如何解决？

更新：今天又看了一下脚本，发现命令的输出是：

```
" "
"D"
"M"
"N" 
```

请注意第一行是`" "`（其中有一个空格字符），而不是纯空字符串`""`。

首先，原始输出是：

```
<some_command> |sort |uniq -c
6421 " "
1090 "D"
   1 "DPV_VALID"
   3 "M"
 588 "N"
  16 "S"
6382 "Y" 
```

我一直以为第一行是一个纯空字符串，例如`""`，没有意识到双引号中有空格字符。

然后，我曾经`awk`得到第二个字段：

```
<some_command> |sort |uniq -c |awk '{print $2}' 
```

输出变为：

```
"
"D"
"M"
"N" 
```

这就是后来命令混乱的原因`eval set -A`（`awk`默认使用空格字符作为分隔符）。如果它是一个纯空字符串，它会起作用。

如果我将命令重写为：

```
temp=`<some_command> |sort |uniq -c |sed 's/" "$/""/' |awk '{print $2}'`
eval set -A array $temp 
```

尽管如此，格伦的解决方案也非常简洁。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:54:09.727

如果要删除引号，只需删除它们。你不必求助于`eval`

```
temp='""
"D"
"M"
"N"'
set -A array $temp
for (( i=0; i<${#array[@]}; i++ )); do
    echo "$i:${array[i]}"
done
for (( i=0; i<${#array[@]}; i++ )); do
    array[i]=${array[i]#\"}   # remove a leading quote
    array[i]=${array[i]%\"}   # remove a trailing quote
done
for (( i=0; i<${#array[@]}; i++ )); do
    echo "$i:${array[i]}"
done 
```

输出

```
0:""
1:"D"
2:"M"
3:"N"
0:   
1:D
2:M
3:N 
```

用 ksh93 测试

# java - NullPointerException 我无法解决

> ID：16112395
> 
> 赞同：1
> 
> 时间：2013-04-19T19:43:41.553
> 
> 标签：java, nullpointerexception

这是当玩家必须从游戏中移除时调用的方法。这两种方法都属于不同的类。

**游戏板GUI类**

```
 Vector<Player> players = new Vector<Player>();

    public void removePlayerFromGame(Player playerToRemove)
        {
            //go through the playerToRemove's properties and reset all their variables
            for(int i = 0; i < playerToRemove.getPropertiesOwned().size(); i++)
            {
                //code to reset the player's properties to an unowned/unmodified state
            }
            //same with transports
            for(int i = 0; i < playerToRemove.getTransportsOwned().size(); i++)
            {
                //code to reset the player's transports to an unowned/unmodified state
            }
            //just updating the vector based on the playerToRemove's position
            if(players.get(0) == playerToRemove)
            {
                players.remove(playerToRemove);
                updatePlayerInformation();
            }
            else 
            {
                players.remove(playerToRemove);
                updatePlayerVector(players);
                updatePlayerInformation();
            }

        } 
```

这就是该方法的调用方式：如果当前玩家 (fromMe) 登陆一个房产并且无法支付租金（即他们的余额由于 而达到 0 `takefrombalance(1200);`，目前硬编码为 1200 以使测试更容易），他们将被移除if 语句`if(fromMe.isBankrupt())`

**属性类**

```
GameboardGUI gui = new GameboardGUI();

public void payRent(Player fromMe, Player toYou, int rent)
    {
        //remove rent from the current player
        fromMe.takeFromBalance(1200);
        //add it to the owner
        toYou.addToBalance(rent);
        GameboardGUI.addGameFeedMessage(fromMe.getName() + " has paid " + rent + " in rent to " + toYou.getName());
        GameboardGUI.addGameFeedMessage(toYou.getName() + "'s balance is now " + toYou.getBalance());
        if(fromMe.isBankrupt())
        {
            //THIS IS THE CALL THAT THROWS THE NullPointerException
            gui.removePlayerFromGame(fromMe);
        }
        else 
        {
            GameboardGUI.addGameFeedMessage(fromMe.getName() + "'s balance is now " + fromMe.getBalance());
        }
    } 
```

这是到达该行时的堆栈跟踪：

```
Exception in thread "AWT-EventQueue-0" java.lang.NullPointerException
    at PropertyTile.payRent(PropertyTile.java:254)
    at PropertyTile.landedOnProperty(PropertyTile.java:239)
    at GameboardGUI.playerHasLanded(GameboardGUI.java:1905)
    at Player.setPosition(Player.java:82)
    at Player.movePlayer(Player.java:101)
    at GameboardGUI$11.actionPerformed(GameboardGUI.java:1536)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$000(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:46:33.173

如果没有堆栈跟踪和代码行号，**真的**很难为您提供帮助，但我们正在努力。

如果这确实是行（而不是实际上在 内`removePlayerFromGame`），则该成员`gui`尚未初始化。

当然，如果不是那一行，它可能只是那`playerToRemove`是空的，并且 NullPointerException 实际上发生在上面几行。

或者，另一种可能性是它发生在 内`removePlayerFromGame`，在这种情况下，最有可能的情况是`playerToRemove`没有正确设置——它的`getPropertiesOwned()`或`getTransportsOwned()`方法返回 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:48:38.603

我将添加以下两行，作为第一步，看看会发生什么：

```
if(fromMe==null)
System.out.println("from me is null");

if(gui == null)
System.out.println("gui is null"); 

gui.removePlayerFromGame(fromMe); 
```

两个对象引用之一是 null 导致异常。否则，方法 removePlayerFromGame 正在做某事，但我认为不会是这种情况，因为堆栈跟踪将包含其他方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:51:17.223

您在代码中说当您到达该行时抛出异常

```
gui.removePlayerFromGame(fromMe); 
```

但是，您显示的堆栈跟踪的顶部是 Player.movePlayer()，其底部位于 PropertyTile.payRent()。

这个 payRent() 是否接收任何参数？可以发一下源码吗？

# java - HttpClient 4.2.3 - 连接重置异常

> ID：16112397
> 
> 赞同：2
> 
> 时间：2013-04-19T19:43:47.297
> 
> 标签：java, apache, jakarta-ee, apache-httpclient-4.x

我正在开发一个应用程序来使用 Apache HttpClient 4.2.3 发送带有 URL 参数的 https POST 请求。我必须在 POST 请求中发送 URL 参数，例如“？username=abc”。我收到连接重置异常。我不知道我必须解决什么问题才能解决这个问题。如果有人帮助我解决这个问题，我会很高兴。

“httpClient.execute(httpPost);”时抛出“连接重置”异常 代码被执行。

这是获取httpClient的代码：

```
 .  .. . . . . .. . . . .
    System.out.println("--Enter HttpClient.getSSLHttpClient--");

    // a trust manager that trusts everything
    X509TrustManager allTrustManager = new AllTrustManager();

    // SSLContext
    SSLContext sslContext = SSLContext.getInstance("TLS");
    sslContext.init(null, new TrustManager[] { allTrustManager }, null);

    SSLSocketFactory sslSocketFactory = new SSLSocketFactory(sslContext);
    Scheme httpsScheme = new Scheme("https", port,sslSocketFactory);
    SchemeRegistry schemeRegistry = new SchemeRegistry();
    schemeRegistry.register(httpsScheme);

    ClientConnectionManager cm = new BasicClientConnectionManager(schemeRegistry);

    //System.out.println("--Exit HttpClient.getSSLHttpClient--");

    DefaultHttpClient httpClient = new DefaultHttpClient(cm,getHttpParams());

    System.out.println("--Exit HttpClient.getSSLHttpClient--");

    return httpClient;  
    .  .. . . . . .. . . . .

Here is the stake trace:

11:58:27.593 [main] DEBUG o.a.h.i.c.BasicClientConnectionManager - Get connection for route {s}->https://xyz.com:443
11:58:27.786 [main] DEBUG o.a.h.i.c.DefaultClientConnectionOperator - Connecting to xyz.com:443
11:58:29.379 [main] DEBUG o.a.h.c.protocol.RequestAddCookies - CookieSpec selected: best-match
11:58:29.387 [main] DEBUG o.a.h.c.protocol.RequestAuthCache - Auth cache not set in the context
11:58:29.387 [main] DEBUG o.a.h.c.p.RequestTargetAuthentication - Target auth state: UNCHALLENGED
11:58:29.388 [main] DEBUG o.a.h.c.p.RequestProxyAuthentication - Proxy auth state: UNCHALLENGED
11:58:29.388 [main] DEBUG o.a.h.impl.client.DefaultHttpClient - Attempt 1 to execute request
11:58:29.388 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Sending request: POST /user?username=abc&password=123 HTTP/1.1
11:58:29.388 [main] DEBUG org.apache.http.wire - >> "POST /user?username=abc&password=123 HTTP/1.1[\r][\n]"
11:58:29.389 [main] DEBUG org.apache.http.wire - >> "Keep-Alive: true[\r][\n]"
11:58:29.389 [main] DEBUG org.apache.http.wire - >> "Accept: text/html[\r][\n]"
11:58:29.389 [main] DEBUG org.apache.http.wire - >> "Content-Length: 0[\r][\n]"
11:58:29.389 [main] DEBUG org.apache.http.wire - >> "Host: xyz.com:443[\r][\n]"
11:58:29.389 [main] DEBUG org.apache.http.wire - >> "Connection: Keep-Alive[\r][\n]"
11:58:29.389 [main] DEBUG org.apache.http.wire - >> "[\r][\n]"
11:58:29.389 [main] DEBUG org.apache.http.headers - >> POST /user?username=abc&password=123 HTTP/1.1
11:58:29.389 [main] DEBUG org.apache.http.headers - >> Keep-Alive: true
11:58:29.389 [main] DEBUG org.apache.http.headers - >> Accept: text/html
11:58:29.389 [main] DEBUG org.apache.http.headers - >> Content-Length: 0
11:58:29.390 [main] DEBUG org.apache.http.headers - >> Host: xyz.com:443
11:58:29.390 [main] DEBUG org.apache.http.headers - >> Connection: Keep-Alive
11:58:29.660 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Connection 0.0.0.0:53007<->xx.xx.xx.xx:443 closed
11:58:29.660 [main] DEBUG o.a.h.impl.client.DefaultHttpClient - Closing the connection.
11:58:29.660 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Connection 0.0.0.0:53007<->xx.xx.xx.xx:443 closed
11:58:29.660 [main] DEBUG o.a.h.i.conn.DefaultClientConnection - Connection 0.0.0.0:53007<->xx.xx.xx.xx:443 shut down
11:58:29.661 [main] DEBUG o.a.h.i.c.BasicClientConnectionManager - Releasing connection org.apache.http.impl.conn.ManagedClientConnectionImpl@4f8bc5eb
11:58:29.661 [main] DEBUG o.a.h.i.c.BasicClientConnectionManager - Connection can be kept alive for 9223372036854775807 MILLISECONDS
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:189)
    at java.net.SocketInputStream.read(SocketInputStream.java:121)
    at sun.security.ssl.InputRecord.readFully(InputRecord.java:312)
    at sun.security.ssl.InputRecord.read(InputRecord.java:350)
    at sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:927)
    at sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:884)
    at sun.security.ssl.AppInputStream.read(AppInputStream.java:102)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:166)
    at org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:90)
    at org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:281)
    at org.apache.http.impl.conn.LoggingSessionInputBuffer.readLine(LoggingSessionInputBuffer.java:115)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:92)
    at org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:62)
    at org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:254)
    at org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:289)
    at org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:252)
    at org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:191)
    at org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:300)
    at org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:127)
    at org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:717)
    at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:522)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:906)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:805)
    at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:784) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T01:11:20.577

最后，我找到了解决方案。我提到我使用了 HttpClient 4.2.3。以前，我使用以下代码来获取 HttpPost 对象：

```
HttpPost httpPost = new HttpPost("https://xyz.com:443/user?username=abc&password=123");
.. . .. . .
httpClient.execute(httpPost);
..  .. . . . . 
```

并得到“连接重置”异常。

然后我删除了端口并再次尝试。现在，我已成功收到服务器的响应：

```
HttpPost httpPost = new HttpPost("https://xyz.com/user?username=abc&password=123");
.. . .. . .
httpClient.execute(httpPost);
..  .. . . . . 
```

它工作正常，但我还有一个问题：为什么我在移除端口后成功得到响应？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T08:30:23.893

前几天我遇到了完全相同的问题，我通过删除 443 端口解决了这个问题。我仍然不明白为什么它会导致问题。问题是，如果我将 url 复制/粘贴到浏览器，它就可以正常工作......

# ruby-on-rails - Rails 3 模型继承

> ID：16112404
> 
> 赞同：0
> 
> 时间：2013-04-19T19:44:22.547
> 
> 标签：ruby-on-rails, ruby

我有三个模型：用户，属于音乐会，属于地区。一个用户在一个地区听音乐会。模型belongs_to关系分别建立。

在 Concerts 控制器中，我计算收听 Concert 的用户数量，如下所示：

```
@listeners = @concert.users.count 
```

但是，我想在区域级别列出每场音乐会的听众人数。在我的区域控制器中，我想做这样的事情：

`@all_listeners = @region.concert.users.count`. 每个地区的每场音乐会的听众人数。我知道这段代码不正确，但这是一般的想法。任何正确方向的观点都值得赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:53:36.037

将 a 添加`has_many :through`到您的 Region 类。

```
class User < ActiveRecord::Base
  belongs_to :concert
end

class Concert < ActiveRecord::Base
  belongs_to :region
  has_many :users
end

class Region < ActiveRecord::Base
  has_many :concerts
  has_many :users, :through => :concerts
end 
```

然后你可以这样计算一个地区的用户：

```
@all_listeners = @region.users.count 
```

# macos - 带行合并的 sed 多行替换

> ID：16112405
> 
> 赞同：1
> 
> 时间：2013-04-19T19:44:23.400
> 
> 标签：macos, shell, sed, replace

这可能有点复杂，但它是这样的：假设我有一个如下所示的 XML：

```
<a>
<b>000</b>
<c>111</c>
<b>222</b>
<d>333</d>
<c>444</c>
</a> 
```

我如何在 Mac 上使用 sed 得到如下所示的 XML：

```
<a>
<b>111 000</b>
<b>222</b>
<d>333</d>
<c>444</c>
</a> 
```

基本上：

*   匹配格式为 <b>...</b> 后跟 </c>...</c> 的 2 个连续行
*   取 <c>...</c> 之间的值并将其（加上一个空格字符）放在 <b> 之后的前一行
*   删除第二行 <c>...</c>

谢谢你。

如果 sed 太多了，请提供其他建议，只要我可以从 mac shell 运行它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:53:09.980

不是最漂亮的解决方案，但它似乎可以工作:-)

```
$ tr '\n' @ < input | sed  's#<b>\([0-9]\+\)</b>@<c>\([0-9]\+\)</c>#<b>\2 \1</b#g' | tr @ '\n' 
```

输出：

```
<a>
<b>111 000</b
<b>222</b>
<d>333</d>
<c>444</c>
</a> 
```

或更笼统地说：

```
$ tr '\n' @ < f1 | sed  's#<b>\([^<]*\)</b>@<c>\([^<]*\)</c>#<b>\2 \1</b#' | tr @ '\n' 
```

用于`[^<]`匹配括号之间的任何内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:57:36.417

Ruby 将支持多行模式：

`ruby -e 'print gets(nil).sub(/<b>([^\n]*)<\/b>\n<c>([^\n]*)<\/c>/m,"<b>\\2 \\1</b>")' file.txt`

# mysql - 从两个嵌套子查询中选择的 SQL 查询

> ID：16112409
> 
> 赞同：0
> 
> 时间：2013-04-19T19:44:43.333
> 
> 标签：mysql, sql

这是关于我的硬件分配的一个非常困难的 sql 查询，我有点卡住了。任何提示将不胜感激。

我的查询：

```
SELECT nest1.carname, 
       nest1.plndescription, 
       nest1.plancount, 
       nest2.totalmems, 
       Round(( nest1.plancount / nest2.totalmems ), 2) AS pct 
FROM   (SELECT carriers.carname, 
               p.plndescription, 
               Count(members.planid)AS plancount 
        FROM   carriers, 
               plans p, 
               members 
        WHERE  carriers.carrierid = p.carrierid 
               AND p.planid = members.planid 
        GROUP  BY carriers.carname, 
                  p.plndescription)nest1 
       NATURAL JOIN (SELECT carriers.carrierid, 
                            Count(members.planid)AS totalmems 
                     FROM   carriers, 
                            plans p, 
                            members 
                     WHERE  carriers.carrierid = p.carrierid 
                            AND p.planid = members.planid 
                     GROUP  BY carriers.carrierid)nest2 
ORDER  BY nest1.carname 
```

我的表格和关系；

```
` CREATE TABLE Carriers
( CarrierID varchar2(4) not null,
  carName varchar2(35),
  carAddress varchar2(50),
  carCity varchar2(30),
  carStCode varchar2(2),
  carZip varchar2(10),
  carPhone varchar2(10),
  carWebSite varchar2(255),
  carContactFirstname varchar2(35),
  carContactLastName varchar2(35),
  carContactEmail varchar2(255),

 CONSTRAINT pk_CarrierID PRIMARY KEY (CarrierID)
 );`

 CREATE TABLE Plans
 ( PlanID integer not null,
  plnDescription varchar2(35),
  plnCost decimal (8,2),
  CarrierID varchar2(4),

CONSTRAINT pk_PlanID PRIMARY KEY (PlanID),
CONSTRAINT fk_CarrierID FOREIGN KEY (CarrierId) REFERENCES Carriers
);

   CREATE TABLE Members
( MemberNo integer not null,
  mbrFirstname varchar2(35),
  mbrLastName varchar2(35),
  mbrStreet varchar2(50),
  mbrCity varchar2(30),
  mbrState varchar2(2),
  mbrZip varchar2(10),
  mbrPhoneNo varchar2(10),
  PlanID integer,
  mbrEmail varchar2(255),
  mbrDateEffective date,
  employerID integer,

    CONSTRAINT pk_MemberNo PRIMARY KEY (MemberNo),
    CONSTRAINT fk_PlanID FOREIGN KEY (PlanId) REFERENCES Plans,
    CONSTRAINT fk_employerID FOREIGN KEY (employerID) REFERENCES employers
    ); 
```

问题：创建一个查询，该查询将列出所有运营商及其计划，以及一列显示该计划中的成员数量、运营商服务的成员总数以及该计划中运营商成员的百分比。例如 – Blue Cross Blue Shield – 将显示如下：

正确的输出：

```
运营商计划 PlanCount TotalMems Pct
Blue Cross Blue Shield 2-Party Basic Medical 10 22 45.45
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:15:04.093

懒惰，不想写那么多。我没有检查这些解析是否正确，但由于这是家庭作业，它应该太容易了。

如果您使用的是 mysql，我会这样做并使用带有子查询的会话变量：

```
select c.carName As Carrier
     , p.plnDescription As Plan
     , count(1) As PlanCount
     , (select @plnCount:=count(1) from members m where m.PlanId=p.PlanId) TotalMems
     , (select @plnCount/count(1) from members) Pct
 from carriers c
 left join plans p on p.CarrierId=c.CarrierId 
```

但是您的 ddl 表明您正在使用 oracle (b/c varchar2)，所以更像是：

```
select c.carName As Carrier
     , p.plnDescription As Plan
     , PlanCount
     , PlanCount/tot Pct
 from carriers c
     ,plans p on p.CarrierId=c.CarrierId
     ,(select sum(decode(m.planId,p.planId,1,0)) PlanCount, count(1) tot from members) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-20T02:42:53.817

我会做以下事情。最低查询只是对所有成员的查询，无论一个人在哪个计划中。这将需要在查询执行计划中自行运行，因为它将产生一条记录并应用于其余的每条记录查询。这导致没有实际的 JOIN 或 WHERE 子句。

接下来，from 的第一部分仅对按计划分组的每个特定计划的计划 ID 和成员计数进行预聚合。

现在，进入适当的 JOIN 子句以提取计划的详细信息以进行描述，然后是运营商名称的运营商，然后按您想要的任何方式订购...

```
SELECT
      C.CarName,
      P.PlnDescription,
      PerPlan.PerPlanCount,
      ( PerPlan.PerPlanCount / AllPlans.AllMembers ) as PcntOfAllMembers
   from
      ( select M.PlanID, COUNT(*) as PerPlanCount
           from Members M
           group by M.PlanID ) PerPlan
           Join Plans P
              ON PerPlan.PlanID = P.PlanID
              Join Carriers C
                 ON P.CarrierID = C.CarrierID,
      ( select COUNT(*) AllMembersCount
           from Members ) AllPlans 
   order by
      C.CarName,
      P.PlnDescription 
```

您的样本中的计划计数为 10，但没有任何迹象表明“2 方基本医疗”有多个子计划，因此我认为这不是每个数据的真实列。

但是，如果 10 代表“Blue Cross”有多少不同的计划，而“2-Party...”是其中一个计划，那将是一个不同的查询。

# java - 求和函数在 Java 中不起作用。

> ID：16112415
> 
> 赞同：1
> 
> 时间：2013-04-19T19:45:13.913
> 
> 标签：java

我是 Java 编程新手。我有一个项目应该汇总一系列输入并计算这些数字的平均值。现在，无论我输入什么值，总数都将为零。我被困住了。请帮忙。谢谢你。

```
 private class InputButtonListener implements ActionListener
   {
          public void actionPerformed(ActionEvent e)
          {  
                 for(int i=0; i<7; i++)
                 {
                       numInput = 0.0;
                       strInput = JOptionPane.showInputDialog(null, "How many hours did you sleep on day " + (i+1));
                       numInput = Double.parseDouble(strInput);
                       numInput +=total;                        
                 }
          }
   }
   private class CalcButtonListener implements ActionListener
   {
          public void actionPerformed(ActionEvent e)
          {
                 JOptionPane.showMessageDialog(null,"The total amount of sleep for the week is " + total + " hours");

                 JOptionPane.showMessageDialog(null,"The average amount of sleep for 7 days is " + avg + " hours");
          }
   }
   public static void main(String[] args)
          {
                 HoursSlept HS = new HoursSlept();
          } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:48:04.963

你的问题似乎在这里

```
numInput +=total; 
```

它应该是

```
total += numInput; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:47:35.423

它应该`total += numInput`代替`numInput += total`.

```
for(int i=0; i<7; i++)
{
    strInput = JOptionPane.showInputDialog(null, "How many hours did you sleep on day " + (i+1));
    numInput = Double.parseDouble(strInput);
    total += numInput;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:05:17.620

你不应该切换total和numInput吗？

```
for(int i=0; i<7; i++)
             {
                   numInput = 0.0;
                   strInput = JOptionPane.showInputDialog(null, "How many hours did you sleep on day " + (i+1));
                   numInput = Double.parseDouble(strInput);
                   total +=numInput;                        
             } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:49:56.047

+= 运算符的工作方式相反。

你的问题在这里：

```
numInput += total; 
```

应该

```
total += numInput; 
```

# android - 将图片分享到其他应用

> ID：16112419
> 
> 赞同：0
> 
> 时间：2013-04-19T19:45:46.620
> 
> 标签：android, image, share, send, android-image

我一直在努力解决这个问题。我有它。该应用程序正在将图片发送到任何其他应用程序。我尝试使用 WhatsApp、Gmail 等。但是，现在它无法正常工作。会是什么？包装问题？密钥库问题？现在，当我尝试使用 Gmail 时，附件会显示出来，但它看起来像一张带有名称的空图片。这意味着在智能手机上找不到文件。多谢你们。

```
private ShareActionProvider mShareActionProvider;

private void dragonFile(){
    Bitmap dragonFront = BitmapFactory.decodeResource(getResources(),R.drawable.phoenix_art);
    String extStorageDirectory = Environment.getExternalStorageDirectory().toString();
    OutputStream outputStream = null;
    File file = new File(extStorageDirectory, "phoenix_art.jpeg");
    try{  
        outputStream = new FileOutputStream(file);
        dragonFront.compress(Bitmap.CompressFormat.JPEG, 90, outputStream);
        outputStream.flush();
        outputStream.close();
    } catch (Exception e){
        e.printStackTrace();
    }

private Intent getDefaultShareIntent(){

    Intent shareIntent = new Intent();
    shareIntent.setType("image/jpeg");
    shareIntent.setAction(Intent.ACTION_SEND);
    dragonFile();
    File downloadedPic = new File(Environment.getExternalStorageDirectory().toString(), "phoenix_art.jpeg");
    shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(downloadedPic));
    return shareIntent;
}
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    getMenuInflater().inflate(R.menu.share_menu, menu);

    MenuItem item = menu.findItem(R.id.menu_item_share);

    mShareActionProvider = (ShareActionProvider) item.getActionProvider();

    mShareActionProvider.setShareIntent(getDefaultShareIntent());

    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:03:03.187

您可以使用 DDMS 上的文件资源管理器来验证文件是否实际创建？您应该能够看到该文件，然后将其拉出（从模拟器或设备）并放到您的开发计算机上。gmail 获取的文件只是一个名称但看起来为空的事实意味着 getDefaultShareIntent() 看到一个文件并将其正确附加到意图。这意味着它很可能在问题所在的 dragonfile() 中，尽管我不知道它是什么。

# jquery - Jquery选择隐藏源更改的目标？

> ID：16112421
> 
> 赞同：0
> 
> 时间：2013-04-19T19:46:03.913
> 
> 标签：jquery, jquery-chosen

我正在使用 Chosen jquery 插件，我有两个选择字段，一个是`source`，另一个是`target`

```
<select data-placeholder="Source language" class="chzn-select" id="os_source" style="width:200px;">
                    <option value=""></option> 
                    <option value="246">Somali</option>
                    <option value="239">Swahili</option>
                    <option value="259">Zulu</option>
                    <option value="237">Tigrinya</option>
                    <option value="261">Afrikaans</option>
                    <option value="236">Amharic</option>
                    <option value="265">Polish</option>
                    <option value="241">Czech</option>
                    <option value="3476">English</option>
                    <option value="281">German</option>
                    <option value="285">Romanian</option>
                    <option value="243">Arabic</option>
                    <option value="299">Chinese</option>
                    <option value="401">French</option>
                    <option value="402">Italian</option>
                    <option value="403">Russian</option>
                    <option value="404">Spanish</option>
                    <option value="405">Turkish</option>

              </select>

<select data-placeholder="Target language" class="chzn-select" id="os_target" multiple style="width:200px">
                    <option value=""></option> 
                    <option value="246">Somali</option>
                    <option value="239">Swahili</option>
                    <option value="259">Zulu</option>
                    <option value="237">Tigrinya</option>
                    <option value="261">Afrikaans</option>
                    <option value="236">Amharic</option>
                    <option value="265">Polish</option>
                    <option value="241">Czech</option>
                    <option value="3476">English</option>
                    <option value="281">German</option>
                    <option value="285">Romanian</option>
                    <option value="243">Arabic</option>
                    <option value="299">Chinese</option>
                    <option value="401">French</option>
                    <option value="402">Italian</option>
                    <option value="403">Russian</option>
                    <option value="404">Spanish</option>
                    <option value="405">Turkish</option>

              </select> 
```

我想在选择相同的源语言时隐藏目标语言（当用户在源中选择英语时，英语在目标中消失等等）

怎么能做到呢？

```
 $('#os_source').chosen().change(function() {
    var source = $(this).val();

        $('.chzn-results').val(source).hide();
         $("#os_target").trigger("liszt:updated");

}); 
```

这是演示 [http://jsfiddle.net/LUYcA/60/](http://jsfiddle.net/LUYcA/60/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:48:25.723

这应该有效：

```
$('#os_source').chosen().change(function(){
    $("#os_target option").attr("disabled",false);
    var source = $(this).find("option:selected").val();
    $("#os_target option[value="+source+"]").attr("disabled",true);
    $("#os_target").trigger("liszt:updated");
}); 
```

我没有使用的原因是它在标签`.hide()`上使用时存在一些跨浏览器问题。`option`

更新 JSFiddle：http: [//jsfiddle.net/LUYcA/61/](http://jsfiddle.net/LUYcA/61/)

# asp.net - 在 asp.net 4 中使用“路由数据”需要帮助（没有 MVC）

> ID：16112423
> 
> 赞同：1
> 
> 时间：2013-04-19T19:46:12.010
> 
> 标签：asp.net

我是asp.net 4的新手。如果这个问题很愚蠢，请原谅我。

我有一个 web 应用程序 tat 在带有 asp.net 3.5 的服务器上运行，我们将服务器迁移到 asp.net 4。现在我需要在 url 中使用不带问号的查询字符串。

我需要将 url 转换为`"www.website.com?user_name=test_usr"`to`"www.website.com/test_usr"`并将 test_usr 读入一个变量（查询字符串或路由数据）

我不想将我的应用程序架构更改为 MVC 模式。如果可能的话，有人可以指导我吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:48:30.773

可以在 .NET 4 中将路由与 Web 表单一起使用。

Scott Guthrie 对这里的主题有一个很好的概述：[http ://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs- 2010-and-net-4-0-series.aspx](http://weblogs.asp.net/scottgu/archive/2009/10/13/url-routing-with-asp-net-4-web-forms-vs-2010-and-net-4-0-series.aspx)

MSDN 网站上也有一个演练：http: [//msdn.microsoft.com/en-us/library/dd329551 (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/dd329551(v=vs.100).aspx)

**以下是我理解的步骤：**

1.  在 global.asax 中创建一个**RegisterRoutes()方法。**这应该包括调用`routes.MapPageRoute()`
2.  `RegisterRoutes()`从**Application_Start()**调用
***   使用`Page.GetRouteUrl()`from pages 在 ASP.NET 页面逻辑中形成链接**

# javascript - 如何查看是否有任何字段的值已更改，警告用户未保存的更改

> ID：16112424
> 
> 赞同：0
> 
> 时间：2013-04-19T19:46:12.453
> 
> 标签：javascript, forms, post

在我们为当地商会制作的相当大的自定义后端系统上工作，我们需要做的一件事是阻止他们点击子表单链接（在单独的页面上发布）以填充内容并丢失他们在此之前输入的更改或信息。

表格比较大，一般有30个或更多的字段。以前，我只是简单地使用 Coldfusion 进行检查，方法是根据他们所在的页面类型（新建与编辑）在 url 中传递一个简单的变量，但显然随着事情变得越来越复杂，这种基本方法并不令人满意。

它必须是动态的。

因此，基本上，如果用户在编辑页面上进行任何更改并尝试在公司地址部分单击“添加新地址”，它将检测所做的更改（困难部分），并禁用链接（这是简单部分）添加一个新地址，直到他通过提交（循环回到同一页面）保存主表单。

简单地对字段使用 onChange 属性是行不通的，因为很多人已经将它用于某些功能。

我试过弄乱一些不同的脚本，其中许多涉及 $(":input") 过滤器。

这个小提琴在这里：http: [//jsfiddle.net/AFahj/50/](http://jsfiddle.net/AFahj/50/)

```
var propertyChangeUnbound = false;
$("#testbox").on("propertychange", function(e) {
    if (e.originalEvent.propertyName == "value") {
        alert("Value changed!");
    }
});

$("#testbox").on("input", function() {
    if (!propertyChangeUnbound) {
        $("#testbox").unbind("propertychange");
        propertyChangeUnbound = true;
    }
    alert("Value changed!");
}); 
```

这个小提琴代码分为两部分。一种用于更现代的浏览器（下）和旧的 IE9 之前的垃圾（上）。

它演示了我想要的基本功能，但问题是表单本身的范围。它们很大。我需要足够灵活的东西来运行并获取单个脚本中的所有输入，并准备好根据更改执行操作。

那么我将如何创建一个脚本来观察是否已编辑任何输入（即使它们有很多）并执行适当的操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:50:29.813

jQuery 的伪选择器[**`:input`**](http://api.jquery.com/input-selector/)是你的朋友。

它选择所有表单输入，包括选择框、文本区域和其他输入。

在过去，我使用过这样的片段。

```
 // give 500 ms delay before detecting changes to allow
   // allow programmatic changes to input values
   setTimeout(function() {
           $(":input").on('keydown change', function(e) {
                   // when the change happens attach your event to deal with it
                   $(window).on('beforeunload', function(e) {
                           return "It seems you have unsaved changes.  If you continue they will be lost";
                   });

                   // then remove the change detection (since we know it has changed already
                   $(":input").off('keydown change');
           });

           // Allow the thing to happen in certain circumstances.
           $("form").on('submit', function() {
                   $(window).off('beforeunload');
           });
   }, 500); 
```

# java - Java中匿名内部类可访问的变量

> ID：16112426
> 
> 赞同：0
> 
> 时间：2013-04-19T19:46:13.403
> 
> 标签：java, anonymous-inner-class

我想使用匿名内部类来处理程序中对象的鼠标操作。但是，根据参数，我希望内部类的行为有所不同。例如：

```
Rectangle r1 = rectangleBuilder (Color.Red);
Rectangle r2 = rectangleBuilder (Color.Blue);

public Rectangle rectangleBuilder (final Color c) {
    r = new Rectangle (100, 100, c);

    r.dragListener = new DragListener () {
        @Override
        public void drag (double x, double y) {
            if (c == Color.Red) {
                r.setPosition (x, y);
            }
            if (c == Color.Blue) {
                r.setPosition (2 *x, 2 *y);
            }
        }
    }

    return r;
} 
```

这个想法是，在创建对象时，拖动对象时的行为由其颜色决定。这工作正常，但现在由于某种原因，我收到一个异常，说 c (Color) 为空。我想知道这种方法在Java中是否可行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:14:56.733

如果jvm说有一个空指针，就说明这个指针是空的。使用此处的代码，只有一个解决方案是使用空指针调用的。检查堆栈跟踪，您会发现使用空对象调用此方法的位置。

如果指针为空是正常的，则可以定义默认颜色。

```
if (c == null)
    r = new Rectangle(100, 100, Color.black); 
```

并在 drag() 方法中处理这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:58:36.860

原来这是一个与 Java 完全无关的奇怪问题。枚举 Color 在另一个恰好有编译错误的类中。显然 Eclipse 将 Color 类的每个实例都视为空。

# d3.js - 跟进：使用图像的drawing-sequence-logos-in-d3

> ID：16112429
> 
> 赞同：0
> 
> 时间：2013-04-19T19:46:31.967
> 
> 标签：d3.js

跟进这个问题：[在D3中绘制序列标志](https://stackoverflow.com/questions/14341800/drawing-sequence-logos-in-d3/)

这是一个非常好的例子（感谢您的时间）。

我试图修改使用图像而不是字母（如 cmonkey 建议的那样），但到目前为止没有运气，因为高度调整。（它不会像我希望的那样拉伸高度）。

任何见解都会非常受欢迎。

```
column
    .selectAll("images")
    .data( function(d) { return d.bits; })
    .enter().append("svg:image")
    .attr("xlink:href", function(e){ 
        if (e.letter == "A"){return "a.png"}
        if (e.letter == "T"){return "t.png"}
        if (e.letter == "G"){return "g.png"}
        if (e.letter == "C"){return "c.png"}
        ;})
    .attr("y", function(e) { return y(e.y0); })
    .attr("x", function(e) { return x(e.position); })
    .attr( "height", function(e) { return ( y(e.y0) - y(e.y1) ) ; } )
    .attr( "width", function(e) { return ( x.rangeBand() ) ; } ); 
```

有什么见解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T03:31:32.527

您需要添加具有字母png原始高度的图像，然后使用转换`translate`将其移动到位并`scale`拉伸它。

一个很好的解释可以在[这里](http://commons.oreilly.com/wiki/index.php/SVG_Essentials/Transforming_the_Coordinate_System)找到。

这是一个非常基本的示例：

[http://jsfiddle.net/Yb2kr/](http://jsfiddle.net/Yb2kr/)

```
var svg = d3.selectAll("body").append("svg")
        .attr("height",600)
        .attr("width",600)

svg.append("svg:image")
   .attr("xlink:href", "https://encrypted.google.com/intl/en_ALL/images/logos/images_logo_lg.gif")
   .attr("width", 200)
   .attr("height", 100)

svg.append("svg:image")
   .attr("xlink:href", "https://encrypted.google.com/intl/en_ALL/images/logos/images_logo_lg.gif")
   .attr("width", 200)
   .attr("height", 100)
   .attr("transform", "translate(0,100) scale(1,2)") 
```

我不确定图像是否是更好的解决方案.. 根据它们被拉伸的程度，它们可能会变形。另一方面，字体应该保持它们的清晰度。

# python - 如何将递归转换为尾递归

> ID：16112432
> 
> 赞同：1
> 
> 时间：2013-04-19T19:46:42.483
> 
> 标签：python, recursion, tail-recursion

是否总是可以将递归转换为尾递归？

我很难将以下 Python 函数转换为尾递归函数。

```
def BreakWords(glob):
  """Break a string of characters, glob, into a list of words.

  Args:
    glob: A string of characters to be broken into words if possible.

  Returns:
    List of words if glob can be broken down. List can be empty if glob is ''.
    None if no such break is possible.
  """
  # Base case.
  if len(glob) == 0:
    return []

  # Find a partition.
  for i in xrange(1, len(glob) + 1):
    left = glob[:i]
    if IsWord(left):
      right = glob[i:]
      remaining_words = BreakWords(right)
      if remaining_words is not None:
        return [left] + remaining_words

  return None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-28T00:39:39.837

我不确定是否总是如此，但大多数递归函数都可以实现为尾递归。此外，尾递归与尾递归优化不同。

## 尾递归和“常规”的区别

### 递归函数中必须存在两个元素：

1.  递归调用
2.  一个记录返回值的地方。

### “常规”递归函数将 (2) 保留在堆栈帧中。

常规递归函数中的返回值由两种类型的值组成：

*   其他返回值
*   拥有函数计算的结果

让我们看一个例子：

```
def factorial(n):
    if n == 1 return 1
    return n * factorial(n-1) 
```

例如，框架 f(5) “存储”了它自己的计算结果 (5) 和 f(4) 的值。如果我调用阶乘（5），就在堆栈调用开始崩溃之前，我有：

```
 [Stack_f(5): return 5 * [Stack_f(4): 4 * [Stack_f(3): 3 * ... [1[1]] 
```

请注意，除了我提到的值之外，每个堆栈都存储函数的整个范围。因此，递归函数 f 的内存使用量为 O(x)，其中 x 是我必须进行的递归调用的数量。所以，如果我需要 1kb 的 RAM 来计算阶乘（1）或阶乘（2），我需要 ~100k 来计算阶乘（100），依此类推。

### 一个尾递归函数将 (2) 放入它的参数中。

在尾递归中，我使用参数将每个递归帧中的部分计算结果传递给下一个。让我们看看我们的阶乘示例，尾递归：

```
def factorial(n):
    def tail_helper(n, acc):
        if n == 1 or n == 2: return acc
        return tail_helper(n-1, acc + n)
return tail_helper(n,0) 
```

让我们看看它在阶乘（4）中的帧：

```
[Stack f(4, 5): Stack f(3, 20): [Stack f(2,60): [Stack f(1, 120): 120]]]] 
```

看到差异了吗？**在“常规”递归调用中，返回函数递归地组成最终值。在尾递归中，他们只引用基本情况（最后一个评估）**。我们称**accumulator**为跟踪旧值的参数。

## 递归模板

常规递归函数如下：

```
def regular(n)
    base_case
    computation
    return (result of computation) combined with (regular(n towards base case)) 
```

要将其转换为尾递归，我们：

*   引入一个携带累加器的辅助函数
*   在主函数中运行辅助函数，将累加器设置为基本情况。

看：

```
def tail(n):
    def helper(n, accumulator):
        if n == base case:
            return accumulator
        computation
        accumulator = computation combined with accumulator
        return helper(n towards base case, accumulator)
    helper(n, base case) 
```

## 你的例子：

我做了这样的事情：

```
def BreakWords(glob):
    def helper(word, glob, acc_1, acc_2):
        if len(word) == 0 and len(glob) == 0:
            if not acc_1:
                return None
            return acc
        if len(word) == 0:
            word = glob.pop[0]
            acc_2 = 0

        if IsWord(word.substring[:acc_2]):
            acc_1.append(word[:acc_2])
            return helper(word[acc_2 + 1:], glob, acc_1, acc_2 + 1)

        return helper(word[acc_2 + 1:], glob, acc_1, acc_2 + 1)

    return helper("", glob, [], 0) 
```

为了消除您所做的 for 语句，我使用 2 个累加器执行了递归辅助函数。一个存储结果，一个存储我当前正在尝试的位置。

## 尾调用优化

由于尾调用堆栈的无边界情况没有存储任何状态，因此它们并不那么重要。一些语言/解释器然后用新堆栈替换旧堆栈。因此，由于没有限制调用次数的堆栈帧，**尾调用的行为就像一个 for-loop**。

但不幸的是，Python 不是这些情况之一。当堆栈大于 1000 时，您将收到 RunTimeError。Guido[先生](http://neopythonic.blogspot.com.au/2009/04/tail-recursion-elimination.html) 认为，由于尾调用优化（由抛出的帧引起）导致调试目的失去的清晰度比功能更重要。真可惜。Python 有很多很酷的功能性东西，尾递归在它之上会很棒：/

# java - 从 Blender 导出的对象无法正确渲染

> ID：16112440
> 
> 赞同：1
> 
> 时间：2013-04-19T19:47:09.933
> 
> 标签：java, android, opengl-es

我最近开始学习 OpenGL，我想从手动编写的立方体中进步，并想使用从 Blender 导出的模型。最简单的方法似乎是解析 .obj 文件，所以我做了一个解析器。

它有效但不太好，当我想了解灯光时，我偶然发现了一个问题。反射和阴影根本不对。他们对光的位置毫无意义。所以我以线框模式渲染，令我惊讶的是，有一些额外的面孔不应该存在。

截图：http: [//img5.imageshack.us/img5/5937/582ff91c155b466495b2b02.png](http://img5.imageshack.us/img5/5937/582ff91c155b466495b2b02.png)

然后，我使用解析的数据生成 .obj 文件，并使用 diff 工具将其与原始 .obj 文件进行比较，似乎没有任何问题。有一些缺失的零，例如 0.01 而不是 0.0100，但仅此而已。

这是我的解析器： http: [//pastebin.com/Aw8mdhJ9](http://pastebin.com/Aw8mdhJ9)

这是我使用解析数据的地方：pastebin.com/5Grt1WGf

这是我的 toFloatBuffer：

```
public static FloatBuffer makeFloatBuffer(float[] arr) {
    ByteBuffer bb = ByteBuffer.allocateDirect(arr.length * 4);
    bb.order(ByteOrder.nativeOrder());
    FloatBuffer fb = bb.asFloatBuffer();
    fb.put(arr);
    fb.position(0);
    return fb;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:28:32.457

在网上询问后，我发现了很多不同的意见。通过更多的研究，我发现了问题所在。问题是法线是每个面的，而对于 OpenGL，它们需要每个顶点。

为了解决这个问题，我重新排列了解析的数据并制作了新的索引。问题是我现在使用更多索引，并且由于 OpenGL ES 中的 GL_UNSIGNED_SHORT 限制，我的顶点数变得更加有限。

这是我用来修复数组的代码：

```
private static void makeThingsWork() {
    int n_points = faces.length * 3;
    short count = 0;
    int j = 0;

    float[] fixedvertices = new float[n_points];
    float[] fixednormals = new float[n_points];
    short[] fixedfaces = new short[faces.length];

    for(int i = 0; i < n_points; i+=3)
    {
        j = i/3;
        fixedvertices[i] = vertices[faces[j]*3];
        fixedvertices[i+1] = vertices[faces[j]*3 + 1];
        fixedvertices[i+2] = vertices[faces[j]*3 + 2];

        fixednormals[i] = normals[normalIndices[j]*3];
        fixednormals[i+1] = normals[normalIndices[j]*3 + 1];
        fixednormals[i+2] = normals[normalIndices[j]*3 + 2];

        fixedfaces[i/3] = count;
        count++;
    }

    vertices = fixedvertices;
    normals = fixednormals;
    faces = fixedfaces;

} 
```

# mysql - WordPress：从自定义数据库表生成页面

> ID：16112443
> 
> 赞同：0
> 
> 时间：2013-04-19T19:47:18.043
> 
> 标签：mysql, wordpress

我正在为当前的项目大量使用 WordPress。我将用户输入的数据存储到两个自定义数据库表中（尽管仍在 wp 数据库中）。

除了我需要收集的信息外，我还将它们保存`wp user id`到数据库中。我已经生成了一个我希望每个用户都能够访问的 URL，以查看他们输入的结果。这个 URL 的结构很简单 http: // `domainname`//`username``searchname`

现在很明显，我可以将其输出为 URL 并且可以单击，但 WordPress 显然只是吐出 404 模板。

在能够访问此链接并根据模板吐出数据方面，我有点需要模拟帖子页面所具有的相同功能。

我意识到自定义帖子类型听起来非常适合这种事情。但是我需要用户能够从前端提交数据，我不确定自定义帖子类型是否可行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:50:14.183

我认为 WP_Rewrite 类是你正在寻找的：

> WP_Rewrite 是 WordPress 的类，用于管理允许您使用 Pretty Permalinks 功能的重写规则。它有几种方法可以从数据库中的值生成重写规则。它在更新重写规则时在内部使用，也用于查找特定帖子、页面、类别存档等的 URL。

[它的文档页面](http://codex.wordpress.org/Class_Reference/WP_Rewrite)中有几个示例。有关更多动手教程，请查看此[博客文章](http://www.hongkiat.com/blog/wordpress-url-rewrite/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-23T13:13:49.643

从我目前所读到的内容来看，使用自定义数据库表应该保留在默认工具无法处理任务的情况下。

默认工具的好处是您不必创建自定义功能（以及随之而来的所有细节）来搜索、操作和显示数据。

您可以有一个名为 的 CPT `User Feedback`，配置为`hierarchical`，每个父帖子对应一个用户，子帖子将是用户输入数据。
或者它可能是非分层的，自定义分类法将在帖子和用户之间架起一座桥梁。

在前端提交后，您只需[`wp_insert_post`](http://codex.wordpress.org/Function_Reference/wp_insert_post)将信息作为帖子类型（如果需要使用标题和内容作为保存字段）及其关联的元数据（其他字段）添加到数据库中。

如果您将 CPT`supports`参数设置为`false`，它不会在编辑屏幕中显示任何内容，而是在`Publish`元框中显示任何内容。并且所有作为元数据存储的提交信息都可以通过自定义元框显示。

完成此设置后，如果您需要微调 URL，是时候使用`WP_Rewrite`.

一般而言^(`1`)，这就是[JetPack 管理](http://plugins.svn.wordpress.org/jetpack/tags/2.2.2/modules/contact-form/grunion-contact-form.php)其联系表中的反馈的方式。

^(`1`检查代码，实际上使用了一些有趣的技术，值得复制。)

* * *

**相关帖子**：

*   [如何在 Wordpress 中集成自定义数据库表并使用 Wordpress 功能](https://wordpress.stackexchange.com/q/6465/12615)

*   [WordPress 3.0 和自定义帖子类型](http://ottopress.com/2010/wordpress-3-0-and-custom-post-types/)

*   [何时（不）使用自定义分类](http://ottopress.com/2011/when-to-not-use-a-custom-taxonomy/)

# angularjs - 如何在 AngularJS 指令模板中动态定义要使用 ng-click 调用的函数

> ID：16112445
> 
> 赞同：9
> 
> 时间：2013-04-19T19:47:29.817
> 
> 标签：angularjs, angularjs-directive

我正在尝试基于模型动态生成表单输入和关联的操作菜单。我能够传递要使用的字段和菜单，但我不知道如何配置 ng-click 以调用模型中定义的相应函数。见小提琴：http: [//jsfiddle.net/ahonaker/nkuDW/](http://jsfiddle.net/ahonaker/nkuDW/)

HTML：

```
var myApp = angular.module('myApp',[]);

myApp.directive('myDirective', function($compile) {
    return {
        restrict: "E",
        replace: true,
        scope : {
            field: '=',
            label: '=',
            menu: '='
        },
        link:  function (scope, element, attrs) {
            element.html('{{label}}: <input ng-model="field"> <ul ng-repeat="item in menu"<li><a ng-click="item.func">{{item.title}}</a></li></ul>');
             $compile(element.contents())(scope);
        }
    }
});
//myApp.factory('myService', function() {});

function MyCtrl($scope) {
    $scope.status = 'You have not picked yet';

    $scope.menu = [
        { "title" : "Action 1", "func" : "ActionOne()"},
        { "title" : "Action 2", "func" : "ActionTwo()"},
        ]

    $scope.fieldOne = "I am field 1";
    $scope.fieldTwo = "I am field 2";

    $scope.ActionOne = function() {
         $sopce.status = "You picked Action 1";   
     }    

    $scope.ActionOne = function() {
         $sopce.status = "You picked Action 2";   
     }            
} 
```

JS：

```
<div ng-app = "myApp">
    <div ng-controller="MyCtrl">
        <ul>
            <p><my-directive field="fieldOne" label="'Field 1'" menu="menu"></my-directive></p>
            <p><my-directive field="fieldTwo" label="'Field 2'" menu="menu"></my-directive></p>
        </ul>
        Hello, {{status}}!
</div>
</div> 
```

任何帮助，将不胜感激。我在指令中尝试了以下 ng-click 方法

```
ng-click={{item.func}}
ng-click="item.func"
ng-click="{{item.func}}" 
```

我究竟做错了什么？或者有没有更好的方法来做到这一点（包括要调用的功能的菜单结构必须来自模型，以便我构建通用表单生成能力）。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-19T20:01:30.030

这是你固定的小提琴：http: [//jsfiddle.net/nkuDW/1/](http://jsfiddle.net/nkuDW/1/)

它有很多问题。

1.  你有一个错字`$scope`4 次作为`$sopce`.
2.  如果您希望其中的项目`$scope.menu`可以访问`ActionOne`and `ActionTwo`，则需要在您定义的位置上方定义那些 Action 函数`$scope.menu`（这正是 JavaScript 在将函数分配给变量时的工作方式）。
3.  你已经`ActionOne`定义了两次，第二个应该在哪里`ActionTwo`。
4.  ng-click 期待一个方法调用，而不是一个指向函数的指针，所以它应该是`ng-click="item.func()"`.
5.  您希望您的菜单项具有指向函数的指针，但您已将它们定义为字符串......即使您`"ActionOne()"`去掉引号，它仍然无法工作，原因有两个：
    1.  `ActionOne`在 MyCtrl 中不作为函数存在，而是需要将其引用为`$scope.ActionOne`
    2.  您只需要一个指向 ActionOne 的指针，此时您实际上并不想调用它。由于括号，两个动作都会在 MyCtrl 初始化时被调用。

在进入 Angular 之前了解 JavaScript 的基础知识可能是一个好主意，因为 Angular 假设您对语言的细微差别有很好的理解。Douglas Crockford提供的[一系列视频](http://www.youtube.com/playlist?list=PL5586336C26BDB324)可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-17T16:50:22.193

我不想处理在我的 Angular 应用程序中包含 html 代码、指令或 eval 的使用。所以我只是将我现有的函数包装在一个函数中：

```
$scope.get_results = function(){

    return {
            message: "A message", 
            choice1: {message:"choice 1 message", f: function(){$scope.alreadyDefinedFunction1()}},
            choice2: {message:"choice 2 message", f: function(){$scope.alreadyDefinedFunction2()}},
        };
} 
```

在不同的功能中：

```
$scope.results2 = $scope.get_results(); 
```

html中的使用片段：

```
<ul class="dropdown-menu scroll-div">
  <li><a ng-click="results2.choice1.f()">{{results_2_menu.choice1.message}}</a></li>
  <li><a ng-click="results2.choice2.f()">{{results_2_menu.choice2.message}}</a></li>
</ul> 
```

基于这个 js 小提琴：http: [//jsfiddle.net/cdaringe/FNky4/1/](http://jsfiddle.net/cdaringe/FNky4/1/)

# cocoa-touch - 查找导致游戏冻结的位置和错误的调试方法

> ID：16112449
> 
> 赞同：8
> 
> 时间：2013-04-19T19:47:36.783
> 
> 标签：cocoa-touch, debugging, cocos2d-iphone

我最近遇到了一个我无法理解的错误。我正在使用 Cocos2D 开发的游戏只是在某个随机点冻结——它得到一个 SIGSTOP——我找不到原因。我可以使用什么工具（以及如何使用它）来找出错误发生的位置以及导致错误的原因？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T20:30:08.093

[Jeremy 建议](https://stackoverflow.com/questions/16112449/debugging-methods-for-finding-the-location-and-error-thats-causing-a-game-to-fr#comment23010864_16112449)停止在调试器中是一个很好的建议。

有一种非常快速的方法可以调查冻结（或任何性能问题），尤其是当它不容易重现时。你必须有一个方便的终端（所以你需要在 iOS 模拟器或 Mac OS X 上运行，而不是在 iOS 设备上）。

当挂起时弹出到终端并运行：

```
示例 YourProgramName

```

（如果您的程序名称中有空格，则将其用引号括起来。`sample "My Awesome Game"`）`sample`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:37:25.987

我不同意上面[Aaron Golden 的回答](https://stackoverflow.com/questions/16112449/debugging-methods-for-finding-the-location-and-error-thats-causing-a-game-to-fr/16113007#16113007)，因为在设备上运行对于获得应用程序冻结的真实案例非常有用。模拟器有更多的内存，*并且不能*以准确的方式再现设备的硬件（例如，帧速率在某些情况下较低）。

“显然”，您需要在[Xcode](http://en.wikipedia.org/wiki/Xcode)上连接您的设备（使用开发人员配置文件）并查看控制台终端以查找用户 @AaronGolden 建议的跟踪。

如果这些还不够，您可能希望在 Xcode 中启用通用异常断点来捕获更多堆栈跟踪消息。

当我开始学习 Cocos2D 时，我的应用程序经常死机。这是常见原因的列表：

*   我没有使用精灵表，因此帧速率急剧下降
*   我使用了太多内存（太多高清精灵。看看[TexturePacker](http://www.codeandweb.com/texturepacker)并使用 pvr.ccz 或 pvr.gz 格式；它将内存分配减少了一半）

使用[工具](https://stackoverflow.com/questions/9541153/where-did-instruments-go-in-xcode-4-3)来分析您的应用程序的内存警告（例如，查看分配工具并查找内存警告）。

# c# - C# 代码中使用的这种自定义查询语法有什么问题？

> ID：16112450
> 
> 赞同：0
> 
> 时间：2013-04-19T19:47:42.547
> 
> 标签：c#, mysql, sql

查询如下所示：

```
string query = "IF NOT EXISTS(
 SELECT * from clienti 
 where CodCliente=  ' " + id + " ' 
 AND NomeCliente= ' " + emri + " ' 
 AND RagioneSociale=' " + ragSoc + " ' 
 AND PartitaIVA=' " + piva + " ') 

Insert INTO clienti VALUES(
 ' " + id + 
 " ',' " + emri + 
 " ',' " + ragSoc + 
 " ',' " + piva + " ') 
 else 
  UPDATE clienti 
  SET(' " + id + " ',' " + emri + " ',' " + ragSoc + " ',' " + piva + " ')"; 
```

我只是不断遇到以下相同的问题：

`You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF NOT EXISTS(SELECT * from clienti where CodCliente= ' 1 ' AND NomeCliente= ' ' at line 1`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:16:58.737

您在所有变量之前和之后连接空格。另外，确保所有变量都是字符串格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:58:44.733

我认为您缺少`THEN`and`END IF`关键字。查看[mysql手册](http://dev.mysql.com/doc/refman/5.0/en/if.html)

```
IF search_condition THEN statement_list
    [ELSEIF search_condition THEN statement_list] ...
    [ELSE statement_list]
END IF 
```

# java - 卡片类中的 Java 枚举在主类中输出并在卡片组中构建卡片组

> ID：16112454
> 
> 赞同：0
> 
> 时间：2013-04-19T19:47:58.687
> 
> 标签：java

嘿伙计们，我是这个网站的新手，但一直在看很多关于`enum`s 的信息，我有点弄清楚它们，但可以使用一些帮助。我要做的是让我的卡片类中的卡片构造函数接受 int 值并返回与这些值相关的等级和花色。这就是我在 Card 类中使用的内容。

```
 package blackjack;

public class Card {
    static Rank rank;
    static Suit suit;

    public enum Rank{ACE(1),TWO(2),THREE(3),FOUR(4),FIVE(5),SIX(6),SEVEN(7),
        EIGHT(8),NINE(9),TEN(10),JACK(11),QUEEN(12),KING(13);

        private int code;

        public int getCode() {
            return code;
        }

        private Rank(int code) {
            this.code = code;
        }

        public static Rank valueOf(int code) {
            for (Rank rank: Rank.values()) { 
                if (rank.getCode()==code) 
                    return rank;
             }
            throw new RuntimeException("INVALID CODE");
        }

        @Override public String toString() {
            String s = super.toString();
            return s.substring(0, 1) + s.substring(1).toLowerCase();
        }
    }

    public enum Suit{SPADES(1),HEARTS(2),CLUBS(3),DIAMONDS(4);

        private int code;

        public int getCode() {
            return code;
        }

        private Suit(int code) {
            this.code = code;
        } 

        public static Suit valueOf(int code) {
            for (Suit suit: Suit.values()) { 
                if (suit.getCode()==code) 
                    return suit;
             }
            throw new RuntimeException("INVALID CODE");
        }
        @Override public String toString() {
            String s = super.toString();
            return s.substring(0, 1) + s.substring(1).toLowerCase();
        }
    }

    public Card(int rank,int suit) {
        this.suit = Suit.valueOf(suit);
        this.rank = Rank.valueOf(rank);
    }

    public static void setRank(Rank rank) {
        Card.rank = rank;
    }

    public static Rank getRank() {
        return rank;
    }

    public static void setSuit(Suit suit) {
        Card.suit = suit;
    }

    public static Suit getSuit() {
        return suit;
    }
} 
```

在我的名为 BlackJack 的主类中，我真正想做的就是创建一张新卡，并使用我在 Card 中创建的构造函数中的整数为其分配等级和花色，然后输出它以确保其正常工作。我不断收到这个我无法弄清楚的疯狂错误。任何帮助将不胜感激！这是我的二十一点/主要课程。

```
 package blackjack;

public class BlackJack {    

    public static void main(String[] args) {

        Card c1 = new Card(1,1);
        System.out.println(c1.rank.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:17:32.283

我建议进行以下编辑：

1.  使枚举静态
2.  如果你使用`valueOfAlternate`你可以去掉代码，这只有在你的卡片有连续编号并且你的声明是按这个顺序的时候才有效，因为值是从 0 开始的，我们需要从参数中减去一个
3.  提供一个直接接受参数的构造函数
4.  使 Cards 的字段以及它们的 setter 和 getter 都是非静态的。

```
 package blackjack;  

public class Card {
    private final Rank rank;
    private final Suit suit;

    public enum Rank {
        ACE(1),TWO(2),THREE(3),FOUR(4),FIVE(5),SIX(6),SEVEN(7),
        EIGHT(8),NINE(9),TEN(10),JACK(11),QUEEN(12),KING(13);

        private final int code;

        public int getCode() {
            return code;
        }

        private Rank(int code) {
            this.code = code;
        }

        public static Rank valueOf(int code) {
            for (Rank rank: Rank.values()) { 
                if (rank.getCode()==code) 
                    return rank;
             }
            throw new RuntimeException("INVALID CODE");
        }

        public static Rank valueOfAlternate(int code) {
            return Rank.values()[code-1];
        }

        @Override public String toString() {
            String s = super.toString();
            return s.substring(0, 1) + s.substring(1).toLowerCase();
        }
    }

    public enum Suit{
        SPADES(1),HEARTS(2),CLUBS(3),DIAMONDS(4);

        private final int code;

        public int getCode() {
            return code;
        }

        private Suit(int code) {
            this.code = code;
        } 

        public static Suit valueOf(int code) {
            for (Suit suit: Suit.values()) { 
                if (suit.getCode()==code) 
                    return suit;
             }
            throw new RuntimeException("INVALID CODE");
        }

        public static Suit valueOfAlternate(int code) {
            return Suit.values()[code-1];
        }

        @Override public String toString() {
            String s = super.toString();
            return s.substring(0, 1) + s.substring(1).toLowerCase();
        }
    }

    public Card(int rank,int suit) {
        this.suit = Suit.valueOf(suit);
        this.rank = Rank.valueOf(rank);
    }

    public Card(Rank rank, Suit suit) {
        this.suit = suit;
        this.rank = rank;
    }

    public Rank getRank() {
        return rank;
    }

    public Suit getSuit() {
        return suit;
    }

} 
```

没有你疯狂的错误描述，这是我能提供的最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:57:59.623

您可以为您的枚举提供一个具有多个参数的构造函数。您还可以覆盖方法（如`toString`）并在枚举中创建自己的方法（如`getValue`）。

所以你的卡片类可能看起来像这样：

```
public class Card {

    public Enum Suit {

        SPADE(0, "Spade"), HEART(1, "HEART"), ... ;

        private int code = -1;
        private int name = null;

        private Suit(int code, String name) {
            this.code = code;
            this.name = name;
        }

        public int getValue() { return code; }

        @Override
        public String toString() { return name; }

    }

    private Suit suit = null;
    private Rank rank = null;

    public Card(Suit suit, Rank rank) {
        this.suit = suit;
        this.rank = rank;
    }

    public Suit getSuit() { return suit; }
    public Rank getRank() { return rank; }

    @Override
    public String toString() {
        return suit.toString() + "-" + rank.toString();
    }
} 
```

# c# - 试图分隔整数和小数 asp.net c#

> ID：16112457
> 
> 赞同：1
> 
> 时间：2013-04-19T19:48:04.270
> 
> 标签：c#, asp.net

我正在寻找指导，有人可以帮助我吗？

我需要将持续时间的值分成整数和小数。

编辑：我在一页中有一个文本框。如果有人输入 1.5 并且它存储在持续时间中，我想在另一个页面中检索它，我想将整数存储在文本框中，十进制数将根据响应从下拉列表中选择一个值。

抱歉，我意外添加了两次持续时间。

```
context.Response.Write(dr["Title"].ToString()
    + '|' + dr["CourseId"].ToString() + '|' + dr["duration"].ToString()
 + '|' + dr["Code"].ToString() + '|'
    + dr["Category"].ToString() + School.NewLine); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-19T19:55:58.850

如果您尝试拆分的值是数字，请尝试以下操作：

```
decimal number = 12.34;
int wholePart = decimal.Truncate(number);
decimal fractionPart = number - wholePart; 
```

如果 is 是一个字符串，CLandry 的答案应该有效，duration[0] 将是整个部分，duration[1] 将是小数部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T19:52:54.730

```
var duration = dr["duration"].ToString().Split(CultureInfo.InvariantCulture.NumberFormat.NumberDecimalSeparator);
int durationWhole = Int32.Parse(duration[0]);
int durationDecimal = Int32.Parse(duration[1]); 
```

持续时间将是一个字符串数组。duration[0] 是小数点前的部分，duration[1] 是小数点后的部分。

拆分是通过使用它的文化的小数分隔符完成的，因此它也应该在全局范围内工作。

根据您问题中的编辑，我已经更新了答案，以便为您提供数字结果。现在您可以根据需要使用数字或字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:55:17.300

```
context.Response.Write(dr["Title"].ToString()
    + '|' + dr["CourseId"].ToString() + '|' + dr["duration"].ToString().Split('.')[0]
    + '|' + dr["duration"].ToString().Split('.')[1] + '|' + dr["Code"].ToString() + '|'
    + dr["Category"].ToString() + School.NewLine); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:55:46.897

您可以使用 Substrings 和 IndexOf：

```
{ context.Response.Write(
    dr["Title"].ToString() + '|' + 
    dr["CourseId"].ToString() + '|' + 
    dr["duration"].ToString().Substring(0, dr["duration"].ToString().IndexOf(".")) + '|' + 
    dr["duration"].ToString().Substring(dr["duration"].ToString().IndexOf("."), dr["duration"].ToString().Length()) + '|' + 
    dr["Code"].ToString() + '|' + 
    dr["Category"].ToString() + 
    School.NewLine);
} 
```

# c# - 如何在 C# 中使用字符串变量作为数据类型名称

> ID：16112459
> 
> 赞同：0
> 
> 时间：2013-04-19T19:48:04.987
> 
> 标签：c#, list

我有一个单词列表：

```
List<string> listofwords;

public void list()
{
   listofwords = new List<string>();
   listofwords.Add("tackle");
   listofwords.Add("hinder");
   listofwords.Add("mentor");
} 
```

每个单词都包含多个数据：

```
public List<string> tackle;
public List<string> hinder;
public List<string> mentor;

public void A()
{  
   mentor = new List<string>();
   mentor.Add("tern");
   mentor.Add("tome");
   mentor.Add("tone");

   tackle = new List<string>();
   tackle.Add("alce");
   tackle.Add("cake");
   tackle.Add("calk");
   tackle.Add("cate");
   tackle.Add("kale");
   tackle.Add("lace");

   hinder = new List<string>();
   hinder.Add("deni");
   hinder.Add("dine");
 } 
```

在按钮单击事件中，我想检查一个列表。列表的名称存储在字符串变量*val*中：

```
private void button1_Click(object sender, EventArgs e)
{
   if (val.Contains(textBox1.Text )))
      val.Remove(textBox1.Text);
} 
```

如何使用*val*检查列表？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T19:49:52.967

考虑使用[字典](http://msdn.microsoft.com/en-us/library/xfhwa508.aspx)来解决这个问题。键类型应该是`String`，值类型应该是`List<String>`。

您的代码将如下所示：

```
_listOfWords = new Dictionary<String, List<String>>();
_listOfWords.Add("mentor", new List<String>
                                    {
                                        "tern",
                                        "tome",
                                        "tone"
                                    });
_listOfWords.Add("tackle", new List<String>
                                    {
                                        "alce",
                                        "cake",
                                        // etc.
                                    }); 
```

然后，您可以从字典中获取单词的“数据”。`List<String> list = _listOfWords[val];`并随心所欲地使用它。

# javascript - simplemodal 嵌入元素没有从键盘获得焦点

> ID：16112461
> 
> 赞同：1
> 
> 时间：2013-04-19T19:48:13.473
> 
> 标签：javascript, focus, simplemodal

我的 .aspx 的简单 simplemodal 包含一个用于回发的 asp:button。鼠标悬停，它会做出反应。单击，它可以工作。点击 ESC 并关闭对话框。

但我不能按到那个关闭按钮。我在模式中添加了一个直接输入按钮和一个文本框，它们也没有获得焦点。也无法在 onShow 代码中获得焦点。所以对话框不能单独与键盘一起使用。不能接受的。

SimpleModal 怎么可能使焦点不起作用？以及如何使焦点再次起作用？

（jQuery 1.9.1、SM 1.4.4、Windoze 7、IE8（是的，我同意……组织标准））

# sql - 在值列表中查找值列表

> ID：16112467
> 
> 赞同：1
> 
> 时间：2013-04-19T19:48:32.180
> 
> 标签：sql, sql-server

我正在尝试编写一个带有 where 子句的 sql，它检查列表中的任何元素是否在另一个列表中。有没有更短的方法来完成这个而不是检查第一个列表的每个成员？

```
SELECT * from FOO
WHERE FOO.A IN ('2','3', '5', '7','11','13','17','19') OR
  FOO.B IN ('2','3', '5', '7','11','13','17','19') OR
  FOO.C IN ('2','3', '5', '7','11','13','17','19') OR
  FOO.D IN ('2','3', '5', '7','11','13','17','19') OR
  FOO.E IN ('2','3', '5', '7','11','13','17','19') OR
  FOO.F IN ('2','3', '5', '7','11','13','17','19') 
```

那是简化的sql。

试图不要把水弄得太多，但既然你问：

最终我在这里要做的是，从 FOO 中选择行，其中的列满足各种标准。这些条件存储在第二个表（称为 BAR）中，主要是 db、名称、类型必须匹配且标志必须为 1。计划从 BAR 构建 IN 列表，将它们与包含 FOO 的 INFORMATION_SCHEMA.COLUMNS 中的列名进行比较

福：

```
+--------+--------+---------+---------+--------+-------+
|   DB   | Name   | Type    | Col1    |  Col2  | Col3  |
+--------+--------+---------+---------+--------+-------+
|   4    | AC1    | LO      | 1       |  10    | 2     |
|   4    | AC1    | HI      | 2       |  20    | 4     |
|   1    | DC2    | HI-HI   | 11      |  5     | 2     |
|   1    | DC2    | HI      | 22      |  10    | 4     |
|   1    | DC2    | LO      | 33      |  15    | 6     |
+--------+--------+---------+---------+--------+-------+ 
```

酒吧：

```
+--------+--------+---------+---------+--------+
|   DB   | Name   | Type    | Field   |  Flag  |
+--------+--------+---------+---------+--------+
|   4    | AC1    | LO      | Col1    |  1     |
|   4    | AC1    | HI      | Col1    |  1     |
|   1    | DC2    | HI-HI   | Col1    |  1     |
|   1    | DC2    | HI      | Col1    |  1     |
|   1    | DC2    | LO      | Col1    |  1     |
|   4    | AC1    | LO      | Col2    |  0     |
|   4    | AC1    | HI      | Col2    |  0     |
|   1    | DC2    | LO      | Col2    |  0     |
|   1    | DC2    | HI-HI   | Col2    |  0     |
|   1    | DC2    | HI      | Col2    |  0     |
|   4    | AC1    | LO      | Col3    |  0     |
|   4    | AC1    | HI      | Col3    |  0     |
|   1    | DC2    | LO      | Col3    |  0     |
|   1    | DC2    | HI-HI   | Col3    |  0     |
|   1    | DC2    | HI      | Col3    |  0     |
+--------+--------+---------+---------+--------+ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:05:42.090

您的方法可能效果最好。这是一个只需要创建一次列表的替代方法。它使用 CTE 创建值列表，然后使用`exists`子句检查是否有任何值匹配：

```
with vals as (
      select '2' as p union all
      select '3' union all
      select '5' union all
      select '7' union all
      select '11' union all
      select '13' union all
      select '17' union all
      select '19'
     )
select *
from foo
where exists (select 1 from vals where vals.p in (foo.A, foo.B, foo.C, foo.D, foo.E, foo.F)) 
```

如果您使用的数据库不支持 CTE，则只需将代码放在`where`子句中：

```
select 8
from foo
where exists (select 1
              from (select '2' as p union all
                    select '3' union all
                    select '5' union all
                    select '7' union all
                    select '11' union all
                    select '13' union all
                    select '17' union all
                    select '19'
                   ) t
              where vals.p in (foo.A, foo.B, foo.C, foo.D, foo.E, foo.F)
             ) 
```

如果您使用的是 Oracle，那么您需要`from dual`在字符串常量之后添加语句。否则，我认为其中一个应该适用于任何 SQL 数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:40:23.147

虽然尚不清楚您要对数据做什么，但由于您使用的是 SQL Server，我的建议是使用 UNPIVOT 函数将`col1`,`col2`和`col3`列转换为行，这样可以更轻松地过滤数据：

```
select db, name, type, col, value
from foo
unpivot
(
  value
  for col in (Col1, Col2, Col3)
) unpiv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/c36d4/2)。这将提供以下格式的数据：

```
| DB | NAME |  TYPE |  COL | VALUE |
------------------------------------
|  4 |  AC1 |    LO | Col1 |     1 |
|  4 |  AC1 |    LO | Col2 |    10 |
|  4 |  AC1 |    LO | Col3 |     2 |
|  4 |  AC1 |    HI | Col1 |     2 | 
```

`BAR`一旦采用行格式，应用任何过滤器甚至连接到您的表应该会容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:11:40.540

在第一次检查时，您的架构似乎不适合您正在执行的查询类型。似乎您想要一个具有类型和值的 FOOVAL 表，然后您的查询就变成了：

```
CREATE TABLE FOOVAL
{
    ID int, -- References FOO.ID
    TYPE char, -- A, B, C, D, E, F
    VAL int
}

SELECT * FROM FOO WHERE FOO.ID IN
(SELECT DISTINCT FOOVAL.ID WHERE FOOVAL.VAL IN ('2','3', '5', '7','11','13','17','19')) 
```

# css - Bootstrap - 导航栏对齐

> ID：16112468
> 
> 赞同：0
> 
> 时间：2013-04-19T19:48:39.660
> 
> 标签：css, html, twitter-bootstrap

我从 bootstrap 获得了创建导航栏的代码，并更改了内部文本以显示图像。所有显示都很好，但我想改变一些东西，但我无法弄清楚。这是我的导航栏代码：

```
<div class="navbar">
<div class="navbar-inner">
<ul class="nav">
 <li class="active"><a href="#"><img src="http://4.bp.blogspot.com/-Dv_1JE3QwtY/UXCa6uQGgQI/AAAAAAAASok/iUT8MJ3Y_QM/s1600/Upload+Symbol.png" width="100"></a></li>
 <li><a href="#"><img src="http://4.bp.blogspot.com/-Dv_1JE3QwtY/UXCa6uQGgQI/AAAAAAAASok/iUT8MJ3Y_QM/s1600/Upload+Symbol.png" width="100"></a></li> 

 <li><a href="#"><img src="http://4.bp.blogspot.com/-Dv_1JE3QwtY/UXCa6uQGgQI/AAAAAAAASok/iUT8MJ3Y_QM/s1600/Upload+Symbol.png" width="100"></a></li> 

    <li><a href="#"><img src="http://4.bp.blogspot.com/-Dv_1JE3QwtY/UXCa6uQGgQI/AAAAAAAASok/iUT8MJ3Y_QM/s1600/Upload+Symbol.png" width="100"></a></li> 

</ul></div></div> 
```

我在 URL 链接中添加了图片，以便您更好地了解它现在的情况。我没有更改默认引导程序中的 CSS。你可以下载它并模拟导航栏来查看它。

我遇到的问题

首先 - 我希望按钮在页面中居中。我已经将文本对齐中心放置在按钮上，甚至“中心”标签围绕它，但它不起作用。我不知道如何将它与中心对齐：/

其次 - 如果你放大页面，图像会堆积起来......我想让它们保持一致。我想我已经尝试在 css 上内联，但它也没有工作......：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:04:41.833

您可以使用代码将菜单置于中心 `.active { margin-left:250px; }` 位置您可以将其编写为按钮的位置。如果您使用引导响应，它将移动图片以使其适合较小的分辨率。如果您希望您的网站是固定设计，请不要使用响应式插件。

# vhdl - VHDL有三元运算符吗？

> ID：16112469
> 
> 赞同：14
> 
> 时间：2013-04-19T19:48:55.163
> 
> 标签：vhdl, ternary-operator

我喜欢三元运算符与 if 子句的简洁性。

这个运算符是否存在于 vhdl 中？我的搜索结果正好相反。我还检查了 when 语句，但它不是运算符，我也希望能够在进程中使用它......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T20:53:55.340

不。它已针对 VHDL-2008 进行了讨论，但没有加入。您有几个选择。如果您的工具支持 VHDL-2008，则现在支持条件分配作为顺序语句（它们以前只是并发的），因此您可以编写如下内容：

```
process(clock)
begin
  if rising_edge(clock) then
    q <= '0' when reset else d; -- ie. much like q <= reset? '0':d;
  end if;
end process; 
```

如果你还没有 2008，只需编写一个函数 ( `q <= sel(reset, '0', d)`)。但是，您必须为您感兴趣的每种类型编写它。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-04-19T19:54:42.800

不是您从 C/C++ 中了解的那种，但您可以使用：

```
destination <= signal1 when condition else signal2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-12T12:53:06.200

在我的实用程序包中，我有这两个功能。对我来说，它们非常方便

```
 function ternu(cond : boolean; res_true, res_false : unsigned) return unsigned is
  begin
     if cond then return res_true;
     else      return res_false;
     end if;
  end function;

  function terni(cond : boolean; res_true, res_false : integer) return integer is
  begin
     if cond then return res_true;
     else      return res_false;
     end if;
  end function; 
```

# android - android - 用于从系统服务接收的接收器上的“导出的接收器不需要许可”

> ID：16112470
> 
> 赞同：78
> 
> 时间：2013-04-19T19:48:59.057
> 
> 标签：android, broadcastreceiver, android-manifest, android-permissions, android-broadcastreceiver

我在我的 AndroidManifest 中声明了一些接收器：

```
<!-- no warning -->
<receiver
    android:name=".receivers.TriggerMonitoringBootReceiver"
    android:enabled="false">
    <intent-filter>
        <action android:name="android.intent.action.BOOT_COMPLETED" />
    </intent-filter>
</receiver>

<!-- no warning -->
<receiver
    android:name=".receivers.ScanResultsReceiver"
    android:enabled="false">
    <intent-filter>
        <action android:name="android.net.wifi.SCAN_RESULTS" />
    </intent-filter>
</receiver>

<!-- warning : Exported receiver does not require permission-->
<receiver
    android:name=".receivers.BatteryMonitoringReceiver"
    android:enabled="false">
    <intent-filter>
        <action android:name="@string/intent_action_setup_alarm" />
        <action android:name="@string/intent_action_cancel_alarm" />
        <action android:name="@string/intent_action_monitor" />
    </intent-filter>
</receiver> 
```

第一个是为了接收一个`BOOT_COMPLETED`动作。第二个是用来接收的`android.net.wifi.SCAN_RESULTS`。第三个是用来接收我广播的一些动作（intent_action_monitor）和一些由`AlarmManager`（intent_action_setup_alarm等）广播的动作。

两个问题：

*   为什么我没有在所有接收器上收到警告？
*   我需要为*要从系统服务接收的接收器设置哪些权限以更正警告*（我了解它的含义，并且我不希望任何人使用我的接收器）？***将要*** `exported="false"` ***可以**用于启动接收器、wifi 接收器、警报接收器等*？
    我曾想过使用自定义权限，`android:protectionLevel="signatureOrSystem"`但文档建议不要使用此[保护级别](http://developer.android.com/guide/topics/manifest/permission-element.html#plevel)和[自定义权限](http://developer.android.com/training/articles/security-tips.html#Permissions)。那么我应该如何处理这个警告呢？

文档和/或一些代码的链接将不胜感激。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2013-04-19T19:54:12.813

> 为什么我没有在所有接收器上收到警告？

因为前两个显然是设计为由 Android 播放的。最后一个是未知的，部分原因是您没有提供字符串资源值，也可能是因为它们是您自己独特的操作字符串。

> 我需要为要从系统服务接收的接收器设置哪些权限以更正警告

正确的解决方法是删除`<intent-filter>`. 如果您正在广播这些`Intents`，或者如果您将 an 包装`Intent`在 a`getBroadcast()` `PendingIntent`中，则不需要操作字符串。使用将`Intent`Java 类对象作为第二个参数的构造函数，并使用它：

```
new Intent(this, BatteryMonitoringReceiver.class) 
```

如果需要，欢迎您仍将操作字符串附加到该`Intent`，但您可以转储`<intent-filter>`（路由将基于提供的组件，在本例中为 Java 类）。

仅`<intent-filter>`当您希望操作系统或第三方应用程序`Intent`自行启动时才使用（执行`PendingIntent`您创建的 a 不算数）。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2015-02-19T10:51:43.270

警告**“导出的接收器不需要许可”**的意思是，您有`intent-filter`一些操作（这意味着默认情况下您已`android:exported="true"`设置并且它现在可以`receive broadcasts`来自您之外的任何广播公司`application`）因为它可以`receive broadcasts`来自`broadcasters`您的应用程序之外的任何广播，它会警告您通过说“嘿，你确定任何广播公司都可以调用你吗？在我看来，如果你只允许那些有你为此设置的人`broadcasters`调用你会更好`permission``receiver``android:permission"`

**`android:exported="false"`您可以通过添加到接收者标签来删除此警告**

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2013-07-11T15:23:51.660

如果您确实想将接收器导出到其他进程，您可以在 android-manifest 文件中添加自己的权限定义以避免出现此警告，例如

```
<permission
    android:name="com.yourpage.permission.YOUR_PERMISSION"
    android:protectionLevel="normal" />

<uses-permission
    android:name="com.yourpage.permission.YOUR_PERMISSION" />

<receiver <!-- warning : Exported receiver does not require permission-->
    android:name=".receivers.BatteryMonitoringReceiver"
    android:permission="com.yourpage.permission.YOUR_PERMISSION"
    android:enabled="false" >
    <intent-filter>
        <action android:name="@string/intent_action_setup_alarm" />
        <action android:name="@string/intent_action_cancel_alarm" />
        <action android:name="@string/intent_action_monitor" />
    </intent-filter>
</receiver> 
```

更多信息可以参考[http://developer.android.com/training/articles/security-tips.html](http://developer.android.com/training/articles/security-tips.html)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-09-11T21:02:36.400

如果像我一样，您在这里是因为您使用以前的 SDK 版本构建的应用程序停止使用更新的版本，并且您希望以最小的更改来修复它，只需添加

> 安卓：导出=假

到清单文件中的接收者标签。CommonsWare 的解决方案显然是长期使用的解决方案，但如果您使用自定义意图并且不打算导出它们，这可以暂时解决问题。

按照 Lubo 的方式，您需要导出此自定义权限，这将在安装前提示用户。这意味着权限的描述性文本需要写得很好，这样您就不会最终吓到用户改变他对安装应用程序的想法。此外，它需要翻译成您所有的目标语言。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-08T05:11:16.260

要隐藏此警告，请添加`tools:ignore="ExportedReceiver"`到接收器：

```
<receiver
    android:name=".MyReceiverIndentedForOtherAppsWithoutPermissions"
    tools:ignore="ExportedReceiver">
    <intent-filter>
        <action android:name="com.my.app.CUSTOM_ACTION" />
        <category android:name="android.intent.category.DEFAULT" />
    </intent-filter>
</receiver> 
```

# jquery - 动态添加的 jQuery Mobile 选择菜单

> ID：16112472
> 
> 赞同：0
> 
> 时间：2013-04-19T19:49:01.540
> 
> 标签：jquery, forms, jquery-mobile

我有一个选择菜单，我想动态添加更多选择输入。我找到了这个解决方案：[https](https://gist.github.com/snipe/1925906) ://gist.github.com/snipe/1925906 ，它在没有 jQuery Mobile 的情况下工作得很好。但是 jQuery Mobile 会修改元素并添加自己的代码。所以在选择菜单本身之前，jQM 添加了这样的元素（还有一些，但不是那么重要）：

```
<span class='ui-btn-inner'><span class='ui-btn-text'><span>Option Name</span></span><span class='ui-icon ui-icon-arrow-d ui-icon-shadow'>&nbsp;</span></span> 
```

这个“选项名称”已经在这里，当我调用使用“clone()”命令的函数时，它也会克隆这个“选项名称”。因此，第一个选择菜单可以正常工作，并且它的选项名称发生了变化，但是在克隆的菜单中，即使我选择了另一个选项，它也保持不变。

更新：这是我的代码（抱歉在几个地方使用俄语）。带有选择和文本输入的 HTML：

```
<fieldset class='ui-grid-a'>
<div id='inputphone1' class='clonedInputPhone'>
    <div class='ui-block-a' style='max-width: 200px;'>
    <select name='phone_type[]' data-mini='true'>
        <option value="mobile">Мобильный</option>
        <option value="home">Домашний</option>
        <option value="work">Рабочий</option>
    </select> 
    </div>
</div> <!-- inputphone1 -->
<div id='textinputphone1' class='textclonedInputPhone'>
    <div class='ui-block-b'>
    <input type='text' name='phone_number[]' data-mini='true' />
    </div>
</div> <!-- textinputphone1 -->
</fieldset> 

<fieldset class="ui-grid-a">
    <div class="ui-block-a" style="max-width: 200px;">
    </div>
    <div class="ui-block-b">
       <input id="btnAddPhone" type="button" data-icon="plus" data-iconpos="notext" data-inline="true" data-mini="true" onClick="addInput('phone_type', 'phone_number', 'clonedInputPhone', 'inputphone', 'btnAddPhone', 'btnDelPhone', '7', '0');" />
       <input id="btnDelPhone" type="button" data-icon="minus" data-iconpos="notext" data-inline="true" data-mini="true" disabled="disabled" onClick="removeInput('clonedInputPhone', 'inputphone', 'btnAddPhone', 'btnDelPhone');" />
    </div>
</fieldset> 
```

和js函数：

```
function addInput(selectName, textName, clonedInputName, inputName, btnAddName, btnDelName, limit, numstart){

// how many "duplicatable" input fields we currently have
var num = $('.' + clonedInputName).length;  

$('#' + btnDelName).removeAttr('disabled').button('enable');

// the numeric ID of the new input field being added
var newNum  = new Number(num + 1);

var newSelect = $('#' + inputName + num ).clone().attr('id', inputName + newNum);                                 
$('#text' + inputName + num).after(newSelect);  

var newText = document.createElement('div');
newText.id = 'text' + inputName + newNum;
newText.className = 'text' + clonedInputName;   
newText.innerHTML = "<div class='ui-block-b'><div class='ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-c ui-mini'><input type='text' name='" + textName + "[]' data-mini='true' class='ui-input-text ui-body-c'></div></div>";
$(newSelect).after(newText);

if (newNum == limit - numstart)  {
    $('#' + btnAddName ).prop('disabled', 'disabled').button('disable');
} 
};

function removeInput(clonedInputName, inputName, btnAddName, btnDelName){

// how many "duplicatable" input fields we currently have           
var num = $('.' + clonedInputName).length;  

// remove the last element  
$('#' + inputName + num ).remove();  
$('#text' + inputName + num ).remove();     

// enable the "add" button, since we've removed one             
$('#' + btnAddName).removeAttr('disabled').button('enable');    

// if only one element remains, disable the "remove" button     
if ( num - 1 == 1)
$('#' + btnDelName ).prop('disabled', 'disabled').button('disable');
}; 
```

因为我不能上传截图，这里是：[http](http://d.pr/i/choo) ://d.pr/i/choo 第二个选择菜单中的标签“Мобильный”没有改变，因为它写在克隆的“span”中。

任何想法如何解决这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T12:28:09.367

我找到了一种方法！（一种可怕的方式，可能是，但它有效）。如果有人能提出更优雅的方式，我会很高兴和感激。但我会发布我的解决方案，以防万一。

这次我没有使用“clone()”，我手动创建了 jQuery Mobile 通常添加的所有元素。然后，当我选择另一个选项时，我使用了在跨度中动态更改“选项名称”的函数。这个函数可以在 looooong “newdiv.innerHTML” 部分的末尾找到。

这是我的新 HTML/PHP 代码（我还优化了一些传递给函数的参数）：

```
<div id='input_phone1' class='cloned_input_phone'>
<fieldset class='ui-grid-a'> 
    <div class='ui-block-a' style='max-width: 200px;'>
        <select name='phone_type[]' data-mini='true'>
        <?php
        $selectOptionsPhone = "<option value=\'mobile\'>Мобильный</option><option value=\'home\'>Домашний</option><option value=\'work\'>Рабочий</option>";  
        echo $selectOptionsPhone;
        ?>
        </select> 
    </div>
    <div class='ui-block-b'>
        <input type='text' name='phone_value[]' data-mini='true' />
    </div>
</fieldset> 
</div> <!-- input_phone1 -->

<fieldset class="ui-grid-a">
    <div class="ui-block-a" style="max-width: 200px;">
    </div>
    <div class="ui-block-b">
        <?php
        echo "<input id='btn_add_phone' type='button' data-icon='plus' data-iconpos='notext' data-inline='true' data-mini='true' onClick=\"addInput('phone', 'Мобильный', '".$selectOptionsPhone."', '".$phone_max."', '0');\" />";
        ?>
        <input id="btn_del_phone" type="button" data-icon="minus" data-iconpos="notext" data-inline="true" data-mini="true" disabled="disabled" onClick="removeInput('phone');" />
    </div>
</fieldset> 
```

还有我的 JS 函数：

```
function addInput(valueName, selectDefault, selectOptions, limit, startNum){

var inputName = "input_" + valueName;
var clonedInputName = "cloned_input_" + valueName;
var selectName = valueName + "_type[]";
var textName = valueName + "_value[]";
var btnAddName = "btn_add_" + valueName;
var btnDelName = "btn_del_" + valueName;

// how many "duplicatable" input fields we currently have
var num = $('.' + clonedInputName).length;  

$('#' + btnDelName).removeAttr('disabled').button('enable');

// the numeric ID of the new input field being added
var newNum  = new Number(num + 1);

var newdiv = document.createElement('div');
newdiv.id = inputName + newNum;
newdiv.className = clonedInputName; 
newdiv.innerHTML = "<fieldset class='ui-grid-a'><div class='ui-block-a' style='max-width: 200px;'><div class='ui-select'><div data-corners='true' data-shadow='true' data-iconshadow='true' data-wrapperels='span' data-icon='arrow-d' data-iconpos='right' data-theme='c' data-mini='true' class='ui-btn ui-shadow ui-btn-corner-all ui-mini ui-btn-icon-right ui-btn-up-c'><span class='ui-btn-inner'><span class='ui-btn-text'><span class='update" + valueName + num + "'>" + selectDefault + "</span></span><span class='ui-icon ui-icon-arrow-d ui-icon-shadow'>&nbsp;</span></span><select name='" + selectName + "' id='choose" + valueName + num + "' data-mini='true' data-role='none'>" + selectOptions + "</select></div></div></div><div class='ui-block-b'><div class='ui-input-text ui-shadow-inset ui-corner-all ui-btn-shadow ui-body-c ui-mini'><input type='text' name='" + textName + "' data-mini='true' class='ui-input-text ui-body-c'></div></div></fieldset><script type='text/javascript'>$('#choose" + valueName + num + "').change(function(event) {$('span.update" + valueName + num + "').html($(\"#choose" + valueName + num + " option:selected\").text());}); </script>";                                

$('#' + inputName + num).after(newdiv);     

if (newNum == limit - startNum)  {
    $('#' + btnAddName ).prop('disabled', 'disabled').button('disable');
    } 
};

function removeInput(valueName){

var inputName = "input_" + valueName;
var clonedInputName = "cloned_input_" + valueName;
var btnAddName = "btn_add_" + valueName;
var btnDelName = "btn_del_" + valueName;

// how many "duplicatable" input fields we currently have           
var num = $('.' + clonedInputName).length;  

// remove the last element  
$('#' + inputName + num ).remove();  
$('#text' + inputName + num ).remove();     

// enable the "add" button, since we've removed one             
$('#' + btnAddName).removeAttr('disabled').button('enable');    

// if only one element remains, disable the "remove" button

if ( num == 2)
$('#' + btnDelName ).prop('disabled', 'disabled').button('disable');
}; 
```

可能这将有助于下次有人。

# jquery - RangeAttribute 验证器未在客户端的 MVC4 中正确验证整数

> ID：16112475
> 
> 赞同：0
> 
> 时间：2013-04-19T19:49:14.647
> 
> 标签：jquery, asp.net-mvc-4, attributes

我的模型属性之一具有以下 RangeAttribute 验证器：

```
[Range(1, 100, ErrorMessage = "Milestone must be between 1 and 100.")]
public int? MilestonePercentage1 { get; set; } 
```

目前，验证器用于标记输入到文本框中的十进制值“.2”。它还将值标记为“0.2”......

但是，我将小数点左侧的数字设置为一或更大的那一刻：

“1.0”或“1.2”等......验证器认为这没问题，并没有标记它。

我在模型中指定 int，所以我不知道乳清“.2”或“0.9”被认为是无效的，而“1.2”被认为是有效的。

我已经使用 NUnit 为模型中的属性编写了一个测试，它运行正确（.GetAttributesOn 是我们编写的扩展方法）：

```
private RangeAttribute rangeAttribute;

[SetUp]
public void Given()
{
    rangeAttribute = new StudyRandomizationCap()
                .GetAttributesOn(s => s.MilestonePercentage1)
                .OfType<RangeAttribute>()
                .Single();
}

[TestAttribute]
public void DoesNotAllowAValueThatContainsADecimal()
{
    Assert.That(rangeAttribute.IsValid("3.2"), Is.False);
} 
```

但是当我不得不依赖客户端验证器使用的javascript时，值“3.2”被认为是有效的。

我认为在使用客户端脚本（我相信是 jquery.validate.js？）时，这个验证器的翻译会丢失一些东西

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:08:06.987

尝试这个：

```
[Range(typeof(int), 1, 100, ErrorMessage = "Milestone must be between 1 and 100.")]
public int? MilestonePercentage1 { get; set; } 
```

# java - 计时冒泡排序执行

> ID：16112479
> 
> 赞同：1
> 
> 时间：2013-04-19T19:49:27.607
> 
> 标签：java, sorting, bubble-sort

我希望能够看到冒泡排序对数组中的所有元素进行排序需要多长时间。我如何测量时间？

```
public class Bubble {
    static int[] nums = {5, 4, 3, 2, 1}; 

    public static void main(String[] args) {
        bubble(nums);
        for(int i=0; i<nums.length; i++){
            System.out.print(nums[i] + " ");
        }
    }

    // bubble sort
    public static void bubble(int[] unsorted){
        int temp;
        boolean sorted = false;
        int length = unsorted.length;

        while(!sorted){
            sorted = true;

            for(int i=0; i<length-1; i++){
                if(unsorted[i] > unsorted[i+1]){
                    temp = unsorted[i];
                    unsorted[i] = unsorted[i+1];
                    unsorted[i+1] = temp;
                    sorted = false;
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T19:52:16.353

从 Diastrophism 对[我如何在 java 中执行方法的时间](https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java/180191#180191)的回答：

> 总是有老式的方法：
> 
> ```
> long startTime = System.nanoTime();
> methodToTime();
> long endTime = System.nanoTime();
> 
> long duration = endTime - startTime; 
> ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T19:53:13.090

请参阅[如何在 Java 中为方法的执行计时？](https://stackoverflow.com/questions/180158/how-do-i-time-a-methods-execution-in-java) 基本上得到开始的时间，然后是结束的时间并减去。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:53:42.153

在你打电话之前：

```
bubble(nums); 
```

利用：

```
long time = System.nanoTime(); 
```

获取排序前的当前系统时间（以纳秒为单位）。然后在排序完成后，使用：

```
time =- System.nanoTime(); 
```

如果将其除以`1000000000.0f`，您将获得以秒为单位的时间。但是，由于您的数组可能不够大，您可以改为显示纳秒，因为除以`1000000000.0f`可能会导致它被四舍五入为`0`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T19:54:46.443

您可以使用此代码：

```
public static void main(String[] args) {
    long t1 = System.nanoTime();
    bubble(nums);
    for(int i=0; i<nums.length; i++){
        System.out.print(nums[i] + " ");
    }
    long t = (System.nanoTime() - t1) / 1000000;
    System.out.println("Elapsed time = " + t + " ms");

} 
```

它将显示 0ms。这是因为你的数组太小了。尝试更多的项目。复杂度为 O(n²)。

编辑：您可以使用 nanoTime 而无需划分，但我们的计算机无法测量短于 1 毫秒的时间。所以测量是不正确的。更好地测量更多元素 1000、2000、3000 等

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T19:54:52.743

```
public static void main(String[] args) {
   Date startTime = new Date();
   bubble(nums);
   System.out.println(new Date().getTime() - startTime.getTime());
   for(int i=0; i<nums.length; i++){
       System.out.print(nums[i] + " ");
   }
} 
```

# c++ - C++ - 编译成二进制的精简版数据库

> ID：16112481
> 
> 赞同：0
> 
> 时间：2013-04-19T19:49:40.217
> 
> 标签：c++, database, nosql

请建议一些精简数据库来存储键值数据（也许还有一些其他有用的功能）。类似 NoSQL 的东西。

这个数据库的主要要求必须用我的 C++ 程序编译（到我的二进制文件中）并且系统上没有额外的进程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:52:32.540

你考虑过 SQLite 吗？它是一个可以静态编译到您的代码中的库。您将数据库作为文件存储在文件系统中。 [https://www.sqlite.org/index.html](https://www.sqlite.org/index.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:25:40.523

如果 SQLite 不合适，一些更知名的进程内键/值存储是：

*   [伯克利数据库](http://en.wikipedia.org/wiki/Berkeley_DB)
*   [京都内阁](http://fallabs.com/kyotocabinet/)
*   [级别数据库](http://en.wikipedia.org/wiki/LevelDB)

请注意，对于 Berkeley Db 和 Kyoto Cabinet，您可能需要购买商业许可证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T20:22:28.907

其他人已经提到了 SQLite，我也推荐它，因为它非常易于使用。尽管使用 SQL 作为前端，它也非常轻量级。

另一个不错的嵌入式* 数据库是[Berkeley DB](http://www.oracle.com/technetwork/products/berkeleydb/overview/index.html)。它比 SQLite（它是键/值数据库）更符合您的要求，但学习曲线要​​陡峭得多。现在，*我*倾向于对开源 Oracle 产品保持警惕（至少可以说，他们在管理他们获得的 FLOSS 项目方面的记录很糟糕）但仍然值得一提，如果你对 Oracle 没有偏见，这是一个相当不错的产品在自身。

(*) 顺便说一下，为了帮助您找到更多类似的产品，您要在网络上搜索的关键字是*嵌入式数据库*或*进程内数据库*。

# c++ - C++ 从 hBitmap 获取 RGB

> ID：16112482
> 
> 赞同：9
> 
> 时间：2013-04-19T19:49:41.980
> 
> 标签：c++, rgb, pixel, scanning, hbitmap

使用位图对我来说是非常新的事物，所以我一直在努力阅读我阅读过的在线教程和策略。基本上我的目标是扫描屏幕以获取特定的 RGB 值。我相信执行此操作的步骤是在 hBitmap 中捕获屏幕，然后从中生成我可以扫描的 RGB 值数组。

我最初是从 GetPixel 开始的，但这很慢。解决方案是使用生成 RGB 值数组的 GetDIBits。问题是它会返回奇怪且可能是随机的 RGB 值。

我正在使用从另一个教程中找到的以下代码：

```
/* Globals */
int ScreenX = GetDeviceCaps(GetDC(0), HORZRES);
int ScreenY = GetDeviceCaps(GetDC(0), VERTRES);
BYTE* ScreenData = new BYTE[3*ScreenX*ScreenY];

void ScreenCap() {
    HDC hdc = GetDC(GetDesktopWindow());
    HDC hdcMem = CreateCompatibleDC (hdc);
    HBITMAP hBitmap = CreateCompatibleBitmap(hdc, ScreenX, ScreenY);
    BITMAPINFOHEADER bmi = {0};
    bmi.biSize = sizeof(BITMAPINFOHEADER);
    bmi.biPlanes = 1;
    bmi.biBitCount = 24;
    bmi.biWidth = ScreenX;
    bmi.biHeight = -ScreenY;
    bmi.biCompression = BI_RGB;
    bmi.biSizeImage = ScreenX * ScreenY;
    SelectObject(hdcMem, hBitmap);
    BitBlt(hdcMem, 0, 0, ScreenX, ScreenY, hdc, 0, 0, SRCCOPY);
    GetDIBits(hdc, hBitmap, 0, ScreenY, ScreenData, (BITMAPINFO*)&bmi, DIB_RGB_COLORS);

    DeleteDC(hdcMem);
    ReleaseDC(NULL, hdc);
}

inline int PosR(int x, int y) {
    return ScreenData[3*((y*ScreenX)+x)+2];
}

inline int PosG(int x, int y) {
    return ScreenData[3*((y*ScreenX)+x)+1];
}

inline int PosB(int x, int y) {
    return ScreenData[3*((y*ScreenX)+x)];
} 
```

我用下面的代码对此进行了测试。我点击 Shift 来调用 ScreenCap，然后将光标移动到所需位置并点击 Space 以查看该位置的 RGB 值。我完全疯了吗？

```
int main() {

while ( true ) {

   if (GetAsyncKeyState(VK_SPACE)){  

      // Print out current cursor position
      GetCursorPos(&p);
      printf("X:%d Y:%d \n",p.x,p.y);
      // Print out RGB value at that position
      int r = PosR(p.x, p.y);
      int g = PosG(p.x, p.y);
      int b = PosB(p.x, p.y);
      printf("r:%d g:%d b:%d \n",r,g,b);

   } else if (GetAsyncKeyState(VK_ESCAPE)){
      printf("Quit\n");
      break;
   } else if (GetAsyncKeyState(VK_SHIFT)){
      ScreenCap();
      printf("Captured\n");
   }
}

system("PAUSE");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-20T01:56:49.993

问题是您的屏幕实际上是 32 位深而不是 24 位。下面的代码将为您提供所需的结果：

```
/* Globals */
int ScreenX = 0;
int ScreenY = 0;
BYTE* ScreenData = 0;

void ScreenCap() 
{
    HDC hScreen = GetDC(NULL);
    ScreenX = GetDeviceCaps(hScreen, HORZRES);
    ScreenY = GetDeviceCaps(hScreen, VERTRES);

    HDC hdcMem = CreateCompatibleDC(hScreen);
    HBITMAP hBitmap = CreateCompatibleBitmap(hScreen, ScreenX, ScreenY);
    HGDIOBJ hOld = SelectObject(hdcMem, hBitmap);
    BitBlt(hdcMem, 0, 0, ScreenX, ScreenY, hScreen, 0, 0, SRCCOPY);
    SelectObject(hdcMem, hOld);

    BITMAPINFOHEADER bmi = {0};
    bmi.biSize = sizeof(BITMAPINFOHEADER);
    bmi.biPlanes = 1;
    bmi.biBitCount = 32;
    bmi.biWidth = ScreenX;
    bmi.biHeight = -ScreenY;
    bmi.biCompression = BI_RGB;
    bmi.biSizeImage = 0;// 3 * ScreenX * ScreenY;

    if(ScreenData)
        free(ScreenData);
    ScreenData = (BYTE*)malloc(4 * ScreenX * ScreenY);

    GetDIBits(hdcMem, hBitmap, 0, ScreenY, ScreenData, (BITMAPINFO*)&bmi, DIB_RGB_COLORS);

    ReleaseDC(GetDesktopWindow(),hScreen);
    DeleteDC(hdcMem);
    DeleteObject(hBitmap);
}

inline int PosB(int x, int y) 
{
    return ScreenData[4*((y*ScreenX)+x)];
}

inline int PosG(int x, int y) 
{
    return ScreenData[4*((y*ScreenX)+x)+1];
}

inline int PosR(int x, int y) 
{
    return ScreenData[4*((y*ScreenX)+x)+2];
}

bool ButtonPress(int Key)
{
    bool button_pressed = false;

    while(GetAsyncKeyState(Key))
        button_pressed = true;

    return button_pressed;
}

int main() 
{
    while (true) 
    {
       if (ButtonPress(VK_SPACE))
       {  

          // Print out current cursor position
          POINT p;
          GetCursorPos(&p);
          printf("X:%d Y:%d \n",p.x,p.y);
          // Print out RGB value at that position
          std::cout << "Bitmap: r: " << PosR(p.x, p.y) << " g: " << PosG(p.x, p.y) << " b: " << PosB(p.x, p.y) << "\n";

       } else if (ButtonPress(VK_ESCAPE))
       {
          printf("Quit\n");
          break;
       } else if (ButtonPress(VK_SHIFT))
       {
          ScreenCap();
          printf("Captured\n");
       }
    }

    system("PAUSE");
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:52:28.017

您的图像大小以**像素**为单位指定，应以**字节为单位指定**

```
**bmi.biSizeImage = ScreenX * ScreenY;**
**bmi.biBitCount = 24;**
bmi.biWidth = ScreenX;
bmi.biHeight = -ScreenY;
**bmi.biCompression = BI_RGB;** 
```

**biSizeImage**其定义的单位是**字节**，您指定 RGB 每个像素 3 个字节。

*[http://msdn.microsoft.com/en-us/library/windows/desktop/dd183376(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd183376(v=vs.85).aspx)*

biSizeImage 图像的大小，以**字节**为单位。对于 BI_RGB 位图，这可以设置为零。

# jquery - 如何知道 ENTER 是否用于选择 jQueryUI 自动完成建议？

> ID：16112492
> 
> 赞同：5
> 
> 时间：2013-04-19T19:50:06.187
> 
> 标签：jquery, jquery-ui-autocomplete

使用 jQuery 1.7.2 和 jQueryUI 1.8.12，我正在尝试实现具有以下行为的自动完成字段：

*   如果选择了自动完成建议（使用鼠标或键盘），请调用函数 A
*   如果没有匹配项（因此没有选择建议）并且`ENTER`被按下，则调用函数 B

我遇到的问题是，当我用键盘选择一个建议时，我的检查`ENTER`也会被触发，这会让我在不应该调用函数 B 时调用它。这是一个简单的例子（也在[jsfiddle](http://jsfiddle.net/rFpxA/)上）：

```
$('input').autocomplete({
    source: ['foo', 'bar', 'baz' ],
    select: function(event, ui) {
      console.log('suggestion selected');   
    }
}).keydown(function(e) {
    if(e.keyCode == 13) console.log('ENTER (keydown)');
}).keyup(function(e) {
    if(e.keyCode == 13) console.log('ENTER (keyup)');
}); 
```

根据控制台，keyup/keydown 处理程序在*之后触发*触发（这很奇怪），所以我试图阻止它（通过尝试顶部冒泡，阻止默认值，或两者兼而有之）。我还将事件对象的`originalEvent`属性遍历到最顶层的父级（原始的 KeyboardEvent），但这似乎也是不可阻挡的。

有谁知道我想要完成的简单解决方案，最好避免使用[标志](https://stackoverflow.com/questions/1648993/trap-the-enter-key-but-not-when-choosing-the-browsers-autocomplete-suggestion)来指示选择事件已被触发？我想避免这种情况，因为这样的标志必须在其他地方清除，这似乎容易出错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:22:59.817

这个怎么样。在 keydown 事件注册之前，只需绑定一个`autocomplete.keydown`事件。这保证在您按下按键之前执行。请注意事件注册的顺序也很重要。

[http://jsfiddle.net/zFPZH/](http://jsfiddle.net/zFPZH/)

```
$('input')
    .autocomplete({
        source: ['foo', 'bar', 'baz' ],
        select: function(event, ui) {
            console.log('suggestion selected');         
        }
    }).bind("keydown.autocomplete", function() {
        if(event.keyCode == 13){ 
            console.log('keydown.autocomplete (keyup)'); 
        };
    }).keydown(function(e) {
        if(e.keyCode == 13){ 
            console.log('ENTER (keydown)');
        };
    }).keyup(function(e) {
        if(e.keyCode == 13){ 
            console.log('ENTER (keyup)');
        };
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:00:59.093

似乎当建议列表出现并突出显示建议时，它具有类`ui-state-hover`。在您的`keydown`事件中检查 keyCode 时，您还可以在建议菜单中检查是否存在具有该类的元素，以查看当按下 enter 时是否确认建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-11T15:04:48.913

这是一个老问题，但没有一个给出的答案对我有用。

我最终得到了这个解决方法：

```
$('input')
    .autocomplete({
        source: ['foo', 'bar', 'baz' ],
        select: function(event, ui) {
            $(this).data("stopPropagation", true);            // <----- turn off
            console.log('suggestion selected');         
        }
    }).keydown(function(e) {
        if ($(this).data("stopPropagation")) {
            $(this).data("stopPropagation", false);           // <----- turn on
            return;
        }
        if (e.keyCode == 13){ 
            console.log('ENTER (keyup)');
        };
    }); 
```

# unix - 使用标题对制表符分隔的文件进行排序

> ID：16112494
> 
> 赞同：1
> 
> 时间：2013-04-19T19:50:16.547
> 
> 标签：unix, sorting

我有一个带有@blabla 指定标题的文件-不同的文件具有不同数量的标题行，但它们都通过@ 符号指定标题行。

IE，

```
@HI this is header line 1
@Bye this is header line 2
2 210 hi 1300 hl df de
9 179 hi 110 hl df de
2 190 hi 1310 hl df de
9 134 hi 190 hl df de 
```

在标题之后，文件以制表符分隔。

任何人都知道在 linux 中对该文件进行排序的快速/简单方法（可能使用 sort 命令）。

我想按第 1 列（然后是第 4 列）对其进行排序，但将标题保留为排序版本中的标题。

帮助将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T22:50:43.013

您可以删除标题，排序然后添加标题

```
$ grep '^@' foo > foo.sorted; grep -v '^@' foo | sort --key=2,4 >> foo.sorted
$ cat foo.sorted 
@HI this is header line 1
@Bye this is header line 2
9 134 hi 190 hl df de
9 179 hi 110 hl df de
2 190 hi 1310 hl df de
2 210 hi 1300 hl df de 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2015-03-22T19:21:21.393

```
awk 'NR<=2{print}NR>2{print|"sort -t\"    \" -k1,1n -k4,4n"}' foo.txt 
```

# c++ - 在多态对象上使用 static_cast 是否表明存在设计缺陷？

> ID：16112497
> 
> 赞同：1
> 
> 时间：2013-04-19T19:50:24.043
> 
> 标签：c++

我知道应该避免 dynamic_cast，但是假设我的程序中有一个 Base 类的对象 x，我知道在执行的某个时刻它也是 Derived 类（继承自 Base）。使用 static_cast 向下转换以调用派生方法等是否可以接受？或者这是否表明存在设计缺陷？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:01:50.983

它表明与使用将完全相同的设计缺陷`dynamic_cast`。事实是，如果您使用指向基类的指针，则应该意味着您只使用传递的对象，就好像它们是该基类一样。如果您必须确定对象的动态派生类型，那么您可能不应该使用指向 base 的指针。

使用 a`static_cast`只是比使用 更危险一点`dynamic_cast`。如果您要转换的类型确实是正确的，那么您只有明确定义的行为。使用 a `dynamic_cast`，至少它会告诉您是否不是。

与任何建议一样，总会有例外。问问自己，基指针类型在这里是否真的合适。我们使用多态性来表示“我们只是想要`Fruit`！我不在乎它是 an`Apple`还是 a `Banana`- 我们会一视同仁地对待它们！” 如果您没有将所有对象都视为基本类型，那么您可能需要重新考虑。正如 Mark Ransom 在他的回答中给出的一个例子，有时你真的想以这种方式沮丧。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-19T20:03:25.880

它有合法用途。没有它，[奇怪的重复模板模式 (CRTP)](http://en.wikipedia.org/wiki/Curiously_recurring_template_pattern)将是不可能的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T19:56:57.903

imo 是的，它可能表明存在设计缺陷。如果您知道它是某种类型的派生类，为什么将其作为基类传递？

# cloudera - Cloudera Manager 安装程序无法在 CentOS 6.2 32 位上运行

> ID：16112498
> 
> 赞同：0
> 
> 时间：2013-04-19T19:50:25.687
> 
> 标签：cloudera

虽然 CentOS 6.2 32bit 在支持的操作系统列表中，但 Cloudera 管理器安装程序无法开始说“无法执行二进制文件” 似乎这个安装程序不再支持 32 位平台。任何人都知道方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-11T21:55:53.200

需要64位，是的。

对于更多问题，您可能需要考虑在[Cloudera 自己的论坛](http://community.cloudera.com/t5/Cloudera-Manager-Installation/bd-p/CMInstall)上发布关于此主题的帖子。

# jquery - 防止jQuery淡出将对象更改为显示：隐藏

> ID：16112500
> 
> 赞同：0
> 
> 时间：2013-04-19T19:50:29.700
> 
> 标签：jquery, html, css

我正在创建一个灯箱类型的东西，我正在使用 jQuery`fadeIn`和`fadeOut`功能来显示放大的`div`元素。但是，当我调用`fadeOut`放大`div`的时，较小的也会消失，因为完成后会`fadeOut`设置。`display: none`有没有办法在不影响原件的情况`fadeIn`下`fadeOut`复制一个 div？请记住，这`div`不包含图像，而是包含大量其他`divs`和文本。

这是我当前的 jQuery：

```
$("#magnify").on("click", function(event){
    $("#black-overlay").addClass("show");
    $(".close").addClass("show");
    $("#inner-box").addClass("enlarge").fadeIn(600);
});

$(".close").on("click", function(event){
    $("#inner-box").fadeOut(600);
}); 
```

HTML 很长，所以我为您删除了它，但我希望里面的所有内容都放大并且`inner-box`当**单击** 某些元素时：`fadeIn``fadeOut`

```
<div id="outter-box" class="activeSlide">
    <div id="magnify"><a href="#"><p>Enlarge</p></a></div><!--/#magnify-->

    <div id="inner-box">    
        <div class="close">
            <a href="#"><img src="img/close.gif" width="22px" height="22px" /></a>
        </div>
        <div id="content">
            <div class="inside">
                <p>A buttload of stuff in here</p>
            </div><!--/.inside-->
        </div><!--/#content-->
    </div><!--/.inner-box-->
</div><!--/#outter-box--> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:53:15.683

你可以试试：

```
.animate({opacity: 0}, 400); 
```

我不确定浏览器前缀属性，但这可能有效：

```
.animate({MozOpacity: 0}, 400); // Firefox
.animate({WebkitOpacity: 0}, 400); // Chrome, Safari
.animate({OOpacity: 0}, 400); // Opera
.animate({msOpacity: 0}, 400); // Internet Explorer 
```

# android - 如何确定 myADT Bundle 不需要更新？

> ID：16112505
> 
> 赞同：0
> 
> 时间：2013-04-19T19:50:51.577
> 
> 标签：android

如何确定我的 ADT Bundle 不需要更新？我会定期检查更新还是什么？每当我检查更新时，它都会说没有更新。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:58:29.900

您可以检查您当前的 ADT 版本，如果您转到`Eclipse > About Eclipse`并单击 ADT 图标以找出您当前拥有的 ADT 版本：

![在此处输入图像描述](https://i.stack.imgur.com/GlTBv.png)

现在只需检查[此站点](http://developer.android.com/tools/sdk/eclipse-adt.html)以了解它是否是最新版本。

顺便说一句，ADT 更新不那么频繁，所以我建议您启用自动更新，这样您就不必手动检查它。前往`Eclipse > Preferences > Install/Update > Automatic Updates`：

![在此处输入图像描述](https://i.stack.imgur.com/WNfng.png)

# kml - 不想显示 IFRAME KML 上使用的 LINK

> ID：16112508
> 
> 赞同：0
> 
> 时间：2013-04-19T19:51:06.160
> 
> 标签：kml, google-earth

我知道可以使用 IFRAME 在 kml 中显示 URL 链接。但是如果我在地标或正确的地标列表中右键单击-> 属性，我需要在 IFRAME 上使用的链接不显示。

有办法吗？

多谢，

啊！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T17:57:47.780

是的你可以

您需要考虑使用[ExtendedData](https://developers.google.com/kml/documentation/kmlreference#extendeddata)

它要求您使用文本编辑器手动编辑 KML 文件。

第 1 步 - 在`<Placemark>`您希望嵌入到 iframe 中

```
<ExtendedData>                       
  <Data name="iframe">
    <value><![CDATA[<iframe width="350" height="197" src="http://www.google.com"></iframe>]]></value>
  </Data>
</ExtendedData> 
```

第 2 步 - 在关联内`<Style>`分配给地标

```
<BalloonStyle>
    <text>$[description]$[iframe]</text>
</BalloonStyle> 
```

只要您将所有内容都放在正确的位置，这将起作用

但是，任何真正想查看 iframe 来源的人 - 他们所要做的就是在文本编辑器中打开 KML ......所以这是一个无用的过程......

# php - wp_nav_menu 从菜单中排除页面

> ID：16112513
> 
> 赞同：0
> 
> 时间：2013-04-19T19:51:42.487
> 
> 标签：php, wordpress

我正在尝试从 wp_nav_menu 中排除页面

这是从菜单中排除页面的功能

```
 <?php $page = get_page_by_title('my title' );
   wp_nav_menu( array( 'theme_location' => 'menu-2', 'exclude' => $page->ID  ) ); ?> 
```

正常工作

BUt 使用时

```
 <?php $page = get_page_by_title('my title' );
         $pag1 = get_page_by_title('my title 1' );
         $pag2 = get_page_by_title('my title2' );
   wp_nav_menu( array( 'theme_location' => 'menu-2', 'exclude' => $page->ID,$pag1->ID,$pag2->ID  ) ); ?> 
```

不能正常工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T20:03:51.180

尝试这个

```
wp_nav_menu( array( 'theme_location' => 'menu-2', 'exclude' => '".$page->ID.",".$pag1->ID.",".$pag2->ID."'  ) ); 
```

结帐本[教程](http://bacsoftwareconsulting.com/blog/index.php/wordpress-cat/wordpress-tip-how-to-exclude-pages-from-wp_nav_menu-function/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T20:34:32.197

这是正确的解决方案

我希望它可以帮助其他人

```
<?php 
$page = get_page_by_title('my title' );
$pag1 = get_page_by_title('my title 1' );
$pag2 = get_page_by_title('my title2' );

$ids = "{$page->ID},{$pag1->ID},{$pag2->ID}";
wp_nav_menu( array( 'theme_location' => 'menu-2', 'exclude' => $ids ) ); 
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-26T09:17:20.697

使用 exclude 方法管理它，但按页面 id 排除：

```
wp_nav_menu( 
  array( 
   'theme_location' => 'menu-2', 
   'exclude' => '599, 601'  
  ) 
); 
```

（599 和 601 是页面 ID）

写在这里：

[http://bacsoftwareconsulting.com/blog/index.php/wordpress-cat/wordpress-tip-how-to-exclude-pages-from-wp_nav_menu-function/](http://bacsoftwareconsulting.com/blog/index.php/wordpress-cat/wordpress-tip-how-to-exclude-pages-from-wp_nav_menu-function/)

并手动查找页面ID写在这里：

[http://bacsoftwareconsulting.com/blog/index.php/wordpress-cat/how-to-find-tag-page-post-link-category-id-in-wordpress/](http://bacsoftwareconsulting.com/blog/index.php/wordpress-cat/how-to-find-tag-page-post-link-category-id-in-wordpress/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-27T09:20:40.940

您可以使用[自定义 Walker 函数](http://codex.wordpress.org/Function_Reference/wp_nav_menu#Using_a_Custom_Walker_Function)来跳过菜单项的呈现。

```
wp_nav_menu( array(
    'theme_location' => 'menu-2',
    'walker'         => new custom_navigation
) );

class custom_navigation extends Walker_Nav_Menu {

    function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {

        parent::start_el($item_html, $item, $depth, $args);

        $exclude = array();
        $exclude[] = get_page_by_title( 'my title' );
        $exclude[] = get_page_by_title( 'my title 1' );
        $exclude[] = get_page_by_title( 'my title2' );

        if ( ! in_array( $item->object_id, $exclude ) ) {

            // add your menu item html to the $output variable

        }

    }

} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-19T19:54:38.403

如果您将要排除的页面放入数组中，它应该可以工作。

看看这个：[http ://ehsanis.me/2010/11/30/wordpress-wp_nav_menu-to-exclude-pages/](http://ehsanis.me/2010/11/30/wordpress-wp_nav_menu-to-exclude-pages/)

# javascript - jQuery从回调函数内部调用插件方法

> ID：16112514
> 
> 赞同：1
> 
> 时间：2013-04-19T19:51:44.140
> 
> 标签：javascript, jquery, jquery-plugins

我正在使用一个样板插件设计，看起来像这样，

```
;(function ( $, window, document, undefined ) {

    var pluginName = "test",
        defaults = {};

    function test( element, options ) {
        this.init();
    }

    test.prototype = {   
        init: function() {}
    }

    $.fn.test = function(opt) {
        // slice arguments to leave only arguments after function name
        var args = Array.prototype.slice.call(arguments, 1);
        return this.each(function() {
            var item = $(this), instance = item.data('test');
            if(!instance) {
                // create plugin instance and save it in data
                item.data('test', new test(this, opt));
            } else {
                // if instance already created call method
                if(typeof opt === 'string') {
                    instance[opt].apply(instance, args);
                }
            }
        });
    };

})( jQuery, window, document ); 
```

现在说我有两个`<div>`同班`container`。

现在我会`test`像这样在这些 div 上调用我的插件，

```
$(".container").test({
    onSomething: function(){

    }
}); 
```

现在，当`onSomething`从我的插件内部调用函数时，我如何调用引用实例`onSomething`函数的插件公共方法？

例如，第一个 div 发生了一些事情，*并且* `container`只为*第一个*`onSomething`div调用了函数。 *`container`*

 *为了让它更清楚一点，我试图将`this`实例传递给`onSomething`函数，这样我就可以公开**所有**插件数据，然后我可以做类似的事情，

```
onSomething(instance){
   instance.someMethod();
   instance.init();
   //or anything i want
} 
```

对我来说，这看起来很错误，所以必须有更好的方法......或者没有？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:08:41.977

好吧，我不确定这是否是最好的主意，但是您可以将当前对象作为参数传递。比方说`onSomething : function(obj) { } So whenever "onSomething" is called by the plugin, you can call it like this: "onSomething(this)" and then refer to the object as`对象`让我们举一个具体的例子。

```
var plugin = function (opts) {
 this.onSomething = opts.onSomething;
 this.staticProperty = 'HELLO WORLD';
 this.init = function() {
  //Whatever and lets pretend you want your callback right here.
  this.onSomething(this);
 }
}
var test = new Plugin({onSomething: function(object) { alert(object.staticProperty) });
test.init(); // Alerts HELLO WORLD 
```

希望这会有所帮助，如果还不够清楚，请告诉我。

哦，等等，这就是你所做的。*

# java - 如何洗牌一个ArrayList

> ID：16112515
> 
> 赞同：96
> 
> 时间：2013-04-19T19:51:54.800
> 
> 标签：java, list, collections

我需要一些帮助来编写一个将 ArrayList 打乱的方法。我不知道在我的方法中放置什么。这是我到目前为止所拥有的。我尝试使用随机方法来随机化列表中的整数，但没有奏效。有人可以告诉我如何做到这一点吗？

这是我尝试过的代码：

```
import java.util.ArrayList;
import java.util.Scanner;

public class Lab 11 {
  public static void main(String[] args) {
    ArrayList<Double> list = new ArrayList<Double>();

    Scanner input = new Scanner(System.in);   
    System.out.print("Enter integers (input ends with 0): ");
     double value;

    do {
      value = input.nextDouble(); // Read a value from the input

      if (value != 0) 
        list.add(value); // Add the value if it is not in the list
    } while (value != 0);
     System.out.println("The maximum number is " + max(list));

     System.out.print("Enter five double values: ");
     for (int i = 0; i < 5; i++)
      list.add(input.nextDouble());

    System.out.println("The sum is " + sum(list));

  }

  public static Double max(ArrayList<Double> list) {
    if (list == null || list.size() == 0)
      return null;

    double result = list.get(0);
    for (int i = 1; i < list.size(); i++)
      if (result < list.get(i))
        result = list.get(i);

    return result;
  }

  public static double sum(ArrayList<Double> list) {
    double sum = 0;
    for (int i = 0; i < list.size(); i++)
      sum += list.get(i);
    return sum;
  }
} 
```

* * *

## 回答 #1

> 赞同：234
> 
> 时间：2013-04-19T19:53:00.760

使用此方法并在参数中传递您的数组

```
Collections.shuffle(arrayList); 
```

这个方法返回 void 所以它不会给你一个新的列表，但是我们知道数组在 Java 中是作为引用类型传递的，所以它会打乱你的数组并在其中保存打乱的值。这就是为什么你不需要任何返回类型。

您现在可以使用洗牌的arraylist。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-04-19T19:55:28.703

尝试[Collections.shuffle(list)](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)。如果禁止使用此方法解决问题，则可以查看实际实现。

# sql - 格式化 SQL 输出（数据透视）

> ID：16112519
> 
> 赞同：0
> 
> 时间：2013-04-19T19:52:15.400
> 
> 标签：sql, sql-server-2008, tsql, pivot

这是在 SQL Server 2008 上运行的。

无论如何，我有销售数据，我可以编写一个查询来让输出看起来像这样：

```
id | Name       | Period  | Sales
1  | Customer X | 2013/01 | 50
1  | Customer X | 2013/02 | 45 
```

目前，运行这些数据后，我正在重新排列后面代码中的数据，以便最终输出如下所示：

```
id  | Name       | 2013/01 | 2013/02
1   | Customer X |   50    |   40 
```

问题是：

1.  日期 (YYYY/MM) 范围是来自用户的输入。
2.  如果用户选择更多输出（例如，地址和与该客户相关的大量其他可能字段），则该信息将在*每一*行中重复。当您在 5 年以上的时间里为 50000 多个用户执行每行 10-15 个项目时，这会导致内存不足的问题，而且效率也很低。

我考虑只提取必要的数据（客户 ID——它们是如何连接在一起的、期间和销售数据），然后在运行单独的查询以获取附加数据之后。虽然这看起来效率不高，但这是一种可能性。

另一个，我认为应该是最好的选择，是重写我的查询以继续执行我当前的代码正在执行的操作，并将数据组合在一起，这样客户数据就不会被复制并且我不会移动很多不必要的数据。

为了更好地说明我正在使用的内容，让我们假设这些表：

地址

```
id | HouseNum | Street | Unit | City | State 
```

顾客

```
id | Name | 
```

销售量

```
id | Period | Sales 
```

所以我想在客户 ID 上加入这些表，显示所有地址数据，假设用户输入“2012/01 -- 2012/12”，我可以将其转换为 2012/01、2012/02 ... 2012/12 在我的代码后面输入到查询执行之前，所以我有可用的。

我希望它看起来像：

```
id | Name | HouseNum | Street   | City | State | 2012/01 | 2012/02 | ... | 2012/12
1  | X    | 100      | Main St. | ABC  | DEF   |   30    |         | ... |   20 
```

（该客户在 2012/02 没有销售数据——如果任何数据为空白，我希望它是空白字符串“”，而不是 NULL）

我意识到我可能无法以最好的方式解释这一点，所以请告诉我，我会添加更多信息。谢谢！

编辑：哦，最后一件事。是否可以在末尾添加一个 Min、Max、Avg 和 Total 列，它们汇总了所有透视数据？在后面的代码上做这件事没什么大不了的，但是 sql server 可以为我做的越多越好，imo！

编辑：还有一个，时间段在表格中为“2013/01”等，但我想将它们重命名为“2013 年 1 月”等，如果不是太复杂的话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:17:31.373

您可以实现 PIVOT 函数将数据从行转换为列。您可以使用以下方法获得结果：

```
select id,
  name,
  HouseNum,
  Street,
  City,
  State,
  isnull([2013/01], 0) [2013/01], 
  isnull([2013/02], 0) [2013/02], 
  isnull([2012/02], 0) [2012/02], 
  isnull([2012/12], 0) [2012/12],
  MinSales,
  MaxSales,
  AvgSales,
  TotalSales
from
(
  select c.id,
    c.name,
    a.HouseNum,
    a.Street,
    a.city,
    a.state,
    s.period,
    s.sales,
    min(s.sales) over(partition by c.id) MinSales,
    max(s.sales) over(partition by c.id) MaxSales,
    avg(s.sales) over(partition by c.id) AvgSales,
    sum(s.sales) over(partition by c.id) TotalSales
  from customer c
  inner join address a
    on c.id = a.id
  inner join sales s
    on c.id = s.id
) src
pivot
(
  sum(sales)
  for period in ([2013/01], [2013/02], [2012/02], [2012/12])
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ce1d8/1)。

如果您有未知数量的`period`值要转换为列，则必须使用动态 SQL 来获取结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME(period) 
                    from Sales
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsNull = STUFF((SELECT distinct ', IsNull(' + QUOTENAME(period) + ', 0) as '+ QUOTENAME(period) 
                    from Sales
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT id,
                name,
                HouseNum,
                Street,
                City,
                State,' + @colsNull + ' ,
                MinSales,
                MaxSales,
                AvgSales,
                TotalSales
             from 
             (
               select c.id,
                c.name,
                a.HouseNum,
                a.Street,
                a.city,
                a.state,
                s.period,
                s.sales,
                min(s.sales) over(partition by c.id) MinSales,
                max(s.sales) over(partition by c.id) MaxSales,
                avg(s.sales) over(partition by c.id) AvgSales,
                sum(s.sales) over(partition by c.id) TotalSales
              from customer c
              inner join address a
                on c.id = a.id
              inner join sales s
                on c.id = s.id
            ) x
            pivot 
            (
                sum(sales)
                for period in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/ce1d8/2)。这些给出了结果：

```
| ID |       NAME | HOUSENUM |    STREET |    CITY |  STATE | 2012/02 | 2012/12 | 2013/01 | 2013/02 | MINSALES | MAXSALES | AVGSALES | TOTALSALES |
---------------------------------------------------------------------------------------------------------------------------------------------------
|  1 | Customer X |      100 | Maint St. |     ABC |    DEF |       0 |      20 |      50 |      45 |       20 |       50 |       38 |        115 |
|  2 | Customer Y |      108 |   Lost Rd | Unknown | Island |      10 |       0 |       0 |       0 |       10 |       10 |       10 |         10 | 
```

# internet-explorer-10 - IE10：msxml.load(document.all("UserInfo") 抛出错误

> ID：16112524
> 
> 赞同：0
> 
> 时间：2013-04-19T19:52:22.537
> 
> 标签：internet-explorer-10, msxml

`<xml>`我在文件的标签中有一个 XML 字符串，`.jsp`我正在尝试`xml`使用`xmldoc.Load(document.all("Info"))`它加载它，但它给出了错误

`Invalid procedure call or argument`

但在 Ie9 中一切正常。当我检查 document.all("Info") 它说

`Object UnknownHTMLElement`在 IE 10 和 IE9 中的对象。

这是我使用的代码片段

```
var xmldoc=new ActiveXObject("MSXML2.DOMDocument.3.0");
boolXMLLoaded=xmldoc.load (document.all("UserInfo"))
    <xml id=UserInfo>`
<?xml version='1.0'?><RESPONSES UserName="  DOUGLAS  ................
</xml> 
```

任何帮助是极大的赞赏..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T08:15:57.767

您的代码在较新的 IE 版本中不起作用的原因是因为您使用的是过时的（非常*非常*过时的）代码。如果您希望现代浏览器（包括 IE10）能够正常工作，则需要更新到现代 Web 标准。

两个问题立即显而易见：

1.  `document.all`已弃用多年；你不应该使用它——它是非标准的，并且仍然存在以允许与旧版本的 IE（例如 IE5）向后兼容。现代 IE 版本不会喜欢它，而且它*绝对*不能在 IE 以外的浏览器上运行。

    在大多数情况下，如果您尝试通过 ID 引用元素（如本例所示），则应`document.getElementById()`改为使用。

    来自[Mozilla 开发者网络](https://developer.mozilla.org/en-US/docs/Using_Web_Standards_in_your_Web_Pages/Using_the_W3C_DOM)的更多信息。

2.  `new ActiveXObject("MSXML2.DOMDocument.3.0")`也是非标准和不推荐使用的，也不应该在现代浏览器中使用。同样，它是特定于 IE 的，并且从 IE7 开始被替换为 Web 标准替代方案。

    您应该将其替换为`document.implementation.createHTMLDocument();`. 另请参阅[此处](https://stackoverflow.com/questions/8227612/how-to-create-document-objects-with-javascript)的答案。

    如果您需要支持 IE6 或更早版本，则可以检测浏览器是否支持标准语法，并仅为旧 IE 版本提供回退到旧 ActiveX 控件。

鉴于您向我们展示的一小段代码正在使用两个明显且众所周知的功能，这些功能已经严重过时，如果我们看到更多您的代码，我希望看到更多类似性质的问题. 因此，我建议您在 SO 的姊妹网站[https://codereview.stackexchange.com/](https://codereview.stackexchange.com/)上发布您的一些代码，以获得有关如何改进它的额外反馈。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T15:13:17.837

```
var xmldoc= new ActiveXObject("Microsoft.XMLDOM"); 
```

将其替换为

```
var xmldoc=new ActiveXObject("MSXML2.DOMDocument.3.0"); 
```

再试一次

# c# - 如何在 Caliburn.Micro 中激活相应的屏幕

> ID：16112526
> 
> 赞同：0
> 
> 时间：2013-04-19T19:52:28.977
> 
> 标签：c#, silverlight, binding, mef, caliburn.micro

1.在我的 Silverlight 项目中，我有几个插件（继承 IPlugin 和 IScreen）并使用 MEF 将它们导入 ShellView（主视图）。

2.然后我将Plugins的元数据（我自己定义，包括一个Plugin的一些基本描述）绑定到一个ListBox。

现在我希望 ContentControl 加载与 ListBox 中选择的插件（确切地说是插件元数据）相对应的视图模型。问题是必须在运行时确定和实例化视图模型。我搜索了很多，但似乎人们通常会激活在设计时已经确定的视图模型。例如：

```
ActivateItem(new MyContentViewModel()); 
```

或者：

```
<ContentControl x:Name="MyContent" cal:View.Model="{Binding Path=MyContentViewModel}" /> 
```

我想到的一个想法是通过在我的 PluginMetadata 类中定义一个属性来确定与插件对应的类型，并像这样使用它：

```
[Export(IPlugin)]
[PluginMetadata(Type=typeof(Plugin1), ...some other properties...)]
public class Plugin1 {...} 
```

并使用反射创建的插件实例加载视图模型。

```
ActivateItem(Activator.CreateInstance<SelectedPluginMetadata.Type>()); 
```

或者如果我添加一个属性 SelectedPluginType，我也可以使用绑定：

```
<ContentControl x:Name="MyContent" cal:View.Model="{Binding Path=SelectedPluginType}" /> 
```

但是，在元数据属性中传递类型似乎很不优雅，而且不利于 DRY。

那么有没有更好的解决方案呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T11:21:37.763

好吧，相反：

ViewLocator 公开了这个委托，你可以用你自己的来替换它：

```
 public static Func<Type, DependencyObject, object, UIElement> LocateForModelType = (modelType, displayLocation, context) => {
        var viewType = LocateTypeForModelType(modelType, displayLocation, context);

        return viewType == null
                   ? new TextBlock { Text = string.Format("Cannot find view for {0}.", modelType) }
                   : GetOrCreateViewType(viewType);
    }; 
```

所以我可能会把它放在你的`Bootstrapper.Configure`：

```
 ViewLocator.LocateForModelType = (modelType, displayLocation, context) => 
    {
        if(modelType is IPlugin) modelType = ? // whatever reflection is necessary to get the underlying type? Just GetType()?
        var viewType = ViewLocator.LocateTypeForModelType(modelType, displayLocation, context);

        return viewType == null
                   ? new TextBlock { Text = string.Format("Cannot find view for {0}.", modelType) }
                   : ViewLocator.GetOrCreateViewType(viewType);
    }; 
```

# arrays - 检查单元格数组是否是 Matlab 中另一个的子集

> ID：16112530
> 
> 赞同：5
> 
> 时间：2013-04-19T19:52:33.033
> 
> 标签：arrays, matlab, cell, subset

我有两个字符串单元数组，如下所示

```
 A={{a,b},{c},{d,e}}
 B={{a,b},{c,d},{e}} 
```

我想检查 A 是否是 B 的子集，这意味着 A 中的每个单元格在 B 中都有一个超级单元格。在给定的示例中，它不是因为 A 包含 {d,e} 而 B 没有任何具有那些或更多的元素。我认为 ismember 在这种情况下应该很有用，但我就是无法写下逻辑。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T20:45:45.187

给定 A 和 B

```
A={{'a','b'},{'c'},{'d','e'}}
B={{'a','b'},{'c','d'},{'e'}} 
```

我们可以定义一个函数`isSubset`，如下：

```
isSubset = @(superSet,subSet)isempty(setdiff(subSet, superSet)); 
```

并测试它：

```
isSubset(B{1}, A{1})  %true
isSubset(B{2}, A{2})  %true
isSubset(B{3}, A{3})  %false 
```

* * *

现在我们可以使用`isSubSet`and`cellfun`来定义一个函数`isSubSetOfAny`，它检查一个特定的子集是否是任何一组集合的子集，如下所示：

```
isSubSetOfAny = @(superSetSet, subSet) any(cellfun(@(x)isSubset(x, subSet), superSetSet)); 
```

并测试它：

```
isSubSetOfAny(B, A{1})  %True
isSubSetOfAny(B, A{2})  %True
isSubSetOfAny(B, A{3})  %True 
```

* * *

现在我们可以使用`isSubSetOfAny`plus `cellfun`（再次）来定义`isEachMemberASubsetOfAny`，它执行您描述的操作：

```
 isEachMemberASubsetOfAny = @(superSetSet, subSetSet) all(cellfun(@(x)isSubSetOfAny(superSetSet, x), subSetSet)); 
```

并测试它：

```
isEachMemberASubsetOfAny(B, A)    %Returns false

A_1 = {{'a','b'},{'c'},{'e'}};    %Define a variant of `A`
isEachMemberASubsetOfAny(B, A_1)  %Returns false 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T20:33:34.177

怎么样：

```
function tf = is_subset(A,B)
    narginchk(2,2)
    assert(iscell(A) && all(cellfun(@iscellstr,A)));
    assert(iscell(B) && all(cellfun(@iscellstr,B)));

    for ia=1:numel(A)
        tf = false;
        for ib=1:numel(B)
            if all(ismember(A{ia},B{ib}));
                tf = true;
                break
            end
        end
        if ~tf
            break
        end
    end
end 
```

和

```
[a,b,c,d,e] = deal('1','2','3','4','5');

A = {{a,b},{c},{d,e}};
B = {{a,b},{c,d},{e}};
is_subset(A,B)             %# false

B = {{a,b},{c,d,e},{e}};
is_subset(A,B)             %# true 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-19T20:36:45.923

假设 a,b 等是字符串，您可以执行以下操作：

对于 A 的每个单元格，遍历 B 并查看 B 中是否存在一个单元格，该单元格中的所有元素都是其成员。这是一个例子：

```
 A={{'abc','b'},{'c'},{'d','e'}};
 B={{'aabc','b'},{'c','d'},{'d','e'}}; %Remove the first a to return true

 subset = true;
 for i = 1:length(A)
     found = false; 
     for j = 1:length(B)
         found = found || all(ismember(A{i},B{j}));
     end
     subset = subset && found;
 end
 subset 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-19T20:38:33.140

a、b等有哪些类型？如果它们是字符串，您可以使用它`setdiff`来测试一个集合是否包含在另一个集合中。适当使用`cellfun`和`any`或`all`应该这样做。像这样：

```
all(cellfun(@(a)any(cellfun(@(b)isempty(setdiff(a,b)),B)),A)) 
```

如果它们是其他类型，您可以制作一个简单的 m 文件来检查超级单元。替换`isempty(setdiff(a,b))`为对此函数的调用。它将必须遍历 的元素`a`并检查每个元素是否存在于`b`.

# javascript - 测试页面是否有水平滚动条（计算机和移动设备）

> ID：16112531
> 
> 赞同：5
> 
> 时间：2013-04-19T19:52:35.963
> 
> 标签：javascript, jquery, html, cross-browser, scrollbar

在网页上，我需要测试是否有水平滚动条（以便我以编程方式更改其他元素的 css）。有没有办法使用jquery（或纯javascript）获取这些信息？

我测试过

```
function isHorizontalScrollbarEnabled() {
    return $(document).width()!=$(window).width();
} 
```

但它似乎不适用于所有浏览器（例如不适用于我测试过的最近的三星手机）。我需要它与所有浏览器一起工作，包括最近的移动设备。

谢谢！

**编辑 1**

我测试了 plalx 和 laconbass 提供的解决方案，测试了 IE8、Firefox、Chrome 和 iPad。适用于 IE、Firefox 和 Chrome，但在 iPad 上不是我想要的。

这个问题似乎与移动设备上的缩放功能有关：尽管当我在 iPad 上放大时，会出现一个水平滚动条`document`，`window`并且`document.body`宽度没有改变（我今天早些时候测试的三星手机也是同样的问题）。

这是我用来测试的代码：

```
<!DOCTYPE html>
<html lang="en">
    <head>
      <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8/jquery.min.js"></script>
      <title>test</title>
    </head>

    <body>
      <div style="width: 500px; background: red;" id="test">click here to test</div>
      <script type="text/javascript">
        var i = 1;
        $("#test").click(function(){
          $(this).html("Test #" + (i++) 
    + "<br>document width=" + $(document).width() + ", windows width=" + $(window).width()
    + "<br>document width=" + $(document).width() + ", body width=" + $(document.body).width()
          );  
        });     
      </script>
    </body>
</html> 
```

知道如何检测在 iPad 等移动设备上放大/缩小后也可以工作的水平滚动条的存在吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-19T19:58:46.767

```
//scrol 1px to the left
$(document).scrollLeft(1);

if($(document).scrollLeft() != 0){
   //there's a scroll bar
}else{
   //there's no scrollbar
}

//scroll back to original location
$(document).scrollLeft(0); 
```

这是有效的，因为如果没有可用的滚动条，JQuery 将无法滚动屏幕

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T20:12:21.183

**编辑 2**：我投了反对票，因为这对页面没有任何作用，所以我根据@Pabs123 的回答构建了一个通用解决方案，只是为了好玩：

```
function hasScrollX( selector ){
    var e = $(selector), fn = 'scrollLeft';
    return e[fn](1) && e[fn]() > 0 && e[fn](0) && true;
} 
```

甚至

```
jQuery.fn.hasScrollX = function( ){
    var fn = 'scrollLeft';
    return this[fn](1) && this[fn]() > 0 && this[fn](0) && true;
} 
```

[在这里](http://jsfiddle.net/BwSVM/4/)查看它，以及如何轻松调整它以检测垂直滚动条的存在。

**编辑**：在 chrome 和 firefox 上测试和工作。由于 jQuery 团队进行交叉浏览工作，**我建议使用 jQuery 而不是原生 javascript**。

我很好奇如何以比之前建议的更优雅的方式做到这一点（实际上有效）

以下比较对我有用

```
$(document).width() > $(window).width() 
```

你可以看到它在[滚动条](http://jsfiddle.net/BwSVM/)的作用下，[没有它](http://jsfiddle.net/xyCph/)

# javascript - AngularJs 监听服务的变化

> ID：16112532
> 
> 赞同：0
> 
> 时间：2013-04-19T19:52:36.490
> 
> 标签：javascript, angularjs

为什么在 1、2、3 种情况下更改服务中的消息不会影响显示的消息？

```
var app = angular.module('app', []); 

app.factory('Message', function() {
  return {message: "why this message doesn't changed"};
});

app.controller('Changer', function($scope, Message) {
  Message.message = "first" // (1)

  $scope.changeItems = function() {
    Message.message = "second" // (2)
  }
});

app.controller('Listener', function($scope, Message) {
  $scope.message = Message.message
  Message.message = "third" // (3)
}); 
```

而我的观点：

```
<div ng-controller="Listener">
  {{ message }}  
</div>

<div ng-controller="Changer">
  <button ng-click="changeItems()">change message</button>
</div> 
```

我还在 plunkr [http://plnkr.co/edit/BUPS6U0S7ktDEkH9dZTZ?p=preview上创建了示例](http://plnkr.co/edit/BUPS6U0S7ktDEkH9dZTZ?p=preview)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:59:57.663

原因是“Listener”控制器首先被启动，因为它首先出现在 View 的 HTML 中。如果您切换顺序，您将看到“First”消息。

还有一件事，当您设置对字符串的引用然后更改字符串时，您会丢失引用，这就是为什么引用对象然后渲染对象的属性更强大的原因如下：

控制器：

```
$scope.Message = Message 
```

看法：

```
{{Message.message}} 
```

这样你就不会失去参考

# asp.net - 角色 - User.IsInRole 的问题

> ID：16112536
> 
> 赞同：2
> 
> 时间：2013-04-19T19:52:51.917
> 
> 标签：asp.net, role

我有一个注册页面，一旦用户单击提交按钮，用户就会被分配到如下角色：

```
 MembershipUser oMU;

    if (!(Roles.RoleExists("Stream")))
    {
        Roles.CreateRole("Stream");
    }

    oMU = Membership.CreateUser(txtUserName.Text.Trim(), txtPassword.Text.Trim(), txtEmail.Text.Trim());

    Membership.UpdateUser(oMU);

    Roles.AddUserToRole(oMU.UserName, "Stream"); 
```

当用户进入登录屏幕时，我有以下内容：

当用户登录时，我需要确保他们确实是该角色的一部分：

```
 if (User.IsInRole("Stream"))
    {

    } 
```

但它永远不会进入 User.IsInRole 块。我需要做什么才能让注册的用户成为角色的一部分，以便它与 User.IsInRole 一起使用。

请注意，我有一个文件夹，因此我需要它们成为 Streaming Role 的一部分：

```
 <?xml version="1.0"?>
   <configuration>
   <system.web>
    <authorization>
        <deny users="*" />
        <allow roles="Stream" />           
    </authorization>
    </system.web>
  </configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:00:28.610

`<allow roles="Stream" />`上移`<deny users="*" />`。否则，所有用户都将被拒绝。

```
<configuration>
   <system.web>
    <authorization>
        <allow roles="Stream" />    
        <deny users="*" />       
    </authorization>
    </system.web>
</configuration> 
```

**确保您在 web.config 中有成员资格和 RoleManager**

这是样本 -

```
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <clear/>
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="XXXXXSqlConnection" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="XXXXX"/>
  </providers>
</membership>
<roleManager enabled="true" cacheRolesInCookie="false" defaultProvider="DefaultRoleProvider">
  <providers>
    <clear/>
    <add name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider, System.Web.Providers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" connectionStringName="XXXXXSqlConnection" applicationName="XXXXX"/>
  </providers>
</roleManager> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:06:22.220

尝试使用**HttpContext**获取当前登录用户：

```
if (HttpContext.Current.User.IsInRole("Stream"))
{

} 
```

# sql - SQL中的自然连接

> ID：16112538
> 
> 赞同：0
> 
> 时间：2013-04-19T19:52:59.153
> 
> 标签：sql, join

```
TableA                            TableB
Column1    Column2                Column3    Column4
1          2                      1          3 
```

我有两个表TableA（Column1，Column2）和TableB（Column3，Column4）。我想使用column1，column4（LIKE NATURAL JOIN）连接两个表。在 SQL 中有什么东西可以连接两个表并返回一个删除重复列的新表吗？

我想选择这个：

```
column1  column2  column4
1        2        3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:56:08.740

支持的 DBMS`NATURAL JOIN`要求连接键的列名匹配，如果这样做，`SELECT *`您将只获得唯一的列名。尝试指定列名是没有意义的，因为整个事情都是通过已经相同的名称来工作的。

您必须在两个表之间有同名列，因为它将使用它们之间的**每个**同名列来执行连接。`TableA`您的表`TableB`不适合自然连接，因为它们不共享任何列名。

所以你被降级为定期加入：

```
SELECT
   A.*, -- you can at least get all the columns from one table
   B.Column4 -- but you have to specify the rest one at a time
FROM
   TableA A
   INNER JOIN TableB B
      ON A.Column1 = B.Column3
; 
```

你只需要硬着头皮写下查询。您可能不想写列名，但这*是不可能的*。

一些注意事项：当您说“返回一个新表”时，我想我知道您的意思，但从技术上讲，它是一个*行集*，因为要成为一个表，它必须以名称存储在数据库中。

可以为视图或内联派生表*中*的列设置别名，但您没有告诉我们您使用的是什么特定的 DBMS，因此我们可以回答它的确切功能。它**可能**看起来像这样：

```
SELECT
   *
FROM
   TableA A
   NATURAL JOIN (
      SELECT Column1 = Column3, Column4
      FROM TableB B
   ) B
; 
```

但请注意，您仍然必须列出所有*其他*列`TableB`才能执行此操作。而且我什至不确定它是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:08:44.013

'Distinct' 语句也可以防止重复类似的行

```
SELECT Distinct
   TableA.Column1,
   TableA.Column2,
   TableB.Column4
FROM
   TableA INNER JOIN TableB ON TableA.Column1 = TableB.Column3 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:56:22.583

连接两个表并查询部分或全部列不会返回新表，而是返回记录集。要得到你想要的，试试这个。下面的查询遵循 SQL 标准，因此应该适用于所有 SQL 兼容的数据库。

```
SELECT ta.column1, ta.column2, tb.column4 from TableA ta INNER JOIN TableB tb ON     (ta.column1 = tb.column4) 
```

如果要使用自然联接，则需要具有相同的列。

# linux-device-driver - 更新 Linux 设备驱动程序

> ID：16112543
> 
> 赞同：1
> 
> 时间：2013-04-19T19:53:14.217
> 
> 标签：linux-device-driver, ioctl

我是 LDD 新手，我被分配了一项任务，即升级在`2.6.35`内核上工作的驱动程序以在当前内核上工作，`3.6.10`.

为了让驱动程序能够编译，我必须按照[这里](https://stackoverflow.com/questions/5956145/can-someone-help-me-replace-lock-kernel-on-a-block-device-driver)的描述从`ioctl`更改为。`unlocked_ioctl`

然而，驱动程序未能正确执行其若干操作。

驱动程序应该通过 PCI 总线使用 DMA 来写入主机上的缓冲区。我怀疑设备发出的中断没有通过。

是否需要进行任何明显的更改才能使该驱动程序正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T04:03:40.383

我假设只有内核版本有变化，而你的硬件没有变化。编译的时候有没有报错？

# html - XML到HTML：一定数量的行后停止循环

> ID：16112544
> 
> 赞同：1
> 
> 时间：2013-04-19T19:53:15.247
> 
> 标签：html, xml, xml-parsing

我有一个关于 XML 到 HTML 循环的快速问题。我遵循[w3schools 指南](http://www.w3schools.com/xml/xml_to_html.asp)从 XML 文档呈现 HTML 表格，一切都很好！我不想更改代码的任何内容，但我想知道是否可以在呈现十行之后停止循环，即使原始 XML 文件包含更多数据。如果是这样，我将如何更改 w3schools 显示的示例中的代码（转载如下）？

```
<script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","cd_catalog.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("CD");
for (i=0;i<x.length;i++)
  { 
  document.write("<tr><td>");
  document.write(x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
  document.write("</td></tr>");
  }
document.write("</table>");
</script> 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T19:55:55.420

[中断声明](https://developer.mozilla.org/en/JavaScript/Reference/Statements/break)

for 循环计算并写入从 0 (i=0) 到 XML 行数 (x.length) 的行...只需让它从 0 运行到 9 .. 然后你得到 10 行你可以通过 2 种方式来完成：

第一种：更换

```
for (i=0;i<x.length;i++) 
```

和

```
for (i=0;i<=9;i++) 
```

第二：

在括号内包含一个 if 语句

```
 <script>
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.open("GET","cd_catalog.xml",false);
xmlhttp.send();
xmlDoc=xmlhttp.responseXML; 

document.write("<table border='1'>");
var x=xmlDoc.getElementsByTagName("CD");
for (i=0;i<x.length;i++)
  { 
  if(i==10)
     break;
  document.write("<tr><td>");
  document.write(x[i].getElementsByTagName("ARTIST")[0].childNodes[0].nodeValue);
  document.write("</td><td>");
  document.write(x[i].getElementsByTagName("TITLE")[0].childNodes[0].nodeValue);
  document.write("</td></tr>");
  }
document.write("</table>");
</script> 
```

# c - C 中的每月付款，变量和输出问题

> ID：16112547
> 
> 赞同：-3
> 
> 时间：2013-04-19T19:53:17.460
> 
> 标签：c

这是我第一次来这里，我在编写程序时遇到了问题。我正在尝试获得每月付款和返还工资，根据工资和汽车付款的大小使用不同的打印报表。但是，我的输出没有正确输出。我收到 .2f 作为输出变量，而不是我想要的变量。有谁知道可能出了什么问题？

```
#include <stdio.h>
#include <math.h>

int main() {
    float cost;
    float interest;
    int years;
    float salary;
    float sal_twenty;
    float payment;
    float IM;
    float NumMon;

    printf("Enter annual income > ");
    scanf("%f", &salary);

    printf("Enter cost of car > ");
    scanf("%f", &cost);

    printf("Enter annual interest rate > ");
    scanf("%f", &interest);

    printf("Enter duration of loan in years > ");
    scanf("%d", &years);

    sal_twenty = salary * .2;
    IM = interest/12;
    NumMon=years*12;
    payment = cost * (IM * pow((IM + 1), NumMon))/(pow((IM + 1), NumMon) - 1);

    if (payment*12 > sal_twenty) {
        printf("A monthly payment of ");
        printf(".2f", payment);
        printf(" is too high given your annual income of ");
        printf(".2f", &salary);
    }

    if (payment*12 <= sal_twenty) {
        printf("Your annual income of ");
        printf(".2f", salary);
        printf(" allows a monthly payment of ");
        printf(".2f", payment);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:54:49.503

你忘记了`%`格式`printf`。IE

```
printf("%.2f", payment); 
```

等等。（正如你正确地做的那样`scanf`）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T19:56:24.510

在这`printf(".2f", &salary);`应该是

```
printf("%.2f", salary); 
```

即`&`以前没有`salary`。

# excel - VBA Excel 代码条码扫描

> ID：16112548
> 
> 赞同：0
> 
> 时间：2013-04-19T19:53:22.767
> 
> 标签：excel, excel-2010, vba

我有这个 excel 电子表格，并且我正在使用条形码扫描仪，每次我用条形码扫描仪捕获某些东西时，光标都会跳过一列。

![在此处输入图像描述](https://i.stack.imgur.com/N2H5L.jpg)

例如在 A3 单元格捕获信息，因此光标将移动到 C3，在 C3 我捕获另一个条形码，光标将移动到 E3 等等；一次是在G3，应该回到A4去捕捉另一个盒子。

这是我的代码......

```
Private Sub Worksheet_Change(ByVal Target As Range)
On Error GoTo Whoa

Application.EnableEvents = False
If Not Target.Cells.CountLarge > 1 Then
    If Not Intersect(Target, Columns(1)) Is Nothing Then
        Target.Offset(, 1).Select
    ElseIf Not Intersect(Target, Columns(2)) Is Nothing Then
        Target.Offset(, 1).Select
    ElseIf Not Intersect(Target, Columns(3)) Is Nothing Then
        Target.Offset(, 1).Select
    ElseIf Not Intersect(Target, Columns(4)) Is Nothing Then
        Target.Offset(, 1).Select
    ElseIf Not Intersect(Target, Columns(5)) Is Nothing Then
        Target.Offset(, 1).Select
    ElseIf Not Intersect(Target, Columns(6)) Is Nothing Then
        Target.Offset(, 1).Select
    ElseIf Not Intersect(Target, Columns(7)) Is Nothing Then
        Target.Offset(1, -6).Select
    End If
End If
Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

当我手动操作（没有扫描仪）但使用条形码扫描仪时它会返回到 B 列。

例如，在 G3，我用条形码捕获日期，然后它移动到 B4 而不是 A4，因此我可以开始扫描第二个框。

我需要一些帮助来开发正确的代码，以便我可以使用我的扫描仪在我的小仓库中捕获库存

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-20T03:19:41.757

也许您的条形码扫描仪会在每次输入后自动插入一个标签或输入按键。也许你的最后一行应该是。选择`Target.Offset(1, -7)`这 -7 列而不是 6 列可以补偿条码扫描器向右跳动的额外时间。或使用

```
cells(Target.row+1,1).Select 
```

对于麻烦的最后一行代码，这告诉它选择当前行加一，最后选择列 A 或 1。

# javascript - Google Chrome 扩展程序 - 在后台执行音频播放器页面

> ID：16112552
> 
> 赞同：0
> 
> 时间：2013-04-19T19:53:44.460
> 
> 标签：javascript, google-chrome, background

当我单击我正在构建的扩展时，我需要执行一个包含音频播放器的页面。但是当我点击它之外时，播放器会停止。我需要让它继续运行。

我尝试在清单文件上使用“背景”属性，但我认为它只适用于 javascript 文件。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T11:01:37.513

您应该使用背景页面或活动页面（根据永久或临时需要）。

> [http://developer.chrome.com/extensions/background_pages.html](http://developer.chrome.com/extensions/background_pages.html)

您只需`page`为该属性提供一个属性`background`。如上页所述。

# java - 替换文件中所有出现的字符

> ID：16112553
> 
> 赞同：0
> 
> 时间：2013-04-19T19:53:50.407
> 
> 标签：java, string, replace

有没有一种快速的方法可以将文件中所有出现的给定字符（一次整个文件）替换为另一个？

我想知道这是否可以以全球方式或其他方式完成，而无需逐行阅读。

在我的具体情况下，我想用`|`逗号（ ）替换管道（ `,`）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T19:55:30.883

只需[从文件中检索文本](https://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file)，然后使用`string.replaceAll("\\|", ",");`

这是一个使用埃里克森答案中的代码的示例：

> ```
> private static String readFile(String path) throws IOException {
>   FileInputStream stream = new FileInputStream(new File(path));
>   try {
>     FileChannel fc = stream.getChannel();
>     MappedByteBuffer bb = fc.map(FileChannel.MapMode.READ_ONLY, 0, fc.size());
>     /* Instead of using default, pass in a decoder. */
>     return Charset.defaultCharset().decode(bb).toString();
>   }
>   finally {
>     stream.close();
>   }
> } 
> ```

你可以像这样使用它：

```
String replacedTxt = readFile(path).replaceAll("\\|", ","); 
```

# eclipse - 如何在 Eclipse 中关闭文本选择魔法

> ID：16112554
> 
> 赞同：0
> 
> 时间：2013-04-19T19:54:04.127
> 
> 标签：eclipse

Mac 的代码编辑器 Eclipse 中的文本选择是一场噩梦。我从不记得在 Windows 上遇到过这些问题，所以它很可能是 Mac 特有的将选择光标移动到下一个单词分隔符。

*   选择光标左侧的文本：SHIFT + ALT + 左箭头。您选择文本。再次做同样的事情，而不是选择下一个单词，而是选择一个段落
*   选择光标右侧的文本：SHIFT + ALT + 左箭头。然后，撤消 SHIFT + ALT + 右箭头。您现在已经选择了原始文本和原始光标位置左侧的单词

那么，有没有办法关闭这种魔法，只进行一种可预测的文本选择呢？在我看来可以预测的是 CMD + 左箭头选择直到下一个分隔符离开。使用右箭头执行相同的操作，这意味着将选择光标向右移动。ETC

# mono - 如何将 java 示例中的侦听器传递到 monodroid 中的 .net

> ID：16112555
> 
> 赞同：0
> 
> 时间：2013-04-19T19:54:04.903
> 
> 标签：mono, xamarin.android, universal-image-loader

使用 Android 通用图像库的 monodroid java 绑定项目，我如何将它从 java 转换为 .net？我可以将它传递给加载侦听器吗？

Java 代码示例

```
// Load image, decode it to Bitmap and return Bitmap to callback
imageLoader.loadImage(imageUri, new SimpleImageLoadingListener() {
    @Override
    public void onLoadingComplete(String imageUri, View view, Bitmap loadedImage) {
        hideSpinner();  
        //do I set the image view to the view we get back here?
    }
}); 
```

。网 ？

```
ImageLoader.Instance.LoadImage(imageUri, ... can I put a lambda in here or do I have to 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T02:16:36.513

C# 不支持具有接口实现的匿名类，这样只能实现公共只读属性。所以你必须创建一个类，它实现了`SimpleImageLoadingListener`.

类似的东西：

```
public class MySimpleImageLoadingListener : SimpleImageLoadingListener
{
    public override void OnLoadingComplete(String imageUri, View view, Bitmap loadedImage)
    {
        //Do whatever you need in here.
    }
} 
```

然后您必须创建一个实例并将其传递给`LoadImage()`：

```
ImageLoader.Instance.LoadImage(imageUri, new MySimpleImageLoadingListener()); 
```

# java - 从 InitialContext 检索数据源时发生 ClassCastException

> ID：16112559
> 
> 赞同：2
> 
> 时间：2013-04-19T19:54:12.430
> 
> 标签：java, classcastexception, weblogic12c

尝试使用 Oracle WebLogic 12.1 从初始上下文中检索数据源对象时出现以下错误：

> “创建虚拟 orb 的问题：org.omg.CORBA.COMM_FAILURE：vmcid:SUN 次要代码：203 已完成：否”和“java.lang.ClassCastException：java.lang.Object 无法转换为 java.io.Serializable”

代码是：

```
Hashtable h=new Hashtable();

h.put(Context.INITIAL_CONTEXT_FACTORY,"weblogic.jndi.WLInitialContextFactory");
h.put(Context.PROVIDER_URL,"t3://localhost:7001/");
h.put(Context.SECURITY_PRINCIPAL,"ck");
h.put(Context.SECURITY_CREDENTIALS,"monster26");

Context c = new InitialContext(h);

DataSource ds = (DataSource) c.lookup("lic.mod.mypool");
Connection con = ds.getConnection(); 
```

感谢所有帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-25T16:20:11.690

我遇到了同样的问题

我解决了它改变了网络逻辑客户端

我现在使用这个版本：

```
 <dependency>
        <groupId>com.oracle.weblogic</groupId>
        <artifactId>wlfullclient</artifactId>
        <version>12.1.1.0</version>
        <scope>test</scope>
    </dependency> 
```

# gerrit - 错误：樱桃采摘时 addinfo_cache 失败

> ID：16112561
> 
> 赞同：17
> 
> 时间：2013-04-19T19:54:16.977
> 
> 标签：gerrit, cherry-pick, git-cherry-pick

我在挑选 gerrit 时遇到了以下错误……有人知道这意味着什么吗？为什么有人会看到它？

```
error: addinfo_cache failed for path 'ROE/NAS/src/abc.c 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-03T13:08:45.110

看起来这与空白和 EOL 有关。我今天也遇到了同样的问题，只是使用`git-->mergetool`基于以下线程解决问题 - [http://git.661346.n2.nabble.com/error-addinfo-cache-failed-during-merge-tp6840473p6840622.html](http://git.661346.n2.nabble.com/error-addinfo-cache-failed-during-merge-tp6840473p6840622.html) .

唯一令人担忧的原因是，我现在看到整个文件都被修改了，而不仅仅是我的cherry-pick 变更集中的两行。

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2014-04-07T16:03:36.870

`git stash`在采摘樱桃之前跑步。至少在我的情况下它有所帮助。

# php - Elastica Search 如何从索引的 pdf/附件中检索纯文本结果

> ID：16112562
> 
> 赞同：0
> 
> 时间：2013-04-19T19:54:19.503
> 
> 标签：php, symfony, elasticsearch, elastica

如何使用 FOS Elastica Bundle 从索引的 pdf 文件内容中获取纯文本搜索结果？

我正在使用
ElasticSearch 和 Attachment-Mapper 插件
Elastica
FOS Elastica Bundle，以及 Symfony2 上的 Doctrine

到目前为止，我已经能够启动并运行映射器附件。pdf 文件内容使用[https://github.com/FriendsOfSymfony/FOSElasticaBundle/issues/96](https://github.com/FriendsOfSymfony/FOSElasticaBundle/issues/96)作为指南进行索引。
方法摘要，因此您不必阅读整个 github 帖子：

1) 使用“getEncodedFile”方法创建一个“文档”实体。注意：我只在这个方法中抓取文件内容。我不认为需要在此处对数据进行 base64 编码，因为稍后会发生这种情况（我很确定 Elastica Document 类会这样做）。

2）然后我设置了config.yml：

```
 types: 
          document:  
                mappings:  
                    id: ~  
                    encodedFile:  
                        type: attachment
                persistence:
                    driver: orm 
                    model: MyBundle\Entity\Document
                    provider: ~
                    finder: ~
                    listener: ~ 
```

搜索函数返回正确的实体。当我 var_dump 混合结果时，我得到了正确的实体，包括所有字段。如果我添加“setHighlight”方法，没有任何变化。setHighlight 方法不返回关于“encodedFile”字段的任何内容。我确实得到了 setHighlight 来处理其他领域。

如何从索引的 base64 编码数据中提取纯文本搜索结果（带有一些上下文）？

根据这个堆栈帖子，[数千个文档（pdf 和/或 xml）的可搜索存档的最佳实践](https://stackoverflow.com/questions/10854858/best-practices-for-searchable-archive-of-thousands-of-documents-pdf-and-or-xml/10861308#10861308)，这似乎是可能的。

提前致谢

**更新**

所以我屈服了。我最终使用 XPDF 来提取和索引每个 pdf 文档的文本。然后我就照常运行查询。

# c# - 如何在 C# 代码中更改 Windows 商店应用程序的背景图像？

> ID：16112563
> 
> 赞同：0
> 
> 时间：2013-04-19T19:54:30.103
> 
> 标签：c#, windows, windows-store-apps, windows-store

我想使用 C# 更改 Windows 商店应用程序的背景图像。我正在寻找类似于以下伪代码的背景图像：

```
This.Background.ImageSource= "dracula-128.png"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:08:25.397

一种方法是创建一个`ImageBrush`，设置其`ImageSource`属性，然后将其分配给背景。（代码根据评论更新）

```
//BitmapImage class is within this namespace
using Windows.UI.Xaml.Media.Imaging;    

ImageBrush ib = new ImageBrush();
ib.ImageSource = new BitmapImage(new Uri(@"ms-appx:///dracula-128.png", UriKind.RelativeOrAbsolute));   
this.Background = ib; 
```

# java - 当我尝试创建一个 ListActivity 来进行其他活动时，它只会说“不幸的是，ReptileKeeper 已停止”

> ID：16112572
> 
> 赞同：1
> 
> 时间：2013-04-19T19:54:58.587
> 
> 标签：java, android, eclipse

这是我的代码，我希望能够单击子订单的按钮之一，然后进入与子订单匹配的新活动。谁能告诉我为什么它不起作用？

我的菜单类访问子订单活动：

```
 package com.xeecros.reptilekeeper;

    import android.os.Bundle;
    import android.app.Activity;
    import android.app.ListActivity;
    import android.content.Intent;
    import android.view.Menu;
    import android.view.View;
    import android.widget.ArrayAdapter;
    import android.widget.ListView;

public class MainMenu extends ListActivity {

    String suborder[] = {"Serpentes",
        "Lacertilia", "Chelonia"};

    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(MainMenu.this,
                android.R.layout.simple_list_item_1, suborder));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);
        String localposm = suborder[position];
        try{
        Class ourclass = Class.forName("com.xeecros.reptilekeeper." + localposm);
        Intent mintent = new Intent(MainMenu.this, ourclass);
        startActivity(mintent);
        }catch (ClassNotFoundException e){
            e.printStackTrace();
        }

        } 
```

我希望它能够访问我的 Serpentes 子订单活动：

```
 package com.xeecros.reptilekeeper;

import android.app.ListActivity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class Serpentes extends ListActivity {

    String snakefam[] = {"Boidae", "Colubridae",
            "Elapidae", "Pythonidae", "Viperidae"};
    @Override
    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(Serpentes.this,
                android.R.layout.simple_list_item_1, snakefam));
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {

        super.onListItemClick(l, v, position, id);
        try{
        Class ourclass = Class.forName("com.xeecros.reptilekeeper.MainMenu");
        Intent sintent = new Intent(Serpentes.this, ourclass);
        startActivity(sintent);
        }catch (ClassNotFoundException e){
            e.printStackTrace();
        }
    }

} 
```

非常感谢您的帮助。

我的日志猫：

```
 04-19 19:52:35.731: I/Process(1316): Sending signal. PID: 1316 SIG: 9
04-19 19:59:41.911: D/dalvikvm(1397): GC_FOR_ALLOC freed 44K, 6% free 2655K/2820K, paused 38ms, total 40ms
04-19 19:59:41.921: I/dalvikvm-heap(1397): Grow heap (frag case) to 3.780MB for 1127536-byte allocation
04-19 19:59:41.971: D/dalvikvm(1397): GC_FOR_ALLOC freed 2K, 5% free 3754K/3924K, paused 42ms, total 42ms
04-19 19:59:42.021: D/dalvikvm(1397): GC_CONCURRENT freed <1K, 5% free 3757K/3924K, paused 4ms+12ms, total 52ms
04-19 19:59:42.251: D/gralloc_goldfish(1397): Emulator without GPU emulation detected.
04-19 19:59:58.691: D/AndroidRuntime(1397): Shutting down VM
04-19 19:59:58.691: W/dalvikvm(1397): threadid=1: thread exiting with uncaught exception (group=0x40a71930)
04-19 19:59:58.721: E/AndroidRuntime(1397): FATAL EXCEPTION: main
04-19 19:59:58.721: E/AndroidRuntime(1397): android.content.ActivityNotFoundException: Unable to find explicit activity class {com.xeecros.reptilekeeper/com.xeecros.reptilekeeper.Serpentes}; have you declared this activity in your AndroidManifest.xml?
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1618)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.app.Instrumentation.execStartActivity(Instrumentation.java:1417)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.app.Activity.startActivityForResult(Activity.java:3370)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.app.Activity.startActivityForResult(Activity.java:3331)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.app.Activity.startActivity(Activity.java:3566)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.app.Activity.startActivity(Activity.java:3534)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at com.xeecros.reptilekeeper.MainMenu.onListItemClick(MainMenu.java:35)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.widget.AdapterView.performItemClick(AdapterView.java:298)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.widget.AbsListView$1.run(AbsListView.java:3423)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.os.Handler.handleCallback(Handler.java:725)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.os.Looper.loop(Looper.java:137)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at java.lang.reflect.Method.invokeNative(Native Method)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at java.lang.reflect.Method.invoke(Method.java:511)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-19 19:59:58.721: E/AndroidRuntime(1397):     at dalvik.system.NativeStart.main(Native Method)
04-19 20:00:02.481: I/Process(1397): Sending signal. PID: 1397 SIG: 9 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:08:12.587

每个活动都必须在清单文件中注册。看来你还没有这样做。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    ... >

    <application
        ... >
        <activity
            android:name=".YourActivity"
            ... />
    </application>
</manifest> 
```

# c# - 我如何知道对应的 c++ 头文件需要什么 c# 参考文件

> ID：16112584
> 
> 赞同：0
> 
> 时间：2013-04-19T19:55:45.927
> 
> 标签：c#, interop, header-files

我确信这不是一个新问题，但我不知道该看什么或在哪里看。我想将此 c++ 程序转换为 c#。 [http://msdn.microsoft.com/en-us/library/windows/desktop/dd389098(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd389098%28v=vs.85%29.aspx) 该示例包括 dshow.h，但我在等效的示例 c# 代码中发现，什么 c#需要的是quartz.dll。我怎么知道 dshow.h 包含在quartz.dll 中？另一个文件包括 window.h。对应的dll文件是什么？

所有 COM 库都在 system32 文件夹中吗？

所有 .dll 文件都可以通过 tlbimp.exe 转换为 RCW 吗？（我试图转换kernel32.dll，但我不能。这是为什么呢？）

C++ 使用 hr = object->function(); 获取返回消息。我如何在 C# 中做到这一点？

# sql - 表删除后留下外键？

> ID：16112585
> 
> 赞同：0
> 
> 时间：2013-04-19T19:55:46.313
> 
> 标签：sql, ssms

所以这对你来说很有趣……我正在将一个完整的数据库`(db1)`和结构从一个数据库复制到另一个数据库`(db2)`，在这样做之前，我决定尝试从 db2 中删除所有表。我照常做了`sp_msforeachtable 'ALTER TABLE ? NOCHECK CONSTRAING ALL'`，然后`sp_msforeachtable 'DROP TABLE ?'`让我很沮丧的是，它删除了所有可能只剩下 6 张桌子的东西。这些表似乎仍然有对它们的外键引用。我进行了搜索，发现了这个[SQL DROP TABLE 外键约束](https://stackoverflow.com/questions/1776079/sql-drop-table-foreign-key-constraint)，它向我展示了如何查找然后尝试删除这些外键引用。

这是有趣的部分：在尝试使用该信息删除它们时，我被告知 ssms 找不到该对象，因为它不存在或我没有权限。外键引用来自我之前删除的表。

这怎么可能？我到底要如何从这里进步？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T05:59:27.990

我不知道您在“尝试删除它们时”*是什么意思。*如果您试图从系统表中删除外键，那肯定是一个错误。

我的猜测是您现在可以删除最后 6 个表。

假设我们有两个表 A 和 B

```
create table A (a int) 
create table B(b int, foreign key (b) references (A.a)) 
```

我们尝试删除表格。 `drop table A`将失败，因为 B 使用声明的外键引用它。但是我们可以自由`drop table B`，因为 A 不在乎它是否不再被引用。

所以在第一遍之后，一个`DROP`失败一个成功，留下一个表，现在没有 FK 引用。再试一次，瞧！，`drop table A`现在可以工作了。

# html - mvc razor 与 @html.actionurl 在数据库中存储的 HTML

> ID：16112587
> 
> 赞同：3
> 
> 时间：2013-04-19T19:55:50.457
> 
> 标签：html, asp.net-mvc, entity-framework, razor

我已经在谷歌上搜索了很长时间，但还没有找到我需要的东西。这是我们的场景。

我们有一个带有 Razor 的 MVC4 应用程序。在一个屏幕上，我们使用 Telerik Editor 控件来保存文本和图像。这些被格式化为 HTML 并存储在数据库中。图像存储为 byte[] 数据，并且 html src“路径”使用不同的文件名进行更新。

稍后用户来并想要查看数据。因为任何图像都存储在数据库中，我想我可以使用此处找到的示例[将字节数组转换为图像并在 Razor 视图中显示](https://stackoverflow.com/questions/7560830/convert-byte-array-to-image-and-display-in-razor-view)，我将使用带有 Url.Action 的标签更新 HTML 中的标签，然后渲染所有这些HTML 到屏幕。

替换图像标记后我的动态生成的 html 代码示例是

```
<p>testing the image blah</p><p><img src="@Url.Action("getImg", "Responses", new { id = 1 }) " alt="Response Image" /> </p> 
```

但是如果我使用 HTML.Raw(Text)，它不会处理图像。如果我只是将该图像标签复制到视图中，效果很好。

我的问题是，如何在视图上正确呈现使用 Razor 语法代码动态创建的 HTML？

*************** 更多细节 ***********

更多细节有助于澄清我在做什么。我有两个模型 Response 和 ResponseImages。

```
public class Response : TrackableBase 
{
    [Key]
    public int ResponseId { get; set; }
    public string Subject{ get; set; }

    [MaxLength]
    public string Text { get; set; }

    public virtual ICollection<ResponseImage> ResponseImages { get; set; }
} 
```

公共类 ResponseImage : TrackableBase { [Key] public int ResponseImageId { get; 放; }

```
 public int ResponseId { get; set; }
    [ForeignKey("ResponseId")]
    public virtual Response Response { get; set; }

    public string FilePath { get; set; }
    public string FileName { get; set; }
    public string FileExtension { get; set; }
    public byte[] Image {get; set;}

} 
```

Response.Text 存储来自 Telerik 编辑器的 HTML。我使用 HTMLAgilitypack 循环遍历 HTML 中的所有图像，并从这些图像中创建 ResponseImage 记录，其中 ResponseImage.FilePath 是我用作返回存储在 Response.Text 中的 HTML 代码的链接（所有图像都更新为不同的名称/路径）。

在我的 Details.cshtml 屏幕上，我想查看 Response.Text 的详细信息。从数据库中，我的 Response.Text 如下所示：

```
<p>hjjk</p><p>
<img alt="" height="144" src="/Content/Editor_Images/UserFiles/JKULBIDA/Images/Koala_635019802303066655.jpg" width="164"></p> 
```

但是，因为我将图像存储在数据库中而不是文件系统中，所以我再次使用 HTMLAgility 包并使用 Razor 语法更新所有图像标签以使用 @Url.Action。我的新 HTML 看起来像这样

```
<p>hjjk</p><p><img src="@Url.Action("getImg", "Responses", new { id = 4 }) " alt="Response Image" /> </p> 
```

最后，在我的视图上，我想显示我的数据，但也要正确格式化 HTML。所以我打电话给@Html.Raw(Model.Text) 并且我的图片标签不起作用:(

*****更新结束****

在此先感谢，因为我非常坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T14:49:59.847

不确定您如何存储数据，但假设您的数据中有 ID 和文本，而不是使用 Razor 语法构建字符串，您的视图应该包含所有必要的标记，并使用数据中的变量它。

例如，如果您有一个局部视图，其中您的模型是具有属性 Id 和描述的图像，那么您的局部视图将如下所示：

```
<img src="@Url.Action("getImg", "Responses", new { id = Model.ID })"
    alt="@Model.Description"> 
```

然后，当您将对象传入部分时，它将正常呈现，而不会对 Razor HTML 进行任何时髦的解析。

**编辑**

如果我理解您的编辑，您正在运行一些代码来将标签的`src`属性转换`img`为您想要的。但是，您将其转换为 Razor 字符串，而不是有效的 HTML - 您要做的是在分配 时实际构建图像的 URL `src`，而不是稍后在视图中时构建图像的 URL。

为此，我相信这将使您继续前进：

```
string imageUrl = RouteTable.Routes.GetVirtualPath(
    System.Web.HttpContext.Current.Request.RequestContext,
    new RouteValueDictionary(new { 
        controller = "Responses", 
        action = "getImg",
        id = Model.ID
    })).VirtualPath; 
```

这将基于代码中的这些参数构建 MVC URL，因此您可以将其直接转储到`src`属性中。如果您正在处理奇怪的路由或类似的事情，您可能需要稍微调整一下 - 但我认为它应该适用于基本设置。

如果您在控制器内部，我相信您可以做`ControllerContext.RequestContext`，甚至可能只是`ControllerContext`代替获得静态电流。

# javascript - Javascript“中断”总是命中

> ID：16112591
> 
> 赞同：1
> 
> 时间：2013-04-19T19:56:13.900
> 
> 标签：javascript, if-statement, conditional, break

我觉得我在这里遗漏了一些非常基本的东西。为什么我附加的代码没有到达 else 语句？这似乎与 break 语句有关。这可能是我忽略的非常简单的事情。

HTML

```
<button onclick="yo();">Hit me</button> 
```

JS

```
var line = "no";

function yo() {
    if (line == "yes") {
        break;   
    }
    else {
        window.alert("hi");
    }
} 
```

[http://jsfiddle.net/dsX65/](http://jsfiddle.net/dsX65/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T19:57:33.743

因为你有*语法错误*。

`break`statement 可以用在循环和`switch`语句中，不能用在`if`子句中。

> **休息**
> 
> 终止当前循环、开关或标签语句，并将程序控制转移到终止语句之后的语句。

^(（...来自[**MDN**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/break) ...）)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T19:58:31.483

使用`return`代替，`break`这将解决它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T19:59:32.880

我认为您的意思是改用该`return`语句。

```
var line = "no";

function yo() {
    if (line == "yes") {
        return;   
    }
    else {
        window.alert("hi");
    }
} 
```

不过，你可以做得更好：

```
var line = "no";

function yo() {
    if (line !== "yes") {
        window.alert("hi");
    }
} 
```

# javascript - 链接存储在 var 中，获取另一个 var 中的内容

> ID：16112594
> 
> 赞同：0
> 
> 时间：2013-04-19T19:56:26.570
> 
> 标签：javascript, jquery, google-chrome-extension

我有一个存储在变量中的链接，我想在另一个变量中获取它的内容。该页面本身是一个 XML 页面。我知道它可以在 php 中完成，但我很好奇是否有任何方法可以通过 javascript 的 jQuery 来获取它。我在 chrome 扩展中使用它，据我了解，php 没用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:00:59.313

看看[http://api.jquery.com/jQuery.parseXML/](http://api.jquery.com/jQuery.parseXML/)

```
var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>"
    ,xmlDoc = $.parseXML( xml )
    ,$xml = $( xmlDoc )
    ,$title = $xml.find( "title" ); 
```

如果您的 XML 将包含一个`a`标签，您可以使用`$xml.find('a')`.

> “[这](http://google.com/complete/search?output=toolbar&q=microsoft)其中microsoft被另一个词代替了。”

鉴于您发布的新评论，如果您想从浏览器使用 Google 的建议 API，您将无法使用 XML。据我所知，该 API 不是为外部层使用而设计的，它不会接受跨域请求。但是，仍然有一种使用 API 的方法，但是由于变通，您将不得不使用不同的数据格式。

[http://jsfiddle.net/XF8WC/](http://jsfiddle.net/XF8WC/)

在这里，我们将**youtube**指定为`client`url 参数，这允许我们使用 JSONP 来检索数据，因为 API 的返回格式是基于`client`.

有关更多信息，请参阅**[本文](http://blog.shreyaschand.com/2013/01/03/google-autocomplete-api/)**。

```
$.ajax({
    url: 'http://google.com/complete/search',
    data: {
        client: 'youtube',
        q: 'microsoft',
        jsonp: 'searchCallback'
    },
    dataType: 'jsonp'
});

window.searchCallback = function (data) {
    $.each(data[1], function (index, item) {
        console.log(item[0]); //log suggestion
    });
} 
```

# php - cURL 不带回值

> ID：16112595
> 
> 赞同：1
> 
> 时间：2013-04-19T19:56:34.687
> 
> 标签：php, curl, fogbugz

我正在通过 PHP 文件使用 cURL 来创建一个使用从当前票证中提取的值的fogbugz 案例。现在我只是想显示当用户登录fogbugz时收到的令牌，我没有从响应中得到任何值。

这是我在 PHP 文件中使用的代码：

 `````
<?php

$user = "USERNAME";
$password = "PASSWORD";
$url = "fogbugz.spllc.local/api.asp?";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_VERBOSE, true);
curl_setopt($ch, CURLOPT_TIMEOUT, 15);
curl_setopt($ch, CURLOPT_PROXYUSERPWD, "[$user]:[$password]");

if (false === ($output = curl_exec($ch)))
{
        print "error" . curl_error($ch);
        die("ERROR" . curl_error($ch));
}
else if (200 !== (int)curl_getinfo($ch, CURLINFO_HTTP_CODE))
{
        print "200";
        die("200");
}

print curl_exec($ch);

curl_close($ch);

?> 
````  `有人可以帮我指出正确的方向吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:15:31.353

当您阅读[http://fogbugz.stackexchange.com/fogbugz-xml-api](http://fogbugz.stackexchange.com/fogbugz-xml-api)上的文档时，您会发现您必须发送 get 或 post 请求。如下所示的东西应该可以工作：

```
$ch = curl_init('http://fogbugz.spllc.local/api.asp?cmd=logon&email=John%20Hancock&password=BigMac');
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
$result = curl_exec($ch);
curl_close($ch); 
```

也看看：[https ://github.com/there4/fogbugz-php-api](https://github.com/there4/fogbugz-php-api)``

# ajax - Asp.Net 4.0 Ajax Postback w/ Redirect 产生双转义网址

> ID：16112599
> 
> 赞同：0
> 
> 时间：2013-04-19T19:57:11.327
> 
> 标签：ajax, redirect, updatepanel, postback, asp.net-4.0

我在会话过期后开始注意到这个问题，我会单击一个按钮在 UpdatePanel 内执行 Ajax 回发。ASP 会捕获过期的会话并将我重定向到主页，但是它发送给我的 URL 被转义并且 ASP 会拒绝该请求

网址：`%2fDefault.aspx%3fReturnUrl%3d%252fMyPage.aspx%253fCurrentDate%253d2013-04-19%26CurrentDate%3d2013-04-19`。

错误：`The request filtering module is configured to deny a request that contains a double escape sequence.`

为了缩小问题的范围，我在 UpdatePanel 内部和外部设置了一个 Postbacks 测试用例。

**测试.aspx：**

```
<asp:UpdatePanel runat="server" ID="upTest">
    <ContentTemplate>
        <asp:LinkButton runat="server" ID="lnkAjaxPostbackTest" OnClick="PostbackTest">AJAX Postback Test</asp:LinkButton><br />
        <asp:LinkButton runat="server" ID="lnkAjaxPostbackRedirectTest" OnClick="PostbackRedirectTest">AJAX Redirect Test</asp:LinkButton>
    </ContentTemplate>
</asp:UpdatePanel>
<asp:LinkButton runat="server" ID="lnkPostbackTest" OnClick="PostbackTest">Postback Test</asp:LinkButton><br />
<asp:LinkButton runat="server" ID="lnkPostbackRedirectTest" OnClick="PostbackRedirectTest">Redirect Test</asp:LinkButton> 
```

**测试.aspx.cs**

```
protected void PostbackTest(object sender, EventArgs e) {
   var x = 3;
}
protected void PostbackRedirectTest(object sender, EventArgs e) {
    Response.Redirect("~/Default.aspx");
} 
```

**结果** 常规（非 Ajax）回发在所有情况下都能正常工作（即使会话过期）。`/%2fDefault.aspx`但是，当我的会话处于活动状态时，AJAX 重定向测试会将我发送到，`/%2fDefault.aspx%3fReturnUrl%3d%252fTest.aspx`如果会话过期，AJAX 回发测试会将我发送到。

那么为什么会这样呢？也许javascript正在处理重定向并且它没有执行`decodeURIComponent`？我在 HTTP 响应中找不到任何表明应该发生重定向的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:31:29.423

罪魁祸首是 AjaxControlToolkit 程序集中的 ToolkitScriptManager。我用 ASP 中提供的常规 ScriptManager 替换了它，问题立即消失了。

总之：AjaxControlToolkit.ToolkitScriptManager + Ajax 回发 + 重定向 => 双转义 Uris

# c# - 视图中的视图不更新 - Caliburn.Micro

> ID：16112600
> 
> 赞同：3
> 
> 时间：2013-04-19T19:57:11.877
> 
> 标签：c#, mvvm, caliburn.micro

我遇到了一个问题，即当附加到视图内的视图时，数据网格没有反映对其集合的更改。更准确地说，我在 MainView 中有一个 SecondView。在 SecondView 上，我有一个将 autogeneratecolumns 设置为 true 的数据网格；首次呈现数据网格时，它会显示相应的列和标题。但是，当我填充附加到它的列表时，不会反映任何更改。

以下是两个视图及其各自视图模型的完整代码： MainWindowView：

```
<Window x:Class="MyApp.MainWindowView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:views="clr-namespace:MyApp"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindowView" Height="300" Width="300">
<Grid>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="File">
                <MenuItem Header="Open" x:Name="Open"/>
                <MenuItem Header="Exit" x:Name="Exit"/>
            </MenuItem>
        </Menu>
        <StackPanel DockPanel.Dock="Bottom">
            <views:SecondView/>
        </StackPanel>
    </DockPanel>
</Grid> 
```

主窗口视图模型：

```
namespace MyApp
{
[Export(typeof(IShell))]
internal class MainWindowViewModel : Screen, IShell
{
    Regex expression = new Regex(@"^N\d\.C\d\.D\d\.R\d:\s\s\s-\d"); //ex. "N1.C1.D2.R1:   -3"        
    SecondViewModel svm = new SecondViewModel();        
    public void Open()
    {
        Microsoft.Win32.OpenFileDialog openFile = new Microsoft.Win32.OpenFileDialog();
        openFile.Multiselect = true;
        openFile.Filter = "Text Files(*.txt)|*.txt|Log Files(*.log)|*.log|All Files(*.*)|*.*";
        openFile.Title = "Open File(s)";
        bool? userClickedOK = openFile.ShowDialog();
        string[] _fileNames = openFile.FileNames;
        if (userClickedOK == true)
        {
            if (_fileNames != null)
            {
                for (int i = 0; i < _fileNames.Length; i++)
                {
                    ValidFiles(_fileNames[i]);
                }
            }
        }
    }
    public void Exit()
    {
        App.Current.Shutdown();
    }
    /* ValidFiles() accepts a string containing a filename and creates a Streamreader that reads the file if it is not a Boxboro file.
     */
    public void ValidFiles(string filename)
    {
        string line;
        using (StreamReader sr = new StreamReader(filename))
        {
            while ((line = sr.ReadLine()) != null)
            {
                if (line.Contains("Mono Status"))
                {
                    Console.WriteLine("File(s) not supported by this parser. Please select a valid file.");
                    break;
                }
                else
                {
                    IsMatch(line);
                }
            }
        }
    }
    /* IsMatch() accepts a string "input" and determines which parsing method to send the string to, if any.
     * Strings not matching any of the initial criteria are not processed to limit overhead.
     */
    public void IsMatch(string input)
    {
        Match match = expression.Match(input);
        if (match.Success)
        {
            svm.GetData(input);
        }
    }
} 
```

}

第二个窗口视图：

```
<UserControl x:Class="MyApp.SecondView"
         xmlns:cal="http://www.caliburnproject.org"
         cal:Bind.Model="MyApp.SecondViewModel"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>
    <StackPanel>
        <DataGrid x:Name="MyList"/>
    </StackPanel>
</Grid> 
```

第二个窗口视图模型：

```
namespace MyApp
{
[Export(typeof(SecondViewModel))]
class SecondViewModel:Screen
{
    Parse parse = new Parse();
    BindableCollection<MyObject> myList = new BindableCollection<MyObject>();
    MyObject myObject;
    public MyObject MyObject
    {
        get { return myObject; }
        set
        {
            myObject = value;
            NotifyOfPropertyChange(() => MyList);
        }
    }
    public BindableCollection<MyObject> MyList
    {
        get { return myList; }
        set 
        { 
            MyList = value;
            NotifyOfPropertyChange(() => MyList);
        }
    }
    public void GetData(string input)
    {
        string[] tempArray = input.Split();
        List<int> tempList = new List<int>();
        for (int i = 1; i < tempArray.Length; i++)
        {
            if (!string.IsNullOrEmpty(tempArray[i]))
            {
                tempList.Add(Convert.ToInt32(tempArray[i]));
            }
        }
        int[] tempIntArray = tempList.ToArray();
        MyObject = new MyObject(tempArray[0], tempIntArray[0], tempIntArray[1], tempIntArray[2], tempIntArray[3]);
        this.MyList.Add(MyObject);

        Console.WriteLine("MyList has " + MyList.Count.ToString() + " elements.");
        //foreach (MyObject item in MyList)
        //{
        //    Console.WriteLine(item.Location);
        //}
    }
} 
```

}

助推器：

```
namespace MyApp
{
    internal class AppBootStrapper : Bootstrapper<IShell>
    {
        static AppBootStrapper()
        {
            //Initializes the logger for debugging, remove or comment out in release.
            LogManager.GetLog = type => new DebugLogger(type);
        }
        private CompositionContainer container;
        protected override void BuildUp(object instance)
        {
            this.container.SatisfyImportsOnce(instance);
        }
        protected override void Configure()
        {
            this.container = 
                new CompositionContainer(
                    new AggregateCatalog(
                        AssemblySource.Instance.Select(x => new AssemblyCatalog(x)).OfType<ComposablePartCatalog>()));
            var batch = new CompositionBatch();
            batch.AddExportedValue<IWindowManager>(new WindowManager());
            batch.AddExportedValue<IEventAggregator>(new EventAggregator());
            batch.AddExportedValue(this.container);
            this.container.Compose(batch);
        }
        protected override IEnumerable<object> GetAllInstances(Type serviceType)
        {
            return this.container.GetExportedValues<object>(AttributedModelServices.GetContractName(serviceType));
        }
        //This method is required for the BootStrapper.cs to be discovered.
        protected override object GetInstance(Type serviceType, string key)
        {
            string contract = string.IsNullOrEmpty(key) ? AttributedModelServices.GetContractName(serviceType) : key;
            IEnumerable<object> exports = this.container.GetExportedValues<object>(contract);
            if (exports.Count() > 0)
            {
                return exports.First();
            }
            throw new Exception(string.Format("Could not locate any instances of contract {0}.", contract));
        }
    }
} 
```

根据我对 Caliburn.Micro 的理解，每当更新 observablecollection MyList（添加新项目）时，都应该更新带有 x:name MyList 的数据网格。即使没有数据模板，我想我也会看到一个空白条目列表，其长度等于 MyList 中的对象数。当我在 MainViewModel 中而不是在绑定到 MainView 的用户控件中使用相同的代码时，呈现列表没有问题。看来我错过了关于在视图中更新视图的一些东西。

我应该注意，我可以通过使用 Console.WriteLine(MyList.Count.ToString()) 并观察输出窗口来验证列表中是否包含对象。我讨厌问这些事情，每次我这样做的时候都是一个错字或同样愚蠢的事情，但我已经被困在这里太久了。

**注意：**即使在每次迭代中抛出 MyList.Refresh()，数据网格中也不会发生任何变化。

**注意：**这似乎可以回答我的问题，但我不明白如何实现它。也许如果其他人理解得更好，他们可以将代码行放在我代码中的适当位置并解释它为什么起作用。提前致谢。[Caliburn.Micro 基于约定的绑定在嵌套视图中不起作用？](https://stackoverflow.com/questions/4211624/caliburn-micro-convention-based-bindings-not-working-in-nested-views)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-22T14:54:54.403

尝试这种视图模型第一种方法-我怀疑您的内部视图没有被绑定（CM 在应用约定时不会跨越控件边界，例如它不会将约定应用于嵌套的用户控件）

```
<Window x:Class="MyApp.MainWindowView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:cal="http://www.caliburnproject.org"
    xmlns:views="clr-namespace:MyApp"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindowView" Height="300" Width="300">
<Grid>
    <DockPanel>
        <Menu DockPanel.Dock="Top">
            <MenuItem Header="File">
                <MenuItem Header="Open" x:Name="Open"/>
                <MenuItem Header="Exit" x:Name="Exit"/>
            </MenuItem>
        </Menu>
        <StackPanel DockPanel.Dock="Bottom">
            <!-- Use ContentControl for sub-views, CM will do it's magic if you bind to the VM property using the standard conventions -->
            <ContentControl x:Name="SecondView" />
        </StackPanel>
    </DockPanel>
</Grid> 
```

然后在你的主要：

```
internal class MainWindowViewModel : Screen, IShell
{
    Regex expression = new Regex(@"^N\d\.C\d\.D\d\.R\d:\s\s\s-\d"); //ex. "N1.C1.D2.R1:   -3"      
    // Declare your second VM as a property so you can bind to it via CM conventions  
    public SecondViewModel SecondView 
    { 
        get { return _secondView; } 
        set 
        {
            _secondView = value;
            NotifyOfPropertyChange(() => SecondView);
        }
    }

    public MainWindowViewModel()
    {
        SecondView = new SecondViewModel();
    } 
```

CM 会自动将右视图注入内容控件模板并设置数据上下文

或者，您可以使用`Bind.Model`将 VM 实例绑定到视图，这更像是一种视图优先的方法

```
 <StackPanel DockPanel.Dock="Bottom">
        <views:SecondView cal:Bind.Model="{Binding SecondView}" />
    </StackPanel> 
```

（我认为它是 Bind.Model 而不是 View.Model，但我经常将两者混淆，所以 Bind.Model 失败尝试 View.Model）

# c# - WebForms 中的客户端交互

> ID：16112611
> 
> 赞同：0
> 
> 时间：2013-04-19T19:58:06.147
> 
> 标签：c#, webforms

什么方式是标准/建议执行以下操作：

当用户提出 Page_Command“保存”或“发送”时，我想运行一个方法。如果该方法返回 false，我想将用户发送回页面并显示一条消息。

他们在表格中输入的所有数据应该仍然存在。该消息将有一个按钮，上面写着“无论如何/无论如何都发送”。如果他们点击它，它将发送。

我知道我可以通过 web 服务和 jQuery 来做到这一点，但我在问如何通过 WebForms 来做到这一点。

这是我的基本代码：

```
protected void Page_Command(Object sender, CommandEventArgs e)
{   
    if ( e.CommandName == "Save" || e.CommandName == "Send" )
    {
        // run method
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:23:51.033

有几种方法可以做到这一点。

一个选项可能是带有文本“保存”的按钮，另一个选项是带有文本“仍然发送”的按钮。使第二个按钮不可见，第一个可见。

单击第一个按钮时，它应该运行验证逻辑。如果验证成功，则提交 - 否则，隐藏第一个按钮，并将另一个按钮设置为可见。

当/如果单击第二个按钮，则在没有验证的情况下执行提交。

**更新：**

通过一些小的修改，您应该能够执行以下操作：

标记：

```
<asp:Button runat="server" 
            ID="myFirstButton"
            OnClick="SubmitWithValidation" />

<asp:Button runat="server" 
            ID="mySecondButton"
            Visible="False"
            OnClick="SubmitData" /> 
```

代码：

```
protected void SubmitWithValidation(object sender, EventArgs e)
{
    if (ValidateMyData())
    {
            SubmitData(sender, e);
    }
    else
    {
        mySecondButton.Visible = true;
        myFirstButton.Visible = false;
    }
}

private bool ValidateMyData()
{
    // Validate stuff

    return isValid;
}

private void SubmitData(object sender, EventArgs eventArgs)
{
    // Logic to submit your data here
} 
```

# javascript - 如何在线索提示中引用触发元素？

> ID：16112612
> 
> 赞同：1
> 
> 时间：2013-04-19T19:58:06.897
> 
> 标签：javascript, cluetip

我有以下代码。我想引用触发器元素并在 onShow() 中获取标记值。我怎样才能做到这一点？谢谢

```
<a class="tips" tag="12">TEST 01</a>
<a class="tips" tag="123">TEST 02</a>
<a class="tips" tag="1234">TEST 03</a>
<a class="tips" tag="12345">TEST 04</a>

$(document).ready(function () {
$('a.tips').cluetip({
    splitTitle: "|",
    width: '500',
    sticky: true,
    closePosition: 'title',
    dropShadow: true,
    onShow: function (ct, ci) {
    }
});
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:05:45.683

从[文档](http://plugins.learningjquery.com/cluetip/#options)

```
 // function to run just after clueTip is shown. It can take two arguments:
    // the first is a jQuery object representing the clueTip element;
    // the second a jQuery object represeting the clueTip inner div.
    // Inside the function, this refers to the element that invoked the clueTip
    onShow:           function(ct, ci){}, 
```

因此，您应该使用,`this`来引用元素。

而且，对于您问题的另一部分，您可以使用 jQuery：

```
$(document).ready(function () {
    $('a.tips').cluetip({
        splitTitle: "|",
        width: '500',
        sticky: true,
        closePosition: 'title',
        dropShadow: true,
        onShow: function(ct, ci){
            var selectedTag = $(this).attr("tag"); //get the tag
        }
    });
}); 
```

# c# - 不使用 XNA 或其他第三方库的 2d Sprite 动画

> ID：16112622
> 
> 赞同：9
> 
> 时间：2013-04-19T19:58:54.673
> 
> 标签：c#, animation, 2d, sprite

我想创建一个简单的游戏，类似于使用 RPG Maker 可以创建的游戏。我目前主要寻找的是一个教程，它可以指导我如何在不使用 XNA 或任何其他特定库的情况下完成它。

理想的情况是一个循序渐进的教程或一个好的、易于理解的示例。

我的目标是自己做，并了解整个过程如何与彼此相关的动画元素一起工作。

过去我已经使用简单的教程构建了一个简单的蛇游戏，但其中没有运动动画，这是我接下来要学习的主要内容。

**编辑：**

到目前为止，我发现的所有教程都使用了第三方库。我确实遇到了[这个链接](http://www.dreamincode.net/forums/topic/194878-xna-animated-sprite/)，但我正在寻找不包括 XNA 的东西。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-23T22:22:35.363

有多种方法可以处理您所描述的主题。我将提供一些概述，然后希望提供一些资源，这些资源可以为您提供示例以帮助您入门。

本质上，基于精灵的动画围绕着一系列相似的图像，当它们按顺序显示时，会产生运动的外观，类似于翻书。

诀窍是了解您的精灵何时移动（因此应该被动画化） - 以及它何时静止不动（因此不应该被动画化）。换句话说 - 假设你的游戏*角色*只应该在你按住的时候移动`▲</kbd>, `▶</kbd>, `▼</kbd> or `◀`, you need to detect when one of those keys starts and stops being pressed, so that you can start/stop your animation accordingly.```

想象一下，为了简单起见，您只有 2 个精灵。第一个（左，下）代表你的角色静止不动，第二个代表你的角色中步（右，下）：

![马里奥](https://i.stack.imgur.com/w1prv.png)

当。。。的时候`▶</kbd> button is not pressed, you simply continually display the first image. When the `▶</kbd> button *is* pressed, you toggle between the two every `x` milliseconds (depending on how fast you want the animation to appear).``

[动画 .gif](http://en.wikipedia.org/wiki/Graphics_Interchange_Format)是一种格式，您可以在其中包含一系列简单的图像帧，这些图像帧旨在作为一个系列显示（因此会产生动画的错觉）。如果您要使用这种格式创建精灵，您可以使用类似于[此 SO 讨论](https://stackoverflow.com/questions/1840193/sprites-and-c-sharp-animation)中的代码，它提供了一些示例代码，说明如何使用 C# 为动画 .gif 设置动画并控制其开始/停止。

或者，如果你想使用一个精灵文件（就像我上面包含的那个），你可以使用类似于[这个 CodeProject 代码](http://www.codeproject.com/Articles/1896/Sprite-manipulation-in-C)的东西，它专注于 GDI 与 Windows 环境的交互，以便提取和绘制精灵的一部分到目标画布。通过每`x`毫秒重新绘制一次（如上所述），这可以提供相同的效果。

要记住几件事：

您需要处理精灵的透明度（例如，上面的马里奥精灵具有透明背景） - 以便您的游戏环境的背景显示出来。如果使用 GDI - 这一切都与您如何调用绘画方法有关。如果使用动画 .gif - 使用的方法取决于您在窗口上的显示方式。

有关一些其他资源/示例/参考，请查看以下资源：

*   [中级 C# 游戏制作教程 - 2 - Sprites](http://www.youtube.com/watch?v=9N28WV2S_kE)
*   [2D Game Primer (Visual C)](http://channel9.msdn.com/coding4fun/articles/2D-Game-Primer-Visual-C) - 一篇较早的文章，讨论了很多关于 sprite 动画、时间等概念的文章 - 并提供了一些示例代码（示例中的一些 DirectX）
*   [Sprite.cs](https://code.google.com/p/csharpgameprogramming/source/browse/trunk/Engine/Engine/Sprite.cs?spec=svn16&r=16) - 一些用于处理精灵和大小调整的 C# 操作代码示例（使用 OpenGL，因此可能不适用）

对于 Sprite 开发：

*   [SpritePad](http://wearekiss.com/spritepad) - 用于创建 Sprite 表的工具
*   [http://makeagif.com/](http://makeagif.com/) - 在线创建动画 gif 的工具
*   [http://picasion.com/](http://picasion.com/) - 另一个动画 gif 创作者

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-24T03:01:20.490

我把我认为你所追求的例子放在一起。这个例子可以应用于按钮或图片框。出于简单，我选择了这种方式。

每个动画实例都包含一个计时器和一个图像列表。每当计时器触发其事件时更新目标控件的图像。

我已经在这里上传了我的项目文件。[http://mcspazzy.com/code/ParTest.zip](http://mcspazzy.com/code/ParTest.zip)

希望这足以提供帮助。只是问你是否需要更多解释。

班上

```
public class Animation
{
    readonly Timer _animtimer = new Timer();

    public List<Image> Frames;

    public int FrameIndex;

    private Button _target;
    private PictureBox _ptarget;

    public void Target(PictureBox target)
    {
        _ptarget = target;
    }

    public void Target(Button target)
    {
        _target = target;
    }

    public int FrameSpeed
    {
        get { return _animtimer.Interval; }
        set { _animtimer.Interval = value; }
    }

    public Animation()
    {
        Frames  = new List<Image>();
        _animtimer.Interval = 100;
        _animtimer.Tick += Update;
    }

    public void Play()
    {
        _animtimer.Start();
    }

    public void AddFrame(string file)
    {
        Frames.Add(Image.FromFile(file));
    }

    public void Stop()
    {
        _animtimer.Stop();
    }

    private void Update(object sender, EventArgs eventArgs)
    {
        FrameIndex++;

        if (FrameIndex == Frames.Count)
        {
            FrameIndex = 0;
        }
        _target.Image = Frames[FrameIndex];
        _ptarget.Image = Frames[FrameIndex];
    }

    public static implicit operator Image(Animation a)
    {
        return a.Frames[a.FrameIndex];
    }
} 
```

这是在我的表单加载中。真的可以去任何东西被初始化的地方。

```
 private void Form1Load(object sender, EventArgs e)
    {

        _testAnim.AddFrame(@"F:\Im\Black.png");
        _testAnim.AddFrame(@"F:\Im\Blue.png");
        _testAnim.AddFrame(@"F:\Im\Green.png");
        _testAnim.AddFrame(@"F:\Im\Orange.png");
        _testAnim.AddFrame(@"F:\Im\Red.png");

        _testAnim.Target(ButtonTest);
        _testAnim.Target(PicBox);

        _testAnim.Play();

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-23T07:33:55.360

在快速搜索中，我找到[了这个例子](http://www.java2s.com/Code/CSharp/2D-Graphics/Animatesanimage.htm)。我在 c# 图形方面不是很有经验，但这里有几点我学到了使用非面向图形的语言：

*   声明你想画的地方/什么
*   创建一个循环运行直到中止/事件结束循环（比如对象与某物碰撞）
*   在循环中：等待，清除旧绘图区，重新计算新位置，在新位置绘制
*   如果需要，您也可以更改要绘制的图像，但是您需要为每个想要拥有的“帧”提供单独的图像
*   多线程是个好主意，因此您可以将运行图形与其他游戏逻辑分开
*   尽量保持清除绘图区域和重新绘制的时间尽可能短，以防止闪烁
*   跟踪您绘制的对象的大小，使其更容易检查碰撞（如精灵的中心+半径，然后您可以轻松计算其周围的圆形区域以检查两个精灵是否彼此太近）

# ios - Core Data 自动创建超级实体？何时何地？

> ID：16112626
> 
> 赞同：0
> 
> 时间：2013-04-19T19:59:10.147
> 
> 标签：ios, core-data, nsmanagedobject

我有以下数据模型来管理测量（心率和皮肤反应） ![在此处输入图像描述](https://i.stack.imgur.com/3pAHi.png)

当我获得新的测量值时，它将成为“MinuteStress”的实体现在我想以编程方式检查是否存在相应的日期和月份实体，如果不存在则自动创建一个并将我的测量值添加到它们的平均值中。

我的第一个问题是：检查超级实体的正确位置在哪里？在“MinuteStress”的 NSManagedObjectSubclass 中这样做是个好主意，还是在我的视图控制器中创建实体后这样做更好？

我的第二个问题是，是否有一种聪明的方法可以从子实体创建超级实体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:20:56.837

理论上你可以在`awakeFromInsert`你的子类的方法中做到这一点`NSManagedObject`，但这是一个坏主意（tm），因为你可以触发其他核心数据事件......有关更多信息，请参阅[Apple Docs](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html)`awakeFromInsert`下的“特殊注意事项”部分。

您最好在视图控制器中查询超类并在需要时创建它们，然后创建 MinuteStress 实例。

您可能还想编写一些方便的方法来创建相关的子对象（例如`-(DayStress *) createDayStress]`在 MonthStress 上），您可以在其中创建子对象并在返回之前自动设置其父引用（以及任何初始化值）。它使视图控制器中的代码流更好地 IMO。

# ajax - 即使我返回 200，我的 Ajax POST 也会出现错误

> ID：16112628
> 
> 赞同：1
> 
> 时间：2013-04-19T19:59:26.753
> 
> 标签：ajax, jersey

我正在向 Jersey Resource 发布 AJAX 帖子。我建立一个图像并返回它。问题是，无论我返回什么状态，Ajax 都认为这是一个错误。我实际上可以使用错误消息（通过error.responseTest），它工作正常。但它很丑。我要返回什么才能使它成功？我已返回 OK(200)、Accepted(202) 和 Created(201)。他们都给我一条错误消息，但在我的控制台网络选项卡中，我得到了成功（绿色，状态正确）。

我像这样返回它：

```
 return Response.status(Response.Status.ACCEPTED).entity(image).header('Content-Type',"image/png").build(); 
```

我的 JS 代码：

```
$.ajax( Monocle.config.Sightline.jobUrl + "/sightline", {
        type: "POST",
        processData: false,
        data: JSON.stringify({
            Lat1: Monocle.Sightline.BBOX(feature,2),
            Long1: Monocle.Sightline.BBOX(feature,1),
            Lat2: Monocle.Sightline.BBOX(feature,4),
            Long2: Monocle.Sightline.BBOX(feature,3),
            OrgLat:observerCoords[0].lat,
            OrgLong:observerCoords[0].lon,
            ObHeight: feature.attributes.observerHeight,
            TargHeight: feature.attributes.targetHeight,
            OuterRadius: feature.attributes.outerRadius,
            LVA: feature.attributes.lowerVertAngle,
            UVA: feature.attributes.upperVertAngle,
            sAzimuth: feature.attributes.startAzimuth,
            eAzimuth: feature.attributes.endAzimuth,
            outputType: "MAX"
        }),
        contentType: "application/json",
        dataType: "json",
        success: function( results ){
            var graphic = new OpenLayers.Layer.Image(
                Monocle.currentWidget.name + " Destination " + featurenum,
                "data:image/png;base64," + results,
                new OpenLayers.Bounds(Monocle.Sightline.BBOX(feature,1), Monocle.Sightline.BBOX(feature,2), Monocle.Sightline.BBOX(feature,3),Monocle.Sightline.BBOX(feature,4)),
                new OpenLayers.Size(580, 288),
                { isBaseLayer: false,
                    opacity: 0.3,
                    displayOutsideMaxExtent: true
                });
            feature.legionObject = graphic;
            graphic.relatedlayer = Monocle.currentWidget.name + " Destination " + featurenum;

            Monocle.Map.map.addLayer(graphic);
        },
        error: function(errMsg) {
            // TODO: really handle any errors

        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:22:04.457

设置`dataType: "json",`意味着您的响应是`json`不会导致错误的，因此只需将其删除。
此外，您的图像数据必须经过 base64 编码才能生成数据 uri。

# javascript - 使用维基百科源阅读 iframe 的内容？

> ID：16112629
> 
> 赞同：0
> 
> 时间：2013-04-19T19:59:28.547
> 
> 标签：javascript, jquery

我正在用js开发一个应用程序。我需要读取和解析动态变化的 iframe src 中包含的 html。iframe src 总是指向维基百科的文章。我尝试使用此处其他解决方案中描述的方法阅读简单的 html 源代码，它起作用了：

[如何使用 javascript 获取 iFrame src 内容？](https://stackoverflow.com/questions/1264569/how-to-get-iframe-src-content-using-javascript)

[如何在 Javascript 中获取 iframe 的正文内容？](https://stackoverflow.com/questions/926916/how-to-get-the-bodys-content-of-an-iframe-in-javascript)

但我无法阅读框架源中的任何维基百科文章！请帮帮我！！thnk ...下面是我的代码：

```
<html>
<head>
<script type="text/javascript" src="js/jquery.js"></script>
<script type="text/javascript">
function showIt(){
    alert($("#ifr").contents().find("body").html());
    }
</script>
</head>
<body>
<a href="#" onclick="showIt()">Click here</a><br />
<iframe id="ifr" name="ifr" src="http://en.wikipedia.org/wiki/Bus" height="100%" width="100%"></iframe>

</body>
<script type="text/javascript">
var iframeWindow = top.frames['ifr'];
iframeWindow.onload=function(){alert('here');iframeContent=iframeWindow.document.body.innerHTML;

};
</script>
</html> 
```

我的问题与[Query Wikipedia's API using AJAX (XMLHttpRequest)不同](https://stackoverflow.com/questions/2374377/query-wikipedias-api-using-ajax-xmlhttprequest)

我知道这个 wikimedia 的 API，我也知道如何使用它！但它不符合我的目的。此 API 以 JSON 编码的纯文本格式返回文章。

但我想要的是 HTML 格式的文章！我知道如何在 PHP 中做到这一点。但我想在 JS 中做到这一点！只需帮助我阅读包含 WP 文章的 iframe 的 HTML 源代码。我知道如何操纵内容。

* * *

好的。我阅读了“同源政策”。它不能完成：P。关闭。

# javascript - 嵌套数组问题

> ID：16112636
> 
> 赞同：0
> 
> 时间：2013-04-19T19:59:57.897
> 
> 标签：javascript, arrays

我没有在javascript中尝试过嵌套数组，所以我不确定它们的格式。这是我的数组：

```
var items = [
    {"Blizzaria Warlock", "105341547"},
    {"Profit Vision Goggles", "101008467"},
    {"Classy Classic", "111903124"},
    {"Gold Beach Time Hat", "111903483"},
    {"Ocher Helm of the Lord of the Fire Dragon", "111902100"},
    {"Greyson the Spiny Forked", "102619387"},
    {"Egg on your Face", "110207471"},
    {"Evil Skeptic", "110336757"},
    {"Red Futurion Foot Soldier", "90249069"},
    {"Wizards of the Astral Isles: Frog Transformer", "106701619"},
    {"Dragon's Blaze Sword", "105351545"}
];
alert(items[2][1]); 
```

...应该提醒`111903124`，但没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T20:00:49.390

利用

```
var items = [
    ["Blizzaria Warlock", "105341547"],
    ["Profit Vision Goggles", "101008467"],
    ["Classy Classic", "111903124"],
    ...
    ["Dragon's Blaze Sword", "105351545"]
]; 
```

将数组构建成数组。没有理由改变语法，因为它们在里面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:04:53.247

对象 ( `{}`) 是键值对的集合。您的对象`{"Blizzaria Warlock", "105341547"}`包含值但没有键。也许更好的方法是为这些属性提供描述性名称，然后按属性名称引用项目：

```
var items = [
    {name: "Blizzaria Warlock", val: "105341547"},
    {name: "Profit Vision Goggles", val: "101008467"},
    {name: "Classy Classic", val: "111903124"},
    {name: "Gold Beach Time Hat", val: "111903483"},
    {name: "Ocher Helm of the Lord of the Fire Dragon", val: "111902100"},
    {name: "Greyson the Spiny Forked", val: "102619387"},
    {name: "Egg on your Face", val: "110207471"},
    {name: "Evil Skeptic", val: "110336757"},
    {name: "Red Futurion Foot Soldier", val: "90249069"},
    {name: "Wizards of the Astral Isles: Frog Transformer", val: "106701619"},
    {name: "Dragon's Blaze Sword", val: "105351545"}
];
alert(items[2].val); 
```

`val`可以替换为更具描述性的内容，例如`points`.

# javascript - jQuery noConflict IE 问题

> ID：16112651
> 
> 赞同：1
> 
> 时间：2013-04-19T20:01:38.827
> 
> 标签：javascript, jquery

我正在构建一个依赖于加载 jquery 的小部件 - 我正在使用以下内容来加载它和我的代码：

```
(function () {

    var jqueryVersion = (window.jQuery !== undefined) ? window.jQuery.fn.jquery.charAt(0) + window.jQuery.fn.jquery.charAt(2) : 0;

    var jQuery;
    /******** Called once jQuery has loaded ******/
    function scriptLoadHandler() {
        jQuery = window.jQuery.noConflict(true);
        main();
    }

    /******** Load jQuery if not present *********/
    if (parseInt(jqueryVersion) < 17) {
        var script_tag = document.createElement('script');
        script_tag.setAttribute("type", "text/javascript");
        script_tag.setAttribute("src", "//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js");
        script_tag.onload = scriptLoadHandler;
        script_tag.onreadystatechange = function () { // Same thing but for IE
            if (this.readyState === 'complete' || this.readyState === 'loaded') { scriptLoadHandler(); }
        };
        document.getElementsByTagName("head")[0].appendChild(script_tag);
    } else {
        jQuery = window.jQuery;
        main();
    }

    function main() {
        //my code goes in here
        //leaving blank for now because I still get error
    }

})(); 
```

我从这里得到了大部分内容：http: [//alexmarandon.com/articles/web_widget_jquery/](http://alexmarandon.com/articles/web_widget_jquery/)

我需要 jquery 1.7 或更高版本，因为我使用 .on() 方法。当我在使用 1.7 之前的 jquery 的页面上运行它时，我有时会在 IE 中遇到错误，这使我相信与旧版本的 jquery 或页面上的其他一些 js 存在冲突。一些错误：

SCRIPT5007：无法获取未定义或空引用的属性“forceInt”

SCRIPT5007：预期对象

SCRIPT5007：无法获取未定义或空引用的属性“缓动”

SCRIPT438：对象不支持“on”属性或方法

如果我改变这些错误就会消失

```
jQuery = window.jQuery.noConflict(true); 
```

到

```
jQuery = window.jQuery.noConflict(); 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:18:24.733

Your problem might be caused by the fact that the 'handler' is called twice.

[http://msdn.microsoft.com/en-us/library/ie/hh180173(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/hh180173(v=vs.85).aspx)

Also, taken from [http://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

> "If necessary, you can free up the jQuery name as well by passing true as an argument to the method. This is rarely necessary, and if you must do this (for example, if you need to use multiple versions of the jQuery library on the same page), you need to consider that most plug-ins rely on the presence of the jQuery variable and may not operate correctly in this situation."

# php - 斜线而不是 $_GET 变量

> ID：16112652
> 
> 赞同：1
> 
> 时间：2013-04-19T20:01:41.273
> 
> 标签：php, .htaccess, url

我知道这是一个已经回答的问题。问题是我不知道自己做错了什么，但是当我粘贴在另一个代码中找到的代码时：

```
RewriteEngine On
RewriteRule ^([^/]+)/([^/]+)$  index.php?$1=$2
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)$  index.php?$1=$2&$3=$4
RewriteRule ^([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)/([^/]+)$  index.php?$1=$2&$3=$4&$5=$6 
```

...什么都没发生。

我只是希望 url 变成这样：www.foo.com/it/5 而不是 www.foo.com?it=5

感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:22:59.013

这不会重写*您*看到的 URL，它会重写*Apache*看到的规则。

而且，这些规则是荒谬的。我建议一些更简单的东西，例如：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f  #skip if file exists
RewriteCond %{REQUEST_FILENAME} !-d  #skip if directory exists
RewriteRule ^(.*)$ index.php?rt=$1 [L,QSA] 
```

当有人请求时：

```
http://foo.com/fancy/url/here 
```

Apache 将其 [内部] 更改为：

```
http://foo.com/index.php?rt=fancy/url/here 
```

你的 PHP 脚本看到：

```
$_GET['rt'] == 'fancy/url/here'; 
```

然后你可以：

```
$arr = explode('/', $_GET['rt']); 
```

要得到：

```
$arr == array('fancy','url','here') 
```

# html - 使用 使用标签在jsp中设置var 标签

> ID：16112656
> 
> 赞同：0
> 
> 时间：2013-04-19T20:01:51.343
> 
> 标签：html, jsp, struts, displaytag

在我的 Struts 1 应用程序的 jsp 中，我试图使用 c:set 标记从显示表中的列表中设置变量。

表中的每一行都有一个值（100 或 200），用于区分哪个用户添加了条目。我只想为某个用户（100）显示编辑/删除。

我正在尝试设置该值并将其与 100 进行比较以确定哪些行应该具有编辑/删除功能。

我遇到的问题是 rowUser 没有从我的列表中获得值。

我知道该列表具有值，因为该表正在显示，但它们显示所有行，就好像它们不等于 100。

到目前为止，我所拥有的是：

```
<c:set var="rUser"><c:out value="${myList.rowUser}" /></c:set>
<c:choose>
<c:when test="${rUser == 100}">
<display:column  property="startDate" title="Start Date" width="18%" decorator="com.mhngs.util.DisplayTagDateWrapper" sortable="true" headerClass="sortable"/>
<display:column  property="endDate" title="End Date" width="18%" decorator="com.mhngs.util.DisplayTagDateWrapper" sortable="true" headerClass="sortable" />
<display:column  property="reason" title="Comments" width="17%" sortable="true" headerClass="sortable" />
<display:column media="html" width="17%"><a href="#" onClick="javascript:editEntry('<c:out value="${myList.Id}"/>')">Edit</a></display:column>  
<display:column media="html" width="15%"><a href="#" onClick="javascript:deleteEntry('<c:out value="${myList.Id}"/>')">Delete</a></display:column>
</c:when>

<c:otherwise>
<display:column  property="startDate" title="Start Date" width="18%" decorator="com.mhngs.util.DisplayTagDateWrapper" sortable="true" headerClass="sortable"/>
<display:column  property="endDate" title="End Date" width="18%" decorator="com.mhngs.util.DisplayTagDateWrapper" sortable="true" headerClass="sortable" />
<display:column property="reason" title="Comments" sortable="true"/>
</c:otherwise>
</c:choose> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:00:51.597

如果要分配`myList.rowUser`给属性`rUser`，只需使用

```
<c:set var="rUser" value="${myList.rowUser}"/> 
```

也就是说，为什么要为此使用附加属性，而不是直接使用`myList.rowUser`？

```
<c:when test="${myList.rowUser == 100}"> 
```

最后，问题是显示标签在第一次迭代时计算要显示的列。在接下来的迭代中，它只是更改每列中显示的值。当属性为 200 时，不应显示最后两列，而应显示它们但将它们留空。简而言之，测试应该在 display:column 标签内，而不是在外面：

```
<display:column ...> if row = 100, display button </display:column> 
```

# iphone - 在 iPhone 上构建相机应用程序的最佳方法

> ID：16112660
> 
> 赞同：1
> 
> 时间：2013-04-19T20:02:44.737
> 
> 标签：iphone, cocos2d-iphone, camera

我正在考虑构建一个相机应用程序 - 能够在您拍照时或拍照后进行图像处理（调整对比度，应用不同的图像过滤器）。

该应用程序还将具有拖放图标的能力。

最后，您可以将编辑后的图像导出到相机胶卷或应用程序内存。

已经有很多这样的应用程序了。（线相机）等...

只是想知道构建此类应用程序的最佳方法是什么。我可以纯粹使用 Objective C ios sdk 构建应用程序吗？还是我需要用 C++/cocos2d 等构建它...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:23:13.650

您的问题非常广泛，所以这里是一个广泛的答案......

### 访问相机/照片库

首先，您需要使用相机`UIImagePickerController`来拍摄新照片或从照片库中抓取一张。您可以在此处阅读如何完成此操作：[iOS 的相机编程主题](http://developer.apple.com/library/ios/#documentation/AudioVideo/Conceptual/CameraAndPhotoLib_TopicsForIOS/Introduction/Introduction.html)

### 图像处理

AviarySDK 已经为您构建了其中的大部分内容。非常容易在您的应用程序中设置和使用。如果你想看看它可以做什么，你可以在应用商店免费下载他们的示例应用。在这里查看：http: [//aviary.com/](http://aviary.com/)

或者，如果您想避免使用第三方库，请阅读 Core Image。有关更多信息，请参阅[核心映像编程指南](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Conceptual/CoreImaging/ci_intro/ci_intro.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:09:25.870

完全不需要 cocos2d 这个游戏引擎。您可以仅使用 Objective-C 完成您提到的所有事情。

如果您想要实时效果，您需要深入了解 OpenGL。如果您以 iOS 5 及更高版本为目标，则可以使用[GLKit 。](http://developer.apple.com/library/ios/#documentation/GLkit/Reference/GLKit_Collection/Introduction/Introduction.html)

# hibernate - 从纯 Hibernate 到 JPA

> ID：16112666
> 
> 赞同：2
> 
> 时间：2013-04-19T20:03:01.290
> 
> 标签：hibernate, jpa

目前我正在使用纯休眠，我对它非常满意，除了像`session.get/list`和其他人一样的调用，但这没什么大不了的......

`JPA`除了更好的便携性，我还能获得什么好处？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:27:38.813

也许更好的工具和供应商支持。在兼容的应用程序服务器上也更容易部署。但是您将失去 Hibernate 特定的功能，例如 HQL 中的扩展查询语法。毕竟，JPA 的特性是 Hibernate 的一个子集。

# sencha-architect - 在同屏煎茶建筑师 2 上创建 2 个按钮

> ID：16112670
> 
> 赞同：1
> 
> 时间：2013-04-19T20:03:12.783
> 
> 标签：sencha-architect, sencha-touch-2.1

我正在按照[本](http://docs.sencha.com/architect/2/#!/guide/navigationview)教程创建一个 Sencha Touch 应用程序，

我想在同一个屏幕上创建 2 个按钮，每个按钮在单击时重定向到另一个页面，在教程中它使用表单面板并且只有一个按钮重定向到另一个页面，但是如果我将 2 个表单面板链接到导航器视图，它只出现一个表单面板，我想知道一种在同一屏幕上添加 2 个按钮并为每个按钮调用一个 userAlias 以重定向到另一个页面的方法。

我做什么 ？在同一个 FormPanel 上添加 2 个按钮？如果是，我如何为每个按钮调用一个不同的页面，因为我在表单面板上仅使用一个 userAlias 和此功能：

```
button.up('navigationview').push({
     xtype: 'step3',
     title: 'Step 3'
 }); 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-29T14:20:06.853

对按钮使用两个不同的处理程序。

示例 :: 按钮 1 ::

```
{
  xtype : 'button',
  text : 'button 1',
  handler : function(){
    alert('do something');
    this.up('navigationview').push({ . . . . });
  }
} 
```

示例 :: 按钮 2 ::

```
{
  xtype : 'button',
  text : 'button 2',
  handler : function(){
    alert('do something else');
    this.up('navigationview').push({ . . . . });
  }
} 
```

# wcf - WCF 服务错误 400 错误请求

> ID：16112673
> 
> 赞同：5
> 
> 时间：2013-04-19T20:03:30.740
> 
> 标签：wcf, service, request

我一直在搜索这个问题，我发现其他用户发布了类似的问题，但是我尝试过的一切都不起作用，问题是我正在使用托管在 IIS 上的 WCF 服务，以及一个尝试在字符串上上传序列化图像，图像大小约为 9mb，其他一切正常，我可以毫无问题地发送数据，除了图像。

我启用了跟踪日志并且错误消息说 MaxReceivedMessageSize 超过

这是我的服务配置：

```
<system.diagnostics>
<sources>
    <source name="System.ServiceModel"
        switchValue="Information, ActivityTracing"
        propagateActivity="true" >
        <listeners>
            <add name="xml"/>
        </listeners>
    </source>
    <source name="System.ServiceModel.MessageLogging">
        <listeners>
          <add name="xml"/>
        </listeners>
    </source>
    <source name="myUserTraceSource"
        switchValue="Information, ActivityTracing, All">
        <listeners>
            <add name="xml"/>
        </listeners>
    </source>
</sources>
<trace autoflush="true"  />
<sharedListeners>
  <add name="xml"
       type="System.Diagnostics.XmlWriterTraceListener"
       initializeData="ErrorSvcLog.svclog" />
</sharedListeners>
</system.diagnostics>

<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_IServicioSalud" closeTimeout="10:01:00" 
                maxBufferSize="2147483647" maxBufferPoolSize="2147483647" 
                maxReceivedMessageSize="2147483647" openTimeout="10:01:00"
                receiveTimeout="10:10:00" sendTimeout="10:01:00"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered">
                <readerQuotas maxDepth="2147483647" maxStringContentLength="2147483647"
                    maxArrayLength="2147483647" maxBytesPerRead="2147483647" 
                    maxNameTableCharCount="2147483647" />
            </binding>
        </basicHttpBinding>
</bindings>
<services>
    <service behaviorConfiguration="ServiceBehavior" name="ServicioSalud">
        <endpoint address="" binding="basicHttpBinding" contract="IServicioSalud" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
    </service>
</services>
<behaviors>
    <serviceBehaviors>
        <behavior name="ServiceBehavior">
            <serviceMetadata httpGetEnabled="true" />
            <serviceDebug includeExceptionDetailInFaults="true" />
            <dataContractSerializer maxItemsInObjectGraph="200000" />
        </behavior>
    </serviceBehaviors>
</behaviors>
<diagnostics>
    <messageLogging
        logEntireMessage="true"
        logMalformedMessages="false"
        logMessagesAtServiceLevel="true"
        logMessagesAtTransportLevel="false"
        maxMessagesToLog="3000"
        maxSizeOfMessageToLog="2000"/>
</diagnostics>
</system.serviceModel>
</configuration> 
```

和客户端配置

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding> 
            <binding name="BasicHttpBinding_IServicioSalud" closeTimeout="10:01:00"
                openTimeout="10:01:00" receiveTimeout="10:10:00" sendTimeout="10:01:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="2147483647" maxBufferPoolSize="2147483647" maxReceivedMessageSize="2147483647"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true" 
                <readerQuotas maxDepth="32" maxStringContentLength="2147483647" maxArrayLength="2147483647"
                    maxBytesPerRead="4096" maxNameTableCharCount="2147483647" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://xxx.xxx.x.xxx:xxxx/wcfservicesalud/Service.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IServicioSalud"
            contract="IServicioSalud" name="BasicHttpBinding_IServicioSalud" />
    </client>
</system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:13:59.120

在您的配置文件中，您尚未分配您创建的绑定配置，因此使用默认值`BasicHttpBinding`。您需要将您定义的绑定 (BasicHttpBinding_IServicioSalud) 显式分配给您的端点，如下所示：

```
<endpoint address="" bindingConfiguration="BasicHttpBinding_IServicioSalud" binding="basicHttpBinding" contract="IServicioSalud" /> 
```

为您的服务配置执行此操作，因为需要将服务设置为接受更大的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T11:00:55.173

这是我的版本。确保您在所需的服务中指定了**bindingConfiguration**。就我而言，我必须指定名称*basicHttpBinding*。

```
<bindings>
   <basicHttpBinding>
    <binding name="basicHttpBinding" maxBufferSize="64000000" maxReceivedMessageSize="64000000" maxBufferPoolSize="64000000">
      <readerQuotas maxDepth="64000000" maxStringContentLength="64000000" maxArrayLength="64000000" maxBytesPerRead="64000000" />
      <security mode="None"/>
    </binding>
    </basicHttpBinding>
</bindings>

<services>
      <service behaviorConfiguration="WS.Service1Behavior" name="WS.EasyStockWS">
        <endpoint address="" binding="basicHttpBinding" bindingConfiguration="basicHttpBinding" contract="WS.IEasyStockWS">
          <identity>
            <dns value="localhost" />
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
</services> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-12T08:52:47.297

对我来说，原因是在我的请求中我没有设置内容类型。

# java - java - 单例的抽象基枚举/类

> ID：16112675
> 
> 赞同：2
> 
> 时间：2013-04-19T20:03:43.613
> 
> 标签：java, enums, singleton, abstract, base

我创建了两个`enum`单例类：

```
public enum A {
    INSTANCE;

    public void init(param p1, param p2) {
    }

    public void connect() {
    }

    public void disconnect() {
    }

    public bool isConnected() {
    }
}

public enum B {
    INSTANCE;

    public void init(param p1) {
    }

    public void connect() {
    }

    public void disconnect() {
    }

    public bool isConnected() {
    }
} 
```

如您所见，这两个枚举类非常相似，所以我想知道是否应该创建某种基本抽象类/枚举或接口，然后让这两个枚举从中扩展或实现。

更新1：我想把一些共享成员变量放在基类上

更新 2：我应该改变定义单例的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:05:35.703

根据[java枚举教程](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)

> 所有枚举都隐式扩展 java.lang.Enum。由于 Java 不支持多重继承，因此枚举不能扩展其他任何东西。

这是与此主题相关的有趣的[SO 讨论。](https://stackoverflow.com/questions/1884433/java-enum-inheritance)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:17:31.467

正如 Nambari 所说，你不能让枚举扩展任何东西。然而，他们忽略了说的是你可以让一个枚举实现一个接口，这与使用 implements 关键字的类一样。我在工作中做过这个，它在正确的情况下非常有用！这里有一个例子：http: [//javahowto.blogspot.co.uk/2008/04/java-enum-examples.html](http://javahowto.blogspot.co.uk/2008/04/java-enum-examples.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T21:59:23.397

[Heinz Kabutz](http://www.artima.com/weblogs/viewpost.jsp?thread=109017)`DynamicObjectAdapterFactory`发布了一个可爱的小类，它使用泛型和反射来调整对象以实现接口，方法是为对象提供已经实现接口的源类。

像下面这样使用它，您可以将您的代理包装`INSTANCE`在代理中。当然，生成的对象不再是一个，`enum`但它**确实**保留了`enum`我认为的所有单一性。显然，它也可以使用任何对象来实现您的界面。

`enum`我认为这与扩展课程一样接近。

这是一些似乎有效的测试代码。显然该对象不再是一个，`enum`但由于您的目标是一个单例，这可能是可以接受的。

```
public class Test {
  // To implement this.
  public interface Implement {
    public void init();

    public void connect();

    public void disconnect();

    public boolean isConnected();
  }

  // An implementor that does implement.
  public static class Implements implements Implement {

    @Override
    public void init() {
    }

    @Override
    public void connect() {
    }

    @Override
    public void disconnect() {
    }

    @Override
    public boolean isConnected() {
      return false;
    }
  }

  // Extend the INSTANCE in this.
  public enum Extend {
    INSTANCE;
    // Hold my adapted version - thus still a singleton.
    public final Implement adaptedInstance;

    Extend () {
      // Use the constructor to adapt the instance.
      adaptedInstance = DynamicObjectAdapterFactory.adapt(this, Implement.class, new Implements());
    }
  }

  // Provides an INSTANCE that has been extended by an Implements to implement Implement.
  public static Implement getInstance () {
    return Extend.INSTANCE.adaptedInstance;
  }

  public void test() {
    System.out.println("Hello");
    Implement i = getInstance();

  }

  public static void main(String args[]) {
    new Test().test();
  }
} 
```

这是 DynamicObjectAdapterFactory - 我已经对原来的它进行了一些调整 - 我希望 Kabutz 博士不会反对。

```
public class DynamicObjectAdapterFactory {
  // Use methods in adaptee unless they exist in target in which case use adapter.
  // Implement target in passing.
  public static <T> T adapt(final Object adaptee,
                            final Class<T> target,
                            final Object adapter) {

    return (T) Proxy.newProxyInstance(
            Thread.currentThread().getContextClassLoader(),
            new Class[]{target},
            new InvocationHandler() {
      private final String name =
              adaptee.getClass().getSimpleName() + "(" + adaptee.toString() + ")"
              + "+" + adapter.getClass().getSimpleName() + "(" + adapter.toString() + ")";
      // The methods I wish to adapt.
      private Map<MethodIdentifier, Method> adaptedMethods = new HashMap<>();

      {
        // initializer block - find all methods in adapter object
        Method[] methods = adapter.getClass().getDeclaredMethods();
        for (Method m : methods) {
          // Keep a map of them.
          adaptedMethods.put(new MethodIdentifier(m), m);
        }
      }

      @Override
      public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {
        try {
          // Has it been adapted?
          Method otherMethod = adaptedMethods.get(new MethodIdentifier(method));
          if (otherMethod != null) {
            return otherMethod.invoke(adapter, args);
          } else {
            return method.invoke(adaptee, args);
          }
        } catch (InvocationTargetException e) {
          throw e.getTargetException();
        }
      }

      @Override
      public String toString() {
        StringBuilder s = new StringBuilder();
        // Really simple. May get more flexible later.
        s.append("Adapted: ").append(name);
        return s.toString();
      }
    });
  }

  private static class MethodIdentifier {
    private final String name;
    private final Class[] parameters;

    public MethodIdentifier(Method m) {
      name = m.getName();
      parameters = m.getParameterTypes();
    }

    @Override
    public boolean equals(Object o) {
      // I am always equal to me.
      if (this == o) {
        return true;
      }
      // I cannot be equal to something of a different type.
      if (!(o instanceof MethodIdentifier)) {
        return false;
      }
      MethodIdentifier mid = (MethodIdentifier) o;
      return name.equals(mid.name) && Arrays.equals(parameters, mid.parameters);
    }

    @Override
    public int hashCode() {
      return name.hashCode();
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-04-10T11:59:25.347

您可以将下面的抽象类用于单例而不是枚举。

```
public abstract class AbstractSingleton {

    private static Map<String, AbstractSingleton> registryMap = new HashMap<String, AbstractSingleton>();

    AbstractSingleton() throws SingletonException {
        String clazzName = this.getClass().getName();
        if (registryMap.containsKey(clazzName)) {
            throw new SingletonException("Cannot construct instance for class " + clazzName + ", since an instance already exists!");
        } else {
            synchronized (registryMap) {
                if (registryMap.containsKey(clazzName)) {
                    throw new SingletonException("Cannot construct instance for class " + clazzName + ", since an instance already exists!");
                } else {
                    registryMap.put(clazzName, this);
                }
            }
        }
    }

    @SuppressWarnings("unchecked")
    public static <T extends AbstractSingleton> T getInstance(final Class<T> clazz) throws InstantiationException, IllegalAccessException {
        String clazzName = clazz.getName();
        if (!registryMap.containsKey(clazzName)) {
            synchronized (registryMap) {
                if (!registryMap.containsKey(clazzName)) {
                    T instance = clazz.newInstance();
                    return instance;
                }
            }
        }
        return (T) registryMap.get(clazzName);
    }

    public static AbstractSingleton getInstance(final String clazzName)
            throws ClassNotFoundException, InstantiationException, IllegalAccessException {
        if (!registryMap.containsKey(clazzName)) {
            Class<? extends AbstractSingleton> clazz = Class.forName(clazzName).asSubclass(AbstractSingleton.class);
            synchronized (registryMap) {
                if (!registryMap.containsKey(clazzName)) {
                    AbstractSingleton instance = clazz.newInstance();
                    return instance;
                }
            }
        }
        return registryMap.get(clazzName);
    }

    @SuppressWarnings("unchecked")
    public static <T extends AbstractSingleton> T getInstance(final Class<T> clazz, Class<?>[] parameterTypes, Object[] initargs)
            throws SecurityException, NoSuchMethodException, IllegalArgumentException,
            InvocationTargetException, InstantiationException, IllegalAccessException {
        String clazzName = clazz.getName();
        if (!registryMap.containsKey(clazzName)) {
            synchronized (registryMap) {
                if (!registryMap.containsKey(clazzName)) {
                    Constructor<T> constructor = clazz.getConstructor(parameterTypes);
                    T instance = constructor.newInstance(initargs);
                    return instance;
                }
            }
        }
        return (T) registryMap.get(clazzName);
    }

    static class SingletonException extends Exception {
        private static final long serialVersionUID = -8633183690442262445L;

        private SingletonException(String message) {
            super(message);
        }
    }
} 
```

来自：[https ://www.cnblogs.com/wang9192/p/3975748.html](https://www.cnblogs.com/wang9192/p/3975748.html)

# java - 解析异常；必须被抓住 (Try/Catch) (Java)

> ID：16112676
> 
> 赞同：5
> 
> 时间：2013-04-19T20:03:47.113
> 
> 标签：java, parseexception

我正在编写约会程序，但出现以下错误：

```
AppointmentNew.java:68: unreported exception java.text.ParseException; must be caught or declared to be thrown
        Date lowDate = sdf.parse(stdin.nextLine());
                                ^
AppointmentNew.java:70: unreported exception java.text.ParseException; must be caught or declared to be thrown
        Date highDate = sdf.parse(stdin.nextLine());  
                                 ^
AppointmentNew.java:77: unreported exception java.text.ParseException; must be caught or declared to be thrown
           Date newCurrentDate = sdf.parse(currentDate); 
```

我很确定我需要做一个 try/catch，但我不确定如何产生它。我得到错误的部分是它要求用户输入一个开始和结束日期，当他们这样做时，程序然后打印出他们在两个日期之间所做的约会。

这是我的代码：

```
import java.util.*;
import java.text.SimpleDateFormat;
import java.util.Date;

public class AppointmentNew 
{
public static void main (String[] args)
{
  ArrayList<String> list = new ArrayList<String>();
  Scanner stdin = new Scanner(System.in);
  String choice = "";
  int choiceNum = 0;
  String date = "";
  String descrip = "";
  int type = 0;
  String typeChose = "";

  System.out.println("Welcome to Appointment App!\n");
  System.out.println("\t============================");

  do
  {
     System.out.print("\n\tMake Choice (1: New, 2: Print Range, 3: Print All, 4: Quit) ");
     choice = stdin.nextLine();
     choiceNum = Integer.parseInt(choice);

     if (choiceNum == 1)
     {
        System.out.print("\n\n\tEnter New Appointment Date in mm/dd/yyyy format: ");
        date = stdin.nextLine();

        System.out.print("\n\n\tEnter New Appointment Description: ");
        descrip = stdin.nextLine();

        System.out.print("\n\n\tEnter Type (1 = Once, 2 = Daily, 3 = Monthly): ");
        type = stdin.nextInt();
        stdin.nextLine();

        if (type == 1)
        {
           Once once = new Once(date, descrip);
           typeChose = "One-Time";
        }
        else if (type == 2)
        {
           Daily daily = new Daily(date, descrip);
           typeChose = "Daily";
        }
        else
        {
           Monthly monthly = new Monthly(date, descrip);
           typeChose = "Monthly";
        }
        String stringToAdd = "";
        stringToAdd = (date + " : \"" + descrip + "\", " + typeChose);
        list.add(stringToAdd);

        System.out.println("\n\n\tNew " + typeChose + " Appointment Added for " + date + "\n");
        System.out.println("\t============================\n");

     }

     if (choiceNum == 2)
     {
        System.out.print("\n\n\tEnter START Date in mm/dd/yyyy format: ");
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy");
        Date lowDate = sdf.parse(stdin.nextLine());
        System.out.print("\n\n\tEnter END Date in mm/dd/yyyy format: ");
        Date highDate = sdf.parse(stdin.nextLine());  

        for(int i = 0; i < list.size(); i++)
        {
           int dateSpot = list.get(i).indexOf(" ");
           String currentDate = list.get(i);
           currentDate.substring(0, dateSpot);
           Date newCurrentDate = sdf.parse(currentDate); 

           if (newCurrentDate.compareTo(lowDate) >= 0 && newCurrentDate.compareTo(highDate) <= 0)
           {
              System.out.println("\n\t" + list.get(i));   
           }
        }
     }

     if (choiceNum == 3)
     {
        for(int i = 0; i < list.size(); i++)
        {
           System.out.println("\n\t" + list.get(i));     
        }
     }

  }while (choiceNum != 4);      
 }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T21:10:08.313

格式为：

```
try {
 //The code you are trying to exception handle
}
catch (Exception e) {
 //The handling for the code
} 
```

将解析调用放在一个 try 块中（最好每个都放在它们自己的块中），然后在 catch 块中指定如果解析失败应该发生什么。

# javascript - Backbone Relational：具有 2 个相同类型集合的模型

> ID：16112684
> 
> 赞同：3
> 
> 时间：2013-04-19T20:04:06.070
> 
> 标签：javascript, backbone.js, backbone-relational

我正在尝试创建具有 2 个相同类型的“hasMany”关系的主干关系模型，但我收到错误消息：“无法在“（myReverseRelationName）”上为模型 = 子创建关系 = 子：已被关系占用=孩子”。这是应该被允许的，还是我做错了？谢谢。

我创建了一个 jsFiddle，所以你们可以自己看看：http: [//jsfiddle.net/Mu68f/5/](http://jsfiddle.net/Mu68f/5/)

这是代码：

```
Animal = Backbone.RelationalModel.extend({
    urlRoot: '/animal/',
});

AnimalCollection = Backbone.Collection.extend({
    model: Animal
});

Zoo = Backbone.RelationalModel.extend({    
    relations: [
        {
            type: Backbone.HasMany,
            key: 'largeAnimals',
            relatedModel: Animal,
            collectionType: AnimalCollection,
            reverseRelation: {
                key: 'livesIn',
                includeInJSON: false
            }
        },
        {
            type: Backbone.HasMany,
            key: 'smallAnimals',
            relatedModel: Animal,
            collectionType: AnimalCollection,
            reverseRelation: {
                key: 'livesIn',
                includeInJSON: false
            }
        },
    ]
});

// initialize our zoo
var zoo = new Zoo({
    largeAnimals: [{name: "Big Bill"}],
    smallAnimals: [{name: "Pee Wee"}]
});
console.log(zoo); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T16:40:37.290

问题是 largeAnimals 和 smallAnimals 都在“Animal”模型类中，但没有对 Zoo 的不同引用。

在关联方面，如果一个模型（即动物）以两种不同的方式（小和大）属于另一个模型（动物园），那么它应该有两种不同类型的“外键”，它们以两种不同的方式引用关联的模型方法。

就简单性而言，我会采取将“大”或“小”作为属性添加到 Animal 类的路线，而不是尝试以两种不同的方式将其与 Zoo 关联。

但是，如果您想以这种方式将动物与动物园联系起来，您可以这样做：

```
Animal = Backbone.RelationalModel.extend({
    urlRoot: '/animal/',
});

AnimalCollection = Backbone.Collection.extend({
    model: Animal
});

Zoo = Backbone.RelationalModel.extend({    
    relations: [
        {
            type: Backbone.HasMany,
            key: 'largeAnimals',
            relatedModel: Animal,
            collectionType: AnimalCollection,
            reverseRelation: {
                key: 'livesIn',
                includeInJSON: false
            }
        },
        {
            type: Backbone.HasMany,
            key: 'smallAnimals',
            relatedModel: Animal,
            collectionType: AnimalCollection,
            reverseRelation: {
                key: 'residesIn', // different key to refer to Zoo
                includeInJSON: false
            }
        },
    ]
}); 
```

正如你所看到的，我给了`smallAnimal`一个不同类型的键来引用 Zoo。这也意味着当您`smallAnimal`从服务器获取 s 时，`smallAnimal`对象应该具有指向 Zoo 的属性`residesIn`。

# python - Python、cudamat 和 Spyder

> ID：16112688
> 
> 赞同：2
> 
> 时间：2013-04-19T20:04:39.497
> 
> 标签：python, cuda, spyder

我正在尝试使用 cudamat 库，但我不知道如何在 Spyder 中使用它。我已将 cudamat 文件夹内容包含在我的工作目录中，但是当我尝试时：

```
import cudamat as cm 
```

我收到以下错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "cudamat/__init__.py", line 1, in <module>
    from cudamat import *
  File "cudamat/cudamat.py", line 7, in <module>
    _cudamat = ct.cdll.LoadLibrary('libcudamat.so')
  File "/usr/lib/python2.7/ctypes/__init__.py", line 443, in LoadLibrary
    return self._dlltype(name)
  File "/usr/lib/python2.7/ctypes/__init__.py", line 365, in __init__
    self._handle = _dlopen(self._name, mode)
OSError: libcudamat.so: cannot open shared object file: No such file or directory 
```

当我从控制台窗口使用 python 运行我的脚本时，它工作正常。据我所知，我已将 Spyder 的工作目录设置到正确的位置，其中包含 libcudamat.so。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T22:21:34.670

（此处为 Spyder 开发人员）：您需要从控制台启动 Spyder，以便它可以获取其环境变量。我猜 cudamat 没有安装在常规位置，这就是 Spyder 默认找不到它的原因。

*注意*：这是我们计划在未来修复的 Spyder 限制（即无法读取环境变量）。

# javascript - Facebook 喜欢按钮 - 喜欢页面或图像

> ID：16112693
> 
> 赞同：0
> 
> 时间：2013-04-19T20:04:47.887
> 
> 标签：javascript, facebook-like

我是在我的网站上实施社交网络的新手。现在我想为每张图片实现一个like-button。

我的图像页面是例如`http://www.mysite.com/index.php?fx=photos&album=albumname&photoid=123`。现在，此页面的背景中包含专辑的所有图像。Onload，打开了一个带有正确`photoid`.

现在我的问题 - 对于 Facebook Like 按钮，您需要一个链接。这个链接应该是上面给出的完整网站网址，还是应该是图片的链接？（例如`http://www.mysite.com/photos/photoid.jpg`）？

为了便于使用，我将实现 iframe 版本，我尝试使用 html5 版本，但在循环浏览图像时无法更新它。但是，在 iframe 版本中，您需要将 url 作为 GET 参数提供。如果以前版本的答案是您需要提供完整的 url，我如何使用 javascript 对其进行清理？我知道使用 php`rawurlencode`应该可以解决问题，但需要在 js 中完成。

既然我在上面，是否需要在您的页面上添加带有附加信息的元标记？因为我的fancybox图像查看器，每次编辑元标记也需要大量的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:17:39.173

要实现 Like 按钮，您的 index.php 页面应提供以下 JavaScript

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=[[YOUR APP ID]]";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

然后，每次渲染图像的链接时，都可以同时渲染此代码：

```
<?php echo("<div class='fb-like' data-href='<IMAGE URL>' data-send='true' data-width='450' data-show-faces='false'></div>"); ?> 
```

如果 IMAGE URL 是唯一的，您将获得对该图像的唯一喜欢。

几年前，我拍摄了这段视频，内容是关于将 Facebook Like 放入 PHP 中的 WordPress 模板页面。原理类似，希望对您有所帮助：

[https://www.facebook.com/video/video.php?v=457944337233](https://www.facebook.com/video/video.php?v=457944337233)

Facebook 的东西从 15:00 开始

对于 URL - 您是否尝试查看：[http](http://www.w3schools.com/jsref/jsref_encodeURI.asp) ://www.w3schools.com/jsref/jsref_encodeURI.asp - 这演示了一个允许您将字符串编码为 URI 的函数。

# python - 为什么我不能在 Python 中登录 imap 服务器两次

> ID：16112695
> 
> 赞同：8
> 
> 时间：2013-04-19T20:04:48.947
> 
> 标签：python, imap, imaplib

正如下面的错误消息所述，我无法登录，因为我处于 LOGOUT 状态而不是 NONAUTH 状态。我如何从 LOGOUT 转到 NOAUTH？

下面的示例（显然登录凭据在下面是伪造的）

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39)
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import imaplib
>>> imap_server = imaplib.IMAP4_SSL("imap.gmail.com",993)
>>> imap_server.login('something@myserver.com', 'mypassword')
('OK', ['something@myserver.com Joe Smith authenticated (Success)'])
>>> imap_server.logout()
('BYE', ['LOGOUT Requested'])
>>> imap_server.login('something@myserver.com', 'mypassword')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "/usr/lib/python2.7/imaplib.py", line 505, in login
    typ, dat = self._simple_command('LOGIN', user, self._quote(password))
  File "/usr/lib/python2.7/imaplib.py", line 1070, in _simple_command
    return self._command_complete(name, self._command(name, *args))
  File "/usr/lib/python2.7/imaplib.py", line 825, in _command
    ', '.join(Commands[name])))
imaplib.error: command LOGIN illegal in state LOGOUT, only allowed in states NONAUTH
>>> quit() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T20:09:15.183

您尝试做的事情在 IMAP 中是非法的。如果您阅读[RFC 3501](https://www.rfc-editor.org/rfc/rfc3501)，它明确将[注销状态](https://www.rfc-editor.org/rfc/rfc3501#section-3.4)定义为没有返回的状态。无论您是从自身收到错误`imaplib`，还是从服务器收到错误，或者您真的很不走运，它都会起作用并将您带入未定义的行为领域……答案都是一样的：不要这样做。

因此，您必须创建与服务器的新连接才能再次登录：

```
>>> imap_server.logout()
('BYE', ['LOGOUT Requested'])
>>> imap_server = imaplib.IMAP4_SSL("imap.gmail.com",993)
>>> imap_server.login('something@myserver.com', 'mypassword')
('OK', ['something@myserver.com Joe Smith authenticated (Success)']) 
```

（当然，您不必将相同的名称重新绑定`imap_server`到新连接。）

# php - 通过 2 个键按 1 顺序对数组进行排序

> ID：16112710
> 
> 赞同：0
> 
> 时间：2013-04-19T20:06:21.800
> 
> 标签：php

我有一个这样的数组。

```
 [Badi Assad] => Array
    (
        [last_name] => Assad
        [first_name] => Badi
        [artist_name] => 
        [asterick] => *
        [slug] => badiassad
    )

[Ben Taylor] => Array
    (
        [last_name] => Taylor
        [first_name] => Ben
        [artist_name] => Ben Taylor
        [asterick] => *
        [slug] => bentaylor
    )

[Beverly] => Array
    (
        [last_name] => Hills
        [first_name] => Beverly
        [artist_name] => Beverly
        [asterick] => 
        [slug] => Eedih
    )

[Bruce Cockburn] => Array
    (
        [last_name] => Cockburn
        [first_name] => Bruce
        [artist_name] => Bruce Cockburn
        [asterick] => *
        [slug] => brucecockburn
    )

[Bohème] => Array
    (
        [last_name] => 
        [first_name] => Cassidy
        [artist_name] => Bohème
        [asterick] => *
        [slug] => cassidy
    ) 
```

我将如何排序，所以它将按照姓氏和艺术家姓名的顺序排列，以便姓氏胜过艺术家姓名，除非它是空的。

结果应该是这样的。

```
 [Badi Assad] => Array
    (
        [last_name] => Assad
        [first_name] => Badi
        [artist_name] => 
        [asterick] => *
        [slug] => badiassad
    )
[Bohème] => Array
    (
        [last_name] => 
        [first_name] => Cassidy
        [artist_name] => Bohème
        [asterick] => *
        [slug] => cassidy
    )
[Bruce Cockburn] => Array
    (
        [last_name] => Cockburn
        [first_name] => Bruce
        [artist_name] => Bruce Cockburn
        [asterick] => *
        [slug] => brucecockburn
    )

[Beverly] => Array
    (
        [last_name] => Hills
        [first_name] => Beverly
        [artist_name] => Beverly
        [asterick] => 
        [slug] => Eedih
    )
[Ben Taylor] => Array
    (
        [last_name] => Taylor
        [first_name] => Ben
        [artist_name] => Ben Taylor
        [asterick] => *
        [slug] => bentaylor
    ) 
```

我目前正在尝试这个。

```
 $newartists = array();
foreach($users as $k => $v)
 {
    $name = (strlen($v['artist_name']) > 0) ? $v['artist_name'] : $v['first_name'].' '.$v['last_name'];
    $newartists[$name]['last_name'] = $v['last_name'];
    $newartists[$name]['first_name'] = $v['first_name'];
    $newartists[$name]['artist_name'] = $v['artist_name'];
    $newartists[$name]['asterick'] = $ask;
    $newartists[$name]['slug'] = $v['slug'];
}                    
$sort = array();
foreach($newartists as $k=>$v) {
    $sort['artist_name'][$k] = $v['artist_name'];
    $sort['last_name'][$k] = $v['last_name'];
}

array_multisort( $sort['last_name'], SORT_ASC,$sort['artist_name'], SORT_ASC, $newartists); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:27:16.770

使用[uasort 函数](http://www.php.net/manual/en/function.uasort.php)有点像这样：

```
<?php
    $newartists = array(
        '3' => array(
            'last_name'   => 'c',
            'artist_name' => 'c'
        ),
        '1' => array(
            'artist_name' => 'a'
        ),
        '2' => array(
            'last_name'   => 'b',
            'artist_name' => 'd'
        ),
    );

    function cmp($a, $b)
    {
        $result = 0;

        // Sort preferably by last name
        if (!empty($a['last_name']) && !empty($b['last_name'])) {
            $result = strcmp($a["last_name"], $b["last_name"]);

        // Failover to artist name sort
        } else {
            $result = strcmp($a["artist_name"], $b["artist_name"]);
        }

        return $result;
    }

    usort($newartists, "cmp"); 
```

### 结果

```
Array
(
    [1] => Array
        (
            [artist_name] => a
        )

    [2] => Array
        (
            [last_name] => b
            [artist_name] => d
        )

    [3] => Array
        (
            [last_name] => c
            [artist_name] => c
        )
) 
```

# php - 我如何使用php在不同的时间间隔内获得分组的随机数

> ID：16112712
> 
> 赞同：-1
> 
> 时间：2013-04-19T20:06:28.627
> 
> 标签：php

我没有发现我的代码有任何问题，但它只输出 0 到 20 之间的数字，而没有遵循我施加的时间限制。请帮帮我。下面是代码：

```
<!DOCTYPE html>
<html>
<?php
    set_time_limit(0);
    class random{
        var $max;
        var $min;
        function irregularnos($min,$max) {
             $num = '';
             $i = 0;
             $this->min=$min;
             $this->max=$max;
             while($i < 25)
             {
                 $num .= mt_rand($min,$max);
                 echo $num . "</br>";
                 $num = '';
                 $i++;
             }
         }
    } 
    $rand1 = new random;
    $rand2 = new random;
    $rand3 = new random; 
    $rand4 = new random;
    date_default_timezone_set('Europe/Berlin');
    $start_time = new DateTime(); //current time 
    while(true){
        if ($start_time->modify('+1 seconds')<= new DateTime() and  $start_time->modify('+2      seconds') > new DateTime()) { $rand2->irregularnos(21,50);}
else  if ($start_time->modify('+2 seconds') <= new DateTime() and $start_time-   >modify('+3 seconds') > new DateTime()) { $rand3->irregularnos(51,70);}
else if ($start_time->modify('+3 seconds') <= new DateTime() and $start_time->modify('+4 seconds') > new DateTime()) {$rand4->irregularnos(71,100);}
else if (new DateTime() < $start_time->modify('+1 seconds')) {$rand1->irregularnos(0,20);}
else if(new DateTime()> $start_time->modify('+4 seconds'))  { break;}
    } 
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T22:15:41.237

代码正在运行。可能您希望代码对每个随机数*只运行一次，而实际上循环可能会执行很多次，比如第一秒内执行 50 次。*

在那一整秒中，随之而来的条件是时间在`start_time`和之间`start_time + 1 second`，因此激活了 0-20 序列。

另外，请注意您没有正确使用您的对象 - 例如，实例变量 min 和 max 从未实际使用过，并且您的调用原型将使声明四个数字生成器毫无意义。

此代码添加了一个暂停以显示正在生成的所有数字：

```
<?php
    set_time_limit(0);
    class random{
        var $min;
        var $max;
        function __construct($min, $max) {
                $this->min = $min;
                $this->max = $max;
        }
        function irregularnos($n) {
            for ($i = 0; $i < $n; $i++) {
                $num = mt_rand($this->min, $this->max);
                echo $num . '</br>';
             }
         }
    }
    $rand1 = new random(0,20);
    $rand2 = new random(21,50);
    $rand3 = new random(51,70);
    $rand4 = new random(71,100);
    date_default_timezone_set('Europe/Berlin');
    $start_time = time();
    for($quit = false; !$quit;) {
        // How much time has elapsed since $start_time?
        switch(time() - $start_time)
        {
                case 0: $rand1->irregularnos(25); break;
                case 1: $rand2->irregularnos(25); break;
                case 2: $rand3->irregularnos(25); break;
                case 3: $rand4->irregularnos(25); break;
                default: $quit = true; break;
        }
        print "---\n";
        usleep(500000);
    }
?> 
```

# c# - 将参数传递给 ElapsedEventHandler C#

> ID：16112713
> 
> 赞同：1
> 
> 时间：2013-04-19T20:06:46.250
> 
> 标签：c#, timer

该程序旨在打开两个 COM 端口并每隔 1 秒将数据从一个端口发送到另一个端口。用户输入哪个端口发送和哪个端口接收。我遇到的问题是 ElapsedEventHandler() 接受了具有两个默认参数的 OnTimedEvent() 函数。我希望 OnTimedEvent() 函数向发送端口写入一些内容并在接收端口上读取它，然后将其显示到控制台。显然我的代码不会像现在这样工作，因为端口和消息不在 OnTimedEvent() 的范围内。我该怎么做才能使该功能按我想要的方式工作？提前致谢。

```
using System;
using System.IO.Ports;
using System.Timers;

public class serial_test1
{
    public static void Main(string[] args)
    {
        string sender;
        string recver;
        string buff_out;
        string message;
        SerialPort send_port;
        SerialPort recv_port;

        if (args.Length == 1)
        {
            sender = "UART";
            recver = "USB";
            message = args[0];
        }
        else if (args.Length == 2)
        {
            sender = args[0];
            message = args[1];
            if (sender == "USB")
            {
                recver = "UART";
            }
            else
            {
                recver = "USB";
            }
        }
        else
        {
            sender = "UART";
            recver = "USB";
            message = "TEST MESSAGE";
        }

        int baud = 115200;
        int data_bits = 8;
        Parity parity = Parity.None;
        StopBits stop_bits = StopBits.One;

        buff_out = message;

        SerialPort UARTport = new SerialPort("COM1", baud, parity, data_bits, stop_bits);
        SerialPort USBport = new SerialPort("COM7", baud, parity, data_bits, stop_bits);

        UARTport.Open();
        USBport.Open();

        if (sender == "USB")
        {
            send_port = USBport;
            recv_port = UARTport;
        }
        if (sender == "UART")
        {
            send_port = UARTport;
            recv_port = USBport;
        }

        string header = "from " + sender + " port to " + recver + " port";
        Console.WriteLine(header);

        Timer aTimer = new System.Timers.Timer();
        aTimer.Elapsed += new ElapsedEventHandler(OnTimedEvent);
        // Set the Interval to 1 second.
        aTimer.Interval = 1000;
        aTimer.Enabled = true;

        UARTport.Close();
        USBport.Close();
        Console.ReadLine();
    }

    private static void OnTimedEvent(object source, ElapsedEventArgs e)
    {
        string buff_in;
        send_port.WriteLine(buff_out);
        buff_in = recv_port.ReadLine();
        Console.WriteLine(buff_in);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:16:10.587

我建议`System.Threading.Timer`改为使用，您可以将状态对象传递给传递给`TimerCallback`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-24T16:45:10.913

您可以使用以下选项之一：

### 01 - 只需使用辅助对象

```
static string _value;
static void MyElapsedMethod(object sender, ElapsedEventArgs e)
{
    Console.WriteLine(_value);
} 
```

### 02 - 或使用封闭课程

```
class CustomTimer : System.Timers.Timer
{
    public string Data;
}

private void StartTimer()
{
    var timer = new CustomTimer
    {
        Interval = 3000,
        Data = "Foo Bar"
    };

    timer.Elapsed += timer_Elapsed;
    timer.Start();
}

void timer_Elapsed(object sender, ElapsedEventArgs e)
{
    string data = ((CustomTimer)sender).Data;
} 
```

# kdb - 如何枚举 kdb 表中的多个列？

> ID：16112714
> 
> 赞同：3
> 
> 时间：2013-04-19T20:06:59.003
> 
> 标签：kdb

我想对一个 kdb 表进行分区，所以我需要先枚举它的符号列。我将`.Q.en`运算符用于此任务：

```
mytable_mem_enum: .Q.en[`$sym_path] mytable_mem

/generate partition schema
(`$db_path;``!((17;2;9);(17;2;9))) set ([]ts:`time$(); msg_type:`symbol$(); price_type:`byte$(); memo:`symbol$())

/store
(`$db_path) upsert (select ts,msg_type,pricetype,memo from mytable_mem_enum) 
```

`sym`Q在我指定的目录下创建一个名为`sym_path`. 该文件是否包含所有符号列的枚举？`.Q.en`和这个语法有什么区别：

```
([] ti:09:30:00 09:31:00; s:`:/db/sym?`ibm`msft; p:101 33f) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:16:47.790

[`.Q.en`](http://code.kx.com/q/ref/dotq/#qen-enumerate-varchar-cols)确实枚举了表中任何符号类型的列。

除了方便一个简单的函数之外，它与*手动*进行枚举在本质上没有什么不同。

# delphi - 从生成的进程中读取会挂起两个进程

> ID：16112720
> 
> 赞同：2
> 
> 时间：2013-04-19T20:07:23.007
> 
> 标签：delphi, winapi, ipc

我正在尝试关注[这篇 msdn 文章](http://msdn.microsoft.com/en-us/library/ms682499%28VS.85%29.aspx)。

我创建了一个非常简单的控制台应用程序。

```
Writeln('Take a nap.');
Sleep(1000);
Writeln('Done.'); 
```

我正在使用以下代码启动控制台应用程序并（尝试）读取其输出。控制台应用程序和主应用程序都挂起。

```
procedure TForm1.Button1Click(Sender: TObject);
const
  PATH: WideString = 'c:\tmp\nap.exe';
var
  ProcInfo: TProcessInformation;
  StartInfo: TStartupInfo;
  WorkingDir: WideString;
  StdOutRead, StdOutWrite: THandle;
  Attr: SECURITY_ATTRIBUTES;
  N: Cardinal;
  Buf: Array [0.. 5000] of Byte;
begin
  FillChar(Attr, SizeOf(SECURITY_ATTRIBUTES), 0);
  Attr.nLength := SizeOf(SECURITY_ATTRIBUTES);
  Attr.bInheritHandle := True;
  Attr.lpSecurityDescriptor := nil;

  if not (CreatePipe(StdOutRead, StdOutWrite, @Attr, 0)) then
    RaiseLastOSError;

  FillChar(StartInfo, SizeOf(TStartupInfo), 0);
  StartInfo.cb := SizeOf(TStartupInfo);
  StartInfo.dwFlags := STARTF_USESTDHANDLES;
  StartInfo.hStdOutput := StdOutWrite;
  // I've tried creating pipes for stdin and stderr to no avail

  WorkingDir := ExtractFilePath(PATH);
  if not CreateProcess(nil, PWideChar(PATH), nil, nil, false, 0, nil, PWideChar(WorkingDir), StartInfo, ProcInfo) then
    RaiseLastOSError;

  // this call hangs -- the console app hangs regardless
  if not ReadFile(StdOutRead, Buf[0], Length(Buf), N, nil) then
    RaiseLastOSError;
end; 
```

任何建议......不幸的是[，这篇文章](http://blogs.msdn.com/b/oldnewthing/archive/2011/07/07/10183884.aspx)也没有帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T21:13:29.757

我能看到的最明显的缺陷是你在调用时设置`bInheritHandles`为. 您必须通过，当您通过时，您的代码按预期工作。的输出被忠实地读入.`False``CreateProcess``True``nap.exe``Buf`

# javascript - Soundcloud Flash Failback - 启用了 api？

> ID：16112728
> 
> 赞同：0
> 
> 时间：2013-04-19T20:08:04.023
> 
> 标签：javascript, soundcloud

我在网站上使用 html5 soundcloud 小部件。我正在使用此处记录的 api 响应各种事件：http: [//developers.soundcloud.com/docs/api/html5-widget](http://developers.soundcloud.com/docs/api/html5-widget)

在 IE8 中，小部件故障转移到 Flash 播放器。由于使用了 indexOf()，小部件 api 脚本会引发一些错误。我假设提供用于与小部件交互的脚本在小部件无法恢复到闪存时无法正常工作。

我研究了使用此处记录的 flash api：http: [//developers.soundcloud.com/docs/widget](http://developers.soundcloud.com/docs/widget)

我正在检测 Flash 播放器的使用，然后尝试收听播放和结束时触发的事件。javascript 事件没有触发，我猜是因为故障回复嵌入代码不包含“enable_api=true”flashvar，这是真的吗？

如果是，有没有办法设置这个 flashvar？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T15:16:21.993

我刚刚`enable_api`为 Flash 后备添加了参数。它有望在明天部署。感谢您让我们知道。

# javascript - javascript getElementById 为 null - 由 this 传递的 Id

> ID：16112732
> 
> 赞同：0
> 
> 时间：2013-04-19T20:08:22.400
> 
> 标签：javascript, html

也许我没有正确使用“这个”。

HTML：

```
<div style="margin: 4px; padding: 10px; border: solid 1px;" onmouseover="darken(this);"> 
```

JavaScript：

```
function darken(elt) {
    "use strict";
    document.getElementById(elt.id).style.backgroundColor = "#e8e8e8";
} 
```

?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:10:03.407

如果您有对该元素的引用，则无需查找其 ID，然后在文档中查询与该 ID 匹配的元素。（顺便说一下，没有为该元素分配 ID）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T20:10:06.923

`this`是对元素的引用。您可以简单地将其用作：

```
function darken(elt) {
    elt.style.backgroundColor = '#e8e8e8';
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-19T20:11:10.787

## ***[`jsFiddle Demo`](http://jsfiddle.net/Zw5Mm/)***

第一个问题是`id`那个元素上没有，所以你不能用`document.getElementById`它来找到它。

您可以使用的一个优点是您已经通过以下元素传递了元素`this`：

```
function darken(elt) {
 "use strict";
 elt.style.backgroundColor = "#e8e8e8";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-19T20:10:54.843

`Id`您没有为您的 div 元素提供任何内容

```
<div id="myDiv" style="margin: 4px; padding: 10px; border: solid 1px;" onmouseover="darken(this);"> 
```

[JS 小提琴演示](http://jsfiddle.net/ygQfX/)

# php - 从 Trello 身份验证获取“找不到应用程序”

> ID：16112736
> 
> 赞同：3
> 
> 时间：2013-04-19T20:08:34.403
> 
> 标签：php, api, authentication, trello

我正在尝试调用 Trello API 的身份验证部分以获取用户令牌。

我正在使用这个 URL：https://trello.com/1/authorize?callback_method=postMessage&return_url=http%3A%2F%2Flocalhost%2Ftrello%2Findex.php&expiration=never&name=SB-Trello&response_type=token&key=[我的 api 密钥]

但我得到的回应总是“找不到应用程序”

您可以在“名称”参数中发送的内容是否有限制，或者为什么我会收到此响应？

这是什么意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T09:36:03.163

关闭这个。像往常一样在 SO 上提出一些问题后，几分钟后我自己找到了答案。重新键入密钥后，它工作正常。

# python - 异步 I/O 多路复用（套接字和线程间）

> ID：16112738
> 
> 赞同：2
> 
> 时间：2013-04-19T20:08:35.967
> 
> 标签：python, linux, windows, asynchronous, asyncsocket

我想让 Python 线程等待来自一个套接字（串行端口、TCP/IP 等）的数据，或者等待来自另一个线程的数据。

我想要一个可移植的 Windows 和 Linux 解决方案。

我正在寻找类似于 select.select() 但我相信我不能在 Windows 上使用 select.select() 进行线程间通信。

这很容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T09:16:45.713

您确定有必要使用线程吗？您是否正在使用一些需要使用它们的外国 API？

无论如何，使用 Twisted，您可以轻松地监听任何类似文件的便携（包括串行端口和 TCP 套接字）。此外，如果您确实需要使用线程，Twisted 提供了几个工具来执行此操作。根据您的描述，最简单的方法是调用[`reactor.callFromThread`](https://twistedmatrix.com/documents/current/api/twisted.internet.interfaces.IReactorThreads.callFromThread.html). 如果你想取回数据而不是简单地调用反应器线程中的函数，Twisted 提供了[`twisted.internet.threads.blockingCallFromThread`](https://twistedmatrix.com/documents/current/api/twisted.internet.threads.blockingCallFromThread.html)，它将阻塞直到反应器线程中的函数返回（或者，如果它返回延迟，直到延迟触发）。

# c - 使用 tpl 序列化包含包含字符串数组的结构的结构数组

> ID：16112744
> 
> 赞同：3
> 
> 时间：2013-04-19T20:08:59.047
> 
> 标签：c, serialization, struct

我有一些用 C 语言编写的代码，其中包含一些用于保存数据的相当大的结构。我想使用[tpl](http://troydhanson.github.io/tpl/index.html)对结构数据进行序列化/反序列化以保存和加载程序的数据，而不必编写一堆代码来完成它。

我的问题在于`tpl_map()`函数：我似乎无法让它解析一个语句，在该语句中它将序列化一个结构数组，其中包含一个包含字符串数组的结构。

[tpl 的文档](http://troydhanson.github.io/tpl/userguide.html)不一定说你可以这样做或你不能这样做。我想序列化的东西将由 描述`A(S(i$(A(s)A(s)A(s)A(s)iiiiis)sssuussi))`，但`tpl_map()`每次都会引发解析错误。

这些是相关的结构定义：

```
typedef struct y {
    char** a;
    char** b;
    char** c;
    char** d;
    int e;
    int f;
    int g;
    int h;
    int i;
    char* j;
} y_t;

typedef struct x {
    int a;
    y_t y;
    char* b;
    char* c;
    char* d;
    unsigned int e;
    unsigned int f;
    char g[40];
    char* h;
    unsigned int i;
} x_t; 
```

我正在尝试序列化一个`x_t`.

将 tpl 格式字符串削减到最小可能并进行处理，我发现它似乎不喜欢在外部结构内的内部结构内有一个数组。更具体地说，例如`A(i)`in会出现问题。`A(S($(A(i))))`

有什么想法吗？

# php - wkhtmltopdf 使用填写好的表格打印 PDF

> ID：16112747
> 
> 赞同：2
> 
> 时间：2013-04-19T20:09:22.790
> 
> 标签：php, html, wkhtmltopdf

我目前拥有的：

在表单 sumbit 上，我调用了一个新的 php 页面，该页面使用 php exec() 命令执行 wkhtmltopdf，方法是将表单所在的文件的名称传递给它。例如。（表单在 test.php 中，onsubmit 调用 complete.php，complete.php 有一行 exec('wkhtmltopdf test.php test.pdf')） 这会根据我主页的初始设置正确生成 pdf。

问题：

我的表单有显示/隐藏的复选框。它还有一个评论框。当我在主 php 文件上运行 wkhtmltopdf 时，它只需要初始设置。我希望 wkhtmltopdf 创建一个显示复选框并填写评论字段的 pdf。

可能的解决方案：

1）在提交表单时，它会创建一个相同的 php 文件，其中包含 javascript“硬编码”选择到文件中，因此当 wkh​​tmltopdf 调用它时，页面的“初始设置”是填写的页面。

2）我模糊地读到 wkhtmltopdf 支持使用它制作的 pdf 中的表单数据，但它对我不起作用。我假设这是因为我调用了一个新页面，然后执行 wkhtmltopdf 的命令。但即使我把它放在调用文件的同一页面中，我也会假设仍然抓住了初始条件。

问题：

因此，对于这两种解决方案，我不知道该怎么做，甚至不知道它们是否可行。所以我的问题是这些工作中的任何一个都有效还是有人有更好的想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-14T19:18:46.690

AFAIK，`wkhtmltopdf`无法操作 PDF 表单，但您可以使用[**PDFtk**](http://www.pdflabs.com/tools/pdftk-the-pdf-toolkit/)。

因此，您可以通过两步过程完成您所追求的：(1) 使用 生成 PDF `wkhtmltopdf`，然后 (2) 使用`pdftk`.

# actionscript-3 - 创建视线

> ID：16112749
> 
> 赞同：0
> 
> 时间：2013-04-19T20:09:27.873
> 
> 标签：actionscript-3

我正在创建一个生存僵尸游戏，当僵尸靠近玩家时，玩家可以攻击僵尸。如何创建玩家的视线，如果僵尸在玩家的特定半径和角度（基本上靠近玩家），那么玩家可以攻击。我设法计算出面向前方的玩家，但是我如何从玩家面向的方式以及僵尸是否在玩家的半径和角度内创建像 +- 15 这样的角度。到目前为止，这就是我所做的

```
package 
{
import flash.display.MovieClip;
import flash.events.Event;
import flash.events.KeyboardEvent;
import flash.events.MouseEvent;
import flash.ui.Keyboard;
import flash.display.Graphics;

public class Player extends MovieClip
{
//Player Setting
var walkSpeed:Number = 4;
var walkRight:Boolean = false;
var walkLeft:Boolean = false;
var walkUp:Boolean = false;
var walkDown:Boolean = false;
var attacking:Boolean = false;
var radius:Number = 60;

public function Player()
{
stage.addEventListener(KeyboardEvent.KEY_DOWN,walk);
addEventListener(Event.ENTER_FRAME,Update);
stage.addEventListener(KeyboardEvent.KEY_UP,stopWalk);
stage.addEventListener(MouseEvent.CLICK,attack);
}

function walk(event:KeyboardEvent)
{
//When Key is Down
if (event.keyCode == 68)
{
walkRight = true;
}
if (event.keyCode == 87)
{
walkUp = true;
}
if (event.keyCode == 65)
{
walkLeft = true;
}
if (event.keyCode == 83)
{
walkDown = true;
}
}

function Update(event:Event)
{

//if attacking is true then key moves are false;
if ((attacking == true))
{
walkRight = false;
walkLeft = false;
walkUp = false;
walkDown = false;
}
else if ((attacking == false))
{
//Else if attacking is false then move and rotate to mouse;
var dx = parent.mouseX - x;
var dy = parent.mouseY - y;
var angle = Math.atan2(dy,dx) / Math.PI * 180;
rotation = angle;

                               var radiusx:Number = x+radius*Math.cos(rotation/180*Math.PI);
       var radiusy:Number = y+radius*Math.sin(rotation/180*Math.PI);

if ((walkRight == true))
{
x +=  walkSpeed;
gotoAndStop(2);
}
if ((walkUp == true))
{
y -=  walkSpeed;
gotoAndStop(2);
}
if ((walkLeft == true))
{
x -=  walkSpeed;
gotoAndStop(2);
}
if ((walkDown == true))
{
y +=  walkSpeed;
gotoAndStop(2);
}
}
}

//Calculate the distance between the two
public function distanceBetween(player:Object,zombies:Object):Number
{
var dx:Number = player.x - zombies.x;
var dy:Number = player.y - zombies.y;
return Math.sqrt(((dx * dx) + dy * dy));
}

function stopWalk(event:KeyboardEvent)
{
if ((attacking == false))
{
if (event.keyCode == 68)
{
event.keyCode = 0;
walkRight = false;
gotoAndStop(1);
}
if (event.keyCode == 87)
{
event.keyCode = 0;
walkUp = false;
gotoAndStop(1);
}
if (event.keyCode == 65)
{
event.keyCode = 0;
walkLeft = false;
gotoAndStop(1);
}
if (event.keyCode == 83)
{
event.keyCode = 0;
walkDown = false;
gotoAndStop(1);
}
}
}

function attack(event:MouseEvent)
{
if ((attacking == false))
{
attacking = true;
gotoAndStop(3);
if (hitTestObject(MovieClip(root).Zo))
{
trace('ouch');

}
}
}
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:23:12.347

在伪代码中，这是您可以执行此操作的一种方法：

```
// check distance between player and zombie
  // if zombie is close enough 
       //get angle between player and zombie
       //check difference between player facing and angle
       //if difference between angle <= 15 degrees 
          //attack zombie 
```

这是一个函数，它将返回从玩家到给定目标的角度：

```
// I used the code from your code above to create this function
function getAngle(targetX:Number, targetY:Number):Number
{
     var dx = targetX - player.x;
     var dy = targetY - player.y;
     var angle = Math.atan2(dy,dx) / Math.PI * 180;

     return angle;
} 
```

这是您的代码中的距离函数，我对其进行了修改以接受影片剪辑：

```
public function distanceBetween(player:MovieClip,zombie:MovieClip):Number
{
    var dx:Number = player.x - zombie.x;
    var dy:Number = player.y - zombie.y;
    return Math.sqrt(((dx * dx) + dy * dy));
} 
```

所以你可以使用上面的伪代码来创建代码来解决你的问题：

```
// check distance between player and zombie
if (distanceBetween(player,zombie) <= maxRadius)
{
    // get angle between player and zombie
    var angleToZombie:Number = getAngle(zombie.x, zombie.y);

    // I am assuming that the facing is going to be towards the mouse
    // calculate facing of player
    var currentFacing:Number = getAngle(mouseX, mouseY);

    //check difference between player facing and angle
    if (Math.abs(currentFacing - angleToZombie) <= 15)
    {
         // attack the zombie
    }
} 
```

# postgresql - 如何为 adminpack 解决 PostgreSQL pgAdmin 错误“未安装服务器工具”？

> ID：16112752
> 
> 赞同：30
> 
> 时间：2013-04-19T20:09:44.737
> 
> 标签：postgresql, ubuntu, pgadmin, psql

Ubuntu 上的 PostgreSQL 9.1 pgAdmin III 给出了这个警告：

> 大师提示 - 未安装
> 
> 服务器工具 Server Instrumentation
> 
> 服务器缺少工具功能。
> 
> pgAdmin II 使用了一些在所有 PostgreSQL 版本中默认不可用的支持功能...
> 
> adminpack 默认安装并激活如果...
> 
> 一旦安装了您的扩展，您只需要点击“修复它！” 按钮 ...

如何解决这个问题？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-19T20:10:10.363

对于当前版本的 PostgreSQL 和 pgAdmin，“Guru”对话框警告有一个“修复它！” 按钮或命令。用它。

如果没有“修复它！” 那么我们可以使用Unix命令行如下。

这适用于 PostgreSQL 9.1。旧版本的做法不同。

PostgresSQL 文档在这里：

*   [下载管理包](http://www.pgadmin.org/download/adminpacks.php)
*   [8.4\. 管理包函数](http://www.postgresql.org/docs/8.4/static/adminpack.html)
*   [9.1。管理包函数](http://www.postgresql.org/docs/9.1/static/adminpack.html)

像这样安装`adminpack`：

```
$ sudo apt-get install postgresql-contrib 
```

要验证我们是否获得了文件，请列出它们：

```
$ dpkg -L postgresql-contrib-9.1 | grep adminpack 
```

结果：

```
/usr/share/postgresql/9.1/extension/adminpack.control
/usr/share/postgresql/9.1/extension/adminpack--1.0.sql
/usr/lib/postgresql/9.1/lib/adminpack.so 
```

查找 adminpack 文件的替代方法：

```
$ sudo updatedb
$ locate adminpack 
```

使用 psql 创建扩展：

```
$ sudo -u postgres -i
$ psql [dbname]
# CREATE EXTENSION adminpack; 
```

（如果您没有超级用户或需要创建 per-db 扩展，请参阅@w00t 下面的评论以`\c dbname`用于连接数据库）

核实：

```
# select * from pg_extension; 
```

结果：

```
extname  | extowner | extnamespace | extrelocatable | extversion | extconfig | extcondition 
-----------+----------+--------------+----------------+------------+-----------+--------------
plpgsql   |       10 |           11 | f              | 1.0        |           | 
adminpack |       10 |           11 | f              | 1.0        |           | 
```

要将扩展加载到 pgAdmin 中，请查看数据库服务器图标：

*   右键单击该图标，然后选择“Disconnent”
*   右键单击该图标，然后选择“连接”

要验证 adminpack 是否正常工作：

*   单击数据库图标
*   在右上角的窗格中，单击“统计”选项卡。
*   滚动到统计信息的底部。
*   您现在看到一个“大小”条目，它显示了磁盘上的数据库大小。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-10-14T21:28:16.180

“修复它！” 按钮将出现在 OK 和 Cancel 旁边的“Guru Hint”对话框中。如果未向您提供该按钮，请在控制台中输入以下内容：

```
sudo apt-get install postgresql-contrib 
```

然后单击 guru 按钮（在我的版本中，是 ? 按钮左侧的一张脸）和“修复它！” 按钮应该出现。点击它。

如果修复它，请参阅 joelparkerhenderson 的答案！按钮不出现。

# google-app-engine - 带有 GAE 的 JPQL 中的 IN 语句

> ID：16112758
> 
> 赞同：0
> 
> 时间：2013-04-19T20:10:28.033
> 
> 标签：google-app-engine, jpa, jpql

我尝试将 JPA 与 GAE 一起使用，但我遇到了下一个问题：

当我执行此查询时：

```
select x From Advert x where x.advertType in (15) 
```

或者

```
select x From Advert x where x.advertType in (20) 
```

实体管理器在两种情况下都返回一个实体，但是当我尝试执行时

```
select x From Advert x where x.advertType in (15,20) 
```

返回零实体

这是我的映射：

```
@Entity
public class Advert extends DomainObject implements Comparable<Advert> {
    @ManyToOne(cascade = CascadeType.PERSIST, fetch = FetchType.EAGER)
    @Unowned
    private AdvertType advertType;
    ...
}

@Entity
public class AdvertType extends DomainObject implements Comparable<AdvertType> {
    private Integer position;
    private String typeId;
    private String titleMain;
}

@Entity
@MappedSuperclass
public abstract class DomainObject implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;
} 
```

日志：

```
2013-04-20 12:48:17 DEBUG Query:58 - QueryCompilation:
  [from:ClassExpression(alias=x)]
  [filter:DyadicExpression{DyadicExpression{PrimaryExpression{x.advertType}  =  Literal{15}}  OR  DyadicExpression{PrimaryExpression{x.advertType}  =  Literal{20}}}]
  [symbols: x type=net.org.selector.animals.domain.Advert]
2013-04-20 12:48:17 DEBUG Query:58 - JPQL Query : Executing "SELECT x FROM Advert x WHERE x.advertType in (15,20)" ...
2013-04-20 12:48:17 DEBUG Query:58 - Query compiled as : Kind=net.org.selector.animals.domain.Advert Filter : advertType_key=AdvertType(15) AND advertType_key=AdvertType(20) [QUERY-TYPE=NORMAL]
2013-04-20 12:48:17 DEBUG Native:58 - Executing query in datastore for SELECT x FROM Advert x WHERE x.advertType in (15,20) 
```

那么为什么查询编译为：

advertType_key=AdvertType(15) **AND** advertType_key=AdvertType(20)

代替

advertType_key=AdvertType(15)**或**advertType_key=AdvertType(20)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T07:12:44.160

您的查询有缺陷。“x.advertType”是 AdvertType 类型，因此它不能“在”数字列表中。如果“x.advertType.typeId”在字符串列表中，则可能会使用它。日志还告诉您实际调用了哪些低级查询

# tampermonkey - 仅在隐身模式下运行的 Tampermonkey 脚本？

> ID：16112766
> 
> 赞同：9
> 
> 时间：2013-04-19T20:11:15.037
> 
> 标签：tampermonkey, incognito-mode

是否可以将任何脚本制作成仅在 www.example.com 上运行的脚本，仅当从隐身窗口访问该网站时？（铬合金）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T18:23:45.217

我在 Tampermonkey 的 GM_info 中添加了一个 isIncognito 标志。所以你现在可以像这样检查隐身模式：

```
// ==UserScript==
// @name       testIncognito
// @namespace  http://tampermonkey.net/
// @version    0.1
// @description  enter something useful
// @match      http://*/*
// @copyright  2012+, You
// ==/UserScript==

if (GM_info.isIncognito) {
    alert([ GM_info.scriptHandler, 'detected incognito mode @', window.location.href ].join(' '));
} 
```

请注意，目前这仅适用于 TM beta 版本 3.0.3353 及更高版本。

# xml - 是否有标准 XML 格式库，并且使用标准进行设计是正确的选择吗？

> ID：16112767
> 
> 赞同：0
> 
> 时间：2013-04-19T20:11:17.567
> 
> 标签：xml, standards

我一般想知道是否有任何资源可用于查找 XML 标准格式。

如果您没有找到您将在应用程序中使用的数据的标准格式，您会自己创建标准并将其提交到某个地方吗？

除了帮助查找标准 xml 和 xsd 的位置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:23:40.160

我将从维基百科开始：[http](http://en.wikipedia.org/wiki/List_of_markup_languages) ://en.wikipedia.org/wiki/List_of_markup_languages 。W3C 创建和管理许多 XML 标准，OASIS 组织[http://en.wikipedia.org/wiki/OASIS_%28organization%29](http://en.wikipedia.org/wiki/OASIS_%28organization%29)也是如此。

XML 或其他标准的困难不在于创建它们，而在于获得广泛的社区使用。

如果您有通用数据，您可以使用 XSD Dataypes 来确保对象的类型（例如 xsd:double、xsd:uri）。除非您使用行业标准，否则您的数据结构对于您的应用程序来说是个人的。在这个阶段，大多数人会创建一个本地模式。即使是地址之类的东西也很重要——它们很大程度上取决于语言环境。

如果您使用命名空间，您通常可以通过使用来自多个现有模式的元素来创建自己的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:30:42.353

Robin Cover 制作了您在其中找到此规范的封面，过去通过总结所有这些规范来为社区提供出色的服务。可悲的是，他对他们的数量感到不知所措，并在几年前放弃了。

像地址数据这样的规范的问题之一是，它们是由对问题有非常深刻和广泛理解的行业团体组合在一起的，他们倾向于涵盖其任何成员可以提出的每一个角落案例。我们大多数人都可以通过询问我们在哪个城市的表格来解决问题，即使我们大多数人并不住在城市；我们凑合着用，它奏效了。但这对专家来说还不够好。您必须决定是否需要此类规格可能实现的复杂建模，或者是否可以使用便宜且令人愉悦的东西。

# python - Appengine 数据存储在日期时间引发 badValueErro，可能是由 monkeypatch 引起的

> ID：16112770
> 
> 赞同：1
> 
> 时间：2013-04-19T20:11:33.153
> 
> 标签：python, google-app-engine, google-cloud-datastore, monkeypatching, pytest

我收到以下错误消息：

```
BadValueError: Expected datetime, got datetime.datetime(2013, 4, 19, 19, 48, 2, 566558) 
```

ndb 的 model.py 第 1190 行中出现了错误，这里有一段代码。

```
def _validate(self, value):
    if not isinstance(value, datetime.datetime):
        raise datastore_errors.BadValueError('Expected datetime, got %r' % (value,)) 
```

这个 DateTime 被传递到这样的模型中：

```
#user is a parameter that's passed into the function this code is inside
#the same goes for lifetime, which is a number of seconds

token = os.urandom(16).encode("hex")
expires=datetime.datetime.now() + datetime.timedelta(seconds=lifetime)
instance = cls(token=token, user=user, expires=expires) 
```

但是，我正在使用 pytest 的 monkeypatch 参数对 datetime.datetime 进行monkeypatching。

```
newnow = datetime.datetime.now()
later = newnow + datetime.timedelta(seconds=10)

class fake_dt(datetime.datetime):
    @classmethod
        def now(cls):
            return newnow

monkeypatch.setattr(datetime,"datetime", fake_dt)
    #after that, I call my model creation function for the test. 
```

我正在猴子修补 datetime.datetime 的事实可能是问题吗？我该如何解决？我需要确保 datetime.datetime.now() 返回我在测试开始时捕获的日期。

# javascript - 这个关键字似乎不像它应该的那样工作

> ID：16112772
> 
> 赞同：0
> 
> 时间：2013-04-19T20:11:36.070
> 
> 标签：javascript, canvas, this, keyword

！关闭！

嘿，我一直在搞乱 JavaScript 中的对象，我遇到了一个问题：

```
function Game(name, canvas, width, height, fps)
{
    this.name = name;
    this.canvas = document.getElementById(canvas);
    this.ctx = this.canvas.getContext('2d');
    this.width = width;
    this.height = height;
    this.fps = fps;

}

Game.prototype.gameloop = function()
{
    //Clear Screen
    this.canvas.width = this.canvas.width;

    //Update
    //Update();
    //Draw
    Draw(this.ctx);//this is now pointing at 'Game'
};

Game.prototype.start = function() { 
    this.interval = setInterval(this.gameloop.bind(this),this.fps); 
}; 
```

我不明白为什么在这种情况下“this”关键字没有指向“Game”

有什么建议么？

# oracle - 在 Oracle 11g Express 中执行过程显示错误

> ID：16112777
> 
> 赞同：0
> 
> 时间：2013-04-19T20:11:43.520
> 
> 标签：oracle, oracle11g

我正在使用带有 System 作为用户名的 Oracle。我创建了一个名为 STUDY 的数据库。我使用以下 SQL 语句创建了一个名为 LIB 的表：

```
create table lib(
book varchar(20)
); 
```

我使用以下 SQL 语句创建了一个过程名称 SUB：

```
create or replace procedure SUB( sbook IN VARCHAR)
as
begin
insert into LIB values(sbook);
end;
/ 
```

我还通过以下 SQL 语句授予了 EXECUTE 权限：

```
grant EXECUTE on SUB to system; 
```

现在，当我尝试使用以下 SQL 语句执行 SUB 过程时：

```
execute STUDY.SUB ('mybook'); 
```

我收到以下错误：

```
ORA-00900: invalid SQL statement 
```

这个错误的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:16:31.477

执行为

```
begin
execute STUDY.SUB ('mybook');
end; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:12:53.073

首先，作为帐户做绝对最小值`SYSTEM`，并且不要在该架构下创建对象（或任何其他内置架构，尤其是`SYS`）。

如果您运行所有这些命令，`SYSTEM`那么您在架构`SUB`下创建过程`SYSTEM`，而不是在`STUDY`架构下。您还没有创建`STUDY` *数据库*，这不是 Oralce 做事的方式；您已经通过创建用户创建了*架构。*（至少，我认为这就是你所做的，你有可能在一个名为 的数据库中完成所有这些`STUDY`，但我对此表示怀疑）。

你可能应该做的是：

```
connect study/password
create table lib ( ... );
create or replace peocedure ( ... );
/
execute sub( ... ); 
```

如果您正在尝试授予，那么您需要创建第二个用户，比如说`USER2`，并且仍然是`STUDY`：

```
grant execute on sub to user2; 
```

然后以第二个用户身份连接并执行该过程：

```
connect user2/password
execute study.sub ( ... ); 
```

甚至授予 privs 也是不寻常的`SYSTEM`，通常只会对普通用户和角色进行。

# ios - 如何实现滑动并按住手势识别器？

> ID：16112778
> 
> 赞同：3
> 
> 时间：2013-04-19T20:11:58.540
> 
> 标签：ios, objective-c, uigesturerecognizer, gesture, uiswipegesturerecognizer

我有两个手势识别器，可以识别向右滑动手势和长按手势。我尝试使用委托方法`gestureRecognizer:shouldRecognizeSimultaneouslyWithGestureRecognizer:`，但是每当我执行滑动和长按手势时，该方法都会被调用多次而不是一次。我使用以下代码来设置手势识别器、调用委托方法以及在手势执行后对其进行处理。

```
//Setting up the swipe gesture recognizer
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeRight:)];
swipeRight.direction = UISwipeGestureRecognizerDirectionRight; 
swipeRight.delegate = self;
[self addGestureRecognizer:swipeRight];

//Setting up the long press gesture recognizer
UILongPressGestureRecognizer *rightLongPressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeRight:)];
rightLongPressRecognizer.delegate = self;
rightLongPressRecognizer.tag = PRESS_RIGHT_TAG;
[rightLongPressRecognizer setMinimumPressDuration:0.5];
[self addGestureRecognizer:rightLongPressRecognizer];

//Delegate method
-(BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer {
    return YES;   
}

//Method that the gestures call 
-(void)handleSwipeRight: (UIGestureRecognizer *)recognizer {

    self.player.direction = RIGHT;
    [self resetSpriteView];
    [self.playerSprite startAnimating];

    float playerSpriteX = self.playerSprite.center.x;
    float playerSpriteY = self.playerSprite.center.y;
    self.toPoint = CGPointMake(playerSpriteX + TILE_WIDTH, playerSpriteY);
    if(!([self checkIfPlayerHasReachedEnd])) {
        self.fromPoint = CGPointMake(playerSpriteX, playerSpriteY);
        CABasicAnimation *moveAnimation = [CABasicAnimation animation];
        moveAnimation.toValue = [NSValue valueWithCGPoint:CGPointMake(playerSpriteX + TILE_WIDTH, playerSpriteY)];
        [moveAnimation setDelegate:self];
        [moveAnimation setFillMode:kCAFillModeForwards];
        [moveAnimation setRemovedOnCompletion:NO];
        [moveAnimation setDuration:MOVE_ANIMATION_DURATION];
        [self.playerSprite.layer addAnimation:moveAnimation forKey:@"position"];
    }
} 
```

**有没有更好的方法来实现滑动并按住手势识别器**？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:43:15.267

我认为这里的问题是对委托做什么的误解，以及调用什么方法，当手势被执行时，实际上是，没有别的。

用另一种方法处理长按：

```
UILongPressGestureRecognizer *rightLongPressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleLongPress:)]; 
```

并自行处理滑动手势：

```
UISwipeGestureRecognizer *swipeRight = [[UISwipeGestureRecognizer alloc] initWithTarget:self action:@selector(handleSwipeRight:)]; 
```

# sql - 从 Google 电子表格生成 SQL 更新

> ID：16112779
> 
> 赞同：1
> 
> 时间：2013-04-19T20:12:08.630
> 
> 标签：sql, google-sheets

我有一个像这样组织的谷歌电子表格：

```
 A         B         C    
  |---------+---------+---------|
1 | Column1 | Column2 | Column3 |
  |---------+---------+---------|
2 | value1  | value2  | value3  |
  |---------+---------+---------| 
```

我想在单元格上生成以下 SQL 查询：

```
update TableX set Column1 = value1, Column2 = value2, Column3 = value3 
```

我知道可以这样做：

```
=CONCATENATE("update TableX set ",A1," = ",A2,", ",B1," = ",B2,", ",C1," = ",C2) 
```

但是有没有更好的方法来做到这一点，可以很容易地让我添加或删除新行？我正在寻找这方面的东西（例如，下面的功能）：

```
=CONCATENATE("update TableX set ",JOINTWOROWS(" = ", ", ",A1:C1,A2:C2)) 
```

其中参数 1 和 2 将是列内分隔符和列间分隔符。

我还希望能够添加新行，这将自动获取新的更新查询，例如：

```
 A         B         C         D
  |---------+---------+---------+---------|
1 | Column1 | Column2 | Column3 | Column4 |
  |---------+---------+---------+---------|
2 | value1  | value2  | value3  | update1 |
  |---------+---------+---------+---------|
3 | value1a | value2a | value3a | update2 |
  |---------+---------+---------+---------|
4 | value1b | value2b | value3b | update3 |
  |---------+---------+---------+---------|
5 | value1c | value2c | value3c | update4 |
  |---------+---------+---------+---------| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:21:57.240

一个未经测试的想法：使用公式添加一个新行（第 3 行）

> =CONCATENATE(", ";A1;" = '";A2;"')

只要您愿意，将此行向右拖动即可。

在更新单元格公式中，使用：

> =CONCATENATE("更新 TableX 集";A3:XYZ3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T21:17:40.657

如果我理解正确，在您的示例的 D1 中填充了额外的行：

```
=ArrayFormula(IF(ROW(A:A)=1;"Column4";IF(LEN(A:A)*LEN(B:B)*LEN(C:C);"update TableX set "&A1&" = "&A:A&", "&B1&" = "&B:B&", "&C1&" = "&C:C;IFERROR(1/0)))) 
```

# c# - 使用 c# 选择元标记？

> ID：16112780
> 
> 赞同：0
> 
> 时间：2013-04-19T20:12:13.303
> 
> 标签：c#

这是我要选择元标记的 XML

```
 <meta charset="utf-8">
              <title>Gmail: Email from Google</title>
              <meta name="description" content="10+ GB of storage, less spam, 
               and mobile access. Gmail is email that&#39;s intuitive, efficient, and
               useful. And maybe even fun.">
              <link rel="icon" type="image/ico" href="//mail.google.com/favicon.ico"> 
```

我正在这样做

```
 string texturl = textBox2.Text;
            string Url = "http://" + texturl;
            HtmlWeb web = new HtmlWeb();
            HtmlAgilityPack.HtmlDocument doc = web.Load(Url);

            var SpanNodes = doc.DocumentNode.SelectNodes("//meta");

            if (SpanNodes != null)
            {

                foreach (HtmlNode SN in SpanNodes)
                {

                    string text = SN.InnerText;

                        MessageBox.Show(text);

                } 
```

它实际上并没有从那里选择任何文本............我做错了什么请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:23:23.627

`meta`元素是自闭合元素，这意味着它们没有文本子元素 (InnerText)。我相信你想得到`content`属性的值。我相信您使用类似的东西来做到这一点`SN["content"]`，但我不知道 HtmlAgilityPack。

# android - 带有滑动菜单片段的列表视图

> ID：16112783
> 
> 赞同：0
> 
> 时间：2013-04-19T20:12:38.337
> 
> 标签：android

更新：

只是让你知道，当我尝试导入项目时，我最终会遇到比我数不清的更多错误，因此为什么我在这里试图弄清楚。我的滑动工作正常，只是添加了一个让我失望的列表菜单。谢谢你对我的耐心。

我没有更改主要内容，所以无论如何都是这样：

```
package com.projectcaruso.nfp;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.main, menu);
        return true;
    }

} 
```

我厌倦了将他的代码作为 MenuFragment.java 导入我的

```
package com.projectcaruso.nfp;

import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.ListFragment;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class MenuFragment extends ListFragment {

    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        return inflater.inflate(R.layout.list, null);
    }

    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        SampleAdapter adapter = new SampleAdapter(getActivity());
        for (int i = 0; i < 20; i++) {
            adapter.add(new SampleItem("Sample List", android.R.drawable.ic_menu_search));
        }
        setListAdapter(adapter);
    }

    private class SampleItem {
        public String tag;
        public int iconRes;
        public SampleItem(String tag, int iconRes) {
            this.tag = tag; 
            this.iconRes = iconRes;
        }
    }

    public class SampleAdapter extends ArrayAdapter<SampleItem> {

        public SampleAdapter(Context context) {
            super(context, 0);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            if (convertView == null) {
                convertView = LayoutInflater.from(getContext()).inflate(R.layout.row, null);
            }
            ImageView icon = (ImageView) convertView.findViewById(R.id.row_icon);
            icon.setImageResource(getItem(position).iconRes);
            TextView title = (TextView) convertView.findViewById(R.id.row_title);
            title.setText(getItem(position).tag);

            return convertView;
        }

    }
} 
```

list.xml 为空白 activity_main.xml 如下：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:paddingBottom="@dimen/activity_vertical_margin"
            android:paddingLeft="@dimen/activity_horizontal_margin"
            android:paddingRight="@dimen/activity_horizontal_margin"
            android:paddingTop="@dimen/activity_vertical_margin"
            tools:context=".MainActivity" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="@string/hello_world" />

        </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:36:11.153

您当前的代码存在许多问题。我建议您查看滑动菜单 ( `SlidingFragmentActivity`, `SlidingListActivity`) 示例中给出的示例
您不能同时运行两个活动。滑动菜单在后面，但它由前面的活动管理。您正在寻找的是一个片段。

更新：
[Activity](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/LeftAndRightActivity.java)，[ListFragment](https://github.com/jfeinstein10/SlidingMenu/blob/master/example/src/com/slidingmenu/example/SampleListFragment.java)示例可能会有所帮助。
基本上你需要的是

```
// set the content view
        setBehindContentView(R.layout.fragment_menu); 
```

应该是空白布局。然后是重要的部分：

```
return inflater.inflate(R.layout.list, null); 
```

如果您执行 super.onCreateView() ，它将像您现在所拥有的那样什么都不做或崩溃。我强烈建议您查看链接中的两个示例。

# c# - 不存在的模糊参考

> ID：16112789
> 
> 赞同：6
> 
> 时间：2013-04-19T20:12:58.310
> 
> 标签：c#, visual-studio-2010, visual-studio

在 Visual Studio 2010 项目中，我们在两个不同的命名空间中有两个同名的类，它们通常都包含在整个应用程序的 ViewModel 中。一个这样的类已经被弃用和删除，但是当我直接引用剩余的类时，我得到了一个模棱两可的引用错误，即使旧类不再存在。

我们基本上有这样的东西：

```
using OurNamespace.UI.Common;
using OurNamespace.SomewhereElse;

// *snip*
SomeClass.SomeMethod(); 
```

曾几何时，上述两个命名空间都有一个 SomeClass，但我们在 OurNamespace.UI.Common 中删除了一个。但是，在构建时，我们收到以下错误：

> 'SomeClass' 是 'OurNamespace.UI.Common.SomeClass' 和 'OurNameSpace.SomewhereElse.SomeClass' 之间的模糊引用

我已经尝试按照[这个模棱两可的参考问题](https://stackoverflow.com/questions/5325841/ambiguous-reference)的答案中的建议清理解决方案并重建，只是为了继续看到错误。仍然潜伏着什么使它认为删除的类仍然存在以用于模棱两可的引用？甚至 IntelliSense 也知道现在只有一个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-20T15:36:50.713

如果您查看项目的引用（通过窗口`References`部分`Solution Explorer`），您可以右键单击引用并选择`View in Object Browser`.

这使您可以调查引用的程序集，以查看违规类是否仍潜伏在其中任何一个中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:22:22.703

> 仍然有对旧类曾经所在的命名空间的引用（因为它还有其他东西在使用）

我认为您的问题在于对用于包含已删除类的 dll 的引用。

只需删除引用并重新添加它。它应该可以解决问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-16T22:47:26.310

超级老线程，但是在 VS2017 中我发生了这种情况，并且在我在命名空间之间移动文件后必须**重新启动 VS**才能修复它。

# ios - 在 TabBarController 和 ViewController 之间切换的最佳方法

> ID：16112791
> 
> 赞同：1
> 
> 时间：2013-04-19T20:13:15.343
> 
> 标签：ios, objective-c, uiviewcontroller, uitabbarcontroller

我一直在尝试一个带有初始登录屏幕的应用程序，然后进入`TabBarController`.
我想知道执行此操作的最佳方法是什么，任何示例代码都将不胜感激。我已经尝试过了，但我无法从 切换`ViewController`到`TabController`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:42:53.157

假设您的根视图控制器也是您的登录视图。

现在从您的根视图控制器中，您可以通过多种方式呈现标签栏控制器。一种方法是只`presentViewController`从根视图控制器调用该方法。

### 设置

在根视图控制器中，有时在显示标签栏之前，设置它：

```
myTabBarViewController = [[MyTabBarViewController alloc] init];
[myTabBarViewController setModalPresentationStyle:UIModalPresentationFullScreen];
[myTabBarViewController setModalTransitionStyle:UIModalTransitionStyleFlipHorizontal];
[myTabBarViewController setRootTabBarDelegate:self]; 
```

### 介绍

当您准备好展示时，只需调用以下代码：

```
[self presentViewController:myTabBarViewController animated:YES completion:nil]; 
```

### 笔记

视图控制器层次结构如下所示：

```
AppDelegate
  L RootViewController
      L MyTabBarController 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:59:44.130

我不确定这是不是最好的方法，但它又快又脏并且有效。`applicationDidFinishLaunchineWithOptions:`在您的方法中显示一个模态视图控制器。你应该用`@selector`更适合你想做的事情来替换。背景颜色仅用于效果。

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UIViewController *viewController1 = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    UIViewController *viewController2 = [[SecondViewController alloc] initWithNibName:@"SecondViewController" bundle:nil];
    self.tabBarController = [[UITabBarController alloc] init];
    self.tabBarController.viewControllers = @[viewController1, viewController2];
    self.window.rootViewController = self.tabBarController;

    [self.window makeKeyAndVisible];

    // ***** The relevant code *****
    UIViewController *viewController = [[UIViewController alloc] init];
    UINavigationController *navigationController = [[UINavigationController alloc] initWithRootViewController:viewController];
    [[viewController view] setBackgroundColor:[UIColor redColor]];
    UIButton *dismissButton = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [dismissButton setFrame:CGRectMake(10, 10, 300, 44)];
    [dismissButton setTitle:@"Dismiss" forState:UIControlStateNormal];
    [dismissButton addTarget:[self tabBarController] action:@selector(dismissModalViewControllerAnimated:) forControlEvents:UIControlEventTouchUpInside];
    [[viewController view] addSubview:dismissButton];
    [[self tabBarController] presentViewController:navigationController animated:NO completion:nil];

    return YES;
} 
```

我通常不喜欢将这种代码放在应用程序委托中，但如果它是一次性的东西，比如登录详细信息，也许没关系。

![在此处输入图像描述](https://i.stack.imgur.com/mmt9e.png)

# c# - TreeViewItem 在悬停时通知 ViewModel

> ID：16112793
> 
> 赞同：1
> 
> 时间：2013-04-19T20:13:18.667
> 
> 标签：c#, wpf, treeviewitem

我目前正在使用[这篇](http://blogs.msdn.com/b/mikehillberg/archive/2006/09/21/mytreeviewhelperismousedirectlyoveritem.aspx)博文中的代码，以便让我的 TreeView 突出显示当前被鼠标悬停的那些项目。这按预期工作，但是现在我希望 TreeViewItems 在悬停/未悬停时通知其附加的 ViewModel。

但是，我不知道如何实现这一目标。对应的 XAML 代码如下所示：

```
<Style TargetType="{x:Type TreeViewItem}">
    <Style.Triggers>
        <Trigger Property="Controls:TreeViewHelper.IsMouseDirectlyOverItem" Value="True">
            <Setter Property="Background" Value="Green" />
        </Trigger>
    </Stile.Triggers>
</Style> 
```

如何将我的 ViewModel 中名为 TreeNodeModel.IsHovered 的属性绑定到 TreeViewItem（或者可能是附加的依赖属性 IsMouseDirectlyOverItem），以便我可以在我的代码中对这些更改做出反应？

我通过谷歌找到的所有示例仅说明了如何设置背景颜色。提前感谢您在可能微不足道的答案上的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:05:47.537

在您的`Style`中，尝试添加`Setter`绑定`IsMouseDirectlyOverItem`到 的`IsHovered`，并使用`OneWayToSource`绑定模式以正确的方式推送值：

```
<Style TargetType="{x:Type TreeViewItem}">
    <Setter Property="Controls:TreeViewHelper.IsMouseDirectlyOverItem"
            Value="{Binding Path=IsHovered, Mode=OneWayToSource}" />

    <Style.Triggers>
        ...
</Style> 
```

**编辑：**由于`IsMouseDirectlyOver`是只读的，只读 DP 不能成为任何绑定的目标，Fredrik Hedblad`PushBinding`可能是一种可能的解决方法：[OneWayToSource Binding for ReadOnly Dependency Property](http://meleak.wordpress.com/2011/08/28/onewaytosource-binding-for-readonly-dependency-property/)

```
<Style TargetType="{x:Type TreeViewItem}">
    <Setter Property="pb:PushBindingManager.StylePushBindings">
        <Setter.Value>
            <pb:PushBindingCollection>
                <pb:PushBinding TargetDependencyProperty="Controls:TreeViewHelper.IsMouseDirectlyOverItem" 
                                Path="IsHovered" />
            </pb:PushBindingCollection>
        </Setter.Value>
    </Setter>

    <Style.Triggers>
        ...
</Style> 
```

# javascript - javascript循环中的jQuery函数

> ID：16112797
> 
> 赞同：0
> 
> 时间：2013-04-19T20:13:36.467
> 
> 标签：javascript, jquery, event-handling, jeditable

我得到了一些我正在使用“jeditable”编辑的 DIV，效果很好！现在我想给我的用户一个提醒，询问他们是否真的想编辑这篇文章。

```
<script type="text/javascript" src="jquery-1.9.1.js"></script>
<script type="text/javascript" src="jquery.jeditable.js"></script>
<script type="text/javascript">

$(document).ready(function jeditable() {

    $("div[title='Article']").click (function() {
        var Edit;
        Edit = confirm("Editing article?");

        if (Edit == true) {         
                $('.edit').editable('x2.php', {
                    cancel : 'Cancel',
                    submit : 'OK',
                    onblur: 'ignore',
                    });          
            } else {
                alert("Canceling edit..");
            }
     });      
});
</script> 
```

1）当警报弹出并且我取消它时，什么也没有发生（有意）。

2）当我在警报中单击“确定”时，也没有任何反应。

3）当我单击“确定”一次时，无论我在警报中再次单击“确定”还是“取消”，我的“如果”中的功能都会起作用。

我只想在用户单击“确定”一次后使我的文本可编辑。（稍后我想让一个图像而不是文本本身可点击，但因为这会引发同样的错误，我尝试先用这种方式解决）

请帮我。提前致谢

问题依然存在！我更改为不让文章本身可点击“确认”，而是一些 img。这样，即使使用另一个元素，它也能完美运行，因此触发确认以使“.edit”可编辑。找到了解决方法，但仍然会对其他方式的解决方案感兴趣:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:24:50.917

I looked at the jeditable library , therefore here is what I would do to achieve your requirement

```
$(document).ready(function()
    $("div[title='Article']").click (function() {
        if (confirm("Editing article?")) {         
                $('.edit').editable('x2.php', {
                    cancel : 'Cancel',
                    submit : 'OK',
                    onblur: 'ignore',
                });         
         }       
    });     
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:22:00.697

if 之后你不需要 "$(document).ready(function"

```
 $(document).ready(function jeditable() {
    $("div[title='Article']").click (function() {
        var Edit;
        Edit = confirm("Editing article?");

        if (Edit == true) {         
            $('.edit').editable('x2.php', {
                cancel : 'Cancel',
                submit : 'OK',
                onblur: 'ignore',
            }); 
        } else {
            alert("Canceling edit..");
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:19:07.177

```
$(document).ready(function jeditable() {

    $("div[title='Article']").click (function() {
        var Edit;
        Edit = confirm("Editing article?");

        if (Edit == true) {         
            $('.edit').editable('x2.php', {
                cancel : 'Cancel',
                submit : 'OK',
                onblur: 'ignore',
                });      
        } else {
            alert("Canceling edit..");
        }        
    });  //<<< this was closing out the function BEFORE the else.
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T20:19:53.830

看起来您在 else 子句结束后缺少一个“}”。如果您查看浏览器中的错误控制台，我认为您将收到一个错误指示。

```
 if (Edit == true) {         
        $(document).ready(function () {
            $('.edit').editable('x2.php', {
                cancel : 'Cancel',
                submit : 'OK',
                onblur: 'ignore',
                });         
            }); 
        } else {
            alert("Canceling edit..");
        }
     } // <-- add this in
 }); 
```

# javascript - jquery显示项目列表

> ID：16112801
> 
> 赞同：2
> 
> 时间：2013-04-19T20:14:00.003
> 
> 标签：javascript, jquery, html

嗨，我想在里面显示一个项目列表

示例 html 代码

```
<h3 id="game-filter" class="gamesection">
           <span>Game</span></h3>
        <div id="game-filter-div" style="padding: 0;">
            <ul id="gamelist">
            </ul>
        </div> 
```

代码

```
var games = new Array();
    games[0] = "World of Warcraft";
    games[1] = "Lord of the Rings Online";
    games[2] = "Aion";
    games[3] = "Eve Online";
    games[4] = "Final Fantasy XI";
    games[5] = "City of Heros";
    games[6] = "Champions Online";
    games[7] = "Dark Age of Camelot";
    games[8] = "Warhammer Online";
    games[9] = "Age of Conan";
    function pageLoaded(){
        var list = "";

            for(i=0; i<games.length; i++){
        list ="<li>"+games[i]+"</li>";
        $("#gamelist").append(list);
        //document.getElementById("gamelist").innerHTML=list;
        list = "";
        }

} 
```

似乎我的js代码有问题。它不输出任何东西

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-19T20:20:04.383

你做错了很多事情。

首先，它不是纯 javascript，它的 jquery。

您需要参考[jQuery api](http://jquery.com/download/)才能使用 jQuery。

但是，您也可以通过纯 javascript 实现您想要的。

现在让我们看看你的错误

1.  您已经创建了一个函数`pageLoaded`，但没有在任何地方调用它。您需要调用一个函数才能使其逻辑正常工作。我假设你想`pageLoaded`在页面准备好时调用你的方法。您可以在身体负载时调用它，也可以简单地在 jQuery 的.ready [中](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)`$(document).ready(function(){ pageLoaded()});`调用它。这种方法只是确保当 dom 准备好时执行你的逻辑

2.  您在方法“数组中的项目”中编写了非关键字、无意义的单词。删除它以使您的功能正常工作。我假设你想在那里发表评论，在脚本标签中放这样的评论：

    ```
     //items in the array 
    ```

3.  您没有将新值连接到`list`变量，而是在每次迭代时覆盖其内容，所以不要这样做，而是`list ="<li>"+games[i]+"</li>";`这样做

    ```
     list +="<li>"+games[i]+"</li>"; 
    ```

4.  最后，您将 to 附加`list`到`#gamelist`for 循环内。在循环外执行。一旦你的清单完成。并删除该行`list=" "` ，以便将此行 `$("#gamelist").append(list);`放在 for 循环之外。

尝试这样的功能：

```
var games = new Array();
    games[0] = "World of Warcraft";
    games[1] = "Lord of the Rings Online";
    games[2] = "Aion";
    games[3] = "Eve Online";
    games[4] = "Final Fantasy XI";
    games[5] = "City of Heros";
    games[6] = "Champions Online";
    games[7] = "Dark Age of Camelot";
    games[8] = "Warhammer Online";
    games[9] = "Age of Conan";
$(document).ready(function(){
        var list = "";
        for(i=0; i<games.length; i++){
        list +="<li>"+games[i]+"</li>";
        }
    $("#gamelist").append(list);

}); 
```

看到这个[小提琴](http://jsfiddle.net/bkD6F/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T20:24:01.290

在[jsfiddle 上](http://jsfiddle.net/Xotic750/F9ACq/)

```
<h3 id="game-filter" class="gamesection"><span>Game</span></h3>

<div id="game-filter-div" style="padding: 0;">
    <ul id="gamelist"></ul>
</div>

var games = ["World of Warcraft", "Lord of the Rings Online", "Aion", "Eve Online", "Final Fantasy XI", "City of Heros", "Champions Online", "Dark Age of Camelot", "Warhammer Online", "Age of Conan"];

var gamelist = document.getElementById("gamelist");

games.forEach(function (game) {
    var li = document.createElement("li");

    li.textContent = game;
    gamelist.appendChild(li);
}); 
```

这是纯 Javascript，但我看到您将标签更改为 jQuery，但我将把它留在这里。

此外，如果您不想创建初始化的数组，就像我在上面所做的那样，您可以这样做，因为这`new Array()`被认为是不好的做法。

```
var games = new Array();

games.push("World of Warcraft");
games.push("Lord of the Rings Online");
games.push("Aion");
games.push("Eve Online");
games.push("Final Fantasy XI");
games.push("City of Heros");
games.push("Champions Online");
games.push("Dark Age of Camelot");
games.push("Warhammer Online");
games.push("Age of Conan"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:23:20.373

您需要在动态添加元素后刷新列表视图；否则不会更新。

```
 $("#gamelist").append(list).listview("refresh"); 
```

# java - 解析整数错误

> ID：16112804
> 
> 赞同：1
> 
> 时间：2013-04-19T20:14:13.347
> 
> 标签：java, string, parseint

出于某种原因，我无法将字符串数值转换为整数，我得到的错误是运行：

```
Exception in thread "main" java.lang.NumberFormatException: For input string: "6327818260"
    at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
    at java.lang.Integer.parseInt(Integer.java:495)
    at java.lang.Integer.parseInt(Integer.java:527)
    at MyDirectory.getsize(MyDirectory.java:18)
    at a19010.main(a19010.java:79) 
```

Java 结果：1

如果我的输入字符串是“6327818260”为什么不能变成整数？我的代码是

```
public String getsize()
{
  int intSize = Integer.parseInt(mySize);
  int count = 0;
  String dataType = "";
  while (intSize > 1000)
  {   
   intSize = intSize / 1000;
   count++;
  } 
  switch (count)
  {
    case 0:
    dataType = "Bytes";
    break;
    case 1:
    dataType = "KB";
    break;
    case 2:
    dataType = "MB";
    break;
    case 3:
    dataType = "GB";
    break;
    case 4:
    dataType = "KB";
    break;    
  }   
    return intSize + dataType ;
} 
```

mySize 取自从此处的文本文件中获取的字符串的一部分

```
 public class MyDirectory 
{
  String myName = "" ;
  String myNum = "";
  String mySize = "";
    public MyDirectory(String line)

  {
    line = line.trim();  
    String[] lineParts = line.split(" ");
     mySize = lineParts[0];
     myNum = lineParts[1];
     myName = lineParts[3];
  } 
```

im 拆分的行看起来像 6327818260 6486 SUB-TOTAL: E:\WIS26\LCORRES

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T20:16:28.710

可能的最大整数 `2147483647` 比您尝试解析的值小很多： `6327818260`

您将需要使用 long 或 BigInteger/BigDecimal 来保存该值。

对于 BigInteger/BigDecimal 表示以 10 为基数的整数的字符串可以由采用字符串参数的构造函数解析。

```
BigDecimal bigDecimal = new BigDecimal("6327818260"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:17:38.110

```
6327818260 is greater than the Integer.MAX_VALUE `2147483647` 
```

您可以尝试将字符串解析为`Long`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:16:48.857

如果它是一个 32 位整数，您希望将其打包，那么它太大了。

# php - 无法从 php 中的数据库中正确检索数据

> ID：16112805
> 
> 赞同：1
> 
> 时间：2013-04-19T20:14:42.300
> 
> 标签：php

我在 tblStudentDetails 中有两个条目具有 RollNo = 0 和 1 但是每当我尝试从数据库中检索数据时，我总是得到第一条记录，即 RollNo = 0 这是我的代码：

```
<?php

    unset($_SESSION['RollNo']);
    unset($_SESSION['StudentName']);
    unset($_SESSION['Course']);

    include_once 'Includes/DBConnection.php';

    //echo $_POST['txtRollNo'];

    if ($_POST['btnSubmit'] == 'Submit')
        {
           if ($_POST['txtRollNo'] != '')
               {
                   $query = "SELECT StudentName, Course FROM tblStudentDetails WHERE RollNo = '$_POST[txtRollNo]'";
                   $result = mysql_query($query);

                   $rowCount = mysql_num_rows($result);

                   if ($rowCount == 0)
                       { 
                           echo "You have entered an incorrect roll No";
                           //header ('Location: index.php');
                       }
                   else
                       {
                           while ($row = mysql_fetch_assoc($result))
                               {
                                   $StudentName = $row['StudentName'];
                                   $Course = $row['Course'];
                               }

                           $_SESSION['RollNo'] = $_POST['txtRollNo'];
                           $_SESSION['StudentName'] = $StudentName;
                           $_SESSION['Course'] = $Course;

                           header ('Location: SelectedUserDetails.php');
                       }
               }
           else
               {
                    echo "Please Enter Your Roll No.";
                    //header ('Location: index.php');
               }
        }
?>

<html>
    <head>
        <title>Online Exam</title>
        <STYLE TYPE = "Text/CSS">
            H1
                {
                    Color : DodgerBlue;
                    Text-Align : Center
                }
            HR
                {
                    Color : DodgerBlue
                }
            LABEL
                {
                    Vertical-Align : Bottom;
                    Font-Size : 20
                }
            TR
                {
                    Height : 30;
                    Background : White;
                    Color : Black;
                    Font-Size : 20
                }
        </STYLE>
   </head>

    <BODY BGCOLOR = "BLACK" TEXT = "WHITE">
        <CENTER>
            <TABLE ALIGN = "CENTER">
                <TR>
                    <?php include 'Includes/header.html'; ?>
                </TR>
                <TR>
                    <TD>
                        <TABLE>
                            <TR>
                                <FORM NAME = "frmMain" METHOD = "POST" ACTION = "<?php echo $PHP_SELF ?>" enctype = "multipart/form-data">
                                    <TD>
                                        Enter your roll no. : 
                                    </TD>
                                    <TD>
                                        <INPUT TYPE = "TEXT" NAME = "txtRollNo" />
                                    </TD>
                                    <TD>
                                        <INPUT TYPE = "SUBMIT" NAME = "btnSubmit" VALUE = "Submit" />
                                    </TD>
                                </FORM>
                            </TR>
                        </TABLE>
                    </TD>
                </TR>
            </TABLE>        
        </CENTER>
    </BODY>
</html> 
```

在 SelectedUserPage 我试图检查的值，`$_SESSION['RollNo']`但它始终为空。谁能说出上面代码中的问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:16:33.103

您尚未使用[session_start()](http://php.net/manual/en/function.session-start.php)开始会话。

# angularjs - Angular：从指令访问 ngResources

> ID：16112811
> 
> 赞同：0
> 
> 时间：2013-04-19T20:15:04.970
> 
> 标签：angularjs

我想从指令中访问一些 ngResources 这可能吗？

基本上我的指令 $scope 有一个通过 id 指向其他对象的对象，这些其他对象可以通过现有的 ngResource 填充。我想加载它们以正确渲染它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:23:40.413

您可以将 $resource 或您自己的基于 $resource 的服务传递给指令。

```
.directive('myDirective', function($resource, MyService) {

}); 
```

# python - 有什么方法可以远程发出 telnet 命令和双 telnet 会话？

> ID：16112812
> 
> 赞同：-4
> 
> 时间：2013-04-19T20:15:11.663
> 
> 标签：python, linux, telnet

我需要什么：

```
telnet 1.1.1.1 (no password or login required)
#connected
telnet localhost 1234
command_1
command_2
command_3
exit
exit 
```

有什么办法可以在 bash 或 python 上编写它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:24:21.053

You can pass input to telnet using a pipe. At your shell:

```
$ echo "echo -e 'command_1\ncommand_2\ncommand_3' | telnet localhost 1234" | telnet 1.1.1.1 
```

# sql-server - SQL Server 2012 时间范围检查？

> ID：16112813
> 
> 赞同：0
> 
> 时间：2013-04-19T20:15:26.923
> 
> 标签：sql-server, datetime, time

在 MSSQL 2012 上使用纯 TSQL 确定当前时间是否在本小时的第 59 分钟和下一小时的第一分钟之间的智能方法是什么？

我不想从“现在”截断时间，我想截断日期，只做一个时间计算。

这让我有点接近：[Datepart for time between (而不是 Convert date)](https://stackoverflow.com/questions/8575519/datepart-for-time-between-instead-of-convert-date)但不完全是因为我需要根据当前时间而不是表值进行计算。

以下可能有助于说明服务器当前是否处于“糟糕时间”并且应该返回值“1”

```
14:58:59 ,  Should not be considered in the "bad time"
14:59:00 ,  Should be considered in the "bad time"
14:59:04 ,  Should be considered in the "bad time"
14:59:57 ,  Should be considered in the "bad time"
15:00:02 ,  Should be considered in the "bad time"
15:01:26 ,  Should not be considered in the "bad time"
15:02:00 ,  Should not be considered in the "bad time"
15:02:01 ,  Should not be considered in the "bad time" 
```

谢谢。

编辑：

这段代码有效，但我相信这可以更有效地完成。欢迎所有建议。再次感谢。

```
declare @now time = ( select cast( sysutcdatetime() as time  ))
declare @floor time = ( select dateadd( minute , 59 , ( dateadd(hour,datediff(hour,0,@now),0) ) ) )
declare @ceiling time =(  select dateadd( minute , 2 , @floor ) )
if ( @now > @floor and @now < @ceiling )
begin
    select 1 as bit
end
select @now , @floor , @ceiling 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:16:17.040

```
IF DATEPART(MINUTE, SYSDATETIME()) = 59
    PRINT '59th minute'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T21:37:57.167

分钟（@dt）=59 或分钟（@dt）=0

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T21:16:54.497

请根据需要更换`@dt`：

```
declare @dt datetime = '20130419 21:59:01'

select case when datepart(minute, @dt) in (59,0)
            then 'Minute is between 59 and 1'
            else 'Minute is NOT between 59 and 1'
       end myMinute 
```

# google-analytics - 混淆了 Google 的 Universal Analytics 和 Async Analytics。我们应该同时使用两者吗？

> ID：16112815
> 
> 赞同：3
> 
> 时间：2013-04-19T20:15:31.197
> 
> 标签：google-analytics

第一次设置谷歌分析后，我去管理>跟踪代码：显然这是给我的通用分析。

```
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('send', 'pageview');

</script> 
```

我找不到我的异步跟踪代码（看起来像这样）：

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXX-X']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

1.  我应该只用一个吗？
2.  他们俩以前都去`</head>`吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T01:35:52.100

由于 Universal 处于测试阶段，我将继续在您的主要网络资产上使用 ga.js 跟踪器。如果您想试用 Universal 的新功能（例如自定义维度/指标），您可以专门为其创建一个新属性。

此外，为了简化部署，请尝试使用 Google Tag Manager。

# variables - 如何在 AppleScript 中使用变量（从 Automator 中调用）

> ID：16112816
> 
> 赞同：3
> 
> 时间：2013-04-19T20:15:31.457
> 
> 标签：variables, applescript, automator

而不是`"asdf"`，我想在`input`这里使用变量。

似乎这应该很容易，但由于某种原因我无法弄清楚。

```
on run {input, parameters}
-- Type 'asdf'
delay 1.900231
set timeoutSeconds to 2.0
set uiScript to "keystroke \"asdf\""
my doWithTimeout(uiScript, timeoutSeconds)
return input
end run

on doWithTimeout(uiScript, timeoutSeconds)
set endDate to (current date) + timeoutSeconds
repeat
    try
        run script "tell application \"System Events\"
" & uiScript & "
end tell"
    exit repeat
    on error errorMessage
        if ((current date) > endDate) then
            error "Can not " & uiScript
        end if
    end try
end repeat
end doWithTimeout 
```

例如，如果我尝试`set uiScript to "keystroke input"`，我会从 Automator 收到错误：

```
The action “Run AppleScript” encountered an error.
Check the actionʼs properties and try running the workflow again. 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:20:52.187

我自己想通了。我现在觉得很笨。

`set uiScript to "keystroke \"" & input & "\""`

# sql-server - 将 SQL Server 数据库从一台服务器移动到另一台服务器

> ID：16112817
> 
> 赞同：-2
> 
> 时间：2013-04-19T20:15:33.313
> 
> 标签：sql-server

我们在 SQL Server 2008 中使用多台服务器。我们希望将数据库从一台服务器移动到另一台服务器。我们做了以下过程

```
//   #1
detach database on first server

//   #2
physically copy database and log file to new server

//   #3
attach database on new server 
```

我们的方法不起作用，最后一步在新服务器上失败

如下所示的错误消息

> 处理数据库“DBTEST”的日志时发生 BB 错误
> 如果可能，从备份中恢复。如果备份不可用，则可能需要重建日志。
> 无法打开新数据库“DBTEST”。CREATE DATABASE 中止

使用当前文件恢复的任何更改，因为我现在可以再次获取这些文件/获取数据库文件的备份版本？我不知道如何重建日志文件？我什至不能附上它们:-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:41:35.543

我认为您应该遵循错误消息的建议：

```
If possible, restore from backup. 
```

与其分离、复制、重新连接，为什么不直接运行备份并将其恢复到新机器上呢？

从来没有让我失望过，我已经使用这种方法移动了 100 个数据库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:26:34.693

鉴于您遇到此错误，我建议您尝试将文件附加回原始服务器，看看是否有任何错误。如果复制的版本无法附加，那么它们可能已以某种方式损坏。如果您的源服务器上仍有文件的原始版本，请尝试再次附加它们以查看是否出现此错误。如果您没有收到错误，则可以重新复制文件并重试。如果您遇到错误，那么您唯一的选择是从备份中恢复。

只要目标 SQL Server 的版本大于或等于源 SQL Server，通过分离和附加方法在服务器之间移动数据库应该可以工作。尽管错误并不表明是这种情况，但您可能希望验证您拥有正确的版本。

# javascript - 在javascript中将url作为参数传递不是调用函数

> ID：16112818
> 
> 赞同：0
> 
> 时间：2013-04-19T20:15:35.317
> 
> 标签：javascript

```
<a href="javascript:void();" onclick="openWindow(2,1,4326,http://www.../images/icon_tree1.gif);">Edit Asset Info</a> 
```

未调用函数 openWindow，我在控制台上看到以下错误

`Uncaught SyntaxError: Unexpected token :`和

`Uncaught SyntaxError: Unexpected token )`

这是我正在使用的实际代码

```
return "<a href='javascript:void();' onclick='openWindow(" 2 "," + 1 + "," + 4326 + "," + symbolurl + ");'>Edit Asset Info</a>"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:16:25.180

URL 地址是一个字符串，所以你应该用引号括起来：

```
... onclick="openWindow(2,1,4326,'http://www.../images/icon_tree1.gif');" ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:41:39.423

您需要将一个字符串传递给 onclick 处理程序`onclick="openWindow(1, 2, 3, 'http://...')"` 其他一些评论：
1，如果您的锚实际上没有将用户带到任何地方，请考虑不要使用`<a>`而不是`href="javascript:void();"`
2，尽量不要将 javascript 与 html 混合使用。因此，将您的事件处理程序链接到`<script>`标签中的 DOM 元素。

# mysql - MySQL：优化查询以进行评分计算

> ID：16112820
> 
> 赞同：2
> 
> 时间：2013-04-19T20:15:51.257
> 
> 标签：mysql, optimization

我有一个用来做一些计算的数据表。计算后的结果数据集如下所示：

```
+------------+-----------+------+----------+
| id_process | id_region | type | result   |
+------------+-----------+------+----------+
|          1 |         4 |    1 |  65.2174 |
|          1 |         5 |    1 |  78.7419 |
|          1 |         6 |    1 |  95.2308 |
|          1 |         4 |    1 |  25.0000 |
|          1 |         7 |    1 | 100.0000 |
+------------+-----------+------+----------+ 
```

另一方面，我有另一个表，其中包含一组用于对计算结果进行分类的范围。范围表如下所示：

```
 +----------+--------------+---------+
 | id_level | start |  end |  status |
 +----------+--------------+---------+
 |        1 |   0   |   75 |  Danger |
 |        2 |  76   |   90 |  Alert  |
 |        3 |  91   |  100 |  Good   |
 +----------+--------------+---------+ 
```

我需要做一个查询，在计算时将相应的“状态”列添加到每个值。目前，我可以将以下字段添加到计算查询中：

```
select
   ...,
   ...,
   [math formula] as result,
(select status 
   from ranges r
   where result between r.start and r.end) status
from ...
where ... 
```

它工作正常。但是当我有很多行（超过200K）时，计算查询变得很慢。

我的问题是：有一些方法可以在不执行子查询的情况下找到“状态”值？

有人以前做过类似的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:23:37.703

是的，您正在寻找子查询并加入：

```
select s.*, r.status
from (select s.*
      from <your query here>
     ) s left outer join
     ranges r
     on s.result between r.start and r.end 
```

显式`join`s 通常比嵌套 s 优化得更好`select`。但是，在这种情况下，`ranges`表看起来很小，所以这可能不是性能问题。

# iphone - MonoTouch CoolStorage OneToMany 缓存问题

> ID：16112821
> 
> 赞同：3
> 
> 时间：2013-04-19T20:16:08.210
> 
> 标签：iphone, ios, sqlite, xamarin.ios, coolstorage

我遇到了 CoolStorage 的问题，其中在第一次读取列表时缓存了 OneToMany 关系，然后当数据稍后更改时，该列表无法更新。

重新启动我的应用程序时，列表是正确的，所以它一定是一个缓存问题，我在 CoolStorage 文档或任何地方都找不到解决方案。

我在下面粘贴了我的单元测试代码。

我有一个具有 Person 类型的 Opponent 的 Game 类。有很多游戏，一个人可以是很多游戏的对手。

我的 Person 类有一个`CSList`名为 OpponentGames，所以在任何时候我都可以对那个人说“获取这个人是对手的游戏”。

在单元测试中我第一次引用“person.OpponentGames.Count”时，它正确地告诉我有一个游戏。创建第二个游戏并将我的人添加为对手后，它仍然会为 OpponentGames 报告一场游戏。

如果我删除第一个计数，则测试通过，因此第一个检查结果将被缓存，并且不会从那里更新。

我将不胜感激任何建议！谢谢。

`SQL (sqlite3)`设置：

```
CSDatabase.ExecuteNonQuery(
    "CREATE TABLE Person " +
    "(ServerId INTEGER PRIMARY KEY)");

CSDatabase.ExecuteNonQuery(
    "CREATE TABLE Game " +
    "(ServerId INTEGER PRIMARY KEY," +
    "OpponentId INTEGER REFERENCES User(ServerId))"); 
```

CoolStorage .Net 类：

```
[MapTo("Game")]
public class Game : CSObject<Game,int>
{
    //[PrimaryKey]
    public int ServerId { get { return (int) GetField("ServerId"); } set { SetField("ServerId", value); } }

    [ManyToOne (LocalKey="OpponentId", ForeignKey="ServerId")]
    public Person Opponent { get { return (Person) GetField("Opponent"); } set { SetField("Opponent", value); } }
}

[MapTo("Person")]
public class Person : CSObject<Person,int>
{
    //[PrimaryKey]
    public int ServerId { get { return (int) GetField("ServerId"); } set { SetField("ServerId", value); } }

    [OneToMany (LocalKey="ServerId", ForeignKey="OpponentId")]
    public CSList<Game> OpponentGames { get { return (CSList<Game>) GetField("OpponentGames"); } }
} 
```

最后，单元测试：

```
// user

Person person = Person.New ();
person.ServerId = 1;

// first game

Game game = Game.New ();
game.ServerId = 1;
game.Opponent = person;

game.Save ();
person.Save ();

// this line correctly returns 1, removing this passes the test

Console.WriteLine ("count0: " + person.OpponentGames.Count);

// second game

Game game2 = Game.New ();

game2.ServerId = 2;
game2.Opponent = person;

game2.Save ();
person.Save ();

// this incorrectly shows 1, should be 2

Console.WriteLine ("count1: " + person.OpponentGames.Count);

// and it fails

Assert.True (person.OpponentGames.Count == 2); 
```

# javascript - Raphael 中多条路径的相同悬停功能

> ID：16112830
> 
> 赞同：6
> 
> 时间：2013-04-19T20:16:34.523
> 
> 标签：javascript, jquery, raphael

所以我有我的画布和我的路径：

```
var paper1 = Raphael(10, 50, 960, 560);

var mapShape1 = paper1.path("M339.098,175.503c0,0-55.555,58.823-16.34,75.163s227.451,49.02,227.451,49.02s67.321-25.49,47.713-50.98s-71.896-78.432-71.896-78.432L339.098,175.503z");
var mapShape2 = paper1.path("M548.902,306.876c0,0-209.15-32.026-228.758-46.405s-27.451-27.451-20.262-42.484s26.797-44.444,26.797-44.444l-41.83-86.928l-76.471,77.125c0,0-25.49,169.935,48.366,171.242s292.157-4.575,292.157-4.575V306.876z");
var mapShape3 = paper1.path("M296.614,86.614l38.562,83.66l194.771-7.843l75.817,81.7c0,0,130.066-84.967,73.203-118.301S503.15,48.706,463.935,51.974S296.614,86.614,296.614,86.614z"); 
```

我的样式是这样的：（我相信这可以改进，有没有办法一次完成所有路径？？？）

```
function style1(shape){
  shape.attr({
            "fill": "#33CCFF",
            "stroke": "000000",
            "stroke-width": "5"
        });
}

style1(mapShape1);
style1(mapShape2);
style1(mapShape3); 
```

但我的问题是如何在所有路径上使用一个悬停功能，我有这个：

```
 mapShape1.hover(
    function(){
      this.animate({
        "fill": "#FF3300"
      }, 500);
    },
    function(){
      this.animate({
        "fill": "#33CCFF"
      }, 500)
    }
   ); 
```

但它一次只适用于一种形状，我想做

```
$(mapShape1, mapShape2, mapShape3).hover(... 
```

但这不起作用。我错过了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-22T07:22:16.463

正如 lib3d 所说，您应该使用[Set](http://raphaeljs.com/reference.html#Paper.set)。然而，不是使用`forEach`循环集合内容并应用属性/功能，而是可以将共享属性/功能添加到集合本身，这会将其应用于集合的内容。稍后会详细介绍，首先看看如何创建集合。

# 设置处理

有两种方法可以创建集合并向其添加元素：显式和隐式。

## 显式

这意味着您自己管理集合，并自己将元素添加到集合中`

```
var paper, shapeA, shapeB, shapeC, elementSet;

paper = Raphael(10, 50, 960, 560);
elementSet = paper.set();

shapeA = paper.path("M339.098,175.503c0,0-55.555,58.823-16.34,75.163s227.451,49.02,227.451,49.02s67.321-25.49,47.713-50.98s-71.896-78.432-71.896-78.432L339.098,175.503z");
shapeB = paper.path("M548.902,306.876c0,0-209.15-32.026-228.758-46.405s-27.451-27.451-20.262-42.484s26.797-44.444,26.797-44.444l-41.83-86.928l-76.471,77.125c0,0-25.49,169.935,48.366,171.242s292.157-4.575,292.157-4.575V306.876z");
shapeC = paper.path("M296.614,86.614l38.562,83.66l194.771-7.843l75.817,81.7c0,0,130.066-84.967,73.203-118.301S503.15,48.706,463.935,51.974S296.614,86.614,296.614,86.614z");

// now add A and C to the set, as well as a rectangle
elementSet.push(
    shapeA,
    shapeC,
    paper.rect(10, 10, 10, 10, 2)
); 
```

这样你就可以完全控制什么进入集合，什么不进入。

## 隐式

您还可以在绘制元素时标记起点和终点。在起点和终点之间绘制的任何元素都将添加到集合中。

```
var paper, shapA, shapeB, shapeC, elementSet;

paper = Raphael(10, 50, 960, 560);

paper.setStart();

shapeA = paper.path("M339.098,175.503c0,0-55.555,58.823-16.34,75.163s227.451,49.02,227.451,49.02s67.321-25.49,47.713-50.98s-71.896-78.432-71.896-78.432L339.098,175.503z");
shapeB = paper.path("M548.902,306.876c0,0-209.15-32.026-228.758-46.405s-27.451-27.451-20.262-42.484s26.797-44.444,26.797-44.444l-41.83-86.928l-76.471,77.125c0,0-25.49,169.935,48.366,171.242s292.157-4.575,292.157-4.575V306.876z");
shapeC = paper.path("M296.614,86.614l38.562,83.66l194.771-7.843l75.817,81.7c0,0,130.066-84.967,73.203-118.301S503.15,48.706,463.935,51.974S296.614,86.614,296.614,86.614z");

paper.rect(10, 10, 10, 10, 2);

elementSet = paper.setFinish(); 
```

变量 elementSet 现在包含形状 A、B 和 C 以及一个矩形。

## 显式还是隐式？

我个人建议始终使用显式方法。这样你就可以 100% 控制什么进入你的集合，什么不进入。另外，我发现 setStart() 和 setFinish() 是倒着命名的，我们是用“set”“开始”，我们不是“设置”一个“开始”。如果你现在的意图，这可能是显而易见的，但这正是模棱两可的命名的危险——下一个开发人员可能不知道并假设一些不同的东西。

## 更多用途

对于我们创建的应用程序，我们必须绘制、删除、更新和重新定位复杂的元素组。为了实现这一点，我们大量使用了集合。除了集合允许您在集合中的每个元素上应用属性这一事实之外，集合还允许您将其用作 DTO。

例如以下作品：

```
var elementSet = paper.set();

elementSet.push(elemA, elemB, elemC);
elementSet.myApp.someDTO = {
    property: value,
    something: else
}; 
```

为了保持一致性和清晰性，我倾向于将其`myApp`用作命名空间。它的美妙之处在于，即使 someDTO 包含 Raphael 元素，您在集合上应用的任何内容都不会应用于 DTO 中的元素。如果您需要，这使得它可以真正用于传递上下文、坐标等。

# 使用集合

现在回到使用集合的好处。让我们在这里回顾一下您的用例：您想应用属性并将鼠标悬停在任意数量的路径上。

如果我们在上面的显式示例中创建一个集合，我们最终会得到以下结果：

```
var paper, elementSet;
paper = Raphael(10, 50, 960, 560);
elementSet = paper.set();
elementSet.push(
    paper.path("M339.098,175.503c0,0-55.555,58.823-16.34,75.163s227.451,49.02,227.451,49.02s67.321-25.49,47.713-50.98s-71.896-78.432-71.896-78.432L339.098,175.503z"),
    paper.path("M548.902,306.876c0,0-209.15-32.026-228.758-46.405s-27.451-27.451-20.262-42.484s26.797-44.444,26.797-44.444l-41.83-86.928l-76.471,77.125c0,0-25.49,169.935,48.366,171.242s292.157-4.575,292.157-4.575V306.876z"),
    paper.path("M296.614,86.614l38.562,83.66l194.771-7.843l75.817,81.7c0,0,130.066-84.967,73.203-118.301S503.15,48.706,463.935,51.974S296.614,86.614,296.614,86.614z"),
); 
```

现在在集合上应用样式：

```
elementSet.attr({
    fill: '#33CCFF',
    stroke: '#000000',
    'stroke-width': 5
}); 
```

然后添加悬停：

```
elementSet.hover(
    function(){
        this.animate({
            "fill": "#FF3300"
        }, 500);
    },
    function(){
        this.animate({
            "fill": "#33CCFF"
        }, 500)
    }
); 
```

集合也支持链接，就像元素一样：

```
elementSet.push(
    /* elements */
).attr({
    /* attributes */
}).hover(
    /* hover fn's
); 
```

要查看最终结果，这里有[一个小提琴](http://jsfiddle.net/LhJLB/)

## 扩展悬停功能

如果您想将 onhover 高亮应用到所有元素，您可以再次应用 set 上的属性：

```
onMouseOver: function () {
    elementSet.animate({
        fill: '#FF3300'
    }, 500);
};
onMouseOut: function () {
    elementSet.animate({
        fill: '#33CCFF'
    }, 500);
};

elementSet.hover(onMouseOver, onMouseOut); 
```

可以在[此处找到查看此内容的小提琴](http://jsfiddle.net/DfX7j/1/)

# 使用 jQuery

为了能够通过 jQuery 绑定悬停功能，必须访问元素的[节点](http://raphaeljs.com/reference.html#Element.node)。元素本身不是 DOM 节点，而是 Raphael 对象。通过使用`element.node`可以在该节点上使用 jquery 来添加行为。我个人的经验是，这工作得很好，但是你永远不想通过 jquery 修改节点，因为这会导致非常意外的行为。Raphael 提供了您需要的所有功能，不需要使用 jquery。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-22T07:49:21.757

为什么不给你的形状一个类，让 jquery 选择这个类？

您可以执行以下操作：

```
function style1(shape){
  shape.attr({
            "fill": "#33CCFF",
            "stroke": "000000",
            "stroke-width": "5",
            "class": '.js-path-hover'
        });
}

style1(mapShape1);
style1(mapShape2);
style1(mapShape3); 
```

然后您的悬停事件可以设置如下：

```
$('.js-path-hover').on('hover', functionNameHere); 
```

如果 raphael 不允许您将类写入这些 svg 对象，那么您可以使用 D3 将它们全部选中并为它们添加一个类。我发现将 D3、Raphael 和 jQuery 结合起来非常强大。唯一的问题是您需要跟踪它们的每个限制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T07:48:30.723

最短的方法是将您的路径推入一个集合，然后在您的集合上使用 forEach 来设置每个路径的样式。

然后，您将以相同的方式绑定悬停处理程序，首先将处理程序作为闭包变量引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-23T12:25:11.517

```
$(mapShape1, mapShape2, mapShape3).live('hover', function() { }); 
```

Live 应该更好地使用添加到 DOM 悬停的动态元素不适用于之后创建的元素，并且“on”仅适用于指定了第三个参数的创建的 dom 元素。

# r - 通过比较字符串来测试 R 中的警告（最好的主意？）

> ID：16112831
> 
> 赞同：6
> 
> 时间：2013-04-19T20:16:44.467
> 
> 标签：r, warnings

我正在开发一个 R 包，我需要一些帮助来编写 R 测试函数，这些函数旨在检查是否在 C 端代码上抛出了正确的警告，然后在 R 端捕获。让我给你一些关于我正在做什么的背景：

1.  我写的大部分内容都是在 C 端完成的。此外，我在 C 中有一个 if 语句类型的宏，它允许编码器以字符串的形式将警告传递给 R。基本前提是 if(statement_true) pass_warning_to_R("Warning string to pass")。我想做的是通过编写一个使用 tryCatch 块的 R 文件来测试这些警告是否在我期望/需要它们时被抛出。
2.  到目前为止，我已经写了类似的东西：

    ```
    counter <- 0
    tryCatch({

    function_im_testing()

    }, warning = function(war) {
         # Check if warning is as expected and if so increment counter
         if(toString(war)=="The warning I'm expecting/testing for"){
            print(toString(war))
            counter <- counter + 1
         }

    }, error = function(err) {
          print(toString(err))

    }, finally = {
    print("Leaving tryCatch")
    })

    # Stop if the 3 warnings we expected aren't present
    stopifnot(counter == 3) 
    ```

这是我正在使用的方法，到目前为止，我什至无法通过尝试使 toString(war) 和“我期待/测试的警告”相同来执行 if 语句事物。再加上这种方法非常草率且不可靠，这让我相信有更好的方法。那么，有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-20T14:27:35.407

除了实际捕获警告之外，您还需要注意警告消息已被翻译：

```
library(devtools)
with_envvar(c(LANG = "en"), log(-1))
# In log(-1) : NaNs produced
with_envvar(c(LANG = "de"), log(-1))
# In log(-1) : NaNs wurden erzeugt
with_envvar(c(LANG = "fr"), log(-1))
# In log(-1) : production de NaN
with_envvar(c(LANG = "ko"), log(-1))
# In log(-1) : NaN이 생성되었습니다 
```

因此，如果您在测试中执行此操作，请确保设置`LANG`环境变量以确保消息不会因运行它的计算机而异。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T21:33:55.040

通常带有警告，您希望继续进行评估；`tryCatch`用于停止评估。因此，请改为使用`withCallingHandlers`处理程序来执行您想要的警告，然后调用“muffleWarning”重新启动。可以提取错误/警告消息`conditionMessage`

```
counter <- 0L
withCallingHandlers({
    function_im_testing()
}, warning = function(w) {
    if (conditionMessage(w) == "The warning I'm expecting/testing for")
        counter <<- counter + 1L
    invokeRestart("muffleWarning")
}) 
```

由于您正在编写自己的包，因此创建可以以更健壮的方式识别的警告是有意义的，例如，以下返回一个可以在 中使用的条件`warning`，但它有一个可以使用的类“bad_input”在`withCallingHandlers`.

```
bad_input <- function(...) {
    w <- simpleWarning(...)
    class(w) <- c("bad_input", class(w))
    w
} 
```

像这样使用`warning(bad_input("your input is bad"))`并产生输出

```
fun <- function() {
    warning("oops")
    warning(bad_input("your input is bad"))
    "DONE"
} 
```

喜欢

```
>     fun()
[1] "DONE"
Warning messages:
1: In fun() : oops
2: your input is bad 
>     counter <- 0L
>     withCallingHandlers(fun(), bad_input = function(w) {
+         counter <<- counter + 1L
+         invokeRestart("muffleWarning")
+     })
[1] "DONE"
Warning message:
In fun() : oops
> counter
[1] 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-03T01:01:50.417

查看 testthat::expect_warnings()

# box-api - 消息：“无效值 'xxx'。实体主体应该是正确嵌套的资源属性名称/值对”

> ID：16112833
> 
> 赞同：0
> 
> 时间：2013-04-19T20:16:47.870
> 
> 标签：box-api

当我尝试接收文件夹列表时，我收到消息：“无效值'Authorization = Bearer xxx'。实体主体应该是正确嵌套的资源属性名称/值对”。

```
1\. URL  https://api.box.com/2.0/folders
2\. Post request
3\. Content-type: json or x-www-form-urlencoded
4\. Authorization:Bearer 5iV0..... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T03:33:34.033

> 无效值“授权=承载 xxx”。实体主体应该是正确嵌套的资源属性名称/值对

这表明您可能将 Authorization 标头作为请求的正文发送。您没有提供有关如何发出 HTTP 请求的任何上下文，但您应该查看“如何设置 HTTP 标头”以了解您使用的任何语言/模块，以了解如何正确执行此操作。

# git - 将 git 子树更改推送到上游存储库失败

> ID：16112836
> 
> 赞同：8
> 
> 时间：2013-04-19T20:16:51.377
> 
> 标签：git, push, git-push, git-subtree

在将 git 的子树合并到我的项目中之前，我试图确保它对我有用。将子树更改推送到上游存储库时遇到问题。

设置是我有两个存储库`sub`和`main`, 并且将存储库`main`包含`sub`为`subtree`.

然后我执行以下操作：

1.  使用初始提交初始化两个存储库。
2.  直接更新`sub`repo（即在 之外`main`）。
3.  `sub`从 repo 中更新`main`repo。
4.  `sub`将（使用）的更改拆分`git subtree split`为一个单独的分支，然后我将其签出。
5.  尝试将上游推送到`sub`repo。自然，此推送会被拒绝，因为它会丢失对`sub`.
6.  从`sub`repo 中提取新的更改。
7.  尝试将上游推送到`sub`repo。这一次，它应该工作，但它没有。

我写了一个脚本来封装这个问题。我正在使用`subtree`启用了模块的 git 版本 1.8.2.1。这是脚本：

```
#!/bin/bash

echo -n "Wiping old repositories..."
rm -rf main sub sub-home
echo "done"

echo -n "Initializing main and sub repositories..."
mkdir sub-home
( cd sub-home ; git init -q --bare )
git clone sub-home sub > /dev/null 2>&1
( cd sub ; echo subfile > subfile ; git add subfile ;
  git commit -qm "adding root-level file to sub-project" ;
  git push -q origin master )
mkdir main
( cd main ; git init -q ; echo file > file ; git add file ;
  git commit -qm "adding root-level file to main-project" )
echo "done"

echo -n "Adding sub project as a subtree into main project..."
WD=$PWD
( cd main ; git remote add sub-remote file://$WD/sub-home ;
  git subtree add -P sub sub-remote master >/dev/null 2>&1 )
echo "done"

echo -n "Committing to sub-project directly..."
( cd sub ; date > the-date ; git add the-date ;
  git commit -qm "adding the-date to sub-project"
  git push -q origin master )
echo "done"

echo -n "Committing to sub-project from within main project..."
( cd main ; echo 'subfile what?' > sub/subfile ; git add sub/subfile ;
  git commit -qm "changing sub-project from within the main project" )
echo "done"

cd main
git subtree split -q -P sub -b split-branch >/dev/null
git checkout -q split-branch
echo -e "\nPushing from main subtree to sub project, which should fail:"
git push sub-remote master
echo -e "\nBut if we pull first..."
git pull -q --no-edit sub-remote master
echo "...then a push *should* work (but it doesn't):"
git push sub-remote master
cd .. 
```

这是输出：

```
$ ./test.sh
Wiping old repositories...done
Initializing main and sub repositories...done
Adding sub project as a subtree into main project...done
Committing to sub-project directly...done
Committing to sub-project from within main project...done

Pushing from main subtree to sub project, which should fail:
To file:///tmp/git/sub-home
 ! [rejected]        master -> master (fetch first)
error: failed to push some refs to 'file:///tmp/git/sub-home'
hint: Updates were rejected because the remote contains work that you do
hint: not have locally. This is usually caused by another repository pushing
hint: to the same ref. You may want to first merge the remote changes (e.g.,
hint: 'git pull') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

But if we pull first...
...then a push *should* work (but it doesn't):
To file:///tmp/git/sub-home
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'file:///tmp/git/sub-home'
hint: Updates were rejected because a pushed branch tip is behind its remote
hint: counterpart. Check out this branch and merge the remote changes
hint: (e.g. 'git pull') before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details. 
```

其他`git pull`命令（来自 的`split-branch`分支`main`）简单地说“已经是最新的”。

真正让我感到困惑的是，据我所知，该`git push`命令实际上应该给上游 repo 一个快进提交，如下面的`git log`输出所示：

```
$ ( cd main ; git log )
commit 357fe9fb42f5d122338940eb4f22d3ca9d276318
Merge: 472904f cb5d1d3
Author: Jeff Terrell <jeff.terrell@acm.org>
Date:   Fri Apr 19 16:03:03 2013 -0400

    Merge branch 'master' of file:///tmp/git/sub-home into split-branch

commit 472904f432c3a0a89acde02691b8281ac5246fd1
Author: Jeff Terrell <jeff.terrell@acm.org>
Date:   Fri Apr 19 16:03:02 2013 -0400

    changing sub-project from within the main project

commit cb5d1d34ce56374f78c98c5b3f3daa314907b62d
Author: Jeff Terrell <jeff.terrell@acm.org>
Date:   Fri Apr 19 16:03:02 2013 -0400

    adding the-date to sub-project

commit 7d1942203d30e0d9e8663517e6d594545bc50640
Author: Jeff Terrell <jeff.terrell@acm.org>
Date:   Fri Apr 19 16:03:02 2013 -0400

    adding root-level file to sub-project
$ (cd sub ; git log )
commit cb5d1d34ce56374f78c98c5b3f3daa314907b62d
Author: Jeff Terrell <jeff.terrell@acm.org>
Date:   Fri Apr 19 16:03:02 2013 -0400

    adding the-date to sub-project

commit 7d1942203d30e0d9e8663517e6d594545bc50640
Author: Jeff Terrell <jeff.terrell@acm.org>
Date:   Fri Apr 19 16:03:02 2013 -0400

    adding root-level file to sub-project 
```

这是我的问题（最后）：

1.  为什么这个推送被拒绝了？
2.  我能做些什么呢？（如果使用`--force`选项是答案，我怎么能确定我没有做破坏性的事情？）
3.  有没有更好的方法来使用该`subtree`模块来避免这个问题？（注意：我不愿意使用子模块。）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-24T08:27:26.263

您的问题与`git subtree`. 您在使用旧的棘手 git ui 时遇到问题。在这种情况下`git push`。您显然假设它的语法如下`git pull`。那太天真了——你正在使用 git ;)。

你推送输出告诉你这里出了什么问题：

```
To file:///tmp/git/sub-home
! [rejected]        master -> master (non-fast-forward) 
```

`git pull sub-remote master``sub-remote/master`正如您所期望的那样，将 head 提取并合并到您当前签出的分支中。但`git push sub-remote master`不会将签出分支的头部推入`sub-remote/master`. 它确实推动了同名的分支。所以在这种情况下`master`，正如您在上面的输出中看到的那样。

从`git help push`（语法是`git push <repsitory> <refspec>`）：

> 参数的格式`<refspec>`是可选的加号 +，后跟源 ref `<src>`，后跟冒号`:`，然后是目标 ref `<dst>`。它用于指定要更新远程存储库中`<src>`的 ref 的对象。`<dst>`
> 
> 告诉远程端的`<dst>`哪个 ref 通过此推送进行更新。此处不能使用任意表达式，必须命名实际的 ref。如果省略，将更新`:<dst>`相同的 ref 。`<src>`

所以你要找的命令是`git push sub-remote splitbranch:master`. 但是你为什么不`git subtree push`首先使用呢？

# java - Java 基本 if/else 语句状态变化

> ID：16112837
> 
> 赞同：2
> 
> 时间：2013-04-19T20:16:57.700
> 
> 标签：java, swing, if-statement, actionlistener, jlabel

请在下面查看我附加的代码，然后在最后查看我的问题。

```
class events extends JFrame{
    private JLabel label;
    private JButton button;

    public events() {
        setLayout(new FlowLayout());

        button = new JButton("Click for text");
        add(button);

        label = new JLabel("");
        add(label);

        event e = new event();
        button.addActionListener(e);

    }

    public class event implements ActionListener {
        public void actionPerformed(ActionEvent e) {
            int x = 0;
            if (x == 0) {

                label.setText("the new label");
                System.out
                        .println("setting x to 0 and label to display a label");
                x = 1;
                System.out.println(x);
            } else {
                label.setText("newerer label");
                System.out.println("i reached the else segment");

                x = 0;
                System.out.println(x);
            }

        }

    }

    public static void main(String args[]) {
        events gui = new events();
        gui.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        gui.setTitle("Events Test");
        gui.setSize(300, 100);
        gui.setVisible(true);

    }

} 
```

背景：我正在学习java并试图理解一个概念。使用这个程序，我试图创建一个带有按钮的小 gui，单击该按钮会为 JLabel 分配“新标签”的字符串值。但是，如果再次单击，我想使用相同的按钮将标签更改为“较新的标签”，如果单击第三次，则再次返回。我尝试使用带有变量 x 的 If/Else 语句来执行此操作，以基本上保持状态 1 或 0。在 If/Else 的每个部分结束时，我将 x 的状态适当地更改为 1 或 0。但是，当尝试在 Eclipse 中运行该程序时，我遇到了某种错误。我分配了一个system.out。

问题：

1.  If/Else 语句是否适合执行这种简单的 2 状态切换？
2.  有没有更合适的方法来做到这一点？（我知道 switch 语句，但选择了这个，因为它只是一个两个状态的项目）。
3.  我做错了什么，为什么当状态应该为 1 时我的 Else 路径从未实现？

谢谢你的回复，帕诺

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:20:59.043

您的变量“x”必须声明为类成员。

```
public class event implements ActionListener{
    private int x = 0;

    public void actionPerformed(ActionEvent e){
        if(x == 0){
            label.setText("the new label");
            System.out.println("setting x to 0 and label to display a label");
            x = 1;
            System.out.println(x);
        }
        else {
            label.setText("newerer label");
            System.out.println("i reached the else segment");
            x = 0;
            System.out.println(x);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:20:47.963

`x`每次调用动作侦听器时，您都在进行初始化，因此`x`始终为 0。移动`x`到其他地方，可能将其声明为类成员。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:25:24.473

1.  Yes, I personally would use an if/else statement here, although if you are likely to add more states a switch statement *may* be appropriate, but I think given you have more than 1 line of code in the if/else blocks I would keep it as if/else as it has better readability in my experience.

2.  I guess my answer to 1 covers this!

3.  The reason your else block isn't being reached is that your x variable is only in scope (only exists) inside that method. As soon as you leave the method the value is no longer in scope so as far as your code in concerned it no longer exists. The code P Lalonde posted shows the correct way: having the variable as a member variable (object scope). Read more about member variable scope here: [http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html](http://docs.oracle.com/javase/tutorial/java/javaOO/variables.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T20:27:33.833

如果您只是在寻找状态切换，您实际上可以执行以下操作：

```
if( label.getText().equals("the new label") ) {
  label.setText("newerer label");
} else {
  label.setText("the new label");
} 
```

# laravel - 使用 {{Html}} 的 Laravel 4 Javascript 链接

> ID：16112840
> 
> 赞同：1
> 
> 时间：2013-04-19T20:17:01.887
> 
> 标签：laravel, laravel-4

是否有任何 Laravel4 Html() 函数或添加禁用链接的方法。当然我可以`<a>`直接创建标签，虽然我更喜欢保持一致。

IE：

```
{{ Html::link('javascript:;','Delete',array('id'=>"deletebt")) }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:53:59.110

您必须使用**link_to**，例如：

```
link_to('link', 'title', array('id' => 'MyId')); 
```

# android - Android：MediaRecorder 启动失败：-16

> ID：16112841
> 
> 赞同：1
> 
> 时间：2013-04-19T20:17:04.103
> 
> 标签：android

我一直在尝试实现摄像机。但由于 recorder.start() 上的这个神秘错误 (-16)，它从未起作用。

这是我的代码：

```
private void initRecorder(int width, int height) {
        recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        Parameters params = camera.getParameters();
        List<Size> sizes = params.getSupportedPreviewSizes();
        Size optimalSize = getOptimalPreviewSize(sizes, width, height);
        params.setPreviewSize(optimalSize.width, optimalSize.height);

        CamcorderProfile cpHigh = CamcorderProfile
                .get(CamcorderProfile.QUALITY_LOW);
        recorder.setProfile(cpHigh);
        File mediaFile = null;
        if (Environment.getExternalStorageState().equals(
                Environment.MEDIA_MOUNTED)) {

            mediaFile = new File(
                    android.os.Environment.getExternalStorageDirectory()
                            + "/Towncare/Temp/vid_temp.3gpp");
            if (!mediaFile.exists()) {
                try {
                    mediaFile.getParentFile().mkdirs();
                    mediaFile.createNewFile();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
            }
        }
        ;
        recorder.setOutputFile(android.os.Environment
                .getExternalStorageDirectory() + "/Towncare/Temp/vid_temp.3gpp");
        recorder.setMaxDuration(50000); // 50 seconds
        recorder.setMaxFileSize(5000000);
    }

    private Size getOptimalPreviewSize(List<Size> sizes, int w, int h) {
        final double ASPECT_TOLERANCE = 0.1;
        double targetRatio = (double) w / h;
        if (sizes == null)
            return null;

        Size optimalSize = null;
        double minDiff = Double.MAX_VALUE;

        int targetHeight = h;

        // Try to find an size match aspect ratio and size
        for (Size size : sizes) {
            double ratio = (double) size.width / size.height;
            if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE)
                continue;
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }

        // Cannot find the one match the aspect ratio, ignore the requirement
        if (optimalSize == null) {
            minDiff = Double.MAX_VALUE;
            for (Size size : sizes) {
                if (Math.abs(size.height - targetHeight) < minDiff) {
                    optimalSize = size;
                    minDiff = Math.abs(size.height - targetHeight);
                }
            }
        }
        return optimalSize;
    }

    private void prepareRecorder() {
        recorder.setPreviewDisplay(previewHolder.getSurface());

        try {
            recorder.prepare();
        } catch (IllegalStateException e) {
            e.printStackTrace();
            finish();
        } catch (IOException e) {
            e.printStackTrace();
            finish();
        }
    } 
```

这是日志：

> 04-20 18:27:26.178：I/MediaRecorderJNI（13225）：准备：表面=0x257468（身份=1459） 04-20 18:27:27.548：E/MediaRecorder（13225）：启动失败：-16 04-20 18:27:27.558: D/AndroidRuntime(13225): 关闭 VM 04-20 18:27:27.558: W/dalvikvm(13225): threadid=1: 线程退出但未捕获异常 (group=0x40018560) 04-20 18 ：27：27.578：E / AndroidRuntime（13225）：致命异常：主要04-20 18：27：27.578：E / AndroidRuntime（13225）：java.lang.RuntimeException：启动失败。04-20 18:27:27.578: E/AndroidRuntime(13225): 在 android.media.MediaRecorder.start(Native Method) 04-20 18:27:27.578: E/AndroidRuntime(13225): 在 com.packagename.app .FullCameraActivity$3.onClick(FullCameraActivity.java:84) 04-20 18:27:27.578: E/AndroidRuntime(13225): 在 android.view.View.performClick(View.java:2506) 04-20 18:27: 27.578:

我知道有一些重复，但它们都没有对我有用的答案。请帮帮我。提前致谢

# c# - 提供一个泛型来模拟

> ID：16112843
> 
> 赞同：3
> 
> 时间：2013-04-19T20:17:07.257
> 
> 标签：c#, asp.net-mvc, generics, moq

我正在尝试使用 MVC 项目在解决方案中概括一些测试代码。因为我们为每个控制器编写相同的测试，所以我的想法是我可以使用泛型来实现它，所以只需要一个测试。

不幸的是，我目前收到错误：`Error 1 The type 'TRepo' must be a reference type in order to use it as parameter 'T' in the generic type or method 'Moq.Mock<T>'`

这是相关的代码。如果需要，我可以提供更多。

测试库.cs

```
public class TestBase<TController, TObject, TRepo>
where TController : IRMCController<TObject>
where TRepo : IRMCRepository
{
    public Mock<TRepo> Repo { get; set; }
} 
```

公司Test.cs

```
public class CompaniesTest : TestBase<CompaniesController, Company, ICompanyRepository> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:31:17.110

在 Moq 中，类对其泛型类型`Mock<T>`有限制。`class`这是它的定义方式：

```
public class Mock<T> : Mock where T : class 
```

所以如果你打算在你的类中使用它，你必须定义相同的`class`约束，除了`IRMCRepository`：

```
public class TestBase<TController, TObject, TRepo>
    where TController : IRMCController<TObject>
    where TRepo : class, IRMCRepository

{
    public Mock<TRepo> Repo { get; set; }
} 
```

现在你的代码要编译了。这[`generic constraints`](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)在 C# 中是基本的。

# php - MySQL 中使用 IF-ELSE 的条件连接语句

> ID：16112850
> 
> 赞同：1
> 
> 时间：2013-04-19T20:17:35.477
> 
> 标签：php, mysql, sql

我正在为我的社交网络应用程序制作通知方案。我有不同类型的通知，分为两组：朋友相关和事件相关。目前，我的数据库架构是这样的：

```
+---------------------+------------------------+------+-----+---------+----------------+
| Field               | Type                   | Null | Key | Default | Extra          |
+---------------------+------------------------+------+-----+---------+----------------+
| notification_id     | int(11)                | NO   | PRI | NULL    | auto_increment |
| notification_type   | enum('event','friend') | NO   |     | NULL    |                |
| notification_date   | datetime               | NO   |     | NULL    |                |
| notification_viewed | bit(1)                 | NO   |     | NULL    |                |
| user_id             | int(11)                | NO   | MUL | NULL    |                |
+---------------------+------------------------+------+-----+---------+----------------+ 
```

现在，我有两个不同的表格，分别是事件相关通知和朋友相关通知。以下是事件相关通知表的架构：

```
+-------------------------+----------------------------------------------------+------+-----+---------+-------+
| Field                   | Type                                               | Null | Key | Default | Extra |
+-------------------------+----------------------------------------------------+------+-----+---------+-------+
| notification_id         | int(11)                                            | NO   | PRI | NULL    |       |
| event_id                | int(11)                                            | NO   | MUL | NULL    |       |
| event_notification_type | enum('added','kicked','new-message','info-edited') | NO   |     | NULL    |       |
+-------------------------+----------------------------------------------------+------+-----+---------+-------+ 
```

`kicked`同样，对于每种, `added`, `new-message`,通知类型，我还有 4 个表格`info-edited`，因为每个表格都需要具有不同类型的属性（例如，`kicked`需要一个原因）。

现在，我想编写一个条件 SQL 查询，使其`notification`与`event_notification`if不同。`notification_type``event`

SELECT * FROM notification_table t WHERE t.seen = FALSE AND t.user_id = ? INNER JOIN event_notification en ON(t.notification_type='event' AND en.notification_id = t.notification_id) INNER JOIN .....

会有这么多的内部连接有没有更好的方法呢？我认为我的查询也不是很优化，如果可以提供任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:55:27.170

您可以使用连接。但是，您希望使用左外连接而不是内连接来创建查询：

```
SELECT *
FROM notification_table t
WHERE t.seen = FALSE AND t.user_id = ? left JOIN
      event_notification en
      ON(t.notification_type='event' AND en.notification_id = t.notification_id) left JOIN ... 
```

不要担心连接的扩散。如果您的表具有适当的索引，它们将执行良好。

请考虑更改数据结构，以便您只有一张表用于不同的通知类型。有几个未使用的字段不会增加太多的性能开销，尤其是当您考虑拥有如此多的连接的复杂性以及拥有更多表的额外管理开销时。

# ruby - ctrl-c 后 Sinatra 重启 Webrick 服务器

> ID：16112855
> 
> 赞同：4
> 
> 时间：2013-04-19T20:17:42.003
> 
> 标签：ruby, sinatra, webrick

```
require 'sinatra'
require 'rubygems'

class TestServer < Sinatra::Application
set :port, 22340
    get '/' do
        "Hello World"
    end
    run! if app_file == $0
end 
```

使用 Ruby 2.0.0-p0 和 Sinatra 1.4.2 的非常简单的应用程序

当我按 ctrl-c 时 webrick 服务器在默认端口上重新启动...请参阅下面的输出

```
LM-BOS-00715009:server joshughes$ ruby test.rb 
[2013-04-19 16:07:48] INFO  WEBrick 1.3.1
[2013-04-19 16:07:48] INFO  ruby 2.0.0 (2013-02-24) [x86_64-darwin11.4.2]
== Sinatra/1.4.2 has taken the stage on 22340 for development with backup from WEBrick
[2013-04-19 16:07:48] INFO  WEBrick::HTTPServer#start: pid=63798 port=22340
^C
== Sinatra has ended his set (crowd applauds)
[2013-04-19 16:07:56] INFO  going to shutdown ...
[2013-04-19 16:07:56] INFO  WEBrick::HTTPServer#start done.
[2013-04-19 16:07:56] INFO  WEBrick 1.3.1
[2013-04-19 16:07:56] INFO  ruby 2.0.0 (2013-02-24) [x86_64-darwin11.4.2]
== Sinatra/1.4.2 has taken the stage on 4567 for development with backup from WEBrick
[2013-04-19 16:07:56] INFO  WEBrick::HTTPServer#start: pid=63798 port=4567
^C 
```

谁能帮我解决这里可能出了什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-19T21:07:37.433

问题是您没有正确使用[Sinatra 模块化风格](http://www.sinatrarb.com/intro.html#Modular%20vs.%20Classic%20Style)。而不是要求`sinatra`和继承`Sinatra::Application`你应该要求`sinatra/base`和继承自`Sinatra::Base`.

正在发生的事情是这样的。您需要 plain `sinatra`，而后者又需要`sinatra/main`. 该文件[添加了一个`at_exit`运行内置服务器的处理程序](https://github.com/sinatra/sinatra/blob/v1.4.2/lib/sinatra/main.rb#L25)（除非您禁用它）。但是，您还显式调用`run!`了自己的代码，因此服务器由于您的调用而启动，然后当您退出时，`at_exit`处理程序再次启动服务器。要求`sinatra/base`不会在退出时启动内置服务器，因此您只有自己的显式调用`run!`.

```
require 'sinatra/base' # change here
require 'rubygems'

class TestServer < Sinatra::Base # and here
  set :port, 22340
  get '/' do
    "Hello World"
  end
  run! if app_file == $0
end 
```

# java - 寻求更好的设计以使用 java 进行多调度

> ID：16112856
> 
> 赞同：0
> 
> 时间：2013-04-19T20:17:49.753
> 
> 标签：java, design-patterns

在不支持多分派的语言中，例如 Java，代码可能看起来像这样

```
/* Example using run time type comparison via Java's "instanceof" operator */
interface Collideable {
  void collideWith(Collideable other);
}

class Asteroid implements Collideable {
 public void collideWith(Collideable other) {
     if (other instanceof Asteroid) {
        System.out.println("AAAAAA");
     } else if (other instanceof Spaceship) {
        System.out.println("BBBBBB");
     } else if (other instanceof Plane) {
        System.out.println("CCCCCCC");
     } 
 }
}
class Spaceship implements Collideable {
 public void collideWith(Collideable other) {
     if (other instanceof Asteroid) {
         System.out.println("DDDDDDD");
     } else if (other instanceof Spaceship) {
         System.out.println("EEEEEEE");
     } else if (other instanceof Plane) {
        System.out.println("FFFFFFF");
     } 
 }
}
class Plane implements Collideable {
 public void collideWith(Collideable other) {
     if (other instanceof Asteroid) {
       System.out.println("GGGGGGG");
     }else if (other instanceof Spaceship) {
       System.out.println("HHHHHHH");
     }else if (other instanceof  Plane) {
       System.out.println("KKKKKK");
     }
 }
} 
```

由于访问者模式可以帮助解决这个问题，我正在考虑是否应该使用 void collideWith() { visitor.visit(this); 来实现每个叶子类。// 在 setter 中设置访问者 }

```
interface Visitor {
   void visit(Collideable c);
   void visit(Asteroid c);
   void visit(Spaceship c);
   void visit(Plane c);
} 
```

那么每个唯一的 println 应该在如下访问者的子类中实现？

```
class AsteroidVisitor implements Visitor {
   void visit(Collideable c) {}
   void visit(Asteroid c) { System.out.println("AAAAAA"); }
   void visit(Spaceship c) { System.out.println("BBBBBBB"); }
   void visit(Plane c) { System.out.println("CCCCCC"); }
}
//etc for SpaceshipVisitor and PlaneVisitor() 
```

替换instanceof是处理这种重构的最佳方法吗？

编辑：打印输出只是每种方法中独特操作的示例，而不是最终结果。我修改了我的示例以使其清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:31:38.233

在您提供的示例中，您不需要两个接口，您只需要一个`Collideable`接口。Collideable 接口可以定义如下：

```
interface Collideable {
  void collideWith(Collideable other);
  String getType();
} 
```

然后`Spaceship`,`Plane`和`Asteroid`将全部实现`collideWith`and `getType`。作为一个示例实现，Spaceship 的实现如下所示：

```
class Spaceship implements Collideable {
 public void collideWith(Collideable other) {
     System.out.println(this.getType() + " collides with " + other.getType());
 }

 public String getType(){
   return "Spaceship";
 }
} 
```

你可以更进一步，将 Collideable 声明为一个抽象类，提供 collideWith 的实现，因为它总是相同的。例如：

```
abstract class Collideable {
  void collideWith(Collideable other){
    System.out.println(this.getType() + " collides with " + other.getType());
  }
  String getType();
} 
```

作为旁注和一般提示，您的`Visitor`界面设计不佳。接口的目的是定义实现该接口的**所有**类必须提供方法定义（实现）的方法。但是，您的接口非常具体：它提供了几种类型（`Spaceship`、`Asteroid`等）作为方法参数。因此这是一个糟糕的设计，为什么你甚至需要那个界面？它看起来不能在其他任何地方使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:21:38.030

双重分派与方法重载有关。您似乎在代码段中显示的内容仅依赖于单次调度——您有一个接口，其实现将在运行时调用。

在我看来，真正的问题是你的`Collidable`接口应该有一个`getName`or`getType`方法，它返回“小行星”或“宇宙飞船”或者你有什么，然后你的实现`collidesWith`可以简单地打印出它自己的名字和它的碰撞伙伴的名字。在此示例中，我没有看到您需要双重分派——这只是为什么`instanceof`代码异味的一个例子。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:29:48.787

我希望我理解你的问题是正确的。

您可以考虑添加一个方法，例如：

```
interface Collideable {
    void collideWith(Collideable other);
    //new method
    String getSpecificStuff(); 
}

class Asteroid implements Collideable {

    String getSpecificStuff(){
        return "Asteroid";
    }
} 
```

然后方法：

```
 public void collideWith(Collideable other) {
     System.out.println(this.getSpecificStuff() +" VS " + other.getSpecificStuff());
 } 
```

其他子类只是遵循上面的规则。

当然，这些只是例子。`getSpecificStuff()`你可以用你的真实逻辑实现你自己的方法。

代码不是用 IDE 编写的，如果有错别字或伤眼的格式，我很抱歉。

# python - 在 Selenium Webdriver 中呈现页面后禁用 Javascript

> ID：16112858
> 
> 赞同：15
> 
> 时间：2013-04-19T20:18:13.923
> 
> 标签：python, selenium-webdriver

我正在使用 Python。我已经看到[如何使用 selenium 在 Firefox 中禁用 javascript？](https://stackoverflow.com/questions/13655486/how-can-i-disable-javascript-in-firefox-with-selenium)它说要创建一个配置文件，然后使用该配置文件加载驱动程序。但是我想在页面呈现后禁用 Javascript，这意味着我无法重新创建驱动程序。

我尝试了以下方法：

```
browser = selenium.webdriver.Firefox()
browser.get('http://wwwhatever.com')
browser.firefox_profile.set_preference('javascript.enabled', False)
browser.firefox_profile.update_preferences() 
```

但我明白了：

```
print browser.capabilities['javascriptEnabled']
True 
```

此外，我的测试的其余部分仍然像启用了 Javascript 一样。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-29T16:16:24.337

可以使用 QuickJs 扩展 - [https://addons.mozilla.org/en-US/firefox/addon/quickjs/?src=search](https://addons.mozilla.org/en-US/firefox/addon/quickjs/?src=search)。这个扩展添加了 Ctrl+q 快捷键来禁用 javascript。这是代码：

```
profile = selenium.webdriver.FirefoxProfile()
profile.add_extension("addon-8753-latest.xpi") #QuickJs extension
browser = selenium.webdriver.Firefox(profile)
browser.get('http://wwwhatever.com')

#Turn of javascript, send Ctrl+q
body = browser.find_element_by_tag_name("body")
body.send_keys(selenium.webdriver.common.keys.Keys.CONTROL + 'q') 
```

# mysql - 使用 WHERE IN 查找和显示重复值以比较两个值

> ID：16112859
> 
> 赞同：0
> 
> 时间：2013-04-19T20:18:22.630
> 
> 标签：mysql, count, duplicates, having, where-in

我有一个`MYSQL`数据库，我想根据列中的两个值比较重复值。例如

**数据库**

```
field_one | field_two | field_three
----------------------------------
啊！123 | 1号
bbb | 第456章 1号
啊！123 | 2号
抄送 | 第456章 3号
啊！123 | 3号

```

我想返回这些结果

```
field_one | field_two | field_three
----------------------------------
啊！123 | 1号
啊！123 | 2号

```

这是`query`我一直在使用的，但我不确定如何获得我想要的结果。当我`query`在`phpMyAdmin`浏览器中运行时会卡住。我的数据库也很大。

`SELECT * FROM `table_name` WHERE `field_three` IN (SELECT `field_one`, `field_two` FROM `table_name` WHERE `field_three` IN ('no1', 'no2') HAVING COUNT(*) > 1)`

谢谢

* * *

**解决了**

我刚刚将`WHERE`@Gordon Linoff 从`query`.

```
select t.*
from table_name t join
     (select field_one, field_two
      from table_name t
      group by field_one, field_two
      having count(*) = 2   -- or do you mean >= 2?
     ) tsum
     on t.field_one = tsum.field_one and t.field_two = tsum.field_two WHERE field3 IN ('no1', 'no2') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:36:09.860

我想你想要这个：

```
select t.*
from t join
     (select field_one, field_two
      from t
      group by field_one, field_two
      having count(*) = 2   -- or do you mean >= 2?
     ) tsum
     on t.field_one = tsum.field_one and t.field_two = tsum.field_two 
```

子查询根据前两列查找重复项。外部查询返回原始行。

如果您想要相对于另一个值的重复项，则将该条件添加到子查询中：

```
select t.*
from t join
     (select field_one, field_two
      from t
      where field3 = 'no1' -- or whatever you want to set it to
      group by field_one, field_two
      having count(*) = 2   -- or do you mean >= 2?
     ) tsum
     on t.field_one = tsum.field_one and t.field_two = tsum.field_two 
```

# image - 如何使用 Scott Kellum 的新图像替换技术

> ID：16112862
> 
> 赞同：1
> 
> 时间：2013-04-19T20:18:41.177
> 
> 标签：image, replace

我正在练习使用各种图像替换方法，最近看到了几篇文章，讨论了 Scott Kellum 提出的一种新的、据说更有效的方法。

[关于这种新方法的原始网站文章](http://www.zeldman.com/2012/03/01/replacing-the-9999px-hack-new-image-replacement/)

看起来不错，我想练习使用它，但我不确定它的 html 和 css 应该是什么。因此，在下面的示例中，我有一个 h1，其中包含示例徽标文本。然后我在我的 h1 中添加了一个 .hide-text 类，并用 CSS 设置了它的样式。我使用了我制作的 Photoshop 徽标图像并将其设置为背景图像......图像的宽度为 203 像素，高度为 57 像素。

**问题 1：** 当我在浏览器中测试我的代码时，一切似乎都运行良好，但是我使用 Mr.Kellum 的图像替换技术是否正确？

**问题 2：** 我应该以 css 中的 h1 为目标并声明宽度和高度，还是可以直接在隐藏文本类中包含宽度和高度，如下面的示例所示？

```
<style>
.hide-text {
    background: url(images/mylogo.jpg) 0 0 no-repeat;
    text-indent: 100%;
    white-space: nowrap;
    overflow: hidden;
    width: 203;
    height: 57px;
    } 
```

```
<body>
<h1 class="hide-text">MyLogo text</h1>
</body> 
```

任何帮助是极大的赞赏。谢谢社区！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T02:44:49.640

我在搜索图像替换的实际趋势时找到[了 css 图像替换博物馆。](http://css-tricks.com/examples/ImageReplacement/)我在那里遇到了 Scott Kellum 方法。之后我发现了这个问题 - 所以我不是使用这种技术的专家 - 我想分享我的看法。

### 从上面的链接复制粘贴的实施

很简单，也贴在这个问题上。

```
<h3 class="skm">CSS-Tricks</h3> 
```

CSS

```
h3.skm {
  width: 300px;
  height: 75px;
  background: url(test.png);
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
} 
```

# 像我一样执行

我已经阅读了原始文章，我认为最好拆分 css 代码以实现可重用性。也许我们会用不止一个元素来替换图像。

```
<h1 class="ir">An awesome pretty title</h1>
<h2>Some words here not replaced with images<h2>
<nav>
   <!-- some links replaced with images that also use css sprites -->
   <a class="ir" href="#">home</a>
   <a class="ir" href="#">sweet</a>
   <a class="ir" href="#">home</a>
</nav> 
```

正如您在问题上链接的帖子中所建议的那样，重用`ir`图像替换技术的类，使事情保持整洁。

```
.ir {
  text-indent: 100%;
  white-space: nowrap;
  overflow: hidden;
}
h1 {
  background-image: url('/the-title-replacement.png'');
  width: /*the-image-width*/px;
  height: /*the-image-height*/px;
}
nav a {
  background-image: url('/the-menu-icons-sprite.png');
  width: 24px;
  height: 24px;
}
nav a { background-position: 0 0; }
nav a + a { background-position: 0 24px; }
nav a + a + a { background-position: 0 48px; } 
```

## 结论

必须为每个替换的元素设置图像 url 和大小。如果我们使用精灵，每个元素的背景位置也会起作用，尽管元素大小通常在所有元素之间共享。

所有这些用例都可以受益于拆分 css 代码，保持样式表更整洁。

**注意**：我已经为纯 css 实现提出了这些想法。使用 css 预处理器 - 例如 less 例如 - 会更改规则。

**注 2**：另一种趋势方法是[H5BP 团队提出的](https://github.com/h5bp/html5-boilerplate/blob/master/css/main.css#L117)。我不确定要使用哪个。

# java - Axis - 响应类扩展了 AxisFault 并被抛出而不是返回？

> ID：16112864
> 
> 赞同：1
> 
> 时间：2013-04-19T20:18:51.317
> 
> 标签：java, web-services, exception, axis

我使用 Axis1 (axis-1.4.jar) 生成了一些 java 类文件。我有一个 WS 方法调用（我也可以看到它生成的 java 代码）。

假设此方法调用接受 RequestA 作为参数并返回 ResponseA 类型的对象。我现在遇到的问题是 ResponseA 扩展了 AxisFault（我可以在为 ResponseA 生成的 java 源文件中看到它）。AxisFault 自行扩展 RemoteException。

因此，返回的 ResponseA 对象没有返回给我，而是被扔给/扔给我，因为它是 RemoteException。

所以当我做这样的事情时

```
try { 
   ResponseA x = call(y); // y is RequestA
} catch (Exception ex) {
    ex.printStackTrace();
} 
```

在我的客户端代码中，控制流转到 catch 块，我实际上正在捕捉我通常应该在 x 变量中得到的内容（即 ex 通常是 x ）。

知道是什么让 Axis 将我的 ResponseA 类生成为 AxisFault 的子类吗？另外，一般来说，Axis 何时生成一个类，作为 AxisFault 的子类生成？

我认为这是我目前的问题。我认为我处于奇怪的情况，成功的 WS 方法调用的响应没有返回给我，而是被扔给/扔给我。

提前谢谢了。

```
 package com.test.fulfillment3;

    // This is the ResponseA
    public class Actionresponse  extends org.apache.axis.AxisFault  implements java.io.Serializable {

    ...

    }

    // --------------------------------------------------------------------------------------------------------------------------------------------

    package com.test.fulfillment3;

    // This is the RequestA
    public class Actionrequest  implements java.io.Serializable {

    ...

    }

    // --------------------------------------------------------------------------------------------------------------------------------------------

    package com.test.fulfillment3;

    public class Status_ServiceBindingStub { 

    ..............

        public com.test.fulfillment3.Actionresponse status_ServiceOp(com.test.fulfillment3.Actionrequest in) throws java.rmi.RemoteException, com.test.fulfillment3.Status_ServiceFault4, com.test.fulfillment3.Status_ServiceFault2, com.test.fulfillment3.Status_ServiceFault3, com.test.fulfillment3.Actionresponse {
            if (super.cachedEndpoint == null) {
                throw new org.apache.axis.NoEndPointException();
            }
            org.apache.axis.client.Call _call = createCall();
            _call.setOperation(_operations[0]);
            _call.setUseSOAPAction(true);
            _call.setSOAPActionURI("http://soa.jboss.org/TEST/Status_ServiceOp");
            _call.setEncodingStyle(null);
            _call.setProperty(org.apache.axis.client.Call.SEND_TYPE_ATTR, Boolean.FALSE);
            _call.setProperty(org.apache.axis.AxisEngine.PROP_DOMULTIREFS, Boolean.FALSE);
            _call.setSOAPVersion(org.apache.axis.soap.SOAPConstants.SOAP11_CONSTANTS);
            _call.setOperationName(new javax.xml.namespace.QName("", "Status_ServiceOp"));

            setRequestHeaders(_call);
            setAttachments(_call);
     try {        java.lang.Object _resp = _call.invoke(new java.lang.Object[] {in});

            if (_resp instanceof java.rmi.RemoteException) {
                throw (java.rmi.RemoteException)_resp;
            }
            else {
                extractAttachments(_call);
                try {
                    return (com.test.fulfillment3.Actionresponse) _resp;
                } catch (java.lang.Exception _exception) {
                    return (com.test.fulfillment3.Actionresponse) org.apache.axis.utils.JavaUtils.convert(_resp, com.test.fulfillment3.Actionresponse.class);
                }
            }
      } catch (org.apache.axis.AxisFault axisFaultException) {
        if (axisFaultException.detail != null) {
            if (axisFaultException.detail instanceof java.rmi.RemoteException) {
                  throw (java.rmi.RemoteException) axisFaultException.detail;
             }
            if (axisFaultException.detail instanceof com.test.fulfillment3.Status_ServiceFault4) {
                  throw (com.test.fulfillment3.Status_ServiceFault4) axisFaultException.detail;
             }
            if (axisFaultException.detail instanceof com.test.fulfillment3.Status_ServiceFault2) {
                  throw (com.test.fulfillment3.Status_ServiceFault2) axisFaultException.detail;
             }
            if (axisFaultException.detail instanceof com.test.fulfillment3.Status_ServiceFault3) {
                  throw (com.test.fulfillment3.Status_ServiceFault3) axisFaultException.detail;
             }
            if (axisFaultException.detail instanceof com.test.fulfillment3.Actionresponse) {
                  throw (com.test.fulfillment3.Actionresponse) axisFaultException.detail;
             }
       }
      throw axisFaultException;
    }
        }

    }

    // -------------------------------------------------------------------------------------------------------------------------------------------- 

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T21:53:42.143

几个月前我发现了这个问题。WSDL 文件本身将（该方法的）响应类型定义为错误。因此类 ResponseA/Actionresponse 由 Axis 生成为 AxisFault 的子类。

在这种情况下，在运行时，客户端 Axis 生成的代码（我在上面粘贴的部分代码）“认为”服务器端方法没有在服务器端成功返回（即使它确实返回了），并抛出返回值而不是返回它。

非常奇怪的情况，但我现在倾向于将此视为 WSDL 本身的问题。我认为将返回值/类型同时定义为错误（在 WSDL 文件中）是不正常的。只是想分享这个答案，以防其他人遇到同样的问题。

# javascript - 引导轮播暂停

> ID：16112865
> 
> 赞同：0
> 
> 时间：2013-04-19T20:18:51.800
> 
> 标签：javascript, jquery, carousel

我对此很陌生，所以请温柔一点。

我正在尝试使用引导轮播插件，并在每张幻灯片更改时显示不同的 div 部分。我找到了一个很好的例子，但不幸的是我不知道如何让它暂停。

```
<html>
    <head>
        <link href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" rel="stylesheet" type="text/css" />
        <script type="text/javascript" src="jquery.js"></script>
        <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-transition.js"></script>

        <script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap-carousel.js"></script>
        <style>
            .carousel {
                width: 80%;
                margin-left: auto;
                margin-right: auto;
            }
        </style>

        <title>testapp</title>
    </head>

    <body>
        <div id="msg"></div>

        <div id="myCarousel" class="carousel slide">
            <div class="carousel-inner">
                <div class="item active">
                    <img src="http://i.microsoft.com/global/en-us/homepage/PublishingImages/sprites/microsoft_gray.png" />
                </div>
                <div class="item">
                    <img src="http://www.google.com.pk/ig/images/jfk/google_black.png" />
                </div>
                <div class="item">
                    <img src="http://www.google.com.pk/ig/images/jfk/google_black.png" />
                </div>
            </div>
            <!-- Carousel nav -->
            <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
            <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
        </div>

<div class="row">
  <div class="offset2">
    <div>Microsoft: *** index 0 ***</div>
    <div>Google: *** index 1 ***</div>
    <div>Google: *** index 2 ***</div>
  </div>
</div>
</body>
</html> 
```

JS

```
 function msg(m) {
        $("#msg").text(m);
    }

    $('#myCarousel').carousel({
        interval: 5000
    });

    var carouselTexts = $(".row .offset2 div");

    $('#myCarousel').on('slid', function(event) {
        var idx = $(event.target).find('.carousel-inner .active').index();
        carouselTexts.hide().eq(idx).show();
    }).trigger('slid'); 
```

[http://jsfiddle.net/ymwL5/2/](http://jsfiddle.net/ymwL5/2/)

当我在间隔下方添加“暂停：”悬停：5000 行时，Divs 停止旋转，隐藏部分完全中断。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:48:05.633

默认情况下，轮播应在悬停时暂停，因此您不需要该选项。我认为您在“间隔：5000”选项后缺少逗号。尝试：

```
interval: 5000,
pause: "hover" 
```

# php - 基于数组的SQL查询

> ID：16112869
> 
> 赞同：0
> 
> 时间：2013-04-19T20:19:38.180
> 
> 标签：php, mysql

我有一个名为的数组`$restaurantArray`，其中包含一系列餐厅 ID。

无论如何我可以执行一个 mysql 查询，如果它们的 id 等于数组中的这些餐厅 ID 之一，它将返回行？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:26:25.217

您可以将 IN 与您的 mysql 查询一起使用。只需将数组 $restaurantArray 内爆到字符串中，使用逗号作为分隔符；用括号覆盖这个字符串；并使用结果字符串作为查询的输入。就像是

```
// uncomment if data needs to be sanitized
// $restaurantArray = array_map("mysql_real_escape_string", $restaurantArray);
$input = '(' . implode(',', $restaurantArray) . ')';
$query = "SELECT from foo WHERE id IN $input"; 
```

# java - Java - 如果对象的类型与字符串匹配，则使用反射将数据附加到对象

> ID：16112874
> 
> 赞同：0
> 
> 时间：2013-04-19T20:20:00.513
> 
> 标签：java, class, reflection

所以这里有一个问题要问你java专家。

我在文本文件中保留了一些定义，假设它们是属性文件。我有各种各样的不同对象，它们都实现了一个接口，我们称之为`Cardable`. 它保证附加这些定义并检索它们以在应用程序中显示的方法。

```
public interface Cardable {
   public void attach(Card c);
   public Card retrieve();
} 
```

现在，当我构建这些类型不同的对象的静态列表时，我会查看该类型是否与定义中声明的一组类匹配，如下所示

```
Thing.Bag.LeatherBag= ... (definitions) 
```

如果我们正在创建这个类（定义被压缩以显示这个想法）

```
public class LeatherBag extends Bag {
   ...
}

public class Bag extends Thing {
   ...
}

public class Thing implements Cardable {
   ...
} 
```

该过程是在预加载阶段通过列表并将最具体的卡分配给给定的类。这可以任意定义为，例如，指定更多类（根据此规则，Thing.Bag.LeatherBag 将比 Bag.LeatherBag 更具体。）

一旦我从字符串中取出类名，我将如何使用 instanceof 检查对象（一旦我们验证它实现`Cardable`）是否是所有指定类的实例？Instanceof 似乎与类型有关，但与包含类型/类名的字符串无关。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:35:33.890

如果我理解正确，您有一个由其字符串名称表示的类，并且您想确定它是否实现了一组由其字符串名称表示的接口，以及它是否扩展了一组由其字符串名称表示的类。您可以使用[Class](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Class.html)类执行此操作。

```
void isValid(String className) {
    Class clazz = Class.forName(className);
    Class[] interfaces = clazz.getInterfaces();
    ArrayList<Class> superclasses = new ArrayList<>();
    Class temp = clazz.getSuperclass();
    superclasses.add(temp);
    while(temp != Object.class) {
        temp = temp.getSuperclass();
        superclasses.add(temp);
    }
} 
```

这应该让您拥有`interfaces`所有类的接口，而“超类”则拥有所有类的超类。您可以在这些类对象上调用 Class#getName 并将它们与接口/类的字符串表示形式进行比较，以查看相关类是否符合您的标准。

# wpf - Azure 媒体服务和通过 WPF 应用程序播放视频

> ID：16112878
> 
> 赞同：1
> 
> 时间：2013-04-19T20:20:22.003
> 
> 标签：wpf, azure, azure-media-services

我绕着圈子转，所以我转向 SO 寻求最终答案。

我想开发一个小型概念验证应用程序，通过它演示与 Azure 媒体服务的交互。除了通过 MediaElement 控件播放视频外，一切都很棒。

到目前为止我所做的一切都在 WPF 中，但是我无法弄清楚如何成功播放已发布的媒体。我已经尝试了一些我认为 MediaElement 控件支持的预设，但不是播放。但是，它们确实可以在 Chrome 或 Silverlight 播放器中播放（流畅的流媒体。我知道这只是 SL，但只是测试流媒体确实有效）

是否有任何 WPF 控件和 azure 预设组合允许通过 WPF 应用程序进行流式传输，还是必须仅在 silverlight 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-07T09:15:54.730

平滑流式播放可用于 WinRT、Silverlight 和 Windows Phone，但 WPF 不可用。但是，如果您[在 WPF 应用程序中托管 Silverlight 播放器](http://silverlightviewport.codeplex.com/)，则可以绕过它。

您想要的媒体服务预设是平滑流预设之一（或“通过 PC 或 Mac 播放”，如果您坚持使用更简单的预设）。

# php - Cakephp Auth 重定向出 Ajax

> ID：16112882
> 
> 赞同：0
> 
> 时间：2013-04-19T20:20:37.600
> 
> 标签：php, ajax, cakephp, redirect

所以我正在开发一个基于 ajax 的应用程序。当会话超时时，用户被重定向到 ajax 本身的用户/登录...我想让用户完全重定向到不同的布局。

我已经尝试了以下所有方法，它们都不起作用......

```
return $this->redirect(array('ajax' => false, 'controller'=>'users','action'=>'login'));

$this->Auth->logoutRedirect = '/'; 
```

我什至设置`$this->autoRender = false;`了，但它都不起作用。

让用户在会话超时时从 ajax 重定向的最佳方法是什么？

我目前在我的 AppController 中有这个。

```
if( $this->Auth->loggedIn() !== true && $this->params['action'] !== 'login'){
        $this->autoRender = false;
        return $this->redirect('/');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:02:10.810

您需要做的是向客户端呈现正确的响应，而不是重定向 AJAX 请求。

仅重定向当前的 AJAX 请求不会阻止客户端执行更多请求。而不是重定向它，您应该 - 仅适用于 AJAX 请求 - 返回一个客户端知道解释为注销的值。

如果您将 AJAX 请求直接加载到 div 中（以包含在 dom 树中），您可以简单地返回一个重定向用户的 javascript：

```
<script> window.location = "<signout/signin>.php" </script> 
```

# vb.net - 使用对象列表解析 txt 文件

> ID：16112884
> 
> 赞同：1
> 
> 时间：2013-04-19T20:20:43.770
> 
> 标签：vb.net, parsing, streamreader

我正在尝试解析一个包含多个贷款的 .txt 文件。我的逻辑是：我用我需要的属性创建了一个 Loan 类，我创建了一个贷款对象列表。我创建了一个新的贷款对象并将其添加到列表中。然后我通读 txt 文件并填写对象属性。当我到达文件的末尾时，我需要创建一个新的贷款对象并重新开始，因为该文件中有多个贷款并且我需要每个贷款一个对象。问题是当我使用下面的代码时，我收到错误“局部变量'myLoans'隐藏了一个封闭块中的变量”。有一个更好的方法吗？

```
 Public Class Loan
        Public Property LoanId As String
        Public Property LoanProvider As String
    End Class

    Dim listOfLoans As New List(Of Loan)()
    Dim myLoans As New Loan
    listOfLoans.Add(myLoans)

    Dim line As String
    Using r As New StreamReader("c:text.txt")
        line = r.ReadLine()
        Do While (Not line Is Nothing)
            If (line.Substring(0, 10) = "Loan id:") Then
                myLoans.LoanId = line.Substring(10, line.Length - 10).Trim()

            ElseIf (line.Substring(0, 14) = "Loan Provider:") Then
                myLoans.LoanProvider = line.Substring(14, line.Length - 19).Trim()

            ElseIf (line.Substring(0, 30) = "Last line of file:") Then
                Dim myLoans As New Loan
                listOfLoans.Add(myLoans)

            End If
            line = r.ReadLine
        Loop
    End Using 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:23:11.147

在这些行中，您将创建一个类 Loan 的新实例，并将这个新实例分配给一个不同的变量，该变量与外部变量的名称相同。
当然，这个变量的生命周期仅限于封闭的 ElseIf/End IF 块，与第一个无关。只是名称和编译器会警告您注意陷阱

```
ElseIf (line.Substring(0, 30) = "Last line of file:") Then
    Dim myLoans As New Loan
    listOfLoans.Add(myLoans)
End If 
```

你应该简单地改变线

```
ElseIf (line.Substring(0, 30) = "Last line of file:") Then
    myLoans = New Loan    'no Dim so the myLoans is the external one'
    listOfLoans.Add(myLoans)
End If 
```

这将创建 Loan 类的新实例并将引用分配给在开始时声明的相同变量

# grails - Grails MissingMethodException：WAR 中的 createCriteria，在本地运行

> ID：16112886
> 
> 赞同：0
> 
> 时间：2013-04-19T20:20:47.543
> 
> 标签：grails, createcriteria

我有一个非常普通的 Grails 应用程序。控制器上的域对象。在本地使用 run-app 或 run-war 时，一切运行良好。当我使用 grails war 创建 WAR 文件并部署到 Tomcat 7.0.25 webapps 目录时，我得到以下信息：

> 错误 500：内部服务器错误 URI/apps2/mriMetricAdjustment/teamResultAdjustment/list Classgroovy.lang.MissingMethodException MessageNo 方法签名：com.thrivent.mriAdjustment.domain.TeamResultAdjustment.withCriteria() 适用于参数类型：() 值：[]可能的解决方案：withCriteria(groovy.lang.Closure), withCriteria(java.util.Map, groovy.lang.Closure), createCriteria()

`withCriteria()`是一个域方法，这个错误出现在所有域对象上。我已经尝试了各种清洁、刷新依赖项、战争构建中的各种环境切换（如在 grails prod war 中）。我已经完全摧毁了 Tomcat 上的应用程序并重新部署。没有。我正在使用 Groovy Grails Tool Suite 3.1.0、Grails 2.1.1。任何帮助将不胜感激。

在遇到问题的地方添加堆栈跟踪和代码。每个控制器中的相同位置：

> [2013-04-19 16:51:43.931] sysCorpMRIMetricAdjustments ajp-bio-8018-exec-2 错误 rg.codehaus.groovy.grails.web.errors.GrailsExceptionResolver - 处理请求时发生错误 MissingMethodException：[GET] /apps2/ mriMetricAdjustment/teamResultAdjustment/list 没有方法签名：com.thrivent.mriAdjustment.domain.TeamResultAdjustment.withCriteria() 适用于参数类型：() 值：[] 可能的解决方案：withCriteria(groovy.lang.Closure), withCriteria(java .util.Map、groovy.lang.Closure)、createCriteria()。Stacktrace 如下：groovy.lang.MissingMethodException：没有方法签名：com.thrivent.mriAdjustment.domain.TeamResultAdjustment.withCriteria() 适用于参数类型：() 值：[] 可能的解决方案：withCriteria(groovy.lang.Closure) , withCriteria(java.util.Map, groovy.lang.

`def results = TeamResultAdjustment.withCriteria { and { like("recordStatusCode", "A") like ("teamID", "%" + params.tsID + "%") } }`

使用错误的日志和堆栈跟踪中的片段进行了更新。是否有需要清除的 Tomcat 缓存？

> 适用于参数类型：() 值：[] 可能的解决方案：createCriteria()。Stacktrace 如下：groovy.lang.MissingMethodException：没有方法签名：>com.thrivent.mriAdjustment.domain.GoalAdjustment.createCriteria() 适用于 >argument 类型：() 值：[] 可能的解决方案：createCriteria() at >com .thrivent.mriAdjustment.controller.GoalAdjustmentController.list(GoalAdjustmentController.groovy:33) 在 >grails.plugin.cache.web.filter.PageFragmentCachingFilter.doFilter(PageFragmentCachingFilte>r.java:195) 在 grails.plugin.cache.web。 filter.AbstractFilter.doFilter(AbstractFilter.java:63) at >java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)> at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java: 908) 在 java.lang.

` 插件 { 运行时 ":hibernate:$grailsVersion" 运行时 ":jquery:1.8.0" 运行时 ":resources:1.1.6"

```
 // Uncomment these (or add new ones) to enable additional resources capabilities
    //runtime ":zipped-resources:1.0"
    //runtime ":cached-resources:1.0"
    //runtime ":yui-minify-resources:0.1.4"

    build ":tomcat:$grailsVersion"
    //build ":hibernate:$grailsVersion"

    runtime ":database-migration:1.1"

    compile ':cache:1.0.0'
    compile ":grails-ui:1.2.3"
    compile ":yui:2.8.2.1"
    compile ":bubbling:2.1.4"
    compile ":searchable:0.6.4"
    compile ":jquery-ui:1.8.24"
    compile ":jquery-datatables:1.7.5"
    //compile ":hibernate:$grailsVersion"
}` 
```

最后但同样重要的是 - 我重新安装战争时的 catalina 日志：

```
>Apr 22, 2013 11:50:22 AM org.apache.catalina.startup.HostConfig checkResources
>INFO: Undeploying context [/apps2/mriMetricAdjustment]
>Apr 22, 2013 11:50:22 AM org.apache.catalina.startup.HostConfig deployWAR
>INFO: Deploying web application archive /opt/Apache/Tomcat7.0.25/profiles/sysCorpMRIMetricAdjustments/webapps/apps2#mriMetricAdjustment.war
>Apr 22, 2013 11:50:26 AM org.apache.catalina.core.ApplicationContext log
>INFO: Initializing Spring root WebApplicationContext
>Apr 22, 2013 11:50:55 AM org.apache.catalina.core.ApplicationContext log
>INFO: Initializing Spring FrameworkServlet 'grails'
>Apr 22, 2013 11:54:19 AM org.apache.catalina.core.ApplicationContext log
>INFO: Initializing Spring FrameworkServlet 'gsp'
>Apr 22, 2013 11:54:19 AM org.apache.catalina.core.ApplicationContext log
>INFO: GSP servlet initialized 
```

还有一个更新……这是我安装的插件：

```
Plug-ins you currently have installed are listed below:
-------------------------------------------------------------
bubbling            2.1.4            --  Bubbling Library YUI Extension
cache               1.0.0            --  Cache Plugin
database-migration  1.1              --  Grails Database Migration Plugin
grails-ui           1.2.3            --  Grails UI
hibernate           2.1.1            --  Hibernate for Grails
jquery              1.8.0            --  JQuery for Grails
jquery-datatables   1.7.5            --  JQuery DataTables Plugin
jquery-ui           1.8.24           --  jQuery UI resources
resources           1.1.6            --  Resources
searchable          0.6.4            --  Searchable Plugin
tomcat              2.1.1            --  Apache Tomcat plugin for Grails
webxml              1.4.1            --  WebXmlConfig
yui                 2.8.2.1          --  Yahoo! User Interface Library (YUI) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T04:09:00.330

请分享 和 的`domain`代码`controller`。它毫无例外地对我有用。

**脚步：**

*   已创建`demoApp`
*   已创建`domain`
*   已创建`controller`
*   `withCriteria`从`index()`行动中使用
*   `grails war`
*   将 WAR 部署到 Tomcat 7.0.39（最新）

您可以在[此处](http://pastebin.com/z1z6yvZ5)找到详细信息。

**要点击的网址：**

```
http://localhost:8080/demoApp-0.1/foo?name=Foo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T17:24:14.620

因此，这与应用程序 WAR 无关，而是服务器配置与 DataSource.groovy 不匹配。服务器被命名为“systst”，但 DataSource.groovy 中的环境被标记为“syst* *e* *st”。我怀疑 GORM 配置从未发生过，因为从未加载数据源配置。没有错误消息，但是我原以为域对象会失败，因为我引用了域中的数据源名称。谢谢大家！

# php - 试图调整正则表达式以删除新行

> ID：16112897
> 
> 赞同：0
> 
> 时间：2013-04-19T20:21:28.873
> 
> 标签：php, regex

嗨，我正在寻找调整这个正则表达式：

```
/\[quote\](.+?)\[\/quote\]\r\n/is 
```

基本上忽略新行（基本上我希望我的报价系统删除报价 bbcode 之后的任何新行，以停止在报价后出现双空格。

目前我只是这样做作为替换：

```
$replace = "<div class=\"quote\"><span class=\"strong\">Quote</span><br />$1</div>"; 
```

所以它直接删除了新行，但是如果引用代码是页面上的最后一件事并且之后没有新行，它会中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:54:39.450

在最后添加一个非捕获组，如下所示：

```
/\[quote\](.+?)\[\/quote\](?:\r\n)*/is 
```

或者一个简单的字符类：

```
/\[quote\](.+?)\[\/quote\][\r\n]*/is 
```

这也会抓住孤独的`\n`休息时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T20:35:17.193

想出了一个简单的方法：

```
$body = str_replace("[/quote]\r\n", '[/quote]', $body); 
```

只需在检查文本之前将其删除。简单的解决方案，没有大惊小怪。

# ms-access-2010 - Access 2010 数据宏导致表单无缘无故刷新

> ID：16112898
> 
> 赞同：0
> 
> 时间：2013-04-19T20:21:31.610
> 
> 标签：ms-access-2010

我想将此作为错误报告给 Microsoft，但想知道是否有其他人遇到过这个问题。

++++

这是 Access 2010 数据宏的一个非常有趣且晦涩的问题。

问题是在表上触发更新前的数据宏会导致不必要的和不必要的表单刷新。刷新正在清除表单上多个多选列表框中的所有选择。我希望选择保留。在添加数据宏之前，表单就像我想要的那样工作（不清除 mslb 选择）。

重现此问题。

这发生在拆分/前端 - 后端场景中。正面和背面都是 Access 2010 文件。

在后端 ACCDB... 创建一个表“项目”，其中包含 ID 和描述列以及一个 date_updated 列。在此表的更新前放置一个数据宏，将“date_updated”字段设置为 now()。

在前端 ACCDB... 与 Items 表链接...

现在创建一个未绑定到任何表的空白表单。在表单上创建一个未绑定的多选列表框，并通过任何其他表或使用值列表填充（不管行源是什么），它可以绑定或取消绑定 - 没关系。

*   现在请注意，如果您运行表单，在列表框中选择一些项目，然后按 F5（“刷新”），您的列表框选择将按预期清除。这只是为了证明刷新表单会清除列表框选择。*

现在在表单上创建一个按钮。在这个按钮后面，放这样的 VBA 代码。

docmd.runsql "insert into Items (Description) values ('test')" （任何将行插入到 items 表中的有效 sql 语句）

打开表格。

选择列表框中的几个项目。

按下按钮。您将看到表单已刷新，因此您会丢失列表框选择。

关闭窗体，现在从 Items 表中删除数据宏。

打开表单，选择列表框中的项目，按下按钮。

现在没有数据宏，表单不会刷新，选择会保留。

++++++++++++++++++++

底线：由于某种原因，在与表单完全无关的表上触发的数据宏（但由表单后面的代码触发）会导致表单刷新。

禁用数据宏，表单不会刷新。

为什么后端 ACCDB 文件上的数据宏...会导致前端刷新表单？请记住，表单与表格或数据宏无关。

这迫使我放弃我的数据宏。我不认为这在 Access 2010 中是有意或期望的行为。

我很想得到任何人的确认，这是一个问题！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T21:01:47.740

当`Before Change`数据宏到位且列表框`Multi Select`设置为`Extended`. 在相同条件下，如果其设置为，则**不会**破坏列表框选择。（我注意到 when设置为then [F5] 也不会清除选择。）`Multi Select``Simple``Multi Select``Simple`

# refinerycms - 页面部分未显示在后端，refinerycms

> ID：16112899
> 
> 赞同：0
> 
> 时间：2013-04-19T20:21:35.933
> 
> 标签：refinerycms

突然我在主页视图模板中定义的页面部分没有显示，内容在前端看起来很好但是当我尝试编辑内容时，它看起来是空的，我创建的自定义页面部分没有显示。

我没有收到任何类型的错误，所以我不知道在哪里看。

有人可以指出我正确的方向吗？

JJ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-06T01:33:23.827

首先确保在 initializers/refinery 下的 pages.rb 允许配置新的页面部分（config.new_page_parts = true）。

其次，尝试创建一个不同名称的新数据库，更改您的 database.yml 文件以连接到新数据库（可能正在开发中），然后运行迁移。或者创建一个新数据库并从最后一个已知的良好版本恢复它。如果更改数据库后您的内容在前端和后端都可见，那么一切都会好起来的。

我最近遇到了类似的问题，Refinerycms 会在页面视图中提供内容，但不会在管理布局中提供内容。它发生在我通过从共享存储库克隆来恢复我的应用程序代码之后。不知道为什么，但恢复早期版本的数据库修复了它。

# arrays - @a[-@a..-2] 是什么意思？

> ID：16112906
> 
> 赞同：2
> 
> 时间：2013-04-19T20:22:18.480
> 
> 标签：arrays, perl

为什么第三个`print`失败？

```
my @a = (0,1,2,3); 
print @a[-@a..-2];  # works
print @a[0..2];     # works
print @a[0..-2];    # prints nothing 
```

我不清楚`-@a`这个`@a[-@a..-2]`陈述中使用的含义。这是一种特殊的语法吗？除了`$#a`例如，这种特殊语法还提供了什么（如果有的话）？是否是某种糖（这很奇怪，因为它只短了一个字符），其中子索引中使用的数组的符号表示“该数组的长度”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:26:43.033

第 3 次`print`不打印任何内容，因为根据`perldoc perlop`：

> 如果左值大于右值，则返回空列表。

另见`perldoc B::Deparse`：

```
$ perl -MO=Deparse code.pl
my(@a) = (0, 1, 2, 3);
print @a[-@a .. -2];
print @a[0..2];
print @a[()]; 
```

我相信`print @a[-@a..-2];`“有效”，因为它真的很像`@a[-4 .. -2]`. 根据`perldoc perldata`：

> 负下标从末尾检索其值。

因此，3 位于索引 -1，2 位于索引 -2，1 位于索引 -3，0 位于索引 -4。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-19T20:30:52.903

没什么特别的`-@a`。在标量上下文中，`@a`返回数组中元素的数量，因此`-@a`返回该数字的负数。例如，如果`@a`包含元素、`@a`is`4`和`-@a`is `-4`。

因此，对于具有四个元素的数组，
`@a[-@a..-2]`表示`@a[-4..-2]`，
表示`@a[-4,-3,-2]`，
表示“从末尾开始的第 4 个元素，从末尾开始的第 3 个元素，从末尾开始的第 2 个元素”，
表示“元素 0、1 和 2” .

# java - 为什么我们不能组合所有的构造函数，为什么在典型的继承情况下必须有三个重载的构造函数？

> ID：16112908
> 
> 赞同：-4
> 
> 时间：2013-04-19T20:22:24.733
> 
> 标签：java, inheritance

```
public class CircleGeometricObject extends GeometricObject  {

    private double radius;

    public CircleGeometricObject() {}
    public CircleGeometricObject(double radius) {
        this. radius = radius;
    }
    public CircleGeometricObject(double radius, String color, boolean filled) {
        this. radius = radius;
        setColor(color);
        setFilled( filled);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T20:36:16.997

如果您想减少代码重复，您可以执行以下操作（尽管添加一些空值检查）。对于您的示例，它可能超出了顶部，但对于具有大量代码的构造函数来说，减少重复可能很有用。

```
public class MyClass {
    private Double radius;

    public MyClass() {
        this(null, null, null);
    }

    public class MyClass(Double radius) {
        this(radius, null, null)
    }

    public class MyClass(Double radius, String colour, boolean filled) {
        this.radius = radius;
        setColour(colour);
        setFilled(filled);
    }
} 
```

** 编辑将 double 更改为 Double 以允许 null

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:46:05.483

我不确定是否能正确理解这个问题。你问为什么你必须*重写*GeometricObject 的构造函数？

以下代码编译不是强制性的：

```
public class CircleGeometricObject extends GeometricObject
{
private double radius;

public CircleGeometricObject(double radius, String color, boolean filled)
{
    this.radius = radius;
    setColor(color);
    setFilled(filled);
}
} 
```

您实现所需的构造函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:59:44.383

不得不创建一个测试用例，因为它已经很长时间了，而且这总是一种模糊的区域：

```
public class ConstrTest {
    protected String fieldA;
    protected String fieldB;
    public static void main(String[] argV) {
        ConstrTestSub sub1 = new ConstrTestSub("111", "222");
        sub1.print();
        // ConstrTestSub sub2 = new ConstrTestSub();
        // sub2.print();
    }
    public ConstrTest() {
        this("ABC","XYZ");
    }
    public ConstrTest(String a) {
        this(a, "YYY");
    }
    public ConstrTest(String a, String b) {
        fieldA = a;
        fieldB = b;
    }
    public void print() {
        System.out.println("fieldA = " + fieldA + ", fieldB = " + fieldB);
    }
}

class ConstrTestSub extends ConstrTest {
    private String fieldC;
    public ConstrTestSub(String a, String b) {
        super(a, b);
        fieldC = "QQQ";
    }
    public void print() {
        System.out.println("fieldA = " + fieldA + ", fieldB = " + fieldB + ", fieldC = " + fieldC);
    }
} 
```

上面的代码编译并运行良好，并且 ConstTestSub 构造函数适当地执行相应的版本（即使没有显式调用`super`它也会这样做）。`super`

但是，如果您取消注释`new ConstTestSub`main 中的第二个，它将不会编译，因为`()`未定义构造函数的版本。

所以，***如果***你要定义你的构造函数，并且***如果***你需要多个表单，你必须定义所有你需要的表单。（当然，如果足够的话，它们可以级​​联。）

# javascript - JavaScript 函数未定义

> ID：16112911
> 
> 赞同：1
> 
> 时间：2013-04-19T20:22:53.717
> 
> 标签：javascript, html, undefined, object-expected

我有一个这样声明的html元素：

```
<div id="taskImage" runat="server">
   <a href="javascript:void(0);" onclick="switchViews('div<%# Eval("proId") %>', 'one');">
      <img id='imgdiv<%# Eval("proId") %>' alt="Click to show/hide tasks" border="0" src="..."/>
   </a>
</div> 
```

并且javascript函数switchViews被声明为post-html：

```
function switchViews(obj, row) {

      var div = document.getElementById(obj);
    var img = document.getElementById('img' + obj);

    if (div.style.display == "none") {
        div.style.display = "inline";

        img.src = "../../images/icons/delete.png";

    }
    else {
        div.style.display = "none";

        img.src = "../../images/icons/add.png";

    }

} 
```

当我单击 html 元素时，我得到一个 JS 错误，说“对象已执行”，并且在 google chrome 脚本调试器中它说 switchViews 未定义。为什么它会认为 switchViews 是未定义的，我将如何修复它？作为记录，我已经使用在 html 之前声明的 javascript 以及在 href 属性中调用 switchViews 进行了尝试，但结果都是一样的。

**编辑：**清除一些东西，通过 post-html 和 pre-html 我的意思是在我写出 html 元素之前和之后。所以帖子就像

```
<div>
   <!-- All my html stuff -->
<div>
<script type="text/javascript">
   <!-- All my Javascript -->
</script> 
```

而 pre 将与此相反

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:43:26.830

您的 javascript 不应在 HTML 标记之外声明。它需要在`<script>...</script>`块内声明，并且该块应放置在`<html>...</html>`块内，通常在`<head>`

所以整体结构应该是这样的：

```
<html>
  <head>
    <script>
       //your JavaScript goes here
    </script>
  </head>
  ...
</html> 
```

还有其他有效的变体，但它们都要求所有内容都在整个`<html>`标签内。

如果满足这一点，那么您几乎肯定会遇到 javascript 代码错误（如果浏览器无法解析该函数​​，则它保持未定义）或命名冲突（如果您有多个函数设置为相同的名称，或者如果您的函数与您的 html 元素之一的 id 具有相同的名称，那么它通常会导致未定义的错误）。

您必须自己检查命名冲突，但您可以通过注释掉所有代码并将其替换为以下内容来确认它是否是 javascript 错误：`alert("this works");`

然后，您可以一次将代码添加回一行，直到警报无法触发（当然，请确保始终具有匹配的括号/括号）。当它失败时，您将发现错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:17:44.453

## 问题

在`<a href="javascript:void(0);" onclick="switchViews(... etc`浏览器遇到的地方，该*函数* `switchViews`是存在还是*未定义*？

## 回答

代码定义`switchViews`出现在后面，所以当时`switchViews`是*undefined*。

## 解决方案

将您放在*HTML*`<script>`的其余部分之前，或者将事件侦听器附加到*JavaScript*而不是内联。这可以通过或使用*jQuery*来完成，并且可能需要您遍历您感兴趣的*HTMLElements*。**[`addEventListener`](https://developer.mozilla.org/en-US/docs/DOM/EventTarget.addEventListener)**

# html - 使用引导导航栏复制 github 的顶部栏行为？

> ID：16112913
> 
> 赞同：0
> 
> 时间：2013-04-19T20:22:57.820
> 
> 标签：html, css, twitter-bootstrap

Github 顶部的栏是我尝试使用 Bootstraps 导航栏类（[https://github.com/](https://github.com/)）复制的内容。

请注意栏如何延伸以填充整个浏览器窗口，而核心元素则保留在其固定列中？这就是我试图弄清楚的。

我有以下代码。

```
<body>
    <div class="container">

    <div class="row">
        <div class="span12">
            <img src="/img/logo_sml.png">
        </div>
    </div>
</div>

<div class="navbar">
    <div class="navbar-inner">
        <a class="brand" href="#">Home</a>
    </div>
</div> 
```

我的想法是，如果我关闭 main `container`，我可以放置`navbar`并让它填满浏览器的整个长度。这按计划工作，但是当我向其中添加内容时，`navbar`它们一直出现在页面的左侧（如预期的那样）。

所以！然后我想我可以开始一个新`container`的菜单项，然后将菜单项放入其中，然后出现在它们应该出现的中央列中。

包装一个菜单元素：

```
<body>
    <div class="container">

        <div class="row">
            <div class="span12">
                <img src="/img/logo_sml.png">
            </div>
        </div>
    </div>

    <div class="navbar">
        <div class="navbar-inner">
            <div class="container">
                <div class="span2">
                    <a class="brand" href="#">Home</a>
                </div>
            </div>
        </div>
    </div> 
```

刷新了页面，然后......这不起作用。有没有办法扩展 Bootstrap 的“尾巴”，`navbar`同时保持内容为主`container`？

这是添加到`contatiner`类中的结果。这些元素一直位于浏览器的左侧。

![在此处输入图像描述](https://i.stack.imgur.com/6cC0o.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:58:03.293

这是因为css有一个属性：

```
.navbar .container {
   width: auto;
} 
```

如果您放置一个具有

```
.navbar .container {
   width: 940px;
} 
```

它应该按您的预期工作。

您可以在此[JsFiddle](http://jsfiddle.net/eugip9/raT7R/)中查看使用的代码，并[以全屏查看最终结果](http://jsfiddle.net/eugip9/MRUuG/embedded/result/)。

# c# - Unity Ioc 配置错误

> ID：16112922
> 
> 赞同：0
> 
> 时间：2013-04-19T20:23:21.530
> 
> 标签：c#, inversion-of-control, unity-container

我有以下问题：

我正在使用带有 C# 的 IOC Unity。实现IOC的案例如下：

```
using Microsoft.Practices.Unity;
using Microsoft.Practices.Unity.Configuration;

    namespace TansPritr.Ioc
    {
        public class IocContainer
        {
            private static readonly IocContainer contenedor = new IocContainer();
            private readonly IUnityContainer unityContainer;

            private IocContainer()
            {
                unityContainer = new UnityContainer();
                unityContainer.LoadConfiguration("miContenedor");
            }

            public static IocContainer Contenedor
            {
                get { return contenedor; }
            }
            /// <summary>
            ///   Create an instance of an object which implements TServicio.
            /// </summary>
            /// <typeparam name = "TServicio">Type of service which we want to resolve</typeparam>
            /// <returns></returns>
            public TServicio Resolver<TServicio>() where TServicio : class
            {
                return unityContainer.Resolve<TServicio>();
            }
        }
    } 
```

我的 App.Config 如下：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
        <section name="exceptionHandling" type="Microsoft.Practices.EnterpriseLibrary.ExceptionHandling.Configuration.ExceptionHandlingSettings, Microsoft.Practices.EnterpriseLibrary.ExceptionHandling, Version=5.0.414.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" requirePermission="true" />
      <section name="unity" type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection, Microsoft.Practices.Unity.Configuration"/>
    </configSections>
  <unity>
    <container>
      <register type="TransPritr.Interfaz.INegocio, TransPritr.Interfaz" mapTo="TransPritr.Buisness.Negocio, TransPritr.Buisness"/>
      <register type="TransPritr.Interfaz.ISqlServer,TransPritr.Interfaz" mapTo="TransPritr.DataAcces.SqlServer, TransPritr.DataAcces"/>

    </container>
  </unity>
</configuration> 
```

现在例如该类`Negocio`如下：

```
using TransPritr.Interfaz;

namespace TransPritr.Buisness
{
    public class Negocio : INegocio
    {
        //private Collection<string[]> GetAllTransPritr()
        //{
        //    //var dataControl = IocContainer.Contenedor.Resolver<ISqlServer>();
        //   // return dataControl.GetAllTransPritr();
        //    return new Collection<string[]>();
        //}
        //private void CreateFile(Collection<string[]> lista)
        //{
        //    var filename = ConfigurationManager.AppSettings["FileName"];
        //    StreamWriter write = new StreamWriter(filename);
        //    int cont = 1;
        //    foreach (var linea in lista)
        //    {

        //        string temp = cont.ToString() + "|";
        //        foreach(var texto in linea)
        //        {
        //            temp += texto + "|";
        //        }
        //        write.WriteLine(temp);
        //    }
        //}
        public void Load()
        {
            //var lista = GetAllTransPritr();
           // CreateFile(lista);
        }
    }
} 
```

它的界面是：

```
namespace TransPritr.Interfaz
{
    public interface INegocio
    {
        void Load();
    }
} 
```

我的问题是，当我尝试`Negocio`通过 IOC 调用类时`var interfaz = IocContainer.Contenedor.Resolver<INegocio>();`，它给了我以下问题：

```
> No se controló System.TypeInitializationException   Message=Se produjo
> una excepción en el inicializador de tipo de
> 'TansPritr.Ioc.IocContainer'.   Source=TansPritr.Ioc  
> TypeName=TansPritr.Ioc.IocContainer   StackTrace:
>        en TansPritr.Ioc.IocContainer.get_Contenedor()
>        en TransPritr.Program.Main(String[] args) en D:\Altiuz\Beny\TRANS_PRITR\TRANS_PRITR\TransPritr\Program.cs:línea 14
>        en System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args)
>        en System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySecurity, String[] args)
>        en Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
>        en System.Threading.ThreadHelper.ThreadStart_Context(Object state)
>        en System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
>        en System.Threading.ThreadHelper.ThreadStart()   InnerException: System.ArgumentNullException
>        Message=El valor no puede ser nulo. Nombre del parámetro: section
>        Source=Microsoft.Practices.Unity
>        ParamName=section
>        StackTrace:
>             en Microsoft.Practices.Unity.Utility.Guard.ArgumentNotNull(Object
> argumentValue, String argumentName) en
> e:\Builds\Unity\UnityTemp\Compile\Unity\Unity\Src\Utility\Guard.cs:línea
> 33
>             en Microsoft.Practices.Unity.Configuration.UnityContainerExtensions.LoadConfiguration(IUnityContainer
> container, UnityConfigurationSection section, String containerName) en
> e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\UnityContainerExtensions.cs:línea
> 35
>             en Microsoft.Practices.Unity.Configuration.UnityContainerExtensions.LoadConfiguration(IUnityContainer
> container, String containerName) en
> e:\Builds\Unity\UnityTemp\Compile\Unity\Unity.Configuration\Src\UnityContainerExtensions.cs:línea
> 52
>             en TansPritr.Ioc.IocContainer..ctor() en D:\Altiuz\Beny\TRANS_PRITR\TRANS_PRITR\TansPritr.Ioc\IocContainer.cs:línea
> 14
>             en TansPritr.Ioc.IocContainer..cctor() en D:\Altiuz\Beny\TRANS_PRITR\TRANS_PRITR\TansPritr.Ioc\IocContainer.cs:línea
> 8
>        InnerException: 
```

问题是我基于一个早期的项目，它*确实*有效，但现在我在一个新项目中实现它，它不起作用。我不知道为什么，需要帮助。

* * *

注意：我将其翻译成英文，要查看原文，请转到下面的“已编辑”链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:47:48.837

我将从：

*   确保为您的*Unity版本使用正确的配置（在 .config 中）*
    *   是`configuration.Unity.container.register`有效元素吗？
    *   尝试使用：[企业库配置工具](http://msdn.microsoft.com/en-us/library/ff664633%28v=pandp.50%29.aspx#LaunchStandaloneEditor "企业库配置工具")
*   确保所有必需的依赖项都是可发现的。

**参考**

*   [企业库配置工具](http://msdn.microsoft.com/en-us/library/ff664633%28v=pandp.50%29.aspx#LaunchStandaloneEditor "企业库配置工具")
*   [输入配置信息](http://msdn.microsoft.com/en-us/library/ff647427.aspx "MSDN：输入配置信息")
*   [MSDN：统一容器](http://msdn.microsoft.com/en-us/library/ff647202.aspx "MSDN：统一容器")

# delphi - 如何在 Delphi 中以编程方式创建带有几个组件的表单

> ID：16112924
> 
> 赞同：11
> 
> 时间：2013-04-19T20:23:25.567
> 
> 标签：delphi, delphi-7

我正在使用 Delphi 7，并且正在尝试以编程方式创建表单。这是我的表单类存根：

```
unit clsTStudentInfoForm;

interface

    uses Forms;

    type
        TStudentInfoForm = class (TForm)

        end;

implementation

end. 
```

我的主表单上还有一个按钮（这只是一个常规表单，应该在运行时创建并显示上面的表单），单击它会创建学生表单并将其显示为模式窗口。它确实显示了表格，但上面没有任何内容。您唯一能做的就是单击窗口右上角的关闭按钮将其关闭。

```
procedure TLibraryForm.btnShowStudentIfoFormClick(Sender: TObject);
var
    f : TStudentInfoForm;
begin
    f := TStudentInfoForm.CreateNew(Self);
    f.ShowModal;
    f.Free;
    f := nil;
end; 
```

![在此处输入图像描述](https://i.stack.imgur.com/YYuzC.png)

我不知道如何将组件添加到以编程方式创建的表单中（不是在运行时，而是在源代码中）。你能帮我写一些代码，在学生表单中添加一个 Okay 按钮，并设置标题和表单的高度和宽度（代码必须写在学生表单文件中）吗？

任何建议和示例将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-19T21:41:01.387

默认情况下（即：使用所有默认 IDE 配置设置），会自动创建新设计的表单。只会显示主要形式，而次要形式可以显示：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  Form2.Show;
  Form3.ShowModal;
end; 
```

禁用此自动创建选项是一种很好的常见做法。转到：工具>（环境）选项>（VCL）设计器>模块创建选项，然后禁用/取消选中*自动创建表单和数据模块*选项。

相反，仅在需要时创建（已经设计好的）表单：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Form: TForm2;
begin
  Form := TForm2.Create(Self);
  Form.Show;
end; 
```

这也说明不需要辅助表单的全局变量，最好尽快删除它们以防止错误使用：

```
type
  TForm2 = class(TForm)
  end;

//var
//  Form2: TForm2;  << Always delete these global variable

implementation 
```

* * *

如果您不想使用表单设计器设置此类辅助表单，则需要在运行时在代码中创建所有控件。如下：

```
unit Unit2;

interface

uses
  Classes, Forms, StdCtrls;

type
  TForm2 = class(TForm)
  private
    FButton: TButton;
  public
    constructor CreateNew(AOwner: TComponent; Dummy: Integer = 0); override;
  end;

implementation

{ TForm2 }

constructor TForm2.CreateNew(AOwner: TComponent; Dummy: Integer = 0);
begin
  inherited CreateNew(AOwner);
  FButton := TButton.Create(Self);
  FButton.SetBounds(10, 10, 60, 24);
  FButton.Caption := 'OK';
  FButton.Parent := Self;
end;

end. 
```

如您所见，我使用了`CreateNew`构造函数。这对于衍生品是[必要的：](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Forms.TCustomForm.CreateNew)`T(Custom)Form`

> 使用`CreateNew`而不是`Create`创建表单，而不使用关联的 .DFM 文件对其进行初始化。`CreateNew`如果`TCustomForm`后代不是`TForm`对象或 的后代，则始终使用`TForm`。

对于所有其他容器控件（例如`TPanel`、`TFrame`等），您可以覆盖默认构造函数`Create`。

按如下方式调用此表格：

```
procedure TForm1.Button1Click(Sender: TObject);
var
  Form: TForm2;
begin
  Form := TForm2.Create(nil);
  try
    Form.ShowModal;
  finally
    Form.Free;
  end;
end; 
```

或者：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  FForm := TForm2.CreateNew(Application);
  FForm.Show;
end; 
```

在最后一种情况下，表单在关闭时并没有被释放而是隐藏，因此您需要将其引用存储在私有字段 ( `FForm`) 中并稍后释放它。或者您可以自动执行此操作：

```
unit Unit2;

interface

uses
  Classes, Forms, StdCtrls;

type
  TForm2 = class(TForm)
  private
    FButton: TButton;
    procedure FormClose(Sender: TObject; var Action: TCloseAction);
  public
    constructor CreateNew(AOwner: TComponent; Dummy: Integer = 0); override;
  end;

implementation

{ TForm2 }

constructor TForm2.CreateNew(AOwner: TComponent; Dummy: Integer = 0);
begin
  inherited CreateNew(AOwner);
  OnClose := FormClose;
  FButton := TButton.Create(Self);
  FButton.SetBounds(10, 10, 60, 24);
  FButton.Caption := 'OK';
  FButton.Parent := Self;
end;

procedure TForm2.FormClose(Sender: TObject; var Action: TCloseAction);
begin
  Action := caFree;
end;

end. 
```

现在，您可以在不存储引用的情况下调用它：

```
procedure TForm1.Button1Click(Sender: TObject);
begin
  TForm2.CreateNew(Self).Show;
end; 
```

* * *

您是否通过 、`Self`或`Application`作为`nil`新表单的所有者取决于您希望何时自动销毁它，以防您不手动或通过`OnClose`事件释放它。使用

*   `Self`: 当调用表单被销毁时，将销毁新表单。这在调用表单不是主表单时特别有用。
*   `Application`: 将在应用程序结束时销毁新表单。这将是我的首选。
*   `nil`: 不会破坏新表单并在应用程序结束时导致内存泄漏。但是，当 Windows 终止进程时，内存最终会被释放。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-19T20:33:26.340

动态创建带有控件的模态表单很容易：

```
procedure CreateGreetingForm;
var
  frm: TForm;
  lbl: TLabel;
  edt: TEdit;
  btn: TButton;
begin

  frm := TForm.Create(nil);
  try
    lbl := TLabel.Create(frm);
    edt := TEdit.Create(frm);
    btn := TButton.Create(frm);
    frm.BorderStyle := bsDialog;
    frm.Caption := 'Welcome';
    frm.Width := 300;
    frm.Position := poScreenCenter;

    lbl.Parent := frm;
    lbl.Top := 8;
    lbl.Left := 8;
    lbl.Caption := 'Please enter your name:';

    edt.Parent := frm;
    edt.Top := lbl.Top + lbl.Height + 8;
    edt.Left := 8;
    edt.Width := 200;

    btn.Parent := frm;
    btn.Caption := 'OK';
    btn.Default := true;
    btn.ModalResult := mrOk;
    btn.Top := edt.Top + edt.Height + 8;
    btn.Left := edt.Left + edt.Width - btn.Width;

    frm.ClientHeight := btn.Top + btn.Height + 8;
    frm.ClientWidth := edt.Left + edt.Width + 8;

    if frm.ShowModal = mrOk then
      ShowMessageFmt('Welcome, %s', [edt.Text]);

  finally
    frm.Free;
  end;

end; 
```

# android - Facebook 的 Android 密钥哈希

> ID：16112925
> 
> 赞同：0
> 
> 时间：2013-04-19T20:23:31.073
> 
> 标签：android, facebook, cordova

我正在尝试获取 hashkey，以便按照以下步骤将我的 phonegap for android 应用程序与 facebook 连接起来。

1) 从以下位置下载 Openssl：[http ://code.google.com/p/openssl-for-windows/downloads/list](http://code.google.com/p/openssl-for-windows/downloads/list)

2）在C盘创建一个openssl文件夹

3) 将 Zip 文件解压到 openssl 文件夹中

4）在我的情况下从.android文件夹（C：\ Users \ SYSTEM.android）复制文件debug.keystore并在我的情况下粘贴到JDK bin文件夹（C：\ Program Files \ Java \ jdk1.6.0_05 \ bin）

5) 打开命令提示符并在我的例子中给出 JDK Bin 文件夹的路径（C:\Program Files\Java\jdk1.6.0_05\bin）。

6) 复制代码并点击 enter keytool -exportcert -alias androiddebugkey -keystore debug.keystore > c:\openssl\bin\debug.txt

7) 现在你需要输入密码，Password = android。

8) 在 openssl Bin 文件夹中查看你会得到一个名为 debug.txt 的文件

9）现在您可以重新启动命令提示符或使用现有的命令提示符

10) 来到C盘，给出openssl Bin文件夹的路径

11) 复制以下代码并粘贴 openssl sha1 -binary debug.txt > debug_sha.txt

12) 你将在 openssl bin 文件夹中获得 debug_sha.txt

13) 再次复制以下代码并粘贴 openssl base64 -in debug_sha.txt > debug_base64.txt

14) 你将在 openssl bin 文件夹中获得 debug_base64.txt

15) 打开 debug_base64.txt 文件这是您的密钥哈希。

但是每当我执行第 13 步时，我都会收到错误消息

openssl 已停止工作。一个问题导致程序停止正常工作。windows 将关闭程序并通知您是否有可用的解决方案。谁能帮帮我，我对这个android世界很陌生...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T23:30:14.163

打开命令提示符并转到 java keytool 所在的 Java 目录。在您的情况下，它似乎是：`C:\Program Files\Java\jdk1.6.0_05\bin`。

现在，在命令提示符下，键入：

```
keytool -exportcert -alias androiddebugkey -keystore [PATH TO KEYSTORE] | [PATH TO OPENSSL] sha1 -binary | [PATH TO OPENSSL] base64 
```

在哪里，您应该将 [PATH TO KEYSTORE] 替换为 android debug.keystore 的目录路径。例如：

```
C:\Users\Chris\.android\debug.keystore 
```

您应该将 [PATH TO OPENSSL] 替换为 openssl 应用程序文件的目录路径。例如：

```
C:\OpenSSL-Win32\bin\openssl 
```

现在，当您在输入整行代码后按回车键时，它会要求输入密码，即：`android`

如果您已成功完成所有操作，那么它将在命令提示符中为您提供一个字符串，您可以复制、粘贴和使用该字符串。如果它不要求输入密码，则检查目录路径。

# linux - Siege 启动错误 - 无法连接到套接字

> ID：16112926
> 
> 赞同：4
> 
> 时间：2013-04-19T20:23:36.587
> 
> 标签：linux, sockets, networking, ubuntu, load-testing

我正在运行 64x Ubuntu 12.10 并尝试使用 siege 2.70。问题是当我尝试测试我的服务器的 IP 地址或例如 google.com ip - 173.194.39.130

```
siege -g http://173.194.39.130 
```

我收到以下错误：

```
[error] socket: unable to connect sock.c:222: Connection refused 
```

就是这样。

当我做

```
siege -g http://www.google.com 
```

我得到相同的错误和 200 有效响应。

什么可能导致问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T19:39:19.060

Siege 的早期版本中存在一个错误，该错误会阻止在某些系统上使用 IP 地址。通过下载和编译最新版本的 siege (>3) 应该可以解决这个问题。

# c# - SSIS脚本组件转换C#代码日期转换

> ID：16112931
> 
> 赞同：2
> 
> 时间：2013-04-19T20:23:47.317
> 
> 标签：c#, ssis, type-conversion

我正在创建 SSIS 包以导入大型固定宽度文本文档，并且需要转换各种字段。一个这样的字段代表日期并且是 8 个字符宽。格式为“yyyyMMdd”，如下所示：

```
SomeDateField
20130415
20110122
19891023 
```

但是，有些字段只有空格，有些字段会全为零 00000000。不能转换为日期的字段应返回 NULL 值。我不能替换像 1/1/1900 这样的日期。

在徒劳地尝试将其转换为带有表达式的日期字段后，我转向了 C# Script Transformation。

我的输入列称为 sSoldDate 并且是只读的。我已经配置了一个名为 SoldDate 的 DT-DBDATE 数据类型的输出。

我想出的代码是：

```
DateTime varDate;
        bool isParsed;

        isParsed = DateTime.TryParseExact(Row.sSoldDate, "yyyyMMdd", CultureInfo.InvariantCulture, DateTimeStyles.None, out varDate);
        if (isParsed)
        {
            Row.SoldDate = varDate;
        }
        else
        {
            Row.SoldDate_IsNull = true;
        } 
```

然后，我通过在同一脚本组件中重复该代码并替换其他字段名称来跟进文本导入中的其他日期字段，例如这个字段。但是，我不必重复变量声明。

尽管这可行，但我将不得不重复这个过程很多，并想确保这是执行这种检查和转换的最方便的方法。有没有更简洁的方法来实现同样的目标？

有没有更高效的方法？

是否有一些简单的方法可以将逻辑封装在自定义方法或函数中，从而使这个过程更容易？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T16:53:33.240

大卫，

我过去做过的一件事是使用您反复使用的代码创建（或让某人为您创建）一个 .NET 程序集。您应该能够在您编写的任何脚本中引用此程序集。

我已将它用于 SQL Server 2008\2008 R2 BIDS。我还没有尝试过 2012 BIDS。如果您需要更多信息，请告诉我。我可能会为此写一篇博客。

# c++ - C++多个未定义引用错误MinGW

> ID：16112933
> 
> 赞同：0
> 
> 时间：2013-04-19T20:23:58.687
> 
> 标签：c++, mingw, undefined, undefined-reference

我有添加`graphics.h`和`winbgim.h`库，还有`libbgi.a`MinGW。它们都可以在[这里](http://www.codecutter.net/tools/winbgim)找到。存档有文件夹，这些文件夹指示它们应该放在的目录`/MinGW`。我还添加`-lbgi -lgdi32 -lcomdlg32 -luuid -loleaut32 -lole32`了额外的链接选项，如以下链接中所述：http: [//www.infobits.ro/medii-mingw-developer-studio3.php](http://www.infobits.ro/medii-mingw-developer-studio3.php)。（对不起，它是罗马尼亚语，但图像很容易理解）。
当我尝试运行以下代码时：

```
#include <graphics.h>
#include <iostream>

using namespace std;

int main() {
    int gdriver = DETECT, gmode;
    initgraph(&gdriver, &gmode, "");
    if (graphresult()) {
        cout<<"Tentativa nereusita ...";
    }
    else {
        cout<<"Everything is working!";
        setcolor(RED);
        moveto(0,0);
        lineto(getmaxx(),getmaxy());
    }
    cout<<endl<<"Press anything to close";
    getch();
    return 0;
} 
```

我收到带有“未定义参考错误”的错误日志。错误日志是：

```
C:\OJI\MinGWStudio\MinGW\bin\..\lib\gcc-lib\mingw32\3.3.1\..\..\..\libbgi.a(winbgi.o)(.text+0xbd2):winbgi.cxx: undefined reference to `std::string::_Rep::_S_empty_rep_storage'
C:\OJI\MinGWStudio\MinGW\bin\..\lib\gcc-lib\mingw32\3.3.1\..\..\..\libbgi.a(winbgi.o)(.text+0x1b5e):winbgi.cxx: undefined reference to `std::string::_Rep::_S_empty_rep_storage'
C:\OJI\MinGWStudio\MinGW\bin\..\lib\gcc-lib\mingw32\3.3.1\..\..\..\libbgi.a(winbgi.o)(.text+0x1dcc):winbgi.cxx: undefined reference to `__gnu_cxx::__exchange_and_add(int volatile*, int)'
C:\OJI\MinGWStudio\MinGW\bin\..\lib\gcc-lib\mingw32\3.3.1\..\..\..\libbgi.a(winthread.o)(.text+0x522):winthread.cxx: undefined reference to `std::string::_Rep::_S_empty_rep_storage'
C:\OJI\MinGWStudio\MinGW\bin\..\lib\gcc-lib\mingw32\3.3.1\..\..\..\libbgi.a(winthread.o)(.text+0x57e):winthread.cxx: undefined reference to `__gnu_cxx::__exchange_and_add(int volatile*, int)' 
```

任何想法？

# d3.js - 具有重复“值”的复杂数据对象 = 缺少图表条

> ID：16112939
> 
> 赞同：3
> 
> 时间：2013-04-19T20:24:31.523
> 
> 标签：d3.js

我不确定这是 d3 错误还是我做错了什么。看看以下内容：

[http://jsfiddle.net/Jakobud/SfWjB/6/](http://jsfiddle.net/Jakobud/SfWjB/6/)

```
var data = [
        { value: 20, color: 'red' },
        { value: 30, color: 'blue' },
        { value: 30, color: 'purple' }  // Same value as 2nd object
    ];

var w = 140,
    h = d3.max(data, function(d){ return d.value; }) + 30,
    barPadding = 4,
    topPadding = 1,
    bottomPadding = 20;

var svg = d3.select('#chart')
    .append('svg:svg')
    .attr('width', w)
    .attr('height', h);

var rects = svg.selectAll('rect')
    .data(data, function(d){ console.log(d); return d.value; })  // All 3 objects found here
    .enter()
    .append('rect')
    .attr('x', function(d,i){ console.log(i); return i * w / data.length + 1; })  // Last data object ignored, not placed at all
    .attr('y', function(d){ return h - d.value - topPadding - bottomPadding })
    .attr('width', w / data.length - barPadding - 3 )
    .attr('height', function(d) { return d.value })
    .attr('fill', function(d) { return d.color })
    .attr('stroke', '#333')
    .attr('stroke-width', 2);

text = svg.selectAll('text')
    .data(data, function(d){ return d.value; })
    .enter()
    .append('text')
    .text(function(d){ return d.value; })
    .attr('x', function(d,i){ return i * w / data.length + 20; })
    .attr('y', function(d,i){ return h - 0; })
    .attr("text-anchor", "middle")
    .attr("font-size", "20px")
    .attr("fill", "#333"); 
```

您可以在我的数据对象中看到，第二个和第三个对象具有相同的“值”。

当创建 svg rects 时，第三个数据对象被忽略，因此不会放置在图表中。如果您将第三个对象的值从 30 更改为 31 或其他值，您会看到该条确实出现了。但由于它与第二个对象的值相同，因此不会显示。

为什么是这样？你如何防止这种情况发生？这里的代码中会导致这种情况的原因是什么？`rects.data()`函数 see 是所有三个对象，正如您在函数中添加的 I 所看到的那样`console.log()`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T20:56:30.523

您将数据与现有数据匹配的方式导致了问题，尤其是行

```
.data(data, function(d){ return d.value; }) 
```

`value`这告诉 d3 如果它们的属性相同，您认为两个数据对象相同。这就是您的第二个和第三个对象的情况，因此只添加了第一个。如果你想要两者，你可以省略告诉 d3 如何比较数据对象的函数（因此依赖于通过数组索引匹配的默认行为），或者更改该函数以考虑例如`color`。

总而言之，您所看到的不是错误，而是功能:) 这种行为完全是预期和想要的。

# php - 无法通过被授予 manage_pages 权限的应用获取页面访问令牌

> ID：16112942
> 
> 赞同：4
> 
> 时间：2013-04-19T20:24:39.863
> 
> 标签：php, facebook-graph-api, facebook-php-sdk, facebook-apps, facebook-access-token

我正在尝试开发一个 PHP 应用程序，它可以让我通过 cronjob 在我的页面上自动发布新帖子，而我处于离线状态并且根本没有登录 Facebook。我知道**offline_access**权限早就没有了，但是[删除offline_access 权限](http://developers.facebook.com/roadmap/offline-access-removal/)一文清楚地说明了以下内容：

> **场景 5：页面访问令牌**
> 
> 当用户授予应用程序**manage_pages**权限时，应用程序能够通过查询 [User ID]/accounts Graph API 端点来获取用户管理的页面的页面访问令牌。启用迁移后，当使用短期用户访问令牌查询此端点时，获得的页面访问令牌也是短期的。
> 
> 使用端点和前面解释的步骤将短期用户访问令牌交换为长期访问令牌。通过使用长期用户访问令牌，查询**[User ID]/accounts**端点现在将为用户管理的页面提供不会过期的页面访问令牌。这也适用于使用通过已弃用的**offline_access** 权限获得的未过期用户访问令牌进行查询时。

...这让我觉得像我想的那样的自动化 PHP 解决方案确实可以设计。所以我继续创建了一个新的应用程序并授予了**manage_pages**权限以及**publish_actions**权限。

但是我的代码：

```
<?php
require_once("sdk/facebook.php");

$config = array();
$config['appId'] = MY_APP_ID;
$config['secret'] = MY_APP_SECRET;
$config['fileUpload'] = false; // optional

$facebook = new Facebook($config);

$accountID = MY_ACCOUNT_ID;
$pages = $facebook->api("/$accountID/accounts/");
var_dump($pages);
?> 
```

...返回以下错误：

> **致命错误：**未捕获的 OAuthException：请求此资源需要用户访问令牌。

我究竟做错了什么？

更令人困惑 - 同时，这里的这段代码毫无问题地向我的 Wall 发布状态更新（我仍然没有登录 Facebook 或任何东西）

```
<?php
require_once("sdk/facebook.php");

$config = array();
$config['appId'] = MY_APP_ID;
$config['secret'] = MY_APP_SECRET;
$config['fileUpload'] = false; // optional

$token_url =    "https://graph.facebook.com/oauth/access_token?" .
                "client_id=" . $config['appId'] .
                "&client_secret=" . $config['secret'] .
                "&grant_type=client_credentials";
$app_token = str_replace('access_token=','',file_get_contents($token_url));

$facebook = new Facebook($config);

$args = array(
    'access_token'  => $app_token,
    'message'       => 'test post via app access token'
);
$accountID = MY_ACCOUNT_ID;
$post_id = $facebook->api("/$accountID/feed", "post", $args);
?> 
```

...如果我这样做

```
$post_id = $facebook->api("/$myPageID/feed", "post", $args); 
```

...相反，我得到：

> **致命错误：**未捕获的 OAuthException：（＃200）用户尚未授权应用程序执行此操作

**解决方案**

*在Mohammed Alghbari 先生*的帮助下，我在这个问题上取得了合理的进展，最终找到了解决方案。

正如他所建议的，我需要先生成一个用户访问令牌，发出这样的请求：

> [https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN](https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN)

为了检索实际的页面访问令牌并发布到页面。所以我意识到当我通过 PHP SDK 生成的登录链接登录时，一个 USER_ACCESS_TOKEN 为我存储在一个 $_SESSION 变量中。我拿了那个令牌，向 发出了请求`https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN`，检索了 PAGE_ACCESS_TOKEN 并使用它来成功地将测试消息发布到我的页面。

然而，我随后退出并发出了一个`session_destroy();`令我惊讶的是，当我这样做的那一刻，我的代码`A user access token is required to request this resource.`又开始抛出异常。我非常沮丧。

然后，我决定手动请求`https://graph.facebook.com/MY_ACCOUNT_ID/accounts/?MY_USER_ACCESS_TOKEN`，看看会发生什么。更令我惊讶的是 - GRAPH API 接受了 USER_ACCESS_TOKEN 并返回了所有有效的页面令牌。我很沮丧为什么我在 SDK 中遇到异常，但是当我直接向 GRAPH API 发出请求时没有错误，所以我决定开始调试**base_facebook.php**。我使用的 PHP SDK 是 3.2.2 版。

经过数小时的搜索，结果发现位于**base_facebook.php**第 899 行的这段代码无缘无故地抛出异常（有点）

```
if (!isset($params['access_token'])) {
  $params['access_token'] = $this->getAccessToken();
} 
```

当我注释掉该行时`$params['access_token'] = $this->getAccessToken();`，我的 PHP SDK 请求开始再次返回有效令牌。

奇怪的。我想知道这是 PHP SDK 中的错误，还是我的代码有问题。我的最终代码大致如下：

```
<?php
require_once("sdk/facebook.php");

$config = array();
$config['appId'] = MY_APP_ID;
$config['secret'] = MY_APP_SECRET;
$config['fileUpload'] = false; // optional

$facebook = new Facebook($config);

$token = MY_USER_TOKEN; // extracted from $_SESSION

$response = $facebook->api("/MY_ACCOUNT_ID/accounts/?access_token=$token");

// code that extracts the page token from $response goes here

$args = array(
    'access_token'  => MY_PAGE_TOKEN,
    'message'       => 'test post via app access token'
);

$post_id = $facebook->api("/MY_PAGE_ID/feed", "post", $args); // It works!!
?> 
```

**编辑#2**

经过进一步的测试，事实证明，您可以修改第 899 行，而不是注释掉

```
$facebook->api("/MY_ACCOUNT_ID/accounts/?access_token=MY_ACCESS_TOKEN'); 
```

到

```
$facebook->api("/MY_ACCOUNT_ID/accounts/", 'get', array('access_token' => 'MY_ACCESS_TOKEN')); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T21:07:19.020

马林特，

要与页面交互，您需要使用页面访问令牌（检查访问令牌类型：[访问令牌类型](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)）

**类型为：用户访问令牌、页面访问令牌、应用访问令牌**

可以使用如下图生成：

```
https://graph.facebook.com/me/accounts?access_token=USER_ACCESS_TOKEN 
```

上图将为您提供您管理的页面列表以及详细信息（页面名称、ID、访问令牌）

您可以测试页面访问令牌以使用图表获取您的页面供稿（替换`Page_ID`为您的页面 id 和`PAGE_ACCESS_TOKEN`从上面的图表生成的页面访问令牌）

```
https://graph.facebook.com/PAGE_ID/feed?access_token=PAGE_ACCESS_TOKEN&message=Testing 
```

有关更多信息和示例：[登录为页面](https://developers.facebook.com/docs/howtos/login/login-as-page/)

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T21:05:18.093

请授予**status_update**，正如我在这里解释的那样，[为什么发布到 facebook 页面会产生“用户尚未授权应用程序”](https://stackoverflow.com/questions/15796138/why-does-posting-to-facebook-page-yield-user-hasnt-authorized-the-application/15943045#15943045)

# c# - AppHarbor - /order/rpc.ashx(1): error ASPPARSE: Could not create type 'web.order.rpc'

> ID：16112943
> 
> 赞同：0
> 
> 时间：2013-04-19T20:24:45.017
> 
> 标签：c#, compiler-errors, appharbor

This is my first attempt at getting a project running on appharbor

The solution references a number of other project dlls. The build works locally and I am using git to push it to appharbor.

I get this message as the build fails: /order/rpc.ashx(1): error ASPPARSE: Could not create type 'web.order.rpc'.

[HttpParseException]: Could not create type 'web.order.rpc'.

at System.Web.UI.SimpleWebHandlerParser.GetType(String typeName)

at System.Web.UI.SimpleWebHandlerParser.GetTypeToCache(Assembly builtAssembly)

....

at System.Web.Compilation.BuildManagerHost.PrecompileApp(ClientBuildManagerCallback callback, List`1 excludedVirtualPaths)

at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback, Boolean forceCleanBuild)

at System.Web.Compilation.ClientBuildManager.PrecompileApplication(ClientBuildManagerCallback callback)

at System.Web.Compilation.Precompiler.Main(String[] args)

The source code is pretty simple:

namespace web.order

{

```
public class rpc : IHttpHandler

{

    public void ProcessRequest(HttpContext context)
    {
        var Response = context.Response;
        var Request = context.Request;

        Response.Expires = 0;
        Response.ContentType = "text/plain";
        Response.Write("{}");

    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }
} 
```

}

Any help would greatly be appreciated

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T01:48:19.290

好的，在预编译包含子 Web 应用程序的站点时，我遇到了与您相同的问题。

解决它的检查清单是：

1.  确保 ashx 的 dll 在 bin 目录中。
2.  如果您使用的是代码隐藏文件，请确保 cs 文件包含在文件夹 App_Code 中
3.  您可以尝试在本地编译该文件夹，以便查看是否缺少某些内容：

> c:\windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_compiler.exe -v / -p "c:\your\webs\folder" -errorstack

此命令可帮助您检查可能出现的问题。

我的情况有点不同。在远程服务器（IIS 7.5，我不使用 appharbor）中，我检查了创建项目的站点：

> c:\windows\system32\inetsrv\appcmd 列出站点

然后我检查了哪个是我想要预编译的站点的 id。在我的示例中是 5，然后我运行：

> c:\windows\Microsoft.NET\Framework64\v4.0.30319\aspnet_compiler.exe -m LM/W3SVC/5/ROOT -c -errorstack

它编译。

进行编译的另一种方法是将包含 ashx 的 dll 从子应用程序文件夹复制到主站点 bin 文件夹，但这可能会导致问题和依赖关系问题。

# android - setContentView(R.layout.main); error when start new project

> ID：16112947
> 
> 赞同：0
> 
> 时间：2013-04-19T20:24:58.317
> 
> 标签：android

I'm just starting to develop with android, and a followed a tutorial on google to get everything set up. I'm using eclipse and I have both the android sdk and the eclipse plugin installed, but when I create a new Android Project, I get an error on this line from the start.

my code :-

```
package khalid.app.fm;

import android.app.Activity;
import android.os.Bundle;
import android.R.*;

public class RadioBlancoFMActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:26:02.400

remove

```
import android.R.*; 
```

Don't import android.R.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:36:47.470

检查 AndroidManifest 是否引用了 khalid.app.fm 包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T20:30:40.483

正如@wtsang02 所说，不要导入`android.R`. 我想补充一点，`android.R`这与使用`R.id`or时不同`R.layout`。`android.R`正在引用内置于 Android 资源本身的资源。`R`引用您为应用程序设计的资源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-19T20:42:17.773

确保`project -> build automatically`处于活动状态

# .net - 如何在 ASP.NET Web API 中测试反序列化

> ID：16112954
> 
> 赞同：1
> 
> 时间：2013-04-19T20:25:47.177
> 
> 标签：.net, asp.net-web-api

编写用于反序列化 Web API 中的 JSON 对象的单元测试的正确方法是什么？

在我的应用程序中，通过查看跟踪信息，我注意到 Web API 试图通过调用 JsonMeadiaTypeFormatter.ReadFromAsync 来反序列化来自请求正文的对象参数。我试图找出问题，所以我写了这些测试。ReadTestItem 失败。另一个示例 ReadInt 通过了，所以看起来我走在正确的轨道上，但我不确定这是否是 Web API 真正在做的事情。

**编辑：代码已修复并添加了 FormatterConfig**

```
class TestClass
{
    public string Type { get; set; }
    public string Value { get; set; }
}

[TestClass]
public class FormatterTest
{
    [TestMethod]
    public void ReadTestItem()
    {
        MediaTypeFormatterCollection formatters = new MediaTypeFormatterCollection();
        FormatterConfig.RegisterGlobalFormatters(formatters);

        JsonMediaTypeFormatter formatter = formatters[0] as JsonMediaTypeFormatter;
        Stream s = GenerateStreamFromString("{ type: \"Equal\", value: \"1\" }");
        var content = new StreamContent(s);
        var logger = new Mock<IFormatterLogger>().Object;

        var task = formatter.ReadFromStreamAsync(typeof(TestClass), s, content, logger);
        TestClass result = task.Result as TestClass;
        Assert.AreEqual("Equal", result.Type);
        Assert.AreEqual("1", result.Value);
    }

    [TestMethod]
    public void TestReadInt()
    {
        MediaTypeFormatterCollection formatters = new MediaTypeFormatterCollection();
        FormatterConfig.RegisterGlobalFormatters(formatters);

        JsonMediaTypeFormatter formatter = formatters[0] as JsonMediaTypeFormatter;
        Stream s = GenerateStreamFromString("2");
        var content = new StreamContent(s);
        var logger = new Mock<IFormatterLogger>().Object;

        var task = formatter.ReadFromStreamAsync(typeof(int), s, content, logger);
        Assert.AreEqual(2, task.Result);
    }

    public Stream GenerateStreamFromString(string s)
    {
        MemoryStream stream = new MemoryStream();
        StreamWriter writer = new StreamWriter(stream);
        writer.Write(s);
        writer.Flush();
        stream.Position = 0;
        return stream;
    }
} 
```

这是格式化程序配置：

```
public class FormatterConfig
{
    public static void RegisterGlobalFormatters(MediaTypeFormatterCollection formatters)
    {
        var jsonSerializerSettings = formatters.JsonFormatter.SerializerSettings;
        jsonSerializerSettings.Converters.Add(new IsoDateTimeConverter());

        // serialize every enum as a string
        jsonSerializerSettings.Converters.Add(new Newtonsoft.Json.Converters.StringEnumConverter());

        // include null value fields
        jsonSerializerSettings.NullValueHandling = NullValueHandling.Ignore;

        // use camel case
        jsonSerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver();

        // indented formatting
        bool indent;
        Boolean.TryParse(ConfigurationManager.AppSettings["dex.indentjson"], out indent);
        formatters.JsonFormatter.Indent = indent;

        formatters.Remove(formatters.XmlFormatter);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T23:41:53.847

这种方法对我来说看起来不错。您注意到 ReadFromStreamAsync 在请求正文上被调用是正确的。现在发生了两件奇怪的事情：

*   您传入第一个测试的类型是 FilterItemDTO。但是你期望结果是一个TestClass？无论您传递给格式化程序的任何类型都是您应该期望反序列化的类型。您是否打算将 TestClass 传递给 ReadFromStreamAsync ？
*   TestClass 有成员 Type 和 Value，因此 Json.NET 将期望 JSON 中的成员“Type”和“Value”，而不是“type”和“value”。大小写很重要。但是有一种简单的方法可以使用这条线获得驼峰大小写代码：

    ```
    config.Formatters.JsonFormatter.SerializerSettings.ContractResolver = new CamelCasePropertyNamesContractResolver(); 
    ```

# sql-server-2008 - What is the Windows overhead when using SQL Server varchar vs. nvarchar?

> ID：16112958
> 
> 赞同：1
> 
> 时间：2013-04-19T20:26:00.697
> 
> 标签：sql-server-2008, entity-framework-6, varchar, nvarchar

I do not have need for foreign language characters or collation since my data is received as pure ascii.

My concern is performance in the application code, and though I have read many arguments that varchar performs better than nvarchar, they did not discuss the overhead converting back and forth between Windows Unicode and SQL Server non-Unicode varchar data?

What is the bigger impact in general - performance within SQL Server dealing with varchar vs. nvarchar, or performance in the application, converting back and forth between Unicode on the Windows side and non-Unicode on the SQL Server side? I understand there are scenarios where one would perform better than other, so my main scenario is simple text search and retrieval through a couple million records. I am using Entity Framework 6.1.3 as the DAL.

This is a concern and I would love some feedback on this from anyone having experimented or knowledgeable on this topic. Articles discussing varchar vs. nvarchar act like the SQL database is totally isolated in respect to performance and external software does not come into play. Is there in fact Unicode impedance mismatch between Windows native use of Unicode and ascii in the database, storage space and transfer speeds ignored, that negates the ascii database performance benefits? Especially in relation to EF? Thanks

# jquery - 休息查询正确但 YQL 不提取数据

> ID：16112960
> 
> 赞同：0
> 
> 时间：2013-04-19T20:26:01.623
> 
> 标签：jquery, json, xpath, yql

我找到了示例代码，但我的修改没有得到任何结果。示例代码有效，可在[Puppy Tweets找到](https://gist.github.com/ydn/320156/raw/d0d9c76a71f284daa421040ac37c09fdd058023b/gistfile1.htm)

这是我修改它的方式，我没有得到任何结果：

```
<script>
function handleResponse (json) {
    var results = json.query.results.json.results,
        ul = document.getElementsByTagName( 'ul' )[0],
        li = null;
    for ( var i = 0; i < results.length; i++ ) {
        li = document.createElement( 'li' );
        li.innerHTML = results[i].text;
        ul.appendChild( li );
    }
}
</script>
<script src="select * from html where url="http://www.fishingnotes.com/lakeinfo.php?id=38742" and xpath='//div[@class="lbox"]/div[1]/div/span[1]'"></script> 
```

我已经使用 YQL 控制台来验证 Rest Query 是否正确。我需要做什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T20:34:06.767

> script src="select * from html where url="http://www.fishingnotes.com/lakeinfo.php?id=38742" and xpath='//div[@class="lbox"]/div[1] /div/span[1]'">

未经测试，但这里的嵌套引号似乎有问题，所以先更改`url="http://www.fishingnotes.com/lakeinfo.php?id=38742"`为`url='http://www.fishingnotes.com/lakeinfo.php?id=38742'`. 然后在您的 xpath 中的引号内的引号内有引号，我不确定是否可以处理该内联。

尝试存储`"lbox"`在变量中并引用变量而不是直接引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T10:42:56.977

您的主要错误是尝试（仅）使用 YQL 查询作为 JavaScript 脚本的源。这需要是一个*URL*，它可以由 YQL 控制台为您提供，如下所示。

![休息查询 URL 在 YQL 控制台中的位置](https://i.stack.imgur.com/kEVR5.png)

所以`<script>`元素可能看起来像：

```
<script src="http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20html%20where%20url%3D%22http%3A%2F%2Fwww.fishingnotes.com%2Flakeinfo.php%3Fid%3D38742%22%20and%20xpath%3D'%2F%2Fdiv%5B%40class%3D%22lbox%22%5D%2Fdiv%5B1%5D%2Fdiv%2Fspan%5B1%5D'&callback=handleResponse"></script> 
```

JavaScript 本身也存在一些小问题。一个基本的工作版本可能如下所示：

```
<script>
function handleResponse (json) {
    var ul = document.getElementsByTagName( 'ul' )[0],
        li = null;
    for ( var i = 0; i < json.query.count; i++ ) {
        li = document.createElement( 'li' );
        li.innerHTML = json.results[i];
        ul.appendChild( li );
    }
}
</script> 
```

请参阅[» 这个关于 JS Bin 的示例](http://jsbin.com/oqodal/2/edit)。

# sql - 在没有sum的情况下在sql中进行计算

> ID：16112962
> 
> 赞同：1
> 
> 时间：2013-04-19T20:26:03.093
> 
> 标签：sql, oracle, sum

我有这张表是我使用内部连接从 sql 生成的，现在我想计算每个 order_id 的总成本，例如屏幕截图显示了 4 个订单 id 为 127 的订单，我想合并每个订购商品的总成本由 127 为一个数字，其他订单 ID 相同。我的价格在另一个我没有在这个查询中指定的表中。

我正在考虑做一些类似数量*价格的事情，但我不确定如何将其链接到我上面提到的订单 ID。

非常感谢您的帮助：）

sql：

```
select P.carrier_id, O.aircraft_id, O.order_id, O.quantity 
from orderline O 
inner join purchaseorder P on O.order_id = P.order_id; 
```

到目前为止我的结果：

![在此处输入图像描述](https://i.stack.imgur.com/AhE9G.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T20:32:11.933

你想用`group by`. 我需要知道您查询的其余部分才能为您提供完整的版本，但是 - 大致：

```
select P.carrier_id, O.aircraft_id, O.order_id, sum(O.quantity) -- columns
from orderline O 
inner join purchaseorder P on O.order_id = P.order_id -- tables and join
group by  P.carrier_id, O.aircraft_id, O.order_id; 
```

您可能认为您只需要按订单 ID 进行分组，但经验法则实际上是“按您未计算的所有内容（或求和...）

另外，正如另一个答案所指出的，如果您有价格记录，您可以做`sum(O.quantity*P.price)`或做一些类似的事情来获得每个订单的总价格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:30:44.687

你需要做一个`GROUP BY`on `ORDER_ID`, `AIRCRAFT_ID`，然后做一个`SUM(quantity * price)`

# mysql - Shell script extract data from a file

> ID：16112965
> 
> 赞同：0
> 
> 时间：2013-04-19T20:26:05.123
> 
> 标签：mysql, shell, sed, extract

I just started programming in shell script and I have a file that looks like this:

```
stuff that doesn't matter
doesn't matter
matter

*LINE 35*School: xxxxx -> NAME: xxxxx AGE: xxx DESCRIPTION: xxxxxxxxxx
School: yyyyy -> NAME: yyyyy AGE: yyy DESCRIPTION: yyyyyyyyyy
School: zzzzz -> NAME: zzzzz AGE: zzz DESCRIPTION: zzzzzzzzzz
School: aaaaa -> NAME: aaaaa AGE: aaa DESCRIPTION: aaaaaaaaaa
6 lines of stuff after the important information 
```

My main goal in this is to migrate all those students into a mysql database, my code would be something like this:

```
nstudents=(( $(wc -l file | cut -d ' ' -f1) - 41) #41 comes from 35+6
i=1
while [ $i != $nstudents ]
do
$school=[I don't know how to extract school number $i]
$name=[I don't know how to extract name number $i]
$age=[I don't know how to extract age number $i]
$desc=[I don't know how to extract description number $i]
mysql #upload
$i= (( $i + 1 ))
done 
```

I know that to do this I need to use sed or something like it, but I just can't figure it out how. Thanks in advance.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T02:34:09.057

只是为了根据对您的数据的真实外观的最佳猜测，为您的问题提供一个 shell-ish 解决方案，试试这个

```
cat inputFile
stuff that doesn't matter
doesn't matter
matter

*LINE 35*School: xxxxx -> NAME: xxxxx AGE: xxx DESCRIPTION: xxxxxxxxxx
School: yyyyy -> NAME: yyyyy AGE: yyy DESCRIPTION: yyyyyyyyyy
School: zzzzz -> NAME: zzzzz AGE: zzz DESCRIPTION: zzzzzzzzzz
School: aaaaa -> NAME: aaaaa AGE: aaa DESCRIPTION: aaaaaaaaaa
6 lines of stuff after the important information

awk -F: '/School/{
    gsub(/ -> /, ""); sub(/School/,""); sub(/NAME/,"")
    sub(/AGE/,""); sub(/DESCRIPTION/,"")
    printf("insert into MyTable values (\"%s\", \"%s\", \"%s\", \"%s\")\n",  $2, $3, $4, $5)     
}' inputFile 
```

**输出**

```
insert into MyTable values (" xxxxx", " xxxxx ", " xxx ", " xxxxxxxxxx")
insert into MyTable values (" yyyyy", " yyyyy ", " yyy ", " yyyyyyyyyy")
insert into MyTable values (" zzzzz", " zzzzz ", " zzz ", " zzzzzzzzzz")
insert into MyTable values (" aaaaa", " aaaaa ", " aaa ", " aaaaaaaaaa") 
```

如果你喜欢这个，看看[grymoire awk 教程](http://www.grymoire.com/Unix/Awk.html)

IHTH

# javascript - Twitter Bootstrap Width Auto Issue

> ID：16112966
> 
> 赞同：0
> 
> 时间：2013-04-19T20:26:09.617
> 
> 标签：javascript, html, css, twitter-bootstrap

I'm working on a mobile version of a website which allows the user to view either the navbar or the content area at any one time. I found and modified a jsfiddle to nearly do what I'd like...

[http://jsfiddle.net/SfGAB/2/](http://jsfiddle.net/SfGAB/2/)

Notice the 100% width, if you click the link and then open the nav again, it is much smaller (width: auto). This is due to this part of Twitter Bootstrap's Collapse javascript:

```
reset: function (size) {
  var dimension = this.dimension()

  this.$element
    .removeClass('collapse')
    [dimension](size || 'auto')
    [0].offsetWidth

  this.$element[size !== null ? 'addClass' : 'removeClass']('collapse')

  return this
} 
```

I assume I can swap out 'auto' for '100%', but that doesn't seem like an ideal solution. Anyone have a suggestion?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:01:16.387

所以我最终做的不是像这样使用Bootstrap的代码......

```
<button type="button" class="btn btn-navbar" data-toggle="collapse" data-target="#menu"> 
```

我只是像这样使用了javascript代码和css：

```
#nav.in {
    width:0;
}   
#nav.out {
    width:50%;
}
#nav.collapse {
    float:left;
}       
#nav.width {
    position: relative;
    overflow: hidden;
    -webkit-transition: width 0.35s ease;
    -moz-transition: width 0.35s ease;
    -o-transition: width 0.35s ease;
    transition: width 0.35s ease;
} 
```

然后对于javascript代码......

```
$('#nav').toggleClass('in').toggleClass('out'); 
```

# javascript - AngularJS：事件回调不会在谷歌地图本机地图标记上触发

> ID：16112970
> 
> 赞同：5
> 
> 时间：2013-04-19T20:26:18.510
> 
> 标签：javascript, events, google-maps-api-3, angularjs, infobox

我已经分叉了 AngularUI 的 uiMap 指令，以便将*InfoWindow*交换为*InfoBox*并添加*MarkerClusters*。我对 uiMap -> icMap 进行了一些广泛的更新；最值得注意的是，我将指令逻辑移出控制器，使 uiMap 成为“主”指令）。除了单击本机 MapMarker 不会打开信息框外，我几乎已经完成了所有工作。

我*认为*原因是我没有正确地将点击事件绑定到本机 MapMarker ( *ic-map.js:163* )。

在我重新组织 uiMap 之前，我只是在*map.js*`icMapInfoBox`中添加了一个指令。它的*open*事件由以下人员注册/触发：

 **```
ui-event="{'map-click':'openMarkerInfo(marker)'}" 
```

它调用了在其控制器中定义的*openMarkerInfo()*（从我的仓库复制/粘贴：[GitHub Gist](https://gist.github.com/jshado1/5422931)）。

但是，现在当我单击本机 MapMarker 时，什么也没有发生，控制台中也没有错误（但所有其他事件仍然正常触发）。

**Original [Plunk](http://plnkr.co/edit/ESYiktkcYyQ1ztVylGqJ?p=preview)**
**Simplified [Plunk](http://plnkr.co/edit/1VWU6T3botHVvV6ExwdO?p=preview)** (removed MarkerClusters)
在这两个 plunk 中，问题可能在于 ic-map.js（列表中的第一个文件）

*map.json*是数据文件
*angular.js*，*angular-ui.js*和*infobox.js*是 lib 文件

**编辑**我注意到这`InfoBox.map`是`undefined`; 我猜这与问题有关。

**编辑**未定义的 InfoBox.map 属性是问题的一部分：在*ic-map.js:189上手动调用**InfoBox.open*有效（模板没有被编译，但这是一个不同的问题），但点击事件仍然没有'不触发*InfoBox.open*。模板也没有被包括在内。

 **已解决：我一直在处理`marker`一个 DOM 对象，而不仅仅是一个 js 对象。将尽快发布解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T17:48:00.717

工作示例： http: [//plnkr.co/edit/mamx5EXtHxSo4aqMSZUd](http://plnkr.co/edit/mamx5EXtHxSo4aqMSZUd)

1.  *Original > ic-map.js:156*我的事件监听器应该已经绑定`google.maps.event.addListener()`（参见*工作示例 > ic-map.js:154-156*）。
2.  另外，使用模板太麻烦了，所以我添加了 2 个 div 作为子级`div#map`（参见*Working Example > index.html:41-42*）。由于继承和共享模型的工作方式，所有指令**必须**位于同一个 DOM 元素上（因为没有人可以向下看，只能向上看）。这是将指令逻辑移出[控制器](http://docs.angularjs.org/guide/dev_guide.mvc.understanding_controller)所必需的（就像来自 AngularUI 的实现一样）。[在我的实现中，模型在指令（和指令控制器](http://docs.angularjs.org/guide/directive#directivedefinitionobject)）内的 icMaps* 指令之间共享。
3.  差异`marker`：
    *   *uiMapMarker*，`marker`附加到一个 DOM 对象：`ng-repeat="marker in markers"`
    *   *icMapMarkers*，`marker`只是一个 js 对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-02T19:49:11.273

我相信您需要将 jQuery 添加为依赖项。

uiMap 的未记录的 jQuery 依赖项

[https://github.com/angular-ui/angular-ui/issues/552](https://github.com/angular-ui/angular-ui/issues/552)****

# perl - 如何基于现有数组的一部分形成一个新数组

> ID：16112980
> 
> 赞同：7
> 
> 时间：2013-04-19T20:27:17.840
> 
> 标签：perl

我试图基于现有数组构建一个新数组。

```
#!/usr/bin/perl
#join
use warnings;
use strict;

my @names = ('jacob', 'michael', 'joshua', 'mathew');
my @t_names = join ("\t" , @names);
my @t_names2 = join ("\t", $names[0],$names[2]);
print @t_names, "\n";
print @t_names2, "\n"; 
```

测试脚本允许我加入旧数组中的 2 个元素以形成一个新数组。但是，如果我的数组有 1000 个元素并且我想形成一个新数组，它只包含 1000 个元素中的一部分（例如，元素 3 和 3 的倍数）。我试过`join ("\t", $names[0,2])`但 perl 无法识别`$names[0,2]`（输出表明它`$names[0,2]`被“识别”为`$names[2]`。并且不确定这个错误是什么意思“ `multidimensional syntax not supported at join.pl`”

如果`join`不是正确的函数，我可以通过什么其他方式从现有数组构建部分数组？谢谢你。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-19T20:29:17.347

要获取数组的一部分，请使用`@names[0,2]`，而不是`$names[0,2]`。

要获得错误消息的解释`use diagnostics;`，它给出：

> ... 不支持多维语法 $names[0,2]
> 
> （W 语法）多维数组的写法不像 $foo[1,2,3]。它们的写法类似于 $foo[1][2][3]，就像在 C 中一样。

这是 perl 注意到你做错了什么但你试图做的事情是错误的:)

join 创建一个字符串，而不是一个列表，所以大概你只想：

```
my @new_array = @names[ @indexes_to_select ]; 
```

要仅从 3 中选择是 3 的倍数的索引：

```
my @new_array = @names[ grep $_ % 3 == 0, 3..$#names ]; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-19T20:58:04.227

每当您想从数组中取出多个东西时，无论是所有项目还是某个子集，您都可以`@`使用`$`.

`@`*您可以使用arrayname* `[`*list*从数组中选择任何项目子集`]`，其中*list*是索引列表。您可以放置​​以逗号分隔的索引值的文字列表，但您也可以放置任何返回列表的表达式。ysth 的解决方案使用表达式`grep $_ % 3 == 0, 3..$#names`。分解它，使用这些元素：

*   `$#names`获取最后一个元素的索引`@names`
*   范围构造`..`，用于生成从 3 到该值的所有数字的列表
*   `grep`从该数字列表中仅提取与条件匹配的数字
*   该条件是表达式`$_ % 3 == 0`，这意味着“数字除以 3 时的余数为 0”，当然这仅适用于 3 的倍数

因此，如果数组有 1000 个元素，`$#names`则为 999，并且`3..$#names`是一个包含数字 (3,4,5,6,7,8,...) 的 997 元素列表，一直到 999。`grep $_ % 3 == 0`在该列表上运行返回一个包含 333 个元素的列表，其中包含数字 (3,6,9,12,...) 一直到 999，然后请求`@names[3,6,9,12,...,996,999]`返回位于`@names`数组中这些位置的 333 个元素。

# c# - 如何在 C# 中使用 varchar 数据类型？

> ID：16112982
> 
> 赞同：2
> 
> 时间：2013-04-19T20:27:34.227
> 
> 标签：c#

我有这段代码，我想让它变成 varchar 而不是字符串。在 c# 中执行此操作的适当语法是什么

```
 string emri = row["Nome"].ToString(); 
```

我有一个必须运行的查询，我在其中使用 emri 并将它与我在 mysql 中创建的表中的列进行比较。mysql 中的列是 varchar(20) 类型。当我执行我的代码时，它在我的查询中给出了一个错误，我猜可能是因为这个原因

```
I have this query 
string query = "IF NOT EXISTS(SELECT * FROM clienti WHERE CodCliente=   " + id + "  AND Nome = '" + emri + "' AND RagioneSociale=' " + ragSoc + " ' AND PartitaIVA=' " + piva + " ') INSERT INTO clienti VALUES(" + id + " ,' " + emri + " ',' " + ragSoc + " ',' " + piva + " ') else UPDATE clienti SET( " + id + " ,' " + emri + " ',' " + ragSoc + " ',' " + piva + " ')"; 
```

它给了我这个问题

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'IF NOT EXISTS(SELECT * FROM clienti WHERE CodCliente=   1  AND NomeCliente = 'Jo' at line 1 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-19T20:28:36.407

C#中没有`varchar`类型。

A`varchar`几乎是一个字符串（显然在 SQL 中是可变长度的），所以你所拥有的很好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-19T20:35:28.863

在 .NET 中没有名为“varchar”的类型，你得到的最接近的是`string`.

我假设您要问是有原因的，并且我猜您在问题中发布的代码存在一些问题，所以让我尝试猜测那是什么，并告诉您如何解决这个问题。

首先，由于`varchar`不存在，因此您发布的代码*在表面上*看起来不错。

但是，有一个问题，你没有显示是什么`row`，但如果它是常见的罪魁祸首之一，你就会遇到`null`来自数据库的标记问题。

对于您的 .NET 代码，数据库中相应列中的`null`标记将不会返回`null`，而是您将返回一个[`DBNull.Value`](http://msdn.microsoft.com/en-us/library/system.dbnull.value.aspx)值。

这是我要写的：

```
string emri;
if (row["Nome"] == DBNull.Value)
    emri = null; // or String.Empty if you don't like null values
else
    emri = Convert.ToString(row["Nome"]); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-03T19:35:01.807

NO this is untrue, When you step through a process by changing the debugging settings located in VS you can step through a SQL script process also if you run an example like this where a table has varchar values set into it.

```
Try
{
  using (SqlCommand cmd = new SqlCommand(examplestring, connection))
  {
    cmd.ExecutenonQuery();
  }
 }
 catch
 {
    return;
  } 
```

now put a breakpoint onto the catch statement and in the examplestring have a string called '456789 - 1' equal to Itemnumber varchar(25) in the SQL table.

The catch will get the following error SqlException was caught - Error converting data type varchar to numeric.

Now query string is set as a string cause that is the only way the SqlCommand works look it up on MSDN : System.Data.SqlClient.SqlCommand

So yes Lasse there is varchar in .NET.

# php - 为什么 preg_match() 不适用于我的表达式？

> ID：16112987
> 
> 赞同：1
> 
> 时间：2013-04-19T20:28:19.940
> 
> 标签：php, preg-match

我有 PHP 表达式：

```
preg_match("/\<div id=\"servertc\">(.+)\<\/div>/",$data,$out); 
```

在我的 $data 中包含：

```
<div id="servertc">nowy serwer evolution!<br><br>
~ Server Info ~<br>
IP: axera.pl (Port: 7171)<br>
Online: 24/7<br>
World type: PVP (Protection level: &gt;100)<br>
House rent: disabled.<br>
~ Rates ~<br>
Experience From Player: x2<br>
Magic Level: x15<br>
Skills: x30<br>
Loot: x3<br>
Spawn: x3<br>
Houses: 100 level<br>
Guilds: 8 level (Create via website)<br>
Red Skull (24h): 25 unjustified kills per a day<br>
Black Skull (48h): 50 unjustified kills per a day<br>
Idle kick time = 15 minut<br>
~ Exp stages ~<br>
1-50: x 650<br>
51-75: x 450<br>
76-100: x 300<br>
101-150: x 150<br>
151-175: x 100<br>
176-190: x 75<br>
191-230: x 35<br>
231-250: x 20<br>
251-280: x 15<br>
281-300: x 8<br>
301 +: x 2 
</div> 
```

脚本返回空数组。我的问题在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T20:30:52.683

您需要使用[PCRE_DOTALL (s)](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)标志来使点匹配换行符：

```
/\<div id=\"servertc\">(.+?)\<\/div>/s 
```

但是，让我警告您，使用 RegEx 解析 HTML 是一个坏主意。更好地使用 DOM Parser 来解析像你这样的 HTML 文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:40:49.927

这是您可以在这种情况下使用的正则表达式：

```
preg_match("#<div id=\"servertc\">(.+)</div>#is", $data, $out); 
```

在这种情况下，**#**符号充当分隔符。**i**标志使正则表达式不区分大小写，**s**标志告诉它忽略换行符。我喜欢使用**#**作为分隔符的原因是您不必转义**<**、**>**和**=**字符，这在使用 HTML 代码时非常方便，就像在您的示例中一样。

因此，如果您使用我建议的正则表达式，您的**$out[1]**将包含：

```
nowy serwer evolution!<br>
<br>
~ Server Info ~<br>
IP: axera.pl (Port: 7171)<br>
Online: 24/7<br>
World type: PVP (Protection level: &gt;100)<br>
House rent: disabled.<br>
~ Rates ~<br>
Experience From Player: x2<br>
Magic Level: x15<br>
Skills: x30<br>
Loot: x3<br>
Spawn: x3<br>
Houses: 100 level<br>
Guilds: 8 level (Create via website)<br>
Red Skull (24h): 25 unjustified kills per a day<br>
Black Skull (48h): 50 unjustified kills per a day<br>
Idle kick time = 15 minut<br>
~ Exp stages ~<br>
1-50: x 650<br>
51-75: x 450<br>
76-100: x 300<br>
101-150: x 150<br>
151-175: x 100<br>
176-190: x 75<br>
191-230: x 35<br>
231-250: x 20<br>
251-280: x 15<br>
281-300: x 8<br>
301 +: x 2 
```

我希望这是您正在寻找的，我希望这个答案对您有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-19T20:31:14.547

根据[文档](http://www.php.net/manual/en/regexp.reference.meta.php)，`.`不匹配换行符。

# javascript - 为什么链接和脚本标签不作为元素输入？

> ID：16112989
> 
> 赞同：2
> 
> 时间：2013-04-19T20:28:27.933
> 
> 标签：javascript, types

我认为每个元素返回`document.getElementById`或`document.createElement`实际上是 dom 元素的某个版本，并且可以使用`typeof`. `script`但是，我最近发现，当我尝试对和`link`标记这样做时，情况并非如此。

***[`jsFiddle Demo`](http://jsfiddle.net/TLsR3/)***

html

```
<link id="l">
<script id="s"> 
```

js

```
var l = document.getElementById("l");
console.log(typeof l);//"object"
var s = document.getElementById("s");
console.log(typeof s);//"object"
var li = document.createElement("link");
console.log(typeof li);//"object"
var sc = document.createElement("script");
console.log(typeof sc);//"object" 
```

为什么将这些元素类型化为对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T20:31:51.810

它们是元素，您得到的结果与其他类型的元素相同。

尝试这个 ：

```
var li = document.createElement("link");
console.log(li instanceof HTMLElement); 
```

它记录`true`为链接是[HTMLLinkElement](https://developer.mozilla.org/en-US/docs/DOM/HTMLLinkElement)的一个实例，它是`HTMLElement`.

但是[typeof](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/typeof)只是`"object"`为大多数对象（“任何其他对象”）返回。

您可以使用[getPrototypeOf](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/getPrototypeOf)获取对象的类型：

```
console.log(Object.getPrototypeOf(li)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T20:31:05.857

`typeof`专门用于原生 JavaScript 对象。`typeof`将返回一组非常有限的值。

`"object"`响应基本上是针对任何对象的，或者（`null` *实际上不是对象……看图）*。您可能会从任何类型的 Element 中得到相同的响应，而不仅仅是`script`and `link`。

您可以使用`instanceof`来查看元素是否是`Element`构造函数原型的实例。

```
console.log(l instanceof Element); // true 
```

* * *

请注意，像元素及其构造函数这样的对象是宿主对象。它们有时会使用与原生 JavaScript 对象不同的规则，因此在测试它们的类型时可能会到处出现怪癖。

# google-maps - 在谷歌地图上绘制多个坐标

> ID：16112994
> 
> 赞同：1
> 
> 时间：2013-04-19T20:28:51.817
> 
> 标签：google-maps

我需要在谷歌地图上绘制多个标记，并且无法放置多个标记。

这有效： [https ://maps.google.com/maps?q=26.549431,-81.847559](https://maps.google.com/maps?q=26.549431,-81.847559)

这不是： [https ://maps.google.com/maps?q=26.549431,-81.847559&q=26.549579,-81.847757](https://maps.google.com/maps?q=26.549431,-81.847559&q=26.549579,-81.847757)

有没有办法将两个坐标发送到谷歌地图并返回两个标记？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T17:09:22.903

在 Google Map API 中使用 staticmap 可以解决问题：http://maps.google.com/maps/api/staticmap?zoom=9&size=640x480&maptype=roadmap%20&markers=label:1|26.785,-82.045&markers=label: [2 |26.651,-82.0&markers=label:3|26.7,-81.75634&markers=label:4|26.6,-81.89&markers=label:5|26.475,-81.79&markers=label:6|26.41,-81.76&markers=label:7 |26.42,-81.78&markers=label:8|26.43,-81.80&markers=label:9|26.44,-81.82&markers=label:10|26.45,-81.84&sensor=false](http://maps.google.com/maps/api/staticmap?zoom=9&size=640x480&maptype=roadmap%20&markers=label:1|26.785,-82.045&markers=label:2|26.651,-82.0&markers=label:3|26.7,-81.75634&markers=label:4|26.6,-81.89&markers=label:5|26.475,-81.79&markers=label:6|26.41,-81.76&markers=label:7|26.42,-81.78&markers=label:8|26.43,-81.80&markers=label:9|26.44,-81.82&markers=label:10|26.45,-81.84&sensor=false)

# angularjs - 无法在角度应用程序中打开日期时间选择器

> ID：16112997
> 
> 赞同：0
> 
> 时间：2013-04-19T20:29:05.293
> 
> 标签：angularjs, datetimepicker, angular-ui

我想在我的 Angular 应用程序中使用[http://www.malot.fr/bootstrap-datetimepicker/ 。](http://www.malot.fr/bootstrap-datetimepicker/)

所以在我的头标签中

```
<link rel="stylesheet" type="text/css" href="{{ asset('bootstrap.min.css') }}"/>
<link rel="stylesheet" type="text/css" href="{{ asset('datetimepicker.css') }}"/> 
```

和

```
<script src="{{ asset('jquery-1.9.1.min.js') }}"></script>
<script src="{{ asset('bootstrap.min.js') }}"></script>
<script src="{{ asset('bootstrap-datetimepicker.min.js') }}"></script>
<script>
      $(".form_datetime").datetimepicker({format: 'yyyy-mm-dd hh:ii'});
</script> 
```

我想像这样应用 datetimepicker

```
<input type="text" value="2012-06-15 14:45" readonly class="form_datetime"> 
```

但是，当我单击输入字段时不会触发选择器，并且在 firebug 控制台中绝对没有错误。

问题可能出在哪里？