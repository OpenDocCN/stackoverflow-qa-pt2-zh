# StackOverflow 问答 12882000-12882999

# performance - 全文和基于属性的搜索引擎的混合

> ID：12882000
> 
> 赞同：5
> 
> 时间：2012-10-14T11:59:21.040
> 
> 标签：performance, search, full-text-search

### 背景：

代表不同类型事件（音乐会、足球比赛、慈善收藏等）的 SQL 数据库，其中每个都包含与事件相关的数据（音乐会 - 艺术家姓名，比赛 - 主持人/访客团队）。所有这些事件都继承自一个通用表`event`，其中包含与所有事件相关的数据（名称、描述、位置、开始/结束日期）。继承是使用从[Hibernate](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/inheritance.html#inheritance-tablepersubclass)或[Doctrine](http://docs.doctrine-project.org/en/2.0.x/reference/inheritance-mapping.html#class-table-inheritance)已知的 table-per-subclass 模型实现的。数据库还存储在和表中使用的表`artists`（`id`、`name`、`birth_date`）和`football_teams`（`id`、`name`、`country`、 ） （通过 FK）。`coach_name``event_concerts``event_football_matches`

### 问题：

创建一个给定条件（`{name: "manchester", startDate: "01.01.2012 - 01.02.2012"}`或`{location: "london", description: "artists +metallica -bieber"}`）的搜索引擎将返回所有符合条件的事件，以及来自`artists`/`football_teams`表的结果。

这些事件的某些属性包含大量文本，应以全文搜索方式进行搜索。

### 例子：

给定以下搜索条件：

```
{ location: "london", startDate: "05.11.2012 - 07.11.2012" } 
```

搜索引擎应返回：

1.  （足球赛事）阿森纳对曼联的比赛，酋长球场，伦敦，2012 年 11 月 6 日
2.  （音乐会活动）Metallica 音乐会，Some-Fancy-Location，05.11.2012
3.  （足球队/非赛事）阿森纳，成立时间：1886 年，联赛：英超联赛
4.  （足球队/非赛事）切尔西，成立时间：1905 年，联赛：英超联赛
5.  （节日活动）伦敦万圣节，07.11.2012
6.  （舞蹈活动）Sadler's Wells 的睡美人，45 英镑，2012 年 11 月 7 日
7.  （音乐家，不是事件）尼尔·克里斯蒂安，1943 - 2012，摇滚歌手

如您所见，仅在发生事件时才考虑*startDate*（与事件相关的属性）。

* * *

搜索引擎必须扫描大量表，这就是为什么我认为我应该使用专用软件（Sphinx、Lucene、...？）并为搜索创建单独的索引。

* * *

任何人都可以建议一些解决方案来构建这样一个索引吗？我可以使用什么软件作为该搜索引擎的基础？

* * *

### 编辑：

只是为了澄清：不需要任何属性。其中一些包含将使用精确匹配搜索的日期，其中一些包含也将使用精确匹配搜索的短文本（如位置）。但其中一些包含长文本，需要以全文方式搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T09:14:26.447

我看到了三种方法。

*   迁移到 Couchdb。要进行`location`+搜索，请使用as 键`start time`构建视图。`[location, event_start_time]`在搜索期间，您使用`?startkey=["london,"05.11.2012"]&endkey=["london", "07.11.2012"]`. 要启用全文搜索，您可以像[这样](https://stackoverflow.com/questions/5285787/full-text-search-in-couchdb)`description`构建一个特定的视图。

*   构建[ElasticSearch](http://www.elasticsearch.org/)索引。您示例中的搜索只是使用两个数据字段的结构化查询，其中`location`是必须的，事件`start time`是范围。elasticsearch 中的全文搜索功能更强大，您可以定义特定的[分析器](http://www.elasticsearch.org/guide/reference/index-modules/analysis/)来处理数据中的文本。Elasticsearch 还支持使用地理空间数据进行搜索。

*   使用[亚马逊云搜索](http://aws.amazon.com/cloudsearch/)。有一些已知的限制。我列出了一些我不喜欢的：

    *   文档大小小于 1MB。
    *   在一个字段中最多可以指定 100 个值。
    *   不是开源的。

对于搜索实现之间的一些比较：

*   [Solr 与 ElasticSearch](https://stackoverflow.com/questions/10213009/solr-vs-elasticsearch)
*   [https://stackoverflow.com/questions/11115523/how-does-amazon-cloudsearch-compares-to-elasticsearch-solr-or-sphinx-in-terms-o](https://stackoverflow.com/questions/11115523/how-does-amazon-cloudsearch-compares-to-elasticsearch-solr-or-sphinx-in-terms-o)
*   [http://www.searchenginecaffe.com/2012/04/amazon-cloudsearch-elastic-search-as.html](http://www.searchenginecaffe.com/2012/04/amazon-cloudsearch-elastic-search-as.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-20T04:32:34.537

您可以使用带有[tsearch2](http://www.postgresql.org/docs/9.1/static/tsearch2.html)列的搜索表，该列将允许您进行全文搜索以及您需要查询的每一列：例如名称和位置。

如果您的表都继承自同一个模型，那么在搜索表中引用它们会更容易。如果没有，您可以构建一个内容类型表来放置通用外键，这些外键将在您的搜索表中用于引用最终允许检索查询结果的结果行。该表使用触发器填充。这可能是最有效的解决方案，特别是如果您非常了解 SQL（可能是 PL/SQL）。

如果不是这样，我建议你使用[Lucene](https://stackoverflow.com/search?q=lucene)在 Java 中构建你需要的索引，并根据需要进行查询。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-23T19:22:59.857

你有很多不同的要求，没有软件能够满足所有这些要求。

1.  自定义搜索语法
2.  多实体搜索
3.  全文搜索
4.  语义搜索 (?)

让我们来谈谈他们中的每一个。

# 自定义搜索语法

您需要一个能够根据用户输入构建格式良好的查询的系统。这个系统不仅能做到`+metallica -bieber -> text CONTAIN metallica AND text NOT CONTAIN bieber`

你的例子并不完全准确。系统如何根据“位置：伦敦”找到“阿森纳”？系统如何根据“位置：伦敦”找到“Neil Christian”？

**解决方案**：我很确定像 Lucene 这样的系统在搜索查询中支持丰富的语法。但是，它将是框架语法，而不是您自己的。请注意，指定自己的语法很困难；您将需要构建一个词法分析器、解析器和您自己的翻译到您的搜索框架的查询树。

# 多实体搜索

您需要一次搜索多个实体。这对搜索框架来说没有问题。

但是，您还想定义搜索结构并将其链接回您的实体。这会有点困难，但并非不可能做到。

# 全文搜索

这也很简单。

# 语义搜索

高级搜索框架应该支持语义搜索（例如*London*与*Queen*有关，因为它们在某些文本中经常一起出现）。不过，这可能取决于您的训练数据集。

# 结论

难做的不是继承，也不是全文检索。但是，您应该真正定义数据的匹配方式。搜索系统不是魔术，虽然谷歌可能会这样看。搜索依赖于真正的数学；在进一步讨论之前，您应该在语法上指定这些数学规则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-23T11:53:44.153

我假设您没有使用具有本机全文实现的数据库，所以这是一个穷人的解决方案，但在您使用完整的解决方案（如 Lucene 或任何其他搜索服务建议）之前，它可以让您开始并交付一些东西可能需要更长的学习时间。

您可以简单地安排一个不时运行的进程以从所有这些不同的表中获取所有数据并将它们转储到“索引”表中，您可以在其中执行搜索而无需所有连接。

你可以有一个表，例如：

```
eventId - int
keywords - nvarchar(max)
location - nvarchar
start_date - datetime
end_date - datetime 
```

这样，您将拥有在一个地方执行搜索所需的一切。对于搜索本身，您可能会在查询中使用 like 运算符获得不错的结果。

不是男人梦寐以求的最佳搜索平台，但您可以在几个小时内完成工作。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-14T12:07:56.427

SQLite 支持全文索引：

[http://sqlite.org/fts3.html](http://sqlite.org/fts3.html)

# javascript - 在页面上出现关键字之前插入锚链接

> ID：12882001
> 
> 赞同：0
> 
> 时间：2012-10-14T11:59:48.160
> 
> 标签：javascript, jquery, scrollto

基本上，我在这里结合了 2 个 jQuery 插件：SearchHighlight 和 TotalStorage（将值存储到一个易于检索的 cookie 中）。

因此，在将关键字输入**谷歌搜索框**后，会显示谷歌结果，并且访问者点击选择的链接。他进入页面，**他用于搜索的关键字**被赋予黄色背景。但是，这对我的客户来说还不够好 - 他要求我这样做，以便将访问者直接带到关键字的位置。

`name="e"`我认为让 jQuery在第一次出现关键字之前以某种方式预先添加 html 锚标记 ( ) 就足够了。

这里的另一个问题是：搜索短语可以（并且通常会）包含多个单词。如果我选择使用第一个单词，当找不到该特定单词（其他单词）时该怎么办？

因此，最好的方法是将字符串分成单独的单词，测试它们是否出现在页面上，并将锚点添加到第一次出现的位置。

我不是一个真正精通 JavaScript/jQuery 的人，所以任何帮助都将不胜感激。

以下是脚本：

```
// when the form is submitted, search phrase is written to a "kw" cookie
$(document).ready(function() {

    $("#submit").click(function() {
        var keywords = $("input[name=query]").val();
        $.totalStorage('kw', keywords);
    });
});​ 
```

在页脚中：

```
jQuery(function() {
    var options = {
        exact: "whole",
        style_name_suffix: false,
        keys: $.totalStorage('kw') // keys determine what strings are to be highlighted
    }

    jQuery(document).SearchHighlight(options);

    // I suppose here the value of KW cookie could be broken into words
    // and searching for occurrences could be put
    // along with the code for prepending occurrences with an anchor tag

    // reset KW cookie to empty value
    $.totalStorage('kw', '');
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:02:16.753

这是一个应该有所帮助的基本起点。目前还不完全清楚完整的目标是什么。单词基于您的 Lorum Ipsum 演示。您还需要修改 html 输出结构。我将文字包裹在标签中，这样可以直观地看到效果。

还应注意，如果单词与 html 标记的任何部分匹配，则此代码将弄乱 html。正则表达式需要改进以解释 htis

```
/* would take this array from your storage plugin*/
var keywords = ['content', 'phrase', 'affordable','another'];
keywords.sort();
var words=[];
/* make new array that includes first letter caps for begiining sentences*/
for ( i=0;i<keywords.length;i++){
    words.push( keywords[i], upperCaseKeyword(keywords[i]));
}
/* get html from content element and store in variable*/
var html = $('.wrapper').html();

for (i = 0; i < words.length; i++) {
    var word=words[i];    
    var reg = new RegExp(words[i], 'g');
    html = html.replace(reg, '<a name="'+word+'" class="tag">' + word + '</a>');   

}

/* replace old html with modified*/

$('.wrapper').html(html);

/* helper function*/
function upperCaseKeyword(word) {
    var firstLetter = word.substr(0, 1).toUpperCase();
    return firstLetter + word.slice(1);
} 
```

演示：http: [//jsfiddle.net/GxvxJ/1/](http://jsfiddle.net/GxvxJ/1/)

# android - 从上到下滑动抽屉并没有隐藏android中内容下方的Activity

> ID：12882002
> 
> 赞同：0
> 
> 时间：2012-10-14T12:00:15.913
> 
> 标签：android, android-layout, slidingdrawer

[我在此链接](http://blog.sephiroth.it/2011/03/29/widget-slidingdrawer-top-to-bottom/)中从上到下使用此自定义滑动抽屉。

它可以工作，但我的问题是，当显示滑动抽屉时，我想隐藏它下面的 Activity 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:15:35.753

您需要为滑动抽屉的内容添加背景颜色（或图像）......它默认为透明度。

要将抽屉的背景颜色设置为黑色（它将覆盖它下面的所有内容），请将其添加到您的 xml 文件中：

```
android:background="#000" 
```

这应该与`android:id="@+id/content"`.

# iphone - 如何移动 UIToolbar 项？

> ID：12882007
> 
> 赞同：2
> 
> 时间：2012-10-14T12:01:20.340
> 
> 标签：iphone, ios, objective-c, uitoolbar, uitoolbaritem

我`UIToolbar`在 iOS 中使用 a 并试图通过从右侧滑入来获得一个“到达”的新按钮。有没有办法直接访问栏上按钮的“位置”？我目前有一个接近预期效果的混乱解决方法，但我希望有一种方法可以使用 Core Animation 移动它们，这样我就可以实现“EaseInEaseOut”类型的计时功能。有任何想法吗？

```
- (void) testPart1 {
    [NSTimer scheduledTimerWithTimeInterval:(0) target:self selector:@selector(testPart2:) userInfo:[NSNumber numberWithInt:500] repeats:NO];
}

- (void) testPart2:(NSTimer*)sender {
    int countdown = [sender.userInfo integerValue];
    theSpace.width = 10+(int)countdown;
    itemTestButton.width = 49;
    itemTestButton.width = 50;
    countdown -= 5;
    if(countdown>0)
    [NSTimer scheduledTimerWithTimeInterval:(0.004) target:self selector:@selector(testPart2:) userInfo:[NSNumber numberWithInt:countdown] repeats:NO];
} 
```

这里的前提是使用 an`NSTimer`来更改 Fixed Space Bar Button item 的宽度，并倒计时到零。我发现我必须更改实际按钮的宽度才能使其工作，否则不会出现“动画”。我知道这很混乱，有人必须有更清洁的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T00:31:52.330

我建议添加一个纯`UIView`文本作为子视图，该子视图`UIToolbar`与条形按钮完全一样（您可以通过调用`renderInContext:`现有按钮来获得它），然后将该视图动画到正确的位置。然后，在该动画的完成块中，您可以设置真实按钮和`removeFromSuperview`动画视图，并且用户看起来无法区分。

# jquery - jQuery 使用单个元素和规则进行验证

> ID：12882009
> 
> 赞同：1
> 
> 时间：2012-10-14T12:01:22.060
> 
> 标签：jquery, forms, jquery-validate

作为更大的 jQuery 验证表单的一部分，我有一些输入只需要在按下按钮时进行验证。例如将项目输入到列表中：

```
<form class="validate">
    // ......
      validated form elements on submit
    // ......

    <select multiple="multiple" id="itemList" size="5"><select>
    <input type="text" id="newItem" name="newItem"/>
    <button type="button" id="addItem">add</button>

    // ......
      validated form elements on submit
    // ......
    <button type="submit">Submit Form</button>
</form>

<script>
    $(document).on("click", "#addItem", function(e){
       if( $("form.validate").validate({}).element("#newItem") ){
           //Code to add valid item to the list
       }
   });
</script> 
```

我不想使用输入的类作为分配规则的一种方式，因为这意味着它将作为主表单的一部分进行验证，但是如果我以 $([form]).validate({ rules..}).element([element]) 它们被忽略。

我可以让它工作的唯一方法是在验证之前使用规则（“添加”，规则），之后使用规则（“删除”，规则）。

```
<script>
    $(document).on("click", "#addItem", function(e){
        $("#newItem").rules("add", {
            required: true,
            minlength: 2,
            messages: {
               required: "Required input",
               minlength: jQuery.format("Please, at least {0} characters are necessary")
            }
        });

        $("form.validate").validate().element("#newItem");

        $("#newItem").rules("remove");
    });
</script> 
```

然而，这似乎很不雅，所以如果有人能告诉我哪里出错了，那就太好了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-24T18:29:46.460

```
<script>
    $(document).on("click", "#addItem", function(e){
       var _validateSingleField=$('form.validate').validate().element('#newItem');

       if(_validateSingleField){
           //Code to add valid item to the list
       }
   });
</script> 
```

# magento - Magento 自定义选项“必需”错误

> ID：12882016
> 
> 赞同：1
> 
> 时间：2012-10-14T12:01:51.010
> 
> 标签：magento, magento-1.6, configurable-product

提前感谢任何人能够提供的任何帮助。当 magento 中的自定义选项字段设置为“必需”时，它不会添加到购物车并要求用户选择选项。但是，当我在管理员中取消选中所需的选项时，就可以了。我认为这个问题可能会影响配置产品，所以我想找到一个解决方案，而不是不使用所需的选项。

使用 Magento 1.6

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:53:09.247

您可以创建自己的验证

添加到购物车按钮触发 productAddToCartForm.submit(this)

```
<button type="button" title="Add to Cart" class="button btn-cart" onclick="productAddToCartForm.submit(this)"><span><span>Add to Cart</span></span></button> 
```

然后你可以重写你自己的 productAddToCartForm.submit()

```
var productAddToCartForm = new VarienForm('product_addtocart_form');
productAddToCartForm.submit = function(button, url) {

    // do your custom validation here  
    // eg. if (this.validator.validate() && customValidate())
    if (this.validator.validate()) {

            var form = this.form;
            var oldUrl = form.action;

            if (url) {
               form.action = url;
            }
            var e = null;
            try {
                this.form.submit();
            } catch (e) {
            }
            this.form.action = oldUrl;
            if (e) {
                throw e;
            }

            if (button && button != 'undefined') {
                button.disabled = true;
            }
   }        
   else{
       productOptionError();
   }
}.bind(productAddToCartForm); 
```

# gradient - CSS3渐变在边框半径中留下未着色的像素

> ID：12882019
> 
> 赞同：0
> 
> 时间：2012-10-14T12:02:45.960
> 
> 标签：gradient, css

经过一番修补后，我遇到了一个小的视觉障碍。出于某种原因，我的 css 渐变在边界半径周围没有正确着色，正如您通过查看[@My Fiddle Here所看到的那样](http://jsfiddle.net/SReject/Kgmxx/)

如果您只注释掉 css 的渐变部分，则所有像素都会按应有的颜色着色。任何人都知道对此的快速修复，或者能够发现我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:19:39.057

我想到了。我必须在每个渐变语句之后简单地添加基本背景颜色：

```
background: background: linear-gradient(to bottom,  #900000 0%,#880000 40%,#790000 60%,#710000 100%), #710000; 
```

# xcode - 对创建 IPAD 应用程序感到困惑。使用情节提要从 UIView 登录后更改为 UISplitView

> ID：12882023
> 
> 赞同：1
> 
> 时间：2012-10-14T12:03:40.780
> 
> 标签：xcode, ipad, login, uisplitviewcontroller

我有一个需要登录的项目，并且我正在使用单视图应用程序来创建应用程序，所以第一页应该是 UIView。

登录页面后，我决定将视图更改为拆分视图，其中包含左侧的表格视图和右侧的视图。

当我使用情节提要时，我创建了 splitViewController。那么，我需要创建一个 splitViewController .h 和 .m 来处理它吗？

问这个问题的原因是，当我使用 Master-Detail Application 创建一个新项目时，它只包含一个 MasterViewController .h、.m（tableview）和 DetailViewController .h、.m（UIview）。

另外，当我只有 MasterViewController .h、.m（tableview）和 DetailViewController .h、.m（UIview）时，我是否知道如何将视图更改为 UISplitView？

# wpf - 扩展 WPF 工具包的 DoubleUpDown，我做错了什么？

> ID：12882026
> 
> 赞同：0
> 
> 时间：2012-10-14T12:03:59.047
> 
> 标签：wpf, mvvm, binding, viewmodel, wpftoolkit

好的，我认为这很容易，但显然我做错了什么。问题是当单击扩展 WPF 工具包 DoubleUpDown 控件的“向上”和“向下”按钮时，值不会正确更新。当我单击向上时，控件中的值会更改，但视图模型不会更新。只有当我从单击向上更改为单击向下时，模型才会更新，但使用之前的值。

为了重现，我使用了一个简单的视图模型，如下所示：

```
public class ViewModel : INotifyPropertyChanged
{

    public ViewModel()
    {
        MyValue = 0.5;
    }

    private double _myValue;
    public double MyValue
    {
        get { return _myValue; }
        set
        {

            _myValue = value;
            PropertyChanged(this, new PropertyChangedEventArgs("MyValue"));

        }
    }

    public event PropertyChangedEventHandler PropertyChanged = delegate { };
} 
```

我的 MainWindow.xaml 看起来像下面的代码，其中 DoubleUpDown 控件和标签都以双向方式绑定到 ViewModel 的 MyValue 属性：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        Title="MainWindow" Height="100" Width="200">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>
        <xctk:DoubleUpDown
            Value="{Binding MyValue, Mode=TwoWay}"
            Increment="0.5"
            Minimum="0.0"
            Maximum="10"
            ValueChanged="DoubleUpDown_ValueChanged"
            />
        <Label Grid.Column="1" Content="{Binding MyValue, Mode=TwoWay}"/>
    </Grid>
</Window> 
```

在代码隐藏中，我将 MainWindow 构造函数中的 DataContext 设置为 ViewModel 的一个实例：

```
 public MainWindow()
    {
        DataContext = new ViewModel();
        InitializeComponent();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:23:12.983

DoubleUpDown 控件的默认绑定更新逻辑是`LostFocus`. 尝试`UpdateSourceTrigger=PropertyChanged`像这样在绑定中显式设置 -

```
<xctk:DoubleUpDown
      Value="{Binding MyValue, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
      Increment="0.5"
      Minimum="0.0"
      Maximum="10"
      ValueChanged="DoubleUpDown_ValueChanged"/> 
```

# accessibility - 如何使 sprymenubar 可通过键盘导航

> ID：12882028
> 
> 赞同：0
> 
> 时间：2012-10-14T12:04:43.327
> 
> 标签：accessibility, dreamweaver, spry

Dreamweaver (CS4/5/6) 自动生成的 spry 菜单栏（保持所有默认值）

根据 API，您可以通过更改参数列表中的布尔值 enableKeyboardNavigation 来启用键盘导航，如下所示：

```
 var MenuBar1 = new Spry.Widget.MenuBar("MenuBar1", {imgRight:"SpryAssets/SpryMenuBarRightHover.gif", enableKeyboardNavigation: true}, ); 
```

不幸的是，这似乎不起作用。根据其他来源，我可以找到（几年前）键盘导航本身就是错误的；让设计自己的界面更可取。

选择菜单是成功的 - 但不会提示弹出子菜单 - 这意味着通过标签的所有子菜单导航都是盲目的（具有讽刺意味的是，除非所有 css 和 javascript 都被剥离，从而显示基本的 html 无序列表和 hrefs）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T21:52:01.550

令我惊讶的是，默认启用键盘交互（通过箭头键）。Tabbing 仅适用于选择非子菜单项。

# php - DooPHP :: filemtime(): VIEW_FILENAME.html 的统计失败

> ID：12882036
> 
> 赞同：0
> 
> 时间：2012-10-14T12:06:27.393
> 
> 标签：php, filemtime, doophp

我正在使用 Doophp 框架，它在 localhost 和 xampp 上运行良好，但我`filemtime(): stat failed for view_filename.html`在 web 主机上。这是主机端错误还是框架错误？
你对这个错误有什么建议。 [这是完整的堆栈跟踪](http://mhesabi.eclick.ir/creattica/Members)

# matlab - 图像处理和时刻

> ID：12882039
> 
> 赞同：4
> 
> 时间：2012-10-14T12:06:59.207
> 
> 标签：matlab, image-processing

在我目前正在进行的一个项目中，我必须计算图像轮廓的 5 个矩。例如，我可以使用它来获取质心。为此，我使用了 matlab ：

> f = 已读（是）；

```
%Edge detection with prewitt
contourImage = edge(f,'prewitt');

% Morphological operation to close the open spaces
se = strel('disk',2);
closecontourImage = imclose(contourImage,se);

imshow(closecontourImage);

%Find the x y positions of all the nonzero elements of the edge
[row,col] = find(closecontourImage);

% 3 moments
m10= 0;
m00= 0;
m01= 0;
mu00 =0;

% Calculate the 3 moments based on the given paper
for r=1:length(row)
    for c=1:length(col)
         m10 = m10 + ((row(r)^1)*(col(c)^0));
         m00 = m00 + ((row(r)^0)*(col(c)^0));
         m01 = m01 + ((row(r)^0)*(col(c)^1));
    end
end

% Calculate centroid (zwaartepunt) based on the given formulas
x = m10/m00;
y= m01/m00; 
```

原始图像（在 png 中，我在 matlab 中使用 pgm）：

![在此处输入图像描述](../Images/a5fb8aeeb0d2ed5624c23d6e8e4b2314.png)

边缘（我假设是轮廓）：

![在此处输入图像描述](../Images/6a206758f6167643f233b65bcebe7c7f.png)

带有图像和质心的图 ![在此处输入图像描述](../Images/97ad17fe1892e5a2832e8209dc611692.png)

当我将此与质心计算中内置的 matlabs 进行比较时，它非常接近。

虽然我的问题是关于面积计算。我读到第 0 时刻 = 面积。虽然我的m00和地区不一样。这是合乎逻辑的，因为第 0 时刻是所有白色像素的总和......它们仅代表图像的边缘，因此这不会导致该区域。我现在的问题是，**整个图像上的轮廓矩和矩有区别吗？是否可以根据此表示中的轮廓获得区域？**

在我的作业中，他们明确表示应该计算轮廓的矩，并且第一个矩等于质心（我的算法也不是这种情况）。但我[在这里](http://www.aishack.in/2011/06/image-moments/)读到的是一阶中心矩=质心。**那么这是否意味着轮廓矩与中心矩相同？还有一个更普遍的问题，我可以用这个边缘作为轮廓吗？**

我觉得这些时刻很混乱

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T13:12:11.403

填充区域或其轮廓的矩之间存在差异。考虑以下情况：

![在此处输入图像描述](../Images/104ba6c6b5633bcb3544550a421f24e1.png)

这两个对象的轮廓完全相同。然而，很明显，右侧正方形的重心偏向右侧，因为它“向右更饱满”。

# sql-server-2008-r2 - 安装 SQL Server 2008 R2 时如何查找服务器名称

> ID：12882041
> 
> 赞同：6
> 
> 时间：2012-10-14T12:07:25.527
> 
> 标签：sql-server-2008-r2

我想安装 SQL Server 2008 R2，所以我需要输入“服务器名称”，我尝试了我的计算机名称但出现异常，请告诉我如何找到它

![在此处输入图像描述](../Images/42e9c427e447942b962e254ecbe525a5.png)

```
and this is the exception ![enter image description here][2] 
```

![在此处输入图像描述](../Images/e772073cffb254c252a00ebe48ffe7e7.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-14T12:12:36.610

您可以`.\SQLEXPRESS`用作服务器名称。

检查此[链接](http://www.youtube.com/watch?v=DLrxFXXeLFk)

**编辑：-**

来自用户发布的以下评论（认为它很有用）

> 您可以将 SQL Server 安装为实例，这允许您在同一台机器上运行多个环境（即 localhost\dev 和 localhost\prod）。如果您安装 MSSQL Server Express，则默认实例名称为 localhost\SQLEXPRESS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:11:59.933

*   用作`.`服务器名称。或者

*   从服务器管理器：管理工具 > 服务器管理器。您可以获取计算机名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-14T07:29:10.217

使用 .\SQLEXPRESS

或者

使用 REVAN-PC\SQLEXPRESS

REVAN-PC 是我的系统名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-27T15:57:12.133

1.  去开始
2.  写在搜索框中：ODBC
3.  转到系统 DSN 选项卡
4.  点击添加...
5.  选择 SQL 服务器选项并完成
6.  转到第 3 个框（服务器：）并查看您的服务器！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-30T10:15:10.543

尝试使用（本地）作为服务器名称。我遇到了同样的问题，经过几次连接尝试后，（本地）默认出现在服务器名称字段中。

# java - 序列化和反序列化瞬态对象的棘手情况

> ID：12882044
> 
> 赞同：2
> 
> 时间：2012-10-14T12:07:35.720
> 
> 标签：java, serialization, transient

这是我的代码：

```
class Collar {
  int size;
}

class Dog implements Serializable {
  int weight;
  transient Collar c;

  public Dog(int weight, int size) {
    this.weight = weight;
    c = new Collar();
    c.size = size;
  }

  public void writeObject(ObjectOutputStream os) throws Exception {
    os.defaultWriteObject();
    os.writeInt(c.size);
  }

  public void readObject(ObjectInputStream is) throws Exception {
    is.defaultReadObject();
    c = new Collar();
    c.size = is.readInt();
  }
}

public class test {
  public static final String FILE_REVISION = "$Revision$";

  public static void main(String ar[]) throws Exception {
    Dog dOut = new Dog(20, 2);

    System.out.println("DOut Weight: " + dOut.weight + " Size: " + dOut.c.size);

    FileOutputStream fo = new FileOutputStream("Dog.ser");
    ObjectOutputStream os = new ObjectOutputStream(fo);
    os.writeObject(dOut);

    FileInputStream fi = new FileInputStream("Dog.ser");
    ObjectInputStream is = new ObjectInputStream(fi);
    Dog dIn = (Dog) is.readObject();

    System.out.println("DIn Weight: " + dIn.weight + " Size: " + dIn.c.size);
  }
} 
```

这是输出：

```
DOut Weight: 20 Size: 2
Exception in thread "main" java.lang.NullPointerException
    at test.main(test.java:55) 
```

第 55 行是具有 System.out.println() 的最后一行代码

程序能够取回可序列化的对象，这里是 Dog。但是，当我使用自定义 readObject 方法回读时，它无法创建新的“包含”对象 Collar。我哪里错了？

如您所见，'dIn.c.size' 语句中的输出为 NullPointerException。尽管我在自定义 readObject 方法中将 c 设置为新对象，但它并没有真正起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:12:44.383

因为`Collar c`在`transient`里面`readObject`你需要先`c`初始化

```
c.size = is.readInt();<-- NullPointerException Here 
```

这里需要先初始化`C`。

```
c = new Collar();
c.size = is.readInt(); 
```

**两个方法签名都是错误的，它们应该如下所示：**

```
 private void writeObject(ObjectOutputStream stream) throws IOException {
    stream.defaultWriteObject();
    stream.writeInt(c.size);
}

private void readObject(ObjectInputStream stream) throws IOException,
        ClassNotFoundException {
    stream.defaultReadObject();
    c = new Collar();
    c.size = stream.readInt();
} 
```

您可以[在此处阅读有关序列化的更多详细信息](http://docs.oracle.com/javase/7/docs/platform/serialization/spec/serialTOC.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:13:14.450

在方法中初始化您的`Collar`成员`readObject`

```
public void readObject(ObjectInputStream is) throws Exception {
    is.defaultReadObject();
    c = new Collar();
    c.size = is.readInt();
} 
```

**编辑：** 方法`Serializable`需要更改为私有。

# sockets - C中服务器和客户端程序之间同时发送（）和recv（）？

> ID：12882045
> 
> 赞同：0
> 
> 时间：2012-10-14T12:07:37.043
> 
> 标签：sockets, tcp, send, tcpclient, recv

我正在做一个有客户端和服务器的程序。客户端所做的是通过发送包含“ping”的消息来“ping”服务器。当服务器收到“ping”时，它应该发回一个“got_it”。

我已经能够发送'ping'，它已经被服务器接收并发送回'got_it'，但我的客户端无法接收它。

我需要制作两个插座才能做到这一点吗？这是我的客户的代码。

```
int main(int argc, char **argv)
{
  int sockfd;
  struct sockaddr_in servaddr;
  socklen_t len = sizeof(servaddr);
  char mesg[1024];
  char mesg2[1024];
  char cli_ip[32];

  if(argc!=2){ 
    printf("Usage: %s <ip_addr>\n",argv[0]);
    return -EINVAL; 
  }

  sockfd = socket(PF_INET,SOCK_STREAM,0);
  if(sockfd<0) {
    perror("socket: ");
    return -EIO;
  }

  bzero(&servaddr, sizeof(servaddr));
  servaddr.sin_family = AF_INET;
  servaddr.sin_port = htons(54321);
  inet_pton(AF_INET,argv[1],&servaddr.sin_addr);

  if(connect(sockfd,(struct sockaddr *)&servaddr,sizeof(servaddr))<0){
    perror("connect: ");
    close(sockfd);
    return -EIO;

  }

  while(1){
        memset(mesg2,0,sizeof(mesg2));
    if(recv(sockfd,mesg2,sizeof(mesg2),0) > 0 ){
        puts(mesg2);
    }
    fgets(mesg,sizeof(mesg),stdin);
    send(sockfd,mesg,strlen(mesg),0);

  }
  close(sockfd);
  return 0;
} 
```

# curl - 使用 api 列出 github 上的所有 Java 存储库

> ID：12882049
> 
> 赞同：5
> 
> 时间：2012-10-14T12:08:04.097
> 
> 标签：curl, github, github-api

我正在尝试获取特定语言（例如 Java）的所有 github 存储库的列表，而不是通过任何特定关键字来缩小搜索范围。最好，我想直接从 curl 执行此操作，而不是编写脚本。问题是我已经尝试格式化 API URL，但没有找到正确的，包括`language=Java`参数但没有关键字。

例如，以下 URL 似乎在其描述中使用关键字“语言”或“java”查询存储库，包括一些 Scala 和 Haskell 存储库：

```
 curl -X GET https://api.github.com/legacy/repos/search/language=java 
```

另一方面，使用`?`符号返回空结果：

```
 curl -X GET https://api.github.com/legacy/repos/search?language=java
 curl -X GET https://api.github.com/legacy/repos/search/?language=java 
```

小写或大写 J 似乎也无关紧要。

那么如何在不指定关键字的情况下使用语言参数呢？

**评论**：一个似乎有效的技巧是使用单字母关键字，从 A 到 Z 重复。有没有更尴尬的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-04-09T08:44:08.100

我会根据 v3 api 使用它： [https ://api.github.com/search/repositories?q=language:Java](https://api.github.com/search/repositories?q=language:Java)

如果你想排序：

[https://api.github.com/search/repositories?q=language:Java&sort=stars&order=desc](https://api.github.com/search/repositories?q=language:Java&sort=stars&order=desc)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T17:15:36.607

你已经接近答案了。为了获得特定语言的结果，您必须使用冒号，如下所示：

```
language:{your_language_here} 
```

因此，对于 Java，它将是：

```
curl -X GET https://api.github.com/legacy/repos/search/language:java 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T13:59:03.823

您可以使用 github 站点上的主搜索表单来执行此操作。但请确保在查询中使用“语言：名称”语法，而不是使用语言下拉列表。

例如： [https ://github.com/search?q=language%3AJava&type=Repositories](https://github.com/search?q=language%3AJava&type=Repositories)

不像 API 中的 JSON 那样容易解析，但应该可以完成这项工作。

# android - 3 点椭圆尺寸并不总是显示

> ID：12882052
> 
> 赞同：2
> 
> 时间：2012-10-14T12:08:37.637
> 
> 标签：android, textview

我的布局中有一个 TextView，它有 2 行，如果其中的文本太长，应该用 3 个点剪切。
问题是 3 个点并不总是显示出来。有时如果文本中间有'\n'或空格太多，3个点不显示，用户无法知道文本未满。

如果您发现我的 xml 有任何问题，请告诉我。
谢谢

```
<TextView
    android:id="@+id/messageText"
    style="@style/bubblesTextStyle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@id/toString"
    android:layout_below="@id/inbox_contactName"
    android:layout_marginTop="-2dp" />

<style name="bubblesTextStyle" parent="@android:style/TextAppearance.Theme">
    <item name="android:ellipsize">end</item>
    <item name="android:maxLines">2</item>
    <item name="android:textColor">#666666</item>
    <item name="android:textSize">12sp</item>
</style> 
```

# java - 7zip 命令行 - 创建可执行的 jars

> ID：12882059
> 
> 赞同：3
> 
> 时间：2012-10-14T12:10:20.003
> 
> 标签：java, windows, zip, cmd, 7zip

我有一个`.jar`可以运行的可执行文件，但我想用另一个程序将一些文件添加到 .jar 文件中。我的想法是使用 7zip 命令行扩展名，但是当我尝试向`.jar`-File 中添加一些内容时。我使用这个命令：

`7za.exe a -t7z C:\myfiles\thejar.jar C:\filestoadd\* -r`

每次我尝试这样做时，CMD 都会向我抛出一个错误并说：

`Error: C:\myfiles\thejar.jar is not supported archive`

好吧，好吧。然后我的想法是解压缩文件`thejar.jar`，将文件添加到从中`thejar.jar`提取文件的目录并创建一个`.zip`扩展名为`.jar`. 当我这样做时，文件`thejar.jar`比以前小了大约 1MB ，向*其中*添加了文件。我尝试了不同的压缩方法，但它总是更小。当我尝试执行时`.jar`，弹出一条错误消息并说`Invalid or corrupt jarfile`。我已经用谷歌搜索了我的问题，但我现在还没有答案……你能帮帮我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T12:25:57.727

简单/推荐的解决方案是使用`jar`每个 Java JDK 中包含的命令将额外文件添加到 JAR。

也可以使用以下方法创建 JAR 文件`JarOutputStream`：

*   [如何使用 JarOutputStream 创建 JAR 文件？](https://stackoverflow.com/questions/1281229/how-to-use-jaroutputstream-to-create-a-jar-file/1281295#1281295)

使用 7zip 或任何其他“标准”zip 实用程序的问题在于，您可能会意外使用 Java 实用程序不理解的一些现代 zipfile 功能。

* * *

您还询问（在评论中）是否允许将`jar.exe`and`jli.dll`从 Oracle JDK / JRE 复制到您自己的项目中。

*   **阅读许可证！** 我们不是这里的律师，我们无法为您提供适当的法律建议。

*   我的理解是，这将违反 Oracle 许可和版权。允许嵌入完整的 JRE，但不允许挑选樱桃。

*   考虑改用 OpenJDK。OpenJDK 的许可是基于 GPL 的，并且对重新分发 vanilla 发行版没有基于版权的限制。甚至不修改和重新分发它...只要您提供可用的源代码并为您对它所做的任何更改构建说明¹。

* * *

最后，请注意，这在 Java 11 及以后的版本中没有实际意义。Oracle 现在只分发完整的 JDK。这意味着如果您的客户从 Oracle 安装“Java”，该`jar`命令将被包含在内。

* * *

^(1 - 您只需要担心商标。基本上，商标许可表明，如果产品以未经许可的方式偏离“标准”，则不得将其称为“Java”等。自己查找详细信息。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T12:30:03.647

`-t7z`将创建一个 7z 存档，而不是 zip。你需要`-tzip`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-10-08T15:13:54.457

我知道这是一篇旧帖子，但如果有人正在搜索以下信息，那么以下内容效果很好并且制作了一个可以正确执行的 jar，我自己跑过这篇帖子寻找信息，最后想出了以下内容。

对我来说，这种方法是做我需要的最简单的方法，而且比使用 jar 更容易、更快，而且作为批处理文件效果很好

C:\Progra~1\7-Zip\7z.exe a -tzip -mx9 -spf -r Filename.jar *

# ruby-on-rails - Rails 多对多：通过关联：销毁关联对象后关联对象不更新

> ID：12882068
> 
> 赞同：1
> 
> 时间：2012-10-14T12:12:03.060
> 
> 标签：ruby-on-rails, models, has-many

由于我是 Rails 新手，可能有一个简单的解决方案。但我什至无法在某个地方找到这个确切的问题。其他帖子处理破坏与删除（我都尝试了相同的结果），或者只是不提及关联对象的行为方式。

我的问题：我想通过 :through 创建一个多对多关联。当我删除一个关联（即关系对象，而不是相关对象）时，我希望在关联对象的所有模型实例中删除（更新）该关联。但这并没有完全发生。

我的例子：

```
Meeting < ActiveRecord::Base
  has_many :participations
  has_many :users, :through => :participations

User < ActiveRecord::Base
  has_many :participations
  has_many :meetings, :through => :participations

Participation < ActiveRecord::Base
  belongs_to :meeting, :foreign_key => :meeting_id
  belongs_to :user, :foreign_key => :user_id 
```

当我创建一个新关联时，关联的对象会相应地更新：

```
u = User.find(...)
m = Meeting.find(...)
m.users<< u 
```

以这种方式创建关联时也是如此：

```
m.participations.create(:user_id => u.id)  # this requires to make the user_id attribute accessible 
```

当我现在查看关联的用户模型实例时，它已按预期更新：

```
u.meetings >> contains the newly created association to the meeting m 
```

当我销毁（而不是删除！）这个关联时，关联的对象不会像我预期的那样更新：

```
m.users.find_by_user_id(u.id).destroy
m.users >> []
u.meetings >> still contains the destroyed association to meeting m 
```

我原以为 u.meetings 已更新且为空 ([])。添加验证无助于解决此问题：

```
Meeting < ActiveRecord::Base
  validates_associated :contacts
or
Participation < ActiveRecord::Base
  validates_presence_of :contact, :interview 
```

我做错了什么或者我在这里错过了什么？

我正在使用 Rails 3.2.8

感谢所有愿意帮助我的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:30:09.393

你应该这样做`:dependent => :destroy`。

```
Meeting < ActiveRecord::Base
  has_many :participations, :dependent => :destroy
  has_many :users, :through => :participations

User < ActiveRecord::Base
  has_many :participations, :dependent => :destroy
  has_many :meetings, :through => :participations

Participation < ActiveRecord::Base
  belongs_to :meeting, :foreign_key => :meeting_id
  belongs_to :user, :foreign_key => :user_id 
```

`participation`如果关联的用户或会议被销毁，这将确保销毁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:27:15.380

您应该`model`使用以下关系选项更新您的：

```
dependent: destroy 
```

这将调用`destroy`关联的对象。

参考：[http ://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Deleting+from+associations](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Deleting+from+associations)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:44:21.257

我想问题可能是这样的。在你的例子中，

```
m.users.find_by_user_id(u.id).destroy
m.users >> []
u.meetings >> still contains the destroyed association to meeting m 
```

`u`并且`u.meetings`之前已经加载过`m.users.find_by_user_id(u.id).destroy`。然后`u.meetings`输出缓存的数据。

您可以尝试`u.meetings(true)`或`u.reload; u.meetings`查看是否有任何区别。

# c# - 在运行时将控件添加到 ac# 用户控件并能够管理它们

> ID：12882069
> 
> 赞同：0
> 
> 时间：2012-10-14T12:12:20.197
> 
> 标签：c#, user-interface, user-controls

1）我开发ac#用户控件。在那个控件中，我有一个按钮。当用户在运行时单击按钮时，会在前一个图片框旁边创建一个新控件（例如图片框）。

我是这样做的：

```
PictureBox pb = new PictureBox();
pb.Location = new Point(oldPb.X, oldPb.Y + 100);
pb.Size = oldPb.Size;
Controls.Add(pb); 
```

问题是，我希望能够管理所有创建的项目。例如，我想索引图片框，然后从用户那里获取一个数字并更改想要的照片框的照片。例如：

```
photoBox3.Image = ....... 
```

我该怎么做？

2）我希望能够识别用户何时单击其中一个照片框并对所选照片框执行操作。我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:17:41.850

```
List<PictureBox> pictureBoxes = new List<PictureBox>();

for (int i = 0; i < 10; i++)
{
    PictureBox pb = new PictureBox();
    pb.Location = new Point(.....);
    pb.Size = ......;
    pb.Click += pb_Click;
    Controls.Add(pb);
    pictureBoxes.Add(pb);
}

pictureBoxes[3].Image=..... //Use like this 
```

* * *

```
void pb_Click(object sender, EventArgs e)
{
    PictureBox pb = sender as PictureBox;
    //Do work
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:18:03.740

您可以使用`Tag`PictureBox 的属性来存储某种索引。

然后，您可以让所有 PictureBoxes 响应单击事件：

`pb.Click += new EventHandler(picturebox_Click);`

并检查那里的标签

```
private void picturebox_Click(object sender, EventArgs e)
{
   PictureBox pb = sender as PictureBox;
   if (pb != null)
   {
     string s = pb.Tag
   }
} 
```

# solr - SOLR：可以 hl.q 在突出显示时覆盖 q=*:*

> ID：12882070
> 
> 赞同：1
> 
> 时间：2012-10-14T12:12:30.103
> 
> 标签：solr, lucene, highlighting

我想知道当 q 有值时 hl.q 参数是否可以覆盖 q 参数`*:*`

**示例 URL：** hl.q 成功覆盖 q=title:new york 并在下面提到的 URL 中突出显示 Empire State。

```
http://localhost:8983/solr/select?q=title:new york&hl=on&hl.q=Empire state. 
```

但是当 URL 是这样的时候：

```
http://localhost:8983/solr/select?q=*:*&hl=on&hl.q=Empire state. 
```

hl.q 参数不覆盖 q 参数，并且来自 solr 的突出显示数组为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T12:00:36.090

在这种情况下，我认为问题在于，当您按字段查询时，`title:new york`突出显示知道它应该为该`title`字段生成突出显示结果。但是，当您搜索所有字段时，它会尝试为所有字段生成突出显示结果，因为这可能会在服务器上占用大量资源并导致性能问题。

在这种情况下，我建议在您的请求中添加一个[hl.fl](http://wiki.apache.org/solr/HighlightingParameters#hl.fl)参数，以指示您希望突出显示结果的字段。如文档中所述，您可以根据需要指定`*`此值。

```
http://localhost:8983/solr/select?q=*:*&hl=on&hl.fl=*&hl.q=Empire state. 
```

# java - 当我将静态对象分配给非静态对象时会发生什么？

> ID：12882080
> 
> 赞同：-2
> 
> 时间：2012-10-14T12:13:36.030
> 
> 标签：java, static

我想知道当我将静态对象分配给非静态对象时会发生什么？例如：

```
public class Test{
   public void test(){
      BoneCp cp=BoneCpLoad.getBoneCpPool();
   }
}

public class BoneCpLoad{
    private static BoneCpPool pool =new BoneCpPool();
    public static BoneCp getBoneCpPool(){
        return pool;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:17:49.557

静态对象实际上并不存在。

在这种情况下，静态关键字指的是 getBoneCpPool() 方法。这是完全合法的，静态方法返回一个 BonceCp 对象的实例。

static 修饰符关键字可以应用于方法，表示方法不属于类的特定实例，而是属于类本身。

static 修饰符关键字也可以应用于字段（实际上是对对象的静态引用）。在这种情况下，表示不属于类的特定实例但在同一类型的所有类实例之间共享的字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:17:32.147

这并不是真正将静态对象分配给非静态对象。

```
BoneCp cp = BoneCpLoad.getBoneCpPool(); 
```

这条线相当于

```
BoneCp cp = new BoneCpPool(); 
```

这只是对象的正常实例化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:17:38.823

这整个问题是基于一个错误的前提。

在 Java 中，没有`static`对象这样的东西。所有对象都存在于堆中，它们的生命周期由可达性决定。

有*变量*这样的东西`static`。但是，当您分配对`static`变量的引用时，没有什么特别的事情发生。该变量现在只包含对该对象的引用。同样，当您将变量中的引用分配`static`给任何其他类型的变量时，也不会发生任何特殊情况。

# apache - 标头在 javascript 文件不工作时过期

> ID：12882081
> 
> 赞同：6
> 
> 时间：2012-10-14T12:13:54.893
> 
> 标签：apache, .htaccess, header, mod-expires

我无法让 JS 文件上的过期标头正常工作。它适用于例如 CSS 文件！？

谁能告诉我我做错了什么？:(

# htaccess

```
ExpiresActive on
ExpiresDefault A0
ExpiresByType image/gif A29030400
ExpiresByType image/jpeg A29030400
ExpiresByType image/png A29030400
ExpiresByType text/css A29030400
ExpiresByType text/javascript A29030400
ExpiresByType application/x-javascript A29030400 
```

# CSS文件的标题

```
Cache-Control   max-age=29030400
Connection  Keep-Alive
Date    Sun, 14 Oct 2012 12:06:45 GMT
Etag    "be-4cbcf2ad48b40"
Expires Sun, 15 Sep 2013 12:06:45 GMT
Keep-Alive  timeout=5, max=97
Server  Apache/2.4.2 (Win64) PHP/5.4.3 
```

# JS文件头

```
Cache-Control   max-age=0
Connection  Keep-Alive
Date    Sun, 14 Oct 2012 12:06:45 GMT
Etag    "1ad-4cc00d069f493"
Expires Sun, 14 Oct 2012 12:06:45 GMT
Keep-Alive  timeout=5, max=99
Server  Apache/2.4.2 (Win64) PHP/5.4.3 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T01:48:11.307

（还不能发表评论......）我运行以下设置并且它有效。

```
ExpiresByType text/js "access plus 1 years"
ExpiresByType text/javascript "access plus 1 years"
ExpiresByType application/javascript "access plus 1 years"
ExpiresByType application/x-javascript "access plus 1 years" 
```

应该管用

干杯罗宾

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-17T13:55:18.940

尝试将 an 包装`ExpiresDefault`在`<filesMatch`标签中，而不是使用`ExpiresByType`：

```
<filesMatch "\.(js)$"> 
    ExpiresDefault A29030400 
</filesMatch> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-05T16:27:00.797

您可能需要从 Apache 主机配置中激活 Expires 模块。

就我而言，我添加了

```
 ExpiresActive On 
```

就在第一个`ExpiresByType`指令之前，它立即开始工作（在 Apache 重新加载之后）。

我不确定为什么需要明确启用它。在其他服务器上，一旦我启用了 mod，它就可以工作`a2enmod`（也许使用 Apache 2.2，但我找不到明确的模式）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-11T16:21:20.817

老问题，但这是我学到的：

在浏览器中按**F12**（我使用的是 Chrome）并转到“**网络**”选项卡并查找未缓存的 javascript。在此处查找**标头信息**（例如，通过“标头”选项卡）并查看响应标头信息中的“**内容类型**”。

就我而言，它是“ **application/javascript** ”，我没有在我的`.htaccess`. 一旦我添加了那行：

```
ExpiresByType application/javascript "access plus 2419200 seconds" 
```

然后javascript按预期被缓存。

# bash - BASH - 来自变量的变量名

> ID：12882089
> 
> 赞同：0
> 
> 时间：2012-10-14T12:15:26.127
> 
> 标签：bash

我的代码

```
TOTAL=${#FOO_5[*]} // COUNT ITEMS IN ARRAY 
```

如果代码怎么办

```
ARRAY_NAME="FOO_5"
TOTAL=${#${!ARRAY_NAME}[*]} //error 
```

请修复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:52:21.653

当涉及到间接参数扩展时，数组索引被认为是参数名称的一部分。不幸的是，您不能链接参数扩展；您还需要一个中间变量。

```
ARRAY_NAME="FOO_5[*]"
FULL=${!ARRAY_NAME}
TOTAL=${#FULL} 
```

# c++ - 将 std::list 扩展为循环列表

> ID：12882090
> 
> 赞同：1
> 
> 时间：2012-10-14T12:15:32.257
> 
> 标签：c++, list, iterator

我想实现一个基于 std::list 的循环列表。我想从列表的好处中获益，但添加一个特定功能：它的迭代器运算符 ++ 和 -- 应该跳过边缘，并且操作（插入/擦除）不能使现有迭代器无效。我处理模板的技能很弱，理解标准容器对我来说是不可能的。因此我需要你的帮助。到目前为止，我还没有那么远：D。抱歉，即使是众多帖子也对我没有任何帮助。

编辑：经过大量工作，陡峭的学习曲线，从 std::list::iterator 继承的失败方法，短期抑郁和对你方法的回归（是的，你们都是对的）我终于做好了。受到您所有贡献的启发，我现在可以发布我最近所做的事情......大约 12 小时 :D 基本上是您的建议，但有很好的小操作员。

```
#pragma once
#include <list>
using std::list;

template<class T>
class cyclic_iterator;

template<class T>
class cyclicList : public list<T>
{
public:
  typedef cyclic_iterator<T> cyclic_iterator;

  cyclic_iterator cycbegin()
  {// not the purpose, but needed for instanziation
    return cyclic_iterator( *this, this->begin());
  }

  cyclic_iterator cycend()
  {// not the purpose, but needed for instanziation
    return cyclic_iterator( *this, this->end());
  }
};

template<class T>
class cyclic_iterator
{
  public:
  // To hop over edges need to know the container
  cyclic_iterator(){}
  cyclic_iterator(typename list<T>::iterator i)
    : mIter(i){}
  cyclic_iterator(list<T> &c)
    : mContainer(&c){}
  cyclic_iterator(list<T> &c, typename list<T>::iterator i)
    : mContainer(&c), mIter(i){}

  cyclic_iterator<T>& operator=(typename list<T>::iterator i)
  {// assign an interator
    mIter = i;
    return *this;
  }

  cyclic_iterator<T>& operator=(list<T> &c)
  {// assign a container
    mContainer = &c;
    return *this;
  } 

  bool operator==(const cyclic_iterator<T>& rVal) const
  {// check for equality
    return (this->mIter == rVal.mIter && this->mContainer == rVal.mContainer) ? true : false;
  } 

  bool operator!=(const cyclic_iterator<T>& rVal) const
  {//  check for inequality
    return !(this->operator==(rVal));
  } 

  cyclic_iterator<T>& operator++()
  {// preincrement
    ++mIter;
    if (mIter == mContainer->end())
      { mIter = mContainer->begin(); }
    return *this;
  }

  cyclic_iterator<T> operator++(int)
  { // postincrement
    cyclic_iterator<T> tmp = *this;
    ++*this;
    return tmp;
  }

  cyclic_iterator<T>& operator--()
  {// predecrement
    if (mIter == mContainer->begin())
      mIter = --mContainer->end();
    else --mIter;
    return *this;
  }

  cyclic_iterator<T> operator--(int)
  {// postdecrement
    cyclic_iterator<T> tmp = *this;
    --*this;
    return tmp;
  }

  cyclic_iterator<T>& operator+=(int j)
  {// hop j nodes forward
    for (int i = 0; i < j; ++i)
      ++(*this);
    return *this;
  }

  cyclic_iterator<T>& operator-=(int j)
  {// hop j nodes backwards
    for (int i = 0; i < j; ++i)
      --(*this);
    return *this;
  }

  T& operator*()
  {
    return *mIter;
  }

  typename list<T>::iterator & getStdIterator()
  {
    return mIter;
  }

private:  
  list<T>*          mContainer;
  typename list<T>::iterator mIter;

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T12:46:40.973

你不能只做一个不同的迭代器类型吗？

```
#include <iterator>
#include <list>

template <typename T, typename Alloc>
struct cyclic_iterator
: std::iterator<typename std::list<T, Alloc>::iterator::iterator_category, T>
{
    typedef std::list<T, Alloc> list_type;

    cyclic_iterator & operator++()
    {
        ++iter;
        if (iter == container.end()) { iter = container.begin(); }
        return *this;
    }

    T & operator*() { return *iter; }

    cyclic_iterator(typename list_type::iterator it, list_type & l)
    : iter(it)
    , container(l)
    {
        if (it == container.end()) { it = container.begin(); }
    }

    // everything else

private:
    typename list_type::iterator iter;
    list_type & container;
}; 
```

有帮手：

```
template <typename List>
cyclic_iterator<typename List::value_type, typename List::allocator_type>
make_cyclic_iterator(typename List::iterator it, List & l)
{
    return cyclic_iterator<typename List::value_type, typename List::allocator_type>(it, l);
} 
```

用法：

```
// goes round and round forever

for (auto ci = make_cyclic_iterator(mylist.begin(), mylist); ; ++ci)
{
    std::cout << *ci << std::endl;
} 
```

（通过一些修改，这段代码可以在*任何*`begin`暴露/`end`迭代器的容器上工作。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T12:19:35.470

这是不可能的。迭代器和结束元素的实现是特定于实现的，不可定制。容器不是为那种东西设计的，这会让它们变得非常困难。您将不得不自己经历实现这一点的痛苦。请记住，这变得非常棘手，因为循环列表没有真正的结束迭代器，并且迭代器无法真正处理这种情况。一些库有一个循环器概念来处理循环结构。

注意：从标准容器继承是一个坏主意。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:52:45.043

当然你可以使用 实现它`std::list`，但首先你应该在你的类中封装列表并且不要从它派生第二你必须实现你自己的迭代器来完成这个，但是由于循环列表的大小是固定的，我更喜欢一个固定大小的容器和线性内存，如`std::array`or `std::vector`。

```
template<
    class T,
    class Container = std::vector<T>
>
class circular_list {
public:
    // Following typedef are required to make your class a container
    typedef typename Container::size_type size_type;
    typedef typename Container::difference_type difference_type;
    typedef typename Container::pointer pointer;
    typedef typename Container::const_pointer const_pointer;
    typedef typename Container::reference reference;
    typedef typename Container::const_reference const_reference;
    typedef typename Container::value_type value_type;
public:
    class iterator : std::iterator<std::bidirectional_iterator_tag, value_type> {
    public:
        iterator() : c_(nullptr) {}
        iterator(circular_buffer& c, size_type index)
            : c_( &c.c_ ), index_( index ) {}

        reference operator* () const {
            return (*c_)[index_];
        }
        iterator& operator++ () {
            if( ++index_ >= c_->size() ) index_ = 0;
            return *this;
        }
        iterator& operator-- () {
            if( index_ == 0 ) index_ = c_->size() - 1; else --index_;
            return *this;
        }

    private:
        size_type index_;
        Container* c_;
    };

public:
    void push( const_reference val ) {add item to the container}
    reference current() {return current item from the container}
    void pop() {remove item from the container}

    size_type size() const {return c_.size();}
    iterator begin() {return iterator( *this, 0 );}
    iterator end() {return iterator( *this, size() );}

private:
    friend iterator;
    Container c_;
} 
```

# java - 长时间等待后向客户端发送文件

> ID：12882097
> 
> 赞同：1
> 
> 时间：2012-10-14T12:17:04.363
> 
> 标签：java, servlets, download

我有一个 java servlet 可以生成一些报告。当用户选择报告时，它会在数据库上进行查询并将 xls 报告流式传输到客户端。全部以同步方式进行。问题是有时我有很多记录要从数据库中获取，我想提供更好的用户体验，允许用户在报告处理时做其他事情，并以某种方式弹出链接时过程结束。是否有 Java 库或一些技术可以避免长时间等待并实现该目标？

现在我已经准备了一段代码，它以异步方式完成报告并向注册客户端发送一封电子邮件，其中包含下载文件的 url，但它必须用其他东西替换，因为我不能再通过电子邮件进行交流。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:27:14.217

这是我对此的看法，我不知道有哪个库可以完全满足您的需求，您可能需要在这里进行一些自定义开发。

*   我相信你已经实现了异步服务，完成后会发送一封电子邮件通知。与其发送电子邮件，不如让该线程更新某种作业表——数据库表中的条目或某些应用程序/会话范围的映射。
*   有一个 servlet/restful ws
*   在某个 url 上公开该作业表。定期轮询 url。Ajax poll 是 js 库 JQuery、Prototype 中的标准功能。
*   当您收到某个报告已完成的响应时，显示一些弹出窗口，或者可能是客户端的 facebook you-have-notification 之类的东西。

我在这里没有考虑过身份验证/授权问题，您也需要注意这一点。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:41:06.290

用于下载我的图像文件的多线程客户端服务器程序。由于有四个文件要下载，客户端进行了 4 次连接尝试。这不仅限于 4 个，但 FileServer 发送的文件将在第四次尝试后重复。保存对话框和文件保存在不同的线程中完成，以免妨碍文件下载。

这是文件服务器...

```
public class FileServer {
    private final ExecutorService exec = Executors.newCachedThreadPool();

    final String[] fileNames = {
            "C:\\Users\\clobo\\Pictures\\Arpeggios\\Ex 1.jpg",
            "C:\\Users\\clobo\\Pictures\\Arpeggios\\Ex 2.jpg",
            "C:\\Users\\clobo\\Pictures\\Arpeggios\\Ex 3.jpg",
            "C:\\Users\\clobo\\Pictures\\Arpeggios\\Ex 4.jpg"

    };

    public void start() throws IOException {
        ServerSocket socket = new ServerSocket(7777);
        System.out.println("Waiting for client message...");

        while (!exec.isShutdown()) {
            try {
                for (final String fileName : fileNames){
                     final Socket conn = socket.accept();

                    exec.execute(new Runnable() {
                        public void run() {
                            sendFile(conn,fileName);

                        }
                    });
                }
            } catch (RejectedExecutionException e) {
                if (!exec.isShutdown())
                    log("task submission rejected", e);
            }
        }
    }

    public void stop() {
        System.out.println("Shutting down server...");
        exec.shutdown();
    }

    private void log(String msg, Exception e) {
        Logger.getAnonymousLogger().log(Level.WARNING, msg, e);
    }

    public void sendFile(Socket conn, String fileName) {
        File myFile = new File(fileName);
        if (!myFile.exists()) {
            log("File does not exist!",null);
        }

        // file does exist
        System.out.println(Thread.currentThread().getName());
        System.out.println("AbsolutePath:" + myFile.getAbsolutePath());
        System.out.println("length: " + myFile.length());

        if (myFile.exists()) {
            try {
                ObjectOutputStream oos = new ObjectOutputStream(
                conn.getOutputStream());
                oos.writeObject(myFile);
                oos.close();
            } catch (IOException e) {
                log("IOException Error", e);
                e.printStackTrace();
            }
        }
    }

    public static void main(String[] args) throws IOException {

        FileServer fs = new FileServer();
        fs.start();
    }
} 
```

这是文件服务器客户端...

```
public class FileServerClient {

    private final ExecutorService exec = Executors.newCachedThreadPool();
    Frame myFrame = new Frame();
    List<File> fileList = new ArrayList<File>();

    public void receiveFileFromServer() throws Exception{

        Socket sock = null;
        InputStream socketInputStream = null;
        String host = "localhost";
        int port = 7777;

        for (int i=0;i<4;i++) {

            sock = new Socket(host, port);
            socketInputStream = sock.getInputStream();
            System.out.println("Connection successful...");

            // recieve the file
            ObjectInputStream ois = new ObjectInputStream(socketInputStream);

            // file from server is deserialized
            final File myfile = (File) ois.readObject();
            fileList.add(myfile);

            // deserialized file properties 
            System.out.println("AbsolutePath: " + myfile.getAbsolutePath());
            System.out.println("FileName:" + myfile.getName());
            System.out.println("length" + myfile.length());
            exec.execute(new Runnable() {
                public void run() {

                    saveFile(myfile);

                }
            });

        }

    }

    private void saveFile(File myfile) {
        FileDialog fileDialog = new FileDialog(myFrame,
                "Choose Destination for "+ myfile.getName(), FileDialog.SAVE);
        fileDialog.setDirectory(null);
        fileDialog.setFile("enter file name here");
        fileDialog.setVisible(true);

        String targetFileName = fileDialog.getDirectory()
                + fileDialog.getFile() + ".jpg";

        System.out.println("File will be saved to: " + targetFileName);

        copyBytes(myfile, targetFileName);
    }

    private void copyBytes(File originalFile, String targetFileName) {

        try {
            FileInputStream in = new FileInputStream(originalFile);
            FileOutputStream out = new FileOutputStream(targetFileName);
            int c;

            while ((c = in.read()) != -1) {
                out.write(c);
            }
            out.close();
            in.close();

        } catch (Exception e) {
            log("IOException Error", e);
        }

    }

    private void log(String msg, Exception e) {
        Logger.getAnonymousLogger().log(Level.WARNING, msg, e);
    }

    public static void main(String[] args) throws Exception {

        FileServerClient client = new FileServerClient();

        client.receiveFileFromServer();

    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:52:29.680

您可以从客户端发出异步请求。让我们假设您的客户是一个 html 页面。当用户选择报告并单击“提交”时，您可以使用报告参数触发 ajax 请求（jquery 对此很有用）。最好在用户主页上保留一个部分，上面写着“准备好的报告”之类的内容。然后，客户可以转到准备好的报告部分下载报告。如上面评论中所述，您可能还必须实现一个弹出窗口，通知用户请求的报告已准备好。当 ajax 请求成功返回时显示弹出窗口。但是，客户端可能在报告完成时已注销，因此最好在用户登录时在“准备好的报告”部分中再次提供下载链接。

# scala - 如何使用不可变的 Salat 案例类更新 Mongo 中的对象

> ID：12882099
> 
> 赞同：1
> 
> 时间：2012-10-14T12:17:08.640
> 
> 标签：scala, mongodb, playframework-2.0, casbah, salat

我正在使用 Scala、Salat、Casbah、Mongo、Play2、BackboneJS 开展一个项目……但同时要学习很多新东西……我对 Scala 没问题，但我找到了我的代码蹩脚的，我真的不知道改进它的解决方案是什么。

基本上我的用例是：

*   一个MongoDB对象被Play2发送到浏览器的JS代码
*   JS 代码更新对象数据（通过 Backbone 模型）
*   JS 将更新后的 JSON 发送回服务器（由 Backbone 保存方法发送，并由 Play 使用 json bodyparser 接收）
*   Play 收到的 JSON 应该更新 MongoDB 中的对象
*   出于安全原因，某些字段不应更新（对象 id、creationDate...）

* * *

我的问题是最后一部分。我使用带有 Salat 的案例类作为存储在 MongoDB 中的对象的表示。

我真的不知道如何处理从 JS 代码收到的 JSON。

*   我是否应该将 JSON 绑定到 Salat 案例类中，然后要求 Mongo 用全新的案例类对象覆盖以前的对象数据？如果是这样，Play2 或 Salat 有没有办法从收到的 JSON 中自动创建案例类？

*   我应该为我想要更新的字段单独处理我的 JSON 字段吗？

*   我应该使我的案例类的元素可变吗？这就是我们在 Java 中使用 Hibernate 所做的实际操作：从 DB 中获取对象，更改其状态，然后保存它。但这似乎不是使用 Scala 的合适方式......

如果有人可以为我的用例给我一些建议，那就太好了，因为我真的不知道该怎么做:(

编辑：我在这里问了一个相关问题：[我应该用不可变或可变数据结构表示数据库数据吗？](https://stackoverflow.com/questions/12993859/fp-representing-database-data-by-immutable-or-mutable-data-structures)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T13:20:41.883

Salat 使用 lift-json 处理 JSON - 请参阅[https://github.com/novus/salat/wiki/SalatWithPlay2](https://github.com/novus/salat/wiki/SalatWithPlay2)。

Play 本身使用 Jerkson，这是解码模型对象的另一种方法 -有关示例，请参见[http://blog.xebia.com/2012/07/22/play-body-parsing-with-jerkson/ 。](http://blog.xebia.com/2012/07/22/play-body-parsing-with-jerkson/)

随意制作一个小示例 Github 项目来演示您的问题，并发布到[https://groups.google.com/group/scala-salat](https://groups.google.com/group/scala-salat)上的 Salat 邮件列表寻求帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T17:09:43.500

你的问题确实有两个问题：

1.  如何使用 Play Salat。
2.  如何防止更新某些字段。

您的第一个问题的答案在于[Play Salat 文档](https://github.com/leon/play-salat/blob/master/README.md)。您的第二个问题可以通过几种方式回答。

一个。当更新从 Backbone 推送到服务器时，您可以获取对象 ID 并在数据库中找到它。此时，您拥有该对象的两个副本。此时，您可以触发业务规则以确保发件人没有尝试更改这些字段。

或者

湾。您可以将某些字段放在嵌入文档的另一个文档中。客户端可以访问它们以进行渲染，但您的 API 不允许将它们推回 Mongo。

或者

C。您可以编写一个自定义更新查询，忽略您不想更改的字段。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-25T15:01:38.940

实际上答案很简单：我不知道案例类中有一个内置的复制方法，它允许在更改某些数据的同时复制不可变的案例类。

我没有嵌套的案例类结构，但 Tony Morris 建议使用 Lenses 似乎也不错。

# javascript - 输入字段中的动态段落文本

> ID：12882100
> 
> 赞同：0
> 
> 时间：2012-10-14T12:17:08.303
> 
> 标签：javascript, dynamic, text, input

[http://lrroberts0122.github.com/DWS/lab6/level-3/index.html](http://lrroberts0122.github.com/DWS/lab6/level-3/index.html)

[http://lrroberts0122.github.com/DWS/lab6/level-3/js/script.js](http://lrroberts0122.github.com/DWS/lab6/level-3/js/script.js)

**我正在尝试做的事情：**对于“您的个人资料链接”字段，我正在尝试使输入的文本动态显示在“fitandawesome.com/”之后，以便显示用户的个人资料链接。

好的，这就是我添加的内容，根据消息来源，这*应该*有效。为什么不呢？如果有人可以帮助我，我将不胜感激。我对 JavaScript 不太了解！

**更新**好的，所以我通过将脚本放在身体而不是头部来让它工作。然而，我仍然有问题，因为它有点“滞后”。它不显示最后输入的字母。有人知道怎么修这个东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:33:05.487

加载 DOM 后，您需要调用 script.js。有两种方法可以做到这一点：

1.  在正文末尾链接您的 script.js。
2.  页面加载后，使用 jQuery 事件侦听器运行代码。

.

```
$(function(){
    $('#profile_link').keypress(function(){
        $('#preview').text($(this).val());
    });
}) 
```

# html - 谷歌网络字体拉丁大字符

> ID：12882109
> 
> 赞同：1
> 
> 时间：2012-10-14T12:17:50.477
> 
> 标签：html, css, fonts, google-webfonts, latin

我需要谷歌网络字体的帮助。我正在使用 Ubuntu Condensed，所有拉丁字符在 google webfonts 网站上都可以正常工作，但是当我在我的网站上使用它时，小写字母**žšć**很大。使用：

```
<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Ubuntu+Condensed"> 
```

这是示例：[http ://dsgnet.net/desavanja/](http://dsgnet.net/desavanja/)

在页脚**Uslovi korišćenja 的**文字看起来很糟糕。

这里有什么问题，我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:31:12.520

您需要包含额外的字体子集。

在此处查看“2\. 选择所需的字符集”：[http ://www.google.com/webfonts/#QuickUsePlace:quickUse/Family:Ubuntu+Condensed](http://www.google.com/webfonts/#QuickUsePlace:quickUse/Family:Ubuntu+Condensed)

使用所有可用的子集，您`<link>`将如下所示：

```
<link href='http://fonts.googleapis.com/css?family=Ubuntu+Condensed&subset=latin,cyrillic-ext,greek-ext,greek,latin-ext,cyrillic' rel='stylesheet' type='text/css'> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T17:34:06.217

仅使用 latin-ext 还不够吗？

```
<link href='http://fonts.googleapis.com/css?family=Ubuntu+Condensed&subset=latin-ext' rel='stylesheet' type='text/css'> 
```

# websocket - Dart 有 socket.io 端口吗？

> ID：12882112
> 
> 赞同：8
> 
> 时间：2012-10-14T12:18:01.213
> 
> 标签：websocket, socket.io, real-time, dart

我使用这个简单的示例查看了 Dart 中的基本 websocket 功能： [https ://github.com/financeCoding/chat-websocket-dart](https://github.com/financeCoding/chat-websocket-dart)

但是我想知道是否有一个不错的库可以用来使用 websockets 构建实时在线游戏。我有使用 node.js 和 socket.io 的经验，效果很好。我需要能够拥有“房间”、加入房间、离开房间、向房间中的客户广播等，以及一些关于连接“健康”、重新连接等的好概念。所以我要问的是是否有一个不错的 dart 库，具有类似的功能？更酷的是在该库之上的库，它可以通过变量同步等实现良好的 RPC 功能，例如[http://nowjs.com/](http://nowjs.com/)使用 socket.io 实现这一点。但我想这可能过于雄心勃勃。

如果有人有任何经验或找到与我所说的类似的项目，请告诉我:)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-26T21:44:41.610

Duct 是 Dart 中 Socket.IO 的克隆，旨在与原始实现在协议级别兼容。

[https://github.com/petrhosek/duct](https://github.com/petrhosek/duct)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T03:52:23.520

抱歉，在撰写本文时，我还不知道 Dart 的 socket.io 端口。socket.io 很好，因为它为不支持 Web 套接字的浏览器提供了一堆实现选项。

听起来像是一个黑客马拉松项目的好主意！

# php - 这个 php 生成的表有什么问题？

> ID：12882114
> 
> 赞同：-3
> 
> 时间：2012-10-14T12:18:12.723
> 
> 标签：php, html-table

我正在尝试通过 PHP 创建一个表格，但是当我加载它时，它会像这样显示它..

![打印屏幕](../Images/7b226e5a2c98100954de5de688efb723.png)

编码：

```
<table border="1" cellpadding="5">
<?php
while($test= mysql_fetch_assoc($countquery)){
        echo '<tr><td>';
    echo $test["count"];
    echo 'x</td>';
};
while($row=mysql_fetch_array($topresult)) {
    echo '<td width="150">';
    echo $row["productnaam"];
    echo '</td><td width="100" style="text-align:center;">&euro; ';
    echo $row["prijs"];
    echo '</td><td width="50" style="text-align:center;">';
    echo '<a style="text-decoration:none;color:red;" href="#"><img width="25" src="trash.png"></a>';
    echo '</td></tr>';
};
?>
</table> 
```

我的目标是显示一个 4 列 3 行的表格。

**编辑：** 已经找到它，`<tr>`每次执行第一个标签时都会创建一个新标签`while`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:21:57.907

您正在回显嵌套行。

```
while($test= mysql_fetch_assoc($countquery)){
    echo '<tr><td>';// Here you open a row
echo $test["count"];
echo 'x</td>';//No closing of row, you close the td and open another tr on the next iteration
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:22:58.943

块：

```
while($test= mysql_fetch_assoc($countquery)){
        echo '<tr><td>';
    echo $test["count"];
    echo 'x</td>';
}; 
```

将首先创建 3 个单元格 1x、1x、2x，然后是块：

```
 while($row=mysql_fetch_array($topresult)) {
    echo '<td width="150">';
    echo $row["productnaam"];
    echo '</td><td width="100" style="text-align:center;">&euro; ';
    echo $row["prijs"];
    echo '</td><td width="50" style="text-align:center;">';
    echo '<a style="text-decoration:none;color:red;" href="#"><img width="25" src="trash.png"></a>';
    echo '</td></tr>';
}; 
```

将从监视器创建单元格，因此结果变成这样。要修复它，您应该将第一个`while`循环的结果保存到一个数组并在第二个`while`循环中执行

# .net-4.0 - 将 ASP.Net MVC4 站点转换为 Azure

> ID：12882116
> 
> 赞同：1
> 
> 时间：2012-10-14T12:18:37.437
> 
> 标签：.net-4.0, azure, asp.net-mvc-4, azure-web-roles

我创建了一个 ASP.Net MVC 4 网站，其中有几个在 ~/App_Start/RouteConfig 文件中注册的自定义路由。

```
public class RouteConfig
{
    public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

        routes.MapRoute(
            name: "Empty",
            url: "",
            defaults: new { controller = "Home", action = "Index", id = 0 }
        );

        routes.MapRoute(
            name: "Session",
            url: "{id}",
            defaults: new { controller = "Home", action = "Index" }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );
    }
} 
```

该站点在 Azure 之外运行良好，甚至可以在 Azure 模拟器中运行，但是当我将其移至 Azure 时，它​​的行为就像没有路线一样。例如，当我尝试导航到网站的根目录时，我收到一条错误消息：

```
403 - Forbidden: Access is denied.

You do not have permission to view this directory or page using the credentials that you supplied. 
```

这让我认为该路线根本不起作用，所以我尝试转到另一个页面，例如[http://myapp.cloudapp.net/1234](http://myapp.cloudapp.net/1234)（应该将 1234 发送到主控制器的索引操作中。但是该操作给了我一个404 错误。

我检查了我的配置和新的 ASP.Net MVC 4 Azure 项目，它们看起来是一样的。我也通读了[这个](http://blogs.msdn.com/b/jnak/archive/2010/02/08/migrating-an-existing-asp-net-app-to-run-on-windows-azure.aspx)，它给出了一些指示，但最终没有帮助。

有关如何解决此问题的任何建议？

**更新**

这是一个 WebRole 项目，正在使用 .Net 4.0（我已经从 4.5 向下转换）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:10:17.420

您是否尝试过按照本文设置默认页面[http://www.sunilhaste.com/2011/04/403-forbidden-access-is-denied-error.html](http://www.sunilhaste.com/2011/04/403-forbidden-access-is-denied-error.html)

> 1.  将 Web 角色上传到 Azure 后，您尝试访问应用程序并突然收到“403-Forbidden, Access denied”错误。
> 2.  您可以通过提供完整的网址来访问页面：- [http://xyz.cloudapp.net/Pages/Home.aspx](http://xyz.cloudapp.net/Pages/Home.aspx)。
> 3.  您网站的根级别没有 default.aspx 页面。解决方案：- 您应该做的第一件事是，检查您是否在 system.webserver 标签内的 web.config 文件中添加了以下标签。
> 
> ```
>  <add value="Pages/Home.aspx"/> 
> ```

我也遇到过类似的问题，我的问题是通过将角色设置为 2008 R2 来解决的。有人在链接文章的评论中说

> 将操作系统配置从 MS SERVER 2008 SP2 更改为 MS SERVER 2008 R2

另请参阅以下[Asp.net 和 Azure - 无法再显示我的 Web 应用程序](https://stackoverflow.com/questions/10243533/asp-net-and-azure-cant-no-longer-show-my-web-application)建议检查您有`<modules runAllManagedModulesForAllRequests="true" />`

此外，我假设您确保将 MVC4 文件部署到 Azure。您的 RDP 是否已连接到机器并检查了事件日志等？

# python - 为什么我的条目小部件中没有出现文本

> ID：12882118
> 
> 赞同：0
> 
> 时间：2012-10-14T12:18:44.410
> 
> 标签：python, tkinter

G'day 所有，

我有一个 os.walks 收集一些数据的小应用程序。虽然它正在工作，但我认为在其中放置一个带有文本“正在处理”的条目小部件并在行走完成后将其更改为“已完成”可能会很好。

问题是“处理”永远不会出现。处理需要几秒钟，所以它不会很快结束而无法看到。

```
def do_search():

txtProgress.delete(0,END)
txtProgress.insert(0, "Processing Data")

print 'do_search called'

arrayOfDirectories = [] # Store the categories here
global path
print  'The value for path = ' + path # Delete this in final
searchpath = path
print  'The value for searchpath = ' + searchpath # Delete this in final

for (searchpath, directories, files) in os.walk(searchpath):
    for directory in directories:
        arrayOfDirectories.append(directory) # Create an array or dirs to use for the categories

id = 1
finalJSON = '['

for eachDirectory in arrayOfDirectories:
    readpath = os.path.join(path, eachDirectory, 'URLS') # Grab each list of URLs
    print('readpath = ' + readpath)

    if os.path.exists(readpath):
        file = open(readpath) # Open the list of URLs
        for lines in file: # Step through each URL in turn

            ruleString = '{"id":' + str(id) + ',"enabled":true, "category":"' + eachDirectory + '","description":"' + lines + '","flagged":true,"string":"' + lines + '","name":"","javaClass":"com.untangle.uvm.node.GenericRule","blocked":true}'
            #print(ruleString)
            finalJSON = finalJSON + ruleString # Create a rule and add it to the final string
            id = id + 1 # Increment the id after each rule
        file.close() # Close the file when all have been read 
```

如果它不起作用，这不是火车粉碎，但我不明白为什么没有出现文本。

一如既往，所有的建议都欣然接受。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:37:18.233

简而言之，你永远不会给你的程序展示它的机会。重绘屏幕仅作为重绘事件的结果发生，因此除非事件循环有机会为该事件提供服务，否则不会显示任何内容。这不是 Tkinter 独有的——所有 GUI 工具包都以这种方式工作。

`txtProgress.update_idletasks()`简单的解决方案是在您想要更新屏幕时调用。这将允许刷新屏幕的事件运行。这不是最好的解决方案，但它可能会解决您的直接问题。

最好的解决方案是重构您的程序，以便在单独的线程或进程中执行长时间运行的工作，或者将工作分解为可以在事件循环的每次迭代中一次完成的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T11:17:20.057

只是为了对这个项目进行最后的润色。我应用了 Bryan 的两个建议并使用了 .update_idletasks() 方法以及使用线程。最终代码按预期工作，如下所示：

```
from Tkinter import *
import os
import threading
from tkFileDialog import askdirectory

#####################################
# Put the grunt stuff up here       #
#####################################
def loadpath():

    print 'loadpath called'
    global path
    path = askdirectory()
    txtPath.delete(0, END)
    txtPath.insert(0, path)

def update_the_status():
    txtProgress.delete(0,END)
    txtProgress.insert(0, "Processing Data")
    txtProgress.update_idletasks()

def do_the_search():
    print 'do_search called'

    arrayOfDirectories = [] # Store the categories here
    global path
    print  'The value for path = ' + path # Delete this in final
    searchpath = path
    print  'The value for searchpath = ' + searchpath # Delete this in final

    for (searchpath, directories, files) in os.walk(searchpath):
        for directory in directories:
           arrayOfDirectories.append(directory) # Create an array or dirs to use for the categories

    id = 1
    finalJSON = '['
    for eachDirectory in arrayOfDirectories:
        readpath = os.path.join(path, eachDirectory, 'URLS') # Grab each list of URLs
        print('readpath = ' + readpath)

    if os.path.exists(readpath):
        file = open(readpath) # Open the list of URLs
        for lines in file: # Step through each URL in turn

            ruleString = '{"id":' + str(id) + ',"enabled":true, "category":"' + eachDirectory + '","description":"' + lines + '","flagged":true,"string":"' + lines + '","name":"","javaClass":"com.untangle.uvm.node.GenericRule","blocked":true}'
            #print(ruleString)
            finalJSON = finalJSON + ruleString # Create a rule and add it to the final string
            id = id + 1 # Increment the id after each rule
        file.close() # Close the file when all have been read

finalJSON = finalJSON + ']' # Close the JSON array

outputPath = os.path.join(os.path.dirname(path), 'Blacklist.json')
print('Output path = ' + outputPath)

outputFile = open(outputPath, 'w')
outputFile.write(finalJSON)
txtProgress.delete(0,END)
txtProgress.insert(0,"Process Complete")
outputFile.close()

def do_search():

    WriteThread = threading.Thread(target=update_the_status())
    CalcThread = threading.Thread(target=do_the_search())
    WriteThread.start()
    CalcThread.start()

def do_quit():
    print 'do_quit called'
    sys.exit()

#####################################
#       Build the interface         #
#####################################

#  Some global variables
path = ''

#  Create the application window and give it a title.
main  = Tk()
main.geometry('600x400')
main.title('Blacklist JSON array builder')

#  Populate the window with widgets.
lbSpace1 = Label(main, text='')
lbSpace1.grid(row=0, column=0, columnspan=3)

lbDesc = Message(main, width=800, text='After you have unzipped the .tar file select the blacklist folder \nthat has been created using the browse button. Then click start.  The Blacklist.json \nfile will be created in the same directory as the Blacklist folder.')
lbDesc.grid(row=1, column=0, columnspan=4, pady=10)

lbPath = Label(main, text='Directory')
lbPath.grid(row=2, column=0, pady=10)

txtPath = Entry(main, width=50)
txtPath.grid(row=2, column=1)

pbPath = Button(main, text='Browse', command=loadpath)
pbPath.grid(row=2, column=2)

lbSpace2 = Label(main, text='')
lbSpace2.grid(row=3, column=0, columnspan=3)

pbStart = Button(main, text='Begin', command=do_search)
pbStart.grid(row=4, column=1, sticky=W, pady=20)

pbQuit = Button(main, text='Quit', command=do_quit)
pbQuit.grid(row=4, column=2, sticky=W)

lbSpace3 = Label(main, text='')
lbSpace3.grid(row=5, column=0, columnspan=3)

txtProgress = Entry(main, width=50)
txtProgress.grid(row=6, column=1)
txtProgress.insert(0,'Waiting')

mainloop() 
```

谢谢你们的帮助。

# php - 从 php 页面调用 mysql 存储过程时出错

> ID：12882123
> 
> 赞同：0
> 
> 时间：2012-10-14T12:19:22.363
> 
> 标签：php, mysql, stored-procedures, phpmyadmin

使用 phpmyadmin，我创建了一个名为`mySP()`. 创建 SP 后，我注意到 SP 位于 ROUTINE 表下的 information_schema db 中。我可以在这里看到它。现在从 phpmyadmin 中，如果我使用 SQL 选项卡并使用以下方法调用该过程，则在我的实际数据库下： CALL mySP();

它按要求工作。没有问题。

现在我试图通过让一个 php 页面调用这个 SP 来扩展它。

我的php代码是这样的：

```
<?php

include("include_db_connection.php");

    $callSP_query = "CALL mySP()";

    $callSP_result =    mysqli_query($db_conn, $callSP_query) 
                            or die('Connected to database, but StoredProc failed');

        if(!$callSP_result)                 
        {
            echo "Error with StoredProc...";
        }
        else
        {
            echo "Succsess! Called Stored Proc..";
        }   

?> 
```

现在在浏览器上加载此页面时，我总是收到“已连接到数据库，但 StoredProc 失败”错误，这意味着与 db 的连接已成功建立，但调用 SP 时出现了一些问题。

可能是什么问题呢？SP 已成功创建，甚至可以从 phpmyadmin 中成功调用。php调用哪里出错了？

谢谢！

### 编辑：

我刚刚使用 mysqli_error() 检查了错误代码，它显示“PROCEDURE mySP 不存在”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:49:41.183

这是我自己的代码的问题。实际上，您不必参考甚至查看 information_schema。如果您的数据库连接详细信息正确，则可以使用上述代码调用您的 sp :)

# iphone - xcode 4.5：架构 armv7s 的未定义符号：

> ID：12882125
> 
> 赞同：6
> 
> 时间：2012-10-14T12:19:32.973
> 
> 标签：iphone, ios6, armv7

我完全为那个问题发疯了..我有一个工作正常的项目，但是在我添加 facebook sdk 之后它给了我以下错误（错误让我删除 armv6 希望它之后能正常工作，但它给出了更多问题，因为我'正在经历它..我现在一起使用arch armv7和armv7s，这就是它给出的错误

> /Users/ME/Library/Developer/Xcode/DerivedData/Cocktail-gfjrrmcunekvfiacogqdfcxliqfg/Build/Intermediates/Cocktail.build/Debug-iphoneos/Cocktail.build/Objects-normal/armv7/Cocktail normal armv7 cd "/Users/ME/Apple DistributedApps/Cocktail All/Cocktail" setenv IPHONEOS_DEPLOYMENT_TARGET 4.3 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin :/usr/bin:/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch armv7 -isysroot /Applications/Xcode.app /Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.0.sdk -L/Users/ME/Library/Developer/Xcode/DerivedData/MyProj-gfjrrmcunekvfiacogqdfcxliqfg/Build/Products/Debug-iphoneos"-L/Users/ME/Apple DistributedApps/MyProj All/MyProj”-F/Users/ME/Library/Developer/Xcode/DerivedData/MyProj-gfjrrmcunekvfiacogqdfcxliqfg/Build/Products/Debug-iphoneos”-F/Users/ME/Apple DistributedApps/MyProj All/MyProj”-filelist /Users/ME/Library/Developer/Xcode/DerivedData/MyProj-gfjrrmcunekvfiacogqdfcxliqfg/Build/Intermediates/MyProj.build/Debug-iphoneos/MyProj.build/Objects-normal/armv7/MyProj。 LinkFileList -dead_strip -ObjC -all_load -lxml2 -lsqlite3.0 -fobjc-arc -fobjc-link-runtime -miphoneos-version-min=4.3 -framework AdSupport -framework Social -framework SystemConfiguration -framework MapKit -framework CoreLocation -framework Twitter -框架 AssetsLibrary -framework MobileCoreServices -framework CoreVideo -framework CoreMedia -lz -lsqlite3。0 -framework AddressBook -framework CFNetwork -framework CoreFoundation -framework Security -framework iAd -framework MessageUI -framework QuartzCore -framework AudioToolbox -framework MediaPlayer -framework AVFoundation -framework CoreGraphics -framework UIKit -framework Foundation -framework FacebookSDK -framework RevMobAds -lFlurryAnalytics -o /Users/ME/Library/Developer/Xcode/DerivedData/MyProj-gfjrrmcunekvfiacogqdfcxliqfg/Build/Intermediates/MyProj.build/Debug-iphoneos/MyProj.build/Objects-normal/armv7/MyProj构建/对象-正常/armv7/MyProj构建/对象-正常/armv7/MyProj

```
 Undefined symbols for architecture armv7:
  "_OBJC_CLASS_$_ACAccountStore", referenced from:
      objc-class-ref in FacebookSDK(FBSession.o)
  "_SKStoreProductParameterITunesItemIdentifier", referenced from:
      -[RevMobStoreController openStoreWithITunesItemId:] in RevMobAds(RevMobStoreController.o)
  "_ACFacebookAudienceFriends", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_OBJC_CLASS_$_SKStoreProductViewController", referenced from:
      objc-class-ref in RevMobAds(RevMobStoreController.o)
  "_OBJC_CLASS_$_GADBannerView", referenced from:
      objc-class-ref in NewsViewController.o
      objc-class-ref in SportsViewController.o
      objc-class-ref in LecViewController.o
      objc-class-ref in AccViewController.o
      objc-class-ref in JokesViewController.o
      objc-class-ref in GamesViewController.o
      objc-class-ref in CaricViewController.o
      ...
  "_ACFacebookAppIdKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACAccountTypeIdentifierFacebook", referenced from:
      +[FBSession renewSystemAuthorization] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_ACFacebookAudienceOnlyMe", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_kGADAdSizeSmartBannerPortrait", referenced from:
      -[NewsViewController shouldAutorotateToInterfaceOrientation:] in NewsViewController.o
      -[SportsViewController viewDidLoad] in SportsViewController.o
      -[LecViewController viewDidLoad] in LecViewController.o
      -[AccViewController viewDidLoad] in AccViewController.o
      -[JokesViewController viewDidLoad] in JokesViewController.o
      -[GamesViewController viewDidLoad] in GamesViewController.o
      -[CaricViewController viewDidLoad] in CaricViewController.o
      ...
  "_OBJC_CLASS_$_GADRequest", referenced from:
      objc-class-ref in NewsViewController.o
      objc-class-ref in SportsViewController.o
      objc-class-ref in LecViewController.o
      objc-class-ref in AccViewController.o
      objc-class-ref in JokesViewController.o
      objc-class-ref in GamesViewController.o
      objc-class-ref in CaricViewController.o
      ...
  "_ACFacebookPermissionsKey", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
  "_CGSizeFromGADAdSize", referenced from:
      -[NewsViewController shouldAutorotateToInterfaceOrientation:] in NewsViewController.o
      -[SportsViewController viewDidLoad] in SportsViewController.o
      -[LecViewController viewDidLoad] in LecViewController.o
      -[AccViewController viewDidLoad] in AccViewController.o
      -[JokesViewController viewDidLoad] in JokesViewController.o
      -[GamesViewController viewDidLoad] in GamesViewController.o
      -[CaricViewController viewDidLoad] in CaricViewController.o
      ...
  "_ACFacebookAudienceEveryone", referenced from:
      -[FBSession authorizeUsingSystemAccountStore:accountType:permissions:defaultAudience:isReauthorize:] in FacebookSDK(FBSession.o)
ld: symbol(s) not found for architecture armv7
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:08:27.240

作为临时解决方案，您可以从 Xcode 项目的架构中删除 armv7s。将“$(ARCHS_STANDARD_32_BIT)”更改为“armv7”。更新库时，更改回以重新添加 armv7s 支持。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:50:21.893

Facebook sdk 不是为 armv7s 编译的，但是你可以自己编译

看看 Liam nichols 在这里的回答

[https://developers.facebook.com/bugs/107674376052717/](https://developers.facebook.com/bugs/107674376052717/)

[从 git hub 页面（ facebook git hub](https://github.com/facebook/facebook-ios-sdk) ）下载源代码的副本打开 xcode 项目并在构建设置中将架构更改为 armv7、armv7s 关闭项目导航到 /scripts 并在终端运行`./build_all.sh` 当它完成编译时，您可以在 builds/FacebookSDK.framework 中找到该框架

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-28T16:00:18.637

`armv7s`从部分中删除`valid architectures`，它将起作用。

**构建设置 --> 架构 --> 有效架构**

![Xcode 构建设置](../Images/880d70272d66272dc8980772bf7a15c9.png)

# html - 怎么去掉上面的空格 标签？

> ID：12882129
> 
> 赞同：0
> 
> 时间：2012-10-14T12:19:49.493
> 
> 标签：html, css

我正在学习 HTML 和 CSS，我想创建一个具有银色背景颜色的固定宽度页面。我还希望固定宽度区域之外的背景颜色为黑色。

问题是固定宽度区域上方（标题上方）有一个小的黑色间隙，我想删除这个黑色间隙，以便将其替换为银色。

我该如何解决这个问题？

HTML：

```
<!DOCTYPE html>
<html>
    <head>
        <title>Welcome to my Homepage</title>
        <link href="style.css" rel="stylesheet" type="text/css">
    </head>

    <body>
        <div class="main">
            <h1>Welcome to my homepage.</h1>
            <p>This is just a test.</p>
        </div>
    </body>
</html> 
```

CSS：

```
body {background-color: #000000;}
.main {
    width: 640px;
    margin: 0 auto;
    background-color: silver;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T12:22:21.080

尝试

```
body {padding:0; margin:0; background-color:#000; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:23:22.807

尝试：

```
border-width:0px; 
```

边框和边距是两个不同的东西......这是给你的一张好照片：

[http://dev.opera.com/articles/view/30-the-css-layout-model-boxes-border/](http://dev.opera.com/articles/view/30-the-css-layout-model-boxes-border/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:34:29.610

您可以执行以下操作：

```
body {margin:0; padding: 0; background-color:#000; } 

.main {   
position: absolute;
width: 640px;    
left: 50%;
margin-left: -320px;
background-color: silver; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T12:50:11.593

这样的问题在编写 HTML 和 CSS 时会很常见，这是一个备受争议的话题，但我强烈建议您使用重置样式表。

所有浏览器都有自己的一套关于如何在网页上显示元素的规则，重置样式表可以最大限度地减少浏览器特定样式的影响，这意味着您的代码阅读起来更加合乎逻辑并且更容易发现正在发生的事情尤其是当您遇到问题时。也就是说，即使使用重置样式表，您也应该始终跨浏览器检查项目，因为总会有怪癖。

这是使用最广泛的重置样式表之一。

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

只需将其粘贴到您的 style.css 表上的网站 CSS 上方，或创建一个名为 reset.css 的新样式表并在您的 site.css 之前引用它。

# actionscript-3 - 如何在 Stage 3d 中绘制二次贝塞尔曲线？我需要将它们分成几部分吗？

> ID：12882130
> 
> 赞同：1
> 
> 时间：2012-10-14T12:19:54.917
> 
> 标签：actionscript-3, bezier, stage3d

我目前正在使用本机 .curveTo 函数，想知道是否可以编写一些代码来在 Stage3D 中呈现二次贝塞尔曲线？我还可能需要在绘制到屏幕的曲线之间进行填充。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T10:49:05.057

扩展支持填充

[https://github.com/unwrong/Starling-Extension-Graphics/blob/master/extension/src/starling/display/graphics/Fill.as](https://github.com/unwrong/Starling-Extension-Graphics/blob/master/extension/src/starling/display/graphics/Fill.as)

它在引擎盖下使用三角测量器将填充处理成 GPU 可以处理的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:16:36.230

Starling 已经实施了它。希望你会发现它有用： [https ://github.com/unwrong/Starling-Extension-Graphics/pull/1](https://github.com/unwrong/Starling-Extension-Graphics/pull/1)

# iphone - 无法获取payKey ios PayPalMPL SDK 1.6.0

> ID：12882132
> 
> 赞同：0
> 
> 时间：2012-10-14T12:20:40.193
> 
> 标签：iphone, ios, paypal

我似乎无法从委托方法中检索 payKey 字符串：

```
 - (void)paymentSuccessWithKey:(NSString *)payKey andStatus:(PayPalPaymentStatus)paymentStatus 
```

在委托方法处设置断点时，没有从委托视图控制器调用委托方法。

我已经使用 SimplePayment 方法在 PayPal 提供的 DemoApp 上检查了这一点，并在 FourButtonVIewController 以及我自己的集成了 PayPal 的应用程序中设置了断点。

这已在运行 iOS6 和 iOS5 的设备以及运行 iOS6 的模拟器上进行了检查。

任何人都可以对此有所了解，因为我似乎无法确定它吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T09:59:34.783

解决。

我错误地初始化了 PayPal 会话，因此没有触发回叫。

PayPal 自己的应用程序的问题是我在错误的视图控制器上为正确的委托设置了断点 - PayPal 包括 2 个演示应用程序，SimpleDemo 和 InteractiveDemo。我正在运行交互式演示，但断点在 SimpleDemo 上。愚蠢的我；）

谢谢所有看过的人！！

# oracle - 使用显式游标和循环更新列以生成唯一值

> ID：12882134
> 
> 赞同：1
> 
> 时间：2012-10-14T12:20:49.117
> 
> 标签：oracle, plsql

我是编码新手，我正在尝试使用游标和循环更新下表（而不依赖于任何行号函数）。我的表是以 id 和 model 作为列的 Cars。问题是我正在尝试更新具有重复数字的 id 列，例如表看起来像这样。我想让 ID 成为主键。

```
ID    MODEL 
1    Civic 
1    Accord 
3    Buick 
3    Corolla 
3    Prius 
3    Saab 
```

我在下面尝试过，但它只是更改了所有值。我究竟做错了什么？这个循环在做什么？

```
DECLARE 
    ids number; 
    models varchar2 (50); 
    previous_id number := 0; 
    new_id number :=0; 
    cursor getRow is select * from CARS; 

BEGIN  
    open getRow; 
    fetch getRow into ids, models; 
    previous_id := ids; 
    loop 
        fetch getRow into ids, models; 
        if getRow%found 
        then  
            new id := previous_id +1; 
            if ids = previous_id 
            then  
                  update CARS 
                set ID = new_id 
                where ID = previous_id; 
            else  
                previous_id := ids;     
            end if; 
            else 
                exit; 
        end if; 
    end loop; 
    close getRow; 
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:03:27.103

这是实现目标的最简单方法：

```
update cars
set id = rownum; 
```

这会将 ID 设置为唯一的、单调递增的数字。

您说您是编码新手，所以也许这就是您不想使用简单答案的唯一原因？

无论如何，您的代码无法正常工作的原因是您选择了一组 ID，然后批量更新它们。我认为您假设您的更新只是影响当前行，但它不会：它使用共享 ID 更新所有行。此外，您关于 NEW_ID 和 PREVIOUS_ID 的逻辑很奇怪：您需要仅使用一个变量来保持连续性。

如果您坚持使用循环，则需要使用 FOR UPDATE 游标并使用 WHERE CURRENT OF 仅更新当前行：

```
DECLARE 
    ids number; 
    models varchar2 (50); 
    previous_id number :=0; 
    cursor getRow is 
       select * from CARS
       for update of id; 

BEGIN  
    open getRow; 
    fetch getRow into ids, models; 
    loop 
        if getRow%found 
        then  
            if ids = previous_id 
            then  
                previous_id := previous_id +1; 
                update CARS 
                set ID = new_id 
                where current of getRow; 
            else  
                previous_id := ids;     
            end if; 
        else 
            exit; 
        end if; 
        fetch getRow into ids, models; 
    end loop; 
    close getRow; 
END; 
```

但这与纯 SQL 解决方案相比，代码太多了。它的执行速度也会慢得多。如果这是一个自学 PL/SQL 的玩具练习，那么这些都不重要，但它不是在实际应用程序中编码的那种东西。

# android - Android ViewPager，从片段切换到另一个片段

> ID：12882138
> 
> 赞同：4
> 
> 时间：2012-10-14T12:21:26.753
> 
> 标签：android, android-fragments, android-viewpager

我有一个 2 页的 viewpager，在每个片段上我都放了一个按钮来切换片段，但是如果我改变方向切换不起作用。对于切换片段我使用我的 OnChangePageButtonClick 接口为什么会发生这种情况？

ViewPager 活动：

```
public class ViewPagerMusic extends FragmentActivity implements OnChangePageButtonClick {

    private ViewPager vp;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_pager_music);

        ViewPagerAdapter viewPagerAdapter = new ViewPagerAdapter(super.getSupportFragmentManager(), fragments);

        vp = (ViewPager)findViewById(R.id.viewpager);
        vp.setAdapter(viewPagerAdapter);
    }

    private class ViewPagerAdapter extends FragmentStatePagerAdapter {

        public ViewPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
    public Fragment getItem(int position) {
        switch(position) {
            case 0:
                MainPage mainPage = new MainPage();
                mainPage.setOnChengeButtonListener(ViewPagerMusic.this);
                return mainPage;
            case 1:
                PlaylistPage playlistPage = new PlaylistPage();
                playlistPage.setOnChengeButtonListener(ViewPagerMusic.this);
                return playlistPage;
        }
        return null;
    }

        @Override
        public int getCount() {
            return 2;
        }

    }

    @Override
    public void selectPage(int page) {
        vp.setCurrentItem(page);        
    }

} 
```

我的 Frgamnets：

```
public class MainPage extends Fragment {

    public MainPage() {
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.music_main_page, container, false);
        ImageButton btnPlaylist = (ImageButton)v.findViewById(R.id.btnGoPlaylist2);
        btnPlaylist.setOnClickListener(onButtonListener);
        return v;
    }

    private OnClickListener onButtonListener = new OnClickListener() {

        @Override
        public void onClick(View view) {
            onChangePageButtonClick.selectPage(1);
        }

    };

    public void setOnBackButtonListener(OnChangePageButtonClick onChangePageButtonClick) {
        this.onChangePageButtonClick = onChangePageButtonClick;
    }

    private OnChangePageButtonClick onChangePageButtonClick;

} 
```

播放列表片段类似于 MainPage 片段。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-15T08:55:43.607

您的片段正在存储对`ViewPagerMusic`活动的引用。但是，在旋转之后，活动被销毁并重新创建，因此片段现在包含对旧活动的引用。

您可以从片段中调用活动的方法，而不是存储对活动的引用，如下所示：

```
((ViewPagerMusic) getActivity()).selectPage(1); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-24T14:30:02.127

只需在您的视图寻呼机中创建此方法

@覆盖

```
public void selectPage(int page) {
    vp.setCurrentItem(page);        
} 
```

然后在你的 onclick 方法中调用它

((ViewPagerMusic) getActivity()).selectPage(1);

# git - 从 Git 中删除过时的提交

> ID：12882141
> 
> 赞同：2
> 
> 时间：2012-10-14T12:21:48.897
> 
> 标签：git, commit, reset

我做了一些测试提交（以测试提交钩子）并且总是将索引重置为我最后一次正常提交。现在这些陈旧的提交仍然存在：

```
> git reflog
fcdabf7 HEAD@{0}: reset: moving to fcdabf7e01845d6f000fc3cef2edc999c57a7e29
5c97564 HEAD@{1}: commit: t
fcdabf7 HEAD@{2}: reset: moving to fcdabf7e01845d6f000fc3cef2edc999c57a7e29
ae52246 HEAD@{3}: commit: t
fcdabf7 HEAD@{4}: reset: moving to fcdabf7e01845d6f000fc3cef2edc999c57a7e29
c58aeef HEAD@{5}: commit: t
fcdabf7 HEAD@{6}: reset: moving to fcdabf7e01845d6f000fc3cef2edc999c57a7e29
3a2cc3b HEAD@{7}: commit: test 
```

我怎样才能删除它们？对于技术理解：如果我不理会它们，如果我进行推送，它们会被推送到上游仓库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:03:21.280

首先，您不必担心悬空提交会进入远程存储库。它们不会被推送，一般会适时清理。

但是，如果要清除此类悬空对象，请尝试运行：

```
git gc --prune=now 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:26:06.300

reflog 条目引用的提交本身并不是悬空的。要清除 reflog，

```
git reflog expire --expire=0 --all 
```

之后`git prune`可用于删除 - now-dangling - 提交。

# python - os.path.dirname(__file__) 不存在？

> ID：12882144
> 
> 赞同：0
> 
> 时间：2012-10-14T12:22:06.717
> 
> 标签：python, python-2.x

> **可能重复：**
> [os.path.dirname(__file__) 返回空](https://stackoverflow.com/questions/7783308/os-path-dirname-file-returns-empty)

我的 Python 脚本的用户说他们收到以下错误：

```
Traceback (most recent call last):
File "MCManager.py", line 7, in <module>
os.chdir(os.path.dirname(__file__))
OSError: [Errno 2] No such file or directory: '' 
```

脚本所在的目录怎么可能不存在？是兼容性问题吗？我使用与出现错误的操作系统和版本相同的操作系统和版本，并且无法复制它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T12:26:07.450

当从同一目录执行脚本时，它会在 Python 2 中发生，例如

```
$ echo "print __file__" > /tmp/spam.py
$ python /tmp/spam.py 
/tmp/spam.py

$ cd /tmp
$ python spam.py
spam.py 
```

一种解决方案是`os.path.abspath(__file__)`在代码中使用，以便您始终可以在以下所有三种使用情况下解析脚本目录：

```
$ cat /tmp/spam.py
import os
print os.path.dirname(os.path.abspath(__file__))

$ python /tmp/spam.py
/tmp

$ cd /tmp
$ python /tmp/spam.py
/tmp

$ python spam.py
/tmp 
```

# c# - 如何将字符串或文本框的内容导出到保持相同格式的txt文件（如果字符串有5行，txt文件将有5行）？

> ID：12882147
> 
> 赞同：3
> 
> 时间：2012-10-14T12:22:31.160
> 
> 标签：c#

```
if (saveFileDialog1.ShowDialog() == DialogResult.OK)
{
    FileInfo Myfile = new FileInfo(saveFileDialog1.FileName);
    StreamWriter wri = Myfile.CreateText();
    wri.WriteLine(Richtextbox.Text);
    wri.Close();
} 
```

当我导出到文本文件时，richtextbox 中的所有行都粘在一行中。我不知道如何保持文件 txt'content 与 Richtextbox'content 相同。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T12:28:01.557

您可以使用[SaveFile](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextbox.savefile%28v=vs.110%29.aspx)方法

```
Richtextbox.SaveFile(FileName, RichTextBoxStreamType.PlainText); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T12:24:50.953

```
foreach (var line in Richtextbox.Lines)
{
    wri.WriteLine(line);
} 
```

# javascript - 在javascript中从数组中访问对象？

> ID：12882148
> 
> 赞同：0
> 
> 时间：2012-10-14T12:22:31.470
> 
> 标签：javascript, arrays, object, recursion

如何使用数组进入对象并设置值 - 最好不使用 eval，执行类似的操作`object[eval(["key", "deepkey"].split("")) = "newvalue"`？

手动执行此操作，我会执行此操作`object.key.deepkey = "newvalue"`，但同样，我需要使用数组执行此操作以访问正确的属性。

参考对象：

```
object = {
  key: {
    deepKey: "value"
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:31:44.127

您可以将数组类型语法编写为。[jsfiddle](http://jsfiddle.net/xYked/)

```
object = {
  key: {
    deepKey: "value"
  }
}

object['key']['deepkey']='newvalue' 
```

如果你在数组中有键，你可以这样做

```
var keys = ['key','deepkey'];
var obj = object;
for(var k =0; k <keys.length-1; k++){
   obj= obj[keys[k]];
}
obj[keys[k]] = 'newvalue' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T12:39:28.283

您可以使用递归函数来逐步遍历数组（或对象）的每个级别，如下所示：

```
function val(array, indices) {
    if(indices.length > 1) {
        var idx = indices.shift();
        return val(array[idx], indices);
    }
    else {
        return array[indices.shift()];
    }
}

var obj = { a: { b: 'c' } };

//result is 'c'
var result = val(obj, ['a', 'b']); 
```

如果要获取对象引用，只需指定第二个参数即可：

```
var obj = {
    a: {
        b: {
            c: 'foo'
        }
    }
};

var ref = val(obj, ['a', 'b']);

//ref is now obj.a.b, so you can do something like...
ref.x = 'bar';

console.dir(ref); //outputs something like { c: 'foo', x: 'bar' } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:23:02.287

另一种方法可能是使用`Array.map`这种方式：

```
function deepkey(obj,keys,set){
  var i=1
     ,kys = keys.split('.')
     ,exist = kys.map( function(k){
          var prev = this[i-1], isobj = prev.constructor === Object;
          this.push( isobj && k in prev ? prev[k] : prev);
          return (i++,this[i-1]);},
          [obj]
        )
     ,x = exist[exist.length-2];
  if (x && x.constructor === Object && set){
    x[kys[kys.length-1]] = set;
  }
  return x[kys.pop()] || null;
} 
// usage
var obj = { a:{ b:{ c:1, cc:{ d:{ e:{ a:1,b:2,c:3 } } } } } };
// assign [1,2,3,4,5] to obj.a.b.cc.d.e.b
console.log(deepkey(obj,'a.b.cc.d.e.b',[1,2,3,4,5])); //=> [1,2,3,4,5]
// get obj.a.b.cc.d.e.b[2]
console.log(deepkey(obj,'a.b.cc.d.e.b')[2]); //=> 3
// get non existing path obj.a.b.c.d.e.b
console.log(deepkey(obj,'a.b.c.d.e.b')); //=> null 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T12:42:09.527

您可以从[这个问题](https://stackoverflow.com/questions/359788/how-to-execute-a-javascript-function-when-i-have-its-name-as-a-string)中获取函数并对其进行修改以访问对象的属性。

[http://jsfiddle.net/jbabey/Mu4rP/](http://jsfiddle.net/jbabey/Mu4rP/)

```
var getPropByName = function (propName, context) {
    var namespaces = propName.split('.');

    for(var i = 0; i < namespaces.length; i++) {
        context = context[namespaces[i]];
    }

    return context;
};

var myObject = {
    someKey: {
        deepKey: "value"
    }
};

myObject.someKey.deepKey; // "value"
getPropByName('someKey.deepKey', myObject); "value" 
```

# iphone - 在objective-c中解析JSON无法理解如何获取参数

> ID：12882150
> 
> 赞同：-1
> 
> 时间：2012-10-14T12:22:47.913
> 
> 标签：iphone, objective-c, ios, json, parsing

```
{"updated":1350213484,"id":"http://www.google.com/reader/api/0/feed-finder?q\u003dProva\u0026output\u003djson","title":"Risultati di feed per \"Prova\"","self":[{"href":"http://www.google.com/reader/api/0/feed-finder?q\u003dProva\u0026output\u003djson"}],"items":[{"title":"Home Page - La prova del cuoco","id":"http://www.laprovadelcuoco.rai.it/","updated":1350213485,"feed":[{"href":"http://www.laprovadelcuoco.rai.it/dl/portali/site/page/Page-ffb545b4-9e72-41e5-866f-a465588c43fa-rss.html"}],"alternate":[
{"href":"http://www.laprovadelcuoco.rai.it/","type":"text/html"}],"content":{"direction":"ltr","content":"Diventa un cuoco provetto con “La Prova del Cuoco”: le videoricette in un'  applicazione di facile e veloce consultazione per il tuo Iphone. Scopri come   acquistare ..."}},{"title":"Le prove Invalsi di matematica e italiano","id":"http://online.scuola.zanichelli.it/quartaprova/","updated":1350213486,"feed":[{"href":"http://online.scuola.zanichelli.it/quartaprova/feed/"}],"alternate":[{"href":"http://online.scuola.zanichelli.it/quartaprova/",
"type":"text/html"}],"content":{"direction":"ltr","content":"Un sito Zanichelli dedicato alle prove Invalsi di italiano e matematica:   esercitazioni, consigli, informazioni utili, novità, aggiornamenti e blog d'autore   sulle prove ..."}},{"title":"A Prova di Mamma","id":"http://www.aprovadimamma.net/","updated":1350213487,"feed":[{"href":"http://aprovadimamma.blogspot.com/feeds/posts/default"}],"alternate":[{"href":"http://www.aprovadimamma.net/","type":"text/html"}],"content":{"direction":"ltr",
"content":"recensioni, guide ed opinioni sui prodotti per bambini. web | www.  \u003ca href\u003d\"http://aprovadimamma.net\"\u003eaprovadimamma.net\u003c/a\u003e email | aprovadimamma -at- \u003ca href\u003d\"http://gmail.com\"\u003egmail.com\u003c/a\u003e. 2011 A Prova di   Mamma è un ..."}},{"title":"prova - Wiktionary","id":"http://en.wiktionary.org/wiki/prova","updated":1350213488,"feed":[{"href":"http://en.wiktionary.org/w/index.php?title\u003dSpecial:RecentChanges\u0026feed\u003datom"}],"alternate":[
{"href":"http://en.wiktionary.org/wiki/prova","type":"text/html"}],"content":{"direction":"ltr","content":"prova. Definition from Wiktionary, the free dictionary. Jump to: navigation, search.   See also pröva, and próva. Contents. 1 Catalan. 1.1 Noun; 1.2 Verb. 2 Italian ..."}},{"title":"Prova a prendermi - MYmovies","id":"http://www.mymovies.it/dizionario/recensione.asp?id\u003d34298","updated":1350213489,"feed":[{"href":"http://www.mymovies.it/cinema/xml/rss/"}],"alternate":[{"href":"http://www.mymovies.it/dizionario/recensione.asp?id\u003d34298",
"type":"text/html"}],"content":{"direction":"ltr","content":"Un film di Steven Spielberg con Leonardo DiCaprio, Tom Hanks, Christopher   Walken, Martin Sheen. Spielberg decide di divertire e divertirsi, con un cast ..."}},{"title":"Prova a incastrarmi - MYmovies","id":"http://www.mymovies.it/dizionario/recensione.asp?id\u003d35955","updated":1350213490,"feed":[{"href":"http://www.mymovies.it/cinema/xml/rss/"}],"alternate":[{"href":"http://www.mymovies.it/dizionario/recensione.asp?id\u003d35955",
"type":"text/html"}],"content":{"direction":"ltr","content":"Un film di Sidney Lumet con Vin Diesel, Peter Dinklage, Linus Roache, Ron   Silver. Il processo per mafia più lungo della storia degli Usa nelle mani di Lumet   e ..."}},{"title":"Impariamo.info","id":"http://www.impariamo.info/","updated":1350213491,"feed":[{"href":"http://www.impariamo.info/feeds/posts/default"}],"alternate":[{"href":"http://www.impariamo.info/","type":"text/html"}],"content":{"direction":"ltr","content":"Impariamo.info. Prova il tuo italiano. Pages. Home · Cultura · Chat ... Prove di   ascolto. Dettati · Livello A2 · Livello B1 · Livello B2\. Giochi. Acrostici · Anagrammi ..."
}},{"title":"Schede informative prova scritta di Ateneo - Ca' Foscari","id":"http://www.unive.it/nqcontent.cfm?a_id\u003d134832","updated":1350213492,"feed":[{"href":"http://www.unive.it/phpapps/rss/eventi_rss.php"}],"alternate":[{"href":"http://www.unive.it/nqcontent.cfm?a_id\u003d134832","type":"text/html"}],"content":{"direction":"ltr","content":"Di seguito sono pubblicate le sedi delle prove scritte di Ateneo e, in allegato, ...   La prova scritta si svolgerà giovedì 30 agosto alle ore 16.00 presso il Polo di San ..."
}},{"title":"Prova d'autore","id":"http://www.osservatorionline.it/page/459/prova-dautore-leggere-per-scrivere","updated":1350213493,"feed":[{"href":"http://www.osservatorionline.it/page/459/rss-news.php?lang\u003dit"}],"alternate":[{"href":"http://www.osservatorionline.it/page/459/prova-dautore-leggere-per-scrivere","type":"text/html"}],"content":{"direction":"ltr","content":"Prova d'autore: leggere per scrivere. Edizione 2012/2013\. Per l'anno scolastico   2012-2013 l'Osservatorio Permanente Giovani-Editori e la Fondazione Achille e ..."
}},{"title":"Maturità, la terza prova scritta ma potrebbe essere l'ultima volta ...","id":"http://www.repubblica.it/scuola/2012/06/24/news/terza_prova_maturita-37857437/","updated":1350213494,"feed":[{"href":"http://www.repubblica.it/rss/homepage/rss2.0.xml"}],"alternate":[{"href":"http://www.repubblica.it/scuola/2012/06/24/news/terza_prova_maturita-37857437/","type":"text/html"}],"content":{"direction":"ltr","content":"24 giu 2012 ... Predisposta la mattina stessa dalle commissioni, comporta spesso molte difficoltà   per gli studenti. Subito dopo inizia la correzione degli ..."
}}]} 
```

我该如何解析它？

我正在做

```
NSArray* title = [(NSDictionary*)[daParsare JSONValue] objectForKey:@"title"];
NSLog(title); 
```

我明白了`Risultati di feed per \"Prova\`

但我想要的是“items”和“feed”参数中的所有“title”......我想将它们存储在一个数组中我该怎么办？

******* 编辑 ********

好的，但是当我尝试获取提要网址时，我收到 SIGABRT 错误

```
NSDictionary *element=[feeds objectAtIndex:indexPath.row]; 
NSString *title = [[NSString alloc]initWithString:[element objectForKey:@"title"]]; 
NSString *summary = [[NSString alloc]initWithString:[element valueForKeyPath:@"feed.href"]]; cell.textLabel.numberOfLines=3; 
cell.textLabel.font=[UIFont boldSystemFontOfSize:16]; 
cell.textLabel.text = title; 
cell.detailTextLabel.text = summary; 
cell.detailTextLabel.numberOfLines=5; 
[title release]; 
[summary release]; 
```

如果我尝试在循环周期中对提要 url 进行 NSLog 记录，则它为空！

在这种情况下的最后一个问题是如何获取内容？它在另一个内容键中的内容键中！:S

```
That's an example 
"title":"Home Page - La prova del cuoco",
"id":"http://www.laprovadelcuoco.rai.it/",
"updated":1350213485,
"feed":[
{
"href":"http://www.laprovadelcuoco.rai.it/dl/portali/site/page/Page-ffb545b4-9e72-41e5-866f-a465588c43fa-rss.html"
}
], 
```

提要与标题不同...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T12:30:20.667

在给定的示例中，您将查找包含键“title”的第一个对象。在 JSON 中位于第一级数据。

为了获取“项目”的值，您首先需要解析该级别的数据，然后获取您感兴趣的值。

下面的示例首先从根级别获取项目，然后遍历每个键，找到标题和提要值。

希望这可以帮助！

```
NSArray *items = [[daParsare JSONValue] objectForKey:@"items"];
for (NSDictionary *item in items) {
    NSString *title = [item objectForKey:@"title"];
    NSString *feed = [item valueForKeyPath:@"feed.href"];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:07:18.900

我希望你得到关键“项目”的数组。使用下面的代码，我得到以下输出：

代码：

```
NSArray *itemsDic=[jsonParsedObj objectForKey:@"items"];
NSArray *titles=[itemsDic valueForKey:@"title"]; 
```

要从 "items" 获取内容，请使用以下代码

```
NSArray *contents=[itemsDic valueForKeyPath:@"content.content"]; 
```

输出：

( 主页 - La prova del cuoco,

证明 Invalsi di matematica e italiano，

一个Prova di Mamma，

prova - 维基词典，

Prova a prendermi - MYmovies,

Prova a incastrarmi - MYmovies,

Impariamo.info,

附表内容丰富的 prova s​​critta di Ateneo - Ca' Foscari，

Prova d'autore,

Maturità, la terza prova s​​critta ma potrebbe essere l'ultima volta ...)

# maven - 从工件中获取几个罐子作为一个包

> ID：12882152
> 
> 赞同：0
> 
> 时间：2012-10-14T12:23:00.613
> 
> 标签：maven, ivy, artifactory

我试图了解如何管理这种情况，假设我有一个由三个 jar（a.jar、b.jar、c.jar）组成的第三方库（best-lib），我会将这些 jar 上传到个人Artifactory服务器，(best-lib)有1.0和2.0两个版本。

我想在我的 ivy.xml 文件中拥有一个单一的依赖项来一次检索所有这些罐子，例如：

```
<dependencies>
    <dependency org="mycompany" name="best-lib" rev="1.0" />
</dependencies> 
```

并且这个依赖应该添加 1.0 版的所有三个 jar（a、b 和 c）。

问题是：

1.  这可能吗？
2.  如何将三个 jar 上传到 artifactory 以实现此行为？
3.  是否可以一次上传这些罐子？
4.  人工替代解决方案也是可以接受的（例如 Nexus 或 Archivia）。

注意：我不是在构建 best-lib，我只是拥有它的 jar，而 best-lib 不是可以从公共 maven2 存储库下载的库。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:48:32.170

发布“best-lib”模块时，使用 ivy.xml 文件列出模块发布的 3 个 jar：

```
<ivy-module version="2.0">
    <info organisation="mycompany" module="best-lib"/>

    <publications>
        <artifact name="a" type="jar"/>
        <artifact name="b" type="jar"/>
        <artifact name="c" type="jar"/>
    </publications>
    ..
    .. 
```

当你创建一个对这个模块的依赖时，ivy 会知道这个模块中有 3 个 jars。

有关如何发布 ivy 模块的示例，请参见：

*   [使用常春藤的问题：发布任务](https://stackoverflow.com/questions/8304562/issues-using-ivypublish-task/8317109#8317109)

# 更新

如果 3 个 jars 已经在您的存储库中，您可以发布一个独立的 ivy 模块，将其他 3 个作为依赖项引用：

```
<ivy-module version="2.0">
    <info organisation="mycompany" module="best-lib" rev="1.0"/>

    <dependences>
       <dependency org="mycompany" name="a" rev="1.0" />
       <dependency org="mycompany" name="b" rev="1.0" />
       <dependency org="mycompany" name="c" rev="1.0" />
    </dependencies> 
```

最后，您可能需要告诉我们您的 Artifactory 存储库使用什么格式……我一直假设它是一个 ivy 存储库。如果是 Maven，那么概念是相同的，但显然服务器端我们将讨论 pom.xml 文件，而不是 ivy.xml（Ivy 支持 Maven 存储库）。

# hibernate - 在 Hibernate 中更改 autoincrement 的值

> ID：12882153
> 
> 赞同：0
> 
> 时间：2012-10-14T12:23:02.593
> 
> 标签：hibernate, auto-increment

我已经使用 hsqldb 和 JPA/Hibernate 开发了应用程序。根据客户的要求，他们希望我们做一些基本的数据输入（通过文件上传），以便他们在启动应用程序时拥有数据。我们也这样做了。

现在的问题是，当我在客户端安装应用程序时，他们无法添加任何主数据（交易数据也没有）。我发现在添加数据时休眠会给出 org.hibernate.exception.ConstraintViolationException，这是因为它从 1 开始插入值。

因此，我已将 GeneratorValue 字段设置为 Auto。(@GeneratedValue(strategy = GenerationType.AUTO))。

如果您需要更多信息，请告诉我。任何帮助将不胜感激。（我已经google了，但到目前为止没有找到任何具体的答案）

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T15:30:11.893

最好的首选解决方案是`sequence`在您的数据库中定义一个。在 Hibernate 映射中使用[**序列生成器。**](http://docs.jboss.org/hibernate/jpamodelgen/1.2/api/org/hibernate/jpamodelgen/xml/jaxb/GenerationType.html#SEQUENCE)不要`Id`手动填充属性。让休眠来处理它。它永远不会给你唯一的约束。

你也尝试定义一个`custom generator`并编写小逻辑来获取要使用的唯一 ID。

# sencha-touch - 是否可以在 Sencha Touch 2 中拖放短列表，如 iPhone 书签

> ID：12882154
> 
> 赞同：1
> 
> 时间：2012-10-14T12:23:10.207
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

我想知道在 Sencha touch 2 中是否可以像 iPhone 书签的功能一样拖放短列表。

我搜索了许多煎茶触摸问答，但没有找到任何合适的答案。

此代码使列表可拖动，但仅适用于从上到下。无法将任何项目从列表底部向上拖动。

```
var selEl = dataview.element.down("." + dataview.getSelectedCls());
var d = new Ext.util.Draggable({
    element: selEl,
    listeners: {
        dragstart: function(self, e, startX, startY) {
            console.log("test dragStart[" + startX + ":" + startY + "]");
        },
        drag: function(self, e, newX, newY) {
            console.log("test drag[" + newX + ":" + newY + "]");
        },
        dragend: function(self, e, endX, endY) {
            console.log("test dragend[" + endX + ":" + endY + "]");
        }
    }
}); 
```

sencha touch 2 中是否可以有简短列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T00:18:56.550

我已经能够使用此示例中的代码执行此操作：[https ://github.com/kostysh/Drag-Drop-example-for-Sencha-Touch](https://github.com/kostysh/Drag-Drop-example-for-Sencha-Touch)

# cordova - 向应用程序添加更新（Phonegap）

> ID：12882163
> 
> 赞同：1
> 
> 时间：2012-10-14T12:23:59.930
> 
> 标签：cordova, ota

我已经使用 Phonegap 构建了一个应用程序。该应用程序在主屏幕上包含三个图标。对于特定用户，我想推出一个更新，在不干扰其他内容的情况下添加一个图标。这个图标允许他们编辑其他人发布的内容。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-30T10:33:57.620

当您想为不同的用户滚动更新时，请尝试为应用程序提供 phonegap 页面的 url 列表，然后尝试将它们打包成 zip 或 tar 球并作为更新滚动。在设备上尝试提取它们并链接到现有应用程序。希望它能解决你的问题。

# jquery - Jquery Maphighlight如何改变部分背景

> ID：12882165
> 
> 赞同：0
> 
> 时间：2012-10-14T12:24:04.387
> 
> 标签：jquery, jquery-plugins

我在 www.booking.com 上找到了这个，我想复制它。所以我得到了我的项目的maphilight。

但我不知道如何在鼠标悬停/单击时更改不同的背景

单击时，所选部分变为黄色。

当鼠标悬停时，然后得到蓝色的。

最后一张图片是我实现的。

![在此处输入图像描述](../Images/d48bd330acc17bf97cbf67636e6098d4.png)

![在此处输入图像描述](../Images/ff3a2282e0043be22c6f3ce5578d6ff3.png)

![在此处输入图像描述](../Images/425259c30af51c9e3b1540f37d8f3c1a.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:27:36.793

你可以用[imagemap](http://en.wikipedia.org/wiki/Image_map)来做，看看这两个 imagemap 库：

*   [http://www.outsharked.com/imagemapster/](http://www.outsharked.com/imagemapster/)
*   [http://www.netzgesta.de/mapper/](http://www.netzgesta.de/mapper/)

如果您的源图像是其中包含区域的 SVG 图像，就像您在[wikipedia](http://commons.wikimedia.org/wiki/File%3aCalifornia_counties_outline_map.svg)上通常找到的那些，您可以使用以下脚本将它们转换为 imagemap：

*   [http://code.google.com/p/svg2imap/](http://code.google.com/p/svg2imap/)
*   [http://davidlynch.org/blog/2008/03/creating-an-image-map-from-svg/](http://davidlynch.org/blog/2008/03/creating-an-image-map-from-svg/)

此外，如果您需要从普通图像文件中标记区域，您可以使用 Gimp 来完成：

*   [http://www.makeuseof.com/tag/create-image-map-gimp/](http://www.makeuseof.com/tag/create-image-map-gimp/)

或者您可以使用共享软件 Windows 程序[MapEdit](http://www.boutell.com/mapedit/)（全功能 30 天）

# php - 仅从与类别相关的表中获取有效产品

> ID：12882170
> 
> 赞同：1
> 
> 时间：2012-10-14T12:25:04.530
> 
> 标签：php, mysql, sql

我有 2 张桌子：

```
1 Category
- cID
- Name
- Active

2 Products
- pID
- Name
- category_id
- active 
```

这就是我想要的：我想要一个来自只有 ACTIVE 产品的类别的列表。

提前致谢

解决方案：SELECT DISTINCT category.* FROM category INNER JOIN products ON category.id = products.c_id WHERE products.active = 0 ORDER BY category.id DESC

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:44:04.003

假设`Products.Active = 1`意味着活动状态。

```
SELECT c.*
FROM Category c
INNER JOIN Products p ON c.CID = p.category_id
GROUP BY c.CID
HAVING COUNT(*) = SUM(IF(p.Active = 1, 1, 0)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:27:54.683

```
SELECT * FROM Products
Join Category on Category.ciD = Products.category_id
WHERE Category.Active = 1 AND Products.Active =1 
```

这是假设您的活动列只是 1 或 0。否则根据您存储在那里的值进行调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T17:05:12.480

我建议像这样构建
恕我直言，它的语法显示了您真正想看到的内容-所有具有有效产品的类别

```
select C.cID, C.Name, C.Active
from Category as C
where C.cID in (select distinct T.category_id from Products as T where T.Active = 1) 
```

# ios - HandleLongPressGesture 在添加子视图时只调用一次

> ID：12882178
> 
> 赞同：0
> 
> 时间：2012-10-14T12:26:14.483
> 
> 标签：ios, ipad, mkmapview, uigesturerecognizer

我正在使用 handleLongPressGesture 添加注释并在我的 MapView 旁边创建一个文本字段。我的问题是，当我插入子视图时，该函数只被调用一次： **`[self createTextfieldForPin:myString :x :y];`**

有谁知道，为什么？如果没有该功能，每次都会调用handleLongPressGesture-function，当我做一个长按时......

这是我的完整代码：

```
-(void)handleLongPressGesture:(UIGestureRecognizer*)sender
{
    // This is important if you only want to receive one tap and hold event
    if (sender.state == UIGestureRecognizerStateEnded)
    {
        //[self.mapView removeGestureRecognizer:sender];

 //       [self.mapView removeAnnotations:[self.mapView annotations]];
    }
    else
    {

        // Here we get the CGPoint for the touch and convert it to latitude and longitude coordinates to display on the map
        CGPoint point = [sender locationInView:self.mapView];
        CLLocationCoordinate2D locCoord = [self.mapView convertPoint:point toCoordinateFromView:self.mapView];
        // Then all you have to do is create the annotation and add it to the map
        UserAnnotation *dropPin = [[UserAnnotation alloc] initWithCoordinate:locCoord];
        [self.mapView addAnnotation:dropPin];

        //create NSString from coordinate
        NSNumberFormatter *fmt = [[NSNumberFormatter alloc] init];
        [fmt setMaximumFractionDigits:2];
        NSString *myString = [[NSString alloc]initWithFormat:@"%@ / %@",[fmt stringFromNumber:[NSNumber numberWithFloat:locCoord.latitude]],[fmt stringFromNumber:[NSNumber numberWithFloat:locCoord.longitude]]];

      [self createTextfieldForPin:myString :x :y];
    }
} 
```

**编辑

```
-(void)createTextfieldForPin:(NSString *)coordinates: (CGFloat) _x: (CGFloat) _y
{
    self.label = [[UILabel alloc]initWithFrame:CGRectMake(x, y, 100.0, 21.0)];
    self.label.text = coord;
    y = y + 25.0;
    self.textfield = [[UITextField alloc]initWithFrame:CGRectMake(x,y,163,31)];
    self.textfield.borderStyle = UITextBorderStyleRoundedRect;
    [self.view addSubview:self.label];
    [self.view addSubview:self.textfield]; 
```

}

**编辑

每次添加图钉时，我还想创建一个标签（用于坐标）和一个文本字段以添加城市或其他内容。就像图片上的一样。但是当 createTextfieldForPin 在该函数中时，我只能调用一次 handleLongPressGesture ..我不知道为什么

![在此处输入图像描述](../Images/1d7accf7619f998dd705c44ea940c710.png)

# md5 - 预先计算 MD5

> ID：12882184
> 
> 赞同：1
> 
> 时间：2012-10-14T12:26:59.733
> 
> 标签：md5

我有一百万个符号密码的 MD5 哈希，并且我有前 999,992 个符号。我需要暴力破解最后 8 位数字。我可以预先计算第一个符号的散列（我们称之为基本散列），然后只计算 8 个字符长度的字符串并将其散列添加到基本散列以更快地找到正确的传递吗？我应该使用什么算法或什么软件可以帮助我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:13:07.180

是的，这是可能的。MD5 基于[Merkle-Damgård 结构](https://en.wikipedia.org/wiki/Merkle%E2%80%93Damg%C3%A5rd_construction)，它以块为单位执行散列。您可以散列多个块，然后保存散列函数的状态，并以此为起点尝试剩余块的不同可能性。

根据文档（我没有测试过），我*认为*调用`clone()`Java[`MessageDigest`](http://docs.oracle.com/javase/6/docs/api/java/security/MessageDigest.html)会复制哈希函数的当前状态。您可以使用它从已知字符构建部分哈希，然后为每个猜测创建一个克隆。这是假设 MD5 实现实际上支持克隆。您可能需要编写自己的 MD5 实现（取决于您使用的语言和库）。

* * *

请注意，MD5 的块大小为 512 位（64 个字符），密码长度（一百万）是它的整数倍。这意味着您的密码字符将完全填满最后一个数据块，并且散列函数将需要一个*额外*的块来填充。因此，您将预先计算您知道的前 999,936 个字符的部分散列，然后从您知道的剩余 56 个字符加上您猜测的 8 个字符生成最终数据块，然后在之后附加填充块。

不过，像 Java 这样的实现`MessageDigest`应该注意将事物划分为块的细节。您*可能*（同样，我还没有测试过）只需创建一个`MessageDigest`, 调用`digest(byte[])`您的 999,992 个已知字节，然后调用`clone()`.

# facebook - API 并不总是返回相册中的所有照片

> ID：12882187
> 
> 赞同：0
> 
> 时间：2012-10-14T12:27:15.460
> 
> 标签：facebook, facebook-graph-api, photo

当我要求某些相册中的照片时，我只收到部分图像，而当我使用 facebook.com 时，我可以看到所有照片。

例如：`/3738185490005/photos?fields=id`返回 4 张图片：

```
{
  "data": [
    {
      "id": "3805142683893", 
      "created_time": "2012-06-05T20:11:54+0000"
    }, 
    {
      "id": "3744666692031", 
      "created_time": "2012-05-25T18:40:26+0000"
    }, 
    {
      "id": "3738416375777", 
      "created_time": "2012-05-24T14:41:45+0000"
    }, 
    {
      "id": "3738185530006", 
      "created_time": "2012-05-24T13:41:37+0000"
    }
  ]
} 
```

当我查看 Facebook 本身时，我看到了 9 张图片。同样，当我查看专辑通话时：`/3738185490005`我看到了`"count": 9`. 此相册中的所有图像都与朋友共享。我已经在多种专辑中看到过这种情况，但大多数情况下（据我所知）移动上传或 Instagram 专辑。

什么会导致这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:08:02.713

```
try /3738185490005/photos?fields=id&limit=100 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T22:17:31.227

[即使使用具有正确权限集的有效 access_token，FacebookClient 也不会获取给定相册 ID 的所有照片](https://stackoverflow.com/questions/22827638/even-with-a-valid-access-token-with-right-set-of-permissions-facebookclient-doe/22873872#22873872)

将“user_checkins”添加到范围集合以获取给定相册中的所有照片。请按照上面的链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T14:06:53.450

奇怪的。我做了一个应用程序，但没有发生类似的事情。对于用户未隐藏的相册，该相册的所有图片都会显示。

为了安全起见，请尝试将访问令牌与 api 调用一起使用。

# ruby - 无法解决 Ruby 错误（缺少心理）

> ID：12882190
> 
> 赞同：15
> 
> 时间：2012-10-14T12:27:26.670
> 
> 标签：ruby, installation, vps

每当我在服务器上使用 Ruby 运行某些东西时，都会收到以下错误：

```
/usr/local/rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/yaml.rb:56:in `<top (required)>':
It seems your ruby installation is missing psych (for YAML output).
To eliminate this warning, please install libyaml and reinstall your ruby. 
```

我使用 RVM 将 Ruby 安装到我的 VPS 上。

我已尝试`libyaml`按照 Stack Overflow 上其他问题中的说明安装软件包，但无济于事。

我不确定我的 VPS 运行的是什么类型的系统，但它没有`apt-get`命令。它确实有`yum`……</p>

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-14T13:58:22.150

我不得不不同意@JunaidKirkire，因为我认为您正在运行 CentOS 或 Redhat 5，它们默认使用非常旧版本的 Ruby，我认为使用 RVM 是一种更好的方法。我相信您只需要使用以下代码从源代码编译 libyaml：

`rvm pkg install libyaml`

这将告诉你它正在编译的目录，在我的例子中，它是`/Users/ehowe/.rvm/usr`

然后，您需要使用以下选项重新编译 Ruby：

`rvm reinstall 1.9.3 --with-libyaml-dir=$directory_that_rvm_installed_libyaml_to`

所以就我而言，我会这样做：

`rvm install 1.9.3 --with-libyaml-dir=/Users/ehowe/.rvm/usr`

如果您以 root 身份运行 rvm，它将安装到`/usr/local/rvm/usr`. 如果您按照建议以用户身份运行它，它将是`/home/$user/.rvm/usr`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-16T16:13:03.600

我遇到了这个问题，安装 libyaml 没有帮助。原来 psych 需要 libyaml-devel。我在centos6上，所以我这样做了：

```
curl -O http://www6.atomicorp.com/channels/atomic/centos/6/x86_64/RPMS/atomic-release-1.0-14.el6.art.noarch.rpm

sudo  rpm -Uvh atomic-release-1.0-14.el6.art.noarch.rpm

sudo yum install libyaml-devel

rvm reinstall 1.9.3-p194 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-02T19:56:06.477

在基于 RHEL 的发行版（例如 CentOS 6.x）上，您需要添加另一个 yum 存储库（例如 EPEL），其中包含 libyaml-devel 软件包。

[EPEL 的密钥](https://fedoraproject.org/keys)或[下载](http://dl.fedoraproject.org/pub/epel/)EPEL的
[RPM](http://dl.fedoraproject.org/pub/epel/)

更多信息：

*   [CentOS - 额外资源](http://wiki.centos.org/AdditionalResources/Repositories)
*   [Fedora 项目：EPEL Howto](http://fedoraproject.org/wiki/EPEL#How_can_I_use_these_extra_packages.3F)

还建议使用[yum-plugin-priorities](http://wiki.centos.org/PackageManagement/Yum/Priorities)

### 添加 EPEL Yum 存储库

```
rpm --import http://dl.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-6
rpm -Kih http://dl.fedoraproject.org/pub/epel/6/x86_64/epel-release-6-8.noarch.rpm 
```

### 通过 yum 安装 libyaml-devel

```
yum -y install libyaml-devel 
```

### 套餐

```
Dependencies Resolved

====================================================================================
 Package                       Arch         Version           Repository       Size
====================================================================================
Installing:
 libyaml-devel                 x86_64       0.1.3-1.el6       epel             84 k
Installing for dependencies:
 libyaml                       x86_64       0.1.3-1.el6       epel             52 k

Transaction Summary
====================================================================================
Install       2 Package(s) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-19T15:10:15.887

这个问题可以通过安装解决`libyaml`。以下是最流行的发行版的相应软件包：

*   软呢帽`libyaml`
*   Ubuntu 和其他基于 Debian`libyaml-dev`
*   其他的像 CentOS`libyaml-devel`

并且您应该安装以下内容以避免将来出现类似问题：

```
ruby-devel libxml2 libxml2-devel libxslt libxslt-devel 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-05-01T02:16:25.033

万一人们仍然遇到这个问题，我使用 RVM 中的新 autolibs 功能修复了它，它使用您的自制程序库自动安装依赖项（查看`rvm help autolibs`信息。）

`rvm reinstall 1.9.3 --autolibs=2`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T12:36:43.390

您似乎正在使用 Fedora。查看官方 Ruby 网站以获取在 Fedora 上安装的说明。

也试试这个链接[http://sraji.wordpress.com/2011/01/25/how-to-install-ruby-on-fedora-14/](http://sraji.wordpress.com/2011/01/25/how-to-install-ruby-on-fedora-14/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-29T19:30:29.857

我在 CentOS 6.2 上遇到了同样的 libyaml 问题

正在做...

```
rvm pkg install libyaml
rvm reinstall 1.9.3 --with-libyaml-dir=/usr/local/rvm/usr 
```

为我修好了。

（感谢@[尤金](https://stackoverflow.com/users/256785/eugene)）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-02T14:39:06.407

确保您的 Redhat 机器具有有效订阅：

```
# subscription-manager list 

+-------------------------------------------+
    Installed Product Status
+-------------------------------------------+
Product Name:   Red Hat Enterprise Linux Server
Product ID:     69
Version:        7.1
Arch:           x86_64
Status:         Subscribed
Status Details: 
Starts:         06/13/2014
Ends:           06/12/2015 
```

状态必须显示“已订阅”。如果没有，那么通过登录并可能在 [https://access.redhat.com/management/consumers](https://access.redhat.com/management/consumers)购买订阅而受苦。

完成后，运行

```
# subscription-manager repos --enable rhel-7-server-optional-rpms 
```

然后 libyaml-devel 将安装 OK。

# azure-storage - 确定要保存在 Windows Azure 表存储中的字段

> ID：12882195
> 
> 赞同：0
> 
> 时间：2012-10-14T12:27:56.510
> 
> 标签：azure-storage, azure-table-storage

我正在尝试将名为 Tshirt 的实体与 Windows Azure Blob 存储上的 Blob 一起存储到 Windows Azure 表存储中。该实体 Tshirt 包含一个名为 Image (byte[]) 的字段，但我不想将其保存在我的表中。如何在课堂上表明我不想保存该字段？

```
public class Tshirt : TableServiceEntity
{

    public Tshirt(string partitionKey, string rowKey, string name)
    {
        this.PartitionKey = partitionKey;
        this.RowKey = rowKey;
        this.Name = name;

        this.ImageName = new Guid();
    }

    private string _name;

    public string Name
    {
        get { return _name; }
        set { _name = value; }
    }

    private string _color { get; set; }

    public string Color
    {
        get { return _color; }
        set { _color = value; }
    }

    private int _amount { get; set; }

    public int Amount
    {
        get { return _amount; }
        set { _amount = value; }
    }

    [NonSerialized]
    private byte[] _image;

    public byte[] Image
    {
        get { return _image; }
        set { _image = value; }
    }

    private Guid _imageName;

    public Guid ImageName
    {
        get { return _imageName; }
        set { _imageName = value; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T18:43:43.247

简单的方法是将字段公开为一对方法而不是实际属性：

```
public byte[] GetImage()
{
    return _image;
}

public void SetImage(byte[] image)
{
    _image = image;
} 
```

如果这不是一个选项，那么您可以在存储实体时通过处理 WritingEntity 事件来删除 Image 属性。（[归功于尼尔麦肯齐](http://convective.wordpress.com/2009/12/30/entities-in-azure-tables/)）

```
public void AddTshirt(Tshirt tshirt)
{
    var context = new TableServiceContext(_baseAddress, _credentials);
    context.WritingEntity += new EventHandler<ReadingWritingEntityEventArgs>(RemoveImage);
    context.AddObject("Tshirt", tshirt);
    context.SaveChanges();
}

private void RemoveImage(object sender, ReadingWritingEntityEventArgs args)
{
    XNamespace d = "http://schemas.microsoft.com/ado/2007/08/dataservices";
    XElement imageElement = args.Data.Descendants(d + "Image").First();
    imageElement.Remove();
} 
```

# objective-c - UIActivityViewController 关闭 MailViewController

> ID：12882198
> 
> 赞同：7
> 
> 时间：2012-10-14T12:28:32.557
> 
> 标签：objective-c, ipad, email

我尝试通过 UIActivityViewController 发送电子邮件并且它工作正常，但是在发送电子邮件后邮件视图不会被关闭。当用户按下取消按钮时，它也不会关闭。

我能做些什么来解决这个问题？

这是我使用的代码：

```
//conf share view
    NSString *textToShare = @"Teststring!";
    UIImage *imageToShare = fetchedImage;
    NSURL *urlToShare = [NSURL URLWithString:string_url];
    NSArray *activityItems = [[NSArray alloc]  initWithObjects:textToShare, imageToShare,urlToShare,nil];

    UIActivity *activity = [[UIActivity alloc] init];

    NSArray *applicationActivities = [[NSArray alloc] initWithObjects:activity, nil];
    UIActivityViewController *activityVC =
    [[UIActivityViewController alloc] initWithActivityItems:activityItems
                                      applicationActivities:applicationActivities];

    activityVC.excludedActivityTypes = @[UIActivityTypeAssignToContact,
        UIActivityTypePostToWeibo,
        UIActivityTypeCopyToPasteboard,
        UIActivityTypeSaveToCameraRoll,
        UIActivityTypePrint];

    [activityVC setCompletionHandler:^(NSString *activityType, BOOL completed) {
        NSLog(@"CompletionHandler was called!");
    }]; 
```

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T01:12:38.547

我有解决办法。你想在你的基础中呈现 UIActivityViewController，即你的最高或最后一个视图控制器。就我而言，这有效：

```
[[[self parentViewController] parentViewController] presentViewController:activityViewController animated:YES completion:nil]; 
```

尝试自己调用 parentViewController 多少次，直到您访问最高的视图控制器。在我简单的 MasterView/DetailView 应用程序中，我不得不调用它两次。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-29T07:04:53.920

它总是在发布完成后进入这个完成处理程序，不管它成功与否

```
[activityViewController setCompletionHandler:^(NSString *activityType, BOOL completed)
 {
            if (completed)
     {
         UIAlertView *objalert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"Posting was successful" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
         [objalert show];
         objalert = nil;
     }else
     {
         UIAlertView *objalert = [[UIAlertView alloc]initWithTitle:@"Alert" message:@"Posting was not successful" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];
         [objalert show];
         objalert = nil;
     }
 }]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T14:04:46.367

然后尝试在 CompletionHandler 上关闭它

```
[activityVC setCompletionHandler:^(NSString *activityType, BOOL completed) {
       //Dismiss here 
    }]; 
```

# c# - C#用户输入需要> = 2，但如何做到这一点？

> ID：12882201
> 
> 赞同：1
> 
> 时间：2012-10-14T12:28:50.760
> 
> 标签：c#, string, if-statement, int

由于某种原因，这部分对我来说很难。其他一切都很好，但我似乎无法弄清楚如何让它重新询问输入是否> = 2 ...

```
if (minimumSides >= 2) 
```

我得到这部分，但它讨厌`minimumsides >= 2.`

```
do
{
    Console.Write("Enter minimum number of sides >2: ");
    int.TryParse(inputminside, out minimumSides);                               
    if (minimumSides >= 2)
        Console.Write("Enter minimum number of sides >2: ");
    else
        inputminside = Console.ReadLine();
}
while (!int.TryParse(inputminside, out minimumSides)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:31:20.580

你快到了：

```
do {
    Console.Write("Enter minimum number of sides >2: ");
    inputminside = Console.ReadLine();
} while (!int.TryParse(inputminside, out minimumSides) || minimumSides < 2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:31:25.047

问题可能是在循环“inputminside”的第一次迭代期间尚未初始化吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:33:29.410

这是您可以做到的一种方法：

```
var minimumSides  = 0;

while (minimumSides <=2)
{
    Console.Write("Enter minimum number of sides >2: ");
    int.TryParse(Console.ReadLine(), out minimumSides);
}

// carry on with your code here... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T12:33:38.463

这就是你想要的——

```
do
{
   Console.Write("Enter minimum number of sides >2: ");
   inputminside = Console.ReadLine();
}
while (!int.TryParse(inputminside, out minimumSides) && minimumSides < 2); 
```

# javascript - jQuery('#id') 与 javascript 中的 document.getElementById('#id') 不做同样的事情吗？

> ID：12882202
> 
> 赞同：2
> 
> 时间：2012-10-14T12:29:00.887
> 
> 标签：javascript, jquery

> **可能重复：**
> [document.getElementById vs jQuery](https://stackoverflow.com/questions/4069982/document-getelementbyid-vs-jquery)

我有一个函数，它将获取某个类（“jobStatus”）的所有跨度，并从中删除一个额外的类（“橙色”）。我从 SELECT onchange (onchange="chgJobstatus(this);") 调用该函数。它工作得很好。

但是，我试图让它在页面加载时运行，基于选定的值（这是服务器端动态生成的。）

这将起作用：

```
 $(document).ready(function(){
          chgJobstatus(document.getElementById("chgStatus"));
     }); 
```

这将不起作用：

```
 $(document).ready(function(){
          chgJobstatus(jQuery('#chgStatus'));
     }); 
```

jQuery('#id') 不做与 document.getElementById('#id') 相同的事情吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T12:33:19.977

关于选择元素，是的，但是 jQuery 选择器返回 jQuery 对象并`getElementById`返回一个 DOM Element 对象，您可以使用`[index]`or`get(index)`方法获取 DOM Element：

```
chgJobstatus(jQuery('#chgStatus')[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:57:48.463

> jQuery('#id') - 返回一个 jQuery 对象
> 
> document.getElementById('#id') - 返回一个 HTML DOM 对象
> 
> jQuery('#id').get(0); ***或***jQuery('#id')[0]; - 返回一个 HTML DOM 对象

通过使用 jquery，它将允许您访问 jquery 函数。如果您阅读以下链接，您会得到一个好主意。

[document.getElementById 与 jQuery](https://stackoverflow.com/questions/4069982/document-getelementbyid-vs-jquery)

[jQuery $() 与 document.getElementByID 的区别](https://stackoverflow.com/questions/5756928/jquery-vs-document-getelementbyid-differences)

[getelementbyid-vs-jquery-id](http://jsperf.com/getelementbyid-vs-jquery-id/27)

[jquery-sharp-vs-getelementbyid](http://jsperf.com/jquery-sharp-vs-getelementbyid/16)

[getelementbyid-vs-jquery-id](http://jsperf.com/getelementbyid-vs-jquery-id/21)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:20:11.660

您应该知道的更重要的事情是 jQuery 返回对 jQuery 对象的引用，而不是对象本身。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T12:32:35.143

不，`jQuery('#id')`返回一个带有附加功能和属性的 jquery 对象。

我不完全确定您要做什么，但是这样的事情可以替代您描述的所有 javascript。

```
$("#chgStatus")
  .bind("change", function() {
    $(".jobStatus").removeClass("orange");
  }).trigger("change"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T12:33:26.823

这肯定会奏效。`jQuery(selector)`总是返回一个 jQuery 对象`(jQuery(selector) instanceof jQuery is true )`。但是您可以使用 .get 或简单地使用类似数组的语法来获取本机 dom 元素，如下所示。

```
$(document).ready(function(){
          chgJobstatus(jQuery('#chgStatus')[0]);
     }); 
```

# numbers - 如何在textview android中格式化数字

> ID：12882204
> 
> 赞同：1
> 
> 时间：2012-10-14T12:29:30.200
> 
> 标签：numbers, textview, number-formatting

我正在编写一个小代码来使用 textview 输出一个双变量。但是我无法控制小数位数。有没有办法控制textview中的小数位数。

代码：

```
TextView temp;

temp = (TextView)findViewById(R.id.textView3);

double T = (3*(Math.pow(4,-1.2)));

temp.setText("Temperature ="+String.valueOf(T) + " deg C"); 
```

我想在输出的文本视图中只打印四位小数。

# sql - 从内部联接更新 SQL

> ID：12882212
> 
> 赞同：18
> 
> 时间：2012-10-14T12:30:42.023
> 
> 标签：sql, ms-access

我正在使用微软访问。

如果这个查询：

```
(SELECT FERMENT.FermentId
FROM FERMENT
INNER JOIN [BELGIUM BEER]
ON
FERMENT.FermentName = [BELGIUM BEER].FermentId ORDER BY [BELGIUM BEER].BeerId) a 
```

返回 FermentId，如何使用该列更新不同的表？

例子：

```
UPDATE EXAMPLETABLE
SET EXAMPLETABLE.FermentId = a.FermentId
FROM a
(SELECT FERMENT.FermentId
FROM FERMENT
INNER JOIN [BELGIUM BEER]
ON
FERMENT.FermentName = [BELGIUM BEER].FermentId ORDER BY [BELGIUM BEER].BeerId) a 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-14T12:57:35.847

不确定EXAMPLETABLE 与您的数据的关系是什么，但总的来说。

在 Access 中，SET 部分在 join 之后，也跳过了 select 部分按顺序排列。应该是这样的

```
UPDATE FERMENT
INNER JOIN ([BELGIUM BEER]  ON FERMENT.FermentName = [BELGIUM BEER].FermentId) 
SET EXAMPLETABLE.FermentColumn = a.FermentColumn 
```

如果它不起作用，请尝试在查询构建器中构建连接

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2015-12-20T10:22:13.510

不需要定义两个表之间的关系。答案 10 (Arnoldiusss) 几乎是正确的，也是迄今为止最容易理解和最短的解决方案。并且执行速度最快。但是示例代码是错误的。下一个代码来自我的一个应用程序，在 MS ACCESS 2013 中运行良好。

```
 UPDATE table1 T1 
    INNER JOIN table2 T2 
    ON T2.Id = T1.Id
    SET T1.myField = T2.myField; 
```

对于“比利时啤酒案”（我喜欢这种表达方式；-）它将是：

```
 UPDATE FERMENT AS T1
    INNER JOIN [BELGIUM BEER] AS T2 ON T1.FermentName = T2.FermentId 
    SET T1.FermentColumn1 = T2.FermentColumn1; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-14T12:59:52.327

假设子查询返回多个值，您需要第二个键来连接 (JOIN) 新值和要更新的表 (EXAMPLETABLE)。

在这种情况下，我会尝试这样的事情：

```
UPDATE T 
SET    T.FERMENTID = A.FERMENTID 
FROM   EXAMPLETABLE AS T 
       INNER JOIN (SELECT FERMENT.FERMENTID, 
                          FERMENT.OTHERID 
                   FROM   FERMENT 
                          INNER JOIN [BELGIUM BEER] 
                                  ON FERMENT.FERMENTNAME = 
                                     [BELGIUM BEER].FERMENTID 
                   ORDER  BY [BELGIUM BEER].BEERID) AS A 
               ON A.OTHERID = T.OTHERID 
```

如果不是这种情况并且子查询返回单个值，请尝试以下操作：

```
UPDATE EXAMPLETABLE 
SET    T.FERMENTID = (SELECT FERMENT.FERMENTID
                      FROM   FERMENT 
                             INNER JOIN [BELGIUM BEER] 
                                     ON FERMENT.FERMENTNAME = 
                                        [BELGIUM BEER].FERMENTID 
                      ORDER  BY [BELGIUM BEER].BEERID) 
```

**请注意，在这种情况下，您需要保证子查询永远不会返回超过一行！**

# iphone - 通过 UIManagedDocument 异步打开时如何确保 NSManagedObjectContext

> ID：12882214
> 
> 赞同：1
> 
> 时间：2012-10-14T12:31:07.547
> 
> 标签：iphone, ios, core-data, nsmanagedobjectcontext

我有一个具有不同控制器的应用程序，它们都在同一个 NSManagedObjectContext 上运行。

我的方法是在我的 AppDelegate 中初始化 NSManagedObjectContext 并将其注入到所有控制器中。

我正在通过打开这样的 UIManagedDocument 来初始化我的 NSManagedObjectContext：

```
UIManagedDocument* databaseDoc = [[UIManagedDocument alloc] initWithFileURL:url];

if (![[NSFileManager defaultManager] fileExistsAtPath:[databaseDoc.fileURL path]]) {
    [databaseDoc saveToURL:databaseDoc.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
        myController.managedObjectContext = databaseDoc.managedObjectContext;
    }];
} else if (databaseDoc.documentState == UIDocumentStateClosed) {
    [databaseDoc openWithCompletionHandler:^(BOOL success) {
        myController.managedObjectContext = databaseDoc.managedObjectContext;
    }];
} else if (databaseDoc.documentState == UIDocumentStateNormal){
    myController.managedObjectContext = databaseDoc.managedObjectContext;
} 
```

现在我的问题是，打开 UIManagedDocument 是异步发生的，并且 NSManagedObjectContext 仅在完成块中可用。

如何确保控制器始终有一个有效的 NSManagedObjectContext 可以使用？当然，问题发生在启动时，即当控制器想要在他的“viewDidLoad”方法中使用 NSManagedObjectContext，并且 AppDelegate 中的完成块尚未运行时......

一种方法可能是在 AppDelegate 中“等待”直到 UIDocument 打开，但据我所知[，不建议这样做](https://stackoverflow.com/questions/10314190/how-to-open-create-uimanageddocument-synchronously)......

我想避免使用处理打开 NSManagedObjectContext 的异步性质的代码“污染”我的控制器......但也许这是一个天真的愿望？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:21:52.580

在您的 appDelegate 中：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    MyWaitViewController* waitController = [[MyWaitViewController new] autorelease];
    self.window.rootViewController =  waitController;

// then somewheres else, when you get your context
  [databaseDoc saveToURL:databaseDoc.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
        myContextController.managedObjectContext = databaseDoc.managedObjectContext;
        self.window.rootViewController    = myContextController;
        // note that at this point when the viewDidLoad method will get called
        // it will have his managedObjectContext and his view already available.
        // you can change your rootController, or push another viewController into the
 // stack. Depending on what u want from the GUI side

    }];
    return YES;
} 
```

请注意，您将 GUI 逻辑部署到 MyWaitViewController + AppDelegate 端。但是你让你的“myContextController”远离那个逻辑控制，因为他只有在上下文存在时才会被调用/创建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-10T14:39:20.240

我在同样的问题上苦苦挣扎，我通过使用`NSNotificationCenter`.

*   在成功处理程序中初始化您`NSManagedObjectContext`的时，添加发送通知。
*   然后，添加一个监听器到`viewDidLoad`你的第一个监听`ViewController`器。

我用那个监听器来调用一个`reloadData`方法。在一个沉重的应用程序中，这可能是一个问题，因为`viewcontroller`加载空白，然后重新加载数据，但这是一个精简的应用程序，而且它很明显 -`viewController`加载与`managedObjectContext`.

# java - 如何在 Java 输出中显示特殊的转义字符，如 LineBreak？

> ID：12882219
> 
> 赞同：3
> 
> 时间：2012-10-14T12:31:41.513
> 
> 标签：java, string, character

找不到似乎是一个简单问题的解决方案。例如，我有一个带有 LineBreak ”a\na” 的字符串。此字符串的 System.out.println 输出显示 2 行。但是，我需要以完全相同的形式显示输出，即“a\na”。如何做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T12:32:54.887

你需要`\n`用一个额外的反斜杠来逃避你的..

使用： -`"a\\na"`进入`\n`你的输出..

```
System.out.println("a\\na"); // Prints a\na 
```

或者，您也可以看一下 :-它将自动用额外的反斜杠来排除所有特殊情况。[`Apache Commons`](http://commons.apache.org/lang/) [`StringEscapeUtils#escapeJava`](http://commons.apache.org/lang/api-2.6/org/apache/commons/lang/StringEscapeUtils.html#escapeJava%28java.lang.String%29)`escape sequences`

```
String str = "a\nb\r\t";
String result = StringEscapeUtils.escapeJava(str); // Takes `\n` as `\\n`
System.out.println(result); 
```

这将打印： -`a\nb\r\t`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T12:38:29.813

对于通用解决方案，您可以查看来自 Apache Commons的[StringEscapeUtils.escapeJava](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringEscapeUtils.html)

# joomla - K2 标签不适用于 joomla 2.5 后端

> ID：12882221
> 
> 赞同：0
> 
> 时间：2012-10-14T12:32:00.997
> 
> 标签：joomla, joomla2.5, joomla-extensions, joomla-k2

嗨，经过大量搜索后，我发布了这个问题。当尝试在 joomla 2.5 后端的 k2 项目中添加标签时，没有任何反应。我按下了回车键，也尝试了逗号。我尝试过更新 k2 最新版本。但仍然是同样的问题。我正在使用 ja_wall 模板，joomla 2.5。我也在 k2 升级后收到此错误

```
Model class cpanelModelCpanel not found in file 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-12T08:28:45.090

我有正确的解决方案。转到 phpMyadmin，然后转到 jos_k2_tags_xref 并编辑结构。将 ID 设置为 Primary，（单击它）然后去编辑 id 行。将“默认”设置为“无”或“未设置”（我不知道它是如何用英语调用的，但无论如何这是第一个可能的选择）然后检查“A_I”字段（AUTO_INCREMENT）然后保存。现在它应该可以工作了:)

问题是，由于 k2 表的错误迁移，新 k2 标记的 ID 为 0 :)

如果这会导致问题，这也可以用于在创建/复制/删除 k2 项目时修复相同的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T23:02:12.453

这是在 K2 v2.6.1 中修复的问题。或者删除文件`ROOT/administrator/components/com_k2/models/cpanel.php`。这实际上是更新所做的。

另请参阅k2 上的[此](http://getk2.org/community/New-to-K2-Ask-here-first/163115-Model-class-cpanelModelCpanel-not-found)论坛帖子以获取有关此问题的更多信息！

# java - 适合初学者的 java 和 sqlite

> ID：12882225
> 
> 赞同：-2
> 
> 时间：2012-10-14T12:32:31.007
> 
> 标签：java, sqlite, jdbc

我正在编写一个需要创建和使用 sqlite 数据库的程序。我现在需要做的是创建数据库并确保我的所有类都可以与之交互。我在网上看过，但我发现很多东西自相矛盾。谁能简单地解释一下我将如何创建这个数据库并首先连接到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:34:40.927

您需要了解[JDBC 教程](http://docs.oracle.com/javase/tutorial/jdbc/basics/index.html)。这就是 Java 与包括 SQLLite 在内的关系数据库交互的方式。

SQLLite 也有很多教程，包括[这个](http://souptonuts.sourceforge.net/readme_sqlite_tutorial.html)。

我不知道你发现了什么自相矛盾。

# php - 在 PHP 中注销后页面不重定向

> ID：12882229
> 
> 赞同：2
> 
> 时间：2012-10-14T12:32:44.510
> 
> 标签：php, logout

我有两种情况，目前我正在使用相同的脚本从两个不同的地方运行我的脚本，第一个来自本地主机，第二个来自网站。问题是当我在本地运行它成功注销时，它会重定向到`index.php`但为什么当我在网站上运行时它不是 100% 工作？注销功能正在工作，但它没有重定向到`index.php`，它仍然出现在同一页面而不是`index.php`页面。

我的注销代码如下：

```
<a href="<?php echo $logoutAction ?>">[Logout]</a> 
```

我的会话代码如下：

```
<?php
//initialize the session
if (!isset($_SESSION)) {
  session_start();
}

// ** Logout the current user. **
$logoutAction = $_SERVER['PHP_SELF']."?doLogout=true";
if ((isset($_SERVER['QUERY_STRING'])) && ($_SERVER['QUERY_STRING'] != "")){
  $logoutAction .="&". htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_GET['doLogout'])) &&($_GET['doLogout']=="true")){
  //to fully log out a visitor we need to clear the session varialbles
  $_SESSION['MM_Username'] = NULL;
  $_SESSION['MM_UserGroup'] = NULL;
  $_SESSION['PrevUrl'] = NULL;
  unset($_SESSION['MM_Username']);
  unset($_SESSION['MM_UserGroup']);
  unset($_SESSION['PrevUrl']);

  $logoutGoTo = "index.php";
  if ($logoutGoTo) {
    header("Location: $logoutGoTo");
    exit;
  }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:50:10.897

最后我自己找到了，我找到的简单代码是：

```
<?php
session_start(); //Start the current session
session_destroy(); //Destroy it! So we are logged out now
header("location:index.php?msg=logout");
?> 
```

无论如何，感谢所有想帮助我的人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:44:27.827

试试这样：

```
<?php

//initialize the session
session_start();

// ** Logout the current user. **
$logoutAction = $_SERVER['PHP_SELF'] . "?doLogout=true";

if ((isset($_SERVER['QUERY_STRING'])) && ($_SERVER['QUERY_STRING'] != "")){
  $logoutAction .= "&" . htmlentities($_SERVER['QUERY_STRING']);
}

if ((isset($_GET['doLogout'])) &&($_GET['doLogout'] == "true")) {
  //to fully log out a visitor we need to clear the session varialbles
  // $_SESSION['MM_Username'] = NULL;
  // $_SESSION['MM_UserGroup'] = NULL;
  // $_SESSION['PrevUrl'] = NULL;
  // the upper code makes no sense with the code below. just unset the vars, or use "session_destroy"

  unset($_SESSION['MM_Username']);
  unset($_SESSION['MM_UserGroup']);
  unset($_SESSION['PrevUrl']);

  $logoutGoTo = "index.php";
  header("Location: index.php"); // or header("Location: " . $logoutGoTo)

  // no reason checking if $logoutGoTo has any value, cause there's no changing in this code set
  // do not use exit after header!
  /*if ($logoutGoTo) {
    exit;
  }*/
}
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-08-23T14:14:51.537

启动新会话并销毁旧会话，如下所示：

```
session_start();
session_destroy();
header("location:index.php?msg=logout"); 
```

# java - 如果不存在新的 Java DB，如何创建？

> ID：12882235
> 
> 赞同：5
> 
> 时间：2012-10-14T12:33:18.307
> 
> 标签：java, database

```
 conn = DriverManager.getConnection("jdbc:derby:mydatabase;create=true",props); 
```

每次我执行它时，这条线会让我的数据库被覆盖吗？如果它会我如何创建一次数据库并从此使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T12:41:51.880

你所做的将与德比一起工作。如果它不存在，它将创建数据库，如果它已经存在，它将不执行任何操作。

# javascript - 在移动浏览器中获取缩放尺寸

> ID：12882239
> 
> 赞同：0
> 
> 时间：2012-10-14T12:33:32.960
> 
> 标签：javascript, android, cordova, mobile

我正在使用 Android 上的 Phonegap 开发一个移动应用程序（使用 720x1280 屏幕和模拟器进行测试）。在 javascript 中打印 screen.width 和 screen.height 说 720x1280 这是应该的。但是，当我在 Weinre 检查身体时，它会说尺寸是 360x451。body 已经用 width: 100% 注释了；高度：100%。我正在尝试缩放某些元素以在 16x9 显示器上占用更多空间。有没有办法在 javascript 中获取 DPI？

谢谢史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:52:24.063

好的，诀窍是使用 window.innerHeight 而不是 screen.height

# wordpress - 如何添加到购物车按钮而不是 Paypal 按钮

> ID：12882240
> 
> 赞同：0
> 
> 时间：2012-10-14T12:33:37.370
> 
> 标签：wordpress, shopping-cart

我有自己的服务网站，它有很多帖子（比如大约 50 个），并且在每个帖子中我都保留了贝宝按钮，以便让我的访问者付款。

但我正在考虑用一个购物车来代替那些贝宝按钮，这样访问者就会放弃他们的电子邮件 ID 并付款。

我尝试使用 wp-ecommerce，但不幸的是它迫使我使用诸如 www.somedomain.com/shop/someservice （或）www.somedomain.com/products-page/someservice 之类的 URL

由于我已经有很多帖子并且这些帖子也被编入索引，所以我也无法更改我的网址。

所以，我需要这样：只是用一些“添加到购物车”按钮代替我所有帖子的贝宝按钮。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T19:48:12.663

在 href="insert paypals api 链接" 中创建一个自定义按钮，显示“添加到购物车”

# regex - 正则表达式缩短字符串

> ID：12882246
> 
> 赞同：-1
> 
> 时间：2012-10-14T12:34:11.897
> 
> 标签：regex

我需要一种“缩写”句子的方法。我想从每个单词中至少取 3 个字母，并在元音或单词末尾完成每个单词的缩写。

例如，如果我有一个字符串“Profit Loss Report”，我想将其缩写为 ProfLossRep

有人可以推荐一个可以为我做这件事的正则表达式吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:43:44.983

这是正则表达式：

```
/^([a-z]{3}).*?([aeiou]|(?:.$))/i 
```

第一个捕获组返回前三个字母，下一个返回最接近的元音或最后一个字母。

[这](http://jsfiddle.net/zUMrE/)是在行动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:44:02.880

我不确定您是否可以仅使用正则表达式替换来做到这一点。您绝对可以做的是编写一个可以做到这一点的小程序。这是 Ruby 中的一个简单的单行代码：

```
p 'Profit Loss Report'.split.map { |i| i[0, 4].gsub /[aeio]*$/, '' }.join 
```

输出：

```
"ProfLossRep" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:21:47.887

这是 .NET 的解决方案：

```
resultString = Regex.Replace(subjectString, 
    @"(?<=          # Start at a position after...
     \b             # the start of a word 
     \p{L}{2,}      # followed by at least two letters (any letters)
     [^\P{L}aeiou]  # and one letter that isn't a vowel
    )               # End of lookbehind
    (?:             # Then match...
     [aeiou]        #  a vowel
     \p{L}*         #  plus any additional letters
    )?              # if present.
    \s*             # Match any trailing whitespace", 
    "", RegexOptions.IgnorePatternWhitespace); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T13:21:49.963

这个正则表达式似乎可以解决问题：

\b\w{3}[^aAeEyYuUiIoO\W$]*

# php - 从 URL 中删除带有 ID 的文章

> ID：12882247
> 
> 赞同：0
> 
> 时间：2012-10-14T12:34:13.700
> 
> 标签：php

我正在建立这个博客网站，终于完成了考虑将多张图片上传到一篇新闻文章的一切。

现在我的第二步是删除带有以下图片的文章。一切都在数据库中设置，所以我只需要新闻文章中的 ID。

当我在一篇文章上按下删除按钮时，它会在 URL 中显示 ID ...我想知道如何从 URL 中获取特定的 ID int，如果有更智能的方法。它必须是 OOP 和面向对象的方法。

代码如下所示：

这是循环出每篇文章并注意 $current_id 我放入一个按钮以在按下时显示在 url 中

```
 public function doOutputArticles($newsList, $pictureList)
    {

        $result = '';
        foreach($newsList as $news)
        {
           $result .= '<ul>';   
           $current_id = $news->dbNewsID;
           $result .= '<li class="bloggNewsHeader">'.$news->dbHeader.'</li>';
           $result .= '<li class="bloggNews">'.$news->dbNews.'</li>';
           $result .= '<li class="bloggNewsDate">'.$news->dbNewsDate.'</li>';
           foreach($pictureList as $pic)
           {
              if($pic->dbNewsID == $current_id)
              {
                $result .= '<li class="bloggNewsPicID">'.$pic->dbPictureID.'</li>';
                $result .= '<img class="bloggNewsPic" src="./images/'.$pic->dbPicture.'"alt="some_text">';
              }  
           }
           $result .= "
                        <form id='' method='get'>
                            <input type='hidden'    name='$current_id'/>
                            <input type='submit'      name='removeArticle' value='Ta bort inlägg' />
                        </form>";

           $result .= '</ul>';
        }
        return "<div id='filesLoaded'>". $result ."</div>";

    } 
```

`

完成此操作后，我按下按钮删除特定文章，然后 ID 显示在 URL 中，现在此方法旨在获取 URL 中的特定 INT/NUMBER ID，但如何？

```
public function GetSelectedID()
    {       
        $ID = $_GET[self::$articleId];
        echo $ID;

        if(is_null($ID) || empty($ID))
        {
             return null;
        }
        else
        {
            echo $ID;
            return $ID;
        }

    } 
```

`
亲切的问候/哈里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:55:58.373

你真的不需要表格，一个简单的链接就可以了，而且更清晰。您应该使用不同的端点进行删除，而不是寻找“removeArticle”。这将更加面向对象，因为它将为为每个函数创建特定的动作控制器铺平道路，而不是让一个庞大的端点充满条件。然后，您可以拥有从 URL 中提取的“articleId”之类的一致参数（最好在 URL 路径中）。理想情况下，您还希望在完成后重定向到列表页面，以使功能集中在每个方法中，并作为一种避免重复发布问题的做法（尽管此示例是幂等的，因此不会过于重要）。

# javascript - 检查nodejs路径是否存在

> ID：12882256
> 
> 赞同：12
> 
> 时间：2012-10-14T12:35:25.177
> 
> 标签：javascript, node.js

我只想知道路径是否存在。这是我的代码：

```
var path = require('path'); // exists path 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-14T12:36:12.250

使用方法检查文件系统中是否存在文件的`fs.existsSync()`方法：

```
const fs = require('fs')

const path = './file.txt';

if (fs.existsSync(path)) {
  //file exists
} 
```

此方法是同步的，要以异步方式检查文件是否存在，可以使用`fs.access()`，它在不打开文件的情况下检查文件的存在：

```
fs.access(path, fs.F_OK, (err) => {
  if (err) {
    console.error(err)
    return
  }

  //file exists
}) 
```

# php - 如何在php中将对象克隆到子类

> ID：12882258
> 
> 赞同：18
> 
> 时间：2012-10-14T12:35:28.550
> 
> 标签：php, class, inheritance

我在 PHP 中有一个父类 A 和一个子类 B。有什么方法可以将 A 类的实例克隆到 B 的实例，并稍后在 B 实例中使用 B 类属性？谢谢

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-08T22:35:41.877

我的解决方案将基于这个问题的解决方案[How do you copy a PHP object into a different object type](https://stackoverflow.com/questions/119281/how-do-you-copy-a-php-object-into-a-different-object-type)

```
class childClass extends parentClass
{
    private $a;
    private $b;

    function loadFromParentObj( $parentObj )
    {
        $objValues = get_object_vars($parentObj); // return array of object values
        foreach($objValues AS $key=>$value)
        {
             $this->$key = $value;
        }
    }
}

$myParent = new parentClass();
$myChild = new childClass();
$myChild->loadFromParentObj( $myParent ); 
```

# android - 如何设置特定时段的闹钟

> ID：12882261
> 
> 赞同：1
> 
> 时间：2012-10-14T12:35:59.700
> 
> 标签：android, alarmmanager

我让用户设置重复警报的开始和结束时间，例如每天下午 2:30 到下午 4:30。我可以将闹钟设置为在指定的开始时间响起，但如何在结束时间停止？

我想我应该在广播接收器类中处理这个问题，在那里我得到额外的并将它与系统时间进行比较，但是我不能像在活动中取消它那样在这里取消警报。

这是我如何设置警报的示例：

```
 Intent intent = new Intent(NewSchedule.this, RepeatingAlarm.class);
    intent.putExtra("endTime", cal_alarmend.getTimeInMillis()/1000);
    PendingIntent sender = PendingIntent.getBroadcast(NewSchedule.this, REQUEST_CODE, intent, 0);
    AlarmManager am = (AlarmManager)getSystemService(ALARM_SERVICE);
    am.setRepeating(AlarmManager.RTC_WAKEUP, cal_alarmstart.getTimeInMillis(), 6000, sender); 
```

接收器类：

```
public class RepeatingAlarm extends BroadcastReceiver {

      @Override
      public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "repeating_received", Toast.LENGTH_SHORT).show();

        long now = System.currentTimeMillis();

        Bundle b = intent.getExtras();
        long end = b.getLong("endTime");

        Log.i("now", now + "");
        Log.i("end", end + "");

        if (now > end)
        {
            ???????
        }

      }
    } 
```

**编辑**

为什么我无法在 BroadcastReceiver 的 onReceive() 中取消警报？

```
public class RepeatingAlarm extends BroadcastReceiver {

      @Override
      public void onReceive(Context context, Intent intent) {
        Toast.makeText(context, "repeating_received", Toast.LENGTH_SHORT).show();

        long now = System.currentTimeMillis();
        Bundle b = intent.getExtras();
        long end = b.getLong("endTime");
        int rc = b.getInt("reqCode");

        Log.i("rc", rc + "");

        long n = now/1000;
        long e = end;

        Log.i("now", n + "");
        Log.i("end", e + "");

        if (n > e)
        {
            Log.i("STATUS", "now > end    " + n + ">" + e);
            Intent intentstart = new Intent();
            PendingIntent senderstart = PendingIntent.getBroadcast(context, rc, intentstart, PendingIntent.FLAG_CANCEL_CURRENT);
            AlarmManager am = (AlarmManager)context.getSystemService(Context.ALARM_SERVICE);
            am.cancel(senderstart);
        }
        else
        {
            Log.i("STATUS", "now <= end    " + n + "<=" + e);
        }

      }
    } 
```

我仔细检查了堆栈跟踪，并且 rc 与我用来启动警报的请求代码完全相同。

这是堆栈跟踪： ![在此处输入图像描述](../Images/c3d518ccd837144f3f68453ad51ae4dc.png)

在此之后，警报应该已被取消，但我仍然收到 Toast 消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:10:22.850

> 我无法像在活动中取消它一样在此处取消警报

AFAIK，你可以。更准确地说，我看不出会有什么问题。

> 这就是我在活动中取消警报的方式

该代码设置了警报。它不会取消它。要取消警报，请在等效项（除附加项之外的所有内容）上创建具有相同类型`PendingIntent`（例如）的 ，然后调用.`getBroadcast()``Intent``cancel()``AlarmManager`

# emacs - 不能正确地要求 c-common-init 和其他 c-mode 函数

> ID：12882264
> 
> 赞同：0
> 
> 时间：2012-10-14T12:36:24.520
> 
> 标签：emacs, cc-mode

这一定是在过去一两个月内发生的。我不确定谁应该为此负责，但是现在当我尝试对从 c-mode 派生的模式进行字节编译时，Emacs 找不到派生模式中引用的任何 c-mode 函数。我查看了 cc-bytecom.el 并且（我不确定它是否是新的，但看起来像是）它定义了两个宏：`cc-requre`和`cc-provide`. 我不能真正理解他们在做什么，但他们似乎阻止 Emacs 发现这些功能必须可用。如果，在我的代码中，我尝试替换`(requre 'cc-mode)`为`(cc-requre 'cc-mode)`没有任何变化。

上述宏似乎只适用于编译时间，但我不能确定，它们也调用`(eval-when-compile (cc-bytecomp-restore-environment))`and `(eval-when-compile (cc-bytecomp-load (symbol-name ,cc-part)))`。我很难弄清楚它有什么作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T15:09:52.513

我没有看到你描述的问题：当我编译 haxe-mode 文件时，我只看到一个关于几个 c-mode 函数的警告，说它们可能在运行时未定义，因为 haxe-mode.el 调用了这些函数但是仅加载`eval-when-compile`.

顺便说一句，这些警告似乎是由于一些奇怪的代码，可能是从臭名昭著的 cc-bytecomp 复制而来的。下面的补丁似乎导致了一个干净的编译：

```
=== modified file 'haxe-help.el'
--- haxe-help.el    2012-10-16 14:41:06 +0000
+++ haxe-help.el    2012-10-16 15:11:37 +0000
@@ -33,7 +33,6 @@

 ;;; Code:

-(eval-when-compile (require 'cl))
 (require 'cl)

 (defcustom haxe-help-location

=== modified file 'haxe-mode.el'
--- haxe-mode.el    2012-10-16 14:41:06 +0000
+++ haxe-mode.el    2012-10-16 15:21:23 +0000
@@ -77,7 +77,6 @@
 (require 'cc-bytecomp)
 (require 'cc-mode)
 (require 'cc-fonts)
-;; (cc-require-when-compile 'cc-langs)
 (require 'cc-langs)

 (require 'compile)
@@ -91,18 +90,6 @@
 (require 'haxe-log)
 ;; ------------------- my change -------------------------------------

-;; The language constants are needed when compiling.
-(eval-when-compile
-  (let ((load-path
-         (if (and (boundp 'byte-compile-dest-file)
-                  (stringp byte-compile-dest-file))
-             (cons (file-name-directory byte-compile-dest-file) load-path)
-           load-path)))
-    (load "cc-mode" nil t)
-    (load "cc-fonts" nil t)
-    (load "cc-langs" nil t)
-    (load "cc-bytecomp" nil t)))
-
 (eval-and-compile
   ;; Tell the language constant system about haXe and base it on Java.
   (c-add-language 'haxe-mode 'java-mode))
@@ -387,7 +374,7 @@
                   (c-fontify-types-and-refs
                       ((c-promote-possible-types t)
                        (parse-sexp-lookup-properties
-                        (cc-eval-when-compile
+                        (eval-when-compile
                           (boundp 'parse-sexp-lookup-properties))))
                     (save-restriction
                       (narrow-to-region (point) limit) 
```

# java - 如何在 JPA 中使用更新（eclipse 链接）

> ID：12882269
> 
> 赞同：0
> 
> 时间：2012-10-14T12:36:52.980
> 
> 标签：java, jpa, eclipselink

我有一个计费页面，其中包含几个类别的信息以及它们的价格、数量和总数

## 计费屏幕看起来像

客户名称：Dummy Customer 客户地点：Dummy Place

类别名称 数量 价格 总计 TestCategory 10 10 100 TestCategory1 15 10 150

```
 Total 250 
```

## 添加新类别 确定 更新 删除

屏幕上有 3 个按钮“确定”、“更新”和“删除”

一旦用户单击确定按钮，信息就会作为新的 tranx 保存到数据库中

Tranx 模型类似于

**Master_Tranx**实体，包含 TranxID Tranx_Total Customer Name Customer Place

然后是由 SerialNumber/category/Quantity/Price/Tranx_id 组成的**Tranx** 实体

Master_Tranx 实体和 Tranx 实体之间的关系就像

Master_Traxn 主键是 Tranx_id，它连接到 Tranx 实体中的外键 tranx_id。

因此，当用户按下 ok 时，会在 Tranx 和 Master_Tranx 实体中生成一条新记录

对于每张新账单，多行进入 Tranx 表，但单行插入 Master_Tranx 实体。

现在问题在于更新。

按 OK 按钮成功将数据创建到上述两个实体中，但是

假设用户想要更新任何现有的 tranx，例如在现有 traxn 中添加更多类别，或者更新可能是计费表现有行的数量，用户需要在将所需内容更新到屏幕后按下更新按钮。

我在这个更新按钮中实现代码的方式就像

我使用我需要进行更新的 tranx_id 。然后在计费屏幕中获取所有行。然后填充由 Tranx 实体组成的 Master_Tranx 实体，该 tranx 实体由所有计费表行组成。

然后使用实体管理器的 merge() 函数进行更新。

问题是当我按下更新按钮而不是更新现有的 tranx infomration 时。它针对这个 tranx ID 添加新行

例如：我想创建一个新信息。我添加新行，例如

类别名称 数量 价格 总计 TestCategory 10 10 100 TestCategory1 15 10 150

然后我按 OK 按钮，然后生成一个 tranx ID

现在我想在现有的 tranxID 中再添加一个 tranx，例如

类别名称 数量 价格 总计 TestCategory 20 10 200 TestCategory1 15 10 150 TestCategory3 20 15 300

我也对第一行的数量进行了更改，我从 10 做 20。然后我按下更新按钮

在针对 TranxEntity 的数据库中，我可以看到类似的行

1 测试类别 10 10 100 2 测试类别 1 15 10 150 3 测试类别 20 10 200 4 测试类别 1 15 10 150 5 测试类别 3 20 15 300

虽然它应该是这样的

1 测试类别 20 10 200 2 测试类别 1 15 10 150 3 测试类别 3 20 15 300

谁能告诉如何实现这一目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T03:21:59.183

*   首先，作为“OK”操作的一部分，通过`new MasterTranx()`和创建新实体`new Tranx()`，通过 持久化它们`entityManager.persist()`。你已经在这样做了。
*   接下来，如果您不想执行“更新”：您绝不能再次创建新实体。不要这样做：`new MasterTranx()`或`new Tranx()`。
*   相反，要么从“OK”重用应用程序内存中的相同实体实例。或者使用 entityManager.find() 或 entityManager.createQuery() 从数据库中再次检索相同的实体。
*   如果实体分离（例如，通过 em.detach(ent) 或 em.clear() 或事务范围实体管理器的事务结束或通过网络传递序列化对象），则可以。
*   您的用户界面代码应在检索到的（和可能分离的）实体中设置数据
*   然后打电话

    MasterTranx masterTranx2 = em.merge(masterTranx);

    > ```
    >  // masterTranx could be detached
    >        // masterTranx2 is not detached - it is guaranteed to be managed. 
    > ```
    > 
    > 和

    tranx tranx2 = em.merge(tranx);

    *   确保您启动实体管理器（或 EJB）事务并提交，以便更新的数据将自动刷新到数据库

完毕。= :-)

# web-applications - 为什么淘汰赛第一次只绑定我的桌子？

> ID：12882274
> 
> 赞同：0
> 
> 时间：2012-10-14T12:37:54.543
> 
> 标签：web-applications, knockout.js, knockout-2.0

我有以下代码使用敲除将 HTML 表绑定到 Person 对象列表：

```
function PersonModel(person) {
    var self = this;
    self.id = person.Id;
    self.firstName = person.FirstName;
    self.surname = person.Surname;
    self.email = person.Email;
    self.cell = person.Cell;
}

function PersonListModel(personList) {
    var self = this;
    self.persons = ko.observableArray(personList);
}

function getPersonList() {
    $.getJSON("Person/IndexJson", function (allData) {
        var mappedPersons = $.map(allData, function (item) { return new PersonModel(item); });
        ko.applyBindings(new PersonListModel(mappedPersons), $("#person-list")[0]);
    });
}

$(function () {
    $("#refresh").click(function() {
        getPersonList();
    });
    getPersonList();            
}); 
```

被绑定的 HTML 如下所示：

```
<table>
    <tbody id="person-list" data-bind="foreach: persons">
        <tr data-bind="attr: { 'data-id': id }, click: $parent.personClicked">
            <td data-bind="text: firstName"></td>
            <td data-bind="text: surname"></td>
            <td data-bind="text: email"></td>
            <td data-bind="text: cell"></td>
        </tr>
    </tbody>
</table>
<a id="refresh" href="#"></a> 
```

我的问题是该表格仅在页面第一次加载时才正确填充。在通过单击刷新链接触发的所有后续 ajax 调用中，该表为空。在所有情况下都会返回相同的 ajax 结果，所以我怀疑我可能错过了一些“释放”初始绑定以为后续绑定或其他东西让路的淘汰赛调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:42:35.143

您不需要在 ajax 例程中进行新建模。下面应该可以解决您的问题

```
var perList = ko.observableArray({});

function getPersonList() {
    $.getJSON("Person/IndexJson", function(allData) {
        var mappedPersons = $.map(allData, function(item) {
            return new PersonModel(item);
        });
        perList(PersonListModel(mappedPersons));
    });
}
ko.applyBindings(perList, $("#person-list")[0]); 
```

# asp.net - 如何将函数生成的 HTML 控件作为包含 HTML 标记的文本字符串返回

> ID：12882275
> 
> 赞同：0
> 
> 时间：2012-10-14T12:38:09.997
> 
> 标签：asp.net, vb.net, webmethod, html-generation, htmlgenericcontrol

我正在尝试从 VB.NET Web 方法生成一些 HTML 代码并将其作为文本返回。

这是一个示例标记：

```
<ul>
    <li>234: this is an item</li>
    <li>456: another item</li>
</ul> 
```

因此我有一些VB：

```
Dim rList As New HtmlGenericControl("UL") ' << create an HTML list container

    Try ' looping through a dictionary of item data
         For j = 0 To UBound(d("itemNo")) ' loiop through all individual item data
             Dim Item = d("itemNo")(j)
             Dim itemName =  d("itemName")(j)
             Dim liItem As New HtmlGenericControl("li") ' << creates an HTML list item
             liItem.InnerHtml += itemNo & ":" & itemName 
             rList.InnerHtml += liItem 
         Next
     Catch ex as Exception
         ' fail case
     End Try 
```

现在，这将完美地生成所有 HTML 标记和内容。如果我把它写到一个页面上，我可以很简单地做到这一点。

但是...我不想这样做，我想以某种方式将上述代码创建的实际 HTML 标记作为文本字符串返回，即，我想`return rList.toString()`返回标记，但它只是将对象类型返回为一个字符串。

我可以做到这一点，根本不用担心`HtmlGenericControl`类，只需生成带有打开和关闭 HTML 标记的整个字符串负载，但是这段代码的其余部分非常复杂，并且有很大的错误空间......如果我能实现我在上面寻找的东西编码起来会简单得多！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:56:57.527

为此，代码应如下所示

```
Dim rList As New HtmlGenericControl("UL") 

Try 
     // Existing stuff
    Dim stringwriter As New System.IO.StringWriter()
    Dim writer As New HtmlTextWriter(stringwriter)
    rList.RenderControl(writer)
    Return stringwriter.ToString()

 Catch ex as Exception
     ' fail case
 End Try 
```

祝你好运 ！！

# spring-batch - 文档中列出的 Spring Batch “用例”示例

> ID：12882278
> 
> 赞同：0
> 
> 时间：2012-10-14T12:38:27.690
> 
> 标签：spring-batch

[我们是否有文档](http://static.springsource.org/spring-batch/cases/index.html)中列出的 Spring Batch“用例”的示例实现（源代码）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T08:10:23.873

您可以在中找到很多示例作业、步骤等

[http://static.springsource.org/spring-batch/spring-batch-samples/index.html](http://static.springsource.org/spring-batch/spring-batch-samples/index.html)

是那种你一直在寻找的源代码吗？

# python - 如何声明在 DLL 或共享库中定义的类型的变量？

> ID：12882281
> 
> 赞同：0
> 
> 时间：2012-10-14T12:38:54.680
> 
> 标签：python, ctypes

我想定义一个在 DLL 中定义的结构或变量类型的实例，以将其发送到使用“ctypes”的函数。我知道我可以在 python/ctypes 中定义类似的变量/结构类型，然后发送它们，但是在我的代码中定义所有类型需要很多时间。有什么方法可以像 ctypes 中的 c_int 或 c_char_p 一样声明内部 DLL 类型的变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:20:50.700

您使用哪个 DLL？

对于 winapi.dll，ctypes 还提供了一些有用的结构，如 HWND、RECT、MSG、... 有关更多信息，请参见[ctypes.wintypes](http://epydoc.sourceforge.net/stdlib/ctypes.wintypes-module.html)。

您还可以检查用于解析 C 文件的结构和数据类型的[ctypeslib 。](http://pypi.python.org/pypi/ctypeslib/)

根据我的经验，从 python 脚本/程序调用 dll 时，我几乎不会写下超过几个 C 结构，所以这不是问题。如果您必须使用大量的 DLL 内结构，则可能需要使用[SWIG](http://www.swig.org/)。

# r - 在百分位回归中计算百分位以上的值

> ID：12882283
> 
> 赞同：1
> 
> 时间：2012-10-14T12:39:04.070
> 
> 标签：r, regression

我试图弄清楚如何在百分位回归中计算某个百分位以上的值。我使用参考值来创建使用包 lmqreg 的百分位回归，然后我将实验值绘制在顶部。例如。

* * *

```
#reference data

male.weight <- lmsqreg.fit(log(males$heart),
                           log(males$weight),
                           pvec = (centiles <- c(0.03, 0.1, 0.5, 0.9, 0.97)),
                           lam.fixed=1)

plot(log(males$weight),log(males$heart),
     axes=FALSE,
     frame.plot=TRUE,
     xlab="Weight (kg)",
     ylab="Heart weight (g)",
     main="Men", 
     col = "white",
     xlim = c(3.2,5.2),
     ylim = c(4.7, 7))

axis(1,at=log(xat <- c(3,5,7,9,11,13,15,17,19)*10),
     labels=xat)

axis(2,at=log(yat <- (1.5:10)*100),labels=yat)

lpars <- list(lty=rep(c(2,1,2),
                      c(2,1,2)),
              col=c("#444444","#999999","#000000")
              [c(1,2,3,2,1)])

for(l in 1:nrow(male.weight$qsys$outmat) ){
  lines(male.weight$qsys$targetx,
        male.weight$qsys$outmat[l,],
        lty=lpars$lty[l],col=lpars$col[l])

}

 #experimental data

points(log(m.heart$weight[m.heart$cod.g == "nCA"]),
       log(m.heart$heart.w[m.heart$cod.g == "nCA"]),
       pch = 21, col = "black")

points(log(m.heart$weight[m.heart$cod.g == "CA"]),
       log(m.heart$heart.w[m.heart$cod.g == "CA"]),
       pch = "♥", col = "red") 
```

* * *

我想知道的是`m.heart$weight[m.heart$cod.g == "nCA"]`（实验数据）有多少百分比位于 0.9 和 0.97 百分位以上。其他地方可能已经回答了类似的问题，但由于我不熟悉该区域的命名法，我不确定我应该搜索什么。

提前致谢，

萝拉

# ruby-on-rails - load_resource 获取零资源

> ID：12882284
> 
> 赞同：1
> 
> 时间：2012-10-14T12:39:12.683
> 
> 标签：ruby-on-rails, authorization, cancan

在我的控制器中，我有：

```
class UsersController < ApplicationController

  load_and_authorize_resource

  def create

    respond_to do |format|
      if @user.save
        format.html { redirect_to @user, notice: 'User was successfully created.' }
        format.json { render json: @user, status: :created, location: @user }
      else
        format.html { render action: "new" }
        format.json { render json: @user.errors, status: :unprocessable_entity }
      end
    end
  end
end 
```

但我明白了`undefined method 'save' for nil:NilClass`

```
Failures:

1) UsersController if the user passes all the authorizations POST #create should create a new User with some parameters
 Failure/Error: post :create, :user => { :email => 'puppa@puppa.pup' }
 NoMethodError:
   undefined method `save' for nil:NilClass
 # ./app/controllers/users_controller.rb:47:in `block in create'
 # ./app/controllers/users_controller.rb:46:in `create'
 # ./spec/controllers/users_controller_spec.rb:66:in `block (4 levels) in <top (required)>'

Finished in 0.10714 seconds
1 example, 1 failure 
```

我期待`load_resources`填充`@user = User.new(params[:user])`

我在整个流程之后查看 CanCan 内部结构，我发现`controller_resource.rb`当我们到达时，`#build_resource`我们有：

```
def build_resource
  resource = resource_base.new(resource_params || {})
  assign_attributes(resource)
end 
```

但是`resource`这里`nil`……这很正常吗？我错过了什么？这与我的创建操作问题有关吗？

编辑

这是我的`ability.rb`

```
class Ability
  include CanCan::Ability

  def initialize(user)
    # Define abilities for the passed in user here. For example:

    # check if the user is registered or a guest user (not logged in)
    if user.present?

      if user.any_role? :super_admin
        can :manage, :all
      end

      if user.any_role? :admin
        can :manage, [User, Institution, Project, Order]
      end

      if user.any_role? :user
        can :show, Project
        can [:add, :change], :cart
        can [:create, :show], Order, :user_id => user.id
        can :download, UrlConnector
      end

    end
  end
end 
```

编辑 2

在调用 POST create 时，我有：

在 RSpec 环境中：

```
resource_base: User
resource_class: User
@params: {"user"=>{"email"=>"puppa@puppa.pup"}, "controller"=>"users", "action"=>"create"} 
```

在浏览器中作为`superadmin`or `admin`，它是相同的：

```
resource_base: User
resource_class: User
@params: {"utf8"=>"✓", "authenticity_token"=>"95qQ4H/+CLU96jCIO6U/YtgIQ5zWxE7pg0BedVMPSGk=", "user"=>{"email"=>"estanost@alumnes.ub.edu", "password"=>"264763", "password_confirmation"=>"264763", "ragionesociale"=>"fff", "partitaiva"=>"12345678901", "address"=>"via plutarco, 36", "city"=>"Manduria", "cap"=>"74024", "phone"=>"099979456", "role_ids"=>["3"]}, "commit"=>"Create User", "action"=>"create", "controller"=>"users"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T02:55:13.350

尝试将 cancan 作为 Gemfile 中的最后一个 gem

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-20T15:31:22.320

我认为您应该摆脱该`if user.present?`块，添加`user ||= User.new`该`if`块开始的位置。这样，您将始终拥有一个用户对象。当然，它不会通过你的任何康康舞，所以其余的应该优雅地通过。

# ios - cocos2d 中的 iAD 横幅视图

> ID：12882285
> 
> 赞同：0
> 
> 时间：2012-10-14T12:39:19.337
> 
> 标签：ios, cocos2d-iphone, iad

我正在 cocos2d 游戏的 appdelegate.mm 文件中实现 ADbanner 视图。广告显示完美，但我想知道在哪里可以实现 iAd 横幅视图代表。我已将它们添加到 appdelegate.mm 文件中，但它们没有被调用。

这是显示广告的代码（它们已成功显示）

```
iAdView = [[ADBannerView alloc] initWithFrame:CGRectZero];
    iAdView.currentContentSizeIdentifier = ADBannerContentSizeIdentifierLandscape;
    [[[CCDirector sharedDirector]view]addSubview:iAdView]; 
```

我现在需要实现这个

```
- (void)bannerView:(ADBannerView *)banner didFailToReceiveAdWithError:(NSError *)error
- (void)bannerViewDidLoadAd:(ADBannerView *)banner 
```

我没有使用 UIViewController，因为我使用的是 cocos2d（它有场景）

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:54:34.400

您必须将 ADBannerView 的委托设置为您的 appDelegate：

```
iAdView.delegate = self; 
```

希望这可以帮助。

# windows - Apache 2.4 和 Windows Server 2008 r2 的 mod_pagespeed

> ID：12882287
> 
> 赞同：3
> 
> 时间：2012-10-14T12:39:30.703
> 
> 标签：windows, apache, mod-pagespeed

[mod_pagespeed](https://developers.google.com/speed/pagespeed/mod)现在很稳定，但没有适用于 Windows 的版本。有人成功编译了 Windows 的模块吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-05T19:26:46.270

mod_pagespeed 目前不适用于 Windows。但是国际空间站有一个 PageSpeed 端口，称为 IISpeed：[http](http://www.iispeed.com/) ://www.iispeed.com/ 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T12:22:16.570

我们目前在开发机器上将 mod_pagespeed 模块编译并加载到 Windows 上的 Apache 中。但是 - 我们首先需要修复一些问题，然后才能按预期使用并向公众发布。

一旦我们让它正常工作，我们将提供免费下载。请密切关注[http://www.iispeed.com/](http://www.iispeed.com/) - 我们将在几周后在那里公布。

# database - Wordpress 发布时间过长直到超时

> ID：12882288
> 
> 赞同：0
> 
> 时间：2012-10-14T12:39:40.897
> 
> 标签：database, wordpress

我有一个 wordpress 博客，里面有大约 33000 个帖子，数据库大约 2.2gb。博客的速度非常快，除非我尝试发布或更新任何帖子。它会运行几分钟直到超时，但该进程继续在后台以 100% cpu 运行。我想知道是否有任何解决方法？我确信有 wp 可以处理更多的帖子和更大的数据库而不会出现这样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T04:29:53.953

删除您的帖子/页面修订。WordPress 在保存时将每个帖子的完整副本保存为修订文件。这将大大减少您的数据库的大小——我已将数据库减少到其原始大小的 10%——随后会提高性能。请参阅[http://wordpress.org/extend/plugins/better-delete-revision/](http://wordpress.org/extend/plugins/better-delete-revision/)

或者在 phpmyadmin 中运行这个查询：

```
DELETE a,b,c
FROM wp_posts a
LEFT JOIN wp_term_relationships b ON (a.ID = b.object_id)
LEFT JOIN wp_postmeta c ON (a.ID = c.post_id)
WHERE a.post_type = 'revision' 
```

添加`define ('WP_POST_REVISIONS', 0);`到 wp-config.php 文件以防止保存将来的修订。

如果您有自己的服务器，请考虑使用 mysqltuner.pl 来分析 MySQL 数据库服务器和负载，并能够调整您的 my.cnf 文件以获得更好的性能。见[https://github.com/rackerhacker/MySQLTuner-perl](https://github.com/rackerhacker/MySQLTuner-perl)

*还要在数据库中查找其他大的非 WP 表。*一些网络统计插件将日志写入数据库，这些表可能会变得很大。即使不使用，如此大的表也会影响性能。停用/删除插件以清除表格，或手动清除表格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-15T04:08:17.933

我在我管理的网站上的 wp_posts 表中有 ~14100 个帖子。数据库约为 102MB。使用它作为参考，您的数据库应该是 240MB 左右。为什么你的数据库这么大？

如果在您发布问题时出现问题，很可能是您有一个插件正在尝试做大量工作（可能是您的数据库如此之大的原因），或者可能是试图联系第三方站点，并且正在超时。检查你的插件。如果问题出在哪里不明显，请一一禁用它们。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-16T21:01:59.653

用这个。问题解决了。

[http://wordpress.org/extend/plugins/wp-super-cache/](http://wordpress.org/extend/plugins/wp-super-cache/)

在每月拥有超过 50 万唯一用户的服务器上进行测试。

# java - 单击任何按钮时，Android 上的应用程序在虚拟设备上崩溃

> ID：12882294
> 
> 赞同：0
> 
> 时间：2012-10-14T12:39:58.347
> 
> 标签：java, android

尝试在 android 上编写我的第一个应用程序。但是当单击任何按钮时，应用程序在虚拟设备上崩溃（FC）。请看一下.. MainActivity.java：

```
public class MainActivity extends Activity {
public EditText t1 = null, t2 = null;
Button b1 = null, b2 = null;
TextView tv1 = null,tv2 = null;
int a = 0, b = 0, S1 = 0, S2 = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    t1=(EditText)findViewById(R.id.editText1);
    t2=(EditText)findViewById(R.id.EditText2);
    b1=(Button)findViewById(R.id.button1);
    b2=(Button)findViewById(R.id.button2);
    tv1=(TextView)findViewById(R.id.TextView1);
    tv2=(TextView)findViewById(R.id.TextView2);

}
public void onClick1() 
{
    tv1.clearComposingText();
  a=Integer.parseInt(t1.getText().toString());
   tv1.setText(S1+=a);
   }

public void onClick2() 
{
    tv2.clearComposingText();
  b=Integer.parseInt(t2.getText().toString());
   tv2.setText(S2+=b);
   }

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

活动主.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Button
    android:id="@+id/button1"
    android:layout_width="80dp"
    android:layout_height="60dp"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="30dp"
    android:layout_marginTop="30dp"
    android:text="Add"
    android:onClick="onClick1" />

<Button
    android:id="@+id/button2"
    android:layout_width="80dp"
    android:layout_height="60dp"
    android:layout_alignBaseline="@+id/button1"
    android:layout_alignBottom="@+id/button1"
    android:layout_marginLeft="26dp"
    android:layout_toRightOf="@+id/button1"
    android:text="Add"
    android:onClick="onClick2" />

<EditText
    android:id="@+id/editText1"
    android:layout_width="80dp"
    android:layout_height="60dp"
    android:layout_alignLeft="@+id/button1"
    android:layout_below="@+id/button1"
    android:layout_marginTop="24dp"
    android:ems="10" >

    <requestFocus />
</EditText>

<EditText
    android:id="@+id/EditText2"
    android:layout_width="80dp"
    android:layout_height="60dp"
    android:layout_alignBaseline="@+id/editText1"
    android:layout_alignBottom="@+id/editText1"
    android:layout_alignLeft="@+id/button2"
    android:ems="10" />

<TextView
    android:id="@+id/TextView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignRight="@+id/editText1"
    android:layout_centerVertical="true"
    android:text="" />

<TextView
    android:id="@+id/TextView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@+id/TextView1"
    android:layout_alignLeft="@+id/EditText2"
    android:text="" /> 
```

和 logcat 日志文件：

```
10-14 17:36:35.714: E/AndroidRuntime(697): FATAL EXCEPTION: main
10-14 17:36:35.714: E/AndroidRuntime(697): java.lang.IllegalStateException: Could not find a method onClick1(View) in the activity class com.example.blot.MainActivity for onClick handler on view class android.widget.Button with id 'button1'
10-14 17:36:35.714: E/AndroidRuntime(697):  at android.view.View$1.onClick(View.java:2131)
10-14 17:36:35.714: E/AndroidRuntime(697):  at android.view.View.performClick(View.java:2485)
10-14 17:36:35.714: E/AndroidRuntime(697):  at android.view.View$PerformClick.run(View.java:9080)
10-14 17:36:35.714: E/AndroidRuntime(697):  at android.os.Handler.handleCallback(Handler.java:587)
10-14 17:36:35.714: E/AndroidRuntime(697):  at android.os.Handler.dispatchMessage(Handler.java:92)
10-14 17:36:35.714: E/AndroidRuntime(697):  at android.os.Looper.loop(Looper.java:123)
10-14 17:36:35.714: E/AndroidRuntime(697):  at android.app.ActivityThread.main(ActivityThread.java:3683)
10-14 17:36:35.714: E/AndroidRuntime(697):  at java.lang.reflect.Method.invokeNative(Native Method)
10-14 17:36:35.714: E/AndroidRuntime(697):  at java.lang.reflect.Method.invoke(Method.java:507)
10-14 17:36:35.714: E/AndroidRuntime(697):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
10-14 17:36:35.714: E/AndroidRuntime(697):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
10-14 17:36:35.714: E/AndroidRuntime(697):  at dalvik.system.NativeStart.main(Native Method)
10-14 17:36:35.714: E/AndroidRuntime(697): Caused by: java.lang.NoSuchMethodException: onClick1
10-14 17:36:35.714: E/AndroidRuntime(697):  at java.lang.ClassCache.findMethodByName(ClassCache.java:247)
10-14 17:36:35.714: E/AndroidRuntime(697):  at java.lang.Class.getMethod(Class.java:962)
10-14 17:36:35.714: E/AndroidRuntime(697):  at android.view.View$1.onClick(View.java:2124)
10-14 17:36:35.714: E/AndroidRuntime(697):  ... 11 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:41:31.833

当有人点击您的按钮时，您的应用似乎不知道该怎么做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:43:03.347

就像错误告诉您它需要方法中的参数“View”一样。

更改您的 onclick 方法以接受 View 参数。您必须对所有其他按钮 onclick 方法执行相同操作。

```
public void onClick1(View v) {
    // Code
| 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:44:16.373

您忘记在 onClick1() 中传递 View：

```
public void onClick1(View v){
    //your code here
}

public void onClick2(View v){
    //your code here
} 
```

进一步阅读：[在android中定义按钮事件的最佳实践](https://stackoverflow.com/questions/6372104/best-practice-for-defining-button-events-in-android)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T12:44:33.010

OnClick 方法必须接受`View`参数

```
public void OnClick1(View view) {
     ...
 } 
```

OnClick2 也一样

顺便说一句，这是建议，但您应该仔细阅读错误消息：

> java.lang.IllegalStateException: 找不到方法 onClick1(View)

请注意，它暗示它需要 View 参数。

我注意到的其他事情：

您应该使用`@+id`语法为资源声明一个新的 id。完成此操作后，您应该使用`@id`来引用资源。换句话说，你只需要有`"@+id/button1"`一次（在`Button1`声明中），然后使用`"@id/button1"`它来引用它。当然，所有其他 id 也同样重要（EditText 等等......）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T13:26:03.943

xml 文件不喜欢使用大写字母作为方法名称。将方法名称更改为“onclick1”而不是“onClick1”，它应该可以工作。至少在将您的项目复制粘贴到我自己的 IDE 后它对我有用...

还添加此处其他答案中提到的 View 参数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-14T14:12:01.600

您应该以编程方式添加侦听器

b1.setonClickListener(this);

然后在你的活动中。实现onclickListener接口。

在您的覆盖方法 onclick 中。使用 switch 语句来确定正在访问它的视图。

或者您可以创建一个新的 onclicklistener。

b1.setonClickListener（新的 onclicklistner....）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-14T15:59:53.140

简单地试试这个......

**-**首先**删除**和`onClick1()`方法`onClick2()`。

**-**用于`Anonymous Inner class`注册**和实现**`onClick()`接口的方法`OnClickListener`

```
b1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                          tv1.clearComposingText();
                          a=Integer.parseInt(t1.getText().toString());
                          tv1.setText(S1+=a);

            }
        });

b2.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {

                     tv2.clearComposingText();
                         b=Integer.parseInt(t2.getText().toString());
                         tv2.setText(S2+=b);

            }
        }); 
```

# orm - ORMLite 中主/外键关系的新表

> ID：12882296
> 
> 赞同：0
> 
> 时间：2012-10-14T12:40:31.440
> 
> 标签：orm, ormlite, android-sqlite

我的 android DB 用户名、密码、电子邮件、手机、

我有另一个名为 Service 的表，在我的 android DB 服务名称、服务类别、服务描述中有以下详细信息

现在，我想使用 ORMLite 将每个用户的关系（例如：用户名）与他/她的服务（服务名称）相关联。我想为这种关系维护一个单独的表。现在，我的问题是这样的

1.  如果我指定主键和外键关系，ORM 是否可以生成一个表，以便它可以为每个添加的服务填充数据？
2.  我是否必须创建一个 bean 来维护我的用户表和服务表之间的公共字段，并在添加新服务时手动执行插入任务？

-谢谢斯里坎特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T17:31:31.080

看起来你可能已经解决了你自己的问题，但我仍然会为后代回答。 [ORMLite](http://ormlite.com/)将这种关系称为“`User`外来`Service`对象”字段。Here's the [documentation for foreign objects](http://ormlite.com/docs/foreign-object)。听起来好像`User`与服务相关联，因此您的`User`班级将有一个`Service service;`字段。就像是：

```
public class User {
    ...
    @DatabaseField(canBeNull = false, foreign = true)
    private Service service;
} 
```

现在你的问题：

> 如果我指定主键和外键关系，ORM 是否可以生成一个表，以便它可以为每个添加的服务填充数据？

ORMLite 不*处理*外键限制，尽管您可以自己调整模式以添加它。如果您设置了外键，那么它将使用表`Service`中的主键`User`。

> 我是否必须创建一个 bean 来维护我的用户表和服务表之间的公共字段，并在添加新服务时手动执行插入任务？

不确定我是否理解这个问题。您需要做的就是使用 . 创建您`Service`的`serviceDao`服务器，然后`User`在使用`userDao`.

# android - 不幸的是，该程序已在 android 中停止

> ID：12882298
> 
> 赞同：0
> 
> 时间：2012-10-14T12:40:51.550
> 
> 标签：android, runtime-error

我已经查看了所有问题。我编写了代码并且没有错误，但我仍然收到相同的消息。我能做些什么只是告诉我一个我自己解决它的方法

```
public class RunningSum extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_running_sum);
    Button sum = (Button) findViewById(R.id.button1);
    Button cancel = (Button) findViewById(R.id.button2);
    EditText from = (EditText) findViewById(R.id.editText1);
    EditText upto = (EditText) findViewById(R.id.editText2);
    final EditText rsum = (EditText) findViewById(R.id.editText3);
    final int from1 = Integer.valueOf(from.getText().toString());
    final int upto1 = Integer.valueOf(upto.getText().toString());
    final int rsum1 = Integer.valueOf(rsum.getText().toString());
    cancel.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub

        }
    });

    sum.setOnClickListener(new View.OnClickListener() {

        public  void onClick(View v) {
            // TODO Auto-generated method stub
            for(int x=from1; from1<=upto1; x++){
                int summ = 0;
                summ += from1;
                rsum.setText(summ);
            }

            }

    });

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_running_sum, menu);
    return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:51:07.960

您的循环可能是一个无限循环。你的情况`from1<=upto1`永远不会改变。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-14T12:57:28.640

大概`rsum.setText(summ);`是罪魁祸首吧。[setText(int)](http://developer.android.com/reference/android/widget/TextView.html#setText%28int%29)需要一个资源 ID，而不是任意整数。如果要显示总和，则必须将其转换为`CharSequence`第一个并设置它。

您还可以将您的 for 循环重写为`summ = from1 * (upto1 - from1 + 1);`，这应该便宜很多，`EditText`然后再设置。

# c++ - 连接来自一个客户端的两个套接字

> ID：12882299
> 
> 赞同：1
> 
> 时间：2012-10-14T12:41:00.560
> 
> 标签：c++, sockets

我是套接字的新手。我正在编写一个客户端服务器应用程序，我遇到了以下问题。

克伦特：

```
void * msgDispatcher(...){
   ...
   while(isRunning){
      read(rxSocket, buf, ...);
   }
}

int main(...){
   ...
   connect(txSocket, ...);
   connect(rxSocket, ...);

   createThread(..., msgDispatcher, ...);
   while(isRunning){
      fgets(buf, ...);
      write(txSocket, buf, ...);
  }
} 
```

服务器：

```
int main(...){
   ...
   listenerSocket = socket(...);
   bind(listenerSocket,...);

   listen(listenerSocket, 10);
   rxSocket = accept(listenerSocket, (sockaddr*) &clientAddr, &addrLength);

   listen(listenerSocket, 10);
   txSocket = accept(listenerSocket, (sockaddr*)  &clientAddr, &addrLength);

   while(isRunning){
      read(rxSocket, ...);
      write(txSocket, ...);
   }
} 
```

我从客户端发送的所有消息都在服务器上接收，但客户端没有收到来自服务器的所有响应。服务器使用*write(txSocket, ...);发送消息* 这里没有问题。但是客户端一直在等待*read(rxSocket, ...)*并且没有收到任何消息。

这段代码有什么不正确的？如何从服务器上的一个客户端连接/接受两个套接字，或者有没有最好的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T20:45:42.003

我今天挖了几个小时并返回问题中的代码。两个插座现在工作正常。客户端上的 RxSocket 接收来自服务器的所有消息，而 TxSocket 将消息发送到服务器。看起来这是代码中的错字。

PS listen() 函数只能调用一次，但调用两次不会影响任何事情。

# c - __func__ 标识符如何构成安全风险？

> ID：12882301
> 
> 赞同：5
> 
> 时间：2012-10-14T12:41:05.083
> 
> 标签：c, security, macros

我在评论中看到使用`__func__`是一种安全风险。我需要了解这是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T12:46:17.577

Using`__func__`揭示了二进制文件中的函数名称，这简化了可以访问二进制文件的攻击者的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:03:55.607

如果您的应用程序的安全性依赖于它的函数名称保持机密，那么使用 . 存在安全风险`__func__`，因为编译器需要将函数名称存储在编译后的二进制文件中的某个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:05:06.253

`__func__`是 C99 标准的预定义标识符，在函数内部使用时扩展为包含函数名称的字符数组变量。从 C99 6.4.2.2/1 开始描述：

> 标识符`__func__`由翻译器隐式声明，就好像紧跟在每个函数定义的左大括号之后，声明
> 
> static const char `__func__`[] = "函数名"; 出现，其中 function-name 是词法封闭函数的名称。该名称是函数的朴素名称。

请注意，它不是宏，在预处理过程中没有特殊含义。

查看此链接以获取有关以下位置的更多信息`__func__`：
[http ://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1642.html](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2004/n1642.html)

如果解决方案依赖于预定义的上下文相关常量所涉及的扩展 `__func__`，则无法安全地在函数中实现并提供同样的便利。

`__func__`在其调用点进行文本扩展，因此，它很容易通过评估 break、continue 或 return 语句或未能正确终止 if 语句来影响调用代码的控制流。调用它的效果可能令人惊讶并导致细微的缺陷。

更喜欢内联或静态函数，而不是类似函数的宏或`__func__`.

但是，在无法避免定义 a 的情况下`__func__`，定义应避免更改调用代码控制流的语句。理想情况下，它应该是单个表达式。

更多想法和示例代码：
[https ://www.securecoding.cert.org/confluence/display/seccode/PRE13-C.+Avoid+changeing+control+flow+in+macro+definitions](https://www.securecoding.cert.org/confluence/display/seccode/PRE13-C.+Avoid+changing+control+flow+in+macro+definitions)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T12:58:42.173

它使逆向工程更容易。因此，如果您想对应用程序的工作方式保密，那么它会使攻击者的生活更轻松。

这与 DRM 功能相关，或者如果您想让在竞争应用程序中模仿您的算法变得更加困难。

但这不会影响安全性，因为逆向显示漏洞的应用程序首先是不安全的。

# c# - 如何拒绝直接访问页面

> ID：12882306
> 
> 赞同：2
> 
> 时间：2012-10-14T12:41:36.330
> 
> 标签：c#, asp.net, session

如何在不使用 web.config 中的角色的情况下拒绝对 asp.net 中页面的直接访问（通过键入完整的 url）。我用过：

```
if (Session.IsNewSession)
            Response.Redirect("Default.aspx"); 
```

它的问题是在第一次一切正常并且重定向工作正常，但是如果我在同一个浏览器中打开一个新选项卡并再次输入 URL，它会失败。如何解决？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:44:06.483

尝试这个：

第 1 页

```
Context.Items.Add("somevar","someval"); 
```

第2页

```
if ( Context.Items["somevar"] == null )
{
    // the page is not redirected from Page 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:58:41.017

使用 session 可以解决这个问题。

构建一个 HttpModule 并在 context_BeginRequest 中获取当前 URL。稍后有条件地重定向到默认页面。

```
public class RedirectionModule : IHttpModule
{
    void context_BeginRequest(object sender, EventArgs e)
    {

        //this user already already eligible to go inside page ? 
        if (Session["eligible-to-go-inside"] == null)
        {
        //new user
        //check current request url is default.aspx
        //if not forward to  default page
        }

    }
} 
```

在 default.aspx 页面中，如果用户完全满足进入内页的要求（如登录），则设置

```
Session["eligible-to-go-inside"] = "yes"; 
```

# hadoop - 用于 Wikipedia pagecount 数据集的 Hadoop

> ID：12882312
> 
> 赞同：2
> 
> 时间：2012-10-14T12:42:11.260
> 
> 标签：hadoop, mapreduce, wikipedia, concept, wikimedia

我想构建一个 Hadoop-Job，它基本上将 wikipedia [pagecount-statistic](http://dumps.wikimedia.org/other/pagecounts-raw/)作为输入并创建一个类似的列表

```
en-Articlename: en:count de:count fr:count 
```

为此，我需要与每种语言相关的不同文章名称 - 即布鲁日（en，fr），Brügge（de），MediaWikiApi 查询 articlewise（http://en.wikipedia.org/w/api.php?action=query&titles =布鲁日&prop=langlinks&lllimit=500)。

我的问题是找到解决这个问题的正确方法。

我的草图方法是：

*   逐行处理pagecount文件（行示例'de Brugge 2 48824'）
*   查询 MediaApi 并写入。like'en-Articlename: process-language-key:count'
*   将所有 en-Articlename-values 聚合到一行（也许在第二份工作中？）

现在，为每一行查询 MediaAPI 似乎相当不方便，但目前我无法找到更好的解决方案。

您认为当前的方法是否可行，或者您能想出不同的方法吗？

*旁注：创建的作业链将用于对我的（小型）Hadoop-Cluster 进行一些时间测量，因此更改任务仍然可以*

编辑： [这](http://www.quora.com/How-can-I-optimise-web-service-calls-from-a-hadoop-system)是我刚刚发现的一个非常相似的讨论..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T11:47:55.243

我认为在批处理期间查询 MediaApi 不是一个好主意，因为：

*   网络延迟（您的处理速度将大大减慢）
*   单点故障（如果 api 或您的互联网连接出现故障，您的计算将被中止）
*   外部依赖（很难重复计算并得到相同的结果）
*   法律问题和禁令的可能性

您的问题的可能解决方案是下载整个[维基百科转储](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)。每篇文章都以预定义的格式包含指向该文章的其他语言的链接，因此您可以轻松编写一个 map/reduce 作业来收集该信息并在英文文章名称和其余部分之间建立对应关系。

然后，您可以在 map/reduce 作业处理 pagecount-statistic 中使用对应关系。如果您这样做，您将独立于 mediawiki 的 api，加快数据处理并改进调试。

# objective-c - 无法释放 componentsSeparetedByString 数组

> ID：12882313
> 
> 赞同：0
> 
> 时间：2012-10-14T12:42:11.397
> 
> 标签：objective-c, ios, automatic-ref-counting

我有一个在后台线程中运行的简单方法，它打开 txt 文件并将其拆分为行。之后我试图释放内存，但出现了问题。我正在使用ARC。这是代码：

```
@autoreleasepool {
   NSString* file = [NSString stringWithContentsOfFile:resourcePath encoding:NSWindowsCP1251StringEncoding error:&error];
   NSArray* test = [file componentsSeparatedByString:@"\n"];
   test = nil;
 } 
```

字符串释放正常，但数组仍在内存中。我错过了什么？

**UPD：**嗯...只是尝试复制数组几次，并且在方法数组结束后真正解除分配。但是如果我创建这个数组，就会出现内存泄漏。它可能在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:46:25.843

```
 // test = nil; 
```

关闭它，ARC 会正常工作。

# c - 一种在 C 中使用递归来反转字符串的方法对我来说很奇怪

> ID：12882314
> 
> 赞同：0
> 
> 时间：2012-10-14T12:42:21.397
> 
> 标签：c, recursion, character, printf, scanf

我在大学笔记中找到了以下代码来反转 C 中的字符串。我不明白这个例子中的递归是如何工作的，因为它对我来说似乎很神奇！更具体地说，如果我输入单词**“one”**，程序会打印出单词**“eno”**。根据解释，该函数递归地从用户那里读取字符，直到用户按下**Enter('\n')**，然后打印出反转的单词。但是，如果函数最后一次递归调用自身是当用户按下 Enter 并且之后程序无法再次进入函数以调用**printf**时，如何打印单词？它是否使用某种缓冲区以及它是如何工作的？这是C源代码：

```
#include <stdio.h>

void readCharsAndReverse(void);

int main (void)
{
    printf ("Give characters to reverse:");
    readCharsAndReverse();
    printf ("\n\n");
    system("PAUSE");
}

void readCharsAndReverse(void)
{
    char ch;
    scanf ("%c", &ch);
    if (ch != '\n')
       readCharsAndReverse();
    printf ("%c", ch);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T12:48:53.390

它起作用了，例如当您输入“one”并按 Enter 时：当您输入 o 时，`readCharsAndReverse()` 第一次调用该函数并将第一个 ch 值存储到 'o'，并且因为再次调用字符，`'o' != \n`所以函数现在看起来像：`readCharsAndReverse()``\n`

```
readCharsAndReverse(){
     ch = 'o';
       readreadCharsAndReverse(){
         ch = 'n';
             readreadCharsAndReverse(){
                 ch='e';
                  readreadCharsAndReverse(){
                      ch='\n'; 
```

所以因为它是 '\n' 字符，打印函数运行并将从 'e' 打印到 'o' -> 结果是保留字符串

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:58:33.750

一旦你输入`Enter`，你的方法`readCharsAndReverse`就开始返回，即，首先它会打印最后输入的字符，堆栈上的所有其他递归调用开始被弹出......因此通过以相反的顺序一个接一个地打印所有字符..

就像你把东西放在最下面的架子上，然后移到上面的架子上做同样的事情……当你遇到`Enter`你把你有的东西贴在墙上，然后回到下面的架子上，把你放在那里的东西贴在上面先前粘贴的内容旁边的墙，依此类推..

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:47:09.583

对，我*想*这就是你要找的答案。

你的程序有所谓的堆栈。每次调用函数时，都会在此堆栈（堆栈帧）上创建空间来保存有关函数的信息。这通常是正在修改的任何寄存器（不用担心）、返回地址，或者更确切地说，是调用它的函数，以及函数使用的任何变量。

每次调用 时`readCharsAndReverse`，都会在堆栈上放置一个新帧。这包含局部变量`ch`。退出时`readCharsAndReverse`，当前堆栈帧被删除（弹出），计算机从`readCharsAndReverse`被调用的位置开始执行（在您的示例中，通常`readCharsAndReverse()`在行上）。发生这种情况时， 的值将`ch`保持与您再次调用之前完全相同`readCharsAndReverse`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T12:47:42.880

基本上，该函数将一个字符读入其局部变量`ch`，调用自身并打印`ch`。

这意味着类似的东西；

*   首次调用的 readCharsAndReverse 读`o`入`ch`并调用自身。

*   第二次调用的 readCharsAndReverse 读`n`入`ch`并调用自身。

*   第三次调用的 readCharsAndReverse 读`e`入`ch`并调用自身。

*   第四次调用的 readCharsAndReverse 读取`\n`并**返回到第三次调用的 readCharsAndReverse。**

*   第三次调用的 readCharsAndReverse 打印其`ch`，`e`并**返回到第二次调用的 readCharsAndReverse 。**

*   第二次调用的 readCharsAndReverse 打印它的`ch`，`n`并**返回到第一次调用的 readCharsAndReverse 。**

*   readCharsAndReverse 调用第一次打印它`ch`，`o`我们就完成了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T12:46:32.410

readCharsAndReverse 在遇到 "\n" 之前不会停止，因此在 "one" 的情况下：扫描 "o"。它不是一个字符，所以它继续到下一个，即“n”，在“e”之后我们得到“\n”。现在我们进入下一行（因为我们来到了我们的基本情况，所以下一行告诉我们打印堆栈中的内容（即“eno”。首先是“e”，其次是“n”，最后是“o”）。

我建议在任何时候编写堆栈时进行更多评分，并查看更多示例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-04T15:05:55.367

通常递归使用堆栈工作。当一个函数被调用时，它会被压入堆栈并重复此过程，直到达到基本条件。最后，当您达到基本条件时，每个功能都会弹出。然后`printf`语句被执行。

# python - 为什么总是将 self 作为第一个参数添加到类方法？

> ID：12882317
> 
> 赞同：27
> 
> 时间：2012-10-14T12:42:35.597
> 
> 标签：python, class, methods, class-method

> **可能重复：**
> [为什么需要在 Python 方法中显式添加“self”参数？](https://stackoverflow.com/questions/68282/why-do-you-need-explicitly-have-the-self-argument-into-a-python-method)

我理解为什么 self*总是*类方法的第一个参数，这是完全有道理的，但如果总是这样，那么为什么要为每个方法定义都输入 if 的麻烦呢？为什么不让它在幕后自动完成呢？

是为了清楚起见，还是在某些情况下您可能不想将 self 作为第一个参数传递？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-14T12:44:07.763

因为显式优于隐式。通过使参数成为显式要求，您可以简化代码理解、内省和操作。它在[Python FAQ](http://docs.python.org/faq/design.html#why-must-self-be-used-explicitly-in-method-definitions-and-calls)中进一步扩展。

此外，您可以定义类方法（将类而不是实例作为第一个参数），您可以定义静态方法（根本不采用“第一个”参数）：

```
class Foo(object):
    def aninstancemethod(self):
        pass

    @classmethod
    def aclassmethod(cls):
        pass

    @staticmethod
    def astaticmethod():
        pass 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-14T12:46:23.770

[Guido在这里](http://neopythonic.blogspot.de/2008/10/why-explicit-self-has-to-stay.html)解释了这一点。基本上，方法就是函数，函数不应该接受任何“隐藏”的参数，否则像装饰器这样的高阶设施将无法以合理的方式处理它们。

# c# - c#中的嵌套泛型方法

> ID：12882331
> 
> 赞同：-3
> 
> 时间：2012-10-14T12:44:16.270
> 
> 标签：c#, generics, methods

我怎样才能在 C# 中做到这一点？

```
public bool IsValid<Validator<T>>(T model)
{
  //...
} 
```

我想使用：

```
IsValid<Validator.City>(city); 
```

代替

```
IsValid<CityViewModel,Validator.City>(city); 
```

我的功能是：

```
public static bool IsValid<TModel, TValidator>(TModel Item) where TValidator : AbstractValidator<TModel>, new()
    {
        var validate = new TValidator();
      //...
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:52:31.137

`where T : SomeType`您可以在方法的签名中使用来约束泛型类型参数。

附带说明：我更喜欢使用有助于理解预期类型的​​类型参数名称（此处为：`TValidator`和`TModel`）。这使得代码比仅使用`T`.

```
public bool IsValid<TValidator>(TModel model) 
    where TValidator : Validator<TModel> 
{
   //return true;     
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:50:37.537

如果要强制执行泛型类型应从`Validator`类继承的约束，则可以使用以下语法。

```
public bool IsValid<T>(T model) where T : Validator<T>
{
    //return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:51:44.943

在 C# 中，您可以使用如下约束来执行此操作：

```
public bool IsValid<T>(T model) where T : Validator<T> 
{
   //return true;     
} 
```

阅读有关约束[的更多信息：类型参数的约束（C# 编程指南）](http://msdn.microsoft.com/en-us/library/d5x73970.aspx)。

# javascript - 鼠标事件页面X页面Y元素校准

> ID：12882337
> 
> 赞同：0
> 
> 时间：2012-10-14T12:44:30.607
> 
> 标签：javascript, events, google-chrome, alignment

我的代码：

```
var x = window.event.pageX + document.body.scrollLeft;
var y = window.event.pageY + document.body.scrollTop ;
$(document.body).append("<div id='loadeditlang'></div>");
$("#loadeditlang").css({position:'absolute',  top:y, left:x}); 
```

在 Opera 中一切正常，但 Chrome 有问题：当我滚动顶部对齐时，Y 像素太多......

# java - Java 整数默认为 int

> ID：12882340
> 
> 赞同：0
> 
> 时间：2012-10-14T12:44:44.687
> 
> 标签：java, compiler-errors

我正在调用各种方法，并且参数整数值都默认为 int，即使是 1 或 0 等值，除了类型转换之外，我应该做些什么来解决这个问题？这是代码示例

```
public class Launch {
    public static void main(String[] args) {
        CoordinateHandler handler = new Handler();
        short x = 3901;
        short y = 5921;
        byte h = 2;
        handler.toCoordinates(x, y, h, "modern");
    }
}
public class CoordinateHandler extends CoordinateMain {
    public void toCoordinates(short absX, short absY, byte height, String type) {
        if (type.equals("modern")) {
            super.toCoordinates(absX, absY, height);
        } else {
            coordinateUpdateEvent(absX, absY, height, type);
        }
    }
} 
```

我会收到一个编译错误，说在短 x、短 y 和字节 h 的行上可能会丢失精度，我还会收到一个编译错误，说 toCoordinates(int, int, int, String) 不能应用于 toCoordinates （短，短，字节，字符串）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:48:50.347

我*相信*JVM 在内部无论如何都使用整数作为短裤，所以你不妨使用它们而不是短裤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:53:09.727

你在写`CoordinateHandler handler = new Handler();` 你确定 Handler() 有相同的方法签名吗？我认为应该是`CoordinateHandler handler = new CoordinateHandler();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T12:55:44.960

这些行是不正确的

```
short x = 3901;
short y = 5921;
byte h = 2; 
```

导致任何编译器错误；随后的方法调用也是如此。这是完全合法且正确的 Java。您可能没有为您显示导致这些问题的文字代码，例如从变量或参数而不是从文字值分配，它会自动转换为 LHS 的类型。

如果您确实是从`int`参数分配，那么编译器是非常正确的：您的分配确实可能导致溢出。

# c# - CIL 数据类型及其在 C# 中的等价物

> ID：12882341
> 
> 赞同：2
> 
> 时间：2012-10-14T12:45:28.917
> 
> 标签：c#, .net, cil

CIL 有一些指令，例如`ldc.r8 <float64 (num)>, ldc.r4 <float32 (num)>, ldc.i8 <int64 (num)>, ldc.i4.s <int8 (num)>`将常量加载到堆栈中。

那么，`int32, int64, float32, float64`C# 中这些数据类型 ( ) 的等价物是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T12:47:13.873

```
C# type     CIL type    .NET Framework type
============================================
short       int16       System.Int16
int         int32       System.Int32
long        int64       System.Int64

float       float32     System.Single
double      float64     System.Double 
```

另请参阅[数据类型摘要](http://msdn.microsoft.com/en-us/library/ya5y69ds.aspx)。

# assembly - 覆盖默认 INT 9h

> ID：12882342
> 
> 赞同：0
> 
> 时间：2012-10-14T12:46:13.473
> 
> 标签：assembly, x86-16, keyboard-hook

我试图在按下一个键时覆盖默认中断。这是我的代码：我不明白为什么它不起作用，它适用于其他 INT 数字（例如 43h）

```
mov al,9h
mov ah,25h
mov bx,seg int9h
mov ds,bx
mov dx,offset int9h
int 21h 
```

（其中 int9h 是我的代码中的标签）有谁知道按下键时如何挂断中断？谢谢 ！

编辑：

```
mov     ax,2509h
mov     dx,offset int9h
int     21h            

int9h PROC
    ;do some stuff
    IRET 
int9h ENDP 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T05:33:48.373

我将尝试再次回答这个问题 - 以一种有点冗长的方式。

在 Windows 流行之前，DOS 统治着计算机。为了扩展其功能，人们曾经编写过 TSR（terminate and stay resident）程序；这些程序将挂钩各种中断功能（例如时钟和键盘），终止然后驻留在内存中。结果，当给定中断发生时，这些实用程序的驻留代码将处理中断，可能会调用原始中断处理程序。

此类程序将具有由两部分组成的结构：临时部分和常驻部分。瞬态部分是从命令行调用程序时运行的代码；这将检查驻留部分是否已经安装。*如果已经*安装了常驻部分，程序将直接退出，但如果这是第一次调用，程序将首先保存当前中断处理程序的地址，然后安装自己的代码作为新的中断处理程序，然后进行特殊处理将处理程序代码留在内存中的 DOS 调用。

您显示的代码是临时程序的一部分，其中新的中断处理程序安装到中断表中。这段代码应该只运行一次，并且肯定**不是**新中断处理程序本身的一部分。

当 Windows 的使用变得广泛时，TSR 程序就过时了。从某种意义上说，在 Windows 下运行的每个程序都是 TSR 程序，而键盘中断处理程序代码现在变成了在“OnKeyPress”函数中处理的键盘事件（例如在 Delphi 中）。

以下代码更改中断表

```
mov ax, 2509h
mov dx, offset kb_handler
int 21h 
```

从地址 *kb_handler* 开始的代码是实际的中断处理程序。

您正在做的是重复设置中断处理程序的地址，而不是处理中断。安装程序本身时，您的上述代码应该只运行一次；中断处理程序代码将被多次调用。

我希望这能让事情变得更清楚。

你没有写的是*你为什么要这样做*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T15:07:54.923

我从我的档案中挖出了以下代码（日期为 1995 年 6 月 24 日）；这是我编写的一个程序的键盘处理程序，如果同时按下两个 shift 键，它就会使屏幕空白。

```
kb_int      proc    far
            pushf                           ;Save FLAGS
            push    ax                      ;Save AX
            in      al,60h                  ;Read the scan code
            mov     cs:[scancode],al        ;Save it
            pop     ax                      ;Restore AX
            popf                            ;Restore FLAGS
            pushf                           ;Push FLAGS
            call    cs:[int09h]             ;Call previous handler
            sti                             ;Enable interrupts

            test    cs:[scancode],80h       ;Exit if high bit of scan
            jnz     kb_exit                 ;  code is set

            push    ax                      ;Save AX and ES
            push    es
            mov     ax,40h                  ;Point ES to the BIOS
            mov     es,ax                   ;  Data Area
            mov     al,es:[17h]             ;Get keyboard flags
            and     al,03h                  ;Zero the upper 6 bits
            cmp     al,03h                  ;Are the Shift keys pressed?
            pop     es                      ;Restore AX and ES
            pop     ax
            jne     kb2                     ;Branch if they're not
            call    disable_video           ;Blank the screen
            iret                            ;Return from interrupt
kb2:        push    cs:[time]               ;Reset countdown timer
            pop     cs:[count]
            cmp     cs:[blanked],0          ;Is the screen blanked?
            je      kb_exit                 ;If not, then exit
            call    enable_video            ;Unblank the screen
kb_exit:    iret                            ;Return from interrupt
kb_int      endp 
```

这是挂钩中断的代码 - 这在程序的开头运行

```
 mov     ax,3509h                ;Hook interrupt 09H
            int     21h
            mov     word ptr int09h,bx
            mov     word ptr int09h[2],es
            mov     ax,2509h
            mov     dx,offset kb_int
            int     21h 
```

整个程序太长，无法在此处发布 - 33KB。但是，您只想看一个如何做的例子......

这是另一个检查各种 alt/ctrl/key 功能的示例

```
even
New_09     proc   far
           sti
           pushf
           push   ax
           mov    ah, 2                 ; get shift key status
           int    16h
           and    al, 0Fh
           cmp    al, 12                ; alt/ctrl?
           jne    @@0                   ; no
           in     al, 60h
           cmp    al, 19                ; 'R'?
           je     @@1                   ; yes
           cmp    al, 31                ; 'S'
           je     @@1                   ; yes
           cmp    al, 16                ; 'Q'
           je     @@1                   ; yes
@@0:       pop    ax                    ; exit if not my hotkey
           popf
           jmp    cs:old_09

@@1:       push   bp
           mov    bp, ax                ; save scan code
           in     al, 61h               ; reset keyboard
           mov    ah, al
           or     al, 80h
           out    61h, al
           mov    al, ah
           out    61h, al
           cli
           mov    al, 20h
           out    20h, al
           sti

           mov    ax, bp                ; restore scan code
           cmp    al, 16                ; was it Q?
           jne    @@GetMode 
```

我现在不记得为什么需要所有的来龙去脉（这段代码来自 1992 年 5 月 14 日 - 二十年前！！！）。

# php - CakePHP：当没有人访问网站时运行一个函数

> ID：12882344
> 
> 赞同：0
> 
> 时间：2012-10-14T12:46:21.557
> 
> 标签：php, cakephp

我想在我的 CakePHP 中运行一些函数来执行诸如更改记录状态和删除数据库中过期记录之类的操作。例如每 24 小时。

显而易见的问题是运行一项功能，据我所知，有人实际访问该网站。是否可以在没有用户访问网站以运行代码的情况下自动运行功能？

例如，我有以下代码：

```
function garbage() 
    {         
        $deadline = date('Y-m-d H:i:s', time() - (24 * 60 * 60)); // keep tickets for 24h. 
        $ticketObj = new Ticket(); 
        $data = $ticketObj->query('DELETE from tickets WHERE created < \''.$deadline.'\''); 
    } 
```

这将删除超过 24 小时的过期票证。但这仅在有人访问该网站时运行。它可以在每晚午夜自动运行吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T12:50:04.170

您需要设置一个 cronjob。

这是一个很好的指南：http: [//net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/](http://net.tutsplus.com/tutorials/php/managing-cron-jobs-with-php-2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T12:50:56.897

您可以将代码编写为[CakePHP 控制台应用程序](http://book.cakephp.org/2.0/en/console-and-shells.html#creating-a-shell)，并将其作为[cronjobs](http://book.cakephp.org/2.0/en/console-and-shells/cron-jobs.html)运行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T12:55:33.350

是的，它应该作为一项 cron 工作来完成。

就蛋糕而言，您应该在模型中使用一个方法并通过外壳调用它。 [http://book.cakephp.org/2.0/en/console-and-shells.html](http://book.cakephp.org/2.0/en/console-and-shells.html)

另外，您在问题中的示例不是很像蛋糕。例如，您应该避免使用该`query()`方法。

像这样的东西应该更好（这假设你有一个`Ticket`模型）：

```
<?php 
class Ticket extends AppModel

public function garbage($deadline = null) {
    //http://book.cakephp.org/2.0/en/models/deleting-data.html#deleteall
    $this->deleteAll(array($this->alias . 'created <' => $deadline), false);
} 
```

现在您可以轻松地在蛋糕壳中重复使用此方法。

# winjs - WinJS：从滑块中删除工具提示

> ID：12882348
> 
> 赞同：9
> 
> 时间：2012-10-14T12:46:29.507
> 
> 标签：winjs

如何从 WinJS 中的滑块控件（输入 [范围]）中删除工具提示？

![工具提示](../Images/b2db5e465332d0fc64083e1df4741970.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-14T18:07:50.370

添加`::-ms-tooltip`伪元素并设置`display:`为`none;`

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465805.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465805.aspx)

```
input[type=range]::-ms-tooltip {
    display: none;
} 
```

# jquery - 使用 JQuery 防止 Html.Action

> ID：12882356
> 
> 赞同：1
> 
> 时间：2012-10-14T12:47:47.980
> 
> 标签：jquery, asp.net-mvc-3, asynchronous, progressive-enhancement

快速提问，我有这个观点

```
 <div class="product_list">
        @Html.Action("GetProducts", "Products")
    </div> 
```

控制器很简单

```
public ActionResult GetProducts(string country, string currency, int category){
    var viewModel = new ProductsViewModel{
        Products = _proxy.GetProducts(country, currency, category, page)};

    return PartialView(viewModel);
} 
```

然后 GetProducts 视图只是在 foreach 循环中呈现每个产品

如果启用了 JS 并且使用 JQuery 异步调用 te 服务，我想防止这种情况发生。就像是

```
$(".product_list").SOMETHING(function(event) {
    event.preventDefault();
    ...
 }); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:02:05.327

试试这个：

```
$(".product_list a").click(function(event) {
    event.preventDefault();
    // code to be executed.
 }); 
```

**编辑：** *根据@kooshka 评论*

当 JS 禁用时：

```
<div class="product_list">
    <!-- Will execute when JS is disabled in browser -->
    <noscript>
        @Html.Action("GetProducts", "Products")
    </noscript>
</div> 
```

当启用 JS 时，脚本代码应该是：

```
$(".product_list").SOMETHING(function(event) {
    event.preventDefault();
    $(".product_list").html('@Html.Action("GetProducts", "Products")');
    ...
}); 
```

祝你好运 ！！

# macos - 单击 UI 未知元素：我得到“缺失值”

> ID：12882361
> 
> 赞同：0
> 
> 时间：2012-10-14T12:48:41.813
> 
> 标签：macos, applescript

我是applescripting的新手：

我使用 UI 浏览器来查找我想要单击的流程元素。我发现我要点击的元素是“UI element 10”

这就是我带来的：

```
tell application "System Events"
    tell application process "nameofmyapp" to tell window 1
        click UI element 10
    end tell
end tell 
```

但它返回：“缺失值”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T23:06:30.457

系统事件有时会在单击按钮时出现问题，主要是在非本地可可应用程序窗口上。你的情况是这样吗？

即使不是，我也写了一个命令行工具，可以让你执行鼠标点击。你可以在[这里](http://www.hamsoftengineering.com/codeSharing/MouseTools/MouseTools.html)找到它。您可能想尝试一下。您必须通过屏幕坐标单击事物，因此您必须以编程方式从系统事件中获取按钮的屏幕坐标，然后添加一些像素以将坐标移动到按钮的中间，然后使用我的工具单击它。我的网页上有示例 applescript 代码可以为您提供帮助。

# c# - 如何将图形转换为图像或位图？

> ID：12882363
> 
> 赞同：6
> 
> 时间：2012-10-14T12:48:49.083
> 
> 标签：c#, bitmap

如何将图形转换为图像或位图？

我有这段代码，它成功地将我的图像裁剪到图片框中，但是当我尝试将其保存到数据库中时……它是空的。

```
Bitmap sourceBitmap = new Bitmap(pctImage.Image, pctImage.Width, pctImage.Height);
Graphics g = frmAdd.pctImage.CreateGraphics();

Rectangle rectCropArea;
rectCropArea = new Rectangle(50, 3, 230, 240);

g.DrawImage(sourceBitmap, new Rectangle(0, 0, frmAdd.pctImage.Width, frmAdd.pctImage.Height), rectCropArea, GraphicsUnit.Pixel);
sourceBitmap.Dispose(); 
```

我该怎么办？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T12:52:46.620

像这样：

```
 Bitmap bmp = new Bitmap(100,100,graphics); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:13:26.440

使用这样的结构：

```
using (Bitmap bitmap = new Bitmap(rectangle.Width, rectangle.Height))
        {
            using (Graphics graphics = Graphics.FromImage(bitmap))
            {
               //draw image..
            }
            return bitmap;
        } 
```

# qt - 为什么在此代码中使用 QMutex？

> ID：12882372
> 
> 赞同：0
> 
> 时间：2012-10-14T12:49:59.210
> 
> 标签：qt, mutex, qthread, qmutex

我正在阅读别人的代码，我遇到了这段代码，它是多线程应用程序的一部分。这段代码是从**QThread**`run()`继承的类中函数的一部分。 我认为**QMutex**用于保护变量不被多个线程同时更改。但这里是班级的成员。因此它将为类的每个实例创建。 我对互斥锁错了吗？程序员是否编写了错误的代码:)？或者这里互斥量有另一个应用程序？ ****`stopped`**** 

 ****```
void aThread::run(){
   aMutex.lock();
   if (stopped)
   {
     stopped=false;
     aMutex.unlock();
     break;
   }
   aMutex.unlock();
} 
```

这是 stop 的声明：

```
class aThread : public QThread{
public :
   void run();
private:
    volatile bool stopped;
} 
```****

# ruby-on-rails-3 - Rails：查找对多态关联的约束

> ID：12882381
> 
> 赞同：0
> 
> 时间：2012-10-14T12:50:37.460
> 
> 标签：ruby-on-rails-3

两种型号：

```
User has_one :location, as: locatable
Location belongs_to :locatable, polymorphic: true 
```

到现在为止还挺好。现在说我想找到一个具有特定名称和城市的用户：

```
User.joins(:location).where(name: 'Eddie Explosion', location: { city: 'Kaboom' }) 
```

...但是当我运行它时，繁荣，

> ActiveRecord::StatementInvalid: PG::Error: ERROR: 缺少表“位置”的 FROM 子句条目。

知道这里发生了什么/如何解决这个问题吗？似乎无法弄清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:22:31.007

我无法真正对您的确切情况进行试验，但我已经做了类似于您想要在我的应用程序中执行的操作，下面是一个示例：

```
User.joins(:locations).where("users.name = 'Eddie Explosion' AND locations.city = 'Kaboom'") 
```

干杯:))

# javascript - 如何在文本框中添加“view:source”选项？

> ID：12882383
> 
> 赞同：0
> 
> 时间：2012-10-14T12:50:50.000
> 
> 标签：javascript, html, prettify

我知道我的标题不是那么具有描述性，所以让我在这里尝试解释一下。

在我的博客中，我想为用户添加一个选项，当他单击一个名为的小按钮时，`view:source`他会在`raw format`. 我正在使用`prettify.js`语法突出显示，它会自动在我的源代码周围创建一个文本框，其中包含以下定义的 css：

```
pre.prettyprint { 
    border-style: groove; 
    border-radius: 10px; 
    padding: 10px; 
    overflow: auto;
    font-family: "DejaVu Sans Mono";
    font-size: 12px;
    background-color: #EBECE4
} 
```

现在，在那个类似文本框的结构中，我只想添加一个选项/按钮来查看原始格式的源代码。我正在谈论的功能可以在这个 [dzone 帖子](http://java.dzone.com/articles/groovy-goodness-using-project)中看到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:02:48.363

像这样的东西呢，显然是从一个按钮改变它，有更好的定位和元素定位，并使用 prettify.js 的实际版本而不仅仅是输出：

演示：http: [//jsfiddle.net/SO_AMK/9YXxP/](http://jsfiddle.net/SO_AMK/9YXxP/)

JavaScript：

```
var code = document.getElementsByTagName("pre")[0].innerText;

var elm = document.getElementById("clickmeforpopup");

elm.onclick = function() {
    popup = window.open("", "popup");
    popup.document.body.innerText = code;
};​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T12:59:30.327

您可能需要考虑另一个支持该功能的库，而不是自己实现它。在本文中，您可以找到显示原始代码的语法荧光笔，例如[SyntaxHighlighter](http://alexgorbatchev.com/SyntaxHighlighter/)或[beautyOfCode](http://startbigthinksmall.wordpress.com/2008/10/30/beautyofcode-jquery-plugin-for-syntax-highlighting/)

[http://www.webdesignbooth.com/9-useful-javascript-syntax-highlighting-scripts/](http://www.webdesignbooth.com/9-useful-javascript-syntax-highlighting-scripts/)

# iphone - 表格单元格重新排序 + iphone sdk

> ID：12882387
> 
> 赞同：1
> 
> 时间：2012-10-14T12:51:37.690
> 
> 标签：iphone, ios

我想重新排序我的表格行。我的表格单元格数据由 nsmutablearray 填充。当我当时重新排序我的单元格时，我想重新排序我的数组数据，因为我正在重新排序单元格。我是初学者。我不能这样做。请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:36:57.557

如前所述，这一切都在 iOS 的 Table View Programming Guide 中进行了描述。具体来说，您希望移动数组中的元素以匹配移动的表格行。这是在表视图数据源方法**tableView:moveRowAtIndexPath:toIndexPath:**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:34:02.600

只需深入了解 Apple 自己有关重新排序表行的文档！请特别参考[Table View Programming Guide](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageReorderRow/ManageReorderRow.html)并通读前面提到的指南的“管理行的重新排序”部分。

# java - 这些对象会被 GC 收集吗？

> ID：12882400
> 
> 赞同：1
> 
> 时间：2012-10-14T12:53:19.587
> 
> 标签：java, android, garbage-collection, observer-pattern

考虑以下java代码

```
public class PlayerView implements IPlayerListener
{
    public Player player;

    public PlayerView()
    {
        player = new Player();
        player.listener = this;
    }

    public void onPlayerEvent()
    {

    }
}

public class Player
{
    public IPlayerListener listener;

    public void foo()
    {
        //do something then
        if(this.listener != null)
        {
            this.listener.onPlayerEvent();
        }

    }
}

public interface IPlayerListener
{
    public void onPlayerEvent();
} 
```

这里我有一个 PlayerView 和 Player。Player 需要向 PlayerView 报告事件，所以我创建了一个名为 IPlayerListener 的接口，Player 可能有一个 PlayerListener 对象的引用来报告事件。

（我知道在 java 中这不是创建事件的最佳方式，但我真的不需要“许多侦听器”来使用默认的“addEventListener”模式）

**问题一：当 PlayerView 对象设置为 null 时，PlayerView 和 Player 对象都会被 GC 收集吗？**

如果是，则继续执行以下代码

```
public class PlayerView implements IPlayerListener, IPlaylistListener
{
    public Player player;

    public PlayerView()
    {
        player = new Player();
        player.listener = this;
        player.playlist = new Playlist();
        player.playlist.listener = this;
    }

    public void onPlayerEvent()
    {

    }

    public void onPlaylistEvent()
    {

    }
}

public class Player
{
    public Playlist playlist;
    public IPlayerListener listener;

    public void foo()
    {
        //do something then
        if(this.listener != null)
        {
            this.listener.onPlayerEvent();
        }

    }
}

public class Playlist
{
    public IPlaylistListener listener;

    public void bar()
    {
        //do something then
        if(this.listener != null)
        {
            this.listener.onPlaylistEvent();
        }
    }
}

public interface IPlayerListener
{
    public void onPlayerEvent();
}

public interface IPlaylistListener
{
    public void onPlaylistEvent();
} 
```

在这里，我添加了第三个类，播放列表类，播放器也有一个播放列表对象的引用。播放列表也应该有一个监听器/观察器。在这种情况下，PlayerView 也是播放列表侦听器。

**问题2：当PlayerView对象设置为null时，这些对象会被GC回收吗？**

如果答案 #2 为否，请继续

```
public class PlayerView implements IPlayerListener, IPlaylistListener
{
    public Player player;

    public PlayerView()
    {
        player = new Player();
        player.listener = this;
        player.playlist = new Playlist();
        player.playlist.parentPlayer = player;
    }

    public void onPlayerEvent()
    {

    }

    public void onPlaylistEvent()
    {

    }
}

public class Player
{
    public Playlist playlist;
    public IPlayerListener listener;

    public void foo()
    {
        //do something then
        if(this.listener != null)
        {
            this.listener.onPlayerEvent();
        }

    }
}

public class Playlist
{
    public Player parentPlayer;

    public void bar()
    {
        //do something then
        if(this.parentPlayer != null)
        {
            if(this.parentPlayer.listener != null)
            {
                if(this.parentPlayer.listener instanceof IPlaylistListener)
                {
                    ((IPlaylistListener) this.parentPlayer.listener).onPlaylistEvent();
                }
            }
        }
    }
}

public interface IPlayerListener
{
    public void onPlayerEvent();
}

public interface IPlaylistListener
{
    public void onPlaylistEvent();
} 
```

这里我将 playlistListener 引用切换为对父 Player 的引用，而不是直接调用 playlistListener，而是检查 playerListener 是否也是一个 PlaylistListener（或者两个接口可以合并为一个）

**问题 #3：前面的代码会解决问题并收集所有对象吗？**

或者我应该更好地使用第二个代码块并在 PlayerView 对象中找到正确的时间（就像在将 PlayerView 对象从其父视图中删除之前）并至少调用“player.playlist.listener = null;”。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T15:35:19.503

重要的是要认识到，理论上不可能预测对象何时会真正被垃圾回收。更具体地说，将字段设置为`null`不会导致它被收集。相反，它可能会导致它变得无法访问，因此*有资格*进行垃圾收集。这意味着它*可能*会在随后的 GC 运行中被收集，但不一定在下一次运行中被收集。（请注意，即使调用`System.gc()`也不能保证会收集到符合条件的对象。JVM 可以自由地忽略`gc()`调用。）

注意：可达性是关于对象是否仍然可以被某个活动线程访问。如果一个线程可以跟随一个引用链到达某个对象，那么它是可到达的。自然，链需要以线程可以访问的引用变量开始；例如，线程堆栈上的静态变量或局部变量或参数。

* * *

所以对于你的具体问题：

> 问题一：当 PlayerView 对象设置为 null 时，PlayerView 和 Player 对象都会被 GC 收集吗？

该代码既没有创建`PlayerView`实例，也没有`PlayerView`可以为空的变量。我还注意到 Player 和 PlayerView 对象相互指向。此参考周期不会直接影响可达性。尽管这确实意味着如果其中任何一个对象都可以到达，那么两者都是。

因此，如果我们假设只有一个`PlayerView`变量……而没有`Player`变量……那么分配`null`给变量将导致两个对象都变得不可访问，因此有资格被收集。

> 问题2：当PlayerView对象设置为null时，这些对象会被GC回收吗？

同样，同样需要注意的是，当对 的最后一个可访问引用`PlayerView`为空时（或当它变得不可访问时），所有三个对象都将有资格被收集。

* * *

一些忠告：

1.  您可能过于担心对象何时以及如何被回收。它很可能没有丝毫区别。
2.  明确地将事物归零以使它们被收集通常是浪费时间。
3.  无需担心 Java 中的引用循环。Java GC 不是基于引用计数的，不需要打破循环来使 GC 工作。

# c# - 想要移动页面以显示更新面板内新闻项目的顶部或如何在 AJAX 中的 asyncPostback 后设置页面位置

> ID：12882401
> 
> 赞同：0
> 
> 时间：2012-10-14T12:53:20.473
> 
> 标签：c#, jquery, asp.net, asp.net-ajax, updatepanel

我在其中一个页面上使用分页控件来显示新闻，我一次显示大约 8 条新闻并为此页面使用 Ajax 更新面板仅刷新新闻区域，一切正常。如果您访问该链接，您会发现，如果您单击分页器控件中的 2 页面，它仍然保留在页面底部 [示例][1]

我以某种方式希望页面移回新闻项目区域的顶部，否则如果我们在第二页上只有 1 或 2 个项目，则页面看起来是空的，用户必须使用浏览器滚动才能向上移动。我希望寻呼机在导航时在每个页面上显示新闻页面的前 1 项。恐怕我不能在代码中做到这一点。我可以使用 jQuery 来做些什么，这样当用户在页面之间导航时，它总是将页面移动到该特定页面上的第一个新闻项目。我希望你明白我的意思。

我需要书签之类的东西，以便在异步回发发生后它总是将页面移动到第一个新闻项目

我正在使用的寻呼机控件的[链接。](http://www.clientsideasp.net/2010/02/01/search-engine-friendly-aspnet-digg-like-numeric-pagination-with-datalist-repeater-gridview/)我将不胜感激这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:44:49.690

以下代码帮助我在异步回发后设置滚动位置

```
 <script type="text/javascript">
        var prm = Sys.WebForms.PageRequestManager.getInstance();
        prm.add_endRequest(EndRequestHandler);
        function EndRequestHandler(sender, args) {
            window.scroll(0,0);
       }
    </script> 
```

# mysql - 如何加入 3 张桌子？

> ID：12882404
> 
> 赞同：-2
> 
> 时间：2012-10-14T12:53:48.073
> 
> 标签：mysql, sql, select, join

我有 3 个 mysql 表。第一个表（`tb_user`）或父表有列`region_id`，`institution_id`并且两者都可以从不同的表中找到：

*   `region_id`（表：）`tb_region`，和
*   `institution_id`（表：）`tb_institutional_profile`。

如何查询它以获取所有列`tb_user`并显示名称（`region_name`from`tb_region`和`institution_name`form `tb_institutional_profile`）而不是`ID`s.？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:56:30.277

试试这个：

```
SELECT 
  t.username, 
  r.region_name, 
  i.instituation_name
FROM tb_user t
INNER JOIN tb_region r ON t.region_id = r.region_id
INNER JOIN tb_institutional_profile i ON t.institution_id = i.institution_id 
```

# macos - 从 10.7.3 更新到 10.7.5 后，MacOS VM 无法启动

> ID：12882406
> 
> 赞同：2
> 
> 时间：2012-10-14T12:53:58.557
> 
> 标签：macos, vmware, virtualization, vmware-workstation

**我有运行Mac OS X 10.7.3**的 VMWare 工作站 7.1 。我使用了软件更新并将其更新到**10.7.5**。

现在操作系统无法启动。屏幕显示苹果的标志和一个“忙碌”的动画。但它永远不会加载。

这个问题的解决方案是什么？

另外，我使用另一个虚拟磁盘修复了磁盘（即我单击“实用程序”，选择磁盘并单击“**修复磁盘**”）。报告称：“ **Macintosh 的音量似乎还可以**”。但是，它仍然无法启动。我该怎么办？

请帮忙！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T20:08:45.933

就我而言，从 10.7.3 升级到 10.7.5（直接使用软件更新）后，所有启动都需要大约 40 分钟（如 ankur 所说）。

[搜索，我在这里](http://howifixed.it/vmware-mac-os-x-updating-from-10-7-x-to-10-7-5/)找到了一个修复启动的补丁

# c# - 在 MVC 4 中使用自定义授权

> ID：12882407
> 
> 赞同：11
> 
> 时间：2012-10-14T12:54:23.813
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api

我目前正在使用 MVC 4 Web API 项目类型开发 Web API。我目前处于需要为 API 添加一些安全性的阶段。我知道 Authorize 属性，但是，客户更喜欢不同的方法。为此，我尝试在我自己的类中覆盖 Authorize 属性，作为一个基本的开始，我只是让 AuthorizeCore 始终返回 false，这应该意味着未经过身份验证。如果我随后将其添加到控制器中的动作中，则动作总是完成并且我总是检索数据。我认为原因可能是由于未在 web.config 文件中注册自定义属性，但是，我不确定在不使用表单身份验证时如何处理。

我用来测试的代码是一个全新的 MVC 4 Web API 项目，其自定义属性如下所示。

```
public class Auth : AuthorizeAttribute
{
    protected override bool AuthorizeCore(HttpContextBase httpContext)
    {
        return false;
    }
    protected override void HandleUnauthorizedRequest(AuthorizationContext filterContext)
    {
        filterContext.Result = new RedirectResult("http://www.google.com");
    }
} 
```

然后，我将属性添加到默认 ValuesController 的 Get 方法中

```
[Auth]
public IEnumerable<string> Get() 
```

但是，当我导航到 domain/api/Values 时，我总是看到数据而不是预期的重定向到谷歌。任何帮助表示赞赏。

编辑：多看了一下后，我在这里找到了这个：[http ://weblogs.asp.net/jgalloway/archive/2012/05/04/asp-net-mvc-authentication-customizing-authentication-and-authorization-the -right-way.aspx](http://weblogs.asp.net/jgalloway/archive/2012/05/04/asp-net-mvc-authentication-customizing-authentication-and-authorization-the-right-way.aspx)这表明我选择了错误的 AuthorizeAttribute 类，因为我从 System.Web.MVC 中选择了一个，而不是从 System.Web.Http 中选择了一个。看起来 Http 版本不允许与 MVC 版本相同级别的配置，因为它不允许我覆盖 AuthorizeCore。对此的任何更多帮助表示赞赏。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-14T14:13:11.967

看来问题是由于使用了错误的 AuthorizeAttribute 版本引起的。使用 System.Web.Http 中找到的版本后，如果用户没有所需的权限，代码将返回正确的错误代码。作为一个例子，这里是我在原始问题中输入的等效代码

```
using System;
using System.Web.Http;
using System.Net.Http;

public class AuthAttribute : AuthorizeAttribute
{
    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        HandleUnauthorizedRequest(actionContext);
    }

    protected override void HandleUnauthorizedRequest(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        var response = actionContext.Request.CreateResponse(System.Net.HttpStatusCode.Redirect);
        response.Headers.Add("Location", "http://www.google.com");
        actionContext.Response = response;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T13:04:40.547

对于 WebApi，您可以通过在覆盖中指定它来强制它覆盖正确的 AuthorizeAttribute 类。此外，进行重定向是没有意义的，这只会返回未经授权的 Web 响应，这适用于 API。

```
namespace WebApiTest
{
    public class Auth : System.Web.Http.AuthorizeAttribute
    {
        protected override bool IsAuthorized(System.Web.Http.Controllers.HttpActionContext actionContext)
        {
            return false;
        }

    }
} 
```

# java - 作业：平均 10 个用户输入的数字

> ID：12882409
> 
> 赞同：-1
> 
> 时间：2012-10-14T12:54:31.073
> 
> 标签：java, if-statement, average

我收到了这个问题，我尝试了几次，但我什么都没想到:(

这就是问题：设计并编写一个程序来输入 10 个体重的人。它应该只接受 20 公斤至 100 公斤之间的重量。你的程序应该计算并打印这些人的平均、最大和最小体重。

这是我尝试过的代码。任何人都可以完成这个或想出一个简化的代码吗？这是正确的，我的意思是我这样做的方式吗？请帮忙

```
import java.util.Scanner;

class WeightOfPeople{
public static void main(String args []){

    Scanner sc = new Scanner(System.in);
    System.out.print("Enter a weight between 20kg - 100kg :");
    int weight1 = sc.nextInt();

    if(20 < weight1 && weight1 < 100){
            System.out.print("Enter a weight between 20kg - 100kg :");
            int weight2 = sc.nextInt();             
    }else{
        System.out.println("Enter a correct weight");
    }           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:04:31.870

试试这个：

```
Scanner sc = new Scanner(System.in);
int count = 0;
int total = 0;
int min = 101;
int max = 19;
while(count < 3) {
    System.out.print("Enter a weight between 20kg - 100kg :");
    int nextWeight = sc.nextInt();
    if(20 <= nextWeight && nextWeight <= 100){
        total += nextWeight;
        if(nextWeight < min) {
            min = nextWeight;
        }
        if(nextWeight > min) {
            max = nextWeight;
        }
        count++;
    }
    else{
        System.out.println("Enter a correct weight");
    }
}
System.out.println("Average = " + ((double)total/count));
System.out.println("Min = " + min);
System.out.println("Max = " + max); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T12:59:40.517

您希望用户能够输入*10 个不同的值*。因此，您将需要某种循环。

例如

```
for (int i = 0 ; i < 10 ; i++) {
    System.out.print("Enter a weight: ");
    // record users input
} 
```

我要做的是维护一个整数数组来存储用户输入的所有数据。收集数据后，您可以遍历此数组以确定最小值、最大值和平均值。像这样的东西：

```
int min = weights[0];
int max = weights[0];
double avg = 0;

for (int weight : weights) {
    if (weight < min)
        min = weight;
    if (weight > max)
        max = weight;
    avg += weight;
}

avg /= weights.length; 
```

* * *

总的来说，你会有这样的事情：

```
Scanner in = new Scanner(System.in);
int[] weights = new int[10];
for (int i = 0 ; i < 10 ; i++) {
    System.out.print("Enter a weight between 20 and 100: ");
    weights[i] = in.nextInt();
}
in.close();

int min = weights[0];
int max = weights[0];
double avg = 0;

for (int weight : weights) {
    if (weight < min)
        min = weight;
    if (weight > max)
        max = weight;
    avg += weight;
}

avg /= weights.length;

System.out.println("Min: " + min);
System.out.println("Max: " + max);
System.out.println("Average: " + avg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:15:01.400

```
public static void main(String args []){
  Scanner sc = new Scanner(System.in);
  int i = 0;
  int sum = 0;
  int min = Integer.MAX_VALUE;
  int max = Integer.MIN_VALUE; 
  do{
    System.out.print("Enter a weight between 20kg - 100kg :");
    int weight = sc.nextInt();
    if(20 <= weight && weight <= 100){
      sum += weight;
      if(weight<min){
        min = weight;
      }
      if(weight>max){
        max = weight;
      }
      i++;
    }
    else {
      System.out.println("Enter a correct weight");
    }
  } while(i<=10)
  System.out.println("AVG "+ (sum/10)+" Min "+ min +" Max "+max);
} 
```

# javascript - GetLonLat 函数返回不正确的 LonLat

> ID：12882410
> 
> 赞同：3
> 
> 时间：2012-10-14T12:54:34.833
> 
> 标签：javascript, openlayers

每次在地图上放置地图标记时，我都会尝试获取 POI 的经度和纬度。

这似乎有效，但它没有返回正确的 LonLat - 这是一个更大的数字，不是 lonlat 点。

GetLonLatFromPixel 是正确的方法吗？

提前为凌乱的代码道歉！

```
<html>
<head>
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>

        #heatmapArea {
            position:relative;
            float:left;
            width:800px;
            height:600px;
            border:1px dashed black;
        }

    </style>
</head>
<body>
<div id="main">
        <div id="heatmapArea">
        </div>
<script src="http://openlayers.org/api/OpenLayers.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
var map, layer
function init(){

//create new map position :
                map = new OpenLayers.Map('heatmapArea');
                var layer           = new OpenLayers.Layer.OSM();
                var fromProjection = new OpenLayers.Projection("EPSG:4326");   // Transform from WGS 1984
                var toProjection   = new OpenLayers.Projection("EPSG:900913"); // 23834 to Spherical Mercator Projection
                var position       = new OpenLayers.LonLat(0,51.4791).transform( fromProjection, toProjection);
                var zoom           = 16; 

                map.addLayers([layer]);
                map.setCenter(position,zoom);
markers = new OpenLayers.Layer.Markers( "Markers" );
markers.id = "Markers";
map.addLayer(markers);

//get lonlat:
map.events.register("click", map, function(e) {
  //var position = this.events.getMousePosition(e);
  var position = map.getLonLatFromPixel(e.xy);
  var size = new OpenLayers.Size(40,50);
var offset = new OpenLayers.Pixel(-(size.w/2), -size.h);
var icon = new OpenLayers.Icon('eats.png', size, offset);   
var markerslayer = map.getLayer('Markers');

markerslayer.addMarker(new OpenLayers.Marker(position,icon));

$("<p>{lat:"+position["lat"]+",lon:"+position["lon"]+",count=1},</p>").insertAfter("p.longlat");

});   

}

window.onload = function(){ 
init(); 

};

</script>

<div id="position">
<p class="longlat">LonLat</p>

</div>

</html> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-14T13:13:12.243

[`lon`和将`lat`在“地图单位”中。仅当您的地图处于地理投影中时，这与经度和纬度相同。](http://dev.openlayers.org/docs/files/OpenLayers/BaseTypes/LonLat-js.html#OpenLayers.LonLat.OpenLayers.LonLat)

要使其成为您期望的纬度和经度值，您需要`transform`在`LonLat`对象上运行：

```
map.events.register("click", map, function(e) {  
    var toProjection = new OpenLayers.Projection("EPSG:4326");
    var position = map.getLonLatFromPixel(e.xy).transform(map.getProjectionObject(), toProjection);
    ... 
```

（当然，如果您通过另一种机制使回调可用于回调，则每次运行回调时都不需要像这样创建 toProjection 对象的开销。）

请注意，运行`transform()`会改变`LonLat`对象，因此如果您需要它以地图单位用于其他目的，请务必先使用`clone()`它。

# vb.net - 获取网格中的新行

> ID：12882411
> 
> 赞同：0
> 
> 时间：2012-10-14T12:54:43.350
> 
> 标签：vb.net

我想在数据网格中添加一个新行

添加新行

我想在网格中添加新行，然后我想关注那个网格。像这样

```
grid1.addrow()
grid.newrow.focus() 'I want to focus into new row 
```

这该怎么做。

需要建议或代码帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:29:18.363

这是一个非常粗略的示例，因为我不知道您如何或使用什么来填充 dgv 控件（当您说“网格”时，我假设您的意思是“DataGridView”）：

```
 Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
    Dim dgv As DataGridView = Me.DataGridView1
    Dim newRow As DataGridViewRow
    Dim rowData() As String = {"John", "Doe"}

    'Add a first row, just so we can see that this works:
    newRow = dgv.Rows(dgv.Rows.Add(rowData))
    newRow.Selected = False

    ' Now create some random data for the next row:
    rowData(0) = "Mary"
    rowData(1) = "Smith"

    ' Add the next row:
    newRow = dgv.Rows(dgv.Rows.Add(rowData))

    ' Set the status of the first cell (element zero in the array of cells
    ' to Selected = true:
    newRow.Cells(0).Selected = True

    'If you want a reference to the active cell:
    Dim cell As DataGridViewCell = newRow.Cells(0)

End Sub 
```

这没什么好合作的，但你也没有给我们太多的合作机会。. . 如果您可以发布更多代码，或者更全面地解释您正在尝试做什么，我们也许能够提供更具建设性的反馈。

希望有帮助！

# java - 如何使用反射满足工厂模式中的开闭原则？

> ID：12882413
> 
> 赞同：2
> 
> 时间：2012-10-14T12:55:01.817
> 
> 标签：java, reflection, factory-pattern, open-closed-principle

我正在尝试使用 Head First Design Pattern 学习面向对象的设计模式。这是书中工厂模式的一个示例，我想在不违反开放封闭原则的情况下添加新的披萨项目。在书中给出的示例代码中，如果我添加新的比萨项目类，我需要修改 PizzaStore 和 PizzaOrder 类。但我只想添加新的披萨项目而不修改其他类。

```
public class ChicagoPizzaStore extends PizzaStore {

Pizza createPizza(String item) {
        if (item.equals("cheese")) {
                return new ChicagoStyleCheesePizza();
        } else if (item.equals("veggie")) {
                return new ChicagoStyleVeggiePizza();
        } else if (item.equals("clam")) {
                return new ChicagoStyleClamPizza();
        } 
            else return null;
} 
```

}

这个 PizzaStore 类用于创建和订购比萨饼。

```
public abstract class PizzaStore {

    abstract Pizza createPizza(String item);

public Pizza orderPizza(String type) {
    Pizza pizza = createPizza(type);
    System.out.println("--- Making a " + pizza.getName() + " ---");
    pizza.prepare();
    pizza.bake();
    pizza.cut();
    pizza.box();
    return pizza;
} 
```

}

这是抽象的 Pizza 类：

```
public abstract class Pizza {
String name;
String dough;
String sauce;
ArrayList toppings = new ArrayList();

void prepare() {
    System.out.println("Preparing " + name);
    System.out.println("Tossing dough...");
    System.out.println("Adding sauce...");
    System.out.println("Adding toppings: ");
    for (int i = 0; i < toppings.size(); i++) {
        System.out.println("   " + toppings.get(i));
    }
} 
```

该类用于接受客户的订单。

```
 public class PizzaTestDrive {

        public static void main(String[] args) {
            PizzaStore nyStore = new NYPizzaStore();
            PizzaStore chicagoStore = new ChicagoPizzaStore();

            Pizza pizza = nyStore.orderPizza("cheese");
            System.out.println("Ethan ordered a " + pizza.getName() + "\n");
    }
} 
```

这是我的新披萨项目类。我想在不修改 chicagoPizzaStore 和 testDrive 类的情况下订购这个披萨：

```
public class ChicagoStyleClamPizza extends Pizza {
    public ChicagoStyleClamPizza() {
        name = "Chicago Style Clam Pizza";
        dough = "Extra Thick Crust Dough";
        sauce = "Plum Tomato Sauce";
        toppings.add("Shredded Mozzarella Cheese");
        toppings.add("Frozen Clams from Chesapeake Bay");
    }

    void cut() {
        System.out.println("Cutting the pizza into square slices");
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-12-18T15:03:42.237

就目前而言，每次`ChicagoPizzaStore`推出新类型的比萨（的新子类`Pizza`）时，您都需要向具体的创建者方法添加更多功能，`createPizza(String item)`以使比萨店能够创建这些类型的比萨。

如您所见，这违反了[OCP](http://en.wikipedia.org/wiki/Open/closed_principle)。

以下是针对此问题的两种解决方案。

**1\. 使用内部反射`createPizza(String item)`来动态创建比萨饼**

此解决方案将要求您最后一次违反 OCP 原则，但是使用反射动态创建`Pizza`实例意味着`ChicagoPizzaStore`，除了此更改之外，不再需要进行修改以支持未来的 Pizza 口味。

新`Pizza`类的名称必须与提供给 create Pizza 方法的键名（项目参数）匹配。该解决方案的工作原理如下：

```
public class ChicagoPizzaStore extends PizzaStore {

Pizza createPizza(String item) {
        try {
            //some assumptions about the classpath locations made here
            return Class.forName(item).newInstance();
        } catch(Exception e) {
            return null;
        }
} 
```

当创建新类型时`Pizza`，可以简单地将它们作为方法的键传入，`createPizza(item)`然后它们将被创建。

类似地，如果`Pizza`从菜单中删除了 of 的类型，则从类路径中删除此类 Pizza 的类定义将导致`createPizza(item)`折扣风味返回 null。

由于各种原因，对反射的使用有其批评者，但对反射的批评超出了这个问题的范围，而且它对于实施遵循 Open/Closed 的工厂的问题来说是一个完全有效的解决方案原则。

**2\. 子类 ChicagoPizzaStore**

正如 SOLID 中的 O 所述，类是“对扩展开放，对修改关闭”。因此，解决您的问题的方法就是扩展`ChicagoPizzaStore`：

```
public class ExtendedChicagoPizzaStore extends ChicagoPizzaStore {

    Pizza createPizza(String item) {
            if (item.equals("spicy")) {
                    return new RidiculouslySpicyPizza();
            } else {
                    return super.createPizza(item);
           }
    } 
```

该解决方案的优点是应用它不会违反OCP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-01T19:56:02.103

有一个 switch 语句会破坏 OC。要解决这个问题，多态性可能是要走的路。也许是一个抽象工厂？

或者工厂通常是错误的，您想使用构建器模式。毕竟披萨就是披萨就是披萨。所以你只需要以不同的方式构建它们。就像使用 StringBuilder...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-28T10:59:44.640

这是一个运行示例

```
class FactoryClosedForModification {
public static void main(String[] args) throws InstantiationException, IllegalAccessException, ClassNotFoundException {
            ShapeFactory sf = new ShapeFactory();
            Shape shape = (Shape) sf.getShape(Triangle.class.getName());
            shape.draw();
        }
    }

class ShapeFactory {

    public Object getShape(String shapeName)
            throws InstantiationException, IllegalAccessException, ClassNotFoundException {
        return Class.forName(shapeName).newInstance();
    }
}

class Shape {
    public void draw() {
        System.out.println("Drawing a shape.");
    }
}

class Triangle extends Shape {
    @Override
    public void draw() {
        System.out.println("Drawing a Triangle.");
    }
}

class Circle extends Shape {
    @Override
    public void draw() {
        System.out.println("Drawing Circle.");
    }
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-14T13:23:22.317

工厂方法设计模式的重点是使客户端和具体产品松散耦合。客户端仅与接口或基类交互。因此，将来如果您需要添加新的具体产品类（在您的情况下为 Pizza），新类不应导致客户端代码的更改（在您的情况下`PizzaTestDrive`）。要添加新产品（Pizza），您只需要修改 Concrete Factory 类（在您的情况下`ChicagoPizzaStore`）。

我认为您对工厂方法设计模式的实现是正确的。对于添加一个新的 Pizza，客户端代码不会改变，只有 Concrete Factory 类在改变。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-06-07T05:30:46.517

如果你使用反射来满足开闭原则，你就是在牺牲性能。相反，您可以使用其他简单的技术按照开闭原则来制作您的工厂。[工厂设计模式和开闭原则 (OCP)，SOLID 中的“O”](http://java.globinch.com/patterns/design-patterns/factory-design-patterns-and-open-closed-principle-ocp-in-solid/) 对此给出了更恰当的解释。文章还讲述了如何调整简单工厂以遵循开放封闭原则。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2014-11-09T16:04:26.367

在您的情况下使用反射并不是很好。最好使用 ChicagoPizzaStore 的属性文件之类的东西来将项目映射到类...例如：

```
cheese=ChicagoStyleCheesePizza
veggie=ChicagoStyleVeggiePizza
clam=ChicagoStyleClamPizza 
```

# wpf - DataGrid禁用行wpf

> ID：12882423
> 
> 赞同：1
> 
> 时间：2012-10-14T12:56:13.443
> 
> 标签：wpf, datagrid

我有一个 DataGrid，用户只能使用绑定到视图模型的添加命令输入新行。下面显示的附加行为激活了正确的单元格。

我现在想要做的是有效地使新行“模态”。也就是说，在新行有效并提交之前，我不希望用户能够对网格执行任何其他操作，或者取消编辑。

假设我的视图模型知道它何时有效并实现了 IEditableObject，我可以从我的附加行为中得到所有这些吗？必须做什么？

干杯，
贝里尔

# 代码

```
public class NewItemAddedByCommandBehavior : Behavior<DataGrid>
{
    private MainWindowViewModel _vm;

    protected override void OnAttached()
    {
        base.OnAttached();
        AssociatedObject.DataContextChanged += OnAssociatedObject_DataContextChanged;
    }

    protected override void OnDetaching()
    {
        base.OnDetaching();
        AssociatedObject.DataContextChanged -= OnAssociatedObject_DataContextChanged;
        _vm.NewItemAddedByCommand -= OnNewItemAddedByCommand;
    }

    private void OnAssociatedObject_DataContextChanged(object sender, DependencyPropertyChangedEventArgs e) {
        _vm = (MainWindowViewModel) AssociatedObject.DataContext;
        _vm.NewItemAddedByCommand += OnNewItemAddedByCommand;
    }

    private void OnNewItemAddedByCommand(object sender, EventArgs e)
    {
        var currentItem = _vm.SelectedItem;
        var col = AssociatedObject.Columns[1];
        AssociatedObject.CurrentCell = new DataGridCellInfo(currentItem, col);
        AssociatedObject.ScrollIntoView(currentItem, col);
        AssociatedObject.Focus();
        AssociatedObject.BeginEdit();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T22:15:40.037

[这篇文章](https://stackoverflow.com/questions/2030143/wpf-datagrid-with-some-read-only-rows/8828485#comment17449624_8828485)给了我一个大致的线索：

1.  将 IsReadOnly 属性添加到绑定的视图模型项
2.  将 IsNew 属性添加到绑定的视图模型项
3.  在vm中，在实际添加item之前，设置所有已经存在的item IsReadOnly = true
4.  当编辑新添加的项目或取消其编辑时，将所有项目的 IsReadOnly 设置回 false
5.  修改类似于发布答案的行为（奇怪的是不是接受的答案）但没有 ReadOnlyService
6.  为 DataGridRow 设置样式

# 回报

![在此处输入图像描述](../Images/d00334cfadfbbd6982a8bcb699cd1f2b.png)

![在此处输入图像描述](../Images/b9124b62a143a7e03c2df5b360147edb.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-23T09:27:26.053

```
<DataGrid.RowStyle>
    <Style TargetType="{x:Type DataGridRow}">
        <Setter Property="IsEnabled" Value="{Binding IsEnabled}"/>
    </Style>
</DataGrid.RowStyle> 
```

# c++ - 二叉搜索树中的有序遍历复杂度（使用迭代器）？

> ID：12882424
> 
> 赞同：13
> 
> 时间：2012-10-14T12:56:21.800
> 
> 标签：c++, algorithm, complexity-theory

相关问题：[InOrder Tree Traversal of Binary Tree O(N) 的时间复杂度？](https://stackoverflow.com/questions/9658700/time-complexity-of-inorder-tree-traversal-of-binary-tree-on)，但是它基于递归遍历（因此在 O(log N) 空间中），而迭代器只允许消耗 O(1) 空间。

在 C++ 中，通常要求递增标准容器的迭代器是 O(1) 操作。对于大多数容器，它被简单地证明了，但是对于`map`这样的，它似乎有点困难。

*   如果 a`map`被实现为跳过列表，那么结果将是显而易见的
*   然而，它们通常被实现为红黑树（或至少作为二叉搜索树）

因此，在有序遍历期间，有时不容易达到“下一个”值。例如，如果您指向左子树的右下叶，那么下一个要遍历的节点就是根，它离我们`depth`几步之遥。

我已经尝试“证明”算法复杂性（就“步骤”而言）是*摊销*O(1)，这似乎没问题。但是我还没有演示。

这是我为深度为 4 的树跟踪的一个小图，数字（代替节点）表示在有序遍历期间从该节点到下一个节点的步数：

```
 3
   2       2
 1   1   1   1
1 2 1 3 1 2 1 4 
```

*注意：最右边的叶子的成本为 4，以防这将是一棵较大树的子树。*

总和为 28，节点总数为 15：因此平均每个节点的成本低于 2，这（如果它坚持的话）将是一个不错的摊销成本。所以：

*   在中序遍历期间，对于平衡（和完整）二叉搜索树，增加迭代器真的是 O(1) 吗？
*   可以将结果扩展到涵盖非完整二叉搜索树吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T13:12:51.050

`O(1)`是的，对于任何树，摊销成本确实是每次迭代。

证明基于您“访问”每个节点的次数。
叶子只被访问一次。无叶子最多访问 3 次：

1.  从父节点到节点本身时。
2.  从左子树回来时
3.  从右子树回来时

不再有对任何节点的访问，因此如果我们将每个节点的访问次数相加，我们会得到一个小于 的数字`3n`，因此所有节点的总访问次数为`O(n)`，这使我们`O(1)`每步摊销。

（注意，由于在一棵完整的树中有 n/2 个叶子，我们得到了`2n`你遇到的，我相信可以证明访问的总和将小于`2n`任何树，但是这种“优化”在这里超出了范围国际海事组织）。

* * *

每一步最坏的情况是`O(h)`，它在平衡树中，但在某些情况下`O(logn)`可能是。`O(n)`

* * *

PS 我不知道红黑树是如何在 C++ 中实现的，但是如果你的树数据结构包含`parent`来自每个节点的字段，它可以替换递归堆栈并允许`O(1)`空间消耗。（这当然是“作弊”，因为存储`n`这些字段`O(n)`本身就是）。

# asp.net - 我可以在一个 Web 项目中有多个 web.config 文件吗？

> ID：12882425
> 
> 赞同：30
> 
> 时间：2012-10-14T12:56:26.090
> 
> 标签：asp.net, .net

我想知道我的 Web 项目中可以有 2 个或更多 web.config 文件吗？如果是，那么编译器将如何检查连接字符串？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-15T04:56:20.043

您也可以在同一级别的项目中拥有多个配置文件。我们这样做。我们有一个主配置文件 ( `Web.Config`)，然后我们还有两个配置文件。`App.Config`和`Database.Config`。在`App.Config`我们定义了所有应用程序级别的设置。在`Database.Config`我们定义所有数据库级别的设置。在`Web.Config`我们这样引用 App.Config 和 Database.Config 中：

```
 <appSettings configSource="app.config">
 </appSettings>
 <connectionStrings configSource="database.config">
 </connectionStrings> 
```

此外，您可以在子目录中有多个 web.config 文件。设置将被 asp.net 自动覆盖。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-06-19T10:19:55.090

是的，您可以在应用程序中有两个 web.config 文件。在某些情况下，您的应用程序被划分为多个模块，并且对于每个模块，您都需要单独配置。

![在此处输入图像描述](../Images/30af18b66d8d778896385b77d43c4859.png)

例如，如果您的应用程序有两个模块，比如说帐户和销售。您将在单独的文件夹中创建这两个模块，每个文件夹都有单独的配置文件。

请务必观看此 facebook 视频，它以非常示范的方式解释了相同的内容。 [点击这里观看，为什么我们在一个应用程序中需要 2 个 web.config 文件](https://www.facebook.com/photo.php?v=639020429515450)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-14T13:04:09.000

您可以在根项目中为整个网站配置（您正在使用的框架、其他依赖项等）设置一个。您还可以在子目录中拥有另一个 web.config 文件。这个通常用于为每个文件夹提供访问规则，例如“Admin”文件夹只能为管理员角色的用户访问...

如果你想拥有多个网站配置，你必须创建多个“应用程序”，这样每个网站都必须有它的 web.config 文件。

# php - 无法使用 pdo 方法显示来自 db 的数据

> ID：12882427
> 
> 赞同：0
> 
> 时间：2012-10-14T12:56:30.713
> 
> 标签：php, mysql, pdo

这是我第一个基于 Oops 概念的 PHP 项目。我正在尝试从数据库表中获取所有 Subject_details，但我看不出我在哪里犯了错误。

当我运行我的 index.php 页面时，我收到一条错误消息：

```
Catchable fatal error: Argument 1 passed to book_info::__construct() must be an instance of connection, none given, called in D:\xampp\htdocs\bookshop\result.php on line 6 and defined in D:\xampp\htdocs\bookshop\classes\book_info.php on line 17 
```

这是我的代码片段：

## 连接.php

```
 <?php

            /*
             * To change this template, choose Tools | Templates
             * and open the template in the editor.
             */

            /**
             * Description of connection
             *
             * @author Ashutosh
             */
            class connection {
                //put your code here 
            private $host = 'localhost';
            private $dbname = 'bookfinder_com';
            private $username = 'bookfinde';
            private $password ='4324dsfs';  

            public $con = '';

            function __construct(){

                $this->connect();   

            }

            function connect(){

                try{

                    $this->con = new PDO("mysql:host=$this->host;dbname=$this->dbname",$this->username, $this->password);
                    $this->con->setAttribute(PDO::ATTR_ERRMODE,PDO::ERRMODE_EXCEPTION);

                }catch(PDOException $e){

                    echo 'We\'re sorry but there was an error while trying to connect to the database';
                    file_put_contents('connection.errors.txt', $e->getMessage().PHP_EOL,FILE_APPEND);

                }
                   }   
            }

            ?> 
```

## book_info.php 类

```
 <?php

        /*
         * To change this template, choose Tools | Templates
         * and open the template in the editor.
         */

        /**
         * Description of account_info
         *
         * @author Ashutosh
         */
        class book_info{

          private $con;

            public function __construct(connection $con) {
                $this->con = $con->con;
            }

        function getSubjectInfo(){

            $sub_info = $this->con->prepare("SELECT * FROM subjectdetails");
            $sub_info->execute();

            $results = $sub_info->fetchAll(PDO::FETCH_OBJ);

            foreach ($results as $key) {
                $results->subject_name; 
            }
        }   
        }
        ?> 
```

## 索引.php

```
 <?php
        include_once 'classes/connection.php';
        include_once 'classes/book_info.php';

        $con = new connection();
        $info = new book_info();
        $info->getSubjectInfo();

        echo $info;
        print($info);
        ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:01:42.977

您已经定义了连接，并且`book_info`构造函数期望连接作为其参数：

这是`book_info`构造函数：

```
// Constructor expects a parameter, class `connection`
public function __construct(connection $con) {
     $this->con = $con->con;
} 
```

但是您调用了没有参数的构造函数。

```
$con = new connection();
// Pass $con into the book_info constructor
// The constructor expects one parameter of class `connection`
$info = new book_info($con); 
```

然后你会遇到一个问题，你看不到任何输出，因为`getSubjectInfo()`没有返回任何东西。 `return`它的数组。

```
 function getSubjectInfo(){

        $sub_info = $this->con->prepare("SELECT * FROM subjectdetails");
        $sub_info->execute();

        $results = $sub_info->fetchAll(PDO::FETCH_OBJ);

        foreach ($results as $key) {
            // Maybe you intend to echo here?
            // Use $key, not $results
            echo $key->subject_name; 
        }
        // Return the result array
        return $results;
    } 
```

调用它时，将结果存储在一个变量中：

```
$results = $info->getSubjectInfo();
// Now it is available as output.
print_r($results); 
```

# java - 在 Java 网站上加载 Twitter 提要

> ID：12882434
> 
> 赞同：1
> 
> 时间：2012-10-14T12:57:37.557
> 
> 标签：java, twitter

我正在开发一个项目，其中包括在 Intranet 上显示组织的 twitter 提要的要求，这是一个基于 java 的应用程序。

我有一个 Twitter 提供的 Javascript 小部件，但由于某些问题，它可能无法正常工作。所以我想在服务器端实现，这会给我更好的控制。我见过 Spring 社交框架以及 twitter4j 框架。

如果你们中的任何人以前从事过类似的任务，您能否建议我使用最简单和好的 Java API 来实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:06:10.700

就我个人而言，我会在客户端的 JavaScript 中使用 Google Feeds API 从提要生成 HTML。然后它将与其他 RSS 提要一起使用。（例如[https://wansdyke-house.co.uk](https://wansdyke-house.co.uk)）

通过使用 Java RSS 库（例如[Rome](http://rometools.org/) ），您可以使用类似的原理，但可以进行更多控制。

# mysql - MySQL - 索引 - 我做错了什么？

> ID：12882435
> 
> 赞同：1
> 
> 时间：2012-10-14T12:57:41.240
> 
> 标签：mysql, indexing

我有一个大约 400 个表的数据库。每列有 5 列，行数为 1M-200M。其中一列是 DATE 值并且是一个索引。（还有一个不同的唯一键）。

当通过执行“select * from table where <date field> = ?”遍历这些表时 我发现响应时间与日期按行排列的位置成正比。IE 如果最早的日期是“2001-01-01”，最近的日期是“2010-12-01”，每个日期的行数大致相等，2010 年的选择比 2001 年慢得多。

数据按日期递增的顺序写入表中（较低的 PK 值 = 较早的日期）。

在 select 上执行“desc”表明它正在使用适当的索引并获取适当数量的值。

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:39:18.923

您是否尝试过在它们上运行 ANALYZE 或 OPTIMIZE TABLE？也许指数需要重组。

我以前没有尝试过但已将其视为解决方案的方法是将您的日期拆分为 3 个单独的字段：thisYear YEAR、
thisMonth TINYINT、
thisDate TINYINT

和索引：
INDEX dateIDX (thisYear, thisMonth, thisDate)

并搜索：
WHERE thisYear = 2001 AND thisMonth = 1 AND thisDate = 1

如果您使用的是 MySQL 5.1 或更高版本，您可以尝试对数据进行分区。 [http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html](http://dev.mysql.com/doc/refman/5.1/en/partitioning-range.html) 对于以前的版本，MERGE 表也可能有帮助。

# css - 添加新的行 css 无表布局

> ID：12882442
> 
> 赞同：0
> 
> 时间：2012-10-14T12:58:31.177
> 
> 标签：css, html

我正在尝试使用 div 和 css 创建一个无表设计。我已经成功制作了标题部分。但是在标题之后，我有一些文本部分应该在一个 div 中。但是 div 显示为内联并且不包含文本元素。

我正在尝试的代码可在[http://jsfiddle.net/sXaTT/1/](http://jsfiddle.net/sXaTT/1/)

我需要的是“加入我们的社区”和“FB Like”块应该在主容器内。

这是我第一次尝试进行无表设计。任何解决此问题的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:01:07.043

我认为这是您想要实现的目标

```
.main{
  width:380px; margin:0 auto;
  border:1px green solid;
  position:relative;
  padding:0px;
  background:#fff;
  overflow:hidden;
} 
```

[jsFiddle](http://jsfiddle.net/sXaTT/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:05:11.310

我没有更改 CSS 只是移动了包含 fb 链接等的 div ......这是你的意思吗？[小提琴](http://jsfiddle.net/sXaTT/3/)

# java - 编译时间与运行时间错误

> ID：12882448
> 
> 赞同：3
> 
> 时间：2012-10-14T12:58:48.023
> 
> 标签：java, runtime, compile-time

> **可能重复：**
> [运行时与编译时](https://stackoverflow.com/questions/846103/runtime-vs-compile-time)

我应该如何知道 Java 中的特定代码行是否会引发编译时或运行时错误？假设特定的代码行无论如何都会抛出错误。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T13:08:04.740

在 Eclipse 中，编译时错误将以红色下划线显示。编译时错误是编译器检测到的错误。编译时错误的常见原因包括：

*   语法错误，例如缺少分号或使用保留关键字（例如“class”）。
*   当您尝试访问不在范围内的变量时。
*   当您声明多个具有相同名称的对象时。

如果编译器在编译期间检测到任何错误，它将无法构建新的程序集（或 Java 中的类文件）。

即使您的代码没有编译时错误，错误仍然可能在运行时发生。诸如“逻辑错误”和“运行时错误”之类的错误。运行时错误的一个很好的例子如下：

*   假设您要将一个项目存储在索引 5 处的数组中，但该数组的大小仅为 4。编译器不会在此处检测到错误，因为它知道数组大小可能会发生变化，但在运行时您'会抛出异常。

要检测哪一行发生了运行时错误，您可以结合使用 Eclipse 中的断点和适当的异常处理。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T13:01:41.453

要查看您的代码是否无法编译，请尝试编译它。编译器会抱怨。

要查看您的代码是否包含运行时错误，请编写单元测试。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-14T13:02:21.340

实际上，理论上每一行代码都可能抛出运行时异常，并且不存在“抛出编译时错误”之类的东西。我相信您将编译器错误与运行时异常混为一谈。

无论如何，编译器错误很容易：编译它并查看。它们从来没有任何“可能”：一行代码肯定会或不会产生编译器错误。

至于运行时错误，你能做的最好的就是静态分析和**猜测**一行代码是否会导致错误。有些情况很明显，例如`throw new RuntimeException()`or `null.toString()`，但大多数情况并非如此，并且需要丰富的经验才能在不执行的情况下进行分析。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T13:01:42.587

最好的方法是编译它，然后大多数编译器会指出所有编译时错误。另一方面，运行时错误需要开发人员付出更大的努力。

一些编译器会通知用户可能抛出的异常，但查找特定代码行是否包含运行时的最佳方法是使用不同的输入运行它们并观察结果（即使用单元测试、健全性测试等）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T13:03:05.520

编译代码时，您会看到是否存在编译时错误。运行代码可能会显示运行时错误。

# php - PHP/MYSQL 使用数据库和 PHP

> ID：12882462
> 
> 赞同：-3
> 
> 时间：2012-10-14T13:00:37.703
> 
> 标签：php, mysql

我被困在试图使下面的代码工作它似乎我的语法中的某些东西没有正确声明我试图更改变量的名称但仍然不起作用，我的数据库中有一个名为包的表，关于错误可能是什么的任何想法？请 ：（ ：

```
 <?PHP

    include('connection.php');
    include('validation.php');
    include('header.php');

    $PID = $_GET['PID'];
    $q_getpackage = "SELECT * FROM packages WHERE PID=$PID";
    $r_getpackage = mysql_query($q_getpackage,$connection);

    ?>

<!DOCTYPE HTML>
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link href="styles.css" type="text/css" rel="stylesheet"/>
    <link href='http://fonts.googleapis.com/css?family=Courgette' rel='stylesheet'     type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Numans' rel='stylesheet'  type='text/css'>

    <title>Products Information</title>
</head>
<body>

      <div class="packages_wraper"><!--Packages Wraper-->       

      <div class="package_name"><?php echo mysql_result($r_getpackage,0,'name');?></h3>
        <div class="details"><?php echo mysql_result($r_getpackage,0,'details');?</div>
    <div><?php echo mysql_result($r_getpackage,0,'guide');?> </div>
    <div><?php echo mysql_result($r_getpackage,0,'review');?> </div>
        <div class="pic"><img src="<?php echo mysql_result($r_getpackage,0,'pic_url');?>"/></div>

        </div><!--END Packages Wraper--> 

     </div>
</body>
</html> 
```

我有一个错误说：

```
Warning: mysql_result(): supplied argument is not a valid MySQL result resource in /home/tk1/domains/valbet.tk/public_html/product_info.php on line 33
Warning: mysql_result(): supplied argument is not a valid MySQL result resource in /home/tk1/domains/valbet.tk/public_html/product_info.php on line 34
Warning: mysql_result(): supplied argument is not a valid MySQL result resource in /home/tk1/domains/valbet.tk/public_html/product_info.php on line 35
Warning: mysql_result(): supplied argument is not a valid MySQL result resource in /home/tk1/domains/valbet.tk/public_html/product_info.php on line 36 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-14T14:07:26.787

SQL 语句未正确执行。运行`echo mysql_error()`后`mysql_query()`看看为什么不，检查输出，并修复它告诉你的任何内容。

（另外，将有关输入验证/准备好的语句/mysqli 的标准警告作为给定的）

# java - 在 java 中使用代理打开网站的套接字

> ID：12882463
> 
> 赞同：0
> 
> 时间：2012-10-14T13:00:43.587
> 
> 标签：java

我有服务器作为代理（中介）拒绝某些网站。我设置了运行我的程序的机器的 IP 地址和端口号（例如 127.0.0.1:8080）。我打开了一个 TCP 套接字并监听来自浏览器的请求。当我尝试进入被禁止的网站时，我的浏览器会显示错误页面。但是如果我想进入的网页没有被禁止，我应该在我的浏览器上显示它。我无法完成最后一部分。我无法访问不受限制的网站。我想我应该使用另一个带有端口 80 的套接字，但我不确定。

这就是我检查网站是否被禁止的方式。如果被禁止，则返回错误页面。否则它应该显示网页。

```
import java.io.*;

import java.net.InetAddress;
import java.net.Socket;
import java.util.Date;

public class ClientHandler2 extends Thread {

private Socket clientSocket = null;
private DataOutputStream out = null;
private BufferedReader in = null;
//  private Socket mySocket = null;

public ClientHandler2(Socket clientSocket) {
    this.clientSocket = clientSocket;
}

public void run() {

    try {
        //create input-output streams
    //  in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));
        out = new DataOutputStream(clientSocket.getOutputStream());

        ReqHdr req = new ReqHdr();
        RepHdr rep = new RepHdr();
        in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

        if(req.parse(clientSocket.getInputStream())){
            MyReader myreader = new MyReader();
            if(myreader.IsBanned(req.url ) == true ){

                InetAddress addr = InetAddress.getLocalHost();
                String IP = addr.getHostAddress();
                Date date = new Date();
                String datestr = date.toString();
                 try{
                      // Create file 
                      FileWriter fstream = new FileWriter("log.txt",true);
                      BufferedWriter log = new BufferedWriter(fstream);
                      log.append("Thread with id: " + this.getId() + " Banned URL:  " + req.url + " IP: " + IP + " Access Time/Date: " + datestr + "\n");
                      //Close the output stream
                      log.close();
                      }catch (Exception e){//Catch exception if any
                      System.err.println("Error: " + e.getMessage());
                      }

                out.writeUTF((rep.formForbidden()));

            }
            else{
                System.out.println("Thread with id " + this.getId() + " URL: " + req.url);

            }
        }
        else{
            System.out.println("error");
        }

    } catch (IOException e) {
        e.printStackTrace();
    }

}

} 
```

每当我尝试进入网站时，我都会在她那里创建一个新线程。

```
import java.io.IOException;
import java.net.*;

public class WebPolice {

public static void main(String args[])
{
    //create server socket
    ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(8080);
        System.out.print("WebPolice listening clients over port 8080...");
    } catch (IOException e1) {
        e1.printStackTrace();
    }

    //at each iteration of the loop, accept new incoming connection and serve the client
    while (true)
    {
        //create client socket
        Socket clientSocket = null;
        try {

            //accept incoming connection request
            clientSocket = serverSocket.accept();
            System.out.println("New client connected!");
        } catch (IOException e) {
            e.printStackTrace();
        }

        //create new thread object for the new coming client
        //note that ClientHandler extends Thread
        ClientHandler2 clientHandler = new ClientHandler2(clientSocket);

        //new power for next client

        //run the Thread which deals with the new coming client
        clientHandler.start();

    }
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:07:06.583

```
 System.out.println("Thread with id " + this.getId() + " URL: " + req.url); 
```

在上面的块中，使用 HttpURLConnection 打开到 url 的连接，并将新连接的输出流重定向到客户端的输入流。

您需要分别处理 POST、DELETE 和其他 http 操作。

# php - 根据用户输入值使用php和表单从mysql中检索所有数据

> ID：12882469
> 
> 赞同：0
> 
> 时间：2012-10-14T13:01:22.407
> 
> 标签：php, mysql, forms

我有一个这种形式的数据库

```
 IDNo             Column1           Column2         .............    
  12341
  12342
  12343  
    ....... 
```

我正在向用户 n 提供一个表单，告诉用户在表单中输入 IDNO，以便用户可以检索相应的 idno 信息

如果用户在表单中输入 12341 并提交，则输出将是 12341 的信息，即 IDNO CUMN1 COLUMN2 ...... 12341 213 1231 ......

这将是输出，为此我使用以下代码

```
<form id="form" action="" method="post">
<td><p align="center"> Hallticket Number : <input type="text" name="id" id="id" maxlength="10"></p></td>
<input type="submit" id="submit" class='btnExample' value="Click here to get your Result">
</form>
<?PHP

$user_name = "admin";
$password = "123456";
$database = "exam";
$server = "localhost";
$db_handle = mysql_connect($server, $user_name, $password);
$db_found = mysql_select_db($database, $db_handle);

if ($db_found) {
$id = mysql_real_escape_string($_POST['id']);
$SQL = "SELECT * FROM jbit WHERE htno='$id'";
$result = mysql_query($SQL);
echo "
<center><table id='mytable' cellspacing='0'  border=3 align=center>
<tr>
<TH scope='col'>SUBJECT CODE</TH>
<TH scope='col'>SUBJECT</TH>
<TH scope='col'>INTERNAL MARKS</TH>
<TH scope='col'>EXTERNAL MARKS</TH>
<TH scope='col'>TOTAL MARKS</TH>
<TH scope='col'>CREDITS</TH>
<TH scope='col'>RESULT</TH>
</tr><center>";          

while ($db_field = mysql_fetch_assoc($result)) {

echo "<tr>";
echo "<td align=center>" . $db_field['subjectcode'] . "</td>";
if ($db_field['credits']=="0")
{
echo "<td align=center><font color='red'>" . $db_field['subject'] . "</font></td>";
} else {
echo "<td align=center>" . $db_field['subject'] . "</td>";
}
echo "<td align=center>" . $db_field['im'] . "</td>";
echo "<td align=center>" . $db_field['em'] . "</td>";
echo "<td align=center>" . $db_field['tm'] . "</td>";
echo "<td align=center>" . $db_field['credits'] . "</td>";
if ($db_field['credits']>"0")
{
echo "<td align=center> <font color='green'><b> PASS </b></font></td>";
} else {
echo "<td align=center> <font color='red'><b> FAIL </b></font> </td>";
}
echo "</tr>";

} 
```

现在我想要的是，如果我的用户在表单中输入 1234 而不是 12341 或 12342 并提交

那么上面的代码不执行输出或显示无效的idno

但我想要的是，如果用户输入 1234 而不是 12341 或 12342 反之亦然或 123 而不是 12341 或 12342 反之亦然，那么输出应该是所有 IDNO 的所有信息都以 1234 或 123 开头，即

如果用户在表单中仅输入 12 或 1 或 123 或 1234 并提交，则输出不应为无效 idno 或空，它应显示所有以用户提交的值开头的列 idno ehich

首先输出应该是

```
 IDNO
  12341
  12342
  12343 with links 
```

如果用户点击 12341 那么输出应该是

```
 IDNO          COLUMN1            Column2            ...
12341            321                323             .... 
```

应该做什么？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:09:50.373

您的 sql 应使用`LIKE`运算符：[LIKE 运算符](http://dev.mysql.com/doc/refman/5.0/en/string-comparison-functions.html)

```
$SQL = "SELECT * FROM jbit WHERE htno LIKE '$id%'"; 
```

那应该给你

```
$SQL = "SELECT * FROM jbit WHERE htno LIKE '1234%'"; 
```

# java - 我想使用 java servlet 进行 openid 登录

> ID：12882477
> 
> 赞同：1
> 
> 时间：2012-10-14T13:02:12.437
> 
> 标签：java, servlets, openid

我想为我的网站创建一个开放 ID 登录，例如 Stack Overflow。

登录可能包含 3 或 4 个可供选择的选项，例如 Facebook、Google 等。

我正在使用 java (servlet) 进行服务器端脚本。谁能给我一个相同的方向或起点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:27:18.273

我认为这个问题并不像其他问题那样无效，因为许多以前的答案已经过时了，我希望看到一些人对此最佳实践的看法。

我自己可能会去[http://agorava.org/](http://agorava.org/)如果有人想做更多然后登录。这似乎是一个有前途的项目，我预测 CDI 的前景一片光明。

但是对于openid，我很好奇其他人的经历。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:04:51.153

一个快速的谷歌搜索产生了这个：[https](https://developers.google.com/accounts/docs/OpenID) ://developers.google.com/accounts/docs/OpenID 和这个：http: [//developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)和[http://code.google.com/ p/openid4java/](http://code.google.com/p/openid4java/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T13:06:56.980

这可能会帮助你。寻找 java 库

[http://openid.net/developers/libraries/](http://openid.net/developers/libraries/)

# awk - AWK-merge files based on key

> ID：12882478
> 
> 赞同：0
> 
> 时间：2012-10-14T13:02:15.137
> 
> 标签：awk

I have two files:

**1.txt**

```
jeden:AA 
dwa:BB 
trzy:CC 
cztery:DD 
piec:EE 
szesc:FF 
ttttttt:to 
siedem:GG 
osiem:HH 
dziewiec:II 
dziesiec:JJ 
```

**2.txt**

```
JJ:jola 
EE:ela 
BB:baska 
FF:flora 
II:irga 
AA:adam 
to:llll 
DD:darek 
CC:celina 
HH:hela 
GG:gosia 
```

I want to merge the two files based on key. Expected result:

```
jeden: adam 
dwa: baska 
trzy: celina 
cztery: darek 
piec: ela 
szesc: flora 
ttttttt: llll
siedem: gosia 
osiem: hela 
dziewiec: irga 
dziesiec: jola 
```

I tried this:

```
$ awk -F ":" '{getline a < "2.txt" split(a, b, ":"); if($2==b[1]) print $1":", b[2]}' 1.txt 
ttttttt: llll 
```

Thank you for your help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:12:16.097

One way:

```
awk '
    BEGIN { 
        FS = "[: ]*"; 
        OFS = ":"; 
    } 
    FNR == NR { 
        keys[ $1 ] = $2; 
        next; 
    } 
    { 
        printf "%s%s %s\n", $1, OFS, ($2 in keys) ? keys[ $2 ] : "???"; 
    }
' 2.txt 1.txt 
```

That yields:

```
jeden: adam
dwa: baska
trzy: celina
cztery: darek
piec: ela
szesc: flora
ttttttt: llll
siedem: gosia
osiem: hela
dziewiec: irga
dziesiec: jola 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:11:09.587

You can do this in multiple steps.

```
$ gawk -F: '{print $2 " " $1}' 1.txt | sort > 1.1.txt
$ gawk -F: '{print $1 " " $2}' 2.txt | sort > 2.1.txt
$ paste -d' ' 1.1.txt 2.1.txt | gawk '{print $2 ": " $4}'
jeden: adam
dwa: baska
trzy: celina
cztery: darek
piec: ela
szesc: flora
siedem: gosia
osiem: hela
dziewiec: irga
dziesiec: jola
ttttttt: llll 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-17T00:10:11.757

I would use coreutils `join` for this:

```
join -t: -1 2 -2 1 -o 1.1 2.2 \
  <(sort -t: -k2,2 1.txt | sed -r 's/\s+$//') \
  <(sort           2.txt | sed -r 's/\s+$//') 
```

Result:

```
jeden:adam
dwa:baska
trzy:celina
cztery:darek
piec:ela
szesc:flora
siedem:gosia
osiem:hela
dziewiec:irga
dziesiec:jola
ttttttt:llll 
```

If you really want the extra space after colon append `| sed 's/:/& /'` to the command

# objective-c - 监控可可触摸中的当前 dB 级别 (iPhone)

> ID：12882481
> 
> 赞同：1
> 
> 时间：2012-10-14T13:02:20.673
> 
> 标签：objective-c, cocoa-touch

所以基本上我只想用主要是客观的 c 代码来监控 iPhone 中的麦克风拾取的当前 dB 水平。我在谷歌上环顾四周，看起来您需要使用 AudioQueues 进行一些“核心”c 编程才能使其正常工作。我不擅长 C 编码，所以下面的代码是我尝试使用最低限度的 C 编码来获得可以发送回我温暖而熟悉的 Objective-C 领域的结果。问题是，我似乎无法创建 AudioQueue ，我返回的“状态”是 -50，即“未知错误”。

我实际上是在我的 viewDidLoad 中设置音频队列并在其上方声明 ac 回调，并从回调中获取当前的 dB 值并将其发送回目标 c 土地，但回调永远不会被调用，因为 AudioQueue 不是正确创建，我不知道为什么。任何人都能够看到我做错了什么，或者将我指向这个音频内容的目标 c 包装器的方向。干杯。

```
@interface ViewController ()
{
    AudioQueueRef mQueue;
}

- (void)receivedSoundOfPower:(Float32)power;

@end

@implementation ViewController

void MyInputBufferHandler(  void *                              inUserData,
                                      AudioQueueRef                     inAQ,
                                      AudioQueueBufferRef                   inBuffer,
                                      const AudioTimeStamp *                inStartTime,
                                      UInt32                                inNumPackets,
                                      const AudioStreamPacketDescription*   inPacketDesc)
{
    ViewController *self = (__bridge id)inUserData;

    AudioQueueLevelMeterState meters[1];
    UInt32 dlen = sizeof(meters);
    OSStatus status = AudioQueueGetProperty(inAQ,kAudioQueueProperty_CurrentLevelMeterDB,meters,&dlen);
    if (status == 0)
    {
        Float32 peakPower = meters[0].mPeakPower;
        [self receivedSoundOfPower:peakPower];
    }
}

- (void)receivedSoundOfPower:(Float32)power
{
    NSLog(@"%f", power);
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    OSStatus status =AudioQueueNewInput(kAudioStreamAnyRate,
                                MyInputBufferHandler,
                                (__bridge void *)(self),
                                NULL,
                                NULL,
                                0,
                                &(mQueue));

    NSLog(@"%ld", status);

    // Turn on level metering (iOS 2.0 and later)
    UInt32 on = 1;
    AudioQueueSetProperty(mQueue,kAudioQueueProperty_EnableLevelMetering,&on,sizeof(on));

    // Do any additional setup after loading the view, typically from a nib.
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-14T13:14:51.243

您不需要使用音频队列来获取数据库值。你可以做更多类似的事情：

```
- (void)setup {
    // record audio to /dev/null
    NSURL *url = [NSURL fileURLWithPath:@"/dev/null"];

    // some settings
    NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithFloat: 44100.0],                 AVSampleRateKey,
                              [NSNumber numberWithInt: kAudioFormatAppleLossless], AVFormatIDKey,
                              [NSNumber numberWithInt: 2],                         AVNumberOfChannelsKey,
                              [NSNumber numberWithInt: AVAudioQualityMax],         AVEncoderAudioQualityKey,
                              nil];

    // create a AVAudioRecorder
    NSError *error;
    recorder = [[AVAudioRecorder alloc] initWithURL:url settings:settings error:&error];

    if (recorder) {
        [recorder prepareToRecord];
        recorder.meteringEnabled = YES;
        [recorder record];
        levelTimer = [NSTimer scheduledTimerWithTimeInterval:0.01f target:self selector: @selector(levelTimerCallback:) userInfo: nil repeats: YES];
    }
}

- (void)levelTimerCallback:(NSTimer *)timer {
    [recorder updateMeters];

    // here is the DB!
    float peakDecebels =  [recorder peakPowerForChannel:1];
            float avaeragePower = [recorder averagePowerForChannel:1];
} 
```

此外，如果您想访问音频数据，这个库非常棒：[http ://alexbw.github.com/novocaine/](http://alexbw.github.com/novocaine/)

# php - PHP cURL 获取文件，在 Javascript 中使用

> ID：12882485
> 
> 赞同：1
> 
> 时间：2012-10-14T13:02:56.430
> 
> 标签：php, javascript, curl

我想写一个小的 php 程序，它通过 cURL 从远程服务器获取 csv 文件。到目前为止它可以工作，现在我想在 JS 中使用这个 csv 文件。

**将此文件从 php 提供给 JS 的最佳方法是什么？**

在 php 服务器上创建 tmp 文件并在 JS 中使用该文件的链接？有没有更聪明的方法？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:12:50.957

如果保证页面上需要该文件，则最好在页面加载时直接将内容添加到页面中：在隐藏的 DOM 元素中，或者最有可能作为 JavaScript 变量。如果您已经拥有该文件，那么最好的选择可能是将其转换为更接近您期望 JavaScript 处理的形式，很可能是 JSON 结构。可选地，如果它很大，您最好使用逻辑 Javascript 代码来最大限度地减少在客户端完成的额外处理。无论哪种方式，这都将消除对额外请求的需要，以及不太重要的延迟处理。

如果*不能*保证使用该文件并且 PHP curl 用作具有未知输入的反向代理之类的东西，那么公开一个端点并将其 AJAX 化可能更有意义。如果您使用的是 RDBMS，那么在数据库中的临时表中使用某种形式的 CLOB 字段可能更有意义，但是根据您的需要，临时文件或只是一个内存对象将起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:15:34.863

您不需要在服务器上创建临时文件，您可以在 javascript 中使用简单的 php

```
<script>alert("<?php echo $curlresult;?>")</script> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T13:24:14.810

我会使用 AJAX 调用 PHP 文件，然后使用 cURL 来获取 CSV。

如果您选择直接使用 PHP 加载 DOM 中的文件，则在 cURL 操作完成之前不会出现页面。根据经验，我注意到如果一个页面需要 30 秒才能加载，最好显示一个“正在加载...”的页面，而不是显示一个空白页面 29 秒并在最后一秒显示所有内容。

顺便说一句，使用 cURL 并使用 AJAX 调用也是一种规避同域 AJAX 的方法。

我不建议在 JS 中使用 PHP 代码，因为如果您以后选择这样做，它将消除有效缓存/缩小 JS 的可能性。此外，它并不漂亮。

我会怎么做；

*   使用 AJAX 调用 PHP 文件
*   使用 cURL 获取文件
*   以 JSON 格式输出其数据，它可能看起来像这样

    "{"1":{"col1":"hey","col2":"hey2"},"2":{"col1":"heyhey","col2":"heyhey2"}}"

*   Display data in a table, probably using dataTables or something equivalent.

# image - 中心 PHP 拉取图片

> ID：12882488
> 
> 赞同：0
> 
> 时间：2012-10-14T13:03:32.390
> 
> 标签：image, iframe

我有一个 iframe；

那指向一个 .php 文件

我需要回显的图像在 iframe 中居中。所有图像的宽度均为 960 像素，但 iframe 宽度需要为 100%，因为它并不总是那么宽（它所在的某些页面可能是 600 像素宽）。

任何建议将不胜感激。

PHP 无标题文档

```
/* ~~ Element/tag selectors ~~ */
ul, ol, dl { /* Due to variations between browsers, it's best practices to zero padding     
and margin on lists. For consistency, you can either specify the amounts you want here,     
or on the list items (LI, DT, DD) they contain. Remember that what you do here will     
cascade to the .nav list unless you write a more specific selector. */
    padding: 0;
    margin: 0;
}
h1, h2, h3, h4, h5, h6, p {
    margin-top: 0;   /* removing the top margin gets around an issue where margins can     
escape from their containing div. The remaining bottom margin will hold it away from     
any elements that follow. */
    padding-right: 15px;
    padding-left: 15px; /* adding the padding to the sides of the elements within the     
divs, instead of the divs themselves, gets rid of any box model math. A nested div with 
side padding can also be used as an alternate method. */
}
a img { /* this selector removes the default blue border displayed in some browsers     
around an image when it is surrounded by a link */
    border: none;
}
/* ~~ Styling for your site's links must remain in this order - including the group of          

selectors that create the hover effect. ~~ */
a:link {
    color: #42413C;
    text-decoration: underline; /* unless you style your links to look extremely     
unique, it's best to provide underlines for quick visual identification */
}

a:visited {
    color: #6E6C64;
    text-decoration: underline;
}
a:hover, a:active, a:focus { /* this group of selectors will give a keyboard navigator     
the same hover experience as the person using a mouse. */
    text-decoration: none;
}

/* ~~ this fixed width container surrounds all other elements ~~ */
.container {
    width: 100%; /* the auto value on the sides, coupled with the width, centers the     
layout */
    height: 100px;
    margin-top: 0;
    margin-right: auto;
    margin-bottom: 0;
    margin-left: auto;
}

/* ~~ This is the layout information. ~~ 

1) Padding is only placed on the top and/or bottom of the div. The elements within this     
div have padding on their sides. This saves you from any "box model math". Keep in 
mind, if you add any side padding or border to the div itself, it will be added to the     
width you define to create the *total* width. You may also choose to remove the padding     
on the element in the div and place a second div within it with no width and the     
padding necessary for your design.

*/
.content {
    padding: 10px 0;
    text-align: center;
}

/* ~~ miscellaneous float/clear classes ~~ */
.fltrt {  /* this class can be used to float an element right in your page. The floated     
element must precede the element it should be next to on the page. */
    float: right;
    margin-left: 8px;
}
.fltlft { /* this class can be used to float an element left in your page. The floated     
element must precede the element it should be next to on the page. */
    float: left;
    margin-right: 8px;
}
.clearfloat { /* this class can be placed on a <br /> or empty div as the final element 
following the last floated div (within the #container) if the overflow:hidden on the 
.container is removed */
    clear:both;
    height:0;
    font-size: 1px;
    line-height: 0px;
}    
    -->
</style></head>

<body>

<div class="container">
  <div class="content">
    <?php
//Sample Database Connection Syntax for PHP and MySQL.
//Connect To Database
$hostname="localhost";
$username="";
$password="";
$dbname="carbonmarketing";
$usertable="ClientList";
$advertfooter = "advertfooter";
mysql_connect($hostname,$username, $password) or die ("    
<html>%MINIFYHTML4333ddb1f6ba50276851b9f9854a5c817%</html>");
mysql_select_db($dbname);
# Check If Record Exists
$query = "SELECT * FROM $usertable
          WHERE region IN ('WW','EU','UK')          
          ORDER BY RAND() LIMIT 1";
$result = mysql_query($query);
if($result)
{
while($row = mysql_fetch_array($result))
{
$advertfooter = $row["$advertfooter"];
echo "$advertfooter";

}
}
?>
  </div>
</div>
</body>
</html> 
```

框架

```
<iframe src="http://www.CARBONYZED.com/Marketing/UK-Advert_Footer.php" 
style="border:0px  hidden;" name="CARBONMarketingFooter" scrolling="no" frameborder="0" 
marginheight="0px" marginwidth="0px" height="100px" width="100%"></iframe> 
```

谢谢

亨利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:23:15.427

肮脏的方式

```
.content a {
    position: absolute;
    left: 50%;
    margin-left: -480px;
} 
```

# c++ - 如何减少模板繁重的 C++ 代码的输出大小？

> ID：12882489
> 
> 赞同：13
> 
> 时间：2012-10-14T13:03:32.870
> 
> 标签：c++, templates, boost-spirit

我有一个大问题。我有一个通用库，在我的项目中使用。该库大量使用`boost.spirit`和`boost.fusion`. 不幸的是，图书馆大约是。700Mb 大小。所有的`boost.spirit`-heavy 代码都被使用并且运行良好。可以采取哪些步骤来减小其输出大小？是否有工具可以帮助确定哪些模板实例化浪费了大部分空间？

起初，我决定将所有精神感知代码移动到 cpp 文件中。其次，我将尝试不同的编译器标志来优化大小。我不知道还能做什么。

**更新（详情）**

我正在使用 GNU 工具链。庞大的库实际上是一个静态库。使用这个 700Mb 库的可执行文件大小为 200Mb。至少有一半的代码在 *.h 文件中。一些`boost.spirit`语法（非常重的模板）也位于 *.h 文件中。

干杯!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T15:25:32.097

将精神感知代码移动到`.cpp`文件是一个很好的第一步，尽管您提到头文件中有精神语法，但它可能不完整。

1.  确保没有任何语法/规则被导出到库之外。如果您有典型的`include`/`src`目录，则在目录中移动这些文件（即使是标题）`src`。

2.  将所有这些符号标记为库内部。根本不应该从图书馆外访问它们。根据您的编译器，有特定的编译指示/属性，在 gcc 查找[可见性属性](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html#Function-Attributes): `__attribute__ ((visibility ("internal")))`。这有助于编译器相应地优化它们，特别是编译器可能会发出函数的代码，即使它在给定的调用站点内联它，以防万一这个函数地址被占用。然而，对于内部可见性，由于它知道代码不会离开对象，它可能会忽略函数。

3.  我似乎记得有一个标志可以融合相同的功能体，但似乎再也找不到了……

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-15T08:35:59.060

`--ffunction-sections`将每个函数放在自己的段中。本身没有用，但链接器可以删除未使用的部分`--gc-sections`。现在没有`--ffunction-sections`这个，只有在整个源文件未被使用时才有效，即具有疯狂的粒度。

显然，您需要 Matthieu 提到的可见性属性，否则库中的所有函数都因可见而被“使用”。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T13:42:19.297

几点建议：

*   在可能的情况下，尝试重用相同的模板实例化（作为一个简单且人为的示例，a`std::vector<int>`和`std::vector<float>`将具有相同的内部结构，并且都可以将其元素数据视为不透明的 4 字节 blob，因此可以委托给另一个, 并且只是作为一个东西包装器，它只是转换回正确的类型，因此向量的内部只需要为一种类型实例化，而不是两种。

*   尝试不同的编译器。一些编译器在不会影响程序语义的情况下重用相同的模板实例化，而另一些则更为保守。

*   密切关注从库中导出的内容。链接器可以删除未导出且未在内部引用的符号。（当然，如果您正在构建一个静态库，则在将其链接到可执行文件之前它不会启动。要减小库本身的大小，您可以尝试将其设为动态库）

但最终，听起来您可能只需要使用模板较少的库。（或者写一个比你现在更简单的解析器）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T13:46:55.547

这里已经讨论过：[为什么我的 C++ 输出可执行文件这么大？](https://stackoverflow.com/questions/2839172/why-my-c-output-executable-is-so-big)

基本上，寻找调试符号、链接依赖的顺序、优化等等......

# java - 从edittext获取整数值

> ID：12882490
> 
> 赞同：1
> 
> 时间：2012-10-14T13:03:36.230
> 
> 标签：java, android, integer, android-edittext

当我尝试运行下面的代码时，我的程序已经停止。我希望这段代码从中获取价值，`edittext`但它没有像我预期的那样工作。我究竟做错了什么？

```
public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button sum = (Button) findViewById(R.id.button1);
    Button cancel = (Button) findViewById(R.id.button2);

    final EditText from = (EditText) findViewById(R.id.editText1);
    final EditText upto = (EditText) findViewById(R.id.editText2);
    final EditText runsum = (EditText) findViewById(R.id.editText3);

    final int f = Integer.parseInt(from.getText().toString());
    final int u = Integer.parseInt(upto.getText().toString());

}

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

这是我的 LogCat 抱歉搞砸了：/

```
08-28 19:34:44.241: E/Trace(3346): error opening trace file: No such file or directory (2)
08-28 19:34:44.780: D/AndroidRuntime(3346): Shutting down VM
08-28 19:34:44.780: W/dalvikvm(3346): threadid=1: thread exiting with uncaught exception(group=0x40a13300)
08-28 19:34:44.790: E/AndroidRuntime(3346): FATAL EXCEPTION: main
08-28 19:34:44.790: E/AndroidRuntime(3346): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.project/com.example.project.MainActivity}: java.lang.NumberFormatException: Invalid int: ""
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.os.Looper.loop(Looper.java:137)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at java.lang.reflect.Method.invokeNative(Native Method)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at java.lang.reflect.Method.invoke(Method.java:511)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at dalvik.system.NativeStart.main(Native Method)
08-28 19:34:44.790: E/AndroidRuntime(3346): Caused by: java.lang.NumberFormatException: Invalid int: ""
08-28 19:34:44.790: E/AndroidRuntime(3346):     at java.lang.Integer.invalidInt(Integer.java:138)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at java.lang.Integer.parseInt(Integer.java:359)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at java.lang.Integer.parseInt(Integer.java:332)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at com.example.project.MainActivity.onCreate(MainActivity.java:25)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.app.Activity.performCreate(Activity.java:5008)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
08-28 19:34:44.790: E/AndroidRuntime(3346):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
08-28 19:34:44.790: E/AndroidRuntime(3346):     ... 11 more
08-28 19:35:10.560: E/Trace(3394): error opening trace file: No such file or directory (2)
08-28 19:35:11.629: D/gralloc_goldfish(3394): Emulator without GPU emulation detected.
08-28 19:48:19.295: I/Choreographer(3394): Skipped 41 frames!  The application may be doing too much work on its main thread. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:15:58.677

问题似乎是当 Activity 被带到前面时，`EditText`. 整数解析器不知道如何解析空字符串，所以抛出异常。

您需要`EditText`在解析之前检查其中是否存在文本

```
final int f = -1; // or other invalid value
if (from.getText().toString().length() > 0)
    f = Integer.parseInt(from.getText().toString()); 
```

同样对于其他`EditText`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:25:19.047

正如您从 Logcat 中看到的那样：

> 08-28 19:34:44.790: E/AndroidRuntime(3346): 由: java.lang.NumberFormatException: Invalid int: ""

有一个空输入，无法转换为`int`.

尝试验证用户输入。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T15:18:27.000

**-**请检查 的值`EditText`，**是否为** `integer` **有效值**。

**试试这个代码：**

```
int i = 0;

try{

  i = Integer.parseInt(from.getText().toString());

}catch(NumberFormatException ex){

  System.out.println("Value at TextView is not a valid integer");

} 
```

# c - ac宏中的`.`和`*`是什么意思？

> ID：12882491
> 
> 赞同：2
> 
> 时间：2012-10-14T13:03:46.240
> 
> 标签：c, linux, macros, kernel, ld

从[这里开始](http://www.cs.fsu.edu/~baker/devices/lxr/http/source/linux/include/asm-generic/vmlinux.lds.h#L583)，ac宏中的含义`.`和含义是什么？`*`

```
583 #define INITCALLS                                                       \
584         *(.initcallearly.init)                                          \
585         VMLINUX_SYMBOL(__early_initcall_end) = .;                       \
586         *(.initcall0.init)                                              \
587         *(.initcall0s.init)                                             \
588         *(.initcall1.init)                                              \
589         *(.initcall1s.init)                                             \
590         *(.initcall2.init)                                              \
591         *(.initcall2s.init)                                             \
592         *(.initcall3.init)                                              \
593         *(.initcall3s.init)                                             \
594         *(.initcall4.init)                                              \
595         *(.initcall4s.init)                                             \
596         *(.initcall5.init)                                              \
597         *(.initcall5s.init)                                             \
598         *(.initcallrootfs.init)                                         \
599         *(.initcall6.init)                                              \
600         *(.initcall6s.init)                                             \
601         *(.initcall7.init)                                              \
602         *(.initcall7s.init)
603 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T13:32:37.080

它是一个链接器脚本。节的合并和放置由链接器完成。程序员可以通过链接描述文件控制这些部分的合并方式以及它们在内存中的位置。你提到的文件就是这样做的。

.(dot) 指的是链接部分，并且使用通配符 * 而不是单独指定包含相同命名链接部分的多个文件名。

参考：http: [//sources.redhat.com/binutils/docs-2.10/ld_3.html](http://sources.redhat.com/binutils/docs-2.10/ld_3.html)

# css - 使用 CSS 为溢出区域自定义样式的滚动条

> ID：12882494
> 
> 赞同：1
> 
> 时间：2012-10-14T13:03:55.133
> 
> 标签：css, scrollbar

使用 CSS 将网站上的滚动条设置为自定义样式的最有效方法是什么？

我说的是带有溢出的DIV中的滚动条：滚动；设置而不是在浏览器窗口上可能使用 JPG 作为滚动条设计。

希望这能解释我想要实现的目标。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:09:40.700

滚动条是操作系统的一个组件，所以浏览器不会给你任何样式的自由。最好的选择是使用 Javascript，例如，有一些很好的自定义滚动条库，[Tiny Scrollbar](http://baijs.nl/tinyscrollbar/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:13:31.173

目前，您只能在 webkit 浏览器上使用纯 CSS 重绘滚动条：

*   [http://css-tricks.com/custom-scrollbars-in-webkit/](http://css-tricks.com/custom-scrollbars-in-webkit/)

对于其他浏览器，您必须使用变通方法，使用 javascript 来模拟滚动效果。一些资源：

*   [http://slodive.com/web-development/jquery-scroll/](http://slodive.com/web-development/jquery-scroll/)
*   [http://www.noupe.com/javascript/30-javascriptajax-techniques-for-sliders-scrollers-and-scrollbars.html](http://www.noupe.com/javascript/30-javascriptajax-techniques-for-sliders-scrollers-and-scrollbars.html)
*   [http://www.script-tutorials.com/custom-scrollbars-cross-browser-solution/](http://www.script-tutorials.com/custom-scrollbars-cross-browser-solution/)
*   [http://www.dynamicdrive.com/dynamicindex17/jquerycustomscrollbar/index.htm](http://www.dynamicdrive.com/dynamicindex17/jquerycustomscrollbar/index.htm)

# javascript - 动态构建服务器返回的复杂 HTML 元素的最佳方法

> ID：12882502
> 
> 赞同：1
> 
> 时间：2012-10-14T13:04:41.623
> 
> 标签：javascript, jquery, html, ajax

我有一个`<div>`应该在鼠标单击时填充一个表单。

我通过将请求发送到服务器和服务器将表单作为简单文本返回给我，为此排列了 jQuery。但是，如果我使用`innerHTML`将内容添加到将可以访问说，jQuery 的验证插件来验证服务器发送并插入到`<div>`.

我知道手动创建每个 DOM 元素的方法，但是表单太复杂而无法手动创建！

哪种方法最适合我的情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:10:13.837

以验证插件为例，一旦新的 html 存在，您只需在 ajax 的成功回调中调用该插件。

`load()`使用jQuery ajax 快捷方式的简化版

```
$('#contentDiv').load('formUrl.php',function(){
    /* form now exists, can add validation*/
    $('#myNewForm').validate( /* ootions object */);

}) 
```

# android - 如何在 windows 7 pro 上设置 android 开发

> ID：12882505
> 
> 赞同：2
> 
> 时间：2012-10-14T13:05:04.647
> 
> 标签：android

对 Android 感兴趣，但在开发中是新手。我正在使用 Windows 7 PRO 进行 Android 应用程序开发。我做了以下，我遇到了这个错误消息：未能加载 JNI 共享库

我采取了以下步骤：

1.  在 c:\ Program files (x86) 中创建一个名称为 AndroidSDK 的文件夹

2.  *   [从http://developer.android.com/sdk/index.html](http://developer.android.com/sdk/index.html)下载 Android SDK 并运行 Android Installer
    *   使用建议的文件夹名称 Android SDK 并将其放在 AndroidSDK 中的 Program files (x86)
3.  运行 SDK 管理器并安装所有必需的包

4.  [从http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)下载 Eclipse Classic 4.2.1 。

    *   提取文件后，复制并粘贴 AndroidSDK 中的 Eclipse 文件夹（此文件夹位于 C:\Program 文件 (x86) 中）
5.  [从http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7u7-downloads-1836413.html)尝试了 JDK 6 和 JDK 7

    *   将其安装在 Enclipse 文件夹下：
        双击 Eclipse 应用程序 ico 时，出现此错误消息 msg failed to load the JNI shared library

你能帮我如何在 Windows 7 pro 上设置 Andriod 开发吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:14:20.927

确保您的 JDK 是 64 并且您的 Eclipse 是 64 位。

[无法加载 JNI 共享库 (JDK)](https://stackoverflow.com/questions/7352493/failed-to-load-the-jni-shared-library-jdk)

# c++ - 给定一个 N 个数的序列，提取长度为 K 且范围小于 R 的序列数？

> ID：12882511
> 
> 赞同：1
> 
> 时间：2012-10-14T13:05:52.680
> 
> 标签：c++, algorithm, dynamic-programming

有一个整数数组，我必须找到 K 长度的序列数，其范围（`max - min`子序列的）小于等于 R 。长度为 k 的序列数与长度为 K 的序列数之间是否存在关系？ 1 ? 我正在尝试解决关于 SPOJ 的练习题。我不想要完整的解决方案，只需指出正确的方向/建议/提示。

我正在考虑使用类似双端队列的结构来将数组的最小和最大元素保持在某个索引。但是，当 k 更接近 n 时，这将变得接近 o(n*n) 太慢，理想情况下查看 O(n) 解决方案或 O(n * log n) 解决方案。如果我可以使用递归/迭代关系计算 K=1 到 K=N 所需的值，那将是最好的，因为可能再次需要相同的答案

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:27:03.897

这是双端队列的完美应用。[在这里](https://stackoverflow.com/questions/12598260/finding-consecutively-increasing-subsequence-stored-in-a-haphazard-manner/12598726#12598726)查看我的答案。

您应该能够根据您的需求进行调整，几乎无需更改，从而为您提供`O(N)`解决方案。

# javascript - 如何使用jQuery按名称检索值数组？

> ID：12882513
> 
> 赞同：0
> 
> 时间：2012-10-14T13:06:38.530
> 
> 标签：javascript, jquery, html, forms

我有一个如下的 HTML。请告诉我如何在 jQuery 中检索值“任务”数组。

```
<div class="column1">
<input class="task_name" type="text" placeholder="Enter task name.." value="" name="task[0][name]">
</div>
<div class="column2">
<select class="task_ppl_required" name="task[0][number]">
    <option selected="selected">1</option>
    <option>2</option>
</select>
<input class="task_id" type="hidden" value="0" name="task[0][guid]">
</div>
<div class="column1">
<input class="task_name" type="text" placeholder="Enter task name.." value="" name="task[2][name]">
</div>
<div class="column2">
<select class="volunteer_task_ppl_required" name="task[2][number]" value="1">
<option selected="selected">1</option>
<option>2</option>
</select>
<input class="task_id" type="hidden" value="0" name="task[2][guid]">
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:22:31.537

```
function getValues(form) {
    var vals = {};
    form.find("[name]").each(function() {
        var names = this.name.split(/[[\]]+/);
        if (names[names.length-1] == "") names.pop();
        var obj = vals;
        for (var i=0; i<names.length-1; i++) {
            if (! (names[i] in obj))
                obj[names[i]] = {};
            obj = obj[names[i]];
        }
        obj[names[i]] = this.value;
    });
    return vals;
} 
```

而不是`.find("[name]")`你也可以只使用[`.serializeArray()`](http://api.jquery.com/serializeArray/)，这可能更准确并允许更多输入。现在你可以

```
> getValues($myForm).task[0]
{number: "1", guid: "0"} 
```

（[jsfiddle.net 上](http://jsfiddle.net/vQ5FB/)的演示，使用 Array.reduce[更复杂）](http://jsfiddle.net/vQ5FB/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:29:51.430

数组近似在 PHP 中运行良好，您在 $_POST 变量中接收表单值，如果语法匹配（如您在示例中的那样），他将使用元素构造一个数组。

您可以使用 jQuery [serializeArray](http://api.jquery.com/serializeArray/)。从网站：

> .serializeArray() 方法创建一个 JavaScript 对象数组，准备好编码为 JSON 字符串。它对表示一组表单元素的 jQuery 对象进行操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T13:38:21.697

如果您想要表单的所有值以发送到服务器，您可以简单地使用 jQuery`serialize()`方法

```
var formVals= $('##myForm').serialize(); 
```

这通过以下方式使用 jQuery AJAX 发送到服务器：

```
$.post( url, formVals, function(){/* success code*/}); 
```

参考： [http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# ruby-on-rails - Rails - 仅当条件为真时才使用连接

> ID：12882515
> 
> 赞同：0
> 
> 时间：2012-10-14T13:06:44.613
> 
> 标签：ruby-on-rails

仅当某个条件为真时，我如何使用联接？例如，我有这个查询：

```
@courses = Course.find(:all,
    :order=> 'courses.name asc',
    :include => [:units],
    :joins => :course_sub_responsibles,
    :group => 'courses.name',
    :conditions => conditions) 
```

但我只需要在特定条件下加入 course_sub_responsibles 表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:12:07.767

您应该使用基于 ARel 的方法：

```
@courses = Course.scoped  # Course.all in rails 4
@courses = @courses.order("courses.name asc").includes(:units)
@courses = @courses.joins(:course_sub_responsibles) if YOUR_CONDITION
@courses = @courses.group("courses.name")
@courses = @courses.where(conditions)
@courses 
```

这只会在迭代变量时执行查询，但查询将由片段构建，因此您可以在需要时添加/删除片段。

在 Rails4 中它会更干净（注意刘海，这意味着像往常一样“修改接收器”）：

```
@courses = Course.all
@courses.order!("courses.name asc")
@courses.includes!(:units)
@courses.joins!(:course_sub_responsibles) if YOUR_CONDITION
@courses.group!("courses.name")
@courses.where!(conditions)
@courses 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:15:20.913

**ActiveRecord.find**方法将Hash 作为最后一个参数（没有花括号，但它确实是一个哈希），这意味着您可以这样做：

```
options = { :order=> 'courses.name asc',
:include => [:units],
:group => 'courses.name',
:conditions => conditions }

options[:join] = :course_sub_responsibles if YOUR CONDITION GOES HERE

@courses = Course.find(:all, options) 
```

# c++ - 是否应该隐藏所有数据成员？

> ID：12882516
> 
> 赞同：3
> 
> 时间：2012-10-14T13:06:47.110
> 
> 标签：c++, oop

我知道 OOP 的“数据隐藏”概念，但在实际开发中，当规范发生变化时，它总是会受到挑战。

例如：

```
class role
{
    std::string name;
    int level;
    public:
        const std::string& get_name() { return name; }
        void set_name(const std::string& value) { name = value; }
        void set_level(int value) { level = value; }
        int get_level() const { return level; }
} 
```

当然，这段代码没有任何问题。但是，我想`name`，`level`根本没有封装。

我的意见如下：

1.  用户可以通过 setter 函数修改数据。
2.  setter/getter**暴露这些数据成员的数据类型**。如果这些数据成员必须改变它们的类型，setter/getter 函数成员也必须**改变它们的接口。**
3.  如果我需要对`level`成员进行其他操作，则添加更多操作成员（eq`add_level(int value)`等`sub_level(int value)`）功能是唯一的方法。
4.  只有一件事是好的。如果`get/set`一定要给它们加上一些判断，这些接口都可以正常工作。

那么，**我应该封装什么样的数据成员**呢？我无法预测这些数据成员的规模和使用情况。如果我直接暴露它们，对它们的操作将完全简单、清晰、有意义。如果我封装它们，我会为它们做很多操作成员，如果有一天它们的类型被规范改变（int -> class，class -> int），我的操作成员必须改变它们的接口或直接将它们全部杀死（因为我将它们发送到公共区域，一劳永逸！）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:58:05.977

我一直在阅读许多不同的语言，尤其是函数式语言，我慢慢开始质疑*setter*的想法。

假设我有一个 class `Person`，这就是我几年前会写的：

```
class Person {
public:
    std::string const& name() const { return _name; }
    void name(std::string const& n) { _name = n; }

    unsigned age() const { return _age; }
    void age(unsigned a) { _age = a; }

private:
    std::string _name;
    unsigned _age;
}; 
```

您会注意到它与您自己的班级有多么相似。

*   对象的生命周期内名称会发生`Person`​​变化吗？
*   对象的生命周期中的年龄是否会发生`Person`变化？我们可以做些什么来避免这种情况？
*   我已经束缚了自己的类型`_name`：改变它会破坏`name()`吸气剂......

现在，一个替代实现，这就是我今天要写的：

```
class Person {
public:
    Person(std::string name, Time birth): _name(name), _birth(birth) {}

    std::string name() const { return _name; }

    Duration age(Time now) { return now - _birth; }

private:
    std::string _name;
    Time _birth;
}; 
```

这个类*不再有任何 setter*。这个类*不再返回其内部的任何句柄*（因此，我将支付副本的价格，无论如何可能不会太多）。

然而，最值得注意的一点是我改变了记忆信息的方式：这`age`是一个从出生日期和当前日期得出的波动值。因此，为什么要记住副产品而不是来源？

我想改变价值？出色地：

```
Time const now = Time::Now();
person = Person("John R. Smith", now - person.age(now)); 
```

工作得很好。至少我只写一次我的不变量（在构造函数中）。

显然，这不一定适用于所有地方。如果您的班级只有几个字段，但效果很好；当您的班级获得更多字段时，也许是时候将其中一些提取到自己的班级中了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:20:28.000

这个想法是该类定义了一个*接口*，它是其作者和任何使用它的开发人员之间的合同。接口应尽可能保持不变，因为对接口的任何更改都可能需要更改使用它的代码。

编写 setter 和 getter 意味着您可以验证对私有成员的访问，并且您可以更改底层实现（例如，通过更改内部数据类型）而不影响任何客户端代码。

例如，假设您编写了一个`time`类。您的设置器可以防止调用者在 、 和 成员中存储`hours`无效`minutes`值`seconds`。并假设这些值是从实时时钟中检索的。您的 getter 可以查询 RTC 并在无法访问或损坏时返回错误代码。

作为另一个示例，假设您定义了一个返回 32 位整数的 getter。您稍后会发现可以通过将实现更改为使用 64 位整数来修复的不准确性。（也许它正在执行某种四舍五入到 32 位的计算。）getter 封装了实现，因此您可以自由更新它以在内部使用 64 位，但仍返回（现在更准确）32 位值，所以你的新班级是旧班级的临时替代品。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T13:46:50.807

Getter 和 setter 通常仅在您执行的操作不仅仅是分配成员变量时才有用。

```
class A {
public:
  int get_value () const;
  void set_value (int v);

private:
  int _value;
}; 
```

如果您 1）从不打算更改实现（基本上您不是针对接口进行编码），上述内容并不能真正为您买任何东西，2）没有要执行的验证。

当您的类包含不共享不变量的数据时（基本上该类只收集不同的值但成员之间没有规则），您可以争论 getter 和 setter 是否有用。

例如，在 Date 类的情况下，您应该真正使用 setter 和 getter，因为成员（日、月和年）共享一个不变量（例如，当月增加超过 12 时，年也应该增加）。

但是，在 X 和 Y 不共享不变量的 Point 类的情况下，您可以跳过 getter 和 setter，除非您真的想让它成为接口并使用多态性。

此外，我不同意 OOP 具有挑战性，因为规范会发生变化（它们总是会发生变化），但正确使用 OOP 是一种技术（与其他技术相结合），它可以帮助您应对变化并将程序的各个部分相互隔离，以便改变不会渗透到您的整个代码库。我不会说您可以遵循任何简单的规则，这样就可以正常工作，而是经验问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T13:18:53.223

1.  使用 set/get 修改类外部的值（比如来自另一个类）。
2.  隐藏不需要在类外公开的函数（带有私有）。例如，我有一个类，它具有使用各种方法计算积分的功能。但是所有这些算法都依赖于一个名为 sumIt() 的函数，其他类不应明确使用该函数。
3.  如果您想避免每次都手动编写自己的 getter/setter，您可以使用模板轻松扩展 C++ 以允许“属性”之类的修饰符。这取决于您的类/应用程序的设计。

# mysql - 2 在同一查询中计数但条件不同

> ID：12882520
> 
> 赞同：0
> 
> 时间：2012-10-14T13:07:28.423
> 
> 标签：mysql, count, aggregate-functions, aggregate

这一直困扰着我一整天：

我想在 1 个表中做 2 个计数。第一个统计总共有多少家店铺，第二个应该统计价格低于 tsuppliers.lowestprice 的店铺总数

所以基本上我想将第二个查询组合到第一个查询中：

```
SELECT tshops.shopID, tshops.OfficialName, tsuppliershopinfo.ContactName,   tsuppliershopinfo.ContactMail, Count(distinct tresults.pID) AS AantalVanpID
FROM (tsupplierproducts 
    INNER JOIN tresults ON tsupplierproducts.pID = tresults.pID)     
    INNER JOIN (tsuppliershopinfo INNER JOIN tshops ON tsuppliershopinfo.shopID = tshops.shopID) ON tresults.shopID = tsuppliershopinfo.shopID
WHERE (((tsupplierproducts.supplierID)=2)) AND tresults.starttime BETWEEN DATE_SUB(CURDATE(), INTERVAL 14 DAY) AND DATE_ADD(CURDATE(),INTERVAL 1 DAY)
GROUP BY tshops.shopID, tshops.OfficialName, tsuppliershopinfo.ContactName, tsuppliershopinfo.ContactMail; 
```

第二个（注意 where 子句中只有一个额外的条件）：

```
SELECT tresults.shopID, Count(distinct tresults.pID) AS AantalVanpID
FROM tsupplierproducts INNER JOIN tresults ON tsupplierproducts.pID = tresults.pID
WHERE (((tsupplierproducts.supplierID)=2) AND ((tresults.Price)<tsupplierproducts.LowestPrice)) AND tresults.starttime BETWEEN DATE_SUB(CURDATE(), INTERVAL 14 DAY) AND DATE_ADD(CURDATE(),INTERVAL 1 DAY)
GROUP BY tresults.shopID; 
```

如何将第二个查询合并到第一个查询中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:48:20.587

```
SELECT 
    tshops.shopID, 
    tshops.OfficialName, 
    tsuppliershopinfo.ContactName,   
    tsuppliershopinfo.ContactMail, 
    Count(distinct tresults.pID) AS AantalVanpID,
    Count(distinct 
        case when tresults.Price < tsupplierproducts.LowestPrice then tresult.pID end
        ) as AantalVanpID_2
FROM
    tsupplierproducts 
    INNER JOIN tresults ON tsupplierproducts.pID = tresults.pID   
    INNER JOIN tsuppliershopinfo ON tresults.shopID = tsuppliershopinfo.shopID
    INNER JOIN tshops ON tsuppliershopinfo.shopID = tshops.shopID
WHERE 
    tsupplierproducts.supplierID = 2
    AND 
    tresults.starttime BETWEEN 
        DATE_SUB(CURDATE(), INTERVAL 14 DAY) AND DATE_ADD(CURDATE(),INTERVAL 1 DAY)
GROUP BY 
    tshops.shopID, 
    tshops.OfficialName, 
    tsuppliershopinfo.ContactName, 
    tsuppliershopinfo.ContactMail 
```

# java - 如何使用定时器 isRunning？

> ID：12882524
> 
> 赞同：3
> 
> 时间：2012-10-14T13:08:57.033
> 
> 标签：java, javax.swing.timer

我正在创建一个创建门（AND、OR 等）的程序，但是当我想创建一个 SR 锁存器时，我需要使用一个计时器。

所以当这个方法（inputChanged）被调用时，它应该检查定时器是否正在运行。如果它正在运行，它应该什么都不做。（这是我被卡住了......）否则它应该检查新值是否偏离旧值（`getOutputValue()`）。

如果是这样，它应该保存新值并在一小段延迟后发送中断信号。我使用 setInitialDelay() 进行初始延迟，但我不知道如何发送中断信号。

我想知道我在这段代码中做错了什么，因为它运行得不太好......

```
public void inputChanged()
{
   timer = new javax.swing.Timer(delay, new ActionListener()
   {
       public void actionPerformed(ActionEvent event) 
        {
            // Check if timer is running.
           if(timer.isRunning())
           {
               boolean value = calculateValue(); 

               //  new Value            old Value
               if(calculateValue() != getOutputValue())
               {
                   timer.setInitialDelay(delay);
                   timer.stop();
               }
               outputChanged(value);
           }
        }   
    });
    timer.start();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-05T17:37:44.327

代码的逻辑与您编写的相反。你说如果时间在流逝，那么你什么也不想做。但是，如果计时器没有运行，代码会说什么都不做。只是一个简单的`!timer.isRunning()`应该应用到正确的行。

# mysql - 实体属性值模型 - 性能替代？

> ID：12882531
> 
> 赞同：1
> 
> 时间：2012-10-14T13:09:49.920
> 
> 标签：mysql, sql, performance, entity-attribute-value

我使用 PHP 和 mySQL。

我有一个页表和一个元表。它看起来有点像这样。

**页表**

```
page_id | headline    | content
--------------------------
1       | My headline | My content
2       | Another one | Another text 
```

**元表**

```
id | page_id | meta_key  | meta_value
------------------------------------
1  | 2       | seo_title | Hello world
2  | 2       | price     | 299 
```

我读过这种类型的模型称为[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model)。我还读到这[对性能不利](http://karwin.blogspot.se/2009/05/eav-fail.html)。

我的元表是为连接到页面的任何类型的值制作的。这次我无法创建带有“静态”列的表。

**问题**

*   对于每页有 30 个元值的 300 个页面，这有多糟糕？元表中有 9000 行。
*   “动态”数据有更好的模型吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:03:18.677

**首先**，有时这种模型使查询数据变得更加容易。几天前我[在这里](https://stackoverflow.com/questions/12574563/query-to-show-total-leave-hours-per-month)问了一个问题，一些用户建议我为什么不将我的模型更改为 1NF 形式以使查询数据更容易。只有当他们意识到我被这个设计卡住时，他们才提供了一些问题的答案。关键是我很幸运，只有 12 列要总结；否则，如果我的表包含 300 列，则可能没有用户为该问题编写查询。:-)

**其次**，有时由于数据库自然施加的一些限制，这种设计的实现更容易。如果您的`meta_key`值包含一些大于 30 个字符的冗长值，则您必须缩短值并在某处进行映射，否则这可能是您唯一的选择。

**最后**，性能很重要；确实如此。但是，另一方面，您可以应用某些技术来提高性能；例如通过创建适当的索引、分区表等。

在这种情况下，表大小非常小。因此，除非您的查询非常复杂，例如有大量计算和复杂的连接和聚合，并且如果应用程序对小时间分数不敏感，我想如果采用这种模型，您不会受到性能的影响。

**最后**，如果您仍然过于关心性能，我建议您创建两个模型，用一些随机或真实数据填充它们，并分析计划成本，看看哪种模型更适合您的需求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:25:11.287

规范化的数据库模式基本上针对一般情况进行了优化。与此相比，您高度非规范化的模式对性能不利。

但这实际上意味着什么取决于您的用例。您正在运行什么查询？所以我推荐以下内容：

*   确保您将完整的持久层与其他所有内容完全分开。

*   确保它被自动化测试很好地覆盖，包括性能测试。

*   实施您当前的解决方案，从将创建最复杂的性能关键查询的部分开始。在这一步不要投入太多。可能低于项目预算的 5%。

*   检查性能是否足够。

*   如果检查失败，您有以下选择：

    1.  添加物化视图

    2.  使用更适合该工作的替代系统。键值存储可能是您正在寻找的。

    3.  或者您可能需要一种混合方法：应用程序的一部分的 EAV + 使用更适合查询的其他方法复制数据。

# javascript - 使用纯javascript检查属性是否对元素有效

> ID：12882541
> 
> 赞同：1
> 
> 时间：2012-10-14T13:10:34.740
> 
> 标签：javascript, dom

我的程序动态设置 DOM 元素的属性。我想防止设置不正确的属性。例如：

```
function set(element,name,value){
    if(name is a bad attribute for element)
      throw 'problem';
    element.setAttribute(name,value);
} 
```

我以为我可以在设置属性名称之前使用 hasAttribute 来验证它们，但我不能，因为它在我第一次设置属性之前返回 false，即使对于有效属性也是如此。所以这里的两件事都是假的：

```
button.hasAttribute('typo');
button.hasAttribute('type'); 
```

如何验证属性名称是否有效？

# api - 使用 node.js 作为中间层

> ID：12882543
> 
> 赞同：3
> 
> 时间：2012-10-14T13:10:39.217
> 
> 标签：api, node.js

我正在开发一个应用程序，其前端是使用 jquery mobile 构建的。此应用程序需要访问数据库以获取各种信息。它还需要更新数据库。

为了同步我的应用程序前端，我正在考虑使用 node.js 作为中间层。选择 node.js 是因为我们希望它能够正确扩展。该中间层将为前端提供所需的所有数据。它还将从前端接收数据并更新后端数据库。

问题是具有非常复杂的结构和关系的数据。手动将数据模型与纯 JSON 相互转换可能会变得非常痛苦。所以我也在考虑使用其他一些模块/框架。我尝试使用[Jaydata](http://jaydata.org/)，以便我可以形成数据模型，然后使用 OpenData 协议公开它们，但似乎缺少它的文档。我也考虑过使用[Sequelize](http://sequelizejs.com/)，但我认为它目前对数据库（触发器、过程和所有）没有很好的支持。

那么此时我可以使用什么来满足我的要求？是否有任何节点模块/框架可以满足我的要求，或者我是否必须使用原始代码从后端获取数据，将其转换为适当的模型并提供服务？

我使用 Postgresql 作为我的后端数据库。目前我的前端是使用 jquery mobile 制作的，但我可能会选择使用不同的技术（PHP/ASP.NET）来构建它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:05:35.527

更新：NodeJS 平台的 JayData Server 有很多改进，例如现在 MongoDB 支持导航属性。现在使用该系统也非常容易，阅读更多关于如何设置您[自己的 MongoDB 后台中间层服务器](http://jaydata.org/blog/how-to-set-up-a-nodejs-odata-endpoint-with-odata-server)的信息。

您确实可以为此使用 JayData，只要它的限制在您的接受范围内：

*   在服务器端 JayData 作为 NodeJS 包运行并支持 sqLite 和 mongoDB。随着 1.3 的到来，将添加 mysql 和 MSSqlServer 支持。JayData 实际上将服务器端数据库公开为符合 OData V2 的端点，并在 1 月份推出 V3 支持。

*   SqlLite 具有导航属性，但 mongoDB 具有性能。对于生产规模的实施，只有 mongoDB 是可行的方式。限制是目前 JayData 不支持与 mongoDB 的自动关系（导航属性）。我可以确认 1.3 中的 mongoDB 提供程序将支持导航属性

*   您在这里能够实现的是拥有一个复杂的服务器端模型，该模型具有用于实现 1..n 和 1..1 关系的参考字段，但您将无法根据导航属性进行查询，也无法使用“包含”运算符用于服务器形状的深层树。

我正在准备一个关于如何使用 JayData 在 NodeJS/mongoDB 平台上公开模型并在此处修改的小示例。

更新：或者，您可以使用 JavaScript API 服务（这是 JayData 中的较低级别 API）实现自己的数据 API，将 API 表面公开为具有服务功能的 OData 端点。看看这个：http: [//jaystack.com/blog/create-your-first-online-api-with-javascript-api-services](http://jaystack.com/blog/create-your-first-online-api-with-javascript-api-services)。（请注意，本文多次提及 JayStorm 服务，但所描述的技术也适用于本地配置。

以下是使用 JavaScript 数据服务或 JavaScript API 服务启动您自己的 JayData 支持的 NodeJS 中间层的步骤。您使用 JayData 发布的代码将使用 OData 协议发布，并且在客户端上使用 JayData 会将结果转换为类型化的结果树。

请注意，OData 协议层是一个 Connect/Express 中间件，因此您必须使用其中任何一个才能将 JayData 用作服务器。

干净的 linux 系统上的准备工作，您可能不需要大多数步骤

```
bash$
    sudo apt-get install mongodb
    sudo add-apt-repository ppa:chris-lea/node.js 
    sudo apt-get install nodejs nodejs-dev
    sudo apt-get install  npm build-essential make autoconf libtool flex bison git libxml2-dev
    mkdir test; cd test
    npm install mongodb express http connect q node-uuid bcrypt xmldom qs
    npm install jaydata 
```

1) 创建并启动一个没有 mongoDB 后端的 API 服务类。

```
/*** begin server.js ***/
var c = require('express');
require('jaydata');
window.DOMParser=require('xmldom').DOMParser;
require('q');

$data.ServiceBase.extend("myapi", {
    helloWorld: function() {
       ///<returns type="string" />
       return "Hello JavaScript Server World";
    }
});
myapi.annotateFromVSDoc();    
var app = c();

app.use(c.query());
app.use(c.bodyParser());
app.use("/test", $data.JayService.OData.Utils.simpleBodyReader());
app.use("/test", $data.JayService.createAdapter(myapi, function (req, res) {
    return new myapi();
}));
app.listen(8080);

/*** end server.js ***/ 
```

使用以下命令调用 helloWorld：

```
bash$: curl http://localhost:8080/test/helloWorld 
```

上面提到的博客文章从这一点上展示了更多

2) 创建一个 mongoDB 支持的 JavaScript 数据服务

```
/* begin server.js */
var c = require('express');
require('jaydata');
window.DOMParser=require('xmldom').DOMParser;
require('q');
var app = c();
app.use(c.query());
app.use(c.bodyParser());
app.use(c.cookieParser());
app.use(c.methodOverride());

$data.Class.define("test.Product", $data.Entity, null, {
    Id: { type: "id", key: true, computed: true, nullable: false },
    Name: { type: "string" },
    Price: { type: "integer" }
}, null);

$data.Class.defineEx("test.Context", [$data.EntityContext,$data.ServiceBase], null, {
    Products: { type: $data.EntitySet, elementType: test.Product }
});
test.Context.annotateFromVSDoc();

app.use("/test", $data.JayService.OData.Utils.simpleBodyReader());
app.use("/test", $data.JayService.createAdapter(test.Context, function (req, res) {
    return new test.Context({name: "mongoDB", databaseName:"test", address: "localhost", port: 27017 });
}));
app.use(c.errorHandler());
app.listen(8080);
/* end server.js */ 
```

由于“测试”数据库使用 OData 协议公开，因此您可以从任何 AJAX 工具执行 CRUD 操作，但我推荐使用 datajs 或 JayData。

另请注意，使用数据服务类，您可以定义服务器端事件处理程序，这些处理程序可以更改要插入的数据或取消操作（很像 SQL 世界中的触发器）。您还可以将授权逻辑传递给 JayData 服务器上下文，以强制执行基于用户的规则和访问控制。

# jquery - 没有密钥的 JSON 数组？

> ID：12882545
> 
> 赞同：1
> 
> 时间：2012-10-14T13:10:51.153
> 
> 标签：jquery, json, web-services, syntax

我正在使用返回字符串数组（字符串 []）的 jQuery/AJAX 调用 Web 服务。

这是我的回应：

```
{"GetTagsResult":["acceleration","aktantmodellen","ampere","analyse","analyseeksempel","atmosfæren","best practice","boganmeldelse","brændtrekanten","cellemembran"]} 
```

我想在一个变量中取出列表，所以我只对列表进行操作，而不是“GetTagsResult”键名。

这是我的电话：

```
 $(document).ready(function () {
        $("#myabtags").tagit({
            tagSource: function (request, response) {
                $.ajax({
                    type: "POST",
                    url: "Services/ForumOperationService.svc/GetTags",
                    datatype: "json",
                    contentType: "application/json; charset=utf-8",
                    data: {},
                    success: function (data) {
                        response(data);
                    }
                });
            },
            removeConfirmation: true

        });
    }); 
```

我在响应（数据）行尝试了以下操作：

*   响应（数据.d）
*   响应（数据。值）
*   响应（数据[0].值）

但没有任何帮助。

我想在变量中得到以下内容：

```
 ["acceleration","aktantmodellen","ampere","analyse","analyseeksempel","atmosfæren", "best practice","boganmeldelse","brændtrekanten","cellemembran"] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T13:11:45.670

你的数组在

```
data["GetTagsResult"] 
```

你也可以得到它

```
data.GetTagsResult 
```

所以你可以打电话

```
response(data.GetTagsResult); 
```

这个 MDN 指南可能会有所帮助：[Working with objects](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Working_with_Objects)

# ios - 故事板上的阿拉伯语

> ID：12882546
> 
> 赞同：2
> 
> 时间：2012-10-14T13:11:06.767
> 
> 标签：ios, xcode, localization, storyboard, arabic

我想本地化我的应用程序，当我在设备上设置英语和法语时它可以正常工作，但是当我尝试使用阿拉伯语时，我有英语故事板：/

当我为阿拉伯语创建文件“Localizable”时，我选择“Arabic-World”，我尝试与“Arabic-Algeria”等其他人一起尝试，但我得到了相同的结果。

谢谢，亚当

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:25:05.323

我通过删除阿拉伯语世界本地化来修复它，然后使用“阿拉伯语”本地化我的应用程序（当我选择语言时我没有看到它）

# javascript - 可以在移动设备上触摸/滑动并在桌面上单击和拖动的 Javascript Gallery 滑块？

> ID：12882549
> 
> 赞同：4
> 
> 时间：2012-10-14T13:11:54.350
> 
> 标签：javascript, jquery, slider, gallery

我正在寻找一个 Javascript/jQuery 画廊滑块插件，它通过在移动设备上触摸/向右滑动以及在桌面/笔记本电脑上单击和拖动来工作。

我见过的大多数都可以在移动设备上滑动，但不能在台式机/笔记本电脑上“拖动”。您必须在图像之间单击。例如：http: [//galleria.io/](http://galleria.io/) [http://swipejs.com/](http://swipejs.com/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T09:51:00.797

[http://www.idangero.us/sliders/swiper/](http://www.idangero.us/sliders/swiper/)

我喜欢过渡效果！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T13:13:38.377

在谷歌搜索了一下后，我回答了我自己的问题。这是一个很好的网站[http://www.iosscripts.com/iosslider/](http://www.iosscripts.com/iosslider/)。滑动/点击在我的装有 10.7.4 的 Mac 笔记本电脑和装有 iOS4 的 iPhone 4 上都非常有效。

# perl - 如何调用一个类：在perl中运行时确定的方法？

> ID：12882554
> 
> 赞同：2
> 
> 时间：2012-10-14T13:12:36.027
> 
> 标签：perl, class, inheritance, oop

我正在尝试制作一个包含大量 crud 操作的 crm 应用程序。所以我有控制器类，比如

```
CRM::Cities
CRM::Countries 
```

不，我使用 ORLite 作为轻量级 ORM。它像这样创建-on the fly-类

```
Model::Cities
Model::Countries 
```

现在说我要加载一个城市。在 CRM::Cities 类中，我必须执行类似的操作（ORLite 使用类方法进行访问）

```
$obj1 = Model::Cities->load($id); 
```

在 CRM::Countries 中加载当前国家：

```
$obj1 = Model::Countries->load($id); 
```

所以我最终在每个控制器类中包含类似的行。

我想要做的是在 CRM 包（基本控制器类）中做类似这样的通用操作：

```
$obj1 = Model::$package->load($id);
# package contains Cities or Countries, determined at runtime 
```

我尝试了各种变体，使用 eval 等等，但这是更高阶的 perl。我认为 b/c ORLite 方法是类方法，继承不太明显。有人可以给建议吗？蒂亚！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T13:57:41.633

只需将整个包名，例如`Model::Cities`，放入变量中。例如：

```
package Stuff::Yeah;

sub whatever {
  print "yes\n";
}

package main;

my $package = "Stuff::Yeah";
$package->whatever; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T18:08:21.580

```
die unless $package =~ /\A\w+\Z/;
eval "require Model::$package" or die $@;
$obj1 = "Model::$package"->load($id); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-15T16:16:20.270

Perl 允许你使用字符串作为类名，所以你可以说

```
$obj1 = "Model::Cities"->load($id); 
```

或者确实

```
$obj1 = "Model::$package"->load($id); 
```

事实上

```
my ($package) = $class =~ /([^:]+)$/;
$obj1 = "Model::$package"->load($id); 
```

.

这是一种很好的通用加载方式，但我建议再增加一层抽象，以避免过于拘泥于每个 CRM 包一个模型的想法：

```
sub _model_class {
    my ($class) = @_;

    my ($package) = $class =~ /([^:]+)$/;
    return "Model::$package";
} 
```

接着

```
$obj1 = $class->_model_class->load($id); 
```

. 这样，如果其中一个继承类对其模型类应该是什么产生了自己的想法（并且发生了这种情况），则无需更改任何代码。

# java - 使用 google (java) 请求时出现 URL 错误 403

> ID：12882555
> 
> 赞同：0
> 
> 时间：2012-10-14T13:12:46.107
> 
> 标签：java, google-api, httpurlconnection

我遇到“著名”错误：服务器返回 HTTP 响应代码：URL 为 403。我必须发送很多查询（+-2000）来填充我的数据库。但是，50-100首先工作，然后所有以下触发错误403。我不知道为什么......

这是我的代码：

```
public static ArrayList<String> querying(String name){
    URL url = null;
    String inputLine;
    ArrayList<String> resultArray = new ArrayList<String>();
    BufferedReader in;
    try {
        url = new URL(s);
    } catch (MalformedURLException e) {
        e.printStackTrace();
    }    
    try {
        HttpURLConnection con = (HttpURLConnection) url.openConnection();
        con.addRequestProperty("User-Agent", "Mozilla/4.0");
        in = new BufferedReader(new InputStreamReader(con.getInputStream()));
        while ((inputLine = in.readLine()) != null) {
            ...
        }
        in.close();
        con.disconnect();

    } catch (IOException e) {
        e.printStackTrace();
    }
    return resultArray;
} 
```

哪里`s`是：

`"https://www.googleapis.com/freebase/v1/mqlread?query={\"id\":\"/en/"+name+"\", \"name\": null, \"type\":\"/base/popstra/celebrity\",\"/base/popstra/celebrity/friendship\": [{\"participant\": [] }] }".replace(" ", "")`

我试图在网上找到有关此错误的一些信息，但尽管我发现了（例如“addRequestProperty”），但它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:30:46.687

您问题中的 URL 表明您没有使用 API 密钥。

*   使用 API 密钥，您应该能够每天进行 100k/10k 读取/写入（根据 Freebase 文档）

*   如果没有 API 密钥，您的配额将被限制在一个小得多的数字上，并且当您超过时您会收到 403 响应。这是为了防止滥用 API 基础设施，以便每个人都能获得公平的 API 请求份额。

请按照[Freebase 文档中的入门](http://wiki.freebase.com/wiki/Freebase_API#Getting_Started)说明获取 API 密钥。

# oop - 是不是课太多了？

> ID：12882559
> 
> 赞同：16
> 
> 时间：2012-10-14T13:12:55.060
> 
> 标签：oop, class, design-patterns

当你在开发的时候，你什么时候可以确定你的应用程序中是否有很多不必要的类？你应该有多少课程有一定的限制吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-10-14T13:35:36.650

真的没有“课程太多”这样的事情。*一个问题可能*是“太多的类在做同样的事情”。

如果你觉得你的代码库中有太多的类，一个很好的审计方法是添加一些新的需求。任何迫使您对代码进行一些更改的东西。（当然，在源代码控制的一个单独分支中。）进行这些更改有多难？一个相对简单的更改是否需要您修改大量的类？如果是这种情况，那么很有可能您确实有太多，但问题不在于数字本身。

在许多情况下，这主要是个人喜好问题。代码重用和代码解耦之间通常需要权衡取舍。通过分离所有可能的关注点并拥有许多小类，您可以将所有内容与其他所有内容分离。但是，您经常会发现在这种情况下必须重复代码，因为很多代码可能在做“相同的事情”，但原因略有不同。

另一方面，如果您坚持从不重复代码中的任何内容，那么当您获得更少的类时，您通常也会最终获得更多的耦合，因为单个类将对任何需要类似功能的代码承担多种责任。

在大多数情况下，底线是抵制变革。耦合与重用是人们可以详细争论的问题，但软件刚性是争论变成实际努力（金钱）的地方。测试更改代码的难度。然后尝试以您认为更能接受更改的方式重新安排您的类/逻辑并再次测试它。有显着改善吗？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-14T13:23:05.597

一般来说，很多课程意味着你很可能已经非常普遍地解决了你的问题。这通常很好，因为这意味着您希望在最终需要时更容易改变行为。

在开发较小的项目时，有时最好更具体（即不那么通用）以更快地完成任务，这可能会导致更少的课程，但在需要时可能更难更改。

只要类是有序的并且有明确的目的，拥有很多类应该不是问题。

如果类是紧密耦合的，或者某些类的职责没有很好地定义，那么问题可能会是什么。更多关于耦合的信息可以在[这里](http://en.wikipedia.org/wiki/Coupling_%28computer_programming%29)找到。

下面的评论中提到了另一个可能出现的问题。如果你的很多类都有类似的代码，那么你就会遇到重复问题。这通常会导致系统的可维护性降低，因为如果需要对重复的代码进行更改，则必须多次更改。这通常通过继承来解决。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-07-10T22:38:57.953

肯特贝克回答你的问题。Jeff Langr 在“Clean Code A Handbook of Agile Software Craftsmanship”一书中讨论了 Kent Beck 指定的四个设计规则。

（按重要性排序）

1.  运行所有测试
2.  不包含重复
3.  表达程序员的意图
4.  **最小化类**和方法的数量

Kent 建议采用务实的方法来保持类和方法的数量较少。他给出了遵守教条规则的例子，例如所有类都应该有接口。通常是的，但有时在某些情况下可能不需要这样做。但是，此规则是简单设计的四个规则中优先级最低的。

（注意，这是 Kent Becks 的观点，不是我的观点！）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-26T12:35:10.223

在我目前正在进行的一个项目中，我绝对认为我们使用了太多的类——或者至少，太多的对象/实例。

我们构建了一个基于 PHP/MySQL 的 CMS，其中数据库中的每个记录和字段都表示为 PHP 中的一个对象。这可能会同时产生数万个实例，并且我们不断遇到性能问题/内存不足等问题。

这当然在其他编程语言或其他要求中可能不是问题，但在我看来，性能也是需要考虑的问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-15T08:03:07.673

正如许多其他人所建议的那样，“这取决于......”

通常，这取决于您的方法、目标以及团队成员的偏好和能力。如果你对单元测试非常严格，你最终可能会得到很多小的、通用的类和依赖注入。这也意味着单个团队成员很难从所有非常非常通用的部分中看到您正在构建的具体整体。

就我个人而言，我更喜欢从构建在两个层次上的 API 的角度来考虑：一个由通用的独立部分组成的较低层次和一个高层次，我使用几个外观、导向器等来向其他编码人员展示一些具体和有用的东西。这很像 iOS 库恕我直言的设计。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-01-24T17:49:43.843

哲学：

有什么东西太多了。你可以有太多和太少的类。有些人喜欢假装更多是免费的，因为他们可以使用诸如搜索之类的工具作为创建过度混乱、难以导航和大型搜索空间的借口。从长远来看，你总会发现一个可衡量的赤字。

我不确定您可以拥有多少个课程的上限。你可以找到方法来无限地增加类，从技术上讲，无限地。如果你不能有太多的类，但你可以无限添加它们，那么由于你想要拥有的类的数量，你永远不会完成你的程序，因此你可以有太多的类。

许多 IDE 可以很容易地创建大量类并将它们与样板生成、自动完成以及总是有 copypasta 之类的东西串在一起。许多工具降低了创建本质上通常是无用的代码的成本，但并没有降低膨胀的成本。即使有助手，不臃肿的代码总是比臃肿的代码便宜（你只能减少税收，而不是消除它）。如果你不关心它，它最终会成为一个问题。即使您有诸如代码扫描，罚款和文件替换等功能，十倍仍然是十倍。这意味着改变十倍，出错十倍，每行消耗的努力量的十分之一。

许多人陷入了认为他们通过添加更多类来降低复杂性的陷阱。事实上，它们倾向于简单地分解复杂性，将事物从与其相关的事物中移开，并以间接的形式增加复杂性层。线性码变成，

不必要的非线性（这是一个段落过多的例子，尽管公平地说，一个更好的例子可能是每个句子一个段落或一个单词太多，当你的段落变成句子时，你就不再有两个独立的东西了，这可能是两个多段的证明，当句子不再是与段落不同的东西时）。

检测：

看待这一点的简单方法是，如果您有路径 A（单个节点/一个函数/类/等），但将其分解为 A->B，您实际上并没有获得任何收益。你只是拿了一张纸，把它撕成两半，放进两个信封里，然后把它寄到目的地。如果事实证明您确实需要一个具有多个边的节点，那么您将有所收获。例如，那将是 A->B，A->C。您可以使用图形分析来嗅出太多的对象。如果你有很大的长链表或许多小链表（甚至可能只有几个），那么你可能会说你有太多的类。并非所有形式的过度对象都如此容易被发现。如果类太多，维护会变得过于复杂，因为您最终会支持一定程度的灵活性以及您只使用其中一小部分的模型。这意味着你的很多代码实际上并不对应于需要做的事情。仅这一点就很难维护，因为该代码的目标是主观的而不是客观的，它也可能是任意的。

您可以使用代码库并减少类的数量，直到您只拥有实际需要的那些。这意味着只有那些需要可移植性（传递数据）、事物行为方式的差异（传递方法）以及合理分离（独立处理主要概念，如持久性、表示等）以及重复数据删除所需的那些。当无法进行良好的设计时，许多程序员会倒退，编写代码并仅在需要时将其拆分以根据需要满足特定目的。

虽然可以衡量，但没有太多类的精确衡量标准，也没有完美的标志。只有提示。例如，所需的最小类数与最大类数之间的较大比率是一个提示。什么是大？我会说 100 次肯定是可疑的，10 次相当可疑，5 次稍微可疑。这可以根据许多参数进行更改。

一个奇怪的措施是压缩你的代码。压缩比越好，膨胀的可能性就越大。这不是一个完美的衡量标准，因为它需要参考点。某些降低压缩率的方法也可能是徒劳的，天真地编码到特定的数字永远不会奏效。

你可以知道你是否有很多类（或接口），如果它们让你做的工作并不能真正帮助你达到最终目标，或者它们是否让你放慢了速度而不是加快了速度。不过，这可能是主观的。如果有人做了太多的课程，这意味着他们将不得不改变他们的习惯，这意味着通常需要支付入场费才能获得更好的编码方法。在项目开始时，这很难检测到，因为添加代码通常非常便宜。还没有什么比这更依赖它，层次很浅，等等。至少在一个项目开始数月甚至一年之后，膨胀、组织不良等成本才变得明显。直到一个项目实际上陷入僵局，人们才会注意到这一点。许多人也不知道需要一年时间的事情是否真的需要一年或六个月。很少有比较点。

如果你看看你的课程，你可以学到一些东西。OO 有多少代码，FO（面向对象与面向功能）有多少？

面向功能的意思是实际做某事并直接对最终结果有贡献的代码。这包括您必要的代码。它可能包含除赋值和强制转换之外的运算符。通常是条件语句、分支、读取数据、选择行动方案并采取适当的行动方案，例如数据生成、变异或针对 IO 获取/存储。

面向对象意味着简单地使用类来表示概念。这段代码几乎把你的程序代码变成了一种声明性语言。如果你的大多数类只是为了帮助繁重的类型检查、表示等，那么你可能有太多了。这方面的标志是类和方法，它们的部分名称可能是允许您缩小这些类的变量。一个非常强烈的迹象是，如果这些课程的大部分内容是拳击。简单地分配变量，但不做任何其他事情。这实际上是结构过多且通常缺乏重复数据删除、动态编码或抽象的情况。

在明显的情况下，如果一个类根本没有被使用，那么它就是一个太多的类（如果它的死代码）。诸如类相同但名称不同的东西也是一个好兆头。

原因：

除了使创建和连接事物变得非常容易的机制（当您抽象并动​​态地鼓励避免取代但破坏 IDE 的好习惯时，这些机制往往会破坏），这可能是由许多事物驱动的。我经常因为试图绝对完美地表示所有内容而陷入困境，但是 OO 实际上不够灵活，无法做到这一点，而且它经常被证明是 YAGNI。一个常见的问题是缺乏抽象，您通常会将变量展开到顶级语言结构中，如前所述（它还链接到设计以将所有内容直接暴露给 IDE）。这可能不仅暴露了缺乏动态编码，而且还暴露了预处理器或类似的使用。这看起来基本上是一棵定义了所有叶子的树。尽可能使用您希望避免为每个可能的叶子定义一个类的类。一个极端的树扩展标志可能是你有一个类来处理一个基元的每一种可能的用法。这也可能是更极端的迹象。所有类的展开笛卡尔积。在这种情况下，当两者之间通常没有实际差异时，您不会简单地获得 Leg 的类，而是 CatLeg、DogLeg 等的类。有些人可以出于极端主义的类型检查来阻止某人将 DogLeg 放在 CatLeg 上。这是一种令人讨厌且常见的反模式。这也可能是更极端的迹象。所有类的展开笛卡尔积。在这种情况下，当两者之间通常没有实际差异时，您不会简单地获得 Leg 的类，而是 CatLeg、DogLeg 等的类。有些人可以出于极端主义的类型检查来阻止某人将 DogLeg 放在 CatLeg 上。这是一种令人讨厌且常见的反模式。这也可能是更极端的迹象。所有类的展开笛卡尔积。在这种情况下，当两者之间通常没有实际差异时，您不会简单地获得 Leg 的类，而是 CatLeg、DogLeg 等的类。有些人可以出于极端主义的类型检查来阻止某人将 DogLeg 放在 CatLeg 上。这是一种令人讨厌且常见的反模式。

太多课程的最大驱动因素之一是尝试从云中遵循并不真正适用于您的情况的标准。在这种情况下，您不是在针对您的问题进行编程。您正在编程以响应其他人的问题。

这在诸如 SOLID 之类的东西中很常见。了解和理解 SOLID 等原则非常重要，能够应用它们，但知道何时不应用它们也很重要。

在教授具有大型库的 OOP 语言时，会大量使用此原则。如果您正在创建一个希望分发给全世界的 OOP 库，可能有数百万人拥有每个可以想象的用例，那么您希望遵守 OOP 原则，这些原则导致很多事情被分解成接口和类，以便它们可以以不同的方式使用，因此一项功能不会有很高的机会引入另一个可能不需要的功能。你必须考虑到，在这个世界上，你不想创建人们可能不得不分叉的库。人们不想这样做，因为他们随后成为了他们正在重用的代码的维护者，否则这些代码将会非常损失总拥有成本。

这些原则也增加了很多开销，如果你的代码库有一个有限的用户范围，完全在你的控制之下等等，那么如果你按照“你应该的方式”进行分布式处理，那么你可能有太多的代码代码。即使您确实有分布式代码，有时它可能过于极端，无法事先满足所有用例，有时您必须找出最有可能需要的东西，然后其他一切都将按需更改。对于一个小型图书馆，您可以承担大量额外的工作。对于大型代码库，您必须在开销最有可能收回成本的地方进行锻炼。

反例：

在理想的世界中，您只根据您的即时需求进行极简编码。由于过度行为不会自我暴露，因此存在一种偏见。不足之处是。如果你太少，它会直接呈现出来。这在 DRY 中很常见。添加一个功能后，您将添加另一个功能。您复制并粘贴第一个，然后更改下半部分。这两个函数的共同上半部分是重复代码，这立即表明它们需要进行重复数据删除。您可以通过创建第三个函数来做到这一点。您知道这不是一个功能太多，因为您有客观可证明的理由来创建它。在编写供他人使用的代码时，这种方法变得更加困难。我说的其他人不一定是指任何人。我的意思是那些不能直接访问代码库的人，通常是陌生人。本质上是那些不能在需要时轻松/快速/便宜地分解您的代码的人。如果你不迎合这样的受众，那么你就不必担心过早地分解你的代码。

我最近在网上使用了一个课程太少的图书馆。它包含一个具有多种职责的类。它需要一个文件句柄（作为原始类型）来写入，然后根据调用的方法（例如 addImage、addText 等）自动输出适合于它生成的流的 HTTP 标头。

在理想的世界中，这个类不应该对输出做出假设。用户可能希望输出到文件系统、内存、TCP 流等。它只需要提供一个带有简单写入方法的接口或使用标准库中的一个。在我的情况下，我只需要通过字符串连接输出它，但为了实现这一点，我必须打开一个映射到内存的伪文件（这通常是不可能的，但语言允许它作为一种黑客攻击）。

我多次使用来自所有来源的随机库遇到这个问题。在某些情况下，应该在哪里应用分离会很明显，有时则不是。如果有疑问，太少仍然胜过太多，因为您保证最终会发现它。我倾向于观察到，如果你添加任何你不确定的东西，你最终会陷入严重的膨胀领域。如果你做一次，你可能会做两次，然后这就会成为一种习惯。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-14T13:30:14.640

一个应用程序可以都在一个代码文件中，或者每个原子化函数都可以在自己的文件中，唯一受影响的是可维护性。可维护性可能意味着您自己浏览代码的能力，也可能意味着其他人如何理解代码，或者是否可以构建新版本。

我认为没有任何通用的指导方针总是适用的，这取决于很多事情。例如，与使用 C# 或 C++ 编码相比，使用 JavaScript 编码时通常使用更少（和更大）的文件，这些文件包含更多不相关的功能。

如果您使用的是 Visual Studio 2012，那么[http://msdn.microsoft.com/en-us/library/bb385910.aspx](http://msdn.microsoft.com/en-us/library/bb385910.aspx)和[http://msdn.microsoft.com/en-us/library/dd264939.aspx](http://msdn.microsoft.com/en-us/library/dd264939.aspx)有关于代码度量和代码分析如何工作。

这是基于我自己的应用程序的 Visual Studio 2012 中的代码指标报告的示例，这些值在[http://msdn.microsoft.com/en-us/library/bb385914.aspx](http://msdn.microsoft.com/en-us/library/bb385914.aspx)中进行了解释。

```
Project: <<Projectname>>
Configuration: Debug
Scope: Project
Assembly: <<Path>>
Maintainability Index: 84
Cyclomatic Complexity: 479
Depth of Inheritance: 8
Class Coupling: 189
Lines of Code: 903 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-14T13:33:11.227

我认为这取决于哪个区域有大量课程。如果有许多包含公共业务逻辑的静态类，这将被认为是不好的，因为静态类应该只用于公共帮助方法。静态类不应该包含通用的业务逻辑。

如果不同的层有不同的类来保存基本相同的数据。这将被认为是不好的，因为 DTO 类不应跨层复制。

但是，如果在适当分解需求后创建了类，那么我认为拥有大量类实际上是件好事。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-10-14T13:14:05.050

这完全取决于您的项目。这取决于您的要求。
类必须是最小的，没有不需要的类
类必须是最大的，因为它们都分别包含有属性。

# android - 如何在 android 上将新日历添加到谷歌帐户？

> ID：12882562
> 
> 赞同：3
> 
> 时间：2012-10-14T13:13:08.133
> 
> 标签：android, calendar, sync, google-calendar-api

我正在编写一个使用 Android 日历 API 的 android 应用程序。我正在尝试将我的应用程序中的日历添加到设备上的主要谷歌帐户，以便它与在线谷歌日历同步。

我的应用程序实现了一个同步适配器并将其自己的帐户存储在设备上。在同步适配器中，我插入日历并插入日历的所有事件。

我已经能够在我的应用程序帐户名称和类型下将日历添加到日历存储中，它会显示在 android 日历应用程序中并持续存在。它不与在线 Google 日历同步，这是我将其添加到日历存储的主要目标。

我已尝试更改此代码，以便通过更改帐户名称和类型来将日历添加到主要 google 帐户中，并更改为主要 google 帐户的`Calendars.ACCOUNT_NAME`值`Calendars.ACCOUNT_TYPE`。插入了一个日历并返回了一个 ID，但在我的应用程序完成同步后，日历消失了，我的应用程序无法找到它。我知道它已经消失了，因为我使用一个常量值来查找它，当我使用我的应用程序帐户添加日历时它会起作用。

有谁知道我如何将日历添加到设备上的主要谷歌账户（或任何谷歌账户），让它持续存在，以便它与谷歌日历在线同步？

我开始认为由于某种原因这是不可能的，因为我看不到其他人已经完成了这项工作，而且我发现的任何日历应用程序似乎只能使用 Calendar API 将本地日历添加到 android 手机或使用他们自己的云存储。

即使朝着正确的方向迈出一步，我也会感激不尽。

# php - 为图标字体添加带有自定义 html 的自定义 wordpress 菜单

> ID：12882564
> 
> 赞同：0
> 
> 时间：2012-10-14T13:13:18.640
> 
> 标签：php, wordpress

我将为我的社交媒体导航使用图标字体，但我需要更多自定义 HTML 来为我的主题实现这些。我需要使用的 HTML 大致如下：

```
<a href="#" class="icon-alone">
  <span aria-hidden="true" data-icon="&#x25a8;"></span>
  <span class="screen-reader-text">RSS</span>
</a> 
```

现在，我会更好地将其手动硬烘焙到主题中吗？我想添加某种支持以将某些图标更改为特定的几个，但我不确定如何最好地实现这一点，以便我可以控制正在应用哪些类。我希望管理员中有一个可以控制它们的部分。指针？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:54:15.657

你可以尝试 jquery 来做到这一点。wp nav 锚将有一个现有的类，因此您可以使用它。

```
<script>
$(function(){
    $("a.menu_class").addClass("icon-alone");
    $("a.menu_class").attr("href","#");     
    $("a.menu_class").html('<span aria-hidden="true" data-icon="&#x25a8;"></span><span class="screen-reader-text">RSS</span>');
});
</script> 
```

# android - 更新 SQLite 数据库时出现“SQLException：不是错误”

> ID：12882568
> 
> 赞同：0
> 
> 时间：2012-10-14T13:13:33.983
> 
> 标签：android, sqlite

当尝试通过从 Internet 页面获取的查询来更新我的数据库时，我得到了一个异常。这是代码：

```
url = new URL(Database.Munawwat_UpdateDB_URL);

                    URLConnection connection = url.openConnection();
                    BufferedReader reader = new BufferedReader(new InputStreamReader(connection.getInputStream()));
                    String line = null;
                    File dbfile = new File(Database.Munawwat_Database_PATH);
                    if (!dbfile.exists()) {
                        Toast.makeText(Munawwat_List.this, "error in db location", Toast.LENGTH_SHORT).show();
                        return;
                    }
                    SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase(dbfile, null);
                    String query = "";
                    while ((line = reader.readLine()) != null)
                        if (!line.contains("WHERE"))
                            query += line + "\n";
                        else {
                            query += line.trim();
                            Cursor c = db.rawQuery(query, null);
                            c.moveToFirst();

                            c.close();

                            query = "";
                        }

                    db.close();
                    reader.close();

                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

日志猫：

```
 14:52:46.136: E/SQLiteQuery(17802): exception: not an error; query: UPDATE Adab SET Body="AAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBCBCBCB" WHERE _id=4 10-14
 14:52:47.484: W/System.err(17802): android.database.sqlite.SQLiteException: not an error 10-14
 14:52:47.496: W/System.err(17802): at android.database.sqlite.SQLiteQuery.nativeFillWindow(Native Method) 10-14 
 14:52:47.503: W/System.err(17802): at android.database.sqlite.SQLiteQuery.fillWindow(SQLiteQuery.java:86) 10-14 
 14:52:47.511: W/System.err(17802): at android.database.sqlite.SQLiteCursor.fillWindow(SQLiteCursor.java:164) 10-14 
 14:52:47.523: W/System.err(17802): at android.database.sqlite.SQLiteCursor.getCount(SQLiteCursor.java:156) 10-14 
 14:52:47.527: W/System.err(17802): at android.database.AbstractCursor.moveToPosition(AbstractCursor.java:161) 10-14 
 14:52:47.527: W/System.err(17802): at android.database.AbstractCursor.moveToFirst(AbstractCursor.java:201) 10-14 
 14:52:47.531: W/System.err(17802): at omar.Munawwat_List$2.onClick(Munawwat_List.java:141) 10-14
 14:52:47.531: W/System.err(17802): at android.view.View.performClick(View.java:3511) 10-14
 14:52:47.535: W/System.err(17802): at android.view.View$PerformClick.run(View.java:14105) 10-14
 14:52:47.535: W/System.err(17802): at android.os.Handler.handleCallback(Handler.java:605) 10-14
 14:52:47.535: W/System.err(17802): at android.os.Handler.dispatchMessage(Handler.java:92) 10-14
 14:52:47.539: W/System.err(17802): at android.os.Looper.loop(Looper.java:137) 10-14    
 14:52:47.539: W/System.err(17802): at android.app.ActivityThread.main(ActivityThread.java:4575) 10-14
 14:52:47.539: W/System.err(17802): at java.lang.reflect.Method.invokeNative(Native Method) 10-14
 14:52:47.539: W/System.err(17802): at java.lang.reflect.Method.invoke(Method.java:511) 10-14 
 14:52:47.542: W/System.err(17802): at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 10-14 
 14:52:47.542: W/System.err(17802): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553) 10-14
 14:52:47.546: W/System.err(17802): at dalvik.system.NativeStart.main(Native Method) 
```

所以数据库没有得到更新..这是为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:31:01.087

看起来您的查询包含一个用双引号括起来的字符串常量`"`。它需要用单引号括起来`'`。

编辑：巴拉克的回答指出了主要问题。您应该使用 execSQL 而不是 rawQuery，因为您不希望光标返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:39:38.257

您正在尝试使用`rawQuery`进行更新，您不应该这样做（否则您会遇到异常）。 `rawQuery`期望数据库向它返回一个游标，而更新不会这样做，所以你会得到一个异常。

您应该使用`update`便捷方法或`execSQL`进行更新的方法，因为它们不需要返回游标。

# c# - 自定义 resx 框架 Visual Studio 2010

> ID：12882571
> 
> 赞同：2
> 
> 时间：2012-10-14T13:13:58.263
> 
> 标签：c#, xml, visual-studio-2010, resx

我喜欢 Visual Studio 2010 resx 框架，我希望具有相同的功能但具有自定义列。我想到了以下解决方案：

1.  将 res.xml 定义为唯一文件以从中生成资源类。
2.  创建我自己的 Visual Studio 插件，在每次保存我的 res.xml 时使用 xml 中的字段生成资源类。

例子：

xml:

```
 <?xml version="1.0" encoding="utf-8"?>
 <resources>
   <field name="x" loggerLevel="Verbose"/>
   <field name="y" loggerLevel="Details"/>
 </resources> 
```

翻译成代码：

```
class Resources{
   public readonly Field x = new Field(LoggerLevel.Verbose);
   public readonly Field y = new Field(LoggerLevel.Details);
} 
```

问题是我在这里杀人了吗？有没有更简单的解决方案来实现我的目标？

**编辑：**修复了 xml。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:35:23.457

一个简单的 T4 模板可能就足够了，而且 T4 已经内置在 MSVS 中。将您的 XML 添加到项目中（确保它有效，您当前的 XML 示例无效），并将 T4 模板添加到与您的 XML 文件相同的项目目录中。根据需要编辑命名空间名称和 XML 文件名（示例代码使用“T4Example”作为命名空间，“Example.xml”作为输入文件名）。

```
<#@ template debug="false" hostspecific="true" language="C#" #>
<#@ assembly name="System.Core.dll" #>
<#@ assembly name="System.Xml.dll" #>
<#@ assembly name="System.Xml.Linq.dll" #>
<#@ import namespace="System.Xml" #>
<#@ import namespace="System.Xml.Linq" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.IO" #>
<#@ output extension=".cs" #>

namespace T4Example
{
    class Fields
    {
    <#  
        string stringsDir = Path.GetDirectoryName(this.Host.TemplateFile);
        string reswFile = Path.Combine(stringsDir, @"Example.xml");
        var doc = XDocument.Load(reswFile);
        var data = doc.Element("xml")
                      .Element("fields")
                      .Elements("field")
                      .Select(i => Tuple.Create(
                            i.Attribute("name").Value,
                            i.Attribute("loggerLevel").Value));
        foreach(var tuple in data)
        {#>
        public readonly Field <#=tuple.Item1#> = new Field(LoggerLevel.<#=tuple.Item2#>);
<#      }#>
    }
} 
```

# php - PHP Soap 请求带有 stdclass 对象的数组

> ID：12882576
> 
> 赞同：1
> 
> 时间：2012-10-14T13:14:59.717
> 
> 标签：php, xml, arrays, soap, stdclass

我提出了一个 Soap 请求，它给了我一个充满 STDclasses 的数组。

我想要来自 Articlesummary 的结果，这样我就可以使用 ID 来查找正确的文章。

但是我现在尝试的所有代码都给我带来了 STDclass 和数组组合的问题

```
array(1) { 

["GetArticleSummariesResult"]=> object(stdClass)
#3 (2) { ["Errors"]=> object(stdClass)#4 (0) { } 

["ArticleSummaries"]=> object(stdClass)#5 (1) {

["ArticleSummary"]=> array(27) { 
[0]=> object(stdClass)#6 (4) { ["ID"]=> int(21557) ["Created"]=> string(19) "2010-05-06     15:54:50" ["Modified"]=> string(19) "2010-05-25 19:54:09" ["Active"]=> bool(true) } 
[1]=> object(stdClass)#7 (4) { ["ID"]=> int(21638) ["Created"]=> string(19) "2010-05-06 15:54:50" ["Modified"]=> string(19) "2010-05-25 19:54:09" ["Active"]=> bool(true) }
[2]=> object(stdClass)#8 (4) { ["ID"]=> int(21260) ["Created"]=> string(19) "2010-05-06 15:54:50" ["Modified"]=> string(19) "2010-05-25 19:54:09" ["Active"]=> bool(true) } 
[3]=> object(stdClass)#9 (4) { ["ID"]=> int(26664) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2010-05-25 19:54:07" ["Active"]=> bool(true) } 
[4]=> object(stdClass)#10 (4) { ["ID"]=> int(22165) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2010-05-25 19:54:07" ["Active"]=> bool(true) } 
[5]=> object(stdClass)#11 (4) { ["ID"]=> int(24166) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2010-08-16 22:44:38" ["Active"]=> bool(true) } 
[6]=> object(stdClass)#12 (4) { ["ID"]=> int(26167) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2010-05-25 19:54:07" ["Active"]=> bool(true) } 
[7]=> object(stdClass)#13 (4) { ["ID"]=> int(26170) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2011-05-05 09:04:19" ["Active"]=> bool(true) } 
[8]=> object(stdClass)#14 (4) { ["ID"]=> int(29471) ["Created"]=> string(19) "2010-07-02 11:59:26" ["Modified"]=> string(19) "2010-07-02 11:59:26" ["Active"]=> bool(true) } 
[9]=> object(stdClass)#15 (4) { ["ID"]=> int(21157) ["Created"]=> string(19) "2011-03-04 09:34:11" ["Modified"]=> string(19) "2012-06-12 11:34:44" ["Active"]=> bool(true) } 
[10]=> object(stdClass)#16 (4) { ["ID"]=> int(272876) ["Created"]=> string(19) "2011-04-11 12:14:29" ["Modified"]=> string(19) "2012-09-04 14:25:07" ["Active"]=> bool(true) } 
[11]=> object(stdClass)#17 (4) { ["ID"]=> int(28328) ["Created"]=> string(19) "2011-05-03 12:25:07" ["Modified"]=> string(19) "2011-05-03 12:25:07" ["Active"]=> bool(true) } 
[12]=> object(stdClass)#18 (4) { ["ID"]=> int(226752) ["Created"]=> string(19) "2011-05-17 00:14:51" ["Modified"]=> string(19) "2011-05-25 10:48:22" ["Active"]=> bool(true) } 
[13]=> object(stdClass)#19 (4) { ["ID"]=> int(2231971) ["Created"]=> string(19) "2011-05-18 16:37:50" ["Modified"]=> string(19) "2011-05-18 16:40:12" ["Active"]=> bool(true) } 
[14]=> object(stdClass)#20 (4) { ["ID"]=> int(2970219) ["Created"]=> string(19) "2011-09-05 10:34:14" ["Modified"]=> string(19) "2011-09-05 10:34:14" ["Active"]=> bool(true) } 
[15]=> object(stdClass)#21 (4) { ["ID"]=> int(24178) ["Created"]=> string(19) "2011-11-18 18:54:16" ["Modified"]=> string(19) "2011-11-23 13:44:18" ["Active"]=> bool(true) } 
[16]=> object(stdClass)#22 (4) { ["ID"]=> int(3160171) ["Created"]=> string(19) "2012-01-18 10:55:09" ["Modified"]=> string(19) "2012-01-18 14:04:18" ["Active"]=> bool(true) } 
[17]=> object(stdClass)#23 (4) { ["ID"]=> int(394795) ["Created"]=> string(19) "2012-02-10 10:14:15" ["Modified"]=> string(19) "2012-02-10 10:14:16" ["Active"]=> bool(true) } 
[18]=> object(stdClass)#24 (4) { ["ID"]=> int(3236961) ["Created"]=> string(19) "2012-03-12 11:44:45" ["Modified"]=> string(19) "2012-03-12 13:34:37" ["Active"]=> bool(true) } 
[19]=> object(stdClass)#25 (4) { ["ID"]=> int(343578) ["Created"]=> string(19) "2012-06-07 15:24:07" ["Modified"]=> string(19) "2012-06-11 09:44:22" ["Active"]=> bool(true) } 
[20]=> object(stdClass)#26 (4) { ["ID"]=> int(3376400) ["Created"]=> string(19) "2012-07-03 13:55:40" ["Modified"]=> string(19) "2012-07-03 13:55:40" ["Active"]=> bool(true) } 
[21]=> object(stdClass)#27 (4) { ["ID"]=> int(33622) ["Created"]=> string(19) "2012-07-25 10:24:24" ["Modified"]=> string(19) "2012-07-25 10:24:24" ["Active"]=> bool(true) } 
[22]=> object(stdClass)#28 (4) { ["ID"]=> int(3404088) ["Created"]=> string(19) "2012-07-25 14:34:20" ["Modified"]=> string(19) "2012-07-25 14:34:20" ["Active"]=> bool(true) } 
[23]=> object(stdClass)#29 (4) { ["ID"]=> int(35046) ["Created"]=> string(19) "2012-07-26 15:14:13" ["Modified"]=> string(19) "2012-08-20 11:04:20" ["Active"]=> bool(true) } 
[24]=> object(stdClass)#30 (4) { ["ID"]=> int(37926) ["Created"]=> string(19) "2012-09-04 14:44:09" ["Modified"]=> string(19) "2012-09-04 14:44:09" ["Active"]=> bool(true) } 
[25]=> object(stdClass)#31 (4) { ["ID"]=> int(36657) ["Created"]=> string(19) "2012-09-17 16:14:53" ["Modified"]=> string(19) "2012-09-17 16:14:53" ["Active"]=> bool(true) } 
[26]=> object(stdClass)#32 (4) { ["ID"]=> int(32328) ["Created"]=> string(19) "2012-10-08 10:34:42" ["Modified"]=> string(19) "2012-10-08 10:44:33" ["Active"]=> bool(true) }

=} } } } 
```

有人可以帮助我也请找到一种方法来获得结果。

```
<wsdl:operation name="GetArticleSummaries"><wsdl:documentation>Get publication summaries for publications that where last created/modified after the given date. 
                lastModified not specified will return all active publications.
                RequestedPropertyTypes (PropertyTypes) not specified will return all allowed types.
                Please use RequestedPropertyTypes instead of PropertyTypes, PropertyTypes will be removed in future versions.</wsdl:documentation><wsdl:input message="tns:GetPublicationSummariesSoapIn"/><wsdl:output message="tns:GetPublicationSummariesSoapOut"/>

<wsdl:message name="GetArticleSummariesSoapIn"><wsdl:part name="parameters" element="tns:GetPublicationSummaries"/></wsdl:message>

<s:element name="GetArticleSummaries"><s:complexType><s:sequence><s:element minOccurs="1" maxOccurs="1" name="LastModified" nillable="true" type="s:dateTime"/><s:element minOccurs="0" maxOccurs="unbounded" name="PropertyTypes" type="tns:PropertyType"/><s:element minOccurs="0" maxOccurs="1" name="RequestedPropertyTypes" type="tns:ArrayOfPropertyType"/></s:sequence></s:complexType></s:element>

$result = $client->GetArticleSummaries(array('ArticleId'));
$array = (array)$result;
var_dump($array);

object(stdClass)#2 (1) { ["GetPublicationSummariesResult"]=> object(stdClass)#3 (2) { ["Errors"]=> object(stdClass)#4 (0) { } ["PublicationSummaries"]=> object(stdClass)#5 (1) { ["PublicationSummary"]=> array(27) { [0]=> object(stdClass)#6 (4) { ["ID"]=> int(1441657) ["Created"]=> string(19) "2010-05-06 15:54:50" ["Modified"]=> string(19) "2010-05-25 19:54:09" ["Active"]=> bool(true) } [1]=> object(stdClass)#7 (4) { ["ID"]=> int(1441658) ["Created"]=> string(19) "2010-05-06 15:54:50" ["Modified"]=> string(19) "2010-05-25 19:54:09" ["Active"]=> bool(true) } [2]=> object(stdClass)#8 (4) { ["ID"]=> int(1441660) ["Created"]=> string(19) "2010-05-06 15:54:50" ["Modified"]=> string(19) "2010-05-25 19:54:09" ["Active"]=> bool(true) } [3]=> object(stdClass)#9 (4) { ["ID"]=> int(1456164) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2010-05-25 19:54:07" ["Active"]=> bool(true) } [4]=> object(stdClass)#10 (4) { ["ID"]=> int(1456165) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2010-05-25 19:54:07" ["Active"]=> bool(true) } [5]=> object(stdClass)#11 (4) { ["ID"]=> int(1456166) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2010-08-16 22:44:38" ["Active"]=> bool(true) } [6]=> object(stdClass)#12 (4) { ["ID"]=> int(1456167) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2010-05-25 19:54:07" ["Active"]=> bool(true) } [7]=> object(stdClass)#13 (4) { ["ID"]=> int(1456170) ["Created"]=> string(19) "2010-05-25 19:54:07" ["Modified"]=> string(19) "2011-05-05 09:04:19" ["Active"]=> bool(true) } [8]=> object(stdClass)#14 (4) { ["ID"]=> int(1489471) ["Created"]=> string(19) "2010-07-02 11:59:26" ["Modified"]=> string(19) "2010-07-02 11:59:26" ["Active"]=> bool(true) } [9]=> object(stdClass)#15 (4) { ["ID"]=> int(1721157) ["Created"]=> string(19) "2011-03-04 09:34:11" ["Modified"]=> string(19) "2012-06-12 11:34:44" ["Active"]=> bool(true) } [10]=> object(stdClass)#16 (4) { ["ID"]=> int(1772876) ["Created"]=> string(19) "2011-04-11 12:14:29" ["Modified"]=> string(19) "2012-09-04 14:25:07" ["Active"]=> bool(true) } [11]=> object(stdClass)#17 (4) { ["ID"]=> int(1808328) ["Created"]=> string(19) "2011-05-03 12:25:07" ["Modified"]=> string(19) "2011-05-03 12:25:07" ["Active"]=> bool(true) } [12]=> object(stdClass)#18 (4) { ["ID"]=> int(1826752) ["Created"]=> string(19) "2011-05-17 00:14:51" ["Modified"]=> string(19) "2011-05-25 10:48:22" ["Active"]=> bool(true) } [13]=> object(stdClass)#19 (4) { ["ID"]=> int(1830971) ["Created"]=> string(19) "2011-05-18 16:37:50" ["Modified"]=> string(19) "2011-05-18 16:40:12" ["Active"]=> bool(true) } [14]=> object(stdClass)#20 (4) { ["ID"]=> int(1970219) ["Created"]=> string(19) "2011-09-05 10:34:14" ["Modified"]=> string(19) "2011-09-05 10:34:14" ["Active"]=> bool(true) } [15]=> object(stdClass)#21 (4) { ["ID"]=> int(2084178) ["Created"]=> string(19) "2011-11-18 18:54:16" ["Modified"]=> string(19) "2011-11-23 13:44:18" ["Active"]=> bool(true) } [16]=> object(stdClass)#22 (4) { ["ID"]=> int(2160171) ["Created"]=> string(19) "2012-01-18 10:55:09" ["Modified"]=> string(19) "2012-01-18 14:04:18" ["Active"]=> bool(true) } [17]=> object(stdClass)#23 (4) { ["ID"]=> int(2194795) ["Created"]=> string(19) "2012-02-10 10:14:15" ["Modified"]=> string(19) "2012-02-10 10:14:16" ["Active"]=> bool(true) } [18]=> object(stdClass)#24 (4) { ["ID"]=> int(2236961) ["Created"]=> string(19) "2012-03-12 11:44:45" ["Modified"]=> string(19) "2012-03-12 13:34:37" ["Active"]=> bool(true) } [19]=> object(stdClass)#25 (4) { ["ID"]=> int(2343578) ["Created"]=> string(19) "2012-06-07 15:24:07" ["Modified"]=> string(19) "2012-06-11 09:44:22" ["Active"]=> bool(true) } [20]=> object(stdClass)#26 (4) { ["ID"]=> int(2376900) ["Created"]=> string(19) "2012-07-03 13:55:40" ["Modified"]=> string(19) "2012-07-03 13:55:40" ["Active"]=> bool(true) } [21]=> object(stdClass)#27 (4) { ["ID"]=> int(2403622) ["Created"]=> string(19) "2012-07-25 10:24:24" ["Modified"]=> string(19) "2012-07-25 10:24:24" ["Active"]=> bool(true) } [22]=> object(stdClass)#28 (4) { ["ID"]=> int(2404088) ["Created"]=> string(19) "2012-07-25 14:34:20" ["Modified"]=> string(19) "2012-07-25 14:34:20" ["Active"]=> bool(true) } [23]=> object(stdClass)#29 (4) { ["ID"]=> int(2405046) ["Created"]=> string(19) "2012-07-26 15:14:13" ["Modified"]=> string(19) "2012-08-20 11:04:20" ["Active"]=> bool(true) } [24]=> object(stdClass)#30 (4) { ["ID"]=> int(2447926) ["Created"]=> string(19) "2012-09-04 14:44:09" ["Modified"]=> string(19) "2012-09-04 14:44:09" ["Active"]=> bool(true) } [25]=> object(stdClass)#31 (4) { ["ID"]=> int(2466657) ["Created"]=> string(19) "2012-09-17 16:14:53" ["Modified"]=> string(19) "2012-09-17 16:14:53" ["Active"]=> bool(true) } [26]=> object(stdClass)#32 (4) { ["ID"]=> int(2502328) ["Created"]=> string(19) "2012-10-08 10:34:42" ["Modified"]=> string(19) "2012-10-08 10:44:33" ["Active"]=> bool(true) } } } } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:42:37.810

您有一个关联的外部数组。它唯一的关键是`GetArticleSummariesResult`. `ArticleSummaries`是该数组中具有一个属性`ArticleSummary`的对象，它是一个对象数组。您要查找的值 ( `ID`) 是对象属性。

```
$outer_array: array, access with []
GetArticleSummariesResult: object stdClass
ArticleSummaries: object stdClass, access properties with ->
ArticleSummary: array with numeric indices, access with []
Objects in ArticleSummary array: object stdClass, access properties with -> 
```

例子：

```
echo $outer_array['GetArticleSummariesResult']->ArticleSummaries->ArticleSummary[0]->ID;
// 21557
echo $outer_array['GetArticleSummariesResult']->ArticleSummaries->ArticleSummary[0]->Created;
// 2010-05-06     15:54:50
echo $outer_array['GetArticleSummariesResult']->ArticleSummaries->ArticleSummary[5]->ID;
// 24166 
```

在一个循环中：

```
foreach ($outer_array['GetArticleSummariesResult']->ArticleSummaries->ArticleSummary as $summary) {
  // Print the id and created date
  echo $summary->ID . " " . $summary->Created . "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:43:35.813

```
 $result = array(); //your result

    foreach($result["GetArticleSummariesResult"]->ArticleSummaries->ArticleSummary as $sum)
    {

       //Search ID u want
       if($sum->ID == 009831)
          {
              //I got you.
          }
     } 
```

# python - 关于python mysqldb TypeError

> ID：12882579
> 
> 赞同：1
> 
> 时间：2012-10-14T13:15:13.507
> 
> 标签：python, format, arguments, mysql-python

我不知道是什么问题。你能帮我吗？

```
cur = conn.cursor()
sql = "select count(*) from sbox_trig where date > CURDATE() and name ='bw109nocd%2Ezip'"
cur.execute(sql)

Exception Type: TypeError
Exception Value: not enough arguments for format string 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:25:00.060

双倍`%`百分比符号：

```
sql = "select count(*) from sbox_trig where date > CURDATE() and name ='bw109nocd%%2Ezip'" 
```

否则，该`%2E`部分将被解释为[浮点数的字符串格式化程序。](http://docs.python.org/library/stdtypes.html#string-formatting)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:27:55.427

您实际上可能在 MySQLdb 模块中发现了一个错误。我怀疑它正在识别字符串文字中的百分号。尝试删除 % 的相同查询（并且没有其他任何更改）以验证是否是这种情况。如果是，您可能应该在模块的错误数据库中发布一条消息。

此外，如果这是问题的根源，短期解决方法是使用两个 % 符号（即 bw109nocd%%2Ezip），以便字符串解释器将其视为文字百分号。

还要注意，如果你想在这里得到有用的信息，你应该包括 Python、MySQL 和 MySQLdb 的版本；包括您正在使用的操作系统可能会有所帮助，尽管它可能不是这里最重要的事情。对于数据库问题，至少查看表模式也很有帮助。

我刚刚在我的一个数据库上测试了您的代码变体，没有错误；我正在运行 Ubuntu 12.04、Python 2.7.3 以及 MySQL 和 MySQLdb 的任何库存版本。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T13:36:06.263

我不将 MySQL 用于 Python，但如果我不得不猜测，它会将 %2E 解释为 printf 样式的格式参数（请参阅[此页面](http://structure.usc.edu/mysqldb/MySQLdb-3.html#ss3.1 "参数样式")）并期待一个参数。您可能应该尝试以下方法：

```
cur = conn.cursor()
sql = "select count(*) from sbox_trig where date > CURDATE() and name = %s"
cur.execute(sql, ("bw109nocd%2Ezip",)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T13:56:46.890

Instead of specifying data directly in query, its better to first store it in some local variable and then pass the variable in the query.

> cur = conn.cursor()
> 
> temp = "bw109nocd%2Ezip"
> 
> sql = "select count(*) from sbox_trig where date > CURDATE() and name = '%s' " % temp
> 
> cur.execute(sql)

# restlet - 从 NIO HTTP 下载到 Restlet ServerResource 响应的管道数据

> ID：12882580
> 
> 赞同：2
> 
> 时间：2012-10-14T13:15:15.137
> 
> 标签：restlet

我有一个 ServerResource 通过发回二进制数据来响应 GET 请求。问题是二进制数据的源将通过单独的 REST 调用（可能通过[HttpAsyncClient](http://hc.apache.org/httpcomponents-asyncclient-dev/index.html)）异步下载。是否可以创建一个表示，当它从异步下载到达时，我可以将数据提供给它？我需要能够在不阻塞任何线程的情况下做到这一点，因此需要某种 NIO 解决方案。

我怀疑我可以用[WriteableRepresetation](http://www.restlet.org/documentation/2.0/jee/api/org/restlet/representation/WritableRepresentation.html)做到这一点，但我不确定文档所说的如何

> 为此，您只需要创建一个子类并覆盖抽象的 Representation.write(WritableByteChannel) 方法。当需要实际表示的内容时，连接器稍后将回调此方法。

暗示在调用该方法时，所有内容必须已经可用。

我正在使用 v2.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T23:19:33.150

在玩了一会儿之后，看起来这可以使用[ReadableRepresentation](http://www.restlet.org/documentation/snapshot/jse/api/org/restlet/representation/ReadableRepresentation.html)。我不知道是否有比使用管道更好的方法来创建 ReadableByteChannel，但这是我看到的唯一方法，而不必实现我自己的 Channel。

```
private static final byte[] HELLO_WORLD = "hello world\n".getBytes(Charsets.UTF_8);

public static class HelloWorldResource extends ServerResource {
    @Get
    public Representation represent() throws Exception {
        final Pipe pipe = Pipe.open();

        // this simulates another process generating the data
        Thread t = new Thread(new Runnable() {
            private final ByteBuffer buf = ByteBuffer.allocate(1);
            private final Pipe.SinkChannel sink = pipe.sink();

            private int offset = 0;

            @Override
            public void run() {
                while (offset < HELLO_WORLD.length) {
                    try {
                        buf.clear();
                        buf.put(HELLO_WORLD[offset++]);
                        buf.flip();

                        while (buf.hasRemaining()) {
                            sink.write(buf);
                        }

                        Thread.sleep(500);
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                }

                try {
                    sink.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        });
        t.setDaemon(true);
        t.start();

        return new ReadableRepresentation(pipe.source(), MediaType.TEXT_PLAIN);
    }
}

public static class HelloWorldApplication extends Application {
    @Override
    public synchronized Restlet createInboundRoot() {
        Router router = new Router(getContext());
        router.attach("/hello", HelloWorldResource.class);

        return router;
    }
}

public static void main(String[] args) throws Exception {
    Component component = new Component();
    component.getDefaultHost().attach("", new HelloWorldApplication());

    Server server = component.getServers().add(Protocol.HTTP, 8090);

    component.start();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-07T09:21:11.437

在玩弄了上述解决方案之后，我发现您可以像这样创建一个 ReadableByteChannel：

```
 ByteArrayInputStream stream = new ByteArrayInputStream(myByteArray);
        ReadableByteChannel channel = Channels.newChannel(stream); 
```

不过，上面的答案很好，为我省去了很多麻烦。

# c - MIPS64 程序集中的双精度值数组

> ID：12882581
> 
> 赞同：0
> 
> 时间：2012-10-14T13:15:30.487
> 
> 标签：c, arrays, assembly, mips

我正在尝试将一些 C 代码转换为 MIPS64 程序集。目前我需要翻译以下代码，但我无法得到任何工作。您如何将其保存到 .data 寄存器中？

```
double b[MAX_TAP] = {
    3.558363, -0.542859, -0.928322, -0.993428, 4.643953, -5.909149, 1.722120, -1.854375,
    -1.967672, -2.170269, 0.673272, 0.182548, -4.812593, 0.818270, 0.889598, 0.322937,
    -0.430576, -4.259421, -0.983597, 4.285341, -2.333795, 1.856496, -4.711222, -0.517585,
    -8.376492, -1.440117, -6.255069, -0.000203, 0.881922, 6.955272, -0.209273, 5.219892 
}; 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:19:14.910

写吧：

```
.data
b:
.double 3.558363, -0.542859, ... 
```

# php - 如何在每次新点击时闪烁（隐藏/清除/删除）先前附加的值？

> ID：12882588
> 
> 赞同：0
> 
> 时间：2012-10-14T13:16:22.573
> 
> 标签：php, jquery

每当我单击时，都会附加新值，但也会显示以前的值。如何在每次新点击时清除先前附加的值？

这是php函数中使用的onclick

```
echo "<a href='#' onclick=chat_com('$name'); >$name </a><br>";  // suppose this dispalyes a,b,c 
```

这是附加此值的jquery函数。

```
function chat_com(name) {
    $('#appendto').append(name);
} 
```

这是附加值的 HTML div。

```
<div id="appendto"></div> 
```

在第一次单击`a`时显示，在第二次单击时`a,b`仅显示`b`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:18:48.483

```
$("#appendto").empty().append(name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:18:29.263

用这个

```
function chat_com(name) {
$("#appento").html("")

$('#appendto').append(name);

   } 
```

或者

```
 $('#appendto').empty().append(name); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T13:18:46.207

而不是追加使用html。这将自动刷新旧的 html。

```
$('#appendto').html(name); 
```

# c# - 用数组中的随机项填充列表框

> ID：12882589
> 
> 赞同：1
> 
> 时间：2012-10-14T13:16:30.997
> 
> 标签：c#, arrays, random, listbox

我有两个数组；富豪汽车和汽车。我想用随机物品（4 个来自汽车和 1 个来自 Richcars）填充 lstBoxGarage 现在我不知道该怎么做，我希望你们能帮助我。目前我有这个，但这显然会用所有项目填充列表框..

```
 for (int i = 0; i < richcars.GetLength(0); i++)
  {
    lstBoxGarage.Items.Add(richcars[i, 0]);
  }

  for (int i = 0; i < cars.GetLength(0); i++)
  {
    lstBoxGarage.Items.Add(cars[i, 0]);
  } 
```

任何人都可以帮我解决这个随机的事情吗？

这是我的两个数组

```
 string[,] richcars = new string[10, 2] {
    { "Porsche Cayenne Turbo", "108000" },
    { "Porsche Panamera GTS", "111000"},
    { "Porsche 911 Carrera 4S", "105000"},
    { "Porsche Cayman S", "65000"},
    { "Porsche 911 Turbo", "140000"},
    { "Ferrari California", "190000"},
    { "BMW M3", "60000"},
    { "BMW M6", "105000"},
    { "Maserati GranTurismo S", "125000"},
    { "Audi R8 V10", "150000" }
};

      string[,] cars = new string[6, 2] {
    { "VW Golf GTI", "25000" },
    { "Mini Cooper S", "25000" },
    { "Jeep Wrangler", "25000" },
    { "Audi A4", "35000" },
    { "Nissan 370Z ", "35000" },
    { "Ford Focus ST", "25000" }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:19:44.630

您可以使用 Random 类生成随机数

```
int limit = richcars.GetLength(0)
 for (int i = 0; i < limit ; i++)
 {
    Random random = new Random();

    int randomNumber = random.Next(0, limit);
    if (lstBoxGarage.FindStringExact(richcars[randomNumber, 0]) == -1)
       lstBoxGarage.Items.Add(richcars[randomNumber , 0]);
    else
        i--;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:43:12.993

试试这个 ：

```
Random random = new Random();
lstBoxGarage.Add(richcars[random.Next(0,richcars.GetLength(0)),0]);
for (int i = 0; i < 4; i++)
    {
        var car = cars[random.Next(0,cars.GetLength(0)),0];
        if (lstBoxGarage.Contains(car))
        {
            i--;
        }
        else
        {
            lstBoxGarage.Add(car);
        }
    } 
```

但请注意，这仅存储汽车名称，要存储价格，您应该创建一个具有名称和价格属性的 Car 类

# iphone - typescript .ts 文件的 UTI 是什么？

> ID：12882590
> 
> 赞同：1
> 
> 时间：2012-10-14T13:16:33.137
> 
> 标签：iphone, cocoa, typescript

有什么地方可以找到打字稿文件的官方[UTI字符串吗？](http://en.wikipedia.org/wiki/Uniform_Type_Identifier)

我需要将它添加到我的 Cocoa/Cocoa-touch 应用程序中的 Info.plist 我知道我可以轻松添加`com.microsoft.typescript`，但我宁愿为其添加官方 UTI :)

非常感谢任何帮助

PS：这是系统中声明[的一些UTI的列表](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/UTIRef/Articles/System-DeclaredUniformTypeIdentifiers.html%23//apple_ref/doc/uid/TP40009259-SW1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T16:24:23.823

除非更改成本太高，否则我建议`com.microsoft.typescript`在正式 UTI 公布之前使用您的建议。

# opengl - OpenGL 恢复由变换矩阵完成的所有变换

> ID：12882594
> 
> 赞同：0
> 
> 时间：2012-10-14T13:16:50.167
> 
> 标签：opengl, matrix, mouseover, transformation

我想在一个点上应用一个反向变换矩阵。它的用途是什么？：我的应用程序（游戏）将变换应用到几个正方形对象中，每个正方形对象都有自己的变换矩阵，在绘制它时会应用这些变换矩阵。

但我需要知道鼠标是否在每个对象上。所以，对于每个对象，我得到鼠标位置，并尝试应用所有反转的转换。将正方形和鼠标位置恢复到其原点。

如果我是对的，这样我就可以将转换后的鼠标位置与对象的位置进行比较。

问题是..：我如何应用这种反向转换？我尝试了逆矩阵，但它始终存在...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T16:30:13.287

如果变换矩阵没有逆矩阵（对于大多数常见的变换来说几乎不可能），那么就*无法*撤消变换。这就是没有逆的意思：转换是单向的。

此外，通常这样做的方式不是将鼠标坐标转换为世界空间，而是将对象（或其边界框）转换为*窗口*空间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T02:33:23.390

您可能想尝试[gluUnProject()](http://www.opengl.org/sdk/docs/man/xhtml/gluUnProject.xml)。

# ajax - 如何在 MVC.NET 中使用 Ajax 调用从父类继承的方法

> ID：12882597
> 
> 赞同：1
> 
> 时间：2012-10-14T13:17:47.767
> 
> 标签：ajax, asp.net-mvc, jquery-ui

在我的应用程序中，我有一个控制器消息

```
public class MessageController : BaseController
{
   ...
} 
```

BaseController 是一个抽象类并包含一个方法 FindUserForMessages。此方法必须在此控制器中，因为此“BaseController”在 3 个类似的 Web 应用程序中用作父级，并包含所有应用程序的通用功能。

```
public abstract class BaseController : Controller
{
    [Authorize]
    [HttpPost]
    [AcceptVerbs(HttpVerbs.Post)]
    public JsonResult FindUser(string userName, int maxRecords)
    {
        try
        {
            return Json(new JsonResult()
                {
                    IsError = false,
                    ErrorMessage = string.Empty,
                    Data = (from u in AccountModel.FindUser(userName, false).Take(maxRecords)
                            select new
                            {
                                UserName = u.UserName,
                                UserId = u.ProviderUserKey,
                                IsOnlien = u.IsOnline
                            })
                });
        }
        catch (Exception ex)
        {
            ...
        }
    }
} 
```

我想将此方法用于 JqueryUI AutoComplete 小部件的来源。我正在尝试通过 Ajax 调用此方法：

```
$("#txtQuickMessageSendTo").autocomplete({
    source: function (request, response) {
        $.ajax({
            url: "/Message/FindUser",
            data: {
                userName: request.term,
                maxRecords: 10
            },
            success: function (resultObj) {
                if (resultObj.IsError) {
                    handleAjaxError(null, null, null, null, resultObj.ErrorMessage, null);
                    return;
                }
                else {
                    response($.map(data.Data, function (item) {
                        return { 
                            label: item.UserName,
                            value: item.ProviderUserKey
                        }
                    }));
                }
            }
        });
    },
    minLength: 2,
    select: function (event, ui) {
        //log(ui.item ? "Selected: " + ui.item.label : "Nothing selected, input was " + this.value);
    },
    open: function () {
        $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
    },
    close: function () {
        $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
    }
}); 
```

我使用 Fiddler2 进行 Web 调试，请求中都是参数（用户名和 maxRecords），但服务器抛出错误：

```
Description: HTTP 404\. The resource you are looking for (or one of its dependencies) could have been removed, had its name changed, or is temporarily unavailable.  Please review the following URL and make sure that it is spelled correctly. 

Requested URL: /Message/FindUserForMessages 
```

参数是好的，但为什么我不能调用这个方法？

感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:02:55.897

**1）**您的错误消息说您正在尝试访问`FindUserForMessages`方法。但是您代码中的方法是`FindUser`！

**2）**此外，始终使用 Html 辅助方法来获取操作方法的路径。所以更换

```
url: "/Message/FindUser", 
```

和

```
url: "@Url.Action("FindUser","Message")", 
```

**3)**默认情况下，ajax 动作类型是`GET`. 您的操作方法用属性装饰`[HttpPost]`。因此，要么从那里删除它，要么在你进行 ajax 调用时提及它。还要确保您确实需要该`Authorize`属性来满足您的要求。

```
public JsonResult FindUser(string userName, int maxRecords)
{
  return Json( new { YourJsonDemo="replace here" }, 
                                                  JsonRequestBehaviour.AllowGet);
} 
```

或者在客户端说这是一个`POST`请求。

```
 $.ajax({
          url: "@Url.Action("FindUser","Message")",
          type: 'POST',
         //remaining code 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:00:08.877

FindUser 方法只接受 post。删除 [HttpPost] 属性（您将需要使用 JsonRequestBehavior.AllowGet - 不推荐），或确保 jquery ajax 选项指定 type = post。

# tomcat - HttpExtensionProc::jk_isapi_plugin.c (2328): service() 失败，出现 http 错误 503

> ID：12882599
> 
> 赞同：3
> 
> 时间：2012-10-14T13:18:01.487
> 
> 标签：tomcat, iis-6, isapi-rewrite, ajp

我们在虚拟机上使用 isapi 重定向器面临两个问题。

每隔几分钟，日志就会显示 http 错误 503：

```
...
[Sun Oct 14 14:25:02.465 2012] [8428:7856] [error] ajp_send_request::jk_ajp_common.c     (1662): (application) failed sending request on a fresh connection (recoverable), socket -1   (errno=54)
[Sun Oct 14 14:25:02.465 2012] [8428:7856] [error] ajp_service::jk_ajp_common.c (2643): (application) connecting to tomcat failed.
[Sun Oct 14 14:25:02.465 2012] [8428:7856] [error] HttpExtensionProc::jk_isapi_plugin.c (2328): service() failed with http error 503
... 
```

日志充满了 WriteClient 错误

```
...
[Sun Oct 14 14:24:53.559 2012] [8428:1300] [error]  isapi_write_client::jk_isapi_plugin.c (1286): WriteClient failed with 10054 (0x00002746)
[Sun Oct 14 14:24:54.121 2012] [2424:7324] [error] isapi_write_client::jk_isapi_plugin.c (1286): WriteClient failed with 10054 (0x00002746)
[Sun Oct 14 14:24:54.199 2012] [8648:10692] [error] isapi_write_client::jk_isapi_plugin.c (1286): WriteClient failed with 10054 (0x00002746)
... 
```

我们正在使用 Tomcat 5.5.26，它使用 VMvare 上的 Jakarta 连接器（isapi_redirector.dll）连接到 IIS 6.0（Windows 2003 Server）。

文件 worker.properties 是：

```
worker.list=application
worker.maintain=60

worker.application.type=ajp13

worker.application.host=127.0.0.1
worker.application.port=8009

connection_pool_size=400
connection_pool_minsize=200
connection_pool_timeout=600 
```

`server.xml`包含：

```
...
<Connector port="8009" 
           emptySessionPath="true"
           enableLookups="false"
           redirectPort="8443"
           protocol="AJP/1.3"
           minSpareThreads="20"
           maxSpareThreads="100"
           maxThreads="400"
           bufferSize="8192"
           connectionTimeout="600000" 
           />
... 
```

# twitter-bootstrap - Bootstrap 垂直对齐和子导航

> ID：12882601
> 
> 赞同：3
> 
> 时间：2012-10-14T13:18:21.803
> 
> 标签：twitter-bootstrap

我在定位二维菜单时遇到了问题。它像图像一样在同一行中，我想将它放在行的底部。现在它被放置在行的顶部，如下所示：

[标头现在的样子。](http://i.stack.imgur.com/WQIK6.png)

这是我的代码：

```
<div class="row">
    <div class="span2">
        <img src="stockpulse.png" class="img-rounded">
    </div>
    <ul class="nav nav-tabs">
        <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">Dropdown<b class="caret"></b></a>
            <ul class="dropdown-menu">
                <li><a  href="#">Action</a></li>
                <li><a  href="#">Action</a></li>
                <li><a  href="#">Action</a></li>
             </ul>
        </li>
        <li class="dropdown">
                ...
    </ul>
</div> 
```

它应该如下所示：

[带有下拉菜单的标题显示子站点上的子类别：](http://i.stack.imgur.com/VMaxY.png)

如果我想永久显示子类别，在导航栏中使用下拉菜单是否正确？还是导航栏中的导航更有用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T14:09:51.657

这是你在找什么：http: [//jsfiddle.net/8xa5h/](http://jsfiddle.net/8xa5h/)

基本上，我所做的只是`margin-top`根据图像的高度向导航栏添加一个。

```
.navbar .nav {
    margin-top: 120px;       
} 
```

# android - 错误：源附件不包含文件 Activity.class 的源

> ID：12882606
> 
> 赞同：1
> 
> 时间：2012-10-14T13:18:47.000
> 
> 标签：android, android-layout, android-fragments

您好，我是 android 编程新手。在编译我正在尝试制作的程序时，出现运行时错误；

> 源附件不包含文件 Activity.class 的源

这里是 AnroidManifest.xml 文件的内容

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.fragments"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="11"
    android:targetSdkVersion="15" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application> 
```

这是main.xml的内容

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<fragment
    android:name="com.example.fragments.Fragment1"
    android:id="@+id/fragment1"
    android:layout_weight="1"
    android:layout_width="0px"
    android:layout_height="match_parent" />

<fragment
    android:name="com.example.fragments.Fragment2"
    android:id="@+id/fragment2"
    android:layout_weight="1"
    android:layout_width="0px"
    android:layout_height="match_parent" /> 
```

这里是 MainActivity.java 的内容

```
package com.example.fragments;

import android.os.Bundle;
import android.app.Activity;

public class MainActivity extends Activity 
{

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

} 
```

这是fragment1.xml的内容

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#00FF00" >

    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is fragment #1"
        android:textColor="#000000"
        android:textSize="25sp" />

</RelativeLayout> 
```

这里是 Fragment1.java 的内容

```
package com.example.fragments;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Fragment1 extends Fragment
{
    @Override
    public View onCreateView(LayoutInflater inflater,ViewGroup container, Bundle savedInstanceState)
    {
        return inflater.inflate(R.layout.fragment1,container,false);
    }
} 
```

这是fragment2.xml的内容

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#FFEE00" >

    <TextView 
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:text="This is fragment #2"
        android:textColor="#000000"
        android:textSize="25sp" />

</RelativeLayout> 
```

这里是 Fragment2.java 的内容

```
package com.example.fragments;

import android.annotation.TargetApi;
import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

@TargetApi(11)
public class Fragment2 extends Fragment
{
    @Override
    public View onCreateView(LayoutInflater inflater,ViewGroup container, Bundle savedInstanceState)
    {
        return inflater.inflate(R.layout.fragment2,container,false);
    }
} 
```

提前感谢大家的帮助。

# jquery - 找出元素是由哪个类标识的

> ID：12882609
> 
> 赞同：0
> 
> 时间：2012-10-14T13:18:50.607
> 
> 标签：jquery

我正在为一个网站制作一个小型流体网格系统，该系统将具有 .g1 到 .g5 类。

我想使用其中一个类获取所有元素，仅删除该类，将它们包装在容器中，然后将已删除的类添加到新容器中。问题是，我不知道如何找出元素是由哪个类识别的，并将相同的类添加到容器中。

我这样做是为了能够在元素之间添加固定边距。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:22:13.320

您可以使用`$(this)`来查找我们单击了哪个元素。而不是简单地删除其类并附加到`conatiner`或添加`.container`类

```
$("div[class^=g]").click(function(){
var cls=$(this).attr("class");
$(this).revoveClass($(this).attr("class"));
$("#container").addClass(cls)
}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:25:55.183

您可以使用正则表达式。[jsfiddle](http://jsfiddle.net/SaHq4/1/)

```
$(document).ready(function(){   
  $("div[class*='g']").each(function(){      
        var cls = this.className.match(/g\d{1}\s/);
        if(cls){
            $(this).removeClass(cls[0].trim());
        }
    }); 
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:50:41.953

您需要记住您删除的类以将其添加到另一个元素？已经尝试过 jquery 数据[http://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)吗？

# bash - 如何让 bc 以科学（又名指数）表示法处理数字？

> ID：12882611
> 
> 赞同：48
> 
> 时间：2012-10-14T13:19:01.317
> 
> 标签：bash, numeric, floating-accuracy, bc

`bc`不喜欢用科学记数法（又名指数记数法）表示的数字。

```
$ echo "3.1e1*2" | bc -l
(standard_in) 1: parse error 
```

但我需要用它来处理一些用这种表示法表示的记录。有没有办法`bc`理解指数符号？如果没有，我该怎么做才能将它们翻译成`bc`可以理解的格式？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-14T13:19:01.317

不幸的是， bc 不支持科学记数法。

但是，它可以转换为 bc 可以处理的格式，使用sed[中的 POSIX 扩展正则表达式：](http://pubs.opengroup.org/onlinepubs/9699919799/basedefs/V1_chap09.html#tag_09_03)

```
sed -E 's/([+-]?[0-9.]+)[eE]\+?(-?)([0-9]+)/(\1*10^\2\3)/g' <<<"$value" 
```

您可以将“e”（或“e+”，如果指数为正）替换为“*10^”，bc 会立即理解。即使指数为负数或该数字随后乘以另一个幂，这也有效，并且允许跟踪有效数字。

如果您需要坚持基本的正则表达式（BRE），那么应该使用它：

```
sed 's/\([+-]\{0,1\}[0-9]*\.\{0,1\}[0-9]\{1,\}\)[eE]+\{0,1\}\(-\{0,1\}\)\([0-9]\{1,\}\)/(\1*10^\2\3)/g' <<<"$value" 
```

* * *

来自评论：

*   一个简单的 bash[模式](http://www.gnu.org/software/bash/manual/html_node/Pattern-Matching.html#Pattern-Matching)匹配无法工作（感谢[@mklement0](https://stackoverflow.com/users/45375/mklement0)），因为无法同时匹配 e+ 并保持 - 与 e- 不匹配。

*   一个正常工作的 perl 解决方案（感谢[@mklement0](https://stackoverflow.com/users/45375/mklement0)）

    ```
    $ perl -pe 's/([-\d.]+)e(?:\+|(-))?(\d+)/($1*10^$2$3)/gi' <<<"$value" 
    ```

*   感谢[@jwpat7](https://stackoverflow.com/users/837847/james-waldby-jwpat7)和[@Paul Tomblin](https://stackoverflow.com/users/3333/paul-tomblin)澄清了sed 语法的各个方面，以及[@isaac](https://stackoverflow.com/users/9110606/isaac)和[@mklement0](https://stackoverflow.com/users/45375/mklement0)改进了答案。

编辑：

多年来，答案发生了很大变化。上面的答案是截至 2018 年 5 月 17 日的最新迭代。这里报告的先前尝试是纯 bash 中的解决方案（[@ormaaj](https://stackoverflow.com/users/495451/ormaaj)）和 sed中的解决方案（ [@me](https://stackoverflow.com/users/1714385/ferdinando-randisi)），至少在某些情况下会失败。我将它们留在这里只是为了理解评论，其中包含比这个答案更好的对所有这些错综复杂的解释。

```
value=${value/[eE]+*/*10^}  ------> Can not work.
value=`echo ${value} | sed -e 's/[eE]+*/\\*10\\^/'` ------> Fail in some conditions 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2015-03-04T03:10:19.867

让我试着**总结**一下现有的答案，并在下面对**每个答案进行评论**：

*   （a）如果您确实需要使用**`bc`任意*精度*计算**- 就像 OP 一样 - 使用[OP 自己的聪明方法](https://stackoverflow.com/a/12882612/45375)，它在***文本上将*科学记数法重新格式化为可以理解的***等效`bc`表达式***。****

**   **如果潜在的*精度损失*不是*问题***，

    *   (b) 考虑使用**`awk`或`perl`作为`bc`替代方案**；[正如jwpat7](https://stackoverflow.com/a/12884071/45375)对 awk 的回答所示，两者都天生就理解科学记数法。
    *   (c) 考虑使用**`printf '%.<precision>f'`**简单地以***文本方式转换*为常规浮点表示（小数，不带`e`/ `E`）**（[ormaaj](https://stackoverflow.com/users/495451/ormaaj)在已删除的帖子中提出的解决方案）。*

 ** * *

### (a) 将科学记数法重新格式化为等效`bc` *表达式*

该解决方案的优点**是保留了精度**：将文本表示转换为可以理解的*等效*文本表示，并且本身能够进行任意精度的计算。`bc``bc`

请参阅[OP 自己的答案](https://stackoverflow.com/a/12882612/45375)，其更新后的形式现在能够将包含多个指数符号的整个表达式转换为等效`bc`表达式。

* * *

### (b) 使用`awk`或`perl`代替`bc`计算器

注意：以下方法假定在 和 中使用对双精度浮点值的**内置****支持`awk``perl`**。正如浮点运算所固有的那样，
^(“给定任何固定位数，大多数实数计算将产生无法使用那么多位精确表示的量。因此，浮点计算的结果必须经常四舍五入为了适应它的有限表示。这种**舍入误差**是浮点计算的特征。( [http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html) ))

也就是说，

*   *GNU* awk 提供了在*构建时*支持任意精度算术的*选项- 请参阅*[https://www.gnu.org/software/gawk/manual/html_node/Gawk-and-MPFR.html](https://www.gnu.org/software/gawk/manual/html_node/Gawk-and-MPFR.html)；但是，发行版*可能包含也可能不*包含该支持 - 通过检查for和的输出来验证支持。 如果支持*可用*，您必须在给定调用中使用( ) 激活它。**`gawk --version``GNU MPFR``GNU MP`
    *`-M``--bignum`***

****   Perl 通过包提供*可选*的任意精度十进制支持`Math::BigFloat`- 请参阅[https://metacpan.org/pod/Math::BigFloat](https://metacpan.org/pod/Math::BigFloat)*** 

 ****awk**

**`awk`本机理解十进制指数（科学）表示法。**
（您通常应该只使用*十进制*表示，因为`awk`实现在它们是否支持具有其他基数的数字文字方面有所不同。）

```
awk 'BEGIN { print 3.1e1 * 2 }'  # -> 62 
```

如果使用默认`print`函数，该`OFMT`变量通过`printf`格式字符串的方式控制输出格式；（POSIX 强制）**默认值为`%.6g`，表示 6 个*有效数字*，其中特别*包括整数部分中的数字***。

请注意，如果提供科学计数法中的数字作为*输入*（与 awk 程序的文字部分相反），则必须添加`+0`以强制它为默认输出格式，如果*它本身*与 一起使用`print`：

^(根据您的语言环境和`awk`您使用的实现，您可能必须将小数点 ( ) 替换*为*适合`.`语言环境的基数字符，例如`,`在德语语言环境中；适用于 BSD `awk`, `mawk`, 和 GNU`awk`的`--posix`选项。)

```
awk '{ print $1+0 }' <<<'3.1e1' # -> 31; without `+0`, output would be the same as input 
```

修改**变量`OFMT`**会更改默认输出格式（对于带有小数部分的数字；（有效）整数始终按原样输出）。
或者，使用具有显式输出格式的**`printf`函数：**

```
awk 'BEGIN { printf "%.4f", 3.1e1 * 2.1234 }' # -> 65.8254 
```

**Perl**

**`perl`太自然地理解十进制指数（科学）表示法。**

**注意：Perl 与 awk 不同，默认情况下并非在所有类似 POSIX 的平台上都可用**；此外，它**不如 awk 轻量级**。
但是，它提供**了比 awk 更多的功能，例如本机理解十六进制和八进制整数**。

```
perl -le 'print 3.1e1 * 2'  # -> 62 
```

**我不清楚 Perl 的默认输出格式是什么，但它似乎是`%.15g`**. 与 awk 一样，您可以使用它`printf`来选择所需的输出格式：

```
perl -e 'printf "%.4f\n", 3.1e1 * 2.1234' # -> 65.8254 
```

* * *

### (c)`printf`用于将科学记数法转换为小数

如果您只是想将科学记数法（例如`1.2e-2`）转换为小数部分（例如`0.012`），`printf '%f'`可以为您完成。请注意，您将通过**浮点算术****将一种*文本*表示形式转换为*另***一种表示形式，这与**和****方法存在****相同的舍入误差**。****`awk``perl`****

 **```
printf '%.4f' '1.2e-2' # -> '0.0120'; `.4` specifies 4 decimal digits. 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-10-14T16:15:08.323

为此可以使用 awk；例如，

```
awk '{ print +$1, +$2, +$3 }' <<< '12345678e-6 0.0314159e2 54321e+13' 
```

产生（通过 awk 的默认格式 %.6g）类似的输出，
`12.3457 3.14159 543210000000000000`
而像下面两个这样的命令产生每个之后显示的输出，因为该文件`edata`包含稍后显示的数据。

```
$ awk '{for(i=1;i<=NF;++i)printf"%.13g ",+$i; printf"\n"}' < edata`
31 0.0312 314.15 0 
123000 3.1415965 7 0.04343 0 0.1 
1234567890000 -56.789 -30 

$ awk '{for(i=1;i<=NF;++i)printf"%9.13g ",+$i; printf"\n"}' < edata
       31    0.0312    314.15         0 
   123000 3.1415965         7   0.04343         0       0.1 
1234567890000   -56.789       -30 

$ cat edata 
3.1e1 3.12e-2 3.1415e+2 xyz
123e3 0.031415965e2 7 .4343e-1 0e+0 1e-1
.123456789e13 -56789e-3 -30 
```

此外，关于使用 的解决方案`sed`，最好通过 regex删除表单`45e+3`中的加号，而不是单独的表达式。例如，在我的 GNU sed 版本 4.2.1 和 bash 版本 4.2.24 的 linux 机器上，命令 会产生输出`e``[eE]+*``sed`
`sed 's/[eE]+*/*10^/g' <<< '7.11e-2 + 323e+34'`
`sed 's/[eE]+*/*10^/g' <<< '7.11e-2 + 323e+34' | bc -l`

`7.11*10^-2 + 323*10^34`
`3230000000000000000000000000000000000.07110000000000000000`

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-10-08T15:25:09.273

您还可以定义一个调用 awk 的 bash 函数（一个好的名称应该是等号“=”）：

```
= ()
{
    local in="$(echo "$@" | sed -e 's/\[/(/g' -e 's/\]/)/g')";
    awk 'BEGIN {print '"$in"'}' < /dev/null
} 
```

然后你可以在 shell 中使用所有类型的浮点数学。请注意，这里使用方括号而不是圆括号，因为后者必须通过引号保护免受 bash 的影响。

```
> = 1+sin[3.14159] + log[1.5] - atan2[1,2] - 1e5 + 3e-10
0.94182 
```

或在脚本中分配结果

```
a=$(= 1+sin[4])
echo $a   # 0.243198 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-31T13:30:22.153

幸运的是，有 printf 来完成格式化工作：

上面的例子：

```
printf "%.12f * 2\n" 3.1e1 | bc -l 
```

或浮点比较：

```
n=8.1457413437133669e-02
m=8.1456839223809765e-02

n2=`printf "%.12f" $n`
m2=`printf "%.12f" $m`

if [ $(echo "$n2 > $m2" | bc -l) == 1  ]; then 
   echo "n is bigger"
else
   echo "m is bigger"
fi 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-13T08:57:39.220

OP 的管道版本接受了答案

```
$ echo 3.82955e-5 | sed 's/[eE]+*/\*10\^/'
3.82955*10^-5 
```

将输入传递给 OP 接受的 sed 命令会产生额外的反斜杠，例如

```
$ echo 3.82955e-5 | sed 's/[eE]+*/\\*10\\^/'
3.82955\*10\^-5 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-10-20T16:14:24.340

我设法用一点技巧做到了。你可以做这样的事情 -

```
scientific='4.8844221e+002'
base=$(echo $scientific | cut -d 'e' -f1)
exp=$(($(echo $scientific | cut -d 'e' -f2)*1))
converted=$(bc -l <<< "$base*(10^$exp)")
echo $converted 
>> 488.4422100 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-11-15T12:44:39.500

试试这个（在使用 m4 处理的 CFD 输入数据的示例中找到了这个：）

```
T0=4e-5
deltaT=2e-6
m4 <<< "esyscmd(perl -e 'printf (${T0} + ${deltaT})')" 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-10-23T18:19:18.123

试试这个：（使用 bash）

```
printf "scale=20\n0.17879D-13\n" | sed -e 's/D/*10^/' | bc 
```

或这个：

```
 num="0.17879D-13"; convert="`printf \"scale=20\n$num\n\" | sed -e 's/D/*10^/' | bc`" ; echo $convert
.00000000000001787900
num="1230.17879"; convert="`printf \"scale=20\n$num\n\" | sed -e 's/D/*10^/' | bc`" ; echo $convert
1230.17879 
```

如果你有正指数，你应该使用这个：

```
num="0.17879D+13"; convert="`printf \"scale=20\n$num\n\" | sed -e 's/D+/*10^/' -e 's/D/*10^/' | bc`" ; echo $convert
1787900000000.00000 
```

最后一个将处理扔给它的每个数字。如果您有以“e”或“E”为指数的数字，则可以调整“sed”。

你可以选择你想要的规模。*****

# generics - t-sql - 结合表元数据和列值

> ID：12882616
> 
> 赞同：1
> 
> 时间：2012-10-14T13:19:34.060
> 
> 标签：generics, sql-server-2012, dynamic-sql

我正在尝试像这样在 T-SQL 中编写查询：

```
select *
from
(select t.name tablename
from sys.columns c join sys.tables t on c.object_id = t.object_id
where c.name like 'column1'
) candidatetables
where tablename.column2 = 3 
```

问题出在最后一个过滤器中。我收到此错误“无法绑定多部分标识符“tablename.column2”。”。

此查询应获取其架构中具有列“column1”的表，并且该列的值肯定存在于所有表中的名为“column2”的列的值等于 3。是否可以编写最后一个过滤器以不同的方式来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:41:27.077

您的查询不会查询您找到的表。您必须动态构建一个查询来查询您找到的每个表，然后使用`union all`.

尝试这个：

```
declare @Col2Value int = 3
declare @SQL nvarchar(max)

select @SQL = 
(
  select 'union all '+
         'select top(1) '''+t.name+''' as TableName '+
         'from '+quotename(t.name)+' '+
         'where Column2 = '+cast(@Col2Value as nvarchar(10))+' '
  from sys.columns c
    inner join sys.tables t
      on c.object_id = t.object_id
  where c.name = 'Column1'
  for xml path(''), type
).value('substring(./text()[1], 11)', 'nvarchar(max)')

exec (@SQL) 
```

上面的代码将构建并执行一个如下所示的查询：

```
select top(1) 'Table1' as TableName
from [Table1]
where Column2 = 3
union all
select top(1) 'Table2' as TableName
from [Table2] 
where Column2 = 3
union all 
select top(1) 'Table3' as TableName
from [Table3] 
where Column2 = 3 
```

[SQL小提琴](http://sqlfiddle.com/#!6/dcbf6/1/0)

# android - 如何使用 Twilio 启用移动优化登录？

> ID：12882621
> 
> 赞同：0
> 
> 时间：2012-10-14T13:20:15.753
> 
> 标签：android, twilio

我正在开发一些与 Twilio 集成的移动应用程序。

[**遵循此链接**](https://www.twilio.com/docs/connect)中的实践和 twilio 文档 在
功能上，整个流程已实施和验证！但是，尝试使用 Twilio Connect 解决***移动 Web 上的代表性问题***

以下是我在 Android 上实施的步骤；

1.  与 Facebook 连接（主要是为了隐藏 twilio 连接行为正确的身份验证）
2.  启动 WebView 到 [https://www.twilio.com/authorize/CN51ffbdb77fb055eb1dd3eb2858f711b7/signin](https://www.twilio.com/authorize/CN51ffbdb77fb055eb1dd3eb2858f711b7/signin)

*ps twilio_connect_app_sid 被指定为参考应用程序：CN51ffbdb77fb055eb1dd3eb2858f711b7*

问题是; 显示的登录/注册页面（在第 2 步中）不适合移动设备，它只是溢出屏幕！deff 不是用户友好的方式来要求用户登录/注册...
即使在某些 Android 手机（和模拟器）上，登录页面也无法正确显示，用户+密码部分完全损坏..！

有没有什么方法可以像我们为 facebook auth 一样传递 display=touch 之类的参数？简单地说，寻找一种以移动优化方式显示 Twilio 登录/注册页面的方法。

此外; 刚刚在我的一个开源项目中添加了 Twilio Connect 的实现，请参阅 prj [@github](https://github.com/wareninja/generic-oauth2-login-for-android)

有什么建议/意见/帮助吗？
**顺便提一句。请问有谁来自Twilio吗？？？**
*基本事实；默认情况下，多屏服务应该是响应式/移动优化的......*

* * *

在与 Twilio 支持人员讨论这个问题时，我会尽量保持这个项目的最新状态。
为什么？我相信我们应该与社区分享我们的发现和知识..！

* * *

理由：
为了能够在本机客户端（在我们的例子中是 Android）上实现这个流程，我们使用 WebView 作为包装器。这同样适用于 Facebook 之类的 SN，因此也适用于 Twilio Connect 流......！

事实：
长话短说，我使用 Android Emulator 截取了 PoC 的截图..！
可以在[此处查看 Android 客户端的 Auth/Connect impl 的步骤](https://www.dropbox.com/sh/urriett20zk5mxk/jpRfZef2rB)

请注意步骤 2-1 上的损坏页面...
您可以使用模拟器或任何 Android 手机轻松重现这些步骤。只需打开浏览器并按照上述方式转到 twilio 连接链接...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T22:49:16.593

Twilio 开发人员布道者在这里。

感谢您的反馈，不幸的是，我们目前没有 ETA 来修复，但我们知道这个问题。

# php - 使用 PHP 从行键计算 Cassandra 令牌

> ID：12882623
> 
> 赞同：0
> 
> 时间：2012-10-14T13:20:32.633
> 
> 标签：php, cassandra, md5

如何使用 PHP 计算与某个行键对应的 Cassandra 令牌

“他们”说这是 MD5，以十进制转换，但是我正在计算的，似乎不是正确的标记。

```
//this is one of the ways i tried,
number_format(hexdec( md5($key ) ), 0, '', '')

//this is second:
md5_hex_to_dec( md5($key) );

function md5_hex_to_dec($hex_str)
{
    // here i experimented with higher bit.
    $c = $hex_str[0];
    $c1 = hexdec($c);
    if ($c1 > 7)
                $c1 = $c1 - 7;
    // --- eo ----
    $hex_str[0] = dechex($c1);
    $arr = str_split($hex_str, 4);
    foreach ($arr as $grp) {
        $dec[] = str_pad(hexdec($grp), 5, '0', STR_PAD_LEFT);
    }
    return implode('', $dec);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:22:33.660

每个 cassandra 节点都有一个令牌，表示它将存储的哈希范围。IE。要从行键计算令牌，您

1.  获取哈希
2.  知道环中的所有标记并找出它属于哪个范围（即找到哪个范围并找到该范围的起始标记）。

IE。一旦你 md5 散列它，你必须将它映射到小于该散列的令牌。

院长

# asp.net - 如何在 wpf 和 asp.net 之间共享图像？

> ID：12882628
> 
> 赞同：0
> 
> 时间：2012-10-14T13:21:17.607
> 
> 标签：asp.net, .net, wpf

我有 3 个项目的 vs 解决方案

**MyCore：**具有 DAL、BLL、辅助函数等的类库...

**MyWebsite：**引用 MyCore 的 asp.net 网站

**MyApplication**：也引用 MyCore 的 wpf 应用程序

此设置允许我在网站和应用程序中重用所有相同的功能。

唯一的问题是图像。现在我在网站中单独保存的所有图标（并通过它们的 url 访问）以及桌面应用程序（作为资源访问）

有什么办法可以以某种方式将图标存储在 MyCore 中并在两个项目中使用它们？

有任何想法吗？

非常感谢大家的时间和耐心

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:48:07.557

一种简单而严格的方法是将所有图像放在一个单独的类中（或者在您的情况下在 MyCore 中）作为资源（将访问修饰符变为公共！）。

此时，您可以使用 HTTPHandler 作为 ImageHandler，它将您的资源文件的图像作为“普通”图像流式传输到您的网页，例如

```
public class ImageHandler : IHttpHandler
{
  public void ProcessRequest(HttpContext context)
  {
    context.Response.ContentType = "image/jpg";
    context.Response.Clear();

    Bitmap image = ClassLibrary1.Resource1._1346135638012;
    image.Save(context.Response.OutputStream, System.Drawing.Imaging.ImageFormat.Jpeg);

  }

  public bool IsReusable
  {
    get
    {
        return false;
    }
   }
 } 
```

您可以使用 get 参数来确定必须流式传输哪些图像，例如

```
<image src="./ImageHandler.ashx?ImageId=123" /> 
```

而且 - 当然 - 您也可以将这些资源用于您的应用程序。

# r - 针对向量绘制矩阵列

> ID：12882632
> 
> 赞同：1
> 
> 时间：2012-10-14T13:21:53.627
> 
> 标签：r

假设我有一个 n 列 m 行的矩阵。就我而言，我有一个取决于可以采用 n 个不同值的参数的设置。对于这些值中的每一个，我都会对行中的 m 个元素进行一些计算。现在我想根据一个向量（时间步长）绘制每一列，该向量的长度当然是 m。我该怎么做呢？它应该类似于 plot(timestep,i-th column)？提前致谢！

干杯

数学

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:37:22.960

由于您没有提供任何[可重现的示例](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)，我认为您需要这样的东西：

```
set.seed(001) # generating som data
Matrix <- matrix(rnorm(40,100,5), 10)
Vector <- rnorm(10, 200, 30)
par(mfrow=c(2,2))
for(i in 1:ncol(Matrix)){
  plot(Matrix[,i] ~ Vector, pch=16, cex=.65, col=i,
       main=paste('Column', i, 'of Matrix agaisnt Vector'))
}
par(mfrow=c(1,1)) 
```

哪个产生...

![在此处输入图像描述](../Images/9c23ee08eeab5ba562cb5ed6738b0ea8.png)

# .htaccess - 使用 .htaccess 将内部链接重定向到子目录（用于测试站点）

> ID：12882634
> 
> 赞同：0
> 
> 时间：2012-10-14T13:21:57.280
> 
> 标签：.htaccess, redirect, rewrite, subdirectory

已经在这里寻找了一段时间的答案，但到目前为止没有任何效果。基本上，一个站点已安装在 Web 根目录的子目录中，但所有内部链接都指向 Web 根目录，因为它是在实时站点上设置的。是否有一个 htaccess 规则将所有内部链接重定向到子目录，或者其他使链接工作的方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:48:00.743

尝试将这些规则添加到**文档根目录**（Web 根目录）中的 htaccess 文件中：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{DOCUMENT_ROOT}/subdirectory%{REQUEST_URI} -f [OR]
RewriteCond %{DOCUMENT_ROOT}/subdirectory%{REQUEST_URI} -d
RewriteRule ^ /subdirectory%{REQUEST_URI} [L] 
```

如果要重定向这些请求，请将方括号标志更改为：`[L,R=301]`

# c# - 将 mongodb 集合限制为 1 行

> ID：12882636
> 
> 赞同：1
> 
> 时间：2012-10-14T13:22:06.127
> 
> 标签：c#, mongodb, mongodb-.net-driver

我正在将 mongodb 与 c# 驱动程序一起使用，并且我想将我的 MongoCollection 限制为最多 1 行。我怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:37:58.630

如果要将集合本身​​限制为一行，则可以[使用](http://www.mongodb.org/display/DOCS/Capped+Collections)带有`max: 1`.

```
db.createCollection("mycoll", {capped:true, size:100000, max:1}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-02T20:24:43.990

由于这被标记为 mongodb-csharp，FindOneAs 或 SetLimit 可能会有所帮助：

[https://stackoverflow.com/a/6593345/284598](https://stackoverflow.com/a/6593345/284598)

# javascript - 运行初始数组后，Jquery 数组返回未定义

> ID：12882638
> 
> 赞同：1
> 
> 时间：2012-10-14T13:22:13.360
> 
> 标签：javascript, jquery, arrays, background

我正在尝试修复这个背景推子，它可以工作，但它会返回一些未定义的值，我无法弄清楚，任何帮助将不胜感激。

php 只是读取一个目录并获取图像文件路径，然后在其中创建包含该文本的隐藏跨度。

```
 $(document).ready(function () {
         /* DocReady */
         var counter = 0;
         var faderImgs = new Array();
         $('span.entry').each(function () {
           var value = 'images/bg/' + $(this).text();
           faderImgs.push(value);
           $('<img />').attr('src', value).appendTo(this).css('display', 'none');
         })

         /* DocReady */

         var intId = setInterval(faderBg, 8000);
         var numItems = $('span.entry').length;

         function faderBg() {

           $('.background-fader').animate({
             'opacity': '0'
           }, 2000, function () {
             $('.background-fader').css('background-image', 'url(' + faderImgs[counter] + ')')
             $('.background-fader').animate({
               'opacity': '1'
             }, 2000)

           })
           counter++;
           if (counter > numItems) {
             var counter = 0;
           }
         }

       }); 
```

- - - - - - - - - - - - - - 编辑 - - - - - - - - - - - ------------------

非常感谢您的帮助，现在又开始工作了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:26:49.933

你的计数器溢出了数组的末端。**您希望在它等于**“numItems”时将其设置回零，而不是在它更大时；JavaScript 数组从零开始，所以最大的索引是`numItems - 1`.

```
 counter++;
       if (counter >= numItems) { // >=, not >
         counter = 0;
       } 
```

`var`此外，当您将“计数器”设置为零时，您不需要。您应该使用`.prop()`而不是设置您创建的那些元素`.attr()`的“src”属性。`<img>`（我不确定你为什么还要费心去创建这些，除非它可能是将图像预取到浏览器缓存中。如果是这样，则无需将`<img>`元素附加到 DOM — 只需创建一个`Image`实例并设置它的 " src”属性。）

*编辑*——@charlietfl 正确地指出，这种流浪`var`会给你带来严重的问题，因为它会导致该内部函数中有一个*本地*“计数器”变量。事实上，如果它存在于你的真实代码中，我根本无法想象它是如何工作的，因为“计数器”总是如此`undefined`（或者`NaN`我猜是在后增量之后）。

# ios - 我应该如何使用 AFNetworking 预加载所有图像并缓存它们？

> ID：12882639
> 
> 赞同：0
> 
> 时间：2012-10-14T13:22:12.787
> 
> 标签：ios, caching, afnetworking

我需要在应用程序的开头预加载和缓存所有（近 80 张）图像，同时向用户显示“请稍候”。我所做的是：

```
NSMutableArray *operations = [[NSMutableArray alloc] init];
   for(Category *c in shop.menu.categories){
        NSURLRequest *request = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:c.imagePath] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30];
        AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:request imageProcessingBlock:nil cacheName:@"nscache"
                                    success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                                                                                                  }
                                    failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error){
                                                                                           }];
    [operations addObject:operation];

    for(Item *i in c.items){
        NSURLRequest *request2 = [[NSURLRequest alloc] initWithURL:[NSURL URLWithString:i.imagePath] cachePolicy:NSURLRequestReturnCacheDataElseLoad timeoutInterval:30];
        AFImageRequestOperation *operation2 = [AFImageRequestOperation imageRequestOperationWithRequest:request2 imageProcessingBlock:nil cacheName:@"nscache"
                                                                                                success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                                                                                                }
                                                                                                failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error){
                                                                                                }];
        [operations addObject:operation2];

    }
}

[[APIClient sharedClient] enqueueBatchOfHTTPRequestOperations:operations
                                                progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations)
 {
     float percentDone = 100 * ((float)((int)numberOfCompletedOperations) / (float)((int)totalNumberOfOperations));
     //appDelegateHUD.progress = percentDone;
     NSLog([NSString stringWithFormat:@"%f", percentDone]);
 }
                                              completionBlock:^(NSArray *operations)
 {
     AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

     [appDelegate hideHUDWithDelay:0];

 }]; 
```

使用此代码块，一些图像被成功缓存，但其他图像则没有。我正在使用这个代码块：

```
 AFImageRequestOperation *operation = [AFImageRequestOperation imageRequestOperationWithRequest:imageRequest
                                                                                  imageProcessingBlock:nil
                                                                                             cacheName:@"nscache"
                                                                                               success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image){
                                                                                                   [UIView beginAnimations:@"ToggleViews" context:nil];
                                                                                                   [UIView setAnimationDuration:1.0];
                                                                                                   imageview.image = image;
                                                                                                   [UIView commitAnimations];
                                                                                               }
                                                                                               failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error){ NSLog([error description]); }
                                              ];
        [operation start]; 
```

图像应该直接显示，因为它们都应该在缓存中。但是他们加载的有点晚。我在某些代码中错了吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:52:42.067

我认为您不会等待所有图像都将被下载

```
[[APIClient sharedClient] enqueueBatchOfHTTPRequestOperations:operations
                                                progressBlock:^(NSUInteger numberOfCompletedOperations, NSUInteger totalNumberOfOperations)
 {
     float percentDone = 100 * ((float)((int)numberOfCompletedOperations) / (float)((int)totalNumberOfOperations));
     //appDelegateHUD.progress = percentDone;
     NSLog([NSString stringWithFormat:@"%f", percentDone]);
 }
                                              completionBlock:^(NSArray *operations)
 {
     AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];

     [appDelegate hideHUDWithDelay:0];
// here you just hide HUD, but here you should start load images to UI

 }] 
```

;

# python - 如何在使用 cElementTree.iterparse() 时跳过引发错误的节点

> ID：12882642
> 
> 赞同：0
> 
> 时间：2012-10-14T13:22:21.477
> 
> 标签：python, xml, iterparse

我正在尝试解析一个非常大的 XML 文件并使用小写字母并删除标点符号。问题是，当我尝试使用`cET parse function`for big files 解析此文件时，有时会遇到格式错误的标签或字符，这会引发`syntax error`：

```
SyntaxError: not well-formed (invalid token): line 639337, column 4 
```

注意：我几乎不可能读取文件，所以我看不出问题出在哪里。

我怎样才能跳过或解决这个问题？

```
from xml.etree import cElementTree as cET

for event, elem in cET.iterparse(xmlFile, events=("start", "end")):
    ...do something... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T13:41:58.980

使用[`lxml`](http://lxml.de/)而不是标准库`ElementTree`；它支持相同的 API，但可以处理损坏的 XML；如果可能，它会尝试修复它：

```
parser = etree.XMLParser(recover=True)
context = etree.iterparse(filename, parser) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:30:43.353

您可以使用类似[`xmllint`](http://www.xmlsoft.org/xmllint.html)验证和清理 XML 的工具。此工具报告的错误应该可以帮助您修复 XML 文件。

**编辑：**一个例子：

```
$ cat invalid.xml 
<?xml version="1.0"?>
<foo>
<bar>
</foo>
$ xmllint invalid.xml 
invalid.xml:4: parser error : Opening and ending tag mismatch: bar line 3 and foo
</foo>
      ^
invalid.xml:5: parser error : Premature end of data in tag foo line 2

^ 
```

# phantomjs - 在 PhantomJS 中检索 URL，而不是通过客户端

> ID：12882645
> 
> 赞同：1
> 
> 时间：2012-10-14T13:22:33.783
> 
> 标签：phantomjs, casperjs

有没有办法在不通过 QTWebKit 客户端的情况下在 PhantomJS（或 CasperJS）中下载文件？

我想从与正在测试的页面无关的 URL 下载以 JSON 编码的数据。

从 PhantomJS API 或 CasperJS API 中看不出如何做到这一点，因为它们的功能似乎是为了在诡异的客户端中打开 URL。

我希望人们可以简单地运行类似的东西：

```
 fetch(URL, callback); 
```

下载到 PhantomJs 页面然后到客户端的普通过程是有问题的，原因有两个。首先，它缓慢且麻烦。其次，它违反了同源策略（因此 CasperJS [base64encode](http://casperjs.org/api.html#casper.base64encode)函数将不起作用）。

在最基本的情况下，我希望 PhantomJS 客户端的 javascript 运行程序能够实现 XMLHttpRequest（或类似的东西），但我想知道是否有更规范的东西可用。

**编辑**

也许可以只包括 jQuery 和 use `$.ajax`，但不幸的是，这也会引发同源异常：

> XMLHttpRequest 无法加载[http://example.com:5000/test](http://example.com:5000/test)。Access-Control-Allow-Origin 不允许使用原始文件：//。

我能想出的唯一解决方案是在单独的进程中（例如使用 wget）下载我想以 JSON 格式访问的文件，但由于 PhantomJS[不允许执行进程](http://code.google.com/p/phantomjs/issues/detail?id=219)（在撰写本文时），它似乎必须与 PhantomJS 分开启动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T19:17:42.467

你可以试试看

```
casper.download(String url, String target[, String method, Object data]) 
```

来自[http://docs.casperjs.org/en/latest/modules/casper.html#download](http://docs.casperjs.org/en/latest/modules/casper.html#download)

我不确定您想对下载的数据做什么，但是您可以使用 PhantomJS`injectJS()`或`includeJS()`传入本地文件，以便在被测试的页面中使用该数据。

# google-maps-api-3 - 使用昨天完美运行的函数获取“无法读取未定义的属性'__e3_'”

> ID：12882653
> 
> 赞同：1
> 
> 时间：2012-10-14T13:23:51.493
> 
> 标签：google-maps-api-3, typeerror

我正在使用此代码使 Google Maps JavaScript v3 地图工作。但是当我点击我进入该地图可见的页面时，我不断得到`Uncaught TypeError: Cannot read property '__e3_' of undefined`. 昨天它工作得很好，从那以后我没有在网站上做过任何事情！

```
var marker;
var map;

function initialize() {
    var coordinates = new google.maps.LatLng(<?php if(!empty($photo['coordinates_latitude']) OR !empty($photo['coordinates_longitude'])) { echo $photo['coordinates_latitude'].','.$photo['coordinates_longitude']; } else { echo '59.328648,13.485672'; } ?>);

    // KOORDINATER: Manuell uppdatering
    $('#update-map').click(function() {
        var lat = parseFloat(document.getElementById('coordinates-latitude').value);
        var lng = parseFloat(document.getElementById('coordinates-longitude').value);
        var latlong_update = new google.maps.LatLng(lat, lng);

        $('#coordinates-select option[value=""]').attr('selected', 'selected');

        marker.setPosition(latlong_update);
        map.setCenter(latlong_update);
    });

    // KOORDINATER: Förvalda koordinater
    $('select[name="coordinates"]').change(function() {
        var split = $(this).val().split(',');
        var latlong_static = new google.maps.LatLng(split[0], split[1]);

        $('input[name="textfield-latitude"]').val(split[0]);
        $('input[name="textfield-longitude"]').val(split[1]);
        $('#check-04').removeAttr('disabled').attr({'checked': (localStorage.getItem('approx-coordinates') == 1 ? true : false)});;
        $('#checkbox-04-text').removeClass('color-grey');
        $('#goto-coordinates').show();

        marker.setPosition(latlong_static);
        map.setCenter(latlong_static);
    });

    // KOORDINATER: Ta bort koordinater
    $('#delete-coordinates').click(function() {
        var latlong_clear = new google.maps.LatLng(59.328648,13.485672);
        var waschecked_coor = $('#check-04:checked').val() ? 1 : 0;

        marker.setPosition(latlong_clear);
        map.setCenter(latlong_clear);
        localStorage.setItem('approx-coordinates', waschecked_coor);

        $('input[name="textfield-latitude"]').val('');
        $('input[name="textfield-longitude"]').val('');
        $('#goto-coordinates').hide();
        $('#check-04').attr({'disabled': 'disabled', 'checked': false});
        $('#checkbox-04-text').addClass('color-grey');
        $('#coordinates-select option[value=""]').attr('selected', 'selected');
    });

    /******************************************************************************
    **                  THE CODE BELOW IS CAUSING THE PROBLEM                    **
    ******************************************************************************/

    // KOORDINATER: Koordinater genom markör på kartan
    google.maps.event.addListener(marker, 'dragend', function(a) {
        var waschecked_coor = $('#check-04:checked').val() ? 1 : 0;
        localStorage.setItem('approx-coordinates', waschecked_coor);

        $('input[name="textfield-latitude"]').val(a.latLng.lat().toFixed(6));
        $('input[name="textfield-longitude"]').val(a.latLng.lng().toFixed(6));
        $('#check-04').removeAttr('disabled').attr({'checked': (localStorage.getItem('approx-coordinates') == 1 ? true : false)});
        $('#checkbox-04-text').removeClass('color-grey');
        $('#goto-coordinates').show();

        map.panTo(a.latLng);
    });

    /******************************************************************************
    **                  THE CODE ABOVE IS CAUSING THE PROBLEM                    **
    ******************************************************************************/

    var myOptions = {
        center: coordinates,
        zoom: 14,
        mapTypeId: google.maps.MapTypeId.SATELLITE,
        streetViewControl: false
    };

    map = new google.maps.Map(document.getElementById('map-coordinates'), myOptions);

    marker = new google.maps.Marker({
        position: coordinates,
        draggable: true,
        map: map
    });
}

// FUNKTION: Flytta markören
function moveMarker() {
    var lat = parseFloat(document.getElementById('coordinates-latitude').value);
    var lng = parseFloat(document.getElementById('coordinates-longitude').value);
    var newLatLng = new google.maps.LatLng(lat, lng);

    marker.setPosition(newLatLng);
    map.setCenter(newLatLng);
}

// JQUERY
$(document).ready(function() {

    // INITIERA KARTAN
    initialize();

    // KRYSSRUTA: Bakgrundsbild
    $('input[name="checkbox-02"]').click(function() {

        // KONTROLL: Ikryssad
        if($(this).is(':checked')) {
            var waschecked_wallpaper = $('#check-01:checked').val() ? 1 : 0;
            localStorage.setItem('wallpaper', waschecked_wallpaper);

            $('#check-01').attr({'disabled': 'disabled', 'checked': false});
            $('#checkbox-01-text').addClass('color-grey');

        // KONTROLL: Ej ikryssad
        } else {
            $('#check-01').removeAttr('disabled').attr({'checked': (localStorage.getItem('wallpaper') == 1 ? true : false)});
            $('#checkbox-01-text').removeClass('color-grey');
        }

    });

    // TEXTFÄLT: Koordinater
    $('input[name="textfield-latitude"], input[name="textfield-longitude"]').keyup(function() {

        // KONTROLL: Textfältet är inte tomt
        if($(this).val().length == 0) {
            var waschecked_coor = $('#check-01:checked').val() ? 1 : 0;
            localStorage.setItem('approx-coordinates', waschecked_coor);

            $('#goto-coordinates').hide();
            $('#check-04').attr({'disabled': 'disabled', 'checked': false});
            $('#checkbox-04-text').addClass('color-grey');

        // KONTROLL: Textfältet är tomt
        } else {
            $('#goto-coordinates').show();
            $('#check-04').removeAttr('disabled').attr({'checked': (localStorage.getItem('approx-coordinates') == 1 ? true : false)});
            $('#checkbox-04-text').removeClass('color-grey');
        }

    });

}); 
```

如果我删除`google.maps.event.addListener(marker, 'dragend', function(a) {`其中的内容，代码将完美运行，并且地图再次在页面上可见。

你能看出问题所在吗？正如我之前所说，从那时到现在，我没有对代码做任何其他事情。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T15:59:56.740

“标记”变量在该代码中未定义（至少在今天）。如果不更改代码，不知道怎么会发生这种情况，假设时间可能已经改变。

如果在定义它之后定义依赖于“标记”的侦听器，它至少应该解决这个问题。

```
var marker = new google.maps.Marker({
    position: coordinates,
    draggable: true,
    map: map
}); 
```

并且可能将其更改为您在全局命名空间中定义的全局标记变量（通过从其前面删除“var”）。

[工作链接](http://www.geocodezip.com/edgren_add_photoA.html)

# c# - 如何在devexpress xtrareport中计算条件总和

> ID：12882656
> 
> 赞同：2
> 
> 时间：2012-10-14T13:24:31.650
> 
> 标签：c#, xtrareport

考虑我的以下 XtraReport

![在此处输入图像描述](../Images/b884f67abf86c4f21010e3fc545d7d65.png)

预览时会生成以下输出。

![在此处输入图像描述](../Images/b4a36c42a4061f730cec192748cb72dc.png)

请注意报告页脚中的总标记总和，即 125。我的问题是：我将如何计算结果为 p 的唯一字段的总和。因此在这种情况下 TotalMarks 的总和应该是 75。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T19:14:26.427

我通过添加一个计算字段并分配找到了它的解决方案

```
Iif([Result]='P',[TotalMarks],0 ) 
```

在表达式编辑器中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-16T17:48:04.573

据我所知，我会通过摘要标签的 BeforePrint 事件手动完成。使用代码计算所需的总和，并将结果分配给标签的 Text 属性。如果您可以在报表中显式访问您的数据源（例如，如果您使用 IList 数据源），这将非常有效。

```
private void sumLabel_BeforePrint(object sender, BeforeEventArgs e) {
  XRLabel lbl = sender as XRLabel;
  if (lbl == null) return;
  int sum = myList.Where(item => item.Result == "P").Sum(item => item.TotalMarks);
  lbl.Text = sum;
} 
```

使用另一种手动解决方案，您可以在打印报告期间通过处理 Detail 带的 BeforePrint 事件来汇总所需的值，然后将计算的总和分配给其 BeforePrint 事件中的总和标签，类似于上面。对于更复杂的数据源，这种方法更有效、更灵活。

```
int currentSum = 0;
private void Detail_BeforePrint(object sender, BeforeEventArgs e) {
  var currentRow = GetCurrentRow() as MyData;
  if (currentRow == null) return;
  if (currentRow.Result == "P")
    currentSum += currentRow.TotalMarks;
}

private void sumLabel_BeforePrint(object sender, BeforeEventArgs e) {
  XRLabel lbl = sender as XRLabel;
  if (lbl == null) return;      
  lbl.Text = currentSum;
  // invalidate the currentSum for the case of any further report pringing process
  currentSum = 0;
} 
```

不幸的是，我不知道任何可以由设计师纯粹应用的解决方案。希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-10T11:56:49.663

虽然 kashif 解决方案没有显示 Sum 值，但主要逻辑在那里。如果你想要 Sum 使用 Sum() 函数：-

```
Sum(Iif([Result]='P',[TotalMarks],0 )) 
```

# yii - 使用 Yii Active Record 延迟加载或急切加载的最佳条件？

> ID：12882657
> 
> 赞同：1
> 
> 时间：2012-10-14T13:24:37.587
> 
> 标签：yii

我是 Yii 的新手。目前我正在学习 Active Record 延迟加载和急切加载。我已经搜索了互联网，但找不到任何好的文章来解释我应该在什么情况下使用这些加载方法。这里有人可以解释一下吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T17:04:48.657

这都是关于[n+1 问题](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)的。来自[Yii 指南](http://www.yiiframework.com/doc/guide/1.1/en/upgrade#changes-related-with-eager-loading-for-relational-active-record)

> 默认情况下，将为预先加载中涉及的所有关系生成并执行单个 JOIN 语句。如果主表设置了它的 LIMIT 或 OFFSET 查询选项，它将首先单独查询，然后是另一个带回其所有相关对象的 SQL 语句。在之前的 1.0.x 版本中，默认行为是如果预加载涉及 N 个 HAS_MANY 或 MANY_MANY 关系，则将有 N+1 个 SQL 语句。

# arduino - Arduino Uno GPRS shield 连接到特定网页

> ID：12882658
> 
> 赞同：0
> 
> 时间：2012-10-14T13:24:44.217
> 
> 标签：arduino, gprs

我有一个项目，我使用[GPRS Arduino Quadband](http://www.cooking-hacks.com/index.php/documentation/tutorials/arduino-gprs-quadband)模块连接到特定网站。

我可以发送[AT 命令](http://en.wikipedia.org/wiki/Hayes_command_set)并连接到服务器并收到如下响应：

```
Serial.print("AT+KTCPCFG=0,0,\"http://www.google.com"); // Returns HTTP ok response 
```

但是我想知道如何连接到特定网页，例如`www.domain_name.com/my_specific_page.php`. 但是当我尝试

```
Serial.print("AT+KTCPCFG=0,0,\"http://www.domain_name.com/my_specific_page.php"); 
```

我收到无法找到服务器的[DNS错误。](http://en.wikipedia.org/wiki/Domain_Name_System)我还包括哪些其他标题信息才能说出以下内容？

*   连接到域 x

*   转到域 x 上的页面 Y

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T13:22:14.680

我想出答案是因为我不理解 http 标头

在输入连接域的信息时，您需要在 http 请求中指定主机是您的域名，GET 是服务器上的特定文件

应该是这样的（CRLF表示回车，换行）：

```
GET /my_specific_page.php HTTP/1.1[CRLF]

Host: www.domain_name.com[CRLF]

//Other header information 
```

# java - Java GUI 问题（布局管理器）

> ID：12882662
> 
> 赞同：1
> 
> 时间：2012-10-14T13:25:19.053
> 
> 标签：java, swing, layout, jframe, layout-manager

我刚刚开始使用 Java 布局管理器，到目前为止，要让 GUI 按预期运行非常困难：

```
 import java.awt.*;
    import java.awt.event.*;
    import javax.swing.*;
    import javax.swing.table.DefaultTableModel;

    public class ex1 extends JFrame {

    private javax.swing.JButton AddBtn,perviousBtn,NextBtn;
    private javax.swing.JLabel LatLabel, LongLabel, EvlLabel;
    private javax.swing.JTextField LatText,LongText,EvlText;

    String columns[] = { "ID", "Name", "Age", "Gender" };
    Object data[][] = { { "0", "Tom", new Integer(20), "Male" },
            { "1", "Tina", new Integer(18), "Female" },
            { "2", "Raj", new Integer(19), "Male" },
            { "3", "Tina", new Integer(18), "Female" },
            { "4", "Raj", new Integer(19), "Male" },
            { "5", "Tina", new Integer(18), "Female" },
            { "6", "Raj", new Integer(19), "Male" },
            { "7", "Tina", new Integer(18), "Female" },
            { "8", "Raj", new Integer(19), "Male" },
            { "9", "Tina", new Integer(18), "Female" },
            { "10", "Raj", new Integer(19), "Male" }
    };

    public void addComponentsToPane(final Container pane) {

        JPanel compsToExperiment = new JPanel();
        GridLayout experimentLayout = new GridLayout(3, 3);
        compsToExperiment.setLayout(experimentLayout);
        JPanel Table = new JPanel();
        Table.setLayout(new GridLayout(8, 1));
        JPanel nav = new JPanel();
        nav.setLayout(new GridLayout(8, 3));

        LatLabel = new javax.swing.JLabel("Latitude: ");
        LongLabel = new javax.swing.JLabel("Longitude: ");
        EvlLabel = new javax.swing.JLabel("Elevation: ");
        LatText = new javax.swing.JTextField();
        LongText = new javax.swing.JTextField();
        EvlText = new javax.swing.JTextField();
        AddBtn = new javax.swing.JButton("Add");
        perviousBtn = new javax.swing.JButton("Next");
        NextBtn = new javax.swing.JButton("pervious");

        // perviousBtn.setPreferredSize(new Dimension(60, 60));

        compsToExperiment.add(LatLabel);
        compsToExperiment.add(LongLabel);
        compsToExperiment.add(EvlLabel);

        compsToExperiment.add(LatText);
        compsToExperiment.add(LongText);
        compsToExperiment.add(EvlText);
        compsToExperiment.add(AddBtn);

        // jButton1.addActionListener((ActionListener) this);
        // this.add(jButton1);

        JTable table = new JTable(data, columns);
        Table.add(table.getTableHeader());
        Table.add(table);

        nav.add(NextBtn);
        nav.add(perviousBtn);

        pane.add(compsToExperiment, BorderLayout.NORTH);
        pane.add(nav, BorderLayout.EAST);
        pane.add(Table, BorderLayout.CENTER);
    }

    /**
     * Create the GUI and show it. For thread safety, this method is invoked
     * from the event dispatch thread.
     */

    private static void createAndShowGUI() {

        ex1 frame = new ex1();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.addComponentsToPane(frame.getContentPane());
        frame.setSize(500, 500);
        //frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {

        try {    
            UIManager.setLookAndFeel(
                  "javax.swing.plaf.metal.MetalLookAndFeel");
        } catch (UnsupportedLookAndFeelException ex) {
            ex.printStackTrace();
        } catch (IllegalAccessException ex) {
            ex.printStackTrace();
        } catch (InstantiationException ex) {
            ex.printStackTrace();
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
        }
        /* Turn off metal's use of bold fonts */
        UIManager.put("swing.boldMetal", Boolean.FALSE);

        // Schedule a job for the event dispatch thread:
        // creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });    
    }    
} 
```

另外我在让表格显示所有条目时遇到问题，它只会显示前 3 个条目。您能帮我整理一下 GUI 并解决表格问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:51:17.680

看看这些行：

```
 JPanel Table = new JPanel();
    Table.setLayout(new GridLayout(8, 1)); 
```

您应该仔细阅读有关 GridLayout 的文档，以便在您的代码中使用它，尤其是当您像在代码中一样使用多个布局时。我建议您在尝试编写组件之前在草稿纸上设计组件及其布局。在这里，我将您`Table`的布局参数更改为：

```
 Table.setLayout(new GridLayout(0, 1)); 
```

它显示了所有的数据条目。这是 API 上所说的`GridLayout`：

```
public GridLayout(int rows, int cols) 
```

*创建具有指定行数和列数的网格布局。布局中的所有组件都具有相同的大小。 **rows 和 cols 中的一个（但不是两者）可以为零**，这意味着**可以将任意数量的对象放置在一行**或一列中。*

# mysql - MySQL 不允许对 DATETIME 字段进行 ON UPDATE CURRENT_TIMESTAMP

> ID：12882663
> 
> 赞同：19
> 
> 时间：2012-10-14T13:25:31.080
> 
> 标签：mysql, datetime, timestamp

我已经看到了很多相关的问题，但我无法将手指放在这个特定的问题上：

我有一个 MySQL 表，其中包含一个 TIMESTAMP（用于创建字段的时间）和一个 DATETIME（用于每次更新该字段的时间）。它看起来像这样：

```
CREATE TABLE 'vis' (
ID BIGINT PRIMARY KEY AUTO_INCREMENT NOT NULL,
ENTRY VARCHAR(255),
AUTHOR VARCHAR(255),
CREATED_AT TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
UPDATED_AT DATETIME ON UPDATE CURRENT_TIMESTAMP,
UPDATED_BY VARCHAR(255)
) 
```

当我尝试这个时，我得到的错误是：`(SQL Error: 1294 SQL State: HY000) - Invalid ON UPDATE clause for 'updated_at' field`

我读过的所有地方（甚至在 Stack Overflow 上）都表明我应该能够做到这一点，但我收到了这个错误。也许还有另一种方法可以让一个字段在我每次更新时自动更新时间？

我正在使用 MySQL 服务器 5.5。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-14T13:38:58.477

`DATETIME`不能`CURRENT_TIMESTAMP`在更新时使用。相反，将其更改为`TIMESTAMP`.

或者，考虑在这种情况下使用触发器：http: [//dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html](http://dev.mysql.com/doc/refman/5.0/en/trigger-syntax.html)

编辑：如评论中所述（感谢@АлександрФишер！），自 MySQL 5.6.5 以来不再是这种情况，因此另一种解决方案是尽可能升级您的服务器。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-25T03:51:58.487

该功能似乎已在 5.6 中引入。在我的默认 OS X 安装上按预期工作。

参考：[MySQL 5.6.5 之前的自动时间戳属性](http://dev.mysql.com/doc/refman/5.6/en/timestamp-initialization.html#idm139923373307456)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T13:40:33.247

MySQL***不允许***函数用于默认`DateTime`值。（请参阅 MySQL 数据类型[默认值](http://dev.mysql.com/doc/refman/5.0/en/data-type-defaults.html)。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-30T11:31:09.697

**自动插入和更新日期/时间**

*适用于数据类型：DATETIME 或 TIMESTAMP*

*测试：MySQL 5.6.27-2 和 MariaDB 10.1.10*

* * *

**在INSERT**上存储当前日期和时间

 **```
CREATE TABLE table_demo (
    ...
    `CreatedAt` datetime DEFAULT CURRENT_TIMESTAMP
    ...
); 
```

**在INSERT**和**UPDATE**上存储当前日期和时间

 **```
CREATE TABLE table_demo (
    ...
    `UpdatedAt` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP
    ... 
); 
```

**仅在UPDATE**上存储当前日期和时间

 **注意：插入时，默认值为 '0000-00-00 00:00:00'

```
CREATE TABLE table_demo (
    ...
    `UpdatedAt` datetime DEFAULT '0000-00-00 00:00:00' ON UPDATE CURRENT_TIMESTAMP
    ...
); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-14T13:39:43.653

是的，如果您将其更改为 timestamp ，不带`DEFAULT CURRENT_TIMESTAMP`nor `ON UPDATE CURRENT_TIMESTAMP`，则与同时指定`DEFAULT CURRENT_TIMESTAMP`and相同`ON UPDATE CURRENT_TIMESTAMP`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-20T01:51:00.400

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-11T09:10:23.637******

# c++ - 如何显示命名空间中的所有元素？

> ID：12882668
> 
> 赞同：1
> 
> 时间：2012-10-14T13:26:32.460
> 
> 标签：c++, namespaces

如何在 C++ 中显示命名空间内的所有元素？

可以使用 Doxygen 分离命名空间并打印它们吗？使用 GCC？

我假设我不知道命名空间名称，所以我想将它们全部打印出来，或者我知道特定的命名空间名称并且我想知道里面有什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T13:35:13.287

C++ 没有反射（例如许多动态语言或 Java 和 .NET），因此在 C++ 中是不可能的。

Doxygen 可以将其数据导出为 XML 而不是 HTML，因此您可以使用 XSLT 样式表将 Doxygen 的 XML 输出转换为您想要的任何格式。

有一个称为 GCC-XML 的 GCC 版本，它不是编译输出解析后的 C++ 代码的 XML 表示，在这里你可以做同样的事情。

最后但同样重要的是，您当然可以为 Clang 的 GCC 创建一个插件并在其中执行此操作（例如，GCC 可以使用 Mozilla 的 Dehydra 补丁使用 Javascript 编写的插件）。

我建议查看 Doxygen XML 输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:39:48.427

如果您在 Linux 上，您可以使用`nm`工具列出生成的二进制文件中的所有符号并根据需要解析输出：

```
nm -C some-app 
```

# android - 光标 - 安卓

> ID：12882669
> 
> 赞同：0
> 
> 时间：2012-10-14T13:26:34.280
> 
> 标签：android, cursor

是否可以使用 2 个不同的光标来选择表格：

这是一张桌子1

```
Cursor b = myDbHelper.getSchoolType();
String def = b.getString(0); 
```

这是另一张桌子

```
c = myDbHelper.getAllSchoolData();
String abc = c.getString(0); 
```

我尝试使用两个游标从两个表中检索数据，但它显示错误：

```
android.database.CursorIndexOutOfBoundsException : Index -1 requested, with a size of 2 
```

请帮助...感谢各种答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:30:57.357

默认情况下，光标指针指向第一个条目（行）之前的位置，因此您需要将其移动到适当的位置，然后才能从中读取数据。例如移动到第一个条目：

```
if(cursor != null && cursor.moveToFirst()) 
    String value = cursor.getString(0);
    ...
} 
```

有类似的方法，如 moveToNext()、moveToLast() 等，更多信息请参见[参考页](http://developer.android.com/reference/android/database/Cursor.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:45:36.877

`Cursor`检索时索引放置在-1。您需要将其移至第一个结果。为此，您有不同的选择，但这就是我使用它的方式：

```
Cursor c = // Retreive your cursor;
if (c != null) {
    while(c.moveToNext()) {
        // Code for each row
    }
} 
```

这将遍历所有游标行。

您应该始终阅读[Android 教程](http://developer.android.com/training/basics/data-storage/databases.html#ReadDbRow)或查看[SDK 参考](http://developer.android.com/reference/android/database/Cursor.html)。学习阅读文档是程序员的一项基本技能。

# jquery - 无法在 jquery 中获取动态生成的按钮的 id

> ID：12882670
> 
> 赞同：0
> 
> 时间：2012-10-14T13:26:38.090
> 
> 标签：jquery

> **可能重复：**
> [jQuery click 不适用于动态创建的项目](https://stackoverflow.com/questions/9484295/jquery-click-not-working-for-dynamically-created-items)

```
 $(document).ready(function(){
            $('#btn').click(function(){

                var createInput=$("<input type='button'>");
                createInput.attr("id","close1");
                createInput.attr("value","close");
                $('#outer-div').append(createInput);
            });

            $("#close1").click(function(){
                alert('hi');
            });
        });

    </script>
</head>
<body>
    <div id='outer-div'>
        <input id='btn' type='button' value='click here'/>
    </div> 
```

**代码有什么问题。当我单击名为关闭的动态生成按钮时，我没有收到警报。请帮忙**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-14T13:28:25.430

这会起作用：

```
 $(document).ready(function(){
        $('#btn').click(function(){

            var createInput=$("<input type='button'>");
            createInput.attr("id","close1");
            createInput.attr("value","close");
            $('#outer-div').append(createInput);
        });

        $(document).on('click', "#close1", function(){
            alert('hi');
        });
    }); 
```

问题与

```
$("#close1").click... 
```

是它添加了一个事件处理程序，因为当您执行此行时集合是空的。[on](http://api.jquery.com/on/)功能解决了这个问题。

顺便说一句，建议将脚本放在正文的末尾而不是头部。

# mercurial - 如何退出 mercurial 中的合并退出？

> ID：12882672
> 
> 赞同：4
> 
> 时间：2012-10-14T13:26:58.293
> 
> 标签：mercurial

我环顾四周，但在这里没有看到我的确切情况，所以我希望有人能提供帮助。

SCons 项目 (https://bitbucket.org/scons/scons) 在默认分支上进行开发。我最近错误地合并并推送了一些尚未准备好合并的开发人员（称为 DEV）存储库的更改。所以我不得不取消这些更改（hg backout -rXXX --parent YYY）并将其推送到 bitbucket。但是我们现在要如何前进呢？退出维基页面说：

> 警告：如果您想重做合并，退出合并将导致麻烦。处理错误合并的唯一安全方法是放弃分支。

我们当然不能放弃默认分支。所以现在 DEV 不能从主 repo 合并，否则他将丢失所有正在进行的更改（因为我的退出删除了它们）。现在没有人可以从 DEV 的 repo 中合并，因为 bitbucket repo 已经包含了他的所有更改（以及退出）。我们似乎处于一个艰难的境地。

我想我有两个问题：

1.  我们现在应该做什么，让 DEV 能够取得进展：他需要一个带有他可以工作的更改的 repo，其形式是当他完成这些更改后可以合并到 bitbucket repo 中。

2.  一旦我发现推送的合并是错误的，我应该怎么做？

（注意这里没有命名分支；一切都是默认的。）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T12:35:01.130

> 我们当然不能放弃默认分支。

你当然可以。更新到合并之前并继续在那里工作，这就是现在的提示。如果旧分支上有更改，您需要`graft`它们。然后，您可以进行[无操作合并](http://mercurial.selenic.com/wiki/PruningDeadBranches#No-Op_Merges)以绑定死头，或者您可以使用`hg commit --close-branch`. 看看[这个答案](https://stackoverflow.com/questions/3688263/mercurial-beheading-a-head)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T21:23:21.687

没有时间测试这个，但我想它应该像这样工作：

1.  DEV 从主仓库中提取，
2.  对回退进行回退，然后
3.  继续在本地开发他的功能。

从这个状态开始，其他人在合并来自 DEV 的新更改时也应该没有问题。

# javascript - 找到重定向网址

> ID：12882675
> 
> 赞同：1
> 
> 时间：2012-10-14T13:27:39.853
> 
> 标签：javascript, .htaccess, redirect, iframe

我`iframe`在我的页面中使用 an 来显示来自外部网站的内容，但有时 iframe 会将整个页面重定向到新位置，这会导致我的网站上出现不需要的内容。

是否可以找到`iframe`要重定向我的网站的页面？如果是这样，请给我一个有关如何找到此重定向地址的基本示例。我想在新标签中打开这个地址，因为来自这个地址的信息可能对我的用户有用。

**www.b.com [摘要代码]：**

```
if(somethingHappens) window.top.location.href = "http://google.com"; 
```

**www.a.com [摘要代码]：**

```
<!-- code -->
  <iframe src="http://www.b.com"></iframe>
<!-- code --> 
```

**预期结果[抽象代码]：**

```
if(pageIsBeingRedirected) {
  stopRedirection();
  var url = findRedirectAddres(); // expected : http://google.com
  window.open(url, "_blank");
  return;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:45:24.530

如果您要重定向到外部站点，则无法跟踪 iframe URL，但您只能获取 iframe`src`值中的内容。

**例子，**

[http://jsfiddle.net/CDwQK/1/](http://jsfiddle.net/CDwQK/1/)

您正在寻找的内容只有在`parent`并且`iframe`共享相同的域时才有效。如果域不同，它将无法正常工作。

# javascript - 带有javascript的chrome问题

> ID：12882678
> 
> 赞同：1
> 
> 时间：2012-10-14T13:28:18.263
> 
> 标签：javascript

我试图在 chrome 中运行任何 HTML 文件。

当我对 JS 代码进行一些更改时，chrome 不会刷新数据。

仅当我按 20-25 刷新时才有效

我也尝试删除捕获。

您知道如何修复 chrome 的刷新吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:32:22.647

有几种方法可以清除/破坏缓存。这不是 Chrome 特定的问题。

如果您在 Chrome 中进行测试，我建议您使用[隐身窗口](http://www.google.com/goodtoknow/manage-data/incognito-mode/)。隐身窗口不会使用任何存储或缓存的内容，并且非常适合测试。

有关其他信息，请参阅[此](https://superuser.com/questions/220179/how-can-i-do-a-cache-refresh-in-google-chrome)线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:33:18.420

我通常的解决方案是在脚本链接中添加一个版本号：

```
<script src="thelib.min.js?v=32"></script> 
```

仅在更改 js 文件时才增加版本。所以我确信如果它没有改变它可以被缓存，并且它在有刷新问题的浏览器（如 Chrome）中更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:35:16.013

Chrome 因缓存内容而臭名昭著。（部分原因它是如此之快）。

以及添加到文件中的随机数（如先前答案中所建议）。尝试通过开发工具关闭缓存。

[为网站开发禁用 Chrome 缓存](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development)

# python - python中的返回类型错误

> ID：12882679
> 
> 赞同：0
> 
> 时间：2012-10-14T13:28:22.643
> 
> 标签：python

因此，我在进行递归调用的行上遇到了此错误。发生错误的行如下所示：`return some_func(x) - .2`

`TypeError: unsupported operand type(s) for -: 'NoneType' and 'float'`

我尝试`return some_func(x) - .2 and x not None and float(x) is True`了 , 和其他技巧，但到目前为止没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:30:48.047

`some_func(x)`return `None`，你不能从中减去一个浮点数`None`——那没有任何意义。根据您的需要，您可以确保`some_func(x)`永远不会返回`None`（通过更改 的实现`some_func`），或者执行以下操作：

```
y = some_func(x)
if y is not None:
    return y - .2
else:
    return None 
```

最后两行可以省略，因为 Python 中的函数隐式返回`None`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:29:25.190

在没有看到您的代码的情况下，错误消息似乎暗示您的函数在某些时候`some_func(x)`返回`None`。正如消息所述，您在 Python 中无法进行`None`和之间的减法运算。`float`

跟踪您的函数并确保它始终返回一个数值并且不应该出现该问题。*或者*，更改您的代码以检查返回`None`（如@daknok 所示）并以这种方式避免问题 - 但是，最好在源 IMO 处防止问题。

请注意下面@burhan Kahlid 的出色评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:50:55.263

你的修复

```
return some_func(x) - .2 and x not None and float(x) is True 
```

至少有三个原因不起作用。

1.  Python 懒惰地评估`and`s。

    也就是说，首先`A and B`评估`A`，然后如果`A`为真则评估`B`。在您的情况下，评估`A`会导致异常，因此您甚至永远不会到达`B`.

2.  不存在的检查是`x is not None`，不是`x not None`。

3.  问题是`some_func(x)`，`None`不是`x`这样`None`。检查后者是无关紧要的。

* * *

无论如何，解决方案不是从可能是的值中减去浮点数`None`。最好的方法是确保`some_func`永远不会返回`None`，您可以通过修改其代码来做到这一点。下一个最好的方法是检查返回值，您可以这样做

```
output = some_func(x)
if output is not None:
    return output - 0.2 
```

注意，顺便说一句，如果一个函数没有返回任何东西，那么它被认为是隐式返回`None`的。`None`因此，如果这样做，上面的代码将返回`some_func`。这也可能是您问题的根源。

# android - Android - 重复动画增加持续时间，直到持续时间小于一个值

> ID：12882681
> 
> 赞同：0
> 
> 时间：2012-10-14T13:28:30.290
> 
> 标签：android, animation, rotation

我正在尝试创建一个在 imageview 中旋转图像的动画。这种旋转必须增加它的速度（所以持续时间）每次重复，直到持续时间小于一个值。

我试过的是：

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:drawable="@drawable/my_logo"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:duration="2000"
    android:repeatMode="restart"
    android:repeatCount="10"
    android:toDegrees="360">
</rotate> 
```

活动中：

```
logo = (ImageView) findViewById(R.id.imageViewToRotate);

rotation = AnimationUtils.loadAnimation(this, R.anim.first_animation_splash);
rotation.setAnimationListener(new AnimationListener() {

            @Override
            public void onAnimationStart(Animation animation) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onAnimationRepeat(Animation animation) {
                if(animation.getDuration()>100)
                    animation.setDuration(animation.getDuration()/2);
                else
                    logo.clearAnimation();
            }

            @Override
            public void onAnimationEnd(Animation animation) {
                // TODO Auto-generated method stub

            }
        });

@Override
    public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus);
        if(hasFocus){
            logo.startAnimation(rotation);
        }
    } 
```

但它继续以相同的持续时间旋转 10 次....我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:03:35.497

尝试这个：

*   不要让动画自动重启
*   在`onAnimationEnd()`，更改您的持续时间并`startAnimation()`再次调用

我的猜测是动画对象的某些（或全部）更改在动画中间无法识别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-03T01:19:26.243

如果您希望动画在持续时间小于或等于 100 时结束，那么您可以替换`logo.clearAnimation()`为`animation.end()`.

# wordpress - Pinterest 喜欢 ajax 加载

> ID：12882685
> 
> 赞同：1
> 
> 时间：2012-10-14T13:28:57.297
> 
> 标签：wordpress, jquery, browser-history, pinterest

我正在使用 Wordpress 开发一个网站，在该网站上使用 AJAX 加载帖子，同时将 url 更改为帖子的实际永久链接。就像 pinterest 的工作方式一样。AJAX 加载的内容显示在模式框中。我用

window.history.pushState(stateObj, title, url) 将浏览器的 url 更改为帖子的永久链接。现在我的问题是：

当模态框关闭时，我想转到上一个网址而不重新加载页面。

例如，我在主页 (http://example.com) 上，然后单击帖子，模式框打开，通过 AJAX 获取帖子内容，并且 url 变为 (http://example.com/post1)。当模式框关闭时，我希望 url 返回 (http://example.com) 而无需实际重新加载页面。所以基本上只能到之前的状态。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:33:08.343

因此，使用与打开时相同的方式更改 url，但在模式窗口的关闭事件中触发它。

编辑：要转到根网址，您可以这样做`window.history.pushState('', '', '/')`

# asp.net - ASP.net MVC 4 数据库错误

> ID：12882686
> 
> 赞同：0
> 
> 时间：2012-10-14T13:29:06.767
> 
> 标签：asp.net, asp.net-mvc-4

我对 mvc 4 有一个小问题，不幸的是这是星期天，所以我不能问我的老师。

[http://i.stack.imgur.com/gxRGP.png](https://i.stack.imgur.com/gxRGP.png)

我在 MVC 4 中犯了什么错误？我习惯了 MVC 3。

确切地说，此代码适用于 Visual Studio 2010，而不适用于 Visual Studio 2012。

![在此处输入图像描述](../Images/80e1f4c006c43f13e59d0a980e428e48.png)

# javascript - 在屏幕中心启动 Facebook 分享弹出窗口

> ID：12882689
> 
> 赞同：12
> 
> 时间：2012-10-14T13:29:31.030
> 
> 标签：javascript, facebook, xhtml, popup, social

以下代码运行良好，并在屏幕上启动了一个 facebook 弹出窗口，但此弹出窗口未居中。

```
<script type="text/javascript">
function fbs_click() {u=location.href;t=document.title;window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer','toolbar=0,status=0,width=626,height=436');return false;} 
```

```
<a href="http://www.facebook.com/share.php?u=<full page url to share" onClick="return fbs_click()" target="_blank" title="Share This on Facebook"><img src="images/facebookimage.jpg" alt="facebook share"></a> 
```

这是使弹出窗口居中的脚本：

```
 <script type="text/javascript">
 function MyPopUpWin(url, width, height) {
    var leftPosition, topPosition;
    //Allow for borders.
    leftPosition = (window.screen.width / 2) - ((width / 2) + 10);
    //Allow for title and status bars.
    topPosition = (window.screen.height / 2) - ((height / 2) + 50);
    //Open the window.
    window.open(url, "Window2",
    "status=no,height=" + height + ",width=" + width + ",resizable=yes,left="
    + leftPosition + ",top=" + topPosition + ",screenX=" + leftPosition + ",screenY="
    + topPosition + ",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no");
}
</script> 
```

有人可以更新第一个脚本，使其与第二个脚本结合使用，从而在屏幕中央启动弹出窗口。（由于我的编码经验非常有限，我不知道该怎么做。）谢谢大家。皮亚

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-10-14T13:50:43.230

看看这是否适合你：

```
<script type="text/javascript">
function fbs_click(width, height) {
    var leftPosition, topPosition;
    //Allow for borders.
    leftPosition = (window.screen.width / 2) - ((width / 2) + 10);
    //Allow for title and status bars.
    topPosition = (window.screen.height / 2) - ((height / 2) + 50);
    var windowFeatures = "status=no,height=" + height + ",width=" + width + ",resizable=yes,left=" + leftPosition + ",top=" + topPosition + ",screenX=" + leftPosition + ",screenY=" + topPosition + ",toolbar=no,menubar=no,scrollbars=no,location=no,directories=no";
    u=location.href;
    t=document.title;
    window.open('http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),'sharer', windowFeatures);
    return false;
}
</script>

<!-- Please change the width and height to suit your needs -->
<a href="http://www.facebook.com/share.php?u=<full page url to share" onClick="return fbs_click(400, 300)" target="_blank" title="Share This on Facebook"><img src="images/facebookimage.jpg" alt="facebook share"></a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-22T23:27:39.117

尝试这个

```
 <script type="text/javascript">
    function fbs_click() {
      u=location.href;t=document.title;window.open(
      'http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),
      'sharer','toolbar=0,status=0,width=626,height=436');return false;
      }
    </script>

    <a href="http://www.facebook.com/share.php?u=<url>" onclick="return fbs_click()" target="_blank">Share on Facebook</a> 
```

或此贴在 Facebook 上的图片

```
 <script type="text/javascript">
    function fbs_click() {
      u=location.href;t=document.title;window.open(
      'http://www.facebook.com/sharer.php?u='+encodeURIComponent(u)+'&t='+encodeURIComponent(t),
      'sharer','toolbar=0,status=0,width=626,height=436');return false;
      }
    </script>

    <a href="http://www.facebook.com/share.php?u=<url>" onclick="return fbs_click()" target="_blank"><img src="http://originus.samsung.com/us/images/support/facebook-share.png"/></a> 
```

您可以更改图像或文字
大小弹出窗口
`width=626,height=436`
您可以更改大小

# objective-c - 应用进入前台时取消后台任务

> ID：12882690
> 
> 赞同：2
> 
> 时间：2012-10-14T13:29:30.683
> 
> 标签：objective-c, ios, background

在我的应用程序中，当用户关闭应用程序（即它进入后台）时，我正在将我的数据与服务器同步。这个过程大约需要一分钟，并且涉及对服务器的各种调用以上传数据，因此我选择将其作为后台线程执行。

```
- (void)applicationDidEnterBackground:(UIApplication *)application {

    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        [asynchronousAPIController processQueueOrWaitWithIsBackgroundSync:true];

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
} 
```

这工作正常，除非用户在此同步期间（即第一分钟）重新进入前台。我*想要*的是后台同步终止完成 - 即使它在同步的中途也停止同步。当应用程序下次进入后台时，它可以从头开始整个过程​​，没有问题。

我试过用这个：

```
- (void)applicationWillEnterForeground:(UIApplication *)application {
    if (bgTask != UIBackgroundTaskInvalid) {
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }
} 
```

但它不会停止同步 - 只会继续进行。几乎就像一旦开始，它就会继续前进。

我怀疑这可能是因为控制同步的对象是一个单例 - 即不是一个可以被破坏的类对象，它是一个单例，因此可能因为这个原因而保持活力。这会有所作为吗？

还是我只是做错了什么？

任何建议，非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T13:44:21.337

您需要在 NSOperation 中进行后台工作。我会创建一个 NSBlockOperation 并将其添加到 NSOperationQueue。这样一个后台线程就会自动产生。对于复杂的操作，创建一个 NSOperation 子类。在 NSOperation 代码中检查操作是否定期取消（例如在 for 循环中），如果是则退出代码块（在 for 循环中：）`if ([operation isCanceled]) break;`。在 applicationWillEnterForeground 中只是取消操作。

# macos - didFinishRecordingToOutputFileAtURL 没有被调用并警告'self'

> ID：12882692
> 
> 赞同：0
> 
> 时间：2012-10-14T13:29:56.720
> 
> 标签：macos, avfoundation

我用 AVFoundation 创建了一个按预期工作的小程序 - 录制屏幕。由于我的学习，我有一段时间无法处理它，最后，当我尝试使用 Xcode 4 在最新的操作系统（Mountain Lion）中运行该程序时，`didFinishRecordingToOutputFileAtURL`没有调用委托“”。此外，我收到警告： ![显示警告的代码](../Images/f1029486e5dc183957351584459a88b6.png)

我是可可的新手。但是，这个警告令人困惑，因为以前我没有这样的问题......我非常感谢这方面的任何帮助......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:14:50.517

您需要在 AppDelegate 的接口声明中包含委托协议，例如

`@interface AppDelegate : UIResponder <AVCaptureFileOutputRecordingDelegate>`

# php - 从 SQL 查询中提取所有表

> ID：12882695
> 
> 赞同：4
> 
> 时间：2012-10-14T13:30:29.510
> 
> 标签：php, regex

我想为表添加前缀，最近编写了一个 PHP 脚本来提取字符串 SQL 查询中的所有表。

```
$sql = 'UPDATE festivals SET desc = "Starts from July"';
preg_match_all('/(from|into|update|table|join) (`?\w+`?)\s/i', $sql, $matches); 
```

它工作得很好，但唯一的问题是它会提取`July`，因为它不区分 SQL 值和真实的表名，所以它假设这`July`也是一个表。

现在我认为解决方案应该是防止提取包含在单引号或双引号中的内容，但不知道该怎么做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:35:39.557

如果您的查询编写更加严格，您会将所有数据库、表和列名包装在反引号中```，并且它们将非常容易提取 - 只需获取它们之间的字符串的第一个匹配项：只需使用反引号代替的可选。

也就是说，我不完全确定你的正则表达式是如何匹配`from July`的，因为`July`后面没有空格......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:37:29.450

你的正则表达式最好这样：

```
"/((?:^select .+?(?:from|into))|^update|^table|join) (`?\w+`?)\s/I" 
```

但我仍然同意 nvartolomei。

# java - 如何实现 EJB 异步调用的侦听器

> ID：12882705
> 
> 赞同：3
> 
> 时间：2012-10-14T13:32:02.087
> 
> 标签：java, ejb, java-ee-6

我在 Jboss 6 中部署了一个 Web 应用程序。我正在使用 JDK 6、jSF 和 Primefaces。

我的业务层中有一个方法需要很长时间才能完成。
我希望能够在网页中显示该方法正在执行的操作的日志。这是我尝试的简化版本：

```
/* interface to log processing */

interface StatusListener {
    void log(String msg);
}

/* Business class */ 

@Stateless    
class Service {

     @Asynchronous
     public void doProcessing(StatusListener listener) {

        for (int i = 0; i < 1000000; i++ ) {
           processItem(i);
           listener.log("processando item " + n);
        }
     }
}

/* JSF backing bean class */

@Named
public class WebBean implements StatusListener {

     private @EJB Service service; 
     private StringBuffer msgBuffer;

     public void doProcessing() {
        service.doProcessing(this);
     }

     @Override
     public void log(String msg) {
         msgBuffer.append(msg + "\n");
     }

     public StringBuffer getMsgBuffer() {
         return msgBuffer;
     }

} 
```

在我的 XHTML 中，我有一个`textArea`其值指向`msgBuffer`. 我使用 primefaces poll`textArea`每隔几秒钟更新一次。
问题是`msgBuffer`仅在 ejb 方法完成后才更新。调用 log 方法，但对 的更改`msgBuffer`仅在 ejb 完成后对 web bean 线程可见。我尝试过制作`msgBuffer`volatile 并同步日志和`getMsgBuffer`方法，但没有奏效。
任何人都知道如何解决这个问题？

# java - 获取字符串资源抛出 NullPointerException

> ID：12882706
> 
> 赞同：0
> 
> 时间：2012-10-14T13:32:03.367
> 
> 标签：java, android, nullpointerexception, resources, android-context

我的日历中有一个特定日期的事件列表。

```
public ArrayList<Event> eventDetails(int m, int d) {

   ArrayList<Event> events = new ArrayList<Event>();
        switch (m) {
           case 1:
                if (d == 1) {
                    events.add(new Event("Event in Date 1", null, null, null, null, null, null, null));
                }
        }

        return events
} 
```

我想将硬编码的文本转换为我所做的字符串资源：

这个：

```
events.add(new Event("Event in Date 1", null, null, null, null, null, null, null)); 
```

至：

```
events.add(new Event(getResources().getString(R.string.text1), null, null, null, null, null, null, null)); 
```

然而，问题是我在`getResources().getString(R.string.text1)`.

我意识到我必须通过上下文来获取字符串资源，所以：

```
_context.getResources().getString(R.string.text1) 
```

但是，这仍然引发了 NullPointerException。我声明`Context`了静态，但它没有用。

代码有什么问题？

**代码：**

```
public class CalendarEvents extends Activity   {
    private static Context _context;

     /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.events);     
        _context = this.getApplicationContext();

    }

    public ArrayList<Event> eventDetails(int m, int d) {

       ArrayList<Event> events = new ArrayList<Event>();
            switch (m) {
               case 1:
                    if (d == 1) {
                        events.add(new Event(_context.getResources().getString(R.string.text1), null, null, null, null, null, null, null));
                    }
            }

            return events
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T14:23:04.010

我解决了。我在方法中添加了一个 Context 参数，然后使用该参数访问资源：

```
 public ArrayList<Event> eventDetails(Context mContext, int m, int d) {

 ArrayList<Event> events = new ArrayList<Event>();
            switch (m) {
               case 1:
                    if (d == 1) {
                        events.add(new Event(mContext.getResources().getString(R.string.text1), null, null, null, null, null, null, null));
                    }
            }

            return events
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:01:30.470

尝试这个...

`String mystring = getResources().getString(R.string.mystring);`

`getResources()`是`Context`类的方法。如果您在 Activity 或 Service（扩展 Context）中，则可以像在此代码段中一样使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:37:24.613

1) 你错过`()`了`getResources`。

2) 你`R.string.text1`在你的资源中定义了吗？（例如`res/values/strings.xml`）

# automatic-ref-counting - ARC 项目中 NSTextView 的 IBOutlet

> ID：12882710
> 
> 赞同：21
> 
> 时间：2012-10-14T13:32:29.473
> 
> 标签：automatic-ref-counting, nstextview, iboutlet, weak

[正如您在这里](https://stackoverflow.com/questions/7678469)所读到的，在大多数情况下 a`IBOutlet`应该是弱的。

现在您可以在[开发库](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/LoadingResources/CocoaNibs/CocoaNibs.html#//apple_ref/doc/uid/10000051i-CH4-SW6)中阅读，并非所有类都支持弱引用。（例如 NSTextView）。这意味着您必须使用分配：

```
@property (assign) IBOutlet NSTextView *textView; 
```

如果您使用弱引用，您将收到以下错误：“不允许合成弱不可用属性，因为它需要合成 __weak 对象的 ivar”

文档没有提到的是，现在您必须在使用该属性后再次将其设置为 nil，例如通过一种`dealloc`方法：

```
- (void)dealloc
{
    self.textView = nil;
} 
```

据我了解，标有的类`NS_AUTOMATED_REFCOUNT_WEAK_UNAVAILABLE`不支持弱引用，但原因是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-14T13:32:29.473

我想我找到了某些类不支持弱引用的原因：

你可以[在这里](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#ownership.restrictions.weak)阅读：

基本原理：从历史上看，一个类可以通过覆盖保留、释放等来提供自己的引用计数实现。但是，对对象的弱引用需要与其类的引用计数实现协调，因为除其他外，弱引用对于最终版本，加载和存储必须是原子的。因此，现有的自定义引用计数实现通常不支持弱引用而不需要额外的努力。在不破坏二进制兼容性的情况下，这是不可避免的。

# android - 从联系人应用程序中选择一个联系人；但只列出带有电子邮件的联系人

> ID：12882718
> 
> 赞同：2
> 
> 时间：2012-10-14T13:33:34.480
> 
> 标签：android, android-intent, android-contacts

我正在尝试根据他们的信息选择联系人，它适用于电话号码（据我所知）；但是当我尝试仅使用电子邮件选择联系人时，它会失败并出现以下错误：

```
Caused by: android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.intent.action.GET_CONTENT typ=vnd.android.cursor.item/email_v2 } 
```

这是我的代码（或更重要的部分）：

```
Intent intent = new Intent(Intent.ACTION_GET_CONTENT);
if( SMS )
  intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE);
if( EMAIL )
  intent.setType(ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE);
startActivityForResult(intent, PICK_CONTACT); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-13T06:11:25.363

我认为你应该使用`Intent intent = new Intent(Intent.ACTION_PICK, uri)`，其中 uri 是`CommonDataKinds.Email.CONTENT_URI`or之一`CommonDataKinds.Phone.CONTENT_URI`。这样，它将仅显示带有电子邮件或电话的联系人。

# c++ - 为并发运行时实现任务局部变量

> ID：12882719
> 
> 赞同：6
> 
> 时间：2012-10-14T13:33:43.350
> 
> 标签：c++, concurrency-runtime, concrt

我正在通过使其更加异步来改进应用程序（Win64、C++）。我正在使用并发运行时，到目前为止它对我来说效果很好。

该应用程序基本上执行许多“作业”转换数据。为了跟踪每个作业的功能，某些子系统配备了代码来跟踪作业执行的某些操作。以前，这将使用表示当前正在执行的作业的单个全局变量来注册跟踪信息，而无需将上下文信息一直传递到调用链中。每个作业也可以轮流使用 ConcRT 来并行化作业本身。这一切都很好。

不过，现在我正在重构应用程序，以便我们可以并行执行顶级作业。每个作业都作为 ConcRT 任务执行，这适用于除需要跟踪的作业之外的所有作业。

我基本上需要的是一种将一些上下文信息与任务相关联的方法，并将该流程流向由该任务产生的任何其他任务。基本上，我需要“任务本地”变量。

使用 ConcRT，我们不能简单地使用线程局部变量来存储上下文信息，因为该作业可能会使用 ConcRT 生成其他作业，并且这些作业将在任意数量的线程上执行。

我目前的方法包括在启动时创建许多调度程序实例，并在专用于该作业的调度程序中生成每个作业。然后我可以使用该`Concurrency::CurrentScheduler::Id()`函数检索一个整数 ID，我可以将其用作找出上下文的键。这是可行的，但是单步执行`Concurrency::CurrentScheduler::Id()`in 程序集让我有些畏缩，因为它执行多个虚拟函数调用和安全检查，这增加了很多开销，这有点问题，因为这种查找需要以极高的速度完成在某些情况下率。

那么 - 有没有更好的方法来实现这一点？我很想拥有一流的 TaskLocal/userdata 机制，它允许我将单个上下文指针与当前的 Scheduler/SchedulerGroup/Task 相关联，我可以用很少的开销进行检索。

每当 ConcRT 线程抓取新任务时调用的钩子将是我的理想选择，因为我可以检索 Scheduler/ScheduleGroup ID 并将其存储在本地线程中以最小化访问开销。唉，我看不到任何注册这样一个钩子的方法，而且似乎不可能为 PPL/代理实现自定义调度程序类（参见[这篇文章](http://msdn.microsoft.com/en-us/library/gg663535.aspx#sec16)）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T20:00:09.337

是否有某种原因您不能将某种上下文对象传递给这些任务，从而为它们提供更新状态的接口？因为从我的立场来看，听起来你对单例（又名全局变量）有一个非常糟糕的问题，应该通过依赖注入来解决这个问题。

如果依赖注入不是一种选择，那么还有另一种处理单例的策略。该策略基本上允许 Singleton 成为“堆栈”。您可以将一个新值“推送”到 Singleton，然后访问它的每个人都会获得这个新值。然后您可以“弹出”该值并恢复推送之前的值。这不必直接用实际的堆栈建模，这就是为什么我将“push”、“pop”和“stack”这三个词放在引号中。

您可以通过使用该变量的父线程版本的值（不是整个值堆栈，只是顶部值）初始化的线程本地 Singleton 来调整此模型以适应您的情况。然后，如果该线程及其子线程需要新的上下文，您可以将新值推送到线程本地 Singleton。

# php - 通过codeigniter多上传图片并创建拇指

> ID：12882720
> 
> 赞同：1
> 
> 时间：2012-10-14T13:33:55.017
> 
> 标签：php, codeigniter

我有一个问题，我花了我 2 个小时，但我无法解决它。

当我想上传多张图片（3张图片）时，它会上传，但我无法为所有人创建拇指，只为第一张图片，我不知道问题出在哪里

这是我的表格

```
<form action="" method="post" enctype="multipart/form-data">
<input type="file" id="hotel_img1" value="upload" name="hotel_img1">
<input type="file" id="hotel_img2" value="upload" name="hotel_img1">
<input type="file" id="hotel_img3" value="upload" name="hotel_img1">
<input type="submit">
</form> 
```

这是我的代码控制器

```
<?php
if(!empty($_FILES))
    $upload_image = array('1','2','3','4','5');
    foreach($upload_image as $i) {
    if(!empty($_FILES["hotel_img$i"]['name']))
    {
        $hotel_ID= 12;
        $config['file_name'] = $this->session->userdata('user_id').'-'.$hotel_ID.'-'.time().$i;
        $config['upload_path'] =realpath(APPPATH . '../img');
        $config['allowed_types'] = 'gif|jpg|png|jpeg';
        $config['max_size'] = '512';
        $config['max_width'] = '1024';
        $config['max_height'] = '768';
        $config['overwrite'] = TRUE;
        $this->upload->initialize($config);
        $form_name = 'hotel_img' . $i;
        if(!$this->upload->do_upload($form_name))
            {       
                $data['msg'] .= "ERROR";
            }
            else
            {   
                $file_data = $this->upload->data();
                $image_data['img_url'] = $file_data['file_name'];
                $image_data['img_size'] = $file_data['file_size'] * 1024;
                $image_data['img_forID'] = $hotel_ID;
                $this->model_hotels->insert_image($image_data);
                $data['msg'] .= "Uploaded Picture No $i";
                $config_thumb['image_library'] = 'gd2';
                $config_thumb['source_image'] = $file_data['full_path'];
                $config_thumb['maintain_ratio'] = FALSE;
                $config_thumb['width'] = 250;
                $config_thumb['height'] = 150;
                $config_thumb['new_image'] = realpath(APPPATH . '../img').'/thumb/thumb_' .  $file_data['file_name'];
                $this->load->library('image_lib', $config_thumb);
                $this->image_lib->resize();
                $this->image_lib->clear(); 
            }
        }
    }
    $this->model_hotels->set_hotel_thumb($hotel_ID);
}   ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:56:33.487

在我看来 $file_data 总是相同的，并且可能还包含一个带有其他图片的数组。现在你的代码说每张图片都调整大小 $file_data 并且它只选择上传的第一张图片。尝试 print_r($file_data) 因为我猜这就是导致问题的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T16:56:10.150

尝试将此添加到您的配置中：

```
$config['create_thumb'] 
```

# android - 如何防止 Flurry 改变我的活动方向？

> ID：12882724
> 
> 赞同：1
> 
> 时间：2012-10-14T13:34:43.490
> 
> 标签：android, flurry, landscape-portrait

我的应用程序中的一项活动在`android:screenOrientation="portrait"`清单中有一个属性，因为我不希望它改变方向。我正在尝试像这样集成 Flurry：
在 onStart 中：

```
FlurryAgent.onStartSession(this, "api_key");
FlurryAgent.initializeAds(this);
FrameLayout adsFrameLayout = (FrameLayout)findViewById(R.id.frameLayoutAdsContent);
FlurryAgent.getAd(this, "BannerTop-1", adsFrameLayout, FlurryAdSize.BANNER_BOTTOM, 0); 
```

在停止：

```
FlurryAgent.onEndSession(this); 
```

在 AndroidManifest.xml 中：

```
 <activity
        android:name="com.flurry.android.FlurryFullscreenTakeoverActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode"
        android:screenOrientation="portrait" >
    </activity> 
```

发生的事情是 Flurry 让活动改变方向（当设备变成横向时）。如果我不在 onStart 中运行代码，则活动不会改变其方向。

提前致谢， Amidos80

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:48:00.900

如果在布局 xml 中添加：android:orientation="vertical" 会怎样？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T20:01:16.377

经过长时间的研究，我发现这是无法做到的。flurry 会覆盖我的配置并使屏幕能够将方向更改为横向。如果有人找到解决方案，请分享。

# asp.net-mvc - ViewModel 中的 DateTime 在 Controller 中显示为 DateTime.MinValue

> ID：12882725
> 
> 赞同：1
> 
> 时间：2012-10-14T13:35:06.327
> 
> 标签：asp.net-mvc, asp.net-mvc-4

我有一个标准的 asp.net mvc 4 视图，其表单具有一些可编辑字段，包括 DataTime 选择。当表单回传到控制器时，DateTime 始终显示为 DateTime 1/1/0001 的最小值，即使有效日期已成功发送到客户端或在客户端上选择。

我猜 DefaultModelBinding 搞砸了，但我不确定为什么或如何。在我的 web.config 我有以下全球化：

```
<globalization enableClientBasedCulture="true" uiCulture="auto" culture="auto"/> 
```

这是接收帖子的控制器中的我的 ActionResult：

```
[HttpPost]
public virtual ActionResult Edit(KBUser kbuser)
{
    if (this.ModelState.IsValid)
    {
        //save the user
        m_userRepo.UpdateUser(kbuser);

        return RedirectToAction(MVC.Users.Index());

    }
    else
    {
        return View(kbuser);
    }

} 
```

这是视图的相关部分：

```
@model KBMaxLive.Domain.KBUser

@using (Html.BeginForm("Edit", "User", new { idUser = Request["idUser"] }, FormMethod.Post, new { id = "form" }))
    { 
        <fieldset>
            <legend>@Engine.Resources.KBMaxLive.Account</legend>

             <div class="field-column-container">
                <div class="field-column">
                    <div class="field-container">
                        @Html.LabelFor(u => u.CreatedDate)
                        @Html.TextBoxFor(u => u.CreatedDate, new { @class = "k-textbox", @readonly = "readonly" }) 
                        @Html.ValidationMessageFor(u => u.CreatedDate)
                    </div>
                </div>
            </div>
        </fieldset>
    } 
```

除日期时间外，模型的所有属性都很好。
关于出了什么问题或如何调试的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T06:35:18.620

默认模型绑定器在解析 POST 请求的日期时间时使用当前区域性。从您的 web.config 片段中，您可以看出您正在使用`auto`. 这意味着当前的文化将由客户端浏览器首选项决定。例如，在 Google Chrome 中，您可以配置语言列表及其优先顺序。然后浏览器将`Accept-Language`随每个请求一起发送标头。

例如：

```
Accept-Language:en-US,en;q=0.8 
```

然后 ASP.NET MVC 将使用这种语言来设置请求的文化。这意味着模型绑定器将期望以为此语言定义的格式输入日期时间。因为`en-US`那将是`MM/dd/yyyy`. 如果您已将浏览器配置为使用不同的首选语言，则用户需要根据此偏好键入日期时间。

另一方面，如果您希望所有日期都采用特定格式，无论客户端浏览器配置如何，您都可以编写自定义模型绑定器。例如，我已经展示了如何[`this answer`](https://stackoverflow.com/a/7836093/29407)使用`DisplayFormat`相应视图模型属性上的属性来完成此操作。

# mysql - Mysql，加载数据文件，仅特定行

> ID：12882732
> 
> 赞同：0
> 
> 时间：2012-10-14T13:35:45.423
> 
> 标签：mysql, text-files

我正在努力将文本文件中的数据添加到 mysql 数据库中。在我的文本文件中，我有几十行我想从中提取特定的行（这些行与表结构具有相似的结构）。

表结构：

```
Name
Surname
Email
City
ZIP 
```

文本文件：

```
_field1 >>> blah 
otherfield >>> blah
Name >>> John
anotherfield >>> blah
Email >>> john@doe.com
City >>> Portland
ZIP >>> 90210
yetanotherfield >>> foo 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:47:40.867

最好用其他语言解析文件，然后`INSERT`从那里调用，但由于文件中字段的顺序是可预测的，您*可以*通过用户变量使用以下内容：

```
LOAD DATA INFILE '/path/to/file.txt' INTO TABLE my_table
    FIELDS TERMINATED BY '\n' LINES TERMINATED BY 0x1e
    (@dummy, @dummy, @name, @dummy, @email, @city, @zip, @dummy)
SET Name  = SUBSTRING(@name,  LOCATE(' >>> ', @name ) + 5),
    Email = SUBSTRING(@email, LOCATE(' >>> ', @email) + 5),
    City  = SUBSTRING(@city,  LOCATE(' >>> ', @city ) + 5),
    ZIP   = SUBSTRING(@zip,   LOCATE(' >>> ', @zip  ) + 5); 
```

# php - 发布到墙用户使用令牌

> ID：12882733
> 
> 赞同：1
> 
> 时间：2012-10-14T13:35:58.793
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我有 php 代码发布在我的应用程序中使用的用户的墙上。但是在帖子里写

> “由**_**发布”（我的应用名称）。

**代码**：

```
$fql_info = $facebook->api($fql_query);
if($fql_info[0][offline_access] == 1)
{
   $attachment =  array(
        'message' => "",
        'name' => u("ghfhgfhfgh"),
        'description' => u("fghgfhgfh"),
        'link' => LINK,
        'picture'=> "http://gfhgfhgfhfh"
    );
    $facebook->api('/'.$f[uid].'/feed', 'POST', $attachment);
    $abc.=$f[uid]."\n";
    echo $f[uid]."-".$fql_info[0][offline_access]."\n";
} 
```

我想知道如何发布但没有我的应用名称。用户作为海报本身，而不是应用程序发布了它。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T13:54:53.857

很抱歉，但我认为这是不可能的。Facebook 不允许我们这样做，它总是会说 Posted via : [Your APP name]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:49:23.713

我想这是不可能的。应用名称将出现在帖子中。

# bash - 获取最后 n 条记录并更改它们的特定列

> ID：12882738
> 
> 赞同：2
> 
> 时间：2012-10-14T13:36:58.663
> 
> 标签：bash, awk

我有这样的文件

```
1      2      "45554323"      p      b  
2      2      "34534567"      f      a  
3      3      "76546787"      u      b  
2      4      "56765435"      f      a  
*      a  
0      b 
```

我想从部分的最后两条记录`a`中删除`b``END{}`

结果：

```
1      2      "45554323"      p      b  
2      2      "34534567"      f      a  
3      3      "76546787"      u      b  
2      4      "56765435"      f      a  
*        
0 
```

如何使用 awk 获取最后一行并更改其上的字段？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:53:23.187

这是使用任何 awk 的一种方法：

```
awk -v count=$(wc -l <file.txt) 'NR > count - 2 { $2 = "" }1' file.txt 
```

结果：

```
1      2      "45554323"      p      b  
2      2      "34534567"      f      a  
3      3      "76546787"      u      b  
2      4      "56765435"      f      a  
* 
0 
```

或者要将`awk`除输入文件的最后 2 行以外的所有记录作为 shell 脚本进行操作，请尝试`./script.sh file.txt`. 内容`script.sh`：

```
command=$(awk -v count=$(wc -l <"$1") 'NR <= count - 2 { $2 = "" }1' "$1"
echo -e "$command" 
```

结果：

```
1  "45554323" p b
2  "34534567" f a
3  "76546787" u b
2  "56765435" f a
*      a  
0      b 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T13:45:02.210

如果您知道`n`- 行号的值，在该行号*之后*要删除行/列上的最后一项（此处`4`），这将起作用：

```
awk '{if (NR>4) NF=NF-1}1' data.txt 
```

会给：

```
1      2      "45554323"      p      b  
2      2      "34534567"      f      a  
3      3      "76546787"      u      b  
2      4      "56765435"      f      a  
*
0 
```

`NF = NF -1`让 awk 认为行上的字段比实际字段少一个，这就是一旦满足该条件，它就不会显示行上的最后一列/项目。`NR`指正在读取的文件中的当前行号。

awk 无法知道文件中的行数，除非它经过一次，或者得到该信息（例如，`wc -l`）。另一种方法是将最后`n`一行保存在缓冲区中（类似于滑动窗口/磁带延迟类型，您总是`n`在后面打印行），然后处理块中的最后`n`一行`END`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T13:42:11.577

这并不能完全回答您的问题，但会产生您需要的输出：

```
$ gawk '{if (NF < 3) print $1; else print}' input.txt
1      2      "45554323"      p      b
2      2      "34534567"      f      a
3      3      "76546787"      u      b
2      4      "56765435"      f      a
*
0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-14T14:28:35.027

```
$ cat file
1      2      "45554323"      p      b
2      2      "34534567"      f      a
3      3      "76546787"      u      b
2      4      "56765435"      f      a
*      a
0      b

$ awk 'BEGIN{ARGV[ARGC++]=ARGV[ARGC-1]} NR==FNR{nr++; next} FNR>(nr-2) {NF--} 1' file
1      2      "45554323"      p      b
2      2      "34534567"      f      a
3      3      "76546787"      u      b
2      4      "56765435"      f      a
*
0 
```

或者如果您不介意手动指定文件名两次：

```
awk 'NR==FNR{nr++; next} FNR>(nr-2) {NF--} 1' file file 
```

# class - 静态/全局变量问题

> ID：12882743
> 
> 赞同：-1
> 
> 时间：2012-10-14T13:37:42.763
> 
> 标签：class, actionscript, static, global-variables, syntax-error

```
 //main.fla
    var skill1 = addChild(girl2.skill1); 
```

我想访问girl2.as 中的skill1 var，但它没有用。
显示错误：
1119：通过静态类型 Icons.chars:girl2 的引用访问可能未定义的属性技能 1。

```
 //girl2.as
    package Icons.chars
    {

import flash.display.Loader;
import flash.display.MovieClip;
import flash.net.URLRequest;

    public class girl2 extends charsel {

public static var skill1:Loader, url1:URLRequest;

public function girl2 () {
    skill1 = new Loader();
    url1 = new URLRequest("skills/nami/skill4.png")
        skill1.load(url1); 
```

我在 charsel.as 中尝试过，它奏效了

```
//charsel.as
package Icons.chars
{

import flash.geom.Point;
import flash.display.*;
import flash.events.MouseEvent;

public class charsel extends MovieClip {

protected var originalPosition:Point;
public static var player1:MovieClip, player2:MovieClip, player3:MovieClip; 
```

我试图访问 player1 并且它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:58:59.213

我不确定在这种情况下为什么要使用静态修饰符。请注意，即使您已将 Skill1 声明为静态，它实际上只会在您创建 girl2 类的实例时才可用 - 当您在构造函数中创建它时（另请注意，您应该用大写字母命名您的类，所以这应该是 Girl2)。

所以，我要么删除公共变量的所有静态修饰符，要么，如果有任何具体原因，使用静态初始化器来实例化 Skill1 变量：

```
public class girl2 extends charsel {

public static var skill1:Loader, url1:URLRequest;

{
skill1 = new Loader();
skill1.addEventListener(...); // event handlers should be static as well
skill1.load(...);
}

public function girl2 () { 
```

# coffeescript - 为什么这个咖啡脚本不打印出来？

> ID：12882744
> 
> 赞同：7
> 
> 时间：2012-10-14T13:37:57.920
> 
> 标签：coffeescript

所以当索引为0时，我想打印出来：

```
a = [ 1, 2, 3 ] 

for i of a
    if i == 0
        console.log a[i] 
```

但是没有输出。

`i == 0`从来都不是真的……

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-14T13:46:16.920

我将索引作为字符串返回，如果将它们解析为整数，它将起作用

```
a = [ 1, 2, 3 ] 

for i of a
    if parseInt(i) == 0
        console.log a[i] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:44:37.517

这是因为`i`只有 1、2 或 3，因为您循环遍历 中的项目`a`，而不是索引号。

这按照您上面描述的方式工作：

```
a = [ 1, 2, 3 ] 

for i in [0..a.length]
    if i == 0
        console.log a[i] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T16:43:16.427

你不应该使用`of`循环数组，你应该使用`in`. 来自[精美手册](http://coffeescript.org/#loops)：

> 理解也可用于迭代对象中的键和值。用于`of`表示对对象属性而不是数组中的值的理解。
> 
> ```
> yearsOld = max: 10, ida: 9, tim: 11
> 
> ages = for child, age of yearsOld
>   "#{child} is #{age}" 
> ```

所以你试图迭代数组对象的*属性，而不是它的索引。*

您应该在循环中使用其中之一：

```
for e, i in a
    if(i == 0)
        console.log(a[i])

for e, i in a 
    console.log(e) if(i == 0)

console.log(e) for e, i in a when i == 0

#... 
```

或者，既然你有一个数组和一个数字索引，为什么不跳过循环直接进入重点：

```
console.log(a[0]) 
```

# android - 如何更改 pagertitlestrip 的字体

> ID：12882746
> 
> 赞同：4
> 
> 时间：2012-10-14T13:38:05.230
> 
> 标签：android, android-viewpager

```
Typeface xyz=Typeface.createFromAsset(view.getContext().getAssets(),
                "fonts/xyz.ttf");
(TextView)abc.setTypeface(xyz); 
```

这就是您创建和设置自定义字体的方式。

我需要设置 a 的字体/字体，但`pagertitlestrip`没有`.setTypeFace`. `pagertitlestrip`有谁知道我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-28T18:25:17.070

`PagerTitleStrip`实际上是 extends ，因此您可以将`ViewGroup`其子类化并遍历其每个子项以查找需要更改其字体的视图：

```
public class CustomFontPagerTitleStrip extends PagerTitleStrip {
    public CustomFontPagerTitleStrip(Context context) {
        super(context);
    }
    public CustomFontPagerTitleStrip(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    protected void onLayout(boolean changed, int l, int t, int r, int b) {
        super.onLayout(changed, l, t, r, b);
        Typeface tf = Typeface.createFromAsset(getContext().getAssets(), "fonts/xyz.ttf");
        for (int i=0; i<this.getChildCount(); i++) {
            if (this.getChildAt(i) instanceof TextView) {
                ((TextView)this.getChildAt(i)).setTypeface(tf);
            }
        }
    }
} 
```

唯一的缺点是它会阻止 Eclipse 显示您的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-15T05:29:14.257

如果它是自定义字体，请将其放在资产文件夹中并像这样进行更改。

```
public class WeeklyFragment extends Fragment{

PagerTitleStrip _Title;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    View rootView = inflater.inflate(R.layout.weekly_fragment, container, false);                   
    _Title = (PagerTitleStrip)rootView.findViewById(R.id.__Weekly_pager_title_strip);
    Typeface font = Typeface.createFromAsset(getActivity().getAssets(), "your font.ttf"); 

    for (int counter = 0 ; counter<_Title.getChildCount(); counter++) {

        if (_Title.getChildAt(counter) instanceof TextView) {
            ((TextView)_Title.getChildAt(counter)).setTypeface(font);
            ((TextView)_Title.getChildAt(counter)).setTextSize(25);
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T13:46:06.797

虽然我*认为* `ViewPager`支持`android:textAppearance`，但您也不能那样设置字体。

您最好复制`PagerTitleStrip`代码（在您的 SDK 中或[在线提供](https://android.googlesource.com/platform/frameworks/support/+/refs/heads/master/v4/java/android/support/v4/view/PagerTitleStrip.java)），将您的 fork 重构到您自己的包中，然后对其进行修改以适应。或者，查看 ViewPagerIndicator 库是否有您喜欢的允许您配置字体的库。

# java - Maven Jar 插件和 Maven 源插件使用

> ID：12882747
> 
> 赞同：0
> 
> 时间：2012-10-14T13:38:13.217
> 
> 标签：java, maven

我知道如何使用 jar 插件和源插件。我想将我的 jar 库与源代码和编译代码一起使用。我怎样才能做到这一点 ？我很困惑，因为创建了两个 jar 文件。如何将这些文件用于另一个项目？只是添加依赖项还是有更方便的方法？我不知道。谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:49:35.243

如果你已经在你的项目上设置了`artifactId`,`groupId`和，并且对它做了 a ，它应该可以在你的本地仓库中使用，这样你以后就可以将它导入到带有标签的另一个项目中。`version``mvn install``<dependecy/>`

# typescript - 如何在 TypeScript 中将多个外部模块放入同一个命名空间？

> ID：12882748
> 
> 赞同：23
> 
> 时间：2012-10-14T13:38:15.153
> 
> 标签：typescript

假设我想每个 .ts 文件有一个类。我有两个 .ts 文件，看起来像这样：

```
export module MyClasses { export class A {} } 
```

和

```
export module MyClasses { export class B {} } 
```

我不能这样做：

```
import MyClasses = module('A');
import MyClasses = module('B'); 
```

如何在单独的文件中定义类并将它们放入相同的“命名空间”？此外，我们最终不得不做类似的事情：

```
MyClasses.MyClasses.A 
```

代替

```
MyClasses.A 
```

这种额外的层次结构有什么意义？这样您就可以在一个模块文件中拥有多个导出的模块？到目前为止，我想出的最佳解决方案是删除“导出模块”（因为在编译 AMD 时“导出类”似乎就足够了），这会将类上移一个层次。然后：

```
import AModule = module('A');
module MyClasses{ var A = AModule.A; }
import BModule = module('B');
module MyClasses { var B = BModule.B; } 
```

虽然它工作得很好，但并不完全简洁。没有更好的方法来做到这一点吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-10-21T13:56:33.563

不幸的是，似乎没有一个完美的解决方案，但这就是我现在解决它的方法：

文件“控制器/MainController.ts”：

```
class MainController {
    ...
}

export = MainController; 
```

文件“控制器/SecondController.ts”：

```
class SecondController {
    ...
}

export = SecondController; 
```

文件“控制器/命名空间.ts”：

```
import MainController = require('./MainController');
import SecondController = require('./SecondController');

export = { MainController, SecondController } 
```

文件“App.ts”（使用“命名空间”的地方）

```
import Controllers = require('Controllers/Namespace');

angular.module('app', [])
    .controller('MainController', Controllers.MainController)
    .controller('SecondController', Controllers.SecondController) 
```

这为您提供了很好的智能感知，隐藏了 400 个导入语句，并使实际使用命名空间的代码保持相当干净......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-14T16:35:02.450

我认为没有更好的方法可以通过**外部**模块实现这一目标。语言规范定义外部模块如下：

> 外部模块（第 9.4 节）是使用外部模块名称引用的单独加载的代码体。外部模块被编写为单独的源文件，其中至少包含一个导入或导出声明。

再往下说，**内部**模块是开放式的，可以扩展到多个文件：

> 内部模块是“开放式”的，内部模块声明具有相同的限定名称，相对于公共根（如第 2.2 节中定义）有助于单个模块。

我发现没有其他提及外部模块的类似声明。我几乎确信它不是。如果您需要加载模块，那么您将不得不使用引用路径来访问从不同文件加载的类型。

但是，对我来说，听起来你最好选择内部模块。然后你可以简单地将你的模块分布在两个文件中

```
export module MyClasses { export class A {} } 
```

和

```
export module MyClasses { export class B {} } 
```

使用参考路径将它们带入范围

```
///<reference path='A.ts'/>
///<reference path='B.ts'/> 
```

然后简单地用模块名称引用它们，例如

```
var a = new MyClasses.A(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T16:16:27.543

请原谅可怜的变量名称，我在 Visual Studio 中对此进行了测试。当对导入语句使用不同的名称时，它对我有用。

```
import x = module('A');
import y = module('B');

x.MyClasses.A;
y.MyClasses.B; 
```

或者，您可以使用参考注释来达到类似的效果，但如果您正在捆绑，而不是使用模块加载，这会更好。您需要从两个声明中删除`export`关键字：`MyClasses`

```
///<reference path='A.ts'/>
///<reference path='B.ts'/>

var x = MyClasses.A; 
```

# android - 带有图像和文本的 android ListView

> ID：12882751
> 
> 赞同：0
> 
> 时间：2012-10-14T13:38:36.713
> 
> 标签：android, list

我已经搜索了很多关于 ListView 和适配器的信息，但无法真正理解它是如何工作的。基本上我需要的是 10 行的图像 + 文本，所以我可以点击每一行并做一些事情。可以请有人为此提供代码吗？我真的不知道如何创建一个适配器然后在它上面设置监听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T15:16:17.343

*   你检查过下面的链接吗？？如果没有，请检查它。当然它会帮助你。

    [http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/](http://www.androidhive.info/2012/02/android-custom-listview-with-image-and-text/) [http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with- image-and-text-using-arrayadapter/](http://theopentutorials.com/tutorials/android/listview/android-custom-listview-with-image-and-text-using-arrayadapter/) [http://wptrafficanalyzer.in/blog/listview-with-images-and-text-using-simple-adapter-in-android/](http://wptrafficanalyzer.in/blog/listview-with-images-and-text-using-simple-adapter-in-android/)

# jquery - 当我单击不同的链接时，jQuery 事件侦听器给我相同的值

> ID：12882761
> 
> 赞同：0
> 
> 时间：2012-10-14T13:39:52.367
> 
> 标签：jquery, selector

我做了一个问题的jsfiddle

[http://jsfiddle.net/XXVAP/](http://jsfiddle.net/XXVAP/)

问题是我单击的任何项目都会向我显示最后一个 ID（即 10）

这快把我逼疯了！帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:43:03.457

那是因为您正在提醒一个预定义的变量。在您的 for 循环中，您正在更新`id`变量的值，在最后一次迭代中，它的值变为`10`并且您在每个元素的单击处理程序中警告该变量。你应该使用`this.id`：

```
alert(this.id); 
```

[http://jsfiddle.net/2dfkh/](http://jsfiddle.net/2dfkh/)

请注意，您的代码中的事件是`undefined`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:55:36.350

问题可以归结为...

```
var l = 10;
for(var i = 0; i < l; ++i) {
    $("#item-" + i).click(function() {
        alert(i);
    });
} 
```

click 函数的内容在它通过循环时不会被评估，而是当你点击元素时，它将运行该函数并警告`i`当时的任何内容......在这种情况下它将是 10。保持持有你可以做很多事情的时候的价值。

将值作为数据项传递给元素。

```
var l = 10;
for(var i = 0; i < l; ++i) {
    $("#item-" + i).data("id", i).click(function() {
        alert($(this).data("id"));
    });
} 
```

创建一个内部外壳，它看起来很棘手，但它只是一个立即调用的函数，它返回点击处理函数。

```
var l = 10;
for(var i = 0; i < l; ++i) {
    $("#item-" + i).click((function(n) {
        return function() {
            alert(n);
        }
    })(i));
} 
```

你也可以写...

```
function handler(n) {
    return function() {
        alert(n);
    }
}
var l = 10;
for(var i = 0; i < l; ++i) {
    $("#item-" + i).click(handler(i));
} 
```

或者你可以将整个绑定作为一个新函数......

```
function bindElement(n) {
    $("#item-" + n).click(function() {
        alert(n);
    });
}
var l = 10;
for(var i = 0; i < l; ++i) {
    bindElement(i);
} 
```

* * *

**注意：** W3C 规范规定 id 不应以数字开头，[http://www.w3.org/TR/html401/types.html#type-name](http://www.w3.org/TR/html401/types.html#type-name) 6.2，bullet 2。要使 HTML 有效，您应该在前面加上它用字符串。

* * *

这是一个显示不同解决方案的小提琴[http://jsfiddle.net/XXVAP/8/](http://jsfiddle.net/XXVAP/8/)

# android - AWS - 图书搜索 android

> ID：12882766
> 
> 赞同：1
> 
> 时间：2012-10-14T13:40:40.213
> 
> 标签：android, amazon-web-services

我正在尝试使用 AWS（亚马逊网络服务）来搜索书籍的详细信息。我已经阅读了他们网站上的几乎所有解释，但我不明白我应该使用哪种服务（EC2、RDS 等）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-15T15:20:35.373

您正在寻找的是产品广告 API。不幸的是，适用于 Android 的 AWS 开发工具包不支持此 API。

您可能会发现相关内容[很有](https://stackoverflow.com/questions/1595624/amazon-products-api-looking-for-basic-overview-and-information)用。

# android - 将收件箱中的消息显示为敬酒或警报

> ID：12882770
> 
> 赞同：0
> 
> 时间：2012-10-14T13:41:32.093
> 
> 标签：android

我正在开发一个应用程序，在该应用程序中我通过消息获得余额，并且我想将该消息显示为警报或敬酒。我能为此做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-15T01:35:09.347

1) 注册一个 SMSBroadcastReceiver

2）解析出消息

3）启动一个新的Activity，然后从那里启动一个新的AlertDialog

再说一次，和其他人一样，我不知道你在这方面到底走了多远，所以我不能提出更具体的建议。

# php - 通过 php 站点上的 socket.io 通知

> ID：12882776
> 
> 赞同：2
> 
> 时间：2012-10-14T13:42:24.440
> 
> 标签：php, node.js, curl, socket.io

我正在用 PHP 构建一个网站，以 JSON 格式处理 Redis 中的会话。

这样，PHP 解释器和 node.js 服务器都可以访问会话。

我现在要做的是在所述网站中添加通知；我正在考虑的过程如下：（将其视为一个简单的朋友请求以简化这一切）

1.  用户 A 发送好友请求。
2.  PHP 使用 cURL 向 node.js 服务发送通知
3.  用户 B 收到通知，因为他通过 socket.io 连接到 node.js

实现这一目标的一般准则是什么？因为我很清楚，如果用户 A 和 B 在不同的服务器上，就不可能水平扩展；

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:50:14.667

听起来您可以在这里通过发布/订阅协议架构来使用 Web 套接字。

您可以通过 Web 套接字获得服务器客户端功能。Node 是 websocket 服务器的完美选择，大量的小 IO。见[http://en.wikipedia.org/wiki/Web_sockets](http://en.wikipedia.org/wiki/Web_sockets)

我不认为 php - 节点通信是否需要共享会话，只需让您的客户端通过套接字推送请求并根据需要处理请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:56:41.167

我认为您提出的方法听起来很合理。但是，您可以考虑使用消息队列（zeromq、rabbitmq 等），而不是直接请求服务，这样您就可以更轻松地对其进行扩展，因为您可以轻松地将逻辑添加到队列处理以将消息传递到正确的节点实例。

我设法在没有特殊配置的廉价 VPS 上获得了 1400 个与 socket.io 的并发连接，因此即使没有任何技巧，它也应该可以很好地扩展。就我而言，这些连接中的大多数也几乎不断地发送和接收数据。它可能处理的不止这些，1400'ish 只是我碰巧获得的最大用户数。

虽然我更担心首先获得所有这些用户；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T22:48:18.523

使用 Redis 内置的 pub-sub 功能。当 PHP 服务器收到请求时，它会将请求发布到为此目的而设置的通道。您的每个节点服务器都订阅该频道并检查所涉及的用户是否已连接到该频道。如果是这样，它会通过 socket.io 发送通知。作为奖励，您避免了额外的网络连接，并且简化了整体逻辑。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-25T17:40:52.090

只需根据需要设置您的数据库，然后每当进行活动时，只需告诉您的节点 js 通过 redis 将相关信息传输到 php 并进行处理，并通过通道从 php 向节点做出响应，继续检查表中的通知和节目

# c# - 将字符串数组 (string[]) 添加到 List C＃

> ID：12882778
> 
> 赞同：45
> 
> 时间：2012-10-14T13:42:35.047
> 
> 标签：c#, arrays, list

当 string[], _lineParts 添加到 List 中时，我在 List 中看到的只是“System.String[]” 需要做什么才能看到列表中的实际 string[] 值。

```
while (_aLine != null) 
{ 
    //split the line read into parts delimited by commas 
    _lineParts = _aLine.Split(new char[] { ' ', '\u000A', ',', '.', ';', ':', '-', '_', '/' }, 
        StringSplitOptions.RemoveEmptyEntries); 
    //keep things going by reading the next  line 
    _aLine = sr.ReadLine(); 
    //words = _lineParts; 
    if (_lineParts != null) 
    { 
        //_words.Add(_lineParts.ToString()); 
        wrd.Add(_lineParts.ToString()); 
    } 
} 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-10-14T13:44:22.407

使用[List.AddRange](https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1.addrange)而不是 `List.Add`

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-14T13:47:11.727

使用[List.AddRange](https://docs.microsoft.com/en-us/previous-versions/windows/silverlight/dotnet-windows-silverlight/z883w3dc(v%3dvs.95))而不是[List.Add](https://docs.microsoft.com/en-us/previous-versions/windows/silverlight/dotnet-windows-silverlight/3wcytfd1(v%3dvs.95))

*改变*

```
 wrd.Add(_lineParts.ToString()); 
```

*到*

```
wrd.AddRange(_lineParts); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-14T13:45:36.433

您可以`List.AddRange()`在您使用的地方使用`List.Add()`

# javascript - 在 Javascript 中，如何检查用户是否有文件的缓存版本？

> ID：12882783
> 
> 赞同：0
> 
> 时间：2012-10-14T13:43:19.073
> 
> 标签：javascript, jquery, caching, browser

> **可能重复：**
> [如何检测 XHR 何时返回缓存资源？](https://stackoverflow.com/questions/12830425/how-to-detect-when-xhr-returns-a-cached-resource)

我构建了一个自动加载器，如果它尚未使用 jquery 加载到此页面上，则仅加载一个 javascript 文件：

```
$.getScript(); 
```

我首先检查函数是否存在，如果不存在，我会加载它们。但是，这无法解释浏览器缓存，我希望我能够弄清楚如何。

我想添加的一件事是查看用户是否已经将文件保存在浏览器缓存中。是否可以检查来自您服务器的文件是否已经缓存在用户浏览器上，以便我可以完全跳过对服务器的调用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:46:26.827

缓存透明地工作。如果您请求一个文件并且该文件存在于用户的缓存中，则将使用缓存的文件，并且不会向服务器发出额外的请求。浏览器会处理这个问题，因此您不必担心您所描述的情况。

`.getScript`默认情况下使用带时间戳的查询参数禁用此功能，因此您只需禁用缓存绕过，它`getScript`使用：

```
$.ajaxSetup({
  cache: true
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T13:50:22.940

当请求发出时，浏览器将根据文件是否已经在缓存中来确定是否从服务器检索。jQuery 会添加一个时间戳，因此每次都会加载一个新版本。这可以通过设置关闭`cache:true`

至于检查您是否已经在页面中加载以免在代码中再次加载它的方法，您可以做很多事情。

1.  Add a class to element or body when script loads and check if class exists before making a new call.
2.  Set a variable flag withing the script and check for existence before making new call
3.  Check if a function within the script exists before making a new call

# c# - 尝试在我的 ASP.NET MVC 应用程序中使用 DisplayForModel 但模型未显示

> ID：12882788
> 
> 赞同：0
> 
> 时间：2012-10-14T13:44:07.693
> 
> 标签：c#, .net, asp.net-mvc, displayfor

S'Ok，给定以下模型：-

```
public class SomeViewModel
{
    public IAnimal Animal { get; set; }
    public Exception Exception { get; set; } 
} 
```

一个`IAnimal`可以是这个..

```
public class Cat : IAnimal { .. } 
public class Dog : IAnimal { .. } 
```

并给出以下 Razor 代码

```
.. snip ..

@if (Model.Animal!= null)
{
    Html.DisplayForModel(Model.Animal);
}
else if (Model.Exception != null)
{
    Html.DisplayForModel(Model.Exception);
}

@Html.ActionLink("Lets go back home.", "Index") 
```

如果模型实例是其中之一，则视图不会渲染猫或狗的属性。

现在，这些模型中的每一个都只是一些字符串和布尔值等。所有原始类型。

所以我想，如果我只是传入模型，它应该被渲染。

有人对我可能做了什么有任何建议，错了吗？

另外 - 对于奖励积分，是否可以为这两个类之一创建一个显示模板 - 比如说这个`Cat`类 - 并让它只显示 instelf？例如。告诉它显示自己，而不是我手动创建`Html.Label`...等。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:43:14.570

请记住，如果您依赖元数据注释来允许在视图中进行自动渲染（例如属性标题、验证等），那么使用接口会有些痛苦。MVC 引擎将尝试从接口而不是具体类型中提取元数据，至少这是它使用内置模板所做的。您可以通过检查具体类型并根据其类型加载元数据来覆盖模板以绕过此限制。这是可行的，但我不推荐它，因为它会影响性能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:47:51.553

可以为`Cat`/创建显示模板`Dog`，（与不能用于模板的界面不同）。

您可以通过`Cat.cshtml`在 Shared\DisplayTemplates 文件夹下创建一个文件来执行此操作，但在此模板中，您必须手动设置您希望此模板呈现的 html。

**编辑** 作为你的第一个问题 - 我不认为`DisplayForModel`你正在寻找什么，你provbbaly需要的是[DisplayFor](http://msdn.microsoft.com/en-us/library/ee407390%28v=vs.108%29.aspx)

# ruby-on-rails - 获取对 seo 不友好的 url 版本

> ID：12882792
> 
> 赞同：0
> 
> 时间：2012-10-14T13:44:30.323
> 
> 标签：ruby-on-rails, disqus

我正在向我们网站上的一些文章添加 disqus 评论，并且所有 URL 都是 SEO 友好的。这意味着，如果文章的标题发生更改，该文章的 URL 也会更改，这将丢弃以前的 disqus 评论（链接到 URL 的先前版本）。解决方案是在将 URL 传递给 Disqus 之前从 URL 中删除文章的标题。

所以我需要把“http://mydomain.com/article/123-myarticle/section/1-sectiontitle”变成“http://mydomain.com/article/123/section/1”

最简单的方法是什么？

谢谢！

*PS：我对 Rails 很陌生（我正在接管一个已开发的项目）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:49:36.417

您无需从 URL 中提取任何内容。您需要为 Disqus 提供的只是一个唯一的 ID。

因此，您可以向模型添加一个方法，`disqus_id`例如调用：

```
def disqus_id
    "name_of_your_model_#{id}"
end 
```

然后，在javascript中：

```
disqus_identifier = "<%= @your_model.disqus_id %>"; 
```

# python - 在 matplotlib 中删除图形的某个部分

> ID：12882794
> 
> 赞同：1
> 
> 时间：2012-10-14T13:44:45.837
> 
> 标签：python, matplotlib

我正在尝试执行以下操作：绘制两个不同的数据集，询问用户哪个更好，从图中删除坏的数据，并保存好图。但是，我找不到使用 matplotlib 的方法。我找到了`cla()`命令，但即使这样，它也会继续删除整个数字......有人可以帮我解决这个问题吗？

这是我的做法。

```
fig=plt.figure()
ax=fig.add_subplot(111)
plot(something)
ax2=fig.add_subplot(111)
plot(other thing)
cla() 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:59:44.503

这绘制了两条曲线。单击曲线将其删除。

```
import matplotlib.pyplot as plt
import numpy as np
sin = np.sin
cos = np.cos
pi = np.pi

def delete(event):
    artist = event.artist
    artist.remove()
    event.canvas.draw()

fig = plt.figure()
ax = fig.add_subplot(111)

x = np.linspace(0, 2*pi, 50)
y = 2*sin(x)
z = 2*cos(x)
line1, = ax.plot(x,y)
line2, = ax.plot(x,z)
for artist in [line1, line2]:
    artist.set_picker(5)
fig.canvas.mpl_connect('pick_event', delete)

plt.show() 
```

# c - C 数据结构 - 存储二叉树的表示

> ID：12882797
> 
> 赞同：0
> 
> 时间：2012-10-14T13:44:51.837
> 
> 标签：c, data-structures, code-organization

我正在为嵌入式处理器开发一个项目，其中我有一些在运行时创建的数据，并且指向这些数据的指针需要排列成几个类似二叉树的数据结构以供程序使用。

这些结构将在程序期间固定，但是，我希望编译时的选项能够快速更改使用的树的结构。希望更优雅和更容易重新配置的东西比说，每个涉及的树的函数或宏以正确的顺序为树的每个底层数据元素和节点重复调用“AddNode”函数。感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:59:09.400

使用 M4 预处理器实现高级伪语言以生成构建树所需的 C 代码怎么样？例如，您的代码可能有一个名为的函数，`initTrees()`其主体将由 M4 从一个文件自动生成，该文件的内容是对所需树结构的描述。整个过程如下：

**sample.c.m4 ---> [M4] ---> sample.c ---> [C 编译器] ---> 二进制文件**

[http://www.gnu.org/software/m4/](http://www.gnu.org/software/m4/)

[http://en.wikipedia.org/wiki/M4_(computer_language](http://en.wikipedia.org/wiki/M4_(computer_language) )

# actionscript-3 - FLASH：获取从 AS3 swf 运行/加载的 AS2 SWF 中的 inputtext 值

> ID：12882801
> 
> 赞同：0
> 
> 时间：2012-10-14T13:45:12.797
> 
> 标签：actionscript-3, flash, actionscript-2

我在 Flash 中制作了一个电子学习应用程序，我在这个电子学习中使用了 AS3，在这个应用程序中，我调用/加载了我用 AS2 制作的 eksternal swf。

在那个外部 swf 中，我有一个用户输入文本，当单击提交按钮时，我获取输入文本的值并将其解析为全局变量，然后将其显示给证书。

如果我独立运行 as2 swf，它就可以工作，但是如果我从 as3 swf 加载 as2 swf，则无法从 inputtext 中获取值。它说未定义的变量。

任何人都可以帮助/解释我的问题吗？

谢谢之前，对不起我的语法。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:02:10.110

AVM1 和 AVM2 以这种方式不兼容。因此，如果您需要在两者之间进行通信，则必须使用 LocalConnection。这是在 ActionScript 2 和 ActionScript 3 电影之间建立通信的唯一选项。

# android - 未授予 Android 应用程序中的 Internet 权限

> ID：12882807
> 
> 赞同：3
> 
> 时间：2012-10-14T13:45:41.597
> 
> 标签：android, acra, android-permissions

我正在尝试在我的项目中使用[ACRA](http://acra.ch/)，但每当我的应用程序启动时，我都会在日志中看到以下消息。

```
E/ACRA    (11618): com.example.TestApp should be granted permission android.permission.INTERNET if you want your crash reports to be sent. If you don't want to add this permission to your application you can also enable sending reports by email. If this is your will then provide your email address in @ReportsCrashes(mailTo="your.account@domain.com" 
```

下面是我的`AndroidManifest.xml`，它具有 Internet 权限，所以不确定这里发生了什么。任何帮助表示赞赏！

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.TestApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="16" />

    <application
        android:icon="@drawable/ic_launcher"
        android:name="TestApplication"
        android:label="@string/app_name" >
        <activity
            android:name="MainActivity_"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

    <uses-permission android:name="android.permission.INTERNET"/>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:21:58.840

I had this problem when I ran on JellyBean, since the READ_LOGS permission was removed in JB.

See this question for how to work around this problem in API 16 and above: [READ_LOGS permission on Jelly Bean (api 16)](https://stackoverflow.com/questions/11461650/read-logs-permission-on-jelly-bean-api-16)

# mysql - 当给定值位于两列之间时如何返回所有行

> ID：12882812
> 
> 赞同：4
> 
> 时间：2012-10-14T13:46:23.660
> 
> 标签：mysql, sql

选择值在给定数字之间的行更容易。但我没有运气弄清楚这一点-

我有一个表，其中有两个字段`min_age`和`max_age`. 当给定值介于两者之间时如何返回所有行`min_age and max_age`

PS我还是sql新手，如果这听起来太傻，请原谅我。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T13:49:30.443

```
SELECT *
FROM `tbl`
WHERE 35 BETWEEN `min_age` AND `max_age`; 
```

那应该这样做。当然，我使用了 35。您可以使用任何其他值来代替。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T13:48:47.650

您可以使用`BETWEEN`来获得您想要的结果

```
 SELECT *
FROM tablename
WHERE <some value> BETWEEN `min_age` AND `max_age`; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-14T14:01:01.823

如果您试图做相反的事情（提供一个值并找到所有最小和最大年龄值包含所提供值的行），然后尝试

```
Select * From table
Where @myValue Between min_age And max_age 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-14T13:50:04.170

根据您的问题，这是我的第一个想法：

```
select * from from YOUR_TABLE where VALUE > min_age AND VALUE < max_age 
```

但是，我认为您的问题可能还有更多，如果这些请详细说明。

您也可以尝试使用`BETWEEN`运算符

```
 SELECT * FROM Persons WHERE LastName BETWEEN 'Hansen' AND 'Pettersen' 
```

[http://www.w3schools.com/sql/sql_between.asp](http://www.w3schools.com/sql/sql_between.asp)

# jira - 是否可以从 greenhopper / Jira 取消删除任务？

> ID：12882814
> 
> 赞同：3
> 
> 时间：2012-10-14T13:46:32.287
> 
> 标签：jira, jira-agile

我错误地删除了一些任务，是否可以取消删除它们？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T13:56:19.890

运气不好。在 Jira 中，删除确实意味着删除。问题数据完全从数据库中删除

请按照以下链接查找任何解决方法：

*   [https://answers.atlassian.com/questions/57259/how-to-restore-deleted-issue-in-jira](https://answers.atlassian.com/questions/57259/how-to-restore-deleted-issue-in-jira)
*   [http://osdir.com/ml/java.jira.user/2008-01/msg00102.html](http://osdir.com/ml/java.jira.user/2008-01/msg00102.html)

# android - Android VideoView MediaPlayer OnInfoListener - 未触发事件

> ID：12882815
> 
> 赞同：9
> 
> 时间：2012-10-14T13:46:33.363
> 
> 标签：android, video-streaming, android-mediaplayer

给出了以下源代码片段：

```
videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
        @Override
        public void onPrepared(MediaPlayer mediaPlayer) {

            mediaPlayer.setOnInfoListener(new MediaPlayer.OnInfoListener() {
                @Override
                public boolean onInfo(MediaPlayer mp, int what, int extra) {
                    if (what == MediaPlayer.MEDIA_INFO_BUFFERING_END){
                        activity.dismissDialog(DialogID.DIALOG_LOADING);
                        return true;
                    } 
                    return false;
                }
            });
        }
    }); 
```

我正在使用 Android 3.x+ 设备流式传输 HLS 流，并在缓冲完成后尝试隐藏加载对话框。视频流有效，但永远不会触发信息事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-27T13:27:41.540

我知道为时已晚，但是将其发布给仍在寻求解决方案的用户（这对我有用）：

```
 progressDialog.show();
        videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
            @Override
            public void onPrepared(MediaPlayer mediaPlayer) {
                mediaPlayer.setOnInfoListener(new MediaPlayer.OnInfoListener() {
                    @Override
                    public boolean onInfo(MediaPlayer mp, int what, int extra) {
                        if (what == MediaPlayer.MEDIA_INFO_BUFFERING_END){
                            progressDialog.dismiss();
                            return true;
                        } else if(what == MediaPlayer.MEDIA_INFO_BUFFERING_START){
                            progressDialog.show();
                        }
                        return false;
                    }
                });
                progressDialog.dismiss();
                videoView.start();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-07T04:39:55.000

你是对的，事件永远不会被触发。这是一个已知的 HLS 错误，我认为 Google 不会修复。

这适用于 onInfo 和缓冲事件。

请参阅[https://code.google.com/p/android/issues/detail?id=42767](https://code.google.com/p/android/issues/detail?id=42767)和[https://code.google.com/p/googletv-issues/issues/detail?id=2](https://code.google.com/p/googletv-issues/issues/detail?id=2)

对不起！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-23T03:25:12.890

Not fully sure as to what the OP is asking, but here are some very untimely bits of information.

I wouldn't rely on onPrepared. I find it to be unreliable.

I have found the two most useful pieces of information for HLS streaming through the MediaPlayer are the duration of the video and the progress position of the video. You get both of these by listening to progress updates.

When the duration is greater than zero, you know the video is truly prepared and can be manipulate (scrub). When progress position changes, you know the video is done buffering and has commenced playback. This last item only works when the video is playing of course. The MediaPlayer tends to relay inaccurate information.

These pieces of information are mostly accurate and can usually be relied upon to be "fairly" timely. This timeliness varies from device to device.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-07T21:32:04.050

`onPrepared``MediaPlayer`在准备开始缓冲时调用，而不是在视频完全缓冲时调用。但是，从`onPrepared`方法中关闭加载对话框是完全自然的。

**在填充缓冲区后恢复播放****时**也`MEDIA_INFO_BUFFERING_END`使用它，所以我认为它不应该用来关闭对话框。所以这应该工作：**`MediaPlayer`**

```
videoView.setOnPreparedListener(new MediaPlayer.OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mediaPlayer) {
        activity.dismissDialog(DialogID.DIALOG_LOADING);
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-02T14:50:27.160

如果您想在每次缓冲时显示加载（初始时间或后续缓冲区欠载），只需确保再次显示它：

```
// at the beginning
show

boolean onInfo(int what, int extra) {
  switch (what) {
    case MEDIA_INFO_BUFFERING_END:
      "hide";
      break;
    case MEDIA_INFO_BUFFERING_START
      "show":
  }
} 
```

因此，此事件序列将按需要执行：

```
- whenever you start (setVideoURI or start): show
- onPrepared: just plug the info listener
- onInfo BUFFERING_END   hide (it's playing)
- onInfo BUFFERING_START show (it's buffering again)
- onInfo BUFFERING_END   hide (it's playing) 
```

**更新：**

这是假设信息事件有效。当然。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T09:10:59.323

您无需通过 setOnInfoListener

通过覆盖 setOnPreparedListener 方法就足够了。就像在 api 节目中一样

> **公共无效 setOnPreparedListener (MediaPlayer.OnPreparedListener l)**
> 
> 注册要在媒体文件加载并准备就绪时调用的回调。

所以，你可以在 setOnPreparedListener 方法中关闭你的对话框就足够了

像这样

```
 vv.setOnPreparedListener(new OnPreparedListener() {
    @Override
    public void onPrepared(MediaPlayer mp) {

            handler.post(new Runnable() {
            @Override
        public void run() {
                Toast.makeText(MainActivity.this, "finish11", Toast.LENGTH_LONG).show();
        }
        });
        }
    }); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-01T12:23:29.210

您可以在 videoView 上设置 OnPreparedListener 因为它是您的对象，但是如果您检查[VideoView](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/widget/VideoView.java)的源，您会发现 mMediaPlayer 是它的私有成员，因此您从外部所做的任何更改都不会应用于它。

根据您的要求，您需要缓冲状态，以便您可以拥有线程或处理程序或某些东西，以便您可以更新 UI 以获取缓冲状态，有一种方法

```
int percent = videoView.getBufferPercentage();

if(percent == 100){
// buffering done 
} 
```

# c# - 为什么在使用 NUnit 时出现 DbContext Has Changed 异常？

> ID：12882826
> 
> 赞同：0
> 
> 时间：2012-10-14T13:48:16.233
> 
> 标签：c#, entity-framework, nunit, dbcontext

我在我的项目中使用 Entity Framework 5。我想测试一些新的功能。

发生的事情是，即使我的数据库已更新，（当我添加迁移时，它不会添加任何其他内容）并且即使我运行我的项目，它也运行得很好。当我尝试使用 NUNIT 测试项目时，我得到了这个异常：

`System.InvalidOperationException : The model backing the 'DbContext' context has changed since the database was created. Consider using Code First Migrations to update the database`

你们有人有这个问题吗？如果是这样，我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T17:54:34.707

好吧，我原来的答案被删除了，猜是因为它不是一个真正的答案，而是我有同样问题的陈述。在这一点上，我找到了各种各样的答案，所以也许这个答案会通过。

当然，我只是假设我们遇到了同样的问题，但看起来很有可能，因为症状完全相同。我发现我的存储库的连接字符串没有正确设置，即使我使用 MyTestProject.dll.config 命名约定在配置文件中“正确”设置了它。似乎 NUnit 出于某种原因没有使用配置中的连接字符串。

我已经设置了一个临时解决方案，在其中我使用不同的构造函数，在为 NUnit 创建存储库时强制为我的存储库提供正确的连接字符串。很容易实现这一点，因为我使用 DI 创建存储库，并且只需要在测试时向工厂询问不同的风格。现在正在努力弄清楚为什么 NUnit 不使用配置文件，因为它看起来应该。

也许不是一个完整的答案，但至少这个解决方案让我回到了我可以测试的地方......我们会看看这个是否被删除。

# android - 使用com.android.internal.widget.NumberPicker时如何解决android.view.InflateException？

> ID：12882828
> 
> 赞同：0
> 
> 时间：2012-10-14T13:48:21.237
> 
> 标签：android, widget, customization, numberpicker

我正在使用[这个博客](http://devmobapps.blogspot.de/2011/09/numberpicker-use-and-customization-of.html)来创建一个自定义号码选择器。我已将此源项目添加到我的 Eclipse 中，但是当我在模拟器中运行此项目时，我在 LogCat 中收到此错误。

```
10-14 15:31:46.074: E/AndroidRuntime(878): java.lang.RuntimeException: Unable to start
activity ComponentInfo{maximyudin.NumberPickerDemo/maximyudin.NumberPickerDemo.NumberPickerDemo}: 
android.view.InflateException: Binary XML file line #5: Error inflating class com.android.internal.widget.NumberPicker 
```

这是我的 AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="maximyudin.NumberPickerDemo"
  android:versionCode="1"
  android:versionName="1.0">
  <uses-sdk android:targetSdkVersion="15" android:minSdkVersion="8"></uses-sdk>
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".NumberPickerDemo"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

</application> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T11:30:23.140

我发现了问题。`com.android.internal.widget.NumberPicker`在 Android 2.2 及更高版本中不支持。我尝试在 Android 2.2 中运行[此示例](http://devmobapps.blogspot.de/2011/09/numberpicker-use-and-customization-of.html)并导致我在问题中提到的错误。这是 main.xml 文件。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<com.android.internal.widget.NumberPicker
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:id="@+id/numTestNumberPicker"
    android:layout_centerInParent="true">
</com.android.internal.widget.NumberPicker> 
```

# android - 为什么我可以成功通过 Parcelable 但不能使用 putExtra、getStringExtra

> ID：12882833
> 
> 赞同：3
> 
> 时间：2012-10-14T13:49:17.817
> 
> 标签：android, android-intent

我试图将 AsyncTask 中的字符串传递给 AsyncTask.onPostExecute 中的新 Activity：

```
protected void onPostExecute(String response) {
    Intent displayResponse = new Intent(context, DisplayResponse.class);
    displayResponse.putExtra("package_name.DisplayResponse.response", response);
    displayResponse.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);        
    context.startActivity(displayResponse);
} 
```

在`context = (Context) this`启动 AsyncTask 并传入`context`构造函数的 MainActivity 中的位置。

在 DisplayResponse`getIntent().getStringExtra("package_name.DisplayResponse.response")`中总是`null`

如果我使用只有一个字符串的简单 Parcelable 并从

```
protected void onPostExecute(String response) {
    Intent displayResponse = new Intent(context, DisplayResponse.class);
    StringParcel sp = new StringParcel(response);
    displayResponse.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    Bundle bundle = new Bundle();
    bundle.putParcelable("response", sp);
    displayResponse.putExtra("package_name.DisplayResponse.response", bundle);
    context.startActivity(displayResponse);
} 
```

然后我可以在 DisplayResponse 中使用字符串：

```
Intent intent = getIntent();
Bundle extras = intent.getBundleExtra("package_name.DisplayResponse.response");
StringParcel sp = extras.getParcelable("response");
textView.setText(sp.parcelString); 
```

所以问题是为什么第一种方法使用`putExtra, getStringExtra`失败，而第二种方法使用 Parcelable 工作？

# facebook - FQL 查询的最大数量或结果

> ID：12882839
> 
> 赞同：1
> 
> 时间：2012-10-14T13:50:02.840
> 
> 标签：facebook, size, facebook-fql

单个 FQL 查询可以获得的最大结果数是否有限制（考虑仅从表中选择一个字段 - 例如：来自用户的 uid）？

例如：从条件具有 1M 大小的结果集的用户中选择 uid -> 其中有多少 1M 将返回给调用者？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-15T03:05:12.277

根据Facebook 在同一问题上发表的[一篇博客文章](https://developers.facebook.com/blog/post/478/)，在可见性检查开始进一步减少结果集之前，限制为 5000 个结果。

# objective-c - 改进计算代码

> ID：12882841
> 
> 赞同：1
> 
> 时间：2012-10-14T13:50:03.953
> 
> 标签：objective-c, ios, math

我正在制作一个转换器应用程序，在意识到我必须输入大约 200 行代码才能让它处理超过 5 个转换单位后，我应该有一个更好的转换计算。

我目前拥有的是一个 ifelse，它可以找出我从轮子中选择的单位，找出它应该回答什么的刺痛以及要计算的浮点数。它看起来像这样的自动取款机：

```
 #import "MainViewController.h"
@interface MainViewController ()

@end

@implementation MainViewController;

@synthesize _convertFrom, _convertTo, _convertRates;
@synthesize inputText, picker, resultLabel;
- (void)viewDidLoad
{
    [super viewDidLoad];
    {
        [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
        _convertFrom = @[@"MTPA", @"MMcf/day",
        @"Mill.Sm3/day", @"MMBTU", @"Boe/day"];

        _convertRates = @[ @1.0f, @2.0f, @3.0f,
        @4.0f, @5.0f];

        _convertTo = @[@"MTPA", @"MMcf/day",
        @"Mill.Sm3/day", @"MMBTU", @"Boe/day"];

    _convertRates = @[ @1.0f, @2.0f, @3.0f,
    @4.0f, @5.0f];
}
}
- (void)didReceiveMemoryWarning
{
 [super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
//dont forget to put something in here later
}

-(IBAction)textFieldReturn:(id)sender
{
    [sender resignFirstResponder];
}
-(IBAction)backgroundTouched:(id)sender
{
    [inputText resignFirstResponder];
}

#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:    (NSInteger)component
{
    if (component == 0)  {
        return [_convertFrom count];
    }
    return [_convertTo count];
}

- (NSString *) pickerView: (UIPickerView *)pickerView
          titleForRow:(NSInteger)row
         forComponent:(NSInteger)component
{
    if (component == 0) {
        return [_convertFrom objectAtIndex:row];
    }
    return [_convertTo objectAtIndex:row];
}

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{
    float convertFrom = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:0]] floatValue];
    float convertTo = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1]] floatValue];
    float input = [inputText.text floatValue];
float to = convertTo;
float from = convertFrom;
float convertValue = input;

float MTPATilMTPAFloat               = convertValue * 1;
float MTPATilMMScfdayFloat           = convertValue * 133.425;
float MTPATilMillSm3dayFloat         = convertValue * 3.779735;
float MTPATilMMBTUFloat              = convertValue * 4;
float MTPATilboedayFloat               = convertValue * 5;

float MMScfdayTilMTPAFloat           = convertValue * 0.5;
float MMScfdayTilMMScfdayFloat       = convertValue * 1;
float MMScfdayTilMillSm3dayFloat     = convertValue * 6;
float MMScfdayTilMMBTUFloat          = convertValue * 7;
float MMScfdayTilboedayFloat           = convertValue * 8;

float MillSm3dayTilMTPAFloat = convertValue / 1;
float MillSm3dayTilMMScfdayFloat = convertValue / 2;
float MillSm3dayTilMillSm3dayFloat = convertValue / 3;
float MillSm3dayTilMMBTUFloat = convertValue / 4;
float MillSm3dayTilboedayFloat = convertValue / 5;

float MMBTUTilMTPAFloat = convertValue * 2;
float MMBTUTilMMScfdayFloat = convertValue * 2;
float MMBTUTilMillSm3dayFloat = convertValue * 2;
float MMBTUTilMMBTUFloat = convertValue * 2;
float MMBTUTilboeday = convertValue * 2;

float boedayTilMTPAFloat = convertValue * 3;
float boedayTilMMScfdayFloat = convertValue * 3;
float boedayTilMillSm3dayFloat = convertValue * 3;
float boedayTilMMBTUFloat = convertValue * 3;
float boedayTilboeday = convertValue * 3;

NSString *MTPATilMTPA = [[NSString alloc ] initWithFormat:
                         @" %f MTPA = %f MTPA", convertValue, MTPATilMTPAFloat];

NSString *MTPATilMMScfday = [[NSString alloc ] initWithFormat:
                             @" %f MTPA = %f MMScf/day", convertValue, MTPATilMMScfdayFloat];

NSString *MTPATilMillSm3day = [[NSString alloc] initWithFormat:
                               @" %f MTPA = %f Mill.SM3/day", convertValue, MTPATilMillSm3dayFloat];

NSString *MTPATilMMBTU = [[NSString alloc] initWithFormat:
                          @" %f MTPA = %f MMBTU", convertValue, MTPATilMMBTUFloat];

NSString *MTPATilboeday = [[NSString alloc] initWithFormat:
                         @" %f MTPA = %f Boe/day", convertValue, MTPATilboedayFloat];

NSString *MMScfdayTilMTPA = [[NSString alloc] initWithFormat:
                             @" %f MMScfday = %f MTPA", convertValue, MMScfdayTilMTPAFloat];

NSString *MMScfdayTilMMScfday = [[NSString alloc] initWithFormat:
                                 @" %f MMScfday = %f MMScfday", convertValue, MMScfdayTilMMScfdayFloat];

NSString *MMScfdayTilMillSm3day = [[NSString alloc] initWithFormat:
                                   @" %f MMScfday = %f MillSm3day", convertValue, MMScfdayTilMillSm3dayFloat];

NSString *MMScfdayTilMMBTU = [[NSString alloc] initWithFormat:
                              @" %f MMScfday = %f MMBTU", convertValue, MMScfdayTilMMBTUFloat];

NSString *MMScfdayTilboeday = [[NSString alloc] initWithFormat:
                             @" %f MMScfday = %f Boe/day", convertValue, MMScfdayTilboedayFloat];

NSString *MillSm3dayTilMTPA = [[NSString alloc] initWithFormat:
                               @" %f MillSm3day = %f MTPA", convertValue, MillSm3dayTilMTPAFloat];

if (from == 1) {
    if (to == 1) {
        resultLabel.text = MTPATilMTPA;
    }
    else if (to == 2) {
        resultLabel.text = MTPATilMMScfday;
    }
    else if (to == 3) {
        resultLabel.text = MTPATilMillSm3day;
    }
    else if (to == 4) {
        resultLabel.text = MTPATilMMBTU;
    }
    else if (to == 5) {
        resultLabel.text = MTPATilboeday;
    }
}
else if (from == 2) {
    if (to == 1) {
        resultLabel.text = MMScfdayTilMTPA;
    }
    else if (to == 2) {
        resultLabel.text = MMScfdayTilMMScfday;
    }
    else if (to == 3) {
        resultLabel.text = MMScfdayTilMillSm3day;
    }
    else if (to == 4) {
        resultLabel.text = MMScfdayTilMMBTU;
    }
    else if (to == 5) { 
        resultLabel.text = MMScfdayTilboeday;
    }
}
} 
```

如您所见，如果我想要更多单元，则需要大量代码。

当我意识到这一点时，我尝试使用一个常用变量来计算它，我将所有内容都转换为该变量，然后再转换回输出单元。用长度计算来考虑它。我希望首先将所有内容转换为的公共变量是米。所以 1 米 = 1、1 厘米 = 0.01 和 1 毫米 = 0.001。所以，如果我想计算，我会使用。

unitIwantToConvertToComparedTo1Meter = 0.5（1 米）结果 = 从 * 到 * 输入 * unitIwantToConvertToComparedTo1Meter。

令人惊讶的是，这很有效。在这里使用：

```
#import "MainViewController.h"
@interface MainViewController ()

@end

@implementation MainViewController;

@synthesize _convertFrom, _convertTo, _convertRates;
@synthesize inputText, picker, resultLabel;
- (void)viewDidLoad
{
    [super viewDidLoad];
    {
        [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
        _convertFrom = @[@"Kubikk M", @"Kubikk CM",
        @"Kubikk MM", @"MMBTU", @"Boe/day"];

        _convertRates = @[ @1.0f, @0.01f, @0.001f,
        @4.0f, @5.0f];

    _convertTo = @[@"Kubikk M", @"Kubikk CM",
    @"Kubikk MM", @"MMBTU", @"Boe/day"];

    _convertRates = @[ @1.0f, @0.01f, @0.001f,
    @4.0f, @5.0f];
}
}
- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
//dont forget to put something in here later
}

    -(IBAction)textFieldReturn:(id)sender
    {
    [sender resignFirstResponder];
}
-(IBAction)backgroundTouched:(id)sender
{
    [inputText resignFirstResponder];
}

#pragma mark -
#pragma mark PickerView DataSource

- (NSInteger)numberOfComponentsInPickerView:
(UIPickerView *)pickerView
{
    return 2;
}

- (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component
{
if (component == 0)  {
    return [_convertFrom count];
}
return [_convertTo count];
}

- (NSString *) pickerView: (UIPickerView *)pickerView
          titleForRow:(NSInteger)row
         forComponent:(NSInteger)component
{
    if (component == 0) {
        return [_convertFrom objectAtIndex:row];
    }
    return [_convertTo objectAtIndex:row];
}

#pragma mark -
#pragma mark PickerView Delegate
-(void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row
  inComponent:(NSInteger)component
{
    float convertFrom = [[_convertRates objectAtIndex:[pickerView   selectedRowInComponent:0]] floatValue];
float convertTo = [[_convertRates objectAtIndex:[pickerView selectedRowInComponent:1]] floatValue];
float input = [inputText.text floatValue];
float to = convertTo;
float from = convertFrom;
float convertValue = input;

float kubikkfot = 0.1;

float result = from * convertValue * kubikkfot;

NSString *resultString = [[NSString alloc ] initWithFormat:
                         @" %f MTPA = %f MTPA", convertValue, result];
resultLabel.text = resultString;
} 
```

这个问题是 1\. 我的大脑正在崩溃，试图弄清楚如何 2\. 我想为每个答案都有一个自定义标签，上面写着我转换的单位。我该如何实施？

那么，任何人都可以帮我提供一些更好的计算代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:56:54.237

Dude 使用 C 数组创建一个 nxn 转换矩阵。然后只有一个带有单位名称的数组。做完了。如果您不知道矩阵是什么，那么您需要学习更多的理论。

它是这样的。C 是您的转换矩阵：

```
 inch      meter
      +-----------------
inch  | 1        0.0254
meter | 39.3701  1 
```

因此，如果`x`以英寸为单位，则以`C[inch][meter] * x`米为单位的长度相同。

和`C[i][j] * C[j][i] == 1`。总是。

对于要测量的每个数量，您将有一个不同的转换矩阵。也就是说，你会有一个热量，一个时间，一个距离（上面的例子），一个能量，一个力量......等等。祝你好运！

# php - 如何处理 MySQL 中的动态列

> ID：12882846
> 
> 赞同：1
> 
> 时间：2012-10-14T13:50:22.127
> 
> 标签：php, mysql, cakephp

我有一个网站，其中有不同类型的产品，每种产品都有不同的规格。

我希望能够只使用一个带有一组列的产品表，但由于列因类型而异，我必须为每种类型创建多个产品表。我认为这是一种耗时且不是真正有效的方式来管理作为一个持续的解决方案。

有没有一种用数据库管理这种类型场景的好方法？

我使用 Cakephp 作为框架。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:55:33.133

规范您的数据结构：例如，有一个包含列的`product_info`表（将 FK 放入表中）并表达有关每个产品的附加信息。`products``key``value`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T15:45:48.473

Martin Fowler 列出了三种通用方法。

*   [单表](http://martinfowler.com/eaaCatalog/singleTableInheritance.html)- 将所有列放在一个表中并仅使用您需要的列（这听起来最接近您所拥有的）
*   [类表](http://martinfowler.com/eaaCatalog/classTableInheritance.html)- 所有类都有自己的表存储特定于该类的数据（每个相关表中具有相同的主键）
*   [具体表](http://martinfowler.com/eaaCatalog/concreteTableInheritance.html)- 与上面相同，但只有具体类有表，而不是抽象类。

单表是最简单的，除非您有充分的理由不这样做 - 只需将所有可能的字段放在那里，并且只使用每个类中需要的字段。您确实有无法强制执行 NOT NULL 的缺点；如果这很重要，要么根据对象的类型进行自定义约束，要么使用选项 2 或 3。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T15:46:05.040

不久前我写过关于使用 EAV 模型和蛋糕的文章，我认为这篇文章可能会有所帮助，但有点过时了。 [http://nuts-and-bolts-of-cakephp.com/2010/07/27/keyvalue-tables-and-how-to-use-them-in-cakephp-1-3/](http://nuts-and-bolts-of-cakephp.com/2010/07/27/keyvalue-tables-and-how-to-use-them-in-cakephp-1-3/)

此外，这可能对您的特定问题非常有帮助......请查看并研究[Magento](http://www.magentocommerce.com/)（一个非常流行的基于 PHP 的电子商务框架）中的一些概念，它大量使用 EAV 模式，并且在索引和扁平化方面做得很好数据。

您当然可以获得很多关于 EAV 实施的有趣观点。不管你喜不喜欢是另一回事:)

# signalr - signalR 组 - 连接/断开和发送 - 我错过了什么吗？

> ID：12882852
> 
> 赞同：0
> 
> 时间：2012-10-14T13:50:46.213
> 
> 标签：signalr

对signalR来说非​​常新，并且已经推出了一个非常简单的应用程序，可以在会议上接受问题进行审核（感觉就像一个直接的用例）

我目前有 2 个中心： - 问题（用于提问） - 演讲者（这些应该接收问题并允许审核，但稍后会出现）

解决方案位于[https://github.com/terrybrown/InterASK](https://github.com/terrybrown/InterASK)

观看视频后（由 David Fowler/Damian Edwards 提供）(http://channel9.msdn.com/Shows/Web+Camps+TV/Damian-Edwards-and-David-Fowler-Demonstrate-SignalR)

还有一个我找不到 atm 的 URL，我想我会使用“组”作为概念，以保持消息流向正确的人。

正如我在其中一个视频中看到的那样，我实现了 IConnected、IDisconnect，并且在调试时我可以看到 Connect 触发（并且在重新加载时我可以看到断开连接触发），但我似乎没有做任何事情将一个人添加到一个组中。

signalR 文档建议“组不会保留在服务器上，因此应用程序负责跟踪哪些组中的连接，以便可以实现组计数之类的事情”我想这告诉我我需要保留一些方法（静态或其他？）跟踪谁在一个组中？

当然，我目前似乎无法发送到群组，尽管我可以毫无问题地分发给当前连接到应用程序并实现相同 JS 方法的任何人（同一页面上的 2 台机器）。

我怀疑我只是遗漏了一些东西——我在这里阅读了其他一些问题，但似乎没有一个提到 IConnected/IDisconnect，这告诉我这些要么是新的（而且没有人在使用它们），要么它们是旧的（并且没有人使用它们）。

我知道这可能被认为是一个主观问题，尽管我正在寻找的只是一种管理组的简单方法，以便我可以做我想做的事 - 从一个中心发送问题，让人们连接到不同的中心集线器接收它 - 团体认为这是最干净的解决方案？

非常感谢各位。特里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:33:52.033

正如您似乎理解的那样，应用程序编写者负责在网络断开/重新连接之间维护逻辑连接（如果您愿意，用户）所在的组。如果您查看[JabbR](https://github.com/davidfowl/JabbR)执行此操作的方式，它会在其数据库中维护用户所在“房间”的状态。重新连接后，用户的身份有助于将当前连接放回代表特定“房间”的正确组中。

# javascript - javascript替换div中的内容

> ID：12882855
> 
> 赞同：5
> 
> 时间：2012-10-14T13:50:59.467
> 
> 标签：javascript, getelementbyid

我有一个 ajax 脚本，它使用从服务器返回的搜索结果填充页面上的 div。每个搜索结果都有一个带有第二个 javascript 函数的超链接，该函数在页面上设置隐藏的输入值以发回服务器，具体取决于用户单击的结果。所有这些工作正常。

但是，在第二个 javascript 函数中，我还想将原始 div 的内容设置为所选值，但我无法让它工作。

起始页上的 html

```
<input type="text" onkeyup="getResults(this.value)"><div id="results"></div>
<input type="hidden" name="result" value="<div id='chosenresult'></div>"> 
```

ajax 返回的标记：

```
<a href="javascript:void(0);" onclick ="setResult(1)">Result1</a><br>
<a href="javascript:void(0);" onclick ="setResult(2)">Result2</a><br> 
```

用于 setResult 的 Javascript

```
function setResult(varname) {
document.getElementById('chosenresult').value = varname; //WORKS FINE
document.getElementById('results').value = varname; //DOES NOT WORK
document.getElementById('results').innerHTML = varname; //ALTERNATIVE ALSO DOES NOT WORK
return false;
} 
```

换句话说，我可以在隐藏的输入字段中设置值，但不能替换“结果” div 的内容。

感谢您的任何建议！

编辑：

我发现了错误。将 div 放入隐藏输入选项卡的值中可以作为设置值的黑客手段，但这是不必要的，并且似乎破坏了代码，因此未设置结果 div。代替 div，只需为隐藏的输入选项卡提供一个 id 并在 javascript 中设置其值，如下所示：

html

```
<div id="results"></div>
<input type="hidden" name = "result" id="chosenresult"> 
```

javascript

```
document.getElementById('chosenresult').value = varname; //WORKS FINE
document.getElementById('results').innerHTML = varname; //NOW WORKS 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:05:44.620

首先 - 正如@Muthu Kumaran 告诉你的那样，请不要使用“var”作为标识符。

第二 - 为什么输入值中有一个 div ？

```
<input type="hidden" name="result" value="<div id='chosenresult'></div>" 
```

如果你有这个标记：

```
<input type="text" onkeyup="getResults(this.value)">
<div id="results"></div>
<input type="hidden" name="result" value="<div id='chosenresult'></div>"> 
```

您正在创建一个没有 id 的输入。然后**在同一级别**创建一个名为“results”的 div，然后创建另一个未命名的输入，其值比看起来像 HTML 标记。

所以当你这样做时

```
document.getElementById('chosenresult').value = var; 
```

您没有 ID 为“chosenresult”的元素，它必须崩溃，因此不会执行此函数上的其他行。无论如何，让我们阅读它们：

```
document.getElementById('results').value = var; 
```

div 没有称为“值”的属性，请改用 innerHTML

```
document.getElementById('results').innerHTML = var; 
```

这必须有效，但它会修改两个输入之间的 div 的 innerHTML，而不是输入的值

因此，如果您尝试修改输入值，则必须为输入本身命名：

```
<input id="results" type="text" onkeyup="getResults(this.value)">
<input id="chosenresult" type="hidden" name="result" value=""> 
```

然后修改它的“值”属性：

```
document.getElementById('chosenresult').value = var;
document.getElementById('results').value = var; 
```

# c++ - 给定一个包含 N 个数字的数组，找出范围为 R 的所有长度的序列的个数？

> ID：12882856
> 
> 赞同：1
> 
> 时间：2012-10-14T13:51:11.640
> 
> 标签：c++, algorithm

这是给定 N 个数字的序列的后续问题[，提取长度为 K 且范围小于 R 的序列的数量？](https://stackoverflow.com/questions/12882511/given-a-sequence-of-n-numbers-extract-number-of-sequences-of-length-k-having-ra#comment17442800_12882511)

我基本上需要一个向量 v 作为大小 N 的答案，这样 V[i] 表示长度为 i 且范围 <=R 的序列数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:46:52.443

传统上，在递归解决方案中，您将计算 K = 0、K = 1 的解决方案，然后在后续元素之间找到某种递归关系，以避免每次都从头开始重新计算解决方案。

然而在这里我相信也许从另一边攻击这个问题会很有趣，因为传播的属性：

> 给定一个扩展序列 R（或更少），任何子序列的扩展也低于 R

因此，我将首先建立一个从每个索引开始的散布 R 的最长子序列的列表。让我们称这个 list `M`，并知道`M[i] = j`where （原始序列）中`j`较高的索引where 。这将是 O(N)。`S``S[j] - S[i] <= R`

现在，对于任何`i`，长度`K`从`i`或开始的序列数，这取决于是否大于`0`或不大于。一个简单的线性传递（从到）给了我们答案。这又是 O(N)。`1``K``M[i] - i``M``0``N-K`

因此，如果我们调用`V`结果向量，`V[k]`表示长度为`K`in`S`且扩展低于的子序列的数量`R`，那么我们可以在 M 上的单次迭代中完成：

```
for i in [0, len(M)]:
    for k in [0, M[i] - i]:
        ++V[k] 
```

该算法很简单，但是更新的数量可能相当令人生畏。在最坏的情况下，假设`M[i] - i`等于`N - i`，它是 O(N*N) 复杂度。您将需要一个更好的数据结构（可能是 Fenwick 树的改编版）来使用该算法以降低计算这些数字的成本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:18:22.233

如果您正在寻找连续序列，请尝试递归执行：范围小于 R 的 K 长度子序列集包含在 (K-1) 长度子序列集中。

在 K=0 时，您有 N 个解。每次增加 K 时，附加（resp. prepend）下一个（resp.previous）元素，检查它的范围是否低于 R，然后将其存储在一个集合中（查找重复项！）或丢弃它取决于结果。

如果认为该算法的复杂度在最坏情况下为 O(n*n)，但平均而言可能会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-14T14:46:49.280

从一个更简单的问题开始：计算序列的最大长度，从每个索引开始，范围等于 R。

为此，让 first 指针指向数组的第一个元素。增加第二个指针（也从数组的第一个元素开始），而指针之间的序列具有小于或等于 R 的范围。将由第二个指针传递的每个数组元素推送到 min-max-queue，由一对mix-max-stacks，在[这个答案](https://stackoverflow.com/a/7134189/1009831)中描述。当 min-max-queue 报告的最大值和最小值之间的差异超过 R 时，停止增加第二个指针，递增`V[ptr2-ptr1]`，递增第一个指针（从 min-max-queue 中删除它所指向的元素），并继续增加第二个指针（控制范围）。

当第二个指针离开数组的边界时，`V[N-ptr1]`为所有剩余的 ptr1 递增（相应的范围可能小于或等于 R）。要添加小于 R 的所有其他范围，请计算数组 V[] 的累积和，从其末尾开始。

时间和空间复杂度都是 O(N)。

伪代码：

```
p1 = p2 = 0;
do {
  do {
    min_max_queue.push(a[p2]);
    ++p2;
  } while (p2 < N && min_max_queue.range() <= R);

  if (p2 < N) {
    ++v[p2 - p1 - 1];
    min_max_queue.pop();
    ++p1;
  }
} while (p2 < N);

for (i = 1; i <= N-p1; ++i) {
  ++v[i];
}

sum = 0;
for (j = N; j > 0; --j) {
  value = v[j];
  v[j] += sum;
  sum += value;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T16:56:53.953

我认为在寻找所有具有扩展 R 的序列时，Matthieu 有正确的答案。

由于您只是在寻找长度为 K 的序列，因此您可以做得更好。与其查看从 i 开始的最大序列，不如查看从 i 开始的长度为 K 的序列，看看它是否具有范围 R。对每个 i 执行此操作，您将拥有所有长度为 K 且扩展为 R 的序列。

您不需要浏览整个列表，因为长度为 K 的序列的最新起点是 n-K+1。所以复杂度类似于 (n-K+1)*K = n*K - K*K + K。对于 K=1，这是 n，对于 K=n，它是 n。对于 K=n/2，它是 n*n/2 - n*n/4 + n/2 = n*n/2 + n/2，我认为这是最大值。所以虽然这仍然是 O(n*n)，但对于大多数 K 值，你会变得更好一些。

# c++ - 获取应用程序 Windows 的完整目录

> ID：12882858
> 
> 赞同：1
> 
> 时间：2012-10-14T13:51:27.800
> 
> 标签：c++, file, path

> **可能重复：**
> [获取可执行文件的路径](https://stackoverflow.com/questions/1528298/get-path-of-executable)

我有一个 C++ 应用程序，如何获取我的完整目录（此应用程序的 .exe 文件所在的位置）？

编辑：操作系统 - Windows

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T13:55:32.683

视窗：

```
WCHAR path[MAX_PATH];
GetModuleFileName(NULL, path, ARRAYSIZE(path)); 
```

Linux：

```
char buffer[MAX_PATH];
readlink("/proc/self/exe", buffer, MAX_PATH); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T13:56:32.353

对此没有好的跨平台解决方案，但是，您可以在所有主要平台上执行此操作：

*   在 Linux 上：读取`/proc/self/exe`特殊文件

* * *

```
char buf[PATH_MAX];
ssize_t len;
if ((len = readlink("/proc/self/exe", buf, bufsize)) != -1) {
    // buf contains the path
} else {
    // error
} 
```

*   在 Mac OS X 上：使用`_NSGetExecutablePath()`函数（来自`man 3 dyld`）

* * *

```
#include <stdint.h>
#include <limits.h>

uint32_t size = PATH_MAX;
char buf[PATH_MAX];
if (_NSGetExecutablePath(buf, &size) != -1) {
    // buf now contains the path
} else {
    // error
} 
```

*   在 Windows 上：调用`GetModuleFileName()`with`NULL`作为句柄。

* * *

```
#include <windows.h>

char buffer[1024];
if (GetModuleFileName(NULL, buffer, sizeof(buffer)) != 0) {
    // buffer contains the path
} else {
    // error
} 
```

# git - 获取特定版本的 ffmpeg 源代码

> ID：12882859
> 
> 赞同：0
> 
> 时间：2012-10-14T13:51:36.620
> 
> 标签：git, ffmpeg, revision

我知道如何使用 SVN，但他们已经转移到 Git。

如其网站所述，获取最新版本的命令是

```
git clone git://source.ffmpeg.org/ffmpeg.git ffmpeg 
```

获得特定修订的适当论据是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T13:52:35.717

在克隆的存储库中运行：

```
git checkout <hash> 
```

要返回主分支运行：

```
git checkout master 
```

要查找特定的哈希，您可以使用：

```
git log 
```

或[在线浏览 FFmpeg 提交](http://git.videolan.org/?p=ffmpeg.git)。

# database - Django 无法连接到 Opensuse 上的 Postgresql

> ID：12882868
> 
> 赞同：0
> 
> 时间：2012-10-14T13:54:05.163
> 
> 标签：database, django, linux, postgresql, opensuse

我已经像在另一个发行版中一样配置了所有内容（我是一个 Arch 用户，我在台式机上安装了 opensuse）。

作为 ：

*   Django 及其所有要求 (psycopg)
*   PostgreSQL
*   为我的 django 服务器创建了一个用户
*   创建了一个数据库
*   为我的新用户授予数据库的所有权限

然后，当启动 syncdb 开始工作时，我收到此消息（我已经更改了用户等。在此线程中为用户：问题、密码：密码、数据库：问题，因为它实际上是换句话说）：

```
FATAL:  Ident authentication failed for user "question" 
```

潜伏后，我有了改变我的 pg_hba.conf 文件的想法（位于：/var/lib/pgsql/data/pg_hba.conf）

这就是我所拥有的：

```
# TYPE  DATABASE        USER            ADDRESS                 METHOD

# "local" is for Unix domain socket connections only
local   all             all                                     trust
# IPv4 local connections:
host    all             all             127.0.0.1/32            ident
# IPv6 local connections:
host    all             all             ::1/128                 ident 
```

我的 django conf 文件包含：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.postgresql_psycopg2',
        'NAME': 'question',
        'USER': 'question',
        'PASSWORD': 'password',
        'HOST': '127.0.0.1',
        'PORT': '',
    }
} 
```

我不明白我在这里错过了什么，有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:00:17.910

编辑`/var/lib/pgsql/data/pg_hba.conf`文件并将方法从 更改`trust`为`md5`。这样 Postgres 会要求输入密码。

还记得重新加载配置文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:05:33.700

您是否尝试过更改：

```
host    all             all             127.0.0.1/32            ident 
```

至：

```
host    all             all             127.0.0.1/32            md5 
```

看来您正在通过 TCP 连接（因此 pg_hba.confg 中带有“信任”的第一行不适用）并通过[ident](http://www.postgresql.org/docs/8.1/static/auth-methods.html)进行身份验证，这需要 pg_ident.conf 中的条目。您可能需要“md5”或其他基于密码的身份验证选项之一。

# javascript - 通过点击图像（jquery 或 javascript）动态生成地图区域坐标

> ID：12882869
> 
> 赞同：5
> 
> 时间：2012-10-14T13:54:05.883
> 
> 标签：javascript, jquery, image, map, coordinates

我想知道是否有一种方法可以通过单击图像的某些部分来动态生成地图区域坐标。这是为了生成完整的图像映射。

例如，我有这张图片：

[点击这里查看图片...](http://mauricio.lairet.es/_otr/plano.jpg)

通过单击它，我想为每个定义的区域生成坐标，输出如下内容：

```
<input type="text" name="36" value="25,11,25,117,47,117,46,29,83,31,84,8" />
<input type="text" name="37" value="83,12,103,32" /> 
```

ETC...

然后我会将其保存在数据库中以供以后使用和处理。

我想做一些类似于这个网站所做的事情，但更简单。我只需要在绘图时保持显示线条的功能，以便用户查看他在做什么，当然，检索坐标。

[在线图像地图编辑器](http://www.maschek.hu/imagemap/imgmap)

是否有任何 jquery 插件已经完成这项工作，或者我如何通过使用 jquery 或 javascript 来完成这项工作。

提前谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T13:56:49.120

查看 ImageMapster jQuery 插件： [http ://www.outsharked.com/imagemapster/default.aspx?demos.html](http://www.outsharked.com/imagemapster/default.aspx?demos.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-27T10:58:15.573

我们有同样的要求。我们最终使用了这个 jQuery 插件： http: [//odyniec.net/projects/imgareaselect/](http://odyniec.net/projects/imgareaselect/)

希望能帮助到你。

# java - 通过 jdbctemplate 在表中插入记录时如何获取自动递增的 id

> ID：12882874
> 
> 赞同：15
> 
> 时间：2012-10-14T13:54:55.057
> 
> 标签：java, mysql, spring-mvc, jdbctemplate

```
private void insertIntoMyTable (Myclass m) {
    String query = "INSERT INTO MYTABLE (NAME) VALUES (?)";
    jdbcTemplate.update(query, m.getName());
} 
```

当上述查询插入一条记录时，`ID`表中的列会自动递增。

有没有办法在插入时取回这个自动递增的 ID。所以在这个例子中，我的方法的返回值是`int`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-14T14:01:40.210

检查[此参考。](http://static.springsource.org/spring/docs/2.5.x/reference/jdbc.html#jdbc-auto-genereted-keys)您可以将 jdbcTemplate.update 用作：

**编辑** 按要求添加了导入

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.SQLException;

import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.PreparedStatementCreator;
import org.springframework.jdbc.support.GeneratedKeyHolder;
import org.springframework.jdbc.support.KeyHolder; 
```

以下是代码用法：

```
final String INSERT_SQL = "insert into my_test (name) values(?)";
final String name = "Rob";
KeyHolder keyHolder = new GeneratedKeyHolder();
jdbcTemplate.update(
    new PreparedStatementCreator() {
        public PreparedStatement createPreparedStatement(Connection connection) throws SQLException {
            PreparedStatement ps =
                connection.prepareStatement(INSERT_SQL, new String[] {"id"});
            ps.setString(1, name);
            return ps;
        }
    },
    keyHolder);
// keyHolder.getKey() now contains the generated key 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-04T13:00:01.420

插入后，我得到由数据库（MSSQL）生成的 id，如下所示，导入：

```
 import org.springframework.jdbc.core.BeanPropertyRowMapper;
  import org.springframework.jdbc.core.JdbcTemplate;
  import org.springframework.jdbc.core.RowMapper;
  import org.springframework.jdbc.core.SqlParameter;
  import org.springframework.jdbc.core.SqlReturnResultSet;
  import org.springframework.jdbc.core.simple.SimpleJdbcCall; 
```

和代码片段：

```
 final String INSERT_SQL = "INSERT INTO [table]\n"
            + " ([column_1]\n"
            + " ,[column_2])\n"
            + " VALUES\n" +
            " (?, ?)";

    Connection connection = jdbcTemplate.getDataSource().getConnection();
    PreparedStatement preparedStatement = connection.prepareStatement(INSERT_INVOICE_SQL, Statement.RETURN_GENERATED_KEYS);
    preparedStatement.setString(1, "test 1");
    preparedStatement.setString(2, "test 2");

    preparedStatement.executeUpdate();
    ResultSet keys = preparedStatement.getGeneratedKeys();

    if (keys.next()) {
        Integer generatedId = keys.getInt(1); //id returned after insert execution
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-15T14:31:56.813

JdbcTemplate 是 Spring 的核心。另一种选择是使用[SimpleJdbcInsert](https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/jdbc/core/simple/SimpleJdbcInsert.html)。

```
SimpleJdbcInsert simpleJdbcInsert = new SimpleJdbcInsert(jdbcTemplate);
simpleJdbcInsert
    .withTableName("TABLENAME")
    .usingGeneratedKeyColumns("ID");
SqlParameterSource params = new MapSqlParameterSource()
    .addValue("COL1", model.getCol1())
    .addValue("COL2", model.getCol2());
Number number = simpleJdbcInsert.executeAndReturnKey(params); 
```

你仍然可以@Autowire jdbcTemplate。对我来说，这比使用 jdbcTemplate.update() 方法和 KeyHolder 来获取实际 id 更方便。

示例代码片段已使用[Apache Derby](https://db.apache.org/derby/)进行了测试，并且应该适用于通常的数据库。

使用[Spring JPA](https://projects.spring.io/spring-data-jpa/)是另一种选择 - 如果 ORM 适合您。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-02-02T09:24:10.847

```
@Component
public class PersonDao {

    private final JdbcTemplate jdbcTemplate;

    @Autowired
    public PersonDao(JdbcTemplate jdbcTemplate) {
        this.jdbcTemplate = jdbcTemplate;
    }

    public List<Person> index() {
        return jdbcTemplate.query("SELECT * FROM person", new BeanPropertyRowMapper<>(Person.class));
    }

    public Person show(int id){
        return jdbcTemplate.query("SELECT * FROM person WHERE id=?", new Object[]{id}, new BeanPropertyRowMapper<>(Person.class))
                .stream().findAny().orElse(null);
    }

    public void save(Person person){
        jdbcTemplate.update("INSERT INTO person (name, age, email) VALUES (?, ?, ?)", person.getName(), person.getAge(), person.getEmail());
    }

    public void edit(Integer id, Person person) {
        jdbcTemplate.update("UPDATE person SET name = ?, age = ?, email = ? WHERE id = ?", person.getName(), person.getAge(), person.getEmail(), id);
    }

    public void delete(Integer id) {
        jdbcTemplate.update("DELETE FROM person WHERE id = ?", id);
    }
} 
```

# php - 来自外部服务器的 PHP 读取文件

> ID：12882878
> 
> 赞同：2
> 
> 时间：2012-10-14T13:55:16.337
> 
> 标签：php, external, readfile

我遇到了来自外部服务器的 readfile() 问题。下载的文件总是损坏，大小约为 3,4kb。它在本地主机上工作。

第一个：

```
$file_name = $_POST['myname'];
readfile("http://www.ftj.eu/.../3n.pdf");
header("Content-Disposition: attachment; filename=$file_name" .date("m-d-y") . ".pdf"); 
```

第二：

你知道为什么它甚至在本地主机上都不起作用吗？：

```
readfile("3n.pdf");
header("Content-Disposition: attachment; filename=$_POST['myname']" .date("m-d-y") . ".pdf"); 
```

解析错误：语法错误，意外的 T_ENCAPSED_AND_WHITESPACE，需要 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

请帮我。

**编辑：**

帮助我从外部 url 使 readfile 工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:00:22.917

您有语法错误，而不是`readfile()`@Will 已经提到的问题。

替换这个：

```
header("Content-Disposition: attachment; filename=$_POST['myname']" .date("m-d-y") . ".pdf"); 
```

有了这个（在 周围添加花括号`$_POST['myname']`）：

```
header("Content-Disposition: attachment; filename={$_POST['myname']}" .date("m-d-y") . ".pdf");
                                                  ^                ^ 
```

**编辑：**

至于`readfile()`来自外部 URL，这是 PHP 手册必须说的：

> 如果启用了[fopen 包装器](http://www.php.net/manual/en/filesystem.configuration.php#ini.allow-url-fopen)，则 URL 可以用作此函数的文件名。有关如何指定文件名的更多详细信息，请参阅[fopen() 。](http://www.php.net/manual/en/function.fopen.php)请参阅[支持的协议和包装](http://www.php.net/manual/en/wrappers.php)器以获取有关各种包装器具有哪些功能的信息的链接、有关其使用的说明以及有关它们可能提供的任何预定义变量的信息。

这意味着您必须[`allow_url_fopen`](http://php.net/allow-url-fopen)在您的服务器中启用，`php.ini`或者您可以使用 curl 将文件下载到您的服务器上，然后将其提供给您的客户端。

**使用 curl 的示例：**

```
<?php 
    $remote_file_url = 'http://www.ftj.eu/.../3n.pdf';
    $downloadedFileName = "your_pdf_file.pdf";

    $ch = curl_init();

    curl_setopt($ch, CURLOPT_URL, $remote_file_url);
    $downloadedFile = fopen($downloadedFileName, 'w+');
    curl_setopt($ch, CURLOPT_FILE, $downloadedFile);
    curl_exec ($ch);

    curl_close ($ch);
    fclose($downloadedFile);

    readfile($downloadedFileName);
    header("Content-Disposition: attachment; filename={$_POST['myname']}" .date("m-d-y") . ".pdf"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:22:00.213

可能您的服务器设置为不打开远程文件，因此您不能在其上使用 fopen、readfile 和类似命令，除非您更改其配置。

# matlab - 在 MATLAB 中为图像处理生成三次样条时出错 - “数据站点应该是不同的”

> ID：12882879
> 
> 赞同：1
> 
> 时间：2012-10-14T13:55:24.543
> 
> 标签：matlab, image-processing, spline, numerical-analysis

我正在用 MATLAB 开发一个图像处理程序。其中一部分涉及从输入图像中以固定间隔对一些点进行采样（这基本上是具有*1 像素宽边缘的**二进制线图*，类似于 Paint / GIMP / Photoshop 中的“铅笔”工具制作的那些），以及然后生成以采样像素为节点的三次样条曲线。

 *现在，我知道如何在给定一组点的情况下在 MATLAB 中生成三次样条`(x, y)`，但问题是：图像不是真正的*函数*（`x`比如`x`像素的行号），因为它可能有多个“值” " 在每个 x - 值是该行中所有黑色列的数量。因此，MATLAB 的`spline()`函数抱怨“数据站点应该是不同的”。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:03:38.113

我建议将您的函数转换为参数形式，然后在`x`和上执行两个样条曲线`y`：

```
 y = f(x) =>   

   y(t),x(t) 
```

在 Matlab 中，您可以通过以下方式进行操作：

```
 t=1:numel(x);
  xs = interp1(t,x, ti);
  ys = interp1(t,y, ti); 
```

您要插入的点在哪里`xi`以及是什么。`yi`

* * *

这是一个示例，其中每个数据具有多个`y`值`x`： ![在此处输入图像描述](../Images/dd3ea136d712dd8982975389ccabf342.png)

```
y = -10:10;
x = y.^2;
figure;plot(x,y,'rv');

t = 1:numel(x);
ti = 1:0.05:numel(x);
xi = interp1(t,x,ti );
yi = interp1(t,y,ti );

hold on ;plot(xi,yi); 
```*

# javascript - 如何使用 d3.js selection.text() 方法添加

> ID：12882885
> 
> 赞同：18
> 
> 时间：2012-10-14T13:55:50.513
> 
> 标签：javascript, d3.js

`selection.text('&nbsp;')`似乎转换了特殊字符，因此它呈现实际文本，而不是我想要的空格。有没有办法阻止`text()`选择的方法为我转义？对于上下文，这是一个表格单元格，对于选择中的某些元素是空的，我需要其中的空间，以便单元格正确呈现。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-14T15:26:43.440

使用 JavaScript Unicode 转义而不是 HTML 实体。`&nbsp;`在 HTML 中表示 Unicode 字符 U+00A0 所以

```
selection.text('\u00A0') 
```

应该做你想做的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-14T14:45:28.670

```
d3_selectionPrototype.text = function(value) {
    return arguments.length < 1 ? this.node().textContent : this.each(typeof value === "function" ? function() {
      var v = value.apply(this, arguments);
      this.textContent = v == null ? "" : v;
    } : value == null ? function() {
      this.textContent = "";
    } : function() {
      this.textContent = value;
    });
  }; 
```

这里重要的一行是在选择上调用 .text() 将在每个元素上设置 textContent 属性。所以在你的情况下正确的做法是使用

```
selection.text(' '); 
```

因此，如果您想使用空格，那么您只需在文本中使用空格，而不是 html 编码的空格。如果要使用 html 编码的字符，则必须将内容视为 innerHTML。

```
selection.html('&nbsp;'); 
```

# html - 为什么 css 文件中的背景图像的 url 在 chrome 中不起作用，但在 IE 和 firefox 中可以？

> ID：12882886
> 
> 赞同：1
> 
> 时间：2012-10-14T13:56:13.850
> 
> 标签：html, css, google-chrome

在css文件中：</p>

```
body {
    background-image: url('../image/body_bg.png');
    margin: 0 0 0 0;
    width: 500px;
    height: 300px;
} 
```

我确定 url 路径是正确的。

“body_bg.png”在 IE 和 firefox 浏览器中显示，但在 Chrome 中不显示。我的 chrome 版本是 22.0.1229.94

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:11:24.587

改变

```
background-image: url('../image/body_bg.png'); 
```

至

```
background-image: url('image/body_bg.png'); 
```

也许有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:11:47.047

尝试通过点击**右侧**Ctrl + Shift + Delete 来删除缓存，然后清除浏览数据。然后刷新页面。

# php - PHP Facebook API - 将消息与用户链接发布到墙上？

> ID：12882893
> 
> 赞同：0
> 
> 时间：2012-10-14T13:56:40.937
> 
> 标签：php, facebook, facebook-graph-api

我知道我不能通过 Facebook API 将消息发布到用户的墙上，其中包含从 Facebook 出去的链接。

但是我可以发布一条消息吗？Facebook 用户的链接在哪里？到目前为止，我还没有找到类似的东西，所以在这里试试我的运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T14:21:14.613

使用`/me/feed`端点您可以发布到用户的墙上，没有什么可以阻止它。

您将需要`publish_stream`许可。

```
if ($user) {
        $attachment = array(
            'message' => 'this is my message',
            'link' => 'http://www.facebook.com/profile.php?id=xxxx',

        );

        try {
            // Proceed knowing you have a user who is logged in and authenticated
            $result = $facebook->api('/me/feed/','post',$attachment);
        } catch (FacebookApiException $e) {
            error_log($e);
            $user = null;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:29:14.137

> 我知道我不能通过 Facebook API 将消息发布到用户的墙上，其中包含从 Facebook 出去的链接。

你当然可以，使用**feed api**

如果用户已授予您发布权限，您可以在他的墙上发布任何链接。

# c# - 在 C# 上运行 python 脚本不起作用

> ID：12882896
> 
> 赞同：1
> 
> 时间：2012-10-14T13:57:11.173
> 
> 标签：c#, python, cmd

我有这段代码，我正在尝试运行 Python 脚本。当我通过命令提示符手动执行此操作时，它可以正常工作，但如果我尝试通过在 C# Windows 窗体中单击按钮来执行此操作，则它不起作用。

```
private void btnGenerateAndrowarn_Click(object sender, EventArgs e) {
  string[] filePaths = Directory.GetFiles(@"C:\Users\User1\Desktop\Android Tools\androwarn\Samples", "*.apk");
  foreach (string fileName in filePaths) {
    ProcessStartInfo startInfo;
    Process process;
    string directory = @"C:\Users\User1\Desktop\Android Tools\androwarn\";
    string script = "androwarn.py";
    startInfo = new ProcessStartInfo("python");
    startInfo.WorkingDirectory = directory;
    startInfo.Arguments = directory + script + " -i " + fileName + " -r html -v 3";
    startInfo.UseShellExecute = false;
    startInfo.CreateNoWindow = true;
    startInfo.RedirectStandardOutput = true;
    startInfo.RedirectStandardError = true;
    process = new Process();
    process.StartInfo = startInfo;
    process.Start();
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:02:16.053

这很可能`python`不在您的 %PATH% 中。

# javascript - 如何确定 YouTube 视频何时停止加载

> ID：12882897
> 
> 赞同：0
> 
> 时间：2012-10-14T13:57:19.200
> 
> 标签：javascript, jquery, google-chrome-extension

我正在构建 Chrome 扩展程序。我需要在 YouTube 视频停止加载时停止扩展程序，并在视频恢复播放时继续 - 使用*JavaScript*或*jQuery*。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:35:47.670

使用此处描述的 onStateChange 事件侦听器：

[https://developers.google.com/youtube/js_api_reference#Adding_event_listener](https://developers.google.com/youtube/js_api_reference#Adding_event_listener)

听状态 3 和 1 是我认为你所追求的。

# android - 使用透明背景色

> ID：12882899
> 
> 赞同：0
> 
> 时间：2012-10-14T13:57:27.023
> 
> 标签：android, background-color

我使用以下颜色

```
<color name="bg_color">#70236790</color> 
```

如您所见，它设置了 alpha 值。

如果颜色应用于使用主题灯的布局，则它正在工作。如果我不在清单中添加主题值，颜色会变得很暗。我认为原因是我的 relativeLayout 背后是另一个黑色的视图（由主题引起）。

我设置的布局中的所有其他视图

```
 android:background="@android:color/transparent" 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:01:06.757

在清单文件中设置活动主题以将活动的背景设置为透明。.

```
 android:theme="@android:style/Theme.Translucent" 
```

# android - 通过 USB 传输鼠标位置

> ID：12882901
> 
> 赞同：2
> 
> 时间：2012-10-14T13:57:35.453
> 
> 标签：android, position, touchscreen, mouse-cursor

我有一台带有 elo 触摸屏的 nec 电视。我需要通过触摸电视来控制安卓设备。android通过hdmi连接到电视，触摸屏通过usb发送输入。问题是 elo touch 没有适用于 android 的驱动程序，技术支持人员告诉我这将在明年夏天推出。有可能有一台 linux/windows pc 从电视（被视为隐藏设备）获取输入并使用公对公 USB 电缆将它们发送到 android 设备？电脑应该被视为来自 android 设备的鼠标（它上面有 4.04 android）。

这可能吗？

# android - 计算圆弧中心点，知道它的起点和终点度数

> ID：12882903
> 
> 赞同：5
> 
> 时间：2012-10-14T13:57:45.300
> 
> 标签：android, canvas, geometry

![帆布](../Images/14ccddea9bd8ec5b87dace10384597ba.png)

这个答案的最快描述是我试图找到白点的坐标。深红色是绘制圆（深蓝色）上绘制的弧线。

更长的解释：我有一个正在扩展的类，它`View`正在画布上画一个圆圈（画布的宽度和高度相等）：

```
canvas.drawArc(rectF, 0, 360, true, paint); // mOvals is a RectF object with 4 coordinates 
```

然后我画一个宽度为 N% 的弧（在这种情况下假设为 225）。弧线从 -90 度开始（因为画布中的 0 度意味着 3 点钟）和“偏离”N 度（本例中为 225 度）。

我正在尝试计算 X/Y 坐标或剩余弧的中心（红色弧未覆盖的区域；即 N 和 360 之间）。

如果有帮助的话，我的圆的半径是 canvasWidth/2。

这是我绘制红色弧线的方法：

```
long arcEnd = (360 * fractionNumber) / totalNumber;
canvas.drawArc(rectF, -90, arcEnd, true, paint); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-14T14:38:54.687

（原始答案已更新。现在可能有点过于冗长，但我希望它有所帮助。）

您正在寻找 XY 坐标（称为笛卡尔坐标），但这些坐标很难直接计算。诀窍是先通过极坐标。Polar 和 Cartesian 是表示同一事物的两种方式，即网格中的一个点，可以相互转换。

极坐标由距中心点的角度和距离组成。您可以计算所需的角度，因为您知道需要覆盖的圆的百分比，并且您可以计算到中心的距离，因为您知道圆的半径。

你的覆盖弧是 225 度，所以余数是 135，一半是 67.5 度。因此，您要查找的点的角度为 225+67.5 = **292.5 度**。该点的半径是圆半径的一半，所以`canvasWidth/4`.

一旦确定了极坐标，就可以使用[转换函数](http://en.wikipedia.org/wiki/Polar_coordinates#Converting_between_polar_and_Cartesian_coordinates)`(292.5, canvasWidth/4)`将其转换为 XY 坐标。有一件事有点棘手：并期望他们的论点是[弧度](http://en.wikipedia.org/wiki/Radian)，而不是度数。在进行转换之前，您将 292.5/360 表示为 x/2π，通过将值乘以 π/180 来实现，在这种情况下得到 5.1051。`Math.cos(double)``Math.sin(double)`

假设`canvasWidth`是 400：

```
double tdeg 292.5d; // Calculated from arc percentage 
int r =  100;      // Calculated from canvas width

double trad = tdeg * (Math.PI/180d); // = 5.1051

int x = (int) r * Math.cos(trad);
int y = (int) r * Math.sin(trad); 
```

# c# - 正则表达式在特定标签后删除 CR/换行符

> ID：12882904
> 
> 赞同：0
> 
> 时间：2012-10-14T13:58:01.540
> 
> 标签：c#, regex

我有以下输入，并希望删除正则表达式与段落标记匹配后出现的每个 /newline。输入：

```
<head> \n
<P class="someclass"> \n  (I will remove onle these ones)
Need to get this line.. \ 
```

输出：

```
<head> \n
<P class="someclass">Need to get this line.. \n 
```

所以我想要做的是删除匹配 /n 并删除换行符。我怎么能那样做？

或者，我如何捕获 /n 之后的行，因为这是我需要阅读的行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:17:59.347

我想你的意思`/n`是换行符`\n`？

使用以下正则表达式/代码，它也将`\r`和`\r\n`视为新行：

```
using System.Text.RegularExpressions;

string result = Regex.Replace(
    value, 
    @"(\<p[^\>]+\>)(\r|\n)+", 
    "$1", 
    RegexOptions.IgnoreCase); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:12:39.370

试试这个：

```
var result = System.Text.RegularExpressions.Regex.Replace(input, "<[p|P](.*)> /n", "<p$1>") 
```

# java - 在命令行上写一个无限循环

> ID：12882907
> 
> 赞同：0
> 
> 时间：2012-10-14T13:58:25.987
> 
> 标签：java

请帮我做一个无限循环：在案例显示答案后，程序应该立即再次询问用户。

```
package calendartool;

import java.io.Console;

public class CalendarTool {

    public static void main(String[] args) {

        Console C = System.console();
        int month = Integer.parseInt(C.readLine("Please put a valid month: \n"));
        int year = Integer.parseInt(C.readLine("Please put a valid year: \n"));

            switch (month) {
                case 1:
                    System.out.println("The month is January!");
                    System.out.println("January has 31 days!");
                    break;

            }

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:02:21.823

我更喜欢，但这是一个品味问题...

```
while(true){
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T14:01:34.040

无限循环：

```
while(true) {
    //Your code here
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-14T14:03:33.810

我一直偏爱：

```
for(;;)
{
    //Do stuff
} 
```

如果只是因为它打字更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T14:43:20.593

使用 do-while 循环询问用户是否要继续。

br 是 bufferredreader 实例变量。

```
 char ch=(char)br.read();
 do
 {
System.out.println("press 1 for month jan");
System.out.println("do you want to continue(Y/N)");

}
while(ch=='Y'||ch=='Y'); 
```

# c# - WebClient DownloadFile 路径中有非法字符

> ID：12882909
> 
> 赞同：4
> 
> 时间：2012-10-14T13:58:38.547
> 
> 标签：c#, image, csv

我是新手，所以我敢肯定这是我所缺少的非常基本的东西。

我有一个简单的程序来运行一个`csv`包含图像链接的文件，以将这些图像保存在指定的保存文件位置。

我正在将包含 的单元格解析`url`为`List<string[]>`.

如果我把`GetImage(@"http://www.example.com/picture.jpg", 1)`我的`GetImage`功能按它应该的方式执行。当我尝试使用循环并传入`str[0]`变量时，我收到有关路径中非法字符的错误。

我用 a`MessageBox`告诉我有什么区别，据我所知，当我将它传递给`str[0]`函数时，它会添加双引号（即显示“http://www.example.com”而不是[http ://www.example.com](http://www.example.com)就像我只发送一个字符串时一样。

我究竟做错了什么？

```
private void button2_Click(object sender, EventArgs e)
    {
        string fileName = textBox1.Text;            
        folderBrowserDialog1.ShowDialog();
        string saveLocation = folderBrowserDialog1.SelectedPath;
        textBox2.Text = saveLocation;            
        List<string[]> file = parseCSV(fileName);
        int count = 0;
        foreach (string[] str in file)
        {
            if (count != 0)
            {                                                          
                GetImage(str[0], str[4]);                    
            }
            count++;
        }
        //GetImage(@"http://www.example.com/picture.jpg", "1");
    }

    private void GetImage(string url, string prodID)
    {   
        string saveLocation = textBox2.Text + @"\";;
        saveLocation += prodID + ".jpg";                        
        WebClient webClt = new WebClient();
        webClt.DownloadFile(url, saveLocation);                         
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:11:59.447

无论是哪个函数或方法创建了这些引号，您都可以将它们全部替换。

```
String myUrl = str[0];
myUrl = myUrl.Replace("\"", "");
GetImage(myUrl, str[4]); 
```

我认为您的文件包含引号或 parseCSV 方法创建它们。

更新：

我使用了这段代码，它完全没有问题并且没有引号：

```
static void Main(string[] args)
{
  string fileName = "Test";
  //folderBrowserDialog1.ShowDialog();
  string saveLocation = ".\\";
  //textBox2.Text = saveLocation;
  List<string[]> file = new List<string[]>
  {
    new string[] { "http://www.example.com", "1", "1", "1", "1"},
    new string[] { "http://www.example.com", "2", "2", "2", "2"},
  };
  int count = 0;
  foreach (string[] str in file)
  {
    if (count != 0)
    {
        GetImage(str[0], str[4]);
    }
    count++;
  }
//GetImage(@"http://www.example.com/picture.jpg", "1");
}

private static void GetImage(string url, string prodID)
{
  string saveLocation = ".\\"; // textBox2.Text + @"\"; ;
  saveLocation += prodID + ".jpg";
  WebClient webClt = new WebClient();
  Console.WriteLine(url);
  webClt.DownloadFile(url, saveLocation);
} 
```

# php - MySQL Fetch Array 布尔错误

> ID：12882916
> 
> 赞同：-3
> 
> 时间：2012-10-14T13:59:36.803
> 
> 标签：php, mysql, arrays, fetch

这是我的代码

```
<?php 
    $result = mysql_query("SELECT * FROM post WHERE username = ".$username." ORDER BY ID DESC ");
    while($row = mysql_fetch_array($result)){ 
    ?>
        <div class="post">
            <a href="/p/<?php echo $row['ID']; ?>" class="post-title"><?php echo $row['title']; ?> - (Rating: <?php echo $row['rank']; ?>)</a>
            <p class="post-content"><?php echo $row['description']; ?><br /><br />On <?php echo $row['date']; ?></p>
        </div>
    <?php }; ?> 
```

但我得到这个错误：

> 警告：mysql_fetch_array() 期望参数 1 是资源，布尔值在第 77 行的 /*/programs/user.php 中给出

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-14T14:02:32.330

我怀疑你忘了用单引号括起来

```
$result = mysql_query("SELECT * 
                       FROM post 
                       WHERE username = '".$username."' 
                       ORDER BY ID DESC "); 
```

但是你仍然容易受到 sql 注入的影响。请花时间阅读下面的文章

[**在 PHP 中防止 SQL 注入的最佳方法是什么？**](https://stackoverflow.com/questions/60174/best-way-to-prevent-sql-injection-in-php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:02:57.363

`mysql_query()``FALSE`如果出现错误，则返回布尔值。所以你的`SELECT`说法有误。

在`$result === FALSE`尝试使用`$result`. 如果`$result === FALSE`，请使用`mysql_error()`以了解有关问题的更多信息。

请注意，不推荐使用`mysql_query()`和其他`mysql_*`功能。改为移至`mysqli_*`或`PDO`函数/方法。`PDO`和的一大特点`mysqli_*`是准备好的陈述。它们将帮助您避免 SQL 注入攻击。

# settings - 无法更改 Scrapy 设置

> ID：12882919
> 
> 赞同：6
> 
> 时间：2012-10-14T13:59:55.647
> 
> 标签：settings, scrapy

我想下载中文页面，所以我打开命令行和python，输入这些代码

```
from scrapy.conf import settings
settings.overrides['DEFAULT_REQUEST_HEADERS'] = {'Accept':'text/heml,application/xhtml+xml;q=0.9,*/*;q=0.8','Accept-Language':'ch',} 
```

但它没有用。“接受语言”仍然是“en”。所以我尝试了其他设置，同样的事情发生了。我只是无法更改设置。有人请帮帮我，这让我发疯！我花了 3 个小时在上面，但一无所获。非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-07T20:11:57.950

是

```
settings.overrides['DEFAULT_REQUEST_HEADERS'] = {'Accept':'text/heml,application/xhtml+xml;q=0.9,*/*;q=0.8','Accept-Language':'ch',} 
```

应该说 text/heml 或 html？

# matlab - 在 MATLAB 中将向量分配给矩阵行

> ID：12882922
> 
> 赞同：6
> 
> 时间：2012-10-14T14:00:16.793
> 
> 标签：matlab

我有大小为 50*2的数组（向量）`r =[2 4]`和矩阵。`report`我想放入矩阵`r`的第 1 行。`report`当我跑

```
with report(1)=r; 
```

MATLAB 返回此错误：

> ？？？在赋值 A(I) = B 中，B 和 I 中的元素数必须相同。

如何解决此错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-14T14:19:44.063

```
report(1,:)=r 
```

您还需要指定列。否则`report(1)`是一个标量，`r`是一个向量，你会得到一个错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-14T14:10:56.190

除非我遗漏了一些东西，否则您只想将向量作为矩阵的第一行：

`report = [r;report]`

# c# - 工具提示 IsBalloon 取消会弄乱下一个打开的气球的大小

> ID：12882931
> 
> 赞同：0
> 
> 时间：2012-10-14T14:01:35.897
> 
> 标签：c#, tooltip, balloon

一直试图找出为什么我的气球大小发生变化的原因，并且其中的文本因此被裁剪。我认为这与重新设置控件的提示文本有关。没有。原来是popOpen的取消。一旦取消，将对下一个要打开的气球产生不利影响。

有人对解决方法有一些绝妙的想法吗？

这是代码：（要重现错误，运行它并 mouseOver l3，然后 l2，然后 l，然后 l3 - 按此顺序）。

```
public partial class Form7 : Form
{
    private Label l, l2, l3;

    public Form7()
    {
        InitializeComponent();

        toolTip1.IsBalloon = true;
        toolTip1.Popup += new PopupEventHandler(toolTip1_Popup);

        l = new Label();
        l.Name="l";
        l.Text = "Label 1";
        l.Top = 100;
        l.Left = 100;

        l2 = new Label();
        l2.Name="l2";
        l2.Text = "Label 2";
        l2.Top = 150;
        l2.Left = 100;

        l3 = new Label();
        l3.Name = "l3";
        l3.Text = "Label 3";
        l3.Top = 200;
        l3.Left = 100;

        this.Controls.Add(l);
        this.Controls.Add(l2);
        this.Controls.Add(l3);

        toolTip1.SetToolTip(l, "Hello.");
        toolTip1.SetToolTip(l2, "This is longer.");
        toolTip1.SetToolTip(l3, "This is even longer than Label 2.");

    }

    void toolTip1_Popup(object sender, PopupEventArgs e)
    {
       Control c = e.AssociatedControl;

       if (c.Name == "l")
           e.Cancel = true;  // <--- This is the culprit!
       else
           e.ToolTipSize = new Size(400, 100);  //  <--- This sems to have no effect when isBalloon == true.
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T16:57:21.943

叹息，那些恼人的 ToolTip 错误。至少部分原因似乎是本机 Windows 控件实际上不支持取消弹出窗口。Winforms 通过将工具提示窗口大小设置为 0 x 0 像素来模拟它。这似乎会影响下一个弹出窗口的结果，它似乎生成了一个从 0 x 0 大小计算出来的窗口大小，并假设文本应该被换行。但实际上并没有包装文本。

解决该问题的一种方法是在取消后对本机控件进行重击，使其无法记住大小。这有效：

```
 if (c.Name == "l") {
       e.Cancel = true;
       this.BeginInvoke(new Action(() => {
           toolTip1.IsBalloon = !toolTip1.IsBalloon;
           toolTip1.IsBalloon = !toolTip1.IsBalloon;
       }));
   } 
```

# php - 一个字符串在一列中有多少次

> ID：12882935
> 
> 赞同：0
> 
> 时间：2012-10-14T14:01:50.263
> 
> 标签：php, mysql

我正在编写推荐程序脚本。我有下表：

```
id primary key
name varchar
email varchar
ref varchar
bid varchar
reward boolean 
```

基本上，一旦三个朋友使用相同的 ref 加入，id 等于 ref 的人将获得奖励。

每次有人订阅时，我都需要检查表中是否有三个相同的参考，然后将奖励设置为 true，并向 ID 等于参考的人发送电子邮件。

我希望这很清楚。

我正在努力完成它。

到目前为止，在整个脚本下方：

```
$Bname = mysql_real_escape_string($_POST['Bname']);
$Bemail = mysql_real_escape_string($_POST['Bemail']);
$Bref = mysql_real_escape_string($_POST['Bref']);
$Bid = mysql_real_escape_string($_POST['Bid']);

mysql_connect("******", "******", "*******") or die ('Error: '.mysql_error());
mysql_select_db("********");

$checkEmail = "SELECT email FROM betalist WHERE email ='".$Bemail."'";
$result = mysql_query($checkEmail);

if (mysql_num_rows($result) > 0) {
echo $Bemail." is already in our list";
exit;
}

if (mysql_num_rows($result) == 0) {
$query="INSERT INTO betalist (ID, name, email,ref,bid)VALUES ('NULL','".$Bname."','".$Bemail."','".$Bref."','".$Bid."')";
mysql_query ($query) or die ('Error updating database'); 
```

到目前为止，我已经尝试使用 mysql_num_rows 来解决它：

```
$refCount = "SELECT id, email FROM betalist WHERE ref='".$Bref."'"; 
$result = mysql_query($refCount);
if (mysql_num_rows($result)==3)
{ 
    echo $countarray; 
} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T18:33:02.663

您的代码在当前状态~~下~~容易受到[SQL 注入攻击。](http://en.wikipedia.org/wiki/SQL_injection)我还看到您正在使用`mysql_*`目前正在[弃用](http://goo.gl/KJveJ)的古老功能。看到[**红框**](http://goo.gl/GPmFd)了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定，[这篇文章](http://goo.gl/3gqF9)将有助于选择。如果你想学习，[这里有一个很好的 PDO 教程](http://goo.gl/vFWnC)。您至少已尝试修复 SQLi 部分，但您当前的代码仍然会失败，因为`mysql_real_escape_string()`需要与数据库的开放连接（并且您仅在调用后打开数据库连接）。

您使用 PDO 的代码将如下所示：

```
<?php
$dbConnection = new PDO('mysql:dbname=dbname;host=127.0.0.1;charset=utf8', 'user', 'pass');
$dbConnection->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
$dbConnection->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

try {
    $stmt = $dbConnection->prepare('SELECT email FROM betalist WHERE email = :email');
    $stmt->execute(array(':email' => $_POST['Bemail']));
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    if ($result) {
        echo htmlspecialchars($_POST['Bemail']), " is already in our list";
        exit;
    }

    $stmt = $dbConnection->prepare('INSERT INTO betalist (ID, name, email, ref, bid) VALUES (NULL, :name, :email, :ref, :bid)');
    $stmt->execute(array(
        ':name'  => $_POST['Bname'],
        ':email' => $_POST['Bemail'],
        ':ref'   => $_POST['Bref'],
        ':bid'   => $_POST['Bid'],
    ));

    $stmt-> $dbConnection->prepare('SELECT count(id) FROM betalist WHERE ref = :ref');
    $stmt->execute(array(':ref' => $_POST['Bref']));
    $result = $stmt->fetch(PDO::FETCH_ASSOC);
    if ($result['count'] == 3) {
        // do stuff
    }
} catch(PDOException $e) {
    echo 'Something went wrong: ' , $e->getMessage();
} 
```

验证用户尝试使用的电子邮件地址可能会更好。这可以通过[内置`filter_var()`函数](https://stackoverflow.com/a/12026863/508666)轻松完成：

```
if(filter_var($_POST['Bemail'], FILTER_VALIDATE_EMAIL) === false) {
    // user entered an invalid emailaddress
} 
```

*请注意，我检查了出现的次数是否正好是 3，所以也许你想检查三的倍数。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:47:24.117

SQL中有一个`COUNT`函数。

```
SELECT COUNT(*) FROM betalist WHERE ref=? 
```

然后检查结果是否为 3。比返回实际行然后对它们进行计数要高效得多..

# mercurial - 如何在 BitBucket 上使用 mercurial 补丁队列

> ID：12882944
> 
> 赞同：5
> 
> 时间：2012-10-14T14:02:42.790
> 
> 标签：mercurial, bitbucket

在 BitBucket 有了新的设计之后，你可以使用 mercurial 补丁队列吗？

在您可以按存储库中的“补丁队列”链接创建补丁队列之前，但该链接现在似乎消失了。我错过了什么吗？

我正在使用 mercurial 来管理我需要在我自己的机器上运行一些软件的一组补丁，简而言之就是[这里](http://dwm.suckless.org/customisation/patch_queue)概述的方法。我已经使用这种方法有一段时间了，我也想知道是否有更简单的方法来使用 git？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-15T09:19:51.140

现在，补丁队列似乎在 Bitbucket 中被视为分叉。要创建补丁队列，请单击`Fork`按钮，然后单击`create a patch queue`分叉页面右上角的链接。

然后，您可以通过单击页面上的`Fork`链接来管理补丁队列，`Overview`并像管理任何其他存储库一样管理它。

# php - 如何编写 PHP + MySQL Web 服务以每秒执行 1000 个请求（INSERT 和 SELECT）

> ID：12882946
> 
> 赞同：1
> 
> 时间：2012-10-14T14:02:48.820
> 
> 标签：php, mysql

我有一个包含诸如`id`, `type`,`data`等字段的表...我需要在 PHP 中编写一个 Web 服务脚本，该脚本应该将数据插入到表中，然后选择最后 10 条具有相同类型的记录并在 HTTP 正文中返回。

每秒需要 1000 个实例访问此脚本。

我的问题是最好的方法是什么？

这是我的代码。我不确定这是一个很好的做法，并且可以举一个如何使它变得更好的例子......

```
// Connect to mysql server
$link = mysql_connect(HOST, USER, PASSWORD);
if(!$link) {
    die('Could not connect to server: ' . mysql_error());
}

// Select database
$db = mysql_select_db(DATABASE);
if(!$db) {
    die('Cannot use the database');
}
mysql_set_charset('charset=utf8', $link); 

// Insert data
$query = "INSERT INTO `mytable` (`id`, `type`, `data`) VALUES ('$id', '$type', '$data')";   
mysql_query($query);

// Select data
$query = "SELECT * FROM `mytable` WHERE `type`='$type' ORDER BY DESC LIMIT 10";
$result = mysql_query($query);

while($row = mysql_fetch_assoc($result)) {

    // Create xml to return

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:41:31.183

您的 PHP 脚本本身（忽略任何安全问题）不太可能成为将其扩展到您期望的负载的问题。您的基础设施将很重要，并且会在此脚本是否适用于您期望的负载之间产生差异。

您的 MySQL 实例每秒可以支持 1000 个新连接吗？您的 Web 服务器可以每秒运行此脚本 1000 次吗？

解决这个问题的唯一方法是对其进行基准测试，以确定您在哪里，您可以支持哪些负载？如果你不能支持它，那么你需要找到瓶颈，但我怀疑它永远不会是这个脚本。

* * *

**根据您的评论进行更新**，最好的方法是模拟您期望的负载，如果您的设置可以处理这个问题，没有必要担心。如果它不能处理它，那么你需要缩小问题的范围。

首先，下载一个像 Apache JMeter 这样的工具。您可以遵循一些教程来设置模拟以尝试您的设置。

从这里您可以确定问题的范围，如果您可以支持超出您预期的流量，您可能不需要担心。如果你能支持它或者你还有很长的路要走，你需要找到阻碍你达到这个目标的瓶颈。

通过单独测试系统的各个部分来缩小问题范围，这是您回答问题的地方，例如您的 Web 服务器或数据库可以支持多少连接。一旦你确定了瓶颈；阻止您处理更多流量的原因，然后您可以更好地了解您需要做什么。

使用 Apache JMeter：
[http](http://www.davegardner.me.uk/blog/2010/09/23/effective-load-testing-with-apache-jmeter/)
://www.davegardner.me.uk/blog/2010/09/23/effective-load-testing-with-apache-jmeter/ 使用 mysqlslap 加载测试 MySQL：
[http://dev.mysql .com/doc/refman/5.1/en/mysqlslap.html](http://dev.mysql.com/doc/refman/5.1/en/mysqlslap.html)

> **引导说明：**可能会有很多东西要学……希望这能让你开始，并且你可以相对轻松地支持你正在寻找的负载。如果不是，则需要大量阅读 Web 服务的可扩展架构、您正在使用的系统的高级配置以及耐心。

* * *

**使用 PDO**

```
//Connect to mysql server
$host = ""; // Your database host name
$driver = "mysql";
$database = ""; // Your database;
$user = ""; // The user for the database;
$password = ""; // The password for the database;

// Create a DSN string from the above parameters
$dsn = "$driver:host=$host;dbname=$database";

// Create a connection you must have the pdo_mysql
// extension added to your php.ini
try {
    $db = new PDO($dsn, $user, $password);

// The connection could not be made
} catch(PDOException $ex)
    die("Could not connect to server: {$ex->getMessage()}");
}

// Prepare an insert statement
$stmt = $db->prepare("
    INSERT INTO `mytable` (`id`, `type`, `data`) 
    VALUES      (:id, :type, :data)
");    

// I'm guessing at the types here, use the reference
// http://php.net/manual/en/pdo.constants.php to
// select the right datatypes. Using parameter binding
// you ensure that the value is converted and escaped
// correctly for the database
$stmt->bindParam(":id", $id, PDO::PARAM_INT);
$stmt->bindParam(":type", $type, PDO::PARAM_STR);
$stmt->bindParam(":data", $data, PDO::PARAM_LOB);

// Execute the insert statement
$stmt->execute();

// Prepare a select data
$stmt = $db->prepare("
    SELECT   * 
    FROM     `mytable` 
    WHERE    `type` = :type 
    ORDER BY `id` DESC 
    LIMIT 10
");

// Again bind the parameters
$stmt->bindParam(":type", $type, PDO::PARAM_STR);

// Execute the select statement
$stmt->execute();

// There are different ways that fetch can return
// a row, the web page above lists all of the
// different types of fetch as well. In this case
// we are fetching the rows as associative arrays
while($row = $stmt->fetch(PDO::FETCH_ASSOC)) {

    // Write XML for rows
}

// Finalise and output XML response 
```

使用 PDO： http:
[//net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/](http://net.tutsplus.com/tutorials/php/why-you-should-be-using-phps-pdo-for-database-access/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:48:57.753

作为一个小改进，您可以在一个查询中完成所有操作：

```
$query= "
    INSERT INTO `mytable` (`id`, `type`, `data`) 
    VALUES ('$id', '$type', '$data')
    ;    
    SELECT * 
    FROM `mytable` 
    WHERE `type` = '$type' 
    ORDER BY DESC 
    LIMIT 10
    ;"; 
```

# c# - ASP.NET C#如何在单击按钮时隐藏/显示文本

> ID：12882958
> 
> 赞同：-1
> 
> 时间：2012-10-14T14:03:53.717
> 
> 标签：c#, asp.net

我想显示标签（使隐藏的可见）并在单击时更改按钮的文本，并且能够再次单击该按钮以显示其原始文本并隐藏标签。`

```
 public partial class TestClick : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack) 
        {

            btnShowButtonText.Text = "Button";
            lblShowText.Visible = false;

        }
    }
    protected void btnShowButtonText_Click(object sender, EventArgs e)
    {
        if (!Session.IsNewSession)
        {
            btnShowButtonText.Text = "Hide gift voucher details";
            lblShowText.Visible = true;
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T14:18:12.030

您可以使用隐藏字段来确定按钮和文本的状态：

```
 public partial class TestClick : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {
    if (!Page.IsPostBack) 
    {

        btnShowButtonText.Text = "Button";
        lblShowText.Visible = false;
    }
   }

protected void btnShowButtonText_Click(object sender, EventArgs e)
{
    if(hiddenField.Value == "0")
    {
       btnShowButtonText.Text = "Hide gift voucher details";
       lblShowText.Visible = true;
       hiddenField.Value = "1";
    }
    else
    {
       btnShowButtonText.Text = "Button";
       lblShowText.Visible = false;
       hiddenField.Value = "0";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-14T14:10:12.227

您可以使用一个计数变量。像这样：

```
static  int cnt=0;
    protected void btnShowButtonText_Click(object sender, EventArgs e)
        {
    cnt++;
            if (cnt%2!=0)
            {
                btnShowButtonText.Text = "Hide gift voucher details";
                lblShowText.Visible = true;
            }
    if (cnt%2==0) 
            {

                btnShowButtonText.Text = "Button";
                lblShowText.Visible = false;

            }
        } 
```

当您第一次点击时，按钮文字为“隐藏礼券详情”，
下次按钮文字为“按钮”

# javascript - 从标签而不是按钮将值传递给函数

> ID：12882962
> 
> 赞同：1
> 
> 时间：2012-10-14T14:04:09.567
> 
> 标签：javascript, jquery

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:05:36.787

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-14T14:06:18.007

使用`attr()`方法

```
$(".someClass").click(function(e) {
    e.preventDefault();
    // How to get value of someAttribute?
   alert( $(this).attr('someAttribute'));
}); 
```

演示：http: [//jsfiddle.net/buC8k/](http://jsfiddle.net/buC8k/)

API参考：http: [//api.jquery.com/attr/](http://api.jquery.com/attr/)

# operating-system - 火狐操作系统架构

> ID：12882966
> 
> 赞同：5
> 
> 时间：2012-10-14T14:04:32.843
> 
> 标签：operating-system, firefox-os

是否有任何关于 Firefox OS 核心架构的信息？我不仅仅指面向开发人员的信息。我对类似于 Android 的底层架构感兴趣：[http ://www.zdnet.com/blog/burnette/how-android-works-the-big-picture/515](http://www.zdnet.com/blog/burnette/how-android-works-the-big-picture/515)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T22:06:27.427

主要是Gonk（底层linux内核）、Gecko（火狐引擎）和Gaia（用户界面）。在 Mozilla wiki 上，您可以找到有关这些层的完整信息；[Mozilla 维基](https://wiki.mozilla.org/B2G/Architecture)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T12:59:38.397

简而言之，Firefox OS 是一个运行基于 HTML5 的应用程序的环境（不仅是标记语言，还有所有相关技术，包括 JavaScript、CSS3、Web API ......）。

这些应用程序在称为 Gecko 的特殊浏览器上运行。您可以将 Gecko 视为带有类固醇的 Firefox，其应用程序取代了网页。在某些方面，它缺少一些浏览器功能，但它实现了许多 API 来提供对设备的安全访问。

Gecko 由实际的 SO，Gonk 支持。Gonk 是一个非常简单的 GNU/Linux 发行版，它拥有位于设备硬件和 Gecko 之间的硬件抽象层或 HAL。Gonk 将低级硬件访问转换为 C++ 接口，Gecko 以 JavaScript 标准 API 的形式向开发人员提供这些接口。

[Mozilla Wiki](https://wiki.mozilla.org/B2G/Architecture)中的更多信息

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-30T13:55:10.477

主要的 Firefox OS 架构是

*   应用程序（[盖亚](https://github.com/mozilla-b2g/gaia)）
*   平台（[壁虎](http://hg.mozilla.org/mozilla-central)）
*   基础设施（[Gonk](https://github.com/mozilla-b2g/B2G)）

Firefox OS AppDay有一个[概述和高级架构](http://www.mozilla-hispano.org/archivos/docs/fxosappdaysvall/arquitectura.pdf)幻灯片（英文），西班牙语更简洁地阐述了架构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-18T08:03:10.013

查看以下链接，了解完整的 Firefox OS 架构以及安全信息：

[点击这里](https://developer.mozilla.org/en-US/docs/Mozilla/Firefox_OS/Security/Security_model)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-18T14:08:04.227

在 MDN 上，您会发现一张非常相似的图片，它准确地解释了 Firefox OS 的工作原理： [https ://developer.mozilla.org/en-US/Firefox_OS/Platform/Architecture](https://developer.mozilla.org/en-US/Firefox_OS/Platform/Architecture)

# android - 旋转动画android

> ID：12882967
> 
> 赞同：22
> 
> 时间：2012-10-14T14:04:37.397
> 
> 标签：android, animation

我正在尝试制作旋转图像动画。我需要像在进度条中那样围绕**自身**旋转一个图标，但我得到的是一个围绕一个圆圈旋转的图像。这是我的动画代码

```
<?xml version="1.0" encoding="utf-8"?>
<rotate
xmlns:android="http://schemas.android.com/apk/res/android"
android:fromDegrees="0"
android:toDegrees="360"
android:interpolator="@android:anim/linear_interpolator"
android:pivotX="50%"
android:pivotY="50%"
android:duration="2500"
android:repeatCount="infinite"
android:repeatMode="restart"
/> 
```

我在这里哪里出错了？谢谢

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-14T15:13:14.927

这是布局 main.xml 的源代码：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <Button
        android:id="@+id/testButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="animationText" 
        android:onClick="AnimClick"/>

    <ImageView
        android:id="@+id/testImage"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:contentDescription="image_desc"
        android:scaleType="fitCenter"
        android:src="@drawable/cat2" />

</RelativeLayout> 
```

要实现旋转动画，我们可以通过 XML 或 Java 代码来定义动画。如果我们想在xml中编写动画，我们需要在/res/anim文件夹下创建一个动画xml文件。在这里，我们创建一个名为`rotate_around_center_point.xml`

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" >

    <rotate
        android:duration="2500"
        android:interpolator="@android:anim/linear_interpolator"
        android:pivotX="50%"
        android:pivotY="50%"
        android:repeatCount="infinite"
        android:repeatMode="restart"
        android:toDegrees="360" />

</set> 
```

这是我的活动：

```
public class MainActivity extends Activity implements OnClickListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button btn = (Button) findViewById(R.id.testButton);
        btn.setOnClickListener(this);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
        ImageView animationTarget = (ImageView) this.findViewById(R.id.testImage);

        Animation animation = AnimationUtils.loadAnimation(this, R.anim.rotate_around_center_point);
        animationTarget.startAnimation(animation);

    }

} 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2015-01-10T12:43:40.623

您可以尝试使用以下代码，而不是使用 XML：

```
RotateAnimation rotate = new RotateAnimation(0, 360,
        Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF,
        0.5f);

rotate.setDuration(4000);
rotate.setRepeatCount(Animation.INFINITE);
yourView.setAnimation(rotate); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-16T12:43:19.170

好吧，我知道我错了。我给我的图像添加了填充，这导致它每次旋转时都会移动一点。无论如何，我删除了填充，现在它工作得很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-10T07:41:11.833

在动画文件夹中添加以下xml

```
<?xml version="1.0" encoding="utf-8"?>
<set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false" 
    android:duration="4000" 
    android:fromdegrees="0" 
    android:pivotx="50%" 
    android:pivoty="50%"
    android:todegrees="360" 
    android:toyscale="0.0">
 </set> 
```

希望对你有帮助..

欲了解更多信息[http://www.blazin.in/2013/09/simple-rotate-animation-in-android.html](http://www.blazin.in/2013/09/simple-rotate-animation-in-android.html)

# qt - 无法处理 Qt Poppler 库示例的 Tap、Swipe、Pan、Pinch 事件

> ID：12882970
> 
> 赞同：0
> 
> 时间：2012-10-14T14:05:15.430
> 
> 标签：qt, qml

我以 Poppler Library 为例，在 Qt 平台上渲染 PDF。我正在尝试为示例编写手势处理。

该示例可以从“doc.qt.digia.com/qq/qq27-poppler.zip”网址下载。

简而言之，该示例有一个 DocumentWidget.cpp，它派生自“QLabel”，而“QLabel”又派生自 QFrame 和 QWidget。

现在由于 QLabel 是从 QWidget 继承的，我已经开始实现手势处理。

在 DocumentWidget.hi 中添加了以下功能

```
protected:
 bool event( QEvent* e ); 
```

在 DocumentWidget.cpp 构造函数中 grabGesture( Qt::TapGesture )

```
bool DocumentWidget :: event( QEvent* e )
{
  if( e->type() == ( Qt :: TapGesture )
     gestureEvent();
} 
```

在上面的gestureEvent函数中，我尝试检查它是否是Tap并相应地计划处理tap事件。但是，在我的示例中，事件函数被调用，但点击手势正在被处理。

我已经包含了所有必要的头文件。我也已经提前宣布了这些课程。

你能告诉我哪里出错了。我们不能为 QLabel 处理这些手势吗？

先感谢您。

钱德M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-17T07:29:34.920

您已经`TagGesture`在事件处理程序中进行检查。`gestureEvent()`所以你不需要在函数中再次检查它。此外，在消费完事件后，您必须`return true;`声明该事件已被消费。

如果偶数不是 TapGesture 然后像这样将它传递给 QWidget 本身。

```
 if( e->type() == ( Qt :: TapGesture )
     gestureEvent();
 else
     return QWidget::event(e); 
```

[您可以在此处](http://doc.qt.digia.com/4.7-snapshot/eventsandfilters.html#event-handlers)找到有关均匀处理的文档。

# windows - 带有 Windows 的 Grep，在没有空格的文本文件中创建的单词

> ID：12882977
> 
> 赞同：0
> 
> 时间：2012-10-14T14:06:10.453
> 
> 标签：windows, shell, text, grep, newline

我正在使用 grep 从字典文本文件中取出所有四个字母的单词并将它们放入一个新的文本文件中。

这个命令应该在 Unix 上工作，但在 Windows 上却不行。

我需要每行一个单词，在 Windows 上它给了我所有的单词，但所有单词都堆在一起，没有空格。

这是我正在使用的 grep 命令：

```
grep "^[a-z]\{4\}$" dictionaryfilename > outputfilename 
```

我相信这与Unix和Windows之间换行符的差异有关吗？

无论如何，我不确定如何修复Windows，有人可以帮忙。

非常感谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T21:56:09.463

你可能有一个 UNIX 格式的文本文件（没有回车的换行符），它在 Windows 中看起来像一个大行；`grep`只是处理系统所说的“一条线”，所以它与问题无关。

尝试将文件从 LF 转换为 CRLF，看看是否能得到更好的结果。

# python - 如何使用 Qt.UserRole 对 Qt QListview 中的项目进行排序

> ID：12882980
> 
> 赞同：1
> 
> 时间：2012-10-14T14:06:24.243
> 
> 标签：python, qt, sorting, pyside, qlistview

我在对`QListView`我指定的字段中的使用值中的项目进行排序时遇到了一些问题。

基本上我想要做的是：

1.  检测照片集合中的人脸并将其显示在`QListView`
2.  聚类人脸（图像）
3.  通过将列表中属于同一集群的项目（它们是面部图像）放在一起来更新视图。具体来说，如果项目 1、3、5 在一个集群中，而项目 2、4、6 在另一个集群中，则项目 1、3、5 应该在显示项目 2、4、6 之前显示（以任何排列方式）或相反亦然。

我这样做的方法是将列表中的`UserRole`每个字段设置为`QStandardItem`集群标签，然后尝试`QStandardModel`根据 this 进行排序`UserRole`。然后，这将显示同一集群中的项目（即在 中具有相同的集群标签`UserRole`）彼此相邻。

我能够为`UserRole`项目设置成功，但调用排序函数`QStandardModel`并没有对项目进行排序，即使我将排序角色设置为默认值`DisplayRole`（即根据每个面的文本标签排序）它的工作方式为故意的。

谁能告诉我我的代码有什么问题或提供替代方法？我用谷歌搜索了排序列表，并在[QSortFilterProxyModel](http://www.trinitydesktop.org/docs/qt4/itemviews-customsortfiltermodel.html%5d%5b1%5d)上找到了以下链接，但由于我对 Qt 很陌生，因此无法适应我的情况。

提前感谢任何回复。

以下是相关代码：

```
import os
from PySide.QtGui import QListView, QStandardItemModel, QStandardItem, QIcon
from PySide.QtCore import Qt

class FacesView(QListView):
    """
    View to display detected faces for user to see and label.
    """
    UNCLUSTERED_LABEL = -1
    CLUSTER_ROLE = Qt.UserRole + 1

    def __init__(self, *args):
        super(FacesView, self).__init__(*args)
        self._dataModel = QStandardItemModel()
        self.setModel(self._dataModel)
        # Layout items in batches instead of waiting for all items to be
        # loaded before user is allowed to interact with them.
        self.setLayoutMode(QListView.Batched)

    def updateFaceClusters(self, labels):
        """Update the cluster label for each face.
        @param labels: [1 x N] array where each element is an integer
        for the cluster the face belongs to."""

        assert(len(labels) == self._dataModel.rowCount())
        # Put the cluster label each item/face belong to in the
        # CLUSTER_ROLE field.
        for i in xrange(self._dataModel.rowCount()):
            index = self._dataModel.index(i, 0)
            self._dataModel.setData(index, labels[i], self.CLUSTER_ROLE)

        # Use cluster label as sort role
        self._dataModel.setSortRole(self.CLUSTER_ROLE)
        # This does NOT seem to sort the items even though it works fine
        # when sort role is the default Qt.DisplayRole.
        self._dataModel.sort(0)
        print("Finished updating face clusters")

    def itemsInList(self):
        """Returns the label for a face and the path to its image.
        @return: (label, path)"""
        items = []
        for i in xrange(self._dataModel.rowCount()):
            label =  self._dataModel.index(i, 0).data(Qt.DisplayRole)
            imagePath = self._dataModel.index(i, 0).data(Qt.UserRole)
            clusterLabel = self._dataModel.index(i, 0).data(self.CLUSTER_ROLE)
            items.append((imagePath, label, clusterLabel))

        return items

    def addItem(self, label, imagePath):
        """Add an item to list view
        @param label: The label associated with the item.
        @param imagePath: Path to image for the icon."""
        if os.path.exists(imagePath):
            icon = QIcon(imagePath)
        else:
            icon = QIcon(':/res/Unknown-person.gif')

        item = QStandardItem(icon, label)
        item.setEditable(True)
        # Add image path to the UserRole field.
        item.setData(imagePath, Qt.UserRole)
        # Add cluster label to image. CLUSTER_ROLE is where I intend
        # to put the item's cluster label.
        item.setData(self.UNCLUSTERED_LABEL, self.CLUSTER_ROLE)
        # Prevent an item from dropping into another item.
        item.setDropEnabled(False)
        # Add item to list indirectly by adding it to the model.
        self._dataModel.appendRow(item)

    def clear(self):
        self._dataModel.clear() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-14T17:29:16.580

您发布的代码没有任何问题。所以你使用它的方式一定有问题。你是如何生成集群标签的？

这是一个使用您的`FacesView`类的测试脚本，它按照您的意图进行排序：

```
from random import randint
from PySide.QtGui import QWidget, QPushButton, QVBoxLayout, QApplication
from facesview import FacesView

class Window(QWidget):
    def __init__(self):
        QWidget.__init__(self)
        self.list = FacesView(self)
        self.button = QPushButton('Test', self)
        self.button.clicked.connect(self.handleButton)
        layout = QVBoxLayout(self)
        layout.addWidget(self.list)
        layout.addWidget(self.button)

    def handleButton(self):
        labels = []
        self.list.model().setRowCount(0)
        for row in range(10):
            labels.append(randint(0, 3))
            text = 'Item(%d) - Cluster(%d)' % (row, labels[-1])
            self.list.addItem(text, 'icon.png')
        self.list.updateFaceClusters(labels)

if __name__ == '__main__':

    import sys
    app = QApplication(sys.argv)
    window = Window()
    window.show()
    sys.exit(app.exec_()) 
```

# python - Python：如何使用函数通过理解来定义二维数组？

> ID：12882982
> 
> 赞同：2
> 
> 时间：2012-10-14T14:06:28.737
> 
> 标签：python

我想定义一个二维（numpy）数组，这样***cell(row,col) == row+col***（或这两个变量的任何其他函数：行和列）

我正在寻找一个功能性解决方案，我希望它不会使用任何内存，并且生成的构造可以传递给任何标准数组操作函数（矩阵 mult ...）

使用模板元编程在 C++ 中可行的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-14T14:14:14.827

使用`numpy.fromfunction(function, shape)`. 从[文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.fromfunction.html%)：

> 通过在每个坐标上执行一个函数来构造一个数组。
> 
> 因此，结果数组在坐标 (x, y, z) 处具有值 fn(x, y, z)。

因此，对于您的情况：

```
>>> import numpy as np
>>> arr = np.fromfunction(lambda i,j: i+j, (6,6))
>>> print arr
[[  0\.   1\.   2\.   3\.   4\.   5.]
 [  1\.   2\.   3\.   4\.   5\.   6.]
 [  2\.   3\.   4\.   5\.   6\.   7.]
 [  3\.   4\.   5\.   6\.   7\.   8.]
 [  4\.   5\.   6\.   7\.   8\.   9.]
 [  5\.   6\.   7\.   8\.   9\.  10.]] 
```

（当然，这确实使用了内存——没有办法让一个函数看起来像是一个 numpy 数组但实际上并不在内存中。但是，对于有点类似的情况，请参阅`memmap`numpy 类，它访问作为 numpy 数组存储在磁盘上的文件—— [此处为文档](http://docs.scipy.org/doc/numpy/reference/generated/numpy.memmap.html)。）

# awk - 用 awk 提取列

> ID：12882990
> 
> 赞同：0
> 
> 时间：2012-10-14T14:08:11.733
> 
> 标签：awk

我有一些文本文件如下

```
293  800 J A              0   0  162
294  801 J R        -     0   0   67  
295  802 J P        -     0   0   56
298  805 J G  S    S-     0   0   22 
313  820 J R  T  4 S-     0   0  152 
```

如果 column5 为空，我想打印 column4。

```
desired output

>filename
ARP 
```

我使用了以下代码。但是这段代码只打印文件名。

```
awk '{ 
if (FNR == 1 ) print ">" FILENAME 
  if ($5 == "") {
printf $4 

 }
} 

END { printf "\n"}' *.txt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:36:45.093

这是一种使用方法`GNU awk`：

```
awk 'BEGIN { FIELDWIDTHS="5 4 2 3 3 2 7 4 3" } FNR==1 { print ">" FILENAME } $5 == "   " { sub(/  $/, "", $4); printf $4 } END { printf "\n" }' file.txt 
```

结果：

```
>file.txt
ARP 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-14T19:50:41.553

无论如何，这都不是一个优雅的解决方案，它特定于这个文件。

你可以做这样的事情

```
cut -c1-15 yourtext | awk '$5 {print $4}' 
```

其中 15 是包括第 5 列在内的字符数。

我非常同意[steve](https://stackoverflow.com/users/751863/steve)的建议，即为您的文件使用更好的替代方案。或者至少放置一个虚拟/错误值，而不是将列留空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-15T10:41:49.790

```
awk '{if(substr($0,15,1)~/ /)printf("%s",$4);}' your_file 
```

测试如下：

```
> cat temp
293  800 J A              0   0  162
294  801 J R        -     0   0   67  
295  802 J P        -     0   0   56
298  805 J G  S    S-     0   0   22 
313  820 J R  T  4 S-     0   0  152
> awk '{if(substr($0,15,1)~/ /)printf("%s",$4);}' temp
ARP> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-14T14:21:05.240

这是假设列号的变化保持不变的起点。

```
awk '$5 !="" && NF<=8 {printf $4}END{print "\n"}' data.txt 
```

产量

```
ARP 
```

您可以嫁接零件以显示文件名。

# django - 尝试使用带有附加信息的用户时，Django ORM 给出错误

> ID：12882994
> 
> 赞同：1
> 
> 时间：2012-10-14T14:09:36.330
> 
> 标签：django, django-models

我在 Ubuntu 12.04 上使用 Django 1.4 和 Python 2.7。

编辑：我正在清除这个问题的一些错误部分，因为它似乎再次发生了同样的问题。它工作得很好——我没有做任何改变——现在它失败了。那是怎么回事？

这基本上是视图的样子：

```
@login_required
def request_new_project(request):
    """
    ..  function:: request_new_project()

        Collect information to call the form used to create a new project

        :param request: Django Request object
    """
    user_dict = { 'rsb_username'  : request.user.username}
    form = CreateProject(initial = user_dict)
    data = { 'user' : request.user }
    data.update(csrf(request))
    data.update({ 'form' : form })

    return render_to_response("create_project.html", data)

@login_required
def add_project(request):
    """
    ..  function:: add_project()

        Add a project for the user

        :param request: Django Request object
    """

    if (request.method == "POST"):
        user = User.objects.get(username = request.POST.get('rsb_username'))
        userProfile = UserProfile.objects.get(user = user)

        new_project = Projects(client = userProfile,
                               project_name = request.POST.get('rsb_project_name'),
                               description = request.POST.get('rsb_description'),
                               budget = request.POST.get('rsb_budget'),
                               time_frame = request.POST.get('rsb_time_frame'),
                               time_frame_units = request.POST.get('rsb_time_frame_units'),
                               contact = request.POST.get('rsb_point_of_contact'),
                               contact_email = request.POST.get('rsb_contact_email'),
                               contact_phone = request.POST.get('rsb_contact_phone'),
                               price_quote = 0,
                               eta = 'To Be Determined',
                               current_status = 'Waiting for quote',
                               )
        new_project.save()
        return view_projects(request) 
```

我收到以下错误：

```
Cannot assign "<UserProfile: UserProfile object>": "Projects.client" must be a "User" instance. 
```

我没有改变模型。

```
# Create a table for users
class UserProfile(models.Model):
    user = models.OneToOneField(User)

    # Client Info
    company_name = models.CharField(max_length = 200)
    client_type = models.CharField(max_length = 200)
    address1 = models.CharField(max_length = 200)
    address2 = models.CharField(max_length = 200)
    city = models.CharField(max_length = 200)
    state = models.CharField(max_length = 200)
    country = models.CharField(max_length = 200)
    zip_code = models.CharField(max_length = 200)
    phone_number = models.CharField(max_length = 200)

# Create a table to manage project requests
class Projects(models.Model):
    client = models.ForeignKey(User)
    project_name = models.CharField(max_length = 50)
    description = models.TextField()
    budget = models.CharField(max_length = 50)
    time_frame = models.DecimalField(max_digits = 3, decimal_places = 1)
    time_frame_units = models.CharField(max_length = 25)
    contact = models.CharField(max_length = 50)
    contact_email = models.EmailField()
    contact_phone = models.CharField(max_length = 25)
    price_quote = models.DecimalField(max_digits = 10, decimal_places = 2)
    eta = models.CharField(max_length = 200)
    current_status = models.CharField(max_length = 200) 
```

有什么建议么？

更新 1：从实际数据库中，我可以看到其中一个`rsb_projects`约束是： `rsb_projects_client_id_fkey (client_id) REFERENCE rsb_userprofile (id) MATCH SIMPLE ON UPDATE NO ACTION ON DELETE NO ACTION DEFERRABLE INITIALLY DEFERRED`

如果这有帮助...

在我看来，即使我已经定义了`ForeignKey`要`models.py`反对`User`数据库的`UserProfile`id 。

想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-14T14:13:04.330

错误正是它所说的。

为了创建新项目，您需要为项目对象提供**用户配置文件对象**，而不是**用户配置文件 id**。

```
 user = User.objects.get(id=7)
   userprofile = user.get_profile()
   project.client = userprofile 
```

请注意，它`userprofile`是分配给项目实例的客户端属性的对象。您**不能**将`userprofile`对象的 id 分配给项目实例的客户端属性。

另外，不要将您的用户 ID 与您的用户配置文件 ID 混淆。它们可能并不完全相同。

每当在数据库中创建新用户时，用户 ID 是 auth_user 表中自动生成的主键。每当创建与用户相关的相应用户配置文件时，userprofile id 就是在 profiles_userprofile 表中自动生成的主键。

换句话说，您的`add_project`视图函数需要读取类似

```
if (request.method == "POST"):
    user = User.objects.get(username = request.POST.get('rsb_username'))
    # userprofile = UserProfile.objects.get(user = user)  <-- we don't need this anymore.

    new_project = Projects(client = user,  # <--- give it a user instance of course now that your model has changed
                           project_name = request.POST.get('rsb_project_name'),
                           description = request.POST.get('rsb_description'),
                           budget = request.POST.get('rsb_budget'),
                           time_frame = request.POST.get('rsb_time_frame'),
                           time_frame_units = request.POST.get('rsb_time_frame_units'),
                           contact = request.POST.get('rsb_point_of_contact'),
                           contact_email = request.POST.get('rsb_contact_email'),
                           contact_phone = request.POST.get('rsb_contact_phone'),
                           )
    new_project.save() 
```

关键要点是您需要确定您的原始模型定义是什么。

如果在您的项目类中，您的客户端属性作为 FK 分配给用户，那么您需要给它一个用户对象。

如果在您的 Project 类中，您的客户端属性作为 FK 分配给 UserProfile，那么您需要给它一个 userprofile 对象。