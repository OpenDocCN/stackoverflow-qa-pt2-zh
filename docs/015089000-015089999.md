# StackOverflow 问答 15089000-15089999

# iphone - 如何在 iOS 的 NSURL 字符串中传递多个参数？

> ID：15089000
> 
> 赞同：6
> 
> 时间：2013-02-26T12:20:52.917
> 
> 标签：iphone, ios, objective-c, nsurl

我正在该应用程序中开发一个应用程序我需要在 NSURL 中一次传递多个参数我的代码是

```
responseData = [[NSMutableData data] retain];
ArrData = [NSMutableArray array];
NSURL *url = [NSURL URLWithString:[NSString stringWithFormat:@"http://rate-exchange.appspot.com/currency?from=%@&to=%@&q=%@",strfrom,strto,strgo]];
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:url]];
//NSURLRequest *request1 = [NSURLRequest requestWithURL:
//[NSURL URLWithString:@"http://rate-exchange.appspot.com/currency?from=%@&to=%@&q=1",strfrom,strto]]; 
```

上面的代码我需要动态传递多个参数。是否可以 ？如果是，那怎么办？感谢和问候

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:30:10.347

在添加到 URL 之前尝试创建一个单独的字符串，例如

```
 NSSString *strURL=[NSString stringWithFormat:@"http://rate-exchange.appspot.com/currency?from=%@&to=%@&q=%@"‌​,strfrom,strto,strgo]; 
```

然后将此 strURL 添加到 URL

```
NSURL *url = [NSURL URLWithString:strURL]; 
```

最后将其添加到请求中，您的代码在向请求中添加 url 的位置是错误的，URL 不是字符串，它是 URL，所以应该`requestWithURL`不是`URLWithString`，应该是这样的

```
NSURLRequest *request = [NSURLRequest requestWithURL:url]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:34:34.073

这些答案中缺少的一件事是`[NSString stringByAddingPercentEscapesUsingEncoding:]`避免在 URL 中使用无效字符：

```
NSString *baseURL = [NSString stringWithFormat:@"http://rate-exchange.appspot.com/currency?from=%@&to=%@&q=%@",strfrom,strto,strgo];
NSURL *url = [NSURL URLWithString:[baseURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
NSURLRequest *request = [NSURLRequest requestWithURL:url]; 
```

# codeigniter - codignieter 嵌套视图

> ID：15089002
> 
> 赞同：0
> 
> 时间：2013-02-26T12:21:02.460
> 
> 标签：codeigniter, view, controller

我正在尝试动态初始化我的控制器方法并为我的嵌套视图收集输出数据。我想避免每次调用适当的视图 php 文件的视图和函数中的 $data['something'] 实例时检查。

```
class Admin extends CI_Controller {

    function __construct()
    {
        parent::__construct();
    }

    public function _remap($method, $params = array())
    {
        $this->view($method, $params);
    }
    public function view($method, $params)
    {
        $param = (implode(",", $params));
        $data = array();
        if (method_exists($this,$method) ){
            $param = !empty($param) ? $param : '';
            $data = call_user_func_array(array($this, $method), array($param));
            // and load the data array in the main view
            $this->load->view('admin/dashboard', $data);
        } else {
            $this->load->view('admin/404', $data);
        }
    }

    public function _one_of_mymethod(){
        $data['nested_view'] = 'view1';
        //calling models gather $data
        return $data;
    }

} 
```

比在函数数据数组中输出右嵌套视图。

**主视图**

会是这样的

```
<div class="sidebar"><?php $this->view('admin/sidebar'); ?></div>
<div id="content"><?php $this->view('/admin/'. $nested_view) ?></div> 
```

但这似乎不是正确的方法，以防我使用 ajax 调用。动态添加嵌套视图的最佳方法是什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:49:46.777

如果您使用的是 JQuery，您可以随时使用 JQuery $.load 这样的方法

```
$('.sidebar').load('<?php site_url('controllername/methodname')?>'); 
```

这是方法名称

```
function methodname(){
    $this->view();
   // do any stuff you want.
} 
```

# ajax - 谷歌地图和谷歌地方的 API 和 Web 服务之间的区别

> ID：15089003
> 
> 赞同：1
> 
> 时间：2013-02-26T12:21:05.430
> 
> 标签：ajax, web-services, api, google-maps, google-places-api

这可能会被否决，但无论如何：谷歌地图有网络服务： [https ://developers.google.com/maps/documentation/webservices/](https://developers.google.com/maps/documentation/webservices/)

它的名称是：Google Maps API Web Services - 它们不是两个不同的东西吗？

还有另一个链接： [https ://developers.google.com/maps/documentation/javascript/tutorial](https://developers.google.com/maps/documentation/javascript/tutorial)

它的名称是：Google Maps JavaScript API v3

我有几个问题。为了让谷歌地图 api v3 工作，以及让开发人员检索信息，他们将由网络服务提供数据吗？是否可以解释 API 是围绕 Web 服务进行的？

为什么谷歌会提供所有这些访问他们数据的方式？

如果使用 google API 网络服务，我应该能够使用服务器端语言和/或脚本语言（如 javascript AJAX）来使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:37:49.880

要使用 Javascript API，您根本不需要使用 WebService API。您当然可以同时使用两者，尽管您更有可能在服务器端使用 WebService，例如他们在 Java 和 Python 中给出的示例。如果您想通过 Javascript 使用 Webservice API，您也可以这样做（尽管您最好只使用 Javascript API）。

# iphone - 我可以在 iPhone 共享屏幕中添加我的应用程序吗？

> ID：15089004
> 
> 赞同：1
> 
> 时间：2013-02-26T12:21:07.367
> 
> 标签：iphone, xcode, share

我最近开发了一个在 android 中用作附加组件的应用程序。当用户喜欢任何东西时，无论是照片还是文档，然后单击 Android 共享按钮“我的应用程序”就会显示在该共享区域以及 Facebook、Twitter 等。

用 iPhone 可以吗？通过 X 代码？这样我就可以在我的应用程序上共享该文档或照片。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T10:44:40.617

经过大量研究，我最终解决了这个问题：

1) iPhone 不提供此功能但 android 确实有实现此功能的共享意图。

WAKE UP IPHONE GUYS ANDROID 从过去 2 年开始提供这个.....

# jquery - 以原始大小在 jQuery SVG 中加载图像

> ID：15089007
> 
> 赞同：2
> 
> 时间：2013-02-26T12:21:19.153
> 
> 标签：jquery, svg, jquery-svg

我需要在 jQuery SVG 中加载一个图像，但要以它的原始大小。事实是它不知道正在加载的图像的原始大小是多少。

我们需要用来加载图像的代码是：

```
svg.image(0, 0, 330, 540, 'images/img1.jpg', {id: 'img'}); 
```

在这里我必须提供图像的大小。它是强制性的。但我不知道图像的实际大小，所以我应该怎么做才能让图像以原始大小和特定位置加载？

问候，

杨瑜珈

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-27T16:12:13.630

查看类似问题的[答案。](https://stackoverflow.com/a/626505/218454)基本上，诀窍是在 dom 之外加载图像，获取尺寸，然后添加。

# javascript - Not Calling Action Class:Document.form.0 is Null or not an object

> ID：15089011
> 
> 赞同：0
> 
> 时间：2013-02-26T12:21:22.643
> 
> 标签：javascript, eclipse, struts

我试图在 ecilipse 中运行以下代码并得到错误为`document.form.0 is Null or not an object`. 请帮助我解决问题。我创建了一个动作类。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<%@ taglib uri="/WEB-INF/struts-html.tld" prefix="html"%>
<%@ taglib uri="/WEB-INF/struts-bean.tld" prefix="bean"%>
<%@ taglib uri="/WEB-INF/struts-tiles.tld" prefix="tiles"%>
<%@ taglib uri="/WEB-INF/struts-logic.tld" prefix="logic"%>

    <head>Welcome To struts Application.
        <title>Struts</title>
        <script language="javascript">

            function input() {
                alert('Insie input function');
                if (document.forms[0]) {
                    alert('true');
                    document.forms[0].reset();
                }

                var abs = '<%=request.getContextPath()%>'
                alert(abs);

                document.form[0].action=abs + "index.do?submit=execute";
                document.form[0].submit();
            }

        </script>
    </head>
    <body>
        <html:form method="post" action="/index">
            <html:text property="username"></html:text>
            <html:password property="password"></html:password>
            <html:button value="Hello" property="button" 
                onclick="javascript:input();"></html:button>
            <html:link page="/index.do">Test the Action</html:link>
        </html:form>
    </body>
</html> 
```

我已经配置了我的 Struts.config 文件，如下所示：

```
<action path="/index"
    name="indexform" scope="request" parameter="submit" 
    validate="false" type="com.work.Action.IndexAction"
>
    <forward name="success" path="success.jsp" />
    <forward name="failure" path="path.error" />
</action> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:03:54.403

它是`document.forms[0]`（注意复数）。这将显示在您的 JavaScript 控制台中。

`<head>`此外，从您的（即“欢迎使用 struts 应用程序”部分）中删除额外的内容。

并对空标签（即`<html:text property="username" />`）使用空标签形式。

# opengl - 获取片段世界位置的问题

> ID：15089019
> 
> 赞同：0
> 
> 时间：2013-02-26T12:21:46.660
> 
> 标签：opengl, glsl

我正在尝试在着色器中获取片段世界位置。为此，我创建了一个 fbo，使用格式 GL_RGB32F 将纹理绑定到它，并将其附加到 GL_COLOR_ATTACHMENT0：

```
glGenFramebuffers(1,&fbo);
glBindFramebuffer(GL_FRAMEBUFFER,fbo);

glGenTextures(1,&texture);
glBindTexture(GL_TEXTURE_2D,texture);
glTexImage2D(GL_TEXTURE_2D,0,GL_RGB32F,WINDOW_WIDTH,WINDOW_HEIGHT,0,GL_RGB,GL_FLOAT,NULL);
glFramebufferTexture2D(GL_FRAMEBUFFER,GL_COLOR_ATTACHMENT0,GL_TEXTURE_2D,texture,0); 
```

顶点和片段着色器如下所示：

顶点着色器

```
#version 330
layout(location = 0) in vec3 vertexposition;

out vec4 position; 

uniform mat4 MVP;
uniform mat4 Model;

void main()
{
    gl_Position = MVP*vec4(vertexposition,1.0f);
    position = Model*vec4(vertexposition,1.0f);
} 
```

片段着色器

```
#version 330
in vec4 position;

out vec3 outputPosition;

void main()
{
    outputPosition = position.xyz;
} 
```

如果我是对的，由于顶点世界位置的插值，outputPosition 具有世界坐标中的片段位置。

在调用 glDrawArrays 之后，我读取了颜色缓冲区，具有以下片段世界位置：

```
glReadBuffer(GL_COLOR_ATTACHMENT0);
glReadPixels(0,0,WINDOW_WIDTH,WINDOW_HEIGHT,GL_RGB,GL_FLOAT,pixelInfo); 
```

但是当我绘制这些点时，它们与我的对象的位置不匹配。我找不到错误在哪里。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T14:57:21.480

我已经使用深度缓冲区解决了问题。错误在于我识别绘制的像素的方式。

# html - 填充浮动 div 而不移动其他 div

> ID：15089020
> 
> 赞同：1
> 
> 时间：2013-02-26T12:21:48.440
> 
> 标签：html, css

我试图将“back” div 左填充 30px，但没有从中心轻推“head” div。似乎无法正确处理。[http://jsfiddle.net/bZeD9/](http://jsfiddle.net/bZeD9/)

```
<div class='header top'>
    <div class="back">&lt;</div>
    <div class="head">HEADER HERE</div>
</div>

.header {
    background: none repeat scroll 0 0 #4A4A4A;
    text-align: center;
    color: #F1F1F1;
    line-height: 45px;
    padding-top: 3px;
    font-size: 20px;
    font-weight: 100;
}

.back {
    float: left;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:24:12.243

利用`position:absolute`

```
.back {
    position:absolute;
    left:30px; 
} 
```

**[演示](http://jsfiddle.net/q9aVK/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:25:28.687

将其定位设置为相对并添加 left: 30px;

```
.back {
    float: left;
    position: relative;
    left: 30px;
} 
```

[http://jsfiddle.net/jeffshaver/bZeD9/4/](http://jsfiddle.net/jeffshaver/bZeD9/4/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:34:09.747

添加

```
padding: 3px 30px 0; 
```

到 .header 的 css

然后你将在右侧和左侧都有填充，所以如果你出于某种原因在标题 div 的右端放置一些东西，那也会自动定位到距离边缘 30px 的位置。我还将 3px 添加到顶部，因为你已经有了它，所以你可以删除`padding-top`.

我通常宁愿使用这种解决方案而不是绝对定位，这也有效，但更静态，我发现更难维护和改变，这是我个人的看法。

# c# - C# Visual Studio TCP 通道已注册

> ID：15089026
> 
> 赞同：2
> 
> 时间：2013-02-26T12:22:01.893
> 
> 标签：c#, .net-remoting

我正在使用 TCP 通道连接创建具有 2 个不同控制台应用程序的聊天应用程序，但是当我运行客户端控制台或服务器控制台时，我得到“TCP 已注册”

我有 4 个代码项目。

1.  界面
2.  远程对象
3.  客户
4.  服务器

下面是接口代码：

```
using System;

public interface IRemoteObject
{
    void GetData(string myString);        

} 
```

这是远程对象代码：

```
using System;

public class RemoteObject : MarshalByRefObject,IRemoteObject
{
    //Server Method
    public RemoteObject()
    {
        Console.WriteLine("Server text");                 
    }

    //Client Method
    public void GetData(string myString)
    {
        Console.WriteLine(myString);
    }
} 
```

这是客户端代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;
using System.Threading;

namespace ClientConsole
{
    public class Client
    {
        public static void Main()
        {

            ThreadStart client1 = new ThreadStart(ClientSide);
            Thread client2 = new Thread(client1);
            ThreadStart server1 = new ThreadStart(ServerSide);
            Thread server2 = new Thread(server1);
            client2.Start();
            server2.Start();           

        }
        public static void ClientSide()
        {
            Console.WriteLine("ClientSide....");
            TcpChannel ch2 = new TcpChannel();
            ChannelServices.RegisterChannel(ch2, true);

            IRemoteObject objRemoteRef = (IRemoteObject)Activator.GetObject(typeof(IRemoteObject), "tcp://127.0.0.1:2233/M");

            while (true)
            {
                string x = Console.ReadLine();
                objRemoteRef.GetData(x);

            }

        }

        public static void ServerSide()
        {
            Console.WriteLine("ServerSide....");
            TcpChannel ch2 = new TcpChannel(2233);
            ChannelServices.RegisterChannel(ch2, true);

            RemotingConfiguration.RegisterWellKnownServiceType(typeof(RemoteObject), "M", WellKnownObjectMode.Singleton);

        }

    }

} 
```

这是服务器代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Runtime;
using System.Runtime.Remoting;
using System.Runtime.Remoting.Channels;
using System.Runtime.Remoting.Channels.Tcp;
using System.Threading;

namespace ServerConsole
{
    public class Server
    {
        public static void Main()
        {
            ThreadStart server1 = new ThreadStart(ServerSide);
            Thread server2 = new Thread(server1);
            ThreadStart client1 = new ThreadStart(ClientSide);
            Thread client2 = new Thread(client1);
            server2.Start();
            client2.Start();

        }

        public static void ServerSide()
        {
            Console.WriteLine("ServerSide....");
            TcpChannel ch2 = new TcpChannel();
            ChannelServices.RegisterChannel(ch2, true);

            IRemoteObject objRemoteRef = (IRemoteObject)Activator.GetObject(typeof(IRemoteObject), "tcp://127.0.0.1:2333/M");

            while (true)
            {
                string x = Console.ReadLine();
                objRemoteRef.GetData(x);

            }
        }

        public static void ClientSide()
        {
            Console.WriteLine("ClientSide....");
            TcpChannel ch1 = new TcpChannel(2233);
            ChannelServices.RegisterChannel(ch1, true);

            RemotingConfiguration.RegisterWellKnownServiceType(typeof(RemoteObject), "M", WellKnownObjectMode.Singleton);

            Console.ReadLine();

        }
    }
} 
```

请帮助，我在这里很新，我不确定我写的帖子是否正确，请理解。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:01:29.663

试试这个：

客户端

```
public class Client
{
    public static void Main(string[] args)
    {

        ThreadStart client1 = new ThreadStart(ClientSide);
        Thread client2 = new Thread(client1);
        ThreadStart server1 = new ThreadStart(ServerSide);
        Thread server2 = new Thread(server1);
        client2.Start();
        server2.Start();
    }
    public static void ClientSide()
    {
        Console.WriteLine("ClientSide....");
        TcpChannel ch2 = (TcpChannel)Helper.GetChannel(2333, true);
        ChannelServices.RegisterChannel(ch2, false);
        IRemoteObject objRemoteRef = (IRemoteObject)Activator.GetObject(
            typeof(IRemoteObject), "tcp://127.0.0.1:2233/M");
        while (true)
        {
            string x = Console.ReadLine();
            objRemoteRef.GetData(x);
        }
    }
    public static void ServerSide()
    {
        Console.WriteLine("ServerSide....");
        TcpChannel ch2 = (TcpChannel)Helper.GetChannel(0, true);
        ChannelServices.RegisterChannel(ch2, false);
        RemotingConfiguration.RegisterWellKnownServiceType(
            typeof(RemoteObject), "M", WellKnownObjectMode.Singleton);
    }
} 
```

服务器：

```
public class Server
{
    public static void Main()
    {
        ThreadStart server1 = new ThreadStart(ServerSide);
        Thread server2 = new Thread(server1);
        ThreadStart client1 = new ThreadStart(ClientSide);
        Thread client2 = new Thread(client1);
        server2.Start();
        client2.Start();
    }
    public static void ServerSide()
    {
        Console.WriteLine("ServerSide....");
        TcpChannel ch2 = (TcpChannel)Helper.GetChannel(2233, true);
        ChannelServices.RegisterChannel(ch2, false);
        IRemoteObject objRemoteRef = (IRemoteObject)Activator.GetObject(
            typeof(IRemoteObject), "tcp://127.0.0.1:2333/M");
        while (true)
        {
            string x = Console.ReadLine();
            objRemoteRef.GetData(x);
        }
    }
    public static void ClientSide()
    {
        Console.WriteLine("ClientSide....");
        TcpChannel ch1 = (TcpChannel)Helper.GetChannel(0, true);
        ChannelServices.RegisterChannel(ch1, false);
        RemotingConfiguration.RegisterWellKnownServiceType(
            typeof(RemoteObject), "M", WellKnownObjectMode.Singleton);
        Console.ReadLine();
    }
} 
```

`Helper`班级_

```
public class Helper
{
    public static IChannel GetChannel(int tcpPort, bool isSecure)
    {
        BinaryServerFormatterSinkProvider serverProv =
            new BinaryServerFormatterSinkProvider();
        serverProv.TypeFilterLevel = TypeFilterLevel.Full;
        IDictionary propBag = new Hashtable();
        propBag["port"] = tcpPort;
        propBag["typeFilterLevel"] = TypeFilterLevel.Full;
        propBag["name"] = Guid.NewGuid().ToString();
        if (isSecure)
        {
            propBag["secure"] = isSecure;
            propBag["impersonate"] = false; 
        }
        return new TcpChannel(
            propBag, null, serverProv);
    }
} 
```

# html - 通过 JS 将文本从 XML 解析为 HTML 时维护换行符

> ID：15089030
> 
> 赞同：0
> 
> 时间：2013-02-26T12:22:18.430
> 
> 标签：html, xml-parsing, newline

所以正如标题所说的那样，我试图在 html 中显示一些文本，因为它出现在 XML 中，但是换行符消失了。这是我的代码：

```
var descripcion = document.getElementById("description");
 descripcion.innerHTML = fichas[i].getElementsByTagName("descripcion")[0].childNodes[0].nodeValue; 
```

XML:

```
...
<descripcion>Descubre los secretos de la elaboración del txakoli, visitando nuestros viñedos y nuestra bodega familiar “Magalarte Lezama” fundada en el siglo XIX; posiblemente una de las pocas bodegas que se mantiene desde entonces.

Tras cuatro generaciones heredando, guardando y mejorando pequeños secretos, apostamos hoy en día por la innovación y el desarrollo, logrando un producto de calidad actual, manteniendo el espíritu del pasado.

</descripcion> 
```

正如我所说，当我在 html 中显示该文本时，换行符消失了，我尝试
在 xml 中添加但不起作用，它的行为就像另一个 xml 标记。任何解决方案？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:51:53.077

您可能希望在`white-space`具有 id 的元素上使用 CSS 属性`description`：

```
<div id="description" style="white-space: pre-wrap">
</div> 
```

这应该保留空格和新行，但仍会换行长行。

# design-patterns - 可以使用哪种设计模式来连接复合材料的元素？

> ID：15089035
> 
> 赞同：3
> 
> 时间：2013-02-26T12:22:28.147
> 
> 标签：design-patterns, builder, composite

如果您有一个复合设计模式（或任何图形/节点类型系统）的实现，哪种设计模式最能描述连接节点和在类实例之间创建链接的过程？

我当前的工作示例使用工厂模式来构造每个类实例，但现在我正在考虑将它们连接到单独的代码区域或基于文件中的数据。

我想知道它是否可能是“构建器”模式，但我看到的示例非常简单，我发现根据这些示例将模式应用于我的域是一个很大的跳跃。也许还有另一种模式更适用于我的领域，并参考了复合模式。示例和参考将不胜感激。

非常感谢 D

编辑：更多的调查发现了一个关于创造模式的好博客。他们说，根据经验，“建造者”经常建造复合材料。

[http://sourcemaking.com/creational_patterns](http://sourcemaking.com/creational_patterns)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T06:33:39.543

如果您希望一次构建整个复合元素，builder 是一个不错的选择。例如，如果您在城市中构建道路图并且希望构建整个城市 - 使用构建器模式。您可以将子构建器添加到您的构建器以添加邻域，这样您的构建器类就不会太大 - 只需为 bulder 进行复合。但是如果你想在复合已经存在之后添加元素，我建议如下：如果你知道在哪里添加元素，你可以为你的复合提供迭代器，并为带有索引的迭代器提供 add 方法或你希望添加的新位置你的元素。例如，如果您对树进行了排序，则迭代器将具有 add 函数，该函数将根据元素在树中的位置知道将元素添加到何处。另一种选择，如果您需要将元素添加到您不需要的复合材料中' 每个地方都没有，例如，你用街道建造城市，你希望在最短的街道旁边添加街道。好吧，在这种情况下，我可能会使用谓词或某种过滤器，它们将是复合类型中的静态内部类。

# jqgrid - jqgrid formatter 'actions' - 更改编辑按钮样式

> ID：15089037
> 
> 赞同：0
> 
> 时间：2013-02-26T12:22:33.203
> 
> 标签：jqgrid, styles, formatter

我正在使用带有格式化程序“操作”的 jqgrid，在每一行上显示一个“编辑”按钮。它运行良好，但现在我想显示一个“更新”链接，而不是显示默认的编辑按钮。那可能吗？

我的 colModel 看起来像：

```
 colModel: [
            { name: 'Listname', formatter: displayListName, width: 270, sortable: false },
            { name: 'OrigListname', hidden: true, editable: true, editrules: {edithidden:true} },
            { name: 'NumOfContacts', hidden: true },
            { name: 'IsPrivate', hidden: true, editable: true, editrules: { edithidden: true }, edittype: 'checkbox' },
            { name: 'CanUpdate', hidden: true },
            { name: 'Recipients', formatter: displayRecipients, width: 100, sortable: false },
            { name: 'Update', formatter: 'actions', width: 100, sortable: false,
                formatoptions:{
                    keys: true,
                    editbutton: true,
                    editformbutton: true,
                    delbutton: false,
                    editOptions: {
                        closeOnEscape: true,
                        closeAfterAdd: true,
                        viewPagerButtons: false,
                        closeAfterEdit: true,
                        afterSubmit: function (response, postdata) {
                            var r = $.parseJSON(response.responseText);
                            return [r.success, r.Description, null];
                        }
                    };
                 }
            },                
            { name: 'Import', formatter: displayImport, width: 100, sortable: false },
            { name: 'Export', formatter: displayExport, width: 100, sortable: false }
        ] 
```

提前谢谢你，克伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:40:24.610

`<div>`用于`formatter: "action"`链接 ( `<a>`)的替换不是那么容易。我认为您必须使用自定义格式化程序来实现要求。[我建议您从答案](https://stackoverflow.com/a/13765086/315935)中查看演示。我认为您可以以紧密的方式实现您的要求。

# java - 如何用UML中的接口表示X接口关系的Java属性？

> ID：15089041
> 
> 赞同：1
> 
> 时间：2013-02-26T12:22:44.313
> 
> 标签：java, uml, modeling

在我的 Java 类中，我有一些类似的东西`private InterfaceName attributeName`，这意味着它`attributeName`可能具有实现的任何类的对象`InterfaceName`。

我如何在 UML 类图中表示这种**关系？**对于一个普通的类，我已经解释了聚合，但我怀疑这是否也适用于接口。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:29:00.143

In this context, the type of the field is the interface. In your UML you should have something like

```
variableName : InterfaceName 
```

This informs someone reading the UML diagram that this particular variable accepts objects that implement a particular interface.

# java - 用于连接特定 URL 的 Java 硬编码代理

> ID：15089043
> 
> 赞同：1
> 
> 时间：2013-02-26T12:22:47.807
> 
> 标签：java, web-services, proxy, axis2

我有一个 Web 应用程序，它必须连接到外部 Web 服务（使用 Axis 客户端）。我必须执行两件事：

*   允许 webapp 使用给定的 HTTP 代理进行外部通信（以授权 WS 客户端）
*   当我们通过 URI 执行本地调用时使用直接连接

    `http://localhost:7001/webApp/getImg?id=22`

请注意，如果我们使用系统属性（http.proxyHost 等）而不是 ProxySelector，它就像一个魅力。

但事情是所有本地呼叫都被路由到代理服务器，这是我不想要的。

所以，只是一个简单的问题——如何实现`ProxySelector`与使用代理系统属性时相同的执行方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:09:17.903

您还可以通过设置系统属性来实现此目的`http.nonProxyHosts=localhost`。如果你想用 a 来做，`ProxySelector`那么试试这样的

```
final Proxy PROXY = new Proxy(Proxy.Type.HTTP,
  new InetSocketAddress("my.proxy.server", 8080));
ProxySelector.setDefault(new ProxySelector() {
  public List<Proxy> select(URI u) {
    if(u != null && !"localhost".equals(u.getHost())) {
      return Arrays.asList(PROXY, Proxy.NO_PROXY);
    }
    else {
      return Collections.singletonList(Proxy.NO_PROXY);
    }
  }

  public void connectFailed(URI u, SocketAddress sa, IOException e) {
    // do nothing
  }
}); 
```

# c# - 在 ApiController 上执行 POST 时处理发送的 id 的最佳实践？

> ID：15089045
> 
> 赞同：2
> 
> 时间：2013-02-26T12:22:52.050
> 
> 标签：c#, asp.net, asp.net-web-api

考虑以下两个 POST 场景：

1.  `POST /localhost/api/`- 插入一个实体，返回 200
2.  `POST /localhost/api/1324`- 错误请求，返回 400

**处理场景 2 的最佳方法是什么？**

我是否什么都不做并假设使用我的 API 的开发人员会理解这是错误的？我是否在我的 POST 方法中添加代码来处理这个问题并告诉他们这是一个错误的请求？

我意识到返回一个错误的请求可能是最好的做法，这就是我最终实现的，但我觉得可能有更好的方法来实现这一点，但我还没有发现。

我当前的代码如下：

```
[HttpPost]
public HttpResponseMessage Post(MyEntity entity) {
  if(entity.Id != null)
      throw new HttpResponseException(HttpStatusCode.BadRequest);

  MyEntity saved = repository.Insert(entity);

  HttpResponseMessage response = Request.CreateResponse(HttpStatusCode.Created, saved);
  response.Headers.Location = new Uri(Request.RequestUri, new Uri(saved.Id.ToString(), UriKind.Relative));

  return response;
}

// Prevents any attempt to POST with a Guid in the url
[HttpPost]
public void Post(Guid Id) {
  throw new HttpResponseException(HttpStatusCode.BadRequest);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:38:18.687

你的所作所为似乎是有效的。虽然我有些怀疑我是否会这样做。

**更正**

我说过

> 如果您没有实现这个附加方法，那么路由将失败并且通常会返回 404。我很想将其保留为这种行为。

但你是对的：

要使其按上述方式运行，即默认为 404，您需要以下路由配置：

```
 config.Routes.MapHttpRoute(
            name: "DefaultCollectionApi",
            routeTemplate: "api/{controller}",
            defaults: new { },
            constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Post) }
            );

        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new {  },
            constraints: new { httpMethod = new HttpMethodConstraint(HttpMethod.Get, HttpMethod.Put, HttpMethod.Delete) }
            ); 
```

**稍微改进您现有的方法**

但是，如果您确实觉得需要开始监管动词和路由的组合，那么可能值得将此逻辑移动到 ActionFilterAttribute 中。

如果您在顶部添加此路由，那么它将 en 假设您`"id"`按惯例对所有路由使用，您可以快速组合一个过滤器，该过滤器`RouteValues`在键中查找值`id`并引发 400 异常。

```
public class ValidVerbAndRouteAttribute : ActionFilterAttribute
{
    public override void OnActionExecuted(HttpActionExecutedContext actionExecutedContext)
    {
        object id;
        if (actionExecutedContext.ActionContext.ActionArguments.TryGetValue("id", out id) &&
            actionExecutedContext.Request.Method == HttpMethod.Post)
        {
            throw new HttpResponseException(HttpStatusCode.BadRequest);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:25:59.607

您目前处理它的方式似乎是正确的。它是标准输入数据验证，如果在 RESTful 术语中验证失败，则使用 400 是正确的状态代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:41:45.840

您绑定的方式是正确的，但如果您愿意，还有另一种方式供您选择。您可以配置您的路线并声明应该调用具体操作，而不是您可以指定带有签名的操作，例如

```
[HttpPost]
public HttpResponseMessage PostEntity([FromBody]MyEntity entity) {...} 
```

这将使对该操作的任何其他签名的调用变得不可能并导致异常。

路线：

```
 config.Routes.MapHttpRoute(
            name: "ActionApi",
            routeTemplate: "api/{controller}/{action}/{id}",
            defaults: new { id = RouteParameter.Optional }); 
```

对于异常处理，我建议使用一个异常过滤器，其中包含一组异常类型的映射及其“HttpStatusCode”表示，根据您的喜好。

# leveldb - Java的Leveldb：迭代时删除

> ID：15089047
> 
> 赞同：0
> 
> 时间：2013-02-26T12:22:55.697
> 
> 标签：leveldb

我正在运行这个测试：

```
public class LeveldbTest {

@Test
public void test() throws IOException, InterruptedException {
    DBFactory factory = new Iq80DBFactory();

    Options opts = new Options();
    opts.cacheSize(4096);
    opts.compressionType(CompressionType.SNAPPY);
    opts.createIfMissing(true).writeBufferSize(4096);
    final DB db = factory.open(new File("target/leveldb"), opts);
    final AtomicLong counter = new AtomicLong();

    long start = System.currentTimeMillis();
    new Thread() {
        @Override
        public void run() {
            WriteOptions wo = new WriteOptions();
            wo.sync(true);
            while (true) {
                String key = UUID.randomUUID().toString();
                byte[] bytes = key.getBytes();
                System.out.println("putting: " + key);
                db.put(bytes, bytes, wo);
                counter.incrementAndGet();
            }
        }
    }.start();

    new Thread() {
        @Override
        public void run() {
            WriteOptions wo = new WriteOptions();
            ReadOptions ro = new ReadOptions();
            wo.sync(true);
            while (true) {
                DBIterator iterator = db.iterator(ro);
                if (iterator.hasNext()) {
                    Entry<byte[], byte[]> next = iterator.next();
                    byte[] key = next.getKey();
                    System.out.println("deleting: " + new String(key));
                    db.delete(key, wo);
                    counter.incrementAndGet();
                    try {
                        iterator.close();
                    } catch (IOException e) {
                    }
                }
            }
        }
    }.start();

    Thread.sleep(3000);
    System.out.println((double) counter.longValue() / (System.currentTimeMillis() - start));
}
} 
```

我期望密钥将从队列中删除，但在控制台中似乎只有一个相同的密钥被删除：

```
putting: a1ad4662-18c3-4085-af9d-a451dc3279c0
deleting: 004ef0c2-b278-42c6-9c85-4769d93d5b30 <-
putting: 6c4ee31d-2910-4870-acc5-962f9c40a573
deleting: 004ef0c2-b278-42c6-9c85-4769d93d5b30 <-
deleting: 004ef0c2-b278-42c6-9c85-4769d93d5b30 <-
putting: 63e2e438-3849-46e3-9ea0-1165f9356efb
deleting: 004ef0c2-b278-42c6-9c85-4769d93d5b30 <- 
```

我是否错误地使用了 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-08T22:29:33.373

正如您在使用迭代器时所观察到的，您必须在迭代之前使用 seekToFirst 或 seekToLast 将迭代器指向有效行。

我之前已经发现了这一点（困难的方式），它不会像您预期的那样抛出 ISE，您只会得到不一致的读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:57:23.293

事实证明，如果我在删除线程中调用 next() 之前调用 iterator.seekToFirst()，它的行为与我预期的一样。那么问题是如果我不寻找一个位置，迭代器指向哪里。

# perl - Perl打印精确位置

> ID：15089050
> 
> 赞同：0
> 
> 时间：2013-02-26T12:23:27.217
> 
> 标签：perl, alignment, printf

我有两个打印语句，一个接一个。

```
print("Number of cars");
printf("%10d","$somevariable");

print("Number of blue cars");
printf("%10d","$somevariable");

print("Number of  red cars");
printf("%10d","$somevariable"); 
```

我的问题是变量的值不会垂直对齐。它看起来像这样

```
Number of Cars       0
Number of blue Cars      0
Number of Red Cars       0 
```

有没有可能的方法将它们对齐到水平线上的某个点？例如，总是在右侧 80 个空格处打印所有内容？

编辑：输出到终端。

干杯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:26:33.913

在 printf 中包含标签：

```
printf("%-20s%10d\n","Number of cars", $somevariable)
printf("%-20s%10d\n","Number blue of cars", $someothervariable) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:51:36.550

对于更复杂的布局，请考虑[Text::SimpleTable](https://metacpan.org/module/Text%3a%3aSimpleTable)、[Text::Table](https://metacpan.org/module/Text%3a%3aTable)或[类似的](https://metacpan.org/search?q=text%20table)

# c++ - 如何传递信号回调（使用 boost::bind）

> ID：15089060
> 
> 赞同：0
> 
> 时间：2013-02-26T12:24:01.653
> 
> 标签：c++, boost, boost-bind, boost-signals, boost-signals2

我正在编写一个包装器`boost::signals2::signal`以获得更清洁、更易于使用的界面。这是我想出的：

```
#include <boost/signals2.hpp>

// Wrapper class template for boost::signals2::signal
template<typename T>
class Signal {
    typedef typename boost::signals2::signal<T> SignalType;
public:
    // Trigger the signal
    void operator() () { sig(); }

    // Attach a listener
    boost::signals2::connection operator+=(const typename SignalType::slot_type& slot)
        { return sig.connect(slot); }

private:
    SignalType sig;
};

class ClassThatGeneratesEvents {
public:
    void generateEvents(int n) {
        while (n-- > 0) {
            SomethingHappened();
        }
    }

    Signal<void ()> SomethingHappened;
};

void func()
{
    ;
}

class ClassThatListensForEvents {
public:
    ClassThatListensForEvents(ClassThatGeneratesEvents& ev) {
        received_count = 0;

        // This works
        ev.SomethingHappened += func;

        // This doesn't!
        ev.SomethingHappened += bind(&ClassThatListensForEvents::event_handler, this, _1);
    }

    void event_handler() {
        received_count++;
    }

    int received_count;
}; 
```

我不确定这是我能想到的最好的包装界面，并且让SomethingHappened成为公共成员可能会有一些缺点。虽然我不介意听听你对此的看法，但这不是这个问题的意义所在。

我想知道如何将回调传递给`+=`操作员。正如我在`ClassThatListensForEvents`函数回调中所写的那样，没有问题，但是使用结果`bind`会产生大量难以阅读的模板编译器错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:29:23.270

你的信号有一个`void()`签名，所以它不需要参数。您正在尝试分配一个带有`boost::bind`一个参数的对象（因为它使用`_1`），这是不兼容的。因此你得到一个错误。目前尚不清楚您期望`ev`参数`event_handler`来自何处。如果您绑定一个实际值而不是`_1`签名将是兼容的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:31:01.130

信号和回调的签名不同，我认为这是错误

# html - 可滚动div内的绝对位置div

> ID：15089062
> 
> 赞同：1
> 
> 时间：2013-02-26T12:24:07.887
> 
> 标签：html, css, positioning

我想要做的是将id为“bottom”的div修复到可滚动div（“Content”）的底部，但正如您所见，滚动div会导致它移动。

任何想法，我都可以用 JS 尝试不这样做。

干杯。

请参阅随附的 JSFiddle，[http://jsfiddle.net/Ed6XM/](http://jsfiddle.net/Ed6XM/)

```
<div style="height:500px">
    <div id="left">Left</div>
    <div id="content">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam laoreet
        nisi at purus ullamcorper viverra porttitor sit amet velit. Suspendisse
        blandit nisl nec mauris congue faucibus. Donec auctor congue tellus eget
        dignissim. Class aptent taciti sociosqu ad litora torquent per conubia
        nostra, per inceptos himenaeos. Sed cursus orci in libero faucibus et porta
        lectus molestie. Aliquam consectetur libero nec mi viverra varius. Sed
        adipiscing vehicula convallis. Nulla eget vestibulum tortor. Proin tellus
        dui, fermentum at pretium quis, adipiscing et purus. Nunc eget quam odio.
        Donec interdum consectetur pharetra. Donec porttitor arcu id magna porttitor
        eu pellentesque lacus placerat. Vivamus gravida urna cursus est tristique
        id iaculis sem sagittis. Etiam vulputate feugiat lacus vel suscipit. Nullam
        ut sagittis est. Pellentesque auctor mattis nibh quis consequat. Suspendisse
        pellentesque, quam non suscipit faucibus, augue nisl bibendum est, vitae
        lacinia neque odio non quam. Nulla facilisi. Pellentesque id quam justo,
        accumsan bibendum dui. Sed elementum viverra diam, in laoreet tortor aliquam
        eu. Nunc sagittis libero at justo pellentesque nec sodales orci condimentum.
        Duis id nunc quam, eu dapibus odio.
        >Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam laoreet
        nisi at purus ullamcorper viverra porttitor sit amet velit. Suspendisse
        blandit nisl nec mauris congue faucibus. Donec auctor congue tellus eget
        dignissim. Class aptent taciti sociosqu ad litora torquent per conubia
        nostra, per inceptos himenaeos. Sed cursus orci in libero faucibus et porta
        lectus molestie. Aliquam consectetur libero nec mi viverra varius. Sed
        adipiscing vehicula convallis. Nulla eget vestibulum tortor. Proin tellus
        dui, fermentum at pretium quis, adipiscing et purus. Nunc eget quam odio.
        Donec interdum consectetur pharetra. Donec porttitor arcu id magna porttitor
        eu pellentesque lacus placerat. Vivamus gravida urna cursus est tristique
        id iaculis sem sagittis. Etiam vulputate feugiat lacus vel suscipit. Nullam
        ut sagittis est. Pellentesque auctor mattis nibh quis consequat. Suspendisse
        pellentesque, quam non suscipit faucibus, augue nisl bibendum est, vitae
        lacinia neque odio non quam. Nulla facilisi. Pellentesque id quam justo,
        accumsan bibendum dui. Sed elementum viverra diam, in laoreet tortor aliquam
        eu. Nunc sagittis libero at justo pellentesque nec sodales orci condimentum.
        Duis id nunc quam, eu dapibus odio.
        >Lorem ipsum dolor sit amet, consectetur adipiscing elit. Aliquam laoreet
        nisi at purus ullamcorper viverra porttitor sit amet velit. Suspendisse
        blandit nisl nec mauris congue faucibus. Donec auctor congue tellus eget
        dignissim. Class aptent taciti sociosqu ad litora torquent per conubia
        nostra, per inceptos himenaeos. Sed cursus orci in libero faucibus et porta
        lectus molestie. Aliquam consectetur libero nec mi viverra varius. Sed
        adipiscing vehicula convallis. Nulla eget vestibulum tortor. Proin tellus
        dui, fermentum at pretium quis, adipiscing et purus. Nunc eget quam odio.
        Donec interdum consectetur pharetra. Donec porttitor arcu id magna porttitor
        eu pellentesque lacus placerat. Vivamus gravida urna cursus est tristique
        id iaculis sem sagittis. Etiam vulputate feugiat lacus vel suscipit. Nullam
        ut sagittis est. Pellentesque auctor mattis nibh quis consequat. Suspendisse
        pellentesque, quam non suscipit faucibus, augue nisl bibendum est, vitae
        lacinia neque odio non quam. Nulla facilisi. Pellentesque id quam justo,
        accumsan bibendum dui. Sed elementum viverra diam, in laoreet tortor aliquam
        eu. Nunc sagittis libero at justo pellentesque nec sodales orci condimentum.
        Duis id nunc quam, eu dapibus odio.
        <div id="bottom">sds</div>
    </div>
</div>

#left {
    width:20%;
    float:left;
    border:1px solid black;
    height:100%;
}
#content {
    margin-left:20%;
    border:1px solid yellow;
    height:100%;
    position:relative;
    overflow:auto;
    margin-bottom:20px;
}
#bottom {
    position:absolute;
    bottom:0;
    left:0;
    right:0;
    background-color:red;
    height:20px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:28:50.150

If you want to scroll the bottom div along, than you need `position: fixed` and not ~~`position: absolute`~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-11T11:35:20.557

将要滚​​动的内容包裹在另一个 DIV 中，并将其放置在底部可滚动区域的后面。

```
#scrollable {
    overflow: auto;
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
} 
```

[http://jsfiddle.net/Ed6XM/10/](http://jsfiddle.net/Ed6XM/10/)

或者滚动条不在固定元素下方的稍微好一点的版本：

[http://jsfiddle.net/Ed6XM/11/](http://jsfiddle.net/Ed6XM/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:29:33.910

change bottom css to this ... this will do it:

```
 #bottom {
        background-color:red;
        height:20px;
    } 
```

You don't need to determine position at all.

here is the updated JsFiddle -> [http://jsfiddle.net/Ed6XM/1/](http://jsfiddle.net/Ed6XM/1/)

# iphone - 如何从 DIcom 图像中提取像素数据以在 iPhone 中查看

> ID：15089065
> 
> 赞同：1
> 
> 时间：2013-02-26T12:24:09.623
> 
> 标签：iphone, ios, ipad, image-processing, dicom

我一直在使用以下代码使用 DCMTK 框架读取 dicom 图像，以在 UIImage 视图中显示它。

```
NSString *dcmFilename   = [[NSBundle mainBundle] pathForResource:@"1" ofType:@"dcm"];
 const void* buffer = dcmFilename;

// Set the dimensions of the current context
size_t width = 250; // set manually, but correct
size_t height = 252;

// 1 byte per component
size_t bitsPerComponent = 8;

bitsPerComponent *= 2; // short = 2 byte

size_t bitsPerPixel, bytesPerRow;
CGColorSpaceRef colorSpace;
CGBitmapInfo bitmapInfo;
CGDataProviderRef theDataProvider;
CFDataRef theDataReference;
bool shouldInterpolate = NO;
CGColorRenderingIntent theIntent;

bitsPerPixel = bitsPerComponent * 1; // because of grayscale image
colorSpace = CGColorSpaceCreateDeviceGray();
bitmapInfo = kCGImageAlphaNone | kCGBitmapByteOrder32Big;

// cg data provider to build the cg image
const UInt8* rawData = static_cast<const UInt8*>(buffer);

// For some reason initiating a CGImage uses BITS per pixel, so we need to divide by 8 to get BYTES
// per pixel
bytesPerRow = (bitsPerPixel/8) * width;

theDataReference = CFDataCreate(NULL,
                                rawData,
                                (bytesPerRow*height));

theDataProvider = CGDataProviderCreateWithCFData(theDataReference);

// Finally create the image reference
CGImageRef theImageRef = CGImageCreate(width,
                                       height,
                                       bitsPerComponent,
                                       bitsPerPixel,
                                       bytesPerRow,
                                       colorSpace,
                                       bitmapInfo,
                                       theDataProvider,
                                       nil,
                                       shouldInterpolate,
                                       theIntent);

// Construct an output image
UIImage *myImage = [UIImage imageWithCGImage:(theImageRef)];
NSLog(@"image-- %@", myImage);
patientImageView.image = myImage; 
```

我得到这样的输出。我在处理 dcm 图像时哪里出错了？？？![在此处输入图像描述](../Images/1e8eec228becf500958173c74ea6e1cd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T16:54:22.147

我的猜测是图像被压缩。默认情况下，DCMTK 仅支持某些形式的压缩。例如，默认情况下不支持 JPEG2000。检查图像的传输语法，看它是否是 DCMTK 支持的压缩格式。有关传输语法的更多信息，请参见[此处](http://www.medicalconnections.co.uk/kb/Transfer_Syntax)。

# c# - 使用查询进行批量更新 - C# 和 ORacle

> ID：15089066
> 
> 赞同：0
> 
> 时间：2013-02-26T12:24:09.993
> 
> 标签：c#, oracle11g

我在 C#.Net 和 Oracle、Windows 应用程序中工作。在我的数据集中，我有大约 1500 条记录。使用 for 循环，我需要将这些记录更新到数据库中。循环正确执行。第一次更新了第一条记录。每当循环进入第二行时，什么都不会发生。我没有收到任何错误。

这是我的更新代码

```
log.Debug("Update Starts..");
            OracleTransaction oraTransaction = BeginTransaction();
            string Zip = string.Empty;
            StringBuilder updateSql = new StringBuilder();
            updateSql.Append("UPDATE STORE SET ");
            updateSql.Append(" LAT = ").Append("'").Append(Latitude).Append("'");
            updateSql.Append(" ,LONG = ").Append("'").Append(Longitude).Append("'");
            updateSql.Append(" ,LOCATION_TYPE = ").Append("'").Append(locationType).Append("'");
            updateSql.Append(" ,UPDATE_TIMESTAMP = ").Append("'").Append(PopulatedDate).Append("'");
            updateSql.Append(" WHERE ");
            updateSql.Append(" STR_ID = ").Append("'").Append(StoreID).Append("'");
            int result =  OracleHelper.ExecuteNonQuery(ConnectionString, CommandType.Text, updateSql.ToString());
            CommitTransaction(oraTransaction);
            EndTransaction(oraTransaction);
            CloseConnection(oracleConnection);
            log.Debug("Update Ends.." + result);
            return 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:31:49.803

你可能想看看[这个](https://stackoverflow.com/questions/12464616/oracle-bulk-updates-using-odp-net)问题。它完全符合您的需要，但更加高效和安全。按照那里提供的链接了解有关批量操作的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:02:24.993

如果您在每个循环中只进行一次更新并且您正在执行 1500 次循环，那么我建议您跳过事务并在每个循环中关闭连接。

```
log.Debug("Update Starts..");
StringBuilder updateSql = new StringBuilder();
updateSql.Append("UPDATE STORE SET ");
updateSql.Append(" LAT = ").Append("'").Append(Latitude).Append("'");
updateSql.Append(" ,LONG = ").Append("'").Append(Longitude).Append("'");
updateSql.Append(" ,LOCATION_TYPE = ").Append("'").Append(locationType).Append("'");
updateSql.Append(" ,UPDATE_TIMESTAMP = ").Append("'").Append(PopulatedDate).Append("'");
updateSql.Append(" WHERE ");
updateSql.Append(" STR_ID = ").Append("'").Append(StoreID).Append("'");
int result =  OracleHelper.ExecuteNonQuery(ConnectionString, CommandType.Text, updateSql.ToString());
log.Debug("Update Ends.." + result);
return 1; 
```

# java - 根据先前运行的结果安排定期任务

> ID：15089070
> 
> 赞同：0
> 
> 时间：2013-02-26T12:24:21.797
> 
> 标签：java, multithreading, concurrency, scheduled-tasks

我需要每秒钟执行一次任务`X`。
我知道我可以使用`TimerTask`or`ScheduledThreadPool`但我的问题是这个任务取决于状态。
即任务将在 run 中执行的操作`B`取决于 run 的结果`A`。
编写此代码的最佳方法是什么？
也许做一个

```
while(true){  
  //do stuff  
  Thread.sleep(5000);  
} 
```

我在这里能做的最好吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:27:58.937

只需在 TimerTask 实现中定义您的状态，然后使用`Timer`：

```
TimerTask task = new TimerTask ()
{
    private int state = 0;

    @Override
    public void run ()
    {
        System.out.println ("State is: " + state);
        state += 1;
    }
};

new Timer ().schedule (task, 0L, 1000L); 
```

这将永远每秒运行一次任务（每 1000L 毫秒）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:34:11.220

我认为您可以将 a`Timer`与 a 一起使用`TimerTask`：

```
Timer timer = new Timer();
TimerTask task = new TimerTask() {
    @Override
    public void run() {
        // Some task
    }
};
timer.schedule(task, 10000, 10000); 
```

在初始第一次`task`延迟.`10s``10s`

根据文档[`Timer.schedule`](http://docs.oracle.com/javase/7/docs/api/java/util/Timer.html#schedule%28java.util.TimerTask,%20long,%20long%29)，此方法

> 安排指定任务以重复固定延迟执行，在指定延迟后开始。随后的执行以大约固定的时间间隔进行，间隔指定的时间段。

# mysql - 为什么我不能使用名称检查在 mysql 中创建表

> ID：15089085
> 
> 赞同：3
> 
> 时间：2013-02-26T12:25:14.213
> 
> 标签：mysql

我想创建一个表检查，但我不知道为什么它不在名称检查中创建。我想如果我在命令中犯了任何错误，所以我更改为名称 check1 及其工作。我可以知道原因吗？

```
CREATE TABLE check(
     name  VARCHAR(100) NOT NULL,
   password VARCHAR(40) NOT NULL

   );
CREATE TABLE check1(
     name  VARCHAR(100) NOT NULL,
   password VARCHAR(40) NOT NULL

   ); 
```

![在此处输入图像描述](../Images/b3b0b8b57fbe148adb6b46d6411225fb.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:27:09.310

`check`是保留字。

[您可以在MySQL 保留字](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)中查看整个列表

**编辑**
为了改进我的答案（我将来可能需要检查它），并且来自@cja answer的信息，也可以像这样包装表名：

```
`check` 
```

在这种情况下，名称不被视为保留字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:27:13.230

check 是 MySQL 中的保留字。

尝试

```
CREATE TABLE `check` (
  name VARCHAR(100) NOT NULL,
  password VARCHAR(40) NOT NULL
); 
```

但是，如果您选择其他名称，对您来说会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:26:36.187

[http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.5/en/reserved-words.html)

“CHECK”是保留字之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:26:40.633

MySQL 有一组保留字。CHECK 就是其中之一。

[http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T12:29:46.083

check 是 mysql 中的保留字，所以你不能创建名为“check”的表

CHECK 约束用于限制可以放在列中的值范围。

# netsuite - NetSuite - 如何为联系人分配多个角色

> ID：15089087
> 
> 赞同：0
> 
> 时间：2013-02-26T12:25:21.673
> 
> 标签：netsuite

我需要能够为联系人分配多个角色，而不仅仅是唯一一个。现在我正在使用下一个代码为联系人设置角色：

```
 //get the internal ID of created contact
            var contactInternalId = ((RecordRef) response.baseRef).internalId;

            //set roles
            var attachContact = new AttachContactReference();
            attachContact.attachTo = new RecordRef
                {
                    type = RecordType.customer,
                    typeSpecified = true,
                    internalId = customerId
                };
            attachContact.contact = new RecordRef {internalId = contactInternalId};
            attachContact.contactRole = new RecordRef {internalId = role};

            var resp = _service.attach(attachContact); 
```

我看不到为联系人设置多个角色的方法（与权限不同，我可以使用 MultiSeceltCustomFieldRef）。

我试图搜索互联网，但那里没有太多信息。

我会很感激任何帮助，谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:23:21.943

您可以多次调用 attach 来分配多个角色。

# jquery-ui - jquery自动完成在struts 2中不起作用

> ID：15089088
> 
> 赞同：0
> 
> 时间：2013-02-26T12:25:23.857
> 
> 标签：jquery-ui, jquery

我正在使用 jquery ui 进行自动完成。当我有调试时它不被称为动作

```
jQuery("#industrySearch").autocomplete({
        source: function(request, response){
            jQuery.post("searchIndustryaction.action", {data:request.term}, function(data){     
              response($.map(data, function(item) {
              return {
                label: item.id,
                value: item.name
              }
              }))
            }, "json");
          },
          minLength: 2,
          dataType: "json",
          cache: false,
          focus: function(event, ui) {
            return false;
          },
          select: function(event, ui) {
             this.value = ui.item.label;
             return false;
          }
    }); 
```

# c# - 在 C# 中设置 EMGU 库时出现异常

> ID：15089089
> 
> 赞同：1
> 
> 时间：2013-02-26T12:25:25.580
> 
> 标签：c#, .net, visual-c#-express-2010, emgucv

我正在尝试为我的 C# 项目设置 EMGU 库。我正在关注此链接[http://file.emgu.com/wiki/index.php/Setting_up_EMGU_C_Sharp](http://file.emgu.com/wiki/index.php/Setting_up_EMGU_C_Sharp)。

我被困在：**x64 Architecture 和 EMGU.CV.Invoke Exception**步骤。我正在使用 Visual C# 2010 Express 版本，平台目标未显示 x64 选项。我试图检查显示高级构建配置，然后运行我的项目，但它抛出类型初始化错误，内部异常：**“无法加载 DLL 'opencv_core242'：找不到指定的模块。（来自 HRESULT 的异常：0x8007007E）”** . 但是根据上面的链接，它应该抛出错误，并带有“InnerException”“尝试加载格式不正确的程序......”。

在下一行中抛出异常。

```
cap = new Capture(0); 
```

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T08:05:21.383

这个对我有用：

只需在 debug\ 中创建一个名为“x64”的目录，然后将 opencv_xxx.dll 复制到这个“x64”文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:36:13.223

看起来更像是找不到opencv dll。它们在运行时被查找。您可以检查BIN\Debug 文件夹中是否存在**opencv_core242.dll文件吗？**如果我记得它应该与 Emgu dll 的文件并排。

您必须包含 OpenCV dll 并确保将它们复制到输出目录。如果您使用的是 x64 版本的 EmguCV，那么您还需要 x64 版本的 opencv。

我[在 github 上有一个测试项目](https://github.com/hoonzis/Silverlight-Face-Recognition)，它使用 DLL 的 32 位 dll 二进制文件。我记得我被迫使用 x64 版本的 DLL 创建另一个版本，以便能够部署到 Azure（仅运行 x64）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T10:29:36.320

是的 - 你肯定需要在 bin/Debug 文件夹中包含 opencv_core242.dll （如果这是你的输出路径！）和你的项目中。

请记住，opencv_core242.dll 依赖于其他 DLL。确保您也将它们全部包含在内，这应该可以解决您的问题。如果您找不到依赖于 opencv_core242.dll 的 DLL，请尝试下载 Dependency Walker。它可以帮助您在构建所有依赖模块的分层树形图时找到您的依赖关系。

祝你好运！！！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-03T16:09:26.393

我认为您描述的问题不再与 Emgu.Cv 相关。

请尝试以下链接，这可能会解决您的问题：

[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/Vsexpressinstall/thread/e0ef4613-d90f-4eec-90db-41339ed31367/)

或者：

1.  重新安装 Visual C# 2010 Express
2.  升级到 Visual C# 2012 Express

# asp.net - 从表单访问数据

> ID：15089096
> 
> 赞同：1
> 
> 时间：2013-02-26T12:25:52.290
> 
> 标签：asp.net, asp.net-mvc-4

嗨，我必须用 ado.net 和 asp.net mvc 4 创建一个小项目。我现在必须将数据插入数据库，如果我能弄清楚如何访问发布的数据。

这是我的代码：

```
public ActionResult AddBook()
{
    return View(books);
}

@using (Html.BeginForm()) {
@Html.ValidationSummary(true)

<fieldset>
    <label for="BookName">Book Name:</label><input type="text" name="BookName" />
    <label for="Author">Author:</label><input type="text" name="Author" />
    <label for="Description">Book Name:</label><input type="text" name="BookName" />
    <label>Choose category:</label>
    <select>
          @foreach (DataRow row in Model.Categories.Rows) { 
                <option value="@row["Id"]">@row["CategoryName"]</option>
          }
    </select>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

如何访问发布的数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:50:10.493

由于您尚未将视图绑定到`Model`类，因此您可以使用`Request.Form[]`.

这就是你的做法：

```
public ActionResult AddBook(FormCollection collection)
{
    var bookname=collection.Get["BookName"];//here book name is the name of your input element
    ... similarily the rest
    ... do some database stuff
    return View();
} 
```

或者

```
public ActionResult AddBook()
{
    var bookname=Request.Form["BookName"];//here book name is the name of your input element
    ... similarily the rest
    ... do some database stuff
    return View();
} 
```

# ios - 本地化的 GKTurnBasedMatch 消息

> ID：15089101
> 
> 赞同：1
> 
> 时间：2013-02-26T12:26:08.113
> 
> 标签：ios, cocoa-touch, game-center, gamekit, gkturnbasedmatch

GKTurnBasedMatch 的 message 属性允许更改下一个参与者收到的推送通知中的文本，但是如何本地化呢？我尝试使用 Localizable.strings 但这不起作用。我知道常规推送通知可以轻松本地化，但由于 Game Center 可以完全控制这些通知，因此似乎无法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:53:59.393

几个月前我也遇到过同样的问题。

我最终创建了一个用户类，其中包含有关用户喜欢哪种本地化的信息，然后让其他玩家决定语言。

就像是：

*   player1：开始游戏
*   player1：通知player2昵称，首选语言等
*   player2：告知player1昵称，首选语言等。
*   player1：以首选语言向 player2 发送消息。

不是很优雅，但工作。

# api - 适用于 Google 应用脚本的 BloggerApp

> ID：15089103
> 
> 赞同：0
> 
> 时间：2013-02-26T12:26:16.010
> 
> 标签：api, google-apps-script, blogger

我正在尝试从 Google App Scripts 连接到 Blogger，似乎我可以通过 UrlFetchApp 直接访问 Blogger API 并开始解析 XML 等，但是我想知道是否已经有一个 BloggerApp 可以为我省去麻烦. 我在这篇文章中看到了它：

[错误：在 Google Apps 脚本中调用 GmailApp 对象时“无法访问库 BloggerApp”](https://stackoverflow.com/questions/12230538/error-no-access-to-library-bloggerapp-when-calling-gmailapp-object-in-google)

但我找不到任何其他参考。我想我可能会再次得到-1，因为在这里我在尝试自己编写整个东西之前询问图书馆的存在，但是考虑到我可能会做一个hacky的工作，它看起来确实首先在这里提问是明智和方便的 - 特别是因为 Google App Scripts 人员不主持自己的论坛并将所有问题都直接在这里提出。

当然，如果 BloggerApp 不存在，我会自己写，然后在这里发布......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:48:44.703

我不知道 Apps 脚本的 Blogger 库。你得自己写一个。

您可以使用[Picasa 示例](https://developers.google.com/apps-script/articles/picasa_google_apis)并将其更改为使用[Blogger GData API](https://developers.google.com/blogger/docs/2.0/developers_guide_protocol)。

如果您不需要 OAuth 或者您可以编写自己的 OAuth2（因为 Apps 脚本仅支持 OAuth1），您可以使用更新的[Blogger v3 API](https://developers.google.com/blogger/docs/3.0/using)。

# android - 导致 FC 的传感器问题

> ID：15089105
> 
> 赞同：0
> 
> 时间：2013-02-26T12:26:20.033
> 
> 标签：android

我在 Android 上的第一个应用程序有点问题。我一直在搜索有关如何使用传感器事件的所有信息，但是每次打开我的应用程序时我都会遇到 FC。

logcat 说：

```
02-26 05:45:55.291 I/ActivityManager(4935): Displayed me.das4ilor.fortunetellerfull/.MainActivity: +1s311ms
02-26 05:45:55.385 W/NetworkManagementSocketTagger(4935): setKernelCountSet(10056, 0) failed with errno -2
02-26 05:45:55.494 D/AndroidRuntime(19501): Shutting down VM
02-26 05:45:55.494 W/dalvikvm(19501): threadid=1: thread exiting with uncaught exception (group=0x40a031f8)
02-26 05:45:55.533 E/AndroidRuntime(19501): FATAL EXCEPTION: main
02-26 05:45:55.533 E/AndroidRuntime(19501): java.lang.NullPointerException
02-26 05:45:55.533 E/AndroidRuntime(19501):     at me.das4ilor.fortunetellerfull.MainActivity$1.onAccuracyChanged(MainActivity.java:58)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at android.hardware.SensorManager$ListenerDelegate$1.handleMessage(SensorManager.java:574)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at android.os.Handler.dispatchMessage(Handler.java:99)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at android.os.Looper.loop(Looper.java:137)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at android.app.ActivityThread.main(ActivityThread.java:4575)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at java.lang.reflect.Method.invokeNative(Native Method)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at java.lang.reflect.Method.invoke(Method.java:511)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
02-26 05:45:55.533 E/AndroidRuntime(19501):     at dalvik.system.NativeStart.main(Native Method)
02-26 05:45:55.533 W/ActivityManager(4935):   Force finishing activity me.das4ilor.fortunetellerfull/.MainActivity 
```

这是 .java ：

```
package me.das4ilor.fortunetellerfull;

import me.das4ilor.fortunetellerfull.R;
import android.hardware.Sensor;
import android.hardware.SensorEvent;
import android.hardware.SensorEventListener;
import android.hardware.SensorManager;
import android.os.Bundle;
import android.app.Activity;
import android.content.Context;
import android.widget.TextView;
import android.widget.Toast;
import java.util.Random;

public class MainActivity extends Activity {
public static final Random rgenerator = new Random();
private SensorManager mSensorManager;
private float mAccel;
private float mAccelCurrent;
private float mAccelLast; 
private TextView textView2;
private String[] myString;
Context context = this;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

         Toast.makeText(context, "Thank you for buying full version!", Toast.LENGTH_SHORT).show();

        mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
        mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
        mAccel = 0.00f;
        mAccelCurrent = SensorManager.GRAVITY_EARTH;
        mAccelLast = SensorManager.GRAVITY_EARTH;
    }

    private final SensorEventListener mSensorListener = new SensorEventListener() {

        public void onSensorChanged(SensorEvent se) {
          float x = se.values[0];
          float y = se.values[1];
          float z = se.values[2];
          mAccelLast = mAccelCurrent;
          mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));
          float delta = mAccelCurrent - mAccelLast;
          mAccel = mAccel * 0.9f + delta;
        }

        public void onAccuracyChanged(Sensor sensor, int accuracy) {

             myString =  getResources().getStringArray(R.array.String); 
             String q = myString[rgenerator.nextInt(myString.length)];
             textView2.setText(q);

        }
      };

      @Override
      protected void onResume() {
        super.onResume();
        mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
      }

      @Override
      protected void onPause() {
        mSensorManager.unregisterListener(mSensorListener);
        super.onPause();
      }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:43:44.647

您在 onAccuracyChanged 中有空指针异常（MainActivity.java 的第 58 行）。你有没有初始化过textView2？

# javascript - javascript：设置字段值并提交表单

> ID：15089106
> 
> 赞同：0
> 
> 时间：2013-02-26T12:26:27.170
> 
> 标签：javascript, forms

我想设置一个隐藏字段的值，然后用js提交表单。

这是我的js：

```
<script type="text/javascript">
<!--
function doSubmit(formid,fieldid,action) {
    var frm=getElementbyId(formid);
    var fld=getElementbyId(fieldid);
    fld.value = action;     
    frm.submit();
}
//-->
</script> 
```

这是我的 HTML：

```
<form name="mainform" id="mainform" method="post">
    <a href="#" onclick="doSubmit('mainform','dothis','send')">send</a>
    <input name="dothis" id="dothis" type="hidden" value="nothing" />
</form> 
```

结果：什么都没有发生。

当我`<a href="#" onclick="document.mainform.submit()"> ...`提交表单时（但是，当然，`dothis`未设置值。

这该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:30:11.603

什么是getElementById？？？这是您的自定义功能吗？另外我认为您的表格未提交。它只是调用同一个链接的 href="#"。将 href 值设置为

```
href="javascript:void(0);" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:32:06.760

更改您的 Js 功能：-

```
<script type="text/javascript">
<!--
    function doSubmit(formid, fieldid, action) {
        var frm = document.getElementById(formid);
        var fld = document.getElementById(fieldid);
        fld.value = action;
        frm.submit();
    }
    //-->
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:33:52.733

你必须使用

```
document.getElementById 
```

不是

```
getElementbyId (missing capital B) 
```

# sql - JOIN 和 ORDER BY 的基本 SQL 查询

> ID：15089113
> 
> 赞同：0
> 
> 时间：2013-02-26T12:26:45.167
> 
> 标签：sql

很长一段时间后只是在玩 SQL，我似乎陷入了以下困境：我有 2 个表**'User' = (U_ID, Name, Address)**和**'Book' = (B_ID, Name, Date_Issued, U_ID)**我需要显示数据库中所有用户最近发行的一本书。我写的查询是，

```
SELECT TOP 1 User.Name, Book.Name, Book.Date_Issued
FROM User,
INNER JOIN Book,
WHERE User.U_ID = Book.U_ID
ORDER BY Book.Date_Issued 
```

这甚至是模糊正确的吗（语法可能不是 100% 正确）？可以在具有日期/时间的列上使用 Order By 吗？我在这里先向您的帮助表示感谢 ：））

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:29:50.063

您需要按类型添加订单

```
ORDER BY Book.Date_Issued DESC 
```

SQL ORDER BY 子句，排序顺序默认为ASC 或升序。如果 Date_Issued 不是 Date 数据类型，则对其进行解析。

```
ORDER BY to_date(Date_Issued ,'mm/dd/yyyy') DESC //for sql. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:30:20.310

是的 order by 与日期/时间一起使用。更改您的代码如下：

```
SELECT TOP 1 User.Name, Book.Name, Book.Date_Issued
FROM User,
INNER JOIN Book,
WHERE User.U_ID = Book.U_ID
ORDER BY Book.Date_Issued DESC 
```

# iphone - 注册 Apple 推送通知

> ID：15089114
> 
> 赞同：1
> 
> 时间：2013-02-26T12:26:50.867
> 
> 标签：iphone, ios, objective-c, ipad, push-notification

我的问题是我使用了以下代码：

```
[[UIApplication sharedApplication] registerForRemoteNotificationTypes:
 UIRemoteNotificationTypeBadge |UIRemoteNotificationTypeAlert |UIRemoteNotificationTypeSound]; 
```

在

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

但它从不显示询问用户是否要接收推送通知的警报。

我在 App ID 上配置了我的配置文件，以便为开发启用推送通知。我下载了证书和配置文件并添加了它，然后在 iPad mini 上运行，我从未收到警报。我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:50:53.140

这是一个很棒的教程，这是您需要知道的全部内容：[http ://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:02:19.347

您是否收到询问您是否授权推送一次的警报？我注意到在第一次之后它不会再问了。如果是这种情况，请从您的设备中完全删除该应用程序，您可能会在第一次启动时再次看到它。

我个人建议使用 Parse.com 或 Urban Airship 进行推送 - 两者都非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T10:00:47.450

好的，鉴于您在失败回调中遇到的错误，可能是证书有问题。

请执行下列操作：

*   在 iOS 配置门户中，检查您是否有为推送通知启用的 App Id
*   仍在供应门户中，检查您正在使用的供应配置文件是否已连接到为推送通知启用的 App Id
*   在您的项目中，检查您当前目标的代码签名身份是否使用正确的配置文件

# php - Magento：如何获取类别页面标题属性（元标题）作为 html 页面标题

> ID：15089120
> 
> 赞同：0
> 
> 时间：2013-02-26T12:27:20.857
> 
> 标签：php, magento

在我的要求中，我需要将类别页面标题属性设置为我的类别页面标题，但对于某些我的不幸，它没有按预期设置我已经检查了magento wiki，它们应该是......

我尝试通过获取当前类别 ID，然后将其加载到头文件中以获取 meta_title 属性

```
$current_id=  Mage::getModel('catalog/layer')->getCurrentCategory()->getId();
$catobj = Mage::getModel('catalog/category')->load($current_id);
print_r($catobj);
echo $catobj->getMetaTitle(); 
```

但是 $catobj->getMetaTitle() 给出的是类别名称而不是类别页面标题:-(

我也尝试过打印类别 obj 并看到类别 meta_title 在那里

**[page_layout] => [is_active] => 1 [is_anchor] => 0 [include_in_menu] => 1 [landing_page] => [custom_use_parent_settings] => 0 [custom_apply_to_products] => 0 [available_sort_by] => [description] => [meta_keywords] => HP 喷墨打印机墨盒 [meta_description] => 以极低的价格提供高品质的 HP 打印机墨水和墨盒。[custom_layout_update] => [custom_design_from] => [custom_design_to] => [filter_price_range] => ) [_hasDataChanges:protected] => [_origData:protected] => 数组 ( [entity_id] => 261 [entity_type_id] => 3 [ attribute_set_id] => 3 [parent_id] => 259 [created_at] => 2012-12-11 13:00:28 [updated_at] => 2013-02-26 12:08:33 [path] => 1/13/ 520/259/261 [位置] => 248 [级别] => 2 [children_count] => 0 [name] => HP Inkjets [display_mode] => PRODUCTS [meta_title] => HP Inkjets [url_key] => hp-inkjets [url_path] => printer-consumables/hp/hp-inkjets [custom_design] => [page_layout] => [is_active] => 1 [is_anchor] = > 0 [include_in_menu] => 1 [landing_page] => [custom_use_parent_settings] => 0 [custom_apply_to_products] => 0 [available_sort_by] => [description] => [meta_keywords] => HP 喷墨打印机墨盒 [meta_description] => 高以极低的价格提供优质的 HP 打印机墨水和墨盒。[custom_layout_update] => [custom_design_from] => [custom_design_to] => [filter_price_range] => ) [_idFieldName:protected] => entity_id [_isDeleted:protected] => [_oldFieldsMap:protected] => 数组 () [_syncFieldsMap:protected ] => 数组 ( ) ) 打印机耗材/hp/hp-inkjets [custom_design] => [page_layout] => [is_active] => 1 [is_anchor] => 0 [include_in_menu] => 1 [landing_page] => [custom_use_parent_settings] => 0 [custom_apply_to_products ] => 0 [available_sort_by] => [description] => [meta_keywords] => HP 喷墨打印机墨盒 [meta_description] => 以极低的价格提供高品质的 HP 打印机墨水和墨盒。[custom_layout_update] => [custom_design_from] => [custom_design_to] => [filter_price_range] => ) [_idFieldName:protected] => entity_id [_isDeleted:protected] => [_oldFieldsMap:protected] => 数组 () [_syncFieldsMap:protected ] => 数组 ( ) ) 打印机耗材/hp/hp-inkjets [custom_design] => [page_layout] => [is_active] => 1 [is_anchor] => 0 [include_in_menu] => 1 [landing_page] => [custom_use_parent_settings] => 0 [custom_apply_to_products ] => 0 [available_sort_by] => [description] => [meta_keywords] => HP 喷墨打印机墨盒 [meta_description] => 以极低的价格提供高品质的 HP 打印机墨水和墨盒。[custom_layout_update] => [custom_design_from] => [custom_design_to] => [filter_price_range] => ) [_idFieldName:protected] => entity_id [_isDeleted:protected] => [_oldFieldsMap:protected] => 数组 () [_syncFieldsMap:protected ] => 数组 ( ) ) [custom_use_parent_settings] => 0 [custom_apply_to_products] => 0 [available_sort_by] => [description] => [meta_keywords] => HP 喷墨打印机墨盒 [meta_description] => 以极低的价格提供高品质的 HP 打印机墨水和墨盒。[custom_layout_update] => [custom_design_from] => [custom_design_to] => [filter_price_range] => ) [_idFieldName:protected] => entity_id [_isDeleted:protected] => [_oldFieldsMap:protected] => 数组 () [_syncFieldsMap:protected ] => 数组 ( ) ) [custom_use_parent_settings] => 0 [custom_apply_to_products] => 0 [available_sort_by] => [description] => [meta_keywords] => HP 喷墨打印机墨盒 [meta_description] => 以极低的价格提供高品质的 HP 打印机墨水和墨盒。[custom_layout_update] => [custom_design_from] => [custom_design_to] => [filter_price_range] => ) [_idFieldName:protected] => entity_id [_isDeleted:protected] => [_oldFieldsMap:protected] => 数组 () [_syncFieldsMap:protected ] => 数组 ( ) )**

并尝试过

```
echo $catobj->meta_title; 
```

但这也给出了相同的**类别名称**:-(请帮忙。

我已经调试了类别 obj

```
print_r($catobj->debug()); 
```

但这表明 meta_title 与 name 相同但它不是，它不同.. 真的很烦人

**数组（ [entity_id] => 261 [entity_type_id] => 3 [attribute_set_id] => 3 [parent_id] => 259 [created_at] => 2012-12-11 13:00:28 [updated_at] => 2013-02- 26 12:08:33 [路径] => 1/13/520/259/261 [位置] => 248 [级别] => 2 [children_count] => 0 [name] => HP Inkjets [display_mode] => PRODUCTS [meta_title] => HP Inkjets [url_key] => hp-inkjets [url_path] => printer-consumables/hp/hp-inkjets [is_active] => 1 [is_anchor] => 0 [include_in_menu] => 1 [custom_use_parent_settings ] => 0 [custom_apply_to_products] => 0 [meta_keywords] => HP 喷墨打印机墨盒 [meta_description] => 以极低的价格提供高品质 HP 打印机墨水和墨盒。) HP Inkjets**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-29T06:23:45.157

$catgId = 类别 ID

```
$catSel = Mage::getModel('catalog/category')->load($catgId); 
            $catDesc = array(
            'id' => $catgId,
            'desc' => $catSel->getDescription(),
            'url-key' => $catSel->getUrl_key(),
            'title' => $catSel->getMetaTitle()
        ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-01T05:47:28.343

好吧，通过互联网搜索后，我找到了解决我的问题的方法，即商店组错了。谢谢

# c++ - 替换 boost:: 互斥体

> ID：15089121
> 
> 赞同：0
> 
> 时间：2013-02-26T12:27:22.630
> 
> 标签：c++, visual-studio-2010, boost

我有一个带有此代码的程序：

```
mutable boost::condition_variable cvRun;

void CAteEngineInternal::RunSync()
{
    boost::mutex m;
    boost::unique_lock<boost::mutex> lock(m);
    Run();
    //wait for run to complete
    cvRun.wait(lock);
}

int  CAteEngineInternal::RunXSync(int FramesToRun)
{
    boost::mutex m;
    boost::unique_lock<boost::mutex> lock(m);
    int retVal = RunX(FramesToRun);
    //wait for run to complete
    cvRun.wait(lock);
    return retVal;
}

void CAteEngineInternal::OnRunCompleted(int /* status */)
{
    cvRun.notify_all();
} 
```

我正在使用 CLI，我收到以下错误：
basic_timed_mutex.hpp(216)：致命错误 C1001：编译器中发生内部错误

我想替换这个 boost::mutex 代码并找到一种方法来克服这个编译器错误。我在 VS2012 上使用 C#，在 VS2010 上使用 C++。CLI 也在 VS2010 上。

有什么建议用什么？我需要它是跨平台的，并且能够在 VS2010 中编译它。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:39:09.870

题外话，但请注意，您没有正确等待条件变量：您应该将状态（在本例中为布尔值）与其关联并在循环中等待。否则，您的代码可能会错过条件通知并永远挂起，或者收到虚假唤醒并过早完成等待。请参阅[http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref](http://www.boost.org/doc/libs/1_53_0/doc/html/thread/synchronization.html#thread.synchronization.condvar_ref)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T14:02:24.900

我过去在混合 VS2012 和 VS2010 时遇到过这个问题，你真的不应该这样工作。这是一个错误陷阱。

经过两天的搜索，我找到了这个解决方案 [http://connect.microsoft.com/VisualStudio/feedback/details/753623/fatal-error-c1001](http://connect.microsoft.com/VisualStudio/feedback/details/753623/fatal-error-c1001)

请确保您了解如何正确使用 pragma。我能够编译和运行！

希望这可以帮助。

# java - MyBufferedInputStream 有什么问题？

> ID：15089123
> 
> 赞同：0
> 
> 时间：2013-02-26T12:27:29.073
> 
> 标签：java, android, file

我需要逐行处理文件并想知道行首的偏移量。因为BufferedInputStream中没有readLine，所以我自己编写了readLine。它工作正常，除了偏移量。当文件长度变长时，偏移量返回不正确的值。我的代码有什么问题？

```
class MyBufferedInputStream extends BufferedInputStream {
    long offset = 0;

    public MyBufferedInputStream(InputStream in) {
        super(in);
    }

    public String readLine() throws IOException {
        int b, i = 0;
        byte[] buf = new byte[256];

        while (true) {
            b = read();
            offset++;
            if (b == -1)
                return null;
            else if (b == '\n') 
                return (new String(buf));
            else // assume line in not longer than 256
                buf[i++] = (byte) b;
        }
    }

    public long getOffset() {
        return offset;
    }

    public void resetOffset() {
        offset = 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:30:45.887

您需要在读取数据并最后关闭缓冲区时刷新，一些数据仍可能在内存中产生冲突，这就是为什么它不能正常运行，您有时会看到结果，有时看不到结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:39:18.090

正如 Pescis 在评论中建议的那样，您应该使用`BufferedReader`来阅读文本行，而不是扩展`BufferedInputStream`和添加自己的`readLine()`方法。

Java 有两种用于 I/O 的类：流和读取器/写入器。

**流**（`java.io.InputStream`以及`java.io.OutputStream`扩展它们的所有内容）用于读取二进制数据（字节）。

**Readers**和**writers** (`java.io.Reader`和`java.io.Writer`) 用于阅读和编写文本；它们包含使用字符编码将字符从字节转换为字节的逻辑。

请注意，在您的代码中，您`new String(buf)`用于将包含字节的缓冲区转换为字符串。由于您没有指定字符编码，因此将使用系统的默认字符编码，这并不总是您想要的。

使用示例`BufferedReader`：

```
InputStream in = ...;  // Wherever you get an InputStream from

BufferedReader br = new BufferedReader(new InputStreamReader(in, "UTF-8"));

String line;
while ((line = br.readLine()) != null) {
    System.out.println(line);
}

br.close(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T14:28:10.187

1.  如果 line 比你的 256 字节缓冲区长，那么你会得到一个溢出
2.  如果最后一行不以换行符结尾，则不会返回（返回 null）
3.  如果您`\n`在经过 10 个字节后找到 a ，那么您将返回一个 256 长度的新字符串，其中前 10 个字符是您的 line 和 246 个字符`\0`。换句话说，无论该行有多长，您总是为每行返回 256 个字符的字符串。

您不使用`new BufferedReader(new InputStreamReader(stream))`, 然后调用`readLine`缓冲阅读器的原因是什么？

# php - 在序列化数组中搜索

> ID：15089125
> 
> 赞同：0
> 
> 时间：2013-02-26T12:27:37.910
> 
> 标签：php, joomla

我想在存储在我的数据库中的序列化数组中进行搜索查询。数据如下所示：

```
a:4:{i:0;s:16:"2013-03-24 15:00";i:1;s:16:"2013-03-24 11:00";i:2;s:16:"2013-03-17 15:00";i:3;s:16:"2013-03-17 11:00";} 
```

字段名称是日期。我想搜索像“2013-03-24”这样的日期，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:40:56.920

## 不要将序列化的数组存储在数据库中。

这是您问题的唯一答案。
创建一个表来保存您以序列化形式存储的所有数据，然后将每个值存储在不同的单元格中。

然后您将能够进行常规的 sql 查询，例如

```
SELECT * FROM table WHERE date1 = '2013-03-24 15:00' 
```

# ubuntu - 乘客安装 apache2 模块：看起来出了点问题

> ID：15089126
> 
> 赞同：3
> 
> 时间：2013-02-26T12:27:38.943
> 
> 标签：ubuntu, passenger

我正在使用 Amazon Web 服务（ubuntu 12.04.1 LTS）并使用带有 RVM 的 Ruby 1.9.3（安装了单用户）

我安装了乘客`rvmsudo gem install passenger`

我试着`rvmsudo passenger-install-apache2-module`

它说出了点问题......

我认为有两个错误

1.  第一个错误

    ```
    checking for alloca.h... *** /home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/ext/ruby/extconf.rb failed ***
    Could not create Makefile due to some reason, probably lack of
    necessary libraries and/or headers.  Check the mkmf.log file for more
    details.  You may need configuration options.

    provided configuration options:
        --with-opt-dir
        --without-opt-dir
        --with-opt-include
        --without-opt-include=${opt-dir}/include
        --with-opt-lib
        --without-opt-lib=${opt-dir}/lib
        --with-make-prog
        --without-make-prog
        --srcdir=/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/ext/ruby
        --curdir
        --ruby=/home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/bin/ruby 
    ```

所以我检查了 mkmf.log 但我找不到问题所在。

在 mkmf.log 中

```
" -o conftest -I/home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/include/ruby-1.9.1/x86_64-linux -I/home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/include/ruby-1.9.1/ruby/backward -I/home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/include/ruby-1.9.1 -I/home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/ext/ruby     -O3 -ggdb -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration  -fPIC -g conftest.c  -L. -L/home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib -Wl,-R/home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib -L.  -rdynamic -Wl,-export-dynamic     '-Wl,-rpath,/../lib' -Wl,-R -Wl,/home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib -L/home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib -lruby  "
 sh: 0: Illegal option -
 Current option settings
 errexit         on
 noglob          on
 ignoreeof       on
 interactive     on
 monitor         on
 noexec          on
 stdin           on
 xtrace          on
 verbose         on
 vi              on
 emacs           on
 noclobber       on
 allexport       on
 notify          on
 nounset         on
 nolog           on
 debug           on
 checked program was:
 /* begin */
 1: #include "ruby.h"
 2:
 3: int main() {return 0;}
 /* end */ 
```

2.秒错误

```
 /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
 You have to install development tools first.
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:506:in `try_cpp'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:931:in `block in have_header'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:254:in `open'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:254:in `open'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
from /home/ubuntu/.rvm/rubies/ruby-1.9.3-p392/lib/ruby/1.9.1/mkmf.rb:930:in `have_header'
from /home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/ext/ruby/extconf.rb:36:in `<main>'
 rake aborted!
 Command failed with status (1): [cd 'ext/ruby/ruby-1.9.3-x86_64-linux/' && ...]
 /home/ubuntu/.rvm/gems/ruby-1.9.3-p392/gems/passenger-3.0.19/build/ruby_extension.rb:43:in `block in <top (required)>'
 /home/ubuntu/.rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `eval'
 /home/ubuntu/.rvm/gems/ruby-1.9.3-p392/bin/ruby_noexec_wrapper:14:in `<main>'
 Tasks: TOP => apache2 => native_support => ext/ruby/ruby-1.9.3-x86_64-linux//passenger_native_support.so => ext/ruby/ruby-1.9.3-x86_64-linux//Makefile
 (See full trace by running task with --trace) 
```

但我在这里找不到任何线索...

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T15:26:04.607

在我的脑海中，我首先要确保我已经通过安装 build-essential 来配置 Ubuntu 进行开发，如下所示

```
xyz@supergLTS:~$ sudo apt-get install build-essential 
```

这将获得 make 和 gcc 需要的所有开发工具、文件和头文件。然后我会为 Apache2 模块重新运行我的构建过程

```
rvmsudo passenger-install-apache2-module 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-05T20:10:32.893

我想通过重新安装乘客解决了我的问题，一些库丢失了，我想

```
#gem uninstall passenger
#gem install passenger
#passenger-install-apache2-module 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-05T19:19:47.353

我通过包含`env PATH;`在我的`nginx.conf`文件的最顶部解决了这个问题。就我而言，我已经安装了所有必要的工具，但由于某种原因 nginx 找不到它们，所以添加`env PATH;`它使它工作。另外不要忘记在更改配置后重新启动 nginx 服务。`sudo service nginx restart`

# php - 使用 PHP 在服务器上保存 PIL 生成的 PNG 图像

> ID：15089133
> 
> 赞同：0
> 
> 时间：2013-02-26T12:27:48.410
> 
> 标签：php, python, image, encoding, python-imaging-library

我从屏幕截图中获得了一个 python Image 对象，我想将其保存在运行 PHP 的服务器上。
我想在不将图像保存在用户计算机上的情况下完成所有这些操作，因此我想向 PHP 脚本发送它可以理解的编码，我可以从 PIL Image 实例中获取该编码。

到目前为止，我已经尝试将图像保存到缓冲区（在 python 中）并将数据发送到 PHP 函数 file_put_contents，但生成的文件不是正确的 .png 图像（我刚刚将 PNG 编码字符串保存到扩展名为 .png 的文件...）

这是我的代码...

**客户**

```
# shot is an Image instance

buff = StringIO()
shot.save(buff, 'PNG')

args = {'filename':'eg.png','image': buff.getValue()}
data = urllib.urlencode(args)
request = urllib2.Request(self.uploadURL, data)
urllib2.urlopen(request).read() 
```

**服务器**

```
# 'filename' arg ends in .png,  'image' arg is the upload parameter ^

$filename = 'images/'.$_POST['filename'];
file_put_contents($filename, $_POST['image']); 
```

我认为在尝试将图像数据写入文件之前，我需要使用 PHP 转换它，但我不确定如何。

我之前通过将图像保存到文件并以 base 64 发送二进制内容来完成此操作，但我根本不希望将图像保存在客户端的计算机上。

谢谢！
免责声明：这个问题和我对编码的看法对我来说完全“恶心”，很抱歉成为如此巨大的菜鸟/可怕的误解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T04:35:45.717

**解决了**

PHP 中的 UTF-8 编码发生了一些有趣的事情。
（使用`utf8_encode`功能不成功）

为了避免 UTF8，我对 UTF8 数据进行了 base64 编码并将其发送到 PHP 脚本，PHP 脚本对其进行解码并将其写入文件（以二进制模式）。

```
<?php

$filename = 'images/'.$_POST['filename'];

$fp = fopen($filename, 'wb');
fwrite($fp, base64_decode($_POST['image']));
fclose($fp);

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:58:25.243

PHP 方面更复杂。我猜上传是通过 HTTP POST 文件完成的。如果是，则`$_POST['image']`不是上传文件的全部内容。请参阅[http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php)和`move_uploaded_file()`.

# javascript - Email Validation Javascript allowing *@domain.com

> ID：15089139
> 
> 赞同：1
> 
> 时间：2013-02-26T12:28:01.953
> 
> 标签：javascript, regex

I want to validate email addresses, it's easy, there are lots of RegEx while I search Google, but here, I want to also allow `*@domain.com`, here is what I have right now:

```
/^[\w-\.\d*]+@[\w\d]+(\.\w{2,4})$/ 
```

This works just fine for regular email addresses like `test@yahoo.com` and it also does what I want: `*@somedomain.com`, but this doesn't allow `test@yahoo.co.uk`.

How I should fix it?

Thanks in advance

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:30:01.970

匹配`+`后添加：`(\.\w{2,4})`

```
/^[\w-\.\d*]+@[\w\d]+(\.\w{2,4})+$/ 
```

# c - C - How to read inputs

> ID：15089140
> 
> 赞同：1
> 
> 时间：2013-02-26T12:28:02.663
> 
> 标签：c, input, while-loop, scanf, break

it's part of the homework, but it's not the main part

I already made the main function by manually changing the data by myself, but I really don't get how to read the user inputs correctly.

Here are what the inputs look like:

3

1 2 9

6

1 1 3 4 4 6

0

So basically the first input is the size of the # of the next inputs. So for 3, the array is size 3 with [1,2,9] being the elements, and for 6, the array size is 6 with [1,1,3,4,4,6] being the elements

And when the input is 0, the program terminates.

I think by using a while loop and saying when input[0] = '0' and break, I can terminate the program, but I don't know how to get the other inputs into a char array.

As you can see, there are spaces, so the scanf will read every integers differently into the char array.

After I get the inputs that are char, I believe I can use atoi to make it back to integers...

So, help me how I should code in order to get the user inputs correctly...

Maybe this was too vague: here is the version I kinda want:

```
while(1)
{
    scanf("%d", &ui);

    if(ui == 0)
    {
        break;
    }
    else
    {   
        size = ui;
        int temp[size];

        for(c = 0; c < size; c++)
        {
            scanf("%d", &input);
            temp[c] = input;
        }
    }
} 
```

The output is good for the first array, but after that because of the temp[size], it outputs something weird. Any way to fix this? I want the size of the array to be the size of the user's wanted size. (e.g. for the input i've written above: 3 and 6)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:32:33.147

抓取第一个数字应该是微不足道的，然后对于“数字字符串”考虑到您想要读取空格，您可以简单地执行类似使用[`scanf()`](http://www.cplusplus.com/reference/cstdio/scanf/)的否定扫描集的操作：

```
char input[100];
scanf("%99[^\n]", input); 
```

要不就[`fgets()`](http://www.cplusplus.com/reference/cstdio/fgets/)

```
char input[100];
fgets(input, sizeof input, stdin); 
```

然后就像你猜的那样，把它放在一个`while`循环中，等待第一个数字为 0。

`> I believe I can use atoi to make it back to integers`

如果它们都是个位数（如您的示例中），您可以简单地`'0'`从它们中减去的值来获得`int`值

# dart - How mature / production ready are websockets in M3 dart?

> ID：15089141
> 
> 赞同：0
> 
> 时间：2013-02-26T12:28:03.447
> 
> 标签：dart

I have a project that requires websockets. I was going to use Node.js , but now I am wondering if Dart M3, respective to websockets, would suit my use case.

There are open questions like:

*   How do i deploy/host my server-side dartcode (websocket server)?
*   Can I create multiple "rooms", where I would be able to send messages, and where subscribed clients (browsers) receive automatically those messages?
*   How many clients can subscribe to those "rooms"?
*   ...

Should I just roll for now with Node.js and wait a bit till dart gets ready?

Thx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:56:40.947

您的未决问题的具体答案是：

> 我如何部署/托管我的服务器端 dartcode（websocket 服务器）？

您使用入口点 dart 文件（例如， 编写服务器端 dart 代码，`my_app.dart`并在某处的服务器上使用 Dart 二进制文件执行它。这与 node.js 相同。

> 我可以创建多个“房间”，在那里我可以发送消息，订阅的客户端（浏览器）在哪里自动接收这些消息？

这对你来说是一个编程挑战。当客户端建立 websocket 连接时，服务器会获取一个连接对象的实例。一种可能的解决方案是您维护一个房间列表，并将每个客户端的连接添加到客户端想要连接的每个房间。或者，维护一个客户端对象列表，并拥有该客户端的房间列表。（如果您使用 node.js，这与您必须解决的问题相同）。

> 有多少客户可以订阅这些“房间”？

一段绳子有多长？以编程方式，没有限制，但是你会受到内存、硬件的限制......（试试看，让我们知道你的应用程序在负载下的表现如何） - 请参阅这个相关问题：[Socket.io：WebSockets 可以处理多少并发连接?](https://stackoverflow.com/questions/5695107/socket-io-how-many-concurrent-connections-can-websockets-handle) 以及相关的接受答案（同样，这实际上不是 Dart 特定的）。

从本质上讲，在技术方面在服务器端使用 Dart 与在服务器端使用 node.js 非常相似。您使用 Dart 获得的是强大的类型检查、工具、语言中的库导入以及 JavaScript 解决方案无法获得的经典 OOP。

Seth Ladd[关于 Dart WebSockets 的博客文章](http://blog.sethladd.com/2012/07/simple-dart-websocket-demo.html)解释了更多（具体语法可能稍微过时，但概念仍然相同）。

# epplus - Locking Cells that have formulas using EPPlus

> ID：15089145
> 
> 赞同：1
> 
> 时间：2013-02-26T12:28:13.707
> 
> 标签：epplus

I want to lock a cell that has a value calculated by a formula using EPSPlus.

So if a cell used in the formula is changed the cell value will change accordingly however the cell cannot be edited directly, is this possible?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:31:06.513

只需保护工作表并锁定所需的单元格，这不会影响公式

```
worksheet.Protection.IsProtected = true;
worksheet.Cells["A1:B1"].Style.Locked = true; 
```

# javascript - Javascript IRR（内部收益率）公式准确性

> ID：15089151
> 
> 赞同：8
> 
> 时间：2013-02-26T12:28:34.600
> 
> 标签：javascript, jquery, excel, math, excel-formula

我在 javascript 中使用 IRR 函数来创建计算 a，该计算是在 excel 中使用其自己的 IRR 函数完成的。问题是我的问题不大，我不知道为什么。这是下面的代码。

```
var IRRval = [];

IRRval.push(-financed);
for (i = 0; i < period; i++) {
    IRRval.push(rental);
}

var IRR = IRRCalc(IRRval, 0.001) * 0.01;

function IRRCalc(CArray, guest) {
    inc = 0.000001;
    do {
        guest += inc;
        NPV = 0;
        for (var j=0; j < CArray.length; j++) {
            NPV += CArray[j] / Math.pow((1 + guest), j);
        }
    } while (NPV > 0);
    return guest * 100;
} 
```

现在，如果您使用这些数字：

* * *

第 24 期

融资22000

租金 1017.5000

我的结果是：0.008523000000000175

Excel 结果为：0.008522918

* * *

**或者**

* * *

第 42 期

融资218000

出租 5917.1429

我的结果是：0.006247000000000489

Excel 结果为：0.00624616

* * *

调用 Excel 函数：`=IRR(T12:T73,0.01)`T12-T73 与我使用的数字相同。

任何帮助将不胜感激，谢谢杰森

**更新**

我已经通过更改下面的值来解决它。但是现在性能太慢了。关于如何改进这一点的任何想法？

```
IRRCalc(IRRval, 0.001)

//to

IRRCalc(IRRval, 0.0001)

inc = 0.000001;

//to

inc = 0.00000001; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-24T07:59:57.113

我们修改了代码以实现性能和准确性。试试这个：

```
function IRRCalc(CArray) {

  min = 0.0;
  max = 1.0;
  do {
    guest = (min + max) / 2;
    NPV = 0;
    for (var j=0; j<CArray.length; j++) {
          NPV += CArray[j]/Math.pow((1+guest),j);
    }
    if (NPV > 0) {
      min = guest;
    }
    else {
      max = guest;
    }
  } while(Math.abs(NPV) > 0.000001);
  return guest * 100;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-26T12:36:06.680

快速浏览您的代码后，错误似乎与*浮点精度错误*有关。更多信息可以在这里找到：http: [//ajaxian.com/archives/crock-on-floating-points-in-javascript](http://ajaxian.com/archives/crock-on-floating-points-in-javascript)

在较旧的 javascript 引擎中，如果您执行 0.3 + 0.3，您会得到类似 0.600000000001

尽管今天大多数 javascript 引擎返回 0.6，但问题仍然存在。将浮点数加在一起会导致意外结果。所以在你的情况下

```
inc = 0.000001;
guest += inc; 
```

在我看来，这是问题所在。

解决这个问题的一种方法是使用整数。因此，您将使用 1 而不是 0.000001，而不是 0.001，您将使用 1000。然后将返回结果除以 100000

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-27T17:50:02.927

试试这个。

```
function NPV(discountRate, cashFlow){
    var npv = 0;
    for(var t = 0; t < cashFlow.length; t++) {
        npv += cashFlow[t] / Math.pow((1+ discountRate),t);
    }
    return npv;
}

function IRR(cashFlow,guess){
    guess = guess ? guess : 0.1;
    var npv;
    var cnt = 0;
    do
    {
        npv = NPV(guess,cashFlow);
        guess+= 0.001;

        cnt++;
    }
    while(npv > 0)

    return guess;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T14:44:21.523

可以肯定的是，这是一个浮点问题。您将需要使用[BigDecimal.js 之](https://github.com/dtrebbien/BigDecimal.js)类的库来处理您的值。这确实是避免这个问题的唯一方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-12-20T22:45:42.153

我想以@Zohaib Answer 为基础，但我想做的是在适当的地方显示未定义。我能做的最好的就是让它等于零。我正在使用这个简单的数据集`irr_arr=[-100, 100, 100, 100, 100,100]`。我会很感激一些建议。

```
//IRRCALC funtion that handles irr going to infinity 

function IRRCalc_test(CArray) {

  min = 0.0;
  max = 1.0;
  c=0;
  do {
    guest = (min + max) / 2;
    NPV = 0;
    for (var j=0; j<CArray.length; j++) {
          NPV += CArray[j]/Math.pow((1+guest),j);
    }
    if (NPV > 0) {
      min = guest;
      c++; 
    }
    else {
      max = guest;
      c++;
    }

    if(c>=15){ return guest*100; }
  } while(Math.abs(NPV) > 0.000001);
  return guest*100;
}

// some testing 

irr_arr=[-100, 100, 100, 100, 100,100]
irr_res_arr_expected=[0,0,61.8,83.93,92.76,96.6]
for(i=1;i<=irr_arr.length;i++){
console.log("irr_arr - ",irr_arr.slice(0,i));
console.log("IRRCalc - ",IRRCalc(irr_arr.slice(0,i)))
//console.log("irr_expected - ", irr_res_arr_expected[i-1])
//if(IRRCalc(irr_arr.slice(0,i))===parseFloat(irr_res_arr_expected[i-1]).toFixed(2)){console.log(i,"- TRUE")} else {console.log(i,"- FALSE")}
} 
```

这是输出

```
irr_arr -  [-100]
IRRCalc -  0.00      <<<<<<<<<<<<<<<<<<<------- this should be 'undefined' and not 'zero'
irr_arr -  [-100, 100]
IRRCalc -  0.00
irr_arr -  [-100, 100, 100]
IRRCalc -  61.80
irr_arr -  [-100, 100, 100, 100]
IRRCalc -  83.93
irr_arr -  [-100, 100, 100, 100, 100]
IRRCalc -  92.76
irr_arr -  [-100, 100, 100, 100, 100, 100]
IRRCalc -  96.60 
```

这是我想要制作的优秀作品

[![在此处输入图像描述](../Images/9564161b6527579cec6a9cdb1c4d4e40.png)](https://i.stack.imgur.com/1DKVO.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-02-21T12:10:35.513

不要将您的最小 IRR 设置为 0。这就是您的答案的界限。试着让它变成负面的。也不要试图计算一个数字的内部收益率。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-14T16:03:48.857

这可能是编写计算的更好方法。这允许代码计算负 IRR 或 IRR 高于 100% 的实例。

```
 var IRRval = [];

        IRRval.push(-financed);
            for (i = 0; i < period; i++) {
            IRRval.push(rental);
        }
        var IRR = IRRCalc(IRRval, 0.001) * 0.01;

        function IRRCalc(CArray) {
            var r = 0
            min = -1.0;
            max = 10000.0;
            do {
                guest = (min + max) / 2;
                NPV = 0;
                for (var j = 0; j < CArray.length; j++) {
                    NPV += CArray[j] / Math.pow((1 + guest), j);
                }
                if (NPV > 0) {
                    min = guest;
                }
                else {
                    max = guest;
                }
                r++
            } while (r < 100);
            return guest * 100
        } 
```

# java - java中子类的调用方法

> ID：15089155
> 
> 赞同：3
> 
> 时间：2013-02-26T12:28:46.333
> 
> 标签：java, inheritance

如何在下面的场景中调用所有类的 print*() 意味着在 main() 方法中调用 A 的 printA()、B 的 printB() 和 C 的 printC()。

```
class A
{
  public void printA(){System.out.println("A.printA()");}
}

class B extends A
{
    public void printB(){System.out.println("B.printB()");}
}

class C extends A
{
    public void printC(){System.out.println("C.printC()");}
}
class DemoInheritence
{
    public static void main(String[] str){
        printIt(new A());
        printIt(new B());
        printIt(new C());
    }
    public static void printIt(A a) {
        //Here I wants to call A's printA(), B's printB() and C's printC()
        //So how can I do this
    }
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-26T12:31:00.387

通常，你会做这样的事情，它被称为覆盖：

```
class A
{
  public void print(){System.out.println("A.printA()");}
}

class B extends A
{
    public void print(){System.out.println("B.printB()");}
}

class C extends A
{
    public void print(){System.out.println("C.printC()");}
}
class DemoInheritence
{
    public static void main(String[] str){
        printIt(new A());
        printIt(new B());
        printIt(new C());
    }
    public static void printIt(A a) {
        a.print();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T12:33:13.110

对于您的代码，您可以使用以下内容：

```
public static void printIt(A a) {
    if(a instanceof B) {
    ((B)a).printB();
    } else if(a instanceof C) {
       ((C)a).printC();
    } else {
      a.printA(); 
    }

} 
```

但这有点错误，您应该重写 A 的子类中的方法，或者更好地创建一个所有类都实现并在代码中使用该接口的接口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:57:48.357

您可以使用反射 API，但随后您可能会做出一些假设。至少有两种可能：

解决方案 1\. 如果 print 方法称为“print[Class name]”，您将按名称获取该方法：

```
public static void printIt(Object o) {
    Class objectClass = o.getClass();
    try {
        Method printMethod = objectClass.getMethod("print" + objectClass.getName());
        printMethod.invoke(o);
    } catch (NoSuchMethodException e) {
        throw new IllegalStateException("Method print"+objectClass.getName()+"() doesn't exist", e);
    } catch (InvocationTargetException e) {
        throw new IllegalStateException("Problem calling method print"+objectClass.getName()+"()", e);
    } catch (IllegalAccessException e) {
        throw new IllegalStateException("Method print"+objectClass.getName()+"() is not accessible", e);
    }
} 
```

解决方案 2\. 如果每个类总是声明一个方法，则您采用传递对象类的 getDeclaredMethod 返回的第一个方法：

```
public static void printIt(Object o) {
    Class objectClass = o.getClass();
    try {
        Method printMethod = objectClass.getDeclaredMethods()[0];
        printMethod.invoke(o);
    } catch (InvocationTargetException e) {
        throw new IllegalStateException("Problem calling method print"+objectClass.getName()+"()", e);
    } catch (IllegalAccessException e) {
        throw new IllegalStateException("Method print"+objectClass.getName()+"() is not accessible", e);
    }
} 
```

# r - R: RJDBC: changing parts of a query via the R console

> ID：15089158
> 
> 赞同：0
> 
> 时间：2013-02-26T12:28:52.817
> 
> 标签：r, paste, rjdbc

I suspect this is very simple but couldn't work out how do it, nor find an answer on the internet. I have a table `T` in a data warehouse which I want to query through the R console e.g.

```
library(RJDBC)

query = function(date){
  paste('select * from T where date =', date, sep = ' ')
  return(query)
  } 
```

However, I become unstuck as `query('01/01/2013')` returns:

```
 select * from T where date = 01/01/2013 
```

whereas I actually want it to return:

```
select * from T where date = '01/01/2013' 
```

Thanks for any help. Cheers

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:34:30.737

用双引号试试：

```
query("'01/01/2013'") 
```

高温高压

# javascript - 将 URI 转换为 windows 路径格式

> ID：15089165
> 
> 赞同：2
> 
> 时间：2013-02-26T12:29:01.260
> 
> 标签：javascript, uri

在 Javascript 中，我正在寻找将 URI 转换为 Windows 格式的正则表达式，但我不太熟悉 URI 案例以形成正则表达式。基本上...

*   `/c/myDocs/file.txt`
*   `//myDocs/file.txt`

应该改为

```
"C:\myDocs\file.txt" 
```

可能还有其他我不知道的情况。因此需要一些帮助。到目前为止，我所拥有的只是用替换替换斜杠，而不是用正则表达式交换驱动器名称。

```
function pathME(apath)
{
    apath = apath.replace(/\//g, "\\")
    return apath;
} 
```

正则表达式向导，请启动您的引擎！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:36:22.523

这将涵盖上述两种情况：

```
mystring.replace(/^\/([^\/]?)\//, function(match, drive) {
    return (drive || 'c').toUpperCase() + ':\\';
}).replace(/\//g, '\\'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:48:03.997

此正则表达式应该可以解决您的问题，但可以进行优化 处理长度为 1 的所有驱动器名称：

```
 "/c/myDocs/file.txt".replace(/\//g,"\\").replace(/^(\\)(?=[^\\])/, "").replace(/^(\w)(\\)/g, "$1:\\")
  // Result is "c:\myDocs\file.txt" 
```

示例二

```
"//myDocs/file.txt".replace(/\//g,"\\").replace(/^(\\)(?=[^\\])/, "").replace(/^(\w)(\\)/g, "$1:\\")
 // Result is "\\myDocs\file.txt" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:24:17.863

我假设 C 驱动器不会是您的路径字符串中的唯一驱动器，因此编写了一个模仿您的小型 pathME() 函数。这应该涵盖您提到的所有情况。

```
function pathME(apath) {
    //Replace all front slashes with back slashes
    apath = apath.replace(/\//g, "\\");

    //Check if first two characters are a backslash and a non-backslash character
    if (apath.charAt(0) === "\\" && apath.charAt(1) !== "\\") {
        apath = apath.replace(/\\[a-zA-Z]\\/, apath.charAt(1).toUpperCase() + ":\\");
    }

    //Replace double backslash with C:\
    apath = apath.replace("\\\\", "C:\\");
    return apath;
}
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:41:11.570

这里不需要任何正则表达式。您可以通过简单的字符串操作来做到这一点：我认为。这样，如果您愿意，您可以更好地处理输入字符串中的错误。

```
var newpath = apath.replace(/\//g, '\\');
var drive = null;
if (newpath.substring(0, 2) == '\\\\') { 
   drive = 'c';
   newpath = newpath.substring(1);
}
else if (newpath.substring(0, 1) == '\\') {
   drive = newpath.substring(1, newpath.indexOf('\\', 2)); 
   newpath = newpath.substring(newpath.indexOf('\\', 2));
}
if (drive != null) { newpath = drive + ':' + newpath; } 
```

附带说明：我不知道您的问题的范围，但是在某些情况下这不起作用。例如，在 Unix 中，网络共享会被挂载到，`/any/where/in/the/filesystem`而在 Windows 中，您需要`\\remotehost\share\`，因此显然简单的转换在这里不起作用。

# android - How to prevent the application from restart after completing the phone calls in android?

> ID：15089166
> 
> 赞同：0
> 
> 时间：2013-02-26T12:29:01.853
> 
> 标签：android

I am new to android field. In my application tab activity is used. If any incoming call is arrived, the application is restarted after answering the call. Is there any way to prevent the restart application?. I also included the in manifest file. Please help me.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:46:20.160

Here please tell me how you added views in side the tab.

If you are using tab ,it is little bit difficult to handle the app .

Suppose if you are adding view in side an **ArrayList** make it **public static** .

In side the classes which are extends **TabActivity** write the code for OnResume,OnPause methods like Activity.

Try it .

# html - IE9中框的颜色不一样？

> ID：15089171
> 
> 赞同：0
> 
> 时间：2013-02-26T12:29:16.150
> 
> 标签：html, css, internet-explorer

该框在 chrome、safari 和 firefox 中显示正确的颜色。但在 IE 中，盒子颜色是黄色/金色。请参阅下面的图片了解我面临的问题。

如何解决这个问题？

火狐：![在此处输入图像描述](../Images/72efc9a5df00b3c0eb8d52319a67010c.png)

IE9：![在此处输入图像描述](../Images/ce9daee337159ab2ced1aea0da88a1b0.png)

[JSFIDDLE](http://jsfiddle.net/c7czs/)（在 IE 中打开这个例子）

HTML 代码：

```
<div id="container105">
        <div class="bubbleouter">
            <div class="bubbleinner"><CENTER><BOLD>VUL KOSTENLOOS DE OFFERTE IN EN WIJ BEREKEN DE PRIJS VAN UW SPECIFIEKE RIT<BOLD></CENTER></div>
        </div>
    </div> 
```

代码：

```
}
.bubbleouter {
    position:relative;
    padding:3px;
    margin:0;
        width:280px;
        z-index:99;
        background:-webkit-gradient(linear, left top, left bottom, from(#272727), to(#222222));
    background:-moz-linear-gradient(top, #272727, #222222);
    background:-o-linear-gradient(top, #272727, #222222);

    /* css3 */
    -moz-border-radius:10px;
    -webkit-border-radius:10px;
    border-radius:10px;
}

.bubbleouter:after {
    content:"";
    display:block; /* reduce the damage in FF3.0 */
    position:absolute;
    top:-13px; /* value = - border-top-width - border-bottom-width */
    left:50%; /* controls horizontal position */
        margin:0 0 0 -18px;
    width:0;
    height:0;
        z-index:99;
    border-width:0 18px 14px; /* vary these values to change the angle of the vertex */
    border-style:solid;
    border-color:#222222 transparent;
}

.bubbleinner {
    position:relative;
    padding:15px;
    margin:0;
    color:#eee;
        text-align:center;
        z-index:100;
    text-shadow:0px -1px 1px rgba(0, 0, 0, 0.8);
    background:#f3961c; /* default background for browsers without gradient support */
        border-top:1px solid #666666;

    /* css3 */
    -moz-border-radius:7px;
    -webkit-border-radius:7px;
    border-radius:7px;
    /* NOTE: webkit gradient implementation is not as per spec */
    background:-webkit-gradient(linear, left top, left bottom, from(#666666), to(#444444));
    background:-moz-linear-gradient(top, #666666, #444444);
    background:-o-linear-gradient(top, #666666, #444444);
}

.bubbleinner:after {
    content:"";
    display:block; /* reduce the damage in FF3.0 */
    position:absolute;
    top:-13px; /* value = - border-top-width - border-bottom-width */
    left:50%; /* controls horizontal position */
        margin:0 0 0 -16px;
    width:0;
    height:0;
        z-index:99;
    border-width:0 16px 12px; /* vary these values to change the angle of the vertex */
    border-style:solid;
    border-color:#666666 transparent;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:32:15.613

你的问题是背景属性：

```
background:-webkit-gradient(linear, left top, left bottom, from(#272727), to(#222222));
background:-moz-linear-gradient(top, #272727, #222222);
background:-o-linear-gradient(top, #272727, #222222); 
```

`-webkit-*`针对 webkit 浏览器（IE 不是）。 `-moz-*`针对 Mozilla Firefox。 `-o-*`针对 Opera。

如果您想在所有支持的浏览器中使用渐变背景，这是一个非常棒的资源： http: [//www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

将其与您的颜色一起使用，因为`.bubbleouter`您想要：

```
background: #272727; /* Old browsers */
background: -moz-linear-gradient(top, #272727 0%, #222222 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#272727), color-stop(100%,#222222)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #272727 0%,#222222 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #272727 0%,#222222 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #272727 0%,#222222 100%); /* IE10+ */
background: linear-gradient(to bottom, #272727 0%,#222222 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#272727', endColorstr='#222222',GradientType=0 ); /* IE6-9 */ 
```

...而且`bubbleinner`你想要：

```
background: #666666; /* Old browsers */
background: -moz-linear-gradient(top, #666666 0%, #444444 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#666666), color-stop(100%,#444444)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top, #666666 0%,#444444 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top, #666666 0%,#444444 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top, #666666 0%,#444444 100%); /* IE10+ */
background: linear-gradient(to bottom, #666666 0%,#444444 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#666666', endColorstr='#444444',GradientType=0 ); /* IE6-9 */ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T12:40:38.050

You have specified that color for browsers without gradient support:

```
background:#f3961c; /* default background for browsers without gradient support */ 
```

Change that to a color that works with your design:

```
background:#666; /* default background for browsers without gradient support */ 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T12:41:11.257

add the following line before the gradient declarations:

```
background : #272727; 
```

The bug happens because IE does not support gradients. Don't use filters like

```
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#272727', endColorstr='#222222',GradientType=1 ); /* IE6-9 fallback on horizontal gradient */ 
```

These filters don't respect drop-shadows and border radius.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T12:48:30.593

IE9 does not support CSS gradients, so you are seeing the default background colour for the box after the gradients have been ignored.

The easiest answer is to give a more sensible default `background` style, so that browsers that don't support gradients will get a colour that comes close to matching what you want.

如果您确实想在 IE 中支持渐变，您可以使用 IE 专有`filter`样式来实现，但如果可能，我会避免这种情况，因为语法很糟糕，最终结果可能有问题（尤其是与其他 CSS3 样式结合使用时） ）。

更好的解决方案是使用[CSS3Pie](http://css3pie.com/)库来修补 IE 以添加对 CSS3 样式渐变的支持。CSS3Pie 适用于所有版本的 IE (6-9)，并在 IE9 中添加渐变，在 IE 6-8 中添加渐变、框阴影和边框半径。这将允许您使用渐变正确支持 IE9。

希望有帮助。

# matplotlib - Support for cloud9 ide and matplotlib or other graphical tool for python?

> ID：15089174
> 
> 赞同：9
> 
> 时间：2013-02-26T12:29:23.970
> 
> 标签：matplotlib, cloud9-ide

The thing preventing me from switching to cloud9 is the lack of support for matplotlib since graphing things are very important to my work.

I have tried installing matplotlib but there seems to be some problems with pygtk even though it appears to be installed. Is it even possible for an online ide to interact with gtk windows on my local computer? Perhaps the graphs could be generated remotely and saved to my directory?

It would be great if anyone had successfully managed this could show me how?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-29T18:40:43.793

您可以更改[后端](http://matplotlib.org/faq/usage_faq.html#what-is-a-backend)

```
import matplotlib
matplotlib.use('Agg') 
```

然后使用保存图形`figure.savefig('filename')`

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-22T15:20:02.693

正如 David Adler 所指出的，您可以设置非 GUI 后端：

```
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt # Do not do this prior to calling use() 
```

您可以按照通常的方式创建图形，除了保存它：

```
fig, ax = plt.subplots(1, 1)
ax.hist(numpy.random.randn(1000))
fig.savefig('display.svg') # Any filename will do 
```

在 Cloud9 中，您可以在预览选项卡中打开 SVG。每次更新和保存图窗时，请刷新预览选项卡。

# java - 强制刷新集合 JPA entityManager

> ID：15089177
> 
> 赞同：23
> 
> 时间：2013-02-26T12:29:29.787
> 
> 标签：java, hibernate, jpa, seam

我正在使用带有 JPA 的 SEAM（实现为 Seam Managed Persistance Context），在我的支持 bean 中，我将一组实体（ArrayList）加载到支持 bean 中。

如果不同的用户修改了不同会话中的一个实体，我希望将这些更改传播到我的会话中的集合，我有一个方法`refreshList()`并尝试了以下...

```
@Override
public List<ItemStatus> refreshList(){
    itemList = itemStatusDAO.getCurrentStatus();
} 
```

使用以下查询

```
@SuppressWarnings("unchecked")
@Override
public List<ItemStatus> getCurrentStatus(){
    String s = "SELECT DISTINCT iS FROM ItemStatus iS ";
    s+="ORDER BY iS.dateCreated ASC";
    Query q = this.getEntityManager().createQuery(s);
    return q.getResultList();
} 
```

重新执行查询，这只是返回我已经拥有的相同数据（我假设它使用的是一级缓存而不是访问数据库）

```
@Override
public List<ItemStatus> refreshList(){
    itemStatusDAO.refresh(itemList)
} 
```

调用`entityManager.refresh()`，这应该从数据库中刷新，但是`javax.ejb.EJBTransactionRolledbackException: Entity not managed`当我使用它时会出现异常，通常我会`entityManager.findById(entity.getId)`在调用 .refresh() 之前使用以确保它连接到 PC，但是当我刷新实体集合时，我不能这样做。

这似乎是一个非常简单的问题，我不敢相信没有办法强制 JPA/hibernate 绕过缓存并命中数据库？！

更新测试用例：

我正在使用两个不同的浏览器（1 和 2）来加载同一个网页，我在 1 中进行了修改，它更新了 ItemStatus 实体之一中的布尔属性，视图刷新为 1 以显示更新的属性，我检查通过 PGAdmin 的数据库和行已更新。然后我在浏览器 2 中按刷新，属性尚未更新

在调用 .refresh 之前，我尝试使用以下方法合并所有实体，但实体仍未从数据库中更新。

```
@Override
public void mergeCollectionIntoEntityManager(List<T> entityCollection){
    for(T entity: entityCollection){
        if(!this.getEntityManager().contains(entity)){
            this.getEntityManager().refresh(this.getEntityManager().merge(entity));
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-06T04:38:56.643

你在这里有两个不同的问题。让我们先来个简单的。

* * *

**javax.ejb.EJBTransactionRolledbackException：实体不受管理**

该`List`查询返回的对象*本身*不是a `Entity`，所以你不能`.refresh`这样做。事实上，这就是异常所抱怨的。你要求对`EntityManager`一个根本不知道的对象做某事`Entity`。

如果您想要`.refresh`一堆东西，请`.refresh`逐个遍历它们。

* * *

**刷新 ItemStatus 列表**

根据您的问题，您与 Hibernate 的`Session`级别缓存交互的方式是您所不期望的。从[休眠文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#transactions-basics-identity)：

> 对于附加到特定 Session 的对象（即，在 Session 范围内）... 用于数据库标识的 JVM 标识由 Hibernate 保证。

这样做的影响`Query.getResultList()`是您不一定要取回数据库的最新状态。

您运行的`Query`实际上是获取与该查询匹配的实体 ID 列表。缓存中已经存在的任何 ID`Session`都与已知实体匹配，而未根据数据库状态填充的任何 ID。先前已知的实体*根本不会*从数据库中刷新。

这意味着，如果在`Query`同一事务中两次执行 from 之间，数据库中特定已知实体的某些数据已更改，则第二个 Query**不会**获取该更改。但是，它会获取一个全新的`ItemStatus`实例（除非您使用的是[查询缓存](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-querycache)，我假设您没有使用）。

长话短说：使用 Hibernate，只要您想在单个事务中加载实体，然后从数据库中获取对该实体的其他更改，您必须显式地`.refresh(entity)`.

你想如何处理这个取决于你的用例。我能想到的两个选项：

1.  必须将 DAO 绑定到事务的生命周期，并懒惰地初始化`List<ItemStatus>`. 后续调用`DAO.refreshList`遍历`List`and `.refresh(status)`。如果您还需要新添加的实体，您应该运行*并*`Query`刷新已知的 ItemStatus 对象。
**   开始新的交易。听起来像是您与@Perception 的聊天，尽管那不是一个选项。*

 ** * *

**一些附加说明**

有关于使用查询提示的讨论。这就是他们不起作用的原因：

*org.hibernate.cacheable=false*这仅在您使用[查询缓存](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-querycache)时才相关，仅在非常特殊的情况下才推荐使用。即使您正在使用它，它也不会影响您的情况，因为查询缓存包含对象 ID，而不是数据。

*org.hibernate.cacheMode=REFRESH*这是 Hibernate[二级缓存](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-cache)的指令。如果打开了二级缓存，并且您从不同的事务中发出了两个查询，那么您将在第二个查询中获得过时的数据，并且该指令将解决问题。但是，如果您在两个查询中处于同一个 Session 中，则二级缓存只会发挥作用，以避免为新的实体加载数据库 this `Session`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T11:00:53.593

您必须引用方法返回的实体`entityManager.merge()`，例如：

```
@Override
public void refreshCollection(List<T> entityCollection){
    for(T entity: entityCollection){
        if(!this.getEntityManager().contains(entity)){
            this.getEntityManager().refresh(this.getEntityManager().merge(entity));
        }
    }
} 
```

这样你应该摆脱`javax.ejb.EJBTransactionRolledbackException: Entity not managed`异常。

**更新**

也许返回新集合更安全：

```
public List<T> refreshCollection(List<T> entityCollection)
    {
        List<T> result = new ArrayList<T>();
        if (entityCollection != null && !entityCollection.isEmpty()) {
            getEntityManager().getEntityManagerFactory().getCache().evict(entityCollection.get(0).getClass());
            T mergedEntity;
            for (T entity : entityCollection) {
                mergedEntity = entityManager.merge(entity);
                getEntityManager().refresh(mergedEntity);
                result.add(mergedEntity);
            }
        }
        return result;
    } 
```

或者，如果您可以访问这样的实体 ID，您会更有效：

```
public List<T> refreshCollection(List<T> entityCollection)
    {
        List<T> result = new ArrayList<T>();
        T mergedEntity;
        for (T entity : entityCollection) {
            getEntityManager().getEntityManagerFactory().getCache().evict(entity.getClass(), entity.getId());
            result.add(getEntityManager().find(entity.getClass(), entity.getId()));
        }
        return result;
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-07T09:07:54.027

尝试标记它`@Transactional`

```
@Override
@org.jboss.seam.annotations.Transactional
public void refreshList(){
    itemList = em.createQuery("...").getResultList();
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-13T21:33:21.833

选项之一 - 为特定查询结果绕过 JPA 缓存：

```
 // force refresh results and not to use cache

    query.setHint("javax.persistence.cache.storeMode", "REFRESH"); 
```

可以在此站点[http://docs.oracle.com/javaee/6/tutorial/doc/gkjjj.html上找到许多其他调整和配置技巧](http://docs.oracle.com/javaee/6/tutorial/doc/gkjjj.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-21T08:50:07.453

正确调试后，我发现我团队中的一位开发人员将它注入 DAO 层，因为-

```
@Repository
public class SomeDAOImpl

    @PersistenceContext(type = PersistenceContextType.EXTENDED)
    private EntityManager entityManager; 
```

因此，为了合并它被缓存并且查询用于返回相同的陈旧数据，即使数据已在本机 sql 查询中涉及的表的列之一中发生更改。*

# knockout.js - 如何在输入标签的文本更改时发出警报

> ID：15089186
> 
> 赞同：1
> 
> 时间：2013-02-26T12:29:50.597
> 
> 标签：knockout.js

我想知道是否可以触发一个功能，该功能会提示输入文本中的实际文本。

例如

```
<input type="text" data-bind="value: searchText"/> 
```

现在，如果您在输入框中写了一些东西，则应该调用一个函数，该函数会触发一个消息框，其中包含您在输入框中写入的值，而不会使输入框失去焦点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:36:14.593

我认为您正在寻找[值绑定](http://knockoutjs.com/documentation/value-binding.html)`valueUpdate`的选项：您可以在其中指定其他事件来更新您的 observable 而不是默认的更改事件：

```
<input type="text" data-bind="value: searchText, valueUpdate: 'afterkeydown'"/> 
```

然后您订阅您的 searchText 更改

```
this.searchText.subscribe(function(newValue) {
   //Do something when the user types soemthing
}); 
```

但也许你需要[油门扩展器](http://knockoutjs.com/documentation/throttle-extender.html)来避免在每次击键时触发事件：

```
this.searchText = ko.observable('').extend({ throttle: 500 }); 
```

# javacv - 使用Java的opencv保存图像中的随机像素

> ID：15089188
> 
> 赞同：0
> 
> 时间：2013-02-26T12:29:57.277
> 
> 标签：javacv

以下java opencv代码：

```
IplImage image = cvCreateImage(cvSize(100, 100), IPL_DEPTH_8U, 3);
cvSaveImage("d:/tmp/test.png", image); 
```

创建以下图像：

![创建的图像](../Images/f0011f996e70bd0eec034d46d4d3e4e1.png)

这似乎是未清除的缓冲区或某些指针逻辑错误。我应该先调用 cvCreateImage 后清除图像吗？如何清除缓冲区？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T07:27:32.530

检查 C 代码，我没有看到清除分配数组的代码。它只包含随机数据。

将所有像素设置为单个值的 java 调用是：

```
cvSet(image, CV_RGB(0, 0, 0)); 
```

我认为应该在文档中提到，调用者有责任清除数据。我们 java 的人习惯于构造函数清除缓冲区，即使我们知道有时这可能是不必要的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-23T10:34:03.760

我认为这是更短的方式：

```
cvZero(image); 
```

（可以清除所有频道）

# backbone.js - 模型和集合到 Backbone 中的一个视图

> ID：15089189
> 
> 赞同：1
> 
> 时间：2013-02-26T12:29:57.940
> 
> 标签：backbone.js, view, collections, model

作为 Backbone.js 的新手，我想问一个普遍而简单的问题。在我的应用程序中，我需要创建一个新视图，其中包含一个集合和一个模型。

```
var myView = new SomeView({
    model: myModel,
    collection: myCollection,
    el:$('#main_content')});
}}); 
```

有趣的是，我得到了我的东西。你认为它是否适合骨干的概念，或者什么？

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T15:24:35.220

没有理由你不能这样做，但这有点令人困惑。通常，您可以从视图的名称推断模型或集合的类型。例如，`collection`of`EmployeeListView`很可能是 a `EmployeeCollection`，而`model`or`CompanyView`很可能是 a `Company`。

但是当你同时拥有一个模型和一个集合时，含义就不清楚了。在这种情况下，我会更有意义地命名参数。和属性只是约定 - Backbone 视图也不需要`model`。`collection`

假设您有一个显示 a`Company`并且它是`Employee`s 的视图：

```
var CompanyEmployeesView = Backbone.View.extend({
  initialize: function(options) {
    this.company = options.company;
    this.employees = options.employees;
  }
});

var view = new CompanyEmployeesView({
  company: company,
  employees: employeesCollection
}); 
```

# c# - 在网络配置中加密元素时有什么限制吗？

> ID：15089190
> 
> 赞同：0
> 
> 时间：2013-02-26T12:29:58.960
> 
> 标签：c#, iis, encryption, web-config, rsa

我发现使用

```
 "aspnet_regiis" -pef 
```

或者

```
 "aspnet_regiis -pe" 
```

加密 web.cong 中的元素仅适用于几个元素，而不适用于其他元素。

即它适用于“ConnectionStrings”和“appSettings”，但不适用于“system.web”

我可以以某种方式加密所有元素吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:43:53.927

您可以尝试以下命令：

```
aspnet_regiis -pe system.web/identity -app /[vdir] 
```

身份是 system.web 中的一个部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T10:04:43.337

谷歌搜索了很长时间后，我找到了解决方案。

将其放在这里以供其他用户将来参考。

这篇文章[在这里](https://stackoverflow.com/questions/3504883/encrypting-custom-sections-of-a-web-config)有一个亚当的解决方案——他称之为可怕的黑客攻击，我同意，但它确实有效。

我所做的只是将 nlog.dll 复制到 .NET 框架库，当我运行命令时问题就解决了。

说明——元素指向nlog.dll中的接口NLog.Config.ConfigSectionHandler如下：

```
 <section name="nlog" type="NLog.Config.ConfigSectionHandler, NLog"/> 
```

天知道为什么，当元素被加密时——aspnet_regiis 搜索这个 dll，而当它没有找到它时——它失败了。
只需将其复制到 c:\Windows\Microsoft.NET\Framework\vXXXX

# javascript - 如何在 Windows 8 应用程序中显示数组中的数据

> ID：15089191
> 
> 赞同：3
> 
> 时间：2013-02-26T12:29:59.203
> 
> 标签：javascript, html, windows-8

我在使用 Windows 8 应用程序在数组中显示信息时遇到问题，我用这个将信息发送到视图。

```
var details = document.querySelector(".articlesection");

var data = [{
    "id": "1",
    "title": "Title text",
    "files": [
        {
            "id": "1",
            "title": "File1"
        },
        {
            "id": "2",
            "title": "File2"
        }
    ]
}];

binding.processAll(details, data); 
```

我像这样在视图中接收数据**（这有效，但无法从文件数组中获取信息）**

```
<div class="articlesection">
    <h2 data-win-bind="textContent: title">
        <!-- Displays 1 -->
    </h2>
    <h3 data-win-bind="textContent: id">
        <!-- Displays "Title text" -->
    </h3>
</div> 
```

我怎样才能让它显示数组中的 2 个对象？如果我尝试

```
<div class="articlesection">
    <h2 data-win-bind="textContent: title">
        <!-- Displays 1 -->
    </h2>
    <h3 data-win-bind="textContent: id">
        <!-- Displays "Title text" -->
    </h3>
    <p data-win-bind="textContent: files">
        <!-- i get [Object object], [Object object] -->
    </p>
</div> 
```

很明显，这里有一些数据，所以如果我想要这样的话，我该怎么做。**（Foreach 不存在，但我想展示我想怎么做）**

```
<div class="articlesection">
    <h2 data-win-bind="textContent: title">
        <!-- Displays 1 -->
    </h2>
    <h3 data-win-bind="textContent: id">
        <!-- Displays "Title text" -->
    </h3>
    <ul data-win-bind: foreach: files>
        <!-- Foreach all files, how can I do this? Foreach doesn't exist. -->
        <li>
            <span data-win-bind="textContent: id"></span> 
            <span data-win-bind="textContent: title"></span>
        </li>
    </ul>
</div> 
```

问候，吉姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:40:18.677

使用[WinJS.UI.ListView](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)控件。

编辑因为我是在火车上写的：[WinJS ListView](http://msdn.microsoft.com/en-us/library/windows/apps/br211837.aspx)控件是您想要用来显示对象列表的控件。该控件使您能够指示一种布局类型（列表或网格布局）并定义点击项目时发生的行为（如果有的话）。您可以为每个项目提供一个 itemTemplate，或者您可以创建自定义模板函数，根据您的项目呈现各种不同的神奇事物。

这是您将如何使用它的快速示例。

```
<div id='lv' data-win-control='WinJS.UI.ListView' />

var lv = $('#lv')[0].winControl;
var data = ...; // some js array
var bindinglist = new WinJS.Binding.List(data);
lv.itemDataSoutce = bindinglist.dataSource;
lv.itemTemplate = function(itemPromise) {
    return itemPromise.then(function(item) {
        var f = $('<div></div>');
        f.text(item.title);
    });
}; 
```

有关如何使用它的示例，请参阅[this 。](http://code.msdn.microsoft.com/windowsapps/ListView-item-templates-7d74826f)无耻插件，我写[了一篇](http://szymonrozga.net/blog/2013/02/winjs-controls/)关于WinJS控件如何工作的文章。可能是一些很好的背景阅读。

ItemTemplate 也可以是 HTML 模板（参见 WinJS 控件 WinJS.Binding.Template）。如果您愿意，您还可以重用其他模板库，例如 Mustache.JS，并通过 itemTemplate 函数将它们挂钩。这是[我写的一篇关于](http://szymonrozga.net/blog/2013/02/reusing-existing-libraries-in-winjs-templates/)在 WinJS 中重用 Knockout 模板的文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:28:18.557

使用[转换器](http://msdn.microsoft.com/en-gb/library/windows/apps/br229809.aspx)来解决这个问题。在您的示例代码中，而不是这一行：

```
<p data-win-bind="textContent: files"></p> // i get [Object object], [Object object] 
```

您可以像这样添加转换器

```
<p data-win-bind="innerHTML: files myFilesToStringConverter"></p> 
```

并在 .js 文件中定义您的转换器，例如

```
var myFilesToStringConverter = WinJS.Binding.converter(function(files){
   var convertedValue = "<ul>";
   for(var i=0;i<files.length;i++){
      convertedValue += "<li><span>" +files[i].id + "</span> <span> " + files[i].title + "</span></li>";
   convertedValue += "<ul>";
   return convertedValue ;
   }
}); 
```

使用此转换器，您将看到按预期列出的文件的 ID 和名称。

# django - 我如何在 POST 上明确请求数据

> ID：15089202
> 
> 赞同：1
> 
> 时间：2013-02-26T12:30:37.053
> 
> 标签：django, tastypie

我很熟悉我可以设置`always_return_data`为`True`让服务器返回序列化数据`POST`并`PUT`请求。但是有没有办法我可以专门要求在特定`POST`呼叫而不是所有`POST/PUT`呼叫中返回数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:18:41.920

您可以在或方法中`always_return_data`设置`True`并手动删除捆绑包中的所有数据，但这只会导致返回一个空的 JSON（或您喜欢的任何序列化）对象，这并不完全是一个空响应。`dehydrate``alter_detail_data_to_serialize`

想要的行为可能最明确的方法是覆盖`<method>_list`and`<method>_detail`函数并根据您的需要实现是否返回数据的决定。

这是一个示例，`post_list`它需要一个名为 GET-Parameter`return_data`来决定：

```
def post_list(self, request, **kwargs):
    deserialized = self.deserialize(request, request.raw_post_data, format=request.META.get('CONTENT_TYPE', 'application/json'))
    deserialized = self.alter_deserialized_detail_data(request, deserialized)
    bundle = self.build_bundle(data=dict_strip_unicode_keys(deserialized), request=request)
    updated_bundle = self.obj_create(bundle, **self.remove_api_resource_names(kwargs))
    location = self.get_resource_uri(updated_bundle)

    return_data = updated_bundle.request.GET.get('return_data', None)

    if not return_data is None:
        updated_bundle = self.full_dehydrate(updated_bundle)
        updated_bundle = self.alter_detail_data_to_serialize(request, updated_bundle)
        return self.create_response(request, updated_bundle, response_class=http.HttpCreated, location=location)
    else:    
        return http.HttpCreated(location=location) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T14:50:20.207

我建议在您希望返回数据的帖子中添加一个额外的参数。如果参数存在于 post 变量中，则将所需的数据添加到 dehydrate 中的包中

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T23:22:11.387

在我看来，最好的方法是覆盖脱水方法并设置 always_return_data=True：

```
class SomeModelResource(ModelResource):
   class Meta:
      queryset = SomeModel.objects.all()
      always_return_data=True

   def dehydrate(self, bundle):
      if  request.META['REQUEST_METHOD'] == 'POST' and\
                  request.POST.get('param', None)=='PARAM':
           bundle.data = dict(id=bundle.obj.pk,
                               name=bundle.obj.name)
      return bundle 
```

# c# - 在 AJAX 更新面板中将焦点设置在动态添加的控件上

> ID：15089205
> 
> 赞同：1
> 
> 时间：2013-02-26T12:30:53.340
> 
> 标签：c#, asp.net, ajax

我需要将焦点放在我动态添加的标签上。这是我的 AJAX 面板

```
<asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:Panel ID="pnlProgress" runat="server" class="summaryBox" 
                   Style="width: 650px; height: 225px" ScrollBars="Auto">
            <asp:PlaceHolder ID="plcHolder" runat="server"></asp:PlaceHolder>
            <asp:Button ID="btnTrigger" runat="server" OnClick="Button1_Click"
                        Style="visibility: hidden" /></asp:Panel>
    </ContentTemplate>
</asp:UpdatePanel> 
```

这是我的 C# 代码

```
label.Text = "SomeText";
label.ID = "lblMessage" + messageNumber;
if (heading)
{
    label.Attributes.Add("style", "font-weight: bold;")                
}
UpdatePanel1.ContentTemplateContainer.Controls.Add(label);
plcHolder.Controls.Add(label); 
```

我试图在`SetFocus(label)`之后`label.Attributes`，但它没有工作。我不能在 JScript 中做到这一点，因为我不能`GetElement`在我动态创建的任何标签上做到这一点。有什么线索吗？我需要集中注意力，因为面板有滚动条，我希望它滚动到最后一个动态添加的标签

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:20:52.003

您可以直接在标签中调用焦点，例如：

```
 label.Text = "SomeText";
    label.ID = "lblMessage" + messageNumber;
    if (heading)
    {
        label.Attributes.Add("style", "font-weight: bold;")                
    }
    UpdatePanel1.ContentTemplateContainer.Controls.Add(label);
    plcHolder.Controls.Add(label);
    label.Focus(); 
```

但是，如果您想要滚动到该元素，那么标签将不起作用，我相信只有输入字段。您可以使用文本框和样式看起来像一个标签。

# c# - 为每次保存业务实体生成审计跟踪的可能方法

> ID：15089207
> 
> 赞同：4
> 
> 时间：2013-02-26T12:30:55.837
> 
> 标签：c#, .net, audit

我们目前需要为我们的一些主要业务实体实现审计跟踪生成，像往常一样，在这些情况下，我们需要保留每个已更改字段的旧值和新值以及一些标头数据，如时间戳、实体 ID 和用户谁做了拯救。

我知道有不同的方法可以做到这一点，例如：

1.  .NET 代码端，使用反射
2.  SQL Server 端触发器
3.  SQL Server CDC（更改数据捕获）

基于 .NET 反射的方法可能需要更长的时间来编写，但如果做得好，它将足够聪明，可以包含将来添加的新属性而无需更改任何代码，并且它还可以扩展和比较所有子实体（如添加到我们的主要 .NET 实体的其他子实体）。

我们实际上有一个遗留应用程序，它使用这种基于 .NET 的审计跟踪生成，我们将整个审计跟踪作为 XML 字段保存在 SQL 数据库中，多年来，审计表现在大约是 35GB 的数据。

我在想它在以下方面是多么容易成为基于触发器的解决方案：

*   首次实施
*   未来修改实体以进行审计所需的每项更改（添加/更改/删除字段等...）
*   审计数据的可读性如何？我们可以简单地查询一个显示特定保存操作的旧值和新值的查询吗？

……表演怎么样？

有没有人有这两种方法的经验，可以建议或指出一些利弊？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:39:57.583

每个组织的审计要求都非常具体。在我的上一个项目中，我们需要对发送到实时系统的消息进行审计跟踪。

体积很大。有时超过 50GB 的文本文件，有时平均为 10-15GB。

我们使用的第一个解决方案是在 SQL 中持久化它

*   性能缓慢
*   查询缓慢
*   归档解决方案同样慢
*   仅支持查询 db 记录

大约 2 年前

*   我们转移到直接登录到文本文件。打开并附加
*   我们每天 gzip 文本文件以减少占用的空间。
*   快速写入
*   慢读（读取压缩流和查询记录）

去年

*   将文件大小限制为 4Gb 并翻转以使用新文件（提高 gzip 性能，减少 OOM）
*   每天早上 gzip 任何文件
*   快速写入
*   可以执行并行读取，以便更好地读取（读取 gzipped 流和查询记录）

您选择什么取决于您的需求。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T14:01:33.500

过去，对于类似的需求，我已经转向域事件和消息传递。它确实带来了一些复杂性，但可能是值得的。我建议至少考虑一下。

本质上，您可以通过定义一个在对业务对象进行更改时触发的事件来使更改成为模型的一等公民。这些事件也是捕获业务意图的好方法，而不仅仅是现场级别的更改。例如，一个名为的业务事件`OrderRefunded`通常是一个比`OrderTotal field changed from 45.00 to 0.00`.

使用发布/订阅通过消息传递来触发这些域事件允许许多订阅者处理事件。这些订阅者之一可能是审核订阅者。这将所有性能影响（重建索引等）从处理原始请求的域中移开，并将负担放在审计订阅者身上。这也意味着您永远不会遇到审计代码中的错误导致业务交易处理中断的问题。

另一个好处是需要保存多少数据。这种方法为您提供了一个优势，即审计订阅者只需保存它打算使用的数据量。关于保存或归档多少数据的规则也本地化到处理审计的服务中。因此，您可以确定您不会在没有需要的情况下存储任何数据。

我过去使用的工具包括[NServiceBus](http://www.nservicebus.com/)和[RabbitMQ](http://www.rabbitmq.com/)。根据问题，每个都有其好处和责任。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:52:03.810

如果您将业务实体映射到视图，那么您可以使用[`INSTEAD OF`](http://msdn.microsoft.com/en-us/library/aa175158.aspx)触发器来生成您的审计日志。

# datastage - 在数据阶段中使用修剪功能时，ParamValue/Limitvalue 不是适当的错误

> ID：15089213
> 
> 赞同：1
> 
> 时间：2013-02-26T12:31:12.277
> 
> 标签：datastage

我在 DS 7.5 的用户变量活动中使用 Trim 函数

```
Trim(Trim(ExCmd_EmailReptType.$CommandOutput,"*","L"),"#","T") 
```

但作业正在中止并显示错误为“调用 DSSetParam(prmCNIRTP) 时出错，代码 =-4 [ParamValue/Limitvalue 不合适]”

有人可以帮我吗？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T06:46:40.847

我得到了答案，当我们遇到此类问题时，我们需要使用@FM：Field Mark

```
Trim(Trim(EReplace(ExCmd_EmailReptType.$CommandOutput,@FM,""),"*", "L"),"#","T") 
```

它现在正在工作:-)

# typo3 - 如何在typo3 4.7中从url中删除home段

> ID：15089217
> 
> 赞同：0
> 
> 时间：2013-02-26T12:31:29.260
> 
> 标签：typo3, typoscript

我使用typo3 4.7，我有一个带有根页面的结构，它是主页的快捷方式

现在我来自 domain.com 的 url 看起来像 domain.com/home/ - 如何删除我尝试使用说出 URL 路径段的主段：/ 但没有成功，它出现 domain.com/domain.com 和错误 404 什么是正确的解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:33:19.963

1.  删除说话的 url 路径段。
2.  将所有内容从“主页”页面移动到根页面。
3.  给根页面类型“标准”。
4.  将“主页”页面更改为指向根页面的链接。

# android - 没有任何选定选项卡的选项卡栏

> ID：15089219
> 
> 赞同：2
> 
> 时间：2013-02-26T12:31:34.833
> 
> 标签：android, android-actionbar, actionbarsherlock

我正在使用带有 5 个选项卡的 android sherlock 操作栏。我想启动显示 5 个选项卡但没有任何选定选项卡的应用程序（我知道这可能会让最终用户感到困惑......）有可能吗？怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:44:01.893

我不知道你为什么要创建这样的东西，但也许是 1 hacky 解决方案......

创建一个自定义选项卡，用未选择的选项卡可绘制图像替换选定的选项卡可绘制图像。当您单击一个选项卡后，它会将主题替换回选择的默认选项卡。

编辑：我发现一篇文章进一步解释了这个“技巧”。

[在 TabHost 中“取消选择”选项卡](https://stackoverflow.com/questions/7993755/unselect-a-tab-in-a-tabhost)

# perl - 在加载URL之前输入用户名和密码以加载URL

> ID：15089226
> 
> 赞同：-1
> 
> 时间：2013-02-26T12:32:04.110
> 
> 标签：perl, activestate

我正在尝试使用 ActiveState 的[ActivePerl](https://en.wikipedia.org/wiki/ActivePerl) ( `WWW::Mechanize`) 打开一个网站。

```
$mech -> get($url); 
```

上述行显示错误：

> 获取 URL 时出错：未经授权

URL 有一个表单，在其中输入凭据，只有在提交表单时才会加载 URL。即，在 URL 加载之前，它会询问用户名和密码。输入用户名和密码后，如何保持 URL 保持并加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:41:24.343

您必须使用**submit_form**方法：

```
use strict;
use warnings;
use WWW::Mechanize;

my $mech = WWW::Mechanize->new;

$mech->get("http://www.example.com/login");
$mech->submit_form(with_fields => {
    USERNAME => '*****',
    PASSWORD => '*****'
});

my $url = "http://www.example.com/page_test";
$mech->get($url); 
```

# c# - 如何为面板中的项目添加自定义行为？

> ID：15089237
> 
> 赞同：2
> 
> 时间：2013-02-26T12:32:37.370
> 
> 标签：c#, .net, wpf, wpf-controls

在我的 WPF 项目中，我需要一个具有以下行为的面板。当您单击一个项目时，它应该转到顶部项目。

![面板中项目的行为](../Images/83b3fcaf36e5ce430445bf009b935440.png)

我对此有几个问题： 1\. 我应该创建我的自定义面板并在 ArrangeOverride 方法中添加某种动画吗？

因此，我需要添加一些事件处理程序，但不要对位于此面板中的元素进行子类化，并且我还需要为上移过程设置动画。我非常坚持这个问题的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:23:13.817

我认为您不需要编写面板或向面板添加行为，如果您对类进​​行正确建模，那么您可以使用具有选择项目（即 ListBox）的 ItemsControls 来实现 - 我假设您正在使用MVVM。

这种方法的好处是您无需创建和维护您可能不需要的其他面板类型。此外，您的模型和视图模型中的所有内容都可以进行完全单元测试。我建议尽可能使用或扩展现有的 WPF 控件和容器，但是在这种情况下，我们可能会在没有它的情况下过关。

**视图模型**

```
public class ItemsVM
{

// You can always keep the items sorted based on you business rules
public ObservableCollection<ItemModel> Items {get;set;}

public ItemVM()
{
Items = new ObservableCollection<ItemModel>(){
new ItemModel(), new ItemModel()
};
}
} 
```

**模型**

```
public class ItemModel
{
public bool IsSelected {get;set;}
public ObservableCollection<ItemModel> Items {get;set;}

public ItemModel()
{
Items = new ObservableCollection<ItemModel>();
}
} 
```

**看法**

```
<ListBox ItemsSource={Binding Items} SelectionMode=Single /> 
```

一旦用户单击 ListBox 中的某个项目，您应该设置 ItemVM 中相应项目的 IsSelected 属性，在此属性更改时，您可以将此项目添加到列表中顶部元素的 Items 集合中。

您可以完全控制如何模板化您的 ItemModel，顶部项目现在在 Items 集合中有一个项目，可以按照您在图表中的方式显示。

**关于动画** 这可以使用代码隐藏或附加属性来完成，这个想法很简单，你知道用户点击列表框的位置，你应该能够获得列表框顶部元素的位置，为 DataTemplate 设置动画当前点击位置到列表顶部

# c# - 哪个单例实现更好 C#

> ID：15089245
> 
> 赞同：2
> 
> 时间：2013-02-26T12:32:59.197
> 
> 标签：c#, singleton

在 C# 中实现单例模式有多种不同的方法。我将在此处以优雅的相反顺序介绍它们，从最常见的非线程安全的开始，到完全延迟加载、线程安全、简单且高性能的版本。

我在谷歌中寻找“如何实现单例”并找到了 3 种方式，哪个单例实现更好的 C#？

1)**此代码使用 lock()**

```
public class Singleton

{
    // Static object of the Singleton class. 
    private static volatile Singleton _instance = null;

    /// <summary>
    /// The static method to provide global access to the singleton object.
    /// </summary>
    /// <returns>Singleton object of class Singleton.</returns>
    public static Singleton Instance()
    {
        if (_instance == null)
        {
            lock (typeof(Singleton))
            {
                _instance = new Singleton();
            }
        }
        return _instance;
    }

    /// <summary>
    /// The constructor is defined private in nature to restrict access.
    /// </summary>
    private Singleton() { }

} 
```

2）**这段代码是静态初始化**

```
/// <summary>
/// A sealed class providing access to it's ONLY readonly static instance.
/// </summary>
sealed class SingletonCounter 
{
    public static readonly SingletonCounter Instance = 
         new SingletonCounter();

    private SingletonCounter() {}
} 
```

3)**此代码使用 Lazy 类型。**

```
public sealed class Singleton
{
    private static readonly Lazy<Singleton> lazy =
        new Lazy<Singleton>(() => new Singleton());

    public static Singleton Instance { get { return lazy.Value; } }

    private Singleton()
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:40:56.763

除非有压倒一切的原因，否则您应该选择“简单”。确实，您已经巧妙地证明，使用更奇特的模式可能会弄乱它们（如在 1 中，它至少有 2 个值得注意的问题）。所以你应该更喜欢 2 ，因为它*显然是正确*的。它的缺点是它不是懒惰的，但是由于该类型没有其他方法，您可以做的唯一有用的事情就是*获取实例*，所以这不是问题：永远不会出现这种情况懒惰是有用的。它也是完全无锁的，并且没有要评估的条件来获取实例。

# list - Lotus Notes - 实际元素与列表之前的元素之间的差异

> ID：15089246
> 
> 赞同：0
> 
> 时间：2013-02-26T12:32:59.380
> 
> 标签：list, view, lotus-notes

我的表单包含一个名为：的数字字段`txt_number`，它是经过计算的，它是两个可编辑数字字段的总和：`txt_no1`和`txt_no2`。

所有`txt_number`字段都存储在一个视图中（以便能够获取之前的元素），以这种方式：

```
@Unique ( @DbLookup( "" : "NoCache" ; @DbName ; "vwTest" ; field1+field2 ; 2 )); 
```

“vwTest” 有 2 列：第一列是分类的（ field1+field2 ），第二`txt_number`列是其默认列值。

因此，我的主题问题列表`"vwTest"`包含第二列中的所有`txt_number`值。

假设保存的第一个文档将具有`txt_number = 5`. 当一个新的文档。创建，并计算 txt_no1 和 txt_no2 ，我们得到`txt_number = 10`。

表单有一个计算字段`txt_diff`，我想在其中获得最后一个 txt_number 和实际值之间的差异。（`10 - 5 = 5`）

因此，如果它将是另一个带有`txt_number = 50`=>的新表单`txt_diff`（在这个新创建的文档上）应该是`50-10 = 40.`

`vwTest`: 字段1+字段2 | txt_number

*   项目清单

    ```
     |   1   ( => on this doc, `txt_diff = 1` )
                  |   10  ( => on this doc, `txt_diff = 9` )
                  |   23  ( => on this doc, `txt_diff = 13`)
       ....................... 
    ```

拜托我需要你的帮忙。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T03:57:25.470

它仍然有些令人困惑，但如果我理解你，你需要使用该视图作为参考来计算 txt_diff。

在这种情况下，您可以在事件 QueryRecalc 或 QuerySave 中放置一些代码来进行计算。这是一个示例代码：

（我是靠记忆编码的，所以可能会有一些错误）

```
dim o_view as NotesView
dim o_nav as NotesViewNavigator
dim o_doc as NotesViewEntry

set o_view = o_current_db.GetView("view_categorized_by_field1_field2")
set o_nav = o_view.CreateViewNavFromCategory(field1+field2)
set o_doc = o_nav.GetlastDocument  '<== THIS IS YOUR DOCUMENT TO CALCULATE txt_diff

'Do something more 
```

但是，除非您需要实时 txt_diff，否则您可以创建一个代理来每 X 分钟进行一次计算。这两种解决方案都取决于您的应用程序需要什么。

我希望这有帮助。

# iphone - 使用 IB 自动重新定位 UI 元素

> ID：15089249
> 
> 赞同：1
> 
> 时间：2013-02-26T12:33:17.343
> 
> 标签：iphone, ios, objective-c, interface-builder

我最初是一名 Android 开发人员，现在从 iOS 开始，但我在做一些非常简单的事情时遇到了一些问题：根据其他 UI 元素重新定位 UI 元素。例如，看下图：

![在此处输入图像描述](../Images/e5c8fa938bf8a212ff2a9959a09d7426.png)

**图 1：**我创建了一个包含图像、标签和两个按钮的布局。

**图 2：**我以编程方式隐藏了图像，然后标签和两个按钮重新定位并占据了图像最初所在的位置。

我知道这可以通过编程方式完成，但是有没有办法只使用 Interface Builder 来实现相同的行为？在 Android 中做到这一点真的很简单，所以我希望我们可以在 iOS 上做同样的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:43:17.463

如果您以编程方式隐藏图像，则无法在 IB 中执行此操作。它不像 android U 必须在执行之前拖动它或调整 xib 文件中的大小检查器以供 iOS 执行。

在 xib 文件中，所有文件都是静态的，如果您想在执行期间进行任何更改，您应该以编程方式进行。

即，设置标签的框架（我想你正在使用Textview）和按钮到imageview的框架

或者

通过使用 tableview 以编程方式添加图像视图、标签、按钮

# web-services - 如何在 wp7 中发送推送通知？

> ID：15089250
> 
> 赞同：2
> 
> 时间：2013-02-26T12:33:21.667
> 
> 标签：web-services, windows-phone-7, c#-4.0, push-notification, mpns

我是推送通知的新手，我想在我的 wp7 应用程序上显示通知。

我的概念是当网络服务向我发送通知时，我将此通知保存在我的本地数据库中，而不是在我的页面中显示之后。

我搜索了更多但没有得到解决方案

我也尝试了这个 microsoft 链接，但这里没有生成 uri [如何发送和接收 Windows Phone 的 toast 通知](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202967%28v=vs.105%29.aspx)

我也试过微软客户端推送通知，但这不起作用。

如何使用 Web 服务发送和接收通知？

给我一些建议。

**已编辑**

如果可能的话，比给我一些时间在 wp7 中在第一级实现推送通知

如何在我的应用程序中接收通知以及如何处理通知

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T09:36:05.827

请观看这些视频，它们解释了如何在您的 wp7 应用程序中实现推送通知以及推送通知的类型：

[http://msdn.microsoft.com/en-us/gg153660.aspx](http://msdn.microsoft.com/en-us/gg153660.aspx)

# database - 底层数据库datomic是在什么中实现的？

> ID：15089258
> 
> 赞同：3
> 
> 时间：2013-02-26T12:33:49.087
> 
> 标签：database, clojure, datomic

我的理解是，datomic 是在现有的键值存储之上实现的。有谁知道那是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T12:51:40.917

Datomic 不是围绕特定的键值存储构建的。它支持多个存储后端。

目前支持的后端有各种 SQL 数据库、[DynamoDB](http://aws.amazon.com/dynamodb/)、[Riak](http://basho.com/riak/)、[Couchbase](http://www.couchbase.com/)和[Infinispan 内存集群](http://www.jboss.org/infinispan)。Datomic 的免费版使用嵌入式[H2 SQL 数据库](http://www.h2database.com)。未来可能会支持更多的后端。

Datomic 旨在允许您通过导出/导入数据从一个存储后端切换到另一个存储后端。

您可能想查看 [http://www.datomic.com/overview.html](http://www.datomic.com/overview.html)和[http://docs.datomic.com/storage.html](http://docs.datomic.com/storage.html)

# c# - 3 次尝试后锁定用户帐户 30 分钟并在 6 次后完全锁定？

> ID：15089262
> 
> 赞同：3
> 
> 时间：2013-02-26T12:33:57.647
> 
> 标签：c#, asp.net-mvc-3, asp.net-membership

如果进行了 3 次成功尝试，我如何将用户帐户锁定 30 分钟，但如果进行 6 次尝试，该帐户将被锁定，需要管理员解锁。

所以在我的网络配置中，我有：

```
maxInvalidPasswordAttempts="6" 
```

这很好，因为如果在 aspnetdb 表中进行了 6 次无效尝试，我可以看到 IsLockedOut 设置为 true。但是我正在尝试以此为基础，以便如果用户输入错误的详细信息 3 次，我会执行以下操作：

```
 if (user.FailedPasswordAttemptCount > 3)
                    {
                        memberUser.IsApproved = false;

                        ModelState.AddModelError("", "Your account has been locked out for 30 minutes.  Please retry after this time has elasped.  Note 3 further wrong entries " +
                        "will result in your account being locked requiring Admin reset");

                        membershipService.UpdateUser(memberUser);

                    } 
```

所以用户是我在我的数据库中创建的一个视图，我从 aspnetdb 表中获取值，如果尝试超过 3 次，我将 aspnet db 表上的 isApproved 属性设置为 false。

在我的登录方法中，我有以下内容：

```
 if (memberUser.IsApproved == false)
            {

                DateTime PasswordFailedTime = user.FailedPasswordAttemptWindowStart.AddMinutes(30);
                DateTime CurrentTime = DateTime.UtcNow;

                if (CurrentTime > PasswordFailedTime)
                {
                   memberUser.IsApproved = true;
                   membershipService.UpdateUser(memberUser);
                }

            } 
```

因此，如果自失败时间起已过去 30 分钟，请重新批准该帐户。问题是即使我在屏幕上说等待 30 分钟 - 如果用户再次尝试 3 次我想锁定帐户。但是因为我假设 IsApproved 属性为假，所以 FailedPasswordAttemptCount 永远不会增加，所以我永远不会达到锁定帐户的 6 值并显示消息说您的帐户被锁定，需要管理员解锁。

# php - DOMXPath 的构建成本是多少？

> ID：15089265
> 
> 赞同：0
> 
> 时间：2013-02-26T12:33:59.067
> 
> 标签：php, xml, dom, xpath, domdocument

在编写复杂的 XML 文档的解析器时，我想知道是否可以`DOMXPath`在需要时构造实例：

```
function parseData($d) {
    $xpath = new DOMXPath($d);
    // ...
}

function parseMoreData($d) {
    $xpath = new DOMXPath($d);
    // ...
}

$d = new DOMDocument();
$d->loadXML($xml);
parseData($d);
parseMoreData($d); 
```

另一种方法是在开始时创建一个`DOMXPath`实例，然后在解析器的任何地方重用它：

```
function parseData($d, $xpath) {
    // ...
}

function parseMoreData($d, $xpath) {
    // ...
}

$d = new DOMDocument();
$d->loadXML($xml);
$xpath = new DOMXPath($d);
parseData($d, $xpath);
parseMoreData($d, $xpath); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-23T20:22:09.633

在需要时创建实例是非常好的`DOMXpath`，PHP 中的这些内置类没有太多开销。尤其是 DOMDocument / DOMXpath，它们只是围绕 libxml 的特性。

那么还有什么更重要的是您打开了多少（不同）文档，而不是`DOMXpath`您创建了多少对象。

也不是将 a 传递给`DOMDocument`解析函数：

```
function parseData(DOMDocument $doc) 
{
    $xpath = new DOMXPath($doc);

    // ...
} 
```

您可以传递 xpath - 它也携带文档：

```
function parseData(DOMXpath $xpath) 
{
    $doc = $xpath->document;

    // ...
} 
```

因此，您的具有两个函数参数的替代示例在技术上根本不需要。由于您只关心该细节，因此最后一个建议应该可以解决您的“问题”。

请记住，当您遇到真正的问题时，您通常只需要关心性能。这里的代码只是通过注入要操作的对象而不是在函数内部创建它来改进。这称为依赖注入，是一种更好的编写代码的方法：函数应该询问（阅读：有一个参数）他们需要什么，而不是自己创建它。他们应该专注于工作（这里是解析数据），而不是注意实例化`DOMXPath`第一个。

* * *

### `O(1)`（大 O 表示法）的问题。

有多贵`new DOMXpath($doc)`？是`O(1)`吗？在评论中，根据我从经验和理解中了解到的情况，我给出了肯定的回答。

现在我还研究了lxr。当创建一个新`DOMXPath`的（[PHP-C-Code 中的构造函数](http://lxr.php.net/xref/PHP_5_2/ext/dom/xpath.c#72)`DOMDocument`）时，它只是 libxml（扩展的底层 C 库）中结构的一个包装器： [`xmlXPathContext`](http://xmlsoft.org/html/libxml-xpath.html#xmlXPathContext).

所有这些代码看起来都非常简单，并且只读取/设置单个值（不是其他大小列表），所以我现在说是的，肯定会创建一个`DOMXPath`is `O(1)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:58:56.390

您的替代方案当然更有效，因为它不会重建一个 domXpath。但是您必须记住的是，您在这里需要的唯一对象是 DomXPath。可以看到，DOMXpath 的构造函数只依赖于你给他的 DOMDocument 实例。因此，如果您的函数仅将 DOMXpath 作为参数，那将是相同的。

您可以使用 访问 xpath 的文档`$xpath->document`。

然后，就如你所愿，你赢得的性能不是那么显着，只有 252 字节。

关于您将花费的时间，仅当您使用大文件时才会变得重要，因为解析时间将比任何其他处理更重要，并且每次启动 DOMXPath 时。一种解决方案是使用工厂模式：

```
class XPathFactory{
    private static instances=array();
    public static function getXPath($doc,$namespacePrefix){
        if(!isset(self::$instances[spl_object_hash($doc).$namespacePrefix]){
           self::$instances[spl_object_hash($doc).$namespacePrefix] = new DOMXPath($doc);
           self::$instances[spl_object_hash($doc).$namespacePrefix]->registerNamespace($namespacePrefix);
         }
         return self::$instances[spl_object_hash($doc).$namespacePrefix];
    }
 } 
```

然后在你的函数中你只需要调用：

```
 XPathFactory::getXPath($doc,$namespace); 
```

并且您将获得良好的 XPath 而无需进行太多实例化。

# ios - searchBarSearchButtonClicked 不能与 shouldChangeTextInRange 一起使用

> ID：15089270
> 
> 赞同：1
> 
> 时间：2013-02-26T12:34:24.067
> 
> 标签：ios, uisearchbar, uisearchbardelegate

我有以下 UISearchBar 委托方法，它自己工作（它在单独时被调用）。

```
-(void)searchBarSearchButtonClicked:(UISearchBar *)searchBar{
    [self downloadFruits:searchBar.text];
    [self.view endEditing:YES];
} 
```

当我添加另一个 UISearchBar 委托方法时，前一个委托方法停止工作（不再调用它）。

```
#define CHARACTERS @"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz _-."
#define CHARACTERS_NUMBERS  [CHARACTERS stringByAppendingString:@"1234567890"]

-(BOOL)searchBar:(UISearchBar *)searchBar shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text{
    NSCharacterSet *unacceptedInput =
    [[NSCharacterSet characterSetWithCharactersInString:CHARACTERS_NUMBERS] invertedSet];
    // If array has more than one entry, there was at least one unacceptable character
    if ([[text componentsSeparatedByCharactersInSet:unacceptedInput] count] > 1)
        return NO;
    else
        return YES;
} 
```

它们中的每一个都可以单独使用，但不调用第一个（搜索按钮）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T17:54:17.730

我认为您应该将 \n 添加到 CHARACTERS

```
#define CHARACTERS @"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz _-.\n" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:45:34.443

我认为第二个方法总是返回`NO`，这使得第一个没有被调用

# asp.net-mvc - 使用 MVC ASP.NET 将数据插入多个表

> ID：15089282
> 
> 赞同：4
> 
> 时间：2013-02-26T12:35:04.240
> 
> 标签：asp.net-mvc, master-detail, asp.net-mvc-viewmodel

我是 MVC ASP.NET 的新手。虽然这可能在过去已经解决了，但我仍然无法得到一个完整的解决方案来解决我的问题。

问题：我有两张桌子
**视频**

列是：VideoID、FlimName、描述

**视频详情**

列是： VideoDetailsID 、 Actor 、 VideoID （来自表视频的外键）

我希望从我的 MVC 模型中将数据插入到这两个表中。[首先插入**Video** Table ，然后是**VideoDetails** 与 Video Table 的主键，即 VideoID 也与**VideoDetails** Table 的记录一起插入]。

我已经找到了一些解决问题的方法，但它似乎并没有合并成一个完整的解决方案。

我可以在逐步解决这个问题的方法上获得一些有用的链接，或者有人可以帮助我解决这个问题。

我在这个论坛上阅读了 ViewModel 方法，但仍不清楚它的功能和流程。请帮忙。

谢谢，

曼格什

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:56:44.807

您想要的方法是使用实​​体框架。您可以在此处找到有关实体框架的更多信息：

[http://www.asp.net/entity-framework](http://www.asp.net/entity-framework)

如果您使用的是实体框架，代码将如下所示：

```
var context = new MyDBModelContext();

tblVideo video = new tblVideo()
{
    FileName = theFileName,
    Description = theDescription
};

context.tblVideos.Add(video);
context.SaveChanges();

tblVideoDetails details = new tblVideoDetails()
{
    VideoID = video.VideoID,
    Actor = theActor,
};

context.tblVideoDetails.Add(details);
context.SaveChanges(); 
```

如果您正在使用`SQL`，请将相应的详细信息传递到您的存储过程并插入如下：

```
INSERT INTO Video
    (FileName, Description)
    VALUES(@FileName, @Description)

INSERT INTO VideoDetails
    (VideoID, Actor)
    VALUES(SCOPE_IDENTITY( ), @Actor) 
```

注意：上面的 SQL 应该可以工作，但首先要测试。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:43:47.133

有不同的解决方案可以执行此操作。如果您想使用淘汰赛，那么示例就[在这里](http://growingtech.blogspot.com/2012/08/master-detail-with-knockout-in-aspnet.html)。你也可以看看[这个](http://blog.stevensanderson.com/2010/01/28/validating-a-variable-length-list-aspnet-mvc-2-style/)帖子

[您可能会在这里](http://zahidadeel.blogspot.com/2011/05/master-detail-form-in-aspnet-mvc-3-i.html)看到另一种方法

您可能还会看到[Mvc 控件工具包](http://mvccontrolstoolkit.codeplex.com/wikipage?title=DetailFormFor%20Helper)

# php - 尝试发送带有附件的邮件

> ID：15089286
> 
> 赞同：0
> 
> 时间：2013-02-26T12:35:16.013
> 
> 标签：php, image, email, attachment

我制作了一个将图像上传到上传文件夹的表单。但现在我需要将图像邮寄到附件中。我试过这个

```
$Body .= "http://myurl.nl/upload/" . $filename . ""; 
```

实际上，图片是否在附件中并不重要，只要他们可以直接从我的服务器下载它们即可。所以现在我在文件的路径上苦苦挣扎

```
$allowedExts = array("jpg", "jpeg", "gif", "png");
$extension = end(explode(".", $_FILES["file"]["name"]));
if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg"))
&& ($_FILES["file"]["size"] < 10000000)
&& in_array($extension, $allowedExts))
{
if ($_FILES["file"]["error"] > 0)
{
echo "Return Code: " . $_FILES["file"]["error"] . "<br>";
}
else
{
echo "Upload: " . $_FILES["file"]["name"] . "<br>";
echo "Type: " . $_FILES["file"]["type"] . "<br>";
echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
echo "Temp file: " . $_FILES["file"]["tmp_name"] . "<br>";

if (file_exists("upload/" . $_FILES["file"]["name"]))
  {
  echo $_FILES["file"]["name"] . " already exists. ";
  }
else
  {
  $filename = str_replace(' ', '', $_FILES["file"]["tmp_name"]);
  move_uploaded_file($_FILES["file"]["tmp_name"],
  "upload/" . $filename);
  echo "Stored in: " . "upload/" . $_FILES["file"]["name"];
  }
  }
 }
else
 {
 echo "Invalid file";
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:37:48.210

我会使用 Swiftmailer 并使用以下方法： [http ://swiftmailer.org/docs/messages.html#attaching-files](http://swiftmailer.org/docs/messages.html#attaching-files)

```
<?php

require_once 'lib/swift_required.php';

// Create the message
$message = Swift_Message::newInstance()

  // Give the message a subject
  ->setSubject('Your subject')

  // Set the From address with an associative array
  ->setFrom(array('john@doe.com' => 'John Doe'))

  // Set the To addresses with an associative array
  ->setTo(array('receiver@domain.org', 'other@domain.org' => 'A name'))

  // Give it a body
  ->setBody('Here is the message itself', 'text/html')

  // You can attach files from a URL if allow_url_fopen is on in php.ini
  ->attach(Swift_Attachment::fromPath('my-document.pdf'));

// If you have SMPT, use the SMTP transport(http://swiftmailer.org/docs/sending.html#using-the-smtp-transport)
// Create the Transport
$transport = Swift_MailTransport::newInstance();

// Create the Mailer using your created Transport
$mailer = Swift_Mailer::newInstance($transport);

// Send the message
$numSent = $mailer->send($message);

printf("Sent %d messages\n", $numSent);

/* Note that often that only the boolean equivalent of the
   return value is of concern (zero indicates FALSE)

if ($mailer->send($message))
{
  echo "Sent\n";
}
else
{
  echo "Failed\n";
}

*/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:38:33.070

答案取自 dqhendricks in [php send email with attachment](https://stackoverflow.com/questions/4586557/php-send-email-with-attachment)

```
function mail_attachment($to, $subject, $message, $from, $file) {
      // $file should include path and filename
      $filename = basename($file);
      $file_size = filesize($file);
      $content = chunk_split(base64_encode(file_get_contents($file))); 
      $uid = md5(uniqid(time()));
      $from = str_replace(array("\r", "\n"), '', $from); // to prevent email injection
      $header = "From: ".$from."\r\n"
          ."MIME-Version: 1.0\r\n"
          ."Content-Type: multipart/mixed; boundary=\"".$uid."\"\r\n\r\n"
          ."This is a multi-part message in MIME format.\r\n" 
          ."--".$uid."\r\n"
          ."Content-type:text/plain; charset=iso-8859-1\r\n"
          ."Content-Transfer-Encoding: 7bit\r\n\r\n"
          .$message."\r\n\r\n"
          ."--".$uid."\r\n"
          ."Content-Type: application/octet-stream; name=\"".$filename."\"\r\n"
          ."Content-Transfer-Encoding: base64\r\n"
          ."Content-Disposition: attachment; filename=\"".$filename."\"\r\n\r\n"
          .$content."\r\n\r\n"
          ."--".$uid."--"; 
      return mail($to, $subject, "", $header);
     } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-09T20:08:06.593

我也会使用 Swiftmailer（我在使用 symfony 1.4 开发时仍然使用它）。

但为了完成这个答案，Swiftmailer 在附加远程文件时遇到了一些问题，特别是 PDF 文件。这仍然是一个悬而未决的问题（[https://github.com/swiftmailer/swiftmailer/issues/207](https://github.com/swiftmailer/swiftmailer/issues/207)）。但在本期结束时，您可以找到一种解决方法，即：

```
$attachment = Swift_Attachment::newInstance(file_get_contents($url_file)); 
```

我会通过重命名文件名来补充它，或者它会附加一个 nonane 文件：

```
$attachment = Swift_Attachment::newInstance(file_get_contents($url_file))->setFilename('arquivo.pdf'); 
```

而已 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T14:32:30.660

看在上帝的份上，请不要尝试使用 PHP 的内置`mail()`函数来发送附件——这对于基本邮件来说已经够糟糕了，但对于附件，你**真的**需要使用一个像样的库。

您可以使用几个库。

我建议[phpMailer](http://code.google.com/a/apache-extras.org/p/phpmailer/)。它非常易于使用，并且使添加附件变得非常简单——请参阅[此示例页面](http://code.google.com/a/apache-extras.org/p/phpmailer/wiki/BasicMail)以了解它是多么容易。

是的，这意味着您必须丢弃现有代码。这是一件好事。没有冒犯您的代码，但它肯定不是一个像样的邮件库。phpMailer 已经开发了*多年*，并且已经处理了当时出现的所有错误和怪癖。如果您准备花费同样多的时间来修复自己代码中的错误，那么请务必自己动手。如果没有，您真的应该使用其他人已经为您完成所有艰苦工作的库。

# jquery - jQuery ajax：获取原始响应文本

> ID：15089287
> 
> 赞同：1
> 
> 时间：2013-02-26T12:35:16.340
> 
> 标签：jquery, ajax

我想得到一个ajax请求的原始文本。例如，如果我设置`contentType: 'application/json'`，我想在成功方法中获取一个字符串，而不是 JSON 解析结果。（我无法在服务器的响应中发送 Content-Type 标头，因为服务器不在我的控制之下）。

原因：从服务器获取的 JOSN 被很好地格式化了，我在对话后失去了这个队形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:46:12.113

您永远不会丢失 JSON，它只会被转换为可用的 javascript 对象。

您可以使用 JSON.stringify() 将其转换回字符串，或者您可以将其用作它应该是的对象，或者您可以在 ajax 请求中使用 dataType 选项告诉 jquery 您想要字符串，而不是目的

```
$.ajax({
  ...
  dataType : "text"
  ...
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:50:37.263

cernunnos 发布的替代方法：

```
<script>
    $.ajax({
        url: "/your.json",
        beforeSend: function ( xhr ) {
            xhr.overrideMimeType("text/plain; charset=utf-8");
        },
        success: function(data) {
            window.console.log(data);
        }
    });
</script> 
```

# c# - 无法以继承的形式直观地更改 DataGridView

> ID：15089289
> 
> 赞同：7
> 
> 时间：2013-02-26T12:35:29.450
> 
> 标签：c#, winforms, visual-studio-2010, inheritance

我有一个 WinForms 表单，`DataGridView`上面有一个。`DataGridView`设置`protected`为。

当我继承该表单时，无法`DataGridView`在 Visual Studio 设计器中更改。如果我用 a 完成整个事情`Button`，它会按预期工作。

有没有办法解决这个问题？

一些（剪辑的）代码（来自 DatagridForm.Designer.cs）：

```
partial class DatagridForm {
    protected DataGridView dgData;
    protected Button button;
} 
```

并来自 Inherited.cs：

```
partial class Inherited : DatagridForm {

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T13:16:13.503

这个[博客](http://dotnetengineer.wordpress.com/2008/06/27/visual-inheritance-using-datagridview/)有解决方案：只需创建一个指向正确设计器内容的继承用户控件：

```
[Designer(typeof(System.Windows.Forms.Design.ControlDesigner))]
public class ucInheritedDataGridView : DataGridView { } 
```

奇迹般有效。唯一的缺点是您不能使用 .NET 客户端配置文件，因为它不支持 System.Forms.Design（您必须添加`System.Design`作为参考）。这应该不是太大的问题，因为客户端配置文件[无论如何都已被弃用 4.5](http://msdn.microsoft.com/en-us/library/cc656912.aspx)。

如果您确实需要客户端配置文件，另一种解决方法是将其包装`DataGridView`在 a`Panel`中，您可以移动和调整其大小。

# c# - 如何在 iTextSharp PDF Stamper 中使用 UTF-8 编码？

> ID：15089291
> 
> 赞同：1
> 
> 时间：2013-02-26T12:35:33.703
> 
> 标签：c#, pdf, utf-8, itextsharp, itext

我想使用 UTF-8 而不是 CP1250 来显示国家字符。我找到了支持 UTF-8 的 AddParagraph 方法，但我找不到任何压模示例。

这是 CP1250 的代码片段：

```
 PdfReader reader = new PdfReader(templatePath);
        byte[] bytes;
        using (MemoryStream ms = new MemoryStream())
        {
            using (PdfStamper stamper = new PdfStamper(reader, ms))
            {
                PdfContentByte cb = stamper.GetOverContent(1);

                BaseFont bf = BaseFont.CreateFont(
                   BaseFont.COURIER_BOLD, 
                   BaseFont.CP1250, 
                   true);

                //Begin text command
                cb.BeginText();
                //Set the font information                        
                cb.SetFontAndSize(bf,12f);

                //Position the cursor for drawing
                cb.MoveText(field.X, field.Y);
                //Write some text
                cb.ShowText(field.Text);
                //End text command
                cb.EndText();

                //Flush the PdfStamper's buffer
                stamper.Close();
                //Get the raw bytes of the PDF
                bytes = ms.ToArray();
            }
        } 
```

如何使用 UTF-8？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T13:22:52.580

如果您需要来自单一字体的大量字符，您很可能应该使用 IDENTITY_H（或 IDENTITY_V，如果是垂直文本）作为编码。

例如：

```
public const string FONT = "c:/windows/fonts/arialbd.ttf";
BaseFont bf = BaseFont.CreateFont(FONT, BaseFont.IDENTITY_H, BaseFont.EMBEDDED); 
```

*参照。用于上下文的[Webified iTextSharp Example](http://kuujinbo.info/iTextInAction2Ed/index.aspx) [UnicodeExample.cs 。](http://kuujinbo.info/iTextInAction2Ed/index.aspx?ch=Chapter11&ex=UnicodeExample)*

# matlab - 如何使用 MATLAB 训练能够计算 XOR 的神经网络？

> ID：15089293
> 
> 赞同：2
> 
> 时间：2013-02-26T12:35:36.793
> 
> 标签：matlab, neural-network

我正在尝试使用 MATLAB 训练一个简单的前馈网络。它计算 XOR。这是我的代码：

```
net = feedforwardnet([3]);
P = [0 0; 0 1; 1 0; 1 1]';
T = [0 1 1 0]; % desired output
net = configure(net, P, T);
net.trainParam.goal = 1e-8;
net.trainParam.epochs = 1000;
net = train(net, P, T); 
```

它表示目标已实现。但是，我没有得到想要的输出：

```
sim(net, P)

1.4885    0.6830    0.7796    0.3879 
```

我错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:35:39.220

你需要更多的训练例子。重复其中一些。

就我而言，我尝试过：

```
net = feedforwardnet([3]);
%Repeat 4 times
P = [0 0; 0 1; 1 0; 1 1; 0 0; 0 1; 1 0; 1 1; 0 0; 0 1; 1 0; 1 1; 0 0; 0 1; 1 0; 1 1]';
T = [0 1 1 0 0 1 1 0 0 1 1 0 0 1 1 0]; % desired output
net = configure(net, P, T);
net.trainParam.goal = 1e-8;
net.trainParam.epochs = 1000;
net = train(net, P, T); 
```

结果是

```
 sim(net, P)

ans =
  Columns 1 through 8
    0.0000    1.0000    1.0000    0.0000    0.0000    1.0000    1.0000    0.0000
  Columns 9 through 16
    0.0000    1.0000    1.0000    0.0000    0.0000    1.0000    1.0000    0.0000 
```

# frameworks - 适合初学者的 Slim 框架

> ID：15089294
> 
> 赞同：51
> 
> 时间：2013-02-26T12:35:47.063
> 
> 标签：frameworks, slim

有人如何学习如何使用这个系统？

我似乎找不到任何教程或书籍或任何关于如何使用这个程序的东西。是的，他们的网站简要解释了一些事情，但没有澄清或任何事情。谷歌让我失望了。

谁能帮我这个？我需要使用它，但它对我来说看起来完全陌生。

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2013-02-26T12:56:46.397

**更新：** 3年后，是时候为这个答案添加一些更新了。在此期间，Slim 框架（甚至 PHP）发生了很多变化。

Slim 版本 3 已发布并对其进行了一些重大更改。在我的测试中，它比 slim 2 稍微慢一些并且稍微复杂一点，但是在架构方面，它更好、更安全，适合大型项目和小型网站。
此外，PHP 采用了[PSR](http://www.php-fig.org/)形式的非常好的标准化，我认为每个人都应该开始采用。面向对象的实现在 3 年内有了很大的改进，随着 PHP 7 的发布，我不再怀念我的 Java 日子了。

一些入门链接。

*   Slim 框架现在有[优秀的文档](http://www.slimframework.com/docs/)，如果有人还在使用 Slim2，它也有[不错的文档](http://docs.slimframework.com/)。
*   必须观看 Slim 3 Primer 才能开始。[http://phpsw.uk/talks/a-slim-3-primer](http://phpsw.uk/talks/a-slim-3-primer)
*   [Slim Blog](http://www.slimframework.com/blog/)真的是很好读的东西。
*   [https://github.com/xssc/awesome-slim](https://github.com/xssc/awesome-slim)是书签的好地方。

Treehouse 和其他一些人在评论中提到了一些关于 Slim 2 的教程，它们值得一看。Slim 3 还没有初学者的教程视频，但框架本身很容易理解。对于简单的网站，我仍然会向那些不是真正有经验的程序员推荐 Slim 2。但是如果有人试图构建一个大型的专业应用程序/产品，请使用 Slim 3。

* * *

*较旧的答案*

我同意 slim 在文档和指南方面缺乏某些关注。仍然没有很好的教程，但如果你有很好的拾取技巧，让我指出我在网上找到的唯一有价值的东西。

这是关于超薄框架的介绍。不是一个完整的教程，但它确实解释了使用该框架的某些基础知识。当我第一次拿起框架时，它帮助了我。 [这是杰里米·肯德尔（Jeremy Kendall）的演讲。](http://www.google.com.pk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCwQtwIwAA&url=http%3A%2F%2Fwww.youtube.com%2Fwatch%3Fv%3DyEA0VWHCFac&ei=mgWvUtrDBKSV0QXj8oCwBw&usg=AFQjCNFmfEsIa8g67GmnJOZAyOWGRSB--w&sig2=9dgaXZItU2LtJiEg6HOdjg&bvm=bv.57967247,d.bGQ&cad=rja)

幻灯片可以在[slideshare 上找到。](http://www.slideshare.net/jeremykendall/keeping-it-small-slim-php)

视频长 43 分钟，但值得。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-11-27T21:23:09.490

我就是这样做的。

我从那里的人那里读了几篇教程，然后**我“走过”了代码**。Slim 真的很“苗条”，只有大约 50 个文件。

检查`Slim.php`文件，一切从那里开始。查看构造函数中发生了什么，然后查看 get/post 方法。如果您已经`xdebug`安装，那么它可以帮助您完成一个简单的请求，依此类推。

作为额外的奖励，您将学到很多关于 PHP、模式以及一切工作原理的知识。

PS我在这里的第一个答案:)

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2014-02-13T04:19:57.803

Jeremy Kendall 上面提到的演示文稿中的关键点（请观看），文档直到 2/3 时才提到：要让 Slim 处理路由，您需要一个*.htaccess*文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^ index.php [QSA,L] 
```

瞧，Slim 文档开头的示例现在可以为您工作了。*捶着额头*

*有关这些.htaccess*规则的语法和内容的更多信息：

*   [重写条件](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)
*   [重写规则](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-08-29T07:12:59.063

简单示例

**需要3个文件**

*   文件到程序（例如- index.php/myfile.php）
*   Slim（下载包）
*   .htaccess

*第 1 步：.htaccess 文件*

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME} !-f

RewriteRule ^(.*)$ index.php [QSA,L] 
```

*第 2 步：myfile.php*

```
require 'Slim/Slim.php';

\Slim\Slim::registerAutoloader();

$app=new \Slim\Slim();

$app->get('/',function() {

    echo "Hello World";

});
$app->run(); 
```

*运行程序*

```
localhost/project1/myfile.php 
```

更多教程

[http://nesbot.com/2012/6/26/multilingual-site-using-slim](http://nesbot.com/2012/6/26/multilingual-site-using-slim)

[https://github.com/briannesbitt/Slim-ContextSensitiveLoginLogout](https://github.com/briannesbitt/Slim-ContextSensitiveLoginLogout)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-26T10:17:26.447

以下帖子对我开始使用我的第一个超薄应用程序有很大帮助。但它们非常专门用于构建 RESTful Web 服务。

[ericbrandel.com](http://ericbrandel.com/2013/01/14/quickly-build-restful-apis-in-php-with-slim-part-2/)

[androidhive.info](http://www.androidhive.info/2014/01/how-to-create-rest-api-for-android-app-using-php-slim-and-mysql-day-12-2/)

[coenraets.org](http://coenraets.org/blog/2011/12/restful-services-with-jquery-php-and-the-slim-framework/)

我浏览了这些帖子，然后下载了代码来玩它们。后来我能够混合搭配最好的作品，并在不到 2 天的时间内开始我的开发。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-05-21T12:00:47.603

更多教程：

*   [Tutsplus | 驯服瘦身 2.0](http://code.tutsplus.com/tutorials/taming-slim-20--net-30669)
*   [IBM | 使用 Slim 微框架创建 REST 应用程序](http://www.ibm.com/developerworks/xml/library/x-slim-rest/index.html?ca=drs)

# java - java中的自定义通用集合修剪类

> ID：15089295
> 
> 赞同：0
> 
> 时间：2013-02-26T12:35:56.750
> 
> 标签：java, generics, collections

我有一个场景，我想将相同的逻辑应用于不同的类型。

```
interface TrimAlgo<T> { 
public List<T> trim(List<T> input);
}

class SizeBasedTrim<T> implements TrimAlgo<T> { 
    private final int size;
    public SizeBasedTrim(int size) { 
        this.size = size; 
    }

    @Override 
    public List<T> trim(List<T> input) { 
         // check for error conditions, size < input.size etc. 
         return input.subList(0, size);
    }
} 

// Will have some other type of TrimAlgo

class Test { 
    private TrimAlgo<?> trimAlgo; 
    public Test(TrimAlgo<?> trimAlgo) { 
       this.trimAlgo = trimAlgo; 
    }

    public void callForString() { 
       List<String> testString = new ArrayList<String>(); 
       testString.add("1");
       trimAlgo.trim(testString); // Error The method get(List<capture#3-of ?>) in the type TrimAlgo<capture#3-of ?> is not applicable for the arguments (List<String>)
    }

    public void callForInt() { 
       // create int list and call trim on it
    }
} 
```

有没有办法做到这一点？请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T12:38:55.313

在我看来，您需要使`trim()`方法通用而不是`TrimAlgo`类：

```
interface TrimAlgo { 
    <T> List<T> trim(List<T> input);
} 
```

毕竟，修剪算法本身并不取决于类型 - 您可以使用同一个实例来修剪 a`List<String>`和 a `List<Integer>`。

# ruby-on-rails - ElasticSearch：如何正确映射关联以便它们也可搜索？

> ID：15089300
> 
> 赞同：3
> 
> 时间：2013-02-26T12:36:11.940
> 
> 标签：ruby-on-rails, indexing, elasticsearch, tire

我偶然发现了一个关于使用 ElasticSearch 和轮胎的模型（ActiveRecord）的索引映射的问题。我正在使用他们在文档中讨论的相同系统来映射关联字段。映射似乎是正确的，但显然我无法在那里搜索东西：

```
class ElasticSearchTest < ActiveRecord::Base
  belongs_to :elastic_search_belongs_to_test

  include Tire::Model::Search
  include Tire::Model::Callbacks

  mapping do
    indexes :title
    indexes :body
    indexes :elastic_search_belongs_to_test do
      indexes :title
      indexes :body
    end
  end 
```

这是弹性搜索上可用的映射模式：

```
 curl http://localhost:9200/elastic_search_tests/elastic_search_test_mapping?pretty=1

 >> {
   "elastic_search_test" : {
     "properties" : {
       "body" : {
         "type" : "string"
        },
        "elastic_search_belongs_to_test" : {
          "properties" : {
             "body" : {
               "type" : "string"
             },
             "title" : {
               "type" : "string"
             }
          }
        },
        "title" : {
          "type" : "string"
        }
      }
   }
} 
```

看起来不错。这些是我的例子：

```
t1 = ElasticSearchTest.create title: "title1", body: "body1",
                              elastic_search_belongs_to_test: ElasticSearchBelongsToTest.new(title: "title2", body: "body2"))

ElasticSearchTest.index.refresh
ElasticSearchTest.search("title1") #=> returns t1 in results
ElasticSearchTest.search("title2") #=> does not return t1 in results!!!! 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T07:46:23.520

验证关联是否包含在 的输出中`ElasticSearchTest.new(...).to_indexed_json`。

查看[Elasticsearch、Tire 和 Nested queries/association with ActiveRecord](https://stackoverflow.com/questions/11692560/elasticsearch-tire-and-nested-queries-associations-with-activerecord/11711477#11711477)答案，其中包含完整的演练。

# attachment - 螺丝转 wiki 可搜索附件

> ID：15089301
> 
> 赞同：1
> 
> 时间：2013-02-26T12:36:12.553
> 
> 标签：attachment, screwturn

我正在尝试建立一个供内部使用的 wiki，其中一个关键要求是 wiki 页面的附件是可搜索的，这似乎是许多其他简单 wiki 的症结所在。

Screwturn wiki 似乎勾选了所有选项，甚至在其最新的发行说明（我下载了 3.0.5.600 版本）中都显示附件是可搜索的，但当我创建新页面时似乎并非如此带附件。页面内的文字很容易搜索；但即使是我一直添加的 .txt 测试附件中也没有任何内容出现在我的内部搜索中。

我已经在 wiki 中使用了权限（但我认为这不应该是问题，因为我以管理员身份登录，当然应该授予所有权限），浏览了我能找到的所有信息在screwturn 的网站上并对这个问题进行了广泛的谷歌搜索，但我找不到遇到同样问题的人。Screwturns 论坛（现已离线）将我指引到这里，但我在以前的螺丝转相关帖子上看不到任何帮助。

我错过了一些非常明显的东西吗？任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T10:12:06.510

这只是 v4 功能尝试下载 alpha。如果您有问题，请随时在[http://stw.codeplex.com上提问/提交错误](http://stw.codeplex.com)

# c++ - 如何在 XercesDOMParser 中传递 Xml？

> ID：15089304
> 
> 赞同：0
> 
> 时间：2013-02-26T12:36:21.077
> 
> 标签：c++, xml, xml-parsing, xerces-c

我正在将一些 DOMNode 从一个文档移动到另一个文档；这里的代码快照

```
 XercesDOMParser *parser = new XercesDOMParser;
        parser->setValidationScheme(XercesDOMParser::Val_Auto);
        parser->setDoNamespaces(false);
        parser->setDoSchema(false);
        parser->setValidationSchemaFullChecking(false);
        parser->setCreateEntityReferenceNodes(false);

        // getDOMNodeForXMLString will pares the string and return the root DOMNode
        DOMNode* vendorExtnDomNode =  getDOMNodeForXMLString(*veField,parser);

       DOMNodeList* childList = vendorExtnDomNode->getChildNodes();
        if(childList)
        {
            DOMNode* childNode = NULL;
            for(childNode = vendorExtnDomNode->getFirstChild();childNode != NULL;childNode = childNode->getNextSibling())
            {
                DOMElement* newChild = (DOMElement*) Doc->importNode(childNode,true);
                veDomNode->appendChild(newChild);
            }
        }
        parser->resetDocumentPool();
        delete parser 
```

如果 xml 字符串如下所示，则将其附加到 Doc

```
< my:root>
        < my:values>
                        < my:value1>10< /my:value1>
        < /my:values>
< /my:root> 
```

但是如果字符串是这样的

```
< my:root>
            < my:values>
                            < my:value1>10< /my:value1>
                            < my:enum>
                                            < my:value2>10< /my:value1>     
                            < /my:enum>
            < /my:values>
< /my:root 
```

然后我只能在 xml 转储中看到如下第一级层次结构字符串，为什么缺少重置

```
< my:root>
            < my:values>
                            < my:value1>10< /my:value1>
            < /my:values>
< /my:root> 
```

注意：请忽略标签中的空格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T05:22:15.813

您正在解析的字符串在标签之间包含空格字符 '\n'（新行）、'\t'（制表符）和 ''（空格）。它们被解析为文本节点并附加到 DOM 树。这会导致转储 xml 出现问题。避免使用可以将解析器属性 includeWhiteSpace 设置为 false 的空格

解析器->setIncludeIgnorableWhitespace (false)

但是，只有当您针对 DTD 或模式进行验证时，空格才“可忽略”，该模式表示包含它们的元素不接受文本作为内容。如果您尚未验证，或者元素被声明为具有混合内容，则空格是文档内容的一部分。

在您的情况下，您没有验证检查。因此，您可以做的是在将节点附加为子节点之前，遍历所有节点并删除仅具有基于空格、制表符和“/n”的数据的文本节点 (DOMNode::TEXT_NODE)。这将解决您的问题。

# c# - 如何在多个 Web 浏览器中使用不同的事件

> ID：15089306
> 
> 赞同：0
> 
> 时间：2013-02-26T12:36:24.907
> 
> 标签：c#, .net, multithreading, winforms, browser

我正在开发一个应用程序，我想创建多个线程，每个线程必须创建一个`WebBrowser`，每个线程都`WebBrowser`使用方法`webBrowser_DocumentCompleted`。

每个创建的`WebBrowser`实例如何拥有自己的`DocumentCompleted`处理程序，而不是所有实例都使用相同的`webBrowser_DocumentCompleted`方法。

我解释 ：

在一种情况下，使用单个 Web 浏览器的操作

```
int a = 0;
private void button1_Click(object sender, EventArgs e)
        {
            methode1();
        }
private void webBrowser_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
        {
            if (a == 1) methode2(wb);
            if (a == 2) methode2(wb);
        }

public void methode1()
        {
            webBrowser.Navigate("http://www.test.com");
            a = 1;
        }
public void methode2()
        {
            HtmlElement txt1 = webBrowser1.Document.GetElementById("tesxtbox1");
            txt1.SetAttribute("value", "test");
            webBrowser.Document.Forms[0].InvokeMember("submit");
            a = 2;
        }
public void methode3()
        {
            webBrowser.Navigate("http://www.test3.com");
        } 
```

但如果我想进行多项操作，即在 butoon1 中添加：

```
private void button1_Click(object sender, EventArgs e)
        {
            for(int i=0; i<5  ;i++)
            methode1();
        } 
```

那就去做吧，我想我必须有几个webbrowser，所以解决方法是为每个操作创建一个线程

```
private void button1_Click(object sender, EventArgs e)
        {
            for(int i=0; i<5  ;i++)
            {
                Thread thread = new Thread(new ThreadStart(methode1));
                thread.Start();
            }   
        } 
```

因此，线程创建的每个 Web 浏览器都必须有自己的方法`webBrowser_DocumentCompleted`，以免与其他 Web 浏览器的结果混淆。

或者，`webBrowser_DocumentCompleted`对所有创建的 Web 浏览器使用相同的方法，但问题是如何指定哪个 Web 浏览器，调用方法 webBrowser_DocumentCompleted。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:39:30.477

很容易，更改方法的名称。

当您创建您的`WebBrowser`时，您可以指定`DocumentCompleted`为您想要的任何方法，例如：

```
firstWebBrowser.DocumentCompleted += firstDocumentCompleted;
secondWebBrowser.DocumentCompleted += secondDocumentCompleted;
thirdWebBrowser.DocumentCompleted += thirdDocumentCompleted; 
```

如果您使用的是设计器，那么它同样简单。在“事件”选项卡中，只需键入一个新的（唯一的）方法名称。

既然您提到了线程，我确实设想了一个问题，如果您不抢占您将拥有的 Web 浏览器（以及事件处理程序）的数量。但是，如果您需要帮助，我们需要更具体的用例示例。

# android - 用于生根设备的 Android 屏幕截图

> ID：15089309
> 
> 赞同：0
> 
> 时间：2013-02-26T12:36:27.193
> 
> 标签：android, android-custom-view

我尝试了用于布局的屏幕截图捕获应用程序只截取其工作正常。我想在按钮单击当前屏幕后要求每个页面显示的覆盖按钮如何捕获屏幕截图。请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:50:15.823

试试这个代码

```
 View vieww=findViewById(R.id.main);
                    //View v1 = view.getRootView();
                    //v.setDrawingCacheEnabled(true);
                    //Bitmap b = v.getDrawingCache();
                    //imgcapmain.setVisibility(View.VISIBLE);
                    Bitmap bitmap;
                    View v1 = vieww.getRootView();
                    v1.setDrawingCacheEnabled(true);
                    bitmap = Bitmap.createBitmap(v1.getDrawingCache());
                    v1.setDrawingCacheEnabled(false);
                    imgcapmain.setImageBitmap(bitmap); 
```

从当前活动中获取根视图

```
getWindow().getDecorView().findViewById(android.R.id.content) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:21:10.800

尝试这个

初始化变量

```
Bitmap bmScreen;
ImageView bmImage;
View screen; 
```

并在 OnClickListener

```
 screen.setDrawingCacheEnabled(true);
   bmScreen = screen.getDrawingCache(); 
```

# python - 用 numpy 重复范围

> ID：15089310
> 
> 赞同：3
> 
> 时间：2013-02-26T12:36:30.627
> 
> 标签：python, numpy, repeat

我有一个包含整数值的数组。

```
a = [2,1,4,0,2] 
```

我想要一个 apply arange 函数到 a 中的每个值，以便拥有：

```
b = [0,1,0,0,1,2,3,1,2]
b "=" [arange(2),arange(1),arange(4),arange(0),arange(2)] 
```

事实上，我使用 np.repeat 函数根据数组 a 重复数组行，并且我希望有一个 i 标记将每个重复值链接到原始值，并有一个标识号来区分它们。

我尝试使用 np.vectorize 但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T18:23:02.973

肯定有更多的 numpythonic 做事方式。一种可能性可能是这样的：

```
import numpy as np
from numpy.lib.stride_tricks import as_strided

def concatenated_ranges(ranges_list) :
    ranges_list = np.array(ranges_list, copy=False)
    base_range = np.arange(ranges_list.max())
    base_range =  as_strided(base_range,
                             shape=ranges_list.shape + base_range.shape,
                             strides=(0,) + base_range.strides)
    return base_range[base_range < ranges_list[:, None]] 
```

如果您只连接几个范围，那么 E 先生的纯 python 解决方案可能是您的最佳选择，但如果您要连接的范围甚至只有 100 个，那么这颗星的速度明显更快。为了比较，我使用了从其他答案中提取的这两个函数：

```
def junuxx(a) :
    b = np.array([], dtype=np.uint8)
    for x in a:
        b = np.append(b, np.arange(x))
    return b

def mr_e(a) :
    return reduce(lambda x, y: x + range(y), a, []) 
```

以下是一些时间安排：

```
In [2]: a = [2, 1, 4, 0 ,2] # the OP's original example

In [3]: concatenated_ranges(a) # show it works!
Out[3]: array([0, 1, 0, 0, 1, 2, 3, 0, 1])

In [4]: %timeit concatenated_ranges(a)
10000 loops, best of 3: 31.6 us per loop

In [5]: %timeit junuxx(a)
10000 loops, best of 3: 34 us per loop

In [6]: %timeit mr_e(a)
100000 loops, best of 3: 2.58 us per loop

In [7]: a = np.random.randint(1, 10, size=(10,))

In [8]: %timeit concatenated_ranges(a)
10000 loops, best of 3: 27.1 us per loop

In [9]: %timeit junuxx(a)
10000 loops, best of 3: 79.8 us per loop

In [10]: %timeit mr_e(a)
100000 loops, best of 3: 7.82 us per loop

In [11]: a = np.random.randint(1, 10, size=(100,))

In [12]: %timeit concatenated_ranges(a)
10000 loops, best of 3: 57.4 us per loop

In [13]: %timeit junuxx(a)
1000 loops, best of 3: 756 us per loop

In [14]: %timeit mr_e(a)
10000 loops, best of 3: 149 us per loop

In [15]: a = np.random.randint(1, 10, size=(1000,))

In [16]: %timeit concatenated_ranges(a)
1000 loops, best of 3: 358 us per loop

In [17]: %timeit junuxx(a)
100 loops, best of 3: 9.38 ms per loop

In [18]: %timeit mr_e(a)
100 loops, best of 3: 8.93 ms per loop 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:51:44.087

我的答案类似于 Junuxx - 我不确定您为 b 给出的答案是您想要的答案

```
a = [2, 1, 4, 0 ,2]
reduce(lambda x, y: x+range(y), a, []) 
```

给我

```
[0, 1, 0, 0, 1, 2, 3, 0, 1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:50:53.707

这就像您所描述的那样，即 . 中所有值的范围串联`a`。尽管这意味着`b`您给出的内容中存在一些错误：

```
>>> a = [2, 1, 4, 0, 2]
>>> b = np.array([], dtype=np.uint8)
>>>for x in a:
>>>    b = np.append(b, np.arange(x))
>>> print b
array([0,1,0,0,1,2,3,0,1,]) 
```

在你的编辑解释你想要一个范围列表之后，我认为这会更有效：

```
>>> a = [2, 1, 4, 0, 2]
>>> b = [np.arange(x) for x in a]
>>> print b
[array([0, 1]), array([0]), array([0, 1, 2, 3]), array([], dtype=int32),
 array([0, 1])] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-16T08:48:43.623

通常，另一种内存效率更高且速度稍快的方法：

```
import numpy as np
def concatenated_ranges2(ranges_list):
    cumsum = np.append(0, np.cumsum(ranges_list[:-1]))
    cumsum = np.repeat(cumsum, ranges_list)
    return np.arange(cumsum.shape[0]) - cumsum 
```

测试这个函数和上一个函数：

```
>>> a = np.random.randint(1, 10, size=(1000,))
>>> %timeit concatenated_ranges(a)
10000 loops, best of 3: 142 us per loop
>>> %timeit concatenated_ranges2(a)
10000 loops, best of 3: 72.6 us per loop 
```

# grid - 将输出重定向到 Sun Grid Engine 阵列作业 (SGE) 的不同文件

> ID：15089315
> 
> 赞同：5
> 
> 时间：2013-02-26T12:37:10.113
> 
> 标签：grid, stdout, sun, sungridengine

我正在尝试执行太阳网格引擎阵列作业，并且每个任务需要不同的输出文件：test.1.out test.2.out 等。

如果我这样写我的脚本：

```
#!/bin/bash
#$ -S /bin/bash
#$ -N name
#$ -t 1-4000
#$ -o /home/myuser/out/test.$TASK_ID.out
#$ -e /home/myuser/err/test.$TASK_ID.err
#$ -cwd
#$ -V
<bash commands here> 
```

这些文件称为 $TASK_ID.out（1.out、2.out 等），位于 /home/myuser/

如果我这样写我的脚本：

```
#!/bin/bash
#$ -S /bin/bash
#$ -N name
#$ -t 1-4000
#$ -o /home/myuser/out/
#$ -e /home/myuser/err/
#$ -cwd
#$ -V
<bash commands here> 
```

这些文件位于正确的文件夹中，但显然具有默认名称：name.o$JOB_ID.$TASK_ID

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T23:03:51.270

如果实时编写专门命名的输出文件很重要，您可能会绕过 SGE 的内置输出集合并调用 bash 命令，例如

```
$command 1>>/home/myuser/out/test.$SGE_TASK_ID.out 2>>/home/myuser/err/test.$SGE_TASK_ID.err 
```

捕获标准输出和标准错误。

这两个示例似乎都非常接近您想要的 - 有什么理由不在事后简单地移动/重命名输出文件？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-16T20:47:53.680

尝试这样的事情：

```
#!/bin/bash
#$ -S /bin/bash
#$ -N name
#$ -t 1-4000
#$ -o /dev/null
#$ -e /dev/null
#$ -cwd
#$ -V
exec >/home/myuser/out/test.${SGE_TASK_ID}.out 2>/home/myuser/err/test.${SGE_TASK_ID}.err
echo whatever 
```

# f# - 如何在 F# 中封装“所有参数”的概念？

> ID：15089318
> 
> 赞同：0
> 
> 时间：2013-02-26T12:37:21.330
> 
> 标签：f#

在 F# 中，我需要执行以下操作：

```
let price k s t r v =
  let d1 = d1 k s t r v
... and so on 
```

我真的厌倦了在将所有参数传递给函数时列出它们。除了将参数转换为参数对象（我*不能*做的事情）之外，还有什么方法可以对参数进行分组？我在想类似的东西

```
let price (k s t r v as foo) =
  let d1 = d1 foo 
```

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T20:30:34.423

`w, x, y, z`您可以通过像这样的高阶函数有效地将参数组合在一起（调用它们）

```
let batchedArgs f = f w x y z 
```

现在`batchedArgs`是原始函数参数的闭包。您只需将另一个函数传递给它，该函数采用相同数量/类型的参数，它们将被应用。

```
// other functions which you wish to pass the args to
let sub1 w x y z = 42
let sub2 w x y z = true

// main routine
let doStuff w x y z =
    // one-time declaration of batching function is
    // the only time you need to list out the arguments
    let batchedArgs f = f w x y z

    // from then on, invoke like this
    batchedArgs sub1
    // or like this, which looks more like a traditional function call
    sub2 |> batchedArgs 
```

# node.js - 如何通过 MIB 名称获取 SNMP 值？

> ID：15089319
> 
> 赞同：0
> 
> 时间：2013-02-26T12:37:21.657
> 
> 标签：node.js, snmp, net-snmp

bash 上的模拟：

```
snmpwalk -c SNMP1TV01 -v 2c 127.0.0.1 IF-MIB::ifName | grep bond0
IF-MIB::ifName.8 = STRING: bond0
snmpwalk -c SNMP1TV01 -v 2c 12.0.0.0.1 IF-MIB::ifHCOutOctets | grep 8
IF-MIB::ifHCOutOctets.8 = Counter64: 13775300423919 
```

我不能通过 oid 来做，因为以太网接口经常变化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T20:29:52.967

虽然我不熟悉node.js，但它不能检索表，而不仅仅是走树的那部分，例如

```
snmptable -M +.  -m +ALL -v 2c -c public -Pu -Ci 127.0.0.1 IF-MIB:ifXTable 
SNMP table: IF-MIB::ifXTable

index   ifName ifInMulticastPkts ifInBroadcastPkts ifOutMulticastPkts ifOutBroadcastPkts  ifHCInOctets ifHCInUcastPkts ifHCInMulticastPkts ifHCInBroadcastPkts ifHCOutOctets ifHCOutUcastPkts ifHCOutMulticastPkts ifHCOutBroadcastPkts ifLinkUpDownTrapEnable ifHighSpeed ifPromiscuousMode ifConnectorPresent ifAlias ifCounterDiscontinuityTime
1        lo                 0                 0                  0                  0 3675102238172      2759723359                   0                   0 3675102238172       2759723359                    0                    0                      ?          10             false                  ?                       0:0:00:00.00
2     bond0               959                 0                  0                  0   21395174710        43909149                 959                   0    5835176503         49589529                    0                    0                      ?        1000             false               true                       0:0:00:00.00

<not showing my other interfaces> 
```

提取相关值....

```
snmptable -M +.  -m +ALL -v 2c -c public -Pu -Ci 127.0.0.1     IF-MIB:ifXTable | grep bond0 | awk '{print $11}'
5835176503 
```

# javascript - 在 Javascript 中删除侦听器

> ID：15089321
> 
> 赞同：1
> 
> 时间：2013-02-26T12:37:31.237
> 
> 标签：javascript, html, javascript-events

我正在编写一个简单的交互式小部件，最终将出现在 ibook 中。

这是一个游戏，您可以将物品拖放到正确的位置，基本上将动物的声音与制造它们的动物相匹配。

我在 HTML 中添加了我的侦听器，就像目标一样：

```
<div class="target_box_zebra"
     ondrop="drop(event,'zebra')"
     ondragexit="dragLeave(event,'zebra')"
     id="zebra_target"
     ondragenter="drag_enter(event,'zebra')"
     ondragover="allowDrop(event,'zebra_target')"
     ondragleave="drag_leave(event,'zebra')">
</div> 
```

一旦找到了正确的目标（简单的`if`声明），我想删除所有的监听器，这样它就只是一个带有默认背景图像的平面 div。

我尝试解除绑定，但没有成功。任何建议或指导都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:40:29.937

仅当您不使用内联处理程序时，解除绑定才有效。

查看[https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener](https://developer.mozilla.org/en-US/docs/DOM/element.addEventListener)。

# c - 互斥锁多次

> ID：15089326
> 
> 赞同：3
> 
> 时间：2013-02-26T12:37:51.500
> 
> 标签：c, multithreading, concurrency, pthreads, mutex

据我所知，互斥锁应该锁定一次，然后阻止其他人直到被释放，就像这样。

![在此处输入图像描述](../Images/75f30fc436530b23719fecde24c9800a.png)

但是使用我的代码，似乎多个线程正在锁定同一个互斥锁。我有一个 10 个线程池，所以肯定 9 个应该阻塞，1 个应该锁定。但我得到了这个输出。

```
Thread 0 got locked 
Thread 1 got locked 
Thread 3 got locked 
Thread 4 got locked 
Thread 2 got locked 
Thread 5 got locked 
Thread 6 got locked 
Thread 7 got locked 
Thread 8 got locked 
Thread 9 got locked 
```

我的互斥锁在 *.c 文件的顶部全局定义为，

```
pthread_mutex_t queuemutex = PTHREAD_MUTEX_INITIALIZER; 
```

这是相关的代码段。

```
 //In the main function which creates all the threads
int k;
for (k = 0; k < POOLSIZE; k++) {
    pthread_t thread;
    threadinformation *currentThread = (threadinformation *)malloc(sizeof(threadinformation));
    currentThread->state = (int *)malloc(sizeof(int));
    currentThread->state[0] = 0;
    currentThread->currentWaiting = currentWaiting;
    currentThread->number = k;
    threadArray[k] = currentThread;
    pthread_create(&thread, NULL, readWriteToClient, threadArray[k]);
    currentThread->thread = thread;
    joinArray[k] = thread;
} 
```

这是所有 10 个线程似乎都获得锁的代码段。

```
pthread_mutex_lock(&queuemutex);

fprintf(stderr,"Thread %d got locked \n",threadInput->number);

while((threadInput->currentWaiting->status) == 0){
    pthread_cond_wait(&cond, &queuemutex);
    fprintf(stderr,"Thread %d got signalled \n",threadInput->number);
}

connfd = threadInput->currentWaiting->fd;
threadInput->currentWaiting->status = 0;
pthread_cond_signal(&conncond);
pthread_mutex_unlock(&queuemutex); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T12:57:37.803

我的精神力量表明，`currentWaiting->status`最初是`0`。

既然是这种情况，您的代码将进入 while 循环并等待条件变量。

等待条件变量解锁互斥锁，直到等待完成，允许其他线程获取它。

# shell - 原子外壳实现

> ID：15089327
> 
> 赞同：0
> 
> 时间：2013-02-26T12:37:52.483
> 
> 标签：shell, clojure, datomic

我使用以下命令启动 datomic shell

```
bin/shell 
```

语法让我想起了一点 beanshell（不是双关语）。有人知道shell是用什么实现的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:02:35.343

Datomic 文档说它“基于 beanshell”并链接到[http://beanshell.org/](http://beanshell.org/)。所以看起来它是基于原始的 bsh，而不是 beanshell2（[http://code.google.com/p/beanshell2/](http://code.google.com/p/beanshell2/)）。

Datomic 文档参考：[http ://docs.datomic.com/shell.html](http://docs.datomic.com/shell.html)

# ios - 最大化同时 http-downloads 的数量

> ID：15089331
> 
> 赞同：12
> 
> 时间：2013-02-26T12:38:01.127
> 
> 标签：ios, objective-c

我正在尝试执行尽可能多的同时 http 下载 IPad2 ( ios6.0 )。这纯粹是为了测试此设备上的可能性。甚至对 GUI 性能不感兴趣（如果它没有响应则不重要）

我创建了一个特殊的 HTTP 服务器，它向客户端发送 x 分钟的数据。接收到的数据并不重要。我只是测量速度和并发下载的数量。我已经实现了 2 种不同的方式来调度 12 个 HTTP 请求。

## NSOperation

一种是通过在队列中使用 NSOperation 对象并将 NSOperationQueueDefaultMaxConcurrentOperationCount 设置为 12 来完成

## NSThread

第二种实现是通过创建 12 个 NSThreads 来执行同步 http-request。

请求都发送到相同的目标 IP。

## 观察

我观察到的是，在这两种情况下，第 6 到第 12 个请求都会获得 TimeOut（错误代码 -1001）。如果 1 将超时值设置为 80.0 秒，我看到第 1 次下载完成后第 6 次下载开始。

## 问题

*   IOS 对同时下载的数量有限制吗？
*   还有其他方法可以执行这些并发下载吗？
*   有没有办法将线程绑定到核心（这样它就不会受到中断，如 C++ 中的 cpuaffity ）或线程优先级

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T12:41:29.080

您最多可以有 5 个同时连接到同一台服务器。这是一个 iOS 固定限制，可能是因为一些 http 协议限制。[你可以在这里](http://blog.lightstreamer.com/2013/01/on-ios-url-connection-parallelism-and.html)阅读更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-07-27T21:56:24.963

万一有人还在寻找，这只是一个碰撞。我在我的 iPhone6S+ 上看到它是 4 个同时。这是我的测试步骤：

*   I wrote a PHP script that does sleep(10) before echoing something back.
*   I added a button (so I can execute well after startup)
*   Hitting that button triggers 30 simultaneous NSURLConnections (synchronous requests, but each in a separate thread), and an NSLog.
*   The completion for each does an NSLog

The results are like clockwork. The first responses (4 of them) come back 12 seconds after the request (presumably 2 seconds to turn the radio on or whatever), but then each subsequent block of 4 responses come 10 seconds after the prior block of 4\. All 4 at a time.

Hope that helps someone.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-19T21:02:17.300

After looking into this for a project I found something in [Apple's documentation](https://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLSessionConfiguration_class/#//apple_ref/occ/instp/NSURLSessionConfiguration/HTTPMaximumConnectionsPerHost) for NSURLSessionConfiguration.

From Apple's documentation --

> This property determines the maximum number of simultaneous connections made to each host by tasks within sessions based on this configuration.
> 
> This limit is per session, so if you use multiple sessions, your app as a whole may exceed this limit. Additionally, depending on your connection to the Internet, a session may use a lower limit than the one you specify.
> 
> The default value is 6 in OS X, or 4 in iOS.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T14:16:05.160

> IOS 对同时下载的数量有限制吗？

顺便说一下，这是基于每个服务器的限制，而不是 iOS 限制。如果您尝试同时从不同的服务器执行此操作，您会发现您可以超出当前限制。

> 还有其他方法可以执行这些并发下载吗？

显然，您也可以使用 GCD 做一些事情，手动管理并发请求，但我认为这`NSOperationQueue`是一个很好的解决方案，并且没有理由再进一步研究。我当然也看不出使用线程有什么好处。

随着并发请求数量的增加，您应该对总经过时间进行基准测试，但我相信您会遇到收益递减点。仅仅拥有更多的并发请求并不能确保更好的总体性能。

# java - Android 开发：降低水平滑动灵敏度或关闭垂直滑动

> ID：15089333
> 
> 赞同：2
> 
> 时间：2013-02-26T12:38:05.387
> 
> 标签：java, android, swipe

我正在构建一个应用程序，允许用户使用水平滑动浏览不同的屏幕，但是这些屏幕也包含垂直滚动视图。如果垂直滚动不是 100% 垂直（希望这是有道理的），那么 android 似乎会将垂直滚动检测为水平滑动。

有没有办法禁用垂直滑动，或者降低水平检测的灵敏度？

onFling 类中的代码目前非常基本。

```
 public boolean onFling(MotionEvent start, MotionEvent finish, float velocityX,
                float velocityY) {
     //Right Swipe
     if (finish.getRawX() < start.getRawX()) {
        Toast.makeText(getApplicationContext(), "Showing Listings For : "+date.getDate(),Toast.LENGTH_SHORT).show();
      }

     if (start.getRawX() < finish.getRawX()) {
        Toast.makeText(getApplicationContext(), "Showing Listings For : "+date.getDate(),Toast.LENGTH_SHORT).show();
      }
    } 
```

**- 更新 -**

好吧，我最终计算了滑动开始点和结束点之间的垂直差异，这给了我一些东西来确定滑动的垂直程度。它非常基本，但似乎工作正常。

更新后的代码现在看起来像。

```
 public boolean onFling(MotionEvent start, MotionEvent finish, float velocityX,
                float velocityY) {
     //Right Swipe

     //Caluclate the vertical difference
     float verticalChange = start.getRawY() - finish.getRawY();

     if ((finish.getRawX() < start.getRawX()) && (verticalChange > -40 && verticalChange < 40)) {
        Toast.makeText(getApplicationContext(), "Showing Listings For : "+date.getDate(),Toast.LENGTH_SHORT).show();
      }

     if (start.getRawX() < finish.getRawX()) && (verticalChange > -40 && verticalChange < 40)) {
        Toast.makeText(getApplicationContext(), "Showing Listings For : "+date.getDate(),Toast.LENGTH_SHORT).show();
      }
    } 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T12:47:37.623

You could extend your own vertical scrollview that does not trigger the event for a horizontal swipe. Of course, then you would have to swipe on a part that is not the scroll view.

--Extra Comment ---Have you tested this on various phones/devices? You may find yourself having different results.

# javascript - Javascript - 将行添加到不同的表

> ID：15089335
> 
> 赞同：1
> 
> 时间：2013-02-26T12:38:11.580
> 
> 标签：javascript

我有 7 张桌子（周一至周日），每张桌子下都有一个添加新行的按钮。我无法重命名表的 id，因为它是从脚本生成的。

我想我有两个选择

1）javascript中的脚本来选择表，因为只有7个。

2）将表格包含在 Div 标签内（我可以添加），例如[这个非工作示例](http://bit.ly/13kiTRi)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:04:51.707

**试试这个它会工作**

```
function displayResult(number)
{
    var table1=document.getElementById(number).getElementsByTagName("table")[0];
    var row=table.insertRow(-1);
    var cell1=row.insertCell(0);
    var cell2=row.insertCell(1);
    cell1.innerHTML="New";
    cell2.innerHTML="New";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:06:12.447

```
 YOU can use jQuery for this....

    $('.element').on('click', function(){
             rows='';     
             var row='<tr><td>...</td>....</tr>';
             rows=rows+row;
             $(rows).appendTo('table');
        });

 for jQuery visit... 
```

[http://jquery.com/](http://jquery.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:41:58.420

您可以执行以下操作 -

单击按钮调用 javascript 函数并传递该元素。参考该元素获取相应的表并在其中添加一行。

```
function jsfunc(elem) {
     $(elem).prev("table").append("<tr>....</tr>") //add row logic using jquery
} 
```

使用 javascript 的类似逻辑，我认为这对你来说不会有问题。在这种情况下，您永远不需要表的 id。

# php - imagecreatefromstring 返回“资源 ID #7”

> ID：15089336
> 
> 赞同：0
> 
> 时间：2013-02-26T12:38:11.813
> 
> 标签：php, image-processing

我有图像 blob 数据，我想给它加水印。所以我使用 php 函数**imagecreatefromstring**来获取图像。但是这张图片的输出是`Resource id #7`.

当我为图像（类型，大小）做标题信息并回显 blob 数据时，一切都很好。

是什么`Resource id #7`意思？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:11:30.973

> 资源是一个特殊的变量，持有对外部资源的引用。资源由特殊功能创建和使用。有关所有这些功能和相应资源类型的列表，请参见附录。

[http://php.net/manual/en/language.types.resource.php](http://php.net/manual/en/language.types.resource.php)

您可以使用`get_resource_type`来找出隐藏在该变量中的资源类型。

# ruby - 是否可以将单词之间的空格数减少到只有一个？

> ID：15089347
> 
> 赞同：1
> 
> 时间：2013-02-26T12:38:43.010
> 
> 标签：ruby

是否可以将单词之间的空格数减少到只有一个？

例如：

```
"My  name  Ruby" => "My name Ruby"
"this is  a good   boy" => "this is a good boy" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:45:20.747

您可以使用[`squeeze`](http://www.ruby-doc.org/core-2.0/String.html#method-i-squeeze)：

```
"now   is  the".squeeze(" ") #=> "now is the" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:42:11.067

```
content.gsub(/\s+/, " ").strip 
```

gsub 返回内容字符串的副本，其中所有出现的正则表达式模式都替换为第二个参数 (" ")。\s 代表“空白字符”。+ 表示一个或多个。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T13:03:08.250

您可以使用`split`和`join`：

你的字符串：

```
string = "   My      name           is      Ruby          " 
```

命令：

```
 p string.split(" ").join(" ") 
```

输出：

```
"My name is Ruby" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T12:41:34.813

你可以使用`gsub`：

```
yourstring.gsub!(/\s\s+/,' ') 
```

# sql - JOIN 或子查询更快？

> ID：15089349
> 
> 赞同：2
> 
> 时间：2013-02-26T12:38:50.033
> 
> 标签：sql, database, join, subquery

嗨！我只想问一个简单的问题。如果我们有像

*   用户
*   团体
*   和一个交叉表 user_group，因为一个用户可以在多个组中，而一个组显然可以包含多个用户

我想得到我的“朋友”然后哪个查询更快？

```
SELECT DISTINCT UG1.user_id
           FROM user_group AS UG1
          WHERE UG1.group_id IN ( SELECT UG2.group_id
                                    FROM user_group UG2
                                   WHERE UG2.user_id = 87 )

SELECT DISTINCT UG1.user_id
           FROM user_group UG1
           JOIN user_group UG2 ON UG1.group_id = UG2.group_id
          WHERE UG2.user_id = 87 
```

如果答案是特定于数据库的，那么在哪个数据库上哪种方法更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:43:54.370

简短的回答：为每个人制定一个执行计划并查看

长答案：这取决于很多东西——索引、表统计信息、优化器算法、缓存、物理架构、数据库大小等等等

# c++ - 如何在 C++ 中用逗号分割字符串

> ID：15089355
> 
> 赞同：0
> 
> 时间：2013-02-26T12:39:08.880
> 
> 标签：c++, string, split

我目前有这段代码，用户可以在其中输入一个数字来表示他们想要在数组中包含多少个数字。然后是“12345”，但是在写完它大约一秒钟后，我意识到这只有在他们输入数字 0-9 时才会起作用，任何两位数或更多的东西都不起作用。

```
int numberOfValues;
cout << "Please enter the amount of integers you want in the array" << endl;
cin >> numberOfValues;

int valuesArray[numberOfValues];
string valuesString;

cout << "Please Enter " << numberOfValues << " numbers" << endl;
cin>>valuesString;

for(int i = 0; i < numberOfValues; i++)
{
    valuesArray[i] = valuesString[i];
}
return valuesArray; 
```

我认为最好的方法是让用户输入用逗号分隔的数字，然后将它们拆分（我在 java 中做了同样的小 porgram 并尝试将其更改为 C++ 以供我个人学习），如java 我使用了 string.split(",") 我想知道 c++ 中是否有类似的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:41:06.230

使用`strtok`. 文档和示例可以在[这里找到](http://www.cplusplus.com/reference/cstring/strtok/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T12:52:34.550

我能想到的最简单的方法是避免读取中间字符串并让 cin 为您完成工作：

```
std::vector<int> valuesArray;

int i = 0;
do {
    cin >> i;
    valuesArray.push_back(i);
} while (valuesArray.size() < numberOfValues && cin.get() == ',');

/* edit: You may need to consume a '\n', if you expect one, too: */
do {
    i = cin.get();
} while (i != '\n'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:51:02.590

使用 string::substr() 和 string::find() 的组合。查找下一个逗号字符，然后查找从当前位置到下一个命令字符的子字符串

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T12:56:55.930

它不是标准的 C++ 字符串，但 Qt 的`QString`类仍然提供了一个现成的方法`QString::split(...)`，支持诸如正则表达式、拆分行为选项、区分大小写等等之类的东西......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T12:46:26.907

I wrote a tokenizer time ago, hope it works for you:

```
std::vector<std::string> tokenize(const std::string &_line,const char *_delimeter)
{
    std::vector<std::string> Tokens;

    if(_line.empty()) return Tokens;

    std::string str;

    BOOST_FOREACH(char c,_line){
        if(c==*_delimeter)
        {
            Tokens.push_back(str);
            str.clear();
            continue;
        }
        str += c;
    }

    if(!str.empty())
        Tokens.push_back(str);

    return Tokens;
} 
```

it is not efficient, but works for testing purpose.

# c# - 如何将图像 (.png) 转换为 base64 字符串，反之亦然并将其存储到指定位置

> ID：15089359
> 
> 赞同：7
> 
> 时间：2013-02-26T12:39:20.253
> 
> 标签：c#, windows-8

我正在尝试将图像（png）存储到 Windows 8 应用程序中的 sqlite 数据库中，我发现可以通过将其转换为 base64 字符串并将字符串存储到数据库来完成。稍后在应用程序中，我想将该 base64 字符串转换为 png 图像并将其存储到指定位置。问题是我不知道如何将图像转换为 base64 和 base64 到图像并将其存储到 c# windows 8 应用程序中的指定位置。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-26T12:45:03.657

```
public string ImageToBase64(Image image, 
  System.Drawing.Imaging.ImageFormat format)
{
  using (MemoryStream ms = new MemoryStream())
  {
    // Convert Image to byte[]
    image.Save(ms, format);
    byte[] imageBytes = ms.ToArray();

    // Convert byte[] to Base64 String
    return Convert.ToBase64String(imageBytes);
  }
}

public Image Base64ToImage(string base64String)
{
    // Convert Base64 String to byte[]
    byte[] imageBytes = Convert.FromBase64String(base64String);
    using (var ms = new MemoryStream(imageBytes, 0, imageBytes.Length))
    {
        // Convert byte[] to Image
        ms.Write(imageBytes, 0, imageBytes.Length);
        return Image.FromStream(ms, true);
    }
} 
```

# php - PHP/MySQL 注入预防

> ID：15089361
> 
> 赞同：-1
> 
> 时间：2013-02-26T12:39:25.537
> 
> 标签：php, mysql, code-injection

想知道是否有人可以帮助我增加对 PHP 编码的保护，这是非常基本的，需要一些防御。

我希望我已经提供了足够的详细信息来说明我需要帮助的内容，非常感谢！

```
 <?php
    //This is only displayed if they have submitted the form 

    if ($searching =="yes")  {
        echo "<h2>Results</h2><p>";
        //If they did not enter a search term we give them an error 

        if ($find == "")
        if ($f == "")
        if ($info == "")
        if ($zip == "")
        if ($state == "")
        if ($email == "")
        if ($address == "")
        {
            echo "<p>You forgot to enter a search term";
            exit;
        }

        // Otherwise we connect to our Database 
        mysql_connect("xx.xx.xx", "xxxx", "xxxxx") or die(mysql_error());
        mysql_select_db("xxxxx") or die(mysql_error());
        // We preform a bit of filtering 
        $find = strtoupper($find);
        $find = strip_tags($find);
        $find = trim ($find);
        $f = strtoupper($f);
        $f = strip_tags($f);
        $f = trim ($f);
        $info = strtoupper($info);
        $info = strip_tags($info);
        $info = trim ($info);
        $zip = strtoupper($zip);
        $zip = strip_tags($zip);
        $zip = trim ($zip);

        $state = strtoupper($state);
        $state = strip_tags($state);
        $state = trim ($state);

        $email = strtoupper($email);
        $email = strip_tags($email);
        $email = trim ($email);

        $address = strtoupper($address);
        $address = strip_tags($address);
        $address = trim ($address);
        //Now we search for our search term, in the field the user specified 
$data = mysql_query("SELECT * FROM users WHERE fname 
LIKE '%" . mysql_real_escape_string($find)      . "%' AND lname 
LIKE '%" . mysql_real_escape_string($f)         . "%' AND info 
LIKE '%" . mysql_real_escape_string($info)      . "%' AND zip 
LIKE '%" . mysql_real_escape_string($zip)       . "%' AND state
LIKE '%" . mysql_real_escape_string($state)     . "%' AND email 
LIKE '%" . mysql_real_escape_string($email)     . "%' AND address 
LIKE '%" . mysql_real_escape_string($address)   . "%'");
 //And we display the results 
 while($result = mysql_fetch_array( $data ))
 { 
 echo $result['fname']; 
 echo "<br>"; 
 echo $result['lname']; 
 echo "<br>"; 
 echo $result['info']; 
 echo "<br>"; 
 echo $result['zip']; 
 echo "<br>"; 
 echo $result['state']; 
 echo "<br>"; 
 echo $result['email']; 
 echo "<br>"; 
  echo $result['address']; 
 echo "<br>"; 
 } 
 //This counts the number or results - and if there wasn't any it gives them a little message explaining that 
 $anymatches=mysql_num_rows($data); 
 if ($anymatches == 0) 
 { 
 echo "Sorry, but we can not find an entry to match your query<br><br>"; 
 } 
 //And we remind them what they searched for 
 echo "<b>Searched For:
        </b> " .$find; 
 } 
 ?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T12:47:09.730

Don't use the mysql functions anymore, they are deprecated.

Instead use the mysqli or the pdo class.

For more detail, take a look at this stackoverflow post

[How can I prevent SQL injection in PHP?](https://stackoverflow.com/questions/60174/how-to-prevent-sql-injection-in-php)

Beside that, you code is very ugly. Try to seperate your logik from the view.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T12:47:29.180

Also in php you can sanitize you data before inserting into database . check this code .

```
<?php 
$email = "clifton@example"; //Note the .com missing  
if(filter_var($email, FILTER_SANITIZE_EMAIL)){ 
    echo $email.'<br>'; 
    var_dump(filter_var($email, FILTER_SANITIZE_EMAIL)); 
}else{ 
    var_dump(filter_var($email, FILTER_SANITIZE_EMAIL));    
} 
?> 
```

support link : [php sanitize](http://www.php.net/manual/en/filter.filters.sanitize.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T12:55:01.017

```
<Paranoia>

1\. No using of old mysql functions (told already)
2\. intval() on zip-field
3\. regexp on others

</Paranoia> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-02-26T12:43:09.710

只是摆脱`// We preform a bit of filtering`块。
其余的还算可以。

但是，您的查询几乎找不到任何东西。
是否打算找到包含所有输入值的单行？
我有一种感觉是你的意思`OR`，而不是`AND`你的标准

# c# - 以object[]和object[][]为参数的C#调用方法(params object[][])

> ID：15089362
> 
> 赞同：2
> 
> 时间：2013-02-26T12:39:26.430
> 
> 标签：c#, arrays, multidimensional-array, params

我有一个方法

```
public void method(params object[][] arg) 
```

但是在我调用该方法的地方，我有 object[] 和 object[][]：

```
object[] var1 = new object[5];
object[][] var2 = new object[8][5];
method(var1, var2); (I´d like this to be method(var1, var2[0], var2[1], var2[2],...) 
```

但在方法内部，arg 的长度为 2：

```
arg[0] = var1
arg[1] = var2 
```

但我希望 arg 作为长度为 9 的数组：

```
arg[0] = var1
arg[1] = var2[0];
arg[2] = var2[1];
... 
```

如何调用该方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:42:27.913

听起来你想要：

```
object[][] args = new[] { var1 }.Concat(var2).ToArray();
method(args); 
```

C# 的“普通”参数数组处理不会进行任何展平：您*可以*使用已经是正确类型的单个参数调用它，*或者*使用元素类型的参数序列调用它。你不能混搭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:53:49.647

一般来说，对于接受`params`数组的方法，我还提供了一个接受的重载`IEnumerable<T>`：

```
public void MyMethod(params string[] args)
{
    MyMethod((IEnumerable<string>)args);
}

public void MyMethod(IEnumerable<string> args)
{
    // ...
} 
```

然后，您还可以轻松地提供一个可枚举作为参数。例如：

```
string[] var1 = new string[5];
string[][] var2 = new string[8][5];

// Jon Skeet's suggestion without ToArray():
var sequence = new[] { var1 }.Concat(var2);
MyMethod(sequence); 
```

* * *

如果您真的想使用您建议的语法，您可以这样做，因为在您的示例中您使用`object[]`. 对象数组也是一个对象，因此您可以*在*方法中进行展平：

```
public void MyMethod(params object[] args)
{
    object[] flattened = arg
        // For each element that is not in an array, put it in an array.
        .Select(a => a is object[] ? (object[])a : new object[] { a })
        // Select each element from each array.
        .SelectMany(a => a)
        // Make the resulting sequence into an array.
        .ToArray();
    // ...
}

MyMethod(var1, var2); 
```

# string - Perl 在 url 中每次出现斜杠后从文件中插入一个字符串

> ID：15089364
> 
> 赞同：-3
> 
> 时间：2013-02-26T12:39:27.320
> 
> 标签：string, perl, permutation

我有以下网址：

**文件1.txt**

```
http://www.stackoveflow.com/dog/cat/rabbit/hamster/
192.168.192.168/lion/tiger/elephant/ 
```

**文件2.txt**

```
HELLO
GOODBYE 
```

**我试图实现的输出：**

```
http://www.stackoveflow.com/dogHELLO/cat/rabbit/hamster/
http://www.stackoveflow.com/dog/catHELLO/rabbit/hamster/
http://www.stackoveflow.com/dog/cat/rabbitHELLO/hamster/
http://www.stackoveflow.com/dog/cat/rabbit/hamsterHELLO/
http://www.stackoveflow.com/dog/cat/rabbit/hamster/HELLO

http://www.stackoveflow.com/dogGOODBYE/cat/rabbit/hamster/
http://www.stackoveflow.com/dog/catGOODBYE/rabbit/hamster/
http://www.stackoveflow.com/dog/cat/rabbitGOODBYE/hamster/
http://www.stackoveflow.com/dog/cat/rabbit/hamsterGOODBYE/
http://www.stackoveflow.com/dog/cat/rabbit/hamster/GOODBYE

192.168.192.168/lionHELLO/tiger/elephant/
192.168.192.168/lion/tigerHELLO/elephant/
192.168.192.168/lion/tiger/elephantHELLO/
192.168.192.168/lion/tiger/elephant/HELLO

192.168.192.168/lionGOODBYE/tiger/elephant/
192.168.192.168/lion/tigerGOODBYE/elephant/
192.168.192.168/lion/tiger/elephantGOODBYE/
192.168.192.168/lion/tiger/elephant/GOODBYE 
```

如您所见，字符串`HELLO`并`GOODBYE`在每个斜线之后插入，如果斜线之后已经有一个字符串，它将在其后附加`HELLO`and `GOODBYE`（例如`http://www.stackoveflow.com/dogHELLO/cat/rabbit/hamster/`，依此类推）。

**我试过的**

```
use strict;
use warnings;

my @f1 = do {
   open my $fh, '<', 'FILE1.txt';
   <$fh>;
};
chomp @f1;

my @f2 = do {
  open my $fh, '<', 'FILE2.txt';
  <$fh>;
};
chomp @f2;

for my $f1 (@f1) {
  my @fields = $f1 =~ m{[^/]+}g;
  for my $f2 (@f2) {
    for my $i (0 .. $#fields) {
      my @new = @fields;
      $new[$i] .= $f2;
      print qq{/$_/\n}, for join '/', @new;
    }
    print "\n\n";
  }
}
#courtesy of Borodin 
```

**但是**，此代码不适合在部分中包含斜杠的 url，因为它们在不应该做的时候`http://`被替换。`http:HELLO/`

如果已经没有字符串，它也不会放在斜杠之后`HELLO`或斜杠之后，例如`GOODBYE``http://www.stackoveflow.com/dog/cat/rabbit/hamster/<--SHOULD PUT HELLO AFTER THIS SLASH AS WELL BUT DOSN'T`

看来此代码删除然后重新插入带有 FILE2.txt 字符串的斜杠，而不是插入`HELLO`并`GOODBYE`在正确的位置开始。

**我的问题**

**是否有更好的方法来实现我需要的输出，或者我可以对现有代码做些什么来解决上述问题？**

非常感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:04:32.493

这是散文中的算法：

```
Open File2.txt. Read in all lines, removing the newline. We call the array @words.

Open File2.txt. We call the file handle $fh.

As long as we can read a $line from $fh:

    Remove the newline, remove starting and ending slashes.
    Split the $line at every slash, call the array @animals.

    Loop through the @words, calling each element $word:

        Loop through the indices of the @animals, calling each index $i:

            Make a @copy of the @animals.
            Append the $word to the $i-th element of @copy.
            Join the @copy with slashes, surround it with slashes, and print with newline.

        Print an empty line. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:11:49.590

该程序将按照您的要求进行。

```
use strict;
use warnings;
use autodie;

my @f1 = do {
  open my $fh, '<', 'FILE1.txt';
  <$fh>;
};
chomp @f1;

my @f2 = do {
  open my $fh, '<', 'FILE2.txt';
  <$fh>;
};
chomp @f2;

for my $f1 (@f1) {
  my @fields = $f1 =~ m{[^/]+}g;
  for my $f2 (@f2) {
    for my $i (0 .. $#fields) {
      my @new = @fields;
      $new[$i] .= $f2;
      print qq{/$_/\n}, for join '/', @new;
    }
    print "\n\n";
  }
} 
```

**输出**

```
/dogHELLO/cat/rabbit/hamster/
/dog/catHELLO/rabbit/hamster/
/dog/cat/rabbitHELLO/hamster/
/dog/cat/rabbit/hamsterHELLO/

/dogGOODBYE/cat/rabbit/hamster/
/dog/catGOODBYE/rabbit/hamster/
/dog/cat/rabbitGOODBYE/hamster/
/dog/cat/rabbit/hamsterGOODBYE/

/lionHELLO/tiger/elephant/
/lion/tigerHELLO/elephant/
/lion/tiger/elephantHELLO/

/lionGOODBYE/tiger/elephant/
/lion/tigerGOODBYE/elephant/
/lion/tiger/elephantGOODBYE/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:10:41.873

您可以使用正则表达式完成所有操作，而不是在每个斜杠上分割线。

更新后的版本：

```
#!usr/bin/perl
use strict;
use warnings;

my @insert_words = qw/HELLO GOODBYE/;
my $word = 0;

while (<DATA>)
{
    chomp;
    foreach my $word (@insert_words)
    {
        my $repeat = 1;
        while ((my $match=$_) =~ s|(?<!/)(?:/(?!/)[^/]*){$repeat}[^/]*\K|$word|)
        {
            print "$match\n";
            $repeat++;
        }
        print "\n";
    }
}

__DATA__
/dog/cat/rabbit/hamster/
http://www.stackoverflow.com/dog/cat/rabbit/hamster/ 
```

关键是替换运算符：`s|(?<!/)(?:/(?!/)[^/]*){$repeat}[^/]*\K|$word|`.

`(?<!/)`并且`(?!/)`分别是负后瞻和前瞻。他们确保我们只匹配一个`/`，从而忽略`http://`.

`(?:/(?!/)[^/]*){$repeat}`是一个必须匹配指定次数的捕获组，我们增加该次数直到它不再匹配。

我不得不使用`[^/]*`而不是`[^/]+`满足您在字符串末尾匹配的要求。这就是为什么需要后视和前瞻的原因。

`\K`意思是“匹配到目前为止的所有内容，但不要将其包含在匹配本身中。” 因此，我们不必担心在替换中包含匹配的字符串的整个开头。

**注意：**该`r`选项是在不修改原始字符串的情况下执行替换的另一种方式。但是，它需要 Perl 5.16（感谢 Amon）。因此，我将其从示例中删除。

# c++ - 多线程中的 std::map 奇怪的资源争用

> ID：15089366
> 
> 赞同：0
> 
> 时间：2013-02-26T12:39:32.747
> 
> 标签：c++, multithreading, map, resources, contention

我对 std::map 有一个奇怪的行为（或 std::set，在这种情况下它们的行为似乎相同）。 **可能是我对这应该如何工作有一个严重的误解。** 我正在使用 VS2010 SP1。

以这个函数为例：

```
extern time_t g_nElapsed;
UINT Thread(LPVOID _param)
{
    UINT nRuns = (UINT)_param;

    for(UINT i=0; i<nRuns; ++i)
    {
        time_t _1 = time(NULL);
        std::set<UINT> cRandomSet;
        cRandomSet.insert(1);
        cRandomSet.insert(2);
        cRandomSet.insert(3);
        cRandomSet.insert(4);
        g_nElapsed += (time(NULL) - _1);
    }

    return 0;
} 
```

现在，如果我运行 8 个线程，每个线程进行 100,000 次迭代，g_nElapsed 将大约为 40 秒。如果我以 800,000 次迭代运行 1 个线程，g_nElapsed 将约为 5 秒。我的印象是 g_nElapsed 对于任何合理数量的线程都应该大致相同。可以这么说......处理器使用率随着线程数的增加而增加，即使工作保持不变。但是，似乎与集合的某种资源争用会导致运行时间增加。但为什么？这是线程本地...

我确信这是一个简单的误解和一个简单的修复，但**我不太确定问题出在哪里。**

以下代码不会出现此行为：

```
extern time_t g_nElapsed;
UINT Thread(LPVOID _param)
{
    UINT nRuns = (UINT)_param;

    for(UINT i=0; i<nRuns; ++i)
    {
        time_t _1 = time(NULL);
        UINT n[4];
    n[0] = 1;
        n[1] = 1;
        n[2] = 1;
        n[3] = 1;
        g_nElapsed += (time(NULL) - _1);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:45:27.200

您正在创建和销毁许多容器，每个容器都`operator new`用于分配内存。在许多系统上，这需要同步来管理像您这样的典型小分配上分配的空闲内存。所以你可能会在那里招致很多线程间的争用。

您可以尝试不同的分配器，例如 tcmalloc ( [http://goog-perftools.sourceforge.net/doc/tcmalloc.html](http://goog-perftools.sourceforge.net/doc/tcmalloc.html) )。它是专门为解决这个问题而设计的。

另一种方法是使用对象池或其他分配策略来完全避免使用标准分配机制。这将需要一些代码更改，而使用 tcmalloc 则不需要。

# .htaccess - 如何永久重定向不再存在的目录（通过 .htaccess）

> ID：15089367
> 
> 赞同：0
> 
> 时间：2013-02-26T12:39:34.297
> 
> 标签：.htaccess, redirect

我无法重定向我们服务器上不再存在的整个目录。

以下所有变体都不起作用，我只是得到一个 404 Page Not Found。

**.htaccess 文件如下所示：**

```
redirect 301 /non_existent_directory/ http://my.website.com/existent_directory/ 
```

是否可以为此使用重定向 301 指令？或者这只能通过 mod_rewrite 解决？

谢谢

**我什至尝试过：**

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?my\.website\.com\/non_existent_directory\/$ [NC]
RewriteRule ^(.*)$ http://my.website.com/existent_directory/ [R=301,L] 
```

没运气...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:14:18.870

从[`Redirect`](http://httpd.apache.org/docs/current/mod/mod_alias.html#redirect)文档中，我会说

```
Redirect 301 /non_existent_directory http://my.website.com/existent_directory 
```

或者

```
Redirect 301 /non_existent_directory /existent_directory 
```

应该可以工作，前提是您被[允许](http://httpd.apache.org/docs/2.2/mod/core.html#allowoverride)在 .htaccess 文件中使用它。另请参阅.htaccess 文件[疑难解答。](http://httpd.apache.org/docs/2.2/howto/htaccess.html#troubleshoot)您应该不进行测试`301`，以防止客户端缓存错误的重定向。

如果这不起作用，您`RewriteRule`当然可以尝试

```
RewriteEngine On
RewriteRule ^/?non_existent_directory(.*)$ /existent_directory$1 [R,L] 
```

但这相当于上面的`Redirect`指令。

# java - 无法通过 Davik VM 执行 .java 文件

> ID：15089370
> 
> 赞同：0
> 
> 时间：2013-02-26T12:39:49.880
> 
> 标签：java, dalvik

我正在关注这个 [链接](https://stackoverflow.com/questions/10199863/how-to-execute-the-dex-file-in-android-with-command) ，我首先成功地执行了这个命令。

```
javac <path + filename>.java 
```

然后，当我尝试执行以下命令时，我遇到了错误“**类名与路径不匹配**”。

`dx --dex --output=<path + filename>.dex <path + filename>.class`

我对 .class 和 .java 有相同的名称，但我认为我必须编写 .class 文件名的显式路径。那么现在该怎么办。我正在做一些小错误，但找不到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T18:50:14.243

dx 对你给它的路径很挑剔——类文件相对于你的工作目录的相对路径必须与类的包相匹配。

例如，如果您的命令是

```
dx --dex --output=classes.dex out/com/example/HelloWorld.class 
```

然后 dx 假设 HelloWorld 的包名应该是 out.com.example，如果不是，则抱怨。

但是，有一个技巧 - 你可以`/./`在你给 dx 的路径中添加一个路径组件，以指定相对于 java 包的“根”在哪里。如果上一个示例中的包实际上是 com.example，那么您可以这样做：

```
dx --dex --output=classes.dex out/./com/example/HelloWorld.class 
```

另一个选项是使用 --no-strict 选项，它禁用 dx 的路径检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:44:46.763

您的命令似乎是错误的：

```
dx --dex --output=.dex .class 
```

你试过这个吗？

```
dx --dex --output=YourClass.dex YourClass.class 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-27T12:34:09.677

为避免幻数问题，首先检查您的 jdk 版本，似乎 jdk 1.7* 有问题。我恢复到 jdk 1.6 。

我们可以做一件事，而不是使用`dx --dex --output=<path + filename>.dex <path + filename>.class` ，将一个或所有 .classes 文件放在一个文件夹中，说`classFolder` 现在发出以下命令：

```
dx --dex --output=YourClass.dex  absolutePath/classFolder 
```

dx 命令将选择该文件夹中的一个或所有类文件。

# c# - 提取列表的最大 k 个元素

> ID：15089373
> 
> 赞同：20
> 
> 时间：2013-02-26T12:39:59.057
> 
> 标签：c#, linq, lambda

假设我有某种类型的集合，例如

```
IEnumerable<double> values; 
```

现在我需要从该集合中提取 k 个最高值，用于某些参数 k。这是一种非常简单的方法：

```
values.OrderByDescending(x => x).Take(k) 
```

但是，这（如果我理解正确的话）首先对整个列表进行排序，然后选择前 k 个元素。但是如果列表非常大，并且 k 相对较小（小于 log n），这不是很有效 - 列表按 O(n*log n) 排序，但我认为从列表中选择 k 个最高值应该更像 O(n*k)。

那么，有人对更好、更有效的方法有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T12:51:30.490

这提供了一点性能提升。请注意，它是升序而不是降序，但您应该能够重新调整它的用途（见评论）：

```
static IEnumerable<double> TopNSorted(this IEnumerable<double> source, int n)
{
    List<double> top = new List<double>(n + 1);
    using (var e = source.GetEnumerator())
    {
        for (int i = 0; i < n; i++)
        {
            if (e.MoveNext())
                top.Add(e.Current);
            else
                throw new InvalidOperationException("Not enough elements");
        }
        top.Sort();
        while (e.MoveNext())
        {
            double c = e.Current;
            int index = top.BinarySearch(c);
            if (index < 0) index = ~index;
            if (index < n)                    // if (index != 0)
            {
                top.Insert(index, c);
                top.RemoveAt(n);              // top.RemoveAt(0)
            }
        }
    }
    return top;  // return ((IEnumerable<double>)top).Reverse();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:03:16.987

考虑以下方法：

```
static IEnumerable<double> GetTopValues(this IEnumerable<double> values, int count)
{
    var maxSet = new List<double>(Enumerable.Repeat(double.MinValue, count));
    var currentMin = double.MinValue;

    foreach (var t in values)
    {
        if (t <= currentMin) continue;
        maxSet.Remove(currentMin);
        maxSet.Add(t);
        currentMin = maxSet.Min();
    }

    return maxSet.OrderByDescending(i => i);
} 
```

和测试程序：

```
static void Main()
{
    const int SIZE = 1000000;
    const int K = 10;
    var random = new Random();

    var values = new double[SIZE];
    for (var i = 0; i < SIZE; i++)
        values[i] = random.NextDouble();

    // Test values
    values[SIZE/2] = 2.0;
    values[SIZE/4] = 3.0;
    values[SIZE/8] = 4.0;

    IEnumerable<double> result;

    var stopwatch = new Stopwatch();

    stopwatch.Start();
    result = values.OrderByDescending(x => x).Take(K).ToArray();
    stopwatch.Stop();
    Console.WriteLine(stopwatch.ElapsedMilliseconds);

    stopwatch.Restart();
    result = values.GetTopValues(K).ToArray();
    stopwatch.Stop();
    Console.WriteLine(stopwatch.ElapsedMilliseconds);
} 
```

在我的机器上结果是**1002**和**14**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:44:45.857

另一种方法（多年来一直没有使用 C#，所以它是伪代码，抱歉）是：

```
highestList = []
lowestValueOfHigh = 0
   for every item in the list
        if(lowestValueOfHigh > item) {
             delete highestList[highestList.length - 1] from list
             do insert into list with binarysearch
             if(highestList[highestList.length - 1] > lowestValueOfHigh)
                     lowestValueOfHigh = highestList[highestList.length - 1]
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:25:30.883

如果没有分析，我不会说明任何有关性能的内容。在这个答案中，我将尝试实施`O(n*k)`采取一个枚举换一个最大值的方法。我个人认为订购方法是优越的。反正：

```
public static IEnumerable<double> GetMaxElements(this IEnumerable<double> source)
    {
        var usedIndices = new HashSet<int>();
        while (true)
        {
            var enumerator = source.GetEnumerator();
            int index = 0;
            int maxIndex = 0;
            double? maxValue = null;
            while(enumerator.MoveNext())
            {
                if((!maxValue.HasValue||enumerator.Current>maxValue)&&!usedIndices.Contains(index))
                {
                    maxValue = enumerator.Current;
                    maxIndex = index;
                }
                index++;
            }
            usedIndices.Add(maxIndex);
            if (!maxValue.HasValue) break;
            yield return maxValue.Value;
        }
    } 
```

用法：

```
var biggestElements = values.GetMaxElements().Take(3); 
```

缺点：

1.  方法假定源 IEnumerable 有一个顺序
2.  方法使用额外的内存/操作来保存使用的索引。

优势：

*   您可以确定需要一次枚举才能获得下一个最大值。

[看到它运行](http://ideone.com/plJBSG)

# android - 如何保存用户定义的首选项？

> ID：15089374
> 
> 赞同：0
> 
> 时间：2013-02-26T12:40:03.923
> 
> 标签：android, android-preferences

可以将用户定义的首选项保存在另一个首选项中（逗号分隔）还是有更清洁和更好的方法？

```
<?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen
    xmlns:android="http://schemas.android.com/apk/res/android">

    <PreferenceCategory android:key="client" android:title="@string/client">

        <PreferenceScreen
            android:key="manage_sources"
            android:title="@string/manage_sources"
            android:persistent="false">

            <com.example.preference.EditSourcePreference
                android:key="add_source"
                android:title="@string/add_source"
                android:dialogTitle="@string/add_source" />

            <PreferenceCategory
                android:key="sources"
                android:title="@string/sources" />

        </PreferenceScreen>

    </PreferenceCategory>

</PreferenceScreen> 
```

这是一个嵌套的 PreferenceScreen，为添加源提供了首选项。这是Java代码：

```
public class EditSourcePreference extends EditTextPreference implements TextWatcher {

    private EditText source;
    private Button positiveButton;

    private String originalSource;

    public EditSourcePreference(Context context) {
        super(context);
    }

    public EditSourcePreference(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    protected void showDialog(Bundle state) {
        super.showDialog(state);

        source = getEditText();
        source.addTextChangedListener(this);

        positiveButton = ((AlertDialog) getDialog()).getButton(AlertDialog.BUTTON_POSITIVE);
        afterTextChanged(source.getText());

        originalSource = source.getText().toString();
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        if (!positiveResult) {
            return;
        }

        SharedPreferences pref = PreferenceManager.getDefaultSharedPreferences(getContext());
        SharedPreferences.Editor editor = pref.edit();

        String sources = pref.getString("sources", ""),
                newSource = source.getText().toString();

        boolean append = sources.indexOf(originalSource) != -1; // TODO: needs debugging!!!

        if (append) {
            if (!"".equals(sources)) {
                sources += ";";
            }

            sources += newSource;
        } else {
            sources = sources.replace(originalSource, newSource);
        }

        editor.putString("sources", sources);
        editor.commit();

        super.onDialogClosed(positiveResult);
    }

    @Override
    public void beforeTextChanged(CharSequence s, int start, int count, int after) {
    }

    @Override
    public void onTextChanged(CharSequence s, int start, int before, int count) {
    }

    @Override
    public void afterTextChanged(Editable s) {
        positiveButton.setEnabled(s.toString().matches("^[a-z0-9_:/]+[.]+[a-z0-9_.:/]+$"));
    }

} 
```

它应该看起来像这样，并将通过编辑和删除条目来扩展： ![它看起来如何](../Images/45bfcffcc188177f838921bab3535c08.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:46:48.733

Refer to [SharedPreferences.Editor](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html). If you have questions there, let me know.

Edit: Sorry, somehow, the code you pasted did not load the first time. I'll put here a way of taking the preferences from a saved file in a jiffy.

Here they are, sorry if there'some error in there, I typed it in Notepad.

```
private final String PREFS_NAME = "prefs";

private final String KEY_AGE = "age";
private final String KEY_COUNTRY = "location";

  SharedPreferences sharedPreferences = ctx.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
  SharedPreferences.Editor editor = sharedPreferences.edit();

  editor.putInt(KEY_AGE, "13");
  editor.putString(KEY_COUNTRY, "USA");

  editor.commit();

// To retrieve the values

  SharedPreferences sharedPreferences = ctx.getSharedPreferences(PREFS_NAME, Context.MODE_PRIVATE);
  sharedPreferences.getInt(KEY_AGE, 0);
  sharedPreferences.getString(KEY_COUNTRY, 0); 
```

If this does not suit your needs, then use a [database](http://developer.android.com/guide/topics/data/data-storage.html#db).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:52:01.580

您可以使用 SharedPreferences 来存储值。你可以参考这个：http: [//developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

你也可以参考这些：

[如何在 Android 中使用 SharedPreferences 来存储、获取和编辑值](https://stackoverflow.com/questions/3624280/how-to-use-sharedpreferences-in-android-to-store-fetch-and-edit-values)

[如何使用 SharedPreferences](https://stackoverflow.com/questions/3851560/how-to-use-sharedpreferences)

[使用共享首选项编辑器](https://stackoverflow.com/questions/4967418/using-shared-preferences-editor)

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

# flash - Flash Professional CS5/CS6 IDE 用于测试电影的 Flash Player .exe 的位置

> ID：15089375
> 
> 赞同：0
> 
> 时间：2013-02-26T12:40:06.540
> 
> 标签：flash, flash-player-11, flash-ide

我想更新 Flash IDE，以便在 IDE 测试期间播放电影时使用新版本的 Flash Player 11.6。

要检查当前使用的 Flash Player 的版本，我跟踪 -> **Capabilities.version**

我已经为 ax 和 firefox 安装了 11.6 player 的所有插件版本。**将 playerglobal.swf**复制到：

*   Adobe Flash\Common\Configuration\ActionScript 3.0\FP11.6

编辑**FlashPlayer11_6.xml**文件：

*   Adobe Flash\通用\配置\播放器\

我已经覆盖了 Flash IDE 目录中的所有独立播放器文件：

*   Adobe Flash\Players\FlashPlayer.exe
*   Adobe Flash\Players\Release\FlashPlayer.exe
*   Adobe Flash\Players\Debug\FlashPlayerDebugger.exe

但是在应用上述所有步骤后，Flash IDE 在 IDE 中测试电影时仍然使用旧的 Flash Player (Control>Test Movie>Test)

有趣的是，在 IDE 中调试时（调试>调试电影>调试）它正确显示更新的版本 11.6

因此，调试 .exe 文件必须已被新的独立调试 FlashPlayerDebugger.exe 正确覆盖，但是 FlashPlayer.exe 呢？似乎 Flash IDE 正在使用一些不同的 .exe 文件，该文件位于以下位置：

*   Adobe Flash\Players\FlashPlayer.exe
*   Adobe Flash\Players\Release\FlashPlayer.exe

为了让 Flash IDE 在 IDE 中进行电影测试期间将其用作新版本的 Flash Player，应覆盖哪个 .exe？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-11T15:49:57.340

Note well, that if you upgrade the playerglobal.swc, FlashPlayer.exe and FlashPlayerDebug.exe For Flash CS6 (and 5 I believe) it does NOT change the player that Flash uses to "test" with (i.e. CTRL+Enter). The debug Player will be updated though (i.e. CTRL+Shift+Enter).

I updated to FP 11.9 but CTRL+Enter still uses 11.4 as is revealed by tracing "Capabilities.version".

*   CTRL+Enter -> 11.4
*   CTRL+Shift+Enter -> 11.9
*   double click SWF -> 11.9
*   in Firefox browser -> 11.9

As long as I use the Debug player (i.e. CTRL+Shift+Enter) or choose Publish from the file menu the code is OK both in the stand alone Player when you double click a SWF, and in a browser.

I have heard it said that default Test FlashPlayer is hidden inside authplay.dll.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-14T01:21:13.513

如果您尝试使用测试电影（cntrl-enter 或 cmd-enter）预览您的电影，您将使用 authplay.dll；内置的 Flash 播放器（您无法更改，它与独立播放器不同）。

我的 authplay.dll 目录：

```
C:\Program Files\Adobe\Adobe Flash CC 2015\Common\Configuration\TestMovie\authplay.dll 
```

然而，在我的 Adob​​e Flash 的其他目录中还有另外 2 个 authplay.dll。你可以在 Adob​​e Flash 文件夹中搜索它

[http://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html](http://blogs.adobe.com/rgalvan/2011/11/adding-fp11-support-to-flash-pro-cs5-and-cs5-5.html)

# .htaccess - 通过 htaccess 将一个特殊的 http URL 转发到带有端口的 https URL

> ID：15089377
> 
> 赞同：1
> 
> 时间：2013-02-26T12:40:13.593
> 
> 标签：.htaccess, redirect, ssl, https, url-rewriting

对于我们的网站，我们需要重定向以下登录 URL

[http://lit.example.com/index.php?action=initLogon](http://lit.example.com/index.php?action=initLogon)

至

[https://lit.example.com:60558/index.php?action=initLogon](https://lit.example.com:60558/index.php?action=initLogon)

我在网上没有找到任何解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:22:04.263

你可以[`RewriteCond`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewritecond)用[`RewriteRule`](http://httpd.apache.org/docs/current/mod/mod_rewrite.html#rewriterule)这个

```
RewriteEngine On
RewriteCond %{HTTPS} !on
RewriteCond %{QUERY_STRING} action=initLogon
RewriteRule ^/?index.php$ https://lit.example.com:60558/index.php [R,L] 
```

这会检查它是否是一个普通的 HTTP 请求，并查看查询字符串是否确实是`action=initLogon`. 如果是，它会将客户端重定向到新的 HTTPS URL。

# php - Symfony2 表单错误翻译

> ID：15089378
> 
> 赞同：1
> 
> 时间：2013-02-26T12:40:14.077
> 
> 标签：php, symfony, translation

我在我的表单中使用 symfony2 验证和 validation.yml 并尝试使用 validator.{lang}.yml 文件对其进行验证。

我的语言环境设置为 pt_BR，验证器文件位于：{Bundle}/Resources/translations/validators.pt_BR.yml

此外，同一捆绑包的验证文件位于：{Bundle}/Resources/config/validation.yml

尽管如此，即使我清除了缓存，翻译的消息也不会出现。

我的验证文件：

```
NC8Digital\CRMBundle\Entity\Usuario:
properties:
    id:
        - Range:
            min: 1
            minMessage: "UserBundle.Usuario.id"
            invalidMessage: "UserBundle.Usuario.id"
        - Type:
            type: numeric
            message: "UserBundle.Usuario.id"
    nome:
        - NotBlank:
            message: "UserBundle.Usuario.nome.not_blank"
        - Length:
            min: 3
            max: 90
            minMessage: "UserBundle.Usuario.nome.min_length"
            maxMessage: "UserBundle.Usuario.nome.max_length"
    sobrenome:
        - NotBlank:
            message: "UserBundle.Usuario.sobrenome.not_blank"
        - Length:
            min: 3
            max: 90
            minMessage: "UserBundle.Usuario.sobrenome.min_length"
            maxMessage: "UserBundle.Usuario.sobrenome.max_length"
    cpf:
        - NotBlank:
            message: "UserBundle.Usuario.cpf.not_blank"
        - NC8Digital\CRMBundle\Validator\Constraints\Cpf:
            message: "UserBundle.Usuario.cpf.cpf"
        - Length:
            min: 14
            max: 14
            exactMessage: "UserBundle.Usuario.cpf.exact_message"
    rg:
        - NotBlank:
            message: "UserBundle.Usuario.rg.not_blank"
        - Length:
            min: 5
            max: 25
            minMessage: "UserBundle.Usuario.rg.min_length"
            maxMessage: "UserBundle.Usuario.rg.max_length"
    celular:
        - Length:
            min: 10
            max: 15
            minMessage: "UserBundle.Usuario.celular.min_length"
            maxMessage: "UserBundle.Usuario.celular.max_length"
        - NC8Digital\CRMBundle\Validator\Constraints\Celular:
            message: "UserBundle.Usuario.celular.celular"
    telefone:
        - NotBlank:
            message: "UserBundle.Usuario.telefone.not_blank"
        - Length:
            min: 10
            max: 15
            minMessage: "UserBundle.Usuario.telefone.min_message"
            maxMessage: "UserBundle.Usuario.telefone.max_message"
        - NC8Digital\CRMBundle\Validator\Constraints\Telefone:
            message: "UserBundle.Usuario.telefone.telefone"
    sexo:
        - NotBlank:
            message: "UserBundle.Usuario.sexo.not_blank"
    data_nascimento:
        - Date:
            message: UserBundle.Usuario.data_nascimento.not_blank
    tipousuario:
        - NotBlank:
            message: "UserBundle.Usuario.tipo_usuario.not_blank"
    endereco:
        - Valid: ~
    login:
        - Valid: ~ 
```

我的翻译文件：

```
UserBundle:
Usuario:
    id: Código do usuário inválido.
    nome:
        not_blank: "Insira o nome."
        min_length: "Seu nome deve ter no mínimo 3 caracteres"
        max_length: "Seu nome deve ter no máximo 90 caracteres"
    sobrenome:
        not_blank: "Insira o sobrenome."
        min_length: "Seu sobrenome deve ter no mínimo 3 caracteres"
        max_length: "Seu sobrenome deve ter no máximo 90 caracteres"
    cpf:
        not_blank: "Insira o CPF."
        cpf: "Insira um CPF válido"
        exact_message: "Seu CPF deve ter 14 caracteres (incluíndo pontos e traços)."
    rg:
        not_blank: "Insira o RG."
        min_length: "O RG deve ter no mínimo 5 caracteres"
        max_length: "O RG deve ter no máximo 25 caracteres"
    celular:
        min_length: "O celular deve ter no mínimo 10 caracteres (sem separadores)."
        max_length: "O celular deve ter no máximo 15 caracteres (incluindo separadores)."
        celular: "Insira um celular válido."
    indicacoes_dia:
        min_range: "A quantidade de indicacões por dia deve ser no mínimo 0."
        max_range: "A quantidade de indicacões por dia deve ser no máximo {{ limit }}."
        type_message: "Quantidade de indicações por dia inválida."
    telefone:
        not_blank: "Insira o Telefone."
        min_message: "O telefone deve ter no mínimo 10 caracteres (sem separadores)"
        max_message: "O telefone deve ter no máximo 15 caracteres (incluindo separadores)."
        telefone: "Insira um telefone válido."
    sexo:
        not_blank: "Insira o Gênero."
    data_nascimento:
        not_blank: "Insira uma data de nascimento válida."
    tipo_usuario:
        not_blank: "Insira o Tipo de usuário." 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T15:57:25.720

我添加了 novalidate 属性来禁用 HTML5 验证。你的问题是这样的： minMessage: "UserBundle.Usuario.id" , remove " 我认为它会起作用。

# xml - 如何在 SoapUI 的功能测试中放置多层次数据

> ID：15089384
> 
> 赞同：0
> 
> 时间：2013-02-26T12:40:23.520
> 
> 标签：xml, excel, soap, csv, soapui

我想做一些测试，想知道 SoapUI 是否可以处理生成请求，其中元素可以具有多个值。例如，如果我想发送带有正文的 XML：

```
<bookList>
  <book>
    <title>Little Red Riding Hood</title>
    <author>B. B. Wolf</author>
  </book>
  <book>
    <title>Humpty Dumpty</title>
    <author>M. Goose</author>
  </book>
</bookList> 
```

有时我想要两本书，其他三本书，有时甚至没有。对于存在元素列表（元素总数可能不同）的情况，有没有办法使用 Excel 或 CSV 生成功能测试？通过 Groovy 还是 SoapUI pro？我似乎在 SoapUI 的网站上找不到任何关于这种情况的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:30:40.250

参考[这个](http://www.soapui.org/forum/viewtopic.php?t=4436)例子它也会帮助[你](https://stackoverflow.com/questions/11890050/importing-csv-or-excel-testcases-in-soap-ui)

# c# - 如何检测移动类型和移动请求？

> ID：15089388
> 
> 赞同：3
> 
> 时间：2013-02-26T12:40:30.750
> 
> 标签：c#, android, asp.net, mobile, httprequest

我想检测请求是否来自移动设备，如果是，我想知道移动设备型号。例如，当我使用安卓手机时，我得到了错误的值。

我尝试使用：

```
System.Web.HttpBrowserCapabilities browser = HttpContext.Current.Request.Browser;
return browser.IsMobileDevice; 
```

和：

```
System.Web.HttpBrowserCapabilities browser = HttpContext.Current.Request.Browser;
return browser.MobileDeviceModel; 
```

但是当我使用 Galaxy S2 或 HTC 时，IsMobileDevice 是错误的，MobileDeviceModel 是未知的。

我试过了：

```
System.Web.Mobile.MobileCapabilities mc = (System.Web.Mobile.MobileCapabilities)HttpContext.Current.Request.Browser;
string deviceModel = mc.MobileDeviceModel;
string browser = mc.Browser; 
```

但它是一样的。

如何正确检测 IsMobile 和 MobileDeviceModel？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:43:52.533

我通常使用正则表达式来检测运行良好的移动设备，见下文：

```
String u = Request.ServerVariables["HTTP_USER_AGENT"];
     bool mobileUser = false;

                Regex b = new Regex("android.+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino", RegexOptions.IgnoreCase | RegexOptions.Multiline);
                Regex v = new Regex("1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|e\\-|e\\/|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\\-|2|g)|yas\\-|your|zeto|zte\\-", RegexOptions.IgnoreCase | RegexOptions.Multiline);
                if (u.Length > 4)
                {
                    if (b.IsMatch(u) | v.IsMatch(u.Substring(0, 4)))
                    {
                        mobileUser = true;
                    }
                }

                if (mobileUser) //mobile user!!
                {
                    mobileSiteUrl = ConfigurationManager.AppSettings["MobileSiteURL"];

                    Response.Redirect(mobileSiteUrl);
                }
                else
                {
                 } 
```

# regex - Django Regex - 查找单词位置

> ID：15089391
> 
> 赞同：0
> 
> 时间：2013-02-26T12:40:36.590
> 
> 标签：regex, django, django-views

例如，如果我有这一段：

```
paragraph = "Peter Piper picked a peck of pickled peppers;" +
"A peck of pickled peppers Peter Piper picked;" + 
"If Peter Piper picked a peck of pickled peppers, +
"Where's the peck of pickled peppers Peter Piper picked?" 
```

我有这个正则表达式字符串：

```
strRegex = "[[:<:]]pick.*[[:>:]]" # match pick/picked/pickled 
```

我如何使它适合正则表达式的所有单词都是**BOLD**？

请以 django 视图形式给我建议。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:48:49.557

替换它：

```
import re
re.sub(r"(.*)it(.*)", r"\1<b>it</b>\2", "Bold it!")
'Bold <b>it</b>!' 
```

# asp.net-mvc-4 - BundleTransformer.Core 抛出实现异常

> ID：15089393
> 
> 赞同：0
> 
> 时间：2013-02-26T12:40:38.627
> 
> 标签：asp.net-mvc-4, bundletransformer

我正在尝试使用`BundleTransformer.Core`and `BundleTransformer.Less`，但是在尝试使用推荐的代码设置 MVC4 捆绑包时遇到了以下异常：

> 'BundleTransformer.Core.Orderers.NullOrderer' 类型中的方法 'OrderFiles' 没有实现。

注册以下内容时会引发该异常：

```
public static void RegisterBundles(BundleCollection bundles)
{
    var cssTransformer = new CssTransformer();
    var jsTransformer = new JsTransformer();
    var nullOrderer = new NullOrderer();

    var commonStylesBundle = new Bundle("~/Bundles/CommonStyles");
    commonStylesBundle.Include("~/Styles/V3/functions.less",
                               "~/Styles/V3/helpers.less",
                               "~/Styles/V3/media-queries.less",
                               "~/Styles/V3/normalize.less",
                               "~/Styles/V3/print.less",
                               "~/Styles/V3/style.less");
    commonStylesBundle.Transforms.Add(cssTransformer);
    commonStylesBundle.Orderer = nullOrderer;

    bundles.Add(commonStylesBundle);
} 
```

我已经尝试过最新版本`BundleTransformer.Core`和之前的版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T11:15:06.913

您似乎已经安装了 Microsoft ASP.NET Web 优化框架的预览版（[1.1.0 Alpha1](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.1.0-alpha1)或[1.1.0 Beta1](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.1.0-Beta1)）。目前，Bundle Transformer 仅支持 Microsoft ASP.NET Web 优化框架的 RTM 版本（版本[1.0.0](http://nuget.org/packages/Microsoft.AspNet.Web.Optimization/1.0.0)）。我建议您回滚到 RTM 版本。

# ios - Restkit 0.20：POST CoreData 与外键的关系

> ID：15089405
> 
> 赞同：4
> 
> 时间：2013-02-26T12:41:12.737
> 
> 标签：ios, restkit, foreign-key-relationship, restkit-0.20

我在使用 RestKit 和 CoreData 时遇到了一些困难，尤其是因为 RestKit 0.20 的示例和文档很少。

我有一个（托管）对象`Song`，它与`Album`. 以下代码可以发布 JSON，但不能以*扁平化*格式发布，服务器除外。

```
// Defined elsewhere
Album *theAlbum;
RKObjectManager *objMan = [self objectManager];

// Response Mapping
RKObjectMapping *responseMapping = [RKObjectMapping mappingForClass:[Song class]];
[responseMapping addAttributeMappingsFromDictionary:@{ @"song": @"songID" }];
NSIndexSet *statusCodes = RKStatusCodeIndexSetForClass(RKStatusCodeClassSuccessful);
RKResponseDescriptor *responseDescriptor = [RKResponseDescriptor responseDescriptorWithMapping:responseMapping
                                                                                   pathPattern:@"/api/song"
                                                                                       keyPath:nil
                                                                                   statusCodes:statusCodes];

// Request Mapping
RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
RKEntityMapping *albumRelationshipMapping = [RKEntityMapping mappingForEntityForName:@"Album" inManagedObjectStore:[objMan managedObjectStore]];
[albumRelationshipMapping addAttributeMappingsFromDictionary:@{@"id": @"albumID", }];
[requestMapping addAttributeMappingsFromDictionary:@{ @"title": @"title", @"length": @"length" }];
[requestMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"album"
                                                                               toKeyPath:@"album"
                                                                             withMapping:albumRelationshipMapping]];
requestMapping = [requestMapping inverseMapping];
RKRequestDescriptor *requestDescriptor = [RKRequestDescriptor requestDescriptorWithMapping:requestMapping objectClass:[Song class] rootKeyPath:nil];

[objMan addRequestDescriptor:requestDescriptor];
[objMan addResponseDescriptor:responseDescriptor];

// Create a new temporary song object
Song *song = [NSEntityDescription insertNewObjectForEntityForName:@"Song"
                                                inManagedObjectContext:[[objMan managedObjectStore] mainQueueManagedObjectContext]];
song.title = @"Some Title";
song.length = 123;
song.album = theAlbum;

// Post operation
objMan.requestSerializationMIMEType = RKMIMETypeJSON;
RKManagedObjectRequestOperation *operation = [objMan appropriateObjectRequestOperationWithObject:song
                                                                                          method:RKRequestMethodPOST
                                                                                            path:@"/api/song"
                                                                                      parameters:nil];
[operation setCompletionBlockWithSuccess:^(RKObjectRequestOperation *operation, RKMappingResult *mappingResult) {
    // Success
} failure:^(RKObjectRequestOperation *operation, NSError *error) {
    // Failure
}];
[objMan enqueueObjectRequestOperation:operation]; 
```

此代码将发布这样的 JSON 正文：

`{"title":"Some Title","length":"123","album":{"id":"6e32ae476815f365"}}`

但是，服务器需要这样的 JSON 正文：

`{"title":"Some Title","length":"123","album":"6e32ae476815f365"}`

即关系`album`应该是一个*扁平*的外键而不是一个嵌套的对象。但是当我尝试改变`albumRelationshipMapping`这样的：

```
[albumRelationshipMapping setIdentificationAttributes:@[ @"albumID" ]];
[albumRelationshipMapping addAttributeMappingToKeyOfRepresentationFromAttribute:@"albumID"]; 
```

它引发异常。( `NSInvalidArgumentException', reason: '*** -[NSProxy doesNotRecognizeSelector:allKeys] called!'`)

有人知道我在这里做错了什么吗？或者是否有示例代码可以引导我朝着正确的方向前进？

对不起，如果这个问题已经在其他地方得到了回答。我搜索了所有 stackoverflow 和 google 组，但找不到适合我的案例的特定解决方案（RestKit 0.20，CoreData，与 FK 的关系）。

谢谢，德克

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T02:28:21.070

在这种情况下，我认为您可以简单地使用点符号直接获取albumID（无需使用RKRelationshipMapping）

尝试以这种方式更新您的代码：

```
// Request Mapping
RKObjectMapping *requestMapping = [RKObjectMapping requestMapping];
RKEntityMapping *albumRelationshipMapping = [RKEntityMapping mappingForEntityForName:@"Album" inManagedObjectStore:[objMan managedObjectStore]];
//[albumRelationshipMapping addAttributeMappingsFromDictionary:@{@"id": @"albumID", }];
//[requestMapping addAttributeMappingsFromDictionary:@{ @"title": @"title", @"length": @"length" }];
[requestMapping addAttributeMappingsFromDictionary:@{ @"title": @"title", @"length": @"length", @"album" : @"album.albumID" }];
//[requestMapping addPropertyMapping:[RKRelationshipMapping relationshipMappingFromKeyPath:@"album"
//                                                                               toKeyPath:@"album"
//                                                                             withMapping:albumRelationshipMapping]]; 
```

# wpf - 按钮的背景图像未显示在 WPF 中

> ID：15089407
> 
> 赞同：5
> 
> 时间：2013-02-26T12:41:17.933
> 
> 标签：wpf, xaml

我有一个程序，其中有很多按钮。每个按钮的背景设置为

```
 <Button x:Name="mybutton"  HorizontalAlignment="Left" Height="30" Margin="76,110,0,0" VerticalAlignment="Top" Width="25" Click="some_click">
                <Button.Background>
                    <ImageBrush ImageSource="Resource/button_picture.png"/>
                </Button.Background>
</Button> 
```

**当程序未运行时，图像在.xaml**中显示为背景，但当我运行应用程序时，图像不作为按钮的背景。如何在按钮中调试此背景？那里有什么愚蠢的错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:49:50.417

让我们确保我们在您的场景中正确设置了以下属性

1) 构建动作 -> 资源

2）复制到输出目录->不复制

3）不要使用图像源的相对路径，而是尝试像这样使用图像的完整路径（我这样说是因为我不知道图像资源在您的项目中的位置，在WPF中使用相对路径是完全正常的)

```
<Image Source="pack://application:,,,/AssemblyNameContainingImageResource;component/Resource/button_picture.png" /> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:48:29.207

You need to change the code like this

```
<Button x:Name="mybutton"  HorizontalAlignment="Left" Height="30" Margin="76,110,0,0"    VerticalAlignment="Top" Width="25" Click="some_click">
    <Image Source="Resource/button_picture.png"/>
</Button> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:54:19.077

如果是内容，请将 button_picture.png 的 Build Action 更改为 Resource。还要检查复制到输出目录属性值

# android - 使用 JSoup 解析 NullPointerException

> ID：15089417
> 
> 赞同：1
> 
> 时间：2013-02-26T12:41:58.197
> 
> 标签：android, nullpointerexception, jsoup

使用以下代码，

```
Document doc = null;
doc = Jsoup.parse(page):

String myexample = "My example";

Elements myexamples = doc.select("div.yourOptions p");
   if (myexamples != null && myexamples.first().ownText() != null) myexample = myexamples.first().ownText(); 
```

对于我的应用程序的 99.9% 的用户来说，一切似乎都很好。

但是我在第 7 行（相当于）收到了一些带有 NullPointerException 的 StackTrace。 StackTrace ：

```
java.lang.RuntimeException: An error occured while executing doInBackground()
at android.os.AsyncTask$3.done(AsyncTask.java:278)
at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
at java.util.concurrent.FutureTask.run(FutureTask.java:137)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
at java.lang.Thread.run(Thread.java:856)
Caused by: java.lang.NullPointerException
at com.tomtom.joe.mobile.Suivi$BackgroundAsyncTask.doInBackground(Suivi.java:369)
at com.tomtom.joe.mobile.Suivi$BackgroundAsyncTask.doInBackground(Suivi.java:1)
at android.os.AsyncTask$2.call(AsyncTask.java:264)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
... 4 more 
```

如何保护我免受 NullPointerException 的影响？“myexamples.first().ownText()”的内容因用户而异！但我猜“myexamples.first().ownText()”可能为空......

例子 ：

```
<div class="yourOptions"><div class="cockpitContent resizeHeight1">
<h2 class="Title">Title</h2>
<p>Options</p>
<p>Options 2</p>
</div></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:48:11.973

`myexamples.first()`是这里唯一没有检查值的`null`值。这表明您的错误的来源是这个值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T14:17:47.697

```
Elements elements = doc.select("div.cockpitContent > p");
for(Element element : elements){
    if(element != null && element.text() != null){
        String value = element.text();
        // do your job
    }
} 
```

注意：我没有测试这个代码。你应该试试这个。

# javascript - 当光标悬停在 HTML5 画布上的图像上时更新段落中显示的文本

> ID：15089420
> 
> 赞同：1
> 
> 时间：2013-02-26T12:42:03.580
> 
> 标签：javascript, html5-canvas, mouseover, kineticjs

我在 HTML5 画布上有一些图像，我想调用一个函数，`<p></p>`只要光标悬停在其中一个图像上，就会更新 HTML 标记中显示的文本。使用以下函数将图像绘制到画布上：

```
function drawBox(imageObj, img_x, img_y, img_width, img_height) {
    console.log("function drawBox is drawing the description boxes");
    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: img_width,
      height: img_height,
      // puts the image in the middle of the canvas
      x: img_x,
      y: img_y
    });

    // add cursor styling

    imagesLayer.add(canvasImage);
} 
```

我尝试`mouseover`通过添加一些代码来调用我拥有的将段落内容更新到此函数的函数，从而为每个图像添加一个 on 函数，所以我的`drawBox`函数现在看起来像这样：

```
function drawBox(imageObj, img_x, img_y, img_width, img_height) {
    console.log("function drawBox is drawing the description boxes");
    var canvasImage = new Kinetic.Image({
      image: imageObj,
      width: img_width,
      height: img_height,
      // puts the image in the middle of the canvas
      x: img_x,
      y: img_y
    });

    // add cursor styling

    canvasImage.on("mouseover", function(){
        //displayAssetDescriptionTip();
        console.log("displayAssetDescriptionTip() is being called on mouseover event");

        });

    imagesLayer.add(canvasImage);
} 
```

当我使用上面的此功能查看我的页面并将光标悬停在已添加该功能的图像之一上时，我添加到我的`mouseover`功能的日志正在控制台中显示 - 所以我知道鼠标悬停工作正常。

但是，我遇到的问题是我想从`mouseover`事件中调用的函数。`displayAssetDescriptionTip()`你会在上面看到，我已经在我的`mouseover`事件中注释掉了对该函数的调用。这是我想在光标悬停在这些图像上时调用的函数，但是，它似乎总是将段落中的文本更改为属于第一个描述框的文本......即如果光标悬停在我添加了`mouseover`事件的任何图像上，然后文本更改为属于第一个图像的文本，而不是光标悬停的图像。

功能是：

```
function displayAssetDescriptionTip(){
    if(canvasImage.id = "assetBox")
        document.getElementById('tipsParagraph').innerHTML = tips[34];
    else if(canvasImage.id = "liabilitiesBox")
        document.getElementById('tipsParagraph').innerHTML = tips[35];
    else if(canvasImage.id = "incomeBox")
        document.getElementById('tipsParagraph').innerHTML = tips[36];
    else if(canvasImage.id = "expenditureBox")
        document.getElementById('tipsParagraph').innerHTML = tips[37];
    else return;

    console.log("displayAssetDescriptionTip being called");
} 
```

任何人都知道为什么它总是将文本更改为第一张图像的文本，而不是对应于任何其他图像的文本？我已经将它设置为将文本更改为数组的不同元素，具体取决于光标悬停在哪个图像上，因此它应该为每个图像显示来自该数组的不同元素......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:52:48.787

在您的函数 displayAssetDescriptionTip 中，您使用的是 = 赋值运算符而不是 == 比较运算符，因此您的第一个 if 条件始终匹配。

功能更正：

```
function displayAssetDescriptionTip(canvasImage){
    if(canvasImage.id == "assetBox")
        document.getElementById('tipsParagraph').innerHTML = tips[34];
    else if(canvasImage.id == "liabilitiesBox")
        document.getElementById('tipsParagraph').innerHTML = tips[35];
    else if(canvasImage.id == "incomeBox")
        document.getElementById('tipsParagraph').innerHTML = tips[36];
    else if(canvasImage.id == "expenditureBox")
        document.getElementById('tipsParagraph').innerHTML = tips[37];
    else return;

    console.log("displayAssetDescriptionTip being called");
} 
```

不要忘记将 canvasImage 作为参数传递给您的事件处理程序

```
 canvasImage.on("mouseover", function(){
        displayAssetDescriptionTip(canvasImage);
        }); 
```

# xml - 如何将 xml 字符串上传到 ftp？

> ID：15089430
> 
> 赞同：0
> 
> 时间：2013-02-26T12:42:28.930
> 
> 标签：xml, coldfusion, ftp, coldfusion-8

我正在使用 ColdFusion 8、Windows 7 o/s 和 MySql 数据库。我通过从我的数据库中获取记录来创建一个 xml 文件。然后我想将它上传到我的 FTP 位置。我创建 xml 的代码如下。如何通过 FTP 上传此 xml？

```
<cfquery name="getData" datasource="datasourcename" dbtype="ODBC" username="myusername" password="mypassword">
    Select * from orders where orderid in (100,102,104)
</cfquery>

<cfset csvstr = createObject("java","java.lang.StringBuffer")>
<cfoutput query="getData">
    <cfset csvstr.append("?xml version=""1.0""?>") >
    <cfset csvstr.append("EDIData xmlns:eci=""http://www.abcdefg.com/CustomerReport"" ") >
    <cfset csvstr.append("       xmlns:xsi=""http://www.w3.org/2001/XMLSchema-instance"" ") >
    <cfset csvstr.append("       xsi:noNamespaceSchemaLocation=""CustomerReport.xsd"">") >
    <cfset csvstr.append("  MarketerDunsNumber>"& #MarketerDunsNumber# &"/MarketerDunsNumber>") >
    <cfset csvstr.append("  UtilityDunsNumber>"& #UtilityDunsNumber# &"/UtilityDunsNumber>") >
    <cfset csvstr.append("  Record RecordType="""& #RecordType# &""">") >
    <cfset csvstr.append("    NameCode>"& #NameCode# &"/NameCode>") >
    <cfset csvstr.append("    ContactName>"& #ContactName# &"/ContactName>") >
    <cfset csvstr.append("  /Record>") >
    <cfset csvstr.append("/EDIData>") >
    <cfset csvstr.append(Chr(13) & Chr(10)) >
    <cfset sFileName="CTData_"& #MarketerDunsNumber# &"_"& #UtilityDunsNumber# &".xml">
</cfoutput> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:24:10.843

```
<cfoutput   query=  "getData">

    <cfsavecontent  variable=   "sXMLContent">
    <EDIData    xmlns:eci="http://www.abcdefg.com/CustomerReport"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                xsi:noNamespaceSchemaLocation="CustomerReport.xsd">
        <MarketerDunsNumber>#MarketerDuinsNumber#</MarketerDunsNumber>
        <UtilityDunsNumber>#UtilityDunsNumber#</UtilityDunsNumber>
        <Record RecordType="#RecordType#">
            <NameCode>#NameCode#</NameCode>
            <ContactName>#ContactName#</ContactName>
        </Record>
    </EDIData>

    </cfsavecontent>

    <cfset  sTemporaryFileName= "xmlToFTP.xml" />
    <cfset  sRemoteFileName=    "xmlToFTP.xml" />

    <cffile action=     "write"
            file=       "#getTempDirectory()#/#sTemporaryFileName#"
            content=    "#toString( XMLParse( sXMLContent ) )#" />
    <cftry>
        <cfftp  action=     "putFile"
                server=     "some.ftp.server.com"
                user=       "user"
                password=   "password"
                localFile=  "#getTempDirectory()#/#sTemporaryFileName#"
                remoteFile= "#sRemoteFileName#" />

        <cfcatch>
            <!---   TODO: Do something with your error here.    --->

        </cfcatch>
    </cftry>

</cfoutput> 
```

有点像这样的东西。这应该足以让你开始。

# jquery - 将 onchange 绑定到下拉列表

> ID：15089434
> 
> 赞同：12
> 
> 时间：2013-02-26T12:42:45.473
> 
> 标签：jquery, html, events

我对绑定`onchange`到`select`. 我可以看到有多种方法可以做到这一点。

**html**

```
<select id="ddl" onchange="test()"></select> 
```

**jQuery**

```
$(function(){

    $("#ddl").change(function(){
               return test();
           });

}); 
```

或者

```
 $(function(){

    $("#ddl").bind("change", function(){
               return test();
           });

}); 
```

这3种方法中

1.  哪一个被视为标准做法？
2.  这些方法有什么优点吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-26T12:44:05.283

你也可以使用`.on`

```
$('SELECT').on('change',function(){
   // code
}); 
```

在 jQuery 1.7 之前，`change()`它只是`bind("change")`.

然而，从 1.7 开始，`on()`已经替换`bind("change")`,`so change()`是一个快捷方式。

因此，最好的方法是；

```
$("SELECT").bind("change", function(e) {});
$("SELECT").on("change", function(e) {}); 
```

我更喜欢第二个选项，因为它也可以自动应用于动态生成的`DOM`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:47:43.250

所有提到的 jquery 方法似乎都是平等的，我建议使用 .change() 使您的代码更易于阅读。

我经历过 html onchange="" 被 jquery 绑定事件重写，但是多次调用 jquery .change() 将链接通常需要行为的处理程序。

为了使代码干净，我只在我知道不会有多个事件处理程序的简单程序中使用 html onchange 属性，并且里面的代码非常简单（通常是一个函数）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:49:10.223

与其`<select>`每次都重新绑定，不如只交换它的内容（`<option>`元素列表）。

所以像你一样使用它：

```
$("#ItemsPerPage").change(function(e) { return updatePaging(); }); 
```

但是当你更新它时，只需换掉它的内容（其中 newSelectElement 是新`<select>`元素）：

```
function updateItemsPerPage( newSelectElement ) {
    $("#ItemsPerPage").empty().append( newSelectElement.childNodes );
} 
```

# android - 在android中回收位图

> ID：15089436
> 
> 赞同：0
> 
> 时间：2013-02-26T12:42:53.627
> 
> 标签：android, bitmap

首先，我使用`AsyncTask`下载位图并将位图包含到数组中。

`myBitmap[0] = task.execute().get();`

我的第一个问题是，如果我使用`recycle()`我的数组`Bitmap`和下载

`ASyncTask`再次启动时`Activity`，这会导致内存问题。

因为如果我全部下载`Bitmap`到我的设备中，肯定会发生错误。这就是为什么我

必须一次又一次地下载和删除它们。

第二个问题是，如果我有一些`Bitmap`如下：

`Bitmap newBitmap = myBitmap[0];`

我必须`recycle()`减少`newBitmap`记忆吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:32:54.383

是的，我认为您将不得不调用回收来减少内存使用量。您可以这样做 1\. 覆盖现有位图位置 2\. 退出应用程序时释放所有位图 3\. 密切关注一次加载的位图数量。

我建议使用 LruCache 来管理位图。在密切关注最常使用的位图等时很有帮助。

# php - 在 magento1.7.0.2 前端显示的禁用产品

> ID：15089441
> 
> 赞同：0
> 
> 时间：2013-02-26T12:43:14.750
> 
> 标签：php, magento

我正在使用 magento 1.7.0.2。

我在magento admin中禁用了一些产品并刷新了所有magento缓存并正确地重新索引了所有数据。但是禁用的产品仍然显示在magento前端。

我只想在前端显示启用的产品。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T08:37:14.650

如果您有多商店设置，则可能您已为一种商店字体/商店/网站禁用产品，而不是为您想要的网站禁用产品。

您可以分别为每个店面启用/禁用，或者如果您从管理员的下拉商店选择器中选择默认商店，这将对所有商店禁用（除非您还在较低级别上覆盖了此设置）。

您可以转到编辑产品页面，然后使用商店选择器下拉菜单检查每个店面/商店中的设置，以确保您已正确禁用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:50:22.410

是否有可能您的模板代码没有在逻辑上实现，因此您的收藏也正在抓取禁用的产品。

我建议您切换到 Magento 附带的默认主题并检查这些产品是否仍在显示。

假设您已通过管理员删除缓存（建议您进入 var 文件夹并删除缓存文件夹）

# sinatra - 如何为相应的javascript编写haml代码？

> ID：15089452
> 
> 赞同：0
> 
> 时间：2013-02-26T12:43:41.610
> 
> 标签：sinatra, haml

> 这是我用html创建的haml。但它似乎没有给出任何输出。请帮我找出错误。可能是我的语法有问题，或者没有得到要放入 haml.index 部分的内容。

```
#!/usr/bin/env ruby
require 'rubygems'
require 'sinatra'
require 'haml'

get '/' do
  haml :index
end

__END__
@@ layout
%html
  %head

%meta{:charset => "utf-8"}/
:css
  body {
    font: 10px sans-serif;
  }

  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }

  .x.axis path {
    display: none;
  }

  .line {
    fill: none;
    stroke: steelblue;
    stroke-width: 1.5px;
  }

%body
  %script{:src => "http://d3js.org/d3.v3.js"}
  :javascript
    var margin = {top: 20, right: 80, bottom: 30, left: 50},
        width = 960 - margin.left - margin.right,
        height = 500 - margin.top - margin.bottom;

    var x = d3.scale.linear()
        .range([0, width]);

    var y = d3.scale.linear()
        .range([height, 0]);

    var color = d3.scale.category10();

    var xAxis = d3.svg.axis()
        .scale(x)
        .orient("bottom");

    var yAxis = d3.svg.axis()
        .scale(y)
        .orient("left");

    var line = d3.svg.line()
        .interpolate("basis")
        .x(function(d) { return x(d.ID); })
        .y(function(d) { return y(d.temperature); });

    var svg = d3.select("body").append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
      .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

    d3.tsv("pckt_thru.tsv", function(error, data) {
      color.domain(d3.keys(data[0]).filter(function(key) { return key !== "ID"; }));

      data.forEach(function(d) {
        d.ID = +d.ID;
      });

      var cities = color.domain().map(function(name) {
        return {
          name: name,
          values: data.map(function(d) {
            return {ID: d.ID, temperature: +d[name]};
          })
        };
      });

      x.domain(d3.extent(data, function(d) { return d.ID; }));

      y.domain([
        d3.min(cities, function(c) { return d3.min(c.values, function(v) { return v.temperature; }); }),
        d3.max(cities, function(c) { return d3.max(c.values, function(v) { return v.temperature; }); })
      ]);

      svg.append("g")
          .attr("class", "x axis")
          .attr("transform", "translate(0," + height + ")")
          .call(xAxis);

      svg.append("g")
          .attr("class", "y axis")
          .call(yAxis)
        .append("text")
          .attr("transform", "rotate(-90)")
          .attr("y", 6)
          .attr("dy", ".71em")
          .style("text-anchor", "end")
          .text("VALUES");

      var city = svg.selectAll(".city")
          .data(cities)
        .enter().append("g")
          .attr("class", "city");

      city.append("path")
          .attr("class", "line")
          .attr("d", function(d) { return line(d.values); })
          .style("stroke", function(d) { return color(d.name); });

      city.append("text")
          .datum(function(d) { return {name: d.name, value: d.values[d.values.length - 1]}; })
          .attr("transform", function(d) { return "translate(" + x(d.value.ID) + "," + y(d.value.temperature) + ")"; })
          .attr("x", 3)
          .attr("dy", ".35em")
          .text(function(d) { return d.name; });
    });
    =yield

@@ index
#header
  %h1 Graph using Sinatra 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T17:20:45.843

您缺少`%`元素开头的所有标志，例如`html`应该是`%html`。请参阅[教程](http://haml.info/tutorial.html)。希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T17:21:25.240

如果这是确切的来源并且没有错别字。

你`%`在标签上不见了

```
%html # not html 
```

您的嵌套似乎不正确

```
%html
%meta
  %body

%html    
  %head
    %meta
  %body 
```

[尝试通过http://html2haml.heroku.com](http://html2haml.heroku.com)运行您的原始 html/erb 。如果您根本不了解 HAML，这可能会帮助您入门。

# javascript - 在 javascript 中使用正则表达式和测试值将字符串转换为正则表达式

> ID：15089455
> 
> 赞同：2
> 
> 时间：2013-02-26T12:43:49.883
> 
> 标签：javascript, regex

我有一个字符串形式的正则表达式，我想将该正则表达式绑定到我的网格单元格。这样，现在该单元格中的值将针对该正则表达式进行验证。我正在使用`RegExp`JavaScript 库进行转换和测试值。但它要么`false`每次都返回，要么给我一个`invalid regex`，即使对于使用的最简单的正则表达式也是如此。

这是我正在使用的方法：

```
addCellValidator(columnObj[0].name, new CellValidator({                 
    isValid: function (value) {
        var regex = new RegExp("/^[a-zA-Z\-]+$/");
        return value == "" || (regex.test(value)); 
    }
})); 
```

它是所需的格式还是任何特殊模式`RegExp`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:01:29.640

虽然这是有效的 JavaScript 代码：

```
new RegExp("/^[a-zA-Z\-]+$/") 
```

...它不会生成您认为的正则表达式。这相当于：

```
/\/^[a-zA-Z-]+$\// 
```

你必须：

*   带分隔符
*   提取和解析[标志](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions#Advanced_Searching_With_Flags)，如果有的话，例如：

    ```
    "/^[a-z-]+$/i" ---> new RegExp("^[a-z-]+$", "i") 
    ```

`-`还有一点需要注意：用反斜杠转义是没有意义的。如果要匹配`-`字符类中的文字，您需要将其作为第一项或最后一项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:48:39.490

您刚刚添加`/` `/`到字符串，这有效：

> ```
> addCellValidator(columnObj[0].name, new CellValidator({
>                 isValid: function (value) {
>                     var regex = new RegExp("^[a-zA-Z\-]+$");
>                     return value == "" || (regex.test(value)); }
>             })); 
> ```

# r - 在不同的行和列上进行减法并按组分隔

> ID：15089457
> 
> 赞同：5
> 
> 时间：2013-02-26T12:43:53.237
> 
> 标签：r, dataframe

我真的很讨厌连续问两个问题，但这是我无法解决的问题。所以假设我有一个数据框，如下所示：

```
 df
   Row# User    Morning     Evening     Measure Date
   1    1          NA          NA          2/18/11
   2    1          50          115         2/19/11
   3    1          85          128         2/20/11
   4    1          62          NA          2/25/11
   5    1          48          100.8        3/8/11
   6    1          19          71          3/9/11
   7    1          25          98          3/10/11
   8    1          NA          105         3/11/11
   9    2          48          105         2/18/11
   10   2          28          203         2/19/11
   11   2          35          80.99        2/21/11
   12   2          91          78.25        2/22/11 
```

在 R 中是否可以获取每个用户组的前连续一天（并且**只有**前一天，而不是前一个结果）晚上值 1 和不同行的早晨值之间的差异？所以我想要的结果是这样的。

```
 df
   Row# User    Morning     Evening     Date        Difference
   1       1      NA          NA        2/18/11        NA
   2       1      50          115       2/19/11        NA
   3       1      85          129       2/20/11        30
   4       1      62          NA        2/25/11        NA
   5       1      48          100.8     3/8/11         NA
   6       1      19          71        3/9/11         81.8
   7       1      25          98        3/10/11        46
   8       1      10          105       3/11/11        88
   9       2      48          105       2/18/11        NA
   10      2      28          203       2/19/11        77
   11      2      35          80.99     2/21/11        NA
   12      2      91          78.25     2/22/11        -10.01 
```

我想要做的就是取早上值，然后从每个用户组的前连续一天的晚上值中减去它。如您所见，我的数据框的某些部分在早晚列中包含 NA 值，此外，对于每个不同的用户，并非所有日期都是连续顺序的，因此自然应该分配 NA。

我试过搜索谷歌，但没有太多关于能够为不同列上的每组行应用函数到不同行的信息（如果有任何意义的话）。

我的尝试包括许多变化。

```
df$Difference<-ave((df$Morning,df$Evening),
                    df$User,
                    FUN=function(x){
                        c('NA',diff(df$Evening-df$Morning)),na.rm=T
                   }) 
```

再次，任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:57:39.783

盲目的第一枪（未经测试）。依赖于已经按用户和日期排序的数据框。

```
#if necessary, transform your dates from factor to Date
df$Date <- as.Date(levels(df$Date)[df$Date],format="%m/%d/%y")

df <- within(df, 
  Difference <- ifelse(c(NA,diff(Measure_Date)) == 1 & diff(User) == 0, 
    c(NA,head(Evening,-1)) - Morning, NA
  )
) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-26T12:59:10.543

**注意：**您显示的输入数据和输出数据不一样。有一个在输出`NA`中被替换，`10`最后一个日期`2/14/11`在输入和`2/22/11`输出中。

我假设输出是创建此答案以匹配您的结果的原始数据。

```
df$Diff <- c(NA, head(df$Evening, -1) - tail(df$Morning, -1))
df$Diff[which(c(0, diff(as.Date(as.character(df$Measure_Date), 
                 format="%m/%d/%Y"))) != 1)] <- NA

> df

#    Row User Morning Evening Measure_Date   Diff
# 1    1    1      NA      NA      2/18/11     NA
# 2    2    1      50  115.00      2/19/11     NA
# 3    3    1      85  128.00      2/20/11  30.00
# 4    4    1      62      NA      2/25/11     NA
# 5    5    1      48  100.80       3/8/11     NA
# 6    6    1      19   71.00       3/9/11  81.80
# 7    7    1      25   98.00      3/10/11  46.00
# 8    8    1      10  105.00      3/11/11  88.00
# 9    9    2      48  105.00      2/18/11     NA
# 10  10    2      28  203.00      2/19/11  77.00
# 11  11    2      35   80.99      2/21/11     NA
# 12  12    2      91   78.25      2/22/11 -10.01 
```

@user1342086 的编辑（被拒绝，但确实是正确的）：

```
df$Diff[which(diff(df$User) != 0)] <- NA 
```

似乎负责按“用户”进行分组。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T13:35:29.000

我用过`plyr`，所以请确保您已安装它。即使用户数据混合在一起（*即*不是连续的行）并且日期不是按时间顺序排列的，该解决方案也应该有效。

```
# Your example data, as you should post it for us to use
df <-
structure(list(User = c(1L, 1L, 1L, 1L, 1L, 1L, 1L, 1L, 2L, 2L, 
2L, 2L), Morning = c(NA, 50L, 85L, 62L, 48L, 19L, 25L, NA, 48L, 
28L, 35L, 91L), Evening = c(NA, 115, 128, NA, 100.8, 71, 98, 
105, 105, 203, 80.99, 78.25), Measure_Date = structure(c(1L, 
2L, 3L, 5L, 9L, 10L, 6L, 7L, 1L, 2L, 4L, 8L), .Label = c("2/18/11", 
"2/19/11", "2/20/11", "2/21/11", "2/25/11", "3/10/11", "3/11/11", 
"3/14/11", "3/8/11", "3/9/11"), class = "factor")), .Names = c("User", 
"Morning", "Evening", "Measure_Date"), class = "data.frame", row.names = c(NA, 
-12L))

# As already stated by Arun, you need the date as class Date
df$Measure_Date <- as.Date(df$Measure_Date, format='%m/%d/%y')

# Use plyr to procces the dataframe by user
library(package=plyr)
ddply(.data=df, .variables='User',
      .fun=function(x){
        # Complete sequence of dates for each user
        tdf <- data.frame(Measure_Date=seq(from=min(x$Measure_Date),
                                           to=max(x$Measure_Date),
                                           by='1 day'))

        # Merge to fill in NAs for unused dates
        tdf <- merge(tdf, x, all=TRUE)

        # Put desired values side by side
        tdf$Evening <- c(NA, tdf$Evening[-length(tdf$Evening)])

        # Diference
        tdf$Difference  <- tdf$Evening - tdf$Morning

        # Return desired value to original data
        tdf <- tdf[,c('Measure_Date', 'Difference')]
        x <- merge(x, tdf)
        x
      }) 
```

# java - Inner Join 3表后无法获得结果

> ID：15089460
> 
> 赞同：2
> 
> 时间：2013-02-26T12:43:55.130
> 
> 标签：java, sql, hibernate, jsp, struts2

我已经声明了一个`List<Object[]>`返回对象数组的列表，其中每个数组代表结果中的一行。值索引基于您的 select 语句。

```
productList = 
(List<Object[]>) session.createSQLQuery("
SELECT User.username, User.email, Orders.p_id, Orders.o_id, Product.listed_price " +                                                                                         
"FROM Orders " +                                                                     
"INNER JOIN User ON User.u_id = Orders.u_id " +                                                                  
"INNER JOIN Product ON Product.p_id = Orders.p_id " +                                                                
"WHERE Product.p_id = '"+p_id +"' " +                                                            
"ORDER BY User.username").list(); 
```

我有 3 张表**User, Product 和 Orders**。

```
USER:
-----+-----------+------------+---------+----------+-----------+
 u_id | username  | password   | contact | email   | city      |
------+-----------+------------+---------+---------+-----------+

PRODUCT:
+------+----------+--------------+------+--------------+
| p_id | category | listed_price | qty  | description  |
+------+----------+--------------+------+--------------+

ORDERS:
+------+--------+------+------+-----------+
| o_id | date   | u_id | p_Id | order_qty |
+------+--------+------+------+-----------+ 
```

我想按以下顺序将 User 表与 Product 以及 o_id（来自 ORDER）一起内联：

```
+-----------+-------+------+------+--------------+
| username  | email | p_id | o_id | listed_price |
+-----------+-------+------+------+--------------+ 
```

在我的 ActionClass/View 类中，我声明`public List<Object[]> productList;`从上面的控制器类访问对象列表。

```
public List<Object[]> productList;

public String listAllProduct(){
        HttpServletRequest request = (HttpServletRequest) ActionContext.getContext().get(ServletActionContext.HTTP_REQUEST);
        productList = orderDaoFactory.listProduct(Integer.parseInt( request.getParameter("p_id"))); 
         System.out.println("\t"+productList.get(0).toString());
        return SUCCESS;
} 
```

在我的 JSP 页面中，我使用这个列表（对象数组）productList 作为迭代器标记来迭代所有订购该产品的客户。

```
<s:iterator value="productList">

        <tr>
            <td><h4><s:property value="username"/></h4></td>    
            <td><h4><s:property value="email"/></h4></td>
            <td><h4><s:property value="p_id"/></h4></td>
            <td><h4><s:property value="o_id"/></h4></td>
            <td><h4><s:property value="listed_price"/></h4></td>            
        </tr>

</s:iterator> 
```

**挑战/问题：**我的问题是即使在调试后没有任何错误也无法成功获得输出。空心现在想使用 O/R 映射将 Objects JOIN 与其他对象关联起来。请建议我哪里错了。你的建议很有价值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:13:17.233

```
productList = 
(List<Object[]>) session.createSQLQuery("
SELECT User, Orders, Product" +                                                                                         
"FROM User,Orders,Product " +                                                                     
"INNER JOIN User ON User.u_id = Orders.u_id " +                                                                  
"INNER JOIN Product ON Product.p_id = Orders.p_id " +                                                                
"WHERE Product.p_id = '"+p_id +"' " +                                                            
"ORDER BY User.username").list();
Then you will get three object. In first list you will get Object[0]=Users,Object[1]=Orders,Object[2]=Product. Now iterate it. 
```

版后

```
productList = 
(List<Object[]>) session.createQuery("
SELECT User, Orders, Product" +                                                                                         
"FROM User,Orders,Product " +                                                                     
"INNER JOIN User ON User.u_id = Orders.u_id " +                                                                  
"INNER JOIN Product ON Product.p_id = Orders.p_id " +                                                                
"WHERE Product.p_id = '"+p_id +"' " +                                                            
"ORDER BY User.username").list(); 
```

is 语法有什么问题？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:47:52.037

如果要直接查询对象，请使用 HQL 而不是 SQL。`session.createQuery(String)`与以下查询一起使用：

```
SELECT u.username, u.email, o.p_id, o.o_id, p.listed_price FROM Orders as o
INNER JOIN User as u WITH u.u_id = o.u_id
INNER JOIN Product as p WITH p.p_id = o.p_id
WHERE p.p_id = ???
ORDER BY u.username 
```

# c# - 在使用纯 js + jQuery AJAX 调用或摆脱每个客户端脚本并仅在 .NET 中重写代码之间的两难境地

> ID：15089462
> 
> 赞同：0
> 
> 时间：2013-02-26T12:43:56.520
> 
> 标签：c#, jquery, ajax, security

我开发了一个网站（jQuery + .NET/C#），它已经准备好了 90%。在发布它之前，我决定面对事实，我向自己承认代码并不是完全安全的。老实说，它几乎不是黑客安全的。这是因为我一直在练习一些不良的 Web 编程习惯（比如过于依赖客户端脚本而不是将其放入服务器端）。

更准确地说，我猜我使用了太多的 jQuery，现在我看到我所有的 webmethods 都暴露在 .js 文件中。我已经缩小和混淆了，但这并不能阻止一个坚定的作弊者得到我所有的东西。这是一点。

另一个问题是我有一些网络方法可以从我的数据库中返回大量数据。不是机密数据，而是我的系统生成的一些不错的数据，我不希望任何外部网站调用它并将其显示为他们的材料。

我想到的解决方案之一是在服务器端生成所有 html 并将其返回给 .js，然后将其附加到他各自的元素（这样我会隐藏它之外的所有智能）但它并不能解决所有问题我上面提到的问题。

所以我的问题是......你们认为使用 ASP.NET 控件重写所有内容是否更安全，或者有没有办法使用我拥有的代码使其**真正安全**（比如避免对我的 webmethods 的外部调用）？

我知道不看代码就很难发表意见，但它是巨大的！这就是我所说的（太多的客户端脚本，很少的服务器端）。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:54:50.390

首先，您可以检查服务器端，哪个域正在调用您的后端-> 拒绝不允许的域。（[检查这张票](http://classicasp.aspfaq.com/general/how-do-i-protect-my-client-side-javascript-code.html)）

为了减少 javascript 的魔力，您可以按照您所说的将逻辑移到后端。

也许有一些技巧可以保存你的 javascript 代码（[看看这个](http://classicasp.aspfaq.com/general/how-do-i-protect-my-client-side-javascript-code.html)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:56:51.397

如果您想要一个完全安全的网站，那么您将感到失望。你可以让它变得最难。

这对于在服务器端处理然后提供给客户端的站点是最简单的。但我也建议不要将所有内容都移到服务器上，因为毕竟服务器必须处理你对它发出的每一个请求。

我经历过，将所有数据服务和评估逻辑服务器端和渲染，以及简单的处理逻辑客户端端，是“最简单的”。从而以最小的安全风险结合两种技术的优势。例如，在 AJAX 调用之后提供一些数据（如果您甚至想这样做），您可以在`success:`or`failure:`以及`after:`或类似关键字的帮助下调用渲染、更新和处理逻辑客户端。

尝试一些新事物。如果您将其全部转移到一种技术/流程中，您将不得不利用该流程的缺点。把事情分开！

# cuda - 内核函数和 cudaMemcpy

> ID：15089467
> 
> 赞同：0
> 
> 时间：2013-02-26T12:44:23.440
> 
> 标签：cuda

我不知道为什么我的内核函数不起作用。理论上我的程序应该显示 a = 14，但它显示 a = 5。

```
#include <iostream>
#include <cuda.h>
#include <cuda_runtime.h>

using namespace std;

__global__ void AddIntCUDA(int* a, int* b)
{
    a[0] += b[0];
}

int main()
{
    int a = 5;
    int b = 9;
    int *d_a ;
    int *d_b ;

    cudaMalloc(&d_a, sizeof(int));
    cudaMalloc(&d_b, sizeof(int)); 

    cudaMemcpy(d_a, &a, sizeof(int), cudaMemcpyHostToDevice);
    cudaMemcpy(d_b, &b, sizeof(int), cudaMemcpyHostToDevice);

    AddIntCUDA<<<1, 1>>>(d_a, d_b);

    cudaMemcpy(&a, d_a, sizeof(int), cudaMemcpyDeviceToHost);

    cout<<"The answer is a = "<<a<<endl;

    cudaFree(d_a);
    cudaFree(d_b);

    return 0;
} 
```

我也不明白为什么如果我有：

```
cudaMemcpy(d_b, &b, sizeof(int), cudaMemcpyHostToDevice); //d_b = 9 on device
cudaMemcpy(&a, d_b, sizeof(int), cudaMemcpyDeviceToHost); //a = 9 on host 
```

a 还是 5？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-12T04:41:41.217

每当您遇到 CUDA 程序问题时，第一步应该是对所有 cuda API 调用和内核调用使用适当的[cuda 错误检查。](https://stackoverflow.com/questions/14038589/what-is-the-canonical-way-to-check-for-errors-using-the-cuda-runtime-api)通过错误检查，此错误（驱动程序问题）将立即显而易见。

可以在 cuda 标签[信息选项卡](https://stackoverflow.com/tags/cuda/info)上找到其他建议。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-02-26T17:31:39.383

也许你需要把 cudaDeviceSynchronize(); 在 AddIntCUDA<<<1, 1>>>(d_a, d_b);

当您执行 AddIntCUDA<<<1, 1>>>(d_a, d_b); 如果您不放置 cudaDeviceSynchronize(); ，主机不会等待 CUDA 内核；

# solr - 异常重播日志：Solr

> ID：15089481
> 
> 赞同：1
> 
> 时间：2013-02-26T12:45:39.827
> 
> 标签：solr

Solr 运行良好，直到我运行它时突然抛出异常

例外是：

```
WARNING: REPLAY_ERR: Exception replaying log

java.lang.UnsupportedOperationException
    at org.apache.lucene.queries.function.FunctionValues.longVal(FunctionValues.java:46)
    at org.apache.solr.update.VersionInfo.getVersionFromIndex(VersionInfo.java:201)
    at org.apache.solr.update.UpdateLog.lookupVersion(UpdateLog.java:711)
    at org.apache.solr.update.VersionInfo.lookupVersion(VersionInfo.java:184)
    at org.apache.solr.update.processor.DistributedUpdateProcessor.versionAdd(DistributedUpdateProcessor.java:571)
    at org.apache.solr.update.processor.DistributedUpdateProcessor.processAdd(DistributedUpdateProcessor.java:350)
    at org.apache.solr.update.UpdateLog$LogReplayer.doReplay(UpdateLog.java:1268)
    at org.apache.solr.update.UpdateLog$LogReplayer.run(UpdateLog.java:1159)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
    at java.util.concurrent.FutureTask.run(FutureTask.java:166)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

在挖掘这个问题后，我发现该类`FunctionValues`没有实现以下功能

```
public float floatVal(int doc) { throw new UnsupportedOperationException(); }
public int intVal(int doc) { throw new UnsupportedOperationException(); }
public long longVal(int doc) { throw new UnsupportedOperationException(); }
... 
```

而在[文档](http://grepcode.com/search/usages?id=repo1.maven.org%24maven2@org.apache.lucene%24lucene-queries@4.0.0@org%24apache%24lucene%24queries%24function@FunctionValues@longVal%28int%29&start=0&type=method&k=u)中对此一无所知，

它是如何工作的，我缺少什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-01T16:47:13.953

在 schema.xml 中，您的 _version_ 字段类型是什么？我们遇到了这个问题，我们的 _version_ 字段类型设置为字符串，必须更改为 slong。

这仅在我们开始使用分片和/或复制时才表现出来。当它是单个节点上的单个核心时，根本没有问题。

**错误的方法**

```
<field name="_version_" type="string" indexed="true" stored="true" multiValued="false" /> 
```

**行之有效的方式**

```
<field name="_version_" type="slong" indexed="true" stored="true" multiValued="false" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-19T05:06:24.003

更正 -

类型应为“长”。它解决了这个问题。

# c# - 无法在构造函数中设置纹理

> ID：15089482
> 
> 赞同：0
> 
> 时间：2013-02-26T12:45:50.073
> 
> 标签：c#, xna

我的来源有问题，`Rectangle`因此我的纹理没有显示在屏幕上。当我使用源为 null 的 Draw 方法时，纹理有效。

我不知道这有什么问题。

另外，如果我将其放入构造函数中：`source=new Rectangle((int)position.x,(int)position.Y, texture.Width/frameas, texture.Height)`. 我得到错误

> “使用*新*关键字创建对象”

我的 Game1 肯定没有错误，因为我只加载纹理、更新和绘制。

```
public class Player
{
    public Texture2D texture;
    public Vector2 position;
    public int speed, width,frames, jump;
    public float scale;
    public Vector2 velocity;
    public float gravity;
    public bool hasJumped;
    public Rectangle source;

    public Player(int x, int y)
    {
        speed = 5;
        position.X = x;
        position.Y = y;
        scale = 1.8f;
        frames = 4;
        source = new Rectangle(x,y, 30,30);

    }

    public void LoadContent(ContentManager Content)
    {
        texture = Content.Load<Texture2D>("player");
    }
    public void Update(GameTime gameTime)
    {
        position += velocity;
        KeyboardState keyState = Keyboard.GetState();
        if (keyState.IsKeyDown(Keys.D))
        {
            velocity.X = 3f;
        }
        if (keyState.IsKeyDown(Keys.A))
        {
            velocity.X = -3f;
        }
        if (keyState.IsKeyDown(Keys.Space) && hasJumped==false)
        {
            position.Y -= 10f;
            velocity.Y = -5f;
            hasJumped = true;
        }
        if (hasJumped == true)
            velocity.Y += 0.15f;
        else
            velocity.Y = 0f;
    }
    public void Draw(SpriteBatch spriteBatch)
    {
        spriteBatch.Draw(texture, position, source, Color.White, 0f, Vector2.Zero, scale, SpriteEffects.None, 0f);
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:39:55.490

您不能`texture`在构造函数中引用，因为它还不存在。在您将纹理加载到 中之前，它不会设置为实际值`LoadContent()`，因此当您尝试使用它来构建矩形时，它会抛出一个`NullReferenceException`.

在此行之后创建源矩形：

```
texture = Content.Load<Texture2D>("player"); 
```

# php - GEOIP_ADDR 127.0.0.1 Apache mod_geoip + nginx

> ID：15089484
> 
> 赞同：0
> 
> 时间：2013-02-26T12:45:58.610
> 
> 标签：php, apache, nginx

我安装了 mod_geoip2 apache 模块，并且可以在 phpinfo() 的 Loaded Modules 中看到它；但是，在 Apache 环境中，我的 GEOIP_ADDR 是 127.0.0.1。我的 REMOTE_ADDR 是正确的远程地址。

我在前端也有可能导致问题的 nginx。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:45:29.340

经过几个小时的谷歌搜索，终于找到了。

我的问题是 apache 的模块 mod_rpaf（它告诉 apache 真实 IP）是在 mod_geoip 之后加载的。

我所要做的就是重命名

mod_rpaf.load --> 00mod_rpaf.load mod_geoip.load --> 01mod_geoip.load

在 apache 的启用 mods 的目录中。并重新启动 Apache。现在像魅力一样工作！

# c# - Mongodb查询子子项

> ID：15089489
> 
> 赞同：0
> 
> 时间：2013-02-26T12:46:16.297
> 
> 标签：c#, mongodb, mongodb-.net-driver

我有如下的monogodb数据结构：

```
 {
       "_id" : ObjectId("512c4c468c08631ff0dbb02c"),
       "ReferenceNumber" : "MongoDb",
       "Title" : "Shashi",
       "CreatedUserId" : "users/1027",
       "Content" : "s",
       "CustomerId" : "customers/257",
       "StatusDefinitionId" : "sd",
        "ItemMetadata" : [{
       "MetadataId" : "MetadataDefinitions/839",
       "MetadataName" : "DropDown",
       "MetadataValue" : "78"
        }, {
      "MetadataId" : "MetadataDefinitions/839",
      "MetadataName" : "DropDown",
      "MetadataValue" : "DropDown3"
       }, {
       "MetadataId" : "MetadataDefinitions/838",
       "MetadataName" : "Number1",
       "MetadataValue" : "546"
        }],
        "Portfolios" : [{
        "_id" : "portfolios/226",
         "IsDefault" : true
         }]
        } 
```

第二个项目集合：-

```
 {
                      "_id" : ObjectId("512c4c468c08631ff0dbb02c"),
                      "ReferenceNumber" : "MongoDb",
                       "Title" : "Shashi",
                       "CreatedUserId" : "users/1027",
                       "Content" : "s",
                       "CustomerId" : "customers/257",
                       "StatusDefinitionId" : "sd",
                        "ItemMetadata" : [{
                     "MetadataId" : "MetadataDefinitions/839",
                   "MetadataName" : "DropDown",
                     "MetadataValue" : "78"
                     }, {
                   "MetadataId" : "MetadataDefinitions/839",
                    "MetadataName" : "DropDown",
                     "MetadataValue" : "DropDown4"
                       }, {
                     "MetadataId" : "MetadataDefinitions/838",
                     "MetadataName" : "Number1",
                    "MetadataValue" : "546"
                     }],
                     "Portfolios" : [{
                    "_id" : "portfolios/226",
                       "IsDefault" : true
                       }]
                       } 
```

我想在 mongodb c# 中获取查询。我只需要返回第一个项目集合。

```
(ItemMetadata.MetadataName= "DropDown" and ItemMetadata.MetadataValue="78" and ItemMetadata.MetadataName= "DropDown" and ItemMetadata.MetadataValue="DropDown3") 
```

与 ItemMetadata 的第二个孩子类似。有点像这样

```
 Query.EQ("ItemMetadata.MetadataName", "DropDown") and (Query.EQ("ItemMetadata.MetadataValue", "78"] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T18:53:01.733

In terms of **which** document(s) to return, you query is then "how do I specify that only documents containing an array element where both MetadataName and MetadataValue match in the same element" - the [$elemMatch](http://docs.mongodb.org/manual/reference/operator/elemMatch/) is the operator to use.

In terms of **what parts** of the document to return, your only choice is to return the whole filed or not to return a whole field. In regular queries, you can't a subset of the values in the stored array. (Although you could use the Aggregation framework $unwind, but not really necessary or recommended high transaction reads)

# javascript - 将相同的更改功能应用于多个 div？

> ID：15089493
> 
> 赞同：1
> 
> 时间：2013-02-26T12:46:31.833
> 
> 标签：javascript, jquery, function, event-handling

将函数绑定到多个 div 的最佳方法是什么？

```
$('#trigger1').change(function(){
   // same code
});

$('#trigger3').change(function(){
   // same code
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T12:48:03.453

要么使用类*（imo是类最好的方法）*

```
 <div class="trigger"></div>
    <div class="trigger"></div>

$('.trigger').change(function(){

}); 
```

或者这样做

```
$('#trigger1,#trigger3').change(function(){

}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:48:35.203

您可以在同一个函数调用中包含多个 id：

```
$('#trigger1, #trigger3').change(function(){
   // code goes here
}); 
```

或者你可以给他们相同的类，例如 triggerClass 然后像这样调用它：

```
$('.triggerClass').change(function(){
   // code goes here
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T12:48:38.870

为这些 div 添加一个通用的类名

```
<div class="myClass" id="trigger1">
</div>

<div class="myClass"  id="trigger2">
</div> 
```

这是它的脚本

```
$(".myClass").click(function(){
// your code
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T12:48:40.707

```
$('#trigger1, #trigger3').change(some_function);

Or:

$('#trigger1').add('#trigger3').change(some_function); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-26T12:49:11.550

只需将相同的类应用于所有元素然后编写

```
$('.classname').change(function(){

}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-26T12:49:38.270

你可以使用

```
$('#trigger1, #trigger3').change(function(){
   same code
}); 
```

对触发器进行分组

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-02-26T13:03:26.877

添加一个通用类：

```
<div class="rowTrigger">trigger 1</div>
<div class="rowTrigger">trigger 2</div> 
```

脚本

```
$(function(){
   $("body").on("click", ".rowTrigger", function(e){ 
      e.preventDefault();
      var row = $(this); //row element
   });
}); 
```

每个“rowTrigger”都会在“click”处理程序上触发，这可以更改为其他或多个事件。有关详细信息，请参阅 [http://api.jquery.com/on/ 。](http://api.jquery.com/on/)例如，可以通过将“body”更改为“table”来更改所处理事件的范围，因此它只会在单击表中的那些“div”行时触发。

更简单地说，它可以写成（触发“点击”和“悬停”......但你明白了）：

```
$("div.rowTrigger").on("click hover", function(e){
   e.preventDefault();
   var row = $(this); //row element
   //some extra code
}); 
```

# ruby - I just want to write a simple µ in Ruby and Prawn

> ID：15089496
> 
> 赞同：1
> 
> 时间：2013-02-26T12:46:45.823
> 
> 标签：ruby, prawn

my head is on the edge of exploding...
How can I encode my string to UTF-8?

I always get this error:
`Arguments to text methods must be UTF-8 encoded`

I use Prawn as PDF Writer.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:27:18.367

放

```
# encoding: utf-8 
```

在您的 rb 文件的第一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:29:45.677

你可以使用[`force_encoding`](http://www.ruby-doc.org/core-2.0/String.html#method-i-force_encoding)：

```
"some string".force_encoding("UTF-8") 
```

# c++ - Does deleting the main class's object pointer delete nested classes pointers as well?

> ID：15089497
> 
> 赞同：3
> 
> 时间：2013-02-26T12:46:46.610
> 
> 标签：c++, class, subclass

I have a class inside a class, nested class

```
class A {
 public:
 int a;
 int b;
  class B {
    int c;
    int d;
  }
} 
```

In the process, I allocate the class B's object pointer in heap.

```
 B *bobj = new B();
   A *a;
   auto_ptr<A> A1(new A());
   a = A1.release(); 
```

Does deleting the a, delete `bobj` as well??

```
delete a; 
```

or should we explicitly delete the sub class pointer as well?

This is in a code not written by me, I had put the logs at all alloc and deallocs and I see that `B *bobj = new B()`, for this there is no delete and for A's object ptr there is a delete. And yet there is no memory leak.That is why I got a doubt what happens in this scenario.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T12:49:42.893

我想你在这里有点困惑。如果你有一个 type 的对象`A`，它里面没有`B`对象。它只有两个`int`s`a`和`b`。您的类`B`只是在内部声明为嵌套类`A`- 类似于在命名空间中声明它。它必须`A::B`从类外引用（并且必须`public`这样做）。

在您提供的示例代码中`B *bobj = new B(); A *a;`，您甚至没有创建`A`对象。我想你的意思是这个（假设你 make `B` `public`）：

```
A::B *bobj = new A::B();
A *a = new A(); 
```

两者`a`和`bobj`都是完全独立的对象。他们彼此没有任何关系。你必须对`delete`他们两个。

相反，如果您这样做了：

```
class B {
  int c;
  int d;
};

class A {
  int a;
  B b;
}; 
```

现在类类型的对象`A`有一个名为的成员`b`，其类型为`B`。该`b`成员是任何类型对象的一部分`A`。所以如果你这样做`A* a = new A();`，你会得到一个里面`A`有一个对象的对象。`B`你必须只做`delete a;`.

**黄金法则：**只有`delete`你已经`new`编辑过的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:48:39.773

您编写代码的方式`class B`是 中的嵌套类型`class A`，但 中不`class B`包含`class A`的实例，这意味着必须单独管理实例化（因此销毁）。所以是的，`delete`如果你们`new`两个都需要。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-26T12:49:34.340

这取决于你的析构函数在做什么。如果`A`包含类型的指针`B`并且在`A`该指针的析构函数中被释放 - 是的。如果`A`不包含类型指针`B`和/或 in`A`的析构函数指针`B`未释放 - 您应该手动释放它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T12:48:32.923

In short, C++ doesn't automatically delete object pointers (without specialize auto-pointers etc.). So, **explicitly delete** them in your program.

`delete a;` call destructor of A class. You can write code to delete B's object inside destructor.

# javascript - 使用 HTML5 占位符之类的标签

> ID：15089498
> 
> 赞同：0
> 
> 时间：2013-02-26T12:46:46.873
> 
> 标签：javascript, html, placeholder

我正在尝试`<label>`在我的 html 联系表单中使用元素，例如用于输入的 HTML5 占位符属性。我编写了以下 JavaScript 来充当可重用函数，女巫将提供以下功能。

1.  按名称查找输入。
2.  获取输入的值。
3.  找到属于输入的标签。
4.  根据输入的状态更改标签样式。
5.  根据输入的值更改标签样式。

但是它不起作用，我不知道为什么控制台中没有出现错误。我究竟做错了什么？[这是一个带有代码的 JS Fiddle](http://jsfiddle.net/cCxjk/3/ "用代码链接到 JS Fiddle")

```
function placeholder(field_name) {

    // Get the input box with field_name 
    // Then get input value
    var box = document.getElementsByName(field_name);
    var i;
    for (i = 0; i < box.length; i++) {
        var value = document.getElementById(box[i].value);
    }

    // Get the labels belonging to each box using the HTML for attribute
    var labels = document.getElementsByTagName('LABEL');
    for (i = 0; i < labels.length; i++) {
        if (labels[i].htmlFor !== '') {
            var elem = document.getElementById(labels[i].htmlFor);
            if (elem) {
                box.label = labels[i];
            }
        }
    }

    // Colors
    var focusColor = "#D5D5D5";
    var blurColor = "#B3B3B3";

    // If no text is in the box then show the label grey color
    box.onblur = function () { 
        box.label.style.color = blurColor; 
    };

    // If input focuses change label color to light grey
    box.onfocus = function () { 
        box.label.style.color = focusColor; 
    };

    // If there is text in the box then hide the label
    if (box.value !== "") {
        // Quick do something, hide!
        box.label.style.color = "transparent";
    }
}

// Call the function passing field names as parameters
placeholder(document.getElementsByName("email"));
placeholder(document.getElementsByName("firstName"));
placeholder(document.getElementsByName("lastName")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:42:54.780

[http://jsfiddle.net/cCxjk/5/](http://jsfiddle.net/cCxjk/5/)

```
var inputs = document.getElementsByTagName('input');
var old_ele = '';
var old_label ='';
function hide_label(ele){
    var id_of_input = ele.target.id;
    var label = document.getElementById(id_of_input + '-placeholder');

    if(ele.target == document.activeElement){
        label.style.display = 'none';    
    }
    if (old_ele.value == '' && old_ele != document.activeElement){
        old_label.style.display = 'inline';
    }
    old_ele = ele.target;
    old_label = label;
    }

for(var i = 0; i < inputs.length; i++){
    inputs[i].addEventListener('click', hide_label);
} 
```

我将指出几件事，您将不得不发现`label`内部的事实，`input`因此用户现在无法单击一半`input`并且实际上获得了`input`收益`focus`。

另外我猜您想在 IE 中执行此操作（否则我强烈建议您使用 html5 占位符！）这意味着您需要`ele.target`将`ele.srcElement`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T16:31:48.567

这可能被认为对我使用的侦听器数量有点矫枉过正，请随意删除任何您认为不必要的内容，但我已尝试使用您拥有的 HTML 结构并为您提供所有想要的效果。它应该适用*于*匹配`<label>`s *id*或匹配它的 s （假设没有*id*匹配）。我总是说更喜欢使用*id*而不是*name*。我相信这个*JavaScript*也应该在所有浏览器中工作，除了旧 IE 版本需要一个 shim （如果它不在一个/错误消息中，请告诉我）。*`<input>`*`<name>`****`addEventListener`******

 ***[**演示**](http://jsfiddle.net/dFQY9/2/)

```
var focusColor = "#D5D5D5", blurColor = "#B3B3B3";
function placeholder(fieldName) {
    var named = document.getElementsByName(fieldName), i;
    for (i = 0; i < named.length; ++i) { // loop over all elements with this name
        (function (n) { // catch in scope
            var labels = [], tmp, j, fn, focus, blur;
            if ('labels' in n && n.labels.length > 0) labels = n.labels; // if labels provided by browser use it
            else { // get labels from form, filter to ones we want
                tmp = n.form.getElementsByTagName('label');
                for (j = 0;j < tmp.length; ++j) {
                    if (tmp[j].htmlFor === fieldName) {
                        labels.push(tmp[j]);
                    }
                }
            }
            for (j = 0; j < labels.length; ++j) { // loop over each label
                (function (label) { // catch label in scope
                    fn = function () {
                        if (this.value === '') {
                            label.style.visibility = 'visible';
                        } else {
                            label.style.visibility = 'hidden';
                        }
                    };
                    focus = function () {
                        label.style.color = focusColor;
                    };
                    blur = function () {
                        label.style.color = blurColor;
                    };
                }(labels[j]));
                n.addEventListener('click', fn); // add to relevant listeners
                n.addEventListener('keydown', fn);
                n.addEventListener('keypress', fn);
                n.addEventListener('keyup', fn);
                n.addEventListener('focus', fn);
                n.addEventListener('focus', focus);
                n.addEventListener('blur', fn);
                n.addEventListener('blur', blur);
            }
        }(named[i]));
    }
};
placeholder("email"); // just pass the name attribute
placeholder("firstName");
placeholder("lastName"); 
```***

# c# - 如何以编程方式调用键盘按键？

> ID：15089513
> 
> 赞同：4
> 
> 时间：2013-02-26T12:48:00.613
> 
> 标签：c#, keyboard, overriding, capslock

**问题**：从一段 C# 代码调用要按下的键盘键，但这里有一个问题：按键不应仅限于进程/应用程序，而是由整个操作系统接收，当程序在背景和不同的形式/程序有重点

**目标**：制作一个锁定和的状态的`CapsLock`程序`NumLock`

**背景**：我有一台笔记本电脑，这两个键让我非常沮丧，我想制作一个在后台运行的应用程序，`CapsLock`一旦意外启用就会禁用，并且`NumLock`永远不会被禁用，我想要为了扩展我对编码的了解，我试图找到解决方案，但没有一个能解决（整个）问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:01:12.637

```
using System;
using System.Runtime.InteropServices;

public class CapsLockControl
{

    public const byte VK_NUMLOCK = 0x90;
    public const byte VK_CAPSLOCK = 0x14;

    [DllImport("user32.dll")]
        static extern void keybd_event(byte bVk, byte bScan, uint dwFlags,UIntPtr dwExtraInfo);
    const int KEYEVENTF_EXTENDEDKEY = 0x1;
    const int KEYEVENTF_KEYUP = 0x2;

    public static void Main()
    {
        if (Control.IsKeyLocked(Keys.CapsLock))
        {
            Console.WriteLine("Caps Lock key is ON.  We'll turn it off");
            keybd_event(CapsLockControl.VK_CAPSLOCK, 0x45, KEYEVENTF_EXTENDEDKEY, (UIntPtr) 0);
            keybd_event(CapsLockControl.VK_CAPSLOCK, 0x45, KEYEVENTF_EXTENDEDKEY | KEYEVENTF_KEYUP,
                (UIntPtr) 0);
        }
        else
        {
            Console.WriteLine("Caps Lock key is OFF");
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:52:51.063

您必须使用 user32.dll 连接键盘。此 codeProject[示例](http://www.codeproject.com/Articles/19004/A-Simple-C-Global-Low-Level-Keyboard-Hook)应该可以帮助您入门

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:54:08.613

如果您想完全禁用大写锁定，您可以使用

```
SetWindowsHookEx 
```

这里有很多关于如何使用它的信息。例如

[全局挂钩键盘记录问题](https://stackoverflow.com/questions/3540572/global-hook-keylogger-problem)

[不会禁用表单之外的用户输入的全局键盘挂钩](https://stackoverflow.com/questions/10567127/global-keyboard-hook-that-doesnt-disable-user-input-outside-of-form)

当然还有msdn

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:57:06.610

您可以尝试模拟键盘和鼠标点击的 CodePlex 项目。

它被称为 Windows 输入模拟器，可以在[这里找到](http://inputsimulator.codeplex.com/)

# disqus - Disqus Comment Using Login of my website

> ID：15089517
> 
> 赞同：6
> 
> 时间：2013-02-26T12:48:04.100
> 
> 标签：disqus

I am planning to use DISQUS comments in my portal.

It provides comments through FB,TWEETER, WOrdpress and DISQUS login I want my users to post comments also if they are logged in my website and not of all above.

Is it possible to do that?

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-29T01:15:38.373

You are looking for **Single-Sign On**:

[http://help.disqus.com/customer/portal/articles/236206-single-sign-on](http://help.disqus.com/customer/portal/articles/236206-single-sign-on)

It is an add-on only available with a Pro level subscription. The above article walks through the process in detail, complete with code examples in multiple languages.

It appears that you *cannot* remove the other sign-in options, see this SO thread:

[Disqus SSO integration on website](https://stackoverflow.com/questions/13951076/disqus-sso-integration-on-website)

# grid - Extjs4 how to remove duplicated rows from a grid?

> ID：15089520
> 
> 赞同：1
> 
> 时间：2013-02-26T12:48:10.490
> 
> 标签：grid, extjs4, filtering

`My_grid` contains many duplicated rows (same `name` and `username`, and with different hidden `id`). How to remove duplicated rows?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T12:56:04.520

您应该设置代理阅读器或模型上的**idProperty**。

```
var myStore = Ext.create('Ext.data.Store', {
    proxy: {
        type: 'ajax',
        url: '/myUrl',
        reader: {
            idProperty: 'Id'
        }
    },
    model: 'myModel'
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T20:14:02.567

这个片段希望对你有用：

用这个声明你的商店和网格很重要。例如`this.store = ...`

```
 //Listener on the button removes the duplicated rows
        this.button.on('click', function() {
            this.store.each(function(record) {
                //This is necessary because if this record was removed before
                if(record !== undefined) {
                    //Find all records which have the same name like this record
                    var records = record.store.query('name', record.get('name'));

                    //Remove all found records expect the first record 
                    records = records.each(function(item, index) {
                        //Don't delete the first record
                        if(index != 0) {
                            item.store.remove(item);    
                        }    
                    });    
                }
            }); 
        }, this); 
```

# c# - Sharepoint 2013 access with /_vti_bin/listdata.svc

> ID：15089521
> 
> 赞同：1
> 
> 时间：2013-02-26T12:48:12.470
> 
> 标签：c#, .net, wcf, rest, sharepoint

I'm really not experienced in this subject, and I can't seem to find out where to quite start.

I'm trying to read data from a list on SharePoint 13 (365 Preview) into a WinRT App. I added a Service Reference to mysite.sharepoint.com/_vti_bin/listdata.svc and it added correctly. From there I built this wrapper for getting the a list asynchronously:

```
private Task<IEnumerable<MyListItems>> GetMyListAsync()
{
    var tcs = new TaskCompletionSource<IEnumerable<MyListItems>>();
    var sharepointContext =
        new WelcomescreentestTeamSiteDataContext(
            new Uri("https://mysite.sharepoint.com/_vti_bin/listdata.svc"))
        {
            Credentials = new NetworkCredential("user.name", "pass.word", "mysite.onmicrosoft.com")
        }; ;
    try
    {
        sharepointContext.MyList.BeginExecute(asyncResult =>
        {
            try
            {
                var result = sharepointContext.MyList.EndExecute(asyncResult);
                tcs.TrySetResult(result);
            }
            catch (OperationCanceledException ex)
            {
                tcs.TrySetCanceled();
            }
            catch (Exception ex)
            {
                if (!tcs.TrySetException(ex))
                {
                    throw;
                }
            }
        }, new object());
    }
    catch (Exception ex)
    {
        tcs.TrySetException(ex);
        tcs.SetCanceled();
    }

    return tcs.Task;
} 
```

I've changed the username / domain around quite a bit, but nothing seems to work.

What's the right approach here?

I've built in a SAML-based security approach which works, but I'm still wondering why this isn't working.

# .net - 程序 (.NET) 如何判断它是否以其他用户身份运行？

> ID：15089535
> 
> 赞同：4
> 
> 时间：2013-02-26T12:48:41.897
> 
> 标签：.net, runas

有没有办法从我的 .NET 程序中检测它是作为桌面用户正常运行还是使用“作为不同用户运行”菜单选项/runas 命令作为不同用户运行？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:14:11.133

获取运行程序的用户更容易，您可以使用`Environment.UserName`或`System.Security.Principal.WindowsIdentity.GetCurrent().Name`。
它们之间的区别的链接位于下面...

现在，获取***登录用户***有点棘手。
我使用以下方法（我想我不久前在这里找到了它）。它所做的是检查谁是`explorer.exe`进程的所有者（即登录用户）：

```
private string GetExplorerUser()
{
    var query = new ObjectQuery(
        "SELECT * FROM Win32_Process WHERE Name = 'explorer.exe'");

    var explorerProcesses = new ManagementObjectSearcher(query).Get();

    foreach (ManagementObject mo in explorerProcesses)
    {
       String[] ownerInfo = new string[2];
       mo.InvokeMethod("GetOwner", (object[])ownerInfo);

       return String.Concat(ownerInfo[1], @"\", ownerInfo[0]);
    }

    return string.Empty;
} 
```

上面的方法需要`System.Managment`dll

**更新：** 上面的方法工作正常，基于 OP 的评论 - 添加了另一个选项：

从以下位置获取第一个用户名`Win32_ComputerSystem`：

```
 ManagementObjectSearcher searcher = new ManagementObjectSearcher("SELECT UserName FROM Win32_ComputerSystem");
 ManagementObjectCollection collection = searcher.Get();
 string username = (string)collection.Cast<ManagementBaseObject>().First()["UserName"]; 
```

# coffeescript - 加载半灰色瓷砖的传单地图

> ID：15089541
> 
> 赞同：15
> 
> 时间：2013-02-26T12:48:58.523
> 
> 标签：coffeescript, leaflet

我在 div 中有一张传单地图，我喜欢这样：

```
 <script src="http://cdn.leafletjs.com/leaflet-0.4/leaflet.js"></script>

  <!--[if lt IE 9]>
  <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
  <![endif]-->
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.css" />
  <!--[if lte IE 8]>
  <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.4/leaflet.ie.css" />
  <![endif]-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" /> 
```

然后我有一个这样的div：

一些加载地图的js：

```
map = L.map($attrs.id,
                         center: [40.094882122321145, -3.8232421874999996]
                         zoom: 5
      )
      L.tileLayer("http://{s}.tile.cloudmade.com/57cbb6ca8cac418dbb1a402586df4528/997/256/{z}/{x}/{y}.png",
                  maxZoom: 18
      ).addTo map 
```

然后在页面加载时，我有一些监控窗口高度和调整大小的 JS：

```
$("#map").height($(window).height())
$(window).resize(_.throttle(->
  $("#map").height($(window).height())
, 100
)) 
```

但是，当地图加载时，它会加载一半的灰色图块。当我调整地图大小时，加载正常但初始加载为 1/2 灰色

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-26T15:01:02.933

如果您没有理由使用 JS 来调整地图大小，那么使用 CSS 可能会更好：

```
html, body, #map {
   width: 100%;
   height: 100%;
} 
```

`map.invalidateSize()`但是，您可以在将地图插入 DOM（或调整地图大小）后尝试使用`$("#map").height($(window).height())`。

`invalidateSize()`调整窗口大小时默认调用，请参阅以下链接： [https://github.com/Leaflet/Leaflet/blob/master/src/map/Map.js#L609](https://github.com/Leaflet/Leaflet/blob/master/src/map/Map.js#L609)和[https://github.com/Leaflet /Leaflet/blob/master/src/map/Map.js#L616](https://github.com/Leaflet/Leaflet/blob/master/src/map/Map.js#L616)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-18T13:17:04.747

在对这个问题进行了长时间搜索之后，就我而言，我有一个全局 css 样式，它是：

```
<pre>
img {
    position: relative;
    display: block;
    max-width: 100%;
}
</pre> 
```

在我的情况下，问题是“位置：相对”，所以我添加了一行

```
<pre>
//Fix personnal bug leaflet
.leaflet-pane{
    img{
        position: absolute;
    }
}
</pre> 
```

# magento - 下订单前请求密码确认 - Magento

> ID：15089542
> 
> 赞同：0
> 
> 时间：2013-02-26T12:49:00.743
> 
> 标签：magento, magento-1.7

在我们的 Magento CE 1.7 商店中，我们允许“贸易”客户组中的客户下订单并按采购订单付款。

我们需要实施额外的安全层——当客户到达结账流程的订单审查步骤时，就在通过采购订单付款方式下订单之前，需要有一个提示要求他们的帐户登录密码（即使他们已登录）。他们需要正确输入他们的帐户密码才能下订单。

我知道这是一个相当困难的前景 - 有谁知道这是否相对可能，或者任何提供此功能的现有模块？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T16:02:17.257

您可能可以使用事件/观察者来做到这一点，但我这样做的方式是使用基本上重复采购订单的自定义付款方式

见/app/code/core/Mage/Payment/Model/Method/Purchaseorder.php

```
class Mage_Payment_Model_Method_Purchaseorder extends Mage_Payment_Model_Method_Abstract
{

    .....

    /**
     * Validate payment method information object
     *
     * @return Mage_Payment_Model_Abstract
     */
    public function validate()
    {
         $paymentInfo = $this->getInfoInstance();

         validate customer password there

         if($paymentInfo->getOrder()->getCustomerId()){

            //see login() in /app/code/core/Mage/Customer/Model/Session.php
            $customer = Mage::getModel('customer/customer')
                ->setWebsiteId(Mage::app()->getStore()->getWebsiteId());
            //May need to change to the order store id and not Mage::app()->getStore()->getWebsiteId()

            //get password enter on PO screen
            $password = $paymentInfo->getPassword()

            if ($customer->authenticate($paymentInfo->getOrder()->getCustomerEmail(), $password)) {
                return true;
            }
            return false;
         }
         else{
            //customer not login
            return false;
         }

         /**
          * to validate payment method is allowed for billing country or not
          */
         if ($paymentInfo instanceof Mage_Sales_Model_Order_Payment) {
             $billingCountry = $paymentInfo->getOrder()->getBillingAddress()->getCountryId();
         } else {
             $billingCountry = $paymentInfo->getQuote()->getBillingAddress()->getCountryId();
         }
         if (!$this->canUseForCountry($billingCountry)) {
             Mage::throwException(Mage::helper('payment')->__('Selected payment type is not allowed for billing country.'));
         }
         return $this;
    }

    /**
     * Assign data to info model instance
     *
     * @param   mixed $data
     * @return  Mage_Payment_Model_Method_Purchaseorder
     */
    public function assignData($data)
    {
        if (!($data instanceof Varien_Object)) {
            $data = new Varien_Object($data);
        }

        $this->getInfoInstance()->setPoNumber($data->getPoNumber());
        $this->getInfoInstance()->setPassword($data->getPassword());
        return $this;
    }

} 
```

看看@[如何创建支付方式](http://www.magentocommerce.com/wiki/5_-_modules_and_development/payment/create-payment-method-module)

# solr - 如何通过在索引时将数据拆分为多个字段来为分层方面创建 Solr 架构

> ID：15089549
> 
> 赞同：3
> 
> 时间：2013-02-26T12:49:12.580
> 
> 标签：solr, hierarchical-data, faceted-search

我想为我的应用程序实现 Solr 分层方面，其中 Category 和 SubCategory 之间有 2 级层次结构。我想使用[http://wiki.apache.org/solr/HierarchicalFaceting#Pivot_Facets](http://wiki.apache.org/solr/HierarchicalFaceting#Pivot_Facets)链接中提到的解决方案。

**展平后的数据如下：**

```
Doc#1: NonFic > Law
Doc#2: NonFic > Sci
Doc#3: NonFic > Sci > Phys 
```

并且该数据应在索引时为层次结构的每个级别拆分为一个单独的字段。与下面相同。

**索引词**

```
Doc#1: category_level0: NonFic; category_level1: Law
Doc#2: category_level0: NonFic; category_level1: Sci
Doc#3: category_level0: NonFic; category_level1: Sci, category_level2:Phys 
```

那么任何人都可以建议实现这一点的方法吗？我如何定义 Solr 模式来实现这一点？在索引时间，我找不到上述拆分数据的任何参考。

谢谢，

普里扬卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T16:43:47.283

您是否需要将这些单独的字段显示为返回文档的一部分？在这种情况下，您需要在字段的“存储”版本中使用这些拆分值。如果您只需要在搜索或分面期间拥有它们，您可以忽略“存储”表单并专注于“索引”表单。

无论哪种情况，如果您需要将一个字段拆分为多个字段，您可以使用 copyField 或 UpdateRequestProcessor 来实现。

使用 copyField，所有字段的“存储”表单都是相同的，但是您可以为每个字段使用不同的处理器，为“索引”部分选择层次结构的不同部分。

使用 UpdateRequestProcessor，您可以编写一个自定义的，它接受一个字段，然后吐出几个字段，每个字段只有它的一部分路径。您可以做一个自定义或做几个字段副本，然后在每个字段上使用不同的正则表达式处理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T17:35:26.067

要拆分数据，请使用[ScriptTransformer](http://wiki.apache.org/solr/DataImportHandler#ScriptTransformer)，它允许您在配置文件中使用 Javascript 转换数据。

将以下内容添加到与数据源和文档相同级别的**db-data-config中。**这定义了一个函数，该函数在分隔符 > 上的字段中拆分字符串，并为每个拆分值添加一个字段，称为 category_level0、category_level1、...

```
<script><![CDATA[
    function CategoryPieces(row) {
        var pieces = row.get('ColumnToSplit').split('>');
        for (var i=0; i < pieces.length; i++) {
            row.put('category_level' + i, pieces[i]);
        }
        return row;
    }
]]></script> 
```

然后在您的主`<entity>`标签中，添加`transformer="script:CategoryPieces"`并将列添加到您的字段列表中。

```
<field column="category_level0" name="Category_Level0" />
<field column="category_level1" name="Category_Level1" /> 
```

最后，在您的**schema.xml**中，添加新字段。

```
<field name="Category_Level0" type="string" indexed="true" stored="true" multiValued="false" />
<field name="Category_Level1" type="string" indexed="true" stored="true" multiValued="false" /> 
```

# php - 使用 AJAX 检查 Codeigniter 会话是否已过期

> ID：15089552
> 
> 赞同：2
> 
> 时间：2013-02-26T12:49:18.773
> 
> 标签：php, ajax, codeigniter, session, session-timeout

我正在创建一个帮助台系统，有时用户有两个多小时没有使用系统，然后在会话过期时返回，但最后加载的页面仍保留在屏幕上（例如表单）并且用户可以使用正常，但是当他提交表单时，他被重定向到登录页面（没关系），但是用户丢失了输入的数据。我想创建一个 AJAX 函数来检查会话是否已过期。该功能应使用`setTimeout()`or执行`setInterval()`。我尝试过使用，`"sess_expiration"`但似乎该值不会在页面加载时重置，即在指定时间结束后（默认为 7200）它会强制会话到期。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:58:08.357

你可以这样做

```
$.ajax({
type : 'POST',
url  : '<?php echo site_url('controllername/methodname')?>'
success : function(data){
    if(data){
       //session available
    }else{
       // expired
    } 
}); 
```

和控制器方法

```
 function methodname(){
        $user_id = $this->session->userdata('user_id');
       if($user_id){
             echo 1;
       }else{
             echo 0;
       }
 } 
```

您可以将 ajax 请求包装在函数中，并每次使用 TRUE 或 FALSE 返回结果。此外 setInterval 可以调用这个函数来检查会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-08T12:57:05.023

Codeigniter 会话类具有让我们知道会话到期的方法。

```
function your_method(){

     $this->session->sess_read() === false ? echo "0" : echo "1";

} 
```

# html - CSS 使文本框居中

> ID：15089556
> 
> 赞同：8
> 
> 时间：2013-02-26T12:49:24.623
> 
> 标签：html, css

这是注册框：

[http://technicaldebt.co.uk/fyp/register.php](http://technicaldebt.co.uk/fyp/register.php)

我试图让框居中在网页的中间。CSS附在下面。任何帮助将不胜感激。

```
/*********************************************************************************/
/* Basic                                                                         */
/*********************************************************************************/

*
{
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
}

body
{
    background: #1e1e1e  url(images/bg04.jpg) repeat;
    font-family: 'Open Sans', sans-serif;
    font-size: 11pt;
    color: #7f7f7f;
}

form
{
}

    form input,
    form select,
    form textarea
    {
        -webkit-appearance: none;
    }

br.clear
{
    clear: both;
}

p, ul, ol, dl, table
{
    margin-bottom: 1em;
}

p
{
    line-height: 1.7em;
}

a
{
    color: #779c5b;
}

    a:hover
    {
        text-decoration: none;
    }

section,
article
{
    margin-bottom: 3em;
}

section > :last-child,
article > :last-child
{
    margin-bottom: 0;
}

section:last-child,
article:last-child
{
    margin-bottom: 0;
}

.image
{
    display: inline-block;
}

    .image img
    {
        display: block;
        width: 100%;
    }

.image-full
{
    display: block;
    width: 100%;
}

.image-left
{
    float: left;
    margin: 0 2em 0 1em;
}

.image-border img
{
    border-radius: 5px;
}

ul.style1
{
}

    ul.style1 li
    {
        padding: 0.80em 0 0.75em 0;
        border-top: 1px solid #e0e0e0;
    }

    ul.style1 a
    {
        text-decoration: underline;
        color: #779c5b;
    }

        ul.style1 a:hover
        {
            text-decoration: none;
        }

    ul.style1 .image-left
    {
        margin-top: 0.50em;
        margin-right: 1.50em;
        margin-left: 0 !important;
    }

    ul.style1 .date
    {
        display: block;
        margin: 0;
        padding: 1em 0 0 0;
        line-height: 0;
        color: #047ab7;
    }

    ul.style1 .first
    {
        border-top: none;
    }

ul.style2
{
}

    ul.style2 li
    {
        overflow: hidden;
        padding: 1.75em 0 1.75em 0;
        border-top: 1px solid #e0e0e0;
    }

    ul.style2 p
    {
        margin: 0;
    }

    ul.style2 h3 {
        padding: 0 0 0.50em 0;
        font-size: 1.00em;
    }

    ul.style2 .image-left
    {
        margin-left: 0;
    }

    ul.style2 .first
    {
        border-top: none;
    }

ol.style1
{
    margin-left: 3em;
}

    ol.style1 li
    {
        padding: 0.35em 0;
        list-style: decimal;
    }

.button
{
    display: inline-block;
    margin-top: 1em;
    padding: 0.70em 1.5em;
    border-radius: 5px;
    background: #779c5b;
    line-height: 1;
    text-align: center;
    text-decoration: none;
    color: #FFFFFF;
    transition: background-color .25s ease-in-out;
    -moz-transition: background-color .25s ease-in-out;
    -webkit-transition: background-color .25s ease-in-out;
}

    .button:hover
    {
        background: #96b77c;
    }

.button-style1
{
    background: #222222;
}

    .button-style1:hover
    {
        background: #2d2d2d;
    }

.button-style2
{
    margin-top: 0.50em;
    padding: 1.75em 3.00em;
    box-shadow: 5px 0 5px -5px rgba(0, 0, 0, 0.4), 0 6px 5px -5px rgba(0, 0, 0, 0.4), -5px 0 5px -5px rgba(0, 0, 0, 0.4);
    line-height: 0.25em;
}
    .button-style2:hover
    {
        background: #96b77c;
    }

/* Assign these to ARTICLE tags */

.box
{
    padding: 2.50em 2.50em;
    background: #FFFFFF;
    border: 1px solid #e0e0e0;
    border-radius: 5px;
}

    .box h2
    {
        padding: 0 0 0.40em 0;
        letter-spacing: -0.03em;
        font-size: 1.60em;
        color: #0f0f0f;
    }

    .box .subtitle
    {
        padding: 0 0 0.30em 0;
        font-size: 1.10em;
        color: #5f6b8b;
    }

.box-post
{
}

.box-featured-post
{
}

/* Assign these to SECTION tags */

.box-news
{
}

.box-tweets
{
}

.box-contact
{
}

/*********************************************************************************/
/* Wrappers                                                                      */
/*********************************************************************************/

#wrapper
{
    overflow: hidden;
    background: url(images/bg01.jpg) repeat;
}

#wrapper-gradient
{
}

#header-wrapper
{
    overflow: hidden;

    background: url(images/gradient.svg);

    background: -moz-linear-gradient(
            center bottom,
            rgba(0,0,0,0) 5%,
            rgba(0,0,0,0.5) 100%
        );

    background: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.0, rgba(0,0,0,0.0)),
        color-stop(1.0, rgba(0,0,0,0.5))
    );
}

#banner-wrapper
{
    overflow: hidden;
}

#feature-wrapper
{
    overflow: hidden;
    padding: 3em 0em;
    background: #5f6b8b url(images/shadow02.png) no-repeat center top;
    box-shadow: 0px 10px 5px rgba(0,0,0,.3), 0px -1px 25px rgba(0,0,0,.3);
    color: #dfe2e8;
}

#main-wrapper
{
    overflow: hidden;
    padding: 3em 0em 4em 0em;
    background: #f3f3f3 url(images/bg03.jpg) repeat;
    box-shadow: 0px 10px 5px rgba(0,0,0,.3), 0px -1px 25px rgba(0,0,0,.3);
}

#footer-wrapper
{
}

#copyright-wrapper
{

    background: url(images/gradient.svg);

    background:
        -moz-linear-gradient(
            center bottom,
            rgba(0,0,0,0) 5%,
            rgba(0,0,0,0.5) 70%
        );

    background: -webkit-gradient(
        linear,
        left bottom,
        left top,
        color-stop(0.0, rgba(0,0,0,0.0)),
        color-stop(0.70, rgba(0,0,0,0.5))
    );      

}

/*********************************************************************************/
/* Feature                                                                       */
/*********************************************************************************/

#feature-content
{
}

#feature-content h2
{
    height: 3.50em;
    margin: 0 0 1em 0;
    padding: 0 0 0 3.50em;
    background: url(images/arrow01.png) no-repeat 0.75em 50%;
    border-bottom: 1px solid #949db3;
    letter-spacing: -0.02em;
    font-size: 1.50em;
    color: #FFFFFF;
}

#feature-content span
{
    display: inline-block;
    height: 3.50em;
    padding: 0 0 0 1em;
    border-left: 1px solid #949db3;
    line-height: 3.5em;
}

/*********************************************************************************/
/* Banner                                                                        */
/*********************************************************************************/

#banner
{
    overflow: hidden;
}

#banner h2
{
    display: inline-block;
    font-weight: 700;
    color: #FFFFFF;
}

#banner .subtitle
{
    font-weight: 300;
    color: #ababab;
}

/*********************************************************************************/
/* Content                                                                       */
/*********************************************************************************/

#content
{
}

    #content article
    {
    }

    #content .image-left
    {
        margin-left: 0;
    }

/*********************************************************************************/
/* Sidebar                                                                       */
/*********************************************************************************/

#sidebar
{
}

/*********************************************************************************/
/* Two Column                                                                    */
/*********************************************************************************/

#two-column
{
}

    #two-column .tbox
    {
    }

        #two-column .tbox .image-full
        {
            padding-bottom: 2em;
        }

/*
Registration/Login Form by html-form-guide.com
You can customize all the aspects of the form in this style sheet
*/

#fg_membersite fieldset
{
width: 230px;
padding:20px;
border:1px solid #ccc;
-moz-border-radius: 10px;
-webkit-border-radius: 10px;
-khtml-border-radius: 10px;
border-radius: 10px;   
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T13:02:04.030

要使 div 居中，`margin: 0 auto;`建议的 div 必须包含有效宽度。

如果你添加

```
#register{
 //...
 width: 300px;
 margin: 0 auto;
} 
```

这将使您的 div 水平居中。您也可以`text-align: center`在父`display: inline-block`表单中使用 div。如：

```
#fg_membersite{
 text-align:center;
}

#register{
 display:inline-block;
} 
```

如果您还想将其垂直居中，我建议您使用`display:table`（在 aprent div 上）和`display:table-cell`（在 wrapper div 中）和`vertical-align:middle` options ，或者可能是`position:absolute`负边距的 a ，这是您的选择。

干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:52:34.407

尝试添加以下css

```
#register
{
 margin:0px auto;
} 
```

这将使`form`容器居中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T12:53:24.397

在你的身体标签中，你可以包括

> 边距：0 自动；

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:55:26.197

试试这个：

```
#fg_membersite fieldset {
    left: 50%;
    top: 50%;
    width: 230px;
    margin-top: -125px: /* height/2 */
    margin-left: -115px; /* width/2 */
    position: absolute;
} 
```

# erlang - 我可以为给定的 Erlang 节点设置多个 cookie 吗？

> ID：15089558
> 
> 赞同：2
> 
> 时间：2013-02-26T12:49:28.683
> 
> 标签：erlang

据我了解，如果您有两个不同的 erlang 集群，每个集群都使用不同的 Erlang *cookie*，则属于第一个集群的节点将无法与属于第二个集群的节点通信。

Erlang 是否提供了一种机制来允许给定节点使用**多个魔术 cookie？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:45:42.340

正如[这里](http://www.erlang.org/doc/reference_manual/distributed.html)所解释的以及@legoscia 在评论中提到的那样：

> 对于`Node1`具有魔术 cookie的节点`Cookie`能够连接到或接受来自`Node2`具有不同 cookie的另一个节点的连接`DiffCookie`，该函数`erlang:set_cookie(Node2, DiffCookie)`必须首先在 at 调用`Node1`。

请注意，Erlang 节点之间的连接默认是*传递*的，这意味着您很快就会得到一个完全连接的 Erlang 节点集群，这会严重影响通信性能。基于“节点组”概念的另一种方法[正在研究](http://www.release-project.eu/documents/ifl12.pdf)中。

# sql-server - 如何使一个表依赖于 SQL Server 中的另一个表？

> ID：15089559
> 
> 赞同：0
> 
> 时间：2013-02-26T12:49:33.603
> 
> 标签：sql-server, entity-framework

我在 SQL Server 中创建了以下表：

```
CREATE TABLE [dbo].[Application] (
    [Id]   INT            IDENTITY (1, 1) NOT NULL,
    [Name] NVARCHAR (MAX) NULL,
    CONSTRAINT [PK_dbo.Application] PRIMARY KEY CLUSTERED ([Id] ASC)
);

CREATE TABLE [dbo].[Account] (
    [Id]   INT            IDENTITY (1, 1) NOT NULL,
    [Name] NVARCHAR (MAX) NULL,
    CONSTRAINT [PK_dbo.Account] PRIMARY KEY CLUSTERED ([Id] ASC)
); 
```

有没有办法可以更改这些，以便在应用程序表中存在指向帐户表的链接。如果有该应用程序的帐户，则无法删除该应用程序条目的链接？抱歉，如果这是一个基本问题，但我只知道如何使用设计器，我不确定如何在 SQL 中编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T12:51:41.317

在两个表之间添加外键关系。在您的情况下，您可能希望将另一个 int 类型列添加到名为 Application_Id 的 Account 表中。然后在Application表上添加Application_Id和Id的外来关系。我还建议可能将 Application 表上的 Id 更改为 Application_Id

```
CREATE TABLE [dbo].[Application] (
    [Application_Id]   INT            IDENTITY (1, 1) NOT NULL,
    [Name] NVARCHAR (MAX) NULL,
    CONSTRAINT [PK_dbo.Application] PRIMARY KEY CLUSTERED ([Application_Id] ASC)
);

CREATE TABLE [dbo].[Account] (
    [Id]   INT            IDENTITY (1, 1) NOT NULL,
    [Application_Id] INT,
    [Name] NVARCHAR (MAX) NULL,
    CONSTRAINT [PK_dbo.Account] PRIMARY KEY CLUSTERED ([Id] ASC),
    CONSTRAINT fk_AccountApps FOREIGN KEY (Application_Id)
    REFERENCES Application(Application_Id)
); 
```

[SQL小提琴](http://sqlfiddle.com/#!6/c4917)

[W3 学校外键](http://sqlfiddle.com/#!6/c4917)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:06:35.673

您的问题可以使用外键概念来解决。

[http://en.wikipedia.org/wiki/Foreign_key](http://en.wikipedia.org/wiki/Foreign_key)

# sql - SQL语句翻译

> ID：15089566
> 
> 赞同：1
> 
> 时间：2013-02-26T12:50:09.033
> 
> 标签：sql, oracle

我是 SQL 新手，这是我第一次尝试将这种语句转换为 SQL。

> 找到经常光顾所有供应约翰史密斯喜欢的啤酒的酒吧的饮酒者

我有以下三个表格来回答它：

```
FREQUENTS(DRINKER, BAR) 
SERVES(BAR, BEER) 
LIKES(DRINKER, BEER) 
```

这是我不成功的方法：

```
SELECT DISTINCT F1.DRINKER
FROM FREQUENTS F1
WHERE F1.DRINKER<>'John Smith'
AND   F1.DRINKER NOT IN(SELECT F2.DRINKER
                        FROM FREQUENTS F2
                    WHERE F2.BAR NOT IN (SELECT S.BAR 
                                        FROM SERVES S, LIKES L
                                        WHERE L.DRINKER='John Smith'
                                        AND S.BEER=L.BEER
                                        AND L.DRINKER=F2.DRINKER)) 
```

谁能帮我弄清楚如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:56:31.930

试试这个查询

```
SELECT DISTINCT F1.DRINKER
FROM FREQUENTS F1 
WHERE F1.BAR IN (SELECT S.BAR FROM SERVES S, LIKES L
                                    WHERE L.DRINKER='John Smith'
                                    AND S.BEER=L.BEER) 
```

我已删除您创建的额外子查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:43:57.083

好，我知道了。它不是很优雅，如果在执行此代码期间数据得到更新，那么这可能不起作用，但在这里

```
DECLARE @bars TABLE (bar nvarchar(max))
DECLARE @drinkers TABLE (drinker nvarchar(max))
DECLARE @drinkerCounts TABLE (count int, drinker nvarchar(max))
DECLARE @barCount int

insert into @bars
select distinct bar from serves where beer in
(select beer from likes where drinker = 'John Smith')

select @barCount = COUNT(*) from @bars

insert into @drinkers
select drinker from frequents f
inner join @bars b on f.bar = b.bar
where drinker <> 'John Smith'

insert into @drinkerCounts
select count(drinker), drinker
from @drinkers
group by drinker

select * from @drinkerCounts dc
where dc.Count = @barCount 
```

# php - 教义：如何添加带有可选参数的自定义函数？

> ID：15089572
> 
> 赞同：7
> 
> 时间：2013-02-26T12:50:18.737
> 
> 标签：php, symfony, doctrine-orm

按照官方的解释，我想创建我的自定义 MySQL 函数 ROUND() 可以采用（非强制性）另一个第二个参数。

到目前为止，我已经这样做了：

```
<?php
namespace HQF\Bundle\PizzasBundle\DQL;

use \Doctrine\ORM\Query\AST\Functions\FunctionNode;
use \Doctrine\ORM\Query\Lexer;

class MysqlRound extends FunctionNode
{
    public $simpleArithmeticExpression;

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        return 'ROUND(' . $sqlWalker->walkSimpleArithmeticExpression(
            $this->simpleArithmeticExpression
        ) . ')';
    }

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $lexer = $parser->getLexer();

        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);

        $this->simpleArithmeticExpression = $parser->SimpleArithmeticExpression();

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }
} 
```

`ROUND(XX)`但是如何实现可以，也可以的事实`ROUND(XX, YY)`呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T12:55:12.170

您需要声明第二个参数，并使用`Lexer`如下：

```
namespace HQF\Bundle\PizzasBundle\DQL;

use \Doctrine\ORM\Query\AST\Functions\FunctionNode;
use \Doctrine\ORM\Query\Lexer;

class MysqlRound extends FunctionNode
{
    private $firstExpression = null;
    private $secondExpression = null;

    public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $lexer = $parser->getLexer();
        $parser->match(Lexer::T_IDENTIFIER);
        $parser->match(Lexer::T_OPEN_PARENTHESIS);
        $this->firstExpression = $parser->ArithmeticPrimary();

        // parse second parameter if available
        if(Lexer::T_COMMA === $lexer->lookahead['type']){
            $parser->match(Lexer::T_COMMA);
            $this->secondExpression = $parser->ArithmeticPrimary();
        }

        $parser->match(Lexer::T_CLOSE_PARENTHESIS);
    }

    public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
    {
        // use second parameter if parsed
        if (null !== $this->secondExpression){
            return 'ROUND(' 
                . $this->firstExpression->dispatch($sqlWalker)
                . ', '
                . $this->secondExpression->dispatch($sqlWalker)
                . ')';
        }

        return 'ROUND(' . $this->firstExpression->dispatch($sqlWalker) . ')';
    }
} 
```

## 编辑

许多 Doctrine2 扩展已经写[在这里](https://github.com/beberlei/DoctrineExtensions/tree/master/lib/DoctrineExtensions/Query/Mysql)。感谢@beberlei 的出色工作。许多功能可用（`IFELSE`, `IFNULL`, `NULLIF`, `COS`, `ACOS`, 等...）但并非所有功能（`ROUND`,`GREATEST`或`LEAST`缺失，但如果需要，您仍然可以自己编写它们。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-22T19:29:43.500

我还在`GREATEST`这里找到了实现[https://raw.githubusercontent.com/rodgermd/mura-show.com/master/src/Rodger/GalleryBundle/DoctrineExtension/Greatest.php](https://raw.githubusercontent.com/rodgermd/mura-show.com/master/src/Rodger/GalleryBundle/DoctrineExtension/Greatest.php) (c) rodgermd@github：

```
namespace Rodger\GalleryBundle\DoctrineExtension;

use Doctrine\ORM\Query\Lexer,
    Doctrine\ORM\Query\AST\Functions;

class Greatest extends Functions\FunctionNode {

  protected $firstExpression, $secondExpression;

  public function getSql(\Doctrine\ORM\Query\SqlWalker $sqlWalker)
  {
    return sprintf("GREATEST(%s, %s)", 
            $this->firstExpression->dispatch($sqlWalker), 
            $this->secondExpression->dispatch($sqlWalker));
  }

  public function parse(\Doctrine\ORM\Query\Parser $parser)
    {
        $parser->match(Lexer::T_IDENTIFIER); // (2)
        $parser->match(Lexer::T_OPEN_PARENTHESIS); // (3)
        $this->firstExpression = $parser->ArithmeticPrimary(); // (4)
        $parser->match(Lexer::T_COMMA); // (5)
        $this->secondExpression = $parser->ArithmeticPrimary(); // (6)
        $parser->match(Lexer::T_CLOSE_PARENTHESIS); // (3)
    }
} 
```

# php - Sql Query：2个表，但从一个表中查找所有信息，并且从另一个表中仅查找一行

> ID：15089578
> 
> 赞同：0
> 
> 时间：2013-02-26T12:50:42.937
> 
> 标签：php, mysql, sql

我有 2 张桌子

*   照片：存储所有照片信息
*   图库：存储有关图库的标题和描述

    * * *

我需要回显到新页面画廊描述，然后是所有应该在那里的照片。

但我不断重复标题和描述，因为它是相同的

```
$row = mysql_fetch_array($result)... 
```

那么我还需要那个画廊中的一组照片吗？

任何人都可以帮助或者我是否含糊不清....

```
$a="SELECT * from gallery where gallery_category=".$gallery_category;
$result = mysql_query($a,$c);
while($row = mysql_fetch_array($result)) {
    echo $row['gallery_name'].'<br>'.$row['gallery_description'].'<br>';
    $sql="SELECT * FROM photos WHERE gallery_id =".$gallery_id." ORDER BY photos_filename";
    $result2 = mysql_query($sql,$c);
    while($row = mysql_fetch_array($result2)) {
        echo'<a rel="example_group" href="../galleries/images/'.$row['gallery_id'].'/'.$row['photos_filename'].'" width="130" height="100"><img src="../galleries/images/'.$row['gallery_id'].'/'.$row['photos_filename'].'" height="150px" alt=""/></a>';
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:02:59.497

实际上我会把它贴在这里，所以我可以使用一些代码格式。

**选项 1 - 循环内循环**

```
$headerquery = $db->query("SELECT * FROM tbl1");
while ($headers= $db->fetchNextObject($headerquery )) {
   echo "<table><tr><th>".$headers->GalleryName."</th></tr>"; // open table create header
       $detailquery = $db->query("SELECT * FROM tbl2 WHERE GalleryID=".$headers->ID);
       while ($details= $db->fetchNextObject($detailquery )) {
          echo "<tr><td>".$details->Photo."</td></tr>"; //loop through 2nd table and spit out photos
       }
   echo "</table>"; //close table
} 
```

**选项 2 - 使用选择器连接查询**

```
$galleryheaderid = 0;
$query = $db->query("SELECT * FROM tbl1 INNER JOIN tbl2 on tbl1.ID=tbl2.GalleryID");
while ($details = $db->fetchNextObject($query )) {
   echo "<table>";
   if ($galleryheaderid!=$details->ID) { //spit out header row if id's don't match
       echo "<tr><th>".$details ->GalleryName."</th></tr>"; //create header
       $galleryheaderid = $details->ID;  //set header id to gallery id so we don't show header a 2nd time
   } 
   echo "<tr><td>".$details->Photo."</td></tr>"; //spit out gallery information even on first row since all rows include photo information

   echo "</table>"; //close table
} 
```

显然，这些中的任何一个都应该起作用，他们需要正确完成

# paypal - IPN / PDT PAYPAL 头痛

> ID：15089584
> 
> 赞同：0
> 
> 时间：2013-02-26T12:50:54.390
> 
> 标签：paypal, paypal-ipn, paypal-sandbox, eclipse-pdt, receipt

更新！

我设法使用 PDT 获得动态收据，此处为屏幕截图：[http](http://pastebin.com/4RcTdHKd) ://pastebin.com/4RcTdHKd，它是从我的 pdt.php 此处生成的：http: [//pastebin.com/4RcTdHKd](http://pastebin.com/4RcTdHKd)

现在的问题是如何操纵变量 tx 来获得所需的内容，例如动态显示/或不显示可下载音频/视频内容的事务 ID？

在这个 .php 上拥有所有（有那么多文件）可下载文件是一个好主意，但是作为输入 type=hidden 并且只有一些条件或 IF 语句来检查产品 id = 可下载的隐藏 id 吗？

我得到了一些使用以下代码访问但尚未解决的提示： $tx_token = $_GET['tx'];

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:00:28.487

首先，IPN和PDT是两个完全不同的系统。PDT 更多地用于退货页面，以创建动态收据。IPN 更多地用于更新您的购物车、数据库或系统。你确实知道你的 IPN 和 PDT 脚本是同一个页面，因为这可能会导致一些问题。您将需要一个独立于 PDT 脚本的 IPN 脚本。

至于获取交易ID，你可以使用类似这样的东西：

$tx_token = $_GET['tx'];

然后你可以在页面上回显响应。[您可以在https://www.x.com/developers/PayPal/documentation-tools/code-sample/216627](https://www.x.com/developers/PayPal/documentation-tools/code-sample/216627)找到 PDT PHP 脚本的示例，这可能会更好地帮助您，或者为您提供一个可以构建的工作示例。您可以通过几种不同的方式将其合并到您的 wordpress 网站中，所有这些都取决于您当前的设置以及最适合您的选项。一些商家使用插件并将代码与他们的插件一起使用，而其他商家则使用 iframe 并将 PDT 脚本包含在 iframe 中。

希望这可以帮助。:)

# android - 如何修复json请求中的错误？

> ID：15089585
> 
> 赞同：0
> 
> 时间：2013-02-26T12:50:57.420
> 
> 标签：android, json, request

我需要发送请求，但是在 `url = "http://some-site.com/api/?photos.getPhotosByCategory={"id":"1","limitOne":"3","limitTwo":"3"}";` 我得到 `Syntax error on tokens, delete these tokens`的字符串上，问题出在引号中……请告诉我，我该如何解决？

```
 url = "http://some-site.com/api/?photos.getPhotosByCategory={"id":"1","limitOne":"3","limitTwo":"3"}";
    new Thread(new Runnable() { 
        public void run(){

            HttpParams myParams = new BasicHttpParams();
            HttpConnectionParams.setConnectionTimeout(myParams, 10000);
            HttpConnectionParams.setSoTimeout(myParams, 10000);
            HttpClient httpclient = new DefaultHttpClient();

            String json=obj.toString();

            try {

                httppost = new HttpPost(url.toString());
                httppost.setHeader("Content-type", "application/json");

                StringEntity se = new StringEntity(obj.toString()); 
                se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
                httppost.setEntity(se); 

                HttpResponse response = httpclient.execute(httppost);
                String temp = EntityUtils.toString(response.getEntity());
                Log.i("tag", temp);

            } catch (ClientProtocolException e) {

            } catch (IOException e) {
            }

                        tw = (TextView)findViewById(R.id.textView1);

                        tw.setText( response.toString());

            tw.post(new Runnable() {
                public void run() {
                    tw = (TextView)findViewById(R.id.textView1);
                    tw.setText( response.toString());
                }
            });

        }
}).start();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T12:54:31.563

好吧，只需将您的 " 替换为 \" ：

```
url = "http://some-site.com/api/?photos.getPhotosByCategory={\"id\":\"1\",\"limitOne\":\"3\",\"limitTwo\":\"3\"}"; 
```

你可以自己想出这个...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:59:35.547

逃避你的报价。试试下面的代码

```
String url = "http://some-site.com/api/?photos.getPhotosByCategory={\"id\":\"1\",\"limitOne\":\"3\",\"limitTwo\":\"3\"}"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T15:32:50.100

如果字符串有问题

```
url = "http://some-site.com/api/?photos.getPhotosByCategory=`{"id":"1","limitOne":"3","limitTwo":"3"}";` 
```

换到

```
url = "http://some-site.com/api/?photos.getPhotosByCategory={\"id\":\"1\",\"limitOne\":\"3\",\"limitTwo\":\"3\"}"; 
```

如果您在服务器上发送此 JSON 时遇到问题，请使用 unicode

```
http://some-site.com/api/?photos.getPhotosByCategory=%7B%22id%22%3A%221%22%2C%22limitOne%22%3A%223%22%2C%22limitTwo%22%3A%223%22%7D 
```

# android - 在 android v2 应用程序中显示谷歌地图在打开活动时崩溃，膨胀异常二进制文件编号 #2

> ID：15089590
> 
> 赞同：1
> 
> 时间：2013-02-26T12:51:05.393
> 
> 标签：android, google-maps-android-api-2

我正在尝试打开谷歌地图以显示一些位置。我正在关注[http://mobisys.in/blog/2012/12/google-rolls-out-android-maps-api-v2/](http://mobisys.in/blog/2012/12/google-rolls-out-android-maps-api-v2/)链接，但它没有打开映射它的崩溃并说膨胀异常二进制文件编号# 2，我检查了清单元数据很好，片段区分大小写，键是正确的，这是我的堆栈跟踪：

```
 02-26 18:15:25.648: I/System.out(5029): img button cust.>> 02-26
 18:15:25.718: D/AndroidRuntime(5029): Shutting down VM 02-26
 18:15:25.718: W/dalvikvm(5029): threadid=1: thread exiting with
 uncaught exception (group=0x40a191f8) 02-26 18:15:25.758:
 E/AndroidRuntime(5029): FATAL EXCEPTION: main 02-26 18:15:25.758:
 E/AndroidRuntime(5029): java.lang.RuntimeException: Unable to start
activity
 ComponentInfo{com.intertec.iforce/com.intertec.iforce.MapActivity}:
 android.view.InflateException: Binary XML file line #2: Error
 inflating class fragment 02-26 18:15:25.758: E/AndroidRuntime(5029):
    at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 android.app.ActivityThread.access$600(ActivityThread.java:123) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 android.os.Handler.dispatchMessage(Handler.java:99) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.os.Looper.loop(Looper.java:137) 02-26 18:15:25.758:
 E/AndroidRuntime(5029):    at
 android.app.ActivityThread.main(ActivityThread.java:4424) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 java.lang.reflect.Method.invokeNative(Native Method) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 java.lang.reflect.Method.invoke(Method.java:511) 02-26 18:15:25.758:
 E/AndroidRuntime(5029):    at
 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 dalvik.system.NativeStart.main(Native Method) 02-26 18:15:25.758:
 E/AndroidRuntime(5029): Caused by: android.view.InflateException:
 Binary XML file line #2: Error inflating class fragment 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:697)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 android.view.LayoutInflater.inflate(LayoutInflater.java:466) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.view.LayoutInflater.inflate(LayoutInflater.java:396) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.view.LayoutInflater.inflate(LayoutInflater.java:352) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:251)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 android.app.Activity.setContentView(Activity.java:1862) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 com.intertec.iforce.MapActivity.onCreate(MapActivity.java:23) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.app.Activity.performCreate(Activity.java:4492) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    ... 11 more 02-26
 18:15:25.758: E/AndroidRuntime(5029): Caused by:
 android.support.v4.app.Fragment$InstantiationException: Unable to
 instantiate fragment com.google.android.gms.maps.SupportMapFragment:
 make sure class name exists, is public, and has an empty constructor
 that is public 02-26 18:15:25.758: E/AndroidRuntime(5029):     at
 android.support.v4.app.Fragment.instantiate(Fragment.java:401) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.support.v4.app.Fragment.instantiate(Fragment.java:369) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:272)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    ... 20 more 02-26
 18:15:25.758: E/AndroidRuntime(5029): Caused by:
 java.lang.ClassNotFoundException:
 com.google.android.gms.maps.SupportMapFragment 02-26 18:15:25.758:
 E/AndroidRuntime(5029):    at
 dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
 02-26 18:15:25.758: E/AndroidRuntime(5029):    at
 java.lang.ClassLoader.loadClass(ClassLoader.java:501) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 java.lang.ClassLoader.loadClass(ClassLoader.java:461) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  at
 android.support.v4.app.Fragment.instantiate(Fragment.java:391) 02-26
 18:15:25.758: E/AndroidRuntime(5029):  ... 23 more 02-26 18:15:25.838:
 D/dalvikvm(5029): GC_CONCURRENT freed 326K, 20% free 6795K/8391K,
 paused 2ms+2ms 02-26 18:20:25.808: I/Process(5029): Sending signal.
 PID: 5029 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:58:57.323

看起来您错过了从`\extras\google\google_play_services\libproject\google-play-services_lib`.

将其添加`library`到您当前的项目中。

确保您已使用`SupportMapFragment`11 岁以下的 API。

```
?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
       android:name="com.google.android.gms.maps.SupportMapFragment"
       android:layout_width="wrap_content"
       android:layout_height="match_parent" /> 
```

# delphi - 处理 TDBGrid 特定行上的右箭头

> ID：15089591
> 
> 赞同：1
> 
> 时间：2013-02-26T12:51:13.157
> 
> 标签：delphi

我有一个 TDBGrid 并且数据绑定到它

```
myGrid : TDBGrid; 
```

现在我想选择该网格的一行并按右箭头，它应该捕获该行的特定单元格并显示。考虑遵循网格

```
ID  Item
1   A
2   B
3   C
3   D 
```

现在，如果我选择 ID=2 的行，然后按向右箭头，则应调用一个函数，该函数具有语句“Showmessage(Item)”

我必须为此触发哪个事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:42:26.640

这很容易完成，但问题是这样做是否是个好主意

```
procedure TForm1.DBGrid1KeyDown(Sender: TObject; var Key: Word; Shift: TShiftState);
begin
  if Key = VK_Right then
       begin
         Showmessage(TDBGrid(sender).DataSource.DataSet.FieldByName('NAme').asString);
         Key := 0; // might or might not be wished
       end;
end; 
```

# jquery - 如何在 HTML 表格的最后一行的底部留下一个空格

> ID：15089592
> 
> 赞同：1
> 
> 时间：2013-02-26T12:51:15.273
> 
> 标签：jquery, html, html-table, scrollbar

我有一个动态填充 Javascript/jQuery 函数的 HTML 表。有时表格包含 0 或 1 行，有时 800 行。

每行的高度为 15px。即使没有足够的行来填充表格，表格的高度也必须始终为 800 像素。我发现保持每行相同高度的唯一方法是在最后一行之后附加空行。我不喜欢这个解决方案，因为它使表格变得很长，并且右侧出现了一个无用的滚动条。

我正在为我的表格使用这个插件：http: [//www.farinspace.com/jquery-scrollable-table-plugin/](http://www.farinspace.com/jquery-scrollable-table-plugin/) 如果有 800 行它使表格可滚动，它可以帮助我将表格高度强制为 800px。

如果我的表只包含一行，是否有解决方案不附加 50 个空行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:04:20.807

我建议在文档 reready 函数中找到表中的行数并动态地将 css 高度道具添加到表中。

检查此演示代码：

```
$(document).ready(function(){

  var numOfRows = $("#myTable > tbody > tr").length ;

  var eachLine = 15 ;

  var heightofTable = numOfRows * 15 ;

  $('#tableID').css('height',''+heightofTable +'px');

}); 
```

我认为这可行。

# java - 在 Java 中嵌入 Groovy（绑定）

> ID：15089593
> 
> 赞同：2
> 
> 时间：2013-02-26T12:51:15.950
> 
> 标签：java, binding, groovy, embedding

我尝试将变量绑定到 Groovy 并从 Groovy 返回 zu Java：

Java代码：

```
Binding binding = new Binding();
binding.setVariable("SRESULT", "foo");
GroovyShell gs = new GroovyShell(binding);
gs.evaluate(script);
String sResult = (String) gs.getContext().getVariable("SRESULT");
System.out.println("FROM GROOVY: " + sResult); 
```

常规代码：

```
class Est {  
  static SRESULT
  public static void main(String[] args) {
    println 'From Java: '+SRESULT
    SRESULT = 'bar'
  }
} 
```

输出：

```
From Java: foo
FROM GROOVY: foo 
```

我的问题：我想`SRESULT`在 Groovy 中进行更改并访问 Java 中的值。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T14:42:56.330

绑定仅适用于*脚本*，不适用于*类*。如果您的 Groovy 代码是一个脚本，即只是`main`方法的内容，没有周围的类主体

```
println 'From Java: '+SRESULT
SRESULT = 'bar' 
```

那么它会产生你期望的结果。特别是你不能在脚本中*声明*`SRESULT`变量，即

```
def SRESULT = 'bar' 
```

*行不通*。_ 这是因为声明（带有`def`或带有显式类型）在脚本中创建局部变量，它们不会分配给绑定。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T13:52:33.557

鉴于`Test.java`包含：

```
import groovy.lang.Binding ;
import groovy.lang.GroovyShell ;
import java.io.File ;

public class Test {
    public static void main( String[] args ) throws Exception {
        Binding binding = new Binding() ;
        binding.setVariable( "SRESULT", "foo" ) ;

        GroovyShell gs = new GroovyShell( binding ) ;
        gs.evaluate( new File( "script.groovy" ) ) ;

        String sResult = (String)binding.getVariable( "SRESULT" ) ;
        System.out.printf( "FROM GROOVY: %s\n", sResult ) ;
    }
} 
```

并`script.groovy`包含：

```
println "From Java: $SRESULT"
SRESULT = 'bar' 
```

我们可以这样编译`Test.java`：

```
javac -cp $GROOVY_HOME/embeddable/groovy-all-2.1.1.jar:. Test.java 
```

然后运行它：

```
java -cp $GROOVY_HOME/embeddable/groovy-all-2.1.1.jar:. Test 
```

给出输出：

```
From Java: foo
FROM GROOVY: bar 
```

# jquery - 回调函数问题 jquery

> ID：15089599
> 
> 赞同：0
> 
> 时间：2013-02-26T12:51:31.447
> 
> 标签：jquery, if-statement, callback

我对回调函数中的 if 有疑问，我不明白为什么。

单击 div 后，文本会按我的意愿更改，但在第一次拍摄后它不再起作用。

我的代码是：

```
<div id="2">message</div>
<div id="1">dfdfgdfgrr</div>

<script src="jquery.js"></script>
<script>
$(function () {

$('#2').toggle();

function test() {
    $(document).on('click', '#1', function () {
        $('#2').toggle(300, function() {
            if($('#1').text('show')){
                $('#1').text('hide');
            }else{
                $('#1').text('show');
            }
        });
   });
}

test();

});
</script> 
```

[http://jsfiddle.net/manguo_manguo/cydjY/](http://jsfiddle.net/manguo_manguo/cydjY/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:05:24.740

其他解决方案是正确的，但第一次没有显示**显示**标签。

这是一个完整的解决方案：

```
$(function () {

$('#2').toggle();

function test() {
    $(document).on('click', '#1', function () {
        $('#2').toggle(300, function() {
            if($('#1').text() == 'hide'){
                $('#1').text('show');
            }else{
                $('#1').text('hide');
            }
        });
   });
}

test();
$('#1').text('show');
}); 
```

[在这里](http://jsfiddle.net/markus85/qq9HG/)尝试一个例子

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:05:58.790

```
$('#1').text(function(i, t) { return t == 'show' ? 'hide' : 'show' }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T12:56:38.420

```
 if($('#1').text() === 'show'){
            $('#1').text('hide');
        }else{
            $('#1').text('show');
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T12:56:41.397

您正在使用`$('#1').text("show")`而不是`$('#1').text() == "show"`

```
$('#2').toggle();

function test() {
    $(document).on('click', '#1', function () {
        $('#2').toggle(300, function() {
            if($('#1').text() == 'show'){
                $('#1').text('hide');
            }else{
                $('#1').text('show');
            }
        });
   });
}

test(); 
```

# android - android中textview的不透明度

> ID：15089605
> 
> 赞同：0
> 
> 时间：2013-02-26T12:51:51.350
> 
> 标签：android, textview, opacity

在我的应用程序中，最初我将不透明度设置`TextView`为 60。之后，当用户按下按钮时，我想`TextView`根据按下增加它的按钮或减少它的按钮来减少或增加不透明度。我已经尝试过了，但是每次当我得到文本的不透明度时，它的 -3 或 -1 实际上不是。

```
 public void decreaseOpacity(View v){

    int op=txtView.getBackground().getOpacity();// its alwz -ve value
    txtView.getBackground().setAlpha(op-1);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:00:25.963

试试这个代码

```
public class AlphaTextView extends TextView {

  public AlphaTextView(Context context) {
    super(context);
  }

  public AlphaTextView(Context context, AttributeSet attrs) {
    super(context, attrs);
  }

  public AlphaTextView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
  }

  @Override
  public boolean onSetAlpha(int alpha) {
    setTextColor(getTextColors().withAlpha(alpha));
    setHintTextColor(getHintTextColors().withAlpha(alpha));
    setLinkTextColor(getLinkTextColors().withAlpha(alpha));
    return true;
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:56:36.087

Drawable.getOpacity() 不考虑 setAlpha() 所做的更改。[请参阅文档](http://developer.android.com/reference/android/graphics/drawable/Drawable.html#getOpacity%28%29)：

> 请注意，返回值不考虑客户端通过 setAlpha(int) 或 setColorFilter(ColorFilter) 方法应用的自定义 alpha 或颜色过滤器。

您可能需要将 alpha 值存储为变量而不使用 getOpacity()，例如：

```
private int mTextViewAlpha = 255;

public void decreaseOpacity(View v){
    if ( mTextViewAlpha-- <= 0 ) mTextViewAlpha = 0;
    txtView.getBackground().setAlpha(mTextViewAlpha);
    txtView.getBackground().invalidateSelf();
} 
```

# asp.net - 在 asp.net 的文本框中显示实时结果

> ID：15089609
> 
> 赞同：1
> 
> 时间：2013-02-26T12:52:01.263
> 
> 标签：asp.net, textbox

我正在开发一个网站（ASP.net），其中涉及用户在文本框中输入进行搜索。我想在他们输入关键字时在文本框中显示结果（就像我们在 Google 上搜索时一样）。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:59:12.587

你问的是所谓的**自动完成**，因为你在 asp.net 上工作，最简单的直接解决方案是使用 asp.net ajax 控制工具包

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/AutoComplete/AutoComplete.aspx)

但是，如果您使用其他一些 javascript 帮助程序库，例如 jQuery，您可以找到更多示例，其中之一：[jQuery Autocomplete 和 ASP.NET](https://stackoverflow.com/questions/305994/jquery-autocomplete-and-asp-net)

此外，如果您搜索“autocomplete asp.net”，您会发现更多示例，其中一些：

[http://www.asp.net/ajaxlibrary/act_AutoComplete_Simple.ashx](http://www.asp.net/ajaxlibrary/act_AutoComplete_Simple.ashx)
[http://www.codeproject.com/Articles/201099/AutoComplete-With-DataBase-and-AjaxControlToolkit](http://www.codeproject.com/Articles/201099/AutoComplete-With-DataBase-and-AjaxControlToolkit)

# java - 那个代码有什么问题？

> ID：15089610
> 
> 赞同：0
> 
> 时间：2013-02-26T12:52:01.417
> 
> 标签：java

我对以下代码有疑问：

```
import java.applet.Applet;
import java.awt.Color;
import java.awt.Graphics;    

public class Fraktalz extends Applet{

private static final long serialVersionUID = 1L;
Graphics grafika;   

public void paint(Graphics g){
    g.setColor(Color.white);
    g.fillRect(0, 0, 640, 480);
    g.setColor(Color.black);
    smok(200,360,500,120,20);

}

public void smok(int x1, int y1, int x2, int y2, int iteracja){
    if (iteracja == 0){
        grafika.drawLine(x1,y1,x2,y2);
    } else{
        int cx = (x1 + x2) / 2;
        int cy = (y1 + y2) / 2;

        int x3 = cx + (y2 - cy);
        int y3 = cy + (x2 - cx);

        smok(x1,y1,y3,y3,iteracja-1);
        smok(x2,y2,x3,y3, iteracja-1);
    }
}   

public static void main(String[] args) {
    javax.swing.SwingUtilities.invokeLater(new Runnable() {

        public void run() {
            new Fraktalz();

        }
    });
}
} 
```

它说我`nullPointerException`在`Graphics grafika;` 完成后得到了一个：

```
Fraktalz fr = new Fraktalz();
Graphics grafika = fr.getGraphics(); 
```

我收到一个错误：

```
Exception in thread "AWT-EventQueue-0" java.lang.StackOverflowError
    at java.lang.Class.getClassLoader(Unknown Source)
    at java.awt.Component.checkCoalescing(Unknown Source)
    at java.awt.Component.<init>(Unknown Source)
    at java.awt.Container.<init>(Unknown Source)
    at java.awt.Panel.<init>(Unknown Source)
    at java.awt.Panel.<init>(Unknown Source)
    at java.applet.Applet.<init>(Unknown Source)
    at Fraktalz.<init>(Fraktalz.java:6)
    at Fraktalz.<init>(Fraktalz.java:9)
    at Fraktalz.<init>(Fraktalz.java:9) 
```

有人可以帮我解决这个错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T12:57:47.717

创建一个构造函数并在那里初始化 grafika：

```
public class Fraktalz extends Applet{
    public Fraktalz() {
        grafika = getGraphics();
    }
} 
```

我假设您尝试像这样初始化它：

```
public class Fraktalz extends Applet{
    Fraktalz fr = new Fraktalz();
    Graphics grafika = fr.getGraphics();

    ...
} 
```

这会导致 a `StackOverflow`，因为您正在创建 的实例`Fraktalz`，这会导致其`fr`成员通过创建`Fraktalz`实例来初始化，这再次导致其`fr`成员 ... 这导致无限循环。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T12:57:55.703

这可能是一个无限递归。paint() 调用 smok()。smok() 调用 smok() 或 drawLine()。drawLine() 再次调用paint()...

# java - Java 命名约定

> ID：15089616
> 
> 赞同：1
> 
> 时间：2013-02-26T12:52:15.007
> 
> 标签：java, variables, naming, naming-conventions

我的完整变量名是唯一代码，但是我希望这个变量是“ucode”-ish。

那么什么是正确的 Java 命名约定呢？

1.  代码
2.  u代码
3.  代码

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T12:53:18.427

请参阅[编码约定](http://www.oracle.com/technetwork/java/codeconventions-135099.html#367)。对于变量，推荐使用驼峰式。关于。命名，我本来以为

```
uniqueCode 
```

将是最合乎逻辑的选择（我知道这不在您的选择列表中）。任何变体对我来说都像是*unicode*`uCode`的缩写，我认为它具有误导性。以上不是一个过长的名称（例如，它不是[AbstractAnnotationAwareTransactionalTests](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/test/annotation/AbstractAnnotationAwareTransactionalTests.html)！）

 *我可能不会在名称本身中嵌入变量的使用/限制。如果您重构用法，那么您也必须更改变量的名称。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-26T12:57:18.777

命名约定的官方文档： [http ://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-135099.html#367)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T12:56:34.880

变量名应以小写字母开头，其他单词应以大写字母开头。所以`uCode`或者`uniqueCode`会符合这个约定。

[http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/variables.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T12:53:50.173

我总是以小写字母开始我的变量，然后将每个单词大写，所以我会选择 2 但更愿意调用它`uniqueCode`。*

# sql-server - 未找到 Windows NT 用户或组 'DOMAIN\USER'？

> ID：15089617
> 
> 赞同：7
> 
> 时间：2013-02-26T12:52:16.107
> 
> 标签：sql-server, active-directory

我正在尝试从 Active Directory 组在 SQL 服务器上创建用户，因为我正在使用的应用程序本身不支持 Windows 身份验证，并且依赖于在 SQL 服务器上创建的个人登录，因为应用程序级别权限是在应用程序中管理的，而不是而不是使用 SQL 角色。因此，要访问应用程序的每个用户都需要针对应用程序数据库所在的 SQL 实例创建自己的用户，以便随后可以在应用程序内为用户分配单独的权限。

我正在使用以下内容从我们指定的 Active Directory 组中读取用户列表；

`exec master..xp_logininfo 'domain\groupname', 'members'`

这将返回类似于以下内容的输出；

```
account name    type  privilege  mapped login name  permission path
DOMAIN\USER     user  user       DOMAIN\USER        DOMAIN\GROUPNAME 
```

在大多数情况下，此列表中返回的用户可以在 SQL 实例上创建，而不会产生任何戏剧性。`sp_grantlogin`在继续允许每个新登录访问应用程序数据库之前，我首先将用户创建为 SQL 帐户。但是，有少数用户被报告为不存在。由于运行，我收到以下错误`sp_grantlogin`；

```
Msg 15401, Level 11, State 1, Procedure sp_grantlogin, Line 49
Windows NT user or group 'DOMAIN\USER' not found. Check the name again. 
```

显然在上面的错误信息中，我已经删除了实际的用户名。为什么会`xp_logininfo`返回无法创建的用户`sp_grantlogin`？我有什么明显的遗漏吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-16T03:20:40.487

这只是意味着用户不在管理员组中。如果您的问题就像我的问题一样，您的 Active Directory 在不同的虚拟机上，而您的 SQL Server 在另一个虚拟机上。并且您已将 Active Directory 域加入您的 SQL Server 虚拟机，那么您必须在您的 SQL Server 虚拟机上执行以下操作。

1.  导航到**工具**-->**计算机管理**。

2.  窗口打开，展开**System Tools** --> **Local Users and Groups**。

3.  单击**组**，您应该会在窗口的右列中看到组列表。

4.  双击**Administrator**，打开一个新窗口，您会注意到链接的用户不在此处。

5.  单击**添加**，新窗口打开。在这里，在位置下，您可以选择更改域的位置。

6.  单击**Advanced**，将打开登录提示，只需使用您的管理员虚拟机帐户登录即可。

7.  单击**“立即查找”**，所有字段都保持原样。从显示的用户列表中，双击从 Active Directory 导入的用户，然后单击**Ok**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-20T10:07:06.410

I have also faced this error for users, who was:

1.  created in AD
2.  granted some SQL permissions
3.  renamed in AD

Then I try to add this new, renamed user account name to the same server/database, error Msg 15401, Level 11, State 1, Procedure sp_grantlogin, Line 49 appears.

I have followed steps in [http://support.microsoft.com/kb/324321/en-us](http://support.microsoft.com/kb/324321/en-us) and this command returned old user account name befor rename:

```
SELECT name FROM syslogins WHERE sid = SUSER_SID ('YourDomain\YourLogin') 
```

it returned YourDomain\OldLogin

after executing exec sp_revokelogin 'YourDomain\OldLogin'

problem was fixed, sp_grantlogin now works ok.

PS as another test method I suggest running sp_grantlogin remotely, from another server. It may succeed to.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-02T20:32:38.433

我可以给你我在 Windows 7 中这样做的建议，尽管它可能不相关。

我遇到的问题是我在 Windows UI 中重命名了用户帐户。该名称在 Windows 中正确显示，我使用新名称登录。但在幕后，它仍然使用 SQL Server 正在寻找的旧名称。

在我最终解决之前，我为此苦苦挣扎了好几个小时！！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-26T15:17:58.240

使用前是否更改登录名的大小写`sp_grantlogin`？

如果您有区分大小写的服务器排序规则，那么 AD 用户的大小写需要以正确的大小写指定。

您可以通过执行以下操作找到服务器排序规则：

```
select serverproperty('collation') 
```

如果您确实有区分大小写的服务器排序规则，并且您没有弄乱大小写，那么`xp_logininfo`返回的内容可能与 AD 中的实际大小写不匹配。在这种情况下，请尝试使用案例的变体创建用户。

如果这些都不适用，请查看帐户。是不是被禁用了，能不能用它登录等等。如果suser_sid()返回null，那么一定是有什么问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-14T04:23:31.737

我有一个非常相似的情况，相同的错误代码 15401，但在这种情况下，我所做的是将域中的用户添加到我有 SQL 的服务器中的组中；因此，只需将该组添加到具有相同角色的 SQL 引擎即可。

```
USE [master]
GO
CREATE LOGIN [localhost\Administrators] FROM WINDOWS WITH DEFAULT_DATABASE=[master]
Msg 15401, Level 16, State 1, Line 3
Windows NT user or group 'localhost\Administrators' not found. Check the name again. 
```

然后在链接[PRB: Use BUILTIN\Group to Grant Access to Predefined Windows NT Groups](https://support.microsoft.com/EN-US/kb/216808)

我发现了问题，所以解决方案是：

```
USE [master]
GO
CREATE LOGIN [BUILTIN\Administrators] FROM WINDOWS WITH DEFAULT_DATABASE=[master]
GO
ALTER SERVER ROLE [sysadmin] ADD MEMBER [BUILTIN\Administrators]
GO
Command(s) completed successfully. 
```

我相信这对于减少登录帐户的数量非常有用，并且可以为 SQL 服务器中的角色分配更易于管理的用户数量。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-10T11:39:15.580

如果您使用的是非英语语言，或者一直在您的计算机上使用一种语言，您可能需要***本地化***您尝试使用的用户详细信息。

例如`[NT AUTHORITY\Network Service]`在瑞典机器上是`[NT INSTANS\Nätverkstjänst]`.

花了几个小时试图弄清楚为什么`BUILTIN\`,`NT AUTHORITY\`等`<MachineName>\`不起作用。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-20T16:11:49.693

我的问题是登录的长度。在`Domain\User`语法上，Windows 使用所谓的 pre-Windows 2000 语法。该语法将用户名的长度限制为 20 个字符。您必须将用户名截断为前 20 个字符，然后它应该可以工作，如下所示：

```
Domain\Abcdefghijklmnopqrstuvwxyz 
```

变成

```
Domain\Abcdefghijklmnopqrst 
```

# c# - AlertDialog 在 Android/Mono 上看起来很奇怪

> ID：15089618
> 
> 赞同：1
> 
> 时间：2013-02-26T12:52:17.713
> 
> 标签：c#, android, mono, xamarin.android

我正在使用此代码在网络错误上显示 AlertDialog：

```
var builder = new AlertDialog.Builder(this);
builder.SetMessage(error);

builder.SetCancelable(false);
builder.SetPositiveButton("OK", delegate { });
builder.Show(); 
```

但是，它看起来像这样：

![在此处输入图像描述](../Images/d6ee7e89a9bb1ac8b2d799da6cb2cc42.png)

**问题：**

1.  当前视图不显示在警报对话框后面，它只是白色的。
2.  它与顶部对齐，而不是中心
3.  主题或字体颜色错误，使文本难以阅读。

我使用 Theme.DeviceDefault.Light 作为活动的主题：

```
[Activity (Label = "xxx", Theme = "@style/MyAppTheme", MainLauncher = true)] 
```

...

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
   <style name="MyAppTheme" parent="@android:style/Theme.DeviceDefault.Light">
   </style>
</resources> 
```

如何解决这个问题？已尝试将 MyAppTheme 作为第二个参数插入，`AlertDialog.Builder(this, Resource.Style.MyAppTheme)`但 UI 没有变化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T11:45:25.310

Solved it. Used

```
var builder = new AlertDialog.Builder(this, Android.App.AlertDialog.ThemeHoloLight); 
```

and it looks better. I also used Activity.ShowDialog() and placed my AlertDialog code inside

```
protected override Dialog OnCreateDialog(int id, Bundle args) 
```

not sure that it did any difference.

Good blogpost: [http://blog.ostebaronen.dk/2013/02/using-dialogs-in-mono-for-android.html](http://blog.ostebaronen.dk/2013/02/using-dialogs-in-mono-for-android.html)

# google-visualization - Google Charts API，仅在 hAxis 上显示每秒的值

> ID：15089627
> 
> 赞同：2
> 
> 时间：2013-02-26T12:52:51.920
> 
> 标签：google-visualization, linechart

我寻找一个解决方案，只在 Google LineChart 的 hAxis 标签上显示每隔一个值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T23:22:12.747

hAxis 标签间隔由[此处](https://developers.google.com/chart/interactive/docs/gallery/linechart#Configuration_Options)`hAxis.showTextEvery`所述的选项设置。这仅适用于离散（非数字）水平轴。例如：

```
function drawVisualization() {
  // Create and populate the data table.
  var data = google.visualization.arrayToDataTable([
    ['x', 'Cats', 'Blanket 1', 'Blanket 2'],
    ['A',   1,       1,           0.5],
    ['B',   2,       0.5,         1],
    ['C',   4,       1,           0.5],
    ['D',   8,       0.5,         1],
    ['E',   7,       1,           0.5],
    ['F',   7,       0.5,         1],
    ['G',   8,       1,           0.5],
    ['H',   4,       0.5,         1],
    ['I',   2,       1,           0.5],
    ['J',   3.5,     0.5,         1],
    ['K',   3,       1,           0.5],
    ['L',   3.5,     0.5,         1],
    ['M',   1,       1,           0.5],
    ['N',   1,       0.5,         1]
  ]);

  // Create and draw the visualization.
  new google.visualization.LineChart(document.getElementById('visualization')).
      draw(data, {curveType: "function",
                  width: 500, height: 400,
                  vAxis: {maxValue: 10},
                  hAxis: {showTextEvery: 2}}
          );
} 
```

如果您的轴是数字的，您可以使用该`hAxis.minorGridlines.count`选项进行设置，如下所示：

```
hAxis: {minorGridlines: {count: 1}} 
```

这将在每两条主要网格线之间添加一条网格线（没有标签）。

# ruby-on-rails - 直接链接到资产管道中的已编译资源？

> ID：15089628
> 
> 赞同：1
> 
> 时间：2013-02-26T12:52:53.000
> 
> 标签：ruby-on-rails, ruby-on-rails-3, asset-pipeline

我有一个脚本，它基本上是用户嵌入的“小部件”。

它只有简单的香草 javascript，对其他资源没有任何要求。它位于`/app/assets/javascripts/delivery.js`

我想做的是让文件被压缩/编译，然后让用户从脚本标签直接链接到它，即。`<script src="http://example.com/assets/delivery.js"></script>`

但是现在……这是不行的。该文件在生产中不存在。

那么，如何像管道中的任何其他 JS 文件一样压缩该文件，然后直接链接到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T15:14:05.487

如果你添加

```
 config.assets.precompile += ['delivery.js'] 
```

到您的 application.rb，然后 delivery.js 将被视为清单文件：它将被预编译并在生产中作为 delivery.js 提供。清单文件通常只是一系列`//= require`（或`//= require_directory`）语句，但它们包含的任何 javascript 也将添加到生成的文件中。

默认情况下，application.js 清单包含所有内容 - 您希望对其进行调整，使其不包含仅旨在独立提供的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T16:15:03.310

首先，确保您的 app/assets/javascripts/delivery.js 不在您的顶级“清单”javascript 文件（即 app/assets/javascripts/application.js）中。application.js 通常包含`//= require_tree .`，所以它默认包含你的 delivery.js 。你需要改变它。对于您希望在 application.js 中预编译和组合的所有资产，将“require_tree”替换为单独的“require”语句。

接下来，更新您的环境文件（用于生产环境的 config/environments/production.rb）以将您的文件包含在预编译资产列表中：

```
config.assets.precompile += %w( delivery.js ) 
```

现在，您将在 public/assets 目录中将它作为一个单独的文件，以与 application.js 相同的方式编译和压缩。请记住，它的名称附加了一个摘要，类似于您的 application.js（当然，除非您通过设置 config.assets.digest = false 来提供没有摘要的文件）。

# c# - 为什么 JSON 没有反序列化为 NameValueCollection

> ID：15089630
> 
> 赞同：1
> 
> 时间：2013-02-26T12:53:01.370
> 
> 标签：c#, .net, json, serialization

我在客户端有 JSON 对象，如下所示：

```
 var myObject = {
      data1: 1,
      data2: 5,
      .......
    } 
```

我将它传递给`PageMethod`并期望它将被反序列化为`Dictionary<string, object>`. 它工作正常。但是当我用反序列化替换`Dictionary`PageMethod 签名时`NameValueCollection`失败了。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:59:57.293

NameValueCollection 不能像 Dictionary 那样序列化，因为它没有实现 IDictionary。

您可以将其转换为字典，然后尝试序列化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T12:59:03.803

因为页面方法使用的 JavaScriptSerializer 无法将此 JSON 结构反序列化为弱类型 NameValueCollection。为什么要这样做而不是使用强类型字典呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-30T08:06:33.750

您可以尝试“映射”。在代码中，您可以将属性 Coll 用作 NameValueCollection，但序列化/反序列化适用于 CollDictionary。

```
public NameValueCollection Coll
{
    get
    {
        var nvc = new NameValueCollection();
        CollDictionary.Keys.ToList().ForEach(a => nvc.Add(a, CollDictionary[a]));
        return nvc;
    }
    set
    {
        CollDictionary = value.AllKeys.ToDictionary(k => k, k => value[k]);
    }
}

[JsonProperty(PropertyName = "Coll")]
public Dictionary<string, string> CollDictionary { get; set; } 
```

# javascript - JQuery Mobile 导航栏大小不正确

> ID：15089635
> 
> 赞同：0
> 
> 时间：2013-02-26T12:53:18.973
> 
> 标签：javascript, jquery, html, mobile

我正在尝试使用 JQuery Mobile 制作一个非常简单的页面（这是我第一次真正使用它）。我似乎无法让导航栏正确显示。JQuery Mobile 页面上的代码看起来非常简单，据我所知，我正在逐字复制它。它显示像这样虽然......

![在此处输入图像描述](../Images/4aca00bea2f390a29ca783b8e49bb27f.png)

这是我的代码（仅供参考，theme.css 文件是默认的 JQuery css 文件）：

```
<html>
   <head>
      <title></title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="../css/theme.css" />
      <script src="../js/jquery-1.9.1.min.js"></script>
      <script src="../js/jquery.mobile-1.3.0.min.js"></script>

      <script type="text/javascript" src="../js/maptest.js"></script> 
   </head>

   <body>

      <div data-role="page" id="main">
        <div data-role="header">
           <div data-role="navbar">
              <ul>
                 <li><a href="#" class="ui-btn-active ui-state-persist">Test</a></li>
                 <li><a href="#">Test</a></li>
                 <li><a href="#">Test</a></li>
              </ul>
           </div>
        </div>

        <div data-role="content">
           <ul data-role="listview"> 
              <li>Acura</li> 
              <li>Audi</li> 
              <li>BMW</li> 
              <li>Cadillac</li> 
              <li>Ferrari</liI>
           </ul> 
        </div>

        <div data-role="footer">
           <p>footer</p>
        </div>

     </div>
   </body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T02:19:50.743

将以下内容添加到您的页面：

```
 <code><meta http-equiv="X-UA-Compatible" content="chrome=1"></code> 
```

看来您正在 IE 中加载。此页面在 IE 页面中加载 Chrome 框架 activex 以呈现 JQuery 使用的 webkit 样式表指令。

您还应该认真考虑将导航栏放在内容 div 中。

# windows - 面向 Java 开发人员的日志文件分析器

> ID：15089638
> 
> 赞同：5
> 
> 时间：2013-02-26T12:53:29.020
> 
> 标签：windows, logging, log4j

很抱歉提出这个问题。但我认为需要更新最佳日志分析工具列表。

我用过BairTail。它简单快捷。但该开发于 2007 年停止，此后从未更新，免费用户也没有搜索功能

然后转移到 LogExpert，它很好而且免费，带有搜索功能。但是当日志大小增加 2-3mb 并且滚动很痛苦时，它真的很慢

Apache Chainsaw，除了它来自 Apache，我想说对于想要快速分析日志而不做所有正则表达式和手动工作的开发人员来说是相当困难的。与正常使用偏差太大而且速度很慢

请推荐一个好的/最好的日志分析工具 [免费软件]

1.  简单的搜索功能和突出显示是必须的
2.  应该以最少的 cpu 资源运行平稳
3.  它将用于分析 30-50mb 的文件
4.  滚动和 GUI 友好。我在 windows 环境下使用，只需要 GUI 工具

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-27T07:28:08.380

我使用[otroslogviewer](http://code.google.com/p/otroslogviewer/)来分析 Windows 上生成的日志文件。我将它与 500MB 文件一起使用，没有任何性能或稳定性。它是免费的、开源的，并且开发仍在进行中。它具有 Java.util.logging 的模式自动检测功能，或者您可以从 log4j 传入您的 PatternLayout 或描述您的自定义设置以解析日志消息。您可以搜索（RegEx 可选）、标记和过滤结果并使用突出显示（用于堆栈跟踪或 XML 等）。这对我来说是最好的选择，我在网上找到的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T12:11:13.277

我的两分钱.. 恐怕您找不到可以满足您要求的**免费**软件。以下是一些我想到的原因。

1.  纯文本日志文件的格式非常分散，很难使它有用 - 你要求质量好和使用简单，对吧？听起来可能很简单，但事实并非如此。为了使其用户友好，它变得更加复杂，免费软件从不担心可用性。

2.  开源（或 freebees）一般不做 GUI 的东西，除了几个例外，所以不要指望找到最先进的用户界面。开源在框架、库、服务器方面都很棒，但在 UI 上绝对不会，而且在可用性方面绝对不行。

3.  严肃的基于文件的日志分析工具，轻描淡写的说起来很奇怪。要进行分析，需要结构化数据。在 GUI 应用程序中处理大量数据是不切实际的。这就是为什么没有人费心去创造这样的东西并把它送人的原因。

所以，你会单独找到这个难题的一些部分——你会免费找到一些很酷的日志解析器，或者你会免费找到一些很酷的日志查看器，你会找到索引器和出色的日志数据存储。但你永远找不到由于上述原因，**免费提供完整的解决方案。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-27T06:13:02.453

Chainsaw 的最新开发人员快照得到了很大改进。您不需要使用正则表达式，只需在搜索或过滤框中​​键入一个单词即可获得不区分大小写的部分文本匹配（如果它超过一个单词，则用单引号括起来）..

Chainsaw 现在可以注释注释（单击“标记”字段），提供大量自定义 UI 的方法，并具有改进的配置屏幕（您可以通过将包含fileappender 定义）..也许值得再看一看。

此处提供开发人员快照：http: [//people.apache.org/~sdeboy](http://people.apache.org/~sdeboy)

# mysql - SQL左/右JOIN问题

> ID：15089640
> 
> 赞同：2
> 
> 时间：2013-02-26T12:53:35.793
> 
> 标签：mysql, sql

我正在尝试在下面运行脚本，但总是为 name 字段获取 NULL 值。

```
SELECT u.name AS _user_name, s.name AS _school_name
FROM fwg_files AS f
LEFT JOIN users AS u ON u.id = f.user_id
LEFT JOIN user_profiles AS up ON up.user_id = u.id
LEFT JOIN school AS s ON s.id = up.profile_value 
```

在我看来，这个问题在 JOIN ON school 表中，我尝试 SELECT s.id 并且它也返回 NULL 值。当我将最后一行更改为 RIGHT JOIN 时，它开始工作，但我只能看到 s.name 值，其他为 NULL

表 fwg_files

```
id  | user_id
240 | 414
241 | 436 
```

表用户

```
id  | name
414 | Name 1
436 | Name 2 
```

表 user_profiles

```
user_id | profile_value
414     | "6"
436     | "14" 
```

表学校

```
id | name

 6 | School 1
14 | School 2 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:41:24.863

如果`profile_value`列上的引号是必须的，则需要使用 mix of`CONVERT`和`SUBSTRING_INDEX`去掉引号才能进行操作。

检查以下代码：

```
SELECT users.name as User, s.name as School
  FROM fwg_files AS ff
  LEFT JOIN users ON users.id = ff.user_id
  LEFT JOIN user_profiles AS up ON up.user_id = users.id
  LEFT JOIN school AS s ON s.id = CONVERT(SUBSTRING_INDEX(up.profile_value,'"',-2),UNSIGNED INTEGER); 
```

这里是带引号的[工作 SQL Fiddle 代码。](http://sqlfiddle.com/#!2/0a598/11)

# mysql - MySQL 备份过程减慢插入和更新速度

> ID：15089641
> 
> 赞同：0
> 
> 时间：2013-02-26T12:53:41.780
> 
> 标签：mysql, sql, database, backup, mysqldump

目前我正在使用 mysqldump 程序创建备份，下面是我如何运行它的示例。

```
mysqldump --opt --skip-lock-tables --single-transaction --add-drop-database 
--no-autocommit -u user -ppassword  --databases db > dbbackup.sql 
```

我一整天都在我的数据库上执行了很多插入和更新，但是当这个过程开始时，它确实会减慢插入和更新的速度，有没有人看到我备份它的方式有任何缺陷？（例如表被锁定），或者有什么方法可以改进备份过程，这样它就不会影响我的插入和更新？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T00:31:22.707

即使使用 --skip-lock-tables，mysqldump 也会在每个表上发出 READ 锁以保持一致性。使用 mysqldump 将始终锁定您的数据库。要执行热 mysql 备份，您将需要设置一个从属设备（这意味着一些成本）或使用一些专用工具，如 Percona Xtrabackup（[http://www.percona.com/software/percona-xtrabackup](http://www.percona.com/software/percona-xtrabackup)），那就是**如果您的数据库是 innoDB**（我们使用 xtrabackup 在从属服务器上毫无问题地处理 TB 级数据。如果您的数据库不是那么大，那么拥有一个从属服务器并锁定它以执行备份应该没什么大不了的 :)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:04:27.093

在不干扰生产数据库的情况下执行此操作的绝对最佳方法是设置主/从复制，然后从从数据库进行转储。

更多关于 MySQL 复制的信息在这里[http://dev.mysql.com/doc/refman/5.1/en/replication-howto.html](http://dev.mysql.com/doc/refman/5.1/en/replication-howto.html)

# java - 我可以在 jsp 本地化资源中引用其他属性吗

> ID：15089650
> 
> 赞同：0
> 
> 时间：2013-02-26T12:54:10.517
> 
> 标签：java, spring, jsp, localization

我想要类似的东西

```
label.terms=Terms and conditions
label.disclaimer=You agree to our<a href='#'>${label.terms}</a> 
```

在我的本地化资源文件中。用于引用其他属性的 synatx 在其他资源文件（例如 db 连接字符串）中有效，但`${}`在本地化资源中不被解析。

有什么办法可以让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T15:02:50.390

我不认为你可以完全按照你的意愿去做，但有办法解决。创建这样的消息：

```
header_order_edit=Edit Order {0} for customer {1} 
```

然后在您的 JSP 中，显示如下消息：

```
<spring:message code="header_order_edit" arguments="332321,My Client" /> 
```

在 Java 代码中，显示如下：

```
messageSource.getMessage("header_order_edit", new Object[] {"332321", "My Client"}, LocaleContextHolder.getLocale()) 
```

当然，要使 Java 代码正常工作，您需要连接正在使用的 bean...

```
@Autowired
private MessageSource messageSource; 
```

在这两种情况下，结果将如下所示：

```
Edit Order 332321 for customer My Client 
```

# django - 如何在我的产品表中添加新项目

> ID：15089656
> 
> 赞同：-2
> 
> 时间：2013-02-26T12:54:24.417
> 
> 标签：django

在这里，我将在我的产品表（db）中添加新项目。但我面临一个错误，比如
在我的产品表中我有 vendor_id 作为外键

这是我的观点.py

```
 def add1(request):
         obj = Vendor.objects.all()
        return  render_to_response('add_product1.html',{'obj':    
                                                    obj},context_instance=RequestContext(request))

def add_product2(request):
    if request.method == 'GET':

        val0 = request.GET.get('options')
        val1 = request.GET.get('name')
        val2 = request.GET.get('price')
        val3 = request.GET.get('category_product')
        val4 = request.GET.get('quantity')
        v = Product(Vendor= val0,name=val1,price=val2,category_product=val3,quantity= val4)
        v.save()
        return HttpResponseRedirect('/manage_product') 
```

这是模型

```
class Vendor(models.Model):
    name = models.CharField(max_length=30)
    address = models.CharField(max_length=100)
    contact = models.CharField(max_length=100)
    created_date = models.DateField()
    class Product(models.Model):
    Vendor = models.ForeignKey(Vendor)
    name = models.CharField(max_length=30)
    price = models.CharField(max_length=40)
    category_product= models.CharField(max_length=40)
    quantity = models.CharField(max_length=40) 
```

在 add_product1.html

```
<form action="/add_product2/" method="POST">

     id : <select name='options' >
    {% for Vendor in obj %}
    <option  value='0' >{{Vendor.id}}</option>
    {%endfor%}
    </select><br />

   Product  Name:<input type ='text' name= 'name' value =''></br>
   Price : <input type ='text' name= 'price' value =  ''></br>
   Category_product :<input  type = 'text' name= 'category_product' value = ''></br>
   Quantity: <input  type ='text' name='quantity' value = ''></br>
   <input type='submit' name='Submit' value='add' />
   </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:05:10.013

您应该使用 ModelForm，它有一些有用的工具，如验证、自动表单创建等......：[https ://docs.djangoproject.com/en/1.4/topics/forms/modelforms/](https://docs.djangoproject.com/en/1.4/topics/forms/modelforms/)

ModelForm 会将字段`Vendor`放入`<select>`输入中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T07:11:06.923

这是我们应该在值中做的答案

```
id : <select name='my_options' >
{% for Vendor in obj %}
    <option  value='{{Vendor.id}}' >{{Vendor.name}}</option>
    {%endfor%}
    </select><br /> 
```

然后顺利交出外键

# playframework-2.0 - java - 如何在 Ebean 中建立单向一对多关系

> ID：15089665
> 
> 赞同：4
> 
> 时间：2013-02-26T12:54:40.870
> 
> 标签：playframework-2.0, ebean

我有一个单向关系，其中一个实体具有另一个实体的列表（一对多）。

我已将级联类型设置为 CascadeType.ALL，但出现错误

```
[PersistenceException: Error inserting bean [class models.User$Activity] with unidirectional relationship. For inserts you must use cascade save on the master bean [class models.User].] 
```

在这条线上

```
userForm.get().update(id); 
```

我想更新现有的用户条目。如果我将上面的行替换为

```
userForm.get().save(); 
```

它会创建重复条目。有什么解决方案。请帮助我。我的代码：

```
@Valid
@OneToMany(cascade=CascadeType.ALL)
public List<Activity> activities; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-27T12:05:19.213

我在@OneToMany 与 Ebean 的关系上遇到了很多麻烦。我也多次遇到此错误消息。我认为您需要在实体之间建立双向关系。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-31T23:56:17.557

我认为上面的答案正确地解决了这个问题：建立双向关系。[此链接](http://blog.xebia.com/jpa-implementation-patterns-bidirectional-assocations/)中提供了一个示例

# php - jquery选项卡内的Ajax分页

> ID：15089668
> 
> 赞同：1
> 
> 时间：2013-02-26T12:54:57.780
> 
> 标签：php, jquery, ajax, wordpress, jquery-plugins

我在 jquery 选项卡内部遇到了一些分页问题。我使用了 Ajax 分页，因为它工作得很好，但不幸的是，当我第二次点击任何页面没有（分页）时。然后它破坏了链接。请看前视图它是如何工作的：http: [//kelts.wpengine.com/7664-top-o-the-morning-312/](http://kelts.wpengine.com/7664-top-o-the-morning-312/) 打开最近的相关帖子->点击分页的任何页面

请确保我使用的是 wp-pagination();。

```
<script type="text/javascript">

    jQuery(".larger.page").live("click", function(e) {
                e.preventDefault();
                var href = jQuery(this).attr("href");
                show_posts(href.replace(/.*page\//, ""));
            });
    show_posts(1);
    }); 
    function show_posts(l) {
        jQuery.get("<?php bloginfo('template_directory')?>/fetch-blog-post.php", {
                    pageno : l
                }, function(data) {
                    jQuery("#show_posts").html(data).show();
                });
    }

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:00:19.107

你为什么不试试

```
$('.wp-pagenavi').on('click',function(){
   // code
}); 
```

因为`.live`从现在开始不推荐使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:16:48.267

将您的选择器更改`jQuery(".larger.page").live(...)`为`jQuery(".larger.page, .page.smaller").live(...)`.

一旦您访问一个链接，该类`larger`就会被替换，`smaller`这就是该链接在第二次单击时断开的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:04:47.980

据我所知，问题在于您将分页器本身作为 AJAX 响应的一部分，并且不将事件绑定到新的 DOM 元素。

# android - 安卓用户界面问题

> ID：15089672
> 
> 赞同：1
> 
> 时间：2013-02-26T12:55:02.310
> 
> 标签：android, user-interface

我正在尝试构建一个 Android 应用程序，但我正在努力完成测验模块。所以在这个模块中，我需要为问题（简单、中等和困难）插入难度设置。对于我的第一个 XML 布局，我将方法设置为返回难度设置。

```
/**
 * Method to return the difficulty settings
 * @return
 */
private int getDifficultySettings() {
    SharedPreferences settings = getSharedPreferences(Constants.SETTINGS, 0);
    int diff = settings.getInt(Constants.DIFFICULTY, Constants.MEDIUM);
    return diff; 
```

对于另一个显示难度设置的布局。

```
/**
 * Method to update default check box
 */
private void updateButtonWithPreferences() {
    RadioButton c1 = (RadioButton)findViewById(R.id.easySetting);
    RadioButton c2 = (RadioButton)findViewById(R.id.mediumSetting);
    RadioButton c3 = (RadioButton)findViewById(R.id.hardSetting);

    SharedPreferences settings = getSharedPreferences(Constants.SETTINGS, 0);
    int diff = settings.getInt(Constants.DIFFICULTY, Constants.MEDIUM);

    switch (diff)
    {
    case Constants.EASY : 
        c1.toggle();
        break;

    case Constants.MEDIUM : 
        c2.toggle();
        break;

    case Constants.HARD :
        c3.toggle();
        break;  
    }
} 
```

问题是当我选择中等设置时，我只能从数据库中检索问题。各位Android专家能给我一些建议吗？谢谢你。:)

对于困难的java代码： -

```
public class SettingsActivity extends Activity implements OnClickListener{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.settings);

    Button updateBtn = (Button) findViewById(R.id.nextBtn);
    updateBtn.setOnClickListener(this);

    updateButtonWithPreferences();

}

private void updateButtonWithPreferences() {
    RadioButton c1 = (RadioButton)findViewById(R.id.easySetting);
    RadioButton c2 = (RadioButton)findViewById(R.id.mediumSetting);
    RadioButton c3 = (RadioButton)findViewById(R.id.hardSetting);

    SharedPreferences settings = getSharedPreferences(Constants.SETTINGS, 0);
    int diff = settings.getInt(Constants.DIFFICULTY, Constants.MEDIUM);

    switch (diff)
    {
    case Constants.EASY : 
        c1.toggle();
        break;

    case Constants.MEDIUM : 
        c2.toggle();
        break;

    case Constants.EXTREME :
        c3.toggle();
        break;  
    }
}

@Override
public void onClick(View arg0) {

    if (!checkSelected())
    {
        return;
    }
    else
    {
        SharedPreferences settings = getSharedPreferences(Constants.SETTINGS, 0);
        Editor e = settings.edit();
        e.putInt(Constants.DIFFICULTY, getSelectedSetting());
        e.commit();
        finish();
    }

}

private boolean checkSelected() {
    RadioButton c1 = (RadioButton)findViewById(R.id.easySetting);
    RadioButton c2 = (RadioButton)findViewById(R.id.mediumSetting);
    RadioButton c3 = (RadioButton)findViewById(R.id.hardSetting);
    return (c1.isChecked() || c2.isChecked() || c3.isChecked());
}

private int getSelectedSetting() {
    RadioButton c1 = (RadioButton)findViewById(R.id.easySetting);
    RadioButton c2 = (RadioButton)findViewById(R.id.mediumSetting);
    if (c1.isChecked())
    {
        return Constants.EASY;
    }
    if (c2.isChecked())
    {
        return Constants.MEDIUM;
    }

    return Constants.EXTREME;
} 
```

}

对于数据库 java 代码：-

```
public class DBHelper extends SQLiteOpenHelper{

private static String DB_PATH = "/data/data/com.tmm.android.chuck/databases/";
private static String DB_NAME = "questionsDb";
private SQLiteDatabase myDataBase; 
private final Context myContext;

public DBHelper(Context context) {
    super(context, DB_NAME, null, 1);
    this.myContext = context;
}   

public void createDataBase() throws IOException{
    boolean dbExist = checkDataBase();
    if(!dbExist)
    {
        this.getReadableDatabase();

        try {
            copyDataBase(); 
        } catch (IOException e) {
            throw new Error("Error copying database");
        }
    }
}

private boolean checkDataBase(){
    SQLiteDatabase checkDB = null;
    try{
        String myPath = DB_PATH + DB_NAME;
        checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
    }catch(SQLiteException e){

    }
    if(checkDB != null){
        checkDB.close();
    }

    return checkDB != null ? true : false;
}

private void copyDataBase() throws IOException{

    InputStream myInput = myContext.getAssets().open(DB_NAME);

    String outFileName = DB_PATH + DB_NAME;

    OutputStream myOutput = new FileOutputStream(outFileName);

    byte[] buffer = new byte[1024];
    int length;
    while ((length = myInput.read(buffer))>0){
        myOutput.write(buffer, 0, length);
    }

    myOutput.flush();
    myOutput.close();
    myInput.close();

}

public void openDataBase() throws SQLException{
    String myPath = DB_PATH + DB_NAME;
    myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
}

@Override
public synchronized void close() {
    if(myDataBase != null)
        myDataBase.close();
    super.close();
}

@Override
public void onCreate(SQLiteDatabase db) {
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
}

public List<Question> getQuestionSet(int difficulty, int numQ){
    List<Question> questionSet = new ArrayList<Question>();
    Cursor c = myDataBase.rawQuery("SELECT * FROM QUESTIONS WHERE DIFFICULTY=" + difficulty +
            " ORDER BY RANDOM() LIMIT " + numQ, null);
    while (c.moveToNext()){
        Question q = new Question();
        q.setQuestion(c.getString(1));
        q.setAnswer(c.getString(2));
        q.setOption1(c.getString(3));
        q.setOption2(c.getString(4));
        q.setOption3(c.getString(5));
        q.setRating(difficulty);
        questionSet.add(q);
    }
    return questionSet;
} 
```

}

此代码用于我的第一个 XML 布局。所以方法 getQuestionSet() 来自这里。

```
public class SplashActivity extends Activity implements OnClickListener{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.welcome);

    Button playBtn = (Button) findViewById(R.id.playBtn);
    playBtn.setOnClickListener(this);
    Button settingsBtn = (Button) findViewById(R.id.settingsBtn);
    settingsBtn.setOnClickListener(this);
    Button rulesBtn = (Button) findViewById(R.id.rulesBtn);
    rulesBtn.setOnClickListener(this);
    Button exitBtn = (Button) findViewById(R.id.exitBtn);
    exitBtn.setOnClickListener(this);
}

@Override
public void onClick(View v) {
    Intent i;

    switch (v.getId()){
    case R.id.playBtn :

        List<Question> questions = getQuestionSetFromDb();

        GamePlay c = new GamePlay();
        c.setQuestions(questions);
        c.setNumRounds(getNumQuestions());
        ((ChuckApplication)getApplication()).setCurrentGame(c);  

        i = new Intent(this, QuestionActivity.class);
        startActivityForResult(i, Constants.PLAYBUTTON);
        break;

    case R.id.rulesBtn :
        i = new Intent(this, RulesActivity.class);
        startActivityForResult(i, Constants.RULESBUTTON);
        break;

    case R.id.settingsBtn :
        i = new Intent(this, SettingsActivity.class);
        startActivityForResult(i, Constants.SETTINGSBUTTON);
        break;

    case R.id.exitBtn :
        finish();
        break;
    }
}

private List<Question> getQuestionSetFromDb() throws Error {
    int diff = getDifficultySettings();
    int numQuestions = getNumQuestions();
    DBHelper myDbHelper = new DBHelper(this);
    try {
        myDbHelper.createDataBase();
    } catch (IOException ioe) {
        throw new Error("Unable to create database");
    }
    try {
        myDbHelper.openDataBase();
    }catch(SQLException sqle){
        throw sqle;
    }
    List<Question> questions = myDbHelper.getQuestionSet(diff, numQuestions);
    myDbHelper.close();
    return questions;
}

private int getDifficultySettings() {
    SharedPreferences settings = getSharedPreferences(Constants.SETTINGS, 0);
    int diff = settings.getInt(Constants.DIFFICULTY, Constants.MEDIUM);
    return diff;
}

private int getNumQuestions() {
    SharedPreferences settings = getSharedPreferences(Constants.SETTINGS, 0);
    int numRounds = settings.getInt(Constants.NUM_ROUNDS, 20);
    return numRounds;
} 
```

}

# python - 从包含键的列表中为字典创建键

> ID：15089673
> 
> 赞同：1
> 
> 时间：2013-02-26T12:55:06.343
> 
> 标签：python, list, dictionary, python-2.7

我正在尝试构建一个包含多个级别的多个值的矩阵。我正在尝试生成一个像这样构建的字典：

```
{'routername':{'channel':{'01':<value>,'02':<value>}}} 
```

最高级别的键数可能会有所不同。

该脚本正在生成一个可用路由器列表和另一个可用通道列表。我写了一个相当繁琐的函数来测试一个键，如果它不存在，它将键添加到字典中。

所以，我想知道是否没有一种简单的方法可以为列表“路由器”中的键创建一个空值的字典

```
def AddToChart(passed_seq):
    try:
        if str(passed_seq[0]) in chart_dict:
            if str(passed_seq[1]) in chart_dict[passed_seq[0]]:
                if str(passed_seq[2]) in chart_dict[passed_seq[0]][passed_seq[1]]:
                    if str(passed_seq[3]) in chart_dict[passed_seq[0]][passed_seq[1]][passed_seq[2]]:
                        chart_dict[passed_seq[0]][passed_seq[1]][passed_seq[2]][passed_seq[3]].update(err_sub_dict)

                    else:    
                        chart_dict[passed_seq[0]][passed_seq[1]][passed_seq[2]].update({passed_seq[3]:{}})
                        chart_dict[passed_seq[0]][passed_seq[1]][passed_seq[2]][passed_seq[3]].update(err_sub_dict)
                else:
                    chart_dict[passed_seq[0]][passed_seq[1]].update({passed_seq[2]:{passed_seq[3]:{}}})
                    chart_dict[passed_seq[0]][passed_seq[1]][passed_seq[2]][passed_seq[3]].update(err_sub_dict)
            else:
                chart_dict[passed_seq[0]].update({passed_seq[1]:{passed_seq[2]:{passed_seq[3]:{}}}})
                chart_dict[passed_seq[0]][passed_seq[1]][passed_seq[2]][passed_seq[3]].update(err_sub_dict)
        else:     
            chart_dict.update({passed_seq[0]:{passed_seq[1]:{passed_seq[2]:{passed_seq[3]:{}}}}})
            chart_dict[passed_seq[0]][passed_seq[1]][passed_seq[2]][passed_seq[3]].update(err_sub_dict)
    except ValueError:
        print "AddToChart: ",err_sub_dict,sys.exc_info()[1][0]   
    except:
        print sys.exc_info()
        print "AddToChart: variable not defined: "    + str(passed_seq) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T14:02:58.487

你应该使用

```
dict.setdefault() 
```

请参阅[文档](http://docs.python.org/2.7/library/stdtypes.html#dict.setdefault)。

例子：

```
d = {}
d = d.setdefault("k","eggs")

>> d["k"]
eggs

d2 = {"k":1}
d2 = d2.setdefault("k","spam")
>> d2["k"]
1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T15:48:46.313

我建议使用嵌套`collections.defaultdict`的 for `chart_dict`。它允许您提供工厂函数来设置新值，因此您请求的任何键都将始终有效。设置如此深入的嵌套结构有点棘手，但我认为以下内容将为您的四级结构做正确的事情（我假设您的`<value>`项目也是字典，因为您当前的代码似乎期望）：

```
chart_dict = defaultdict(lambda:defaultdict(lambda:defaultdict(dict))) 
```

有了这些，您应该能够执行以下操作，而不必担心之前是否有任何键引用了字典中的任何内容：

```
a, b, c = passed_seq
chart_dict[a][b][c].update(err_sub_dict) 
```

我建议也做类似上面的变量解包的事情，尽管你可能应该使用比 , 和 . 更好`a`的`b`名称`c`。好的变量名可以把难以理解的东西变成容易掌握的东西。

# .net - 如何将 c++ 结构转换为对象？

> ID：15089677
> 
> 赞同：0
> 
> 时间：2013-02-26T12:55:18.143
> 
> 标签：.net, struct, c++-cli

如何将 c++ 结构转换为 Object ？

```
struct FileInfo{
float width, height;
};

FileInfo *info = (FileInfo*)malloc(sizeof(FileInfo));
Object ^obj = (Object^)info; 
```

错误“类型转换”：无法从 FileInfo * 转换为 'System::Object ^

**更新**我需要将 Object^ 转移到该方法。我无法修改方法。（这是api）

# sql-server-2008 - 如何在此表上使用 group by

> ID：15089678
> 
> 赞同：0
> 
> 时间：2013-02-26T12:55:18.893
> 
> 标签：sql-server-2008

这是我的桌子的屏幕截图

![在此处输入图像描述](../Images/fa5483a86b26912818ac170aed2510b4.png)

当按**sales_contract_nbr**和**name**分组时，我试图删除所有**PostAmt**总和为 0 的行。

 ****例如 ：

**sales_contract_nbr** 51101008103在按名称分组时将被删除，而 sales_contract_nbr 为 -96.83 和 96.83 时总和为 0。

很简单吧？

但除此之外我想要的是我想删除组中的合同。我的意思是，如果将合同**51101008195**分组，则它等于**533.87**，不会被删除（突出显示）

但我想分组删除

例如，应首先将两行合同编号**51101008195**相加（见下图）我的意思是**应将 -533.87**和**533.87**的金额相加以获得总和**0**。只应留下一份合同记录。

![在此处输入图像描述](../Images/1e85fa6a62b0d53492a79c21a9a7bb0f.png)

**更新**

更多说明：

![在此处输入图像描述](../Images/0fcfb2ce44417e2f8a7f489688a24735.png)

我想做的是首先将第 1 行和第 2 行分组（匹配一个正数和另一个负数），然后将其他数分组。如果有 4 行相同的合同编号，则应将第 1 行和第 2 行分组，如果绝对金额相同，则应将第 3 行和第 4 行分组，如果不是第 3 行和第 4 行没有被删除.

![在此处输入图像描述](../Images/802b4ce59962f8b52bc8820f69aa82bb.png)

我想使用 group by 来消除总数最终为 0 并且具有相同名称或合同号的行。

我希望我已经把问题说清楚了。如果没有请询问。

怎么做到呢？

到目前为止我正在做的是：

```
SELECT sales_contract_nbr
,name
,SUM(PostAmt) PostAmt
FROM tblMasData 
GROUP BY sales_contract_nbr, name 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T12:58:57.987

这是我现在想出的：

```
SELECT location
    ,sales_contract_nbr
    ,name
    ,SUM(absPostAmt * nbPostAmt) / ABS(SUM(nbPostAmt)) PostAmt
    ,ABS(SUM(nbPostAmt)) nbPostAmt
    ,SUM(absPostAmt * nbPostAmt) PostAmtTotal
FROM ( 
    SELECT location
        ,sales_contract_nbr
        ,name
        ,PostAmt
        ,ABS(PostAmt) absPostAmt
        ,SUM(CASE WHEN PostAmt >= 0 THEN 1 ELSE -1 END) nbPostAmt
    FROM tblMasData 
    GROUP BY location
        ,sales_contract_nbr
        ,name
        ,PostAmt
        ,ABS(PostAmt)
) t
GROUP BY location
    ,sales_contract_nbr
    ,name
    ,absPostAmt
HAVING SUM(absPostAmt * nbPostAmt) != 0 
```

请参阅[SQLFiddle](http://sqlfiddle.com/#!3/6449ce/12)。

这并不能完全回答您的问题，就好像您有 100 + 100 - 200 一样，它不会隐藏所有三行。但是在一堆行中找到等于 0 的组合可能会很麻烦。

此外，如果某些行的数量相同，它们将被分组。这就是为什么我添加了一个列来计算这些行是否相等，并在最后添加一个列来总结它们。

这至少应该允许您以编程方式处理数据。

让我知道这是否满足您的需求，或者您是否需要一些改进（这可能涉及一些不太漂亮的 SQL）。****

# opengl - glGenerateMipmap 和 1.#QNAN

> ID：15089679
> 
> 赞同：2
> 
> 时间：2013-02-26T12:55:21.673
> 
> 标签：opengl, glsl, opengl-4

我在我的图形引擎（延迟渲染）中实现了 HDR，我需要计算图像的平均亮度（RGBA16F）。我生成 mipmap，然后读取最小的 mipmap (1x1)。

```
glBindTexture(GL_TEXTURE_2D, hdrTex);
glGenerateMipmap(GL_TEXTURE_2D);
glGetTexImage(GL_TEXTURE_2D, level, GL_RGBA, GL_FLOAT, data);
glBindTexture(GL_TEXTURE_2D, 0);

glm::vec3 color = glm::vec3(data[0], data[1], data[2]);
float avgLum = glm::dot(color, glm::vec3(0.2125, 0.7154, 0.0721)); 
```

我注意到有时（当我移动相机时）data[0]、data[1] 和 data[2] 包含 1.#QNAN。为什么 ？如何解决？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-09-09T15:13:31.597

某些 OpenGL 驱动程序要求您`glFinish()`在 之后调用`glGetTexImage()`以确保结果可用于下一条指令。

否则，您会遇到一个竞争条件，您可以从中读取未初始化的值`data[]`。

# vim - 在每个段落的开头/结尾执行命令

> ID：15089681
> 
> 赞同：2
> 
> 时间：2013-02-26T12:55:22.920
> 
> 标签：vim

任何人都可以建议一种在每个段落的开头（尤其是在视觉选择中）执行命令的方法吗？例如，我用纯文本编写了一个文档，现在我想将它转换为 HTML，所以我要做的一件事就是将每个段落包装在`<p>`and中`</p>`。

**编辑：**

到目前为止，我唯一想到的就是在段落的开头`:'<,'>g/^\s*$/normal o<p>^[`插入标签，同样的，但用*大写*字母在段落的末尾添加结束标签。显然这会命中任何空白行，因此如果段落之间有多行，它将插入额外的不必要的标签。`<p>` *`O`*

 ** * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:57:50.880

试试这个命令：

```
g/\v(\_^\s*\n)@<=\S/normal O<p>^[}o</p> 
```

**`^[`是`C-V <ESC>`**

`\v`打开“非常神奇”，以便模式的其余部分更容易编写。括号包裹了一个子表达式，它匹配行的开头 ( `\_^`)、任意数量的 whitepsace ( `\s*`)，然后是行的结尾 ( `\n`)（换句话说，一个空行）。这`@<=`意味着前面的子表达式实际上并未包含在匹配的文本中，而是需要匹配。然后任何非空白字符 ( `\S`) 结束匹配模式。

它在这里的工作方式如下：

![在此处输入图像描述](../Images/e2ad7377fa5d03effdde61d605c51032.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:30:01.047

只需安装[环绕](http://www.vim.org/scripts/script.php?script_id=1697)并再次享受生活：

选择你的段落然后做`s<p>`。*

# jquery - WordPress 上的 PrettyPhoto - 灯箱位置根据图库项目位置而变化

> ID：15089686
> 
> 赞同：0
> 
> 时间：2013-02-26T12:55:34.323
> 
> 标签：jquery, wordpress, lightbox, prettyphoto

出于某种原因，当我向图库添加更多拇指时，它们会进入第二行，当您单击图像时，灯箱开始出现在屏幕下方。如何确保灯箱始终居中？

问题是灯箱太低了，您可以看到整个图像并且导航等消失了。

如果我只有 5 个拇指，那很好，因为它只有一行，但这不是一个可行的解决方案。

非常感谢您的帮助。

问题可以在这里看到：

[http://mattchungphoto.com/audi-gallery](http://mattchungphoto.com/audi-gallery)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-04T16:55:17.257

可能已经晚了，但我遇到了同样的问题，并通过修改 CSS 文件的一部分来解决它，如下所示：

```
div.pp_pic_holder {
    display: none;
    position: absolute; 
    float:left;
    top:50%;
    left:50%;
    width: 100px;
    z-index: 10000;
} 
```

# python - 如何使程序仅执行给定百分比的特定操作？

> ID：15089687
> 
> 赞同：0
> 
> 时间：2013-02-26T12:55:36.843
> 
> 标签：python, random

我不认为标题是那么清楚。

[假设我有一个打开http://www.google.com](http://www.google.com)的 Python 程序

我如何让它只打开 23% 的时间、37% 的时间、12% 的时间等？换句话说，我想让我的 Python 程序有时打开 google.com，而不是其他时候。

我意识到从技术上讲，我可以制作一个包含几个空元素的列表，并调用一个打开网页的函数，但理想情况下，我可以一直更改“百分比”。

如果问题仍然不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T12:58:26.300

1.  生成一个随机数。通常这些在 [0, 1) 中。
2.  如果数字小于您想要的百分比 (0.37 == 37%)，请执行此操作。

# c# - 对象引用未设置为 htmlcollection 的实例

> ID：15089688
> 
> 赞同：1
> 
> 时间：2013-02-26T12:55:39.177
> 
> 标签：c#, wpf

我需要好心人签收任务。我想使用 htmlaglitypack 计算标签。我尝试使用 htmlcollection 节点来计算标签。但是得到

> “你调用的对象是空的”

在 foreach 条件下。他们中的任何人都可以纠正我为什么会这样的问题吗？

我的代码发布在下面：

```
public void XmlPPC(string rights)
{
    int count = 0;
    try
    {
        MessageBox.Show(rights);
        using (FileStream fs = File.Open(rights,
                                         FileMode.Open,
                                         FileAccess.Read,
                                         FileShare.ReadWrite))
        using (BufferedStream bs = new BufferedStream(fs))
        using (StreamReader sr = new StreamReader(bs))
        {
            HtmlAgilityPack.HtmlDocument doc = new HtmlAgilityPack.HtmlDocument();
            doc.Load(sr);

            HtmlNodeCollection right = doc.DocumentNode.SelectNodes("//copyrightLine");
            foreach (HtmlNode logan in right)
            {
                 count = count + 1;
                 MessageBox.Show("cnt" + count.ToString());
            }

            // snip...
        }
    }
    catch (Exception f)
    {
        log = log + "\r\n" + f.ToString();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:10:14.867

您收到错误消息：

> 你调用的对象是空的。

因为这一行：

```
HtmlNodeCollection right = doc.DocumentNode.SelectNodes("//copyrightLine"); 
```

正在回归`null`。这只会发生，因为没有名为的**元素**`copyrightLine`。请考虑以下操作[规范](http://www.w3schools.com/xpath/xpath_syntax.asp)`//`：

> 从当前节点中选择文档中与选择匹配的节点，无论它们在哪里。

现在，修复是几件事之一：

1.  在其中获取一个名为`copyrightLine`.
2.  修复拼写错误，因为它可能拼写错误。
3.  如果不属于这两种方式，请以不同的方式搜索您需要的内容。

# sql - 处理 Microsoft Exchange Server

> ID：15089689
> 
> 赞同：0
> 
> 时间：2013-02-26T12:55:40.223
> 
> 标签：sql, outlook, exchange-server, communication, pst

我必须制作一个应用程序，希望能够从使用 Microsoft Exchange Server 实现的电子邮件服务器修改一些邮件内容项。在 PST 文件方法上，我很好，因为我知道如何处理这个问题。

问题是我不知道 Microsoft Exchange Server 如何处理邮件内容和 PST 文件。据我所知，PST 文件只是备份邮件内容和结构的一种方式，类似于 sql 转储文件。我听说 Microsoft Exchange Server 在内部实际上会使用 SQL 数据库来存储这些内容项。由于我需要从客户的角度对电子邮件内容进行永久性修改，因此我需要了解以下内容： **- Microsoft Exchange Server 如何存储它的邮箱内容项目？通过数据库或 PST 或两者兼而有之？如果两者都有，他如何进行同步？（在这里我部分指的是“CachedExchangeMode”这个概念） - 在 Microsoft Exchange Server 的内容中，服务器透视图上的数据流如何？- 作为内容操作的客户端，我如何与 Microsoft Exchange Server 进行通信？**

欢迎提供有关此主题的任何信息，因为我一直在寻找有关这些主题的任何文档。

提前谢谢你们！

* * *

谢谢德米特里！我需要开发一种解决方案，以确保无法通过专用服务器或客户端工具（例如适用于 PST 文件的客户端主机的 scanpst）恢复永久删除的邮箱项目。从客户端的角度来看，我设法获得了修改 PST 文件的密切解决方案，以便通过擦除可用内存块，文件不会被损坏，并且这些信息会真正丢失。但是在服务器端，主要是在 Exchange 服务器端（因为 Exchange 在某种程度上比 otehr 服务器更特殊）我没有任何关于如何使这些数据真正丢失的数据。我必须提到我开始假设我可以从服务器主机和客户端访问服务器主机。根据我的预感，Exchange 可以存储它' s 数据库中的邮箱项目，但他们只会通过相应记录中的逻辑标志永久删除这些项目。或者他们可以利用 PST 服务器文件，该文件能够像 Windows 的回收站一样存储永久删除的项目，提供恢复某些已删除项目的方法（在这种情况下，数据库可以真正删除这些记录作为恢复方法应该位于 PST 文件结构中）。也许 Exchange 使用这两种方法。在所有情况下，我都需要制定一个解决方案，以 100% 确认这些物品确实丢失了。这就是为什么我需要特定的文件或确认的“预感”。我是否更清楚地描述了我的问题 Dmitry 的上下文？谢谢 ！或者他们可以利用 PST 服务器文件，该文件能够像 Windows 的回收站一样存储永久删除的项目，提供恢复某些已删除项目的方法（在这种情况下，数据库可以真正删除这些记录作为恢复方法应该位于 PST 文件结构中）。也许 Exchange 使用这两种方法。在所有情况下，我都需要制定一个解决方案，以 100% 确认这些物品确实丢失了。这就是为什么我需要特定的文件或确认的“预感”。我是否更清楚地描述了我的问题 Dmitry 的上下文？谢谢 ！或者他们可以利用 PST 服务器文件，该文件能够像 Windows 的回收站一样存储永久删除的项目，提供恢复某些已删除项目的方法（在这种情况下，数据库可以真正删除这些记录作为恢复方法应该位于 PST 文件结构中）。也许 Exchange 使用这两种方法。在所有情况下，我都需要制定一个解决方案，以 100% 确认这些物品确实丢失了。这就是为什么我需要特定的文件或确认的“预感”。我是否更清楚地描述了我的问题 Dmitry 的上下文？谢谢 ！也许 Exchange 使用这两种方法。在所有情况下，我都需要制定一个解决方案，以 100% 确认这些物品确实丢失了。这就是为什么我需要特定的文件或确认的“预感”。我是否更清楚地描述了我的问题 Dmitry 的上下文？谢谢 ！也许 Exchange 使用这两种方法。在所有情况下，我都需要制定一个解决方案，以 100% 确认这些物品确实丢失了。这就是为什么我需要特定的文件或确认的“预感”。我是否更清楚地描述了我的问题 Dmitry 的上下文？谢谢 ！

* * *

我现在已经阅读了一些与 Exchange 管理其邮箱项目删除的方式相关的信息。它在每个删除阶段将软删除的项目移动到 Dumpster 平台（首先进入“Deletions”文件夹，然后引入“Purges”文件夹，并在激活诉讼保留时，它还将原始邮箱消息保留到“Versions”文件夹）。然后，我找到了一种使用 Exchange Power Shell 删除这些项目的方法，甚至阅读了远程 Power Shell 方法以编程方式访问 Exchange Power Shell 以编程方式执行此操作。这是我去过的地方。这会是我必须做的解决方案吗？这会确保这些物品无法以任何方式恢复吗？你知道这个的另一种解决方案还是我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:33:40.827

Exchange 将数据存储在其内部数据库中。它的格式没有记录。

在客户端（缓存模式），数据存储在 OST 文件中（您可以将其视为美化的 PST 文件）。Outlook 会定期将 OST 数据与邮箱的在线版本同步。

你想做什么？从客户端的角度来看，如果您的代码适用于 PST 存储，它应该可以很好地适用于缓存或在线的 Exchange 存储。

你可以说得更详细点吗？

# html - HTML5 菜单下拉菜单不起作用

> ID：15089691
> 
> 赞同：0
> 
> 时间：2013-02-26T12:55:42.063
> 
> 标签：html, css

我有一个正在为我的 HTML5 网站构建的下拉菜单，并且我的编码正确（或者我认为如此），并且下拉菜单不仅仅出现在顶层元素。

我已经扫描了代码，据我所知，代码似乎没问题。我将代码放在下面，看看您是否能发现错误：

```
<navigation id="NavigationLink" style="" class="navigationStyle">
        <section class="menu">
        <ul>
        <li><a class="left_nosub" href="default.html">Home</a></li>
        <li><a class="center_hassub" href="products.html">Products</a>
        <ul>
            <li><a href="graphics.html">Graphic Design</a></li>
            <li><a href="web.html">Web Design</a></li>
            <li><a href="cms.html">Content Management Systems</a></li>
            <li><a href="social-media.html">Social Media Design</a></li>
        </ul>
        </li>
        <li><a class="center_hassub" href="#">News</a>
        <ul>
            <li><a href="#">Current Projects</a></li>
            <li><a href="#">Day-To-Day-Stuff</a></li>
        </ul>
        </li>
        <li><a class="right_nosub" href="#">Contact Us</a></li>
        </ul>
        </section> 
```

```
.menu {
font-family: Arial, Helvetica, sans-serif;
position: relative;
font-size: 11px;
margin: 0;
z-index: 1000;
}

.menu ul li a {
display: block;
text-decoration: none;
color: #f0f0f0;
font-weight: bold;
width: 80px;
height: 42px;
text-align: center;
border-bottom: 0;
background-image: url(images/center.png);
line-height: 48px;
font-size: 11px;
overflow: hidden;
padding-left: 1px;
 }

.menu .left_nosub {
background-image: url(images/left.png);
padding-left: 1px;
margin-right: -1px;}

.menu .right_nosub {
background-image: url(images/right.png);        
}

.menu ul {
padding: 0;
margin: 0;
list-style: none;
}

.menu ul li {
float: left;
position: relative;
}

.menu ul li ul {
display: none;
}

.menu ul li:hover a {
color: #000;
background: url(images/center_hassub.png);
}

.menu ul li:hover ul li a.center_hassub {
background: #6a3;
color: #000;
}

.menu ul li:hover ul li:hover a.center_hassub {
background: #6fc;
color: #000;
}

.menu ul li:hover ul li ul {
display: none;
}

.menu ul li:hover .left_nosub {
color: #000;
background: url(images/left_nosub.png);
}

.menu ul li:hover .right_hassub {
color:#000;
background: url(images/right_hassub.png);
}

.menu ul li:hover .right_nosub {
color: #000;
background: url(images/right_nosub.png);
}

.menu ul li:hover ul li a {
background-image: none;
display: block;
height: 28px;
line-height: 26px;
color: #000;
width: 142px;
text-align: left;
margin: 0;
padding: 0 0 0 11px;
font-weight: normal; 
}

.menu ul li:hover ul{
margin: 0 0 0 3px;
padding: 0;
background-image: url(images/dropdown.png);
background-repeat: no-repeat;
background-position: bottom left;
}

.menu ul li:hover ul li a:hover {
color: #000 !important;
background-image: url(images/sub_hover.png);
}

.menu ul li:hover ul li:hover ul {
display: block;
position: absolute;
left: 105px;
top: 0;
}

.menu ul li:hover ul li:hover ul.left {
left: -105px;
}

.menu ul li:hover ul .sub_active {
background-image: url(images/sub_active.png);
margin-right: 1px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:05:58.983

更改以下类

```
.menu ul li:hover ul{
margin: 0 0 0 3px;
padding: 0;
background-image: url(images/dropdown.png);
background-repeat: no-repeat;
background-position: bottom left;
display:block;
} 
```

# .net - 只读日志文件的标题行

> ID：15089699
> 
> 赞同：0
> 
> 时间：2013-02-26T12:56:07.303
> 
> 标签：.net

在我的工作场所，如果设置了所有参数，我们的日志文件可以增长到千兆字节。这些文件的格式是：

```
[HEADER ROW 1]
  XML LINE 1
  XML LINE 2
  . . .
  XML LINE x
[HEADER ROW 2]
  XML LINE 1
  XML LINE 2
  . . .
  XML LINE y
.  .  .
[HEADER ROW n]
  XML LINE 1
  XML LINE 2
  . . .
  XML LINE z 
```

标题行包含有用的信息，例如消息的日期时间戳及其一般类型。解析整个文件需要很长时间，所以理想情况下我想对日志文件进行初始传递，忽略除以“[”开头的行之外的所有行。但是，我对各种 .NET IO 类不熟悉。有人可以推荐一种有效的方法吗？

哦，我忘了 - 这必须与当前打开以在另一个进程中写入的文件一起使用。没什么大问题:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:20:21.330

我认为使用[StreamReader](http://msdn.microsoft.com/en-us/library/db5x7c0d%28v=vs.110%29.aspx)是正确的方法。您甚至可以异步读取文件！

您还可以编写一个程序，从控制台读取行并写入正确的行。然后你可以使用这样的命令行：

```
C:\type LOGFILE | PROGRAM 
```

或者，您可以使用类似 grep 的程序，例如[WinGrep](http://www.wingrep.com/)。

# android - 如何在 TextView 中正确对齐文本？

> ID：15089702
> 
> 赞同：0
> 
> 时间：2013-02-26T12:56:17.960
> 
> 标签：android, textview, alignment

我有一个 Textview，我需要在其中以正确的格式显示大量信息。我怎样才能实现它？

我想这样显示：

```
Title  :       Some Title.
Date   :       Date

More Info about the title.
......
......

Contact :      Contact Details. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:00:32.070

那么你必须通过计算选项之间的空间来做到这一点。

**更好的方法**

使用`Webview`使用 html 格式正确对齐内容的 html 字符串并加载 webview 并显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:12:23.810

如果使用 TextView 不是必需的，您可以使用 TableLayout：

```
<TableLayout 
    android:layout_width="match_parent"
    android:layout_height="wrap_content">
    <TableRow>
        <TextView 
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="Title"
            android:layout_weight="1"/>

        <TextView 
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="Some Title"
            android:layout_weight="2"/>
    </TableRow>

    <TableRow>
        <TextView 
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="Date"
            android:layout_weight="1"/>

        <TextView 
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:text="Some Date"
            android:layout_weight="2"/>
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:13:13.213

我认为有三种选择。

1.  如果字体无关紧要，请在您的文本视图中使用 android:typeface="monospace" 并通过空格对齐
2.  如果字体确实很重要，请在 html 中设计并使用 WebView
3.  如果您不想使用 html，则需要通过不同的 TextView 进行布局，这总是更好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:37:47.133

正如其他人所建议的那样，WebView 是您的选择。请参阅 [如何以编程方式设置/编辑 webview 的内容](https://stackoverflow.com/questions/6206245/how-to-programmatically-set-edit-content-of-webview)

但是，如果文本不需要特殊格式（例如不同的颜色、字体大小）并且唯一需要的格式是缩进，则可以在 TextView 中执行此操作。

在布局中：

```
<TextView
    android:id="@+id/text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:singleLine="false" /> 
```

在活动中：

```
 TextView tv = (TextView) findViewById(R.id.text);
    tv.setText("Title  :       Some Title.\nDate  :       Date\n\nMore Info about the title.\n......\n......\n\nContact :      Contact Details."); 
```

# opengl - 如何获取附加到帧缓冲区的纹理？

> ID：15089703
> 
> 赞同：3
> 
> 时间：2013-02-26T12:56:25.707
> 
> 标签：opengl, framebuffer

目前，我通过它们的 id 和渲染目标的数量来存储帧缓冲区。但是要绘制到帧缓冲区中，我需要使用`glDrawBuffers`. 现在我这样做。

```
vector<GLenum> buffers;
for(int i = 0; i < targets; ++i)
{
    buffers.push_back(GL_COLOR_ATTACHMENT0 + i);
}
glDrawBuffers(targets, &buffers[0]); 
```

为简单起见，我不想再自己存储渲染目标的数量。我猜OpenGL无论如何都会这样做。有没有办法获取绑定到帧缓冲区的颜色附件，例如 using`glFramebufferTexture2D`调用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:27:14.167

# performance - Oracle 查询第二次运行速度变慢

> ID：15089705
> 
> 赞同：0
> 
> 时间：2013-02-26T12:56:27.467
> 
> 标签：performance, oracle, recompile

我正在尝试对 Oracle 数据库运行查询。我第一次运行它大约需要 7 秒。我第二次尝试运行它时，它似乎并没有真正完成。这在 Oracle SQL 开发人员和我正在开发的应用程序中（使用 JDBC Oracle Thin）。

如果我在以前没有做过的地方在查询中添加一个空格，那么查询又需要 7 秒。

我假设这是因为 Oracle 认为这是一个新查询。有什么方法可以强制 Oracle 将查询视为以前从未见过的查询，即使它有？

# java - 如何从服务器端下载文件到硬盘

> ID：15089709
> 
> 赞同：1
> 
> 时间：2013-02-26T12:56:33.147
> 
> 标签：java, http, download, smartgwt

我生成了一个 pdf 文件，现在它在服务器上，例如，有什么方法可以将它下载到我的桌​​面？

我`smartGWT`在客户端使用 java 在我的服务器端。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:42:33.353

写一个`Servlet.`这里是[例子](http://www.javatpoint.com/example-of-downloading-file-from-the-server-in-servlet)。

然后使用以下代码：

```
Window.open(GWT.getHostPageBaseURL()
        + "/PdfDownload?path=filepath, "", ""); 
```

分配文件路径`req.getParametr("filepath");`

# visual-studio-2010 - 单个进程能否加载/使用 mscvr100.dll 和 msvcr110.dll 而不会导致问题？

> ID：15089712
> 
> 赞同：2
> 
> 时间：2013-02-26T12:56:37.520
> 
> 标签：visual-studio-2010, visual-c++, visual-studio-2012, msvcrt, mixed-mode

混合模式 C++ 应用程序是使用 VS2012 构建的，它引用托管 DLL Noesis.Javascript.dll（我相信它是使用 VS2010 构建的），而后者又在运行时与 msvcr100.dll 链接。

我观察到一个崩溃，它似乎显示了 Noesis.Javascript.dll 中的代码从 VS2012 的 msvcr110.dll 调用库函数。

是否可以使用两个不同版本的 C++ 运行时库运行单个进程，或者这里发生的情况可能是问题的原因？什么是替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:12:43.967

正如在这个[答案](https://stackoverflow.com/questions/11808260/compiling-a-mfc-app-from-visual-studio-2010-to-2012-rc-results-in-lnk2038)中提到的，实际上不可能组合这些二进制文件。崩溃可能是由不兼容引起的。

您可以尝试以下操作：项目属性 -> 常规 -> 平台工具集：Visual Studio 2010 (v100)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T05:04:46.300

可以在同一个进程中使用两个运行时 DLL，但要安全地这样做需要非常小心，以确保不会在另一个进程中使用来自一个的对象。

# c# - Visual Studio 2012：无法引用项目

> ID：15089715
> 
> 赞同：13
> 
> 时间：2013-02-26T12:56:39.480
> 
> 标签：c#, visual-studio-2012

我们使用 VS 2010 开发了一个包含约 35 个项目的大型解决方案，现在我们正在考虑迁移到 VS 2012 Ultimate。我将解决方案文件转换为 VS 2012，一般来说，一切正常。

但是每当我打开解决方案时，我都会在解决方案中的某个项目 A 上收到一些警告：“无法引用项目 X”“无法引用项目 Y”......其中 A 具有对 X 和 Y 的项目引用。当我构建解决方案时，我收到无法找到每个相应 DLL 的元数据的错误。

当我查看解决方案资源管理器中的引用时，它们标有黄色警告符号。**只要我单击参考，警告就会消失，图标看起来很正常。然后我可以毫无错误地构建！**

每次打开解决方案都会出现问题，受影响的项目总是一样的。

有没有其他人经历过这种奇怪的行为？再次删除和添加项目引用没有帮助......

先感谢您。

**编辑：**我检查了引用项目的 csproj 文件，我想知道所有有上述问题的项目引用 GUID 都是小写的，其他项目是大写的。

```
<ProjectReference Include="..\Presentation.Net\Presentation.Net.csproj">
  <Project>{04004c6b-76c8-4f2d-9fcf-5a866bb80fd4}</Project>
  <Name>CMS.Presentation.Net</Name>
</ProjectReference> 
```

在解决方案中，GUID 是大写的：

```
Project("{FAE04EC0-301F-11D3-BF4B-00C04F79EFBC}") = "Presentation.Net", "Presentation.Net\Presentation.Net.csproj", "{04004C6B-76C8-4F2D-9FCF-5A866BB80FD4}" 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T14:28:14.297

VS 2012 放弃了对一些旧项目类型的支持。VS 2012 并不支持所有的 VS 2010 项目类型。例如，MSI 设置项目类型已被 InstallShield LE 项目类型取代。 [在此处查看兼容性列表](http://msdn.microsoft.com/en-us/library/vstudio/hh266747.aspx)，看看是否有任何失败的项目类型存在问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T10:11:27.123

这为我指明了正确的方向。 [Visual Studio 2012 随机报告：“找不到引用的组件 X”](https://stackoverflow.com/questions/12094692/visual-studio-2012-randomly-reporting-the-referenced-component-x-could-not-be)

至少警告消失了。必须检查元数据错误是否会再次发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-03T02:14:53.097

当我遇到这个问题时，这是由于项目之间的 .NET 版本不同。您需要确保您尝试引用的项目具有与当前项目兼容的 .NET 版本。

例如，如果您的目标项目是 .NET 4.5.2 并且您引用的项目是 4.6，您可能会收到此错误，因为引用的项目正在使用您当前项目无法访问的组件。

要解决它，只需转到目标项目的属性并选择正确的 .NET 兼容版本。对于我的解决方案中的所有项目，我为每个项目维护相同的 .NET 版本，尤其是当它们相互引用时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-28T20:05:04.430

尝试清理项目/解决方案，然后构建它。

# java - setTextAppearance() 在 Android 上不起作用

> ID：15089723
> 
> 赞同：2
> 
> 时间：2013-02-26T12:56:51.203
> 
> 标签：java, android

我已经尝试在 中以编程方式设置文本样式`RadioButton`，但它们只设置大小和颜色。但是，如果我通过 XML 设置样式，它就可以正常工作。`TextView`我在相同的情况下尝试了设置样式。我究竟做错了什么？

Java代码：

```
public class YourProgOneApps extends Activity implements OnClickListener {

RadioGroup radioGender, radioTarget, radioWhere;
RadioButton man, woman, build_muscle, fat_loss, keep_in_good_shape, gym, home;
TextView textView2;
Button btnExeProgOne;

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.your_prog1);

    radioGender = (RadioGroup) findViewById(R.id.radioGender);
    man = (RadioButton) findViewById(R.id.man);
    woman = (RadioButton) findViewById(R.id.woman);
    textView2 = (TextView) findViewById(R.id.textView2);
    textView2.setTextAppearance(getApplicationContext(), R.style.radio_chek_f_pre_f); 
    man.setTextAppearance(this, R.style.radio_chek_f_pre_f);
    radioTarget = (RadioGroup) findViewById(R.id.radioTarget);
    radioWhere = (RadioGroup) findViewById(R.id.radioWhere);
  }
public void onClick(View v) {}
} 
```

样式.xml

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<style name="AppTheme" parent="android:Theme.Light" />
<style name="radio_chek_f_pre_f">
    <item name="android:layout_width">match_parent</item>
    <item name="android:layout_height">wrap_content</item>
    <item name="android:layout_weight">1</item>
    <item name="android:background">@drawable/radio_right</item>
    <item name="android:button">@null</item>   
    <item name="android:textColor">#b4b4b4</item>
    <item name="android:textSize">20sp</item>
    <item name="android:shadowColor">#ffffff</item>
    <item name="android:shadowDx">1</item>
    <item name="android:shadowDy">1</item>
    <item name="android:shadowRadius">1</item>
    <item name="android:gravity">center_horizontal</item>
</style>
</resources> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:28:17.590

如果您在 UI 线程上，请尝试调用 invalidate()；如果您不在 UI 线程上，请尝试调用 postInvalidate()。

在您的示例中，您似乎在 UI 线程上，因此请尝试在该文本视图上调用 Invalidate。

这应该迫使它重新绘制，虽然我想 setTextAppearance 会自动执行此操作，但值得一试。

# go - 为什么要命名返回参数？

> ID：15089726
> 
> 赞同：58
> 
> 时间：2013-02-26T12:57:01.303
> 
> 标签：go

命名函数的返回参数有什么好处？

```
func namedReturn(i int) (ret int) {
    ret = i
    i += 2
    return
}

func anonReturn(i int) int {
    ret := i
    i += 2
    return ret
} 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-02-26T13:09:39.203

命名它们有一些好处：

*   它用作文档。
*   它们被自动声明并初始化为零值。
*   如果您有多个返回站点，则如果您更改函数的返回值，则无需全部更改，因为它只会说“返回”。

也有缺点，主要是通过声明一个同名的变量很容易意外地隐藏它们。

Effective Go 有一个[关于命名结果参数的部分](http://golang.org/doc/effective_go.html#named-results)：

> Go 函数的返回或结果“参数”可以指定名称并用作常规变量，就像传入参数一样。当命名时，它们在函数开始时被初始化为它们的类型的零值；如果函数执行没有参数的 return 语句，则使用结果参数的当前值作为返回值。
> 
> 这些名称不是强制性的，但它们可以使代码更短更清晰：它们是文档。如果我们命名 nextInt 的结果，很明显哪个返回的 int 是哪个。
> 
> ```
> func nextInt(b []byte, pos int) (value, nextPos int) { 
> ```
> 
> [...]

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-02-26T14:36:41.087

命名返回变量的另一个特殊用途是由延迟函数字面量捕获。一个简单的例子：

```
package main

import (
    "errors"
    "fmt"
)

func main() {
    fmt.Println(f())
}

var harmlessError = errors.New("you should worry!")

func f() (err error) {
    defer func() {
        if err == harmlessError {
            err = nil
        }
    }()
    return harmlessError
} 
```

输出是`<nil>`。在更实际的场景中，延迟函数可能会处理恐慌，并且可能会修改除错误结果之外的其他返回值。然而，共同的魔力在于，延迟的文字有机会*在 f 被终止后*修改 f 的返回值，无论是正常还是恐慌。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-26T13:10:27.940

它至少在两种情况下很有用：

1.  每当您必须声明要返回的变量时。例如

    ```
    func someFunc() (int, error) {
        var r int
        var e error
        ok := someOtherFunc(&r)  // contrived, I admit
        if !ok {
            return r, someError()
        }
        return r, nil
    } 
    ```

    对比

    ```
    func someFunc() (r int, e error) {
        ok := someOtherFunc(&r)
        if !ok {
            e = someError()
        }
        return
    } 
    ```

    随着通过函数的执行路径数量的增加，这一点变得更加重要。

2.  当您记录返回值并希望按名称引用它们时。`godoc`将返回变量视为函数签名的一部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T13:20:52.127

例如，命名返回参数可以通过名称访问。

```
func foo() (a, b, c T) {
        // ...
        if qux {
                b = bar()
        }
        // ...
        return
} 
```

在没有命名返回参数的情况下，这并不容易复制。必须引入与命名返回参数具有基本相同功能的局部变量：

```
func foo() (T, T, T) {
        var a, b, c T
        // ...
        if qux {
                b = bar()
        }
        // ...
        return a, b, c
} 
```

所以直接允许它更容易。

此外，它们也可以从另一个方向访问：

```
func foo() (a, b, c T) {
        // ...
        if a > c {
                b = bar()
        }
        // ...
        return
} 
```

等等。

# xsd - 多个元素的 xsd 选择

> ID：15089730
> 
> 赞同：23
> 
> 时间：2013-02-26T12:57:09.587
> 
> 标签：xsd, xsd-validation, choice

我希望我的 Xml 文件如下所示

```
<root>
<name>a</name>
<age>23</age>
</root>

 or 

<root>
<empno>b<empno>
<designation>ase</designation>
</root> 
```

是否可以使用“选择”指示器为上述创建 XML 模式？如下所示。

```
 <xsd:element name="root">
    <xsd:complexType>
    <xsd:choice>

    <xsd:element name="name"/>
    <xsd:element name="age" />

     or

    <xsd:element name="empno"/>
    <xsd:element name="designation" />

    <xsd:choice>

    </xsd:complexType>
    <xsd:element> 
```

有可能这样做吗？

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-02-26T14:13:07.983

是的，您快到了.. 只是缺少一个`sequence`.. 因为它是一组字段，您必须将它们包装在序列下..

这些序列标签将在`<Choice>`标签下。现在将验证这些标签集（序列）中的任何一个。

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root" type="root"/>
  <xs:complexType name="root">
    <xs:choice>
      <xs:sequence>
        <xs:element name="empno" type="xs:string" />
        <xs:element name="designation" type="xs:string" />
      </xs:sequence>
      <xs:sequence>
        <xs:element name="name" type="xs:string" />
        <xs:element name="age" type="xs:unsignedByte" />
      </xs:sequence>
    </xs:choice>
  </xs:complexType>
</xs:schema> 
```

## -------------------------------------------------- --------------------------------------

**我想在这里再补充一个建议​​：**

我观察到您使用嵌套声明.. 像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="trunk">
          <xs:complexType>
            <xs:sequence>
              <xs:element name="branch1" type="xs:string"/>
              <xs:element name="branch2" type="xs:string"/>
            </xs:sequence>
          </xs:complexType>
        </xs:element>
        <xs:element name="other" type="xs:string" />
      </xs:sequence>
    </xs:complexType>
  </xs:element>
</xs:schema> 
```

总是喜欢使用自定义类型！像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema attributeFormDefault="unqualified" elementFormDefault="qualified" xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="root" type="root"/>

  <xs:complexType name="root">
    <xs:sequence>
      <xs:element name="trunk" type="trunk"/>
      <xs:element name="other" type="xs:string" />
    </xs:sequence>
  </xs:complexType>

  <xs:complexType name="trunk">
    <xs:sequence>
      <xs:element name="branch1" type="xs:string"/>
      <xs:element name="branch2" type="xs:string"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

这提高了可读性，您可以重用 complexType/simpleType ..

希望能帮助到你..

# php - Zend Framework 2 UnitTesting 教程的问题：状态码 500

> ID：15089733
> 
> 赞同：1
> 
> 时间：2013-02-26T12:57:14.727
> 
> 标签：php, unit-testing, zend-framework2, phpunit

我已经构建了[ZF2“入门”应用程序](http://framework.zend.com/manual/2.1/en/user-guide/overview.html)，并尝试将[ZF2 UnitTesting 教程](http://framework.zend.com/manual/2.1/en/tutorials/unittesting.html)中的测试应用到它。现在我在这个简单的测试中遇到了麻烦：

[项目]/module/Album/test/AlbumTest/Controller/AlbumControllerTest.php

```
<?php
namespace AlbumTest\Controller;
...
class AlbumControllerTest extends AbstractHttpControllerTestCase
{
    ...
    public function testIndexActionCanBeAccessed()
    {
        $this->dispatch('/album');
        $this->assertResponseStatusCode(200);

        $this->assertModuleName('Album');
        $this->assertControllerName('Album\Controller\Album');
        $this->assertControllerClass('AlbumController');
        $this->assertMatchedRouteName('album');
    }
} 
```

命令行：/var/www/sandbox/zf2sandbox/module/Album/test/

```
# phpunit
PHPUnit 3.7.13 by Sebastian Bergmann.

Configuration read from /var/www/sandbox/zf2sandbox/module/Album/test/phpunit.xml

F....

Time: 0 seconds, Memory: 10.00Mb

There was 1 failure:

1) AlbumTest\Controller\AlbumControllerTest::testIndexActionCanBeAccessed
Failed asserting response code "200", actual status code is "500"

/var/www/sandbox/zf2sandbox/vendor/zendframework/zendframework/library/Zend/Test/PHPUnit/Controller/AbstractControllerTestCase.php:373
/var/www/sandbox/zf2sandbox/module/Album/test/AlbumTest/Controller/AlbumControllerTest.php:49

FAILURES!
Tests: 5, Assertions: 11, Failures: 1. 
```

所以，`assertResponseStatusCode(200)`失败了，因为状态码是`500`。**为什么？**

[当我在浏览器（ http://zf2sandbox.sandbox.loc/album](http://zf2sandbox.sandbox.loc/album) ）中调用此路径时，它可以工作：

![在此处输入图像描述](../Images/fca28e7de995a0b8ac37c0df9aa89f60.png)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:11:40.360

答案就在您遵循的教程的下一个标题中。[一个失败的测试用例。](http://framework.zend.com/manual/2.1/en/tutorials/unittesting.html#a-failing-test-case)

所以根据它，你需要配置服务管理器。

```
$serviceManager = $this->getApplicationServiceLocator();
$serviceManager->setAllowOverride(true);
$serviceManager->setService('Album\Model\AlbumTable', $albumTableMock); 
```

此外，添加这个对于在单元测试中获得正确的错误非常有帮助，如链接中所述。

```
protected $traceError = true; 
```

# matlab - Matlab数据：在图中找到每列的平均值

> ID：15089746
> 
> 赞同：0
> 
> 时间：2013-02-26T12:57:51.053
> 
> 标签：matlab, plot, average

我是使用 MATLAB 的初学者。我的数据有 17 列，显示 7 年期间的波高和风数据。前 4 列分别是年（2005-2011）、月、日和小时。接下来的列是各自的录音。

我在这里找到了一个有用的脚本来绘制这些列。

```
fid = fopen('wam1.txt','r'); 
C = textscan(fid,'%f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f %f','headerlines',4,'commentstyle','--');
fclose(fid);
x = C{1}; y1 = C{5}; y2 = C{3};
plot(x,y1) 
```

现在，该图由（例如）Y 轴上的风速和 X 轴上的年份（2005-2011）组成。我必须找到每年的平均风速。谁能帮帮我。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:08:52.493

正如您绘制的`y1`那样，解决方案的值将非常简单。

```
mean(y1) 
```

会给你y1的平均值。

如果您想按年执行此操作，这将让您遍历这些年并将平均值存储在一个名为 的向量中`result`。

```
count = 0;
for t = unique(x)
   count = count+1;
   result(count) = mean(y1(x==t)); % Or just result(t)
end
result 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:26:23.207

如果每年有相同数量的值，并且它们是有序的（例如，首先是 2005 年的所有值，然后是 2006 年的所有值......），您可以使用 reshape：

```
y1 = reshape(y1,365,7); mean(y1) 
```

否则，您可以计算每年：

```
mean(y1(x==2005)) 
```

# php - 通过自动加载器在全局上下文中使用命名空间

> ID：15089750
> 
> 赞同：0
> 
> 时间：2013-02-26T12:58:02.717
> 
> 标签：php

由于外部库，我必须使用命名空间。因为在我意识到使用命名空间不适用于我的`__autoload()`. 下面的代码会说

> 加载类 Foo\Bar\NamespaceClass 失败，请更新自动加载器！

我该如何解决这个问题？该类`Foo`只是外部库的包装器。

```
// This is my autoloaded class file
use Foo\Bar\NamespaceClass;

class Foo
{
    public function Bar()
    {
        $namespaceClass = new NamespaceClass();
    }
}

// This is a separate file calling my class "Foo" from global namespace
$myAutoloadedClass = new Foo();
$myAutoloadedClass->Bar(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:04:36.890

我认为您不了解名称空间的工作原理。我建议您阅读有关此的文章，例如[nettuts+ 上的这篇文章](http://net.tutsplus.com/tutorials/php/namespacing-in-php-2/)。

此外，我建议您使用[PSR-0 标准](https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md)。几乎所有的 3rd-party 库都遵循这一点，它们带有一个您可以直接使用的自动加载器。

最后，您说您使用外部库。你看过[作曲家](http://getcomposer.org)吗？这是一个非常棒的工具，可以帮助您自动加载、更新和使用外部库。我建议您观看 KnpUniversity 的精彩截屏：[“作曲家的奇妙世界”](http://knpuniversity.com/screencast/composer)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:06:23.400

您应该更新自动加载器。

# magento - Magento：编辑顶部导航子导航结构

> ID：15089753
> 
> 赞同：0
> 
> 时间：2013-02-26T12:58:10.057
> 
> 标签：magento

我需要对从标准 Magento 顶级导航显示的子导航进行一些重大编辑。

我已经进入 top.phtml 并发现它在核心 Mage 代码中调用了一个函数，是否可以在调用之前在我的主题中运行一个文件，或者我是否必须创建一个完全自定义的导航/使用扩展?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T20:34:36.167

总是非常欢迎您简单地`design/frontend/[package]/[theme]/catalog/navigation/top.phtml`用您自己的标记替换模板，然后您可以随意迭代。

Block 类已经提供了一些基本方法，可用于按照您的喜好构建导航菜单，例如`getStoreCategories()`、`isCategoryActive()`、`getCurrenetChildCategories()`等。

或者，正如 Peter 所提到的，您可以重写 Block 类以更改特定方法或包含您自己的方法，然后可以从模板文件中访问这些方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T15:42:00.897

要覆盖`Mage_Catalog_Block_Navigation`：

在`app/etc/modules/Yourmodule_Catalog.xml`：

```
<?xml version="1.0"?>
<config>
<modules>
    <Yourmodule_Catalog>
        <active>true</active>
        <codePool>local</codePool>
        <depends />
    </Yourmodule_Catalog>
</modules>
</config> 
```

在`app/code/local/Yourmodule/Catalog/etc/config.xml`：

```
<?xml version="1.0"?>
<config>
<modules>
    <Yourmodule_Catalog>
        <version>0.1.0</version>
    </Yourmodule_Catalog>
</modules>

<global>
    <blocks>
        <catalog>
            <rewrite>
                <navigation>Yourmodule_Catalog_Block_Navigation</navigation>
            </rewrite>
        </catalog>
    </blocks>
</global> 
```

在`app/code/local/Yourmodule/Catalog/Block/Navigation.php`：

```
<?php
class Yourmodule_Catalog_Block_Navigation extends Mage_Catalog_Block_Navigation
{
.... the methods you want to override...
} 
```

就是这样。

# iphone - ios 6.1.2 无法在 iphone4 上卸载 com.apple.CommCenter.plist？

> ID：15089756
> 
> 赞同：2
> 
> 时间：2013-02-26T12:58:17.453
> 
> 标签：iphone, ios, jailbreak, darwin

在我的 OpenSSh 终端中，我输入了命令

```
 "launchctl unload -w /System/Library/LaunchDaemons/com.apple.CommCenter.plist" 
```

但是终端显示“没有找到要卸载的东西”。当我输入命令时：

```
launchctl list 
```

我发现 com.apple.CommCenter 是这样的情况：</p>

```
84  -   com.apple.CommCenter 
```

所以，有谁知道为什么我无法卸载com.apple.commcenter.plist。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-04-24T13:25:35.690

这对我有用：物理更改目录，然后在到达那里后卸载。

```
cd /System/Library/LaunchDaemons/
launchctl unload -w com.apple.CommCenter.plist 
```

# amazon-s3 - 大文件的boto慢吗？

> ID：15089757
> 
> 赞同：0
> 
> 时间：2013-02-26T12:58:19.993
> 
> 标签：amazon-s3, boto

我正在为上传大文件进行一些性能测试，大约为 100MB+。我已经阅读了有关分解和并行上传片段的帖子，但我只是想弄清楚一个大文件的速度有多快。

当我使用 collectl 逐秒上传并观看性能时，我永远不会超过 5MB/秒。另一方面，如果我将文件大小减少到 50MB，我可以以 20MB/秒的速度上传。

是否有一些基于文件大小的魔法？有没有办法让我的单个 100MB 文件上传更快？如果是 500MB 甚至 5G 会怎样？

嗯，我试了很多次，一直得到 5MB/秒，现在当我再次尝试时，我超过了 15。这是因为我在共享带宽吗？

-标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:38:22.113

boto 绝对没有任何魔法可以解释您观察到的可变性。这个等式中有很多变量，例如您自己与互联网的连接、您的提供商与骨干网的连接、整体网络流量、S3 上的负载等，因此很难得到明确的答案。

总的来说，我发现我可以通过使用分段上传和某种并发来获得最佳性能。boto 中的`s3put`命令行实用程序提供了执行此操作的一种方法的示例。此外，如果您的 S3 存储桶位于特定区域，如果您连接到该特定端点而不是通用 S3 端点，您可能会看到更好的性能。

# r - R线性回归

> ID：15089759
> 
> 赞同：-3
> 
> 时间：2013-02-26T12:58:24.633
> 
> 标签：r

我有公式 y = x / (a+b*x) 我想拟合点 (6,72) (211,183) (808,360) (200,440)。我把它们放在 R 中

```
x <- c(6,211,808,200)
y <- c(72,183,360,440) 
```

现在我想拟合上面定义的函数来拟合这些点，并找到 a 和 b。我如何获得 a 和 b（使用 R）？而且，我如何获得 R 中的公式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T14:03:13.540

获取数据并绘制它：

```
x <- c(6,211,808,200)
y <- c(72,183,360,440)
plot(x,y,pch=19) 
```

定义函数，得到你的系数

```
f <- function(x,a,b) {x/(a+b*x)}
fit <- nls(y ~ f(x,a,b), start=c(a=1,b=1))
co <- coef(fit)
# co will contain your coefficients for a and b
#          a           b 
#0.070221853 0.002796513 
```

并策划：

```
curve(f(x, a=co["a"], b=co["b"]), add = TRUE, col="green", lwd=2) 
```

结果：

![在此处输入图像描述](../Images/111f92f6537d029cf69e2c9b18ef34ea.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:21:20.707

构造数据：

```
x <- c(6,211,808,200)
y <- c(72,183,360,440)
d <- data.frame(x,y) 
```

绘制数据：虽然稀疏，但它们并不疯狂（它们确实显示了一些增加/饱和模式的证据）

```
plot(y~x,data=d) 
```

拟合模型：

```
## y = x/(a+b*x)
## 1/y = a/x + b
m1 <- glm(y~I(1/x),family=gaussian(link="inverse"),data=d) 
```

您可以将结果绘制在`ggplot`

```
library("ggplot2")
qplot(x,y,data=d)+theme_bw()+
    geom_smooth(method="glm",family=gaussian(link="inverse"),
                formula=y~I(1/x),se=FALSE) 
```

这个模型的置信区间有点疯狂（因为置信区间`1/y`包括零，此时置信区间`y`爆炸），所以要小心......

# mysql - MySQL BLOB 损坏

> ID：15089762
> 
> 赞同：0
> 
> 时间：2013-02-26T12:58:30.260
> 
> 标签：mysql

在 MySQL 的 BLOB/TEXT 字段中存储某些类型的文件似乎会破坏它们 - 据我所知，这是因为附加了两个空字符，某些格式（例如 GIF）是可以容忍的，而其他格式（例如， MS Office 文件）不是。有谁知道对此的解决方案/解决方法/替代做法？将文件存储在目录中（我见过的所有 CMS 似乎都这样做）并不安全。非常感谢任何建议。

# asp.net-mvc - 如何在mvc中将数据从devexpress gridview导出为pdf

> ID：15089764
> 
> 赞同：2
> 
> 时间：2013-02-26T12:58:39.940
> 
> 标签：asp.net-mvc, asp.net-mvc-3, devexpress

在我的项目中，我在一个场景中使用 devexpress 控件我想将整个 gridview 记录打印到 pdf，如何做到这一点，请在 mvc(devexpress gridview) 中帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:23:35.237

检查[如何导出 GridView 行并保留最终用户修改（例如排序、分组、过滤、选择）](http://www.devexpress.com/issue=KA18639)知识库。

# ssh - 奇怪的 Vagrant / SSH 连接行为

> ID：15089770
> 
> 赞同：6
> 
> 时间：2013-02-26T12:58:55.267
> 
> 标签：ssh, connection, capistrano, chef-infra, vagrant

我正在一些本地流浪虚拟机上运行一些 Capistrano 和 Chef 任务。我可以从命令行正常地通过 SSH 连接到这些框。

当我尝试运行一些 Capistrano 任务时，我*第*一次运行 Cap 任务时总是会收到以下错误：

```
connection failed for: 192.168.0.220 (Errno::ECONNRESET: Connection reset by peer) 
```

它偶尔也会失败第二次。但是当我再次运行它时，它起作用了！这种行为对我来说毫无意义，我丝毫不知道如何进行故障排除。

您能提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-02-07T01:52:15.107

我之前遇到过同样的问题，面临的问题是机器没有足够的资源来执行任务。

我增加了机器的内存，一切又开始工作了。

# objective-c - 在带有 ARC 的 Objective-C 中，当我定义一个块时编译器会做什么？

> ID：15089775
> 
> 赞同：0
> 
> 时间：2013-02-26T12:59:04.243
> 
> 标签：objective-c, automatic-ref-counting, block, heap-memory, stack-memory

编码：

```
__block int x = 0;
int *pointerToX = &x;
NSLog(@"x's location is on the stack: %p", &x);    //stack
int (^block)() = ^{
    x += 1;
    return x;
};
NSLog(@"x's location is on the %@: %p", (&x == pointerToX ? @"stack" : @"heap"), &x);  
block();
NSLog(@"x's location is on the %@: %p", (&x == pointerToX ? @"stack" : @"heap"), &x);   
block = [block copy];    
NSLog(@"x's location is on the %@: %p", (&x == pointerToX ? @"stack" : @"heap"), &x); 
```

在非弧

x 的位置在堆栈上：`0xbfffdba0`

x 的位置在堆栈上：`0xbfffdba0`

x 的位置在堆栈上：`0xbfffdba0`

x 的位置在堆上：`0x7195860`

在弧中：

x 的位置在堆栈上：`0xbfffdb70`

x 的位置在堆栈上：`0xbfffdb70`

x 的位置在堆栈上：`0xbfffdb70`

x 的位置在堆上：`0x7195860`

为什么要在 arc 和 non-arc 中获得不同的输出？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:04:17.100

请参阅 ARC 的[文档](http://clang.llvm.org/docs/AutomaticReferenceCounting.html#blocks)：

> [...] 当这些语义要求保留块指针类型的值时，它具有 Block_copy [...]

# jquery - jQuery将函数的范围仅限于目标元素

> ID：15089781
> 
> 赞同：0
> 
> 时间：2013-02-26T12:59:34.983
> 
> 标签：jquery, slidetoggle

下面的脚本是一个切换功能，附加到管理面板中的多个小部件。

```
jQuery(document).ready(function()
{
    jQuery(document).on('click','.toggleExtras', function(e){
        jQuery('.extras').slideToggle();
        jQuery(this).text(function(el, old){
            return old == "Show Advanced Options" ? "Hide Advanced Options" : "Show Advanced Options";
        });
    });

}); 
```

它工作得很好，但我需要解决一个问题。当我单击一个小部件的切换按钮时，它会触发具有相同类的所有小部件的功能。我正在寻找改变功能的建议，以便它只影响被点击的小部件。

由于小部件都是动态的，我不会提前知道触发元素父级的小部件 ID，但我可以使用 dom 将其传递给函数。

例如，这是一个典型的小部件。我已经在触发器元素处结束了代码。也许我可以将 dom 带回主容器元素（id=widget-43_my_box_cats-4），以便将 slideToggle() 限制为该元素的子元素？

HTML：

```
<div id="widget-43_my_box_cats-4" class="widget">   
    <div class="widget-top">
        <div class="widget-title-action"></div>
        <div class="widget-title"><h4>Widget Title<span class="in-widget-title"></span></h4></div>
    </div>

    <div class="widget-inside" style="display: block;">
        <form action="" method="post">
            <div class="widget-content">
                <p>
                    <label for="widget-my_box_cats-4-title">Title:</label>
                    <input class="widefat" id="widget-my_box_cats-4-title" name="widget-my_box_cats[4][title]" type="text" value="">
                </p>

                <fieldset><legend><span class="toggleExtras">Hide Advanced Options</span></legend> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:32:55.050

“功能（e）{”部分中的“e”具有哪些属性和对象？它应该有 e.target.id，所以：

```
jQuery(document).ready(function()
{
jQuery(document).on('click','.toggleExtras', function(e){
    jQuery('#'+e.target.id).slideToggle();
    jQuery(this).text(function(el, old){
        return old == "Show Advanced Options" ? "Hide Advanced Options" : "Show Advanced        Options";
     });
  });
}); 
```

# android - 在 SurfaceView 中设置图像背景，出现黑屏

> ID：15089784
> 
> 赞同：2
> 
> 时间：2013-02-26T12:59:38.593
> 
> 标签：android, image, background, surfaceview

好的，我试图将 SurfaceView 的背景设置为 JPG 文件。但它似乎不想绘制图像，我得到的只是黑屏。

这是我的代码：

```
 public class FloorplanActivity extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    MapView mapView = new MapView(getApplicationContext());
    setContentView(mapView);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.floorplan, menu);
    return true;
}

class MapView extends SurfaceView{

    Rect testRectangle1 = new Rect(0, 0, 50, 50);
    Bitmap scaled;
    int x;
    int y;

    public MapView(Context context) {
        super(context);

    }

    public void surfaceCreated(SurfaceHolder arg0){
        Bitmap background = BitmapFactory.decodeResource(getResources(), R.drawable.floorplan);
        float scale = (float)background.getHeight()/(float)getHeight();
        int newWidth = Math.round(background.getWidth()/scale);
        int newHeight = Math.round(background.getHeight()/scale);
        scaled = Bitmap.createScaledBitmap(background, newWidth, newHeight, true);
    }

 public void onDraw(Canvas canvas) {
        canvas.drawBitmap(scaled, 0, 0, null); // draw the background
    } 
```

不知道为什么它不会绘制我保存在 drawable-mdpi 文件夹中的“平面图”图像。

有人有什么建议吗？

谢谢。

编辑：使用断点进行一些调试后，似乎“缩放”变量由于某种原因变为“无穷大”，因此 newWidth 和 newHeight 变量变得小于 0 并且应用程序崩溃。

仅当我将整个 surfaceCreated 移动到构造函数中时，如果我将代码保持原样，那么除了显示黑屏之外它不会做任何事情。

不知道是什么原因导致它这样做......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T15:31:17.650

首先，您应该使用 MapView 类实现 SurfaceHolder.Callback 接口，并将其设置为其 SurfaceHolder 的回调，以使应用程序调用您的 onSurfaceCreated() 方法。其次，如果您希望调用 onDraw() 方法，请在 MapView 的构造函数中调用 setWillNotDraw(false)。

我已经这样做了：

```
public class MapView extends SurfaceView implements SurfaceHolder.Callback {

    private Bitmap scaled;

    public MapView(Context context, AttributeSet attrs) {
        super(context, attrs);
        setWillNotDraw(false);
        getHolder().addCallback(this);
    }

    public void onDraw(Canvas canvas) {
        canvas.drawBitmap(scaled, 0, 0, null); // draw the background
    }

    @Override
    public void surfaceCreated(SurfaceHolder arg0) {
        Bitmap background = BitmapFactory.decodeResource(getResources(), R.drawable.dr);
        float scale = (float) background.getHeight() / (float) getHeight();
        int newWidth = Math.round(background.getWidth() / scale);
        int newHeight = Math.round(background.getHeight() / scale);
        scaled = Bitmap.createScaledBitmap(background, newWidth, newHeight, true);
    }

    @Override
    public void surfaceChanged(SurfaceHolder holder, int format, int width, int height) {
        // TODO Callback method contents
    }

    @Override
    public void surfaceDestroyed(SurfaceHolder holder) {
        // TODO Callback method contents
    }
} 
```

而且效果很好。 **注意：**将 MapView 类移动到单独的 *.java 文件中。更新观看重复复制移动

# java - 从因服务器崩溃而停止的位置重新启动 Web 应用程序

> ID：15089785
> 
> 赞同：1
> 
> 时间：2013-02-26T12:59:42.650
> 
> 标签：java

我们已经实现了一个 Web 应用程序作为调度程序，它为配置的邮件列表发送电子邮件活动。它会一一处理联系人。如何恢复崩溃点以从停止的位置重新启动我的活动流程。

例如：我`emailIds`在邮件列表中配置了 100。处理 50 后`emailIds`，服务器关闭或发生崩溃。当我重新启动服务器时，它再次从 1st`emailId`而不是 51st开始`emailId`。

我们已经尝试了一些基于我们的应用程序逻辑的解决方案，但这会产生性能问题。有没有可以在服务器级别处理的通用解决方案？你能建议一些解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:02:43.867

例如，您可以将号码保存到文件中，并在处理完每封邮件后对其进行更新，并在启动时读取。但是你真正需要问自己的是为什么服务器会崩溃..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:08:07.690

尝试将电子邮件 ID 保存在文本文件中并一一阅读。据我所知，这是最好的方法。否则，将其存储到 XML 文件中并读取它。如果您使用的是 XML 解析器，它就没有那么重的重量，并且您的服务器可能不会被挂起。

# jquery - jQuery 函数只影响 3 个中的一个 img

> ID：15089787
> 
> 赞同：0
> 
> 时间：2013-02-26T12:59:48.313
> 
> 标签：jquery

这是我之前提出的一个问题的后续，但虽然现在大部分时间都在工作，但该函数将 3 张图像中的第一个作为它的引用`addClass()`而不是跟随`if / else`. 知道为什么吗？

图片 1 和 3 = 横向 - 正确添加`.heightDefine`

图片 2 = 纵向 - 错误地也添加`.heightDefine`而不是`.widthDefine`

```
jQuery.fn.galDisplay = function () {
    var galSingleImgH = this.height();
    var galSingleImgW = this.width();
    if(galSingleImgW > galSingleImgH){
        this.addClass('heightDefine');
    } else if(galSingleImgW < galSingleImgH){
        this.addClass('widthDefine');
    } 
}
jQuery('.notFirst img').galDisplay(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:16:36.710

jQuery 实际上会为您提供匹配元素`this`的集合，集合也是如此，而不是单个结果。

为了解决这个问题，使用迭代集合`each`：

```
jQuery.fn.galDisplay = function () {
    this.each(function () {
        var $self = $(this);
        var galSingleImgH = $self.height();
        var galSingleImgW = $self.width();
        alert(galSingleImgW + ' ' + galSingleImgH);
        if(galSingleImgW > galSingleImgH){
            $self.addClass('heightDefine');
        } else if(galSingleImgW < galSingleImgH){
            $self.addClass('widthDefine');
        } 
        // else it is square!
    });
}
jQuery('.notFirst img').galDisplay(); 
```

我要补充的唯一另一件事是，如果您依赖计算图像大小，则在加载图像之前您不想运行它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:06:19.403

您在整个集合上运行相同的功能，您需要在每个元素上运行 if/else：

```
jQuery.fn.galDisplay = function (){
    return this.each(function() {
        var galSingleImgH = $(this).height(),
            galSingleImgW = $(this).width();

        if (galSingleImgW > galSingleImgH) {
            $(this).addClass('heightDefine');
        } else if (galSingleImgW < galSingleImgH) {
            $(this).addClass('widthDefine');
        } 
    });
}

jQuery('.notFirst img').galDisplay(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:07:10.613

尝试

```
(function($)
{
    $.fn.galDisplay = function(params)
    {
        //params = $.extend( {minlength: 0, maxlength: 99999}, params);
        //above code extends options passed

        this.each(function()
        {
            var galSingleImgH = this.height();
            var galSingleImgW = this.width();
            if(galSingleImgW > galSingleImgH)
            {
               this.addClass('heightDefine');
            }
            else if(galSingleImgW < galSingleImgH)
            {
               this.addClass('widthDefine');
            } 
        });
        return this;
    };
})(jQuery); 
```

# xml - Metro风格应用程序中的xml文件格式

> ID：15089790
> 
> 赞同：0
> 
> 时间：2013-02-26T13:00:11.550
> 
> 标签：xml, winrt-xaml, .net-4.5

我想使用 Metro 风格应用程序（.Net Framework 4.5）在 XML 文件中写入一些数据。

这是我编写的代码，它工作正常，但问题是整个字符串是用单行而不是 XML 文本格式编写的。因此我无法正确阅读。每次我需要重新格式化新添加的数据以正确理解它。

这是我写的代码：

```
 Dim f As New FolderPicker
    f.SuggestedStartLocation = PickerLocationId.DocumentsLibrary
    f.ViewMode = PickerViewMode.Thumbnail
    f.FileTypeFilter.Add("*")
    Dim folder As StorageFolder = Await f.PickSingleFolderAsync

    Dim rootEle As XmlElement

    Dim file As StorageFile = Nothing

    file = Await folder.CreateFileAsync("demoXML.xml", CreationCollisionOption.ReplaceExisting)

    rootEle = doc.CreateElement("files_tbl")
    doc.AppendChild(rootEle)

    Dim ele As XmlElement
    ele = doc.CreateElement("files")
    rootEle.AppendChild(ele)

    Dim otherEle As XmlElement
    otherEle = doc.CreateElement("field-1")
    otherEle.InnerText = "data-1"
    ele.AppendChild(otherEle)

    otherEle = doc.CreateElement("field-2")
    otherEle.InnerText = "data-2"
    ele.AppendChild(otherEle)

    Await doc.SaveToFileAsync(file) 
```

如果我想要这样的输出：

```
<files_tbl>
    <files>
        <field-1>data-1</field-1>
        <field-2>data-2</field-2>
    </files>
</files_tbl> 
```

实际上我想使用那个 xml 文件作为我的数据库，因为我不想存储大量数据。我只需要存储文件的一些属性，例如文件名、扩展名、位置等。

可以使用xml文件作为数据库吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:06:57.233

您可以考虑将解决方案更改为使用`XDocument`而不是`XmlDocument`. 这是一种更新且对用户更友好的技术，它允许您在保存到文件或流时格式化输出。

检查MSDN 上的[`XDocument`类](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)和[`XDocument.Save()`方法](http://msdn.microsoft.com/en-us/library/bb338419.aspx)文档。

使其与 WinRT 使用[`OpenStreamForReadAsync`](http://msdn.microsoft.com/en-us/library/hh582102.aspx)和[`OpenStreamForWriteAsync`](http://msdn.microsoft.com/en-us/library/hh582147.aspx)方法一起工作。

# algorithm - Delphi时间图分割算法

> ID：15089792
> 
> 赞同：1
> 
> 时间：2013-02-26T13:00:14.640
> 
> 标签：algorithm, delphi, split

我在 ClientDataSet 中有 3 条记录的结构：

> 数字：整数；开始：TTime；结束：TTime；

```
1个；9:00；10:00
2；9点30分；10:00
3；9点40分；10:20

```

我必须像这样将这些记录传递给其他 ClientDataSet：

```
1个；9:00；9:30
2：9：30；9:40
3；9点40分；10:00
4；10:00；10:20

```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-26T14:56:52.197

使用`TList<TTime>`，用两列填充它，对其进行排序，然后遍历列表跳过重复项。像这样。

```
var l: TList<TTime>; t1, t2: TTime; id2: cardinal;
begin
  l := TList<TTime>.Create;
  try
    cds1.First;
    while not cds1.Eof do begin
       l.Add( Frac(cds1.Fields[1].AsDateTime) );
       l.Add( Frac(cds1.Fields[2].AsDateTime) );
       cds1.Next;   
    end;

    l.Sort;

    cds2.Clear;
    if l.Count <= 0 then exit;

    t1 := l[0]; id2 := 0;
    for t2 in l do begin
        if t1 > t2 then raise Exception.create ('Sort silently failed!') else
        if t1 < t2 then begin
           Inc(id2);
           cds2.AppendRecord([ id2, t1, t2 ]);
           t1 := t2;
        end;
    end;
  finally 
    l.Free;
  end;
end; 
```

# asp.net-mvc-4 - 使用 asp.net mvc4 和 ldap 进行单点登录

> ID：15089797
> 
> 赞同：1
> 
> 时间：2013-02-26T13:00:29.303
> 
> 标签：asp.net-mvc-4, active-directory, single-sign-on

我想在 asp.net 中创建一个使用 ldap 单点登录的 mvc4 应用程序。

因此，用户登录到 AD，然后转到 Web 应用程序。这个应用程序应该能够知道哪个用户正在访问，而无需再要求任何身份验证。应用程序应该能够知道来自 AD 的用户名。

谁能帮我解决这个问题或给我一个很好的解释？我真的不明白如何解决这个问题。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:12:21.970

您可以使用 Windows 身份验证。脚步：

1.  `Intranet Application`使用模板创建一个新的 ASP.NET MVC 应用程序
2.  阅读为您打开的文本文件，其中详细说明了配置 Web 服务器以启用 Windows 身份验证所需执行的操作
3.  部署您的应用程序并享受

为了完整起见，这是为您生成的文本文件：

> 要将此模板用于 Windows Azure 身份验证，请参阅 [http://go.microsoft.com/fwlink/?LinkID=267940](http://go.microsoft.com/fwlink/?LinkID=267940)。
> 
> 否则，要将此模板用于 Windows 身份验证，请参阅以下说明：
> 
> 在 IIS Express 上托管：
> 
> 1.  在解决方案资源管理器中单击您的项目以选择该项目。
> 2.  如果“属性”窗格未打开，请将其打开 (F4)。
> 3.  在项目的“属性”窗格中：
>     a) 将“匿名身份验证”设置为“禁用”。
>     b) 将“Windows 身份验证”设置为“启用”。
> 
> 在 IIS 7 或更高版本上托管：
> 
> 1.  打开 IIS 管理器并导航到您的网站。
> 2.  在功能视图中，双击身份验证。
> 3.  在身份验证页面上，选择 Windows 身份验证。如果 Windows 身份验证不是一个选项，您需要确保在服务器上安装了 Windows 身份验证。
>     
>     
>     
>     要在 Windows 上启用 Windows 身份验证：
>     
>     
>     
>     a) 在控制面板中打开“程序和功能”。
>     
>     
>     
>     b) 选择“打开或关闭 Windows 功能”。
>     
>     
>     
>     c) 导航到 Internet 信息服务 > 万维网服务 > 安全并确保选中 Windows 身份验证节点。
>     
>     
>     
>     要在 Windows Server 上启用 Windows 身份验证：
>     
>     
>     
>     a) 在服务器管理器中，选择 Web 服务器 (IIS) 并单击添加角色服务。
>     
>     
>     
>     b) 导航到 Web 服务器 > 安全并确保选中 Windows 身份验证节点。
>     
>     
> 4.  在“操作”窗格中，单击启用以使用 Windows 身份验证。
>     
>     
> 5.  在身份验证页面上，选择匿名身份验证。
> 6.  在“操作”窗格中，单击禁用以禁用匿名身份验证。

# ios - 如何在 iOS5 地图中的 2 个引脚之间获得转弯方向？

> ID：15089799
> 
> 赞同：0
> 
> 时间：2013-02-26T13:00:33.487
> 
> 标签：ios, maps, latitude-longitude

在我的应用程序中，我实现了地图。使用纬度和经度值丢弃了引脚。但我需要在 2 个引脚之间获得转弯方向。如何获得地图中 2 个引脚（注释）之间的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T13:56:12.810

请浏览 google maps api web 服务的文档。 [https://developers.google.com/maps/documentation/javascript/directions](https://developers.google.com/maps/documentation/javascript/directions)

里面一步步给的很清楚。他们甚至给出了一个你想要达到的例子 [https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-panel)

步骤： 1.创建一个UIWebView来显示地图。2\. 在文件夹名称“HTML”中创建一个名称为“maps.html”的 html 文件，并复制文档中给出的代码 3\. 通过
[WebView loadRequest:[NSURLRequest requestWithURL:[从您的 Objective-c 类调用 html 文件NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:@"maps" ofType:@"html" inDirectory:@"HTML"]]]];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:17:02.863

To draw path between two locations, [Finding Path/Route Between two points on MapKit in iPhone](https://stackoverflow.com/a/12002857/790794) will help you.

To retrive list of locations between given two 2 pins, you have to use google map api [http://maps.google.com/maps?output=dragdir&saddr=&daddr=](http://maps.google.com/maps?output=dragdir&saddr=&daddr=)

# android - Android App 中的授权服务

> ID：15089800
> 
> 赞同：0
> 
> 时间：2013-02-26T13:00:37.890
> 
> 标签：android, google-play, google-play-services

我已经构建了一个免费的 Android 应用程序，它在 Google Play 商店中运行。但有些地方我发现许可证服务应该集成到 Android 应用程序中（付费应用程序中的强制性）。由于我有一个免费的应用程序，所以现在我还没有在我的应用程序中使用许可证服务。但是由于这种混乱，我没有使用新的开发者控制台，因为当我从旧的开发者控制台设计迁移到新的开发者控制台设计时，我正在获得该应用程序的许可证密钥。那么是否有必要使用License Service?????????? 请解开我的疑惑。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:31:01.033

不，您不需要为免费应用程序使用此许可证，因为每个人都可以免费下载此文件，如果他有根，则用户没有理由不复制此应用程序。创建密钥是因为，如果您想使用它，您就可以。甚至不需要将它用于属于开发人员的付费应用程序。

# java - 通过spring控制器从jsp获取值

> ID：15089801
> 
> 赞同：0
> 
> 时间：2013-02-26T13:00:38.493
> 
> 标签：java, spring, jsp, spring-mvc

我已经通过创建 MVC 模板`Spring Tool Suite IDE`，但我不知道如何从`jsp`. 例如 - 我在`jsp`

```
<input type="text" /> 
```

但是如何让控制器的价值能够在那里使用呢？我知道，当我在控制器中为模型添加属性时，我可以通过 访问它`${name}`，但是如何以另一种方式进行呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-26T13:08:03.853

您需要一个表单，然后将值提交给控制器...

就像是 ：

```
<form name="foo" action="/foo/bar" method="post">
    <input name="fieldName" type="text" />
    <input type="submit" value="Submit">
<form> 
```

然后将其放入您的控制器中：

```
@Controller
@RequestMapping(value = "/foo")
public class AdminController {

    @RequestMapping(value = "/bar")
    public String testAction(@RequestParam String fieldName) {
        // yourValue contain the value post from the html form
        return "yourview";
    }
} 
```

# optimization - 两个纹理的非幂和内存消耗优化

> ID：15089802
> 
> 赞同：2
> 
> 时间：2013-02-26T13:00:45.783
> 
> 标签：optimization, memory-management, xna, textures

我在某处读到 XNA 框架将纹理放大到最接近的两倍大小，然后将其发送到 VRAM，如果它确实是这样工作的，那么在加载许多小（在我的情况下为 150×150）纹理时可能效率不高，这本质上是因为放大而导致未使用的纹理数据浪费内存。

那么是否有一些自动优化，或者我应该自己实现它，比如加载所有纹理，找出“升级”空间足够大以容纳其他纹理并将其放置在那里，记住精灵位置，因此使用一个纹理而不是两个（或更多）？

为每个纹理手动执行此操作并不总是很方便（将许多小精灵放在单个纹理中），因为以后很难使用（本质上它变得不那么以人为本），而且并不总是需要精灵某个级别的游戏，所以如果精灵在不同的组合中会更好，所以它应该自动完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T09:06:55.183

有一些工具可用于创建所谓的“精灵表”或“纹理图集”。[此 XNA 示例](http://xbox.create.msdn.com/en-US/education/catalog/sample/sprite_sheet)作为内容管道扩展的一部分为您执行此操作。

请注意，纹理的填充仅发生在不支持非二次幂纹理的设备上。例如，Windows 电话。现代 GPU 不会浪费内存。然而，这仍然是一个有用的优化，允许您合并批次的精灵（有关详细信息，请参阅[此答案](https://gamedev.stackexchange.com/questions/9277/optimizing-an-xna-2d-game)）。

# c - 在 strcat() 中编程段错误

> ID：15089804
> 
> 赞同：-2
> 
> 时间：2013-02-26T13:00:51.233
> 
> 标签：c, segmentation-fault, strcat

我正在尝试用 C 编写一个 Web 服务器，但我的代码目前出现了段错误，我不知道为什么。这似乎与我的 strcats 有关，但就我所能得到的而言。我已经发布了代码和 gdb 输出。任何帮助是极大的赞赏。

***********代码******* **********

 *****```
 /*  web-server.c    */

    #include <arpa/inet.h>
    #include <netdb.h>
    #include <sys/types.h>
    #include <sys/socket.h>
    #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>
    #include <unistd.h>

    #define BUFLEN 1500
    #define BACKLOG 10

    static int server_socket(int port) {
int fd;
struct sockaddr_in servaddr;

if ((fd = socket(AF_INET, SOCK_STREAM, 0)) == -1){
    perror("Unable to create socket");
    return -1;
}
printf("created socket\n");
servaddr.sin_family = AF_INET;
servaddr.sin_addr.s_addr = INADDR_ANY;
servaddr.sin_port = htons(port);

if (bind(fd, (struct sockaddr *)&servaddr, sizeof(servaddr)) == -1) {
    perror("Unable to bind to port");
    return -1;
}
printf("binding completed\n");
if (listen(fd, BACKLOG) == -1){
    perror("Unable to listen for connections");
    return -1;
}
printf("socket setup\n");
return fd;

    }

    static char *html_request(char *request) {
char request_code[3], url[BUFLEN], http_code[BUFLEN];
printf(request);
printf("\n");
sscanf(request, "%3s %s %s", request_code, url, http_code);
return url;
    }

    int main() {
int connfd, servfd, rlen, i, eof;
int content_length = 0;
char buf[BUFLEN];
struct sockaddr_in saddr;
char *response;
char *read_buffer = malloc(1);
    char *response200 = "HTTP/1.1 200 OK\nContent-Type: text/html\nConnection: close\nConnection-Length: ";
char *response404 = "HTTP/1.1 404 Not Found\nContent-Type: text/html\nConnection: close\nConnection-Length: ";
FILE *in;
char buffer[1500], content_buffer[5];
char *headers = malloc(BUFLEN);
char *output = malloc(BUFLEN);
socklen_t saddr_len = sizeof(saddr);
servfd = server_socket(8080);
printf("before connection\n");
if ((connfd = accept(servfd, (struct sockaddr *)&saddr, &saddr_len)) == -1) {
    perror("Unable to accept connection");
    return -1;
}
else {
printf("Accept connection\n");

}
if ((rlen = read(connfd, buf, BUFLEN)) > 0) {
    realloc(read_buffer,rlen);
    for (i = 0; i < rlen; i++){
        printf("%c", buf[i]);
        read_buffer[i] = buf[i];
    }
    printf("\n");

}
printf("IMMA BEAST!\n");
response = html_request(read_buffer);
printf(response);

if (strcmp(response, "/index.html") == 0){
    printf("\nMatches!");
    in = fopen("index.txt", "r");
    if (in == NULL){
        printf("Read fail!");
    }
    while ((eof = fread(buffer, 1, 296, in )) > 0){
        content_length = content_length + 1;
    }
    snprintf(content_buffer, 5, "%d" ,content_length);
    headers = strcat(response200, content_buffer);
}
else{
    printf("\nFails!");
    in = fopen("index-error.txt", "r");
    if (in == NULL){
        printf("Read fail!");
    }
    while ((eof = fread(buffer, 1, 300, in )) > 0){
        content_length = content_length + 1;
    }
    snprintf(content_buffer, 5, "%d" ,content_length);
    headers = strcat(response404, content_buffer);
}
fclose(in);
output = strcat(headers, buffer);
write(connfd, output, BUFLEN);
close(connfd);
free(read_buffer);
free(headers);
free(output);

return 0; 
```

}

***** GDB 输出*******

 **```
Program received signal SIGSEGV, Segmentation fault.
0x0000003d4647eff0 in strcat () from /lib64/libc.so.6
(gdb) where
#0  0x0000003d4647eff0 in strcat () from /lib64/libc.so.6
#1  0x0000000000400ecd in main ()
(gdb) n
Single stepping until exit from function strcat,
which has no line number information.

Program terminated with signal SIGSEGV, Segmentation fault.
The program no longer exists. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-26T13:03:21.320

这根本不行：

```
strcat("HTTP/1.1 404 Not Found\nContent-Type: text/html\nConnection: close\nConnection-Length: ", content_buffer); 
```

`strcat()`将第二个参数附加到第一个参数。第一个参数是一个文字字符串，绝对不能修改。C 允许它编译的唯一原因是一个不幸的事实，即旧代码依赖于类型的文字字符串`char[]`而不是`const char[]`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:07:44.910

[http://www.manpagez.com/man/3/strcat/](http://www.manpagez.com/man/3/strcat/)

您必须使用正确的大小（第一个字符串的长度 + 第二个字符串的长度 + 1.

[http://www.manpagez.com/man/3/malloc/](http://www.manpagez.com/man/3/malloc/)

就像是：

```
char *str;
int len = (strlen("HTTP/1.1 200 OK\nContent-Type: text/html\nConnection: close\nConnection-Length: ") + strlen(content_buffer));

str = malloc((len + 1) * sizeof(char));
bzero(str, len);
strcpy(str, "HTTP/1.1 200 OK\nContent-Type: text/html\nConnection: close\nConnection-Length: ");
strcat(str, content_buffer);
str[len] = 0; 
```*******

# css - 与浏览器显示的差异

> ID：15089805
> 
> 赞同：0
> 
> 时间：2013-02-26T13:01:02.237
> 
> 标签：css, google-chrome, firefox

我已经让我的网站完全支持 Google Chrome 而不是 Firefox 或 IE。打电话给我，因为现在我发现这不是很聪明：我的网站在 Firefox 上看起来完全不同。

没有太大的差异，但是很多项目错位了几个像素。这听起来并没有那么糟糕，但确实如此。例如，这是 Chrome 显示页面的方式（看红色按钮）：[http](http://d.pr/i/YNha) ://d.pr/i/YNha和这个：[http](http://d.pr/i/8YZO) ://d.pr/i/8YZO是 Firefox 显示页面的方式。如您所见，图像的位置存在一些差异。

我真的不知道是什么原因造成的，我已经在网上搜索过类似的问题，但没有找到任何解决方案。

这是用于图像的 CSS：

```
.img (
margin-top: -130px;
margin-left: 520px;
} 
```

任何帮助，将不胜感激。

**更新** HTML 和 CSS：

```
 <div style="background-image: url(http://linehotel.org/c_images/veiling_item.png);                    height: 401px; border-radius: 10px;">

    <div style="color: white; padding: 12px;">
    <center><img src="/c_images/veiling_teas.gif" /></center>

    <img src="/c_images/bod_teas.gif" /><br>
    <h1>
    <div style="z-index:1;width: 64px; height: 96px; float: left; margin-top: -25px; background: url(http://habbo.it/habbo-imaging/avatarimage?figure=sh-295-85.hr-802-31.ch-3015-82.hd-180-2.lg-275-92&amp;gesture=sml&amp;size=b&amp;img_format=gif);"></div>
    Xice:                <br>0 credits</h1>
    <a href="/bied-mee"><img src="/c_images/closed.png" style="margin-top: -130px; margin-left: 520px;" /></a>
    </div>
    </div>
    <meta http-equiv="refresh" content="5;URL='/veiling'">
    <center><font size="1px"><i>De pagina update in real-time. Je hoeft zelf niet de pagina te herladen.</font></i></center> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-26T13:11:52.287

由于缺乏信息，这不是确定的，但这是我的答案。

浏览器对边距、填充和其他 css 样式使用不同的默认值。为了帮助您的网站在每个浏览器中呈现相同的效果，您可以尝试使用 reset css。这是一个例子，

```
* {
    padding: 0px;
    margin: 0px;
    font-size: 12px;
    font-family: "Trebuchet MS"
} 
```

这将为屏幕上的每个元素设置值，有效地忽略任何浏览器默认值。然后任何类和内联样式依次覆盖这些。

有关更多扩展的重置样式，请查看此处，[http://www.cssreset.com/](http://www.cssreset.com/)

# java - Java Web 服务 - 何时使用 XmlAttribute？

> ID：15089811
> 
> 赞同：1
> 
> 时间：2013-02-26T13:01:18.633
> 
> 标签：java, jakarta-ee, wsdl, jax-ws, marshalling

有一个带有类似字段的光环类：

```
private String description;   // a lot of text
private long price;
private int count; 
```

.. 我发现 for `price`and`count` `@XmlAttribute`被使用，但不是`description`. 为什么？

有什么区别以及它们如何/在哪里存储？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:07:42.660

[IBM 网站](http://www.ibm.com/developerworks/library/x-eleatt/index.html)上非常好的文章

> 如果有问题的信息本身可以用元素标记，请将其放入元素中。
> 
> 如果信息适用于属性形式，但最终可能成为同一元素上的多个同名属性，请改用子元素。
> 
> 如果要求信息采用标准的类似 DTD 的属性类型，例如 ID、IDREF 或 ENTITY，请使用属性。
> 
> 如果不应针对空白对信息进行规范化，请使用元素。（XML 处理器以可以更改属性值的原始文本的方式对属性进行规范化。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:30:26.137

XmlElement 和@XmlAttribute 都是非常自记录的。

@XmlElement 将被序列化为一个 Xml 元素（当前节点的子节点）

@XmlAttribute 将被序列化为 Xml 属性。

关于何时选择其中一个，knowbody 的答案非常清楚。

所以在你的例子中，你应该得到类似的东西

```
<halo price="..." count="..." >
    <description>...</description>
</halo> 
```

# multithreading - 使用 MPI 发送 3D 数组的部分

> ID：15089822
> 
> 赞同：0
> 
> 时间：2013-02-26T13:01:54.163
> 
> 标签：multithreading, mpi, openmpi

我有以下 3D 数组。

```
U[Timesteps][X][Y] 
```

有范围

```
Timesteps ( 0 to 100)
X ( 0 to 480)
Y ( 0 to 480) 
```

我需要在节点之间拆分数组发送以使用 MPI 进行处理。

我想像下面这样拆分

进程（节点 0）应该得到

```
U[Timesteps][X][Y] 
```

有范围

```
Timesteps ( 0 to 100)
X ( 0 to 200)
Y ( 0 to 200) 
```

和进程（节点1）应该得到

```
U[Timesteps][X][Y] 
```

有范围

```
Timesteps ( 0 to 100)
X ( 201 to 480)
Y ( 201 to 480) 
```

同样，我可以拆分为在运行时可用的尽可能多的节点。（即用完整时间步在 x 和 Y 上分割）

任何人都可以帮助示例 MPI 代码..我对 MPI 的派生数据类型的使用感到困惑以满足我的要求。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T21:43:44.110

经过一些 MPI 教程后，我了解了如何发送 3D 数组。我们需要使用 MPI_TYPE_INDEXED 派生数据类型

# log4j - 使用 log4j 的 Web 应用程序记录了大量严重的错误消息

> ID：15089823
> 
> 赞同：0
> 
> 时间：2013-02-26T13:01:57.233
> 
> 标签：log4j, glassfish-3

我编写了一个使用内部使用 log4j 的库（Jabber 流对象）的应用程序。当我部署应用程序时，没有错误。但是过了一段时间，我可以看到很多如下所示的错误消息：

```
[#|2013-02-26T12:48:56.147+0000|SEVERE|oracle-glassfish3.1.2|javax.enterprise.system.std.com.sun.enterprise.server.logging|_ThreadID=365;_ThreadName=SelectWorker 1;|java.lang.IllegalStateException: WEB9031: WebappClassLoader unable to load resource [org.apache.log4j.spi.NOPLoggerRepository], because it has not yet been started, or was already stopped
        at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1401)
        at org.glassfish.web.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1359)
        at org.apache.log4j.LogManager.getLoggerRepository(LogManager.java:197)
        at org.apache.log4j.LogManager.getLogger(LogManager.java:228)
        at org.apache.log4j.Logger.getLogger(Logger.java:117) 
```

我的应用程序的 WEB-INF/lib 目录中有 log4j.jar 以及外部库 (JSO.jar)

问题 [1] 看起来很相似，但似乎并不相同。

[1] [Web 服务无法在 GlassFish 上运行](https://stackoverflow.com/questions/12913168/web-service-is-not-working-on-glassfish)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-01T06:50:38.913

我发现当我重新部署一个 Servlet 时会发生这种情况，当我为我的 Servlet 覆盖 destroy() 并在那里进行一些清理时就消失了。

# java - JTable 渲染 JPanel

> ID：15089824
> 
> 赞同：3
> 
> 时间：2013-02-26T13:01:59.820
> 
> 标签：java, swing, jtable

我有一列`JTable`我设置了一个自定义，在其方法`TableCellRenderer`中返回一个自定义。`JPanel``getTableCellRendererComponent`

自定义`JPanel`包含几个`JTextField`并且`JButton`只有一个自定义实例`JPanel`被创建，并且在`getTableCellRendererComponent`方法中我只是`JTextField`从数据模型对象设置它的值。

为了使`JTextFiel`可编辑和`JButton`可点击，我必须将`isCellEditable`方法从`JTable`模型设置为 true，并创建一个实现为 true 的类`TableCellEditor`，`isCellEditable`并使用它设置我的默认单元格编辑器`JTable`。

单击自定义的某些按钮时，我想获得表格选定的行`JPanel`，但它总是返回-1。如果我将 ListSelectionListener 添加到 JTable 中，则在连续单击时甚至不会调用 valueChanged 方法。如果我删除单元格编辑器，它工作正常。如果将单元格编辑器添加到中，为什么`ListSelectionListener`不起作用`JTable`，为什么我需要提供单元格编辑器？模型中的 isCellEditable`JTable`还不够吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:18:52.310

以 SSCCE 为例

```
import java.awt.*;
import java.awt.event.*;
import java.util.EventObject;
import javax.swing.*;
import javax.swing.table.*;

public class PanelInTable {

    private JFrame frame;
    private JTable CompTable = null;
    private PanelTableModel CompModel = null;
    private JButton addButton = null;

    public static void main(String args[]) {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
            //UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
        } catch (Exception fail) {
        }
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                new PanelInTable().makeUI();
            }
        });
    }

    public void makeUI() {
        CompTable = CreateCompTable();
        JScrollPane CompTableScrollpane = new JScrollPane(CompTable, JScrollPane.VERTICAL_SCROLLBAR_AS_NEEDED,
                JScrollPane.HORIZONTAL_SCROLLBAR_NEVER);
        JPanel bottomPanel = CreateBottomPanel();
        frame = new JFrame("Comp Table Test");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(CompTableScrollpane, BorderLayout.CENTER);
        frame.add(bottomPanel, BorderLayout.SOUTH);
        frame.setPreferredSize(new Dimension(800, 400));
        frame.setLocation(150, 150);
        frame.pack();
        frame.setVisible(true);
    }

    public JTable CreateCompTable() {
        CompModel = new PanelTableModel();
        CompModel.addRow();
        JTable table = new JTable(CompModel);
        table.setRowHeight(new CompCellPanel().getPreferredSize().height);
        table.setTableHeader(null);
        PanelCellEditorRenderer PanelCellEditorRenderer = new PanelCellEditorRenderer();
        table.setDefaultRenderer(Object.class, PanelCellEditorRenderer);
        table.setDefaultEditor(Object.class, PanelCellEditorRenderer);
        return table;
    }

    public JPanel CreateBottomPanel() {
        addButton = new JButton("Add Comp");
        addButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent ae) {
                Object source = ae.getSource();
                if (source == addButton) {
                    CompModel.addRow();
                }
            }
        });
        JPanel panel = new JPanel(new GridBagLayout());
        panel.add(addButton);
        return panel;
    }
}

class PanelCellEditorRenderer extends AbstractCellEditor implements TableCellRenderer, TableCellEditor {

    private static final long serialVersionUID = 1L;
    private CompCellPanel renderer = new CompCellPanel();
    private CompCellPanel editor = new CompCellPanel();

    @Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        renderer.setComp((Comp) value);
        return renderer;
    }

    @Override
    public Component getTableCellEditorComponent(JTable table, Object value, boolean isSelected, int row, int column) {
        editor.setComp((Comp) value);
        return editor;
    }

    @Override
    public Object getCellEditorValue() {
        return editor.getComp();
    }

    @Override
    public boolean isCellEditable(EventObject anEvent) {
        return true;
    }

    @Override
    public boolean shouldSelectCell(EventObject anEvent) {
        return false;
    }
}

class PanelTableModel extends DefaultTableModel {

    private static final long serialVersionUID = 1L;

    @Override
    public int getColumnCount() {
        return 1;
    }

    public void addRow() {
        super.addRow(new Object[]{new Comp(0, 0, "", "")});
    }
}

class Comp {

    public int type;
    public int relation;
    public String lower;
    public String upper;

    public Comp(int type, int relation, String lower, String upper) {
        this.type = type;
        this.relation = relation;
        this.lower = lower;
        this.upper = upper;
    }
}

class CompCellPanel extends JPanel {

    private static final long serialVersionUID = 1L;
    private JLabel labelWith = new JLabel("With ");
    private JComboBox typeCombo = new JComboBox(new Object[]{"height", "length", "volume"});
    private JComboBox relationCombo = new JComboBox(new Object[]{"above", "below", "between"});
    private JTextField lowerField = new JTextField();
    private JLabel labelAnd = new JLabel(" and ");
    private JTextField upperField = new JTextField();
    private JButton removeButton = new JButton("remove");

    CompCellPanel() {
        setLayout(new BoxLayout(this, BoxLayout.X_AXIS));
        relationCombo.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                enableUpper(relationCombo.getSelectedIndex() == 2);
            }
        });
        enableUpper(false);
        removeButton.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                JTable table = (JTable) SwingUtilities.getAncestorOfClass(JTable.class, (Component) e.getSource());
                int row = table.getEditingRow();
                table.getCellEditor().stopCellEditing();
                ((DefaultTableModel) table.getModel()).removeRow(row);
            }
        });
        add(labelWith);
        add(typeCombo);
        add(relationCombo);
        add(lowerField);
        add(labelAnd);
        add(upperField);
        add(Box.createHorizontalStrut(100));
        add(removeButton);
    }

    private void enableUpper(boolean enable) {
        labelAnd.setEnabled(enable);
        upperField.setEnabled(enable);
    }

    public void setComp(Comp Comp) {
        typeCombo.setSelectedIndex(Comp.type);
        relationCombo.setSelectedIndex(Comp.relation);
        lowerField.setText(Comp.lower);
        upperField.setText(Comp.upper);
        enableUpper(Comp.relation == 2);
    }

    public Comp getComp() {
        return new Comp(typeCombo.getSelectedIndex(), relationCombo.getSelectedIndex(), lowerField.getText(), upperField.getText());
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-26T13:27:15.420

为什么需要在编辑器中选择单元格？

您知道当前正在编辑的行和列还不够吗？

如果是，那么只需将它们设置在您设置编辑器值的位置。

```
@Override
    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
        renderer.setComp((Comp) value, row, column );
        return renderer;
    } 
```

# android - Android 下载文件 - 尚未完成的 Stream 问题

> ID：15089829
> 
> 赞同：0
> 
> 时间：2013-02-26T13:02:14.653
> 
> 标签：android, android-download-manager

我从服务器下载文件，有些大，有些小。

```
protected Long doInBackground(Object... params) {
        Context context = (Context) params[0];
        String name = (String) params[1];
        String urlString = (String) params[2];
        File mediadir = context.getDir("tvr", Context.MODE_PRIVATE);
        try {
            URL url = new URL(urlString);
            URLConnection connection = url.openConnection();
            connection.connect();
            int lenghtOfFile = connection.getContentLength();
            InputStream is = url.openStream();
            Log.d("DOWNLOAD NAME",name);
            File new_file = new File(mediadir, name);
            FileOutputStream fos = new FileOutputStream(new_file.getPath());
            byte data[] = new byte[1024];
            int count = 0;
            long total = 0;
            int progress = 0;
            while ((count=is.read(data)) != -1){
                total += count;
                int progress_temp = (int)total*100/lenghtOfFile;
                if(progress_temp%10 == 0 && progress != progress_temp){
                    progress = progress_temp;
                }
                fos.write(data, 0, count);
            }
            is.close();
            fos.close();
        } catch (Exception e) {
            // TODO Auto-generated catch block
            Log.e("DOWNLOAD ERROR", e.toString());
        }
        return null;
    } 
```

据我所知，我通过流下载文件并将数据流式传输到文件中。所以实际上文件是从第一个数据字节开始创建的。

现在，另一方面，我通过在目录中查找文件然后播放它们来播放内部目录中的文件：

```
mediaPlayer = new MediaPlayer();
mediaPlayer.setOnCompletionListener(this);
mediaPlayer.setDisplay(holder);
FileInputStream fileInputStream = new FileInputStream(path);
mediaPlayer.setDataSource(fileInputStream.getFD());
fileInputStream.close();
mediaPlayer.prepare();
mediaPlayer.start(); 
```

现在这个问题是即使文件没有完全下载也会播放文件！

这是真的？如果是这样，在尝试播放之前我必须如何检查文件是否完整？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:19:05.200

Yes, this is a valid scenario, as in many cases your download speed will be slower than the reading and playing speed of the `MediaPlayer`.

Seeing as you're using an AsyncTask, you can fix this problem by calling the playing code in the `onPostExecute()` method, as that only runs after all work in the `doInBackground()` method has completed.

# android - 网站作为跨平台移动应用程序？

> ID：15089832
> 
> 赞同：0
> 
> 时间：2013-02-26T13:02:35.020
> 
> 标签：android, iphone, html, windows-phone-7, web-applications

我正在尝试为 iPhone、WindowsPhone 和 Android 开发跨平台社交网络移动应用程序。我有网络开发的背景，所以我想知道是否有可能在用户启动应用程序时制作一个网络应用程序并使用手机加载网站（使用 Android 中的 WebView 之类的东西）。

我是移动应用程序开发的新手，所以我不确定这是否有可能。因为，如果是这样，我肯定会想在所有三个平台上制作 web-loader 类型的应用程序，并在用户启动应用程序时让它们加载 web。

我想知道这是否可能。或者有人尝试过类似的东西。

编辑后添加：我知道有很多框架用于此目的，但我不可能学习它们来实现这一点。这是一个学术项目，我想尽快完成。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:06:55.507

试试[Sencha Touch](http://www.sencha.com/products/touch)，使用 sencha touch，您可以建立一个网站，它支持多个移动平台，或者建立一个响应式设计的网站。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:07:53.693

是的，有可能。只需添加一个 webview 并瞧：P 看看 Android 中的旧 facebook 应用程序，或 memondo 应用程序......它们都基于 WebView。

它的主要问题是**你的应用程序会很糟糕**，因为即使你做对了它也会看起来像一个网站。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:06:40.570

是的，一个应用程序可以启动一个网站，但问题是用户为什么要下载和安装一个只指向一个网站的应用程序？

如果您使网站具有响应性，则首先不需要应用程序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:07:37.880

有很多解决方案，其中一个流行且易于使用的解决方案是[PhoneGap](http://phonegap.com/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T13:15:02.123

Sencha touch 对于 Web 开发人员来说很容易学习，因为它主要包含 Web 开发的概念。所以我应该说使用 Sencha Touch

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T14:28:23.130

我认为最好的方法之一是开发一个 HTML5/CSS3 网络应用程序/站点（可能使用 jQuery Mobile）并使用 PhoneGap 编译它以生成本机应用程序。

# jqgrid - 如何将另一个节点内的xml节点的属性映射到jqgrid中的列

> ID：15089834
> 
> 赞同：2
> 
> 时间：2013-02-26T13:02:40.683
> 
> 标签：jqgrid, xml-parsing

下面是我想映射到 jqGrid 中的列的 XML：

```
<ProtoRequestInfo NPO = "102922">
    <ProtoRequest
        No = "84P6-11-00002"
        Requestor = "Daniel Frank(E677648)"
        CustomerName = "TLV BMW"
        CustomerOrder = ""
        MWO = "4601302"
        PartNumber = "813818-0003"
        ProductType = "CHRA"
        CreationDate = "12-May-2011"
        ABCClasification = "B - Durability testing / Production supplier-soft tooling"
        ProtoStatus = "Closed"
        UsageType = "Assembly Request"
        BOMAvailabilityDate = "13-May-2011"
        BOMCommitedDate = ""
        Technology = "VNT Step3 REA"
        Plant = "84P6-Thaon Les Vosges"
        EstimatedBudget_USD = "0.00">
        <Production
            No = "102219281"
            Status = "Closed"
            SalesOrder = ""
            <RequestedDeliveryDetails Date = "01-Aug-2011" Quantity = "48"/>
            <AgreedDetails Date = "29-Sep-2011" Quantity = "48"/>
            <EstimatedDetails Date = "24-Aug-2011" Quantity = "47.0"/>
            <EstimatedDetails Date = "20-Sep-2011" Quantity = "1.0"/>
            <Info>No Qty Shipped</Info>
        </Production>
    </ProtoRequest>
</ProtoRequestInfo> 
```

colmodel 应该如何将以下内容映射到列中？

1.  生产标签下的销售订单
2.  请求的交付详细信息标签下的日期
3.  请求的交货详细信息标签下的数量

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:15:47.933

`xmlmap`您可以为 columns指定属性`SalesOrder`，`Date`并`Quantity`定义`xmlmap`为函数。该函数将获取主要元素（我不确定`<ProtoRequestInfo>`或`<ProtoRequest>`）作为参数。您可以在其中获取所需的属性`xmlmap`并从函数中返回它`xmlmap`。

[您可以在答案](https://stackoverflow.com/a/9292097/315935)中找到使用 XML 属性的示例（请参阅[演示](http://www.ok-soft-gmbh.com/jqGrid/XmlWithAttributes.htm)）。

**UPDATED**: [The demo](http://www.ok-soft-gmbh.com/jqGrid/ReadAttrFromXml.htm) shows how to read XML data in the format which you posted. The results are like on the picture below

![enter image description here](../Images/115060b636d366ca88be67fd2449ed0d.png)

I used the following code in the demo:

```
$("#list").jqGrid({
    datatype: "xml",
    url: "ReadAttrFromXml.xml",
    gridview: true,
    autoencode: true,
    height: "auto",
    rowNum: 10000, // no local paging
    colModel: [
        {name: "No", xmlmap: function (obj) {
            return $(obj).attr("No");
        }},
        {name: "Requestor", width: 130, xmlmap: function (obj) {
            return $(obj).attr("Requestor");
        }},
        {name: "CustomerName", width: 120, xmlmap: function (obj) {
            return $(obj).attr("CustomerName");
        }},
        {name: "SalesOrder", xmlmap: function (obj) {
            return $(obj).find(">Production").attr("SalesOrder");
        }},
        {name: "Date", formatter: "date", formatoptions: {srcformat: "d-M-Y"}, align: "center",
            sorttype: "date",
            xmlmap: function (obj) {
                return $(obj).find(">Production>RequestedDeliveryDetails").attr("Date");
            }},
        {name: "Quantity", formatter: "integer", sorttype: "integer", align: "right",
            xmlmap: function (obj) {
                return $(obj).find(">Production>RequestedDeliveryDetails").attr("Quantity");
            }}
    ],
    cmTemplate: {width: 100},
    xmlReader: {
        root: "ProtoRequestInfo",
        row: "ProtoRequest",
        repeatitems: false,
        id: "[No]"
    }
}); 
```

The most important are implementations of `xmlmap` functions and `xmlReader`.

# canvas - fabric.js ...如何使画布居中

> ID：15089839
> 
> 赞同：9
> 
> 时间：2013-02-26T13:02:50.953
> 
> 标签：canvas, fabricjs

fabricjs 将转换：

```
//  this DOM structure
<div id="wrapper">
  <canvas id="c"></canvas>
</div>

//  to this:
<div id="wrapper">
  <div class="canvas-container">
    <canvas class="upper-canvas"></canvas>
    <canvas class="lower-canvas" id="c"></canvas>
  </div>
</div> 
```

...看到[这个解释](https://github.com/kangax/fabric.js/wiki/How-fabric-canvas-layering-works)

由于fabric js包装画布元素的方式，如何保持画布水平居中。

这是类似的[问题](https://stackoverflow.com/questions/9261918/canvas-loses-style-when-i-create-fabricjs-canvas-object)。这是一个[小提琴测试](http://jsfiddle.net/8AB3D/33/)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-26T14:17:15.350

申请

```
margin: 0 auto; 
```

到类 = 画布容器

canvas-container 是由 fabric 自动创建的。

见[小提琴](http://jsfiddle.net/8AB3D/34/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-14T06:58:58.683

如果您使用的是 Angular，请使用项目的**通用样式表**（而不是组件样式表）来提供 @dsdsdsdsd 描述的 css 规则`.canvas-container {your styles..}`。否则您的样式可能不适用。

# iphone - uitableview 中返回的单元格数

> ID：15089849
> 
> 赞同：0
> 
> 时间：2013-02-26T13:03:27.367
> 
> 标签：iphone, ios, uitableview

如果我们在 numberOfRowsInSection 中返回 100 就像

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
     return 100;
 } 
```

那么在方法中一次将创建多少个单元格`cellForRowAtIndexPath`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:15:34.190

实际上它不会分配所有 100 个单元格。取而代之的是目前可见的那些。当我们使用`[tableView dequeueReusableCellWithIdentifier:cellIdentifier];`时，单元被重用于内存处理。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 
```

只返回单元格的总数。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

每次滚动表格视图时都会调用此方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:07:17.967

如果您要问该方法将被调用多少次`-tableView:cellForRowAtIndexPath:`，答案是它会被调用，因为目前可见的单元格是多少。当您滚动时，将为即将显示的每个新单元格调用它。它怎么知道现在有多少个细胞是可见的？`-tableView:heightForRowAtIndexPath:`为每个单元格调用 以计算表格视图的 contentSize 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:14:35.433

单元格的数量返回其基于`UITableView`高度的基础。表示第一次返回单元格显示的数量。`tableView:cellForRowAtIndexPath`方法只调用可见单元格，而不是调用不可见单元格`UITableView`。如果您滚动然后`tableView:cellForRowAtIndexPath`重用以前的不可见单元格而不是创建新的单元格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:49:08.017

同意@pbibergal，如果您使用 dequeueReusableCellWithIdentifier 并设置如下条件，则一次创建大约九 (9) 个单元格（单元格数量取决于 tableview 高度）。否则系统一次创建 100 个单元。

```
TableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell==nil) {
        cell = [[MainCustomCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    } 
```

如果您使用上面的代码，那么一次创建一个时间有限的单元格（九个单元格），否则一次创建 100 个单元格并且它在内存中受到影响。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T13:06:55.897

这取决于您的细胞类型。如果您设置 dequeueReusableCellWithIdentifier，那么它只会初始化您在屏幕上看到的内容，当您滚动时，它将向下滚动到您在上述方法中设置的行数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T13:09:07.337

它将分配所有 100 个`Cells`，但一次只可见，`Cells`这将根据

```
- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath 
```

的高度`Cell`和宽度`UITableView` `Frame`

# javascript - cusel.js Uncaught TypeError: Cannot use 'in' operator to search 'using' in #

> ID：15089852
> 
> 赞同：0
> 
> 时间：2013-02-26T13:03:50.380
> 
> 标签：javascript, jquery, html

我尝试在我的选择上使用 cusel.js（样式化选择）库，但它不起作用 - 选择正在改变，但是当我尝试在 JavaScript 控制台中使用用于由 Cusel 滚动的 jscrollpane 滚动选择选项时我看到我不知道的错误：

```
Uncaught TypeError: Cannot use 'in' operator to search for 'using' 
in #<error> (file jquery.js, line 9217). 
```

我的库版本：

```
Jquery v1.7.2
cusel version 2.5
jquery.jscrollpane.js - tried all versions of this library, still does not work.
jquery.mousewheel.js - tried all possible versions, still does not work. 
```

有我的调用代码`cuSel`：

```
jQuery(document).ready(function(){
    var params = {
        changedEl: ".lineForm select",
        visRows:7,                
    }
    cuSel(params);
}); 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T08:13:37.907

[您可以从这里](https://gist.github.com/biakaveron/4023162)替换 cusel 插件的代码， 这里修复了 bug，插件适用于 jquery v1.7+

# sql - sql server 过程不返回数据

> ID：15089854
> 
> 赞同：2
> 
> 时间：2013-02-26T13:03:52.907
> 
> 标签：sql, sql-server-2008, function, stored-procedures

我的 Sql 程序运行良好。但是当我从 Class 调用它时，它不会返回数据。我得到了这个错误。`Column 'Territory_Name' does not belong to table .`我调试了代码，发现所有参数都正确传递了，但是程序没有返回任何数据。如果有人有想法，请帮助我。

![在此处输入图像描述](../Images/edd8f374fd416b6ba5fd4b454621eac3.png) ![在此处输入图像描述](../Images/708682c5b7ad7601b81791507d49f217.png)

我的存储过程是：

```
ALTER PROCEDURE dbo.SPFilterCRMRequests
(
    /* for Time Span */
    @WeekList varchar(50) = null,
    @MonthList varchar(50) = null,
    @YearList varchar(50) = null,
    @QuaterList varchar(50) = null,
    /* for other specific criteria */
    @PriorityList varchar(50) = null,
    @Division_IdList varchar(50) = null,
    @CRM_Service_Type_IdList varchar(50) = null,
    @CRM_Notation_IdList varchar(50) = null,
    @CRM_State_IdList varchar(50) = null,
    @Service_State_IdList varchar(50) = null,
    @Estimated_Amount float

    /* for Designation 
    @Requester varchar(20),
    @Suggester varchar(20) */
)
AS
    SET NOCOUNT ON 
    /*Declare @date3 DateTime = CONVERT(date,'2/8/2013 5:17:00 PM')*/
    DECLARE @sql nvarchar(4000)

    SELECT @sql='SELECT
    CRMDR.Id as Id,  
    LEFT(GEOTREE.GEONAME,15) as Territory_Name,  
    CRMDR.Request_For_Id as Request_For_Id, 
    DRMST.DRNAME as Request_For_Name, 
    USERSTBM.USERNAME as Requester_Name,
    Division.Div_Name as Division_Name,
    USERSABM.USERNAME as Suggester_Name,
    CRMDR.Estimated_Amount as Estimated_Amount, 
    CRMDR.Actual_Amount as Actual_Amount, 
    CRMDR.Compute_Priority as Compute_Priority, 
    CRMNotation.Notation_Name as CRM_Notation_Name,
    CRMServiceType.ServiceName as CRM_Service_Type_Name, 
    CRMDR.Deadline as Deadline, 
    CRMDR.Executed_Date as Executed_Date, 
    CRMDR.Date_Created as Date_Created, 
    CRMDR.Compute_CRM_State as Compute_CRM_State, 
    CRMDR.Compute_Service_State as Compute_Service_State

    From [CRM].[dbo].[CRM_Doctor_Request] AS CRMDR

    JOIN [ASES].[dbo].[USERS] AS USERSTBM
    ON CRMDR.Requester COLLATE SQL_Latin1_General_CP1_CI_AS = USERSTBM.RID COLLATE SQL_Latin1_General_CP1_CI_AS

    JOIN [ASES].[dbo].[USERS] AS USERSABM
    ON CRMDR.Suggester COLLATE SQL_Latin1_General_CP1_CI_AS = USERSABM.RID COLLATE SQL_Latin1_General_CP1_CI_AS

    JOIN [ASES].[dbo].[GEOTREE] AS GEOTREE
    ON CRMDR.Territory COLLATE SQL_Latin1_General_CP1_CI_AS = GEOTREE.RID COLLATE SQL_Latin1_General_CP1_CI_AS

    JOIN [ASES].[dbo].[DRMST] AS DRMST
    ON CRMDR.Request_For_Id COLLATE SQL_Latin1_General_CP1_CI_AS = DRMST.MDLNO COLLATE SQL_Latin1_General_CP1_CI_AS

    JOIN [CRM].[dbo].[CRM_Request_For_Type] AS CRMReqForType
    ON CRMDR.CRM_Request_For_Type_Id  = CRMReqForType.Id 

    JOIN [CRM].[dbo].[CRM_Notation] AS CRMNotation
    ON CRMDR.CRM_Notation_Id  = CRMNotation.Id 

    JOIN [CRM].[dbo].[CRM_Service_Type] AS CRMServiceType
    ON CRMDR.CRM_Service_Type_Id  = CRMServiceType.Id 

    JOIN [CRM].[dbo].[Division] AS Division
    ON CRMDR.Division_Id  = Division.Id 

    WHERE CRMDR.Is_Deleted=0 '
    If (@MonthList) IS NOT NULL
        SELECT @sql=@sql + ' AND MONTH(CRMDR.Date_Created) in (' + @MonthList + ')  '
    If (@YearList) IS NOT NULL
        SELECT @sql=@sql + ' AND (CRMDR.Date_Created) in (' + @YearList + ') '
    If (@WeekList) IS NOT NULL
BEGIN
    DECLARE @DateCondition varchar(1000)
    DECLARE @ColumnName varchar(50) = 'CRMDR.Date_Created' 
    -- pass the columnname on which condition needs to be aaplied
    EXEC dbo.SPWhereconditionForMultipleWeeks  @WeekList, @ColumnName, @DateCondition OUTPUT
    SELECT @DateCondition
    -- if (LEN(@DateCondition) > 0 )
        SELECT @sql=@sql + ' AND '+ SUBSTRING(@DateCondition, 1, LEN(@DateCondition)-3)
END
If (@QuaterList) IS NOT NULL
BEGIN
    DECLARE @MonthsList varchar(1000)
    EXEC dbo.SPGetMonthsListforMultipleQuaters  @QuaterList, @MonthsList OUTPUT
    SELECT @MonthsList
    -- print @MonthsList
    -- if (LEN(@MonthsList) > 0 )
    SELECT @sql=@sql + ' AND MONTH(CRMDR.Date_Created) in ('
    + SUBSTRING(@MonthsList, 1, LEN(@MonthsList)-1) +')'
END
    If (@PriorityList) IS NOT NULL
        SELECT @sql=@sql + ' AND Priority in (' + @PriorityList + ') '
    If (@Division_IdList) IS NOT NULL
        SELECT @sql=@sql + ' AND Division_Id in (' + @Division_IdList + ') '
    If (@CRM_Service_Type_IdList) IS NOT NULL
        SELECT @sql=@sql + ' AND CRM_Service_Type_Id in (' + @CRM_Service_Type_IdList + ') '
    If (@CRM_Notation_IdList) IS NOT NULL
        SELECT @sql=@sql + ' AND CRM_Notation_Id in (' + @CRM_Notation_IdList + ') '
    If (@Estimated_Amount) IS NOT NULL
        SELECT @sql=@sql + ' AND Estimated_Amount > (@Estimated_Amount) '
    If (@CRM_State_IdList) IS NOT NULL
        SELECT @sql=@sql + ' AND CRM_State_Id in (' + @CRM_State_IdList + ') '
    If (@Service_State_IdList) IS NOT NULL
        SELECT @sql=@sql + ' AND Service_State_Id in (' + @Service_State_IdList + ') '

    SELECT @sql=@sql + ' ORDER BY CRMDR.Id DESC '
    --print @sql

    EXEC sp_executesql @sql, N' @MonthList varchar(50), 
    @YearList varchar(50), 
    @QuaterList varchar(50),  
    @PriorityList varchar(50), 
    @Division_IdList varchar(50), 
    @CRM_Service_Type_IdList varchar(50), 
    @CRM_Notation_IdList varchar(50), 
    @Estimated_Amount float, 
    @CRM_State_IdList varchar(50), 
    @Service_State_IdList varchar(50) ', 
         @MonthList, 
         @YearList, 
         @QuaterList, 
         @PriorityList, 
         @Division_IdList, 
         @CRM_Service_Type_IdList, 
         @CRM_Notation_IdList, 
         @Estimated_Amount, 
         @CRM_State_IdList, 
         @Service_State_IdList
RETURN 
```

我的班级调用程序：

```
public static List<CRM_Doctor_Request> FilterCRM_Doctor_Request_Details(string WeekList, string MonthList, string YearList, string QuaterList, string PriorityList, string Division_IdList,  string CRM_Service_Type_IdList, string CRM_Notation_IdList, string CRM_State_IdList, string Service_State_IdList, float Estimated_Amount) 
        {
            string proc = "SPFilterCRMRequests";

            List<SqlParameter> arrParam = new List<SqlParameter>();
            SqlParameter pWeekList = new SqlParameter("@WeekList", SqlDbType.VarChar);
            SqlParameter pMonthList = new SqlParameter("@MonthList", SqlDbType.VarChar);
            SqlParameter pYearList = new SqlParameter("@YearList", SqlDbType.VarChar);
            SqlParameter pQuaterList = new SqlParameter("@QuaterList", SqlDbType.VarChar);
            SqlParameter pPriorityList = new SqlParameter("@PriorityList", SqlDbType.VarChar);
            SqlParameter pDivision_IdList = new SqlParameter("@Division_IdList", SqlDbType.VarChar);
            SqlParameter pCRM_Service_Type_IdList = new SqlParameter("@CRM_Service_Type_IdList", SqlDbType.VarChar);
            SqlParameter pCRM_Notation_IdList = new SqlParameter("@CRM_Notation_IdList", SqlDbType.VarChar);
            SqlParameter pCRM_State_IdList = new SqlParameter("@CRM_State_IdList", SqlDbType.VarChar);
            SqlParameter pService_State_IdList = new SqlParameter("@Service_State_IdList", SqlDbType.VarChar);
            SqlParameter pEstimated_Amount = new SqlParameter("@Estimated_Amount", SqlDbType.Float);

            pWeekList.Value = WeekList;
            pMonthList.Value = MonthList;
            pYearList.Value = YearList;
            pQuaterList.Value = QuaterList;
            pPriorityList.Value = PriorityList;
            pDivision_IdList.Value = Division_IdList;
            pCRM_Service_Type_IdList.Value = CRM_Service_Type_IdList;
            pCRM_Notation_IdList.Value = CRM_Notation_IdList;
            pCRM_State_IdList.Value = CRM_State_IdList;
            pService_State_IdList.Value = Service_State_IdList;
            pEstimated_Amount.Value = Estimated_Amount;

            arrParam.Add(pWeekList);
            arrParam.Add(pMonthList);
            arrParam.Add(pYearList);
            arrParam.Add(pQuaterList);
            arrParam.Add(pPriorityList);
            arrParam.Add(pDivision_IdList);
            arrParam.Add(pCRM_Service_Type_IdList);
            arrParam.Add(pCRM_Notation_IdList);
            arrParam.Add(pCRM_State_IdList);
            arrParam.Add(pService_State_IdList);
            arrParam.Add(pEstimated_Amount);

            DataTable table = DataProvider.SelectStoreProcedure(proc, arrParam);

            List<CRM_Doctor_Request> ListCRM_Doctor_Request = new List<CRM_Doctor_Request>();

            foreach (DataRow row in table.Rows)
            {
                CRM_Doctor_Request CRM_Doctor_RequestObj = new CRM_Doctor_Request();

                CRM_Doctor_RequestObj.Territory_Name = Convert.ToString(row["Territory_Name"]);
                CRM_Doctor_RequestObj.Request_For_Id = Convert.ToString(row["Request_For_Id"]);
                CRM_Doctor_RequestObj.Request_For_Name = Convert.ToString(row["Request_For_Name"]);
                CRM_Doctor_RequestObj.Requester_Name = Convert.ToString(row["Requester_Name"]);
                CRM_Doctor_RequestObj.Division_Name = Convert.ToString(row["Division_Name"]);
                CRM_Doctor_RequestObj.Suggester_Name = Convert.ToString(row["Suggester_Name"]);
                CRM_Doctor_RequestObj.Id = Convert.ToInt32(row["Id"]);    
                CRM_Doctor_RequestObj.Compute_Priority = Convert.ToString(row["Compute_Priority"]);
                CRM_Doctor_RequestObj.CRM_Notation_Name = Convert.ToString(row["CRM_Notation_Name"]);
                CRM_Doctor_RequestObj.CRM_Service_Type_Name = Convert.ToString(row["CRM_Service_Type_Name"]);                    
                CRM_Doctor_RequestObj.Compute_CRM_State = Convert.ToString(row["Compute_CRM_State"]);
                CRM_Doctor_RequestObj.Compute_Service_State = Convert.ToString(row["Compute_Service_State"]);

                ListCRM_Doctor_Request.Add(CRM_Doctor_RequestObj);
            }
            return ListCRM_Doctor_Request;
        } 
```

DataProvider.SelectStoreProcedure 的代码：

```
class DataProvider
    {
        public static string connectionString = ConfigurationManager.ConnectionStrings["connect_str"].ConnectionString;

        public static DataTable SelectStoreProcedure(string ProcName, List<SqlParameter> ParaArr)
        {
                DataTable data = new DataTable();
                SqlConnection cn = new SqlConnection(connectionString);
                cn.Open();
                SqlCommand cmd = new SqlCommand(ProcName, cn);
                foreach (SqlParameter para in ParaArr)
                {
                    cmd.Parameters.Add(para);
                }
                cmd.CommandType = CommandType.StoredProcedure;

                SqlDataAdapter da = new SqlDataAdapter(cmd);

                da.Fill(data);
                cn.Close();
                return data;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:25:28.813

这看起来很乱；由于您正在执行多个查询，我认为您需要将数据填充到一个`DataSet`和`take the 0th Table`或用正确查询的结果填充 Datatable。

您还可以使用连接对象将代码减少一半`Parameters.AddWithValue()`并使用。`using`

```
//Your method
DataSet data = new DataSet(); //Note Dataset here ****
string connectionString = ConfigurationManager.ConnectionStrings["connect_str"].ConnectionString;

using(SqlConnection cn = new SqlConnection(connectionString))
{
    string proc = "SPFilterCRMRequests";
    SqlCommand cmd = new SqlCommand(proc, cn);
    cmd.CommandType = CommandType.StoredProcedure;

    cmd.Parameters.AddWithValue("@WeekList", WeekList);
    cmd.Parameters.AddWithValue("@MonthList", pMonthList);
    cmd.Parameters.AddWithValue("@YearList", pYearList);
    cmd.Parameters.AddWithValue("@QuaterList", pQuaterList);
    cmd.Parameters.AddWithValue("@PriorityList", pPriorityList);
    cmd.Parameters.AddWithValue("@Division_IdList", pDivision_IdList);
    cmd.Parameters.AddWithValue("@CRM_Service_Type_IdList", pCRM_Service_Type_IdList);
    cmd.Parameters.AddWithValue("@CRM_Notation_IdList", pCRM_Notation_IdList);
    cmd.Parameters.AddWithValue("@CRM_State_IdList", pCRM_State_IdList);
    cmd.Parameters.AddWithValue("@Service_State_IdList", pService_State_IdList);
    cmd.Parameters.AddWithValue("@Estimated_Amount", pEstimated_Amount);

    SqlDataAdapter da = new SqlDataAdapter(cmd);
    cn.Open();
    da.Fill(data);
}

List<CRM_Doctor_Request> ListCRM_Doctor_Request = 
                         new List<CRM_Doctor_Request>();

foreach (DataRow row in data.Tables[0].Rows) //**** Note 0th table here ******
{
 //rest of the code
}
//... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:22:07.180

您的问题是您正在尝试填充表（未定义架构）

更改`DataTable data = new DataTable();`为`DataSet data = new DataSet();`

和 `DataTable table = data`到`DataTable table = data.Tables[0]`；

并且您的架构将自动生成，并且一切正常。

******编辑******

 **尝试从此设置构建您的查询...

**定义这个存储过程**

```
CREATE PROCEDURE [dbo].[TestProc1] 
AS
BEGIN
    SET NOCOUNT ON;

    DECLARE @sql NVARCHAR(MAX) = 'SELECT 1 x UNION ALL SELECT 2'

    EXEC sp_executesql @sql
END 
```

**创建仅包含此代码的测试应用程序**

```
class Program
{
    public const string ConnectionString = @"???";

    static void Main(string[] args)
    {
        var t = Execute("TestProc1");

        Trace.Assert(t.Rows.Count == 2);
    }

    private static DataTable Execute(string sql)
    {
        using (var connection = new SqlConnection(ConnectionString))
        {
            connection.Open();

            using (var command = new SqlCommand(sql, connection))
            {
                command.CommandType = CommandType.StoredProcedure;
                var da = new SqlDataAdapter(command);

                var ds = new DataSet();
                da.Fill(ds);

                return ds.Tables[0];
            }
        }
    }
} 
```

连接字符串是您的连接字符串。

这将起作用，并且在功能上等同于您正在做的事情。一旦你有了这个工作，试着建立它来匹配你的具体情况**

# javascript - 使用 JavaScript 发送 html 电子邮件

> ID：15089857
> 
> 赞同：2
> 
> 时间：2013-02-26T13:04:04.833
> 
> 标签：javascript, html

我正在创建一个发送电子邮件的表单（仅使用 HTML 和 JavaScript）。我想在电子邮件正文中插入一个简单的 HTML 表格。像这样的东西：

`<table border=1> <tr><td>blabla</td></tr> </table>`

单击“发送”按钮后，将调用一个 JavaScript 函数，该函数通过 URL 发送电子邮件，并且 POST 数据出现在我的电子邮件客户端 - Outlook（这对我来说没问题）中，但格式存在问题。*电子邮件正文*中的数据为纯文本。

1.  有没有其他方法可以仅使用 JavaScript 来做到这一点？
2.  是否有必要使用某种服务器端脚本（如 PHP 或其他）来正确格式化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:23:22.653

您可以使用 JavaScript mailto 功能。试试这个，希望对你有帮助

```
<div id="mailBody"><table border=1> <tr><td>blabla</td></tr> </table></div>
<input type="button" onclick="sendMail();"> 
```

在脚本标签下

```
function sendMail()
{
   var mailBody=document.getElementById('mailBody').innerHTML;
   window.location="mailto:yourmail@domain.com?subject=hii&body="+mailBody;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:35:14.740

如果您只想使用 java 脚本发送 HTML 电子邮件，请尝试如下...

但我**不推荐**这种类型的邮件发送....

**通过 Javascript 发送 HTML 电子邮件：**

```
function SendEmail()
{
    var outlookApp = new ActiveXObject("Outlook.Application");
    var nameSpace = outlookApp.getNameSpace("MAPI");
    mailFolder = nameSpace.getDefaultFolder(6);
    mailItem = mailFolder.Items.add('IPM.Note.FormA');
    mailItem.Subject = "Me";
    mailItem.To = "me@me.com";
    mailItem.HTMLBody = "<table border=1> <tr><td>blabla</td></tr> </table>";
    mailItem.display(0);
} 
```

如果您只想通过javascript以纯文本形式发送电子邮件，请尝试如下...

**通过 Javascript 发送纯文本：**

```
window.open('mailto:test@example.com?subject=subject&body=Testing Email'); 
```

***最好使用服务器端编码发送电子邮件***

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-26T13:07:49.183

`<`如果您查看源代码，这些角色是什么样的？如果他们喜欢`&#60;`，或者`&lt;`你需要禁用这些编码。此外，您需要将格式设置为 HTML 邮件。对不起，我不是*PHP*人，但我想你需要服务器端代码。

# ios - UIButton 文本出现一段时间，它在 ios 中显示另一段空文本？

> ID：15089858
> 
> 赞同：0
> 
> 时间：2013-02-26T13:04:06.697
> 
> 标签：ios, uibutton, nstimer, nstimeinterval

我是 iOS 开发的新手。我想显示`UIButton`文本 1 秒，再显示 1 秒不显示文本。谁能告诉我iOS中的逻辑？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:12:36.530

将此方法添加到您的 .m 文件中

```
- (void) changeNameOfTheButton{
    [self performSelector:@selector(changeNameOfTheButton) withObject:nil afterDelay:1.0];
    if ([button.titleLabel.text isEqualToString:@""]){
        [button setTitle:@"Title 1" forState:UIControlStateNormal];
    }
    else{
        [button setTitle:@"" forState:UIControlStateNormal];
    }
} 
```

然后在您的**viewDidLoad**中调用上述方法，如下所示：

```
[self changeNameOfTheButton]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:07:30.023

使用 1.0`NSTimer`的常规`TimeInterval`，更改文本`UIButton`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:18:13.637

try like this...

```
NSTimer *timer = [NSTimer scheduledTimerWithTimeInterval:1.0f target:self selector:@selector(animateButton) userInfo:nil repeats:YES];

-(void)animateButton
{
    if([button.titleLabel.text isEqualToString:@""])
        [button setTitle:@"your text" forState:UIControlStateNormal];
    else
        [button setTitle:@"" forState:UIControlStateNormal];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:14:18.883

用于`NSTimer`设置更改标题的时间间隔。

在中添加以下行`viewDidLoad`

```
 [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(ChangeButtonText) userInfo:nil repeats:YES]; 
```

定时器触发时调用的函数。在这里更改按钮标题。将此方法复制到您的`.m`文件中。

```
 -(void)ChangeButtonText
  {
   if([_button.titleLabel.text isEqualToString:@"buttonName"])
    {
        [_button setTitle:@"" forState:UIControlStateNormalState];

     }
   else
    {
       [_button setTitle:@"buttonName" forState:UIControlStateNormalState];

    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T13:14:51.500

这对我有用..

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [btn setTitle:@"Hello" forState:UIControlStateNormal];
    [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(btnPress) userInfo:nil repeats:YES];

}

-(void)btnPress
{
    if([btn.currentTitle isEqualToString:@"Hello"])
    {
        [btn setTitle:@"" forState:UIControlStateNormal];
    }
    else
        [btn setTitle:@"Hello" forState:UIControlStateNormal];
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-26T13:07:47.747

您可以使用：

```
[button setTitle:@"text" forState:UIControlStateNormalState]; 
```

对于空：

```
[button setTitle:@"" forState:UIControlStateNormalState]; 
```

# dynamic - TinyMCE 中的动态菜单按钮项

> ID：15089861
> 
> 赞同：3
> 
> 时间：2013-02-26T13:04:09.530
> 
> 标签：dynamic, tinymce, refresh

我的 tinyMCE 编辑器中有一个自定义菜单按钮，它使用页面上其他地方的特定 HTML 元素作为菜单项。我使用 jQuery 选择器获取元素列表，然后将每个元素添加为菜单项：

```
c.onRenderMenu.add(function(c,m) {
  m.add({ title: 'Pick One:', 'class': 'mceMenuItemTitle' }).setDisabled(1);
  $('span[data-menuitem]').each(function() {
    var val = $(this).html();
    m.add({ 
      title: $(this).attr("data-menuitem"), 
      onclick: function () { tinyMCE.activeEditor.execCommand('mceInsertContent', false, val) }
    });
  });
}); 
```

我的问题是，这仅在首次单击按钮并首次呈现菜单时发生一次。当前页面上的 HTML 元素会根据用户点击和一些 AJAX 偶尔更改，因此我需要在每次呈现菜单时运行此选择器代码，以确保菜单完全是最新的。那可能吗？

如果做不到这一点，是否可以从页面中其他地方的 AJAX 调用结束时动态更新控件？我不确定如何访问菜单项并对其进行更新。使用`tinyMCE.activeEditor.controlManager`...的东西？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-27T13:11:14.360

我找到了解决这个问题的方法，但我不确定这是最好的方法。

看起来我不能让 tinyMCE 重新渲染菜单，所以我在 AJAX 调用结束时添加了一些代码：在它更新了 DOM 之后，它手动更新了 tinymce 下拉菜单。

可以使用以下方式访问菜单对象：

```
tinyMCE.activeEditor.controlManager.get('editor_mybutton_menu') 
```

其中*mybutton*是我的自定义控件的名称。我的快速而肮脏的解决方案是调用`removeAll()`此菜单对象（以删除所有当前菜单项），然后重新执行我的选择器代码以在（新）DOM 中找到匹配的元素并将菜单项添加回来基于新状态。

它似乎工作得很好，尽管总是欢迎调整和想法！

# mysql - 防止表在更新和删除行时被更新

> ID：15089862
> 
> 赞同：0
> 
> 时间：2013-02-26T13:04:16.730
> 
> 标签：mysql

我正在为一个小游戏构建一个匹配系统。我的表格保存了所有寻找对手的玩家，如下所示：

```
lobby
----------
userID
points
range
opponentID 
```

每隔 5 秒，脚本会尝试在一定的分数范围内寻找对手。

```
UPDATE lobby SET
    opponentID = {myUserID}
WHERE points >= {myPoints} - {myRange} AND points <= {myPoints} + {myRange}
    AND opponentID = 0 AND userID != {myUserID}
ORDER BY ABS(points - {myPoints}) ASC
LIMIT 1 
```

如果有受影响的行，我会从大厅中删除当前玩家并获取对手 ID：

```
DELETE FROM lobby
WHERE userID = {myUserID}

SELECT userID FROM lobby
WHERE opponentID = {myUserID} 
```

现在我担心有人在 UPDATE 和 DELETE 之间分配当前用户。我怎样才能防止这种情况？我可以结合更新和删除吗？

# c++ - OpenGL 翻译

> ID：15089867
> 
> 赞同：0
> 
> 时间：2013-02-26T13:04:24.323
> 
> 标签：c++, opengl

我在翻译我正在绘制的对象时遇到了一些问题。这是我的显示功能的全部。我似乎找不到任何我做错的事情。

```
glClear (GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
glMatrixMode(GL_PROJECTION);
glPushMatrix();
glLoadIdentity();
glOrtho(0, 720, 480, 0, -1.0, 1.0);
glTranslatef(-0.5f,0.0f,0.0f);

//drawing object here

glPopMatrix();
glutSwapBuffers(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:07:19.323

完成后，您需要开始修改模型视图矩阵堆栈`glOrtho`：

```
// ...
glOrtho(0, 720, 480, 0, -1.0, 1.0);

glMatrixMode(GL_MODELVIEW);
glTranslatef(-0.5f,0.0f,0.0f);
// ... 
```

但是现在你`glPushMatrix`和`glPopMatrix`正在修改不同的堆栈，所以`glPopMatrix`会导致错误。无论如何，对于这样一个简单的示例，您不应该需要它们。

# c# - 如何将方法值作为 RadHtmlChart 的列表返回？

> ID：15089870
> 
> 赞同：1
> 
> 时间：2013-02-26T13:04:29.210
> 
> 标签：c#, asp.net, charts, telerik

我正在使用`RadHtmlChart`基于 Telerik 的 HTML5。我正在使用饼图，我想显示该方法的值。我应该如何保存这些值——也许是一个列表？它不应该对方法本身产生太大影响，因为我需要这种方法来处理一些报告内容。

```
public double GetBookedVacation(int year)
{
    int counter = 0;
    if (this.AnnualVacations.Any())
    {
        foreach (HtVacationDay vacationDay in HtVacationDays)
        {
            foreach (DateTime vacationDayDate in vacationDay.GetDates())
            {
                if (vacationDayDate.Year == year)
                {
                    counter++;
                }
            }
        }
    }
    return counter;
} 
```

感谢您的帮助和快速答复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:55:24.373

好吧，这取决于您的需求，但列表似乎是最简单的选择。图表可以采用不同的数据源（从[此处](http://demos.telerik.com/aspnet-ajax/htmlchart/examples/databinding/bindtolist/defaultcs.aspx)开始并浏览该部分），或者您可以通过代码添加项目和系列，以编程方式在循环的每次迭代中创建图表。这可能更难维护，具体取决于您的情况。此外，由于您返回计数器，您打算如何在不更改数据的情况下将数据提供给图表（例如输出参数）？

# php - PHP：为什么 PHP-Curl 不能与 nginx 一起使用

> ID：15089871
> 
> 赞同：4
> 
> 时间：2013-02-26T13:04:29.253
> 
> 标签：php, curl, nginx

我最近将我的网站移至 nginx 服务器。我的 python 代码在同一台机器上的 8086 端口上运行，但我的 php curl 模块不工作。我不知道我在这里做错了什么。

我已经安装了`php5-fpm`，但仍然无法解决这个问题。我也看不到错误，因为 nginx 只是向我显示了空白屏幕。顺便提一句。它正在打印`curl_init()`语句之前的所有值。

我也可以发布我的 Nginx 配置，但我认为这不是必需的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-14T02:01:23.450

你需要跑`/etc/init.d/php5-fpm restart`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-24T09:50:24.660

如果您使用的是 Windows，请确保按照以下步骤操作：

1.  重命名`php.ini-production`或`php.ini-development``php.ini`
2.  指定扩展目录：`extension_dir = "ext"`
3.  启用 Curl 扩展（在 php.ini 中取消注释）：`extension=php_curl.dll`

# javascript - Wijmo 菜单脚本的加载时间

> ID：15089881
> 
> 赞同：0
> 
> 时间：2013-02-26T13:04:57.500
> 
> 标签：javascript, jquery, wijmo

我正在使用这个菜单[http://wijmo.com/widgets/wijmo-open/menu/](http://wijmo.com/widgets/wijmo-open/menu/)，它工作正常，但我有这个问题：

加载 js 文件需要一些时间，并且菜单会像树一样显示，几秒钟后菜单就可以了。

我怎样才能加快加载速度或做一些不显示树的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T08:16:56.547

我使用以下链接提供的最新版本 2.3.7 测试了在线演示： [http ://wijmo.com/demo/explore/?widget=Menu&sample=Overview](http://wijmo.com/demo/explore/?widget=Menu&sample=Overview)

菜单确实出现了，没有任何延迟。你能检查一下吗？如果问题仍然存在，请告诉我浏览器详细信息和您使用的版本。

问候

# c# - 已经在 xmlAny 元素中的 xml 元素数组的序列化

> ID：15089883
> 
> 赞同：3
> 
> 时间：2013-02-26T13:05:01.993
> 
> 标签：c#, .net, xml-serialization

```
<Fruits>

            <FruitName>Amla</FruitName> 
            <FruitPrice>10 US DOLLARS</FruitPrice> 

            <Origin>
                <Country>INDIA</Country> 
                <NativeName>GOOSEBERRY</NativeName> 
                <Availability>PLENTY</Availability> 
            </Origin>

            <OtherInfo>
                <FiberPercentage>1.11</FiberPercentage> 
                <MagnesiumPercentage>0.02</MagnesiumPercentage> 
            </OtherInfo> 
```

在 De 序列化上述 XML 结构时，我使用类似的东西，

xml

```
XmlElement("FruitsList")]
public List<Fruits> FruitsImport { get; set; } 
```

在水果课上，我有类似的东西：

```
 [XmlAnyElement]
    public List<XmlElement> FruitElements { get; set; }

    [XmlElement("Origin")]
    public List<XmlElement> FruitOrigin { get; set; }

    [XmlElement("OtherInfo")]
    public List<XmlElement> OtherInfo { get; set; } 
```

`FruitElement`检索`FruitName`and `FruitPrice`。 `FruitOrigin`单独检索国家`Info`。 `OtherInfo`独自返回`FiberPercentage`。

关于如何获取`<Origin>`和`<OtherInfo>`标签下的所有信息的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T13:11:48.963

`<origin>`因为在和标记中都嵌套了元素，所以`<otherinfo>`在执行反序列化时还需要为它们定义一个类。

```
[XmlElement("Origin")]
public List<Origins> FruitOrigin { get; set; } 
```

您可以像定义水果类一样定义原产地类。

（Origin 类的骨架如下所示：

```
[Serializable]
public class Origin
{
    [XmlAnyElement]
    public List<XmlElement> OriginElements { get; set; }
} 
```

)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:23:15.073

最好的方法是为 XML 编写 XSD 架构并使用[XSD.exe](http://msdn.microsoft.com/en-in/library/x6c1kb0s%28v=vs.110%29.aspx)从 XSD 架构生成类，这样您就可以验证 XML 和类始终与 XSD 匹配，并且永远不会出现序列化/反序列化问题。

您可以像下面这样创建批处理文件以从 xsd 模式生成类：

```
del Configuration.AutoGenerated.cs
"%ProgramFiles%\Microsoft SDKs\Windows\v6.0A\bin\xsd" Test.Configuration.xsd /c /n:Test.Configuration 

rename Test_Configuration.cs Configuration.AutoGenerated.cs
pause 
```

您可以在上面的 XSD.exe 链接中查看更多使用示例。它将生成部分类，因此您可以在需要时轻松地进一步扩展它。

# java - 做 | 和 & 在java中有意义吗？

> ID：15089890
> 
> 赞同：4
> 
> 时间：2013-02-26T13:05:35.113
> 
> 标签：java, logical-operators

我很少碰到 & 和 | 其他代码中的逻辑运算符而不是 || 和 ＆＆。我做了一个快速的研究，因为我从未使用过它们，也不知道它的用途。
A && B 表示如果 A 为假，则不会评估 B，它将返回假。
A & B 表示如果 A 为 false，即使表单也返回 false，也会评估 B。
当然是同一个游戏 | 和||。

我的问题是：如果第一个成员确定评估，那么评估第二个成员是否有意义？我可以想象一个代码，其中第二个成员在 clode 中执行了一些非常重要的逻辑，因此应该对其进行评估，但我怀疑这是不好的做法。制作够吗？并且 & 存在吗？

从评论中说得更清楚：我觉得该程序不是最佳的并且运行良好，或者更好地说：如果必须评估所有逻辑成员，则设计得很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:06:44.690

你忘了[按位运算](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

> 按位 & 运算符执行按位与运算。
> 
> 按位 | 运算符执行按位包含 OR 运算。

但是在这里您可以找到无条件 AND 运算符更好的示例：

[在哪些情况下最好使用无条件 AND（& 而不是 &&）](https://stackoverflow.com/questions/11411907/what-are-the-cases-in-which-it-is-better-to-use-unconditional-and-instead-of)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-26T13:06:47.903

单 & 和 | 不是逻辑运算符，它们是[**按位**和逻辑](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22)运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T13:10:20.240

从[按位和位移运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)

> 按位 & 运算符执行按位与运算。
> 按位 ^ 运算符执行按位异或运算。
> 按位 | 运算符执行按位包含 OR 运算。

从[JLS 15.22。位和逻辑运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22)

> 位运算符和逻辑运算符包括 AND 运算符 &、异或运算符 ^ 和包含 OR 运算符 |。块引用

![在此处输入图像描述](../Images/7c328cb13fef0c17a1bdc9b8a6810c11.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-26T13:10:24.333

您可以使用 | 和 & 如上所述的运算符。一些静态代码分析器会警告您，因为它可能会掩盖可能的问题。在您确实希望评估两个条件的情况下，您可以执行以下操作：

```
boolean cond1=cond1();
boolean cond2=cond2();
boolean myCond=cond1 && cond2; 
```

如果你只是使用

```
boolean myCond=cond1()&cond2(); 
```

有人一定会为你“纠正”它。所以是的，有些地方你会使用 & 和 |，但很可能这不是一个好主意，为了清楚起见，你可以绕过它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-26T13:12:00.377

想象一下，如果 B 是一个你想一直执行的函数，那么它会很有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-02-26T13:38:26.687

我认为这可能是一个很好的例子：

```
if (initializeConnectionA() & initializeConnectionB() & initializeConnectionC()) {
    performOperation();
} else {
    logger.warn("Not all modules are working properly");
} 
```

方法initializeConnection 连接到即一些可能无法正常工作的外部服务器。您可能不需要全部初始化它们，但如果其中一些不起作用，您希望得到警告。

当然，对于这个问题，它可能不是最清晰的解决方案，但这是 & 运算符可能有用的示例。

# jquery - jQuery - 循环特定的 DIV 和变换

> ID：15089893
> 
> 赞同：1
> 
> 时间：2013-02-26T13:05:45.550
> 
> 标签：jquery, loops, youtube

这是当前可用的 HTML 代码。可能有多个具有“ow_video_list_item ow_small”类的 DIV。

```
<div class="ow_video_list_item ow_small">
   <a href="http://www.site1.com">
      <img src="http://img.youtube.com/vi/xVrJ8DxECbg/default.jpg">
   </a>

   <div class="ow_video_item_title">
      Site 1
   </div>
</div> 
```

我希望修改此 HTML，如下所示。

```
<div class="ow_video_list_item ow_small">

   <img rel="xVrJ8DxECbg" src="http://img.youtube.com/vi/xVrJ8DxECbg/default.jpg">

   <div class="ow_video_item_title">
      <a href="http://www.site1.com">Site 1</a>
   </div>
</div> 
```

PS：IMG src 属性的格式不会改变。值“xVrJ8DxECbg”是 Youtube 中视频的视频 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T15:01:09.337

这是为我工作的代码。请建议是否有其他更好的解决方案。

```
$( "div .ow_video_list_item").each(function(){
   $imgSrc = $(this).children("a").children("img").attr("src");
   $videoId = $imgSrc.split("/")[4]; 
   $videoLink = $(this).children("a").attr("href");
   $linkTitle = $(this).children("div .ow_video_item_title").text();

   $(this).children("a").empty(); 
   $(this).prepend('<img rel="' + $videoId + '" src="' + $imgSrc + '"/>');
   $(this).children("div .ow_video_item_title").empty().prepend
                  ('<a href="' + $videoLink + '">'+ $linkTitle + '</a>');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:11:55.230

```
$($(".ow_video_list_item").find("div")).each(function(){
 // do watever you want with divs
}); 
```

# c++ - 空函数指针

> ID：15089896
> 
> 赞同：13
> 
> 时间：2013-02-26T13:05:57.190
> 
> 标签：c++, c, c99

调用空函数指针的行为是什么？

```
void (*pFunc)(void) = NULL;  
pFunc(); 
```

为什么建议将尚未使用的函数指针初始化为 NULL？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-26T13:13:38.957

在 C 和 C++ 中，这被称为`undefined behaviour`，这意味着这可能会导致*分段错误*，根据您的编译器、运行此代码的操作系统、环境（等等... ） 方法。

初始化指向函数的指针，或一般指向 NULL 的指针有助于一些开发人员确保他们的指针未初始化且不等于随机值，从而防止他们意外取消引用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T14:42:40.853

1.  当您尝试访问 NULL 时会发生什么？以下关于数据和代码都是正确的，这就是当您尝试读取 NULL（或从 0 到 4096 的任何地址，即至少段的第一页）时发生的情况。其根本原因在于操作系统和微处理器分段/分页架构

    当您尝试在任何数据或代码段中访问 NULL（或 0）地址时，它会导致分段错误（这实际上是一个杀手页错误）。部分的第一页被视为超出（或无效部分）虚拟地址空间。这是故意使第一页保持无效（或不存在），因此指针包含的至少一个地址可以在执行时在程序中表示为无效。

    第 1 页的页描述符（包含虚拟地址 0，NULL）的第一位“存在”为 0（表示其无效页）。现在，如果您尝试访问 NULL 指针（0 地址），它将导致由于页面不存在而引发页面错误，并且操作系统将尝试处理此页面错误。当页面错误处理程序看到它试图访问第一页时，它被视为虚拟地址空间的无效部分，它会终止进程。这都是关于用户空间进程的。如果您尝试在系统进程（内核级代码）中访问 NULL 指针，它将使您的操作系统失败并导致系统崩溃。

    链接： http: [//en.wikipedia.org/wiki/Page_fault#Invalid](http://en.wikipedia.org/wiki/Page_fault#Invalid) [http://en.wikipedia.org/wiki/Memory_protection#Paged_virtual_memory](http://en.wikipedia.org/wiki/Memory_protection#Paged_virtual_memory) [http://pdos.csail.mit.edu/6.828/2005/readings/ i386/s05_02.htm](http://pdos.csail.mit.edu/6.828/2005/readings/i386/s05_02.htm)

    以上就足够了，因为我认为您也应该阅读此内容 [http://www.iecc.com/linker/linker04.txt](http://www.iecc.com/linker/linker04.txt)

2.  为什么函数指针初始化为NULL？尽管如果您尝试使用 NULL 调用它，则会出现页面/段错误。NULL 表示它的无效功能。如果它包含任何垃圾地址但在代码段的有效虚拟地址空间中，我认为该地址处的任何代码都将被调用，这可能是更大的灾难（在实时系统的情况下为 spl）。初始化 funcp = funct_foo_name + 1; 现在使用函数指针调用函数。函数指针指向代码段的有效虚拟地址空间。bt 函数将从错误的位置开始执行。这可能导致错误的代码执行或错误的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:11:01.223

出于与初始化“正常”（数据）指针相同的原因，建议这样做`NULL`：因为它可能会使一些错误更容易追踪。关于这是否有用的意见当然会有所不同:-)

# java - 使用java中的apache客户端从谷歌搜索中获取结果

> ID：15089903
> 
> 赞同：-2
> 
> 时间：2013-02-26T13:06:17.360
> 
> 标签：java

如何使用 HttpClient 获取搜索结果是我的代码

```
HttpGet httpGetRequest = new HttpGet("http://www.google.com/search/?q=my_query"); 
```

但它给了我回应

```
HTTP/1.1 404 Not Found 
```

请给我一些帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:10:22.120

改用`http://www.google.com/#q=my_query`，应该可以。

# opencv - 多项选择测试标记阅读器 - 从哪里开始？

> ID：15089908
> 
> 赞同：0
> 
> 时间：2013-02-26T13:06:31.087
> 
> 标签：opencv, computer-vision, optical-mark-recognition

我被分配了一个项目（在学校）进行自动多项选择测试评分，我不知道从哪里开始。
我认为他是一种流行的节目，你已经知道了。输入答卷的扫描图像文件并返回结果。
我所知道的关于计算机视觉的一切都是一些使用 OpenCV 进行照片编辑的例子。我希望你能给我一些与问题相关的关键字，或者一些博客文章、文档和相关库。
有没有免费的开源程序可以参考？
谢谢！
编辑：添加 2 个答题纸示例（抱歉，我找不到英文答题纸）：

![示例 1](../Images/7dd4f8065f6160c6a49068e614dbfbb9.png) ![示例 2](../Images/b9f76167ade98b1ad54d4c208d0054fb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T17:18:51.937

我认为这个问题基本上有两个步骤

1.  将表格置于标准化位置
2.  现在你知道盒子在哪里，并且可以`look`通过对该区域的灰度值进行阈值处理。

步骤 1 使用什么方法取决于您的实际图像以及变化的程度。你有一些可以上传的示例图片吗？

此外，我认为这是一个好主意，特别是如果您是初学者，从一些简单的示例开始，然后通过添加越来越多的变化来逐步提高。

# java - 如何在 Spring MVC/Flex 混合应用程序中处理用户身份验证

> ID：15089913
> 
> 赞同：0
> 
> 时间：2013-02-26T13:06:43.070
> 
> 标签：java, apache-flex, spring-mvc, spring-security, blazeds

我们有一个应用程序，它是使用 Blazeds 的 Java 后端的 Flex 前端。我们正在使用 Spring MVC 从 Flex 转换为 HTML 和 JS 前端。我们希望逐步做到这一点，用 html 逐个替换 flex。这意味着当前 flex 应用程序的某些部分将成为新 Spring MVC 应用程序中各种不同页面上的“组件”。

问题是在此过渡期间如何最好地在 Flex 组件中进行用户身份验证。有没有一种很好的方法可以让 Flex 组件挂接到 SpringMVC 端使用的同一个 Java 会话中，也许是某种基于 SSO 的方法？我们已经在使用带有 BlazeDS 的 Spring Security。这甚至可能吗？

# python - InteractiveShell 属性

> ID：15089915
> 
> 赞同：0
> 
> 时间：2013-02-26T13:06:45.717
> 
> 标签：python, ipython

我收到错误消息：

**AttributeError：“InteractiveShell”对象没有属性“Completer”警告：执行文件失败：<./test.py>**

我有 Windows 7、neurodebian 6.0.2 和 ipython 0.10

你能告诉我有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:14:15.087

您的 python 代码 test.py 具有`InteractiveShell`没有 Completer 属性的对象。这就是错误消息所说的。检查`InteractiveShell`类并查找`Completer`属性。

# php - PHP/XDebug 输出到变量？

> ID：15089917
> 
> 赞同：0
> 
> 时间：2013-02-26T13:06:54.333
> 
> 标签：php, javascript, jquery, json, xdebug

我正在开发一个 Web 应用程序，并且正在使用 PHP 和 javascript/jQuery，我遇到的问题是 XDebug 的警告/错误输出。我从 AJAX 调用 PHP 脚本来检索数据，其中大部分是返回数组，我使用 JSON 字符串进行传输。我遇到的问题是，如果有警告/错误 XDebug 在输出中写入 HTML 标记，并且当我尝试在我的 javascript 中解码 JSON 字符串时，它会失败。有没有办法配置 XDebug 将它们输出到变量中，这样我仍然可以在需要时显示它们而不会弄乱我的 JSON 解码？我试图展示一个简单的例子：

```
RemoveFile.php:

if (!unlink($_GET['Filename'])){ //if file not found XDebug will output warning here
    $errors[] = "File not found";

    echo json_encode($errors);    
}

RemoveFile.js:

function RemoveFile(filePath){
    $.get('RemoveFile.php', {
        Filename: filePath
    }).done(function (data){
        var dataArray = JQuery.parseJSON(data); //Fails if XDebug outputs HTML
    }
} 
```

**更新**

* * *

我想出了我需要做什么，因为我不想打开日志文件来检查错误并在错误发生时显示错误以使调试更容易我创建了一个自定义错误处理程序以包含在文件中我不想输出错误，但仍然输出其他文件：

```
VarErrorHandler.php:

function VarErrorHandler($errno, $errstr, $errfile, $errline){
    switch ($errno) {
        case E_USER_ERROR:
            $errors[] = "ERROR: Fatal error on line $errline in file $errfile [$errno] $errstr";
            exit(1);
            break;

        case E_USER_WARNING:
            $errors[] = "WARNING: [$errno] $errstr";
            break;

        case E_USER_NOTICE:
            $errors[] = "NOTICE: [$errno] $errstr";
            break;

        default:
            $errors[] = "Unknown error type: [$errno] $errstr";
            break;
    }

    /* Don't execute PHP internal error handler */
    return true;
}

$old_error_handler = set_error_handler("VarErrorHandler"); 
```

所以现在在任何文件中我不想输出我添加的错误：

```
//include and set custom error handler
require_once("VarErrorHandler.php");

//to stuff here

//Reset original error handler
restore_error_handler(); 
```

然后通过显示错误数组将它们显示在客户端，即

```
function RemoveFile(filePath){
    $.get('RemoveFile.php', {
        Filename: filePath
    }).done(function (data){
        var dataArray = JQuery.parseJSON(data); //Fails if XDebug outputs HTML

        //Alert Errors
        alert(dataArray.errors.join("\n"));
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-26T13:15:21.710

如果您的代码中有错误/警告/通知，那么它们的存在是有原因的 - 在您投入生产之前解决问题。

在生产环境中，您应该将 PHP 配置为记录错误而不是显示错误。在您`php.ini`的生产环境中：

```
error_log = /path/to/php-error.log
log_errors = On
display_errors = Off 
```

或者，您可以在运行时更改代码中的设置：

```
ini_set("display_errors", 0);
ini_set("log_errors", 1);
ini_set("error_log", "/path/to/php-error.log"); 
```

在此处阅读更多信息：

[在生产服务器上抑制 php 错误的最佳方法](https://stackoverflow.com/questions/332178/best-way-to-suppress-php-errors-on-production-servers)

# struts - Struts 复选框值不能为零

> ID：15089923
> 
> 赞同：0
> 
> 时间：2013-02-26T13:07:04.943
> 
> 标签：struts, actionform

我有一组复选框，如果我在表单上选中或取消选中它们，则 Action 表单中的 setCheckboxes 方法在发布后会被触发。但是当所有复选框都未选中时，它不会触发。如何让它做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T00:28:09.490

而不是依赖于 javascript 或一些解决方法来获取要发送的错误值，只需假设这些值将是错误的（覆盖 reset() 方法以将所有设置为 false）并且任何被检查的都将被提交并且 setCheckbox() 将被叫。

您希望调用 setCheckbox 是否还有其他原因？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T13:53:27.837

这里的问题是，如果复选框未选中，struts 将不会填充它。

如果您在表单类中将特定字段设置为布尔值，则可以使用 javascript 函数查找未选中的复选框并尝试在 url 中将该值附加为 false。

例如。

```
http://youraction.do?checkBox1=false&checkBox2=false 
```

这将解决您的问题。

# mysql - 如何在 C# 中提高 MySQL 存储过程调用的速度

> ID：15089932
> 
> 赞同：0
> 
> 时间：2013-02-26T13:07:33.007
> 
> 标签：mysql, .net, stored-procedures

我正在尝试收集数据流（每秒 100-150 个数据包），然后使用存储过程将处理后的数据包发送到 MySQL 数据库：

```
comm = new MySqlCommand("cantm_insert", conn);
comm.CommandType = CommandType.StoredProcedure;

comm.Parameters.AddWithValue("?_tmsid", tmsid);
comm.Parameters.AddWithValue("?_time", DateTime.Now.ToOADate());
comm.Parameters.AddWithValue("?_dest", c.Identifier >> 3);
comm.Parameters.AddWithValue("?_source", c[0]);
comm.Parameters.AddWithValue("?_length", c.DataLength);
comm.Parameters.AddWithValue("?_type", c[1]);
comm.Parameters.AddWithValue("?_data", buffer);

comm.executeNonQuery(); 
```

这种方法每秒只给我 15-20 个数据包存储在数据库中。我需要尽快将数据存储到数据库中。

在 MSSQL 中，我可以发送大量文本命令（例如“从 tbl 中选择 *；插入 tbl；从 tbl 中删除；”），但我不知道如何使用存储过程来提高性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T08:17:02.100

您可以通过重用命令和参数对象来提高代码的性能。当您获取新数据点时，只需为参数对象设置值。所有的资源分配都会损害代码的性能。不知道你的存储过程在做什么，所以无能为力。

在数据库方面，删除索引。您可以实现一个数据收集表，该表在开始测试之前被截断。测试后将数据移动到其“真实”表中。

您提到数据流的 150-200 个数据包/秒。这是平均数据还是连续数据？因为如果数据包突然出现，您可以使用一个线程进行数据收集，使用第二个线程进行数据库存储，并在它们之间使用缓冲区/队列。验证缓冲区是否在下一个数据突发之前得到处理。这样你就不会丢弃数据。

# php - 如何正确访问数组对象

> ID：15089936
> 
> 赞同：1
> 
> 时间：2013-02-26T13:07:45.013
> 
> 标签：php

我有一个网络服务查询的结果，我想从中获取一些值。它有效，但我有 PHP 通知问题，所以我可能做错了什么。

这是`$items`变量内容：

```
stdClass Object
(
    [response] => stdClass Object
        (
            [0] => stdClass Object
                (
                    [id] => 275
                    [corpid] => 16107
                    [name] => default
                    [description] => 
                    [status] => ok
                    [nbSteps] => 7
                )

            [defaultItem] => 275
        )

    [error] => 
    [status] => success
) 
```

所以我尝试了类似的东西：

```
foreach ( $items->response AS $key => $item ) {
    if ( $item->name == 'default' ){ // Line 106
        $Id = $item->id;
    }
} 
```

它有效，`$Id`等于 275 但 PHP 返回一个通知：

```
Notice: Trying to get property of non-object in /home/web/dev/webservice-form.php on line 106 
```

任何帮助将不胜感激。

编辑：这是 $item 变量的内容（取自 foreach 循环）：

```
stdClass Object
(
    [id] => 275
    [corpid] => 16107
    [name] => default
    [description] => 
    [status] => ok
    [nbSteps] => 7
)

275 
```

请注意，“275”是结果的一部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:10:45.720

问题是`defaultItem`您的内部对象中的条目。您的循环将在某个时候到达此位置并尝试访问`name`不存在的 ，因为没有对象。

应该很容易解决`is_object()`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-26T13:22:50.723

您有混合类型，一种是对象，一种是 int 值，请尝试检查每个项目是什么：

```
foreach ( $items->response AS $key => $item ) {

    if(is_object($item) && $item->name == 'default'){ // Line 106
        $Id = $item->id;
    }
    else {
         $Id = $item; // assume it's scalar value
    }
} 
```

显然，这取决于您需要在其中添加哪些其他检查。

# c# - ADFS 调用：(411) 需要长度

> ID：15089942
> 
> 赞同：1
> 
> 时间：2013-02-26T13:07:59.407
> 
> 标签：c#, adfs2.0

我正在尝试从 ADFS 实例获取 SAML 令牌。我按照此处找到的示例（[http://blogs.msdn.com/b/willpe/archive/2010/10/25/windows-authentication-adfs-and-the-access-control-service.aspx](http://blogs.msdn.com/b/willpe/archive/2010/10/25/windows-authentication-adfs-and-the-access-control-service.aspx)）配置所有内容. ADFS 实例由另一方配置，但设置如文章中所述。

乍一看，一切似乎都正常。但是当我进入代码并运行一个应该给我一个令牌的示例时，我从服务器收到一个 (411) Length Required) 响应。如果我切换端点并不重要，错误保持不变。似乎响应甚至根本没有到达端点。

Length Required 错误似乎与缺少 Content-Length: 0 标题行有关。我与 Fiddler 核对过；它不在那里。但是调用是从 .NET 框架内生成的，因此我对此无能为力。

知道为什么服务器可能会抛出此错误吗？我应该尝试更改请求，还是禁用服务器端的检查？或者我没有想到的选项？

# cross-compiling - config.log 文件中无法识别的选项“-mfloat-abi=softfp”

> ID：15089948
> 
> 赞同：1
> 
> 时间：2013-02-26T13:08:27.837
> 
> 标签：cross-compiling

当我为 arm 交叉编译 mutt-1.5.20 时，在配置期间我收到错误
配置：错误：C 编译器无法创建可执行文件有关更多详细信息，请参阅“config.log”。
在 config.log 文件下面的消息
configure:2925: 检查 C 编译器默认输出文件名
configure:2947: /home/hems-pc2/Downloads/linux-devkit/bin/arm-arago-linux-gnueabi-gcc conftest.c >&5 **as: 无法识别的选项 '-mfloat-abi=softfp'**
配置:2951: $? = 1 配置：2989：结果：

用于配置的命令： build_arm$../configure --host=arm-arago-linux-gnueabi CC=/home/hems-pc2/Downloads/linux-devkit/bin/arm-arago-linux-gnueabi-gcc CXX =/home/hems-pc2/Downloads/linux-devkit/bin/arm-arago-linux-gnueabi-g++ --enable-so --with-named-curses-libs=-lncurses --without-man --without -docs ac_cv_sys_restartable_syscalls=no ac_cv_conv_longlong_to_float=yes --with-zlib

让我知道我错过了什么。感谢提前

普里耶

# c# - 如何在 Mongodb 的聚合框架中编写日期范围查询？

> ID：15089958
> 
> 赞同：3
> 
> 时间：2013-02-26T13:09:44.773
> 
> 标签：c#, mongodb, aggregation-framework

我的目标是使用 mongodb 2.2 和最新的 c# 驱动程序根据日期范围执行匹配和分组。

我在使用日期时间的聚合框架中创建匹配查询时遇到问题。我不知道我的数据类型是否不正确（poco 有一个日期时间并且对象在保存时是 utc）或者查询是否不正确，这更有可能。

```
//Here is the doc format that I'm querying:

  {
      "DateTime" : new Date("2/20/2013 17:29:03"),
      "DateTimeString" : "20130220", 
      "PurchaseAmount" : 1.91, 
      "ProductId" : "51293ac844da932e941fa2c4",
      "_id" : "20130220/51293ac844da932e941fa2c4"
    } 
```

//这是我正在尝试的聚合查询

```
 var timeStamp = DateTime.UtcNow.AddDays(-20);
    var startDate = timeStamp.Date;
    var endDate = timeStamp.AddDays(1).Date;

 var match = new BsonDocument 
                { 
                    { 
                        "$match", 
                        new BsonDocument 
                            { 
                               { "ProductId" ,  "51293ac844da932e941fa2c4"} 
                            }
                    } 
                };
            var match2 = new BsonDocument 
                { 
                    { 
                        "$match", 
                        new BsonDocument 
                            {  
             ***              { "$gte" ,  new BsonDocument{{"DateTime", timeStamp}} } //,
             ***                 // { "$lt" ,  endDate}
                            }
                    } 
                };

            var group = new BsonDocument 
                { 
                    { "$group", 
                        new BsonDocument 
                            { 
                                { "_id",  new BsonDocument 
                                        { 
                                           { "ProductId" ,  "$ProductId"}
                                           ,{ "DateTime" ,  "$DateTime"  }
                                        }   

                                }, 
                                { 
                                    "AvgOrder", new BsonDocument 
                                                 { 
                                                     { "$avg", "$PurchaseAmount" } 
                                                 } 
                                } 
                            } 
                  } 
                };

  var pipeline = new[] { match, match2, group };
            var aggregateResult = dbSession.GetCollection<RecentOrders>().Aggregate(pipeline); 
```

请参阅***。我想提供特定的时间范围并计算该客户在该时间间隔内的平均订单（按分钟、小时或天的范围）。我相信除了日期范围查询部分（match2）之外，我可以正常工作。我认为问题在于新 BsonDocuments 和查询的棘手组合。如果您能提供帮助，非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-26T13:53:12.393

你已经把东西换了`match2`。它应该是这样的：

```
var match2 = new BsonDocument 
    {{ "$match", new BsonDocument 
        {{ "DateTime", new BsonDocument {
            {"$gte", timeStamp},
            {"$lt", endDate}
        }}}
    }}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-13T07:59:55.783

另一种没有太多花括号的语法

```
var match2 = new BsonDocument()
    .Add("$match",
         new BsonDocument().Add("TimeStamp",
                                new BsonDocument().Add("$gte", timestamp)
                                                  .Add("$lte", end))); 
```

# java - 为什么没有 Java Charset setEncoding 方法？

> ID：15089959
> 
> 赞同：3
> 
> 时间：2013-02-26T13:09:45.413
> 
> 标签：java, character-encoding

我发现[这个优秀的 SO question](https://stackoverflow.com/questions/2281646/whats-the-difference-between-encoding-and-charset)要求区分字符*集*与字符*编码*。这是有道理的：本质上，字符集是可供使用的字形集，其各自的编码是每个字形如何与二进制转换。

然后我去了[Java 7 SE `Charset`API 文档](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html)，惊讶地看到一个`getEncoding()`方法但没有相应的*setter*。所以看起来，至少在 Java 领域，每个字符集都被“绑定”到预先配置的编码。

这让我想到：**为什么这里没有二传手？**为什么 Java 不允许用户定义用于将一组字符绑定到二进制文件的编码？

同样，如果 Java 不支持特定的字符集/编码怎么办？有没有办法使用自定义集/编码来扩展 JRE？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-26T13:16:20.983

因为 Java 所谓的 Charset 就是您所说的编码。CharSet 的文档将 Charset 描述为：

> 十六位 Unicode 代码单元序列和字节序列之间的命名映射。

顺便说一句，Charset 中没有`getEncoding()`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T13:14:18.177

对于这个问题：

> 同样，如果 Java 不支持特定的字符集/编码怎么办？有没有办法使用自定义集/编码来扩展 JRE？

Java 几乎支持您可能想要的任何编码：http: [//docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html](http://docs.oracle.com/javase/7/docs/technotes/guides/intl/encoding.doc.html)

# text - 如何在imacros中输入随机文本？

> ID：15089960
> 
> 赞同：1
> 
> 时间：2013-02-26T13:09:47.783
> 
> 标签：text, random, web-scraping, imacros

```
TAG POS=1 TYPE=TEXTAREA FORM=NAME:frmSendSms ATTR=ID:Message_ CONTENT=Ranndom text 
```

如何在此输入随机文本`iMacros Command`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T20:33:43.913

```
var macro;

macro ="CODE:";
macro +="TAG POS=1 TYPE=TEXTAREA FORM=NAME:frmSendSms ATTR=ID:Message_ CONTENT={{random_text}}"

var random_text="Some random text";

iimSet("random_text",random_text)
iimPlay(macro) 
```

这可以解决问题。

# jquery - jquery click 事件在应用程序中不起作用，但在浏览器的控制台中起作用

> ID：15089961
> 
> 赞同：0
> 
> 时间：2013-02-26T13:09:49.863
> 
> 标签：jquery, ruby-on-rails

我有简单的 div`a.close`链接。当我单击此链接时，它应该删除整个`#login-alert`div。当我将此`a.close`代码输入到浏览器的控制台时，它工作正常，我单击`a.close`并被`#login-alert`删除。但是当我在我的应用程序中使用下面的代码尝试相同的操作时它不起作用。

我是 jquery noob，所以可能是一些微不足道的事情（ps。第一部分 pageX，pageY 用于其他任务）。

```
$(document).ready(function() {
  $('.entry-vote a').click(function(e) {
    pageX = e.pageX;
    pageY = e.pageY;
  });

  $('a.close').click(function(e) {
    $('#login-alert').remove();
  }); 

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:11:31.167

a.close 最有可能是加载后添加的元素，因此您必须这样做

```
$(document).on('click','a.close',function(){
  $('#login-alert').remove();
}); 
```

# javascript - 对 DOM 范围的功能检测支持 (Modernizr)

> ID：15089962
> 
> 赞同：2
> 
> 时间：2013-02-26T13:09:53.323
> 
> 标签：javascript, jquery, html, range, modernizr

曾经有一个人写了一个脚本，可以让他对 span 的内容进行“一键选择”。他的代码依赖于万能的**$**，使用 jQuery 的**浏览器检测**。它就像一个魅力。

然后在决定性的一天，**jQuery 1.9**发布了，它**打破了他的代码**和心。浏览器检测被降级为传说中的东西，再也不会被看到。因此，他寻找新的方法，并找到了**Modernizr**图书馆。这很酷，很彻底，看起来这就是他想要的。唉，事实并非如此。

该库缺少他想要的*一项*功能，即检测他的浏览器是否支持**DOM Range**对象。他被这个奇怪的疏忽弄糊涂了。当然，他在某个地方缺少什么。

你能帮他找到合适的工具来对**DOM Range**进行特征检测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:17:19.997

这段代码就够了吗？

```
var supportsRange = typeof Range === 'object' && typeof document.createRange === 'function' && typeof Selection === 'object' &&  typeof Selection.prototype.getRangeAt === 'function';

if ( supportsRange ) {
    //
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T09:55:41.947

只需检测您需要什么。以下确实做出了一些假设（例如 Range 和 selection 方法的存在`document.createRange()`和暗示存在），但却是一个合理的折衷方案。`window.getSelection()`

演示：http: [//jsfiddle.net/dCvgU/](http://jsfiddle.net/dCvgU/)

代码：

```
$("span").click(function() {
    var body = document.body, range, sel;
    if (typeof document.createRange != "undefined" &&
            typeof window.getSelection != "undefined") {
        range = document.createRange();
        range.selectNode(this);
        sel = window.getSelection();
        sel.removeAllRanges();
        sel.addRange(range);
    } else if (typeof body.createTextRange != "undefined") {
        range = body.createTextRange();
        range.moveToElementText(el);
        range.select();
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-27T17:47:02.930

为了完整起见，这里是两个答案的更完整版本，包装为 jquery 插件。该插件支持所有主流浏览器。

*（它在 coffescript 中，对于 js 代码，前往[js2coffee](http://js2coffee.org)）*

```
$.fn.selectText = () ->
  @each ->
    text = this
    # FF, Chrome, IE9+, and hopefully Opera
    if document.createRange? and window.getSelection?
      selection = window.getSelection()
      range = document.createRange()
      range.selectNodeContents text
      selection.removeAllRanges()
      selection.addRange range
    # <= IE8
    else if document.body.createTextRange?
      range = document.body.createTextRange()
      range.moveToElementText text
      range.select()
    # Safari
    else if window.getSelection?
      selection = window.getSelection()
      selection.setBaseAndExtent text, 0, text, 1 
```

# javascript - 试图将画布交互式立方体 onDocumentMouseDown() 函数放置在旋转立方体上。我有问题。为什么？

> ID：15089967
> 
> 赞同：1
> 
> 时间：2013-02-26T13:10:21.813
> 
> 标签：javascript, three.js, webgl

我从一个教程网站借用了这个开源多维数据集：

```
<script src="http://www.html5canvastutorials.com/libraries/Three.js">
</script>
<script>
window.requestAnimFrame = (function(callback){
    return window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function(callback){
        window.setTimeout(callback, 1000 / 60);
    };
})();

function animate(lastTime, angularSpeed, three){
    // update
    var date = new Date();
    var time = date.getTime();
    var timeDiff = time - lastTime;
    var angleChange = angularSpeed * timeDiff * 2 * Math.PI / 1000;
    three.cube.rotation.y += angleChange;
    lastTime = time;

    // render
    three.renderer.render(three.scene, three.camera);

    // request new frame
    requestAnimFrame(function(){
        animate(lastTime, angularSpeed, three);
    });
}

window.onload = function(){
    var angularSpeed = 0.2; // revolutions per second
    var lastTime = 0;

    // renderer
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // camera
    var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 1000);
    camera.position.z = 700;

    // scene
    var scene = new THREE.Scene();

    // material
    var material = new THREE.MeshLambertMaterial({
        color: 0x0000ff
    });

    // cube
    var cube = new THREE.Mesh(new THREE.CubeGeometry(300, 300, 300), material);
    cube.overdraw = true;
    scene.add(cube);

    // add subtle ambient lighting
    var ambientLight = new THREE.AmbientLight(0x555555);
    scene.add(ambientLight);

    // add directional light source
    var directionalLight = new THREE.DirectionalLight(0xffffff);
    directionalLight.position.set(1, 1, 1).normalize();
    scene.add(directionalLight);

    // create wrapper object that contains three.js objects
    var three = {
        renderer: renderer,
        camera: camera,
        scene: scene,
        cube: cube
    };

    animate(lastTime, angularSpeed, three);
}; 
```

它会生成一个蓝色的旋转立方体。

我想添加画布交互式立方体的这些交互式元素。特别是允许在用户单击时将点添加到从光线检测到的立方体或对象的功能。

[https://github.com/mrdoob/three.js/blob/master/examples/canvas_interactive_cubes.html](https://github.com/mrdoob/three.js/blob/master/examples/canvas_interactive_cubes.html)

在多维数据集代码中使用下面的函数不起作用。为什么？任何人都可以向我解释基本知识以及我想为这个立方体改变什么，或者让我们说任何其他对象？我应该将此代码放在我的代码中的什么位置？

这是我下面带有混合元素的代码。为什么它不起作用？

```
<script src="http://www.html5canvastutorials.com/libraries/Three.js">
</script>
<script>
window.requestAnimFrame = (function(callback){
    return window.requestAnimationFrame ||
    window.webkitRequestAnimationFrame ||
    window.mozRequestAnimationFrame ||
    window.oRequestAnimationFrame ||
    window.msRequestAnimationFrame ||
    function(callback){
        window.setTimeout(callback, 1000 / 60);
    };
})();

function animate(lastTime, angularSpeed, three){
    // update
    var date = new Date();
    var time = date.getTime();
    var timeDiff = time - lastTime;
    var angleChange = angularSpeed * timeDiff * 2 * Math.PI / 1000;
    three.cube.rotation.y += angleChange;
    lastTime = time;

    // render
    three.renderer.render(three.scene, three.camera);

    // request new frame
    requestAnimFrame(function(){
        animate(lastTime, angularSpeed, three);
    });
}

window.onload = function(){
    var angularSpeed = 0.2; // revolutions per second
    var lastTime = 0;

    // renderer
    var renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    // camera
    var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 1000);
    camera.position.z = 700;

    // scene
    var scene = new THREE.Scene();

    // material
    var material = new THREE.MeshLambertMaterial({
        color: 0x0000ff
    });

    // cube
    var cube = new THREE.Mesh(new THREE.CubeGeometry(300, 300, 300), material);
    cube.overdraw = true;
    scene.add(cube);

    // add subtle ambient lighting
    var ambientLight = new THREE.AmbientLight(0x555555);
    scene.add(ambientLight);

    // add directional light source
    var directionalLight = new THREE.DirectionalLight(0xffffff);
    directionalLight.position.set(1, 1, 1).normalize();
    scene.add(directionalLight);

    // create wrapper object that contains three.js objects
    var three = {
        renderer: renderer,
        camera: camera,
        scene: scene,
        cube: cube
    };

    animate(lastTime, angularSpeed, three);

function init() { 

            container = document.createElement( 'div' );
            document.body.appendChild( container );

var PI2 = Math.PI * 2;
            particleMaterial = new THREE.ParticleCanvasMaterial( {

                color: 0x000000,
                program: function ( context ) {

                    context.beginPath();
                    context.arc( 0, 0, 1, 0, PI2, true );
                    context.closePath();
                    context.fill();

                }

            } );

            projector = new THREE.Projector();

            renderer = new THREE.CanvasRenderer();
            renderer.setSize( window.innerWidth, window.innerHeight );

            container.appendChild( renderer.domElement );

            stats = new Stats();
            stats.domElement.style.position = 'absolute';
            stats.domElement.style.top = '0px';
            container.appendChild( stats.domElement );

            document.addEventListener( 'mousedown', onDocumentMouseDown, false );

            //

            window.addEventListener( 'resize', onWindowResize, false );

            }

function onDocumentMouseDown( event ) {

            event.preventDefault();

            var vector = new THREE.Vector3( ( event.clientX / window.innerWidth ) * 2 - 1, - ( event.clientY / window.innerHeight ) * 2 + 1, 0.5 );
            projector.unprojectVector( vector, camera );

            var raycaster = new THREE.Raycaster( camera.position, vector.sub( camera.position ).normalize() );

            var intersects = raycaster.intersectObjects( objects );

            if ( intersects.length > 0 ) {

                intersects[ 0 ].object.material.color.setHex( Math.random() * 0xffffff );

                var particle = new THREE.Particle( particleMaterial );
                particle.position = intersects[ 0 ].point;
                particle.scale.x = particle.scale.y = 8;
                scene.add( particle );

            }

             }; 

             }; 
```

本质上我正在尝试学习three.js以及如何应用不同的功能，但我仍然是Javascript的新手，更不用说webGL或three.js了，所以我可能缺少基础知识。

谢谢！！

# android - 如何在 android 中使用 update_with_media twitter api 将图像上传到 twitter？

> ID：15089971
> 
> 赞同：1
> 
> 时间：2013-02-26T13:10:29.457
> 
> 标签：android

```
https://api.twitter.com/1.1/statuses/update_with_media.json 
```

在对如何在 twitter 上发布图片进行了大量研究之后，我得到了这个 url 来将图片发布到 twitter。但我不知道如何使用它以及我需要传递哪些参数。

我还发现

1) 发布到 Twitpic 是将图像发布到 twitter 的一种方式，但我不知道如何使用该 twitpic 库。

```
I am familiar with posting image to facebook using graph api (url and accesstoken),so I feel that posting image using the above API is much easier. 
```

请建议我使用上述 api

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:23:33.510

检查下面的代码：你必须使用 use `twitter4j-core-2.1.11.jar`&`twitpic4j.jar`

在使用这个[checkthispost](http://dj-android.blogspot.in/2012/05/share-text-to-facebook-twitter-android.html)之前。

使用上面的 android 代码登录 twitter。

您必须登录 twitter 并在此方法中使用`OAUTH_TOKEN`& 。`OAUTH_TOKEN_SECRET`在这我已经通过了`URL`同样的方式你也可以通过`bitmap`。

```
private void hello() {
        // TODO Auto-generated method stub
        String url;

        long result = 0;

        String oth = prefs.getString(OAuth.OAUTH_TOKEN, "");
        String src = prefs.getString(OAuth.OAUTH_TOKEN_SECRET, "");

        Configuration conf = new ConfigurationBuilder()
                .setOAuthConsumerKey(Constants.CONSUMER_KEY)
                .setOAuthConsumerSecret(Constants.CONSUMER_SECRET)
                .setOAuthAccessToken(oth).setOAuthAccessTokenSecret(src)
                .build();

        OAuthAuthorization auth = new OAuthAuthorization(conf,
                conf.getOAuthConsumerKey(), conf.getOAuthConsumerSecret(),
                new AccessToken(conf.getOAuthAccessToken(),
                        conf.getOAuthAccessTokenSecret()));

        ImageUpload upload = ImageUpload.getTwitpicUploader(
                Constants.twitpic_api_key, auth);

        Log.d(main_genral_class.TAG, "Start sending image...");

        try {
                url = upload.upload(" ", new URL("http://i.stack.imgur.com/wz0qZ.jpg").openStream(),
                        "some text");

        } catch (Exception e) {
            e.printStackTrace();
        }

    } 
```

`url`是给你上传图片的 URL

对于位图，您可以使用：`upload.upload(String, inputstream);`

**`Edited`**

我检查了我的代码并替换`twitter4j-core-2.1.11.jar`为`twitter4j-core-3.0.3.jar`

[在此处](https://github.com/dhaval0122/Share_to_Facebook_twitter.git)查看完整代码

并在[https://dev.twitter.com上更改 Twitter 应用程序中的一些设置](https://dev.twitter.com)

![在此处输入图像描述](../Images/96f1e31a677bb504cdccc6d105ffe72f.png)

![在此处输入代码](../Images/5344f25bf411dbe5521f2e608dea90b9.png)

它工作正常....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T06:33:08.343

看看这个教程它解决了我的整个问题 [Twit 图片沿文本](http://www.londatiga.net/it/how-to-post-twitter-status-from-android/)

# ruby - 如何使用 Ruby 通过 Paymill 进行付款

> ID：15089973
> 
> 赞同：5
> 
> 时间：2013-02-26T13:10:34.180
> 
> 标签：ruby, e-commerce, payment-gateway, activemerchant, paymill

我需要向[Paymill](http://paymill.com)付款，我希望能够使用 Ruby 语言来实现这一点。

**更新：**

我确实在 github 上公开发布[了 paymill_on_rails 。](https://github.com/lgs/paymill-on-rails)它是一个基于 Rails 4.0.0 和[paymill-ruby](https://github.com/dkd/paymill-ruby)的 Paymill 订阅系统，在 ruby​​-2.0.0-p247 上运行

另请参阅[家庭项目](http://lgs.github.io/paymill_on_rails/)

[Heroku](https://paymill-on-rails.herokuapp.com)上还部署了一个示例应用程序。请随时分叉并最终做出贡献。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-17T20:52:10.970

我正在使用来自[https://github.com/dkd/paymill-ruby的 paymill gem](https://github.com/dkd/paymill-ruby)

它非常易于使用，只需按照自述文件进行操作，您就会了解它的可能性。它还支持订阅。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:10:34.180

我设法使用以下步骤很容易地实现了这一点：

1.  [在Paymill](http://paymill.com)创建一个新帐户。

2.  从 Paymill 设置页面获取公钥和私钥

3.  安装[activemerchant](http://activemerchant.org) gem：

    ```
    gem install activemerchant 
    ```

4.  我使用以下脚本进行购买

请注意，只要您没有在 Paymill 激活您的帐户，它就会在测试模式下运行。因此，实际上不会转移任何资金。他们还列出了永远不会被借记的[测试信用卡。](https://www.paymill.com/en-gb/documentation-3/reference/testing/)

### 剧本：

```
require 'rubygems'
require 'active_merchant'
require 'json'

# Use the TrustCommerce test servers
ActiveMerchant::Billing::Base.mode = :test

gateway = ActiveMerchant::Billing::PaymillGateway.new(
    :public_key => 'MY_PAYMILL_PUBLIC_KEY', 
    :private_key => 'MY_PAYMILL_PRIVATE_KEY')

gateway.default_currency = 'USD'

# ActiveMerchant accepts all amounts as Integer values in cents
amount = 1000  # $10.00

# The card verification value is also known as CVV2, CVC2, or CID
credit_card = ActiveMerchant::Billing::CreditCard.new(
    :first_name         => 'Bob',
    :last_name          => 'Bobsen',
    :number             => '5500000000000004',
    :month              => '8',
    :year               => Time.now.year+1,
    :verification_value => '000')

# Validating the card automatically detects the card type
if credit_card.valid?

# Capture the amount from the credit card
response = gateway.purchase(amount, credit_card)

if response.success?
puts "Successfully charged $#{sprintf("%.2f", amount / 100)} to the credit card #{credit_card.display_number}"
else
raise StandardError, response.message
end
end 
```

# android - 从下到上与淡入淡出动画android

> ID：15089974
> 
> 赞同：0
> 
> 时间：2013-02-26T13:10:35.377
> 
> 标签：android, animation, slideshow

我正在尝试制作类似动画的幻灯片来模拟任何视频编辑软件中的简单 alpha 遮罩，例如我想要一个图表从下到上。我尝试了属性动画、animatorset 和 alphaanimation。在网上搜索没有任何帮助:(我能够控制翻译/透明度，但不能同时控制。另一种方法是获取图像帧并在它们之间交换（但我正在从这个解决方案运行）另一种解决方案是在进度条上制作图表条酒吧和动画他们，但我有麻烦与png作为prgressbar修剪png（我真的不知道这是否是一个好的解决方案）任何想法？

# string - 如何比较字符串和整数 Postgres

> ID：15089982
> 
> 赞同：2
> 
> 时间：2013-02-26T13:10:55.377
> 
> 标签：string, postgresql, integer, compare

如何在 Postgres 中将空字符串与整数进行比较？

例如：Select * From xyz where anynumber = ''

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:19:07.900

A numeric column can't be "blank", but it can be `null`. I think that's what you want:

Given that `anynumber` is nullable, ie

```
create table xyz (
    ...
    anynumber int,  -- ie not "NOT NULL"
    ...
) 
```

You can test for null:

```
select * From xyz where anynumber is null 
```

# asp.net - Intersystems Cache - 使用 Cache Server Page (Intersystems) 通过 javascript 调用 ASHX

> ID：15089984
> 
> 赞同：1
> 
> 时间：2013-02-26T13:10:57.990
> 
> 标签：asp.net, ihttphandler, intersystems-cache

我正在使用缓存服务器页面（Intersystems）并尝试通过 javascript 调用 ASHX，但它不起作用。

如何在缓存服务器页面中调用用 c# 编写的 ashx？

我尝试使用以下方法。

系统间缓存

```
 Class ArithematicMean.MeanPage Extends %CSP.Page
{

ClassMethod OnPage() As %Status
{
    &html<<html id="arithematicmean">
<head>

<script type="text/javascript" src="external_javascript.js"></script>
<script type="text/javascript" src="MeanCalculation.js"></script>

</head>

<body>

<script language='javascript'>
function mean(array)
{
 var Mean = 0, N = 0, MeanPrev = 0, Sum=0, p;  
 for(var i = 0; i < array.length; i++) 
 {
   ++N;

   p = parseFloat(array[i]);
   if (!isNaN(p)) Sum += p;

   MeanPrev = Mean;
   Mean += (array[i] - MeanPrev) / N;
 }
 alert (Sum);
 alert(Mean ? Math.round(Mean*10)/10 : 0);
}

var httpReq = null;
    function InstructionsImageASHX() 
    {

        httpReq = XMLHttpRequest();

        httpReq.open("GET", "InstructionsImage.ashx", true);
         alert('hi123');
         httpReq.onreadystatechange = XMLHttpRequestCompleted;
        httpReq.send(null);

    }

    // initialize XMLHttpRequest object
    function XMLHttpRequest() {
        var xmlHttp;
        try {
            // Opera 8.0+, Firefox, Safari
            xmlHttp = new XMLHttpRequest();
        }
        catch (e) {
            // IEBrowsers
            try {
                xmlHttp = new ActiveXObject("Msxml2.XMLHTTP");
            }
            catch (e) {
                try {
                    xmlHttp = new ActiveXObject("Microsoft.XMLHTTP");
                }
                catch (e) {
                    return false;
                }
            }
        }
        return xmlHttp;
    }

    function XMLHttpRequestCompleted()
    {
        if (httpReq.readyState == 4)
        {
            try
            {
                alert(httpReq.responseText);
            }
            catch (e)
            {
            }
        }
    }
</script>

<center>
<h1> Sum and Arithemetic Mean Calculation for 3 Numbers</h1>
</center>
<table cellpadding="5">
<tr>
<td width="20%">
</td>
<td  width="20%">
<label name="lblnumone"> Value One</label>
</td>
<td  width="20%"> 
<input type="text" name="txtnumone" id="txtnumone" runat="server" width="10"/>
</td>
</tr>

<tr>
<td width="20%">
</td>
<td width="20%">
<label name="lblnumtwo"> Value Two</label>
</td>
<td width="20%"> 
<input type="text" name="txtnumtwo" id="txtnumtwo"  runat="server" width="21"/>
</td>
</tr>

<tr>
<td width="20%">
</td>
<td width="20%">
<label name="lblnumthree"> Value Three</label>
</td>
<td width="20%"> 
<input type="text" name="txtnumthree" id="txtnumthree" runat="server"  width="21"/>

</td>
</tr>

<tr>
<td width="20%">
</td>
<td width="20%">
<button id="btnInstructionsImage" onclick= 'InstructionsImageASHX();'>Instructions in Image</button>
</td>
<td width="20%"> 
<button id="btnCalculate" onclick='alert( mean( [document.getElementById("txtnumone").value,document.getElementById("txtnumtwo").value,document.getElementById("txtnumthree").value] ) );'>Calculate Mean</button>
</td>
<td width="20%">
<img src="InstructionsImage.ashx" height="100" width="200">
</td>
</tr>

</table>

</body>
</html>>
    Quit $$$OK
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-05T11:30:53.030

如果我理解正确，您只想`ASHX`从客户端调用`JavaScript`。

如果是这样，那完全没有`CSP`问题。该页面可以由`JSP`或`PHP`具有相同结果的`HTML`页面生成。问题可能出在您的`JavaScript`代码中。尝试一些教程`ASHX`，或找到一些现成的`AJAX`解决方案。

因为它是一个`CSP`页面，所以它不必是静态的。您最好使用一些`Caché ObjectScript`代码来生成重复代码并从数据库中插入一些内容。例如：

```
for i=1:1:3 {
    &html< 
        <tr>
            <td><label>Value no.#(i)#</label></td>
            <td><input type="text" name="value#(i)#" id="value#(i)"></td>
        </tr>
    >
} 
```

*`Value no.1`*这会生成带有to*`Value no.3`*标签的三行。

# python - 如何使用 Coubase Python 客户端库高效检索？

> ID：15089986
> 
> 赞同：1
> 
> 时间：2013-02-26T13:11:04.790
> 
> 标签：python, performance-testing, couchbase

**行动：**我运行以下代码：

```
#Code to fetch a key from Couachbase serially again and again
from couchbase.client import Couchbase
couchbase = Couchbase("ubuntumartini03", "default", "")
bucket = couchbase["martini-tag-manager"]
while True:
    print bucket.get("somekey") 
```

**结果：**运行此代码，我能够***每秒进行 500 次操作***。

**行动：**我运行了这个代码的四个实例。

**结果：我*****每秒***可以进行2000 次操作。

**结论：**对于上面给定的代码，瓶颈不是沙发底座每秒可以处理的最大可能操作数或给定机器可以进行的最大可能操作数。

# **问题：**

> ```
> How to make max possible ops per sec by single instance itself? 
> ```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:52:01.260

Couchbase Pytnon 客户端基本上是同步的，并且不利用您可能拥有的多个内核。它试图实现多线程行为，但使用 CPython 解释器绝对没有意义。只有使用 Gevent 之类的东西完全重新实现才会有所帮助。

也看看这个[错误](http://www.couchbase.com/issues/browse/PYCBC-28)。

# c# - 单击超链接时防止显示详细信息

> ID：15089988
> 
> 赞同：3
> 
> 时间：2013-02-26T13:11:30.597
> 
> 标签：c#, wpf, datagrid, hyperlink

我想知道当有人单击单元格内的超链接或按钮时，如何防止在 DataGrid 中显示详细信息行。当您尝试单击超链接并显示详细信息而不是链接时，这真的很烦人。

另一个问题是我在一列中有一些操作按钮，因此当详细信息折叠时，您必须先单击行以显示详细信息，然后单击例如编辑按钮。

样本：

主窗口.xaml.cs

```
namespace WpfApplication1
{
    public class Item
    {
        public string Column0 { get; set; }
        public string Mail { get; set; }
    }

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
            DataContext = this;
        }

        public ObservableCollection<Item> Items
        {
            get
            {
                ObservableCollection<Item> i = new ObservableCollection<Item>();
                i.Add(new Item() { Column0 = "dsaads", Mail = "mail@sad.com" });
                i.Add(new Item() { Column0 = "wdads", Mail = "adsdas@sad.com" });
                return i;
            }
        }

        public void HyperlinkClick(object sender, RoutedEventArgs e)
        {
            MessageBox.Show("Clicked");
        }
    }
} 
```

主窗口.xaml

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <DataGrid RowDetailsVisibilityMode="VisibleWhenSelected" ItemsSource="{Binding Items}" AutoGenerateColumns="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Column0" Binding="{Binding Column0}" />
                <DataGridHyperlinkColumn Header="Mail" Width="*" Binding="{Binding Mail}" >
                    <DataGridHyperlinkColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="Padding" Value="2,0,2,0" />
                            <EventSetter Event="Hyperlink.Click" Handler="HyperlinkClick" />
                        </Style>
                    </DataGridHyperlinkColumn.ElementStyle>
                </DataGridHyperlinkColumn>
            </DataGrid.Columns>

            <DataGrid.RowDetailsTemplate>
                <DataTemplate>
                    <Grid Height="100">

                    </Grid>
                </DataTemplate>
            </DataGrid.RowDetailsTemplate>
        </DataGrid>
    </Grid>
</Window> 
```

要查看问题：选择第一行，然后尝试单击第二行中的超链接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:41:57.187

**您可以在超链接“ OnPreviewMouseDown** ”上处理隧道事件，这将阻止事件到达显示 RowDetailsTemplate 的 DataGrid。

```
 private void OnPreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            var hyperlink = (Hyperlink)sender;
        Process.Start(hyperlink.NavigateUri.AbsoluteUri);
        e.Handled = true;
        } 
```

**完整示例：**

```
<Window x:Class="DummyTree.DataGridTest" xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" Title="DataGridTest" Height="300" Width="300">
    <Grid>
        <DataGrid ItemsSource="{Binding Customers}">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="First Name">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <Hyperlink PreviewMouseDown="OnPreviewMouseDown" NavigateUri="http://www.google.com">
                                    <TextBlock Text="{Binding Name}" />
                                </Hyperlink>
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
            <DataGrid.RowDetailsTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Name}" />
                        <TextBlock Text=" details here" />
                    </StackPanel>
                </DataTemplate>
            </DataGrid.RowDetailsTemplate>
        </DataGrid>
    </Grid>
</Window> 
```

**代码背后：**

```
using System.Collections.ObjectModel;
using System.Windows;
using System.Windows.Input;

namespace DummyTree
{
    public partial class DataGridTest : Window
    {
        public DataGridTest()
        {
            DataContext = new CustomerVM();
            InitializeComponent();
        }

        private void OnPreviewMouseDown(object sender, MouseButtonEventArgs e)
        {
            var hyperlink = (Hyperlink)sender;
        Process.Start(hyperlink.NavigateUri.AbsoluteUri);
        e.Handled = true;
        }
    }

    public class CustomerVM
    {
        public ObservableCollection<Customer> Customers { get; set; }
        public CustomerVM()
        {
            Customers = new ObservableCollection<Customer> { new Customer { Name = "Leo" }, new Customer { Name = "Om" } };
        }
    }

    public class Customer
    {
        public string Name { get; set; }
    }
} 
```

# javascript - div 可见性连续切换

> ID：15089991
> 
> 赞同：0
> 
> 时间：2013-02-26T13:11:36.240
> 
> 标签：javascript, jquery, html, css, jquery-ui

这很简单，但我无法修复这个错误。我有一个`div`默认可见并隐藏`mouseover`以显示其下方的菜单，但出于某种明显的原因，可见性效果会不断重复自身，而不仅仅是在`mouseover`and上`mouseout`。

我使用了以下 JavaScript

```
$(document).ready(function(e) {
    $("#butt").mouseover(function () {
        $(this).closest("button").css("visibility","hidden");
    })
    $("#butt").mouseout(function () {
        $(this).closest("button").css("visibility","visible");
    });
}); 
```

[小提琴在这里](http://jsfiddle.net/Hunain/xMwCN/1/)

当您`mouseover`在小提琴中的图像时，它会不断隐藏和出现...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T13:27:35.143

你的小提琴的行为是非常合乎逻辑的。您尝试在鼠标悬停时隐藏某些内容，但是当该项目有效消失时，鼠标不再位于其上！所以有一个mouseout！这就是它闪烁的原因，只需尝试实现比这更合乎逻辑的行为，您就不会再遇到这种问题了。

不闪烁的样本：

```
 $(document).ready(function(e) {
    $("#butt").mouseover(function () {
        $("span", $(this)).css("visibility","hidden");
      })
      $("#butt").mouseout(function () {
        $("span", $(this)).css("visibility","visible");
      });
}); 
```

[http://jsfiddle.net/xMwCN/5/](http://jsfiddle.net/xMwCN/5/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-26T13:19:04.697

我假设这是因为当按钮被隐藏时触发鼠标悬停，并且因为当鼠标悬停触发时光标仍然在同一个位置，它会触发鼠标悬停。我建议您将按钮包装在容器中，然后将鼠标悬停/鼠标悬停连接到容器上。然后你可以隐藏/显示里面的按钮。在您的小提琴上，您隐藏的是 b 而不是按钮。也许代替

```
$(this).css('visibility', 'hidden') 
```

它应该是

```
$('button', this).css('visibility', 'hidden') 
```

我还注意到您的 CSS 悬停样式也影响了这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-26T13:47:42.273

您应该使用 css 属性`opacity`，`visibility`否则元素将不再存在，再次激活鼠标事件。

我已经[更新了你的小提琴](http://jsfiddle.net/xMwCN/8/)，灰色盒子在鼠标悬停时不可见

但是你想在这里做的是：

```
$(document).ready(function(e) {
        $("#butt").mouseover(function () {
            $(this).css("opacity","0");
          })
          $("#butt").mouseout(function () {
            $(this).css("opacity","1");
          });
    }); 
```

而且您的 css 正在更改显示，女巫导致了一些可见性问题，您可能希望将其更改为：

```
.info {
    display: none;
} 
```

或者以其他方式检查哪个元素需要具有 :hover 属性。

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T13:28:13.953

您需要面板的固定高度。这是因为图像的高度是 400px，当你悬停它时，图像会隐藏并显示菜单。但是，菜单高度小于 400px。现在您没有悬停面板并再次显示图像并重复问题。最简单的解决方法是为面板设置高度。

```
.panel { height:400px;}
.panel ul{ margin:0;} 
```

希望这可以解决您的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-26T13:30:50.983

如果这是一个可接受的解决方案，您可以执行以下操作以避免闪烁：

```
$(document).ready(function(e) {
    $(".panel").mouseover(function () {
        $("#butt").css("visibility","hidden");
      })
      $(".panel").mouseout(function () {
        $("#butt").css("visibility","visible");
      });
}); 
```

当您将鼠标悬停在整个面板上时，这会删除文本，然后它会出现在 mouseout 上。您不能隐藏 div 并在该 div 上调用 mouseout，带有悬停的 div 必须一直呆在那里以避免闪烁问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-27T07:18:46.023

我得到了我正在寻找的答案，每个人，因为我能够通过每个人提供的指导和答案来推断结果。

如前所述，我的 javascripts 隐藏了 mouseenter 上的 div 并使其在 mouseleave 上可见；当鼠标悬停时它被隐藏并且浏览器将其理解为mouseleave，因此它不断切换，可见和隐藏

我现在所做的代码是

```
$(document).ready(function(e) {
        $("#butt").mouseenter(function () {
            $("#butt").css("visibility","hidden");
          })
          $("#info2").mouseleave(function () {
            $("#butt").css("visibility","visible");
          });
    }); 
```

因此 mouseleave 在它下面的 div 上，我想在上面 div 的 mouseenter 上显示

# python - 带有 unicode 文件名的 Attach_file 显示为“noname”

> ID：15089994
> 
> 赞同：0
> 
> 时间：2013-02-26T13:11:41.253
> 
> 标签：python, django, email

我对包含 unicode 字符（主要是 æ、ø 和 å）的附件在电子邮件中显示为“noname”有疑问。附加文件来自 FileFields，因此它们是从系统附加的。

这是消息功能的一部分：

```
msg = mail.EmailMessage()
msg.subject = u"%s" % message.subject
msg.from_email = "%s <%s>" % (message.author_name, message.author_email)
msg.content_subtype = "html"
msg.body = render_to_string("core/send_message_all.html", locals())
message_to = re.split(", |,", message.receiver)
if message.file1:
    msg.attach_file(message.file1.file.path)
msg.send(fail_silently=False) 
```

我正在使用 Django 1.4.5。有谁知道我该如何解决这个问题？我曾考虑过在上传时对文件名进行 slugify，但随后我还必须对现有文件进行 slugify。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T14:32:30.607

我最终采用了另一种方法。我使用 attach() 而不是 attach_file() 并仅更改了附件上的文件名。

在文档模型中：

```
def filename(self):
    return unicodedata.normalize('NFKD', os.path.basename(self.file.name)).encode('ascii','ignore') 
```

在views.py中：

```
file_1 = open(message.file1.file.path)
msg.attach(message.file1.filename(), file_1.read(), message.file1.content_type) 
```

“message.file1”的原因是因为它是一个外键

带来不便敬请谅解 ：-）

# javascript - 选择组的选择选项？

> ID：15089995
> 
> 赞同：-1
> 
> 时间：2013-02-26T13:11:44.293
> 
> 标签：javascript, jquery, jquery-ui

我有两个带有类的选择，select1 和 .select2 以及一个带有类 .btn 的按钮现在当两个选择都被单击时，只有按钮颜色必须改变。谁可以帮我这个事

这必须使用 jquery 来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T13:15:57.233

像这样？

```
$('.select1,.select2').on('change', function(){
   $('.btn').addClass('newClassWithColorChange');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T13:20:10.583

这是工作解决方案 [http://jsfiddle.net/ApfJz/7/](http://jsfiddle.net/ApfJz/7/)

HTML：

```
<select class="select1">
    <option>1</option>
    <option>2</option>
    <option>3</option>
</select>
<select class="select2">
    <option>10</option>
    <option>20</option>
    <option>30</option>
</select>
<input type="button" id="mybutton" value="Button" /> 
```

javascript:

```
$(document).ready(function () {
    $('.select1, .select2').change(function(){
        $('#mybutton').css('background-color', 'red'); // here do what you want on dropdown change        
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T13:21:43.077

```
$('.select1,.select2').on('change', function(){

   if(!$(this).hasClass('clicked'))
   {
       $(this).addClass("clicked");
   }
    if($("select.clicked").length == 2)
      $('.btn').addClass('newClassWithColorChange');
}); 
```

# python - Nose 不会从导入的模块运行文档测试

> ID：15089998
> 
> 赞同：4
> 
> 时间：2013-02-26T13:11:50.823
> 
> 标签：python, nose, doctest

我有一个结构像这样的项目：

```
my_project_with_tests/
  project/
    __init__.py
    module.py
  test/
    test.py 
```

`module.py`包含两个`doctest`'ed 函数：

```
def foo():
  """
  >>> foo()
  1
  """
  return 1

def test_foo_doctest():
    """
    >>> module.foo()
    1
    """
    pass

def bar():
  """
  >>> bar()
  """
  return 1 
```

`test.py`包含运行测试所需的位：

```
import sys
import os.path
sys.path = [os.path.abspath("../project")] + sys.path

import module

def test_foo():
    assert module.foo() == 1

def test_bar():
    assert module.bar() == 1 
```

我目前正在使用`nose`with运行我的测试

```
nosetests                   \
    --all-modules           \
    --traverse-namespace    \
    --with-coverage         \
    --cover-tests           \
    --with-doctest          \
    --where test/ 
```

但是，它不会`doctests`从我的`project`源目录运行（但从`doctests`测试目录运行是可以的，因为`test_foo_doctest`通过了）。

1.  这是打电话的好方法`nose`吗？
2.  如何`doctests`从`project`目录 运行
    *   使用`nose`
    *   不改变目录结构
    *   没有在`project`目录中运行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T15:52:12.507

1.  这是调用鼻子的好方法，但是有一个小问题会阻止您的文档测试运行。见#2

2.  更改`--where test/`为`--where .` 假设您从`project/project`. 这样鼻子会看到文档测试。现在它只在测试/