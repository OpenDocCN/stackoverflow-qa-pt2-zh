# StackOverflow 问答 12605000-12605999

# mysql - Heroku/ClearDB 的 MySQL Workbench - 登录问题？

> ID：12605001
> 
> 赞同：1
> 
> 时间：2012-09-26T15:16:48.177
> 
> 标签：mysql, heroku, mysql-workbench

我有来自 Heroku 的 clearDB 用户名和密码。我也有通过使用连接到数据库的 URL：

```
heroku config --app myappname 
```

我已经使用 MySQL Workbench 建立了一个连接，如果我使用从 Heroku 获得的用户名和密码测试连接，它就会成功连接。但是，如果我尝试运行任何 SQL 命令，例如：

```
CREATE DATABASE MY_DATABASE_NAME; 
```

我收到以下错误

```
Error Code: 1044\. Access denied for user 'myherokuusername'@'%' to database 'MY_DATABASE_NAME' 
```

通常我会期望

'myherokuusername'@'%'

说

'myherokuusername@localhost'

这可能是问题的根源。但是我看不到任何地方设置用户“myherokuusername”是@localhost？

有没有人以前有过这种情况或知道解决方案是什么？我对 MySQl 不是特别有经验，我可以运行基本查询等，但它的管理方面我不太熟悉，所以任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T10:02:42.223

事实证明，那天我们的 heroku 应用程序普遍存在问题。第二天再次尝试，mySQL 正常工作。如果有人有同样的问题，可能值得等待一天再试一次，如果你能负担得起的话。

# python - Tkinter 的非标准窗口？

> ID：12605003
> 
> 赞同：4
> 
> 时间：2012-09-26T15:16:59.750
> 
> 标签：python, tkinter

有没有办法用 Tkinter 创建非标准窗口？我想在屏幕上显示一些浮动图像，里面有 Tkinter 小部件。想想 Mac 的 Growl、iPad 上的 Siri、Mac OS 音量/亮度变化边框等。如果这不可能，有没有办法摆脱带有标题的窗口顶部栏并关闭/最小化/resize 按钮，并且需要脚本完成（或修饰符-Q 击键）才能关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:04:37.657

[wm_overrideredirect](http://epydoc.sourceforge.net/stdlib/Tkinter.Wm-class.html#wm_overrideredirect)将删除标准窗口边框。你仍然会被一个矩形窗口困住。您可以使用[wm_attributes](http://effbot.org/tkinterbook/wm.htm#wm.Wm.wm_attributes-method)调整窗口的透明度（查找`alpha`属性），但这仅适用于 Windows 和 Mac。

已经尝试过使用 tcl/tk 来塑造窗口，尽管它需要编译一些代码，但您可能可以使用 Tkinter。请参阅tcl'ers wiki 上的[Managed and Shaped toplevel 。](http://wiki.tcl.tk/13409)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-12T21:46:45.780

是的，你可以！您可以使用

`app.overrideredirect(True)`

*其中应用程序 = Tk()*

从这里开始，您会遇到一个不是顶级的窗口；它也没有任务栏位置；为了解决这个问题，我们可以使用： `app.attributes('-topmost', 1)` 但即使现在你只有一个矩形；您将需要创建一个***自定义***标题栏；这只是一个带有标题、退出、最小化按钮等的框架。

要从标题栏中移动窗口，我们使用：

```
 def get_pos(event):
    xwin = app.winfo_x()
    ywin = app.winfo_y()
    startx = event.x_root
    starty = event.y_root

    ywin = ywin - starty
    xwin = xwin - startx

    def move_window(event):
    app.geometry("400x400" + '+{0}+{1}'.format(event.x_root + xwin, event.y_root + ywin))
    startx = event.x_root
    starty = event.y_root

    app.TopFrame.bind('<B1-Motion>', move_window)
app.TopFrame.bind('<Button-1>', get_pos) 
```

其中 TopFrame 是标题栏。这种方法看起来过于复杂，但是它允许栏直接在鼠标上移动而不会移动到角落。

回答你的后一个问题：制作浮动物体是很有可能的；利用：

```
app.overrideredirect(True)
app.image = tk.PhotoImage(file='image.GIF')
image = Label(root, image=app.image, bg='white')
app.attributes("-transparentcolor", "white") 
```

# ruby-on-rails - 如何将 ActiveRecord 过滤器添加到特定对象？

> ID：12605007
> 
> 赞同：1
> 
> 时间：2012-09-26T15:17:06.243
> 
> 标签：ruby-on-rails, activerecord

在 Rails 3.2 上，我想有条件地在特定 ActiveRecord 对象上添加 after_save 调用。我不想在过滤器上使用条件，因为我不希望对象本身对是否设置挂钩负责。

该问题类似于[如何在运行时创建 after_save 回调，](https://stackoverflow.com/questions/2805075/how-to-create-an-after-save-callback-on-runtime)但与 3.2 相关，而不是 Rails 2。

我试过在特征类上调用过滤器，但这似乎不起作用。

也许对 ActiveRecord 内部有更深入了解的人可以提供一些见解？

# html - 无法在 WordPress 主题中让文本环绕侧边栏容器

> ID：12605010
> 
> 赞同：0
> 
> 时间：2012-09-26T15:17:15.523
> 
> 标签：html, css, wordpress, containers, word-wrap

结构：

```
#main {}

#content-wrap {
  width: 100%
}

#sidebar-wrap {
  float: right;
  width: 300px;
}
```

```
<div id="main">
  <div id="content-wrap"></div>
  <div id="sidebar-wrap"></div>
</div>
```

这个想法是让内容文本环绕不太高的侧边栏。主题默认为两个并排的容器，内容设置为 70% 宽度。我将该宽度更改为 100% 以尝试换行，但将侧边栏驱动到内容下方。

已经尝试过`isplay: visible` `clear: both`，但没有任何效果。我也试过`vertical-align: top`了，它什么也没做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:22:45.617

你可以添加

```
div#content-wrap {float: left;} 
```

到你的 CSS。我不确定您是否要浮动内容面板，但在某些时候您需要

```
clear: both; -- or clear left/right depending on what you are wanting to happen 
```

让其他对象承认它们的存在（即，使页脚附加到底部）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:25:23.007

```
<div id="main">
<div id="content-wrap">
    <div id="sidebar-wrap"></div>
    content-wrap content goes here
</div>
</div> 
```

应该这样做

见[http://jsfiddle.net/tvmSV/2/](http://jsfiddle.net/tvmSV/2/)

# c# - 设计时表示

> ID：12605011
> 
> 赞同：1
> 
> 时间：2012-09-26T15:17:19.257
> 
> 标签：c#, system.componentmodel

我有兴趣尝试让一个项目在设计时表现出来，但不确定我是否能实现我想要实现的目标。我已经构建了一个新的 webpart，一个**图表**。这个 webpart 有一个**ChartSettings**，它有许多可通过 EditorPart 配置的属性，并且在设置中有许多**SeriesSettings**。

```
public class Chart : WebPart
{
   [Personalizable(Shared)]
   public ChartSettings Settings { get; set; }
}

public class ChartSettings
{
   public String ConnectionString { get; set; }
   public String QueryString { get; set; }
   public List<SeriesSettings> { get; }
}

public class SeriesSettings
{
   public ChartType Type { get; set; }
   public String Theme { get; set; }
} 
```

Chart 将 ChartSettings 标记为 Personalizable，因此它是序列化的。这在网络上运行良好，设置被保留并且可以正确修改和恢复。但是，如果在其他工具（例如 SharePoint 设计器）中打开页面，则会由于转换而开始出现错误。输出 html 看起来很模糊，如下所示：

```
<Chart myChartSettings="MyNamespace.ChartSettings"/> 
```

MyNamespace.ChartSettings 无法转换为 ChartSettings 的实例。这可以通过属性上的 TypeConverters 来解决，并在我可以生成的转换器中使用诸如序列化之类的东西：

```
<Chart myChartSettings="ConnectionString=A, QueryString=B, SeriesSettings={{Type=Bar, Theme=Daisy}, {Type=Line, Theme=Poppy}}" /> 
```

然而，我真正想在 SharePoint 设计器等工具中的 html 中实现的是：

```
<Chart>
   <ChartSettings ConnectionString="A" QueryString="B">
      <SeriesSettings Type="Bar" Theme="Daisy"/>
      <SeriesSettings Type="Line" Theme="Poppy"/>
   </ChartSettings>
</Chart> 
```

有谁知道这是否可能，如果可以，如何实现这一点我遇到了以下问题，但不确定使用哪个，以及以什么组合来实现我想要的和我想要的建议。

*   [TypeConverter(typeof(ExpandableObjectConverter))]
*   [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
*   [内容属性]

**编辑**

我几乎设法到达那里：

```
public class Chart : WebPart
{
   [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
   [PersistenceMode(PersistenceMode.InnerProperty)]
   public ChartSettings Settings { get; set; }
}

[TypeConverter(typeof(ExpandableObjectConverter))]
public class ChartSettings
{
   public String ConnectionString { get; set; }
   public String QueryString { get; set; }

   [DesignerSerializationVisibility(DesignerSerializationVisibility.Content)]
   [PersistenceMode(PersistenceMode.InnerProperty)]
   public List<SeriesSettings> { get; }
}

[TypeConverter(typeof(ExpandableObjectConverter))]
public class SeriesSettings
{
   public ChartType Type { get; set; }
   public String Theme { get; set; }
} 
```

这给了我：

```
<WpNs0:Chart>
   <Settings ConnectionString="testConnectionString" SelectQuery="testQuery">
      <Series Capacity="4"></Series>
   </Settings>
</WpNs0:Chart> 
```

而不是

```
<WpNs0:Chart>
   <Settings ConnectionString="testConnectionString" SelectQuery="testQuery">
      <Series>
         <SeriesSettings Theme="default" Type="Bar"/>
         <SeriesSettings Theme="default" Type="Area"/>
         <SeriesSettings Theme="default" Type="Spline"/>
      </Series>
   </Settings>
</WpNs0:Chart> 
```

# c# - 共享网络表单代码隐藏以进行用户控制时如何访问公共属性

> ID：12605017
> 
> 赞同：0
> 
> 时间：2012-09-26T15:17:39.860
> 
> 标签：c#, asp.net

我正在尝试制作一个 ascx 控件，我们的前端开发人员只需制作一个新的 .ascx 并在该实例中指向该特定的 .ascx 即可对其进行模板化。但是，我在访问共享代码隐藏场景中的属性时遇到了问题。

我有以下共享的代码

```
public partial class TemplateCodeBehind : TemplateControlBase
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    // Ascx Available properties
    public string GetOption1Value { get { return Option1; } }
    public string GetOption2Value { get { return Option2; } }
    public string GetOption3Value { get { return Option3; } }
    public string GetOption4Value { get { return Option4; } }
} 
```

请注意，返回的那些选项是`TemplateControlBase`类的公共属性。在我的 Templates 子文件夹中，我有以下 ascx

```
<%@ Control Language="C#" AutoEventWireup="false" CodeBehind="../TemplateCodeBehind.ascx.cs" Inherits="MyNamespace.JqueryTemplates.TemplateCodeBehind" %>
<%@ Import Namespace="MyNamespace.JqueryTemplates" %>

<div>
     Option1: <%= GetOption1 %>

</div> 
```

这编译得很好，但是当我尝试加载我的测试 ascx 时，我收到以下错误

> 发生了错误。DotNetNuke.Services.Exceptions.PageLoadException：c:\Projects\DNN-Dev\Website\DesktopModules\Module.JqueryTemplates\Templates\Test.ascx(5)：错误 CS0103：当前上下文中不存在名称“GetOption1”

我曾尝试更改`<%=`为`<%#`并打电话`Page.Databind()`，但似乎没有任何效果。

关于我如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:06:56.777

在 ascx 文件中更改`GetOption1`为`GetOption1Value`

# java - 创建其他图像的一部分的图像

> ID：12605018
> 
> 赞同：0
> 
> 时间：2012-09-26T15:17:43.127
> 
> 标签：java, android, bitmap, sprite-sheet

我正在尝试在屏幕上绘制一个精灵表动画，这在我使用此代码之前效果很好。

```
 canvas.drawColor(Color.TRANSPARENT);
    Rect src = new Rect(CurrentSprite.x * SheetSize.x, CurrentSprite.y * SheetSize.y, (CurrentSprite.x * SheetSize.x) + SheetSize.x, (CurrentSprite.y * SheetSize.y) + SheetSize.y);
    Rect dst = new Rect(X, Y, X + SheetSize.x, Y + SheetSize.y);
    canvas.drawBitmap(bmp, src, dst, null); 
```

但是，我现在需要先旋转图像，然后再将其绘制在屏幕上。所以我更改了代码，所以我正在制作精灵的本地副本。我要画这个但是在这里我遇到了问题。我正在使用 Bitmap.createBitmap 方法，但该方法似乎没有任何作用，因为当我查看屏幕时，屏幕上会绘制完整的精灵表，有时我会遇到 OutOfMemoryException（可以理解，因为完整图像非常大）。

```
 canvas.drawColor(Color.TRANSPARENT);
    Matrix matrix = new Matrix();
    matrix.postRotate(Degrees);
    Bitmap tempAnimationBmp = Bitmap.createBitmap(bmp, CurrentSprite.x * SheetSize.x, CurrentSprite.y * SheetSize.y, (CurrentSprite.x * SheetSize.x) + SheetSize.x, (CurrentSprite.y * SheetSize.y) + SheetSize.y, matrix, true);
    canvas.drawBitmap(tempAnimationBmp, X, Y, null);
    tempAnimationBmp.recycle(); 
```

为什么我会得到完整的精灵表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:46:46.973

我建议使用其中一个[DrawableContainer](http://developer.android.com/intl/de/reference/android/graphics/drawable/DrawableContainer.html)而不是尝试创建一堆位图。Drawables 非常易于使用——您只需设置尺寸，将其传递给画布，它就会将自己绘制到该位置的画布上。Drawable 的优点在于它们也很容易制作，因此您可以创建一个自定义 SpriteDrawable 类，该类从系统中获取资源并仅将其区域绘制到画布上。

通过处理这个流程而不是尝试创建一堆位图，您将节省大量内存，并且在您尝试更多地使用 Android 的图形系统时可能会让人头疼。

# android - Android系统loop7流程

> ID：12605026
> 
> 赞同：0
> 
> 时间：2012-09-26T15:18:14.937
> 
> 标签：android, loops, process

我看到android系统有loop7进程，它一直在后台运行。当我运行一些游戏应用程序时，我还看到了其他循环过程。例如，循环 23。

我想知道这些进程在做什么？谁调用它们？我谷歌它，但没有找到答案。

谢谢，

# c++ - 命令行参数不递增inc argc

> ID：12605027
> 
> 赞同：1
> 
> 时间：2012-09-26T15:18:16.223
> 
> 标签：c++, command-line, command-line-arguments, argument-passing

我是 C++ 新手，我正在尝试了解它是如何工作的。所以我有下一个代码：

```
int _tmain(int argc, _TCHAR* argv[])
{
std::wcin.get();//for console window input
int i=1;
    // decode arguments
    if(argc < 2) {
        printf("You must provide at least one argument\n");
        exit(0);
    }
    // report settings
    for (;i<argc;i++) printf("Argument %d:%s\n",i,argv[i]);

return 0;
} 
```

了解 argc 和 argv 的工作原理。但无论我在控制台中输入多少参数，argc 都不会增加。它仍然是 1。我知道 argv[0] 是程序名称。我的输入类似于：“aaa bbb ccc ddd”。我相信这个 argc 应该是 5 对吗？我究竟做错了什么 ？为什么它不会增加？

谢谢 。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:21:24.493

似乎您正在使用 MSVS（签名为`_tmain(int argc, _TCHAR* argv[])`）。如果您从 IDE 运行代码，则需要在项目设置中指定参数，而不是命令行。

![在此处输入图像描述](../Images/f4bc3eb9ed862e2577d08cdf4d8e64c9.png)

从命令行运行，如：

```
test.exe arg1 arg2 
```

也将正常工作。你在做什么不会修改论点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:21:40.793

调用 wcin.get() 不会影响 argv 或 argc。参数在程序启动时一开始就指定。它们在命令行上指定，紧跟在程序名称之后，用空格分隔。

# memory - 为什么要在 PostScript 中关闭字典？

> ID：12605029
> 
> 赞同：2
> 
> 时间：2012-09-26T15:18:27.550
> 
> 标签：memory, stack-overflow, postscript

`PostScript`书籍总是建议小心处理字典。分离用户字典并保持较小，不再需要时关闭字典，避免重载全局字典等。

但是，我认为，这些说明可以追溯到旧时代，那里的内存存在严重的硬件限制。关闭字典以释放内存。PS 脚本所需的内存可能与机器可用内存相当。在现代，繁重的`PostScript`任务（例如长文档或复杂的绘图）所需的内存远小于机器内存，关闭包含数百甚至数千个元素的字典应该不会对机器性能产生显着影响。

如我错了请纠正我！考虑一下我们将所有内容都放在一本字典或全局字典中；它对 PostScript 性能有负面影响吗？

分离字典是否仍然有益（从性能的角度来看，而不是易于编码），更重要的是在不需要时关闭它们？或者它只是释放了一小部分内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:20:57.170

这里的内存和性能问题几乎完全分开。

Level-1 Postscript 仅描述了一种“释放”内存的方法：通过`restore`-ing 先前的`save`-d 内存状态。2 级（及以上）Postscript 包含垃圾收集，因此当没有可访问的引用时可以释放内存。可以禁用垃圾收集以降低性能开销（这对于分析代码以提高速度是必要的），但当然，除非您正确使用`save`，否则您的内存消耗可能会增加`restore`。

包含垃圾收集使得添加自动扩展字典变得合适，而且他们确实做到了。但是有性能成本：分配更大的字典并重新散列所有键。因此，如果很容易预测字典的最大大小，则可以通过首先创建一个足够大的字典来节省一些时间。您可以通过将字典设置为最大大小的两倍来进一步提高速度，因为这应该可以减少哈希冲突。

并且在 dictstack 上有额外的字典（如果你*不需要*它们）会对性能产生不利影响。由于 systemdict（所有运算符所在的位置）始终是堆栈中的底部条目，因此对运算符名称的所有查找都将搜索（不成功）在到达 systemdict 之前遇到的每个字典。

台式计算机的内存大小和处理能力的增加使得这些问题不再那么*必要*（因为您可以忽略它们并且仍然有一个“工作”的程序），但它们仍然*有用*（特别是当您的程序变得更大并且更复杂）。

此类信息的一个很好的资源是 Adob​​e 的“绿皮书”，它专门用于组织程序的大小或速度（有时两者兼而有之）的策略。

* * *

我只是有一个疯狂的想法。可能有办法*两者兼得！*假设您将字典完全打包（以使用最少的内存），然后在关键部分添加一个更多元素（强制 dict 扩展），但用`save`and括住该部分`restore`？

```
4 dict begin
/x 5 def
/y 7 def
/z 9 def
/t 12 def
currentdict end

%critical section
begin /save save def
    %Do something critical
save end restore 
```

当然，这会丢弃对字典的任何更新，因此，如果您需要这些更新的条目，则必须制作一个副本以展开（保存后，因此恢复会破坏它），并将所需的条目复制回原始条目。当然，这是相当多的额外开销；所以需要这个技巧的代码必须*非常关键*。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:52:34.977

你错了！

首先，*一个*全局字典并不适用于所有情况。一些 PostScript 语言操作员期望某些字典（包括它们的名称）存在。所以这些你必须保留。

其次，它还有性能和速度的影响，而不仅仅是内存消耗。

第三，对于程序员来说，保持代码整洁有序总是一个好主意。

第四，您似乎在谈论（当前）个人计算机型号或更大的“机器”。您似乎没有考虑嵌入式系统及其操作系统（就像许多较小的 PostScript 打印机确实使用的那样）。

第五，您似乎忘记了在 PostScript（或任何）程序中可以有循环......如果一个泄漏添加到下一个泄漏，任何“内存的一小部分”泄漏都会产生巨大的影响。

第六，您似乎不知道某种类型的错误条件及其返回是语言规范的一部分，这可以通过在相应的“堆栈”上放置错误的项目来触发。

第七，....好吧，在我开始真正的咆哮之前我现在停下来:-)

# javascript - Titanium - Facebook 授权（） - “发生错误”

> ID：12605031
> 
> 赞同：4
> 
> 时间：2012-09-26T15:18:28.570
> 
> 标签：javascript, facebook, login, titanium, titanium-mobile

我正在使用（Appcelerator）Titanium 的 Facebook API 让用户登录他们的 Facebook 帐户。在Android上，当facebook窗口打开一个页面时，通常在调用授权后立即显示：

```
An error occurred with MY-FB-APP-NAME. Please try later
API Error Code: 110
API Error Description: Invalid user id
Error Message: Missing user cookie (to validate session user) 
```

关闭窗口并重新开始通常可以解决问题。然而，当这种情况发生时，可能有 70% 的时间（在“会话”中第一次调用授权时）这是一个很大的可用性问题。

有谁知道如何解决这一问题？

我正在使用 Titanium 2.1.0 并在 Android 2.3.6 设备上进行测试。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:33:21.803

实际上，由于 facebook 的缓存，问题仍然存在。我们需要在您注销时清除缓存使用下面的代码它工作正常

```
Titanium.Facebook.appid = "XXXXXXXXXXXXXXXXXX";
 Titanium.Facebook.permissions = ['publish_stream', 'read_stream'];

   var fbButton =  Ti.UI.createButton({
    top: 68,
    width:290,
    height:52,
    backgroundImage:"images/login/facebook.png"
});

 fbButton.addEventListener('click', function() {
if(Titanium.Facebook.loggedIn){
    Titanium.Facebook.logout()
    return
}
 Titanium.Facebook.authorize();

  });

Ti.Facebook.addEventListener('login', function(e) {
if (e.success) {
    win.close()
} else if (e.error) {
    alert(e.error);
} else if (e.cancelled) {
    alert("Canceled");
}
 });

  Titanium.Facebook.addEventListener('logout', function(e) {
    var url = 'https://login.facebook.com';
    var client = Titanium.Network.createHTTPClient();
    client.clearCookies(url);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T07:32:55.923

试试这个代码，它是合金的，希望它能帮助你，否则我会检查并让你知道

**索引.xml**

```
<Alloy>
<Window class="container">
    <LoginButton id="fbButton" ns="Alloy.Globals.Facebook"/>
</Window>
</Alloy> 
```

**index.js**

```
var fb = Alloy.Globals.Facebook;
fb.appid = xxxxxxxxx;
fb.permissions = ['publish_stream', 'create_event', 'email'];
$.fbButton.style = fb.BUTTON_STYLE_WIDE;
fb.addEventListener('login', function(e){
    if(e.success){
        fb.requestWithGraphPath('me', {}, 'GET', function(e) {
            if (e.success) {
                //alert(e.result);
                var response = JSON.parse(e.result);
                var email = response.email;
                var name = response.name;
                var gender = response.gender;
                alert(name+' '+email+' '+gender);
                alert('Logged in Successfully');
            } else if (e.error) {
                alert(e.error);
            } else {
                alert('Unknown response');
            }
        });
    }
}); 
```

**合金.js**

```
Alloy.Globals.Facebook = require('facebook'); 
```

# iphone - 新版 App 内购买

> ID：12605034
> 
> 赞同：7
> 
> 时间：2012-09-26T15:18:30.957
> 
> 标签：iphone, objective-c, ios, app-store, in-app-purchase

我在 App Store 上有一个实时应用程序，目前是 1.0 版，有 5 个应用程序内。

我刚刚在 iTunes Connect 中创建了 1.1 版，但我无法为我的新版本配置我的应用内。我现有的应用程序会自动分配给我的新版本还是我必须对其进行配置？如果是这样，怎么办？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:27:25.643

现有的应用内购买将继续有效，您无需为此做任何特别的事情。

如果您要引入新的应用内购买，您必须创建这些并与更新一起进行审核。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:27:37.407

不，您不必将 IAP 重新分配给您的新应用程序。您可以在以下位置修改 IAP：

> 管理您的应用程序 -> YouApp -> 管理应用内购买

并确保所有状态都是**Approved**。如果没有，请提交。

# django - Django South - 将 CharField 更改为 ForeignKey

> ID：12605037
> 
> 赞同：1
> 
> 时间：2012-09-26T15:18:41.450
> 
> 标签：django, django-models, django-south

我目前有这样的设置。

```
#models.py
class Donate(model.Model):
             item_locations = models.CharField(max_length=150)
#forms.py
    ItemChoices = (('item1','item1'),('item2','item2'),('item3','item3'))
    class DonateForm(ModelForm):
         item_locations = CharField(choices=ItemChoices)
         class Meta:
              model = Donate 
```

我想将 item_locations 更改为 ForeignKey 并让用户能够自行更改项目列表。我创建了另一个名为 ItemLocations 的类并将其更改为

```
item_locations = models.ForeignKey(ItemLocation) 
```

如何使数据库可以保留以前的记录？Donor1 的项目位置为“Item1”，在将其更改为查找将为“item_location_id”的外键后，他们如何保留该数据？

还有，这和南迁一样简单吗？我的数据库是 MySql。

```
./manage.py schemamigration donate --auto 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:24:04.473

最简单的方法是：

1.  添加新的外键列。
2.  通过使用迁移数据`get_or_create`。
3.  删除旧列。

`update`您可以通过预先计算和使用查询来加快速度。

# extjs - 将数据发送回应用程序

> ID：12605038
> 
> 赞同：1
> 
> 时间：2012-09-26T15:18:46.477
> 
> 标签：extjs

我对 EXTJS 很陌生，所以我还不完全了解它是如何工作的，但我设法构建了一个作为选择结果的网格（因此它没有直接映射到表）。此网格的一列是 ID。我还在网格中添加了一个复选框

```
 this.columns =
    [
        {
            header: 'Selected',
            dataIndex: 'Selected',
            xtype: 'checkcolumn'
        },
        ....rest of the columns 
```

在我的模型上，我有：

```
fields:
[   
    { name: 'Selected', type: 'bool' },
    { name: 'ID', type: 'int' },
     ...rest of the fields 
```

我需要的是，单击一个按钮（已添加），以获取将 Selected 属性设置为 true 的 ID 列表。

知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:22:53.573

这很简单（如果我理解正确的话），网格有一个[选择模型](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-method-getSelectionModel)来处理这些选择。您只需要获取选择模型并获取所有[选定](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.Model-method-getSelection)的记录。

还有为每个选择触发的[itemclick](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-itemclick)、[selectionchange](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-selectionchange)事件。第二个给出了一组选定的记录。

我猜[Ext.selection.CheckboxModel](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.selection.CheckboxModel)你也可能感兴趣。

**编辑：**

好的，我想以上所有内容都不是您想要的，但可能很有趣。您需要的是遍历可以使用[store.each()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-each)完成的商店的所有记录。在您的按钮范围内执行此操作，并将一个数组。例子

```
var myGrid = Ext.getCmp('MyGrid');
var list = [];
myGrid.store.each(function(rec) { 
    if(rec.data.Selected)
        list.push(rec);
    return true;
}); 
```

要获取当前选定的记录（模型），请执行以下操作：

```
var myGrid = Ext.getCmp('MyGrid'),
    sm = myGrid.getSelectionModel(),
    selection = sm.getSelection(), // gives you a array of records(models)
    len = selection.length, 
    i = 0, 
    idList = []; 

for (; i<len; i++) { 
   idList.push(selection[i].data.ID); 
} 
```

# css - IE7-8 调整大小过滤器

> ID：12605041
> 
> 赞同：0
> 
> 时间：2012-09-26T15:18:52.747
> 
> 标签：css, filter

为什么这不能在 IE7-8 中调整我的图像大小？？？？

```
#carousel ul li #myImage {
  background: url("../img/myImage.png") no-repeat;
  filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../img/myImage.png',sizingMethod='scale');
  -ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='../img/myImage.png',sizingMethod='scale')";
} 
```

# c# - 使用 Moq 测试不在接口中的事件

> ID：12605044
> 
> 赞同：1
> 
> 时间：2012-09-26T15:19:02.450
> 
> 标签：c#, unit-testing, events, moq

如果接口实现中使用的事件未出现在您正在模拟的接口中，是否有办法使用 moq 对引发事件进行单元测试？

注意：我的界面与我的 UI 没有任何关系，我的事件仅用于 UI 通知，因此我想将该行为与实际界面分离，因为存储库位于与客户端/UI 不同的库中。

例如：

```
 [Test]
    public void TestRaiseBarProcessed()
    {
        ManualResetEvent barProcessedEvent = new ManualResetEvent(false);
        bool called = false;

        //Arrange
        Mock<IFooRepository> mockFooRepository = new Mock<IFooRepository>();

        mockSourceRepository
            .Setup(a => a.SearchForBar(barsToFind))
            .Returns(barsFound)
            .Raises(
                a => a.BarProcessed += null, 
                new BarFoundEventArgs(It.IsAny<string>()));

        IList<IFooRepository> mockFooRepositories = 
            new List<IFooRepository>();

        mockFooRepositories.Add(mockFooRepository.Object);

        FooBar fooBar = new FooBar(mockFooRepositories, FooList);

        fooBar.CurrentBarBeingProcessedInfo += (sender, e) =>
            {
                barProcessedEvent.Set();
                called = true;
            };

        //Act
        fooBar.CallFooRepositoryMethod();

        barProcessedEvent.WaitOne(25, false);

        //Assert
        mockFooRepository.Verify(
            a => a.SearchForBar(barsToFind),
            Times.Once());

        Assert.AreEqual(true, called);
    } 
```

让我知道这是否需要更多澄清。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:41:33.993

您是否考虑过在另一个界面中定义该仅 UI 事件并实现它们？如果是这样，您可以使用 Moq 的多界面模拟：

```
var fooRepositoryMock = new Mock<IFooRepository>();
var barUiEventMock = fooRepositoryMock.As<IBarUiEvent>();
bool wasCalled = false;
barUiEventMock.Object.BarProcessed += (s, e) => wasCalled = true;

fooRepositoryMock
    .Setup(m => m.SearchForBars(barsToFind))
    .Returns(barsFound)
    .Raises(
        foo => barUiEventMock.Object.BarProcessed += null,
        new BarFoundEventArgs("")
    );

// ...

Assert.That(wasCalled, Is.True); 
```

调用`SearchForBars`将导致`BarProcessed`使用您传递的任何参数引发事件。

# facebook - 使用没有访问令牌的应用程序显示朋友

> ID：12605046
> 
> 赞同：0
> 
> 时间：2012-09-26T15:19:20.703
> 
> 标签：facebook, api, facebook-javascript-sdk

我查看了 FB api，但我看不到您可以在没有先授权的情况下使用应用程序显示朋友的位置。因此，当一些人在未登录/授权应用程序的情况下访问我的应用程序时，它会显示在应用程序的底部。我见过一些应用程序可以做到这一点，但我发现的唯一一个是你需要一个访问令牌。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:32:37.383

如果没有用户授权您的应用并允许访问，您将无法访问用户的数据（或找出他们是谁） - 基本上您的用户必须登录才能看到他们的朋友列表等。这是故意的。

# python - 如何减少图像中的噪声，使其不影响从服务器传递到客户端的值

> ID：12605048
> 
> 赞同：0
> 
> 时间：2012-09-26T15:19:35.460
> 
> 标签：python, nxt

使用连接到检测球和机器人位置的摄像头的服务器。当客户端请求球和机器人的坐标时，由于图像的噪声，向下传递的坐标值在+2/-2 范围内变化。无论如何我想要一个绝对值来解决它，因为我会根据更改的值调用一个方法，并且如果值每次都在变化，它会在我运行它时导致程序中的错误

```
client_socket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
client_socket.connect(('59.191.193.42',5555))

def updateBallx(valueList):
# updates red ball x-axis position
ballx = int(valueList[8])
return ballx

def updateBally(valueList):
    # updates red ball y-axis position
    bally = int(valueList[9])
    return bally

def updateRobotx(valueList):
    # updates robot x-axis position
    robotx = int(valueList[12])
    return robotx

def updateRoboty(valueList):
    # updates robot x-axis position
    roboty = int(valueList[13])
    return roboty

def updateRobota(valueList):
    # updates robot angle position
    robota = int(valueList[14])
    return robota

def activate():

new_x = 413 #updateBallx(valueList)
print new_x
new_y = 351 #updateBally(valueList)
print new_y
old_x = 309 #updateRobotx(valueList)
print old_x 
old_y = 261 #updateRoboty(valueList)
print old_y
angle = 360 #updateRobota(valueList)
print angle

turn_to(brick,new_x, new_y, old_x, old_y, angle)
move_to(brick,new_x, new_y, old_x, old_y)

screenw = 0
screenh = 0
old_valueList = []
while 1:
    client_socket.send("loc\n")
    data = client_socket.recv(8192)
    valueList = data.split()

    if (not(valueList[-1] == "eom" and valueList[0] == "start")):
        #print "continuing.."
            continue

        if(screenw != int(valueList[2])):
            screenw = int(valueList[2])
            screenh = int(valueList[3])
    if valueList != old_valueList:
        activate(valueList)
    old_valueList = valueList[:] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:34:51.350

所以换个说法：你有一个动态系统，你只有嘈杂的观察，你想在使用状态信息进行进一步处理之前从嘈杂的观察中推断出系统的真实状态？我对你的理解正确吗？

如果我这样做，那么您想要的是某种时间过滤。您可以在服务器端或客户端上执行此操作。

最简单的方法是在多个连续帧上运行移动平均（或者如果您没有对等距帧进行采样，则需要一些短时间窗口）。但是，这仅在您进行平均的时间窗口与系统动力学（例如机器人和球的运动速度）相比要短得多的情况下才有效。如果没有，你会模糊一些实际的动作，这可能是个坏主意。

您可以尝试的更复杂的方法是卡尔曼滤波器。如果你谷歌，你可以找到很多教程。Scipy 有它的图书馆[http://www.scipy.org/Cookbook/KalmanFiltering](http://www.scipy.org/Cookbook/KalmanFiltering)

更复杂的是粒子过滤器。鉴于您的简单 2D 问题，我真的不建议使用它，因为它有太多参数需要调整。

# report - SQL Server 报告服务 (SSRS) 2005 报告 SSRS 2008

> ID：12605050
> 
> 赞同：1
> 
> 时间：2012-09-26T15:19:50.343
> 
> 标签：report, ssrs-2008, reporting-services, reportingservices-2005

我有使用针对 SSRS 2005 的 Visual Studio 2005 创建的报告。

如果我想使用 SSRS 2008 打开这些报告，我可以在 SSRS 2008 上部署 SSRS 2005 报告吗？

SSRS 2008 是否与 SSRS 2005 报告完全兼容？

如果我做错了什么，请修改以下步骤：

```
1\. Open SSRS 2005 reports on Visual Studio 2005
2\. Change the deployment TargetServerURL to SSRS 2008.
3\. Deploy 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T17:02:43.103

SSRS 2008 与 SSRS 2005 报告完全兼容。然而，据我了解，升级是一种单程旅行。升级后，它将不再在 2005 实例中运行。因此，如果由于某种原因需要返回，请随身携带一份备份副本。

至于从 2005 升级到 2008 的正确程序，Microsoft 在这里写了一个非常详尽的指南：

[http://msdn.microsoft.com/en-us/library/ms143674(v=sql.100).aspx](http://msdn.microsoft.com/en-us/library/ms143674(v=sql.100).aspx)

# file - 如何检查make中是否不存在目录并创建它

> ID：12605051
> 
> 赞同：19
> 
> 时间：2012-09-26T15:19:51.483
> 
> 标签：file, compilation, makefile

在我的项目目录中，我有一些子目录：`code/`、`export/`和. 所做的只是编译代码目录中的所有文件，并将 .o 文件放入对象目录中。`docs/``object/``make`

问题是，我告诉 git 忽略所有 .o 文件，因为我不想上传它们，所以它也不跟踪对象目录。我实际上没问题，我也不希望`object/`上传到我的 GitHub 帐户，但是使用当前的解决方案（这是`object/`目录中的一个简单的空文本文件），目录确实被上传并且需要存在在构建之前（makefile 只是假设它在那里）。

这似乎并不是最好的解决方案，所以有没有办法在构建文件之前检查目录是否不存在，如果存在则创建它？这将允许在调用 make 命令并随后创建对象目录时不存在。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2016-07-22T12:00:10.770

唯一正确的方法是使用**order-only-prerequisites**，请参阅：[https](https://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html) ://www.gnu.org/software/make/manual/html_node/Prerequisite-Types.html 。注意**|** 在片段中。

如果您不使用 order-only-prerequisites，那么该目录中的每个修改（例如处理或创建文件）都会再次触发**依赖**于目录创建目标的规则！

```
object/%.o: code/%.cc | object
    compile $< somehow...

object:
    mkdir -p $@ 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-26T17:46:14.940

只要有一个目标：

```
object/%.o: code/%.cc object
    compile $< somehow...

object:
    mkdir $@ 
```

如果您想防范名为“object”的文件的可能性，您必须更加小心，但这是基本思想。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2015-07-08T16:45:45.940

在目标中插入 mkdir 命令。

```
object/%.o : code/%.cc
    @mkdir -p object
    compile $< somehow... 
```

如果目录已经存在，'-p' 不会导致错误。

# jquery - 单击图像以在 jquery 中加载另一个图像

> ID：12605052
> 
> 赞同：0
> 
> 时间：2012-09-26T15:19:52.483
> 
> 标签：jquery

我有一个使用 jquery 显示的图像。当鼠标悬停在该图像上时，我喜欢将鼠标更改为可单击，单击时，我喜欢加载另一个图像。这是我的代码，不工作。有任何想法吗？

html代码：

jQuery代码：

```
$("#div1").click(function () {
    var img_cpu = "http://192.168.101.1/cpu.png";
    var myImage = new Image();
    $(myImage).load(function () {
        $("#div2").html(myImage)    
    }).error(function () {
        $('#div2').hide();
    })
    .attr('src', img_cpu)
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:22:46.893

发生了一些问题

*   ~~您创建了一个新图像`var myImage = new Image();` ，但您没有指定`src`稍后（因此加载事件永远不会触发）~~

*   `myImage32`未在您的代码中的任何地方定义

此外，请确保`cpu.png`

*   在同一个文件夹中
*   `644`具有查看的最低权限 ( )
*   尚未缓存，否则永远不会发生加载事件：在这种情况下，您应该检查`complete`属性并触发为加载事件定义的处理程序（请参见下面的代码段）

* * *

```
 $(myImage).one('load', function () {   /* use one() */
     $("#div2").html(myImage32)    
 })
 .attr('src', img_cpu);

 if (!!myImage.complete) $(myImage).trigger('load'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:23:15.120

马上，您似乎忘记将图像的 URL 放入加载函数中。它应该看起来像`.load('url/to/image/', function() ...`

# android - aSmack XMPP 文件传输循环处于“进行中”状态

> ID：12605053
> 
> 赞同：0
> 
> 时间：2012-09-26T15:19:59.207
> 
> 标签：android, xmpp, file-transfer, smack, asmack

我已将我的 asmack 库从Flowdalic [/asmack](https://github.com/Flowdalic/asmack)项目更改`asmack-issue15.jar`为。一切运行顺利，但从服务器到安卓智能手机的文件传输出现问题。传输的状态永远不会完成，因为它在“进行中”状态下循环。`asmack-android-7.jar`

注册的扩展：

```
providerM.addIQProvider("si", "http://jabber.org/protocol/si", new StreamInitiationProvider());
providerM.addIQProvider("query", "http://jabber.org/protocol/bytestreams", new BytestreamsProvider());
providerM.addIQProvider("open", "http://jabber.org/protocol/ibb", new OpenIQProvider());
providerM.addIQProvider("close", "http://jabber.org/protocol/ibb", new CloseIQProvider());
providerM.addExtensionProvider("data", "http://jabber.org/protocol/ibb", new DataPacketProvider()); 
```

接收文件的代码：

```
File f = new File(PATH_SDCARD + "/tmp/" + request.getFileName());
IncomingFileTransfer transfer = request.accept();
transfer.recieveFile(f);
int cnt = 0;

while(!transfer.isDone() && cnt < 20) {
   cnt++;
   Log.i(LOG, "STATUS: " + transfer.getStatus().toString());
   Log.i(LOG, "SIZE: " + f.length());
   Log.i(LOG, "PROGRESS: " + transfer.getProgress());
   Thread.sleep(1000);
}
if (transfer.getError() != null) {
   Log.i(LOG, "ERROR: " + transfer.getError());
}
if (transfer.getException() != null) {
   Log.i(LOG, "EXCEPTION: " + transfer.getException());
} 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T20:22:00.800

这是一个服务器问题。我在 openfire 中启用了文件传输代理，现在一切正常。

# android - 如何在android上使用ormLite注释引用异物

> ID：12605058
> 
> 赞同：1
> 
> 时间：2012-09-26T15:20:04.763
> 
> 标签：android, ormlite

我想使用 ORM 注释来应用我的对象关系，但我似乎无法找到使用 ormLite 注释正确执行此操作的方法，因为我认为我不能在 android 上使用 jpa 它们，但有人这样做了，如果不能有人告诉我如何在android上导入jpa以与orm一起使用？

```
@DataBaseTable(tableName="some_object")
public Class SomeObject{

    @DatabaseField(id=true)
    private Long id;

    @DatabaseField(foreign= true,foreignAutoCreate=true, foreignAutoRefresh=true)
    private List<ReferencedObject> referencedObjects;
}

@DataBaseTable(tableName="referenced_object")
public Class ReferencedObject{

    @DatabaseField(id=true)
    private Long id;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:43:27.470

听起来你想要一个`ForeignCollection`而不是你的`List`

*   [外国馆藏文件](http://ormlite.com/docs/foreign-collection)
*   [ForeignCollection 的 JavaDocs](http://ormlite.com/javadoc/ormlite-core/com/j256/ormlite/dao/ForeignCollection.html)

这是代码：

```
@DataBaseTable(tableName="some_object")
public Class SomeObject{

    @DatabaseField(id=true)
    private Long id;

    @ForeignCollectionField
    private ForeignCollection< ReferencedObject> referencedObjects;
}

///////////////////////////

@DataBaseTable(tableName="referenced_object")
public Class ReferencedObject{

    @DatabaseField(id=true)
    private Long id;

    @DatabaseField(foreign=true)
    private SomeObject obj;
} 
```

# php - 如何在 PHP 中替换部分字符串？

> ID：12605060
> 
> 赞同：91
> 
> 时间：2012-09-26T15:20:05.400
> 
> 标签：php

我正在尝试获取字符串的前 10 个字符，并希望将空格替换为`'_'`.

我有

```
 $text = substr($text, 0, 10);
  $text = strtolower($text); 
```

但我不确定下一步该做什么。

我想要字符串

> 这是对字符串的测试。

变得

> this_is_th

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-09-26T15:21:52.233

只需使用[str_replace](http://www.php.net/manual/en/function.str-replace.php)：

```
$text = str_replace(' ', '_', $text); 
```

您可以在之前的`substr`和`strtolower`调用之后执行此操作，如下所示：

```
$text = substr($text,0,10);
$text = strtolower($text);
$text = str_replace(' ', '_', $text); 
```

但是，如果您想变得花哨，则可以一行完成：

```
$text = strtolower(str_replace(' ', '_', substr($text, 0, 10))); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T15:22:53.043

你可以试试

```
$string = "this is the test for string." ;
$string = str_replace(' ', '_', $string);
$string = substr($string,0,10);

var_dump($string); 
```

输出

```
this_is_th 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T15:23:15.553

这可能是您需要的：

```
$text = str_replace(' ', '_', substr($text, 0, 10)); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-26T15:22:31.030

做就是了：

```
$text = str_replace(' ', '_', $text) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-09-23T04:55:47.943

你需要先把绳子剪成你想要的几根。然后替换你想要的部分：

```
 $text = 'this is the test for string.';
 $text = substr($text, 0, 10);
 echo $text = str_replace(" ", "_", $text); 
```

这将输出：

> this_is_th

# matlab - 带有 Matrix 参数的矢量化函数调用

> ID：12605062
> 
> 赞同：0
> 
> 时间：2012-09-26T15:20:11.030
> 
> 标签：matlab

我可以矢量化这个 for 循环吗？

```
F=zeros(de.nP,1);

for i=1:de.nP 
   F(i)=OF(P1(:,i)',data);
end

function ObjVal=OF(beta, data)
  mats=data.mats;
  yM=data.yM;
  model=data.model;
  y=model(beta,mats);
  aux=y-yM;
  ObjVal=dot(aux,aux);
end 
```

当我只是尝试这样做时：

```
 F=OF(P1,data); 
```

它同时通过所有 P1 但我希望它一次只通过一列 P1？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T18:21:17.947

所以它看起来像`model`期望 beta 是一个 1xN 数组，并返回一个 1xM 数组。因此，您首先需要修改`model`以将 de.nP x N 数组用于 beta，并返回一个 de.nP x M 数组（并且您需要对模型中的计算进行矢量化）。

我不确定如何处理 yM。如果只是一个数字，则无需更改任何内容。如果它本身是一个 1xM 数组，那么你需要做

```
aux=y-repmat(yM, [size(y,1) 1]); 
```

那你想换

```
ObjVal=dot(aux,aux); 
```

和

```
ObjVal=dot(aux,aux,2); 
```

我要补充一点，除非您向我们提供可以实际运行的代码（即不依赖于和定义之类的外部内容`de`）`model`，否则很难给出明确的答案。

**编辑**哦，我想你需要用类似的东西替换你的 for 循环

```
F=OF(P1',data); 
```

**编辑**

我认为以下正确矢量化了您的`model`功能：

```
function y = NSS(beta, mats)
    gam1 = (1./beta(:,5)) * mats;
    gam2 = (1./beta(:,6)) * mats;
    aux1=1-exp(-gam1);
    aux2=1-exp(-gam2);
    y = repmat(beta(:,1), [1 length(mats)]) + ...
        repmat(beta(:,2), [1 length(mats)]) .* (aux1./gam1) + ...
        repmat(beta(:,3), [1 length(mats)]) .* (aux1./gam1 + aux1 - 1) + ...
        repmat(beta(:,4), [1 length(mats)]) .* (aux2./gam2 + aux2 - 1);
end 
```

同样，由于我无法运行您的代码，我不能 100% 确定这会起作用，但我认为没关系。

# configuration - InnoSetup 安装的 Eclipse RCP 应用程序忽略 -data 参数

> ID：12605066
> 
> 赞同：0
> 
> 时间：2012-09-26T15:20:23.133
> 
> 标签：configuration, eclipse-rcp, inno-setup

我构建了一个 Eclipse RCP 应用程序并使用 InnoSetup 将其打包。当我将打包的应用程序安装到默认目标 (C:\Program Files\XXX) 时，INI 文件中的 -data 参数被忽略（它设置为安装目录：-data C:\Program Files\XXX） . 相反，配置数据保存在用户的应用程序数据文件夹中。如果我将它安装到 C:\XXX，则 -data 参数会像宣传的那样工作，并且配置数据会保存在安装文件夹中。

如果我将应用程序的非打包版本复制到 C:\Program Files 下的文件夹中，有趣的是，与打包安装不同，-data 参数也被正确看待。

InnoSetup 脚本文件没有直接说明为配置数据设置目录，所以我认为这是 Eclipse RCP 的问题。此外，这里讨论的所有文件夹的写入权限对所有用户都是完整的。

为了强制 Eclipse RCP 将我的配置数据保存在我想要的位置，我会很高兴获得指向哪里的指针。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T20:27:14.803

默认情况下，不允许未提升的用户将文件写入 Program Files 或其任何子文件夹。虽然可以更改文件夹权限以允许这样做，但强烈建议不要这样做，因为 (a) 这不允许按用户记录设置，这通常是一项要求，即使起初您不认为这是, 和 (b) 允许对包含可执行文件的文件夹进行全局写入访问是等待发生的安全漏洞。如果您对仅包含数据文件的子文件夹执行此操作，则不太重要。但这仍然存在隐私和数据安全漏洞，因为现在系统上的任何用户（或网络用户）都可以查看和修改主要用户的数据。

如果应用程序没有标记包含所需权限的 Vista 兼容性清单（几乎无一例外应该是“asInvoker”），Vista 和 Win7 将自动将对只读 Program Files 子文件夹的访问重定向到用户 AppData 区域中的 VirtualStore 文件夹.

# c# - 多后台工作者

> ID：12605071
> 
> 赞同：0
> 
> 时间：2012-09-26T15:20:35.290
> 
> 标签：c#, .net, backgroundworker

如何知道循环中的所有工作人员何时完成？以及如何在所有工人之后“执行” bw_RunWorkerCompleted。我尝试了几种方法，但都失败了。主要工人总是先完成。

.Net 3.5

[http://pastebin.com/kMmajq6f](http://pastebin.com/kMmajq6f)

```
using System;
using System.ComponentModel;
using System.Threading;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {

            BackgroundWorker bw = new BackgroundWorker();
            bw.DoWork += new DoWorkEventHandler(bw_DoWork);
            bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
            bw.WorkerSupportsCancellation = true;
            bw.WorkerReportsProgress = true;

            bw.RunWorkerAsync();

            Console.ReadLine();

        }

        static void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            Console.WriteLine("All");
        }

        static void bw_DoWork(object sender, DoWorkEventArgs e)
        {
            for (int i = 0; i < 10; i++)
            {
                BackgroundWorker inBW = new BackgroundWorker();
                inBW.DoWork += new DoWorkEventHandler(inBW_DoWork);
                inBW.RunWorkerCompleted += new RunWorkerCompletedEventHandler(inBW_RunWorkerCompleted);

                inBW.RunWorkerAsync(i.ToString());
            }
        }

        static void inBW_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            Console.WriteLine(e.Result as String);
        }

        static void inBW_DoWork(object sender, DoWorkEventArgs e)
        {
            Thread.Sleep(new Random().Next(1000, 5000));

            e.Result = e.Argument as string;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:24:03.710

```
static int workerCount = 11; // one more for the main BW
static int completedWorkerCount = 0;

static void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    Console.WriteLine("All");
    updateAllWorkersProgress()
}

static void inBW_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
     Console.WriteLine(e.Result as String);
     updateAllWorkersProgress();
}

static void updateAllWorkersProgress()
{
     if (++completedWorkerCount == workerCount)
     {
           Console.WriteLine("Everything completed");
     }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:32:47.300

就像史蒂夫建议的那样，使用任务。但是，如果您不能随意 - 然后为每个子工作人员创建一个等待句柄，并在主 bg 工作人员中等待所有这些。

您需要有一个**ManualResetEvents**列表/数组作为成员变量，并为每个子工作人员传递一个。一旦完成，每个子工作者都会发出一个事件信号。只有在收到所有信号后，主 bg-worker 才会完成（使用**WaitAll**）

请参阅此 - [MSDN 上的手动重置事件和 WaitAll](http://msdn.microsoft.com/en-us/library/z6w25xa6.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:37:36.357

一旦**DoWork**事件处理程序返回，就会调用**RunWorkerCompleted事件处理程序。**在这种情况下，bw_DoWork 方法会在它分离出 10 个额外的 BackgroundWorker 后返回。

 **我打算建议您为您的案例使用 CountdownEvent，但意识到您使用的是 .Net 3.5。[在这种情况下，您可以使用Pulse 和 Wait](http://www.albahari.com/threading/part4.aspx#_Writing_a_CountdownEvent)创建类似的内容。**

# javascript - HTML 5 Canvas - 在画布中动态包含多个图像

> ID：12605072
> 
> 赞同：1
> 
> 时间：2012-09-26T15:20:35.507
> 
> 标签：javascript, image, html, canvas

我需要在一个`canvas`. 我想通过`for-loop`.

我尝试了很多，但在最好的情况下只显示最后一张图像。我检查了这个[胎面](https://stackoverflow.com/questions/5663759/is-it-possible-to-use-multiple-images-in-an-html5-canvas)，但我仍然只得到最后一张图像。

为了解释，这是我最新的代码（基本上是另一篇文章的代码）：

```
 for (var i = 0; i <= max; i++)
{
    thisWidth = 250;
    thisHeight = 0;
    imgSrc = "photo_"+i+".jpg";
    letterImg = new Image();
    letterImg.onload = function() {
        context.drawImage(letterImg,thisWidth*i,thisHeight);
    }
    letterImg.src = imgSrc;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:27:21.480

问题是`onload`事件异步发生，到那时循环变量已经是最后一个值。您可以使用闭包来修复它：

```
for (var i = 0; i <= max; i++)
{
   thisWidth = 250;
   thisHeight = 0;

   (function(j){
      var imgSrc = "photo_"+j+".jpg";
      var letterImg = new Image();
      letterImg.onload = function() {
        context.drawImage(letterImg,thisWidth*j,thisHeight);
      }
      letterImg.src = imgSrc;
   })(i);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:36:12.533

这是解决您的问题的另一种方法...

`letterImg`只是对图像的引用。因此，for 循环被执行 n 次，并且每次都`letterImg`被更改为一个新图像。因此，您只能获得最新绘制的图像。

这是代码（当然，将`maxImg`数字更改为正确的值。）：

```
images = []; //An array where images are stored.
thisWidth = 250; //This doesn't need to be inside the for-loop.
thisHeight = 0;
maxImg = 342;

//Attach an onload event to an image, that will draw it at (x, y) coordinates.
attach = function(img, x, y)
{
    img.onload = function()
    {
        context.drawImage(img, x, y);
    }
}

for (var i = 0; i <= maxImg; i++)
{
    imgSrc = "photo_" + i + ".jpg";

    images[i] = new Image();
    images[i].src = imgSrc;

    attach(images[i], thisWidth*i, thisHeight);
} 
```

# c++ - 将 Dll 保存在自定义文件夹中

> ID：12605075
> 
> 赞同：0
> 
> 时间：2012-09-26T15:20:43.793
> 
> 标签：c++, windows

我有一个依赖外部 Dll [让我们说dependent.dll] 的 C++ 程序，现在如果我保留..

*   可执行文件夹中的dependent.dll，它工作正常，但如果我保留
*   somne​​ 自定义文件夹中的dependent.dll，它没有。

我努力了

```
LPCTSTR deplibFullPath = "C:\Program Files\My_Program\Dlls\dependent.dll";
HMODULE hMod = LoadLibraryEx(deplibFullPath , NULL, LOAD_WITH_ALTERED_SEARCH_PATH); 
```

它返回不为空，但每当我访问dependent.dll 中的任何函数时，它都无法正常工作（崩溃）

知道我在哪里做错了，或者我需要做什么额外的事情。

谢谢

-潘卡伊

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:24:23.490

你的路径是错误的。它应该是

```
LPCTSTR deplibFullPath = "C:\\Program Files\\My_Program\\Dlls\\dependent.dll"; 
```

因为 \ 用于转义字符串中的特殊命令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:29:35.830

也许您的 dll 需要来自同一文件夹的其他 dll（依赖项）。在加载那个之前尝试调用[AddDllDirectory 。](http://msdn.microsoft.com/en-us/library/windows/desktop/hh310513%28v=vs.85%29.aspx)

我假设你的路径中的单个“\”只是一个复制和粘贴错误......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:03:15.703

我得到了答案，问题不在我的 LoadLibraryEx 函数中，但我没有正确使用 GetProcAddress。:(

# c# - MSProject.Task 创建子任务

> ID：12605077
> 
> 赞同：0
> 
> 时间：2012-09-26T15:20:48.567
> 
> 标签：c#, project, task

我正在尝试创建一个动态的 MPP 文件。我遇到的问题是在其他任务（子任务）上创建任务

我正在尝试使用这段代码，在我插入第一个任务后，所有其他主要任务都是这个任务的子任务，而我想要的子任务以一种奇怪的方式出现。

```
 Task_0
       Task_1
          Task_2
            Task_3
               Task_4
               SubTaskName_4
            SubTaskName_3
          SubTaskName_2
        SubTaskName_1
     SubTaskName_0 
```

我想要这样

```
 task 1
   subtask 1

  task 2
    subtask 2 
```

我的代码如下

```
Microsoft.Office.Interop.MSProject.Task task;

string t1, t2;

for (int i = 0; i < 5; i++)
{
    task = project.Tasks.Add(

    "Task_" + i.ToString(), i + 1);
    t1 = "05/12/2012";
    t2 = "12/12/2012";

    /*TimeSpan span = Convert.ToDateTime(t2) - Convert.ToDateTime(t1);
    task.Duration = span.Hours;*/
    task.Start = t1;
    task.Finish = t2;
    task.ResourceNames = "Someone";

    //task.OutlineLevel = 1;

    task.Text1 = "Task_TestTask" + i.ToString();

     //also tried with this one
    /*Microsoft.Office.Interop.MSProject.Task newTask = task.OutlineChildren.Add("otraSubTarea_" + i.ToString(), task.ID + 1);
    newTask.Start = "12/12/2012";
    newTask.Finish = "12/12/2012";
    newTask.OutlineIndent();*/

    Microsoft.Office.Interop.MSProject.Task subTask = project.Tasks.Add("SubTaskName_" + i.ToString(), task.ID+1);
    subTask.Start = "05/12/2012";
    subTask.Finish = "12/12/2012";
    subTask.OutlineIndent();
} 
```

我找不到太多这方面的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-11T00:42:43.493

不确定您是否已经解决了这个问题，但是您的帖子帮助我解决了我遇到的缩进问题，所以这里有一个答案，希望也能解决您的问题。

我认为上面有两个问题可以解决

1.  您需要**两个**索引（或从第一个索引计算第二个索引）。一个索引会跟踪您的任务及其命名以及附加的子任务。第二个索引需要跟踪实际任务的位置。例如，Task_1 插入位置 1，Task_2 插入位置 3，就像数组一样（任务索引是从 1 开始的，而不是从 0 开始的）
2.  缩进任务后，所有子任务也将继承缩进，因此对于每个新的“父”任务，您都需要“缩进”。您可以假设您将对初始任务期望的每个父任务进行缩进

以下代码适用于我：

```
int iTaskIndex = 1;
for (int iTaskNameIndex = 1; iTaskNameIndex <= 5; iTaskNameIndex++)
{
    Task task = project.Tasks.Add("Task_" + iTaskNameIndex.ToString(), iTaskIndex);
    if (iTaskIndex > 1)
        task.OutlineOutdent();
    Task subTask = project.Tasks.Add("SubTaskName_" + iTaskNameIndex.ToString(), iTaskIndex + 1);
    subTask.OutlineIndent();
    iTaskIndex += 2;
} 
```

插入新的父子任务对后，您需要

1.  将任务命名索引增加 1
2.  将任务位置索引增加 2
3.  在添加新父任务之前（或何时）重置缩进

这给了我：

```
Task_1
    SubTaskName_1
Task_2
    SubTaskName_2
Task_3
    SubTaskName_3
Task_4
    SubTaskName_4
Task_5
    SubTaskName_5 
```

您可以将这些索引组合在一起，只需将位置索引称为基于命名索引的计算（例如 iTaskIndex = ((iTaskNameIndex * 2) -1)），但我认为问题和代码使用两个单独的索引会更清晰

# c++ - STL 迭代器重置

> ID：12605080
> 
> 赞同：2
> 
> 时间：2012-09-26T15:21:01.280
> 
> 标签：c++, stl, iterator

我尝试重用 STL 迭代器，但找不到任何有关此的信息。这段代码有问题：

```
 std::vector< boost::shared_ptr<Connection> >::iterator poolbegin = pool.begin();
std::vector< boost::shared_ptr<Connection> >::iterator poolend = pool.end();
if( order ) {
    poolbegin = pool.rbegin(); // Here compilation fails
    poolend   = pool.rend();
}
    for( std::vector< boost::shared_ptr<Connection> >::iterator it = poolbegin; it<poolend; it++) { 
```

但出现错误：

> 错误：'poolbegin = std::vector<_Tp, _Alloc>::rbegin() 中的 'operator=' 不匹配，_Tp = boost::shared_ptr, _Alloc = std::allocator >'</p>

有没有办法将迭代器重置为新值？像 shared_ptr::reset 一样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:23:19.563

`rbegin()`返回 a `reverse_iterator`，它与普通的类型完全不同`iterator`。

它们不能相互分配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:16:19.327

看起来你想要一个循环通过一个向量向前或向后，这取决于某些条件。

一种方法是将循环体分解为函子（如果您有 C++11，则为 lambda）。

```
struct LoopBody {
  void operator()(boost::shared_ptr<Connection> connection) {
    // do something with the connection
  }
  // If the loop body needs to be stateful, you can add a constructor
  // that sets the initial state in member variables.
}; 
```

现在，您可以有两种选择以哪种方式通过循环：

```
LoopBody loop_body;
if (reverse_order) {
  std::for_each(pool.rbegin(), pool.rend(), loop_body);
} else {
  std::for_each(pool.begin(), pool.end(), loop_body);
} 
```

# asp.net - ASP.NET 应用程序访问数据库的权限被拒绝

> ID：12605086
> 
> 赞同：2
> 
> 时间：2012-09-26T15:21:27.267
> 
> 标签：asp.net, sql-server, ssms, sitefinity

我有一个包含数据库的 Sitefinity ASP.NET 网站`Db1`。我将数据库附加到 SQL Server Management Studio。

当我运行 ASP.NET 应用程序时，它似乎没有访问数据库的权限。Sitefinity 无法连接到现有数据库，然后尝试创建一个新数据库，它会抛出此错误：

> 数据库“主”中的 CREATE DATABASE 权限被拒绝

连接字符串是：

```
<add connectionString="data source=localhost\sqlexpress;Integrated Security=SSPI;initial catalog=Db1" providerName="System.Data.SqlClient" dbType="MsSql" name="Sitefinity" /> 
```

在 SQL Management Studio 中，我使用 Windows 身份验证连接到 localhost\SQLEXPRESS 实例。

我认为问题是，我需要授予 ASP.NET 进程用户访问数据库的权限`Db1`。我在哪里可以找到该用户以及如何授予权限？

我也不确定应用程序是否应该使用正确的 SQL Server 用户而不是 Windows 身份验证进行连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:24:02.750

在 IIS 中，找到您网站的应用程序池，并将凭据设置为您要用于连接数据库的 Windows 帐户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:29:14.457

最直接、可移植/可部署的解决方案是切换到 SQL Server 身份验证。

在 SSMS 中，展开*服务器*的安全选项卡，并添加具有合适名称和密码的用户。请务必取消选中“下次登录时必须更改密码”复选框。

然后，展开*数据库*的安全选项卡，添加用户，并将其添加到任何必要的角色中。对于调试，您可能只想将其添加到数据库所有者角色。

这很有帮助，因为所有相关设置都存储在您的应用程序配置和数据库本身中，使部署者变得轻而易举，并且您无需担心在密码过期时保持应用程序用户帐户的更新等。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:25:04.320

ypu 在您的连接字符串上使用您的 AD 用户，请参阅 Integrated Security=SSPI 项目？如果为 true，则表示当前 Windows 帐户凭据用于身份验证。

您确定您的用户有权在该实例上创建数据库吗？

# objective-c - 有没有办法停止所有 RestKit 处理？

> ID：12605087
> 
> 赞同：4
> 
> 时间：2012-09-26T15:21:29.063
> 
> 标签：objective-c, ios, restkit

我在 RestKit 的错误回调中切换控制器时遇到问题。它会导致错误：

```
*** -[RKObjectLoader onDidFailWithError]: message sent to deallocated instance 0x1ddd9680 
```

我正在`- (void)objectLoader:(RKObjectLoader *)objectLoader didFailWithError:(NSError *)error`使用以下代码切换方法：

```
[[[[RKObjectManager sharedManager] client] requestQueue] cancelAllRequests];

scAppDelegate *appDelegate = (scAppDelegate *)[UIApplication sharedApplication].delegate;
WelcomeController *controller = [[WelcomeController alloc] init];
[controller createWelcome];
appDelegate.window.rootViewController = controller;
[appDelegate.window addSubview:[controller view]];
[appDelegate.window makeKeyAndVisible]; 
```

我的问题在第一行，因为它不会取消所有 RestKit 处理。在日志中，我看到了一些 ObjectMapping 操作，它们导致了`EXC_BAD_ACCESS (SIGSEGV)`错误。我找到了一种解决方法 - 延迟后切换控制器（使用`performSelector:withObject:afterDelay`）。但我正在寻找更好的解决方案。

ObjectMapping 操作是：

```
2012-09-26 14:50:09.408 dr[5004:907] W restkit.object_mapping:RKObjectMapper.m:87 Adding mapping error: Could not find an object mapping for keyPath: ''
2012-09-26 14:50:09.410 dr[5004:907] E restkit.network:RKObjectLoader.m:231 Encountered errors during mapping: Could not find an object mapping for keyPath: ''
2012-09-26 14:50:09.411 dr[5004:907] E restkit.network:RKObjectLoader.m:360 Encountered an error while attempting to map server side errors from payload: Could not find an object mapping for keyPath: ''
2012-09-26 14:50:09.419 dr[5004:907] I restkit.support:RKCache.m:189 Invalidating cache at path: /var/mobile/Applications/1B9919DC-0674-494D-9C26-F1FC1925E856/Library/Caches/RKClientRequestCache-dr.cloudapp.net/SessionStore
2012-09-26 14:50:09.422 dr[5004:907] I restkit.network.reachability:RKReachabilityObserver.m:123 Reachability observer initialized with IP address: 0.0.0.0. 
```

我正在使用最新版本的 RestKit。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-23T19:45:41.547

从 RestKit 0.20.0 开始：

```
[[[RKObjectManager sharedManager] operationQueue] cancelAllOperations]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T10:31:58.463

您是否有理由要求客户取消所有操作？通常你会要求 RKObjectManager 来完成这项工作。

```
[[[[RKObjectManager sharedManager] requestQueue] cancelAllRequests]; 
```

# c# - 在不使用角色的情况下控制向用户显示哪个站点地图

> ID：12605089
> 
> 赞同：0
> 
> 时间：2012-09-26T15:21:34.727
> 
> 标签：c#, asp.net, asp.net-mvc, sitemap

我遇到了一项任务，我必须隐藏一些站点地图链接。例如，在此站点地图菜单中：

> 餐厅
> 
> > 审查餐厅
> > 
> > 添加餐厅
> 
> 事件
> 
> > 创建活动
> > 
> > 加入活动
> 
> 行政
> 
> > 管理用户

管理节点不应显示给所有用户。

我们没有使用正常的 MVC 角色安全模型。我们拥有的是每个控制器开始处的 if 语句。如果用户无权访问，它将用户重定向到另一个页面。这是一个例子：

```
 public ActionResult Index(string view)
    {
      if (dao.HasPermission(dao.screenLoanDialogue, dao.PermissionsFull) == false)
      return RedirectToAction("AccessDenied", "Home");
      //rest of code here 
    } 
```

如何强制站点地图不显示用户无权访问的节点？我可以尝试的解决方案之一是将所有地图站点传递给控制器​​并让它处理要显示的节点。但我找不到节点的收集位置。

角色和用 HTML 编写页面是没有选择的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:05:46.293

用几个方法来创建一个类来为你检查访问权限怎么样？

```
public static class LinkChecker 
{
    public static bool IsAdminLinkAllowed(User userOrWhatever)
    {
        // stuff here
    }
} 
```

然后在您看来，在呈现链接之前调用它。

```
@if(LinkChecker.IsAdminLinkAllowed(user))
{
    @Html.ActionLink()
} 
```

或者，您可以（并且可能应该）检查控制器中的访问权限并将值传递给视图。

```
ViewBag.IsAdminLinkAllowed = LinkChecker.IsAdminLinkAllowed(user); 
```

在视图中：

```
@if(ViewBag.IsAdminLinkAllowed)
{
    @Html.ActionLink()
} 
```

# python - 如何防止Python中特殊字符的自动转义

> ID：12605090
> 
> 赞同：11
> 
> 时间：2012-09-26T15:21:36.753
> 
> 标签：python, escaping, special-characters

我正在编写一个 Python 脚本，它接受文件路径作为字符串，解析它们，附加命令名，并构建一个列表，然后将其传递给`subprocess.Popen()`执行。该脚本用于处理 Unix 和 Windows 文件路径，最终应该在两个系统上运行。

当我在 Unix 下运行它时，如果我给出一个无意中包含转义字符（例如`\Users\Administrator\bin`）的 Windows 路径，Python 会将嵌入的字符解释`\b`为退格字符。我想防止这种情况发生。

据我所知，没有将字符串变量表示为原始字符串的函数或方法。该`'r'`修饰符仅适用于字符串常量。

到目前为止，我能得到的最接近的是：

```
winpath = "C:\Users\Administrator\bin" 
winpath = winpath.replace('\b','\\b')
winpathlist = winpath.split('\\') 
```

此时，winpathlist 应该包含`['C:','Users','Administrator','bin']`，而不是`['C','Users','Administrator\x08in']`。

我可以添加额外的调用来`winpath.replace()`处理我可能得到的其他转义 - `\a`, `\f`, `\n`, `\r`, `\t`, `\v`- 但不是`\x`。

有没有更蟒蛇的方式来做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T15:24:12.697

如果你`winpath`是硬编码的，你可能想`r`在你的字符串之前使用来表示它是一个[“原始字符串”](http://docs.python.org/reference/lexical_analysis.html)。

```
winpath = r"C:\Users\Administrator\bin" 
```

如果`winpath`无法硬编码，您可以尝试创建一个新字符串：

```
escaped_winpath = "%r" % winpath 
```

（这只是`repr(winpath)`，并且不会真正帮助你，因为`repr("\bin")`......）

一个解决方案是从头开始重建字符串：您可以在[该链接](http://code.activestate.com/recipes/65211-convert-a-string-into-a-raw-string/)上找到一个函数示例，但一般的想法是：

```
escape_dict={'\a':r'\a',
             '\b':r'\b',
             '\c':r'\c',
             '\f':r'\f',
             '\n':r'\n',
             '\r':r'\r',
             '\t':r'\t',
             '\v':r'\v',
             '\'':r'\'',
             '\"':r'\"'}

def raw(text):
    """Returns a raw string representation of text"""
    new_string=''
    for char in text:
        try: 
            new_string += escape_dict[char]
        except KeyError: 
            new_string += char
    return new_string 
```

现在，`raw("\bin")`给你`"\\bin"`（而不是`"\\x08in"`）......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-26T15:27:09.060

您可以通过将 r 添加到字符串文字符号来创建原始字符串

```
r"hello\nworld" 
```

变成

```
"hello\\nworld" 
```

[你可以在这里](http://docs.python.org/reference/lexical_analysis.html#string-literals)阅读更多

# php - PHP 中的自动换行，但不要将字符串包含在引号内

> ID：12605095
> 
> 赞同：2
> 
> 时间：2012-09-26T15:21:59.767
> 
> 标签：php, string, word-wrap

我正在尝试缩小 HTML 字符串，但也要以一定的字符数包装文本。所以当 HTML 字符串包含嵌入的 CSS 时，我需要一个特殊的函数。我曾尝试使用 php 函数“wordwrap”，但它的双引号 (") 和单引号 (') 中的换行文本会破坏显示。例如，如果我们有以下字符串：

```
font-family: Arial, 'Helvetica Nueue', 'Times Roman' 
```

现在，如果我们在 31 处对此进行自动换行，它将变为：

```
font-family: Arial, 'Helvetica
 Nueue', 'Times Roman' 
```

这将导致浏览器在加载时误解 CSS 字符串。

有谁知道或已经编写了一个当文本包含在引号（单引号或双引号）中时不会换行的自动换行函数？

谢谢！

**更新**

很抱歉只要求代码。这就是我所设想的（我目前正在编程）：

循环遍历 CSS 字符串并抓取中间的字符串块；} 或 { 如果它关闭了突破限制，则将子字符串添加到数组中。一旦循环完成，使用“\n”作为胶水将数组内爆成一个字符串。

有人有更好/不同的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:10:21.230

PHP`wordwrap`函数对特定的 ASCII 字符有一些了解。

在您的示例文本中，您不想让单引号内的空格换行，因此您可以用不间断空格替换空格。`wordwrap`然后将不再包裹那些：

```
$nowrap = function ($string) {
    return str_replace(' ', "\xA0", $string);
}; 
```

这是此类“nowrap”函数的 ASCII 版本。

由于它只需要部分应用于单引号部分，因此需要获取这些部分。这可以通过正则表达式轻松完成：

```
/'[^']+'/ 
```

然而，要将 nowrap 函数应用于匹配项，这需要一个辅助函数将第一个匹配组映射到输入值：

```
$first = function ($callback) {
    return function ($params) use ($callback) {
        return $callback($params[0]);
    };
}; 
```

那么这可以很容易地应用：

```
$quotes  = "/'[^']+'/";
$subject = preg_replace_callback($quotes, $first($nowrap), $subject); 
```

然后，您可以安全地应用该`wordwrap`示例`wordwrap($subject, 31)`将给出以下输出的函数：

```
font-family: Arial,
'Helvetica Nueue',
'Times Roman' 
```

如果您不想在输出中包含这些，也可以将它们转换回来。

完整代码：

```
$subject = "font-family: Arial, 'Helvetica Nueue', 'Times Roman'";

$nowrap = function ($string) {
    return str_replace(' ', "\xA0", $string);
};

$first = function ($callback) {
    return function ($params) use ($callback) {
        return $callback($params[0]);
    };
};

$quotes  = "/'[^']+'/";
$subject = preg_replace_callback($quotes, $first($nowrap), $subject);

echo wordwrap($subject, 31); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:11:15.970

如果您需要通过电子邮件发送此 HTML，您应该使用[`quoted_printable_encode()`](http://www.php.net/quoted_printable_encode)或`base64_encode()`后跟`chunk_split()`.

这两种方法都将确保行不超过 76 个字符。

不要忘记设置适当的`Content-Transfer-Encoding`MIME 标头，要么`quoted-printable`要么`base64`.

# sql - 令人费解的 SQL 语句

> ID：12605096
> 
> 赞同：0
> 
> 时间：2012-09-26T15:22:11.157
> 
> 标签：sql, tsql, logic

给定一个包含这些数据的表：

```
 L    |    N
-------------------
   A    |    1
   A    |    3
   A    |    5
   B    |    5
   B    |    7
   B    |    9
   C    |    1
   C    |    2
   C    |    3 
```

编写一个优雅的 SQL 查询来实现这一点：

查找包含所有 1、2 和 3 的字母 (L)

预期的结果很明显：带有“C”的单行

有人有解决方案吗？不，这不是 CS 作业问题。只是好奇您将如何编写 SQL 查询来找到解决方案。

在此先感谢，丹尼尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:23:17.613

```
select L
from MyTable
where N in (1,2,3)
group by L
having count(distinct N) = 3 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/31920/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T18:48:19.263

也可以
Messier 但通常更快
只会走这条 L 很大的路线，比如超过 100,000，并且您遇到了性能问题。

```
select     L from mytable where N = 1
 intersect
select     L from mytable where N = 2
 intersect
select     L from mytable where N = 3 
```

# mysql - 如何布局我的数据库？

> ID：12605104
> 
> 赞同：0
> 
> 时间：2012-09-26T15:22:32.637
> 
> 标签：mysql, database, database-design

我正在创建一个在线商店来销售枪支和相关物品。我一直致力于完善数据库（MySQL），因为它将成为网站的支柱。我的问题是，在保持规范化优先的同时，我无法理解应该如何布局数据库。该站点有许多产品，并且大多数产品具有相同的信息，但许多产品之间存在细微差别。

例如，弹药有四个类别，四个类别中的三个具有相同的信息，最后一个具有差异。我会为三个相同的表格制作一张表格，而为具有不同信息的一张表格制作一张单独的表格吗？或者我会创建表并有一列可以容纳具有该产品差异的数组或 JSON 字符串？

请记住，有许多产品存在相同的问题。我不害怕工作，我只是想确保我走在正确的道路上。

让我给你一个我的类别的简要布局：

```
• Firearms
    • handguns (unique characteristics)
    • centerfire rifles (unique characteristics)
    • rimfire rifles (same as above)
• Ammunition
    • rifle ammo (unique characteristics)
    • handgun ammo (same as above)
    • rimfire ammo (same as above)
    • shotgun ammo (unique characteristics)
• Shooting Accessories
    • there are many products here with unique characteristics
• Optics
    • there are many products here with unique characteristics
• MANY MORE ... 
```

我很想制作一张名为 products 的表，并将它们全部放在该表中，但由于存在细微差别，我确信这是不可能的。

****编辑****

这是我将拥有的属性差异的示例：

```
• Rifle Ammunition
  • manufacturer
  • model
  • caliber
  • bullet weight
  • bullet type
  • number of rounds
  • price
  • description
  • sku
  • rating

• Handgun Ammunition
  • SAME AS ABOVE

• Rimfire Ammunition
  • SAME AS ABOVE

• Shotgun Ammunition
  • manufacturer
  • model
  • gauge
  • shell length
  • shot weight
  • shot size
  • velocity
  • price
  • description
  • sku
  • rating 
```

步枪、手枪和 rimfire 将具有相同数量的属性 (10)。Shotgun 将具有 (11) 个属性，并且还有更多类似此问题的实例。

谢谢你看:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:29:50.867

我会做这样的事情：

产品表将非常基本，您的主要产品详细信息：

```
create table products
(
  id int,
  name varchar(50)
);

insert into products values
(1, 'rifle ammunition'),
(2, 'handgun ammo'); 
```

我个人会使用类似于以下的模型：

产品表将非常基本，您的主要产品详细信息：

```
create table product
(
  part_number int, (PK)
  name varchar(10),
  price int
);
insert into product values
(1, 'product1', 50),
(2, 'product2', 95.99); 
```

第二个属性表来存储每个不同的属性。

```
create table attributes
(
  id int,
  attribute_name varchar(10),
  attribute_value varchar(10)
);

insert into attributes values
(1, 'manufacturer', 'test'),
(2, 'model', 'blah'),
(3, 'bullet weight', '10'),
(4, 'bullet type', 'metal'),
(5, 'price', '50'); 
```

最后创建 product_attribute 表作为每个产品及其关联属性之间的 JOIN 表。此表将允许每个产品和属性的多个条目。因此，如果一个产品有 10 个属性，则将有 10 个条目。如果另一个有 2 个属性，则将有两个条目。

```
create table products_attributes 
(
  product_id int,
  attribute_id int
);

insert into products_attributes values
(1,  1),
(1,  2),
(1,  3),
(1,  4),
(2,  1),
(2,  2),
(2,  3); 
```

这使您可以灵活地拥有许多具有多个属性或类别的产品。然后查询会很简单，只需几个连接（参见[SQL Fiddle With Demo](http://sqlfiddle.com/#!2/1d76a/1)）：

```
select *
from products p
left join products_attributes pa
  on p.id = pa.product_id
left join attributes a
  on pa.attribute_id = a.id; 
```

查询的结果将是：

```
ID | NAME              | PRODUCT_ID | ATTRIBUTE_ID | ATTRIBUTE_NAME | ATTRIBUTE_VALUE
-------------------------------------------------------------------------------
1  | rifle ammunition  | 1          | 1            | manufacturer   | test
1  | rifle ammunition  | 1          | 2            | model          | blah
1  | rifle ammunition  | 1          | 3            | bullet weight  | 10
1  | rifle ammunition  | 1          | 4            | bullet type    | metal
2  | handgun ammo      | 2          | 1            | manufacturer   | test
2  | handgun ammo      | 2          | 2            | model          | blah
2  | handgun ammo      | 2          | 3            | bullet weight  | 10 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:29:25.327

这是一个简单的设计：

**产品**

*   product_id
*   产品名称

**产品分类**

*   product_id
*   类别ID

**类别**

*   类别ID
*   分类名称

通过这种设计，每个产品都可以有多个类别。如果将 a 添加`category_parent`到`Category`表中，则可以有子类别。

**更新 1**

使用“属性”代替“类别”并向属性添加值：

**产品**

*   product_id
*   产品名称

**产品_属性**

*   product_id
*   属性ID
*   属性值

**属性**

*   属性ID
*   属性名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:41:52.900

有很多方法可以做到这一点。也许其他答案是最好的，但我脑海中闪现的第一件事就是做这样的事情：

```
CREATE TABLE ammunition (
    id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
    -- any columns that are common across ALL categories of ammo,
    PRIMARY KEY (id)
);

CREATE TABLE rifleHandgunRimfireAmmo (
    id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
    -- any columns that are exclusive to rifle/handgun/rimfire ammo,
    fkAmmoID INTEGER UNSIGNED NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (fkAmmoID) REFERENCES ammunition (id)
);

CREATE TABLE shotgunAmmo (
    id INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
    -- any columns that are exclusive to shotgun ammo,
    fkAmmoID INTEGER UNSIGNED NOT NULL,
    PRIMARY KEY (id),
    FOREIGN KEY (fkAmmoID) REFERENCES ammunition (id)
); 
```

它基本上就像 OOP。`ammunition`您有一个包含所有常见信息的基表（有点像基类） 。然后`extend`是带有子表（如子类）的基表。这些子表包含更特定于该特定对象类型的信息。

就像我说的，不确定这是否是最好的方法，或者其他海报的解决方案是否会更好，但这正是我脑海中浮现的想法。

# php - 如何使用单个查询从两个表中选择数据

> ID：12605107
> 
> 赞同：0
> 
> 时间：2012-09-26T15:22:39.297
> 
> 标签：php, mysql, join

我一直在努力思考如何使用单个查询从我的两个表中选择数据。如果有人可以提出比单个查询更好的方法，我全神贯注！以前我会使用两个查询来做到这一点，尽管我被引导相信单个查询会更好，因此我可以轻松地完成工作，因此尝试学习。

我的一张桌子与此类似，以缩小的形式出现。将此表称为“成员”：

```
ID  |  firstName  |   lastName  | networkingID 
```

另一个我称之为“网络”的表：

```
ID  |  websiteURL | facebookURL | twitterURL 
```

我想要做的是在表上运行一个查询，`member`例如：

```
SELECT * FROM `member` WHERE `ID`=2 
```

从表中返回数据`member`。

但是我也希望从表中返回相关值`networking`。`networkingID`表中的列`member`是`ID`中行的`networking`。

我该怎么做呢？

到目前为止，我已经尝试使用我能够通过 Google 找到的所有 JOIN，但我无法使其工作。我最好的结果是`LEFT JOIN`所有列都存在但网络表的结果都是`NULL`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:25:14.523

```
SELECT * FROM member
LEFT JOIN networking
ON member.networkingID=networking.ID
WHERE member.ID=2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:25:16.600

简单的连接，在一个共同的 id 之间。内连接将确保网络表中有记录，否则不会显示该成员。`LEFT JOIN`如果您想要所有`member`行，无论它们是否在`network`表中加入任何内容，您都可以将其替换为

```
 SELECT * FROM member m 
      INNER JOIN networking n 
 ON (m.networkingID = n.id) 
 WHERE m.id = 2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:25:26.630

```
select
   *
from
   member as m
   left outer join
      networking as n
   on
      m.networkingID=n.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:27:57.503

一个 JOIN 应该工作。

```
SELECT * FROM member, networking WHERE member.ID=2 AND member.networkingID=networking.ID 
```

如果 member.ID=2 没有网络数据，这将返回一个空结果。如果你想在这种情况下得到一个结果，你可以尝试 LEFT JOIN。

```
SELECT * FROM member LEFT JOIN networking ON member.networkingID=networking.ID WHERE member.ID=2 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T15:29:00.073

```
select * from member a, networking b 
where a.networkingID=b.ID and a.ID = 2 
```

# java - Java RMI 解决问题

> ID：12605112
> 
> 赞同：0
> 
> 时间：2012-09-26T15:22:47.567
> 
> 标签：java, design-patterns, rmi

我正在尝试重新编码一些基本的设计模式。只有代码片段可供我使用，没有完整的运行代码示例。一种称为代理模式。

我只想通过远程调用方法。这是我的简单代码：

**网络服务.java**

```
public class WebService extends UnicastRemoteObject implements IRemote {

    private static final long serialVersionUID = 1L;

    public static void main(String[] args) {

        try {
            IRemote service = new WebService();
            Naming.rebind("RemoteCalculator", service);
        } catch (Exception e) {
            e.printStackTrace();
        }       
    }

    /** No arg default constructor */
    public WebService() throws RemoteException {    }

    /** Methods of remote interface */
    @Override
    public double getRoot(double v) throws RemoteException {        
        return Math.sqrt(v);
    }

} 
```

... 其中 IRemote 是一个简单的接口，它扩展了远程接口并定义了单个示例方法 (getRoot(double)) 的签名。

现在连接到远程的类：

**测试代理.java**

```
public class TestProxy implements Remote{

    /**
     * @param args
     */
    public static void main(String[] args) {        
        new TestProxy().go(args[0]);
    }

    public TestProxy() {}

    public void go(String ip) {
        try {

            System.out.println("Trying to lookup for service ...");

            IRemote service = (IRemote) Naming.lookup("//" + ip + "/RemoteCalculator");

            System.out.println("done");

            double d = service.getRoot(5.0);

            System.out.println(d);

        } catch (Exception e) {
            e.printStackTrace();
        }

    }

} 
```

我正在运行 rmiregistry.exe 并通过 rmic.exe 创建了我的 WebService_Stub.class，如一些文档中所示。本地与 127.0.0.1 连接，因为（ip-）参数工作正常。但是，即使端口 (1099) 已打开并通过 telnet 进行检查，也无法通过 Internet 进行连接。

当我从命令行开始时：

> java net.mypackage.remote.TestProxy 78.2.2.2

它总是给出结果：

> 试图查找服务...完成 java.rmi.ConnectException: Connection refused to host: 192.168.1.51; 嵌套的异常是： java.net.ConnectException: Connection timed out at sun.rmi.transport.tcp.TCPEndpoint.newSocket(Unknown Source) at sun.rmi.transport.tcp.TCPChannel.createConnection(Unknown Source) at sun.rmi .transport.tcp.TCPChannel.newConnection(Unknown Source) at sun.rmi.server.UnicastRef.invoke(Unknown Source) at java.rmi.server.RemoteObjectInvocationHandler.invokeRemoteMethod(Unkn own Source) at java.rmi.server.RemoteObjectInvocationHandler。在 net.gerdsmeier.remote.TestProxy.go(TestProxy.java:39) 在 net.gerdsmeier.remote.TestProxy.main(TestProxy.java:22) 在 $Proxy1.getRoot(Unknown Source) 调用(Unknown Source) : java.net。

其中 192.168.1.51 是我的本地 IP 地址（即端口转发工作正常）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:07:48.407

好的，我猜您的 WebService 在 NAT 之后，并且您已经在 1099 上设置了端口转发以通过 RMI 注册表。这还不够。远程对象将在与 1099 不同的端口上监听。如果您没有设置到该端口的端口转发，您将永远无法连接，因此该`double d = service.getRoot(5.0)`行出现异常。

问题是转发哪个端口？如果不指定端口，RMI 会随机选择一个高端口。[但是您可以使用UnicastRemoteObject](http://docs.oracle.com/javase/7/docs/api/java/rmi/server/UnicastRemoteObject.html)构造函数的一个版本来指定端口。因此，您可以选择一个端口号，也可以`IRemote service = new WebService([portnumber]);`在该端口上执行和设置端口转发。

看看能不能剪！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T19:24:54.783

好吧，我已经解决了一部分问题。它在服务器存根的逻辑背后：

在服务器端，我们必须通过添加行来添加有关全局主机名的信息

```
System.setProperty("java.rmi.server.hostname",Util.getGlobalAddress().getHostAddress()); 
```

... Util 类可能如下所示：

```
public class Util{

  /**
   * Finds this computer's global IP address
   * 
   * @return The global IP address, or null if a problem occurred
   */
  public static Inet4Address getGlobalAddress()
  {
    try
    {
      URLConnection uc = new URL( "http://vallentinsource.com/globalip.php" ).openConnection();
      BufferedReader br = new BufferedReader( new InputStreamReader( uc.getInputStream() ) );
      return ( Inet4Address ) InetAddress.getByName( br.readLine() );
    }
    catch( MalformedURLException e )
    {
      e.printStackTrace();
    }
    catch( IOException e )
    {
      e.printStackTrace();
    }

    return null;

  }
} 
```

现在它朝一个方向工作，即客户端调用

```
service.printName("Pete"); 
```

在服务器端工作正常。另一方面 ...

```
d = service.getRoot(5.0);
System.out.println(d); 
```

...在客户端上还没有工作。它不会引发错误，但我们没有得到结果。然而。您也可以通过添加客户端 IP 地址/主机名来修复它：

```
System.setProperty("java.rmi.client.hostname", "ip.of.client.pc"); 
```

但是服务器不能事先知道所有的客户端地址。无论如何：这是一种解决方法，在某些情况下可能会有所帮助。

# java - 使用 Java 以编程方式写入 xterm 进程

> ID：12605113
> 
> 赞同：1
> 
> 时间：2012-09-26T15:22:49.707
> 
> 标签：java, processbuilder, xterm

反正有读写数据到 xterm 控制台吗？我的意思是使用`ProcessBuilder`类，我们可以调用外部进程，例如使用`cmd \c`或`bash`可以向系统控制台写入和读取数据。

现在我有一个包含更多嵌入式虚拟机的虚拟机控制台。从根控制台我打开 xterm 控制台，我想知道是否可以务实地将数据写入这些控制台？

这可能更可能是一个 xterm cmd line 选项问题，但我找不到任何信息、任何建议，或者这根本不可能。

**编辑：**

解释：

@MarcB，是的，我对图形包装器不感兴趣，而是需要向 tty 设备写入/读取。现在我的问题是我访问 bash，并且通过使用 xterm proc1 proc2 我打开两个 xterm 控制台，而主根控制台被阻止，直到这两个 xterm 窗口被终止。就我而言，现在一旦我可以访问根控制台，那么我如何从那里进一步同时调用两个（类似 xterm 控制台的）进程？我的意思是我可以打开两个单独的根控制台，然后做这件事，但不幸的是，在我的情况下这是不可能的。

# mysql - 优化这段 MYSQL 代码以获得更好的执行时间

> ID：12605137
> 
> 赞同：0
> 
> 时间：2012-09-26T15:23:28.593
> 
> 标签：mysql, sql, database, performance

这段mysql代码

```
SELECT  id, value, LENGTH(stuffing)
FROM  t_limit ORDER BY id LIMIT 150000, 10 
```

可以通过像这样重写来优化以获得更好的性能

**注意：表在 Id 上有索引**

```
SELECT  l.id, value, LENGTH(stuffing)
FROM    (
    SELECT  id
    FROM    t_limit
    ORDER BY
            id
    LIMIT 150000, 10
    ) o
JOIN    t_limit l
ON      l.id = o.id
ORDER BY
    l.id 
```

**参考：http://explainextended.com/2009/10/23/mysql-order-by-limit-performance-late-row-lookups/**

现在如何以类似的方式优化这段代码

```
SELECT  id, value, LENGTH(stuffing)
FROM  t_limit where value>100 ORDER BY id LIMIT 150000, 10 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T15:00:22.260

上述帖子中提出的优化背后的基本思想是仅查询索引页面而不触及数据页面。如果查看非优化查询的查询计划：

```
SELECT  id, value, LENGTH(stuffing) AS len
FROM    t_limit
ORDER BY
        id
LIMIT 150000, 10 
```

这将是：

```
+----+-------------+---------+------+---------------+------+---------+------+--------+----------------+
| id | select_type | table   | type | possible_keys | key  | key_len | ref  | rows   | Extra
+----+-------------+---------+------+---------------+------+---------+------+--------+----------------+
|  1 | SIMPLE      | t_limit | ALL  | NULL          | NULL | NULL    | NULL | 200000 | Using filesort |
+----+-------------+---------+------+---------------+------+---------+------+--------+----------------+ 
```

所以这是一个简单的表扫描。通过子查询优化，我们收到：

```
+----+-------------+------------+--------+-------------------------------+---------+---------+------+--------+---------------------------------+
| id | select_type | table      | type   | possible_keys                 | key     | key_len | ref  | rows   | Extra                           |
+----+-------------+------------+--------+-------------------------------+---------+---------+------+--------+---------------------------------+
|  1 | PRIMARY     | <derived2> | ALL    | NULL                          | NULL    | NULL    | NULL |     10 | Using temporary; Using filesort |
|  1 | PRIMARY     | l          | eq_ref | PRIMARY                       | PRIMARY | 4       | o.id |      1 |                                 |
|  2 | DERIVED     | t_limit    | index  | NULL                          | PRIMARY | 4       | NULL | 150010 | Using index                     |
+----+-------------+------------+--------+-------------------------------+---------+---------+------+--------+---------------------------------+ 
```

查看`key`显示最内层语句使用 PRIMARY 索引的列。我稍微修改了您的查询，以便值类型兼容：

```
SELECT  l.id, value, LENGTH(stuffing) AS len
FROM    (
        SELECT  id
        FROM    t_limit
        where value like 'Value 1%'
        ORDER BY
                id
        LIMIT 30000, 10
        ) o
JOIN    t_limit l
ON      l.id = o.id
ORDER BY
        l.id 
```

您需要考虑`where`条件的作用。如果你把它放在外部查询中，你将只过滤从内部查询返回的 10 行——我想这不是你想要的。现在在呈现的情况下（`where`内部语句中的条件），您最终会进行表扫描，因为没有索引可以满足您的查询：

```
+----+-------------+------------+--------+---------------+---------+---------+------+--------+--------------------------------+
| id | select_type | table      | type   | possible_keys | key     | key_len | ref  | rows   | Extra                           |
+----+-------------+------------+--------+---------------+---------+---------+------+--------+---------------------------------+
|  1 | PRIMARY     | <derived2> | ALL    | NULL          | NULL    | NULL    | NULL |     10 | Using temporary; Using filesort |
|  1 | PRIMARY     | l          | eq_ref | PRIMARY       | PRIMARY | 4       | o.id |      1 |                                 |
|  2 | DERIVED     | t_limit    | ALL    | NULL          | NULL    | NULL    | NULL | 200000 | Using filesort                  |
+----+-------------+------------+--------+---------------+---------+---------+------+--------+---------------------------------+ 
```

要从博客文章中介绍的相同优化中获益，您需要一个额外的非聚集索引，例如。

```
create index NCIX_t_limit_id_value on t_limit(id, value) 
```

现在，当您运行上述查询时，计划将是：

```
+----+-------------+------------+--------+-------------------------------+-----------------------+---------+------+-------+---------------------------------+
| id | select_type | table      | type   | possible_keys                 | key                   | key_len | ref  | rows  | Extra                           |
+----+-------------+------------+--------+-------------------------------+-----------------------+---------+------+-------+---------------------------------+
|  1 | PRIMARY     | <derived2> | ALL    | NULL                          | NULL                  | NULL    | NULL |    10 | Using temporary; Using filesort |
|  1 | PRIMARY     | l          | eq_ref | PRIMARY,NCIX_t_limit_id_value | PRIMARY               | 4       | o.id |     1 |                                 |
|  2 | DERIVED     | t_limit    | index  | NULL                          | NCIX_t_limit_id_value | 66      | NULL | 30010 | Using where; Using index        |
+----+-------------+------------+--------+-------------------------------+-----------------------+---------+------+-------+---------------------------------+ 
```

同样，我们只扫描索引页。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:04:32.177

您可以将查询编写为：

```
SELECT l.id, value, LENGTH(stuffing)
FROM (SELECT  id
      FROM t_limit
      WHERE value > 100
      ORDER BY id
      LIMIT 150000, 10
     ) o JOIN
     t_limit l
     ON l.id = o.id
ORDER BY l.id 
```

但是，这*不会*提高性能。MySQL 必须读取数据页以获取具有正确值的行。

您可以在此上添加其他索引：(value)、(value, id) 和 (id, value)。这些将对性能产生不同的影响。

第一个将使用索引来满足`WHERE`子句，然后基本上忽略索引的“id”部分。如果`value > 100`具有高度选择性（例如，少于 1% 的记录符合此标准），这将提高性能。

第二个可能会有所帮助。老实说，我不知道 MySQL 是否会从索引中读取 id，然后进行排序。或者，如果它会读取原始数据。如果是第一个，这将有所帮助。

第三个可能是最好的选择。我认为 MySQL 会读取索引以查找匹配的值，然后使用索引进行排序和限制。我的意思是，它应该，但我不是 100% 确定引擎会真正做到这一点。

# jquery - 在另一个 div 中获取 div 的高度

> ID：12605138
> 
> 赞同：0
> 
> 时间：2012-09-26T15:23:33.557
> 
> 标签：jquery

我有一个 div 我需要得到它的高度。它在一个 div 里面，里面有几个 div。它们都在一个类似的 div 结构中。我做了一个 js fiddle 来说明我的问题以及我目前所拥有的。[http://jsfiddle.net/K3dx5/](http://jsfiddle.net/K3dx5/)

所以基本上我需要在点击链接时获取第一个 div 的高度（400px），也在第二个链接（200px）上。

> ```
> <div class="wrapper">
>     <div class="one">  <!--I need to get the height of this div -->
>     <div class="NotThisone">
>        <div class="No">
>     <a class="anchor">ONE</a>
>         </div>
>     </div>
> </div>
> <div class="two"> <!--I need to get the height of this div -->
>     <div class="NotThistwo">
>         <div class="No">
>     <a class="anchor">TWO</a>
>         </div>
>     </div>    
> </div> 
> ```
> 
> ​</p>

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:27:09.557

我建议使用`closest()`带有选择器的方法：

```
$('.anchor').click(function() {
    var height = $(this).closest('.wrapper > div[class]').height();
    console.log(height);
});​ 
```

[更新了 JS Fiddle 演示](http://jsfiddle.net/davidThomas/K3dx5/3/)。

参考：

*   `closest()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:26:53.663

首先，使用

```
var x = $(this).closest('.one').height(); 
```

第二，使用

```
var x = $(this).closest('.two').height(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:28:42.350

你的选择器是错误的。

```
var x = $(this).parent().parent().parent().css('height'); 
```

有问题的 div 比锚点高三个级别，因此您需要使用三个 parent() 方法。

或者您可以使用不同的选择器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:31:33.470

小提琴中的问题是您正在选择直接父级，尽管同时您想要的 div 高 2 个级别。将该选择切换到此即可完成工作。

```
var x = $(this).parent().parent().parent().css('height'); 
```

这看起来有点混乱和不可靠（如果您更改 html 以在锚标记周围添加更多 div，则 javascript 将再次选择错误的 div）因此，如果您向 div 添加一个您想要高度的通用类，那么您可以选择特定的父级。所以假设我将名为“parentNeeded”的类添加到 div“one”和“two”中，然后您可以使用以下语句

```
var x = $(this).parents(".parentNeeded").css('height'); 
```

你可以在这个小提琴 [http://jsfiddle.net/K3dx5/5/中看到这个](http://jsfiddle.net/K3dx5/5/)

# python - 如何全局重载断言，这样我就不必在我的 PyQT 应用程序中更改 lib 代码？

> ID：12605139
> 
> 赞同：0
> 
> 时间：2012-09-26T15:23:34.540
> 
> 标签：python, debugging, pyqt

我的应用程序使用 QT 作为 gui 层，以及我制作的许多其他库。

另一个库中的一个非常复杂（它是一个类型系统）并且充满了断言以使其尽可能可靠。

但是当在这个库中触发断言时，Qt 主循环会继续。我有一个适用于 Qt 部分的 qt_debug()（使用 pyqtRemoveInputHook），但对于其他 python 库则没有。

而且，显然我会避免更改库中的代码，因为它应该可以在没有 Qt 的情况下使用。

最好的解决方案是断言钩子，但尽管谷歌搜索我没有任何明显的方法来做到这一点。任何的想法 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:52:50.357

使用`assert`是错误的方式。一方面，如果 Python 运行时使用 -O（或 -OO）`assert`，则关闭；另一方面，错误消息不是很有帮助。该库需要重新设计以正确使用异常。

就目前使用的图书馆而言：你想要发生什么？你的应用应该退出吗？如果是这样，您可以创建自己的 AssertionError 类，将 in 替换为`__builtins__`您的，然后让它在它的`__init__`. 请注意，如果您这样做，您将完全靠自己。

# php - PHP中关联数组的默认值

> ID：12605141
> 
> 赞同：1
> 
> 时间：2012-09-26T15:23:38.740
> 
> 标签：php

我有一个接受数组参数的函数

```
array('employee_name' => 'employee_location' )

eg:
array('John' => 'U.S', 'Dave' => 'Australia', 'Unitech' => 'U.S' ) 
```

我希望保留“美国”作为默认位置和可选值，所以

所以如果我通过

```
array('John', 'Dave' => 'Australia', 'Unitech') 
```

PHP中是否有一个内置函数可以自动将其转换为

```
array('John' => 'U.S', 'Dave' => 'Australia', 'Unitech' => 'U.S' ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:26:48.623

没有内置功能。

您应该遍历数组并检查键是否为数字。如果是，则使用该值作为键并添加您的默认值作为值。

简单示例（为清楚起见使用新数组）：

```
$result = array();
foreach ($arr as $key => $value)
{
  if (is_int($key))    // changed is_numeric to is_int as that is more correct
  {
    $result[$value] = $default_value;
  }
  else
  {
    $result[$key] = $value;
  }
} 
```

显然，这会因重复名称而中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T15:25:44.713

```
foreach ($arr as $k => $v) {
    if (is_int($k)) {
        unset($arr[$k]);
        $arr[$v] = 'U.S.';
    }
 } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T15:41:47.690

请注意，军情六处会追捕你：`$agents = array('007' => 'UK');`将转变为`$agents['UK'] => 'US'`......我知道英国和美国有*“特殊关系”*，但这有点远，恕我直言。

```
$agents = array('007' => 'UK');
$result = array();
foreach($agents as $k => $v)
{
    if (is_numeric($k))//leave this out, of course
    {
        echo $k.' won\'t like this';//echoes 007 won't like this
    }//replace is_numeric with is_int or gettype($k) === 'integer'
    if (is_int($k))
    {//'007' isn't an int, so this won't happen
        $result[$v] = $default;
        continue;
    }
    $result[$k] = $v;
} 
```

在此示例中，结果和输入看起来完全一样。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T15:27:20.340

我会使用这样的东西：

```
foreach ( $array AS $key => $value )
{
 if ( is_numeric($key) )
 {
  $key = 'U.S';
 }
 $array[$key] = $value;
} 
```

# ajax - 需要 JSON 将值从特定内容类型字段传递到 AJAX

> ID：12605143
> 
> 赞同：2
> 
> 时间：2012-09-26T15:23:41.640
> 
> 标签：ajax, json, drupal, drupal-7

我是 PHP 新手。

我想构建一个模块，我需要 json 来传递特定的内容类型字段。

我正在尝试这个，但我不知道如何处理回调函数。

这是我在 .js 中的 ajax

```
$.ajax({
  type: 'GET',
  url: '/mappy/ajax/poi',
  data: {
    nid: nid
  },
  dataType: 'json',
  success: function(data){
    alert(data) 
  }
});

}) 
```

这是我在 .module 中的 php

```
function mappy_menu() {
  $items = array();

  $items['/mappy/ajax/poi'] = array(
    'title' => 'Mappy Pois',
    'page callback' => 'mappy_get',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );
  return $items;
}

function mpapy_get() {

  $nid = $_GET('nid');
  $title = field_get_items('node', $node, 'field_title');
  $result = json_encode(
        db_query("SELECT nid,title FROM {node}", $nid)
    );

  drupal_json_output($result);
  print $result;
} 
```

非常感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:29:12.227

获得 JSON 响应后，您需要将其转换为 javascript 数组。为此，您可以这样做：

```
var javaArray = $.parseJSON(data); 
```

现在您可以使用 javaArray['key1']['key2'] 等代码检索数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T22:13:12.467

**.js**

```
$.ajax({
  type: 'GET',
  // Do not use slash at the beginning, use Drupal.settings.basePath instead
  url: Drupal.settings.basePath + 'mappy/ajax/poi',
  data: {
    nid: nid
  },
  dataType: 'json',
  success: function(data) {
    alert(data) 
  }
}); 
```

**。模块**

```
function mappy_menu() {
  $items = array();
  // Never use slash at the beginning in hook_menu
  $items['mappy/ajax/poi'] = array(
    'title' => 'Mappy Pois',
    'page callback' => 'mappy_get',
    'access arguments' => array('access content'),
    'type' => MENU_CALLBACK,
  );
  return $items;
}

function mappy_get() {
  $node = node_load($_GET('nid'));
  // Or equivalent
  /* $node = db_select('node', 'n')
       ->fields('n', array('nid', 'title'))
       ->condition('n.nid', $_GET('nid')))
       ->execute()
       ->fetchAll(); */

  $values = array(
    'nid' => $node->nid,
    'title' => $node->title
  );

  #$result = json_encode(
  #  db_query("SELECT nid,title FROM {node}", $nid)
  #);

  // drupal_json_output already print the value
  // print $result;

  drupal_json_output($values);
  drupal_exit();
} 
```

# sql - SQL是否可以授予视图权限而不是用户访问其他数据库？

> ID：12605144
> 
> 赞同：0
> 
> 时间：2012-09-26T15:23:42.357
> 
> 标签：sql, sql-server-2008

您好，感谢您的宝贵时间，

我正在使用 sql 2008 我创建了一个没有任何相关性的数据库。在这里我想添加访问其他数据库的视图。然后，我将向数据库添加一个没有相关性的用户并授予对视图的访问权限。

我明显的问题是，当用户尝试运行视图时，会在他们无权查看信息的情况下发生错误。（当我使用管理员类型用户时，我可以访问视图并查看结果没问题）

我可以为两个单独的数据库上的所有 SELECT 创建视图权限，以便用户可以看到结果。或者用户是否需要对所有查询的表的读取权限。

再次感谢你。

这就是我尝试过的（还有很多其他的，但它没有用）

```
USE no-relevance-server
GRANT REFERENCES ON OBJECT[important-server::dbo.table] TO [the view] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:30:28.200

您的问题是跨数据库所有权链之一

[您可以按照http://support.microsoft.com/kb/810474](http://support.microsoft.com/kb/810474)上的说明使其工作

```
EXEC sp_configure 'Cross DB Ownership Chaining', '1'; RECONFIGURE 
EXEC sp_dboption 'YourDatabase', 'db chaining', 'true' 
```

但请务必阅读`Cross Database Ownership Chaining`相关风险。

[http://msdn.microsoft.com/en-us/library/ms188676.aspx](http://msdn.microsoft.com/en-us/library/ms188676.aspx)

# html - 将 twitter 和 facebook 消息嵌入到您网站的页脚

> ID：12605148
> 
> 赞同：0
> 
> 时间：2012-09-26T15:23:57.707
> 
> 标签：html, css, twitter

我知道这是可能的，因为我在许多网站上都看到过，但是如何将 twitter 评论嵌入到我的网站页脚中。我只是希望它基本上显示来自 Twitter 帐户的最后 5 条评论。

我不希望你告诉我我只是希望有人引导我朝着正确的方向发展教程或其他东西。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:27:26.610

我建议您使用 jquery plguin，例如：

[http://tweet.seaofclouds.com/](http://tweet.seaofclouds.com/)

易于遵循和简单的设置。

例子：

```
jQuery(function($){
    $(".tweet").tweet({
      join_text: "auto",
      username: "seaofclouds",
      avatar_size: 48,
      count: 3,
      auto_join_text_default: " we said, ",
      auto_join_text_ed: " we ",
      auto_join_text_ing: " we were ",
      auto_join_text_reply: " we replied ",
      auto_join_text_url: " we were checking out ",
      loading_text: "loading tweets..."
    });
  }); 
```

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:28:59.317

如果您不知道如何引导您的网站，这将有点困难。但是，它通常就像从任一网站复制和粘贴代码一样简单。尝试在 facebook 上搜索“twitter rss feed”和/或相同的内容。它们都应该具有允许您设置预览框并通过它们显示评论的工具。然后它将生成一些特定于您的凭据的代码，就像复制/粘贴一样简单。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:31:25.733

您是否尝试过查看要实现的社交网络的 API 页面？他们的 API 通常都有很好的文档记录，因此很容易从中找到解决方案:-)

你可以在这里找到它们：

推特：[https ://dev.twitter.com](https://dev.twitter.com)

脸书：http: [//developers.facebook.com](http://developers.facebook.com)

祝你好运 ：-）

# mysql - 将日期和时间添加到数据库条目

> ID：12605155
> 
> 赞同：0
> 
> 时间：2012-09-26T15:24:17.147
> 
> 标签：mysql, database, forms, phpmyadmin

如何添加一列以显示 mySQL 数据库中数据库条目的日期和时间？

我有一个自动存储到数据库中的表单，我是否需要在表单中添加隐藏的输入来获取日期和时间，或者我可以在 mySQL 设置中设置一个特定的函数来自动执行此操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:27:47.657

```
alter table
   `your_table`
add column `created` timestamp not null default current_timestamp 
```

现在所有插入的行都会有一个额外的列`created`，以创建时的时间戳命名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:28:03.863

您可以定义您的表来放置记录输入或上次编辑时间的时间戳。

[http://dev.mysql.com/doc/refman/5.1/en/alter-table.html](http://dev.mysql.com/doc/refman/5.1/en/alter-table.html)

创建一个类型为 TIMESTAMP 和 DEFAULT CURRENT_TIMESTAMP 的列

# jquery - 为 div 动态添加额外的边距

> ID：12605156
> 
> 赞同：0
> 
> 时间：2012-09-26T15:24:20.170
> 
> 标签：jquery, css

使用 jQuery，我想为 div 'foo' 添加额外的上边距，但前提是另一个 div 'foo2' 包含两个以上的图像。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T15:27:58.083

```
$('#foo2 > img').length > 2 ? $('#foo').css('margin-top', '10px') : 0; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T15:25:37.193

```
if ($('#foo2 img').length>2) $('#foo').css('margin-top', 243); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:35:29.370

我通常喜欢使用`addClass()`and `removeClass()`（或合并的`toggleClass()`）而不是直接在 JS 中指定 css。它将样式保留在应有的位置。

jQuery

```
$('#foo').toggleClass('newClass', $('#foo2 img').length > 2); 
```

CSS

```
.newClass { margin-top: 10px; ... } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:26:37.407

```
if ($('#foo2 img').length > 2) {
  $('#foo').css('margin-top', 20);
} 
```

# java - Eclipse XML 格式化后端库

> ID：12605159
> 
> 赞同：2
> 
> 时间：2012-09-26T15:24:25.287
> 
> 标签：java, eclipse, dependencies, xml-formatting

我正在问一个后续问题，以帮助 OP 从一个[超级用户问题](https://superuser.com/questions/479833/how-to-format-a-xml-file-with-long-list-of-attributes)演变为一个编程问题。

正如您在我对那个 SU 问题的回答中的 Eclipse 屏幕截图中看到的那样，Eclipse 具有用于格式化 XML 的强大且可配置的引擎（顺便说一下，我使用的是 Eclipse Juno 版本）。

SU 问题的 OP 选择 Eclipse 的 XML 引擎作为他们整理 XML 的首选方法。不幸的是，OP 更喜欢在命令行上工作，并希望从 Eclipse 的 XML 格式化引擎中获取相同的功能，并使其作为一个简单的无头程序运行，例如可以从`bash`.

我知道 Eclipse 是非常模块化和可扩展的，所以我的直觉告诉我 Eclipse 不会将 XML 引擎背后的功能与 UI 紧密结合起来。因此，我认为 Eclipse 中有一些 OSGi 模块仅将 XML 处理例程实现为无头 I/O 接口，而不是耦合到 Eclipse 运行时。如果这个接口依赖于 Eclipse 的其他部分，那很好，只要它不要求启动富客户端平台和 GUI。我正在寻找无头解决方案。

在 Eclipse 堆栈的哪一层，我可以访问此接口，以便设计一个命令行程序，该程序本质上接受 XML 文件和类似于 Eclipse 首选项窗格中的格式首选项列表（但指定作为命令行参数）并生成格式化的 XML 作为输出？

网上看了一些，觉得Eclipse Juno中的XML源代码编辑器是用WST实现的，但是不知道怎么分离出WST中与本项目无关或者有GUI功能的部分，所以只能调用实际执行 XML 解析和修改的无头“引擎”类。

这个问题不是关于*如何*使用有问题的接口。只是 Eclipse 平台太大了，仅仅发现我需要的库接口的存在本身就是一个挑战，因此这个问题。一旦我找到了一个位于该任务的正确抽象级别的 API，我将能够从文档中了解 API 并编写程序而无需更多帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:44:30.457

XML 格式化程序位于“org.eclipse.wst.xml.core”插件中。

```
org.eclipse.wst.xml.core.internal.formatter.XMLFormatterFormatProcessor 
```

该插件使用扩展点“org.eclipse.wst.sse.core.formatProcessors”使其可用。

# increment - jQuery 滑块将整数设置为 .01

> ID：12605164
> 
> 赞同：1
> 
> 时间：2012-09-26T15:24:41.043
> 
> 标签：increment

jQuery 增量滑块：如何设置滑块以 0.01 为增量？我将步长设置为“步长：0.01”，但滑块不会以 0.01 递增，而是以 0.1 递增

滑块需要增加 0.01 美分，以便我们的客户可以跟踪他们帐户中的每一分钱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-25T14:37:07.737

我知道这是一篇旧帖子，但我偶然发现它试图找到解决方案，所以我想我会回到这篇文章并告诉大家我为那些仍在寻找解决方法的人做了什么

基本上，我采用了从 0-20 开始的原始比例，然后在我的代码中将其从 0-200 变为 0-200，我只是将输出除以 10，现在它工作得很好，显然这增加了几行代码，让你有在将变量除以 10 后重新分配变量，但是您现在可以使滑块增加 0.1，并通过简单的数学将其设为 0-2000 并除以 10，然后滑块将增加 0.01 希望这对某人有所帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T10:20:46.197

我刚刚对其进行了测试并且确实可以工作，但是您必须设置步骤：0.01，您可以测试自己这是我为 yaxis 和 x 轴工作的示例。我希望这会有所帮助，而且还为时不晚

```
<script>$(document).ready(function(){

 $( "#x" ).slider({
        range: true,
        min: -6,
        max: +6,
        step:0.01,
        values: [0,2],
        slide: function( event, ui ) {
           $( "#amountx" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
        }
    });

     $( "#y" ).slider({
        range: true,
        orientation: "vertical",
        min: -12,
        max: 12,
        step:0.01,
        values: [1,2],
        slide: function( event, ui ) {
            $( "#amounty" ).val( ui.values[ 0 ] + " - " + ui.values[ 1 ] );
        }
    });
   $( "#amountx" ).val(  $( "#x" ).slider( "values", 0 ) +
        " - " + $( "#x" ).slider( "values", 1 ) );
     $( "#amounty" ).val( $( "#y" ).slider( "values", 0 ) +
        " - " + $( "#y" ).slider( "values", 1 ) );});</script>
<style>#x{top:115px;width:230px;}#y{height:230px;}</style><div id='x'></div><div id='y'></div><input type='text' id='amountx'/><input type='text' id='amounty'/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:26:15.430

你不能，否则该值不会是整数。

一直在努力使用滑块允许小数步长，[似乎成功的一个](http://forum.jquery.com/topic/jquery-mobile-slider-does-not-support-step-attribute)（虽然我没有仔细检查过）需要破解 jQuery UI 库本身来添加小数支持。

# xml-parsing - 在 VB.NET 中使用 LINQ to XML

> ID：12605166
> 
> 赞同：1
> 
> 时间：2012-09-26T15:24:41.607
> 
> 标签：xml-parsing

我对 VB.NET 中的 LINQ to XML 有疑问。

如何读取 XML 文档的特定属性并在列表框中显示结果？

我想在列表框中拥有的属性：

*   克兰特普
*   克拉斯
*   半径
*   特拉格拉斯特

这是 xml 文件的样子：

```
<?xml version="1.0" encoding="utf-8" ?> <Krane>   <Hersteller>
    <Marke>Liebherr</Marke>
    <Modell>
      <Krantyp>LTM 1030-2.1</Krantyp>
      <Klasse>30</Klasse>
      <Rüstzustand>
        <Rüstdetail>
          <ID>LTM 1030-2.1-A</ID>
          <Color1>CornflowerBlue</Color1>
          <TextOben1>30 m</TextOben1>
          <TextUnten1>T</TextUnten1>
          <Color2>Transparent</Color2>
          <TextOben2></TextOben2>
          <TextUnten2></TextUnten2>
          <Color3>Transparent</Color3>
          <TextOben3></TextOben3>
          <TextUnten3></TextUnten3>
          <Color4>Transparent</Color4>
          <TextOben4></TextOben4>
          <TextUnten4></TextUnten4>
          <Color5>Transparent</Color5>
          <TextOben5></TextOben5>
          <TextUnten5></TextUnten5>
          <Color6>LightCoral</Color6>
          <TextOben6>2,3 t</TextOben6>
          <TextUnten6>B</TextUnten6>
          <Traglasten>
            <Schritt>
              <Radius>3</Radius>
              <Traglast>30,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>4</Radius>
              <Traglast>24,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>5</Radius>
              <Traglast>19,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>6</Radius>
              <Traglast>14,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>7</Radius>
              <Traglast>11,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>8</Radius>
              <Traglast>9,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>9</Radius>
              <Traglast>7,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>10</Radius>
              <Traglast>6,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>12</Radius>
              <Traglast>4,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>14</Radius>
              <Traglast>3,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>16</Radius>
              <Traglast>2,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>18</Radius>
              <Traglast>2,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>20</Radius>
              <Traglast>1,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>22</Radius>
              <Traglast>1,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>24</Radius>
              <Traglast>1,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>26</Radius>
              <Traglast>0,8</Traglast>
            </Schritt>
          </Traglasten>
        </Rüstdetail>
      </Rüstzustand>
      <Rüstzustand>
        <Rüstdetail>
          <ID>LTM 1030-2.1-B</ID>
          <Color1>CornflowerBlue</Color1>
          <TextOben1>30 m</TextOben1>
          <TextUnten1>T</TextUnten1>
          <Color2>Transparent</Color2>
          <TextOben2></TextOben2>
          <TextUnten2></TextUnten2>
          <Color3>Transparent</Color3>
          <TextOben3></TextOben3>
          <TextUnten3></TextUnten3>
          <Color4>Transparent</Color4>
          <TextOben4></TextOben4>
          <TextUnten4></TextUnten4>
          <Color5>Transparent</Color5>
          <TextOben5></TextOben5>
          <TextUnten5></TextUnten5>
          <Color6>LightCoral</Color6>
          <TextOben6>5,5 t</TextOben6>
          <TextUnten6>B</TextUnten6>
          <Traglasten>
            <Schritt>
              <Radius>3</Radius>
              <Traglast>30,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>4</Radius>
              <Traglast>24,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>5</Radius>
              <Traglast>20,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>6</Radius>
              <Traglast>17,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>7</Radius>
              <Traglast>14,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>8</Radius>
              <Traglast>11,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>9</Radius>
              <Traglast>9,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>10</Radius>
              <Traglast>8,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>12</Radius>
              <Traglast>6,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>14</Radius>
              <Traglast>4,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>16</Radius>
              <Traglast>3,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>18</Radius>
              <Traglast>3,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>20</Radius>
              <Traglast>2,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>22</Radius>
              <Traglast>2,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>24</Radius>
              <Traglast>1,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>26</Radius>
              <Traglast>1,4</Traglast>
            </Schritt>
          </Traglasten>
        </Rüstdetail>
      </Rüstzustand>
      <Rüstzustand>
        <Rüstdetail>
          <ID>LTM 1030-2.1-C</ID>
          <Color1>CornflowerBlue</Color1>
          <TextOben1>30 m</TextOben1>
          <TextUnten1>T</TextUnten1>
          <Color2>CornflowerBlue</Color2>
          <TextOben2>8,6 m</TextOben2>
          <TextUnten2>K</TextUnten2>
          <Color3>Transparent</Color3>
          <TextOben3></TextOben3>
          <TextUnten3></TextUnten3>
          <Color4>Transparent</Color4>
          <TextOben4></TextOben4>
          <TextUnten4></TextUnten4>
          <Color5>Transparent</Color5>
          <TextOben5></TextOben5>
          <TextUnten5></TextUnten5>
          <Color6>LightCoral</Color6>
          <TextOben6>2,3 t</TextOben6>
          <TextUnten6>B</TextUnten6>
          <Traglasten>
            <Schritt>
              <Radius>3</Radius>
              <Traglast>6,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>4</Radius>
              <Traglast>5,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>5</Radius>
              <Traglast>5,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>6</Radius>
              <Traglast>6,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>7</Radius>
              <Traglast>6,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>8</Radius>
              <Traglast>6,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>9</Radius>
              <Traglast>5,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>10</Radius>
              <Traglast>5,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>12</Radius>
              <Traglast>4,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>14</Radius>
              <Traglast>3,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>16</Radius>
              <Traglast>3,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>18</Radius>
              <Traglast>2,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>20</Radius>
              <Traglast>2,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>22</Radius>
              <Traglast>1,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>24</Radius>
              <Traglast>1,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>26</Radius>
              <Traglast>1,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>28</Radius>
              <Traglast>0,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>30</Radius>
              <Traglast>0,6</Traglast>
            </Schritt>
          </Traglasten>
        </Rüstdetail>
      </Rüstzustand>
      <Rüstzustand>
        <Rüstdetail>
          <ID>LTM 1030-2.1-D</ID>
          <Color1>CornflowerBlue</Color1>
          <TextOben1>30 m</TextOben1>
          <TextUnten1>T</TextUnten1>
          <Color2>CornflowerBlue</Color2>
          <TextOben2>15,0 m</TextOben2>
          <TextUnten2>K</TextUnten2>
          <Color3>Transparent</Color3>
          <TextOben3></TextOben3>
          <TextUnten3></TextUnten3>
          <Color4>Transparent</Color4>
          <TextOben4></TextOben4>
          <TextUnten4></TextUnten4>
          <Color5>Transparent</Color5>
          <TextOben5></TextOben5>
          <TextUnten5></TextUnten5>
          <Color6>LightCoral</Color6>
          <TextOben6>2,3 t</TextOben6>
          <TextUnten6>B</TextUnten6>
          <Traglasten>
            <Schritt>
              <Radius>4</Radius>
              <Traglast>3,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>5</Radius>
              <Traglast>2,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>6</Radius>
              <Traglast>2,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>7</Radius>
              <Traglast>3,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>8</Radius>
              <Traglast>3,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>9</Radius>
              <Traglast>3,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>10</Radius>
              <Traglast>2,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>12</Radius>
              <Traglast>2,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>14</Radius>
              <Traglast>2,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>16</Radius>
              <Traglast>2,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>18</Radius>
              <Traglast>2,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>20</Radius>
              <Traglast>2,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>22</Radius>
              <Traglast>1,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>24</Radius>
              <Traglast>1,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>26</Radius>
              <Traglast>1,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>28</Radius>
              <Traglast>1,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>30</Radius>
              <Traglast>1,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>32</Radius>
              <Traglast>0,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>34</Radius>
              <Traglast>0,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>36</Radius>
              <Traglast>0,4</Traglast>
            </Schritt>
          </Traglasten>
        </Rüstdetail>
      </Rüstzustand>
      <Rüstzustand>
        <Rüstdetail>
          <ID>LTM 1030-2.1-E</ID>
          <Color1>CornflowerBlue</Color1>
          <TextOben1>30 m</TextOben1>
          <TextUnten1>T</TextUnten1>
          <Color2>CornflowerBlue</Color2>
          <TextOben2>8,6 m</TextOben2>
          <TextUnten2>K</TextUnten2>
          <Color3>Transparent</Color3>
          <TextOben3></TextOben3>
          <TextUnten3></TextUnten3>
          <Color4>Transparent</Color4>
          <TextOben4></TextOben4>
          <TextUnten4></TextUnten4>
          <Color5>Transparent</Color5>
          <TextOben5></TextOben5>
          <TextUnten5></TextUnten5>
          <Color6>LightCoral</Color6>
          <TextOben6>5,5 t</TextOben6>
          <TextUnten6>B</TextUnten6>
          <Traglasten>
            <Schritt>
              <Radius>3</Radius>
              <Traglast>6,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>4</Radius>
              <Traglast>5,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>5</Radius>
              <Traglast>5,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>6</Radius>
              <Traglast>6,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>7</Radius>
              <Traglast>6,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>8</Radius>
              <Traglast>6,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>9</Radius>
              <Traglast>5,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>10</Radius>
              <Traglast>5,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>12</Radius>
              <Traglast>5,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>14</Radius>
              <Traglast>4,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>16</Radius>
              <Traglast>4,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>18</Radius>
              <Traglast>3,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>20</Radius>
              <Traglast>2,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>22</Radius>
              <Traglast>2,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>24</Radius>
              <Traglast>2,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>26</Radius>
              <Traglast>1,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>28</Radius>
              <Traglast>1,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>30</Radius>
              <Traglast>1,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>32</Radius>
              <Traglast>0,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>34</Radius>
              <Traglast>0,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>36</Radius>
              <Traglast>0,6</Traglast>
            </Schritt>
          </Traglasten>
        </Rüstdetail>
      </Rüstzustand>
      <Rüstzustand>
        <Rüstdetail>
          <ID>LTM 1030-2.1-F</ID>
          <Color1>CornflowerBlue</Color1>
          <TextOben1>30 m</TextOben1>
          <TextUnten1>T</TextUnten1>
          <Color2>CornflowerBlue</Color2>
          <TextOben2>15,0 m</TextOben2>
          <TextUnten2>K</TextUnten2>
          <Color3>Transparent</Color3>
          <TextOben3></TextOben3>
          <TextUnten3></TextUnten3>
          <Color4>Transparent</Color4>
          <TextOben4></TextOben4>
          <TextUnten4></TextUnten4>
          <Color5>Transparent</Color5>
          <TextOben5></TextOben5>
          <TextUnten5></TextUnten5>
          <Color6>LightCoral</Color6>
          <TextOben6>5,5 t</TextOben6>
          <TextUnten6>B</TextUnten6>
          <Traglasten>
            <Schritt>
              <Radius>4</Radius>
              <Traglast>3,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>5</Radius>
              <Traglast>2,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>6</Radius>
              <Traglast>2,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>7</Radius>
              <Traglast>3,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>8</Radius>
              <Traglast>3,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>9</Radius>
              <Traglast>3,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>10</Radius>
              <Traglast>2,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>12</Radius>
              <Traglast>2,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>14</Radius>
              <Traglast>2,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>16</Radius>
              <Traglast>2,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>18</Radius>
              <Traglast>2,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>20</Radius>
              <Traglast>2,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>22</Radius>
              <Traglast>2,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>24</Radius>
              <Traglast>1,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>26</Radius>
              <Traglast>1,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>28</Radius>
              <Traglast>1,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>30</Radius>
              <Traglast>1,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>32</Radius>
              <Traglast>1,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>34</Radius>
              <Traglast>1,0</Traglast>
            </Schritt>
            <Schritt>
              <Radius>36</Radius>
              <Traglast>0,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>38</Radius>
              <Traglast>0,6</Traglast>
            </Schritt>
            <Schritt>
              <Radius>40</Radius>
              <Traglast>0,4</Traglast>
            </Schritt>
          </Traglasten>
        </Rüstdetail>
      </Rüstzustand>
    </Modell>   </Hersteller>   <Hersteller>
    <Marke>Tadano Faun</Marke>
    <Modell>
      <Krantyp>ATF 50G-3</Krantyp>
      <Klasse>50</Klasse>
      <Rüstzustand>
        <Rüstdetail>
          <ID>ATF 50G-3-A</ID>
          <Color1>CornflowerBlue</Color1>
          <TextOben1>40 m</TextOben1>
          <TextUnten1>T</TextUnten1>
          <Color2>Transparent</Color2>
          <TextOben2></TextOben2>
          <TextUnten2></TextUnten2>
          <Color3>Transparent</Color3>
          <TextOben3></TextOben3>
          <TextUnten3></TextUnten3>
          <Color4>Transparent</Color4>
          <TextOben4></TextOben4>
          <TextUnten4></TextUnten4>
          <Color5>Transparent</Color5>
          <TextOben5></TextOben5>
          <TextUnten5></TextUnten5>
          <Color6>LightCoral</Color6>
          <TextOben6>4,9 t</TextOben6>
          <TextUnten6>B</TextUnten6>
          <Traglasten>
            <Schritt>
              <Radius>3</Radius>
              <Traglast>45,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>4</Radius>
              <Traglast>38,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>5</Radius>
              <Traglast>30,3</Traglast>
            </Schritt>
            <Schritt>
              <Radius>6</Radius>
              <Traglast>24,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>7</Radius>
              <Traglast>18,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>8</Radius>
              <Traglast>15,2</Traglast>
            </Schritt>
            <Schritt>
              <Radius>9</Radius>
              <Traglast>12,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>10</Radius>
              <Traglast>10,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>12</Radius>
              <Traglast>7,9</Traglast>
            </Schritt>
            <Schritt>
              <Radius>14</Radius>
              <Traglast>6,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>16</Radius>
              <Traglast>4,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>18</Radius>
              <Traglast>3,8</Traglast>
            </Schritt>
            <Schritt>
              <Radius>20</Radius>
              <Traglast>3,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>22</Radius>
              <Traglast>2,5</Traglast>
            </Schritt>
            <Schritt>
              <Radius>24</Radius>
              <Traglast>2,1</Traglast>
            </Schritt>
            <Schritt>
              <Radius>26</Radius>
              <Traglast>1,7</Traglast>
            </Schritt>
            <Schritt>
              <Radius>28</Radius>
              <Traglast>1,4</Traglast>
            </Schritt>
            <Schritt>
              <Radius>30</Radius>
              <Traglast>1,1</Traglast>
            </Schritt>
          </Traglasten>
        </Rüstdetail>
      </Rüstzustand> 
```

我将不胜感激任何帮助。

# c - 如何将大量 uint_8 转换为 C 中的浮点数组？

> ID：12605169
> 
> 赞同：1
> 
> 时间：2012-09-26T15:24:46.877
> 
> 标签：c, arrays, file-io, type-conversion

我正在读取（以二进制格式）一个无符号 8 位整数文件，然后我需要将其转换为浮点数组。通常我会做如下的事情：

```
uint8_t *s1_tmp = (uint8_t *)malloc(sizeof(uint8_t)*num_elements);
float *s1 = (float *)malloc(sizeof(float)*num_elements);

fread(s1_tmp, sizeof(uint8_t), num_elements, file_id);

for(int i = 0; i < num_elements; i++){
    s1[i] = s1_tmp[i];
}

free(s1_tmp) 
```

可以肯定的是，没有灵感，但它确实有效。然而，目前`num_elements`大约是 270 万，所以这个过程超级慢而且 IMO 浪费。

有没有更好的方法将 8 位整数读取为浮点数或将`uint8_t`数组转换为浮点数组？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:34:47.277

首先，这将因读取数据而受 I/O 限制。其次，它将受内存限制。如果您将转换与读取交错，您将获得更好的缓存性能。

选择一些合理的缓冲区大小，它足够大以获得良好的 I/O 性能，但又足够小以适合您的缓存，可能是 8-32 KB 左右。读入那么多数据，转换并重复。

例如：

```
#define BUFSIZE 16384
uint8_t *buffer = malloc(BUFSIZE);
float *s1 = malloc(num_elements * sizeof(float));

int total_read = 0;
int n;
while(total_read < num_elements && (n = fread(buffer, 1, BUFSIZE, file_id)) > 0)
{
    n = min(n, num_elements - total_read);
    for(int i = 0; i < n; i++)
        s1[total_read + i] = (float)buffer[i];
    total_read += n;
}
free(buffer); 
```

您还可以通过使用 SIMD 操作一次转换多个项目来提高性能。但是，fread 的 I/O 仍然会成为总性能的瓶颈，因此您可能会从 SIMD 中看到多少改进是值得怀疑的。

由于您要转换大量`uint8_t`值，因此您可以通过使用查找表而不是进行整数到浮点转换来获得一些改进的性能。您只需要一个包含 256 个浮点值 (1 KB) 的查找表，它很容易放入缓存中。我不知道这是否会更快，因此您绝对应该分析代码以找出最佳选择。

# python - 使用 Python pdfMiner 提取每页文本？

> ID：12605170
> 
> 赞同：12
> 
> 时间：2012-09-26T15:24:47.800
> 
> 标签：python, pdf

我已经尝试使用 pyPdf 和 pdfMiner 从 pdf 文件中提取文本。我有一些不友好的 pdf，只有 pdfMiner 能够成功提取。我在[这里](https://stackoverflow.com/questions/5725278/python-help-using-pdfminer-as-a-library)使用代码来提取整个文件的文本。但是，我真的很想提取每页的文本，就像`getPage(i).extractText()`pyPdf 中的功能一样。有谁知道如何使用 pdfMiner 提取每页的文本？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-26T18:19:34.937

```
for pageNumber, page in enumerate(PDFDocument.get_pages()):
    if pageNumber == 42:
        #do something with the page 
```

[这里](http://denis.papathanasiou.org/?tag=pdfminer)有一篇不错的文章。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-07-21T15:21:57.547

这是您将所有页面写入单独文件的方式：

```
from pdfminer.pdfinterp import PDFResourceManager, PDFPageInterpreter
from pdfminer.pdfpage import PDFPage
from pdfminer.converter import XMLConverter, HTMLConverter, TextConverter
from pdfminer.layout import LAParams
from pdfminer.pdfdocument import PDFDocument
from pdfminer.pdfparser import PDFParser
import io
import os

fp = open('Files/Company_list/0010/pdf_files/testfile3.pdf', 'rb')
rsrcmgr = PDFResourceManager()
retstr = io.StringIO()
print(type(retstr))
codec = 'utf-8'
laparams = LAParams()
device = TextConverter(rsrcmgr, retstr, codec=codec, laparams=laparams)
interpreter = PDFPageInterpreter(rsrcmgr, device)

page_no = 0
for pageNumber, page in enumerate(PDFPage.get_pages(fp)):
    if pageNumber == page_no:
        interpreter.process_page(page)

        data = retstr.getvalue()

        with open(os.path.join('Files/Company_list/0010/text_parsed/2017AR', f'pdf page {page_no}.txt'), 'wb') as file:
            file.write(data.encode('utf-8'))
        data = ''
        retstr.truncate(0)
        retstr.seek(0)

    page_no += 1 
```

如果您需要特定的页码，只需将 page_no 替换为您想要的页码。

# jquery - 带有 CheckBox 组的 JQuery 验证插件

> ID：12605175
> 
> 赞同：5
> 
> 时间：2012-09-26T15:24:58.203
> 
> 标签：jquery, validation, checkbox

我在页面上列出了许多复选框，呈现的 html 如下：

我需要这些分组复选框来使用验证，以便至少检查一项。

```
<input id="element_frm1167_8_1" name="test" class="element checkbox" type="checkbox" value="1" validate="required:true, minlength:2">
<input id="element_frm1167_8_2" name="test" class="element checkbox" type="checkbox" value="1" >
<input id="element_frm1167_8_3" name="test" class="element checkbox" type="checkbox" value="1" > 
```

我查看了来自 [http://jquery.bassistance.de/validate/demo/radio-checkbox-select-demo.html的示例](http://jquery.bassistance.de/validate/demo/radio-checkbox-select-demo.html)

但是，当我调用 form.Validate() 时，我没有得到任何验证。

请有人指出我正确的方向。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T20:22:11.663

我会说您可能没有配置元数据插件（或根本没有包含它）。这就是处理`validate`复选框中的属性并将其转换为验证插件的规则的方法。要以更简单的方式获得所需的内容，您可以直接在 validate 调用中指定规则：

```
$('#myForm').validate({
 rules: {
    test: {
        required: true,
        minlength:2            
    }
 } 
}); 
```

在此处查看实际操作：http: [//jsfiddle.net/ryleyb/EWbED/](http://jsfiddle.net/ryleyb/EWbED/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:29:59.060

尝试将您的输入命名`name="test[]"`为`name="test"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-06T19:00:09.343

为像我这样找到此线程并希望在验证后向 PHP 提交多个值的人（可能几乎所有人？）发布此内容。在表单元素名称中包含括号

```
<input id="element_frm1167_8_3" name="test[]" class="element checkbox" type="checkbox" value="1" > 
```

并在验证标识符中

```
rules: {
  'test[]': {
    required: true,
    minlength:2            
  }
} 
```

# android - 从服务器端检查 google android 订阅

> ID：12605182
> 
> 赞同：5
> 
> 时间：2012-09-26T15:25:18.283
> 
> 标签：android, api, in-app-billing, subscription

简而言之：我可以在服务器端使用 Google Play Android Developer API 而不在 Play 商店中提供任何应用程序吗？

背景：我正在开发一个为应用程序提供每月订阅的项目。每个订阅的对应数据（购买令牌、日期等）都存储在后端数据库中。现在我想创建一个遍历每个数据集的 cronjob。对于每个订阅，我想联系 Google API 以检索订阅是否仍然有效的信息，并根据响应状态更新我们的数据库.

对于后端逻辑，我使用[google-api-java-client library](http://code.google.com/p/google-api-java-client/wiki/Setup)。

要取消或验证订阅，我需要先使用 OAuth2 对自己进行身份验证。去过也做过。

```
new GoogleCredential.Builder()
    .setTransport(HTTP_TRANSPORT)
    .setJsonFactory(JSON_FACTORY)
    .setServiceAccountId(SERVICE_ACCOUNT_EMAIL)
    .setServiceAccountScopes("https://www.googleapis.com/auth/androidpublisher") // $1
    .setServiceAccountPrivateKeyFromP12File(new File(filePath))
    .setClientSecrets(CLIENT_ID, CLIENT_SECRET) // $2
    .build(); 
```

$1：我不知道给定的帐户范围是否有效。因为我只能在极少数例子中找到这个值，但在[这个概述](http://lookmywebpage.com/api/google/list-of-google-scopes-to-access-oauth/)和[谷歌操场上都没有](https://developers.google.com/oauthplayground)

$2 我想这是必要的，尽管我发现了很多没有提供这些信息的例子。

但是，不幸的是，当我提供无效数据（如错误的电子邮件或私钥）时，我看不到任何差异。

**问题**

*   如何验证 GoogleCredential 是否正确？
*   我可以在接下来的步骤中看到它吗，比如联系 androidpublisher API？

在下一步中，我尝试获取订阅的购买状态：

```
Androidpublisher publisher = new Androidpublisher.Builder(HTTP_TRANSPORT, JSON_FACTORY, credential)
                               .setApplicationName(GOOGLE_PRODUCT_NAME) // $1                
                               .build();
Androidpublisher.Purchases purchases = publisher.purchases();
Androidpublisher.Purchases.Get get = purchases.get("android.test.purchased", "monthly001", "mytoken"); // $2
SubscriptionPurchase subscripcion = get.execute(); 
```

$1：来自 API 控制台的我的虚拟产品名称[-> API 访问](https://code.google.com/apis/console)

$2：除此之外，androidpush API[不允许通过服务帐户联系它，而只能通过 Web 服务器应用程序 auth flow 联系它](http://milancermak.posterous.com/server-side-verification-of-google-play-subsc)，我不知道在 get- 方法的参数中插入什么。

这是 API： [https ://developers.google.com/android-publisher/v1/purchases/get](https://developers.google.com/android-publisher/v1/purchases/get)

**问题**

*   在这种情况下，包名称是什么，subscriptionId 是什么？
*   我在哪里获取/设置这些值？

阅读[本文档](http://developer.android.com/guide/google/play/billing/billing_testing.html#billing-testing-static)后，我知道有一种方法可以处理虚假/静态响应。但是，如果这也适用于订阅，或者仅适用于移动设备上的应用内计费，我无法在任何地方阅读。

无论如何，我想知道为什么/是否有任何简单的方法可以使用沙箱或某物进行开发。类似。

我仍然觉得我只是错过了一个重要的部分来理解事情应该如何运作。也许你们中的某个人可以给我一个提示如何在这个地方进行，或者可以告诉我我错在哪里。

亲切的问候，

克里斯托弗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T10:58:18.473

我现在可以弄清楚我以前的大部分理解问题。

=1= 生成授权 URL

```
String authorizeUrl = new GoogleAuthorizationCodeRequestUrl(googleClientId,callbackUrl,"https://www.googleapis.com/auth/androidpublisher").build()    
// See why: http://stackoverflow.com/questions/8433990/when-authenticating-with-oauth-and-youtube-always-get-error-invalid-grant-on
authorizeUrl += "&approval_prompt=force&access_type=offline" 
```

=2= 认证

由于 server-webflow 不适用于 androidpublisher API，因此客户现在必须手动调用 (1) 中生成的 URL。

=3=回调

谷歌回调应该处理接下来的步骤。回调包含我们必须使用的参数“code”。

=4= 请求授权令牌

```
 // Build the HTTP parameter
    Map<String,String> params = [:]
    params.put("grant_type", "authorization_code")
    params.put("code", code.encodeAsURL())
    params.put("client_id", customer.googleClientId.encodeAsURL())
    params.put("client_secret", customer.googleClientSecret.encodeAsURL())
    params.put("redirect_uri", getCallbackUrl().encodeAsURL())

    // Send the POST request
    // This action might throw an exception in case any parameter were wrong, invalid or not specified.
    String result = HttpRequestHandler.sendRequest("https://accounts.google.com/o/oauth2/token", params);
    JSONElement jsonResult = JSON.parse(result)

    // Map result
    OAuth2Result oAuth2Result = new OAuth2Result()
    oAuth2Result.accessToken = jsonResult.getAt("access_token")
    oAuth2Result.refreshToken = jsonResult.getAt("refresh_token")
    oAuth2Result.ttlSeconds = Integer.parseInt(jsonResult.getAt("expires_in").toString())
    oAuth2Result.tokenType = jsonResult.getAt("token_type") 
```

=5= 请求刷新令牌

```
 // Build the HTTP parameter
    Map<String,String> params = [:]
    params.put("grant_type", "refresh_token")
    params.put("refresh_token", this.customer.googleRefreshToken.encodeAsURL())
    params.put("client_id", customer.googleClientId.encodeAsURL())
    params.put("client_secret", customer.googleClientSecret.encodeAsURL())

    // Send the POST request
    // This action might throw an exception in case any parameter were wrong, invalid or not specified.
    String result = HttpRequestHandler.sendRequest("https://accounts.google.com/o/oauth2/token", params);
    JSONElement jsonResult = JSON.parse(result)

    // Map result
    OAuth2Result oAuth2Result = new OAuth2Result()
    oAuth2Result.accessToken = jsonResult.getAt("access_token")
    oAuth2Result.refreshToken = jsonResult.getAt("refresh_token")
    oAuth2Result.ttlSeconds = Integer.parseInt(jsonResult.getAt("expires_in").toString())
    oAuth2Result.tokenType = jsonResult.getAt("token_type") 
```

# php - 32 位 PHP 可以在 64 位 IIS 服务器上运行 .vbs 脚本吗？

> ID：12605189
> 
> 赞同：2
> 
> 时间：2012-09-26T15:25:35.083
> 
> 标签：php, codeigniter, iis, com

我们必须运行一个 vbscript 来将自定义 Web 应用程序中收集的信息整合到我们的管理软件中。.vbs 与 CodeIgniter 2 中构建的 Web 应用程序位于同一文件夹中。

这是控制器代码：

```
public function saveToPM( $budgetType ){
    // run it 
    $obj = new COM( 'WScript.Shell' ); 

    if ( is_object ( $obj ) ) { 
        $obj->Run( 'cmd /C wscript.exe D:\pamtest\myload.vbs', 0, true );
        var_dump($obj->Run);
    } else { 
        echo 'can not create wshell object'; 
    } // end if

    $obj = null;

    //$this->load->view('goodPush');
} // end saveToPM function 
```

我们在 php.ini 文件中启用了 DCon，并使用 dcomcnfg 为用户启用了权限。

[我从http://www.sitepoint.com/forums/showthread.php?505709-run-a-vbs-from-php](http://www.sitepoint.com/forums/showthread.php?505709-run-a-vbs-from-php)借用了代码。

屏幕回显“已执行代码”，但 vbscript 未运行。

我们已经为此奋斗了一段时间，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T06:47:56.740

有点乱。PHP 调用`WScript.Shell.Run`将调用`cmd`（当它完成它的事情时`/c`终止`cmd.exe`），它将调用`cscript.exe`运行和解释一个`.vbs`. 正如你所看到的，有很多事情必须正确！:)

如果您在继续执行 wsh 脚本之前“等待”`WScript.Shell.Run`结束调用（您的`$wait`变量）怎么办，这反过来又允许 PHP 继续执行等？

由于您没有等待调用完成，PHP 认为一切都很好并继续下一行（解释语言）。

另外，也许有`.vbs`创建一个空的文本文件？只是为了让您有迹象表明它实际上已经运行了。

只要退后一步，喝杯啤酒，它就会来找你！Gogo 疑难解答！

并且 - [http://ss64.com/vb/run.html](http://ss64.com/vb/run.html)

> 如果 bWaitOnReturn 设置为 TRUE，则 Run 方法返回应用程序返回的任何错误代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T09:56:00.107

我已经在 Windows XP 机器上使用独立的 PHP 脚本（没有 Codeigniter）测试了您的代码，使用 PHP 5.4.4 内置 Web 服务器，我注意到 vbscript 被执行，但是 PHP 死了（事件查看器显示 ID 为 1000 的通用“应用程序错误”）。
但是我还发现从命令字符串中删除“cmd /C”可以解决问题。
这是我用于测试的简单脚本：

```
<?php

$obj = new COM('WScript.Shell');
if (is_object($obj)) {
  //$obj->Run('cmd /C wscript.exe test.vbs', 0, true);  // This does'nt work
  $obj->Run('wscript.exe test.vbs', 0, true);   // This works
  var_dump($obj->Run);
} else {
  echo 'can not create wshell object';
}
$obj = null;

?> 
```

这是我简单的“test.vbs”脚本：

```
WScript.Echo "vbscript is running" 
```

另一个似乎有效的解决方案（至少在我的平台上）是“系统”调用：

```
system('wscript.exe test.vbs'); 
```

不幸的是，我没有一个 64 位的 IIS 系统来测试，所以我不能说这个平台上是否有特定的问题，但我希望这会有所帮助。

# wpf - 在文本框上键入时，窗口文本输入不会触发

> ID：12605192
> 
> 赞同：1
> 
> 时间：2012-09-26T15:25:37.983
> 
> 标签：wpf

在 wpf 上，我为 winform 添加了一个 textInput 事件：TextInput="Window_TextInput"。

键入文本框后，不会触发（处理）该事件。如果我在 wpf 中为文本框添加 TextInput 也是一样的。

我做错了什么？如何触发 TextInput 事件？

# linux - 检查 SSH 隧道是否已启动并正在运行

> ID：12605197
> 
> 赞同：6
> 
> 时间：2012-09-26T15:25:52.943
> 
> 标签：linux, perl, telnet, ssh-tunnel

我有一个 perl 脚本，当稍微简化一下时，它看起来像这样：

```
my $randport = int(10000 + rand(1000));          # Random port as other scripts like this run at the same time
my $localip = '192.168.100.' . ($port - 4000);   # Don't ask... backwards compatibility
system("ssh -NL $randport:$localip:23 root\@$ip -o ConnectTimeout=60 -i somekey &");    # create the tunnel in the background

sleep 10;       # Give the tunnel some time to come up

# Create the telnet object
my $telnet = new Net::Telnet(
        Timeout =>      10,
        Host    =>      'localhost',
        Port    =>      $randport,
        Telnetmode =>   0,
        Errmode =>      \&fail,
);

# SNIPPED... a bunch of parsing data from $telnet 
```

问题是目标 $ip 位于带宽非常不可预测的链路上，因此隧道可能会立即出现，可能需要一段时间，可能根本不会出现。因此，需要休眠以使隧道有时间启动和运行。

所以问题是：我如何测试隧道是否启动并运行？如果隧道立即出现，10 秒是一个非常不受欢迎的延迟。理想情况下，我想检查它是否启动并在启动后继续创建 telnet 对象，最多 30 秒。

**编辑：** Ping 对我没有帮助，因为隧道的远端通常是正常的，但是丢包率很高

**已解决：**根据 mikebabcock 建议的提示推断，`sleep 10`已替换为这个块，它的作用就像一个魅力：

```
my $starttime = time();
while (1)
{
    # Check for success
    if (system("nc -dzw10 localhost $randport > /dev/null") == 0) { last }

    # Check for timeout
    if (time() > $starttime + 30) { &fail() }

    # 250ms delay before recheck
    select (undef, undef, undef, 0.25);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T15:43:17.113

使用 netcat -- 通常`nc`在 Linux 系统上：

```
nc -dvzw10 ${HOSTNAME} 23 
```

对我有用，回复如下：

```
Connection to ${HOSTNAME} 23 port [tcp/telnet] succeeded! 
```

它也会在成功时返回 0，并且对一个简单的连接感到满意，然后它就会消失。

*   -d 表示不从键盘端读取任何内容
*   -v 表示冗长（在脚本中关闭它）
*   -z 表示建立连接后断开连接
*   -w10 表示最多等待10秒，否则放弃

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:34:50.133

您可以将 ping 集成到您的 ssh 服务器，如果它工作正常，则 ssh 隧道已启动

```
# only a ping sample :-D
if !  ping -c 1 192.168.101.9
then
        echo ":-("
else
        echo ":-)"
fi 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:36:52.157

我认为 fping 可能比通常的 ping 更好，对脚本更友好。

fping -t 60000 [你的服务器]

应该在放弃之前尝试连接到服务器 60 秒之类的东西

```
if(fping -t 60000 [your server]) {
execute desired code;
} else {
execute this script again to rerun;;
} 
```

我认为即使编码不是真实的，您也会明白这一点。

# windows-mobile - windows mobile 6应用开发中的window media player

> ID：12605198
> 
> 赞同：0
> 
> 时间：2012-09-26T15:26:01.510
> 
> 标签：windows-mobile, windows-mobile-6.5, windows-mobile-6, windows-mobile-6.1

我正在开发 windows mobile 6.5 应用程序，其中我必须使用窗口媒体播放器在应用程序中播放视频。

请帮助我或提供任何网站的参考，其中包含有关在 windows mobile 6.5 应用程序开发中使用 windows media player 的信息。

任何帮助表示感谢提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:04:22.103

[这里有一篇](http://msdn.microsoft.com/en-us/library/aa446515.aspx)题为“在 Compact Framework 中托管 ActiveX 控件”的 MSDN 文章。它专门以媒体播放器控件为例。

# java - 如何优化这个功能？

> ID：12605202
> 
> 赞同：0
> 
> 时间：2012-09-26T15:26:11.480
> 
> 标签：java, optimization

如何尽可能优化这个功能

```
public void r1(String st1, int[] ar1) {
    String inox = "newsearch";
    for (int j = 0; j < ar1.length; j++) {
        if (st1.equals(inox) && ar1[j] * 2 > 20) {
            Integer intx = new Integer(ar1[j]);
            intx = intx * 2;
            System.out.print(intx.toString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T15:30:18.297

这是相当奇怪的代码，但与它相同。

```
public void r1(String st1, int[] ar1) {
    if (!str1.equals("newsearch")) return;

    for (int j : ar1) {
        int j2 = j * 2;
        if (j2 > 20) 
            System.out.print(j2);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:30:08.893

```
public void r1(String st1, int[] ar1) {
    String inox = "newsearch";
    if (st1.equals(inox) {
        for (int j = 0; j < ar1.length; j++) {
             if (ar1[j] > 10) {
                System.out.print(ar1[j] * 2);
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:32:13.500

```
public void r1(String st1, int[] ar1) {
  if (st1.equals("newsearch") {
    for (int j = 0; j < ar1.length; j++) {
      if (ar1[j] > 10) {
        System.out.print(ar1[j] * 2);
      }
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:39:26.350

建立在 Peter Lawreys 版本之上：

```
public void r1(String st1, int[] ar1) {
    if (!str1.equals("newsearch"))
        return;
    for (int j : ar1)
        if (j > 10)
            System.out.print(j << 1);
} 
```

# ios - iPad 中的分屏

> ID：12605205
> 
> 赞同：0
> 
> 时间：2012-09-26T15:26:17.500
> 
> 标签：ios, split, ipad

我正在开发一个仅限 iPAD 的应用程序，该应用程序需要我以如下方式拆分屏幕：

(1) 屏幕上垂直划分为 2 个部分

(2) 在左侧，用户可以使用聊天进行交流

(3) 在右侧，用户可以看到连续的流数据

我不确定 (A) 我如何同时执行两个任务 (B) 如何拆分屏幕（拆分视图是实现这两个任务的方式吗？）

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:36:37.010

A`splitViewController`非常适合同时在屏幕上显示两个视图控制器（或者更确切地说属于它们的视图）。通常您会在主从应用程序中看到这一点，在左侧您会看到一个表格视图，您可以在其中选择在右侧详细显示的行。没有什么能阻止您以自己的方式使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:41:30.180

以 RootViewController 及其内部
`-(void)viewDidLoad:`
`UIView *viewOne = [[UIView alloc]initWithFrame:CGRectMake(0, 0, 512, 768)];
UIView *viewTwo = [[UIView alloc]initWithFrame:CGRectMake(512, 0, 512, 768)]; [[self view]addSubview:viewOne];
[[self view]addSubview:viewTwo];`

您可以在 viewOne 或 viewTwo 中添加任何内容。

# iphone - 如何在等待审核时更换iTunes Connect中的应用程序？

> ID：12605208
> 
> 赞同：7
> 
> 时间：2012-09-26T15:26:31.760
> 
> 标签：iphone, replace, app-store-connect

目前我正在使用 iPhone 应用程序，我已经在 iTunes Connect 中成功上传了 iPhone 应用程序，不，我在那个应用程序中遇到了一些错误，现在已修复，然后我尝试在相同的二进制文件中上传新版本，这可能吗？在itunes connect中等待审核时如何更换应用程序？请帮我

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T15:28:10.540

在 iTunes 中有一个取消二进制文件的选项。选择它并上传新的二进制文件。打开iTunes帐户。

执行以下步骤

*   选择管理您的应用程序
*   单击应用程序
*   点击查看详情
*   单击*链接*下的*二进制详细信息*
**   选择右上角的“**拒绝二进制”***

 ** * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-05-20T09:53:18.247

由于 Apple 更改了 iTunes Connect 中的 UI，其他答案已经过时。这就是它现在的工作方式：

1.  您首先必须使用 xCode 或 Application Builder 上传新的二进制文件（具有更大的内部版本号，否则您将无法上传）
2.  在itunes connect中会出现一个“删除应用版本”按钮，在应用详情页面中，非常醒目和强调，你不能错过。这实际上不会删除应用程序版本......它只会拒绝您的二进制文件。包含所有详细信息的应用程序版本将被保留。
3.  按下后，您的应用状态将是“开发者拒绝”。为新应用版本选择新上传的构建，然后单击保存。
4.  现在您的应用状态将是“准备提交”。按提交审核。

请注意，这些步骤是指您提交应用程序的新应用程序版本时的情况，但我想这些步骤对于新应用程序的情况非常相似。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-26T15:28:59.737

使用“拒绝二进制”按钮，您可以上传一个新的。您将返回到审批队列的末尾。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-09T16:37:27.943

按照 Sahil 的回答后，您的状态将更改为“Developer Rejected”。您需要进入“查看详细信息”，单击“准备上传二进制文件”，然后按照步骤操作。这会将您的状态更改回“等待上传”，此时您将能够提交新版本。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-01-05T17:19:37.660

稍微修正一下，当你说“你不能错过它”时，你低估了我 :-) 我浏览了 App Store、Features、TestFlight 和 Activity，没有看到标有“Remove App Version”的按钮。在我的构建列表中，构建 #4 正在等待审核，但我希望 Apple 审查构建 6。如果我单击构建 #4 ...我有一些关于它的信息，但没有什么可以让我删除。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-13T06:27:13.260

1.  click on Waiting for review
2.  click on remove this version from the review. this action will ONLY remove the build, not the screenshot, description etc.. so no worries..
3.  submit new build

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-28T10:05:58.343

1）首先你必须“拒绝二进制”。现在您可以在 iTunes Connect 中编辑您的应用程序。但在此之前首先上传您更改的（新）代码。您可能必须为其获取一个新的内部版本号。

2）现在是棘手的部分。您必须删除 iTunes connect 中的 App 定义与二进制文件之间的连接。我确实花了 25 分钟才找到可以做到的地方。

[![location of the stop sign](../Images/3cb8eee3d9a1eb7403605d623991d1ec.png)](https://i.stack.imgur.com/5F62M.png)

In the details of the App is the build information. When you move over the date, a small stop sign will appear. That is the one you are looking for. Press it and delete the binary from this version.

3) Now press SAVE (otherwise the new binary will not be listed).

4) By using the (+) you can add your new binary.

5) Submit for review again

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-10-31T03:11:50.057

[![enter image description here](../Images/e97f3b2abd24027be1981a452ce57688.png)](https://i.stack.imgur.com/FrWB4.png)

There is now an information banner in blue (see image above) that let's you know how to remove your app from review.

"You can still edit all information while your version is waiting for review. To submit a new build, you must remove this version from review."*

# clojure - Clojure 序列理解中是否存在变量？

> ID：12605210
> 
> 赞同：4
> 
> 时间：2012-09-26T15:26:43.630
> 
> 标签：clojure, list-comprehension, for-comprehension

我正在阅读 Programming Clojure 第 2 版，在第 49 页它涵盖了 Clojure 的 for 循环构造，它说这实际上是一个序列理解。

作者建议使用以下代码：

```
(defn indexed [coll] (map-indexed vector coll))

(defn index-filter [pred col]
  (when pred
    (for [[idx elt] (indexed col) :when (pred elt)] idx)))

(index-filter #{\a} "aba")
(0 2) 
```

...比基于 Java 的命令式示例更可取，并且给出的证据是它“通过使用高阶函数...任何功能索引避免了对变量的所有需求。”

如果它们不是变量，什么是“idx”、“elt”？它们是指累加器以外的变量吗？

另外，为什么#{\a} 而不是“a”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:59:07.860

`pred`是一个*函数*-`#{\a}`是一个包含字符 a 的集合。在 Clojure 中，集合是一个函数，如果它的参数`\a`包含在其中，则返回 true。您也可以使用`#(= % \a)`或`(fn [x] (= \a x))`。

正如另一个答案所暗示的那样，“在制作这个例子时没有创建任何状态。” `idx`和`elt`函数类似变量，但仅对`for`序列推导是本地的，因此代码更紧凑，不是有状态的，并且可以说更清晰（一旦你习惯了序列推导，至少:-)）——也许文本不是在这一点上最清楚。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T15:55:17.253

1.  函数式语言中没有变量。实际上，您需要区分***variable***和***value***。`idx`它只是一个绑定到具体值的名称，你不能重新分配它（*但你可以将它重新绑定到另一个值*）。

2.  函数的第一个参数`index-filter`是谓词，即返回`true`或的函数`false`。`#{\a}`它是一种数据结构`set`，但也可以像函数一样对待。如果将元素作为参数传递给 set 函数，则如果元素存在则返回此参数（如*true*），否则返回 nil （如*false*）。因此，您可以将这个集合谓词视为以更易于理解的方式编写的匿名函数`#(contains? #{\a} %)`

# android - 从 URL 检索 XML

> ID：12605215
> 
> 赞同：1
> 
> 时间：2012-09-26T15:26:54.067
> 
> 标签：android, xml, url

我在使用以下代码从 url 检索 xml 时遇到一些问题：

```
 private static String getAlbumArt(String artistName, String albumName){
        try{
        XMLParser xml_parser = new XMLParser();
        String xml = xml_parser.getXmlFromUrl(getAlbumURL(artistName, albumName));
        Document doc = xml_parser.getDomElement(xml);
        NodeList N = doc.getElementsByTagName("album");
        Node node = N.item(0);
        NodeList N2 = node.getChildNodes();
        System.out.println("1------");
            for (int i = 0; i < N2.getLength(); i++) {
                Node detailNode = N2.item(i);
                if (detailNode.getNodeType() == Node.ELEMENT_NODE)
                    {
                    System.out.println("2------");
                    if (detailNode.getNodeName().equalsIgnoreCase("image")) 
                    {
                        String sizeVal = ((Element) detailNode).getAttribute("size");
                        String url = detailNode.getTextContent();
                        if (sizeVal.equalsIgnoreCase("large")) {
                            return url;
                        }
                    }
                    }
        }
        }
        catch (Exception e){
        }
        return null;
    } 
```

我在上面的代码中调用的 xml 函数：

```
public String getXmlFromUrl(String url) {
    String xml = null;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return xml;
} 
```

获取相册网址：

```
 public static String getAlbumURL(String artist, String album){
        return URL_METHOD + METHOD_GETALBUM + AMPERSAND
                + API_KEY + AMPERSAND
                + PARAM_ARTIST + artist + AMPERSAND
                + PARAM_ALBUM + album;
    } 
```

XML解析器：

公共类 XMLParser {

```
// constructor
public XMLParser() {
}

//Get XML from URL
public String getXmlFromUrl(String url) {
    String xml = null;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        xml = EntityUtils.toString(httpEntity);
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }
    return xml;
}

//Get dom element
public Document getDomElement(String xml){
    Document doc = null;
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    try {

        DocumentBuilder db = dbf.newDocumentBuilder();
        InputSource is = new InputSource();
            is.setCharacterStream(new StringReader(xml));
            doc = db.parse(is); 

        } catch (ParserConfigurationException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (SAXException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        } catch (IOException e) {
            Log.e("Error: ", e.getMessage());
            return null;
        }

        return doc;
}

//Get nod element
 public final String getElementValue(Node elem ) {
     Node child;
     if( elem != null){
         if (elem.hasChildNodes()){
             for( child = elem.getFirstChild(); child != null; child = child.getNextSibling() ){
                 if( child.getNodeType() == Node.TEXT_NODE  ){
                     return child.getNodeValue();
                 }
             }
         }
     }
     return "";
 }

//Get element value
 public String getValue(Element item, String str) {     
     NodeList nlList = item.getElementsByTagName(str).item(0).getChildNodes();
     Node nValue = (Node) nlList.item(0);
     return nValue.getNodeValue();
    } 
```

}

有任何想法吗 ？我真的不知道出了什么问题..我以前使用过它并且它有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T16:35:22.017

在块之前`DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();`添加这些行之后：`try{}`

```
dbf.setIgnoringComments(true);
dbf.setCoalescing(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:35:15.483

我提取了您的代码并进行了尝试。我重新编写了“getAlbumURL”以返回一个硬编码的字符串。我使用了您在评论中提供的地址，它失败了。但是，该 xml 没有链接到任何专辑封面。所以我尝试了正确的专辑名称，“In%20ra*i*nbows”。像梦一样工作。

因此，首先，验证您的常量是否为您提供了您认为它们应该提供的内容（您已经这样做了），其次，验证您的测试数据。您的代码似乎很好。

# php - 获取数组字符串的一部分

> ID：12605216
> 
> 赞同：-1
> 
> 时间：2012-09-26T15:26:54.443
> 
> 标签：php, location, geo, geoip, locate

您好，我的输出 PHP 代码是：

```
Array ( [country] => BG - Bulgaria ) 
```

...他来自这里：

```
<?php
       $ip = $_SERVER['REMOTE_ADDR'];
       print_r(geoCheckIP($ip));
       //Array ( [domain] => dslb-094-219-040-096.pools.arcor-ip.net [country] => DE - Germany [state] => Hessen [town] => Erzhausen )

       //Get an array with geoip-infodata
       function geoCheckIP($ip)
       {
               //check, if the provided ip is valid
               if(!filter_var($ip, FILTER_VALIDATE_IP))
               {
                       throw new InvalidArgumentException("IP is not valid");
               }

               //contact ip-server
               $response=@file_get_contents('http://www.netip.de/search?query='.$ip);
               if (empty($response))
               {
                       throw new InvalidArgumentException("Error contacting Geo-IP-Server");
               }

               //Array containing all regex-patterns necessary to extract ip-geoinfo from page
               $patterns=array();

               $patterns["country"] = '#Country: (.*?)&nbsp;#i';

               //Array where results will be stored
               $ipInfo=array();

               //check response from ipserver for above patterns
               foreach ($patterns as $key => $pattern)
               {
                       //store the result in array
                       $ipInfo[$key] = preg_match($pattern,$response,$value) && !empty($value[1]) ? $value[1] : '';
               }

               return $ipInfo;
       }

?> 
```

在我的案例“保加利亚”中，我怎样才能只获得国家的名称？我认为 preg_replace 或 substr 会发生这种情况，但我不知道现在更好的解决方案是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:29:35.277

substr 可能是最简单的：

```
$bad_country = 'BG - Bulgaria';
$good_country = substr($bad_country, 5); // start at char 5, 'B' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:47:50.447

```
$patterns["country"] = '#Country:.*-\s+(\w+?)&nbsp;#i'; 
```

试试这个作为你的模式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:30:54.783

如果国家总是用' - '与首字母缩写词分开，请这样做：

```
list($acrn, $country) = explode(' - ', $var); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:07:39.133

将您的模式更改为：

```
'#Country: [a-z]{2,} - (.*?)&nbsp;#i' 
```

*假设模式不会改变*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T15:35:04.107

如果您保证输出将始终采用相同的格式（即*BG - 保加利亚*、*美国 - 美国*等），您可以使用`explode()`：

```
$array['country'] = "BG - Bulgaria";
$country = explode(" - ", $array['country']);
echo $country[1]; 
```

这将输出“保加利亚”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-26T15:36:23.563

尝试：

```
 foreach( $list as $v) {
     $temp = explode(' - ', $v);        
     $countries[] = $temp[1];
} 
```

# php - CSS 高度在 Firefox 中不能完美运行

> ID：12605224
> 
> 赞同：0
> 
> 时间：2012-09-26T15:27:10.250
> 
> 标签：php, html, css

```
div.aboutstandard ul.aboutlist li {
    float: left;
    padding-left: 10px;
    padding-right: 10px;
    width: 300px;
    height: 280px;
}

div.aboutstandard ul.aboutlist li {
float: left;
padding-left: 10px;
padding-right: 10px;
width: 300px;
height: 280px;
} 
```

当我为高度设置这个尺寸时，它在 chrome 和 Internet Explorer 中完美运行，但在 Firefox 中它需要不同的尺寸。文本位于 Firefox 中的下一个图像下方。

php代码：

```
<ul class="aboutlist1">
         <li>
            <img class="aboutimg" src="images1.jpg" alt="<? $lang->text('ABOUT1'); ?>"/>

            <h1><? $lang->text('ABOUT1'); ?></h1>

            <p class="abouttext"><? $lang->text('ABOUT_TEXT1'); ?></p>
        </li>

        <li>
            <img class="aboutimg" src="images2.jpg" alt="<? $lang->text('ABOUT2'); ?>"/>

            <h1><? $lang->text('ABOUT2'); ?></h1>

            <p class="abouttext"><? $lang->text('ABOUT_TEXT2'); ?></p>
        </li>
       </ul>
<ul class="aboutlist">
        <li>
            <img class="aboutimg" src="image3.jpg" alt="<? $lang->text('ABOUT3'); ?>"/>

             <h1><? $lang->text('ABOUT3'); ?></h1>

            <p class="abouttext"><? $lang->text('ABOUT_TEXT3'); ?></p>
        </li>

        <li>
            <img class="aboutimg" src="image4.jpg" alt="<? $lang->text('ABOUT4'); ?>"/>

            <h1><? $lang->text('ABOUT4'); ?></h1>

            <p class="abouttext"><? $lang->text('ABOUT_TEXT4'); ?></p>
        </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:50:18.637

我建议你使用

```
if(strlen(strstr($_SERVER['HTTP_USER_AGENT'],"Firefox")) > 0 ){
//Adjusted css for firefox here
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T15:34:09.850

提供代码以便我可以看透它或使用`height: 280px !important;`或使用前缀来支持 firefox 浏览器

# android - Android - 通过 id 验证日历事件是否存在

> ID：12605231
> 
> 赞同：0
> 
> 时间：2012-09-26T15:27:27.250
> 
> 标签：android, events, calendar

是否可以通过 event_id 验证事件是否存在？如果事件仍然存在，我需要做一些事情。有可能验证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:44:53.003

您需要使用[日历提供程序进行查询](http://developer.android.com/guide/topics/providers/calendar-provider.html)

首先，您必须查询日历提供程序以获取要在其中搜索的日历的 ID，然后您可以为要定位的事件 ID 构建计数查询

* * *

在不打开 IDE 进行检查的情况下，我希望

```
Uri event = ContentUris.withAppendedId(Events.CONTENT_URI, eventID);
Cursor cursor = managedQuery(event, null, null, null);
If (cursor.getCount() == 1) {
  //the event exists?
} 
```

# python - oracle 错误代码处理 cx_oracle

> ID：12605239
> 
> 赞同：0
> 
> 时间：2012-09-26T15:27:57.467
> 
> 标签：python, oracle

我正在尝试使用 cx_ORacle 从 Python 访问 Oracle。

我有一个不返回任何行的选择语句，即；NO_DATA_FOUND ..这就是我处理错误情况的方式。

当我执行这段代码时，错误 NO_DATA_FOUND 没有被 cx_oracle.error 或 cx_oracle.Databaseerror 或 cx_oracle.Warning 捕获。

如何处理 NO_DATA_FOUND 条件？

代码.py

```
def DetermineNames(self): 
    sql = """select NAME from EMP_TAB where fd_fle_id = %s"""%(self.fileid)
    try:
         self.cursor.execute(sql)
         result = self.cursor.fetchall()
         for row in result:
               print('row',row)
    except cx_Oracle.Error as e:
        print("Error:Unable to determine the RAW_OBJ_NAME: Object Name:%s, Function Name:%s  Error:%s")%(self.__class__.__name__,sys._getframe().f_code.co_name,
        str(e).strip())                        
    except cx_Oracle.DatabaseError as e:
        print("Error:Unable to determine the RAW_OBJ_NAME: Object Name:%s, Function Name:%s  Error:%s")%(self.__class__.__name__,sys._getframe().f_code.co_name,
        str(e).strip())
    except cx_Oracle.Warning as e:
        print("Error:Unable to determine the RAW_OBJ_NAME: Object Name:%s, Function Name:%s  Error:%s")%(self.__class__.__name__,sys._getframe().f_code.co_name,
        str(e).strip())                     
    return self.rawname 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:30:38.100

这不是错误情况，这可能是您没有触发任何异常的原因。尝试这样的事情：

```
if not self.cursor.rowcount:
   print 'No rows returned' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:33:45.313

可能是使用`cx_Oracle._Error.code`，如果值是`1403`那么它的 a `NO DATA FOUND`。

```
....
except cx_Oracle.DatabaseError as e:
   error, = e.args
   if error.code == 1403:
       print "No rows returned. Error Code:", error.code  
.... 
```

# html - 仅使用输入的 CSS 选项卡：选中

> ID：12605244
> 
> 赞同：1
> 
> 时间：2012-09-26T15:28:13.637
> 
> 标签：html, css, tabs

我找到[了这个例子](http://csscience.com/css3-tabs/#tabB)（“检查”版本）并且它有效：

[http://jsfiddle.net/2cTwA/](http://jsfiddle.net/2cTwA/)

但我想将输入和标签包装在一个容器元素（如`nav`）中，如果我这样做，选项卡将停止工作:(

有什么解决办法吗？

找到解决方案：http: [//jsfiddle.net/2cTwA/7/](http://jsfiddle.net/2cTwA/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:49:37.763

对 HTML 和 CSS 稍作修改 - [**DEMO**](http://jsfiddle.net/2cTwA/11/)

***CSS***

```
input { display: none; }

nav { overflow: hidden }
label   { float: left; display: inline-block; padding: 5px 10px; }
label a { color: #d33; text-decoration: underline; cursor: pointer; }   

.tab { display: none; border: 1px solid #333; padding: 10px; }
a[name="tab1"] + .tab { display: block }
:target + .tab { display: block }
:target ~ a[name="tab1"] + .tab { display: none  } 
```

***HTML***

```
<section class="tab-area tabs-checked">

    <nav>
        <input checked type="radio" name="tab" id="tab-A" />
        <input type="radio" name="tab" id="tab-B" />
        <input type="radio" name="tab" id="tab-C" />

        <label class="tab-link" for="tab-A"><a href="#tab1">Tab 1</a></label>
        <label class="tab-link" for="tab-B"><a href="#tab2">Tab 2</a></label>
        <label class="tab-link" for="tab-C"><a href="#tab3">Tab 3</a></label>
    </nav>

    <a name="tab3"></a>
    <article class="tab">
        <h3>Tab 3</h3>          
    </article>

    <a name="tab2"></a>
    <article class="tab">
        <h3>Tab 2</h3>
    </article>    

    <a name="tab1"></a>
    <article class="tab">
        <h3>Tab 1.</h3>
    </article>

</section> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:40:10.913

您正在使用兄弟选择器 (~)，并且通过使用诸如 nav 之类的包含元素，您正在从文章的兄弟中删除输入和标签。

您只需要在使用波浪号的地方重写您的 css。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-22T21:20:35.120

这是仅使用 CSS 的 12（最大）标签的 sass 示例

```
.tabs {

  input[type=radio] {
    display: none;

    @for $i from 1 through 12 {

      &:nth-of-type(#{$i}):checked ~ .content .tab:nth-child(#{$i}) {
        display: block;
      }
    }
  }

  label {
    cursor: pointer;
    display: inline-block;
  }

  .tab {
    display: none;
  }
} 
```

这是html标记

```
 <div class="tabs">
    <input name="controls" type="radio" id="controls-tab" checked="true"/>
    <label for="controls-tab">controls</label>
    <input name="controls" type="radio" id="panels-tab"/>
    <label for="panels-tab">panels</label>
    <input name="controls" type="radio" id="readme-tab"/>
    <label for="readme-tab">readme</label>
    <div class="content">
      <div class="tab">
      </div>
      <div class="tab">
      </div>
      <div class="tab">
      </div>
    </div>
  </div> 
```

无需在内容 div 中相对定位选项卡 div。无需设置内容高度。

# reporting - TCR 2.1.1 导入 ITM 报告

> ID：12605247
> 
> 赞同：0
> 
> 时间：2012-09-26T15:28:41.480
> 
> 标签：reporting, monitoring, tivoli, agents

我正在尝试在从 6.2.3-TIV-ITM_TMV-Agent-Reports-FP0001 导入的 TCR 中运行一些报告

看到我收到此错误：UDA-SQL-0196 在字典中找不到表或视图“KSY_SUMMARIZATION_CONFIG_DV”。我查了一下，表不在数据库中。看到关于那张桌子，它说：

Summarization and Pruning 配置显示在特定查询主题（Summarization and Pruning Configuration）中。结果是一行表示 KSY_SUMMARIZATION_CONFIG_DV 视图中的最新条目。

也许仓库缺少什么？如果代理正在运行，不应该有一个名为 KSY_SUMMARIZATION_CONFIG_DV 的视图吗？我似乎没有找到其他表格，例如：KLZ_CPU_HV、KLZ_CPU_DV、KLZ_CPU_WV、KLZ_CPU_MV、KLZ_CPU_QV、KLZ_CPU_YV

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T20:29:43.707

您必须为适当的代理属性组配置历史收集，以使这些表显示在您的 TDW 中。例如，为“Linux CPU”属性组创建历史集合以获取 KLZ_CPU 表。对于以 _D、_H 等结尾的表，为这些属性组配置每小时、每天等汇总。

根据收集间隔，仓库委托代理最终将创建必要的表。

# objective-c - 自定义注释视图在 iOS6 上不起作用

> ID：12605249
> 
> 赞同：2
> 
> 时间：2012-09-26T15:28:41.820
> 
> 标签：objective-c, mapkit, ios6, mkannotation, mkannotationview

我正在使用 J4n0 标注代码 ( [github](https://github.com/j4n0/callout) ) 在 MapKit 中实现自定义注释。

它在 iOS5 上运行良好。但是在 iOS6 上我有两个问题：

1.  注释显示在 AnnotationView 上（见图 1）。
2.  第一次单击 Annotation 可以很好地打开 AnnotationView，但第二次单击会打开尺寸错误的注释（见图 2）。

使用这个库的人有类似的问题/解决方案吗？

如果需要，我可以提供一些代码！

![视图上的注释](../Images/55a8c26b1e47d4eb0e694ebc210bdef1.png) ![尺寸不好](../Images/7bbdcad9269a754f45f48ba5e4e6f4c8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T09:11:25.120

如果注释显示在 AnnotationView 上，请尝试编码：

```
- (void)didMoveToSuperview {
    [super didMoveToSuperview];
    [self.superview bringSubviewToFront:self];
} 
```

万一上述解决方案不起作用，请尝试

```
view.layer.zposition = 1 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-29T03:48:59.913

我不确定您是否使用与我相同的代码，我从某个地方下载了它以自定义`annotationView`，我也发现第二次，大小不正确。我注意到该`removeAnnotation`函数还会再次`annotationView`调用它！`didMoveToSuperview`然后我挖掘了其中的代码`didMoveToSuperview`，发现我下载的代码（我希望你遇到相同的代码），在其中做一些动画，这样动画代码就会调用两次。这使得“第二次单击打开大小错误的注释”的问题

所以删除这个动画代码，或者让它在其他地方调用而不是在`didMoveToSuperview`但正确的地方。我希望这会对你有所帮助，如果发现我错了，希望你能分享你的建议。

# git - 推送一个待处理的 git 服务器？

> ID：12605250
> 
> 赞同：2
> 
> 时间：2012-09-26T15:28:45.900
> 
> 标签：git, push

我刚刚建立了一个git服务器。我有一个用

```
git init --bare 
```

命名为 repo_equipe.git。我成功地从服务器远程克隆了我的计算机上的存储库`git clone git://myserv/myrepo.git.`

然后，我添加了一个文件并在本地提交了它。但是当我尝试用它推动它时

```
git push origin master OR git push 
```

这是待定！在我的服务器上，我启动了一个守护进程：

```
git daemon --base-path=C:/git --verbose --enable=receive-pack --export-all 
```

这是什么都不做，只是双方都在等待。我服务器上的最后一行是： Request receive-pack for '/repo_equipe.git' 最后一行是命令 git push。

非常感谢你帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:25:43.133

什么都没试过`git push origin BARE:master` 。

只是双方都在等待；不知道为什么这不起作用。

# kohana - Kohana 3 Auth 数据库架构

> ID：12605253
> 
> 赞同：0
> 
> 时间：2012-09-26T15:28:54.627
> 
> 标签：kohana, kohana-3.2

我刚开始学习 Kohana 3.2。这很好，它与 django 类似，所以运行良好。糟糕的文档是......糟糕。并且 Auth 模块的文档不存在（我没有在用户指南中谈论这个，因为那太糟糕了）。我想使用 ORM，将用户信息存储在数据库中。这应该很简单！但是..我什至找不到数据库表结构应该是什么样子:(

有什么好的文档吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T07:56:38.217

首先，您需要在引导程序中同时启用 Auth 和 ORM。
然后你需要告诉 Auth 使用 ORM。转到 modules/auth/config/auth.php 并更改`'driver' => 'file'`为`'driver' => 'ORM'`.
表模式可以在 modules/orm 文件夹中找到。[您可以在此处](http://jdstraughan.com/post/auth-module-for-kohana-31-using-orm-driver)
找到更多有用的信息（适用于 3.1，但差异并不大）。

# ios - adsIdentifier 和 identifierForVendor 返回“00000000-0000-0000-0000-000000000000”

> ID：12605257
> 
> 赞同：26
> 
> 时间：2012-09-26T15:29:00.150
> 
> 标签：ios, xcode, ios6, ads

我已经实现了这个方法来获取`advertisingIdentifier`和`identifierForVendor`：

```
- (NSString *) advertisingIdentifier
{
    if (!NSClassFromString(@"ASIdentifierManager")) {
        return [OpenUDID value];
    }
    return [[[ASIdentifierManager sharedManager] advertisingIdentifier] UUIDString];
}

- (NSString *) identifierForVendor
{
    if ([[UIDevice currentDevice] respondsToSelector:@selector(identifierForVendor)]) {
        return [[[UIDevice currentDevice] identifierForVendor] UUIDString];
    }
    return @"";
}

- (BOOL)isAdvertisingTrackingEnabled
{
    if (NSClassFromString(@"ASIdentifierManager") && ![[ASIdentifierManager sharedManager] isAdvertisingTrackingEnabled]) {
        return NO;
    }
    return YES;
} 
```

在模拟器上一切正常，我可以获得 2 个字符串 ID 表示。

**但是**当我从带有 iOS 6.0 (10A403) 的 iPhone 3GS 运行时，这两种方法返回“00000000-0000-0000-0000-000000000000”作为标识符。已经完成了：

*   重启了设备
*   删除了应用程序并重新安装
*   创建和临时构建、安装、删除并再次安装
*   从另一个应用程序运行此代码
*   在带有 iOS 6.0 (10A403) 的 iPad 2 上测试，一切**正常（我有正确的标识符）**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-26T18:30:30.923

这似乎是iOS中的一个错误。在无线升级的设备上看到相同的问题，但使用 Xcode 或 iTunes 升级的设备按预期工作，没有零。

尝试了与您类似的步骤，唯一的共同主题是无线（坏）与系留升级（好）。

**更新：**直接从 iOS 5.1 无线移动到 6.1 的用户会遇到不同的行为。每次应用程序完全关闭并重新启动时，都会返回一个新值`identifierForVendor`。如果应用程序被卸载并重新安装，这是可以预料的，但事实并非如此。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-20T19:57:06.743

Apple 应技术支持事件请求确认了其系统中的此错误。他们说，`identifierForVendor`有时`advertisingIdentifier`在开发版本和从 App Store 无线下载的应用程序中都可以看到返回全零。他们没有解决方法，也不能说问题何时会得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T08:27:38.833

在某些情况下，API 会在设备恢复后返回空的 ID 响应。

建议是推迟 ID 检索，所以你可以这样调用 sometginh：

```
-(void)retrieveID
{
    if (<check fails>)
        [self performSelector:@"retrieveID" withObject:nil afterDelay:1.0];
} 
```

稍后获取 ID。

# python - python执行shell命令并继续而不等待并在执行前检查是否运行

> ID：12605265
> 
> 赞同：4
> 
> 时间：2012-09-26T15:29:29.637
> 
> 标签：python, shell, command-line

我需要从另一个执行另外两个 python 脚本。命令如下所示：

# python 发送.py

# python 等待.py

这将在一个循环中发生，该循环将休眠 1 分钟然后重新运行。

**在执行命令以启动其他脚本之前，我需要确保它们没有仍在运行。**

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-26T15:45:18.147

您可以使用[subprocess.Popen](http://docs.python.org/library/subprocess.html#popen-objects)来做到这一点，例如：

```
import subprocess

command1 = subprocess.Popen(['command1', 'args1', 'arg2'])
command2 = subprocess.Popen(['command2', 'args1', 'arg2']) 
```

如果您需要检索输出，请执行以下操作：

```
command1.wait()
print command1.stdout 
```

示例运行：

```
sleep = subprocess.Popen(['sleep', '60'])
sleep.wait()
print sleep.stdout  # sleep outputs nothing but...
print sleep.returncode  # you get the exit value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:50:58.070

```
import time
import commands
from subprocess import Popen

while True:
  t_ph = commands.getstatusoutput('ps -eo pid,args | grep script1.py | grep -v service | grep -v init.d | grep -v grep | cut -c1-6')
  t_fb = commands.getstatusoutput('ps -eo pid,args | grep script2.py | grep -v service | grep -v init.d | grep -v grep | cut -c1-6')

  if t_ph[1] == '':
    r_ph = Popen(["python", "script1.py"])

  if t_fb[1] == '':
    r_fb = Popen(["python", "script2.py"])

  time.sleep(60) 
```

或者

```
import time
import commands
from subprocess import Popen

r_ph = False
r_fb = False

while True:

  if r_ph == False:
    r_ph = Popen(["python", "script1.py"])
  else:
    if r_ph.poll():
      r_ph = Popen(["python", "script1.py"])

  if r_fb == False:
    r_fb = Popen(["python", "script2.py"])
  else:
    if r_fb.poll():
      r_fb = Popen(["python", "script2.py"])

  time.sleep(60) 
```

*这可以写得更好一点，但它的工作原理*

# android - 如何在平板电脑中隐藏系统导航栏？

> ID：12605266
> 
> 赞同：11
> 
> 时间：2012-09-26T15:29:32.930
> 
> 标签：android, android-softbuttons

在我的平板电脑上，它有以下栏来控制返回、主页等。（我不知道正确的名称、状态栏？控制栏？操作栏？或其他）

在程序中，它使用以下方法进行全屏显示。

```
requestWindowFeature(Window.FEATURE_NO_TITLE);
getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
requestWindowFeature(Window.PROGRESS_INDETERMINATE_OFF); 
```

但我不知道为什么酒吧还在这里。因此，我无法拥有正确的屏幕尺寸。

谁能告诉我怎么去掉？

![酒吧](../Images/c22962e3fa8559b62e6e9234e09631d6.png)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-03-05T15:18:38.487

似乎有一个***UNDOCUMENTED*标志**：

```
yourGreatView.setSystemUiVisibility(8); 
```

*   **没有黑色页脚**（“隐藏”系统栏）
*   **如果键盘出现，则调整视图大小**（没有重叠的输入）

在 Android 4.1.2 (API 16)
上验证 在 Android 4.1.1 (API 16)
上验证 在 Android 4.0.4 (API 15) 上验证不工作

（所有平板电脑）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-26T15:32:36.240

在运行 Android 4+ 的平板电脑中，无法隐藏**系统/导航栏**。

从[文档](http://developer.android.com/about/versions/android-4.0.html#SystemUI)（*系统 UI 可见性控制*部分）：

> 这`SYSTEM_UI_FLAG_HIDE_NAVIGATION`是一个要求导航栏完全隐藏的新标志。请注意，这仅适用于某些手机使用的导航栏（**它不会隐藏平板电脑上的系统栏**）。

但是，您可以尝试像在游戏和视频播放期间所做的那样使系统栏变暗。

> 该`SYSTEM_UI_FLAG_LOW_PROFILE`标志替换了 STATUS_BAR_HIDDEN 标志。设置后，此标志为系统栏或导航栏启用“低调”模式。导航按钮变暗，系统栏中的其他元素也隐藏。启用此功能对于创建更具沉浸感的游戏很有用，而不会分散系统导航按钮的注意力。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-04-17T12:46:14.000

在 Android 4.4 及更高版本中，您可以完全隐藏导航栏并使用全屏和沉浸式组合使其保持隐藏状态：

```
@Override
protected void onResume() {
    super.onResume();

    View decorView = getWindow().getDecorView();
    decorView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE
            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
            | View.SYSTEM_UI_FLAG_FULLSCREEN
            | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-03-05T06:49:15.253

```
public class Utils {

public static void hideNavigations(Activity context) {
    View decorView = context.getWindow().getDecorView();
    decorView.setSystemUiVisibility(View.SYSTEM_UI_FLAG_LAYOUT_STABLE
            | View.SYSTEM_UI_FLAG_LAYOUT_HIDE_NAVIGATION
            | View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN
            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION
            | View.SYSTEM_UI_FLAG_FULLSCREEN
            | View.SYSTEM_UI_FLAG_IMMERSIVE_STICKY);
} 
```

}

在您的活动中：

```
@Override
protected void onResume() {
    super.onResume();
    Utils.hideNavigations(this);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-30T15:04:56.977

一个非常核心的选择是从 /system/app/ 中删除 SystemUI.apk。但警告这将完全从平板电脑中删除。我在用于前面板信息亭的平板电脑上执行此操作，然后我将平板电脑设置为启动到我的应用程序。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-03-06T13:53:08.993

正如其他人所说的在root模式下使用命令“pm disable com.android.systemui”，所以下面的代码在你的android应用程序中执行这个命令，只需调用下面的方法，你的平板电脑需要root。

```
private void hideNavigationBar(){
        try {
            Process process = Runtime.getRuntime().exec("su");
            DataOutputStream os = new DataOutputStream(process.getOutputStream());
            os.writeBytes("pm disable com.android.systemui\n");
            os.flush();
            os.writeBytes("exit\n");
            os.flush();
            process.waitFor();
            //////////////////////////////////////
        } catch (InterruptedException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
    } 
```

此代码隐藏android系统上的导航栏，重新出现系统栏使用“pm enable com.android.systemui”而不是之前代码中的“pm disable com.android.systemui”。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-26T15:39:52.580

由于系统栏用于在 android 中导航，因此没有简单的方法来实现这一点，您可以禁用/调暗控件：

```
View v = findViewById(R.id.view_id);
v.setSystemUiVisibility(View.STATUS_BAR_HIDDEN); 
```

但是你可以在没有系统栏的情况下获得屏幕的大小（不确定是从哪个版本开始的，我认为是 3.1）

```
Method rawW = Display.class.getMethod("getRawWidth");
Method rawH = Display.class.getMethod("getRawHeight");
int width = (Integer)mGetRawW.invoke(dp);
int height = (Integer)mGetRawH.invoke(dp); 
```

如果您的应用程序具有 root 访问权限，还有一种方法可以实现它： http: [//ppareit.github.com/HideBar/](http://ppareit.github.com/HideBar/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-27T06:04:06.447

你不能隐藏它，但你可以简单地禁用它，除了家。试试[这个链接。](https://stackoverflow.com/questions/14801928/is-it-possible-to-hide-the-system-bar/15652646#15652646). 使用 SYSTEM_UI_FLAG_LOW_PROFILE 您可以使系统栏变暗，并使用`onWindowFocusChanged()`可以获取焦点并折叠它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-06T00:12:24.803

下面的代码对我有用 -

您可以将其写入 onCreate() 或 onResume( 如果需要)

```
getWindow().getDecorView().setSystemUiVisibility( View.SYSTEM_UI_FLAG_IMMERSIVE
                            | View.SYSTEM_UI_FLAG_HIDE_NAVIGATION); 
```

# android - 使用 HashMap 的适配器实现

> ID：12605280
> 
> 赞同：0
> 
> 时间：2012-09-26T15:30:17.827
> 
> 标签：android, android-layout, android-listview, android-view

`ListView`s在屏幕上看到之前向 s 询问`Adapter`s 。`View`an 的默认实现`Adapter`实际上会在`ListView`请求时夸大您的视图。

使用 an 时`Object extends ArrayAdapter<MyObject>`，我们实际上可以将所有视图存储在 a`HashMap<MyObject, SoftReference<View>>`和 override中`ArrayAdapter.getView`，因此我们只能膨胀`Views`一次，但如果`GarbageCollector`pass 和 make our `Views` `null`（或 my`SoftReferences`是`null`出于任何奇怪的原因制作的）我们会再次膨胀它们。

```
@Override
public View getView(final int position, final View convertView,
        final ViewGroup parent)
{
    final MyObject mo = getItem(position);
    if (hashMap.get(mo) == null || hashMap.get(mo).get() == null)
    {
        final MyCustomView mcv = new MyCustomView(getContext());
        hashMap.put(mo, new SoftReference<MyObject>(mcv));
    } 
    return hashMap.get(mo).get();
} 
```

我试过了，效果很好。是否以任何方式不鼓励这种实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:54:37.610

> 我们实际上可以存储所有视图

您应该使用 ViewHolder 模式。它允许您不创建**所有**视图，而只创建当前需要在屏幕上显示的视图。

# django - 如何在 django 中同时在多个表中进行此类查询

> ID：12605292
> 
> 赞同：1
> 
> 时间：2012-09-26T15:31:05.370
> 
> 标签：django

我发生在下面的一些查询中：

```
bphoto = B_Photo.objects.filter(q_user).order_by('-pub_date')
bactivity = B_Activity.objects.filter(q_user).order_by('-pub_date')
bpart = B_Part.objects.filter(q_user).order_by('-pub_date') 
```

q_user 是一个 Q 对象，我想要的是对三个表中的所有结果进行排序，使用“pub_date”字段。

我怎样才能简化这种查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:20:24.847

`B_Photo`，`B_Activity`并且`B_Part`没有相同的表结构，对吧？我认为您不能使用三个不同的表进行查询。UNION 可以做到这一点，但它要求所有子查询返回具有相同结构的数据。

您似乎想要显示一个混合了照片、活动和部分的时间线。最合理的方法是在python中对结果进行排序。

```
bphoto = B_Photo.objects.filter(q_user).order_by('-pub_date')
bactivity = B_Activity.objects.filter(q_user).order_by('-pub_date')
bpart = B_Part.objects.filter(q_user).order_by('-pub_date')

timeline = sorted(bphoto + bactivity + bpart, key=lambda x:x.pub_date) 
```

更新：

我明白你的意思了。如果您在这 3 个表中有太多数据，并且只想显示最近的，例如 20 条记录，您可以像这样在 3 个表上运行原始 UNION sql：

```
cursor = connection.cursor()
cursor.execute("SELECT id, type FROM (
    SELECT id, 'photo' AS type, pub_date FROM b_photo UNION 
    SELECT id, 'activity' AS type, pub_date FROM b_activity UNION 
    SELECT id, 'part' AS type, pub_date FROM b_part) AS my_query
    ORDER BY pub_date DESC LIMIT 20")
results = cursor.fetchall()
# results will be something like ((id, type), (id, type), ...)
# where type indicates what the id is (photo, activity or part) 
```

然后使用 individual`B_XXX.objects.get(id=id)`获取每个对象`ids`。

```
for result in results:
    if result[1] == 'photo':
        obj = B_Photo.objects.get(id=result[0])
    elif result[1] == 'activity':
        obj = B_Activity.objects.get(id=result[0])
    elif result[1] == 'part':
        obj = B_Part.objects.get(id=result[0])
    # do sth with obj... 
```

# jsf - primefaces Galleria 有时不会在 IE8 和 IE9 中显示

> ID：12605293
> 
> 赞同：0
> 
> 时间：2012-09-26T15:31:09.407
> 
> 标签：jsf, primefaces, image-gallery

我正在使用 ap:galleria (primefaces 3.2)，它在 FF 和 chrome 中运行良好。但有时它在 IE9 中不显示，而 IE8 从不显示它。

IE9：当我清除浏览器缓存并重新加载页面时，图库正确显示。但是当我重新加载页面时，画廊没有显示。我需要清除浏览器缓存，然后再次显示。

这是广场代码

```
<f:view
<ui:composition    
<ui:define name="content">
<f:view>
<f:subview id="fleetvehicleinfo">
<h:form 
.
.
<p:galleria value="#{vehicleRemarketingDetail.vehicle.Pictures_Set}" var="picture" panelWidth="470" panelHeight="350" frameWidth="110" frameHeight="80" >  
        <p:graphicImage value="/vehicle/remarketing/image/#{picture.document_id}.jpg" height="350" width="470" />
    </p:galleria>
    </h:form>
    </f:subview>
    </f:view>
</ui:define> 
```

任何人都知道出了什么问题以及我如何让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T14:58:07.080

尝试在标题的开头添加它：

```
<f:facet name="first">
      <meta http-equiv="Pragma" content="no-cache" />
      <meta http-equiv="Expires" content="-1" />
</f:facet> 
```

# php - PHP 处理多个 TCP 连接的能力？

> ID：12605294
> 
> 赞同：1
> 
> 时间：2012-09-26T15:31:15.867
> 
> 标签：php, sockets, tcp, udp

我想知道 PHP 是否可以通过 TCP 端口充当服务器？1GB RAM 服务器可以处理多少个 IDLE 连接？PHP 能否接收到一个 TCP 端口的多个连接（就像 apache 在端口 80 上所做的那样？）

如果我有一个客户端连接到 PHP 打开的套接字，我该如何向它发送数据？（例如 a.php 正在监听 5000 端口，某个客户端已连接，稍后 b.php 需要向该客户端发送一些内容，那么推送消息？）

或者我应该改用UDP吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:33:33.157

朋友，我的第一个建议是，即使 PHP 可以原生地做到这一点。PHP 不是实现 TCP 套接字服务器的最佳技术。原因是因为记住 php 对每个脚本都有 max_execution_time 并且使服务器永远运行将需要将此值设置为 0，这意味着永远。1gb ram 服务器可以处理的连接数量取决于每个 php 进程消耗多少 ram 和处理器。

但无论如何，如果您决定使用 php. 是的，您可以使用 php 构建一个异步 tcp 套接字服务器。

只需创建一个监听 5000 的主套接字（例如）。对于与此主套接字连接的每个客户端套接字，然后为每个传入连接创建一个具有随机空闲端口（由操作系统选择）的子套接字，您可以开始与子套接字交谈，同时释放主套接字以继续侦听另一个传入连接。

# excel - 如何在excel vba中过滤文件的修改日期

> ID：12605295
> 
> 赞同：2
> 
> 时间：2012-09-26T15:31:16.093
> 
> 标签：excel, vba

我有一个返回文件名、大小、路径和日期的代码片段。如何放置 if 语句以便显示大于 X 的日期？

```
 Dim irow
Sub ListFiles()
    irow = 11
    Call ListMyFiles(Range("C7"), Range("C8"))
End Sub

Sub ListMyFiles(mySourcePath, IncludeSubfolders)
    Set MyObject = New Scripting.FileSystemObject
    Set mySource = MyObject.GetFolder(mySourcePath)
    On Error Resume Next
    For Each myFile In mySource.Files
            iCol = 2
            Cells(irow, iCol).Value = myFile.Path
            iCol = iCol + 1
            Cells(irow, iCol).Value = myFile.Name
            iCol = iCol + 1
            Cells(irow, iCol).Value = myFile.Size
            iCol = iCol + 1
            Cells(irow, iCol).Value = myFile.DateLastModified
            irow = irow + 1
    Next
    If IncludeSubfolders Then
        For Each mySubFolder In mySource.SubFolders
            Call ListMyFiles(mySubFolder.Path, True)
        Next
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:47:06.443

像这样：

```
Dim myDate as Date
myDate = "12.02.1985"

For Each myFile In mySource.Files
    if myFile.DateLastModified > myDate then
        iCol = 2
        Cells(irow, iCol).Value = myFile.Path
        iCol = iCol + 1
        Cells(irow, iCol).Value = myFile.Name
        iCol = iCol + 1
        Cells(irow, iCol).Value = myFile.Size
        iCol = iCol + 1
        Cells(irow, iCol).Value = myFile.DateLastModified
        irow = irow + 1
    end if
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:48:14.463

为什么不在最后过滤而不是使用`IF`：

```
Option Explicit
Sub FilterbyDate()
    Dim ws As Worksheet
    Dim rng As Range
    Dim frng As Range
    Set ws = Sheets("Sheet1")
    ' Remove any previous filters
    ws.AutoFilterMode = False
    ' Specify range to be filtered
    Set rng = ws.Range("xx")

    With rng
        ' Filter data by date:
        ' where field is the column number with your dates and
        ' change the date criteria to what you desire
        .AutoFilter Field:=1, Criteria1:=">dd/mm/yyyy hh:mm:ss"
        ' Define the filtered range;
        ' You could then copy it to a new sheet
        ' deleting original so you're only left
        ' with the data you want
         Set frng = .SpecialCells(xlCellTypeVisible)
        ' frng.Copy
    End With
End Sub 
```

# ms-access - 你可以使用透视视图在 Microsoft Access 中输入数据吗

> ID：12605299
> 
> 赞同：0
> 
> 时间：2012-09-26T15:31:25.780
> 
> 标签：ms-access, crosstab, relationships

我有一个当前正在使用 Microsoft SQL Server Lite 的应用程序，但是我正在构建一个 Microsoft Access 数据库来替换 SQL Server Lite，以便我可以使用数据透视表查询。目前，我在 Microsoft Access 中工作，直到按照我想要的方式设置数据库。

我有三张桌子，球员，教练，评级。每个教练必须对每个球员进行评分，因此我有以下关系：

```
Coaches --> Ratings
Players --> Ratings 
```

每个教练只能对每个球员进行一次评级，我想要一个交叉表视图，将球员显示为行，将教练显示为列，以便可以在表格的单元格中输入评级。

创建交叉表查询很容易，但它不允许我在单元格中输入数据。我很确定这是由于一对多关系而发生的。每个教练必须对多个球员进行评分，每个球员必须由多个教练进行评分，因此它们在两种情况下都必须是一对多的关系。也就是说，每位教练只会对每位球员进行一次评分。

有没有办法创建一个复合主键，我需要在关系中做一些不同的事情，或者可能是一个可以解决这个问题的初步查询？

谢谢你。

# asp.net - 返回从另一个控制器生成的视图

> ID：12605302
> 
> 赞同：0
> 
> 时间：2012-09-26T15:31:35.523
> 
> 标签：asp.net, asp.net-mvc, view

比方说，有一个“产品”区域和两个控制器“家庭”和“套件”（在这种情况下会有更多控制器像“套件”一样运行）。

我配置了“ProductAreaRegistration.cs”，使 URL 看起来像这样：

> \Products\
> （控制器 =“Home”，操作 =“Index”）
> 
> \Products\Suite
> （控制器 =“Suite”，操作 =“Index”）
> 
> \Products\Suite\TechnicalSpecification
> （控制器 =“Suite”，操作 =“TechnicalSpecification”）

“TechnicalSpecification”动作出现在该区域的每个控制器中，但“Home”控制器是唯一的，wo实际上完成了主要工作。像“Suite”这样的其他控制器只是做一些与控制器相关的事情，然后重定向到“Home”，“TechnicalSpecification”：

```
// Suite-Controller
public ActionResult TechnicalSpecification()
{
    //doSomethingThatOnlyThisControllerHasToDo();

    return RedirectToAction("TechnicalSpecification", "Home", new { specificationId = 45 });
} 
```

* * *

```
// Home-Controller
public ActionResult TechnicalSpecification(int specificationId)
    {
        Object model = getModelByIdWithSomeMethod(specificationId);
        //DoEvenMoreThingsHere();

        return View(model);
    } 
```

我的问题是，当我查看“Suite”、“TechnicalSpecification”的链接时，它显示
\Products\Suite\TechnicalSpecification

但单击该链接后，地址栏中的 URL 更改为
\Products\TechnicalSpecification?specificationId=45

因为重定向。我希望 URL 保持如前所述。

所以不是“return RedirectToAction(...)”而是有类似“return ViewResultFromOtherController(...)”的东西，所以它不会重定向？

希望你明白了。
如果没有，请询​​问！
提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:01:06.440

可能有比这更好的方法，但您可以尝试在 Action 中实例化另一个控制器，调用该方法并返回其结果。这会给您留下您发布到的相同 URL，但会为您提供另一种方法的结果。

就像是：

```
Controller home = new HomeController();
return home.TechnicalSpecification(specificationId); 
```

不过，这确实需要重构。

# java - 使用 Java 在 Mac 上的 Preview 中打开带有图像的整个地图

> ID：12605304
> 
> 赞同：0
> 
> 时间：2012-09-26T15:31:39.777
> 
> 标签：java, windows, macos

我目前正在为一个拥有大量来自他所在城市的旧图片、图像和文本文档的人编写一个应用程序。我可以在地图中打开每个文档，但如何在 Mac 上的预览中打开整个地图。因为该程序将在 Mac 和 Windows pc 上使用。在 Windows 中，您可以通过仅打开 1 个图像来浏览所有图像，但在 OS-X 上这是不可能的。有人有想法吗？

# android - 如何获得位图的平均色调/饱和度？

> ID：12605305
> 
> 赞同：1
> 
> 时间：2012-09-26T15:31:45.157
> 
> 标签：android

> **可能重复：**
> [如何获得图像的平均颜色](https://stackoverflow.com/questions/12408431/how-can-i-get-the-average-colour-of-an-image)

假设我正在制作一个应用程序，其中位图将应用于用户的照片。为了使应用的位图看起来逼真，它必须具有与用户照片相似的色调/饱和度。

所以我想问，有没有办法从用户照片中获得平均色调/饱和度或其他颜色平均值？将其用作调整应用位图的色调/饱和度的系数。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:38:43.400

您可以通过查看每个像素来计算平均色调/饱和度，然后使用 Color 中的 HSV 方法自行计算以从 RGB 值中获取它。由于您将在单个图像上而不是在视频预览上执行此操作，因此它应该不会太难，也不会在手机上花费太长时间来查看所有像素。

# java - 如何从 JavaBean 刷新 jsf 页面

> ID：12605306
> 
> 赞同：0
> 
> 时间：2012-09-26T15:31:53.877
> 
> 标签：java, jsf, refresh

当 manageBean 中的变量更改值时，我想刷新 XHTML 页面 (jsf) 或此页面的一部分。

**问题是：**

我有一个 JavaBean，它从 webService 接收数据。此数据定期更改。当变量更改值时，我想在 IHM 页面中显示它。

我希望我的应用程序检测到这些更改并自动刷新页面。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:08:59.610

使用 ajax 轮询。演示：

*   [RichFaces 3.3 演示](http://livedemo.exadel.com/richfaces-demo/richfaces/poll.jsf)
*   [RichFaces 4.x 演示](http://showcase.richfaces.org/richfaces/component-sample.jsf?demo=poll)
*   [PrimeFaces 3.4 演示](http://www.primefaces.org/showcase/ui/poll.jsf)

请注意，RichFaces 3.3 适用于 JSF 1.2 和 JSF 2，RichFaces 4.x 和 PrimeFaces 3.x 适用于 JSF 2.x

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T05:16:35.830

您可以在 jsf 中使用 ajax 的 poll 选项，例如

```
<a4j:poll interval="timeinms" reRender="jsfcomponent"> </a4j:poll> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:08:53.793

一种快速的方法是使用第三方库，如[PrimedFaces](http://www.primefaces.com)

该库包含一个名为**[poll](http://www.primefaces.org/showcase-labs/ui/poll.jsf)**的组件，您可以在预设的时间间隔内检查您的后端并在更改时更新您的视图组件。
查看链接以查看一个简单的示例。

希望这会有所帮助。玩得开心！

# dynamics-crm-2011 - 在 CRM 2011 中创建包含多个实体的自定义视图？

> ID：12605312
> 
> 赞同：0
> 
> 时间：2012-09-26T15:32:30.940
> 
> 标签：dynamics-crm-2011

我是 CRM 2011 的新手。所以不熟悉它的所有功能。

对显示来自多个相关实体的数据有疑问。

第一个实体是用户（包含有关用户的信息） 第二个实体是一个班级（包含有关已注册班级用户的信息） 第三个实体是一个班级出勤率（如果用户在特定日期参加课程，则包含信息）

这个想法是向已注册课程的用户显示视图。显示开始结束日期以及用户是否上课。管理员应选择用户并将状态更改为参加或不参加。

如何在 CRM 2011 中完成？是否需要定制开发或只是使用 CRM 中的用户界面查看定制？

任何建议或例子高度赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:46:56.817

在 Mscrm 中，您可以为单个主记录类型创建视图，在此视图中，您可以显示主记录中的字段。您还可以包括通过查找链接到主记录的辅助记录，您可以显示这些辅助链接记录的列。这里的限制是您不能从这些辅助链接实体链接第三记录。这里的轻微混淆是您可以将第三实体的名称显示为第二实体上的字段。

因此，为了将其放入一个真实示例的上下文中，请采用以下实体模型。

*   联系人与事件有一对多的关系（一个联系人可以有很多事件，每个事件都有一个查找联系人）
*   事件与任务具有一对多的关系（一个事件可以有许多任务，每个任务都有一个事件的查找）

因此，任务视图可以；

*   显示任务中的所有字段（主要任务）
*   显示事件中的所有字段（事件是次要的）
*   显示联系人的姓名，但不显示任何其他字段（联系人是第三人称，但其名称显示为事件中的字段）

当您真正亲自尝试时，这是其中一件会变得更加清晰的事情。很难说您将能够实现什么，因为它不清楚您的实体模型是什么。

无论如何，这里是您创建自己的自定义视图的方式。

CRM > 设置 > 解决方案 > 您的解决方案 > 您的实体 > 视图 > 新建。有各种按钮应该是不言自明的。

单击添加列，它将向您显示主要实体的字段，使用记录类型下拉选项从链接的辅助实体中选择字段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-28T10:40:22.740

在您拥有的字里行间阅读：与学生（用户）具有多：多关系的班级实体，因此一个用户可以注册多个班级，一个班级有多个用户。

然后有第二个出勤实体，听起来它与学生和班级都具有多：1 关系，并且具有显示某一日期班级特定实例的出勤率的状态。

到目前为止听起来像是一个很好的模型。

使用詹姆斯回答中的想法，您应该查看出勤率，包括班级和用户的名称。您可能还会有来自用户或班级的额外列来显示课程开始和结束的时间、学生的电子邮件地址等内容。

按班级、学生、出勤日期对视图进行排序，您就有了很好的视图。但这不会显示在任何类型的层次结构中或显示摘要。您可能希望为此构建一个自定义报告，以便您可以报告出勤率，按学生分组并按班级分组。如果您够聪明，您还可以添加日期过滤器，例如，您可以仅查看上个月的出勤率。您可能可以使用内置的报告向导来做很多事情，对于更复杂或更漂亮的版本，请转到 SSRS

# javascript - 没有画布的 HTML5 getImageData

> ID：12605315
> 
> 赞同：5
> 
> 时间：2012-09-26T15:32:41.200
> 
> 标签：javascript, jquery, html

有没有办法在没有画布的情况下使用图像的 getImageData ？我想在图像的鼠标位置获得像素颜色。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T15:34:11.793

不，你不能。

但是可以使用内存中的画布来获取 imageData，这既快速又简单：

```
var canvas = document.createElement('canvas');
var context = canvas.getContext('2d');
var img = document.getElementById('someImageId');
context.drawImage(img, 0, 0 );
var theData = context.getImageData(0, 0, img.width, img.height); 
```

您可以保留该`theData`变量，这样您就不必在每次点击时都构建它。

请注意，如果图像来自另一个域，这将不起作用（因此，如果您使用`file://`而不是打开 html 文件，它将不起作用`http://`）。

# php - PHP命中计数器自动生成多页

> ID：12605316
> 
> 赞同：2
> 
> 时间：2012-09-26T15:32:41.590
> 
> 标签：php, javascript, dynamic, counter, hit

嗨，我是 php 的新手，我正在尝试从 phpjunkyard.com 获取这个当前的 PHP 文本命中计数器脚本，以自动为动态页面生成计数器，而无需为每个页面创建一个 counter.txt 文件。到目前为止，如果它不存在，我设法让它为每个新页面编写一个新的 .txt，但我得到一个错误，我不知道如何删除它.. PS：我使用这个计数器是因为它有独特的访客计数系统。

这是原始的完整 PHP 文件：

```
<?php
/*******************************************************************************
*  Title: PHP hit counter (PHPcount)
*  Version: 1.4 @ March 3, 2012
*  Author: Klemen Stirn
*  Website: http://www.phpjunkyard.com
********************************************************************************
*  COPYRIGHT NOTICE
*  Copyright 2004-2012 Klemen Stirn. All Rights Reserved.
*
*  This script may be used and modified free of charge by anyone
*  AS LONG AS COPYRIGHT NOTICES AND ALL THE COMMENTS REMAIN INTACT.
*  By using this code you agree to indemnify Klemen Stirn from any
*  liability that might arise from it's use.
*
*  Selling the code for this program, in part or full, without prior
*  written consent is expressly forbidden.
*
*  Obtain permission before redistributing this software over the Internet
*  or in any other medium. In all cases copyright and header must remain
*  intact. This Copyright is in full effect in any country that has
*  International Trade Agreements with the United States of America or
*  with the European Union.
********************************************************************************
*
*  ACKNOWLEDGEMENT
*
*  Please support future script development by linking to us:
*  http://www.phpjunkyard.com/about/link2us.php
*
*  Or by sending a small donation:
*  http://www.phpjunkyard.com/about/donate.php
*
*******************************************************************************/

// SETUP YOUR COUNTER
// See file readme.html for detailed instructions

// Count unique visitors? 1 = YES, 0 = NO
$count_unique = 0;

// Number of hours a visitor is considered as "unique"
$unique_hours = 24;

// Minimum number of digits shown (zero-padding). Set to 0 to disable.
$min_digits = 0;

#############################
#     DO NOT EDIT BELOW     #
#############################

/* Turn error notices off */
error_reporting(E_ALL ^ E_NOTICE);

/* Tell browsers not to cache the file output so we can count all hits */
header("Cache-Control: no-store, no-cache, must-revalidate");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

/* Is page ID set? */
if ( ! isset($_GET['page']) )
{
    die('ERROR: The counter.php file must be called with a <b>?page=PAGEID</b> parameter, for example <b>counter.php?page=test</b>');
}

/* Remove any illegal chars from the page ID */
$page = preg_replace('/[^a-zA-Z0-9\-_\.]/','',$_GET['page']);

/* Stop if $page is not valid */
if ( ! strlen($page) )
{
    die('ERROR: Page ID is missing or contains only invalid chars. Please use only these chars for the page ID: a-z, A-Z, 0-9, &quot;.&quot;, &quot;-&quot; and &quot;_&quot;');
}

/* Set values for cookie and log file names */
$cname   = 'tcount_unique_'.$page;
$logfile = 'logs/' . $page . '.txt';

/* Does the log file exist? */
if ( ! file_exists($logfile) )
{
    die('ERROR: Log file not found. Make sure there is a file called <b>' . $page . '.txt</b> inside your <b>logs</b> folder. On most servers file names are CaSe SeNSiTiVe!');
}

/* Open log file for reading and writing */
if ($fp = @fopen($logfile, 'r+'))
{
    /* Lock log file from other scripts */
    $locked = flock($fp, LOCK_EX);

    /* Lock successful? */
    if ($locked)
    {
        /* Let's read current count */
        $count = intval( trim( fread($fp, filesize($logfile) ) ) );

        /* If counting unique hits is enabled make sure it's a unique hit */
        if ( $count_unique == 0 || ! isset($_COOKIE[$cname]) )
        {
            /* Update count by 1 and write the new value to the log file */
            $count = $count + 1;
            rewind($fp);
            fwrite($fp, $count);

            /* Print the Cookie and P3P compact privacy policy */
            header('P3P: CP="NOI NID"');
            setcookie($cname, 1, time()+60*60*$unique_hours);
        }
    }
    else
    {
        /* Lock not successful. Better to ignore than to damage the log file */
        $count = 1;
    }

    /* Release file lock and close file handle */
    flock($fp, LOCK_UN);
    fclose($fp);
}
else
{
    die("ERROR: Can't read/write to the log file ($logfile). Make sure this file is writable by PHP scripts. On UNIX servers, CHMOD the log file to 666 (rw-rw-rw-).");
}

/* Is zero-padding enabled? If yes, add zeros if required */
if ($min_digits)
{
    $count = sprintf('%0'.$min_digits.'s', $count);
}

/* Print out Javascript code and exit */
echo 'document.write(\''.$count.'\');';
exit();
?> 
```

这就是我改变的（在第 82 行）：

从：

```
/* Does the log file exist? */
if ( ! file_exists($logfile) )
{
    die('ERROR: Log file not found. Make sure there is a file called <b>' . $page . '.txt</b> inside your <b>logs</b> folder. On most servers file names are CaSe SeNSiTiVe!');
} 
```

到：

```
/* Does the log file exist? */
if ( ! file_exists($logfile) )
{
fopen($logfile, 'w') or die("can't open file");
} 
```

因此，它通过 id 为每个不同的页面创建了一个带有 .txt 的新计数器，例如：

```
<script language="Javascript" src="http://www.website.com/counter.php?page=<?php echo $pageid();?>"> 
```

但这是我在第一次创建 .txt 文件时使用新 id 时遇到的错误：

```
Warning: fread() [function.fread]: Length parameter must be greater than 0 in /home/u716430538/public_html/counter14/counter.php on line 95
document.write('1'); 
```

之后，如果您打开相同的 id，它将正常显示：

```
document.write('1'); 
```

对不起我的英语不好，希望有人可以帮助我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:48:02.910

试试这个：

```
/* Does the log file exist? */
if ( ! file_exists($logfile) )
{
$f = fopen($logfile, 'w') or die("can't open file");
fwrite($f,"0");
} 
```

# activepivot - 如何在 ActivePivot 中实现多线程 PostProcessor？

> ID：12605317
> 
> 赞同：1
> 
> 时间：2012-09-26T15:32:42.003
> 
> 标签：activepivot

我考虑使用 ActivePivot 实例来计算 CVA（信用估值调整）。

我必须在大量单元格（每个交易对手 20k）上应用一段逻辑，每个单元格都与大小为 10k 的浮点数组相关联。即使 ActivePivot 是大规模多线程的，ABasicPostProcessor 也会以单线程方式应用于每个范围位置。我怎样才能让它以多线程方式通过我的点位置进行计算？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T19:59:00.923

我构建了以下类，它专门通过以多线程方式添加对 doEvaluation 的调用来专门化 ABasicPostProcessor（一个能够快速实现每点后处理器的核心类）。

给定 ABasicPostProcessor 专业化，只需扩展 AParallelBasicPostProcessor 以获得并行评估！

```
/**
 * Specialization of ABasicPostProcessor which will call doEvaluation in a
 * multithreaded way
 * 
 * @author BLA
 */
public abstract class AParallelBasicPostProcessor<OutputType> extends ABasicPostProcessor<OutputType> {
    private static final long serialVersionUID = -3453966549173516186L;

    public AParallelBasicPostProcessor(String name, IActivePivot pivot) {
        super(name, pivot);
    }

    @Override
    public void evaluate(ILocation location, final IAggregatesRetriever retriever) throws QuartetException {
        // Retrieve required aggregates
        final ICellSet cellSet = retriever.retrieveAggregates(Collections.singleton(location), Arrays.asList(prefetchMeasures));

        // Prepare a List
        List<ALocatedRecursiveTask<OutputType>> tasks = new ArrayList<ALocatedRecursiveTask<OutputType>>();

        // Create the procedure to hold the parallel sub-tasks
        final ICellsProcedure subTasksGeneration = makeSubTasksGenerationProcedure(tasks);

        cellSet.forEachLocation(subTasksGeneration, underlyingMeasures);

        ForkJoinTask.invokeAll(tasks);

        for (ALocatedRecursiveTask<OutputType> task : tasks) {
            OutputType returnValue;
            try {
                returnValue = task.get();
            } catch (InterruptedException e) {
                throw new RuntimeException(e);
            } catch (ExecutionException e) {
                // re-throw the root cause of the ExecutionException
                throw new RuntimeException(e.getCause());
            }

            // We can write only non-null aggregates
            if (null != returnValue) {
                writeInRetriever(retriever, task.getLocation(), returnValue);
            }
        }
    }

    protected void writeInRetriever(IAggregatesRetriever retriever, ILocation location, OutputType returnValue) {
        retriever.write(location, returnValue);
    }

    protected ICellsProcedure makeSubTasksGenerationProcedure(List<ALocatedRecursiveTask<OutputType>> futures) {
        return new SubTasksGenerationProcedure(futures);
    }

    /**
     * {@link ICellsProcedure} registering a {@link ALocatedRecursiveTask} per
     * point location
     */
    protected class SubTasksGenerationProcedure implements ICellsProcedure {

        protected List<ALocatedRecursiveTask<OutputType>> futures;

        public SubTasksGenerationProcedure(List<ALocatedRecursiveTask<OutputType>> futures) {
            this.futures = futures;
        }

        @Override
        public boolean execute(final ILocation pointLocation, int rowId, Object[] measures) {
            // clone the array of measures as it is internally used as a buffer
            final Object[] clone = measures.clone();

            futures.add(makeLocatedFuture(pointLocation, clone));

            return true;
        }
    }

    protected ALocatedRecursiveTask<OutputType> makeLocatedFuture(ILocation pointLocation, Object[] measures) {
        return new LocatedRecursiveTask(pointLocation, measures);
    }

    /**
     * A specialization of RecursiveTask by associating it to a
     * {@link ILocation}
     * 
     * @author BLA
     * 
     */
    protected static abstract class ALocatedRecursiveTask<T> extends RecursiveTask<T> {
        private static final long serialVersionUID = -6014943980790547011L;

        public abstract ILocation getLocation();
    }

    /**
     * Default implementation of {@link ALocatedRecursiveTask}
     * 
     * @author BLA
     * 
     */
    protected class LocatedRecursiveTask extends ALocatedRecursiveTask<OutputType> {
        private static final long serialVersionUID = 676859831679236794L;

        protected ILocation pointLocation;
        protected Object[] measures;

        public LocatedRecursiveTask(ILocation pointLocation, Object[] measures) {
            this.pointLocation = pointLocation;
            this.measures = measures;

            if (pointLocation.isRange()) {
                throw new RuntimeException(this.getClass() + " accepts only point location: " + pointLocation);
            }
        }

        @Override
        protected OutputType compute() {
            try {
                // The custom evaluation will be computed in parallel
                return AParallelBasicPostProcessor.this.doEvaluation(pointLocation, measures);
            } catch (QuartetException e) {
                throw new RuntimeException(e);
            }
        }

        @Override
        public ILocation getLocation() {
            return pointLocation;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T15:38:26.030

ActivePivot 查询引擎是多线程的，在单个查询中调用多个后处理器是并行完成的（当然，除非一个依赖于另一个的结果）。当同一个后处理器在查询中涉及的位置多次执行时，这也是并行完成的。因此，在卷起袖子之前，有必要检查一下您的查询计划中是否没有更明显的瓶颈。

现在，在一个位置调用一个后处理器确实是 ActivePivot 查询引擎中不可分割的工作负载。如果聚合不仅仅是以纳秒为单位的数字，而是像向量这样的大型或结构化对象，则可能存在并行驱动性能提升的空间。

ActivePivot 查询引擎构建在 fork/join 池 ( [http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/forkjoin.html) ) 之上。这意味着您的后处理器代码总是从分叉连接池中调用，这使得您可以分叉您自己的子任务，然后加入它们。这被认为是一个专家技巧，如果没有对分叉连接池的工作原理有一个公平的了解，请不要尝试。

让我们考虑一个后处理器，它为每个评估的位置计算几个度量的最大值：

```
package com.quartetfs.pivot.sandbox.postprocessor.impl;

import com.quartetfs.biz.pivot.IActivePivot;
import com.quartetfs.biz.pivot.ILocation;
import com.quartetfs.biz.pivot.postprocessing.impl.ABasicPostProcessor;
import com.quartetfs.fwk.QuartetException;
import com.quartetfs.fwk.QuartetExtendedPluginValue;

/**
 * 
 * Post processor that computes the MAX of several measures.
 * 
 * @author Quartet FS
 *
 */
@QuartetExtendedPluginValue(interfaceName = "com.quartetfs.biz.pivot.postprocessing.IPostProcessor", key = MaxPostProcessor.TYPE)
public class MaxPostProcessor extends ABasicPostProcessor<Double> {

    /** serialVersionUID */
    private static final long serialVersionUID = -8886545079342151420L;

    /** Plugin type */
    public static final String TYPE = "MAX";

    public MaxPostProcessor(String name, IActivePivot pivot) {
        super(name, pivot);
    }

    @Override
    public String getType() { return TYPE; }

    @Override
    protected Double doEvaluation(ILocation location, Object[] measures) throws QuartetException {
        double max = ((Number) measures[0]).doubleValue();
        for(int i = 1; i < measures.length; i++) {
            max = Math.max(max, ((Number) measures[i]).doubleValue());
        }
        return max;
    }

} 
```

在该后处理器中，由评估的范围位置产生的叶位置将一个接一个地计算。您可以决定改为创建任务，并通过分叉连接池并行执行这些任务。我希望以下内容可以帮助您入门：

```
package com.quartetfs.pivot.sandbox.postprocessor.impl;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.List;

import jsr166y.ForkJoinTask;
import jsr166y.RecursiveTask;

import com.quartetfs.biz.pivot.IActivePivot;
import com.quartetfs.biz.pivot.ILocation;
import com.quartetfs.biz.pivot.cellset.ICellSet;
import com.quartetfs.biz.pivot.cellset.ICellsProcedure;
import com.quartetfs.biz.pivot.query.aggregates.IAggregatesRetriever;
import com.quartetfs.fwk.QuartetException;
import com.quartetfs.fwk.QuartetExtendedPluginValue;

/**
 * 
 * Post processor that computes the MAX of several measures,
 * evaluation of locations is performed in parallel.
 * 
 * @author Quartet FS
 *
 */
@QuartetExtendedPluginValue(interfaceName = "com.quartetfs.biz.pivot.postprocessing.IPostProcessor", key = ParallelMaxPostProcessor.TYPE)
public class ParallelMaxPostProcessor extends MaxPostProcessor {

    /** serialVersionUID */
    private static final long serialVersionUID = -8886545079342151420L;

    /** Plugin type */
    public static final String TYPE = "PMAX";

    public ParallelMaxPostProcessor(String name, IActivePivot pivot) {
        super(name, pivot);
    }

    @Override
    public String getType() { return TYPE; }

    @Override
    public void evaluate(ILocation location, IAggregatesRetriever retriever)throws QuartetException {
        try {
            // Retrieve required aggregates
            ICellSet cellSet = retriever.retrieveAggregates(Collections.singleton(location), Arrays.asList(prefetchMeasures));

            // Evaluate the cell set to create tasks
            ParallelEvaluationProcedure evalProcedure = new ParallelEvaluationProcedure();
            cellSet.forEachLocation(evalProcedure);

            // Execute the tasks in parallel and write results
            evalProcedure.writeResults(retriever);

        } catch(Exception e) {
            throw new QuartetException("Evaluation of " + this + " on location " + location + " failed.", e);
        }
    }

    /**
     * Procedure evaluated on the cell set.
     */
    protected class ParallelEvaluationProcedure implements ICellsProcedure {

        /** List of tasks */
        protected final List<MaxComputation> tasks = new ArrayList<ParallelMaxPostProcessor.MaxComputation>();

        @Override
        public boolean execute(ILocation location, int rowId, Object[] measures) {
            Object[] numbers = measures.clone();
            tasks.add(new MaxComputation(location, numbers));
            return true;  // continue
        }

        /** Once all the tasks are executed, write results */
        public void writeResults(IAggregatesRetriever retriever) throws Exception {

            // Invoke all the tasks in parallel
            // using the fork join pool that runs the post processor.
            ForkJoinTask.invokeAll(tasks);

            for(MaxComputation task : tasks) {
                retriever.write(task.location, task.get());
            }
        }
    }

    /**
     * Max computation task. It illustrates our example well
     * but in real-life this would be too little
     * of a workload to deserve parallel execution.
     */
    protected class MaxComputation extends RecursiveTask<Double> {

        /** serialVersionUID */
        private static final long serialVersionUID = -5843737025175189495L;

        final ILocation location;
        final Object[] numbers;

        public MaxComputation(ILocation location, Object[] numbers) {
            this.location = location;
            this.numbers = numbers;
        }

        @Override
        protected Double compute() {
            try {
                return doEvaluation(location, numbers);
            } catch (QuartetException e) {
                completeExceptionally(e);
                return null;
            }
        }
    }

} 
```

# google-drive-api - 在 Google Drive SDK 中如何复制文件夹？

> ID：12605318
> 
> 赞同：8
> 
> 时间：2012-09-26T15:32:45.530
> 
> 标签：google-drive-api

很简单的问题。如何使用 Google Drive API 复制文件夹？

看起来文件/复制 API 端点不适用于文件夹（尽管文档中没有明确指出此限制）。

当然，我可以在文件中添加第二个父级，但显然这不是一个解决方案，因为大多数情况下，文件夹副本是在不修改原始文件的情况下对其进行处理。

那么我该怎么做呢？任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T03:58:59.963

“复制”对文件夹没有多大意义。复制的目的是创建与第一个具有相同媒体内容的第二个文件。由于文件夹没有媒体内容，因此“复制”实际上并不适用。

要回答这个问题，我们需要稍微了解一下您的用例。以 *nix 范例为例，“cp -R folder1 folder2”递归地复制所有文件。如果这是您的用例，您将需要手动递归树。如果您希望相同的文件出现在两个位置（即“ln -s folder1 folder2”），则可以通过添加第二个父级来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-01T01:02:02.573

我已经发布了一个 pypi 包来复制一个谷歌驱动器文件夹。它基本上实现了第一个答案中描述的递归行为

[https://pypi.org/project/googledrive-cloner/](https://pypi.org/project/googledrive-cloner/)

# primes - Project Euler 3 - 为什么这种方法有效？

> ID：12605320
> 
> 赞同：5
> 
> 时间：2012-09-26T15:32:47.373
> 
> 标签：primes, prime-factoring

13195 的质因数是 5、7、13 和 29。数字 600851475143 的最大质因数是多少？

我以自己的方式在 Project Euler 上解决了这个问题，速度很慢，然后我在某人的 github 帐户上找到了这个解决方案。我不知道为什么它有效。为什么去除了许多因子，等于一个索引？有什么见解吗？

```
def Euler3(n=600851475143):
    for i in range(2,100000):
        while n % i == 0:
            n //= i
            if n == 1 or n == i:
                return i 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T15:55:33.417

该函数通过查找其输入的连续因子来工作。它找到的第一个因素必然是素数。找到一个素因数后，将其从原始数中除掉，然后继续该过程。当我们将它们全部分开时（留下 1，或当前因子 (i)），我们已经得到了最后一个（最大的）。

让我们在这里添加一些跟踪代码：

```
def Euler3(n=600851475143):
    for i in range(2,100000):
        while n % i == 0:
            n //= i
            print("Yay, %d is a factor, now we should test %d" % (i, n))
            if n == 1 or n == i:
                return i

Euler3() 
```

这个的输出是：

```
$ python factor.py
Yay, 71 is a factor, now we should test 8462696833
Yay, 839 is a factor, now we should test 10086647
Yay, 1471 is a factor, now we should test 6857
Yay, 6857 is a factor, now we should test 1 
```

确实，对于一般的解决方案，范围的顶部应该是 n 的平方根，但是对于 python，调用`math.sqrt`返回一个浮点数，所以我认为原始程序员采取了偷懒的捷径。该解决方案通常不起作用，但对于 Euler 项目来说已经足够了。

但算法的其余部分是合理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T15:59:18.333

考虑它如何解决 n=20：

```
iteration i=2
  while true (20 % 2 == 0)
    n = n//2 = 20//2 = 10
    if (n == 1 or n == 2) false
  while true (10 % 2 == 0)
    n = n//2 = 10//2 = 5
    if (n == 1 or n == 2) false
  while false (5 % 2 == 0)
iteration i = 3
  while false (5 % 3 == 0)
iteration i = 4 
  while false (5 % 4 == 0)
iteration i = 5
  while true (5 % 5 == 0)
    n = n//5 = 5//5 = 1
    if (n == 1 or n == 5) true
      return i, which is 5, which is the largest prime factor of 20 
```

它只是删除因子，并且由于它已经删除了多个素因子（while 循环），因此 i 的许多值实际上只是浪费精力。唯一有机会在循环中做某事的 i 值是 i 的素值。n==i 测试涵盖了像 25 这样的数字是素数的平方的情况。范围似乎有限。它不会给出 2 * 的正确答案（100,000 之后的下一个最大素数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T17:41:56.907

没有人真正回答过你的问题。`for`循环`i`依次测试每个数字。当为时，`while`循环测试成功；在这种情况下，它会减少，然后通过与or比较来检查它是否完成。测试是一个（而不仅仅是），以防不止一次划分。`i``n``n``i``1``n``while``if``i``n`

虽然很聪明，但这不是通常编写*的通过试除法进行整数分解的方式。*`n`如果因子大于 100000 ，它也将不起作用。我在我的博客上有一个[解释。](http://programmingpraxis.com/essays)这是我的函数版本，它列出了所有的因素，`n`而不仅仅是最大的：

```
def factors(n):
    fs = []
    while n % 2 == 0:
        fs += [2]
        n /= 2
    if n == 1:
        return fs
    f = 3
    while f * f <= n:
        if n % f == 0:
            fs += [f]
            n /= f
        else:
            f += 2
    return fs + [n] 
```

此函数`2`单独处理，然后仅尝试*奇数*因子。它也没有对因子设置限制，而是在因子大于剩余的平方根时停止`n`，因为此时`n`必须是素数。因子按递增顺序插入，因此输出列表中的最后一个因子将是最大的，这就是您想要的。

# delphi - GlobalAlloc 导致我的 Delphi 应用程序挂起？

> ID：12605323
> 
> 赞同：2
> 
> 时间：2012-09-26T15:33:00.317
> 
> 标签：delphi, delphi-2010

我想使用我刚刚编写的以下函数将字符串值转换为全局内存句柄，反之亦然。

但是`StrToGlobalHandle()`导致我的测试程序挂起。所以`GlobalHandleToStr()`是不可测试的，我也想知道我的代码是否合乎逻辑。

```
function StrToGlobalHandle(const aText: string): HGLOBAL;
var
  ptr: PChar;
begin
  Result := 0;
  if aText <> '' then
  begin
    Result := GlobalAlloc(GMEM_MOVEABLE or GMEM_ZEROINIT, length(aText) + 1);
    if Result <> 0 then
    begin
      ptr := GlobalLock(Result);
      if Assigned(ptr) then
      begin
        StrCopy(ptr, PChar(aText));
        GlobalUnlock(Result);
      end
    end;
  end;
end;

function GlobalHandleToStr(const aHandle: HGLOBAL): string;
var
  ptrSrc: PChar;
begin
  ptrSrc := GlobalLock(aHandle);
  if Assigned(ptrSrc) then
  begin
    SetLength(Result, Length(ptrSrc));
    StrCopy(PChar(Result), ptrSrc);
    GlobalUnlock(aHandle);
  end
end; 
```

测试代码：

```
procedure TForm3.Button1Click(Sender: TObject);
var
  h: HGLOBAL;
  s: string;
  s2: string;
begin
  s := 'this is a test string';
  h := StrToGlobalHandle(s);
  s2 := GlobalHandleToStr(h);
  ShowMessage(s2);
  GlobalFree(h);
end; 
```

顺便说一句，我想使用这两个函数作为助手在程序之间发送字符串值 - 将全局句柄从进程 A 发送到进程 B，进程 B 使用`GlobalHandleToStr()`. BTW 2，我知道 WM_COPY 和其他 IPC 方法，这些方法不适合我的情况。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T15:40:18.580

Delphi 2010 中的字符串是 unicode，因此您没有分配正确的缓冲区大小。

替换这一行

```
Result := GlobalAlloc(GMEM_MOVEABLE or GMEM_ZEROINIT, length(aText) + 1); 
```

有了这个

```
Result := GlobalAlloc(GMEM_MOVEABLE or GMEM_ZEROINIT, (length(aText) + 1)* SizeOf(Char)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:00:01.293

如果您的程序在您调用 时挂起`GlobalAlloc`，那么您可能在程序的早期有**堆损坏**。这会导致未定义的行为；该函数可能会检测到问题并返回错误，它可能会使您的程序崩溃，它可能会默默地破坏您的更多内存，它可能会挂起，或者它可能会做任何其他事情。

该堆损坏*可能*来自先前的调用，`StrToGlobalHandle`因为您的`StrCopy`调用写入超出了分配内存的末尾。您正在分配字节，但该`Length`函数返回字符串中的*字符*数。这仅在字符为一个字节宽时才有效，而 Delphi 2009 并非如此。乘以`SizeOf(Char)`得到字节数：

```
Result := GlobalAlloc(GMEM_MOVEABLE or GMEM_ZEROINIT, SizeOf(Char) * (Length(aText) + 1)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T15:55:03.913

您不能使用`GlobalAlloc`- 它仅在 16 位 Windows 中工作的程序之间发送数据。请改用内存映射文件。

# c++ - 错误消息：“value_type”：不是

> ID：12605324
> 
> 赞同：6
> 
> 时间：2012-09-26T15:33:02.247
> 
> 标签：c++, stl

我不明白这个神秘的错误信息，但我得到了 30 个

```
`'value_type' : is not a member of 'TextFileLineBuffer'` 
```

当我在 VC++ 6 中编译以下代码`//***`且未注释行时。

当然，如果我把它注释掉，它编译得很好。

我想我在过去的两个小时里尝试了各种尝试都是徒劳的。任何提示将不胜感激。

```
#include <list>
#include <string>
#include <iostream>
#include <fstream>
#include <algorithm>
#include <iterator>

//wrapper for a string line
struct TextLine
{
    std::string m_sLineContent;
    operator std::string const& () const { return m_sLineContent; }
    friend std::istream& operator>>(std::istream& stream, TextLine& line)
    {
        return std::getline(stream, line.m_sLineContent);
    }
};

//this is a version of fixed size of string queue for easy text file reading
class TextFileLineBuffer
{
    public:
        TextFileLineBuffer(size_t lc, const char* fileName)
            : m_iLineCount(lc), m_sFileName(fileName)
        {
            std::ifstream   file(fileName);
            //***   std::copy(std::istream_iterator<TextLine>(file), 
            //***           std::istream_iterator<TextLine>(),
            //***           std::back_inserter(*this));
        }
        void push_back(std::string const& line)
        {
            m_sBuffer.insert(m_sBuffer.end(),line);
            if (m_sBuffer.size() > m_iLineCount)
            {
                m_sBuffer.erase(m_sBuffer.begin());
            }
        }
        const char* c_str() const
        {
            std::string returnValue("");
            for (const_iterator it = begin(); it != end(); ++it) 
            {
                returnValue = returnValue + *it;
            }
            return returnValue.c_str();
        }
        typedef std::list<std::string>          Container;
        typedef Container::const_iterator       const_iterator;
        typedef Container::const_reference      const_reference;

        const_iterator begin()  const       { return m_sBuffer.begin(); }
        const_iterator end()    const       { return m_sBuffer.end();}

    private:
        size_t                      m_iLineCount;
        std::list<std::string>      m_sBuffer;
        std::string                 m_sFileName;
}; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:46:12.693

根据标准（**24.5.2.1 [back.insert.iterator]**），`back_insert_iterator`要求您的`Container`类型包含`value_type`typedef，该类型应将（常量引用或右值引用）参数的基本类型命名为`push_back`：

```
class TextFileLineBuffer
{
public:
    // ...
    typedef std::string value_type; 
```

为了与 C++98 兼容，您还应该在旧 GCC 上定义`const_reference`每个[std::back_inserter 需要 const_reference 。为什么？](https://stackoverflow.com/questions/8081072/stdback-inserter-needs-const-reference-on-older-gcc-why?lq=1)：

```
 typedef const std::string &const_reference; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-26T20:29:55.957

我在这里找到了自己的方式，因为我试图这样做：

```
std::vector<Type_A, Type_B> someVec; 
```

当我想这样做时：

```
std::vector<std::pair<Type_A, Type_B>> someVec; 
```

如果您的情况类似，请记住，stl 容器的第二种模板化类型指定了内存分配器——它有特定的要求。其中之一是它定义了`value_type`.

# php - 使用 fopen comman 时如何在 php 上自定义文本名称

> ID：12605327
> 
> 赞同：0
> 
> 时间：2012-09-26T15:33:10.847
> 
> 标签：php, text, alert

如何自定义 fopen 上输出的文本名称？我尝试使用

```
$file = $Aname .'.txt'; 
```

但它不会正确输出，并且在创建文本文件后返回页面并提示用户创建文件。

```
<?php
$saving = $_REQUEST['saving'];
if ($saving == 1){ 
$Aname = $_POST['Aname'];

$name = $_POST['name']; 
$last = $_POST['last']; 
$mob = $_POST['mob']; 
$ext = $_POST['ext']; 
$email = $_POST['email']; 
$add = $_POST['add']; 
$com = $_POST['com']; 
$day = $_POST['day']; 
$text = $_POST['text'];
$date = date("M j, Y "); 

$data = "Date Sent: {$date}\n\nName: {$name} {$last}\nPhone : {$mob} ext: {$ext}\nCompany: {$com}\nAddress : {$add}\nE-mail : {$email}\nDay : {$day}\n\nNote :

\n{$text}\n---------------------------------------\n";

$file = $Aname.'.txt';

$fp = fopen($file, "a") or die("Couldn't open $file for writing!");
fwrite($fp, $data) or die("Couldn't write values to file!"); 

fclose($fp); 
}
?> 
```

并且也不是将用户重新定位到另一个页面来给出这个错误

```
die("Couldn't write values to file!"); 
```

只需在页面上弹出警报。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:11:33.370

确保它`$_POST['Aname']`实际上已填充（也许它来自`$_GET`？）。

请注意，您在这里通过使用未经清理的数据写入磁盘打开了一个相当大的安全问题。人们可能会用 PHP 代码覆盖磁盘上的任何文件，然后执行该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:43:27.960

`$filename`您应该为 fopen的参数使用绝对路径，因此请替换以下行：

```
$file = $Aname.'.txt'; 
```

对于这个：

```
$file = dirname($_SERVER["SCRIPT_FILENAME"]) . '/' . $Aname.'.txt'; 
```

以上假设您的 Web 服务器运行 linux，如果它是 Windows 的，您必须转义任何反斜杠，例如`fopen("c:\\my\\document_root\\myfile.txt", "a");`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:37:01.240

尝试使用 file_put_contents()。它取代了整个 fopen、fwrite、fclose 的头痛。 [http://php.net/manual/en/function.file-put-contents.php](http://php.net/manual/en/function.file-put-contents.php)

```
<?php
$saving = $_REQUEST['saving'];
if ($saving == 1){ 
$Aname = $_POST['Aname'];

$name = $_POST['name']; 
$last = $_POST['last']; 
$mob = $_POST['mob']; 
$ext = $_POST['ext']; 
$email = $_POST['email']; 
$add = $_POST['add']; 
$com = $_POST['com']; 
$day = $_POST['day']; 
$text = $_POST['text'];
$date = date("M j, Y "); 

$data = "Date Sent: {$date}\n\nName: {$name} {$last}\nPhone : {$mob} ext: {$ext}\nCompany: {$com}\nAddress : {$add}\nE-mail : {$email}\nDay : {$day}\n\nNote :

\n{$text}\n---------------------------------------\n";

$file = $Aname.'.txt';

file_put_contents ( $file, $data ); 
}
?> 
```

# wcf - 实施 WIF ActAs 场景：传出消息的身份检查失败

> ID：12605336
> 
> 赞同：0
> 
> 时间：2012-09-26T15:33:45.237
> 
> 标签：wcf, x509certificate, wif, delegation, federation

因此，我试图从网站使用 WCF 服务，并将网站从 STS 获得的 IClaimsIdentity 传递给该服务。

当我尝试通过 ActAs 通道调用服务方法时，我在客户端上收到以下错误（查看跟踪日志，它永远不会到达服务，并且 STS 正确发送所有令牌）：

> 传出消息的身份检查失败。预期的身份是'身份（ [http://schemas.xmlsoap.org/ws/2005/05/identity/right/possessproperty：http://schemas.xmlsoap.org/ws/2005/05/identity/claims/thumbprint](http://schemas.xmlsoap.org/ws/2005/05/identity/claims/thumbprint) )' 用于 'http://localhost/MyWCFHost/MyService.svc' 目标端点。

我有一个自定义的 IssuedTokenForCertificate 绑定，据我所见，所有证书都可以，它应该可以工作，但没有骰子。我很感激另一双眼睛看着我的配置并提供帮助：

使用网站配置：

```
 <system.serviceModel>
    <bindings>
      <customBinding>
        <binding name="CustomBinding_IMyService">
          <security defaultAlgorithmSuite="Default" authenticationMode="IssuedTokenForCertificate"
            requireDerivedKeys="true" includeTimestamp="true" messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
            requireSignatureConfirmation="true">
            <issuedTokenParameters tokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1">
              <additionalRequestParameters>
                <trust:SecondaryParameters xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">
                  <trust:TokenType xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1</trust:TokenType>
                  <trust:KeyType xmlns:trust="http://docs.oasis-open.org/ws-sx/ws-trust/200512">http://docs.oasis-open.org/ws-sx/ws-trust/200512/SymmetricKey</trust:KeyType>
                </trust:SecondaryParameters>
              </additionalRequestParameters>
              <issuer address="http://localhost/MyCompany.SecurityTokenService/ActAsIssuer.svc"
                binding="ws2007HttpBinding" bindingConfiguration="http://localhost/MyCompany.SecurityTokenService/ActAsIssuer.svc">
              </issuer>
              <issuerMetadata address="http://localhost/MyCompany.SecurityTokenService/ActAsIssuer.svc/mex" />
            </issuedTokenParameters>
            <localClientSettings detectReplays="true" />
            <localServiceSettings detectReplays="true" />
          </security>
          <textMessageEncoding />
          <httpTransport />
        </binding>
      </customBinding>
      <ws2007HttpBinding>
        <binding name="http://localhost/MyCompany.SecurityTokenService/ActAsIssuer.svc">
          <security>
            <message establishSecurityContext="false" />
          </security>
        </binding>
      </ws2007HttpBinding>
    </bindings>
    <client>
      <endpoint address="http://localhost/MyWCFHost/MyService.svc" binding="customBinding"
        bindingConfiguration="CustomBinding_IMyService" contract="MyService.IMyService"
        name="CustomBinding_IMyService">
        <identity>
          <!--<certificate encodedValue="AwAAAAEAAAAUAAAAV2ILlfzl9NIHEiGv1rUCSitq8I0gAAAAAQAAAP8BAAAwggH7MIIBaKADAgECAhBTTBmG1HyUkEDVFmVUxfDLMAkGBSsOAwIdBQAwFTETMBEGA1UEAxMKRXRhbmEgUm9vdDAeFw0xMjA5MjExMjE2MDRaFw0zOTEyMzEyMzU5NTlaMB8xHTAbBgNVBAMTFEV0YW5hIFNUUyBFbmNyeXB0aW9uMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQC0lbzr1b1aNiXGhwKMTO58QbLbbKoUtTRkA4egMlmip1Vm46BnscWAMvXA5kyzuqK6Cw/5bel15i0pZXR4kjByKbSr65V0/ODGrkUHaYb5vT8RzCczYcgzJmPGWawMYYJT8PXLXHkFmZZGXFZhiUBzyNMWh8YH16I/wFtUgmaBAQIDAQABo0owSDBGBgNVHQEEPzA9gBAV68U+Vhoc0Nu9qPJXfJSRoRcwFTETMBEGA1UEAxMKRXRhbmEgUm9vdIIQgnOTDbZVCaJFTK8PPAGynTAJBgUrDgMCHQUAA4GBACHLr32oqkFjKGN/fqk2VnsNNIs9niHQ4Q6UbJ252YWf4wFIz9Ho/+ZdFxC4tSHxa/IMH0kzYpRL5p61Zd8/QeryWCStqvoNPwyapaY3g0Pkm6dy6NJ82kX5eJxLjdJp8MVadPJs4VA7Smf+e9lMMoONAGP07AvzAVhtiYK2yMmH" />-->
          <certificateReference findValue="57620B95FCE5F4D2071221AFD6B5024A2B6AF08D" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" />
        </identity>
      </endpoint>
    </client>
  </system.serviceModel> 
```

WCF 服务配置：

```
 <system.serviceModel>
    <diagnostics>
      <messageLogging logMalformedMessages="true" logMessagesAtTransportLevel="true" />
    </diagnostics>
    <services>
      <service name="RPWCFApp.MyService" behaviorConfiguration="MyServiceBehaviour">
        <endpoint address="" binding="customBinding" bindingConfiguration="CustomBindingConfiguration_IssuedTokenOverTransport" contract="RPWCFApp.IMyService" />
        <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange" />
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior name="MyServiceBehaviour">
          <federatedServiceHostConfiguration />
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="false" />
          <serviceCredentials>
            <serviceCertificate findValue="81A5DB3796F48B00FAC37CE67D7D8CA43078B996" storeLocation="LocalMachine" storeName="My" x509FindType="FindByThumbprint" />
          </serviceCredentials>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
    <extensions>
      <behaviorExtensions>
        <add name="federatedServiceHostConfiguration" type="Microsoft.IdentityModel.Configuration.ConfigureServiceHostBehaviorExtensionElement, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" />
      </behaviorExtensions>
    </extensions>

    <bindings>
      <customBinding>
        <binding name="CustomBindingConfiguration_IssuedTokenOverTransport">
          <security authenticationMode="IssuedTokenForCertificate" messageSecurityVersion="WSSecurity11WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10">
            <issuedTokenParameters keyType="SymmetricKey" tokenType="http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1">
              <issuer address="http://localhost/MyCompany.SecurityTokenService/ActAsIssuer.svc" binding="ws2007HttpBinding" bindingConfiguration="IssuedTokenBinding" />
              <issuerMetadata address="http://localhost/MyCompany.SecurityTokenService/ActAsIssuer.svc/mex" />
            </issuedTokenParameters>
          </security>
          <textMessageEncoding />
          <httpTransport />
        </binding>
      </customBinding>
      <ws2007HttpBinding>
        <binding name="IssuedTokenBinding">
          <security mode="TransportWithMessageCredential">
            <message clientCredentialType="Windows" establishSecurityContext="false" />
          </security>
        </binding>
      </ws2007HttpBinding>
    </bindings>
  </system.serviceModel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T08:01:00.073

通过将服务配置中的绑定更改为 ws2007FederationHttpBinding 而不是 CustomBinding 并更新我的客户端服务参考来解决我的问题。

```
<bindings>
  <ws2007FederationHttpBinding>
    <binding name="serviceBinding" receiveTimeout="05:00:00" sendTimeout="05:00:00">
      <security mode="Message">
        <message>
          <issuerMetadata address="http://localhost/MyCompany.SecurityTokenService/ActAsIssuer.svc/mex"/>
        </message>
      </security>
    </binding>
  </ws2007FederationHttpBinding>
</bindings> 
```

然后因为我使用的是自签名证书，所以我必须在客户端配置中使用以下端点行为来更改 certificateValidationMode：

```
<behaviors>
  <endpointBehaviors>
    <behavior name="MyServiceBehavior" >
      <clientCredentials>
        <serviceCertificate>
          <authentication certificateValidationMode="PeerOrChainTrust"/>
        </serviceCertificate>
      </clientCredentials>
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

最后我只需要确保我的证书在受信任的人存储中，最后我在调用服务时得到正确的 IClaimsIdentity :)

希望这对那里的人有所帮助，因为它让我发疯了一段时间......

# java - java.sql.SQLException：列计数与 Java 和 MySQL 的第 1 行的值计数不匹配

> ID：12605339
> 
> 赞同：-1
> 
> 时间：2012-09-26T15:33:56.403
> 
> 标签：java, mysql, database, insert

您好我正在尝试在表格中插入下一个值。这个表有 32 个值，第一个是自动增量的，所以没有必要放它，但是当我执行它时，我有下一个错误：

```
java.sql.SQLException: Column count doesn't match value count at row 1
at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1074)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4074)
at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:4006)
at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2468)
at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2629)
at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2719)
at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:2155)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2450)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2371)
at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:2355)
at es.uniway.wscloud.WscloudImpl.sincronizarPedidos(WscloudImpl.java:1729)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.apache.axis.providers.java.RPCProvider.invokeMethod(RPCProvider.java:397)
at org.apache.axis.providers.java.RPCProvider.processMessage(RPCProvider.java:186)
at org.apache.axis.providers.java.JavaProvider.invoke(JavaProvider.java:323)
at org.apache.axis.strategies.InvocationStrategy.visit(InvocationStrategy.java:32)
at org.apache.axis.SimpleChain.doVisiting(SimpleChain.java:118)
at org.apache.axis.SimpleChain.invoke(SimpleChain.java:83)
at org.apache.axis.handlers.soap.SOAPService.invoke(SOAPService.java:454)
at org.apache.axis.server.AxisServer.invoke(AxisServer.java:281)
at org.apache.axis.transport.http.AxisServlet.doPost(AxisServlet.java:699)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at org.apache.axis.transport.http.AxisServletBase.service(AxisServletBase.java:327)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:722) 
```

这是查询：

```
SQL="INSERT INTO servidores_virtuales (id_pedido,nombre_servidor,duracion_contrato,cpu_cant,ram_cant,"+
                "hdd_cant,hdd_unidad,sv_pvp,cpu_pvp,ram_pvp,hdd_pvp,sv_pvp_dist,sv_pvp_dist,cpu_pvp_dist,ram_pvp_dist,hdd_pvp_dist,"+
                "ip_pvp,ip_pvp_dist,ip_polled_pvp,ip_polled_pvp_dist,ip_custom_pvp,ip_custom_pvp_dist,data_center,cluster,plantilla,"+
                "estado_aprobacion,f_aprobacion,f_provision,es_actualizacion,f_actualizacion,disco_almacenamiento,id_sv_ccis)VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";

                int keyServidorV=0;
                System.out.println("Key de pedido es:"+key);
                this.pstm = this.conexion.prepareStatement(SQL,PreparedStatement.RETURN_GENERATED_KEYS);

                this.pstm.setInt(1, key); //Last insert id de pedido
                this.pstm.setString(2, pedido.getDatos_SV()[i].getNombre_servidor());
                this.pstm.setString(3, pedido.getDatos_SV()[i].getDuracion_contrato());
                this.pstm.setInt(4, pedido.getDatos_SV()[i].getCpu_cant());
                this.pstm.setString(5, pedido.getDatos_SV()[i].getRam_cant());
                this.pstm.setString(6, pedido.getDatos_SV()[i].getHdd_cant());
                this.pstm.setString(7, pedido.getDatos_SV()[i].getHdd_unidad());
                this.pstm.setDouble(8, pedido.getDatos_SV()[i].getSv_pvp());
                this.pstm.setDouble(9, pedido.getDatos_SV()[i].getCpu_pvp());
                this.pstm.setDouble(10, pedido.getDatos_SV()[i].getRam_pvp());
                this.pstm.setDouble(11, pedido.getDatos_SV()[i].getHdd_pvp());
                this.pstm.setDouble(12, pedido.getDatos_SV()[i].getSv_pvp_dist());
                this.pstm.setDouble(13, pedido.getDatos_SV()[i].getCpu_pvp_dist());
                this.pstm.setDouble(14, pedido.getDatos_SV()[i].getRam_pvp_dist());
                this.pstm.setDouble(15, pedido.getDatos_SV()[i].getHdd_pvp_dist());
                this.pstm.setDouble(16, pedido.getDatos_SV()[i].getIp_pvp());
                this.pstm.setDouble(17, pedido.getDatos_SV()[i].getIp_pvp_dist());
                this.pstm.setDouble(18, pedido.getDatos_SV()[i].getIp_polled_pvp());
                this.pstm.setDouble(19, pedido.getDatos_SV()[i].getIp_polled_pvp_dist());
                this.pstm.setDouble(20, pedido.getDatos_SV()[i].getIp_custom_pvp());
                this.pstm.setDouble(21, pedido.getDatos_SV()[i].getIp_custom_pvp_dist());
                this.pstm.setString(22, pedido.getDatos_SV()[i].getData_center());
                this.pstm.setString(23, pedido.getDatos_SV()[i].getCluster());
                this.pstm.setString(24, pedido.getDatos_SV()[i].getPlantilla());
                this.pstm.setInt(25, pedido.getDatos_SV()[i].getEstado_aprobacion());
                java.sql.Date f_aprobacionAux = new java.sql.Date(pedido.getDatos_SV()[i].getF_aprobacion().getTime());  
                this.pstm.setDate(26, f_aprobacionAux);
                java.sql.Date f_provisionAux = new java.sql.Date(pedido.getDatos_SV()[i].getF_provision().getTime());
                this.pstm.setDate(27, f_provisionAux);
                this.pstm.setBoolean(28, pedido.getDatos_SV()[i].isEs_actualizacion());
                if(pedido.getDatos_SV()[i].getF_actualizacion()!=null){
                    java.sql.Date f_actualizacionAux =new java.sql.Date(pedido.getDatos_SV()[i].getF_actualizacion().getTime());
                    this.pstm.setDate(29, f_actualizacionAux);  
                }else{

                  this.pstm.setDate(29, null);

                }
                this.pstm.setString(30, pedido.getDatos_SV()[i].getDisco_almacenamiento());
                this.pstm.setInt(31,pedido.getDatos_SV()[i].getId_servidor_virtual_ccis());

                switch(pedido.getDatos_SV()[i].getEstado_aprobacion()){

                     case 0:{
                         switch(estado_pedido){
                             case 0:{
                                 estado_pedido =1;
                                 break;
                             }
                             case 1:{
                                 estado_pedido =1;
                                 break;
                             }
                             case 2:{
                                 estado_pedido = 1;
                                 break;
                             }

                         }
                         break;
                     }
                     case 1:{
                         switch(estado_pedido){

                            case 0:{
                                estado_pedido = 2;
                                break;
                            }
                            case 1:{
                                estado_pedido =1;
                                break;
                            }
                            case 2:{
                                estado_pedido=2;
                                break;
                            }
                         }
                         break;
                     }

                }
                if(estado_pedido==2){
                    if(f_aprobacion==null){
                        f_aprobacion = pedido.getDatos_SV()[i].getF_aprobacion();
                    }else{
                        if (f_aprobacion.compareTo(pedido.getDatos_SV()[i].getF_aprobacion())<0){

                            f_aprobacion = pedido.getDatos_SV()[i].getF_aprobacion();
                        }else{
                            f_aprobacion = f_aprobacion;
                        }

                    }

                    if(pedido.getDatos_SV()[i].getF_provision()==null){
                        pedido_provisionado = false;
                    }
                    if(f_provision == null){
                        pedido.getDatos_SV()[i].getF_provision();
                    }else{
                        if(pedido.getDatos_SV()[i].getF_provision().compareTo(f_provision)>0){
                            f_provision=pedido.getDatos_SV()[i].getF_provision();
                        }else{
                            f_provision=f_provision;
                        }
                    }

                }

                String [] duracion = pedido.getDatos_SV()[i].getDuracion_contrato().split(" ");
                int cant = Integer.parseInt(duracion[0].trim());
                String unidad = duracion[1].trim().toUpperCase();

                if(unidad_duracion_contrato == ""){
                    unidad_duracion_contrato = unidad;
                    duracion_contrato = cant;
                }else{
                    if (unidad_duracion_contrato != unidad || duracion_contrato != cant){
                        throw new Exception ("Pedido con diferentes duraciones de contrato: "+pedido.getId_pedido());
                    }
                }

                int ejecutadoServiVirtual =  this.pstm.executeUpdate();

                if(ejecutadoServiVirtual==0){   
                   try {
                    throw new Exception("Error al grabar Pedidos");
                } catch (Exception e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } 
```

拜托，你能帮我解决这个问题吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:49:21.747

您的 SQL 查询列出了 32 列（“id_pedido”等），但只有 31 个值（“？”）。列列表必须与值列表匹配。如果您不打算为列指定值，则不要将该列包含在列列表中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:41:22.753

你少了一个'？在价值观中。算对了。你有 32 列，但你只给了 31 '？如果第一个字段是自动增量，则忽略自动增量字段

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:41:36.277

如果为自动增量字段插入空值，则 mysql 将生成增量值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:49:28.683

您的列 ID 应该与您的 '?' 匹配。您可以从列 ID 列表中删除“id_pedido”列 ID，这应该可以修复它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-02-10T04:04:17.080

通常，当修改的值的顺序与实际存储在表中的顺序不同时会发生此异常。检查列索引。

# android - 每个活动的标签栏

> ID：12605344
> 
> 赞同：1
> 
> 时间：2012-09-26T15:34:13.873
> 
> 标签：android, android-tabactivity

我有一个显示 5 个标签的标签栏。我希望标签栏出现在我的应用程序中的每个活动上。唯一显示标签栏的活动是标签中的 5 个活动。我正在使用 TabActivity，我知道它已被弃用，但是除了这 5 个活动之外，我有什么办法可以让它在任何地方工作吗？我需要一个相当快的解决方案，并且不会真正影响我的其他代码。

这是标签栏活动

```
package com.appname;

import android.app.TabActivity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.widget.TabHost;
import android.widget.TabHost.OnTabChangeListener;
import android.widget.TabWidget;

import com.readystatesoftware.viewbadger.BadgeView;

@SuppressWarnings("deprecation")
public class TabController extends TabActivity {  
   /** Called when the activity is first created. */ 
   TabHost tabHost; 
   SharedPreferences prefs;
   public static BadgeView badgeTab;
       @Override  
       public void onCreate(Bundle savedInstanceState) {  
            super.onCreate(savedInstanceState);  
            setContentView(R.layout.main);    

            tabHost = getTabHost();
            TabHost.TabSpec spec;  
            Intent intent;              

        intent = new Intent().setClass(this, Item1.class);  
        spec = tabHost.newTabSpec("Item 1").setIndicator("Item 1",  getResources().getDrawable(R.drawable.item1))  
                  .setContent(intent); 
        tabHost.addTab(spec);               

        intent = new Intent().setClass(this, Item2.class);  
        spec = tabHost.newTabSpec("Item 2").setIndicator("Item 2", getResources().getDrawable(R.drawable.item2))  
                  .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Item3.class);  
        spec = tabHost.newTabSpec("Item 3").setIndicator("Item 3", getResources().getDrawable(R.drawable.item3))  
                  .setContent(intent);     
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Item4.class);  
        spec = tabHost.newTabSpec("Item 4").setIndicator("Item 4", getResources().getDrawable(R.drawable.item4))  
                  .setContent(intent);              
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, Item5.class);  
        spec = tabHost.newTabSpec("Item 5").setIndicator("Item 5", getResources().getDrawable(R.drawable.item5))  
                  .setContent(intent);      
        tabHost.addTab(spec);                  

        //Set background images
       for(int i=0;i<tabHost.getTabWidget().getChildCount();i++){                      

        tabHost.getTabWidget().getChildAt(i).setBackgroundResource(R.drawable.tabbackground); //unselected
       }
       tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundResource(R.drawable.selectedtab); // selected

        tabHost.setOnTabChangedListener(new OnTabChangeListener(){
        public void onTabChanged(String tabId) {
            for(int i=0;i<tabHost.getTabWidget().getChildCount();i++)
            {
                tabHost.getTabWidget().getChildAt(i).setBackgroundResource(R.drawable.tabbackground); //unselected
            }
            tabHost.getTabWidget().getChildAt(tabHost.getCurrentTab()).setBackgroundResource(R.drawable.selectedtab); // selected
        }
    });

    TabWidget tabs = (TabWidget) findViewById(android.R.id.tabs);               
    badgeTab = new BadgeView(this, tabs, 2);
    badgeTab.setBadgePosition(2);
    if(NotificationService.messageCount <= 0){
        badgeTab.hide();
    }
    else{                                                                                                               
        badgeTab.setText(String.valueOf(NotificationService.messageCount));
        badgeTab.show();
    }

    Intent tabIntent = this.getIntent();
    if (tabIntent != null && tabIntent.getExtras() != null) {
        if(tabIntent.getExtras().containsKey("ID_KEY")){
            int id_Key = this.getIntent().getExtras().getInt("ID_KEY");

            if (id_Key > 0) {
                tabHost.setCurrentTab(2);
            }
        }
    }           

} 
```

}

# ios - coreplot：显示新数据

> ID：12605348
> 
> 赞同：0
> 
> 时间：2012-09-26T15:34:30.220
> 
> 标签：ios, xcode, core-plot

可能这很容易，但我找不到：我在变量“数据”中有一些数据。初始化散点图后一切正常。然后“数据”的数据发生变化。我现在该怎么办。旧解决方案：发布情节并创建一个新情节。它很正常，但这并不好。

我尝试什么：

```
 [self.scatterPlot setGraphData:data]; 
```

什么都没发生。因此，我认为我还需要一个小步骤，比如“重新加载”或“更新”，但我找不到任何这样的可能性。想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:05:18.047

找到了解决方案。

缺少的行是：

```
 [[self.ScatterPlot graph] reloadData]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:37:51.677

```
[[self.scatterPlot] setNeedsDisplay]; 
```

如果你在里面画出你的情节`drawRect:`就可以了。

# sql - mdx datediff 错误

> ID：12605349
> 
> 赞同：1
> 
> 时间：2012-09-26T15:34:31.070
> 
> 标签：sql, ssas, mdx, datediff

```
select measures.name on 0,
datediff("d", [Fecha].[Date].currentmember.member_value, [Dim Date].[Date].currentmember.member_value) on 1
from cube 
```

> 错误：托管存储过程 datediff 的执行失败，出现以下错误：调用的目标已引发异常。参数“Date1”无法转换为“日期”类型

在 mdx 中做 datediff 有什么要求吗？在维度中，这些成员被定义为日期时间，不确定这是否会影响结果......

更新：我通过在数据源视图和多维数据集中进行计算解决了这个问题，我添加了一个度量，我可以在 MDX 中使用它来创建我需要的指标。当然这都是使用 SSAS 来测试结果和 SSDT 来创建成员。我希望这种方法可以帮助很多人，即使我不知道这是否是最好的情况。快乐的 MDX ;)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T19:05:35.087

默认情况下，轴将显示的不是 member_value，而是成员名称，它始终是一个字符串。Member_Value 是一种度量。

```
With Member MyDateDiff as
  datediff("d", [Fecha].[Date].currentmember.member_value, [Dim Date].[Date].currentmember.member_value)
Select 
  (Measures.MyDateDiff, Measures.Name) on 0
  (Fecha.Date.Members, [Dim Date].[Date].Members) on 1
From cube 
```

**编辑**

我对此也还是新手，但是在您发表评论之后，我想我应该详细说明我为获得类似查询而经历的过程。

首先，确保你得到你认为的数据。将那些 Member_Value 度量放入 Columns 维度：

```
With 
  Member FechaDate as
      [Fecha].[Date].currentmember.member_value
  Member MyDate as
      [Dim Date].[Date].currentmember.member_value
Select 
      (Measures.FechaDate, Measures.MyDate) on 0
      (Fecha.Date.Members, [Dim Date].[Date].Members) on 1
From cube 
```

你得到日期值了吗？如果是，试试你的 datediff 函数。如果不是，请检查尺寸定义。发现您的一个属性的 ValueColumn 被设置为键字段而不是日期值字段或类似的东西，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T08:12:28.407

您可能需要两个步骤，但日期添加方法应该没问题。Bill 的 Member 方法很好，但它以字符串的形式返回，而不是日期对象。如果格式正确，您应该能够：

```
Member MyDate as
DATEDADD("d", 1, VBAMDX!CDate([Dim Date].[Date].currentmember.member_value)) 
```

根据您的日期字符串最终格式化的方式，您可能需要做更多的工作。

# php - 在 Facebook 应用程序中创建点赞按钮的文档

> ID：12605353
> 
> 赞同：0
> 
> 时间：2012-09-26T15:34:47.883
> 
> 标签：php, facebook, facebook-graph-api

我试图弄清楚哪些 facebook 文档与我想做的事情相关。

我想创建一个我理解的 facebook 应用程序，它就像一个指向我的 Web 服务器的美化 iframe，它将只提供 2 个 html 页面。在我的一个页面上，我想创建一个看起来像一辆橙色大赛车的链接或按钮。当用户点击赛车时，它会触发“facebook like event”，然后将用户重定向到我的网络服务器上的第二页。现在，我不知道如何创建橙色赛车按钮。

我已经设置了 facebook 应用程序，它可以正确读取我服务器上的网页。我正在使用 PHP。

所以我的问题是以下任何一个：

a) 我应该阅读 facebook 文档的哪一页来学习如何做到这一点

b）有人知道我可以使用的任何示例代码吗？

**过去，我必须使用 oauth 让用户注册我的应用并登录，然后他们才能对我的网络应用执行任何操作。但这一次，我的网络应用程序是一个 FACEBOOK 应用程序，所以我希望我不必执行任何 oauth 过程。这就是为什么我在 facebook 文档中感到迷失……我不确定哪些部分与我的 facebook 应用程序的橙色汽车按钮特别相关，哪些不是。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:47:44.387

> 但这一次，我的网络应用程序是一个 FACEBOOK 应用程序，所以我希望我不必执行任何 oauth 过程。

你已经错了。您不会获得有关特定用户的任何信息，除非您先让他们连接到您的应用程序。

> 现在，我不知道如何创建橙色赛车按钮。

使用普通的 Like 按钮插件，你几乎无法改变它的外观。（根据 Facebook 的政策，你是不允许这样做的。）

因此，拥有一个您自己选择的触发点赞按钮的唯一可行选择是使用[Open Graph 内置的点赞操作](https://developers.facebook.com/docs/opengraph/actions/builtin/likes/)。

JOHN SAYS - 我用另一个问题跟进了这个问题 - stackoverflow.com/questions/12607458/like-action-for-facebook 有这个问题的部分答案

# maven - 在 Maven 中使用父模块共享代码和配置

> ID：12605356
> 
> 赞同：4
> 
> 时间：2012-09-26T15:34:50.170
> 
> 标签：maven, inheritance, multi-module

在我的项目中，我有两个模块`(A,B)`依赖于 common module `C`。我想`A,B`分享一些常见的配置，例如存储库配置，插件配置等。为了实现这一点，`C`制作父pom并从中`A,B` *继承*（不需要聚合，所以`C`不引用`A,B`）

但是，`C`它本身包含一些 java 代码以及单元测试。现在，如果我在`mvn test`里面运行，则`C`不会执行任何操作。假设，`pom`-packaged 模块不应包含任何代码。

上述配置是否存在严重缺陷？即使*已经存在，*是否还应该引入另一种*常见的*pom ？

 ** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:47:41.007

Maven 项目中非常典型的模式是拥有一个名为“parent”的模块，它包含您常见的 Maven 特定配置、配置文件、属性、依赖版本等。这就是 Maven Way (TM)。

该结构如下所示：

```
|-- parent
|-- common
|-- module-a
|-- module-b 
```

因此，common、module-a 和 module-b 都依赖于 parent，而 module-a 和 module-b 依赖于 common。

看到这个优秀的资源： http: [//www.sonatype.com/books/mvnex-book/reference/multimodule-web-spring.html](http://www.sonatype.com/books/mvnex-book/reference/multimodule-web-spring.html)

请注意，就目录结构而言，“父”可以是其子模块的兄弟。不要求目录结构层次与模块的层次结构相匹配。*

# javascript - 验证从 WebApp 发送到 Web Service 的数据的有效性

> ID：12605366
> 
> 赞同：0
> 
> 时间：2012-09-26T15:35:28.610
> 
> 标签：javascript, security, web-applications

我正在构建一个 WebApp，它通过 Web 服务连接到我的服务器。使用 webapp 的用户（没有登录）可以将他们的分数发送到服务器。

代码大部分是用 javscript 编写的，所以任何人都可以阅读。

我知道没有 100% 保证这样做的方法，我只是在寻找如何让用户尽可能难发送虚假分数的想法。

想法？10倍！

***编辑***

服务器端 Web 服务是托管在 IIS 上的 asmx (.net) Web 服务。我可以根据需要修改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:56:52.517

我想说最好的办法是有一个 web 服务调用，在服务器端生成一个 guid，然后传回。这将成为您的会话令牌。它存储在数据库中或服务器上的缓存中

每个后续调用都需要将令牌传递回服务器，服务器会验证令牌。如果他们传递了错误的令牌，您就不会更新。

这只会确保调用来自正确的进程。他们将无法通过一个电话来欺骗条目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:07:22.460

对于一个交互点数有限的进程（你好像在谈论一个游戏？），你可以记录每个用户交互并回放它以检查它是否在服务器端产生了一定的分数（或者是实时的）或稍后出现可疑分数）。

否则（这对于有太多交互点的实时动作游戏来说通常是不切实际的），你无能为力。您可以让游戏对其提交的信息进行数字签名……但鉴于您向客户端提供了包括签名密钥在内的完整代码，攻击者仍然很容易获得密钥并签署无效分数。

在这一点上，你让自己陷入了一场混淆军备竞赛——你能在多大程度上让客户端代码不可读且难以解开，以防止攻击者获取密钥？您永远无法赢得这场比赛，只能阻止临时攻击者。最终，您必须保护整个客户端进程不被更改，以阻止所有其他形式的作弊（例如，使用 Firebug 更改分数或生命等变量）。

# c++ - 删除在不同函数中动态分配的对象时崩溃

> ID：12605367
> 
> 赞同：-1
> 
> 时间：2012-09-26T15:35:28.213
> 
> 标签：c++, new-operator, delete-operator, heap-corruption

我写了一个简单的程序：

```
#include<iostream>
#include<list>
using namespace std;
list<int>& func();

int main(){
    list<int> a = func();
    delete &a;
    std::cout<<"Here\n";
}

list<int>& func(){
    list<int>* ptr = new list<int>;
    return *ptr;
} 
```

该程序从不打印`Here`到 cout 流....

简直崩溃了。。

我找不到原因。。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T15:38:56.917

我假设你的意思是：

```
list<int> a = func(); 
```

因为否则它甚至不会编译。无论如何，该变量`a`从未分配过`new`. 它是由返回引用的变量的副本`func`。

尽管您返回一个引用，但您复制它，因为`a`它本身不是一个引用。以下将起作用：

```
list<int>& a = func();
delete &a; 
```

崩溃：http: [//ideone.com/T3Iew](http://ideone.com/T3Iew)

作品：http: [//ideone.com/ONVKU](http://ideone.com/ONVKU)

无论如何，我希望这是出于教育目的（这很酷，因为您可以理解极端情况），但是对于生产代码，这将是非常**非常**错误的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:39:20.607

因为您将 a 声明为指针，而不是引用。更改`list<int>* a`为`list<int> & a`。

但是请不要尝试在生产代码中做那种事情。

# java - （JAVA）System.in .. 上的终止功能可能吗？

> ID：12605373
> 
> 赞同：1
> 
> 时间：2012-09-26T15:36:03.093
> 
> 标签：java

我目前正在用 JAVA 开发一个项目，我必须制作一个代理来与服务器交互。

每 50 毫秒，服务器将接收我输出到 System.out 的最后一件事，并通过 System.in 打印流向我发送一组新的行作为“状态”，以分析并将我的下一条消息发送到 System.out。

此外，如果服务器从我那里收到多个输出，它只考虑最近的一个。

..

至于我的问题：

我的程序最初构建了一棵树，然后分析每个叶节点以查看哪个是最佳的，然后等待下一个输入，但我可以递归地进行更深入的树搜索，这将使我的输出“更好”（一次又一次继续返回更好的结果）。

使用这一点，如果服务器接收到多个输出，它只需要最近的一个，我可以执行每个级别，打印我的结果并开始下一个级别。但是我的问题来了...

当我应该接收下一个输入时，我不能陷入一些复杂的算法中，因为我会错过它。所以我想知道当我通过 System.in 收到一些东西时是否有办法取消我正在做的任何其他事情，然后返回到函数的开头并使用新的输入集再次开始搜索（然后冲洗并重复..)

我希望这一切都有意义

谢谢大家

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:51:53.833

您在这里绝对需要多个线程（或多个进程）。

我假设你已经解决了接收输入`System.in`的问题，以及你的算法问题。下一步是将每一个都打包到一个[`Runnable`接口](http://docs.oracle.com/javase/6/docs/api/java/lang/Runnable.html)中，并为每一个传递一个对队列对象的引用。这将构建生产者-消费者关系。

每当您的收听`Runnable`者（生产者）收到一条消息时，它都需要将其放入您的队列中。在每个工作单元之后，您的算法（消费者）应该查看队列中的项目。如果它发现了什么，它应该像往常一样整合它。如果没有，它会继续它的工作。

Producer 和 Consumer 都需要在各自的线程中启动并允许并发运行。

# linq - 为什么 SELECT N + 1 没有外键和 LINQ？

> ID：12605374
> 
> 赞同：2
> 
> 时间：2012-09-26T15:36:10.363
> 
> 标签：linq, foreign-keys, select-n-plus-1

我有一个数据库，不幸的是没有真正的外键（我计划稍后添加，但现在不希望这样做以使迁移更容易）。我已经手动编写了映射到数据库以建立关系的域对象（按照本教程[http://www.codeproject.com/Articles/43025/A-LINQ-Tutorial-Mapping-Tables-to-Objects](http://www.codeproject.com/Articles/43025/A-LINQ-Tutorial-Mapping-Tables-to-Objects)），我'终于让代码正常运行了。但是，我注意到我现在遇到了 SELECT N + 1 问题。不是选择所有产品，而是使用以下 SQL 逐一选择它们：

```
SELECT [t0].[id] AS [ProductID], [t0].[Name], [t0].[info] AS [Description] 
FROM [products] AS [t0] 
WHERE [t0].[id] = @p0 
-- @p0: Input Int (Size = -1; Prec = 0; Scale = 0) [65] 
```

控制器：

```
 public ViewResult List(string category, int page = 1)
    {
        var cat = categoriesRepository.Categories.SelectMany(c => c.LocalizedCategories).Where(lc => lc.CountryID == 1).First(lc => lc.Name == category).Category;
        var productsToShow = cat.Products;
        var viewModel = new ProductsListViewModel
        {
            Products = productsToShow.Skip((page - 1) * PageSize).Take(PageSize).ToList(),
            PagingInfo = new PagingInfo
            {
                CurrentPage = page,
                ItemsPerPage = PageSize,
                TotalItems = productsToShow.Count()
            },
            CurrentCategory = cat
        };
        return View("List", viewModel);
    } 
```

因为我不确定我的 LINQ 表达式是否正确，所以我尝试使用它，但我仍然得到 N+1：

```
var cat = categoriesRepository.Categories.First(); 
```

域对象：

```
[Table(Name = "products")]
public class Product
{
    [Column(Name = "id", IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int ProductID { get; set; }

    [Column]
    public string Name { get; set; }

    [Column(Name = "info")]
    public string Description { get; set; }

    private EntitySet<ProductCategory> _productCategories = new EntitySet<ProductCategory>();
    [System.Data.Linq.Mapping.Association(Storage = "_productCategories", OtherKey = "productId", ThisKey = "ProductID")]
    private ICollection<ProductCategory> ProductCategories
    {
        get { return _productCategories; }
        set { _productCategories.Assign(value); }
    }

    public ICollection<Category> Categories
    {
        get { return (from pc in ProductCategories select pc.Category).ToList(); }
    }
}

[Table(Name = "products_menu")]
class ProductCategory
{
    [Column(IsPrimaryKey = true, Name = "products_id")]
    private int productId;
    private EntityRef<Product> _product = new EntityRef<Product>();
    [System.Data.Linq.Mapping.Association(Storage = "_product", ThisKey = "productId")]
    public Product Product
    {
        get { return _product.Entity; }
        set { _product.Entity = value; }
    }

    [Column(IsPrimaryKey = true, Name = "products_types_id")]
    private int categoryId;
    private EntityRef<Category> _category = new EntityRef<Category>();
    [System.Data.Linq.Mapping.Association(Storage = "_category", ThisKey = "categoryId")]
    public Category Category
    {
        get { return _category.Entity; }
        set { _category.Entity = value; }
    }
}

[Table(Name = "products_types")]
public class Category
{
    [Column(Name = "id", IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int CategoryID { get; set; }

    private EntitySet<ProductCategory> _productCategories = new EntitySet<ProductCategory>();
    [System.Data.Linq.Mapping.Association(Storage = "_productCategories", OtherKey = "categoryId", ThisKey = "CategoryID")]
    private ICollection<ProductCategory> ProductCategories
    {
        get { return _productCategories; }
        set { _productCategories.Assign(value); }
    }

    public ICollection<Product> Products
    {
        get { return (from pc in ProductCategories select pc.Product).ToList(); }
    }

    private EntitySet<LocalizedCategory> _LocalizedCategories = new EntitySet<LocalizedCategory>();
    [System.Data.Linq.Mapping.Association(Storage = "_LocalizedCategories", OtherKey = "CategoryID")]
    public ICollection<LocalizedCategory> LocalizedCategories
    {
        get { return _LocalizedCategories; }
        set { _LocalizedCategories.Assign(value); }
    }
}

[Table(Name = "products_types_localized")]
public class LocalizedCategory
{
    [Column(Name = "id", IsPrimaryKey = true, IsDbGenerated = true, AutoSync = AutoSync.OnInsert)]
    public int LocalizedCategoryID { get; set; }

    [Column(Name = "products_types_id")]
    private int CategoryID;
    private EntityRef<Category> _Category = new EntityRef<Category>();
    [System.Data.Linq.Mapping.Association(Storage = "_Category", ThisKey = "CategoryID")]
    public Category Category
    {
        get { return _Category.Entity; }
        set { _Category.Entity = value; }
    }

    [Column(Name = "country_id")]
    public int CountryID { get; set; }

    [Column]
    public string Name { get; set; }
} 
```

我试图从我的视图中注释掉所有内容，所以似乎没有任何影响。ViewModel 看起来很简单，所以不应该有任何东西。

在阅读本文时（[http://www.hookedonlinq.com/LinqToSQL5MinuteOVerview.ashx](http://www.hookedonlinq.com/LinqToSQL5MinuteOVerview.ashx)），我开始怀疑这可能是因为我在数据库中没有真正的外键，并且我可能需要在我的代码中使用手动连接。那是对的吗？我该怎么办？我应该从我的域模型中删除我的映射代码还是我需要添加/更改它的东西？

注意：我已经删除了一些我认为与使其更清晰地解决这个问题无关的部分代码。如果缺少某些东西，请告诉我。

`Products`编辑：格特·阿诺德从`Category`被查询中一一解决了所有问题。但是我仍然遇到`Products`页面上显示的所有内容都被一一查询的问题。

这发生在我的视图代码中：

列表.cshtml：

```
@model MaxFPS.WebUI.Models.ProductsListViewModel

@foreach(var product in Model.Products) {
    Html.RenderPartial("ProductSummary", product);
} 
```

ProductSummary.cshtml：

```
@model MaxFPS.Domain.Entities.Product

<div class="item">
    <h3>@Model.Name</h3>
    @Model.Description
    @if (Model.ProductSubs.Count == 1)
    {
        using(Html.BeginForm("AddToCart", "Cart")) {
            @Html.HiddenFor(x => x.ProductSubs.First().ProductSubID);
            @Html.Hidden("returnUrl", Request.Url.PathAndQuery);
            <input type="submit" value="+ Add to cart" />
        }
    }
    else
    {
        <p>TODO: länk eller dropdown för produkter med varianter</p>
    }
    <h4>@Model.LowestPrice.ToString("c")</h4>
</div> 
```

.First() 又是什么东西？我尝试了 .Take(1) 但无论如何我都无法选择 ID...

编辑：我尝试将一些代码添加到我的存储库以访问 DataContext 和此代码以创建 DataLoadOptions。但它仍然会为每个 ProductSub 生成一个查询。

```
var dlo = new System.Data.Linq.DataLoadOptions();
dlo.LoadWith<Product>(p => p.ProductSubs);
localizedCategoriesRepository.DataContext.LoadOptions = dlo;
var productsInCategory = localizedCategoriesRepository.LocalizedCategories.Where(lc => lc.CountryID == 1 && lc.Name == category)
    .Take(1)
    .SelectMany(lc => lc.Category.ProductCategories)
    .Select(pc => pc.Product); 
```

虽然生成的 SQL 略有不同，但查询的顺序也不同。

对于选择 ProductSub 的查询，DataLoadOptions 代码会生成名为`@x1`的变量，如果没有这些变量，则变量名为`@p0`。

```
SELECT [t0].[products_id] AS [ProductID], [t0].[id] AS [ProductSubID], [t0].[Name], [t0].[Price]
FROM [products_sub] AS [t0] 
WHERE [t0].[products_id] = @x1 
```

对我的查询顺序的差异表明 DataLoadOptions 实际上正在做某事，但不是我所期望的。我期望它产生这样的东西：

```
SELECT [t0].[products_id] AS [ProductID], [t0].[id] AS [ProductSubID], [t0].[Name], [t0].[Price]
FROM [products_sub] AS [t0] 
WHERE [t0].[products_id] = @x1 OR [t0].[products_id] = @x2 OR [t0].[products_id] = @x3 ... and so on 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T11:19:22.417

它是`First()`. 它触发它之前的部分的执行，而它之后的部分是通过在单独的查询中的延迟加载来获取的。棘手，难以发现。

这是您可以采取的措施来防止它并一次性获取所有内容：

```
LocalizedCategories.Where(lc => lc.CountryID == 1 && lc.Name == category)
    .Take(1)
    .SelectMany(lc => lc.Category.ProductCategories)
    .Select (pc => pc.Product) 
```

您应该`ProductCategories`公开该成员。我认为删除派生属性`Category.Products`和也更好`Product.Categories`，因为我认为只要它们的所有者具体化或寻址，它们就会触发查询。

# wpf - 引导程序放在哪里？

> ID：12605376
> 
> 赞同：0
> 
> 时间：2012-09-26T15:36:17.800
> 
> 标签：wpf, mvvm, prism

我想使用 MVVM 模式创建 PRISM 应用程序，但我不知道应该将引导程序放在哪里？

在模型、视图模型或视图中？

Bootstrapper 创建外壳（所以在视图中？）但它也注册容器等，所以它可能应该像单独的服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:52:47.420

引导程序是用于配置应用程序的可执行框架的一部分。

我建议将引导程序代码放在 Application 类的 OnStartup 事件处理程序中。

```
public partial class App : Application
{

    protected override void OnStartup(StartupEventArgs e)
    {
        SplashScreen splash = new SplashScreen("Resources\\mysplash.png");

        splash.Show(true);

        base.OnStartup(e);

        MyBootstrapper b = new MyBootstrapper();

        b.Run();
    }
} 
```

从技术上讲，它是视图层的一部分，恕我直言，但实际上是用来配置目录和执行启动操作的。

# java - 切换到 Java 7 时构建时间显着增加

> ID：12605377
> 
> 赞同：13
> 
> 时间：2012-09-26T15:36:22.993
> 
> 标签：java, performance, build

我们在构建过程中使用 Java，因为它用于通过 Ivy 解析/发布我们的依赖项。

没问题，我们也没有使用它 2 年，直到我们尝试将 Java 6 Update 26 升级到版本 7 Update 7，而在本地开发人员 PC (WinXP) 上构建现在需要 2 小时才能完成，而不是10分钟！！

PC 上没有其他任何变化，这使它成为我们关注的绝对目标。

有谁知道为什么 Java 版本 7 会产生这样的速度差异？

更新：构建过程是基于 NAnt 的，因此 Java.exe 从 NAnt 脚本调用，在命令 (DOS) 窗口中运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T18:04:41.883

我正在使用 JDK 7u7，我注意到通过调整一些[VM Options](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)可以获得更好的性能。

您可以尝试使用 G1GC 和 AgressiveOpts 来帮助缩短编译时间。

按照我在编辑器中使用的设置：

```
-Xss8m 
-Xmn256m 
-Xms512m 
-Xmx1024m 
-XX:PermSize=256m 
-XX:MaxPermSize=512m 
-XX:+UseG1GC 
-XX:+OptimizeStringConcat 
-XX:+UseStringCache 
-XX:+AggressiveOpts 
```

[您将在VM 选项](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)链接中找到每个选项的说明。

我希望它有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T01:49:08.577

首先，您是删除了 JDK6 还是保留了它？检查您的 JDK_HOME 和指定的任何其他位置，以确保您实际使用的是 JDK7。在 XP 控制台中键入`java -version`并确保它符合预期。（关闭/重新打开命令提示符以获取 Win GUI 中的更改。）

从未说明您正在运行的 XP 版本是 64 位还是 32 位。确保机器上有适当的 JDK 环境。（根据具体执行的内容，这可以产生明显的差异。此外，调试的最佳选择是保持与以前相同 - 减少变量。）

解决问题并缩小范围。升级后 Eclipse 安装是否执行较慢？（Eclipse 本身在 JVM 中运行。这是一个很好的基准。）当您测试 Eclipse 时，它​​是否指向正确的 JDK？尝试其他 Java 工具，看看是否存在性能差异。构建中不同控制点的断点和日志记录以及任何 Java 可执行文件都是您的朋友。

由于[Nant 是基于 .NET 的](http://nant.sourceforge.net/release/latest/help/introduction/fog0000000006.html)，您是否查看过实际启动的 Java 进程？你的 Ivy 发行版真的很旧吗？

综上所述，我很难相信这是一个 Java 问题，而不是 Windows 机器上的配置挑战。无论如何，您是否在任何其他机器上尝试过它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T02:12:51.563

根据我的经验，Java 7 在速度和兼容性方面是一个巨大的倒退。我发现它不仅编译速度慢，运行 JRE 也慢。

我在运行 Eclipse 时也遇到了重大问题（是的，我使用了更新 7）。

从我的角度来看，Java 7 中没有我需要的东西。我喜欢 ForkJoinPool，并且可以将它作为 Java 6 的附加库。

也许 Java 8 会更好。

# java - 自定义包名称 cxf-codegen-plugin

> ID：12605379
> 
> 赞同：19
> 
> 时间：2012-09-26T15:36:24.353
> 
> 标签：java, maven, wsdl, cxf, wsdl2java

想象一下这个场景。

我有一个名称空间为 a/b/c 的 wsdl 文件，它导入另一个名称空间为 m/n/o 的 wsdl。不幸的是，它们都定义了相同的 ComplexTypes XYZ。现在，当我使用 cxf-codegen-plugin 生成 Java 代码并使用自定义包名称“com.qsrs.uvw”时，最终生成的代码中只保留了一个类。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-09-26T16:27:51.970

如果你想根据命名空间生成包，这里是解决方案：

```
<plugin>
    <groupId>org.apache.cxf</groupId>
    <artifactId>cxf-codegen-plugin</artifactId>
    <version>2.6.0</version>
    <executions>
        <execution>
            <id>generate-sources</id>
            <phase>generate-sources</phase>
            <configuration>
                <sourceRoot>${basedir}/target/generated/src/main/java</sourceRoot>
                <wsdlOptions>
                    <wsdlOption>
                        <wsdl>yourWsdl.wsld</wsdl>
                        <extraargs>
                            <extraarg>-client</extraarg>
                            <extraarg>-verbose</extraarg>
                            <extraarg>-p</extraarg>
                            <extraarg>http://your.namespace/services/=your.package</extraarg>
                            <extraarg>-p</extraarg>
                            <extraarg>http://your.namespace2/services2/=your.package2</extraarg>
                        </extraargs>
                    </wsdlOption>
                </wsdlOptions>
            </configuration>
            <goals>
                <goal>wsdl2java</goal>
            </goals>
        </execution>
    </executions>
</plugin> 
```

这`<extraarg>http://your.namespace2/services2/=your.package2</extraarg>`会将您的命名空间与您想要的包映射。

# javascript - OpenLayers FramedCloud 自动调整大小

> ID：12605384
> 
> 赞同：0
> 
> 时间：2012-09-26T15:36:41.817
> 
> 标签：javascript, popup, openlayers

根据文档，我应该能够通过`OpenLayers.Size`在 FramedCloud 构造函数中声明一个对象来配置我的 OpenLayers 弹出窗口的大小：

```
this.popup = new OpenLayers.Popup.FramedCloud('featurePopup',
    this.options.feature.geometry.getBounds().getCenterLonLat(),
    new OpenLayers.Size(80, 60),
    html,
    null, true, this.onPopupClose
);
map.addPopup(this.popup, true); 
```

目前，无论我在构造函数中使用什么尺寸，呈现的弹出窗口都会自动调整大小。

![在此处输入图像描述](../Images/4b32697126d9b38ea37ebe0c556ecc1d.png)

我尝试手动将 FramedCloud 的 autosizing 属性设置为 false 以及手动调整弹出窗口的 css 样式，但没有达到我需要的结果。

我在 OpenLayers 2.11 问题列表中检查并发现了一些[类似的问题](https://github.com/openlayers/openlayers/issues/107)，但我没有找到解决方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:37:33.290

```
 this.popup.autoSize = false; 
```

在 addPopup() 之前添加此指令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T15:26:47.130

不确定这对其他人有多大帮助，但对于这个特定的示例，滚动条是由于对话框底部的浮动 div 而呈现的。通过更新 css，我能够绘制干净的自动大小的弹出窗口，而无需计算自定义尺寸。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T18:36:16.583

我遇到了同样的问题，我发现的唯一解决方法是使用例如 AnchoredBubble。

# jquery - 使用 Ajax 调用提交表单

> ID：12605398
> 
> 赞同：-1
> 
> 时间：2012-09-26T15:37:39.663
> 
> 标签：jquery, asp.net, ajax, asp.net-ajax

我正在使用 C# 在 ASP.net 2.0 应用程序中工作

我有一个 .net 用户控件，其中有一个表单。

表单验证由外部机构使用 jquery 完成。我可以提交所有表单，除了在灯箱中打开表单的一种表单。

代理商要求使用显示警报消息的 ajax 调用提交此表单。单击按钮但未提交表单时，我可以看到警报消息

```
<script type="text/javascript">
document.getElementById('requestquote1_btnSubmit').onclick = function(e) {
    if (jlib.validate(e)) {
        alert('Validate PASSED - .NET control will handle the AJAX submission from here');
        return true;
    }
    return false;
};​
</script> 
```

请帮助我如何使用 ajax 调用提交请求。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:43:15.117

`submit`您可以使用带有该功能的 jQuery 提交表单。

```
<script type="text/javascript">
    document.getElementById('requestquote1_btnSubmit').onclick = function(e) {
        if (jlib.validate(e)) {
            alert('Validate PASSED - .NET control will handle the AJAX submission from here');
            $('#formid').submit();
            return true;
    }
    return false;
};​
</script> 
```

# objective-c - 基本的 Objective-C 内存管理语法

> ID：12605403
> 
> 赞同：0
> 
> 时间：2012-09-26T15:37:48.307
> 
> 标签：objective-c, memory-management, variable-assignment

我有一个这样定义的属性：

```
@property (nonatomic, retain) MyClass *someObject; 
```

我目前正在使用这个赋值语句：

```
someObject = [[MyClass alloc] init]; 
```

就**内存管理**而言，上述赋值语句相当于：

```
self.someObject = [[[MyClass alloc] init] autorelease]; 
```

假设`@synthesize someObject;`在`@implementation`节中。另外我没有使用ARC。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:45:06.310

注意：以下内容基于原帖的编辑版本，其中“assign”已替换为“retain” ---

是的，这两者是“等价的”，因为它们都会导致 MyClass 对象（正确地）保留在属性中，保留计数为 1。第二个版本经过了一些额外的工作，这可能是也可能不是问题，这取决于您对性能的敏感程度。

有些人认为你不应该`self.propname`在类中使用属​​性引用（即 ），而应该引用实例变量，尤其是在初始化和释放时。其他人则相反。我通常倾向于始终使用属性引用，除非在初始化期间（如在本例中）使用它可能会导致无关的保留/自动释放。

# javascript - 如何在 jQueryMobile 中清除外部页面的文本字段值

> ID：12605414
> 
> 赞同：1
> 
> 时间：2012-09-26T15:38:04.310
> 
> 标签：javascript, html, jquery-mobile

我有两个页面 index.html 和 external.html.In index.html 我有两个文本字段。在这些文本字段中插入一些文本并单击一个按钮，我会转到 external.html 页面。这个 external.html 页面有一个链接到 index.html 的按钮。当单击该按钮时，它会将我移动到 index.html。

现在的问题是当我从 external.html 移动到 index.html 时，文本字段仍保持其先前的值。我希望它在进入 index.html 页面时清除其先前的值。如何做到这一点，请帮助我。

索引.html

```
<section id="firstpage" data-role="page">
    <header data-role="header" data-position="fixed">      
        <h1>First</h1>
    </header>

    <div data-role="content" >

    <script type="text/javascript" >
        $( function(){
            $( '#name_field' ).val( "" );

        });

        $(document).ready(function () {
          $('.clearme').focus(function() {
            $(this).val("");
          });
        });

    </script>

    <label for="name" >Name:</label>
    <input type="text" name="name" id="name_field" value="" class="clearme" placeholder="Enter Name"/>

    <label for="email">Email:</label>
    <input type="email" name="email" id="email_field" value="" placeholder="Enter Email Id" />

    <input type="submit" id="button" value="External Page" data-theme="b"  onclick="_gotopage( 'http://localhost/test/external.html' );"/>
    </div>

    <footer data-role="footer" data-theme="d" >    

    </footer>   
</section> 
```

外部.html

```
<section id="secondpage" data-role="page">
    <header data-role="header" data-position="fixed">      
        <h1>External</h1>
    </header>

    <div data-role="content" >

    <script type="text/javascript" >

    </script>
           <input type="submit" id="comment_enter_button" value="Index Page" data-theme="b"  onclick="_gotopage( 'http://localhost/test/index.html' );"/>
    </div>

    <footer data-role="footer" data-theme="d" >    

    </footer>   
</section> 
```

脚本.js

```
function gotopage( gotopage )
{ 
  $.mobile.changePage($( gotopage ), { transition: "slide"});
}

function _gotopage( page )
{
  $.mobile.changePage( page);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:36:17.693

您正在寻找这样的东西吗？：

```
$(document).on('pageshow', function () {
    $('.clearme').val("");
}); 
```

# regex - 使用正则表达式解析 tnsnames.ora 以获取名称

> ID：12605415
> 
> 赞同：3
> 
> 时间：2012-09-26T15:38:13.420
> 
> 标签：regex

我正在阅读这个[问题](https://stackoverflow.com/questions/3549863/parsing-tnsnames-ora-using-regex)，并试图做相反的事情。这张海报想要捕获有关连接的信息，我只想匹配所有连接名称。考虑这个文件：

```
SOMESCHEMA =
   (DESCRIPTION =
     (ADDRESS_LIST =
       (ADDRESS = (PROTOCOL = TCP)(HOST = REMOTEHOST)(PORT = 1234))
     )
    (CONNECT_DATA =
 (SERVICE_NAME = REMOTE)
     )   
)  
# comment
MYSCHEMA.world =
   (DESCRIPTION =     
(ADDRESS = (PROTOCOL = TCP)(HOST = MYHOST)(PORT = 1234))     
(CONNECT_DATA =       
(SERVER = DEDICATED)       
(SERVICE_NAME = MYSERVICE.LOCAL )     
)   )

##comment
##comment
MY.OTHER.SCHEMA=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=MYHOST)(PORT=1234)))(CONNECT_DATA=(SERVICE_NAME=MYSERVICE.REMOTE)))  

SOMEOTHERSCHEMA =    (DESCRIPTION =     (ADDRESS_LIST =       (ADDRESS = (PROTOCOL = TCP)(HOST = LOCALHOST)(PORT = 1234))     )     (CONNECT_DATA =       (SERVICE_NAME = LOCAL)   )   ) 
```

RexEx 规则应该足够简单，我只是对 RegExs 感到恐惧。它应该是：

*   匹配后跟“=”的任何单词（不打断“.”），忽略空格，即不是DESCRIPTION、ADDRESS_LIST、ADDRESS、PROTOCOL、HOST、PORT、CONNECT_DATA 或SERVICE NAME。
*   忽略以# 开头的单词，同样忽略空格。

任何可以帮助解决此问题的 RegEx 专家？如果有帮助的话，可以通过首先删除代码中的空格来消除“忽略空格”的要求。

结果应该匹配：

*   系统架构
*   MYSCHEMA.world
*   我的其他模式
*   其他模式

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:51:30.703

这个应该可以的。

[http://rubular.com/r/o9AjrFUq5q](http://rubular.com/r/o9AjrFUq5q)

```
^([^#()\W ][a-zA-Z.]*(?:[.][a-zA-Z]*\s?=)?) 
```

确保第一个字符不是#() 或单词边界。

抓取最后一段之前的所有内容，然后在 = 符号之前添加一个可选空格。有点令人费解，但它似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-15T12:55:39.360

我知道这是一个老话题，但是当 Regex 不适合时，我想添加一个有用的参考。可以使用 ANTLR 来解析整个 tnsnames.ora（以及 sqlnet.ora 等）。

您可以在 antlr3.org的[语法列表中找到](http://www.antlr3.org/grammar/list.html)[对该语法的参考](http://www.harward.us/~nharward/antlr/OracleNetServicesV3.g)

# javascript - 更改 XmlHttpRequest 的 URL 会导致不发送 cookie

> ID：12605420
> 
> 赞同：1
> 
> 时间：2012-09-26T15:38:23.050
> 
> 标签：javascript, cookies

我有一个内部 Web 服务器，它提供了一个界面，让我可以查看和更改该服务器上的一些数据。当我在一个位置时，我可以直接访问服务器，但从另一个位置我必须创建一个到服务器的 ssh 隧道。结果，我在浏览器中输入的 URL 会根据我的位置而变化：例如，`http://myserver/blah`与`http://localhost:8000/blah`. 它是同一台服务器，只是主机名不同。

这很不方便，因为有时我会忘记将更改保存在一个位置，而当我转到另一个位置时，突然找不到服务器。这也很不方便，因为我一直不得不重新加载页面。我想只加载一次页面并让它在任何一个地方工作。所以，我想我会在我的 XmlHttpRequest 处理中添加一些代码来检测是否找不到服务器并使用备用服务器地址重新发出请求。问题是，当这种情况发生时，我发现我的 cookie 没有发送到服务器。

我有 cookie`localhost`和`myserver`. 它们实际上是同一组值，因为它实际上是同一台服务器，但显然它们是重复的，因为服务器是从两个不同的主机名访问的。如果我手动更改服务器的主机名，我没有问题，但显然这是我试图避免做的事情。

我怀疑可能存在一些安全问题，但是在重新阅读 cookie 的工作原理后，我无法确定具体可能会导致这种行为，或者如何解决它。

顺便说一句，问题不在于我正在尝试进行跨站点请求。我通过返回字段“Access-Control-Allow-Origin：*”在服务器端明确允许这样做，并且我对这部分请求没有任何问题。使用 firebug，我可以看到问题是当请求重新发送到新主机名时，即使该主机名存在 cookie，也不会发送任何 cookie。

# javascript - 浏览器内存通过连续的 Jquery Ajax 调用增加

> ID：12605422
> 
> 赞同：0
> 
> 时间：2012-09-26T15:38:26.213
> 
> 标签：javascript, jquery, javascript-events

我在使用 JQuery AJax 调用时遇到问题。基本上，我使用的是 Ruby/Watir 自动化脚本，它不断单击我的 GSP 页面中的“下一页”图像。单击此图像时，它会向服务器发出 JQuery $.ajax 请求.Server 读取特定文件的内容并将其作为响应发送回。现在此响应直接呈现到一个 div 中：document.getElementById("content").innerHTML = responseText;

在这种情况下，当我运行我的脚本时，Chrome 和 FF 内存不断增加。请尽快让我知道这背后的原因..此外，客户端发生了很多处理和事件处理。请给我任何与减少客户端内存消耗相关的指示。我被困在这里了。请帮我解决这个问题。在此先感谢.....注意：我也尝试使所有javascript变量无效...请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:42:00.130

您可能想阅读有关[内存管理的信息](https://developer.mozilla.org/en-US/docs/JavaScript/Memory_Management)

# .net - ConnectionString 超时被忽略

> ID：12605424
> 
> 赞同：1
> 
> 时间：2012-09-26T15:38:34.380
> 
> 标签：.net, windows-services, connection-string

我有一个 .NET Windows 服务，它引用了一个调用 SQL Server 数据库的特定程序集。这些 SQL 调用的连接字符串被编码为从 ConfigurationManager.ConnectionStrings["myconnection"] 中提取。

在服务的安装目录中，我有一个配置文件，其中包含连接字符串“myconnection”，它最初没有连接超时值，长时间运行的查询在 30 秒后意外超时。但是，通过将“Connection Timeout=300”添加到连接字符串并重新启动服务，我们看不出有什么区别。

编辑： commandtimeout 属性设置为 300。示例如下：

```
SqlCommand _command     = new SqlCommand(Sql, _con);
            SqlDataReader _DR       = _command.ExecuteReader();
            _command.CommandTimeout = 300;
            string _fieldValue;
            string _columnValue;

            while (_DR.Read()){ ... } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:42:14.950

您需要将[SqlCommand.CommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)设置为更高的值。

[SqlCommand.CommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)是单个 sql 命令需要多长时间，而 SqlConnection.ConnectionTimeout[是](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectiontimeout.aspx)建立与 sql server 的连接需要多长时间。

我不相信[SqlCommand.CommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)可以从配置文件中设置 - 它必须在[SqlCommand](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.aspx)本身的**每个实例上设置。**

# javascript - javascript替换功能仅替换第一次出现

> ID：12605425
> 
> 赞同：1
> 
> 时间：2012-09-26T15:38:38.150
> 
> 标签：javascript

```
document.getElementById("Message").innerHTML=document.getElementById("Message").innerHTML.replace("'","%%"); 
```

上面的语句只替换了第一次出现的单引号。可能是因为我在那之后立即进行了提交，并且 javascript 在继续下一个语句之前没有等待前一个语句完成？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:40:04.187

尝试使用正则表达式`/g`

```
.replace(/'/g,"%%") 
```

如下更改您的代码，

```
document.getElementById("Message").innerHTML = 
                  document.getElementById("Message")
                          .innerHTML
                          .replace(/'/g,"%%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:40:01.660

要在 javascript 中全局替换，您需要将 /g 添加到替换字符串中。

请参阅此 SO 链接[如何使用 JavaScript 替换字符串中的所有点](https://stackoverflow.com/questions/2390789/how-to-replace-all-points-in-a-string-in-javascript)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:40:14.010

您应该在替换中使用正则表达式。

```
document.getElementById("Message").innerHTML=document.getElementById("Message").innerHTML.replace(/'/g,"%%"); 
```

[jsfiddle](http://jsfiddle.net/5gzQC/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T15:41:27.467

在 replace() 参数中使用`Global (g)`标志。

看[这里](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/replace)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T15:42:00.500

您应该使用正则表达式和`/g`（全局）标志。这将替换所有出现：

```
document.getElementById("Message").innerHTML=
    document.getElementById("Message").innerHTML.replace(/'/g,"%%"); 
```

[http://www.w3schools.com/jsref/jsref_replace.asp](http://www.w3schools.com/jsref/jsref_replace.asp)

# android - Droidparts InjectView 不工作

> ID：12605436
> 
> 赞同：1
> 
> 时间：2012-09-26T15:39:20.360
> 
> 标签：android, droidparts

我正在尝试使用 droidParts，特别是 DI 部分。我正在测试 2 次注入，InjectResource 和 InjectView，但第二次似乎没有工作。

我有一个带有 textView 的简单默认布局：

```
 <TextView
    android:id="@+id/text1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    tools:context=".MainActivity" /> 
```

这是我的示例代码：

```
import org.droidparts.annotation.inject.InjectResource;
import org.droidparts.annotation.inject.InjectView;
import android.os.Bundle;
import android.util.Log;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends org.droidparts.activity.Activity {

@InjectView(R.id.text1) private TextView txtView;
@InjectResource(R.string.app_name) private String appName;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Log.v("testLog", appName);

    txtView.setText("Test");

}   
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

InjectResource 正常工作并记录字符串，但是当它到达 setText("Test"); 行我得到一个 nullPointerException。使用 InjectView 还需要做些什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:57:23.757

需要在执行注入后立即调用内容`preInject()`视图`onCreate()`。而且`Views`没有布局信息是找不到的。

所以代码应该是这样的：

```
@Override
public void onPreInject() {
    setContentView(R.layout.activity_main);
}

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);     
    txtView.setText("Test");
} 
```

# mysql - 无法从 Rails 更新 RDS 数据库

> ID：12605437
> 
> 赞同：0
> 
> 时间：2012-09-26T15:39:21.707
> 
> 标签：mysql, ruby-on-rails, amazon-web-services, rds

如果我登录到 mysql 终端，我可以对 RDS 数据库进行任何我想要的更新或添加。但是当我从 Rails 控制台使用 Active Record 时，我只能访问数据，不能更新或销毁它。

我似乎有正确的赠款：

```
| GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, RELOAD, PROCESS, REFERENCES, INDEX,
  ALTER, SHOW DATABASES, CREATE TEMPORARY TABLES, LOCK TABLES, EXECUTE, REPLICATION
  CLIENT, CREATE VIEW, SHOW VIEW, CREATE ROUTINE, ALTER ROUTINE, CREATE USER, EVENT, 
  TRIGGER ON *.* TO 'root'@'%' IDENTIFIED BY PASSWORD'*XXXXX' WITH GRANT OPTION | 
```

我的 database.yml 看起来像：

```
development:
  host: XXXX.YYYY.us-east-1.rds.amazonaws.com
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: filemaker
  pool: 5
  username: root
  password: ZZZZZ 
```

当我尝试更新记录时，现在返回 false：

```
>> Section.first.update_column(:craigslist_posts, 1)
   Section Load (101.6ms)  SELECT `sections`.* FROM `sections` LIMIT 1
   SQL (49.9ms)  UPDATE `sections` SET `craigslist_posts` = 1 WHERE `sections`.`_id`=    
   4470
=> false 
```

我已经关闭了 whitelist_attributes 认为这可能与它有关。因为 RDS 没有任何错误日志，所以我看不到是否有任何错误被提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:38:23.807

您不能`root`在为 Amazon 服务层保留的 RDS 上使用用户。您应该引用在创建 RDS 实例时指定的 RDS“主用户”名称。那是您的默认主用户，具有大多数服务器级权限。 [有关授予主用户的权限的更多信息，请参阅此链接。](http://aws.amazon.com/rds/faqs/#29)

良好的数据库实践会让您不为特定应用程序使用“root”用户或其最接近的 RDS 等效“主用户”。您确实应该考虑定义具有适当权限的特定于应用程序的用户，以仅执行应用程序需要执行的操作。

# mysql - 如何根据日期对MYSQL数据库中的数据进行SUM、GROUP和SPLIT

> ID：12605440
> 
> 赞同：1
> 
> 时间：2012-09-26T15:39:27.090
> 
> 标签：mysql, sql

表：会计

```
date_due        date_paid         amount_due     amount_paid    category_type
2012-08-12      2012-08-12        500            450            Income
2012-08-13      2012-08-17        200            300            Expense
2012-09-15      2012-09-13        300            300            Income
2012-09-17      2012-09-16        100            100            Income 
```

我如何生成一个表，如：

```
date_paid       IncomeAmountPaid               ExpenseAmountPaid
2012-08         TOTAL INCOME IN AUGUST         TOTAL EXPENSE IN AUGUST
2012-09         TOTAL INCOME IN SEPT.          TOTAL EXPENSE IN SEPTEMBER 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:52:28.993

您可以使用以下内容，它实现了一个`CASE`语句和一个`GROUP BY`：

```
select date_format(date_paid, '%Y-%m') date_paid,
  sum(case when category_type = 'Income' then amount_paid end) IncomePaid,
  sum(case when category_type = 'Expense' then amount_paid end) ExpensePaid
from accounting 
group by date_format(date_paid, '%Y-%m') 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/01255/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:46:30.613

**如何分组**

```
SELECT column_name, aggregate_function(column_name)
FROM table_name
WHERE column_name operator value
GROUP BY column_name 
```

**如何求和**

```
SELECT SUM(column_name) FROM table_name 
```

**如何拆分**

创建拆分函数

```
CREATE FUNCTION SPLIT_STR(
  x VARCHAR(255),
  delim VARCHAR(12),
  pos INT
)
RETURNS VARCHAR(255)
RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
       LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
       delim, ''); 
```

然后使用该功能

```
SELECT SPLIT_STR(string, delimiter, position) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:59:13.887

你可以试试这个，

```
 select Year(date_paid), Month(date_paid),
  sum(case when category_type = 'Income' then amount_paid end) IncomeAmountPaid,
  sum(case when category_type = 'Expense' then amount_paid end) ExpenseAmountPaid
 group by Year(date_paid), Month(date_paid) 
```

# iphone - 通过 UIAppearance 自定义 UIBarButtonItem 后，UIControlStateSelected 的按钮图像不起作用

> ID：12605441
> 
> 赞同：0
> 
> 时间：2012-09-26T15:39:31.253
> 
> 标签：iphone, ios, customization, uibarbuttonitem, uiappearance

我`UIBarButtonItem`在我的 AppDelegate.m 中使用自定义，`UIAppearance`并且所有条形按钮都在正常和选定状态下显示正确的图像。

我希望“完成”和“保存”按钮使用不同的图像（因此它们看起来是蓝色而不是灰色），所以我使用`-setBackgroundImage: forState: barMetrics`为`UIControlStateNormal`和`UIControlStateSelected`in设置两个不同的图像`-viewDidLoad`。

的图像`UIControlStateNormal`工作正常，但`UIControlStateSelected`没有显示，而是显示了我在 AppDelegate.m 中用于选定状态的原始图像。如果我注释掉原始图像，新的（蓝色）图像会正确显示。

为特定按钮设置不同背景图像的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:45:54.230

我相信`UIControlStateHighlighted`这是您正在寻找的。

每当它接收到用户触摸时， A`UIBarButtonItem`就会进入突出显示状态。`UIControlStateSelected`通常用于在两种状态之间切换的 UI 元素。

# asp.net - SQL Server 存储过程返回“失败”

> ID：12605444
> 
> 赞同：0
> 
> 时间：2012-09-26T15:39:47.043
> 
> 标签：asp.net, sql-server-2008, stored-procedures

我在 SQL Server 2008 中有一个存储过程，需要删除几行数据。但是当我运行它时，它返回一个失败和一个值-6。

```
ALTER procedure [dbo].[p_CaseFiles_Exhibits_DeleteExhibits]
  @ExhibitID int
, @Message nvarchar(50) output
as
declare @FileID int
set @FileID = (select FileID from CaseFileExhibits where ExhibitID = @ExhibitID)
begin transaction
  begin try
    delete from CaseFileExhibitMovementTracking where ExhibitID = @ExhibitID
    delete from CaseFileExhibitAttachments where CaseFileExhibitID = @ExhibitID
    delete from CaseFileExhibits where ExhibitID = @ExhibitID
    delete from CaseFileExhibitPropertyLink where ExhibitID = @ExhibitID
    update CaseFileQuickStats set ExhibitCount = ExhibitCount -1 where CaseFileID = @FileID    
    commit transaction
  end try
  begin catch
    set @Message='Fail'
    rollback transaction
  end catch 
```

我似乎无法找到问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T15:44:44.133

您可以自己查看消息，将其添加到您的 CATCH 块中：

```
SELECT
ERROR_NUMBER() AS ErrorNumber
        ,ERROR_SEVERITY() AS ErrorSeverity
        ,ERROR_STATE() AS ErrorState
        ,ERROR_PROCEDURE() AS ErrorProcedure
        ,ERROR_LINE() AS ErrorLine
        ,ERROR_MESSAGE() AS ErrorMessage; 
```

您可能希望将该 SELECT 更改为 PRINT，然后在 SSMS 中运行 SP 时，您将能够在“消息”选项卡中看到结果。

我怀疑这是外键的问题或可能的触发器。

# asp.net-mvc-3 - MVC：没有为此对象定义无参数构造函数

> ID：12605445
> 
> 赞同：14
> 
> 时间：2012-09-26T15:39:46.740
> 
> 标签：asp.net-mvc-3, razor

我有以下控制器定义

```
public class FeaturedAccommodationController : Controller
{
   ...

   public FeaturedAccommodationController(IAccommodationService accommodationService)
   {
      ...
   }

   public ActionResult Index(int page = 1)
   {
      ...
   }
   ...
} 
```

我有一个链接，用于调用此索引操作方法

```
@Html.ActionLink("Featured Accommodations", "Index", "FeaturedAccommodation") 
```

出于某种原因，当我单击此链接时，我收到以下错误。这里有什么问题？

```
No parameterless constructor defined for this object.
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: System.MissingMethodException: No parameterless constructor defined for this object.

Source Error:

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:

[MissingMethodException: No parameterless constructor defined for this object.]
   System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
   System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
   System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
   System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +67

[InvalidOperationException: An error occurred when trying to create a controller of type 'JattCore.UI.Admin.Controllers.FeaturedAccommodationController'. Make sure that the controller has a parameterless public constructor.]
   System.Web.Mvc.DefaultControllerActivator.Create(RequestContext requestContext, Type controllerType) +182
   System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType) +80
   System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName) +74
   System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory) +232
   System.Web.Mvc.<>c__DisplayClass6.<BeginProcessRequest>b__2() +49
   System.Web.Mvc.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a() +13
   System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f) +7
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action) +22
   System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Func`1 func) +124
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state) +98
   System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state) +50
   System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData) +16
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8970356
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +184 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-26T15:44:46.963

当您创建控制器时，它在构造函数中需要一个参数，称为`IAccommodationService`.
如果不这样做，则无法创建控制器。

解决问题的一种方法是使用依赖注入 (DI)/控制反转 (IoC)，如 ninject 或类似的。
如果有的话记得注册`IAccommodationService`...

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-26T15:45:13.120

`constructor`向控制器添加不带参数的

```
public class FeaturedAccommodationController : Controller
{
   public FeaturedAccommodationController ()
   {
   }
   // your other parameterized constructors and action methods here
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-26T15:47:06.893

问题正是错误消息所指出的，没有默认的无参数构造函数（例如）：

```
public FeaturedAccommodationController()
{
} 
```

MVC 运行时无法实例化您的控制器，因为它无法提供`IAccommodationService`. 您要么需要像这样进行穷人的构造函数注入：

```
public FeaturedAccommodationController()
    : this(new AccommodationService())
{
}

public FeaturedAccommodationController(IAccommodationService accommodationService)
{
} 
```

或使用 IOC 容器（例如 Unity、Ninject、Windsor 等）来构建您的控制器并解决它们的依赖关系。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T15:45:06.777

您的问题几乎与此问题完全相同：

[Windows Azure，MVC3，没有为此对象定义无参数构造函数](https://stackoverflow.com/questions/7438267/windows-azure-mvc3-no-parameterless-constructor-defined-for-this-object?rq=1)

您的错误跟踪甚至指向问题：

> [InvalidOperationException：尝试创建类型为“JattCore.UI.Admin.Controllers.FeaturedAccommodationController”的控制器时发生错误。确保控制器有一个无参数的公共构造函数。]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-24T12:29:04.083

*   停止 IIS
*   删除`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root`
*   启动 IIS

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-03-10T19:57:54.223

`DefaultControllerFactory`您可以通过实现和设置来使用ASP.NET MVC 的内置功能`ControllerBuilder.Current.SetControllerFactory`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-03T23:58:08.950

这可能发生的一个原因是因为这是您的应用程序中的第一个也是唯一一个控制器。我的建议是有一个名为 Home 的默认控制器，没有构造函数（如错误状态），然后添加另一个控制器 - 你提到的那个，它可以有一个构造函数。

# excel - 如果单元格处于编辑模式，如何切换粗体或斜体？

> ID：12605446
> 
> 赞同：1
> 
> 时间：2012-09-26T15:39:49.563
> 
> 标签：excel, vba

```
If Selection.Font.Bold = False Then
Selection.Font.Bold = True
Else
Selection.Font.Bold = False
End If 
```

如果选择了范围，则此方法有效。
如果单元格处于编辑模式，并且只选择了部分内容，如何创建相同的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:05:33.830

这是您用来格式化部分单元格的方法，但您只能在编辑完成后执行此操作 - 正如 Tim Williams 所说。

```
With ActiveCell.Characters(Start:=3, Length:=2).Font
    .Name = "Calibri"
    .Size = 11
    .Strikethrough = False
    .Superscript = False
    .Subscript = False
    .OutlineFont = False
    .Shadow = False
    .Underline = xlUnderlineStyleNone
    .ThemeColor = xlThemeColorLight1
    .TintAndShade = 0
    .ThemeFont = xlThemeFontMinor
End With 
```

# php - 如何为网络爬虫设置有效的 cron 作业

> ID：12605453
> 
> 赞同：1
> 
> 时间：2012-09-26T15:40:12.750
> 
> 标签：php, web-crawler, cron-task

我编写了一个 php 网络爬虫来索引仅 180 个特定来源的内容，但每页平均需要 2 秒来分析、抓取和保存我想要的内容：图像、网址、标题、完整内容、摘录、标签。（有几种算法可以分析所有元标记以获取正确的数据）

我只抓取最新的 9 篇文章页面，所以每个来源需要 18-25 秒。

我创建了 10 个不同的 cron 作业（它们之间 6 分钟），所以每个可以处理 18 个源（大约 350 秒）。

这似乎非常低效，特别是如果我想达到 1k 来源。我应该修改什么？

ps：我在共享主机上测试它，专用服务器会大大减少时间吗？

cron 工作类似于：

lynx -auth 用户名：密码 website.com/crawler.php?group=1

lynx -auth 用户名：密码 website.com/crawler.php?group=2

lynx -auth 用户名：密码 website.com/crawler.php?group=3 等

爬虫脚本从数据库中访问18个来源，获取最新的9篇文章页面并爬取内容，分析并根据结果将其存储在数据库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:49:05.990

老实说，不要为此使用 cron 作业。设置一个守护进程，它将一直运行。如果它崩溃等重生。

[http://pear.php.net/package/System_Daemon](http://pear.php.net/package/System_Daemon)

# c# - 多个绑定到 GridView 数据源

> ID：12605460
> 
> 赞同：0
> 
> 时间：2012-09-26T15:40:42.043
> 
> 标签：c#

我正在尝试将三个查询绑定到 GridView 数据源。据我了解，您不能将多个查询绑定到 GridView 数据源，这是真的吗？是这样，您将如何处理多个查询并将它们绑定到一个 GridView。例如：

```
var query1 = select * from table 1
var query2 = select * from table 2
var query3 = select * from table 3

GridView.DataSource = query1;
GridView.DataSource = query2;
GridView.DataSource  = query3; 
```

这基本上是我想做的，但据我所知，这是可能的。有没有一个好方法来做这样的事情？谢谢！

所以，基本上我有多个查询，我需要所有查询的某些结果进入一个 GridView。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:53:06.333

如果所有查询都属于同一类型，那么您可以在将它们绑定到 gridview 之前将它们组合成一个集合：

```
var aggregateQuery = query1.Concat(query2).Concat(query3);
GridView.DataSource = aggregateQuery; 
```

如果查询不是同一类型，那么您要么需要做一些事情将它们转换为单个通用模式（我们需要了解更多以提供详细信息），要么您需要有 3 个单独的网格视图并且只绑定一个到每个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:46:08.113

来自[DataGridView.DataSource 属性](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.datasource.aspx)

> DataGridView 类支持标准的 Windows 窗体数据绑定模型。这意味着数据源可以是实现以下接口之一的任何类型：
> 
> 1.  IList 接口，包括一维数组。
> 2.  IListSource 接口，例如 DataTable 和 DataSet 类。
> 3.  IBindingList 接口，例如 BindingList 类。
> 4.  IBindingListView 接口，例如 BindingSource 类。

你可能想绑定一个`DataSet`then

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-30T04:55:25.073

没错，你不能做多重绑定。

但是，您可以连接查询以将所有记录引入单个 DataTable，然后绑定到它。

IE

假设`<asp:SqlDataSource...`您的 SELECT 在单个查询中包含整个数据

```
 DataSourceSelectArguments dss = new DataSourceSelectArguments();
        SqlDataSource sds = (SqlDataSource)YourControl.FindControl("your datasource control");
        if (sds != null)
        {
            DataView dv = (DataView)sds.Select(DataSourceSelectArguments.Empty);
            if (dv != null)
            {
                DataTable dt = (DataTable)dv.ToTable();
                if (dt != null)
                {
                  myGridView.DataSource = dt;
                  myGridView.DataSourceID = null; //won't be needed
                  myGridView.DataBind();
etc 
```

# ios - UIScrollView 中的图像在滚动表格后更改位置

> ID：12605462
> 
> 赞同：0
> 
> 时间：2012-09-26T15:40:47.413
> 
> 标签：ios, uiscrollview, gpuimage

我有一个 UITableView 单元，其中包含一个 UIScroller，其中有一个 UIImage。

我遇到了一个问题，当我第一次加载视图时，一切看起来都很好，但是当我向上和向下滚动时它会改变。

这是之前的屏幕截图：

![在此处输入图像描述](../Images/37d2c225a1e4f63bf38825cda92fe430.png)

这是我滚动后的一个：

![在此处输入图像描述](../Images/fb3d97f877d41dcb6aeb2bf9a3c3dab5.png)

我在 UIScroller 中加载 UIImage 的代码是：

```
UIImageView *imageview = [[UIImageView alloc] initWithImage:myImage];

        imageview.frame = self.scrollview.bounds;

        self.scrollview.delegate = self;

        [self.scrollview addSubview:imageview]; 
```

有人可以给我一些指示吗？我尝试使用以下堆栈溢出帖子中的代码，但到目前为止他们无法做到这一点：

[UIImage 不适合 UIScrollView 在开始](https://stackoverflow.com/questions/6161786/uiimage-is-not-fitting-in-uiscrollview-at-start) [UIScrollView 与居中的 UIImageView，如照片应用程序](https://stackoverflow.com/questions/638299/uiscrollview-with-centered-uiimageview-like-photos-app)

有什么建议么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:46:11.360

将滚动视图的尺寸设置`contentSize`为图像视图的尺寸可能会有所帮助。

# com - VB6 在 Windows Server 2008 中调用 .net 程序集时出现运行时 429 错误

> ID：12605466
> 
> 赞同：1
> 
> 时间：2012-09-26T15:41:06.257
> 
> 标签：com, vb6, com-interop

我尝试了链接[如何从 Visual Basic 6.0 调用 Visual Basic .NET 或 Visual Basic 2005 程序集中的简单应用程序](http://support.microsoft.com/kb/817248)

.net 代码

```
 <ComClass(ComClass1.ClassId, ComClass1.InterfaceId, ComClass1.EventsId)> _
    Public Class ComClass1

    #Region "COM GUIDs"
        ' These  GUIDs provide the COM identity for this class 
        ' and its COM interfaces. If you change them, existing 
        ' clients will no longer be able to access the class.
        Public Const ClassId As String = "6DB79AF2-F661-44AC-8458-62B06BFDD9E4"
        Public Const InterfaceId As String = "EDED909C-9271-4670-BA32-109AE917B1D7"
        Public Const EventsId As String = "17C731B8-CE61-4B5F-B114-10F3E46153AC"
    #End Region

        ' A creatable COM class must have a Public Sub New() 
        ' without parameters. Otherwise, the class will not be 
        ' registered in the COM registry and cannot be created 
        ' through CreateObject.
        Public Sub New()
            MyBase.New()
        End Sub

Public Function myFunction() As Integer
      Return 100
   End Function

    End Class 
```

VB6代码

```
Dim myObject As TestProj.COMClass1
Set myObject = New TestProj.COMClass1
MsgBox myObject.myFunction 
```

它可以在我的开发机器上使用 .Net 4.0 和 VS 2010 和 VB6。当我将文件复制到 Windows Server 2008 R2 机器并使用格式 Regasm AssemblyName.dll /tlb: FileName.tlb /codebase 注册程序集并强烈签署程序集时，我收到错误 429 无法创建 ActiveX 组件。我检查了注册表，并在其中看到了 classid。我错过了什么？谢谢

另外，我有一个旧版 vb6 应用程序，它使用 RDS（远程数据服务）在使用 Com+ 的另一台服务器上创建对象，但我只想更改它以在与 vb6 exe 相同的服务器上运行 .Net dll。有没有办法从另一台客户端 PC 在服务器上运行 exe 而无需注册 .Net dll (tlb) 或者我是否需要创建一个 setup.exe 来打包所有内容？我试图在我的 Virtual XPMode 上运行相同的 exe，即使我创建了一个安装应用程序，我也会遇到同样的错误。它只适用于我的开发机器。

# security - 使用 keytool 生成了一个 rsa 密钥 - 它在哪里？

> ID：12605467
> 
> 赞同：0
> 
> 时间：2012-09-26T15:41:09.037
> 
> 标签：security, rsa, keytool

我使用 keytool 创建了一个 RSA 密钥对，但我需要获取公钥。我已经阅读了所有内容，但在任何地方都找不到此信息。

有没有办法获取这些信息？甚至是 Windows 7 中的文件在哪里？

任何建议都会有所帮助..

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T14:51:15.680

密钥存储在您的用户目录下。

如果您使用的是 Windows，它位于 Users/ragalante/.keystore 下。

# php - 使用 64 位 WAMP 加载 Mssql PHP 驱动程序失败

> ID：12605470
> 
> 赞同：1
> 
> 时间：2012-09-26T15:41:26.373
> 
> 标签：php, sql-server, wamp

我需要知道如何将 php_pdo_sqlsrv_53_nts.dll 驱动程序与 64 位 WAMP 一起使用。

我需要使用带有 Yii 框架的 PDO MSSQL 驱动程序，并且我的 WAMP 版本是 64 位。

我知道 32 位版本可以工作，但我无法卸载/安装 WAMP。

当我尝试加载驱动程序时，我在 Apache 错误日志中看到：

```
PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.10/ext/php_sqlsrv_53_ts.dll' - %1 is not a valid Win32 application. in <b>Unknown</b> on line <b>0</b><br />
PHP Warning:  PHP Startup: Unable to load dynamic library 'c:/wamp/bin/php/php5.3.10/ext/php_pdo_sqlsrv_53_ts.dll' - %1 is not a valid Win32 application.\r\n in Unknown on line 0 
```

# debugging - 如何在中间停止 gdb 用户定义的命令？

> ID：12605476
> 
> 赞同：2
> 
> 时间：2012-09-26T15:41:42.300
> 
> 标签：debugging, gdb

我有一个 gdb 用户定义的命令，它会做一些设置，然后可能会做一个简单的工作，或者一个复杂的工作。该命令遵循以下基本结构：

```
define mycmd
  # Common setup

  if ($argc == 0)
    # Some simple thing a few lines long
    ## What goes here so I exit mycmd?
  end

  # A lot of lines doing a complex thing
end 
```

是否可以使用类似 C 的返回来代替 ## 行以立即终止 mycmd？return、exit、quit、stop、loop_break 命令没有达到我的预期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T13:59:18.367

> 是否有类似 C 的返回

似乎没有。一个可能的解决方案是

```
define mycmd
   ... common setup
   if (condition)
     ... do simple thing
   else
     mycmd_helper
   end
end

define mycmd_helper
   ... do complex thing
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T10:37:29.557

这不是它的主要用途，但您可以使用 loop_break：

```
define mycmd
  # Common setup
  set $i=1
  while $i == 1
    set $i=0
    if ($argc == 0)
      # Some simple thing a few lines long
      ## What goes here so I exit mycmd?
      loop_break
    end

    # A lot of lines doing a complex thing
  end
end 
```

# jquery - 简单确认对话框

> ID：12605482
> 
> 赞同：0
> 
> 时间：2012-09-26T15:41:55.543
> 
> 标签：jquery

我试图让我在这个论坛上找到的这个例子起作用。我想在单击确定时弹出一个确定警报，并且我希望在单击取消时关闭对话框。我将把这段代码附加到取消按钮上。

如何声明元素#mydialog？它应该在我的 JSP 中吗？

```
 $("#mydialog").dialog({modal:true, title:'Dialog Title',
    resizable:false,
    'buttons':{ "OK": function() { alert("OK Clicked")},
    "Cancel":function() {$(this).dialog
    ("close");}}}); 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:45:24.627

a) 它可以直接作为页面 HTML 的一部分出现 - 使用 JSP（或您正在使用的任何其他服务器端技术）呈现

或者

b) 它可以在初始化我们的对话框之前动态创建。这样，你的服务器渲染的 HTML 就不用担心了。

例如：

```
// create if needed
if($('div#mydialog').length == 0) {
    $('<div/>').attr('id', 'mydialog').html('Are you sure?').appendTo('body');
}

// now init the dialog
$("#mydialog").dialog({
... 
```

# maven - 如何将旧版本的 ehcache 探针添加到 grails 项目

> ID：12605488
> 
> 赞同：0
> 
> 时间：2012-09-26T15:42:04.587
> 
> 标签：maven, grails, ehcache

我正在尝试将 ehcache-probe 添加到 grails 项目中。

我尝试按照[此处所述添加罐子](http://ehcache.org/documentation/operations/monitor#probe)

我与 sl4j 依赖项有冲突：

```
SLF4J: Class path contains multiple SLF4J bindings.
SLF4J: Found binding in [jar:file:/melicloud/deploy/ml-build/ROOT/WEB-INF/lib/slf4j-jdk14-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Found binding in [jar:file:/melicloud/deploy/ml-build/ROOT/WEB-INF/lib/slf4j-log4j12-1.5.8.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation. 
```

没有它们，它会出现其他错误：

```
SLF4J: The requested version 1.5.8 by your slf4j binding is not compatible with [1.6]
SLF4J: See http://www.slf4j.org/codes.html#version_mismatch for further details. 
```

我还尝试在**BuildConfig.groovy**中添加为 maven2 依赖项以获得没有 sl4j 的旧版本：

```
repositories {
...
mavenRepo "http://www.terracotta.org/download/reflector/releases"
...
}
...
dependencies {
...
compile('org.terracotta:ehcache-probe:1.6')
...
} 
```

但是依赖没有解决

```
==== http://www.terracotta.org/download/reflector/releases: tried

  http://www.terracotta.org/download/reflector/releases/org/terracotta/ehcache-probe/1.6/ehcache-probe-1.6.pom

  -- artifact org.terracotta#ehcache-probe;1.6!ehcache-probe.jar:

  http://www.terracotta.org/download/reflector/releases/org/terracotta/ehcache-probe/1.6/ehcache-probe-1.6.jar

    ::::::::::::::::::::::::::::::::::::::::::::::

    ::          UNRESOLVED DEPENDENCIES         ::

    ::::::::::::::::::::::::::::::::::::::::::::::

    :: org.terracotta#ehcache-probe;1.6: not found

    :::::::::::::::::::::::::::::::::::::::::::::: 
```

**编辑：**我也试过这个：[http](http://jira.grails.org/browse/GRAILS-6800) ://jira.grails.org/browse/GRAILS-6800 （在**_Events.groovy**中删除grails slf4j依赖项并添加ehcache-probe）但现在我有一个

```
SEVERE: Error listenerStart 
```

**编辑 2：**我试过这个[http://mythinkpond.wordpress.com/2011/07/01/tomcat-6-infamous-severe-error-listenerstart-message-how-to-debug-this-error/](http://mythinkpond.wordpress.com/2011/07/01/tomcat-6-infamous-severe-error-listenerstart-message-how-to-debug-this-error/)现在我可以看看它是什么：

```
java.lang.NoSuchMethodError: org.slf4j.spi.LocationAwareLogger.log(Lorg/slf4j/Marker;Ljava/lang/String;ILjava/lang/String;Ljava/lang/Throwable;)V
    at org.apache.commons.logging.impl.SLF4JLocationAwareLog.info(SLF4JLocationAwareLog.java:159)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:187)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:47)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4206)
    at org.apache.catalina.core.StandardContext.start(StandardContext.java:4705)
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:799)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:779)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:601)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:943)
    at org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:778)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:504)
    at org.apache.catalina.startup.HostConfig.start(HostConfig.java:1317)
    at org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:324)
    at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:142)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1065)
    at org.apache.catalina.core.StandardHost.start(StandardHost.java:840)
    at org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1057)
    at org.apache.catalina.core.StandardEngine.start(StandardEngine.java:463)
    at org.apache.catalina.core.StandardService.start(StandardService.java:525)
    at org.apache.catalina.core.StandardServer.start(StandardServer.java:754)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414) 
```

现在我知道我不能使用最新版本的 ehcache-probe，有没有想过在哪里下载以前的版本？

你能给出解决这个问题的任何指示吗？

提前致谢

# iphone - CoreData 删除在 iOS 5.1 中挂起

> ID：12605489
> 
> 赞同：0
> 
> 时间：2012-09-26T15:42:12.503
> 
> 标签：iphone, ios5, core-data

我正在使用 XCode 4.4.1 和 Core Data 为 iPhone（iOS5 及更高版本）开发应用程序。

我有许多可以使用 NSTableViewControllers （单独的控制器，但代码相似）查看和删除的实体

其中一个实体 ( ExpenseItem ) 正在删除没有任何问题，但删除其他实体会导致执行被阻止。

调试导航器显示一个线程符号和“正在运行”一词，但我必须按下停止按钮才能返回编辑器。

我没有创建任何线程，所以在尝试了我能想到的一切数小时后，我不知所措！

这是我为调试问题而编写的一些代码 - 它保存了 ExpenseItem 对象但挂在 Account 对象上。如果我注释掉 ExpenseAccount 保存，帐户保存仍然挂起，反之亦然。

```
// deleteObject  ** why does this hang ???

-(void)deleteObjectX {                                                                  

    NSNumber *ExpenseKey    = [NSNumber numberWithInt:9];            // test data
    NSString *AccountCode  = @"Cash";

    NSManagedObjectContext *managedObjectContext = self.managedObjectContext;

    NSManagedObject* thisExpenseItemObject = [self getExpenseItemObject:ExpenseKey];  //   ExpenseItem
    NSManagedObject* thisAccountObject = [self getAccountObject:AccountCode];         // Account

   // if the next 3 lines are commented out it still hangs on the last line

  [managedObjectContext deleteObject:thisExpenseItemObject];         // OK
  BOOL result = [thisExpenseItemObject isDeleted];                   // result is YES
  [managedObjectContext save:nil];                                   // works 

  [managedObjectContext deleteObject:thisAccountObject];             // OK
  result = [thisAccountObject isDeleted];                            // result is YES
  [managedObjectContext save:nil];                                   // ***Hangs Here ! *** 
```

}

我将不胜感激任何建议！

谢谢，罗斯

# asp.net - 如何获取在 ASP.NET 的复选框列表中单击了哪个复选框

> ID：12605491
> 
> 赞同：0
> 
> 时间：2012-09-26T15:42:13.733
> 
> 标签：asp.net

我有一个包含一堆复选框的复选框列表的 ASP.NET 页面。

我想知道点击了哪个复选框的索引。我不是在寻找哪个复选框被选中，因为可以使用 SelectedIndex 来检索它。

例如说我有以下代码

```
<asp:CheckBoxList ID="_CheckBoxList" runat="server">
                <asp:ListItem Value="0" Selected="True">Apple</asp:ListItem>
                <asp:ListItem Value="1">Banana</asp:ListItem>
                <asp:ListItem Value="2" Selected="True">Orange</asp:ListItem>
</asp:CheckBoxList> 
```

因此，如果用户单击 Orange 复选框（基本上会取消选择它），我希望输出为 2，因为 Orange 被 CLICKED。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:48:11.483

您可以使用 javascript 来捕获这些项目的 onclick 事件，并将值存储在隐藏的 html 字段中。然后你可以从后面的代码或客户端使用它。

如果您希望每次点击都能在后端触发一个事件，您可以使用 ajax。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:52:13.817

我假设您想在服务器端了解这一点。如果您想在客户端了解它，这相当简单。

点击信息不会自动传递到服务器。您必须使用 Javascript 捕获它并通过将其存储在隐藏字段中或使用 Ajax 调用将其传回。

我假设您想知道他们的最终点击，而不是他们可能选中和未选中的所有复选框。如果您只需要知道最终单击的选项是什么，则可以使用单个隐藏字段。如果您需要知道在最终回发之前发生的所有点击，事情就会变得复杂。您可以为每个复选框存储一个隐藏字段。不过，可能还有其他方法可以做到这一点。

# asp.net - 在 asp 上验证 GPS 坐标

> ID：12605492
> 
> 赞同：0
> 
> 时间：2012-09-26T15:42:28.697
> 
> 标签：asp.net, regex

我正在尝试使用 asp 中的 regularExpressionValidator 验证 GPS 坐标输入。我的输入格式为 (lat,long) 我想验证文本框以允许在 lat 上只允许 -90 到 90，在 long 上只允许 -180 到 180。有没有办法我可以做到这一点。？它还必须接受 lat 和 long 之间的逗号。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:54:36.087

这可能会有所帮助... [lat long 验证正则表达式](http://forums.asp.net/t/1557310.aspx)

# twitter-bootstrap - 如何制作排棍

> ID：12605495
> 
> 赞同：1
> 
> 时间：2012-09-26T15:42:37.400
> 
> 标签：twitter-bootstrap

我正在尝试创建一个列表（键-> 值），并且在调整窗口大小时不希望值落在项目下方。我尝试使用“行”，但在调整窗口大小时值会位于项目下方。

我可以用什么来制作行棒？

![](../Images/8a7409908c1104bcf0d4f277ce134fc0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:58:48.280

如果你想要一个响应式布局，你应该`row-fluid`在`container-fluid`. （[见文档](http://twitter.github.com/bootstrap/scaffolding.html#layouts)）

但是对于这种情况，我个人会使用`<table>`, 因为它听起来像表格数据。（但是我不知道你的具体情况，我可能错了）

# python - 如何使用子进程popen Python

> ID：12605498
> 
> 赞同：131
> 
> 时间：2012-09-26T15:42:45.230
> 
> 标签：python, subprocess, popen

由于`os.popen`被替换`subprocess.popen`，我想知道我将如何转换

```
os.popen('swfdump /tmp/filename.swf/ -d') 
```

到`subprocess.popen()`

我试过：

```
subprocess.Popen("swfdump /tmp/filename.swf -d")
subprocess.Popen("swfdump %s -d" % (filename))  # NOTE: filename is a variable
                                                # containing /tmp/filename.swf 
```

但我想我没有正确地写出来。任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-09-26T15:44:05.367

`subprocess.Popen`接受参数列表：

```
from subprocess import Popen, PIPE

process = Popen(['swfdump', '/tmp/filename.swf', '-d'], stdout=PIPE, stderr=PIPE)
stdout, stderr = process.communicate() 
```

甚至有[一部分文档](http://docs.python.org/library/subprocess.html#replacing-os-popen-os-popen2-os-popen3)专门用于帮助用户`os.popen`从`subprocess`.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-09-27T04:14:44.953

使用[sh](http://amoffat.github.com/sh/)，它会让事情变得更容易：

```
import sh
print sh.swfdump("/tmp/filename.swf", "-d") 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2021-01-31T11:57:48.877

在最近的 Python 版本中，`subprocess`有了很大的变化。它提供了一个全新的类`Popen`来处理`os.popen1|2|3|4`。

新的`subprocess.Popen()`

```
import subprocess
subprocess.Popen('ls -la', shell=True) 
```

它的论点：

```
subprocess.Popen(args, 
                bufsize=0, 
                executable=None, 
                stdin=None, stdout=None, stderr=None, 
                preexec_fn=None, close_fds=False, 
                shell=False, 
                cwd=None, env=None, 
                universal_newlines=False, 
                startupinfo=None, 
                creationflags=0) 
```

简而言之，新`Popen`的包括被分成 4 个独立的旧的所有功能`popen`。

旧`popen`：

```
Method  Arguments
popen   stdout
popen2  stdin, stdout
popen3  stdin, stdout, stderr
popen4  stdin, stdout and stderr 
```

[您可以在Stack Abuse - Robert Robinson](https://stackabuse.com/pythons-os-and-subprocess-popen-commands/)中获得更多信息。感谢他的付出。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2021-02-05T15:52:18.590

如何将 shell 命令分解为一系列参数可能并不明显，尤其是在复杂情况下。`shlex.split()`可以对 args 进行正确的标记化（我正在使用 Blender 的调用示例）：

```
import shlex
from subprocess import Popen, PIPE
command = shlex.split('swfdump /tmp/filename.swf/ -d')
process = Popen(command, stdout=PIPE, stderr=PIPE)
stdout, stderr = process.communicate() 
```

[https://docs.python.org/3/library/subprocess.html](https://docs.python.org/3/library/subprocess.html)

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2020-05-21T13:15:18.183

以最简单的方式使用子进程！！

```
import subprocess
cmd = 'pip install numpy'.split()  #replace with your command
subprocess.call(cmd) 
```

# jquery - 检索 td 中的元素并附加到自身

> ID：12605508
> 
> 赞同：0
> 
> 时间：2012-09-26T15:43:21.520
> 
> 标签：jquery

我想复制 td 中的元素并使用 jquery 将其附加到自身（td）。使用以下代码，每次单击按钮时，都会复制 td 中的所有元素。我应该怎么做才能确保每次单击按钮时都只复制原始元素？

```
$('.row-add').live("click", function () {
      var price = $(this).closest('td').html()
      $(this).closest("td").append(price);
    }); 
```

这是html

```
<td>
                $<input class="price" value="50"/>
                /
                <select>
                  <option>Second</option>
                  <option>Minute</option>
                  <option>Hour</option>
                  <option>Day</option>
                  <option>Week</option>
                  <option>Biweek</option>
                  <option selected="selected">Month</option>
                </select>
                /
                 <select>
                  <option>Day</option>
                  <option>Week</option>
                  <option>Biweek</option>
                  <option selected="selected">Month</option>
                  <option>Quarter</option>
                  <option>Year</option>
                </select>
                <span class="delete-td"></span>
                <span class="row-add"></span>
</td> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:53:05.320

除非您包装它们（假设您要附加到克隆的 td 中），否则不会有将初始内容与任何附加数据分开的方法。我建议在原始数据周围放置一个带有类的跨度，并使用多部分选择器仅复制原始数据，例如：

`var price = $(this).closest('td span .original').html()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:49:38.720

该功能对我来说非常有用。我正在使用一个简单的表格作为 html：

```
<table>
    <tr>
        <td class="row-add">Click Me</td>
        <td>Not Me</td>
    </tr>
</table> 
```

我已经逐字复制了你的函数。只要确保在 DOM 加载后代码正在运行，你应该没问题。

# c++ - 在 Windows 环境中的 PostgreSQL 9.1 中创建函数

> ID：12605512
> 
> 赞同：2
> 
> 时间：2012-09-26T15:43:34.943
> 
> 标签：c++, visual-studio-2010, postgresql, dll, dynamic-loading

我在其中创建了一个`dll`文件，`visual studio 2010`我试图用它`dll`来`PostgreSQL 9.1`创建一个函数，但我收到了这个错误：

```
ERROR:  incompatible library "D:\visual_studio\DynamicLibrary\x64\Debug\funxx.dll":    
 missing magic block

HINT:  Extension libraries are required to use the PG_MODULE_MAGIC macro. 
```

我正在使用`64bits windows.i`检查`PostgreSQL`有关`C`语言功能和动态加载的文档，它说

```
#ifdef PG_MODULE_MAGIC
PG_MODULE_MAGIC;
#endif 
```

应该包括在内，`dynamic loading`但它没有说明`C++`兼容性。任何知道如何处理此问题的人？我如何删除该错误以`PostgreSQL`在 Windows 环境中使用 C++ 创建函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T00:19:29.150

你编译为`C`还是 as `C++`？如果您使用过`C++`，则需要按照[在 C++ 中编写扩展的](http://www.postgresql.org/docs/current/static/xfunc-c.html#EXTEND-CPP)`PG_MODULE_MAGIC`方式将您的内容包装在一个`extern "C"`块中。

如果可能的话，只需编写 plain`c`并 compile as plain `c`，将 C++ 排除在外。将 C++ 代码混合到 PostgreSQL 中既复杂又困难，因此对于初学者来说这不是一件好事。

如果您绝对必须使用 C++，最明智的方法是用 C++ 编写代码，`extern "C"`向它公开接口，其中 C++ 对象作为不透明`void`指针或指向空结构类型的指针传入和传出。`c`然后使用您公开的纯接口来编写您的 Pg 模块。有像[SWIG](http://www.swig.org/)这样的工具可以帮助生成这样的包装器，但是对于像 Pg 模块这样的东西通常不需要。

您可以谨慎地直接在 Pg 模块中使用 C++，但是如果您调用并收到错误，Pg`longjmp`基于错误处理*将完全破坏您的堆栈。*`Pg -> C++ -> Pg`说真的，不要这样做。保持 C++ 隔离。

# javascript - jQuery - 字符串变量被转义？

> ID：12605513
> 
> 赞同：0
> 
> 时间：2012-09-26T15:43:39.473
> 
> 标签：javascript, jquery

我有一个相当简单的脚本，旨在根据客户类型隐藏/取消隐藏各种表单字段。代码如下所示：

```
 var customerTypeFields = [];
    customerTypeFields['Individual'] = ['First Name(s)', 'Last Name', 'Date of Birth'];
    customerTypeFields['Limited Company'] = ['Name', 'Company Number'];
    customerTypeFields['Partnership'] = ['Name', 'Company Number'];

    $('#customer-type-selector').chosen().change( function() {
        var visibleFields = customerTypeFields[$(this).children("option[value='" + $(this).attr('value') + "']").text()];
        console.log(visibleFields);
        $.each(visibleFields, function(i, field) {
            $('#customer-features').find('input[data-feature-type=' + field + ']').parent().parent().show();
        });
    }); 
```

这似乎在某种程度上有效，但是在加载个人时我遇到了一个奇怪的错误，即：

```
Uncaught Error: Syntax error, unrecognized expression: input[data-feature-type=First (s)] 
```

您会注意到它`First (s)`不在我的数组中，因此看起来这个词`Name`被剥离了 - 知道为什么要这样编辑字符串吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:46:22.687

用双引号转义：

```
(...)  .find('input[data-feature-type="' + field + '"]')  (...) 
```

[在jQuery 的 Attribute Equals Selector 页面](http://api.jquery.com/attribute-equals-selector/)上查看更多信息。它基本上将其定义为：

> `jQuery('[attribute="value"]')`

# eclipse - Eclipse CDT 无法使用标准库创建新项目

> ID：12605514
> 
> 赞同：1
> 
> 时间：2012-09-26T15:43:40.693
> 
> 标签：eclipse, macos, iostream, eclipse-cdt, standard-library

我正在使用 Mac 并使用 eclipse cdt。我能够使用和编译我目前拥有的所有 c++ 项目，但是当我创建一个新项目时，它无法识别标准库。它用黄色下划线`#include <iostream>`，如果我尝试编译，错误说它找不到`iostream`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:11:59.280

这个[网站](http://www3.ntu.edu.sg/home/ehchua/programming/howto/EclipseCpp_HowTo.html)可能会对你有所帮助。（第 2.1 节第 2 步或只是在页面上搜索 iostream）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:47:42.810

您是否安装了命令行工具（gcc 等）？它们在 OS X 10.8 之前与 Xcode 一起安装，现在您需要使用 Xcode UI 单独安装它们。有关详细信息，请参阅[此](https://stackoverflow.com/questions/9353444/how-to-use-install-gcc-on-mac-os-x-10-8-xcode-4-4)StackOverflow 问题。

# ruby-on-rails - Ruby on Rails Ransack Datetime 到日期搜索

> ID：12605518
> 
> 赞同：8
> 
> 时间：2012-09-26T15:43:55.467
> 
> 标签：ruby-on-rails, ruby, search, date, ransack

像 carvil 一样，我的模型中有 created_at 的日期时间，尽管我想要“等于”谓词来比较 created_at 和日期（如“2012-09-26”）。

所以我在我的模型中添加了（为了添加铸造属性并取消旧的 created_at/update_at/deleted_at ：

```
ransacker :created_at do
    Arel::Nodes::SqlLiteral.new("date(items.created_at)")
end

ransacker :updated_at do
    Arel::Nodes::SqlLiteral.new("date(items.updated_at)")
end

ransacker :deleted_at do
    Arel::Nodes::SqlLiteral.new("date(items.deleted_at)")
end

# Hide some attributes for advanced search
UNRANSACKABLE_ATTRIBUTES = ["created_at", "updated_at", "deleted_at"]

def self.ransackable_attributes auth_object = nil
    (column_names - UNRANSACKABLE_ATTRIBUTES) + _ransackers.keys
end 
```

但是当我确认查询时（created_at 等于'2012-03-24'）我有这个错误：

```
NoMethodError (undefined method `name' for "date(items.created_at)":Arel::Nodes::SqlLiteral): 
```

令人惊讶的是，它适用于“大于”和“小于”。只有“等于”才会出现此错误。

我为我所有的模型做了所有这些，60% 的工作（剩下的 40% 发生了这个错误）。

**在控制台中：**

```
irb(main):232:0> Item.search(:created_at_eq => Date.today.to_s).result
(Object doesn't support #inspect) 
```

谢谢你的帮助

**编辑 ：**

我有一个 default_scope ： Item(:deleted_at false)

但我不知道为什么会出现错误

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-12-10T16:00:41.867

请参阅[Ransack wiki 的第二个示例](https://github.com/activerecord-hackery/ransack/wiki/Using-Ransackers#2-convert-a-user-string-input-and-a-database-datetime-field-to-the-same-date-format-to-find-all-records-with-a-datetime-field-created_at-in-this-example-equal-to-that-date-)，

# 在模型中：

```
ransacker :created_at , type: :date do
  Arel.sql('date(created_at)')
end 
```

# 在视图中：

```
<%= f.search_field(
  :created_at_date_equals, placeholder: t(:date_format)
  ) %>
...
<%= sort_link(@search, :created_at, default_order: :desc) %> 
```

# 配置/初始化程序/ransack.rb

```
Ransack.configure do |config|
  config.add_predicate 'date_equals',
  arel_predicate: 'eq',
  formatter: proc { |v| v.to_date }
  validator: proc { |v| v.present? },
  type: :string
end 
```

为日期相等搜索添加了新谓词“date_equals”。使用 type: 声明的 ransacker 并使用 Arel 从 datetime 列中获取日期

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-09T19:14:08.053

我对此有一些问题，并提出了这个：

```
ransacker :created_at, type: :date do
  Arel.sql('date(created_at)')
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-18T15:14:44.150

请更改`Arel::Nodes::SqlLiteral.new('date(column_name)')`为`Arel.sql('date(column_name)')`.

您的语法将是::

```
ransacker :created_at do
    Arel.sql("date(items.created_at)")
end

ransacker :updated_at do
    Arel.sql("date(items.updated_at)")
end

ransacker :deleted_at do
    Arel.sql("date(items.deleted_at)")
end 
```

我希望这会有所帮助。

# c++ - PC和Arduino之间的串行通信

> ID：12605519
> 
> 赞同：0
> 
> 时间：2012-09-26T15:43:58.570
> 
> 标签：c++, c, arduino, boost-asio

我为 Arnuino 编写了一个程序，该程序将一个带有联合的结构发送到 PC 上的程序。结构必须是整数，但我没有得到正确的输出。PC 上的程序使用 boost 库进行串行连接。并且是在 64 位（使用 vs2010）中构建和编译的。

如果我在联合中有一个整数变量，则该代码有效。但是带有联合的结构不起作用。只有一个整数得到数据，而那个数据是错误的。

我可能是 64 位（PC）和 32 位（Ardunio）的问题？任何人都可以帮我解决这个问题。提前致谢。

PC 代码片段（省略了串口设置）：

```
union packed{
  struct test{
  unsigned int data;
  unsigned int data2;
} struc;

 unsigned char bytes[8];
}SerialPacked;

  SerialPacked.struc.data = 0;
  SerialPacked.struc.data2 = 0;

  cout << "Data before: " << SerialPacked.struc.data << endl;
  cout << "Data2 before: " << SerialPacked.struc.data2 << endl;

  read(port,buffer((unsigned char*)&SerialPacked.bytes[0], 1));
  read(port,buffer((unsigned char*)&SerialPacked.bytes[1], 1));
  read(port,buffer((unsigned char*)&SerialPacked.bytes[2], 1));
  read(port,buffer((unsigned char*)&SerialPacked.bytes[3], 1));
  read(port,buffer((unsigned char*)&SerialPacked.bytes[4], 1));
  read(port,buffer((unsigned char*)&SerialPacked.bytes[5], 1));
  read(port,buffer((unsigned char*)&SerialPacked.bytes[6], 1));
  read(port,buffer((unsigned char*)&SerialPacked.bytes[7], 1));

  cout << "Data after: " << SerialPacked.struc.data << endl;
  cout << "Data2 after: " << SerialPacked.struc.data2 << endl; 
```

Arduino代码：

```
int ledPin = 13;

union packed{
    struct test{
      unsigned int data;
      unsigned int data2;
}struc;
    unsigned char bytes[8];
} 
SerialPacked;

void setup() {  
    pinMode(ledPin, OUTPUT); 
    Serial.begin(9600); 

   SerialPacked.struc.data = 0;
   SerialPacked.struc.data2 = 0;
};

void loop() {

while(1){
  digitalWrite(ledPin,HIGH);
  SerialPacked.struc.data = SerialPacked.struc.data + 1;
  SerialPacked.struc.data2 = SerialPacked.struc.data2 + 1;;

  for(int i=0;i <8; i++){ 
    Serial.write(SerialPacked.bytes[i]);
  };

    digitalWrite(ledPin,LOW);
    delay(1000);
 };

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:19:42.653

问题是`int` [在 Arduino 上是两个字节](http://arduino.cc/en/Reference/Int)，但`int`在您的 PC 上可能是四个字节。根据您的编译器，您可能会使用一个开关来设置 的大小`int`，或者您可以只使用更明确的类型。这个想法`int`是，它应该允许通过采用主机平台的自然大小来轻松地将代码从一个平台适应到另一个平台。但是，出于同样的原因，它不是在平台之间传输数据的好选择。

要确认这是问题所在，请尝试读取字节`SerialPacked`而不是访问`struc`. 我相信你会发现所有的数据都在那里——这只是你试图阅读它的方式，这就是问题所在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:13:04.407

我已经解决了这个问题...我将 Arduino 代码中 stuct 中的整数更改为 long。数据是正确的。

这是因为 32 位 Ardunio 上的 long 与 64 位 vs2010 代码上的整数大小相同吗？或者我在这里错过了什么？感谢您的反馈！

# objective-c - 滑动手势后无法编辑文本视图

> ID：12605523
> 
> 赞同：1
> 
> 时间：2012-09-26T15:44:11.787
> 
> 标签：objective-c, ios, xcode

我有一个文本视图，当我向右滑动时，它会将文本粘贴到其中。唯一的问题是我无法编辑文本视图。在我将滑动手势放到 textview 上后，它不再允许我编辑文本。一旦我取消手势，它就会再次起作用。

有谁知道为什么会发生这种情况或如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:52:33.867

尝试在您的文本字段上调用：

```
[yourTextField becomeFirstResponder]; 
```

告诉我这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T20:51:58.057

当我将滑动手势拖到我的应用程序上时，我将它拖到了文本视图本身上。通过这样做，它不允许我编辑我的文本视图。当我将滑动手势应用到我的视图而不是 textview 时，它允许我滑动以粘贴到该 textview 中，同时仍然可以对其进行编辑。

# php - 在 google+ api 中搜索公开帖子和页面

> ID：12605524
> 
> 赞同：0
> 
> 时间：2012-09-26T15:44:24.180
> 
> 标签：php, google-api, google-plus

我正在尝试将 google-api-php-client SDK 与 google plus api 服务一起使用。文档不是很清楚。我搜索活动吗？我是否需要获得 oAuth 令牌才能做我想做的事？

**更新：**现在使用

```
 $params = array(
              'orderBy' => 'best',
              'maxResults' => '20',
              'query' => 'Google+ API'
            );

   $results = $plus->activities->search($params); 
```

返回

```
 Array
(
    [kind] => plus#activityFeed
    [etag] => "5NTCbsXue5u92XtxuV0QeM_x9B4/58mHUy-IErItGIABIAhYhhUjJ-M"
    [selfLink] => https://www.googleapis.com/plus/v1/activities?query&maxResults=10
    [title] => Plus Search
    [updated] => 2012-09-27T14:03:35.132Z
    [id] => tag:google.com,2010:es-search-feed:z80ghJXVZe9m59_5-Ydk2g
    [items] => Array
        (
        )

) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-24T12:19:14.710

我遇到了同样的问题，这是我的做法：

```
$query = "some query";    
$params = array(
      'orderBy' => 'best',
      'maxResults' => '20',
);

$results = $plus->activities->search($query, $params);
foreach($results['items'] as $result) {
      print "Result: {$result['object']['content']}\n";
} 
```

即使是示例查询中的面团也是参数的一部分，但它不是。[正如您在 plus service Link](https://github.com/google/google-api-php-client/blob/master/src/Google/Service/Plus.php#L408)的搜索方法的实现中看到的那样，它应该作为单独的值发送

希望这对您有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T22:42:17.137

您不需要 OAuth 令牌来搜索活动。您只需在 Google API 控制台中注册一个开发者密钥。

1.  [在Google API 控制台](https://code.google.com/apis/console?api=plus)中注册开发者密钥。
2.  查看最新版本的[Google API PHP 客户端](https://code.google.com/p/google-api-php-client/source/checkout)。
3.  查看 Google+ 示例应用。[https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/plus/index.php](https://code.google.com/p/google-api-php-client/source/browse/trunk/examples/plus/index.php)

样本：

```
$params = array(
  'orderBy' => 'best',
  'maxResults' => '20',
  'query' => 'Google+ API'
);

$results = $plus->activities->search($params);
foreach($results['items'] as $result) {
  print "Result: {$result['object']['content']}\n";
} 
```

# c - 计算 C 中的连续 1

> ID：12605528
> 
> 赞同：5
> 
> 时间：2012-09-26T15:44:39.920
> 
> 标签：c, bitwise-operators

> **可能重复：**
> [查找 1 或 0 的连续位串](https://stackoverflow.com/questions/3304705/finding-consecutive-bit-string-of-1-or-0)

是否可以从左数连续的 1 整数？所以：从最高位开始的连续设置位的总数。

仅使用：

```
! ~ & ^ | + << >> 
```

`-1`=`0xFFFFFFFF`将返回 32

`0xFFF0F0F0`将返回 12 (FFF = 111111111111)

不幸的是，没有循环。

可以假设机器：

1.  使用 2s 补码，32 位整数表示。

2.  以算术方式执行右移。

3.  将整数移动超过字长时具有不可预测的行为。

我被禁止：

1.  使用任何控制结构，例如 if、do、while、for、switch 等。

2.  定义或使用任何宏。

3.  在此文件中定义任何附加函数。

4.  调用任何函数。

5.  使用任何其他操作，例如 &&、||、- 或 ?：

6.  使用任何形式的铸造。

7.  使用除 int 以外的任何数据类型。这意味着您不能使用数组、结构或联合。

我看过 [寻找 1 或 0 的连续位串](https://stackoverflow.com/questions/3304705/finding-consecutive-bit-string-of-1-or-0) 它正在使用循环，我不能使用。我什至不知道从哪里开始。

（是的，这是一项任务，但我只是向你们中那些足够熟练的人寻求帮助。我已经完成了几乎所有我需要做的事情，但这一个根本行不通。）

（对于那些仅仅因为它是为了学校而投反对票的人：常见问题解答：1 一个特定的编程问题，请检查 2 但是，如果您的动机是“我希望其他人向我解释 ______”，那么您可能没问题。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:40:13.230

给你。函数参数可以是有符号或无符号的。alg 与签名无关。

```
int leftmost_ones(int x)
{
    x = ~x;
    x = x | x >> 1 | x >> 2 | x >> 3 | x >> 4 | x >> 5 | x >> 6 | x >> 7 | 
        x >> 8 | x >> 9 | x >> 10 | x >> 11 | x >> 12 | x >> 13 | x >> 14 | 
        x >> 15 | x >> 16 | x >> 17 | x >> 18 | x >> 19 | x >> 20 | x >> 21 | 
        x >> 22 | x >> 23 | x >> 24 | x >> 25 | x >> 26 | x >> 27 | x >> 28 | 
        x >> 29 | x >> 30 | x >> 31;
    x = ~x;
    return (x & 1) + (x >> 1 & 1) + (x >> 2 & 1) + (x >> 3 & 1) + (x >> 4 & 1) + 
        (x >> 5 & 1) + (x >> 6 & 1) + (x >> 7 & 1) + (x >> 8 & 1) + (x >> 9 & 1) + 
        (x >> 10 & 1) + (x >> 11 & 1) + (x >> 12 & 1) + (x >> 13 & 1) + (x >> 14 & 1) +
        (x >> 15 & 1) + (x >> 16 & 1) + (x >> 17 & 1) + (x >> 18 & 1) + (x >> 19 & 1) +
        (x >> 20 & 1) + (x >> 21 & 1) + (x >> 22 & 1) + (x >> 23 & 1) + (x >> 24 & 1) +
        (x >> 25 & 1) + (x >> 26 & 1) + (x >> 27 & 1) + (x >> 28 & 1) + (x >> 29 & 1) +
        (x >> 30 & 1) + (x >> 31 & 1);
} 
```

有一些优化的版本：

```
int leftmost_ones(int x)
{
    x = ~x;
    x |= x >> 16;
    x |= x >> 8;
    x |= x >> 4;
    x |= x >> 2;
    x |= x >> 1;
    x = ~x;

    return (x & 1) + (x >> 1 & 1) + (x >> 2 & 1) + (x >> 3 & 1) + (x >> 4 & 1) + 
        (x >> 5 & 1) + (x >> 6 & 1) + (x >> 7 & 1) + (x >> 8 & 1) + (x >> 9 & 1) + 
        (x >> 10 & 1) + (x >> 11 & 1) + (x >> 12 & 1) + (x >> 13 & 1) + (x >> 14 & 1) +
        (x >> 15 & 1) + (x >> 16 & 1) + (x >> 17 & 1) + (x >> 18 & 1) + (x >> 19 & 1) +
        (x >> 20 & 1) + (x >> 21 & 1) + (x >> 22 & 1) + (x >> 23 & 1) + (x >> 24 & 1) +
        (x >> 25 & 1) + (x >> 26 & 1) + (x >> 27 & 1) + (x >> 28 & 1) + (x >> 29 & 1) +
        (x >> 30 & 1) + (x >> 31 & 1);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:52:45.243

你可以使用循环吗？

```
int mask = 0x80000000;
int count = 0;
while (number & mask) {
    count += 1;
    mask >>= 1;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:35:54.533

我认为这是可行的，基本上展开典型的循环并且通常很烦人。

怎么样：当且仅当答案为 1 时表达式为 1？我提供：

```
const int ok1 = !((number & 0xc0000000) - 0x800000000); 
```

当然，`!`减法是为了解决有人破坏了`==`我们键盘上的键的问题。

然后，当且仅当 anwer 为 2 时，表达式为 1：

```
const int ok2 = !((number & 0xe0000000) - 0xc0000000); 
```

如果你继续形成这些，最终的答案是它们的总和：

```
const int answer = ok1 + ok2 + ... + ok32; 
```

顺便说一句，我似乎不记得我在学校时被分配了这些奇怪的限制作业，我想时代已经改变了。:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T16:09:24.767

你可以这样做：

```
int result = clz(~x); 
```

即反转所有位，然后计算前导零。

`clz`返回前导零位的数量（通常也称为`ffs`or `nlz`） - 请参阅此处了解实现细节：[http ://en.wikipedia.org/wiki/Find_first_set#Algorithms](http://en.wikipedia.org/wiki/Find_first_set#Algorithms)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T15:50:39.947

```
int count_consecutive_bits(unsigned int x) {
    int res = 0;
    while (x & 0x80000000) { ++res; x <<= 1; }
    return res;
} 
```

# c++ - AMD GPU 的 OpenCL 时间测量问题

> ID：12605546
> 
> 赞同：1
> 
> 时间：2012-09-26T15:45:39.300
> 
> 标签：c++, opencl, gpu, amd-processor, amd-app

我最近比较了两种做内核运行时测量，我看到了一些令人困惑的结果。

我使用带有集成 GPU 和 Ubuntu Linux ( `CL_PLATFORM_VERSION`is ) 的 AMD Bobcat CPU (E-350 `OpenCL 1.2 AMD-APP (923.1)`)。

基本的 gettimeofday 想法如下所示：

```
clFinish(...)  // that all tasks are finished on the command queue
gettimeofday(&starttime,0x0)
clEnqueueNDRangeKernel(...)
clFlush(...)
clWaitForEvents(...)
gettimeofday(&endtime,0x0) 
```

这表示内核需要大约 5466 毫秒。

我用`clGetEventProfilingInfo`for `QUEUED`/ `SUBMIT`/ `START`/进行的第二次测量`END`。

使用 4 个时间值，我可以计算在不同状态下花费的时间：

*   排队时间：0.06 毫秒，
*   提交时间：2733 毫秒，
*   执行时间：2731 ms（实际执行时间）。

我看到它加起来是 5466 毫秒，但是为什么它会在一半的时间内保持提交状态？

有趣的是：

*   提交状态始终是实际执行时间的一半，即使对于不同的内核或不同的工作负载（因此它不能是恒定的设置时间），

*   对于 CPU，提交状态的时间为 0，执行时间等于 gettimeofday 结果，

*   我在 Intel Ivy Bridge 上使用 CPU 和 GPU 在 Windows 上测试了我的内核，但我没有看到那里的效果。

有人有线索吗？

我怀疑 GPU 运行内核两次（导致 gettimeofday 是实际执行时间的两倍）或者函数 clGetEventProfilingInfo 对于 AMD GPU 无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:25:49.770

我在 AMD 论坛上发布了这个问题。他们说这是 AMD 分析器中的一个错误。

[http://devgurus.amd.com/thread/159809](http://devgurus.amd.com/thread/159809)

# wpf - 禁用 ListView 中列的大小调整

> ID：12605547
> 
> 赞同：4
> 
> 时间：2012-09-26T15:45:40.427
> 
> 标签：wpf, listview, resize

我的窗口中有一个 ListView 有许多列。用户不能调整部分或全部列的大小，因为它们已经具有最佳宽度，而意外调整大小只会使情况变得更糟。现在该问题有一些可用的答案，但所有答案都以重新设置控件样式而告终。不幸的是，我最终得到了大量的 XAML 代码页面，这些代码高度特定于平台/主题。当我使用 Blend 创建默认样式的副本时，我得到了许多仅适用于 Win7 Aero 的渐变等，但不适用于 XP 主题或其他任何内容。

因此，替换控件的整个样式不是一种选择。（它几乎从来没有真的是。）

我已经确定了需要隐藏的部分，它被命名为“PART_HeaderGripper”。我以前做过这样的事情，使用代码隐藏中的以下代码从 ProgressBar 中删除运行的发光和其他部分：

```
var glow = progressBar.Template.FindName("PART_GlowRect", progressBar) as FrameworkElement;
if (glow != null) glow.Visibility = visibility; 
```

但这不适用于 GridViewColumnHeader，因为 Template.FindName 没有找到任何东西（返回 null）。我很确定必须有一种方法可以在运行时修改视觉效果。但我现在无法弄清楚。任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T20:34:00.943

测试：

```
<GridViewColumnHeader Content="Value" IsHitTestVisible="False"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-04T15:20:48.243

我在我的一个项目中遇到了同样的问题。我找到了一个解决方案，我认为这不是最好的方法，但至少有效。

我正在使用一些数据绑定和单击事件对项目进行排序，因此将列设置为只读不是一种方法。

这是xml中的代码部分：

```
<ListView Name="ListWievResults" HorizontalAlignment="Left" Height="526" Margin="10,10,0,0" VerticalAlignment="Top" Width="400" ItemsSource="{Binding Results}" SelectedItem="{Binding SelectedResult}" IsSynchronizedWithCurrentItem="True" SelectionChanged="ListWievResults_SelectionChanged" SelectionMode="Single">
        <ListView.View>
            <GridView AllowsColumnReorder="False">
                <GridView.Columns>
                    <GridViewColumn DisplayMemberBinding="{Binding Path=Name}" Width="200">
                        <GridViewColumnHeader Content="Parameter" Click="GridViewColumnHeader_Click" PreviewMouseMove="GridViewColumnHeader_PreviewMouseMove"/>
                    </GridViewColumn>
                    <GridViewColumn DisplayMemberBinding="{Binding Path=ID}" Width="100">
                        <GridViewColumnHeader Content="SAFE ID" Click="GridViewColumnHeader_Click" PreviewMouseMove="GridViewColumnHeader_PreviewMouseMove"/>
                    </GridViewColumn>
                    <GridViewColumn DisplayMemberBinding="{Binding Path=Author}" Width="95">
                        <GridViewColumnHeader Content="Author" Click="GridViewColumnHeader_Click" PreviewMouseMove="GridViewColumnHeader_PreviewMouseMove"/>
                    </GridViewColumn>
                </GridView.Columns>
            </GridView>
        </ListView.View>
    </ListView> 
```

以及来自 th xaml.cs 文件的相关部分：

```
private void GridViewColumnHeader_PreviewMouseMove(object sender, System.Windows.Input.MouseEventArgs e)
    {
        e.Handled = true;
    } 
```

这不是最漂亮的方式，因为标记仍然存在，表明您可以调整列的大小，但至少它不允许这样做。一个缺点是，如果您想将“PreviewMouseMove”事件用于其他事情，那将不起作用。

我真的希望这会有所帮助。

# javascript - ExtJS 设置一个 textareafield setValue()

> ID：12605548
> 
> 赞同：0
> 
> 时间：2012-09-26T15:45:42.163
> 
> 标签：javascript, extjs

我正在学习 Extjs 并且遇到了一个问题，当我尝试将新文本附加到一个项目时，我得到一个错误**tf.setValue is not a function**同样适用`getValue`。当我尝试`setVisible`它应该像它一样工作。

```
Ext.Loader.setConfig({enabled:true});

Ext.application({
    name: 'app',
    controllers:[
  ],
    appFolder: 'app',
    launch: function() {
        var panel = new Ext.form.FormPanel({
          renderTo:Ext.getBody(),
          title:'Panel',
          width:400,
          bodyPadding: 10,
          autoHeight:true,
          items:[{
            xtype:'textareafield',
            name: 'textInput',
            id:'textId',
            value:'why not'
          },{
            xtype:'button',
            text:'Helllo',
            handler:function(){
              console.log('button click')
              var tf = Ext.get('textId');
                    tf.setValue('This should change!')
            }
          }],
        });
    }
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:32:18.187

那是因为`Ext.get()`将返回一个`Ext.Element`.

您要使用的是`Ext.getCmp('textId')`哪个将返回组件。

Element 基本上是围绕 Dom 元素的 Ext 包装器，因此它具有 setVisible 之类的方法，但您想要获取文本区域组件，该组件具有您所追求的所有方法。

# c++ - constexpr 中使用的非 const ：标准是怎么说的？

> ID：12605552
> 
> 赞同：0
> 
> 时间：2012-09-26T15:45:52.093
> 
> 标签：c++, c++11, standards-compliance, constexpr

C++11 iso 标准对这样的表达有什么看法：

```
class MyClass
{
    public:
        constexpr int test()
        {
            return _x;
        }

    protected:
        int _x;
}; 
```

`_x`是在 a 中使用的非常量`constexpr`：它会产生错误，还是会`constexpr`被简单地忽略（就像我们传递非常量参数时一样）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T15:53:37.110

这很好，虽然有点没用：

```
constexpr int n = MyClass().test(); 
```

由于`MyClass`是一个聚合，像这样对它进行值初始化将对所有成员进行值初始化，所以这只是零。但是通过一些润色，这可以变得真正有用​​：

```
class MyClass
{
public:
    constexpr MyClass() : _x(5) { }
    constexpr int test() { return _x; }
// ...
};

constexpr int n = MyClass().test();  // 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:56:01.680

如果表达式不解析为常量表达式，则不能这样使用。但它仍然可以使用：

```
#include <array>
constexpr int add(int a, int b)
{
  return a+b;
}
int main()
{
  std::array<int, add(5,6)> a1; // OK
  int i=1, 
  int j=10;
  int k = add(i,j); // OK
  std::array<int, add(i,j)> a2; // Error!
} 
```

# wcf - 想在 Azure 平台上部署 WCF Web 服务

> ID：12605556
> 
> 赞同：0
> 
> 时间：2012-09-26T15:45:57.960
> 
> 标签：wcf, azure-storage

我想在 Azure 平台上部署我的 WCF Web 服务。我为我的网站创建了一个存储帐户，还创建了一个云服务并将我的包文件和配置文件上传到临时站点。但在上传时，消息显示“您的暂存部署正在开始。等一下，一旦部署开始，页面就会刷新。我等了 2-3 个小时，却没有得到想要的输出。

我做得对吗？还是有什么我忘记了？请帮忙...！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:45:15.123

您的代码或包装中很可能存在导致角色不断重新启动的问题。这是一个相当普遍的问题，但有很多可能的原因（缺少程序集引用、未捕获的异常、Run() 方法正在退出、启动任务失败或许多其他事情）。您需要收集更多信息以准确了解问题所在以及如何解决问题。

[SO上](https://stackoverflow.com/search?q=azure%20role%20recycling%20loop)有很多关于这个主题的主题。还有一篇[Microsoft 帖子](http://msdn.microsoft.com/en-us/library/windowsazure/hh134844.aspx)讨论了如何诊断此类问题。这些是开始的好地方。

# java - 如何使用 Java android 代码发送多条短信？

> ID：12605566
> 
> 赞同：0
> 
> 时间：2012-09-26T15:46:30.153
> 
> 标签：java, sms

我正在创建一个能够从 PC 向手机发送短信的程序。无论是使用在线网关还是使用加密狗发送短信都没有关系（但是，你知道，只有当我们使用加密狗时，发件人的原始号码才会出现，不是吗？）。我在互联网上找到的大多数示例都是在 2006-2010 年编写的，它们都使用 JavaMail 和 Java Communication API，而现在几乎没有通信 api，可能是 oracle 放弃了它。

我正在寻找一些最新的并且正在运行的技术。这是我的第一次尝试。我很高兴看到教程。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:04:49.900

在做了几次 Try & Error 之后，我在一年前创建了以下代码，它工作正常。它使用 GSM 调制解调器发送短信。您的 GSM 调制解调器应该连接到您的 Comm 端口。您将需要 Comm.jar 库来运行此代码，您可以从[http://llk.media.mit.edu/projects/picdev/software/javaxcomm.zip下载它](http://llk.media.mit.edu/projects/picdev/software/javaxcomm.zip)

我的代码是触发[AT 命令](https://www.google.co.in/#hl=en&safe=off&output=search&sclient=psy-ab&q=AT+Commands&oq=AT+Commands&gs_l=hp.3..0l10.1133.7051.1.7196.13.8.1.4.4.1.896.3823.3-1j3j2j1.7.0.les;..0.0...1c.1.ygQm59f64go&bav=on.2,or.r_gc.r_pw.r_qf.&fp=3f7e71b5cbd4d390&biw=1366&bih=667)的简单程序版本。它只是在 GSM 调制解调器上触发 AT 命令来发送 SMS。

```
import javax.comm.*;
import java.io.*;
import java.util.*;

public class SimpleWrite implements Runnable, SerialPortEventListener
{
    public void run()
    {}

    static Enumeration portList;
    static CommPortIdentifier portId;
    static String messageString = "";
    static char ch = '"';
    static String dest = ch + "111111111" + ch;  // 10 Digit Mobile Number.
    static InputStream inputStream;

    static SerialPort serialPort;
    static OutputStream outputStream;

    public void serialEvent(SerialPortEvent event)
    {
        switch (event.getEventType())
        {
        case SerialPortEvent.BI:
        case SerialPortEvent.OE:
        case SerialPortEvent.FE:
        case SerialPortEvent.PE:
        case SerialPortEvent.CD:
        case SerialPortEvent.CTS:
        case SerialPortEvent.DSR:
        case SerialPortEvent.RI:
        case SerialPortEvent.OUTPUT_BUFFER_EMPTY:
            break;
        case SerialPortEvent.DATA_AVAILABLE:
        {

            BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream));
            String line = "";
            try
            {

                while ( (line = reader.readLine()) != null)
                {
                    System.out.println(line);
                }
            }
            catch (IOException e)
            {
                System.err.println("Error while reading Port " + e);
            }
            break;

        }
        } //switch
    }

    public SimpleWrite(SerialPort serial)
    {
        try
        {
            inputStream = serial.getInputStream();
            try
            {
                serial.addEventListener(this);
            }
            catch (TooManyListenersException e)
            {
                System.out.println("Exception in Adding Listener" + e);
            }
            serial.notifyOnDataAvailable(true);

        }
        catch (Exception ex)
        {
            System.out.println("Exception in getting InputStream" + ex);
        }

    }

    public static void main(String[] args)
    {
        String line1 = "AT+CMGF=1\r\n";
        String line2 = "AT+CMGS=" + dest + "\r\n";
        String line3 = messageString + "\r\n";
        //String line1 = "AT+CREG=2";
        //String line2 = "AT+CGREG?";

        portList = CommPortIdentifier.getPortIdentifiers();
        while (portList.hasMoreElements())
        {
            portId = (CommPortIdentifier) portList.nextElement();
            if (portId.getPortType() == CommPortIdentifier.PORT_SERIAL)
            {
                if ( portId.getName().equals("COM11"))
                {
                    System.out.println("SMS Sending....Port Found");
                    try
                    {
                        serialPort = (SerialPort) portId.open("SimpleWriteApp", 2000);
                        SimpleWrite wr = new SimpleWrite(serialPort);

                    }
                    catch (PortInUseException e)
                    {
                        System.out.println("Port In Use " + e);
                    }
                    try
                    {
                        outputStream = serialPort.getOutputStream();
                    }
                    catch (IOException e)
                    {
                        System.out.println("Error writing to output stream " + e);
                    }
                    try
                    {
                        serialPort.setSerialPortParams(9600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1, SerialPort.PARITY_NONE);
                    }
                    catch (UnsupportedCommOperationException e)
                    {
                    }
                    try
                    {
                        outputStream.write(line1.getBytes());
                        outputStream.write(line1.getBytes());
                        outputStream.write(line2.getBytes());
                        outputStream.write(line3.getBytes());
                        outputStream.write(26);
                        outputStream.flush();
                    }
                    catch (Exception e)
                    {
                        System.out.println("Error writing message " + e);
                    }
                }
            }
        }
    }

    /** show text in the text window
     * @param Text text string to show on the display
     */
    public static void showText(String Text)
    {
        System.out.println(Text);
    }
} 
```

# jquery - jquery tokenInput如何将ajax调用url动态更改为脚本

> ID：12605568
> 
> 赞同：2
> 
> 时间：2012-09-26T15:46:32.373
> 
> 标签：jquery, ajax, jquery-tokeninput

我正在使用这个强大而漂亮的插件[http://loopj.com/jquery-tokeninput/](http://loopj.com/jquery-tokeninput/)，但是我遇到了一个问题。

有没有办法在我的 tokenInput.xml 中动态更改或更改 ajax 调用的 URL。

举个例子。

```
jQuery("#selector").tokenInput("http://mysite.com?name=John"); 
```

当我单击页面上的按钮时，我想将 url 从更改`http://mysite.com?name=John`为`http://mysite.com?name=Adam`

所以整个逻辑是这样的：

```
jQuery("#myButton").click(function(){
    //Change the URL of the jQuery("#selector").tokenInput();
}); 
```

起初我所做的实际上是这样的：

```
jQuery("#myButton").click(function(){
        jQuery("#selector").tokenInput("http://mysite.com?name=Adam");
}); 
```

这样做的问题是它创建了类的副本`token-input-list-facebook`，只是为了看看我在说什么。

从这样：

![在此处输入图像描述](../Images/3c9472732dafa795139ea437f3a1d01f.png)

**到**

![在此处输入图像描述](../Images/100a27d0b20ba2f2ec1bd2773538d2a5.png)

如您所见，它复制了 textinput 或 class `token-input-list-facebook`。

我只是向您展示我在我的应用程序中尝试执行的操作的简单逻辑。

有没有办法做到这一点？您的帮助将不胜感激和奖励！:-)

顺便说一句，我使用的是 facebook 主题，这就是类名是`token-input-list-facebook`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T01:35:02.780

我自己解决了。这就是我所做的。

```
jQuery("#selector").tokenInput("http://mysite.com?name=John");

jQuery("#myButton").click(function(){
    jQuery(".token-input-list-facebook").remove();
    jQuery("#selector").tokenInput("http://mysite.com?name=Adam");
}); 
```

我只是`remove()`类`token-input-list-facebook`，因为这是每次我们初始化 tokenInput 时添加的类。然后使用所需的 ajax URL 再次重新初始化 tokenInput。

太糟糕了，我在 TokenInput 中没有看到关于如何做到这一点的好的文档。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-26T16:22:11.393

从该组件的代码中：您可以提供一个返回字符串的函数，而不是提供一个字符串作为 url。所以你应该能够写：

```
function setupMyTokenInput($input, $btn){
   //this "protected" var will hold the target url
   var url = 'http://mysite.com?name=John';

   $input.tokenInput( 
   //instead of a string, give a function which returns the variable's value
   function(){
     return url;
   });

   $btn.click(function(){
       //clicking the button changes the var's value
       url = 'http://mysite.com?name=Adam';
   });
}

$(function(){
   setupMyTokenInput( $('#selector'), $('#button') );
}); 
```

我还没有尝试过，但是接近这个的东西应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-09T02:50:25.687

这里提到了解决方案： [https ://github.com/loopj/jquery-tokeninput/pull/77#issuecomment-1291896](https://github.com/loopj/jquery-tokeninput/pull/77#issuecomment-1291896)

将回调函数传递给 url：

```
$("#searchKeywords").tokenInput(function() {
  return 'ajax_scripts/keyword_search.php?gameId=' + $('#gameId').val();
}, {theme: "facebook"}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-26T17:39:13.183

您需要在初始化令牌输入时传递调用函数的 URL。像这样

```
function buildURL(){
    url=[build your url here]
    return url
}

jQuery("#selector").tokenInput(buildURL); 
```

就是这样，然后当用户在通过ajax调用之前按下一个键tokeinput调用函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-31T17:03:37.397

如果您希望 tokenInput 与 ajax 一起使用，这里是您在 asp.net (vb) [https://github.com/yanivsuzana/jquery-tokeninput-ajax-asp.net-vb中使用处理程序的示例](https://github.com/yanivsuzana/jquery-tokeninput-ajax-asp.net-vb)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2016-04-05T11:56:54.000

```
function buildURL(){
    url=[build your url here]
    return url
}

jQuery("#selector").tokenInput(buildURL); 
```

# winforms - 基础设施控制的奇怪设计问题

> ID：12605572
> 
> 赞同：2
> 
> 时间：2012-09-26T15:46:45.150
> 
> 标签：winforms, infragistics

我正在开发现有的 WinForms 应用程序，但在 WinForms 应用程序中的 Infragistics 控件存在一些奇怪的问题。

当我在具有 Infragistics 控件的项目中打开表单或用户控件时，它看起来像这样[http://sdrv.ms/S7gvmS](http://sdrv.ms/S7gvmS)

我无法访问设计图面上的任何控件。点击什么都不做。并且，所有控件都出现在下部区域。

所以我创建了一个新的测试解决方案并删除了一些 Infragisstics 控件并得到了这个[http://sdrv.ms/SRdo2y](http://sdrv.ms/SRdo2y)

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-29T14:21:14.697

当我在可能是许可证或版本问题之前遇到类似问题时，如果未安装有效许可证，Infragistics 库包含的代码会在设计时阻止它们工作。要解决此问题，我首先建议您删除解决方案中的所有 *.licx 文件。这些很容易损坏，尤其是在您使用源代码控制时，并且在设计时应该正确重新生成。如果失败，那么我会尝试卸载并重新安装 Infragistics，确保安装的版本与您的项目参考的版本相匹配。

PS意识到这对原始海报的帮助为时已晚，但希望能帮助人们在未来遇到类似问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-19T20:45:07.057

当 Visual Studio 找不到设计程序集时会发生这种情况。组件引用设计器，如果 Visual Studio 找不到设计器，则假定对象是组件而不是控件，并将其放置在系统托盘中。

通常，这表明您在安装组件时出现问题，因此通常的解决方案是重新安装。

# git - 可以提交到存储库的所有可用 Git 特殊文件有哪些？

> ID：12605576
> 
> 赞同：13
> 
> 时间：2012-09-26T15:46:58.463
> 
> 标签：git

我能想到的两个例子是`.gitattributes`和`.gitignore`。

有人可以列出所有这些吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T01:40:26.650

我搜索了 git 本身的 git 存储库，虽然我认为任何地方都不存在官方列表，但我确实注意到我所知道的所有这些都在 git-config 手册页（`git help config`）中提到了。因此，我在该页面上搜索了“文件”，这就是我发现的：

*   [`.gitignore`](http://git-scm.com/docs/gitignore)- git 忽略的 blob 列表。影响 和 之类`git add`的命令`git clean`。
*   [`.gitattributes`](http://git-scm.com/docs/gitattributes)- 让您定义文件的属性（例如，更改文件在 diff 中的外观）。
*   [`.mailmap`](http://git-scm.com/docs/git-shortlog)- 让你告诉 git 历史中重复的名字或电子邮件实际上是同一个人。影响`git shortlog -ns`, 或等命令`git log --format="%aN <%aE>"`。
*   [`.gitmodules`](http://www.kernel.org/pub/software/scm/git/docs/gitmodules.html)- 让我们定义子模块（您的 git 存储库的子目录，它们是其他 git 存储库的签出）。
*   `*.keep`- 与制作`git gc`忽略包有关。我找不到太多关于此的信息，所以我什至不确定它是您提交到存储库的文件还是只是存在于`.git`. 如果有人知道更多，请发表评论。

这就是我发现的全部。我希望我没有错过任何东西。

# android - Android - 查看子项数量更改时的侦听器/回调

> ID：12605578
> 
> 赞同：6
> 
> 时间：2012-09-26T15:47:03.540
> 
> 标签：android, callback, listener

在Android中，可以使用/实现一个监听器，当给定视图的子节点数量动态变化时触发回调？例如，一个视图有 3 个直接子级，并且通过代码删除了一个，我需要一个事件来触发说直接子级的数量已经改变。

澄清一下，我不需要在视图树上执行深度遍历来计算子节点数，我只是对计算给定视图第一层的子节点数感兴趣。

非常感谢

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-26T16:06:27.443

我相信您想使用[OnHierarchyChangeListener](http://developer.android.com/reference/android/view/ViewGroup.OnHierarchyChangeListener.html)：

> 此视图中的层次结构更改时要调用的回调的接口定义。每当将子级添加到此视图中或从中删除时，层次结构都会发生变化。

它有两个回调：

*   [onChildViewAdded()](http://developer.android.com/reference/android/view/ViewGroup.OnHierarchyChangeListener.html#onChildViewAdded%28android.view.View,%20android.view.View%29)
*   [onChildViewRemoved()](http://developer.android.com/reference/android/view/ViewGroup.OnHierarchyChangeListener.html#onChildViewRemoved%28android.view.View,%20android.view.View%29)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T15:59:16.547

它很容易欺骗。

1.  只需扩展您添加视图的视图组并覆盖删除和可选的 addView 方法。

2.  将您的回调接口实现提供给您的任何 ViewGroup 类方法以设置侦听器。从重写的 remove 和 addView 方法中调用其委托。使您的回调接口委托接收当前大小。

像这样的东西

```
public class MyViewGroup extends LinearLayout {

  // provide constructor implmentation to justify super constructor requirement

  private OnSizeChangeListener callback;

  public void setOnSizeChangeListener(OnSizeChangeListener callback) {
     this.callback = callback;
  }

  @Override
  public void remove(View view) {
    super.remove(view);
    if(callback != null) {
       callback.sizeChanged(getChildCount);
    }
  }   
} 
```

# c# - ResourceDictionary 内 DataTemplate 中的 CommandBinding，未正确分配处理程序

> ID：12605579
> 
> 赞同：1
> 
> 时间：2012-09-26T15:47:05.057
> 
> 标签：c#, .net, wpf, xaml, resourcedictionary

我有一个`ResourceDictionary`，其中包含一个`DataTemplate`. 在这个 DataTemplate 的资源中，我声明了一个`CommandBindingCollection`. 我的 ResourceDictionary 有一个代码隐藏文件，我在其中声明了 Executed/CanExecute 的处理程序。

我遇到的问题是，当我从 中检索我`CommandBindingCollection`的时`ResourceDictionary`，未分配 Executed/CanExecute 处理程序。使用调试器，我可以看到处理程序为空。为什么会这样，我该如何解决？

**资源字典 XAML：**

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                    xmlns:local="Test"
                    x:Class="Test.MyResourceDictionary">

    <DataTemplate x:Key="Template"
                  x:Name="Template">
        <DataTemplate.Resources>
            <CommandBindingCollection x:Key="CommandBindings">
                <CommandBinding Command="local:TestCommands.Test"
                        Executed="testExecuted" 
                        CanExecute="testCanExecute" />
            </CommandBindingCollection>
        </DataTemplate.Resources>

        <!-- More stuff here -->

    </DataTemplate>
<ResourceDictionary/> 
```

**ResourceDictionary 代码隐藏：**

```
public partial class MyResourceDictionary: ResourceDictionary
{
    public MyResourceDictionary() 
    { 
        InitializeComponent(); 
    } 

    private void testExecuted(object sender, ExecutedRoutedEventArgs e)
    {

    }

    private void testCanExecute(object sender, CanExecuteRoutedEventArgs e)
    {

    }
} 
```

**更新**

我将它与`DataTemplateSelector`用于应用 DataTemplate 的 AvalonDock 一起使用。

这是我加载模板的方式：

```
public override DataTemplate SelectTemplate(object item, DependencyObject container)
{
    if (item is TestViewModel)
    {
        ResourceDictionary res = Application.LoadComponent(new Uri("/MyResourceDictionary.xaml", UriKind.Relative)) as ResourceDictionary;
        DataTemplate template = res["Template"] as DataTemplate;
        if(template != null)
        {
            CommandBindingCollection commandBindings = 
                template.Resources["CommandBindings"] as CommandBindingCollection;

            if(commandBindings != null)
            {
                foreach(var binding in commandBindings)
                {
                     // add commandbinding to the container control
                     // here, using the debugger i can see that the handlers for the commandbinding
                     // are always null (private variables that I can only see using debugger)
                }
            }
            return template;
        }
    }
    return base.SelectTemplate(item, container);
} 
```

如果我`CommandBindingCollection`直接将其移入`ResourceDictionary`并以这种方式访问​​它：

```
CommandBindingCollection commandBindings = 
            res["CommandBindings"] as CommandBindingCollection; 
```

然后正确设置处理程序。我想知道为什么当我在 DataTemplate 的资源中声明它时它不能设置事件处理程序的委托。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:52:29.337

我的问题与 .NET 框架中的错误有关，该错误似乎已在 4.5 中修复。

4.0 上有针对该问题的修补程序：http: [//support.microsoft.com/kb/2464222](http://support.microsoft.com/kb/2464222)

就我而言，应用修补程序解决了这个问题。我的猜测是，在 CommandBindingCollection XAML 解析器的某个地方，异常被静默处理。

# iphone - iPhone xcode 中的 MySQL 数据库

> ID：12605583
> 
> 赞同：1
> 
> 时间：2012-09-26T15:47:11.030
> 
> 标签：iphone, mysql, xcode, uiimage, uilabel

如何从 MySQL 数据库中呈现 UILabel 和 UIImage？我能够将应用程序与 MySQL 数据库连接，但我对如何在 UILabel 和 UIImage 视图中呈现它感到困惑。

这是我的代码：

```
NSString *strURL = [NSString stringWithformat:@"http://localhost/database/login.php?username=1234];

NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:27:52.317

您无法在 iOS 中访问 PHP 脚本，因为 PHP 需要像 Wamp / Apache 这样的 PHP 服务器来执行 PHP 脚本。

数据库交互请参考[此链接](http://dblog.com.au/iphone-development-tutorials/iphone-sdk-tutorial-reading-data-from-a-sqlite-database/) 也可以参考core data

# java - 使用 Libgdx 更新相机位置

> ID：12605584
> 
> 赞同：3
> 
> 时间：2012-09-26T15:47:20.437
> 
> 标签：java, libgdx

我试图让一个`OrthographicCamera`跟随用户控制的精灵。我根本无法让相机正确更新位置。与其他人所做的相比，我似乎看不出我的代码有什么问题。

我仍在学习，此时我会假设问题是由我目前不完全理解的简单事情引起的。

任何帮助表示赞赏，谢谢。

这是我的渲染器：

```
public class WorldRenderer {

private static final float CAMERA_WIDTH = 10;
private static final float CAMERA_HEIGHT = 7;

private World world;
private OrthographicCamera oCam;
private Hero hero;
ShapeRenderer debugRenderer = new ShapeRenderer();

/** TEXTURES **/
private Texture heroTexture;
private Texture tileTexture;

private SpriteBatch spriteBatch;
private int width, height;
private float ppuX; // Pixels per unit on the X axis
private float ppuY; // Pixels per unit on the Y axis

public void setSize (int w, int h) {
    this.width = w;
    this.height = h;
    ppuX = (float)width / CAMERA_WIDTH;
    ppuY = (float)height / CAMERA_HEIGHT;
}

public WorldRenderer(World world, boolean debug) {
    hero = world.getHero();
    this.world = world;
    spriteBatch = new SpriteBatch();        
    oCam = new OrthographicCamera(Gdx.graphics.getWidth(), Gdx.graphics.getHeight());   
    oCam.update();  
    loadTextures();
}

private void loadTextures() {
    tileTexture = new Texture(Gdx.files.internal("images/tile.png"));
    heroTexture = new Texture(Gdx.files.internal("images/hero_01.png"));
}

public void render() {
    oCam.update();
    spriteBatch.begin();
    spriteBatch.disableBlending();
    drawTiles();
    spriteBatch.enableBlending();
    drawHero();
    spriteBatch.end();
}

 private void drawHero() {
    spriteBatch.draw(heroTexture, hero.getPosition().x * ppuX, hero.getPosition().y * ppuY, Hero.SIZE * ppuX, Hero.SIZE * ppuY);
    oCam.position.set(hero.getPosition().x, hero.getPosition().y, 0);
 }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:53:04.350

SpriteBatch 管理自己的投影和变换矩阵。因此，您必须设置它的矩阵（如果可能，在调用 begin() 之前）。

除非您需要单独访问矩阵（投影和模型视图，例如在着色器中），否则将投影矩阵设置为投影模型视图矩阵就足够了。

无论如何，这应该适用于您的代码：

```
oCam.update();
spriteBatch.setProjectionMatrix(oCam.combined); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T17:12:54.793

`oCam.apply(Gdx.gl10);`尝试在你之后打电话 `oCam.update();`

update() 仅进行计算，但您从未应用它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-08T08:16:16.627

关于 idaNakav 的回答，我再也看不到 LibGDX 相机上的应用功能，以防其他人偶然发现！所以 update() 现在我想应该就足够了。

我的问题有点不同，我试图用透视相机将我的相机放在某些位置/lookAts，它必须被操作两次才能工作。

我在打电话：

```
camera.lookAt(xyz), camera.position.set(xyz), camera.up.set(xyz) 
```

第一次调用使相机更新为一个非常奇怪的变换。我应该一直在做：

```
camera.position.set(xyz), camera.lookAt(xyz), camera.up.set(xyz) 
```

# perl - 优化 Perl 脚本 - 在 40GB+ 文件上运行太慢

> ID：12605585
> 
> 赞同：2
> 
> 时间：2012-09-26T15:47:29.973
> 
> 标签：perl, date, optimization, data-conversion

我制作了以下 Perl 脚本来处理工作中的一些文件操作，但它现在运行速度太慢而无法投入生产。

我不太了解 Perl（不是我的语言之一），所以有人可以帮我识别和替换这个脚本中处理约 4000 万行的速度会很慢的部分吗？

输入的数据格式为：

```
col1|^|col2|^|col3|!|
col1|^|col2|^|col3|!|
... 40 million of these. 
```

date_cols 数组在脚本的这一部分之前计算，基本上保存包含转换前格式的日期的列的索引。

这是将为每个输入行执行的脚本部分。我已经对其进行了一些清理并添加了评论，但如果需要其他任何内容，请告诉我：

```
## Read from STDIN until no more lines are arailable.
while (<STDIN>)
{       
    ## Split by field delimiter
    my @fields = split('\|\^\|', $_, -1);   

    ## Remove the terminating delimiter from the final field so it doesn't
    ## interfere with date processing.
    $fields[-1] = (split('\|!\|', $fields[-1], -1))[0];

    ## Cycle through all column numbres in date_cols and convert date
    ##  to yyyymmdd
    foreach $col (@date_cols)
    {
        if ($fields[$col] ne "")
        {
            $fields[$col] = formatTime($fields[$col]);
        }
    }

    print(join('This is an unprintable ASCII control code', @fields), "\n");
}           

## Format the input time to yyyymmdd from 'Dec 26 2012 12:00AM' like format.
sub formatTime($)
{
    my $col = shift;        

    if (substr($col, 4, 1) eq " ") {
        substr($col, 4, 1) = "0";
    }       
    return substr($col, 7, 4).$months{substr($col, 0, 3)}.substr($col, 4, 2);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:43:58.417

如果纯粹是为了提高效率而编写的，我会这样编写您的代码：

```
sub run_loop {
  local $/ = "|!|\n"; # set the record input terminator
                      # to the record seperator of our problem space
  while (<STDIN>) {       
    # remove the seperator
    chomp;

    # Split by field delimiter
    my @fields = split m/\|\^\|/, $_, -1;

    # Cycle through all column numbres in date_cols and convert date
    #  to yyyymmdd
    foreach $col (@date_cols) {
      if ($fields[$col] ne "") {
        # $fields[$col] = formatTime($fields[$col]);
        my $temp = $fields[$col];
        if (substr($temp, 4, 1) eq " ") {
          substr($temp, 4, 1) = "0";
        }       
        $fields[$col] = substr($temp, 7, 4).$months{substr($temp, 0, 3)}.substr($temp, 4, 2);
      }
    }
    print join("\022", @fields) . "\n";
  }
} 
```

优化如下：

*   用于`chomp`删除`|!|\n`末尾的字符串
*   内联`formatTime`子。

    > Perl 中的子程序调用非常昂贵。如果必须非常有效地使用 subs，可以使用`&subroutine(@args)`语法禁用原型检查。如果`@args`省略，则当前参数`@_`对被调用的子可见。这可能会导致错误或额外的性能。明智地使用。该`goto &subroutine;`语法也可以使用，但这会干扰`return`（基本上是尾调用）。不使用。

进一步的优化可能包括删除哈希查找`%months`，因为哈希是昂贵的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:42:43.127

您必须对您的数据集进行基准比较才能进行比较，但您可以对其使用正则表达式。（您的非常不友好的正则表达式字段和记录分隔符使情况变得更糟！）

```
my $i = 0;
our %months = map { $_ => sprintf('%02d', ++$i) } qw(Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec);

while (<DATA>) {
  s! \|\^\| !\022!xg;  # convert field separator
  s/ \| !\| $ //xg;        # strip record terminator
  s/\b(\w{3}) ( \d|\d\d) (\d{4}) \d\d:\d\d[AP]M\b/${3} . $months{$1} . sprintf('%02d', $2) /eg;
  print;
} 
```

`@date_cols`如果非字段之一与日期正则表达式匹配，则不会执行您想要的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T18:14:27.477

在我的工作中，有时我需要 grep 来自 350 多个前端的错误日志等。我使用我调用“SMP grep”的脚本模板；）它很简单：

1.  `stat`文件，获取文件长度
2.  获取“块长度”= file_length / num_processors
3.  Andjust 块开始和结束，因此它们在“\n”处开始/结束。只是`read()`，找到“\n”并计算偏移量。
4.  `fork()`使 num_processor 工作人员，每个工作在自己的块上

如果您在 grep 或其他 CPU 操作中使用正则表达式（我认为是您的情况），这会有所帮助。管理员抱怨这个脚本会消耗磁盘吞吐量，但如果服务器有 8 个 CPU，它是这里唯一的瓶颈 =) 此外，显然如果您需要解析 1 周的数据，您可以在服务器之间划分。

如果有兴趣，明天我可以发布代码。

# c# - NHibernate 中的表级并发

> ID：12605586
> 
> 赞同：0
> 
> 时间：2012-09-26T15:47:33.387
> 
> 标签：c#, sql-server, nhibernate, concurrency

NHibernate 是否为表级并发提供任何类型的机制？我知道行级并发有很多不同的选项，但我找不到更高的选项。

例如：
1\. 假设我从表格中读取了一些信息。
2\. 根据该信息计算下一行应该是什么。
3\. 然后插入计算的行，**除非**有其他东西出现并同时改变了表中的信息。

我知道 MS-SQL（这是我正在使用的）具有与表一起使用的时间戳来表示它们的修改，我希望我能以某种方式将它与 NHibernate 一起使用。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:40:09.107

不，NHibernate 不支持表级并发。我通过在与其他 NHibernate 操作相同的会话中使用普通 SQL 查询解决了这个问题

```
...WITH (TABLOCKX HOLDLOCKX)" syntax. 
```

这有点痛苦，但它也可以按预期工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-26T20:17:05.823

是的，NHibernate 支持不同类型的并发。正如我所看到的，您对版本化或乐观并发模型感兴趣。关于它的优秀文章：http: [//ayende.com/blog/3946/nhibernate-mapping-concurrency](http://ayende.com/blog/3946/nhibernate-mapping-concurrency)

# rest - Content-Type: application/vnd.com.runkeeper.User+json ，是什么意思？

> ID：12605590
> 
> 赞同：2
> 
> 时间：2012-09-26T15:47:49.283
> 
> 标签：rest

我一直在查看 Runkeeper 公司的[API](http://runkeeper.com/developer/healthgraph/example-api-calls#top)，看到这一点感到很惊讶：

```
Content-Type: application/vnd.com.runkeeper.User+json 
```

在他们的 api 调用中。有人知道它的目的是什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:38:18.143

您看到的是供应商定义的媒体类型。内容类型是`application/json`. 这篇[文章](http://blog.2partsmagic.com/restful-uri-design/)展示了它的一些示例用法。大多数情况下，它用于对 API 进行版本控制。

供应商定义的媒体类型通常采用`{type}/vnd.{company specific}+{subtype}`. 例如`application/vnd.basil.v1+json`

# python - 使用 Python 创建工作簿时 Excel 宏不可用

> ID：12605593
> 
> 赞同：0
> 
> 时间：2012-09-26T15:47:56.843
> 
> 标签：python, excel

似乎当使用 python 创建工作簿时，宏不可用。即使我关闭、重新启动并重新打开由 python 创建的文件，宏选项仍然丢失。但是，如果我手动创建 excel 文件，然后使用 python 代码打开手动创建的 excel 文件并运行宏，它工作正常。

提供了示例代码，但似乎我在 excel 或计算机上的设置不正确（政府计算机，虽然我有管理员权限）。我已启用宏设置中的所有宏，查看了此站点上的可用文献，但仍有问题。

```
import win32com.client
xl = win32com.client.Dispatch("Excel.Application") 
xl.Visible = True 
wb = xl.Workbooks.Add()
ws = wb.Worksheets.Add()
cell = ws.Cells(1)
cell.Value = 'text'
wb.Close(True, r'c:\AcousticAutomation\TestFolder\TestData\test.xls') 
```

当我手动打开“test.xls”时，宏部分中没有可用的宏；因此，我没有添加宏运行行，因为代码会崩溃。

如果我将 txt 文件转换/重命名为 cvs 文件，则会出现同样的问题，再次在 excel 中手动打开 csv 时，数据存在，但没有可用的宏选项：

```
os.rename('c:\..file path...\test.txt', 'c:\..file path..\test.csv') 
```

但是，如果我手动创建文件并使用：

```
import win32com.client
xl = win32com.client.Dispatch("Excel.Application") 
xl.Visible = True 
wb = xl.WorkBooks.open(r'c:\..test file path..\test.xls’) 
xl.Run(‘DeleteTopRows') 
```

宏被识别并且工作正常。因此，我尝试了创建工作簿的多种变体，但似乎每当使用 python 创建文件时，宏“消失”并且代码崩溃，因为当时宏“不存在”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-06T02:20:54.183

我手动将 excel 中的宏导出为 .bas 文件。然后使用以下命令将宏导入新打开的工作簿： xl.VBE.ActiveVBProject.VBComponents.Import('c:..path..\DeleteTopRows.bas') 工作，感谢 selllikesybok – [Shea](https://stackoverflow.com/users/1697835/shea)

# python - 我自己的购物篮

> ID：12605597
> 
> 赞同：0
> 
> 时间：2012-09-26T15:48:13.003
> 
> 标签：python, django, django-models

如何添加我`Item`的`Basket`？

```
class Item(models.Model):
    name = models.CharField(max_length=50)
    category = models.ManyToManyField(Category)
    price = models.DecimalField(max_digits=5, decimal_places=2)

    def __unicode__(self):
        return self.name

class Basket(models.Model):
    owner = models.ForeignKey(User, related_name='user_basket', verbose_name='Owner')
    name = models.CharField("Basket name", max_length=120)
    items = models.ManyToManyField('Item', blank=True, null=True) 
```

我的尝试：

```
def add_item_to_basket(request, product_id):
    if request.method == 'GET':
        form = BasketForm(request.GET)
        if form.is_valid():
            quantity = form.cleaned_data['quantity']
            items = Item.objects.get(id=item_id)
            .........? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:34:12.690

```
your_basket.items.add(your_item) 
```

或者在这里看看：[https ://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships](https://docs.djangoproject.com/en/dev/topics/db/models/#extra-fields-on-many-to-many-relationships)

# javascript - 根据先前的选项选择动态更改选择框选项

> ID：12605601
> 
> 赞同：1
> 
> 时间：2012-09-26T15:48:27.613
> 
> 标签：javascript, jquery, html, ajax

我想要完成的是以下... HTML

```
<!doctype html>
<head>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8" />
    <link href="css/jquery.selectbox.css" type="text/css" rel="stylesheet" />
</head>
<body>

    <select name="dateselector_parent" id="dateselector_parent" tabindex="1">
        <option value="">--Select Date--</option>
        <option value="1">2012</option>
        <option value="1">2011</option>
        <option value="1">2010</option>
        <option value="2">Predefined Dates</option>
    </select>

    <select name="dateselector_child" id="dateselector_child" tabindex="2">
        <option value="">--Select Date--</option>
        <option value="1">January</option>
        <option value="1">February</option>
        <option value="1">March</option>
        <option value="1">April</option>
        <option value="1">May</option>
        <option value="1">June</option>
        <option value="1">July</option>
        <option value="1">August</option>
        <option value="1">September</option>
        <option value="1">October</option>
        <option value="1">November</option>
        <option value="1">December</option>
        <option value="2">Current Month</option>
        <option value="2">Month to Date</option>
        <option value="2">Last 7 Days</option>
    </select>

    <script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
    <script type="text/javascript" src="js/jquery.selectbox-0.2.js"></script>
    <script type="text/javascript" src="js/datejs.js"></script>
    <script type="text/javascript">
    $(function () {
        $("#dateselector_parent").selectbox();
        $("#dateselector_child").selectbox();
    });

    </script>
</body> 
```

这会创建两个选择框，我希望一个框根据用户在另一个框上的选择来显示内容。例如，如果用户选择 2010 或 2011 或 2012，我想在第二个选项中显示 Jan-Dec 作为选项。如果用户选择预定义日期，我想显示当前月份、本月至今和过去 7 天。我使用的 javascript 插件允许用户定义 onChange、onOpen 和 onClose 方法。我一直在做一些研究，似乎 AJAX 参与了尝试来实现这一点，但由于我对 PHP 一点都不了解，我想知道是否可以使用 jQuery 来实现这一点。（我当然没有运气尝试解决这个问题，我不是在找人为我做，我只是想指出正确的方向，

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T09:21:16.353

我希望以下工作能满足您的要求。有 3 个子下拉菜单（无 div） 1\. --Select--, 2\. Jan-Dec 3.Other options

```
$().ready(function () {

    var selectedOnLoad = $('#dateselector_parent').val();
    setChild(selectedOnLoad);

    $('#dateselector_parent').change(function () {
       var selectedValue = $('#dateselector_parent').val();
       setChild(selectedValue);
    });

});

function setChild(value){
    //Have your three child selector names as follows in your markup as well and assuming they are not in divs
    var arr = [ "dateselector_child_", "dateselector_child_1", "dateselector_child_2"];

    jQuery.each(arr, function() {
            if(this == "dateselector_child_" + value){
                $("#" + this).show();
            }else{
                $("#" + this).hide();
            }
     });
} 
```

**更新：**为上述脚本添加标记

```
<select name="dateselector_parent" id="dateselector_parent" tabindex="1">
    <option value="">--Select Date--</option>
    <option value="1">2012</option>
    <option value="1">2011</option>
    <option value="1">2010</option>
    <option value="2">Predefined Dates</option>
</select>

<select name="dateselector_child_" id="dateselector_child_" tabindex="2">
    <option value="">--Select Date--</option>
</select>

<select name="dateselector_child_1" id="dateselector_child_1" tabindex="2">
    <option value="">--Select Date--</option>
    <option value="1">January</option>
    <option value="1">February</option>
    <option value="1">March</option>
    <option value="1">April</option>
    <option value="1">May</option>
    <option value="1">June</option>
    <option value="1">July</option>
    <option value="1">August</option>
    <option value="1">September</option>
    <option value="1">October</option>
    <option value="1">November</option>
    <option value="1">December</option>
</select>

<select name="dateselector_child_2" id="dateselector_child_2" tabindex="2">
    <option value="">--Select Date--</option>
    <option value="2">Current Month</option>
    <option value="2">Month to Date</option>
    <option value="2">Last 7 Days</option>
</select> 
```

检查**setChild(value)**函数。当页面准备好（加载后）以及用户更改选择时，父选择的值将传递给该函数。父母选择的值可以是“”、“1”、“2”。接下来，foreach 循环找到需要显示的孩子的名字，而其他的则被隐藏。如果用户选择父项的 ---Select--- 选项，则该函数将显示“dateselector_child_”，其他两个隐藏。

希望现在很清楚......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T15:56:26.207

只是一个起点！

```
$("#dateselector_parent").change(function() {
    $('#dateselector_child').val($(this).find("option:selected").index());
}); 
```

[演示](http://fiddle.jshell.net/jq6K4/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:05:33.680

AJAX，扩展到异步 JavaScript 和 XML。它涉及编写一个`XMLHTTPRequest`从服务器检索内容的方法。

如果您可以将逻辑（选择某个选项时显示的内容）存储在几行代码中，则可以将其嵌入到 JavaScript 或 jQuery 中。

因此，在您的情况下，没有必要使用 AJAX。您可以使用 JavaScript 中的一些代码来完成此操作。

“[创建一个 2 级相互依赖的选择列表](http://www.javascriptkit.com/javatutors/selectcontent2.shtml)”可能会有所帮助。

# cuda - 二维的 CUDA 常量内存

> ID：12605603
> 
> 赞同：1
> 
> 时间：2012-09-26T15:48:28.247
> 
> 标签：cuda, gpu-constant-memory

有没有办法在二维中分配和复制 CUDA 常量内存区域？`cudaMemcpyToSymnbol`__constant__ 似乎不是一个选择。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T19:48:46.470

CUDA SDK（或示例）中的 quasirandomGenerator 示例显示了在常量内存中分配的二维表，并带有相应的 cudaMemcpyToSymbol 以填充 quasirandomGenerator_kernel.cuh 中的表

二维表的声明：

```
static __constant__ unsigned int c_Table[QRNG_DIMENSIONS][QRNG_RESOLUTION]; 
```

cudaMemcpyToSymbol 调用：

```
//Table initialization routine
static void initTableGPU(unsigned int tableCPU[QRNG_DIMENSIONS][QRNG_RESOLUTION]){
    cutilSafeCall( cudaMemcpyToSymbol(
        c_Table,
        tableCPU,
        QRNG_DIMENSIONS * QRNG_RESOLUTION * sizeof(unsigned int)
    ) );
} 
```

该表正在以一维方式在引擎盖下处理（如 pQB 所建议），所以我不知道它是否正是 OP 正在寻找的东西。当您安装 CUDA SDK（或在 CUDA 5.0 RC 工具包中调用的示例）时，该示例会自动安装，但您可以在[此处单独在 Web 上找到它。](http://www.nvidia.com/content/cudazone/cuda_sdk/CUDA_Advanced_Topics.html#quasirandomGenerator) 选择右侧的相应下载链接以获取包含示例代码的存档。然后打开存档并查找文件 quasirandomGenerator_kernel.cuh

# c# - Exchange 失去连接时未触发 Outlook 事件

> ID：12605604
> 
> 赞同：3
> 
> 时间：2012-09-26T15:48:28.753
> 
> 标签：c#, vsto, ms-office, outlook-addin, outlook-2007

**我们最近注意到Outlook 2007**事件的一个问题，导致它在 Exchange 连接丢失然后恢复时不触发事件。如果您[将侦听](http://msdn.microsoft.com/en-us/library/ms268998.aspx)器附加到[`Folder.Items.ItemAdd`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.itemsevents_event.itemadd.aspx)事件，则在 Exchange 从脱机切换到联机后，该事件将断开连接。为了重现这一点 - 我们移除了我们的以太网电缆，以模拟短暂的连接丢失。

如果您不能保证在 Exchange 连接中断时会触发事件，那么这确实会使构建插件变得困难 - 在远程办公室操作时尤其常见。我们没有使用缓存交换模式。

是否有人对他们是否是一种解决方法有任何反馈，或者如何知道我们何时需要重新建立我们的事件侦听器？使用**缓存交换模式**是一种解决方案吗？或者是否有[某些事件您不能可靠地使用](https://stackoverflow.com/questions/6733926/making-items-itemadd-event-a-sturdy-option-for-firing-incoming-emails-even-whe)？

[Exchange 连接丢失时似乎没有事件](http://social.msdn.microsoft.com/Forums/eu/vsto/thread/7bd6b249-b5c9-4263-9006-e68c64d19ec1)触发器。也许这里唯一的解决方法是使用某种计时器来实现可靠的事件行为。

```
public partial class ThisAddIn
{
  Outlook.Items sentItems;      
  private void ThisAddIn_Startup(object sender, System.EventArgs e)
  {
    Outlook.Folder sentFolder = ThisAddIn.Application.Session.GetDefaultFolder(Outlook.OlDefaultFolders.olFolderSentMail);
    sentItems = sentFolder.Items;
    sentItems.ItemAdd += new Outlook.ItemsEvents_ItemAddEventHandler(SentItems_ItemAdd);
  }
  void SentItems_ItemAdd(object Item)
  { // breakpoint never hit after Exchange connectivity is lost
    Outlook.MailItem mailItem = Item as Outlook.MailItem; 
  }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T20:00:54.267

解决此问题后，发现**某些事件在您失去与 Exchange 的连接后不会重新建立**。诸如[`Application.Explorers.NewExplorer`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.explorersevents_event.newexplorer.aspx)和之类的事件[`Application.Inspectors.NewInspector`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.inspectorsevents_event.newinspector.aspx)不受 Exchange 连接的影响，但[`Folder.Items.ItemAdd`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.itemsevents_event.itemadd.aspx)会受到影响。或许这是由于 [`Folder`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.folder_members.aspx)'继承'的缘故[`MAPIFolder.Items`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.mapifolder.items.aspx)。

重新建立事件触发器的唯一解决方案是定期重新连接事件（*[因为我们没有事件可以告诉我们 Exchange 何时不可用](https://stackoverflow.com/q/6072757/175679)*）或在用户启动的操作（例如[`NewInspector`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.inspectorsevents_event.newinspector.aspx)或）期间重新附加事件[`MailItem.Send`](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.outlook.itemevents_10_event.send.aspx)。

[MSDN 论坛建议您不要将`ItemAdd`事件](http://social.msdn.microsoft.com/Forums/hu/outlookdev/thread/74f61f85-8db7-408b-97b5-5e50deb42776)仅用于通过 UI 使用。

# javascript - myFunc(e) 中的“e”是什么？如何将其他参数传递给 myFunc？

> ID：12605605
> 
> 赞同：1
> 
> 时间：2012-09-26T15:48:35.733
> 
> 标签：javascript, jquery

> **可能重复：**
> 
> [在 Javascript/jQuery 中，(e) 是什么意思？](https://stackoverflow.com/questions/10323392/in-javascript-jquery-what-does-e-mean)
> 
> [jQuery 的 .click - 将参数传递给用户函数](https://stackoverflow.com/questions/3273350/jquery-click-pass-parameters-to-user-function)

鉴于此代码：

```
function myFunc(e) {
    e.preventDefault();
}

var x = 99;
$('#myId').bind('click', myFunc); 
```

谁能告诉我什么是 e 参数。另外我怎么能将 x 参数传递给 myFunc ？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T15:49:07.893

这是 click 事件，包装为 jquery 事件。

如果你想通过 x，你可以这样做：

```
$('#myId').bind('click', {x:x}, myFunc); 
```

您的函数将`x`在`e.data.x`.

如果您需要本机事件（即不是 jQuery 事件），请使用`e.originalEvent`该事件的许多字段，但可以通过`e`.

[参考](http://api.jquery.com/bind/)

# scala - 通过使用 sumInts 方法了解 scala 替换模型

> ID：12605606
> 
> 赞同：4
> 
> 时间：2012-09-26T15:48:36.707
> 
> 标签：scala, recursion

我正在学习 Scala 课程，给出的示例之一是 sumInts 函数，其定义如下：

```
 def sumInts(a: Int, b: Int) : Int = 
    if(a > b) 0  
    else a + sumInts(a + 1 , b) 
```

我试图通过在迭代时输出一些值来更好地理解这个函数：

```
class SumInts {
      def sumInts(a: Int, b: Int) : Int = 
        if(a > b) 0 else 
        {     
          println(a + " + sumInts("+(a + 1)+" , "+b+")")       
          val res1 = sumInts(a + 1 , b)
          val res2 = a
          val res3 = res1 + res2
          println("res1 is : "+res1+", res2 is "+res2+", res3 is "+res3)
          res3
        }
} 
```

所以代码：

```
object SumIntsMain {

    def main(args: Array[String]) {

      println(new SumInts().sumInts(3 , 6));

  }

} 
```

返回输出：

```
3 + sumInts(4 , 6)
4 + sumInts(5 , 6)
5 + sumInts(6 , 6)
6 + sumInts(7 , 6)
res1 is : 0, res2 is 6, res3 is 6
res1 is : 6, res2 is 5, res3 is 11
res1 is : 11, res2 is 4, res3 is 15
res1 is : 15, res2 is 3, res3 is 18
18 
```

有人可以解释如何计算这些值。我已经尝试输出所有创建的变量，但我仍然感到困惑。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:06:22.633

手动人类追踪器：

```
return sumInts(3, 6) | a = 3, b = 6
3 > 6 ? NO
return 3 + sumInts(3 + 1, 6) | a = 4, b = 6
4 > 6 ? NO
return 3 + (4 + sumInts(4 + 1, 6)) | a = 5, b = 6
5 > 6 ? NO
return 3 + (4 + (5 + sumInts(5 + 1, 6))) | a = 6, b = 6
6 > 6 ? NO
return 3 + (4 + (5 + (6 + sumInts(6 + 1, 6)))) | a = 7, b = 6
7 > 6 ? YEEEEES (return 0)
return 3 + (4 + (5 + (6 + 0))) = return 18. 
```

手动人类追踪器关闭。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T16:41:04.347

要了解递归代码的作用，无需分析递归树。事实上，我相信这往往只是令人困惑。

## 假装它有效

让我们考虑一下我们正在尝试做的事情：我们想要对从开始的所有整数求和，`a`直到某个整数`b`。

> a + sumInts(a + 1 , b)

让我们假装它`sumInts(a + 1, b)`确实做了我们想要的：对从`a + 1`到的整数求和`b`。如果我们接受这是事实，很明显我们的函数将处理更大的问题，从正确`a`到`b`正确。因为很明显，总和中缺少的只是附加项`a`，它只是简单地相加。我们得出结论，它必须正常工作。

## 基础：基础情况

但是，这`sumInts()`必须建立在某些东西之上：基本情况，其中不涉及递归。

> 如果(a > b) 0

仔细观察我们的递归调用，我们可以看到它做出了某些假设：我们期望`a`低于`b`. 这意味着总和将如下所示 `a + (a + 1) + ... + (b - 1) + b`：如果`a`大于`b`，这个和自然地计算为 0。

## 确保它有效

看到在递归调用保证中`sumInts()`总是加`a`一，我们实际上会在某个时候达到基本情况。

进一步注意，`sumInts(b, b)`最终将调用它，我们现在可以验证代码是否有效：由于`b`不大于自身，因此将调用第二种情况`b + sumInts(b + 1, b)`：从这里，很明显这将评估为：`b + 0`，这意味着我们的算法对所有值都正确工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:04:07.937

您提到了替换模型，所以让我们将其应用于您的`sumInts`方法：

我们首先调用`sumInts(3,4)`（你使用 6 作为第二个参数，但我选择了 4，所以我可以输入更少），所以让我们在定义中用 3`a`和 4替换. 这给了我们：`b``sumInts`

```
if(3 > 4) 0  
else 3 + sumInts(3 + 1, 4) 
```

那么，这会是什么结果呢？好吧，`3 > 4`显然是错误的，所以最终结果将等于 else 子句，即 3 加上`sumInts(4, 4)`（4 是`3+1`）的结果。现在我们需要知道`sumInts(4, 4)`will 的结果是什么。为此，我们可以再次替换（这次用 4 替换`a`and `b`）：

```
if(4 > 4) 0
else 4 + sumInts(4 + 1, 4) 
```

好的，所以 的结果`sumInts(4,4)`将是 4 加上 的结果`sumInts(5,4)`。那是什么`sumInts(5,4)`？给替代者！

```
if(5 > 4) 0
else 5 + sumInts(5 + 1, 4) 
```

这次 if 条件为真，所以 的结果`sumInts(5,4)`是 0。所以现在我们知道`sumInts(4,4)`must be的结果`4 + 0`是 4。因此`sumInts(3,4)`must be的结果`3 + 4`是 7。

# optimization - 原始毕达哥拉斯三元组的参数化

> ID：12605608
> 
> 赞同：1
> 
> 时间：2012-09-26T15:48:38.713
> 
> 标签：optimization, primitive, pythagorean

我已经编写了一个算法来查找整数毕达哥拉斯三元组，但不幸的是，该算法的运行时间为 O(n^3)。有谁知道如何使用参数化来找到毕达哥拉斯三元组？如果是这样，你能向我解释一下这个过程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-16T00:40:50.973

很抱歉施展死灵术，不过看看几年前发表在《数学老师》上的这篇文章：[http ://www.scribd.com/doc/191694547/Calculating-Pythagorean-Triples](http://www.scribd.com/doc/191694547/Calculating-Pythagorean-Triples)

这可能是相关的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T04:35:34.343

有[欧几里得公式](http://en.wikipedia.org/wiki/Pythagorean_triple)用于生成原始毕达哥拉斯三元组：

对于所有整数 n，m = n + 1 + 2 * p（m - n 是奇数），并且 m 和 n 互质：

a = m ² -n ²

b = 2 * m * n

c = m ² + n ²

# networking - 无法使用 cabal-install 1.11.0 安装 network-2.4.0.1

> ID：12605609
> 
> 赞同：2
> 
> 时间：2012-09-26T15:48:45.533
> 
> 标签：networking, haskell, cabal, cabal-install, build-dependencies

我不能安装一堆不同的东西，`cabal`因为它们取决于`network-2.4.0.1`安装失败的东西：

```
Preprocessing library network-2.4.0.1...
Socket.hsc: In function ‘main’:
Socket.hsc:1054: error: invalid application of ‘sizeof’ to incomplete type ‘struct ucred’ 
Socket.hsc:1054: error: invalid application of ‘sizeof’ to incomplete type ‘struct ucred’ 
Socket.hsc:1054: error: invalid application of ‘sizeof’ to incomplete type ‘struct ucred’ 
Socket.hsc:1060: error: invalid use of undefined type ‘struct ucred’
Socket.hsc:1061: error: invalid use of undefined type ‘struct ucred’
Socket.hsc:1062: error: invalid use of undefined type ‘struct ucred’
compiling dist/build/Network/Socket_hsc_make.c failed (exit code 1) 
```

关于如何进行的任何线索？（我在 Ubuntu 10.04 上使用 Haskell 平台 2012.2.0.0）。

一些谷歌搜索显示这是一个问题，`cabal-install-1.11`但尝试更新却因对...的依赖而受阻`network-2.4.0.1`。

根据@Yuras@ 的建议，这是该部分`cabal -v install network`附近的输出`configure`：

```
checking for struct msghdr.msg_control... yes
checking for struct msghdr.msg_accrights... no
checking for struct sockaddr.sa_len... no
checking for in_addr_t in netinet/in.h... yes
checking for SO_PEERCRED and struct ucred in sys/socket.h... yes
checking for _head_libws2_32_a in -lws2_32... no
checking for getaddrinfo... yes
checking for gai_strerror... yes
checking whether AI_ADDRCONFIG is declared... yes
checking whether AI_ALL is declared... yes
checking whether AI_NUMERICSERV is declared... yes
checking whether AI_V4MAPPED is declared... yes
checking whether IPV6_V6ONLY is declared... yes
checking for sendfile in sys/sendfile.h... yes 
checking for sendfile in sys/socket.h... no
checking for gethostent... yes
checking for accept4... yes
configure: creating ./config.status 
```

以下是来自 的更多信息`config.log`。首先是`Output Variables`

```
CFLAGS='-D_GNU_SOURCE -Wl,--hash-size=31 -Wl,--reduce-memory-overheads'
EXTRA_CPPFLAGS='-D_GNU_SOURCE' 
```

这是关于`PEERCRED`

```
configure:4301: checking for SO_PEERCRED and struct ucred in sys/socket.h
configure:4329: gcc -c -Wl,--hash-size=31 -Wl,--reduce-memory-overheads  conftest.c >&5
conftest.c:39: error: storage size of 'u' isn't known
configure:4335: $? = 1
configure: failed program was:
| /* confdefs.h.  */
| #define PACKAGE_NAME "Haskell network package"
| #define PACKAGE_TARNAME "network"
| #define PACKAGE_VERSION "2.3.0.14"
| #define PACKAGE_STRING "Haskell network package 2.3.0.14"
| #define PACKAGE_BUGREPORT "libraries@haskell.org"
| #define STDC_HEADERS 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_SYS_STAT_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_STRING_H 1
| #define HAVE_MEMORY_H 1
| #define HAVE_STRINGS_H 1
| #define HAVE_INTTYPES_H 1
| #define HAVE_STDINT_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_FCNTL_H 1
| #define HAVE_LIMITS_H 1
| #define HAVE_STDLIB_H 1
| #define HAVE_SYS_TYPES_H 1
| #define HAVE_UNISTD_H 1
| #define HAVE_ARPA_INET_H 1
| #define HAVE_NETDB_H 1
| #define HAVE_NETINET_IN_H 1
| #define HAVE_NETINET_TCP_H 1
| #define HAVE_SYS_SOCKET_H 1
| #define HAVE_SYS_UIO_H 1
| #define HAVE_SYS_UN_H 1
| #define HAVE_READLINK 1
| #define HAVE_SYMLINK 1
| #define HAVE_STRUCT_MSGHDR_MSG_CONTROL 1
| #define HAVE_IN_ADDR_T 1
| /* end confdefs.h.  */
| #include <sys/types.h>
| #include <sys/socket.h>
| #ifndef SO_PEERCRED
| # error no SO_PEERCRED
| #endif
| struct ucred u;
| int
| main ()
| {
|
|   ;
|   return 0;
| }
configure:4378: gcc -c -D_GNU_SOURCE -Wl,--hash-size=31 -Wl,--reduce-memory-overheads  conftest.c >&5
configure:4384: $? = 0
configure:4414: result: yes 
```

谢谢！，

兰吉特。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:27:50.613

有一张[票](http://hackage.haskell.org/trac/hackage/ticket/859)，看起来是你的情况。它被标记为固定。

# qt - 如何让 autotools 使用 qmake 编译 QT 模块

> ID：12605612
> 
> 赞同：0
> 
> 时间：2012-09-26T15:49:00.720
> 
> 标签：qt, cross-platform, autotools, dynamic-linking, qmake

在我的项目中，我已正确创建`configure.ac`和`Makefile.am`归档，因此我的组件可以编译并动态链接到适当的库。其中一个组件链接到使用 QT 的库，因此`Makefile`必须`.pro`在目标系统上编译之前从文件中生成相应的组件。

为此，我认为我需要找到一种方法来告诉我的 make 脚本，`Makefile.am`也许，这个库必须通过首先运行并在该目录`qmake`中生成来自行编译。`Makefile`

这甚至可能吗？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:05:55.707

在我自己的研究中，我发现了一个名为“AutoTroll”的明显废弃的项目，它应该自动更改自动工具的文件以增加与 Qt4 的兼容性。我试图让它在没有运气的情况下工作。它也缺乏适当的文档。

如果没有这个工具，使用 autotools 编译 Qt4 模块需要大量的修改和干预，这对于跨平台应用程序来说非常困难，甚至更多。

我已经切换到 CMake。CMake 的设置比 autotools 容易得多，它支持开箱即用的 Qt4 模块。

# objective-c - hpple解析器字符串长度问题

> ID：12605615
> 
> 赞同：0
> 
> 时间：2012-09-26T15:49:11.530
> 
> 标签：objective-c, ios, html-parsing, hpple

解析字符串时出现问题。

我从网络服务器获取数据

HTML 数据很长，节点的内容也很长。几乎 3000~4000 长度。在我看来，字符长，有问题。

我的代码是这样的

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection
{
    NSString* aStr = [[NSString alloc] initWithData:receivedData encoding:NSUTF8StringEncoding]; 
    NSLog(@"%@", aStr); // It's ok

    TFHpple *xpathParser       = [[TFHpple alloc] initWithHTMLData:receivedData];
    NSArray *elementsTextData  = [xpathParser searchWithXPathQuery:@"/html/body/textdata_pass2phone"];
    TFHppleElement *element    = [elementsTextData objectAtIndex:0];
    NSLog(@"%@", element); // oops!! The string was cut.
} 
```

我无法理解。为什么字符串被切断。请帮我。我非常担心 ：（

附言。我将解析器更改为 HTMLParser。但同样的问题。返回空值。简短的话是 return 没问题。

抱歉，我英语说得不好。我每天都在学习英语：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T03:30:51.947

好的。我测试了 html 包括 html 标签。

```
< extdata_pass2phone />
```

所以我提出了这个问题。对不起。

# cuda - NVIDIA 硬件的 OpenCL 1.2 何时可用？

> ID：12605618
> 
> 赞同：15
> 
> 时间：2012-09-26T15:49:33.400
> 
> 标签：cuda, opencl

我会在 NVIDIA 开发者论坛上问这个问题，但由于它仍然处于关闭状态，也许这里有人可以告诉我一些事情。

有人知道 NVIDIA 驱动程序中是否已经支持 OpenCL 1.2？如果没有，它会很快到来吗？

我没有 GeForce 600 系列卡来检查自己。根据[维基百科](http://en.wikipedia.org/wiki/Comparison_of_Nvidia_graphics_processing_units#GeForce_600_Series)，已经有一些卡可以支持它。

NVIDIA 似乎不再大量提及 OpenCL，而只关注 CUDA C/C++（参见[StreamComputing.eu](http://www.streamcomputing.eu/blog/2012-09-10/nvidias-industry-leading-support-for-opencl/)）。我想这对他们来说很有意义，但我希望看到更多对 OpenCL 的热爱。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T13:32:20.650

NVidia 最新的 SDK (v4.2.9) 不支持 OpenCL 1.2 提供的头文件或库。我认为这可能只是 SDK 本身：正如您所指出的，GeForce 600 系列似乎在硬件上支持它。不幸的是，我没有任何 600 系列卡，但最新驱动程序 (v306.23) 提供的 OpenCL64.dll 不导出 OpenCL 1.2 符号。此外，我在驱动程序包中找不到作为字符串的新符号（例如“clLinkProgram”）的痕迹。虽然这不排除通过 ICD 加载程序在驱动程序中引导 1.2 功能的可能性，但没有证据表明那里有 1.2 实现，这将是未记录和不受支持的。

至于 NVidia 何时会正式支持 OpenCL 1.2，遗憾的是我不知道这个问题的答案，同样也很想知道。

与此同时，您可能会考虑使用替代的 OpenCL 1.2 实现进行开发；例如[Intel SDK 2013 Beta](http://software.intel.com/en-us/vcsource/tools/opencl-sdk-2013)（Intel CPU）或[AMD APP SDK v2.7](http://developer.amd.com/tools/hc/AMDAPPSDK/downloads/Pages/default.aspx)（AMD CPU 或 AMD/ATI GPU）。

顺便说一句，但出于生产目的，我个人正在考虑从 NVidia GPU 切换到 ATI，部分原因是 AMD 对 OpenCL 的投资以及比较 NVidia 和最新 AMD 卡之间“物有所值”的论点：[NVIDIA 与 AMD：GPGPU 性能](https://stackoverflow.com/questions/4638324/nvidia-vs-amd-gpgpu-performance)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-13T14:07:34.193

NVIDIA 修补程序驱动程序`version 350.05`（2015 年 4 月）增加了对[OpenCL 1.2](http://anandtech.com/show/9139/nvidia-posts-35005-hotfix-driver-fixes-games-adds-opencl-12-support)的支持。

随着`350.12`（也是 2015 年 4 月）的发布，NVidia[澄清了这种情况](http://anandtech.com/show/9155/nvidia-releases-35012-game-ready-whql-drivers)：

> 在此驱动程序版本中，NVIDIA 还发布了有关其 OpenCL 1.2 驱动程序的更多信息。该驱动程序尚未通过 Khronos 的 OpenCL 一致性测试，但预计会通过。OpenCL 1.2 功能仅在 Kepler 和 Maxwell GPU 上可用，Fermi 被抛在后面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-24T13:33:07.990

看起来 700 系列支持 OpenCL 1.2

我仍在寻找需要哪个驱动程序才能使其正常工作。

# iphone - 如何从外部设备向 iPhone 发送数据

> ID：12605621
> 
> 赞同：0
> 
> 时间：2012-09-26T15:49:44.133
> 
> 标签：iphone, bluetooth

我有一个我们制造的外部设备，它基本上监控 4 个电压，将它们转换为 16 位数字数字，然后使用 USB 串行芯片每 100 毫秒左右将此信息流回 PC。基本上是一个数据记录系统。

我们现在想在 iPhone 上收集这些信息，我想知道将数据输入 iPhone 的最佳方式是什么？

我假设我们无法直接物理连接到 iPhone 基座连接器，因为 iOS 开发人员无法使用执行此操作的协议？

显然我们可以通过 WiFi 网络来实现，但并不总是有，我们希望保持外部硬件相当简单，即不需要计算机或无线路由器等。

如果我们将蓝牙连接添加到我们的硬件，这会起作用吗？我读到只有“Made for iPod”类型的蓝牙设备会连接，在这种情况下，我们如何才能实现“made for iPod”状态？添加必要的蓝牙芯片来启动和运行系统会相对容易。

在理想的世界中，我们希望在不必使用 3rd 方界面的情况下做到这一点。

我一直在考虑尝试将数据数字化为音频信号 - 就像调制解调器一样，并将其发送到线路输入插孔，但我认为它不够快 - 这对我来说将是一个新领域。

无论如何，所有建议都非常感谢！

谢谢！

# multithreading - Perl 模块 ForkManager 不工作

> ID：12605622
> 
> 赞同：4
> 
> 时间：2012-09-26T15:49:47.747
> 
> 标签：multithreading, perl, fork

我的错误如下

当您在 /usr/lib/perl5/site_perl/5.8.6/Parallel/ForkManager.pm 第 463 行的子进程中时，无法启动另一个进程。

我的代码有问题的部分如下，我的代码下面是在 forkmanager 中失败的子例程，我不知道为什么。没有 forkmanager 我可以运行得很好。

```
my $pm = new Parallel::ForkManager($MAX_PROCESSES);
for (0..$SCOUNT)
{
my $pid = $pm->start and next;
    my %shash = ();
    %shash =
    (   ID      => "$SREF->[$_]->[0]",
        typeID  => "$SREF->[$_]->[1]",
        extIP   => "$SREF->[$_]->[2]",
        intIP   => "$SREF->[$_]->[3]",
        NAME    => "$SREF->[$_]->[4]",
        buTYPE  => "NULL"
    );
    if ($shash{typeID} =~ /^(4|16|17|25|27|28|42|49|50|51|54|58|60|63|19)$/){$shash{buTYPE} = 'LINUX DEDICATED';}
    if ($shash{typeID} =~ /^(11|14|22|32|34|36|37|46)$/)                    {$shash{buTYPE} = 'LINUX FULL';}
    if ($shash{typeID} =~ /^(44)$/)                                         {$shash{buTYPE} = 'EMAIL MARKETER';}
    if ($shash{typeID} =~ /^(43)$/)                                         {$shash{buTYPE} = 'TYip1';}
    if ($shash{typeID} =~ /^(45)$/)                                         {$shash{buTYPE} = 'DDDOMAINS';}
    if ($shash{typeID} =~ /^(56)$/)                                         {$shash{buTYPE} = 'AT MAIL';}
    if ($shash{typeID} =~ /^(65|66)$/)                                      {$shash{buTYPE} = 'ENT MAIL';}
    if ($shash{typeID} =~ /^(1|3)$/)                                        {$shash{buTYPE} = 'LINUX PROD';}

    if ($shash{buTYPE} eq 'LINUX DEDICATED' || $shash{buTYPE} eq 'LINUX FULL')
    #if ($shash{buTYPE} eq 'LINUX FULL')
    {
        next if (`grep $shash{NAME} $excludes`);
        my $ip;
        my $ipchoice=0;
        print "Doing $shash{NAME}.\n";
        my $testport = testport("$shash{intIP}",'1500');
        if(!$testport)
        {
            $ipchoice=1;
            $testport = testport("$shash{extIP}",'1500');
        }
        unless ($testport)
        {
            log_event("$log/rsync_error.$date_string","Port 1500 closed for $shash{NAME}\n");
            next;
        }
        if ($ipchoice==0)
        {   $ip = $shash{intIP};
        }else{
            $ip = $shash{extIP};
        }
#       send_file("$repo/rsyncd.conf","$shash{intIP}","/etc/rsyncd.conf");
        check_rsync($shash{NAME},$ip);
#       do_backup($shash{NAME},$ip,$shash{buTYPE});
    }
    $pm->finish;
}
$pm->wait_all_children; 
```

ForkManager.pm 编码。

```
sub start { my ($s,$identification)=@_;
  die "Cannot start another process while you are in the child process"
    if $s->{in_child};
  while ($s->{max_proc} && ( keys %{ $s->{processes} } ) >= $s->{max_proc}) {
    $s->on_wait;
    $s->wait_one_child(defined $s->{on_wait_period} ? &WNOHANG : undef);
  };
  $s->wait_children;
  if ($s->{max_proc}) {
    my $pid=fork();
    die "Cannot fork: $!" if !defined $pid;
    if ($pid) {
      $s->{processes}->{$pid}=$identification;
      $s->on_start($pid,$identification);
    } else {
      $s->{in_child}=1 if !$pid;
    }
    return $pid;
  } else {
    $s->{processes}->{$$}=$identification;
    $s->on_start($$,$identification);
    return 0; # Simulating the child which returns 0
  }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T16:09:52.347

您在`next`子进程代码中调用。这会尝试执行 的下一次迭代`for(0..$COUNT)`，然后再次尝试`fork`，这不是您想要的。

你可能想改变

```
 next if (`grep $shash{NAME} $excludes`); 
```

至

```
 $pm->finish if (`grep $shash{NAME} $excludes`); 
```

# javascript - 在两个相似的函数中重载 __proto__ 的区别

> ID：12605625
> 
> 赞同：3
> 
> 时间：2012-09-26T15:50:05.953
> 
> 标签：javascript

在我对制作*类似数组的*对象的调查中，我制作了这个函数，

```
Array2 = function(){
    var out = [];
    Object.defineProperty(out, 'prototype', { value : Array2.prototype }); // store a reference
    out.__proto__ = Array2.prototype; // necessary as Array uses __proto__ and not prototype

    if(arguments.length > 1) Array.prototype.push.apply(out, arguments);   // re-implement constructor's
    else if(arguments.length === 1) out.length = arguments[0];             // argument handling behaviour

    return out;
};

// allow for normal prototyping behaviour
Array2.prototype = [];
Object.defineProperty(Array2.prototype, 'constructor', { value : Array2 }); 
```

并注意到调用`Array2()`返回的结果与调用相同`new Array2()`，这不是我所期望的，所以我考虑了一个类似的整数函数

```
Int = function(n){
    var out = ~~n;
    out.prototype = Int.prototype;
    out.__proto__ = Int.prototype;

    this.value = out; // added to check value when working as object

    return out;
};

Int.prototype = 0;
Int.prototype.constructor = Int; 
```

这一次，`Int`返回一个 Number 的普通实例（`__proto__`以及`prototype`as 对于任何数字文字）并返回一个带有as和for`new Int`的“Int”对象，其中的数字可以通过，与不使用的调用相同。`Empty``__proto__``undefined``prototype``.value``new`

为什么这些非常相似的功能表现如此不同，为什么会`new`导致第一个？这很可能是我忽略的显而易见的事情。
仅在谷歌浏览器中测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:04:51.570

实际上，您的`Array2`函数返回*真正的*数组，而不仅仅是*类似数组的*`[[prototype]]`对象，这在将 设置为继承自的对象时不会改变`Array.prototype`（尽管您不应该`[]`使用`Object.create(Array.prototype)`.

您的功能`Int`有几个问题。

`out`是一个原始数值，没有属性。分配一些时，它将被隐式转换为一个`Number`对象，该对象随后被丢弃。上的“构造函数”属性也存在同样的问题`Int.prototype = 0`。

此外，您不能将原始值`0`用作原型*对象*。创建`new Int`实例时，它将继承默认值`Object.prototype`，`0`而不是“对象”类型。我不确定将此类分配给非标准`__proto__`属性时会发生什么，但我想它只是失败了。

改用这个：

```
function Int(n){
    var out = ~~n;
    this.valueOf = function(){ return out; };
    return out; // when not used as a constructor, return int-casted number
};

Int.prototype = Object.create(Number.prototype, {
    constructor:{value:Int}
}); 
```

# java - 如果在以下代码中将 && 替换为 & 会出现什么问题

> ID：12605626
> 
> 赞同：2
> 
> 时间：2012-09-26T15:50:05.680
> 
> 标签：java, syntax, null, operators

在一次采访中，我的面试官问我：
如果在以下代码中将 && 替换为 & 会出现什么问题：

```
String a=null; if (a!=null && a.length()>10) {...} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-26T15:50:53.123

> `&&`是逻辑 AND 运算符（执行短路行为，这意味着仅在需要时才评估第二个操作数）
> 
> `&`是按位与运算符（按位 & 运算符执行按位与运算）。

因为没有短路行为，你会得到`NullPointerException`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-26T15:51:19.967

A`NullPointerException`将被抛出，因为使用时没有短路`&`，这意味着即使左侧操作数的结果是 ，也*始终*`false`评估右侧操作数。*使用时，仅*当左侧操作数为 时才`&&`计算右侧操作数。*`true`*

 *第[15.22.2 节。布尔逻辑运算符 &、^ 和 |](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.22.2) 和[15.23。Java 语言规范中的条件与运算符 &&](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.23)描述了这种行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-26T15:51:01.763

知道了 ：

这里的单个 & 符号将导致`NullPointerException`. 因为 && 是逻辑 AND 运算符，并且仅在需要时才评估第二个操作数。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-26T16:03:24.973

当您使用**&&**时，如果第一个表达式为假，它不会评估第二个表达式。 **&**另一方面，无论如何都会评估这两个表达式。

在您的情况下，如果您将**'&&'**替换为**&**它会抛出`NullPointedException`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T16:18:37.680

`&`并且`&&`在表达式评估中具有不同的优先级，并且在不`()`包围相邻表达式的情况下，在某些情况下您可能会得到一些“惊喜”。特别是，`&&`在优先级中相当晚，因此您通常不需要`()`它，除非您将混合逻辑表达式的结果组合在一起。但`&`足够早让你措手不及。

`&&`是短路的，这意味着如果第一个表达式为假，则根本不计算第二个表达式。 `&`不会短路。在上面的例子中，这意味着用`&&`第二个表达式不会抛出 NullPointerException——这通常是`&&`.

与 Java 以外的类 C 语言相关：一旦您克服了上述两个陷阱，接下来就是操作实际做什么的问题。如果被评估的两个表达式都产生“布尔”结果，那么这些值将提升为 0x00 或 0x01，并且`&`and`&&`运算符将产生基本相同的答案。但是，如果其中一个表达式不是布尔值，那么您最终可能会将 0x01 和 0x02 进行与运算，例如，并产生 0x00，即使`&&`运算符的计算结果为真。（对于 Java 来说并不是一个特别的问题，因为它不允许 非布尔操作数`&&`，也不允许混合布尔/整数操作数`&`。）*

# haskell - haskell 实例的适用法律证明

> ID：12605629
> 
> 赞同：9
> 
> 时间：2012-09-26T15:50:12.867
> 
> 标签：haskell, proof, applicative

我们通过 Haskell 平台获得的 Applicative 类型类的所有 Haskell 实例是否已被证明满足所有 Applicative 定律？如果是，我们在哪里可以找到这些证据？

[Control.Applicative](http://www.haskell.org/ghc/docs/6.12.2/html/libraries/base-4.2.0.1/src/Control-Applicative.html#%3C*%3E)的源代码似乎不包含任何证据证明适用于各种情况的法律确实成立。它只是提到

```
-- | A functor with application.
--
--Instances should satisfy the following laws: 
```

然后它只是在评论中说明法律。

对于其他类型类（Alternative 和 Monad）的实例，我也发现了类似的情况。

这些图书馆的用户是否应该自己验证这些法律？

**但我想知道这些法律的严格证明是否已经由开发商在其他地方给出？**

同样，我知道对于 IO Monad 的应用（或 Monad）定律的严格证明，一般来说，它涉及与外部世界的对话，可能非常复杂。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T16:59:21.013

是的，举证责任完全在图书馆作者身上。有一些违反这些法律的实施示例。违反法律的典型示例是`ListT`，它不遵守大多数基本单子的单子定律（请参阅[示例](https://wiki.haskell.org/ListT_done_right#Examples)）。这给出了非常错误的行为，`ListT`结果没有人真正使用。

我很确定大多数此类证明都没有在标准位置刻在石头上。大多数证明只是被社区中各种好奇的成员简单地重复和检查到死，所以一段时间后我们知道哪些实现符合他们的法律，哪些不符合他们的法律。

举一个具体的例子，当我编写我的`pipes`库时，我必须证明我`pipes`满足`Category`法律，但我只是将这些证明保存在文本文件或 hpaste 中以备将来记录，如果有人要求的话。将它们包含在源代码中实际上并不可行，因为它们可能会变得很长，尤其是对于结合律。

但是，我认为一个好的做法可能是在可能的情况下在原始存储库中包含机器检查的证明，以便用户可以在必要时参考它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-01T07:31:18.593

有优秀的库[检查器](http://hackage.haskell.org/package/checkers-0.4.2)提供 QuickCheck 属性来检查法律。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-24T01:52:52.717

实验库[`ghc-proofs`](https://github.com/nomeata/ghc-proofs)允许您使用编译器为您验证这些规律：

```
app_law_2 a b (c :: Succs a) = pure (.) <*> a <*> b <*> c
                           === a <*> (b <*> c) 
```

它仅在少数情况下有效，例如[我的博客文章中描述的](http://www.joachim-breitner.de/blog/717-Why_prove_programs_equivalent_when_your_compiler_can_do_that_for_you_)情况，最好将其视为实验，而不是现成的工具。

# asp.net-mvc - 使用“编排”模式有什么好处？

> ID：12605630
> 
> 赞同：0
> 
> 时间：2012-09-26T15:50:14.153
> 
> 标签：asp.net-mvc, web-services

我们正在使用 ASP.NET Web API 组合一系列服务。一种建议是实现一种“编排”类型的设计模式，其中所有客户端都连接到一个端点并根据 GET 和 POST 主体的内容进行路由。另一个建议是直接调用每个服务。

使用编排类型的设计模式有什么好处？

就个人而言，我更喜欢为我的所有服务使用一个 URL。它看起来更简单，但为简单起见，单个端点不是一个有效的论点。

**更新**- 我愿意为路由部分使用标头。我们目前处于“概念级别”设计，我想我在发布之前没有考虑过使用标题。正文将是 JSON。我建议使用 ASP.NET Web API 4 来实现这一点。根据标头，编舞者将路由到适当的端点进行处理。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T15:55:57.063

如果您打算仅基于 GET 和 POST 主体的内容进行路由，那么我会说您将重新发明现在被认为是重量级和传统的 SOAP。

如果您在此决定中包含 HTTP 标头，那么您将更加 RESTFul，这是一件好事。您还可以[查看 Web API](http://www.asp.net/web-api)，这可能会帮助您进行此设计。

# c# - 这两个委托声明有什么区别？

> ID：12605635
> 
> 赞同：4
> 
> 时间：2012-09-26T15:50:40.810
> 
> 标签：c#, .net, delegates

我第一次看到代表，想知道这两种风格之间有什么区别。

```
OfferList.NextPage += delegate(int page)
{
    OnNextPage(page);
};

void OnNextPage(int page)
{
    ...
} 
```

和

```
Toolbar.OfferBookmarkRemoved += new OfferBookmarkRemoved(OnOfferBookmarkRemoved);

void OnOfferBookmarkRemoved(int offerId)
{
    ...
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-26T15:53:07.140

第一个是[匿名方法](http://msdn.microsoft.com/en-us/library/0yw3tz5k%28v=vs.100%29.aspx)，第二个是名称方法。

另请参阅[使用命名方法与匿名方法的委托（C# 编程指南）](http://msdn.microsoft.com/en-us/library/98dc08ac%28v=vs.100%29.aspx)

# string - d 编程、解析或将字符串转换为双精度

> ID：12605641
> 
> 赞同：9
> 
> 时间：2012-09-26T15:51:00.947
> 
> 标签：string, double, d, typeconverter, dmd

与其他语言一样简单，我似乎无法在 d 编程语言中找到可以将字符串（例如：“234.32”）转换为双精度/浮点数/实数的选项。

使用 std.c.stdio 库中的 atof 仅在我使用常量字符串时才有效。（例如：`atof("234.32")`有效，但`atof(tokens[i]);`令牌是带有字符串的动态数组不起作用）。

*如何在 d 编程语言中将字符串转换或解析为实数/双精度/浮点数？*

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T15:58:52.187

简单的。

```
import std.conv;
import std.stdio;    

void main() {
    float x = to!float("234.32");
    double y = to!double("234.32");

    writefln("And the float is: %f\nHey, we also got a double: %f", x, y);
} 
```

`std.conv`是D中转换的瑞士军刀。真是令人印象深刻！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-26T17:02:36.130

要从大多数任何类型转换为大多数任何其他类型，请使用[`std.conv.to`](http://dlang.org/phobos/std_conv.html). 例如

```
auto d = to!double("234.32"); 
```

或者

```
auto str = to!string(234.32); 
```

另一方面，如果你想从一个字符串中解析几个空格分隔的值（在你去的时候从字符串中删除值），那么使用[`std.conv.parse`](http://dlang.org/phobos/std_conv.html). 例如

```
auto str = "123 456.7 false";

auto i = parse!int(str);
str = str.stripLeft();
auto d = parse!double(str);
str = str.stripLeft();
auto b = parse!bool(str);

assert(i == 123);
assert(d == 456.7);
assert(b == false); 
```

# c# - 在 silverlight 中以编程方式绑定到 Listbox

> ID：12605643
> 
> 赞同：0
> 
> 时间：2012-09-26T15:51:01.753
> 
> 标签：c#, wpf, silverlight, xaml, binding

我想要一个列表框，它可以在 Silverlight 中显示我在 Canvas 上的所有图像和文本“图层”。当我尝试查看列表框或添加元素时查看列表框时，我当前的代码崩溃了。我不知道为什么。有人可以指出我正确的方向吗？

XML -

```
 <Grid DataContext="{Binding Path=Project}">
                                ...
                                ...
                                <TextBlock Name="textBlock1" Text="Layers" Margin="18,16,0,0" />

                                <StackPanel Grid.Row="1" Grid.RowSpan="2" Grid.ColumnSpan="2">
                                    <ListBox ItemsSource="{Binding Path=Elements}" Height="175" Name="listBox1" Width="172"/>
                                </StackPanel>

                            </Grid> 
```

项目.cs

```
 //List of elements
    private ObservableCollection<FrameworkElement> elements;
    public ObservableCollection<FrameworkElement> Elements
    {
        get { return elements; }
        set
        {
            elements = value;
            NotifyPropertyChanged("Elements");
        }
    }
// An example of how an element is added to the Elements collection
// There are also image elements added similarly
private void AddTextElement(object param)
    {
        TextBlock textBlock = new TextBlock();
        textBlock.Text = "New Text";
        textBlock.Foreground = new SolidColorBrush(Colors.Gray);
        textBlock.FontSize = 25;
        textBlock.FontFamily = new FontFamily("Arial");
        textBlock.Cursor = Cursors.Hand;
        textBlock.Tag = null;

        this.Elements.Add(textBlock);
        numberOfElements++;

        this.SelectedElement = textBlock;
        this.selectedTextElement = textBlock;
    }

private void AddImageElement(object param)
    {
        bool? gotImage;
        string fileName;
        BitmapImage imageSource = GetImageFromLocalMachine(out gotImage, out fileName);

        if (gotImage == true)
        {
            Image image = new Image();
            OrderElements(image);
            image.Name = fileName;
            image.Source = imageSource;
            image.Height = imageSource.PixelHeight;
            image.Width = imageSource.PixelWidth;
            image.MaxHeight = imageSource.PixelHeight;
            image.MaxWidth = imageSource.PixelWidth;
            image.Cursor = Cursors.Hand;
            image.Tag = null;

            AddDraggingBehavior(image);
            image.MouseLeftButtonUp += element_MouseLeftButtonUp;

            this.Elements.Add(image);
            numberOfElements++;

            this.SelectedElement = image;
            this.SelectedImageElement = image;

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:08:05.407

一个原因可能是因为您在 Grid 元素中使用 Path 属性进行绑定。

您应该使用绑定源，并将您的项目对象设置为静态资源，您可以在调用绑定源时指向它。

像这样：

```
<Window
    xlmns:local="NamespaceOfMyProject">

    <Window.Resources>
        <local:Project x:key="MyProjectResource" />
    </Window.Resources>

    <Grid DataContext="{Binding Source={StaticResource MyProjectResource}}>
    ....
    </Grid>
    ....
</Window> 
```

原因是：指向对象时使用“源”，指向属性时使用“路径”。

设置 DataContext 的另一种方法是使用此 C# 代码在代码隐藏中进行。但首先给您的网格命名，以便在代码隐藏中引用它：

```
<Grid x:Name="myGrid"> 
```

代码隐藏：

```
myGrid.DataContext = new Project(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T14:35:22.730

错误地使用图像通常会导致崩溃；显示实现元素的代码以及如何设置图像。

此外，您的 XAML 缺少 ItemTemplate，您将在其中设置图像和文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-28T01:27:56.120

我猜它崩溃了，因为您已经将 FrameworkElements 添加到 Canvas 中，但随后您还将它们添加到列表中。FrameworkElements 通常不喜欢被多次添加到可视化树中。

如果这是问题所在，这样的事情可能会解决它（将您的列表绑定到`ElementsAsStrings`）：

```
 private ObservableCollection<FrameworkElement> elements;
    public ObservableCollection<FrameworkElement> Elements
    {
        get { return elements; }
        set
        {
            if(elements != null)
                elements.CollectionChanged -= onElementsChanged;
            elements = value;
            if(elements != null)
                elements.CollectionChanged += onElementsChanged;

            NotifyPropertyChanged("Elements");
            NotifyPropertyChanged("ElementsAsStrings");
        }
    }

    public IEnumerable<string> ElementsAsStrings
    {
        get
        {
            foreach(var element in Elements)
            {
                if(element is TextBox)
                    yield return (element as TextBox).Text;
                // More cases here
            }
        }
    }

    private void onElementsChanged(object sender, NotifyCollectionChangedEventArgs e)
    {
        NotifyPropertyChanged("ElementsAsStrings");
    } 
```

# python - 在 matplotlib 中设置 tickslabel 会禁用鼠标光标位置

> ID：12605646
> 
> 赞同：1
> 
> 时间：2012-09-26T15:51:08.830
> 
> 标签：python, numpy, matplotlib

每当我在 matplotlib 中绘制某些东西时，将鼠标移到绘图上时，光标的 x 和 y 位置就会显示在底部。这在探索数据时非常方便。

现在，如果我将刻度标签设置为其他值，则绘图底部光标的 x 位置为空，而 gui 会跟踪 y 位置。有没有办法继续获得 x 位置？

这是发生这种情况的一个简单示例：

```
import numpy as np
fig, ax = plt.subplots()
x=np.linspace(0,np.pi)
y=np.sin(x)
ax.plot(x,y)
ax.set_xticks([0,np.pi/2,np.pi])
ax.set_xticklabels(['0','pi/2','pi'])
plt.show() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:21:08.200

不，没有简单的方法可以做到这一点。

当您使用字符串列表设置标签时，您将其设置`xaxis.major_formatter`为`FixedFormatter` [(doc)](http://matplotlib.org/api/ticker_api.html#matplotlib.ticker.FixedFormatterhttp://)，它具有使其工作的一些特殊行为（它总是返回`''`，除非您给它第三个参数，该参数在它标记 x 轴时给出，但是否则）。光标所在位置的标记是使用 生成的`major_formatter`，当您调用 a时，`FixedFormatter`它会返回`''`，这就是显示的内容。

如果你*真的*想要这个，你必须编写自己的回调，请参阅[matplotlib 的 imshow 中的颜色值？](https://stackoverflow.com/questions/5836560/color-values-in-imshow-for-matplotlib)为起点。（或子类`axes`并重新实现`format_coord`（在当前matplotlib主分支中的axes.py中的第2903行附近）

# c# - EF 代码在创建对象时首先遍历所有属性

> ID：12605647
> 
> 赞同：0
> 
> 时间：2012-09-26T15:51:17.297
> 
> 标签：c#, performance, entity-framework, ef-code-first

我在我的应用程序中使用 EF Code First 并具有以下类：

```
 [Table("TBL_XYZ")]
    public class XYZ
    {
        [Required]
        public string PropA { get; set; }

        [Required]
        public int PropB  { get; set; }

        public int FormulaA 
        {
          get 
          {
            return PropB *  Math.PI / 100;
          }
        }
    } 
```

这就是我从数据库中获取数据的方式：

```
var data = (from e in db.XYZ where e.PropB < 100 select e).ToList(); 
```

在我添加了更多进行计算且没有设置访问器（如 FormulaA）的字段后，我意识到执行上述行时性能下降。

经过一些调试后，我发现 EF 遍历所有属性。它在创建对象时调用属性的所有获取函数，即使我不访问它们。

这种行为的目的是什么，是否有解决方法。这可能与跟踪更改有关吗？将公式放在对象本身中对我来说真的很方便，但现在它严重影响了性能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T08:32:38.123

您可以尝试添加

```
[NotMapped]
public int FormulaA .... 
```

而且在查询中只选择你真正需要的属性。

```
select new {e.PropA, e.PropB} 
```

# nosql - 传统 RDBMS 没有单点故障

> ID：12605649
> 
> 赞同：0
> 
> 时间：2012-09-26T15:51:24.320
> 
> 标签：nosql

我正在使用依赖于 Oracle 数据库的交易应用程序。

数据库崩溃了两次，企业主想要一些解决方案，即使数据库崩溃，应用程序仍然可以工作。

我的团队负责人介绍 Cassandra NOSQL 作为一种解决方案，因为它没有单点故障，但是这个选项将使我们从传统的关系模型转移到我认为是一个缺点的 NOSQL 模型。

我的问题是，有没有办法避免传统关系数据库管理系统（如 Mysql、postgreSQL、......等）出现单点数据库故障？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T15:54:27.190

听起来您只需要一个 Oracle 数据库实例集群，而不仅仅是一个实例，例如[Oracle RAC](http://www.oracle.com/technetwork/products/clustering/overview/index.html)。

如果您的 Oracle 服务器离线解决方案是使用 Cassandra，如果 Cassandra 集群出现故障会发生什么情况？您是否真的处于需要重写和重新架构整个应用程序以使用不同类型的数据存储的情况下，只是为了避免 Oracle 的停机时间？我怀疑这仅适用于使用量和负载量很大的应用程序，任何停机时间都会花费大量金钱（而不仅仅是让业务人员对他们的老板感到尴尬）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:56:06.007

> 有没有办法使用传统的关系 DBMS 避免单点 DB 故障

不，那是不可能的。仅仅是因为当一个节点死亡时。它不见了。

任何容错系统都将使用多个相互复制的节点。您仍然可以使用传统的 RDBMS，但您需要配置镜像以使系统能够容忍节点故障。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T15:58:54.510

NoSQL 不是唯一可能的解决方案。您可以使用 MySQL 设置复制：

```
http://dev.mysql.com/doc/refman/5.0/en/replication-solutions.html 
```

和

```
 http://mysql-mmm.org/ 
```

以及关于故障转移的讨论：

```
http://serverfault.com/questions/274094/automated-failover-strategy-for-master-slave-mysql-replication-why-would-this 
```

# spring - SQLITE 和外键支持

> ID：12605651
> 
> 赞同：3
> 
> 时间：2012-09-26T15:51:38.687
> 
> 标签：spring, sqlite, spring-data

任何人在启用外键支持的情况下获得sqlite和spring的成功吗？默认情况下，外键支持在 sqlite 中被禁用。[http://www.sqlite.org/foreignkeys.html](http://www.sqlite.org/foreignkeys.html)上的文档提到您必须分别为每个数据库连接启用它。我确信我得到的 sqlite 版本支持外键（上周才下载）。

测试：如果我键入 PRAGMA foreign_keys；我返回 0。这意味着外键已关闭，但存在对它的支持。

我的数据源在春季定义为：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
<property name="driverClassName" value="${jdbc.driverclass}"/>
<property name="url" value="${jdbc.url}"/>
</bean> 
```

如何通过spring配置启用外键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2019-07-10T05:08:14.080

这是一个老问题，但我最近对同样的问题有点困惑。

我知道至少有两种使用 Spring Boot 的解决方案（我假设常规 Spring 的解决方案类似）。Sqlite 外键支持的重点是 `PRAGMA foreign_keys = ON;` 在*每个连接的基础上*有效。（即，如果我有两个打开的数据库连接，并且我在第一个连接中将外键支持设置为“开”，则第一个连接将支持外键，但第二个连接不会。

**解决方案 1**
来自[Spring Boot 参考手册](https://docs.spring.io/spring-boot/docs/current/reference/html/boot-features-sql.html#boot-features-connect-to-production-database)：

> 如果你使用`spring-boot-starter-jdbc`or `spring-boot-starter-data-jpa` “starters”，你会自动获得对 HikariCP 的依赖。

Spring Boot 会自动`DataSource`为您创建一个 bean，并将`HikariCP`其用作默认驱动程序。[本身根据其配置](https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby)`HikariCP`委托给适当的驱动程序。

Spring Boot 至少`spring.datasource.url`需要在`application.properties`. Hikari 配置设置也可以在属性文件中进行设置，在 下`spring.datasource.hikari.<config-key>`，当`config-key`是[Hikari 配置键](https://github.com/brettwooldridge/HikariCP#configuration-knobs-baby)之一。知道了这一点，使用 Spring Boot 我们可以使用以下内容`application.properties`：

```
spring.datasource.url=jdbc:sqlite:path/to/db/database_file.db
spring.datasource.hikari.connectionInitSql=PRAGMA foreign_keys=1 
```

以及以下 DAO（我正在使用`JdbcTemplate`）：

```
@Repository
public class MyDaoImpl implements MyDao {

    private final JdbcTemplate JDBC_TEMPLATE;

    @Autowired
    public SimpleArticleDao(DataSource dataSource) {
        this.JDBC_TEMPLATE = new JdbcTemplate(dataSource);
    }

    @Override
    public void insertObject(MyObject object) {
        JDBC_TEMPLATE.update(
            *...insert object into some table*
        )
    }
} 
```

`dataSource`Spring Boot 将使用 Hikari 作为 DataSource创建和注入bean，Hikari 将为`PRAGMA foreign_keys = ON;`它创建的每个连接执行，确保始终启用外键支持。

**解决方案 2**
您可以在您的类中为 Spring Boot 定义一个`DataSource`bean ，并通过直接使用[Xerial JDBC 驱动程序](https://github.com/xerial/sqlite-jdbc)`@Configuration`以编程方式设置外键支持：

```
@Configuration
public class MyApplicationConfig {

    @Bean
    public DataSource dataSource() {
        SQLiteDataSource ds = new SQLiteDataSource();
        ds.setUrl("jdbc:sqlite:path/to/db/database_file.db");
        SQLiteConfig config = ds.getConfig();
        config.enforceForeignKeys(true);
        ds.setConfig(config);
        return ds;
    }

    @Bean
    ...other bean definitions
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T20:33:42.197

在其中一个春季论坛上找到了答案：

```
 <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name = "connectionInitSqls">
    <list><value>**PRAGMA foreign_keys = ON**</value></list>
    </property>
    ...
    </bean> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-02T18:01:32.060

我今天在使用带有 SQLite 和 plain 的 Spring Boot 2.2.2 时遇到了同样的问题`JdbcTemplate`。

从帕特里克泰勒的回答中实施解决方案 2 在我的测试中破坏了所有类型的东西。我仍然不确定为什么，因为验证外键支持启用的非常简单的测试确实成功了。

或者，我尝试配置`spring.datasource.hikari.connection-init-sql`，但这也不起作用。

唉，最终起作用的是将以下内容添加到`application.yml`：

```
spring:
  datasource:
    hikari:
      data-source-properties:
        foreign_keys: true 
```

这可以通过一个简单的测试用例来验证：

```
@SpringBootTest
class SqliteTests {

  @Autowired
  private JdbcTemplate jdbcTemplate;

  @DisplayName("Check for foreign key support in the SQLite backend")
  @Test
  void testSqliteForEnabledForeignKeySupport() {
    final var result = jdbcTemplate.queryForObject("PRAGMA foreign_keys", Integer.class);
    assertEquals(1, result);
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-04T11:06:51.550

**解决方案 3**

当使用 Hikari 时（默认情况下在 Spring Boot 2+ 中），我们可以简单地在 application.properties 中使用以下条目配置 Xerial JDBC Driver：

```
spring.datasource.hikari.data-source-properties.foreign_keys=true 
```

# c++ - 创建一个伪元组，一个存储在别处的数据的前端

> ID：12605654
> 
> 赞同：1
> 
> 时间：2012-09-26T15:51:48.900
> 
> 标签：c++, templates, data-structures, stl, compiler-errors

我正在尝试使用处理元组的数据结构，但是我需要创建一个真正从全局数据结构中提取数据的“元组”，获取的数据取决于值的索引。到目前为止，它通过这个简单的设置运行得相当好：

```
struct PseudoTuple
{
 struct ReturnWrapper
 {
  //lots of operator overloads and fun stuff for comparisons
 }

 typedef ReturnWrapper value_type;

 //pointers to global data and various info

 static const size_t size = 9;

 ReturnWrapper operator[](int index)
 {
  switch (index)
  {
   //routing to different values
  }
 }
}

template<> struct std::tr1::tuple_size<PseudoTuple>
{
 static const size_t value = PseudoTuple::size;
} 
```

但是，我将这些假元组提供给想要使用的数据结构`std::tr1::get`，并且我试图重载它失败了：

```
template<int _Idx> PseudoTuple::ReturnWrapper std::tr1::get(PseudoTuple& pseudotuple)
{
 return pseudotuple[_Idx];
} 
```

说它“无法匹配现有的函数声明”。STL 声明非常混乱，我无法弄清楚问题所在。这是在 Visual C++ 2010 中，以防万一。我担心还会调用其他特定于元组的函数，但我希望看到如何进行`get`工作将向我展示如何使它们也工作（如果需要）。

编辑：ecatmur 建议将函数放在命名空间中：

```
namespace std
{
 namespace tr1
 {
  template<int _Idx> PseudoTuple::ReturnWrapper get(PseudoTuple& pseudotuple)
  {
   return pseudotuple[_Idx];
  }
 }
} 
```

现在，当没有适当的 get 函数时，我遇到了以前的错误：

```
error C2784: '_Arg_traits<_Get<_Idx,tuple<_Arg0,_Arg1,_Arg2,_Arg3,_Arg4,_Arg5,_Arg6,_Arg7,_Arg8,_Arg9>::_MyImpl>::_Type>::_RType std::tr1::get(std::tr1::tuple<_Arg0,_Arg1,_Arg2,_Arg3,_Arg4,_Arg5,_Arg6,_Arg7,_Arg8,_Arg9> &)' : could not deduce template argument for 'std::tr1::tuple<_Arg0,_Arg1,_Arg2,_Arg3,_Arg4,_Arg5,_Arg6,_Arg7,_Arg8,_Arg9> &' from 'const PseudoTuple' 
```

编辑2：啊，定义的顺序是错误的，我是在使用后定义函数。我猜它适用于结构，`tuple_size`但不适用于函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T15:55:13.007

要重载自由函数，您需要在适当的命名空间中提供定义：

```
namespace std {
    namespace tr1 {
        template<int _Idx> PseudoTuple::ReturnWrapper get(PseudoTuple& pseudotuple)
        {
            return pseudotuple[_Idx];
        }
        template<int _Idx> ... get(const PseudoTuple &pseudotuple)
        {
            return ...;
        }
        template<int _Idx> ... get(PseudoTuple &&pseudotuple)
        {
            return ...;
        }
    }
} 
```

请注意，这是**17.6.4.2.1 [namespace.std]**中未定义的行为；唯一允许您添加`std`或包含命名空间的代码对象是用户定义类的模板特化。不过，对于当前标准应该没问题，因为您的所有参数都是用户定义的类型，并且与标准定义的代码对象没有冲突。

# c# - 如何测试 Type 是否派生自抽象基本泛型类型？

> ID：12605661
> 
> 赞同：4
> 
> 时间：2012-09-26T15:52:07.643
> 
> 标签：c#, .net, types

嘿，我有一个抽象的泛型类型`BList<TElement> where TElement : Career`。职业也是抽象的类型。

给定一个类型 T，我如何测试它是否是 BList 类型？以及如何转换为基类？我试过`(BList<Career>)object`了，但编译器很不高兴。显然我不会写`BList<Career>`，因为职业是抽象的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-26T15:59:27.973

你的问题有点模棱两可，所以我会尝试回答一些我认为你可能会问的事情......

如果您想检查一个实例`T`是否是 BList，您可以使用`is`：

```
if (someInstance is BList<Career>)
{
...
} 
```

如果您想查看泛型类型参数是否为 a `BList<Career>`，您可以使用`typeof`：

```
if (typeof(T) == typeof(BList<Career>)
{
...
} 
```

但是，如果你只是想看看它是否是*any* `BList<>`，你可以使用反射：

```
var t = typeof(T);  // or someInstance.GetType() if you have an instance

if (t.IsGenericType && t.GetGenericTypeDefinition() == typeof(BList<>))
{
    ...
} 
```

现在，至于如何将 a`BList<TElement>`转换为 a `BList<Career>`？你不能安全。

这与抽象无关，它与即使*继承*自也不继承`Career`的事实有关。`BList<Career>`*`BList<TElement>``Career``TElement`*

 *考虑一下：

```
public class Animal { }

public class Dog : Animal { }

public class Cat : Animal { } 
```

鉴于这些，问问你自己为什么这不起作用：

```
List<Animal> animals = new List<Cat>(); 
```

看到问题了吗？如果我们允许您将 a 强制`List<Cat>`转换为 a `List<Animal>`，那么突然之间该`Add()`方法将支持`Animal`而不是`Cat`，这意味着您可以这样做：

```
animals.Add(new Dog()); 
```

显然，我们不可能将 a 添加`Dog`到 a `List<Cat>`。这就是为什么即使继承自也不能将 a`List<Cat>`用作 a 的原因。`List<Animal>``Cat``Animal`

类似的情况在这里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T15:55:10.560

```
var item = theObject as BList<Career>; 
```

如果是，`null`那么它不是那种类型。*

# android - 将最新的 Android 版本推送到设备

> ID：12605662
> 
> 赞同：4
> 
> 时间：2012-09-26T15:52:10.517
> 
> 标签：android, apk, distribution, android-install-apk

有没有一种方法或应用程序可以让我将最新的 android 版本推送到所有安装了它的设备上？我的应用程序尚未进入 Google Play 市场，但希望我的测试人员不必手动安装我推送的每个构建版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T19:48:14.290

你为什么不直接使用保管箱？

将其安装在您开发应用程序的位置，然后将可用 apk（发布）的文件夹共享给也在手机上安装 Dropbox 的测试人员。当发生更新时（您将文件移动到文件夹中），他们会收到更新通知，然后他们可以直接从 Dropbox 中安装它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-26T16:24:51.160

不久前我写了一个更新库，你可以在[这里](https://github.com/RaghavSood/AppaholicsUpdateChecker)找到。它允许您通过在服务器上维护最新的 apk 以及具有最新版本代码的文本文件来更新您的应用程序。

该库是开源的，因此请随时根据您的需要进行调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-04T21:14:52.390

以下是一些解决方案，您可能会发现其中一些已强制更新和自动更新。

Android Google Play Market - 测试版

[阿帕卢萨](http://appaloosa-store.com)

[应用程序47](http://www.app47.com/)

[曲棍球应用程序](http://hockeyapp.net/features/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-15T10:06:31.810

对于这种需要，我肯定会推荐[TestFlight](https://www.testflightapp.com)。它是免费的，与 iOS/Android 兼容，并且在处理 beta 应用程序部署时可以完成所有预期的工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-26T16:25:46.567

您必须在应用程序中构建自己的更新机制。它需要定期轮询服务器并询问是否有可用的更新。如果是这样，则需要下载更新并触发更新的安装。

也许这对这个案子来说太过分了。

# reporting-services - 根据行组的切换状态更改 SSRS 报告文本框中的文本

> ID：12605664
> 
> 赞同：1
> 
> 时间：2012-09-26T15:52:14.007
> 
> 标签：reporting-services

显然这应该很简单。经过大量挖掘，我还没有找到任何有效的方法。我的 SSRS 报告中有一个行组，其可见性由文本框切换。我想要的是让文本在折叠时**显示**在文本框中，并在展开时**隐藏**。

但是我找不到可以给我切换状态的组的任何属性。我在一些论坛上发现这是不可能的。作为一种解决方法，我尝试了**InScope()**函数（如[http://forums.asp.net/t/1601570.aspx/1](http://forums.asp.net/t/1601570.aspx/1)中所建议的那样）。但无济于事。任何人都可以提出任何建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T22:56:33.337

我相信您说 SSRS 没有公开 ToggleState 属性以供在报告中使用是正确的。

在这些类型的情况下，我使用报表参数来控制报表的状态。例如，您可以在报表中添加一个名为 isGroupVisible 的参数，默认值为 1 以表示可见。将您的组的可见性设置为该参数，并根据 isGroupVisible 的状态设置您的文本框值。然后在文本框中，您将操作设置为转到报告，并将报告 url 设置为与 isGroupVisible = 相同的报告，与当前相反。

你可以装饰你的文本框，让用户知道可以按下它来切换报告的状态。

这种方法的缺点是它不像 ajax 调用 SSRS 来扩展可见性那样敏捷——它会在每次按下切换按钮时发回服务器。

这种方法的优点包括在控制报告状态方面更加灵活。

# php - PHP中的表格打印

> ID：12605669
> 
> 赞同：0
> 
> 时间：2012-09-26T15:52:23.553
> 
> 标签：php, html, arrays, loops, html-table

我有一个显示类别和子类别列表的表格，使用函数循环遍历父/子树。这是脚本的标记：

```
<table border="1" width="100%" cellspacing="0" cellpadding="2">
    <tr class="dataTableHeadingRow">
        <td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
        <td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
    </tr>
    <tr class="dataTableRow">
    <td class="dataTableContent">
<?php
function category_list( $category_parent_id = 0 )
{
    // NOTE THE ADDITIION OF THE PARENT ID:
    $sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order from ' . TABLE_CATEGORIES . ' c, ' . TABLE_CATEGORIES_DESCRIPTION . ' cd where c.categories_id = cd.categories_id AND c.parent_id='.$category_parent_id;
    $res  = tep_db_query( $sql );
    $cats = array();

    while ( $cat = tep_db_fetch_array( $res ) )
    {
        $cats[] = $cat;
    }

   if (count($cats) == 0)
   {
    return '';
   }

    // populate a list items array
    $list_items = array();
    $list_items[] = '<ul>';

    foreach ( $cats as $cat )
    {
        // open the list item
        $list_items[] = '<li>';

        // construct the category link

        $list_items[] = $cat['categories_name'];

        // recurse into the child list
        $list_items[] = category_list( $cat['categories_id'] );

        // close the list item
        $list_items[] = '</li>';
    }
    $list_items[] = '</ul>';

    // convert to a string
    return implode( '', $list_items );

}  

echo category_list();
?>
        </td>
        <td class="dataTableContent"></td>
    </tr>
</table> 
```

`<td>`我将如何打印单个列表元素，而不是打印为一个列表`<td>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:02:51.210

首先，从 中删除 php 函数`<td>`并将其放在 table/html 的顶部。而不是`echo category_list();`，做`$list = category_list();`

然后在 HTML 中，执行以下操作：

```
 <tr class="dataTableRow">
       <?php foreach( $list as $v) { ?>           
         <td class="dataTableContent"><?php echo $v; ?></td> 
         <?php } ?> 
```

最新编辑：

```
 <table border="1" width="100%" cellspacing="0" cellpadding="2">
<tr class="dataTableHeadingRow">
    <td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
    <td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
</tr>
<tr class="dataTableRow"><ul> <!-- change #1 -->

<?php
function category_list( $category_parent_id = 0 )
{
// NOTE THE ADDITIION OF THE PARENT ID:
$sql  = 'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order from ' . TABLE_CATEGORIES . ' c, ' . TABLE_CATEGORIES_DESCRIPTION . ' cd where c.categories_id = cd.categories_id AND c.parent_id='.$category_parent_id;
$res  = tep_db_query( $sql );
$cats = array();

while ( $cat = tep_db_fetch_array( $res ) )
  {
    $cats[] = $cat;
  }

   if (count($cats) == 0)
    {
  return '';
  }

     // populate a list items array
      $list_items = array();
     // $list_items[] = '<ul>'; Change #2

      foreach ( $cats as $cat )
     {
    // open the list item
    $list_items[] = '<td class="dataTableContent"><li>'; //Change #3

    // construct the category link

    $list_items[] = $cat['categories_name'];

    // recurse into the child list
    $list_items[] = category_list( $cat['categories_id'] );

    // close the list item
    $list_items[] = '</li></td>'; //Change #4
}
$list_items[] = '</ul></tr>'; //Change #5

// convert to a string
return implode( '', $list_items );

}  

echo category_list();
?>

 <!--remove </tr> change #6 -->
 </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:20:18.150

在这里，我为你清理了这个。特别是，每个函数实际上应该只做一件事，因此您可以直接了解它在做什么。我还删除了关于你的列表/内爆事情的不必要的错误。你正在输出一个字符串，使用一个字符串！

```
<?php
/**
  * Gets all categories for a particular parent id.
  */
function get_categories( $category_parent_id = 0 ) {
    $sql  =  'select cd.categories_name,c.categories_id, c.parent_id, c.sort_order'
            .' from ' . TABLE_CATEGORIES . ' c, '
                      . TABLE_CATEGORIES_DESCRIPTION . ' cd '
            .'where c.categories_id = cd.categories_id '
            .'AND c.parent_id='.$category_parent_id;
    $result  = tep_db_query( $sql );//Really should use PDO
    $categories = array();//Categories are not chased by dogs. Use full names for your variables!

    while ( $category = tep_db_fetch_array( $result ) )
    {
        $categories[] = $category;
    }

    return $categories;
}

/**
 * Outputs HTML for a list of categories, recursing into them if necessary for more data.
 */
function output_categories($categories, &$output = "") {
    if (count($categories) == 0 || empty($categories)) { return; }//either works.

    $output =. "<ul>";//change this to <tr> for a table row
    foreach ($categories as $category) {
        output =. "<li>";//change this to <td> for a table cell
        $category['categories_name'];
        output_categores(categories($category['categories_id']), $output);
        output =. "</li>";//change to </td>
    }
    $output =. "</ul>";//change to </tr>
    return;//Note that $output will be changed by this function.
}
%>
<table border="1" width="100%" cellspacing="0" cellpadding="2">
    <tr class="dataTableHeadingRow">
        <td class="dataTableHeadingContent"><?php echo TABLE_HEADING_PRODUCTS; ?></td>
        <td class="dataTableHeadingContent" align="right"><?php echo TABLE_HEADING_TOTAL_WEIGHT; ?>&nbsp;</td>
    </tr>
    <tr class="dataTableRow">
        <td class="dataTableContent">
        <?php
            echo output_categories(get_categories());
        ?>
        </td>
        <td class="dataTableContent"></td>
    </tr>
</table> 
```

# javascript - 两个表单选择与 javascript 函数发生冲突的问题

> ID：12605672
> 
> 赞同：0
> 
> 时间：2012-09-26T15:52:28.423
> 
> 标签：javascript, jquery, html

我有两种形式，其中都有选择/选项（下面的示例）。我的目的是，当用户选择其中一个选项时，该值将通过函数传递并插入到超链接字符串中。第一种形式工作正常，但在执行第二种形式并使用它不起作用的相同功能时，它似乎与第一种形式发生冲突。有没有办法在不复制、粘贴和重命名它的情况下重用这个函数，因为这会使脚本变得庞大？

```
<form>
  <select id="event_date_01" class="add_event_url">
    <option value="124167826">4th Oct 2012, 2pm-3pm AEST</option>
    <option value="398017490">4th Oct 2012, 3pm-4pm BST</option>
    <option value="536485554">25th Oct 2012, 3pm-4pm AEDT</option>
    <option value="708861114">25th Oct 2012, 3pm-4pm BST</option>
    <option value="339435154">29th Oct 2012, 3pm-4pm AEDT</option>
    <option value="915593210">29th Oct 2012, 3pm-4pm GMT</option>
  </select>
</form>
<span class="webinarLink2">
  <a href="" target="_blank" class="desturl webinarLink">
    Register now &raquo;
  </a>
</span>

<form>
 <select id="event_date_02" class="add_event_url">
  <option value="411491250">27th Sept 2012, 2pm-3pm AEST</option>
  <option value="175324970">27th Sept 2012, 3pm-4pm BST</option>
 </select> 
<span class="webinarLink2"><a href="" target="_blank" class="desturl webinarLink">Register now &raquo;</a></span>
</form> 
```

我正在使用的javascript如下

```
$(document).ready(function() {  
  if ($("select.add_event_url").length) {
    $("select.add_event_url").change(displayVals);
    displayVals();
  }
});

function displayVals() {
  var event_date = $("#event_date").val();
  $("a.desturl").attr('href', 'https://www2.gotomeeting.com/register/' + event_date);
} 
```

提前谢谢各位

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:01:50.920

您似乎正在使用具有相同 ID 的选择元素。这行不通；ID 必须是唯一的。

给两个`<select>`不同的 ID，但保持相同的类，并尝试这样的事情：

```
$(document).ready(function() {
    $("select.add_event_url").change(function(e) {
        var $select = $(this),
            event_date = $select.val(),
            baseurl = 'https://www2.gotomeeting.com/register/';
        $("a.desturl").attr('href', baseurl + event_date);
    });
});​ 
```

[http://jsfiddle.net/74Lfg/1/](http://jsfiddle.net/74Lfg/1/)

**更新**

为了从 your 遍历`select`到正确的`a.desturl`，您需要将它们放在相同的相对位置，以便它们可以从 from 遍历`this`。 [http://jsfiddle.net/74Lfg/4/](http://jsfiddle.net/74Lfg/4/)

```
$(document).ready(function() {
    $("select.add_event_url").change(function(e) {
        var $select = $(this),
            event_date = $select.val(),
            baseurl = 'https://www2.gotomeeting.com/register/';
        $select.closest('form').find('.webinarLink2 a.desturl').attr('href', baseurl + event_date);
    });
    $('select.add_event_url').trigger('change');
});​ 
```

HTML（注意第一个链接已移到表单内）：

```
<form>
  <select id="event_date_01" class="add_event_url">
    <option value="124167826">4th Oct 2012, 2pm-3pm AEST</option>
    <option value="398017490">4th Oct 2012, 3pm-4pm BST</option>
    <option value="536485554">25th Oct 2012, 3pm-4pm AEDT</option>
    <option value="708861114">25th Oct 2012, 3pm-4pm BST</option>
    <option value="339435154">29th Oct 2012, 3pm-4pm AEDT</option>
    <option value="915593210">29th Oct 2012, 3pm-4pm GMT</option>
  </select>
<span class="webinarLink2">
  <a href="" target="_blank" class="desturl webinarLink">
    Register now &raquo;
  </a>
</span>
</form>

<form>
 <select id="event_date_02" class="add_event_url">
  <option value="411491250">27th Sept 2012, 2pm-3pm AEST</option>
  <option value="175324970">27th Sept 2012, 3pm-4pm BST</option>
 </select> 
<span class="webinarLink2"><a href="" target="_blank" class="desturl webinarLink">Register now &raquo;</a></span>
</form>​ 
```

**或者，**您可以为每个链接分配一个唯一 ID（以便您可以将其放置在页面中的任何位置）并将该 ID 作为`data-`属性添加到`select`元素。[http://jsfiddle.net/74Lfg/5/](http://jsfiddle.net/74Lfg/5/)

```
$(document).ready(function() {
    $("select.add_event_url").change(function(e) {
        var $select = $(this),
            event_date = $select.val(),
            baseurl = 'https://www2.gotomeeting.com/register/';
        $('#'+$select.data('targetlink')).attr('href', baseurl + event_date);
    });
    $('select.add_event_url').trigger('change');
});​ 
```

HTML：

```
<form>
  <select id="event_date_01" class="add_event_url" data-targetlink="targetlink1">
    <option value="124167826">4th Oct 2012, 2pm-3pm AEST</option>
    <option value="398017490">4th Oct 2012, 3pm-4pm BST</option>
    <option value="536485554">25th Oct 2012, 3pm-4pm AEDT</option>
    <option value="708861114">25th Oct 2012, 3pm-4pm BST</option>
    <option value="339435154">29th Oct 2012, 3pm-4pm AEDT</option>
    <option value="915593210">29th Oct 2012, 3pm-4pm GMT</option>
  </select>
<span class="webinarLink2">
  <a href="" target="_blank" id="targetlink1" class="desturl webinarLink">
    Register now &raquo;
  </a>
</span>
</form>

<form>
 <select id="event_date_02" class="add_event_url" data-targetlink="targetlink2">
  <option value="411491250">27th Sept 2012, 2pm-3pm AEST</option>
  <option value="175324970">27th Sept 2012, 3pm-4pm BST</option>
 </select> 
<span class="webinarLink2"><a href="" target="_blank" class="desturl webinarLink" id="targetlink2">Register now &raquo;</a></span>
</form>​​​​​​​​​​​​​​ 
```

# javascript - 正在加载 AJAX 内容，但未触发完整功能

> ID：12605674
> 
> 赞同：0
> 
> 时间：2012-09-26T15:52:37.693
> 
> 标签：javascript, ajax, jquery

我有一个通过 ajax 加载页面内容的功能，本质上是该功能，淡出当前内容，用 ajax 请求的结果替换内容，然后将内容淡入。

我的函数适用于大多数页面，但由于某种原因，在一个特定的请求中，正在加载内容，但没有调用 ajax 成功函数，这意味着内容已加载但仍处于隐藏状态。

这是我的代码，出于诊断目的，我已将 ajax 成功函数替换为警报，但这并未在同一页面上运行（但正在加载 ajax 内容）：

```
var loadUrl=b_url+page;
        if (History.enabled) {History.pushState({state:2}, page, "/"+page);}
        window.name=page;
        $.ajax({
            cache: false,
            async: false,
            type: "POST",
            url: loadUrl,
            dataType: "html",
            beforeSend: function() {
                 $('.contentarea').animate({
                        'opacity'   : 0
                    }, 180, 'jswing', function(){
                            $('#mainc').hide(350, 'jswing');
                });
             },
            success: function(response) {
                $('#mainc').html(response);
                alert('success')
            },
            failure: function(msg) {
                alert('FAIL');
            }
        }); 
```

使用上面的代码，问题页面上不会显示成功或失败消息，但是如果我删除该行：

```
$('#mainc').html(response); 
```

然后显示成功消息。正在加载的内容是一个 html 页面，正如我所说的，它似乎加载得很好（从某种意义上说，它在文档中）。每个页面栏都可以正常工作，因此我怀疑返回的内容存在一些问题（尽管它可以正常加载到文档中）-正在加载的内容是使用 codeigniter 由大量部分构建的，所以我想我的问题是如何我着手解决问题所在。我已经尝试在我的文档准备功能中添加它（阅读了类似的帖子），但它什么也没做：

```
$(document).ajaxError(function(e, xhr, settings, exception) {
alert('error in: ' + settings.url + ' \n'+'error:\n' + xhr.responseText );
}); 
```

一个想法我如何去找出问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:00:44.397

对于 .ajaxComplete - 您应该将其注册为正在加载的元素上的页面加载的一部分 - 所以

```
$('#mainc').ajaxComplete(function(){ alert('bob')}) 
```

可以是它的事件，而不是被埋在 .animate 函数中。否则行：

```
$("#mainc").load(loadUrl); 
```

可以直接包含您的 oncomplete 函数，而不是注册事件侦听器。例如

```
$("#mainc").load(loadUrl, function(){ alert('bob' }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:06:51.460

以下启动异步过程：

```
$("#mainc").load(loadUrl); 
```

这可能`ajaxComplete`在下一行的侦听器注册之前完成。您可以在触发之前附加侦听器`load`。

# javascript - 如何在 HTML 中找到行之间的空格？

> ID：12605675
> 
> 赞同：7
> 
> 时间：2012-09-26T15:52:40.373
> 
> 标签：javascript, html, css, android-webview

[这是我之前的问题的](https://stackoverflow.com/questions/12537001/find-location-of-line-on-screen)后续问题。我正在尝试找到一种方法来查找元素中每一行文本的确切位置。

我能够找到 css`lineHeight`属性（请参阅上一个答案）。问题是我的元素的高度略大于行数的累积高度乘以`lineHeight`.

*一个例子：*

我有一个`<p>`没有填充、边框或边距的 2010 像素高（`scrollHeight`, `offsetHeight`，并且`clientHeight`所有报告都相同），并且在浏览器中有 89 行。是22 `lineHeight`。`computedStyle()`

2010 / 22 = 91.37 行

对于小元素，我可以将值设置为底值以获得正确的行数，但是在较大元素的情况下遇到上述问题，我无法准确地获得确切的行数。

**我的假设是我没有考虑这些文本行之间的一些小空间。知道如何找到它吗？**它与字体类型有关吗？是浏览器自动设置的吗？任何文档都会特别有帮助。

谢谢！！

***更新：***

所以我有 26 个上标`<p>`，每个上标突出 2px，将`lineHeight`它们出现的那些行的 24px 延伸到 24px，这占了我缺少的空间。（Woot！到目前为止谢谢！）

**我想我现在所处的船是我需要找到一种方法来动态计算它们在正常基线上方突出多少，或者发现 a 的基线`<sup>`比正常基线高多少。（反之亦然`<sub>`。）否则，我可以用 CSS 确定吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:58:26.200

提供我自己的答案，因为@lanzz 在某种程度上是不完整的。

如果将块元素定义为：

```
div {
 font-size: 10px;
 line-height: 10px;
 height:30px;
 margin-top: 0px;
 margin-bottom: 0px;
 border: 0px;
 overflow-y: hidden;
 padding: 0px;
} 
```

您将获得足够的空间来容纳 3 行。但是，如果您有子脚本或超级脚本，则可见的行数会更少。通过删除溢出，您可以强制它仅显示 3 行空间。

这可以在以下位置得到证明：http: [//jsbin.com/ogoruy/4/](http://jsbin.com/ogoruy/4/)

上标和下标是“行内块元素”：

> 内联框的高度包含所有字形及其每侧的半前导，因此正好是“行高”。
> 
> 当一个块容器框内的所有行内框只有一个 'line-height' 值并且它们都是相同的字体（并且没有替换元素、行内块元素等）时，上述将确保连续行的基线完全分开“行高”。
> 
> [http://www.w3.org/TR/CSS2/visudet.html#line-height](http://www.w3.org/TR/CSS2/visudet.html#line-height)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T18:35:22.013

上标和下标通常在线条边界的上方和下方突出，如[本演示](http://jsbin.com/ogoruy/1/edit)所示- 您会看到左侧示例的线条之间的明显空间比右侧的要大，即使它们具有相同的`line-height`. 不幸的是，浏览器“排版”（如果你可以这样称呼它）不允许您确定子/超级脚本突出*多少*，因此在计算实际行高时不能考虑到这一点。

# symfony - 如何延长 Symfony2 中每个请求的 remember_me cookie？

> ID：12605681
> 
> 赞同：1
> 
> 时间：2012-09-26T15:52:56.037
> 
> 标签：symfony, remember-me

我使用标准`remember_me`的 symfony 功能，但它每隔一段时间就会过期，在 config.xml 中设置。例如，我已`lifetime`设置为 1800。不管我做什么，它会在上次登录后 0.5 小时后将我注销。我希望它仅在 0.5 小时不活动后将我注销。

每个请求都应该延长记住我的 cookie。

这可以通过配置来完成，还是我应该弄乱内核事件并手动破解？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:01:54.307

确实有一种方法可以只使用配置设置，但仅限于 Symfony 2.1。可行的方法是使用 PHP 中集成的会话垃圾收集。在这里你可以如何实现它。

在您的 config.yml 文件中，设置以下变量：

```
framework:
  session:
    cookie_lifetime: 86400 # One day, cookie lifetime
    gc_maxlifetime: 1800 # 30 minutes, session lifetime
    gc_probability: 5
    gc_divisor: 100 
```

使用此配置，发送到浏览器的 cookie 将在一整天内有效。但是，会议将持续 30 分钟。由于每次请求都会保存会话，因此每次请求后都会“重新启动”生命周期。因此，每次请求都会延长会话。

然后是垃圾收集部分。这可能是“有问题的”，具体取决于您想要的精确程度。属性`gc_probability`和`gc_divisor`控制垃圾收集运行的频率。这些数字意味着每次会话初始化时 GC 将以 5% (5/100, `gc_probability`/ ) 的概率运行。`gc_divisor`

这意味着当 GC 运行时，它将删除过期的会话。但是，由于这是一个概率特征，因此您无法完全控制它。在您指定的生命周期之后，某些会话仍然可以访问，因为 GC 尚未运行。

如果这对您来说是个问题，那么您需要在每个请求上都有一个侦听器并检查会话是否仍然有效。如果您想在会话过期时向用户显示消息，您还需要执行此操作，因为还没有会话过期事件。

不要忘记，我的回答只在 Symfony 2.1 中有效。在 2.0 上，您还需要一个请求侦听器来验证会话生命周期值。

这里有一些关于会话空闲时间的链接：

1.  介绍保持活动会话的 PR 上的链接：[PR-2171](https://github.com/symfony/symfony/issues/2171)
2.  会议文档：[这里](http://symfony.com/doc/current/components/http_foundation/session_configuration.html#configuring-garbage-collection)
3.  会话 gc 上的 PHP 站点：[这里](http://php.net/manual/en/session.configuration.php#ini.session.gc-divisor)

希望这对您有所帮助。

问候， 马特

# android - 使用现有密钥库导出签名的 Android 应用程序时出现“错误：无法恢复密钥”

> ID：12605682
> 
> 赞同：17
> 
> 时间：2012-09-26T15:52:58.693
> 
> 标签：android, export, apk, keystore, android-keystore

对于我导出并上传到 Google Play 的不同应用程序，我有一个现有的带有密码的密钥库和一些带有不同密码的密钥。

现在，我最近导入了该应用程序的一个项目，对其进行了一些重大修改，并尝试使用相同的密钥库导出它，并选择与最初创建它时相同的别名/密码。

问题是，在我选择密钥别名并输入密钥密码的步骤之后，我看到“**错误：无法恢复密钥**”。

![在此处输入图像描述](../Images/2469488ccc6c5adcfba4695d521bdda3.png)

我怀疑我可能输入了错误的密钥密码（请注意，密钥库密码是正确的，所以这不是问题的原因）。

我尝试创建一个新别名并在其下导出应用程序，但 Google Play 不会接受此文件，除非它使用相同的证书签名。

除了尝试暴力破解密钥密码之外，我真的不知道如何在这种情况下进行。如果您认为这是唯一的途径，您是否知道用于密钥库中密钥的一个很好的暴力破解工具，我已经知道该工具的密码？密钥库是一个 .reg 文件，由 Eclipse 的导出向导创建。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-10-02T14:03:20.413

很确定您只是输入了错误的密码。刚刚发生在我身上，偶然发现了你的问题，希望得到答案。没有找到，所以我再次尝试输入密码。然后它起作用了。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-04T09:50:03.800

我偶然发现了同样的问题。但我确定我输入了正确的密码。我什至将它输入到记事本并复制粘贴以确保。之后，我为我的密钥库密钥密码创建了一个密码破解程序，发现密钥实际上是我一直使用的那个！再试一次，它奏效了。所以我猜这是某种错误。也许您应该尝试关闭并重新打开 Eclipse，或者重新启动计算机。

# android - xml文件中的字符串数组中的问题：以非位置格式指定的多个替换和预期的找到标记

> ID：12605684
> 
> 赞同：32
> 
> 时间：2012-09-26T15:53:00.747
> 
> 标签：android, android-resources

> **可能重复：**
> [Android XML 百分比符号](https://stackoverflow.com/questions/4414389/android-xml-percent-symbol)

嗨，伙计，我在文件 xml 中有一个数组：

```
<string-array name="type_data_graph">
        <item>Veichle speed (Km/h)</item>
        <item>Engine Rpm (rpm)</item>
        <item>Barometric pressure (kPa absolute)</item>
        <item>Fuel pressure (kPa)</item>
        <item>Fuel Rail pressure of manifold vacuum (kPa)</item>
        <item>Fuel Rail pressure diesel/gasoline (kPa)</item>
        <item>MAF air flow rate (grams/sec)</item>
        <item>Intake MAP (kPa)</item>
         <item>Engine % torque (%) </item>       
......
    </string-array> 
```

编译时出现错误

```
 <item>Engine % torque (%) </item> 
```

错误是

> 说明资源路径位置类型错误：以非位置格式指定多个替换；您是要添加 formatted="false" 属性吗？arrays.xml /DashboardDroid/res/values 第 43 行 Android AAPT 问题
> 
> 描述资源路径位置类型错误：在预期的arrays.xml /DashboardDroid/res/values第43行找到标签Android AAPT问题是什么意思？？？我关闭所有标签

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-09-26T16:02:53.113

代替

```
 Engine % torque (%) 
```

尝试使用

```
Engine %% torque (%%) 
```

如果您的 strings.xml 文件中需要 %

或尝试检查[此处的链接](http://developer.android.com/guide/topics/resources/string-resource.html)

或者干脆尝试给予

```
 formatted="false" 
```

在你的

```
<string-array> 
```

标签

# ruby-on-rails - 如何在测试之间重复使用 Capybara 会话？

> ID：12605692
> 
> 赞同：18
> 
> 时间：2012-09-26T15:53:22.403
> 
> 标签：ruby-on-rails, session, cookies, capybara

我想继续使用同一个会话，我指的是 Rails 在`Test::Unit`使用 Capybara 的各种集成测试之间的会话。该`Capybara::Session`对象在所有测试中都是相同的，因为它被重复使用，但是当我在另一个测试中访问另一个页面时，我会立即注销。

深入研究我发现`capybara_session.driver.browser.manage.all_cookies`在一个测试和下一个测试之间清除了。

有什么想法吗？或者为什么？或如何避免？

为了解决这个问题，我将 cookie 保存在一个类变量中，稍后通过运行重新添加：

```
capybara_session.driver.browser.manage.add_cookie(@@cookie) 
```

它似乎工作，cookie在那里，但是当有一个请求时，cookie被另一个替换，所以它没有效果。

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-30T05:29:45.347

在与页面交互的水豚代码之后添加以下内容：

```
Capybara.current_session.instance_variable_set(:@touched, false)

or

page.instance_variable_set(:@touched, false) 
```

如果这不起作用，这些可能会有所帮助：

[https://github.com/railsware/rack_session_access](https://github.com/railsware/rack_session_access)

[http://collectiveidea.com/blog/archives/2012/01/05/capybara-cucumber-and-how-the-cookie-crumbles/](http://collectiveidea.com/blog/archives/2012/01/05/capybara-cucumber-and-how-the-cookie-crumbles/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-17T20:47:17.330

如果您正在尝试将单个示例串联成一个故事（黄瓜风格，但没有黄瓜），您可以使用名为 rspec-steps 的 gem 来完成此操作。例如，通常这不起作用：

```
describe "logging in" do
  it "when I visit the sign-in page" do 
    visit "/login"
  end
  it "and I fill in my registration info and click submit" do
    fill_in :username, :with => 'Foo'
    fill_in :password, :with => 'foobar'
    click_on "Submit"
  end
  it "should show a successful login" do
    page.should have_content("Successfully logged in")
  end
end 
```

因为 rspec 回滚了它的所有实例变量、会话、cookie 等。

如果您安装 rspec-steps（注意：当前与 2.9 之后的 rspec 不兼容），您可以将 'describe' 替换为 'steps' 并且 Rspec 和 capybara 将保留示例之间的状态，允许您构建更长的故事，例如：

```
steps "logging in" do
  it "when I visit the sign-in page" #... etc.
  it "and I fill in" # ... etc.
  it "should show a successful" # ... etc.
end 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T17:35:53.377

`@browser.manage.delete_all_cookies`您可以通过猴子修补方法来防止在测试之间发生调用`Capybara::Selenium::Driver#reset!`。这不是一种干净的方式，但它应该可以工作......

将以下代码添加到您的项目中，以便在您*之后*`require 'capybara'`执行它：

```
class Capybara::Selenium::Driver < Capybara::Driver::Base
  def reset!
    # Use instance variable directly so we avoid starting the browser just to reset the session
    if @browser
      begin
        #@browser.manage.delete_all_cookies <= cookie deletion is commented out!
      rescue Selenium::WebDriver::Error::UnhandledError => e
        # delete_all_cookies fails when we've previously gone
        # to about:blank, so we rescue this error and do nothing
        # instead.
      end
      @browser.navigate.to('about:blank')
    end
  end
end 
```

出于兴趣，可以在 Capybara 的代码库中看到违规行：[https ://github.com/jnicklas/capybara/blob/master/lib/capybara/selenium/driver.rb#L71](https://github.com/jnicklas/capybara/blob/master/lib/capybara/selenium/driver.rb#L71)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T11:20:05.710

It may be worth posting the reason why you need this kind of behaviour. Usually, having the need to monkey patch Capybara, is an indication that you are attempting to use it for something it was not intended for. It is often possible to restructure the tests, so that you don't need the cookies persisted across integration tests.

# php - 显示来自 Webroot 外部目录的图像

> ID：12605693
> 
> 赞同：0
> 
> 时间：2012-09-26T15:53:24.077
> 
> 标签：php, linux, image

我是 PHP 新手，我的 linux 服务器上有存储库，托管 web 的地方。

我有图像文件夹，例如 /myfolder/image1-user 等。我想在我的门户网站相册上显示它。我怎样才能做到这一点？

**编辑** 我已经迭代了存储图片的目录。现在我有图像路径的数组列表，我使用 IMG SRC 标记来显示，但没有显示任何内容，我还想要存储库中包含照片的每个文件的 URL，我有这样的图像链接 /myrepo/照片/photos-1/1.jpg 等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:25:50.003

您必须遍历存储图像的文件夹。

```
 <?php

if ($handle = opendir('/path/to/files')) {
    echo "Directory handle: $handle\n";
    echo "Entries:\n";

    /* This is the correct way to loop over the directory. */
    while (false !== ($entry = readdir($handle))) {
        echo "$entry<br/>";
    }

    closedir($handle);
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-17T01:22:19.000

symlink!

Say you want to display from your web root, e.g. /imgs/photos and your document root is the default '/var/www'

Then symlink that to the real folder below the webroot, for example:

`ln -s /real/path/to/my/photos /var/www/imgs/photos` (on command line)

Then, when in your html you use src="/imgs/photos/great-photo.jpg" it will display "/real/path/to/my/photos/great-photo.jpg"

This may not work if you're on a shared hosting virtual server environment with all kinds of restrictions (such as open basedir etc.)

# selenium - Selenium tbody 文本提取

> ID：12605696
> 
> 赞同：0
> 
> 时间：2012-09-26T15:53:37.847
> 
> 标签：selenium, webdriver

我试图自动化的 Web 应用程序有一个诊断工具，可以 ping 到一个网站。它在具有表结构的框中提供输出（所有这些都包含在 na 中）。

我正在使用 Selenium WebDriver 和 Java 对其进行自动化编程。它被构造为 JUnit 4 测试并使用 WebDriver（不是 Selenium RC，而是较新的）

这是它的样子：

```
<tr>
<td style="font-family:Arial;font-size:11px;"></td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;"> </td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;">PING ds-any-fp3-real.wa1.b.yahoo.com (98.138.253.109) 56(84) bytes of data.</td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;">64 bytes from ir1.fp.vip.ne1.yahoo.com (98.138.253.109): icmp_req=1 ttl=53 time=81.9 ms</td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;">64 bytes from ir1.fp.vip.ne1.yahoo.com (98.138.253.109): icmp_req=2 ttl=53 time=148 ms</td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;">64 bytes from ir1.fp.vip.ne1.yahoo.com (98.138.253.109): icmp_req=4 ttl=53 time=143 ms</td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;"></td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;">--- ds-any-fp3-real.wa1.b.yahoo.com ping statistics ---</td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;">5 packets transmitted, 3 received, 40% packet loss, time 4012ms</td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;">rtt min/avg/max/mdev = 81.917/124.763/148.373/30.349 ms</td>
</tr>
<tr>
<td style="font-family:Arial;font-size:11px;"></td>
</tr>
</tbody> 
```

这是它在页面上的样子：

```
PING ds-any-fp3-real.wa1.b.yahoo.com (98.138.253.109) 56(84) bytes of data.
64 bytes from ir1.fp.vip.ne1.yahoo.com (98.138.253.109): icmp_req=1 ttl=53 time=81.9 ms
64 bytes from ir1.fp.vip.ne1.yahoo.com (98.138.253.109): icmp_req=2 ttl=53 time=148 ms
64 bytes from ir1.fp.vip.ne1.yahoo.com (98.138.253.109): icmp_req=4 ttl=53 time=143 ms
--- ds-any-fp3-real.wa1.b.yahoo.com ping statistics ---
5 packets transmitted, 3 received, 40% packet loss, time 4012ms
rtt min/avg/max/mdev = 81.917/124.763/148.373/30.349 ms 
```

我需要使用 Selenium WebDriver 解析此文本并通过 JUnit 测试，如果 ping 成功（无论数据包是否丢失），我还需要提取 IP 地址。

有什么方法可以提取页面源的特定部分（也许，以某种复杂的方式使用 driver.getPageSource() 或通过 xpath 找到这一部分，然后调用 getText()？）然后解析它以获取 IP？我尝试的方式如下：

```
String IP = "";
String textToParse = //Here, we should have a way to get the string that would contain IP.
String tokenSeparators = "()"; // since our IP is enclosed by brackets 
String tokens[] = textToParse.split(tokenSeparators);
for(int i = 0; i<tokens.length; i++){
    if(tokens[i].matches("^[1-9]?[1-9]?[1-9]?\\.[1-9]?[1-9]?[1-9]?\\.[1-9]?[1-9]?[1-9]?\\.[1-9]?[1-9]?[1-9]?$")){ // IP regexp
         IP = tokens[i]
    }

} 
```

让我知道如何提取我需要解析的文本以及我的代码中是否存在错误（例如，我的正则表达式是否正确）

将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T18:00:16.890

```
List<WebElement> allTds=driver.findElements(By.cssSelector("td[style*='font-family:Arial;font-size:11px;']");
String allTdText[]=new String[allTds.size()];
int i=0;
for(WebElement eachTd:allTds)
 {
    allTdText[i++]=eachTd.getText();
 } 
```

通过使用上述逻辑，您将获得 String 数组中的所有 td 标签数据。之后根据您的要求解析每个单独的数组元素。

**示例**：

String a="来自 ir1.fp.vip.ne1.yahoo.com (98.138.253.109) 的 64 字节：icmp_req=1 ttl=53 time=81.9 ms";

仅用于获取 IP 地址

System.out.println(a.substring(a.indexOf("(")+1,a.indexOf(")")));

它将返回**98.138.253.109**

# .net - 我走错路了吗？使用 MVC4 和 WebAPI 保护我的网站和 restfull api？

> ID：12605700
> 
> 赞同：0
> 
> 时间：2012-09-26T15:53:45.037
> 
> 标签：.net, asp.net-mvc, azure

已经有几年没有使用 dot.net 和 MVC 了，一周前我决定研究它来为我提出的一个想法创建一个业务应用程序。自 MVC 4 和 Azure 以来发生了很多事情。我真的很喜欢 Azure，因为它部署起来既快速又容易，而且一旦成功，也很容易扩大规模。

我发现了一些关于使用 Azure ACS 保护 WCF API 的主题，并且可能有点狭隘 - 至少我发泄了路径并在 MVC 4 中创建了我的解决方案。创建一个也公开和 WebAPI 的网站。一周后，我设法在启用 WIF 的情况下将我的网站发布到天蓝色。用户可以使用 ACS 和那里提供的提供程序登录。

今天我在 MVC 4 中四处寻找自上次使用 MVC 以来添加的东西。一些不错的功能出现了。然后我发现它看起来像默认情况下使用 OAuthWebSecurity 的实现/启用功能，人们可以使用他们的社交网络帐户登录和创建用户。

那么，我是否浪费了所有时间来启动 ACS 并与 WIF 一起运行我问自己？

任何人都可以花点时间谈论一下，或链接到一些涵盖以下主题的主题：使用 WIF 和基于声明的身份验证而不是仅在 MVC 4 项目中设置为默认设置的 OauthWebSecurity 有什么好处？

我已经在谷歌上搜索并阅读了很多，并且确实有一些基本信息，但我希望总结最佳实践或简短事实。

（如果有空的话，会悬赏它以获得一些好的答案，但请随时回答）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:28:53.943

如果您已启动并运行 ACS 并且一切正常，那么除非您有特定原因，否则我不会更改它。ACS 实现的功能与 WebSecurity 对 OAuth 和使用 OAuth 提供程序的功能相同……使用 ACS 可能会更好，因为它是一个调试良好的系统，您不必维护它。

# c# - 如何防止选择顺序影响 DataGridView 中哪一行排在第一位？

> ID：12605701
> 
> 赞同：1
> 
> 时间：2012-09-26T15:53:52.573
> 
> 标签：c#, datagrid, datagridview, row

我在表单上有一个 DataGridView，下面是它的内容示例：

```
Cat  | Boy
Dog  | Girl
Crow | Boy
Bird | Boy 
```

我已`MultiSelect`启用，如果我从第四行（鸟）开始选择并拖动到第一行（猫），那么在`SelectedRows`集合中，第一项是猫（因为那里有编辑指示器）。这很好。

但是，如果我从第一行（Cat）开始选择并向下拖动到第四行（Bird），则编辑指示器位于 Bird，因此，集合中的第一行是 Bird。第二个项目是乌鸦，它会相应地向上移动。

有没有办法改变行为，使集合中的第一项始终是选择的第一行（从上到下），然后相应地向下进行，忽略用户选择方向？

我尝试更改`RowHeadersVisible`为 false 并且确实删除了左侧的黑色指示器，但问题仍然存在。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:15:31.560

`var orderedRows = dataGridView.SelectedRows.Cast<DataGridViewRow>().OrderBy(row => row.Index);`

# oauth - google Drive api 是否支持 2 legged oauth？

> ID：12605705
> 
> 赞同：5
> 
> 时间：2012-09-26T15:53:58.470
> 
> 标签：oauth, google-drive-api, google-apps-marketplace, 2-legged

现在，我们有了一个带有 Google Docs Api 和 2 legged oauth 的应用程序。但是，我们想迁移到使用 Oauth 2.0 的 Google Drive Api。

我们可以在 Google Drive Api 中使用 2 legged oauth 吗？有什么例子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T21:51:09.927

您应该使用服务帐户：[https ://developers.google.com/accounts/docs/OAuth2ServiceAccount](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-16T00:34:28.350

我刚开始研究这个，如果我有运气，我会提供更多信息。

但是，如果您使用的是 2 legged oauth，以便您可以在域范围内使用 google 应用程序，那么有一个已发布的指南。我相信这就是另一个答案所说的。

解释域范围授权的博客文章：http: [//googleappsdeveloper.blogspot.com.es/2012/11/domain-wide-delegation-of-authority-and.html](http://googleappsdeveloper.blogspot.com.es/2012/11/domain-wide-delegation-of-authority-and.html)

驱动 API 指南：[https ://developers.google.com/drive/delegation](https://developers.google.com/drive/delegation)

# vb.net - Windows 服务停止而没有错误

> ID：12605708
> 
> 赞同：0
> 
> 时间：2012-09-26T15:54:16.740
> 
> 标签：vb.net, windows-services

我创建了一个简单的 Windows 服务。这是我的第一次尝试，所以也许我做错了什么。无论如何，该服务应该自动启动，但它没有。它启动但随后自动停止，没有报告任何错误。如果我通过计算机管理器窗口手动启动它，它可以正常工作并且永远不会停止......

我也尝试记录异常，但没有结果。

这是 onStart() 代码：

```
Private _conn As SqlConnection
Private _connAttemps As Integer = 0

Protected Overrides Sub OnStart(ByVal args() As String)
    Try

        tryConn() 'Tries to connect and report the connection object on success

        If _conn Is Nothing Then
            If _connAttemps = 3 Then
                Return
            Else
                setTimeout(Nothing, New Action(AddressOf tryConn), 10000, Nothing)
            End If
        End If

        ' Create a timer.
        Dim aTimer As Timer = New Timer()

        ' Hook up the Elapsed event for the timer. 
        AddHandler aTimer.Elapsed, AddressOf OnTimedEvent

        ' Set the Interval to 30 seconds (30000 milliseconds).
        aTimer.Interval = 30000
        aTimer.Enabled = True
        GC.KeepAlive(aTimer)

    Catch ex As Exception
        Dim appLog As EventLog = New EventLog()
        If Not EventLog.SourceExists("WindowServiceProva") Then
            EventLog.CreateEventSource("WindowServiceProva", "WindowServiceProvaLog")
        End If
        appLog.Source = "WindowServiceProva"
        appLog.WriteEntry("Eccezione: " & ex.ToString)
    End Try
End Sub 
```

这就是安装程序：

```
Public Class myInstaller

    Private serviceInstaller As ServiceInstaller
    Private processInstaller As ServiceProcessInstaller

    Public Sub New()
        MyBase.New()

        'Chiamata richiesta da Progettazione componenti.
        InitializeComponent()

        'Aggiungere il codice di inizializzazione dopo la chiamata a InitializeComponent
        processInstaller = New ServiceProcessInstaller()
        serviceInstaller = New ServiceInstaller()

        'Service will run under system account
        processInstaller.Account = ServiceAccount.LocalSystem

        'Service will have Start Type of Manual
        serviceInstaller.StartType = ServiceStartMode.Automatic

        serviceInstaller.ServiceName = "WindowServiceProva"

        'Per evitare che il servizio di interrompa
        serviceInstaller.DelayedAutoStart = True

        Installers.Add(serviceInstaller)
        Installers.Add(processInstaller)
    End Sub

End Class 
```

预先感谢您的帮助！

# eclipse - ivyde 没有被触发来解析来自源代码管理的 ivy.xml 更新

> ID：12605710
> 
> 赞同：1
> 
> 时间：2012-09-26T15:54:20.840
> 
> 标签：eclipse, perforce, ivyde

当我从源代码控制（例如，perforce）刷新我的项目时，我得到一个更新的 ivy.xml 文件，ivyde 不会被触发来执行“解析”。因此，作为一种解决方法，我会同时进行项目刷新和手动 ivyde 解析。

有没有办法让 ivyde 自动解析来自源代码管理的新 ivy.xml？

*   当我更改本地 ivy.xml 时，ivyde 确实会解决问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T13:29:36.367

IvyDE 依赖于 Eclipse 本身查看的文件。因此，无论如何，您都必须在 Eclipse 中刷新文件。

然后，IvyDE 实际上能够在更新 ivy.xml 文件时启动解析。也许在您的配置中它被禁用。见[http://ant.apache.org/ivy/ivyde/history/latest-milestone/preferences.html](http://ant.apache.org/ivy/ivyde/history/latest-milestone/preferences.html)

# mfc - 如何在 mfc 中更改 CImage 对象的背景颜色？

> ID：12605712
> 
> 赞同：0
> 
> 时间：2012-09-26T15:54:23.930
> 
> 标签：mfc, dialog

我有一个包含一些对话框的 Windows 应用程序。对话框是使用 mfc 构建的。我正在使用 CImage::Draw() 方法在每个对话框上绘制一些图像（.png）。我想提一下，我没有在对话框上使用任何图片控件来渲染这些图像，而是在运行时使用一些句柄加载它们。直到一切正常。现在加载图像时，这些图像的背景将变为白色。资源文件中的图像没有白色背景。我的问题是如何在对话框上绘制这些图像时更改它们的背景？我希望图像的背景类似于我正在使用的默认对话框的颜色。还有一个问题是 .png 图像在 windows server 2008 R2 机器的对话框中渲染不好（图像分散）。对此有什么可能的补救措施？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:54:11.807

您的 PNG 图像显然不是 32 位的。您需要一个 Alpha 通道和一个透明背景。在例如 Paint.NET 中打开您的图像。我敢打赌你的背景也是白色的！关于图像质量，您是否在绘图时拉伸图像？

编辑：对于 8 位成像器，我相信需要调用[SetTransparentColor](http://msdn.microsoft.com/en-us/library/w7bz08yk%28v=vs.80%29.aspx)。对于 32 位图像，也许这个函数会做：[TransparentBlt](http://msdn.microsoft.com/en-us/library/6h3tedyw%28v=vs.80%29.aspx)

# debugging - 如何调试 Octopress markdown 源文件？

> ID：12605716
> 
> 赞同：1
> 
> 时间：2012-09-26T15:54:37.517
> 
> 标签：debugging, markdown, jekyll, octopress

我用[Octopress](http://octopress.org)写博客。通常它运行良好，除了一种情况——在输入之后`rake generate`，我得到了令人沮丧的输出，上面写着：

```
psych.rb:203:in `parse': (<unknown>): mapping values are not allowed in this context at line 3 column 6 (Psych::SyntaxError) 
```

我不记得我遇到过多少次这种情况。每次我谷歌上面的关键词，但没有任何帮助。

我能做的就是把所有的源文件（*.mkd）都排除在外`_posts`，然后一一添加，看看哪一个出错了。我不断检查，最后发现一个小*语法错误*让章鱼生气。

生活不应该那么艰难。那么是否可以*调试*octopress 源文件以显示语法中**哪一行**文件不正确？的输出`rake generate`根本没有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-12T15:21:27.810

原因可能是帖子顶部的 JAML 错误（例如标题中的“：”），有关更多信息，请参阅[https://github.com/jekyll/jekyll/issues/549](https://github.com/jekyll/jekyll/issues/549)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-12T04:41:58.593

当我尝试使用 Pandoc 转换 markdown 文件时，我看到了类似的错误（“在此上下文中不允许映射值”）。也许您的错误消息来自 pandoc 不知何故？

* * *

## 回答 #3

> 赞同：-7
> 
> 时间：2012-10-05T19:41:27.167

不要费心调试 Octopress。请迁移到[Pelican——](http://docs.getpelican.com/en/3.0/index.html)一个 Python 驱动的静态站点生成器。它功能齐全、易于使用，并且毫无疑问会生成有用的调试信息。

# ember.js - 我应该如何在同一页面上构造同一个 Ember.Application 子类的多个实例？

> ID：12605718
> 
> 赞同：5
> 
> 时间：2012-09-26T15:54:45.210
> 
> 标签：ember.js

我有一个相当大的 Ember.Application（“MyApp”）。我将其编写为独立的 ember 控制页面，但现在我想实例化托管在现有（非 ember）页面中的应用程序的 N 个实例。

Ember.Application 上的 Ember 文档建议应用程序应该既是类命名空间又是单例实例的根，但在这种情况下，我需要一个类命名空间和多个实例。我不想为每个实例单独加载类，它们实际上相当大，移动是一个主要用例。

目前我有：

```
MyApp = Ember.Application.create({ /* app state */); // namespace & instance
MyApp.SomeSupportingClass1 = ... 
```

我的冲动是：

```
MyApp = Ember.Object.create(); // namespace
MyApp.MyApp = Ember.Application.extend({ /* app state */ }); // instance class
MyApp.myAppInstances = Ember.ArrayController.create(); // instances of MyApp.MyApp
MyApp.SomeSupportingClass1 = ... 
```

这会导致问题吗？有没有更“余烬”的方式来构建它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-10-12T21:58:07.837

目前，我相信您唯一的选择是“[余烬群岛](https://github.com/mitchlloyd/ember-islands)”。

然而，Tilde, inc（Tom 和 Yehuda 工作的地方）的最新成员 Godfrey 一直在 FastBoot 上做一些工作，其中包括“[应用程序实例](https://www.youtube.com/watch?v=b-LZjy5QS7Q)”。一旦 Godfrey 的作品登陆 Ember，您将拥有完成此任务的官方 ember 方式。

更新：还值得一看 [Ember Engines] 作为将多个应用程序组合在一起的一种方式。( [http://ember-engines.com/](http://ember-engines.com/) )

# android - 如何在android地图中使用两个叠加层

> ID：12605722
> 
> 赞同：0
> 
> 时间：2012-09-26T15:55:06.020
> 
> 标签：android, google-maps, overlay

我需要地图中的两个叠加项目。我使用以下代码来获取叠加

```
enter code hereMapOverlay 类扩展了 com.google.android.maps.Overlay
 {
     @覆盖
     公共布尔绘制（画布画布，MapView mapView，
     布尔阴影，长时）
     {
     super.draw（画布，mapView，阴影）；
     油漆油漆 = 新油漆（）；
     //---将 GeoPoint 转换为屏幕像素---
     点screenPts = new Point();
     mapView.getProjection().toPixels(p, screenPts);
    // mapView.getProjection().toPixels(p1, screenPts);
     油漆.setStrokeWidth(1);
     paint.setARGB(255, 255, 00, 00);
     paint.setStyle(Paint.Style.STROKE);
     //---添加标记---
     位图 bmp = BitmapFactory.decodeResource(
     getResources(), R.drawable.marker);
     canvas.drawBitmap（bmp，screenPts.x，screenPts.y，paint）；
     canvas.drawText("我在这里...", screenPts.x, screenPts.y, paint);

 `return true;
 }

MapOverlay mapOverlay = new MapOverlay();
List<Overlay> listOfOverlays = mapView.getOverlays();
listOfOverlays.clear();
listOfOverlays.add(mapOverlay);
mapView.invalidate();` 

下面的代码在创建部分中。从这个代码我只能得到一个覆盖。我怎样才能用它来得到另一个覆盖？我想要两个覆盖，我怎么能从这个代码中得到另一个？

            回答 #1

赞同：1

时间：2012-10-01T08:37:26.553

  您可以通过添加as`MapOverlay`来使用两个/多个叠加层。要了解更多关于在an​​droid地图中添加地图叠加层的信息，请查看[这里的答案](https://stackoverflow.com/questions/2848189/efficient-map-overlays-in-android-google-map)`List<Overlay>``listOfOverlays.add(mapOverlay);`

            回答 #2

赞同：0

时间：2012-09-28T00:14:52.143

您只需要重复该行：

```
listOfOverlays.add(mapOverlay); 
```

每次您想向地图视图添加另一个叠加层时。

```

# c++ - C++11 中的基本线程锁定

> ID：12605725
> 
> 赞同：1
> 
> 时间：2012-09-26T15:55:14.730
> 
> 标签：c++, multithreading, c++11, locking

我如何锁定我的线程，使我的输出不是这样的：你好...你好...hheelhllelolo.l..o......

```
std::size_t const nthreads=5;
std::vector<std::thread> my_threads(nthreads);

for(unsigned i=0;i<nthreads;i++)
{
    my_threads[i] = std::thread ([] () {std::cout << "hello...";}); 
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-26T19:22:20.570

标准说：

> 多个线程对同步 (27.5.3.4) 标准 iostream 对象的格式化和未格式化输入 (27.7.2.1) 和输出 (27.7.3.1) 函数或标准 C 流的并发访问不应导致数据竞争 (1.10)。[*注意：如果用户希望避免交错字符，则仍必须同步多个线程对这些对象和流的并发使用。—结束注释*]
>                                                                                         *— [iostream.objects.overview] 27.4.1 p4*

请注意，不产生数据竞争的要求仅适用于标准 iostream 对象（cout、cin、cerr、clog、wcout、wcin、wcerr 和 wclog）并且仅在它们同步时（默认情况下它们是同步的，并且可以使用 sync_with_stdio 成员函数禁用）。

不幸的是，我注意到了两种现象；实现要么提供比要求更严格的保证（例如，所有流对象的线程同步，无论如何，性能都很差）或更少（例如，标准流对象是 sync_with_stdio 产生数据竞争）。MSVC 似乎倾向于前者，而 libc++ 倾向于[后者](http://llvm.org/bugs/show_bug.cgi?id=12158)。

无论如何，如注释所示，如果要避免交错字符，则必须自己提供互斥。这是一种方法：

```
std::mutex m;

struct lockostream {
    std::lock_guard<std::mutex> l;
    lockostream() : l(m) {}
};

std::ostream &operator<<(std::ostream &os, lockostream const &l) {
    return os;
}

std::cout << lockostream() << "Hello, World!\n"; 
```

这样，使用 std::cout 创建了一个锁守卫并在表达式的持续时间内存在。您可以将 lockostream 对象模板化以适用于任何 basic_*stream，甚至适用于流的地址，这样您就可以为每个对象设置一个单独的互斥锁。

当然，标准流对象是全局变量，因此您可能希望像避免使用所有全局变量一样避免它们。它们对于学习 C++ 和玩具程序很方便，但您可能希望为真正的程序安排更好的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:19:28.260

您必须像使用任何其他资源一样使用正常的锁定技术，否则您会遇到 UB。

```
std::mutex m;
std::lock_guard<std::mutex> lock(m);
std::cout << "hello hello"; 
```

或者你可以使用`printf`哪个是线程安全的（在posix上）：

```
printf("hello hello"); 
```

# ftp - 为本地主机浏览配置 Notepad++ (NppFTP)

> ID：12605728
> 
> 赞同：0
> 
> 时间：2012-09-26T15:55:26.143
> 
> 标签：ftp, xampp, localhost, notepad++

我似乎无法让`NppFTP`插件连接到我的本地主机（通过 XAMPP），以便使用**Notepad++**进行本地开发。

根据`http://localhost/xampp/`文档，默认用户名和密码相应地是“newuser”和“wampp”。

我正在使用这些设置：

*   主机：127.0.0.1
*   港口：21
*   用户名：新用户
*   密码：wamp
*   初始远程目录：`C:/xampp/htdocs/myrootdirectory`

在我尝试连接后，控制台只会说“退出”。

有人知道我在做什么错吗？如果是因为 localhost 不是远程目录，我该如何配置 Notepad++ 来浏览我的本地文件而不依赖 Windows 资源管理器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-10T09:59:40.017

如果您在 Windows 上运行，请确保您以管理员身份运行 xampp 控件 (xampp ui)。然后，您在 filezilla 之前检查 SVC 复选框，然后单击开始。将弹出一个提示并单击“是”将其安装为服务。

之后，单击管理员，然后单击是。设置您的密码，然后您就可以开始了。

在您使用notepadd++ 时，设置与您在上面发布的设置相同。

希望有帮助。

劳尔

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T15:56:45.887

实际上，将 Filezilla 放入您的 localhost 是没有意义的，您应该只使用记事本插件、资源管理器。

# drupal - Drupal 添加字段 varchar 问题

> ID：12605729
> 
> 赞同：0
> 
> 时间：2012-09-26T15:55:29.390
> 
> 标签：drupal, drupal-7

我正在使用以下代码通过添加额外的列来修改数据库表：

```
$componentName = 'is_this_the_first_time_you_have_taken_part_in_or_attended_this_event';
    db_add_field('webform_views_data',
        $componentName,
            array('type' => 'varchar', 'length' => 255, 'not null' => TRUE)
    ); 
```

但是，我不断收到以下错误：

```
> PDOException: SQLSTATE[42000]: Syntax error or access violation: 1059
> Identifier name
> 'is_this_the_first_time_you_have_taken_part_in_or_attended_this_event'
> is too long: ALTER TABLE {webform_views_data} ADD
> `is_this_the_first_time_you_have_taken_part_in_or_attended_this_event`
> VARCHAR(255) NULL DEFAULT NULL; Array ( ) in db_add_field() (line 2812
> of /var/www/mysite/includes/database/database.inc). 
```

关于错误消息中明显的长度细节，我想我们都同意**'is_this_the_first_time_you_have_taken_part_in_or_attended_this_event'**不是 255 个字符长。

不确定是什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:34:34.093

`VARCHAR(255)`或 255 个字符是字段**内容**的最大字符，但错误指出字段**名称**太长。

也就是说，`is_this_the_first_time_you_have_taken_part_in_or_attended_this_event`对于字段名称来说太长了。

有关相关问题，请参阅[此答案，并注意根据](https://stackoverflow.com/a/4464818/727439)[MySQL 文档](http://dev.mysql.com/doc/refman/5.0/en/identifiers.html)，字段名称的字符限制为 64 个字符。

# mysql - 如何在 MySQL 中将 VARCHAR 转换为 BLOB？

> ID：12605730
> 
> 赞同：3
> 
> 时间：2012-09-26T15:55:30.293
> 
> 标签：mysql, sql, database, blob, varchar

我需要将 MySQL 列转换为使用 BLOB 而不是用于存储加密数据的 VARCHAR。

我可以找到各种关于如何从 BLOB 转换为 VARCHAR 的帖子，但找不到从 VARCHAR 到 BLOB 的任何内容。

有人可以告诉我该怎么做吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:48:05.730

我通过使用：

```
alter table users change email email blob 
```

# c - libav - avcodec_video_encode2() + fwrite() = 非功能文件

> ID：12605731
> 
> 赞同：1
> 
> 时间：2012-09-26T15:55:31.073
> 
> 标签：c, decode, encode, libav

我似乎无法从我正在编写的 AVPacket.data 中获得任何有用的信息。它不会生成有效的视频文件，而且它们*非常*小。4Mb 转换为 ~300Kb。他们没有在玩，VLC 将他们的格式报告为“undf”（缺少标题？）。我被困住了，需要一些帮助继续前进。

这是解码编码片段：

```
// initialize the output context
ctx_out = avformat_alloc_context();

// guess container format
ctx_out->oformat = av_guess_format(NULL, out_file_name, NULL);
snprintf(ctx_out->filename, sizeof(ctx_out->filename), "%s", out_file_name);

// .. stripped: creates video stream, encoder and its codec

if ((res = avio_open2(&ctx_out->pb, out_file_name, AVIO_FLAG_WRITE, NULL, NULL)) != 0) {
  callback_with_error(options, "Failed to open output file for writing (%s)", res);
  return;
}

if ((res = avformat_write_header(ctx_out, NULL)) != 0) {
  callback_with_error(options, "Failed to write output format header (%s)", res);
  return;
}

av_init_packet(&packet);
while (av_read_frame(ctx_format, &packet) >= 0) {
  frame_finished = 0;
  total_size    += packet.size;

  if (packet.stream_index == video_stream) {
    len = avcodec_decode_video2(decoder_video, frame, &frame_finished, &packet);

    if (len < 0) {
      callback_with_error(options, "Frame #%d video decoding error (%d)", current_frame, len);
      return;
    }

    if (frame_finished) {
      len = avcodec_encode_video2(encoder_video, &packet, frame, &frame_finished);

      if (len < 0) {
        continue; // dropped?
      }

      if (frame_finished) {
        if ((res = av_interleaved_write_frame(ctx_out, &packet)) != 0) {
          callback_with_error(options, "Output write error (%d).", res);
          return;
        }
      }
    }

    if (frame_finished) {
      current_frame++;
    }
  } else if (packet.stream_index == audio_stream) {
    // audio
  }
}
av_free_packet(&packet);
av_write_trailer(ctx_out);

for(i = 0; i < ctx_out->nb_streams; i++) {
  av_freep(&ctx_out->streams[i]->codec);
  av_freep(&ctx_out->streams[i]);
}

if (!(ctx_out->oformat->flags & AVFMT_NOFILE)) {
  avio_close(ctx_out->pb);
}
av_free(ctx_out); 
```

我希望 SO 上有人对 LibAV 的工作原理有一点了解。我查看了示例并阅读了有关如何使用它的各种“文章”。所以，是的，我现在被困住了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:09:32.943

您当前在这里所做的是将每个视频数据包的**原始**内容写入输出文件，而无需任何类型的容器或框架。虽然这适用于一些特殊格式（例如 MPEG1 视频和 MP3 音频流），但它一般不起作用——您需要打开一个`AVFormatContext`(using )，使用(or `avformat_write_header`) 将每个数据包写入流如果您的流已经正确交错），则使用.`av_interleaved_write_frame``av_write_frame``av_write_trailer`

# fpdf - 生成 PDF 空白页

> ID：12605733
> 
> 赞同：0
> 
> 时间：2012-09-26T15:55:35.940
> 
> 标签：fpdf

我正在使用 fpdf 库，运行代码后没有输出产生。问题是什么，我该如何解决？

注意：它也不会产生错误，因此很难修复错误

# python - 将存储在内存中的文件上传到s3

> ID：12605736
> 
> 赞同：1
> 
> 时间：2012-09-26T15:55:50.887
> 
> 标签：python, amazon-s3, amazon

我想继续问昨天发布的问题。我想将一些视频剪辑上传到 amazon s3。这些视频是作为中间结果生成的。所以我更喜欢将这些小视频片段存储在内存中（大约 400~500 KB），然后将每个片段上传到 s3。上传后，临时文件可以在内存中删除。因此，我想使用 tempfile。但是下面的代码有错误。请看一下，如何正确执行？

```
 @contextmanager
    def s3upload(key):
       with tempfile.SpooledTemporaryFile(max_size=1021*1000) as buffer:
          yield buffer
          buffer.seek(0)
         # key.send_file(buffer)
          k.set_contents_from_file(buffer)
          k.set_acl('public-read')

conn = boto.connect_s3()
b = conn.get_bucket('cc_test_s3')
k = Key(b)
k.key = '1.flv'
mime = mimetypes.guess_type('1.flv')[0]

with s3upload(k) as out:
    out.write('1.flv') 
```

输出：

```
The size of file uploaded is 5 KB, which is much less than the actual size of 1.flv (~400 KB). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:23:46.647

我建议您使用 s3fuse ，它基本上会将您的 s3 存储桶安装在本地驱动器上，然后您可以直接保存文件，就像保存在本地目录中一样。作为参考，您可以查看[s3fuse - google-code](http://code.google.com/p/s3fuse/)

# exec - 如何获取 TCL exec 命令的结果（标准输出）？

> ID：12605741
> 
> 赞同：14
> 
> 时间：2012-09-26T15:55:58.890
> 
> 标签：exec, tcl

假设我有一个这样的 TCL 脚本：

```
exec ls -l 
```

现在这将打印出当前目录的内容。我需要将该输出作为字符串进行解析。我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-26T16:19:05.563

`exec`返回输出，因此只需为其设置一个变量：

```
set result [exec ls -l] 
```

但是，您可能希望将其包装在`catch`：

```
if {[catch {exec ls -l} result] == 0} { 
    # ...
} else { 
    # ... (error)
} 
```

# powershell - 使用 Export-ModuleMember 将脚本导出为函数或别名

> ID：12605745
> 
> 赞同：1
> 
> 时间：2012-09-26T15:56:05.963
> 
> 标签：powershell

我有一个模块，我试图在其中导出函数/别名。我要导出的项目是一个脚本文件 foo.ps1，它没有声明命名函数，但我想将它导出为会话中可用的，以便能够调用 foo。这支持吗？如果是这样，我该如何配置 Export-ModuleMember 调用？

这是文件顶部的一个片段：

```
[CmdletBinding(DefaultParameterSetName='default')]
param(
  [Parameter(Position=0,Mandatory=$false,HelpMessage="You must specify which task to     execute.")]
  [ValidateSet('install','update', 'uninstall', 'outdated', 'init', 'help', '?')]
  .... 
```

没有函数定义。相反，函数名是文件名。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:15:44.333

我能够将脚本内容加载到 ScriptBlock 并从中创建一个函数。

```
[string]$content = Get-Content $here\foo.ps1 -Delimiter ([Environment]::NewLine)
$block = [ScriptBlock]::Create($content)
Invoke-Expression "function foo { $block }"
Export-ModuleMember -function foo 
```

这可行，但远非理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:03:59.610

未经测试，但尝试对模块 psm1 文件中的脚本进行点源处理，并`Export-ModuleMember`用于导出其函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-27T04:31:42.780

尝试这个

```
PS II> # UNTESTED
PS II> $excmd = gcm G:\inventory.ps1
PS II> set-item function:$($excmd.name.replace('.','_')) -val $excmd.scriptblock
PS II> inventory_ps1 
```

# c++ - DirectX 10 中的平均三角形

> ID：12605756
> 
> 赞同：0
> 
> 时间：2012-09-26T15:56:51.430
> 
> 标签：c++, visual-studio-2010, directx

所以我基本上想检查我的项目的一些信息。我有 GTX 460 显卡。我编写了 DX10 程序，屏幕上打印了 20k 个三角形，现在我在 Release 版本中获得了 28 FPS。所有这些三角形都在它们内部调用 DrawIndexed，所以这当然是调用这么多绘图的开销。

但无论如何，我想知道：使用这些功能，我可以在屏幕上绘制多少个三角形，以及在哪个 FPS 上？我认为 20k 三角形甚至不足以在游戏场景中加载一些好的模型。

对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:25:57.597

听起来您正在为每个三角形图元创建一个绘制调用，这非常糟糕，因此可怕的 FPS，您应该旨在为每个绘制调用绘制尽可能多的三角形，这可以通过以下几种方式完成：

*   分析您的代码，nVidia 和 AMD 都可以免费为您找到代码缓慢的原因，让您专注于真正重要的地方，因此请使用它们。
*   索引缓冲区和三角形带以减少带宽
*   按材质类型/状态/纹理对顶点进行分组以改进批处理
*   原始组的实例化：一次调用绘制多个模型/网格
*   尽可能多地删除冗余状态更改（着色器、纹理、缓冲区、参数的设置），这与前面提到的组密切相关

DX SDK 将提供实现这些示例的示例。您可以绘制的三角形的确切数量和一个不错的 FPS（如果您想要垂直同步，则为 30 或 60）根据三角形着色的复杂性而有很大差异，但是，如果绘制最简单，您应该能够推动几百万舒适。

我建议仔细查看开源 DX11（DX10 项目并不多，但 API 几乎相同）引擎的内部结构，例如[heiroglyph 3](http://hieroglyph3.codeplex.com/)，并阅读 SDK 教程。

还有很多关于使用 DX10 提高性能的演示文稿，但在深入研究建议之前先分析您的代码，这里有一些来自硬件供应商本身（nVidia 与 AMD 硬件的颜色编码提示）：

*   [GDC '08](http://developer.download.nvidia.com/presentations/2008/GDC/GDC08-D3DDay-Performance.pdf)
*   [GDC '09](http://developer.amd.com/gpu_assets/The%20A%20to%20Z%20of%20DX10%20Performance.pps)

# android - 键盘隐藏时如何调整背景？

> ID：12605758
> 
> 赞同：0
> 
> 时间：2012-09-26T15:56:52.710
> 
> 标签：android, jquery, html, cordova, jquery-mobile

我正在制作 android phonegap 应用程序。在我的应用程序中，当我隐藏键盘背景屏幕时在文本框上键入后需要时间来调整。因为我在背景中隐藏键盘白色区域显示，并且需要几秒钟来调整背景图像。这不是赋予本机应用程序外观和感觉。谁能帮我删除这个白色区域并自动调整屏幕广告键盘隐藏？请帮帮我..

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-26T05:01:52.950

当键盘隐藏时我遇到了同样的问题，它在它后面显示白色区域并慢慢消失。我通过将活动的 SoftInputMode 属性设置为 ADJUST_PAN 解决了​​这个问题。

您可以通过以下代码在java类中设置它

```
 getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_ADJUST_PAN); 
```

希望这可以帮助。

# matlab - 给数组 Matlab 的信

> ID：12605761
> 
> 赞同：0
> 
> 时间：2012-09-26T15:57:20.763
> 
> 标签：matlab

再会！`a=[letters]`例如，如果我输入并且我想要的输出是，我该如何制作一个字母数组`b= [ l e t t e r s]`？我想在某些功能中使用每个字符。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:02:41.777

String 是一个字母数组，所以

```
b = 'test' 
```

是一样的

```
b = ['t', 'e', 's', 't'] 
```

MatLab 中的字符串是功能齐全的数组。自由使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T17:40:31.103

是的，您可以以正常方式循环遍历字符串：

```
b = 'test'; for t = 1:length(b); fprintf('%dth one is %s\n',t,b(t)); end 
```

# php - PDO - SQLSTATE[42000] 错误

> ID：12605765
> 
> 赞同：0
> 
> 时间：2012-09-26T15:57:35.723
> 
> 标签：php, mysql, pdo, insert-update

我试图减少将大量不同的 $_POST 数据插入数据库所需的 PHP 代码量。我目前正在使用带有命名参数的 PDO，并且每次都手动列出它们。也许有比我在示例中尝试的更清洁/更好的方法，但是，我处于无法重构我已经列出的 100 个捕获变量的位置，如下所示：

```
$digital_fee = (isset ($_POST['digital_fee']) ? $_POST['digital_fee'] : '');    
$banner_1 = (isset ($_POST['banner_1']) ? 1 : 0); 
```

剩下的 PHP - SQL 是这样写的：

```
$statement = $db->prepare("INSERT INTO $table
                            (digital_fee, banner_1)
                            VALUES
                            (:digital_fee, :banner_1)
                            ON DUPLICATE KEY UPDATE
                            digital_fee=:digital_fee, banner_1=:banner_1");

$statement->bindParam(':arn_mkt_stn', $arn_mkt_stn);
$statement->bindParam(':digital_fee', $digital_fee);

$statement->execute(); 
```

所以我正在测试类似下面的东西，我想把它变成一个类/函数，并调用它传入现有的 assoc 数组，例如 myFunction($db, $table, $arr_digital);

```
// example function to handle the PDO named params db inserts

$digital_fee ='500';
$banner_1 = '0';

$arr_digital = array("digital_fee"=>$digital_fee, "banner_1"=>$banner_1);   
$table = 'myTable';

//create sql string with $vars
$sql = "INSERT INTO $table (";  
foreach ($arr_digital as $key => $val){
    $sql.= "$key, ";    
}

$sql.= ") VALUES ( ";
foreach ($arr_digital as $key => $val){
    $sql.= ":$key, ";
}

$sql.= ") ON DUPLICATE KEY UPDATE ";    
foreach ($arr_digital as $key => $val){ 
    $sql.= "$key=:$key, ";  
}   
echo $sql;

$statement = $db->prepare($sql);

$statement->bindParam(':arn_mkt_stn', $arn_mkt_stn);
foreach ($arr_digital as $key => $val){
         $statement->bindParam(":$key, $val");
}

$statement->execute(); 
```

运行它会返回一个我认为与格式相关的错误（希望如此） - 这是消息，感谢收到任何指针，抱歉，这是一篇很长的帖子。

```
Fatal error:
  Uncaught exception 'PDOException' with message 
    'SQLSTATE[42000]: Syntax error or access violation: 1064 
     You have an error in your SQL syntax; check the manual that corresponds 
     to your MySQL server version for the right syntax to use near 
     ') VALUES ( '500', '0', ) ON DUPLICATE KEY UPDATE digital_fee='500', banner_1='0'' at line 1' 
```

富有的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:01:48.360

检查您的 SQL 语句。即使不需要，您也总是添加逗号。尝试这样的事情：

```
$comma = "";
$sql = "INSERT INTO $table (";  
foreach ($arr_digital as $key => $val){
    $sql.= $comma . "$key ";    
    $comma = ","
}

$comma = "";
$sql.= ") VALUES ( ";
foreach ($arr_digital as $key => $val){
    $sql.= $comma . ":$key ";
    $comma = ","
} 
```

这不会在第一次运行时添加任何内容，但随后的迭代将在变量前添加一个逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:13:53.747

```
 $digital_fee ='500';
    $banner_1 = '0';

    $arr_digital = array("digital_fee"=>$digital_fee, "banner_1"=>$banner_1);   
    $table = 'myTable';

    //create sql string with $vars
    foreach ($arr_digital as $key => $val){
        $columns[]= $key;  
        $vals [] = ':'.$key;
        $updates[]= "$key = :$key";

    }
    $column = implode(', ', $columns);
    $values = implode(', ', $vals);
    $update = implode(', ', $updates);

    $sql = "INSERT INTO $table ($column) VALUES ($values) ON DUPLICATE KEY UPDATE $update";  
    echo $sql;

    $statement = $db->prepare($sql);

    $statement->bindParam(':arn_mkt_stn', $arn_mkt_stn);
    foreach ($arr_digital as $key => $val){
            $statement->bindParam(":$key", $val);
    }

    $statement->execute(); 
```

立即尝试..应该没问题

# git - Git-svn 合并和提交分支

> ID：12605767
> 
> 赞同：2
> 
> 时间：2012-09-26T15:57:44.773
> 
> 标签：git, git-svn

我最近一直在使用 git-svn 通过 git 管理一个旧的 svn 存储库。

我最近一直在这样创建的分支中工作：
`git checkout -b local-branch svn-branch`

从那以后，我一直在该分支中工作并使用以下命令返回 svn-branch：
`git svn dcommit`

现在是时候将本地分支合并回主分支了，我尝试执行以下操作：
`git checkout master`
`git merge local-branch`

到目前为止，一切都很好。现在我想将合并提交回颠覆，所以我试试这个：
`git svn dcommit`

然而，现在我的主人正在返回 svn-branch 分支，而不是我预期的主干。有没有我错过的东西或者这种合并只是不建议在像这样的 svn 分支之间合并？

作为旁注，我改为通过 svn 进行合并，但我想尽可能避免使用 svn。处理此问题的首选方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:28:03.303

`git svn dcommit`始终将更改发送到 git-svn-id 签名中指定的 url，该签名是 HEAD 历史中第一父提交链的最新版本。

我想，您的合并是快进的（即可以从本地分支/svn-branch 访问主引用），所以它只是通过“git merge”而不是合并提交创建设置为本地分支。

建议始终使用 --no-ff 选项和“git merge”，因为 Subversion 没有快进合并这样的概念。（您可以`merge.ff=true`在[配置](http://www.kernel.org/pub/software/scm/git/docs/git-config.html) 中`branch.master.mergeoptions`将此选项（偏僻的）

为了避免使用 SVN 和/或 git-svn：如果您可以访问您的存储库服务器，您可以查看为Subversion提供纯 Git（不是 git-svn）接口的[SubGit项目。](http://subgit.com)即使在 SubGit 的情况下，也强烈建议使用 --no-ff 选项，因为无法将快进合并（和快进变基）与分支删除和重新提交从另一个提交区分开来（对于任何 Git<->SVN 翻译都是如此工具）。

但也许任何其他原因（我不知道其他原因）导致最新提交消息中带有分支 URL（而不是主干 URL）的“git-svn-id”。无论如何，请确保 master 指向正确的提交。

# php - 如何在 PHP 中克隆 gd 资源

> ID：12605768
> 
> 赞同：9
> 
> 时间：2012-09-26T15:57:45.117
> 
> 标签：php, image, gd

我正在寻找使用 PHP`imagecreatetruecolor`或其他图像创建功能创建的克隆图像..

正如评论中所说，不，你不能做一个简单的感情，比如：

```
$copy = $original; 
```

这是因为资源是引用的，不能像标量值一样被复制。

例子 ：

```
$a = imagecreatetruecolor(10,10);
$b = $a;

var_dump($a, $b);

// resource(2, gd)

// resource(2, gd) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T16:05:03.600

这个小功能将克隆图像资源，同时保留 Alpha 通道（透明度）。

```
function _clone_img_resource($img) {

  //Get width from image.
  $w = imagesx($img);
  //Get height from image.
  $h = imagesy($img);
  //Get the transparent color from a 256 palette image.
  $trans = imagecolortransparent($img);

  //If this is a true color image...
  if (imageistruecolor($img)) {

    $clone = imagecreatetruecolor($w, $h);
    imagealphablending($clone, false);
    imagesavealpha($clone, true);
  }
  //If this is a 256 color palette image...
  else {

    $clone = imagecreate($w, $h);

    //If the image has transparency...
    if($trans >= 0) {

      $rgb = imagecolorsforindex($img, $trans);

      imagesavealpha($clone, true);
      $trans_index = imagecolorallocatealpha($clone, $rgb['red'], $rgb['green'], $rgb['blue'], $rgb['alpha']);
      imagefill($clone, 0, 0, $trans_index);
    }
  }

  //Create the Clone!!
  imagecopy($clone, $img, 0, 0, 0, 0, $w, $h);

  return $clone;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-26T16:53:01.767

因此，找到的解决方案在评论中，这是它在图像管理类中的实现：

```
public function __clone() {
    $original = $this->_img;
    $copy = imagecreatetruecolor($this->_width, $this->_height);

    imagecopy($copy, $original, 0, 0, 0, 0, $this->_width, $this->_height);

    $this->_img = $copy;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-03-11T20:50:36.487

更简单的代码，一行，处理透明度：

```
function clone_img_resource($img) {
    return imagecrop($img, array('x'=>0,'y'=>0,'width'=>imagesx($img),'height'=>imagesy($img)));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T04:54:30.540

好的，所以我需要以透明度调整大小，我看到这个问题的答案和我的问题的答案相似但不完全相同，所以我将发布我的答案。

我想指出，我修改了[HERE](https://stackoverflow.com/questions/279236/how-do-i-resize-pngs-with-transparency-in-php)的答案以回答我的个人需求和 OP 的问题。（这是关于保持第一张也是唯一一张将被复制/克隆/或调整大小的图像的透明度）

此外：透明度颜色将与该资源保持一致，并将其应用于复制到其上的其他透明图像。我使用的解决方法是在我的示例中使用[imagecopy()](https://www.php.net/manual/en/function.imagecopy.php)复制克隆的文件以清除分配的透明度颜色。

```
$im = imagecreatefromstring(file_get_contents('I/image.png')); //
$imw = imagesx($im); /*w*/                          $imh = imagesy($im); /*h*/

$tmpIm = imagecreatetruecolor($imw, $imh); // This is black by default
imagealphablending($tmpIm, false);                  imagesavealpha($tmpIm, true); // Set these as usual
$wht = imagecolorallocatealpha($tmpIm, 255, 255, 255, 127); // white
imagecolortransparent($tmpIm, $wht); // Setting this seems to be unsettable and will make this color transparent on all images later coppied to it
imagealphablending($tmpIm, false);                  imagesavealpha($tmpIm, true); // Set these as usual
// That is it... As long as you set the transparency of the background before you copy it should work. That means now at least some of the other answers can work now.
imagecopyresampled($tmpIm, $im, 0, 0, 0, 0, $imw, $imh, $imw, $imh); // Copy or resize whatever floats your boat. The above process is what does the trick.

$newIm = imagecreatetruecolor($imw, $imh); // Begin Clone
imagealphablending($newIm, false);                  imagesavealpha($newIm, true); // Set these as usual
imagecopyresampled($newIm, $tmpIm, 0, 0, 0, 0, $imw, $imh, $imw, $imh); // Clearing the tranparent color previously set (Workaround)
imagedestroy($tmpIm);

header('Content-Type: image/png');
imagepng($newIm); // see I told you.. Or he did... Whatever, it works... 
```

所以对于这个功能，它会：

```
function F_img_clone($im,$trgt,$id){
                            $imw = imagesx($im);                            $imh = imagesy($im);    // Height and Width of Original
    if(empty($trgt) === true){
                            $rsiw = $imw;                                   $rsih = $imh;   // if there are no H or W changes
    }else{  // if there are H or W changes
        if( $imw > $imh ) {
                            $pcntg = ( ($trgt??1920) / $imw );
        }else{
                            $pcntg = ( ($trgt??1920) / $imh );
        }
                            $rsiw = round($imw * $pcntg);                   $rsih = round($imh * $pcntg);
    }

                            $ni = imagecreatetruecolor($rsiw, $rsih);// Begin the background
                            imagealphablending($ni, false);             imagesavealpha($ni, true); // To keep the alpha channel
                            $wht = imagecolorallocatealpha($ni, 255, 255, 255, 127); // white
                            imagecolortransparent($ni, $wht); // Setting this seems to be unsettable and will make this color transparent on all images later coppied to it
                            imagealphablending($ni, false);             imagesavealpha($ni, true);
                            imagecopyresampled($ni, $im, 0, 0, 0, 0, $rsiw, $rsih, $imw, $imh);
                            imagealphablending($ni, true);              imagesavealpha($ni, false);
                            imagedestroy($im);
                            $imw = imagesx($ni); /*h*/                  $imh = imagesy($ni); /*w*/
                            ${$id} = imagecreatetruecolor($imw, $imh); // Begin Clone
                            imagealphablending(${$id}, false);              imagesavealpha(${$id}, true); // Set these as usual
                            imagecopyresampled(${$id}, $ni, 0, 0, 0, 0, $imw, $imh, $imw, $imh); // Clearing the tranparent color previously set (Workaround)

                            imagedestroy($ni);
                            return ${$id};
} 
```

所以将其用作：

```
$image = imagecreatefromstring(file_get_contents('I/image.png')); //
$clone = F_img_clone($image,'','clone'); 
```

原始的 $image 将完好无损。

# artificial-intelligence - 学习概率图形模型的好资源

> ID：12605770
> 
> 赞同：2
> 
> 时间：2012-09-26T15:57:54.647
> 
> 标签：artificial-intelligence, probability

我最近开始在 coursera 上学习概率图形模型，开始后 2 周我开始相信我在概率方面不是那么好，因此我什至无法关注第一个主题（贝叶斯网络）。话虽如此，我想努力学习这门课程，所以你能否向我推荐一些 PGM 或概率的其他资源，这有助于理解这门课程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-27T07:41:55.470

您可以尝试阅读 Pearl 1988 年出版的《*智能系统中的概率推理*》一书，该书提供了有关贝叶斯看待事物方式的许多背景知识和见解。关于概率论，除了概率的三个基本定律和条件概率的定义之外，你真的不需要那么多理论，它们都很简单，而且通常在学校里教。

这本书对人工智能在过去 20 年的发展方式非常有影响力。作者获得了今年的图灵奖。

* * *

还有一本科勒和弗里德曼的新书：*概率图形模型*（2009 年）。您应该已经知道这一点，因为该课程可能由 Daphne Koller 再次举办。这本书包含了许多最近的成果，涵盖了更多的领域，更详细。它对零件的要求可能非常高。它可能还与课程共享示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:01:55.453

如果您没有很好地掌握概率论，那么 PGM 就有点高级了。一个更入门的课程是[Statistics 1](https://www.coursera.org/course/stats1)，从那里开始可能会更好。

# mysql - 将 TCP MySQL 连接重定向到代理

> ID：12605773
> 
> 赞同：5
> 
> 时间：2012-09-26T15:58:09.700
> 
> 标签：mysql, delphi, proxy, zeos

我有一个 Delphi 应用程序，它连接到 Internet 上的 MySQL 发布数据库，地址如 mysql01.example.com:3306。

但是，我的客户端计算机在代理后面，如果我通过代理，我就可以连接。我使用 ZeosLib 进行连接，它没有代理身份验证。

是否可以使用某种代理转发程序转发到代理的连接？还有另一种可能解决这个问题吗？

非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:14:42.157

[Synapse 框架](http://synapse.ararat.cz/doku.php/download)有一个[socks 代理](http://synapse.ararat.cz/doc/help/blcksock.TSocksBlockSocket.html)实现。

或者你可以自己制作（很简单，因为 socks 协议非常简单，甚至是第 5 版）。看：

*   [袜子 4 规格](http://ftp.icm.edu.pl/packages/socks/socks4/SOCKS4.protocol)
*   [袜子 5 RFC](https://www.rfc-editor.org/rfc/rfc1928)
*   [SOCKS 5 用户/通行证](https://www.rfc-editor.org/rfc/rfc1929)
*   [袜子 5 GSS-API 身份验证](https://www.rfc-editor.org/rfc/rfc1961)
*   [突触块代码](http://gitorious.org/delphi/synapse/blobs/a613150d042f105ed9f2e1bf2204010cc54dc780/blcksock.pas)

# vb.net - 关闭调试器后进程仍在运行

> ID：12605774
> 
> 赞同：0
> 
> 时间：2012-09-26T15:58:14.973
> 
> 标签：vb.net, visual-studio-2010, process

在调试时关闭表单（通过 X 关闭表单）后，似乎一个进程仍在运行。

当表单关闭时，如何确保所有流程都结束？

这是我正在运行的当前代码，我认为这是导致问题的原因。

```
Using psinfo As New Process
   psinfo.StartInfo.FileName = "C:\Program Files\7-Zip\7z.exe "
   psinfo.StartInfo.Arguments = Arg1 + ZipFileName + PathToPDFs
   psinfo.StartInfo.WindowStyle = ProcessWindowStyle.Hidden
   psinfo.Start()
   psinfo.WaitForExit()
End Using 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-20T02:08:17.227

```
 dim p as process
 for each p in system.diagnostics.process.getprocessbyname("your exe")
  p.kill() 
```

# list - 使用“!!”从列表中访问 Int/Integer 元素时出错

> ID：12605776
> 
> 赞同：1
> 
> 时间：2012-09-26T15:58:25.770
> 
> 标签：list, haskell

**Haskell 级别**：新手

**目标**：找到表示为列表的树的元素的根

**输入（树节点）（数组中的位置表示节点号）**：[0,1,9,4,9,6,6,7,8,9]

**调用的函数**：getRoot 3

**预期产出**：9

**代码**：

```
li = [0,1,9,4,9,6,6,7,8,9]
getRoot::Integer->Integer
getRoot n | li!!n /= n    = getRoot li!!n
getRoot n | otherwise     = li!!n 
```

**错误信息**：

```
错误文件:.\test2.hs:111 - 应用程序中的类型错误
*** 表情：li！！n
*** 期限：n
*** 类型：整数
*** 不匹配：Int

```

**编译器**：WinHugs

尝试了“整数”和“整数”的各种组合来声明函数的类型。似乎数组访问返回一个 Integer 但随后与失败的 Int 进行比较。不知道为什么它不将 Int 转换为 Integers。

或者是其他的东西？

在互联网、教程和 stackoverflow 上搜索。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:04:39.297

索引函数 的类型`(!!)`为：

```
Prelude> :t (!!)
(!!) :: [a] -> Int -> a 
```

索引必须是类型`Int`。

你有一个类型：

```
getRoot::Integer->Integer 
```

你索引的地方，`n`，是一个`Integer`。您必须将其转换为 an`Int`才能用作索引。

这可以通过两种方式完成：

*   转换使用`fromInteger`
*   使用[通用索引](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Data-List.html#v:genericIndex)

此外，您应该升级到 GHC 和[Haskell 平台](http://haskell.org/platform)，因为 Hugs 是 Haskell 的一个未维护的过时版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:05:48.063

`(!!)`有类型`[a] -> Int -> a`。如果将类型签名更改为`getRoot`to `Int -> Int`，代码将编译：

```
li :: [Int]
li = [0,1,9,4,9,6,6,7,8,9]

getRoot::Int->Int
getRoot n | li!!n /= n    = getRoot (li!!n)
getRoot n | otherwise     = li!!n 
```

测试：

```
> getRoot 3
9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:09:43.973

(!!) 的类型是

```
(!!) :: [a] -> Int -> a 
```

换句话说，它接受的第二个参数应该是一个`Int`，而不是一个`Integer`。他们是不同的类型。如果你改变你的类型签名来接受一个`Int`，这个错误就会消失。

此外，为了使其正常工作，您`li`必须是`Int`s 的列表。您可以通过简单地添加类型签名来做到这一点：

```
li :: [Int]
li = [0,1,9,4,9,6,6,7,8,9] 
```

有了这个，一切都应该很好。祝你好运！

# unix - 尝试仅使用 ls 列出 8 个条目

> ID：12605778
> 
> 赞同：0
> 
> 时间：2012-09-26T15:58:33.260
> 
> 标签：unix, ls

我是 Unix 新手，并试图自学导航。

我正在尝试在我的 .bashrc 文件中创建一个别名，它将列出我的主文件夹的前 8 个条目。

```
alias start= "ls -1 ~" 
```

是我到目前为止所知道的，但我如何将它限制为只有 8 个？我在 ls 命令中找不到任何可以执行此操作的参数！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:02:33.523

管它到`head`?

```
alias start="\ls -1 ~ | head -n 8" 
```

**编辑**。经过一些测试，如果您有一个名为的别名（大多数标准安装默认放置一个），您希望在别名声明中`ls`添加反斜杠。反斜杠禁用别名并执行标准 shell 命令。`\``ls``start`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:02:45.723

用于`head`获取前 8 个。

```
alias start='ls -1 ~ | head -8' 
```

# terminology - “包装函数”的反义词是什么？

> ID：12605782
> 
> 赞同：4
> 
> 时间：2012-09-26T15:58:51.447
> 
> 标签：terminology, wrapper

“包装函数”的反义词是什么？是否有一个术语来引用实际完成大部分工作的函数？

我在写评论时遇到了这个问题。有一个函数 doXYZ(), doXYZ2() 暴露给用户，但这些函数实际上只是包装器，真正的工作是在actual_doXYZ() 中为它们完成的，对用户隐藏。我想在actual_doXYZ() 的评论中写下“这是???? doXYZ() 的函数”。

“委托功能”有意义吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:04:10.437

不，我不认为是委托。在 OOP 中，包装器通常用于装饰对象。当您想到披萨时，您可以用其他上衣和奖品来装饰它。然后，您可以运行对象的最外层包装器，将对象传递给其他包装器，并对整个比萨饼的奖品求和。

# html - 如何对 CSS 进行故障排除？

> ID：12605784
> 
> 赞同：1
> 
> 时间：2012-09-26T15:58:53.200
> 
> 标签：html, css

我在 JS Fiddle 上有一个 HTML / CSS 项目，有几个问题[jsfiddle ZyBZT](http://jsfiddle.net/jp2code/ZyBZT/)。

*   没有出现`<DIV class"footer">`在底部。
*   背景图像不显示：`url('http://i.imgur.com/z5vCh.png')`
*   Sprite 图像未显示在`<UL>`列表中。

最初，Sprite 正在工作，我添加的任何内容都没有更改任何 Sprite CSS 代码，如下所示：

```
#nav {
  list-style-type:none; /* removes the bullet from the list */
  margin:20 auto;
  text-shadow:4px 4px 8px #696969; /* creates a drop shadow on text in non-IE browsers */
  white-space:nowrap; /* ensures text stays on one line */
  width:600px; /* Allows links to take up proper height */
}
#nav li {
  display: inline-block;
  text-align: center;
  width: 192px;    
}
#nav a {
  background: url('http://i.imgur.com/Sp7jc.gif') 0 -100px no-repeat;
  display: block;
  height: 50px; /* This allowed the buttons to be full height */
  color: Blue;
}
#nav a:hover {
  background-position: 0 -50px;
  color:Red;
}
#nav .active, a:hover {
  background-position: 0 0;        
  color: Black;
}
#nav .active:hover {
  background-position: 0 0;        
  color: Black;
}
#nav span {
  position:relative;
  text-align: center;
  vertical-align: middle; /* This doesn't seem to work (???) */
}
​ 
```

有时，背景图像有效，但有时无效。

最近，我一直在试图让这个 FOOTER div 工作，现在看来，它的更多部分被搞砸了。

我应该如何判断一段 CSS 何时破坏另一段 CSS？我如何知道什么时候尝试执行 CSS 并且出现错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:07:32.820

你能做的最好的就是

1.  使用[Firebug](http://getfirebug.com/)或您选择的浏览器开发人员工具来查看浏览器正在应用哪些类/样式，以及效果，以及
2.  研究 HTML 标准以确保正确编码它们；请记住，它们通常是违反直觉的。MDN 有一些关于[HTML 布局](https://developer.mozilla.org/en-US/docs/Layout_System_Overview)、[垂直对齐](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)和许多其他 HTML/CSS/Javascript 主题的优秀文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T17:01:40.250

我为此找到的最好的工具是 Firebug，它仍然比 Chrome 的工具好。当您检查一个元素时，它将向您显示应用样式的层次结构以及那些已被覆盖的样式。（带删除线）

这是您了解正在发生的事情的最佳工具。

我认为您遇到了 z-index 问题，并且 text-shadow 导致了问题。删除了`z-index:-1`and the`text-shadow`和背景行为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:15:35.737

很容易地修复了页脚问题：

```
div.footer {
  bottom:0px;
  position:fixed;
  text-align:center;
} 
```

但是，这并不能回答主要问题：**如何排除故障**！

# java - 将 Axis2 WSDL 生成委托给 JAX-WS RI？

> ID：12605790
> 
> 赞同：2
> 
> 时间：2012-09-26T15:59:14.397
> 
> 标签：java, soap, wsdl, jax-ws, axis2

我有一个非常简单的 JAX-WS + JAXB SOAP 服务，由于我的工作性质，我被迫通过 Axis2 进行部署。

如果我使用我的 JAXB 类和我的服务类，并通过烘焙到 JDK 中的 JAX-WS 参考实现来部署它们，例如

```
public static void main(final String... args) {
    Endpoint.publish("http://0.0.0.0:9090/MyService", new MyService());
} 
```

RI（2.2.4，JDK7）生成漂亮的、符合标准的 WSDL，几乎可以被任何工具（soapUI 等）使用。

* * *

如果我采用相同的类并通过 Axis2 中的 services.xml 文件部署它们，例如

```
<service name="MyService" scope="soapsession" targetNamespace="http://com.service.my">
    <Description>My Service Endpoint</Description>
    <messageReceivers>
        <messageReceiver class="org.apache.axis2.jaxws.server.JAXWSMessageReceiver" mep="http://www.w3.org/2004/08/wsdl/in-out"/>
    </messageReceivers>
    <!-- <parameter name="useOriginalwsdl">true</parameter> -->
    <parameter locked="false" name="ServiceClass">com.service.my.MyService</parameter>
</service> 
```

Axis2 的 WSDL 生成接管并生成几乎任何工具都无法使用的**完全垃圾。**

我知道我可以`<parameter name="useOriginalwsdl">true</parameter>`在 services.xml 中取消注释该行并提供静态 WSDL，但这样做会迫使我在将来手动更新 WSDL，而我希望避免这种情况。

**有没有办法通过 Axis2 部署我的服务并生成 WSDL，但绕过 Axis2 糟糕的 WSDL 生成并将其委托给 JAX-WS RI？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T14:46:43.363

事实证明，如果不修改或挂钩到 Axis2 的实现，这是不可能的，这显然会在以后产生维护问题。因此，我想我只能忍受 Axis2 生成的蹩脚的 WSDL。

# git - 将 gitweb 查询字符串转换为 cgit 查询

> ID：12605791
> 
> 赞同：0
> 
> 时间：2012-09-26T15:59:14.353
> 
> 标签：git, language-agnostic, url-rewriting, gitweb, cgit

我正在尝试以编程方式将 gitweb 格式的查询字符串映射到 cgit 查询字符串，以完全过渡到 cgit，而不会破坏旧的基于 gitweb 的 url，这些 url 指向我散布在网络上的存储库。我见过一些基于正则表达式的 URL 重写规则，如下所示：

[http://www.clearchain.com/blog/posts/cgit-upgrade-gitweb-retired](http://www.clearchain.com/blog/posts/cgit-upgrade-gitweb-retired)

但我试图真正理解查询字符串中的变量以确保我做对了，我将使用一个小型 CGI 程序而不是 mod_rewrite 或任何对重新映射的操作。特别是，我不了解 、 和哈希的语义`h`以及`hb`它们`hp`如何映射到 cgit 的`id`不同类型查询的查询变量。

任何熟悉他们的人都可以填写我或将我指向一个好的资源吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:28:59.190

基本上

*   `id``hashb`如果 gitweb url 使用，则来自`hashb`，否则来自`hash`。
*   `id2`来自 hashb `if the gitweb url uses`hashb `, otherwise from`hashp`。
*   其余的非常简单。

这是我现在使用的脚本（如果你的 shell 不糟糕，就不会调用外部命令）：

```
#!/bin/sh

q=$QUERY_STRING
repo=
action=
hash=
hashp=
file=

while test "$q" ; do
x=${q%%;*}
case "$x" in
p=*) repo=${x#p=} ;;
a=*commit*) action=commit ;;
a=*plain*) action=plain ;;
a=*summary*) action= ;;
a=*log*) action=log ;;
a=*) action=${x#a=} ;;
h=*) hash=${x#h=} ;;
hb=*) hashb=${x#hb=} ;;
hp=*) hashp=${x#hp=} ;;
hpb=*) hashpb=${x#hpb=} ;;
f=*) file=${x#f=} ;;
esac
t=${q#*;}
test "$t" = "$q" && break
q=$t
done

test "$hashb" && hash=$hashb
test "$hashpb" && hashp=$hashpb

loc=/cgit

if test "$repo" ; then
        loc=$loc/$repo
        if test "$action" ; then
                loc=$loc/$action
                if test "$file" ; then
                        loc=$loc/$file
                fi
        fi
        if test "$hash" ; then
                loc=$loc/\?id=$hash 
                if test "$hashp" ; then
                        loc=$loc\&id2=$hashp
                fi
        fi
fi

printf 'Status: 301 Moved Permanently\nLocation: %s\n\n' "$loc" 
```

# c# - 如何修复“不是合法的 OleAut 日期”。在 C# 中读取 Excel 文件时？

> ID：12605799
> 
> 赞同：3
> 
> 时间：2012-09-26T15:59:47.050
> 
> 标签：c#, excel, oledbdataadapter

我一直在使用 excel 电子表格，到目前为止，我从来没有遇到过任何问题。但是，当我尝试读取 excel 文件时，这个错误“不是合法的 OleAut 日期。”突然出现了。有谁知道我该如何解决这个问题。这是我用来读取 excel 并将数据放入数据集的代码。它以前运行良好，但是在我对数据源进行了一些更改（不涉及日期）之后，出现了这个错误。

```
var fileName = string.Format("C:\\Drafts\\Excel 97-2003 formats\\All Data 09 26 2012_Edited.xls");
        var connectionString = string.Format("Provider=Microsoft.Jet.OLEDB.4.0; data source={0}; Extended Properties=Excel 8.0;", fileName);

        var adapter = new OleDbDataAdapter("SELECT * FROM [Sheet1$]", connectionString);

        DataSet Originalds = new DataSet();
        adapter.Fill(Originalds, "Employees"); // this is where the error shows up 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-11T15:17:04.633

我想出了一个解决这个问题的方法，我将连接字符串更改为最新的 oleDB 提供程序。

```
var connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Extended Properties='Excel 12.0 Xml;HDR=YES;'", fileName); 
```

我还确保我的 excel 数据最后一行之后的空白区域没有被读取为值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-22T17:53:49.937

我在 oledb 中阅读 excel 时遇到了这个问题。

我发现在 excel 中，开始记录中的许多日期列都是空的。我在 excel 中有 6000 条记录，其中一个 datecolumn 有大约前 4000 个空单元格，所以 excel 无法理解要转换单元格的内容，所以我添加了一个填充日期的虚拟记录并处理我的文件。或者您可以在顶部移动几条具有日期值的记录

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-08-28T08:07:14.397

就我而言，我在表格中手动插入了一个格式错误的日期，它是 01/01/0019 而不是 01/01/2019。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-21T13:03:22.957

寻找不同的日期格式，在我的例子中，一列是 dd/mm/yyyy 格式，另一列是 mm/dd/yyyy。一旦日期格式得到纠正，数据导入工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-05T14:32:20.300

你怎么能解决这个问题？嗨！在第 1 行使用虚拟行劫持您的数据，并将有问题的列强制转换为字符串（仅在这种情况下 - 它是数据类型错误，因此请根据类型应用修复）。

有必要了解数据适配器的作用，它通过默认检查前 8 行数据（如果连接字符串中的 HDR=Yes，则无标题）并决定数据类型（它可以覆盖 - 是的，有一个覆盖 - 在连接字符串中到 16 行 - 几乎从来没有很有帮助）。

数据适配器可以做其他令人讨厌的事情，例如在混合数据类型的列中跳过字符串，例如 string/double（这实际上只是一个字符串列，但如果第一行都是双精度，则对适配器不适用）。在这个例子中，它甚至不会给你一个错误的礼貌。

这通常发生在来自包含“自由格式”列的 ERP 源的数据中。用户定义的列是通常的嫌疑人。在其他数据类型问题中可能很难找到。我曾经花费相当多的时间来解决一个列的问题，该列键入为最大长度为 255 个字符的字符串。在数据深处，有一些单元格超出了该长度并引发了错误。

如果您不想在使用数据适配器时提升到“基因工程”级别，解决此类问题的最快方法是劫持您的数据并强制相关列正确类型（或不正确，如果需要，您可以在自己的代码中更正）。计划 B 是将数据返回给客户/用户并告诉他们进行更正。祝 B 计划好运。它不是 A 计划是有原因的。

更多关于通过连接字符串进行操作以及适配器的类似问题 - 但要小心，结果不会 100% 万无一失。我已经广泛测试了更改 IMEX 和 HDR 设置。如果您想快速完成项目，请劫持数据。 [OleDB 和混合 Excel 数据类型：缺少数据](https://stackoverflow.com/questions/3232281/oledb-mixed-excel-datatypes-missing-data)

这是另一个在上下文中类似的帖子，请注意所有可能的耗时解决方案。我还没有相信有更好的解决方案，它简直违背了程序员每天早上给键盘带来的逻辑。太糟糕了，你有工作要做，有时你必须成为一个黑客。 [从 Excel 工作表导入时的日期时间格式不匹配](https://stackoverflow.com/questions/965017/datetime-format-mismatch-on-importing-from-excel-sheet)

# python - 使用 Python 从 Silverlight 应用程序中抓取数据？

> ID：12605802
> 
> 赞同：1
> 
> 时间：2012-09-26T15:59:59.403
> 
> 标签：python, silverlight, ironpython

我很好奇 Python/IronPython 是否有一种方法可以与远程 Silverlight 应用程序通信。我正在寻找的是一种登录远程 Silverlight 应用程序并解析数据的方式，即 Curl 能够使用 Post 登录远程网站的方式请求并获取 html。我知道 Silverlight 不是一个简单的网页，它可能并不容易，但是关于这个特定问题的信息并不多。我读到 IronPython 支持 Silverlight，但我现在对 .网，想知道我是否遇到了死胡同。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T04:40:22.237

Silverlight 应用程序无法运行服务，因此您无法直接连接到正在运行的 Silverlight 应用程序。

但是，Silverlight 应用程序可以与 Web 服务通信，并且可以使用长轮询将数据推送到它。请参阅 Dan Wahlin 的帖子：[http ://weblogs.asp.net/dwahlin/archive/2008/06/19/pushing-data-to-a-silverlight-client-with-a-wcf-duplex-service-part- ii.aspx](http://weblogs.asp.net/dwahlin/archive/2008/06/19/pushing-data-to-a-silverlight-client-with-a-wcf-duplex-service-part-ii.aspx)

您基本上会编写一个与 Silverlight 聊天客户端等效的东西，除非它接收到聊天，否则它必须执行您发送给它的命令。

鉴于 IronPython 可以在 Silverlight 上运行，您实际上可以发送要在 silverlight 客户端上执行的 python 脚本。

# mysql - 使用指定关键字的 mySQL JOIN

> ID：12605806
> 
> 赞同：0
> 
> 时间：2012-09-26T16:00:09.233
> 
> 标签：mysql, sql, join

加入 2 个表的最佳方法是什么，其中第二个表有一个 id 和一个要加入的关键字？

我的尝试：

```
 SELECT id, name 
     FROM table1 
LEFT JOIN table2 ON (table1.id = table2.id AND table2.id = 'myKeyword') 
    WHERE ... 
```

有没有办法处理 WHERE 子句中关键字的搜索/连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:02:37.813

放入 where 子句将`table2.id = 'myKeyword'`否定`LEFT JOIN`

这是非常合适的，因为你有它。

也许有了更多的细节，我们可以看到你在做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:25:01.247

```
SELECT {column_list} 
FROM table1 t1, table2 t2 
WHERE t1.id = t2.id 
AND {some_column_from_either_table} = 'myKeyword'; 
```

# c# - 使用 OpenXML 访问 Excel 行中的单元格值 - 对象引用未设置为对象的实例

> ID：12605809
> 
> 赞同：1
> 
> 时间：2012-09-26T16:00:40.963
> 
> 标签：c#, excel, openxml, openxml-sdk

我需要从 excel 电子表格中读取值并将值保存到数据库中。我此时似乎遇到的问题是访问行对象中列中的各个值

[http://msdn.microsoft.com/en-us/library/office/documentformat.openxml.spreadsheet.cellvalue.aspx](http://msdn.microsoft.com/en-us/library/office/documentformat.openxml.spreadsheet.cellvalue.aspx)

```
var cellValues = from cell in row.Descendants<Cell>()
                                                     select (cell.DataType != null && cell.DataType.HasValue && cell.DataType == CellValues.SharedString
                                                       && int.Parse(cell.CellValue.InnerText) < sharedString.ChildElements.Count 
                                                        ? sharedString.ChildElements[int.Parse(cell.CellValue.InnerText)].InnerText 
                                                        : cell.CellValue.InnerText); 
```

不幸的是，上面的代码似乎没有完成这项工作，因为它在运行时会引发异常，因此寻找有关如何使用 OpenXML 访问 Excel Row 对象中包含的值的最佳想法。

**+$exception {"对象引用未设置为对象的实例。"} System.Exception {System.NullReferenceException}**

**生成的 StackTrace**

```
 at MOC.Import.Products.<ProcessRows>b__0(Cell cell) in c:\Development\CFrontEnd\MOC.Import\Products.cs:line 37
   at System.Linq.Enumerable.WhereSelectEnumerableIterator`2.MoveNext()
   at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source)
   at MOC.Import.Products.ProcessRows(IEnumerable`1 dataRows, SharedStringTable sharedString) in c:\Development\CFrontEnd\MOC.Import\Products.cs:line 45 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:13:58.110

您引用的对象之一为空。找到导致问题的特定对象的最简单方法是从 LINQ 表达式中取出过滤和格式化代码，然后遍历单元格：

```
var cellValues = from cell in row.Descendants<Cell>()
                    select cell;

foreach (var cell in cellValues)
{
    if(cell.DataType != null 
        && cell.DataType.HasValue 
        && cell.DataType == CellValues.SharedString
        && int.Parse(cell.CellValue.InnerText) < sharedString.ChildElements.Count)
    {
        DoSomething(sharedString.ChildElements[int.Parse(cell.CellValue.InnerText)].InnerText);
    }
    else
    {
        DoSomething(cell.CellValue.InnerText);
    }
} 
```

使用这种结构，很容易在调试器中检测到问题。您还可以进一步展开此代码并添加更多针对空值的防护措施，以使您的代码更加健壮。简而言之，您的问题是您对正在阅读的文档的结构做出了无效的假设。作为一般规则，假设是不好的，尤其是当它们是关于您无法完全控制的输入的假设时。

# azure - 使用 Orchard cms 进行 Azure 缩放

> ID：12605811
> 
> 赞同：0
> 
> 时间：2012-09-26T16:00:46.053
> 
> 标签：azure, orchardcms

我正在阅读这些问题：

[使用 Azure 网站扩展 Orchard](https://stackoverflow.com/questions/12582947/scaling-orchard-with-azure-web-sites)

[果园 CMS 性能](https://stackoverflow.com/questions/5100193/orchard-cms-performance)

[如何在 Windows Azure 中部署 Orchard CMS？](https://stackoverflow.com/questions/6442141/how-to-deploy-orchard-cms-in-windows-azure)

我开始考虑我正在进行的一个电子商务项目，如果可能的话，我想澄清一些事情。

**请原谅我，因为我发现很难以一种我觉得我已经清楚地表达了我的想法的方式来表达这个问题。**

首先，是什么因素以及这些因素何时开始让我开始考虑扩展以处理我的网站的流量。我知道的因素类型包括：

1.  会话处理
2.  缓存
3.  我正在考虑请求中提供的数据量，但不确定请求大小的全部含义

其次，在尝试建立一个可以处理特定级别流量的网站时，所有事情都应该有一定程度的前期规划。Azure 扩展是否需要预先完成，还是让它现在为需要的东西工作，然后在以后有必要的时候扩大规模是一件简单的事情？

让我给出一个真实的生活场景来尝试帮助我害怕的地方：

> *某网站发布了广播，试图出售他们的商品。该网站没有很好地计划。该网站开始接收收听广播节目的人的访问。访问者如此之多，以至于网站无法处理流量，并显示一条错误消息，告诉全世界他们应该“与管理员交谈”或类似的话。你知道这张照片，我很确定，而且我也很确定，任何 Web 开发人员被告知他们设计的网站正在发生这种情况会很尴尬。*

我真的很想从中提炼出一个合适的问题，但是有很多事情我只是不知道。为了尝试使这个问题不那么模糊，我将尝试总结我想要实现的目标：

我希望有一个能够在成功的广告/营销活动之后处理大量流量的网站。我想在预算与功能之间走钢丝，这就是为什么我希望能够尽可能少地开始，并能够根据需求***轻松***升级。

考虑到这一点，在使用 Orchard CMS/Azure 组合来交付我的项目时，我应该采取哪些方法/考虑因素来避免性能/可用性/可靠性方面的严重缺陷？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T13:14:12.240

Azure 网站上的 Orchard 非常适合我们，请参阅[http://nublr.pt](http://nublr.pt)

站点配置需要牢记以下几点：

*   遵循[http://docs.orchardproject.net/Documentation/Optimizing-Performance-of-Orchard-with-Shared-Hosting中的指南](http://docs.orchardproject.net/Documentation/Optimizing-Performance-of-Orchard-with-Shared-Hosting)
*   设置缓存（库中可用的模块 Contrib.Cache），它将使用 IIS 的应用程序缓存。
*   设置预热功能以保持网站活跃，
*   还可以使用 Config/HostComponents.config 确保关闭动态编译

我们目前处于 azure 网站的“共享”模式，我们还没有太多流量，但是使用[https://loadimpact.com](https://loadimpact.com)进行的负载测试并没有让网站关闭一次。在任何时候我们都可以进入“保留”模式（它需要长达 24 小时才能发生）

1.6 版本将为 Orchard 带来很多改进，尝试在其中开始您的开发。

希望这有帮助。

# c# - 从 url C# 保存 zip 文件

> ID：12605813
> 
> 赞同：0
> 
> 时间：2012-09-26T16:00:50.857
> 
> 标签：c#

我正在尝试从不直接链接到文件的 URL 保存 zip 文件（例如[http://website.com/DocMgm/DocMgmServlet?docNum=pce-0011&attachmentType=Archive](http://website.com/DocMgm/DocMgmServlet?docNum=pce-0011&attachmentType=Archive)）。当我在浏览器中使用链接时，它会显示下载文件选项，但我似乎无法让它以编程方式工作。

当我尝试执行任一方法时，创建的 zip 文件会产生以下错误：

> 无法将文件“C:\temp\PCE-0011.zip”作为存档打开

网址是假的。我不知道它与服务器上的文件之间的确切关系，我认为它可以重定向到文件的最新版本（它是通过文档控制系统）。

以下是我尝试过的两种一般方法：

```
 string ZipURL = "http://website.com/DocMgm/DocMgmServlet?docNum=pce-0011&attachmentType=Archive";
        string SaveURL = "c:\\temp\\PCE-0011.zip";
        WebClient webClient = new WebClient();
        webClient.DownloadFile(ZipURL, @SaveURL); 
```

和：

```
 string url = "http://website.com/DocMgm/DocMgmServlet?docNum=pce-0011&attachmentType=Archive";

        WebRequest objRequest = System.Net.HttpWebRequest.Create(url);
        WebResponse objResponse = objRequest.GetResponse();
        byte[] buffer = new byte[32768];
        using (Stream input = objResponse.GetResponseStream())
        {
            using (FileStream output = new FileStream("C:\\temp\\PCE-0011.zip",
            FileMode.CreateNew))
            {
                int bytesRead;

                while ((bytesRead = input.Read(buffer, 0, buffer.Length)) > 0)
                {
                    output.Write(buffer, 0, bytesRead);
                }
            }
        } 
```

# javascript - 基于单选按钮的Javascript显示隐藏

> ID：12605815
> 
> 赞同：0
> 
> 时间：2012-09-26T16:01:01.947
> 
> 标签：javascript, jquery, hide, show, radio

我有一些粗略的代码，可以让我根据两个单选按钮过滤一些结果。我正在努力添加第三个变体，它将作为“全部显示”，即一次显示所有四个 div。任何帮助将非常感激。

```
<p class="text1">Variants
 <label>
   <input type="radio" name="type" value="variant-2" id="type_0" checked="checked" />
   Variant 1</label>
 <label>
   <input type="radio" name="type" value="variant-1" id="type_1" />
   Variant 2</label>
</p>

<script>
$(document).ready(function(){
  $("input[name$='type']").click(function(){
  var value = $(this).val();
  if(value=='variant-2') {
    $(".variant-1").show();
     $(".variant-2").hide();
}
else if(value=='variant-1') {
 $(".variant-2").show();
  $(".variant-1").hide();
 }
});
 $(".variant-1").show();
 $(".variant-2").hide();
});

</script>

<div class="variant-1">Variant 1</div>

<div class="variant-2">Variant 2</div>

<div class="variant-1">Variant 1.1</div>

<div class="variant-2">Variant 2.1</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:07:29.553

这个怎么样？[http://jsfiddle.net/WyxmF/1](http://jsfiddle.net/WyxmF/1)

```
<p class="text1">Variants
 <label>
   <input type="radio" name="type" value="variant-2" id="type_0" checked="checked" />
   Variant 1</label>
 <label>
   <input type="radio" name="type" value="variant-1" id="type_1" />
   Variant 2</label>
 <label>
   <input type="radio" name="type" value="variant-all" id="type_all" />
   All</label>
</p>

<div class="variant variant-1">Variant 1</div>

<div class="variant variant-2">Variant 2</div>

<div class="variant variant-1">Variant 1.1</div>

<div class="variant variant-2">Variant 2.1</div>
​

$("input[name$='type']").click(function() {
    var value = $(this).val();
    if (value == 'variant-2') {
        $(".variant-1").show();
        $(".variant-2").hide();
    }
    else if (value == 'variant-1') {
        $(".variant-2").show();
        $(".variant-1").hide();
    }
    else if (value == 'variant-all') {
        $(".variant").show();
    }
});
$(".variant-1").show();
$(".variant-2").hide();​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:12:36.163

尝试基于属性“类” ***[jsfiddle的解决方案](http://jsfiddle.net/abaksheyev/KTKjm/)***

***HTML***

```
 <p class="text1">Variants
 <label>
   <input class="gr" type="radio" name="type" value="one" id="type_0" checked="checked" />
   Variant 1</label>
 <label>
   <input class="gr" type="radio" name="type" value="two" id="type_1" />   Variant 2</label>
<label>
   <input class="gr" type="radio" name="type" value="all" id="type_all" />  All</label>

</p>

</br>
</br>
</br>

<div class="variant-1 one all">Variant 1</div>

<div class="variant-2 two all">Variant 2</div>

<div class="variant-1 one all">Variant 1.1</div>

<div class="variant-2 two all">Variant 2.1</div> 
```

***JS***

```
$(document).ready(function(){
    $(".gr").click(function(){
        var value = $(this).attr('value');
        $('.all').hide();        
        $('.'+value ).show();
    })
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:07:54.897

试试这个检查[FIDDLE](http://jsfiddle.net/sushanth009/h6Q38/)

```
$(document).ready(function() {
    $("input[name$='type']").click(function() {
        var value = $(this).val();
        if (value == 'variant-2') {
            $(".variant-1").show();
            $(".variant-2").hide();
        }
        else if (value == 'variant-1') {
            $(".variant-2").show();
            $(".variant-1").hide();
        }
        else{
            $(".variant-2").show();
            $(".variant-1").show();
        }
    });
    $(".variant-1").show();
    $(".variant-2").hide();
});​

<p class="text1">Variants
 <label>
   <input type="radio" name="type" value="variant-2" id="type_0" checked="checked" />
   Variant 1</label>
 <label>
   <input type="radio" name="type" value="variant-1" id="type_1" />
   Variant 2</label>
    <label>
   <input type="radio" name="type" value="variant-3" id="type_2" />
   Show All</label>
</p>

<div class="variant-1">Variant 1</div>

<div class="variant-2">Variant 2</div>

<div class="variant-1">Variant 1.1</div>

<div class="variant-2">Variant 2.1</div>​ 
```

**更新代码**

减少重复的更好方法

```
$(document).ready(function() {
    $("input[name$='type']").click(function() {
        var value = $(this).val();
        if(value == 'variant-3'){
            $('[class*=variant]').show();
        }
        else{
             $('[class*=variant]').hide();
             $('.'+ value ).show();
        }
    }).click();
});​ 
```

[更新的小提琴](http://jsfiddle.net/sushanth009/h6Q38/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:11:52.037

试试这个..它简化了你的 if else

```
$(document).ready(function() {
    $("input[name$='type']").click(function() {        
        var value = $(this).val();
        if (value == 'showall') {
            $('div[class^=variant]').show();
        } else {
            var $thisClass = $('div.' + value);
            $thisClass.show();
            $('div[class^=variant]').not($thisClass).hide();
        }
    });
    $("input[value=variant-1]").click();
});​ 
```

[小提琴](http://jsfiddle.net/C4qJr/2/)

# html - 粘性灵活的页脚和页眉 CSS 在 WebKit 中运行良好，但在 Gecko 中不行

> ID：12605816
> 
> 赞同：6
> 
> 时间：2012-09-26T16:01:02.490
> 
> 标签：html, css, firefox, css-tables

我正在尝试构建一个允许灵活高度的页眉和页脚的布局，中间的部分占用剩余空间。中间的任何溢出都应该为这个中间部分提供一个滚动条。

我拥有的适用于 Safari 和 Chrome 的代码是：

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      .l-fit-height {
        display: table;
        height: 100%;
      }

      .l-fit-height > * {
        display: table-row;
        height: 1px;
        background-color: red;
      }

      .l-fit-height-expanded {
        height: auto;
        background-color: blue;
        display: table-row;
      }

      .l-scroll-content {
        height: 100%;
        overflow-y: auto;
      }
    </style>
  </head>
  <body>
    <div class="l-fit-height">
      <section>
        Header
      </section>
      <section class="l-fit-height-expanded">
        <div class="l-scroll-content">
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
        </div>
      </section>
      <section>
        Footer
      </section>
    </div>
  </body>
</html> 
```

我一生都无法弄清楚为什么 Firefox 的行为不同。中间的内容会正确扩大高度，但不会缩小超过内容的高度。

很难知道什么是正确的行为。有任何想法吗？

*编辑*

类似的示例设置在这里：http: [//jsfiddle.net/t3mZF/](http://jsfiddle.net/t3mZF/)

有趣的是，如果`.l-fit-height-row-content`更改为`display: table-cell`WebKit 和 Gecko 会表现出相同的行为或忽略溢出。

如果`display: block`使用，则 WebKit 会提供所需的行为（滚动条和页脚保留在视口底部），但 Firefox 拒绝添加滚动条，而是将页脚推离屏幕底部（视口上的滚动条 - 而不是中间内容）。

我还开了一张[bugzilla 票](https://bugzilla.mozilla.org/show_bug.cgi?id=794644)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-27T13:38:33.453

我发现有几个额外的 div 和一个关键`display: inline-block`是可以在 Firefox 中使用 Torben 提到的绝对定位技巧。这意味着完全灵活的页眉和页脚可以作为纯 CSS 解决方案。

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body {
        margin:  0;
        padding: 0;
        height:  100%;
      }

      .l-fit-height {
        display: table;
        height:  100%;
      }

      .l-fit-height-row {
        display: table-row;
        height:  1px;
      }

      .l-fit-height-row-content {
        /* Firefox requires this */
        display: table-cell;
      }

      .l-fit-height-row-expanded {
        height:  100%;
        display: table-row;
      }

      .l-fit-height-row-expanded > .l-fit-height-row-content {
        height: 100%;
        width:  100%;
      }

      .l-scroll {
        /* Firefox requires this to do the absolute positioning correctly */
        display:    inline-block;
        overflow-y: auto;
        position:   relative;
      }

      .l-scroll-content {
        position: absolute;
        top:      0;
        bottom:   0;
      }
    </style>
  </head>
  <body>
    <div class="l-fit-height">
      <section class="l-fit-height-row">
        <div class="l-fit-height-row-content">
          Header
        </div>
      </section>
      <section class="l-fit-height-row-expanded">
        <div class="l-fit-height-row-content l-scroll">
          <div class="l-scroll-content">
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
            <p>Foo</p>
          </div>
        </div>
      </section>
      <section class="l-fit-height-row">
        <div class="l-fit-height-row-content">
          Footer
        </div>
      </section>
    </div>
  </body>
</html> 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-27T10:35:30.637

我认为您在这里遇到了两个综合问题：

1.  表格尺寸并不像您对普通 div 所期望的那样固定。表格通常随内容一起增长，如果内容太大，则不太关心其高度属性。

    因此，您必须通过绝对定位来将滚动框的内容从内容大小计算中排除。现在剩下要做的就是设置滚动框的位置和大小以填充展开的表格行的完整空间。然而，这引发了另一个问题：

2.  直接的解决方案是`position:relative;`为表格行和`width:100%;height:100%;`滚动框设置，但这不起作用，因为大多数浏览器忽略了表格行的位置属性。您可以在表格行和滚动框之间插入另一个 div `display:table-cell;position:relative;`，但这仅适用于除 Firefox 之外的所有浏览器，因为 Firefox 不允许在表格中进行任何相对定位。

    然而，Firefox 允许对表格本身进行相对定位，因此诀窍是设置`position:relative;`table-div 并根据整个表格的尺寸设置滚动框的大小和位置。

如您所料，如果您想使用纯 CSS 解决方案，这会带来一些限制，但还是有一些限制。除此之外，还有一种用 JavaScript 解决问题的优雅方法，我也将其包含在代码中。

下面的代码包括解决问题的三种方法。两种是纯 CSS 解决方案，一种是使用 JavaScript。我已尝试尽可能少地更改您的代码并评论了所有更改，所以我认为您会发现自己的方式。如果您仍有疑问，请发表评论。

```
<!DOCTYPE html>
<html>
  <head>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        height: 100%;
      }

      .l-fit-height {
        display: table;
        height: 100%;
        /* NOTE Use the table as refernece for absolute positioning. This */
        /*      is the only place where Firefox accepts the position property */
        /*      within a table. */
        position: relative;
      }

      .l-fit-height > * {
        display: table-row;
        height: 1px;
        background-color: red;
      }

      .l-fit-height-expanded {
        /* NOTE Set the important flag to override the generic setting */
        height: auto !important;
        background-color: blue;
        display: table-row;
      }

      .l-scroll-content {
        /* NOTE We will set the height attribute later */
        /* height: 100%; */
        overflow-y: auto;
        /* INFO Prevent the table from growing in height */
        position: absolute;
        /* INFO The content should span the full width */
        width: 100%;
      }

      /* INFO Since Firefox only allows absolute positioning relative to the */
      /*      whole table, setting the correct height is a bit tricky. I've */
      /*      found two pure CSS solutions which work, but both have their */
      /*      glitches. If JavaScript is ok for you, there's another solution */
      /*      which I would recommend. */

      /* INFO Example for percentage height footer and header. This sometimes */
      /*      leaves one or two pixels between the scroll-box and the footer. */
      /* REMOVE THIS LINE TO ACTIVATE
      .l-fit-height > * {
        height: 20%;
      }
      .l-scroll-content {
        height: 60% !important;
      }
      /**/

      /* INFO Example for fixed height footer and header. Unfortunately this */
      /*      makes the header and footer-content unclickable, but I'm quite */
      /*      sure this could be solved by setting a z-index. */
      /* REMOVE THIS LINE TO ACTIVATE
      .l-fit-height > * {
         height: 40px;
      }
      .l-scroll-content {
         -moz-box-sizing: border-box;
         -webkit-box-sizing: border-box;
         box-sizing: border-box;
         height: 100%;
         border-top: 40px solid transparent;
         margin-top: -40px;
         border-bottom: 40px solid transparent;
         margin-bottom: -40px;
      }
      /**/
    </style>
    <script type="text/javascript">
        // INFO Example how to fix the problem with JavaScript. This works for
        //      all kinds of heights (flexible, percentage and fixed) and has no
        //      issues except for the need of JavaScript to see a correctly
        //      layouted page.
        //* REMOVE THE FIRST SLASH TO DEACTIVATE
        function fixScrollContentHeight() {
            var nodes = document.getElementsByClassName('l-scroll-content');
            for (var i = 0; i < nodes.length; i++)
                nodes[i].style.height = nodes[i].parentNode.offsetHeight+'px';
        }
        window.onload = fixScrollContentHeight;
        window.onresize = fixScrollContentHeight;
        //*/
    </script>
  </head>
  <body>
    <div class="l-fit-height">
      <section>
        Header
      </section>
      <section class="l-fit-height-expanded">
        <div class="l-scroll-content">
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
          <p>Foo</p>
        </div>
      </section>
      <section>
        Footer
      </section>
    </div>
  </body>
</html> 
```

PS：我无法用 IE 测试我的代码，但我认为它也应该在那里工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:08:05.493

从这里[如何让firefox显示一个div的自动水平scollbar？](https://stackoverflow.com/questions/676388/how-to-get-firefox-to-show-an-auto-horizontal-scollbar-for-a-div)

Firefox 无法识别溢出-x 和溢出-y。

而是使用`overflow:-moz-scrollbars-horizontal;`或`overflow:-moz-scrollbars-vertical;`

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-26T16:19:31.937

请检查我的更新。

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Untitled Document</title>
<style>

html, body {
height:99.9%;
margin:0;
padding:0;
}

#wrapper {
    margin: auto;
    overflow: hidden;
    position: relative;
    width: 99.9%;
}

#main {
    margin-bottom: 67px;
    margin-top: 77px;
    overflow: auto;
    padding-bottom: 80px;
}

#footer {
    bottom: 0;
    clear: both !important;
    height: 75px !important;
    margin-top: -68px !important;
    position: fixed !important;
}

#header {
    background: none repeat scroll 0 0 #FFFFFF;
    border: 1px solid #000000;
    height: 75px !important;
    margin-top: -77px;
    overflow: hidden;
    position: fixed;
    width: 100%;
}
</style>

</head>

<body>

     <div id="wrapper">
         <div id="main">
            <div id="header">header contents goes here</div>

            <div id="content">
                main contents
            </div>
         </div>
     </div>
     <div id="footer" style="width:99.9%; margin:auto; border:solid 1px #666; ">
      Footer content goes here
     </div>

</body>
</html> 
```

# ios - 在 iPad 上的弹出窗口中推送导航视图控制器时动画 popoverContentsize

> ID：12605818
> 
> 赞同：15
> 
> 时间：2012-09-26T16:01:10.607
> 
> 标签：ios, ipad, uitableview, uipopovercontroller

### 当 UIPopoverController 包含的 UINavigationController 推送一个新控制器时，如何让我的 UIPopoverController 为其大小设置动画？

我在我的 iPad 应用程序`UIPopover`中显示了一个。`UIBarButtonItem`它包含一个`UINavigationViewController`，它有一个设置窗口作为它的根视图控制器。设置窗口是`UITableViewController`（样式设置为分组）的子类，点击它的任何单元格都会在导航控制器上推送不同的“选择器”视图控制器，它们也是`UITableViewController`.

对于每个选择器视图，在 中`viewDidAppear`，我进行了`contentSizeForViewInPopover`适当的设置：

```
self.contentSizeForViewInPopover = CGSizeMake(320, self.items.count * 44); 
```

但它并没有动画变化；当导航动画结束时，弹出框会捕捉到新的高度（宽度永远不会从 320 改变）。向后导航会动画大小变化（通过[此答案](https://stackoverflow.com/a/5032887/412107)中的技术完成），但向前导航永远不会。

我已经尝试获取对它所在和使用的弹出框的引用，`setPopoverContentSize:animated:`但它不起作用。我查看了[其他](https://stackoverflow.com/questions/7105548/setpopovercontentsize-not-working) [问题](https://stackoverflow.com/questions/5527408/problem-in-setting-popovercontentsize)无济于事。

如何让它始终正确地为大小变化设置动画？

**更新：**我已经建立了一个简单的测试项目来试试这个。这是在 Xcode 中设置的 iPad 的标签栏应用程序。我在其中一个视图控制器的导航栏中添加了一个标签栏项目。当按下该按钮时，控制器会显示一个弹出框，其中包含一个导航控制器，该控制器具有一个非常简单的`UITableViewController`子类，称为`TestContentViewController`，作为其根视图控制器。

在`viewDidLoad`那个子类中，我随机生成了一些项目：

```
self.numItems = arc4random() % 10 + 3; 
```

这是我的行数；节数为 1。`cellForRowAtIndexPath`我只是设置单元格的标签文本并返回它。选择一行时，我会生成同一类的另一个实例，然后将其推在堆栈上。

无需`contentSizeForViewInPopover`对任何 VC 上的属性进行任何操作，弹出框只会达到其最大高度并保持在那里，无论我的表视图中有多少行。

如果我在 viewDidAppear 中设置大小，如下所示：

```
-(void)viewDidAppear:(BOOL)animated
{
  self.contentSizeForViewInPopover = CGSizeMake(320, self.numItems * 44);
  [super viewDidAppear:animated];
{ 
```

*   当弹出框第一次出现时，它会非常快速地闪烁到全高，然后捕捉到我设置的高度。
*   当一个新的控制器被推到导航控制器上时，它会在没有动画的情况下捕捉到它的高度。
*   当我向后导航时，如果我弹出的 VC 比我弹出的那个高，它会动画到正确的大小。如果我弹出的内容更小，它什么也不做。

如果我做同样的事情但在`viewWillAppear`：

*   当弹出框第一次出现时，它是全高的
*   当我第一次点击一行并在堆栈中获得一个新控制器时，它的动画高度至少约为 400 像素。当一个新的控制器被压入堆栈时，如果它需要更多的高度，它就会得到它。如果不是，它会保持以前的状态。

如果我在 中做同样的事情`viewDidLoad`，它基本上是一样的，`viewWillAppear`只是它最初以正确的大小出现。

我尝试将导航控制器的委托设置为呈现弹出框的 VC，然后将弹出框的高度 ( `setPopoverContentSize:animated:`)设置`navigationController:didShowViewController:animated:`为 我认为我在那里设置的大小需要考虑到内置于弹出框顶部的导航栏的额外高度。将新控制器推入堆栈时的动画很奇怪。

**再次更新：**请参阅[此处](https://stackoverflow.com/questions/32719625/how-can-i-make-uipopoverpresentationcontroller-resize-on-navigation-pop)以了解与较新的`UIPopoverPresentationController`.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T10:09:04.750

尝试对所有**UITableViewController**执行以下操作，我试过了，它对我有用！

```
- (void)setSize:(BOOL)fake
{
    CGSize view_size;
    int sections_height, rows_height;

    //if you dynamically change the number of visible rows
    //for example overriding numberOfRowsInSection:section
    //this can help you to evaluate the correct popover height
    int sections = [self.tableView numberOfSections];
    int rows = 0;
    for(int i = 0; i < sections; i++){
        rows += [self.tableView numberOfRowsInSection:i];
    }
    sections_height = sections * 30 /*section height*/;
    rows_height = rows * 44 /*row height*/;

    view_size = CGSizeMake(320 /*fixed width*/, sections_height + rows_height);

    if(fake){
        view_size.width -= 1;
        view_size.height -= 1;
    }

    [self setContentSizeForViewInPopover:view_size];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    //...    
    [self setSize:FALSE];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];
    [self setSize:TRUE];
}

- (void)viewDidAppear:(BOOL)animated
{
    [self setSize:FALSE];
    [super viewDidAppear:animated];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-10T08:40:42.990

如果您尝试保留对 popoverController 的引用并使用，我认为您已经很接近了`setPopoverContentSize:animated:`

对我有用的是这种特定顺序的`setPopoverContentSize:animated:`AND组合`contentSizeForViewInPopover`，对于您放入堆栈的每个控制器：

```
-(void)viewDidAppear:(BOOL)animated
{
    [self.popoverController setPopoverContentSize:whateverSize animated:true];
    self.contentSizeForViewInPopover = whateverSize;
    [super viewDidAppear:animated];
} 
```

在这种情况下，self.popoverController 是我在每个压入堆栈的控制器中保留的引用，为此使用单例变量可能会更干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T04:45:08.410

如果动画是您所寻求的，您可以尝试以下代码。老实说，我没有 iPad 开发经验，但我几乎在所有项目中都用它来动画帧和 alpha 变化。参数很简单，依次是动画发生的持续时间、时间延迟、动画选项、指定视图更改的块以及指定后果的另一个块对象。

```
[UIView animateWithDuration:1.0
                      delay:0.0
                    options: UIViewAnimationCurveEaseOut
                 animations:^{
               self.contentSizeForViewInPopover = CGSizeMake(320, self.items.count * 44);
                 }
                 completion:^(BOOL finished){
                //Insert what you need to do after the animation is over
                 }]; 
```

您可以尝试将其放入*-(void)viewDidAppear:(BOOL)animated*

试试看，让我知道它是否有效。

# c# - 搜索框中的无效文本不会命中 Else 语句

> ID：12605821
> 
> 赞同：0
> 
> 时间：2012-09-26T16:01:43.490
> 
> 标签：c#, asp.net-mvc-3, html

Aspx 引擎

当我在文本框中输入无效的用户 ID 并点击搜索时，假设会显示“未找到类”。现在显示“搜索结果”。它似乎没有击中 else 语句。

**html**

```
<div align="center">
    <form id="searchUser" method="post" action="Search">
        <table align="center">
    <tr>
        <td class="label">
            Enter ID:
        </td>
        <td>
            <input type="text" name="UserId" id="UserId" value="<%=(string)(ViewBag.userid)%>" />
        </td>
    </tr>
      <tr style ="display:none;">
        <td class="label">
            Email:
        </td>
        <td>
            <input type="text" name="Email" id="Text1" value="<%=(string)(ViewBag.email)%>" />
        </td>
    </tr>
      <tr style ="display:none;">
        <td class="label">
            lastFourDigits:
        </td>
        <td>
            <input type="text" name="LastFourDigits" id="Text2" value="<%=(string)(ViewBag.lastFourDigits)%>" />
        </td>
    </tr>
    <tr>
        <td>
            <button class="searchButton" id="searchButton">Search</button>
        </td>
    </tr>
  </table>
 </form>
  </div>
  <hr /> 

  <% if (ViewBag.searchClass !=null)
    { %>
    <h2>Search Resuls</h2>
    <br />
    <%List<AAlexUsers.Models.SearchClass> searchClassList= ViewBag.searchClass;%>
    <%if(searchClassList.Count>0)
    <table>
          <%foreach (AAlexUsers.Models.SearchClass searchClass in searchClassList)
     {%>
      <tr>
         <td>
            UserID:
        </td>
        <td class="content">
          <%=searchClass.userId%>
        </td>
    </tr>
    <tr>
        <td>
            Email:
        </td>
        <td class="content">
         <%=searchClass.email%>
        </td>
    </tr>
    <tr>
        <td>
        Last Four Digits:
        </td>
        <td class="content">
          <%=searchClass.lastFourdigits%>
         </td>
    </tr>
    <%} %>
    <%} %>
 </table>

    <%} else %>
 <%{ %>
    <h2>No Class found.</h2>
 <%} %> 
```

**控制器**

```
public ActionResult Search()
{
    string userId = Request["UserId"];
    string email = Request["Email"] ?? string.Empty;
    string lastFourdigits = Request["LastFourDigits"] ?? string.Empty;

    bool view = false;

    if (string.IsNullOrEmpty(userId))
    {
        view = true;
    }
    if (!view)
    {
        List<AAlexUsers.Models.SearchClass> searchClass = 
            AAlexUsers.Models.SearchClass.Users(userId,email,lastFourdigits);
        {
            ViewBag.searchClass = searchClass;
            ViewBag.lastFourdigits = lastFourdigits;
            ViewBag.userId = userId;
            ViewBag.email = email;
        }
    }
    return View();
} 
```

**模型**

```
public class SearchClass
{
    public string userId { get; set; }
    public string email { get; set; }
    public string lastFourdigits { get; set; }

    public static List<AAlexUsers.Models.SearchClass> 
        Users(string userId, string email, string lastFourdigits)   
    {
        SearchClass Alex = new SearchClass();
        Alex.userId = "1234";
        Alex.email = "Alex@gmail.com";
        Alex.lastFourdigits = "1885";

        SearchClass Emilio = new SearchClass();
        Emilio.userId = "0928";
        Emilio.email = "Cubano@gmail.com";
        Emilio.lastFourdigits = "0706";

        SearchClass Ulysses = new SearchClass();
        Ulysses.userId = "0914";
        Ulysses.email = "lysses@gmail.com";
        Ulysses.lastFourdigits = "01zx";

        var list = new List<SearchClass>();
        list.Add(Alex);
        list.Add(Emilio);
        list.Add(Ulysses);

        IEnumerable<SearchClass> result = list;
        if (!string.Empty.Equals(userId))
            result = result.Where(u => u.userId == userId);

        return result.ToList();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:36:44.923

首先，在您的控制器中，您正在创建一个 searchClass：

```
List<AAlexUsers.Models.SearchClass> searchClass = AAlexUsers.Models.SearchClass.Users(userId,email,lastFourdigits); 
```

在您的 Users(...) 方法中，以下行*始终*返回一个不为空的 List。

```
result = result.Where(u => u.userId == userId);

return result.ToList(); 
```

在结果为空的情况下，result.ToList() 将返回一个包含 0 个项目的列表。收到列表后，您将在控制器的此行上分配它：

```
ViewBag.searchClass = searchClass; 
```

一旦进入您的视野，您正在检查：

```
<% if (ViewBag.searchClass !=null) 
```

这将永远是正确的，因为您返回一个空列表。

如果您想根据您发布的代码查看是否返回了正确的结果，则不应仅依赖列表是否为空。相反，您应该这样做：

```
<% if (ViewBag.searchClass !=null && ViewBag.searchClass.Count > 0) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:36:31.367

所以你有这个代码：

公共 ActionResult Search() { string userId = Request["UserId"]; 字符串电子邮件 = 请求 [“电子邮件”] ?? 字符串。空；字符串 lastFourdigits = 请求["LastFourDigits"] ?? 字符串。空；

```
bool view = false;

if (string.IsNullOrEmpty(userId))
{
    view = true;
}
if (!view)
{
    List<AAlexUsers.Models.SearchClass> searchClass = 
        AAlexUsers.Models.SearchClass.Users(userId,email,lastFourdigits);
    {
        ViewBag.searchClass = searchClass;
        ViewBag.lastFourdigits = lastFourdigits;
        ViewBag.userId = userId;
        ViewBag.email = email;
    }
}
return View(); 
```

}

为控制器。你说你输入了一个无效的用户，这意味着输入了一个用户名，所以由于 userId 不为 null 或为空，因此 view 将为“false”。

由于我们采取相反的观点，这给了我们 true，然后执行获取由 Users 方法返回的 SearchClass 对象列表的代码。现在，根据用户的返回值（未给出），您可能会返回一个空列表 (new List()) 而不是 null，这意味着当您将 searchClass 设置为 ViewBag.searchClass 时，您将永远不要将其设置为空。

# objective-c - 用我自己的名字保存 UIImage？

> ID：12605826
> 
> 赞同：-1
> 
> 时间：2012-09-26T16:01:50.733
> 
> 标签：objective-c

我`UIImage`用这种方法保存：

```
//save to file
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *basePath = ([paths count] > 0) ? [paths objectAtIndex:0] : nil;

UIImage *imageToSave = newSize;
NSData *binaryImageData = UIImagePNGRepresentation(imageToSave);

[binaryImageData writeToFile:basePath  atomically:YES]; 
```

我想给它我自己的名字（myImage.png）。在我的代码中我可以在哪里插入一个名字？谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:04:38.823

`basePath`是您的应用程序的 Documents 文件夹的路径。您必须将图像文件的名称添加到该路径。

```
NSString *imagePath = [basePath stringByAppendingPathComponent:@"myImage.png"]; 
```

然后当然用它来保存图像而不是`baseImage`.

# mysql - MySQL SELECT 空白字段

> ID：12605827
> 
> 赞同：0
> 
> 时间：2012-09-26T16:01:54.027
> 
> 标签：mysql

我在从我的数据库中检索一些记录时遇到了一些麻烦。我网站上的许多页面都标有各种值，以帮助搜索/组织。其中一个值是用复选框设置的。如果在后端选中该框，则值为“1”。如果它没有被检查它是空白的。

这是我的`SELECT`声明。它用于 AJAX 搜索网站访问者搜索产品。

```
SELECT *,
MAX( CASE WHEN name = "is_active" THEN value END ) AS is_active,
GROUP_CONCAT(...
...
HAVING is_active LIKE "%'.$active.'%" 
```

为了节省篇幅，我省略了部分`SELECT`陈述。

除了我给出的示例外，该语句完美无缺。如果访问者没有选中前端的活动复选框，它会返回结果，就好像它被选中...或等于“1”。如果选中该框，则没有变化。似乎我无法让它返回`is_active`等于“”的记录。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:06:16.687

听起来好像您数据库中的字段的默认值为`NULL`. 您可以在`HAVING`子句中添加第二个条件来检查这一点：

```
HAVING is_active LIKE "%' . $active . '%" OR is_active IS NULL 
```

编辑

我刚刚看到你`is_active`在选择列表中定义。使用`MAX()`，将忽略空值。您可以使用 nested-`CASE`来解决此问题：

```
SELECT *,
MAX(
    CASE WHEN name = "is_active" THEN
        (CASE WHEN value IS NULL THEN 0 WHEN value = '' THEN 0 ELSE value END)
    END
) AS is_active
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:09:02.577

因此，如果`$active`为空，则您的查询如下所示：

```
is_active LIKE "%%" 
```

这将返回该列不是的所有行`NULL`。是否有理由需要使用通配符进行搜索？也许你只需要：

```
is_active = "'. $active .'" 
```

[这是一个说明我的观点的例子。](http://sqlfiddle.com/#!2/41b78/3)

# ruby-on-rails - 用 ror 传递参数

> ID：12605829
> 
> 赞同：0
> 
> 时间：2012-09-26T16:01:55.583
> 
> 标签：ruby-on-rails, parameters

我试图将参数从一个站点传递到下一个站点并使用它，但我遇到了问题！

商店>索引

```
<h1>All Priorities</h1>

<% @buildings.each do |building| %>
<div class="entry">
    <div class="img">
    <%= image_tag (building.photo.url)%></div>
    <div class=" disc">
    <h3>Name of the Bulding:  <%= building.title %></h3>
     <h4>Status: <%= building.status %></h4>
    Info: <%=sanitize(building.description)%>
    <div class="price_line">
        <span class="price">Price: <%= sprintf("€ %0.02f",building.price)%></span><br/>
        <div class="button">
        <%= button_to "I Want to See it", new_seeit_path(building.id), :method => :get%>

</div>
    </div>
    </div>

    <%end%>
    <div class="pages">
    <%= will_paginate @buildings %></p>
    </div> 
```

在下一个站点中，当我按下我想查看的按钮时，它说：

```
http://localhost:3000/seeits/new.4? 
```

并且不打开页面

如果我删除（building.id）它说：

```
http://localhost:3000/seeits/new? 
```

它带我到下一个站点，但没有参数

意见>wish_receive.text.erb <= 这通过电子邮件向我发送这些信息

```
You got a wish from   <%= @seeit.name %> 
<%= @seeit.telephone_number %>
<%= @seeit.email %>
<%= @seeit.comments %> 
```

路线

```
Projectproperties::Application.routes.draw do
  resources :seeits

  get "about/index"

  get "contact/index"

  get "store/index"

  resources :buildings
 root :to => 'store#index', :as => 'store'
end 
```

seeits_controller

```
def new
    @seeit = Seeit.new

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @seeit }
    end
  end

  # GET /seeits/1/edit
  def edit
    @seeit = Seeit.find(params[:id])
  end

  # POST /seeits
  # POST /seeits.json
  def create
    @seeit = Seeit.new(params[:seeit])

    respond_to do |format|
      if @seeit.save
        Notifier.wish_received(@seeit).deliver
        format.html { redirect_to(store_url, notice: 'Thank you for your wish will contac you very soon.') }
        format.json { render json: @seeit, status: :created, location: @seeit }
      else
        format.html { render action: "new" }
        format.json { render json: @seeit.errors, status: :unprocessable_entity }
      end
    end
  end 
```

耙路线命令

```
 seeits GET    /seeits(.:format)             seeits#index
              POST   /seeits(.:format)             seeits#create
    new_seeit GET    /seeits/new(.:format)         seeits#new
   edit_seeit GET    /seeits/:id/edit(.:format)    seeits#edit
        seeit GET    /seeits/:id(.:format)         seeits#show
              PUT    /seeits/:id(.:format)         seeits#update
              DELETE /seeits/:id(.:format)         seeits#destroy
  about_index GET    /about/index(.:format)        about#index
contact_index GET    /contact/index(.:format)      contact#index
  store_index GET    /store/index(.:format)        store#index
    buildings GET    /buildings(.:format)          buildings#index
              POST   /buildings(.:format)          buildings#create
 new_building GET    /buildings/new(.:format)      buildings#new
edit_building GET    /buildings/:id/edit(.:format) buildings#edit
     building GET    /buildings/:id(.:format)      buildings#show
              PUT    /buildings/:id(.:format)      buildings#update
              DELETE /buildings/:id(.:format)      buildings#destroy
        store        /                             store#index 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:19:48.807

你能告诉我们你的 routes.rb 文件和 rake routes 输出吗？

* * *

开始了。

在您的 routes.rb 文件中，添加以下内容：

```
 resources :seeits do
    member do 
      post 'new'
    end
  end 
```

在您的 seeits_controller.rb 文件中，您的新方法应如下所示：

```
 def new
      # raise params.inspect
      @seeit = Seeit.new
      @building = Building.find(params[:building_id])

      respond_to do |format|
        format.html # new.html.erb
        format.json { render json: @seeit }
      end
    end 
```

最后，在您的视图文件中，将您的 button_to 代码替换为

```
<%= button_to("I want to see it", {:controller => "seeits", :action => "new", :building_id => building.id})%> 
```

请注意，现在，您的按钮将变量 building_id 作为参数传递，允许您访问 @building 对象。控制器中的新操作现在是一个 post 函数，因为我们正在向服务器发送信息。现在您可以在新模板中使用@building。希望这可以帮助。

# php - 脸书移动应用

> ID：12605830
> 
> 赞同：1
> 
> 时间：2012-09-26T16:01:58.470
> 
> 标签：php, javascript, facebook, mobile, web

我对 Facebook 移动应用程序有一个小问题，我必须为网络和移动设备制作一个 Facebook 应用程序，但我也希望用户在进入移动设备上的应用程序之前喜欢该页面。现在是我的问题：移动设备也可以吗？如果是，如何？

# php - cronjob 帮助 - 需要“实时”更新客户网站

> ID：12605833
> 
> 赞同：-1
> 
> 时间：2012-09-26T16:02:16.613
> 
> 标签：php, javascript, cron, crontab, cron-task

我被一个项目困住了，它是一个快速修复项目，我需要一些专家的帮助。我的客户有两个独立的网站。

```
1\. http://abc123.com/using-cron-job-update-this-folder.txt <-- I'm working on this
2\. http://bw.aaaaaa.com/blah.txt                           <-- Client's 2nd site where some txt gets updated almost twice a day, on this folder blah.txt 
```

我需要一个 php 片段来执行一个`cronjob`，即从`site2 - http://bw.aaaaaa.com/blah.txt`实时抓取文本`site1 - http://abc123.com/using-cron-job-update-this-folder.txt`并在站点 1 上更新任何文本后立即更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:16:39.893

虽然这可能会导致服务器资源使用率很高并且不是很推荐，但您可以按照以下方式进行。

1.  将从另一台服务器获取文件的服务器 - 我们将其命名为 CLIENT。
2.  将包含要由 CLIENT 复制的新信息的服务器 - 我们将其命名为 SERVER。

在客户端上，创建一个 PHP 脚本，该脚本使用 CURL 仅下载远程文件的标题，更具体地说是修改日期。

[以下答案提供了一个有用的片段。](https://stackoverflow.com/a/845234/1514026)

存储此日期和脚本下次运行时，检查它是否已更新，然后下载完整的源代码，包括正文并按您喜欢的方式保存（例如，保存到客户端上的本地 txt 文件）。

再次在客户端上，创建一个将每秒或每 5 秒运行一次的 cronjob，或者您希望更新内容的频率。[这对于设置 cronjob 可能会派上用场。](http://www.thegeekstuff.com/2011/07/php-cron-job/)

**或者**，您可以创建一个 PHP 脚本，该脚本将循环并执行某些操作（下载远程文件）并休眠 1 秒，总共执行 60 秒然后停止。将此与每分钟运行的 cronjob 相结合，您将获得相同的效果，而无需每秒对 CLIENT 服务器进行 cron 调用。要查看此方法的实现，请参阅[此问题](https://stackoverflow.com/questions/1726116/run-a-php-script-every-second-using-cli)及其接受的答案。

**更好的推荐**替代方法是使用在客户端运行的 AJAX。让它在用户鼠标移动后立即运行，并通过您可以在服务器端公开的 API 从服务器中提取日期（例如，将返回 JSON 格式的数据，由用户浏览器内的 jQuery 等 JavaScript 库解析）。Facebook 墙就是这样编码的。如果您只是在后台选项卡中打开墙，它不会加载任何新内容。只要您切换回它并用鼠标悬停，就会显示新帖子。

# objective-c - 谁能帮我理解这一点？------ ( )? [ ]:[ ] 在objectiveC中

> ID：12605834
> 
> 赞同：0
> 
> 时间：2012-09-26T16:02:20.697
> 
> 标签：objective-c, ios

> **可能重复：**
> [问号和冒号（？：三元运算符）在objective-c中是什么意思？](https://stackoverflow.com/questions/2595392/what-does-the-question-mark-and-the-colon-ternary-operator-mean-in-objectiv)

```
 NSString *requestString = (self.isFirstTimeDownload) ? [NSString stringWithFormat:[self.commonModel.apiURLs objectForKey:@"updateNewsVerPOST"],@""] : [NSString stringWithFormat:[self.commonModel.apiURLs objectForKey:@"updateNewsVerPOST"], [[NSUserDefaults standardUserDefaults] objectForKey:@"localnewsupdate"]]; 
```

谁能帮我理解这是什么（）？和：在Objective-c中？谢谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:04:25.147

那是一个三元运算符。

例子：

```
 bool foo(int i)
  {
      if ( i > 5 ) 
          return true;
      else
          return false;
  } 
```

相当于

```
 bool foo(int i)
  {
      return ( i > 5 ) ? true : false;
  } 
```

您可以省略第一个操作数：`x ? : b`在这种情况下，当 x 不为零时，表达式的值为 x，否则为 b。例子：

```
int i = 1;
i = 2 ? : 3;   // equivalent to i = 2; (because 2 is non zero)
i = YES ? : 3; // equivalent to i = 1; (because YES is 0x01, which is not zero) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:05:26.297

这是一个[三元运算符](http://en.wikipedia.org/wiki/%3F%3a)：

```
NSString *requestString = ( boolean condition ) ? @"valueIfTrue" : @"valueIfFalse"; 
```

# oracle - 没有更多数据可以从套接字读取

> ID：12605835
> 
> 赞同：5
> 
> 时间：2012-09-26T16:02:20.887
> 
> 标签：oracle, plsql, oracle11g

我的程序如下所示：

```
Declare 
       cur_1        Sys_Refcursor;
       cur_2        Sys_Refcursor;
       v_1          VARCHAR2(30);
       v_2          VARCHAR2(30);
       v_3          VARCHAR2(30);
       v_4          VARCHAR2(30);
Begin
       OPEN cur_1 for Select * from tab1@dblink1;
       Loop
           Fetch cur_1 into v_1, v_2;
           EXIT WHEN cur_1%NOTFOUND;   
           OPEN cur_2 for Select * from tab2@dblink1 where col1 = v_1 and col2 = v2;
           Loop
               Fetch cur2 into v_3, v_4;
               Exit when cur_2%notfound;    
               INSERT INTO local.tab3 values (v_1,v_2, v_3, v_4);
           END Loop;
           close cur_2;
       End Loop;
       close cur_1; 
END; 
```

abobe 程序可以编译，但是当我运行它时，出现以下错误：

> 不再从套接字
> 读取数据 不再从套接字
> 读取数据 不再从套接字读取数据 不再从套接字读取数据
> 不再从套接字读取数据 不再从套接字读取数据 不再
> 从
> 套接字读取
> 数据
> 否从套接字读取更多数据
> ......（更多'没有更多数据要从套接字读取'）
> 
> IO 错误：对等方重置连接：套接字写入错误
> 进程已退出。

有趣的是，当我注释掉整个内部循环时，程序运行时没有错误。所以我知道内部循环有问题（我尝试只注释内部循环内的插入语句并得到相同的错误）。

我的*localdb*和*dblink1*数据库都具有相同的版本：

> Oracle Database 11g 企业版 11.2.0.1.0 - 64 位生产
> 
> PL/SQL 版本 11.2.0.1.0 - 生产
> 
> 核心 11.2.0.1.0 生产
> 
> 适用于 64 位 Windows 的 TNS：版本 11.2.0.1.0 - 生产
> 
> NLSRTL 版本 11.2.0.1.0 - 生产

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T04:26:02.400

## 解决“没有更多数据可从套接字读取”错误的一般建议。

这些错误通常是由另一个严重错误引起的，例如 ORA-600 错误。一个如此严重的问题，以至于服务器进程崩溃，甚至无法向客户端发送正确的错误消息。（这些错误的另一个常见原因是由 SQLNET.EXPIRE_TIME 或其他杀死旧会话的进程引起的网络断开连接。）

查看警报日志以找出原始错误消息。

在此目录中查找文件 alert_[name].log：`select value from v$parameter where name = 'background_dump_dest';`

找到具体的错误消息和详细信息后，请访问 support.oracle.com。使用“ora-600 工具”，然后查找 ORA-600 消息后的第一个数字。

对于特定类型的 ORA-600 错误，通常会有一篇或多篇文章。使用确切的版本和平台来缩小可能的错误列表。（但如果文章中的“受影响的版本”是错误的，请不要感到惊讶。Oracle 声称“在 xy 版本中修复”并不总是正确的。）

这些文章通常会更详细地解释问题是如何发生的、可能的解决方法以及通常涉及补丁或升级的解决方案。

在实践中，您很少想*解决*这些问题。“典型”建议是联系 Oracle 支持以验证您是否确实遇到了同样的问题，获得补丁，获得许可并关闭环境，然后应用补丁。然后可能意识到补丁不起作用。恭喜你，你只是浪费了很多时间。

相反，您通常可以通过对查询或过程进行细微更改来*避免*该问题。Oracle 中有很多特性，几乎总是有另一种方法可以做到这一点。如果代码最终看起来有点奇怪，请添加注释以警告未来的程序员：“这段代码看起来很奇怪，以避免出现错误 X，应该在版本 Y 中修复。”

## 此代码的具体建议

如果这确实是您的整个过程，则应将其替换为以下内容：

```
insert into local.tab3(col1, col2, col3, col4)
select tab1.col1, tab1.col2, tab2.col1, tab2.col2
from tab1@dblink1 tab1
join tab2@dblink1 tab2
    on tab1.col1 = tab2.col1
    and tab1.col2 = tab2.col2; 
```

一般来说，如果可能的话，你应该总是用 SQL 来做事。特别是如果您可以避免打开许多游标。*尤其是*如果您可以避免向远程数据库打开许多游标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T09:07:32.210

正如 jonearles 提到的，您应该在一个 SQL 语句中编写它。

如果你坚持使用 PL/SQL：你自己做的工作太多，声明变量、打开游标、循环、分配变量。考虑这个 PL/SQL：

```
begin
  for c1 in (select * from tab1@dblink1)
  loop
    for c2 in (Select * from tab2@dblink1 where col1 = c1.col1 and col2 = c1.col2)
    loop
      insert into local.tab3 values (c1.col1,c1.col2,c2.col1,c2.col2);
    end loop;
  end loop;
end;
/ 
```

# jsf-2 - PickList : 如何检索要添加或删除的选定项目

> ID：12605840
> 
> 赞同：0
> 
> 时间：2012-09-26T16:02:40.823
> 
> 标签：jsf-2, primefaces, managed-bean

我正在处理选项列表，这是我的代码：

xhtml代码：

```
 <p:pickList id="pickList" value="#{projectAdminisrationMB.selectedUserGroups}" 
          var="group"   
            itemLabel="#{group}" itemValue="#{group.name}" 
            converter="groupConverter"
            > 
             <f:facet name="sourceCaption">Belong To</f:facet>  
             <f:facet name="targetCaption">Exclude From</f:facet> 

              <p:column style="width:25%">  
                    <p:graphicImage value="/images/group/#{group.name}.gif" />  
               </p:column>  

             <p:column style="width:75%;">  
                  #{group.name}  
             </p:column> 
              <p:ajax event="transfer" listener="#
          {projectAdminisrationMB.onTransferGroup}" update="growl" />  
             </p:pickList> 
```

我的转换器：

```
package tn.talan.testFramework.converter;

 @FacesConverter(value = "groupConverter")
  public class GroupConverter implements Converter {

@Override
public Object getAsObject(FacesContext context, UIComponent component,
        String value) {

    return administrationProjectFinal.getGroupByName(value);

     Object ret = null;
        if (component instanceof PickList) {
            Object dualList = ((PickList) component).getValue();
            DualListModel dl = (DualListModel) dualList;
            for (Object o : dl.getSource()) {
                String id = "" + ((Group) o).getIdBdd();
                if (value.equals(id)) {
                    ret = o;
                    break;
                }
            }
            if (ret == null)
                for (Object o : dl.getTarget()) {
                    String id = "" + ((Project) o).getIdBdd();
                    if (value.equals(id)) {
                        ret = o;
                        break;
                    }
                }
        }
        return ret;

}

@Override
public String getAsString(FacesContext context, UIComponent component,
        Object value) {
    System.out.println("converter group getAsString  " + value);

     String str = "";
        if (value instanceof Group) {
            str = "" + ((Project) value).getIdBdd();
        }
        return str;

}
  } 
```

我的目标是从选择列表中检索添加或删除的项目，所以这里是 OnTransferGroup 方法：

```
 public void  onTransferGroup(TransferEvent event) { 

     if(event.isAdd()){

         String resMsg;
            System.out.println("dropped group to be excluded");

             for(Object item : event.getItems()) { 

                    Group selectedBelongToGroup =(Group) item;

    resMsg=administrationProjectFinal.exclureUserGroupFn(selectedBelongToGroup 
     ,selectedUserRow);

                    if (resMsg.equals("The project should have at least 
                               one administrator"))
                    {setDeleteGroupFlag(true);
                     showErrorMsg(resMsg);
                    }

                   else droppedBelongToGroups.add(selectedBelongToGroup); 

                }
         }

     else if(event.isRemove()){
         System.out.println("remove");
         System.out.println("dropped group to be included");
         for(Object item : event.getItems()) {  

        Group selectedExcludeFromGroup = ((Group)item); 
        System.err.println(" n" +selectedExcludeFromGroup.getName());
        System.err.println("d "+selectedExcludeFromGroup.getDescription());

       droppedExcludeFromToGroups.add(selectedExcludeFromGroup); 

        administrationProjectFinal.inclureUserGroup(selectedExcludeFromGroup 
        ,selectedUserRow);

         }

     }                   

         } 
```

问题是 event.getItems() 列表总是空的。当我第一次选择项目时，onTransferGroup(TransferEvent 事件) 并没有被午餐，但在那之后它是 luched。

那么如何检索要添加或删除的选定项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T17:01:53.617

您在“getAsObject”方法的第一条语句上放了一个“return”，这样它就不会到达逻辑的其余部分。
此外，如果您从 getItems 方法中得到一个空返回值，这肯定意味着转换器问题，因此请检查上述内容。

# c++ - P/Invoke，故障查找/声明函数入口点

> ID：12605847
> 
> 赞同：1
> 
> 时间：2012-09-26T16:03:01.007
> 
> 标签：c++, c#-4.0, pinvoke, dllimport

我在对 C++ dll 进行 P/Invoke 调用时遇到了一些困难。我收到“无法找到入口点”错误。

在 C++ 中，我像这样公开函数......

```
#ifdef __cplusplus
extern "C" {
#endif

__declspec(dllexport)
long
WINAPI
MgScSCardUIDlgSelectCardW(__inout LPOPENCARDNAMEW_EX pOcne);

#ifdef __cplusplus
}
#endif 
```

C#中的dllimport语句如下：

```
[DllImport("mgsc.dll", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.Cdecl)]
public static extern Int32 MgScSCardUIDlgSelectCardW([MarshalAs(UnmanagedType.Struct)] [In, Out] ModWinsCard.OPENCARDNAME_EX ocnwex); 
```

我已经尝试过没有调用约定、标准和 winapi 调用约定。与所有相同的结果。我用 DependencyWalker 查看了公开的函数，发现它公开为“_MgScSCardUIDlgSelectCardW@4”。我知道装饰是正常的（但是应该声明'extern“C”'应该处理那个？？），但从未见过任何示例代码，其中 dllimport 的函数看起来是这样的，所以看起来不像我应该这样称呼它。

我在这里看到了推荐 .def 文件的答案，但我宁愿不必处理这个问题，因为当我只需要完成这项工作时，这只是我要学习和搞砸的另一件事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:27:25.723

DLL 一切正常。您将受益于编译器添加到名称的@4 后缀。它描述了传递给函数的参数值的大小，结构指针为 4 个字节。这会在客户端代码中捕获函数声明中的错误，这种不匹配可能**很难**解决，因为它们不平衡堆栈。

这在这里也很有效，你几乎可以肯定地声明了这个函数是错误的。您将 OPENCARDNAME_EX 声明为结构而不是类的可能性为 99%。这要求您通过引用而不是值传递参数。[MarshalAs] 属性也是错误的。使固定：

```
[DllImport("mgsc.dll", CharSet = CharSet.Unicode, CallingConvention = CallingConvention.StdCall)]
public static extern Int32 MgScSCardUIDlgSelectCardW(ref ModWinsCard.OPENCARDNAME_EX ocnwex); 
```

# html - 在另一个 div 中垂直居中 3 个 div

> ID：12605848
> 
> 赞同：3
> 
> 时间：2012-09-26T16:03:06.130
> 
> 标签：html, css

我在一个容器中有三个 div：

```
<div id="container">
  <h2>Heading</h2>

  <div id="left">
    An image goes here.
  </div>

  <div id="center">
    Lorem ipsum whatever.
  </div>

  <div id="right">
    <ul>
      <li>Example</li>
      <li>Example</li>
      <li>Example</li>
    </ul>
  </div>
</div> 
```

我想让三个内部 div 彼此相邻并垂直对齐。对and div使用`float: left`and需要更改 div 的顺序并在最后具有，这对我来说是不可能的。`float: right``left``right``center`

如何使用 CSS 和这个 div 结构实现以下目标：

![在此处输入图像描述](../Images/b7fcd399aafe096d177a511a189a9243.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:08:42.273

在 css 中，用于`display:inline-block`垂直对齐，

这里的演示：http: [//jsfiddle.net/muthkum/BEHdu/1/](http://jsfiddle.net/muthkum/BEHdu/1/)

```
#left, #center, #right{
    display:inline-block; 
    *display:inline; /*IE7 fix*/
    zoom:1;
    padding:5px; 
    border: 1px solid #000; 
    vertical-align:middle;
}
#left{
    width:50px; /*Remove or Increase the width if needed*/
}

#center{
    /*SET WIDTH HERE*/
}

#left{
    /*SET WIDTH HERE*/
} 
```

# ios - 暂停实时 HLS 流

> ID：12605849
> 
> 赞同：4
> 
> 时间：2012-09-26T16:03:07.590
> 
> 标签：ios, http-live-streaming, live-streaming

如果我允许暂停实时 HLS 流，我可以将 *.ts 文件存储更长时间，但我将如何管理 m3u8 文件？

举个例子，

我正在看直播，想暂停 5 分钟。当我再次点击播放时，我会从暂停的地方继续。此时，m3u8 文件将被最新的直播片段覆盖，我如何保留旧的 m3u8 文件以便我可以回去播放旧的/暂停的片段？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:00:20.100

您可以在内存中创建自己的播放列表文件，并且只使用从 Web 服务器检索到的数据附加到它。当流暂停时，您仍然需要刷新播放列表。在恢复时，播放器软件仍会知道它在流中的当前位置。

请注意，不能保证旧段仍然可用。通常在从 CDN 提供 HLS 时，只使用几分钟的生存时间。在该时间段到期后，CDN 只会给出 404。这可能与您的情况相关，也可能不相关；这取决于谁控制网络基础设施。

# testing - 这个 Fitnesse 测试有什么问题？（未找到决策表）

> ID：12605850
> 
> 赞同：0
> 
> 时间：2012-09-26T16:03:07.907
> 
> 标签：testing, automated-tests, fitnesse

```
Cache Load Test

!define testserver {tst1:8080}
!*> Script and Scenario

!|script |
| start | HttpClientFixture |

!|scenario | testCacheLoad 
| setUrl |http://${testserver}/data-service/load/cache |
| check | responseContains | 200 | true |
| check | responseContains | CACHE_LOADER_OK | true |
| show | getResponseBody | | |

*!

Run the scenario test
!| testCacheLoad 
```

我希望测试如下进行：

*   调用 URL
*   检查http响应码是200
*   检查字符串“CACHE_LOADER_OK”的 JSON 响应
*   显示响应（显示）

我从 Fitnese 得到的错误是......

*   setUrl 无法调用 setUrl[1] 的构造函数
*   检查实例decisionTable_1。不存在
*   responseContains 实例decisionTable_1。不存在
*   true 实例decisionTable_1。不存在

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:02:54.207

我没有看到导入表。

你有没有类似的东西：

```
|import|
|com.path.to. HttpClientFixture| 
```

在你的测试中的某个地方？

这是缺少方法类型错误的最常见原因。

# php - 格式错误的 XML 清理 - 数据不在标签中

> ID：12605852
> 
> 赞同：0
> 
> 时间：2012-09-26T16:03:16.190
> 
> 标签：php, xml, malformed

所以我有带有完美嵌套标签的 XML，但是我在标签之外直接得到了奇怪的字符，例如：

```
<root><a_tag>Some perfectly valid string</a_tag> this
<b_tag>more data</b_tag>  
<c_tag>some more data</c_tag> 0</root> 
```

PHP中是否有一个函数可以本机执行此操作，还是我需要一个正则表达式来完成它？

我已经在运行的唯一功能来自这个答案：[https ://stackoverflow.com/a/3466049](https://stackoverflow.com/a/3466049)

编辑：用emacs打开文件时，每行的末尾都有一组字符，例如：^@或^@S

此外 - 这些文档是使用 InDesign 生成的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T17:10:09.533

在浪费了很多时间之后，问题只是 Adob​​e InDesign 在导出的 XML 中生成了很多奇怪的字符——最终的解决方案是改变一个名为的 InDesign 设置：

```
Remap Break, Whitespace, and Special Characters 
```

这立即解决了 XML 问题。

# c++ - Qt - 最终的 exe 文件

> ID：12605853
> 
> 赞同：0
> 
> 时间：2012-09-26T16:03:24.503
> 
> 标签：c++, qt

做完一个软件后，如何发布应用，让主exe文件可以在没有任何框架或东西的情况下运行？我使用了运行按钮所在的左侧显示的发布版本。但是发布后，当我打开主exe文件时，它说“Qt4Dll”丢失。

我认为Qt不需要任何框架来运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T16:07:01.770

您可以静态链接，但当然它会扩大您的应用程序 exe 文件的大小。

[关于 QT 中静态链接的一些信息](https://stackoverflow.com/questions/1011197/qt-static-linking-and-deployment)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:18:32.780

正如已经建议的那样，为了避免依赖 Qt4*.dll 库，您必须构建 Qt 的静态版本。

[您还可以在Qt 的部署说明](http://qt-project.org/doc/qt-4.8/deployment.html)中找到更多信息（以及构建静态版本的平台特定说明）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-02T17:45:11.027

只需尝试将丢失的 .dll 文件从“..\Qt\5.11.3\mingw53_32\bin”（Qt 的安装位置）复制到 .exe 文件所在的位置。

# jquery - 我的按钮不会使用 .live("click",function(){}); 刷新到新页面；jQuery 移动

> ID：12605856
> 
> 赞同：-3
> 
> 时间：2012-09-26T16:03:32.070
> 
> 标签：jquery, jquery-mobile

如果我单击或单击我的按钮锚标记。该页面不会加载新页面。这是我的代码。我正在使用最新版本的 Jquery mobile。这个问题从今天开始对我来说。

代码：

```
 $("a[href=#Page1").live("click",function()
 {
       updateList();
      //Will show a list and I called $("#list").listview("refresh");
 } 
```

HTML：

有链接的页面：

```
 <div data-role="page" id="Page2">
      <div data-role="header">
       <h3> Header </h3>
       </div>
    <div data-role="content">
       <a role="button" href="#Page1"></a>
    </div>
</div> 
```

页面过渡到：

```
<div data-role="page" id="Page1">
    <div data-role="header">
       <h3> Header </h3>
    </div>
    <div data-role="content">
       <ul data-role="listview" id="list" data-filter="true" data-filter-theme="true">
       </ul>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:05:22.193

我不完全确定你想要做什么，但这里有一些工作代码：（你错过了`]`结束标签）

```
 $("a[href=#Page1]").live("click",function()
 {
       updateList();
      //Will show a list and I called listview.refresh();
 } 
```

HTML：

```
<a href="#Page1">Link</a>
[...]
<div data-role="page" id="Page1">
<div data-role="header">
  Header
</div>

</div> 
```

# android - 更改文本上 EditText 的宽度已更改

> ID：12605857
> 
> 赞同：0
> 
> 时间：2012-09-26T16:03:35.473
> 
> 标签：android, android-edittext

我正在尝试更改我的搜索栏的宽度，以便当用户开始输入搜索栏时会覆盖收藏按钮，但当他们不输入收藏按钮时会显示。

这是我现在拥有的

```
searchBar.addTextChangedListener(new TextWatcher(){         
        public void afterTextChanged(Editable arg0){
            menuItems.this.adapter.getFilter().filter(arg0);
            if(searchBar.getText().length() <= 0){

                searchBar.getLayoutParams().width = 280;
                favButton.getLayoutParams().width = 15;
            }
            else{                   
                searchBar.getLayoutParams().width = 295;
                favButton.getLayoutParams().width = 0;
            }
        }
        public void beforeTextChanged(CharSequence s, int start, int count,int after) {
        }
        public void onTextChanged(CharSequence s, int start, int before, int count) {               
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:07:29.637

如果您的目标是隐藏/显示视图（在您的情况下为收藏按钮），我建议使用不同的方法。

尝试这个：

```
if(searchBar.getText().length() <= 0) {
    searchBar.getLayoutParams().width = 280;
    favButton.setVisibility(View.Visible);
} else {                   
    searchBar.getLayoutParams().width = 295;
    favButton.setVisibility(View.GONE);
} 
```

很难说在不了解您的布局的情况下它的工作效果如何，但使用固定尺寸大小通常不是一个很好的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:11:02.783

您需要在 AndroidManifest.xml 中设置 layout_width 元素，如下所示，

```
android:layout_width="fill_parent" 
```

只需在您的 EditText 中设置此元素，如下所示，

```
<EditText android:id="@+id/txtURL" android:layout_width="fill_parent"
...
...>
</EditText> 
```

# linux - 不要成功将 perl 解释器包含到 vim 中

> ID：12605859
> 
> 赞同：0
> 
> 时间：2012-09-26T16:03:39.560
> 
> 标签：linux, perl, vim, compilation

我有 Ubuntu Ubuntu 12.04.1，我尝试用 perl 解释器构建 vim 7.3。
我有 bash 脚本：

```
#!/bin/bash
export CONF_OPT_GUI='--enable-gnome-check'
export CONF_OPT_PERL='--enable-perlinterp'
export CONF_OPT_PYTHON='--enable-pythoninterp'
export CONF_OPT_TCL='--enable-tclinterp --with-tcl=tclsh8.4'
export CONF_OPT_RUBY='--enable-rubyinterp'
export CONF_OPT_MZSCHEME='--disable-mzschemeinterp'
export CONF_OPT_CSCOPE='--enable-cscope'
export CONF_OPT_MULTIBYTE='--enable-multibyte'
export CONF_OPT_FEAT='--with-features=huge'
export CONF_OPT_COMPBY='"--with-compiledby=rodnower@gmail.com"' 
```

我运行：

```
source scriptName 
```

当我在与 perl 相关的输出中运行“make”以下行时：

```
rm -f xxd/xxd auto/osdef.h auto/pathdef.c auto/if_perl.c
        --enable-perlinterp --enable-pythoninterp  \
checking --enable-perlinterp argument... yes
checking for perl... /usr/bin/perl 
```

这些行与 src/aout/config.log 中的 perl 相关：

```
 $ auto/configure --enable-gnome-check --enable-perlinterp --enable-pythoninterp --enable-tclinterp --with-tcl=tclsh8.4 --enable-rubyinterp --enable-cscope --enable-multibyte --with-features=huge --with-compiledby=rodnower@gmail.com --disable-mzschemeinterp --srcdir=. --cache-file=auto/config.cache
configure:4991: checking --enable-perlinterp argument
configure:5006: checking for perl
configure:5024: found /usr/bin/perl
configure:5036: result: /usr/bin/perl
configure:5104: gcc -o conftest -O2 -fno-strength-reduce -Wall  -D_REENTRANT -D_GNU_SOURCE -DDEBIAN  -pipe -fstack-protector -I/usr/local/include -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64  -I/usr/lib/perl/5.14/CORE   -I/usr/local/include  -Wl,-E   -L/usr/local/lib conftest.c  -Wl,-E  -fstack-protector -L/usr/local/lib  -L/usr/lib/perl/5.14/CORE -lperl -ldl -lm -lpthread -lcrypt >&5
/usr/bin/ld: cannot find -lperl
ac_cv_path_vi_cv_path_perl=/usr/bin/perl
vi_cv_path_perl=/usr/bin/perl
vi_cv_perllib=/usr/share/perl/5.14
vi_cv_path_perl='/usr/bin/perl'
vi_cv_perllib='/usr/share/perl/5.14' 
```

在我看到 perl 未包含在编译中之后：

```
~/development/vim/vim$ src/vim --version | grep perl
+netbeans_intg +path_extra -perl +persistent_undo +postscript +printer +profile 
```

这是与 perl 相关的 /usr/lib 的内容：

```
lrwxrwxrwx   1 root root           17 Sep 19 16:28 libperl.so.5.14 -> libperl.so.5.14.2
-rw-r--r--   1 root root      1584804 Aug 11 00:01 libperl.so.5.14.2
drwxr-xr-x   3 root root         4096 Aug 18 00:05 perl
drwxr-xr-x  13 root root         4096 Sep 20 00:24 perl5 
```

这是 /usr/bin 的：

```
-rwxr-xr-x  1 root   root        545 Aug 11 00:00 cpanp-run-perl
-rwxr-xr-x  1 root   root       1065 Nov 15  2011 dh_perl_dbi
-rwxr-xr-x  1 root   root      23599 Aug 11 00:00 find2perl
-rwxr-xr-x  1 root   root      83452 Aug 19  2011 foomatic-perl-data
-rwxr-xr-x  1 root   root    1462760 Aug 11 00:01 perl
-rwxr-xr-x  1 root   root    1462760 Aug 11 00:01 perl5.14.2
-rwxr-xr-x  1 root   root      45183 Aug 11 00:00 perlbug
-rwxr-xr-x  1 root   root        125 Aug 11 00:01 perldoc
-rwxr-xr-x  1 root   root      12318 Aug 11 00:00 perlivp
-rwxr-xr-x  1 root   root      45183 Aug 11 00:00 perlthanks 
```

这些是与 perl 相关的软件包：

```
un  libansicolor-perl    <none>               (no description available)
un  libarchive-tar-perl  <none>               (no description available)
un  libattribute-handler <none>               (no description available)
un  libautodie-perl      <none>               (no description available)
ii  libcairo-perl        1.081-1build2        Perl interface to the Cairo graphics library
un  libcgi-pm-perl       <none>               (no description available)
ii  libclass-isa-perl    0.36-3               report the search path for a class's ISA tree
un  libcompress-raw-bzip <none>               (no description available)
un  libcompress-raw-zlib <none>               (no description available)
un  libcompress-zlib-per <none>               (no description available)
un  libcpan-meta-perl    <none>               (no description available)
un  libcpan-meta-yaml-pe <none>               (no description available)
un  libcpanplus-perl     <none>               (no description available)
ii  libcrypt-passwdmd5-p 1.3-10               interoperable MD5-based crypt() for perl
un  libdbd-anydata-perl  <none>               (no description available)
un  libdbd-csv-perl      <none>               (no description available)
ii  libdbd-mysql-perl    4.020-1build2        Perl5 database interface to the MySQL database
ii  libdbi-perl          1.616-1build2        Perl Database Interface (DBI)
un  libdevel-dprof-perl  <none>               (no description available)
un  libdigest-md5-perl   <none>               (no description available)
un  libdigest-perl       <none>               (no description available)
un  libdigest-sha-perl   <none>               (no description available)
un  libdpkg-perl         <none>               (no description available)
un  libencode-perl       <none>               (no description available)
ii  liberror-perl        0.17-1               Perl module for error/exception handling in an OO-ish wa
un  libextutils-cbuilder <none>               (no description available)
un  libextutils-command- <none>               (no description available)
un  libextutils-install- <none>               (no description available)
un  libextutils-parsexs- <none>               (no description available)
ii  libfile-basedir-perl 0.03-1fakesync1      Perl module to use the freedesktop basedir specification
ii  libfile-copy-recursi 0.38-1               Perl extension for recursively copying files and directo
ii  libfile-desktopentry 0.04-3               Perl module to handle freedesktop .desktop files
ii  libfile-mimeinfo-per 0.15-2               Perl module to determine file types
un  libfile-path-perl    <none>               (no description available)
un  libfile-spec-perl    <none>               (no description available)
un  libfile-temp-perl    <none>               (no description available)
un  libfont-freetype-per <none>               (no description available)
ii  libglib-perl         2:1.241-1            interface to the GLib and GObject libraries
ii  libgtk2-perl         2:1.223-1build3      Perl interface to the 2.x series of the Gimp Toolkit lib
un  libgtk2-perl-doc     <none>               (no description available)
ii  libhtml-template-per 2.10-1               module for using HTML Templates with Perl
un  libhttp-tiny-perl    <none>               (no description available)
un  libi18n-langtags-per <none>               (no description available)
un  libio-compress-base- <none>               (no description available)
un  libio-compress-bzip2 <none>               (no description available)
un  libio-compress-perl  <none>               (no description available)
un  libio-compress-zlib- <none>               (no description available)
un  libio-zlib-perl      <none>               (no description available)
un  libipc-sharedcache-p <none>               (no description available)
un  libjson-pp-perl      <none>               (no description available)
un  liblocale-codes-perl <none>               (no description available)
ii  liblocale-gettext-pe 1.05-7build1         module using libc functions for internationalization in 
un  liblocale-maketext-p <none>               (no description available)
un  liblocale-maketext-s <none>               (no description available)
un  libmarc-charset-perl <none>               (no description available)
un  libmath-bigint-perl  <none>               (no description available)
un  libmath-complex-perl <none>               (no description available)
un  libmime-base64-perl  <none>               (no description available)
un  libmodule-build-perl <none>               (no description available)
un  libmodule-corelist-p <none>               (no description available)
un  libmodule-load-condi <none>               (no description available)
un  libmodule-load-perl  <none>               (no description available)
un  libmodule-metadata-p <none>               (no description available)
un  libmodule-pluggable- <none>               (no description available)
ii  libnet-daemon-perl   0.48-1               Perl module for building portable Perl daemons easily
un  libnet-ldap-perl     <none>               (no description available)
un  libnet-perl          <none>               (no description available)
un  libnet-ping-perl     <none>               (no description available)
ii  libpango-perl        1.222-1build1        Perl module to layout and render international text
un  libparams-check-perl <none>               (no description available)
un  libparent-perl       <none>               (no description available)
un  libparse-cpan-meta-p <none>               (no description available)
un  libperl-ostype-perl  <none>               (no description available)
un  libperl4-corelibs-pe <none>               (no description available)
ii  libperl5.14          5.14.2-6ubuntu2.1    shared Perl library
un  libperl5.8           <none>               (no description available)
ii  libplrpc-perl        0.2020-2             Perl extensions for writing PlRPC servers and clients
un  libpod-escapes-perl  <none>               (no description available)
un  libpod-parser-perl   <none>               (no description available)
un  libpod-plainer-perl  <none>               (no description available)
un  libpod-simple-perl   <none>               (no description available)
un  libqtcore4-perl      <none>               (no description available)
un  libqtgui4-perl       <none>               (no description available)
un  libscalar-list-utils <none>               (no description available)
un  libshell-perl        <none>               (no description available)
un  libsql-statement-per <none>               (no description available)
un  libstorable-perl     <none>               (no description available)
ii  libswitch-perl       2.16-2               switch statement for Perl
un  libsys-syslog-perl   <none>               (no description available)
un  libterm-readkey-perl <none>               (no description available)
un  libterm-readline-gnu <none>               (no description available)
un  libterm-readline-per <none>               (no description available)
un  libtest-harness-perl <none>               (no description available)
un  libtest-simple-perl  <none>               (no description available)
ii  libtext-charwidth-pe 0.04-7build1         get display widths of characters on the terminal
ii  libtext-iconv-perl   1.7-5                converts between character sets in Perl
ii  libtext-wrapi18n-per 0.06-7               internationalized substitute of Text::Wrap
un  libthread-queue-perl <none>               (no description available)
un  libthreads-perl      <none>               (no description available)
un  libthreads-shared-pe <none>               (no description available)
un  libtime-hires-perl   <none>               (no description available)
un  libtime-local-perl   <none>               (no description available)
un  libtime-piece-perl   <none>               (no description available)
un  libunicode-collate-p <none>               (no description available)
ii  libuuid-perl         0.02-4ubuntu1        Perl extension for using UUID interfaces as defined in e
un  libversion-perl      <none>               (no description available)
un  libversion-requireme <none>               (no description available)
un  libxml-sax-perl      <none>               (no description available)
un  libxsloader-perl     <none>               (no description available)
ii  libyaml-tiny-perl    1.50-1               Perl module for reading and writing YAML files
ii  perl                 5.14.2-6ubuntu2.1    Larry Wall's Practical Extraction and Report Language
ii  perl-base            5.14.2-6ubuntu2.1    minimal Perl system
un  perl-dbdabi-94       <none>               (no description available)
un  perl-doc             <none>               (no description available)
ii  perl-modules         5.14.2-6ubuntu2.1    Core Perl modules
un  perl5                <none>               (no description available)
un  perl5-base           <none>               (no description available)
un  perlapi-5.14.2       <none>               (no description available)
un  perlsgml             <none>               (no description available)
un  podlators-perl       <none>               (no description available) 
```

我完全不知道该怎么做......
谢谢你的到来。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T18:45:50.577

我相信你需要安装`libperl-dev`包。

# java - EhCache 2.6.0 的 ClassCastException

> ID：12605860
> 
> 赞同：1
> 
> 时间：2012-09-26T16:03:43.977
> 
> 标签：java, ehcache

我正在使用 EhCache 来存储我的应用程序对象的有限大小缓存，但是在升级其版本后，我在使用*cache.get(...)*时遇到了这个异常：

```
java.lang.ClassCastException: net.sf.ehcache.store.chm.SelectableConcurrentHashMap$DummyPinnedKey cannot be cast to br.com.project.util.VttcElement 
```

有人知道我们是否应该在缓存键中实现任何新接口吗？

这是我改编的代码：

```
import net.sf.ehcache.Cache;
import net.sf.ehcache.CacheManager;

private VttcElementCache() {
    CacheManager cacheManager = CacheManager.create(METAINFFileLoader.getInputStream("ehcache.xml"));
    cache = cacheManager.getCache("br.com.project.util.VttcElement");
}

private void load(int id, long idf) {
    cache.put(new Element(new VttcElement(id, idf), "1"));
}

private String get(VttcElement vttcElement) {
    Element element = cache.get(vttcElement); //The exception is thrown here!
    (String) return elemente.getValue();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T20:05:06.573

我找到了。

出于某种原因，我的键类*VttcElement*没有很好地存储在缓存中，因为异常是在它*生成 (VttcElement) obj的行中的**equals*方法中引发的。

 *我使用与逗号连接的属性将所有键更改为字符串而不是*VttcElement*，它完美地用作键。

非常感谢。*

# iphone - 更新 Xcode 时出现 JSON 错误

> ID：12605863
> 
> 赞同：1
> 
> 时间：2012-09-26T16:03:49.637
> 
> 标签：iphone, objective-c, xcode, json

我在目标 c 中使用 JSON 库，一切都很顺利，但现在在使用 Xcode 进行更新后（现在我使用的是 Xcode 4.4.1）我发现当我使用旧的可爱库解析 JSON、Xcode 时出现问题告诉我这些错误

[单击此处查看错误屏幕。](http://www.flickr.com/photos/87716877@N06/8026930815/in/photostream/lightbox/)

谁能给我一个链接到我应该使用哪个 JSON 版本？这些错误是什么，因为当我遇到这些类型的错误时，我不知道该怎么办？

# sql - 在 Oracle 中插入 1950 年之前的日期

> ID：12605864
> 
> 赞同：4
> 
> 时间：2012-09-26T16:03:57.200
> 
> 标签：sql, oracle

我在获取正确日期时遇到问题。当我将日期从一张表复制到另一张表时

```
insert into table1 select some_date from some_table 
```

它插入错误的日期。该问题仅发生在 1950 年之前的日期。在 table1 中，我有日期 1.1.1949，当我将它复制到 some_table 时，我得到日期 2049-1-1

如何获得正确的日期... 1949-1-1？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:06:56.920

你应该使用：

```
to_char(some_date,'YYYY-MM-DD') 
```

`RRRR`是 2 位数年份，假设同一个世纪。在此处阅读：[Oracle SQL 中的 'YYYY' 和 'RRRR' 有什么区别](https://stackoverflow.com/questions/6812916/what-is-the-difference-between-yyyy-and-rrrr-in-pl-sql)

# objective-c - 如何以 unicode (BE) 格式将数据存储在 CFDataRef 中？

> ID：12605865
> 
> 赞同：1
> 
> 时间：2012-09-26T16:04:02.197
> 
> 标签：objective-c, cfstring, cfdata

我正在将字符串数据写入一个文件，其中数据应该以 ASCII 格式写入，然后基本上以 Unicode 格式重复。ASCII 部分运行良好，但 Unicode 版本出现乱码。**使用CFStringCreateMutableWithExternalCharactersNoCopy**显式创建 Unicode 字符串的尝试失败了。建议和示例代码表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:20:42.153

您可以将 a 转换`CFStringRef`为`CFDataRef`with `CFStringCreateExternalRepresentation`，例如

```
CFStringRef s = CFSTR("abc €");
CFDataRef d = CFStringCreateExternalRepresentation(NULL, s, kCFStringEncodingUTF16BE, 0);
// d now contains the bytes 00 61 00 62 00 63 00 20 20 ac. 
```

或与`NSString/NSData`：

```
NSString *s = @"abc €";
NSData *d = [d dataUsingEncoding:NSUTF16BigEndianStringEncoding]; 
```

# java - Webview 中的进度条

> ID：12605866
> 
> 赞同：3
> 
> 时间：2012-09-26T16:04:06.360
> 
> 标签：java, android, webview, progress-bar, loading

我无法让这个进度条正常工作。任何人都可以帮助我了解来源，我有什么遗漏吗？

```
 web = (WebView) findViewById(R.id.webview01);
        progressBar = (ProgressBar) findViewById(R.id.progressBar);
        web.setWebViewClient(new myWebClient());

        //ADDING THIS RESOLVED THE PROGRESS BAR ACTUALLY LOADING.
        web.setWebChromeClient(new WebChromeClient() {
        public void onProgressChanged(WebView view, int progress) {
        progressBar.setProgress(progress); } 
        });
        //ADDING THIS RESOLVED THE PROGRESS BAR ACTUALLY LOADING.

        WebSettings websettings = web.getSettings();
        websettings.setBuiltInZoomControls(true);
        websettings.setUseWideViewPort(true);
        websettings.setJavaScriptEnabled(true);
        websettings.setAllowFileAccess(true);
        websettings.setDomStorageEnabled(true);
        websettings.setLoadWithOverviewMode(true);
        websettings.setSavePassword(true);
        web.loadUrl("http://www.google.com"); 
```

然后在后面的代码中

```
 //Loading the Actual Webpage
public class myWebClient extends WebViewClient
{
    @Override
    public void onPageStarted(WebView view, String url, Bitmap favicon) {
        // TODO Auto-generated method stub
        super.onPageStarted(view, url, favicon);
        progressBar.setVisibility(View.VISIBLE);

    }

    @Override
    public boolean shouldOverrideUrlLoading(WebView view, String url) {
        // TODO Auto-generated method stub

        view.loadUrl(url);
        progressBar.setVisibility(View.VISIBLE);
        return true;

    }
    //web.setWebChromeClient(new WebChromeClient() {
    public void onProgressChanged(WebView view, int progress) {
         progressBar.setProgress(progress);

    }

    @Override
    public void onPageFinished(WebView view, String url) {
        // TODO Auto-generated method stub
        super.onPageFinished(view, url);

        progressBar.setVisibility(View.GONE);
    }

} 
```

webview 本身工作得很好，我只是想有一个水平加载栏，类似于 dolphin、chrome 等浏览器。

这是布局。

```
 <?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:background="@drawable/bgapp"
 android:fadingEdge="horizontal"
 android:gravity="center"
 android:orientation="vertical" >

 <include
    android:id="@+id/inc_blue"
    android:layout_width="fill_parent"
    android:layout_height="50dp"
    layout="@layout/inc_enphase_bar_with_title_buttons" />

<ProgressBar
    android:id="@+id/progressBar"
    style="?android:attr/progressBarStyleHorizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:minHeight="8dip" />

<WebView
    android:id="@+id/webview01"
    android:layout_width="fill_parent"
    android:layout_height="0dp"
    android:layout_weight="1.15"
    android:fadingEdge="vertical" >

</WebView> 
```

我没有收到任何错误或问题，所以没有 logcat，它只是实际加载，它在网页加载时显示进度条，但没有动画或实际加载移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-26T16:11:30.220

您还应该使用设置中间进度

```
progressBar.setProgress(int); 
```

以便显示进度。您所做的只是显示和隐藏视图

编辑： ~~添加以下代码。~~

 ~~```
 @Override
   public void onProgressChanged(WebView view, int progress) {
     progressBar.setProgress(progress);
   } 
```~~ 

~~抱歉，您需要一个 webchromeclient。所以像下面这样使用。把它放在下面~~

 ~~```
web.setWebViewClient(new myWebClient());
//add this below line
web.setWebChromeClient(new WebChromeClient() {
   public void onProgressChanged(WebView view, int progress) {
        progressBar.setProgress(progress);
   }
 }); 
```

检查[WebView](http://developer.android.com/reference/android/webkit/WebView.html) Doc，它有一个例子。~~

# python - 在 SQLAlchemy 中，当有多个关系时，如何访问查询中的引用属性？

> ID：12605869
> 
> 赞同：2
> 
> 时间：2012-09-26T16:04:20.897
> 
> 标签：python, sql, database, orm, sqlalchemy

## 数据库结构

我有两个类，A 和 B，它们有两种不同的关系：

1) 使用关联表 (associations) 存储仅与该特定关联 (association_property_1) 相关的信息并通过 A 和 B 中的反向引用实例化的多对多关系。

2) A 和 B 之间使用 table_b 中的外键建立一对一关系，这样只有 B“知道”这种关系。我不在乎 A 是否知道它，但这样看起来更简单。

我的课程如下所示：

```
class A(Base):
  __tablename__ = 'table_a'

  id = Column(Integer, primary_key=True)
  a_property_1 = Column(Float)
  a_property_2 = Column(Float)
  a_property_special = Column(Float)

  # Many-to-many relationship with B through an Association
  associated_bs = relationship('Association', backref='a')

class B(Base):
  __tablename__ = 'table_b'

  id = Column(Integer, primary_key=True)
  b_property_1 = Column(Float)
  b_property_2 = Column(Float)

  # One-to-one relationship with A
  a_id = Column(Integer, ForeignKey('table_a.id'))
  a = relationship('A', uselist=False, backref='b')

  # Many-to-many relationship with A through an Association
  associated_as = relationship('Association', backref='b')

class Association(Base):
  __tablename__ = 'associations'

  a_id = Column(Integer, ForeignKey('table_a.id'), primary_key=True)
  b_id = Column(Integer, ForeignKey('table_b.id'), primary_key=True)

  association_property_1 = Column(Float) 
```

## 程序

我想对所有关联运行查询，我可以通过与 B 的一对一关系访问 A 的特殊属性。所以基本上我希望能够访问该属性

```
B.a.a_property_special 
```

*在*查询中。

特定查询的示例如下：

```
session.query(Association.association_property_1,
  func.abs(A.a_property_special - B.a.a_property_special).\
  filter(B.a.a_property_special > 3.0) 
```

其中 A 和 B 使用多对多关系连接，Ba 通过一对一连接。显然这个查询不会工作，因为 B 没有实例化，所以我无法访问 Baa_property_special。

如果我没有多对多关系，我可以在 B 上加入 A 并完成它。我的问题是我想使用关联查询 A 和 B，但我仍然需要通过一对一关系的标量 Baa_property_special。

## 可能的解决方案

我尝试了几种不同的解决方案，但由于各种原因都证明不令人满意。

*   将列“a_property_special”复制到表 B。我不喜欢这样，因为如果 A 和 B 之间的一对一关系发生变化（它可能在运行时发生变化），它会复制信息并且不会呈现良好的逻辑数据结构。
*   使用 column_property 或 association_proxy。看起来很干净，但我只能让它在实例对象上正常工作。在查询中使用它们时，我在构建二进制表达式等时遇到问题。
*   使用子查询。我已经摆弄了一点，但一直无法生产出任何运作良好的东西。也许我只是做得不对，但它似乎总是最终变得非常混乱和缓慢。
*   只需查询所有关联并在 python 中进行数学、逻辑表达式和过滤。我的感觉是这会比在 SQL 中效率低，但我可能是错的..

## 要求

*   它需要很快（呃）。我的表有几次，每个表都有 100,000 条记录。
*   查询必须尽可能简单，以便易于调试和修改，同时仍能反映数据库的逻辑结构。我更愿意将尽可能多的代码隐藏在类定义中。
*   我对关系的结构*没有*任何特别的偏好，我只需要一对一和多对多（包括它自己的关联属性）。

我有一种感觉，这真的很简单，但我似乎无法找到一个好的解决方案。欢迎任何帮助或评论。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T15:46:03.057

SQLAlchemy 对连接是明确的，所以当你看到类似的东西时：

```
session.query(B).filter(B.a.a_property_special > 3.0) 
```

这真的意味着：

```
session.query(B).join(B.a).filter(A.a_property_special > 3.0) 
```

还有一个子查询情况，它不如连接有效。子查询情况总是需要使用相关子查询，如下所示：

```
subq = session.query(A.a_property_special).where(A.id == B.a_id).correlate(B).as_scalar()
session.query(B).filter(subq > 3.0) 
```

使用关系时，您还可以访问 any() 和 has() 方法，它们分别为一对多、多对一呈现 EXISTS 子查询：

```
session.query(B).filter(B.a.has(A.a_property_special > 3.0)) 
```

以上等价于：

```
from sqlalchemy import exists

session.query(B).filter(exists().where(B.a_id==A.id, A.a_property_special > 3.0)) 
```

子查询的优点是它可以用来创建自包含的过滤条件，而当依赖 join() 时，没有办法隐式发生。但是子查询方法在数据库端表现不佳。

当然有很多简单的情况，可以根据存在的各种情况将连接隐式添加到封闭查询中，这就是像 Django 这样的 ORM 所做的，但 SQLAlchemy 的看法是，你很快就会进入大量案例，其中像这样的简单方法会失效，所以我们不会在库中进行这样的猜测。

因此，以您的原始查询示例为例：

```
session.query(Association.association_property_1,
  func.abs(A.a_property_special - B.a.a_property_special)).\
  filter(B.a.a_property_special > 3.0) 
```

您实际上是在尝试以两种不同的方式访问 A，因此在执行显式连接路由时，您需要为其创建一个别名，以便它可以被定位两次：

```
from sqlalchemy.orm import aliased
a_alias = aliased(A)
session.query(
      Association.association_property_1,
      func.abs(A.a_property_special - a_alias.a_property_special)
     ).\
     join(Association.a).\
     join(Association.b).join(a_alias, B.a).\
     filter(a_alias.a_property_special > 3.0) 
```

基本上，它的构建方式与您在 SQL 中的构建方式相同。SQL是这样的：

```
SELECT associations.association_property_1 AS associations_association_property_1, abs(table_a.a_property_special - table_a_1.a_property_special) AS abs_1 
FROM associations JOIN table_a ON table_a.id = associations.a_id JOIN table_b ON table_b.id = associations.b_id JOIN table_a AS table_a_1 ON table_a_1.id = table_b.a_id 
WHERE table_a_1.a_property_special > :a_property_special_1 
```

这里的子查询路线在数据库上会很困难。虽然您可以在关联上连接呈现子查询的属性，但它们都需要被称为相关子查询，这将非常糟糕，特别是如果您在一个查询中多次引用它们。以下是使用[混合属性](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/hybrid.html)的方法：

```
class Association(Base):
    __tablename__ = 'associations'

    a_id = Column(Integer, ForeignKey('table_a.id'), primary_key=True)
    b_id = Column(Integer, ForeignKey('table_b.id'), primary_key=True)

    association_property_1 = Column(Float)

    @hybrid.hybrid_property
    def a_property_special(self):
        return self.a.a_property_special

    @a_property_special.expression
    def a_property_special(cls):
        return select([A.a_property_special]).where(A.id==cls.a_id).as_scalar()

    @hybrid.hybrid_property
    def b_a_property_special(self):
        return self.b.a.a_property_special

    @b_a_property_special.expression
    def b_a_property_special(cls):
        return select([A.a_property_special]).where(A.id==B.a_id).where(B.id==cls.b_id).as_scalar()

session.query(
  Association.association_property_1,
  func.abs(Association.a_property_special - Association.b_a_property_special)
 ) 
```

这里的 SQL 是：

```
SELECT associations.association_property_1 AS associations_association_property_1, abs((SELECT table_a.a_property_special 
FROM table_a 
WHERE table_a.id = associations.a_id) - (SELECT table_a.a_property_special 
FROM table_a, table_b 
WHERE table_a.id = table_b.a_id AND table_b.id = associations.b_id)) AS abs_1 
FROM associations 
```

出于此查询的目的，数据库获得的关于这三个表中的行如何相互关联的信息较少，因此在获取行时它必须做更多的工作。连接案例虽然要求您以两种不同的方式将“A”作为目标并指定事物的连接方式，但它为数据库提供了一项更简单的任务，因为连接比计算每行相关 SELECT 的相关性更有效的父行集。

# google-apps-script - 在 Google Apps 中自动添加新组成员--使用 Google Script

> ID：12605870
> 
> 赞同：3
> 
> 时间：2012-09-26T16:04:24.117
> 
> 标签：google-apps-script, automation, google-groups

我正在尝试完成我想象的在 Google Apps 中相当简单的自动化，但我是 Google 脚本的新手，并且无法弄清楚执行脚本的触发器是如何工作的。

**这是一些伪代码，描述了我认为我需要做的事情：**

```
//When a new group is created execute the function below

function addNewSalesTeamGroupMember() {
  //Get the new group's id/email address
  //Add it as a new member of the Sales Team group (id=SalesTeam@mydomain.com)
} 
```

**以下是手头任务的一些背景：**

我有一个将网上论坛用作电子邮件转发器的 Google Apps 帐户。例如，有 50 个组，每个组有 1 名成员，用于为销售团队成员提供域上的电子邮件帐户（例如 salesguy@mydomain.com 是一个组，其唯一目的是转发到 Sales Guy 的第三方电子邮件地址： salesguy@yahoo.com）。还有另一个组 SalesTeam@mydomain.com，其中包含每个销售团队成员，因此经理可以立即向整个销售团队发布公告。

我的任务是编写一个脚本，该脚本将在创建时自动将创建的任何新销售成员添加到 SalesTeam 组。因此，它需要在添加新销售成员时运行（即，当创建一个新组时）。

我有[更新 Groups 的 API](https://developers.google.com/google-apps/provisioning/#updating_a_group)，但是我找不到任何资源来描述如何编写触发器来告诉脚本在创建新组时执行，从而能够检索新组的地址。换句话说，我正在寻找学习如何在 Google Scripts 中编写这部分伪代码：

```
//When a new group is created execute the function below 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:12:11.920

这是可行的，但你需要在这里做一些事情。由于谷歌应用程序脚本无法查看您是否创建了需要比较内容的组。首先执行此代码以获取所有组并将它们放入数据库中：

```
function startUp() {
  var groups = GroupsManager.getAllGroups();
  var db = ScriptDb.getMyDb();
  for (var a in groups){
    var ob = {group: groups[a].getId()};
    db.save(ob);
  }
} 
```

所以现在我们有一个充满我们组的数据库，我们将创建一个函数来检查是否添加了新组：

```
function control() {
  var db = ScriptDb.getMyDb();
  var results = db.query({});
  var groups = GroupsManager.getAllGroups();

  while (results.hasNext()) {
    var result = results.next();
    var group = GroupsManager.getGroup(result.group);
    for (var a in groups){
      if (groups[a].getId() == group.getId()){
        //things stay the same remove it from the groups array
        groups.splice(a,1);
        break;
      }
    }
  }
  //whats left in the array should be a new group
  for (var a in groups){
    //save it first
    var ob = {group: groups[a].getId()};
    db.save(ob);
    //And now tell your script to add this email to the group you want
    GroupsManager.getGroup("SalesTeam@mydomain.com").addMember(groups[a].getId());
  }
} 
```

现在转到您的脚本触发器并设置一个时间驱动触发器，以了解您希望执行此功能的频率。

亲切的问候，

托马斯·范拉图姆

# spring - Spring MVC - mvc 资源

> ID：12605875
> 
> 赞同：0
> 
> 时间：2012-09-26T16:04:38.933
> 
> 标签：spring, spring-mvc, spring-security, spring-roo, spring-webflow

我有一个 spring 项目，在 linux/tomcat6 服务器上，我们有一个外部文件夹，用于存放“ **/var/projectname/personphotos** ”内的人物照片。尝试制作符号链接等，但似乎没有任何效果，应用程序看不到外部文件夹。我碰巧被`<mvc:resources>`标签和`<mvc:annotation-driven />`.How 将它添加到项目中？我在想类似的东西

`<mvc:resources mapping="/personphotos/" location="/var/projectname/personphotos" />`

在应用程序中我可以有类似的东西`<img src="/personphotos/bla-bla.jpg"/>`

所有的教程都说要使用标签，但他们没有说在哪里放置它。我认为必须了解该位置，请原谅我的无知。我尝试将它添加到 applicationcontext.xml 并因错误而爆炸。其他教程说要编辑 servlet-context.xml，不管它在哪里？看[这里](https://stackoverflow.com/questions/4784060/spring-tomcat-and-static-resources-and-mvcresources)

我正在使用带有 STS 的 spring 3.0.7，我尝试在 pom 文件中更改为 3.1.0。版本更改导致 mvn tomcat:run 给出一些错误。我在某处看到 mvc:resource 标记在 3.0.4 或更高版本中可用，我想我现在是安全的。请帮助消除这些歧义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:16:18.850

它必须在您的 servlet-context.xml 文件中，可能是这样：

```
<mvc:resources mapping="/personphotos/**" location="/var/projectname/personphotos" /> 
```

您可以使用以下方式访问它：

```
<img src="${pageContext.request.contextPath}/personphotos/bla-bla.jpg"/> 
```

开始部分是确保您的应用程序上下文部分也被添加。

**编辑** 为了他人的利益，最后的工作是

```
<mvc:resources mapping="/personphotos/**" location="file:/var/projectname/personphotos" /> 
```

# asp-classic - 用户单击按钮时打开 Outlook 电子邮件 - 经典 ASP

> ID：12605882
> 
> 赞同：0
> 
> 时间：2012-09-26T16:04:55.860
> 
> 标签：asp-classic

我有一个提交按钮，点击时会给出一个确认消息框。如果用户单击“是”，则需要在客户端打开 Outlook 电子邮件。你能提供我的示例代码吗？

像这样的东西...

```
<a href="mailto:someone@website.com">Email</a> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:29:24.913

这是一个开始的地方。您需要连接“是”按钮以提交表单。这里的“是”按钮是为了演示一个按钮可以启动一个`mailto`动作。

```
<html>
  <body>

   <form action="mailto:somebody@wherever.foo">
      <input type="submit" value="Yes" />
   </form>

  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:28:19.013

就个人而言，我认为经典的asp不可能做到这一点。

但是大多数浏览器会自动选择默认的电子邮件程序，访问者可以为浏览器设置或更改他们的默认电子邮件程序，例如：

Mozilla Firefox： 1\. 单击“工具” 2\. 选择“选项” 3\. 单击“应用程序”选项卡 4\. 向下滚动到“mailto”，然后为您的程序选择操作。

当然，这些设置因浏览器而异，需要由访问者设置。

我知道这不是您正在寻找的解决方案，但至少已经解释过了。

# php - 将时间传输到 mySQL 数据库，定义为“Thu, 14 Apr 2011 22:44:33 +0000”给我语法错误

> ID：12605885
> 
> 赞同：0
> 
> 时间：2012-09-26T16:05:06.300
> 
> 标签：php, mysql, datetime, time, phpmyadmin

我可以选择使用正则表达式和 substr() 来解析数据，但如果可能的话，我希望将数据按原样传递给日期、日期时间或时间戳列。我宁愿不剥离任何东西。我正在从商业站点 API 构建一个新数据库，用于数据管理。我试图输入为 char 和 varchar 并出现类似错误。我查看了 phpMyAdmin 中的 As defined: 选项并尝试将数据“定义”为

```
%a, %y %b %Y %H:%i:%s 
```

在使用 substr() 函数拉 +0000 时，没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:10:22.197

[您可以在doc](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-literals.html)中找到支持的格式。

如果您想使用 MySQL 转换您的日期格式，请查看[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_str-to-date)。

# facebook - 发布评论到除我之外的用户发表的帖子时，代码 200 的 Facebook 权限错误

> ID：12605886
> 
> 赞同：4
> 
> 时间：2012-09-26T16:05:12.993
> 
> 标签：facebook, facebook-graph-api, permissions

我从 facebook 收到代码 200 的权限错误，同时尝试在我自己的 facebook 粉丝页面中由我以外的用户发表的帖子下发表评论。我正在使用 Facebook 图形 API。

确切的错误（JSON）是：

> {"error":{"message":"(#200) 权限错误","type":"OAuthException","code":200}}

注意：上面的错误并没有说需要什么样的权限！

详细用例：

1.  我的 Facebook 帐户中有一个粉丝专页。我是那个粉丝页面的管理员。

2.  我已经在 facebook 中注册了我的应用程序，并获得了包括 publish_stream 权限在内的权限。另外，我有设置`publish_stream`权限作为扩展权限。

3.  现在，当我尝试在除我之外的任何用户发表的帖子（当然是我的粉丝专页）下发表评论时，我收到上述权限错误。

    *   但是，使用图形 API，我可以在我自己从粉丝专页或图形 API 制作的帖子下发表评论/发布点赞。
    *   但是，在我的粉丝专页中，我可以在由我以外的用户发布的帖子下发表评论。

注意：我有一个通过 OAuth 2.0 步骤获得的有效访问令牌（用户访问令牌和页面访问令牌）。尝试同时使用用户访问令牌和页面访问令牌时出现上述错误。

# php - 套接字操作正在进行时我们如何写入一些数据

> ID：12605893
> 
> 赞同：2
> 
> 时间：2012-09-26T16:05:24.927
> 
> 标签：php, php-socket

我是套接字的新手，我试图显示一些数据让用户告诉他等待，当套接字从服务器获取数据时，我也使用了 ob_flush、flush 和其他一些函数，但它们没有用，文本“正在加载....请稍候”仅在套接字关闭后出现，这是我的代码

```
$fp = fsockopen("tcp:.......", port num, $errno, $errstr);
if (!$fp) 
{
    echo "ERROR: $errno - $errstr<br />\n";
} 
else 
{
    echo "Loading .... Please Wait";
    flush();
    fwrite($fp, $num . "\n");
    ini_set('max_execution_time', 600);
    $cmd_res = fread($fp, 1000);
    echo $cmd_res;
    fclose($fp);
} 
```

如果您有任何解决方案，请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T22:57:48.337

使其工作的一些建议：

1.  确保在 php.ini 中关闭了输出缓冲：

    ```
    output_buffering = Off
    zlib.output_compression = Off 
    ```

2.  结束任何活动的输出缓冲缓冲区处于活动状态：

    ```
    while(ob_get_level()){ 
        ob_end_clean(); 
    } 
    ```

3.  禁用任何可以缓冲响应的http服务器模块（即：apache中的mod_gzip）

4.  确保浏览器没有缓冲响应（FireFox 似乎直接输出响应，而 chrome 等待响应完成
5.  其他浏览器可能需要接收更多数据才能显示，利用一些空格：

    ```
    echo str_repeat(" ",1024)."\n"; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:22:12.763

尝试在 fwrite 行的末尾添加回车：

```
fwrite($fp, $num . "\r\n"); 
```

套接字将采用这种组合的新行。

# jquery - 如果 jquery.validate 通过，则显示文本

> ID：12605898
> 
> 赞同：0
> 
> 时间：2012-09-26T16:05:42.240
> 
> 标签：jquery, jquery-validate

我正在使用 jquery.validate.js 插件，一切正常......但是......如果验证通过并且表单实际提交，我想在隐藏的 div 中显示文本。

```
$("#commentForm").validate(); 
```

如何修改此行以在 hiddenmessage div 中显示“请稍候您的表单提交”？

```
<div id="hiddenmessage"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:08:23.330

根据[文档](http://docs.jquery.com/Plugins/Validation/validate)，以下内容应该满足您的要求

```
$("#commentForm").validate({
   submitHandler: function(form) {
     $('#hiddenmessage').html('Please Wait While Your Form Submits');
     form.submit();
   }
}); 
```

旁白：每个单词都大写的英语看起来很奇怪。对纯英语使用正确的格式规则。

# html - 更改背景图像不透明度

> ID：12605908
> 
> 赞同：46
> 
> 时间：2012-09-26T16:06:22.607
> 
> 标签：html, background-image, opacity

我有一个带有文本块的 div 元素和一个在其中设置背景图像的父 div。现在我想降低背景图像的不透明度。请建议我如何做到这一点。

提前致谢。

**编辑：**

我希望通过编辑 html 内容来改变我的博客文章查看 blogger.com 的方式。html 代码如下所示：

```
<div>
 //my blog post
</div> 
```

我试图用一个 div 元素包围上面的整个代码，并分别设置每个 div 的不透明度，如下所示：

```
<div style="background-image:url("image.jpg"); opacity:0.5;">
<div style="opacity:1;">
 //my blog post
</div>
</div> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2016-11-01T19:09:37.307

*如今，只需使用 CSS 属性"background-blend-mode"*就可以做到这一点。

```
<div id="content">Only one div needed</div>

div#content {
    background-image: url(my_image.png);
    background-color: rgba(255,255,255,0.6);
    background-blend-mode: lighten;
    /* You may add things like width, height, background-size... */
} 
```

它将背景颜色（白色，0.6 不透明度）混合到背景图像中。在此处了解更多[信息 (W3S)](http://www.w3schools.com/CSSref/pr_background-blend-mode.asp)。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-09-26T16:35:58.030

您不能直接在背景图像上使用透明度，但您可以通过以下方式实现此效果：

[http://jsfiddle.net/m4TgL/](http://jsfiddle.net/m4TgL/)

HTML：

```
<div class="container">
    <div class="content">//my blog post</div>
</div>​ 
```

CSS：

```
.container {  position: relative; }

.container:before {
    content: "";
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1;
    background-image: url('image.jpg');
   opacity: 0.5;
}

.content {
    position: relative; 
    z-index: 2;
}​ 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2020-08-19T09:54:27.093

尝试这样做：

```
.bg_rgba {
  background-image: url(https://picsum.photos/200);
  background-color: rgba(255, 255, 255, 0.486);
  background-blend-mode: overlay;
  width: 200px;
  height: 200px;
  border: 1px solid black;
}
```

```
<div class="bg_rgba"></div>
```

在我的情况下工作。您可以根据需要减少或增加背景颜色的 alpha 值。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2012-09-26T16:19:20.113

没有什么叫做背景不透明度。不透明度应用于元素、其内容及其所有子元素。并且这种行为不能仅仅通过覆盖子元素的不透明度来改变。

孩子与父母的不透明度一直是一个长期存在的问题，最常见的解决方法是使用`rgba(r,g,b,alpha)`背景颜色。但在这种情况下，由于它是背景图像，因此该解决方案将不起作用。一种解决方案是将图像生成为具有图像本身所需不透明度的 PNG。另一种解决方案是将子 div 取出并使其绝对定位。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-18T20:29:22.413

您可以创建多个 div 并执行以下操作：

```
<div style="width:100px; height:100px;">
   <div style="position:relative; top:0px; left:0px; width:100px; height:100px; opacity:0.3;"><img src="urltoimage" alt=" " /></div>
   <div style="position:relative; top:0px; left:0px; width:100px; height:100px;"> DIV with no opacity </div>
</div> 
```

我做了几次......简单但有效......

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2021-01-30T03:54:36.403

你也可以简单地使用这个：

```
.bg_rgba {
  background: linear-gradient(0deg, rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)), url('https://picsum.photos/200');
  width: 200px;
  height: 200px;
  border: 1px solid black;
}
```

```
<div class='bg_rgba'></div>
```

您可以根据自己的喜好更改颜色的不透明度。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-27T20:03:18.003

响应先前的评论，如果 CSS 在您的 php 页面中而不是在 css 样式表中，您可以在“容器”示例中通过变量更改背景。

```
$bgimage = '[some image url];
background-image: url('<?php echo $bgimage; ?>'); 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-07-07T01:47:02.850

我所做的是：

```
<div id="bg-image"></div>
<div class="container">
    <h1>Hello World!</h1>
</div> 
```

CSS：

```
html {
    height: 100%;
    width: 100%;
}
body {
    height: 100%;
    width: 100%;
}
#bg-image {
    height: 100%;
    width: 100%;
    position: absolute;
    background-image: url(images/background.jpg);
    background-position: center center;
    background-repeat: no-repeat;
    background-size: cover;
    opacity: 0.3;
} 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2013-04-27T05:28:26.090

你可以通过简单的代码做到这一点：

```
filter:alpha(opacity=30);
-moz-opacity:0.3;
-khtml-opacity: 0.3;
opacity: 0.3; 
```

# mysql - （自动生成？）_ids 给出 ActiveRecord::UnknownPrimaryKey 错误

> ID：12605911
> 
> 赞同：0
> 
> 时间：2012-09-26T16:06:35.373
> 
> 标签：mysql, ruby-on-rails, ruby, activerecord, ruby-on-rails-3.1

假设我有模型

```
class Widget < ActiveRecord::Base
    has_many :widget_spots 
```

和

```
class WidgetSpot < ActiveRecord::Base
  belongs_to :widget 
```

此外，在我的 MySQL 表“widget_spots”中，我有一列“widget_id”

```
+--------------------+------------+------+-----+---------+-------+
| Field              | Type       | Null | Key | Default | Extra |
+--------------------+------------+------+-----+---------+-------+
| id                 | int(11)    | NO   | PRI | NULL    |       |
| widget_id          | int(11)    | NO   | PRI | NULL    |       |
                ................
+--------------------+------------+------+-----+---------+-------+ 
```

现在，如果在我的 rails 控制台中，尝试访问 widget_spot_ids 会出错。

```
> widget = widgets.find(:first)
> widget.widget_spot_ids
ActiveRecord::UnknownPrimaryKey: ActiveRecord::UnknownPrimaryKey
    from /Users/xxxxx/.rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/reflection.rb:374:in `primary_key'
    from /Users/xxxxx/.rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/reflection.rb:228:in `association_primary_key'
    from /Users/xxxxx/.rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/associations/collection_association.rb:51:in `ids_reader'
    from /Users/xxxxx/.rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/activerecord-3.1.1/lib/active_record/associations/builder/collection_association.rb:62:in `block in define_readers'
    from (irb):12
    from /Users/xxxxx/.rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/railties-3.1.1/lib/rails/commands/console.rb:45:in `start'
    from /Users/xxxxx/.rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/railties-3.1.1/lib/rails/commands/console.rb:8:in `start'
    from /Users/xxxxx/.rvm/gems/ruby-1.9.2-p320@rails-3.1.1/gems/railties-3.1.1/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

但是，获取实例会给出一个没有错误的列表：`> widget.widget_spots`执行预期的 SQL 查询并给出一个列表。

我怎样才能弄清楚`ActiveRecord::UnknownPrimaryKey`错误是在哪里以及如何产生的。它试图在哪个数据库中找到哪个主键？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T20:48:47.027

这可能是因为目标`widget_spots`表的主键由多个字段组成。

# printing - 将水晶报表直接打印到打印机，而不是要求打印对话框（报表查看器）

> ID：12605918
> 
> 赞同：1
> 
> 时间：2012-09-26T16:07:11.567
> 
> 标签：printing, crystal-reports, report, bulk

我正在开发一个 Windows 应用程序，我需要在其中提供批量打印功能。在这里，我有
一个打印文档的格式，我需要一键打印多个文档。我正在使用 Crystal Reports，但每次它进入报表查看器时，我们都需要从它们中打印出来。

有什么方法可以让我一次单击按钮直接打印数据库中的所有文档，如果在 Crystal Reports 中不可能，您能建议任何其他方式吗？？？？？？？？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T16:57:44.007

您是否在运行时尝试过 printtoprinter() 方法？你可以隐藏默认的打印按钮，添加一个自定义的打印按钮来调用这个方法。

# javascript - 将多个 .xls 文件转换为以分号分隔的 .csv 文件

> ID：12605920
> 
> 赞同：1
> 
> 时间：2012-09-26T16:07:20.357
> 
> 标签：javascript, excel, csv, xls, file-conversion

我有多个要转换为 csv 文件的 .xls 文件，并且已经找到了这个 JavaScript：

```
/*
 jPaq - A fully customizable JavaScript/JScript library
 http://jpaq.org/

 Copyright (c) 2011 Christopher West
 Licensed under the MIT license.
 http://jpaq.org/license/

 Version: 1.0.6.000001
 Revised: April 6, 2011
*/
(function(){jPaq={toString:function(){return"jPaq - A fully customizable JavaScript/JScript library created by Christopher West."}};var e=new ActiveXObject("WScript.Shell");alert=function(a,b,c,d){a==null&&(a="");if(!b)b=WScript.ScriptName;c==null&&(c=alert.OKOnly+alert.Exclamation);d==null&&(d=0);return e.Popup(a,d,b,c)};alert.OKOnly=0;alert.OKCancel=1;alert.AbortRetryIgnore=2;alert.YesNoCancel=3;alert.YesNo=4;alert.RetryCancel=5;alert.Critical=16;alert.Question=32;alert.Exclamation=48;alert.Information=
64;alert.Timeout=-1;alert.OK=1;alert.Cancel=2;alert.Abort=3;alert.Retry=4;alert.Ignore=5;alert.Yes=6;alert.No=7})();
/***** END OF JPAQ *****/

try {
  // Create an instance of Excel, but don't allow the content
  // area to be repainted.
  var xlCSV = 6;
  var xlApp = new ActiveXObject("Excel.Application");
  xlApp.Visible = true;
  xlApp.ScreenUpdating = false;
  xlApp.DisplayAlerts = false;

  // Initialize the counts.
  var fileCount = 0, csvCount = 0;

  // Regular expression for match Excel files to be converted.
  var re = /([^\\\/]+)\.xlsx?$/i;

  // Reference the containing folder.
  var fso = new ActiveXObject("Scripting.FileSystemObject");
  var fldr = fso.GetFolder(WScript.ScriptFullName.replace(/[\\\/][^\\\/]+$/, ""));

  // Determine whether or not linefeed characters should be removed.
  var msg = "Would you like to remove linefeed characters from all cells?";
  var title = "Remove Linefeed Characters";
  var removeLf = alert.Yes == alert(msg, title, alert.YesNo + alert.Question);

  // Loop through all of the xls and xlsx files in this folder.
  for(var e = new Enumerator(fldr.Files); !e.atEnd(); e.moveNext()) {
    var aFile = e.item();
    if(re.test(aFile.Name)) {
      xlApp.StatusBar = "Processing " + aFile.Path + "...";

      // Open the workbook.
      var wb = xlApp.Workbooks.Open(aFile.Path);

      // Save each worksheet as a CSV file.
      for(var e2 = new Enumerator(wb.Sheets); !e2.atEnd(); e2.moveNext()) {
        var ws = e2.item();
        if(removeLf) {
          ws.UsedRange.Replace("\n", "");
        }
        var csvPath = aFile.Path.replace(re, function($0, $1) {
          return $1 + "-" + ws.Name + ".csv";
        });
        ws.SaveAs(csvPath, xlCSV);
        csvCount++;  // Increment the number of CSV's.
      }

      // Close the workbook.
      wb.Close();

      // Increment the number of files.
      fileCount++;
    }
  }

  // Allow alerts to be displayed, and the screen to be updated again.
  xlApp.DisplayAlerts = true;
  xlApp.ScreenUpdating = true;

  // Close Excel.
  xlApp.Quit();

  var msg = "The results are as follows:\nFiles converted:  "
    + fileCount + "\nCSV's created:  " + csvCount;
  var title = "Conversion Process Complete";
  alert(msg, title, alert.Information);
}
catch(e) {
  // If the Excel workbook is open, close it.
  try{ wb.Close(false); }catch(e2){}

  // If Excel is open, change the settings back to normal and close it.
  try{
    xlApp.DisplayAlerts = true;
    xlApp.ScreenUpdating = true;
    xlApp.Quit();
  } catch(e2){}

  // Print the error message.
  var msg = "The following error caused this script to fail:\n"
    + e.message;
  var title = "Critical Error Occurred";
  alert(msg, title, alert.Critical);
} 
```

但是，此代码使用逗号分隔保存文件，而不是使用分号。看起来，我必须用我的本地设置保存文件（当我通过 Excel 手动保存它们时，它们用分号保存）而且我不知道如何......

有谁知道的参数

```
ws.SaveAs(csvPath, xlCSV); 
```

方法，所以它会使用我的本地设置？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T15:38:34.503

我很高兴你发现[我的帖子](http://gotochriswest.com/blog/2011/05/05/excel-batch-convert-xls-to-csv/)有帮助。不幸的是，这样做的唯一方法似乎是通过控制面板实际更改系统的本地设置。经过多次搜索，我确定了这一点。 [这是一个](http://www.excelforum.com/excel-general/568961-excel-save-as-csv-delimiter-set-to-semi-colon-not-comma-why.html)说明这一事实的页面。如果您找到其他解决方案，请告诉我们。

# r - 如何使用格式R

> ID：12605925
> 
> 赞同：1
> 
> 时间：2012-09-26T16:07:33.353
> 
> 标签：r

如何使用 formatR 来获得类似的输出

```
data<-data.frame(response=c(48,31,24,29,46,34,25,31,45,37,27,35,37,39,30,38,45,34,29,32,
                             28,17,19,20,32,18,20,22,35,19,22,24,39,16,19,22,31,15,20,22)
                  ,treatment=rep(c("A","B","C","D"),10)
                  ,subject=rep(c("A","B","C","D","E","F","G","H","I","J"),each=4)
                  ,group=rep(c("A","B"),each=20)
                  ) 
```

从任意输入，如

```
data <- data.frame(response = c(48, 31, 24, 29, 46, 
   34, 25, 31, 45, 37, 27, 35, 37, 39, 30, 38, 45, 
   34, 29, 32, 28, 17, 19, 20, 32, 18, 20, 22, 35, 
   19, 22, 24, 39, 16, 19, 22, 31, 15, 20, 22), treatment = rep(c("A", 
   "B", "C", "D"), 10), subject = rep(c("A", "B", 
   "C", "D", "E", "F", "G", "H", "I", "J"), each = 4), 
   group = rep(c("A", "B"), each = 20)) 
```

我想要什么， - 获取第二个 data.frame - 执行 tidy.source(filename, file = filename) 并 - 以第一个 data.frame 的形式获取 data.frame。

如果我可以选择 formatR 忽略这些数据，我也可以。

# python - 在生产中管理 django 项目的推荐方法是什么（在 apache 服务器中）

> ID：12605926
> 
> 赞同：1
> 
> 时间：2012-09-26T16:07:34.283
> 
> 标签：python, django, apache, daemon

我的目标是让 django 应用程序在崩溃时自动重启，并将错误写入日志文件。有人建议使用 supervisord、daemontools 或 django-supervisor，但我在让它们中的任何一个工作时遇到问题。

例如，在supervisord中，应用程序提示我要管理一个“程序”，它想要一个目录。我不知道这实际上意味着什么。如果我想管理它，与我的所有 django 项目重叠的“程序”是什么？

我将其设置为：

```
[progam:webserver]
command=/home/user/apps/django/apache2/bin/start # I think this is wrong
restart=true
logfile=/home/path/to/file 
```

但我不认为这是正确的。我不知道网络服务器背后的基础知识以及它如何与 django 应用程序或 mod_wsgi 等交互。

我想tl; dr有三个问题。一个是你们建议如何在 apache 中管理 django 项目。其次，我应该如何配置我的 supervisord 以连接到我的 django 项目？[编辑] 第三个问题，除了记录崩溃之外，还应该添加哪些其他很酷的功能来管理 Web 应用程序？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:09:20.793

当您使用 apache 运行 django 时，不需要主管。当 django 出错时，它将发生在 apache 请求中。Apache 已经是一项服务。跟踪 apache 正在处理的请求数量或其资源使用情况可能很重要，但有一些不错的开源工具（其中之一是 nagios）。

一些 python 网络服务器（我相信 gunicorn）可以（也许应该？）使用主管进行管理。但是，对于 apache，这不是必需的。

Apache 将处理日志记录到您在虚拟主机中设置的错误日志。此外，您可以让 django 向您发送有关错误的电子邮件（我认为这很酷） django-sentry 看起来真的很酷[https://github.com/getsentry/sentry](https://github.com/getsentry/sentry)。它提供了一个很好的错误管理。

# jquery - 在现有站点上安装 jQuery 幻灯片插件时出现 IE 错误

> ID：12605929
> 
> 赞同：1
> 
> 时间：2012-09-26T16:07:40.787
> 
> 标签：jquery, css, browser, internet-explorer-9, compatibility

这是一个特定于站点的问题，因此我很可能需要帮助查看代码。我正在现有网站（我没有建立）上安装 Jon Raasch 的“简单的 jQuery 幻灯片插件”。在 IE 9 中，发生了两件没有意义的事情。

1.  “border-radius”CSS 代码未呈现
2.  保存幻灯片的 DIV 被向下推了大约 50px。

有人可以看看源代码并告诉我为什么插件会出现这种冲突吗？

[http://www.indefreetest.com/proof/JamesShields/](http://www.indefreetest.com/proof/JamesShields/)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T09:20:20.213

你写了

```
<td colspan="7" background="body/body_04.jpg" height="273" alt="">   
<!--jQuery Slideshow Code-->
   <div id="slideshow">................. 
```

现在给出“垂直对齐：顶部；” 就在您的幻灯片 div 之前。请让我知道它是否有效。

# python - 在 Web2py Python 中格式化日期

> ID：12605934
> 
> 赞同：4
> 
> 时间：2012-09-26T16:08:04.270
> 
> 标签：python, database, date, web2py

我正在寻找一个函数来格式化日期以获得日、月和年。日期以以下格式 2012-09-26 存储在我的数据库中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-26T16:50:54.100

如果您的目标是在 web2py 模板上显示，那么您必须使用纯 Python 来格式化

```
{{=row.datetime_field.strftime("%d/%m/%Y")}} 
```

以上会生成`25/09/2012`

看看 Python strftime 文档。

如果您只想显示日期。

```
{{=row.datetime_field.date}} 
```

您也可以将其设置为该字段的表示

```
db.mytable.datetime_field.represent = lambda value, row: value.strftime("format-here") 
```

该表示将仅对 SQLFORM.grid 和 SQLTABLE 有用

所有你需要的是`strftime`

# android - 为每个级别添加星级。

> ID：12605940
> 
> 赞同：-5
> 
> 时间：2012-09-26T16:08:14.790
> 
> 标签：android, rating

我想在我的游戏中添加一个评分系统，类似于愤怒的小鸟的评分系统，每个级别有 1-3 颗星。因为我真的不知道这种评级系统叫什么，所以我无法搜索任何材料来帮助我。有没有人有任何示例代码或有关此信息的链接？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T16:10:33.347

好吧，我*希望*这只是为每个级别设置两个分数（或时间，或您想要的任何其他指标）边界的问题。超过最高边界，您将获得三颗星。超过下一个边界（但不是最高边界），你会得到两颗星。只需完成关卡，即可获得一颗星。（或者，您可以有三个边界，并包括“没有星，但已完成”作为选项。）

我希望您作为开发人员来决定每个级别的边界在哪里。一旦你制定了指标，实际的*编码部分就很简单了。*

# left-join - 查询的左外连接或右外连接

> ID：12605948
> 
> 赞同：1
> 
> 时间：2012-09-26T16:08:43.903
> 
> 标签：left-join, distinct

我有这个查询：

```
SELECT  DISTINCT 
        u.id, 
        u.name, 
        n.network_id, 
        n.perm 
FROM    users as u RIGHT OUTER JOIN 
        nets_permissions as n ON u.id = n.user_id AND n.perm<> 3 
WHERE   u.id!=3 
```

结果是这样的：

```
id  name    network_id  perm
1   Luca Niccolini  9124823324095   1
2   Irene Pippo 9124823324095   0
2   Irene Pippo 1234567812345678124 1 
```

现在我希望查询的结果是：

```
id  name    network_id  perm
1   Luca Niccolini  9124823324095   1
2   Irene Pippo 9124823324095   0 
```

事实上，我想将网络上的权限授予某些用户。这个用户已经可以在网络上拥有权限，也可以在其他网络上。因此，在这种情况下，用户 Luca 仅在网络 9124823324095 上具有权限，但用户 Irene 在两个不同的网络上具有两个权限。我想授予网络 9124823324095 的权限，所以我不想要第三条记录。

但是我无法使用网络 ID 进行过滤，因为我可以拥有一个对其他网络具有权限的用户，但在我的网络上却没有。

换句话说，我希望-对于在查询中有两条或更多记录的用户，我只能获取我的网络的记录-对于只有一条记录的用户，我可以获取该记录。

很难解释。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T13:56:24.007

以下代码适用于大多数 SQL 方言：

```
select id, name, network_id, perm
from (select t.*, count(*) over (partition by u.id) as NumRowsForUser
      from (SELECT  DISTINCT u.id, u.name, n.network_id, n.perm 
            FROM    users as u RIGHT OUTER JOIN 
                    nets_permissions as n ON u.id = n.user_id AND n.perm<> 3 
            WHERE   u.id!=3
           ) t
     ) t
where NumRowsForUser > 1 and network_id = '9124823324095' or
      NumRowsForUser = 1 
```

您是否考虑过网络上有多个权限但没有一个适合您的网络的情况？这些被您的条件排除在外。

# ruby-on-rails - 如何配置 ActionMailer 以在开发模式下有条件地发送电子邮件？

> ID：12605949
> 
> 赞同：0
> 
> 时间：2012-09-26T16:08:51.677
> 
> 标签：ruby-on-rails, config, actionmailer

我已将 ActionMailer 配置为在开发模式下通过 gmail 发送电子邮件。

配置/开发.rb

```
config.action_mailer.default_url_options = { host: ENV["MY_DOMAIN"] }
config.action_mailer.raise_delivery_errors = true
config.action_mailer.delivery_method = :smtp
config.action_mailer.perform_deliveries = true
config.action_mailer.smtp_settings = {
  address: "smtp.gmail.com",
  port: 587,
  domain: ENV["MY_DOMAIN"],
  authentication: "plain",
  enable_starttls_auto: true,
  user_name: ENV["MY_USERNAME"],
  password: ENV["MY_PASSWORD"]
} 
```

我有这个设置，所以我的设计师可以触发测试 html 电子邮件并将其发送到指定地址，以便在各种浏览器/设备中进行测试。

但是，在开发模式下，我想阻止所有未发送到该指定电子邮件地址的外发电子邮件。

我正在寻找类似的东西：

```
config.action_mailer.perform_deliveries = target_is_designated_email_address? 
```

...但我需要以某种方式检查 Mail 实例，以确保将其发送到正确的地址。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:14:53.433

查看 ActionMailer 使用的邮件 gem 中的邮件拦截器。[您可以在 ActionMailer 上的这个 railscast](http://railscasts.com/episodes/206-action-mailer-in-rails-3?view=asciicast)中找到更多关于它们的信息。

直接来自railscast的相关部分：

创建一个类来重定向邮件。

```
class DevelopmentMailInterceptor
  def self.delivering_email(message)
    message.subject = "[#{message.to}] #{message.subject}"
    message.to = "eifion@asciicasts.com"
  end
end 
```

仅在开发模式下注册拦截器：

```
Mail.register_interceptor(DevelopmentMailInterceptor) if Rails.env.development? 
```

然后它只会将主题行替换为“[youremail@blahbalh.com] Some subject”，并将消息重定向到您想要的任何人。

# google-closure-compiler - 用于 Clojurescript 的闭包库 2029 jar

> ID：12605951
> 
> 赞同：1
> 
> 时间：2012-09-26T16:08:57.870
> 
> 标签：google-closure-compiler, google-closure-library, clojurescript

我一直无法找到用于[clojurescript](http://mvnrepository.com/artifact/org.clojure/google-closure-library)的新 google-closure-library 的 .jar 。

（源代码下载可在此处获得：[http](http://code.google.com/p/closure-library/downloads/list) ://code.google.com/p/closure-library/downloads/list ）

我也试过（不成功）通过closurebuilder编译它。（我已经尝试按照建议使用 deps.js 编译它，但这也不起作用）。

如果有人可以将我指向 2029 jar 或教我如何从源代码编译它，那就太好了。

谢谢！

编辑：澄清一下，我*不是*指闭包编译器，我指的是一个 .jar，例如在这里找到：http: [//mvnrepository.com/artifact/org.clojure/google-closure-library](http://mvnrepository.com/artifact/org.clojure/google-closure-library)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T19:51:24.933

我认为他们在这里可能有些混乱。[闭包库](https://developers.google.com/closure/library/)是一组 JavaScript 源文件。您可以使用[Closure Compiler](https://developers.google.com/closure/compiler/)编译它们，但它们仍然只会生成一个 JavaScript 文件。

[Closure Compiler](https://developers.google.com/closure/compiler/)作为jar 文件分发。它也可以作为源代码下载并手动编译到 jar 中。它用于将 JavaScript 文件编译成“更好”的 JavaScript。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-05T14:29:04.070

您可以轻松地将闭包库 jar 到您选择的任何版本。

只需阅读如何从其他地方找到的 java 文档中 jar 一个目录。完成后，您可以使用

```
 mvn install:install-file -DgroupId="foo" -DproductId="bar" -Dversion="baz" -Dpackaging=jar -Dfile="the jarred file" 
```

将其安装到您的本地 .m2 存储库。然后 Lein 应该能够根据需要将其拉入。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T22:40:11.880

闭包库不经常发布，但您可以从 SVN 获取最新版本（或者如果您不使用最新版本，则可以获取您正在使用的编译器版本附近的内容）它被设计为“始终良好”（即为什么它不经常发布）。

# error-handling - 在 Dynamics AX 2012 中显示自定义错误消息

> ID：12605952
> 
> 赞同：3
> 
> 时间：2012-09-26T16:08:59.647
> 
> 标签：error-handling, microsoft-dynamics, axapta, dynamics-ax-2012, custom-error-handling

我是 AX 的新手，想知道如何显示自定义错误消息或警告。我一直在寻找解决方案，并在*msdn*链接中找到了以下内容；

> 您可以选择在 Web 应用程序的对话框中显示自定义错误消息，方法是让插件抛出**InvalidPluginExecutionException**异常，并将自定义消息作为 Message 属性值。

但我不知道如何使用它。

[这个链接](http://kamalblogs.wordpress.com/2011/05/05/creating-a-custom-compiler-output-type-and-displaying-in-the-compiler-output-in-dynamics-ax-2009/)可以帮助完成这项任务吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:00:16.240

AX 中的警告和错误消息由 Infolog 系统处理。在 X++ 中，您可以使用[info](http://msdn.microsoft.com/en-us/library/global.info.aspx "全球::信息")、[warning](http://msdn.microsoft.com/en-us/library/global.warning.aspx "全球预警")或[error](http://msdn.microsoft.com/en-us/library/global.error.aspx "全局::错误")方法将消息添加到 Infolog。通常，您会抛出这些方法的返回值以生成异常：

```
throw error("My error message."); 
```

在企业门户页面上，大多数页面都有一个 Infolog Web 部件。您可以使用 .NET Business Connector 代理中的 Info 对象将消息添加到 Infolog。请参阅 MSDN 中的主题[使用信息日志](http://msdn.microsoft.com/en-us/library/cc606908.aspx "使用信息日志")。

# c# - 选中列表框项目检查到列表框

> ID：12605956
> 
> 赞同：0
> 
> 时间：2012-09-26T16:09:16.137
> 
> 标签：c#, checkedlistbox

我正在使用此代码将所选项目传递给名为 SelectedList 的列表框。问题是当我检查我的 chekedlistbox 的一项时没有任何反应，这可能是什么问题？

```
 public void checkedListBox1_ItemCheck(object sender, ItemCheckEventArgs e)
        {
            if (e.NewValue == CheckState.Checked)
            {
                selectedList.Items.Add(checkedListBox1.SelectedItem.ToString());

            }
            else
            {
                selectedList.Items.Remove(checkedListBox1.SelectedItem.ToString());
            }
        }
        public void checkedListBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            selectedList.Text = checkedListBox1.SelectedItem.ToString();
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T18:02:48.873

这个问题的解决方案是事件选项卡中没有激活事件checkedListBox1_ItemCheck，这就是编译器在调试过程中没有考虑它的原因。

# ruby - 使用参数多次运行 rspec

> ID：12605960
> 
> 赞同：0
> 
> 时间：2012-09-26T16:09:30.113
> 
> 标签：ruby, rspec, rspec2

我正在开发一个转换器，我使用 rspec 检查转换的值是否正确。为了检查值，我需要加载转换后的文件（用 JSON 编写）。所以我准备了一种方法来将转换后的文件加载到`spec_helper.rb`. 我用钩子在每个规范文件中调用这个方法`:before`（但这不是这个问题的本质）。

然后，我想对多个转换结果运行相同的 rspec 测试。这是一个公正的形象。

```
file_names = [ 'file1', 'file2', 'file3' ] # OR use Dir.glob to get some file paths
file_names.each do |file|
  all_rspec_tests( file )
end 
```

请告诉我迭代某些文件名的最佳实践。我尝试了几种模式。

1) 在 Rakefile 中，我们不能用 RakeTask 传递变量。然后我使用了 ENV（环境变量），如下所示：[如何将命令行参数传递给 Rspec 脚本？](http://www.ruby-forum.com/topic/1537620) 它没有按预期工作。特别是，RakeTast 不会按顺序运行（看起来像是在另一个线程上运行），因此每个测试都没有正确运行。

2）制作一个模块并用它扩展RSpec：使用 [不同的过滤器多次运行相同的规范](https://github.com/rspec/rspec-core/issues/470) 但这是使用JavaScript的一种模式。而且我不知道这种方法会成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T20:21:08.160

我通常使用：

```
system "rspec \"%s\" --format CustomFormatter --require environment" % file 
```

但是您需要一个包含两个文件 custom_formatter.rb 和 environment.rb 的文件夹“spec”

custom_formatter.rb：

```
require "rspec/core/formatters/base_text_formatter"
require 'yaml'
class CustomFormatter < RSpec::Core::Formatters::BaseTextFormatter
  def initialize(output)
    super(output)
  end
  def example_started proxy
  end
  def example_passed proxy
    p "\tPassed: " + proxy.description
  end
  def example_failed proxy
  end
  def example_group_started group
  end
  def example_group_finished group
  end
end 
```

环境.rb：

```
require "rubygems"
require "watir-webdriver"
require "watir-webdriver/wait"
require "test/unit"
require 'system/report_html_template'
require "system/logger"
require "system/report"
require "rspec"

include Selenium
include Watir

RSpec.configure do |config|
    config.fail_fast = true
    config.before(:all) do
    end
    config.after(:all) do
    end
end 
```

# wcf - WCF + REST：自动支持相关资源的超链接？

> ID：12605962
> 
> 赞同：0
> 
> 时间：2012-09-26T16:09:33.067
> 
> 标签：wcf, rest

在 RESTful Web 服务中，在响应中包含指向相关资源的超链接而不是相关资源本身或仅包含 ID 被视为最佳实践。¹

如何在 WCF 中做到这一点？有什么支持吗？我不想手动创建这些 URL。

* * *

¹参见例如[http://rest.elkstein.org/2008/02/rest-design-guidelines.html](http://rest.elkstein.org/2008/02/rest-design-guidelines.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T00:00:42.750

您可以使用 WCF 的 RESTful 支持，但我不确定您是否可以通过编程方式生成指向资源 URL 的超链接。

[http://msdn.microsoft.com/en-us/magazine/dd315413.aspx#id0070034](http://msdn.microsoft.com/en-us/magazine/dd315413.aspx#id0070034)

另一种方法是完全放弃 WCF，只将服务编写为 asp.net MVC 项目，您可以使用路由引擎生成 URL

# c++ - WaitForSingleObject : 如何从 _beginthreadex 获取句柄

> ID：12605966
> 
> 赞同：3
> 
> 时间：2012-09-26T16:09:41.960
> 
> 标签：c++, multithreading

大家好，这是我的代码

```
#include "StdAfx.h"
#include <iostream>
#include <windows.h>
#include <process.h>  

unsigned int __stdcall threadproc(void* lparam)
{
    std::cout << "my thread" << std::endl;
    return 0;
}

int main()
{
    unsigned  uiThread1ID = 0;

    uintptr_t th = _beginthreadex(NULL, 0, threadproc, NULL, 0, &uiThread1ID);
     WaitForSingleObject(th, INFINITE/*optional timeout, in ms*/);
    return 0;
} 
```

但我收到以下错误消息

错误 C2664：“WaitForSingleObject”：无法将参数 1 从“uintptr_t”转换为“HANDLE”

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-26T16:15:08.367

您需要将`uintptr_t`类型转换为类型，这在[本页](http://msdn.microsoft.com/en-us/library/kdzttdcb.aspx)`HANDLE`的第二个示例中进行了演示，更具体地说：

```
HANDLE hThread;
hThread = (HANDLE)_beginthreadex(...); 
```

（注意：这仅适用于`_beginthreadex`）

# c# - : 使用 REGEX 提取名字首字母和姓氏

> ID：12605968
> 
> 赞同：-2
> 
> 时间：2012-09-26T16:09:43.720
> 
> 标签：c#, regex, split

我有一个巨大的名字列表，必须从中提取名字首字母和姓氏。请在下面找到示例名称：

> T.-P。SU
> H. SPRONG
> G. VAN MEER
> C. PERRONE CAPANO
> EC PARKER-ATHILL
> RJ BALICE-GORDON
> DB VAZQUEZ SANROMAN
> BPC CHEN
> JP Bennett, Jr
> T.-K. 库克-卢克亚诺夫

预期输出：

TP SU
H SPRONG
G VAN MEER
C PERRONE CAPANO
EC PARKER-ATHILL
RJ BALICE-GORDON
DB VAZQUEZ SANROMAN
BPC CHEN
JP BENNETT JR
TK KUKKO-LUKJANOV
我已经使用了拆分功能来拆分它们。我们能否有更好的正则表达式来正确解析它们。请建议。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:17:56.277

以下正则表达式适用于您的示例数据：

```
((?:[A-Z][-. ]+)+) ([- A-Z]+(?:, \w+)?) 
```

示例：[http ://www.rubular.com/r/cM87Prp2to](http://www.rubular.com/r/cM87Prp2to)

第 1 组将是第一个名称，第 2 组将是第二个名称。这导致以下组，如果其中任何一个不是您所期望的，请更详细地编辑您的问题：

```
T.-P. SU -> (T.-P.) (SU)
H. SPRONG -> (H.) (SPRONG)
G. VAN MEER -> (G.) (VAN MEER)
C. PERRONE CAPANO -> (C.) (PERRONE CAPANO)
E. C. PARKER-ATHILL -> (E. C.) (PARKER-ATHILL)
R. J. BALICE-GORDON -> (R. J.) (BALICE-GORDON)
D. B. VAZQUEZ SANROMAN -> (D. B.) (VAZQUEZ SANROMAN)
B. P. C. CHEN -> (B. P. C.) (CHEN)
J. P. BENNETT, Jr -> (J. P.) (BENNETT, Jr)
T.-K. KUKKO-LUKJANOV -> (T.-K.) (KUKKO-LUKJANOV) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-06T19:39:43.890

这是我的解决方案。我的目标不是提供最简单的解决方案，而是提供一种可以采用各种（有时很奇怪）名称格式的解决方案，并在名字和姓氏首字母（或在单名的情况下）单个首字母的情况下生成最佳猜测。

我还尝试以相对国际友好的方式编写它，使用 unicode 正则表达式，尽管我没有任何为多种外国名称（例如中文）生成首字母的经验，尽管它至少应该生成一些可用的东西代表人，在两个字符之下。例如，用韩语给它取一个名字，如“행운의 복숭아”，会产生 행복，正如你所预料的那样（尽管这在韩国文化中可能不是正确的做法）。

```
/// <summary>
/// Given a person's first and last name, we'll make our best guess to extract up to two initials, hopefully
/// representing their first and last name, skipping any middle initials, Jr/Sr/III suffixes, etc. The letters 
/// will be returned together in ALL CAPS, e.g. "TW". 
/// 
/// The way it parses names for many common styles:
/// 
/// Mason Zhwiti                -> MZ
/// mason lowercase zhwiti      -> MZ
/// Mason G Zhwiti              -> MZ
/// Mason G. Zhwiti             -> MZ
/// John Queue Public           -> JP
/// John Q. Public, Jr.         -> JP
/// John Q Public Jr.           -> JP
/// Thurston Howell III         -> TH
/// Thurston Howell, III        -> TH
/// Malcolm X                   -> MX
/// A Ron                       -> AR
/// A A Ron                     -> AR
/// Madonna                     -> M
/// Chris O'Donnell             -> CO
/// Malcolm McDowell            -> MM
/// Robert "Rocky" Balboa, Sr.  -> RB
/// 1Bobby 2Tables              -> BT
/// Éric Ígor                   -> ÉÍ
/// 행운의 복숭아                 -> 행복
/// 
/// </summary>
/// <param name="name">The full name of a person.</param>
/// <returns>One to two uppercase initials, without punctuation.</returns>
public static string ExtractInitialsFromName(string name)
{
    // first remove all: punctuation, separator chars, control chars, and numbers (unicode style regexes)
    string initials = Regex.Replace(name, @"[\p{P}\p{S}\p{C}\p{N}]+", "");

    // Replacing all possible whitespace/separator characters (unicode style), with a single, regular ascii space.
    initials = Regex.Replace(initials, @"\p{Z}+", " ");

    // Remove all Sr, Jr, I, II, III, IV, V, VI, VII, VIII, IX at the end of names
    initials = Regex.Replace(initials.Trim(), @"\s+(?:[JS]R|I{1,3}|I[VX]|VI{0,3})$", "", RegexOptions.IgnoreCase);

    // Extract up to 2 initials from the remaining cleaned name.
    initials = Regex.Replace(initials, @"^(\p{L})[^\s]*(?:\s+(?:\p{L}+\s+(?=\p{L}))?(?:(\p{L})\p{L}*)?)?$", "$1$2").Trim();

    if (initials.Length > 2)
    {
        // Worst case scenario, everything failed, just grab the first two letters of what we have left.
        initials = initials.Substring(0, 2);
    }

    return initials.ToUpperInvariant();
} 
```

# javascript - 将 div 的宽度设置为与其最近的兄弟相同

> ID：12605969
> 
> 赞同：0
> 
> 时间：2012-09-26T16:09:50.367
> 
> 标签：javascript, jquery, html, css, styling

当 div 的宽度为 时，是否可以将 div 的宽度设置为与其最接近的兄弟相同`width: auto;`？

在[我的 jsFiddle 中](http://jsfiddle.net/crmpicco/6zCt6/)，你会看到我有一个红色、绿色和蓝色的 div。我希望蓝色 div 调整为绿色 div 的大小（这是动态的）。因此，如果绿色 div 的结果为 200px，那么我希望蓝色 div 为 200px。

最初我以为我可以将蓝色 div 放入绿色 div 并设置`display: inline-block`在孩子身上，但这不起作用。

因此，如果蓝色 div 的内容增加，那么它不会将绿色 div 的宽度（或容器 div）推出。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T17:14:23.030

如果您愿意使用 JavaScript，您可以在要跟踪的 div 发生变化时调整宽度。使用 jQuery，很简单：

```
$(document).ready(function() {
    // Function to sync the sizes of the divs
    function syncSize() {
        $("#banner_description").width($(".banner_secondary_title").outerWidth(true));
    }

    // Sync the size when a change is made
    $(".banner_secondary_title").resize(function(e) {
        syncSize();
    });

    // Initial sync after document setup
    syncSize();
}); 
```

这是添加了此代码的[jsFiddle](http://jsfiddle.net/huaZv/)的分支，此外，我在辅助标题中添加了更多文本以扩展它以显示它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T16:25:44.193

将蓝色 div 放入绿色 div 中，向蓝色 div 添加一个非常高的负数`margin-right`（`-999em`或其他东西），这样它就不会拉伸其父绿色 div。

替代解决方案：将蓝色 div 放在绿色 div 内，给蓝色 div a `position:absolute`。给绿色 div 一个`padding-bottom`匹配蓝色 div 的高度。这仅在蓝色 div 的高度不是动态的情况下才有效。

# pdf - 在 emacs 中增加 PDF 文本的字体大小

> ID：12605971
> 
> 赞同：3
> 
> 时间：2012-09-26T16:09:52.110
> 
> 标签：pdf, emacs

我正在阅读 emacs 中的 PDF 文件。如何增加它的字体大小？使用公共缓冲区，大小可以通过 Cx C-+ 命令增加，但这不适用于 emacs 中的 PDF。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T16:12:16.287

`+`做的伎俩，当然`-`减少了尺寸。

请注意，PDF 在 emacs 中呈现为图像。因此，您只能调整整个图像的大小，而不能更改字体大小。

# javascript - $(function() { }) 是否完全等同于 $(document).ready(function() { })

> ID：12605972
> 
> 赞同：0
> 
> 时间：2012-09-26T16:09:56.013
> 
> 标签：javascript, jquery

> **可能重复：**
> [这些 jQuery 就绪函数之间有什么区别？](https://stackoverflow.com/questions/2662778/what-is-the-difference-between-these-jquery-ready-functions)
> [是 $(function(){}); 和 $(“文档”).ready(function(){}); 相同？](https://stackoverflow.com/questions/4384651/are-function-and-document-readyfunction-the-same)
> [用 $(function 等启动 javascript 代码](https://stackoverflow.com/questions/12008843/start-javascript-code-with-function-etc)

今天，在查看一些 javascript 代码时，我发现某些代码部分写在一个`$(function() { })`部分中，而其他部分代码写在一个部分中`$(document).ready(function() { })`。所以我的第一反应是：好吧，有什么区别？

经过一番谷歌搜索后，我在 jQuery 教程[Getting Started with jQuery](http://docs.jquery.com/Tutorials:Getting_Started_with_jQuery)中找到了下一条语句：

> 以下是 $(document).ready(callback) 表示法的快捷方式：

```
$(function() {
    // code to execute when the DOM is ready
}); 
```

现在，问题是： 是否`$(function() { })`完全等价于`$(document).ready(function() { })`？

（还有一个“不那么全局”的间接问题是：将所有代码放在两个部分之一中对我来说安全吗？）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:10:58.100

是`$(function() { })`的，是`$(document).ready(function() { })`.

> 以下所有三种语法都是等效的：

```
$(document).ready(handler)
$().ready(handler) (this is not recommended)
$(handler) 
```

从[`.ready()`参考](http://api.jquery.com/ready/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:12:19.157

`(function() { })`并且`$(document).ready(function() { })`可以互换使用，由我们来选择我们喜欢的那个。在浏览代码时，我觉得`$(document).ready(function() { })`模式可读且易于理解。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-26T16:12:24.817

是的，它们完全相同，是的，将两者放在同一个块上是安全的（假设它们之间没有任何关系）。

# c++ - 单例方法之间的区别

> ID：12605973
> 
> 赞同：0
> 
> 时间：2012-09-26T16:09:56.310
> 
> 标签：c++, singleton

这些方法之间有什么区别，除了第一个返回一个对象，第二个返回存储 myclass 值的地址之外？我问是因为我很少看到第一种方法，在许多来源中，即使是像 Aeonsoft 这样的大企业，我总是看到使用方法 2。但是有些程序员不喜欢`&`with `return`，请赐教。

```
static myclass& getinstance()
{
    static myclass a;
    return a;
}

static myclass* getinstance()
{
    static myclass a;
    return &a;
} 
```

**编辑** 哦，伙计们，我的错，我忘记了`&`第一种方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-26T16:12:16.647

第一个没有意义，因为它返回一个*副本*。后者有点傻，因为不需要指针。

单例创建函数的常用方法是返回一个*引用*：

```
static Foo & getFoo()
{
    static Foo impl;
    return impl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T16:12:20.670

第一个 API 更好，因为返回引用而不是指针表明对象将存在（即无需测试`NULL`）。两种方式都可以让您返回多态对象（即 的子类`myclass`），因此没有区别。如果可以，您应该更喜欢返回参考。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T16:12:09.980

现在既然你已经纠正了第一种方法......

这只是风格的问题，哪种风格更受欢迎。开始使用 C 并后来转向 C++ 的人可能会自然而然地使用指针，甚至不会考虑使用引用。

* * *

第一种方法实际上并不创建单例，因为它返回对象的*副本*。

一个简单的细微变化可以解决这个问题：

```
static myclass & getinstance()
{
    static myclass a;
    return a;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-26T16:12:49.820

在第一种情况下，您将返回`a`对象的副本。在第二个中，您将返回一个指向它的指针。所以第一个函数把你的单例变成了*多吨*。

我还将修改第二个以返回引用而不是指针。

```
static myclass& getinstance()
{
    static myclass a;
    return a;
} 
```

编辑后，您似乎在第一个函数中返回对静态对象的引用，而不是副本。在这种情况下，除了函数的调用者需要在第二种情况下取​​消引用指针之外，没有什么区别。

根据经验，除非您希望能够处理`nullptr`输入/返回值，否则始终接受/返回引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-26T16:16:19.857

更喜欢通过引用返回。

这是因为永远不会混淆谁拥有该对象。如果您通过指针返回，用户可能会错误地认为他们需要删除指针，因为所有权语义不清楚。

# python - sorl-thumbnail 不创建缩略图

> ID：12605974
> 
> 赞同：4
> 
> 时间：2012-09-26T16:10:02.987
> 
> 标签：python, django, sorl-thumbnail

我遇到了一些困难`sorl-thumbnail`。

我的模板如下：

```
{% thumbnail project.image "75x75" crop="center" as im %}
<img src="{{ im.url }}" width="{{ im.width }}" height="{{ im.height }}">
{% empty %}
<p>:(</p>
{% endthumbnail %} 
```

在我呈现的网页中，我得到以下缩略图路径：

`<img src="/media/cache/ff/29/ff299c50543aa807b0fbd28faf271e63.jpg" width="75" height="75">`

现在这一切都说得通了，因为 my`MEDIA_URL`被设置为`/media/`在我的 apache 中映射`httpd.conf`到我服务器上的本地文件夹。

问题是服务器上不存在此路径，因此图像显示为断开的链接。

值得注意的是，我使用的是自定义存储对象，尽管这不应该影响事情，因为它直接通过`sorl.thumbnail ImageField`. 另外我正在使用`memcached`在服务器上运行的缓存后端。

烦人的事情是，即使我有错误，我也没有得到任何错误`THUMBNAIL_DEBUG`，`DEBUG`所以很难看出出了什么问题。我相当确定它无法将缩略图文件写入磁盘但返回成功，因为该`{% empty %}`语句没有被触发并且适当的缓存文件没有出现在服务器上。我不知道为什么，因为没有任何错误。

我有点卡在这一点上，所以任何帮助将不胜感激。

编辑：

我现在已经放弃了 sorl 并改用简单的缩略图，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-30T02:52:13.637

我和你有非常相似的问题，我不能使用`easy-thumbnails`，因为我需要从外部来源创建缩略图。我发现在暂存时使用与开发相同的数据库，所以在我渲染开发图像后，它将缓存的文件名存储到数据库中，当您尝试在暂存时渲染时，它会从相同的文件名数据库，但显然这些文件不在暂存中。

尝试运行

```
./manage thumbnail clear 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-13T14:07:55.890

Sorl did not create thumbnails for us because we used urls that were incorrectly encoded. They would contain '+' instead of ' ' or '%20' for spaces and sorl would re-encode them to '%2B' ('+' encoded). The resulting url error was suppressed and the thumbnail creation was ignored. Maybe it helps someone with this problem.

# css - CSS，不适用于 IE 7

> ID：12605975
> 
> 赞同：-5
> 
> 时间：2012-09-26T16:10:04.513
> 
> 标签：css

[http://www.aspiredesigns.com.sg/](http://www.aspiredesigns.com.sg/)这个网站在 Chrome、Firefox、IE8+ 中运行良好，但在 IE 7 中却不行

有人可以提供提示在哪里搜索等。

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T21:43:32.743

不同的浏览器处理 css 的方式不同或根本不处理。例如，与现代浏览器相比，IE7 处理得非常糟糕。

您可以查看一些图表，了解哪些浏览器支持哪些规则，哪些不支持。这里有两个链接可以帮助您入门：

[http://www.quirksmode.org/css/contents.html](http://www.quirksmode.org/css/contents.html)
[http://www.webdevout.net/browser-support-css](http://www.webdevout.net/browser-support-css)

# ruby-on-rails-3 - 安排 Rails 任务在特定时间运行

> ID：12605976
> 
> 赞同：11
> 
> 时间：2012-09-26T16:10:09.100
> 
> 标签：ruby-on-rails-3, scheduled-tasks

我目前正在创建一个 Rails 应用程序，并想了解如何安排某些任务在特定时间运行。

例如，管理员希望在早上 8:00 向他的用户发送电子邮件，并且不想为了发送该电子邮件而早起。因此，他/她会想要安排任务在那个时候发送电子邮件。

那么，有没有一种方法，或者更好的 gem，可以让任务被安排在特定时间运行？谢谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-26T16:14:33.833

我在这里首选的解决方案是[无论何时](https://github.com/javan/whenever)gem。

有了它，你就有了`schedule.rb`文件，它指定了什么时候应该做某些事情，包括运行 rake 任务、执行方法，甚至执行任意 shell 命令：

示例 schedule.rb 文件，厚颜无耻地从 When readme 中复制：

```
every 3.hours do
  runner "MyModel.some_process"
  rake "my:rake:task"
  command "/usr/bin/my_great_command"
end

every 1.day, :at => '4:30 am' do
  runner "MyModel.task_to_run_at_four_thirty_in_the_morning"
end

every :hour do # Many shortcuts available: :hour, :day, :month, :year, :reboot
  runner "SomeModel.ladeeda"
end

every :sunday, :at => '12pm' do # Use any day of the week or :weekend, :weekday
  runner "Task.do_something_great"
end

every '0 0 27-31 * *' do
  command "echo 'you can use raw cron syntax too'"
end

# run this task only on servers with the :app role in Capistrano
# see Capistrano roles section below
every :day, :at => '12:20am', :roles => [:app] do
  rake "app_server:task"
end 
```

我将Whenever 用于许多任务，包括发送每日电子邮件。

# unit-testing - Autofixture 和 WebApi 控制器

> ID：12605977
> 
> 赞同：4
> 
> 时间：2012-09-26T16:10:16.670
> 
> 标签：unit-testing, asp.net-web-api, moq, xunit, autofixture

我正在使用 AutoFixture 尝试为 WebApi 站点测试我的控制器。[如Ploeh 的博客](http://blog.ploeh.dk/2010/10/08/AutoDataTheoriesWithAutoFixture.aspx)所述，我正在使用带有 Moq 的 AutoData 功能。

我的控制器在构造函数中采用了 IDepartmentManager。这是我的测试：

```
[Theory, AutoMoqData]
public void GetCallsManagerCorrectly(
    [Frozen]Mock<IDepartmentManager> departmentManagerMock,
    DepartmentsController sut)
{
    // Fixture setup
    // Exercise system
    sut.Get();
    // Verify outcome
    departmentManagerMock.Verify(d => d.GetAllDepartments(), Times.Exactly(1));
    // Teardown
} 
```

当我运行此测试时，它失败并显示以下内容：

> GetCallsManagerCorrectly 失败：
> System.InvalidOperationException：获取理论数据时引发异常 Provision.Tests.WebApiControllerTests.DepartmentControllerTests.GetCallsManagerCorrectly：System.Reflection.TargetInvocationException：调用目标已引发异常。---> System.ArgumentException：只允许使用“http”和“https”方案。参数名称：System.Net.Http.HttpRequestMessage.set_RequestUri(Uri value)处的值

首先，这仍然是编写这些测试的有效且推荐的方式吗？我喜欢它使一切变得多么小。

其次，我应该怎么做才能解决这个问题？如果我将测试更改为：

```
[Theory, AutoMoqData]
public void GetCallsManagerCorrectly(
    [Frozen]Mock<IDepartmentManager> departmentManagerMock)
{
    // Fixture setup
    DepartmentsController sut =
        new DepartmentsController(departmentManagerMock.Object);
    // Exercise system
    sut.Get();
    // Verify outcome
    departmentManagerMock.Verify(d => d.GetAllDepartments(), Times.Exactly(1));
    // Teardown
} 
```

它通过了，但是我失去了自动构建控制器的能力，如果我向构造函数添加参数仍然可以。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-26T17:13:51.050

这绝对是使用 AutoFixture 编写测试的推荐方式。这个问题很容易解决。

我建议不要像博客文章中描述的那样实现 [AutoMoqData] 属性，而是创建一个稍微不同的属性和自定义 - 一组基本上将充当整个单元测试项目的一组约定。我总是这样做，而且我总是竭尽全力为单个单元测试项目设置一组约定。一组约定帮助我保持我的测试（和[SUT](http://xunitpatterns.com/SUT.html) s）一致。

```
public class AutoMyWebApiDataAttribute : AutoDataAttribute
{
    public AutoMyWebApiDataAttribute()
        : base(new Fixture().Customize(new MyWebApiCustomization()))
    {
    }
} 
```

MyWebApiCustomization 可以这样定义：

```
public class MyWebApiCustomization : CompositeCustomization
{
    public MyWebApiCustomization()
        : base(
            new HttpSchemeCustomization(),
            new AutoMoqCustomization(),
        )
    {
    }

    private class HttpSchemeCustomization : ICustomization
    {
        public void Customize(IFixture fixture)
        {
            fixture.Inject(new UriScheme("http"));
        }
    }
} 
```

请注意附加的 HttpSchemeCustomization 类 - 这应该可以解决问题。

请注意，[定制的顺序很重要](http://blog.ploeh.dk/2012/07/31/TheOrderOfAutoFixtureCustomizationsMatter.aspx)。

# java - Java charAt() 方法在 For 循环中崩溃

> ID：12605978
> 
> 赞同：0
> 
> 时间：2012-09-26T16:10:18.510
> 
> 标签：java, file, input

以下代码应从 .dat 文件中读取 5 个字符串，然后从每个字符串中打印每个单独的字符。

```
File file = new File("tictactoe.dat");
Scanner scan = new Scanner(file);
String str = "";
int x;
for ( x = 0; x < numGames; x++) {
    str = scan.nextLine();
    for (int i = 0; i < str.length(); i++) {
        out.println(str.charAt(i));
    }
} 
```

但是程序会抛出一个`StringIndexOutOfBoundsException`. 没有任何问题`Scanner`，因为测试表明它可以很好地拾取我文件中的每一行。但是当试图获取并打印每个字符串中的某个字符时，程序会崩溃。

奇怪的是，循环之外的`charAt()`工作没有错误。

为什么在循环中调用方法会导致程序崩溃？

**更新：**我在复制我使用的代码时犯了一些荒谬的错误。请参阅上面的更新代码。此外，程序“崩溃”是由于`StringIndexOutOfBoundsException`我没有捕捉到的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T16:13:47.463

我原以为错误会出现`StringIndexOutOfBoundsException`在您打印第一行的第一个字母和第二行的第二个字母等时。由于您不检查是否存在这样的字母，因此会出现该行的位置没那么长。

如果这不是原因，我会

*   阅读问题中的异常发布。
*   使用调试器单步调试代码以查找代码中的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:17:46.347

您混淆了行数，每行中的字符数

```
File file = new File("tictactoe.dat");
Scanner scan = new Scanner(file);
String str = "";
int x;
int y;
for ( x = 0; x < numGames; x++) {
    str = scan.nextLine();
    for (y = 0; y<str.length(); y++)
    {
        out.println(str.charAt(y));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-26T16:23:10.763

你的循环没有做你想做的事。你说：

> ...然后从每个字符串中打印每个单独的字符。

但它实际上做的是获取第 1 行，只打印该行的第一个字符，然后获取第二行并打印第二个字符、第三行和第三个字符，依此类推。如果您在单独的行上打印每个字符，则需要在第一个循环内有第二个循环，该循环遍历字符串中的字符，以便打印所有单独的字符。

```
char[] characters = str.toCharArray();
for (int i = 0; i < characters.length; i++) {
    System.out.println(characters[i]);
} 
```

甚至更好，如果您使用 for-each 循环：

```
for (char c : str.toCharArray()) {
    System.out.println(c);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-26T16:17:17.033

你的逻辑有些奇怪。假设 DAT 为：

```
12345
67890
abcde
fghij
klmno 
```

您的代码将打印：

```
1
7
c
i
o 
```

毕竟，您调用“scanLine”numGames 次并在每个新行上获取 X 位置。

# python - 从 python 查询 elasticsearch 有什么更好的方法？

> ID：12605982
> 
> 赞同：7
> 
> 时间：2012-09-26T16:10:22.810
> 
> 标签：python, elasticsearch

有图书馆可以做到这一点 pyes 和 pyelasticsearch。pyelasticsearch[网站](https://github.com/rhec/pyelasticsearch)看起来不错，[pyes](https://github.com/aparo/pyes/tree/master/tests)采取其他方法但也可以。

另一方面，此代码有效并且非常简单。

```
import urllib2 as urllib
import json
import pprint

query = {
    "from":0,
    "size":10,
    "query":{
        "field" : { 
            "name" : "david"
        }
    },
    "sort":[
        {"name":"asc"},
        {"lastName":"asc"}
    ]
}

query = json.dumps(query)
response = urllib.urlopen(
    'http://localhost:9200/users/users/_search',
    query
)

result = json.loads( response.read() )

pprint.pprint(result) 
```

所以我正在考虑使用简单的代码而不是学习库的技巧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-27T11:23:44.410

您使用 REST API 与 ElasticSearch 交互的方法没有任何问题。

Pyes 和其他库提供了 REST API 的包装器，因此您可以编写 Python 代码，而不是自己构建 JSON 查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-02T12:30:04.470

请注意，您的问题中显示的代码片段在 Python 3 中不起作用。必须对查询字符串进行编码，并在您的请求中添加内容标头。所以在 Python 3 中执行以下操作：

```
from urllib.request import urlopen, Request
import json
import pprint

query = {
    "from":0,
    "size":10,
    "query":{
        "field" : { 
            "name" : "david"
        }
    },
    "sort":[
        {"name":"asc"},
        {"lastName":"asc"}
    ]
}
# encode your json string
query = json.dumps(query).encode("utf-8")
# add a content-type header
request = Request('http://localhost:9200/users/users/_search', data=query, headers={'Content-Type': 'application/json'})
response = urlopen(request)
result = json.loads( response.read() )
pprint.pprint(result) 
```

# javascript - Extjs 4：检索组件的正确方法是什么？

> ID：12605986
> 
> 赞同：1
> 
> 时间：2012-09-26T16:10:39.853
> 
> 标签：javascript, extjs, extjs4, components

> **可能重复：**
> [Extjs4.1、up() down() 与 Ext.getCmp()](https://stackoverflow.com/questions/11872261/extjs4-1-up-down-versus-ext-getcmp)

我使用 ExtJS（总是使用第 4 版）进行了很多工作，但我仍然无法理解什么是检索组件的正确方法。

有很多方法可以做到这一点，都是全局的：

*   `Ext.getCmp ()`
*   `Ext.ComponentQuery.query ()`

和内部：

*   `Ext.container.AbstractContainer.down ()`
*   `Ext.container.AbstractContainer.up ()`
*   `Ext.container.AbstractContainer.nextSibling ()`
*   `Ext.container.AbstractContainer.nextNode ()`
*   `Ext.container.AbstractContainer.previousSibling ()`
*   `Ext.container.AbstractContainer.previousNode ()`
*   `Ext.container.AbstractContainer.child ()`
*   `Ext.container.AbstractContainer.findParent ()`
*   `Ext.container.AbstractContainer.findParentBy ()`
*   `Ext.container.AbstractContainer.query ()`
*   `Ext.container.AbstractContainer.queryBy ()`
*   `Ext.container.AbstractContainer.queryById ()`

现在，如果我为每个组件（如按钮、复选框、网格等）使用**id**，我肯定会始终得到它们，即使主容器的布局发生变化：我可以按照全局方式进行操作。但是，这种搜索可能会影响应用程序的性能：老实说，我不知道如何`Ext.getCmp ()`工作，但我认为搜索是在整个变量命名空间中完成的。

所以，这个问题导致我偶尔遵循第二种方式。当我更改主容器的布局时，问题就来了。举个例子如下：

```
Ext.create ('Ext.panel.Panel', {
    title: 'Main Container' ,
    width: 300 ,
    renderTo: Ext.getBody () ,
    items: [{
        xtype: 'textfield' ,
        fieldLabel: 'First name'
    } , {
        xtype: 'textfield' ,
        id: 'tfLastName' ,
        fieldLabel: 'Last name'
    } , {
        xtype: 'checkbox' ,
        boxLabel: 'Alive'
    }] ,

    bbar: {
        xtype: 'toolbar' ,
        items: [{
            xtype: 'button' ,
            text: 'Get CheckBox' ,
            // Gets the checkbox starting from the second textfield (Last Name)
            handler: function (btn) {
                var tfLastName = Ext.getCmp ('tfLastName');
                console.log (tfLastName.nextSibling ('checkbox'));
            }
        }]
    }
}); 
```

当我单击*Get Checkbox*按钮时，它会返回我请求的复选框，但是如果我更改*主容器*项目的顺序（假设将复选框声明放在*姓氏*文本字段之前），它会按预期返回 null。现在，这就是**问题所在**：我不想在更改视图时更改逻辑。

**所以，我的问题是：**

*   *是否存在允许我在不使用 ID 的情况下检索组件并在视图更改时保持逻辑不变的功能？*
*   *是否存在进行组件检索的正确方法？如果是，是什么？*

# html - 在外部 div 的底部设置一个 div

> ID：12605987
> 
> 赞同：1
> 
> 时间：2012-09-26T16:10:43.323
> 
> 标签：html, css, vertical-alignment

我遇到了一些 CSS 问题

我有*N*个外部 div，具有可变的动态高度。
每个外部 div 将有一个内部 div，它应该在外部 div 的底部。

所以，使用绝对位置的技巧，如[如何将内部 div 与外部 div 的底部对齐？](https://stackoverflow.com/questions/2042643/how-do-i-align-an-inner-div-with-the-bottom-of-an-outer-div)不可能。

我做了一个 jsfiddle 供你玩：http:
[//jsfiddle.net/xSTtp/4/](http://jsfiddle.net/xSTtp/4/)

**HTML：**

```
<div class="outside">
    <div class="inside">
        xyz
    </div>
</div>
<div class="outside">
    <div class="inside">
        xyz
    </div>
</div> 
```

**CSS：**

```
.outside { 
    /* the height will be dynamic, 100px is just for the demo */
    height: 100px;
    border: 1px solid green;
}

.inside {
    border: 1px solid red;
    /* not working*/
    /*  display: table-cell;
            vertical-align: bottom;
            */
    /* i want the red at the bottom of the green, not in the page */
    position: absolute;
    bottom: 0;
} 
```

谢谢约尔格

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-26T16:13:47.573

为什么是位置：绝对；底部：0；不可能？

包装器 div 或父 div 需要有一个`position: relative;`or`position: absolute;`才能将子级放置在底部。

```
.outside { 
    position: relative;
    border: 1px solid green;
}

.inside {
    position: absolute;
    border: 1px solid red;
    bottom: 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T16:14:59.780

[http://jsfiddle.net/xSTtp/6/](http://jsfiddle.net/xSTtp/6/) If you know the height of the parent div, you can just specify top: [parent height-child height]

# linq-to-xml - 使用命名空间向 xelement 添加属性

> ID：12605988
> 
> 赞同：0
> 
> 时间：2012-09-26T16:10:44.873
> 
> 标签：linq-to-xml

我开发了以下代码来生成`xElement`（C# 语言）：

```
new XElement("Transmission",
     new XAttribute(XNamespace.Xmlns.GetName("xmlns").LocalName, "http://www.irs.gov/efile"),
     new XAttribute(XNamespace.Xmlns + "xsi", xsi),
     new XAttribute(xsi + "schemaLocation", schemaLocation),
            ........ 
```

三个命名空间声明如下：

```
 private static XNamespace xsi = XNamespace.Get("http://www.w3.org/2001/XMLSchema-instance");
    private static XNamespace schemaLocation = XNamespace.Get("http://www.irs.gov/efile ./ExtendedCommon/Transmission.xsd");
    private static XNamespace xmlnsLocation = XNamespace.Get("http://www.irs.gov/efile"); 
```

但是，当我从中生成 xml 时，出现以下错误：

```
The prefix '' cannot be redefined from '' to 'http://www.irs.gov/efile' within the same start element tag. 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:50:02.017

我想你想要

```
XNamespace df = "http://www.irs.gov/efile";
XNamespace xsi = "http://www.w3.org/2001/XMLSchema-instance";
string schemaLocation = "ExtendedCommon/Transmission.xsd";

XElement t = new XElement(df + "Transmission",
  new XAttribute(XNamespace.Xmlns + "xsi", xsi),
  new XAttribute(xsi + "schemaLocation", string.Format("{0} {1}", df, schemaLocation))); 
```

这将生成 XML

```
<Transmission xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.irs.gov/efile ExtendedCommon/Transmission.xsd" xmlns="http://www.irs.gov/efile" /> 
```

# java - GUI计算java中的按钮编码错误

> ID：12605994
> 
> 赞同：1
> 
> 时间：2012-09-26T16:11:00.070
> 
> 标签：java

好的，首先我正在处理的项目有两个包，第一个是包含 invoiceCalculations.java 的 murach.business 第二个是包含 InvoiceForm.java(JFrame) 和 SwingValidator.java 的 murach.forms

我需要为Calculate 按钮的actionPerformed 事件添加一个事件处理程序。向此事件处理程序添加代码，从表单中获取客户类型和小计，使用 InvoiceCalculations 类中的 calculateDiscountPct 方法根据这些值计算折扣百分比，计算折扣金额和总计，并格式化和显示值表格。

该表单有 5 行，例如第一个客户类型、小计、折扣百分比、折扣金额和总计，下面是计算和退出按钮。

这是堆栈跟踪：

```
run:
Exception in thread "AWT-EventQueue-0" java.lang.NumberFormatException: For input string: "R"
    at sun.misc.FloatingDecimal.readJavaFormatString(FloatingDecimal.java:1222)
    at java.lang.Double.parseDouble(Double.java:510)
    at murach.forms.InvoiceForm.calculateButtonActionPerformed(InvoiceForm.java:183)
    at murach.forms.InvoiceForm.access$300(InvoiceForm.java:15)
    at murach.forms.InvoiceForm$4.actionPerformed(InvoiceForm.java:81)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2028)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2351)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236)
    at java.awt.Component.processMouseEvent(Component.java:6382)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3275)
    at java.awt.Component.processEvent(Component.java:6147)
    at java.awt.Container.processEvent(Container.java:2083)
    at java.awt.Component.dispatchEventImpl(Component.java:4744)
    at java.awt.Container.dispatchEventImpl(Container.java:2141)
    at java.awt.Component.dispatchEvent(Component.java:4572)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4619)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4280)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4210)
    at java.awt.Container.dispatchEventImpl(Container.java:2127)
    at java.awt.Window.dispatchEventImpl(Window.java:2489)
    at java.awt.Component.dispatchEvent(Component.java:4572)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:704)
    at java.awt.EventQueue.access$400(EventQueue.java:82)
    at java.awt.EventQueue$2.run(EventQueue.java:663)
    at java.awt.EventQueue$2.run(EventQueue.java:661)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:98)
    at java.awt.EventQueue$3.run(EventQueue.java:677)
    at java.awt.EventQueue$3.run(EventQueue.java:675)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.AccessControlContext$1.doIntersectionPrivilege(AccessControlContext.java:87)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:674)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:296)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:201)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:196)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:188)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
BUILD SUCCESSFUL (total time: 25 seconds) 
```

到目前为止，当我点击代码的计算按钮时出现错误。这是我当前的代码，你能告诉我我需要对代码进行哪些更改以及为什么吗？

```
private void calculateButtonActionPerformed(java.awt.event.ActionEvent evt) {                                                
      // TODO add your handling code here:
   double c = Double.parseDouble(customertypeTextField.getText());
   double s = Double.parseDouble(subtotalTextField.getText());
   pct d = Percent.parsepct(discountpercentTextField.getText());
   double a = Double.parseDouble(discountamountTextField.getText());
   double total = InvoicCalculations.calculateTotal(c, s, d);
   NumberFormat currecny = NumberFormat.getCurrencyInstance();
   totalTextField.setText(currency.format(total));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T18:29:41.550

其中一个文本字段包含一个字母，`Double.parseDouble`由于它无效而导致失败。从[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Double.html#parseDouble%28java.lang.String%29)：

> 抛出：
> 
> ```
> NullPointerException - if the string is null
> 
> NumberFormatException - if the string does not contain a parsable double. 
> ```

为了防止这种情况，您可以：

*   确保当您点击计算按钮时，字段仅包含有效数据。您可以通过使用[InputVerifier](http://docs.oracle.com/javase/7/docs/api/javax/swing/InputVerifier.html)来做到这一点。
*   或在解析输入有效之前验证输入是否有效，如果无效则显示弹出窗口或错误消息。

其他人也提到过，这里要强调的很重要：[不要`Double`用于代表金钱](https://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency)。