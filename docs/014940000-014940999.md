# StackOverflow 问答 14940000-14940999

# wordpress - 在媒体库中按文件名搜索

> ID：14940004
> 
> 赞同：5
> 
> 时间：2013-02-18T15:44:32.250
> 
> 标签：wordpress

在管理面板中，在媒体 -> 库中，如何在“搜索媒体”框中按**文件名搜索媒体文件？**

我知道文件名放在数据库的“GUID”列中，但我不知道在哪里可以找到负责媒体搜索的代码，例如。MySQL `select`。

现在它只在`post_title`列中搜索。我也试图找到`$_REQUEST['s']`，但没有结果。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T19:34:38.150

我在[WordPress Developers #45153](https://wordpress.stackexchange.com/q/45153/12615)中找到了解决方案，但这里有所有相关的问答：

*   [如何使用自定义字段过滤帖子列表？](https://wordpress.stackexchange.com/q/16637/12615)

*   [将管理员后端搜索限制为标题](https://wordpress.stackexchange.com/q/45153/12615)

*   [更好地搜索 Wordpress 管理后端](https://wordpress.stackexchange.com/q/10685/12615)

```
add_filter( 'posts_search', 'guid_search_so_14940004', 10, 2 );

function guid_search_so_14940004( $search, $a_wp_query ) 
{
    global $wpdb, $pagenow;

    // Only Admin side && Only Media Library page
    if ( !is_admin() && 'upload.php' != $pagenow ) 
        return $search;

    // Original search string:
    // AND (((wp_posts.post_title LIKE '%search-string%') OR (wp_posts.post_content LIKE '%search-string%')))
    $search = str_replace(
        'AND ((', 
        'AND (((' . $wpdb->prefix . 'posts.guid LIKE \'%' . $_GET['s'] . '%\') OR ', 
        $search
    ); 

    return $search;
} 
```

有一个建议我需要验证，但看起来不错：

> 更改`$_GET['s']`为`$a_wp_query->query_vars['s']`以便在通过 ajax POST 调用搜索功能时也可以使用，例如在使用“创建图库”对话框时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-07-04T22:03:33.360

快速更新此答案。上面的代码仅适用于媒体库选项页面，不适用于将图像插入内容区域时发生的任何 ajax 请求。

```
add_filter( 'posts_search', 'guid_search_so_14940004', 10, 2 );

function guid_search_so_14940004( $search, $a_wp_query ) {
    global $wpdb, $pagenow;

    // Only Admin side && Only Media Library page
    if ( ! is_admin() ) {
        return $search;
    }

    if ( 'admin-ajax.php' !== $pagenow && 'upload.php' !== $pagenow ) {
        return $search;
    }

    if ( isset( $_REQUEST['action'] ) && 'query-attachments' === $_REQUEST['action'] && ! empty( $_REQUEST['query']['s'] ) ) {
        $search_string = $_REQUEST['query']['s'];
    }

    if ( isset( $_REQUEST['s'] ) || empty( $_REQUEST['s'] ) ) {
        $search_string = $_REQUEST['s'];
    }

    if ( ! isset( $search_string ) || empty( $search_string ) ) {
        return $search;
    }

    // Original search string:
    // AND (((wp_posts.post_title LIKE '%search-string%') OR (wp_posts.post_content LIKE '%search-string%')))
    $search = str_replace(
        'AND ((',
        'AND (((' . $wpdb->posts . '.guid LIKE \'%' . $wpdb->esc_like( $search_string ) . '%\') OR ',
        $search
    );

    return $search;
} 
```

# .net - 如何在 datagridview 中跟踪排序

> ID：14940006
> 
> 赞同：0
> 
> 时间：2013-02-18T15:44:36.080
> 
> 标签：.net, winforms, datagridview

我们有一堆绑定到 BindingSource 的 DataGridView，然后又绑定到了 SortableBindingList。

由于这个控件使用起来非常痛苦，我正在尝试围绕它编写一个薄包装器，以便大量与网格相关的代码变得更加可重用。通过使其成为通用类 GridWrapper，这还为获取选定项目等常见事物提供了类型安全优势和“无噪音”代码：

```
/// <summary>
/// Gets the item bound to the selected row if and only if exactly one row is selected; otherwise null.
/// </summary>
public T SelectedItem
{
    get
    {
        var rows = grid.SelectedRows;
        return (rows.Count == 1 ? rows[0].DataBoundItem as T : null);
    }
} 
```

这导致代码像

```
var selectedCustomer = Customers.SelectedItem; 
```

这肯定比写和读更容易

```
Customer selectedCustomer;
if (customersGridView.SelectedRows.Count == 1)
   selectedCustomer = (Customer)customersGridView.SelectedRows[0].DataBoundItem; 
```

并达到同样的效果。无论如何，我*为什么要写一个包装器。*我的问题与其他事情有关，我现在将解决这个问题。

我希望包装器能够知道网格的默认排序应该是什么，而且还可以跟踪用户执行的排序。这适用于主从网格之类的东西，我想在由于选择主中的另一个项目而反弹时保留详细网格的当前排序。因此，如果我按 Column3 降序对详细信息进行了排序，我希望用户代码执行类似的操作

```
Detail.Bind(GetDetailData(Master.SelectedItem)); 
```

其中 Detail 是详细信息网格的包装器，而 Master 是主网格的包装器。

为此，我从一个简单的类开始存储排序状态：

```
public class SortInfo
{
    public SortInfo(DataGridViewColumn col)
    {
        this.Column = col;
        this.Direction = ListSortDirection.Ascending;
    }

    public DataGridViewColumn Column;
    public ListSortDirection Direction;
} 
```

包装器将处理程序附加到网格的 Sorted 事件，以跟踪用户排序。我还有一个 Sort 方法可以*将*状态对象中的排序应用于网格：

```
void Sort()
{
    if (GetBoundList() != null)
        grid.Sort(sortInfo.Column, sortInfo.Direction);
} 
```

很简单。（GetBoundList 返回通过 BindingSource 绑定到网格的 SortableBindingList，如果无法这样做，则返回 null。）

现在的问题是：如果我在绑定网格时调用 Sort，我会收到一个 InvalidOperationException，抱怨只有在绑定到 IBindingList 时才能对网格进行排序！至少可以说这很奇怪，因为在调用 DataGridView.Sort 之前我做的最后一件事是检查情况是否如此。

为了解决上述问题（只要我不明白就很难做任何其他事情！）我尝试将处理程序附加到 DataBindingComplete 并在那里调用 Sort。这会导致另一个问题：当用户尝试对网格进行排序时，SortableBindingList 会重置绑定，从而导致 DataBindingComplete 触发。由于这发生在列表的 ApplySortCore 方法（我认为）返回之前，它也发生在 Sorted 事件之前。因此，当用户尝试按 Column2 排序时，我的包装器会按 Column1 （或任何默认值）排序，从而覆盖用户排序。效果很奇怪，尽管相同的列标题显示相同的排序箭头，但您可能会看到一些行移动；这是因为物品*是*正在排序，它们只是按照用户的要求首先被排序，然后默认情况下你才能真正注意到。如果排序依据的列包含多个相等的值，则结果顺序可能与原始顺序不同...

在我看来，这个问题与使用包装器本身无关。也就是说，如果我尝试在一个表单中使用我的所有代码执行此操作，我将遇到完全相同的问题，而我无法轻松地重用它。

所以问题是是否有人知道如何绕过它。在我写这篇文章时，我想到了：仅在绑定数据时附加 DataBindingComplete 的处理程序，当它触发时，对网格进行排序，然后分离处理程序。在我看来，这实际上应该解决这两个问题。

但是，既然我已经写了很多，我还是会发布这个！如果上面的想法确实有效，我会把它作为答案发布。

同时，这是导致“用户排序被覆盖”表单的包装器代码：

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Windows.Forms;

namespace Snippets.SortableGrid
{
    public class GridWrapper<T> where T: class
    {
        public GridWrapper(DataGridView grid, DataGridViewColumn defaultSortColumn)
        {
            this.sortInfo = new SortInfo(defaultSortColumn);
            this.grid = grid;
            grid.Sorted += new EventHandler(grid_Sorted);
            grid.DataBindingComplete += new DataGridViewBindingCompleteEventHandler(grid_DataBindingComplete);
        }

        public void Bind(IEnumerable<T> data)
        {
            BindingSource bs = grid.DataSource as BindingSource;
            if (bs == null)
                grid.DataSource = bs = new BindingSource();

            bs.DataSource = new SortableBindingList<T>(data);
        }

        /// <summary>
        /// Gets the item bound to the selected row if and only if exactly one row is selected; otherwise null.
        /// </summary>
        public T SelectedItem
        {
            get
            {
                var rows = grid.SelectedRows;
                return (rows.Count == 1 ? rows[0].DataBoundItem as T : null);
            }
        }

        SortInfo sortInfo;
        DataGridView grid;

        ListSortDirection ToListSortDirection(SortOrder order)
        {
            return (order == SortOrder.Descending ? ListSortDirection.Descending : ListSortDirection.Ascending);
        }

        void Sort()
        {
            if (GetBoundList() != null && sortInfo.Column != null)
                grid.Sort(sortInfo.Column, sortInfo.Direction);
        }

        SortableBindingList<T> GetBoundList()
        {
            var bs = grid.DataSource as BindingSource;
            return (bs != null ? (bs.DataSource as SortableBindingList<T>) : null);
        }

        void grid_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
        {
            Sort();
        }

        void grid_Sorted(object sender, EventArgs e)
        {
            sortInfo.Column = grid.SortedColumn;
            sortInfo.Direction = ToListSortDirection(grid.SortOrder);
        }
    }

    public class SortInfo
    {
        public SortInfo(DataGridViewColumn col)
        {
            this.Column = col;
            this.Direction = ListSortDirection.Ascending;
        }

        public DataGridViewColumn Column;
        public ListSortDirection Direction;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:54:06.397

我并没有完全使用这段代码很长时间，但这个想法似乎确实有效！

更改绑定到

```
public void Bind(IEnumerable<T> data)
{
    BindingSource bs = grid.DataSource as BindingSource;
    if (bs == null)
        grid.DataSource = bs = new BindingSource();

    grid.DataBindingComplete += new DataGridViewBindingCompleteEventHandler(grid_DataBindingComplete);
    bs.DataSource = new SortableBindingList<T>(data);
} 
```

和处理程序

```
void grid_DataBindingComplete(object sender, DataGridViewBindingCompleteEventArgs e)
{
    Sort();
    grid.DataBindingComplete -= grid_DataBindingComplete;
} 
```

我现在可以重新绑定“网格”（即用一些新数据调用 GridWrapper.Bind），并且网格确实“记住”了它的排序状态。这就是我想要开始的。

--

我真的不明白为什么在 2013 年有必要为这种事情编写任何*代码*。我们得到的控件应该对像这个内置的常见和有用的东西有更好的支持。

虽然我在咆哮，但我也非常怀疑事件总是最好的方式来吸引事物的整个想法。在人们尝试做 MVC 或 MVP 或类似的世界中，为什么不给我们一些更紧密一致的东西——更类似于这个包装器的东西——开箱即用？如果控件允许您至少在某些方面将它们基本上视为数据结构，那么实现视图会容易得多。

# java - 如何从 ArrayList 中获取类实例？

> ID：14940007
> 
> 赞同：4
> 
> 时间：2013-02-18T15:44:38.783
> 
> 标签：java

我是 Java 新手，我正在使用的代码很大程度上不是我自己的，所以请多多包涵……

我有一个包含同一个类的几十个实例的数组列表，我想从中依次提取一些变量的值。

我创建了一个迭代器，并且可以愉快地遍历数组列表，当我尝试提取类实例时问题就来了。使用 .get(index) 返回一个对象，我不知道如何将对象转换为类类型以访问变量或提取其自身类型的实例。

谁能建议如何解决这个问题？

提前致谢。

编辑：对不起，我应该在第一个实例中包含代码。

```
ArrayList TopicResults = results.getTopicResults(TopicNum);
ListIterator TopicResultsiter = TopicResults.listIterator();
while(TopicResultsiter.hasNext()){
                    int idx = TopicResultsiter.nextIndex();
                    ResultsList.Result result = TopicResults.get(idx);
                    String DocID = result.docID;
                    System.out.println(DocID);
                } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T15:46:19.907

只需使用铸造：

```
MyClass classInstance = (MyClass)myArray.get(0); 
```

假设列表中的所有实例都是类型，`MyClass`否则您可能会得到`ClassCastException`

使用泛型迭代应该更容易、更安全：

```
List<MyClass> myList = new ArrayList<MyClass>(); 
for (MyClass classInstance : myList) {
     classInstance.doSomething();
} 
```

括起来的`<>`类型指定了允许存储在列表中的对象的类型，因此在编译时您就可以安全地使用列表成员，而无需检查它们的类型。（可从 J2SE 1.5+ 获得）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:46:58.377

`MyType object = (MyType) list.get(index);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T15:49:46.140

您可以将 ArrayList 的“get”方法返回的对象直接分配给与 ArrayList 相同类型的属性。

例如，如果您有一个

```
ArrayList<MyType> myList; 
```

只需使用

```
MyType myObjectf = myList.get(0); 
```

...应该在没有显式类型转换的情况下工作

# c# - 如果更新不仅在输出目录中的文件较旧时替换，为什么还要复制？

> ID：14940011
> 
> 赞同：4
> 
> 时间：2013-02-18T15:44:45.787
> 
> 标签：c#, visual-studio-2010, visual-studio, visual-studio-2012

当我将 Access DB 文件添加到我的项目并将其设置为 Copy if newer 时，我发现了这个问题： ![在此处输入图像描述](../Images/789edb521b46bdd497552dee00c450ab.png)

我认为只有当输出目录中的文件比项目目录中的文件旧时才会将其复制到输出目录。

事实上，即使输出目录中的文件较新，它也会被复制：例如，当我通过我的程序编辑并保存它时。

我还在另一个项目中使用另一种文件（.txt）对其进行了测试。

[MSDN](http://msdn.microsoft.com/en-us/library/0c6xyb66.aspx)说

> 如果仅当文件比输出目录中同名的现有文件更新时才复制文件，请选择如果更新则复制。

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T08:14:09.253

事实证明，您正在重建您的项目。重建本质上只是一个清理，然后是一个构建。这意味着您的文件被删除了，并且作为常规构建的一部分，它被复制了（因为没有更新的版本）。

# mvvm - Observable Collection 在 MVVM 中的属性更改时通知

> ID：14940012
> 
> 赞同：10
> 
> 时间：2013-02-18T15:44:47.090
> 
> 标签：mvvm, observablecollection, inotifypropertychanged, inotifycollectionchanged

我正在尝试将可观察集合绑定到 DataGrid，我想在 datagrid 中编辑任何行时通知。我的代码适用于在添加或删除记录时发出通知，但在编辑记录时不会发出通知。请让我知道这是否是在 MVVM 中使用可观察集合进行绑定的正确方法，以及我是否缺少某些东西。提前致谢。

```
public class studentViewModel : INotifyPropertyChanged
{
    #region constructor

    public studentViewModel()
    {
        _student = new studentModel();
        myCollection = new ObservableCollection<studentModel>();
        myCollection.Add(_student);
        myCollection.CollectionChanged += new System.Collections.Specialized.NotifyCollectionChangedEventHandler(myCollection_CollectionChanged);

    }

    void myCollection_CollectionChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
    {
        //throw new NotImplementedException();
        System.Windows.MessageBox.Show(e.Action.ToString());
    }

    #endregion

    #region properties

    studentModel _student;
    ObservableCollection<studentModel> _myCollection;

    public ObservableCollection<studentModel> myCollection
    {
        get { return _myCollection; }
        set
        {
            if (_myCollection != value)
            {
                _myCollection = value;
                raisePropertyChange("myCollection");
            }
        }
    }

    public int rollNo
    {
        get { return _student.rollNo; }
        set
        {
            if (value != _student.rollNo)
            {
                _student.rollNo = value;
                raisePropertyChange("rollNo");
            }
        }
    }

    public string firstName
    {
        get { return _student.firstName; }
        set
        {
            if (value != _student.firstName)
            {
                _student.firstName = value;
                raisePropertyChange("firstName");
            }
        }
    }

    public string lastName
    {
        get { return _student.lastName; }
        set
        {
            if (value != _student.lastName)
            {
                _student.lastName = value;
                raisePropertyChange("lastName");
            }
        }
    }

    #endregion

    #region INotifyPropertyChanged Members

    public event PropertyChangedEventHandler PropertyChanged;

    public void raisePropertyChange(string propertyName)
    {
        if (PropertyChanged != null)
        {
           PropertyChanged(this,new PropertyChangedEventArgs(propertyName));
        }
    }

    #endregion
}

public class studentModel
{
    public int rollNo { get; set; }
    public string firstName { get; set; }
    public string lastName { get; set; }
} 
```

而 xaml 是

```
<Window.Resources>
    <local:studentViewModel x:Key="StudentsDetails" />
</Window.Resources>
<Grid DataContext="{StaticResource StudentsDetails}">
    <DataGrid ItemsSource="{Binding Path=myCollection, Source={StaticResource StudentsDetails}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
              Name="studentsGrid" CanUserAddRows="True" AutoGenerateColumns="True">

    </DataGrid>
</Grid> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-18T15:59:53.163

ObservableCollection 将在添加或删除记录但**不通知 UI**通知。由已更改的对象通知它已更改。

在您的情况下，当修改一行时，更改的对象类型是`studentModel`.
因此，如果您希望 UI 在该对象发生更改时得到通知，您还需要实现[INotifyPropertyChanged](http://msdn.microsoft.com/en-us/library/ms229614.aspx)`studentModel` ..

例如

```
 public class studentModel : INotifyPropertyChanged
   ..... 
```

# sql - SSMS - 存储过程中不同数量的参数

> ID：14940014
> 
> 赞同：0
> 
> 时间：2013-02-18T15:44:47.660
> 
> 标签：sql, tsql, ssms

我对放入存储过程的参数数量有疑问。我正在使用季度数据（参数格式 = 2012Q1、2012Q2 等）自动生成报告。
如果用户的第一个参数以Q1、Q2或Q3开头，则只有3年的数据，所以如果用户的第一个参数是2012Q1、2012Q2或2012Q3，则参数将在2014Q4结束......参数个数将有所不同，因为它需要 2012Q1-2012Q4 的 12 个参数、2012Q2-2014Q4 的 11 个参数和 2012Q3-2014Q4 的 10 个参数。

是否可以根据用户的第一个参数来更改声明的参数数量？？？有没有解决这个问题的好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:47:19.483

不，这是不可能的，但是您可以让参数具有默认值 NULL，现在不需要传入值。

例子

```
create procedure prTest 
@i int = null, @i2 int = null
as
select @i,@i2
go

exec prTest 1  --just pass 1 parameter, 2nd is default
go
exec prTest   -- leave all as default
go
exec prTest @i2 = 5  --to pass in a param if it is not 1st, use names
go
exec prTest null,5  --same as above 
```

另请参阅：[C# 中的可选参数和命名参数与 SQL Server 存储过程的比较](http://blogs.lessthandot.com/index.php/DesktopDev/MSTech/optional-and-named-arguments-in-c-a-comp)

与其这样做，您为什么不只使用开始日期和结束日期，或者他们可以从多年临时选择季度？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:50:27.853

我认为您可以通过仅使用两个参数来极大地简化事情。第一个将指定搜索周期的开始，第二个将指定结束。无论这些是日期、年月还是时期的名称，您都可以弄清楚，

# c# - 为什么我不能使用 Selenium Webdriver 通过 Firefox 下载文件？

> ID：14940015
> 
> 赞同：0
> 
> 时间：2013-02-18T15:45:07.207
> 
> 标签：c#, webdriver, selenium-webdriver

我尝试使用配置文件设置在 Firefox 中下载文件，但它不起作用你能告诉我我做错了什么吗？我使用的代码发布在此行下方

```
var profile = new FirefoxProfile { EnableNativeEvents = true };
profile.SetPreference("browser.download.folderList", 2);
profile.SetPreference("browser.download.manager.showWhenStarting", false);
profile.SetPreference("browser.download.dir", folderName);
profile.SetPreference("browser.download.downloadDir", folderName);
profile.SetPreference("browser.download.defaultFolder", folderName);
profile.SetPreference("browser.helperApps.neverAsk.saveToDisk", "image/jpeg,application/vnd.oasis.opendocument.text,application/vnd.oasis.opendocument.spreadsheet," +
                                                                            "application/vnd.oasis.opendocument.presentation,application/vnd.oasis.opendocument.graphics," +
                                                                            "application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet," +
                                                                            "application/vnd.ms-powerpoint,application/vnd.openxmlformats-officedocument.presentationml.presentation," +
                                                                            "application/vnd.openxmlformats-officedocument.wordprocessingml.document,application/vnd.mozilla.xul+xml," +
                                                                            "application/vnd.google-earth.kml+xml"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-27T19:04:42.823

在花了几天的时间尝试并阅读了很多可能性之后，这个对我有用，所以我与你分享，我希望它有用：我只是这样设置 webdriver firefox 配置文件：

```
firefoxProfile.setPreference("browser.helperApps.neverAsk.saveToDisk", "application/octet-stream doc xls pdf txt"); 
```

这个解决方案让我避免显示 firefox 下载弹出窗口，并且我可以使用 selenium webdriver 自动下载 XLS 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-08T10:09:55.643

Selenium 为每次运行创建一个新的 firefox 配置文件。您需要为 selenium 创建一个 firefox 配置文件并让您的 selenium 脚本使用它。如果您在此配置文件上设置了自动下载，那么它应该可以正常工作！

见这里 [http://girliemangalo.wordpress.com/2009/02/05/creating-firefox-profile-for-your-selenium-rc-tests/](http://girliemangalo.wordpress.com/2009/02/05/creating-firefox-profile-for-your-selenium-rc-tests/)

我只为 java 做过这个，但我想这个方法会是相似的。

编辑指定配置文件的java代码是：

```
ProfilesIni profile = new ProfilesIni();
FirefoxProfile ffprofile = profile.getProfile("SELENIUM");
WebDriver driver = new FirefoxDriver(ffprofile); 
```

资源：

[Selenium WebDriver 默认使用什么配置文件？](https://stackoverflow.com/questions/12031253/what-profile-does-selenium-webdriver-use-by-default)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-12T12:50:59.890

使用以下设置使其工作：

```
FirefoxOptions options = new FirefoxOptions();
FirefoxProfile profile = new FirefoxProfile();
profile.setPreference("browser.download.folderList", 2);
profile.setPreference("browser.download.dir", "C:\\Windows\\temp");
profile.setPreference("browser.download.useDownloadDir", true);
profile.setPreference("browser.helperApps.neverAsk.saveToDisk", "application/octet-stream");
options.setProfile(profile);
driver = new FirefoxDriver(options); 
```

非常重要的注意事项：在查看开发人员工具并观察文件的 Content-Type 后选择了“application/octet-stream”首选项。脚步：

1.  打开开发者工具
2.  转到网络
3.  点击链接下载pdf
4.  在网络面板中，选择第一个请求
5.  mime 类型是响应标头中的 Content-Type：

[![在此处输入图像描述](../Images/f33ccc7fe57a6c7f5900af289bd6fb37.png)](https://i.stack.imgur.com/SdSxN.png)

有关首选项设置的更多信息，请参见：http: [//toolsqa.com/selenium-webdriver/how-to-download-files-using-selenium/](http://toolsqa.com/selenium-webdriver/how-to-download-files-using-selenium/)。

# requirejs - Require.js + jQuery + BlockUI 导致不匹配错误，为什么？

> ID：14940018
> 
> 赞同：0
> 
> 时间：2013-02-18T15:45:10.950
> 
> 标签：requirejs, blockui, mismatch

为了让 jQuery 连接到 require.js，必须在 require.js*之后*加载 jQuery 。这很好用，但是一旦我包含一个名为 BlockUI 的 jQuery 插件，它会做一些奇怪的 AMD 东西（[参见 BlockUI 源代码的底部](http://malsup.github.com/jquery.blockUI.js)），我会得到一个不匹配的错误。我知道 BlockUI 导致了这种情况，因为不匹配错误会吐出整个源，如果我删除 BlockUI，一切正常。是否使用 require.js 无关紧要；仅仅包括图书馆就足够了。

看到这个jsfiddle：http: [//goo.gl/4tYE7](http://goo.gl/4tYE7)

切换到左侧的 Resources 选项卡，以验证所有脚本是否以正确的顺序加载。都好？好，现在打开控制台。战俘！到处都是血！

我不确定这是 Require.js 还是 BlockUI 错误（我打赌 BlockUI，因为它有点过时了），但是有什么解决方法吗？BlockUI 底部到底发生了什么？jQuery 在源码底部将自己暴露为 AMD 模块，为什么 BlockUI 会做类似的事情？

我对 BlockUI 的加载没有太多控制，因为它是由 Wordpress 插件（Jigoshop）加载的，所以让它工作非常重要。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:01:43.193

你是如何使用 BlockUI 的？您是需要它还是将其用作依赖项？取自 RequireJS 网站：

> 如果您在 HTML 中手动编写脚本标记以通过匿名 define() 调用加载脚本，则可能会发生此错误。
> 
> 如果您在 HTML 中手动编写脚本标记以加载具有几个命​​名模块的脚本，然后尝试加载一个匿名模块，该模块最终与手动加载的脚本中的一个命名模块具有相同的名称，也可以看到编码的脚本标签。最后，如果您使用加载器插件或匿名模块（调用 define() 且没有字符串 ID 的模块）但不使用 RequireJS 优化器将文件组合在一起，则可能会发生此错误。
> 
> 优化器知道如何正确命名匿名模块，以便它们可以与优化文件中的其他模块组合。为避免该错误：确保通过 RequireJS API 加载所有调用 define() 的脚本。不要在 HTML 中手动编写脚本标记来加载其中包含 define() 调用的脚本。如果您手动编写 HTML 脚本标记，请确保它仅包含命名模块，并且不会加载与该文件中的模块之一同名的匿名模块。如果问题是使用加载器插件或匿名模块但 RequireJS 优化器未用于文件捆绑，请使用 RequireJS 优化器。

[http://requirejs.org/docs/errors.html](http://requirejs.org/docs/errors.html)

如果你使用 jQuery 和 BlockUI 作为模块，它会工作得很好：

```
require.config({
    'paths': {
        'jquery': 'http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min',
        'blockUI': 'http://malsup.github.com/jquery.blockUI'    
    },
    'shim': {
        'blockUI': ['jquery']    
    }
})

require(['blockUI'], function(){
    // Don't return a value to the callback as it just augments the $.fn
    console.log($.fn.block);
    console.log($.fn.unblock);
}); 
```

示例 - [http://jsfiddle.net/Blink/ae4nr/](http://jsfiddle.net/Blink/ae4nr/)

> BlockUI 底部到底发生了什么？jQuery 在源码底部将自己暴露为 AMD 模块，为什么 BlockUI 会做类似的事情？

这是一种用插件等支持 AMD 的已知技术。将代码包装在函数中意味着`window.jQuery`如果没有 AMD 存在，则可以传入，否则可以将函数传递给`define`，然后一旦加载，jQuery 将传递给它。无论哪种方式，所有插件代码都关心接收用作 $ 的 jQuery 对象。

将“jquery”定义为路径是与 AMD 一起使用它的要求，因此插件作者可以安全地假设“jquery”将被定义：

```
define(['jquery'], setup); 
```

# python - Twisted Producer 延迟写入

> ID：14940021
> 
> 赞同：2
> 
> 时间：2013-02-18T15:45:34.010
> 
> 标签：python, asynchronous, twisted, deferred

在 FTP 服务器示例中，它使用 IWriteFile，它期望消​​费者我现在拥有的代码缓冲并将 4mb 块发送到服务器，但是生产者写入似乎并不期望延迟，但同步写入使用延迟是安全的?

代码

```
# Deals with giving the FTP Connection a FileConsumer then the File Consumer takes over
class EmailWriter(object):
    implements(IWriteFile)

    def __init__(self, filename):
        print "EmailWriter: %s" % filename
        self.filename = filename
        self._receive = False

    def receive(self):
        assert not self._receive, "Can only call IWriteFile.receive *once* per instance"
        self._receive = True
        # FileConsumer will close the file object
        self.consumer = EmailConsumer("user@gmail.com", "password", "gmail.com", "smtp.gmail.com", 587, self.filename)
        return defer.succeed(self.consumer)

    def close(self):
        # signals that the upload is done
        pass

# Writing Data
class EmailConsumer(object):
    # implements
    # Consumer
    def __init__(self, path, server):
        self.path = path
        self.json_db = JsonDB(path)
        self.server = server

        self.indexes = {}
        self.blocks = 0

        self.start = False
        self.stop = False
        self.producer = None
        self.streaming = None

    def registerProducer(self, producer, streaming):
        # start expecting data
        assert (self.stop == False), "Cannot register multiple times..."
        self.start = True
        self.producer = producer
        self.streaming = streaming

    def unregisterProducer(self):
        # stop expecting data
        self.start = False
        self.stop = True
        self.producer = None
        self.streming = None

    def write(self, bytes):
        # recieve data
        self.buffer += bytes
        if len(self.buffer) > BLOCK_SIZE:
            self.blocks += 1
            d = self.server.send_file(self.buffer)
            d.addCallback(self._done_uploadng, hash(self.buffer), self.blocks)
            self.buffer = ""

    def self._done_uploadng(self, result, hash, block):
        self.index[block] = (hash, self.server.account)
        self.json_db.set_data("index", self.index)

        return result 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:36:41.257

简短的回答是肯定的，返回 Deferred 是安全的。

在 twisted.internet.interfaces.IConsumer 的文档中还有另一个提示：

```
def write(data):
    """
    The producer will write data by calling this method.

    The implementation must be non-blocking and perform whatever
    buffering is necessary.  If the producer has provided enough data
    for now and it is a L{IPushProducer}, the consumer may call its
    C{pauseProducing} method.
    """ 
```

所以我建议你用 self.producer.pauseProducing() 和 self.producer.resumeProducing() 包装对 self.server.send_file() 的调用。这样您就不会以可重入的方式调用它，这对于大文件会发生。

# c++ - 启动时清除文件内容，然后追加

> ID：14940027
> 
> 赞同：0
> 
> 时间：2013-02-18T15:45:43.463
> 
> 标签：c++, append, fstream

我想在文件中附加一些文本`std::fstream`。我写了这样的东西

```
class foo() {
   foo() {}
   void print() {
      std::fstream fout ("/media/c/tables.txt", std::fstream::app| std::fstream::out);
      // some fout
   }
}; 
```

这种结构的问题是每次我运行我的程序时，文本都会附加到我之前的运行中。例如，在第一次运行结束时，文件的大小为 60KB。在第二次运行开始时，文本附加到 60KB 文件中。

为了解决这个问题，我想在构造函数中初始化 fstream，然后以附加模式打开它。像这样

```
class foo() {
   std::fstream fout;
   foo() {
      fout.open("/media/c/tables.txt", std::fstream::out);
   }
   void print() {
      fout.open("/media/c/tables.txt", std::fstream::app);
      // some fout
   }
}; 
```

此代码的问题是在执行期间和运行结束时文件大小为 0！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:57:42.790

您只需打开文件一次：

```
class foo() {
    std::fstream fout;
    foo() {
        fout.open("/media/c/tables.txt", std::fstream::out);
    }
    void print() {
      //write whatever you want to the file 
    }
    ~foo(){
        fout.close()
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:59:31.650

你的班级应该看起来更像这样：

```
#include <fstream>

class Writer
{
public:
    Writer(const char* filename) { of_.open(filename); }
    ~Writer(){ of_.close(); }
    void print() {
        // writing... of_ << "something"; etc.
        of_.flush();
    }
private:
    std::ofstream of_;
}; 
```

`Writer`请注意，在构造对象和调用析构函数时，文件流仅打开一次[`close()`](http://www.cplusplus.com/reference/fstream/ofstream/close/)，它还会自动将任何挂起的输出写入物理文件。（可选）每次将某些内容写入流后，您可以调用[`flush()`](http://www.cplusplus.com/reference/ostream/ostream/flush/)以确保输出尽快发送到您的文件。

此类的可能用法：

```
{
    Writer w("/media/c/tables.txt");
    w.print();
} // w goes out of scope here, output stream is closed automatically 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-04-21T05:17:06.863

**流出；**// 输出文件对象

**out.open (fname1,ios::out);** // 打开文件

```
 **out.clear();** // clear previous contents 
```

//////////// 写入文件的代码

例如 out<<"你好";

# python - 如何设置 chef 环境，运行 Django，发送邮件

> ID：14940031
> 
> 赞同：1
> 
> 时间：2013-02-18T15:45:54.300
> 
> 标签：python, linux, django, chef-infra

我的系统上有一个厨师环境，它运行的是 Ubuntu Linux 12.10。我似乎无法正确配置厨师以在 Django/Python 中执行 send_mail。我在哪里看。我需要什么配置厨师来做到这一点？我的 Python/Django 代码很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:15:58.647

您需要先确保在 chef 中设置了 postfix。如果没有，请登录您的 VM，如果厨师正在运行：

```
sudo apt-get install postfix 
```

然后将 gedit、nano、VIM 或您喜欢的任何内容放入主 conf 文件：

```
sudo vi /etc/postfix/main.cf 
```

最后，查看您的中继主机设置的内容并将其更改为您希望联系人电子邮件发送的电子邮件地址：

```
relayhost = mail.your-admin-email.com 
```

看看这是否不能解决你的问题。

# php - 获取两个表之间的差异？

> ID：14940032
> 
> 赞同：1
> 
> 时间：2013-02-18T15:46:00.313
> 
> 标签：php, mysql

我有两个表`a`，`a_history`如何确定何时`a`更改、删除或添加或修改了列，然后将其更改为`a_history`.

`a_history`记录一个

```
a = (id,name,status) 

a_history = (id,name,status,id_history,operation,date_op,...) 
```

例如，您将“code”varchar 添加到`a`，则`a_history`必须有“code”varchar

如果您在 中更改为“代码” `int`，`a`则`a_history`必须有“代码”`int`而不是`varchar`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:10:30.597

这是我用来比较两个 MySQL 数据库结构的脚本：

```
<?php
//------------------------------------------------------------------------------
// Define the variables we'll be using.
//------------------------------------------------------------------------------
$db1_con = NULL;
$db1_constraints = array();
$db1_dbname = 'db1';
$db1_host = 'localhost';
$db1_password = 'password1';
$db1_tables = array();
$db1_username = 'username1';

$db2_con = NULL;
$db2_constraints = array();
$db2_dbname = 'db2';
$db2_host = '123.123.123.123';
$db2_password = 'password2';
$db2_tables = array();
$db2_username = 'username2';

//------------------------------------------------------------------------------
// Connect to the databases.
//------------------------------------------------------------------------------
try{
    $db1_con = new PDO("mysql:host=$db1_host;dbname=information_schema", $db1_username, $db1_password);
    $db1_con->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE); // Try to use the driver's native prepared statements.
    $db1_con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Let's use exceptions so we can try/catch errors.
}catch(PDOException $e){
    echo "<p>Connection failed for $db1_host: " . $e->getMessage() . '</p>';
    exit;
}

try{
    $db2_con = new PDO("mysql:host=$db2_host;dbname=information_schema", $db2_username, $db2_password);
    $db2_con->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE); // Try to use the driver's native prepared statements.
    $db2_con->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); // Let's use exceptions so we can try/catch errors.
}catch(PDOException $e){
    echo "<p>Connection failed for $db2_host: " . $e->getMessage() . '</p>';
    exit;
}

if (NULL !== $db1_con && NULL !== $db2_con){
    echo "<h2>Column Analysis</h2>";
    $sql = 'SELECT * FROM information_schema.COLUMNS WHERE TABLE_SCHEMA = ? ORDER BY TABLE_NAME, ORDINAL_POSITION';
    $statement1 = $db1_con->prepare($sql);
    $statement1->bindValue(1, $db1_dbname);

    $statement2 = $db2_con->prepare($sql);
    $statement2->bindValue(1, $db2_dbname);

    if (TRUE === $statement1->execute()){
        while ($row = $statement1->fetch(PDO::FETCH_ASSOC)){
            $db1_tables[$row['TABLE_NAME']][$row['COLUMN_NAME']] = array();
            foreach ($row AS $key => $value){
                $db1_tables[$row['TABLE_NAME']][$row['COLUMN_NAME']][$key] = $value;
            }
        }
    }

    if (TRUE === $statement2->execute()){
        while ($row = $statement2->fetch(PDO::FETCH_ASSOC)){
            $db2_tables[$row['TABLE_NAME']][$row['COLUMN_NAME']] = array();
            foreach ($row AS $key => $value){
                $db2_tables[$row['TABLE_NAME']][$row['COLUMN_NAME']][$key] = $value;
            }
        }
    }

    foreach ($db1_tables AS $table => $info){
        if (!isset($db2_tables[$table])){
            echo "<p>Table <strong>$table</strong> does not exist in the SECOND database!</p>";
        }else{
            foreach ($info AS $column => $data){
                if (!isset($db2_tables[$table][$column])){
                    echo "<p>Column <strong>$column</strong> does not exist in table <strong>$table</strong> in the SECOND database!</p>";
                }else{
                    if (count($data)){
                        foreach ($data AS $key => $value){
                            if ($db1_tables[$table][$column][$key] !== $db2_tables[$table][$column][$key]){
                                echo "<p>Column <strong>$column</strong> in table <strong>$table</strong> has differing characteristics for <strong>$key</strong> (". $db1_tables[$table][$column][$key] ." vs. ". $db2_tables[$table][$column][$key] .")</p>";
                            }
                        }
                    }
                }
            }
        }
    }

    foreach ($db2_tables AS $table => $info){
        if (!isset($db1_tables[$table])){
            echo "<p>Table <strong>$table</strong> does not exist in the FIRST database!</p>";
        }else{
            foreach ($info AS $column => $data){
                if (!isset($db1_tables[$table][$column])){
                    echo "<p>Column <strong>$column</strong> does not exist in table <strong>$table</strong> in the FIRST database!</p>";
                }else{
                    if (count($data)){
                        foreach ($data AS $key => $value){
                            if ($db2_tables[$table][$column][$key] !== $db1_tables[$table][$column][$key]){
                                echo "<p>Column <strong>$column</strong> in table <strong>$table</strong> has differing characteristics for <strong>$key</strong> (". $db2_tables[$table][$column][$key] ." vs. ". $db1_tables[$table][$column][$key] .")</p>";
                            }
                        }
                    }
                }
            }
        }
    }
    echo "<h2>Constraint Analysis</h2>";

    $sql = 'SELECT * FROM information_schema.KEY_COLUMN_USAGE WHERE TABLE_SCHEMA = ? ORDER BY TABLE_NAME, ORDINAL_POSITION';
    $statement1 = $db1_con->prepare($sql);
    $statement1->bindValue(1, $db1_dbname);

    $statement2 = $db2_con->prepare($sql);
    $statement2->bindValue(1, $db2_dbname);

    if (TRUE === $statement1->execute()){
        while ($row = $statement1->fetch(PDO::FETCH_ASSOC)){
            foreach ($row AS $key => $value){
                $db1_constraints[$row['TABLE_NAME']][$row['COLUMN_NAME']][$key] = $value;
            }
        }
    }

    if (TRUE === $statement2->execute()){
        while ($row = $statement2->fetch(PDO::FETCH_ASSOC)){
            foreach ($row AS $key => $value){
                $db2_constraints[$row['TABLE_NAME']][$row['COLUMN_NAME']][$key] = $value;
            }
        }
    }

    foreach ($db1_constraints AS $table => $info){
        foreach ($info AS $column => $data){
            if (isset($db2_constraints[$table][$column])){
                if (count($data)){
                    foreach ($data AS $key => $value){
                        if ('CONSTRAINT_NAME' !== $key && $db1_constraints[$table][$column][$key] !== $db2_constraints[$table][$column][$key]){
                            echo "<p>Column <strong>$column</strong> in table <strong>$table</strong> has differing characteristics for <strong>$key</strong> (". $db1_constraints[$table][$column][$key] ." vs. ". $db2_constraints[$table][$column][$key] .")</p>";
                        }
                    }
                }
            }else{
                echo "<p>Column <strong>$column</strong> in table <strong>$table</strong> is missing a constraint in the SECOND database!</p>";
            }
        }
    }

    foreach ($db2_constraints AS $table => $info){
        foreach ($info AS $column => $data){
            if (isset($db1_constraints[$table][$column])){
                if (count($data)){
                    foreach ($data AS $key => $value){
                        if ('CONSTRAINT_NAME' !== $key && $db2_constraints[$table][$column][$key] !== $db1_constraints[$table][$column][$key]){
                            echo "<p>Column <strong>$column</strong> in table <strong>$table</strong> has differing characteristics for <strong>$key</strong> (". $db2_constraints[$table][$column][$key] ." vs. ". $db1_constraints[$table][$column][$key] .")</p>";
                        }
                    }
                }
            }else{
                echo "<p>Column <strong>$column</strong> in table <strong>$table</strong> is missing a constraint in the FIRST database!</p>";
            }
        }
    }
}
?> 
```

# cordova - 如何将图像文件数组发送到 Windows 服务器

> ID：14940034
> 
> 赞同：0
> 
> 时间：2013-02-18T15:46:04.300
> 
> 标签：cordova, jquery-mobile, send

我使用 jquery mobile 和 PhoneGap。

我有几个图像文件，我想在一个目录中发送到服务器

我的照片存储在我的手机上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:11:33.737

[FileTransfer](http://docs.phonegap.com/en/2.4.0/cordova_file_file.md.html#FileTransfer)是一个允许您将文件上传到服务器或从服务器下载文件的对象，它包含在[Apache Cordova API 参考](http://docs.phonegap.com/en/2.4.0/index.html)中。在我看来，使用 FileTransfer 对象是将文件上传到远程服务器的正确方法。

如果您检查 Apache Cordova jar 中 FileTransfer 类的实现，您将看到上传方法的签名是：

```
 /**
     * Uploads the specified file to the server URL provided using an HTTP multipart request.
     * @param source        Full path of the file on the file system
     * @param target        URL of the server to receive the file
     * @param args          JSON Array of args
     * @param callbackContext    callback id for optional progress reports
     *
     * args[2] fileKey       Name of file request parameter
     * args[3] fileName      File name to be used on server
     * args[4] mimeType      Describes file content type
     * args[5] params        key:value pairs of user-defined parameters
     * @return FileUploadResult containing result of upload request
     */
    private void upload(final String source, final String target, JSONArray args, CallbackContext callbackContext) throws JSONException { 
```

这意味着该方法期望接收作为它的第一个参数，单个源字符串（表示文件系统上文件的完整路径）而不是字符串数组。

因此，如果您选择继续使用 FileTransfer 选项，则多个 FileTransfer 上传调用可能是不可避免的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:01:48.020

使用您喜欢的技术创建 Web 服务，授予服务器上的写入权限，然后让您的 PhoneGap 应用程序将每个图像文件的图像字节连同文件名和所有者等元数据一起发送到服务器。

# java - 我在哪里存储图像以便可执行的 jar 文件可以访问它们？

> ID：14940035
> 
> 赞同：3
> 
> 时间：2013-02-18T15:46:10.483
> 
> 标签：java, eclipse, image, executable-jar

我正在使用 Eclipse 制作我创建的游戏的可执行 jar 文件，但是当我创建 jar 并运行它时，游戏中的图像不再显示。我在哪里存储图像以便 jar 文件可以访问它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T15:48:21.393

将它们放入罐子中，然后使用`Class.getResource`、或来访问它们。哪个最合适取决于您还在做什么，但您可能想要类似的东西：`Class.getResourceAsStream``ClassLoader.getResource``ClassLoader.getResourceAsStream`

```
Image image = new Image(Program.class.getResource("/images/foo.jpg")); 
```

...同一个 jar 文件中`Program.class`的*任何*类在哪里。或者，如果您将图像存储在与类相同的文件夹中（在部署时），您可以使用：

```
Image image = new Image(GameCharacter.class.getResource("knight.jpg")); 
```

这是一个*相对*的资源名称。（相对于有问题的班级。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:48:44.543

为什么不能将它们嵌入到 jar 文件中？

**更新：**我在其中一项作业中的表现如下：将图像嵌入到 jar 文件中，并且：

```
URL url = getClass().getResource("/banana.jpg");
if (url == null)
{
    // Invalid image path above
}
else
{
    // path is OK
    Image image = Toolkit.getDefaultToolkit().getImage(url);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-15T11:21:55.760

```
import java.net.URL; 

URL imageURL = getClass().getResource("/Icon.jpg");
Image img = tk.getImage(imageURL);
this.frame.setIconImage(img); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-23T01:57:29.233

我的文件结构是：

```
./ - the root of your program
|__ *.jar
|__ path-next-to-jar/img.jpg 
```

代码：

```
String imgFile = "/path-next-to-jar/img.jpg";
InputStream stream = ThisClassName.class.getClass().getResourceAsStream(imgFile);
BufferedImage image = ImageIO.read(stream); 
```

替换`ThisClassName`为您自己的，一切就绪！

# javascript - 寻找一种重构 D3.js 风格的方法链接模式的方法

> ID：14940040
> 
> 赞同：2
> 
> 时间：2013-02-18T15:46:39.970
> 
> 标签：javascript, design-patterns, d3.js, functional-programming, refactoring

在学习 D3.js 时，我看到了[一篇](http://bost.ocks.org/mike/chart/)解释其可重用代码单元背后的主要设计模式的博客文章。我已经复制了下面的相关代码。下面展示的模式正是它在 D3 代码库和插件中使用的方式（[示例](https://github.com/d3/d3-plugins/blob/master/rollup/rollup.js)）。

我对这段代码的一个问题是它有太多的属性复制粘贴。JavaScript 作为一种函数式语言，我认为我可以将样板代码重构出来，但我想不出办法来做到这一点。`arguments`and`value`参数很容易传递给通用函数，但我找不到保留对`width`and`height`属性的引用的方法。

```
function chart() {
  var width = 720, // default width
      height = 80; // default height

  function my() {
    // generate chart here, using `width` and `height`
  }

  my.width = function(value) {
    if (!arguments.length) return width;
    width = value;
    return my;
  };

  my.height = function(value) {
    if (!arguments.length) return height;
    height = value;
    return my;
  };

  return my;
} 
```

事实上，这就是它在实际 D3 代码库中的完成方式，这让我想知道是否可以进行重构，但我希望这只是一个不是高优先级问题的问题（并且新的贡献者正在这样做方式，因为这就是以前的做法）。

我正在寻找的基本上是将每个访问器的主体替换为：

```
my.height = function(value) {
  return getSet(arguments, value, whatever);
}; 
```

调用仍有一些样板，但至少逻辑是集中的，如果需要，可以只在一个地方更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:11:15.357

如果您`getSet`在 的范围内定义`chart`，它也可以访问封闭的变量。问题是，您不能通过名称字符串访问这些变量（除非您使用某种`eval`）。

您可以通过将所有私有变量包装在^(未经测试)的对象中来避免这种情况：

```
function chart() {
    var props = {
        width: 720, // default width
        height: 80 // default height
    }

    function my() {
        // generate chart here, using `width` and `height`
    }

    my.height = function(value) {
        // Call getSet with current my instance as this, 
        // 'height' as the first argument, then value
        return getSet.apply(this, arguments.slice().unshift('height'));
    };

    // Works just like your current accessors, on the props object
    function getSet(property, value) {
        if (arguments.length > 1) return props[property];
        props[property] = value;
        return this;
    }

    return my;
} 
```

问题是这并不比为每个属性编写几个类似的访问器短多少。您当前的访问器使私有变量实际上是公开的，那么为什么不放弃它们并使用公共变量呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T22:12:05.887

已经提供的另一种解决方案是定义一个“属性”函数，它返回一个函数，例如

```
function property (v) {
    return function (_) {
    if(!arguments.length)
            return v;
        v = _;
    return this;
};
} 
```

所以你可以说：

```
function chart() {
    chart.width = property.call(chart, 500);
    chart.height = property.call(chart, 500);

    chart.render = function() {
    //render logic goes here
    };

    return chart;
} 
```

我不能完全相信这一点——我认为来源实际上是 Mike Bostock（但我找不到原始帖子的链接）

我在我的许多模块中都使用了这个“属性”功能——它节省了很多烦人的打字。您可以轻松地扩充它以在传入值更改时发出事件。

# php - GROUP BY 和 ORDER BY 子句在准备语句之后（mysqli）

> ID：14940042
> 
> 赞同：1
> 
> 时间：2013-02-18T15:46:45.723
> 
> 标签：php, mysqli

我在下面有一个带有动态 where 子句的查询，但我对放置 GROUP BY 和 ORDER BY 子句的位置有疑问。我认为它根本没有被触发，因为准备语句在这些子句之前。但它并不仅仅允许我将子句行放在准备语句之上，或者它给我一个错误，在完全不同的行中说明未定义的问题。我的问题是 GROUP BY AND ORDER BY CLAUSE 应该正确放置在哪里？

代码：

```
$selectedstudentanswerqry = "
        SELECT
        sa.StudentId, StudentAlias, StudentForename, StudentSurname, q.SessionId, 
    ...
        FROM Student st
    ...
        ";

        // Initially empty
            $where = array('q.SessionId = ?');
            $parameters = array($_POST["session"]);
            $parameterTypes = 'i';

        //check if POST is empty

        // Check whether a specific student was selected

        $p_student = empty($_POST["student"])?0:$_POST["student"];  // Now if $_POST['student'] is either 0 or empty $p_student will be 0
    echo $p_student;
        switch($p_student){
        case 0:
            //dont' add where filters
            break;
        default:
            $where[] = 'sa.StudentId = ?';
            $parameters[] .= $_POST["student"];
            $parameterTypes .= 'i';
        }

        // If we added to $where in any of the conditionals, we need a WHERE clause in
        // our query
        if(!empty($where)) {
            $selectedstudentanswerqry .= ' WHERE ' . implode(' AND ', $where);
            global $mysqli;
            $selectedstudentanswerstmt=$mysqli->prepare($selectedstudentanswerqry);
            // You only need to call bind_param once

            if (count($where) == 1) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0]);
        }
        else if (count($where) == 2) {
            $selectedstudentanswerstmt->bind_param($parameterTypes, $parameters[0], $parameters[1]);
        }

        }

        $selectedstudentanswerqry .= "
          GROUP BY sa.StudentId, q.QuestionId
          ORDER BY StudentAlias, q.SessionId, QuestionNo
        "; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:38:31.140

将包含 bind_param() 的 prepare 语句和 if 语句移到 GROUP BY/ORDER BY 子句下方。`}`您在上方有一个关闭`$selectedstudentanswerqry`，可以向上移动到上方`if (count($where) == 1)`

# spring - 百里香和春天 3.0

> ID：14940043
> 
> 赞同：0
> 
> 时间：2013-02-18T15:46:43.813
> 
> 标签：spring, thymeleaf

我有一个表单，单击添加按钮会出现一个新行。如果再次单击添加按钮，则另一行将出现在前一行的下方，依此类推。用户将在这些行中输入信息。我的问题是如何将每一行中新添加的信息的值传递给spring控制器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T12:45:58.287

您的行元素应命名为要绑定在控制器中的列表对象中的列表。例子：

```
<input type="text" name="address[0]" />
<input type="text" name="address[1]" />
[...] 
```

因此，当您添加新行时，只需增加地址索引即可。

希望它能回答你的问题。

# c# - 如何防止面板出现在屏幕外？

> ID：14940051
> 
> 赞同：0
> 
> 时间：2013-02-18T15:47:19.180
> 
> 标签：c#, .net, datagridview

我有一个包含 datagridview 的表单。每当用户单击一行时，该行正下方会出现一个小面板并显示一些按钮。使用下面的代码，一切都按预期工作：

```
private void dataGridView1_CellMouseDown(object sender, DataGridViewCellMouseEventArgs e)
    {

      rowSelected = e.RowIndex;
      columnSelected = e.ColumnIndex;

      if (e.RowIndex == -1) return;

      var cellRectangle = dataGridView1.PointToScreen(
      dataGridView1.GetCellDisplayRectangle(e.ColumnIndex, e.RowIndex, false).Location);
      panel_EditButtons.Location = new Point(cellRectangle.X + 50, cellRectangle.Y);

      panel_EditButtons.Show();

    } 
```

有人可以告诉我当用户单击一行并且没有足够的空间来显示面板时如何防止面板出现在屏幕外？看看我附上的两张图片：

普通视图（当有足够的空间显示面板时，面板显示正确）

![在此处输入图像描述](../Images/924d0cd3d80f790fdcb1cba1ba27032b.png)

当我单击该行的右侧时（并且没有足够的空间来显示面板，面板出现在屏幕外）
![在此处输入图像描述](../Images/0159e2932516894e9c67f42969a568e7.png)

有人可以告诉我即使我单击行的右侧并且没有足够的空间因此面板位置仅限于屏幕宽度，我如何才能显示整个面板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:52:00.217

我知道的唯一方法是重置坐标。

```
if (panel_EditButtons.Location.X + panel_EditButtons.Size.X > width)
    panel_EditButtons.Location = new Point(width - panel_EditButtons.Size.X, panel_EditButtons.Location.Y);
// same with Y 
```

请记住，我的代码只是伪代码，它可能无法通过简单的复制粘贴来工作。

# java - 数据库android从表中选择

> ID：14940054
> 
> 赞同：2
> 
> 时间：2013-02-18T15:47:21.913
> 
> 标签：java, android, database, sqlite

我有一个数据库，我把它放在我的资产文件夹中，我正在使用这个`DataBaseHelper`类。

```
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;

import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DataBaseHelper extends SQLiteOpenHelper{

    //The Android's default system path of your application database.
    private static String DB_PATH = "/data/data/com.example.onlywithalcohol/databases/";

    private static String DB_NAME = "Alcohol_DB";

    private SQLiteDatabase myDataBase; 

    private final Context myContext;

    /**
     * Constructor
     * Takes and keeps a reference of the passed context in order to access to the application assets and resources.
     * @param context
     */
    public DataBaseHelper(Context context) {

        super(context, DB_NAME, null, 1);
        this.myContext = context;
    }   

  /**
     * Creates a empty database on the system and rewrites it with your own database.
     * */
    public void createDataBase() throws IOException{

        boolean dbExist = checkDataBase();

        if(dbExist){
            //do nothing - database already exist
        }else{

            //By calling this method and empty database will be created into the default system path
               //of your application so we are gonna be able to overwrite that database with our database.
            this.getReadableDatabase();

            try {

                copyDataBase();

            } catch (IOException e) {

                throw new Error("Error copying database");

            }
        }

    }

    /**
     * Check if the database already exist to avoid re-copying the file each time you open the application.
     * @return true if it exists, false if it doesn't
     */
    private boolean checkDataBase(){

        SQLiteDatabase checkDB = null;

        try{
            String myPath = DB_PATH + DB_NAME;
            checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

        }catch(SQLiteException e){

            //database does't exist yet.

        }

        if(checkDB != null){

            checkDB.close();

        }

        return checkDB != null ? true : false;
    }

    /**
     * Copies your database from your local assets-folder to the just created empty database in the
     * system folder, from where it can be accessed and handled.
     * This is done by transfering bytestream.
     * */
    private void copyDataBase() throws IOException{

        //Open your local db as the input stream
        InputStream myInput = myContext.getAssets().open(DB_NAME);

        // Path to the just created empty db
        String outFileName = DB_PATH + DB_NAME;

        //Open the empty db as the output stream
        OutputStream myOutput = new FileOutputStream(outFileName);

        //transfer bytes from the inputfile to the outputfile
        byte[] buffer = new byte[1024];
        int length;
        while ((length = myInput.read(buffer))>0){
            myOutput.write(buffer, 0, length);
        }

        //Close the streams
        myOutput.flush();
        myOutput.close();
        myInput.close();

    }

    public void openDataBase() throws SQLException{

        //Open the database
        String myPath = DB_PATH + DB_NAME;
        myDataBase = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);

    }

    @Override
    public synchronized void close() {

            if(myDataBase != null)
                myDataBase.close();

            super.close();

    }

    @Override
    public void onCreate(SQLiteDatabase db) {

    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }

    public boolean isOpen()
    {
        Log.v("test",myDataBase.getPath());
        return myDataBase.isOpen();
    }

    public Cursor selectRecord(int id){
        Cursor c =myDataBase.rawQuery("Select title from alcorecords where id="+id, null);
          Log.v("test", c.toString());
        return c;
    }

        // Add your public helper methods to access and get content from the database.
       // You could return cursors by doing "return myDataBase.query(....)" so it'd be easy
       // to you to create adapters for your views. 
```

谁能告诉我如何制作一个简单的选择功能。我做了这个功能

```
 public Cursor selectRecord(int id){
        Cursor c =myDataBase.rawQuery("Select title from alcorecords where id="+id, null);
          Log.v("test", c.toString());
        return c;
    } 
```

但它给了我错误，告诉我数据库中没有这样的表。我该怎么做才能让这个婴儿工作:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:11:00.790

上周我遇到了类似的问题。我认为您需要将文件扩展名附加到`DB_NAME`，因此它变为`"Alcohol_DB.sqlite"`or `".db"`。你得到消息**“数据库中没有这样的表”**的原因是创建了一个空数据库，即使它不会从你的资源中复制你的数据库。

**提示：**

如果您对数据库进行任何更改，则应删除模拟器上的应用程序数据，以便复制新数据库。为此，请访问`Settings->Applications->Manage applications->YOUR_APP->Clear data`.

如果您使用 Eclipse，您可以通过从模拟器下载数据库文件来检查文件是否已复制。为此，您需要在 Eclipse 中打开 DDMS 透视图`Window->Open perspective->Other...->DDMS`。在左侧选择您的模拟器，然后转到“文件资源管理器”选项卡。您将在 中找到您的数据库`data/data/your.package.name/database/`。选择文件并按下选项卡右上角的“拉取文件”按钮。您现在可以使用您喜欢的 SQLite 管理器检查该文件。

希望这可以帮助！

**编辑**

我还将`checkDataBase()`代码更改为：

```
private boolean checkDataBase(){

    String myPath = DB_PATH + DB_NAME;
    File dbFile = new File(myPath); 
    return dbFile.exists(); 
} 
```

# php - 字符串连接中的 PHP 错误还是我错了？

> ID：14940056
> 
> 赞同：2
> 
> 时间：2013-02-18T15:47:23.737
> 
> 标签：php

我一直认为，连接点是组合多行字符串。但是今天我在执行以下操作时遇到了麻烦：

```
if (strlen($col->getValue())>$col->getLength())
          $this->errors[]=$name." ist ".
          strlen($col->getValue())-$col->getLength().
          " too much chars!"; 
```

我认为这是 if 子句之后的一行，但 PHP 在 if 之后评估了第 2 行和第 3 行，即使这里没有给出条件。我需要做一些

```
if (strlen($col->getValue())>$col->getLength()) {
          $this->errors[]=$name." ist ".
          strlen($col->getValue())-$col->getLength().
          " Zeichen zu lang!";
} 
```

括号来获得正确的结果，而不是奇怪的解析器错误。我是否理解连接符号的用法错误？在类中创建多行常量时我注意到了同样的情况（iE 准备的 SQL 语句）。

有谁知道我在这里做错了什么。有什么我没见过的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T15:49:12.343

因为您正在使用不使用大括号的可怕做法`if`。只有条件后面的第一行被视为条件的一部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T15:49:24.913

您需要在此表达式周围加上括号：

```
(strlen($col->getValue())-$col->getLength()) 
```

# logic - 温度逻辑表达式

> ID：14940065
> 
> 赞同：0
> 
> 时间：2013-02-18T15:47:46.507
> 
> 标签：logic, boolean-logic, vdm++

我正在研究一些逻辑表达式。我想将 2 个表达式合并为一个，但不确定如何。我正在使用[VDM Overture Tool](http://www.overturetool.org/)。

我正在查看一组 5 个温度。有些超过400，有些低于，等等。

当至少 1 个温度超过 400 时，我的第一个表达式为真：

```
OverLimit: TempRead -> bool
OverLimit(temp) == temp(1) > 400 or temp(2) > 400 or 
temp(3) > 400 or temp(4) > 400 or 
temp(5) > 400;` 
```

当 set 中的所有值都超过 400 时，第二个表达式为真：

```
ContOverLimit: TempRead -> bool 
ContOverLimit(temp) ==
temp(1) > 400 and temp(2) > 400 and 
temp(3) > 400 and temp(4) > 400 and 
temp(5) > 400; 
```

我现在要表达的意思是至少有一个温度超过 400，但不是全部。

任何想法如何将这两者结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:04:07.497

听起来您正在寻找一个存在量词。我猜 TempRead 是一个序列，所以类似于：

`exists i in set inds temp & temp(i) > 400`

如果您的字面意思是“但不是全部”，您将需要一个额外的“并且存在”来检查是否存在 < 400。

顺便说一句，将两个`exists`表达式与`and`: 结合使用时要小心，您需要将整个存在表达式括起来，否则“and”子句被认为是第一个存在的一部分！

# mercurial - 如何在 Mercurial 中撤消添加/删除

> ID：14940067
> 
> 赞同：1
> 
> 时间：2013-02-18T15:47:49.107
> 
> 标签：mercurial

意外地，一些重命名变成了删除/添加。如何在 Mercurial 中修复此问题？

我还添加了一些应该从 repo 中的其他位置复制的文件（hg copy））

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T15:55:09.827

`hg rollback`: 一级撤消。将撤消最后的拉取或提交（可能很危险）

`hg backout`：创建一个与给定提交相反的新提交。净效应是撤消，但更改仍保留在您的历史记录中。

`hg strip`：从历史记录中删除（销毁）更改。删除变更集也会删除其所有子项，因此它只能用于截断历史记录，不能删除切片。

[参考](http://www.selenic.com/mercurial/hg.1.html)

# ruby-on-rails - 如何将设计连接到当前的志愿者表？

> ID：14940069
> 
> 赞同：0
> 
> 时间：2013-02-18T15:48:04.633
> 
> 标签：ruby-on-rails, authentication, devise

我正在尝试找到将志愿者表中的一些志愿者关联为可以登录系统的管理员用户的最佳方式。

我正在使用设计和 Rails。

最初我只是将 Devise 添加到现有的志愿者表中，但这绝对不是最好的解决方案，因为无论如何大多数志愿者都不会被允许登录，而且我必须为我添加的每个志愿者创建一个密码。

一种选择是创建一个单独的管理员表，但是管理员必须分别管理他们的管理员电子邮件和志愿者电子邮件（管理员也是志愿者）。

有没有办法将志愿者表关联到管理员表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:46:51.117

您可能想要的是将电子邮件放在志愿者表中并让管理员模型委托给它。那是管理员表中没有电子邮件字段。就像是：

管理员.rb

```
belongs_to :volunteer
delegate :email, :email=, :to => volunteer 
```

# python - Python 中的 Twitter API 游标

> ID：14940071
> 
> 赞同：0
> 
> 时间：2013-02-18T15:48:09.347
> 
> 标签：python, twitter

这里是一个 python 初学者，试图让[Twitter 光标](https://dev.twitter.com/docs/misc/cursoring)在我的脚本中工作，这样我就可以迭代所有属于 Twitter 列表的用户。这里的逻辑很简单。从这个 API 请求开始：

```
https://api.twitter.com/1/lists/members.json?slug=all-fox-news&owner_screen_name=foxnews&cursor=-1 
```

然后有一个 for 循环将 cursor =-1 更改为 next_cursor_str 在解析的 JSON 中的任何内容。但是，我很难将 next_cursor_str 存储为字符串。有没有人有这方面的经验？下面是我的代码，工作正常，只是没有光标循环：

```
import urllib2
import json
import csv
from time import sleep

outfile_path='Out.csv'
writer = csv.writer(open(outfile_path, 'w'))
headers = ['users']
writer.writerow(headers)

url = urllib2.Request('https://api.twitter.com/1/lists/members.json?slug=all-fox-news&owner_screen_name=foxnews&cursor=-1')
parsed_json = json.load(urllib2.urlopen(url))
print parsed_json
for tweet in parsed_json['users']:
    row = []
    row.append(str(tweet['screen_name'].encode('utf-8')))
    writer.writerow(row)
sleep(5) 
```

根据下面的答案 parsed_json["next_cursor_str"] 正是我需要的。我认为while循环在这里会很好，但它未能以0结束：

```
n = parsed_json["next_cursor_str"]
int(n)
while n is not 0:
    url = urllib2.Request('https://api.twitter.com/1/lists/members.json?slug=all-fox-news&owner_screen_name=foxnews&cursor=' + str(n))
    parsed_json = json.load(urllib2.urlopen(url))
    print parsed_json
    for tweet in parsed_json['users']:
        row = []
        row.append(str(tweet['screen_name'].encode('utf-8')))
        writer.writerow(row)
    n = parsed_json["next_cursor_str"] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:54:56.550

`next_cursor_str`只是存储在您的`parsed_json`变量中：

```
print parsed_json["next_cursor_str"]
# 1395095221152647652 
```

# php - PHP ezSQL 和到不同主机的两个连接

> ID：14940072
> 
> 赞同：0
> 
> 时间：2013-02-18T15:48:13.690
> 
> 标签：php, ezsql

我正在尝试在不同的数据库之间复制一些数据。为了测试，我在 localhost 上只使用了两个数据库，一切正常，但是一旦我尝试建立与两个不同主机的连接，它就不再工作了。我的代码如下所示：

```
$sourceDb = new ezSQL_mysql($settings['dbuser'], $settings['dbpass'], $settings['dbname'], $settings['dbhost']);

$targetDb = new ezSQL_mysql($settings['syncdbuser'], $settings['syncdbpass'], $settings['syncdbname'], $settings['syncdbhost']); 
```

错误信息是这样的：

```
Warning: Error establishing mySQL database connection.
Correct user/password? Correct hostname?
Database server running? in ez_sql_mysql.php on line 89
PHP Warning:  mySQL database connection is not active
 in ez_sql_mysql.php on line 121 
```

是否有任何我不知道的问题阻止两个连接到不同的主机？

顺便提一句。连接信息是 100% 正确的。如果我只使用一个连接，一切正常，没有任何问题！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T13:05:41.587

I still don't know why I got this error. Switched to PDO and have no problems..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-13T08:32:56.120

此解决方案适用于 3.08 版本。

问题是由连接功能引起的。函数从合约中获取数据库名称。如果变量是第一次确定的，它不会在第二次或更长时间内起作用。

拳头; 请打开 /lib 文件夹

*   根据您的数据库选择文件（等 ez_sql_mysqli.php ）

*   查找函数连接（ ....

*   将 public function connect($dbuser='', $dbpassword='', $dbhost='localhost', $charset='') 更改为 public function connect($dbuser='', $dbpassword='', $dbhost ='localhost', $charset='', **$dbname=''** )

*   在函数（连接）中找到 $this->_dbname。将其更改为 $dbname。（您可以将“ if($dbname==""){ $dbname=$this->_dbname; } " 放在 $dbname 之前）

*   在课堂上找到 quick_connect；将 $this->connect($dbuser, $dbpassword, $dbhost, true) 更改为 $this->connect($dbuser, $dbpassword, $dbhost, true, **$dname** )

*   它会起作用的。

# vb.net - ReportViewer - 以编程方式生成报告

> ID：14940074
> 
> 赞同：2
> 
> 时间：2013-02-18T15:48:27.890
> 
> 标签：vb.net, parameters, reportviewer

我正在尝试使用内置的报告查看器控件来生成我的自定义报告。Crystal Reports 很重，不能在所有客户端计算机上运行，​​因此我正在尝试构建 microsoft 报告。

此报告的目标是打印所有程序的列表。它们从数据库中获取并存储在一个列表中，如下所示：

```
Private Function ProgramDataset() As DataSet
    Dim ds As DataSet = New DataSet("Programs")
    Dim allPrograms As List(Of clsProgram) = clsProgram.GetAll()

    'Build datatable
    Dim table1 As DataTable = New DataTable("Programs")
    table1.Columns.Add("ProgramName")

    For Each program As clsProgram In allPrograms
        table1.Rows.Add(program.Name)
    Next

    ' Create a DataSet. Put the table in it
    ds.Tables.Add(table1)

    Return ds
End Function 
```

所以我的数据集被称为“程序”，它包含一个数据表，其中有一列名为“程序名称”。我添加了程序的名称，最后返回要在这里使用的数据集：

```
Dim ds As DataSet = ProgramDataset()
Dim p As New ReportParameter("programName", "Test")
frmReportViewer.ReportViewer1.ProcessingMode = Microsoft.Reporting.WinForms.ProcessingMode.Local
frmReportViewer.ReportViewer1.LocalReport.ReportPath = "..\..\Reports\rptReport.rdlc"
frmReportViewer.ReportViewer1.LocalReport.SetParameters(p)
frmReportViewer.ReportViewer1.LocalReport.DataSources.Clear()
frmReportViewer.ReportViewer1.LocalReport.DataSources.Add(New Microsoft.Reporting.WinForms.ReportDataSource("Programs", ds.Tables(0)))
frmReportViewer.ReportViewer1.DocumentMapCollapsed = True
frmReportViewer.ReportViewer1.RefreshReport()
frmReportViewer.Show() 
```

我的名为“rptReport”的报告包含一个名为“programName”的参数字段。现在我写在“测试”中，它可以工作。我的问题是，我希望它通过循环打印出所有程序名称，但我不太确定如何去做......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T14:57:04.600

顺便说一下，这是我修复它的方法：

我使用以下方法调用我的“Developpement_GenerateNomDesc”方法：

```
Public Sub ProgramDeveloppementNameDesc()
    Dim rpJobNo = New ReportParameter("rpTitle", "Liste des programmes et leurs descriptions en développement")
    Dim rpDate = New ReportParameter("rpDate", Date.Now())
    Dim HeaderParams As ReportParameter() = {rpJobNo, rpDate}
    Dim rvRDLC As New frmReportViewerRDLC

    rvRDLC.Developpement_GenerateNomDesc("Developpement_rptNomDesc.rdlc", HeaderParams, "Developpement_rptNomDescDataset")
End Sub 
```

rvRDLC 是我的 ReportViewer 控件名称。确保将参数添加到您的报告中。您可以使用 Report.rdlc 的 UI 执行此操作。或者您可以通过编程方式完成，[这里](https://stackoverflow.com/questions/5103784/how-to-add-parameters-in-report-viewer)有一个很好的指针。

```
Public Sub Developpement_GenerateNomDesc(ByRef ReportName As String, ByVal HeaderParams As ReportParameter(), ByRef DataSourceName As String)
    Dim ds As New dsPrograms
    Dim sReportDataSource As ReportDataSource
    Dim Programs = clsProgram.GetAll(0, False)

    'Reset the viewer
    rv.Reset()
    rv.LocalReport.ReportEmbeddedResource = "GestionInformatique." & ReportName
    rv.LocalReport.DataSources.Clear()
    sReportDataSource = New ReportDataSource()

    For Each param As ReportParameter In HeaderParams
        rv.LocalReport.SetParameters(param)
    Next

    'Fill the datatable
    For Each program As clsProgram In Programs
        ds.dsProgramDetails.Rows.Add(program.Name, program.Description)
    Next

    sReportDataSource.Name = DataSourceName
    sReportDataSource.Value = ds.dsProgramDetails
    rv.LocalReport.DataSources.Add(sReportDataSource)
    'rv.PrinterSettings.DefaultPageSettings.Landscape = True
    rv.RefreshReport()
    Me.Show()
End Sub 
```

这将使用 DataSet“dsPrograms”生成报告以填写 report.rdlc 中的信息。使用我的类对象“clsProgram”填充数据集，其中包含有用的信息，例如名称、描述、DateCreated 等。

# opengl - 如何使用 glDrawElementsBaseVertex 从 VBO 网格中选择单个三角形？

> ID：14940077
> 
> 赞同：2
> 
> 时间：2013-02-18T15:48:39.373
> 
> 标签：opengl, opengl-3

所以我有一个简单的立方体“网格”：

6 个立方体面是 12 个三角形，因此 36 个“顶点”组织为 36 个索引，重复使用 8 个唯一顶点位置、6 个唯一顶点法线和 4 个唯一顶点-texcoords。

此索引网格存储在 VBO/IBO 对中，可能在其之前或之后有其他网格，因此此处建议使用 base-vertex。

现在我可以像这样在一次绘制调用中完全正确地渲染整个立方体：

```
gl.DrawElementsBaseVertex(
    gl.TRIANGLES, gl.Sizei(36), gl.UNSIGNED_INT,
    gl.PtrOffset(nil, uintptr(myMeshIndexBufOffset)),
    gl.Int(myMeshIndexBufBaseIndex)) 
```

但是，现在我只想绘制“前 4 个三角形”（也就是“第一个”2 个立方体面）——**使用 4 个绘制调用而不是 1 个（因为纹理绑定可能发生在两者之间）**，我真的处于关于如何正确指定*count*和*basevertex*参数的损失。

那么对于单个三角形，我只*需要*假设我需要指定计数 3。对于 12 个三角形，我必须使用 36 才能成功渲染完整的立方体，因此单个三角形的 3 是有意义的。然后它从元素数组中选择 3 个“索引条目”（这里定义为每个条目三个 uint32）。正确的？

但是我无法弄清楚——无论是通过逻辑推理还是通过实验——现在如何在此处指定基顶点。具体来说，我需要将自己的偏移量添加到已知的“立方体网格基础索引”中。如果我要在一个循环中分别使用 glDrawElementsBaseVertex() 所有单独的 12 个三角形：

```
for i := 0; i < 12; i++ {
    gl.DrawElementsBaseVertex(
        gl.TRIANGLES, gl.Sizei(3), gl.UNSIGNED_INT,
        gl.PtrOffset(nil, uintptr(myMeshIndexBufOffset)),
        (i * fooBar) + gl.Int(myMeshIndexBufBaseIndex))
} 
```

*那么...有没有人知道上面的fooBar*到底应该代表什么？

这很烦人：实际上，理论上我很确定我*确实完全*理解了[glDrawElementsBaseVertex 规范](http://www.opengl.org/wiki/GLAPI/glDrawElementsBaseVertex)，但实际上没有任何东西可以正确地单独渲染选择单个三角形。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:03:38.847

明白了……我突然意识到，在从元素数组缓冲区中获取基础顶点之后，它被添加到索引**值**中，而不是作为偏移量添加到从元素数组缓冲区中读取的**位置**。 ..哎哟。所以似乎我必须抵消*indices*参数而不是*basevertex*参数，并且似乎我现在得到了想要的结果。

# objective-c - 带有子层的 CALayer hitTest

> ID：14940089
> 
> 赞同：3
> 
> 时间：2013-02-18T15:49:13.830
> 
> 标签：objective-c, core-animation, calayer, hittest

我有一个由根层和 2 个 CALayer 子类组成的结构。这 2 层也包含一层。

这里有一个方案：

```
ROOT LAYER 
    |
    |------- LAYER A
    |           |---------BG
    |
    |
    |--------LAYER B
                |---------BG 
```

如果我调用它的`hitTest`方法，`ROOT LAYER`它会将最内层返回到层次结构中。因此，如果用户点击`LAYER A`我会`BG`得到`LAYER A`.

```
//In this example hitResult will contains the BG of LAYER A or the BG of LAYER B
CALayer *hitResult = [rootLayer hitTest:point)]; 
```

如何停止响应者链并直接获取`LAYER A`或`LAYER B`从发送到的 HitTest 获取`ROOT LAYER`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T12:46:21.467

如果这些层是您自己的 CALayer 子类，那么您可以在那里覆盖`hitTest:`或`containsPoint:`执行您自己的逻辑。

在您的背景层中覆盖`containsPoint:`和返回`NO`将阻止它们从它们的超级层`hitTest:`实现中返回。

`hitTest:`或者，您可以在 A 层和 B 层中覆盖并`self`在它们包含该点时返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-17T16:27:29.690

仅作记录，请注意，如果您设置了一个空 z 比例，图层将不再通过命中测试。

```
// BG layer won't receive clicks
bgLayer.transform = CATransform3DMakeScale(1, 1, 0) 
```

它可以是一种在不进行子类化的情况下使图层处于非活动状态的方法，但我猜 Apple 可以随时更改此行为，因此我不会推荐它。

对于那些可能想知道为什么子层不再获得点击的人，我无论如何都会放弃这个答案。只要确保在任何缩放中都通过 1 in sz 即可。

我自己在这个棘手的问题上浪费了几个小时。

# c# - 更新 LongListSelector

> ID：14940091
> 
> 赞同：1
> 
> 时间：2013-02-18T15:49:17.860
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我在我的 App LongListSelector 中有这就是我设置项目来源的方式：

```
historylist.ItemsSource = new List<VideoItem>(historyRep.historyArray); 
```

现在，如果从数组中删除了一个项目，则添加了一个新项目或编辑了任何项目，我再次调用此方法以刷新 ItemSource：

```
historylist.ItemsSource = new List<VideoItem>(historyRep.historyArray); 
```

但是现在我注意到这种方法产生了一些问题，我想知道这是否是刷新\更新 LongListSelector 的好方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:07:44.543

嗨，这根本不是一个好方法。您应该使用 MVVM 模式，并通过 xaml 分配 ItemsSource。但是，如果您希望它完成，请使用**ObservableCollection**而不是 List。我希望这会有所帮助。

# android - android.database.sqlite.SQLiteCursor@

> ID：14940093
> 
> 赞同：1
> 
> 时间：2013-02-18T15:49:18.930
> 
> 标签：android, database, android-sqlite, android-spinner, sqliteopenhelper

我得到了那个错误。我怎样才能消除 android.database.sqlite.SQLiteCursor@ 而不是单独的 INTEGER 值？我怎样才能从我的消费者表中获取整数值，即 AccountID 并将其作为 FOREiGN KEY 保存到我的消费表中？我的微调器处理程序

```
private void loadSpinnerData() {
    // database handler

    SQLiteDatabase db = new DatabaseOpenHelper(this).getWritableDatabase();

    spinner = (Spinner)findViewById(R.id.spinner);
    // Spinner Drop down elements
    // List<String> lables = db.getAllLabels();
    Cursor c = db.rawQuery(
            "SELECT AccountID AS _id, ConsumerName FROM Consumers", null);
    startManagingCursor(c);

    // Creating adapter for spinner
    String[] from = new String[] { "_id"};
    int[] to = new int[] { android.R.id.text1 };
    SimpleCursorAdapter dataAdapter = new SimpleCursorAdapter(this,
            android.R.layout.simple_spinner_item, c, from, to);

    // Drop down layout style - list view with radio button
    dataAdapter
            .setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);

    // attaching data adapter to spinner
    spinner.setAdapter(dataAdapter);
    // set spinner listener to display the selected item id
    mContext = this;

    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {
        public void onItemSelected(AdapterView<?> parent, View view,
                int position, long id) {
            // On selecting a spinner item
            //String label = parent.getItemAtPosition(position).toString();
            Cursor c = (Cursor)parent.getItemAtPosition(position);
             mSpinnerSpeciesId = c.getInt(c.getColumnIndexOrThrow("_id"));
            Toast.makeText(mContext, "Selected ID=" + c,
                    Toast.LENGTH_LONG).show();
            // Showing selected spinner item
            /*
             * Toast.makeText(parent.getContext(), "You selected: " + label,
             * Toast.LENGTH_LONG).show();
             */

        }

        public void onNothingSelected(AdapterView<?> parent) {
            // TODO Auto-generated method stub
        }
    });
} 
```

我的 SaveContact 到我的数据库

```
 private void saveContact() {

    DatabaseConnector dbConnector = new DatabaseConnector(this);

    if (getIntent().getExtras() == null) {

        dbConnector.insertConsumption(meterNoEt.getText().toString(),
                currentEt.getText().toString(), previousEt.getText()
                        .toString(), kWhEt.getText().toString(), dateTv
                        .getText().toString(), spinner.getSelectedItem()
                        .toString()

        );

    } else {
        dbConnector.updateConsumption(rowID,
                currentEt.getText().toString(), previousEt.getText()
                        .toString(), kWhEt.getText().toString(), dateTv
                        .getText().toString(), spinner.getSelectedItem()
                        .toString());

    }
} 
```

我得到了这个错误！

```
02-18 23:42:26.321: E/SQLiteDatabase(29864): Error inserting ConsumerName=android.database.sqlite.SQLiteCursor@4144bbe0 kWh=40300.0 _id=355477 Date=2013 -2-18 Previous=5587 Current=45887 
```

# android - 在线加载图像时如何设置进度微调器？

> ID：14940095
> 
> 赞同：0
> 
> 时间：2013-02-18T15:49:23.450
> 
> 标签：android, android-progressbar

在我的应用程序中，我使用 url 从 url 加载图像`AsyncTask`，而图像加载时，`ImageView`是空的。那么，在加载时，我如何在那里显示微调器/加载进度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:24:02.087

这是一个示例代码：

```
public class BackgroundAsyncTask extends AsyncTask<Void, Void, Void> {

  private ProgressDialog progressdialog;

 @Override
protected void onPreExecute(){ 
   super.onPreExecute();
        progressdialog= new ProgressDialog(yourContext);
        progressdialog.setMessage("Downloading Image");
        progressdialog.show();    
}

@Override
  protected Void doInBackground(Void... params) {
   //Do whatever you have to here
  }

  @Override
protected void onPostExecute(String result){
   super.onPostExecute(result);
        progressdialog.dismiss();
}
} 
```

# mysql - Jquery加载花费过多时间

> ID：14940098
> 
> 赞同：0
> 
> 时间：2013-02-18T15:49:32.170
> 
> 标签：mysql, tomcat, loading

我们正在使用 tomcat 和 MySQL v5.5.24 开发一个站点。网站在 Chrome 上运行良好，但 Firefox 和 IE 在页面加载时始终阻止 javascript 20 秒。来自 localhost 的 firefox 上的每个页面至少需要 20 秒才能加载不同的资源（css/js/image）。问题是每次都不是同一个脚本。它可以是任何随机的 其他网站虽然在 Firefox 上运行良好。附件是 firefox 的时间线![火狐网络时间线](../Images/f27b2db5c8d730dae0756b1c6956805d.png) ！[在此处输入图像描述][2] 使用 Chrome 加载时的同一页面加载时间不到 1 秒。附件是来自 Chrome 的时间线。 ![在此处输入图像描述](../Images/c7f22cb64805f35401903ce9edd8fbc4.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-24T19:38:01.173

我们在导致问题的 web.xml 中有这段代码。

```
<filter>
    <filter-name>2WayFilter</filter-name>
    <filter-class>com.osmoticweb.gzipfilter.GZIP2WayFilter</filter-class>

</filter>

<filter-mapping>

    <filter-name>2WayFilter</filter-name>
    <url-pattern>*.js</url-pattern>

</filter-mapping> 
```

一旦我们把它拿出来，事情就恢复了正常。

# scala - 如何在 Scala 中读取 gzip 文件

> ID：14940099
> 
> 赞同：30
> 
> 时间：2013-02-18T15:49:33.193
> 
> 标签：scala

在 Java 中，我将 GZIPInputStream 包装在 FileInputStream 上并完成。Scala 中的等价物是如何完成的？

```
Source.fromFile("a.csv.gz").... 
```

fromFile 返回一个 BufferedSource，它确实想将世界视为线条的集合。

没有比这更优雅的方式了吗？

```
Source.fromInputStream(new GZIPInputStream(new BufferedInputStream(new FileInputStream("a.csv.gz")))) 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T16:12:33.793

如果您想使用`Source`Java 方式而不是做所有事情，那么是的，您必须在 Java 中所做的事情上再添加一层包装。 `Source`需要`InputStream`s 但可以给你`Reader`s，这会阻止你使用`Source`两次。

Scala 非常擅长让您不必做比 Java 更多的工作，但尤其是在 I/O 方面，您经常不得不退回到 Java 类。（当然，您始终可以定义自己的快捷方式：

```
def gis(s: String) = new GZIPInputStream(new BufferedInputStream(new FileInputStream(s))) 
```

仅比您已经键入的内容长，现在您可以重复使用它。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-11-25T20:08:58.050

我会在流构造中消除 BufferedInputStream 的使用->`new GZIPInputStream(new FileInputStream("a.csv.gz"))`

# javascript - 没有 jQuery-UI 的简单 jQuery 可拖动实现 - 如何关闭？

> ID：14940100
> 
> 赞同：0
> 
> 时间：2013-02-18T15:49:35.270
> 
> 标签：javascript, jquery, jquery-ui, draggable

我在这里定制了一个简化的“可拖动”功能：[Draggable without jQuery-UI](http://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/)，这就是我到目前为止所拥有的：

```
$.fn.extend({
        canDragMe: function(){
        return this.each(function() {
        var $this = $(this);
        $this = $(this);
        return $this.css('cursor', opt.cursor).on("mousedown", function(e) {
            var $drag = $this.addClass('draggable');
                drg_h = $drag.outerHeight(),
                drg_w = $drag.outerWidth(),
                pos_y = $drag.offset().top + drg_h - e.pageY,
                pos_x = $drag.offset().left + drg_w - e.pageX;
            $drag.on("mousemove", function(e) {
                $('.draggable').offset({
                    top:e.pageY + pos_y - drg_h,
                    left:e.pageX + pos_x - drg_w
                }).on("mouseup", function() {
                    $this.removeClass('draggable');
                });
            });
            e.preventDefault(); // disable selection
        }).on("mouseup", function() {
                $this.removeClass('draggable');
            }
        });

    });
}); 
```

我将像这样使用它：`$('#mydiv').canDragMe();`. 但是我需要根据用户输入打开和关闭元素上的拖动。

所以我的问题是，关闭阻力的最简单方法是什么？喜欢`$('#mydiv').canNotDragMe();`或可能`$('#mydiv').canDragMe(false);`（当然需要插件中的输入选项）。

## 编辑

我知道我需要某种实现从 mousedown 解除上述操作的绑定？或者以某种方式“破坏”插件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:09:38.587

You can create a basic `cannotDragMe` method by simply unbinding the handlers that are set in the original method. Since the original is using [`.on()`](http://api.jquery.com/on/), you can use [`.off()`](http://api.jquery.com/off/) to turn them off in the new method.

**NOTE:** I also noticed that the code you provided was different than the code on the [site you referenced](http://css-tricks.com/snippets/jquery/draggable-without-jquery-ui/). The code on the site had better performance, so I used that instead. I also added [namespaces](http://api.jquery.com/on/#event-names) to the `.on()` and `.off()` events so that you don't accidentally unbind anything you are not intending to unbind.

**Updated jQuery Extend Method** - [jsfiddle](http://jsfiddle.net/8BXaj/2/)

```
$.fn.extend({
    cannotDragMe: function () {
        return this.each(function () {
            var $this = $(this);
            $this = $(this);
            return $this.css('cursor', 'default').off("mousedown.drag").off("mousemove.drag").off("mouseup.drag");
        });
    },
    canDragMe: function (opt) {
        opt = $.extend({
            handle: "",
            cursor: "move"
        }, opt);

        var $el;
        if (opt.handle === "") {
            $el = this;
        } else {
            $el = this.find(opt.handle);
        }

        return $el.css('cursor', opt.cursor).on("mousedown.drag", function (e) {
            var $drag;
            if (opt.handle === "") {
                $drag = $(this).addClass('draggable');
            } else {
                $drag = $(this).addClass('active-handle').parent().addClass('draggable');
            }
            var z_idx = $drag.css('z-index'),
                drg_h = $drag.outerHeight(),
                drg_w = $drag.outerWidth(),
                pos_y = $drag.offset().top + drg_h - e.pageY,
                pos_x = $drag.offset().left + drg_w - e.pageX;
            $drag.css('z-index', 1000).parents().on("mousemove.drag", function (e) {
                $('.draggable').offset({
                    top: e.pageY + pos_y - drg_h,
                    left: e.pageX + pos_x - drg_w
                }).on("mouseup.drag", function () {
                    $(this).removeClass('draggable').css('z-index', z_idx);
                });
            });
            e.preventDefault(); // disable selection
        }).on("mouseup.drag", function () {
            if (opt.handle === "") {
                $(this).removeClass('draggable');
            } else {
                $(this).removeClass('active-handle').parent().removeClass('draggable');
            }
        });
    }
}); 
```

# javascript - 为什么 JS/Jquery 在 IE7 中似乎不起作用

> ID：14940101
> 
> 赞同：0
> 
> 时间：2013-02-18T15:49:36.290
> 
> 标签：javascript, jquery, internet-explorer-7

由于某种原因，我的 Jquery 脚本无法在 IE7 上运行。但是，它确实适用于所有其他浏览器。我在某处读到 IE7 对逗号等非常挑剔，但我不知道我在这里做错了什么。有什么线索吗？

```
$(document).ready(function() {
var isiPad = navigator.userAgent.toLowerCase().indexOf("ipad");

var paddingLeft = ($(window).width() - 820) / 2;
var paddingRight = ($(window).width() - 820) / 2;

if( /Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent) )
{
    $(window).resize(function() 
    {
        paddingLeft = ($(window).width() - 820) / 2;
        $('.block_bouw').css('padding-left', paddingLeft);

        paddingRight = ($(window).width() - 820) / 2;
        $('.block_industrie').css('padding-right', paddingRight);
    });

    $('.block_bouw').css('padding-left', paddingLeft);  
    $('.block_bouw').delay(0).animate({ 
            marginLeft: '0',
        }, 0, function() {

    });
    $('.block_bouw').click(function(){
        window.location = 'bouw';
    });

    $('.block_industrie').css('padding-right', paddingRight);   
    $('.block_industrie').delay(0).animate({
            right: '0',
        }, 0, function(){

    });
    $('.block_industrie').click(function(){
        window.location = 'industrie';
    });
}

else {
    $(window).resize(function() 
    {
        paddingLeft = ($(window).width() - 820) / 2;
        $('.block_bouw').css('padding-left', paddingLeft);

        paddingRight = ($(window).width() - 820) / 2;
        $('.block_industrie').css('padding-right', paddingRight);
    });

    $('.block_bouw').css('padding-left', paddingLeft);  
    $('.block_bouw').delay(500).animate({ 
            marginLeft: '0',
        }, 2000, function() {

    });
    $('.block_bouw').click(function(){
        window.location = 'bouw';
    });

    $('.block_industrie').css('padding-right', paddingRight);   
    $('.block_industrie').delay(500).animate({
            right: '0',
        }, 2000, function(){

    });
    $('.block_industrie').click(function(){
        window.location = 'industrie';
    });
}

$(".product.module .item").css("margin-right","27px");
$(".product.module .item:nth-child(3n)").css("margin-right", "0px");

$(".project.module .item").css("margin-left","26px");
$(".project.module .item:nth-child(3n)").css("margin-left", "0px");

$('.popout', this).hide();

$('.pin').hover(function(){
    //var h = $('.popout', this).outerHeight() * -1;
    var id = (this.id);
    $('.popout').css("margin-top", ($('.popout',this).outerHeight()*-1)+14 );
    $('.popout', this).show(100);
    $('.option' + "#" + id).addClass('hover');
},function(){
    $('.popout', this).hide(100);
    $('.option').removeClass('hover');
});

$('.option').hover(function(){
    var idoption = (this.id);
    $('.popout').css("margin-top", ($('.popout' + "#" + idoption).outerHeight()*-1)+14 );
    $('.popout' + "#" + idoption).stop().show(100);
},function(){
    $('.popout').hide(100);
});
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T15:59:17.690

正如您所怀疑的那样，问题在于您在旧的 IE 中出现了一些尾随逗号。违规行是

```
marginLeft: '0', 
```

和

```
right: '0', 
```

...每次两次。

这是我通过快速网络搜索找到的一个站点，它可以在 JavaScript 代码中找到尾随逗号。它似乎工作。

[http://trailingcomma.com/](http://trailingcomma.com/)

# console - Intuit.ipp.anywhere.js [动态] 中未“定义” Intuit Anywhere 获取控制台

> ID：14940102
> 
> 赞同：1
> 
> 时间：2013-02-18T15:49:41.690
> 
> 标签：console, undefined, connect, intuit-partner-platform, intuit

我们再次尝试让 Intuit Anywhere 工作。组装一个测试网络应用程序。运行 VisStudio 2010，VB IDE 进行测试。赢得 7/64 专业版。

单击“连接到 QuickBooks”按钮时，我们在 intuit.ipp.anywhere.js [动态] 的第 132 行收到错误。JScript 运行时错误控制台未定义

```
if(console && console.log) 
```

由于这不是我们的代码，也不是我们的主要语言，所以很难知道这是什么或为什么会发生这种情况？

有人可以解释并告诉我该怎么做才能解决它吗？
谢谢

# r - 具有 3 个分类变量的条形图

> ID：14940107
> 
> 赞同：3
> 
> 时间：2013-02-18T15:49:56.950
> 
> 标签：r, plot

我有这样的数据：

```
data <- data.frame(Comp = factor(rep(2003:2004, each = 8)), 
                   Cat = rep(letters[1:4], 4), 
                   Type = rep(c('Free','Used'), each = 4), 
                   Count = trunc(rnorm(16,30,2))) 
```

而且我需要像`barplot`with `beside = TRUE`and `beside = FALSE`( `TRUE`for `Cat`and `Comp`, and `FALSE = Type`) 这样的东西。

有了这些数据，它将产生一个有 8 列的图（`Comp`与`Cat`( `Comp = 2003 + Cat = A ; Comp = 2003 + Cat = B ; ... ; Comp = 2004 + Cat = D`) 的交互），每列有 2 个堆叠列（`Type`(`Free`和`Used`) 的水平）用于`Count`变量。

任何提示我怎么能做这种情节？我试图在EXCEL中做一个例子，但我也失败了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:00:23.897

在`lattice`：

```
 barchart(Count~interaction(Cat,Comp),groups=Type,data=data,auto.key=T,stack=T) 
```

![在此处输入图像描述](../Images/b5bd6f4cc59afa07fa6c5b3e0d82c47d.png)

另一种分组方式，来自评论：

```
barchart(Count~Cat|factor(Comp),groups=Type,data=data,auto.key=T,stack=T) 
```

![在此处输入图像描述](../Images/9c98a297f638ab21788f9b36fc890d31.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T16:02:13.420

同样在`ggplot2`：

```
ggplot(data, aes(x=interaction(Cat, Comp), y=Count, fill=Type)) +   
  geom_bar(position='stack', stat='identity') 
```

要对附加变量（或两个）进行分组，您可以使用`facet_wrap`或`facet_grid`。

```
ggplot(data, aes(x=Cat, y=Count, fill=Type)) +   
  geom_bar(position='stack', stat='identity') +
  facet_wrap( ~ Comp) 
```

# java - OpenCV 特征检测器

> ID：14940111
> 
> 赞同：18
> 
> 时间：2013-02-18T15:50:16.240
> 
> 标签：java, android, opencv, image-processing, object-detection

我正在尝试编写一个应用**SURF**对象检测的代码，因此我采用了一个 openCV 示例（示例 3）并开始更新`onCameraViewStarted()`和`onCameraFrame()`方法，但是当我在我的 Galaxy S3 手机上尝试它时，我一直收到运行时错误，我找不到任何可以帮助解决我的问题的是我的代码和我更新的内容：

```
public class Sample3Native extends Activity implements CvCameraViewListener{

private static final String TAG = "OCVSample::Activity";

private Mat                    mRgba;
private Mat                    mGrayMat;
private CameraBridgeViewBase   mOpenCvCameraView;

Mat descriptors ;           
List<Mat> descriptorsList;

FeatureDetector featureDetector;
MatOfKeyPoint keyPoints;
DescriptorExtractor descriptorExtractor;
DescriptorMatcher descriptorMatcher;**

private BaseLoaderCallback     mLoaderCallback = new BaseLoaderCallback(this) {
    @Override
    public void onManagerConnected(int status) {
        switch (status) {
            case LoaderCallbackInterface.SUCCESS:
            {
                Log.i(TAG, "OpenCV loaded successfully");

                // Load native library after(!) OpenCV initialization
                System.loadLibrary("native_sample");

                mOpenCvCameraView.enableView();
            } break;
            default:
            {
                super.onManagerConnected(status);
            } break;
        }
    }
};

public void onCameraViewStarted(int width, int height) {
    mRgba = new Mat(height, width, CvType.CV_8UC4);
    mGrayMat = new Mat(height, width, CvType.CV_8UC1);
    featureDetector=FeatureDetector.create(4); // SURF= 4;
    descriptorExtractor=DescriptorExtractor.create(2);//SURF = 2
    descriptorMatcher=DescriptorMatcher.create(6); //BRUTEFORCE_SL2 = 6**

}

 public Mat onCameraFrame(Mat inputFrame) {
    inputFrame.copyTo(mRgba);
    //detect_1(0, mRgba.getNativeObjAddr(), keyPoints.getNativeObjAddr());
    //Now mRgba contains the current frame ( start manipulation part)
    //detecting keypoints
    featureDetector.detect(mRgba, keyPoints);
    //draw keypoints
   // Features2d.drawKeypoints(mRgba, keyPoints, mRgba);
    //finding descriptors
    descriptorExtractor.compute(mRgba, keyPoints, descriptors);
    //Matcher between 2 images or set of images
    // Note: training set and query set are handled here! (in matcher)
   //descriptorsList = descriptorMatcher.getTrainDescriptors();
    //descriptorsList.add(descriptors);
   // descriptorMatcher.add(descriptorsList);

    //Imgproc.cvtColor(mRgba, mGrayMat, Imgproc.COLOR_RGBA2GRAY);
    //FindFeatures(mGrayMat.getNativeObjAddr(), mRgba.getNativeObjAddr());

    return mRgba;
}
} 
```

注意：我已经尝试评论除了方法`featureDetector.detect(mRgba, keyPoints)`中的所有内容，但`onCameraFrame()`仍然在我的手机上给出了运行时错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-05T14:42:58.727

如果我没记错的话，OpenCV SURF 特征检测器只适用于灰度图像。因此，请尝试在方法中调用**copyTo**`onCameraFrame()`后添加它：

```
cvtColor(mRgba, mGrayMat, COLOR_RGBA2GRAY); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-17T09:37:40.560

您确定您以正确的方式使用 SIFT 吗？据我所知，SIFT 和 SURF 不包含在 OpenCV Android 的分发包中。要使用它们，您需要编译非自由模块并在您的项目中使用它。因此，您需要做的是创建一个 NDK 项目，将非自由模块编译为独立库。然后使用这个库来编译你的程序。然后你应该能够构建你的应用程序。你可以参考这个[教程](https://sites.google.com/site/wghsite/technical-notes/sift_surf_opencv_android)。

获得 jni 库后，您可以轻松地将其包装成 JAVA JNI 接口。然后您应该能够在您的 Android 应用程序中使用 JAVA 界面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-13T10:07:26.893

SURF 或 SIFT 仅支持灰度。因此，您必须先使用以下代码将其转换为灰度： cvtColor( mRgba, mRgba, CV_BGR2GRAY );

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-17T09:46:25.027

评论 cid 和 HMK 的答案（对不起，我没有 50 的“添加评论”声望，所以我必须创建一个新答案）。

OpenCV 库可以接受彩色图像作为输入。以下是我的 SIFT 检测和描述提取代码。它工作得很好。这意味着您不需要将图像转换为灰度格式，尽管 SIFT 算法仅适用于灰度图像。我相信 OpenCV 检测器已经做了一些预处理。（由于 suft 检测器和 sift 以类似的方式工作，我假设 SURF 也不需要灰度格式输入）

```
Mat image;
image = imread(argv[1], CV_LOAD_IMAGE_COLOR); 
if(! image.data )
{
    cout <<  "Could not open or find the image" << std::endl ;
    return -1;
}

vector<KeyPoint> keypoints;
Mat descriptors;

// Create a SIFT keypoint detector.
SiftFeatureDetector detector;
detector.detect(image, keypoints);
cout << "Detected " << (int) keypoints.size() << " keypoints" <<endl;

// Compute feature description.
detector.compute(image,keypoints, descriptors);
cout << "Computed feature."<<endl; 
```

# google-app-engine - Appengine org.datanucleus.exceptions.NucleusUserException 当 makePersistent()

> ID：14940117
> 
> 赞同：1
> 
> 时间：2013-02-18T15:50:39.273
> 
> 标签：google-app-engine, datanucleus

我有这个对象：

```
@Entity
@PersistenceCapable(identityType = IdentityType.APPLICATION, detachable = "true")
public class Channel implements Serializable, Cacheable {

@PrimaryKey
@Persistent(valueStrategy = IdGeneratorStrategy.IDENTITY)
@Id
public Long id;

// NOTE THE PERSISTENT TAGS
@Persistent
private String name;

@Persistent
private boolean hotblocked = false;

........ 
```

当我运行 pm.makePersistent(c) （pm 是 PersistenceManager）时，我得到了这个：

```
An object of class "com.iuculano.tvitaliane.server.types.Channel" uses SingleFieldIdentity using the field "id" yet this field has not had its value set! Either set the field manually, or set a value-strategy for that field.
org.datanucleus.exceptions.NucleusUserException: An object of class "com.iuculano.tvitaliane.server.types.Channel" uses SingleFieldIdentity using the field "id" yet this field has not had its value set! Either set the field manually, or set a value-strategy for that field.
    at org.datanucleus.state.JDOStateManager.setIdentity(JDOStateManager.java:820)
    at org.datanucleus.state.JDOStateManager.internalMakePersistent(JDOStateManager.java:2374)
    at org.datanucleus.state.JDOStateManager.makePersistent(JDOStateManager.java:2357)
    at org.datanucleus.ObjectManagerImpl.persistObjectInternal(ObjectManagerImpl.java:1896)
    at org.datanucleus.ObjectManagerImpl.persistObjectWork(ObjectManagerImpl.java:1745)
    at org.datanucleus.ObjectManagerImpl.persistObject(ObjectManagerImpl.java:1602)
    at org.datanucleus.api.jdo.JDOPersistenceManager.jdoMakePersistent(JDOPersistenceManager.java:731)
    at org.datanucleus.api.jdo.JDOPersistenceManager.makePersistent(JDOPersistenceManager.java:756)
    at com.iuculano.tvitaliane.server.db.ChannelJDOWrapper.insertChannel(ChannelJDOWrapper.java:45)
    at com.iuculano.tvitaliane.server.scrapers.Import.caricaListaTvita(Import.java:101)
    at com.iuculano.tvitaliane.server.requests.InitialImport.doPost(InitialImport.java:23)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.mortbay.jetty.servlet.ServletHolder.handle(ServletHolder.java:511)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1166)
    at com.google.appengine.api.socket.dev.DevSocketFilter.doFilter(DevSocketFilter.java:74)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.ResponseRewriterFilter.doFilter(ResponseRewriterFilter.java:123)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.HeaderVerificationFilter.doFilter(HeaderVerificationFilter.java:34)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.api.blobstore.dev.ServeBlobFilter.doFilter(ServeBlobFilter.java:61)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.apphosting.utils.servlet.TransactionCleanupFilter.doFilter(TransactionCleanupFilter.java:43)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.StaticFileFilter.doFilter(StaticFileFilter.java:125)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at com.google.appengine.tools.development.BackendServersFilter.doFilter(BackendServersFilter.java:97)
    at org.mortbay.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1157)
    at org.mortbay.jetty.servlet.ServletHandler.handle(ServletHandler.java:388)
    at org.mortbay.jetty.security.SecurityHandler.handle(SecurityHandler.java:216)
    at org.mortbay.jetty.servlet.SessionHandler.handle(SessionHandler.java:182)
    at org.mortbay.jetty.handler.ContextHandler.handle(ContextHandler.java:765)
    at org.mortbay.jetty.webapp.WebAppContext.handle(WebAppContext.java:418)
    at com.google.appengine.tools.development.DevAppEngineWebAppContext.handle(DevAppEngineWebAppContext.java:94)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at com.google.appengine.tools.development.JettyContainerService$ApiProxyHandler.handle(JettyContainerService.java:409)
    at org.mortbay.jetty.handler.HandlerWrapper.handle(HandlerWrapper.java:152)
    at org.mortbay.jetty.Server.handle(Server.java:326)
    at org.mortbay.jetty.HttpConnection.handleRequest(HttpConnection.java:542)
    at org.mortbay.jetty.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:923)
    at org.mortbay.jetty.HttpParser.parseNext(HttpParser.java:547)
    at org.mortbay.jetty.HttpParser.parseAvailable(HttpParser.java:212)
    at org.mortbay.jetty.HttpConnection.handle(HttpConnection.java:404)
    at org.mortbay.io.nio.SelectChannelEndPoint.run(SelectChannelEndPoint.java:409)
    at org.mortbay.thread.QueuedThreadPool$PoolThread.run(QueuedThreadPool.java:582)
18-feb-2013 16.07.53 com.google.appengine.api.taskqueue.dev.UrlFetchJob execute 
```

我不明白这是什么意思，我有 valueStrategy = IdGeneratorStrategy.IDENTITY，我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:24:28.733

根据[此文档](https://developers.google.com/appengine/docs/java/datastore/jdo/creatinggettinganddeletingdata#Keys)，您应该忘记 @id 注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:00:41.650

Ok found the solution:

I've two problems:

1) Remove the @id annotation. 2) Remove @Entity

# php - 使用 CodeIgniter 的简单登录系统在登录时返回 404

> ID：14940118
> 
> 赞同：2
> 
> 时间：2013-02-18T15:50:39.510
> 
> 标签：php, codeigniter, login, http-status-code-404

我正在尝试了解`PHP`并使用`CodeIgniter`框架。我最近一直在关注这个教程：

[http://www.codefactorycr.com/login-with-codeigniter-php.html](http://www.codefactorycr.com/login-with-codeigniter-php.html)

我非常有条不紊地完成了它，并小心地确保我在编写代码时没有出错。但是，当我在浏览器中运行我的项目时，我在尝试提交登录详细信息后收到此错误。

**未找到 在此服务器上未找到请求的 URL /LoginTut/login/VerifyLogin。**

不久前，当我在学习另一个教程时遇到了类似的问题，无法弄清楚所以放弃了这个项目。

这就是我配置 CI 的方式

**路由.php**

`$route['default_controller'] = "login";`

**配置文件**

`$config['base_url'] = 'http://localhost/LoginTut/';`

我把这个留空了。

`$config['index_page'] = '';`

我还确保我正在加载所有相关的库和助手。

**自动加载.php**

`$autoload['libraries'] = array('database', 'session');` `$autoload['helper'] = array('url');`

下面是我所有的PHP文件..

**用户.php**

```
class User extends CI_Model{
function login($username, $password){
    $this -> db -> select('id, username, password');
    $this -> db -> from ('users');
    $this -> db -> where ('username', $username);
    $this -> db -> where ('password', md5($password));
    $this -> db -> limit(1);

    $query = $this  -> db -> get();

    if($query -> num_rows() == 1){
        retrun $query->result();
    }
    else{
        return false;
    }
} 
```

}

**login_view.php**

```
 <?php echo form_open('VerifyLogin'); ?>
     <label for="username">Username:</label>
     <input type="text" size="20" id="username" name="username"/>
     <br/>
     <label for="password">Password:</label>
     <input type="password" size="20" id="passowrd" name="password"/>
     <br/>
     <input type="submit" value="Login"/>
   </form> 
```

**登录.php**

```
class Login extends CI_Controller{
    function _construct(){
        parent::_construct();
    }

    function index(){
        $this->load->helper(array('form'));
        $this->load->view('login_view');
    }
} 
```

验证登录.php

```
class VerifyLogin extends CI_Controller{

function _construct(){
    parent::_construct();
    $this->load->model('user', '', TRUE);
}

function index(){
    $this->load->library('form_validation');
    $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean');
    $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_check_database');

    if($this->form_validation->run() == FALSE){
        //Validation failed, user redirected to login page...
        $this->load->view('login_view');
    }
    else{
        //Login success. Go to members only area
        redirect('home', 'refresh');
    }
}

function check_database($password){
    //Field validation succeeded. Validate against db
    $username = $this->input->post('username');
    //query db
    $result = $this->user->login($username, $password);

    if($result){
        $sess_array = array();
        foreach($result as $row){
            $sess_array = array(
                    'id' => $row->id,
                    'username' => $row->username
                );
            $this->session->set_userdata('logged_in', $sess_array);
        }
        return TRUE;
    }
    else{
        $this->form_validation->set_message('check_database', 'Invalid username or password');
        return false;
    }
} 
```

}

用户应该能够成功登录并最终到达`home.php`加载`home_view.php`文件的控制器。

这是登录表单的 Post 操作

```
http://localhost/LoginTut/login/VerifyLogin 
```

我非常感谢与此问题相关的任何帮助，我已经为此苦苦挣扎了好几天，而且它开始让我很恼火。我有一种感觉这是我的代码中出现的非常小的问题。我只是没有足够的知识来弄清楚。

注意：我在论坛上读到它可能与 .htaccess 问题有关，但我不知道那是什么！

**.htaccess 文件**

```
<IfModule mod_rewrite.c>
RewriteEngine On
#Removes access to the system folder by users.
#Additionally this will allow you to create a System.php controller,
#previously this would not have been possible.
#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#When your application folder isn't in the system folder
#This snippet prevents user access to the application folder
#Submitted by: Fabdrol
#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^LoginTut.*
RewriteRule ^(.*)$ index.php?/$1 [L]

#Checks to see if the user is attempting to access a valid file,
#such as an image or css document, if this isn't true it sends the
#request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?$1 [L]
</IfModule>
<IfModule !mod_rewrite.c>
 ErrorDocument 404 index.php
</IfModule> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:43:06.077

我也回答了您的其他帖子，但只是重申一下：

您将控制器命名为“verify_login.php”，但您的类名为“VerifyLogin”。在 Codeigniter 中，您的类需要与您的文件命名相同，只是使用大写字母。为了使该页面正常工作，您应该将控制器文件重命名为“verifyLogin.php”或将您的类重命名为“Verify_Login”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:19:13.457

暂时关闭重写。首先使用普通的 CodeIgniter URL 解决这个问题：

CodeIgniter URL 的工作方式如下：

```
<base_url>/<index-page>/<controller>/<methodOfController>/<parameters> 
```

当您请求时`.../login/VerifyLogin`，这将不起作用，因为*login*和*VerifyLogin*都是控制器。CodeIgniter 会“认为”你想在控制器类*login中调用方法**VerifyLogin()*。您应该改为调用.*`.../VerifyLogin/index`*

 *你`$config['index_page']`空了。在 CodeIgniter 中，您不能直接调用控制器上的方法；你必须让 CodeIgniter 为你做这件事。这意味着 CodeIgniter 必须首先运行，然后解析 URL 并将请求委托给正确的控制器和方法。这就是配置 *index_page* 的用途——启动 CodeIgniter。您必须通过此文件运行**所有**请求。

CodeIgniter 中包含一个*index.php*（它以行结尾`require_once BASEPATH.'core/CodeIgniter.php';`）。使用这个作为 index_page。

完成此操作后，您的完整 URL 将如下所示：

```
http://localhost/LoginTut/index.php/VerifyLogin/index/<parameters> 
```*

# jquery - jQuery替换文本问题

> ID：14940120
> 
> 赞同：1
> 
> 时间：2013-02-18T15:50:46.247
> 
> 标签：jquery, html

谁能帮我这个？当我尝试替换其上的货币符号时，它会将符号移动到 span 标签内，这会导致我的其余代码出现问题。

我在这里添加了我的代码到 jsbin：http: [//jsbin.com/usuraw/2](http://jsbin.com/usuraw/2)

谢谢

```
<select id="inv_currency">
    <option value="£">£</option>
    <option value="€">€&lt;/option>
</select>

<span class="invE_balance currency">
£
<span>0.00</span>
</span> 
```

JS：

```
$('#inv_currency').on('change', function() {

    var currency = $('.currency');

    if ($(this).val() == 'pound')   {
        currency.each(function( index ) {
            var text = '';
            text = $(this).text();
            text = text.replace("€", "£");
            $(this).text(text);
        });
    }
    else    {
        currency.each(function( index ) {
            var text = '';
            text = $(this).text();
            text = text.replace("£", "€");
            $(this).text(text);
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:57:18.247

最简单的方法，无需进入`textNodes`，只需将跨度打破一秒钟并替换货币符号，然后替换跨度。我之所以这么说是因为你一打电话就`.text()`失去了内心的`<span>`孩子`.currency`。基本上：

```
<!-- original -->
<span class="currency">
  £ <span>0.00</span>
</span>

var currency = /*above .currency node */;
currency.text(currency.text().replace('£','€'));

<!-- resulting in -->
<span class="curency">€ 0.00</span>
<!-- note how you lose the child <span> --> 
```

因此，为避免这种情况，您可以在更改货币时移动节点。这也使您能够处理符号位置和其他事情（也许您想添加一个`format`使 USD 看起来像`100.00`和 EURO 看起来像的函数`0,00`）。所以，这就是我的建议：

```
var currencySymbols = {
  pound: {
    symbol: '£',
    pos: 'left'
  },
  euro: {
    symbol: '€',
    pos: 'right'
  },
  usd: {
    symbol: '$',
    pos: 'left'
  }
};

//* currency
$('#inv_currency').on('change', function() {
  var symbol = currencySymbols[$(this).val()] || currencySymbols['euro'];
  $('.currency').each(function(i,e){
    var $span = $('span',this);
    $(this).empty().text(symbol.symbol);
    if(symbol.pos === 'left'){
      $span.appendTo(this);
    }else{
      $span.prependTo(this);
    }
  });
}); 
```

重构了一下（避免使用替换），但实际上也只是将跨度移入和移出节点，以便您可以放置​​符号。我还制作了符号结果对象，以便您可以添加其他信息（例如如何使用`euro`将符号放置在值的*右侧*`pos`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T15:55:00.030

```
 if ($(this).val() == 'pound')   { 
```

到

```
if ($(this).val() == '£')   { 
```

在这里演示[http://jsbin.com/usuraw/4/edit](http://jsbin.com/usuraw/4/edit)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T15:57:05.793

您选择外部跨度中的所有内容，当您使用 .text() 时，它也会拉动内部跨度。您需要做的是查看文本节点，请参阅[如何使用 jQuery 选择文本节点？](https://stackoverflow.com/questions/298750/how-do-i-select-text-nodes-with-jquery)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T16:05:07.667

以下是使用 textnodes 的方法：

```
$('#inv_currency').on('change', function () {
    var currency = $('.currency');
    if (this.value.trim() == '£') {
        currency.each(function (index) {
            var elem = $(this).contents().filter(function() {
                return this.nodeType === 3;
            });
            var text = elem.text();
            elem[0].nodeValue = text.replace("€", "£");
        });
    } else {
        currency.each(function (index) {
            var elem = $(this).contents().filter(function() {
                return this.nodeType === 3;
            });
            var text = elem.text();
            elem[0].nodeValue = text.replace("£", "€");
        });
    }
}); 
```

[**小提琴**](http://jsfiddle.net/TEJBe/1/)

请注意，对于某些旧浏览器，trim() 将需要一个 polyfill，或者您可以只使用 jQuery 的 $.trim() 代替。

只是为了好玩，这里有一个更短更高效的版本：

```
$('#inv_currency').on('change', function () {
    $('.currency').each(function (index, elm) {
        var elem = $(elm).contents().filter(function () {
            return this.nodeType === 3;
        }).get(0);
        elem.nodeValue = elem.nodeValue.replace(/(\€|\£)/g, function(x) {
            return x == '€' ? '£' : '€';
        });
    });
}); 
```

[**小提琴**](http://jsfiddle.net/TEJBe/2/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T15:54:16.587

使用 $(this) 以外的其他选择器，有时会让人感到困惑。

# java - Android 4.0.3 VideoView 不会循环播放视频

> ID：14940121
> 
> 赞同：1
> 
> 时间：2013-02-18T15:50:51.490
> 
> 标签：java, android, loops, android-videoview

我在我的应用程序中使用 VideoView，我需要循环播放一个 mp4 视频。我已经在使用这种方法来循环播放我的视频。

```
vid.setOnPreparedListener(new OnPreparedListener(){
        @Override
        public void onPrepared(MediaPlayer mp) {
            mp.setLooping(true); 
        }
}); 
```

它适用于 Nexus 7 和 API 级别 16 的模拟器，但在将要使用它的主设备（唯一的区别是 Android 4.0.3）上，视频只播放一次并且不会循环播放。有什么建议么？

# sql - SQL：根据字符串值列表获取表中存在和不存在的值

> ID：14940122
> 
> 赞同：0
> 
> 时间：2013-02-18T15:50:52.700
> 
> 标签：sql, sql-server, select

我有一个 SQL 表，其中包含列中的城市列表。我有一个单独的城市列表，我想找出表中存在和不存在的城市，但分别不存在和存在于该列表中的城市。

例子

```
CityId    CityName
1            ABC
2            DEF
3            GHI
4            JKL
5            MNO 
```

假设列表是：'ABC'、'DEF'、'MNO'、'PQR'、'STU'

所以作为输出我想要两个列表：

存在于表中：

```
'ABC' 
'DEF' 
'MNO' 
```

不存在于表中：

```
'PQR'
'STU' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:22:03.650

我假设您的列表是一个字符串/varchar，那么您首先需要一个拆分函数来获取所有部分：

1.) 然后可以使用 an`INNER JOIN`查找表中的所有内容：

```
SELECT CityId,CityName
FROM Cities c
INNER JOIN dbo.Split('ABC,DEF,MNO,PQR,STU',',')x
ON c.CityName = x.Item; 
```

2.）并 `NOT EXISTS` 查找列表中但不在表中的所有内容：

```
SELECT x.Item As CityName
FROM  dbo.Split('ABC,DEF,MNO,PQR,STU',',')x
WHERE NOT EXISTS 
(
  SELECT 1 
  FROM Cities c
  WHERE c.CityName = x.Item
) 
```

[**演示**](http://sqlfiddle.com/#!6/3f0fa/9/1)

结果：

1)

```
CITYID  CITYNAME
  1       ABC
  2       DEF
  5       MNO 
```

2)

```
CITYNAME
PQR
STU 
```

这是我的拆分功能：

```
CREATE FUNCTION [dbo].[Split]
(
    @ItemList NVARCHAR(MAX), 
    @delimiter CHAR(1)
)
RETURNS @IDTable TABLE (Item VARCHAR(50))  
AS      

BEGIN    
    DECLARE @tempItemList NVARCHAR(MAX)
    SET @tempItemList = @ItemList

    DECLARE @i INT    
    DECLARE @Item NVARCHAR(4000)

    SET @tempItemList = REPLACE (@tempItemList, ' ', '')
    SET @i = CHARINDEX(@delimiter, @tempItemList)

    WHILE (LEN(@tempItemList) > 0)
    BEGIN
        IF @i = 0
            SET @Item = @tempItemList
        ELSE
            SET @Item = LEFT(@tempItemList, @i - 1)
        INSERT INTO @IDTable(Item) VALUES(@Item)
        IF @i = 0
            SET @tempItemList = ''
        ELSE
            SET @tempItemList = RIGHT(@tempItemList, LEN(@tempItemList) - @i)
        SET @i = CHARINDEX(@delimiter, @tempItemList)
    END 
    RETURN
END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:39:24.250

看起来您的“列表”在表格中。这应该很简单：

```
select distinct value from list where value in (select distinct city from cities) 
```

和：

```
select value from list exclude select city from cities 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-26T13:13:58.223

存在于表值中：

```
SELECT v.valueName AS PresentInTable from (VALUES ('ABC'),('DEF'),('MNO'),('PQR'),('STU')) 
v(valueName) 
LEFT JOIN Cities c on c.CityName = v.valueName
WHERE c.CityId IS NOT NULL 
```

不存在于表中：

```
SELECT v.valueName AS NotPresentInTable from (VALUES ('ABC'),('DEF'),('MNO'),('PQR'),('STU')) 
v(valueName) 
LEFT JOIN Cities c on c.CityName = v.valueName
WHERE c.CityId IS NULL 
```

# c++ - OpenCv 2.4.3：找不到 imread 和 SurfFeatureDetector::detect

> ID：14940126
> 
> 赞同：1
> 
> 时间：2013-02-18T15:51:12.190
> 
> 标签：c++, xcode, opencv, osx-snow-leopard

在 Mac OSX 10.8、XCode 4.6 上，使用 C++

我正在关注`opencv_tutorials.pdf`位于`/opt/local/share/OpenCV/doc`我的系统中的教程。在第 311 页，我们得到了这个示例（稍作编辑）：

```
#include <stdio.h>
#include <iostream>
#include "opencv2/core/core.hpp"
#include "opencv2/features2d/features2d.hpp"
#include "opencv2/highgui/highgui.hpp"
using namespace cv; 
int main( int argc, char** argv ) {
  Mat img_1 = imread( argv[1], CV_LOAD_IMAGE_GRAYSCALE );
  int minHessian = 400;
  SurfFeatureDetector detector( minHessian );
  std::vector<KeyPoint> keypoints_1;
  detector.detect( img_1, keypoints_1 );
} 
```

我不得不将上面的代码修改为`#include "opencv2/nonFree/features2d.hpp"`我通过运行找到的文件

```
find /opt/local/include -name "*.hpp" -exec grep SurfFeatureDetector "{}" ';' -print 
```

代码编译，这意味着`detector.detect`在文件中找到符号`hpp`并通过 C++ 编译器的类型检查。接下来是尝试查找包含符号的库。

现在，我的发行版中有这些库，位于`/opt/local/lib`：

```
libopencv_calib3d.2.4.3.dylib
libopencv_contrib.2.4.3.dylib
libopencv_core.2.4.3.dylib
libopencv_features2d.2.4.3.dylib
libopencv_flann.2.4.3.dylib
libopencv_gpu.2.4.3.dylib
libopencv_highgui.2.4.3.dylib
libopencv_imgproc.2.4.3.dylib
libopencv_legacy.2.4.3.dylib
libopencv_ml.2.4.3.dylib
libopencv_nonfree.2.4.3.dylib
libopencv_objdetect.2.4.3.dylib
libopencv_photo.2.4.3.dylib
libopencv_stitching.2.4.3.dylib
libopencv_ts.2.4.3.dylib
libopencv_video.2.4.3.dylib
libopencv_videostab.2.4.3.dylib 
```

我发现在`nm`这些符号中搜索所需的符号并没有提供任何信息，因为在我的脑海中很难对名称进行反编译。我只是蛮力包含了所有库，但仍然出现链接器错误：

```
Undefined symbols for architecture x86_64:
  "cv::imread(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, int)", referenced from:
      _main in main.o
  "cv::FeatureDetector::detect(cv::Mat const&, std::__1::vector<cv::KeyPoint, std::__1::allocator<cv::KeyPoint> >&, cv::Mat const&) const", referenced from:
      _main in main.o
ld: symbol(s) not found for architecture x86_64 
```

从这里开始，我对 OpenCv 参考文档和 wiki 页面进行了一些抽查

```
http://opencv.willowgarage.com/documentation/cpp/features2d__feature_detection_and_descriptor_extraction.html 
```

但没有成功。

我将不胜感激

1.  查找这些 OpenCv API 的具体帮助
2.  这种查询的一般策略：“什么库包含我需要链接的符号”。这种问题让我讨厌 C++，因为 5 分钟的编码似乎总是导致数小时的偶然发现库搜索，可能是因为我只是不知道这样做的专业秘密。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-03-21T16:23:59.707

在 Linux 上并使用**OpenCV 3.0.0**我必须链接到`opencv_imgcodecs`共享库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:29:43.387

我的工具链利用 CMake 来跟踪这些事情。对于我使用的大多数新库，通常都有谷歌可搜索的随附 Find*.cmake 文件，这些文件是由其他人编写的。如果您想了解有关我的特定设置的更多信息，请随时询问。对于非自由库中的东西，我已经多次看到这个特定问题（架构 x86_64 的未定义符号）。不过，我不确定您为什么会收到 imread 的错误。我首先要看的是 samples/cpp 文件夹中的 matcher_simple.cpp 示例。如果您可以编译并运行它（使用[this](http://opencv.willowgarage.com/wiki/CompileOpenCVUsingLinux)）和其他示例，那么您的设置应该没问题。如果你不能，你能把那个例子的错误贴出来吗？我不熟悉 XCode 但[其他人](https://stackoverflow.com/questions/13564289/osx-10-7-5-opencv-2-4-3-undefined-symbols-for-architecture-x86-64-when-usin)建议转到 Build Settings>Build Options> Compiler for C/C++/Objective-C 并将其从 Apple LLVM Compiler 更改为 LLVM GCC 4.2。[这里](https://stackoverflow.com/questions/5781198/compiling-opencv-code-on-a-64-bit-mac)也有一些其他的猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-17T03:37:40.387

尝试在构建设置中的其他链接器标志列表中包含`-lopencv_features2d`和`-lopencv_nonfree`。我遇到了同样的问题，它对我有用

# google-app-engine - 如何以某些谷歌用户身份访问驱动器

> ID：14940129
> 
> 赞同：0
> 
> 时间：2013-02-18T15:51:31.927
> 
> 标签：google-app-engine, google-drive-api

我正在使用 appengine（python）并尝试为某些用户管理共享的 google 驱动器目录。即使我以其他用户身份登录，我的程序是否可以始终访问驱动器而无需访问授权页面。假设我登录 123，但我想一直访问 abc 的谷歌驱动器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:06:13.830

您可以通过 Google Apps 用户的域范围委派来执行此操作：[https](https://developers.google.com/drive/delegation) ://developers.google.com/drive/delegation ，但域管理员必须添加您的应用程序才能获得授权。

如果您想为市场创建一个无需手动设置的应用程序，您可以按照此处的说明进行操作：[https ://developers.google.com/google-apps/marketplace/tutorial_python_gae#Integrate-OAuth](https://developers.google.com/google-apps/marketplace/tutorial_python_gae#Integrate-OAuth)

如果用户没有登录到您的应用程序，即使您以前被授予访问权限，我认为您也无法访问任何 Google 的 API，至少从我对可用身份验证方法的理解来看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T21:26:00.860

当用户将应用引擎项目服务帐户添加为共享时，您始终可以访问它，而无需 OAuth2 舞蹈。

您的应用引擎项目服务帐户如下所示：example@appspot.gserviceaccount.com 您可以在此处找到信息：[https ://developers.google.com/drive/service-accounts#google_app_engine_project_service_accounts](https://developers.google.com/drive/service-accounts#google_app_engine_project_service_accounts)

```
def _init_service_account(self):

    if os.environ['SERVER_SOFTWARE'].startswith('Development') :
        logging.warning('Service account not used in development')
        return None
    else :        
        SCOPE = 'https://www.googleapis.com/auth/drive'
        API_KEY = '.....'                                 # GAE
        credentials = AppAssertionCredentials(scope=SCOPE)
        logging.info('service account : ' + app_identity.get_service_account_name())
        http = credentials.authorize(httplib2.Http())
        return build('drive', 'v2', http=http, developerKey=API_KEY) 
```

# java - Guava：合并两个多图

> ID：14940130
> 
> 赞同：6
> 
> 时间：2013-02-18T15:51:36.253
> 
> 标签：java, guava

我有树类，例如`ClassA`, `ClassB`, `ClassC`。`ClassA`并`ClassB`扩展`ClassC`。我有两个`Multimaps`-`Multimap<Integer, ClassA>`而且`Multimap<Integer, ClassB>`我想将这两个多图合并为一个。我试图找到一些解决方案但没有成功。我试过了。喜欢`Multimap<Integer, ? extends ClassC>`，但我不知道我是否做对了，是否可以将两个多图合并在一起。有人能帮我吗？感谢您的回复，我感谢您的每一个帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T15:54:43.253

`Multimap<Integer, ? extends ClassC>`这意味着泛型类型可以是任何扩展`ClassC`的类型，但类型必须是固定的。即，它可以是 all`ClassA`或 all `ClassB`。所以你应该`Multimap<Integer, ClassC>`改用。它将接受类型`ClassA`和`ClassB`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T15:55:56.687

```
Multimap<Integer, ClassC> combine(Multimap<Integer, ? extends ClassC> a, Multimap<Integer, ? extends ClassC> b) {
  Multimap<Integer, ClassC> combined = new SetMultimap<Integer, ClassC>();  // or whatever kind you'd like
  combined.putAll(a);
  combined.putAll(b);
  return combined;
} 
```

# java - Akka 演员可以参与 XA 交易吗？

> ID：14940132
> 
> 赞同：4
> 
> 时间：2013-02-18T15:51:42.000
> 
> 标签：java, jdbc, akka, xa

[Akka](http://akka.io/)演员可以参与[XA 交易](http://www.narendranaidu.com/2006/01/what-are-xa-transactions-what-is-xa.html)吗？例如，参与者能否在与数据库操作相同的 XA 事务中向远程参与者发送消息（假设 JDBC 驱动程序是 XA 驱动程序），这样如果数据库操作失败，参与者就不会发送消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T11:39:19.240

您可以连接事务同步，以便在提交 tx 时发送消息。

但请记住消息发送语义。Actor 通信中没有 ACID 保证。这根本不是所希望的。

# php - 使用 php（撇号）将文本区域中的文本保存在 mysql 数据库中

> ID：14940136
> 
> 赞同：0
> 
> 时间：2013-02-18T15:52:01.990
> 
> 标签：php, mysql

html

```
<form id = "recall_TextArea2" method="post" action="SaveRecall2.php">
    <center><textarea name="recall_Info" cols="60" rows="30em"></textarea></center>
</form> 
```

php

```
if (isset($_POST['recall_Info'])) {
    $recall_Info = $_POST['recall_Info'];
}
else {
    echo "nothing was recalled.";
}

$recall_Info = stripslashes($recall_Info);
$recall_Info = mysqli_real_escape_string($recall_Info);
$update_sql = "UPDATE  `participants` SET  `recall_1` =  '$recall_Info' WHERE  `school_id` =825776 LIMIT 1 ;"; 
```

我希望能够在带有撇号的文本区域中输入文本，但每次我尝试时，它都不起作用。

当我取出时它会保存普通文本（没有撇号）

```
$recall_Info = stripslashes($recall_Info);
$recall_Info = mysqli_real_escape_string($recall_Info); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:12:25.310

我会说看看您是否正确访问您的表单/发布数据。也许在 sql 之前回显您的表单数据以查看发生了什么。

这对我有用，我没有更改您的 sql 查询：

```
$username = "root";
$password = "root";
$host = "localhost";
$dbname = "test";

$mysqli = new mysqli($host, $username, $password, $dbname);

$recall_Info ="this is new recall info text";

$update_sql = "UPDATE  `participants` SET  `recall_1` =  '$recall_Info'  '' WHERE       `school_id` ='825776' LIMIT 1;";

$stmt = $mysqli->stmt_init();
$stmt->prepare($update_sql);
$stmt->execute();

if ($stmt->affected_rows > 0) {
$OK = true;
}
if ($OK) {
echo 'update successful';
} 
```

# jquery - Phonegap + jQuery - 如何在 div 中输出代码？

> ID：14940140
> 
> 赞同：1
> 
> 时间：2013-02-18T15:52:15.983
> 
> 标签：jquery, cordova, append

我有一个 Phonegap 应用程序并使用 jQuery“ [append()](http://api.jquery.com/append/) ”。有没有办法把这条线作为输出放在 div 中？

```
<p><a href="javascript:sound(2)"><img class="swapImageClick {src: 'soundoff.png'}" src="soundon.png /></a></p> 
```

和

```
$('#div2').append (''); 
```

和

```
$('#div2').html (''); 
```

由于“”和“”，我没有运气

也许有一种方法可以拆分这个..？还是其他功能...？或其他字符掩码..？

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T15:54:19.057

您的 HTML 一开始就无效。`\"`然后，您可以使用or转义引号`\'`。

你可以这样做 ：

```
var html = '<p><a href="javascript:sound(2)">'
   + '<img class="swapImageClick {src: \'soundoff.png\'}" src="soundon.png">'
   + '</a></p>';
$('#div2').html (html); 
```

但我可能会遗漏一些东西，因为你的`class`属性很奇怪。你想用这个`{src`东西做什么？假设这只是一个意外，也许你想要

```
var html = '<p><a href="javascript:sound(2)">'
   + '<img class="swapImageClick" data-swap-image-click-src="soundoff.png" src="soundon.png">'
   + '</a></p>';
$('#div2').html (html); 
```

一旦您开始使用转义引号，开始寻找另一种解决方案可能会更明智。例如 ：

```
var img = $('<img>', {
    class: 'swapImageClick',
    'data-swap-image-click-src': 'soundoff.png',
    src: 'soundon.png'
});
$('#div2').append(
     $('<p>').append(
       $('<a>').append(img)
     )
); 
```

# c++ - 如何在 Visual Studio 中识别缺失的类型名

> ID：14940147
> 
> 赞同：1
> 
> 时间：2013-02-18T15:52:47.813
> 
> 标签：c++, visual-studio

无论如何要识别 VS 中缺少的类型名吗？VS 至少会产生某种警告吗？

```
template<class T> 
void dum() {
  std::vector<T> dum_vector;
  typename std::vector<T>::iterator it = dum_vector.begin(); 
  // VS compiles it with or without typename, but I would like to know whether 
  // I forgot to put a typename, since without typename the code may not compile 
  // with another compiler (e.g. GCC)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:44:30.510

我不确定它是否 100% 符合标准，但 MSVC 会为所有或大多数明确需要的情况生成[编译器警告（级别 1）C4346 。](http://msdn.microsoft.com/en-us/library/tsx7wabs%28v=vs.110%29.aspx)`typename`因此，只要您使用编译器标志`/W1`或更高版本进行编译，就应该没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:02:25.957

实际上在当前版本的 C++（即 C++11）中，你不需要写那么多。你可以这样写：

```
auto it = dum_vector.begin(); 
```

你就完成了。

请注意，`auto`从 MSVC10 开始支持，因此如果您正在使用它，我建议您使用`auto`. `blah::blah::iterator`如果您使用的是旧版本，最好升级并尽可能利用 C++11 功能的优势。如果你不能这样做，那么MSVS 就**不太可能**告诉你缺少的类型名，因为编译器首先编译了非标准代码！

# objective-c - 仅对 UIBarButtonItem 中的图像进行动画处理

> ID：14940151
> 
> 赞同：4
> 
> 时间：2013-02-18T15:52:57.993
> 
> 标签：objective-c, uiimageview, rotation, uibarbuttonitem, uiviewanimation

我已经在 2 个应用程序中看到了这种效果，我真的很想知道如何做到这一点。

动画在 UIBarButtonItem 中，并且只针对图像。图像是 + 符号，它旋转到 X。

如果您想看到效果，您必须与某人开始对话，然后在文本输入旁边有用于图像和表情符号的 + 按钮。或者这是另一个应用程序中效果的视频，在他点击条形按钮后，您会看到它旋转到 X，[http://www.youtube.com/watch?v=S8JW7euuNMo](http://www.youtube.com/watch?v=S8JW7euuNMo)。

我已经找到了如何实现效果，但仅在 UIImageView 上，我必须关闭所有自动调整大小并且视图模式必须居中，然后对其应用旋转变换。我已经尝试了许多尝试让它在栏项目中工作的方法，到目前为止，最好的方法是添加一个图像视图实例，然后设置它并将视图模式设置为居中并自动调整大小，然后使用该图像视图进行自定义栏项目视图。但是当我这样做时，效果会起作用，除非在它这样做时，图像会稍微偏向一边，而不是停留在它已经在的位置。我尝试在动画之前获取中心并在动画期间设置它，但这并没有做任何事情。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T21:36:38.520

所以这个问题的答案是你必须创建一个 Image 视图的实例，然后设置它而不调整大小并且视图模式居中。然后将图像视图添加到具有自定义类型的 UIButton 中，然后将按钮用作栏项的自定义视图。

```
- (IBAction)animate {
    [UIView animateWithDuration:0.5 delay:0.0 options:UIViewAnimationOptionCurveLinear animations:^{
        imageView.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(45));
    } completion:^(BOOL finished) {
        imageView.transform = CGAffineTransformMakeRotation(DEGREES_TO_RADIANS(0));
        if ([imageView.image isEqual:[UIImage imageNamed:@"Add.png"]]) {
            imageView.image = [UIImage imageNamed:@"Close.png"];
        }
        else imageView.image = [UIImage imageNamed:@"Add.png"];
    }];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    imageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"Add.png"]];
    imageView.autoresizingMask = UIViewAutoresizingNone;
    imageView.contentMode = UIViewContentModeCenter;
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    button.frame = CGRectMake(0, 0, 40, 40);
    [button addSubview:imageView];
    [button addTarget:self action:@selector(animate) forControlEvents:UIControlEventTouchUpInside];
    imageView.center = button.center;
    barItem = [[UIBarButtonItem alloc] initWithCustomView:button];
    navItem.rightBarButtonItem = barItem;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-08-19T14:33:26.890

最近不得不在 Swift 中做同样的事情。我[创建了一个教程](http://www.thorntech.com/2015/08/how-to-animate-a-bar-button-item-swift/)，其中包括启动项目和最终项目，并逐步介绍了一些技巧。代码如下所示：

```
@IBOutlet weak var rightBarButton: UIBarButtonItem! {
    didSet {
        let icon = UIImage(named: "star")
        let iconSize = CGRect(origin: CGPointZero, size: icon!.size)
        let iconButton = UIButton(frame: iconSize)
        iconButton.setBackgroundImage(icon, forState: .Normal)
        rightBarButton.customView = iconButton
        rightBarButton.customView!.transform = CGAffineTransformMakeScale(0, 0)

        UIView.animateWithDuration(1.0,
            delay: 0.5,
            usingSpringWithDamping: 0.5,
            initialSpringVelocity: 10,
            options: .CurveLinear,
            animations: {
                self.rightBarButton.customView!.transform = CGAffineTransformIdentity
            },
            completion: nil
        )    

        iconButton.addTarget(self, action: "tappedRightButton", forControlEvents: .TouchUpInside)        
    }
}

func tappedRightButton(){
    rightBarButton.customView!.transform = CGAffineTransformMakeRotation(CGFloat(M_PI * 6/5))
    UIView.animateWithDuration(1.0) {
        self.rightBarButton.customView!.transform = CGAffineTransformIdentity
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-24T15:25:34.887

我想保持原生`UIBarButtonItem`视图提供的扩展点击大小（例如`-initWithBarButtonSystemItem:target:action:`vs `-initWithCustomView:`）。

这是我的代码的基本实现。

```
- (void)setup {
    self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(navigationBarRightAction)];
}

- (void)navigationBarRightAction {
    UIView *itemView = [self.navigationItem.rightBarButtonItem performSelector:@selector(view)];
    UIImageView *imageView = [itemView.subviews firstObject];

    if (self.shouldRotate) {
        imageView.contentMode = UIViewContentModeCenter;
        imageView.autoresizingMask = UIViewAutoresizingNone;
        imageView.clipsToBounds = NO;
        imageView.transform = CGAffineTransformMakeRotation(M_PI_4);

    } else {
        imageView.transform = CGAffineTransformIdentity;
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-02-05T23:53:16.010

您不必将按钮用作自定义视图，它实际上可以使用更少的代码使用 UIImageView 并添加 UITapGestureRecognizer。

我希望我下面的解决方案可以帮助我在这个问题上苦苦挣扎了很长时间的人，直到我得到了条形按钮项目来接收点击并让它与我想要的所有功能一起工作。就我而言，我制作了一个“警报铃”栏按钮项目，当有通知时会发出叮当声，然后在点击时切换到新的 tableview 控制器。

这是我的解决方案（Swift 5）：

```
@IBOutlet weak var notifyBell: UIBarButtonItem!

    func updateNumNotesAndAnimateBell(_ numNotes: Int) {

    guard let image = UIImage(named: "alertBellFill_\(numNotes)") else { return }
    let imageView = UIImageView(image: image)
    notifyBell.customView = imageView
    notifyBell.customView?.contentMode = .center
    let tap = UITapGestureRecognizer(target: self, action: #selector(notifyBellPressed))
    notifyBell.customView?.addGestureRecognizer(tap)

    let scaleTransformA = CGAffineTransform(scaleX: 0.8, y: 0.8)
    let rotateTransformA = CGAffineTransform(rotationAngle: 0.0)
    let hybridTransformA = scaleTransformA.concatenating(rotateTransformA)
    let rotateTransformB = CGAffineTransform(rotationAngle: -1*CGFloat.pi*20.0/180.0)
    let hybridTransformB = scaleTransformA.concatenating(rotateTransformB)

    notifyBell.customView?.transform = hybridTransformA
    UIView.animate(withDuration: 3,
                   delay: 1,
        usingSpringWithDamping: 0.1,
        initialSpringVelocity: 10,
        options: [.allowUserInteraction, .curveEaseInOut],
        animations: {
            self.notifyBell.customView?.transform = numNotes > 0 ? hybridTransformB : scaleTransformA
        },
        completion: nil
    )

}
@objc func notifyBellPressed(_ sender: UIBarButtonItem) {
    performSegue(withIdentifier: "goToNotificationsTVC", sender: self)
} 
```

我的主要发现是：

-- .allowUserInteraction 必须包含在动画选项中，否则 UIBarButtonItem 在动画完成之前不会处于活动状态。

-- 在使用 CGAffineTransform(rotationAngle: ) 时，您可能必须声明 YourBarButtonItem.customView?.contentMode = .center ，否则它会在尝试旋转时扭曲您的图像。

-- 上面的代码包括一个缩放动画和旋转动画，这取决于我有多少通知。零通知时，图像是一个空铃铛，否则，它会在铃铛图像中显示通知数量。我可能可以通过更新标签来做到这一点，但我已经为每个标签制作了单独的 PNG，所以效果很好。

# c# - 在 System.Data.SqlCommand (C#) 中使用子查询 - 语法错误，在 SQL Server Mgmt Studio 中工作

> ID：14940157
> 
> 赞同：3
> 
> 时间：2013-02-18T15:53:08.027
> 
> 标签：c#, join, subquery, sqlcommand

我得到了一个包含子查询的 Web 服务使用的查询。在 SQL Server Management Studio 中执行查询时，它工作正常。但是，在 web 服务中使用它作为`SqlCommand`，我得到：

> *System.Data.SqlClient.SqlException：关键字“JOIN”附近的语法不正确。关键字“AS”附近的语法不正确。*

插入额外的字符让我发现错误指的是子查询之后的位置。

查询如下：

```
SELECT H.H_ID AS ID, H.Name, TD.TDValue, A.A_ID, A_C.Value
FROM 
    H CROSS JOIN 
        A JOIN
            (SELECT TD.A_ID, TD.H_ID, MAX(cast(TD.Version AS bigint)) AS Version FROM TD GROUP BY TD.A_ID, TD.H_ID) AS TData ON TData.H_ID = H.H_ID AND TData.A_ID = A.A_ID LEFT JOIN
                TD2 ON TD2.H_ID = H.H_ID AND TD2.A_ID = A.A_ID AND TD2.Version = TData.Version LEFT JOIN 
                    A_C ON A_C.A_ID = A.A_ID AND cast(A_C.R AS CHAR) = cast(TD.TDValue AS CHAR)
WHERE   (H.Info = 1); 
```

需要子查询来获取表 TD 条目的最后一个版本。如果有更好的方法可以做到这一点，请随时告诉我。:-)

C# 中的 SqlCommand 是否存在 MS SQL 中不存在的任何限制，或者我做错了什么？

我将非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T18:04:02.917

我认为在这种情况下使用公用表表达式会更有效。我不是 100% 这正是您所需要的，因为我不知道您的数据库结构和数据需求，但这应该会有所帮助。

```
;with
cte_Tdata AS
(
    SELECT 
         TD.A_ID
        ,TD.H_ID
        ,MAX(cast(TD.Version AS bigint)) AS Version 
    FROM 
        TD 
    GROUP BY 
         TD.A_ID
        ,TD.H_ID
),cte_TD AS
(
    SELECT
        TD.A_ID
        ,TD.H_ID
        ,TD.TDValue
    FROM
        TD
)
SELECT H.H_ID AS ID, H.Name, cte_TD.TDValue, A.A_ID, A_C.Value
FROM 
    H CROSS JOIN 
        A JOIN cte_Tdata ON cte_Tdata.H_ID = H.H_ID 
                    AND cte_Tdata.A_ID = A.A_ID 
            INNER JOIN cte_TD ON cte_Tdata.H_ID = cte_TD.H_ID 
                             AND cte_Tdata.A_ID = cte_TD.A_ID
            LEFT JOIN A_C ON A_C.A_ID = A.A_ID 
                         AND cast(A_C.R AS CHAR) = cast(cte_TD.TDValue AS CHAR)
        LEFT JOIN TD2 ON TD2.H_ID = H.H_ID 
                     AND TD2.A_ID = A.A_ID 
                     AND TD2.Version = cte_Tdata.Version 

WHERE 
    H.Info = 1; 
```

# css - CSS :hover 影响 2 个元素

> ID：14940158
> 
> 赞同：2
> 
> 时间：2013-02-18T15:53:11.533
> 
> 标签：css

所以我有一些 CSS 生成这个。

![CSS 菜单](../Images/a4bbc0f743aa310e96efba1e0062edbf.png)

HTML 代码如下。

```
<div class="menu">
                <ul>
                <li><a href='index.html'>Home</a></li>
                <div class="menutab"></div>
                <li><a href='about_us.html'>About Us</a></li>
                <div class="menutab"></div>
                <li><a href='#'>Order Online</a></li>
                <div class="menutab"></div>
                <li><a href='gallery.html'>Gallery</a></li>
                <div class="menutab"></div>
                <li><a href='#'>Contact Us</a></li>
                <div class="menutab"></div>
                </ul>
            </div> 
```

和 CSS

```
.menu {
    width: 100%;
    height: 220px;
    float: left;
    margin-left: -20px;
    position: relative;
    text-align: center;
}

.menu li{
    display: block;
    list-style: none;
    width: 100%;
    background: #EBE5D9;
    height: 50px;
    margin-left: -40px;
    margin-top: 5px;
    line-height: 50px;
}

.menu li:hover {
    background: #AEC32A;
}

.menu li a{
    text-decoration: none;
    font-size: 20px;
    color: #000000;
    font-family: fantasy;
}

.menutab {
    width: 30px;
    position: relative;
    margin-top: -3px;
    margin-left: -71px;
    border-right: 21px solid #EBE5D9;
    border-bottom: 21px solid transparent;
} 
```

基本上我想要的是悬停效果将整个东西变成绿色，目前 .menu li:hover 将块变成颜色 #AEC32A 但我也希望它把 .menutab 边框变成相同的颜色，无论如何这样做？最好不使用Javascript。

在此先感谢您的帮助 ：-）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T15:57:10.920

试试相邻的选择器。

```
.menu li:hover+.menutab {
    border-right-color: #AEC32A;
} 
```

[JS Bin 演示](http://jsbin.com/udunax/1/edit)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T15:58:11.500

[这对相邻的兄弟组合](http://www.w3.org/TR/selectors/#adjacent-sibling-combinators)器没有问题。

只需将其添加到您的 CSS 中：

```
.menu li:hover + .menutab{
    border-right-color: #AEC32A;
} 
```

这将选择第一个元素 ( ) 的紧接`.menutab`在前的元素 ( `.menu li:hover`)。

看[现场演示](http://jsfiddle.net/hV6LA/)

如果您不关心旧的 IE，[浏览器支持是 100% <(=) 8;)](http://www.quirksmode.org/css/selectors/#link2)

# google-maps - AngularUI - 谷歌地图 - 删除标记

> ID：14940159
> 
> 赞同：5
> 
> 时间：2013-02-18T15:53:14.563
> 
> 标签：google-maps, angularjs, angular-ui

我以这种方式使用 AngularUI Google Maps 指令：

**更新数据.html**

```
<div ng-repeat="marker in myMarkers" ui-map-marker="myMarkers[$index]"></div>

<div class="control-group">
    <label class="control-label">Situación</label>
    <div class="controls">
        <div id="map_canvas" ui-map="model.myMap" class="map" ui-event="{'map-click': 'addMarker($event)'}" ui-options="mapOptions"></div>
    </div>
</div> 
```

**更新控制器**

```
if (!$scope.myMarkers) {
    $scope.myMarkers = [];
}

if (!$scope.myMap) {
    $scope.model = {
        myMap: undefined
    };
}

$scope.mapOptions = {
    center : new google.maps.LatLng(35.784, -78.670),
    zoom : 15,
    mapTypeId : google.maps.MapTypeId.ROADMAP
};

$scope.addMarker = function($event) {
    $scope.myMarkers.push(new google.maps.Marker({
        map : $scope.model.myMap,
        position : $event.latLng
    }));

    $scope.event.lat = $event.latLng.lat();
    $scope.event.lng = $event.latLng.lng();
}; 
```

我可以添加新标记，并且地图已成功更新，因为我无法删除它们。我要做的是：

```
$scope.myMarkers.splice(0, $scope.myMarkers.length); 
```

`myMarkers`数组变空，但地图仍包含已删除的标记。似乎`myMarkers`在将新标记推送到数组时数组和映射是同步的，但在清除`myMarkers`数组时却不是。`myMarkers`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T17:15:29.533

试试`myMarker.setMap(null)`。

您仍然必须使用 Google Maps API 来完成所有操作，这并不涉及太多魔法。唯一的原因`ui-map-marker`是指令是为了让您可以轻松地将 DOM 事件连接到您的标记

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-18T18:18:06.777

我回答自己。在执行此行之前

```
$scope.myMarkers.splice(0, $scope.myMarkers.length); 
```

应该这样做：

```
angular.forEach($scope.myMarkers, function(marker) {
    marker.setMap(null);
}); 
```

# android - ListActivity 性能问题

> ID：14940160
> 
> 赞同：2
> 
> 时间：2013-02-18T15:53:15.237
> 
> 标签：android, sqlite, memory-leaks, listactivity, hprof

我的`ListActivity`. 当我打开它并开始滚动时，应用程序会冻结几秒钟，然后就可以平滑滚动了。我没有收到“应用程序未响应”错误。我做了一个`*.hprof`堆转储并将其放入 MAT。在这里你可以看到我的泄漏：

![使用 MAT 进行内存分析](../Images/5f22673735e6311b2739c46fb1e9da49.png)

![内存泄漏嫌疑人](../Images/d0115f744ac28c4d1ed5b058e03d4fa2.png)

好像有什么鱼腥味。也许我没有以正确的方式使用光标。在这里你可以看看我的代码：

```
public class ListViewActivity extends ListActivity implements OnClickListener {

    // Resources
    static String like;

    // Cursor
    private SimpleCursorAdapter adapter;
    private Cursor cursor;
    String[] showColumns;
    int[] showViews;

    // Database
    private DBAccess dbAccess;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        // Remove title bar
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_listview);

        ListViewActivity.like = "";
        Intent intent = getIntent(); // gets the previously created intent
        ListViewActivity.like = intent.getStringExtra("like");

        new DatabaseTask().execute(null, null, null);
    }

    @Override
    protected void onListItemClick(ListView l, View v, int position, long id) {     
        Cursor item = (Cursor) getListAdapter().getItem(position);
        Intent intent = new Intent(ListViewActivity.this, ListClickActivity.class);
        intent.putExtra("id", item.getString(0));
        startActivity(intent);
    }

    private class DatabaseTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected Void doInBackground(Void... params) {
            Log.v("doInBackground", "started!");

            dbAccess = new DBAccess(ListViewActivity.this, 1, "FishingMatey.db");

            dbAccess.initDownloadedDatabase();

            cursor = dbAccess
                    .createBewirtschafterListViewCursor(ListViewActivity.like);

            showColumns = new String[] { "gewName", "reviergrenzen" };
            showViews = new int[] { R.id.datensatz_gewName,
                    R.id.datensatz_reviergrenzen };

            Log.v("doInBackground", "finished!");

            return null;
        }

        protected void onPostExecute(Void params) {
            adapter = new SimpleCursorAdapter(ListViewActivity.this,
                    R.layout.datensatz, cursor, showColumns, showViews);

            setListAdapter(adapter);

            dbAccess.closeDatabase();

            Log.v("onPostExecute", "finished!");
        }
    }
} 
```

**EDIT1：**
问题不是来自数据库，因为我与以下代码有相同的泄漏：

```
public class ListViewActivity extends ListActivity {
// Activity
public static Activity forFinish;

// Resources
static String like;

// Cursor
private SimpleAdapter adapter;
String[] showColumns;
int[] showViews;

@Override
public void onCreate(Bundle savedInstanceState) {
    // Remove title bar
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_listview);

    forFinish = this;

    ListViewActivity.like = "";
    Intent intent = getIntent(); // gets the previously created intent
    ListViewActivity.like = intent.getStringExtra("like");

    // create the grid item mapping

    showColumns = new String[] { "gewName", "reviergrenzen" };
    showViews = new int[] { R.id.datensatz_gewName,
            R.id.datensatz_reviergrenzen };

    // prepare the list of all records
    List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();

    for (int i = 0; i < 20; i++) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("gewName", "See" + i);
        map.put("reviergrenzen", "Revier" + i);
        fillMaps.add(map);

    }
    // fill in the grid_item layout

    SimpleAdapter adapter = new SimpleAdapter(this, fillMaps,
            R.layout.datensatz, showColumns, showViews);

    setListAdapter(adapter);

}
} 
```

如果有人能找到内存泄漏，那就太棒了。
问候迈克！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:38:20.333

如果您在列表项中使用图像，则将图像加载移动到后台任务。你可以看看[smoothie](https://github.com/lucasr/smoothie)，一个异步加载列表，可以与[Android-BitmapCache](https://github.com/chrisbanes/Android-BitmapCache)一起使用以获得更好的性能。

# java - Wicket LoadableDetachableModel 异常处理问题

> ID：14940164
> 
> 赞同：2
> 
> 时间：2013-02-18T15:53:27.633
> 
> 标签：java, wicket, wicket-1.5

在我的项目中，我使用如下所示的 LoadableDetachableModel。

```
public ReportPage(final Objectm, final PageReference pr) throws CustomException{
try{
final LoadableDetachableModel<List<MaintReport>> ldm = 
         new LoadableDetachableModel<List<MaintReport>>() {

            @Override
            protected List<MaintReport>load() {
                **// Some Database operations //** 
                return x;
            }
        };

/*
Several LoadableDetachableModels, PageableListViews, Panels, Fragments  etc.
*/ 
} catch ( Exception ex){
// create Custom Exception 
} finally {
 // Clean up of stuff 
} 
```

问题是覆盖函数**`load()`**涉及一些数据库操作。如果从此方法抛出异常或从该方法引发异常，我可以在哪里捕获？. 看来我抓不住了。当我写一些日志消息时，我看到该**`load()`**方法是在整个构造函数执行之后调用的。
我绝对可以将数据库操作移到**`load()`**方法之外。但是有什么办法吗？

如果有人遇到过这种情况，如果您能分享这些信息，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:30:28.493

这段代码只定义了`load()`方法，并没有调用它，所以它抛出的任何异常都不会被这个try-catch捕获。

中的`load()`方法`LoadableDetachableModel`通常只调用`getObject()`也定义在中的方法`LoadableDetachableModel`，该方法是从应用程序中的其他位置和 Wicket 框架本身调用的。

您可能应该在`load()`方法本身内部有一个 try-catch 来处理数据库访问可能发生的任何异常。如果在该方法中存在您无法处理的异常，您可以抛出一个`WicketRuntimeException`包装异常，这通常会导致错误页面。

在该方法之外处理数据库错误将是痛苦的。对另一个答案的评论暗示了您如何继续进行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:05:34.313

这不是异常处理的工作方式。您需要在 LDM 内部进行异常处理。*将您的一些数据库操作*包装在 try-catch 语句中。

# css - 使用 jQuery 切换非活动元素的文本

> ID：14940165
> 
> 赞同：0
> 
> 时间：2013-02-18T15:53:40.330
> 
> 标签：css, menu, slidetoggle, jquery

所以我试图创建一个菜单元素，在页面上显示和隐藏特定的 div，同时还更改菜单的文本。经过一番搜索，我大部分都解决了（尽管我知道代码有点笨拙）：

```
$(document).ready(function(){
            $('.section[id="option1"]').click(function(){
                    $(this).text($(this).text() == 'OPTION1' ? 'OPTION1 >>' : 'OPTION1');
                    $('.blurb').not('.blurb[id="option1"]').hide();
                    $('.blurb[id="option1"]').slideToggle();
                });
            $('.section[id="option2"]').click(function(){
                    $(this).text($(this).text() == 'OPTION2' ? 'OPTION2 >>' : 'OPTION2');
                    $('.blurb').not('.blurb[id="option2"]').hide();
                    $('.blurb[id="option2"]').slideToggle();
                });
            $('.section[id="option3"]').click(function(){
                    $(this).text($(this).text() == 'OPTION3' ? 'OPTION3 >>' : 'OPTION3');
                    $('.blurb').not('.blurb[id="option3"]').hide();
                    $('.blurb[id="option3"]').slideToggle();
                });
            $('.section[id="option4"]').click(function(){
                    $(this).text($(this).text() == 'OPTION4' ? 'OPTION4 >>' : 'OPTION4');
                    $('.blurb').not('.blurb[id="option4"]').hide();
                    $('.blurb[id="option4"]').slideToggle();
                });
            $('.section[id="option5"]').click(function(){
                    $(this).text($(this).text() == 'OPTION5' ? 'OPTION5 >>' : 'OPTION5');
                    $('.blurb').not('.blurb[id="option5"]').hide();
                    $('.blurb[id="option5"]').slideToggle();
                });
            $('.section[id="option6"]').click(function(){
                    $(this).text($(this).text() == 'OPTION6' ? 'OPTION6 >>' : 'OPTION6');
                    $('.blurb').not('.blurb[id="option6"]').hide();
                    $('.blurb[id="option6"]').slideToggle();
                });
        }); 
```

（可以在[这里](http://m35h.tumblr.com)查看完整的代码）

此代码在大多数情况下都有效，除了如果您已经显示了某个元素 (class="blurb")，当您单击另一个元素的菜单项 (class="section") 时，菜单会指示另一个元素元素仍处于打开状态。似乎必须有一种简单的方法可以在单击时附加或删除所需的文本，但我似乎找不到一个好的方法。是否值得使用类似[expander.js](http://plugins.learningjquery.com/expander/)的东西重写代码？

这是受影响的html

```
<div class="nav">
    <div class="section" id="option1">option1</div>
    <div class="section" id="option2">option2</div>
    <div class="section" id="option3">option3</div>
    <div class="section" id="option4">option4</div>
    <div class="section" id="option5">option5</div>
    <div class="section" id="option6">option6</div>
 </div>

        <div class="blurb hidden" id="option1">
        <h1>content for option1</h1>
    </div>
    <div class="blurb hidden" id="option2">
        <h1>content for option2</h1>
    </div>
    <div class="blurb hidden" id="option3">
        <h1>content for option3</h1>
    </div>
    <div class="blurb hidden" id="option4">
        <h1>content for option4</h1>
    </div>
    <div class="blurb hidden" id="option5">
        <h1>content for option5</h1>
    </div>
    <div class="blurb hidden" id="option6">
        <h1>content for option6</h1>
    </div> 
```

我对 jQuery 还很陌生，因此非常感谢任何建议/指针。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:08:29.713

[`:after`](https://developer.mozilla.org/en-US/docs/CSS/%3a%3aafter)我使用自定义类和CSS 样式解决了您的问题：http: [//jsfiddle.net/mblase75/sDrZ2/3/](http://jsfiddle.net/mblase75/sDrZ2/3/)

首先，一些CSS来附加箭头并转换为大写而不直接修改文本：

```
.uppercase {
    text-transform: uppercase;
}
.uppercase.arrowed:after { 
    content: " >>";
} 
```

添加对 HTML 的一些更改以利用[`data-`](http://api.jquery.com/data)属性，删除重复的 ID 并添加一个`arrowed`JS 切换的类：

```
<div class="nav">
    <div class="section arrowed" data-blurb="option1">option1</div>
    <div class="section arrowed" data-blurb="option2">option2</div>
    <div class="section arrowed" data-blurb="option3">option3</div>
    <div class="section arrowed" data-blurb="option4">option4</div>
    <div class="section arrowed" data-blurb="option5">option5</div>
    <div class="section arrowed" data-blurb="option6">option6</div>
</div> 
```

最后，重写以[优化](http://api.jquery.com/siblings)您的 JavaScript：

```
 $('.section').click(function () {
     $(this).addClass('uppercase').toggleClass('arrowed')
         .siblings('.section').removeClass('arrowed');
     $('#'+$(this).data('blurb')).slideToggle()
         .siblings('.blurb').hide();
 }); 
```

请注意，`arrowed`该类已切换，因此需要最初添加它，以便在第一次单击时将其关闭。

# javascript - Twitter Bootstrap 使用“折叠”插件扩展文本

> ID：14940166
> 
> 赞同：4
> 
> 时间：2013-02-18T15:53:46.413
> 
> 标签：javascript, jquery, twitter-bootstrap

有没有人想出如何在显示一些文本（比如 100 个字符）的地方使用[twitter bootstrap collapse 插件](http://twitter.github.com/bootstrap/javascript.html#collapse)，然后单击按钮展开文本以显示其余部分？

[这是一个 JSFiddle，它演示了我遇到的以下问题](http://jsfiddle.net/trpeters1/VNdmZ/3/)：

1.  隐藏的文本显示在**新**行上。如果句子不会在视觉上受到干扰，那就更好了。
2.  指示器的`icon-plus-sign`显示未切换（在显示隐藏文本时不会消失，反之亦然）。

完全工作的 HTML：

```
<link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet">
<script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/js/bootstrap.min.js"></script>

<div class="" data-toggle="collapse" data-target="#div1" >
     <span><b>Div1:</b> This is a sentence at the end of the first 100 characters that gets truncated </span>
 <i class='icon-plus-sign'></i> 
</div>
<div id="div1" class="collapse" >such that characters 101 to infinity are not shown inline with the beginning of the sentence (<b>Div1</b>).</div>

<div class="" data-toggle="collapse" data-target="#div2" >
 <span><b>Div2:</b>This is a sentence at the end of the first 100 characters that gets truncated </span>
 <i class='icon-plus-sign'></i> 
</div>
<div id="div2" class="collapse" >such that characters 101 to infinity are not shown inline with the beginning of the sentence (<b>Div2</b>).</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T21:48:23.827

我通过添加以下 JavaScript 使其工作：

```
$("div").on("hide", function() {
    $(this).prev("div").find("i").attr("class","icon-plus-sign");
    $(this).css("display","");
    $(this).css("height","5px");
});
$("div").on("show", function() {
    $(this).prev("div").find("i").attr("class","icon-minus-sign");
    $(this).css("display","inline");
    $(this).css("height","5px");
}); 
```

以及以下 CSS：

```
div[data-toggle="collapse"] {
    float: left;
} 
```

[小提琴示例在这里](http://jsfiddle.net/mccannf/Bupq7/3/)。

### 边注

我个人不会为此使用 Bootstrap 折叠插件。我会结合使用像[JQuery Expander](https://github.com/kswedberg/jquery-expander)这样的专用插件和 Bootstrap 图标。

一个不同的[例子小提琴是here](http://jsfiddle.net/pz24h/49/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T22:04:13.970

我同意另一篇文章，即折叠插件不适用于此。实际上很容易编写一些可以很好地处理这个问题的东西。例如，通过将隐藏文本包装在`<span class="truncated">`：

```
<p>
 This is the visible part <span class="truncated">this is the hidden part.</span>
</p> 
```

然后隐藏它，附加隐藏/显示图标，并切换状态：

```
$('.truncated').hide()                       // Hide the text initially
    .after('<i class="icon-plus-sign"></i>') // Create toggle button
    .next().on('click', function(){          // Attach behavior
    $(this).toggleClass('icon-minus-sign')   // Swap the icon
        .prev().toggle();                    // Hide/show the text
}); 
```

这利用了`icon-minus-sign`类的优先级`icon-plus-sign`，但如果它让你感觉更安全，你可以为两者添加一个切换。

演示：http: [//jsfiddle.net/VNdmZ/4/](http://jsfiddle.net/VNdmZ/4/)

# node.js - 如何将无效的表单字段返回到页面？

> ID：14940167
> 
> 赞同：0
> 
> 时间：2013-02-18T15:53:49.560
> 
> 标签：node.js, express

这是创建和编辑表单数据的经典案例。我有一个复杂的表单，假设要渲染所有字段以验证它，但它不起作用。对于这种情况，我创建了一个简单的示例来说明我的担忧并尝试了解发生了什么。

在这个示例应用程序**主体解析器**和**方法覆盖**中：

```
app.use(express.bodyParser());
app.use(express.methodOverride()); 
```

现在我在**user.jade**中有一个简单的表单：

```
doctype 5
html
    header
        title Add new user
    body
        h4 User - Add
        form(id='userForm', method='post', action='/user/save')
            label(for='name') Name
            input(type='text', id='name', name='name')
            label(for='address') Address
            input(type='text', id='address', name='address')
            input(type='submit', value='Save') 
```

配置了**GET**和**POST** HTTP 方法：

```
app.get('/user/new', user.create); //create new user
app.post('/user/save', user.save); //save or edit user in validation process 
```

最后是**“创建”**和**“编辑/保存”**功能：

```
exports.create = function(req, res) {
    res.render('user');
};

exports.save = function(req, res) {
    var name = req.body.name;
    var address = req.body.address;

    //do some validation
    //...

    //return it back to page to fix wrong fields
    res.render('user', { name: name, address: address });
}; 
```

为什么我渲染 user.jade，所以字段没有填充？不能使用 res.render 填写页面表单？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:57:23.927

在 user.jade 你没有使用 #{name} 或 #{address}

尝试这样的事情来访问局部变量

```
 input(type='text', id='name', name='name', value=#{name}) 
```

# matlab - 将 matlab 样式的索引转换为 numpy

> ID：14940169
> 
> 赞同：2
> 
> 时间：2013-02-18T15:53:56.437
> 
> 标签：matlab, numpy

我想转换（更复杂的形式）以下 Matlab 代码

```
a=zeros(9,9);
a(3+(1:3),6+(1:3))=1; 
```

到 Numpy。我试过

```
from numpy import zeros, r_

a=zeros((9,9))
a[3+r_[0:3],6+r_[0:3]] = 1 
```

但这只会在矩阵中放置 3 个 1。如何在 Python 中以类似（短）的形式编写 matlab 代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T16:05:37.487

老实说，我可能会这样做

```
>>> a = zeros((9,9))
>>> a[3:6, 6:9] = 1 
```

或非硬编码的等价物。但是，如果您希望索引看起来更像 Matlab 的，那么您可以使用[ix_](http://docs.scipy.org/doc/numpy/reference/generated/numpy.ix_.html)：

```
>>> a = zeros((9,9))
>>> a[ix_(3+r_[0:3], 6+r_[0:3])] = 1
>>> a
array([[ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  1.,  1.,  1.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  1.,  1.,  1.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  1.,  1.,  1.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.],
       [ 0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.,  0.]]) 
```

# c# - 如何使用表达式树调用具有引用变量的方法

> ID：14940171
> 
> 赞同：8
> 
> 时间：2013-02-18T15:54:01.853
> 
> 标签：c#, .net, expression-trees

我试图弄清楚如何创建一个调用具有引用参数的方法的表达式。

让我用一个简单（但人为）的例子来解释我的问题。考虑方法：

```
 public static int TwiceTheInput(int x)
    {
        return x*2;
    } 
```

我可以通过执行以下操作创建一个表达式来调用上述方法：

```
 {
        var inputVar = Expression.Variable(typeof (int), "input");
        var blockExp =
            Expression.Block(
                    new[] {inputVar}
                    , Expression.Assign(inputVar, Expression.Constant(10))
                    , Expression.Assign(inputVar, Expression.Call(GetType().GetMethod("TwiceTheInput", new[] { typeof(int) }), inputVar))
                    , inputVar
                    );
        var result = Expression.Lambda<Func<int>>(blockExp).Compile()();
    } 
```

在执行时，上面的“结果”应该以 20 结束。现在考虑一个使用引用参数的 TwiceTheInput() 版本：

```
 public static void TwiceTheInputByRef(ref int x)
    {
        x = x * 2;
    } 
```

如何编写类似的表达式树来调用 TwiceTheInputByRef() 并通过引用传递参数？

解决方案：（感谢 Cicada）。利用：

```
Type.MakeByRefType() 
```

这是生成表达式树的代码段：

```
 {
        var inputVar = Expression.Variable(typeof(int), "input");
        var blockExp =
            Expression.Block(
                    new[] { inputVar }
                    , Expression.Assign(inputVar, Expression.Constant(10))
                    , Expression.Call(GetType().GetMethod("TwiceTheInputByRef", new[] { typeof(int).MakeByRefType() }), inputVar)
                    , inputVar
                    );
        var result = Expression.Lambda<Func<int>>(blockExp).Compile()();
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T16:00:04.063

您不必进行太多更改，只需删除`Assign`并更改`typeof(int)`为`typeof(int).MakeByRefType()`.

```
var blockExp = Expression.Block(
    new[] { inputVar }
    , Expression.Assign(inputVar, Expression.Constant(10))
    , Expression.Call(
       typeof(Program).GetMethod( 
           "TwiceTheInputByRef", new [] { typeof(int).MakeByRefType() }),
       inputVar)
    , inputVar
); 
```

# ios - 如果应用程序尚未打开，则“打开方式...”问题

> ID：14940178
> 
> 赞同：4
> 
> 时间：2013-02-18T15:54:30.853
> 
> 标签：ios, objective-c, appdelegate, ios6.1

我的应用程序可以读取使用“打开方式...”对话框打开的 .txt 文件。我在两个中都实现了我的读取功能

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

和

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

方法。

有趣的是，它似乎只有在应用程序之前打开时才有效。如果我在 ie Mail 中打开一个 .txt 文件并选择“打开方式”然后是我的应用程序。我可以在控制台中看到，

```
-(BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation 
```

被调用。我还可以看到正确文件的 URL，该文件可能位于

> 文件：//localhost/private/var/mobile/Applications/F15C57D0-4F62-4979-943A-2D387488D59C/Documents/Inbox/myFile.txt

但是当我尝试打开文件时，我得到一个文件不存在的 Cocoa 错误。

如果我重复这些步骤（在后台打开应用程序），则找到该文件并立即运行。为什么是这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-01T14:07:49.240

您应该只在`application:openUrl:sourceApplication:annotations`. 根据文档（[https://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:openURL:sourceApplication:annotation：](https://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UIApplicationDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/UIApplicationDelegate/application:openURL:sourceApplication:annotation:) ):

> 如果您的应用必须启动才能打开 URL，则应用首先调用`application:willFinishLaunchingWithOptions:`和`application:didFinishLaunchingWithOptions:`方法，然后调用此方法。这些方法的返回值可用于防止调用此方法。（如果应用程序已在运行，则仅调用此方法。）

因此，不再需要处理打开文件`application:didFinishLaunchingWithOptions:`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:54:17.617

您应该通过使用键从字典中`application:didFinishLaunchingWithOptions:`获取 URL来处理“打开方式..” - 而不是直接传入的.`options``UIApplicationLaunchOptionsURLKey``url``application:openUrl:sourceApplication:annotations`

[https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/OpeningSupportedFileTypes.html#//apple_ref/doc/uid/TP40010412-SW1](https://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/OpeningSupportedFileTypes.html#//apple_ref/doc/uid/TP40010412-SW1)

# c# - 序列化包含数组的对象

> ID：14940180
> 
> 赞同：2
> 
> 时间：2013-02-18T15:54:32.423
> 
> 标签：c#, javascript, asp.net-mvc-3, knockout.js, knockout-mapping-plugin

-这个问题已经自己解决了-

所以我正在尝试使用 knockoutJS 并正在测试映射插件，我在序列化包含和数组的对象时遇到了一些问题

下面是我拥有的控制器和下面的 javascript，我遇到的问题是无论我尝试什么（你可以看到注释掉的尝试修复）我无法让孩子的数组传递给 javascript 以显示孩子-`{"id":5,"name":"Testing this works","children":"[{},{}]"}`是所有的过去。

请有人能指出我正确的方向

```
namespace TestingKnockout.Controllers
{ 
public class child
{
    int id;
    String name;

    public child(int id, string name)
    {
        this.id = id;
        this.name = name;
    }
}
public class HomeController : Controller
{
    public ActionResult Index()
    {
        return View();
    }   

    public virtual string GetData()
    {
        List<child> childrenList = new List<child>(){
                new child(2, "bob"),
                new child(4, "dave")
        };
        var result = new
        {
            id=5,
            name="Testing this works",
            children = childrenList
            //children = Newtonsoft.Json.JsonConvert.SerializeObject(childrenList)
            //children = new{ id = 2, name = "bob" }

        };

        //String resultsToHighlightJSON =                    Newtonsoft.Json.JsonConvert.SerializeObject(childrenList);
        //return resultsToHighlightJSON;
        return new JavaScriptSerializer().Serialize(result);// +resultsToHighlightJSON;
    }
}
} 
```

这是我的javascript：

```
<script language="javascript" type="text/javascript">
  var originalData = {
      id: 1,
      name: "Main",
      children: []
  };

  var updatedData = {
      id: 1,
      name: "Main",
      children: [{ id: 2, name: "bob" }, { id: 3, name: "ted"}]
  };

  function Child(id, name) {
      this.id = ko.observable(id);
      this.name = ko.observable(name);
  }

  var options = {
      children: {
          key: function (data) {
              return ko.utils.unwrapObservable(data.id);
          }
      }
  }

  var viewModel = ko.mapping.fromJS(originalData, options);

  viewModel.counter = 1;
  viewModel.addChild = function () {
      viewModel.children.push(new Child(++viewModel.counter, "new"));
  };

  viewModel.applyUpdate = function () {
  var basePath="<%: Url.Content("~/") %>";
  var url = basePath + 'Home/GetData/';
   $.get(url, function (response) {
              var Employee = $.parseJSON(response);
              $("#EditLink").html("testing this out : " + Employee.children[1].name);
      //ko.mapping.fromJS( updatedData,viewModel);
      ko.mapping.fromJS( Employee,viewModel);
              });
  }

  $(document).ready(function() {
      ko.applyBindings(viewModel);
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T00:42:45.680

`GetData()`在你的函数中试试这个。

```
 return Newtonsoft.Json.JsonConvert.SerializeObject(result); 
```

我从来没有遇到过 JSON.NET 的任何问题，而且我知道它支持匿名类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:16:09.907

```
public class child
{
    public int id { get; set; }
    public String name { get; set; }

    public child(int id, string name)
    {
        this.id = id;
        this.name = name;
    }
} 
```

我的错误是我没有设置公共属性

# .net - 有什么方法可以让 Linq To Sql 生成默认为 value comapre 而不是引用比较的行包装器？

> ID：14940185
> 
> 赞同：0
> 
> 时间：2013-02-18T15:54:48.863
> 
> 标签：.net, linq-to-sql

Linq to Sql 生成的用于表示表中的一行的类默认引用相等性，即调用 Equals()

我们有很多表，并且为每个 Equals() 方法编写覆盖语句将花费太长时间并且立即变得无法维护。

有没有办法让 Linq To SQL 项目类包装器覆盖 Equals() 以计算值相等？

# php - 为类方法设置闭包时遇到问题

> ID：14940191
> 
> 赞同：0
> 
> 时间：2013-02-18T15:54:58.043
> 
> 标签：php, closures, lambda

我正在设计一个类，到目前为止大致类似于以下内容

在 main.php

```
$coolObject = new CoolObject(true);

foreach($array as $key=>$val)
{
    $coolObject->doFunction($val);
} 
```

然后在 CoolObject 内部：

```
class CoolObject
{
    private $_useFunction;

    public function __construct($useFoo)
    {
        //THIS IS WHERE I NEED HELP
        if($useFoo){
            $this->_useFunction = $this->_foo();
        }
        else{
            $this->_useFunction = $this->_bar();
        }
    }

    public function doFunction($values)
    {
        $this->_useFunction($values);
    }

    private function foo($values){
        //do stuff
    }

    private function bar($values){
        //do other stuff
    }
} 
```

我意识到我可以将 if 语句或 switch 放入可以处理此功能的 doFunction 中，但是由于我不喜欢闭包/ lamdas，所以我不确定这是否适合他们，或者我是否完全不在根据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:07:37.633

您想要实现的（据我所知）是 PHP 中的函数指针。

你真的应该看看：[Array Pointer to a function in PHP](http://forums.whirlpool.net.au/archive/953482)

我仍然认为继承将是解决这个问题的最简单/最干净的方法。

所以你可能会以：

类 CoolObject { 私人 $_useFunction;

```
public function __construct($useFoo)
{
    //THIS IS WHERE I NEED HELP
    if($useFoo){
        $this->_useFunction = 'foo';
    }
    else{
        $this->_useFunction = 'bar';
    }
}

public function doFunction($values)
{
//Edited as @newacct corrects
$this->$_useFunction($values); 
}

private function foo($values){
    //do stuff
}

private function bar($values){
    //do other stuff
} 
```

}

# c# - 在扩展视图中动态设置图像的可见性

> ID：14940195
> 
> 赞同：0
> 
> 时间：2013-02-18T15:55:06.000
> 
> 标签：c#, xaml, windows-phone-8, toolkit

我正在尝试实现一些需要显示人员列表和绿色图标（如果他们在线）的东西。这些人按某些类别分组。我正在使用 expanderview 工具包控件来显示列表。那么如何将图标图像设置为动态可见？我试过这样的东西，但没有用。

```
<DataTemplate x:Key="groupsItemTemplate">
            <StackPanel Orientation="Horizontal" Margin="30,5,0,0"">
                <Image Height="30" Width="30" Source="/Assets/Online.png" Margin="10,5,0,0" Visibility="{Binding IsFriendOnline}"></Image>
                <TextBlock TextWrapping="NoWrap" FontFamily="Segoe WP Light" FontSize="24" Margin="8,0,0,0" VerticalAlignment="Center" HorizontalAlignment="left" Height="auto" Width="300" Text="{Binding FriendName}"></TextBlock>
            </StackPanel>
        </DataTemplate> 
```

IsFriendOnline 是一个整数属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:35:04.013

首先，您需要使用转换器将 IsFriendOnline 属性的值转换为所需的 Visibility 枚举。

WPF 内置了“BooleanToVisibilityConverter”，因此如果您有能力将 IsFriendOnline 更改为布尔值（这听起来好像更有意义），我会沿着这条路线走……如果该属性必须是一个整数，那么您将需要推出自己的转换器，这并不困难。

当你有一个转换器时，语法看起来像这样（我下面的代码假设 IsFriendOnline 是一个布尔值）......

```
<BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
    <DataTemplate x:Key="groupsItemTemplate">
                <StackPanel Orientation="Horizontal" Margin="30,5,0,0"">
                    <Image Height="30" Width="30" Source="/Assets/Online.png" Margin="10,5,0,0" Visibility="{Binding IsFriendOnline, Converter={StaticResource BooleanToVisibilityConverter}}"></Image>
                    <TextBlock TextWrapping="NoWrap" FontFamily="Segoe WP Light" FontSize="24" Margin="8,0,0,0" VerticalAlignment="Center" HorizontalAlignment="left" Height="auto" Width="300" Text="{Binding FriendName}"></TextBlock>
                </StackPanel>
            </DataTemplate> 
```

希望这可以帮助...

# html - 在另一个 DIV 中浮动一个 DIV

> ID：14940196
> 
> 赞同：4
> 
> 时间：2013-02-18T15:55:09.220
> 
> 标签：html, css

对于我的网页，我有一个容器 DIV，其中有一个菜单 DIV 和一个内容 DIV。我在内容 DIV 中安排了几个“设置”DIV，我希望它们在内容 DIV 内向左浮动，但较低的 DIV 最终在菜单 DIV 下。

检查这个 jsfiddle 看清楚：http: [//jsfiddle.net/4KUTy/5/](http://jsfiddle.net/4KUTy/5/)

具有的`settings` `divs`属性，`float:right;`但最后一个位于错误的位置，如果 I `float:left;`，则它位于菜单下。

请帮忙。

jsfiddle html代码在这里：

```
<html>
<head/>
<body>
<div id="container">
    <div class="menu">
        <ul>
            <li>menu option 1</li>
            <li>menu option 2</li>
            <li>menu option 3</li>
            <li>menu option A</li>
            <li>menu option B</li>
            <li>menu option C</li>
        </ul>
    </div>
    <div id="content">
        <div class="settings_div">Project Settings<br/>
    <ul style="display:inline-block">
        <li>language</li>
        <li>currency</li>
        <li>mark up</li>
    </ul>
</div>     
<div class="settings_div">Your Company Settings<br/>
    <ul style="display:inline-block">
        <li>company details</li>
        <li>bank details</li>
        <li>contact details</li>
    </ul>
</div>
<div class="settings_div">Output Settings   <br/>
    <ul style="display:inline-block">
        <li>company logo</li>
        <li>date format</li>
        <li>fonts etc</li>
    </ul>
</div>
<div class="settings_div">Graphical Settings<br/>
    <ul style="display:inline-block">
        <li>colors</li>
        <li>text size</li>
        <li>more</li>
    </ul>
</div>
<div class="settings_div">I WANT THIS ONE ON THE LEFT!<br/>
    <ul style="display:inline-block">
        <li>But NOT under the menu</li>
        <li>float:left puts it under the menu</li>
        <li>should be under graphical settings</li>
    </ul>
</div>
    </div>            
 </div>
</body>
</html> 
```

jsfiddle css在这里：

```
.settings_div {
    text-align:left;
    display:inline;
    width:300px;
    height:80px;
    padding:20px;
    padding-top:10px;
    margin:20px;
    margin-top:0px;
    margin-bottom:20px;
    border-color:#33CCCC;
    border-style:solid;
    border-width:thick;
    float:right;
}

#content {
    width:600;
    min-height:620px;
    vertical-align:top;
    display: inline;
}

.menu { 
    padding:5px;
    background-color:#33CCCC;
    float:left;
    text-align:left;
    width:auto;
}

#container {
    margin-bottom:10px;
    background-color:#eee;
    width:950px;
    min-height:620px;
    border-radius:0px;
    position:relative;
    margin-top:-10;
    margin-right:auto;
    margin-left:auto;
    overflow: visible;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:07:26.473

浮动 div 的容器应具有：

```
overflow: hidden; /* Makes the container actually "contain" the floated divs */
display: block; 
```

浮动的 div 应该是

```
float:left 
```

小提琴：http: [//jsfiddle.net/4KUTY/5/](http://jsfiddle.net/4KUTy/5/)

我发现了一个很好的帖子，试图解释为什么溢出：隐藏的工作方式：[http ://colinaarts.com/articles/the-magic-of-overflow-hidden/](http://colinaarts.com/articles/the-magic-of-overflow-hidden/)

如果链接失效：将溢出设置为可见以外的任何内容都会导致它建立新的块格式化上下文（[http://www.w3.org/TR/CSS21/visuren.html#block-formatting](http://www.w3.org/TR/CSS21/visuren.html#block-formatting)）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:07:09.740

这里有两件事是错误的：

*   包装器 div.content 设置为 display: inline。
*   包装器 div.content 无法正确缩放，因为所有子元素都超出了流程。

为了使设置 div 行为正确，请使用：

```
 .content { display: block; overflow: hidden; } 
```

然后向左浮动所有设置div。

查看更新的小提琴：http: [//jsfiddle.net/4KUty/7/](http://jsfiddle.net/4KUTy/7/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T15:59:40.667

只需在最后一个 div 之前添加一个占位符 div

```
<div class="settins_div placeholder">placeholder</div> 
```

并添加 css-rule

```
.placeholder{
visibility: hidden;
} 
```

有一个jsfiddle要检查：[这里](http://jsfiddle.net/DK64V/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:00:34.310

制作 all `settings_div` `float:left;`，但使用另一个向右浮动且足够宽的容器：

```
<div id="setting-container" style="float:right;width:800px;">
    <div class="settings_div">Your Company Settings<br/>
        <ul style="display:inline-block">
            <li>company details</li>
            <li>bank details</li>
            <li>contact details</li>
        </ul>
    </div>
    <div class="settings_div">Output Settings   <br/>
        <ul style="display:inline-block">
            <li>company logo</li>
            <li>date format</li>
            <li>fonts etc</li>
        </ul>
    </div>
    <div class="settings_div">Graphical Settings<br/>
        <ul style="display:inline-block">
            <li>colors</li>
            <li>text size</li>
            <li>more</li>
        </ul>
    </div>
    <div class="settings_div">I WANT THIS ONE ON THE LEFT!<br/>
        <ul style="display:inline-block">
            <li>But NOT under the menu</li>
            <li>float:left puts it under the menu</li>
            <li>should be under graphical settings</li>
        </ul>
    </div>
</div> 
```

[jsfiddle](http://jsfiddle.net/A4JhS/11/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T16:03:18.373

您的 css 规则只有很小的变化：

您应该为菜单添加固定宽度。

```
.menu { 
    padding:5px;
    background-color:#33CCCC;
    float:left;
    text-align:left;
    width:150px;
} 
```

并且您的容器需要向右“移动”该值+边距。所以添加一个`margin-left`：

```
#content {
    width:600;
    min-height:620px;
    vertical-align:top;
    margin-left: 160px;
} 
```

将您的设置`#container`为`overflow: hidden`.

现在每个设置 div 都应该向左浮动。

您的 jsfiddle 的更新版本：http: [//jsfiddle.net/4KUTy/8/](http://jsfiddle.net/4KUTy/8/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-18T16:38:00.127

这是我的结果[http://jsfiddle.net/burn123/4KUTy/10/](http://jsfiddle.net/burn123/4KUTy/10/)

**主要变化**

*   我将很多`float`属性更改为`display:inline-block`. 这样做的原因是所有元素都正确定位自己。
*   我取消了 的宽度`container`，所以现在它的响应速度应该会稍微快一些
*   我删除了`settings_div`类并将 CSS 更改为`#content div`以保存代码
*   添加`display:inline-block`到`ul`CSS 中并从内联样式中删除
*   一个相当大的问题是你有一个内容集的属性`width:600`，当它需要时`width:600px;`。我最终删除了这种风格。
*   因为你有`#container`一个定位`relative`，然后我`margin-top:-10;`改为`top:-10px;`

**小改动**

*   浓缩了很多属性，例如`margin`和`border`
*   从容器中删除了`width`,`overflow`和，因为它们没有任何作用`min-height`

**更新**- [http://jsfiddle.net/burn123/4KUTy/12/](http://jsfiddle.net/burn123/4KUTy/12/)

*   添加`border-box`到每个元素，以便它显示您指定的确切宽度
*   添加了一个流体宽度，`container`以便它在需要时与菜单内联显示，但当它太满时会下拉

# php - phonenumber 正则表达式来修复前缀

> ID：14940199
> 
> 赞同：0
> 
> 时间：2013-02-18T15:55:21.870
> 
> 标签：php, regex

基本上我需要做的是当我有这样的电话号码时：`31655334868`我需要将其更改为：（`1655334868`删除第一个`3`）

但我也可以拥有`0031655334868`，然后我需要将其更改为：`1655334868`.

我如何使用正则表达式在 PHP 中执行此操作？还是有更好的替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:10:19.947

如果你想用正则表达式来做，那么你可以使用下面的代码：

（这也考虑到你可以有一个以 开头的数字`+31`）

```
$phone1 = '31655334868';
$phone2 = '0031655334868';
$phone3 = '+31655334868';

if ( preg_match ( '/^.*3([0-9]{10})$/', $phone2, $matches ) )
{
    print_r($matches);
    echo $matches[1]; // will always contain the desired result
}
else
{
    echo 'no';
} 
```

工作示例：

[http://codepad.viper-7.com/FAuh2c](http://codepad.viper-7.com/FAuh2c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:59:17.267

```
echo substr($phoneNumber, -10); 
```

# ruby-on-rails - 按预定列表排序记录的最佳方式

> ID：14940200
> 
> 赞同：2
> 
> 时间：2013-02-18T15:55:25.697
> 
> 标签：ruby-on-rails, rails-activerecord

为了简单起见，我避免使用枚举作为属性，而是存储字符串值。

我在数组中按预定顺序列出了所有可能的值：`MyTypeEnum.names`

我有一个 ActiveRecord::Relation 记录列表`my_recs = MyModel.order(:my_type)`

以 MyTypeEnum.names 中的值数组指定的顺序通过它们的 :my_type 属性值对 my_recs 中的记录进行排序的最佳方法是什么？

我可以试试这个：

```
my_recs = MyModel.order(:my_type)
ordered_recs = []
MyTypeEnum.names.each do |my_type_ordered|
  ordered_recs << my_recs.where(:my_type => my_type_ordered)
end 
```

但是我是否通过构建数组而不是使用 ActiveRecord::Relation 来降低性能？有没有更清洁的方法？（注意：我可能希望在排序方面具有灵活性，所以我不想假设订单是按照 MyTypeEnum.names 的顺序硬编码的）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:19:39.710

通过对`MyTypeEnum`. 这只需要一个查询（一次抓取所有记录）。

```
ordered_recs = Hash[MyTypeEnum.names.map { |v| [v, []] }]

MyModel.order(:my_type).all.each do |rec|
  ordered_recs[rec.my_type] << rec
end

ordered_recs = ordered_recs.values.flatten 
```

如果`MyTypeEnum`包含`:a`, `:b`, 和`:c`,用上述每个符号键控的a`ordered_recs`初始化`Hash``Arrays`

```
irb(main):002:0> Hash[MyTypeEnum.names.map { |v| [v, []] }]
=> {:a=>[], :b=>[], :c=>[]} 
```

`Array`记录根据它在 中的键附加到正确的位置`Hash`，然后当所有这些都被正确分组后，数组被连接/展平到一个单一的记录列表中。

# php - 将 MySQL 查询返回的单个列值传递给 PHP 脚本

> ID：14940211
> 
> 赞同：0
> 
> 时间：2013-02-18T15:56:15.123
> 
> 标签：php, mysql, prepared-statement

我正在尝试为下面的 MySQL 查询调整以下代码，但不知道如何去做。查询应该只返回一行，我想从该行中的“代码”列中提取数据并将其作为变量传递给我的 PHP 脚本。

```
/* prepare statement */
if ($stmt = $mysqli->prepare("SELECT Code from Clients where Name='Jane'")) {
    $stmt->execute();

    /* bind variables to prepared statement */
    $stmt->bind_result($code);

    /* fetch values */
    while ($stmt->fetch()) {
        printf($code);
    }

    /* close statement */
    $stmt->close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:04:29.820

我认为您一直在基于[http://php.net/manual/en/mysqli.prepare.php](http://php.net/manual/en/mysqli.prepare.php)工作。但是，您也应该跟进绑定参数：

```
/* prepare statement */
if ($stmt = $mysqli->prepare("SELECT Code from Clients where Name=?")) {

    /* bind query parameters to prepared statement */
    $stmt->bind_param("s", 'Jane');

    $stmt->execute();

    /* bind result variables to prepared statement */
    $stmt->bind_result($code);

    /* fetch values */
    if ($stmt->fetch()) {
        printf('Code: %s', $code);
    } else {
        print("Client code was not found");
    }

    /* close statement */
    $stmt->close();
} 
```

你在这里准备语句，所以你应该单独绑定你的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T15:58:37.957

一起去：

```
if ($stmt = $mysqli->prepare("SELECT Code from `Clients` where Name = 'Jane' LIMIT 1")) {
    $stmt->execute();
    $stmt->bind_result($code);
    $stmt->fetch();
    $stmt->close();
} 
```

脚本末尾`$code`将包含来自该列的数据`Code`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:01:08.737

您可以将代码更改为以下内容：

```
$value = $stmt->fetch(); 
```

此外，如果您知道要从数据库中获取单个值，则可以通过`'limit 1'`在 sql 语句的末尾执行 a 来稍微加快它的速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:54:27.610

不要为这种琐碎的操作浪费太多代码。看，它几乎是一整屏长！
如果您在整个代码中需要十几个变量怎么办？
将所有代码封装成*辅助函数*，然后**一行调用：**

```
$code = $db->getOne("SELECT Code from Clients where Name='Jane'"); 
```

# android - nme haxe，无法使用 flashdevelop 在 android 平台上构建

> ID：14940213
> 
> 赞同：2
> 
> 时间：2013-02-18T15:56:17.187
> 
> 标签：android, flashdevelop, haxe, build-error, nme

我刚刚开始了解 nme haxe 开发，我目前正在使用 flashdevelop。在android平台下构建示例应用程序（piratepig）时遇到问题。很多“没有这样的文件或目录”。当我选择 windows、Html5 或 flash 平台时，一切似乎都很好。

这是输出：

```
 ```
Running process: C:\Program Files (x86)\FlashDevelop\Tools\fdbuild\fdbuild.exe "C:\Users\Valentin\Desktop\PiratePig\Pirate Pig.hxproj" -ipc 2a666e48-3f38-4abd-b63a-25219cb72cf4 -version "2.10" -compiler "C:\Motion-Twin\Haxe" -library "C:\Program Files (x86)\FlashDevelop\Library" -target "android"
Building Pirate Pig
haxelib run nme build C:\Users\Valentin\Desktop\PiratePig\project.nmml android -debug
haxelib run hxcpp Build.xml haxe -Ddebug -Dactuate -Dandroid -Dcpp -Ddebug -Dhaxe_208 -Dhaxe_209 -Dhaxe_210 -Dmobile -Dnme -Dnme_install_tool -Dsys -Dtrue
Creating hxcpp.h.gch...
arm-linux-androideabi-g++ -Iinclude --sysroot=C:\Development\Android NDK/platforms/android-5/arch-arm -IC:\Development\Android NDK/sources/cxx-stl/gnu-libstdc++/include -IC:\Development\Android NDK/sources/cxx-stl/gnu-libstdc++/libs/armeabi/include -DHXCPP_DEBUG -DHXCPP_VISIT_ALLOCS -Dhaxe_210 -IC:\Motion-Twin\Haxe\lib\hxcpp\2,10//include -Iinclude -fpic -fvisibility=hidden -ffunction-sections -funwind-tables -fstack-protector -fno-short-enums -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__ -D_LINUX_STDDEF_H  -Wno-psabi -march=armv5te -mtune=xscale -msoft-float -fomit-frame-pointer -fexceptions -fno-strict-aliasing -finline-limit=10000 -DANDROID -Wa,--noexecstack -O0 -DNDEBUG -c -frtti -o hxcpp.h.gch C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/hxcpp.h
C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/hxcpp.h:13:20: error: typeinfo: No such file or directory
In file included from C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/hxcpp.h:170:
C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/Array.h:195:21: error: algorithm: No such file or directory
In file included from C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/hxcpp.h:162:
C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/hx/Object.h: In member function 'void hx::ObjectPtr<O>::CastPtr(hx::Object*)':
C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/hx/Object.h:143: error: must #include <typeinfo> before using typeid
In file included from C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/hxcpp.h:170:
C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/Array.h: In member function 'void Array_obj<ELEM_>::sort(Dynamic)':
C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/Array.h:388: error: 'sort' is not a member of 'std'
In file included from C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/hxcpp.h:171:
C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/Class.h: In function 'bool hx::TCanCast(hx::Object*)':
C:\Motion-Twin\Haxe\lib\hxcpp\2,10//include/Class.h:139: error: must #include <typeinfo> before using typeid
Called from ? line 1
Called from BuildTool.hx line 1265
Called from BuildTool.hx line 554
Called from BuildTool.hx line 591
Called from BuildTool.hx line 710
Called from BuildTool.hx line 739
Called from BuildTool.hx line 153
Uncaught exception - Error creating pch: 1 - build cancelled
Error : Build failed
Build halted with errors (haxelib.exe).
Done(1) 
``` 有没有人有线索，可能是什么问题？我尝试在 Eclipse 中运行一个简单的 helloworld 应用程序（这样我可以确定它与 haxe 和 nme 相关），但 helloword 应用程序运行良好。

            回答 #1

赞同：2

时间：2013-02-26T22:41:45.023

您使用的是 NME 3.5.3 或更高版本吗？那么你需要切换到 hxcpp 2.10.3 。它将解决问题。尝试使用此命令通过 haxelib 更新 hxcpp

haxelib 升级

            回答 #2

赞同：0

时间：2013-08-28T12:02:27.040

很久以前，通过谷歌的一些点击解决了这个问题。我现在找不到它，但它与 NDK 目录有关，我不得不移动或复制结构中的一些文件。可能是这样的

据我所知，它与此类似（Andy 在 openfl 上发布的答案）：

将文件从 ${ANDROID_NDK_ROOT}\sources\cxx-stl\gnu-libstdc++\4.4.3\ 复制到 ${ANDROID_NDK_ROOT}\sources\cxx-stl\gnu-libstdc++\

这是他的答案的链接，以及上面的一些类似问题：

[http://www.openfl.org/developer/forums/installing-openfl/beginner-questions-android-build-failed/](http://www.openfl.org/developer/forums/installing-openfl/beginner-questions-android-build-failed/)

```

# ios - 解析 JSON 响应

> ID：14940217
> 
> 赞同：2
> 
> 时间：2013-02-18T15:56:33.140
> 
> 标签：ios, json, afnetworking

我`AFJSONRequestOperation`用来请求远程 API：

```
 NSURLRequest *request = [NSURLRequest requestWithURL:url];
    AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

        //Remove the SVProgressHUD view
        [SVProgressHUD dismiss];

        //Check for the value returned from the server

        NSData *jsonData = [JSON dataUsingEncoding:NSUTF8StringEncoding];//This line cause crash
        NSArray *arr = [NSJSONSerialization JSONObjectWithData:jsonData
                                                       options:0
                                                         error:nil];
        loginDic=[[NSDictionary alloc]init];
        loginDic=[arr objectAtIndex:0];
        NSLog(@"%@",loginDic);

    } failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {

        NSLog(@"Request Failed with Error: %@", [error.userInfo objectForKey:@"NSLocalizedDescription"]);
    }];
    [operation start];
    [SVProgressHUD showWithStatus:@"Loading"]; 
```

但是，应用程序崩溃了，我收到了这个错误：

```
[__NSCFDictionary dataUsingEncoding:]: unrecognized selector sent to instance 
```

这是`NSLog`返回的 JSON 对象的一个​​：

```
 Result =     (
                {
            operation = 5;
            result = 1;
        }
    ); 
```

我是否遗漏了什么，因为我认为我没有正确解析 JSON 对象。请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:02:32.130

您在成功块中获得的对象已经被`AFJSONRequestOperation`. 在您的情况下，您会得到一个 NSDictionary 对象。

您可以使用 - 方法检查对象的类`isKindofClass`：

```
if ([JSON isKindOfClass:[NSDictionary class]]) {
   NSDictionary* dict = (NSDictionary*)JSON;
   ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:03:56.387

看起来 AFJSONRequestOperation 正在为您将 JSON 反序列化为字典，然后您再次尝试这样做。`JSON`是一个 NSDictionary 但你正在调用一个 NSString 方法。

删除所有这些代码：

```
NSData *jsonData = [JSON dataUsingEncoding:NSUTF8StringEncoding];//This line cause crash
NSArray *arr = [NSJSONSerialization JSONObjectWithData:jsonData
                                                   options:0
                                                     error:nil];
loginDic=[[NSDictionary alloc]init];
loginDic=[arr objectAtIndex:0]; 
```

并将其替换为：

```
loginDic = [[JSON objectForKey:@"Result"] lastObject]; 
```

（这将在不检查数组边界的情况下安全地工作，但假设数组中只有一个元素。）

# javascript - 建议在不冻结它们的情况下交换动画 GIF？

> ID：14940221
> 
> 赞同：1
> 
> 时间：2013-02-18T15:56:45.750
> 
> 标签：javascript, jquery, html

我正在一个使用动画图表的网站上显示信息。所有的图表都是动画 GIF。动画图表只有一个位置，而且图表通常有多个部分。所以主要功能是能够单击图形，让它播放一次，再次单击图形，然后播放第二部分，依此类推，直到它到达最后一部分并再次播放。

问题是有时图表会冻结或不加载。每次单击它们时，它们只应该播放一次。很多时候，图表会切换到下一个，但它会被冻结而无法播放。

我尝试在加载新图表之前加载一个空白 src，它似乎阻止了 gif 冻结，但这会导致在新图表加载之前出现损坏的图像并闪烁。

这是我用来交换图形的代码...

```
 $('.rightPostContent img').click(function(){           
        imgSrc = $(this).attr('src');   
        if(imgSrc.indexOf('_B.png') != -1){
            imgSrcToUse = imgSrc.replace('_B.png','_pt1.gif');
            $(this).attr('src',imgSrcToUse);
            return false;
        }
        if(imgSrc.indexOf('_pt1.gif') != -1){
            var POS2 = imgSrc.replace('_pt1.gif','_pt2.gif');
            var $that = $(this);
            $.ajax({
                url:POS2,
                type:'HEAD',
                error: function()
                {

                    var imgSrcToUse = imgSrc.replace('_pt1.gif','_pt1.gif');

                    $that.attr('src','');
                    $that.attr('src',imgSrcToUse);

                    return false;

                },
                success: function()
                {
                    $that.attr('src','');
                    $that.attr('src',POS2);
                    return false;
                }
            });     

        }
        if(imgSrc.indexOf('_pt2.gif') != -1){
            var POS3 = imgSrc.replace('_pt2.gif','_pt3.gif');
            var $that = $(this);
            $.ajax({
                url:POS3,
                type:'HEAD',
                error: function()
                {

                    var imgSrcToUse = imgSrc.replace('_pt2.gif','_pt1.gif');
                    $that.attr('src',imgSrcToUse);
                    return false;

                },
                success: function()
                {
                    $that.attr('src','');
                    $that.attr('src',POS3);
                    return false;
                }
            });     

        }
        if(imgSrc.indexOf('_pt3.gif')!=-1){
            imgSrcToUse = imgSrc.replace('_pt3.gif','_pt1.gif');
            $(this).attr('src','');
            $(this).attr('src',imgSrcToUse);
            return false;
        }

    }); 
```

您可以在[http://schoolhousebalk.com/justin-upton/上查看该网站的运行情况](http://schoolhousebalk.com/justin-upton/)

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:02:37.160

我会一次加载它们并在单击时隐藏/显示图像。如果您在单击时加载它们，总会有某种延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:00:55.720

尝试在将新图像添加到`src`属性之前预加载它。例如，不仅仅是`$(this).attr('src',imgSrcToUse);`：

```
var img = new Image();
var $el = $(this);
img.src = imgSrcToUse;
img.onload = function() {
    $el.attr('src', imgSrcToUse);
} 
```

# javascript - 如何使所有未来的日期不可点击

> ID：14940223
> 
> 赞同：0
> 
> 时间：2013-02-18T15:56:50.473
> 
> 标签：javascript, jquery, jquery-ui

我想在今天之后禁用日历中的所有未来日期。今天的日期`Feb 23rd 2012`在下图中以黄色 ( ) 突出显示。所有其他未来日期应该是不可点击的。我怎样才能做到这一点 ？

例如 24th,25th.... 等不应该是可点击的

![在此处输入图像描述](../Images/b65bbdbd2ea9f5b0e49b6cb4dd441829.png)

注意： `$('.datepicker').BlackoutDates.Add(new CalendarDateRange(DateTime.Now.AddDays(1), DateTime.MaxValue));`不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T15:58:14.163

`maxdate`如果您使用的是 JQuery UI 日期选择器日历，请使用方法：[http](http://api.jqueryui.com/datepicker/#option-maxDate) : //api.jqueryui.com/datepicker/#option-maxDate

```
$( ".selector" ).datepicker({ maxDate: new Date() }); 
```

`new Date()`对应于当前日期

**演示**：http: [//jsfiddle.net/UQTY2/21/](http://jsfiddle.net/UQTY2/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:08:47.180

如果 datepicker 向导已经在输入中初始化，您还可以使用：

```
 $( ".selector" ).datepicker("option", {maxDate: "+0D" }); 
```

当日期选择器初始化*后*一天结束并且新的一天开始时，这也应该起作用。

# csv - Google Maps Store Locator - 修改默认示例

> ID：14940224
> 
> 赞同：3
> 
> 时间：2013-02-18T15:56:53.883
> 
> 标签：csv, google-maps-api-3

我正在尝试根据 Google [http://storelocator.googlecode.com/git/examples/panel.html使用的静态 csv 示例创建商店定位器](http://storelocator.googlecode.com/git/examples/panel.html)

我已经在我自己的服务器上重新创建了这个示例，但是如果我以任何方式编辑 csv 文件，即使我只是删除了一些行，它也会返回一个空白地图。

我希望我可以通过用我自己的 ( [http://storelocator.googlecode.com/git/examples/medicare.csv](http://storelocator.googlecode.com/git/examples/medicare.csv) ) 替换 csv 文件中的默认值来将此示例用作模板。它显然比我想象的要多，并且希望有人能指出我正确的方向，为什么我不能用自己的值编辑 csv 中的字段，我还应该编辑什么？

这是他们的主页[http://storelocator.googlecode.com/git/index.html](http://storelocator.googlecode.com/git/index.html)

我一直在网上寻找一种方法来做到这一点，现在我在这里提出了这个问题，因为我正在努力寻找答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T07:39:29.310

似乎当我在 excel 中打开时，它正在重新格式化 csv 文件并导致它无法工作。当我在记事本++中编辑csv中的字段时，它可以工作。为无用的问题道歉。感谢 Molle 博士让我注意到这一点。

# php - MySQL单插入使用子查询行作为列

> ID：14940228
> 
> 赞同：2
> 
> 时间：2013-02-18T15:57:07.733
> 
> 标签：php, mysql

我将如何选择 3 个问题 ID 并将它们用作单个插入语句的列数据，仅使用 MySQL。

我目前使用以下语句通过从问题表中选择一个随机条目将新行插入到游戏表中：

**当前表：**

```
 -------------------------------
| game | user_id | question_id |
 -------------------------------
| 1    | 1       | 10          | 
```

**当前声明：**

```
INSERT INTO game (user_id, question_id)
 SELECT u.id as user_id, q.id as question_id
 FROM user u, question q
 WHERE u.id =:uid
 AND q.category = :category
 ORDER BY RAND()
 LIMIT 1 
```

**游戏桌：** 我添加了 opt_1-3 列以允许多选

```
 -------------------------------------------------------
| game | user_id | question_id | opt_1 | opt_2 | opt_3 |
 -------------------------------------------------------
| 1    | 1       | 10          | 5     | 12    | 80    |
                                 ^       ^       ^
                               alternative wrong answers 
```

*我可以使用 PHP 来实现这一点，迭代结果并使用两个查询。*

```
SELECT id FROM question
WHERE category = :category
ORDER BY RAND()
LIMIT 3

$opts = array();
foreach($result as $r){
    $opts[] = $r->id;
}

INSERT INTO game (user_id, question_id)
 SELECT u.id as user_id, q.id as question_id, 
 // add the following line to the query posted previously
 $opt[0] AS opt_1,  $opt[1] AS opt_2,  $opt[2] AS opt_3
 ... 
```

我想知道纯粹使用 MySQL 是否有可能达到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:19:12.090

没有测试这么多，但这可能会为你做选择。

请注意，通过 rand() 进行排序并不快，这涉及到几个交叉连接，如果有大量问题，这也可能会很慢。

```
SELECT u.id as user_id, Sub1.aid, Sub1.bid, Sub1.cid
FROM user u, 
(SELECT a.id AS aid, b.id AS bid, c.id AS cid
FROM question a, question b, question c
WHERE a.category = :category
AND a.category = :category
AND a.category = :category
AND a.id != b.id
AND a.id != c.id
AND b.id != c.id
ORDER BY RAND()
LIMIT 1) Sub1
WHERE u.id =:uid 
```

# asp.net - ASP.NET HiddenField 值设置

> ID：14940230
> 
> 赞同：4
> 
> 时间：2013-02-18T15:57:10.733
> 
> 标签：asp.net, webforms

我用谷歌搜索了这个，但不知道如何设置隐藏字段的值。我有以下代码：

```
<asp:HiddenField id="fileId" runat="server" value="<%# Response.Write(Request.QueryString["fileID"]) %>" /> 
```

我只是想让值 =`fileID`查询字符串中的值。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T16:00:21.397

尝试：

```
<asp:HiddenField id="fileId" runat="server" value='<%= Request.QueryString["fileID"] %>' /> 
```

相信“=”运算符意味着 Response.Write 为您服务。

只是为了完整起见，您也可以在代码隐藏中设置它，例如

```
fileId.Value = Request.QueryString["fileID"] 
```

# ruby-on-rails - Rspec 使用普通方法而不是 be_ 匹配器？

> ID：14940234
> 
> 赞同：1
> 
> 时间：2013-02-18T15:57:25.510
> 
> 标签：ruby-on-rails, ruby, rspec

在我有`own?`方法的模型中，我可以在 rspec 中使用它而不是 rspec`be_own`吗？不编写自定义匹配器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:11:46.020

是的。这很容易：

```
model.own?.should == true 
```

# jquery - 用于删除重复列表项的更快的 jQuery 代码

> ID：14940237
> 
> 赞同：2
> 
> 时间：2013-02-18T15:57:36.687
> 
> 标签：jquery, html

我有以下用于删除重复列表项的 jQuery 代码。有更好/更快的方法吗？[http://jsfiddle.net/Lijo/Hb28u/16/](http://jsfiddle.net/Lijo/Hb28u/16/)

**HTML**

```
 <div style="width: 100px">
        <ul>
            <li style="background-color: Red">A</li>
            <li style="background-color: Red">B</li>
            <li style="background-color: Orange">B</li>
            <li style="background-color: Red">C</li>
            <li style="background-color: Orange">C</li>
            <li style="background-color: Yellow">C</li>
            <li style="background-color: Red">D</li>
        </ul>
    </div>
    <input id="Submit1" type="submit" value="submit" class="submitButton" /> 
```

**jQuery**

```
 $('.submitButton').click(function (e) {
            alert('Begin');
            var previousVal = 'Initial';

            $('ul li').each(function (i, item) {
                var currentVal = $(item).text();
                if (currentVal == previousVal) {
                    $(item).remove();
                }
                previousVal = currentVal;
            });

            alert('End');
            return false;
        }
        ); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:02:01.623

我会这样做，但还没有测试它是否更快，对我来说两者似乎都很快。

```
 var seen = {};
$('ul li').each(function() {
    var txt = $(this).text();
    if (seen[txt])
        $(this).remove();
    else
        seen[txt] = true;
});
    return false;
}
); 
```

这是我的解决方案的一个小提琴，它告诉您执行所需的时间。[http://jsfiddle.net/54cdR/](http://jsfiddle.net/54cdR/)

# java - Java 将 DateFormat 时区设置为 GMT+1

> ID：14940239
> 
> 赞同：4
> 
> 时间：2013-02-18T15:57:47.010
> 
> 标签：java, timezone, simpledateformat

将 DateFormat 时区设置为 GMT+1 的正确字符串是什么？根据文档，它应该类似于“GMT + 00:00”。我已经尝试过其他形式，但显然我总是回退到 GMT（我当前的时区）。

提前致谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T16:00:40.827

您可以使用

```
TimeZone fixedUtcPlus1 = new SimpleTimeZone(TimeUnit.HOURS.toMillis(1),
                                            "GMT+1");
format.setTimeZone(fixedUtcPlus1); 
```

要不就：

```
TimeZone zone = TimeZone.getTimeZone("GMT+1");
format.setTimeZone(zone); 
```

（对于围绕 +1 和 -1 的重复编辑表示歉意......我的诊断错误。“GMT+1”很好，但它的 Etc 等价物是“Etc/GMT-1” - 非常令人困惑。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T16:02:12.823

您可以通过以下代码片段找到整套时区：

```
for (String id : TimeZone.getAvailableIDs()) {
    System.out.println(id);
} 
```

并重用它直接设置时区：

```
DateFormat df = DateFormat.getDateInstance();
df.setTimeZone(TimeZone.getTimeZone(id)); 
```

# django - Django 管理员更改复数模型名称

> ID：14940240
> 
> 赞同：12
> 
> 时间：2013-02-18T15:57:50.723
> 
> 标签：django, django-admin

我的 Django（Grappelli 主题）管理员列出了我所有的应用程序，然后模型名称以复数形式显示。为了将名称转换为复数，Django 在模型名称中添加了一个“s”，但其中一些是不正确的。例如，“产品类别”变为“产品类别”

**如何更改这些在管理视图中显示的名称？**

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-18T16:02:14.427

您需要`verbose_name_plural`在模型的子类中指定一个属性`Meta`。

检查：[https](https://docs.djangoproject.com/en/1.10/ref/models/options/#django.db.models.Options.verbose_name_plural) ://docs.djangoproject.com/en/1.10/ref/models/options/#django.db.models.Options.verbose_name_plural了解更多信息。

# r - 从 R 中的 Tukey HSD 中提取数据

> ID：14940241
> 
> 赞同：2
> 
> 时间：2013-02-18T15:58:01.367
> 
> 标签：r, structure, extract

考虑以下一段玩具代码（纯粹是说明性的）：

```
y <- data.frame(matrix(c(11,12,13,14,113,124,215,219),nrow=4));
y[,2] <- factor(y[,2]);
aov.result <- aov(y$X1 ~ y$X2, data=y);
thsd.result <- TukeyHSD(aov.result); # Produces NaNs but nevermind
fix(thsd.result) 
```

最后一个命令（修复）显示 thsd.result 对象是一个包含列表和嵌套结构的结构：

```
structure(list(`df$X2` = structure(c(1, 2, 3, 1, 2, 1, NaN, NaN, 
NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, NaN, 
NaN, NaN, NaN), .Dim = c(6L, 4L), .Dimnames = list(c("124-113", 
"215-113", "219-113", "215-124", "219-124", "219-215"), c("diff", 
"lwr", "upr", "p adj")))), .Names = "df$X2", class = c("multicomp", 
"TukeyHSD"), orig.call = quote(aov(formula = df$X1 ~ df$X2, data = df)), conf.level =     
0.95, ordered = FALSE); 
```

我的问题是：我将如何访问这个结构？例如，我将如何获得由成对组成的 .Dimnames？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:01:05.943

你的意思是这样的：

```
dimnames(thsd.result[[1]]) 
```

和这个：

```
> rownames(thsd.result[[1]])
[1] "124-113" "215-113" "219-113" "215-124" "219-124" "219-215"
> colnames(thsd.result[[1]])
[1] "diff"  "lwr"   "upr"   "p adj" 
```

要获得结果，只需使用`[[]]`.

查看打印的结果：

`thsd.result[[1]]`和`thsd.result[[1]][,1]`

# c# - 我可以手动运行代码合同分析吗？

> ID：14940242
> 
> 赞同：3
> 
> 时间：2013-02-18T15:58:08.737
> 
> 标签：c#, timeout, code-contracts

当我重建我的 C# 应用程序时，我经常没有得到我的代码合同分析的结果。这是由以下错误消息引起的

`CodeContracts: MyApp.Client.Model: Analysis method MyApp.Client.Model.MyClass.CreateCalculatedElements(System.Collections.Generic.List1<System.Collections.Generic.KeyValuePair2<System.String,MyCompany.Scripting.ICompiledFunction1<System.Object>>>,System.Collections.Generic.Dictionary2<System.String,MyCompany.Scripting.ICompiledFunction1<System.Decimal>>,System.Collections.Generic.Dictionary2<System.String,MyCompany.Scripting.ICompiledFunction1<System.Decimal>>) timed out`

这是方法的定义

```
internal void CreateCalculatedElements(
List<KeyValuePair<string, ICompiledFunction<object>>> preFinalCalculationScripts,
Dictionary<string, ICompiledFunction<decimal>> factorCalculators,
Dictionary<string, ICompiledFunction<decimal>> elementCalculators) 
```

这并不总是超时。有没有一种方法可以让我只为一个项目手动运行合同检查，而不是通过重建解决方案对所有项目进行检查？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-24T20:32:48.337

You can increase the timeout for that project by adding an extra option to the static checking options in the property pane as follows: -timeout

The default is 180, which is per method.

As to your original question, yes you can run the tools manually as follows:

Say your project P is in directory D, then go to D\obj\Debug\Decl. In there you'll find a convenient file called Pcccheck.rsp which contains the parameters which were passed to cccheck during the build. To run the analysis again, you simply issue: cccheck @Pcccheck.rsp

Right now, there isn't an option to trigger a re-analysis of just one project without a rebuild.

# java - 如何在 jInternalFrame 中加载扩展 jFrame 的类

> ID：14940244
> 
> 赞同：1
> 
> 时间：2013-02-18T15:58:11.943
> 
> 标签：java, swing, jframe, jinternalframe

假设我们有 2 个班级；classjInternalFrame 和 classExtjFrame。到目前为止，我设法使用 classExtjFrame 的内容设置了 classjInternalFrame 的 contentPane。我用了

`classInternalFrames.setContentPane(new classExtjFrame().getContentPane());`

问题是，classExtjFrame 中有单选按钮和一个按钮，当我单击按钮时，它会检查单选按钮是否被选中。

如果我不使用 jInternalFrame，classExtjFrame 将作为新窗口加载，它会按预期工作。但是当它被加载到 jInternalFrame 中时，它会说它没有被选中，即使单选按钮被选中。

我认为问题是，当您在 jInternalFrame 中加载 classExtjFrame 的组件时，单选按钮的名称将被命名为 jInternalFrame.radiobutton，类似的东西。我的意思是，当它在 jInternalFrame 中加载时，jInternalFrame 将加载它们，就好像它是它自己的一样。

我的目标是，不是在新窗口中加载 classExtjFrame，而是在 jInternalFrame 或任何其他允许我在其中加载 classExtjFrame 的容器中加载。我在VB6中做类似MDI的事情。

我希望我说清楚了。谢谢你。

# image - 换屏报警

> ID：14940249
> 
> 赞同：1
> 
> 时间：2013-02-18T15:58:28.800
> 
> 标签：image, screen, autohotkey

我必须使用列出我的客户进程的软件。如果 50x10 像素区域发生变化，我需要一个声音警报程序。我尝试在 autohotkey 上编写一个程序，但我无法成功。有人有这个程序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:58:06.153

这是您可以使用的示例。

```
^Launch_Media:: ; Make a reference screenshot with NirSoft NIRCMD by pressing Ctrl+Media or any other program...
run, "C:\Program Files\1 My Programs\nircmd.exe" savescreenshot "c:\Temp\Screenshot.bmp" 33 40 17 20 ; Location of "Save As" Icon in SciTE4AutoHotKey Editor
Return

Launch_Media:: ; Launch this test manually with Media Button
CoordMode Pixel  ; Interprets the coordinates below as relative to the screen rather than the active window.
ImageSearch, FoundX, FoundY, 0, 0, 200, 200, C:\Temp\Screenshot.bmp ; search for image in area staring at 0,0 to 200,200
if ErrorLevel = 2
    MsgBox Could not conduct the search.
else if ErrorLevel = 1
    MsgBox Image could not be found on the screen.
else
    SoundBeep, 1000, 1000
    MsgBox The Image was found at %FoundX% %FoundY%.
    ClickX:=FoundX + 5 ; Move the mouse click away from the edge of the icon
    ClickY:=FoundY + 5 ; Move the mouse click away from the edge of the icon
    Click, %ClickX%, %ClickY% ; Click on the Save As icon.
Return 
```

当我们更多地了解您想要测试的内容（我认为 50x10 的区域可能太小）以及您想要在区域发生变化时做什么时，我们可能会帮助您编写更合适的脚本。

在此示例中，我使用了[NirSoft](http://www.nirsoft.net/)的 nircmd.exe，但您也可以通过其他方式创建参考图像。如果您只需要声音警报，您可以使用 注释掉所有其他`if, then, else`命令`;`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:21:33.393

您是否在 2 年前在 AutoHotKey 社区查看过这篇帖子？

[http://www.autohotkey.com/board/topic/56219-fast-screen-change-check-using-histograms/](http://www.autohotkey.com/board/topic/56219-fast-screen-change-check-using-histograms/)

上面的脚本可能有点压倒性，但您也可以创建固定区域的屏幕截图并在 AutoHotKey 中进行图像比较，就像其他人在您之前所做的那样。

# android - 如何删除错误：-硬编码字符串按钮应在 Eclipse 中使用 @string 资源？

> ID：14940255
> 
> 赞同：-3
> 
> 时间：2013-02-18T15:58:39.737
> 
> 标签：android, eclipse

当我们创建第二个 main.java 文件以将其与初始 main_activity 文件连接时出现错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T16:04:31.213

将此添加到 xml：tools:ignore="HardcodedText"

例子：

```
 <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Text" 
        tools:ignore="HardcodedText"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:08:18.787

在 Eclipse 中，您只需打开布局文件并右键单击按钮（或任何其他带有文本的视图）并选择`Edit Text`. 从那里只需从列表中选择一个值。如果您想要的值不在列表中，则单击`New String...`以创建一个新的 android 字符串。您的所有字符串都在`strings.xml`您的 res/values 文件夹中定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:06:34.177

按钮的字符串应该在 res/values 中的 strings.xml 中。这意味着您可以为您的应用程序支持的每种语言创建一个 strings.xml 文件，并且将根据设备设置的区域设置使用正确的语言。

创建字符串的一种简单方法是，如果您突出显示硬编码的字符串，然后转到菜单 > 重构 > 提取 android 字符串（类似的东西，我不记得确切地在我的头顶），然后它会问你要调用什么新字符串并将其放在 string.xml 中，然后用@string/your_string_name 替换你的硬编码字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:02:13.103

如果要设置按钮的名称。您必须使用 values 文件夹中的 strings.xml 文件来设置名称并使用 @string/（在 string.xml 文件中指定的名称）在 Button 上使用它来解决问题。

# pdf - 使用 itext 将文本替换为 pdf 中的图像

> ID：14940256
> 
> 赞同：0
> 
> 时间：2013-02-18T15:58:41.450
> 
> 标签：pdf, itext

我想用图像替换现有 PDF 中的文本。这可以使用itext完成吗？

# boilerplatejs - 按需 [延迟加载] 模块的模式

> ID：14940262
> 
> 赞同：1
> 
> 时间：2013-02-18T15:59:01.887
> 
> 标签：boilerplatejs

在我的应用程序中，我不需要在初始化阶段加载模块（通过在 中枚举它们`./modules/modules`），而是稍后根据某些条件（例如用户授权结果）按需加载。想象一下，我想为*用户 A*提供计算器模块，为*用户 B*提供文本编辑器模块。

为简单起见，让我们以*样板js*`sampleModule1`示例应用程序为例，并假设它`sampleModule2`是按需加载的。

所以我从*src\modules\modules.js*的初始加载序列中删除了模块：

```
 return [
        require('./baseModule/module'),
        /*require('./sampleModule1/module'),
        require('./sampleModule2/module')*/
    ]; 
```

并将控件添加到摘要页面（*src\modules\baseModule\landingPage\view.html*）以按需加载它们：

```
<div>
    Congratulations! You are one step closer to creating your next large scale Javascript application!
</div>
<div>
    <select id="ModuleLoader">
        <option value="">Select module to load...</option>
        <option value="./modules/sampleModule1/module">sampleModule1</option>
        <option value="./modules/sampleModule2/module">sampleModule2</option>
    </select>
</div> 
```

然后我修补*src\modules\baseModule\module.js*以将上下文传递给*LandingPageComponent*（由于某种原因它不在原始源代码中）：

```
 controller.addRoutes({
            "/" : new LandingPageComponent(context)
        }); 
```

最后将加载代码添加到*src\modules\baseModule\landingPage\component.js*：

```
 $('#ModuleLoader').on('change', function(){
                require([this.value], function(mod){
                    moduleContext.loadChildContexts([mod]);
                    alert('Module enabled. Use can now use it.');
                });
            }); 
```

这似乎有效，但这是最好的方法吗？

它是否正确处理上下文加载？

如何防止两次加载相同的模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:10:10.350

您可以通过对更改事件使用命名函数并在执行后取消绑定函数来防止多次加载模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:45:04.020

聪明的想法在这里.. 最近几天我也在努力改进 BoilerplateJS 以将模块作为插件延迟加载。我做了类似的事情，你可以在以下位置访问 POC 代码：

[https://github.com/hasith/boilerplatejs](https://github.com/hasith/boilerplatejs)

在我所做的 POC 中，我试图同时实现“延迟加载”+“可配置 ui”。

*   每个屏幕（称为应用程序）都是放置在布局上的组件（插件）的集合。这些应用程序定义只是一个 JSON 对象，要么从服务器 API 动态返回，要么静态定义为 JSON 文件（就像它在 POC 中一样）。在 POC 中，应用程序定义存储在“/server/application”中。

*   现在可以按照约定动态调用这些应用程序。例如，“/##/shipping-app”将在“/server/application”中查找具有相同名称的应用程序定义。

*   应用程序加载通过我在“/modules/baseModule/appShell”中的一个新组件进行。任何以 '/##/' 开头的内容都将被路由到该组件，然后它将尝试按照**约定**从“/server/application”文件夹加载应用程序定义。

*   当“appShell”收到应用程序定义（作为 JSON）时，它也会尝试动态加载其中定义的组件（插件）。这些可插拔组件被放置在 'src/plugins' 中，也将按照约定加载。

示例应用程序定义如下所示：

```
{
    "application-id" : "2434",
    "application-name" : "Order Application",
    "application-layout" : "dummy-layout.css",

    "components" : [    
        {
            "comp-name" : "OrderDetails",
            "layout-position" : "top-middle"
        },
        {
            "comp-name" : "ShippingDetails",
            "layout-position" : "bottom-middle"
        }
    ]

} 
```

该方法的好处如下：

*   应用程序接口是组件驱动的，可在运行时配置
*   It is possible that different application definitions are sent to the user depending on the user role, etc (logic in backend)
*   Applications can be created on-the-fly by combining already existing components
*   There is no static code changes needed in the 'framework' either to add new applications or components since loading is based on convention

These are very initial thoughts around. Appreciate any feedback !

# php - 如何使用递增的整数动态更新文件名？

> ID：14940263
> 
> 赞同：1
> 
> 时间：2013-02-18T15:59:09.403
> 
> 标签：php

我想更新文件名，以便每次更新时看起来像这样。

```
 some_name_1, some_name_2, some_name_3, etc. 
```

每次更新都会将尾随整数加一。下面是我的原型，我想在实施之前确保这是实现它的最佳实践方式。另外，我不是 100% PHP 会正确地进行隐式转换。

这是更新文件名的好方法吗？

```
// ... in a class
private function updateFileName()
{
    $pattern = '#_(\d+)$#';
    $subject = $this->file_name; // $subject holds current file name
    preg_match($pattern, $subject, $matches);
    if($matches[0])
    {
        $patterns = array();
        $temp = $matches[0];
        $patterns[0] = '/$temp$/';
        $replacements = array();
        $replacements[0] = $matches[0] + 1;
        preg_replace($patterns, $replacements, $subject); // $subject now holds new name
    }
} 
```

**澄清**

*   文件名实际上是一个哈希，是一个字符串。
*   _1 等将始终位于字符串的末尾（使用锚点可能很好）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:03:51.943

您可以在一个 preg_replace 中完成所有操作：

```
preg_replace("/\b([^\w]+)\b/i",'_',$filename); 
```

# unit-testing - 使用 CppUnit 在 C++ 中进行边界值分析

> ID：14940264
> 
> 赞同：1
> 
> 时间：2013-02-18T15:59:12.773
> 
> 标签：unit-testing, limit, cppunit, boundary, epsilon

我正在尝试在 CppUnit 中实现边界测试。我想检查限制值本身以及该限制周围的边界。

对于上边界，我想添加尽可能小的墨水。对于`double`这个增量可以访问

```
numeric_limits<double>::epsilon() 
```

但是，如果我将 epsilon 添加到我的限制中，我会得到 Not-a-Number (NaN) 结果：

```
#include <stdio.h>
#include <iostream>
#include <limits>
#include <math.h>

using namespace std;

const double WARNING_LIMIT = 8000.0;

int main(void) {

double warningLowerLimit = WARNING_LIMIT - numeric_limits<double>::epsilon();

if(warningLowerLimit < WARNING_LIMIT ) {
    cout << "lower" << endl;
}
else if (warningLowerLimit > WARNING_LIMIT) {
    cout << "upper" << endl;
}
else if ( fabs(warningLowerLimit) < 0.001) {
    cout << "same" << endl;
}
else {
    cout << "NaN" << endl; // <-- result
}

} 
```

有人可以解释一下，为什么结果不低于限制？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:04:09.297

```
else if ( fabs(warningLowerLimit) < 0.001) {
    cout << "same" << endl;
} 
```

那应该是

```
fabs(warningLowerLimit - WARNING_LIMIT) 
```

那里。在不检查差异的情况下，您可以使用`cout << "NaN"`if`warningLowerLimit == WARNING_LIMIT`示例。

# flash - Flash CS5 Actionscript 3.0 不去随机帧

> ID：14940269
> 
> 赞同：2
> 
> 时间：2013-02-18T15:59:28.957
> 
> 标签：flash, variables, random, frame

我对 Flash 很陌生，我正在我的网站上进行地形测验。

我的地形测验的目标是按随机顺序获得 72 个城市名称问题。我已经做了这个，但问题是，因为顺序是随机的，问题可能会回来。因此，如果您完成了一个问题，它以后一定不能再回来。我想我可以通过给每一帧都赋予一个变量来解决这个问题，这些帧在开始时都具有值“2”。如果您转到一个框架并输入正确的城市名称，该框架的变量将变为“1”。如果您输入了错误的答案，变量将变为“0”。在每一帧的开头我都写了：“if(city01 == 2){”所以如果你之前从未有过这个问题，那么你只会得到这个问题。如果没有，您将进入下一个（随机）帧。

在第一帧我定义了变量：

```
var input:String;
var randomnumber:int;

var city01:int = 2;
var city02:int = 2;
var city03:int = 2;
var city04:int = 2;
etc. etc. etc. 
```

这是一个问题框架的代码示例：

```
 stop();
if(city26 == 2){

okButton.addEventListener(MouseEvent.CLICK, okClickcity26);

function okClickcity26(event:MouseEvent):void{
    input = textbox.text;
    if(input == "Dakar"){
        city26 = 1; 
    }else{
        city26 = 0; 
    }

    randomnumber = Math.floor(Math.random()*(1+73-3))+3;
    gotoAndStop(randomnumber);
}
}else{
    randomnumber = Math.floor(Math.random()*(1+73-3))+3;
    gotoAndStop(randomnumber);
    } 
```

Flash 确实将变量更改为“1”或“2”，但也只是显示问题而不转到下一帧。

所以 Flash 在最后执行代码：

```
 else{
randomnumber = Math.floor(Math.random()*(1+73-3))+3;
gotoAndStop(randomnumber);
} 
```

但不会去那个随机帧......

有人知道我做错了什么吗？

**这是我在论坛上的第一个问题，所以我希望我能很好地解释我的问题，所以你可以帮助我。谢谢。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T23:47:21.843

我可以提供一个不同的解决方案：也许你可以使用一组问题 ids/ints（看起来你可能已经有了），然后在洗牌之后，只需一个接一个地弹出 ids 就不会重复？

也许这比尝试跟踪每个问题的每个状态更容易，然后检查随机数的生成。只是不确定，我看到了问题，因为您想以随机顺序解决单个问题，但在看到它们后没有重复。

* * *

* * *

**编辑：添加了使用数组的代码示例**

数组（在这种情况下）可以充当问题 ID（数字）的动态列表，您可以通过索引或许多方法访问其中。因此，您可以将这些数字/ID 关联到一个框架并跳转到它们。

它们实际上在语言中很常见（尽管它们可能被称为不同）并且非常有用。在您的原始代码中，我将使用长度为 72 的单个数组来保存我的值，而不必一个一个地定义 72 个变量（city01、city02、city03 等）。

我强烈建议您在 actionscript 3 中阅读它们（因为这是您正在使用的）：[http ://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Array.html)

在代码中使用数组来显示我在原始答案中的意思的示例：

```
// create an array called "questionIds"
var questionIds:Array = new Array();

// using a loop to add ints 0 to 71 to the array
for(var counter:int = 0; counter < 72; counter++){
    questionIds.push(counter);
}

// the array contains the numbers 0 to 71 in order now, shuffle them in to a random order
trace("Preshuffled array: {"+ questionIds +"}");

questionIds.sort(function (inputA:int, inputB:int):int {
    return (Math.floor(Math.random() * 3) - 1);
});

trace("\nShuffled array: "+ questionIds +"}");

//to get a int from the array, can use pop() method, which removes and returns the last element on the array
// since that number is removed, it will never appear again
var currentId:int = questionIds.pop();

// can keep calling pop() method on the array to return the next last number
// what you do with the value of "currentId" is up to you -however you go to your question in your quiz
currentId = questionIds.pop();
trace(currentId);

// you can also check how many elements are left in the array by checking the length of it:
trace(questionIds.length); // which should be 70 left now as it started with 72 and 2 items were pop()'ed off

// when it hits 0, there are no more items left in the array, (calling pop() will then return "undefined")
if(questionIds.length == 0){
    trace("no more items left");
} 
```

# jquery - 如何使用 jQuery 选择每一对元素？

> ID：14940279
> 
> 赞同：0
> 
> 时间：2013-02-18T16:00:01.627
> 
> 标签：jquery, jquery-selectors, css-selectors

你能用jQuery选择元素2、3、6、7、10、11、14、15等等吗？即选择两个元素，留下两个，选择接下来的两个，留下两个，等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:12:36.147

结合 css nth-child 选择器和 union 你可以得到你想要的。假设您正在选择一些 div：

```
$('div:nth-child(4n+2), div:nth-child(4n+3)') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:04:25.047

*如果*您正在谈论一个数组，您可以在纯 JS 中执行此操作（假设您从 中选择`elements`）。

```
var elements = getElementsByTagName(""); //For example
for (var i = 2; i < elements.length - 1; i = i + 4) {
    myArray.push(elements[i]);
    myArray.push(elements[i+1]);
} 
```

# node.js - Node.JS：当客户端请求被中断时，postdata 会发生什么？

> ID：14940282
> 
> 赞同：1
> 
> 时间：2013-02-18T16:00:06.220
> 
> 标签：node.js, http, post, error-handling

在[HTTP](http://nodejs.org/api/http.html) (v0.8.20) 的 Node.JS 文档中，在 下`ServerRequest`，我看到了`data`和的事件`end`。我没有看到`error`.

通常，如果在接收数据时出现中断，我可以通过查看`error`. 但这适用于邮政数据吗？

如何确定是否收到了整个 postdata，并且它没有因网络故障而被截断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:32:37.973

最近有一个问题：[https ://github.com/joyent/node/pull/4775](https://github.com/joyent/node/pull/4775)

通常，您应该始终侦听和处理来自任何流和事件发射器的错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:42:39.623

我没有用实际运行的代码确认这一点，但只是查看手册，[http.ServerRequest](http://nodejs.org/api/http.html#http_class_http_serverrequest)是一个[可读流](http://nodejs.org/api/stream.html#stream_readable_stream)，并且记录了*Event: 'error'*。

# python - 在 Python 3 上使用 PostGIS

> ID：14940285
> 
> 赞同：15
> 
> 时间：2013-02-18T16:00:14.440
> 
> 标签：python, postgresql, postgis

我正在使用 Python 3，需要使用 postGIS 扩展连接到 postGre。我打算使用 psycopg2 驱动程序。
这个[PPyGIS](http://www.fabianowski.eu/projects/ppygis/index.html)是我发现的唯一扩展，但它适用于 python 2.7 而不是 3.3.0。
有人知道适用于 3.3.0 的解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-18T22:10:52.760

如果您没有在客户端（Python）上对几何对象做任何花哨的事情，psycopg2 可以使用带有[几何访问](http://postgis.net/docs/manual-2.0/reference.html#Geometry_Accessors)器的本机数据类型或其他 GIS[输出格式](http://postgis.net/docs/manual-2.0/reference.html#Geometry_Outputs)（如[GeoJSON](http://www.geojson.org/) ）来获取大多数基本信息。让服务器（PostgreSQL/PostGIS）做艰苦的工作。

这是一个将 GeoJSON 返回到兴趣点 1 公里范围内的形状的随机示例：

```
import psycopg2
conn = psycopg2.connect(database='postgis', user='postgres')
curs = conn.cursor()

# Find the distance within 1 km of point-of-interest
poi = (-124.3, 53.2)  # longitude, latitude

# Table 'my_points' has a geography column 'geog'
curs.execute("""\
SELECT gid, ST_AsGeoJSON(geog), ST_Distance(geog, poi)
FROM my_points, (SELECT ST_MakePoint(%s, %s)::geography AS poi) AS f
WHERE ST_DWithin(geog, poi, 1000);""", poi)

for row in curs.fetchall():
    print(row) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-01-12T17:22:01.987

您实际上可能使用[Shapely](http://toblerity.org/shapely/)或[GDAL/OGR](http://www.gdal.org)，但是这两个库都有很长的依赖项列表。

如果你只有很少的用例，你也可以自己实现一个小协议，基于 super [slick pygeoif](https://github.com/cleder/pygeoif)库，如下面的例子

```
from psycopg2.extensions import register_adapter, AsIs, adapt
from pygeoif.geometry import Point

def adapt_point(pt):
    return AsIs("ST_SetSRID(ST_MakePoint({}, {}), 4326)".format(adapt(pt.x), adapt(pt.y)))

register_adapter(Point, adapt_point) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-28T19:04:41.423

由于提出了这个问题，因此添加了 Geopandas 包

```
classmethod GeoDataFrame.from_postgis(sql, con, geom_col='geom', 
    crs=None, index_col=None, coerce_float=True, parse_dates=None, params=None) 
```

这将从带有几何列的 sql 表中检索地理数据框

[http://geopandas.org/reference.html#geopandas.GeoDataFrame.from_postgis](http://geopandas.org/reference.html#geopandas.GeoDataFrame.from_postgis)

# html - 为什么这个 div 和 textarea 高度不一样

> ID：14940286
> 
> 赞同：0
> 
> 时间：2013-02-18T16:00:16.020
> 
> 标签：html, css

看到[这个 js fiddle](http://jsfiddle.net/YUYJ3/3/)。

html:

```
<div></div>
<textarea>something here...</textarea> 
```

CSS：

```
textarea {
    height: 1em;
    float:left;
    padding: 0.5em;
    border-width: 1px;
    border-color: #ff0000;
    border-style: solid;
    margin: 0;
    width: 20em;
}

div {
    height: 2em;
    float:left;
    width: 2em;
    margin: 0;
    padding: 0;
    border-width: 1px;    
    border-color: #ff0000;
    border-style: solid;
    margin: 0;    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:04:04.750

`em`单位取决于字体大小。

body 和 textarea 的默认字体通常高度不同（因为它们不是相同的字体）

我补充说`*{font-family:sans-serif}`，高度问题自行解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:08:21.120

我不是 100% 确定你看到了什么。这是在什么浏览器中发生的？我做了一些更改 [http://jsfiddle.net/hgHLe/](http://jsfiddle.net/hgHLe/)

```
 textarea {
    height: 1em;  
    float:left;
    padding: 0.5em;
    border-width: 1px;
    border-color: #ff0000;
    border-style: solid;
    margin: 0;
    width: 20em;
}

.child {
    height: 2em;  
    overflow:none;
    float:left;
    width: 2em;
    margin: 0;
    padding: 0;
    border-width: 1px;    
    border-color: #ff0000;
    border-style: solid;
    margin: 0;    
}
.master{

    height: 2em;  

}

<div class='master'><div class='child'>:D</div>
    <textarea>something here...</textarea></div> 
```

添加了一个 .master 用 .child 替换了你的潜水

添加溢出：无；掌握以及 2em

additnly 添加强制字体大小

```
body{
font-size:12px; 
```

}

笔记！不要忘记 Jfiddle 使用了 normlizer CSS！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:09:22.433

因为它们有不同`font-size`，并且您根据`font-size`.

使用 Firebug 我检查了`font-size`和`div`，`textarea`在第一种情况下它是 16px 和`textarea`12px。这是一种标准的浏览器行为：它们应用的字体大小`textarea`与网站的其余部分不同。您可以尝试手动或使用 CSS 重置应用相同的字体大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:17:52.827

您需要在父容器上定义 font-size 以将测量值与 em 统一。我进行了编辑以将字体大小分配给容器。请查看[此](http://jsfiddle.net/jagzviruz/YUYJ3/6/)

我在它周围添加了一个包装器

```
<div id="test">
    <div id="inner"></div>
    <textarea>something here...</textarea>
</div> 
```

# compilation - 如何编译到不同的位置

> ID：14940289
> 
> 赞同：0
> 
> 时间：2013-02-18T16:00:24.567
> 
> 标签：compilation, d, flags

我对使用命令行编译代码非常陌生，所以我想知道如何让 D 编译器将其所有代码编译到某个位置而不是源代码所在的位置。就像我希望最终的 .exe 和 obj 代码都在一个特定的目录中一样。我知道您可以使用 -of 命令，但我目前不知道使用它的格式。目前我有：

```
C:\D\dmd2\windows\bin\dmd.exe -w C:\Users\Kyle\Desktop\D\Test.d C:\Users\Kyle\Desktop\D\src\MyMod.d 
```

我需要添加什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:24:41.550

使用`-offilename`开关。例子：

```
dmd factorial.d -offilename "d:\test_name.exe" 
```

或短版：

```
dmd factorial.d "-ofd:\test_name.exe" 
```

*注意：如果您的路径包含空格，则双引号是必需的。*

*注意2：简而言之，您可以跳过`.exe`，但不要在完整版本中这样做，因为编译器会搜索具有该名称的源文件。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:42:14.353

我知道人们不喜欢 RTFM 答案，但以下是回答您问题的 RTFM 答案：

执行`dmd --help`，你会得到以下信息：

```
DMD32 D Compiler v2.061
Copyright (c) 1999-2012 by Digital Mars written by Walter Bright
Documentation: http://www.dlang.org/index.html
Usage:
  dmd files.d ... { -switch }

  files.d        D source files
  @cmdfile       read arguments from cmdfile
  -c             do not link
  -cov           do code coverage analysis
  -D             generate documentation
  -Dddocdir      write documentation file to docdir directory
  -Dffilename    write documentation file to filename
  -d             silently allow deprecated features
  -dw            show use of deprecated features as warnings (default)
  -de            show use of deprecated features as errors (halt compilation)
  -debug         compile in debug code
  -debug=level   compile in debug code <= level
  -debug=ident   compile in debug code identified by ident
  -debuglib=name    set symbolic debug library to name
  -defaultlib=name  set default library to name
  -deps=filename write module dependencies to filename
  -g             add symbolic debug info
  -gc            add symbolic debug info, pretend to be C
  -gs            always emit stack frame
  -H             generate 'header' file
  -Hddirectory   write 'header' file to directory
  -Hffilename    write 'header' file to filename
  --help         print help
  -Ipath         where to look for imports
  -ignore        ignore unsupported pragmas
  -inline        do function inlining
  -Jpath         where to look for string imports
  -Llinkerflag   pass linkerflag to link
  -lib           generate library rather than object files
  -man           open web browser on manual page
  -map           generate linker .map file
  -noboundscheck turns off array bounds checking for all functions
  -O             optimize
  -o-            do not write object file
  -odobjdir      write object & library files to directory objdir
  -offilename    name output file to filename      <---- [1]
  -op            do not strip paths from source file
  -profile       profile runtime performance of generated code
  -property      enforce property syntax
  -quiet         suppress unnecessary messages
  -release       compile release version
  -run srcfile args...   run resulting program, passing args
  -unittest      compile in unit tests
  -v             verbose
  -version=level compile in version code >= level
  -version=ident compile in version code identified by ident
  -vtls          list all variables going into thread local storage
  -w             warnings as errors (compilation will halt)
  -wi            warnings as messages (compilation will continue)
  -X             generate JSON file
  -Xffilename    write JSON file to filename 
```

**我用[1]**和箭头标记了回答您问题的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:05:26.003

看看`-of`,`-od`和`-op`开关。如果不知道“将其所有代码编译到某个位置”的确切含义，很难更具体。

# asp.net - 将变量传递给不是固定金额的 PayPal

> ID：14940291
> 
> 赞同：0
> 
> 时间：2013-02-18T16:00:30.743
> 
> 标签：asp.net, web, paypal, e-commerce

您如何将变量传递给不是固定金额的 PayPal。例如，从篮子中发送“GrandTotal”，而不仅仅是在 asp.net 中输入诸如 50.00 之类的金额。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:16:13.037

Paypal offers a way to transfer data from third party carts:

[https://www.paypal.com/cgi-bin/webscr?cmd=_pdn_howto_checkout_outside](https://www.paypal.com/cgi-bin/webscr?cmd=_pdn_howto_checkout_outside)

Essentially your server will have to generate input fields with value and post to Paypal and Paypal will read the data and recreate the cart on their end.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:04:37.287

如果您想坚持使用[付款标准](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/wp_standard_overview)，我会使用[购物车上传命令方法](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/cart_upload)。

如果您对 Web 服务 API 感到满意，我建议您使用[Express Checkout](https://www.x.com/sites/default/files/pp_expresscheckout_integrationguide.pdf)。它使您可以更直接地访问系统，并允许您根据需要自定义内容。

无论哪种方式，您都可以实现您的目标。

# javascript - Web 方法抛出内部错误..参数匹配所以不知道为什么

> ID：14940297
> 
> 赞同：2
> 
> 时间：2013-02-18T16:00:49.653
> 
> 标签：javascript, jquery, asp.net

非常古老的 1.1 vb.net / asp.net 网络应用程序。我正在尝试进行 ajax 调用以使用以下内容填充自动完成文本框：

```
 $("#ucAddActionItemIssueActions_txtActionItem")
// don't navigate away from the field on tab when selecting an item
.bind("keydown", function(event) {
    if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {
        event.preventDefault();
    }
}).autocomplete({
    minLength: 0,
   source: function (request, response) {
        //get client value
        var c = $("#ucAddActionItemIssueActions_ddlClientAssignTo").val();
         var params= '{"ClientID":' + c + '}';
        $.ajax({
            url: "GetLogins.asmx/GetLogins",
            data: params,
            dataType: "json",
            type: "POST",
            contentType: "application/json; charset=utf-8",
            dataFilter: function (data) { return data; },
            success: function (data) {
                response($.map(data.d, function (item) {
                    return {
                        value: item.name
                    }
                }))
            },
            error: function (XMLHttpRequest, textStatus, errorThrown) {
                alert(textStatus);
            }
        });},
    focus: function() {
        // prevent value inserted on focus
        return false;
    },
    select: function(event, ui) {
        var terms = split(this.value);
        // remove the current input
        terms.pop();
        // add the selected item
        terms.push(ui.item.value);
        var email = GetEmail(ui.item.value);
        email = email + ";";
        emails.push(email);
        $("#ucAddActionItemIssueActions_hdnEmails").val(emails.join(""));
        // add placeholder to get the comma-and-space at the end
        terms.push("");
        this.value = terms.join("");
        return false;
    }
}); 
```

Web 方法（.asmx 文件）是这样的（仅作为测试用例）：

```
Imports System.Web.Services
Imports System.Collections
<System.Web.Services.WebService(Namespace := "http://tempuri.org/quikfix.jakah.com/GetLogins")> _
Public Class GetLogins
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    Public Function GetLogins(ByVal ClientID As Integer) As String()
        Dim myList As New ArrayList
        myList.Add("jstevens")
        myList.Add("jdoe")
        myList.Add("smartin")

        Dim arr() As String = CType(myList.ToArray(Type.GetType("System.String")), String())
        Return arr
    End Function
End Class 
```

在 chrome 的开发人员工具中运行我的应用程序时，它会引发内部 500 错误。当我点击它时，它说：

> System.InvalidOperationException：请求格式无效：application/json；字符集=UTF-8。在 System.Web.Services.Protocols.HttpServerProtocol.ReadParameters() 在 System.Web.Services.Protocols.WebServiceHandler.Invoke() 在 System.Web.Services.Protocols.WebServiceHandler.CoreProcessRequest()

参数都匹配，所以我不确定为什么会抛出错误。我是否需要`web.config`文件中的任何内容来明确引用我的 .asmx 文件？这是一个旧的 1.1 .net Web 应用程序，所以我不确定是否需要对 web.config 文件进行任何更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:53:51.230

如果您将 .NET 1.1 用于 Web 服务和应用程序，则该 Web 服务将不知道如何解释 JSON。有很多情况会产生您遇到的错误，但我注意到您遇到的错误发生在一个名为`ReadParameters`. 所以我专注于参数：

```
var params= '{"ClientID":' + c + '}'; 
```

我第一次看过去。我不是 1.1 Web 服务专家，也不是 AJAX 专家，但除非我大错特错，否则对于 1.1 Web 服务，JSON 只是一个字符串。Web 服务无法解释（或返回）JSON。

所以我会尝试将您的单个参数作为 int 传递：

```
var params = c; 
```

看看有什么不同。

# java - Sprite 在 JPanel 上不动

> ID：14940306
> 
> 赞同：0
> 
> 时间：2013-02-18T16:01:10.683
> 
> 标签：java, sprite, keylistener

我试图让一个简单的精灵在我的屏幕上移动。我无法弄清楚这段代码有什么问题，因为我遵循了来自不同源代码的说明，但删除了其他代码中其他功能添加的一些复杂性。现在我只是想让它在屏幕上自由移动。后来我打算让动画在移动时改变。这两个类的代码如下。

```
package game;

import java.awt.Graphics;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;

import javax.swing.JPanel;
import javax.swing.Timer:

public class Game extends JPanel implements ActionListener {

int x, y, b_width, b_height;
Player player;
      Timer timer;

public Game() {
    addKeyListener(new KeyRecorder());
    player = new Player();

                timer = new Timer(5, this);
                timer.start();
}

public void paint(Graphics g){
    g.drawImage(player.image, player.getX(), player.getY(), this);
}

@Override
public void actionPerformed(ActionEvent e) {
    player.move();
    repaint();
}

public class KeyRecorder extends KeyAdapter{
    public void keyPressed(KeyEvent e){
        player.keyPressed(e);
        repaint();
    }
    public void keyReleased(KeyEvent e){
        player.keyReleased(e);
    }
}

} 
```

和精灵：

```
package game;

import java.awt.Graphics;
import java.awt.Image;
import java.awt.event.KeyEvent;

import javax.swing.ImageIcon;

public class Player {

private String sprite = "sprite.png"; 
int x, y, dx, dy;
int width, height;
Image image;

public Player() {
    ImageIcon ii = new ImageIcon(this.getClass().getResource(sprite));
    image = ii.getImage();

}

public int getX(){
    return x;
}

public int getY(){
    return y;
}

public void move() {
    x = x + dx;
    y = y + dy;
}

public void keyPressed(KeyEvent e){
    int key = e.getKeyCode();

    if(key == KeyEvent.VK_UP){
        dy -= 3;
    }
    if(key == KeyEvent.VK_DOWN){
        dy += 3;
    }
    if(key == KeyEvent.VK_LEFT){
        dx -= 3;
    }
    if(key == KeyEvent.VK_RIGHT){
        dx += 3;
    }
}

public void keyReleased(KeyEvent e){
             int key = e.getKeyCode();

    if(key == KeyEvent.VK_UP){
        dy -= 0;
    }
    if(key == KeyEvent.VK_DOWN){
        dy += 0;
    }
    if(key == KeyEvent.VK_LEFT){
        dx -= 0;
    }
    if(key == KeyEvent.VK_RIGHT){
        dx += 0;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:10:23.263

自定义绘画是通过覆盖paintComponent() 方法而不是paint() 方法来完成的。

KeyEvent 仅由具有焦点的组件接收。看起来您的面板没有焦点。在构造函数中，您需要添加：

```
setFocusable(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:42:09.550

我对摇摆知之甚少，但是您是否为要绘制的每一帧调用“repaint()”？例如

```
thePanel.repaint(); 
```

如果它闪烁，您可能还需要将面板设置为双缓冲

```
setDoubleBuffered(true); 
```

我希望这些对你有帮助。如果这不能回答您的问题，也许这将[http://docs.oracle.com/javase/tutorial/uiswing/painting/](http://docs.oracle.com/javase/tutorial/uiswing/painting/)我没有时间阅读它，但我确实浏览了它，它看起来不错。

# javascript - 将值从 Javascript 发送到 servlet

> ID：14940307
> 
> 赞同：1
> 
> 时间：2013-02-18T16:01:14.887
> 
> 标签：javascript, jquery, html, jsp, servlets

嗨，我这里有这段代码：

```
$(document).ready(function() {
var clickCount = {}
aList = document.getElementsByTagName('a')

clickCounter = function()
{
    clickCount[this.href] = clickCount[this.href] ? clickCount[this.href]+1 : 1;
} 
```

// 事件附加到每个具有“href”属性的链接

```
for (var i=0 ; i<aList.length, a=aList[i] ; i++)
{
if (this.href)
{
a.onclick = clickCounter;
}
} 
```

我需要将其发送到 servlet，以便我可以将值存储在数据库中，我找到了 PHP 的这个示例，但不知道如何为 Servlet 执行此操作。还有我怎样才能获得 Servlet 的价值？

// 此示例使用 jQuery 将数据发送到 PHP 脚本 // 在窗口关闭之前发送 POST 请求

```
onbeforeunload = function()
{
$.post('/tracking.php', clickCount);
}
} 
```

该程序的目标是计算下载次数并将其存储在使用 JSP 的数据库中。

# c - Bison 堆栈值 ($n) 被覆盖（使用 C）

> ID：14940310
> 
> 赞同：1
> 
> 时间：2013-02-18T16:01:17.680
> 
> 标签：c, char, bison

我在 Bison 中编写了一个解析器，它对表达式的作用如下：

```
expr: 
   integer{
     exprPass pass;
     sprintf(s, load instructions, $1); //s is a global char buffer
     pass.s= s;
     pass.type = int;
     $$ = pass;
   }
   |
   double{
     exprPass pass;
     sprintf(s, load instructions, $1); //s is a global char buffer
     pass.s= s;
     pass.type = int;
     $$ = pass;
   }
   (etc) 
```

这工作正常，直到我通过类似的东西运行它

```
comparison: expression LESSTHAN expression 
```

当我打印 $1.s 时，它与 #3.s 相同！

$2 有正确的运算符，没有问题

我知道表达工作正常；使用 printfs 用 2<0 测试它告诉我 pass.s 得到 2，然后是 0。我不知道 $1 是如何以某种方式设置为 $3 ...我必须认为问题出在我的 C 代码中？

我的表达式结构是

```
typedef exprPass{
   char* s;
   variable_type type;
   //some other data
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:21:11.873

何时`exprPass`在词法分析器中分配（或为 Bison 准备的其他任何东西），`s`设置为指向词法分析器中包含已识别字符串的缓冲区？如果是这样，那么正在发生的事情是：

*   第一个表达式被识别，并且 an`exprPass`被设置为指向它。
*   The lexical analyzer reuses the buffer to continuing recognizing strings.
*   Now the first `exprPass` is pointing to a buffer that no longer contains the original string.
*   When the parser has both expressions, they are pointing to the same buffer, so they contain the same string.

To fix this, you must make a copy of each string (or otherwise preserve its value) when it is first recognized, and you must release the memory of that copy when the string is no longer needed. Depending on your needs, it may be easier to convert the string to a number when the lexical analyzer recognizes that and to store the number in `exprPass`. Then you have only a copy of the value and do not have to deal with copying strings and managing memory allocations.

# cordova - 移动网站或移动应用程序

> ID：14940313
> 
> 赞同：2
> 
> 时间：2013-02-18T16:01:22.167
> 
> 标签：cordova, sencha-touch-2, mobile-application, mobile-website

我想制作一个可以使用相机、联系人和地理位置等移动原生元素的移动网站。

我可以做这样的网站还是我必须去移动应用程序？

如果是移动应用程序并考虑使用 PhoneGap 的 Sencha Touch，除了通过应用程序商店外，还有其他选择吗？

是否可以使用 Sencha Touch 构建完整的应用程序，然后使用 PhoneGap 进行包装以支持所有移动设备？

我需要 Mac 机器还是可以使用 Windows 完成所有操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:58:44.303

在使用 Sencha Touch 或其他“混合”技术进行构建时，您依赖于 HTML5。因此，支持各种移动设备的 HTML5 网站无法满足您的某些要求。

摄像头访问：目前 HTML Media Capture 正在与 W3C ( [http://www.w3.org/TR/html-media-capture/](http://www.w3.org/TR/html-media-capture/) ) 一起起草。这适用于 iOS 6+，不确定 Android、Blackberry 或 Window 的手机。因此，目前封装在 PhoneGap/Cordova 中的 HTML5 应用程序将是您的最佳解决方案，因此您可以从支持的设备访问相机。

联系人访问：您需要 PhoneGap/Cordova 才能访问设备联系人列表。

地理位置：可用于 HTML5 ( [http://html5demos.com/geo](http://html5demos.com/geo) )。不需要PhoneGap。[http://docs.sencha.com/touch/2-0/#!/api/Ext.device.Geolocation](http://docs.sencha.com/touch/2-0/#!/api/Ext.device.Geolocation)

如果您想涵盖当前的设备（iOS 5 到 iOS 6+、Android 2.3+、Blackberry 和 Windows），您需要专注于使用以下一些技术构建混合应用程序：HTML5 响应式设计、JQuery Mobile、Sencha Touch 和钛应用程序。还有一些其他技术，但这些似乎是目前的主流。

可以通过 testflight.com for iOS 分发您的测试应用程序。如果您不想走 Apple 应用商店路线，则需要查看 Apple 的企业许可证，其中有很多规定。对于 Android，您可以为用户提供 .apk 文件，他们可以安装它。这一切都取决于您的环境。如果您正在构建一个了解您的用户和设备的公司控制环境，那么您有一些选择。如果您正在构建向世界分发...Apple App Store 和 Google Play Market 是您需要使用的。

你需要Mac吗？是的，如果您正在构建 iOS 移动应用程序并希望能够在模拟器中进行测试并生成签名版本。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:47:45.943

移动浏览器变得越来越好，但很可能某些功能仅在本机端可用。例如，地理定位在 iOS 上可用一段时间，但在 iOS6 中访问相机是新的。因此，您必须自行调查您需要哪些功能以及目标设备上是否可用。

如果没有应用商店（至少大规模），您将无法分发移动应用。

原则上是的，但“支持所有移动设备”有点模糊和雄心勃勃......

如果所有都可以在没有插件的情况下实现，您可以使用任何操作系统并使用 PhoneGap Build 服务构建应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-15T20:59:10.420

有一个易于安装应用程序的网站平台。

有 2 个很酷的应用程序只需点击几下即可处理移动网站：

[http://siteapps.com/app/mobile_site-321](http://siteapps.com/app/mobile_site-321)

和

[http://siteapps.com/app/mobile_site_for_restaurants-447](http://siteapps.com/app/mobile_site_for_restaurants-447)

希望这能有所帮助。

# eclipse - 在 Eclipse 中自动化 Tomcat 的类路径

> ID：14940315
> 
> 赞同：2
> 
> 时间：2013-02-18T16:01:34.320
> 
> 标签：eclipse, tomcat, ant

我的开发团队中有人问是否有办法通过 Ant 在 Eclipse 中设置 Tomcat 的类路径。当他们切换到工作台中的另一个分支时，每个人都厌倦了手动设置 Tomcat 的类路径。

因此，我们正在寻找可以用来自动设置类路径的东西，这样耗时更少。

你知道可以用来实现这一点的东西（可能是一些 Eclipse 插件的 Ant）吗？我在互联网上没有找到任何关于这个主题的东西。

# c# - 如何在 C# 中检查 control.anchor 属性值？

> ID：14940316
> 
> 赞同：1
> 
> 时间：2013-02-18T16:01:36.037
> 
> 标签：c#, anchor

如何检查控件的锚属性的值？

假设我有一个控件，代码开发人员可以在设计器中设置锚值。在 C# 代码中，如何检查是否为控件设置了任何特定的锚值？

例如，假设下面的 Sender 控件具有由开发人员为此控件设置的 Top、Left 和 Right 锚点。检查 Top 锚点是否设置的 if 语句是什么样的？

```
private int DetermineMouseWhere(Control Sender)
{
    if (Sender.Anchor == AnchorStyles.Top) // what should this be like
    {
        //do something
    }
} 
```

你们中的一些人可能会问为什么要这样做...如果锚点设置在控件的那一侧，我不想在此控件上提供调整大小的操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:03:32.587

因为 AnchorStyles 有 [Flags] 属性，所以可以使用[Enum.HasFlag()](http://msdn.microsoft.com/en-GB/library/system.enum.hasflag.aspx)方法来确定它：

```
if (Sender.Anchor.HasFlag(AnchorStyles.Top)) 
```

对于 .Net 3.5 或更早版本：

```
if ((Sender.Anchor & AnchorStyles.Top) != 0) 
```

或者：

```
if ((Sender.Anchor & AnchorStyles.Top) == AnchorStyles.Top) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:08:15.837

由于 Enum.HasFlag() 仅从 .NET 4 开始受支持，因此这是一种适用于早期版本的方法：

```
if (Sender.Anchor & AnchorStyles.Top != 0) 
```

对于多个锚点（例如左上角）

```
if (Sender.Anchor & (AnchorStyles.Top | AnchorStyles.Left) == (AnchorStyles.Top | AnchorStyles.Left)) 
```

如果您要检查多次，您可能需要为此实现一个方法。

```
public bool StyleHasOptions(AnchorStyles style, AnchorStyles options)
{
    return style & options == options;
}

//// Use it like this:
// if (StyleHasOptions(Sender.Anchor, AnchorStyles.Top | AnchorStyles.Left)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T16:09:09.977

检查标志集通常是这样完成的：

```
if ((Sender.Anchor & Anchor.Styles.Top) == Anchor.Styles.Top)
    //do something 
```

# perl - 第 24 和 26 行的语法错误。我不知道为什么？

> ID：14940317
> 
> 赞同：0
> 
> 时间：2013-02-18T16:01:38.350
> 
> 标签：perl, bioinformatics

bioinfo2.pl 第 24 行的语法错误，“);”附近 bioinfo2.pl 第 26 行，“}”附近的语法错误 bioinfo2.pl 的执行由于编译错误而中止。

```
print "Enter file name......\n\n";
chomp($samplefile = <STDIN>);
open(INFILE,"$samplefile") or die "Could not open $samplefile";

@residue_name= ();
@residue_count= ();
while($newline = <INFILE>) 
{
    if ($newline =~ /^ATOM/)
    {
        chomp $newline;
        @columns = split //, $newline;  
        $res = join '', $columns[17], $columns[18], $columns[19];
        splice @columns,0;
        $flag=0
        for ($i = 0; $i<scalar(@residue_name); $i++;) 
        {
            if (@residue_name[i] == $res)
            {
                @residue_count[i] = @residue_count[i] + 1;
                $flag=1;

            }
        }
        if($flag==0)
        {
            push(@residue_name, $res);  
        }

        for ($i = 0; $i<scalar(@residue_name); $i++) 
        {   
            print (@residue_name[i], "-------", @residue_count[i], "\n");
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T18:41:51.213

我花了一段时间才发现所有各种错误。正如其他人所说，使用`use warnings;`和`use strict;`

**规则#1**：每当您看到指向完美行的*语法错误时，您应该始终查看之前的行是否缺少分号。*你忘记了后面的分号`$flag=0`。

为了追查所有问题，我将您的代码重写为更*现代*的语法：

```
#! /usr/bin/env perl
use strict;
use warnings;
use autodie;

print "Enter file name......\n\n";
chomp (my $samplefile = <STDIN>);
open my $input_file, '<:crlf', $samplefile;

my @residue_name;
my @residue_count;
while ( my $newline = <$input_file> ) {
    chomp $newline;
    next if $newline !~ /^ATOM/;  #Eliminates the internal `if`
    my @columns = split //, $newline;
    my $res = join '', $columns[17], $columns[18], $columns[19];
    my $flag = 0;
    for my $i (0..$#residue_name) {
        if ( $residue_name[$i] == $res ) {
            $residue_count[$i]++;
            $flag = 1;
        }
    }
    if ( $flag == 0 ) {
        push @residue_name, $res;
    }

    for my $i (0..$#residue_name) {
        print "$residue_name[$i] -------  $residue_count[$i]\n";
    }
}
close $input_file; 
```

以下是更改列表：

*   **第 2 行和第 3 行**：始终使用`use strict;`和`use warnings;`。这些将帮助您追踪大约 90% 的程序错误。
*   **第 4 行**：使用`use autodie;`. 这将消除检查文件是否打开的需要。
*   **第 7 行（和其他）**：使用`use strict;`要求您预先声明变量。`my`因此，无论何时首次使用变量，您都会看到。
*   **第 8 行**：使用三个参数`open`并使用*本地变量*作为文件句柄而不是 glob（即 $file_handle 与 FILE_HANDLE）。主要原因是局部变量比 glob 更容易传递到子例程中。
*   **第 9 行和第 10 行**：无需初始化数组，只需声明它们就足够了。
*   **第 13 行**：总是`chomp`一读入。
*   **第 14 行**：这样做消除了`if`包含整个`while`循环的整个内部语句。代码块（例如`if`、`while`和`for`）何时变得太长并且相互嵌入太多时很难弄清楚。以`next`这种方式使用可以让我消除`if`障碍。
*   **第 17 行**：这是您错过了第一个语法错误的分号的地方。最主要的是我消除了非常混乱的`splice`命令。如果你想将你的数组归零，你可以简单地说`@columns = ();`哪个更清楚。但是，由于`@columns`现在只在`while`循环范围内，我不再需要将其清空，因为它将为文件的每一行重新定义。
*   **第 18 行**：这是一种更简洁的方法，可以循环遍历数组的所有行。请注意，它`$#residue_name`为您提供了最后一个索引，`$#residue_name`而标量 @resudue_name 为您提供了元素的数量。这是一个非常重要的区别！如果我有一个`@array`= `(0, 1, 2, 3, 4)`，`$#array`将是 4，但`scalar @array`将是 5。`C`在执行此操作时使用样式 for 循环可能会有点混乱。你应该使用`>`or`>=`吗？使用名称是显而易见的，并且消除了在 C 样式语句`(0..$#residue)`中包含额外分号的错误的可能性。`for`由于出错的可能性和语法的复杂性，创建 Python 的开发人员决定不允许 C 风格的 for 循环。
*   **第 19 行（和其他）**：Using`warnings`指出你做了`@residue_name[i]`，但它有几个问题。首先，`$residue_name[...]`索引数组时应该使用，其次，`i`不是整数。你的意思是`$i`。从而`@residue_name[i]`变成`$residue_name[$i]`。
*   **第 20 行**：如果要增加变量，请使用`$foo++;`or`$foo += 1;`和 not `$foo = $foo + 1;`。前两个使您更容易看到您正在递增变量而不是重新计算它的值。
*   **第 29 行**：Perl 的一大特点是可以在引号内插入变量。您可以将所有内容放在一组引号内。顺便说一句，如果你确实将一个语句分成多个部分，你应该使用`.`而不是。这是一个列表操作。这意味着您打印的内容取决于. 这是一个 Perl 变量，它说明当您将列表插入字符串时，在列表的每个项目之间打印什么。`,``print``,``$,``$,`

* * *

请不要将此视为对您编码能力的批评。许多教授 Perl 的 Perl 书籍，以及许多教授 Perl 的课程似乎都在教授 Perl，就像在 Perl 3.0 时代一样。当我第一次学习 Perl 时，它是在 Perl 3.0 中，我的大部分语法看起来都像你的。然而，Perl 5.x 已经发布了很长一段时间，它包含许多使编程更容易和更清晰易读的特性。

我花了一段时间才摆脱 Perl 3.0 的习惯，进入 Perl 4.0 和后来的 Perl 5.0 习惯。您可以通过查看其他人的工作以及在 Stack Overflow 等论坛上提问来学习。

我仍然不能说你的代码会起作用。我没有你的意见，所以我无法对此进行测试。但是，通过使用此代码作为程序的基础，调试这些错误应该很容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:33:29.573

这可能是可取的`use strict; use warnings`。这迫使你声明你的变量（你可以这样做`my`），并排除了许多可能的错误。

以下是我注意到的几件事：

1.  在 Perl5 v10 及更高版本中，您可以使用`say`函数 (`use 5.010`或`use feature 'say'`)。这就像`print`但在最后添加了一个换行符。

2.  永远不要使用双参数形式的 open。这会引发一些安全问题。提供明确的开放模式。此外，您可以使用标量作为文件句柄；这提供了很好的功能，例如自动关闭文件。

    ```
    open my $INFILE, '<', $samplefile or die "Can't open $samplefile: $!"; 
    ```

    该变量包含失败`$!`的原因。`open`

3.  如果要从数组中检索元素列表，可以使用切片（多个下标）：

    ```
    my $res = join '', @columns[17 .. 19]; # also, range operator ".." 
    ```

    请注意，印记现在是`@`，因为我们采用多个元素。

4.  这`splice @columns, 0`是“从数组中删除所有元素并返回它们”的一种奇特方式。这不是必需的（稍后您不会从该变量中读取）。如果您使用词法变量（用 声明`my`），那么循环的每次迭代`while`都会收到一个新变量。如果你真的想删除内容，你可以`undef @columns`. 这应该更有效率。

5.  **实际错误：**您需要一个分号 after`$flag = 0`来终止语句，然后才能开始循环。

6.  **实际错误：** C 风格的 for 循环包含括号中的三个表达式。您的最后一个分号将它们分成 4 个表达式，这是一个错误。只需将其删除，或查看我的下一个提示：

7.  C 风格的循环 ( `for (foo; bar; baz) {}`) 很痛苦且容易出错。如果您只迭代一个范围（例如索引），那么您可以使用范围运算符：

    ```
    for my $i (0 .. $#residue_name) { ... } 
    ```

    `$#`印记给出了数组的最后一个索引。

8.  下标数组（访问数组元素）时，您必须包含索引的印记：

    ```
    $residue_name[$i] 
    ```

    请注意，数组的标志是`$`，因为我们只访问一个元素。

9.  图案`$var = $var + 1`可以缩短为`$var++`. 这使用增量运算符。

10.  `$flag == 0`可以缩写为`!$flag`，因为除零之外的所有数字都被认为是正确的。

这是脚本的重新实现。它将文件名作为命令行参数；这比提示用户更灵活。

```
#!/usr/bin/perl

use strict; use warnings; use 5.010;

my $filename = $ARGV[0]; # @ARGV holds the command line args
open my $fh, "<", $filename or die "Can't open $filename: $!";

my @residue_name;
my @residue_count;

while(<$fh>) { # read into "$_" special variable
   next unless /^ATOM/; # start a new iteration if regex doesn't match

   my $number = join "", (split //)[17 .. 19]; # who needs temp variables?

   my $push_number = 1; # self-documenting variable names
   for my $i (0 .. $#residue_name) {
       if ($residue_name[$i] == $number) {
           $residue_count[$i]++;
           $push_number = 0;
       }
   }
   push @residue_name, $number if $push_number;

   # are you sure you want to print this after every input line?
   # I'd rather put this outside the loop.
   for my $i (0 .. $#residue_name) {
       say $residue_name[$i], ("-" x 7), $residue_count[$i]; # "x" repetition operator
   }
} 
```

这是一个对于大型输入文件可能更快的实现：我们使用哈希（查找表），而不是遍历数组：

```
#!/usr/bin/perl

use strict; use warnings; use 5.010;

my $filename = $ARGV[0]; # @ARGV holds the command line args
open my $fh, "<", $filename or die "Can't open $filename: $!";

my %count_residue; # this hash maps the numbers to counts
                   # automatically guarantees that every number has one count only

while(<$fh>) { # read into "$_" special variable
   next unless /^ATOM/; # start a new iteration if regex doesn't match

   my $number = join "", (split //)[17 .. 19]; # who needs temp variables?

   if (exists $count_residue{$number}) {
     # if we already have an entry for that number, we increment:
     $count_residue{$number}++;
   } else {
     # We add the entry, and initialize to zero
     $count_residue{$number} = 0;
   }
   # The above if/else initializes new numbers (seen once) to zero.
   # If you want to count starting with one, replace the whole if/else by
   #     $count_residue{$number}++;

   # print out all registered residues in numerically ascending order.
   # If you want to sort them by their count, descending, then use
   #     sort { $count_residue{$b} <=> $count_residue{$a} } ...
   for my $num (sort {$a <=> $b} keys %count_residue) {
       say $num, ("-" x 7), $count_residue{$num};
   }
} 
```

# wpf - WPF。将DLL嵌入EXE

> ID：14940319
> 
> 赞同：2
> 
> 时间：2013-02-18T16:01:40.250
> 
> 标签：wpf, dll, embed, exe

我希望将 DLL 嵌入到我的 WPF 应用程序的 EXE 中，这样我实际上只有 1 个要分发的文件，即 .EXE。所有这些东西都完全超出了我的想象，但我已经按照[http://richarddingwall.name/2009/05/14/wpf-how-to-combine-mutliple-assemblies-into-a-single-中概述的步骤进行操作exe/](http://richarddingwall.name/2009/05/14/wpf-how-to-combine-mutliple-assemblies-into-a-single-exe/)但我仍然无法让它工作。对此有任何想法或帮助吗？只要 DLL 与 EXE 位于同一文件夹中，它就可以工作，但如果我删除 DLL，它将失败。但是，我根本不希望 DLL 存在，而是嵌入在 EXE 中。我在这里搜索了其他推荐此解决方案的帖子，但我的问题是一切都编译得很好，只是它不起作用而且我不知道如何修复它。

1) 我已将有问题的 DLL 作为资源添加到项目中，并将其构建操作设置为嵌入式资源

2）上面链接中概述的代码，我已经添加到 App.xaml.cs 文件以及使用 System.Reflection & System.IO

我应该做些什么来让它工作吗？

谢谢

剃须

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T16:27:19.367

如果您使用的是带有 Nuget 的 Visual Studio，您只需将所需的引用设置为“复制本地 = true”并安装[Fody.Costura](https://github.com/Fody/Costura)。

根据项目页面上提供的文档，您可以使用一个简单的 xml 文件稍微改进一下（如果需要，还可以整理您的构建目录）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:08:44.153

您可以使用[ILMerge](https://research.microsoft.com/en-us/people/mbarnett/ilmerge.aspx)。我们一直使用它来将 dll 合并到可执行文件和其他库中。

这是[其他人](https://stackoverflow.com/a/7504194/174499)如何使用 ILMerge 来完成此任务的，因此这可能被视为重复问题。

# python - 打印 snmpwalk 结果的数量

> ID：14940324
> 
> 赞同：3
> 
> 时间：2013-02-18T16:01:54.893
> 
> 标签：python, perl, snmp, cacti

试图在 Ubuntu 服务器上编写一个脚本，从 snmpwalk 命令读取结果的数量，然后将其发送到 Cacti 进行绘图。

由于我们都没有任何编程知识，并且根据我们的尝试，我们还没有成功。

它会是这样的：

脚本运行：`snmpwalk -v 1 -c public -Cp 10.59.193.141 .1.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1`

该命令将打印

```
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.0.34.250.121.174.124 = Hex-STRING: 00 22 FA 79 AE 7C
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.0.35.20.11.246.64 = Hex-STRING: 00 23 14 0B F6 40
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.0.38.198.89.34.192 = Hex-STRING: 00 26 C6 59 22 C0
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.40.224.44.221.222.148 = Hex-STRING: 28 E0 2C DD DE 94
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.100.163.203.10.120.83 = Hex-STRING: 64 A3 CB 0A 78 53
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.120.214.240.8.133.165 = Hex-STRING: 78 D6 F0 08 85 A5
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.132.0.210.179.213.93 = Hex-STRING: 84 00 D2 B3 D5 5D
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.132.0.210.201.8.196 = Hex-STRING: 84 00 D2 C9 08 C4
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.140.112.90.108.236.188 = Hex-STRING: 8C 70 5A 6C EC BC
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.140.112.90.139.18.244 = Hex-STRING: 8C 70 5A 8B 12 F4
iso.3.6.1.4.1.11.2.14.11.6.4.1.1.8.1.1.2.1.180.240.171.112.37.69 = Hex-STRING: B4 F0 AB 70 25 45
Variables found: 11 
```

然后脚本应该以某种方式执行：读取直到找到变量：并读取“11”，然后打印“11”。

所以基本上我们希望脚本在这种情况下过滤掉数字“11”，我们可以在 Cacti 中使用它来绘制图形。我们在谷歌上尝试了一些脚本并四处寻找信息，但一无所获。

我认为如果你知道怎么做应该很容易，但我们是编程的初学者。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:10:02.447

使用`perl`，在管道后添加以下命令以提取所需的数字：

```
... | perl -ne 'm/\A(?i)variables\s+/ and m/(\d+)\s*$/ and printf qq|%s\n|, $1 and exit' 
```

它将打印：

```
11 
```

# java - 简单测验....java.lang.NullPointerExeption 错误

> ID：14940325
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:01:56.750
> 
> 标签：java, android

我正在尝试使用带有问题和答案的 .txt 文件对 JSON 进行简单的测验。对我来说不是那么简单。我的试用 txt 文件中只有 23 个问题。无论如何，我得到了错误：Caused by: java.lang.NullPointerExeption on line 65 of the Kviz class，就是下面的“newGame();” . 这里是 Kviz.java 的代码：

```
package rs.androidaplikacijekvizopstekulture;

import java.io.IOException;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.Window;
import android.view.WindowManager;
import android.widget.Button;
import android.widget.TextView;

public class Kviz extends Activity implements View.OnClickListener{

    Button bIzlazIzKviza, bOdgovor1, bOdgovor2, bOdgovor3, bOdgovor4;
    TextView question;
    kvizData kvizData = null;
    boolean mWait = false;

    private void newGame(){
        try {
        if(this.kvizData == null)
            this.kvizData = new kvizData();
            this.kvizData.randomQuestion();
            this.question.setText(this.kvizData.getQuestion());
            this.bOdgovor1.setText(this.kvizData.getAnswer()[0]);
            this.bOdgovor2.setText(this.kvizData.getAnswer()[1]);
            this.bOdgovor3.setText(this.kvizData.getAnswer()[2]);
            this.bOdgovor4.setText(this.kvizData.getAnswer()[3]);
            this.bOdgovor1.setEnabled(true);
            this.bOdgovor2.setEnabled(true);
            this.bOdgovor3.setEnabled(true);
            this.bOdgovor4.setEnabled(true);
            return;
        } catch (IOException localIOException) {
            while(true)
            localIOException.printStackTrace();
        }
    }

    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.kviz);

        bIzlazIzKviza = (Button) findViewById(R.id.bIzlazIzKviza);
        question = (TextView) findViewById(R.id.tvPitanje);
        bOdgovor1 = (Button) findViewById(R.id.bOdgovor1);
        bOdgovor2 = (Button) findViewById(R.id.bOdgovor2);
        bOdgovor3 = (Button) findViewById(R.id.bOdgovor3);
        bOdgovor4 = (Button) findViewById(R.id.bOdgovor4);
        bOdgovor1.setOnClickListener(this);
        bOdgovor2.setOnClickListener(this);
        bOdgovor3.setOnClickListener(this);
        bOdgovor4.setOnClickListener(this);
            newGame();

        bIzlazIzKviza.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                finish();

            }
        });

    }

    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

    }
} 
```

这是 kvizData.java 的代码：

```
package rs.androidaplikacijekvizopstekulture;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import com.google.gson.JsonArray;
import com.google.gson.JsonParser;

public class kvizData {
     static String resourceFile;
      static int size = -1;
      String[] answer = new String[4];
      String question;
      int right;

      public kvizData()
      {
        if (size < 0);
        try
        {
          loadResource("/rs/androidaplikacije/kvizopstekulture/data/pitanja.txt");
          return;
        }
        catch (IOException localIOException)
        {
          while (true)
            localIOException.printStackTrace();
        }
      }

      private void loadResource(String paramString)
        throws IOException
      {
        resourceFile = paramString;
        InputStream localInputStream = getClass().getResourceAsStream(paramString);
        BufferedReader localBufferedReader = new BufferedReader(new InputStreamReader(localInputStream, "UTF-8"));
        for (size = 0; ; size = 1 + size)
        {
          String str;
          do
          {
            str = localBufferedReader.readLine();
            if (str == null)
            {
              localInputStream.close();
              return;
            }
          }
          while ((str == null) || (str.trim().length() <= 0));
        }
      }

      public static void main(String[] paramArrayOfString)
        throws IOException
      {
        kvizData localkvizData = new kvizData();
        localkvizData.loadResource("/rs/kvizopstekulture/data/pitanja.txt");
        for (int i = 0; ; i++)
        {
          if (i >= 23)
            return;
          localkvizData.randomQuestion();
          System.out.println();
        }
      }

      public String[] getAnswer()
      {
        return this.answer;
      }

      public String getQuestion()
      {
        return this.question;
      }

      public int getRight()
      {
        return this.right;
      }

      public void randomQuestion()
        throws IOException
      {
        int i = (int)(Math.random() * size);
        BufferedReader localBufferedReader = new BufferedReader(new InputStreamReader(getClass().getResourceAsStream(resourceFile), "UTF-8"));
        int j = 0;
        while (true)
        {
          String str = localBufferedReader.readLine();
          if (str == null)
            return;
          if ((str != null) && (str.trim().length() > 0))
          {
            j++;
            if (j == i)
            {
              System.out.println(str);
              JsonArray localJsonArray = new JsonParser().parse(str).getAsJsonArray();
              this.question = localJsonArray.get(0).getAsString();
              System.out.println(this.question);
              this.right = localJsonArray.get(1).getAsInt();
              this.answer[0] = localJsonArray.get(2).getAsString();
              this.answer[1] = localJsonArray.get(3).getAsString();
              this.answer[2] = localJsonArray.get(4).getAsString();
              this.answer[3] = localJsonArray.get(5).getAsString();
            }
          }
        }
      }

      public void setAnswer(String[] paramArrayOfString)
      {
        this.answer = paramArrayOfString;
      }

      public void setQuestion(String paramString)
      {
        this.question = paramString;
      }

      public void setRigth(int paramInt)
      {
        this.right = paramInt;
      }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:10:01.800

看起来您的 kviz.xml 文件没有`Button`with id`bIzlazIzKviza`

`<Button id="+@bIzlazIzKviza" .../>`在您的 XML 布局文件中吗？

# ios - 如何检查用户是否在 Twitter 上关注您？

> ID：14940331
> 
> 赞同：5
> 
> 时间：2013-02-18T16:02:06.483
> 
> 标签：ios, ios5, twitter, twitter-follow

[我知道如何在 Twitter 上创建“关注我”按钮](https://github.com/chrismaddern/Follow-Me-On-Twitter-iOS-Button/)，但我只想在用户尚未关注我的情况下显示它。有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T02:22:16.850

您可以使用此端点获取您自己的关注者 ID 的列表：[https ://dev.twitter.com/docs/api/1/get/followers/ids](https://dev.twitter.com/docs/api/1/get/followers/ids)

如果您知道他们的推特句柄，您可以使用此端点获取使用您的应用程序的人的 ID：[https ://dev.twitter.com/docs/api/1/get/users/lookup](https://dev.twitter.com/docs/api/1/get/users/lookup)

然后您的按钮显示代码将如下所示：

```
if ([arrayOfFollowerIds containsObject:idOfAppUser]){

    followButton.hidden = YES;

} 
```

# python - 映射函数和输入函数参数

> ID：14940338
> 
> 赞同：0
> 
> 时间：2013-02-18T16:02:16.267
> 
> 标签：python, map-function

这是一个愚蠢的例子：

```
def add_x_to_input(x,k):
   return x + k

myList = [1,2,3,4]
myNewList = map(add_x_to_input???, myList) 
```

当我将其作为输入函数时，`x`如何指定 的参数？`add_x_to_input``map`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T16:03:45.613

你可以使用[`functools.partial()`](http://docs.python.org/3/library/functools.html#functools.partial)：

```
from functools import partial
map(partial(add_x_to_input, some_value_for_x), myList) 
```

或者您可以使用[`lambda`](http://docs.python.org/3/reference/expressions.html#lambda)（匿名的内联函数）：

```
map(lambda k: add_x_to_input(some_value_for_x, k), myList) 
```

或者你可以定义一个显式的新函数：

```
def wrapping_function(k):
    return add_x_to_input(some_value_for_x, k)

map(wrapping_function, myList) 
```

如果您追求绝对的速度，那么该`functools.partial()`方法将赢得轻松；它是用 C 代码实现的，避免了额外的 Python 堆栈推送：

```
>>> import timeit
>>> L = range(10)
>>> def foo(a, b): pass
... 
>>> def p(b): return foo(1, b)
... 
>>> timeit.timeit('map(p, L)', 'from __main__ import foo, L; from functools import partial; p = partial(foo, 1)')
3.0008959770202637
>>> timeit.timeit('map(p, L)', 'from __main__ import foo, L; p = lambda b: foo(1, b)')
3.8707590103149414
>>> timeit.timeit('map(p, L)', 'from __main__ import foo, L, p')
3.9136409759521484 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:05:02.900

```
def add_x_to_input(x,k):
   return x + k

myList = [1,2,3,4]
x = 5
myNewList = map(lambda k:add_x_to_input(x,k), myList) 
```

要不就：

```
myNewList = [x+k for k in myList] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T16:05:50.247

定义一个闭包：

```
In [61]: def add_x_to_input(x,k):
    ...:    return x + k

In [62]: def add_1(x):
    ...:     return add_x_to_input(x,1)

In [63]: add_1(1)
Out[63]: 2

In [64]: list = [1,2,3]

In [65]: map(add_1, list)
Out[65]: [2, 3, 4] 
```

# java - JButtons 的 Instanceof、Enum 或多个侦听器

> ID：14940339
> 
> 赞同：1
> 
> 时间：2013-02-18T16:02:16.003
> 
> 标签：java, model-view-controller, enums, actionlistener, instanceof

在我的摇摆 GUI 上，我有数据行和许多按钮，用户选择了许多项目，然后选择了一个按钮。

每个按钮对数据应用不同的规则，因此需要为每个按钮调用不同的函数，我使用的是 MVC 设计模式，我的问题是，我应该如何处理每个按钮的不同需求？

1.  创建一个扩展 JButton 的类“MyButton”，然后给它某种枚举，然后我可以创建 1 个动作侦听器，然后通过检查枚举来检查在 ActionListener 中按下了哪个按钮。

2.  与上面类似，但每个按钮都有不同的类，然后使用 instanceof 来确定哪个按钮被按下。

3.  为每个按钮实现一个单独的 ActionListener

4.  其他？

如果有的话，哪种方法最好使用？任何建议都会受到极大的欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:06:48.623

为每个按钮实现一个单独的监听器。

首先，因为这是通常的解决方案。其次，没有理由扩展 JButton 只是为了在单击它时执行其他操作。这就是 ActionListener 的作用。Swing 组件设计为按原样*使用*，通常不应*扩展*它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:09:48.343

它是 MVC：您将逻辑（在 Actions 中）和视图（按钮）分开。

无需使用枚举或子类化 JButton。当你有几十个按钮时，你可以做些什么来保持干净，是一个工厂类来创建 Action 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:13:19.777

如果我正确地回答了您的问题，您的意思是说，您在订单项中有一个数据，并且每个订单项都有一个按钮，按下该按钮会调用与订单项有关的规则。

如果是这样，那么

*   如果您采用第二种方法，您需要在以后每次添加新的行项目时在您的操作侦听器中进行编码。
*   第三种方法也将具有与上述相同的含义

第一种方法听起来不错。你可以有一个工厂，它可能有一个以枚举变量和相应规则为键的哈希映射。在动作侦听器内部从工厂获取规则并调用它。

通过这种方式，您可以获得适当的关注点分离，并且您的动作侦听器将充当控制器，不了解规则和数据项。

# jquery - 这个场景的最佳实践是什么 - jQuery & CSS？

> ID：14940340
> 
> 赞同：0
> 
> 时间：2013-02-18T16:02:16.923
> 
> 标签：jquery, html, css

我对 Web 开发还很陌生，所以我不确定这是否是完成这项任务的最有效方式。

我目前正在写一个在线商店，在产品页面上，我从数据库后端获取了 x 数量的产品。然后我使用结果数组生成动态 html/css 以输出：

```
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
    echo('
        <div class="box">
            <div class="product"><img src="upload/' . $row['prod_image'] . '" /></div>
            <h3> ' . $row['prod_title'] . '</h3>
            <div class="create-user">
                <p>More Details...</p>
            </div>
            <div class="dialog" title="Basic dialog">
                <p><img src="upload/class.png"/>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the x icon.</p>
            </div>
            <p class="price">Price: <span class="red">£' . $row['prod_price'] . '</span></p>
            <div><a href="#"></a> <a href="#"><img src="images/addtocart.gif" border="0" /></a></div>
            <div class="clearfloat"></div>
        </div>'
    );
} 
```

现在，当您单击“更多详细信息”时，它应该为每个特定产品调用 jQuery 对话框函数以打开“对话框”标签，但这似乎仅适用于第一个产品，不适用于其他产品。

JS代码：

```
$(function() {
    $( "#dialog").dialog({
        autoOpen: false
    });
    $('#create-user').click(function() {
        $('#dialog').dialog('open');
    });
}); 
```

我设法解决了这个问题，但这似乎是一种肮脏的方式，这就是我所做的。我为每个产品添加了一个唯一的 div id，然后使用增量使它们与 JavaScript 保持一致：

```
$incr = 1;
while ($row = mysqli_fetch_array($r, MYSQLI_ASSOC)) {
    echo('
        <div class="box">   
            <div class="product"><img src="upload/' . $row['prod_image'] . '" /></div>
            <h3> ' . $row['prod_title'] . '</h3>
            <div id="create-user' . $incr . '">
                <p>More Details...</p>
            </div>
            <p class="price">Price: <span class="red">£' . $row['prod_price'] . '</span></p>
            <div><a href="#"></a> <a href="#"><img src="images/addtocart.gif" border="0" /></a></div>
            <div id="dialog' . $incr . '" title="Basic dialog">
                <p><img src="upload/class.png"/>This is the default dialog which is useful for displaying information. The dialog window can be moved, resized and closed with the x icon.</p>
            </div>
            <div class="clearfloat"></div>
        </div>'
    );
    $incr++;
} 
```

和 JS 一起去：

```
$(function() {
    var diag_num = 0;
    while(diag_num < 4) {
        diag_num +=1;
        $("#dialog" + diag_num ).dialog({
            autoOpen: false
        });
        $('#create-user' + diag_num).click(function() {
            $('#dialog' + diag_num).dialog('open');
        });
    }
}); 
```

虽然这种方法适用于每页一定数量的产品，并且这样做没有问题，因为无论如何我每页只有大约 10 个（所以我知道我的 vars 长度），我不禁认为这是一种不好的做法。

我还研究过使用“div 类”，然后将所有产品分配给同一个类，使用 jQuery 类选择器找到类“create-user”，然后使用“父”方法以爬回DOM 树找到下一个“对话”类。这可行，但是当您打开一个对话框时，它会在页面上为每个产品打开一个对话框，因此我认为“DIVS”是独一无二的。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:09:24.927

```
$('.create-user').click(function(){
$(this).siblings('.dialog').dialog('open');
}); 
```

这应该适用于您发布的第一个代码示例。

on click it selects the next item with class dialog and opens it.

the `$(this)` here stands for the clicked "More Details...". siblings() fetches sll siblings, if you add a selector it filters them by the given selector. as you have wrapped your items in a box no other dialog should be selected.

# nosql - Liferay CMS 中是否有内容“触发器”？

> ID：14940341
> 
> 赞同：2
> 
> 时间：2013-02-18T16:02:19.250
> 
> 标签：nosql, liferay

这可能是关于 Liferay 的新手问题 - 抱歉：

有没有机会连接 Liferay CMS 中的保存过程？例如，一旦内容存储在 Liferay 中，我们希望将内容发送到 CDN 和单独的 NoSQL 数据库。

我们怎样才能做到这一点？任何提示都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T05:52:47.077

我认为一个钩子，无论是 ModelListener-hook`JournalArticle`还是 ServiceWrapper-hook 都可以保存 web 内容的方法，应该为您解决问题。

或者，如果您不想要实时更新，您可以随时在 liferay 中创建一个 cron-job，它会使用 Liferay API 查看特定的数据库表并为您完成工作。

# jsf-2 - 嵌套 ui:repeat 问题（或 f:ajax）

> ID：14940343
> 
> 赞同：0
> 
> 时间：2013-02-18T16:02:25.863
> 
> 标签：jsf-2, uirepeat

我有 2 个 ui:repeat 像这样嵌套：

```
<ui:repeat var="father" value="#{miuchile3.getMenusPadre(miuchile3.keyModulo)}" >
             <li>

                 <h:commandLink value="#{father.nombre}"  action="#{miuchile3.setMenu(father)}">
                 <f:ajax render=":menupags:menuDetalle" />
                 </h:commandLink>

                 <ul>
                     <ui:repeat var="submenu" value="#{miuchile3.getHijos(father.id)}" >
                         <li><h:commandLink value="#{submenu.nombre}" actionListener="#{miuchile3.setMenu(submenu)}">
                            <f:ajax  render=":menupags:menuDetalle" />
                         </h:commandLink></li>
                     </ui:repeat>

                 </ul>

               </li>

              </ui:repeat> 
```

这会生成一个具有这种格式的菜单

*   父亲菜单 1

    *   儿子菜单_1
    *   儿子菜单_2

* * *

*   父亲菜单 2

    *   儿子菜单2_1
    *   儿子菜单2_2
    *   儿子菜单2_3

ETC..

当我单击此子菜单时，我使用 f:ajax 呈现具有所选菜单详细信息的面板组（它显示与其关联的页面），问题是它仅适用于父菜单 1 及其子菜单，但适用于父亲菜单 2，它的 2 第一个子菜单工作正常，如果有第三个子菜单与“父菜单 2”相关联，我点击它，它什么也不做。

我不确定嵌套的 ui:repeat 或 f:ajax 是否存在问题，但我认为 ui:repeat 在第二次迭代或类似的东西后停止正常工作..“setMenu()”函数（在嵌套的内部ui:repeat) 由于某种原因停止工作。但它也可能是 f:ajax .. 我真的不知道。

编辑：

现在我发现了问题，但我不知道如何解决它。

问题在于，对于第一次迭代（第一个菜单及其子菜单），我在操作“setMenu（）”中调用的方法可以正常工作，但对于第二次迭代（父菜单 2 及其子菜单），setMenu() 方法是只调用了 2 次，如果有超过 2 个子菜单，我在操作中调用的方法 (setMenu()) 不起作用，我的意思是迭代有效，因为它打印了菜单和子菜单的所有名称，但是操作第一次迭代后仅适用于 2 个子菜单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T14:47:11.570

我将 ui:repeat 更改为数据表，它按我的意愿工作。如果您需要在内部调用某些操作，我不建议使用 ui:repeat 嵌套，它有奇怪的行为。

# php - 计算日期/时间 PHP

> ID：14940346
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:02:28.963
> 
> 标签：php, datetime

我需要将日期与今天进行比较。基本上我输入了 2/17/13，它会输出“昨天”。我已经尝试过`echo date('l jS F', strtotime('2/15/13'));`，但它只会显示该日期而不是与今天进行比较。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:10:57.987

来自[http://www.highlystructured.com/comparing_dates_php.html](http://www.highlystructured.com/comparing_dates_php.html)

```
$exp_date = "2006-01-16";
$todays_date = date("Y-m-d");

$today = strtotime($todays_date);
$expiration_date = strtotime($exp_date);

if ($expiration_date > $today) {
     $valid = "yes";
} else {
     $valid = "no";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:23:56.377

这是一个示例，可以帮助您入门：

```
$when = '2/17/13';
$now  = new DateTime();
// I append $now's time to $then, to make sure we compare 
// the two dates using the same time of the day
// if you want to compare to $then at 00:00:00, leave it out
$then = new DateTime( $when . ' ' . $now->format( 'H:i:s' ) );

$diff = $now->diff( $then );
switch( $diff->days )
{
    case 0:
        echo 'today';
    break;
    case 1:
        echo $diff->invert ? 'yesterday' : 'tomorrow';
    break;
    default:
        echo $diff->invert ? $diff->days . ' days ago' : $diff->days . ' days from now';
    break;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:29:32.303

Drupal 附带了一个非常好的`format_interval($interval, $granularity = 2, $langcode = NULL)` [功能](http://api.drupal.org/api/drupal/includes!common.inc/function/format_interval/7)。

```
<?php
function format_interval($interval, $granularity = 2, $langcode = NULL) {
  $units = array(
    '1 year|@count years' => 31536000,
    '1 month|@count months' => 2592000,
    '1 week|@count weeks' => 604800,
    '1 day|@count days' => 86400,
    '1 hour|@count hours' => 3600,
    '1 min|@count min' => 60,
    '1 sec|@count sec' => 1,
  );
  $output = '';
  foreach ($units as $key => $value) {
    $key = explode('|', $key);
    if ($interval >= $value) {
      $output .= ($output ? ' ' : '') . format_plural(floor($interval / $value), $key[0], $key[1], array(), array('langcode' => $langcode));
      $interval %= $value;
      $granularity--;
    }

    if ($granularity == 0) {
      break;
    }
  }
  return $output ? $output : t('0 sec', array(), array('langcode' => $langcode));
}
?> 
```

您无需运行 Drupal 即可使用它。只需在某处包含上述功能。但是，上面的函数也调用了`format_plural()`- 调用`t()`（两个自定义 Drupal 函数），所以你需要修改上面的函数或者包含所有的函数。

您的用例：

```
<?php
$today = date();
$compare = strtotime('2/15/13');
$interval = ($today - $compare);

print format_interval($interval, 1);
// Outputs '1 day'
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:34:23.357

```
function checkDate($todaysDate,$expirationDate){
 $today = strtotime($todays_date);
 $expiration_date = strtotime($exp_date);

 if ($expiration_date > $today) {
     $valid = "yes";
 } else {
     $valid = "no";
 }

return $valid
}

$expirationDate = "2006-01-16";
$todaysDate = date("Y-m-d");

$valid=checkDate($todaysDate,$expirationDate) 
```

在函数中执行此操作，然后您可以将其与任何日期组合一起使用。然后，您可以使用一些条件扩展该函数，以确定它是否“昨天”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T16:42:54.887

```
function relativeTime($time) {

$d[0] = array(1,"second");
$d[1] = array(60,"minute");
$d[2] = array(3600,"hour");
$d[3] = array(86400,"day");
$d[4] = array(604800,"week");
$d[5] = array(2592000,"month");
$d[6] = array(31104000,"year");

$w = array();

$return = "";
$now = time();
$diff = ($now-$time);
$secondsLeft = $diff;

for($i=6;$i>-1;$i--)
{
     $w[$i] = intval($secondsLeft/$d[$i][0]);
     $secondsLeft -= ($w[$i]*$d[$i][0]);
     if($w[$i]!=0)
     {
        $return.= abs($w[$i]) . " " . $d[$i][1] . (($w[$i]>1)?'s':'') ." ";
     }

}

$return .= ($diff>0)?"ago":"left";
return $return;
} 
```

# r - 如何为 gcheckbox 对象设置字体

> ID：14940349
> 
> 赞同：1
> 
> 时间：2013-02-18T16:02:33.127
> 
> 标签：r, fonts, gwidgets

gWidgets 中的`font`方法似乎不适用于`gcheckbox`（使用 RGtk2 工具包）。在以下代码中，样式正确应用于`glabel`对象，但对于`gcheckbox`.

```
library(gWidgets)
w <- gwindow("test", height=50)
g <- ggroup(container=w)
cb1 <- gcheckbox(text="one", container=g)
cb2 <- gcheckbox(text="two", container=g)
label <- glabel("text", container=g)
font(cb2) <- list(size=20)
font(label) <- list(size=20) 
```

有没有办法使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:19:19.497

API 中没有用于设置此字体的任何内容，但您可以将其破解：

```
## setfont properties
setfont_hack <- function(cb, spec) {
  require(RGtk2)
  widget <- getToolkitWidget(cb)$getChildren()[[1]]
  font_descr <- pangoFontDescriptionNew()
  if(!is.null(spec$weight))
    font_desc$setWeight(PangoWeight[spec$weight])
  if(!is.null(spec$style))
    font_desc$setStyle(PangoStyle[spec$style])
  if(!is.null(spec$scale))
    font_desc$setSize(spec$scale * PANGO_SCALE)
  if(!is.null(spec$family))
    font_desc$setFamily(spec$family)
  widget$modifyFont(font_desc)

  if(!is.null(spec$color))
    widget$modifyFg(GtkStateType[1], spec$color)
}

cb <- gcheckbox("label", cont=gwindow())
setfont_hack(cb, list(weight="bold", color="blue")) 
```

实际上，在复选框的标签部分调用 font<- 就足够了（只是 getToolkitWidget(cb)$getChildren()[[1]]），但是没有正确设置继承。（S3 类没有正确提升到 S4。）

在`gWidgets2RGtk2`这并没有好多少，但你可以这样做：

```
require(RGtk2)
label <- getToolkitWidget(cb)$getChildren()[[1]]
cb$set_rgtk2_font(label, list(weight="bold")) 
```

# php - php str_replace 和对象

> ID：14940350
> 
> 赞同：1
> 
> 时间：2013-02-18T16:02:33.770
> 
> 标签：php, string

是否可以在 foreach 循环内的流中更改对象元素的子字符串？所以我尝试但它不起作用。

```
$xml= '';

foreach ($objetcs as $object){

        str_replace('searched','replacement', $object->link);

        //then I would call a function to render my rss
        $xml .=$object->renderRSS();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:04:22.223

`str_replace`将返回一个字符串或一个数组，它不会改变原始变量，所以你应该这样做`$object->link = str_replace('searched','replacement', $object->link);`if `$link`is`public`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:06:00.007

尝试这个：

```
$xml= '';

foreach ($objetcs as $object){

        $object->link = str_replace('searched','replacement', $object->link);

        //then I would call a function to render my rss
        $xml .=$object->renderRSS();

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:05:23.570

尝试：

```
$object->link = str_replace('searched','replacement', $object->link); 
```

# listview - jquery mobile listview在每个项目之间创建空间

> ID：14940352
> 
> 赞同：3
> 
> 时间：2013-02-18T16:02:41.400
> 
> 标签：listview, jquery-mobile, space

我似乎无法删除每个列表项之间的小空间。该列表比我在这里发布的要长得多，但我认为这与问题无关。

我试图通过多次重新格式化列表来纠正它，但无济于事。我也参考了 jquery 移动网站，但仍然找不到答案。

我的代码：

```
<!DOCTYPE html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1," />
<!-- Website Title -->
<title>Test
</title>

<!-- Jquery Mobile Theme / Jquery Scripts -->
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
<script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>

</head> 

<!-- Color of Background -->
<body style="background:#6e6e6e">

<!-- Start of Name page -->
<div data-role="page" id="name">

<div data-role="header" data-theme="b">
    <h1>Test</h1>
</div><!-- /header -->

<div data-role="content">   
<p>
  <ul data-role="listview" data-filter="true" data-filter-placeholder="Test..." data-inset="true" data-autodividers="true">
    <li><a href="#link2">Hello</a></li>
    <li><a href="#link3">There</a></li>
    <li><a href="#link4">World</a></li>
    <li><a href="#link5">World2</a></li>
</p>
</div><!-- /content -->

<div data-role="footer" data-position="fixed" data-theme="b">
    <h4>© 2013 ChurchySearch</h4>
</div><!-- /footer -->
</div><!-- /Name page --> 
```

它一直看起来像这样： http: [//www.jesseandamanda.com/screenshot.png](http://www.jesseandamanda.com/screenshot.png)

建议？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-01-22T20:09:21.547

当您从 JQuery Mobile 演示页面复制代码时，就会发生这种情况。我猜你的清单也有同样的问题。尝试删除每个之前的不可见字符`<li>`以修复它。看看几行`<li>test</li><li>test</li>`看起来OK。

# java - 在不使用 camelproxy 的情况下调用 Camel JMS-Endpoint

> ID：14940353
> 
> 赞同：0
> 
> 时间：2013-02-18T16:02:50.653
> 
> 标签：java, jms, apache-camel, spring-jms

我创建了一个 jms 端点，并能够从客户端宽度调用它，即 spring xml 文件中的 camel:proxy。现在我希望能够在不使用 Spring/Camel 代理的情况下直接调用 JMS 端点。我想通过 URL 调用它。

我怎样才能做到这一点

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:07:37.273

您可以使用 Camel 中的 ProducerTemplate API 向任何类型的 Camel 端点/组件发送消息。

详见：[http ://camel.apache.org/producertemplate.html](http://camel.apache.org/producertemplate.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:32:09.553

骆驼队列可以发布到使用以下

```
public DirectJMSRemotingClient() throws JMSException {
    factory = new ActiveMQConnectionFactory(brokerURL);
    connection = factory.createConnection();
    connection.start();
    session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);
    Destination destination = session.createQueue("queueName");
    producer = session.createProducer(destination);
}

public void sendMessage() throws JMSException {

    TextMessage myTextMsg = session.createTextMessage();

    myTextMsg.setText("Hello World");
    System.out.println("Sending Message: " + myTextMsg.getText());
    producer.send(myTextMsg);
}

public static void main(String[] args) throws Exception {
    DirectJMSRemotingClient client = new DirectJMSRemotingClient();
    client.sendMessage();
} 
```

并且 Route 可以像这样在骆驼中定义

```
 <route>
        <from uri="jms:queue:queueName" />
        <setExchangePattern pattern="InOut" />
        <to uri="seda:camel-handler" />
    </route> 
```

# jquery - jQuery not() 函数

> ID：14940355
> 
> 赞同：0
> 
> 时间：2013-02-18T16:02:51.917
> 
> 标签：jquery, jquery-selectors

为什么小提琴不能正常工作

HTML

```
<div>
    <div>
        <div class="class-fake fake-class">Some other data</div>
        <div> Some data</div>
    </div>
    <span>
        Span data
    </span>
</div> 
```

JS

```
$(document).ready(function () {
    $("*").not(".class-fake").css("color", "red");
    //Div with class-fake should not turn to red
}); 
```

[http://jsfiddle.net/ZSL9H/](http://jsfiddle.net/ZSL9H/)

我用 $("div") 替换了 $("*") 但结果是一样的。

编辑 ：

我正在尝试做的事情：基本上我想向正文添加一个事件，以便如果单击匹配的元素以外的任何元素，`$('.class-fake')`则执行一个函数。所以我正在使用事件委托，这样每个元素都不会附加一个事件：

```
$("*").on("click", ":not(.class-fake)", function(){
 //execute
}); 
```

此外，`.class-fake`元素还添加了一个单独的`click`事件。

以上也行不通。即使我单击`.class-fake`元素，也会触发该事件。所以我虽然建议使用`$("*").not('.class-fake')`since`.not()``:not()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:11:16.820

代码没有`div`在 class上设置样式`class-fake`。

它在元素的所有父元素（包括`html`and`body`元素）上设置样式，这使得该元素内部的文本`div`也变为红色，因为它从父元素继承了颜色。

有些样式是继承的，例如`color`样式。您可以使用不同的样式，例如`border`，它不是继承的，以查看该样式实际上未在元素上设置：

[http://jsfiddle.net/ZSL9H/3/](http://jsfiddle.net/ZSL9H/3/)

* * *

### 编辑：

您不能通过从委托中排除事件来阻止事件的发生，因为事件只会冒泡并发生在父元素上。

捕获所有元素上的事件，`stopPropagation`用于防止它冒泡，并且仅在单击的元素不是您要排除的元素时才执行您的代码：

```
$("body").on("click", "*", function(e) {
  e.stopPropagation();
  if (!$(e.currentTarget).is('.class-fake')) {
    // execute
  }
}); 
```

演示：http: [//jsfiddle.net/rNqw8/1/](http://jsfiddle.net/rNqw8/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:04:12.783

因为`not()`不排除父`div`元素。很难指导您采用更好的方法，因为您没有具体说明您要做什么。

快速修复如下，但这非常依赖于 DOM 结构：

```
$("div > div > div").not(".class-fake").css("color", "red"); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T16:09:37.913

Jquery 会产生这样的结果：

```
 <div style="color: red">
         <div style="color: red">
             <div class="class-fake fake-class">Some other data</div>
             <div style="color: red"> Some data</div>
          </div>
          <span style="color: red">
              Span data
           </span>
    </div> 
```

如您所见......父母有一个“颜色：红色”......所以孩子也是红色......

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-18T16:07:25.620

正如 Rory McCrossan 所说，您只是说您不想将该 css 规则应用于 .class-fake，而是将其应用于其父级等等，从而使 .class_fake 继承该规则。

你可以这样做：

```
$(".class-fake").css("color", "black"); 
```

编辑：

这对我来说似乎是传播。使用这个[http://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

```
$(".class-fake").click(function(event){
  event.stopPropagation();
}); 
```

# iphone - 访问 UIImageView 文件名变通

> ID：14940356
> 
> 赞同：0
> 
> 时间：2013-02-18T16:02:53.707
> 
> 标签：iphone, objective-c, ipad, uiimageview

我查看了互联网，看到有类似问题的人，但不是完全相同的问题。

我正在为 iPhone 制作一个游戏，其中包含每个字母 (AZ) 的图像。在游戏开始时，我将一个字母随机分配给 12 个不同的`UIImageViews`. 我通过创建一个包含所有文件名的数组来做到这一点，然后为每个文件名分配一个随机`UIImageView`的`rand()`.

当用户点击一个字母时，我让它再次出现在正在构建答案词的不同区域。然后我将字母设置为，`NULL`这样用户就不能再次使用它来回答他们的问题。

问题是，当他们得到答案时，我如何区分字母的图像？所以我可以构造一个字符串来将它与字典进行比较，看看它是否是一个实际的单词。

我知道文件名丢失了，并且每个图像都是随机分配的。有没有更好的方法来处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:09:49.927

如果我理解正确，您需要一种简单的方法来从 UIImageView 中找到回信。

**选项 1（更好但更多的代码）：**

继承`UIUmageView`并创建自己的类，命名为`LetterImageView`. 向这个名为的类添加一个属性，该属性`letter`包含一个`NSString`. 当你构造这个类时，还要设置 letter 属性。

而不是使用原来的`UIImageView`，使用你的改进`LetterImageView`。这现在将记住哪个字母是哪个使用您的额外属性。

**选项 2（更快但 hackish）：**

任何视图都包含一个名为`tag`（这是一个`NSInteger`）的属性。您可以将标签设置为您想要的任何值。它应该可以帮助您标记视图，然后根据它们的标签搜索它们。

如果您目前没有使用该`tag`物业，您可以将您的信件保存在那里.. 有点难看，但会起作用。只需为每个字母分配一个数字，例如 A 为 1，B 为 2，等等。当你构造你的`UIImageView`时，还要将字母保存在标签中。每当您想发现哪个字母出现在特定图像视图中时，只需检查标签即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:16:58.860

你可以使用 UIView 而不是 UIImageView。UIView 有一个属性“标签”（NSInteger），您可以设置它以稍后识别您的视图（请参阅[UIView 标签](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/UIView/UIView.html#//apple_ref/doc/uid/TP40006816-CH3-SW25)）

我看到talkol对我来说有点太快了......

# css - 滑块中的文本在 ie 中变得粗体和粗体

> ID：14940357
> 
> 赞同：0
> 
> 时间：2013-02-18T16:02:56.233
> 
> 标签：css, wordpress, internet-explorer, cross-browser, slider

我在我们的一个客户网站中使用 wp-accordion 滑块。它在大多数浏览器中看起来都很棒，但在 IE 中，滑块标题中的字体变得非常粗壮。这只发生在 IE 中。

以下是用于在我使用的滑块中显示 tex 的 css 部分。

```
#accordion p.css-vertical-text {
border: 0 solid red;
bottom: 30px;
color: #333333;
display: block;
font-family: arial;
font-size: 18px;
height: 205px;
transform: rotate(-90deg);
white-space: nowrap;
width: 220px;
} 
```

滑块通过循环显示内容。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:41:14.843

您可以通过为元素提供背景颜色来改善 IE 渲染，例如：

```
background-color: white; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:02:04.770

只需在您的声明中添加一个字体粗细：

```
#accordion p.css-vertical-text {
    border: 0 solid red;
    bottom: 30px;
    color: #333333;
    display: block;
    font-family: arial;
    font-size: 18px;
    font-weight:400; /* add this */
    height: 205px;
    transform: rotate(-90deg);
    white-space: nowrap;
    width: 220px;
} 
```

# sql - 在 SMSS 中，查询结果中 NULL 和 nothing 有什么区别？

> ID：14940360
> 
> 赞同：0
> 
> 时间：2013-02-18T16:03:05.810
> 
> 标签：sql, ssms, sql-server-2008

我知道这可能是一个新手问题，但我想知道为什么我有时会在结果中得到 NULL，有时它只是完全空白 - 它们不应该都是 null 吗？

![在此处输入图像描述](../Images/cd479fce7945435fe3d026623ac51620.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:05:39.367

如您所见，该`Remarks`列没有*黄色*背景色，这表明它不是*NULL*。（*NULL 值有。*）

它包含一个空字符串`''`（*或者可能是空格*），它不同于`NULL`因为空字符串被**设置**为空`NULL`而未设置（*什么都没有*）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:08:26.020

在 Oracle 中，空字符串被视为 NULL。SQL Server 将其视为字符串值。

主要区别在于，在 SQL Server 中，您可以从以下内容返回结果

```
select * from mytable where myfield = '' 
```

# android - AndEngine：处理与 TMX 对象的冲突

> ID：14940361
> 
> 赞同：2
> 
> 时间：2013-02-18T16:03:09.557
> 
> 标签：android, collision-detection, andengine

我现在设法加载了一个 tmx 地图我想创建精灵不能移动的障碍物，我恢复了这样的障碍物：

```
try {
        final TMXLoader tmxLoader = new TMXLoader(this, this.mEngine.getTextureManager(), TextureOptions.BILINEAR_PREMULTIPLYALPHA, new ITMXTilePropertiesListener() {
            @Override
            public void onTMXTileWithPropertiesCreated(final TMXTiledMap pTMXTiledMap, final TMXLayer pTMXLayer, final TMXTile pTMXTile, final TMXProperties<TMXTileProperty> pTMXTileProperties) {
                /* We are going to count the tiles that have the property "cactus=true" set. */
                if(pTMXTileProperties.containsTMXProperty("obstacle", "true")) {
                    //TMXTiledMapExample.this.mCactusCount++;
                    //coffins[coffinPtr++] = pTMXTile.getTileRow() * 15 + pTMXTile.getTileColumn();

                }
            }
        }); 
```

我如何处理与障碍物的碰撞，以防止玩家穿过障碍物（例如，墙壁）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:51:22.960

我相信您要问的是如何实现碰撞处理。需要明确的是：碰撞检测是您确定某物与其他物发生碰撞（重叠）的步骤。碰撞处理是你，比如说，移动其中一个东西，使其不再重叠。在这种情况下，我假设我们已经通过了碰撞检测并进入了碰撞处理，因为您使用了一个名为“onTMXTileWithPropertiesCreated”的方法，我猜这意味着玩家在这样的瓷砖上。所以这就是这个想法，简单地说：

![在此处输入图像描述](../Images/af9b0031941710f9df04749ff1d050e2.png)

当由于玩家（或其他一些精灵）的移动，您检测到精灵正在与您希望无法通过的精灵发生碰撞——用您的术语来说是“真实的”，您将想要移动sprite 返回防止它重叠的距离。

使用矩形执行此操作非常简单。用其他形状做这件事会有点复杂。因为您正在使用 TMX 平铺地图，所以矩形现在可能可以使用。这是一个带有矩形的基本示例。

```
public boolean adjustForObstacle(Rect obstacle) {
    if (!obstacle.intersect(this.getCollisionRect())) return false;

    // There's an intersection. We need to adjust now.
    // Due to the way intersect() works, obstacle now represents the
    // intersection rectangle.

    if (obstacle.width() < obstacle.height()) {
        // The intersection is smaller left/right so we'll push accordingly.
        if (this.getCollisionRect().left < obstacle.left) {
            // push left until clear.
            this.setX(this.getX() - obstacle.width());
        } else {
            // push right until clear.
            this.setX(this.getX() + obstacle.width());
        }
    } else {
        if (this.getCollisionRect().top < obstacle.top) {
            // push up until clear.
            this.setY(this.getY() - obstacle.height());
        } else {
            // push down until clear.
            this.setY(this.getY() + obstacle.height());
        }
    }
    return true;
} 
```

这样做是计算重叠矩形并沿重叠的最小维度移动精灵，移动量使其不再重叠。由于您使用的是 AndEngine，因此您可以使用 IShape 中的 collidesWith() 方法，该方法比上述方法更优雅地检测碰撞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T14:55:48.240

因为我用这个

```
if(pTMXTileProperties.containsTMXProperty("obstacle", "true")) {
                    //TMXTiledMapExample.this.mCactusCount++;
                    //coffins[coffinPtr++] = pTMXTile.getTileRow() * 15 + pTMXTile.getTileColumn();
                    //initRacetrackBorders2();
                     // This is our "wall" layer. Create the boxes from it
                        final Rectangle rect = new Rectangle(pTMXTile.getTileX()+10, pTMXTile.getTileY(),14, 14);
                        final FixtureDef boxFixtureDef = PhysicsFactory.createFixtureDef(0, 0, 1f);
                        PhysicsFactory.createBoxBody(mPhysicsWorld, rect, BodyType.StaticBody, boxFixtureDef);
                        rect.setVisible(false);
                        mScene.attachChild(rect);
                } 
```

玩得开心 ！

# expressionengine - 表达式引擎嵌入错误

> ID：14940362
> 
> 赞同：0
> 
> 时间：2013-02-18T16:03:10.717
> 
> 标签：expressionengine

我目前正在开发一个网站，其中有一个侧边栏显示 10 个最近的帖子（标题作为链接）。我用 Embed 函数调用它。

虽然当我查看单个帖子本身时，列表仅显示我所在的帖子标题。

我的嵌入式代码以 exp:channels 条目的正常方式调用所有 10 个最近的帖子。

是不是我做错了什么？以下是主博客页面的代码：

```
 {embed="embeds/html_header"}
       <!-- content -->
       {embed="embeds/html_blog_top"}

       <div class="container">
       <div class="row">
       {embed="embeds/html_blog_sidebar"}
       {exp:channel:entries channel="blog" limit="1"}
       <div class="span8">

    <article>

        <header class="postHeader">
            <div class="row-fluid">
                <div class="span3 postDate">{entry_date format="%d"}<span>{entry_date format="%F"}</span></div>
                <div class="span9 postPic">
                        <div class="imgWrapper">
                            {blog_image}
                        </div>
                     </div>
            </div>
        </header>
        <div class="row">
            <section class="span6 offset2">
                <h2>{title}</h2>
                <p>{full_entry}</p>
                <p><span class='st_sharethis' displayText='ShareThis'></span>
                            <span class='st_facebook' displayText='Facebook'></span>
                    <span class='st_twitter' displayText='Tweet'></span>
                </p>
                </section>

        </div>
    </article>

       </div>
       {/exp:channel:entries} 
       </div>
       </div>
       </section>

       <!-- footer -->
       {embed="embeds/html_footer"} 
```

这是侧边栏嵌入：

```
 <aside class="span4" style="float:right;">
    <section class="widget search clearfix">
    <h3>news</h3>
    <p>
    {exp:channel:entries channel="blog" limit="10" orderby="date"}
    <a href="{url_title_path='blog/post'}">{title}</a><br>
    {/exp:channel:entries}
    </p>
    </section>
    <section class="widget">
    <h3>Archives</h3>
    <ul>
    <li>
    {exp:channel:month_links channel="blog"}
    <a href="{path='blog'}">{month} {year}</a><br>
    {/exp:channel:month_links}
    </li>
    </ul>
    </section>
    </aside> 
```

它只是新闻部分的一部分，我似乎无法在单个页面上获得完整列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:49:19.217

将 dynamic="no" 添加到您的嵌入条目循环中，您应该会很好。

此外，如果您想更快地获得有关 ExpressionEngine 问题的答案，请尝试发布到[expressionengine.stackexchange.com](http://expressionengine.stackexchange.com)

# linux - 了解其输出中的 rsync 传输速率

> ID：14940369
> 
> 赞同：3
> 
> 时间：2013-02-18T16:03:27.670
> 
> 标签：linux, rsync

我使用 rsync 传输了一个大文件（>60GB），但在计算实际传输速率时我感到困惑。输出是

> ```
>  dbdump.sql
>     69840316437 100%    7.75MB/s    2:23:09 (xfer#1, to-check=0/1)
> 
>     sent 30 bytes  received 17317620159 bytes  2015199.88 bytes/sec
>     total size is 69840316437  speedup is 4.03 
> ```

从第二行直接显示的速率是 7.75MB/s。但是我从最后一行计算的速率却是大约 2MB/s。但是，如果将总大小除以总时间 69840316437/(2x3600+23x60+9)=8131367 byte/sec 大约 8MB/s。哪一个是实际的平均传输率？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T16:39:37.813

这`7.75MB/s`只是为最后一个传输块报告的传输速度 - 统计信息大约每秒报告一次。您似乎也启用了稀疏文件处理，因为虽然文件大小为 69GB，但它只传输了 17GB。要么是那个，要么你在过去已经部分传输了文件，而这次运行刚刚完成，或者它在过去已经完全传输，这次运行只发送了改变的块......报告的速度是`<full size> / <transferred size>`，`69 / 17 = 4.03`在这种情况下，这意味着它设法在实际传输 17GB 文件的时间内完全复制了 69GB 文件。

# java - 什么是我的方法的最具描述性的名称，它返回一个棋子攻击一个正方形的列表

> ID：14940379
> 
> 赞同：0
> 
> 时间：2013-02-18T16:03:49.620
> 
> 标签：java, oop, naming-conventions, chess

**编辑：** *再次感谢那些评论和回答的人。同意，这不是世界上最好的问题，但我需要一点点推动才能克服我心中的这个障碍。我特别想到的是返回类型是方法签名的重要组成部分。*

干净编码的重要方面之一是为您的类、变量和方法选择好的名称。

根据我在文学和网上阅读的内容，我会尝试选择首先尽可能具有描述性（因此明确）的名称，其次，尽可能简洁。

我是为了自己的娱乐和学习用java编写国际象棋游戏，我偶然发现了一种我根本无法弄清楚如何以令人满意的方式命名的方法。该方法存在于我的`ISquare`界面上，旨在让我返回当前正在攻击该方格的棋子列表。

为了完全描述，名称应该表明该方法返回一个片段的集合，甚至可以说是一个列表，并且这些片段正在攻击这个正方形实例。有人可能会争辩说，后者隐含在方法所在的位置，但我对此不太确定。

我能想到的最具描述性的名称可能违反了其他所有命名约定，并且显然不会这样做：

```
List<IPiece> giveMeTheListOfPiecesThatThisSquareIsUnderAttackBy(); 
```

这两个备选方案表明该方法与当前实例相关，但似乎暗示结果具有布尔性质：

```
List<IPiece> isUnderAttackByPieces();
List<IPiece> underAttackByPieces(); 
```

下一个描述了返回类型，但没有明确说明这些片段正在攻击什么：

```
List<IPiece> getAttackingPieces(); 
```

这个可能满足我的标准，但直觉上我会说使用“This”和“Square”这两个词看起来不太好：

```
List<IPiece> piecesAttackingThisSquare(); 
```

目前我已经解决了`underAttackByPieces()`，但如上所述，它并没有完全确定。

您可以提供的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:07:24.607

我愿意接受`getAttackingPieces`。既然它是一种方法`ISquare`，我认为受到攻击的东西已经很清楚了。您可以在方法的 Javadoc 注释中更加明确。

# php - 如何在 MacOS X 上安装 gettext

> ID：14940383
> 
> 赞同：32
> 
> 时间：2013-02-18T16:04:01.383
> 
> 标签：php, macos

如何在 mac 上安装 gettext？

我在我的一个 php 页面上收到此错误：

```
Fatal error: Call to undefined function bindtextdomain() 
```

这是因为我没有安装 gettext 。

我找不到有关如何安装它的良好说明。我试过使用：

```
brew install gettext 
```

并将一些文件放在这里：

/usr/local/Cellar/gettext/0.18.2

但我不知道该怎么办。

**更新：现在我没有尝试使用自制软件，而是使用 wget 尝试了这种方法，但未成功：**

使用 wget 下载

```
cd ~/Downloads
wget http://ftp.gnu.org/gnu/gettext/gettext-0.18.2.tar.gz
tar -zxvf gettext-0.18.2.tar.gz
cd gettext-0.18.2
./configure
make 
```

make check 对于运行自检是可选的

```
make check 
```

我得到的错误：

make[3]: *** [check-TESTS] 错误 1

make[2]: *** [check-am] 错误 2

make[1]: *** [检查递归] 错误 1

```
sudo make install 
```

将其安装在这里：/usr/local/share/gettext

以及这里的文档：/usr/local/share/doc/gettext

但是如何让我的 php 页面能够使用 gettext 和 bindtextdomain() 函数呢？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2015-11-24T14:33:11.863

您可以`brew`在安装后使用链接gettext

```
brew install gettext
brew link --force gettext 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-23T03:38:48.930

我终于明白了。你必须重新配置 php，所以我最终从 5.3.15 升级到 5.4.12。这些网站非常有帮助：

[http://mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/](http://mac.tutsplus.com/tutorials/server/upgrading-the-native-php-installation-on-os-x-mountain-lion/)

[http://mansion.im/2011/php-with-intl-and-gettext-on-osx-lion/](http://mansion.im/2011/php-with-intl-and-gettext-on-osx-lion/)

```
#Install dependencies
brew install libjpeg
brew install pcre
brew install libxml2
brew install mcrypt

#Get autoconf just because
brew install autoconf

#Install Intl extension
#Install ICU
#Download from http://site.icu-project.org/download/48#ICU4C-Download
cd ~/Downloads
tar xzvf icu4c-4_8_1-src.tgz
cd icu/source
./runConfigureICU MacOSX
make
sudo make install

cd ~/Downloads/php-5.4.12/ext/intl
phpize
./configure --enable-intl
make
sudo cp modules/intl.so /usr/lib/php/extensions/no-debug-non-zts-20090626/

#Install gettext
#Download from http://ftp.gnu.org/gnu/gettext/
cd ~/Downloads
tar xzvf gettext-0.18.1.1.tar.gz
cd gettext-0.18.1.1
./configure
make
sudo make install

cd ~/Downloads/php-5.4.12/ext/gettext
phpize
./configure 
make
sudo cp modules/gettext.so /usr/lib/php/extensions/no-debug-non-zts-20090626/

#Add intl and get text to php.ini
cd ~/Downloads/php-5.4.12
nano php.ini-development
#Add these lines
extension=intl.so
extension=gettext.so

#Download PHP source files from php.net
cd ~/Downloads
tar xzvf php-5.4.12.tar.bz2
cd php-5.4.12

./configure \
--prefix=/usr \
--with-gettext \
--mandir=/usr/share/man \
--infodir=/usr/share/info \
--sysconfdir=/private/etc \
--with-apxs2=/usr/sbin/apxs \
--enable-cli \
--with-config-file-path=/etc \
--with-libxml-dir=/usr \
--with-openssl=/usr \
--with-kerberos=/usr \
--with-zlib=/usr \
--enable-bcmath \
--with-bz2=/usr \
--enable-calendar \
--with-curl=/usr \
--enable-dba \
--enable-exif \
--enable-ftp \
--with-gd \
--enable-gd-native-ttf \
--with-icu-dir=/usr \
--with-iodbc=/usr \
--with-ldap=/usr \
--with-ldap-sasl=/usr \
--with-libedit=/usr \
--enable-mbstring \
--enable-mbregex \
--with-mysql=mysqlnd \
--with-mysqli=mysqlnd \
--without-pear \
--with-pdo-mysql=mysqlnd \
--with-mysql-sock=/var/mysql/mysql.sock \
--with-readline=/usr \
--enable-shmop \
--with-snmp=/usr \
--enable-soap \
--enable-sockets \
--enable-sysvmsg \
--enable-sysvsem \
--enable-sysvshm \
--with-tidy \
--enable-wddx \
--with-xmlrpc \
--with-iconv-dir=/usr \
--with-xsl=/usr \
--enable-zip \
--with-imap=/usr/local/imap-2007 \
--with-kerberos \
--with-imap-ssl \
--enable-intl \
--with-pcre-regex \
--with-pgsql=/usr \
--with-pdo-pgsql=/usr \
--with-freetype-dir=/usr/X11 \
--with-jpeg-dir=/usr \
--with-png-dir=/usr/X11

make test
sudo make install

#Restart Apache
sudo apachectl restart 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T13:54:19.530

我找到了一个最简单的工作解决方案，它仍然适用于小牛。这是：[https ://stackoverflow.com/a/11792640/512504](https://stackoverflow.com/a/11792640/512504)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-26T04:13:18.273

如果重新安装 php 是可以接受的，请尝试从[这里](https://php-osx.liip.ch/)下载并安装您想要的 php 版本。

就我而言，我使用的是 7.0 版本。重装步骤：

1.  打开终端并运行`curl -s https://php-osx.liip.ch/install.sh | bash -s 7.0`
2.  安装的php会驻留在`/usr/local/php5-7.0.31-20180903-120321/lib`（不知道为什么目录名是php5-7xxxx，但是安装的php版本是7.0）

3.  编辑 apache2 配置`/private/etc/apache2/httpd.conf`（如有必要，请备份）

4.  替换`LoadModule php7_module libexec/apache2/libphp7.so`为`LoadModule php7_module /usr/local/php5-7.0.31-20180903-120321/libphp7.so`（记得取消注释“#”符号），然后保存并退出。

5.  最后，运行`apachectl restart` 以重新启动您的 apache 服务器。

[![enabled_gettext](../Images/48246efd8aa243fcd636e818f89e7747.png)](https://i.stack.imgur.com/SXrnf.png)

# xml - 具有继承的元素的 XSD 限制不起作用

> ID：14940387
> 
> 赞同：5
> 
> 时间：2013-02-18T16:04:08.143
> 
> 标签：xml, xsd, restriction, complextype

我正在尝试继承和限制一个元素，但出现以下错误（在 Eclipse 验证中）：

> 类型的粒子不是基粒子的有效限制。

“Description”元素不应是“TypeDevice”元素的一部分。我就是不明白为什么。这应该是可能的（根据本[教程](http://www.ibm.com/developerworks/library/x-flexschema/)）：

谁能帮我？

问候，

账单

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.example.com" xmlns="http://www.example.com" elementFormDefault="qualified" attributeFormDefault="unqualified">
  <!--  Abstract Base Class  -->
  <xs:complexType name="AbstractDevice" abstract="true">
    <xs:sequence>
      <xs:element name="Name" type="xs:string" />
      <xs:element name="Description" type="xs:string" />
    </xs:sequence>
    <xs:attribute name="id" type="xs:string" />
  </xs:complexType>

  <!--  Inheritance with restriction  -->
  <xs:complexType name="TypeDevice">
    <xs:complexContent>
      <xs:restriction base="AbstractDevice">                                
        <xs:sequence>
          <xs:element name="Name" type="xs:string" />
        </xs:sequence>
        <xs:attribute name="id" type="xs:string" use="required" />
      </xs:restriction>                        
    </xs:complexContent>
  </xs:complexType>

  <xs:complexType name="TypeRoot">
    <xs:sequence>
      <xs:element name="Device" type="TypeDevice" />
    </xs:sequence>                
  </xs:complexType>
  <xs:element name="Configuration" type="TypeRoot" />
</xs:schema> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T17:34:28.153

类型`AbstractDevice`有两个必需元素，而类型`TypeDevice`只有一个。因此`TypeDevice`不是其基类型的有效实例`AbstractDevice`。为了使其有效，您应该添加`minOccurs="0"`到`Description`元素或翻转派生并使用扩展名。

# c - gdb 打印到文件

> ID：14940391
> 
> 赞同：4
> 
> 时间：2013-02-18T16:04:16.747
> 
> 标签：c, debugging, redirect, gdb, printf

我将我的临时字符串打印到标准输出：

```
printf "%s", nodeToString(myNode) 
```

但我想将此字符串打印到文件中。

我尝试[了此处](https://stackoverflow.com/a/5941271/1488917)所述的解决方案，但 printf 结果仍会输出到标准输出。

编辑：澄清 cIph3r 的答案。

这是我在命令行上尝试的：

```
$ gdb 

(gdb) attach 23053

(gdb) printf "%s", nodeToString(myNode)  // This works and outputs to screen

(gdb) run printf "%s", nodeToString(myNode) > outputfile  // I get this warning
The program being debugged has been started already.
Start it from the beginning? (y or n) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:09:14.100

gdb 可以像 bash 一样执行流水线操作，但我只知道如何从命令行使用 gdb。

首先，运行 gdb 并告诉它应该调试什么：

```
gdb ./prog 
```

然后在gdb中，你可以运行程序`run`

```
run 
```

在这里你也可以使用 argumetns 运行它：

```
run argv1 argv2 
```

但您也可以使用 bash-pipeline 命令运行它：

```
run > outputfile 
```

这和

```
./prog > outputfile 
```

但是，如果你想输出 gdb-output，比如

```
(gdb) print "test"
$s1 = "test" 
```

这不是正确的方法。你这样做：

```
(gdb) set logging on 
```

但请记住，当您要调试的程序正在运行时不要这样做

如果所有这些都不起作用，您可以使用 tee 从 gdb 捕获标准输出并将其重定向到文件：

```
gdb ./prog | tee output.log 
```

然后 gdb 输出也保存在 output.log 中（但所有标准输出）

退出 gdb 后，有一个名为的文件名，`output.log`其中包含您在 gdb 中看到的所有内容

# android - 在 Android 应用程序中选择“编译方式”API 选项的良好做法

> ID：14940395
> 
> 赞同：4
> 
> 时间：2013-02-18T16:04:21.417
> 
> 标签：android

创建 Android 应用程序时，我必须选择“编译方式”API 选项。该选项的帮助表明我通常使用最新版本，或者支持我想要使用的所有 API 的第一个版本。

我有以下问题：

*据我了解，最新的 API“包含或支持”（不确定是否因为使用了 Android 支持库）以前的 API。这使得不需要下载以前的 API 来编译具有一些以前的 API 要求的 android 项目？
例如，假设我要创建一个“目标 SDK”是 GingerBread 的应用程序，在这种情况下使用最新的 API（果冻豆）作为“编译 API”是一个好习惯吗？我想问题可能是使用仅适用于 JellyBeans 的 API，但 Lint 可以帮助解决这个问题。

*如果上面的问题是真的，我只需要下载以前的API来运行那些版本的模拟器吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:30:05.860

> 据我了解，最新的 API“包含或支持”（不确定是否因为使用了 Android 支持库）以前的 API。

一般来说，这是正确的。

> 这使得不需要下载以前的 API 来编译具有一些以前的 API 要求的 android 项目？

一般来说，这也是正确的。

> 例如，假设我要创建一个“目标 SDK”是 GingerBread 的应用程序，在这种情况下使用最新的 API（果冻豆）作为“编译 API”是一个好习惯吗？

这样做没有错，只要你有你`android:minSdkVersion`想要的东西。

> 我想问题可能是使用仅适用于 JellyBeans 的 API，但 Lint 可以帮助解决这个问题。

正确的。

> 如果上面的问题是真的，我只需要下载以前的 API 来运行那些版本的模拟器？

正确的。具体来说，您正在 SDK 管理器中寻找“...系统映像”条目，至少是 ARM 和 x86 条目。

# php - PHP行删除

> ID：14940397
> 
> 赞同：0
> 
> 时间：2013-02-18T16:04:24.093
> 
> 标签：php, html, mysql, sql

我正在为一个学校项目做一个留言簿。我能够做的是删除其中的帖子。不幸的是，当双击提交按钮进行删除时，它会删除所有帖子。

我需要它做的是在您按下 POST 的相应按钮时删除单个帖子（您要删除的帖子或整个帖子行）。我有点卡住了，所以任何帮助都会非常好！

这是我的留言簿页面代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0     
Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <h1>Välkommen till gästboken!</h1>
    <h2>Posta till Gästboken</h2>
    <form action="home.php" method="post">  
        <table>
            <tr>
              <td>Titel:</td>
              <td><input type="text" name="titel" style="width: 600px;" /></td>
            </tr>
            <tr>
              <td>Inlägg:</td>
              <td><textarea name="inlägg" style="width: 600px; height: 300px;"></textarea></td>
            </tr>
            <tr>
              <td></td>
              <td><input type="submit" name="postknapp" value="Posta" /></td>
            </tr>
        </table>
    </form>
<p>
    <a href="logga_ut.php">Logga ut</a>
<?php
session_start();
$username = $_SESSION['username'];

if($_SESSION['login'] == 1) {    //om sessionen är 1 så

    // Connect to the database
    mysql_connect("localhost", "root", "");
    mysql_select_db("guestbookdatabase");

//******************************************************************//
//Display stuff
echo "<h1>Nuvarande Poster</h1>";

if ($_POST['postknapp']) {
    $title = strip_tags($_POST['titel']);
    $message = strip_tags($_POST['inlägg']);
    $UserID = $_POST['UserID'];

    if ($title && $message) {
         //Lägg till i databasen
         mysql_query("INSERT INTO guestbook (Title,Post,Username,UserID) VALUES  ('$title','$message','$username', $UserID)");
         echo "Ditt inlägg har lagts till i gästboken!";
    } else
        echo "Du har inte fyllt i nödvändig information för att kunna göra ett inlägg.";
}

$query = mysql_query("SELECT * FROM guestbook ORDER BY PostID DESC");
$numrows = mysql_num_rows($query);
if ($numrows > 0){

    while ( $row = mysql_fetch_assoc($query) ) {
         $id = $row['PostID'];
         $name = $row['Username'];
         $title = $row['Title'];
         $message = $row['Post'];
         $date = $row['Timestamp'];

         $message = nl2br($message);

         echo "<div> 
         Av <b>$name</b> vid <b>$date</b><br /> 
         <h2>$title</h2> <p>
         $message  <p>
         <div align = 'right'>
         </div></div><hr />"; 
         ?>
         <form action="home.php" method="get">
         <input type='submit' name='Raderaknapp' value='Ta bort inlägget' />
         </form>
         <?php

        if ($_GET['Raderaknapp']) {
            mysql_query("DELETE FROM guestbook WHERE PostID ='".$id."' AND  Username='".$UserID."'");
            echo "Inlägget har tagits bort!";
        }
    }
} else
    echo "Inga inlägg hittades.";

//*****************************************************************//

mysql_close();
?>

<?php

} else { // om session inte är 1 så 
    echo "Du har INTE tillåtelse till gästboken! Klicka på länken för att logga in!";
?>
    <p>
    <br/><a href="index.html">Till login >></a>
<?php   
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:07:39.097

您的代码字面意思是“如果`$_GET['Raderknapp']`已设置且非零（换句话说，是真实的），则删除该行”。没有条件`$_GET['Raderaknapp']`，也没有任何方法可以识别您要删除的行。

# python - 访问 QtWebKit 应用程序的 DOM

> ID：14940401
> 
> 赞同：1
> 
> 时间：2013-02-18T16:04:32.760
> 
> 标签：python, qt, dom, functional-testing, qtwebkit

我有一个 Windows 应用程序，它的用户界面是在 QtWebKit 中完成的。

所以，我有一个带有 QtWebKit 容器的 .exe。由于我必须对其进行自动化 GUI 测试，因此我需要找到一种方法在 Python 中开发 API（或 WebDriver）以与之交互。

我已经找到了几种选择，例如 Froglogic Squish、Smartbear，但它们超出了我的预算。

到目前为止，我发现的一些选项是：

1.  我听说 Selenium 可以自动化 Web 浏览器。但我还没有找到让它与应用程序交互的方法。是否可以适应它？

2.  我认为可以运行我的应用程序（例如在 QProcess 中），然后将其“转换”为 QtWebKit 子类，然后与 Signals 和 Slots 进行交互（或者，将其作为 QtWebKit 类打开）。以下是有关信号和插槽的一些信息：http: [//doc.qt.digia.com/4.7-snapshot/signalsandslots.html](http://doc.qt.digia.com/4.7-snapshot/signalsandslots.html)

3.  有人知道 Squish 是如何工作的吗？我知道你给 Squish 应用程序，Squish 与之交互，但我不知道它是如何做到的。

我正在研究 Python 和 PyQt4。

# html - 我正在为我的 html5 游戏使用狡猾的样板，但是骨干网或 jquery 是冲突的？

> ID：14940403
> 
> 赞同：2
> 
> 时间：2013-02-18T16:04:41.977
> 
> 标签：html, backbone.js, craftyjs

我有一个正在开发的 html5 游戏。它使用 Crafty 游戏引擎，并为使用主干、jquery 和需要 js 的游戏引擎使用样板。我为游戏编写了一个新的主干接口，但它不响应任何事件处理程序。有什么我做错了吗。这是我的代码：

```
Info = BaseEntity.extend({
defaults: {
        'text_begin' : "<span id='info_begin' style='text-shadow:2px 2px #000;cursor:pointer; '>bEGIN gAME</span>",
    },
    initialize: function(){
     var model = this;

     var entity = Crafty.e("2D, HTML, DOM, Text, Mouse")

     entity
            .attr({x: 20, y: 50, z: 1, w: 200})
            .text(model.get('text_begin'))
            .textColor('#FF0000')
            .textFont({'size' : '30px', 'family': 'Arial', 'weight': 'bold'})
            .setName('Begin Info')
.bind("Click", function(){console.log('hi tere')})

     model.set({'entity' : entity });
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:12:18.870

是的，您误解了如何为该游戏引擎的样板设置主干。接口基本上是“只读的”。阅读工艺样板上的 wiki。如果你想创建新的交互式狡猾实体，你需要创建*新实体*，而不是接口。

因此，例如，您将转到场景文件并声明一个新实体：

```
sc['info'] = new Info(); 
```

您还需要确保 AMD 正在调用您的新实体文件。然后基本上你拥有的那个文件可以移动到实体文件夹，你应该得到你的交互性。

# c# - C# WPF 授权系统

> ID：14940404
> 
> 赞同：0
> 
> 时间：2013-02-18T16:04:59.257
> 
> 标签：c#, wpf, .net-4.0

我希望在我的新程序中添加一个授权类型系统，但不知道如何去做。基本上我想要做的是提示用户输入授权码或在 gui 上有一个文本框让他们输入授权码。

在用户能够运行功能并由管理员（我）生成之前，应该需要此授权代码。我对功能的限制没有问题，但如果系统已经存在我可以实现或者是否应该使用某种数学逻辑，我没有丝毫线索。例如：授权码减去某个值等于一个值然后批准密钥。

关于这个主题的任何建议或帮助都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:07:46.590

您对安全的关注程度如何？最简单的方法是...

1.  硬代码授权常量进入应用程序（或从数据库中获取......）。
2.  在应用程序加载时使用对话框提示用户。
3.  在用户输入匹配代码之前不要再进一步。

# php - simplexml-load-file：无法打开流：已达到重定向限制

> ID：14940406
> 
> 赞同：1
> 
> 时间：2013-02-18T16:05:04.560
> 
> 标签：php, curl, simplexml

我正在尝试打开 XML 文件，但出现以下错误：

```
Warning: simplexml_load_file(http://www.bva.fr/fr/rss/sondages.xml) [function.simplexml-load-file]: failed to open stream: Redirection limit reached, aborting in /xxx/import.php on line 93

Warning: simplexml_load_file() [function.simplexml-load-file]: I/O warning : failed to load external entity "http://www.bva.fr/fr/rss/sondages.xml" in /xxx/import.php on line 93

Notice: Trying to get property of non-object in /xxx/import.php on line 99

Warning: Invalid argument supplied for foreach() in /xxx/import.php on line 99 
```

第 99 行是：

```
foreach($xml->channel->item as $item) 
```

我试过 ：

```
$xml = simplexml_load_file($url); 
```

和 ：

```
$curl = curl_init();
curl_setopt($curl, CURLOPT_URL, $url);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, true);
$content = curl_exec($curl);
curl_close($curl);

$xml = simplexml_load_string($content); 
```

但它仍然不起作用......

这是 XML 文件：[http ://www.bva.fr/fr/rss/sondages.xml](http://www.bva.fr/fr/rss/sondages.xml)

请你帮助我好吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:10:46.137

您也许可以尝试添加互补的 curl 选项：这是完整的示例，谁可以使用这个 RSS 站点。

```
$options = array(
    CURLOPT_RETURNTRANSFER => true,     // return web page
    CURLOPT_HEADER         => false,    // don't return headers
    CURLOPT_FOLLOWLOCATION => true,     // follow redirects
    CURLOPT_ENCODING       => "",       // handle all encodings
    CURLOPT_USERAGENT      => "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0", // something like Firefox 
    CURLOPT_AUTOREFERER    => true,     // set referer on redirect
    CURLOPT_CONNECTTIMEOUT => 120,      // timeout on connect
    CURLOPT_TIMEOUT        => 120,      // timeout on response
    CURLOPT_MAXREDIRS      => 10,       // stop after 10 redirects
); 
```

在您的示例中替换`curl_setopt($curl, CURLOPT_URL, $url);`为这个。`curl_setopt_array( $curl, $options );`

# wcf - 如何将证书部署到 Azure 中的受信任人员存储？

> ID：14940407
> 
> 赞同：4
> 
> 时间：2013-02-18T16:05:07.093
> 
> 标签：wcf, azure, certificate, x509certificate, nettcpbinding

如何将公钥证书部署到我的 Worker Role 的`Trusted People`商店？

我正在使用`PeerTrust`WCF（Azure 中的自托管 TCP 服务）：

```
var creds = new ServiceCredentials();
creds.ClientCertificate.Authentication.CertificateValidationMode = X509CertificateValidationMode.PeerTrust; 
```

我知道如何在我的`.csdef`和代码中引用证书。但是，我不知道如何获取`.cer`文件（没有私钥）并将其实际导入 Azure，以便将其用于 PeerTrust。在线门户中的证书管理器只允许您上传`.pfx`文件（即带有私钥的证书）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:40:55.583

我只是在想，当你的角色开始时，你是否可以从你的代码中安装 CER，使用`System.Security.Cryptography.X509Certificates.X509Store`and `System.Security.Cryptography.X509Certificates.X509Certificates2`。您可以使用“复制到输出目录 = 始终复制”将 CER 包含到您的项目中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-13T21:26:30.193

也许情况并非总是如此，但目前完全可以在没有任何定制工作的情况下做到这一点。只需编辑您的服务`.csdef`（云服务定义）文件以包含以下内容 - 或者，如果使用 Visual Studio，请使用辅助角色的属性面板：

```
<?xml version="1.0" encoding="utf-8"?>
<ServiceDefinition name="MyService" xmlns="http://schemas.microsoft.com/ServiceHosting/2008/10/ServiceDefinition" schemaVersion="2013-10.2.2">
  <WorkerRole name="MyService.Backend" ... >
    <Certificates>
      <Certificate name="backend.example.com.selfsigned" storeLocation="LocalMachine" storeName="My" />
      <Certificate name="frontend.example.com.selfsigned" storeLocation="LocalMachine" storeName="TrustedPeople" />
    </Certificates>
    <Endpoints>
      <InternalEndpoint name="Internal" protocol="tcp" port="..." />
    </Endpoints>
    ...
  </WorkerRole>
  <WebRole name="MyService.Frontend" ... >
    <Sites>
      <Site name="Web">
        <Bindings>
          <Binding name="WebsitePublicEndpoint" endpointName="Insecure" />
          <Binding name="WebsitePublicEndpoint" endpointName="Secure" />
        </Bindings>
      </Site>
    </Sites>
    <Endpoints>
      <InputEndpoint name="Insecure" protocol="http" port="80" />
      <InputEndpoint name="Secure" protocol="https" port="443" certificate="example.com" />
    </Endpoints>
    <Certificates>
      <Certificate name="backend.example.com" storeLocation="LocalMachine" storeName="TrustedPeople" />
      <Certificate name="frontend.example.com" storeLocation="LocalMachine" storeName="My" />
      <Certificate name="example.com" storeLocation="LocalMachine" storeName="My" />
    </Certificates>
    ...
  </WebRole>
</ServiceDefinition> 
```

另请参阅[此论坛主题](http://social.msdn.microsoft.com/Forums/windowsazure/en-US/2e5695d4-8a2f-4dd9-a874-9ccdb6a503e7/ms-tech-talk-adding-a-x509-certificate-on-trusted-people-store-in-windows-azure?forum=windowsazuremanagement)和[工作人员角色服务定义文件架构文档](http://msdn.microsoft.com/en-us/library/gg557552.aspx)。

此外，Azure 门户现在支持上传`.cer`（仅限公钥）证书文件。您可能必须更改“打开文件”对话框的选择过滤器 - 默认情况下，它设置为`.pfx`仅查找文件。

# iphone - 如何同时触发多个通知？

> ID：14940409
> 
> 赞同：0
> 
> 时间：2013-02-18T16:05:17.173
> 
> 标签：iphone, ios, objective-c, xcode, uilocalnotification

我们可以同时为 3 个项目触发多个 uilocalnotification，例如：当应用程序处于后台/前台时，通知设置为下午 5:00 触发..我应该收到 3 个通知应该一个接一个触发。它只会触发最后设置的通知。我已经添加了代码。

```
 - (UILocalNotification *)scheduleNotification :(int)remedyID
    {

        [[UIApplication sharedApplication] cancelAllLocalNotifications];
        Class cls = NSClassFromString(@"UILocalNotification");
    if (cls != nil)
        {
            NSString *descriptionBody;
            NSInteger frequency;
            UILocalNotification *notif = [[cls alloc] init];

            notif.timeZone = [NSTimeZone defaultTimeZone];
             for (int i=0; i<remedyArray.count; i++)
            {
                int arrayid = [[[remedyArray objectAtIndex:i] objectForKey:@"RemedyID"] intValue];
                if (arrayid == remedyID)
                {
                    descriptionBody=[[remedyArray objectAtIndex:i] objectForKey:@"RemedyTxtDic"];
                    frequency=[[[remedyArray objectAtIndex:i] objectForKey:@"RemedyFrequency"] integerValue];
                   break;
                }
            }
            NSArray *notificationFireDates = [self fireDatesForFrequency:frequency];
            for (NSDate *fireDate in notificationFireDates)      
  {
                Class cls = NSClassFromString(@"UILocalNotification");
                if (cls != nil)
                {

                    UILocalNotification *notif = [[cls alloc] init];                
                    notif.timeZone = [NSTimeZone defaultTimeZone];                
                    notif.repeatInterval = NSDayCalendarUnit;
                    notif.alertBody = [NSString stringWithString:descriptionBody];

                    notif.alertAction = @"Show me";
                    notif.soundName = UILocalNotificationDefaultSoundName;
                    notif.applicationIconBadgeNumber = 1;
                    notif.fireDate = fireDate;                

                    NSDictionary *userDict = [NSDictionary dictionaryWithObject:notif.alertBody
    forKey:@"kRemindMeNotificationDataKey"];

                    notif.userInfo = userDict;                
                    [[UIApplication sharedApplication] scheduleLocalNotification:notif];

                }
            }     

            return notif;
        }
        else
        {
            return nil;
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:37:26.410

如果您要这样调用代码：

```
 [something scheduleNotification:remedyOne];
   [something scheduleNotification:remedyTwo];
   [something scheduleNotification:remedyThree]; 
```

然后，重写你的代码。因为你的代码有

```
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

在**scheduleNotification:**方法的第一行。

所以这就是问题所在。

# javascript - 开始使用 jquery 拖动时获取包含 div 的 id

> ID：14940412
> 
> 赞同：0
> 
> 时间：2013-02-18T16:05:25.390
> 
> 标签：javascript, jquery, draggable, droppable

我有一个可拖动的元素，然后有几个可放置在同一页面上的元素。

当拖动开始时，我想找出在其原始位置包含可拖动元素的 div 的 id。我找到了有关如何获取被拖动元素的 id 的信息，但没有找到它来自的父元素的 id。

这是一些代码：

```
<div id="row-2col0" class="droppable"><a href class="draggable"></a></div>
<div id="row-2col1" class="droppable"></div>
<div id="row-2col2" class="droppable"></div>

$('.draggable').draggable({start: function() {var initialposition = ???}});
$('.droppable').droppable({drop: handleDropEvent, accept:'.bookmark'});
function handleDropEvent( event, ui ) {

} 
```

我想获取父元素的 id，以便可以在 handleDropEvent 函数中使用它。我希望如果我可以在可拖动的启动函数中掌握它，那么我可以在 handleDropEvent 函数中使用它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:23:00.243

可拖动开始事件函数中的 $(this) 是被拖动的元素。如果您想要包含可拖动元素的 div，您可以使用：

```
$(this).closest("div") 
```

但是，对于您的要求，我建议使用：

```
ui.draggable.closest("div") 
```

在 droppable 的 drop 事件函数中。

# php - PHP sleep() 函数在一段时间后杀死脚本

> ID：14940414
> 
> 赞同：0
> 
> 时间：2013-02-18T16:05:32.293
> 
> 标签：php

我在 php 中长时间使用 sleep() 函数时遇到问题，如果我测试以下代码都运行良好：

```
<?php

set_time_limit(0);

$i = 0;

while($i < 10) {

    echo $i.'<br />';

    if($i == 5){        
        echo 'sleeping 5 secs<br />';
        sleep(5);   
        echo 'waking up<br />';
    }

    $i++;
}

?>

*****OUTPUT****

0
1
2
3
4
5
sleeping 5 secs
waking up
6
7
8
9

*****OUTPUT**** 
```

它休眠 5 秒，之后“唤醒”会毫无问题地回显，但是，如果我将脚本休眠的秒数提高到 15 分钟，则输出如下：

```
*****OUTPUT****

0
1
2
3
4
5
sleeping 900 secs //(15 mins)

*****OUTPUT**** 
```

该脚本似乎在睡眠 15 分钟后被杀死！！，可能是什么原因造成的？请注意，我使用 set_time_limit(0) 将 max_execution_time 标志设置为无限；在脚本的顶部。

我将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:11:15.227

甚至网络服务器（Apache，IIS，...）都有超时设置，请尝试检查您的许多默认设置为 300 秒）。

此外要小心 set_time_limit。来自手册：'当 PHP 在安全模式下运行时，此功能无效。除了关闭安全模式或更改 php.ini 中的时间限制之外，没有其他解决方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:12:13.977

来自 PHP 手册：

> 调用时， set_time_limit() 从零重新启动超时计数器。换句话说，如果超时是默认的 30 秒，并且在脚本执行 25 秒后调用了诸如 set_time_limit(20) 之类的调用，则脚本将在超时之前总共运行 45 秒。

尝试：

```
set_time_limit(900); 
```

不建议这样做`set_time_limit(0);`，因为您的 Web 服务器可能会施加 HTTP 超时，通常约为 5 分钟。

# javascript - 如何在不旋转的情况下以圆周运动移动图像？

> ID：14940415
> 
> 赞同：1
> 
> 时间：2013-02-18T16:05:33.300
> 
> 标签：javascript, html

我需要在我的网站上有一个太阳图像和月亮图像，这将在一天中的大部分时间被隐藏，但是当它们显示的时候，它们将从左侧开始以圆周运动并完成到正确的。

我有代码说明白天或晚上要实现多少百分比，我只需要知道如何在不旋转图像的情况下以圆周运动移动图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:22:35.143

CSS部分：

1.  将css位置设置为绝对
2.  根据三角法设置x和y坐标（css顶部和左侧）

三角函数：

基本上你想走半圈，0% 的 pi 度和 100% 的 0 度，所以它就像获取圆坐标（即 x=center+radius*cos(angle)），但唯一复杂的部分是你需要反转角度：PI*(1-percent)

```
var centerX = document.body.offsetWidth / 2;   // center of screen
var centerY = document.body.offsetHeight / 2;
var radiusX = document.body.offsetWidth / 3;   // radius 1/3 screen
var radiusY = document.body.offsetHeight / 3;
var angle = Math.PI * (1-percent);
var x = centerX + radiusX * Math.cos(angle);
var y = centerY + radiusY * Math.sin(angle); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-11T17:17:53.907

好的。

我只是为自己想出了圆周运动，这很简单。你用一个半径、一个角度和一些简单的数学运算来确定某物的位置。所以...

```
var body   = document.getElementsByTagName("body")[0],
    radius = 100, // Some radius here
    max    = 50;  // max number of generations we want (half a circle)
for (var i = 1; i <= max * 2; i++) {
    var div                   = document.createElement("div"),
        angle                 = Math.PI * (i / max);
    div.style.backgroundColor = "#000";
    div.style.borderRadius    = div.style.height = div.style.width = "8px";
    div.style.left            = ((Math.sin(angle) * radius) + radius) + "px";
    div.style.position        = "absolute";
    div.style.top             = ((Math.cos(angle) * radius) + radius) + "px";
    body.appendChild(div);
} 
```

你应该得到一个完整的圆圈。只需根据需要对数学进行解构和重构，就可以开始了。

# foursquare - 如何使用 Foursquare API 删除事件？

> ID：14940417
> 
> 赞同：0
> 
> 时间：2013-02-18T16:05:34.273
> 
> 标签：foursquare

我在场地上创建了 2 个相同的事件，我想删除其中一个。

但是没有显示事件，我无法删除它们。

是否可以使用 Foursquare API 来做到这一点？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T22:17:22.857

您目前无法通过 API 删除事件。您是场地经理还是认识经理？删除事件的最佳方式是直接通过 Foursquare 目前提供的事件管理工具。

# jquery - twitter引导模式中的自动对焦输入

> ID：14940423
> 
> 赞同：54
> 
> 时间：2013-02-18T16:05:46.657
> 
> 标签：jquery, twitter-bootstrap, modal-dialog

我有这样的问题 - 我需要在 twitter bootstrap modal 中自动聚焦一些元素（在它显示之后）。棘手的部分在这里 - 这个模式的内容是使用“数据远程”（jQuery.load 方法）从单独的 HTML 文件加载的，所以

```
$(document).on('shown', ".modal", function() {
    $('[autofocus]', this).focus();
}); 
```

仅在之前加载模态时才有效。
问题是 - 如何在第一次模态加载时使自动对焦工作？

* * *

## 回答 #1

> 赞同：113
> 
> 时间：2014-05-28T20:50:54.213

我正在使用 Bootstrap 3.0（希望这也适用于 3.1）。

我们不得不使用`tabindex="-1"`，因为它允许 ESC 键关闭模式。

因此，我能够使用以下方法解决此问题：

```
// Every time a modal is shown, if it has an autofocus element, focus on it.
$('.modal').on('shown.bs.modal', function() {
  $(this).find('[autofocus]').focus();
}); 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-09-05T01:58:50.610

尝试删除 tabindex="-1" ，它工作正常。

```
<div class="modal fade" id="modalID" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">

<div class="modal fade" id="modalID" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"> 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-10-24T22:02:18.420

我无法让@nc 的解决方案在我的应用程序上运行。它没有看到后来添加的模态。虽然这对我有用

```
$(document).on('shown.bs.modal', '.modal', function() {
  $(this).find('[autofocus]').focus();
}); 
```

正如 Frank Fang 指出的那样，如果您使用的是不依赖`autofocus`HTML 属性的较新版本的 Bootstrap，则应该使用它。

```
$('#myModal').on('shown.bs.modal', function () {
  // get the locator for an input in your modal. Here I'm focusing on
  // the element with the id of myInput
  $('#myInput').focus()
}) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-06T05:50:58.943

## 对于最新的 Bootstrap 版本，以上答案有些过时。

以下摘自： http: [//getbootstrap.com/javascript/#modals](http://getbootstrap.com/javascript/#modals)

> 由于 HTML5 定义其语义的方式，`autofocus`HTML 属性在 Bootstrap 模式中无效。要达到相同的效果，请使用一些自定义 JavaScript：
> 
> ```
> $('#myModal').on('shown.bs.modal', function () {
>   $('#myInput').focus()
> }) 
> ```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-07-10T18:21:52.223

接受的答案处理焦点在模态中的自动对焦按钮，但之后不要将焦点恢复到主页。如果您要从用户希望之后按 Enter 提交的表单中显示模式，这可能是不可取的。

所以这是处理显示和隐藏模式的完整代码：

```
// All modals will take enter to mean clicking the button with the autofocus property
$(document).ready(function () {
    $('.modal').on('shown.bs.modal', function() {
        $(this).find('[autofocus]').focus();
    });
    $('.modal').on('show.bs.modal', function(e) {
        var activeElement = document.activeElement;
        $(this).on('hidden.bs.modal', function () {
            activeElement.focus();
            $(this).off('hidden.bs.modal');    
        });
    });
}); 
```

> 注意：此代码清除模式`hidden.bs.modal`事件上的所有事件侦听器。如果您有该事件的其他侦听器，那么您需要将隐藏函数转换为命名函数，您可以通过引用从事件侦听器中引用和删除该函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-09-05T05:52:15.487

当显示引导模式时，您有一个带有`autofocus`您想要关注的属性的输入。

**加载 JavaScript 时，您的模态标记是否可用？**

*在事件的所有`.modal`元素上注册事件处理程序`shown.bs.modal`*

```
$('.modal').on('shown.bs.modal', function() {
  $(this).find('[autofocus]').focus();
}); 
```

**您的模态标记是动态生成的吗？**

*在整个文档上为`shown.bs.modal`事件注册一个事件处理程序。*

```
$(document).on('shown.bs.modal', '.modal', function () {
    $(this).find('[autofocus]').focus();
}); 
```

# git - 致命：fetch-pack：无法分叉边带解复用器

> ID：14940428
> 
> 赞同：4
> 
> 时间：2013-02-18T16:06:10.293
> 
> 标签：git, magento, github, ssh

我们目前正在开发一个客户 Magento 网站。我们一直在[http://dev.theirwebsite.com](http://dev.theirwebsite.com)上开发一些更新并使用 git 来跟踪提交等。今天我们很高兴将所有更改都放到他们的生产网站上。

我们通过 SSH 访问他们网站的根文件夹并运行“git pull”命令来拉入主文件（git pull 'origin' master），但返回以下错误：

错误：无法创建线程：资源暂时不可用
致命：fetch-pack：无法分叉边带解复用器

我整天都在寻找解决这个问题的方法。澄清一下，dev.theirdomain.com 与 git pull 一起使用，但生产站点（即使它在同一台服务器上）不...

有人对我们如何解决这个问题有任何解决方案吗？

任何帮助将非常感激！

亲切的问候，
刘易斯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-19T16:56:11.223

您的系统资源不足 - 这就是重新启动对您有用的原因。

只需注意您正在运行的进程并杀死占用所有内存的进程，下次发生这种情况时您无需重新启动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T16:01:07.773

尝试更新您的系统并重新启动。它对我有用。

# c# - Linq 的 SingleOrDefault 函数优化

> ID：14940434
> 
> 赞同：5
> 
> 时间：2013-02-18T16:06:20.513
> 
> 标签：c#, linq, optimization

下面是从 SingleOrDefault 函数中提取的代码：

```
public static TSource SingleOrDefault<TSource>(this IEnumerable<TSource> source, Func<TSource, bool> predicate) { 
    if (source == null) throw Error.ArgumentNull("source");
    if (predicate == null) throw Error.ArgumentNull("predicate");
    TSource result = default(TSource);
    long count = 0; 
    foreach (TSource element in source) {
        if (predicate(element)) { 
            result = element; 
            checked { count++; }
        } 
    }
    switch (count) {
        case 0: return default(TSource);
        case 1: return result; 
    }
    throw Error.MoreThanOneMatch(); 
} 
```

我想知道是否有任何理由在循环中找到多个元素后，没有 break 语句来防止循环列表的其余部分。无论如何，都会发生错误。对于一开始就发现不止一个项目的大列表，我认为这会产生巨大的影响。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T16:12:50.563

Jon Skeet[在他的 EduLinq 博客系列中重新实现 LINQ to objects 时发现了这一点](http://msmvps.com/blogs/jon_skeet/archive/2010/12/29/reimplementing-linq-to-objects-part-11-first-single-last-and-the-ordefault-versions.aspx)：

> 事实证明，在 LINQ to Objects 中，没有谓词的重载在看到第二个元素时会立即抛出 InvalidOperationException，但带有谓词的重载即使在看到与谓词匹配的第二个元素时也会继续迭代。这对我来说似乎是荒谬的不一致——我已经打开了一个关于它的 Connect 问题；我们会看看会发生什么。

在有问题的[Connect 问题中](https://connect.microsoft.com/VisualStudio/feedback/details/639955)，Microsft 说：

> 这将是很好的清理，因此在使用带有谓词的重载时不需要迭代整个序列`Single`- 我们可能会在找到第二个匹配时快速失败，类似于我们在没有指定谓词时所做的事情。
> 
> 但是，由于此处的性能优势将仅限于 `Single`' 错误情况，因此此问题目前刚好低于我们的错误分类切割线。我们将问题标记为“无法修复”以表明我们目前未跟踪在 Visual Studio 的下一版本中修复此问题。如果我们通过错误分类列表获得的结果超出预期，或者如果我们在下一个版本中重新访问该错误，我们将在明年重新激活此错误。

那是2011年4月...

# proxy - Eclipse：jdk 1.7升级后socks代理参数错误

> ID：14940436
> 
> 赞同：2
> 
> 时间：2013-02-18T16:06:27.400
> 
> 标签：proxy, java-7, jvm-arguments

我在 Eclipse 中配置了以下代理 VM 参数几个月：

```
-DsocksProxyHost=socks.OUR-HOST-SERVER-HERE.com -DsocksProxyPort=1080 
```

升级到 Java 1.7 后，出现以下错误消息：

```
Could not connect to:  : 65181            
java.net.SocketException: SOCKS: Connection not allowed by ruleset
   at java.net.SocksSocketImpl.connect(SocksSocketImpl.java:553)
   at java.net.Socket.connect(Socket.java:579)
   at java.net.Socket.connect(Socket.java:528)
   at java.net.Socket.<init>(Socket.java:425)
   at java.net.Socket.<init>(Socket.java:208)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.connect(RemoteTestRunner.java:570)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:381)
   at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

知道出了什么问题吗？Java 7 中代理的 VM 参数是否不同？

# javascript - 基于 JSON 对象在 Sinatra 中渲染表格？

> ID：14940441
> 
> 赞同：0
> 
> 时间：2013-02-18T16:06:48.803
> 
> 标签：javascript, ruby, ajax, sinatra

Sinatra 中的一个 Ajax 操作正在返回一个 JSON 对象。在一个视图中，我想基于这个 JSON 对象呈现一个表。事实上，它包含一些项目的列表。

当然，我可以使用 JavaScript 渲染表格。我会解析 JSON，并且对于其中的每个项目，我会呈现表格行等等。

有没有更简单的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:32:13.997

虽然可以直接将 JSON 解析为表格，但我真的建议利用许多基于 JavaScript 的表格渲染器之一。我特别喜欢[jqGrid](http://trirand.com/blog/jqgrid/jqgrid.html)，它适用于 jQuery。

查看“加载数据”部分下的 JSON 渲染器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T19:29:43.870

在 Sinatra 中，您没有像 Rails 中那样的助手。有一个名为 SinatraContrib 的项目，它为您提供了一些助手功能。在您的情况下，我认为使用 javascript 解析 JSON 是实现您想要的最佳方式。

# python - Aptana Studio 3 不断添加 .pydevproject 文件，如何禁用 Python？

> ID：14940443
> 
> 赞同：3
> 
> 时间：2013-02-18T16:06:57.243
> 
> 标签：python, aptana, aptana3

Aptana Studio 3 不断添加 .pydevproject 文件，我怎样才能禁用 Python 或它正在做的任何事情

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-07-02T15:24:35.360

我不小心将项目设置为 PyDev 项目。要禁用，请右键单击项目 > PyDev > 删除 PyDev 项目配置

# javascript - 强制 CKEDITOR 刷新配置

> ID：14940452
> 
> 赞同：34
> 
> 时间：2013-02-18T16:07:37.470
> 
> 标签：javascript, ckeditor, browser-cache

我创建了一个使用 CKEDITOR 的 cms 应用程序，当我向 CKEDITOR 添加一些功能时，我需要刷新一些 CKEDITOR .js /.css 文件。

但是 CKEDITOR 强制浏览器缓存它们。

我看到它对所有 .js/.css 文件使用查询字符串

这个查询字符串反映了我想的 CKEDITOR 版本：

```
/Js/ckeditor/config.js?t=CAPD
/Js/ckeditor/lang/it.js?t=CAPD
/Js/ckeditor/plugins/onchange/plugin.js?t=CAPD 
```

CKEDITOR 中是否有嵌入式方法可以做到这一点？

我在文档中找不到任何内容。我正在使用 CKEDITOR 4

主要问题是，当我上传一些更改时，客户端不会更新它们，并且新功能不可用，或者最坏的情况 CKEDITOR 不起作用。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-02-18T17:40:38.707

我找到了一种非常优雅的方式：

设置就足够了：

```
CKEDITOR.timestamp='ABCD'; 
```

**就在您链接 ckeditor.js 之后，**或者无论如何在 ckeditor 加载其所有文件之前

这是 CKEDITOR 用来为它动态加载的所有 .js .css 文件添加时间戳的变量。

因此，每次我更改这些文件时，我都会更新该变量，浏览器会重新加载它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-01T15:24:47.293

对我来说，设置`CKEDITOR.timestamp = +new Date`非常好。我在一个 JS 中编写了它，它将在加载任何其他 CKEditor JS 之前加载（[请参阅我的自定义 Drupal 模块](https://github.com/leymannx/drupal-ckeditor-timestamp)）。

现在，每次我重新加载浏览器时，附加到自定义插件或自定义配置 JS 的查询都会刷新。我想这也可能适用于自定义 CSS，但我没有对此进行测试。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-11-29T12:24:26.463

这是我为修复它所做的。在你的 /ckeditor/config.js 添加这一行：

```
CKEDITOR.timestamp = 'something_random'; 
```

每次有插件更新时更新“something_random”。

在使用它的页面中，确保并加载如下资源：

```
<script type="text/javascript" src="/ckeditor/ckeditor.js"></script>
<script src="/ckeditor/config.js?v=something_random"></script> 
```

通过这样做，config.js 将被加载两次，因为 CKEditor 会自己加载它，但它仍然可以正常工作，这应该为您提供在所有浏览器上自动刷新所需的控制。我是一名 .NET 开发人员，实际上将 /ckeditor/config.js 放在了我的捆绑器中，因此它会自动获取查询字符串上的版本，但如果您不使用花哨的捆绑器，只需手动执行我上面所说的操作?v=something_random。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-19T10:53:53.300

我找到了一个更简单的方法，以防有人仍然对此感到沮丧。

如果您在浏览器中打开带有时间戳的配置文件 URL（例如？t=XYZD），硬刷新它，然后返回您的应用程序页面并刷新它，您应该会获得新版本的配置文件。

您需要使用与 ckeditor 在页面源中设置的时间戳相同的时间戳。如果您使用开发人员工具或 Firebug，在控制台中输入 CKEDITOR.timestamp 将为您提供使用价值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T16:11:33.913

您始终可以在 url 中添加一个唯一的时间戳作为变量，或者只是进行硬刷新（CTRL + F5）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-16T01:33:37.653

时间戳解决方案对我不起作用，所以如果其他人有同样的问题，我将 ?v=date 附加到我包含 ckeditor.js 的位置，然后再次在 ckeditor.js 中引用 config.js。

似乎由于 config.js 被缓存，新的时间戳没有被使用。至少要等到几次刷新之后，但这不是我可以告诉我的用户做的事情。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-04-20T09:59:14.973

将以下代码添加到 ckeditor.js

```
/*Lets Create a random number*/

 function randomString(length, chars) {
    var result = '';
    for (var i = length; i > 0; --i) result += chars[Math.floor(Math.random() * chars.length)];
    return result;
}
var rString = randomString(4, '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'); 
```

之后替换`timestamp:rString` ckeditor.js 中的值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-12T21:54:40.220

最有效的方法是将具有改进的配置和 css 文件的 CKEDITOR 放入新的子目录：

src="/ckeditor_new_one/ckeditor.js"

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-04-20T14:44:56.023

由于这个帖子很受欢迎，让我分享一下我的经验-

我尝试了@giammin 的回答，但没有用。我最终将**config.js**的权限更改为 664，然后它就像一个魅力。

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-09-12T15:34:10.497

这个技巧在 Firefox 中不仅适用于 CKEditor，而且适用于您想要切换本地缓存的任何页面。

1.  打开 Firefox 调试控制台 (F12)。
2.  打开控制台设置 (F1)。
3.  启用“禁用 HTTP 缓存（工具箱打开时）”。
4.  保持控制台打开:)

经过非常简短的检查，我在 Chrome 和 IE 中都找不到类似的设置。

高温高压

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2016-05-10T09:48:21.487

在火狐上：

1.  去`about:config`
2.  设置`network.http.use-cache`为`false`

# ruby-on-rails-3 - Rails 3 ActiveRecord API - 更改查询以使用 Rails 3

> ID：14940458
> 
> 赞同：2
> 
> 时间：2013-02-18T16:07:45.747
> 
> 标签：ruby-on-rails-3, activerecord

我继承了一个 Rails 2.2.2 应用程序并被要求将其升级到 Rails 3.2，所以我出去并在旧 Rails 2.2.2 项目的复制版本中运行脚本 git://github.com/rails/rails_upgrade.git目录，以便我可以随时进行更改。

我正在处理 ActiveRecord 查询，使用新的 Rails 3 更改所有即将弃用的 ActiveRecord 调用，如 find(:all)、find(:first)、带条件的查找和 :joins 选项ActiveRecord API 语法。

我一直在看[这里](http://guides.rubyonrails.org/active_record_querying.html)，但是我需要转换为新语法的一些查询没有示例，所以我尽力弄清楚它们可能是什么。

有人可以告诉我我是否在正确的轨道上进行以下更改？

谢谢

**示例 1**

```
 #### Rails 2.x.x version
 @users = B2bUser.find(:all, :order => "name", :order => "#{params[:sort]} #{params[:direction]}")

 #### Rails 3.x.x version
 @users = B2bUser.order("name","#{params[:sort]} #{params[:direction]}") 
```

**示例 2**

```
 ### should work for both Rails 2.x and Rails 3.x
 @user = B2bUser.find(params[:id])

 #### Or is this better?
 @user = B2bUser.where("id = ?",params[:id])

 #### Rails 2.x.x version
 @privileges = B2bPrivilege.find(:all, :conditions => "b2b_user_id = #{@user.id}")

 ### Rails 3.x.x version
 @privileges = B2bPrivilege.where("b2b_user_id =  ?",@user.id) 
```

**示例 3**

```
 #### Rails 2.x.x version
@privileges = B2bPrivilege.find(:all, :conditions => "b2b_user_id = #{@user.id}", :joins => "LEFT JOIN vendors ON vendors.id = b2b_privileges.vendor_id", :select => "b2b_privileges.*, vendors.name AS vendor_name", :order => "vendors.name")

#### Rails 3.x.x version 
@privileges = B2bPrivilege.find_by_sql( "SELECT b2b_privileges.*, vendors.name AS vendor_name FROM b2b_privileges LEFT JOIN vendors ON vendors.id = b2b_privileges.vendor_id WHERE b2b_user_id = ?  ORDER BY vendors.name", @user.id) 
```

**示例 4**

```
 #### Rails 2.x.x version
    @vendor_list = Vendor.find(:all, :conditions => "is_active = 'YES'", :order => "name", :select => "id, name")

    #### Rails 3.x.x version
    @vendor_list = Vendor.find_by_sql("SELECT id, name FROM vendors WHERE is_active = 'YES' ORDER BY name") 
```

**示例 5**

```
 #### Rails 2.x.x version
 @existing = B2bPrivilege.find(:first, :conditions => "b2b_user_id = #{@user.id} AND vendor_id = #{params[:add_vendor][:id]}", :select => "id")

 #### Rails 3.x.x version   
 @existing = B2bPrivilege.find_by_sql("SELECT id FROM b2b_privileges WHERE b2b_user_id = ? AND vendor_id = ? LIMIT 1",@user.id,params[:add_vendor][:id]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:35:46.310

示例 3、4 和 5 应使用`where`、`limit`和`select`方法构建。

```
@vendor_list = Vendor.where(:is_active => 'YES')
                     .select(:id, :name)
                     .order(:name)
@existing = B2bPrivilege.where(b2b_user_id => params[:add_vendor], vendor_id => params[:id])
                        .select(:id)
                        .limit(1) 
```

除此之外，我认为你正在做一个漂亮而干净的实现。

# c++ - 如何检测给定名称的成员变量的存在和类型？

> ID：14940464
> 
> 赞同：3
> 
> 时间：2013-02-18T16:08:07.133
> 
> 标签：c++, c++11, template-meta-programming

我知道如何编写一个可以在编译时检测给定类 T 是否具有具有给定名称和给定类型类型的成员的类，例如

```
#include <type_traits>

template <typename T, typename Type, bool = std::is_class<T>::value>
struct has_member_foo
{
private:
  template <Type T::*> struct helper;

  template <typename U>
  static std::false_type test(...);

  template <typename U>
  static std::true_type test(helper<&U::foo> *);

  typedef decltype(test<T>(nullptr)) testresult;
public:
  static const bool value = testresult::value;
};

template <typename T, typename Type>
struct has_member_foo<T, Type, false> : std::false_type { };

struct Has_Foo
{
  int foo;
};

struct Has_No_Foo
{
  int bar;
};

void test()
{
  static_assert(has_member_foo<Has_Foo, int>::value == true, ":(");
  static_assert(has_member_foo<Has_No_Foo, int>::value == false, ":(");
  static_assert(has_member_foo<int, int>::value == false, ":(");
} 
```

我不喜欢你必须说明成员变量的确切类型，因为如果我想在大多数时候使用这些特征，我关心这个成员是否可转换为某种类型，是否是整数类型等，而不是关于确切的类型。我希望能够检测具有给定名称的成员变量的存在和类型。我希望能够写出这样的东西：

```
static_assert(has_member_foo<T>::value && std::is_integral<typename has_member_foo<T>::type>::value,
              "The type has to have an integral member with name foo"); 
```

如果我知道构造 &T::foo 是合法的，则可以通过类似的方式获取成员的类型

```
template <typename T, typename U>
T get_member_type(T U::*);

typedef decltype(get_member_type(&T::foo)) the_member_type; 
```

但我不能产生 SFINAE 的两种方法的组合以获得正确的结果，主要是因为 helper-struct 必须知道指向成员的指针的签名。最终代码将是一个以名称为参数的预处理器宏，因此任何解决方案也可以使用预处理器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:34:49.803

这是对名为 的变量执行此操作的简单方法`id`：

```
#include <type_traits>

using namespace std;

template<typename T, typename V = bool>
struct has_id : false_type { };

template<typename T>
struct has_id<T,
    typename enable_if<
        !is_same<decltype(declval<T>().id), void>::value,
        bool
        >::type
    > : true_type
{
    typedef decltype(declval<T>().id) type;
}; 
```

以下是您将如何使用它：

```
#include <iostream>

using namespace std;

struct X { int id; };

int main()
{
    static_assert(
        has_id<X>::value && is_integral<has_id<X>::type>::value,
        "Error!"
        );
} 
```

* * *

如果你能容忍宏，你可以让事情变得更简单：

```
#define DEFINE_MEMBER_CHECKER(member) \
    template<typename T, typename V = bool> \
    struct has_ ## member : false_type { }; \
    template<typename T> \
    struct has_ ## member<T, \
        typename enable_if< \
            !is_same<decltype(declval<T>().member), void>::value, \
            bool \
            >::type \
        > : true_type \
    {  \
        typedef decltype(declval<T>().member) type; \
    };

#define HAS_MEMBER(C, member) \
    has_ ## member<C>::value

#define MEMBER_TYPE(C, member) \
    has_ ## member<C>::type 
```

然后你可以这样使用它们：

```
DEFINE_MEMBER_CHECKER(id)

int main()
{
    static_assert(
        HAS_MEMBER(X, id) && is_integral<MEMBER_TYPE(X, id)>::value,
        "Error!"
        );
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:17:45.853

```
#include <type_traits>

template<typename T>
struct test_code { typedef void type; };

template<typename T>
using TestCode = typename test_code<T>::type;

template<typename T, typename=void>
struct has_member_foo:std::false_type {};
template<typename T>
struct has_member_foo<T,
  TestCode< decltype( std::declval<T>().foo ) >
>:std::true_type
{
  typedef decltype( std::declval<T>().foo ) type;
};
template<typename T>
using FooMemberType = typename has_member_foo<T>::type;

struct test_nofoo {};
struct test_foo { int foo; };

#include <iostream>
int main() {
   std::cout << has_member_foo<test_nofoo>::value << has_member_foo<test_foo>::value << std::is_same<int, FooMemberType<test_foo>>::value << "\n";
} 
```

应该管用。如果您的编译器还不支持模板别名，请替换`TestCode< decltype( std::declval<T>().foo ) >`为`typename test_code< decltype( std::declval<T>().foo ) >::type`.

# jsf - 如何持久化在 MB 中创建并在两个 jsf 视图（页面）之间共享的实例类？

> ID：14940467
> 
> 赞同：0
> 
> 时间：2013-02-18T16:08:17.610
> 
> 标签：jsf

我的应用程序是一个传统的 JSF 2.1，带有 facelets 和访问 mySql 5.5 SGBD。所以问题是：我有一个由两个 jsf 页面共享的“托管 bean”。一个用于查看的页面和另一个用于编辑人员的页面（JPA 人员类）。

因此，如果我在“MB”中使用“SessionScoped”注释，则愿景的人实例将与编辑共享。但是，如果我将注释更改为 MB 的“viewScopped”，则不再共享我的“Person”实例。

如何使用“viewScoped”注释解决这个问题？

我的代码如下所示：

```
/**
* Control layer should be session ou view scopped?????
*/
@ManagedBean
@SessionScoped
public class ControllerPessoa implements Serializable {
  private static final long serialVersionUID = 1L; 
  private Pessoa pessoa;
  private DataModel model;

  public ControllerPessoa() {
  // Necessary to view(non-edit)
  if (this.pessoa == null) {
    this.pessoa = new Pessoa();
  }
} 

@PostConstruct
public void init() {

}  

/** Used by the search routine */   
public List<Pessoa> getPessoaBy() {
  DaoPessoa dao = new DaoPessoa(Pessoa.class);
  List<Pessoa> listagem = null;
  try {
    listagem = new ArrayList<Pessoa>(); 

    switch (getCamposFiltro()) {
      // id
      case "1":
        if (dao.getPessoaById(pessoa.getIdPessoa()) != null) {
          listagem.add(this.pessoa);
        }
      break;
    model = new ListDataModel(listagem);
  } catch (Exception ex) {
    log.error("Erro na consulta às pessoas", ex);
  }
  return listagem;    
}

/**
* Here is the problem, in viewScopped mode the person instance isn't a safe state   instance
* @return "editCliente"
*/
public String alterar() {
  String retorno = null;
  try {
    this.pessoa = getPessoaFromEditOrDelete();
    setPessoa(this.pessoa);
    retorno = "editCliente";
  } catch (Exception ex) {
    log.error("Erro ao abrir a tela de edição de clientes", ex);
  }
  return retorno;
}

/**
* Retrieve the person instance from the dataTable
* @return the person instance
*/
private Pessoa getPessoaFromEditOrDelete() throws Exception {
  Pessoa p = (Pessoa)model.getRowData();
  return p;
}    

/**
* Make a new person instance to edit-view
* @return string to faces-config
*/
public String novo() {
  this.pessoa = new Pessoa();
  return "editCliente";
}
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:43:46.013

当您使用@ViewScoped 时，不可能在两个页面之间“共享” Person 实例。这是因为每次您访问一个使用带有 @ViewScoped 注释的 bean 的页面时，JSF 都会创建该 bean 的一个新实例。

所以，如果你想在两个页面之间使用相同的 Person 实例，我想你有两个选择：

1.  使用您已经在使用的 SessionScoped；

2.  使用参数在 MB 上检索此人。请参阅[JSF 传递参数并重定向到视图范围](https://stackoverflow.com/questions/14487924/jsf-passing-parameter-and-redirecting-to-view-scope/14488343#14488343)

# c# - 使用结构作为字典的键和奇怪的东西正在发生

> ID：14940471
> 
> 赞同：2
> 
> 时间：2013-02-18T16:08:26.383
> 
> 标签：c#, .net, dictionary, struct, iequatable

这是我的结构...

```
internal struct Coord : IEquatable<Coord>
{
    public int X { get; private set; }
    public int Y { get; private set; }

    public Coord(int x,int y) : this(){ X = x;
        Y = y;}

    //Overloaded operator functuions below
    //So I can easily multiply Coords by other Coords and ints and also add Coords together
    public static Coord operator *(Coord left, int right)
    {
        return new Coord(left.X * right, left.Y * right);
    }

    public static Coord operator *(Coord left, Coord right)
    {
        return new Coord(left.X * right.X, left.Y * right.Y);
    }

    public static Coord operator +(Coord left, Coord right)
    {
        return new Coord(left.X + right.X, left.Y + right.Y);
    }

    public static Coord operator -(Coord left, Coord right)
    {
        return new Coord(left.X - right.X, left.Y - right.Y);
    }

    public override int GetHashCode()
    {
        int hash = 17;
        hash = hash * 31 + X;
        hash = hash * 31 + Y;
        return hash;
    }

    public override bool Equals(object other)
    {
        return other is Coord ? Equals((Coord)other) : false;
    }

    public bool Equals(Coord other)
    {
        return X == other.X &&
               Y == other.Y;
    }
} 
```

我将这些用作字典的键，但我认为它们不能正确地相互等同。字典中的值是具有 bool 字段的对象。我有一个while循环对它们做一些事情并将bool更改为true，直到它们全部为true..它陷入无限循环，因为它们永远不会变为true..奇怪的是我没有超出范围错误或类似的东西，当我调试更改布尔值的位时，它似乎工作正常，但是当我在调试中查看字典时，所有布尔值仍然是错误的

（注意：我使用元组作为键，但我制作了这个结构，所以我可以轻松地相乘和相加）

我只是想和你确认一下...

```
 _myDictionary = new Dictionary<Coord, RogueRoom>();
  _myDictionary[new Coord(4,5)] = new RogueRoom();
  _myDictionary[new Coord(4,5)].Connected = true 
```

那两次我访问字典时我访问的是同一个值对象？

编辑：这是字典中的值结构（我替换了上面的“东西”）

```
internal struct RogueRoom
{
    public Room RoomField;
    public bool Connected;
    public Rectangle Realpos;
    public Color[] RogueRoomColors;
    public Coord Gridpos;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:38:54.343

这取决于是什么`Thing`。如果`Thing`是`struct`：否；该值在获取时被复制 - 尽管编译器通常会阻止您`struct`为即将被丢弃的 a 分配属性。如果是 a `class`，那么它*应该*是同一个对象实例；你的equals/hash-code看起来很合理。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T17:13:59.040

您的语句`_myDictionary[new Coord(4,5)].Connected = true;`不应该编译，因为返回类型为结构（例如`_myDictionary[new Coord(4,5)]`）的方法和属性返回这些结构类型的只读副本，而您正试图写入这样的只读结构。

为简洁起见，我将假装您的字典是`Dictionary<int, RogueRoom>`; 用户定义结构的事实`Coordinate`在这里并不重要。

如果您说`var temp = _myDictionary[5];`该语句将生成实例的可写*副本*`RogueRoom`。如果您说`temp.Connected=true;`这将修改*该副本，*但保留字典中的副本不变。如果您想更新存储在字典中的那个，您必须自己写回它：`_myDictionary[5] = temp;`.

如果您要更改`RogueRoom`为可变类，那么您可以说`_myDictionary[5].Connected = true;`修改`Connected`与 5 关联的对象的属性。然而，无论好坏，它也会修改`Connected`与存在于同一对象的任何其他引用关联的属性. 例如，如果要说`_MyDictionary[2] = _MyDictionary[5];`，则该语句`_myDictionary[5].Connected = true;`将设置与 2 关联的对象的 connected 属性（因为与 2 关联的对象与与 5 关联的对象是同一对象）。

有些人不喜欢可变结构，并建议您应该设计您的类型，以便代码必须这样说：

```
var temp = _myDictionary[5];
_myDictionary[5] = new RogueRoom(temp.RoomField, true, temp.RealPos,
   temp.RogueRoomColors, temp.GridPos); 
```

而不仅仅是更新的`Connected`属性`temp`并将其写回。我发现后一种风格不必要地丑陋和晦涩，但有些人更喜欢它。

As for the question of whether the thing should be a class, that depends upon whether you want each storage location of type `RogueRoom` to hold hold five independent pieces of information which are independent from those in any other storage location of that type, or whether you want to allow multiple storage locations of that type to refer to the same instance. There are definite usage cases for both scenarios; you need to determine which is right for you.

# c# - 控制台应用程序崩溃/无响应

> ID：14940473
> 
> 赞同：0
> 
> 时间：2013-02-18T16:08:28.703
> 
> 标签：c#

堆栈溢出社区。

我正在编写一个程序，将华氏温度转换为摄氏度，将摄氏度转换为华氏温度。该程序有一个简单的菜单，并让用户输入来选择一个选项。我实现了一个小的 do-while 循环，以防用户输入无效选项。如果用户选择 1、2 或 3（这是三个有效选项），程序将运行 if 语句，执行其中的块代码，并中断循环。但是，如果用户输入任何其他内容（无效选项），程序将执行 else 中的块代码，然后它会返回到循环的开头（选择一个选项）在进程中冻结或崩溃。

这是代码：

```
// James Archbold
// Convert.cs
// A program to convert fahrenheit to celsius or celsius to fahrenheit
//16 February 2013

using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Convert_Temperature
{
class Convert
{
    static void Main(string[] args)
    {
        float F, C;
        string option;

        do
        {
            Console.WriteLine("\nWelcome to 'Convert' program!");
            Console.WriteLine("***********************Menu**********************************");
            Console.WriteLine("1\. Fahrenheit to Celsius");
            Console.WriteLine("2\. Celsius to Fahrenheit");
            Console.WriteLine("3\. Goodbye");

            Console.Write("\nPlease enter an option: ");
            option = Console.ReadLine();

            switch (option)
            {
                case "1":
                    Console.Write("Please enter your Fahrenheit temperature: ");
                    F = int.Parse(Console.ReadLine());
                    C = (5f / 9f) * (F - 32);
                    Console.WriteLine("The temperature is {0} degrees Celsius.", C);
                    Console.ReadKey();
                    break;

                case "2":
                    Console.Write("Please enter your Celsius temperature: ");
                    C = int.Parse(Console.ReadLine());

                    F = 5f / 9f * C - 32;

                    Console.WriteLine("The temperature is {0} degrees Fahrenheit.", F);

                    Console.ReadKey();
                    break;

                case "3":
                    Console.WriteLine("Goodbye!");
                    Console.ReadKey();
                    break;

                default:
                    Console.WriteLine("That is not a valid option!");
                    break;
            }

            Console.WriteLine("Please press Enter to continue...");
            Console.ReadLine();
            Console.WriteLine();

        } while (option != "3");

    }

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:12:16.203

`option = int.Parse(Console.ReadLine());`如果无法解析输入的文本，您的行 ,将引发异常。考虑改用[TryParse](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)方法：

```
if (!int.TryParse(Console.ReadLine(), out option) {
    option = -1; // Set option to represent an invalid option.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:12:09.893

Jameslat - 正如 FlsZen 在上面的评论中所建议的那样

代替

```
option = int.Parse(Console.ReadLine()); // Original code 
```

和

```
if ( !int.TryParse(Console.ReadLine(), out option))
{
    option = -1;
} 
```

使用 TryParse 可以通过检查布尔类型的返回值来检查操作是否成功。错误的返回值表示解析不成功，在代码片段中将值 -1 分配给名为“option”的变量。

[http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx](http://msdn.microsoft.com/en-us/library/system.int32.tryparse.aspx)

# excel - 在excel中保存文件

> ID：14940487
> 
> 赞同：1
> 
> 时间：2013-02-18T16:09:13.243
> 
> 标签：excel, vba

有一个按钮下写的代码点击保存工作簿内容到txt文件

**代码**：

```
Private Sub CommandButton1_Click()
    Dim xlApp As Object
    Dim xlBook As Object
    Dim xlSheet As Object
    Dim strOutputFileName

    Set xlApp = CreateObject("Excel.Application")
    Set xlBook = xlApp.Workbooks.Open("C:\Documents and Settings\bera02a\Desktop\Arun_TAT_Testing_orig_14022013.xls")

    For Each xlSheet In xlBook.Worksheets
        strOutputFileName = "C:\Documents and Settings\bera02a\Desktop\" & xlSheet.Name & ".txt"
        xlSheet.SaveAs Filename:=strOutputFileName, FileFormat:=xlUnicodeText
    Next
    xlApp.Quit
End Sub 
```

**工作簿中的原始行**：

`create table abc as select rpt2_id, rpt2_usgcount, rpt2_usgdate, rpt2_usgmins from rpt2 where rpt2_id = 'xyz;`

**输出如下**：

`"create table abc as select rpt2_id, rpt2_usgcount, rpt2_usgdate, rpt2_usgmins from rpt2 where rpt2_id = 'xyz;"`

您的输出在开始和结束时带有双引号，并且仅用于工作簿中存在的插入和创建语句。

谁能帮我不要在输出中得到那个引号。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:23:16.253

尽管您已经专门寻求彼得的帮助，但看看这是否是您想要的？

```
xlSheet.SaveAs Filename:=strOutputFileName, FileFormat:=xlTextPrinter 
```

**跟进（来自评论）**

试试这个

```
Private Sub CommandButton1_Click()
    Dim xlBook As Workbook, xlSheet As Worksheet
    Dim strOutputFileName As String
    Dim n As Long, i As Long, j As Long
    Dim MyData As String, strData() As String, MyArray() As String
    Dim strPath As String

    strPath = ActiveWorkbook.Path '<~~ \\plyalnppd3sm\d$\Temp\Arun\TAT\

    ThisWorkbook.SaveCopyAs strPath & "\Temp.xls"

    Set xlBook = Workbooks.Open(strPath & "\Temp.xls")

    For Each xlSheet In xlBook.Worksheets
        If xlSheet.Name <> "User_provided_data" Then
            strOutputFileName = strPath & "\" & xlSheet.Name & ".zup"
            xlSheet.SaveAs Filename:=strOutputFileName, FileFormat:=xlTextMSDOS

            n = n + 1

            ReDim Preserve MyArray(n)
            MyArray(n) = strOutputFileName
            Debug.Print strOutputFileName
        End If
    Next

    xlBook.Close SaveChanges:=False

    Kill strPath & "\Temp.xls"

    For i = 1 To UBound(MyArray)
        '~~> open the files in One go and store them in an array
        Open MyArray(i) For Binary As #1
        MyData = Space$(LOF(1))
        Get #1, , MyData
        Close #1
        strData() = Split(MyData, vbCrLf)

        '~~> Write to the text file
        Open MyArray(i) For Output As #1

        '~~> Loop through the array and check if the start and end has "
        '~~> And if it does then ignore those and write to the text file
        For j = LBound(strData) To UBound(strData)
            If Left(strData(j), 1) = """" And Right(strData(j), 1) = """" Then
                strData(j) = Mid(strData(j), 2, Len(strData(j)) - 2)
            End If
            Print #1, strData(j)
        Next j
        Close #1
    Next i
End Sub 
```

# sql - 在位置树中查找联系人

> ID：14940489
> 
> 赞同：-2
> 
> 时间：2013-02-18T16:09:16.677
> 
> 标签：sql, sql-server, sql-server-2008

我有下表：

地点：

```
ID Name        Depth ParentID    HierachyPath       ContactID
1  US            0     NULL           \                25
2  Florida       1     1             \001             NULL
3  Miami         2     2             \001\001         NULL
4  Dade County   3     3             \001\001\001     NULL
5  Orlando       2     2             \001\002         15
6  County1       3     3             \001\002\001     12 
```

我将收到一个位置 ID，例如 4。我将一次收到多个位置 ID，因此我可能需要一次查找 1 个或 1000 个位置的联系人。如果位置 4 没有联系人，我需要沿着 HierachyPath 向上移动，直到找到联系人。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:38:34.530

您可以使用递归公用表表达式向上走，直到找到有联系人的父级。例如：

```
; with  CTE as
        (
        select  ID
        ,       ContactID
        ,       ParentID
        ,       ID BaseID
        ,       1 as Level
        from    Location
        where   ID in (4,5)
        union all
        select  parent.ID
        ,       parent.ContactID
        ,       parent.ParentID
        ,       child.BaseID
        ,       child.Level + 1
        from    Location parent
        join    CTE child
        on      parent.ID = child.ParentID
        -- Stop when we have a contact          
        where   child.ContactID is null
        )
select  CTE.BaseID as ID
,       CTE.ContactID
from    CTE
where   ContactID is not null; 
```

[SQL Fiddle 的示例。](http://sqlfiddle.com/#!3/7fc2c/5/0)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:57:25.470

我不确定您的数据是否正确，因为佛罗里达州没有给定数据列表中存在的 ParentId。我认为以下查询将为您提供所需的结果。使用`CTE`

[SQL-FIDDLE-DEMO](http://sqlfiddle.com/#!3/d5bd2/3)

```
declare @myId int = 4

;with cte as (
  select id,pid, cid
  from L where  id = @myId
  union all
  select L.id,L.pid,L.cid
  from cte join L on cte.pid = L.id 
  where cte.cid is null
)
select top (1) cid from cte
order by pid 
```

这仅在您传递一个 Id 时才有效，不适用于您更新的问题。小小的改变也可以让它发挥作用。@Andomar 已经解决了上述问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:23:14.130

**我添加了第二个解决方案（多个 ID）**

*第一个解决方案*

```
CREATE TABLE CocoJamboTable (
    ID INT PRIMARY KEY,
    Name NVARCHAR(50) NOT NULL,
    HierachyPath HIERARCHYID NOT NULL,
    ContactID INT NULL -- REFERENCES .... (ContactID)
);
INSERT INTO dbo.CocoJamboTable (ID, Name, HierachyPath, ContactID)
VALUES 
 (1, 'US              ', '/',           25)
,(2, 'Florida         ', '/1/',         NULL)
,(3, 'Miami           ', '/1/1/',       NULL)
,(4, 'Dade County     ', '/1/1/1/',     NULL)
,(5, 'Orlando         ', '/1/2/',       15)
,(6, 'County1         ', '/1/2/1/',     12);

CREATE UNIQUE INDEX IUN_CocoJamboTable_HierachyPath_#_ContactID
ON dbo.CocoJamboTable(HierachyPath) 
INCLUDE (ContactID);
GO

DECLARE @ID INT=4;

DECLARE @ContactID INT = 
(
SELECT d.ContactID
FROM  (
    SELECT  c.ContactID,
            ROW_NUMBER() OVER(
                ORDER BY CASE WHEN c.ContactID IS NOT NULL THEN 1 ELSE 2 END, -- First: NOT NULL ContacIDs 
                b.Number ASC    
            ) AS RowNum
    FROM    dbo.CocoJamboTable a
    JOIN    (VALUES (0),(1),(2),(3),(5),(6),(7),(8),(9),(10)) b(Number) ON a.HierachyPath.GetLevel() >= b.Number
    JOIN    dbo.CocoJamboTable c WITH(FORCESEEK) ON c.HierachyPath=a.HierachyPath.GetAncestor(b.Number)
    -- FORCESEEK: For some reason, the index (IUN_CocoJamboTable_HierachyPath_#_ContactID) is not used by default
    WHERE   a.ID=@ID
) d
WHERE d.RowNum=1
);

SELECT  @ContactID AS [@ContactID];

SELECT  a.ID, 
        c.ContactID,
        a.HierachyPath.ToString() AS HierachyPathAsString, 
        a.HierachyPath.GetLevel() AS HierachyPathGetLevel,
        b.Number,
        a.HierachyPath.GetAncestor(b.Number).ToString() AS HierachyPathGetAncestor_n_Number
FROM    dbo.CocoJamboTable a
JOIN    (VALUES (0),(1),(2),(3),(5),(6),(7),(8),(9),(10)) b(Number) ON a.HierachyPath.GetLevel() >= b.Number
JOIN    dbo.CocoJamboTable c ON c.HierachyPath=a.HierachyPath.GetAncestor(b.Number)
WHERE   a.ID=@ID
ORDER BY b.Number DESC 
```

结果：

```
@ContactID
-----------
25

ID ContactID HierachyPathAsString HierachyPathGetLevel Number      HierachyPathGetAncestor_n_Number
-- --------- -------------------- -------------------- ----------- --------------------------------
4  25        /1/1/1/              3                    3           /
4  NULL      /1/1/1/              3                    2           /1/
4  NULL      /1/1/1/              3                    1           /1/1/ 
```

*第二种解决方案（多个 ID）*

```
DECLARE @IDs TABLE (ID INT PRIMARY KEY);
INSERT  @IDs 
VALUES (4), (5), (6);

SELECT  *
FROM    @IDs v
OUTER APPLY
(
    SELECT d.ContactID
    FROM  (
        SELECT  c.ContactID,
                ROW_NUMBER() OVER(
                    ORDER BY CASE WHEN c.ContactID IS NOT NULL THEN 1 ELSE 2 END, -- First: NOT NULL ContacIDs 
                    b.Number ASC    
                ) AS RowNum
        FROM    dbo.CocoJamboTable a
        JOIN    (VALUES (0),(1),(2),(3),(5),(6),(7),(8),(9),(10)) b(Number) ON a.HierachyPath.GetLevel() >= b.Number
        JOIN    dbo.CocoJamboTable c WITH(FORCESEEK) ON c.HierachyPath=a.HierachyPath.GetAncestor(b.Number)
        -- FORCESEEK: For some reason, the index (IUN_CocoJamboTable_HierachyPath_#_ContactID) is not used by default
        WHERE   a.ID=v.ID
    ) d
    WHERE d.RowNum=1
) oa; 
```

# java - Netbeans - 构建以 JDK 6 为目标，但使用 Java 7 JRE 运行

> ID：14940491
> 
> 赞同：3
> 
> 时间：2013-02-18T16:09:17.903
> 
> 标签：java, netbeans

我正在开发一个需要针对 JDK 1.6 构建的项目，但我想针对 Java 1.6 和 1.7 对其进行测试——我同时安装了 Java 1.6 和 1.7 JDK。

我知道我可以为每个平台创建一个新的 Java 平台，但这会导致该项目也是针对 JDK 1.6/1.7 构建的——我只希望它同时针对这两个平台运行。有没有一种简单的方法可以告诉 Netbeans 针对我的 JDK 1.6 平台进行构建，但使用我的 Java 1.7 JRE 运行。或者即使有使用外部 JRE 运行项目的选项，我也可以让它工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:26:38.960

通过右键单击左侧窗格转到项目属性

**构建->编译**

在下侧，您将看到**附加编译器选项**

给参数 as `-target 6`，这将编译你的代码`JDK 6`，当你运行程序时，它将使用`JRE 7`.

# jquery - jQuery 中的 Ajax Json 数据

> ID：14940494
> 
> 赞同：0
> 
> 时间：2013-02-18T16:09:21.653
> 
> 标签：jquery, ajax, json

我已经构建了一个 jQuery 函数来提取我制作的表单的 District_id 和权限名称。

用户点击通过邮政编码搜索，它用邮政编码填充框，但是当我去填充 District_id 字段时，它似乎没有加载它。我可以获取权限名称，没问题，但 District_id 什么都没有！

我的 jQuery 代码如下：

```
$('.search-district').click(function() {

    var postcode = $(".postcode").val();

    var post_url = "/core/get-district-data/" + postcode;

   $.ajax({
       type : "POST",
       url  : post_url,
       success: function(districts)
       {
           $.each(districts, function(district_id,la_name)
           {
               $('.postcode').val(la_name);
               $('#district_id').val(district_id);
           })
       }
   })
}); 
```

示例 JSON 数据如下：

```
{"district_id":2581,"la_name":"Hartlepool Borough Council"} 
```

如何使用正确的地区 ID 填充地区 ID 字段？目前它用“1”填充它？什么时候应该是2581？

**编辑：**如果需要，我还可以更改我的 PHP 中的 json 数据。如果需要，删除“district_id”和“la_name”。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:13:41.660

[带有回调函数的$.each](http://api.jquery.com/jQuery.each/)将索引作为第一个参数传递。

你应该做的是：

```
$.each(districts, function(district_id, district)
{
     $('.postcode').val(district.la_name);
     $('#district_id').val(district.district_id);
}) 
```

但是，如果它只返回一个对象，只需直接访问属性：

```
 $('.postcode').val(districts.la_name);
 $('#district_id').val(districts.district_id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:14:43.487

你为什么`each`？它是单个对象（不是数组）-</p>

```
$.ajax({
       type : "POST",
       url  : post_url,
       success: function(districts)
       {
            $('.postcode').val(districts.la_name);
            $('#district_id').val(districts.district_id);

       }
   }) 
```

注意 。

您也可以在示例中使用每个。

但这将是一次迭代`each`。（不过还是可以的）。

还，

请加 ：`datatype:"json"`

# objective-c - 在 UITableView 中调用 reloadData 似乎没有填充我的表格单元格

> ID：14940497
> 
> 赞同：0
> 
> 时间：2013-02-18T16:09:32.767
> 
> 标签：objective-c

我有一个实现 UITableView 的视图。我有一个名为 setData 的方法，它允许我传入 NSMutableArray。一旦我这样做了，我就会调用 [self reloadData]。我的理解是，一旦调用它，所有检查数组和设置表格单元格的函数都应该运行。

我已经放了一些日志语句，还尝试设置断点，但根本没有调用任何代码。想知道我做错了什么。

这是我的 .m 代码。

```
#import "JornadaKMLList.h"

@implementation JornadaKMLList

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

-(void)setData:(NSMutableArray*)value
{
    collection = value;

    [self reloadData];
}

//table view stuff

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    NSLog(@"this is line 33");
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"this is line 39");
    return [collection count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSLog(@"this is line 43");
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {

        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier] ;

    }

    // Configure the cell...
    KmlVO *vo = [collection objectAtIndex:indexPath.row];
    cell.textLabel.text = vo->title;

    return cell;

}

@end 
```

这是我的 .h 代码

```
#import <UIKit/UIKit.h>
#import "JornadaKMLList.h"
#import "KmlVO.h"
@interface JornadaKMLList : UITableView <UITableViewDelegate,UITableViewDataSource>
{
    NSMutableArray *collection;
}
-(void)setData:(NSMutableArray*)value;
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:41:00.187

您需要将`datasource`和`delegate`的属性设置为您正在使用`UITableView`的子类。`UITableView`

换句话说，在你`JornadaKMLList`班上的某个地方，设置`self.datasource = self`和`self.delegate = self`.

# python - 如何使用 SQLAlchemy ORM 构造查询

> ID：14940500
> 
> 赞同：0
> 
> 时间：2013-02-18T16:09:42.467
> 
> 标签：python, mysql, sqlalchemy

我有 3 个看起来像这样的模型（简化）：

用户：

```
id
username 
```

资源：

```
id
name
description 
```

评论：

```
id
user_id (relationship User)
resource_id (relationship Resource)
data
date_created 
```

我正在尝试查询用户的评论并按资源对其进行分组。我希望结果返回为：[(Resource A, [Comment, Comment, Comment, ...]), (Resource B, [Comment, Comment, ...]), (Resource X, [Comment ])]

我已经尝试了各种构建它的方法，但我似乎无法弄清楚。做这样的事情的正确方法是什么？

编辑

现在代码如下所示：

```
contrib = db_session.query(Resource).filter(Comment.user==user, Resource.uuid==Comment.resource_id).distinct(Comment.resource_id).order_by(desc(Comment.date_created))
comments = db_session.query(Comment, Resource).filter(Comment.user==user, Comment.resource_id.in_([r.uuid for r in contrib]), Resource.uuid==Comment.resource_id).order_by(desc(Comment.date_created)) 
```

然后我使用一些列表/字典理解将这些结果组合成看起来像的东西

```
[{resource: Resource, comments:[Comment, Comment, Comment]}, {resource: Resource, comments:[Comment, .....]}, .....] 
```

必须有更好的方法来做到这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:54:31.727

您可以使用自定义[`MappedCollection`](http://docs.sqlalchemy.org/ru/latest/orm/collections.html#sqlalchemy.orm.collections.MappedCollection)对评论进行分组：

```
from sqlalchemy.orm.collections import collection, MappedCollection

class GroupedCollection(MappedCollection):

  def __init__(self):
    super(GroupedCollection, self).__init__(
      self,
      lambda e: e.resource_id # the key we want to group by
    )

  @collection.internally_instrumented
  def __setitem__(self, key, value, _sa_initiator=None):
    if key in self:
      # there is already another comment for that resource
      # we simply append the comment (or you could do something
      # more fancy here if you would like to order the comments)
      self[key]['comments'].append(value)
    else:
      # we create a new entry with a dictionary containing the
      # resource and comment
      super(GroupedCollection, self).__setitem__(
        key,
        {'resource': value.resource, 'comments': [value]},
        _sa_initiator
      ) 
```

然后在你的`User`类上添加对应关系：

```
class User(Base):

  # ...

  grouped_comments = relationship(
    'Comment',
    collection_class=GroupedCollection
  ) 
```

访问它会给你按资源分组的评论：

```
>>> user.grouped_comments
{
  'resource_id_1': {'resource': <Resource 1>, 'comments': [<Comment ...>, <Comment ...>]},
  'resource_id_2': {'resource': <Resource 2>, 'comments': [<Comment ...>]}
}
>>> user.grouped_comments.values()
[
  {'resource': <Resource 1>, 'comments': [<Comment ...>, <Comment ...>]},
  {'resource': <Resource 2>, 'comments': [<Comment ...>]}
] 
```

请注意，这种关系只能用于查看相关模型，启用添加/删除模型需要额外的工作。

最后，如果这是您想要重现的模式，您可以轻松地创建一个`GroupedCollection`工厂函数，您可以在其中指定分组键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:36:11.353

请查看演示：[http ://sqlfiddle.com/#!2/9f2ea/2](http://sqlfiddle.com/#!2/9f2ea/2)

希望这可以帮助

# opencl - 设置（标量）内核参数 OpenCL 后的值错误

> ID：14940503
> 
> 赞同：3
> 
> 时间：2013-02-18T16:09:49.147
> 
> 标签：opencl, kernel, argument-passing

我正在开发一个 OpenCL 程序，但每次执行的输出都不同。我认为这与将参数传递给内核有关，因为当我对特定执行的值进行硬编码时，每次执行后的输出都是相似的。

我的内核看起来像这样：

```
__kernel void sample_kernel(__global double *BufferA, int scalar1, int scalar2, int scalar3, ...) {

    for(int i = -1*scalar1; i < scalar1; i++) {
        for(int j = -1*scalar1; j < scalar1, j++) {
            if(scalar2 > 0 && scalar3 > 0) // do something.
        }
    }
} 
```

这就是我设置内核参数的方式：

```
int scalar1 = 1;
int scalar2 = 2;
int scalar3 = 3;

Samplekernel.setArg(0, d_BufferA);
Samplekernel.setArg(1, sizeof(int), &scalar1);
Samplekernel.setArg(2, sizeof(int), &scalar2);
Samplekernel.setArg(3, sizeof(int), &scalar3); 
```

奇怪的是，当我添加...

```
if(scalar1 != 1) scalar1 = 1;
if(scalar2 != 2) scalar2 = 2;
if(scalar3 != 3) scalar3 = 3; 
```

...在双 for 循环之前的内核中，输出是正确的。

我在 Nvidia K20m GPU、OpenCL 1.1 版上运行我的程序。当我在 Nvidia C2075 上运行我的代码时，一切似乎都运行良好......

有人知道问题可能是什么吗？看起来该值未正确复制或被覆盖，但我没有在 for 循环之前访问该值...

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T10:42:23.063

我看起来你正在将一个指向 int 的指针传递给 setArg

```
Samplekernel.setArg(1, sizeof(int), &scalar1); 
```

然后，在你的内核参数列表中，你有整数值，而不是指针：

```
__kernel void sample_kernel(__global double *BufferA, int scalar1, ... 
```

您可以在内核参数列表中使用指针，如下所示：

```
__kernel void sample_kernel(__global double *BufferA, global int *scalar1, 
```

或者 - 这就是我的建议，因为我在 C++ 绑定规范中找不到您的 kernel.setArg (...) 版本，但由于某种原因仅在 khronos.org 上的实现中 - 像这样直接复制标量：

```
Samplekernel.setArg(1, scalar1); 
```

这还有一个优点，即该变量在内核的私有内存空间中可用，而不是在全局空间中，就像您将缓冲区指定为参数时一样。

您使用的 Kernel::setArg 版本可能不会复制该值，但可能仅用于主机绑定内核，但我对此并不满意。

此外，您可能需要检查 setArg 的返回值是否存在错误。

# php - scandir 无法正常工作 php

> ID：14940506
> 
> 赞同：0
> 
> 时间：2013-02-18T16:09:54.077
> 
> 标签：php

有谁知道如何在 php 中递归地扫描目录？

```
$fileslist = array();

function readRecursive($dirname) {
   global $fileslist;
   $dir = scandir($dirname);

    foreach ($dir as $f) {
      if($f != "." && $f != ".." && $f != ".DS_Store") {
         if(is_dir($dirname.DIRECTORY_SEPARATOR.$f)) {
            $dname = $dirname.DIRECTORY_SEPARATOR.$f;
            readRecursive($dname);
         } else {
            $fileslist[] = $dirname.DIRECTORY_SEPARATOR.$f;
         }
      }
   }
} 
```

以下代码不起作用提前谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:12:11.057

首先检查您的php版本。此功能仅在 php 5.0 以上可用

# c++ - 标准是否需要向量重新分配和向量::push_back 才能使用放置新和复制构造函数？

> ID：14940511
> 
> 赞同：1
> 
> 时间：2013-02-18T16:10:03.410
> 
> 标签：c++, stl

现在抛开移动语义，标准是否需要vector重新分配和vector::push_back才能使用placement new和copy构造函数？如果是这样，标准中的哪里是这样说的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:18:08.563

是和不是。与所有其他容器一样，Vector 需要使用`allocator_traits<allocator_type>::construct`和 `allocator_traits<allocator_type>::destroy`（第 23.2.1/3 节）并使用分配器（第 23.2.1/7 节）获取所有内存。如果您提供自定义分配器，您几乎可以做任何事情。`::operator new` 调用（§20.6.9.1/6）和使用placement new（§20.6.9.1/12）需要默认分配器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:44:02.127

> **C++11 §23.3.6.3**，关于`std::vector::reserve`：
> 
> “如果不是由非类型的移动构造函数引发异常`CopyInsertable`，则不会产生任何影响。”

这意味着对于非`CopyInsertable`项类型的缓冲区重新分配，如果可能，实现可以自由地*将*项从旧缓冲区移动到新缓冲区，然后不使用该类型的复制构造函数。

来自移动构造函数的异常的影响在上面引用的段落中未指定，这在第 23.3.6.5 节中明确说明`insert`and `push_back`：“如果非移动构造函数抛出异常`CopyInsertable` `T`，则未指定影响。”

隐含使用placement new，因为这是该语言在预先存在的存储中构造对象的唯一功能。正如 James Kanze 在他的回答中指出的那样，通过对分配器的要求以及 §23.2.1/2 要求使用分配器的`construct`方法也明确要求。

# jquery - 更改 1 列 + Knockout.js 后更新整行

> ID：14940513
> 
> 赞同：0
> 
> 时间：2013-02-18T16:10:09.130
> 
> 标签：jquery, knockout.js, knockout-2.0, knockout-mvc

我有一个可观察的数组，其中包含一个值列表，每个值都有一个由 : 计算的百分比
`100 * valueQuantity / valuetotal`。

`valueQuantity = input value`
`valueTotal = value0 + value1 + value2`

如果用户更改了值，则`valuetotal`需要更改并且必须对所选行中的值（value0、value1 和 value2）执行重新计算。

我正在使用扩展器来计算百分比。

示例：[JS小提琴示例](http://jsfiddle.net/8vms5/63/)

更改表中的值后，我需要更新这些值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:21:40.517

您在计算中需要的每个可以更改的值都需要是模型中的 ko.observable。例如：

```
{ name: "CEP 7", value0: ko.observable(50), percent0: 0, value1: ko.observable(50), percent1: 0, value2: ko.observable(20), percent2: 0 }, 
```

无论应该计算哪个值，都应该是 ko.computed 值，而不是 observable。例如：

```
percent0: ko.computed(function() {
    return this.value0() / (parseFloat(this.value0()) + parseFloat(this.value1()) + parseFloat(this.value2()));
}), 
```

那么你的活页夹应该“正常工作”。您在标记中使用声明 ko.observables 似乎不寻常。

# ios - 设计数据模型时如何使用 NSKeyValueCoding 协议？

> ID：14940514
> 
> 赞同：3
> 
> 时间：2013-02-18T16:10:10.177
> 
> 标签：ios, model, key-value-coding

我一直在尝试创建一个数据模型类，同时遵循 NSKeyValueCoding 协议。我不断收到以下错误：“找不到协议声明”当我尝试#import“NSKeyValueCoding.h”时，我收到文件未找到错误。

我在哪里可以找到这个协议，或者它还能如何实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T16:39:14.217

`NSKeyValueCoding`是基金会的一部分。因此，如果`#import <Foundation/Foundation.h>`您已经包含标题。

`NSKeyValueCoding`是一个*非正式*的协议。这意味着类没有明确地符合它。相反：协议声称它所声明的类，`NSObject`在这种情况下，确实理解它的所有方法。

所以：您不能`NSObject`在 Cocoa 中编写不符合 KVC 的（派生）类。

*但是：*您可以向此类添加不符合 KVC 的属性，例如通过为访问器使用有趣的名称。[实现遵循符合 KVC](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueCoding/Articles/Compliant.html#//apple_ref/doc/uid/20002172-BAJEAIEE)甚至[KVO](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/KeyValueObserving/Articles/KVOCompliance.html)的规则可能是有意义的。

# visual-studio-2008 - 从 Visual Studio 截屏 windows mobile

> ID：14940521
> 
> 赞同：4
> 
> 时间：2013-02-18T16:10:33.487
> 
> 标签：visual-studio-2008, windows-mobile

是否可以从 Visual Studio 2008 截取 wm 设备的屏幕截图？我在带有 android 的 eclipse 上使用此功能....但是对于 Visual Studio？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T17:05:19.783

是的，它在您的远程工具中，称为**远程放大**。它可以从你的开始菜单中找到，在下面`All Programs -> Microsoft Visual Studio 2008 -> Visual Studio Remote Tools`

# java - 无法通过管道输出 Hadoop 命令

> ID：14940522
> 
> 赞同：1
> 
> 时间：2013-02-18T16:10:40.187
> 
> 标签：java, hadoop, ssh, pipe, dd

我想运行以下命令：

```
 hadoop fs -copyToLocal FILE_IN_HDFS | ssh REMOTE_HOST "dd of=TARGET_FILE" 
```

但是，当我尝试时，它所做的只是在目标主机上创建一个空文件并将其复制到我的本地主驱动器，而不是将其复制到远程位置。

> $ hadoop fs -copyToLocal FILE_IN_HDFS | ssh REMOTE_HOST "dd of=test.jar"
> 
> 0+0 日期
> 
> 0+0 日期
> 
> 0 字节 (0 B) kopiert, 1,10011 s, 0,0 kB/s

我想不出任何理由，为什么这个命令会以这种方式运行。这是我在这里遗漏的一些 Java 主义，还是我实际上做错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T17:19:30.207

该`-copyToLocal`选项需要 2 个参数：HDFS 中的文件和本地路径。我什至没有看到它如何复制到您的本地驱动器，这个命令对我来说失败了。

但我认为实际问题有所不同：该`-copyToLocal`选项不会在标准输出上打印任何可以通过管道传输到`ssh`命令的内容。在这里，您实际上是在将一个空流通过管道传输到`dd`，因此无需创建任何内容。

我会执行以下似乎可行的命令：

```
hadoop fs -cat $FILE_IN_HDFS | ssh $REMOTE_HOST "dd of=$TARGET_FILE" 
```

像这样，您正在管道传输作为文件内容的流，并将其复制到`$TARGET_FILE`. 在我的盒子上测试过，效果很好。

这避免了在本地复制文件然后将文件 scp'ing 到远程框的需要，所有内容都是流式传输的，我相信这就是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T00:17:33.490

您可以分两步执行此操作：首先是 copyToLocal，然后是 scp。您还需要删除中间本地文件。

```
hadoop fs -copyToLocal $FILE_IN_HDFS $LOCAL_FILE
scp $LOCAL_FILE $REMOTE_HOST:$TARGET_FILE && rm $LOCAL_FILE 
```

# ruby-on-rails - 选择下拉列表时填写表单文本框

> ID：14940524
> 
> 赞同：0
> 
> 时间：2013-02-18T16:10:45.003
> 
> 标签：ruby-on-rails

我有一个表单，它从多个来源提取数据以智能地预填充表单中的一些默认值。I would like to also prefill a "visit_price" text box that will be editable when the "visit_type" drop down is selected. 此下拉列表是一个 grouped_collection_select，它通过名称搜索字段通过 jquery 进行调整（根据[此](http://railscasts.com/episodes/88-dynamic-select-menus-revised)和[此](http://railscasts.com/episodes/102-auto-complete-association-revised)railscast 视频）

下面是到目前为止的表单视图、模型关联和咖啡脚本。我还包括了相关的 html 输出。

**编辑：** 要清楚，我不确定如何获取与从下拉列表中选择的客户价格相关的价格。

访问块表单视图

```
<%= form_for(@visit_block) do |f| %>

  <div class="controls controls-row">
    <div class="form-inputs">
      <%= f.text_field :client_name, data: {autocomplete_source: current_user.clients.order(:last_name).map(&:last_name)} %>
    </div>
    <div class="form-inputs">
      <%= f.grouped_collection_select :visit_type, current_user.clients.order(:last_name), :client_prices, :last_name, :visit_type, :visit_type,  include_blank: true %>
      <%= f.text_field :visit_price %>
    </div>
    </div>
  <div class="form-actions">
    <%= f.button :submit %>
  </div>
<% end %> 
```

楷模

```
class VisitBlock < ActiveRecord::Base
  attr_accessible :visit_price, :visit_type, :client_id

  belongs_to :client

  def client_name
    client.try(:last_name)
  end

  def client_name=(last_name)
    self.client = Client.find_by_last_name(last_name) if last_name.present?
  end

end

class Client < ActiveRecord::Base
  attr_accessible :active, :address_1, :address_2, :city, :email, :first_name, :last_name, :state, :user_id, :zip, :client_prices_attributes
  has_many :client_prices, :dependent => :destroy

end

class ClientPrice < ActiveRecord::Base
  attr_accessible :client_id, :price, :visit_type, :id, :default_price_id, :custom, :_destroy

  belongs_to :client
  belongs_to :default_price

end 
```

Coffeescript（到目前为止）

```
jQuery ->
  $('#visit_block_client_name').autocomplete
    source: $('#visit_block_client_name').data('autocomplete-source')

  visit_types = $("#visit_block_visit_type").html()
  console.log visit_types
  $("#visit_block_client_name").keyup ->
    client_name = visit_block_client_name.value
    options = $(visit_types).filter("optgroup[label=" + client_name + "]").html()
    console.log options
    if options
      $("#visit_block_visit_type").html options
    else
      $("#visit_block_visit_type").empty()

  $("#ui-id-1").click ->
    client_name = visit_block_client_name.value
    options = $(visit_types).filter("optgroup[label=" + client_name + "]").html()
    console.log options
    if options
      $("#visit_block_visit_type").html options
    else
      $("#visit_block_visit_type").empty() 
```

HTML 输出（到目前为止）

```
 <h1>New visit_block</h1>

<form accept-charset="UTF-8" action="/visit_blocks" class="new_visit_block" id="new_visit_block" method="post"><div style="margin:0;padding:0;display:inline"><input name="utf8" type="hidden" value="&#x2713;" /><input name="authenticity_token" type="hidden" value="I4xbbvdswv18TtP4LWoZHo7udmABT0J/nvKEPLFfO5Q=" /></div>

  <div class="controls controls-row">
    <div class="form-inputs">
      <input data-autocomplete-source="[&quot;Client1&quot;,&quot;Client2&quot;,&quot;Client3&quot;]" id="visit_block_client_name" name="visit_block[client_name]" size="30" type="text" />
    </div>
    <div class="form-inputs">
      <select id="visit_block_visit_type" name="visit_block[visit_type]"><option value=""></option>
<optgroup label="Client1">
<option value="morning">morning</option>
<option value="Morning weekday visit">Morning weekday visit</option>
</optgroup>
<optgroup label="Client2">
<option value="evening">evening</option>
<option value="Morning weekday visit">Morning weekday visit</option>
</optgroup>
<optgroup label="Client3">
<option value="afternoon">afternoon</option>
<option value="Morning weekday visit">Morning weekday visit</option>
</optgroup>
</select>
      <input id="visit_block_visit_price" name="visit_block[visit_price]" size="30" type="text" />
    </div>
  </div>
  <div class="form-actions">
    <button name="button" type="submit">submit</button>
  </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:35:33.467

您在下拉列表中放置了一个钩子：

```
<select id="visit_block_visit_type" onchange="fill_in_price(this)"...> 
```

假设您有一个将访问类型映射到价格的价格函数，您需要填写：

```
fill_in_price = ->
  $("#visit_block_visit_price").val(price($(this).val())) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:40:54.120

除了 Viktor 的回答是正确的之外，我相信让 HTML 标记没有任何 javascript 代码会更干净。我会遵循这种方法：

```
$('#visit_block_visit_type').change(function() {
  $("#visit_block_visit_price").val(price($(this).val()));
}); 
```

这是完全一样的事情。

# android - 如何对齐表格行中的项目（左-中-右）

> ID：14940526
> 
> 赞同：10
> 
> 时间：2013-02-18T16:10:46.593
> 
> 标签：android, android-tablelayout

我正在尝试对齐表格行中的项目（左/中/右位置），但我可以让它工作有人可以帮我看看下面的片段，，，

表行

应该对齐到 textview1 = left textview2 = center imgview1 = right

表格行的xml

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/focast_day"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="left"
        android:ellipsize="end"
        android:maxLines="1"
        android:scrollHorizontally="false"
        android:singleLine="true"
        android:text="@string/na_msg"
        android:textColor="@color/black"
        android:textSize="18sp"
        android:textStyle="bold" />

     <TextView
        android:id="@+id/focast_day_temp"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:ellipsize="end"
        android:maxLines="1"
        android:scrollHorizontally="false"
        android:singleLine="true"
        android:text="@string/na_msg"
        android:textColor="@color/black"
        android:textSize="18sp"
        android:textStyle="bold" />

    <ImageView
        android:id="@+id/focast_day_skyIcon"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="right"
        android:scrollHorizontally="false" />

</TableRow> 
```

我的表格布局

```
 <TableLayout
            android:id="@+id/weatherforcastTable"
            android:layout_width="fill_parent"
            android:stretchColumns="2"
            android:layout_height="wrap_content"
            android:layout_below="@+id/today_temp"
            android:layout_centerHorizontal="true"
            android:layout_marginTop="34dp" >
        </TableLayout> 
```

将数据填充到表格行的代码

```
 for (Forecastday forecastday : forcastDayList) {

                        View view = inflater.inflate(R.layout.weather_forcast_day_view, null);
                        TextView focast_day = (TextView) view.findViewById(R.id.focast_day);
                        TextView focast_day_temp = (TextView) view.findViewById(R.id.focast_day_temp);
                        ImageView  focast_day_skyIcon = (ImageView) view.findViewById(R.id.focast_day_skyIcon);

                        TableRow row = new TableRow(_appContext);
                        focast_day.setText(fmtDate);

                        focast_day_temp.setText(forecastday.getHigh().getCelsius() +ApplicationConstants.STRING_SPACE +ApplicationConstants.CELSIUS_DEGREES);
                        focast_day_temp.setId(count);

                        focast_day_skyIcon.setImageBitmap(forecastday.getSkyiconBitMap());

                        row.addView(view);
                        weatherforcastTable.addView(row, new TableLayout.LayoutParams(LayoutParams.WRAP_CONTENT,
                                LayoutParams.WRAP_CONTENT));
                    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-18T17:08:31.357

你可以试试这个： TableLayout 上的stretchColumns="0,1,2"

```
<TableLayout
        android:id="@+id/weatherforcastTable"
        android:layout_width="fill_parent"
        android:stretchColumns="0,1,2"
        android:layout_height="wrap_content"
        android:layout_below="@+id/today_temp"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="34dp" >
</TableLayout> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-18T16:41:44.030

您是否尝试在行的 xml 布局中的第一列和最后一列上使用“layout_gravity”而不是“gravity”？这可能会通过将 forecast_day 对齐到父表的左侧并将 forecast_day_skyIcon 对齐到右侧来解决您的问题。

这是重力与 layout_gravity 的良好可视化

[http://sandipchitale.blogspot.com/2010/05/linearlayout-gravity-and-layoutgravity.html](http://sandipchitale.blogspot.com/2010/05/linearlayout-gravity-and-layoutgravity.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-14T11:29:39.310

这个对我有用。

```
<TableRow 
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"> 
```

希望能帮助到你。

# gtk - 当前处理一个按键信号时阻止按键信号

> ID：14940528
> 
> 赞同：0
> 
> 时间：2013-02-18T16:10:56.100
> 
> 标签：gtk

使用 gtk ..如何在处理一个按键信号时阻止另一个按键信号？处理程序需要 10 秒才能返回。在此之前，它不应该被中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T22:25:39.700

如果你的 keyhandler 需要 10 秒，你*不*应该完全在主上下文中运行它。如果可能（即与 UI 绘制或 UI 修改无关），则使用单独的 g_thread 并在那里处理它。

无论如何 - 你正在寻找`g_signal_handler_block`和`g_signal_handler_unblock` [http://developer.gnome.org/gobject/stable/gobject-Signals.html#g-signal-handler-block](http://developer.gnome.org/gobject/stable/gobject-Signals.html#g-signal-handler-block)

事件处理程序将阻止小部件的重绘，直到它完成！

# playframework - Play 2 独立模板引擎的文档

> ID：14940529
> 
> 赞同：1
> 
> 时间：2013-02-18T16:10:55.890
> 
> 标签：playframework, playframework-2.0

我听说过 play 2 有一个独立的模板引擎。尽管找到任何文档来解释如何使用它，但我遇到了麻烦。有人能指出我找到一些东西来向我展示如何将它作为独立而不是在框架中使用的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:32:12.457

[https://github.com/spray/twirl](https://github.com/spray/twirl)

就是这个，spray.io 的家伙从 Play 2 中复制/粘贴了它，用于在各种 spray.io 组件上构建的应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-11-07T11:45:11.340

Twirl 已移回 Play，因此您可能需要查看[https://github.com/playframework/twirl](https://github.com/playframework/twirl)

# bxslider - bxSlider 图像大小调整问题

> ID：14940536
> 
> 赞同：2
> 
> 时间：2013-02-18T16:11:17.387
> 
> 标签：bxslider

我正在将 bxslider 实现到我的页面中，并且效果很好。当我在 IE 中调整页面大小时，图片大小调整得很好，但是如果我从一个小窗口中点击最大化按钮，图像会一直很小，直到我刷新页面。知道如何在按下最大化按钮后扩展图像吗？？？这是我的代码：

```
var announcements = $('#announcements').bxSlider({
        mode: 'horizontal',
        auto: true,
        controls: false,
        pause: 7000,
        prevText: '<img 
    });
    $(window).resize(function() {
        announcements.reloadShow();
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-27T11:47:18.413

对于当前版本的 bxSlider，该函数不是 reloadShow()。但它使用**reloadSlider()**。[http://bxslider.com/examples/reload-slider](http://bxslider.com/examples/reload-slider)

# google-bigquery - 大查询：找不到项目

> ID：14940539
> 
> 赞同：0
> 
> 时间：2013-02-18T16:11:22.207
> 
> 标签：google-bigquery

项目 xw-direct-analog-k 已创建。我可以在“管理项目”页面中看到它。我是团队的一员，我拥有“可以编辑”权限。我可以在团队页面中看到它。此项目也已启用计费。

但是，如果我在 BigQuery 网络界面中切换到这个项目，我会收到 Project not found 错误消息。

我错过了什么？

最好的，

弗朗索瓦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:09:47.217

这个项目是谷歌应用域的一部分吗？如果是这样，则存在影响项目查找的已知问题。当前唯一的解决方法是使用非域用户（例如@gmail 帐户）创建域。

# css - CSS如何将一个元素定位在另一个元素的中间（半高/垂直50％）

> ID：14940540
> 
> 赞同：13
> 
> 时间：2013-02-18T16:11:26.237
> 
> 标签：css, position, height, vertical-alignment

我期待构建一个位于元素旁边但位于元素中间的工具提示。很容易将它放在上面和下面并将其放置在元素的水平中心。但是有没有办法做到垂直（在元素的右侧或左侧，垂直定位在该元素高度的中间）？

出于我的目的，元素的高度是固定的（已知的）而工具提示的高度不是，因为它可以包含各种文本内容。工具提示可以是元素的子元素。

但是，我也很好奇，当两个高度都不是固定的（未知并且可能因内容而异）时如何做到这一点。通过高度，我了解元素和工具提示的高度。宽度可以是已知的并且是固定的。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2015-08-27T13:29:01.587

这已经很晚了，但我试图在 codepen 上做一个例子，如果我正确理解你的问题，它会显示一个工作示例。

[http://codepen.io/trgraglia/pen/RWbKyj](http://codepen.io/trgraglia/pen/RWbKyj)

使用 CSS 变换。

例如，`transform:translateX(-50%);`, 会将元素向左移动 50% 的 ITSELF。`position`现在，您可以使用and`bottom`或`top`or `left`or将其与父级对齐`right`，然后按其自身的尺寸移动它。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:42:38.863

使用 CSS 和 jQuery-

## CSS

```
.div{
    top:50%
} 
```

## jQuery

```
var divheight = $(.div).height() / 2;
$(.div).attr('style','margin-top:-'+divheight+'px;'); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-18T16:21:56.860

如果你不知道这两个高度，只有两种方法：

1.  设置父母`display: table`和孩子`display: table-cell`和`vertical-align: middle`。
2.  使用 CSS3 Flexbox：[http](http://www.w3.org/TR/css3-flexbox/) ://www.w3.org/TR/css3-flexbox/但浏览器支持有限：[http ://caniuse.com/#search=flexbox](http://caniuse.com/#search=flexbox)

如果你对这个话题感兴趣，这里有一篇很好的文章，里面有更多提示： [http ://www.vanseodesign.com/css/vertical-centering/](http://www.vanseodesign.com/css/vertical-centering/)

如您所见，在不知道元素高度和使用 CSS3 的情况下垂直对齐元素的唯一方法是使用`display: table-cell`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T16:59:18.217

如果您知道内容的高度，使工具提示居中的最简单方法是将工具提示设置为内容的高度。您可以在[jsFiddle](http://jsfiddle.net/zN2m3/)`line-height`看到我是如何做到的

# jquery - .click 函数不适用于使用 Ajax 加载的代码

> ID：14940541
> 
> 赞同：0
> 
> 时间：2013-02-18T16:11:34.173
> 
> 标签：jquery, ajax, live

以下 HTML 使用 Ajax 加载到 HTML 页面的 div 中，我想在用户单击该 HTML 中的 a.start-btn 时执行代码，由于某种原因它没有检测到那里的点击，我试过了。生活，它没有工作。有什么问题？谢谢

```
<div class="map">
    <div class="game-step1">
        <div class="note">
            <h5>Day 5</h5>
            <p>Today is the 5th day of our trip around the world... We have already visited Rome, Istambul, Kenya and Maldives.<br/><br/>
<strong>Ready to guess what will be our next destination?</strong></p>
         </div>
         <img src="img/route1.png"  class="route route1"/>
         <a href="#" class="game-button start-btn" >Start the Game &raquo;</a>   
     </div>
</div>

 function showReadyMsg() {
            $('.game-step1').animate({left:'-886px'}, 500);
            console.log('showReadyMsg called')
        }

        $(".start-btn").live("click", function(){
            console.log('button clicked')
            showReadyMsg();
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:13:55.257

Live 在早于 jQuery1.9 的版本中已被弃用，并在 jQuery 1.9 中被删除。使用 .start-button 对任何动态创建的元素在委托上使用文档

尝试这个

```
$(document).on('click','.start-btn',function(){
     //Code here
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:14:42.067

对通过 AJAX 加载的项目进行的任何 JavaScript / jQuery 操作都需要在回调函数中设置，否则将看不到。

```
$('#LoadingDiv').load('some.php #file',function(){
    // javascript to be done on the #file stuff you loaded
}); 
```

这是一个过于笼统的例子。如果您没有任何参数要传递给回调函数，您甚至可以只使用您已经创建的函数的名称而不是显式声明。

```
$('#LoadingDiv').load('some.php #file',jsFunctionToCall); 
```

要么应该工作。

# jquery - 如何使用动态 csv 数据显示 AmCharts 饼图？

> ID：14940546
> 
> 赞同：1
> 
> 时间：2013-02-18T16:11:40.867
> 
> 标签：jquery, mobile, charts, pie-chart

我正在使用 JS 库 AmCharts 在 jQuery 移动环境中显示图表。AmCharts 示例总是带有一些写在 JS 文档中的静态数据。我有一些我想显示的 csv 表。我已经设法用序列图和条形图做到了这一点，但不知何故，我无法用饼图做到这一点。

任何人都可以帮忙吗？

index.html（我想在 div“chartserialdiv4”中插入饼图的相关部分）

```
<div data-role="page" id="page4" data-theme="d">
<div data-role="header">
    <h1>Kostenverteilung</h1>
</div>
<div data-role="content"><div id="chartserialdiv4" style="height: 500px;"></div></div> <!-- ****** DIV CONTAINER "CHARTSERIALDIV" ************ -->
</div> 
```

javascript文件

```
window.onload = function() {
    $(document).delegate('#page4',  'pageshow', function () {
        createChartPie('chartserialdiv4');  
        loadCSVPie("daten/kostenverteilung.csv");  
        });
}

// method which loads external data
        function loadCSVPie(file) {
            if (window.XMLHttpRequest) {
                // IE7+, Firefox, Chrome, Opera, Safari
                var request = new XMLHttpRequest();
            }
            else {
                // code for IE6, IE5
                var request = new ActiveXObject('Microsoft.XMLHTTP');
            }
            // load
            request.open('GET', file, false);
            request.send();
            parseCSVPie(request.responseText);
        }

// method which parses csv data
        function parseCSVPie(data){ alert("parseCSV pie gestartet");
            //replace UNIX new lines
            //data = data.replace (/\n/g, "\n");
            //replace MAC new lines
            //data = data.replace (/\n/g, "\n");

            //split into rows
            data = data.replace (/,/g,"."); // SUCHE NACH KOMMA UND ERSETZE DURCH PUNKT

            var rows = data.split("\r");    // SUCHE NACH ZEILENUMBRUCH UND SPALTE DORT ZEILE AB
            // create array which will hold our data:
            dataProvider = [];

            // loop through all rows
            for (var i = 1; i < rows.length; i++){ // i=1 WEGEN DER ÜBERSCHRIFTEN
                // this line helps to skip empty rows

                if (rows[i]) {                    
                    // our columns are separated by semikolon
                 alert(i+". "+category+" "+value1);
                var column = rows[i].split(";");  

                    // column is array now 
                    // first item is date
                    var category = column[0];
                    // second item is value of the second column
                    var value1 = column[1];
                    // third item is value of the third column 
                    //var value2 = column[2];
                    //var value3 = column[3];

                    // create object which contains all these items:
                    var dataObject = {category:category, value1:value1};

                    // add object to dataProvider array
                    dataProvider.push(dataObject);
                }
            }
            // set data provider to the chart
            chart.dataProvider = dataProvider;
            // this will force chart to rebuild using new data
            chart.validateData();
        }

function createChartPie(container){

                // PIE CHART
chart = new AmCharts.AmPieChart();
                chart.titleField = "category";
                chart.valueField = "value1";
                chart.outlineColor = "#FFFFFF";
                chart.outlineAlpha = 0.8;
                chart.outlineThickness = 2;
        //chart.addTitle('Chart',12, '#000000', 1, true);

                // this makes the chart 3D
                chart.depth3D = 15;
                chart.angle = 30;
                //chart.labelsEnabled = false;
                chart.visibleInLegendField = true;
                chart.startEffect = ">";
                chart.labelRadius = -30;
                chart.labelText = "[[percents]]";

        legend = new AmCharts.AmLegend();
                                legend.borderAlpha = 0.3;
                                legend.horizontalGap = 10;
                                legend.switchType = "v";
                                legend.position = "bottom";
                                legend.align = "left";
                                legend.labelText = "[[title]]";
                                legend.valueText = "";
                                chart.addLegend(legend);

                // WRITE
                chart.write(container);

} 
```

由于只显示一个空白页面，我感觉来自 dataProvider 的内容没有传递到 div“chartserialdiv4”...

任何人都可以帮忙吗？

非常感谢您！丽莎

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T08:52:53.247

这是一个相当古老的问题，也许你现在已经解决了。几周前我开始使用 amcharts，每当我得到一个空白图表时，都是因为 dataProvider 生成图表的格式错误。需要的是准json格式。

# python - 将对象传递给它自己的初始化？

> ID：14940547
> 
> 赞同：0
> 
> 时间：2013-02-18T16:11:42.317
> 
> 标签：python, recursion, google-analytics

我目前正在尝试使用 GA 报告 API。我创建了一个 Query 对象，它基本上在实例化时获取查询的所有参数。

但是，我想在查询本身的初始化中得到查询的结果。我有一种将查询对象转换为一组结果的方法，称为 query_to_results(x)，其中参数 x 是查询对象。

现在我正在创建一个带有空结果参数的 Query 对象，然后使用 setter 方法将结果添加到查询中。但是，我想在对象创建的初始化过程中获得结果。有什么简单的方法可以做到这一点？

我会假设是这样的：

```
self.results = query_to_results(self) 
```

会起作用，除非这不起作用。

这是创建查询对象的代码L

```
class Query(object):
    def __init__(self,number_of_date_ranges):
        self.segments = gw.get_segments()
        self.sites = gw.get_sites_for_query()
        self.dates = []
        self.service = gw.service
        self.dim_met = gw.get_arguments()
        self.dimensions = self.dim_met[0]
        self.metrics = self.dim_met[1]
        self.results = []
        for x in range (number_of_date_ranges):
            self.dates.append(gw.get_dates())
    def __str__(self):
        output_string = 'segments:'
        for x in self.segments:
            output_string += str(x)
        output_string += '\n\nsites:\n'
        for y in self.sites:
            output_string += str(y)
        output_string += '\n\ndates:\n' 
        for z in self.dates:
            output_string+=str(z.items())
        output_string += ('\n\n'+'dimensions:'+self.dimensions+'\n\n'+'metrics:\n'+self.metrics)
        return output_string
    def get_segments(self):
        return self.segments
    def get_sites(self):
        return self.sites
    def get_dates(self):
        return self.dates
    def get_dimensions(self):
        return self.dimensions
    def get_metrics(self):
        return self.metrics
    def get_service(self):
        return self.service
    def get_results(self):
        return self.results
    def set_results(self,query_object):
        self.results = query_to_results(query_object) 
```

这是将对象转换为一组结果的代码：

```
def get_results(service,profile_id,segment_id,date1,date2,dimensionString,metricString):
    try:
        return service.data().ga().get(
            ids='ga:' + profile_id,
            start_date=date1,
            end_date=date2,
            segment=segment_id,
            dimensions=dimensionString,
            metrics=metricString).execute()

def query_to_results(query_object):
    service = hello_analytics_api_v3_auth.initialize_service()
    accounts = service.management().accounts().list().execute()
    results_list = []
    parameters = extract_arguments(query_object)
    for site in parameters['profiles']:
        for segment in parameters['segments']:
            for dates in range (len(parameters['dates'])):
                results_list.append(get_results(service,site,segment,parameters['dates'][dates]['start'],parameters['dates'][dates]['end'],parameters['dimensions'],parameters['metrics']))
                time.sleep(0.5)
            time.sleep(0.1)
        time.sleep(0.1)
    time.sleep(0.1)
    return results_list

def extract_arguments(query_object):
    """Gets Arguments From Query Object. If no Segments given, assumes all visits. If no metrics given, assumes visits"""
    metricString = ''
    dimensionString = ''
    dateList = []
    segmentList = []
    webPropertyIdList = []
    for x in query_object.get_sites():
        webPropertyIdList.append(gw.site_name_to_true_webPropertyId[x])
    for y in query_object.get_segments():
        segmentList.append('gaid::'+str(y))
    for z in query_object.get_dates():
        dateList.append(z)
    if len(segmentList)==0:
        segmentList.append('gaid::-1')
    dimensionString = query_object.get_dimensions()
    metricString = query_object.get_metrics()
    if len(metricString)==0:
        metricString = 'ga:visits'
    return {"metrics":metricString,
            "dimensions":dimensionString,
            "dates":dateList,
            "segments":segmentList,
            "profiles":webPropertyIdList} 
```

# c# - 不允许发送或接收数据的请求，因为套接字未连接 - 发送数据时

> ID：14940553
> 
> 赞同：4
> 
> 时间：2013-02-18T16:11:59.940
> 
> 标签：c#, sockets, udp

当服务器收到“调试”时，我正在尝试将数据发送回客户端。ATM 以下提供此错误：

不允许发送或接收数据的请求，因为未连接套接字并且（当使用 sendto 调用在数据报套接字上发送时）未提供地址。

添加了我的主要课程以帮助回答问题

```
 static Socket newSocket;
    static byte[] data;
    static EndPoint tmpRemote;
    static IPEndPoint sender, endpoint;
    static int recv;
    static void Main(string[] args)
    {
        data = new byte[1024];

        endpoint = new IPEndPoint(IPAddress.Any, 3000);

        newSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

        newSocket.Bind(endpoint);

        sender = new IPEndPoint(IPAddress.Any, 904);
        tmpRemote = (EndPoint)sender;

        newSocket.BeginReceiveFrom(data, 0, data.Length, SocketFlags.None, ref tmpRemote, new AsyncCallback(OperatorCallBack), data);

        Console.Read();
    }

    private static void OperatorCallBack(IAsyncResult ar)
    {
        log("[" + DateTime.Now + "][New Connection] " + tmpRemote.ToString() + "");
        try
        {
            int size = newSocket.EndReceiveFrom(ar, ref tmpRemote);
            if (size > 0)
            {
                data = (byte[])ar.AsyncState;
                string[] dataCommand = Encoding.ASCII.GetString(data, 0, size).Split(' ');
                if (dataCommand[0] == "debug")
                {
                    newSocket.Send(Encoding.ASCII.GetBytes("HA IT WORKED :)"));
                    log("Sent debug");
                }
                else
                {
                    log("Invalid Command");
                }
            }
            data = new byte[1024];
            newSocket.BeginReceiveFrom(data, 0, data.Length, SocketFlags.None, ref tmpRemote, new AsyncCallback(OperatorCallBack), data);
        }
        catch (Exception exp)
        {
            Console.WriteLine(exp.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-26T21:58:27.177

尝试通过慢速连接连接到套接字时，我遇到了类似的问题。我通过在任何发送/接收调用之前确保 newSocket.Connected 属性为真来解决它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T17:24:07.713

错误信息非常清楚。您在未连接的套接字上调用 send() 并且没有提供目标地址。你要寄到哪里？UDP不知道。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-05-18T14:17:46.960

当您通过 ProtocolType.Udp 发送数据时不需要连接（socket.connect（）），当您不建议 UDP 消息应该转发的地址时，可能会发生错误

**在您的情况** [下，这里没有为 udp Send() 提供地址](https://i.stack.imgur.com/uCqh1.png)

**解决方案**

尝试 SendTo() 代替

```
Socket soc = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
soc.EnableBroadcast = true;
IPEndPoint ipend = new IPEndPoint(IPAddress.Broadcast, 58717);
EndPoint endp = (EndPoint)ipend;
byte[] bytes = new byte[1024];

bytes = Encoding.ASCII.GetBytes(str);

soc.SendTo(bytes,ipend);

soc.Close(); 
```

# post - 如何使用泽西岛获得原始 POST？

> ID：14940554
> 
> 赞同：6
> 
> 时间：2013-02-18T16:12:08.037
> 
> 标签：post, jersey

如何获得 Jersey 的原始 POST？ `@FormParam`不起作用，因为我不在任何特定的 POST 字段中发布原始 JSON。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T16:14:53.463

Jersey 提供了一个用于将 JSON 映射到 Java 对象的提供程序。要将您的请求正文映射到一个对象，只需将该对象指定为您的资源方法的参数。如果您想要原始 JSON，请将对象指定为 type `java.lang.String`。

```
@Path("/mypath")
public class MyResource {

    /**
     * @param pojo Incoming request data will be deserialized into this object
     */
    @POST
    @Path("/aspojo")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response myResourceMethod(MyPojo pojo) {
        // ....
    }

    /**
     * @param json Incoming request data will be deserialized directly into
     *    this string
     */
    @POST
    @Path("/asjson")
    @Consumes(MediaType.APPLICATION_JSON)
    public Response myResourceMethod(String json) {
        // ....
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-12T21:33:06.080

```
@POST
public String handleRequest(String requestBody) {
    logger.info(requestBody);
    return "ok";
} 
```

# unity3d - 在一个 AudioClip 中写入重叠样本（音频文件）

> ID：14940555
> 
> 赞同：1
> 
> 时间：2013-02-18T16:12:09.953
> 
> 标签：unity3d, sample

是否可以在一个 AudioClip 中写入多个重叠样本？如果是，如何？（[http://docs.unity3d.com/Documentation/ScriptReference/AudioClip.SetData.html](http://docs.unity3d.com/Documentation/ScriptReference/AudioClip.SetData.html)）

我有一种情况，我同时播放了很多声音。最重要的是，我需要对其应用一些特定的效果（AudioListener 上的混响）。经过大量迭代后，我发现我需要在 AudioClip 中动态编写样本。

但是您应该如何编写重叠部分的脚本，使其不只是覆盖以前的剪辑？

非常感谢 ！

# ios6 - 2 个独立的 VC 中的 2 个独立 UIGestureRecognizer 委托

> ID：14940559
> 
> 赞同：0
> 
> 时间：2013-02-18T16:12:16.080
> 
> 标签：ios6, delegates, uigesturerecognizer

我已经在我的第一个 VC 中成功实现了手势控制，并在其 .h 文件中添加了 UIGestureRecognizerDelegate，以将特定的 VC 识别为手势的委托。

因此，当我在同一个应用程序中接近我的第二个 ViewController 时 - 它还需要支持自己的手势。

问：如何实施对第二个 VC 的支持？如果我将 UIGestureRecognizerDelegate 添加到 VC2 的 .h 文件中，应用程序是否会因为 2 个 VC 接受委托请求而感到困惑？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:02:35.307

弄清楚了。看来使用不同的@selector 方法名就足以区分了。

# email - 通过单击链接（来自电子邮件）运行本地 exe

> ID：14940560
> 
> 赞同：3
> 
> 时间：2013-02-18T16:12:17.007
> 
> 标签：email, hyperlink, localhost, exe

有没有办法通过单击电子邮件中的链接来运行本地 exe？在这种情况下，我还想发送一个参数，例如

```
'c:\foo.exe bar' 
```

也就是说，我收到电子邮件，单击链接，它应该开始`c:\foo.exe bar`，就好像我在 Windows 中通过 Start->Go 写了这一行（我认为它在过去被称为“go”？）

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:50:55.967

好的，我通过一个非常丑陋的解决方案解决了它。

我不是在电子邮件中发送链接，而是发送一个临时的书面 bat 文件，其中`C:\foo.exe bar`包含接收者必须执行的命令 ()，然后 bat 使用有效参数运行 exe。这仅供内部使用，但我想这可能是病毒警告和东西的一些麻烦。但是该怎么办。

如果有人有更好的解决方案，请提供。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:15:01.067

您需要一种服务器端语言来将参数传递给电子邮件。您可能会开发一个程序来接收电子邮件参数，并且必须具有运行所需 EXE 的权限。

# css - CSS One 边框在 Safari 中消失

> ID：14940566
> 
> 赞同：0
> 
> 时间：2013-02-18T16:12:40.073
> 
> 标签：css, border, rounded-corners

我在这里重新创建了我的案例[http://jsfiddle.net/eE9cs/](http://jsfiddle.net/eE9cs/)

html:

```
<form id="form_login" name="form_login" method="post">
   <div class="formcontent rounded_corners">
      Content...
   </div>
</form> 
```

和CSS：

```
.rounded_corners{
border: 1px solid #033C64;
-webkit-border-radius: 10px;
-moz-border-radius: 10px;
border-radius:10px;
}

#form_login .formcontent{padding: 20px; width: 30%; margin-left:30%;}
.formcontent {float:left; margin-bottom:50px;background-color: #F3F6FB;} 
```

我有带边框（四面八方）和圆角的容器。问题是在 Safari 中不显示右边框（在 FF 和 Chrome 中一切正常）。如果我删除圆角右边框会出现。此外，如果我从容器右边框中删除 margin-left css 属性，也会出现。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:27:04.457

在外部 div 上，试试这个：添加溢出：隐藏。此外，您可以尝试 box-sizing:border-box。

无论如何，你可以尝试很多东西，但如果没有完整的代码，我将无法再为你提供帮助。

# mysql - 如何导出/导入某些行？

> ID：14940567
> 
> 赞同：1
> 
> 时间：2013-02-18T16:12:42.150
> 
> 标签：mysql, import, export

我的数据库中有这样一个表（用于游戏）：

```
 id   name   playcount
---- ------ -----------
 1    game#1  17
 2    game#2  22 
```

等等，并且字段 playcount 具有属性`DEFAULT 0;` 所以，假设我想通过导出除 playcount 之外的所有字段来重新创建这个数据库。

我怎样才能做到这一点？一个 phpmyadmin 解决方案是可以的。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:24:04.367

您可以使用`INTO OUTFILE`它来生成`CSV`格式

```
SELECT  id, name, 0 AS playcount
        INTO OUTFILE 'backup.txt'                       -- this is the location
        FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
        LINES TERMINATED BY '\n'
FROM TableName; 
```

要重新加载文件，请使用[LOAD DATA INFILE 语法](http://dev.mysql.com/doc/refman/5.0/en/load-data.html)

```
LOAD DATA INFILE 'backup.txt'
INTO TABLE TableName
FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"'
LINES TERMINATED BY '\n'; 
```

# search - 将 TF-IDF（余弦相似度）与 pagerank 相结合？

> ID：14940569
> 
> 赞同：7
> 
> 时间：2013-02-18T16:12:53.380
> 
> 标签：search, search-engine, tf-idf, cosine-similarity

给定一个查询，我有一个文档的余弦分数。我也有文件pagerank。有没有将两者结合起来的标准好方法？

我正在考虑将它们相乘

```
 Total_Score = cosine-score * pagerank 
```

因为如果您的 pagerank 或 cosine-score 得分较低，则该文档并不有趣。

还是最好有一个加权和？

```
Total_Score = weight1 * cosine-score + weight2 * pagerank 
```

这是否更好？那么你的余弦分数可能为零，但页面排名很高，并且页面将显示在结果中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-07T20:42:27.207

加权和作为排名规则可能更好。

它有助于将问题分解为检索/过滤步骤和排名步骤。用加权和方法概述的问题不再成立。

[Sergey Brin 和 Lawrence Page 在这篇](http://infolab.stanford.edu/~backrub/google.html)论文中概述的过程使用向量/余弦模型的变体进行检索，它似乎是某种加权和，其中权重由用户活动确定（参见第 4.5.1 节）。使用这种方法，具有零余弦的文档将无法通过检索/过滤步骤，因此不会被考虑进行排名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T12:18:09.667

您可以考虑使用[调和平均值](http://en.wikipedia.org/wiki/Harmonic_mean#Harmonic_mean_of_two_numbers)。使用调和平均值，这 2 个分数基本上是平均的，但是，低分数会比常规平均值更拖累平均值。

你可以使用：

```
Total_Score = 2*(cosine-score * pagerank) / (cosine-score + pagerank) 
```

假设 pagerank 得分为 0.1，余弦为 0.9，这两个数字的正常平均值为：`(0.1 + 0.9)/2 = 0.5`，调和平均值为：`2*(0.9*0.1)/(0.9 + 0.1) = 0.18`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-19T07:48:13.990

我了解您正在相对性和重要性之间进行权衡。这是一个**[多目标优化](http://en.wikipedia.org/wiki/Multi-objective_optimization)**的问题。

我认为您的第二个解决方案会起作用。这就是所谓的**线性标量化**。您一定想知道如何优化权重。但是可以通过不同的哲学找到执行此操作的方法，并且可以根据每个变量的首要性逐案找到主观的种类。实际上，*如何在这样的问题中优化权重*是[数学的一个研究领域](http://en.wikipedia.org/wiki/Mathematical_optimization)。因此，很难指出哪种模型或方法最适合您的情况。您可能想继续使用上面的 wiki 链接，并尝试在此类问题上找到一些原则，然后按照它们来解决您自己的案例。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-06-10T20:36:22.423

我无法想象这会有用的单一案例。Pagrank 计算文档作为与其他重要文档的连接来衡量的“重要性”程度（我假设这就是您的意思。边缘是基于术语共现的文档到文档的链接。如果您的意思是别的，请指定）。

余弦分数是两个文档之间的相似性度量。所以你的想法是将成对度量与节点度量结合起来，只找到与另一个文档相似的重要文档？为什么不在另一个文档的自我网络上运行 pagerank？

# database - 在 Doctrine 2 中指定十进制字段类型时，比例和精度是什么意思？

> ID：14940574
> 
> 赞同：75
> 
> 时间：2013-02-18T16:13:06.300
> 
> 标签：database, symfony, orm, types, doctrine-orm

我正在为我的 Symfony2 应用程序创建一个十进制字段来保存 Doctrine2 中的财务数据。

目前，它看起来像这样：

```
/**
 * @ORM\Column(type="decimal")
 */
protected $rate; 
```

当我输入一个值并将该值保存到数据库时，它被四舍五入为整数。我猜我需要为该字段设置精度和比例类型，但我需要有人来解释他们到底做了什么？

[Doctrine2 文档](http://doctrine-orm.readthedocs.org/en/latest/reference/annotations-reference.html#column)说：

> 精度：小数（精确数字）列的精度（仅适用于小数列）
> 
> scale：小数（精确数字）列的比例（仅适用于小数列）

但这并不能告诉我很多。

我猜精度是要四舍五入的小数位数，所以我假设应该是 2，但什么是比例？比例是有效数字吗？

我的字段声明应该是这样吗？:-

```
/**
 * @ORM\Column(type="decimal", precision=2, scale=4)
 */
protected $rate; 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2013-02-18T16:17:09.987

Doctrine 使用类似于 SQL 类型的类型。小数恰好是固定精度类型（与浮点数不同）。

取自[MySQL 文档](http://dev.mysql.com/doc/refman/5.1/en/fixed-point-types.html)：

> 在 DECIMAL 列声明中，可以（并且通常是）指定精度和小数位数；例如：
> 
> 工资 DECIMAL(5,2)
> 
> 在此示例中，5 是精度，2 是比例。精度表示为值存储的有效位数，小数位数表示可以存储在小数点后的位数。
> 
> 标准 SQL 要求 DECIMAL(5,2) 能够存储具有五位和两位小数的任何值，因此可以存储在薪水列中的值范围为 -999.99 到 999.99。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-03-10T16:15:31.950

只是一个简短的说明：我必须从属性精度和比例中删除引号，如下所示：

```
@ORM\Column(type="decimal", precision=8, scale=2) 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2016-06-06T19:33:57.653

```
@Column(type="decimal", precision=5, scale=2) means 123.45 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-23T10:37:33.750

我知道这是旧的，但是为什么程序员仍然使用十进制......只需使用 64 位整数并将值定义为美分（或数千）而不是整数。一切都由此简化。

即，不是存储 123.45，而是存储 12345，对整数进行所有计算，并在需要时将值作为 123.45 呈现给用户

PS 至少目前没有人在他们的账户上拥有 2305843009213693952 美分或 23.058.430.092.136.939,52 个整数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-27T14:53:01.807

```
 * @ORM\Column(type="decimal", precision=10, scale=2) 
```

# yii - 不同型号的 Yii radioButton

> ID：14940575
> 
> 赞同：1
> 
> 时间：2013-02-18T16:13:14.537
> 
> 标签：yii, radio-button, radiobuttonlist

所以我有这段代码......这只是一个示例

```
<div class="row">
    <?php echo $form->labelEx($model,'First_Session'); ?>
    <?php echo $form>radioButton($model,'first_session',array('c'=>'')/**array('size'=>45,'maxlength'=>45)*/); ?>
    <?php echo $form->error($model,'first_session'); ?>
</div>

<div class="row">
    <?php echo $form->labelEx($model,'Second_Session'); ?>
    <?php echo $form->radioButton($model,'second_session',array('c'=>'Checked')/**array('size'=>45,'maxlength'=>45)*/); ?>
    <?php echo $form->error($model,'second_session'); ?>
</div> 
```

所以我的问题是如何在这里应用单选按钮....看，我有两个字段，第一个和第二个会话，但我需要做的是当第一个会话被标记时，第二个会话不能。我还是 yii 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:32:46.060

使用[`CHtml::radioButtonList()`](http://www.yiiframework.com/doc/api/1.1/CHtml#activeRadioButtonList-detail)而不是`radioButton()`. 您可以在模型中声明一个额外的变量`$session_val`，并在验证之前使用它来设置所选“会话”的值。

模型

```
class Model1{
   ....
   public $session_val;
   ....
   public function beforeValidate(){
       unset($this->first_session);
       unset($this->second_session); //unset first_session and second_session
       if(isset($this->session_val))
           $this->$session_val=true; //set first_session or second_session
       else
           $this->addError(...);
       return parent::beforeValidate();
   }

   public function rules(){
       return array(
           ...
           array('session_val','safe'),
           ...
       );
   } 
```

看法

```
<?php echo $form->labelEx($model,'session_val'); ?>

<?php echo $form->radioButtonList($model,'session_val',array('first_session'=>'First Session','second_session'=>'Second Session'));?> 
```

# maps - 使用 topoJSON 和 D3 显示整个世界地图

> ID：14940578
> 
> 赞同：0
> 
> 时间：2013-02-18T16:13:24.337
> 
> 标签：maps, d3.js

首先，我对这两个库完全陌生（我相信这很棒），如果这听起来像一个愚蠢的问题，我很抱歉。我想使用 d3 + topoJSON 显示整个世界。我正在按照[本](http://bost.ocks.org/mike/map/)教程这样做。我下载了这两个文件，但在使用时，`ogr2ogr`我避免过滤英格兰 + 爱尔兰以获得整个世界。然后我按照教程打印地图，但最后我得到了`Uncaught TypeError: Cannot read property 'type' of undefined`优化的 topoJSON 库的第 1 行:-)。

现在，我很确定在调用时我的转换有问题`ogr2ogr`，但我不知道哪个是正确的过滤器来获取整个地图。有经验的人愿意帮忙吗？

谢谢

PS如果我使用英国地图按照教程进行操作，它会正确显示，所以我真的认为这与`ogr2ogr`转换有关。

编辑：

这些是用于转换地图并合并它们的命令： `ogr2ogr -f GeoJSON subunits.json ne_10m_admin_0_map_subunits.shp`，然后我使用`ogr2ogr -f GeoJSON places.json ne_10m_populated_places.shp`并最终合并它们：`topojson --id-property su_a3 -p NAME=name -p name -o world.json subunits.json places.json`。

# c++ - 当 >= 用于元素比较时，插入排序比 > 慢，为什么？

> ID：14940579
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:13:33.807
> 
> 标签：c++, c, algorithm, sorting

我正在测试一些排序算法并测量它们的执行时间，发现一些很奇怪的东西并提出了问题， >= 比 > 快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:17:46.410

特定于 CPU 架构。无论如何，您如何在现代处理器上测量它？

但是，如果 key 不是真正的 int（即您将其匿名化为一个）并且 <= 没有特定的重载运算符，则 <= 的代码性能将比 < 差得多。

在您的特定算法中，在 <= 和 < 之间进行更改会破坏您的算法，所以这就是这里发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:17:34.540

不，在任何现代硬件上 > 和 >= 之间没有性能差异，任何时间增量都是人为的，纯属巧合。你确定代码片段实际上做同样的事情吗？您的编译器设置是否设置为最大化优化（在调试模式下对代码进行计时是无用的）？

顺便说一句，您可能不应该在 C++ 中以“T”开头您的类型名称。这不是帕斯卡^^

# sql - SQL 查询帮助需要在表中加入和计数

> ID：14940583
> 
> 赞同：1
> 
> 时间：2013-02-18T16:13:56.157
> 
> 标签：sql, select, sum

这是我的第二篇与我的加入有关的帖子。现在我想要一个表格，其中包含男性和女性的计数总和......

我有一个名为 babynames 的表，看起来像这样：

```
firstname |sex |year |count 
Bob |M| 2010| 150
Bob |M| 2009| 100
Bob |M| 2008| 122
Bob |F| 2007| 2
Bob |F| 2001| 1 
```

我已经能够用这个查询计算出所有男性和女性的婴儿名字

```
SELECT 
  firstname, sum(count), sex
FROM babynames
GROUP BY firstname
HAVING COUNT(DISTINCT sex) = 2 
```

结果表：

```
bob|375|M 
```

这接近我想要的......但是

```
SELECT 
  firstname, sum(count), sex
FROM babynames GROUP BY firstname, sex 
```

给我结果：

```
bob|372|M
bob|3|F 
```

现在，我需要两全其美，以便我的表只有性别匹配的名称，理想情况下看起来像这样：

```
firstname|male count| female count
bob |372|3 
```

虽然我承认我需要一些 SQL 练习，但我会很感激一些帮助将这个查询放在一起。谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:16:57.353

```
SELECT  firstname,
        SUM(CASE WHEN sex = 'm' THEN count END) MaleCount,
        SUM(CASE WHEN sex = 'f' THEN count END) FemaleCount
FROM    babynames 
GROUP   BY firstname 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/e619f/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:21:29.493

尝试这样的事情：

```
select firstname, sum(malecount) males, sum(femalecount) females
from 
(select 'boys' gender
,firstname
, 0 femalecount
, count(*)  malecount
from babynames
where sex = 'male'
group by 'boys, firstname, 0
union
similar query for girls
) temp
group by firstname 
```

# sql - 翻转sql中的数据

> ID：14940588
> 
> 赞同：0
> 
> 时间：2013-02-18T16:14:25.537
> 
> 标签：sql, sql-server

我需要获取此视图以获取报告。

```
交易类型 金额 (£) 贷记产品 1 (£) 产品 2 (£) 产品 3 (£)
信用卡 2489.58 829.86 739.02 920.70
借记卡 2314.93 1157.47 987.34 170.13
支票/P 订单 11266.38 3755.46 4068.92 3442.00
信用卡 - 网站 1974.21 984.93 474.21 515.07
总计 18045.10 6727.72 6269.49 5047.90
```

目前我有这个，几乎在那里......

```
交易类型 AMOUNT (£) CREDIT 产品类型
银行转账 653.89 产品类型 1
卡 1323.24 产品类型 1
现金 4538.12 产品类型 1
直接借记 118.80 产品类型 1
银行转账 653.89 产品类型 2
卡 1323.24 产品类型 2
现金 4538.12 产品类型 2
直接借记 118.80 产品类型 2
```

我需要在查询中更改什么？

```
SELECT PT.description          AS [Transaction Type], 
       Sum (P.original_amount) AS [AMOUNT (£) CREDIT], 
       PR.[description]        AS [Product Type] 
FROM   [X].[dbo].[payment] P 
       JOIN [X].[dbo].[table1] PT 
         ON P.payment_id = PT.payment_type_id 
       JOIN [X].[dbo].[table2] SO 
         ON SO.payment_type_id = P.payment_type_id 
       JOIN [X].[dbo].[table3] OI 
         ON OI.order_id = SO.site_order_id 
       JOIN [X].[dbo].[table4] PR 
         ON PR.product_id = OI.product_id 
GROUP  BY PT.description, 
          PR.description 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:25:46.487

这应该这样做：

```
SELECT PT.[DESCRIPTION] as [Transaction Type],
       SUM(P.ORIGINAL_AMOUNT) as [AMOUNT (£) CREDIT],
       SUM( CASE WHEN PR.[Description] = 'Product type 1' 
            THEN P.ORIGINAL_AMOUNT END) [Product 1 (£)],
       SUM( CASE WHEN PR.[Description] = 'Product type 2' 
            THEN P.ORIGINAL_AMOUNT END) [Product 2 (£)],
       SUM( CASE WHEN PR.[Description] = 'Product type 3' 
            THEN P.ORIGINAL_AMOUNT END) [Product 3 (£)]
FROM [X].[dbo].[PAYMENT] P
join [X].[dbo].[TABLE1] PT on P.PAYMENT_ID=PT.PAYMENT_TYPE_ID
join [X].[dbo].[TABLE2] SO on SO.PAYMENT_TYPE_ID=P.PAYMENT_TYPE_ID
join [X].[dbo].[TABLE3] OI on OI.ORDER_ID=SO.SITE_ORDER_ID
join [X].[dbo].[TABLE4] PR on PR.Product_id=OI.PRODUCT_ID
GROUP BY PT.[DESCRIPTION] 
```

**更新** 好吧，既然您需要动态数量的列，您将需要动态 SQL（如 njk 所说）。`PIVOT`尽管需要 SQL Server 2005+，但我将发布一种使用.

```
DECLARE @ProductTypes AS NVARCHAR(MAX), @Query  AS NVARCHAR(MAX);

SELECT @ProductTypes = STUFF((SELECT DISTINCT ',' + QUOTENAME([Description]) 
                              FROM [X].[dbo].[TABLE4] 
                              FOR XML PATH(''), 
                              TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

SET @Query = '
;WITH CTE AS(
    SELECT PT.[description]        AS [Transaction Type], 
           Sum (P.original_amount) AS [AMOUNT (£) CREDIT], 
           PR.[description]        AS [Product Type] 
    FROM   [X].[dbo].[payment] P 
           JOIN [X].[dbo].[table1] PT 
             ON P.payment_id = PT.payment_type_id 
           JOIN [X].[dbo].[table2] SO 
             ON SO.payment_type_id = P.payment_type_id 
           JOIN [X].[dbo].[table3] OI 
             ON OI.order_id = SO.site_order_id 
           JOIN [X].[dbo].[table4] PR 
             ON PR.product_id = OI.product_id 
    GROUP  BY PT.[description], 
              PR.[description] 
)
SELECT *
FROM CTE AS T
PIVOT(SUM([AMOUNT (£) CREDIT]) FOR [Product Type] IN ('+@ProductTypes+')) AS PT'

EXEC(@Query) 
```

# loadrunner - Loadrunner - 无法在 Performance Center 中运行测试

> ID：14940593
> 
> 赞同：0
> 
> 时间：2013-02-18T16:14:44.370
> 
> 标签：loadrunner

每次我尝试在性能中心启动测试时都会出现此错误消息，即使测试在 VuGen 中的本地计算机上也能完美运行。这是错误消息：

“***运行测试失败。原因：'Vugen 错误代码：-81021'运行 273（时隙 5603）将状态从初始化更改为运行失败。负载测试''失败（运行 ID 273）。时隙 ID '5603'已关闭***“

有没有人遇到过这个问题？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T17:09:05.430

您失去了运行测试的机会之窗。与您的性能测试管理员联系，安排另一个机会窗口来执行您的测试。

# vim - 一种更精确的方式将光标向后移动然后跳转

> ID：14940595
> 
> 赞同：3
> 
> 时间：2013-02-18T16:14:45.983
> 
> 标签：vim

我知道我们可以使用`Ctrl`+`o`和`Ctrl`+将光标向后移动`i`。（参考[将光标移动到最后一个位置](https://stackoverflow.com/questions/5052079/move-cursor-to-its-last-position)）

但是当我们想要像 hjkl 那样追溯我们的动作时呢？

有什么办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-18T16:25:12.063

那将是非常多的跳跃，不是吗？跳转列表会很快填满并失去其有效性（因为它限制为 100 个条目）。

您可以做的是在跳转`m'`之前明确设置跳转标记。

当给出大于 1时，有些人会更改`j`and`k`命令来记录跳跃：`[count]`

```
:nnoremap <silent> k :<C-U>execute 'normal!' (v:count > 1 ? "m'" . v:count : '') . 'k'<CR>
:nnoremap <silent> j :<C-U>execute 'normal!' (v:count > 1 ? "m'" . v:count : '') . 'j'<CR> 
```

# r - 我进行了聚类分析 - 如何将包含结果的列添加到我的原始数据中

> ID：14940597
> 
> 赞同：2
> 
> 时间：2013-02-18T16:14:52.027
> 
> 标签：r, cluster-analysis, traminer

我从`OM`使用`TraMineR`.

```
R>library (cluster)
R>clusterward<- agnes (test.om,dis=TRUE, method="ward") # where test is my dataset 
```

我选择了6个集群

```
R> cluster6<- cutree(clusterward, k=6) 
```

我试图向我的数据集添加一个 cloumn ：

```
R> groups = cutree(clusterward, k=6)
R> result = cbind(clusterward, k=6, groups) 
```

我收到以下错误消息：

```
Avis dans cbind(clusterward, k = 6, groups) :
    number of rows of result is not a multiple of vector length (arg 1) 
```

我怎么解决这个问题 ？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T10:28:08.200

问题是 clusterward 不是你的数据集，它是聚类的结果。假设您有一个包含所有数据（个人信息）的 data.frame，称为“mydata”，那么您可以使用：

```
mydata <- cbind(mydata, groups) 
```

或者（如果您使用第一个命令）

```
mydata <- cbind(mydata, cluster6) 
```

请注意，您应该在 agnes 命令中使用 diss=TRUE（而不是 dis=TRUE）。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:26:47.623

看起来很奇怪，很可能不是您想要的`k=6`。`cbind`没有示例，只是建议，打印您想要的每个元素`cbind`并检查这是否真的是您想要放置的内容。我想你会很快看到，这个命令中不应该有（如果这些部分匹配，`k=6`我不确定存储在什么中）。`clusterward`

据我了解，不应该是这样的`cbind(test.om,groups)`吗？

# android - 可展开/可折叠的 UI 组件

> ID：14940600
> 
> 赞同：0
> 
> 时间：2013-02-18T16:15:03.487
> 
> 标签：android

我正在寻找以下可扩展/可折叠 UI 组件。

## 展开前

![在此处输入图像描述](../Images/2e7e9d455aa026a6ccc167455755e1ce.png)

## 展开后

![在此处输入图像描述](../Images/f69603811361a5bc94524743cf6cce18.png)

有人遇到过这种可扩展的 UI 组件库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T16:16:12.217

它称为[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。

# cocoa-touch - NSMetadataQuery 找不到 NSFileWrapper 文件夹包，只有文件（但它们在那里）

> ID：14940602
> 
> 赞同：2
> 
> 时间：2013-02-18T16:15:07.300
> 
> 标签：cocoa-touch, nspredicate, icloud, uidocument, nsfilewrapper

我有一个奇怪的问题，我似乎无法自己解决。任何帮助或想法表示赞赏。

**问题：**

*   NSMetadataQuery 找到普通文件（如 test.txt）但没有文件包装器包（myWrapperDocument.pro）
*   但是，NSFileManager 会在我的 ubiquity 容器中找到所有文件——所以这些文件都在那里，但 NSMetadataQuery 没有找到它们！

**事实：**

*   使用 NSFileWrappers 的基于 UIDocument 的应用程序
*   Shared Ubiquity Container（适用于 iOS 和桌面应用程序）
*   在 Mac OS 上完美运行
*   在我的 iPad Mini 和我的 iPhone 4S 和 iPhone 3GS 上完美运行（运行 iOS6 和 iOS5）
*   不适用于我的 iPad1，也不适用于我的大多数 beta 测试设备（运行 iOS5 或 6 的 iPad 1、2 和 3）

**到目前为止我做了什么：**

*   学习了 WWDC12 UIDocument 和 iCloud 示例 (CloudNotes.xcodeproj)
*   在 Apple 的开发论坛和这里学习了几个小时，不幸的是没有任何运气
*   测试了许多不同的谓词，检查了权利和文档设置（因此系统知道它不是文件夹，而是文档包）
*   清除和重置 Ubiquity 容器

**相关代码：**

权利应该是正确的；Info.plist 文档设置（我认为文档类型已正确注册）

```
<key>CFBundleDocumentTypes</key>
    <array>
  <dict>
      <key>CFBundleTypeExtensions</key>
      <array>
        <string>pro</string>
      </array>
      <key>CFBundleTypeName</key>
      <string>Prowriting Sketch</string>
      <key>LSItemContentTypes</key>
      <array>
        <string>de.ac.prowriting.sketch</string>
      </array>
      <key>LSTypeIsPackage</key>
      <true/>
  </dict>

  …

  <key>UTExportedTypeDeclarations</key>
    <array>
    <dict>
      <key>CFBundleTypeExtensions</key>
      <array>
        <string>pro</string>
      </array>
      <key>LSTypeIsPackage</key>
      <true/>
      <key>UTTypeConformsTo</key>
      <array>
        <string>com.apple.package</string>
      </array>
      <key>UTTypeDescription</key>
      <string>Prowriting Sketch</string>
      <key>UTTypeIdentifier</key>
      <string>de.ac.prowriting.sketch</string>
    </dict> 
```

ubiquity 容器和 iCloud 文档 url 都很好，这就是我设置查询的方式：

```
- (void)startMetadataQuery {
  // ...
  [self.query setSearchScopes:@[NSMetadataQueryUbiquitousDocumentsScope]];

  // search for all .pro documents, also tried other predicates, see below
  NSString *predicate = [NSString stringWithFormat:@"%K like '*'"];
  [self.query setPredicate:[NSPredicate predicateWithFormat:predicate, NSMetadataItemFSNameKey]];

  // register observer (...)
  [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(didFinishMetadataQuery:) name:NSMetadataQueryDidFinishGatheringNotification object:nil];

  [self.query startQuery];
}

- (void)didFinishMetadataQuery:(NSNotification*)notification {
    [self.query disableUpdates];
    NSLog(@"+++ found %i results: \n%@", self.query.resultCount, self.query.results);
    NSLog(@"+++ Results in iCloud folder: %i", [self.fileManager contentsOfDirectoryAtPath:self.iCloudDocumentsFolder.path error:nil].count);
} 
```

***真正奇怪的是，查询只返回一个文件“test.txt”，而其他文件仍未被发现。但是从日志中可以看到，容器有 84 个 .pro 文件（都称为“something.pro”），但查询只找到了一个“test.txt”。***

不幸的是，使用 NSFileManager 访问这些文件不是一种选择，因为我似乎无权阅读这些文件。我认为我的容器没有损坏，因为这个问题也发生在我的 beta 测试设备的全新安装上？

```
2013-02-18 +++ found 1 results: ("<NSMetadataItem: 0x3ac390> /private/var/mobile/Library/Mobile Documents/ABCD123456~de~ac~prowriting/Documents/test.txt")
2013-02-18 +++ Results in iCloud folder: 84 
```

我认为这是谓词，但是：

```
@"%K like '*.pro*'"                // returns nothing
@"%%K like '*.*'"                  // returns only the test.txt file
@"%%K like '*'"                    // returns only the test.txt file
@"%K LIKE *"                       // returns only the test.txt file
@"NSMetadataItemFSNameKey == '*'"  // returns only the test.txt file 
```

我真的不知道该怎么办了。最奇怪的是，它可以在某些设备上工作，而在其他设备上根本不工作。

我将非常感谢有关此问题的任何提示。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T02:42:47.670

奇怪的是，我不得不从 info.plist 文件中***删除*****LSItemContentTypes设置：**

```
<key>LSItemContentTypes</key>
  <array>
    <string>de.ac.prowriting.sketch</string>
  </array> 
```

此设置是为什么我导出的自定义 UTI 文件包装器文件类型未正确识别为文件，而是解释为文件夹的原因。NSMetadataQuery 不查询文件夹，这就是它没有找到我的任何文件的原因。

不幸的是，我还有一个 Mac 应用程序，并且我的自定义文件类型在桌面上正确注册，影响了 Mobile Documents iCloud 文件夹；所以这就是为什么它可以在我的大多数设备上运行，但在我的测试人员中没有。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-18T11:27:02.350

与其搜索文件名谓词，不如使用 UTI 类型的树谓词格式。

我使用以下内容返回给定文件 URL 处的所有文件、文件夹、包和捆绑包：

```
NSMetadataQuery *query = [NSMetadataQuery new];
[query setSearchScopes:@[url]];

NSPredicate *filePredicate = [NSPredicate predicateWithFormat:@"kMDItemContentTypeTree = %@", kUTTypeData];
NSPredicate *bundlePredicate = [NSPredicate predicateWithFormat:@"kMDItemContentTypeTree = %@", kUTTypeBundle];
NSPredicate *packagePredicate = [NSPredicate predicateWithFormat:@"kMDItemContentTypeTree = %@", kUTTypePackage];
NSPredicate *folderPredicate = [NSPredicate predicateWithFormat:@"kMDItemContentTypeTree = %@", kUTTypeFolder];

NSPredicate *searchPredicate = [NSCompoundPredicate orPredicateWithSubpredicates:@[filePredicate, bundlePredicate, packagePredicate, folderPredicate]];

[query setPredicate:searchPredicate]; 
```

# erlang - 在erlang中重置之前进行备份

> ID：14940607
> 
> 赞同：0
> 
> 时间：2013-02-18T16:15:30.533
> 
> 标签：erlang

我有这个记录：

```
-record(person, {id, token, password, pin, key, salt, pin_salt, subscription_date, first_name, last_name, alias, gender, created_at, birth_year, birth_month, birth_date}). 
```

我有这个创建表**person_backup的函数**

```
testcreate()->      

    mnesia:create_table(person_backup,[{disc_copies, [node()]},{attributes, record_info(fields, person)},
    {record_name, person}]). 
```

我有这个函数将数据从表 person 传输到 person_backup

```
testbackup()->

    mnesia:transaction(fun() ->
  Records = mnesia:select(person, [{'_', [], ['$_']}]),
  [ok = mnesia:write(person_backup, Record, write) || Record <- Records]
end). 
```

我的目标是对我的主要功能进行测试

```
check(Counter)->

if Counter =:= 40 ->
model:testbackup();
model:reset():
true-> io:format(" it not ok")
end. 
```

但我的问题是当我这样做时 :model:reset()

**表 person_backup 将被删除**

我的目标是在执行 model:reset() 之前，我们应该将数据从 person 传输到 person_backup

这是**reset() 、 destroy() 、 create()的代码**

```
reset() ->
    stop(),
    destroy(),
    create(),
    start(),

    {ok}.

destroy() ->
    mnesia:start(),
    mnesia:delete_table(counter),
    mnesia:delete_table(person),
    mnesia:stop(),
    mnesia:delete_schema([node()]).

create() ->
    mnesia:create_schema([node()]),
    mnesia:start(),
    mnesia:create_table(counter, [{attributes, record_info(fields, counter)}, {disc_copies, [node()]}]),
    mnesia:create_table(person, [{attributes, record_info(fields, person)}, {disc_copies, [node()]}]),
  mnesia:create_table(person_backup,[{disc_copies, [node()]},{attributes, record_info(fields, person)},
    {record_name, person}]),
    mnesia:stop(). 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:09:31.113

当您删除架构时，所有表都将被删除，包括您的 person_backup。不要在销毁中执行 delete_schema，一切都会正常工作。

更好的做法是让您单独创建表并单独重置。在重置中，您可以改为执行 mnesia:clear_table of person 和 counter 。我想知道为什么你需要重新启动 mnesia。

# java - Android，无法访问联系人电话号码

> ID：14940608
> 
> 赞同：0
> 
> 时间：2013-02-18T16:15:34.960
> 
> 标签：java, android, contacts, android-contacts, phone-number

我无法访问我的联系人的电话号码，也不知道为什么。

```
private void getContacts(){
        Cursor people = mCon.getContentResolver().query(ContactsContract.Contacts.CONTENT_URI, null, null, null, null);
        if (people.moveToFirst()) {
            do {
               int nameFieldColumnIndex = people.getColumnIndex(PhoneLookup.DISPLAY_NAME);
               String contact = people.getString(nameFieldColumnIndex).toLowerCase();
               int numberFieldColumnIndex = people.getColumnIndex(PhoneLookup.NUMBER);
               String number = people.getString(numberFieldColumnIndex); 
               hm.put(contact, number);
            }while(people.moveToNext());
        }
        people.close();
    } 
```

名称可以很好地进入哈希图，但 numberFieldColumnIndex 一直显示为 -1

我输出了人的列标题，没有一个数字？我怎样才能找回它们？

列出人员的列标题

```
02-18 13:26:38.500: D/Contacts(1587): 0 times_contacted
02-18 13:26:38.500: D/Contacts(1587): 1 contact_status
02-18 13:26:38.500: D/Contacts(1587): 2 phonetic_name
02-18 13:26:38.500: D/Contacts(1587): 3 phonetic_name_style
02-18 13:26:38.500: D/Contacts(1587): 4 link
02-18 13:26:38.500: D/Contacts(1587): 5 is_user_profile
02-18 13:26:38.500: D/Contacts(1587): 6 raw_contact_linkpriority4
02-18 13:26:38.500: D/Contacts(1587): 7 raw_contact_linkpriority5
02-18 13:26:38.500: D/Contacts(1587): 8 lookup
02-18 13:26:38.500: D/Contacts(1587): 9 contact_status_icon
02-18 13:26:38.500: D/Contacts(1587): 10 last_time_contacted
02-18 13:26:38.500: D/Contacts(1587): 11 sec_custom_vibration
02-18 13:26:38.500: D/Contacts(1587): 12 _id
02-18 13:26:38.500: D/Contacts(1587): 13 display_name_source
02-18 13:26:38.500: D/Contacts(1587): 14 photo_uri
02-18 13:26:38.500: D/Contacts(1587): 15 photo_thumb_uri
02-18 13:26:38.500: D/Contacts(1587): 16 contact_chat_capability
02-18 13:26:38.500: D/Contacts(1587): 17 photo_id
02-18 13:26:38.500: D/Contacts(1587): 18 send_to_voicemail
02-18 13:26:38.500: D/Contacts(1587): 19 display_name_reverse
02-18 13:26:38.500: D/Contacts(1587): 20 custom_ringtone
02-18 13:26:38.500: D/Contacts(1587): 21 name_raw_contact_id
02-18 13:26:38.500: D/Contacts(1587): 22 photo_file_id
02-18 13:26:38.500: D/Contacts(1587): 23 has_phone_number
02-18 13:26:38.500: D/Contacts(1587): 24 link_type5
02-18 13:26:38.500: D/Contacts(1587): 25 link_type4
02-18 13:26:38.500: D/Contacts(1587): 26 link_type3
02-18 13:26:38.500: D/Contacts(1587): 27 contact_status_label
02-18 13:26:38.500: D/Contacts(1587): 28 link_type2
02-18 13:26:38.500: D/Contacts(1587): 29 link_type1
02-18 13:26:38.500: D/Contacts(1587): 30 raw_contact_linkpriority3
02-18 13:26:38.500: D/Contacts(1587): 31 raw_contact_linkpriority2
02-18 13:26:38.500: D/Contacts(1587): 32 display_name
02-18 13:26:38.500: D/Contacts(1587): 33 raw_contact_linkpriority1
02-18 13:26:38.500: D/Contacts(1587): 34 has_email
02-18 13:26:38.500: D/Contacts(1587): 35 sort_key_alt
02-18 13:26:38.500: D/Contacts(1587): 36 dirty_contact
02-18 13:26:38.500: D/Contacts(1587): 37 in_visible_group
02-18 13:26:38.500: D/Contacts(1587): 38 starred
02-18 13:26:38.500: D/Contacts(1587): 39 link_count
02-18 13:26:38.500: D/Contacts(1587): 40 display_name_alt
02-18 13:26:38.500: D/Contacts(1587): 41 sort_key
02-18 13:26:38.500: D/Contacts(1587): 42 contact_presence
02-18 13:26:38.500: D/Contacts(1587): 43 contact_status_res_package
02-18 13:26:38.500: D/Contacts(1587): 44 contact_status_ts 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:18:30.407

以下代码显示了一种读取所有电话号码和姓名的简单方法：

```
Cursor phones = getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null);
while (phones.moveToNext())
{
  String name = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
  String phoneNumber = phones.getString(phones.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));

}
phones.close(); 
```

# c++ - 重置嵌入式 ruby 解释器的状态

> ID：14940610
> 
> 赞同：3
> 
> 时间：2013-02-18T16:15:55.943
> 
> 标签：c++, ruby

我有一个可以用 Ruby 扩展的应用程序。脚本可以在应用程序本身中创建，并在每次编辑时重新加载。因此，当用户向类添加方法时，它会立即生效。我不能只执行修改后的文件，就好像用户删除了一个方法，它应该不存在。唯一的选择是清除解释器的状态并重新加载所有脚本。但是 Ruby 会保护自己免受重启：( `eval.c`)

```
void ruby_init(void)
{
    int state = ruby_setup();
    if (state) {
        error_print();
        exit(EXIT_FAILURE);
    }
} 
```

* * *

```
int ruby_setup(void)
{
    static int initialized = 0;
    int state;

    if (initialized)
        return 0;
    initialized = 1;

    /* ... */

    return state;
} 
```

我还认为`ruby_init()`多次调用可能会导致 ruby​​ 跟踪并破坏 GC 的堆栈位置问题。重新启动整个应用程序不是一种选择，因为它具有 GUI 界面。将所有 ruby​​ 内容保存在一个单独的进程中也会很痛苦，因为在应用程序上插入新的 GUI 元素的 Qt 接口是暴露的。另一种选择是以某种方式跟踪所有已定义的方法、类、常量等，并在重新执行代码之前取消定义它们。有简单的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:38:44.600

就在这里！（我认为）（这需要您使用一些 Ruby 代码来加载其他 Ruby 代码）：

```
$current_env = nil

def reload(code)
  $current_env = Module.new
  $current_env.module_eval(code)
end 
```

是的，就是这么简单。每当您需要从插件访问内容时，只需将 $current_env 作为模块访问：

```
$current_env::ExtensionClass.extension_thing 
```

旧类在`reload`调用时被替换的东西变得不可访问，除了在下次 GC 时被释放。

# javascript - 如何在 JQGrid 的单独列中进行垂直滚动

> ID：14940614
> 
> 赞同：1
> 
> 时间：2013-02-18T16:16:13.157
> 
> 标签：javascript, jqgrid, scroll

我在 JQGrid 中有一个网格，
我的列表很长，所以右边有一个垂直滚动

但是这个滚动条在最后一列而不是像这样在右侧单独的
![在此处输入图像描述](../Images/33e6d3ae2ab63d99f7efd1bd7f207958.png)

我怎样才能把它放在一个单独的列中？

看到不好的结果：[这里](http://jsbin.com/ajugiz/1)

查看代码：[这里](http://jsbin.com/ajugiz/1/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:41:19.063

在末尾添加一个空白列，然后滚动条将转到那里。

为此，请通过以下方式将空白值附加到网格设置中的数据行：

```
 beforeProcessing: function (data, status, xhr) {
            //add the spaces to the returned data to allow for the blank vertical columns in the grid
            for (var x = 0, length = data.rows.length; x < length; x++) {
                data.rows[x].cell.splice(5,0, "");
            }//for
        }, //beforeProcessing 
```

为您的列添加额外的值：

```
 'Fournisseur<br/>Commande',
              'Contenu', ''], 
```

然后添加空白列定义：

```
 { name: "empty1", width: 10, sortable: false, hidedlg: true, search: false, resizable: false, fixed: true }, 
```

# php - 将 PHPExcel 文件解析为 HTML

> ID：14940615
> 
> 赞同：1
> 
> 时间：2013-02-18T16:16:13.173
> 
> 标签：php, phpexcel

我有一个上传页面供用户上传 excel 文件，这是任务请求类型的一部分。我正在尝试拥有它，因此当提交任务时，您可以单击一个链接，该链接将显示他们上传的 excel 文件的 html 表。PHP-excel-reader 可以完美运行，但它不支持 xlsx 文件。我正在查看 PHPExcel，但不太明白我如何获取这些输出并从中制作一个 html 表格。我也担心我无法在 PHP 中获得 ZipArchive 支持。

有谁知道他们将 PHPExcel 示例转换为 html 表的示例？

**编辑：**

以下代码运行良好。它在脚本运行时创建一个新文件。我不太清楚如何正确重命名文件。目前它正在将包含以下代码的实际 phpexcel.php 文件重命名为 phpexcel.htm。例如，我想取的名称`$inputFileName`并将其重命名`exceluploads/Book7.htm`为。我不确定它是否像更改一样简单，`$objWriter->save(path/name.htm);`但这不起作用，我收到：

```
Warning: fopen(/exceluploads/Book7.htm) [function.fopen]: failed to open stream: No such file or directory in /var/www/Classes/PHPExcel/Writer/HTML.php on line 164

Fatal error: Uncaught exception 'Exception' with message 'Could not open file /exceluploads/Book7.htm for writing.' 
```

代码：

```
 <?php

    /** Error reporting */
    error_reporting(E_ALL);

    /** Include PHPExcel */
    require_once dirname(__FILE__) . '/Classes/PHPExcel.php';

    // Create new PHPExcel object
    echo date('H:i:s') , " Create new PHPExcel object" , PHP_EOL;
    $objPHPExcel = new PHPExcel();

    $inputFileName = 'exceluploads/Book7.xlsx';
    $objPHPExcel = PHPExcel_IOFactory::load($inputFileName);

    echo date('H:i:s') , " Write to HTML format" , EOL;
    $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'HTML');
    $objWriter->setSheetIndex(0);
    //$objWriter->setImagesRoot('http://www.example.com');
    $objWriter->save(str_replace('.php', '.htm', __FILE__));

    echo date('H:i:s') , " File written to " , str_replace('.php', '.htm', pathinfo(__FILE__, PATHINFO_BASENAME)) , EOL;

    // Echo memory peak usage
    echo date('H:i:s') , " Peak memory usage: " , (memory_get_peak_usage(true) / 1024 / 1024) , " MB" , EOL;

    // Echo done
    echo date('H:i:s') , " Done writing file" , EOL;
    echo 'File has been created in ' , getcwd() , EOL;

    ?> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-18T16:47:51.693

要读取文件：

```
$inputFileName = 'example.xls';
$objPHPExcel = PHPExcel_IOFactory::load($inputFileName); 
```

要写入文件：

```
$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'HTML');
$objWriter->save('example.html'); 
```

# php - 调试 PHP 网站停止响应 firefox 的原因

> ID：14940616
> 
> 赞同：0
> 
> 时间：2013-02-18T16:16:21.577
> 
> 标签：php, firefox

一个用 PHP 编写并位于其他地方的网站，大部分时间都可以在 5 种主要浏览器中正常加载。

有时在 Firefox 中，网站不会加载，而是联系服务器图标点逆时针旋转，感觉就像永远一样。似乎没有出现错误消息。我删除了所有 cookie 和缓存并重新启动 firefox 并重试，但仍然存在相同的行为。

同时它可以在同一台计算机上的其他浏览器中运行，也可以在另一台计算机上的 Firefox 中运行。

使用 ping 似乎没有丢包。

我该如何调试这个问题？

该网站是[stock.mrfootage.com](http://stock.mrfootage.com)

编辑：

加载时，站点 cookie 得到更新，站点标题显示在选项卡栏中。

如果我同时禁用 javascript 并删除所有 cookie 或与该站点相关的所有 cookie，然后重新加载，它可以工作。然后我可以重新启用 javascript 并再次正常使用该站点。

另一方面，如果我只禁用 javascript 或删除 cookie，则 firefox 选项卡似乎仍在加载时挂起。

它也可能与 Mac OS X 上的 Firefox 有关，因为它不起作用的三台计算机都是 Mac，而我没有遇到此问题的两台计算机正在运行 Windows。

Livehttpheaders 插件根本没有针对这个问题显示任何标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:21:29.593

我敢打赌，问题出在 HTML 验证上——这意味着您的某些 HTML 代码无效（例如未封闭的标签、不正确位置的标签等）。

要解决这个问题，您可以使用在线 HTML 验证器，例如[http://validator.w3.org/](http://validator.w3.org/)，它会显示您的问题。当您修复它们时，网站应该可以正常加载。

但是，验证器可能会显示数百个问题，而您不想修复所有问题。在这种情况下，您可以通过删除 HTML 的一半并查看它是否加载（不会卡在加载动画上）来找到 HTML 中的问题点。继续删除部分并将它们带回来，直到找到导致此问题的位置 - 然后找出问题所在。

对于那些说 Firefox 仅在所有 HTML 下载完成后才进行验证的怀疑论者，这是不正确的。众所周知，Firefox HTML 解析器中的错误会导致此行为，从这个[过去的问题](https://stackoverflow.com/questions/304471/firefox-sits-on-transferring-data-from-or-read)和这个[错误报告](https://bugzilla.mozilla.org/show_bug.cgi?id=383811)中可以看出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:26:44.130

您可能有一些 javascript 进入无限循环并导致解释器冻结。

您是否需要 3rd 方资产，例如网络字体、Javascript、样式表？如果你是，很可能其中一个资源没有加载，并且因为它是同步处理的（除非你有一个异步加载器）页面不会显示，直到资源响应超时或 HTTP 状态代码等。

尝试在 Chrome 或 Safari 中加载网页，检查器打开到网络选项卡。您会在那里看到任何连接错误。

# css - 为什么 IE 表格单元格只有在有内容时才显示？

> ID：14940619
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:16:26.060
> 
> 标签：css, internet-explorer, border

这是 HTML

```
<table class = "contact-table">
  <tr>
      <th>First Name(*):</th>
      <td>
          <asp:Label ID="lblFirstName" runat="server" ></asp:Label>
      </td>
  </tr>
  <tr>
      <th>Middle Name</th>
      <td>
          <asp:Label ID="lblMiddleName" runat="server" ></asp:Label>
      </td>
  </tr>
  <tr>
      <th>Last Name(*):</th>
      <td>
         <asp:Label ID="lblLastName" runat="server" ></asp:Label>
      </td>
  </tr>
</table> 
```

这是CSS

```
.contact-table th,
.contact-table td
{
   border: 1px Black solid;      
} 
```

对于**FF**和**Chrome**，一切正常，即**th**和**td**周围有 1px 的黑色边框。但是，对于 IE，只有有内容的 td 才有边框。

有什么理由吗？

# 编辑

当我添加这个**.contact-table td span**

```
.contact-table th,
.contact-table td,
.contact-table td span 
{
   border: 1px Black solid;      
} 
```

空单元格在 IE 中具有边框，但那些之前有边框的单元格在单元格内有一个额外的边框。

# 编辑

当我以这种方式改变规则时

```
.contact-table th,
.contact-table td span 
{
   border: 1px Black solid;      
}

.contact-table td span 
{
   width: 100%;      
} 
```

它适用于 IE，但 FF 和 Chrome 现在显示仅包含文本的小边框。

有没有办法告诉 css 根据浏览器应用不同的规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:22:09.750

你有`empty-cells: show`定吗？

请参阅：http: [//msdn.microsoft.com/de-de/library/ie/cc848860 (v=vs.85).aspx](http://msdn.microsoft.com/de-de/library/ie/cc848860(v=vs.85).aspx)

# internet-explorer - 强制文档模式=IE8标准

> ID：14940621
> 
> 赞同：9
> 
> 时间：2013-02-18T16:16:30.813
> 
> 标签：internet-explorer, internet-explorer-8, ie8-compatibility-mode, compatibility-mode

所以我在让 IE8 不默认为 IE7 文档模式时遇到问题，因为我们的 Intranet 已设置。

我正在使用 IE 开发工具进行设置，加上一点 js 来检查浏览器报告的文档模式是什么。

除了可以提供的标记外，我无法更改任何设置。换句话说，我不是管理员，我唯一的控制是在浏览器中。

我努力了：

```
<meta http-equiv="x-ua-compatible" content="IE=8"> 
```

但这并没有改变文档模式的报告方式，它仍然报告为 IE7。

[JS小提琴](http://jsfiddle.net/hutber/9PNLN/1/)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T11:46:10.677

有人可能认为这是一个先决条件，我同意。

但是在本地工作时，我没有声明一个文档类型：

确保您声明一个：

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
      <meta http-equiv="x-ua-compatible" content="IE=8" > 
```

工作很好

# actionscript-3 - 配置 flash 以在启动时运行 Actionscript 文件

> ID：14940622
> 
> 赞同：0
> 
> 时间：2013-02-18T16:16:30.503
> 
> 标签：actionscript-3, flash-cs6

我可以看到如何根据舞台上显示的符号/对象的实例运行类文件，但是是否可以配置 flash 以在程序启动时立即运行 actionscript 文件，而无需先创建符号/对象的任何实例? 如果是这样，我该如何配置它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T20:32:05.163

您可以使用文档类。它将在您的应用程序开始时执行，有效地代替时间线代码。根据您的应用程序，文档类也可能比时间线代码更强大、更方便，因为它们不依赖于特定帧并且具有整体更好的格式，尤其是在您的应用程序几乎完全由代码控制的情况下。

可以在[此处](http://active.tutsplus.com/tutorials/actionscript/quick-tip-how-to-use-a-document-class-in-flash/)找到有关使用文档类的说明和教程。

# javascript - Jquery没有冲突不起作用

> ID：14940623
> 
> 赞同：0
> 
> 时间：2013-02-18T16:16:30.920
> 
> 标签：javascript, jquery

这是一种二合一的问题。我正在尝试使用 jquery 没有冲突，但我认为我做的不正确。

**这是我所拥有的：**

> // ***** ** *** ** *** ** *** ** *** ** *****插件***** ** *** ** *** ** *** ** *** ** *****

```
jQuery.noConflict() // return `$` to it's previous "owner"
(function($){ // in here you're assured that `$ == jQuery`

$(document).ready(function() {
    $(".fancybox").fancybox(); /*LIGHTBOX*/
});

$(window).scroll(function(){ /*SCROLL TO TOP*/
    if ($(this).scrollTop() > 100) {
        $('.scrollup').fadeIn();
    } else {
        $('.scrollup').fadeOut();
    }
}); 

$('.scrollup').click(function(){
    $("html, body").animate({ scrollTop: 0 }, 600);
    return false;
});

$('.bxslider').bxSlider();

}); 
```

****我做得不对吗？****

*** *另外，当我添加它时，它会使一切停止工作，这就是为什么我认为我没有正确添加无冲突：* *

> // ***** ** *** ** *** ** *** ** *** ** *****标题阴影***** ** *** ** *** ** *** ** *** ** *****

```
$(window).scroll(function() {
    if ($(this).scrollTop() == 0) {
        $('header').css({
                'box-shadow': 'none',
                '-moz-box-shadow' : 'none',
                '-webkit-box-shadow' : 'none' });
    }
    else {
        $('header').css({
                'box-shadow': '0px 10px 10px #888',
                '-moz-box-shadow' : '0px 10px 10px #888',
                '-webkit-box-shadow' : '0px 10px 10px #888' });
    }
}); 
```

先感谢您。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T16:17:54.713

您必须将 jQuery 传递给您的函数：

```
jQuery.noConflict() // return `$` to it's previous "owner"
(function($){ // in here you're assured that `$ == jQuery`

    // Code

})(jQuery); //Do you mean to pass jQuery like this perhaps? 
```**

# c - 将数据从文件放入C中的数组

> ID：14940633
> 
> 赞同：4
> 
> 时间：2013-02-18T16:17:02.250
> 
> 标签：c, arrays, file

这是我的代码。

```
#include <stdlib.h>
#include <stdio.h>

int main() {
    //Vars
    FILE *fp;
    char word[9999],
        *arrayOfWords[9999];
    int wordCount = 0, i;
    //Actions
    fp = fopen("data.txt", "r");
    if(fp != NULL) {
        while(!feof(fp)) {
            fscanf(fp, "%s", word);
            arrayOfWords[wordCount] = word;
            wordCount++;
        }
        for(i = 0; i < wordCount; i++) {
            printf("%s \n", arrayOfWords[i]);
        }
    puts("");
    } else {
        puts("Cannot read the file!");
    }
    return 0;
} 
```

我正在尝试从文本文件中读取一些数据并将其存储到数组中。当我在循环中时一切都很好，但是当我离开那里时，我的数组中任何索引的任何值都被文件的最后一个单词填充。谁能帮我找出我正在做的错误？

数据文件：

```
Hello there, this is a new file. 
```

结果：

```
file.
file.
file.
file.
file.
file.
file.
file. 
```

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:21:53.447

您需要为数组的每个单独成员分配内存（使用 malloc 或通过提供数组的第二维并将其声明为 type`char`而不是`char*`）。你所做的类似于：

```
char *s;
scanf("%s", s); 
```

而这行不通`C`。实际上，这里有 UB（未定义行为），因为指针未初始化。

编辑：你让数组中的所有字段都指向你的数组`word`，一旦你读过单词，你应该为字符串分配新的内存然后`strcpy` `word`进入它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:32:03.047

您的代码中至少有两点需要关注。`char word[9999], *arrayOfWords[9999];`定义`arrayOfWords`为 9999 的数组`char pointers`。这是值得关注的一点。

还有一点是`arrayOfWords[wordCount] = word;`。这里要存储新读取的字，需要像`arrayOfWords`指针数组一样分配空间。请找到您修改后的代码，如下所示。

```
int main() {
//Vars
FILE *fp;
char arrayOfWords[30];
int wordCount = 0, i;
//Actions
fp = fopen("data.txt", "r");
if(fp != NULL) {
    while(!feof(fp)) {
        fscanf(fp, "%s", &arrayOfWords[wordCount]);
        wordCount++;
    }
    puts("");
    for(i = 0; i < (wordCount - 1); i++) {
        puts(arrayOfWords[i]);
    }
puts("");
} else {
    puts("Cannot read the file!");
}
return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:32:36.453

这：

```
arrayOfWords[wordCount] = word; 
```

不会将当前单词复制到单独的存储中，它只是分配另一个指针指向相同的存储块`word`。所以你最终得到一个指向同一个数组的指针`word`数组。您需要为每个单词单独分配内存并复制组成每个单词的字符（以及 NULL 终止符），而不是指针。

# javascript - 反向映射来自传感器的值

> ID：14940636
> 
> 赞同：0
> 
> 时间：2013-02-18T16:17:11.590
> 
> 标签：javascript, html, dom, sensors

嗨，我对此有很大的困难。

我有一个传感器，它从它的 z 变量输出值，我用事件侦听器捕获它 - event.z 从 20 增加到 100。

```
document.getElementById("size").style.width = event.z + "px"; 
```

当它与我的元素的 .width 属性绑定时，它会按比例增加元素的宽度。这很好用。但是我希望它做相反的事情，在传感器值增加的同时减小宽度。如何“反转”传感器的值以使宽度属性减小？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:24:28.007

```
document.getElementById("size").style.width = 100 + (20 - event.z) + "px"; 
```

当你的 event.z 说 20 时，这将给出 100px 的宽度。当你的 event.z 说 100 时，这将给出 20px 的宽度。

这种计算的一般函数是

```
function progress(start, finish, current) {
    if (start == finish) { return start; }

    var operator = 1;
    var min = start;
    if (start > finish) {
        operator = -1;
        min = finish;
    }

    return start + (Math.abs(current - min) * operator);
 } 
```

当您使用此逻辑时，`progress(20, 100, 30)`将给出 30 和`progress(100, 20, 30)`将给出 90。基本逻辑是：将您的较低值与当前值之间的差值添加（或减去）到您的初始值。

请注意，一旦您知道开始值和结束值，此函数始终可以压缩为一行。虽然您可以将其用作代码，但它更倾向于用作伪代码，以帮助您了解如何将其变为单行代码。使用这种一般形式，您的两种情况是：

20 + (current - 20) // == current，即你的原始代码行

和

100 - (current - 20) // == 100 - (-(20 - current) == 100 + (20 - current)，即我给出的答案。

# android - 如何在 Android 中搜索具有整数类型的数据库

> ID：14940637
> 
> 赞同：1
> 
> 时间：2013-02-18T16:17:12.143
> 
> 标签：android, sqlite

自从 Android 中的 SQLite 开始以来，这个问题就一直困扰着我。选择参数是`Strings`. 什么？为什么？

让我们看看我的问题。我有一个正确填充的数据库：

```
sqlite> select count (*) from issues where project_id = 1;
3819 
```

伟大的。让我们看一下代码：

```
public Cursor selectAllCursor(final long projectId) {
    final String selection = projectId > 0 ? KEY_PROJECT + " = ?" : null;
    final String[] selArgs = projectId > 0 ? new String[] {
        Long.toString(projectId)
    } : null;

    final Cursor c = mDb.query(TABLE_ISSUES, null, selection, selArgs, null, null, null);
    c.moveToFirst();
    return c;
} 
```

嗯，返回`Cursor`的是空的。为什么？

```
sqlite> select count (*) from issues where project_id = '1';
0 
```

嗯，这就是为什么。

我发现的唯一解决方法是：

```
public Cursor selectAllCursor(final long projectId) {
    final String selection = projectId > 0 ? KEY_PROJECT + " = " + projectId : null;
    final String[] selArgs = null;

    final Cursor c = mDb.query(TABLE_ISSUES, null, selection, selArgs, null, null, null);
    c.moveToFirst();
    return c;
} 
```

它有效，但我觉得这很难看。
为什么选择参数不是数组`Object`而不是`String`？Android 框架会测试对象类型，如果它是整数 ( `int`/ `long`)，它会告诉 SQLite 将其视为整数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:02:20.497

参数对于避免字符串格式问题（包括 SQL 注入攻击）很有用。对于其他类型，您没有此类问题。

但这仍然意味着您必须根据值的类型使用完全不同的代码。此外，如果您使用[compileStatement](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#compileStatement%28java.lang.String%29)，*则可以*使用其他类型作为参数，但[SQLiteStatement](http://developer.android.com/reference/android/database/sqlite/SQLiteStatement.html)仅适用于单个值 (1 x 1) 结果集。

这只是糟糕的 API 设计。

如果将表列声明为`INTEGER`，SQLite 的[类型关联规则](http://www.sqlite.org/datatype3.html#affinity)会自动将值转换回数字。但是，这仅适用于直接比较，例如`Column = ?`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:30:13.317

你是对的，[文档](http://developer.android.com/reference/android/database/sqlite/SQLiteQueryBuilder.html#query%28android.database.sqlite.SQLiteDatabase,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)很清楚参数将始终绑定为字符串。不知道**为什么**会这样（因为那是你的实际问题:-)），但找不到任何解决方法。

> selectionArgs 您可以在选择中包含 ?s，它将被 selectionArgs 中的值替换，以便它们出现在选择中。**这些值将绑定为字符串。**

一种“更好”的做你所拥有的方式可能是使用[String.format](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)？例如

```
String selection = String.format("%s = %d", KEY_PROJECT, projectId ) 
```

# python - 在 Python 中将 LaTex 表读入数组

> ID：14940638
> 
> 赞同：5
> 
> 时间：2013-02-18T16:17:13.530
> 
> 标签：python, file, import, latex

对于 Python 初学者来说，我有一个艰巨的任务，我需要从用 LaTex 编写的源文件中导入一个表。我在想我将使用表的名称作为标识符，然后逐行写入一个数组，从表的开头到结尾。做这项工作的“自然”方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-10T11:39:21.727

astropy[包](http://www.astropy.org)有一个 LaTeX 表格阅读器。

```
from astropy.table import Table
tab = Table.read('file.tex') 
```

reader 函数应该自动识别格式并读取文件中的第一个表。（如果您想要稍后的表格，请将相关部分剪切并粘贴到新文件中）。不过，读者有一些限制。最重要的是，每一行数据都必须在一行上（问题中表格的链接已经失效，所以我看不出这是否有问题），并且不能有`\multicolumn`or之类的命令`\multirow`。

查看 astropy 中的 Latex 阅读文档以获取更多选项：[https ://astropy.readthedocs.org/en/latest/api/astropy.io.ascii.Latex.html#astropy.io.ascii.Latex](https://astropy.readthedocs.org/en/latest/api/astropy.io.ascii.Latex.html#astropy.io.ascii.Latex)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-11T14:48:53.457

我个人会在表格的开头和结尾添加一个乳胶注释，以表示您感兴趣的行的范围。

```
import linecache
FILEPATH = 'file.tex'

def get_line_range():
    'returns the lines at which the table begins and ends'
    begin_table_line = None
    end_table_line = None
    with open(FILEPATH, "r") as file:
        array = []
        for line_number, line in enumerate(file):
            if 'latex comment denoting beginning of table' in line:
            begin_table_line = line_number

            if 'latex comment denoting end of table' in line:
            end_table_line = line_number

    return begin_table_line+1, end_table_line

def get_table():
    'gets the lines containing the table'
    start, end = get_line_range()
    return [linecache.getline(FILEPATH, line) for line in xrange(start, end)] 
```

上面的代码是在没有测试的情况下完成的，但应该从 .tex 文件中获取表格。一个明显的问题是它读取文件两次并且绝对可以优化。

# php - 如何将数据从过滤器传递到操作？

> ID：14940640
> 
> 赞同：0
> 
> 时间：2013-02-18T16:17:18.253
> 
> 标签：php, symfony-1.4

让我们假设这个过滤器：

```
public function execute ($filterChain)
{
    if ($this->isFirstCall())
    {
        $loggeduser = array();
        .
        .
        .
        $this->getContext()->getResponse()->setSlot ('loggeduser', $loggeduser);
    }
} 
```

我想将此记录的用户数组传递给每个操作，甚至传递给 ajax 操作。此变量存储记录的用户信息。该`get_slot();`功能不起作用。如何解决这个问题？这次一定不能使用会话。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T18:54:45.970

这应该有效：

`$this->getContext()->getRequest()->setParameter('loggeduser', $loggeduser);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T19:32:54.220

上没有`getSlot()`方法，`sfWebResponse`但有，`getSlots()`因此您可以检索已传递给响应的所有插槽的数组。

在任何控制器中：

```
$slots = $this->getResponse()->getSlots();
print_r($slots['loggeduser']); 
```

正如[@Vlad Jula-Nedelcu](https://stackoverflow.com/users/666096/vlad-jula-nedelcu)所说，如果您不想使用会话并且真的只需要在一个脚本运行中在控制器之间传递一个变量，您可以在 sfContext 中保存的任何对象上设置一个属性。

不幸的是，在 Sf 1.4 中。您无法将自己的对象添加到 sfContext，您必须使用已经存在的对象。

# php - 具有多维数组的多系列 Highchart 数据

> ID：14940642
> 
> 赞同：0
> 
> 时间：2013-02-18T16:17:23.560
> 
> 标签：php, arrays, multidimensional-array, highcharts

我正在尝试以 Highcharts 用来生成数据的多系列图表的格式获取我的数据数组。

我的数据数组是：

```
Array ( 
[answer1] => Array ( [SubQuestion 1] => 3 [SubQuestion 2] => 1 ) 
[answer2] => Array ( [SubQuestion 1] => 2 [SubQuestion 2] => 2 ) 
[answer3] => Array ( [SubQuestion 1] => 1 [SubQuestion 2] => 1 ) 
[answer4] => Array ( [SubQuestion 1] => 1 [SubQuestion 2] => 2 ) 
[answer5] => Array ( [SubQuestion 1] => 0 [SubQuestion 2] => 1 )
) 
```

我需要将其转换为 Highcharts 的这种格式：

```
$chartdata = array(
array("name" =>"SubQuestion 1","data"=>  array(3,2,1,1,0) ),
array("name" =>"SubQuestion 2","data"=>  array(1,2,1,2,1) )
); 
```

谁能指出我正确的方向，如何遍历我的数组以创建 HighCharts 格式的新数组？

感谢所有的帮助。我只是想关闭循环并发布正确答案的略微修改版本： $chartdata = array(); foreach($series as $key1 => $value1){ $i=0; foreach($value1 as $key2 => $value2){ $chartdata[$i]['name'] = $key2; $chartdata[$i]['data'][] = $value2; $i++; } }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:29:59.490

```
$myarray = Array ( 
'answer1' => Array ( 'SubQuestion 1'=> 3 , 'SubQuestion 2' => 1 ) ,
'answer2'=> Array ( 'SubQuestion 1' => 2, 'SubQuestion 2' => 2 ) ,
'answer3' => Array ( 'SubQuestion 1' => 1, 'SubQuestion 2' => 1 ) ,
'answer4' => Array ( 'SubQuestion 1' => 1, 'SubQuestion 2' => 2 ) ,
'answer5' => Array ( 'SubQuestion 1' => 0, 'SubQuestion 2' => 1 )
);

$temp = array();
$chartdata = array();
foreach($myarray as $key1 => $value1){
  foreach($value1 as $key2 => $value2){
   if(!in_array($key2, $temp)){
    $temp[] = $key2;
   }
   $chartdata[array_search($key2, $temp)]['name'] = $key2;
   $chartdata[array_search($key2, $temp)]['data'][] = $value2;
  }
}
echo '<pre>';
print_r($chartdata); 
```

# sql - 在对结果中的行进行编号之前删除重复记录

> ID：14940643
> 
> 赞同：3
> 
> 时间：2013-02-18T16:17:23.887
> 
> 标签：sql, sql-server, tsql

所以，我知道足够多的 SQL 是危险的，并且正在按照一个示例从表中提取一页的记录：

```
SELECT TOP #arguments.perPage# * FROM (

SELECT DISTINCT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS rownum, productdiagramparts.productdiagramid AS productdiagramid, products.id AS productid, products.title AS producttitle, totalRows = COUNT(*) OVER()
FROM manufacturers
INNER JOIN products ON manufacturers.id = products.manufacturerid
INNER JOIN productdiagramparts ON products.id = productdiagramparts.productid
INNER JOIN productdiagrams ON productdiagramparts.productdiagramid = productdiagrams.id
WHERE #whereClause#
) _tmpInlineView

WHERE rownum > #offset#
ORDER BY producttitle 
```

围绕它的 SELECT TOP 当然只提取当前页面的记录。麻烦的是，我想删除的最里面的 SELECT 语句中有重复项，但是使用 DISTINCT 不能如上所示，因为行已经为外部查询编号。如何在对行编号之前使我最里面的 SELECT 结果不同？

这是基于以下公认答案的解决方案：

选择顶部#arguments.perPage# * FROM (

SELECT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS rownum, productdiagramid, productid, producttitle, totalRows = COUNT(*) OVER() FROM (

SELECT DISTINCT productdiagramparts.productdiagramid AS productdiagramid, products.id AS productid, products.title AS producttitle FROM Manufacturers INNER JOIN products ON Manufacturers.id = products.manufacturerid INNER JOIN productdiagramparts ON products.id = productdiagramparts.productid INNER JOIN productdiagrams ON productdiagramparts.productdiagramid = productdiagrams.id WHERE #whereClause#

) _tmpDupRemove

) _tmpInlineView

WHERE rownum > #offset# ORDER BY producttitle

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:35:24.907

这是第二次使用该`ROW_NUMBER`函数的方法。最内层`SELECT`根据重复组分配行号。然后，仅返回行号为 1 的行以删除重复项。最后，完成分配行号的过程。

```
SELECT TOP #arguments.perPage# *
FROM (

    SELECT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS rownum,
        productdiagramparts.productdiagramid AS productdiagramid, 
        products.id AS productid, products.title AS producttitle, totalRows = COUNT(*) OVER()
    FROM (

        SELECT ROW_NUMBER() OVER PARTITION BY productdiagramparts.productdiagramid, products.id ORDER BY (SELECT 1)) AS dup_sequence, *
        FROM manufacturers
        INNER JOIN products ON manufacturers.id = products.manufacturerid
        INNER JOIN productdiagramparts ON products.id = productdiagramparts.productid
        INNER JOIN productdiagrams ON productdiagramparts.productdiagramid = productdiagrams.id
        WHERE #whereClause#

        ) _tmpDupRemove
    WHERE dup_sequence = 1

    ) _tmpInlineView

WHERE rownum > #offset#
ORDER BY producttitle 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:59:41.417

```
DECLARE @startrow Int = 0
DECLARE @recsperpage Int = 10

SELECT  [Inner2].[productdiagramid], 
        [Inner2].[productid], 
        [Inner2].[producttitle]
FROM        
    (
    SELECT ROW_NUMBER() OVER 
        (ORDER BY  
              [Inner1].[producttitle]) AS [ROW_NUMBER], 
        [Inner1].[productdiagramid], 
        [Inner1].[productid], 
        [Inner1].[producttitle]
    FROM
        (
        SELECT DISTINCT pdp.productdiagramid, p.id as productid, p.title as producttitle
        FROM manufacturers m
        INNER JOIN products p ON m.id = p.manufacturerid
        INNER JOIN productdiagramparts pdp ON p.id = pdp.productid
        INNER JOIN productdiagrams pd ON pdp.productdiagramid = pd.id
        WHERE #whereclause#
        ) AS Inner1
    ) as Inner2
WHERE Inner2.[ROW_NUMBER] BETWEEN @startrow + 1 AND  @startrow + @recsperpage
ORDER BY [Inner2].[ROW_NUMBER] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:43:50.353

您可以使用[GROUP BY](http://msdn.microsoft.com/en-us/library/ms177673%28v=sql.105%29.aspx)子句。

SQLServer 中的顺序：GROUP BY-->SELECT ROW_NUMBER()-->DISTINCT。因此 GROUP BY 而不是 DISTINCT 对您来说是必要的

```
SELECT TOP #arguments.perPage# * FROM (
SELECT ROW_NUMBER() OVER(ORDER BY (SELECT 1)) AS rownum, 
       productdiagramparts.productdiagramid AS productdiagramid, 
       products.id AS productid, 
       products.title AS producttitle, 
       totalRows = COUNT(*) OVER()
FROM manufacturers
INNER JOIN products ON manufacturers.id = products.manufacturerid
INNER JOIN productdiagramparts ON products.id = productdiagramparts.productid
INNER JOIN productdiagrams ON productdiagramparts.productdiagramid = productdiagrams.id
GROUP BY productdiagramparts.productdiagramid, products.id, products.title
WHERE #whereClause#
) _tmpInlineView
WHERE rownum > #offset#
ORDER BY producttitle 
```

# spring - 我正在尝试使用从 javascript 到 spring mvc 后端的 ajax 调用来发布帖子，但我的控制器似乎没有收到 modelattributes

> ID：14940646
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:17:30.707
> 
> 标签：spring, rest, jquery, spring-mvc

这是我的代码

控制器：

```
@RequestMapping(value = "/trip/mail.html", method = RequestMethod.POST)
    public @ResponseBody String mailForm(@ModelAttribute(value="formulier") String   formulier, @ModelAttribute(value="orgMessage") String orgMessage, @ModelAttribute(value="tripID") String tripID, BindingResult result) {
    ModelMap mailModel = new ModelMap();
    SimpleDateFormat format = new SimpleDateFormat("dd/MM/yyyy");
    mailModel.addAttribute("title", "Trip update");
    mailModel.addAttribute("subtitle1", "Message from organiser");
    mailModel.addAttribute("message", orgMessage);
    mailModel.addAttribute("subtitle2", "The following trip changes occured");
    mailModel.addAttribute("text", formulier);
    mailModel.addAttribute("date", format.format(new Date()));

    SimpleMailMessage msg = new SimpleMailMessage(message);
    msg.setTo("kdgteamf@gmail.com");
    tripService.sendMail(mailModel, msg);
    return "Congrats!"; 
```

javascript:

```
var formInhoud = $("#changes").html();
var organiserMessage = $("#Message").val();
var tripID = $("#hiddenTripID").val();
$("#dialog-message").css("cursor", "wait"); 
```

`$.post("/ProjectTeamF-1.0/trip/mail.html", { formulier: formInhoud, orgMessage: organiserMessage, tripID: tripID}, function (data) { $("#viewTripForm").submit(); } );`

我正在尝试从我的后端 spring mvc 发送一封电子邮件，这一切正常，但我的帖子有问题。当我执行我的 javascript 时，它工作正常，并且“mailForm”在我的控制器中正常工作（我的电子邮件已发送）。唯一的问题是我似乎没有收到这 3 个模型属性，其中包含我想添加到我的邮件中的信息。当我在控制台中打印它们时，那​​里只是空的，我确信正确的信息在 javascript 中。有人看到我在这里做错了吗？

我是 spring mvc、rest services 和所有这些的新手，也是 stackoverflow 的新手，所以我希望我的问题足够清楚，并对我的英语不好感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:22:28.937

像 @RequestParam("formulier") 而不是控制器方法中的 modelattribute 之类的东西可以解决您的问题。而是创建一个对象 /container/bean 来表示您的数据，并且该 bean 应该具有已发布的字段。然后您可以将此 bean 创建为 ModelAttribute。例如，容器 bean FormBean 具有字段公式等，具有适当的 getter 和 setter。然后在控制器方法中使用 actionMethod(@ModelAttribute("beanInJsp") FormBean formBean )

# javascript - Javascript 库应该动态添加依赖项吗？

> ID：14940648
> 
> 赞同：1
> 
> 时间：2013-02-18T16:17:31.440
> 
> 标签：javascript, jquery, libraries

我正在开发一个需要 jQuery 和 Raphael 的小型 JS 库。我已经在自述文件中记录了这个事实，但我不喜欢用户必须手动包含三个 JS 库才能使用它的想法。

如果库没有找到依赖项，那么动态包含依赖项的优缺点是什么？像这样：

```
if (!window.jQuery) {
    var _my_script=document.createElement('SCRIPT');
    _my_script.type='text/javascript';
    _my_script.src='//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js?';
    document.getElementsByTagName('head')[0].appendChild(_my_script);
    console.log("Loaded jQuery");        
} else {
    console.log("jQuery already loaded");
}

// get Raphael if not found
if (typeof(Raphael) === "undefined") {
    var _my_script=document.createElement('SCRIPT');
    _my_script.type='text/javascript';
    _my_script.src='//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js?';
    document.getElementsByTagName('head')[0].appendChild(_my_script);
    console.log("Loaded Raphael");        
} else {
    console.log("Raphael already loaded");
} 
```

犹太洁食？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:20:52.387

我个人不知道任何自动下载“外部”依赖项的 js 库，我认为在正常情况下这不是一个好主意。

表达清楚需要的库和最小版本就足够了，这就是我所知道的所有 js 库的工作方式。

像 jQuery 这样的库可以从 CDN、本地等下载，因此强制每个人都使用源代码和版本是没有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:21:29.563

我知道像backbone.js 这样非常流行的库不会这样做。

我认为最好强迫用户这样做，这样他们才能了解图书馆的工作方式。

一般来说，通常有某种可用的资源加载器，它将处理添加资源。如果您单独执行此操作，它会分裂一组希望最终用户正在使用的功能。

# ios - UITextField 选项卡问题

> ID：14940655
> 
> 赞同：0
> 
> 时间：2013-02-18T16:17:54.263
> 
> 标签：ios

我在视图上有几个 UITextField 控件。其中之一是日历。当用户单击文本字段时，它会显示一个日历。当用户在不同的文本字段内按 Tab 时，问题就出现了。选项卡按钮遍历所有文本字段控件，然后显示日历。

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    BOOL shouldShowKeyboard = YES;

    if(textField.tag == PLANTED_DATE_TEXTFIELD) // PLANTED_DATE_TEXTFIELD is 1 
    {
        [self.view addSubview:calendar];
        shouldShowKeyboard = NO;

    }

    return shouldShowKeyboard;
} 
```

当用户按下选项卡时，每个 UITextfield 控件都会触发 textFieldShouldBeginEditing 4 次。这会产生我不想要的日历来显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:39:05.660

这是答案：

```
- (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
{
    return YES;
}

-(IBAction) textFieldEditingChange:(id) sender
{
    UITextField *textField = (UITextField *) sender;
    [textField resignFirstResponder];

    [self.view addSubview:calendar];

} 
```

textFieldEditingChange 连接到 UITextField editingDidBegin 事件。

# android - Android Speech Recognition as a service on Android 4.1 & 4.2

> ID：14940657
> 
> 赞同：54
> 
> 时间：2013-02-18T16:17:59.173
> 
> 标签：android, speech-recognition, android-4.2-jelly-bean

我已经设法让连续语音识别工作（使用 SpeechRecognizer 类）作为所有 Android 版本高达 4.1 的服务。我的问题是让它在 4.1 和 4.2 版本上运行，因为众所周知，API 在语音识别开始后的几秒钟内没有按照记录的那样运行，如果没有检测到语音输入，那么它就像如果语音识别器无声无息地死去。（[http://code.google.com/p/android/issues/detail?id=37883](http://code.google.com/p/android/issues/detail?id=37883)）

我发现了一个问题，它提出了解决此问题的方法（[语音识别在几秒钟后停止收听](https://stackoverflow.com/questions/13670378/voice-recognition-stops-listening-after-a-few-seconds)），但我不确定如何实现此解决方案所需的处理程序。我知道这种解决方法每隔几秒钟就会发出“哔”声，但获得持续的语音识别对我来说更重要。

如果有人有任何其他替代解决方法，那么我也想听听。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-19T05:40:22.027

这是针对 android 版本 4.1.1 的解决方法。

```
public class MyService extends Service
{
    protected AudioManager mAudioManager; 
    protected SpeechRecognizer mSpeechRecognizer;
    protected Intent mSpeechRecognizerIntent;
    protected final Messenger mServerMessenger = new Messenger(new IncomingHandler(this));

    protected boolean mIsListening;
    protected volatile boolean mIsCountDownOn;
    private boolean mIsStreamSolo;

    static final int MSG_RECOGNIZER_START_LISTENING = 1;
    static final int MSG_RECOGNIZER_CANCEL = 2;

    @Override
    public void onCreate()
    {
        super.onCreate();
        mAudioManager = (AudioManager) getSystemService(Context.AUDIO_SERVICE); 
        mSpeechRecognizer = SpeechRecognizer.createSpeechRecognizer(this);
        mSpeechRecognizer.setRecognitionListener(new SpeechRecognitionListener());
        mSpeechRecognizerIntent = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
        mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                                         RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
        mSpeechRecognizerIntent.putExtra(RecognizerIntent.EXTRA_CALLING_PACKAGE,
                                         this.getPackageName());
    }

    protected static class IncomingHandler extends Handler
    {
        private WeakReference<MyService> mtarget;

        IncomingHandler(MyService target)
        {
            mtarget = new WeakReference<MyService>(target);
        }

        @Override
        public void handleMessage(Message msg)
        {
            final MyService target = mtarget.get();

            switch (msg.what)
            {
                case MSG_RECOGNIZER_START_LISTENING:

                    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN)
                    {
                        // turn off beep sound  
                        if (!mIsStreamSolo)
                        {
                            mAudioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, true);
                            mIsStreamSolo = true;
                        }
                    }
                     if (!target.mIsListening)
                     {
                         target.mSpeechRecognizer.startListening(target.mSpeechRecognizerIntent);
                         target.mIsListening = true;
                        //Log.d(TAG, "message start listening"); //$NON-NLS-1$
                     }
                     break;

                 case MSG_RECOGNIZER_CANCEL:
                    if (mIsStreamSolo)
                   {
                        mAudioManager.setStreamSolo(AudioManager.STREAM_VOICE_CALL, false);
                        mIsStreamSolo = false;
                   }
                      target.mSpeechRecognizer.cancel();
                      target.mIsListening = false;
                      //Log.d(TAG, "message canceled recognizer"); //$NON-NLS-1$
                      break;
             }
       } 
    } 

    // Count down timer for Jelly Bean work around
    protected CountDownTimer mNoSpeechCountDown = new CountDownTimer(5000, 5000)
    {

        @Override
        public void onTick(long millisUntilFinished)
        {
            // TODO Auto-generated method stub

        }

        @Override
        public void onFinish()
        {
            mIsCountDownOn = false;
            Message message = Message.obtain(null, MSG_RECOGNIZER_CANCEL);
            try
            {
                mServerMessenger.send(message);
                message = Message.obtain(null, MSG_RECOGNIZER_START_LISTENING);
                mServerMessenger.send(message);
            }
            catch (RemoteException e)
            {

            }
        }
    };

    @Override
    public void onDestroy()
    {
        super.onDestroy();

        if (mIsCountDownOn)
        {
            mNoSpeechCountDown.cancel();
        }
        if (mSpeechRecognizer != null)
        {
            mSpeechRecognizer.destroy();
        }
    }

    protected class SpeechRecognitionListener implements RecognitionListener
    {

        @Override
        public void onBeginningOfSpeech()
        {
            // speech input will be processed, so there is no need for count down anymore
            if (mIsCountDownOn)
            {
                mIsCountDownOn = false;
                mNoSpeechCountDown.cancel();
            }               
            //Log.d(TAG, "onBeginingOfSpeech"); //$NON-NLS-1$
        }

        @Override
        public void onBufferReceived(byte[] buffer)
        {

        }

        @Override
        public void onEndOfSpeech()
        {
            //Log.d(TAG, "onEndOfSpeech"); //$NON-NLS-1$
         }

        @Override
        public void onError(int error)
        {
            if (mIsCountDownOn)
            {
                mIsCountDownOn = false;
                mNoSpeechCountDown.cancel();
            }
             mIsListening = false;
             Message message = Message.obtain(null, MSG_RECOGNIZER_START_LISTENING);
             try
             {
                    mServerMessenger.send(message);
             }
             catch (RemoteException e)
             {

             }
            //Log.d(TAG, "error = " + error); //$NON-NLS-1$
        }

        @Override
        public void onEvent(int eventType, Bundle params)
        {

        }

        @Override
        public void onPartialResults(Bundle partialResults)
        {

        }

        @Override
        public void onReadyForSpeech(Bundle params)
        {
            if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN)
            {
                mIsCountDownOn = true;
                mNoSpeechCountDown.start();

            }
            Log.d(TAG, "onReadyForSpeech"); //$NON-NLS-1$
        }

        @Override
        public void onResults(Bundle results)
        {
            //Log.d(TAG, "onResults"); //$NON-NLS-1$

        }

        @Override
        public void onRmsChanged(float rmsdB)
        {

        }

    }
} 
```

2013 年 2 月 16 日 - 如果您在应用程序中使用文本到语音，请修复哔声，确保关闭 onResults 中的 Solo 流

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2014-05-10T08:36:03.403

如果你真的想在没有互联网连接的情况下实现连续收听，你需要考虑第三方包，其中之一是 CMUSphinx，查看[Pocketsphinx android 演示](http://cmusphinx.sourceforge.net/wiki/tutorialandroid)，例如如何在离线时有效地收听关键字并对特定命令做出反应，如关键短语“哦，强大的计算机”。执行此操作的代码很简单：

您创建一个识别器并添加关键字定位搜索：

```
recognizer = defaultSetup()
        .setAcousticModel(new File(modelsDir, "hmm/en-us-semi"))
        .setDictionary(new File(modelsDir, "lm/cmu07a.dic"))
        .setKeywordThreshold(1e-5f)
        .getRecognizer();

recognizer.addListener(this);
recognizer.addKeywordSearch(KWS_SEARCH_NAME, KEYPHRASE);
switchSearch(KWS_SEARCH_NAME); 
```

并定义一个监听器：

```
@Override
public void onPartialResult(Hypothesis hypothesis) {
    String text = hypothesis.getHypstr();
    if (text.equals(KEYPHRASE))
      //  do something
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-07-19T22:00:09.503

对于任何试图使哔哔声静音的人，重新评分@HoanNguyen 答案非常好，但要小心，如 api set setStreamSolo 中所说的那样是累积的，所以如果语音识别中有错误并且错误被调用（例如没有互联网连接）然后 setStremSolo true 被一次又一次地调用，这将导致您的应用程序静音整个手机（非常糟糕）！解决方案是将 setStremMute(false) 添加到 SpeechRecognizer onError。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-16T20:27:20.730

查看我的演示应用程序： [https ://github.com/galrom/ContinuesVoiceRecognition](https://github.com/galrom/ContinuesVoiceRecognition)

我建议同时使用 PockeySphix 和 SpeechRecognizer。

# mongodb - 什么是 Mongoose 错误 Cast to ObjectId failed for value XXX at path "_id"？

> ID：14940660
> 
> 赞同：180
> 
> 时间：2013-02-18T16:18:03.700
> 
> 标签：mongodb, mongoose

当向不存在`/customers/41224d776a326fb40f000001`的文档发送请求时，是并且我正在返回：`_id` `41224d776a326fb40f000001``doc``null``404`

```
 Controller.prototype.show = function(id, res) {
    this.model.findById(id, function(err, doc) {
      if (err) {
        throw err;
      }
      if (!doc) {
        res.send(404);
      }
      return res.send(doc);
    });
  }; 
```

但是，当`_id`与 Mongoose 期望的“格式”（我想）不匹配时，例如`GET /customers/foo`返回一个奇怪的错误：

> CastError：路径“_id”处的值“foo”转换为 ObjectId 失败。

那么这个错误是什么？

* * *

## 回答 #1

> 赞同：232
> 
> 时间：2013-02-18T17:37:11.987

Mongoose 的`findById`方法将`id`参数转换为模型`_id`字段的类型，以便它可以正确查询匹配的文档。这是一个 ObjectId，但`"foo"`不是有效的 ObjectId，因此转换失败。

这不会发生，`41224d776a326fb40f000001`因为该字符串是有效的 ObjectId。

`findById`解决此问题的一种方法是在您调用之前添加一个检查，以查看是否`id`是有效的 ObjectId 或不是这样：

```
if (id.match(/^[0-9a-fA-F]{24}$/)) {
  // Yes, it's a valid ObjectId, proceed with `findById` call.
} 
```

* * *

## 回答 #2

> 赞同：65
> 
> 时间：2014-09-11T22:35:34.397

使用现有函数检查 ObjectID。

```
var mongoose = require('mongoose');
mongoose.Types.ObjectId.isValid('your id here'); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-02-06T11:27:47.327

我不得不将我的路线移动到捕获路线参数的其他路线之上：

```
// require express and express router

const express = require("express");
const router = express.Router();

// move this `/post/like` route on top

router.put("/post/like", requireSignin, like);

// keep the route with route parameter `/:postId` below regular routes

router.get("/post/:postId", singlePost); 
```

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2018-08-13T10:49:37.423

我有同样的问题，我添加了
_id: String .in schema 然后它开始工作

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-02-18T16:48:02.093

您是否将该字符串解析为`ObjectId`？

在我的应用程序中，我所做的是：

```
ObjectId.fromString( myObjectIdString ); 
```

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2021-03-11T11:35:35.207

如果您有两条这样的不同路线，这可能是路线不匹配的情况

```
router.route("/order/me") //should come before the route which has been passed with params
router.route("/order/:id") 
```

那么您必须小心地将使用参数的路线放在对我有用的常规路线之后

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2020-10-18T07:28:32.743

当您将无效的 id 传递给 mongoose 时，就会发生这种情况。所以在继续之前首先检查它，使用猫鼬`isValid`功能

```
import mongoose from "mongoose";

// add this inside your route
if( !mongoose.Types.ObjectId.isValid(id) ) return false; 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-09-18T04:57:19.853

就我而言，我必须添加`_id: Object`到我的架构中，然后一切正常。

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2018-01-22T15:52:03.497

```
 if(mongoose.Types.ObjectId.isValid(userId.id)) {
        User.findById(userId.id,function (err, doc) {
            if(err) {
                reject(err);
            } else if(doc) {
                resolve({success:true,data:doc});
            } else {
                reject({success:false,data:"no data exist for this id"})

            }
        });
        } else {
            reject({success:"false",data:"Please provide correct id"});
        } 
```

最好是检查有效性

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2020-05-13T16:32:01.213

**截至 2019 年 11 月 19 日**

您可以`isValidObjectId(id)`从 mongoose 版本 5.7.12 开始使用

[https://mongoosejs.com/docs/api/mongoose.html#mongoose_Mongoose-isValidObjectId](https://mongoosejs.com/docs/api/mongoose.html#mongoose_Mongoose-isValidObjectId)

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2021-04-20T11:36:02.973

如果上述解决方案不适合您。**检查您是否正在向POST**路由发送**GET**请求。 对我来说就是这么简单和愚蠢。

 *** * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-05-02T14:49:34.203

我最近遇到了类似的问题，并通过捕获错误来确定它是否是 Mongoose ObjectId 错误来解决它。

```
app.get("/:userId", (req, res, next) => {
    try {
        // query and other code here
    } catch (err) {
        if (err.kind === "ObjectId") {
            return res.status(404).json({
                errors: [
                    {
                        msg: "User not found",
                        status: "404",
                    },
                ],
            });
        }
        next(err);
    }
}); 
```

* * *

## 回答 #13

> 赞同：2
> 
> 时间：2016-08-18T13:22:29.090

您还可以使用 ObjectId.isValid ，如下所示：

```
if (!ObjectId.isValid(userId)) return Error({ status: 422 }) 
```

* * *

## 回答 #14

> 赞同：2
> 
> 时间：2020-08-26T20:17:38.043

您可以在查询中使用它之前验证每个 ID（我认为这是最佳做法），

```
// Assuming you are using Express, this can return 404 automatically.
app.post('/resource/:id([0-9a-f]{24})', function(req, res){
  const id = req.params.id;
  // ...
}); 
```

...或者您可以修补 Mongoose 以忽略这些转换错误，而是使用字符串表示来进行查询。您的查询当然不会找到任何东西，但这可能就是您想要发生的事情。

```
import { SchemaType }  from 'mongoose';

let patched = false;

export const queryObjectIdCastErrorHandler = {
  install,
};

/**
 * Monkey patches `mongoose.SchemaType.prototype.castForQueryWrapper` to catch
 * ObjectId cast errors and return string instead so that the query can continue
 * the execution. Since failed casts will now use a string instead of ObjectId
 * your queries will not find what they are looking for and may actually find
 * something else if you happen to have a document with this id using string
 * representation. I think this is more or less how MySQL would behave if you
 * queried a document by id and sent a string instead of a number for example.
 */
function install() {
  if (patched) {
    return;
  }

  patch();

  patched = true;
}

function patch() {
  // @ts-ignore using private api.
  const original = SchemaType.prototype.castForQueryWrapper;

  // @ts-ignore using private api.
  SchemaType.prototype.castForQueryWrapper = function () {
    try {
      return original.apply(this, arguments);
    } catch (e) {
      if ((e.message as string).startsWith('Cast to ObjectId failed')) {
        return arguments[0].val;
      }

      throw e;
    }
  };
} 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2014-04-03T22:45:09.713

我采用了 @gustavohenke 解决方案的改编版，在**包裹原始代码**的 try-catch 中实现了转换 ObjectId，以利用 ObjectId 转换的失败作为验证方法。

```
Controller.prototype.show = function(id, res) {
  try {
    var _id = mongoose.Types.ObjectId.fromString(id);

    // the original code stays the same, with _id instead of id:

    this.model.findById(_id, function(err, doc) {
      if (err) {
        throw err;
      }
      if (!doc) {
        res.send(404);
      }
      return res.send(doc);
    });

  } catch (err) {
    res.json(404, err);
  }
}; 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2020-08-07T01:51:26.063

我遇到了这个问题并修复了`mongoose.ObjectId(id)`没有`Types`

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-04-14T08:52:56.903

```
//Use following to check if the id is a valid ObjectId?

var valid = mongoose.Types.ObjectId.isValid(req.params.id);
if(valid)
{
  //process your code here
} else {
  //the id is not a valid ObjectId
} 
```

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2018-04-18T07:19:04.663

始终在查询中使用`mongoose.Types.ObjectId('your id')`for 条件，它将在运行查询之前验证 id 字段，因此您的应用不会崩溃。

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2018-10-29T03:04:23.777

ObjectId 由以下内容组成。

1.  一个 4 字节的值，表示自 Unix 纪元以来的秒数
2.  一个 5 字节的随机值（机器 ID 3 字节和处理器 ID 2 字节）
3.  一个 3 字节的计数器，从一个随机值开始。

验证 objectId 是否有效的正确方法是使用 ObjectId 类本身的静态方法。

```
mongoose.Types.ObjectId.isValid(sample_object_id) 
```

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2017-09-27T11:10:29.383

这是一个老问题，但您也可以使用 express-validator 包检查请求参数

express-validator 版本 4（最新）：

```
validator = require('express-validator/check');

app.get('/show/:id', [

    validator.param('id').isMongoId().trim()

], function(req, res) {

    // validation result
    var errors = validator.validationResult(req);

    // check if there are errors
    if ( !errors.isEmpty() ) {
        return res.send('404');
    }

    // else 
    model.findById(req.params.id, function(err, doc) { 
        return res.send(doc);
    });

}); 
```

快速验证器版本 3：

```
var expressValidator = require('express-validator');
app.use(expressValidator(middlewareOptions));

app.get('/show/:id', function(req, res, next) {

    req.checkParams('id').isMongoId();

    // validation result
    req.getValidationResult().then(function(result) {

        // check if there are errors
        if ( !result.isEmpty() ) {
            return res.send('404');
        }

        // else
        model.findById(req.params.id, function(err, doc) {
            return res.send(doc);
        });

    });

}); 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2019-06-21T18:08:37.187

**检测和纠正 ObjectID 错误**

我在尝试使用 mongoose 删除项目时偶然发现了这个问题并得到了同样的错误。查看返回字符串后，我发现返回的字符串中有一些额外的空格导致了我的错误。因此，我应用了此处提供的一些答案来检测错误的 id，然后从字符串中删除多余的空格。这是帮助我最终解决问题的代码。

```
const mongoose = require("mongoose");
mongoose.set('useFindAndModify', false);  //was set due to DeprecationWarning: Mongoose: `findOneAndUpdate()` and `findOneAndDelete()` without the `useFindAndModify`

app.post("/delete", function(req, res){
  let checkedItem = req.body.deleteItem;
  if (!mongoose.Types.ObjectId.isValid(checkedItem)) {
    checkedItem = checkedItem.replace(/\s/g, '');
  }

  Item.findByIdAndRemove(checkedItem, function(err) {
    if (!err) {
      console.log("Successfully Deleted " + checkedItem);
        res.redirect("/");
      }
    });
}); 
```

这对我有用，我假设如果其他项目开始出现在返回字符串中，它们可以以类似的方式删除。

我希望这有帮助。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-05-07T07:44:16.900

在我的情况下，参数**id**长度是 25，所以我修剪了参数**id**的第一个字符并尝试了。有效。

> 块引用

```
const paramId = req.params.id;
if(paramId.length === 25){
  const _id = paramId.substring(1, 25);
} 
```

将字符串对象更改为 ObjectId 实例 fromString() 方法不再存在。有一个新方法 createFromHexString()。

```
const _id = mongoose.Types.ObjectId.fromString(id); // old method not available
const _id = mongoose.Types.ObjectId.createFromHexString(id); // new method. 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2017-02-12T07:14:11.550

或者你可以这样做

`var ObjectId = require('mongoose').Types.ObjectId; var objId = new ObjectId( (param.length < 12) ? "123456789012" : param );`

如此处所述，[Mongoose 的带有 $or 条件的 find 方法无法正常工作](https://stackoverflow.com/questions/7382207/mongooses-find-method-with-or-condition-does-not-work-properly)

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2021-01-28T06:55:23.770

我有同样的错误，但情况与问题不同，但也许它对某人有用。

问题是添加带扣：

错误的：

```
 const gamesArray = [myId];

    const player = await Player.findByIdAndUpdate(req.player._id, {
         gamesId: [gamesArray]
    }, { new: true } 
```

正确的：

```
 const gamesArray = [myId];

    const player = await Player.findByIdAndUpdate(req.player._id, {
         gamesId: gamesArray
    }, { new: true } 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2018-09-28T14:04:08.313

我解决此问题的方法是将 id 转换为字符串

我喜欢反引号： ``${id}``

这应该可以解决没有开销的问题

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2022-01-10T11:45:15.467

如果您发送的 id 少于或多于 24 个字符串，则可能会发生

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2018-05-11T13:03:37.237

**将字符串转换为 ObjectId**

```
import mongoose from "mongoose"; // ES6 or above
const mongoose = require('mongoose'); // ES5 or below

let userid = _id
console.log(mongoose.Types.ObjectId(userid)) //5c516fae4e6a1c1cfce18d77 
```

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2022-02-01T02:09:35.813

您所要做的就是将参数名称“id”更改为“_id”

* * *

## 回答 #29

> 赞同：-1
> 
> 时间：2020-02-01T09:08:04.280

我解决了这个问题，改变了路线的顺序。**

# variables - 确定 WEKA 中各个变量的重要性

> ID：14940663
> 
> 赞同：1
> 
> 时间：2013-02-18T16:18:09.377
> 
> 标签：variables, weka, decision-tree, significance

我试图确定单个变量在 LMT（逻辑模型树）DT（决策树）的 WEKA 实现中的重要性。

我想知道每个单独变量在分类任务中的贡献，因此需要确定每个单独变量的重要性。这是为了对我的结果进行更深入的分析。

我已经查看了“选择属性”选项卡和相应的算法（即主成分、信息增益、排名器等）；但是，这些算法提供了有关哪些组合或变量等级将有助于最好（或最有效或最快，取决于您的最终目标，分类器）的信息。

但是，我对排名或选择最重要的变量不感兴趣。我有兴趣确定每个变量对我的 DT 的最终分类分数有多大贡献（例如以百分比形式）。

我已经考虑一个一个地删除每个变量以确定分数如何变化；但我不确定这是否可以手动完成，因为最终分数可能取决于一些潜在的相关性，这就是为什么我想将所有变量一起使用（即使一个变量的贡献为零）做出此决定。

所以，问题是：有没有办法测量分类器中使用的每个单独变量的贡献（即使该贡献为零）？

提前感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T12:17:44.290

以下是一些询问和研究的答案。事实是信息增益不是概率。此属性选择器的结果仅提供有关特征有助于“纯”分类的信息量的信息（整数 (0-1)）。

例如，InfoGain 值为 1 的特征意味着该特征中的所有可用信息都有助于分类，但这并不意味着仅使用该提示就能够进行整个分类。

在许多情况下，分类是不同特征相关性的结果（至少在我使用决策树的经验中）。因此，分析每个决策到达分类的路径是通过其相关性检测线索贡献的一种方法。信息增益算法将每个特征或属性评估为一个单独的实体，而不考虑与它结合以决定类成员资格的其他属性。

# php - CakePHP 1.3：$this->render() 与 $this->element()

> ID：14940669
> 
> 赞同：2
> 
> 时间：2013-02-18T16:18:29.310
> 
> 标签：php, cakephp

除了视图文件的位置之外，使用之间有什么区别（我在视图文件中使用这些调用来处理多个视图文件中使用的小型 HTML 代码）

`echo $this->render('some_view_file', false)`与`echo $this->element('some_view_file')`？

我已经使用了`$this->element()`一段时间，因为我读过的所有教程和指南都使用这种方法，但是我的元素文件夹对于不同的控制器有太多的文件。我最近发现我可以使用`$this->render()`并将视图文件保存在它们各自的文件夹中`app/view/controller_name`，这使得文件组织更容易和更清晰。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T16:22:43.837

**$this->渲染()**

`$this->render()`是您的控制器的代码。它告诉您的控制器操作要渲染哪个文件。默认情况下，您不需要使用它 - 如果您正确命名视图文件并将它们放在正确的文件夹中，它们将自动呈现。（在某些情况下您会使用它，但是 - 它并不适用于所有操作）

**$this->元素()**

`$this->element()`是您的视图中的代码。它用于加载您希望能够在视图中的多个位置或多个视图中使用的小段代码。

根据 CakePHP 的书，“元素”是：

> 更小的、可重用的视图代码。元素通常在视图内部呈现。

所以你应该使用视图，而不是元素作为你的主要“页面”文件，**并且在你的视图中，`$this->element()`用来拉入可重用的代码块。**

# c - 如何使用共享内存在 C Linux 中定义二维字符数组并用字符填充

> ID：14940670
> 
> 赞同：0
> 
> 时间：2013-02-18T16:18:30.263
> 
> 标签：c, linux, ubuntu

我在 Ubuntu 上使用 Eclipse C/C++ IDE，并试图将 2D 定义`char`为父子进程之间的共享内存，并且正在使用它：

```
void fill(char **p)
{
    printf ("int i=0;\n");
    int i=0;
    printf ("int j=0;\n");
    int j=0;
    for(i=0;i<3;i++)
    {
        for(j=0;j<3;j++)
        {
            p[i][j]=' ';
        }
    }
}

int shmid;
char **shmPtr;
if(shmid = shmget(2000, sizeof(char[3][3]), 0)!=-1)
{
    shmPtr = shmat(shmid, 0, 0); //attach shared memory to pointer
    fill(shmPtr);
} 
```

这是定义数组的正确方法吗？在尝试填充这个数组时，我得到一个

# 分段故障

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:18:00.633

正是我所怀疑的。[二维数组不是双指针。](http://c-faq.com/aryptr/aryptr2.html)

```
void fill(char p[3][3])
{
    int i, j;
    for (i = 0; i < 3; i++) {
        for (j = 0; j < 3; j++) {
            p[i][j] = ' ';
        }
    }
}

int shmid = shmget(2000, sizeof(char[3][3]), 0);
char (*shmPtr)[3] = shmat(shmid, 0, 0);
fill(shmPtr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:31:06.783

使用共享内存（实际上通常是动态分配的）时，我建议您使用以下算法来访问 2D 数据，而不是“[i][j]”：

```
*(pointer + row * ncols + col) = ... 
```

此外，您应该使用字符“”而不是字符串“”（这是一个 const char*）。在您的示例中，填充函数将类似于：

```
void fill(char *p, int rows, int cols)
{
    int i, j;
    for(i=0; i<rows; i++)
    {
        for(j=0;j<cols;j++)
        {
            /* p[i][j] = ' '; */
            *(p + i*cols + j) = ' ';
        }
    }
} 
```

另一个更好的是使用 memset：

```
void fill(char *p, int rows, int cols)
{
    memset(p, (int)' ', cols*rows);
} 
```

而且，一个主要样本：

```
int main()
{
    int shmid;
    void *shmPtr;
    char *shm;
    /* create the shared segment */
    if ((shmid = shmget(IPC_PRIVATE, sizeof(char) * (3*3), IPC_CREAT | 0666)) < 0) {
        perror("shmget");
        exit(1);
    }
    /* use it on the parent process */
    if ((shmPtr = shmat(shmid, NULL, 0)) == (char *) -1) {
        perror("shmat");
        exit(1);
    }
    shm = (char *)shmPtr;
    /* fill with spaces */
    fill(shmPtr, 3, 3);
    int i;
    /* some forks, sample */
    for (i = 0; i < 10; i++) {
        if (fork() == 0) {
                ... child workd ...
        }
    }
    ...
    shmctl(shmid, IPC_RMID, NULL);
    return 0;
} 
```

还有一件事，如果可能的话，尝试使用`mmap`而不是 SysV 共享内存。

# git - 每次提交文件时我都必须“git add”吗？

> ID：14940673
> 
> 赞同：9
> 
> 时间：2013-02-18T16:18:31.280
> 
> 标签：git, version-control, mercurial

我以前使用过 Mercurial，但计划在不久的将来切换到 Git。

我看过的所有解释 Git 如何工作的教程都表明，文件在每次提交之前被添加到阶段（'git add'），无论它们之前是否被跟踪过。

Mercurial 也有一个以类似方式工作的命令（'hg add'），但据我记得，你只需要执行一次'add'。例如，新存储库的步骤如下所示：

```
hg init
hg add .
hg commit "Initial commit"
hg push 
```

Git 是否可以使用此工作流程，如果不是，重复“git add”的原因是什么？只是似乎没有必要。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-18T16:21:20.993

git 中的两阶段过程非常强大。尤其是在编辑源代码时，您经常并行进行一些不直接相关的更改。

使用暂存区域，您可以选择要提交的文件，从而为每个逻辑更改创建一个提交。

如果您想一次提交所有更改文件，您可以将`git commit -a`其用作快捷方式。
这会暂存所有更改和删除的文件并提交它们。
请注意：它不会自动添加未跟踪的文件。你仍然必须事先这样做。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-18T16:24:17.017

是的，可以应用相同的一般工作流程，但也可以更有选择性地使用“添加”命令，方法是只向每次提交添加某些文件或文件的某些部分。这使得将逻辑上不同的补丁分成不同的提交变得更容易，从而更容易跟踪和与他人共享。

但是，是的，您可以只使用“git add”。一切都将进入暂存区进行提交。正如另一个答案中提到的，“git commit -a”是一个部分快捷方式（它不会添加新文件，但会将所有更改/删除提交到已跟踪的文件）。试试“git status”看看你的下一次提交中会包含什么，什么不会。

**更新**我还应该注意，对 git add 的补充是“git reset HEAD”，它会从暂存区中删除文件以供您下次提交。此外，如果您有兴趣将单个文件中的编辑分成多个提交，请在 git add 和 git reset 中使用“-p”标志，以便交互式地逐步浏览文件并选择要添加/重置的块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T16:55:06.523

这里应该提到的另一个快捷方式，并不是`git add .`is的重锤`git add -u`。不同之处在于前者将暂存任何未明确忽略的新添加文件（即在输出中列出的所有“未跟踪文件” `git status`），而后者将仅暂存已被跟踪的修改文件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-18T16:21:35.243

因为并非总是希望提交所有更改的文件，所以您可以（并且应该）选择要提交的文件。根据您正在使用的项目架构，有时您会为测试或其他内容执行额外的更改，而不是为生产执行必要的更改。

# java - 如何更新 GridLayout 中的 JTextFields？

> ID：14940674
> 
> 赞同：2
> 
> 时间：2013-02-18T16:18:34.743
> 
> 标签：java, swing, jpanel, jtextfield, paintcomponent

我有一个`MainPanel`使用`Gridlayout`. 因此，我分别`JPanel`为：NORTH、EAST、CENTER 和 EAST 布局创建了四个类。然后我将所有四个添加到我的`MainPanel`.

但是，在我的 WEST 面板上，我使用另一个网格布局来存储`JButtons`和`JTextFields`. 我想在`JTextFields`它们显示一个值时不断更新我的值（当单击另一个面板上的按钮时会发生变化）。如何在`JFrame`运行时更改该值？

我尝试使用，但是当我在我的方法中添加它时`paintComponent`，它会不断添加相同的多个副本。如果我删除 add 方法，值将不会更新。`JTextField``paintComponent`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T23:23:23.937

[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)可以很好地封装此类功能。在下面的示例中，许多文本字段侦听`ActionEvent`从单个`Update`按钮接收到的消息。共同点`UpdateHandler`来源于`AbstractAction`.

![图片](../Images/68309a9d7a9291f6ea77c6ed78fd836f.png)

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.FlowLayout;
import java.awt.event.ActionEvent;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.Date;
import javax.swing.AbstractAction;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextField;

/** @see http://stackoverflow.com/a/14947144/230513 */
public class Test {

    private JButton button = new JButton("Update");

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(createPanel(button), BorderLayout.NORTH);
        f.add(createPanel(button), BorderLayout.WEST);
        f.add(createPanel(button), BorderLayout.EAST);
        f.add(createPanel(button), BorderLayout.SOUTH);
        JPanel p = new JPanel();
        p.add(button);
        f.add(p, BorderLayout.CENTER);
        f.getRootPane().setDefaultButton(button);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    private static JPanel createPanel(JButton b) {
        JPanel panel = new JPanel(new FlowLayout(FlowLayout.CENTER));
        final JTextField text = new JTextField();
        b.addActionListener(new UpdateHandler(text));
        panel.add(text);
        return panel;
    }

    private static class UpdateHandler extends AbstractAction {

        private JTextField text;
        private DateFormat df = new SimpleDateFormat("HH:mm:ss.SSS");

        public UpdateHandler(JTextField t) {
            super("update");
            t.setText(df.format(new Date()));
            this.text = t;
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            text.setText(df.format(new Date()));
        }
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().display();
            }
        });
    }
} 
```

# xslt - XSLT 分析字符串和标记化的正确用法

> ID：14940677
> 
> 赞同：1
> 
> 时间：2013-02-18T16:18:51.187
> 
> 标签：xslt, xslt-1.0, xslt-2.0, tokenize

我正在尝试分析一些巨大的字符串，并且我在 XSLT 中使用了两种不同的方法（一种称为标记化，另一种称为分析字符串）。

假设我有以下字符串：

```
 var ActivitiesData = 
[{"method": {"name": "Bras", "val": "Vegas"}, 
"laundry": "-<a href=\"http://www.site.com\" target=\"_blank\">OnCase</a>:   #9", 
"XSD": "true", 
"stages": [{"name": "on_site", "DB": "12", "OVL": true, "RVT: "BGD"}, {"name": "on_site", "DB": "12", "OVL": true, "RVT": true}], 
"NationalUsage": "Degree", 
"Overlay": 32, 
"Build_Tick": "12", 
"Mozilla": {"Cloud": "Visual", "Decrease": "10"}, 
"updates": "XXX", 
}] 
```

当我尝试创建每个数据的项目时，我的问题就出现了。我的正则表达式如下， (.,',\s+"') -这意味着每次匹配 a , ' 时，我都可以将一个数据与另一个数据区分开来。

但，

在阶段数据中，我也有这些字符串 (, ')，因此我将它们创建为单独的项目，而我想将它们创建为阶段的子项 - 创建一个名为 <stage-itmes> 的特殊项目元素。

也就是说，只有当我看到以以下字符“[{”（如分阶段）开头的数据时，我才想以某种方式将文本（。'）重新格式化为其他内容，因此将来我将使用此标记化字符串(, ') 这些字符串不匹配。

我希望我能够清楚地解释自己，我可能使用了错误的方法来做到这一点。我想得到的最终结果是：

```
 <item>
    "method": {"name": "Bras", "val": "Vegas"}, 
</item>
<item>
    "laundry": "-<a href=\"http://www.site.com\" target=\"_blank\">OnCase</a>:   #9", 
</item>
<item>
    "XSD": "true", 
</item>
<item>
    "stages": [{"name": "on_site", "DB": "12", "OVL": true, "RVT: "BGD"}, {"name": "on_site", "DB": "12", "OVL": true, "RVT": true}], 
</item>

..and so on.. 
```

那是我在尝试捕获这些阶段数据时使用的分析字符串，以便将字符串 (, ') 替换为独特的东西，以后不会在我的标记化中捕获并将创建单个元素：

```
<xsl:variable name="pTokenize">    

<xsl:analyze-string select="normalize-space($activitiesDataText)" regex="(&quot;stages&quot;:[^\]]*)">
    <xsl:matching-substring>
        <xsl:value-of select="replace(regex-group(1), ', &apos;', ',-&apos;')"/>
    </xsl:matching-substring>
    <xsl:non-matching-substring>
        <xsl:value-of select="regex-group(1)"/>
    </xsl:non-matching-substring>
</xsl:analyze-string>

</xsl:variable> 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T04:04:29.987

**您可以在[此处](http://dnovatchev.wordpress.com/2007/07/05/transforming-json/)找到一个完全用 XSLT 2.0 编写的针对 json.org 中描述的 JSON 语法的解析器**——这不是完整的或官方的 JSON 语法，因此解析器可能会或可能不会处理您的数据——只需给它一个尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:52:45.430

你已经给出了一个示例字符串，但你没有向我们展示它的语法。它看起来很像 JSON，如果是这种情况，那么它是递归语法而不是正则语法，这意味着它无法使用正则表达式进行解析。

有很多实用程序可以将 JSON 转换为 XML，包括可以从 XSLT 调用的实用程序（Saxon 有一个 parse-json 扩展函数）。或者您可以编写自己的解析器：Dimitre Novatchev 提供了用 XSLT 编写的复杂解析器的示例，Gunther Rademacher 发布了 REX，这是一个从语法的 XML 描述生成解析器的工具。

我相当怀疑，因为您尝试以错误的方式执行此操作，因此您对解析很陌生，在这种情况下，我建议您先阅读该主题，然后再进一步。

# c# - 在 IIS 中部署后 SQL 服务器连接失败？

> ID：14940679
> 
> 赞同：0
> 
> 时间：2013-02-18T16:19:02.980
> 
> 标签：c#, asp.net, vb.net, sql-server-2008

当我编码时，下面的代码工作正常。我在 IIS 中发布代码，然后连接失败。

我知道，当我编码时将我的窗口登录作为凭据，而在 IIS 中它正在使用 AppPool Identity。如何将我的 Windows 登录凭据传递给连接字符串？

```
Public Shared Function DbCollection(connectionString As String) As DatabaseCollection
   Dim server As New Microsoft.SqlServer.Management.Smo.Server(connectionString)
   Return server.Databases
End Function 
```

错误：

```
 Login failed for user 'Domain\Computername$'. 
    Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

    Exception Details: System.Data.SqlClient.SqlException: Login failed for user
 'Domain\Computername$'. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:22:15.330

根据错误，您的 SQL 可能与 IIS 不在同一个框...这里有不同的可能选项，具体取决于配置：

*   如果您没有在同一个框中使用 SQL 身份验证和 SQL：您应该能够使用[HttpContext.CurrentUser](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.user.aspx)获取用户凭据并[使用这些凭据进行模拟](http://msdn.microsoft.com/en-us/library/w070t6ka.aspx?cs-save-lang=1&cs-lang=vb#code-snippet-2)，但这在很大程度上取决于您的系统设置。可能您已经在模拟（ASP.Net 中的默认配置），但如果您的服务器与 IIS 位于不同的机器上，那么普通用户的凭据将无法浮动到其他机器（搜索术语“NTLM one hop”）。
*   您的数据库在另一台服务器上，并且您已经在组织中使用 Kerberos 身份验证：我认为您[必须使用 Kerberos 进行身份验证](http://blogs.msdn.com/b/besidethepoint/archive/2010/05/09/double-hop-authentication-why-ntlm-fails-and-kerberos-works.aspx)才能在另一台服务器上模拟。请注意，如果未配置/允许此类身份验证，则不太可能仅针对您的情况启用。
*   使用 Windows 身份验证的另一台服务器上的数据库 - 您可以在特定用户帐户下运行所有​​ SQL 查询（或 RevertToSelf 和一大堆互操作以在进程帐户下运行）。
*   任何地方的数据库，您都可以使用 SQL 身份验证——只要在您的组织中可以使用，这是最简单的方法。如果使用此方法，请考虑加密配置文件中的连接字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:25:48.593

我会在@smoore 的帖子中补充一点，这在很大程度上取决于连接字符串和允许传入连接的 sql 服务器的配置。它可能被设置为只允许 sql 用户，而不是从问题描述中看起来的 windows 用户。您能否提供连接字符串的详细信息（在粘贴之前匿名/删除用户/密码！）以及 sql server 实例允许哪种身份验证模式？

# c++ - 列出 gdb 中类的所有功能

> ID：14940682
> 
> 赞同：1
> 
> 时间：2013-02-18T16:19:13.820
> 
> 标签：c++, gdb, g++

我正在尝试学习使用 gdb 进行调试。我已经开始了。

我只想知道是否可以列出一个类的所有函数，包括编译器提供的默认函数？

甚至不使用IDE的其他方式

谢谢

==================================================== ============================

我正在尝试的代码：

```
#include <iostream>

class MyClass
{
    public:
        void Hello() {
        }
        int a;
};

int main(int argc, char **argv)
{
    MyClass a;
    MyClass b = a;
    MyClass c;
    c = a;
    return 0;
} 
```

=更新3================================================ ======================

如果可能的话，我还想在 gdb 中列出编译器提供的函数名称。

我的问题是除了发布在的问题之外

[如何在 gdb 中列出类方法？](https://stackoverflow.com/questions/3956024/how-to-list-class-methods-in-gdb)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-24T11:15:47.533

你写的类太简单了。这个建议：

> 在 gdb 中加载可执行文件后，键入 break（或 b）并按 Tab 键。

一般来说是正确的，但在你的情况下，MinGW 不会为 MyClass 创建任何东西。我用 MinGW 编译了你的程序并反汇编了它：

```
(gdb) disassemble /m main
Dump of assembler code for function main(int, char**):
13      {
   0x0040138c <+0>:     push   %ebp
   0x0040138d <+1>:     mov    %esp,%ebp
   0x0040138f <+3>:     and    $0xfffffff0,%esp
   0x00401392 <+6>:     sub    $0x10,%esp
   0x00401395 <+9>:     call   0x40193c <__main>

14          MyClass a;
15          MyClass b = a;
   0x0040139a <+14>:    mov    0xc(%esp),%eax
   0x0040139e <+18>:    mov    %eax,0x8(%esp)

16          MyClass c;
17          c = a;
   0x004013a2 <+22>:    mov    0xc(%esp),%eax
   0x004013a6 <+26>:    mov    %eax,0x4(%esp)

18          return 0;
   0x004013aa <+30>:    mov    $0x0,%eax

19      }
   0x004013af <+35>:    leave
   0x004013b0 <+36>:    ret

End of assembler dump. 
```

如您所见，仅移动指令。例如，您的分配`c = a;`只产生两个移动指令并且没有函数调用：

```
0x004013a2 <+22>:    mov    0xc(%esp),%eax
0x004013a6 <+26>:    mov    %eax,0x4(%esp) 
```

如您所见，编译器选择不为您的类生成任何内容。在我看来，你选择了太简单的例子来学习你想要的。

我让你的例子更复杂一点

```
#include <iostream>

class MyClass
{
    public:
        void Hello()
        {
          std::cout << "Hello\n";
        }
        int a;
};

int main(int argc, char **argv)
{
    MyClass a;
    a.Hello();
    MyClass b = a;
    MyClass c;
    c = a;
    return 0;
} 
```

在`gdb`休息下我显示了这个：

```
(gdb) b MyClass
MyClass           MyClass::Hello()
(gdb) b MyClass 
```

这是 nm 的输出：

```
D:\src-c++\test.names>nm -C ./m.exe | grep MyClass
00404060 r .eh_frame$_ZN7MyClass5HelloEv
00401c20 t .text$_ZN7MyClass5HelloEv
00401c20 T MyClass::Hello() 
```

> 我只是想看看类生成的默认函数是什么，如果不写的话

将成员类变量从 'int a' 更改为 std::string a ，您将看到编译器生成的默认函数

```
#include <iostream>
#include <string>

class MyClass
{
public:
  void Hello() {
  }
  std::string a;
};

int main(int argc, char **argv)
{
  MyClass a;
  MyClass b = a;
  MyClass c;
  c = a;
  return 0;
} 
```

这些是编译生成的函数：

```
>nm -C ./a.out | grep My
00000000004009b8 W MyClass::MyClass(MyClass const&)
0000000000400964 W MyClass::MyClass()
000000000040097c W MyClass::~MyClass()
0000000000400994 W MyClass::operator=(MyClass const&) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:25:57.983

在 gdb 中加载可执行文件后，键入`break`(或`b`) 并按 Tab 键。这将为您提供 gdb 可以设置断点的符号列表。很多时候 gdb 会问你是否真的想要显示所有的可能性（有时有数千种可能性）。

如果您对可能调用的函数有所了解，请键入函数名称的前几个字符并点击制表符。这会将结果的数量减少到可管理的大小。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-18T16:23:22.147

例如，当使用 break 时，键入“break”空格单引号 (') 类名称，然后按 TAB。它将列出候选人，包括生成的代码。

IE`break 'PotatoLaucher::<tab>`

# php - 使用 JSON 从 Ajax 调用返回多行

> ID：14940688
> 
> 赞同：0
> 
> 时间：2013-02-18T16:19:42.467
> 
> 标签：php, javascript, jquery, ajax

我目前正在尝试从我正在对连接到 MySql 数据库的 PHP 文件进行的 ajax 调用中检索多行。

我的代码如下所示：

**jQuery/HTML**

```
<script>
$(document).ready(function(){

function getComments(){
var boxid = document.location.hash.substring(1); // remove #    
    $.ajax({ //Make the Ajax Request
             type: "POST",
             url: "getComments.php", //file name
             data: {boxid: boxid},
             success: function(server_response){        
                var data = $.parseJSON(server_response);
                var html = '', comment;
                for(var i = 0; i < data.length; i++){
                    comment = data[i];
                    html += '<div id="' + comment.user_id + '"><span>' + comment.username + '</span><span>' + comment.comment + '</span></div>';
                }
                $('#ajax_comment').html(html);

             }
         });
}

});
</script>
<span name="ajax_comment" id="ajax_comment"></span> 
```

**PHP (getComments.php)**

```
session_start();
include('config.php');
if (isset($_SESSION['userid']))
$userid = $_SESSION['userid'];
else
$userid = 0;

if (isset($_POST['boxid']))
{
$knownid = $_POST['boxid'];
$query = mysql_query("SELECT u.id, u.USERNAME, c.COMMENT, c.DATE_ADDED, c.ACTIVE, c.id FROM ratemybox.USERS u, ratemybox.COMMENTS c WHERE u.id = c.user_id and c.box_id = $knownid ORDER BY c.DATE_ADDED DESC");

$result = mysql_fetch_array($query);
$results = array();
foreach($result as $row)
{
    $user_id = $row['id'];
    $username = $row['username'];
    $comment = $row['comment'];
    $dateAdded = $row['date_added'];

    $results[] = array("user_id" => $user_id, "username" => $username, "comment" => $comment, "date_added" => $dateAdded);
}

echo json_encode($results);
} 
```

这没有产生我期望的结果。任何建议都会很棒。

**编辑**

使用 Firebug 时出现以下错误：

```
Illegal string offset 'id' in 
Illegal string offset 'username'
Illegal string offset 'comment'
Illegal string offset 'date_added' 
```

不确定这是否有帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:25:08.523

在您的选择查询中，您尝试按 $knownid 进行过滤，但是，您将变量保留在引号内。尝试更改为：

```
 $query = mysql_query("SELECT u.id, u.USERNAME, c.COMMENT, c.DATE_ADDED, c.ACTIVE, c.id FROM ratemybox.USERS u, ratemybox.COMMENTS c WHERE u.id = c.user_id and c.box_id = " . $knownid . " ORDER BY c.DATE_ADDED DESC"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:37:29.447

除了已经给出的许多建议（您确实需要在将 $_POST["boxid"] 添加到查询之前将其转义）之外，很难找到代码的问题而不会出现一些错误。

尝试在 foreach 之前添加 var_dump($result) 以确保您的查询正在返回某些内容，或者检查浏览器的控制台以查看服务器实际返回的内容。

# ruby-on-rails - Rails：我什么时候使用 Apache 用户，什么时候在我的自动化任务中使用 Rails 用户？

> ID：14940690
> 
> 赞同：0
> 
> 时间：2013-02-18T16:19:50.757
> 
> 标签：ruby-on-rails, apache

我目前正在使用 RoR 进行实习。我很难理解要`sudo su myuser rake myraketask`成为哪个用户。我什么时候使用 rails app 用户，什么时候在我的任务中使用 apache 用户？我知道将它们都设置为同一个用户是一种很好的做法，但这使得我很难理解我需要使用哪个用户。什么时候使用 Rails 用户？什么时候使用 Apache 用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:22:53.170

为了安全起见，我总是以运行 Web 服务的用户身份运行任务，除非您特别需要它们以 root 身份运行。

# java - 从junit测试中读取平面文件

> ID：14940692
> 
> 赞同：0
> 
> 时间：2013-02-18T16:19:57.720
> 
> 标签：java, file, junit

我正在尝试设置一个 junit 测试，该测试读取一个 pdf 文件以传递给我的方法，该方法接受一个 File 参数。我遇到的问题是我似乎无法找到 pdf 文件。

我需要它在 eclipse 内部作为单个测试工作，并且一旦测试被压缩到我们的自动构建的 jar 文件中。

为简单起见，我将 postcard.pdf 放在 junit 测试类旁边。这是我尝试过的最后一件事。

```
URL url = getClass().getClassLoader().getResource("postcard.pdf");
URI uri = url.toURI();
File file = new File(uri);
javamailService.sendMessage(MAILUSER, REPLY_TO, SUBJECT, file, MimeType.pdf);
fail("Not yet implemented"); 
```

请帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:31:23.537

通常我只需要更改路径以使其适用于测试数据：

```
File file = new File("./testdata/pdftest/test.pdf"); 
```

但是，如果在你的情况下这不起作用，那么通过定义一个`IFileProvider`接口来“模拟”文件。

```
public interface IFileProvider {
  File getFile(URI uri);
} 
```

在junit测试中使用

```
class DummyPdfFileProvider implements IFileProvider {
    File getFile(URI uri) {
       // ignore uri
       return new File("./testdata/test.pdf");
    }
} 
```

在真实代码中使用

```
class PdfFileProvider implements IFileProvider {
    File getFile(URI uri) {
       // ignore uri
       return new File(uri);
    }
} 
```

现在更改真实代码以使用`PdfFileProvider`

```
IFileProvider fileProvider = new PdfFileProvider();

URL url = getClass().getClassLoader().getResource("postcard.pdf");
URI uri = url.toURI();
File file = fileProvider.getFile(uri);
javamailService.sendMessage(MAILUSER, REPLY_TO, SUBJECT, file, MimeType.pdf);
// and remove the fail below:
//fail("Not yet implemented"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:56:10.683

尝试使用下面的代码，将 test.pdf 保持在根级别。Java Mails Service API 支持将附件添加为 InputStream/InputStreamSource。

```
InputStream configStream = getClass().getResourceAsStream("test.pdf"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:59:50.740

您可以将文件（postcard.pdf）包含在类路径中——通过添加到 jar 并将其添加到类路径中。然后使用[getAsResourceStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/ClassLoader.ht)获取文件并将流写入[临时文件](https://stackoverflow.com/questions/43157/easy-way-to-write-contents-of-a-java-inputstream-to-an-outputstream)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-22T17:12:00.207

我最终只是编写了一个相对路径。谢谢您的帮助。

# excel - Excel VBA 全局错误处理

> ID：14940697
> 
> 赞同：6
> 
> 时间：2013-02-18T16:20:28.440
> 
> 标签：excel, vba

有没有办法进行全局错误处理？

我可以在工作簿代码中添加一些代码来捕获所有模块中发生的任何错误吗？

我可以在每个模块中放置相同的错误处理程序，但我正在寻找更通用的东西。

我问是因为我有像这样存储为全局变量的工作表名称`Sheets(QuoteName)`。如果出现错误，则这些全局变量将丢失。我有一个宏可以重命名全局变量，但我把它放在`Workbook_BeforeSave`.

**如果我收到下标超出范围**错误，我希望它转到全局错误处理程序并重命名全局变量`Sheets(QuoteName)`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T21:31:37.880

正如 Sid 在评论中已经提到的，没有中央错误处理程序。

最佳实践是有一个从本地错误处理程序调用的中央错误处理例程。看看伟大的[MZ-Tools](http://www.mztools.com/v3/mztools3.aspx)：它可以在按下按钮 ( `Ctrl`- `E`) 时定义默认错误处理程序。您可以自定义此错误处理程序 - 它还可以包含模块和/或子名称！

此外，请查看[Excel 每日剂量中的](http://dailydoseofexcel.com/archives/2012/03/06/custom-error-object/)这篇文章。这是 Dick Kusleika 在[本书](https://rads.stackoverflow.com/amzn/click/com/0321508793)中提出的错误处理程序的 OO 版本（我强烈推荐）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-10-16T12:58:04.297

这是我为解决访问问题而拼凑的一些代码

它在所有子程序中进行错误检查，但不在函数中。subs 必须有一个父表单（ACCESS），或者，您必须手动输入表单名称。超过一条线的潜艇将被无情地打击。

两个潜艇必须位于模块的底部。

*   **globalerror**是您的错误管理例程
*   **CleaVBA_click**更改您的 VBA 代码，将行号添加到所有内容

globalerror 查看一个布尔全局**错误跟踪**以查看它是记录所有内容还是仅记录错误

有一个必须创建的表 ErrorTracking 否则只需从 1990 到 2160 注释掉

运行时，它会删除然后将行号添加到项目中的所有内容，因此您的错误消息可以包含一行 #

不确定它是否适用于我编码的东西以外的任何东西。

一定要在你的 VBA 的副本上运行和测试，因为它会重写项目中的每一行代码，如果我搞砸了，而你没有备份，那么你的项目就坏了。

```
 Public Sub globalerror(Name As String, number As Integer, Description As String, source As String)

    1970  Dim db As DAO.Database
    1980  Dim rst As DAO.Recordset

    1990  If errortracking Or (Err.number <> 0) Then
    2000     Set db = CurrentDb
    2010     Set rst = db.OpenRecordset("ErrorTracking")
    2020     rst.AddNew

    2030     rst.Fields("FormModule") = Name
    2040     rst.Fields("ErrorNumber") = number
    2050     rst.Fields("Description") = Description
    2060     rst.Fields("Source") = source
    2070     rst.Fields("timestamp") = Now()
    2080     rst.Fields("Line") = Erl

    2100     rst.Update
    2110     rst.Close
    2120     db.Close
    2130  End If

    2140  If Err.number = 0 Then
    2150     Exit Sub
    2160  End If

    2170  MsgBox "ERROR" & vbCrLf & "Location: " & Name & vbCrLf & "Line: " & Erl & vbCrLf & "Number: " & number & vbCrLf & "Description: " & Description & vbCrLf & source & vbCrLf & Now() & vbCrLf & vbCrLf & "custom message"

    2180  End Sub

    Private Sub CleanVBA_Click()

        Dim linekill As Integer
        Dim component As Object
        Dim index As Integer
        Dim str As String
        Dim str2a As String
        Dim linenumber As Integer
        Dim doline As Boolean
        Dim skipline As Boolean
        Dim selectflag As Boolean
        Dim numstring() As String

        skipline = False
        selectflag = False
        tabcounter = 0

        For Each component In Application.VBE.ActiveVBProject.VBComponents

            linekill = component.CodeModule.CountOfLines
            linenumber = 0
            For i = 1 To linekill

                str = component.CodeModule.Lines(i, 1)
                doline = True

                If Right(Trim(str), 1) = "_" Then
                    doline = False
                    skipline = True
                End If

                If Len(Trim(str)) = 0 Then
                    doline = False
                End If

                If InStr(Trim(str), "'") = 1 Then
                    doline = False
                End If

                If selectflag Then
                    doline = False
                End If

                If InStr(str, "Select Case") > 0 Then
                    selectflag = True
                End If

                If InStr(str, "End Select") > 0 Then
                    selectflag = False
                End If

                If InStr(str, "Global ") > 0 Then
                    doline = False
                End If

                If InStr(str, "Sub ") > 0 Then
                    doline = False
                End If

                If InStr(str, "Option ") > 0 Then
                    doline = False
                End If

                If InStr(str, "Function ") > 0 Then
                    doline = False
                End If

                If (InStr(str, "Sub ") > 0) Then

                    If InStr(component.CodeModule.Lines(i + 1, 1), "On Error GoTo error") <> 0 Then
                        GoTo skipsub
                    End If

                    str2a = component.CodeModule.Name

                    index = InStr(str, "Sub ")  ' sub
                    str = Right(str, Len(str) - index - 3)    ' sub

                    '           index = InStr(str, "Function ") ' function
                    '             str = Right(str, Len(str) - index - 8) 'function

                    index = InStr(str, "(")
                    str = Left(str, index - 1)

                    varReturn = SysCmd(acSysCmdSetStatus, "Editing: " & str2a & " : " & str)
                    DoEvents

                    If (str = "CleanVBA_Click") Then
                        MsgBox "skipping self"
                        GoTo selfie
                    End If

                    If str = "globalerror" Then
                        MsgBox "skipping globalerror"
                        GoTo skipsub
                    End If

                    component.CodeModule.InsertLines i + 1, "On Error GoTo error"
                    i = i + 1
                    linekill = linekill + 1

                    component.CodeModule.InsertLines i + 1, "error:"
                    i = i + 1
                    linekill = linekill + 1

                    component.CodeModule.InsertLines i + 1, "Call globalerror(Me.Form.Name & """ & "-" & str & """, Err.number, Err.description, Err.source)"
                    i = i + 1
                    linekill = linekill + 1

                    component.CodeModule.InsertLines i + 1, " "
                    i = i + 1
                    linekill = linekill + 1

                    If (str = "MashVBA_Click") Then
                        MsgBox "skipping self"
                        MsgBox component.CodeModule.Name & " " & str
                        GoTo selfie
                    End If
                Else
                    If skipline Then
                        If doline Then
                            skipline = False
                        End If
                        doline = False
                    End If
                    If doline Then
                        linenumber = linenumber + 10
                        numstring = Split(Trim(str), " ")
                        If Len(numstring(0)) >= 2 Then
                            If IsNumeric(numstring(0)) Then
                                str = Replace(str, numstring(0), "")
                            End If
                        End If
                        component.CodeModule.ReplaceLine i, linenumber & " " & str

                    End If

                End If
    skipsub:

            Next i
    selfie:
        Next

        varReturn = SysCmd(acSysCmdSetStatus, " ")
        MsgBox "Finished"
    End Sub 
```

# jquery - mouseleave 上的 jQuery animate() 回调不会触发

> ID：14940698
> 
> 赞同：0
> 
> 时间：2013-02-18T16:20:39.970
> 
> 标签：jquery, callback, jquery-animate

我有一个两步动画，它在 mouseenter 上触发一次，在 mouseleave 上触发一次。

如果我只有一个元素，那效果很好，但如果我有多个元素并且从一个元素悬停到另一个元素，则 animate() 的回调不会触发，这会打乱动画。

```
$('#userIndex .item').mouseenter(function() {
    $this = $(this).find('.inner');     
    $this.animate({
       'opacity': '0.1'
    }, 100, 'linear', function(){
      $this.find('.front').hide();
      $this.find('.back').show();      
      $this.animate({
        'opacity': '1'
      }, 100);
    });
  }).mouseleave(function() {
    $this = $(this).find('.inner');
    $this.animate({
      'opacity': '0.1'
    }, 100, 'linear', function(){
      $this.find('.back').hide();
      $this.find('.front').show();
      $this.animate({
        'opacity': '1'
      }, 100);
    });
  }); 
```

示例：http: [//jsfiddle.net/3KuxS/](http://jsfiddle.net/3KuxS/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:31:42.080

看起来像一个简单的范围问题。

**[jsFiddle 示例](http://jsfiddle.net/j08691/3KuxS/3/)**

改变：

```
$this = $(this).find('.inner'); 
```

到

```
var  $this = $(this).find('.inner'); 
```

# css - CSS悬停在鼠标悬停时消失

> ID：14940700
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:20:43.270
> 
> 标签：css, image, hover

我只是想做一张上面有不同地点/点的地图。如果将箭头/鼠标拉到其中一个点上，则位于该点上的透明图像应更改为带有名称的图像。所以这将是一个改变图像的悬停。但是 - 它完全出错了。带有名称的图像一直都在那里，当我将鼠标拉到它上面时，就会出现透明的图像。我尝试更改图片，但没有成功。

的CSS：

```
.nutbrown img { 
position:absolute;
margin:497px 642px 247px 380px;
background:url("test1.png") no-repeat;
height: 20px;
text-decoration: none;
}

.nutbrown:hover img {
position:absolute;
height: 20px;
visibility:hidden;
text-decoration: none;
} 
```

的HTML

```
<div class="nutbrown"> <img src="test.png" /></div> 
```

我究竟做错了什么？谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:24:12.977

因为这`visibility:hidden;`

当您悬停 .nutbrown 时，您告诉 CSS 隐藏 .nutbrown 中的每个图像

# java - Java：接收具有多个 DatagramSockets 的 UDP 数据包

> ID：14940702
> 
> 赞同：2
> 
> 时间：2013-02-18T16:20:47.033
> 
> 标签：java, udp, datagram

我正在尝试实现一种将 UDP 数据包发送到多个接收器的方法。我认为这应该是`setReuseAddress(true)`接收 DatagramSocket 实例的可行设置。

我的问题是，在某些情况下，我需要限制与本地计算机的通信——因此是 localhost 接口（下面的演示代码中的 useLocalhost=true）。在这种情况下，突然只有第一个接收器套接字获得传入的数据包，另外两个什么都看不到。

我在 Windows（oracle 64 位）和 Linux（OpenJDK 64 位）上对此进行了测试，因此我只看到了三种可能性：

1.  这是一种预期且已知的行为（我不了解整个机制 - 也就是“我的大脑中的错误”）
2.  Java JRE 中有一个错误
3.  我的代码中有一个错误。

## **有人在该主题上有任何经验吗？我可以帮助确定问题所在吗？**

请参阅下面的一个最小工作示例来演示这一点。**请注意，我使用广播地址来模拟来自真实外部主机的网络数据包。**

如果一切顺利，您应该在最后看到三行（按此顺序或不同顺序）：

```
Thread-0 - packet received
Thread-1 - packet received
Thread-2 - packet received 
```

```
public static void main(String[] args) throws Exception {

    boolean useLocalhost = true;

    InetSocketAddress addr;
    String sendPacketTo = "192.168.1.255"; // we use broadcast so that packet comes from an real external address
    if (useLocalhost)
        sendPacketTo = "localhost"; // does not work (only listener 1 received packet)

    addr = new InetSocketAddress(15002);

    new MyThread(addr).start(); // Datagram socket listener 1
    new MyThread(addr).start(); // Datagram socket listener 2
    new MyThread(addr).start(); // Datagram socket listener 3

    DatagramSocket so = new DatagramSocket();
    so.setBroadcast(true); // does not change anything
    so.connect(new InetSocketAddress(sendPacketTo, 15002));
    so.send(new DatagramPacket("test".getBytes(), 4));
    Thread.sleep(1000);
    System.exit(0);
}

public static class MyThread extends Thread {

    DatagramSocket socket;

    public MyThread(InetSocketAddress addr) throws SocketException {
        super();
        setDaemon(true);
        socket = new DatagramSocket(null);
        socket.setReuseAddress(true);
        socket.setBroadcast(true); // does not change anything
        socket.bind(addr);
        System.out.println("Listener started: " + socket.getLocalAddress());
    }

    public void run() {
        byte[] buf = new byte[10];
        DatagramPacket p = new DatagramPacket(buf, buf.length);
        try {
            socket.receive(p);
            System.out.println(Thread.currentThread().getName() + " - packet received");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:59:28.513

192.168.1.255 is a broadcast address, so the datagram is broadcast, under the rules for UDP broadcast. 127.0.0.1 is a unicast address, so the packet is unicast. So you get different behaviour.

As @DavidSchwartz commented, your code is a mixture. Connecting to a broadcast address for example doesn't have a lot of meaning, and neither does binding to it. I think what you are looking for is multicast.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-02T19:11:21.947

您可以在 localhost 上使用多播 但是，您需要注意几件事才能使其正常工作。

示例：lo0 (127.0.0.1) en0 (192.168.0.111) en1 (10.1.0.111)

1.  每个接口有 2 个独立的套接字，一个用于接收，一个用于发送。在上面的示例中，这意味着总共创建 6 个套接字。
2.  永远不要绑定（）将**发送**多播 UDP 数据包的套接字。
3.  始终 bind() 一个将**接收**多播 UDP 数据包的套接字。切勿在调用 bind() 后尝试设置多播套接字或重新配置多播套接字。相反，当机器的接口由于电缆被拔出/插入而发生变化时，销毁所有发送/接收多播套接字并重新创建它们。

示例代码： iMulticastSocketInterfaceIPAddress 将是三个接口之一

```
 /* use setsockopt() to request that the kernel join a multicast group */
     struct ip_mreq mreq;
     mreq.imr_multiaddr.s_addr=inet_addr( "239.192.0.133" );
     myAddress.sin_addr.s_addr = mreq.imr_multiaddr.s_addr;         
     mreq.imr_interface.s_addr=( htonl(iMulticastSocketInterfaceIPAddress) );
     theErr = setsockopt( CFSocketGetNative( mSocketBroadcast ) ,IPPROTO_IP,IP_ADD_MEMBERSHIP,&mreq,sizeof(mreq)); 
```

# css - 自定义 CSS：在标题中使用多合一 Cufon

> ID：14940704
> 
> 赞同：0
> 
> 时间：2013-02-18T16:20:54.447
> 
> 标签：css, wordpress, fonts, cufon

[我的网站](http://www.shaunhillphotography.co.uk)上安装了 All-In-One Cufon 。我喜欢它目前的工作方式，使用`Cufon.replace('h1')('h2')('h3')("h4")("h5")("h6")("pre")("abbr");`. 但是，我希望标题链接也使用 Cufon 出现。我也将它设置为（“a”），但这改变了网站上的所有链接，现在看起来错了。

有没有人有办法让标题链接使用Cufon显示，而不使用（“a”）标签（否则使用相同的过程呈现所有大小的所有链接）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:49:33.020

更改`Cufon.replace('h1')('h2')('h3')("h4")("h5")("h6")("pre")("abbr");`为以下内容应该有效：

```
 Cufon.replace('h1')('h2')('h3')("h4")("h5")("h6")("pre")("abbr")('h1 a')('h2 a')('h3 a')('h4 a')('h5 a')('h6 a'); 
```

或者：

```
Cufon.replace('h1, h2, h3, h4, h5, h6, abbr, pre, h1 a, h2 a, h3 a, h4 a, h5 a, h6 a'); 
```

也应该工作。

选择器`a`将选择所有锚元素，而选择器`h1 a`将选择包含在 h1 元素中的所有锚元素。谷歌 CSS 选择器和特性以获取更多信息。

# javascript - jQuery 选择器中的波浪号

> ID：14940706
> 
> 赞同：5
> 
> 时间：2013-02-18T16:21:04.910
> 
> 标签：javascript, jquery, css, css-selectors, jquery-selectors

我对 Javascript 中波浪号功能的理解是它执行按位非运算（即 1 变为 0，反之亦然；1000 变为 0111）。但是，我最近开始研究一个现有项目，其中我的前任包含了很多这样的代码：

```
var iValuation = $('div[class~="iValuation"]'); 
```

谁能告诉我在这种情况下波浪号的目的是什么？我以前没有遇到过它，也无法在网上找到任何关于它的参考。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T16:22:33.617

平铺用作选择器

> 选择具有指定属性的元素，其值包含给定单词，由空格分隔。

这根本不是 JavaScript 运算符。

更多来自文档：

> 此选择器将测试字符串与属性值中的每个单词匹配，其中“单词”定义为由空格分隔的字符串。如果测试字符串完全等于任何单词，则选择器匹配。

例如：

```
<input name="man-news" />
<input name="milk man" />
<input name="letterman2" />
<input name="newmilk" /> 
```

`$('input[name~="man"]')`将只选择第二个`input`，因为它的属性由 .`name`分隔`space`。

详情请看***[这里](http://api.jquery.com/attribute-contains-word-selector/)***

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:23:01.637

那不是 JavaScript 运算符。它出现在一个字符串中。

由于该字符串被传递给 jQuery 函数，而且它看起来不像是一段 HTML，因此它是一个[选择器](http://www.w3.org/TR/selectors/)。

特别是[属性选择器](http://www.w3.org/TR/selectors/#attribute-selectors)之一：

> 表示具有 att 属性的元素，其值为以空格分隔的单词列表，其中一个恰好是“val”。如果“val”包含空格，它永远不会代表任何东西（因为单词是用空格分隔的）。此外，如果“val”是空字符串，它永远不会代表任何东西。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-18T16:24:41.947

`$`是`jQuery`选择器函数，其中包含一个`CSS3`选择器字符串：根据[`CSS3`选择器定义](http://www.w3.org/TR/selectors/)，你遇到的选择器选择：

> E[foo~="bar"] 一个 E 元素，它的 "foo" 属性值是一个由空格分隔的值的列表，其中一个值正好等于 "bar"

在`DOM`. 因为波浪号被包裹在一个字符串中，所以它不能用作运算符。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-29T20:10:21.127

如果您想知道两者之间的**区别**

```
[class~="foo"] 
```

和

```
[class*="foo"] 
```

**`~`**将只匹配周围**的空格**（例如'foo bar'但不匹配'foo-1'）
**`*`**将匹配**我们的周围没有空格**（例如'foo bar'和'foo-1'）

`~`- 属性间隔选择器
`*`- 属性包含选择器

# asp.net - Web App 在中重负载下偶尔会返回错误的数据集。我该如何解决？

> ID：14940712
> 
> 赞同：1
> 
> 时间：2013-02-18T16:21:29.717
> 
> 标签：asp.net, sql-server

我有一个带有手写 DAL 的网络应用程序。它使用 Microsoft 应用程序块来实际连接到 MS SQL 服务器数据库。

当应用程序处于中等到重负载下时，它将返回错误的结果集。没有系统的方法来重现错误。我可以在 SQL Server Management Studio 中重新运行查询并每次都得到正确的结果。

我收到如下错误

```
DataBinding: 'System.Data.Common.DataRecordInternal' does not contain a property 
    with the name 'TitleName'. 
```

和

```
System.IndexOutOfRangeException: TitleId at 
    System.Data.ProviderBase.FieldNameLookup.GetOrdinal(String fieldName) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:21:29.717

问题最终是对使用**静态**SqlConnection 对象的方法的 AJAX 调用。

该对象将位于连接池中，并将被重新分配给其他对象并发生变异。因此，如果在调用 AJAX 方法时用户 A 正在加载页面，并且用户 B 正在请求页面并且获取的用户 A 的静态连接灾难发生。

# asp.net - 为什么 aspnet_compiler 会找到多种类型？

> ID：14940733
> 
> 赞同：1
> 
> 时间：2013-02-18T16:22:08.627
> 
> 标签：asp.net, .net-4.5, aspnet-compiler

我正在尝试使用 aspnet_compiler 编译我们的网站。不幸的是，我收到了这个错误：

```
 F:\WebSite\Controls\Control.ascx(34): error CS0433: 
   The type 'Website.Container' exists in both 
   'c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\079ad281\d925b629\App_Web_maop0n3g.dll' 
   and 'c:\Windows\Microsoft.NET\Framework64\v4.0.30319\Temporary ASP.NET Files\root\079ad281\d925b629\assembly\dl3\a28aec4c\12bcd7b9_4a0ace01\Website.DLL' 
```

显然，aspnet_compiler 认为该`Website.Container`类型存在于多个程序集中。 `Website.dll`是我们网站的预编译程序集之一。我相信`App_Web_maop0n3g.dll`是由 aspnet_compiler 创建的程序集。

我搜索了我们的代码库，找不到任何重复的`Website.Container`控件。似乎 aspnet_compiler 正在使用此控件创建一个新程序集，而不是使用预编译的定义。清除临时 ASP.NET 缓存并不能解决问题。

**我该如何调试这个问题？**

# ios - 覆盖 resignFirstResponder 失败

> ID：14940735
> 
> 赞同：1
> 
> 时间：2013-02-18T16:22:12.870
> 
> 标签：ios, xcode, uisearchbar, resignfirstresponder

试图覆盖 UISearchBar 的 resignFirstResponder 方法以使取消按钮始终启用：

```
@interface UISearchBar(alwaysEnableCancelButton)
- (BOOL)resignFirstResponder;
@end

@implementation UISearchBar(alwaysEnableCancelButton)

- (BOOL)resignFirstResponder
{
    // Force the cancel button to stay enabled
    UIView *possibleButton;
    for (possibleButton in self.subviews)
    {
        if ([possibleButton isKindOfClass:[UIButton class]])
        {
            UIButton *cancelButton = (UIButton*)possibleButton;
                [cancelButton setEnabled:YES];
        }

        // Dismiss the keyboard
        if ([possibleButton isKindOfClass:[UITextField class]]) {
            [(UITextField *)possibleButton resignFirstResponder];
        }
    }
    NSLog(@"done");
    return [super resignFirstResponder];
}
@end 
```

但是日志什么也没显示！

我像这样使用它

```
[mySearchBar resignFirstResponder]; 
```

# ios - prepareForSegue 被调用两次，尝试呈现 在演示过程中

> ID：14940738
> 
> 赞同：11
> 
> 时间：2013-02-18T16:22:31.043
> 
> 标签：ios, objective-c

我是 ios 编程新手并在这里询问，但我一直都在访问！我很困惑为什么会遇到这个问题，它编译时没有错误，我已经检查并检查了我的 MainStoryboard 中的所有插座和标识符。

我有 2 个 UITableViewControllers，当用户选择表中的一个项目时，我将一个字符串从第一个传递到第二个，所以在 FirstTableViewController.m

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    int sel = indexPath.row;
    if (sel == 0) {
        _keyName = [NSString stringWithString:_string1];
        NSLog(@"the table was selected at cell 0, %@", _string1);
    }
    if (sel == 1) {
        _keyName = [NSString stringWithString:_string2];
    }
    // more code below...
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"ResultsSegue"])
    {
        UINavigationController *navigationController = segue.destinationViewController;
        ResultsViewController *rv = [[navigationController viewControllers] objectAtIndex:0];
        [rv setResults: _keyName];
        NSLog(@"in the progress view, %@", _keyName);
        //rv.delegate = (id)self;
        rv.delegate = self;            
    }
} 
```

在我的 ResultsViewController.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    NSLog(@"in the results, %@", _results);
    NSLog(@"in the results view");
} 
```

在 NSlog 读数中，我得到： ...在进度视图中，(null) 在结果中，(null) 在进度视图中，正确的字符串警告：尝试呈现在

然后，当我点击取消按钮返回到 firstTableview 并再次按下详细视图时，它不再显示 null ..

在进度视图中，正确的字符串在结果中，正确的字符串在进度视图中，正确的字符串

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-18T18:11:58.737

问题是在 didSelectRowAtIndexPath 之前调用了 prepareForSegue。您应该只消除 didSelectRowAtIndexPath 方法，并在 prepareForSegue 中执行所有操作。您可以使用以下行来获取所需的 indexPath：

```
NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-04T11:36:53.100

罗布的回答也帮助了我 - 谢谢！我正在用 Swift 编码，所以对于那些在 Swifting 中遇到这种情况的人，这里是如何在 Swift 3 中点击索引（或索引行）：

```
var rowClicked = (self.tableView.indexPathForSelectedRow?.row)! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-12T03:48:22.747

可能你的segue是从表格视图单元而不是视图控制器开始连接。

我有同样的问题，我从表格视图单元格中删除了 segue 并在视图控制器级别添加回。

[![在此处输入图像描述](../Images/948b68ee9bc0e62a1f6e175af45a0925.png)](https://i.stack.imgur.com/kNkTL.png)

# python - 选择/排除熊猫中的列集

> ID：14940743
> 
> 赞同：448
> 
> 时间：2013-02-18T16:22:38.697
> 
> 标签：python, pandas, dataframe

我想根据列选择从现有数据框创建视图或数据框。

例如，我想`df2`从一个数据框创建一个数据框，该数据框`df1`包含除其中两个之外的所有列。我尝试执行以下操作，但没有成功：

```
import numpy as np
import pandas as pd

# Create a dataframe with columns A,B,C and D
df = pd.DataFrame(np.random.randn(100, 4), columns=list('ABCD'))

# Try to create a second dataframe df2 from df with all columns except 'B' and D
my_cols = set(df.columns)
my_cols.remove('B').remove('D')

# This returns an error ("unhashable type: set")
df2 = df[my_cols] 
```

我究竟做错了什么？也许更一般地说，pandas 有什么机制来支持从数据帧中选择和**排除**任意列集？

* * *

## 回答 #1

> 赞同：646
> 
> 时间：2015-03-28T15:54:50.590

您可以删除不需要的列或选择您需要的列

```
# Using DataFrame.drop
df.drop(df.columns[[1, 2]], axis=1, inplace=True)

# drop by Name
df1 = df1.drop(['B', 'C'], axis=1)

# Select the ones you want
df1 = df[['a','d']] 
```

* * *

## 回答 #2

> 赞同：209
> 
> 时间：2016-05-25T15:12:27.937

有一种新的索引方法称为[`difference`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.Index.difference.html). 它返回原始列，并删除作为参数传递的列。

在这里，结果用于删除列`B`和`D`：`df`

```
df2 = df[df.columns.difference(['B', 'D'])] 
```

请注意，它是基于集合的方法，因此重复的列名会导致问题，并且可能会更改列顺序。

* * *

**优势**：当您只需要列列表时，`drop`您不会创建整个数据框的副本。例如，为了在列的子集上删除重复项：

```
# may create a copy of the dataframe
subset = df.drop(['B', 'D'], axis=1).columns

# does not create a copy the dataframe
subset = df.columns.difference(['B', 'D'])

df = df.drop_duplicates(subset=subset) 
```

* * *

## 回答 #3

> 赞同：131
> 
> 时间：2018-07-30T20:41:25.670

**另一种选择，无需在循环中丢弃或过滤：**

```
import numpy as np
import pandas as pd

# Create a dataframe with columns A,B,C and D
df = pd.DataFrame(np.random.randn(100, 4), columns=list('ABCD'))

# include the columns you want
df[df.columns[df.columns.isin(['A', 'B'])]]

# or more simply include columns:
df[['A', 'B']]

# exclude columns you don't want
df[df.columns[~df.columns.isin(['C','D'])]]

# or even simpler since 0.24
# with the caveat that it reorders columns alphabetically 
df[df.columns.difference(['C', 'D'])] 
```

* * *

## 回答 #4

> 赞同：81
> 
> 时间：2013-11-18T02:25:39.110

你真的不需要把它转换成一个集合：

```
cols = [col for col in df.columns if col not in ['B', 'D']]
df2 = df[cols] 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2014-10-14T09:02:31.400

也看看内置[`DataFrame.filter`](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.filter.html)函数。

简约但贪婪的方法（对于给定的 df 足够了）：

```
df.filter(regex="[^BD]") 
```

保守/惰性方法（仅精确匹配）：

```
df.filter(regex="^(?!(B|D)$).*$") 
```

保守和通用：

```
exclude_cols = ['B','C']
df.filter(regex="^(?!({0})$).*$".format('|'.join(exclude_cols))) 
```

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2018-06-18T13:56:12.280

您有 4 列 A、B、C、D

这是为新数据框选择所需列的更好方法：-

```
df2 = df1[['A','D']] 
```

如果您想改用列号，请使用：-

```
df2 = df1[[0,3]] 
```

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2013-02-18T16:32:43.187

您只需要将您的转换`set`为`list`

```
import pandas as pd
df = pd.DataFrame(np.random.randn(100, 4), columns=list('ABCD'))
my_cols = set(df.columns)
my_cols.remove('B')
my_cols.remove('D')
my_cols = list(my_cols)
df2 = df[my_cols] 
```

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2014-08-23T18:45:39.123

以下是创建不包括列列表的*副本*的方法：`DataFrame`

```
df = pd.DataFrame(np.random.randn(100, 4), columns=list('ABCD'))
df2 = df.drop(['B', 'D'], axis=1) 
```

但小心点！你在你的问题中提到了观点，暗示如果你改变了`df`，你也想`df2`改变。（就像数据库中的视图一样。）

此方法无法实现：

```
>>> df.loc[0, 'A'] = 999 # Change the first value in df
>>> df.head(1)
     A         B         C         D
0  999 -0.742688 -1.980673 -0.920133
>>> df2.head(1) # df2 is unchanged. It's not a view, it's a copy!
          A         C
0  0.251262 -1.980673 
```

另请注意，@piggybox 的方法也是如此。（虽然这种方法很好，很漂亮，而且 Pythonic。我不会这样做！！）

有关视图与副本的更多信息，请参阅[此 SO 答案](https://stackoverflow.com/a/17961468/2071807)以及该答案所指[的 Pandas 文档的这一部分。](http://pandas.pydata.org/pandas-docs/dev/indexing.html#returning-a-view-versus-a-copy)

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2017-11-22T02:06:00.470

类似地，在读取文件时，可能希望预先排除列，而不是浪费地将不需要的数据读入内存然后丢弃它们。

从 pandas 0.20.0 开始，[`usecols`现在接受 callables](https://pandas-docs.github.io/pandas-docs-travis/generated/pandas.read_csv.html?highlight=read_csv#pandas.read_csv)。¹ 此更新允许更灵活的选项来读取列：

```
skipcols = [...]
read_csv(..., usecols=lambda x: x not in skipcols) 
```

后一种模式本质上与传统`usecols`方法相反——仅跳过指定的列。

* * *

**给定**

文件中的数据

```
import numpy as np
import pandas as pd

df = pd.DataFrame(np.random.randn(100, 4), columns=list('ABCD'))

filename = "foo.csv"
df.to_csv(filename) 
```

**代码**

```
skipcols = ["B", "D"]
df1 = pd.read_csv(filename, usecols=lambda x: x not in skipcols, index_col=0)
df1 
```

输出

```
 A         C
0  0.062350  0.076924
1 -0.016872  1.091446
2  0.213050  1.646109
3 -1.196928  1.153497
4 -0.628839 -0.856529
... 
```

**细节**

将 DataFrame 写入文件。然后它作为一个单独的 DataFrame 被读回，现在跳过不需要的列（`B`和`D`）。

请注意，对于 OP 的情况，由于已经创建了数据，因此更好的方法是接受的答案，即从现有对象中删除不需要的列。但是，这里介绍的技术在直接将文件中的数据读取到 DataFrame 时最有用。

^([[在这个问题](https://github.com/pandas-dev/pandas/issues/10882)中提出了一个“skipcols”选项的请求，并在以后的[问题](https://github.com/pandas-dev/pandas/issues/15799)中得到解决。])

# twitter-bootstrap - 如何将动态区域添加到 twitter 引导表行

> ID：14940747
> 
> 赞同：0
> 
> 时间：2013-02-18T16:22:53.463
> 
> 标签：twitter-bootstrap

我有一个要求，我使用 twitter 引导表来显示用户属性，例如电子邮件、名字、姓氏、密码等。

现在我想在 facebook 帐户设置页面中创建类似的东西。当我单击编辑按钮时，该行会放大，然后您可以将编辑元素放在具有提交按钮和关闭按钮的表单中。再次提交该行时，会收缩回原来的位置，并单击关闭按钮。

这可能使用 twitter 引导程序吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:44:26.543

仅使用 Bootstrap 及其默认的 JS 插件，答案是：不。

至少，您自己需要一些基本的 JS 来用输入和单元格值替换单元格。

也可能有一些用于此目的的 jQuery 插件，但我不能指出你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T17:26:35.070

Facebook 正在使用 UL（无序列表）元素而不是表格，因为表格仅用于显示表格数据。

他们所做的只是当您单击“编辑”时，一个隐藏的 DIV 将被填充（可能由 AJAX）表单及其标签等。

然后，用户可以编辑并保存将其发布回数据库的信息，或者他们可以取消显然取消填充 hiddeb DIV 并将行返回到其先前状态的表单。

Bootstrap 没有为此功能内置的默认编程，但考虑到上面的基本概念，对于优秀的开发人员来说，它应该不会太棘手。

# google-chrome-extension - Chrome 扩展消息超时

> ID：14940752
> 
> 赞同：0
> 
> 时间：2013-02-18T16:23:04.350
> 
> 标签：google-chrome-extension, timeout, message

我有一个标签，其中包含以下内容：

```
<meta http-equiv="refresh" content="0; URL='whatsoever'" /> 
```

我还有一个正在运行的插件，它使用这种技术注册每个选项卡：

```
chrome.tabs.onUpdated.addListener(doStuff); 
```

doStuff 函数向选项卡发送一条消息：

```
function doStuff(tabId, changeInfo, tab){

    chrome.tabs.sendMessage(tabId, {'message': 'content'}, function(response){

        doOtherStuff(response);

    });

} 
```

我注册了一个脚本（此处未显示），并且在该脚本中，发生了这种情况：

```
function receiveMessage(request, sender, sendResponse){

    sendResponse({'content': 'responseData'});

}

chrome.extension.onMessage.addListener(receiveMessage); 
```

我的问题是由于瞬时刷新，响应超时，控制台出现以下错误：

> 无法发送响应：如果您想在侦听器返回后发送响应（消息由扩展 XYZ 发送），则 chrome.extension.onMessage 侦听器必须返回 true。

为什么会这样，我该如何规避这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-08-08T20:24:03.587

它说，函数 receiveMessage 应该以 return true; 退出。只有这样，消息才会继续发送。如果为 false，则在函数返回时中止。所以添加 return true

看：

> 当事件侦听器返回时，此函数无效，除非您从事件侦听器返回 true 以指示您希望异步发送响应（这将保持消息通道对另一端开放，直到调用 sendResponse ）。

来自文档： [https ://developer.chrome.com/extensions/runtime#event-onMessage](https://developer.chrome.com/extensions/runtime#event-onMessage)

```
function receiveMessage(request, sender, sendResponse){

    sendResponse({'content': 'responseData'});
    return true;
}

chrome.extension.onMessage.addListener(receiveMessage); 
```

# installation - 当两个产品具有相同的升级代码时升级一个产品而不是另一个

> ID：14940754
> 
> 赞同：2
> 
> 时间：2013-02-18T16:23:05.317
> 
> 标签：installation, windows-installer, installshield, uninstallation

我安装了两个产品。它们具有相同的版本号和升级代码，但产品代码不同。我想对其中一种产品进行重大升级，但我创建的升级 exe 最终删除了这两种产品，并安装了新产品。

话虽如此，当一个产品与我要升级的另一种产品具有相同的升级代码时，我如何保持安装该产品？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:44:23.187

升级表首先驱动 FindRelatedProducts。FindRelatedProducts 使用这些信息来执行 MSI 产品搜索。如果将找到的 ProductCode 放在 ActionProperty 列指定的属性中

稍后，RemoveExistingProducts 将卸载在任何 ActionProperty 属性中找到的任何 ProductCodes（前提是未设置 msidbUpgradeAttributesOnlyDetect）。

因此，摆脱这种棘手情况的诀窍是编写一个升级行，这将导致 FindRelatedProducts 找不到任何一个产品。然后使用自定义操作进行您自己的搜索并根据需要设置属性（一个但不是另一个）。现在 RemoveExistingProducts 将能够执行主要升级。

附带说明：这是一种解决方法，而不是最佳实践。仔细考虑您对 UpgradeCodes、ProductCodes 和 ProductVersion 属性的选择，以避免将来出现这种情况。

# c# - JavaScriptSerializer 没有正确序列化 DynamicJsonObject

> ID：14940762
> 
> 赞同：2
> 
> 时间：2013-02-18T16:23:26.910
> 
> 标签：c#, json

我有一个 DynamicJsonObject 像：

```
var obj = new DynamicJsonObject();
obj.Field1 = "field1";
obj.Field2 = "field2"; 
```

我需要 obj 的 json 字符串。我尝试使用`JavaScriptSerializer`：

```
var json = JavaScriptSerializer.Serialize(obj); 
```

但结果总是`json == '{}'`

有解决方法吗？最好不要使用第三方库

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:53:39.160

您可以将自定义转换器添加到 JavaScriptSerializer。在 System.Web.Helpers 中已经存在一个但是是内部的 - 您可以使用以下代码来注册它：

```
var type = Type.GetType("System.Web.Helpers.DynamicJavaScriptConverter, System.Web.Helpers");
var converter = (JavaScriptConverter)Activator.CreateInstance(type);
JavaScriptSerializer serializer = new JavaScriptSerializer();
serializer.RegisterConverters(new[] { converter });

var json = serializer.Serialize(obj); 
```

[或从此处](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/1db9afa47f02#src/System.Web.Helpers/DynamicJavaScriptConverter.cs)复制代码

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T17:01:08.500

感谢您的回答，但我找到了一种简单的方法来使用`System.Web.Helpers.Json`. 所以，我的代码如下所示：

```
string json = Json.Encode(obj); 
```

我不能使用匿名对象，因为我没有创建`obj`，它已经以 DynamicJsonObject 的“格式”提供。

# ruby-on-rails - Rails 中的父模型特定 id 列？

> ID：14940764
> 
> 赞同：0
> 
> 时间：2013-02-18T16:23:28.510
> 
> 标签：ruby-on-rails, ruby, database, rails-activerecord

考虑以下

```
:company has_many :issues  #ticket tracking example 
```

我希望有路由，以便公司中的任何用户都可以转到 /issues/:id （使用默认 id 列时这很简单）。

但是，我希望有一个特定于公司的问题 ID（因此每个公司都有自己的问题 1、2、3 等，这些问题不是唯一的（并且不会使用内部 ID）。

有没有比在 IssueController 中为该公司 ID 创建和更新操作中基于数据库中的最后一个数字计算 ID 更好的方法？（当每个公司更新/创建多个记录时，我可以在这里想到各种竞争条件问题）。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:50:21.103

我会将`issue_id`处理降低到模型级别。您可以使用 before_validation 回调来设置`issue_id`. 仅此一项，即使`save`调用包含在事务中，也不会阻止竞争条件。正如@PinnyM 所建议的，您必须`[ :company_id, :issue_id ]`通过向您的表添加索引/唯一约束来进一步确保这对夫妇的唯一性。`issues`所以像这样

```
class Issue < ActiveRecord::Base
  attr_accessible :company_id, :issue_id
  belongs_to :company
  before_validation :set_issue_id

  private
    def set_issue_id
      self.issue_id = self.company.issues.size + 1
    end
end

class Company < ActiveRecord::Base
  has_many :issues
end 
```

并在迁移中：

```
add_index :issues, [:issue_id, :company_id], :unique => true 
```

你可以像你说的那样在控制器中抓住正确的问题：

```
@issue = Issue.where(company_id: current_user.company.id, issue_id: params[:id]) 
```

请注意，这并没有提供从约束冲突异常中恢复的方法，以防万一实际发生。有关如何处理此问题的建议，请参阅@PinnyM 答案。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T18:31:41.293

在第一次误解了这个问题之后，我会再试一次。

You are looking for a way to have an issue 'counter' (to simulate an id) that is specific to a company_id. Although @deivid was on the right track, relying on `issues.count` will only work if you can guarantee that a company never makes more than one request at a time. This will generally be the case, but is not guaranteed and shouldn't be used alone as the core logic behind this counter.

You'll need to add a unique constraint/index to your `issues` table - this will ensure that counter can't be duplicated:

```
add_index :issues, [:issue_id, :company_id], :unique => true 
```

Adding a `:uniqueness` constraint in the model will only mitigate the problem somewhat by making the window for the race condition smaller, but it can't guarantee uniqueness completely.

Note that in the event of a constraint violation in the DB, ActiveRecord can't recover from it within the transaction. You can try rescuing `ActiveRecord::RecordNotUnique`, recreating the `issue` (or just regenerating the `issue_id` using a fresh `count`) and saving again.

# actionscript-3 - 从同步流到异步流的困境

> ID：14940766
> 
> 赞同：0
> 
> 时间：2013-02-18T16:23:33.087
> 
> 标签：actionscript-3, air

作为一名 PHP 程序员，我非常习惯于程序流程逐行进行的事实，如果我调用必须返回某个值的 function1()，我知道程序不会继续，直到该函数返回。

现在，我正在使用 AIR 开发一个 AS3 应用程序，如果满足某些条件，我需要下载一些图像，不知道有多少，所以我使用这样的 For：

```
for (var w:int=0; w < newData_array[2]['content'].length; w++ ) {
    for (var j:int=0; j < oldData_array[2]['content'].length; j++ ) {
        if((oldData_array[2]['content'][j]['id'] == newData_array[2]['content'][w]['id']) &&  (oldData_array[2]['content'][j]['last_mod'] != newData_array[2]['content'][w]['last_mod'])){
            //need to download a image...
        }
    }       
} 
```

如您所见，我只是比较每个数组中的每个元素（**newData_array**和**oldData_array**）。如果条件满足，我需要下载一些东西，因为我使用的是**URLloader**并且你知道这个函数是异步的，添加一个监听器，当下载完成时会触发一个事件，问题很清楚，因为urlloader 不会停止 for 循环（就像我在 PHP 类似的语言上所期望的那样）我只是要同时下载一堆图像，这会造成灾难，因为我不知道何时保存。所以我无论如何都需要使用监听器，但由于我对这种程序不太习惯，所以我非常卡住。

我对保存到磁盘的例程不感兴趣，那部分已经完成了，我只是想了解我应该如何构建这个算法来完成这项工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:32:54.180

这也让我很恼火，但必须意识到你不能对内存中尚不存在的东西做某事，而且这些加载操作可能需要相当长的时间。作为单线程堆栈，Flash Player 的加载操作将要求整个界面在加载期间冻结（如果仅限于循环）。

显然，循环中有数据可用于指示您对图像执行的操作。我一直在使用的解决方案是创建一个自定义加载函数来启动加载，并返回一个代理图像。你的循环得到一个容器，你可以自由地将你的图像放在你想要的地方。

同时，您的加载程序侦听器一直在跟踪活动图像加载及其相关代理。加载后，交换图像。

你的循环看起来像这样......

```
for (var w:int in newData_array[2]['content']) {
    for (var j:int in oldData_array[2]['content']) {
        if ((oldData_array[2]['content'][j]['id'] == newData_array[2]['content'][w]['id']) && (oldData_array[2]['content'][j]['last_mod'] != newData_array[2]['content'][w]['last_mod'])){
            var proxy:MovieClip = loadImage("image/path.jpg");
            // Do stuff to proxy.
        }
    }    
} 
```

你的函数+监听器看起来像这样......

```
var proxies:Object = {};
function loadImage(path:String):MovieClip {
    // load Image
    var proxy:MovieClip = new MovieClip();
    proxies.path = proxy;

    // Load Image
}

function imageLoaded(e:Event):void {
    // Once loaded, use the filename as the proxy object's key to find the MovieClip to attach the image.
    proxies[e.data.loaderInfo.filename].addChild(e.data);
} 
```

这只是我的想法，所以你需要找到实际的变量名，但我希望这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T09:26:17.837

我不确定我是否理解您的问题，但在我看来，您只是在内部循环中添加了相应的侦听器。

```
 //take care this is pseudocode

 var parent = ... // some stage object
 for (var w:int=0; w < size1; w++ ) {
     for (var j:int=0; j < size2; j++ ) {
         if(some_condition){
             request = new URLRequest(getNextImagePath();
             urlLoader = new URLLoader();
             urlLoader.addEventListener(Event.COMPLETE, onComplete);
             urlLoader.load(request);
         }
     }       
 }

 function onComplete(event:Event) {
     parent.addChild(createImageFromData(this.data));
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T12:17:57.457

我使用一个可以很好地处理这个问题的第三方库解决了这个问题。

[https://github.com/arthur-debert/BulkLoader](https://github.com/arthur-debert/BulkLoader)

# ios - 如何从 iOS 应用打开 VPN？（私有 API 可以）

> ID：14940767
> 
> 赞同：6
> 
> 时间：2013-02-18T16:23:33.370
> 
> 标签：ios, settings, vpn, iphone-privateapi

当 iOS 设备进入“睡眠模式”时，不幸的是，即使是配置好的 VPN 也会被关闭。

想要为他的 iPad 安装应用程序的客户**必须**使用 VPN 来确保安全，因此任何事情都必须通过 VPN 完成。该应用程序必须同步很多，但iOS设备可能会自行关闭VPN。这就是为什么我每次需要互联网连接（或保持*活动*状态）时都需要再次触发它。

大家有什么想法吗？

即使使用私有 API 也可以（该应用程序只会分发给客户，而不是通过 App Store）。

或者使用**Cisco AnyConnect**之类的任何应用程序都可以完成这项工作。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T01:11:54.307

两个想法：

1) 您可以根据需要使用 VPN 创建配置文件。这需要客户端证书身份验证。我的猜测是，如果某些应用程序将尝试在睡眠模式下访问 VPN on demand 部分中定义的域或主机，VPN 将被打开。

**更新**：在某些时候，Apple 因按需 VPN 被起诉，所以我相信他们放弃了此功能，并在将其退回后进行了修改。为 iOS 7 阅读这篇文章是个好主意：http: [//support.apple.com/kb/ts4550](http://support.apple.com/kb/ts4550)

2）我为这个问题提供的想法（[iOS6在非越狱设备上切换WiFi](https://stackoverflow.com/questions/14896622/ios-toggle-6-wifi-on-non-jailbroken-device)）。这是那里的文本副本：

我认为看看 SystemConfiguration.framework 是有意义的。

它有一组 API 可用于不同的连接接口，这些接口在此处定义：http: [//developer.apple.com/library/mac/#documentation/Networking/Reference/SCNetworkConfiguration/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/Networking/Reference/SCNetworkConfiguration/Reference/reference.html)

这是私有 API。

**更新**：我相信 SystemConfiguration 有一些变化，Apple 加强了围绕这个框架的安全性。

3) Apple 可能会授予某些应用程序额外的权利，因此它们可以构建其他应用程序无法构建的功能。例如，VPN 客户端公司（如 Cisco）获得了构建 iOS 中称为“VPN 插件”的特殊权利，它本质上是 VPN 客户端。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-28T11:12:33.883

现在可以使用 iOS 8 及更高版本中提供的 NetworkExtension 框架。如果您转到项目设置-> 功能，您将找到“个人 VPN”。通过打开它，您可以将框架添加到您的项目中。几乎没有官方文档，但您可以在此处查看 WWDC 视频[https://developer.apple.com/videos/wwdc/2015/?id=717](https://developer.apple.com/videos/wwdc/2015/?id=717)

# python - 如何让python程序以.exe格式运行隐藏模式？

> ID：14940769
> 
> 赞同：0
> 
> 时间：2013-02-18T16:23:42.790
> 
> 标签：python, py2exe

我有一个在 app.pyw 文件格式中不带控制台运行的 python 程序。我使用此脚本使用 py2exe 将该程序转换为 .exe 文件

```
from distutils.core import setup
import py2exe

setup(console=['app.pyw']) 
```

现在 app.exe 应用程序工作正常，但如果没有控制台窗口，应用程序将无法工作。我想以 .exe 格式在没有控制台窗口的情况下运行我的应用程序

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:32:25.247

（我不能添加评论）我建议您阅读定义 setup 的模块“distutils.core”。
para 'console=['app.pyw']' 可能是你的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T20:34:59.177

在这里你不需要添加 .pyw 只需编辑你的 py2exe 设置脚本

替换控制台=

通过窗户=

应该是这样的：

```
from distutils.core import setup
import py2exe

setup(windows=["app.pyw"]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T20:03:20.367

尝试 setup(windows=["name"]) 而不是控制台。当没有 GUI 窗口可以运行时，它可能会隐藏它..

# vb.net - VB2012中自动短信发送的行扫描和延迟

> ID：14940770
> 
> 赞同：0
> 
> 时间：2013-02-18T16:23:46.457
> 
> 标签：vb.net, vb.net-2010

我有一个 MS SQL 链接服务器（来自 Mysql） - 生成的表 TBL 包含

```
*Index
*StdNo
*MobileNo 
```

我有一个用于短信发送的 VB2012 代码：

```
Private Sub cmdsend_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdsend.Click
    Try
        If SerialPort1.IsOpen Then
            With SerialPort1
                .Write("AT" & vbCrLf)
                .Write("AT+CMGF=1" & vbCrLf)
                .Write("AT+CMGS=" & Chr(34) & TextBox1.Text & Chr(34) & vbCrLf)
                .Write(RichTextBox1.Text & Chr(26))

            End With
        Else
            MsgBox("Error on the port selected")
        End If
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub 
```

其中 TextBox1.Text 是实际手动输入数字的文本框，RichTextBox1.Text 是将发送的消息。

我想要的是创建一个代码，它将自动为 MobileNo 选择表 TBL 的每一行，然后发送 SMS。由于 VB 代码并不是真正用于批量消息传递，我的想法是创建一个循环，它将扫描每一行，获取每个 MobileNo，发送消息，然后在下一行扫描之前延迟几秒钟。我什至不知道这是否可能。但我认为是这样，我只是不知道如何提出循环，甚至不知道如何创建数据库之间的连接。有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-26T06:34:18.280

也许您可以使用以下代码：

```
Private Sub cmdsend_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles cmdsend.Click
    Try
        If SerialPort1.IsOpen Then
            With SerialPort1
                .Write("AT" & vbCrLf)
                .Write("AT+CMGF=1" & vbCrLf)
                .Write("AT+CMGS=" & Chr(13) 
.Write(TextBox1.Text)
                .Write(Chr(26))
            End With
        Else
            MsgBox("Error on the port selected")
        End If
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try
End Sub 
```

# delphi - 从 Delphi 程序调用 C DLL

> ID：14940771
> 
> 赞同：2
> 
> 时间：2013-02-18T16:23:50.730
> 
> 标签：delphi, dll, parameters, type-conversion

在我的 Delphi 代码中，我必须使用以下原型调用 DLL 的函数（用 Visual C 编写）：

```
int PWFunc(LPCSTR szName, int nWidth, int nHeight, LPCSTR szFileName) 
```

如何将 Delphi AnsiString 变量（用于名称和文件名）转换为函数调用的正确类型参数（LPCSTR szName 和 szFileName）？我知道 VC LPCSTR 类型对应于 Delphi PAnsiChar 类型，但是将 AnsiString 转换为 PAnsiChar 的正确程序是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:55:56.143

`LPCSTR`并`LPSTR`对应于`PAnsiChar`，所以这就是你使用的：

```
function PWFunc(szName: PAnsiChar; nWidth, nHeight: Longint;
  szFileName: PAnsiChar): Longint; cdecl { or stdcall, see documentation };
  external 'somedll.dll' name 'PWFunc'; 
```

你这样称呼它：

```
X := PWFunc(PAnsiChar(AnsiString(SomeName)), 17, 33, 
       PAnsiChar(AnsiString(SomeFileName))); 
```

您的函数是`stdcall`还是`dcecl`取决于编译器设置。阅读文档。如果有疑问，请尝试两者。它看起来像`cdecl`我，所以从那个开始。

# javascript - 将字符串作为对象添加到已存在的对象

> ID：14940777
> 
> 赞同：1
> 
> 时间：2013-02-18T16:24:14.807
> 
> 标签：javascript, jquery, json, charts

我正在构建一个动态[xChart](http://tenxer.github.com/xcharts/examples/)。我传递的动态数据是一个预先构建的字符串，可以通过 js 转换为对象：

```
{"data": [{"x":"car insurance companies","y":1417},
          {"x":"insurance companies","y":17201},
          {"x":"auto insurance companies","y":892},
          {"x":"car insurance quote","y":3280},
          {"x":"auto insurance quote","y":988}]} 
```

这是 xCharts 需要的参数代码示例片段：

```
var data = {
  "xScale": "ordinal",
  "yScale": "linear",
  "main": [
    {
      "className": ".pizza",
      "data": [
        {
          "x": "Pepperoni",
          "y": 4
        },
        {
          "x": "Cheese",
          "y": 8
        }
      ]
    }
  ]
}; 
```

这是我的一组参数：

```
var vars = {
    "xScale": "ordinal",
    "yScale": "linear",
    "type": "bar",
    "main": [
    {
        "className": ".topsy-results"
    }
    ]
}; 
```

我需要将我`data`的对象添加到`main`我的参数列表中的对象中以使其完整。如果我`$.parseJSON`是`data`对象，它会给我一个不起作用的对象。如何解析`data`对象以获得我需要的格式（使其与我提供的示例代码匹配）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:28:51.180

*您可以通过将data*属性分配给*main*来即时添加它：

```
var myData={"data": [{"x":"car insurance companies","y":1417},
          {"x":"insurance companies","y":17201},
          {"x":"auto insurance companies","y":892},
          {"x":"car insurance quote","y":3280},
          {"x":"auto insurance quote","y":988}]};
vars.main.data = myData.data;
console.log(vars); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:29:22.943

使用`$.extend`并合并两者？

```
var prebuilt = {...}; //that pre-build data
var vars = {...}; // Your vanilla settings

var merged = $.extend({}, vars, {
  'main': prebuilt
}); 
```

我已经放置`prebuilt`到另一个对象中，所以嵌套在它被扩展时会起作用，但现在`prebuilt`应该显示在`data`对象`merged`内部。*注意：* `$.extend`如果您拥有的不仅仅是数据信息，或者如果`data`属性中已经存在现有片段并且您想要更新它们或添加新片段，则很有用）。

您也可以通过引用简单地分配它：

```
vars.main.data = prebuilt.data; 
```

# javascript - 防止将包含 E 和数字的字符串转换为数字

> ID：14940778
> 
> 赞同：6
> 
> 时间：2013-02-18T16:24:14.357
> 
> 标签：javascript, jquery, custom-data-attribute, jquery-data

我们有这种“奇怪”的情况，当在 jquery click 函数中检索时，存储在数据属性（例如 data-prodcode）中的某些产品代码（例如 11E6）被转换为 11000000。像这样的东西：

```
 <a data-prodcode="11E6">click</a>
    var code = $(this).data('prodcode');
    console.log(code); --> 11000000 
```

关于如何避免这种行为或可能导致这种行为的任何建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T16:25:25.987

从[文档](http://api.jquery.com/data/)中：

> 每次尝试都将字符串转换为 JavaScript 值（这包括布尔值、数字、对象、数组和 null），否则将其保留为字符串。要将值的属性作为字符串检索而不进行任何转换，请使用 attr() 方法。

您可以使用`attr`以避免自动解析：

```
var code = $(this).attr('data-prodcode'); 
```

更准确地说：这不应该发生。事实上，它不会在最新版本中发生。这是 current 的 jQuery 的代码（最有趣的部分是注释）：

```
 if ( typeof data === "string" ) {
        try {
            data = data === "true" ? true :
                data === "false" ? false :
                data === "null" ? null :
                // Only convert to a number if it doesn't change the string
                +data + "" === data ? +data :
                rbrace.test( data ) ? jQuery.parseJSON( data ) :
                    data;
        } catch( e ) {} 
```

它适用于 jQuery 1.8 和 1.9：如果反向转换不产生相同的字符串，它不会将字符串转换为数字。但它在 jQuery 1.7 中不起作用。

# html - 如何在显示所有 pdf 页面的 iframe 中显示 pdf？

> ID：14940779
> 
> 赞同：5
> 
> 时间：2013-02-18T16:24:15.417
> 
> 标签：html, pdf, iframe

我一直致力于使用 iFrame 在单个 html 页面中包含多个 pdf 文档。我想出了如何在 iFrame 中插入 pdf，但我一直很好奇是否可以在显示所有 pdf 页面的同时将 pdf 添加到 iFrame；也就是说，iframe 应该显示没有垂直滚动条的所有 pdf 内容。

谢谢，Y_Y

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:27:56.030

```
<iframe src="mydoc.pdf" width="100%" height="800px"></iframe> 
```

我认为您不能显示所有页面，除非您将 height 属性设置得足够大以显示所有页面。您必须使高度足够大（按比例）以根据 iframe 的宽度显示所有页面。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-12T12:16:34.060

**框架**

```
<iframe id="fred" style="border:1px solid #666CCC" title="PDF in an i-Frame" src="PDFData.pdf" frameborder="1" scrolling="auto" height="1100" width="850" ></iframe> 
```

**目的**

```
<object data="your_url_to_pdf" type="application/pdf">
  <embed src="your_url_to_pdf" type="application/pdf" />
</object> 
```

# javascript - 图像交换时淡入

> ID：14940782
> 
> 赞同：0
> 
> 时间：2013-02-18T16:24:23.460
> 
> 标签：javascript, jquery, html

单击缩略图时，我正在使用此脚本交换图像：

```
$("#thumbs a").click( function() {
    var changeSrc = $(this).attr("href");
    $("#target").attr("src", changeSrc);
    return false;
}); 
```

如何使 changeSrc 动作像另一个图像的平滑淡出和淡入一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:26:35.387

这应该这样做：

```
$("#target").fadeOut('slow', function() {
    $(this).attr("src", changeSrc).fadeIn('slow');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:26:44.410

你当然可以：

```
$("#thumbs a").on('click', function() {
    var href = this.href;
    $("#target").fadeOut(600, function() {
        $(this).attr('src', href).fadeIn(600);
    });
    return false;
}); 
```

# xcode4.6 - “在 Finder 中显示”在我的 XCode 4.6 中损坏？

> ID：14940789
> 
> 赞同：0
> 
> 时间：2013-02-18T16:24:45.067
> 
> 标签：xcode4.6

我在 OSX 10.8.2 上使用 XCode 4.6，而以前可以使用的右键单击上下文菜单中的“在 Finder 中显示”功能在我的盒子上不再起作用。它什么也不做。我尝试了 XCode 重新启动，重新启动机器，但没有成功。

谁能想象在没有全新 XCode 安装的情况下如何解决这个问题？

注意：适用于我的其他应用程序，例如 iTunes。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:14:57.410

我不确定实际问题是什么，但是在查看 superuser.exchange 网站时，我遇到了这个[https://superuser.com/questions/479476/show-in-finder-wont-open-a-new -finder-window](https://superuser.com/questions/479476/show-in-finder-wont-open-a-new-finder-window)这似乎是您的问题所在。

很高兴它有所帮助。

# vba - 希望在 Excel 中将两个 VBA 宏循环在一起，但我想我只是错过了一些非常小的东西

> ID：14940791
> 
> 赞同：3
> 
> 时间：2013-02-18T16:25:00.947
> 
> 标签：vba, excel

好的，所以我一直在努力解决这个问题，但我觉得答案应该非常简单！

首先，我编写了两个宏，我们称它们为 LeftCut 和 RightCut。这些将剪下一行四列并将它们粘贴到工作表的其他位置。这些的 VBA 代码是

```
 Sub RightCut()
ActiveCell.Offset([0], [-1]).Select
Range(ActiveCell, ActiveCell.Offset(0, -3)).Cut
ActiveCell.Offset([0], [6]).Select
Range(ActiveCell, ActiveCell.Offset(0, 3)).Select
Selection.Insert Shift:=xlDown
ActiveCell.Offset([0], [-6]).Select
Range(ActiveCell, ActiveCell.Offset(0, -3)).Select
Selection.Delete Shift:=xlUp
End Sub

   Sub LeftCut
Range(ActiveCell, ActiveCell.Offset(0, 3)).Cut
ActiveCell.Offset([0], [10]).Select
Range(ActiveCell, ActiveCell.Offset(0, 3)).Select
Selection.Insert Shift:=xlDown
ActiveCell.Offset([0], [-10]).Select
Range(ActiveCell, ActiveCell.Offset(0, 3)).Select
Selection.Delete Shift:=xlUp
End Sub 
```

这两个都是自己工作的。现在，我要做的就是将它们循环在一起，所以如果满足某个条件，例如，如果左四列与右四列不匹配并且需要删除一行，那么这两个宏之一是叫。

现在，我为 Do While 循环编写了一个伪代码，但这是否接近我正在寻找的内容？主要问题是在工作表中的某些点，需要剪切和粘贴多达 20 行，所以我希望反复使用上面的宏，直到 ActiveCell = ActiveCell.Offset(0,-1) . 这可能与 Do While 循环吗？

```
Sub HighAce()

Dim i As Long
Dim ActiveCell As Range

i = 2

Application.ScreenUpdating = True

Do While i <= 40043

     Set ActiveCell = Range("E" & i)

    If ActiveCell = ActiveCell.Offset([0], [-1]) Then
     ActiveCell.Offset([1], [0]).Select

    ElseIf ActiveCell > ActiveCell.Offset([0], [-1]) Then
      Application.Run "'Methylation Array.xlsm'!NewBlueCut"

    ElseIf ActiveCell < ActiveCell.Offset([0], [-1]) Then
     Application.Run "'Methylation Array.xlsm'!NewBlueCut"

    Else: Stop

    End If

Loop

 End Sub 
```

我在正确的轨道上吗？我错过了一条线吗？

我感谢任何人可以提供的任何帮助。稍后我会以全新的心态回到这个问题，我会看看我自己是否也能找到解决方案！

谢谢！

编辑：样本数据集

xxx A01 A01 xxx

xxx A02 A04 xxx

xxx A06 A05 xxx

xxx A07 A06 xxx

xxx A08 A09 xxx

因此，如果右上角的 A01 是活动单元格，则当 ActiveCell=ActiveCell.Offset(0,-1) 时移动到下一行。此处，由于 Active Cell > 相邻单元格，因此执行 Leftcut。现在，Activecell < Adjacent cell，所以执行RightCut。另一个右切将使这两个单元格相等，因此光标将移动到下一行，然后再次移动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T20:55:32.900

正如 Peter L. 所提到的，您至少应该增加`i`循环。

但是，我建议您更好地熟悉范围`.Offset`和`.Resize`范围。这将允许您显着减少代码。

我会为循环使用以下构造：

```
Set rng = Range("E2")
While _condition_
    ...Do something
    Set rng = rng.offset(1)
Wend 
```

我最终得到了这个最终代码，还修改了你的剪切子：

```
Sub RightCut(rng As Range)
    rng.Offset(, -4).Resize(, 4).Cut
    rng.Offset(, 5).Resize(, 4).Insert xlDown
    rng.Offset(, -4).Resize(, 4).Delete xlUp
End Sub

Sub LeftCut(rng As Range)
    rng.Resize(, 4).Cut
    rng.Offset(, 10).Resize(, 4).Insert xlDown
    rng.Resize(, 4).Delete xlUp
End Sub

Sub HighAce()
    Dim rng As Range
    Dim lngcount as Long

    Application.ScreenUpdating = True

    Set rng = Range("E2")

    While rng <> "" And rng <> rng.Offset(, -1)
        lngCount = lngCount + 1
        If lngCount > 40000 Then Stop
        If rng > rng.Offset(, -1) Then
            LeftCut rng
        ElseIf rng < rng.Offset(, -1) Then
            RightCut rng
        Else
            lngCount = 1
            Set rng = rng.Offset(1)
        End If

        'This assign the next row

    Wend
 End Sub 
```

我没有测试它，因为我没有数据并且不了解目的，但我相信它会给你一个起点！

# css - IE9 奇怪地渲染 Bootstrap 布局，我不知道为什么

> ID：14940792
> 
> 赞同：0
> 
> 时间：2013-02-18T16:25:02.773
> 
> 标签：css, html, twitter-bootstrap, css-float

[更新：问题已解决。]

问题出在标题部分，我在其中使用 a`<span3>`和 an `<hr>`，然后是 a`<span6>`和标题，然后是另一个`<span3>`。它在除 IE9 及以下的所有浏览器中都能正常工作。[编辑：它在 Firefox 中也坏了 :-( ]

我无法弄清楚为什么布局会这样中断，并且在 Mac 上，使用远程 VM 进行调试非常棘手。有任何想法吗？

截图如下：

Chrome 和其他优秀的浏览器： ![Chrome 和其他优秀的浏览器](../Images/c38944b1ae545b877f361e3101cb26a1.png)

IE9： ![IE9](../Images/d69f18f278a22dfb12ad4ed36ee13742.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:53:19.343

答案似乎是添加`clear: left;`到第一个`<span3>`. 这似乎不是一个理想的解决方案，但它仍然有效。

我在我的代码中这样做的方式是：

```
div.row.page-heading:first-child {
    clear: left;
} 
```

# facebook - 使用 fql 查找参加过特定大学的所有用户的列表

> ID：14940797
> 
> 赞同：0
> 
> 时间：2013-02-18T16:25:11.993
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我想查找使用 fql就读**特定大学的****所有 facebook 用户的列表。**

 **那可能吗？。如果是，那么我该如何编写该查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:50:12.293

查看 FQL 和 Graph API 文档，这似乎是不可能的。我什至不相信有一种简单的方法可以获取该页面的粉丝列表。他们阻止这种情况的最明显原因是防止营销人员获取包含个人信息的列表以用于发送促销或优惠（垃圾邮件）。**

# jquery - 将许多 jquery 插件压缩到一个文件中的正确方法是什么？

> ID：14940799
> 
> 赞同：1
> 
> 时间：2013-02-18T16:25:26.917
> 
> 标签：jquery, minify

我有几个用于我的网站的插件，比如 8 个，而不是加载 8 个单独的缩小插件。我只想加载一个大的缩小文件。

所以我下载了未压缩状态的所有插件。然后我将每个插件一个接一个地粘贴到一个文件中。之后我缩小了那个文件。但是，这似乎不起作用。例如，在我尝试此操作之前曾经可以使用的旋转木马现在只是出错了。

所以我的问题是我该怎么做呢？可能是因为命名空间问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:27:38.480

我使用了一个 PHP 库。它做得很好。

[缩小](http://code.google.com/p/minify/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:28:31.100

在所有 js 被缩小后合并所有文件更容易。

如果在使用未缩小版本时它们不相互冲突，那么就不是命名空间的问题。

您唯一应该记住的是`;`在每个文件的末尾和开头添加一个。

此外，如果您使用 Asp .Net MVC 4，则有许多工具可用于自动执行此操作。它被称为捆绑和转换。这是其中之一： http: [//bundletransformer.codeplex.com/](http://bundletransformer.codeplex.com/)

# r - R：可以通过索引行和列来循环填充矩阵吗？

> ID：14940802
> 
> 赞同：1
> 
> 时间：2013-02-18T16:25:46.797
> 
> 标签：r, matrix, population

我是一名生物学家和 R 新手，我正在学习如何创建一个简单的人口模型。

所以，我有一个包含 30 个年龄段的女性（1:4 是非育种者，5:30 是育种者）的人口矩阵（“pop”），它将被建模 100 年。

```
pop <- matrix(0,30,100) 
```

然后我用 3 位年轻的成年女性填充这个矩阵。

```
pop[5, 1] <- 3 
```

然后我想随机运行 100 年，看看这个群体随着时间的推移会如何变化。（我没有填写这些但你不需要它们，它们对于性成熟的成年人都有不同的生存概率。）

```
for (t in 1:100)  {  # Edited y to t, typing error!
    pop[1,t+1] <- rbinom(1,colSums(pop[5:30, t]), b/2) 
    pop[5, t+1] <- rbinom(1, pop[4, t], s2)
    pop[6, t+1] <- rbinom(1, pop[5, t], s2)
    .....
    pop[30, t+1] <- rbinom(1, pop[29, t], s2)
} 
```

所以我的问题是：有没有什么方法可以填充这个矩阵而不必显式编写 30 行代码？因为第 5 - 30 行都将是相同的，但即使经过 5 小时（字面意思）的网络搜索和 R 手动阅读，我也找不到索引行的方法，这似乎是这里需要的。

欢迎提供任何见解，包括对这一人群进行建模的不同方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:31:56.043

因为`rbinom`是矢量化的，你应该可以替换

```
pop[1,t+1] <- rbinom(1,colSums(pop[5:30, t]), b/2) 
pop[5, t+1] <- rbinom(1, pop[4, t], s2)
pop[6, t+1] <- rbinom(1, pop[5, t], s2)
.....
pop[30, t+1] <- rbinom(1, pop[29, t], s2) 
```

和

```
pop[,t+1] <- rbinom(27,size=c(colSums(pop[5:30,t]),pop[4:29,t]),
                       prob=c(b/2,rep(s2,26))) 
```

或类似的东西（26和27可能是错的，我可能算错了）

但是，我真正认为你应该做的是这样的事情：

```
pop[1,t+1]  <- rpois(1,b/2*sum(pop[5:30,t]))
pop[-1,t+1] <- rbinom(29,size=pop[1:29,t]),
                       prob=c(rep(s1,4),rep(s2,26))) 
```

这假设最后一个年龄段的个体从世界的边缘掉下来并死去......我在`rpois`这里使用的是允许泊松繁殖而不是二项式，尽管`rbinom(1,size=sum(pop[5:30,t])/2,prob=p)`如果你真的想坚持女性最多有 1 个，你可以使用后代（概率为 p）

# sql-server - SQL Server 在派生表中使用联合引用字段

> ID：14940821
> 
> 赞同：0
> 
> 时间：2013-02-18T16:26:52.833
> 
> 标签：sql-server, union-all, derived-table

我对一些派生表有一些疑问，希望有人能够提供帮助。我得到的是选择语句中的 2 个派生表，然后使用枢轴水平而不是垂直显示结果。

到目前为止，我得到的是：

```
SELECT * FROM(
SELECT SUM(Value) AS TotDays, ClassId FROM MainTable GROUP BY ClassId)
Union All
SELECT SUM(NumDays) As TotDays, ClassId FROM (
SELECT CASE WHEN COUNT(SiteId) > 0 THEN 1 ELSE 0 END AS NumDays
  FROM Table2 GROUP BY ClassId ) as SUB
) AS a
PIVOT (SUM(TotDays) FROM ClassId
   IN ([12],[13],[14],[15] 
```

我想要做的是引用各个列而不是使用 SELECT *，但我不知道该怎么做。如果我从联合中删除所有内容，我可以让它工作，但是当我把联合放入它时它不起作用，我必须使用 SELECT *.

有人对出了什么问题有任何想法吗？

谢谢

亚历克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:38:17.347

您的查询有几个错误。例如，您`UNION ALL`的集合具有不同的列数，并且您有其他语法错误。试试这个方法：

```
SELECT  [12],[13],[14],[15]
FROM (  SELECT SUM(Value) AS TotDays, ClassId 
        FROM MainTable 
        GROUP BY ClassId
        UNION ALL
        SELECT SUM(NumDays) As TotDays, ClassId 
        FROM (  SELECT  CASE WHEN COUNT(SiteId) > 0 THEN 1 ELSE 0 END NumDays, 
                        ClassId
                FROM Table2 
                GROUP BY ClassId) as SUB
    ) AS a
PIVOT (SUM(TotDays) FROM ClassId IN ([12],[13],[14],[15])) AS PT 
```

# c++ - 从 C++ 应用程序在 Windows 照片查看器中打开 .bmp

> ID：14940823
> 
> 赞同：0
> 
> 时间：2013-02-18T16:26:55.497
> 
> 标签：c++, image, bitmap, mfc

在我的程序中，我有一个 CImage，它被保存到硬盘驱动器上的 .bmp 文件中。如何让我的程序在 Windows 照片查看器中自动打开该图片？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:11:53.530

如果您希望该文件类型/扩展名的默认程序打开该文件，那么您必须打开一个 shell 并告诉它打开该文件类型的程序。

请参阅：[如何使用与其文件扩展名关联的程序打开文件？](https://stackoverflow.com/questions/9115574/how-can-you-open-a-file-with-the-program-associated-with-its-file-extension)更多细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:30:54.737

您应该只运行该程序，并*可能*通过命令行参数提供要打开的文件的路径。它确实取决于您要运行的程序。

在 Linux 上，要启动一个程序，您应该使用`fork`/`exec`对。在 Windows 上，您使用`CreateProcess`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-02T07:56:38.113

这个问题很老，但我也在寻找同样的问题并得到了答案。
希望它对其他人也有帮助。

```
::ShellExecute(NULL,L"open",_T("rundll32.exe"),_T("shimgvw.dll,ImageView_Fullscreen picture.bmp"),NULL,SW_SHOWNORMAL); 
```

这将在 Windows 默认照片查看器中打开图片。
在`picture.bmp`您需要传递图片/图像的完整路径的地方，例如`D:\\picture.bmp`.

# video-streaming - 如何使用 RTMP 插件在 Flowplayer 中直播 USTREAM？

> ID：14940824
> 
> 赞同：1
> 
> 时间：2013-02-18T16:26:56.810
> 
> 标签：video-streaming, rtmp, flowplayer

我有一个正在使用 USTREAM 直播的直播。我可以在我的 USTREAM 仪表板的频道远程设置下找到 RTMP URL 和流密钥。

我想通过 Flowplayer 直播我的频道。我已经下载了 RTMP 插件并将 netConnectionUrl 设置为 USTREAM RTMP URL 并将剪辑 URL 设置为 Stream 键，但它不起作用。

它给出了以下错误：

```
201, Unable to load stream or clip file, connection failed, clip: '[Clip] 'XSWjEqbQbMPS8BdcEUsqJZJgUvgNydFu'' 
```

这是我对 Flowplayer 的 JavaScript 设置：

```
flowplayer("player", "/js/vendor/flowplayer/flash/flowplayer-3.2.16.swf", {
  clip: {
    url: "XSWjEqbQbMPS8BdcEUsqJZJgUvgNydFu", // Stream Key
    live: true,
    autoPlay: false,
    autoBuffering: true,
    provider: 'rtmp'
  },
  plugins: {
    audio: {
      url: '/js/vendor/flowplayer/flash/flowplayer.audio-3.2.10.swf'
    },
    rtmp: {
      url: '/js/vendor/flowplayer/flash/flowplayer.rtmp-3.2.12.swf',
      netConnectionUrl: 'rtmp://1.3048370.fme.ustream.tv/ustreamVideo/3048370' // RTMP Url
    }
  }
}); 
```

有人知道如何让 USTREAM 通过 Flowplayer 工作吗？

# c - lzw压缩的可变长度字符串数组

> ID：14940825
> 
> 赞同：0
> 
> 时间：2013-02-18T16:26:59.693
> 
> 标签：c, string, compression, lzw

这里是函数本身。我在那里有一个段错误，因为显然我无法将字符串分配给数组中的那个值。clang/gcc 都给我一个警告。Clang 的更好一点，即“期望 char 分配 char *”。我不知道有任何其他方法可以使用该词典，因为我尝试过的所有方法都不起作用。我还将包含它的*所有*辅助函数，但我很确定它在这个函数本身中。

像往常一样，我会投票赞成任何有效的答案，我会接受我个人选择的答案。无论如何，我将在下面发布其余的“帮助”功能。

```
void lzw_compress(char *uncompressed_data,size_t uncompressed_length,char *out){
unsigned long i=0,j=0;
char *character=malloc(1);
char *word=malloc(65535);
char *word_character=malloc(65535);
unsigned long word_size=0;
long *tmp_buffer=malloc(65535);
char *dictionary=malloc(130000);
for(i=0;i<=255;++i){
    dictionary[i]=base_dictionary[i];
}
long index=0;  
unsigned long dictionary_size=256;
for(i=0;i<uncompressed_length;++i){
    character[0]=(unsigned char )uncompressed_data[i];
    //arrcat(word_character,word,word_size,character);
    for(j=0;j<word_size;++j){
        word_character[j]=word[j];
    }
    word_character[j]=*character;
    index=search(dictionary,dictionary_size,word_character);
    if(index!=-1){
        for(j=0;j<(word_size+1);++j){
            word[j]=word_character[j];
        }
        ++word_size;
    }
    else{
        tmp_buffer[j++]=index;
        ++dictionary_size;
        //dictionary[dictionary_size++]=(unsigned long *)word_character;

            dictionary[dictionary_size]=*word_character;

        word=*character;
        word_size=1;
    }
}
if(memcmp(word,"",1)!=0){
    tmp_buffer[j++]=search(dictionary,dictionary_size,word);
}
    char *debug="";
    for(i=0;i<j;++i){
        sprintf(debug,"%s%lu,",debug,tmp_buffer[i]);
    }
    printf("%s",debug);

}

long search(char *table,unsigned long table_length,char
*search_value){
    unsigned long i=0;
    for(i=0;i<table_length;++i){
        if(table[i]==*search_value){
            return i;
        }
    }
    return -1; 
 } 
```

正如你所看到的，我正在尝试用纯 c 语言做一个类似 lzw 的程序。我*总是*用 -Wall -std=c99 编译（因为我偶尔会使用 p99.h 来滥用预处理器宏）。但由于某种原因，我无法让我的字符串数组工作，我知道我使用过类似的代码（但显然我没有备份它......）但无论如何是的。我无法弄清楚我应该如何（正确地）这样做。我将非常感谢任何人在此问题上的帮助。

按照正常情况，我在这里发布的任何代码都是公共领域，除非另有说明，一旦我完成了整个工作，我将其发布在这里，以便其他寻找它的人也可以让它工作。

最后感谢您阅读此主题，并为我提供帮助（如果您知道如何）。一旦我去城里回来（如果已经有答案），我会检查它/然后标记一些东西。但是不要让这让你灰心，因为你的解决方案可能比我选择的解决方案更好，而且你仍然会得到支持。

编辑1：将代码编辑为以前的内容（根据git）。

编辑2：修复了很多东西，让它看起来更好。数组比较功能仍然不起作用（出于某种奇怪的原因）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:43:44.020

现在您有了分配，有几点可以确定为错误：

```
for(i=0;i<uncompressed_length;++i){
    character[0]=(unsigned char )uncompressed_data[i];
    //arrcat(word_character,word,word_size,character);
    for(j=0;j<word_size;++j){
        word_character[j]=word[j];
    } 
```

最初，内存`word`指向的是未初始化的，并且`word_size`是 1。所以你将不确定的复制`char` `word[0]`到`word_character[0]`. 我不确定您是应该`word_size = 0`最初设置，还是移动那个复制循环，或者其他什么。

```
word_character[j]=character; 
```

您正在将 a 分配`char*`给 a `char`。您可能是指`word_character[j] = *character;`那里（或`character[0]`代替`*character`，这是等效的）。

```
 dictionary[dictionary_size]=word_character; 
```

再次将 a 分配`char*`给 a `char`。我猜不出你在这里想要什么，因为`dictionary_size`在循环中没有改变。也许您想增加`dictionary_size`和复制`word_character`字符串？

```
 word=character;
    word_size=1; 
```

在这里，您丢失了`word`最初分配给内存的句柄 - 通常称为内存泄漏 - 并让`word`指向一个有足够空间容纳*一个*字符的内存块。您可能打算复制指向的字符，

```
word[0] = character[0]; 
```

那里？

* * *

原始代码的初始答案：

```
void lzw_compress(char *uncompressed_data,size_t uncompressed_length,char *out){
unsigned long i=0,j=0;
char *character;
char *word;
char *word_character;
unsigned long word_size=1;
long *tmp_buffer=malloc(65535);
char *dictionary;
for(i=0;i<=255;++i){
    dictionary[i]=base_dictionary[i];
} 
```

您没有为`dictionary`指向分配任何内存，这是具有非零段错误概率的未定义行为。

```
long index=0;  
unsigned long dictionary_size=256;
for(i=0;i<uncompressed_length;++i){
    character[0]=(unsigned char )uncompressed_data[i]; 
```

`character`您还没有为任何一个未定义的行为分配内存。

```
 //arrcat(word_character,word,word_size,character);
    for(j=0;j<word_size;++j){
        word_character[j]=word[j];
    } 
```

`word_character`也`word`不要指向分配的内存，更多未定义的行为。

```
 word[j]=(unsigned long)character; 
```

您正在转换 a并将该值分配给 a (non-allocated `char*`) 。就算是有效记忆，这里的用意是什么？`unsigned long``char``word[j]`

```
 index=search(dictionary,dictionary_size,word_character);
    if(index!=-1){
        for(j=0;j<(word_size+1);++j){
            word[j]=word_character[j];
        }
        ++word_size;
    }
    else{
        tmp_buffer[j++]=index;
        ++dictionary_size;
        //dictionary[dictionary_size++]=(unsigned long *)word_character;
      for(j=0;j<word_size;++j){
            dictionary[dictionary_size]=word_character;
       }
        word=character;
        word_size=1;
    }
}
if(memcmp(word,"",sizeof word)!=0){ 
```

`sizeof word`是 a 的大小`char*`。您可能打算在这里使用字符串的长度。

```
 tmp_buffer[j++]=search(dictionary,dictionary_size,word);
}
    char *debug="";
    for(i=0;i<j;++i){
        sprintf(debug,"%s%lu,",debug,tmp_buffer[i]); 
```

`sprintf`使用重叠的源和目标调用是未定义的行为。在这种情况下，它甚至是一个字符串文字。字符串文字不可修改，因此这是未定义行为的另一个来源，并且可能由于尝试修改字符串文字而导致崩溃。

```
 }
    printf("%s",debug);

} 
```

# c++ - gdb - 如何查看使用了什么函数？

> ID：14940826
> 
> 赞同：1
> 
> 时间：2013-02-18T16:27:00.167
> 
> 标签：c++, gdb

我有一个我正在尝试跟踪的 OpenGL 库错误，并且该错误将一些看起来像 C 代码的内容打印到标准输出中。[这是程序](http://pastie.org/6214339)，一旦`glutMainLoop()`调用就会出现错误，但我怀疑不是那个函数有问题。我将如何跟踪写入标准输出的函数？

根据要求，输出：

```
arc_ccw_turn, p = 0
case b
arc_ccw_turn, p = 0
case d
arc_ccw_turn, p = 0
case a
arc_ccw_turn, p = 0
case c 
```

我已经[报告了这个错误](https://bugs.freedesktop.org/show_bug.cgi?id=61003)，但我也会尝试为这个问题提供一个 GDB 回溯。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T17:37:42.067

如果您使用的是 Linux，则在 上设置断点`write()`，所有输出到`stdout`并`stderr`最终通过此函数。以下是对于`x86-64`其他架构，您需要更改寄存器名称：

```
$ gdb /usr/bin/cat
Reading symbols from /usr/bin/cat...(no debugging symbols found)...done.
(gdb) set args /proc/cpuinfo
(gdb) b write
Breakpoint 1 at 0x401740
(gdb) condition 1 ($rdi == 1 || $rdi == 2)
(gdb) display $rdi
(gdb) display $rsi
(gdb) display $rdx
(gdb) r
Starting program: /usr/bin/cat /proc/cpuinfo
3: $rdx = 3368
2: $rsi = 6348800
1: $rdi = 1
(gdb) p (char*)$rsi
$4 = 0x60e000 "processor\t: 0\nvendor_id\t: GenuineIntel\ncpu family\t: 6\nmodel\t\t: 30\nmodel name\t: Intel(R) Core(TM) i7 CPU         870  @ 2.93GHz\nstepping\t: 5\nmicrocode\t: 0x5\ncpu MHz\t\t: 1199.000\ncache size\t: 8192 KB\nphy"... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:31:32.670

`std::streambuf::sputc`在和上放置断点`std::streambuf::sputn`。如有必要，请`print std::cin::rdbuf()`在进入 后执行`main`，并将断点设置`this`为等于使用从该表达式中返回的值。

# ruby-on-rails - rails 中的幽灵 db 列。未定义的方法“电子邮件”

> ID：14940827
> 
> 赞同：0
> 
> 时间：2013-02-18T16:27:01.727
> 
> 标签：ruby-on-rails, ruby, database, rails-activerecord

如果我尝试创建一个新的模型对象，我会遇到一个奇怪的错误。奇怪的是，错误消息中的列在数据库中不可用。这就是我所做的：

我的控制台输出：

```
1.9.3p286 :002 > person = OZBPerson.new
     => #<OZBPerson Mnr: nil, UeberPnr: nil, Passwort: nil, PWAendDatum: nil, Antragsdatum: nil, Aufnahmedatum: nil, Austrittsdatum: nil, Schulungsdatum: nil, Gesperrt: 0, SachPnr: nil, encrypted_password: "$2a$10$...", reset_password_token: nil, reset_password_sent_at: nil, remember_created_at: nil, sign_in_count: 0, current_sign_in_at: nil, last_sign_in_at: nil, current_sign_in_ip: nil, last_sign_in_ip: nil, created_at: nil, updated_at: nil> 
1.9.3p286 :003 > person.valid?
    NoMethodError: undefined method `email' for #<OZBPerson:0x007ffd2b30dee8>
        from /usr/local/rvm/gems/ruby-1.9.3-p286/gems/activemodel-3.2.3/lib/active_model/attribute_methods.rb:407:in `method_missing' 
```

我的导轨模型：

```
class OZBPerson < ActiveRecord::Base
    self.table_name = "ozbperson"
    self.primary_key = :Mnr

    attr_accessible :Mnr, 
    :UeberPnr
end 
```

我的数据库表：

```
CREATE TABLE `ozbperson` (
`Mnr` int(10) unsigned NOT NULL,
`UeberPnr` int(10) unsigned DEFAULT NULL,
`Passwort` varchar(35) DEFAULT NULL,
`PWAendDatum` date DEFAULT NULL,
`Antragsdatum` date DEFAULT NULL,
`Aufnahmedatum` date DEFAULT NULL,
`Austrittsdatum` date DEFAULT NULL,
`Schulungsdatum` date DEFAULT NULL,
`Gesperrt` tinyint(2) NOT NULL DEFAULT '0',
`SachPnr` int(10) unsigned DEFAULT NULL,
`encrypted_password` varchar(64) NOT NULL DEFAULT '$2a$10$...',
`reset_password_token` varchar(128) DEFAULT NULL,
`reset_password_sent_at` datetime DEFAULT NULL,
`remember_created_at` datetime DEFAULT NULL,
`sign_in_count` int(10) DEFAULT '0',
`current_sign_in_at` datetime DEFAULT NULL, 
```

没有像“电子邮件”这样的字段，但我仍然收到此错误消息。怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:12:58.177

如果您使用的是设计，请将其添加到您的模型中

```
def email_required?
    false
end 
```

它覆盖了设计模型中当前存在的内容，这是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:38:48.763

我猜这是因为您使用的是设计。Devise 需要一个电子邮件字段，因此其 reset_password_token （尝试通过电子邮件查找用户）之类的方法可以工作。如果您不使用设计，请忽略此答案，否则您需要向您的人添加电子邮件。

# ember.js - 何时编写自定义 ember-data 适配器？

> ID：14940829
> 
> 赞同：4
> 
> 时间：2013-02-18T16:27:03.983
> 
> 标签：ember.js, ember-data

我正在编写一个 ember 应用程序，它从 Lastfm API 中提取大部分数据。API 不是 RESTful。我不确定我应该自定义什么级别的抽象。我应该继续编写自定义 LastFm ember-data 适配器吗？还是我应该一起回避 ember-data？

它们返回类似于以下的数据：

```
{ "recenttracks" : { "meta" : {}, "tracks" : [ { track info }, { track info } ] } } 
```

对于请求数据，他们有一个涉及发送`method`参数的方案。所以，这不是最糟糕的事情，但肯定不是 RESTful。

无论如何，只是寻找一点方向，因为我是 ember-data 的新手。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:18:09.087

就个人而言，我会创建一个新的适配器，不一定`RESTAdapter`将参数传递给`find`and `findAll`：

```
var lastFmAdapter = DS.Adapter.create({
  find: function (store, type, id) { },
  findAll: function (store, type) { }
}); 
```

# c++ - 四面体师

> ID：14940834
> 
> 赞同：-4
> 
> 时间：2013-02-18T16:27:15.063
> 
> 标签：c++, algorithm, math

> 给定一个正四面体。所有的边被分成N个相等的段。在这个四面体内部可以构建多少个顶点在分割点的非退化（|volume|>0）四面体？给定四面体的顶点不能作为分割点。

例子：

*   对于 N=2，答案是 12。
*   对于 N=37，答案是 65561472。

[这是一些伪代码的答案](https://math.stackexchange.com/questions/306272/how-many-tetrahedrons-in-a-tetrahedron/306493#306493)，但我未能将最后一步翻译成 C++。这是我到目前为止所做的：

```
typedef unsigned long long ulong;
ulong histogram[3002];

int main() {
    memset(&histogram[0],0,sizeof(ulong)*3002);
    ulong N;
    cin >> N;
    ulong m = N-1;
    ulong u,U,z,Z;
    ulong tetra = 3*m*m*(53*m*m-34*m+1)/4;

    for( u = 1; u < N; u++) {
        U = u/(N-u);
        for( z = 1; z < N; z++) {
            Z = z/(N-z);
            histogram[U*Z]++;
        }
    }

    // How to write the following steps in C++?
    /*number_degen = 0;
    foreach fraction in histogram {
        number_degen += histogram{fraction}^2;
    }*/
    // I am trying something like this
    ulong number_degen = 0;
    for (int i = 0; i<3002; i++)
        number_degen += histogram[i] * histogram[i];

    cout<<number_degen<<endl;
    cout<<tetra-3*number_degen<<endl;
} 
```

"number_degen" = "950404" 如果 N=37，当它必须是 4836 时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:41:00.593

一个问题（它可能是您的实现中唯一缺少的）是您如何在 C++（和许多其他语言）中取正方形：

```
number_degen += histogram[fraction] ^ 2;    // <-- wrong! 
```

`^`C++ 中的运算符*不会*计算两个数字的幂，而是它们的按位 XOR 组合。要取两个数字的平方，有两种可能：要么将数字与自身相乘，要么取其为 2 的幂。对于整数，应该首选第一个，因为采用数字的幂将产生浮点数。

```
number_degen += histogram[fraction] * histogram[fraction]; 
```

# jquery - Windows phone 7 不执行 jquery document.ready 使用 phonegap

> ID：14940835
> 
> 赞同：1
> 
> 时间：2013-02-18T16:27:18.070
> 
> 标签：jquery, windows-phone-7, cordova

使用 windows phone 7 模拟器和 cordova 2.4.0

当我使用从 A 页面导航到 B 页面时

```
window.location.replace("B.html") 
```

这

```
$(document).ready(function () {}) in B.html didn't execute... 
```

我在虚拟按钮中的 onclick 事件绑定器上尝试了相同的代码，并且它有效

我认为它们是 windows phone 7 和 jquery document.ready 事件之间的一些问题，任何人都知道背后的原因以及如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T21:00:34.203

在进行 PhoneGap 时，您不应依赖 document.ready。您应该使用 PhoneGap 的 deviceready 事件。请查看这些线程：[javascript document.ready() function not working in windows phone emulator with cordova 1.5](https://stackoverflow.com/questions/9860635/javascript-document-ready-function-not-working-in-windows-phone-emulaiton-with)

[JQuery document.ready vs Phonegap deviceready](https://stackoverflow.com/questions/12576062/jquery-document-ready-vs-phonegap-deviceready)

# c# - 从 VBScript 使用 BackgroundWorker

> ID：14940836
> 
> 赞同：0
> 
> 时间：2013-02-18T16:27:21.337
> 
> 标签：c#, vbscript, backgroundworker, installshield

我创建了这样的代码来使用另一个类的 BackgroundWorker：

```
 public void BackgroundWorkerTest()
    {
        BackgroundWorker bw = new BackgroundWorker();

        bw.WorkerReportsProgress = true;
        bw.WorkerSupportsCancellation = false;
        bw.DoWork += new DoWorkEventHandler(DoWork);
        bw.ProgressChanged += new ProgressChangedEventHandler(ProgressChanged);
        bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(RunWorkerCompleted);
        bw.RunWorkerAsync();
        while (bw.IsBusy) 
            System.Threading.Thread.Sleep(50);
    }

    private void DoWork(object sender, DoWorkEventArgs e)
    {
        BackgroundWorker worker = sender as BackgroundWorker;

        string connStr = "<conn_str>";
        string path = "";
        MyClass.StaticMethod(string1, string2, worker);
    }

    private void ProgressChanged(object sender, ProgressChangedEventArgs e)
    {
        int progress = e.ProgressPercentage;
        string message = e.UserState.ToString();
    }

    private void RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
    {
        string progress = "Done.";
    } 
```

从 MyClass.StaticMethod() 我打电话

```
 worker.ReportProgress(percents, message); 
```

发送进度信息。是否可以在 VBScript 中使用上述代码（在 BackgroundWorkerTest() 方法中提到）或类似代码？需要从 VBScript（在 InstallShield 中）输出进度信息。它有足够的能力吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T19:49:35.437

如果您使用的是基于 MSI 的 InstallShield 项目类型，请使用 Google Windows Installer XML (WiX) Deployment Tools Foundation (DTF)。DTF 是一个 SDK，用于创建要在 MSI 内部运行的托管代码自定义操作。

如果您使用的是 InstallScript 项目类型，请使用 Google DotNetCoCreateObject（InstallScript 函数）。

无论如何，我建议确保你没有重新发明轮子。（我看到您对连接字符串的引用。）

# c# - 如何在两个字符串之间获取值

> ID：14940837
> 
> 赞同：0
> 
> 时间：2013-02-18T16:27:21.570
> 
> 标签：c#, asp.net

我有一个长字符串（html），我想获取 <td> </td> 之间的每个值，例如，我需要字符串“avatr”、“lionking”：

```
<td>avatar</td>  <td> lionking</td> and so on.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:32:12.830

因为您正在解析 HTML（一种上下文无关语言），所以您不应该使用正则表达式。有关详细信息，请参阅[此帖子](https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454)。

幸运的是，.NET 有一个很棒的库可用于解析 HTML，称为[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)

# cakephp - cakePHP & Twitter Bootstrap - 查看

> ID：14940838
> 
> 赞同：0
> 
> 时间：2013-02-18T16:27:26.733
> 
> 标签：cakephp, layout, twitter-bootstrap, routes, scaffold

我正在将此插件与 CakePHP --> [TwitterBootstrap](https://github.com/slywalker/TwitterBootstrap)一起使用，除了我无法更改布局之外，一切都像发光一样工作。IE。索引，添加等。

我有一个名为 Cinema 的模型，并用蛋糕烘焙和 Views/Cinemas 制作了同样的东西

这是我的控制器：

```
<?php
App::uses('AppController', 'Controller');
/**
 * Cinemas Controller
 *
 */
class CinemasController extends AppController {

/**
 *  Layout
 *
 * @var string
 */
    public $layout = 'bootstrap';

/**
 * Scaffold
 *
 * @var mixed
 */
    public $scaffold;

} 
```

我是否将 CakePHPs 路由覆盖到一些特殊的脚手架模板中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:34:50.567

通过`public $scaffold;`在控制器中定义，您告诉 Cake 您要启用[脚手架](http://book.cakephp.org/2.0/en/controllers/scaffolding.html)模式，这使您可以轻松地插入/编辑/删除一些记录。脚手架模式始终使用您的“默认”布局。

换句话说，通过定义`public $scaffold;`变量，您“否决”了您的布局。脚手架模式不采用该设置。只需删除该`public $scaffold;`行即可返回您的引导程序布局。

# drupal-7 - Drupal 7 在使用 omega 和 delta 的页面上使用不同的主题

> ID：14940842
> 
> 赞同：3
> 
> 时间：2013-02-18T16:27:38.013
> 
> 标签：drupal-7, drupal-theming, theming, delta

我可以在不同的页面上使用不同的子主题吗？我创建了两个 omega 子主题 - 主题 1（设置为默认）和主题 2。我现在可以使用 delta 和上下文模块将主题 2 分配给一组页面吗？我创建了基于主题 2 的增量主题，以及基于页面名称的上下文，但页面显示主题 1。

以上是可能的，还是我仅限于使用主题 1 的变体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:26:25.483

使用模块主题键[http://drupal.org/project/themekey](http://drupal.org/project/themekey)。

这应该做你需要的

# javascript - javascript OOP 中的公共方法

> ID：14940845
> 
> 赞同：2
> 
> 时间：2013-02-18T16:27:50.477
> 
> 标签：javascript, oop, methods

我想用我可以在类内和类外调用的方法制作一个 javascript 类。如果你愿意，我想做一个“公共”方法。我想要`getTextAreaElement`并且`appendTextArea`成为这样的方法。

我已经展示了到目前为止我能想到的最好的代码片段。我还尝试将方法定义为原型以及在类 ( `this.func = ...`) 中。但这只允许我在 ( `new Socket().appendTextArea("osgjr89");`) 之外调用该方法，但*不能*在类本身内调用该方法！下面的代码片段显示了完全相反的实现，我不能在类外调用该方法，但*可以*在类内调用它。

错误：

> Uncaught TypeError: Object #Socket has no method 'appendTextArea'

socket.js：

```
function Socket() {
var socket;
var canvas = document.getElementById('c');
var context = canvas.getContext("2d");

if (window.WebSocket) {
    socket = new WebSocket("ws://localhost:9012/websocket");
    socket.binaryType = 'arraybuffer';
    socket.onopen = onopen;
    socket.onmessage = onmessage;
    socket.onerror = onerror;
    socket.onclose = onclose;
} else {
    alert("Your browser does not support Web Socket.");
}

function getTextAreaElement() {
    return document.getElementById('responseText');
}

function appendTextArea(newData) {
    var el = getTextAreaElement();
    el.value = el.value + '\n' + newData + " :)";
}

function onopen(event) {
    getTextAreaElement().value = "Web Socket opened!"; 
}
/*[...]*/
} 
```

main.js（在 socket.js 之后加载）

```
$(document).ready(function() {
var s = new Socket();
s.appendTextArea("osgjr89"); // ERROR!
}); 
```

更新的 socket.js：

```
function Socket() {
[...]
if (window.WebSocket) {
    socket = new WebSocket("ws://localhost:9012/websocket");
    socket.binaryType = 'arraybuffer';
    socket.onopen = this.onopen;
    socket.onmessage = this.onmessage;
    socket.onerror = this.onerror;
    socket.onclose = this.onclose;
} else {
    alert("Your browser does not support Web Socket.");
}

this.getTextAreaElement = function() {
    return document.getElementById('responseText');
}

this.appendTextArea = function(newData) {
    var el = this.getTextAreaElement();
    el.value = el.value + '\n' + newData + " :)";
}

this.onopen = function(event) {
    this.getTextAreaElement().value = "Web Socket opened!";
}
[...]
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-18T16:29:38.553

所有公共方法都必须声明为属性，而不是变量/函数。所以，你必须改变这样的东西：

```
function getTextAreaElement() {
    return document.getElementById('responseText');
} 
```

进入

```
this.getTextAreaElement = function() {
    return document.getElementById('responseText');
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:29:29.150

如果你这样做`this.func = function() {}`，你可以调用构造函数内部的函数（`Socket`在你的情况下）使用`this.func()`以及外部使用：

```
var s = new Socket();
s.func(); 
```

# php - jquery自动完成位置附近的商店

> ID：14940851
> 
> 赞同：0
> 
> 时间：2013-02-18T16:28:14.340
> 
> 标签：php, jquery, geolocation, google-api

我有一个我放在 javascript 数组中的商店列表。我也有他们的地址。

我需要创建一个自动完成功能，它允许我输入一个城市名称，并显示离该位置最近的 3 个。我想它需要以某种方式与谷歌的 api 接口，但不确定从哪里开始。

我有实际的自动完成 jquery 东西在一个 ajax 脚本上工作，但我不知道如何让东西位于最近的位置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:50:06.383

您需要商店的纬度/经度位置，[https://developers.google.com/maps/documentation/geocoding/](https://developers.google.com/maps/documentation/geocoding/)然后您需要用户的经度/纬度位置，通过一些相对简单的数学计算距离在这两点之间：

```
$distance = round((6371*3.1415926*sqrt(($lat2-$lat1)*($lat2-$lat1) + 
cos($lat2/57.29578)*cos($lat1/57.29578)*($lon2-$lon1)*($lon2-$lon1))/180), 1); 
```

如果您有大量商店和大量用户，我建议将这些距离缓存在 mysql 表中，您必须为数据库中的每个商店执行此操作。因此，您为每个请求此的邮政编码创建一个表，并设置一个 cron 以每隔一小时左右删除这些表。

所以过程：

1.  用户询问最近的商店
2.  您通过 google api（或您自己的存储）获取他的位置
3.  检查是否有他所在位置的表格
4.  如果是，直接给他结果，如果不是生成表格并给他结果

请注意，谷歌只允许有限数量的数据请求。尽管这个数字很大（我相信每天有 25.000 个请求），但还是建议存储您的商店和用户的经纬度位置。也会提高速度。

我做了类似的事情，我在将位置插入数据库的那一刻获取了纬度/经度位置，并将其插入到单独的每个邮政编码纬度/经度表中。

# c - 使用 gdb 调试回调

> ID：14940871
> 
> 赞同：2
> 
> 时间：2013-02-18T16:29:38.820
> 
> 标签：c, gdb, function-pointers

我正在尝试使用`gdb`调试一个 C 程序，该程序一切正常，直到我将一个指针传递给一个函数（到第三方库），之后`gdb`失去焦点并且程序运行而没有在我的回调函数中遇到我的断点。

例如，我`pcap_loop`从`libpcap`库中调用，该库需要一个指向我的回调函数的指针`got_packet`。

```
 pcap_loop(handle, num_packets, got_packet, NULL); 
```

一旦我踏入或越过这条线，`gdb`我的断点`got_packet`就永远不会被击中。
为什么 ？
有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T17:00:54.177

在某些情况下可以跳过 GDB 断点，尤其是在调试启用优化的编译代码时，但最可能的答案是库函数没有按照您的预期执行。

GDB 无法*进入*没有调试信息的库，因此它只是看起来“失去焦点”，正如您所说，在返回点设置一个临时断点并等待函数完成。这仍然不应该阻止回调内的断点触发。

如果您使用的是来自操作系统存储库的库，那么您可能会发现可以安装一个“调试”包。这将允许您进入库代码并可能找出问题所在。

`printf`但是，添加调试或以某种方式“破坏”`got_packet`函数会导致信号 ( `*(int *)0 = 1`) 并以这种方式满足自己，无论它是否被调用，通常要简单得多。

如果您可以证明该函数确实被调用，并且 GDB 确实没有捕获断点，那么您就有了 GDB 错误（或者可能是内核错误）。

# objective-c - NSMutableArray 根本不工作

> ID：14940873
> 
> 赞同：0
> 
> 时间：2013-02-18T16:29:40.260
> 
> 标签：objective-c, arrays, cocos2d-iphone, nsmutablearray

我正在尝试将精灵添加到 a`NSMutableArray`但它没有添加它们。这就是我所拥有的：

```
NSMutableArray *tail;
CCSprite *block;
int j;
-(void)handleTail:(CCSprite*)pos{
    CGPoint point= pos.position;
    block = [CCSprite spriteWithFile:@"Icon-Small-50.png"];
    //Adding the tail blocks
    block.scale = .8;
    block.color = ccGREEN;
    block.position = point;
    NSLog(@"Block Pos (%f,%f)",block.position.x,block.position.y);

    //CGPoint playerPos = piece.position;

    originalPos = point;

    if ([tail count] < maxLength) {
        [tileMap addChild:block];
        [tail addObject:block];
        NSLog(@"Tail length:%i",tail.count);
        j+=1;
    }
    if (j == 3) {
        NSLog(@"J called");
        [tail removeObjectAtIndex:0];
    }   
} 
```

我不明白为什么这不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:32:06.230

您尚未分配 + 初始化`tail`.

在 awakeFromNib 或 init 或 viewDidLoad （适用于您的课程）使用

```
tail=[[NSMutableArray alloc] init]; 
```

* * *

建议注意：尝试遵循命名约定。

作为`tail`一个数组（复数），您应该使用`tails`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T06:04:57.387

你忘记分配 init NSMuttableArray

tail = [[NSMuttableArray alloc]init];

没有 alloc 和 init 你的数组，你不能向它添加对象

当您尝试访问其成员时，它返回 nil

试试 NSLog (@"%@",tail); 它返回

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:32:41.190

你需要实例化你的 NSMutableArray。

```
tail = [NSMutableArray array]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:33:08.413

您需要分配和初始化数组。

就像是：

```
tail = [NSMutableArray array]; 
```

# android - 如何将 tabhost 设置为仅占用一些最大宽度和高度

> ID：14940877
> 
> 赞同：0
> 
> 时间：2013-02-18T16:29:57.187
> 
> 标签：android, android-layout, android-tabhost

我正在尝试在我的应用程序中添加标签主机。到目前为止，我已经完成了部分工作（由于某种原因，内容没有显示，但稍后会修复）。但是是否有可能（无需像另一个 3 容器那样添加并且像疯了一样添加边距）以确保 tabhost 不会在屏幕上占用太多空间，或者除非使用边距，否则它是否必须占用整个屏幕

我现在的方式

| ***_* __ *_* __ *_* __ *_* __ *_* __ *_* ___** **| 标题
|
标签栏 |标签内容
|标签内容
|*****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _*****

 ***但居中

我想要的方式

| ***_* __ *_* __ *_* __ *_* __ *_* __ *_* ___** **| 页眉
|标签栏 | 图片
|标签内容 | 图片
|标签内容 | 图片
|*****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _*****

 ***一张图片只是一张占据了右边整个空间的图片

仅通过操纵标签主机就可以实现这样的事情吗？或者tabhost是一个全屏的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:51:09.863

我想到了。之前我的 xml 有一些奇怪的工作，但这是可能的。我使用的是LinearLayout，右边的图片它的权重是1。然后下面是我如何设置tabhost以允许它只是一个包含其内容的高度和宽度。

```
 <TabHost
            android:id="@android:id/tabhost"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:layout_marginTop="125dp" >

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_gravity="center_vertical"
                android:orientation="vertical" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_gravity="center_horizontal" >

                </TabWidget>

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="match_parent"
                    android:layout_height="0dp"
                    android:visibility="gone" />

                <FrameLayout
                    android:id="@+android:id/realtabcontent"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content" />

            </LinearLayout>
        </TabHost> 
```

这对我有用，希望对其他人有帮助。******

# lucene - Zend Lucene 和连字符 - 搜索部件号

> ID：14940878
> 
> 赞同：0
> 
> 时间：2013-02-18T16:29:56.683
> 
> 标签：lucene

我已经设置 Zend Lucene 来搜索 products_name 和 part_number。

这很好用，但是带有连字符的部件号存在问题。

例如，如果我有零件号：5130193-00

这将返回任何以“00”结尾的零件号。

如何让 Lucene 只返回确切的部件号？

我正在使用 Zend_Search_Lucene_Analysis_Analyzer::setDefault(new Zend_Search_Lucene_Analysis_Analyzer_Common_TextNum_CaseInsensitive()); 索引和搜索时（不区分大小写不起作用，但这是另一个问题），并且零件编号被索引为文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:32:05.527

尝试用斜杠转义破折号：`part_number:5130193\-00`。

[此处](http://lucene.apache.org/core/old_versioned_docs/versions/2_9_1/queryparsersyntax.html)提供了更多信息（请参阅*转义特殊字符*）。

# android - Android Viewpager EdgeEffect 自定义颜色

> ID：14940882
> 
> 赞同：2
> 
> 时间：2013-02-18T16:30:02.600
> 
> 标签：android, android-viewpager

我正在尝试在我的应用程序的 Viewpager 中自定义 EdgeEffect。目的是用自定义的红色替换蓝色 ics Overscroll EdgeEffect 即。所以起初我编辑了[overscroll_edge](https://github.com/android/platform_frameworks_base/blob/master/core/res/res/drawable-xhdpi/overscroll_edge.png)和相应的overscroll_glow。然后我将它们都放入我的应用程序的 /res/drawable 目录中。此外，我将[EdgeEffect 源文件](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/widget/EdgeEffect.java)复制到了我的应用程序的 /src/android/widget/ 目录。我在 EdgeEffect 中所做的唯一更改是导入 com.my.application.R 而不是 com.android.internal.R。

但是 Android 不会使用我的自定义 android.widget.EdgeEffect 而不是 Android 系统中的那个，所以 Viewpager EdgeEffect 一直保持蓝色。我错过了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-01-20T21:01:32.437

您可以设置一些反射的`EdgeEffect`颜色：`ViewPager`

```
public static void setEdgeGlowColor(ViewPager viewPager, int color) {
    try {
        Class<?> clazz = ViewPager.class;
        for (String name : new String[] {
                "mLeftEdge", "mRightEdge"
        }) {
            Field field = clazz.getDeclaredField(name);
            field.setAccessible(true);
            Object edge = field.get(viewPager); // android.support.v4.widget.EdgeEffectCompat
            Field fEdgeEffect = edge.getClass().getDeclaredField("mEdgeEffect");
            fEdgeEffect.setAccessible(true);
            setEdgeEffectColor((EdgeEffect) fEdgeEffect.get(edge), color);
        }
    } catch (Exception ignored) {
    }
}

public static void setEdgeEffectColor(EdgeEffect edgeEffect, int color) {
    try {
        if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {
            edgeEffect.setColor(color);
            return;
        }
        Field edgeField = EdgeEffect.class.getDeclaredField("mEdge");
        Field glowField = EdgeEffect.class.getDeclaredField("mGlow");
        edgeField.setAccessible(true);
        glowField.setAccessible(true);
        Drawable mEdge = (Drawable) edgeField.get(edgeEffect);
        Drawable mGlow = (Drawable) glowField.get(edgeEffect);
        mEdge.setColorFilter(color, PorterDuff.Mode.SRC_IN);
        mGlow.setColorFilter(color, PorterDuff.Mode.SRC_IN);
        mEdge.setCallback(null); // free up any references
        mGlow.setCallback(null); // free up any references
    } catch (Exception ignored) {
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T22:51:41.127

您必须在自己的应用程序包（例如 com.yourapp.viewpager）中实现、`ViewPager`、`PagerAdapter`、`FragmentstatePagerAdapter`和`EdgeEffectCompat`。所做的唯一更改是调整导入和包名称。将资源文件复制并编辑到您的应用程序中，然后瞧，它可以工作了。`EdgeEffectCompatIcs``EdgeEffect``res/drawable`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T19:16:20.087

我可以建议一个非常简单的方法，但是很老套：

```
int glowDrawableId = context.getResources().getIdentifier("overscroll_glow", "drawable", "android");
Drawable androidGlow = context.getResources().getDrawable(glowDrawableId);
androidGlow.setColorFilter(brandColor, PorterDuff.Mode.MULTIPLY); 
```

我利用了发光效果实际上是一个共享的 Drawable 并在其上应用了过滤器这一事实：[http ://evendanan.net/android/branding/2013/12/09/branding-edge-effect/](http://evendanan.net/android/branding/2013/12/09/branding-edge-effect/)

# apache - 结合 .htaccess RewriteRule

> ID：14940885
> 
> 赞同：0
> 
> 时间：2013-02-18T16:30:09.130
> 
> 标签：apache, .htaccess, php, httpd.conf

我正在使用 .htaccess mod_rewite 指令并想要完成 2 件不同的事情：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?unit=/$1 [PT,L] 
```

以上采用指定的 URL 并让我通过我的 index.php 引导页面引导它。

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php 
```

以上使我的文件可以在没有 .php 扩展名的情况下显示。

使用它，我可以使用 url 指定一个文件`/module/function/setting`，它包括引导页面上要加载的路径`[root]/module/function/setting.php`。

我需要将这两个动作组合成一个语句，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:53:49.587

只需将第二条规则放在第一条之前：

```
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^ %{REQUEST_URI}.php [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?unit=/$1 [PT,L] 
```

所以 htaccess 会检查是否存在同名（不带扩展名）的脚本并执行。如果不是，您的当前规则将被执行。

# ember.js - 在 ember-data 中使用 json 剩余数据时遇到问题

> ID：14940888
> 
> 赞同：1
> 
> 时间：2013-02-18T16:30:17.500
> 
> 标签：ember.js, ember-data

我正在尝试在我的 ember 数据模型中解析 json 数据集，但这会在 het 控制台中引发错误：

```
Uncaught TypeError: Cannot call method '_create' of undefined
    DS.Store.Ember.Object.extend.materializeRecord
    DS.Store.Ember.Object.extend.findByClientId 
```

我在这里做错了什么？

这是我从服务器收到的数据：

```
{
  "newsitems": [
    {
      "date": "2013-02-10T15:00:00+01:00",
      "id": "1",
      "images": [
        {
          "id": "1",
          "value": "image.JPG"
        },
        {
          "id": "3",
          "value": "anotherimage.jpg"
        }
      ],
      "slug": "some-slug",
      "summary": "some summary",
      "text": "some text",
      "thumb": {
        "id": "2",
        "value": "someimage.JPG"
      },
      "title": "Some title",
      "type": "1",
      "videos": [
        {
          "id": "AEOpX8tmiUI",
          "value": "AEOpX8tmiUI"
        },
        {
          "id": "kxopViU98Xo",
          "value": "kxopViU98Xo"
        }
      ]
    }
  ]
} 
```

这些是我的模型：

```
App.NewsitemThumb = DS.Model.extend({
  value: DS.attr('string'),
  newsitem: DS.belongsTo('App.Newsitem')
});

App.NewsitemImage = DS.Model.extend({
  value: DS.attr('string'),
  newsitem: DS.belongsTo('App.Newsitem')
});

App.NewsitemVideo = DS.Model.extend({
  value: DS.attr('string'),
  newsitem: DS.belongsTo('App.Newsitem')
});

App.Newsitem = DS.Model.extend({
    slug: DS.attr('string'),
    type: DS.attr('string'),
    title: DS.attr('string'),
    summary: DS.attr('string'),
    text: DS.attr('string'),
    date: DS.attr('date'),

    thumb: DS.belongsTo('App.NewsitemThumb'),
    images: DS.hasMany('App.NewsitemImage'),
    videos: DS.hasMany('App.NewsitemVideo')
}); 
```

作为记录，欢迎提出任何优化这些模型的建议。为视频、图像和拇指制作 3 个模型感觉很奇怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:08:06.837

根据[这个问题](https://github.com/emberjs/data/issues/734)`hasMany`，当您没有为适配器中的关系指定显式映射时，会弹出此错误。

尝试将您的商店定义为

```
App.Store = DS.Store.extend({
  revision: 11,
  adapter: DS.RESTAdapter.extend({
    serializer: DS.RESTSerializer.extend({
      init: function() {
        this._super();
        this.map("App.Newsitem", {
          images: { embedded: "load" },
          videos: { embedded: "load" }
        });
      }
    })          
  })
}); 
```

# sql-server - 报告管理员权限

> ID：14940890
> 
> 赞同：0
> 
> 时间：2013-02-18T16:30:25.427
> 
> 标签：sql-server, sql-server-2008, reporting-services, ssrs-2008, project-management

报告管理器中是否有我的经理可以查看报告定义的权限，即可以查看 SQL 查询但不能编辑它并将其保存/发布到服务器上？

我正在使用 Report Builder 3 和 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T18:16:01.863

也许这会帮助你..

当您授予用户访问报表服务器的权限时，您必须指定他将获得的权限。

当您为用户添加新角色时，您有一个角色列表，适合您需要的角色名为“报表生成器”。此权限允许用户查看报告定义。

这意味着用户将能够使用报表生成器打开报表，但不能将其保存回报表服务器

看截图 ![在此处输入图像描述](../Images/c32a6ddc8f52a34548fb3e237c2914b6.png)

# javascript - 用户取消选择图片后如何从 UL 中删除项目

> ID：14940892
> 
> 赞同：-1
> 
> 时间：2013-02-18T16:30:28.870
> 
> 标签：javascript, jquery, html, css

所以我在一张表中有一组图片，当用户选择一张图片时，它将该图片的 id 添加到 ul 中。如果用户取消选择图片，我将如何从 ul 中删除该项目？

这是我到目前为止的代码

```
 $('td.n, td.p').click(function() {

    if ($(this).hasClass('done')) {
        $(this).removeClass('done');
        $('#order').remove('#id');

    } else {

        var p = $('.picked');
        if (p.length == -1) {
            $(this).addClass('picked');

        } else {
            if ($(p[0]).text() == $(this).text()) {
                $(this).addClass('done');
                $('.picked').addClass('done')

                    var lst = $(this).attr('id');
                    var ul = $('<ul/>');
                    for (var i = 0; i < 1; i++) {
                        var li = $('<li/>');
                        li.html(lst);
                        ul.append(li);
                    }
                    $('#order').append(ul);

            }

        }
    }

}); 
```

一些 HTML

```
 <table>
            <tr>
                <td class='n' id='a1'><img src='seat_icon.jpg'/></td>
                <td class='n' id='a2'><img src='seat_icon.jpg'/></td>
                <td class='n' id='a3'><img src='seat_icon.jpg'/></td>
                <td class='n' id='a4'><img src='seat_icon.jpg'/></td>
                <td></td>
                <td class='n' id='a6'><img src='seat_icon.jpg'/></td>
                <td class='n' id='a7'><img src='seat_icon.jpg'/></td>
                <td class='n' id='a8'><img src='seat_icon.jpg'/></td>
                <td class='n' id='a9'><img src='seat_icon.jpg'/></td>
            </tr>
 </table 
```

编辑：

如果我添加

```
 $('ul li').remove(lst); 
```

它只是删除整个列表。无论如何，我只能删除一项？

添加了 jsfiddle 链接：

[http://jsfiddle.net/xFvEx/1/](http://jsfiddle.net/xFvEx/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:47:22.270

如果你想从 dom（ul）中删除元素，只需使用[.remove()](http://api.jquery.com/remove/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:52:20.300

一种解决方案是在添加[`.data()`](http://api.jquery.com/data)变量`ul`时添加一个变量，然后测试该`data`变量是否存在：

```
 var lst = $(this).attr('id');
            var ul = $('<ul/>').data('text', lst);

            var ulexists = $('ul').filter(function () {
                return $(this).data('text') == lst;
            });
            if (ulexists.length) {
                ulexists.remove();
            } else {
                for (var i = 0; i < 1; i++) {
                    var li = $('<li/>');
                    li.html(lst);
                    ul.append(li);
                }
                $('#order').append(ul);
            } 
```

[http://jsfiddle.net/mblase75/xFvEx/](http://jsfiddle.net/mblase75/xFvEx/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:53:07.787

这种方法应该可以解决问题，如果没有，请尝试告诉我。

```
function deselect(id)
{
    $('#order').find('ul li').each(function(){
    if($(this).html()==id)
    {
        $(this).remove();
    }});
} 
```

其中 id 是相关 td 的 id。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T18:41:55.670

我认为问题出在

```
$('#order').remove('#id'); 
```

有了这个，你删除了 id="id" 的元素，它们是 id="order" bat 的元素的后代，你没有在 li 上设置任何 id。蝙蝠，你为什么把它弄得这么复杂。试试这个

```
 $('td.n, td.p').click(function() {

     $(this).toggleClass('picked');

     var ids = $(".picked").map(function(){
         return $(this).attr('id');
     });

     var ul = $('<ul/>');
     for (var i = 0 ; i < ids.length  ; i++){
         ul.append($('<li/>').text(ids[i]));
     }
     $('#order').empty().append(ul);
}); 
```

[在http://jsfiddle.net/wftMz/5/](http://jsfiddle.net/wftMz/5/)上试试

# javascript - 如何在 div 中获取链接标记并仅在 javascript 中附加带有“return false”的 onclick 语句

> ID：14940893
> 
> 赞同：0
> 
> 时间：2013-02-18T16:30:32.633
> 
> 标签：javascript

我忘了添加

```
return false; 
```

到 78 页以上的 onclick 事件，我不想编辑 78 页。我需要添加它，因为单击链接时 Chrome 会上下移动屏幕，而且它不会移动屏幕很重要。我没有给包含 onclick 一个 id 的链接，所以我需要抓住它，唯一的链接，在那个 div 里面并修改它，所以它说

```
onclick="myFunction(); return false;" 
```

不是

```
onclick="myFunction();" 
```

我已经尝试了很多东西公司。

```
document.getElementById('shuffle-the-deck').getElementsByTagName('a').setAttribute( 'onClick', 'javascript: startShuffle(); return false;' ); 
```

我必须上传每个更改来测试它，这让我发疯了！

我将不胜感激，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:33:12.580

这将适用于第一个锚点（如果有更多，请使用循环）：

```
var anchor = document.getElementById('shuffle-the-deck').getElementsByTagName('a')[0];
anchor.onclick = function(e) {
    e.preventDefault(); // prevents the browser from following the href
                        // just like "return false"
    startShuffle();
} 
```

在 IE8 和更早版本上，您必须设置`returnValue`事件对象的属性。所以一个更跨浏览器的方法是：

```
var anchor = document.getElementById('shuffle-the-deck').getElementsByTagName('a')[0];
anchor.onclick = function(e) {
    (e.preventDefault) ? e.preventDefault() : e.returnValue = false; 
    startShuffle();
} 
```

# email - 电子邮件未发送

> ID：14940897
> 
> 赞同：0
> 
> 时间：2013-02-18T16:30:50.177
> 
> 标签：email, vbscript, qtp

我想从我的 vbscript 代码发送一封电子邮件，下面的代码在我的机器上正常工作，但是当我改变我的机器时，代码不再能够发送电子邮件。运行期间没有发生错误或问题，但没有发送/发送电子邮件。有没有其他人遇到过这样的问题？

```
Set objMessage = CreateObject("CDO.Message") 

With objMessage
    .From = SendFrom
    .To   = SendTo
    .Subject  = "Subject"
    .Textbody = ""
    .HTMLBody = "<b>Body</b>"
    With .Configuration.Fields
        .Item("http://schemas.microsoft.com/cdo/configuration/sendusing")      = 2
        .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver")     = "SMTP.Gmail.Com"
        .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25
        .Item("http://schemas.microsoft.com/cdo/configuration/sendusername")   = "Username"
        .Item("http://schemas.microsoft.com/cdo/configuration/sendpassword")   = "Password"
        .Update
    End With

    .Send
End With 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:39:12.763

如果它在您的机器上运行而不是在生产机器上运行，我想这是一个权限问题或防火墙问题。仔细看看有什么不同，一个在防火墙后面，另一个不在？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:32:06.000

首先，由于您没有发布整个代码，请检查您的脚本是否包含一行

```
On Error Resume Next 
```

如果是这样：删除该行并重试。

如果您的脚本中没有该行**并且**脚本没有引发错误**并且**您可以`telnet mailserver 25`，那么几乎可以肯定邮件服务器接受了邮件进行投递并且问题出在上游某处。检查邮件服务器日志。

您可以验证服务器是否真的接受这样的邮件：

> `C:\>`**`telnet mailserver 25`**
> `220 mailserver ESMTP`
> **`HELO clientname`**
> `250 mailserver`
> **`MAIL FROM:<joe.average@example.com>`**
> `250 2.1.0 Ok`
> **`RCPT TO:<joe.average@example.com>`**
> `250 2.1.5 Ok`
> **`DATA`**
> `354 End data with <CR><LF>.<CR><LF>`
> **`Subject: test`**
> 
> **`test`**
> **`.`**
> `250 2.0.0 Ok: queued as 4541E2227`
> **`QUIT`**

命令前面的行`QUIT`表示服务器接受了邮件。实际的响应文本可能会因使用的 MTA 而异，但每个 MTA 在接受消息时都会以类似的行进行响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T18:33:01.593

您需要先安装 CDonts 库。在 microsoft.com 上搜索 CDONTS 库并安装它。

如果您想在不安装的情况下发送，请尝试第二种方法。你必须初始化对象。在该示例中，我删除了链接中的 h 因为我无法发布链接

1.  CDO.MESSAGE

    '脚本通过 QTP nice one 发送电子邮件 Set oMessage = CreateObject("CDO.Message")

    '==此部分提供远程 SMTP 服务器的配置信息。'==通常您只会更改服务器名称或 IP。oMessage.Configuration.Fields.Item _ ("ttp://schemas.microsoft.com/cdo/configuration/sendusing") = 2

    '远程 SMTP 服务器的名称或 IP oMessage.Configuration.Fields.Item _ ("ttp://schemas.microsoft.com/cdo/configuration/smtpserver") =""

    '服务器端口（通常为 25）oMessage.Configuration.Fields.Item _ ("ttp://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25

    oMessage.Configuration.Fields.Update oMessage.Subject = "测试邮件" oMessage.Sender = "" oMessage.To ="" 'oMessage.CC = "" 'oMessage.BCC = "" oMessage.TextBody = "来自 QTP 的测试邮件"&vbcrlf&"问候,"&vbcrlf&"测试" oMessage.Send

    设置 oMessage = 无

# binding - MonoTouch 绑定项目本机链接失败。MT5202

> ID：14940902
> 
> 赞同：1
> 
> 时间：2013-02-18T16:31:07.310
> 
> 标签：binding, xamarin.ios

使用通过 MonoTouch 链接项目链接的库时，构建输出出现以下错误。

架构 armv7 的未定义符号：

头文件如下（省略了eums空间）

```
#import <Foundation/Foundation.h>
#import <AudioToolbox/AudioToolbox.h>
#import <AudioUnit/AudioUnit.h>
#import <ExternalAccessory/ExternalAccessory.h>

@interface MTSCRA : NSObject <NSStreamDelegate> 
{ 
@private

    NSString *cardIIN;
    NSString *cardData;
    NSString *cardLast4;
    NSString *cardName;
    NSString *cardExpDate;
    NSString *cardServiceCode;
    NSString *cardStatus;
    NSString *responseData;
    NSString *maskedTracks;
    NSString *stdTrack1;
    NSString *stdTrack2;
    NSString *stdTrack3;
    NSString *encryptedTrack1;
    NSString *encryptedTrack2;
    NSString *encryptedTrack3;
    NSString *encryptionStatus;
    NSString *maskedTrack1;
    NSString *maskedTrack2;
    NSString *maskedTrack3;
    NSString *trackDecodeStatus;
    NSString *encryptedMagneprint;
    NSString *magneprintStatus;
    NSString *deviceSerialNumber;
    NSString *deviceSerialNumberMagTek;
    NSString *encrypedSessionID;
    NSString *deviceKSN;
    NSString *deviceFirmware;
    NSString *deviceName;
    NSString *deviceCaps;
    NSString *deviceStatus;
    NSString *tlvVersion;
    NSString *devicePartNumber;
    NSString *capMSR;
    NSString *capTracks;
    NSString *capMagStripeEncryption;
    NSString *maskedPAN;
    NSString *additionalInfoTrack1;
    NSString *additionalInfoTrack2;
    NSString *responseType;
    NSString *batteryLevel;
    NSString *swipeCount;
    //NSArray  *aryCardData;
    //NSArray  *aryMaskedTracks;

    AudioUnit                   rioUnit;
    AURenderCallbackStruct      inputProc;  

    AudioStreamBasicDescription thruFormat;
    AudioBufferList             bufferlist;
    AudioBuffer                 buf;
    AudioBuffer                 buf1;
    BOOL                        isDeviceConnected;
    long eventMask;
    long devCapabilities;

    Byte *commandBits;
    int commandBitsIndex;

    EAAccessory * _accessory;
    EASession *   _session;
    EAAccessoryManager *eaAccessory;
    NSMutableString *dataFromiDynamo;
    NSMutableString *deviceProtocolString;
    NSMutableString *configParams;

    enum MTSCRADeviceType devType;
@public    

}

//Initialize device
-(BOOL) openDevice; 

//Close device
-(BOOL) closeDevice;

//Retrieves if the device is connected
- (BOOL) isDeviceConnected;

//Retrieve Masked Track1 if any
- (NSString *) getTrack1Masked;

//Retrieve Masked Track2 if any
- (NSString *) getTrack2Masked;

//Retrieve Masked Track3 if any
- (NSString *) getTrack3Masked;

//Retrieves existing stored Masked data, only supported for iDynamo, it will return a empty string in audio reader
- (NSString *) getMaskedTracks;

//Retrieve Encrypted Track1 if any
- (NSString *) getTrack1;

//Retrieve Encrypted Track2 if any
- (NSString *) getTrack2;

//Retrieve Encrypted Track3 if any
- (NSString *) getTrack3;

//Retrieve Encrypted MagnePrint, only supported for iDynamo, it will return a empty string in audio reader
- (NSString *) getMagnePrint;

//Retrieve MagnePrint Status, only supported for iDynamo, it will return a empty string in audio reader
- (NSString *) getMagnePrintStatus;

//Retrieve Device Serial Number
- (NSString *) getDeviceSerial;

//Retrieve Device Serial Number created by MagTek
- (NSString *) getMagTekDeviceSerial;

//Retrieve Firmware Vsersion Number
- (NSString *) getFirmware;

//Retrieve Device Name
- (NSString *) getDeviceName;

//Retrieve Device Capabilities
- (NSString *) getDeviceCaps;

//Retrieve Device Status
- (NSString *) getDeviceStatus;

//Retrieve TLV Version
- (NSString *) getTLVVersion;

//Retrieve Device Part Number
- (NSString *) getDevicePartNumber;

//Retrieve Key Serial Number
- (NSString *) getKSN;

//Retrieve individual tag value, only supported in audio reader
- (NSString *) getTagValue: (UInt32)tag;

//Retrieve MSR Capability
- (NSString *) getCapMSR;

//Retrieve Tracks Capability
- (NSString *) getCapTracks;

//Retrieve MagStripe Encryption Capability
- (NSString *) getCapMagStripeEncryption;

//Send Commands To The Device
- (void) sendCommandToDevice:(NSString *)pData; 

//Sets the protocol String for iDynamo
- (void) setDeviceProtocolString:(NSString *)pData; 
//Sets the config params for SDK
- (void) setConfigurationParams:(NSString *)pData; 

//Setup the events to listen for
- (void) listenForEvents:(UInt32)event;

//Retrieves the Device Type
- (int) getDeviceType;

//Retrieves the Length of teh PAN
- (int) getCardPANLength;

//Retrieve Session ID, only supported for iDynamo, it will return a empty string in audio reader
- (NSString *) getSessionID;

//Retrieved the whole Response from the reader
- (NSString *) getResponseData;

//Retrieves the Name in the Card
- (NSString *) getCardName;

//Retrieves the IIN in the Card
- (NSString *) getCardIIN;

//Retrieves the Last 4 of the PAN
- (NSString *) getCardLast4;

//Retrieves the Expiration Date
- (NSString *) getCardExpDate;

//Retrieves the Service Code
- (NSString *) getCardServiceCode;

//Retrieves the Card Status
- (NSString *) getCardStatus;

//Retrieves the Track Decode Status
- (NSString *) getTrackDecodeStatus;

//Retrieve Response Type
- (NSString *) getResponseType;

//Sets the type of device to Open
-(void) setDeviceType: (UInt32)deviceType;

//Retrieves device opened status
- (BOOL) isDeviceOpened;

// Clears all the buffer that is stored during card swipe or command response
- (void) clearBuffers;
//Retrieves the battery Level
- (long) getBatteryLevel;
//Retrieves the swipe count
- (long) getSwipeCount;
//Gets the current version of the SDK.
- (NSString *) getSDKVersion;
//Retrieves the Operation Status
- (NSString *) getOperationStatus;
//Config Functions
- (NSString *) getEncryptionStatus;
//Config Functions

@end 
```

我的 ApiDefinition 看起来像这样

```
 using System;
using System.Drawing;

using MonoTouch.ObjCRuntime;
using MonoTouch.Foundation;
using MonoTouch.AudioToolbox;
using MonoTouch.ExternalAccessory;
using MonoTouch.UIKit;

namespace CreditCardReaderIDynamoDLL
{

    [BaseType(typeof(NSObject))]
    [Model]
    interface NSStreamDelegate
    {

    }

    [BaseType(typeof(NSObject),Delegates=new string[]{"WeakDelegate"},Events = new Type[] {(typeof(NSStreamDelegate))})]
    interface MISCRA{

        [Export("delegate"), NullAllowed]
        NSObject WeakDelegate{get; set;}

        [Wrap("WeakDelegate")][New]
        NSStreamDelegate Delegate{get; set;}

        [ExportAttribute("cardIIN")]
        NSString CardIIN{[Bind("cardIIN")]get; set;}

        [ExportAttribute("cardData")]
        NSString CardData{[Bind("cardData")]get; set;}

        [ExportAttribute("cardLast4")]
        NSString CardLast4{[Bind("cardLast4")]get; set;}

        [ExportAttribute("cardName")]
        NSString CardName{[Bind("cardName")]get; set;}

        [ExportAttribute("cardExpDate")]
        NSString cardExpDate{[Bind("cardExpDate")]get; set;}

        [ExportAttribute("cardServiceCode")]
        NSString CardServiceCode{[Bind("cardServiceCode")]get; set;}

        [ExportAttribute("cardStatus")]
        NSString CardStatus{[Bind("cardStatus")]get; set;}

        [ExportAttribute("responseData")]
        NSString ResponseData{[Bind("responseData")]get; set;}

        [ExportAttribute("maskedTracks")]
        NSString MaskedTracks{[Bind("maskedTracks")]get; set;}

        [ExportAttribute("stdTrack1")]
        NSString StdTrack1{[Bind("stdTrack1")]get; set;}

        [ExportAttribute("stdTrack2")]
        NSString StdTrack2{[Bind("stdTrack2")]get; set;}

        [ExportAttribute("stdTrack3")]
        NSString StdTrack3{[Bind("stdTrack3")]get; set;}

        [ExportAttribute("encryptedTrack1")]
        NSString EncryptedTrack1{[Bind("encryptedTrack1")]get; set;}

        [ExportAttribute("encryptedTrack2")]
        NSString EncryptedTrack2{[Bind("encryptedTrack2")]get; set;}

        [ExportAttribute("encryptedTrack3")]
        NSString EncryptedTrack3{[Bind("encryptedTrack3")]get; set;}

        [ExportAttribute("encryptionStatus")]
        NSString EncryptionStatus{[Bind("encryptionStatus")]get; set;}

        [ExportAttribute("maskedTrack1")]
        NSString MaskedTrack1{[Bind("maskedTrack1")]get; set;}

        [ExportAttribute("maskedTrack2")]
        NSString MaskedTrack2{[Bind("maskedTrack2")]get; set;}

        [ExportAttribute("maskedTrack3")]
        NSString MaskedTrack3{[Bind("maskedTrack3")]get; set;}

        [ExportAttribute("trackDecodeStatus")]
        NSString TrackDecodeStatus{[Bind("trackDecodeStatus")]get; set;}

        [ExportAttribute("encryptedMagneprint")]
        NSString EncryptedMagneprint{[Bind("encryptedMagneprint")]get; set;}

        [ExportAttribute("magneprintStatus")]
        NSString MagneprintStatus{[Bind("magneprintStatus")]get; set;}

        [ExportAttribute("deviceSerialNumber")]
        NSString DeviceSerialNumber{[Bind("deviceSerialNumber")]get; set;}

        [ExportAttribute("deviceSerialNumberMagTek")]
        NSString DeviceSerialNumberMagTek{[Bind("deviceSerialNumberMagTek")]get; set;}

        [ExportAttribute("encrypedSessionID")]
        NSString EncrypedSessionID{[Bind("encrypedSessionID")]get; set;}

        [ExportAttribute("deviceKSN")]
        NSString DeviceKSN{[Bind("deviceKSN")]get; set;}

        [ExportAttribute("deviceFirmware")]
        NSString DeviceFirmware{[Bind("deviceFirmware")]get; set;}

        [ExportAttribute("deviceName")]
        NSString deviceName{[Bind("deviceName")]get; set;}

        [ExportAttribute("deviceCaps")]
        NSString DeviceCaps{[Bind("deviceCaps")]get; set;}

        [ExportAttribute("deviceStatus")]
        NSString DeviceStatus{[Bind("deviceStatus")]get; set;}

        [ExportAttribute("tlvVersion")]
        NSString TlvVersion{[Bind("tlvVersion")]get; set;}

        [ExportAttribute("devicePartNumber")]
        NSString DevicePartNumber{[Bind("devicePartNumber")]get; set;}

        [ExportAttribute("capMSR")]
        NSString CapMSR{[Bind("capMSR")]get; set;}

        [ExportAttribute("capTracks")]
        NSString CapTracks{[Bind("capTracks")]get; set;}

        [ExportAttribute("capMagStripeEncryption")]
        NSString CapMagStripeEncryption{[Bind("capMagStripeEncryption")]get; set;}

        [ExportAttribute("MaskedPAN")]
        NSString MaskedPAN{[Bind("MaskedPAN")]get; set;}

        [ExportAttribute("additionalInfoTrack1")]
        NSString AdditionalInfoTrack1{[Bind("additionalInfoTrack1")]get; set;}

        [ExportAttribute("additionalInfoTrack2")]
        NSString AdditionalInfoTrack2{[Bind("additionalInfoTrack2")]get; set;}

        [ExportAttribute("responseType")]
        NSString ResponseType{[Bind("responseType")]get; set;}

        [ExportAttribute("batteryLevel")]
        NSString BatteryLevel{[Bind("batteryLevel")]get; set;}

        [ExportAttribute("swipeCount")]
        NSString swipeCount{[Bind("swipeCount")]get; set;}

        /*  [ExportAttribute("rioUnit")]
        AudioUnit RioUnit{[Bind("rioUnit")]get; set;}

        [ExportAttribute("inputProc")]
        AURenderCallbackStruct InputProc{ [Bind("inputProc")]get; set; }*/

        [ExportAttribute("thruFormat")]
        AudioStreamBasicDescription ThruFormat{[Bind("thruFormat")]get; set;}

        [ExportAttribute("bufferlist")]
        AudioBuffer Bufferlist{[Bind("bufferlist")]get; set;}

        [ExportAttribute("buf")]
        AudioBuffer Buf{[Bind("buf")]get; set;}

        [ExportAttribute("buf1")]
        AudioBuffer Buf1{[Bind("buf1")]get; set;}

        [ExportAttribute("isDeviceConnected")]
        bool IsDeviceConnected{ [Bind("isDeviceConnected")]get; set; }

        [ExportAttribute("eventMask")]
        long EventMask{[Bind("eventMask")]get; set;}

        [ExportAttribute("devCapabilities")]
        long devCapabilities{ [Bind("devCapabilities")]get; set; }

        [ExportAttribute("commandBits")]
        Byte CommandBits{ [Bind("commandBits")]get; set; }

        [ExportAttribute("commandBitsIndex")]
        int CommandBitsIndex{ [Bind("commandBitsIndex")]get; set; }

        [ExportAttribute("_accessory")]
        EAAccessory _Accessory{ [Bind("_accessory")]get; set; }

        [ExportAttribute("_session")]
        EASession _Session{ [Bind("_session")]get; set; }

        [ExportAttribute("eaAccessory")]
        EAAccessoryManager EaAccessory{ [Bind("eaAccessory")]get; set; }

        [ExportAttribute("dataFromiDynamo")]
        NSMutableAttributedString DataFromiDynamo{ [Bind("dataFromiDynamo")]get; set; }

        [ExportAttribute("deviceProtocolString")]
        NSMutableAttributedString DeviceProtocolString{ [Bind("deviceProtocolString")]get; set; }

        [ExportAttribute("configParams")]
        NSMutableAttributedString configParams{ [Bind("configParams")]get; set; }

        [Export ("openDevice")]
        bool OpenDevice();

        [Export ("closeDevice")]
        bool CloseDevice();

        [Export ("isDeviceConnected")]
        bool IssDeviceConnected();

        [Export ("getTrack1Masked")]
        NSString GetTrack1Masked();

        [Export ("getTrack2Masked")]
        NSString GetTrack2Masked();

        [Export ("getTrack3Masked")]
        NSString getTrack3Masked();

        [Export ("getMaskedTracks")]
        NSString GetMaskedTracks();

        [Export ("getTrack1")]
        NSString GetTrack1();

        [Export ("getTrack2")]
        NSString GetTrack2();

        [Export ("GetTrack3")]
        NSString GetTrack3();

        [Export ("getMagnePrint")]
        NSString GetMagnePrint();

        [Export ("getMagnePrintStatus")]
        NSString GetMagnePrintStatus();

        [Export ("getDeviceSerial")]
        NSString GetDeviceSerial();

        [Export ("getMagTekDeviceSerial")]
        NSString GetMagTekDeviceSerial();

        [Export ("getFirmware")]
        NSString GetFirmware();

        [Export ("getDeviceName")]
        NSString GetDeviceName();

        [Export ("getDeviceCaps")]
        NSString GetDeviceCaps();

        [Export ("getDeviceStatus")]
        NSString GetDeviceStatus();

        [Export ("getTLVVersion")]
        NSString GetTLVVersion();

        [Export ("getDevicePartNumber")]
        NSString GetDevicePartNumber();

        [Export ("getKSN")]
        NSString GetKSN();

        [Export ("getTagValue:")]
        NSString SetTagValue(UInt32 tag);

        [Export ("getCapMSR")]
        NSString GetCapMSR();

        [Export ("getCapTracks")]
        NSString GetCapTracks();

        [Export ("GetCapMagStripeEncryption")]
        NSString GetCapMagStripeEncryption();

        [Export ("sendCommandToDevice:")]
        void sendCommandToDevice(NSString pData);

        [Export ("setDeviceProtocolString:")]
        void SetDeviceProtocolString(NSString pData);

        [Export ("setConfigurationParams:")]
        void SetConfigurationParams(NSString pData);

        [Export ("listenForEvents:")]
        void listenForEvents(UInt32 _event);

        [Export ("getDeviceType")]
        int GetDeviceType();

        [Export ("getCardPANLength")]
        int GetCardPANLength();

        [Export ("getSessionID:")]
        NSString GetSessionID();

        [Export ("getResponseData")]
        NSString GetResponseData();

        [Export ("getCardName")]
        NSString GetCardName();

        [Export ("getCardIIN")]
        NSString getCardIIN();

        [Export ("getCardLast4")]
        NSString GetCardLast4();

        [Export ("getCardExpDate")]
        NSString GetCardExpDate();

        [Export ("getCardServiceCode")]
        NSString GetCardServiceCode();

        [Export ("getCardStatus")]
        NSString GetCardStatus();

        [Export ("getTrackDecodeStatus")]
        NSString GetTrackDecodeStatus();

        [Export ("getResponseType")]
        NSString GetResponseType();

        [Export ("setDeviceType:")]
        void SetDeviceType(UInt32 deviceType);

        [Export ("isDeviceOpened")]
        bool IsDeviceOpened();

        [Export ("clearBuffers")]
        void ClearBuffers();

        [Export ("getBatteryLevel")]
        long GetBatteryLevel();

        [Export ("getSwipeCount")]
        long GetSwipeCount();

        [Export ("getSDKVersion")]
        NSString GetSDKVersion();

        [Export ("getOperationStatus")]
        NSString GetOperationStatus();

        [Export ("getEncryptionStatus")]
        NSString GetEncryptionStatus();

    }

} 
```

最后我的链接文件如下

```
using System;
using MonoTouch.ObjCRuntime;

[assembly: LinkWith ("libMTSCRA.a", LinkTarget =  LinkTarget.ArmV7 | LinkTarget.ArmV6 | LinkTarget.Simulator, 
                     Frameworks = "AudioToolbox ExternalAccessory Foundation", ForceLoad = true)] 
```

当我在一个普通的 monotouch Ipad 项目中导入库时，我得到以下构建输出。（不是完整的输出，字符用完了）

```
 Compiling to native code\
/var/folders/g2/j4prljqd2w58pfd2bf0hm9pc0000gn/T/tmp7967f93f.tmp/System.Core.dll.armv7.o /var/folders/g2/j4prljqd2w58pfd2bf0hm9pc0000gn/T/tmp7967f93f.tmp/MonoTouch.Dialog-1.dll.armv7.o /var/folders/g2/j4prljqd2w58pfd2bf0hm9pc0000gn/T/tmp7967f93f.tmp/mscorlib.dll.armv7.o /var/folders/g2/j4prljqd2w58pfd2bf0hm9pc0000gn/T/tmp7967f93f.tmp/System.dll.armv7.o /var/folders/g2/j4prljqd2w58pfd2bf0hm9pc0000gn/T/tmp7967f93f.tmp/monotouch.dll.armv7.o /Users/dylanvdmerwe/Desktop/Projects/Affinion/trunk/CreditCardReaderIDynamoIpadDemo/CreditCardReaderIDynamoIpadDemo/obj/Release/mtouch-cache/main..armv7.cache.V7WUEG1CYIbzGQyRJadXq2I83LQ=.o /Users/dylanvdmerwe/Desktop/Projects/Affinion/trunk/CreditCardReaderIDynamoIpadDemo/CreditCardReaderIDynamoIpadDemo/obj/Release/mtouch-cache/registrar.armv7.cache.oz4CLqSH9MR1-CuVC2OCHFSKN8A=.o -o /var/folders/g2/j4prljqd2w58pfd2bf0hm9pc0000gn/T/tmp7967f93f.tmp/CreditCardReaderIDynamoIpadDemo -framework CFNetwork -framework Foundation -framework UIKit -framework AudioToolbox -framework QuartzCore -framework CoreGraphics -framework ExternalAccessory -lz -liconv -u _mono_pmip -u _monotouch_create_managed_ref -u _monotouch_release_managed_ref -u _monotouch_IntPtr_objc_msgSend_IntPtr -u _monotouch_IntPtr_objc_msgSendSuper_IntPtr -u _CloseZStream -u _CreateZStream -u _Flush -u _ReadZStream -u _WriteZStream -lmono-2.0 -lmonotouch -L/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/lib  -force_load /var/folders/g2/j4prljqd2w58pfd2bf0hm9pc0000gn/T/tmp7967f93f.tmp/libMTSCRA.a\
    Undefined symbols for architecture armv7:\
      "operator delete(void*)", referenced from:\
          -[MTSCRA hexStringtoBytes:] in libMTSCRA.a(MTSCRA.o)\
          hasData(void*, unsigned long*, AudioTimeStamp const*, unsigned long, unsigned long, AudioBufferList*)in libMTSCRA.a(MTSCRA.o)\
          composeCommand(int, long*, int, unsigned char*, int, int*)in libMTSCRA.a(MTSCRA.o)\
          AudioReader::processSamples(long)   in libMTSCRA.a(AudioReader.o)\
          AudioReader::copyResponseData()       in libMTSCRA.a(AudioReader.o)\
          AudioReader::initData()      in libMTSCRA.a(AudioReader.o)\
          AudioReader::tlvDecode(int*)   in libMTSCRA.a(AudioReader.o)\
          ...\
      "operator new[](unsigned long)", referenced from:\
          -[MTSCRA hexStringtoBytes:] in libMTSCRA.a(MTSCRA.o)\
          hasData(void*, unsigned long*, AudioTimeStamp const*, unsigned long, unsigned long, AudioBufferList*)in libMTSCRA.a(MTSCRA.o)\
          composeCommand(int, long*, int, unsigned char*, int, int*)in libMTSCRA.a(MTSCRA.o)\
          AudioReader::copyResponseData()       in libMTSCRA.a(AudioReader.o)\
          AudioReader::manchesterDecodeUartforResponseData(int, unsigned char*)in libMTSCRA.a(AudioReader.o)\
          AudioReader::ByteArrayToHex(unsigned char*, int)in libMTSCRA.a(AudioReader.o)\
          AudioReader::manchesterDecodeUart(int, int*)in libMTSCRA.a(AudioReader.o)\
          ...\
      "operator new(unsigned long)", referenced from:\
          AudioReader::processSamples(long)   in libMTSCRA.a(AudioReader.o)\
          AudioReader::processSamples(long)   in libMTSCRA.a(AudioReader.o)\
      "___cxa_begin_catch", referenced from:\
          -[MTSCRA getConfigurationParams:] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA setCardData:] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getCardIINFromMaskTracks] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getCardLast4FromMaskTracks] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getMaskedPAN] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getTrack1AdditionalInfo] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getTrack2AdditionalInfo] in libMTSCRA.a(MTSCRA.o)\
          ...\
      "___cxa_end_catch", referenced from:\
          -[MTSCRA getConfigurationParams:] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA setCardData:] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getCardIINFromMaskTracks] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getCardLast4FromMaskTracks] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getMaskedPAN] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getTrack1AdditionalInfo] in libMTSCRA.a(MTSCRA.o)\
          -[MTSCRA getTrack2AdditionalInfo] in libMTSCRA.a(MTSCRA.o)\
          ...\
      "___gxx_personality_sj0", referenced from:\
          AudioReader::processSamples(long)   in libMTSCRA.a(AudioReader.o)\
          AudioReader::processSamples(long)   in libMTSCRA.a(AudioReader.o)\
          AudioReader::processSamples(long)   in libMTSCRA.a(AudioReader.o)\
          AudioReader::processSamples(long)   in libMTSCRA.a(AudioReader.o)\
    ld: symbol(s) not found for architecture armv7\
    collect2: ld returned 1 exit status\
    \
    error MT5202: Native linking failed. Please review the build log.\
    \
    ---------------------- Done ----------------------\
    \
    Build: 1 error, 4 warnings\ 
```

我还尝试在 linkwith 文件中添加 AudioUnit，但出现未找到框架的错误。我也尝试将 CoreAudio 添加到相同的效果。

对不起代码转储。我希望有人可以帮助我，此刻陷入困境。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:41:48.603

正如缺少对 new() 的引用所表明的那样，您可能正在绑定一个 c++ 库（或一个 c++ 库的包装器）。

如果您的库依赖于（c++）另一个，请为该库添加一个 [LinkWith] 属性

请记住，任何 c++ 库都应该在其 LinkWith 属性中设置属性 IsCxx=true

```
[assembly: LinkWith ("libMTSCRA.a", IsCxx=true, LinkTarget =  LinkTarget.ArmV7 | LinkTarget.ArmV6 | LinkTarget.Simulator, Frameworks = "AudioToolbox ExternalAccessory Foundation", ForceLoad = true)] 
```

# c# - Entity Framework / code first / table-per-type继承——实现派生类和具体类之间的一对多关联

> ID：14940907
> 
> 赞同：3
> 
> 时间：2013-02-18T16:31:35.147
> 
> 标签：c#, entity-framework, inheritance, ef-code-first, table-per-type

我在 VS2012 中使用 MVC4，并且我正在遵循一个 table-per-type 继承方法。我正在尝试使用该`Seed()`方法将数据添加到我的数据库中。

我有以下课程：

**房东**

```
[Table("Landlord")]
public class Landlord : UserProfile
{
    // A Landlord can have many ResidentialProperties
    [ForeignKey("ResidentialPropertyId")]
    public virtual ICollection<ResidentialProperty> ResidentialProperties { get; set; }
} 
```

**住宅物业**

```
[Table("ResidentialProperty")]
public class ResidentialProperty
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ResidentialPropertyId { get; set; }

    // A ResidentialProperty has 1 Landlord
    public virtual int UserId { get; set; }
    public virtual UserProfile UserProfile { get; set; } 

} 
```

所以`Landlord`继承自`UserProfile`，因此没有 PK 属性`Landlord.`

我试图实现的关系如下：

*   *A`Landlord`可以有很多`ResidentialProperties`(1:n)*
*   *一个`ResidentialProperty`罐子（在应用程序的范围内）有一个`Landlord`(1:1)*

我认为我配置模型的方式足以`update-database`成功地从包管理器运行命令，并将我的`Seed()`方法中的内容添加到我的数据库中。事实并非如此，我收到以下错误：

> 无法确定“LetLord.Models.ResidentialProperty_UserProfile”关系的主体端。多个添加的实体可能具有相同的主键。

在阅读之后，我意识到我想要创建的关系需要使用 Fluent API 来实现，所以我尝试了以下方法：

```
 modelBuilder.Entity<Landlord>()
            .HasMany(x => x.ResidentialProperties)
            .WithOptional()
            .HasForeignKey(x => x.ResidentialPropertyId);

        modelBuilder.Entity<ResidentialProperty>()
            .HasRequired(x => x.UserProfile); 
```

当我尝试`update-database`通过包管理器执行命令时，出现以下错误：

> \tSystem.Data.Entity.Edm.EdmAssociationEnd: : 多重性在关系“Landlord_ResidentialProperties”中的角色“Landlord_ResidentialProperties_Target”中无效。因为从属角色指的是关键属性，所以从属角色的多重性的上限必须是“1”。

我完全不知道如何解决我的问题。我在这上面花了很多时间，这非常令人沮丧，因为我觉得它应该很容易完成。如果有人有解决方案，如果您能与我分享，我将不胜感激。

**编辑**- 上述第一个错误引发的异常输出：

> System.Data.Entity.Infrastructure.DbUpdateException：无法确定“LetLord.Models.ResidentialProperty_Landlord”关系的主体端。多个添加的实体可能具有相同的主键。---> System.Data.UpdateException：无法确定“LetLord.Models.ResidentialProperty_Landlord”关系的主体端。多个添加的实体可能具有相同的主键。在 System.Data.Mapping.Update.Internal.UpdateTranslator.RegisterEntityReferentialConstraints(IEntityStateEntry stateEntry, Boolean currentValues) 在 System.Data.Mapping.Update.Internal.UpdateTranslator.RegisterReferentialConstraints(IEntityStateEntry stateEntry) 在 System.Data.Mapping.Update.Internal。 UpdateTranslator.PullModifiedEntriesFromStateManager() 在 System.Data.Mapping.Update.Internal.UpdateTranslator。

**编辑**- 解决方案：

实体应该按照下面拉迪斯拉夫的回答，我的错误是在基类的多方面而不是派生类上创建导航属性。

`Seed()`我的下一个错误是在我的方法中对实体进行排序。我在下面添加了它们应该是什么样的，这尤其适用于添加具有关联的实体时。

```
 protected override void Seed(LetLord.Models.LetLordContext context)
    {

        try
        {

            #region Landlords

            // create a list of landlords first - a landlord can have many residential properties, make this  = new List<ResidentialProperty>()
            var landlords = new List<Landlord>
        {
            // landlord 1
            new Landlord { UserName="Frank",     FirstName="Frank",   LastName="O'Sullivan", Email="a@a.com", AccountType=(int)AccountType.Landlord, ResidentialProperties = new List<ResidentialProperty>() }

            // ...
        };
            landlords.ForEach(l => context.UserProfile.AddOrUpdate(l));
            context.SaveChanges();

            #endregion

            #region ResidentialProperties

            // then create a list of properties
            var residentialProperties = new List<ResidentialProperty>
        {
            // Property 1 associated with LandLord 1
            new ResidentialProperty { PropTypeValue=(int)PropertyType.Detached, Description="Some description...", NumberOfBedrooms="4", NumberOfReceptionRooms="2", NumberOfBathrooms="2", HasBackGarden=true, HasFrontGarden=true, HasSecureParking=false, IsDisabledFriendly=false, DateAdded=DateTime.Now, Landlord = landlords.FirstOrDefault(u => u.UserId == 11) } // in my case, user 11 is landlord 1

            // ... 
        };
            residentialProperties.ForEach(rp => context.ResidentialProperty.AddOrUpdate(rp));
            context.SaveChanges(); 

            #endregion

            // then add our list of properties to our list of landlords
            landlords[0].ResidentialProperties.Add(residentialProperties[0]);
            landlords[1].ResidentialProperties.Add(residentialProperties[1]);
            landlords[2].ResidentialProperties.Add(residentialProperties[2]);
            landlords[3].ResidentialProperties.Add(residentialProperties[3]);
            landlords[4].ResidentialProperties.Add(residentialProperties[4]);
            landlords[5].ResidentialProperties.Add(residentialProperties[5]);
            landlords[6].ResidentialProperties.Add(residentialProperties[6]);
            landlords[7].ResidentialProperties.Add(residentialProperties[7]);
            landlords[8].ResidentialProperties.Add(residentialProperties[8]);
            landlords[9].ResidentialProperties.Add(residentialProperties[9]);
            context.SaveChanges();

        }
        catch (Exception ex)
        {
            string lines = ex.ToString();
            System.IO.StreamWriter file = new System.IO.StreamWriter(@"C:\Users\Home\Desktop\error.txt");
            file.WriteLine(lines);
            file.Close();
        } 
```

当我在修复上述代码后尝试运行时`update-database`，遇到了这个错误：

> System.Data.Entity.Infrastructure.DbUpdateException：更新条目时出错。有关详细信息，请参阅内部异常。---> System.Data.UpdateException：更新条目时出错。有关详细信息，请参阅内部异常。---> System.Data.SqlClient.SqlException：INSERT 语句与 FOREIGN KEY 约束“FK_dbo.ResidentialProperty_dbo.Landlord_UserId”冲突。冲突发生在数据库“C:\USERS\HOME\DESKTOP\LETLORD\LETLORD\APP_DATA\LETLORD.MDF”、表“dbo.Landlord”、列“UserId”中。该语句已终止。

经过快速搜索后，我发现（我认为）导致了这个错误，因为我的数据库中已经有数据。删除并重新创建数据库解决了这个问题，当我`Seed()`再次运行该方法时，数据已成功添加。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:03:23.937

如果房东可以有多个房产并且房产可以有~~多个~~房东，那么模型应该如下所示：

```
[Table("Landlord")]
public class Landlord : UserProfile
{
    // A Landlord can have many ResidentialProperties
    public virtual ICollection<ResidentialProperty> ResidentialProperties { get; set; }
}

[Table("ResidentialProperty")]
public class ResidentialProperty
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ResidentialPropertyId { get; set; }

    // A ResidentialProperty has 1 Landlord
    // Foreign key is on many side and it contains value of primary key on one side
    // In your case FK must contain value of property's landlord
    public virtual int UserId { get; set; }
    // ForeignKey attribute pairs navigation property on many side with foreign key propety 
    [ForeignKey("UserId")]
    public virtual Landlord Landlord { get; set; } 
} 
```

# ruby - 清除方法的主体

> ID：14940908
> 
> 赞同：1
> 
> 时间：2013-02-18T16:31:39.987
> 
> 标签：ruby, metaprogramming

为了在我的脚本中处理 -q （安静）选项，我这样做了：

```
class NoWrite
  def write(*args)
  end
end
$stdout = NoWrite.new if $options[:quiet] 
```

它工作正常。
但是我想知道是否没有一种元编程方式可以使该`write`方法没有实际意义。

`remove_method`并且`undef_method`不能使用，因为`write`必须定义方法，我只想让它什么都不做。

而且，`$stderr`不能影响。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:35:05.253

或者，您可以将标准输出重定向到`/dev/null`

```
def stfu
  begin
    orig_stdout = $stdout.clone
    $stdout.reopen File.new('/dev/null', 'w')
    retval = yield
  rescue Exception => e
    $stdout.reopen orig_stdout
    raise e
  ensure
    $stdout.reopen orig_stdout
  end
  retval
end

require 'some_noisy_gem'
stfu do
  some_function_that_generates_a_lot_of_cruft_on_stdout
end 
```

原始片段位于：[https ://jacob.hoffman-andrews.com/README/index.php/2011/04/14/ruby-function-stfu-temporarily-redirect-noisy-stdout-writes-to-devnull/](https://jacob.hoffman-andrews.com/README/index.php/2011/04/14/ruby-function-stfu-temporarily-redirect-noisy-stdout-writes-to-devnull/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-18T16:47:58.550

您可以为此使用 instance_eval：

```
$stdout.instance_eval{ def write(*args); end } if $options[:quiet] 
```

或者你可以创建一个匿名类：

```
$stdout = Class.new{ def self.write(*args); end } if $options[:quiet] 
```

# mysql - 在 Amazon RDS 中创建 MySQL 事件

> ID：14940910
> 
> 赞同：12
> 
> 时间：2013-02-18T16:31:47.657
> 
> 标签：mysql, amazon-rds

我正在尝试在 RDS 数据库上创建一个 MySQL 事件。我花了一点时间才发现我需要更改数据库参数并启动调度程序。但是，即使调度程序正在运行（我看到它在 SHOW PROCESSLIST 中运行），当我创建事件时，我仍然会收到“错误 1044 (42000)：用户拒绝访问...”。我尝试在 AWS 讨论板上发帖，但一无所获。

是否有人在 AWS RDS 实例中创建了 MySQL 事件？如果是这样，我没有做什么，或者我缺少什么来创建它？

我正在使用主用户帐户，所以我怀疑它必须是另一个我没有设置的数据库参数（我怀疑）。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-10-31T19:00:51.787

您必须为您的实例创建一个参数组。

转到您的 RDS 仪表板并单击左侧的参数。

您应该看到一个参数组列表，如果您只看到“默认”组，那么您需要创建一个新组。（见 1a）。如果您已有自定义参数组，请跳至 1b。

**1a。**单击顶部的创建参数，确保选择您正在使用的数据库的适当 MySql 版本（在实例仪表板上找到）。给它一个名字，然后单击“是的，创建”。（也做 1c）。

**1b。**单击参数组所在行中的放大镜，它将带您进入详细信息页面。

在详细信息页面的底部，您将在搜索框中看到“过滤器：”，输入“事件”。让表格过滤，然后单击“编辑参数”。在下面的列表中，您要更改“event_scheduler”的“值”列并在框中键入“ON”。

如果您最初是从一个参数组开始的，那么您可以前往您的实例仪表板查看它是否正在应用您的参数组更改。如果您创建了参数组，请继续。

**警告！**下一步需要重新启动！

**1c。**您需要将参数组应用到数据库实例。单击左侧的实例，然后选择要应用参数组的数据库。在顶部，您要单击“实例操作”，然后单击“修改”。

将“参数组”选择更改为您创建的新参数组。点击页面底部的继续，然后在下一页修改数据库实例。您现在需要重新启动服务器，选择“Instance Actions”，然后选择“Reboot”。

# sql-server-2008 - 将部分数据从一个表复制到另一个 C#

> ID：14940920
> 
> 赞同：0
> 
> 时间：2013-02-18T16:32:13.630
> 
> 标签：sql-server-2008, c#-3.0

我有下表。我运行此查询以获取分数超过 90 的学生：

```
Select Name, Class, Score from Student where Score > 90
Student
Name    Class   Rank    Score
A   1   20  100 
B   1   12  95
C   2   11  89
D   1   14  60
... 
```

现在我想将收集到的数据移动到另一个名为ExcellentStudent的表中，如下所示：

```
ExcellentStudent
Name    Class   Score
A   1   100
B   1   95 
```

有没有一种简单的方法可以在 C# 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:36:24.560

既然可以运行 SQL 语句来获取分数，为什么现在在 C# 代码中调用另一个 SQL 来将数据填充到`ExcellentStudent`表中？

```
INSERT INTO ExcellentStudent(Name, Class, Score)
Select Name, Class, Score from Student where Score > 90 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:42:31.290

对数据库运行插入查询的 C# 代码

```
using System.Data.SqlClient;

namespace ConsoleApplication
{
    internal class Program
    {
        private static void Main(string[] args)
        {
            using (var objConnection = new SqlConnection("Your Conneciton String"))
            {
                objConnection.Open();
                using (var objCommand = new SqlCommand("INSERT INTO ExcellentStudent (Name, Class, Score) SELECT Name, Class, Score FROM Student WHERE Score > 90", objConnection))
                {
                    objCommand.ExecuteNonQuery();
                }
                objConnection.Close();
            }
        }
    }
} 
```

# python - 为什么我的查询失败？尝试对 GAE 数据存储实体应用排序顺序

> ID：14940921
> 
> 赞同：0
> 
> 时间：2013-02-18T16:32:14.470
> 
> 标签：python, google-app-engine, google-cloud-datastore

```
 q = Institution_Table.all().run(batch_size=2000).order('name') 
```

给我以下错误：

> AttributeError: '_QueryIterator' 对象没有属性 'order'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:39:50.103

文档中给出的示例显示`.order('name')`附加到查询。

在您的示例中，您在运行查询后附加它。

尝试：

```
q = Institution_Table.all().order('name')
results = q.run() 
```

这里：[https ://developers.google.com/appengine/docs/python/datastore/queries#Restrictions_on_Queries](https://developers.google.com/appengine/docs/python/datastore/queries#Restrictions_on_Queries)

# android - ListView 的 Android 问题

> ID：14940924
> 
> 赞同：0
> 
> 时间：2013-02-18T16:32:33.360
> 
> 标签：android, android-listview

好的，所以我已经尝试自己解决这个问题，但即使我在stackoverflow上找到了一个已回答的问题（即这个[错误“令牌上的语法错误，错位的构造，在这个令牌MainActivity.java之后预期的VariableDeclaratorId”](https://stackoverflow.com/questions/12239066/errors-syntax-error-on-tokens-misplaced-constructs-variabledeclaratorid-e)）我仍然有问题。我有一个名为 HeadlinesActivity 的活动，它通过单击按钮从 MainActivity 启动。我遇到了与我链接的问题中的问题相同的问题，但是我按照建议将 ListView 声明和其他相关内容移到了我的 onCreate() 中，这样就消除了 eclipse 中的错误。但是，现在当我尝试在模拟器上测试应用程序时，如果我尝试单击标题按钮，Android 会显示一条消息，说我的应用程序已停止。这是我的 HeadlinesActivity 代码：

```
import android.annotation.SuppressLint;
import android.app.Activity;
import android.os.Build;
import android.os.Bundle;
import android.view.Menu;
import android.widget.ArrayAdapter;
import android.widget.ListView;

public class HeadlinesActivity extends Activity {

@SuppressLint("NewApi")
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_headlines);

    // Make sure we're running on Honeycomb or higher to use ActionBar APIs
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
        // Show the Up button in the action bar.
        getActionBar().setDisplayHomeAsUpEnabled(true) ;
    }

    final ListView listView = (ListView) findViewById(R.id.listView1);
    final String[] values = { "Android", "iPhone", "WindowsMobile",
      "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
      "Linux", "OS/2" } ;
    final ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
      R.layout.activity_headlines, R.id.textView1, values);

    // Assign adapter to ListView
    listView.setAdapter(adapter) ;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_headlines, menu);
    return true;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:48:29.027

您在 Activity 和每个 ListView 行中使用相同的布局...

*   Activity 的布局应该有 ListView（以及你想要的任何东西）。
*   ListView 行不应该有 ListView 元素......它应该包含更基本的构建块，如 TextViews、ImageViews 等

至于当前的错误，我猜它`activity_headlines.xml`没有带有 id 的 ListView`listView1`或带有 id 的 TextView `textView1`。尝试：

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, values); 
```

# common-lisp - Common Lisp SublimeREPL

> ID：14940931
> 
> 赞同：1
> 
> 时间：2013-02-18T16:32:49.300
> 
> 标签：common-lisp, sublimetext2, sublimerepl

我在 OSX 中使用 SublimeREPL 安装了 SublimeText2，它就像 Ruby 和 Python 的魅力。但是，最近我一直想使用 Common Lisp，*“clisp REPL”*给了我以下错误：**OSError(2, 'No such file or directory')**

我曾尝试在 Google 上搜索有关使用 Common Lisp 最佳设置 ST2 的任何说明，但未成功。对于让 SublimeText2 与 Common Lisp 同等工作的任何提示、链接或说明，我将不胜感激。

我已经安装了以下软件包

1.  崇高的REPL
2.  听话的

我是否必须在我的配置文件中包含任何内容才能使 clisp REPL 正常工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:11:59.857

从您收到的错误的外观来看，我会确保您已经完成了这篇[博](http://www.mohiji.org/2011/01/modern-common-lisp-on-osx/)文中列出的所有步骤。

# asp.net - Html.ActionLink 生成的奇怪链接

> ID：14940932
> 
> 赞同：2
> 
> 时间：2013-02-18T16:32:52.380
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, razor

我有这个：

```
public class PagesModel
{
    public string ControllerName { get; set; }
    public string ActionName { get; set; }
    public int PagesCount { get; set; }
    public int CurrentPage { get; set; }
    public object RouteValues { get; set; }
    public object HtmlAttributes { get; set; }
}

public static MvcHtmlString RenderPages(this HtmlHelper helper, PagesModel pages, bool isNextAndPrev = false)
{
    //some code
    var lastPageSpan = new TagBuilder("span");
    var firstValueDictionary = new RouteValueDictionary(pages.RouteValues) { { "page", pages.PagesCount } };
    lastPageSpan.InnerHtml = helper.ActionLink(">>", pages.ActionName, pages.ControllerName, firstValueDictionary, pages.HtmlAttributes).ToHtmlString();
    return MvcHtmlString.Create(lastPageSpan.ToString());
} 
```

它生成的链接如下所示：`<span><a href="/Forums/Thread?Count=2&amp;Keys=System.Collections.Generic.Dictionary%602%2BKeyCollection%5BSystem.String%2CSystem.Object%5D&amp;Values=System.Collections.Generic.Dictionary%602%2BValueCollection%5BSystem.String%2CSystem.Object%5D">&gt;&gt;</a></span>`

为什么？我究竟做错了什么？当我在设置之前设置断点时`.innerHtml`，我发现我的`firstValueDictionary`外观完全正常。到底是怎么回事？

**更新**：当我`RouteValueDictionary`用新创建的匿名类型（`new {page = 0}`）替换参数时，一切正常。为什么我不能使用预定义的`RouteValueDictionary`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-18T16:48:03.290

您使用了错误的 ActionLink 帮助程序重载。试试这样：

```
lastPageSpan.InnerHtml = helper.ActionLink(
    ">>", 
    pages.ActionName, 
    pages.ControllerName, 
    firstValueDictionary, 
    new RouteValueDictionary(pages.HtmlAttributes) // <!-- HERE!
).ToHtmlString(); 
```

这是[`overload`](http://msdn.microsoft.com/en-us/library/dd492124%28v=vs.108%29.aspx)您使用的：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    object routeValues,
    object htmlAttributes
) 
```

这是[`correct overload`](http://msdn.microsoft.com/en-us/library/dd504988%28v=vs.108%29.aspx)您需要使用的：

```
public static MvcHtmlString ActionLink(
    this HtmlHelper htmlHelper,
    string linkText,
    string actionName,
    RouteValueDictionary routeValues,
    IDictionary<string, object> htmlAttributes
) 
```

注意到区别了吗？

# ms-access - 运行时错误 3075 无法弄清楚

> ID：14940936
> 
> 赞同：0
> 
> 时间：2013-02-18T16:33:03.420
> 
> 标签：ms-access, vba

我正在尝试在按钮单击事件上进行插入，并且我不断收到查询表达式中缺少运算符的运行时错误，我的查询如下所示。有任何想法吗？

```
Private Sub CmdAdd_Click()
Dim strSql As String

strSql = "INSERT INTO Current_Costs(PO_Number,Lineitemid,Capital_detail,CapitalID,GL_Number,Cost_Type,Cost_Center,Cost_cat,Item_Cost,PO_Date)" & _
" VALUES (" & Me.txtPONum & "','" & _
    Me.cmbCapDetail & "','" & _
    Me.cmbCapDetail.Column(1) & "','" & _
    Me.txtCapID & "','" & _
    Me.txtGLNum & "','" & _
    Me.cmbCostType & "','" & _
    Me.txtCostCen & "','" & _
    Me.cmbCostCat & "','" & _
    Me.txtCost & "','" & _
    Me.TxtPODate & "')"

   DoCmd.RunSQL strSql 
```

我有一个类似的查询有同样的问题，我看不到问题

```
 CurrentDb.Execute ("UPDATE Current_Costs " & _
    "SET PO_Number='" & Me.txtPONum & "'" & _
    ",Lineitemid='" & Me.cmbCapDetail & "'" & _
    ",Capital_detail='" & Me.cmbCapDetail.Column(1) & "'" & _
    ",CapitalID='" & Me.txtCapID & "'" & _
    ",GL_Number='" & Me.txtGLNum & "'" & _
    ",Cost_Type='" & Me.cmbCostType & "'" & _
    ",Cost_Center='" & Me.txtCostCen & "'" & _
    ",Cost_cat='" & Me.cmbCostCat & "'" & _
    ",Item_Cost='" & Me.txtCost & "'" & _
    ",PO_Date='" & Me.TxtPODate & "'" & _
    "WHERE LineItemPOID=" & Me.txtID.Tag) 
```

编辑解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:47:55.400

这

```
" VALUES (" & Me.txtPONum & "','" & _ 
```

是简短的报价，应该是

```
" VALUES ('" & Me.txtPONum & "','" & _ 
```

把你的sql写成一个字符串，这样更容易看出问题：

```
strSql = "UPDATE Current_Costs " & _
"SET PO_Number='" & txtPONum & "'" & _
",Lineitemid='" & cmbCapDetail & "'" & _
",Capital_detail='" & cmbCapDetail.Column(1) & "'" & _
",CapitalID='" & txtCapID & "'" & _
",GL_Number='" & txtGLNum & "'" & _
",Cost_Type='" & cmbCostType & "'" & _
",Cost_Center='" & txtCostCen & "'" & _
",Cost_cat='" & cmbCostCat & "'" & _
",Item_Cost='" & txtCost & "'" & _
",PO_Date='" & TxtPODate & "'" & _
" WHERE LineItemPOID=" & txtID

Dim db As database
Set db = CurrentDB
db.Execute strsql dbFailOnError 
```

您在 WHERE 之前缺少一个空格，并且括号不匹配。

考虑使用参数：[语句结束错误](https://stackoverflow.com/questions/14939722/end-of-statement-error/14939864#comment20970098_14939864)

# regex - $ 和 Perl 的全局正则表达式修饰符

> ID：14940938
> 
> 赞同：6
> 
> 时间：2013-02-18T16:33:10.403
> 
> 标签：regex, perl

我终于想出了如何将文本附加到文件中每一行的末尾：

```
perl -pe 's/$/addthis/' myfile.txt 
```

但是，当我尝试学习 Perl 以经常使用正则表达式时，我无法弄清楚为什么以下 perl 命令将文本“addthis”添加到每行的末尾**和开头：**

```
perl -pe 's/$/addthis/g' myfile.txt 
```

我认为无论正则表达式匹配使用什么修饰符，'$' 都匹配行尾，但我想这是错误的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-18T16:36:54.407

**摘要：** 对于您正在做的事情，请删除`/g`它，使其仅在换行符*之前匹配。*`/g`告诉它在换行符之前和*字符串*末尾（换行符之后）匹配。

如果没有`/m`修饰符，`$`将在换行符之前（如果它出现在字符串末尾）或字符串末尾匹配。例如，如果同时使用`"foo"`and `"foo\n"`，则`$`将在 之后匹配`foo`。`"foo\nbar"`但是，它会在 之后匹配，`bar`因为*嵌入*的换行符不在字符串的末尾。

使用`/g`修饰符，您将获得所有`$`匹配的位置——所以

```
s/$/X/g; 
```

会取一条线`"foo\n"`，然后把它变成`"fooX\nX"`.

**侧边栏：** 修饰符`/m`将允许`$`匹配出现在字符串末尾*之前*的换行符，以便

```
s/$/X/mg; 
```

将转换`"foo\nbar\n"`为`"fooX\nbarX\nX"`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-18T17:32:45.377

正如[吉姆戴维斯](https://stackoverflow.com/a/14941006/368630)指出的那样，`$`匹配字符串的结尾或`\n`字符之前（带有`/m`选项）。（参见[perlre](http://perldoc.perl.org/perlre.html) Perldoc 页面的[正则表达式](http://perldoc.perl.org/perlre.html#Regular-Expressions)部分。使用修饰符允许它继续匹配。`g`

多行 Perl 正则表达式（即，其中包含换行符的 Perl 正则表达式，即使它只在行尾出现一次）会导致大多数 Perl 程序员遇到问题处理的各种复杂情况。

*   如果您一次读取一行文件，请始终在对该行`chomp`执行任何操作之前***使用。***`g`使用限定符时，这将解决您的问题。

*   如果您在 Linux/Mac 上读取来自 Windows 的文件，则可能会出现更多问题。在这种情况下，您将同时具有`\r`和`\n`字符。正如我最近在尝试调试程序时发现的那样，该`\r`字符不会被`chomp`. 我现在确保我总是打开我的文本文件进行阅读

像这样：

```
open my $file_handle, "<:crlf", $file... 
```

如果这实际上是 Linux/Mac 系统上的 Windows 文件，这将自动替换`\r\n`字符。`\n`如果这是一个普通的 Linux/Mac 文本文件，它什么也不做。其他明显的解决方案是不使用 Windows（***边缘拍摄！***）。

当然，在您的情况下，首先使用 chomp 会完成以下操作：

```
$cat file
line one
line two
line three
line four
$ perl -pe 'chomp;s/$/addthis::/g`
line oneaddthis::line twoaddthis::line threeaddthis::line fouraddthis:: 
```

chomp 删除了`\n`，所以现在，当行打印出来时你看不到它。唔...

```
$ perl -pe 'chomp;s/$/addthis/g;print "\n";
line oneaddthis
line twoaddthis
line threeaddthis
line fouraddthis 
```

这样可行！而且，你的一个班轮只是有点难以理解。

* * *

另一件事是采用Damian Conway 在他的书[Perl Best Practices](http://shop.oreilly.com/product/9780596001735.do)的第 12 章中推荐的更*现代*的方法：

> ## 使用`\A`和`\z`作为字符串边界锚。
> 
> 即使您不采用以前始终使用 /m 的做法，使用具有默认含义的 ^ 和 $ 也是一个坏主意。当然，您知道 Perl 正则表达式¹中 ^ 和 $ 的实际含义。但是那些阅读或维护您的代码的人会知道吗？还是他们更有可能以前面描述的方式误解这些元字符？Perl 提供的标记总是——并且明确地——表示“字符串的开头”和“字符串的结尾”：\A 和 \z（大写的 A，但小写的 z）。无论 /m 是否处于活动状态，它们都表示“字符串的开始/结束”。无论读者认为 ^ 和 $ 是什么意思，它们的意思是“字符串的开始/结束”。

如果您遵循康纳威的建议，并这样做：

```
perl -pe 's/\z/addthis/mg' myfile.txt 
```

您会看到您的短语`addthis`仅添加到每一行的末尾：

```
$cat file
line one
line two
line three
line four
$ perl -pe `s/\z/addthis/mg` myfile.txt
line one
addthisline two
addthisline three
addthisline four
addthis 
```

看看效果如何。这`addthis`被添加到每一行的最后！...就`\n`在那一行的字符之后。

玩够了，回去工作。（等等，今天是总统日。这是一个带薪假期。今天没有工作，当然除了我承诺在星期二早上之前完成的所有事情）。

希望这可以帮助您了解正则表达式有多么有趣，以及为什么这么多人决定学习 Python。

* * *

^(1.)知道Perl 中的含义`^`和真正含义吗？`$`嗯，是的，***我***当然愿意。我已经用 Perl 编程了几十年。是的，我知道所有这些东西。（自我注意：`$`显然并不意味着我一直认为的意思。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:39:11.493

一种解决方法：

```
perl -pe 's/\n/addthis\n/' 
```

不需要`g`修饰符：正则表达式逐行处理。

# php - 如何使用新贵重生 PHP 脚本？

> ID：14940940
> 
> 赞同：2
> 
> 时间：2013-02-18T16:33:13.230
> 
> 标签：php, upstart

我有一个 Ubuntu 12.04 安装和一个 PHP 脚本，我想在它终止后立即重新运行。我正在使用暴发户，这`myscript.conf`在`/etc/init/`：

```
start on startup
stop on shutdown
exec php5 /var/myscript.php
respawn 
```

我可以使用 运行我的脚本`start myscript`，这一次可以正常工作，但是一旦脚本终止，我就无法让脚本重新生成。

尝试重生 PHP 脚本时，我需要注意什么特别的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:40:32.120

当你有一个 startscript 时，你可以很容易地更新你的脚本`/etc/init.d`

`update-rc.d myscript defaults`

但是你需要一个启动脚本。您可以签出骨架脚本 (/etc/init.d/skeleton) 并复制该脚本。然后您可以更改参数并运行您的程序。

像这样：`/etc/init.d/myscript start`

在 startscript 中，如果进程未正确终止，您可以终止该进程。

# php - 如何使用 PHP API 在 Rackspace Cloud Files 容器中的位置之间复制文件

> ID：14940942
> 
> 赞同：0
> 
> 时间：2013-02-18T16:33:17.697
> 
> 标签：php, rackspace-cloud

给定代码

```
$this->cf_container->copy_object_to($file, $this->cf_container, $new_path . '/' . $file_subpath); 
```

其中 $this->cf_container 是 CF_Container 类的对象，我收到此错误：

“指定的对象‘一个随机容器/one/pow/whiskey.jpg’不存在作为要复制的源，或者‘一个随机容器’不存在作为要复制到的目标。”

显然，容器的名称是“A random container”。我已经尝试过使用不包含相同效果的空格的容器。

如果我执行 $this->cf_container->get_object($file) 我会得到一个带有文件属性的 CF_Object 对象，所以它存在。

$file 等于 "one/pow/whiskey.jpg" $new_path 等于 "one/different_folder" $file_subpath 等于 "whiskey.jpg"

任何人都有线索或以前遇到过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T21:09:15.907

您可能想尝试新的[Rackspace PHP SDK](http://docs.rackspace.com/sdks/guide/content/php.html)（又名 php-opencloud）。php-cloudfiles 最终将被弃用。

要在 php-opencloud 中复制对象，请查看[DataObject::Copy](http://docs.rackspace.com/sdks/api/php/dataobject.inc.html#DataObject%3a%3aCopy%28%29)。如果遇到问题，可以[在此处](https://github.com/rackspace/php-opencloud/issues)提出问题。

# java - 在 JAVA 中仅使用 max 和 min 函数查找三个随机数的中间数

> ID：14940943
> 
> 赞同：5
> 
> 时间：2013-02-18T16:33:18.633
> 
> 标签：java, max, min

我已经解决了这个问题，但我想知道是否有更快的方法。

假设 a、b、c 是随机生成的数字，有没有办法只使用 Math.max 和 Math.min 函数来找到中间数字？

```
 med = Math.max(Math.max(Math.min(a,b),Math.min(b,c)),(Math.max(Math.min(b,c),Math.min(a,c)))); 
```

非常感谢，任何回复将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:42:08.540

下面呢？

```
min(min(max(a,b), max(b,c)), max(a,c)) 
```

# javascript - 特定于 Chrome 的 Javascript

> ID：14940944
> 
> 赞同：0
> 
> 时间：2013-02-18T16:33:19.210
> 
> 标签：javascript, google-chrome

我在一个项目中有很多 rails 和 javascript 代码。到目前为止，它运行良好，但在一个特定的地方，Javascript 不能在 Chrome 中运行，而在其他浏览器中运行。

表单本身有一个复选框。一旦被选中，它将在表单上启用文本框。在初始加载时，它没有启用这些字段。但是，只要我在 Chrome 中选择“检查元素”并关闭检查元素窗口，它就会开始工作，javascript 就会启动并按应有的方式工作。

后面的代码太多了，在这里发布它真的很困难。我希望有一些只针对 Chrome 的“魔法”。

以前有人遇到过这种问题吗？

# ios - iOS 标准定位服务 vs 重大变化定位服务 vs 区域监控

> ID：14940945
> 
> 赞同：5
> 
> 时间：2013-02-18T16:33:24.513
> 
> 标签：ios, gps, location, core-location, cllocationmanager

我正在开发一个 iOS 应用程序，其主要功能之一是监听用户的位置。我需要较高的定位精度来了解用户何时进入某些区域，但我不确定应该使用哪种定位服务。

AFAIK，*显着变化的位置服务*提供低准确性，对吧？我不知道“重大变化”应该理解什么。我没有在 Apple 的文档中读到它的准确性，但我在一些帖子中读到了一些关于它的内容，所以这不符合我的需要。如果是这样，我应该在*标准位置服务*和*区域监控*之间进行选择。我知道标准服务可以设置精度级别和距离过滤器，但这似乎会耗尽电池电量。另一方面，区域监控在功率水平方面似乎更有效，但我不确定我是否可以通过这项服务达到高精度。而且我需要监控很多区域；我不知道这是否可能，或者只能提供一个。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:53:51.657

牺牲电池与获取准确位置之间总是存在战争。这完全取决于您的应用程序的要求和用户的偏好。

作为用户，我想要这个选择而不是“强制功能”，因此我认为您可以提供两种方法，并让使用在“准确性”和“电池寿命”之间进行选择。

如果您可以将此选择提供给最终用户，那么您一定不要随身携带。

我希望这能澄清我的观点。

就像他们在 Matrix 中常说的那样——“你确实有选择！！”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T18:01:36.520

> AFAIK，显着变化的位置服务提供低准确性，对吧？

是的，为了您的高定位精度需求，忘记它。
要么你对大约（一些）几百米到几公里的蜂窝塔定位感到满意，要么你需要一些米（3-30m）的精度（GPS）。
介于两者之间，有时只有 Wifi，仅适用于城市。

> 如果是这样，我应该在标准位置服务和区域监控之间进行选择。

为了获得高精度，您需要使用`desiredAccuracy`Best的标准定位服务

电池耗尽：如果设备不使用，我可以在完全 GPS 质量模式下运行 8 小时。因此，用户应该从您的应用程序中获得积极的利益。比如导航。

# c# - C# 向下转换问题

> ID：14940946
> 
> 赞同：0
> 
> 时间：2013-02-18T16:33:34.250
> 
> 标签：c#, oop

我有一个派生自 Equipment 基类的 Face 类。在基类 (Equpiment) 中，有一个方法可以根据数据库中的 rowID 填充并返回设备对象。

在派生类（FaceClass）中，我称之为超级

```
public PPE_EquipmentClass GetEquipmentByRowID(Int32 rowID)
    {
        PPE_EquipmentClass Equipment = new PPE_EquipmentClass();  
        returns Equipment; 
    } 
```

在派生类中：

```
 public class PPE_Face : PPE_EquipmentClass
    {

     public PPE_Face GetFaceData(Int32 rowID)
    {
         if (rowID>0)
        {
            try
            {  
               PPE_Face Face = null;
               Face = new PPE_Face();
               PPE_EquipmentClass _ppeEquip = new PPE_EquipmentClass();
               _Face =(PPE_Face) _ppeEquip.GetEquipmentByRowID(rowID);
                               }
            catch (Exception ex)
            {

                throw new Exception(ex.Message);
            }
            finally
            {

            }
        }
    }

   } 
```

但我不断得到

> “无法将‘PPEWebApp.Classes.PPE_EquipmentClass’类型的对象转换为‘PPEWebApp.Classes.PPE_Face’类型”

我不确定为什么向下铸造不起作用，即使设备是基类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:37:35.843

您将其实例化为 PPE_EquipmentClass 而不是 PPE_Face 类：

```
public PPE_EquipmentClass GetEquipmentByRowID(Int32 rowID)
{
    PPE_EquipmentClass Equipment = new PPE_EquipmentClass();  
    return Equipment; 
} 
```

如果您希望它成为 PPE_Face，则必须将其实例化。作为父类的成员并不一定意味着您是子类的成员，在这种情况下您显然不是，因为它被实例化为新的 PPE_EquipmentClass()。你可以这样写：

```
public PPE_EquipmentClass GetEquipmentByRowID(Int32 rowID)
{
    PPE_EquipmentClass Equipment = new PPE_Face();  
    return Equipment; 
} 
```

但目前尚不清楚这是否是您真正想要的。

# grails - 如何在 GEB 中选择标签文本？

> ID：14940947
> 
> 赞同：1
> 
> 时间：2013-02-18T16:33:34.527
> 
> 标签：grails, functional-testing, spock, geb

我有一个选择下拉菜单，如果未选择某个值，它将显示错误。

```
<div class="field contain" >
<select name="myselect" id="myselect" class="error" >
    <option value="0">--select a value--</option>
    <option value="1">Option 1</option>
    <option value="2">Option 2</option>
</select>
<label for="myselect" generated="true" class="error" style>Please select at least one option</label>
</div> 
```

我想验证此错误标签是否已使用 GEB 显示。尝试使用“错误”选择器选择它不起作用。任何的意见都将会有帮助。

谢谢， 阿比吉斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T16:55:56.260

这不行吗？

```
assert $("select.error option").text() == "--select a value--" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-08T21:38:54.720

试试 CSS 选择器。

```
$('label[for=myselect]').text() 
```

这个选择标签标签，其值为“for”属性 = myselect。然后“text()”方法返回它的主体：“请至少选择一个选项”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-05T21:16:18.297

尝试

```
assert $("label", for:"myselect").text() == "Please select at least one option" 
```

# pandas - 一次对多个因变量使用 pandas.ols

> ID：14940948
> 
> 赞同：3
> 
> 时间：2013-02-18T16:33:35.177
> 
> 标签：pandas, time-series

我想知道我是否可以一次将`pandas.ols`模型应用于针对一个自变量的多个响应变量的数据框。

所以想象我有以下内容：

```
In [109]: y=pandas.DataFrame(np.random.randn(10,4))
In [110]: x=pandas.DataFrame(np.random.randn(10,1)) 
```

我想做这样的事情：

```
In [111]: model=pandas.ols(y=y, x=x) 
```

基本上用四个模型输出的结果或至少获得四个的系数。如果可能的话，我宁愿避免遍历响应变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T18:38:21.383

我认为应该这样做。

```
#First generate the data
x=pd.DataFrame(np.random.randn(10,1))
y=pd.DataFrame(np.random.randn(10,4))

#Since we are doing things manually we'll need to add the constant term to the x matrix
x[1] = ones(10)

#This matrix precomputes (X'X)^-1X which we will premultiply the y matrix by to get results
tmpmat =  np.dot(np.linalg.pinv(np.dot(x.T ,x)),x.T)

#Solve for the betas
betamatrix = np.dot(tmpmat,y)

#Compare with the pandas output one at a time.
model=pd.ols(y=y[0], x=x, intercept=False)
model=pd.ols(y=y[1], x=x, intercept=False) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-14T10:44:54.363

已经这样做了很多次，但还没有找到循环的替代方法。以下代码将四个回归的结果存储在一个字典中。如果您只对某些系数感兴趣，则可以在循环回归时捕获它们。

```
model = {}
for i in y:
    model[i] = pd.ols(y=y[i], x=x) 
```

# mysql - CF10 连接 mysql 字符串作为二进制数据

> ID：14940950
> 
> 赞同：4
> 
> 时间：2013-02-18T16:33:37.600
> 
> 标签：mysql, sql, coldfusion, coldfusion-10

我正在努力将一个站点从 CF8 移动到 CF10，只是遇到了一些我没想到的东西。我的 MySQL 查询有一个简单的连接，可以将公司 ID 与公司名称结合起来，如下所示：

```
SELECT CONCAT(co_coid, ' - ',co_company) AS IDCONAME 
```

在 CF8 上，这将返回一个字符串，我可以将其作为我在 cfselect 上的显示值。

```
998 - Company A
999 - Company B 
```

等等

但是，在 CF10 上，当我转储查询时，它显示为二进制数据，我必须在输出上使用 toString()。

我知道在返回以前不存在的加密数据时需要使用 toString() 的一些陷阱，但我不确定它为什么在简单的字符串连接上这样做。

[更新] 这可以通过连接字符串或其他服务器范围的设置来更改吗？我知道我可以在输出中使用 toString() 或在查询中使用 CAST()，但是服务器范围内的东西会是理想的。MySQL 服务器是同一台服务器，因此没有版本更改。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T16:35:19.530

将数字转换为字符串，

```
SELECT CONCAT(CAST(co_coid AS CHAR(15)), ' - ',co_company) AS IDCONAME 
```

# dos - 记录文件的批处理命令

> ID：14940951
> 
> 赞同：1
> 
> 时间：2013-02-18T16:33:38.303
> 
> 标签：dos

我想将 DOS 命令文件 (.CMD) 的内容捕获到日志文件中。

我可以理解我可以使用 > 或 >> 捕获单个命令以记录文件。

但是，我也想将完整的 dos 屏幕的内容复制到日志文件中。

我还注意到，当我使用 >> 时，它会从 dos 控制台中删除输出消息（已复制 1 个文件）并在日志文件中移动。是否有可能我可以在控制台和日志文件中显示消息。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T16:37:00.607

> 但是，我也想将完整的 dos 屏幕的内容复制到日志文件中。

确保不要在脚本中使用“echo off”。

> 它从 dos 控制台删除输出消息（已复制 1 个文件）并移入日志文件

在附加之前将 stderr 重定向到 stdout：

```
myscript.bat 2>&1 >> myscript.log 
```

请参阅[此处](http://www.robvanderwoude.com/battech_redirection.php)关于批处理文件重定向的好资源。

> 是否有可能我可以留下消息在控制台和日志文件中都显示

你需要“三通”。[从这里](http://unxutils.sourceforge.net/)下载一个适用于 Windows 的好软件。然后执行此操作而不是上述操作。

```
myscript.bat 2>&1 | tee -a myscript.log 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-04-17T14:16:59.517

```
myscript.bat >> myscript.log 2>&1 
```

# sql - 消除 FROM 子句中的子查询

> ID：14940954
> 
> 赞同：2
> 
> 时间：2013-02-18T16:33:40.750
> 
> 标签：sql, hql

标记表有 3 列：*id*（主键）、*tag*和*resource*。

我想选择与至少 3 个资源关联的标签。一个资源可以多次与同一个标签关联，因此单个*GROUP BY*是不够的。

我当前的 SQL 查询如下：

```
SELECT tag FROM
(SELECT resource, tag FROM tagging GROUP BY resource, tag) AS tagging
GROUP BY tag HAVING count(*) > 2; 
```

我需要在 HQL 中转换这个请求，并且 HQL 不接受*FROM*子句中的子查询。

是否有一种（快速）方法可以在不使用子查询或在*WHERE*子句中使用子查询的情况下做同样的事情？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:35:26.920

要查找与 2 个以上不同资源相关联的标签，您可以使用

```
SELECT tag
FROM   tagging
GROUP  BY tag
HAVING count(DISTINCT resource) > 2; 
```

# sql - 显示一行是否在表中的结果集

> ID：14940958
> 
> 赞同：1
> 
> 时间：2013-02-18T16:34:01.667
> 
> 标签：sql, postgresql, activerecord

我有两张表 A 和 B。他们的关系是 A has_many B。

A 中的行可以在 B 中，也可以不在。

那么，如何检索 A 中的所有行，并在结果集中有一个字段说明每一行是否在 B 中？

例如，A 具有以下 id：1、2、3、4、5

B 有这些 A_id：1、2、3

所以结果集将是：

```
1 true
2 true
3 true
4 false
5 false 
```

我使用 PostgreSQL，但可能无关紧要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:45:57.823

```
SELECT id,
       CASE
         WHEN EXISTS (SELECT *
                      FROM   B
                      WHERE  B.A_id = A.id) THEN 'True'
         ELSE 'False'
       END AS InB
FROM   A 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:47:32.537

```
select distinct
  a.id,
  case when b.a_id is null then 'false' else 'true'
from
  a left join b on b.a_id = a.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:50:43.913

只需使用左外连接。

例如：

```
CREATE TABLE a (a_id INTEGER);
CREATE TABLE b (b_id INTEGER, a_id INTEGER);

  INSERT INTO a(a_id)
  VALUES (1), (2), (3);

  INSERT INTO b(b_id,a_id)
  VALUES (1,3);

  select a.a_id,
         CASE WHEN b.a_id IS NULL THEN 'FALSE' ELSE 'TRUE' END    
  from a
  left join b
         on b.a_id = a.a_id;

  result:
  1|FALSE
  2|FALSE
  3|TRUE 
```

# django - Django - 提交链接

> ID：14940959
> 
> 赞同：0
> 
> 时间：2013-02-18T16:34:07.557
> 
> 标签：django, django-forms, django-views

我有一个带有 POST Submit 按钮的表单。我想在提交表单和 form.is_valid() 时链接到新页面。

在视图中或模板中创建链接更好吗？怎么做？

视图.py：

```
from django.shortcuts import render_to_response
from ezmapping.models import *
from django.forms.models import modelformset_factory

def setName(request):
    ezAppFormSet = modelformset_factory(ezApp, extra=1, fields=('name'))
    formset = ezAppFormSet(queryset=ezApp.objects.none())
    if request.method == 'POST':
        formset = ezAppFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
    return render_to_response("project/manage_new.html", {'formset': formset, 'title': "New"}, context_instance=RequestContext(request)) 
```

模板.html

```
 {% extends "basemap.html" %}
 {% block content %}
 <table border="1">
   <tr>
   <td>
    <h1>Define new App options</h1>
    {% if formset.errors %}
        <p style="color: red;">
            Please correct the error{{ formset.errors|pluralize }} below.
        </p>
    {% endif %}
    <form method="post" action="." encrypt="multipart/form-data">{% csrf_token %}
            {{ formset.as_p }}
        <input type="submit" value="Submit">
    </form>
</td>
</tr>
</table>
{% endblock %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:50:54.703

您可以像这样在视图中使用 HttpResponseRedirect()：

```
from django.shortcuts import render_to_response
from ezmapping.models import *
from django.forms.models import modelformset_factory

def setName(request):
    ezAppFormSet = modelformset_factory(ezApp, extra=1, fields=('name'))
    formset = ezAppFormSet(queryset=ezApp.objects.none())
    if request.method == 'POST':
        formset = ezAppFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
            next_link = u"/next/"
            return HttpResponseRedirect(next_link)

    return render_to_response("project/manage_new.html", {'formset': formset, 'title': "New"}, context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:45:19.053

当然。只需在您的条件 for 中返回一个 render_to_response `request.method == 'POST'`，或者可选地，只需将上下文和模板设置为变量以传递给 render_to_response ，如下所示：

释义：

```
def foo(request):
    template = 'template1.html'
    # form and formsets here set into `context` as a dictionary

    if request.method == 'POST':
        template = 'template2.html'

    return render_to_response(template, context) 
```

[编辑]

当我重新阅读您的问题时，如果您想在表单有效的情况下重定向到不同的视图，请改为返回 HttpResponseRedirect 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:47:44.010

如果我正确理解你的问题。

您的看法：

```
from django.shortcuts import render_to_response
from ezmapping.models import *
from django.forms.models import modelformset_factory

def setName(request):
    ezAppFormSet = modelformset_factory(ezApp, extra=1, fields=('name'))
    formset = ezAppFormSet(queryset=ezApp.objects.none())
    if request.method == 'POST':
        formset = ezAppFormSet(request.POST, request.FILES)
        if formset.is_valid():
            formset.save()
            submit_link = True # 2*
        else:
            submit_link = False
    return render_to_response("project/manage_new.html", {'submit_link': submit_link, 'formset': formset, 'title': "New"}, context_instance=RequestContext(request)) 
```

您的模板：

```
{% extends "basemap.html" %}
 {% block content %}
 <table border="1">
   <tr>
   <td>
    <h1>Define new App options</h1>
    {% if formset.errors %}
        <p style="color: red;">
            Please correct the error{{ formset.errors|pluralize }} below.
        </p>
    {% endif %}
    <form method="post" action="." encrypt="multipart/form-data">{% csrf_token %}
            {{ formset.as_p }}
        <input type="submit" value="Submit">
    </form>

    {% if submit_link %} 
      <a href='/next/'>Data is saved, let's continue.</a>
    {% endif %}
</td>
</tr>
</table>
{% endblock %} 
```

**更新**。

是的，如果您想重定向（不显示**下一个**链接），只需放置：

```
from django.shortcuts import redirect
...
return redirect( 'you-url' ) 
```

而不是 2*。

# php - 图片上传错误

> ID：14940961
> 
> 赞同：0
> 
> 时间：2013-02-18T16:34:20.690
> 
> 标签：php, file-upload, image-uploading

我正在尝试构建一个简单的图像上传，但是当我尝试上传任何图像时，我收到一个错误，告诉我它是一个无效文件。谁能告诉我我做错了什么？

这是我的代码：

```
<?php

    $allowExts = array("jpg", "jpeg", "gif", "png", "stl");
    $extensions = end(explode(".", $_FILES["file"]["name"]));

    if ((($_FILES["file"]["type"] == "image/gif")
    || ($_FILES["file"]["type"] == "image/jpeg")
    || ($_FILES["file"]["type"] == "image/png")
    || ($_FILES["file"]["type"] == "image/pjpeg")
    || ($_FILES["file"]["type"] == "image/stl"))
    && ($_FILES["file"]["size"] < 21000)
    && in_array($extension, $allowExts))

    {
        if ($_FILES ["file"]["error"] > 0){
        echo "ERROR: " . $_FILES["file"]["error"] . "<br>";
        }

        else{
            echo "Upload: " . $_FILES["file"]["name"];
            echo "Type: " . $_FILES["file"]["type"];
            echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
            echo "Stores in: " . $_FILES["file"]["tmp_name"];

            if (file_exists("upload/" . $_FILES["file"]["name"])){
                echo $FILES["file"]["name"] . "already exists. ";
            }
            else{
                move_uploaded_file($_FILES["file"]["tmp_name"],
                "upload/" . $FILES["file"]["name"]);
                echo "Stored in: " . "upload/" . $FILES["file"]["name"];
            }
        }
    }
    else{
        echo "Invalid File";
        }

?> 
```

这是我根据我所做的编辑调整后的文件：

```
<?php

$allowExts = array("jpg", "jpeg", "gif", "png", "stl");
$extension = end(explode(".", $_FILES["file"]["name"]));

if ((($_FILES["file"]["type"] == "image/gif")
|| ($_FILES["file"]["type"] == "image/jpeg")
|| ($_FILES["file"]["type"] == "image/png")
|| ($_FILES["file"]["type"] == "image/pjpeg")
|| ($_FILES["file"]["type"] == "image/stl"))
&& ($_FILES["file"]["size"] < 30000000)
&& in_array($extension, $allowExts))

{
    if ($_FILES ["file"]["error"] > 0){
    echo "ERROR: " . $_FILES["file"]["error"] . "<br>";
    }

    else{
        echo "Upload: " . $_FILES["file"]["name"] . "<br>";
        echo "Type: " . $_FILES["file"]["type"] . "<br>";
        echo "Size: " . ($_FILES["file"]["size"] / 1024) . " kB<br>";
        echo "Stores in: " . $_FILES["file"]["tmp_name"] . "<br>";

        if (file_exists("images/" . $_FILES["file"]["name"])){
            echo $FILES["file"]["name"] . "already exists. ";
        }
        else{
            move_uploaded_file($_FILES["file"]["tmp_name"],
            "images/" . $FILES["file"]["name"]);
            echo "Stored in: " . "images/" . $FILES["file"]["name"];
        }
    }
}
else{
    echo "Invalid File";
    print_r($_FILES);
    }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:44:46.610

“扩展名”和“扩展名”有一个错字。如果已修复，请使用`is_uploaded_file`.

`in_array($extension, $allowExts)`必须是或`in_array($extensions, $allowExts)`名称`$extensions`。`$extension`

您必须像使用元素 1`$extension[1]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T19:14:14.537

让我们稍微简化一下；HTML 应如下所示：

```
<form method='POST' action="upload.php" enctype="multipart/form-data" >

<input type="file" name="userfile" id="userfile"  />

<input type="submit" value="upload" />

</form> 
```

你的PHP，试试这个：

```
<?php
//GRAB IMAGE FROM POST
$pic = $_FILES['userfile'];
$picName = $_FILES['userfile']['name'];

$file_ext =  strtolower(end(explode(".", $picName )));

if($file_ext == "jpg" || $file_ext == "jpeg" || $file_ext == "gif" || $file_ext == "png" ){

    //MAKE SURE YOU HAVE CHMOD 777 THIS DIRECTORY AND DOUBLE CHECK THIS IS THE CORRRECT DIRECTORY!
    $theDirectory = 'upload/theImage.'.$file_ext;

    //MOVE THE FILE TO THIS DIRECTORY
    move_uploaded_file($pic['tmp_name'], $theDirectory);

}
else{

        echo 'bad file';
}

?> 
```

验证文件有点麻烦，但它可以解决问题。确保你命名 php 文件`upload.php`或任何你想要的，只要确保你改变`form`了 html 上的匹配。确保将文件夹`"upload"`更改为 777。这样做应该可以无限期地工作。我总是发现最好让它工作，然后再回去处理安全问题。例如，您应该使用 GD 库通过执行以下操作来验证它是合法图像（可能需要调整此位）：

```
//MAKE IT A JPEG

$theDirectoryTwo = 'upload/theImageValidated.jpg';
$theRawImage = file_get_contents($theDirectory);
$theRawImage = imagecreatefromstring($theRawImage);
imagejpeg($theRawImage, $theDirectoryTwo); 
```

除非有人试图将文本文件命名为“anImage.jpg”，否则每次运行都会产生完美的 jpeg，上面的位只会产生黑色图像。只需确保安装了 GD 库即可。

当然，总是存在可怕的 Chmod 777 安全风险，只要只有上传的文件进入那里，你应该没问题，没有任何问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T17:40:57.637

从评论中我可以看到您一直在上传超出大小限制的文件。不同操作系统的实际文件大小可能略有不同，因此请务必使用足够大的限制。

可能值得创建一个文件验证函数来执行每个单独的检查（类型、大小、扩展名）并让它返回一个更细粒度的有意义的错误，例如无效扩展名、无效类型等。这将使将来更容易调试.

# x86 - x86 处理器是否通过 USB 以小端格式传输/接收数据？

> ID：14940965
> 
> 赞同：0
> 
> 时间：2013-02-18T16:34:37.330
> 
> 标签：x86, embedded, serial-port, usb

我正在为 Xilinx FPGA 编写异步通信控制器，我想省去弄清楚 x86 处理器发送数据的顺序的麻烦。

在主机端，我使用的是使用以下教程的 C 程序：http: [//slackware.osuosl.org/slackware-3.3/docs/mini/Serial-Port-Programming](http://slackware.osuosl.org/slackware-3.3/docs/mini/Serial-Port-Programming)

另外，发送数据时是否可以在大端和小端之间切换格式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T17:58:57.960

如果您谈论的是异步通信——串行端口——那么字节顺序取决于您在该串行端口上运行的协议。x86 是 little-endian，因此发送整数字节的程序会先发送 LSB。

由于您通常会使用某种协议来发送数据，因此您需要使用该协议的字节顺序。

因此，您的答案取决于向您发送数据的 x86 程序实际上将使用什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T13:46:58.837

对于串行通信协议，字节序是由协议定义的，而不是由处理器定义的。USB 是小端序。[请参阅此处](http://www.usb.org/developers/docs/)的 USB 3.0 规范第 7.1 节。

您拥有 x86 的事实无关紧要。可以编写在 x86 上运行的串行通信驱动程序以符合小端或大端协议。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T13:59:40.640

USB 是小端序。

但是，如果您正在谈论通过 USB 串行端口发送字节，那么它完全取决于程序发送它们的顺序。

在英特尔系统上，除非它最初打算与大端系统通信，否则我希望（但想要验证）它们首先发送最低有效字节。

# c# - 获取鼠标移动的距离

> ID：14940973
> 
> 赞同：2
> 
> 时间：2013-02-18T16:34:57.803
> 
> 标签：c#, .net, winforms, mouseevent, mousemove

我有一个表格，里面有一个小的`Panel`叫`Player`. 如何将面板“链接”到用户的鼠标，以便它会随着鼠标的移动而移动？

我已经订阅`Player_MouseMove`了`Player.MouseMove`事件，但我不知道鼠标实际移动了多少。我能想出的唯一方法就是有这样一个：

```
private Point previousLocation;

private void Player_MouseMove(object sender, MouseEventArgs e)
{
    int differenceX, differenceY;
    differenceX = e.X - previousLocation.X;
    differenceY = e.Y - previousLocation.Y;
    previousLocation = e.Location;
} 
```

这似乎很愚蠢，有一个额外的变量并每次都计算差异。完美的方式就像`Player.LinkToCursor();`这样，但如果没有自动化的方式，至少有更好的方式吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-18T16:40:56.613

查看[http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventargs.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.mouseeventargs.aspx)我看不到任何可以帮助您更好地完成这项工作的东西。

但是，您可以做一件事：

```
Point difference = e.Location - (Size)previousLocation; 
```

向量算术;)

# javascript - 如何从定义之外更改组合框（Ext JS）的模型

> ID：14940977
> 
> 赞同：0
> 
> 时间：2013-02-18T16:35:10.413
> 
> 标签：javascript, extjs, combobox

我这里有两个 Ext Combo 框，当 combobox1 的 select 事件调用时，我需要更改第二个组合框的值，我的问题是我不知道如何更改组合框的模型。

```
 items: [{
        xtype:'combo',
        fieldLabel: 'Course',
        afterLabelTextTpl: required,     
        store: new Ext.data.SimpleStore({
            data: [
                [1, 'Bsc CS'],
                [2, 'MSc CS'],
            ],
            id: 0,
            fields: ['value', 'text']
        }),             
        name: 'first',
        listeners:{

          select: function( combo, records, eOpts )
          {
              if(this.getValue()=="Bsc CS")
              {
                 // Ext.get('semcombo').getStore.loadData(msc);
              }
              else if(this.getValue()=="MSc CS")
              {

              }
          }  

        },
        editable:false,
        allowBlank: false
    },{
        xtype:'combo',
        fieldLabel: 'Semester',
        id : 'semcombo',
        afterLabelTextTpl: required,
        name: 'last',
        allowBlank: false,
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:02:12.233

对于第二个组合框，为每种模型类型配置一个组合框。在第一个组合框中进行选择时隐藏或显示相应的组合框。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:11:04.923

如果您需要完全**更改数据**（**[JSFiddle](http://jsfiddle.net/TpdeC/)**）

```
select: function(checkbox,records) {
      comp.clearValue();
      comp.bindStore(Ext.StoreMgr.lookup(records[0].data.store));
      // you can change the value field if needed
      comp.displayField = 'petname'; 
      // you can change the display field if needed
      comp.valueField = 'id'; 
      // you can change the display template if needed
      comp.displayTpl = new Ext.XTemplate(
          '<tpl for=".">' +
              '{[typeof values === "string" ? values : values["' + comp.displayField + '"]]}' +
              '<tpl if="xindex < xcount">' + comp.delimiter + '</tpl>' +
          '</tpl>'
      );
      comp.picker = null;
 } 
```

如果您只**需要过滤**（加载）第二个组合框中的数据，您可以执行以下操作

在第一个组合框的选择事件上，准备第二个组合框来过滤数据

```
combobox2.queryData = [{ property: 'fieldName', value: value}];
combobox2.reset();
combobox2.doQuery(combobox.queryData); 
```

其中`combobox2`是对激活的组合的引用和组合`value`中的属性值。为确保使用您的新查询使用

```
combobox2.on('beforequery', function (e) {
    e.query = e.combo.queryData;
}); 
```

# python - 用于提取 URL 的 Python 正则表达式

> ID：14940979
> 
> 赞同：0
> 
> 时间：2013-02-18T16:35:12.557
> 
> 标签：python, expression

我正在研究正则表达式，想知道如何从 HTML 页面中提取 URL。我想从这一行打印出网址：

```
Website is: http://www.somesite.com 
```

每次找到该链接时，我只想在`**Website is:**` 任何帮助后提取其中的 URL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:39:57.847

这足够还是您需要更具体？

```
In [230]: s = 'Website is: http://www.somesite.com '
In [231]: re.findall('Website is:\s+(\S+)', s)
Out[231]: ['http://www.somesite.com'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T16:40:09.657

您可以将每一行与带有捕获组的正则表达式匹配，如下所示：

```
for l in page:
    m = re.match("Website is: (.*)")
    if m:
        print m.groups()[0] 
```

这将检查每一行是否与模式匹配，并从中提取链接。

几个陷阱：

1.  这假定“Website is”表达式始终位于行首。如果不是，您可以使用`re.search`.

2.  这假设冒号和网站之间只有一个空格。如果这不是真的，您可以将表达式更改为类似`Website is:\s+(http.*)`.

具体情况取决于您尝试解析的页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:42:40.860

正则表达式可能对此有点矫枉过正，因为它非常简单。

```
def main():
    urls = []
    file = prepare_file("<yourfile>.html")
    for i in file:
         if "www" in i or "http://" in i:
             urls.append(i)
    return urls

def prepare_file(filename):
    file = open(filename)
    a = file.readlines() #splits on new lines
    a = [ i.strip() for i in [ x for x in a ] ] #remove white space
    a = filter(lambda x : x != '', a) #remove empty elements
    return a 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:50:43.993

根据我读过的内容，用正则表达式捕获 URL 很尴尬

可能使用以下正则表达式模式对您有好处：

```
pat = 'Website is: (%s)' % fireball 
```

其中 fireball 是一种捕获 URL 的模式，您可以在此处找到：

[daringfireball.net/2010/07/improved_regex_for_matching_urls](http://daringfireball.net/2010/07/improved_regex_for_matching_urls)

# c# - url 中的分号作为查询字符串的分隔符

> ID：14940981
> 
> 赞同：4
> 
> 时间：2013-02-18T16:35:19.513
> 
> 标签：c#, asp.net

我一直听说 W3C 建议使用“;” 而不是“&”作为查询字符串分隔符。

> 我们建议 HTTP 服务器实现者，特别是 CGI 实现者支持使用“;” 代替“&”来省去作者以这种方式转义“&”字符的麻烦。

有人可以解释为什么“;” 推荐而不是“&”？

另外，我尝试使用`";"`而不是`"&"`. （例如：）`.com?str1=val1;str2=val2`。当`Request.QueryString["str1"]`我读到“ `val1;str2=val2`”时。那么如果`";"`被推荐，我们如何读取查询字符串呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:48:54.073

正如链接文件所说，`;`推荐超过`&`因为

> 使用“&”字符来分隔表单字段与它在 SGML 属性值中用于分隔字符实体引用的用途相互作用。

例如，假设您希望您的网址是`...?q1=v1&q2=v2`

`&` *那里*没有什么问题。但是，如果您想将该查询放入 HTML 属性中`<a href="...?q1=v1&q2=v2">`，它*会中断*，因为在 HTML 属性中，它`&`表示字符实体的开始。你必须逃避`&`as `&amp;`， give `<a href="...?q1=v1&amp;q2=v2">`，如果你不必这样做会更容易。

`;`根本没有像这样重载；您可以将一个放在 HTML 属性中，而不必担心。`;`因此，如果服务器将其识别为查询参数分隔符会简单得多。

但是，从外观上看（根据您的实验），ASP.Net*并没有这样*识别它。如何得到它？我不确定你能不能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-25T16:48:52.313

简而言之，HTML 是一团糟（由于它的宽大处理），使用分号有助于简化这一点。

为了使用分号作为分隔符，我不知道 .NET 是否允许这种自定义，或者我们开发人员是否需要编写自己的方法来处理 QueryString。.NET 确实让我们可以访问原始 QueryString，我们可以从那里运行它。这就是我所做的。我编写了自己的方法，这并不太难，但是花费了大量的测试时间和调试，其中一些是微软在处理代理对时甚至不符合 Web 标准的错。我确保我的实现适用于所有 Unicode 字符，包括多语言平面（因此适用于中文和日文字符等）。

在添加我自己的发现之前，我还想确认并包括罗琳、吉文和贝尼贝拉在罗琳的回答中指出的重要信息以及他们对此类回答的评论：在 HTML 中不逃避它们是不正确的，但它通常有效，但这只是因为解析器是如此宽容。有了这个，我还解释了为什么这会导致编码不当的错误（这可能是大多数开发人员的受害者）。

不能依赖在 QueryStrings 中不正确编码 & 符号的这种宽容，有时这种宽容会导致令人讨厌的错误。例如，假设一个 QueryString 传递一个随机的 ASCII 字符串（或用户输入）并且它们没有正确编码。然后'amp;' '&' 之后的内容被解码，意外的结果是 'amp;' 本质上是“吞下”。（通过吞下，我的意思是它被“吃掉”或丢失。）一个实际的使用场景是当用户被要求输入进入数据库的输入并且用户输入 HTML（如 StackOverflow 中的此处）但因为它不是正确发布然后讨厌的错误发展。

';' 的真正优势 分隔符很简单：对与号分隔的 QueryStrings 的正确编码对 HTML 页面中的 URL 字符串（以及 XML 中的 URL 字符串）采取了两个复杂步骤。首先键和值应该是 URL 编码，然后全部连接，然后整个 QueryString 或 URL 应该是 HTML 编码（或者对于 XML，使用与 HTML 编码非常相似的编码进行编码）。另外不要忘记，HTML 编码和 URL 编码的编码过程是不同的，重要的是它们是不同的。开发人员需要注意两者之间的关系。而且由于它们相似，因此新手程序员将它们混为一谈的情况并不少见。

潜在问题 URL 的一个很好的示例是在 QueryString 中传递两个名称/值时：

*   a =“我和你”，以及
*   b =“你和我”。

在这里，使用 '&' 作为分隔符，然后 '?a=me+%26+you&b=you+%26+me' 是一个正确的查询字符串，但在写入 HTML 源代码之前它也应该是 HTML 编码的。这对没有错误很重要。大多数开发人员不小心执行这两个步骤：首先对键和值进行 URL 编码，然后对 HTML 源代码中的完整 URL 进行 HTML 编码。难怪为什么，当我不得不坐下来认真思考这个过程并彻底检验我的结论时。当名称值为 'year=año' 或更复杂时，我们需要使用代理对来表示它们的中文或日文字符时的成像！

对于上面相同的 a 和 b 键值对，使用 ';' 时 作为分隔符，该过程要简单得多。事实上，与号分隔符使该过程比使用分号分隔符复杂两倍多！这是使用“;”表示的相同信息 作为分隔符：'?a=me+%26+you;b=you+%26+me'。我们注意到唯一的区别是字符串中没有'&'。但是使用这个';' 分隔符意味着不需要对 URL 或 QueryString 进行 HTML 编码的第二个过程。现在想象一下，如果我正在编写 HTML 并且想要正确的 HTML 并且需要编写 HTML 来解释这一切！所有这些带有 '&' 的 HTML 编码确实增加了很多复杂性（对于许多开发人员来说，也有很多混乱）。

新手开发人员根本不会对 QueryString 或 URL 进行 HTML 编码，这在 ; 是分隔符。但是当 & 符号编码不正确时，它会给错误留下空间。所以 '?someText=blah&blah' wud*需要*适当的编码。

同样在 .NET 中，我们可以为我们的方法编写 XML 文档。好吧，就在今天，我写了一个小解释，使用了上面的 'a=me+%26+you&b=you+%26+me' 示例。在我的 XML 中，我必须手动输入所有这些 & XML 的字符实体。在 XML 文档中，它很挑剔，因此必须正确编码 & 符号。但是 HTML 的宽大处理增加了歧义。

也许这并不太令人困惑。但是所有的混乱或困难都是由于使用了一个应该被 HTML 编码为分隔符的字符，因此 '&' 是罪魁祸首。分号消除了所有这些复杂性。

最后一个考虑：由于 '&' 分隔符使这个过程复杂得多，我难怪微软在 QueryStrings 中实现代理对仍然不遵循官方规范。而且，如果您编写自己的方法，则必须考虑 Microsoft 对百分比编码代理对的错误使用。官方规范禁止在 UTF-8 中对代理对进行百分比编码。因此，任何编写自己的方法来处理所有 Unicode 字符的人，都要小心这一点。

# git - 如何找到谁在 git 中进行了合并？

> ID：14940988
> 
> 赞同：0
> 
> 时间：2013-02-18T16:35:30.193
> 
> 标签：git

在我的主分支中以某种方式合并了另一个不应该在那里合并的分支。

是否有 git 命令可以告诉我谁进行了合并以及合并何时完成？

我没有合并 SHA，在 master 的 git log 中我看到提交应该只保留在有问题的分支中......

我对 git grep 有一些了解，并且我有一些来自违规分支的文件名。那会有帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T16:39:02.917

`git show`应该够了

```
$> git show SHA
commit SHA
Merge: SHA1 SHA2
Author: person you <looking@for>
Date:   date

    Merge branch 'branchname' 
```

# java - 根据 MVC 设计将验证方法 GWT 放在哪里

> ID：14940990
> 
> 赞同：0
> 
> 时间：2013-02-18T16:35:34.843
> 
> 标签：java, google-app-engine, model-view-controller, gwt

我是新手，`GWT`我遇到了一个问题，其中一些验证方法需要对数据库进行异步调用，我的项目由 2 个包组成：

`client side`**接口**和**服务**类在哪里

`server side`**实体**和**serviceImpl**类在哪里

我是否必须制作第三个包裹并将它们放在上面*ex: shared* ?? 或者可以将它们放在客户端接口类上， *例如：Login.java*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T19:37:51.420

GWT 2.5 支持 JSR-303 Bean Validation。

见链接：[https ://developers.google.com/web-toolkit/doc/latest/DevGuideValidation?hl=fr](https://developers.google.com/web-toolkit/doc/latest/DevGuideValidation?hl=fr)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T18:25:31.983

*   在服务器和客户端完全共享验证代码会很棒，但在两端都运行它。

    正如所有人所说，好东西在`client side validation`：

*   `Immediate feedback`无需服务器访问。

*   如果`client side validation`使用，`server side validation`仍然需要

# c# - 备份文件

> ID：14940994
> 
> 赞同：1
> 
> 时间：2013-02-18T16:35:56.397
> 
> 标签：c#

因此，我制作了一个程序来备份具有特定扩展名的某些特定文件，因此，我输入带有扩展名的列表或数组我想进行备份

```
List<string> extensions = new List<string>();
extensions.Add("*.pdf");
extensions.Add("*.txt");
extensions.Add("*.inf");
extensions.Add("*.doc");
extensions.Add("*.cpp");
extensions.Add("*.cs");
extensions.Add("*.vb"); 
```

好的，但是，我如何制作搜索系统，在文件夹中找到具有该扩展名的文件..

搜索系统很简单：

```
 public void DirSearch(string sDir)
    {
        try
        {
            foreach (string d in Directory.GetDirectories(sDir))
            {
                foreach (string f in Directory.GetFiles(d, "*.pdf"))
                {
                    Console.WriteLine(f);
                }
                DirSearch(d);
            }
        }
        catch (System.Exception excpt)
        {
            Console.WriteLine(excpt.Message);
        }
    } 
```

好的，但是，我怎样才能让它搜索列表中的所有扩展名（以制作最快速的系统），并且程序无法进入 windows 文件夹......，如果我设置 sDir = "C:\"

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-18T16:48:32.013

将重载[`GetFile`](http://msdn.microsoft.com/en-us/library/ms143316.aspx)与 option 一起使用`SearchOption.AllDirectories`，因此您无需递归调用，也可以将 LINQ 与 一起使用`SelectMany`：

```
var result = extensions.SelectMany(e => 
                       Directory.GetFiles(sDir, e, SearchOption.AllDirectories)); 
```

**更新：**要忽略受保护的文件夹，您可以使用`try catch`跳过异常：

```
private string[] GetFiles(string directory, string pattern)
{
    try
    {
        return Directory.GetFiles(directory, pattern, 
                                       SearchOption.AllDirectories);
    }
    catch (Exception)
    {
        return new string[0];
    }
} 
```

所以：

```
var result = extensions.SelectMany(e => GetFiles(sDir, e)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T16:39:29.817

为了简单地扩展你所拥有的，你将需要另一个循环，一个`GetFiles`基于当前迭代扩展和调用的循环，尽管“制作一个最快速的系统”在这个级别上是非常雄心勃勃的。反正，...

```
foreach (string d in Directory.GetDirectories(sDir)) {
  foreach (string e in extensions) {
    foreach (string f in Directory.GetFiles(d, e)) {

    }
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-18T16:55:04.903

调用 GetFiles(string Directory) 并将结果返回到单个列表中，然后对其进行解析可能会稍微提高性能。以下代码段应该可以满足您的需要...

```
var extensions = new List<string> { ".pdf", ".txt", ".inf", ".doc", ".cpp", ".cs", ".vb" };
var files = Directory.GetFiles(topLevelFolder, "*.*", SearchOption.AllDirectories);
var matching = new List<string>();
foreach (var ext in extensions)
{
    matching.AddRange(files.Where(f => f.EndsWith(ext)));
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-18T16:46:12.943

您不需要额外的循环或递归，只需使用重载即可`Directory.GetFiles`递归获取所有文件名

```
 public void DirSearch(string sDir)
    {
        try
        {
            foreach (string item in extensions)
            {
                string[] files = Directory.GetFiles(sDir, item, SearchOption.AllDirectories);

                foreach (var file in files)
                {
                    Console.WriteLine(file);
                }
            }
        }
        catch (System.Exception excpt)
        {
            Console.WriteLine(excpt.Message);
        }
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-18T16:49:41.403

您可以提供多个搜索条件，但用分号分隔值

```
*.vb;*.txt 
```

所以你可以简单地使用列表生成搜索字符串

```
var search = string.Join(";", extensions.ToArray());
...
foreach (string f in Directory.GetFiles(d, search))
{
    ...
} 
```

# post - ExtJs 4 POST 来自商店的记录数组

> ID：14940997
> 
> 赞同：0
> 
> 时间：2013-02-18T16:36:17.923
> 
> 标签：post, extjs4, store

我有一个简单的休息商店，在用几条记录填充它之后，我试图通过调用 create 函数将发布请求发送到带有记录数组的服务器。发送 POST 请求但仅使用一条记录而不是记录数组。更新 - 我忘了提到这条记录有空值的字段，这也很奇怪，因为我正在用值填充存储。

我停了下来。请给我一个灯，我哪里出错了。谢谢。

我的代码示例：

```
Ext.define('my.store.testStore',{
    extend: 'Ext.data.Store',
    storeId: 'teststore',
    model: 'my.model.testModel',
    proxy: {
        type: 'rest',
        url: 'http://someurl.ru',
        reader: 'json'
    }
});

Ext.define('my.model.testModel',{
    extend: 'Ext.data.Model',
    fields: [
      {name: 'name', type: 'string'},
      {name: 'phone', type: 'string'},
      {name: 'email', type: 'string'}
    ]
});

var namesList = [Ext.create('my.model.testModel',{
  'name':'test name1',
  'phone':'343-343',
  'email':'test@test.com'
}),
Ext.create('my.model.testModel',{
  'name':'test name2',
  'phone':'6345',
  'email':'test@test.com'
}),
Ext.create('my.model.testModel',{
  'name':'test name2',
  'phone':'24324',
  'email':'test@test.com'
})
];

var testStore = Ext.create('my.store.testStore');
testStore.loadData(namesList);
testStore.create(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-28T18:59:46.170

您应该使用[testStore.sync()](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.Store-method-sync) insted of testStore.create()

另一件事：

1.  [testStore.create()](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.Store-method-create) - 此函数将对象作为第一个参数并创建模型实例，然后将其发送到服务器。如果在没有参数的情况下调用“create”，则模型的实例是根据默认设置为“”的字段[defaultValue](http://docs.sencha.com/ext-js/4-2/#!/api/Ext.data.Field-cfg-defaultValue)中的值创建的，这就是您得到空值响应的方式。
2.  关于名称列表。您忘记将“）”添加到第 3 个模型。

    ```
    var namesList = [Ext.create('my.model.testModel',{
      'name':'test name1',
      'phone':'343-343',
      'email':'test@test.com'
    }),
    Ext.create('my.model.testModel',{
      'name':'test name2',
      'phone':'6345',
      'email':'test@test.com'
    }),
    Ext.create('my.model.testModel',{
      'name':'test name2',
      'phone':'24324',
      'email':'test@test.com'
    })//Here was missed ")"
    ]; 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-27T09:49:57.790

过了很长时间，这个问题又出现了，所以我还是不得不解决它。最后我成功地找到了可行的解决方案。关键是添加 batchActions: true 来存储。像这样：

```
Ext.define('my.store.testStore',{
    extend: 'Ext.data.Store',
    storeId: 'teststore',
    model: 'my.model.testModel',
    proxy: {
        type: 'rest',
        url: 'http://someurl.ru',
        reader: 'json',
        batchActions: true
    } 
```