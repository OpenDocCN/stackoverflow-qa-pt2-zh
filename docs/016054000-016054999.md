# StackOverflow 问答 16054000-16054999

# c# - 从流创建虚拟文件路径

> ID：16054001
> 
> 赞同：7
> 
> 时间：2013-04-17T07:22:34.690
> 
> 标签：c#, winapi, stream, file-handling, virtualpathprovider

我有一个关于 C# 和 Windows API 的一般性问题：

我的任务是从文档管理系统 (DMS) 加载文件并从该文件创建一个字节数组。从 DMS 的开发人员那里，我得到了一个 dll，它提供了这样的方法：

```
loadFile(int DocId, string PathToSaveFile); 
```

不幸的是，给定的 dll 没有为我提供将请求的文件作为字节数组或任何类型的流传递的方法。现在我的问题是，是否可以使用 C# 创建某种虚拟路径，而该虚拟路径实际上并不存在于辅助存储中。相反，写入此路径的所有位和字节都以流的形式转发给我？我的目的是提高性能，因为我不必将数据写入硬盘驱动器。

我已经搜索了很多，但实际上不知道我要查找的关键字。也许有人可以给我一个提示，或者只是告诉我这根本不可能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:14:40.107

这将在一定程度上取决于库将如何打开文件和读取文件。如果它使用[CreateFile](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363858%28v=vs.85%29.aspx)，那么您有可能通过命名管道提供访问权限。可以使用 指定命名管道的路径`\\.\pipe\PipeNameHere`。在 C# 中，您可以使用[NamedPipeServerStream](http://msdn.microsoft.com/en-us/library/system.io.pipes.namedpipeserverstream.aspx)。

但是，我认为客户端应用程序与此兼容的可能性相对较小，并且建议创建一个更易于实现且更有可能工作的[RAM 驱动器。](http://en.wikipedia.org/wiki/List_of_RAM_drive_software)RAM 驱动器将显示为普通磁盘驱动器。您可以将文件保存和加载到其中，但这一切都在内存中完成。

# java - How to reformat the time of Java Time class

> ID：16054006
> 
> 赞同：0
> 
> 时间：2013-04-17T07:22:49.947
> 
> 标签：java, sqlite, date, format, date-format

I searched topics about formatting time but these were all about Date class or DateTime. I am working with Time class. I created time as:

```
Time time = new Time(Time.getCurrentTimezone()) ;
time.setToNow();
String berkay = time.toString();
System.out.println(berkay); 
```

When I execute it the output is :

> 20130417T070525GMT(3,106,0,0,1366182325)

actually date and time is correct (2013-04-17 07:05:25)

but I need to convert it into : 20130417070525 (My reason to do this is I will search database according to date so it is easier to compare times in that format)

How can I convert it?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:28:56.940

Try this:

```
Time time = new Time(System.currentTimeMillis()) ;  
SimpleDateFormat df = new SimpleDateFormat("yyyyMMddHHmmss"); 
String date = df.format(time).toString(); 
System.out.println(date); 
```

**EDIT**

But as ***smttsp*** suggested its much more efficient to store it as timestamp

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:31:47.530

To convert java.util.Date into String you should consider java.text.SimpleDateFormat.

For using java.util.Date as a parameter of a database query you should pass the Date as is without converting it into any other format.

[passing Date parameter to create date range query](https://stackoverflow.com/questions/10690493/passing-date-parameter-to-create-date-range-query) <- In the answer there is sample how to create such query.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T13:03:43.893

It is a bit late but if you are working on time and you need to compare or sort, the best way is to use Unix timestamp. It starts from **1-Jan-1970 00:00:00** and increments 1 each second.

It is a long value(64 bit) which is quite efficient to use in both time and space. [Here](http://www.morecavalier.com/?whom=Apps/Unix%20timestamp%20converter) is the website for Unix timestamp conversion.

Also 20130417070525 is 14 char string(at least 15 byte, I guess) and 1366182325 is long(8 byte). So go for long value. U can get it in that way

```
Date myDate = new Date(); // current time    
myDate.getTime();         // converts it to specified format. 
```

# android - 如何检查 DiskLruCache 是否已经存在？（安卓）

> ID：16054007
> 
> 赞同：0
> 
> 时间：2013-04-17T07:22:54.923
> 
> 标签：android, caching, bitmap

我在我的应用程序中使用这种缓存位图的方式[在 android 4.0 中使用 DiskLruCache 不提供 openCache 方法](https://stackoverflow.com/questions/10185898/using-disklrucache-in-android-4-0-does-not-provide-for-opencache-method)

事情是我在 onCreate() 中使用了那条线

```
DiskLruImageCache dlic=new DiskLruImageCache(getApplicationContext(),"bckgCache", CACHESIZE, CompressFormat.PNG, 70); 
```

而且我很确定每次打开应用程序“如新”时它都会覆盖我的 DiskLruCache，因此我无法恢复上次用户打开应用程序时捕获的一些位图。所以这是问题

如何检查我已经为特定应用程序创建了 DislLruCache，所以我只会在它不存在时创建它？

这就是我在上面的 URL 中使用的类

```
 public class DiskLruImageCache {

private DiskLruCache mDiskCache;
private CompressFormat mCompressFormat = CompressFormat.PNG;
private int mCompressQuality = 70;
private static final int APP_VERSION = 1;
private static final int VALUE_COUNT = 1;
private static final String TAG = "DiskLruImageCache";

public DiskLruImageCache( Context context,String uniqueName, int diskCacheSize,
    CompressFormat compressFormat, int quality ) {
    try {
            final File diskCacheDir = getDiskCacheDir(context, uniqueName );
            mDiskCache = DiskLruCache.open( diskCacheDir, APP_VERSION, VALUE_COUNT, diskCacheSize );
            mCompressFormat = compressFormat;
            mCompressQuality = quality;
        } catch (IOException e) {
            e.printStackTrace();
        }
}

private boolean writeBitmapToFile( Bitmap bitmap, DiskLruCache.Editor editor )
    throws IOException, FileNotFoundException {
    BufferedOutputStream out = null;
    try {
        out = new BufferedOutputStream( editor.newOutputStream( 0 ), Utils.IO_BUFFER_SIZE );
        return bitmap.compress( mCompressFormat, mCompressQuality, out );
    } finally {
        if ( out != null ) {
            out.close();
        }
    }
}

private File getDiskCacheDir(Context context, String uniqueName) {

// Check if media is mounted or storage is built-in, if so, try and use external cache dir
// otherwise use internal cache dir
    final String cachePath =
        Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()) ||
                !Utils.isExternalStorageRemovable() ?
                Utils.getExternalCacheDir(context).getPath() :
                context.getCacheDir().getPath();

    return new File(cachePath + File.separator + uniqueName);
}

public void put( String key, Bitmap data ) {

    DiskLruCache.Editor editor = null;
    try {
        editor = mDiskCache.edit( key );
        if ( editor == null ) {
            return;
        }

        if( writeBitmapToFile( data, editor ) ) {               
            mDiskCache.flush();
            editor.commit();
            if ( BuildConfig.DEBUG ) {
               Log.d( "cache_test_DISK_", "image put on disk cache " + key );
            }
        } else {
            editor.abort();
            if ( BuildConfig.DEBUG ) {
                Log.d( "cache_test_DISK_", "ERROR on: image put on disk cache " + key );
            }
        }   
    } catch (IOException e) {
        if ( BuildConfig.DEBUG ) {
            Log.d( "cache_test_DISK_", "ERROR on: image put on disk cache " + key );
        }
        try {
            if ( editor != null ) {
                editor.abort();
            }
        } catch (IOException ignored) {
        }           
    }

}

public Bitmap getBitmap( String key ) {

    Bitmap bitmap = null;
    DiskLruCache.Snapshot snapshot = null;
    try {

        snapshot = mDiskCache.get( key );
        if ( snapshot == null ) {
            return null;
        }
        final InputStream in = snapshot.getInputStream( 0 );
        if ( in != null ) {
            final BufferedInputStream buffIn = 
            new BufferedInputStream( in, Utils.IO_BUFFER_SIZE );
            bitmap = BitmapFactory.decodeStream( buffIn );              
        }   
    } catch ( IOException e ) {
        e.printStackTrace();
    } finally {
        if ( snapshot != null ) {
            snapshot.close();
        }
    }

    if ( BuildConfig.DEBUG ) {
        Log.d( "cache_test_DISK_", bitmap == null ? "" : "image read from disk " + key);
    }

    return bitmap;

}

public boolean containsKey( String key ) {

    boolean contained = false;
    DiskLruCache.Snapshot snapshot = null;
    try {
        snapshot = mDiskCache.get( key );
        contained = snapshot != null;
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        if ( snapshot != null ) {
            snapshot.close();
        }
    }

    return contained;

}

public void clearCache() {
    if ( BuildConfig.DEBUG ) {
        Log.d( "cache_test_DISK_", "disk cache CLEARED");
    }
    try {
        mDiskCache.delete();
    } catch ( IOException e ) {
        e.printStackTrace();
    }
}

public File getCacheFolder() {
    return mDiskCache.getDirectory();
} 
```

这就是我在我的活动中所做的，这是行不通的。如果您第一次尝试脱机工作，第二次它不会（OnPause 中的空指针，因为它在文件夹中找不到任何位图）。如果您尝试在线总是有效，但是，如果您尝试在线，然后离线，而不是加载以前下载的图像，则会停止（空指针），所以，主要问题是它，无论出于何种原因，都不会记录或读取缓存文件夹中的任何内容

```
 public class Portada extends Activity {
private LinearLayout linearLayout;
private BitmapDrawable drawableBitmap;
private Bitmap b;
private DiskLruImageCache dlic;
private final String urlFondo="http://adapp.hostei.com/img/portada.jpg";
private final int MAXMEMORY = (int) (Runtime.getRuntime().maxMemory() / 1024);
private final int CACHESIZE = MAXMEMORY / 8;
private final String KEYPORTADA="bckportada";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_portada);
    linearLayout=(LinearLayout)findViewById(R.id.fondoPortada);

    Log.i("OnCreate","Starting");

     File cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"bckgCache");

     if(!cacheDir.exists()){ // check if it exits. if not create one
         Log.i("OnCreate","Create not exsisting folder");
         cacheDir.mkdirs(); 
         dlic=new DiskLruImageCache(Portada.this,cacheDir.getName(), CACHESIZE, CompressFormat.PNG, 70);
     }
     else{
         dlic=new DiskLruImageCache(Portada.this,cacheDir.getName(), CACHESIZE, CompressFormat.PNG, 70);
     } 
}   

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    Log.i("OnResume","Starting");

    //checks if there's already a background image on cache
    boolean hayportada=comprobarSiHayPortadaEnCache();

    //creates a bckImage from R.drawable image if there's any already in cache
    //this should only occurs once, the very first time the App runs
    if(!hayportada){
        b=BitmapFactory.decodeResource(getResources(), R.drawable.portada);
        dlic.put(KEYPORTADA, b);
        Log.i("onResume","Creates bckgImage from R.drawable");
    }

    //checks if there's any connection and if yes, loads the url image into cache and puts It as background
    //if not load the image of the previous if
    if(CheckOnline.isOnline(Portada.this)){
        cargarPortadaUrl(urlFondo);//loads image from url and stores in cache
        cargarImagenPortada(b);//put image as layout background
        Log.i("onResume","there is online, down img");
    }
    else{
        b=dlic.getBitmap(KEYPORTADA);
        cargarImagenPortada(b);
        Log.i("onResume","there's not online ");
    }
}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    dlic.put(KEYPORTADA, b);//just in case, It's already done in OnResume;
    Log.i("onPause","stores Bitmap");
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_portada, menu);
    return true;
}

/**
 * Takes an image from url and stores It in cache
 * 
 */
public void cargarPortadaUrl(String urlFondo){
    DownloadImageTask dit=new DownloadImageTask();//Async task that downloads an img
    try {
        b=dit.execute(urlFondo).get();
        dlic.put(KEYPORTADA, b);
    } catch (InterruptedException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (ExecutionException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

//loads a Bitmap as Layout Background image
public void cargarImagenPortada(Bitmap bitm){
    drawableBitmap=new BitmapDrawable(bitm);
    linearLayout.setBackgroundDrawable(drawableBitmap); 
}

//checks if there's any 
public boolean comprobarSiHayPortadaEnCache(){
    b=dlic.getBitmap(KEYPORTADA);
    if(b==null)return false;
    else return true;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:28:37.813

检查是否安装了sd卡。获取 sdcard 的路径。检查sdcard下的文件夹是否已经存在，如果没有就创建一个。

记得在清单文件中添加权限

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
if(android.os.Environment.getExternalStorageState().equals(android.os.Environment.MEDIA_MOUNTED))
{
  File cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"MyFolder");

    if(!cacheDir.exists())
        cacheDir.mkdirs();
} 
```

您可以使用以下内容。在以下链接的开发者网站上找到了这个

```
File cacheDir = getDiskCacheDir(ActivityName.this, "thumbnails");  
if(!cacheDir.exists()) // check if it exits. if not create one
 {
    cacheDir.mkdirs(); 
 } 

public static File getDiskCacheDir(Context context, String uniqueName) {
// Check if media is mounted or storage is built-in, if so, try and use external cache dir
// otherwise use internal cache dir
final String cachePath =
        Environment.MEDIA_MOUNTED.equals(Environment.getExternalStorageState()) ||
                !isExternalStorageRemovable() ? getExternalCacheDir(context).getPath() :
                        context.getCacheDir().getPath();

return new File(cachePath + File.separator + uniqueName);
} 
```

有关更多信息，请查看以下链接

[http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

我看你用过`getAppliactionContext()`。检查下面的链接

[何时调用活动上下文或应用程序上下文？](https://stackoverflow.com/questions/7298731/when-to-call-activity-context-or-application-context). 了解何时使用活动上下文和 getApplicationContext()

**编辑：**

```
 File cacheDir=new File(android.os.Environment.getExternalStorageDirectory(),"MyFolder");
 if(!cacheDir.exists()) // check if it exits. if not create one
  {
   cacheDir.mkdirs(); 
   DiskLruImageCache dlic=new DiskLruImageCache(ActivityName.this,cacheDir, CACHESIZE, CompressFormat.PNG, 70);
  }
  else
   {
      DiskLruImageCache dlic=new DiskLruImageCache(ActivityName.this,cacheDir, CACHESIZE, CompressFormat.PNG, 70);
   } 
```

**编辑：2**

正如您在下面看到的，您只是传递文件而不是创建新文件。

```
private DiskLruCache(File directory, int appVersion, int valueCount, long maxSize) {
    this.directory = directory;
    this.appVersion = appVersion;
    this.journalFile = new File(directory, JOURNAL_FILE);
    this.journalFileTmp = new File(directory, JOURNAL_FILE_TMP);
    this.valueCount = valueCount;
    this.maxSize = maxSize;
}

public static DiskLruCache open(File directory, int appVersion, int valueCount, long maxSize)
        throws IOException {
    if (maxSize <= 0) {
        throw new IllegalArgumentException("maxSize <= 0");
    }
    if (valueCount <= 0) {
        throw new IllegalArgumentException("valueCount <= 0");
    }

    // prefer to pick up where we left off
    DiskLruCache cache = new DiskLruCache(directory, appVersion, valueCount, maxSize);
    if (cache.journalFile.exists()) {
        try {
            cache.readJournal();
            cache.processJournal();
            cache.journalWriter = new BufferedWriter(new FileWriter(cache.journalFile, true),
                    IO_BUFFER_SIZE);
            return cache;
        } catch (IOException journalIsCorrupt) {
             System.logW("DiskLruCache " + directory + " is corrupt: "
                    + journalIsCorrupt.getMessage() + ", removing");
            cache.delete();
        }
    }

    // create a new empty cache
    directory.mkdirs();
    cache = new DiskLruCache(directory, appVersion, valueCount, maxSize);
    cache.rebuildJournal();
    return cache;
} 
```

# mysql - SQL 仅额外的一天而不是整个日期

> ID：16054009
> 
> 赞同：2
> 
> 时间：2013-04-17T07:22:59.957
> 
> 标签：mysql, sql

我的表中有一个名为 created_date 的字段。日期格式为 2010-02-28。我只是想知道是否可以做一个 mysql 语句，只返回一天而不是整个日期。例如。28

```
SELECT
day(created_date)
FROM
table 
```

上面的这个查询给我带来了错误，有没有办法我可以做类似的事情？

干杯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:28:46.013

使用`MySQL`名为的内置函数`DAYOFMONTH`

```
mysql> SELECT DAYOFMONTH('2007-02-03');
        -> 3 
```

*   [DAYOFMONTH()](https://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_dayofmonth)

从文档，

> 返回日期的月份日期，范围为 1 到 31，或者返回 0，例如具有零日部分的日期，例如 '0000-00-00' 或 '2008-00-00'。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T07:27:17.980

`MySql` **`EXTRACT`**函数从给定日期提取日、月或年。

```
select extract(day from created_date) as created_day from table 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T07:32:44.420

您可以使用您的格式获取整个日期并仅显示日期的必填字段

```
date("j", strtotime(date('Y-m-d')) ); 
```

# android - admob：同一应用的不同活动的不同ID

> ID：16054012
> 
> 赞同：0
> 
> 时间：2013-04-17T07:23:16.670
> 
> 标签：android, admob

我有一个带有一些活动的 android 应用程序。我的问题是：

为每个人使用不同的 AdMob id 是否合法，因为这将帮助我监控哪些活动被更频繁地访问。此外，我还希望每个活动中的广告内容不同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:46:31.993

在您的应用程序中的不同位置使用不同的 AdmobId 并没有什么违法的。如果每个活动都具有某些独特的特征，使其对您的特定部分用户更有用，那么它可能有助于细分流量并提供更好的 eCPM。

但我不会仅仅为了跟踪用户而这样做。使用分析工具来做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:53:46.783

*IANAL*但您为什么要使用 Admob 来跟踪您的应用程序中最常用的活动？此外，由于他们只为您在 Admob 平台上配置的每个应用程序发布一个发布者 ID，我相信他们有充分的理由这样做。此外，如果您有 20 个活动，那么您实际上将注册 20 个应用程序（真正意义上的不存在的应用程序）。也不确定这是否是个好主意。但是，如果这是您最关心的问题，并且您已经决定这是解决问题的最佳方式，您可能需要律师为您澄清这一点。

或者，如果唯一目的是跟踪您的应用程序中最常用的活动，请考虑使用[Android 原生应用程序跟踪 SDK](https://developers.google.com/analytics/devguides/collection/android/)。您可以从他们的网站上下载它，[或者](https://developers.google.com/analytics/devguides/collection/android/resources)从 Eclipse 的 SDK Manager 下载。在 SDK 管理器中，它位于标题为*Google Analytics App Tracking SDK的**Extras部分下*

 *这是可以帮助您入门的开发指南：[https ://developers.google.com/analytics/devguides/collection/android/v2/](https://developers.google.com/analytics/devguides/collection/android/v2/)

**编辑：**

[*正如user908821*](https://stackoverflow.com/users/908821/user908821)在他的评论中指出的那样，您还应该查看[Analytics SDK Policy](https://developers.google.com/analytics/devguides/collection/protocol/policy)。*

# jquery - JQuery fadeIn 在fadeOut 后被调用两次

> ID：16054014
> 
> 赞同：6
> 
> 时间：2013-04-17T07:23:23.750
> 
> 标签：jquery, animation, callback, fadein, repeat

情况：我有 8 张幻灯片。当页面开始时，除了开始的页面外，所有页面都被隐藏，当第一个被点击时它会淡出，然后3个又一个又一个淡入，当有3个时它们淡出（可以容纳的最大数量是3）然后我淡入接下来的 3 个，之后我隐藏它们并淡入最后一个留下的。结果和动画都很好，但我面临一个问题，即在所有幻灯片的淡出之后，下一个淡入被调用两次，它破坏了动画的整体外观。我尝试了很多东西，停止方法，用隐藏和其他东西写它，可能导致问题的原因是什么？

jquery的代码：

```
$(".slide_top").click(function () {
animacija_init();
});

 var kadras;
var laikmatis;

function animacija_init() {
    kadras = 1;
    $(".slide_top").fadeOut(500);
    animacija_trigger();
}

function animacija_trigger() {
    if(kadras == 1) {
        $('.slide.one').delay(500).fadeIn("slow");  
        console.log("1");      
    }
    if(kadras == 2) {
        $('.slide.two').fadeIn("slow");
        console.log("2");
    }
    if(kadras == 3) {
        $('.slide.three').fadeIn("slow");
        console.log("3");
    }
    if(kadras == 4) {
      $('.slide').fadeOut(300, function() {
           $('.slide.four').delay(100).fadeIn("slow");
           console.log("4");
      });
    }
    if(kadras == 5) {
         $('.slide.five').fadeIn("slow");
         console.log("5");
    }
    if(kadras == 6) {
         $('.slide.six').fadeIn("slow");
         console.log("6");
    }
    if(kadras == 7) {
      $('.slide').fadeOut(300, function() {
           $('#last_slide').delay(300).fadeIn("slow");
           console.log("7");

    });
    }
    kadras++;
    laikmatis = setTimeout('animacija_trigger()', 2500);
    if(kadras == 8) {
         baigti_animacija();
    }
}

function baigti_animacija() {
    clearTimeout(laikmatis);
} 
```

有什么建议吗？现场示例：www.iamrokas.com/demo_boxi Console.log 用于检查事件何时开始

谢谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-19T03:58:58.203

我花了一段时间才意识到这一点。问题是`$('.slide').fadeOut`完整的函数会被多次触发，因为有多个带有 class = slide 的 DOM！

1）使用`promise()`方法只执行一次完整的功能。查看我为您创建的[JSFIDDLE](http://jsfiddle.net/bXJy6/11/)。您会看到每个数字在控制台中只打印一次，而不是 8 次。

2）我添加了一个全局变量`length`来动态改变下一个动画之前应该经过的时间。

3) 请注意，执行顺序并不像人们预期的那样是连续的。想想同时执行的所有事情。重要的是要注意`length`确实在`setTimeout`函数之前分配。

我使用了这个参考[Execute complete function only once](https://stackoverflow.com/questions/9354036/execute-complete-function-only-once-in-jquery-animation)。

# php - PHP：使用某些库中的方法而不是 URL 的多卷曲？

> ID：16054016
> 
> 赞同：0
> 
> 时间：2013-04-17T07:23:31.667
> 
> 标签：php, multithreading, curl, instagram

这可能是一个愚蠢的问题，但我只是想知道这是否可能，或者我是否应该做其他事情......

当使用多卷曲时，会使用 URL 对吗？

```
// create both cURL resources
$ch1 = curl_init();
$ch2 = curl_init();

// set URL and other appropriate options
curl_setopt($ch1, CURLOPT_URL, "http://lxr.php.net/");
curl_setopt($ch1, CURLOPT_HEADER, 0);
curl_setopt($ch2, CURLOPT_URL, "http://www.php.net/");
curl_setopt($ch2, CURLOPT_HEADER, 0);

etc.. 
```

根据多卷曲[文件](http://ca3.php.net/manual/en/function.curl-multi-init.php)...

那么，如果我有一些方法（我认为这就是你所说的）我正在从[库中使用怎么办？](https://github.com/galen/PHP-Instagram-API)

```
$tags = $instagram->searchTags( 'tag' ); 
```

现在就是搜索单词的库`tag`。但是如果我希望能够进行多次搜索呢？

```
$tags1 = $instagram->searchTags( 'tag' );
$tags2 = $instagram->searchTags( 'tagme' ); 
```

如何将其实现为多卷曲？它只是简单地用`$tags1`and替换 URL`tags2`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T16:33:47.040

我查看了那个 PHP 库 anh 发现`Instagram`该类的每个实例只使用一个 cURL 处理程序，这导致您无法异步发送多个请求。

您可以阅读这篇[关于在 PHP 中使用 CURL 进行连接共享的](http://technosophos.com/content/connection-sharing-curl-php-how-re-use-http-connections-knock-70-rest-network-time)文章，以了解修改`CurlClient`Instagram 库的类的想法。这里的主要思想是保留一个静态类成员，该成员保存一个处理程序，`curl_multi_init()`并在需要时将每个新的 cURL 单个处理程序添加到它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:32:55.500

这没有你的课程，不明白你为什么需要它。

```
function fetchHTML($website) {
  if(function_exists('curl_init')) {
    $ch = curl_init($website);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
    $content = curl_exec($ch);
    curl_close($ch);
  } else {
    $content = file_get_contents($website)
  }
  return $content;
}

$dom = new DOMDocument();
$dom->loadHTML(fetchHTML("http://example1.com"));
$tag1 = $dom->getElementsByTagName('tagname');

$dom->loadHTML(fetchHTML("http://example2.com"));
$tag2 = $dom->getElementsByTagName('tagname');

/* Will give you a DOM object list with your first tagname */
print_r($tag1);

/* Will give you a DOM object list with your second tagname */
print_r($tag2); 
```

# wcf - 如何创建虚拟或模拟 WCF 服务以使用原始 WCF 服务不可用？

> ID：16054018
> 
> 赞同：0
> 
> 时间：2013-04-17T07:23:36.530
> 
> 标签：wcf, mocking

当真正的 WCF 服务不可用或关闭时，我的问题是关于创建可在开发端使用的虚拟 WCF 服务。

在我目前的任务中，问题是来自客户端的 Web 托管 WCF 服务并不总是可供开发人员使用。这阻碍了开发工作，因为我们无法验证/单元测试客户端代码。

有什么解决方案吗？我一直在搜索/阅读有关使用不同可用的模拟框架模拟 wcf 的信息，但仍不清楚正确的方法。

提前致谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:58:23.957

不谈论框架-调用您的服务，您创建客户端（代理）实例，对吗？

您可以将其生成移至单独的方法，该方法将返回您的模拟（由 DI 注入，由单元测试中的 setter 属性注入，......）。

# sinatra - 如何让 holder.js 与 Sinatra 一起工作

> ID：16054019
> 
> 赞同：1
> 
> 时间：2013-04-17T07:23:37.747
> 
> 标签：sinatra, holder.js

Holder.js 需要一个“/holder.js/200x300”的调用语法，其中包括一个斜杠。大小前面的斜线不被 Sinatra 路由识别，只能导致“Sinatra 不知道这个小曲”。页。如何让 holder.js 和 Sinatra 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:23:38.060

使用`data-src`属性避免 404 错误：

```
<img data-src="holder.js/200x300" src=""> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:16:41.323

如果您使用标准公用文件夹，我认为您需要添加这样的斜杠

> “/holder.js/200x300”

示例代码：[https ://bitbucket.org/l33tname/holder.js-sinatra-example/src](https://bitbucket.org/l33tname/holder.js-sinatra-example/src)

# sharepoint - 在 Sharepoint 2013 中使用富文本框

> ID：16054020
> 
> 赞同：2
> 
> 时间：2013-04-17T07:23:41.537
> 
> 标签：sharepoint, richtextbox, sharepoint-2013, rich-text-editor

我想在 Sharepoint 2013 中使用富文本框，如下图所示。我怎样才能做到这一点？

![Sharepoint 2013 富文本编辑器](https://i.stack.imgur.com/q1Erq.png)

我已经使用了下面的代码。

```
<%@ Register Tagprefix="SharePoint" Namespace="Microsoft.SharePoint.WebControls" Assembly="Microsoft.SharePoint, Version=15.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c" %> 
```

`<SharePoint:InputFormTextBox ID="RichTextField1" runat="server" TextMode="MultiLine" RichTextMode="FullHtml" Columns="20" Rows="10"/>`

但我无法得到我需要的东西。我有一个带滚动条的简单多行文本框。

谢谢你的回答。

![在此处输入图像描述](https://i.stack.imgur.com/kFnOY.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:51:55.690

尝试添加这个

```
RichText="true" 
```

或多或少会像这样作为样本：

```
<SharePoint:InputFormTextBox ID="rftDefaultValue" 
RichText="true" 
RichTextMode="FullHtml" runat="server" 
TextMode="MultiLine" Rows="5">
</SharePoint:InputFormTextBox> 
```

另外，如果您使用 chrome 查看此内容，它只会显示为纯文本框，请尝试使用 IE 查看此内容 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T22:01:13.883

富文本框在非 IE 浏览器上是一个老问题，如果你想使用富文本的功能，你将不得不使用 IE。

您可以在您的共享点站点上实现其他富文本编辑器，例如 tinymce [http://joshmccarty.com/2011/06/use-tinymce-as-the-rich-text-editor-in-sharepoint-forms/](http://joshmccarty.com/2011/06/use-tinymce-as-the-rich-text-editor-in-sharepoint-forms/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-11T13:18:33.207

我使用了这个外部（跨平台）内容编辑器：http: [//nicedit.com/index.php](http://nicedit.com/index.php)，它对我来说非常有效。

它看起来像这样：

[![在此处输入图像描述](https://i.stack.imgur.com/1alvy.png)](https://i.stack.imgur.com/1alvy.png)

# highcharts - 饼图切片颜色在Highcharts中动态变化

> ID：16054022
> 
> 赞同：1
> 
> 时间：2013-04-17T07:23:44.897
> 
> 标签：highcharts

如何动态更改饼图的颜色。我想更改隐藏变量assignedvalueZoom中每个切片的颜色。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:30:17.267

您可以像这样定义数据数组中每个点的颜色：

```
for(j=0;j<name.length;j++) { 
    var temp = {
        x:name[j],
        y:value[j],
        color:color[j]
    };
    dataArrayFinal[j] = temp; 
} 
```

这明确地设置了每个数据点的 x、y 和颜色属性。

[http://jsfiddle.net/xktj3/](http://jsfiddle.net/xktj3/)

# javascript - JsonRestStore：使用 POST + Body 而不是 GET 获取所有对象

> ID：16054023
> 
> 赞同：0
> 
> 时间：2013-04-17T07:23:53.773
> 
> 标签：javascript, rest, dojo

我使用 dojo 通过 JsonRestStore 将我的前端网格连接到我的后端 api。目前我实例化我的商店

```
 require(["dojo/store/JsonRest"], function (JsonRest) {
        myStore = new JsonRest({ target: 'https://myapi.com', handleAs: 'json'
        });
    }); 
```

正如我所见，商店执行 GET 请求以获取我的 REST api 的所有对象。那么，如果我需要使用 POST 请求和正文内容执行不符合 REST 的请求以获取所有对象（而不是 GET），该怎么办。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:45:55.997

不覆盖任何功能？我几乎可以肯定这是做不到的。正如[API 文档](http://dojotoolkit.org/api/1.8/dojo/store/JsonRest)本身所说，它在调用函数时执行`GET`请求。`query()`

因此，要自己实现此行为，您可能必须覆盖`query()`功能，也许还有`getChildren()`,`getMetadata()`和`getIdentity()`函数（我不确定它们是否调用 REST API）。

这只是常识，因为您的请求不是（符合）REST（如您所说），因此无法更改，但我们谈论的是基于 RESTful Web 服务的商店。

# java - ESB/消息队列快速入门

> ID：16054024
> 
> 赞同：1
> 
> 时间：2013-04-17T07:23:54.833
> 
> 标签：java, architecture, message-queue, esb

我需要实现一个演示系统来证明概念。基本上，系统描述可以简化为 2 个模块：

1.  模块 1 发送请求
2.  模块 2 接收它们、处理并发送回响应

(**注意：**模块位于同一个 Intranet 中，所以我可能希望协议比 http 更快。我想到了以下选项：

1.  消息队列
2.  ESB
3.  [原型缓冲区](https://code.google.com/p/protobuf/)

理想情况下，系统将（但不限于）基于 java，在 Linux RH 上运行并能够线性扩展。但是，性能超出了 POC 的范围。我在看[ServiceMix](https://servicemix.apache.org/)和[ActiveMQ](http://activemq.apache.org/)。我的想法是在java论文模块中实现。该架构将是消息驱动的。模块将通过消息队列或服务总线进行通信。

“消费者”将请求作为消息发送到消息队列，“生产者”通过特定订阅主题提取它们，处理请求并将响应发布回同一队列。订阅“响应”主题的“消费者”从队列中挑选结果。结尾。

我的问题是：

1.  为了实现上述功能，还有哪些其他好的选择（协议、架构、现有库）？
2.  为了实现上述目标，我尝试查看[ServiceMixESB 用户指南](http://servicemix.apache.org/docs/4.4.x/index.html)，但似乎为了获得类似上面运行的内容，我必须学习一些我不熟悉的东西：JBI、NMR、Karaf、Camel 等，我确实这样做了没有时间去做。所以，我想知道：是否有任何 ESB/Message Queue 'Hello World' 应用程序的快速入门指南或 java 示例代码可以帮助启动一切？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:47:25.203

带有 XML 消息的 ActiveMQ 应该就足够了，除非你的消息很大而且很多，在这种情况下我会选择 protobuf（免责声明：我在上一个项目中使用过它们）。

事实上，我可能会选择一些 amqp 实现，比如通过 ActiveMQ 实现的 Apache Qpid（免责声明：前段时间也使用过）。但这更多是个人原因。

protobuf 的缺点是你需要一些关于它们的知识，网络上到处都是你好世界，但是一旦你尝试面对“真正的问题”，它就变得不太容易了。您还需要一个 Maven 插件来构建和编译文件，除非您想手动进行。

ActiveMQ 只是一个 JMS 提供者，我相信您已经看过以下示例：

[你好世界 ActiveMQ](http://activemq.apache.org/hello-world.html)

在实现方面，当 module1 发送请求时，您希望确保响应将被同一模块读取。我建议临时排队。将请求发送到某个队列（以及临时队列名称，例如预期响应的队列）；module2 处理消息并将响应发送到临时队列，由 module1 使用消息侦听器读取。

现在，您必须非常快速地删除这些临时队列，以免堆积，并检查 ActiveMQ 是否为它们提供了唯一的名称。

**在带有简单参数 auto-delete=true 的 QPID**中，当没有活动的侦听器时，队列被删除，我不知道在 ActiveMQ 中是如何处理的，但应该有办法。

只是我的 0.02 美元

# java - jquery在iframe免刷新提交表单后的特殊情况下接受httpRequest.attribute

> ID：16054029
> 
> 赞同：1
> 
> 时间：2013-04-17T07:24:22.957
> 
> 标签：java, jquery, html, ajax

我希望 javascript 接受 httprequest 属性，我知道应该是

```
var value = '${attrubuteName}' 
```

我的问题是：我想使用 iframe 来实现无刷新提交，例如：

```
<s:form namespace="/forum" id="form1" action="" method="post" enctype="multipart/form-data" target="upload_target"> 
            <s:file name="upload"  id="upload_2"></s:file>
            <s:submit ></s:submit>
    </s:form>
<iframe id="upload_target" name="upload_target" ></iframe> 
```

和 jquery 实现提交，接受 httpRequest.attribute.path 和警报路径值，如：

```
<script type="text/javascript"> 
      $('input[id^="upload"]').change(function(){
      $("#form1").attr("action","tReplyAction_uploadFile");
      $("#form1").submit();
        var path = '${path}';
        alert(path);
</script> 
    }); 
```

和 tReplyAction_uploadFile 方法是：

```
public void uploadFile() throws IOException{             
        String path = "d:/a/b";
        httpServletRequest.setAttribute("path", path);              
} 
```

完成此方法时，alert(""); 在这种情况下如何接受路径属性？谢谢。

# visual-studio - 无法从 Visual Studio（或实际任何地方）连接到 AWS EC2

> ID：16054031
> 
> 赞同：5
> 
> 时间：2013-04-17T07:24:24.833
> 
> 标签：visual-studio, sql-server-2008, amazon-web-services, amazon-ec2, connection

我有一个 AWS 服务器（带有 IIS 的 MS SQL SERVER EXPRESS 2008 R2），弹性 IP 为 54.214.8.111，安全组配置了 HTTP、MS SQL 和 FTP，我可以使用 rdp 文件连接到远程虚拟机amazon 在控制台中为您提供。

但是，当我尝试通过 Visual Studio 连接以测试数据库是否正常工作时，它给了我一个“用户 'dbuser' 登录失败错误。我的 SQL Server 上有一个名为 dbuser 的用户（当然在服务器端）完全访问权限等。尽管有所有指南和帮助文档，我也无法连接到服务器上的 ftp。似乎有些东西只是阻止了我的连接。我在多台计算机上尝试过同样的事情。

除了我怀疑服务器实例之外，一切似乎都配置正确。

任何人都可以帮忙吗？PS 我对 Web 开发相当陌生，这是我的第一台 AWS EC2 服务器。

[更新] 我只是尝试在不同的位置创建一个新实例，同样的错误，也许我不知道如何在 EC2 上配置 SQL Server？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-11-07T20:41:10.563

我最近遇到了与 AWS/SQL Server 相同的连接问题，我终于解决了。

在 AWS 上远程连接到 SQL Server 涉及 3 个主要因素：AWS --> Windows 安全性 --> SQL Server 设置/安全性。

连接很容易失败，因为每个区域都有特定的要求。我将检查清单：

AWS：

1.  在 AWS 管理控制台中，转到安全组，单击适用于 Windows 服务器的组，确保 MS SQL TCP 端口 1433 对 0.0.0.0 或您的特定客户端 IP 开放。如果没有，您需要添加它。

2.  记下服务器的公共 IP

视窗：

1.  RDP 到 Amazon Windows 服务器，开始 > 管理工具 > 本地安全策略
2.  单击具有高级安全性的 Windows 防火墙，Windows 防火墙属性，单击“公共配置文件”选项卡，将防火墙状态设置为“开启”，将入站设置为阻止，将出站设置为允许（或根据您的应用程序阻止）。好的。
3.  展开 Windows 防火墙（在左侧窗格中），右键单击入站规则，单击新建规则。
4.  单击端口选项，下一步>，对于TCP，输入1433 下一步>，允许连接，下一步>，下一步>，给它一个名字（SQL-PORT-ACCESS）

SQL 服务器：

1.  使用默认 Windows 身份验证通过 SSMS (SQL Server Management Studio) 登录到 SQL Server。
2.  在左侧窗格中，R-单击顶部服务器列表（带有数据库图标，第一个列表），然后选择“属性”
3.  属性窗口，点击左侧窗格中的安全，选择“SQL Server and Windows Auth”
4.  单击连接，选中“允许远程连接”选项...单击确定。
5.  打开 SQL 配置管理器，开始 > 程序 > Microsoft SQL Server > 配置工具 > SQL Server 配置管理器
6.  SQL Server Network Configuration (Expand), 选择 Protocols for MSSQL, R-Click TCP , 选择 Properties (TCP should be enabled)
7.  单击 IP 地址选项卡，检查是否启用了 IP1，动态端口为 0，TCP 端口为 1433
8.  一直向下滚动到 IPAll 部分，在 TCP 动态端口中输入 0，在 TCP 端口中输入 1433。好的...
9.  返回左窗格，单击 SQL Server Services，R-单击 SQL Server 选项，然后选择“重新启动”。（注意：SQL Browser 服务器不影响连接，浏览器服务只列出可用的服务器，使用您的特定连接参数，无需启动或担心浏览器）

测试：您不必去远程客户端进行测试，首先尝试从服务器上的同一 SSMS 窗口进行连接。这减少了最初可能出错的所有其他事情，如果您可以在此处连接，则可以确认它有效。如果它在您自己的服务器上不起作用，则问题与 Windows 安全性和 SQL 安全性和设置有关。

1.  在对象资源管理器 (SQL server Management Studio) 下，单击“连接”> 数据库引擎...
2.  在 Server name: 中，输入您的 PUBLIC IP、逗号，然后输入`1433`. 例如，如果您的公共 IP 是`54.4.4.4`，请输入`54.4.4.4,1433`,
3.  选择身份验证为“SQL Server”，输入登录用户和密码。
    1.  如果您使用“sa”，请记住更改密码。
    2.  如果您的连接在本地工作，那么您可以尝试远程客户端连接。
4.  此时您知道您的 SQL 服务器和用户设置是正确的。

接下来，尝试在另一台计算机上使用 SSMS。如果失败，防火墙可能需要第二次查看......

了解问题的好地方，是从 SSMS 轻松访问的 SQL 日志，在左侧窗格中，展开 Management，然后 SQL Server Logs，当前日志将列出所有问题。

所以，这些都是所涉及的部分——错过一个，你会感到沮丧，但首先要在测试时减少这些部分。

我能够从 Windows 设备连接到 AWS Windows Server/SQL Express 上的数据库...

祝你好运！

# javascript - Facebook graphApi oAuth - 如何获取访问令牌？

> ID：16054033
> 
> 赞同：18
> 
> 时间：2013-04-17T07:24:29.827
> 
> 标签：javascript, ajax, facebook, facebook-graph-api

我正在尝试使用 JavaScript Facebook SDK 从某个用户那里获取墙帖。当我使用图形 API Explorer 时，它工作正常；但是当我在我的网站上尝试同样的事情时，我收到以下错误：

```
code: 104
message: "An access token is required to request this resource."
type: "OAuthException" 
```

我在哪里可以找到我的访问令牌，以便我可以在我的网站上显示我公司的 Facebook 页面流？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-17T07:56:19.927

是的，您需要访问令牌才能获取 Facebook 主页发布的帖子。由于页面帖子是公开的，因此任何访问令牌都可以使用。您应该使用应用访问令牌作为它`never expires`。

1.  访问[https://developers.facebook.com/apps](https://developers.facebook.com/apps)并创建一个新应用
2.  填写所需的应用名称和命名空间
3.  在“选择您的应用如何与 Facebook 集成”部分中，选择“使用 Facebook 登录的网站”
4.  在“网站 URL”字段中输入您的网站 URL。记得添加尾随'/'
5.  访问[此处](https://developers.facebook.com/tools/access_token/)获取您的`App Token`.

调用图形 API 以获取页面帖子

```
https://graph.facebook.com/pageID/feed?access_token=your_token 
```

# jsp - CQ5中的图像组件

> ID：16054037
> 
> 赞同：0
> 
> 时间：2013-04-17T07:24:52.310
> 
> 标签：jsp, aem

我正在尝试使用基础中的图像组件，它接受图像并显示到页面。如果我将组件从基础复制到我的项目文件夹，然后通过页面访问组件，它会接受图像并在页面上显示为损坏。

1）我把我所有的图像都保存在 DAM 中。但是图像组件正在寻找下面的路径

/content/XXX/en/sah/_jcr_content/img.img.png/1366177510193.png

您能否解释一下图像组件的概述。

提前致谢！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:41:09.740

我不确定你改变了什么，因为很难从这段非常有限的代码中弄清楚。但是标准图像渲染的基础是这样的。

您在 parsys 上拖动图像组件，从图像组件中的内容查找器中拖动图像。

实际渲染发生如下。查看图像组件时，您会在 image.jsp 中看到图像的“假定”渲染（它被写入输出流）。此图片已收到请求后缀为“.img.png”。这是在 requestSuffix 属性中图像组件的对话框中定义的，并且标准设置为“.img.png”

我们现在有一个指向页面上资源的 url，但 sling 尚未解析实际图像。当我们在 sling 解析链中更上一层楼时，我们会在 libs/foundation/components/page 组件中看到一个 img.png.jsp 文件。在图像组件的 sling 解析过程中，由于 .img.png 的请求后缀，最终会出现在此 servlet 中。正是这个 servlet 负责将图像实际写入响应。在此过程中，它确实为实际图像命名为“图像”。

所以你的最终路径将如下所示：

```
pathToPageWithImageComponentOnIt/_jcr_content/containerComponent/image.img.png/imageSuffix.jpg 
```

因此，在您的情况下，这将转化为：

```
/content/XXX/en/_jcr_content/par/image.img.png/1366177510193.png 
```

假设那`par`是你的 parsys

图像未正确呈现的一个原因可能是您的自定义页面组件没有作为 sling:resourceSuperType 的基础页面组件，这意味着不会调用 img.png servlet（因为它在 sling 上找不到它解析链），从而破坏图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T17:56:12.300

当您将图像组件从 libs 复制到应用程序目录时，您还必须复制位于该图像组件下方的 Java 文件。
打开该 Java 文件并重命名包，然后编译它。
您的问题将得到解决。

# nhibernate - NHibernate 的多租户

> ID：16054038
> 
> 赞同：2
> 
> 时间：2013-04-17T07:25:03.757
> 
> 标签：nhibernate, multi-tenant

我在`ASP.NET MVC`amd有一个应用程序`NHibernate`。我现在必须在其中实现**多租户**。这是场景的样子 -

1.  当用户登录时，我会得到`CompanyCode`用户的。
2.  我将使用 CompanyCode 作为参数运行查询，我将获取他的用户名和密码`SecuritySchema`。
3.  我登录到`SecuritySchema`.
4.  我运行另一个查询，它将为我提供与用户相关的数据库表将出现的实际模式名称。
5.  然后我登录到他的架构，我的应用程序继续。

实现这一点的最佳方法是什么？我以前从来没有这样做过。当我的 NHibernate 会话已经使用另一个模式打开时，如何登录到另一个模式？

# android - Eclipse 上的 Android USB 调试器在切换到另一个应用程序时停止（一段时间后）

> ID：16054047
> 
> 赞同：1
> 
> 时间：2013-04-17T07:25:53.870
> 
> 标签：android, eclipse, usb-debugging

**Eclipse 上的 Android USB 调试器在**切换到**浏览器意图**并导航一段时间时停止。

我正在开发一个搜索/列表/详细信息应用程序。
详细可以跳转到一个browserIntent：

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse(url));
startActivity(browserIntent); 
```

然后我的应用程序在后台运行，但过了一会儿，eclipse 上的调试器断开连接，eclipse 上的应用程序被终止。在eclipse上的设备视图上，我的进程消失了。

我在主要的 LogCat 上找到了这个：

```
04-17 10:49:51.392: I/ActivityManager(31744): Process com.lma (pid 31482) has died.
04-17 10:49:51.422: I/WindowManager(31744): WIN DEATH: Window{41635c58 com.lma/com.lma.activity.LoginActivity paused=false}
04-17 10:49:51.492: I/WindowManager(31744): WIN DEATH: Window{419acac8 com.lma/com.lma.activity.search.EventSearchActivity paused=false}
04-17 10:49:51.522: I/WindowManager(31744): WIN DEATH: Window{419b9c38 com.lma/com.lma.activity.search.EventDetailActivity paused=false}
04-17 10:49:51.772: E/Sensors(31744): sensors_poll_context_t::pollEvents, line 202: receive event #### i=2, nb=0
04-17 10:49:52.302: E/dalvikvm(19811): GC_CONCURRENT freed 2213K, 36% free 12109K/18659K, paused 9ms+5ms 
```

当我回到电话上时，我的应用程序详细信息出现了，但根本没有显示任何数据（导致 Fragment 中的私有 obj 变为空）。在 eclipse 上的设备视图上，我的进程再次出现，但未连接到调试器。我可以看到这个日志：

```
04-17 10:59:37.312: I/ActivityManager(31744): Start proc com.lma for activity com.lma/.activity.search.EventDetailActivity: pid=600 uid=10081 gids={3003}
...
04-17 10:59:40.702: I/ActivityManager(31744): Displayed com.lma/.activity.search.EventDetailActivity: +3s425ms 
```

然后，如果我再次返回列出活动，则所有静态数据都已被破坏，并且由于 NullPointerException 而导致应用程序崩溃。

**如何在我的应用程序被销毁之前保存一些数据？（我正在使用 app.getSharedPreferences()）**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:38:13.070

最后，我通过 app.getSharedPreferences() 在每个活动中实现了 onPause() 保存数据，因为 Application 的 onDestroy() 事件仅适用于模拟器环境。

# visual-studio-2010 - Visual Studio 2010 是否支持 Crystal Reports 版本 10.5.3700.0？

> ID：16054048
> 
> 赞同：0
> 
> 时间：2013-04-17T07:25:57.380
> 
> 标签：visual-studio-2010

以前我使用过 Visual Studio 2008。现在我**迁移到 VS2010**。水晶报表有问题。以前那些在 Version= **10.5.3700.0**中。**如何获得 VS2010 相同版本的水晶报告**。

# ios - UIPrintInteractionController 半透明条问题

> ID：16054049
> 
> 赞同：0
> 
> 时间：2013-04-17T07:25:58.060
> 
> 标签：ios, objective-c, ios6, uiprintinteractioncntrler

![在此处输入图像描述](https://i.stack.imgur.com/ZWdmQ.png) UIPrintInteractionController 当在 iPhone 中作为模式视图呈现时，然后我在顶部得到半透明条。我希望它是不透明的，以便背景视图的导航栏不可见。请参阅屏幕截图以获得更好的说明。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:12:19.003

由于您还没有发布任何代码，因此答案不能准确。

但是，您可以尝试在整个应用程序中更改导航栏的外观。

可能这可以帮助您实现这一目标：（将其放在您`alloc/init`的`navigationcontroller`in之后`AppDelegate.m`）

```
if ([UINavigationBar respondsToSelector:@selector(appearance)]) 
{   
    // For iOS 5.0 and above
    [[UINavigationBar appearance] setBarStyle:UIBarStyleBlackOpaque];
    // Black Opaque or whatever your choice is
} 
else 
{   
    // For iOS below 5.0
    self.navController.navigationBar.barStyle = UIBarStyleBlackOpaque;
    // Black Opaque or whatever your choice is
} 
```

让我知道结果，一旦你应用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:22:31.000

当您要从父视图控制器显示模式视图时，隐藏导航栏，当模式视图被关闭时，使导航栏不隐藏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-07T19:09:03.107

六年后，我在 iOS 11 中遇到了这个问题！我不得不添加这个：

```
[[UINavigationBar appearance] setTranslucent:NO] 
```

我没有在我的应用程序的任何地方将导航栏设置为半透明，但我想这是现​​在的默认设置？

如果您想在应用程序的其他地方使用半透明导航栏，我认为您可以实现`UIPrintInteractionControllerDelegate`并使用`printInteractionControllerWillDismissPrinterOptions`在弹出窗口关闭时再次将半透明设置回 YES。

# iphone - UIMenuController 未显示

> ID：16054050
> 
> 赞同：5
> 
> 时间：2013-04-17T07:26:00.580
> 
> 标签：iphone, uimenucontroller, uimenuitem

我在长按和双击手势上显示 UIMenuController，但它没有显示。我已经按照这里给出的答案，但它仍然没有出现。[UIMenuController 没有出现](https://stackoverflow.com/questions/3112925/uimenucontroller-not-showing-up)

下面是我的代码

```
- (void) doubleTap:(UITapGestureRecognizer *)gesture
{
    [self becomeFirstResponder]; 

    CGPoint location = [gesture locationInView:[gesture view]];
    UIMenuController *menuController = [UIMenuController sharedMenuController];
    UIMenuItem *resetMenuItem = [[UIMenuItem alloc] initWithTitle:@"DoubleTap" action:@selector(hideKeyboard)];

    [menuController setMenuItems:[NSArray arrayWithObject:resetMenuItem]];
    [menuController setTargetRect:CGRectMake(location.x, location.y, 0.0f, 0.0f) inView:[gesture view]];
    [menuController setMenuVisible:YES animated:YES];
}

- (void) longPress:(UITapGestureRecognizer *)gesture
{
    [self becomeFirstResponder]; 

    CGPoint location = [gesture locationInView:[gesture view]];
    UIMenuController *menuController = [UIMenuController sharedMenuController];
    UIMenuItem *resetMenuItem = [[UIMenuItem alloc] initWithTitle:@"LongPress" action:@selector(hideKeyboard)];

    [menuController setMenuItems:[NSArray arrayWithObject:resetMenuItem]];
    [menuController setTargetRect:CGRectMake(location.x, location.y, 0.0f, 0.0f) inView:[gesture view]];
    [menuController setMenuVisible:YES animated:YES];
}

- (BOOL)becomeFirstResponder
{
    return YES;
}

- (BOOL)canPerformAction:(SEL)action withSender:(id)sender
{
    if (action == @selector(copy:))
    {
        return YES;
    }
    return [super canPerformAction:action withSender:sender];
} 
```

我正在尝试在 tableView 的 didSelectRow 上获取此事件，可以穿什么。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:10:06.380

我终于通过在我的代码中添加以下方法解决了我的问题

```
- (BOOL) canBecomeFirstResponder 
{
     return YES; 
} 
```

您还必须实现所有按钮的操作。否则，该特定按钮将不会显示在菜单中。

# ios - 以编程方式设置页面控制但什么也不做

> ID：16054051
> 
> 赞同：2
> 
> 时间：2013-04-17T07:26:07.803
> 
> 标签：ios

我正在尝试有一个分页 UICollectionView 并尝试以编程方式设置当前页面，但它什么也不做。它总是从第 0 页开始。

```
UICollectionViewFlowLayout *flowLayout = [[UICollectionViewFlowLayout alloc] init];
flowLayout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
flowLayout.minimumLineSpacing = 0;
flowLayout.minimumInteritemSpacing = 0;

// Set up the collection view with no scrollbars, paging enabled
// and the delegate and data source set to this view controller
self.collectionView = [[UICollectionView alloc]
                       initWithFrame:CGRectMake(0, 0, self.scrollView.frame.size.width, self.scrollView.frame.size.height)
                       collectionViewLayout:flowLayout];

self.collectionView.showsHorizontalScrollIndicator = NO;
self.collectionView.pagingEnabled = YES;
self.collectionView.delegate = self;
self.collectionView.dataSource = self;

[self.view addSubview:self.collectionView];

CGFloat w = self.view.frame.size.width;
CGFloat h = self.view.frame.size.height;

// Set up the page control
CGRect frame = CGRectMake(0, h - 60, w, 60);
self.pageControl = [[UIPageControl alloc]
                    initWithFrame:frame];

// Add a target that will be invoked when the page control is
// changed by tapping on it
[self.pageControl addTarget:self action:@selector(pageControlChanged:)
           forControlEvents:UIControlEventValueChanged];

// Set the number of pages to the number of pages in the paged interface
// and let the height flex so that it sits nicely in its frame
self.pageControl.numberOfPages = self.products.count;
self.pageControl.autoresizingMask = UIViewAutoresizingFlexibleHeight;
self.pageControl.currentPage=self.index;
[self.view addSubview:self.pageControl];
[self.collectionView registerClass:[DetailCustomCell class]
        forCellWithReuseIdentifier:@"CELL_ID"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T17:50:02.737

这是正确的方法，并在 ViewWilLAppear 中进行。

```
CGFloat pageWidth = self.collectionView.frame.size.width;
CGPoint scrollTo = CGPointMake(pageWidth * self.index, 0);
[self.collectionView setContentOffset:scrollTo animated:NO]; 
```

# arrays - 显示数组/列表的内容

> ID：16054054
> 
> 赞同：1
> 
> 时间：2013-04-17T07:26:28.607
> 
> 标签：arrays, vb.net, list

我正在寻找一种方法来显示（在`MsgBox`或其他可读的地方）数组/列表内容，`list`只包含字符串：

`Dim list As New List(Of String)`

我想暂时显示它的内容`MsgBox`。如果需要，我可以将其转换为`list`。`array`有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T07:33:20.783

您可以声明一个变量并循环将每个元素放入其中的数组：

```
Dim sResult As String = ""

For Each elem As String In list
    sResult &= elem & " "
Next 
```

或者您可以使用[String.Join()](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)直接合并数组的所有元素（`List`如果使用 4.0 之前的 .NET 框架，则需要将其转换为普通数组）：

```
Dim sResult As String = String.Join(", ", list.ToArray()) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T07:30:51.953

该列表中有多少个元素？如果他们很少，那么 MessageBox 可以做

```
Dim message = string.Join(Environment.NewLine, list.ToArray())
MessageBox.Show(message) 
```

如果有很多，那么您需要某种界面来显示所有内容。
在这种情况下，您至少需要一个 WinForm 应用程序，其中包含用户定义的 Form，其中包含一个 TextBox，其 multiline 属性设置为 true。

```
Dim message = string.Join(Environment.NewLine, list.ToArray())
textBox1.Text = message 
```

这里参考[List(Of T) 上的 MSDN 文档](http://msdn.microsoft.com/en-us/library/x303t819.aspx)

# validation - Backbone.js 验证模型属性

> ID：16054056
> 
> 赞同：3
> 
> 时间：2013-04-17T07:26:32.123
> 
> 标签：validation, backbone.js, ruby-on-rails-3.2

我创建了一个非常简单的 Rails & Backbone 应用程序。到目前为止，验证是在 Rails 端执行的。现在我考虑实施骨干验证。我这样做：

```
 createCampaign: (e) ->
    _this= @
    e.preventDefault()
    attributes =
      info: @getCountries()
      time_start: @$('#start').val()
      time_end: @$('#end').val()
    @collection.create attributes,
      wait: true
      success: ->
        @$('#errors').text('Campaign created!').addClass('correct')
        @$('#create').removeAttr('disabled');
        _this.clearFields('new_campaign')
      error: -> @handleError 
```

`wait: true`没有任何反应。如果我将其注释掉，则会采取成功的行动。尽管我没有提供有关意图的所需数据。
我的模型和收藏

```
class SvitlaTest.Models.Campaign extends Backbone.Model
  initialize: ->
    @bind("error", @errorHandling)

  validate: (attrs) ->
    return "Please fill start time of the campaign."  unless attrs.time_start
    return "Please fill end time of the campaign."  unless attrs.time_end
    "Please fill Countrz & language fields."  unless attrs.info
  errorHandling: (model, event) ->
    @$('#create').removeAttr('disabled');
    @$('#errors').html(error)

class SvitlaTest.Collections.Campaigns extends Backbone.Collection
  url: '/api/campaigns'

  model: SvitlaTest.Models.Campaign 
```

**更新 1**
我的模板 jst.eco

```
<form method="post" id="new_campaign" class="corners">
  <p>
    <label for="start" >Start time:</label>
    <input type="text" id="start" name="start" autofocus="" length='30' maxlength='30' />
  </p>
  <p>
    <label for="end" >End time:</label>
    <input type="text" id="end" name="end"  length='30' maxlength='30' />
  </p>
 <div id='country_list'>
 <h4>Info:</h4>
  <p class="country_element">
    Country
    <input type="text" class='country'  id="country" />
    Languages
    <input type="text" class="languages" id="languages" />
  </p>
  </div>
  <p>
    <input type="submit" id="create" value="Create" />
  </p>
</form> 
```

根据您的评论：我正在使用 gems/backbone-on-rails-1.0.0.0
**没有输入任何信息**
1)`wait: true`在我运行时处于活动状态
我正在使用 chrome。如果我单击提交按钮（触发 createCampaign），将字段留空，则不会发生**任何**事情！我正在查看控制台和网络选项卡
2)`wait: true`注释掉：运行成功回调，然后没有任何反应
**输入的信息**
在 DB 中创建 有无`wait: true`新模型

 **视图初始化中添加的 **更新：****

 **```
initialize: ->
    @collection.on('reset', @render,this)
    @collection.on('add', @appendCampaign ,this)
    @collection.on( "invalid", @handleInvalidState) 
  handleInvalidState: (model, error) ->
    console.log "validation"
    console.log model
    console.log error 
```

如果我注释掉`wait: true`然后我得到这个控制台输出

```
validation 
Campaign {cid: "c2", attributes: Object, collection: Campaigns, _changing: false, _previousAttributes: Object…}
Please fill start time of the campaign. 
```

如果我不评论它什么都不会发生......不知道为什么会发生这种情况

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T22:17:24.487

在您对 Backbone 模型实施验证之前，您需要了解您在模型中实施的验证方法是如何使用的。骨干验证确保模型不会处于不良状态（包含不良数据）。这意味着如果您尝试在模型上设置任何导致验证失败的数据，则不会发送数据。在这种情况下，会触发“无效”事件。

因此，作为起点，我首先为集合上的“无效”事件添加回调。

```
@collection.on "invalid", @handleInvalidState

handleInvalidState: (model, error) ->
    // do something with the error. 
```

这至少会告诉您验证是否实际上阻止了请求的发生。

它基于源代码显示，如果模型无法在集合的创建方法中验证，它只会返回 false。这可能就是您没有看到任何事情发生的原因。

希望这可以帮助！**

# model-view-controller - ext.net 工具栏位置：固定

> ID：16054059
> 
> 赞同：0
> 
> 时间：2013-04-17T07:26:38.837
> 
> 标签：model-view-controller, extjs, position, ext.net

我想修复一个`<ext:Toolbar>`面板内部，始终显示在顶部。由于我没有使用锚布局，而是面板中的表格布局，因此我无法锚定工具栏。

当我在面板周围添加一个 ViewPort 时，它不再起作用`autoscroll`

这就是我尝试的原因：

```
<ext:ToolBar runat="server" StyleSpec="position: fixed;">
   <Items>
      //some Buttons
   </Items>
</ext:ToolBar> 
```

但这没有效果

解释：

我将一些 MVC 视图加载到类似表格的边框布局中

```
<ext:Panel Region="North" ID="TopBarPanel" />
<ext:Panel Region="West" ID="NavBarPanel" />
<ext:Panel Region="Center" ID="ContentPanel" /> 
```

在 docs.sencha.org 上进行了一些搜索后，我必须承认我没有找到任何类似`window.constrain=true`将工具栏锁定在面板视口内的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-09T08:09:02.100

正如 Daniil 所说，ext.net 根本不允许这样做。而是将内容移动到中心面板内的包装容器中解决了这个问题。

```
<ext:Panel Region="Center" ID="ContentPanelWrapper" runat="server">
   <Items>
      <ext:Toolbar runat="server" />
      <ext:Panel runat="server" ID="ContentPanel">
         <Items>
             //Content goes here
         </Items>
      </ext:Panel>
   </Items>
</ext:Panel> 
```

# windows-phone-7 - bing地图，停止滚动地图wp7

> ID：16054061
> 
> 赞同：0
> 
> 时间：2013-04-17T07:26:42.960
> 
> 标签：windows-phone-7, bing-maps

我是 Windows Phone 的新手。使用 vs2010 和 os 7.1 我有一个包含图层的地图，我想做的是拖动图层，但只有在拖动图层真的很慢时才会发生这种情况，如果我尝试将它移动得更快一点，地图开始滚动而不是拖动该图层。因此，简而言之，我想在单击/按住/拖动该图层时禁用地图滚动。我只需要知道什么属性或我需要禁用什么才能使地图停止滚动。我已经用谷歌搜索了很多，但无济于事。如果你能告诉我c#中的解决方案，我将不胜感激（最好）。任何帮助将非常感激。谢谢。这是xaml代码：

```
 <my:Map x:Name="MyMap" CredentialsProvider="my_key" MouseLeftButtonUp="map_onMouseLeftButtonUp" Mode="AerialWithLabels">
                <my:MapLayer x:Name="mylayer" Hold="mouseHoldingMapLayer" MouseMove="MouseMoveOverMapLayer" ></my:MapLayer></my:Map> 
```

注意：我只在模拟器上试过。没有要测试的设备。编辑：也既不工作`MyMap.IsEnabled = false;`也不`MyMap.IsHitTestVisible =false;`工作。两者都禁用了用户与地图以及子级（在这种情况下为图层）的交互，并且显式设置`mylayer.IsHitTestVisible =true;`也不起作用。正如在[http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx参考部分下的 isHitTestVisible 文档中所述](http://msdn.microsoft.com/en-us/library/system.windows.uielement.ishittestvisible.aspx)

# flying-saucer - 使用飞碟库生成的 pdf 格式问题

> ID：16054063
> 
> 赞同：2
> 
> 时间：2013-04-17T07:26:51.320
> 
> 标签：flying-saucer

我正在使用飞碟库将 xhtml 转换为 pdf。我在两页pdf之间的边界上遇到格式问题。如随附的屏幕截图所示，代表不同图例的颜色编码框会在 pdf 页面发生更改时被拆分。这看起来不太好。附件是一个示例 xhtml，其中包含生成 pdf 的代码示例。xhtml 正确显示，没有任何格式问题。有没有其他人遇到过类似的问题？什么是可能的解决方案？

XHTML 输入文件

```
 <html xmlns="http://www.w3.org/1999/xhtml">
<head>

<style>

table.diff {
    font-family: Arial, Helvetica, sans-serif;
    color: #000000;
    font-size: 11px;
    border-collapse:collapse;
}
table.diff tbody {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
}
table.diff tbody th {
    font-family: Arial, Helvetica, sans-serif;
    background:#F5F5F5;
    font-size:11px;
    font-weight:normal;
    color:#999999;
    padding:.3em .5em .1em 2em;
    text-align:right;
    vertical-align:top;
}
table.diff thead {
    border-bottom:1px solid #BBC;
    background:#EFEFEF;
    font-family:Verdana;
}
table.diff thead th.texttitle {
    text-align:left;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
}

table.diff td {
    font-family: Arial, Helvetica, sans-serif;
    font-size:11px;
    padding: 2px 2px;
}

table.diff .empty {
    background-color:#D7F0FC;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
}
table.diff .replace {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    background-color:#FFD899;
}
table.diff .delete {
    background-color:#FF9900;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
}
table.diff .skip {
    background-color:#EFEFEF;
}
table.diff .insert {
    background-color:#ADCC70;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
}
table.diff th.author {
    text-align:right;
    border-top:1px solid #BBC;
    background:#EFEFEF;
}

.top-border {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    border-top: 1px solid #67BBE5;
}

table.diff .left-border {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    border-left: 1px solid #CCCCCC;
}

.bottom-border {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    border-left: 1px solid #67BBE5;
}

table.diff .left-bottom-border {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    border-left: 1px solid #CCCCCC;
    border-bottom: 1px solid #CCCCCC;
}

table.diff .bottom-border-grey {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    border-bottom: 1px solid #CCCCCC;
}
table .top-border-line {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 0px;
    border-top: 1px solid #CCCCCC;
}
table .bottom-border-line {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 0px;
    border-bottom: 1px solid #CCCCCC;
}
table.diff .legend-border {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 11px;
    border: 1px solid #CCCCCC;
}

</style>

</head>

<body>

<div id='legends' class='legends' style='width:100%;float:left'>
        <table width="100%" class="diff" style="background-color: rgb(235, 235, 235); ">
            <tbody>
                <tr>
                    <td width="50%">
                    </td>
                    <td width="100%" style="">
                        <table cellspacing="0" cellpadding="1" width="100%" class="diff">
                            <tbody>
                                <tr>
                                <td style="width: 20%;"><b>Legend : </b></td>
                                <td style="text-align: center; width: 20%; border:1px solid;" class="empty">Empty</td>
                                <td style="text-align: center; width: 20%; border:1px solid;" class="delete">Deleted</td>
                                <td style="text-align: center; width: 20%; border:1px solid;" class="replace">Modified</td>
                                <td style="text-align: center; width: 20%; border:1px solid;" class="insert">Inserted</td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>

    </body>

</html> 
```

![显示 PDF 格式问题的图像](https://i.stack.imgur.com/DGEG4.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:49:47.857

您可以尝试使用[page-break-inside](http://www.w3schools.com/cssref/pr_print_pagebi.asp) css 属性来控制分页符。

飞碟支持此属性，但在所有情况下都很难做到这一点，尤其是要避免极端情况。

在我的模板中，我通常使用这个：

```
tr{page-break-inside:avoid;} 
```

另一种选择是在您需要的地方使用强制分页符`page-break-before: always`

# android - QUALITY_HIGH 和 QUALITY_LOW 是什么意思？

> ID：16054066
> 
> 赞同：0
> 
> 时间：2013-04-17T07:27:03.360
> 
> 标签：android, video, camera, resolution

CamcorderProfile 类中有一个质量列表。

公共静态最终 int QUALITY_HIGH：

与最高可用分辨率相对应的质量级别。常数值：1

公共静态最终 int QUALITY_LOW

与最低可用分辨率相对应的质量级别。常数值：0

...

（QUALITY_1080P、QUALITY_720P、QUALITY_480P、QUALITY_CIF、QUALITY_HIGH、QUALITY_LOW、QUALITY_QCIF、QUALITY_QVGA等）

**QUALITY_HIGH 的解释：最高可用分辨率**对应的质量等级。

 ****QUALITY_LOW 的解释：最低可用分辨率**对应的质量等级。

 **优质榜仅针对android原始源代码。像联发科这样的公司可能会在类中添加其他质量（例如 QUALITY_MTK_HIGH）。

所以我有一个问题，**可用的最高分辨率是多少。**和**最低的可用分辨率。**意思是？

我们是否应该关注其他手机芯片制造商的附加质量？或者可用的分辨率只是关于android原始质量列表？

我正在使用安卓 4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:41:45.853

它由 MediaProfiles.cpp 的实现决定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:38:27.597

```
public static final int QUALITY_HIGH
public static final int QUALITY_LOW 
```

根据 android 文档，质量级别将是最高/最低可用分辨率（根据相机分辨率），这意味着根据您记录的文件大小和质量`preview sizes, bitrates, audio/video encoder, output format(e.g 3gp, mp4)`的质量以及更多内容`HIGH/LOW`将增加/减少。根据您的要求，您可以使用其中任何一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:29:00.417

QUALITY_HIGH 和 QUALITY_LOW 是指您的设备支持的最高或最低可用视频质量****

# events - CKEDITOR.setData 防止使用 .on 函数附加事件

> ID：16054070
> 
> 赞同：8
> 
> 时间：2013-04-17T07:27:19.917
> 
> 标签：events, ckeditor

我已经构建了一些自定义插件，但只有一个正在监听键盘的按键事件。在下面的代码中，您可以看到设置事件的设置。（这有点基本）

现在我有以下问题，如果我在 instanceReady 侦听器中使用 editor.setData 设置我的数据。未设置 .on 函数。

我确实尝试用 instanceReady 事件替换 contentDom，但这也不能解决它。

如果我手动设置数据：editor.document.getBody().setHtml(html)，没有问题。并且所有事件都附有任何问题..

```
CKEDITOR.plugins.add( 'myPlugin', {
    lang: '', // %REMOVE_LINE_CORE% 

    init: function( editor ) {

        //Bind events if the Dom is ready!
        editor.on( 'contentDom', function()
        {
                //keydown
                editor.document.on('keydown', function(e)
                { 
```

有谁知道为什么会这样？setData 函数是否只设置 html 或者它是否也重新加载编辑器或其他东西？

我确实看过这个[Ckeditor Source](http://docs.ckeditor.com/source/editor.html#CKEDITOR-editor-event-setData) 但我认为这不是与 setData 函数有关的代码。

我不是在寻求解决方案。我想了解为什么会这样。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T11:30:55.253

[`Editor#contentDom`](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-event-contentDom)每次设置新的内部文档时都会触发。在框架编辑器中，`editor#setData()`不仅会替换整个文档，还会替换`body.innerHTML`整个文档，因此`contentDom`每次都会被触发。

因此，您的代码会在每一个上添加新的侦听器，`setData()`但您不会删除旧的侦听器。由于不明原因，这两个听众现在都没有被解雇`keydown`。我最近发现了这一点，我无法解释这个事实。

无论如何，您需要在[`editor#contentDomUnload`](http://docs.ckeditor.com/#!/api/CKEDITOR.editor-event-contentDomUnload). 幸运的是，有一种方便的方法可以使用[`editable#attachListener`](http://docs.ckeditor.com/#!/api/CKEDITOR.editable-method-attachListener).

```
editor.on( 'contentDom', function() {
    var editable = editor.editable();

    editable.attachListener( editor.document, 'keydown', function() {
        ...
    } );
} ); 
```

监听器将在 next 上自动分离`contentDomUnload`。

# ajax - 替代对 REST 服务进行轮询？

> ID：16054074
> 
> 赞同：2
> 
> 时间：2013-04-17T07:27:32.720
> 
> 标签：ajax, wcf, rest, mobile

我必须实现一个具有不同客户端（Silverlight、WPF）的 REST WebService。重点是利用http的优势。我必须向我的客户推送更新（我不知道，最好的选择是什么）。大多数教程都是关于使用 REST 和 Comet 进行聊天应用程序，这不适合我的情况。我找不到任何适合我的 senario 的样本

1）投票是一种好习惯吗？我最终会面临一些问题吗？哪一个？

2) 我想尽快介绍一个 Web 客户端（silverlight 和 WPF），但我不知道我们如何在 AJAX 中进行轮询（从未使用过 AJAX），我想知道是否可以这样做。

3) 由于互操作性，我希望服务是 REST。我希望它可以与 WPF、Silverlight、JAVA、Javascript(AJAX) 和移动设备一起使用。因此，如果我想引入推送通知（如果它甚至可以使用 REST），它将如何与 WPF/Silverlight、AJAX 一起使用。

如果您有代码示例，将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:39:55.583

1）不好。但是在处理没有 WebSockets 的 HTTP 时，您别无选择轮询或长轮询。如果可以使用 WebSockets 和/或 SingnalR，那么您就可以避免轮询并提高性能。

2) jQuery.ajax

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

3）查看SignalR和SingnalR样本

[http://signalr.net/](http://signalr.net/)

[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)

[http://www.asp.net/signalr](http://www.asp.net/signalr)

还有一个提示。根据我的经验，几乎总是可以重新设计客户端或 UI 界面以避免轮询。确保除了轮询之外别无他法。当您不使用遗留应用程序时，使用 SignalR 的 WebSockets 是您的方式

**UPD**：当不谈论遗留应用程序或维护时，对于 Microsoft 堆栈中的 REST 服务，答案肯定是 ASP.NET Web API 用于 REST 服务（有或没有 SignalR）。SignalR 是一个库，即使客户端不支持 WebSockets，它也可以帮助您处理推送通知。它自适应地工作，如果客户端不支持 WebSockets，它将尝试使用其他技术，包括轮询和长轮询。

Nuget 包还包括 silverlight lib

[http://nuget.org/packages/Microsoft.AspNet.SignalR.Client/](http://nuget.org/packages/Microsoft.AspNet.SignalR.Client/)

查看 SignalR 控制台示例。从任何 .NET 客户端 [https://github.com/SignalR/Samples/tree/master/BasicChatConsole使用 SignalR 库都不是问题](https://github.com/SignalR/Samples/tree/master/BasicChatConsole)

有关如何使用 ASP.NET Web API 制作 REST 服务的示例和教程在这里

[http://www.asp.net/web-api](http://www.asp.net/web-api)

# c# - 如何更改另一个下拉列表的 SelectedIndexChange 上的下拉列表？

> ID：16054077
> 
> 赞同：0
> 
> 时间：2013-04-17T07:27:41.870
> 
> 标签：c#, asp.net, viewstate, html-select, selectedindexchanged

我想根据另一个 DropDownList 的选定索引更改 DropDownList，这样如果我更改第一个下拉列表中的值，第二个下拉列表也应该更改。

我正在使用 SelectedIndexChanged 事件，但现在，如果我更改第一个下拉列表，则第二个下拉列表不会改变。

我在 SelectedIndexChange 事件上设置了一个断点，但是在运行代码并更改 DropDownList 的索引后，调试器从未在断点处停止。只有在重新加载或单击按钮后，调试器才会跳转到函数中。我如何在 asp.net 中做到这一点:(

这是第一个下拉列表的 EventHandler：

```
protected void drpCompanyLocation_SelectedIndexChanged(object sender, EventArgs e)
        {
            drpCompanyDepartment.DataSource = (object)ActiveDirectoryManager.GetDepartmentsByLocation(domaincontroller, drpCompanyLocation.SelectedValue); 
            drpCompanyDepartment.DataBind();
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:30:35.103

我认为您没有`AutoPostBack=true`添加到`DropDownList`您的 aspx 文件中。如果您添加此属性，更改所选索引将自动触发您的事件。有关详细信息，请参阅：[http ://asp-net-example.blogspot.nl/2009/03/how-to-use-dropdownlist-autopostback.html](http://asp-net-example.blogspot.nl/2009/03/how-to-use-dropdownlist-autopostback.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:11:44.593

确保 Autopostback 设置为 true（在下拉属性中）并将 OnSelectedIndexChanged 属性设置为指向函数，您可以在其中使用 drpCompanyLocation.SelectedValue 访问第一个下拉值。

如果这不起作用，您必须在此处显示您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T06:34:26.350

如果您不想要回帖，也可以使用级联下拉菜单

[http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx](http://www.asp.net/ajaxLibrary/AjaxControlToolkitSampleSite/CascadingDropDown/CascadingDropDown.aspx)

# inno-setup - 带有自定义按钮的自定义 Innosetup 页面

> ID：16054079
> 
> 赞同：3
> 
> 时间：2013-04-17T07:27:47.413
> 
> 标签：inno-setup

我想创建一个具有以下布局的自定义 Innosetup 页面。这将显示为第一页，如果用户单击“配置”按钮，他将被带到典型的安装页面。如果用户单击安装按钮，安装将静默进行。

```
+------------------------------------+
|                                    |
|                                    |
|        a bitmap image              |
|                                    |
|                                    |
+------------------------------------+
Cancel               Install Configure 
```

看起来自定义页面和表单不允许这样做。Innosetup 可以做到这一点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:29:30.227

在我的第一个答案中，我并没有真正看到额外按钮的要求。

我认为您不能使用 InnoSetup 执行此操作，但您实际上可以创建一个显示您的页面的“包装器”应用程序，然后单击“安装”按钮运行 InnoSetup 设置。

* * *

再搜索一下，我发现实际上有一种方法可以*将*您自己的按钮添加到 UI 中，如该问题的答案所述：[Inno Setup - replace default next/back/cancel buttons](https://stackoverflow.com/questions/4868236/inno-setup-replace-default-next-back-cancel-buttons)。但是，我不知道是否还有一种方法可以删除不需要的按钮。

此答案中指出，\program files\inno setup 5\examples 中的 CodeClasses.iss 示例脚本中有示例。

# maven - Maven插件读取xml属性文件

> ID：16054082
> 
> 赞同：4
> 
> 时间：2013-04-17T07:28:09.467
> 
> 标签：maven, maven-2, maven-3, maven-plugin

只是一个快速的问题。

有谁知道 XML 属性文件插件，就像我们在 ANT 中有 XML 属性文件一样

```
<property name='foo' value='bar'> 

<property name='foo1' value='${foo}/bar1'> 

<property name='foo2' value='bar2'> 
```

提前致谢

注意：我想在 pom.xml 中使用其他方式在 maven/ 中声明属性。只是想知道这种确切的实现方式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:42:23.027

[Properties Maven 插件](http://mojo.codehaus.org/properties-maven-plugin/)可能会满足您的目标。[properties:read-project-properties](http://mojo.codehaus.org/properties-maven-plugin/read-project-properties-mojo.html)将读取属性文件并将它们存储为项目属性，如下例所示：-

```
<project>
  <build>
    <plugins>
      <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>properties-maven-plugin</artifactId>
        <version>1.0-alpha-2</version>
        <executions>
          <execution>
            <phase>initialize</phase>
            <goals>
              <goal>read-project-properties</goal>
            </goals>
            <configuration>
              <files>
                <file>path/to/my_properties</file>
              </files>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build>
</project> 
```

请注意，这`path/to/my_properties`是一个简单的属性文件，其中包含键值对，如下例所示：-

```
key1=value1
key2=value2
.... 
```

关于上面的属性，我们可以通过 Maven 使用`${key1}`or来引用它们`${key2}`。

我希望这可能会有所帮助。

# javascript - 使用 JavaScript 的 Asp.net

> ID：16054084
> 
> 赞同：1
> 
> 时间：2013-04-17T07:28:16.427
> 
> 标签：javascript, asp.net

```
 function iframeLoaded() {
        var iFrameID = document.getElementById('iframe_login');
        if (iFrameID) {
            // here you can meke the height, I delete it first, then I make it again
            iFrameID.height = "";
            iFrameID.height = iFrameID.contentWindow.document.body.scrollHeight + "px";
        }
    } 
```

该脚本在 Mozilla firefox 中不起作用，但在 chrome 中起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:39:13.383

使用 jquery，[http://api.jquery.com/height/](http://api.jquery.com/height/)

```
 function iframeLoaded() {
        var iFrameID = $('#iframe_login');
        if (iFrameID) {
            iFrameID.height(...)
        }
    } 
```

# javascript - METEOR - 创建模板

> ID：16054087
> 
> 赞同：1
> 
> 时间：2013-04-17T07:28:21.683
> 
> 标签：javascript, jquery, templates, dynamic, meteor

流星有动态创建模板的功能吗？

像 template.create ？

例子：

```
 <input class="button" value="create" class="create"> 
```

js：

```
 'click input.create' : function(){
          //do creating templates
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T15:25:13.837

这应该是可能的。使用 Web 检查器查看从 .html 文件生成的 JavaScript 代码并将其用作您的起点。

# c# - 使用 XmlSerializer 序列化 char 数据类型

> ID：16054090
> 
> 赞同：14
> 
> 时间：2013-04-17T07:28:32.537
> 
> 标签：c#, xml-serialization

我有一个类，它的属性类型是 char 如下

```
 [XmlRoot("Root")]
    public class TestClass
    {
        [XmlElement("Test", typeof(char))]
        public char TestProperty { get; set; }
    } 
```

当 TestProperty 的值为 'N' 并且如果我序列化 TestClass 它将产生以下结果：

```
 <Root>
        <Test>78</Test>
    </Root> 
```

但我想要的是有以下

```
 <Root>
        <Test>N</Test>
    </Root> 
```

是否可以不将 TestProperty 的类型更改为字符串？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T07:31:52.423

不是AFAIK。但是，您可以作弊：

```
[XmlIgnore]
public char TestProperty { get; set; }

[XmlElement("Test"), Browsable(false)]
public string TestPropertyString {
    get { return TestProperty.ToString(); }
    set { TestProperty = value.Single(); }
} 
```

# sql - SQL Server 中的每个循环使用游标

> ID：16054091
> 
> 赞同：0
> 
> 时间：2013-04-17T07:28:32.900
> 
> 标签：sql, sql-server-2008

我有一张有 4 列的桌子。HouseNo，日期，时间和温度。

我设法在单独的表格中获得了不同的 HouseNos。现在我想插入所有房屋号码的所有日期。

* * *

表中的样本数据。像这样的行有几百万行。

```
HouseNo Date Time Temp
102 1/1/2010 10:00 67
102 2/1/2010 10:00 73
102 3/1/2010 10:00 75
103 1/1/2010 10:00 69
103 2/1/2010 10:00 63
104 1/1/2010 10:00 71
104 2/1/2010 10:00 12 
```

* * *

预期输出是

表格1

```
102 1/1/2010 
102 2/1/2010 
102 3/1/2010 
```

表 2

```
103 1/1/2010 
103 2/1/2010 
```

表3

```
104 1/1/2010 
104 2/1/2010 
```

然后我希望能够遍历派生表中的每一行以对温度场执行一些操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:43:10.350

如果您每天有一对 ON/OFF 并且 OFF 总是在 ON 之前，那么这将为您提供持续时间。

```
SELECT 
HouseNo,  
Date, 
DATEDIFF(s,
   MIN(CASE WHEN Relay='OFF' THEN Time ELSE NULL END),
   MIN(CASE WHEN Relay='ON' THEN Time ELSE NULL END)
) As OffDuration
FROM YourTable
GROUP BY HouseNo,  Date 
```

但是任何正常的现实生活数据集都会有多个 ON/OFF 对。你能提供更多细节吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T07:35:27.733

像这样的东西？

```
 CREATE TABLE new_table
    AS (SELECT * FROM old_table); 
```

你也可以放一些 WHERE 部分和 SELECT

# java - 为什么在下面的情况下@value("${someProperty}") 工作而@value("#{someProperty}") 不工作

> ID：16054093
> 
> 赞同：7
> 
> 时间：2013-04-17T07:28:43.560
> 
> 标签：java, spring, spring-el

我有以下弹簧配置：

```
<context:property-placeholder location="classpath:commonSql.properties" /> 
```

现在在我的课堂上，当我使用`@value("#{someproperty}")`它时它不起作用。然后，我改为 `@value("${someproperty}")`并且它起作用了。

根据[这个](https://stackoverflow.com/questions/5322632/spring-expression-language-spel-with-value-dollar-vs-hash-vs)问题的答案`@value("#{someproperty}")` 是SpEL语法，它更加强大和复杂。它还可以处理属性占位符，除此之外还有很多，但就我而言，为什么它不起作用？虽然最简单的是如何使用 $ 和 # 来评估值。

主要是`@value("#{someproperty}")`在工作时`@value("${someproperty}")`不工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:43:37.333

`#{ }`是表达式语言功能，`${ }`而是简单的属性占位符语法。

*表达式语言*是指有特定的语法、对象、变量等。

当您编写“#{someproperty}”时，您实际上指的是对象和*表达式语言引擎*回答您：

> 在“org.springframework.beans.factory.config.BeanExpressionContext”类型的对象上找不到字段或属性“someproperty”

这是可行的：

```
 @Value("#{'${someproperty}'}") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:42:36.067

这是spring的源代码，显示了获取属性键的表达式，原因很明显，也许对你有帮助:)

```
/** 
 * Abstract base class for PropertyEditors that need 
 * to resolve placeholders in paths. 
 * 
 * <p>A path may contain ${...} placeholders, to be resolved as 
 * system properties: e.g. ${user.dir}. 
 * 
 * @author Juergen Hoeller 
 * @since 1.1.2 
 * @see #PLACEHOLDER_PREFIX 
 * @see #PLACEHOLDER_SUFFIX 
 * @see System#getProperty(String) 
 */  
public class AbstractPathResolvingPropertyEditor extends PropertyEditorSupport {  

    public static final String PLACEHOLDER_PREFIX = "${";  

    public static final String PLACEHOLDER_SUFFIX = "}";  

    protected static final Log logger = LogFactory.getLog(  
            AbstractPathResolvingPropertyEditor.class);  
  ...etc 
```

# node.js - 是否可以阻止 Node JS 中的父线程？

> ID：16054103
> 
> 赞同：0
> 
> 时间：2013-04-17T07:29:15.957
> 
> 标签：node.js, coffeescript, hubot

我正在尝试修复一些第三方 NodeJS（如果有人关心的话，hubot 脚本）。这里的想法是，对于从先前调用返回的每个构建，我们都会与 Teamcity REST API 联系一次，并对其进行迭代，打印一条消息。

```
mapBuildTypeIdToName = (msg, id, callback) ->
    url = "http://#{hostname}/httpAuth/app/rest/buildTypes/id:#{id}"
    msg.http(url)
      .headers(getAuthHeader())
      .get() (err, res, body) ->
        err = body unless res.statusCode = 200
        buildName = JSON.parse(body).name unless err
        callback err, msg, buildName

createAndPublishBuildMap = (builds, msg) ->

    for build in builds
      console.log "foo"
      console.log build
      mapBuildTypeIdToName msg, build['buildTypeId'], (err, msg, name)->
        console.log "bar"
        console.log build
        baseMessage = "##{build.number} of #{name} #{build.webUrl}"
        if build.running
          status = if build.status == "SUCCESS" then "**Winning**" else "__FAILING__"
          message = "#{status} #{build.percentageComplete}% Complete :: #{baseMessage}"
        else
          status = if build.status == "SUCCESS" then "OK!" else "__FAILED__"
          message = "#{status} :: #{baseMessage}"
        msg.send message 
```

问题如下：在for循环开始时，builds有多个对象。这些被迭代，然后输入回调，从而打印出最后一次构建 builds.length 次。

服务器日志如下所示：

```
 foo
     build1
     foo
     build2
     bar
     build2
     bar
     build2 
```

虽然预期/期望的行为是：

```
 foo
    build1
    bar
    build1
    foo
    build2
    bar
    build2 
```

所以我有两个问题：

1）为什么会发生这种行为？我知道 Node JS 的非阻塞特性导致主线程（for 循环）的执行速度比它的非阻塞子线程（mapBuildTypeIdToName）更快。为什么它仍然不使用正确的值调用嵌套函数？为什么它只被最后一个值调用？

2）我该如何解决这个问题？如何阻止父线程并等待回调，否则，Node JS 中这种性质的问题（实际上是事件驱动的繁忙循环）的规范方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:49:22.663

我假设 build 是一个字符串。如果是这样，它将是您在 mapBuildTypeIdToName 中期望的值，因为它是一个原语并且它们是按值传递的。

但是，在您的回调内部，您引用的是在循环外部声明的构建变量，因此它的状态将是调用回调时该变量所处的任何状态。在您的情况下，回调在循环完成后被调用，所以它是 build2。

要获得您正在寻找的结果，请查看异步库中的 eachSeries API。它将允许您在数组上运行一系列异步 API 调用，就好像它们是同步的一样，而不会真正阻塞线程。

# spring-batch - spring-batch 中的通用项目阅读器和项目编写器

> ID：16054107
> 
> 赞同：0
> 
> 时间：2013-04-17T07:29:29.127
> 
> 标签：spring-batch

我如何编写通用项目阅读器和项目编写器，以便可以在工作的所有步骤中重复使用相同的阅读器和编写器。请帮忙？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T11:08:16.947

Spring Batch as`ItemReader`和适配器“开箱即用”，可以帮助使许多功能通用`ItemProcessor`。`ItemWriter`本质上，它`ItemReaderAdapter`允许您调用现有的对象和方法，而无需编写自己的阅读器。

这是一个配置示例

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:batch="http://www.springframework.org/schema/batch"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch.xsd">

    <batch:job id="sampleJob">
        <batch:step id="sampleJob.step1">
            <batch:tasklet>
                <batch:chunk reader="readerAdapter" writer="..." commit-interval="10"/>
            </batch:tasklet>
        </batch:step>
    </batch:job>

    <bean id="readerAdapter" class="org.springframework.batch.item.adapter.ItemReaderAdapter" scope="step">
        <property name="targetObject" ref="myService"/>
        <property name="targetMethod" value="get"/>
        <property name="arguments" value="#{jobParameters['parameterName']}"/>
    </bean>

    <bean id="myService"/>

</beans> 
```

块中的每个“阶段”都有适配器。查看每个适配器上的 javadoc，如果您的服务返回正确类型的对象以参与块，它们将有助于更好地了解情况。

# python - python迭代列表列表性能差异

> ID：16054111
> 
> 赞同：0
> 
> 时间：2013-04-17T07:29:34.710
> 
> 标签：python, performance, list, iteration

在 python 2.7.3 中迭代列表列表时，我注意到更改迭代顺序时的性能差异：

我有一个包含 500000 个字符串的 200 个列表。然后我以以下方式迭代：

```
numberOfRows = len(columns[0])
numberOfColumns = len(columns)

t1 = time.clock()
for i in xrange(numberOfRows):
    for j in xrange(numberOfColumns):
        cell = columns[j][i]
print time.clock() - t1

t1 = time.clock()
for i in xrange(numberOfColumns):
    for j in xrange(numberOfRows):
        cell = columns[i][j]
print time.clock() - t1 
```

该程序反复产生与此类似的输出：

```
33.97
29.39 
```

现在我希望对[列表进行有效的随机访问](https://stackoverflow.com/questions/3917574/how-is-pythons-list-implemented)。这 4 秒是从哪里来的；它只是缓存吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:32:23.553

我得到类似的东西

```
30.509407822896037
29.88344778700383 
```

为了

```
columns = [[0] * 500000 for x in range(200)] 
```

如果我用 替换这些`cell = ...`行`pass`，我会得到

```
8.44722739915369
10.23647023463866 
```

因此，创建`xrange`对象或类似的东西绝对不是问题。

这是列的缓存（不是通过 Python，而是通过计算机）：如果我使用

```
columns = [[0] * 500000] * 200 
```

我明白了

```
27.725353873145195
29.592749434295797 
```

在这里，总是使用相同的列对象，并且缓存（几乎）没有区别。`pass`因此（大约）与变体所示的时间差相同。

# linux - Linux 服务器中的磁盘空间

> ID：16054112
> 
> 赞同：32
> 
> 时间：2013-04-17T07:29:35.040
> 
> 标签：linux

我们如何检查磁盘中剩余的磁盘空间。假设我们有如下的总磁盘空间

```
[root@abc ~]# fdisk -l|grep Disk 
```

磁盘 /dev/sda：250.0 GB，250058268160 字节

我们如何找到这个 250GB 磁盘中有多少可用空间。

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-04-17T07:31:34.473

你应该使用`df -h`

```
$ man df
df - report file system disk space usage 
```

您可以添加`--total`选项以获得总数。例如：

```
$ df -h --total
...
...
total             135G   79G   51G  61% - 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-17T07:41:29.423

使用`df -h`。该命令将显示文件系统磁盘空间使用情况。

```
$ df -h 
```

上面的命令将在终端上显示磁盘大小的详细信息。

例如：

```
Filesystem            Size  Used Avail Use% Mounted on
/dev/sda
                       20G   14G  4.6G  76% /
/dev/sda1              99M   18M   77M  19% /boot 
```

这里 Total disk size 是 20G， Used 是 14G 和`Free is 4.6G`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T07:32:19.267

利用

> df -h

更多详细信息可在此链接[http://en.wikipedia.org/wiki/Df_%28Unix%29](http://en.wikipedia.org/wiki/Df_%28Unix%29)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-17T07:32:33.933

您可以使用多个命令

```
df -h 
```

链接：[更多命令](http://www.codecoffee.com/tipsforlinux/articles/22.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-17T07:34:43.650

如果您只想检查，请使用“df”

df -h 列出了所有具有人类可读格式的设备，但当然你可以说“df /dev/sda”来获得确切的数字。

# python - Python编码风格 - 类内的属性/设置器？

> ID：16054114
> 
> 赞同：2
> 
> 时间：2013-04-17T07:29:43.863
> 
> 标签：python, coding-style

类中的方法应该使用属性/设置器访问器，例如“add_to_field”还是应该直接访问私有变量，例如“从字段中减去”？

```
class Example(object):
    def __init__(self, field):
        self._field = field

    @property
    def field(self):
        return self._field

    @field.setter
    def field(self, field):
        self._field = field

    def add_to_field(self, something):
        self.field += something

    def subtract_from_field(self, something):
        self._field += something 
```

如果 setter 没有纯粹设置变量，而是执行其他操作，例如日志记录，那又如何呢？这是不好的风格吗？

```
 @field.setter
    def field(self, field):
        log.logger.debug("Field set to %r", field)
        self._field = field 
```

目前我的代码是两者的混合。不确定重构的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:41:12.420

避免使用 getter 和 setter 的主要原因是避免潜在的无限递归（您的 setter 调用设置对象的方法 foo，调用 foo 等）。

否则，最好始终调用 getter/setter，以确保您的程序数据保持一致。

我的建议是：一直使用你的 getter/setter。如果您在某一点开始使用复杂的设置器并且第一点成为问题，那么您应该尝试重新考虑您的代码以使其保持简单。另一种方法可以重构在 setter 中完成的所有繁重工作。

如果您的 getter/setter 正是“返回值”和“为变量赋值”，那么您不应该定义任何 getter 或 setter。Python 的一个优点是，在您需要 getter 或 setter 的那一天，您将能够完全透明地完成它。这就是为什么在 C++ 中，有时通过 getter 和 setter 访问属性有时被认为是一种很好的做法，*即使*它们只是“虚拟”函数。

总结一下：我会选择这种`add_to_field`风格。

# mysql - 解释这几行 mysql 字符串 Literals

> ID：16054115
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:29:49.453
> 
> 标签：mysql

我从 Mysql 官方网站[dev.mysql.com](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)中选择了这些行。我无法理解这些行的含义。

**有几种方法可以在字符串中包含引号字符：**

用“'”引用的字符串中的“'”可以写成“''”。

用“"”引用的字符串中的“"”可以写成“""”。

没看懂这个sql怎么弄的。

mysql> 选择'hel''lo';

输出：你好

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:34:26.907

你在单引号中有一个字符串，然后它找到另一个引号，被另一个代码转义。所以，它会翻译成

```
'(start of string)hel'(escaping the next quote)'(the escaped quote)lo'(ending the string) 
```

从而输出：

```
hel'lo 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:35:35.887

这很简单。如果您需要将引号放在由这些引号分隔的字符串文字中，则不能只使用独立的引号字符（如`'O'Brien'`），因为没有简单的方法来判断第二个或第三个引号中的*哪*一个是结束引号。

所以他们引入了一个规则。如果 SQL 解释器在一个带引号的字符串中并且它找到另一个引号，它使用以下规则：

*   如果引号后面紧跟着另一个引号，则假设用户想要文字中的一个引号。
*   否则它是文字的结束引号。

因此，例如，考虑：

```
select * from people where surname = 'O'Brien' order by id 
```

现在你和我可以分辨出哪些引号实际上终止了字符串文字，因为我们了解名称的工作原理。计算机并不认为这是理所当然的，而是要求：

```
select * from people where surname = 'O''Brien' order by id 
```

并将`''`内部文字变成单个`'`.

# powershell - 如何在 Powershell 中转换/格式化文本文件导入时处理 3 位数小时

> ID：16054121
> 
> 赞同：0
> 
> 时间：2013-04-17T07:30:19.683
> 
> 标签：powershell

我想得到一个提示，如何在转换/格式化文本文件导入时处理 3 位数小时，因为 Access 无法处理这些数据。

这是一个示例：

08:45:00 = 8,75 可以正常工作，但如果有更多的小时数，例如 116:15:00，则日期时间格式不起作用。

有没有机会得到这样的东西：08:45:00 -(8,75/8,75)-> 1,0
116:15:00 -(116,25/8,75)-> 13,29

非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:21:16.383

我想出了这个：

```
 $x = '116:30:00'
 (iex ('New-Timespan -Hours {0} -Minutes {1} -Seconds {2}' -f $x.split(':'))).totalhours 
```

116.5

# cakephp - DomPDF 奇怪的分页符

> ID：16054122
> 
> 赞同：1
> 
> 时间：2013-04-17T07:30:23.520
> 
> 标签：cakephp, dompdf, page-break

我正在使用 DomPDF 和 CakePdf 来生成 pdf。好工具，但只有一件事我不明白：CSS 中“page-break-before”的行为。通常它工作得很好：当我想要时分页，但有时它会变得疯狂并在内部或之前导致许多分页符。难以置信的。

*   这是使用 DomPDF 生成的 pdf 示例，请查看第 3 页，有一个空白，而它不应该（在其他示例中，它运行良好，没有空白）：[链接](https://www.dropbox.com/s/k4phmvoq0mwnthc/Convention-SC000122.pdf)
*   **[编辑]**和一个 HTML 版本：[链接](http://scio.fr/pages/test-convention.html)

现在代码源（每页都有注释）：

```
<style type="text/css">
    @page {
        margin: .5cm;
    }
    body {
        padding-top: 20px;
        padding-bottom: 80px;
        font-family: 'helvetica', Arial, Helvetica, sans-serif;
        font-size: 100%;
        position: relative;
    }
    ul, li {
        margin: 0;
        padding: 0;
    }
    ul {
        margin-left: 40px;
    }
    p, li {
        font-size: .875em;
        line-height: 1.6em;
        margin: 0;
    }
    #header, #footer {
        position: fixed;
        /*left: 0;
        right: 0;*/
    }
    #header {
        top: 0;
    }
    #footer {
        /*top: 1005px;*/
        height: 60px;
        bottom: 0;
        background: #E28900;
    }
    #headerDiv {
        border-top-width: 6px;
        border-top-style: solid;
        border-top-color: #E28900;
        /*padding-top: 20px;*/
    }
    img#logo {
        position: absolute;
        top: 26px;
        left: 0;
        width: 120px;
    }
    #footerDiv {
        position: relative;
        padding-top: 20px;
    }
    #footerDiv p {
        color: #fff;
        font-size: .75em;
        text-align: center;
    }
    #footer .pagenum {
        position: absolute;
        color: #fff;
        font-size: .75em;
        font-weight: bold;
        bottom: 25px;
        right: 10px;
    }
    #footer .pagenum:before { content: counter(page); }

    h1#convention {
        margin: 0 auto;
        text-align: center;
        font-size: 2.8em;
        line-height: 1em;
        padding: 250px 0 0 0;
        color: #E28900;
        text-transform: uppercase;
        font-weight: normal;
        font-family: 'titre';
    }
    h1#convention span {
        display: block;
    }
    h1#convention small {
        display: block;
        margin: 20px 0 0;
        padding: 0 100px 0 100px;

        font-family: 'helvetica';
        font-weight: bold;
        text-align: center;
        font-size: .4em;
        line-height: 1.2em;
        color: #006D93;
        text-transform: none;
    }

    #adresse_client {
        position: absolute;
        left: 70px;
        top: 680px;
    }
    #adresse_scio {
        position: absolute;
        text-align: right;
        right: 70px;
        top: 800px;
    }
    #adresse_client p, #adresse_scio p {
        font-size: .9em;
    }
    #adresse_client b, #adresse_scio b {
        font-weight: normal;
        color: #006D93;
        font-size: .75em;
    }
    #adresse_scio a {
        text-decoration: none;
        color: #E28900;
    }

    .page-break {
        page-break-before: always;
    }

    /* style page 2 */
    #adresse_client2 {
        margin-top: 40px;
        margin-bottom: 70px;
        margin-right: 70px;
    }
    #adresse_client2 p {
        color: #006D93;
        text-align: right;
    }
    #lettre {
        margin: 0 70px;
    }
    #lettre p {
        line-height: 1.2em;
        text-align: justify;
    }
    #lettre #signature {
        margin-top: 60px;
    }
    #lettre #signature p {
        text-align: right;
    }

    /* style page 3 */
    #headerFormation {
        margin: 0 70px 30px 70px;
    }
    #headerFormation td {
        padding: 10px 0;
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
    }
    #headerFormation h3 {
        display: inline;
        color: #000;
        font-size: .85em;
        margin: 0;
        padding: 0;
    }
    #contenuFormation {
        margin: 0 70px 0;
    }
    h2#nomFormation {
        font-family: 'share';
        color: #006D93;
        font-weight: bold;
        font-size: 1.6em;
        line-height: 1em;
        margin: 10px 70px;
    }

    /* style page 4 */
    #headerConvention {
        margin: 0 0 5px 70px;
    }
    #headerConvention h2 {
        color: #006D93;
        font-family: 'share';
        font-size: 2em;
        margin: 0;
        padding: 0;
    }
    #conventionPersonnes {
        margin-bottom: 30px;
    }
    #conventionPersonnes td {
        border-top: 1px solid #ddd;
        border-bottom: 1px solid #ddd;
        padding: 10px 0;
        font-size: .85em;
    }
    #conventionPersonnes small {
        color: #006D93;
    }
    #contenuConvention p, #contenuConvention li {
        font-size: .85em;
        line-height: 1.4em;
    }
    #contenuConvention {
        margin: 0 70px 0;
    }
    #contenuConvention h3 {
        margin: 20px 0 5px 0;
        padding: 0;
        font-family: 'helvetica';
        font-size: .85em;
        text-transform: uppercase;
        color: #E28900;
    }
    #contenuConvention h4 {
        text-align: center;
        font-size: .75em;
        margin: 0 20px 10px 20px;
        padding: 0;
    }
    #conventionSignatures {
        margin-top: 40px;
        border: 1px solid #ddd;
    }
    #conventionSignatures strong {
        color: #006D93;
    }
    #conventionSignatures td {
        padding: 10px;
    }
    #conventionSignatures td.first {
        border-right: 1px solid #ddd;
    }

    /* style page 5 */
    #cgv {
        margin: 0 70px;
    }
    #cgv h2 {
        font-family: 'helvetica';
        font-size: .85em;
        text-transform: uppercase;
        color: #006D93;
    }
    #cgv p, #cgv li {
        font-size: .625em;
    }
</style>

<!-- HEADER, FOOTER -->
<div id="header">
  <div id="headerDiv"></div>
</div>

<div id="footer">
    <div id="footerDiv">
        <p>Immeuble CIT 3 rue de l'Arrivée 75749 Paris Cedex 15 / SAS au capital de 50 00 0 € - RCS de Paris 751 962 119</p>
    </div>
    <div class="pagenum"></div>
</div>

<!-- PAGE 1 -->
<?php echo $this->Html->image('/home/scio/app/webroot/img/scio-conseil-et-formation.png', array('alt' => 'Scio conseil & formation', 'id' => 'logo')); ?>
<h1 id="convention">
    <span>Convention de formation</span>
    <small><?php echo $stage['Formation']['libelle']; ?></small>
</h1>

<div id="adresse_client">
    <p><b>Pour :</b></p>
    <p><strong><?php echo strtoupper($client['SocietesEtablissement']['name']); ?></strong></p>
    <p><?php echo $client['SocietesEtablissement']['adresse1']; ?></p>
    <?php
    if(!empty($client['SocietesEtablissement']['adresse2']))
        echo '<p>'. $client['SocietesEtablissement']['adresse2'] .'</p>';
    ?>
    <p><?php echo $client['SocietesEtablissement']['code_postal'] . ' ' . $client['SocietesEtablissement']['ville']; ?></p>
</div>
<div id="adresse_scio">
    <p><b>Scio, Conseil & Formation</b></p>
    <p><strong>Joël NICOLAS</strong></p>
    <p>Associé Dirigeant</p>
    <p>Tel. 01 83 94 79 05</p>
    <p><a href="mailto:joel.nicolas@scio.fr">joel.nicolas@scio.fr</a></p>
</div>

<!-- PAGE 2 -->
<div class="page-break">
    <div id="adresse_client2">
        <p><strong><?php echo strtoupper($client['SocietesEtablissement']['name']); ?></strong></p>
        <p><?php echo $client['SocietesEtablissement']['adresse1']; ?></p>
        <?php
        if(!empty($client['SocietesEtablissement']['adresse2']))
            echo '<p>'. $client['SocietesEtablissement']['adresse2'] .'</p>';
        ?>
        <p><?php echo $client['SocietesEtablissement']['code_postal'] . ' ' . $client['SocietesEtablissement']['ville']; ?></p>
    </div>
    <div id="lettre">
        <p>Paris,<br />
        <?php
        $listeJours = array(
            1 => "lundi",
            2 => "mardi",
            3 => "mercredi",
            4 => "jeudi",
            5 => "vendredi",
            6 => "samedi",
            7 => "dimanche"
        );
        $listeMois = array(
            "01"    =>  "janvier",
            "02"    =>  "février",
            "03"    =>  "mars",
            "04"    =>  "avril",
            "05"    =>  "mai",
            "06"    =>  "juin",
            "07"    =>  "juillet",
            "08"    =>  "août",
            "09"    =>  "septembre",
            "10"    =>  "octobre",
            "11"    =>  "novembre",
            "12"    =>  "décembre"
        );
        $dateHisto = strtotime($histo['CommandeHisto']['histo_date']);
        $jourDateHisto = date('d', $dateHisto);
        $journeeDateHisto = date('N', $dateHisto);
        $moisDateHisto = date('m', $dateHisto);
        $anneeDateHisto = date('Y', $dateHisto);
        ?>
        <?php echo 'Le ' . $listeJours[$journeeDateHisto] . ' ' . $jourDateHisto . ' ' . $listeMois[$moisDateHisto] . ' ' . $anneeDateHisto . '</p>'; ?>
        <br />
        <p>Objet : Convention de Formation</p>
        <br />
        <p>Madame, Monsieur,</p>
        <br />
        <p>Nous vous prions de bien vouloir trouver ci-joint notre offre concernant :</p>
        <br />
        <?php if(empty($stage['Commande']['formation_id']) && empty($stage['Commande']['event_group_id'])) { ?>
            <p><strong><?php echo $stage['Commande']['intitule']; ?></strong></p>
            <br />
            <p>Ainsi que les éléments cités en annexe ci-dessous :</p>
            <br />
            <ul>
                <li>la Convention de formation </li>
                <li>les conditions générales de vente SCIO Conseil & Formation</li>
            </ul>
            <br />
            <p>Pour accord de votre part, nous vous remercions de bien vouloir nous retourner complété, daté et paraphé l’exemplaire de la "Convention de formation".</p>
        <?php } else { ?>
            <p><strong><?php echo $stage['Formation']['libelle'] . ' - réf. ' . $stage['Formation']['reference']; ?></strong></p>
            <br />
            <p>Ainsi que les éléments cités en annexe ci-dessous :</p>
            <br />
            <ul>
                <li>le programme de formation</li>
                <li>la Convention de formation </li>
                <li>les conditions générales de vente SCIO Conseil & Formation</li>
            </ul>
            <br />
            <p>Pour accord de votre part, nous vous remercions de bien vouloir nous retourner complété, daté et paraphé l’exemplaire de la "Convention de formation".</p>
            <br />    
            <p>Si le coût de la prestation est pris en charge par un organisme collecteur, veuillez cocher le libellé prévu à cet effet et préciser ses coordonnées sur le feuillet "Convention de formation".</p>
            <br />
        <?php } ?>
        <p>Nous espérons que notre offre répondra à vos attentes, et restons à votre disposition pour toute information complémentaire,</p>
        <br />
        <p>Nous vous prions d’agréer, Madame, Monsieur, l’expression de nos salutations distinguées.</p>

        <div id="signature">
            <p>Joël NICOLAS </p>
            <p><i>Dirigeant</i></p>
        </div>
    </div>
</div>

<?php if(!empty($stage['Commande']['formation_id'])) { ?>
    <!-- PAGE 3 -->
    <div class="page-break"></div>
    <!-- Si on met un page-break à un élément qui fait plusieurs pages, il y a des sauts de pages bizarres -->
    <div>
        <h2 id="nomFormation"><?php echo $stage['Formation']['libelle'] ; ?></h2>
        <div id="headerFormation">
            <table cellpadding="0" cellspacing="0" border="0" width="100%">
                    <tr>
                      <td width="50%" align="left"><h3><small style="font-weight: normal;">Programme de formation : </small> <?php echo 'réf. ' . $stage['Formation']['reference']; ?></h3></td>
                      <td width="50%" align="right"><h3><small style="font-weight: normal;">Sous-gamme</small> <?php echo $gamme['Gamme']['libelle']; ?></h3></td>
                </tr>
            </table>
        </div>
        <div id="contenuFormation">
            <p><span style="color: #E28900;">Personnes concernées :</span> <?php echo $stage['Formation']['cible']; ?></p>
            <br />
            <p><span style="color: #E28900;">Objectifs pédagogiques :</span></p>
            <?php echo $stage['Formation']['objectifs']; ?>
            <br />
            <p><span style="color: #E28900;">Programme détaillé :</span></p>
            <div id="programme">
                    <?php echo $stage['Formation']['programme']; ?>
            </div>
        </div>
    </div>
<?php } ?>

<!-- PAGE 4 -->
<div class="page-break">
    <div id="headerConvention">
        <h2>Convention de formation</h2>
    </div>
    <div id="contenuConvention">
        <table cellpadding="0" cellspacing="0" border="0" width="100%" id="conventionPersonnes">
            <tr>
                <td width="50%" valign="top">
                    <p><small>Entre :</small></p>
                    <p><strong>SCIO Conseil & Formation</strong><br />
                    Immeuble CIT<br />
                    3 rue de l’Arrivée<br />
                    75015 PARIS<br />
                  <i>RCS de Paris : 751 962 119</i></p>
                </td>
                <td width="50%" valign="top">
                    <p><small>Et :</small></p>
                    <p><strong><?php echo strtoupper($client['SocietesEtablissement']['name']); ?></strong><br />
                    <?php echo $client['SocietesEtablissement']['adresse1']; ?><br />
                    <?php
                    if(!empty($client['SocietesEtablissement']['adresse2']))
                        echo $client['SocietesEtablissement']['adresse2'] .'<br />';
                    ?>
                    <?php echo $client['SocietesEtablissement']['code_postal'] . ' ' . $client['SocietesEtablissement']['ville']; ?><br />
                  <?php echo '<i>SIRET : ' . $client['SocietesEtablissement']['siret'] . '</i>'; ?></p>
                </td>
            </tr>
        </table>
        <?php if(empty($stage['Commande']['formation_id']) && empty($stage['Commande']['event_group_id'])) { ?>
            <?php
            echo '<h3>Objet de la prestation : '. $stage['Commande']['intitule'] .'</h3>';
            echo html_entity_decode($stage['Commande']['commentaires']);
            echo '<h3>Conditions tarifaires & facturation</h3>';
            echo '<ul>';
                echo '<li>Coût de la prestation : <strong>'. number_format($stage['Commande']['montant'],2,',',' ').' € HT *</strong></li>';
                if(isset($remise) && !empty($remise)) {
                    echo '<li>';
                        echo 'Remise : <strong>-'. number_format($remise['Invoice']['montant'],2,',',' ') .' €&lt;/strong>';
                    echo '</li>';
                }
            echo '</ul>';
            ?>
        <?php } else { ?>
            <h3>1\. Objet de la prestation</h3>
            <h4><?php echo $stage['Formation']['libelle'] . ' (' . $stage['Formation']['reference'] . ')'; ?></h4>
            <p><small style="font-size: .8125em; line-height: 1.2em; color: #888;">Cette prestation s’inscrit dans les actions de formation professionnelle mentionnées à l’article L6313-1 du code du travail  Le client reconnaît avoir pris connaissance des conditions particulières relatives aux prestations de formation et déclare en accepter les termes.</small></p>

            <h3>2\. Conditions d'exécution de la prestation</h3>
            <ul>
                    <li>Nombre de participants : <strong><?php echo $stage['Commande']['participants']; ?></strong></li>
                <li>Nombre de jours : 
                    <strong>
                                            <?php
                                            $duree = explode('.', $stage['Formation']['duree']);
                                            if($duree[1] == 5) {
                                                    echo number_format($stage['Formation']['duree'],'1',',',' ');
                                            } else {
                            echo $duree[0];
                                            }
                                            ?> jours
                    </strong>
                </li>
                <li>Nombre de sessions : <strong><?php echo $stage['Formation']['duree_nb']; ?></strong></li>
            </ul>

            <h3>3\. Dates d'exécution</h3>
            <ul>
                    <li>
                    Date(s) de session(s) : 
                    <strong>
                        <?php
                        if(empty($stage['Commande']['event_group_id']) && $stage['Formation']['type'] == 'interentreprise') {
                            echo 'à définir';
                        } else {
                            if($dates[0]['debut'] == $dates[0]['fin']) {
                                echo 'le ' . date('d/m/Y', strtotime($dates[0]['debut']));
                            } else {
                                echo 'du ' . date('d/m/Y', strtotime($dates[0]['debut'])) . ' au ' . date('d/m/Y', strtotime($dates[0]['fin']));
                            }
                        }
                        ?>
                    </strong>
                </li>
                <li>
                    Lieu : 
                    <strong>
                        <?php
                        if(empty($stage['Commande']['event_group_id']) && $stage['Formation']['type'] == 'interentreprise') {
                            echo 'à définir';
                        } else {
                            echo $dates['EventPlace']['adresse'] . ' ' . $dates['EventPlace']['code_postal'] . ' ' . $dates['EventPlace']['ville'];
                        }
                        ?>
                    </strong>
                </li>
            </ul>

            <h3>4\. Éléments pédagogiques</h3>
            <ul>
                    <li><?php echo strip_tags($stage['Formation']['moyens']); ?></li>
            </ul>

            <h3>5\. Conditions tarifaires & facturation</h3>
            <ul>
                <li>Coût de la session de formation : <strong><?php echo number_format($stage['Commande']['montant'],2,',',' '); ?> € HT *</strong></li>
                <?php
                if(isset($remise) && !empty($remise)) {
                    echo '<li>';
                        echo 'Remise : <strong>'. number_format($remise['Invoice']['montant'],2,',',' ') .' €&lt;/strong>';
                    echo '</li>';
                    echo '<li>';
                        echo 'Montant après remise : <strong>'. number_format(($stage['Commande']['montant']+$remise['Invoice']['montant']),2,',',' ') .' €&lt;/strong>';
                    echo '</li>';
                }
                ?>
                <li>Facturation : <strong><?php echo $stage['Commande']['info_paiement']; ?></strong></li>
                <li>Prise en charge OPCA : <strong>................................. € HT</strong></li>
                <li>Prise en charge Client : <strong>................................. € HT</strong></li>
                <li>Autre : .....................................................................................................................................</li>
            </ul>
        <?php } ?>

        <table cellpadding="0" cellspacing="0" border="0" width="100%" id="conventionSignatures">
            <tr>
                <td width="50%" height="100" class="first" valign="top">
                    <p><strong>Pour SCIO Conseil & Formation</strong></p>
                    <p><small>À ................................. le .................................</small></p>
                    <p><small>Signature :</small></p>
                    <?php echo $this->Html->image('/home/scio/app/webroot/img/manager/signature-joel-nicolas.jpg', array('alt' => 'Joël Nicolas pour : SCIO Conseil & Formation')); ?>
                </td>
                <td width="50%" valign="top">
                    <p><strong>Pour le client</strong></p>
                    <p><small>À ................................. le .................................</small></p>
                    <p><small>Signature & cachet :</small></p>
                </td>
            </tr>
        </table>
        <br />
        <p><small style="font-size: .8125em; line-height: 1.2em; color: #888;">* Les conditions proposées dans la présente convention sont valables 3 mois à compter de la date de signature apposée par SCIO Conseil & Formation</small></p>
    </div>

</div> 
```

# image - 电晕中的 display.newImage() 与 display.newImageRect()

> ID：16054125
> 
> 赞同：3
> 
> 时间：2013-04-17T07:30:37.587
> 
> 标签：image, lua, coronasdk, displayobject

`display.newImage()`和 和有什么不一样`display.newImageRect()`？

哪个更好用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T07:58:40.460

[`display.newImage()`](http://docs.coronalabs.com/api/library/display/newImage.html)具体提及的文档：

> **注意：** [`display.newImageRect()`](http://docs.coronalabs.com/api/library/display/newImageRect.html)当启用动态内容缩放时，应该使用它来加载图像。

同样，在[`display.newImageRect()`](http://docs.coronalabs.com/api/library/display/newImageRect.html)

> `dispaly.newImageRect()`自动替换高分辨率设备上的高分辨率资产。实际选择的图像将取决于 Corona 确定的当前内容比例，即当前屏幕与定义的基本内容尺寸之间的比率**`config.lua`**。
> 
> 基于这个比例，Corona 使用该 `imageSuffix`表（也在 config.lua 中定义）列出了相同图像系列的后缀，以从可用的图像选择中找到最佳匹配。

# asp.net-mvc-3 - 如何在 ASP.Net MVC 中制作具有相同控制器方法的自定义 url

> ID：16054150
> 
> 赞同：0
> 
> 时间：2013-04-17T07:32:13.037
> 
> 标签：asp.net-mvc-3, url-routing

我有这些课。

```
Secion Repository
Section Application
Section Controller
Group Repository
Group Application
Group Controller
Class Repository
Class Application
Class Controller 
```

我所有的控制器都有一个名为`Show` And these structure of entitys 的视图。 ![在此处输入图像描述](https://i.stack.imgur.com/GgEuS.png)

现在的问题是：我想当我去`Class`控制器时看到

```
Class/Show/class's group's section name/class's group name/class's name 
```

代替

```
Class/Show/1 
```

或者当我转到组控制器时，我看到

```
Group/Show/group's section name/group name 
```

代替

```
Group/Show/1 
```

如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:42:29.107

您可以定义以下路线：

```
routes.MapRoute(
    "ShowRoute",
    "{controller}/show/{groupsection}/{groupname}/{classname}",
    new { controller = "class", action = "show", classname= UrlParameter.Optional },                
); 
```

需要注意的几点：

1.  您可以选择任何控制器作为默认值（例如 controller="the_default"）
2.  您可以将所有参数声明为可选，但您需要注意代码中的空 arg 值

然后，您可以像这样定义控制器方法：

```
public ActionResult Show(string groupsection, string groupname, string classname) {    
} 
```

然后有以下请求：

```
http://your_domain/class/group1-section5/group1/class-obedient

http://your_domain/group/group1-section5/group1/ 
```

# asp.net - 如何在tinymce中禁用格式化文本？

> ID：16054155
> 
> 赞同：0
> 
> 时间：2013-04-17T07:32:24.293
> 
> 标签：asp.net, tinymce

我已将 tinyMCE 绑定到页面中的文本区域，

如何在tinymce中禁用格式化文本输入而不从textarea取消绑定tinyMCE？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:23:15.473

首先，您可以禁用粗体、斜体、下划线按钮。此外，您可以删除插件样式的按钮。

二、粘贴时有一种去除格式化文本的方法： [TinyMCE Paste As Plain Text](https://stackoverflow.com/questions/4122451/tinymce-paste-as-plain-text)

第三，您可能会禁用编辑器的拖放处理，并阻碍用户以这种方式将格式化文本放入编辑器。看看[paste](http://www.tinymce.com/wiki.php/Plugin:paste)`paste_block_drop`下的 tinymce 配置参数。

# android - 我怎样才能使RelativeLayout适合屏幕？

> ID：16054161
> 
> 赞同：5
> 
> 时间：2013-04-17T07:32:38.680
> 
> 标签：android, xml, android-layout, android-relativelayout

我面临着问题按钮显示在屏幕外`RelativeLayout`。`ImageView`不会缩放图片以使按钮可见。

我有的：

![在此处输入图像描述](https://i.stack.imgur.com/iaJ9x.jpg)

我想要的是：

![在此处输入图像描述](https://i.stack.imgur.com/WLlaK.jpg)

代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:gravity="center_vertical"  >

<TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/str"
        android:textAppearance="@android:style/TextAppearance.Small"
        android:textColor="?android:attr/textColorTertiary"
        android:layout_centerHorizontal="true"
        />

<ru.mw.widget.DrawableImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView"
        android:adjustViewBounds="true"
        android:layout_centerHorizontal="true"
        android:scaleType="centerCrop"
        />

<Button
        android:id="@+id/processButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/str"
        android:layout_below="@+id/imageView"
        android:layout_centerHorizontal="true"
        /> 
```

更改屏幕方向时的问题：如果我在横向模式下使用[**Arun C Thomas**的方法](https://stackoverflow.com/a/16054342/989433)一切正常，但在纵向模式下我有这个（图像由左/右边缘裁剪）：

![在此处输入图像描述](https://i.stack.imgur.com/jxPvT.jpg) 预期：

![在此处输入图像描述](https://i.stack.imgur.com/X86AN.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:44:11.603

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:gravity="center_vertical"  >

<TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/str"
        android:textColor="?android:attr/textColorTertiary"
        android:textAppearance="@android:style/TextAppearance.Small"

        android:layout_centerHorizontal="true"
        />

<ru.mw.widget.DrawableImageView
    android:id="@+id/imageView"
    android:layout_width="wrap_content"
    android:layout_height="0dp"
    android:layout_below="@+id/textView"
    android:layout_centerHorizontal="true"
    android:adjustViewBounds="true"
    android:scaleType="centerCrop"
    android:layout_above="@+id/processButton"
     />

<Button
        android:id="@+id/processButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/str"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        />
</RelativeLayout> 
```

这是解决方案

现在要实现**更新**的要求，将上述布局添加到`layout-land`文件夹中`res`（如果您没有创建名为`layout-land`in的文件夹`res`），现在在默认`layout`文件夹中添加此 xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:gravity="center"  >
<ru.mw.widget.DrawableImageView
    android:id="@+id/imageView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerInParent="true"
    android:adjustViewBounds="true"
     />

<Button
    android:id="@+id/processButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_below="@+id/imageView"
    android:layout_centerHorizontal="true"
    android:text="@string/str" />

<TextView
    android:id="@+id/textView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/imageView"
    android:layout_centerHorizontal="true"
    android:text="@string/str"
    android:textColor="?android:attr/textColorTertiary" />

</RelativeLayout> 
```

而已。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:35:08.900

尝试添加`android:layout_alignParentBottom="true"`到按钮：

```
<Button
    android:id="@+id/processButton"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/str"
    android:layout_below="@+id/imageView"
    android:layout_centerHorizontal="true"
    android:layout_alignParentBottom="true"
    /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:07:08.207

1.  使用 . 将按钮与父底部对齐 `layout_alignParentBottom="true"`。
2.  `ImageView`将和之间包裹`TextView`起来`Button`

* * *

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:layout_width="match_parent"
          android:layout_height="match_parent"
          android:gravity="center_vertical"  >

<TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/str"
        android:textAppearance="@android:style/TextAppearance.Small"
        android:textColor="?android:attr/textColorTertiary"
        android:layout_centerHorizontal="true"
        />

<Button
        android:id="@+id/processButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/str"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        />

<ru.mw.widget.DrawableImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView"
        android:layout_above="@+id/processButton"
        android:adjustViewBounds="true"
        android:layout_centerHorizontal="true"
        android:scaleType="centerCrop"
        />

</RelativeLayout> 
```

# android - 使用 AndroidJsonfactory 的示例

> ID：16054164
> 
> 赞同：0
> 
> 时间：2013-04-17T07:32:45.143
> 
> 标签：android, json

我开发了一个需要最近地点的应用程序。它使用谷歌 api 进行地点搜索。我的问题是如何开发一个包装器来抽象我们的应用程序和底层网络服务。它使用库中的功能（google-http-client，google-http-client-android）

例如：AndroidJsonParsor只能使用android 3.0及以上版本。我们可以使用JsonHttpParser来兼容。

提前感谢您的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:45:14.357

您实际上想要什么，因为谷歌开发人员说 API 级别 1 中添加了 Json 支持。意味着任何 Android 版本都将支持 Json。

这是链接[http://developer.android.com/reference/org/json/package-summary.html](http://developer.android.com/reference/org/json/package-summary.html)

# javascript - 如何使用带有个性化按钮的 skype-uri.js？

> ID：16054167
> 
> 赞同：10
> 
> 时间：2013-04-17T07:32:49.923
> 
> 标签：javascript, skype

我想使用[Skype UI Reference](https://dev.skype.com/skype-uri/skype-uri-tutorial-webpages#uriTJS_Generator)中的 Skype-ui，但我不喜欢使用 Skype 提供的“图像资源”。我已经创建了我的个性化 Skype 按钮，我想使用它。我怎样才能做到这一点？

我知道有这样的代码：

```
<a href="skype:echo123?call">Call</a> the Skype Echo / Sound Test Service 
```

它可以很容易地用作任何类型的按钮，但是在没有安装任何 Skype 的计算机上使用它时，它不允许我在 Skype 的下载页面中重定向。与使用 js 脚本时不同：

```
<div id="call_32" style="width:20%;background-color:#0094ff">
<script type="text/javascript">
    Skype.ui({
        name: "call",
        element: "call_32",
        participants: ["echo123"],
        imageSize: 32,
        imageColor: "white"
    });
 </script>
</div> 
```

但它不会让我使用个性化按钮。

请帮忙。

谢谢，

标记

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-08T08:18:13.430

我知道这个问题有点老了，但是当我遇到同样的问题时，我想我会分享我的解决方案。

按照按钮前某处的说明包含 skypeui.js 包

```
<script type="text/javascript" src="http://cdn.dev.skype.com/uri/skype-uri.js"></script> 
```

然后只需使用以下标记，将“myskypename”替换为您要呼叫的 Skype 名称或号码。

```
<div id="MyDiv">
   <a onclick="Skype.tryAnalyzeSkypeUri('call', '0');" href="skype:myskypename?call">
      <img role="Button" src="/images/mybutton.gif">
   </a>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-14T17:16:21.967

1）插入Skype按钮，如下所述： [http ://www.skype.com/en/features/skype-buttons/create-skype-buttons/](http://www.skype.com/en/features/skype-buttons/create-skype-buttons/)

2）隐藏Skype按钮div。

```
$('#SkypeButton_Call_your_skype_id_1').css('display', 'none'); 
```

3）放置您自己的图像/链接

```
<a href="" onclick="skype_contact();">Call me</a> 
```

4）将此函数放在您的js文件中。（它与单击 Skype 按钮时触发的代码相同）

```
function skype_contact()
{
    Skype.tryAnalyzeSkypeUri('call', '0');
    Skype.trySkypeUri_Generic('skype:your_skype_id?call', $('#SkypeButton_Call_your_skype_id_1 > iframe').attr('id'), '0');         
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T06:19:46.890

试试这个，这工作..

```
<html>
<script type="text/javascript" src="http://www.skypeassets.com/i/scom/js/skype-uri.js"></script>
<div id="SkypeButton_Call_dhruv_1">
  <script type="text/javascript">
    Skype.ui({
      "name": "call",
      "element": "SkypeButton_Call_dhruv_1",
      "participants": ["dhruv"],
      "imageSize": 32
    });
  </script>
</div>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-07T09:26:03.047

基于[François-Xavier De Nys](https://stackoverflow.com/users/5334864/fran%C3%A7ois-xavier-de-nys)的[上述回答](https://stackoverflow.com/a/32570309/233060)

支持通话和聊天链接。

> 将*echo123*替换为您的 Skype ID。

**脚本：**

```
<script src="https://secure.skypeassets.com/i/scom/js/skype-uri.js"></script>

<script>
// code for adding and clicking hidden Skype buttons
var
SkypeButtons_ek = {},

// call when doc ready to setup the hidden button
// id = any unique id, user = your skype user id, type = call or chat
SkypeButton_ek_add = function(id, user, type){
  SkypeButtons_ek[id] = {user: user, type: type};
  jQuery("body").append('<div id="SkypeButton_ek_'+id+'"></div>');
  Skype.ui({
    "name": type,
    "element": "SkypeButton_ek_"+id,
    "participants": [user]
  });
  jQuery("#SkypeButton_ek_"+id+", #SkypeButton_ek_"+id+" > iframe").hide();
},

// call from your own link/button/event
// id is the same id you passed to SkypeButton_ek_add
SkypeButton_ek_click = function(id){
  if (SkypeButtons_ek[id].type == 'chat')
    SkypeWebControl.SDK.Chat.startChat({ConversationType: 'person', ConversationId: SkypeButtons_ek[id].user});
  else {
    Skype.tryAnalyzeSkypeUri(SkypeButtons_ek[id].type, '0');
    Skype.trySkypeUri_Generic('skype:'+SkypeButtons_ek[id].user+'?'+SkypeButtons_ek[id].type+'', jQuery('#SkypeButton_ek_'+id+' > iframe').attr('id'), '0');
  }
};

// add Skype buttons hidden
jQuery(document).ready(function($){
  SkypeButton_ek_add(1, 'echo123', 'chat'); 
  SkypeButton_ek_add(2, 'echo123', 'call'); 
});
</script> 
```

**标记**

```
<a href="" onclick="SkypeButton_ek_click(1); return false;">Skype Chat</a>
<a href="" onclick="SkypeButton_ek_click(2); return false;">Skype Call</a> 
```

您当然可以将`SkypeButton_ek_click`调用添加或绑定到任何事件。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2014-12-23T14:44:54.167

```
`<a href="skype:your skype id">`your icon or button here</a> 
```

在此处阅读有关 Skype 按钮的更多信息 [http://msdn.microsoft.com/en-us/library/office/dn745878](http://msdn.microsoft.com/en-us/library/office/dn745878)

# python - how to set up Drive SDK so you dont need a success token each time you run .py

> ID：16054169
> 
> 赞同：0
> 
> 时间：2013-04-17T07:32:55.507
> 
> 标签：python, oauth-2.0, google-drive-api

At the moment i am needing to get a "success code" each time i want to run my .py app. to access my googdrive files which is a pain.

I saw Ali Afshars great vid on [https://developers.google.com/drive/search-parameters](https://developers.google.com/drive/search-parameters) where he uses: `from auth import http` to streamline this process.

Not sure what this function should contain... Can you point me in the right direction, so that i can set up my .py to do this automatically ...or at least only once.

many thanks

Dav-o

* * *

**EDIT** relevant current snip of code follows:

```
import logging
logging.basicConfig()
import httplib2
import pprint
from apiclient.discovery import build
from apiclient.http import MediaFileUpload
from oauth2client.client import *
from apiclient import errors

CLIENT_ID = "864350......ps.googleusercontent.com"
CLIENT_SECRET = "sw0yb.....-zR6XWzEgM"
OAUTH_SCOPE = 'https://www.googleapis.com/auth/drive' 
REDIRECT_URI = 'urn:ietf:wg:oauth:2.0:oo...ooo' # Redirect URI for installed apps

flow = OAuth2WebServerFlow(CLIENT_ID, CLIENT_SECRET, OAUTH_SCOPE, REDIRECT_URI)
authorize_url = flow.step1_get_authorize_url()
print 'Go to the following link in your browser: ' + authorize_url
code = raw_input('Enter verification code: ').strip()
credentials = flow.step2_exchange(code)

http = httplib2.Http() 
http = credentials.authorize(http)

drive_service = build('drive', 'v2', http=http) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:40:14.007

What he probably does in `auth` is:

```
import httplib2
from oauth2client.client import OAuth2Credentials

http = httplib2.Http()
credentials = OAuth2Credentials(access_token, client_id, client_secret, refresh_token, None, '', '')
credentials.authorize(http) 
```

You can wrap this code in a module/method and use the authenticate your requests. For multiple user scenarios, preserve access and refresh tokens (most likely in a db) and init credentials object with the stored tokens.

# actionscript-3 - FLV 关键帧，有什么解释吗？

> ID：16054170
> 
> 赞同：0
> 
> 时间：2013-04-17T07:32:57.687
> 
> 标签：actionscript-3, video, flv

我想知道，FLV中关键帧的目的是什么？它们有什么用？在什么情况下他们比其他情况更推荐？

我知道关键帧用于补间值以进行动画处理，但是当我看到人们在 FLV 文件中谈论它时我不明白..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:41:37.730

在视频压缩中，[关键帧](http://en.wikipedia.org/wiki/Key_frame)（参见视频压缩部分）只是存储完整图像的帧，而下一帧是通过应用编码算法的更改从关键帧生成的，它是所有视频压缩算法的基石。

# javascript - 使用 IndexedDB 的 JayData saveChanges() 错误

> ID：16054171
> 
> 赞同：1
> 
> 时间：2013-04-17T07:32:59.213
> 
> 标签：javascript, indexeddb, jaydata

我无法从 IndexedDb 中删除数据。这些方法适用于 WebSql，但会引发 IndexedDb 错误。初始人口似乎工作正常。

此错误在 Chrome 中：

```
Uncaught TypeError: Cannot read property 'ABORT_ERR' of undefined IndexedDbProvider.js:627
self.db.transaction.setCallbacks.onerror 
```

代码已移至[此处的 jsFiddle](http://jsfiddle.net/WasCz/4/)

值得注意的是，如果我只是调用`remove()`. 该错误似乎仅在我尝试时才发生`saveChanges()`。

看到我（可能）有你的注意力是同步`toArray`的吗？`forEach`所以我可以减少保存交易？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:46:46.330

dvContext.Data.remove(data) 只是一个错字？应该是 dContext.Datas.remove(data);

JayData 的一些函数是同步的，而其他方法是异步的，但以一种合乎逻辑的方式 :) 当 JayData 接触本地数据库或通过网络调用远程方法时，这些函数是异步的。让我们看看你的代码：

```
 dContext.Datas 
```

是一个过滤器（可查询），它选择所有记录，只要您只是构建过滤器，调用就会同步，所以

```
dContext.Datas.filter().take().skip().orderBy().map() 
```

只是在内存中建立过滤器，什么都不做，所以它们都是同步的，然后：

```
dContext.Datas.toArray() 
```

toArray 触发真正的动作，执行查询，这里我们必须接触本地数据库，所以它是异步的，当它完成时，它可以调用回调函数或解析它之前返回的承诺。

这同样适用于删除，它只是将记录放入一个集合中（因此它是同步的），而 saveChanges() 会完成真正的工作（它是异步的）。

恕我直言，您的问题是您的 toArray 既有回调函数又有 then 分支，因此两者都将被并行调用，而 then 分支不会等待回调完成。解决方案：

```
dContext.Datas.toArray()
.then(function(data) {
     // your removes in a loop
     // important: return the promise
     return dContext.saveChanges();
})
.then(function() {
     // whatever
}) 
```

# jenkins - jenkins 插件，用于在给定目录中的任何文件更改时触发构建

> ID：16054177
> 
> 赞同：1
> 
> 时间：2013-04-17T07:33:36.660
> 
> 标签：jenkins, hudson, jenkins-plugins, hudson-plugins

我正在寻找我们有一个目录的功能，其中包含一些文件。

每当有人对目录中的任何文件进行更改时，jenkins 都应该触发构建。

此功能是否有任何插件或方法。请指教。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T09:08:37.123

我自己没有尝试过，但是[FSTrigger](https://wiki.jenkins-ci.org/display/JENKINS/FSTrigger+Plugin)插件似乎可以满足您的要求：

> FSTrigger 提供轮询机制来监视文件系统并在文件或一组文件发生更改时触发构建。

如果您可以使用脚本监视目录，则可以使用 HTTP GET 触发构建，例如使用`wget`or `curl`：

```
wget -O- $JENKINS_URL/job/JOBNAME/build 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-10-04T22:24:57.627

虽然有点相关..似乎这个问题是关于监控系统上的静态文件..但是有很多版本控制系统就是为了这个目的。

如果您使用跟踪文件本身的更改，我在[另一篇文章](https://stackoverflow.com/a/39862273/4709299)中回答了这个问题：`git`

```
#!/bin/bash

set -e

job_name="whatever"
JOB_URL="http://myserver:8080/job/${job_name}/"
FILTER_PATH="path/to/folder/to/monitor"

python_func="import json, sys
obj = json.loads(sys.stdin.read())
ch_list = obj['changeSet']['items']
_list = [ j['affectedPaths'] for j in ch_list ]
for outer in _list:
  for inner in outer:
    print inner
"

_affected_files=`curl --silent ${JOB_URL}${BUILD_NUMBER}'/api/json' | python -c "$python_func"`

if [ -z "`echo \"$_affected_files\" | grep \"${FILTER_PATH}\"`" ]; then
  echo "[INFO] no changes detected in ${FILTER_PATH}"
  exit 0
else
  echo "[INFO] changed files detected: "
  for a_file in `echo "$_affected_files" | grep "${FILTER_PATH}"`; do
    echo "    $a_file"
  done;
fi; 
```

您可以将检查直接添加到作业的 exec shell 的顶部，`exit 0`如果未检测到更改，它会这样做。因此，您始终可以轮询 repo 的顶层以进行签入以触发构建。并且仅在有问题的文件发生更改时才完成构建。

# php - 全局更改日期格式

> ID：16054179
> 
> 赞同：0
> 
> 时间：2013-04-17T07:33:52.020
> 
> 标签：php, mysql, sql, web

我正在使用 PHP 和 mysql 并使用`Date`或`DateTime`在 mysql 数据库中保存日期。在现场，我一直在以它们保存在数据库中的方式显示日期。

但现在我想使用一种格式在网站上的任何地方显示日期：

```
April 17 2013 
```

或者

```
April 17 2013 12:20:50 
```

我知道我可以使用`date`和`strtotime`函数以上述格式显示日期。但是有很多地方我有日期显示代码。所以我希望自动化我当前代码工作的过程并以上述格式显示日期。

**任何关于如何创建mysql 触发器**或一些 php 魔术的想法，它可以自动转换通过 SELECT 查询运行的所有日期，而无需更改我的 sql 或 php 代码，因为我的代码中有很多地方，并且在所有地方更改代码都是矫枉过正的?

**例如：**

**数据库保存日期：** 2013-04-16 12:41:26

**选择查询：** `SELECT * FROM myTable`

**PHP：** `echo $row->dated;`显示`2013-04-16 12:41:26`

我希望在不更改我的 php 代码的情况下，日期应在整个站点上以上述格式全局显示。

任何想法请如何实现？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:36:30.293

您可以使用通过查询直接格式化`DATE_FORMAT()`

```
SELECT DATE_FORMAT(myDate, '%M %d %Y %h:%i') myDate
FROM   TableName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/c096d/5)

并在您的 PHP 中回显：`$row->myDate`

* * *

MySQL 触发器不投射值，它只在`CrUD`操作期间触发。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:41:59.243

我想向您推荐一种我喜欢使用的替代方法。

你应该利用`epoch`时间。一个纪元时间基本上是从那以后经过的秒数`1 January 1970`

1.  一个如果我喜欢的好处是它很容易计算时间差异，因为您只处理秒数而不是复杂的格式，例如`sec min hrs`

2.  另一个好处是它很容易存储，因为它是一个整数，所以你可以将它存储在一个 sql 数据库中，让你的 php 代码理解它，而不必担心格式和类似的事情。

在php中，如果你使用该`time()`函数，它将返回纪元时间。如果您想以用户友好的方式显示它。您可以使用以下代码：

```
$epoch = time();
$dt = new DateTime("$epoch"); // convert UNIX timestamp to PHP DateTime
echo $dt->format('Y-m-d H:i:s'); // output = 2012-08-15 00:00:00 
```

如您所见，日期的格式非常灵活，因此易于使用。

一个很好的例子来查找 1 周前的日期：

```
$epoch = time() - 604800; //604800 seconds = 7 days
$dt = new DateTime("$epoch"); // convert UNIX timestamp to PHP DateTime
echo $dt->format('Y-m-d H:i:s'); // output = 2012-08-15 00:00:00 
```

# jquery - jQuery Mobile 1.3.1 + Flot 奇怪的加载信息

> ID：16054182
> 
> 赞同：1
> 
> 时间：2013-04-17T07:33:56.590
> 
> 标签：jquery, html, jquery-mobile, jquery-plugins, flot

我想在我的项目中使用带有 jQ​​uery Mobile 1.3.1 的浮点交互示例。但是使用最新版本的 jQuery Mobile，我在图表周围出现了一个奇怪的框架，并且在页面底部出现了一个“正在加载”的文本。你们中有人知道如何解决吗？它适用于简单的 jQuery 和 jQuery Mobile 1.2.0，但我想要最新版本。

这是图表功能：

```
$(function() {
    var datasets = {
        "usa": {
            label: "USA",
            data: [[1988, 483994], [1989, 479060], [1990, 457648], [1991, 401949], [1992, 424705], [1993, 402375], [1994, 377867], [1995, 357382], [1996, 337946], [1997, 336185], [1998, 328611], [1999, 329421], [2000, 342172], [2001, 344932], [2002, 387303], [2003, 440813], [2004, 480451], [2005, 504638], [2006, 528692]]
        },        
        "russia": {
            label: "Russia",
            data: [[1988, 218000], [1989, 203000], [1990, 171000], [1992, 42500], [1993, 37600], [1994, 36600], [1995, 21700], [1996, 19200], [1997, 21300], [1998, 13600], [1999, 14000], [2000, 19100], [2001, 21300], [2002, 23600], [2003, 25100], [2004, 26100], [2005, 31100], [2006, 34700]]
        },
        "uk": {
            label: "UK",
            data: [[1988, 62982], [1989, 62027], [1990, 60696], [1991, 62348], [1992, 58560], [1993, 56393], [1994, 54579], [1995, 50818], [1996, 50554], [1997, 48276], [1998, 47691], [1999, 47529], [2000, 47778], [2001, 48760], [2002, 50949], [2003, 57452], [2004, 60234], [2005, 60076], [2006, 59213]]
        },
        "germany": {
            label: "Germany",
            data: [[1988, 55627], [1989, 55475], [1990, 58464], [1991, 55134], [1992, 52436], [1993, 47139], [1994, 43962], [1995, 43238], [1996, 42395], [1997, 40854], [1998, 40993], [1999, 41822], [2000, 41147], [2001, 40474], [2002, 40604], [2003, 40044], [2004, 38816], [2005, 38060], [2006, 36984]]
        },
        "denmark": {
            label: "Denmark",
            data: [[1988, 3813], [1989, 3719], [1990, 3722], [1991, 3789], [1992, 3720], [1993, 3730], [1994, 3636], [1995, 3598], [1996, 3610], [1997, 3655], [1998, 3695], [1999, 3673], [2000, 3553], [2001, 3774], [2002, 3728], [2003, 3618], [2004, 3638], [2005, 3467], [2006, 3770]]
        },
        "sweden": {
            label: "Sweden",
            data: [[1988, 6402], [1989, 6474], [1990, 6605], [1991, 6209], [1992, 6035], [1993, 6020], [1994, 6000], [1995, 6018], [1996, 3958], [1997, 5780], [1998, 5954], [1999, 6178], [2000, 6411], [2001, 5993], [2002, 5833], [2003, 5791], [2004, 5450], [2005, 5521], [2006, 5271]]
        },
        "norway": {
            label: "Norway",
            data: [[1988, 4382], [1989, 4498], [1990, 4535], [1991, 4398], [1992, 4766], [1993, 4441], [1994, 4670], [1995, 4217], [1996, 4275], [1997, 4203], [1998, 4482], [1999, 4506], [2000, 4358], [2001, 4385], [2002, 5269], [2003, 5066], [2004, 5194], [2005, 4887], [2006, 4891]]
        }
    };

    // hard-code color indices to prevent them from shifting as
    // countries are turned on/off

    var i = 0;
    $.each(datasets, function(key, val) {
        val.color = i;
        ++i;
    });

    // insert checkboxes 
    var choiceContainer = $("#choices");
    $.each(datasets, function(key, val) {
        choiceContainer.append("<br/><input type='checkbox' name='" + key +
            "' checked='checked' id='id" + key + "'></input>" +
            "<label for='id" + key + "'>"
            + val.label + "</label>");
    });

    choiceContainer.find("input").click(plotAccordingToChoices);

    function plotAccordingToChoices() {

        var data = [];

        choiceContainer.find("input:checked").each(function () {
            var key = $(this).attr("name");
            if (key && datasets[key]) {
                data.push(datasets[key]);
            }
        });

        if (data.length > 0) {
            $.plot("#placeholder", data, {
                yaxis: {
                    min: 0
                },
                xaxis: {
                    tickDecimals: 0
                }
            });
        }
    }

    plotAccordingToChoices();

    // Add the Flot version string to the footer

    $("#footer").prepend("Flot " + $.plot.version + " &ndash; ");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:56:40.677

边框/框架的问题不在于 jQuery Mobile，而是 Flot 配置。加载 msg 可以通过适当的脚本初始化来修复，Flot 需要在 jQuery Mobile 之后初始化。

这是一个工作示例：http: [//jsfiddle.net/Gajotres/52cKB/](http://jsfiddle.net/Gajotres/52cKB/)

框架是这样解决的：

```
$.plot("#placeholder", data, {
    yaxis: {
        min: 0
    },
    xaxis: {
        tickDecimals: 0
    },
    grid: {
      borderWidth: 0
    }                     
}); 
```

# html - Paypal 未预填充地址详细信息

> ID：16054183
> 
> 赞同：1
> 
> 时间：2013-04-17T07:33:59.287
> 
> 标签：html, paypal, populate

```
<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
                                    <input type="hidden" name="notify_url" value="http://www.blaa.co.uk/ipn_subscribe.asp">
                                    <input type="hidden" name="cmd" value="_xclick">
                                    <input type="hidden" name="business" value="blaaa@blaa.co.uk">
                                    <input type="hidden" name="currency_code" value="GBP">
                                    <input type="hidden" name="return" value="http://www.blaablaa.co.uk/thankyou.asp?oid=955">
                                    <input type="hidden" name="rm" value="2">
                                    <input type="hidden" name="item_name" value="Purchase">
                                    <input type="hidden" name="quantity" value="1">
                                    <input type="hidden" name="custom" value="955">                 
                                    <input type="hidden" name="amount" value="85">
                                    <input type="hidden" name="lc" value="GB">                                          
                                    <input type="hidden" name="address1" value="5 Birkin Close">
                                    <input type="hidden" name="city" value="knutsford">
                                    <input type="hidden" name="country" value="GB">
                                    <INPUT id="email" type="hidden" name="email" value="test@test.com">                 

                                    <INPUT type="image" name="Continue" src="NewImages/continue1.jpg" alt="Continue to payment merchant to pay for your purchase">                                      
                                </FORM> 
```

如果您进行信用卡购买，知道为什么这会预先填充地址详细信息吗？对我来说看起来不错。

该表格正在调用 paypay - [https://www.paypal.com/cgi-bin/webscr](https://www.paypal.com/cgi-bin/webscr)。图像是将表单发送到贝宝的按钮。如果您想通过信用卡付款，它将使用贝宝而不是在贝宝中预先填充地址详细信息。任何想法为什么请。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:10:22.840

将此添加到您的代码中它将起作用，并且还可以在我的帐户选项下的个人资料下的销售偏好下的网站付款偏好中的帐户中启用自动退货 ul 选项

```
<input type="hidden" name="return" value="http://abctest.com./purchase/thank-you.php"> 
```

（编辑显示代码...）

# c# - 在参考列表中找不到 Microsoft.Office.Interop.Word

> ID：16054184
> 
> 赞同：23
> 
> 时间：2013-04-17T07:34:00.973
> 
> 标签：c#, visual-studio-2012, ms-word, ms-office, visual-studio-express

因为我不知道如何将 MS Word 与 C# 集成，所以我得到了这个解决方案来解决我遇到的问题：http: [//www.dotnetperls.com/word](http://www.dotnetperls.com/word)

`Microsoft.Office.Interop.Word`我研究了这个解决方案，但在参考列表中找不到。我也无法在 COM 对象下找到它。我错过了什么？我正在使用 Visual Studio Express 2012。

编辑：

这个问题的答案是您必须在您的计算机上安装 MS Office。

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-04-17T07:40:51.557

你需要`Microsoft Word xx Object Library`.

![在此处输入图像描述](https://i.stack.imgur.com/YAkb1.png)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-10-24T16:56:12.540

您可以从此处下载主互操作程序集。

[http://www.microsoft.com/en-us/download/details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2017-10-18T20:57:52.533

您还可以使用 NuGet 包管理器来安装参考。转到项目-> 管理 NuGet 包...搜索“Interop.Word”并安装该包。

[![在此处输入图像描述](https://i.stack.imgur.com/U2eyc.png)](https://i.stack.imgur.com/U2eyc.png) 这样做的好处是您无需考虑 dll 的位置。当另一个人检查解决方案时，NuGet 会将所有需要的包放到他们的机器上。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-17T07:45:39.450

如果您在办公室安装期间没有选择安装它们，您可能需要单独安装这些程序集。

MSDN：

> 您必须先在开发计算机的全局程序集缓存中安装 Microsoft Office 主互操作程序集 (PIA)，然后才能执行某些开发任务。通常，当您在开发计算机上安装 Office 时会自动安装 PIA。但是，在某些情况下，您可能需要单独安装 PIA。

[更多在这里](http://msdn.microsoft.com/en-us/library/kh3965hw.aspx)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-06-02T11:47:40.337

检查库 (Microsoft.Office.Interop.word) 是否存在于 windows (C:\Windows\assembly) 的程序集文件夹中，否则您可以从[http://www.microsoft.com/en-us/download安装它/details.aspx?id=3508](http://www.microsoft.com/en-us/download/details.aspx?id=3508)

现在你只需要在你的视觉工作室中找到它。

右键单击 SolutionExplorer 窗口中的控制台应用程序（或应用程序的名称），然后

转到 Add -> References-> Browse 并找到 C:\Windows\assembly\GAC_MSIL\Microsoft.Office.Interop.word 或类似目录。按确定，您现在可以在应用程序中使用该库。

# android - Sencha Touch 原生可选功能与所需权限（Nexus 7 上的相机）

> ID：16054186
> 
> 赞同：0
> 
> 时间：2013-04-17T07:34:11.460
> 
> 标签：android, extjs, sencha-touch-2, google-play, sencha-cmd

如何使用 Sencha Cmd 为 Google Nexus 7 打包 Sencha Touch 2.2 应用程序，并支持前置摄像头？

如果我直接在设备上安装它，我可以运行该应用程序并很好地拍照。但是使用 App Store，该应用程序不适用于 Nexus 7，因为 Google 认为该应用程序需要后置摄像头。

查看我应该在该功能上设置的使用功能清单`required:false`，`CAMERA`但是清单文件是由 Cmd 基于`packager.json`. `Packager.json`包括`"permissions": ["CAMERA"]`，但在通过 Sencha Cmd 打包时，我看不到任何将其设置为可选的选项。

相机在应用程序中使用，但它不是应用程序的必需部分，因此我希望应用程序与 Nexus 7 等无后置摄像头设备兼容（通过 Google Play 商店）。

PhoneGap 可能会解决这个问题，但目前不是一个选项，因为我使用其他 Cmd/Native 功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T07:10:48.483

Sencha CMD 使用模板文件 C:\Users\USERNAME\bin\Sencha\Cmd\3.1.1.274\stbuild\st-res\android\AndroidManifest.xml

该文件很可能在字符串格式函数中用于制作最终的未编译清单。

我发现（至少在最新版本中）我可以简单地将正确的标签添加到模板文件中，然后从应用程序 packager.json 文件中删除配置。从 packager.json 中删除 Camera 配置以防止重复是很重要的。由于权限配置已从 packager.json 中删除，您必须手动将权限和功能标记添加到清单模板。在此示例中，我还添加了自动对焦，但目前如果您使用相机，Google 会自动宣传此功能。

记得在编译不同的应用程序时更改模板，如果其他应用程序不需要相机权限，以及更新 Sencha Cmd 时。

新行：

```
<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" android:required="false" />
<uses-feature android:name="android.hardware.camera.autofocus" android:required="false"  /> 
```

修改后完成AndroidManifext.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android" package="%s" android:versionCode="%d" android:versionName="%s">
    <uses-sdk android:minSdkVersion="%s" android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-feature android:name="android.hardware.camera" android:required="false" />
    <uses-feature android:name="android.hardware.camera.autofocus" android:required="false"  />
%s
    <application android:icon="@drawable/icon" android:label="%s">
        <activity android:name=".STActivity"
            %s
            android:label="%s">
                <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
%s
%s
        </activity>
    </application>
</manifest> 
```

# vb.net - ASPxGridView GetSelectedFieldValues 不检索值

> ID：16054187
> 
> 赞同：1
> 
> 时间：2013-04-17T07:34:12.503
> 
> 标签：vb.net, devexpress, aspxgridview

我正在尝试使用带有按钮的 GetSelectedFieldValues 方法从 ASPxGridView 中的选定行中获取一个值这样简单的事情。

我已经按照 DevExpress 文档中的步骤操作，不同之处在于我想检索标签内的值。经典的 ASPGridView 没什么难的。

```
Protected Sub ASPxButton1_Click(sender As Object, e As EventArgs) Handles ASPxButton1.Click
    Dim oRowVal As List(Of Object)
    Dim oVal As Object
    oRowVal = ASPxGridView1.GetSelectedFieldValues({"No_"})
    oVal = oRowVal(0)
    Label1.Text = oVal.ToString
End Sub 
```

如您所见，我想要的是在 ASPxGridView 中获取选定的值并将其显示在标签中。

```
<asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
<br />
<dx:ASPxButton ID="ASPxButton1" runat="server" AutoPostBack="False" Text="ASPxButton" Theme="BlackGlass" Width="150px">
</dx:ASPxButton>
<dx:ASPxGridView ID="ASPxGridView1" runat="server" AutoGenerateColumns="False" DataSourceID="SqlDataSource1" EnableTheming="True" Theme="BlackGlass">
    <Columns>
        <dx:GridViewCommandColumn ShowSelectCheckbox="True" VisibleIndex="0">
            <ClearFilterButton Visible="True">
            </ClearFilterButton>
        </dx:GridViewCommandColumn>
        <dx:GridViewDataTextColumn Caption="GP" FieldName="No_" VisibleIndex="1">
        </dx:GridViewDataTextColumn>
        <dx:GridViewDataTextColumn Caption="Description" FieldName="Descripción Grupo" VisibleIndex="2">
        </dx:GridViewDataTextColumn>
    </Columns>
    <SettingsBehavior AllowSelectSingleRowOnly="True" />
    <Settings ShowFilterRow="True" ShowGroupPanel="True" />
</dx:ASPxGridView> 
```

提前致谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T14:59:11.827

指定**ASPxGridView.KeyFieldName**属性以使用选择状态：

```
<dx:ASPxGridView ... KeyFieldName="..."> 
```

顺便问一下，下面的代码是否返回正确的结果？

```
oRowVal = ASPxGridView1.GetSelectedFieldValues({"No_"})
oVal = oRowVal(0) 
```

# layout - 将模块布局应用于 zfcuser

> ID：16054191
> 
> 赞同：1
> 
> 时间：2013-04-17T07:34:27.213
> 
> 标签：layout, zend-framework2, zfcuser

我正在研究 zf2 并尝试使用 2 种不同的布局。公共模块的 1 个布局和所有其他模块的另一个（私有布局“）。它工作得很好，但我在公共模块中的 zfcuser 模块使用其他布局：/我试过这个：

```
'template_map' => array(  
    'zfc-user/user/login' => __DIR__ . '/../view/layout/blank.phtml', // blank is my public layout 
), 
```

我没有在我的布局中获取表单，而是在公共布局和“私人”布局中获取表单......有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T10:04:29.487

evan 在此处提供的代码[http://blog.evan.pro/module-specific-layouts-in-zend-framework-2](http://blog.evan.pro/module-specific-layouts-in-zend-framework-2)将通过一个小的更改来满足您的需求，替换`__NAMESPACE__`为`'ZfcUser'`以便您正在侦听 ZfcUser 控制器操作

```
public function init(ModuleManager $moduleManager)
{
        $sharedEvents = $moduleManager->getEventManager()->getSharedManager();
        $sharedEvents->attach('ZfcUser', 'dispatch', function($e) {
        // This event will only be fired when an ActionController under the ZfcUser namespace is dispatched.
        $controller = $e->getTarget();
        $controller->layout('layout/alternativelayout');
    }, 100);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-27T21:55:27.830

添加到 composer.json

```
"evandotpro/edp-module-layouts": "1.0" 
```

创建 /module/Application/view/layout/blank.phtml

```
<?php echo $this->content; 
```

将此添加到 /config/autoload/global.php

```
return array(
'module_layouts' => array(
    'ZfcUser' => 'layout/blank'
)); 
```

最后到 /module/Application/config/module.config.php

```
'view_manager' => array(

    'template_map' => array(

        //add this line
        'layout/blank' => __DIR__ . '/../view/layout/blank.phtml', 
```

# javascript - 如何从 asmselect 使用的多项选择中获取值？

> ID：16054198
> 
> 赞同：0
> 
> 时间：2013-04-17T07:34:55.370
> 
> 标签：javascript, jquery-ui, jquery, jquery-plugins

我的代码带有表格。我使用 javascript 函数 sub() 验证了这一点。当在 javascript 函数内验证成功时，我通过 $.POST 发布到 php 文件。我可以通过其 id 名称获取名称字段。但我无法获取城市，因为它具有多重价值。我正在使用 jquery asmselect 进行多项选择。谁能帮我获取城市的多个值。我按它的 id 试过，但没能做到。请帮助我......

我的 JavaScript 代码

```
<link rel="stylesheet" type="text/css" href="../jquery.asmselect.css" />
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="jquery.ui.js"></script>
<script type="text/javascript" src="jquery.asmselect.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("select[multiple]").asmSelect({
            addItemTarget: 'bottom',
            animate: true,
            highlight: true,
            sortable: true
        }); 
    }); 
</script>
<script type="text/javascript">
    function sub(){ 
        var udt;
        var name = document.getElementById('name').value;
        var cities = document.getElementById('cities').value;
        if(name!=""&&cities!=""){
            udt ="name="+name+"&cities="+cities;
            $.post( "submit.php", udt, function( data ) {
                window.location.href = "/"; 
            });
            return false;
        } else {
            alert("Please, Complete the Registration Form...");
            return false;   
        }   
    }   
</script> 
```

我的html代码如下

```
<form action="" onsubmit="return sub()" method="post">
    <input type="text" id="name" name="name"/>      
    <select id="cities" multiple="multiple" name="cities[]" title="Select City">
        <option>Paris</option>
        <option>San Diego</option>
        <option>San Francisco</option>
        <option>Vancouver</option>
    </select>
    <input type="submit" name="submit" value="submit" />
</form> 
```

请帮我解决我的问题。我找不到任何解决方案。所以我在这里发布这个问题，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:01:44.523

试试这个（添加你想要的任何分隔符）：

```
cities = '';
$("select[multiple] option:selected").each(function(){
    cities += $(this).val() + '|';
}); 
```

# image - Zend 形式：如何用超链接包围图像元素？

> ID：16054199
> 
> 赞同：0
> 
> 时间：2013-04-17T07:35:03.603
> 
> 标签：image, forms, zend-framework, href

如何用 HTML 标签包围 Zend 表单内的图像元素`<a href>`？我特别不想要 JS onClick()-Event，因为它在我的情况下似乎无法正常工作（请参阅问题[Zend: Redirect from form without validation](https://stackoverflow.com/questions/15862275/zend-redirect-from-form-without-validation)）。

这就是我在表单中添加图像元素的方式，现在超链接在图像旁边显示为文本“链接”：

```
 $this->addElement('image', 'btnBack', array (
        'name' => 'btnBack',
        'id'   => 'btnBack',
        'label' => '',
        'title' => 'Go back',
        'alt' => 'Go back',
        'src' => '/img/undo.png'
    ));
    $this->getElement('btnBack')
            ->setDescription('<a href="/admin/groupoverview">Link</a>')
            ->setDecorators(array(
                'ViewHelper',
                array('Description', array('escape' => false, 'tag' => false)),
                array('HtmlTag', array('tag' => 'dd')),
                array('Label', array('tag' => 'dt')),
                'Errors',
              )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:10:10.550

这听起来是个坏主意。从您的其他问题来看，您想要的只是一个指向特定 URL 的图像“按钮”。您不应该尝试使用图像输入来执行此操作，因为这是一种提交按钮，因此单击它将提交表单。如果您尝试使用 javascript 覆盖它或使用 HTML 链接包装整个内容，您就是在尝试解决错误的问题。

最简单的方法可能是使用按钮输入。然后，您可以使用 CSS 对其进行样式设置以使其看起来像图像，并添加您的 javascript onclick 操作以使其执行您想要的操作。由于 input type="button" 元素在默认情况下不会在单击时执行任何操作，因此您应该不会遇到以前遇到的任何问题。

```
$this->addElement('button', 'btnBack', array(
    'id'   => 'btnBack',
    'label' => 'Go back',
    'onclick' => "window.location='/admin/groupoverview'"
)); 
```

然后在您的样式表中（用正确的图像尺寸替换宽度和高度）：

```
#btnBack {
    background-image: url(/img/undo.png);
    width: 123px;
    height: 123px;
    border: 0;
    text-indent: -1000px;
    cursor: pointer;
} 
```

text-indent 将文本标签移出视图。如果您绝对不希望这些规则出现在您的样式表中，您可以通过传递样式属性将它们内联到表单元素中。

# android - 将位图值转换为 Imageview

> ID：16054203
> 
> 赞同：0
> 
> 时间：2013-04-17T07:35:13.467
> 
> 标签：android, bitmap, imageview

我正在通过 php 从 mysql 获取图像并使用 asyntask<> $b64image 获取它的值正在我的 android 代码中获取。

```
<?php

include("db.php");

include("database.php");

//header("Content-Type: image/jpeg");

$skt=$_REQUEST['clientsocket'];

$retrieve = SelectSingleRow("screendb"," clientsocket='$skt'","");

 $val=$retrieve['img'];

 $response["img_val"]=$val;

$b64image["base64_image"] = base64_encode($val);

echo json_encode($b64image); 
```

?>

我的 fetch 类是：它没有显示任何错误但没有显示图像。
在 strbase64_image 获得 $b64image 的值。

```
import java.util.ArrayList;
import java.util.HashMap;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONArray;
import org.json.JSONObject;

import android.app.Activity;
import android.app.AlertDialog;
import android.app.ProgressDialog;
import android.content.DialogInterface;
import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Base64;
import android.util.Log;
import android.view.ContextThemeWrapper;
import android.view.View;
import android.widget.EditText;
import android.widget.ImageView;

public class fetchimg extends Activity {
    int flag;
    int empid;
    String username;
    String password;
    ImageView imageView;
    EditText edUsername,edPassword;

    private ProgressDialog pDialog;

    JSONParser jParser = new JSONParser();
    JSONArray jarray;

    ArrayList<HashMap<String, String>> productsList;

    private static String url_faculty_login = "http://10.0.2.2/image/image_decode.php";
    private static final String TAG_EMPLOYEE = "employee_id";
    private static final String TAG_PID = "pid";
    private static final String TAG_NAME = "name";

    @Override
    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.showimage);
    //  setTitleColor(1);
        imageView=(ImageView) findViewById(R.id.imgView);

        Intent i=new Intent();

        edUsername=(EditText) findViewById(R.id.edUserName);
        edPassword=(EditText) findViewById(R.id.edPassword);
        String clear="clear";
        new LoadAllProducts().execute();

    }

    class LoadAllProducts extends AsyncTask<String, String, String> {
        private static final String Emp_id = "Emp_id";
        Bitmap bitmap;
        String strbase64_image;

        public String doInBackground(String... args) {
             username="port=1892";
        //   password=edPassword.getText().toString();

             List<NameValuePair> params = new ArrayList<NameValuePair>();

            params.add(new BasicNameValuePair("clientsocket", username));
        //  params.add(new BasicNameValuePair("Password", password));

            JSONObject json = jParser.makeHttpRequest(url_faculty_login, "GET", params);
            Log.d("base64image_encoded from php ", json.toString());

            strbase64_image=json.toString();

             bitmap =Base64ToImage(strbase64_image);

        return null;
    }
        public Bitmap Base64ToImage(String base64String) {
            byte[] imageAsBytes = Base64.decode(base64String.getBytes(),
                    Base64.DEFAULT);
            Bitmap mybitmap = BitmapFactory.decodeByteArray(imageAsBytes, 0,
                    imageAsBytes.length);
            return mybitmap;
        }
        @Override
        protected void onPostExecute(String result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            runOnUiThread(new Runnable() {

                @Override
                public void run() {
                    // TODO Auto-generated method stub
                    imageView.setImageBitmap(bitmap);

                }
            });

        }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:50:56.210

你`AsyncTask`的一切都搞砸了，因此为什么它不起作用。

你`doInBackground`没有返回任何东西，所以你`onPostExecute`永远不会被调用，并且你的返回类型不正确。

尝试改用这个：

```
class LoadAllProducts extends AsyncTask<Void, Void, Bitmap> {
        private static final String Emp_id = "Emp_id";
        Bitmap bitmap;
        String strbase64_image;

        protected Bitmap doInBackground(Void... args) {
            username = "port=1892";
            // password=edPassword.getText().toString();

            List<NameValuePair> params = new ArrayList<NameValuePair>();

            params.add(new BasicNameValuePair("clientsocket", username));
            // params.add(new BasicNameValuePair("Password", password));

            JSONObject json = jParser.makeHttpRequest(url_faculty_login, "GET",
                    params);
            Log.d("base64image_encoded from php ", json.toString());

            strbase64_image = json.toString();

            bitmap = Base64ToImage(strbase64_image);

            return bitmap;
        }

        private Bitmap Base64ToImage(String base64String) {
            byte[] imageAsBytes = Base64.decode(base64String.getBytes(),
                    Base64.DEFAULT);
            Bitmap mybitmap = BitmapFactory.decodeByteArray(imageAsBytes, 0,
                    imageAsBytes.length);
            return mybitmap;
        }

        protected void onPostExecute(Bitmap result) {

            // TODO Auto-generated method stub
            imageView.setImageBitmap(bitmap);

        }
    } 
```

在这里，您`doInBackground`返回检索`Bitmap`到`onPostExecute`的`ImageView`. 不需要使用`runOnUiThread`，因为 postExecute 已经在 UI 线程上运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:51:22.277

```
strbase64_image=json.toString(); 
```

应该 ：

```
strbase64_image=json.getString("base64_image"); 
```

如表格中`json`所示`JSONObject`

```
{"base64_image": "AAAAAAA(... some BASE64 content ...)"} 
```

因为它是由`json_encode`php 代码中的关联数组创建的

# python - 带有 C 扩展名的 Python 中的总线错误

> ID：16054204
> 
> 赞同：2
> 
> 时间：2013-04-17T07:35:16.133
> 
> 标签：python, c

最近我一直在编写带有 C 扩展名的 python 模块。（python2.7，gcc 4.1.2）一旦完成并进行测试。我发现以下总线错误。

有人知道为什么吗？

ps 在我收到此错误之前。我修复了中描述的“返回 Py_False 相关错误”

[应用程序在 c++ 中的 python 扩展函数中随机给出分段错误](https://stackoverflow.com/questions/14814490/application-gives-segmentation-fault-randomly-in-python-extension-functions-in-c)

核心是由`python2.7 app.py --debug=False --multi_slaves=True`

> 程序以信号 7 终止，总线错误。
> #0 0x0000003d22272cf1 in _int_malloc () from /lib64/libc.so.6
> (gdb) where
> #0 0x0000003d22272cf1 in _int_malloc () from /lib64/libc.so.6
> #1 0x0000003d22274e4e in malloc () from /lib64/libc.so .6
> #2 0x00000000004d3069 in _PyObject_GC_Malloc (basicsize= `<value optimized out>`) at Modules/gcmodule.c:1445
> #3 0x000000000046408c in PyType_GenericAlloc (type=0x768360, nitems=0) at Objects/typeobject.c:753
> #4 0x00000000004477ec in dict_new (type=0x3d225539e0 , args=, kwds=0x7fff8dcb4eb0) 在 Objects/dictobject.c:2301
> #5 0x00000000004661c3 in type_call (type=0x3d225539e0, args=0x2b3e5a521050, kwds=0x2239bca0) 在 Objects/typeobject.c:721
> #6 0x00000000004189cd in PyObject_Call (func=0x768360, arg=0x2b3e5a521050, kw=0x2239bca0) at Objects/abstract.c:2529

c扩展代码看起来像这样

```
static PyObject* analyze( PyObject *self, PyObject *args )
{
    int     ret;
    char*   in;

    // global variables : void* obj, char* outbuf, int outbuf_size;
    if (PyArg_ParseTuple(args, "s", &in)){
        ret = process(obj, in, outbuf, outbuf_size);
        if ( ret == SUCCESS ) {
            PyObject* py_out = PyString_FromString(outbuf);
            return py_out;
        } else {
            Py_INCREF(Py_False);
            return Py_False;
        }
    } else {
        Py_INCREF(Py_False);
        return Py_False;
    }
} 
```

~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-21T05:39:49.227

FWIW 我从 python 程序中得到一个总线错误。原来与它分配共享内存有关。我在 docker 容器中运行它，并且必须按照以下说明进行设置`docker run ... --shm_size=1g`： [https ://goblincoding.com/2018/02/19/docker-bus-error-no-space-left-on-device/](https://goblincoding.com/2018/02/19/docker-bus-error-no-space-left-on-device/)

# android - 如何检查用户是否已经在android应用程序中注册

> ID：16054206
> 
> 赞同：0
> 
> 时间：2013-04-17T07:35:18.103
> 
> 标签：android

我做了一个安卓应用程序。

现在在开始屏幕中，我只想检查用户是否已经注册的天气。如果他已注册，则应直接将其引导至联系屏幕，如果未注册，则应将其引导至注册屏幕。

主要问题是： -

当他/她打开他/她的应用程序时，无需从用户那里获取任何输入，我们就可以检查用户是否已经注册。

每部手机只能由 1 位用户使用应用程序。

类似的例子，比如 What'sApp 聊天，每部手机一个应用程序。所以请尽快指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:54:48.297

首先获取设备唯一标识ID

```
final TelephonyManager tm = (TelephonyManager)getBaseContext().getSystemService(Context.TELEPHONY_SERVICE);

    final String tmDevice, tmSerial, androidId;
    tmDevice = "" + tm.getDeviceId();
    tmSerial = "" + tm.getSimSerialNumber();
    androidId = "" + android.provider.Settings.Secure.getString(getContentResolver(), android.provider.Settings.Secure.ANDROID_ID);

    UUID deviceUuid = new UUID(androidId.hashCode(), ((long)tmDevice.hashCode() << 32) | tmSerial.hashCode());
    String deviceId = deviceUuid.toString(); 
```

在清单文件中：

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

在您的服务器数据库上注册它。
在启动时检查您的服务器数据库是否已经注册了唯一标识符 ID。
如果是，进入联系屏幕，如果不是，进入注册屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:43:25.773

我无法完全回答您的问题，但根据我的理解有解决方案。

使用下面给定的android ID并将其发送到服务器，它将检查此ID并返回响应，如果未注册并重定向到注册屏幕。

```
private String android_id = Secure.getString(getContext().getContentResolver(),
                                                        Secure.ANDROID_ID); 
```

我认为这是这样做的方法，因为如果您在注册页面上设置 sharedPreferences 将无法帮助您在另一台设备上跟踪这是新设备或用户。

希望这能解决您的问题...

# c++ - 涉及模板化转换运算符和隐式复制构造函数的歧义

> ID：16054212
> 
> 赞同：22
> 
> 时间：2013-04-17T07:35:33.213
> 
> 标签：c++, templates, c++11, overload-resolution, conversion-operator

clang 和 gcc 在以下代码的行为上有所不同：

```
struct foo
{
    foo(int);
};

struct waldo
{
    template <typename T>
    operator T();
};

int main()
{
    waldo w;
    foo f{w};
} 
```

这段代码被 clang 接受，`foo(int)`并调用了构造函数。但是，gcc 抱怨`foo(int)`构造函数与隐式生成的复制和移动构造函数之间存在歧义：

```
test.cpp: In function 'int main()':
test.cpp:15:12: error: call of overloaded 'foo(<brace-enclosed initializer list>)' is ambiguous
     foo f{w};
            ^
test.cpp:15:12: note: candidates are:
test.cpp:3:5: note: foo::foo(int)
     foo(int);
     ^
test.cpp:1:8: note: constexpr foo::foo(const foo&)
 struct foo
        ^
test.cpp:1:8: note: constexpr foo::foo(foo&&) 
```

谁是对的？

有趣的是，如果`foo f{w}`更改为`foo f(w)`（注意从大括号更改为括号），gcc 和 clang 都会出错。这让我希望 gcc 对上述示例的行为（即给出错误）是正确的，否则初始化的`()`和`{}`形式之间会出现奇怪的不一致。

**编辑**：按照**Kerrek SB**的建议，我尝试`delete`了复制构造函数`foo`：

```
struct foo
{
    foo(int);
    foo(const foo&) = delete;
}; 
```

行为保持不变。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T09:19:10.250

对于列表初始化，如果列表的元素有一个元素（此处为`w`），并且考虑了具有参数“对 const/volatile X 的引用”的类的构造`X`函数，则不考虑用户定义的转换。所以不能同时使用的复制和移动构造函数`foo`。所以`foo(int)`构造函数是明确选择的。

所以 Clang 在这里是正确的。

编辑：对于这里的标准人员，请参阅 13.3.3.1p4

# r - 由因子变量嵌套的表 - 如何正确 Sweave？

> ID：16054213
> 
> 赞同：1
> 
> 时间：2013-04-17T07:35:34.480
> 
> 标签：r, sweave, xtable

我想将 R 脚本中的矩阵表转换为 LaTeX 文档。我有结果，我需要从中选择一些值来组成类似于此的矩阵：

```
(for i in levels(groups)){

mat[[i]] <- matrix(item1[i],item2[i],
                   item3[i],item4[i],
                   nrow=2,ncol=2,byrow=T)
dimnames(mat[[i]]) <- input.labels
} 
```

然后我将此对象垫保存为 rda 文件，在 Rnw 文件中读取它并尝试使用 xtable 将其编织到 LaTeX 文档中。我想拥有它，以便有一个具有如下结构的表：

```
 header1  header2
groups[1]   header1   item1[1] item2[1]
            header2   item3[1] item4[1]
groups[2]   header1   item1[2] item2[2]
            header2   item3[2] item4[2]
groups[3]   header1   item1[3] item2[3]
            header2   item3[3] item4[4] 
```

一直到组因素的最后一个成员。我已经尝试了几种方法来完成这项工作，但我还没有找到一个整洁的方法。有人有建议吗？

干杯，

安蒂

# html - Chrome 中有趣的 HTML 行为

> ID：16054214
> 
> 赞同：1
> 
> 时间：2013-04-17T07:35:35.527
> 
> 标签：html, css, google-chrome

我有以下 DOM 结构：

```
<li>
    <div id="some_id_1">-some html-</div>
</li> 
```

有`<li>`一个图像作为背景，并且在`<div>`右上角显示为一个控制框`<li>`。

是向右浮动的`<div>`，应该显示在右侧。

当我刷新页面（在 Chrome 中）时，`<div>`显示在靠近中间的位置`<li>`（如左图所示）。

当我打开 Chrome 的开发人员工具并更改 的不透明度（或任何其他 css 属性）时`<div>`，它会向右移动（如右图所示）。

我尝试清除 Chrome 的缓存，但没有奏效。

任何可能导致此问题的 Chrome 特定问题？（该页面在 Firefox 中运行良好。）

![在此处输入图像描述](https://i.stack.imgur.com/QcpSs.png) ![截屏](https://i.stack.imgur.com/XkGuS.png)

CSS：

```
li {
 position:relative;
}
div {
 position:absolute;
 width:40px;
 float:right;
 margin:0px;
} 
```

（所有其他属性与字体/颜色有关）

更新：margin-right:0px 似乎已经解决了问题，但我仍然很困惑为什么改变不透明度会移动 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:42:31.307

你有没有尝试过`margin-right:0px;`

如果你使用`float:right;`try:`clear:both;` 你的 CSS 是什么？很难以这种方式帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:39:43.150

如果您`position:absolute`用于放置 div，请确保 li 有`position:relative`

```
li{
    list-style:none;
    position:relative;
    display:inline-block;

}
div{
    position:absolute;
    right:0;
    width:40px;
    background:#333; 
    color:white;
    border-radius:4px
} 
```

**[演示](http://jsfiddle.net/GG2Da/4/)**

# php - SQL Server 错误 1934 发生在 INSERT 到具有计算列 PHP/PDO 的表中

> ID：16054217
> 
> 赞同：7
> 
> 时间：2013-04-17T07:35:55.827
> 
> 标签：php, sql-server, pdo, freetds

在 SQL Server 2005 中将计算列添加到表后，我收到以下消息`INSERT`，仅通过 PHP（使用 PDO）它在 SQL Server Managment Studio 中运行良好。

为了确保一切正确，我使用 SQL Server Profiler 设置跟踪并将 INSERT 语句复制/粘贴到 SQL Server Managment Studio 中。它在 SSMS 中运行良好，但在 PHP 中继续失败。

> 添加联系人时出错：SQLSTATE [HY000]：一般错误：1934 一般 SQL Server 错误：检查来自 SQL Server [1934] 的消息（严重性 16）[（null）]

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-17T07:35:55.827

原来问题与 SET 参数有关。我使用了从[Here](http://www.mssqltips.com/sqlservertip/1415/determining-set-options-for-a-current-session-in-sql-server/)获得的以下代码。确定在 SQL Server Management Studio 中设置了哪些选项（插入工作的地方）。然后在我的插入语句之前将它们中的每一个放在一个 exec 中会导致事情再次起作用。我不需要保留所有选项，所以下面我展示了使其工作所需的选项。

```
DECLARE @options INT
SELECT @options = @@OPTIONS

PRINT @options
IF ( (1 & @options) = 1 ) PRINT 'DISABLE_DEF_CNST_CHK' 
IF ( (2 & @options) = 2 ) PRINT 'IMPLICIT_TRANSACTIONS' 
IF ( (4 & @options) = 4 ) PRINT 'CURSOR_CLOSE_ON_COMMIT' 
IF ( (8 & @options) = 8 ) PRINT 'ANSI_WARNINGS' 
IF ( (16 & @options) = 16 ) PRINT 'ANSI_PADDING' 
IF ( (32 & @options) = 32 ) PRINT 'ANSI_NULLS' 
IF ( (64 & @options) = 64 ) PRINT 'ARITHABORT' 
IF ( (128 & @options) = 128 ) PRINT 'ARITHIGNORE'
IF ( (256 & @options) = 256 ) PRINT 'QUOTED_IDENTIFIER' 
IF ( (512 & @options) = 512 ) PRINT 'NOCOUNT' 
IF ( (1024 & @options) = 1024 ) PRINT 'ANSI_NULL_DFLT_ON' 
IF ( (2048 & @options) = 2048 ) PRINT 'ANSI_NULL_DFLT_OFF' 
IF ( (4096 & @options) = 4096 ) PRINT 'CONCAT_NULL_YIELDS_NULL' 
IF ( (8192 & @options) = 8192 ) PRINT 'NUMERIC_ROUNDABORT' 
IF ( (16384 & @options) = 16384 ) PRINT 'XACT_ABORT' 
```

以下是我最终需要的选项：

```
$dbPDO->exec("SET ANSI_WARNINGS ON");                                                                               
$dbPDO->exec("SET ANSI_PADDING ON");
$dbPDO->exec("SET ANSI_NULLS ON");
$dbPDO->exec("SET QUOTED_IDENTIFIER ON");
$dbPDO->exec("SET CONCAT_NULL_YIELDS_NULL ON"); 
```

更新：似乎 FK 约束导致了以下错误。上面也修复了这个错误。

> SQLSTATE [HY000]：一般错误：8624 一般 SQL Server 错误：检查来自 SQL Server 的消息 [8624]（严重性 16）[（null）]

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-26T09:46:17.610

在@kackleyjm 回答之后，我尝试激活尽可能少的选项。

我最终得到：

```
SET ANSI_WARNINGS ON
SET ANSI_PADDING ON
SET CONCAT_NULL_YIELDS_NULL ON 
```

这对我有用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-25T11:54:53.957

我发现当您在`sql server`. 我发现这个问题与表中的索引问题有关。查看

```
`IF (SELECT SESSIONPROPERTY('ARITHABORT')) = 0 and SET ARITHABORT ON;` 
```

在程序主体的顶部。这将解决`"1934"`错误。

# amazon-mws - 将有害材料信息发布到亚马逊 MWS

> ID：16054221
> 
> 赞同：1
> 
> 时间：2013-04-17T07:36:14.573
> 
> 标签：amazon-mws

我们正在使用 MWS 服务在亚马逊市场上创建/更新商品。除了我们无法通过 XML 发送物品的危险物品信息外，一切正常。

我们应该将哪些 XML 字段用于危险材料信息？

示例供稿：

```
<?xml version="1.0" ?>
<AmazonEnvelope xmlns:xsi="http://www.w3.org/2001/XMLSchema
-
instance" xsi:noNamespaceSchemaLocation="amzn
-
envelop
e.xsd">
<Header>
<DocumentVersion>1.01</DocumentVersion>
<MerchantIdentifier>M_SELLER_354577</MerchantIdentifier>
</Header>
<MessageType>Product</MessageType>
<PurgeAndReplace>true</PurgeAndReplace>
<Message>
<MessageID>1</MessageID>
<Op
erationType>Update</OperationType>
<Product>
<SKU>1Z
-
500ABR
-
FLAT</SKU>
<ProductTaxCode>A_GEN_TAX</ProductTaxCode>
<LaunchDate>2005
-
07
-
26T00:00:01</LaunchDate>
<DescriptionData>
<Title>Lyric 500 tc Queen Flat Sheet, Ivory</Title>
<Brand>Peaco
ck Alley</Brand>
<Description>Lyric sheeting by Peacock Alley is the epitome of simple and classic</Description>
<BulletPoint>made in Italy</BulletPoint>
<BulletPoint>500 thr
ead count</BulletPoint>
<BulletPoint>plain weave (percale)</BulletPoint>
<BulletPoint>100% Egyptian cotton</BulletPoint>
<Manufacturer>Peacock Alley</Manufacturer>
<SearchTerms>bedding</SearchTerms>
<SearchTerms>Sheets</SearchTerms>
<Item
Type>flat
-
sheets</ItemType>
<IsGiftWrapAvailable>false</IsGiftWrapAvailable>
<IsGiftMessageAvailable>false</IsGiftMessageAvailable>
<RecommendedBrowseNode>60583031</RecommendedBrowseNode>
<RecommendedBrowseNode>60576021<
/RecommendedBrowseNode>
</DescriptionData>
<ProductData>
<Home>
<Parentage>variation
-
parent</Parentage>
<VariationData>
<VariationTheme>Size
-
Color</VariationTheme>
</VariationData>
<Material>cotton</Material>
<
ThreadCount>500</ThreadCount>
</Home>
</ProductData>
</Product>
</Message>
<Message>
</AmazonEnvelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T23:02:59.530

XSD 中有几个字段处理危险材料

1.  有`<EUcompliance>`标签，但根据 XSD，只能使用它*而不是*它对`<Home>`我没有任何意义。有关详细信息，请查看 Products.xsd 和 EUcompliance.xsd

2.  里面有`<HazmatItem>`s，`<FBA>`但`<ToysBaby>`它们与上面的命运相同。有关详细信息，请查看 amzn-base.xsd 的定义以及 FBA.xsd 和 ToysBaby 的使用。我不知道为什么两者都不适用于其他产品类型，但是，嘿，这就是他们的 XSD 所说的，这不是我第一次对亚马逊的架构设计师的想法感到困惑......所以你只剩下

3.  把它放在`<OtherItemAttributes>`对所有产品类型都有效的地方。它会介于`</ItemType>`和之间`<IsGiftWrapAvailable>`。有关详细信息，请查看 products.xsd

我不知道您为什么要在提要中包含危险品信息，但这就是我要放的地方。（顺便说一句，你最后有一个额外的标签，不应该在那里）

# sharepoint - 此计算机上未安装 SharePoint 服务器

> ID：16054229
> 
> 赞同：2
> 
> 时间：2013-04-17T07:36:40.170
> 
> 标签：sharepoint, sharepoint-2010, web-parts, sharepoint-designer, sharepoint-2013

我是 SharePoint 的新手，我正在使用 SharePoint 2013。我在一台服务器上安装了 SharePoint Server 2013，我想从 vs 2010 创建 Web 部件。但是我的 vs 2010 存在于不同的电脑上，我收到以下错误。

```
"A SharePoint server is not installed on this computer” in SharePoint 2013". 
```

我在网上搜索并找到了一些链接。我已使用以下链接创建 Web 部件。

链接：[http ://sharepointcustomization.blogspot.in/2012/10/sharepoint-server-is-not-installed-on.html](http://sharepointcustomization.blogspot.in/2012/10/sharepoint-server-is-not-installed-on.html)

因此，我完成了以下 chagnes 来创建 Web 部件。

1.  我有将整个注册表项复制到我的本地电脑。
2.  将 C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\15\ISAPI 中的 SharePoint dll 从 sharepoint 服务器复制到本地计算机。
3.  使用以下命令将必要的共享点 dll 复制到 GAC。

    c:\Program Files\Microsoft Visual Studio 10.0\VC> gacutil.exe -i "c:\Microsoft.SharePoint.dll"

4.  我重新启动了我的电脑并收到与 sharepoint 2013 中的“此计算机上未安装 SharePoint 服务器”相同的错误。

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:37:27.660

据我所知，您需要 Visual Studio 2013 来开发 SharePoint 2013 应用程序。

只有一件事，如果您正在创建共享点应用程序，您不需要完成链接中的所有步骤。只需转到[此页面](http://msdn.microsoft.com/en-us/office/apps/fp123627.aspx)并下载 napa 开发工具。

正如其他人所说，在未安装 SharePoint 的服务器上开发场解决方案并不是一个好主意。您实际上是在自找麻烦，老实说，如果不进行调试，真的很难产生任何东西。

只是我的五分钱。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:03:54.563

根据我的经验，最好在本地安装 SharePoint 以用于开发目的。我强烈建议您将开发环境虚拟化为 cod

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:39:44.587

AFAIK，您需要将 Visual Studio 与 SharePoint Server 一起安装（在您的情况下，必须在您的服务器中安装 VS2010）。看来您和这个人有同样的问题，请查看 Eric Herlitz 回答[SharePoint 2010 Development with Visual Studio](https://stackoverflow.com/questions/10529917/sharepoint-2010-development-with-visual-studio)，因为其他答案仅适用于在您的 pc 中安装 sharepoint 或在您的 sharepoint 服务器中安装 vs2010。您只能使用 Rest API 和/或 ClientContext API 或外部连接器。

# winforms - 取消选择 DataGridView 行

> ID：16054230
> 
> 赞同：0
> 
> 时间：2013-04-17T07:36:40.293
> 
> 标签：winforms, c++-cli

我正在使用 C++/CLI Windows 窗体应用程序。

我有一个 DVG，我想通过单击 DVG 的空白区域来取消选择行。我尝试了几种方法，但都没有奏效。1)

```
System::Void Form1::dataGridView1_MouseDown(System::Object^  sender, System::Windows::Forms::MouseEventArgs^  e) 
    {
        if (e->Button == System::Windows::Forms::MouseButtons::Left)
        {
            if (dataGridView1->HitTest(e->X, e->Y)->Equals(DataGrid::HitTestInfo::Nowhere))
            {
                dataGridView1->ClearSelection();
            }
        }
    } 
```

2）这个变体导致错误（错误1错误C3063：运算符'=='：所有操作数必须具有相同的枚举类型））

```
if (e->Button == System::Windows::Forms::MouseButtons::Left)
        {
            if ((dataGridView1->HitTest(e->X, e->Y)->Type) == DataGrid::HitTestType::None)
            {
                dataGridView1->ClearSelection();
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:21:42.467

您的变量的名称是`dataGridView1`. 这对我来说意味着您使用的是[`DataGridView`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.aspx)，而不是[`DataGrid`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagrid.aspx)。您应该使用[`DataGridView::HitTestInfo::Nowhere`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.hittestinfo.nowhere.aspx)而不是`DataGrid::HitTestInfo::Nowhere`，而[`DataGridViewHitTestType`](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewhittesttype.aspx)不是`DataGrid::HitTestType`。

在您的第一个示例中，您将 a`DataGridView::HitTestInfo`与`DataGrid::HitTestInfo::Nowhere`. 您正在调用该`Equals(object, object)`方法，因此它是有效的代码行，但它们是永远不会返回相等的不同类，这就是选择永远不会被清除的原因。

在您的第二个示例中，您将 a`DataGridViewHitTestType`与 a进行比较`DataGrid::HitTestType`，这将生成编译器错误。

# mysql - 将现有 Rails 数据库转换为种子数据文件

> ID：16054231
> 
> 赞同：3
> 
> 时间：2013-04-17T07:36:44.390
> 
> 标签：mysql, ruby-on-rails

是否可以从现有的 mysql 数据库构建种子数据文件？

我知道如何使用现有数据库中的所有表填充新数据库。我很好奇是否可以从数据库构建种子文件（seed.rb）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:52:07.760

试试这个[https://github.com/ludicast/yaml_db](https://github.com/ludicast/yaml_db)

应该提供你正在寻找的所有能力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:50:22.503

有[一些 gem](http://www.plugingeek.com/categories/activerecord-seeds-ruby)用于从现有数据库中提取种子。例如，您可以尝试[**seed_dump**](http://www.plugingeek.com/repos/zenprogrammer/seed_dump)。

# java - 解析Android / Java SoapObject返回数据的最佳方式

> ID：16054233
> 
> 赞同：0
> 
> 时间：2013-04-17T07:36:50.173
> 
> 标签：java, android

我从 SoapObject (Android / Java) 返回了一些数据

```
final SoapObject result=(SoapObject)envelope.getResponse();
SoapObject so = (SoapObject) result.getProperty(0); 
```

这是数据的样子：

> anyType{DocumentElement=anyType{Tabela=anyType{WER=1; TYU=0；NNN=0；ABC=0；BBB=纳波耶；}; Tabela=anyType{WER=201; TYU=0；NNN=0；ABC=0；BBB=酒精孔；}; Tabela=anyType{WER=501; TYU=0；NNN=0；ABC=0；BBB=比萨饼；}; Tabela=anyType{WER=601; TYU=0；NNN=0；ABC=0；BBB=Desery; };

我应该解析它（就像一个带有正则表达式的字符串）或者我可以用更好的方式来做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:40:30.783

我创建了一个用于解析 SOAP 响应的演示应用程序。此外，如果您想将 SOAP 响应转换为 XML 响应并进行解析，也可以这样做。[从我的 github 源代码中](https://github.com/lalit3686/SOAPExample/blob/master/src/com/soap/SoapHelper.java)查看我的示例

# excel - EXCEL - 打开 Excel 工作簿时出错

> ID：16054236
> 
> 赞同：1
> 
> 时间：2013-04-17T07:37:06.330
> 
> 标签：excel, excel-2007, xlsx, vba

我有 Office 2007。每次启动 Excel 或打开现有文件时，它都会尝试访问一些旧文件，并弹出以下错误：

找不到“E:\xyz.txt”。检查文件名的拼写，并验证文件位置是否正确。如果您尝试从最近使用的文件列表中打开该文件，请确保该文件未被重命名、移动或删除。

请帮助解决这个问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:43:46.493

也许您有一个旧的加载项仍然有效？开发人员 > 加载项

如果您看到任何自定义加载项，请停用它们并查看问题是否仍然存在。

或者，您可以在 VBA 窗口中检查哪些 xla / xlam 文件处于活动状态，并查看您提到的文件是否隐藏在其代码中的某处

# shell - 使用 shell 脚本在特定文件中添加一行

> ID：16054237
> 
> 赞同：0
> 
> 时间：2013-04-17T07:37:09.027
> 
> 标签：shell, search, add, filenames

您能否建议我执行以下操作的 shell 脚本：我需要搜索文件名包含特定字符串的文件，例如。搜索名称包含子字符串“_ww.txt”的所有文件。然后对这些文件，我需要在顶部添加注释“#found 文件”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:43:16.463

干得好：

```
 find . -name "*_ww.txt" -printf "#found\n%p\n" 
```

# angularjs - 使用加载选项初始化选择框，然后在加载模型时清除

> ID：16054238
> 
> 赞同：1
> 
> 时间：2013-04-17T07:37:10.567
> 
> 标签：angularjs

我有一个选择框，我在加载时使用 JSON 请求加载表单。由于 angularjs 可能需要一些时间来加载数据，我在其中添加了一个临时选项：

```
<option value="">Loading...</option> 
```

一旦我的模型被加载，我想做的事情就很清楚了。当前发生的情况是，它只是将列表附加到选择框，然后将`Loading...`选项留在那里作为选择#0。

我相信默认行为只是追加，而不是替换。我该怎么做呢？对于这个特定问题，我似乎找不到任何示例。

这是一个小插曲：http://plnkr.co/edit/zRQCPrMzvN8Rcg8ZyTu0? [p =preview](http://plnkr.co/edit/zRQCPrMzvN8Rcg8ZyTu0?p=preview)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:09:07.980

使用 Angular 很容易做到这一点。

您所要做的就是将默认选项数据绑定到一个变量，并在 http 调用通过时更改该变量。这是一个证明相同的plunk。

[http://plnkr.co/edit/Vn4L5boLodSi6puzM6gh](http://plnkr.co/edit/Vn4L5boLodSi6puzM6gh)

# restructuredtext - 用 reST 编写几个遵循相同链接的文本

> ID：16054239
> 
> 赞同：0
> 
> 时间：2013-04-17T07:37:12.067
> 
> 标签：restructuredtext

以下 reST 无法按预期工作。我怎样才能做到正确？

```
Only the word python_ in this text is linked. What to do if 
I want using other words such as `like it <python_>`_ to jump
to the same link?

.. _python: http://www.python.org 
```

谢谢你的帮助！

静音

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T18:35:43.957

据我所知，这并不是一个很好的文档，但 OP 的方法应该可以工作。我已经在 cygwin 上使用 rst2html.py (v 0.11) 和 Sphinx (v 1.2b1) 测试了以下输入。两者都生成指向 CNN 站点的正确超链接。

```
* According to `CNN <http://www.cnn.com/>`_ the economy...
* According to `The Amazing Cable News Network`_ the economy...
* According to the  `Cable News Network <CNN_>`_ the economy...

.. _The Amazing Cable News Network: CNN_
.. CNN: http://www.cnn.com/ 
```

第二种形式是@Ajay 建议的，虽然对我来说必须创建另一个别名来获取你想要的文本似乎很奇怪，但第三种形式似乎是 OP 正在寻找的并且据我所知它有效美好的。第三种形式也适用于文档中的内部链接。

# sorting - 带有文本和数字的 MSAccess 排序列

> ID：16054241
> 
> 赞同：0
> 
> 时间：2013-04-17T07:37:36.387
> 
> 标签：sorting, ms-access, text, numbers

我需要对我的 Access2010 查询中的列进行正确排序。它是一个文本列，其中包含带有“CRMPPC1”之类的数字的字符串。列中的文本长度可能会有所不同。

当我对此进行排序时，它看起来像

```
CRMPPC1
**CRMPPC10**
CRMPPC2
CRMPPC3
CRMPPC4
.... 
```

但我需要的是

```
CRMPPC1
CRMPPC2
CRMPPC3
CRMPPC4
....
**CRMPPC10** 
```

任何人都可以帮助我（最好使用 SQL）吗？我尝试了各种方法，如 VAL、CAST 等，但到目前为止没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:16:21.523

如果文本前缀中的字符数是可变的那么我认为没有纯粹的Access SQL解决方案，而是VBA函数

```
Public Function ExtractNumber(textString As Variant) As Long
Dim s As String, i As Long
s = Nz(textString, "")
For i = 1 To Len(s)
    Select Case Mid(s, i, 1)
        Case "0" To "9"
            Exit For
    End Select
Next
If i > Len(s) Then
    ExtractNumber = 0
Else
    ExtractNumber = Val(Mid(s, i))
End If
End Function 
```

将允许您使用这样的查询

```
SELECT textTest.*
FROM textTest
ORDER BY ExtractNumber([textColumn]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-21T21:13:32.270

尝试使用此“hack”进行自然顺序排序。它仅适用于两个字符，但您当然可以对其进行更多修改。

'''' 仅适用于末尾的最后两个字符数字。如果你有三个数字，它将打破'''''''

函数 PadNumberForNatSort(strToMod) 作为字符串

```
If IsNumeric(Right(strToMod, 1)) = True Then
    If IsNumeric(Mid(strToMod, Len(strToMod), 1)) = True And IsNumeric(Mid(strToMod, Len(strToMod) - 1, 1)) = True Then
        PadNumberForNatSort = strToMod
    Else
        PadNumberForNatSort = Mid(strToMod, 1, Len(strToMod) - 1) & "0" & Mid(strToMod, Len(strToMod), 1)
    End If
Else
    PadNumberForNatSort = strToMod
End If 
```

结束功能

在您的 SQL 中： ORDER BY PadNumberForNatSort([column_name])

# php - 在我的情况下，SQL 执行速度很慢

> ID：16054250
> 
> 赞同：0
> 
> 时间：2013-04-17T07:38:32.413
> 
> 标签：php, sql

我的代码有问题，这是我连接数据库、选择一些唯一数据并从另一个表中对这些唯一数据求和的代码，我的代码没有问题，没关系，但是查询需要很长时间。

```
<?php
include "koneksi.php";

$no=1;
$arqury=odbc_exec($koneksi, "SELECT DISTINCT NIP_AR,NAMA_AR FROM USRBPS.MASTERFILE");
while($ar=odbc_fetch_array($arqury)){
    $total=0;
    $ambilqury=odbc_exec($koneksi, "SELECT NPWP FROM USRBPS.MASTERFILE WHERE NIP_AR='$ar[NIP_AR]'");
    while($ambil=odbc_fetch_array($ambilqury)){
        $testqury=mysql_query("SELECT SUM(jumlah_bayar) as PENERIMAAN FROM mpnruteng WHERE npwp='$ambil[NPWP]'");
        $test=mysql_fetch_array($testqury);
        $total += $test[PENERIMAAN];
    }

    if($ar[NIP_AR]==""){
        echo "<tr><td>$no</td><td colspan=2>UNASSIGN</td><td>$total</td>";
    }
    else{
        echo "<tr><td>$no</td><td>$ar[NAMA_AR]</td><td>$ar[NIP_AR]</td><td>$total</td></tr>";
    }
    $no++;
}

?> 
```

on简直就是这样，

```
|Name   |num_se
---------------
|andre  |1111
|john   |2222
|simon  |3333
|andre  |4444
|andre  |5555
|simon  |6666
|john   |7777

|num_se |Total
---------------
|1111   |12
|2222   |15
|3333   |10
|4444   |8
|5555   |20
|6666   |18
|7777   |22 
```

所以，我需要的是从每个“名称”中获取“总计”的总和。我想要得到的是名称“唯一”的列表（在这个例子中是安德烈、约翰和西蒙）以及从 num_se 获得的“总”的每个总和。

对不起，我的英语不好，但我希望你能理解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:43:27.587

如果我理解正确，此查询可能会有所帮助

```
SELECT t1.Name, sum(t2.Total) 
FROM (table1 t1 LEFT JOIN table2 t2 ON t1.num_se = t2.num_se)
GROUP BY t1.Name 
```

根据您的情况修改表名和列名。

**更新**

我不知道你为什么使用两个分开的数据源。但是，我认为这种方法会提高代码的效率。

首先，通过此查询获取所有`num_se`属于每个的列表：`name`

```
"SELECT Name, GROUP_CONCAT(num_se) as nums FROM table1 GROUP BY Name" 
```

现在你的结果数组（'$ar'）将有一个像这样的元素和`"1111,2222"`键`nums`

其次，使用此查询获取每个的总和`name`

```
"SELECT SUM(Total) as total FROM Table2 WHERE num_se IN (" . $ar['nums'] . ")" 
```

您将获得`total`for each`name`而无需第二个循环。

请记住使用转义技术来确保您的查询是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:01:45.460

解释一下您正在针对两个单独的数据源工作是相关的。

这很慢，因为您试图在 PHP 中遍历您的结果集，调用单个查询以从另一个表返回单行，这是非常低效的。

让数据库使用 a 来处理两个相关表之间的关系`JOIN`，然后让它处理总计的聚合，而不仅仅是单个总计。

以下查询将获得每对不同的 nip_ar 和 nama_ar 的总数：

```
SELECT 
  t1.NIP_AR,
  t1.NAMA_AR,
  SUM(t2.jumlah_bayar) as PENERIMAAN

FROM 
  USRBPS.MASTERFILE t1

  INNER JOIN mpnruteng t2
  ON t2.npwp = t1.npwp

GROUP BY
  1, 2 
```

但无论如何，你要把它卷成一个盛大的`$total`，所以这将为你得到：

```
SELECT 
  SUM(PENERIMAAN) as PENERIMAAN

FROM 
  (
     SELECT 
       t1.NIP_AR,
       t1.NAMA_AR,
       SUM(t2.jumlah_bayar) as PENERIMAAN

     FROM 
       USRBPS.MASTERFILE t1

       INNER JOIN mpnruteng t2
       ON t2.npwp = t1.npwp

     GROUP BY
       1, 2
  ) 
```

您可以从 Oracles 服务器配置到您的 mySql 服务器的链接。请参阅[使用异构服务代理 - 第 4 章。设置对非 Oracle 系统的访问](http://docs.oracle.com/cd/B19306_01/server.102/b14232/admin.htm#sthref152)。我的理解是你不能从 mySql 链接到 Oracle。

这将允许您在 Oracle 实例上运行上述查询。尽管您需要更新表名以使用数据源名称完全限定它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:40:54.530

如果您使用的是 Windows，我注意到使用 localhost 而不是 127.0.0.1 会减慢与数据库的连接速度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:50:32.687

在给出任何解决方案之前，我想分享一下您的查询太慢的原因。如果您仔细查看您的代码，您正在为第一个查询结果中的到达记录打开数据库连接。主要成本是打开和运行对数据库的查询。所以想象一下，如果您在第一个结果中有 1000 条记录，您将打开数据库连接 1000 次，这将使其非常缓慢。使用 Trung 所述的内部联接或子查询。或者，如果无法使用存储过程并将逻辑放在 SP 中也将帮助您获得性能。创建一个存储过程并将输入参数作为逗号分隔的 Ids 传递给您从另一个数据库获得的内容，在 SP 内部使用逗号将 ID 分隔到任一循环并执行 select 语句。您可以使用临时表来执行此操作。

# php - 在 smarty 中访问静态变量

> ID：16054251
> 
> 赞同：0
> 
> 时间：2013-04-17T07:38:42.437
> 
> 标签：php, smarty

我有课谢尔顿

```
Class sheldon
{
  public static $text = 1
} 
```

在smarty中，我试图访问这个变量，比如

```
~$sheldon::$text` 
```

但它不起作用，它给了我错误“语法错误：无法识别的标签：”

我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:52:21.210

```
{assign var=foo value=sheldon::$text}
{$foo} 
```

# c++ - C++：全局结构

> ID：16054254
> 
> 赞同：0
> 
> 时间：2013-04-17T07:39:09.757
> 
> 标签：c++, struct, global

与使用全局变量一样，

```
const double GRAVITY = 9.81;

int main(){} 
```

我想使用全局结构

```
typedef struct {
    double gravity;
} WorldConfig;

WorldConfig WC;
WC.gravity = 9.81;

int main(){} 
```

但这不会编译（“WC”没有命名类型）。

有没有办法做到这一点，或者，为什么使用全局结构是一个非常糟糕的主意？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:44:48.620

是的，*初始化*全局变量：

```
struct WorldConfig
{
    double gravity;
};

WorldConfig WC = { 9.82 };

int main() { } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T07:46:03.577

在 C++ 中，您不需要`typedef`，这不是 C。此外，您需要`gravity`在初始化程序中设置成员：

```
struct WorldConfig {
    double gravity;
} WC = {9.81}; 
```

但是，对于这样的常量，您可能希望它们*真正*保持不变，因此您可以这样做：

```
struct WorldConfig
{
    static constexpr double gravity = 9.81; // requires C++11
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:47:12.943

另一种解决方案是：

在您的标题中：

```
struct WC
{
   static const double g;
}; 
```

在您的源文件中：

```
const double WC::g = 9.81; 
```

请注意，匿名 struc 和 typedef 使用是 C 风格，而不是 C++。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:04:45.620

即使你把它放在一个类或结构的范围内，如果它是静态的，它仍然是一个全局的。

将它放在结构中将在元编程世界中很有用，即

```
struct Earth
{
   static const double gravity;
};

struct Mars
{
   static const double gravity;
};

// pseudo code
template< typename PLANET >
someFuncOrClass
{
     using PLANET::gravity;
} 
```

这在编译时得到解决（与使 Planet 成为具有重力属性的类相比）。

显而易见的替代范围选项是名称空间。

```
namespace WC
{
     static double gravity;
} 
```

# javascript - jQuery 等价于 css 选择器 progress::-webkit-progress-value

> ID：16054255
> 
> 赞同：2
> 
> 时间：2013-04-17T07:39:11.873
> 
> 标签：javascript, jquery, selector, css-transitions, progress

我需要`<progress>`使用 JS (jQuery) 调整 HTML5 -Bar 的转换时间，但我在 jQuery 中找不到正确的选择器。

我目前的尝试：

`CSS`：

```
progress::-webkit-progress-value {
    -webkit-transition: all 0.5s;
    -moz-transition: all 0.5s;
    -o-transition: all 0.5s;
    -ms-transition: all 0.5s;
    transition: all 0.5s; /* Works like a charm */
} 
```

`JavaScript`（没有成功）：

```
// These lines do nothing when the progress value changes:
$(".progressSelectorClass[progress-value]").css({"-webkit-transition" : "all 6s"}); 
$(".progressSelectorClass > *").css({"-webkit-transition" : "all 6s"}); 
$(".progressSelectorClass").css({"-webkit-transition" : "all 6s"});

// This gets an error:
$(".progressSelectorClass::-webkit-progress-value").css({"-webkit-transition" : "all 6s"}); 
```

有没有机会选择`progress::-webkit-progress-value`in JavaScript（有或没有 jQuery）？

在这个 jsFiddle 你会更清楚地看到我试图做什么：http: [//jsfiddle.net/rD5Mc/1/](http://jsfiddle.net/rD5Mc/1/)

***更新：***

*我通过向 -element 添加/更改`data-animation-time`参数`<progress>`并创建了几个像这样的 css-classes 得到了一个丑陋的解决方法的效果：*

```
progress[data-animation-time="5"]::-webkit-progress-value { -webkit-transition: all 5s; }
progress[data-animation-time="10"]::-webkit-progress-value {    -webkit-transition: all 10s;    }
progress[data-animation-time="15"]::-webkit-progress-value {    -webkit-transition: all 15s;    }
progress[data-animation-time="20"]::-webkit-progress-value {    -webkit-transition: all 20s;    }
progress[data-animation-time="25"]::-webkit-progress-value {    -webkit-transition: all 25s;    }
... 
```

*它有效，但我对我的解决方案非常不满意。一定会有更好的办法...*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-19T23:32:28.220

你可以使用javascript来修改css规则！

```
var rule;

$(".animationtimeFirst").change(function() {
    time = $(this).val();

    // Write out out full CSS selector + declaration
    s = '.progressselector::-webkit-progress-value { -webkit-transition: all ' + time + 's; }';

    // Check the rules
    // If there's no rules,
    if ((!rule && rule !== 0) || !document.styleSheets[0].cssRules.length) {
        // Make one! -- Insert our CSS string into the page stylesheet
        rule = document.styleSheets[0].insertRule(s, 0);
        // I think this code is different in IE, beware!
        console.log('Our rule is #' + rule);
    } else {
    // If we already have a rule we can change the style we've implement for the psuedo class
    document.styleSheets[0].rules[rule].style.webkitTransitionDuration = time.toString() + 's';
    }
}); 
```

这是一个更新的小提琴：http: [//jsfiddle.net/trolleymusic/MHYY8/3/——](http://jsfiddle.net/trolleymusic/MHYY8/3/)希望它有帮助:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T21:51:22.373

`progress::-webkit-progress-value`不是 DOM 元素（不过它是 Shadow DOM 的一部分）。所以你不能用 jQuery 或任何 DOM 方法来访问它。

这一切都归结为像您这样的解决方法。

**编辑：**

事实证明，在最新版本的 Chrome 中，您实际上可以使用该`webkitShadowRoot`属性访问 Shadow DOM。不幸的是，它不适用于`<progress />`元素。

# mysql - 数没有零的数字

> ID：16054258
> 
> 赞同：2
> 
> 时间：2013-04-17T07:39:35.170
> 
> 标签：mysql, sql

我有一个工作正常的查询，但我想在哪里进行更改。
查询计算 的所有笔记`id_service = 89`。
注释是 0 到 3 之间的数字而不是更多。
我的查询计算所有这些笔记以获得平均值。
一切正常。

我想要的改变是，他只计算 1 到 3 之间的音符（不是 0）。
我不知道我该怎么做。

例子：

此查询计算我在所有条件下获得数字 3 的时间。
这里是查询：

```
SELECT round( avg( AVG =3 ) * count( AVG ) ) AS New
     , sma_famille.famille
FROM (              
    SELECT ROUND( SUM( note ) / count( note ) ) AS AVG
         , sma_famille.famille
         , sma_agents.nom
    FROM sma_notes
        INNER JOIN sma_famille 
            ON sma_famille.id_service =89
        INNER JOIN sma_agents 
            ON sma_notes.id_agent = sma_agents.id_agent
        INNER JOIN sma_service_activite 
            ON sma_service_activite.id_activite = sma_notes.id_activite
            AND sma_service_activite.id_famille = sma_famille.id_famille
            AND sma_service_activite.id_service = sma_famille.id_service
    GROUP BY sma_famille.famille, sma_agents.nom
) AS FN
LEFT JOIN sma_famille 
    ON sma_famille.id_service =89
    AND FN.famille = sma_famille.famille
GROUP BY FN.famille 
```

一个例子：
在 Bio 我可以给每个人 2 个笔记，比如 Bio Part1 和 Bio Part2。

在我的例子中，我有两个人。
我在 Bio Part1 中给了两个注释“3”，在 Bio Part2 中我没有给出注释，所以有注释“0”！

这是我的查询结果：

这就是我得到的：

```
 Note  Math   English   Bio  
     1      0       0       0 
     2      0       0       2 
     3      0       0       0 
```

这就是我想要的：

```
 Note  Math   English   Bio  
     1      0       0       0 
     2      0       0       0 
     3      0       0       2 
```

如果没有音符“0”，我必须得到平均 100% 的音符“3”。

现在我得到：

```
 Note  Math   English   Bio  
     1                      0 
     2                      0 
     3                      2 
```

并不是

```
 Note  Math   English   Bio  
     1      0       0       0 
     2      0       0       0 
     3      0       0       2 
```

如何在结果集中获得“0”

有人有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:15:14.903

获得值 > 0 的计数的一种方法是：

```
count(case when note > 0 then note end) 
```

（当 note 为 0 时，case 评估为 null，不计算在内。）

虽然最简单的方法可能是

```
sum(sign(note)) 
```

# c# - 如何使 QueryString 不可更改？

> ID：16054262
> 
> 赞同：0
> 
> 时间：2013-04-17T07:39:50.843
> 
> 标签：c#, asp.net, query-string

我正在使用 asp.net 实现应用程序。

我想让查询不变。如果我手动进行更改，则需要抛出一些异常。

我该如何实施？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:43:31.540

“尝试加密查询字符串并将结果字符串附加到查询字符串。读取查询字符串时，首先再次加密正常参数并将其与字符串进行比较。然后当任何参数更改时，哈希将不再匹配，您可以抛出一个例外。

像这样的东西。搜索一个不错的 Querystring 读取器/写入器类，让生活更轻松。

```
private string GetSecureQsToken(string querystring)
{
    Byte[] buffer = Encoding.UTF8.GetBytes(querystring);
    SHA1CryptoServiceProvider cryptoTransformSha1 =
    new SHA1CryptoServiceProvider();
    string hash = BitConverter.ToString(
        cryptoTransformSha1.ComputeHash(buffer)).Replace("-", "");

    return hash;
}

private void GoToSecureQsPage()
{
    string qsvalues = "id=1&page=4";
    Response.Redirect(string.Format("Default.aspx?{0}&hash={1}", qsvalues, GetSecureQsToken(qsvalues)));
}

private void ReadSecureQs()
{
    //here check the normal querystring parameters again against the hash parameter
    if (GetSecureQsToken("id=1&page=4") != Request.QueryString["hash"])
    {
        throw new Exception("Error here");
    }
} 
```

我只是按照评论中的建议选择了哈希版本，但是是的，然后它会再次被客户更改。所以你需要一些像这样的加密：

```
public class SecureQuerystring
{
    public SecureQuerystring()
    {
        m_passPhrase = "#oqT6%hKg";
        m_saltValue = "7651273512";
        m_initVector = "@1B2c3D4e5F6g7H8";
        m_hashAlgorithm = "SHA1";
        m_passwordIterations = 5;
        m_keySize = 128;
    }

    private string m_plaintext;
    private string m_ciphertext;
    private byte[] m_plaintextbytes;
    private byte[] m_ciphertextbytes;
    private string m_passPhrase;
    private string m_saltValue;
    private string m_hashAlgorithm;
    private Int32 m_passwordIterations;
    private string m_initVector;
    private Int32 m_keySize;

    public string plaintext
    {
        get { return m_plaintext; }
        set { m_plaintext = value; }
    }

    public string ciphertext
    {
        get { return m_ciphertext; }
        set { m_ciphertext = value; }
    }

    public byte[] plaintextbytes
    {
        get { return m_plaintextbytes; }
        set { m_plaintextbytes = value; }
    }

    public byte[] ciphertextbytes
    {
        get { return m_ciphertextbytes; }
        set { m_ciphertextbytes = value; }
    }

    public string passPhrase
    {
        get { return m_passPhrase; }
        set { m_passPhrase = value; }
    }

    public string saltValue
    {
        get { return m_saltValue; }
        set { m_saltValue = value; }
    }

    public string hashAlgorithm
    {
        get { return m_hashAlgorithm; }
        set { m_hashAlgorithm = value; }
    }

    public Int32 passwordIterations
    {
        get { return m_passwordIterations; }
        set { m_passwordIterations = value; }
    }

    public string initVector
    {
        get { return m_initVector; }
        set { m_initVector = value; }
    }

    public Int32 keySize
    {
        get { return m_keySize; }
        set { m_keySize = value; }
    }

    public string ASCIIEncrypt(string plaintext2)
    {
        try
        {
            byte[] initVectorBytes = Encoding.ASCII.GetBytes(m_initVector);
            byte[] saltValueBytes = Encoding.ASCII.GetBytes(m_saltValue);
            byte[] plainTextBytes = Encoding.ASCII.GetBytes(plaintext2);
            PasswordDeriveBytes password = new PasswordDeriveBytes(m_passPhrase, saltValueBytes, m_hashAlgorithm, m_passwordIterations);
            byte[] keyBytes = password.GetBytes(m_keySize / 8);
            RijndaelManaged symmetricKey = new RijndaelManaged();
            symmetricKey.Mode = CipherMode.CBC;
            ICryptoTransform encryptor = symmetricKey.CreateEncryptor(keyBytes, initVectorBytes);
            MemoryStream memoryStream = new MemoryStream();
            CryptoStream cryptoStream = new CryptoStream(memoryStream, encryptor, CryptoStreamMode.Write);
            cryptoStream.Write(plainTextBytes, 0, plainTextBytes.Length);
            cryptoStream.FlushFinalBlock();
            byte[] cipherTextBytes = memoryStream.ToArray();
            memoryStream.Close();
            cryptoStream.Close();
            m_ciphertext = Convert.ToBase64String(cipherTextBytes);
            return "SUCCESS";
        }
        catch (Exception ex)
        {
            return ex.Message.ToString();
        }

    }

    public string ASCIIDecrypt(string ciphertext2)
    {
        try
        {
            byte[] initVectorBytes = Encoding.ASCII.GetBytes(m_initVector);
            byte[] saltValueBytes = Encoding.ASCII.GetBytes(m_saltValue);
            byte[] cipherTextBytes = Convert.FromBase64String(ciphertext2);
            PasswordDeriveBytes password = new PasswordDeriveBytes(m_passPhrase, saltValueBytes, m_hashAlgorithm, m_passwordIterations);
            byte[] keyBytes = password.GetBytes(keySize / 8);
            RijndaelManaged symmetricKey = new RijndaelManaged();
            symmetricKey.Mode = CipherMode.CBC;
            ICryptoTransform decryptor = symmetricKey.CreateDecryptor(keyBytes, initVectorBytes);
            MemoryStream memoryStream = new MemoryStream(cipherTextBytes);
            CryptoStream cryptoStream = new CryptoStream(memoryStream, decryptor, CryptoStreamMode.Read);
            byte[] plainTextBytes = new byte[cipherTextBytes.Length];
            int decryptedByteCount = cryptoStream.Read(plainTextBytes, 0, plainTextBytes.Length);
            memoryStream.Close();
            cryptoStream.Close();
            m_plaintext = Encoding.ASCII.GetString(plainTextBytes);
            return "SUCCESS";

        }
        catch (Exception ex)
        {
            return ex.Message.ToString();
        }

    }

} 
```

因此，将 ASCIIEncrypt("yourquerstring without encryption string") 附加到 qyerstring 并在读取时再次读取正常的 qs 参数并将 qs 中的哈希与结果进行比较。

# ruby-on-rails - Rails 3.2 - OR 查询无法正常工作 - 重写查询

> ID：16054266
> 
> 赞同：0
> 
> 时间：2013-04-17T07:39:57.957
> 
> 标签：ruby-on-rails, ruby-on-rails-3, sqlite, postgresql

我很高兴将此查询用于搜索表单。但是，刚刚发现无法正常工作。失败的位`.where`是`like`反对`params[:query]`。这`like`在 4 个不同的字段中发生了 4 次。然而，结果表明这并没有发生。

```
 @events_casual  = Event.non_timetable.where("events.finish_date >= ?", @time).where((["CAST(headers.title_es as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(headers.title_en as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(headers.title_eu as varchar(255)) LIKE ?", "%#{params[:query]}%"] || ["CAST(headers.title_fr as varchar(255)) LIKE ?", "%#{params[:query]}%"])).includes(:header).order("events.start_date ASC") 
```

我一直在尝试将此查询转换为：

```
@events_casual  = Event.non_timetable.joins(:header).where(" params[:query] in (?)", [headers.title_es, headers.title_en, headers.title_eu]).order("events.start_date ASC") 
```

但是，这不起作用。`Error: undefined method`{}:Hash` 的 title_es'

我尝试过类似的语法。但无济于事。

非常感谢重写该查询的任何帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:48:24.870

尝试以下

```
@events_casual  = Event
  .non_timetable
  .includes(:header)
  .order("events.start_date ASC")
  .where("events.finish_date >= ?", @time)
  .where("CAST(headers.title_es as varchar(255)) LIKE :query OR CAST(headers.title_en as varchar(255)) LIKE :query OR CAST(headers.title_eu as varchar(255)) LIKE :query OR CAST(headers.title_fr as varchar(255)) LIKE :query", { query: "%#{params[:query]}%"]) 
```

# batch-file - 批处理——我如何执行多个在时间间隔内依次打开（和关闭）的程序作为一个循环？

> ID：16054272
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:40:11.557
> 
> 标签：batch-file, processing, cycle

我希望这是有道理的。我想创建一个批处理文件或任何类似的文件，这些文件将循环通过几个处理应用程序进行演示。有没有一种方法可以按时间间隔执行应用程序，在执行下一个应用程序之前关闭，然后循环回到第一个应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:01:41.130

当然。

```
@ECHO OFF
SETLOCAL
:loop
FOR %%i IN ("process1.exe 20" "process2.exe 30" "process3.exe 10") DO CALL :cycle %%~i
GOTO loop

:cycle
START %1
timeout /t %2 >nul
TASKKILL /im %1 >nul
GOTO :eof 
```

运行 process1 20 秒，process2 30 - 知道模式吗？这些进程被毫不客气地终止。

按 control-C 并回复 Y 以终止 - 将使最后一个调用的进程保持运行。

* * *

附录：

`TASKKILL`对“路径”一无所知 - 只有可执行文件名称。

`setlocal`因此，在添加之后的行上

设置路径=C:\Users\MyName\Documents\School\Processing\Sketch_8\application.windows32;%path%

并仅在 FOR 语句中指定可执行文件。

如果涉及多个目录名，只需将它们与`;`分隔符串在一起并`;%path%`在最后。

Windows`path`通过首先查找当前目录，然后依次查找路径上的每个目录，直到找到所需的可执行文件，从中获取可执行文件。添加额外目录仅在此批处理运行时发生，并且仅适用于批处理的实例 - 它不会传输到任何其他进程。

# jquery - 页面重新加载后记住 jQuery 选项卡位置

> ID：16054274
> 
> 赞同：2
> 
> 时间：2013-04-17T07:40:20.300
> 
> 标签：jquery, jquery-ui, tabs

我有一个包含一些 GridViews 的页面。我使用选项卡菜单将它们保存在选项卡中。有四个选项卡。

我的问题是当页面重新加载时，选项卡会重置为第一个选项卡。

HTML：

```
<div id="tabbed_box_1" class="tabbed_box">
    &nbsp; &nbsp;
    <div class="tabbed_area">
        <ul class="tabs">
            <li><a href="#" title="content_1" class="tab active">Bottom Banner</a></li>
            <li><a href="#" title="content_2" class="tab">Side Banner Bottom</a></li>
            <li><a href="#" title="content_3" class="tab">Side Banner Top</a></li>
            <li><a href="#" title="content_4" class="tab">Main Ad</a></li>
        </ul>
        <div id="content_1" class="content">
            <table width="500" border="0" align="center" cellpadding="0" cellspacing="2" class="border">
                <tr>
                    <td align="center">
                      //some gridview here
                    </td>
                </tr>
            </table>
        </div>
        //similarly three more gridviews 
```

jQuery：

```
 $(document).ready(function () {

     // When a link is clicked
     $("a.tab").click(function () {

        // switch all tabs off
        $(".active").removeClass("active");

        // switch this tab on
        $(this).addClass("active");

        // slide all content up
        $(".content").slideUp();

        // slide this content up
        var content_show = $(this).attr("title");
        $("#" + content_show).slideDown();

    });
}); 
```

即使在页面重新加载后，如何使当前单击的选项卡显示？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:44:38.330

简单的解决方案是使用[localStorage](https://developer.mozilla.org/en-US/docs/DOM/Storage)来持久化选择：

```
 $(document).ready(function () {

        function activate(tab) {
           // switch all tabs off
            $(".active").removeClass("active");

            // switch this tab on
            tab.addClass("active");

            // slide all content up
            $(".content").slideUp();

            // slide this content up
            var content_show = tab.attr("title");
            $("#" + content_show).slideDown();
        }

        if (localStorage) { // let's not crash if some user has IE7
             var index = parseInt(localStorage['tab']||'0');
             activate($('a.tab').eq(index));
        }

        // When a link is clicked
        $("a.tab").click(function () {
            if (localStorage) localStorage['tab'] = $(this).closest('li').index();
            activate($(this));
        });

    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:47:51.650

每当单击选项卡时，您都可以尝试在 URL 中使用主题标签，然后在您的代码中检查是否存在主题标签，它对应于哪个选项卡的 id。

```
<ul id="tabs">
    <li><a id="category1" href="#category1">Category 1</a></li>
    <li><a id="category2" href="#category2">Category 2</a></li>
    <li><a id="category3" href="#category3">Category 3</a></li>
</ul>

if(window.location.hash) {
    $(window.location.hash).click();
} 
```

**基于：** [Jquery，如果 URL 末尾的标签与类名匹配，则激活脚本](https://stackoverflow.com/questions/3357070/jquery-activate-script-if-hashtag-on-end-of-url-matches-a-class-name)

# php - 在 PHP 中将变量传递给其父函数？

> ID：16054279
> 
> 赞同：1
> 
> 时间：2013-04-17T07:40:24.120
> 
> 标签：php, function, variables, return-value

我有一个带函数的函数，我需要内部函数以使其变量在父函数的范围内可用，例如：

```
function sayMyName(){
    getName(); // inner function generates $name value

    echo $name; // use $name
}

sayMyName(); 
```

我可以很容易地在这两个函数中对事物进行全球化......但是我的情况要复杂得多，并且要处理更多变量，并且对每个变量进行全球化有点乏味。

谢谢。

PS我注意到很多“返回”建议。抱歉，我不清楚，我需要返回更多变量.. 不是简单的返回。多谢你们

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T07:43:53.613

您可以使用`$_GLOBALS`，但这是“不好的做法”。所以，

* * *

***1：使用[`return`](http://php.net/manual/en/function.return.php)：***

```
<?php
function getName(){
    $name = 'Smith';

    return $name;
}

function sayMyName(){
    $name = getName();

    echo $name;
}

sayMyName();
?> 
```

显示：

```
Smith 
```

* * *

***2：使用[`references`](http://www.php.net/manual/en/language.references.whatdo.php)：***

```
<?php
function getName(&$name){
    $name = 'Smith';
}

function sayMyName(){
    getName($name);

    echo $name;
}

sayMyName();
?> 
```

显示：

```
Smith 
```

* * *

***3：返回[`array`](http://www.php.net/manual/en/language.types.array.php)多个变量：***

```
<?php
function getName(){
    $surname = 'Smith';
    $name    = 'John';

    return array($surname, $name);
}

function sayMyName(){
    list($surname, $name) = getName();

    echo $name, ' ', $surname;
}

sayMyName();
?> 
```

显示：

```
John Smith 
```

* * *

***4.[`object`](http://www.php.net/manual/en/language.types.object.php)为多个变量返回自定义：***

```
<?php
function getName(){
    $surname = 'Smith';
    $name    = 'John';

    $buffer = new stdClass();

    $buffer->name    = $name;
    $buffer->surname = $surname;

    return $buffer;
}

function sayMyName(){
    $obj = getName();

    echo $obj->name, ' ', $obj->surname;
}

sayMyName();
?> 
```

显示：

```
John Smith 
```

* * *

***5\. 使用[`anonymous function`](http://php.net/manual/en/functions.anonymous.php)with`use`语句 and `references`：***

```
<?php
function sayMyName(){
    $surname = $name = 'Unknown';

    $temp = function() use (&$name, &$surname){
        $surname = 'Smith';
        $name    = 'John';
    };

    $temp();

    echo $name, ' ', $surname;
}

sayMyName();
?> 
```

显示：

```
John Smith 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:42:55.363

做这个

```
function sayMyName(){
    $name = getName(); // inner function generates $name value

    echo $name; // results will be returned
}

sayMyName(); 
```

我希望您的内部函数返回这样的名称

```
function getName(){
    return $name;
} 
```

然后它会工作

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-17T07:48:22.933

这就是[面向对象编程](http://www.php.net/manual/en/language.oop5.php)的目的。如果许多函数应该共享变量，最好将它们封装到这样的类中：

```
class WhateverDescibestYourViewOfTheWorld {
    protected $name;

    function __construct( $name)
    {
        $this->name = $name;
    }

    function GetName() {
        return $this->name;
    }

    function SayName()
    {
        echo $this->name;
    }
}

// And use it:
$o = new WhateverDescibestYourViewOfTheWorld();
...
$o->SayName(); 
```

或者您可以构建仅用作数据容器的类：

```
class DataContainer {
    public $name;
    public $address;
    // ...
}

// By reference this will modify object previously created
function GetProperties( &$dataContainer) // Note that & isn't necessary since PHP5
{
    $dataContainer->name = "...";
}

$c = new DataContainer();
GetProperties($c); 
```

或者你可以简化它并使用数组：

```
function GetProperties( array &$dataContainer)
{
     $dataContainer['name'] = '...';
}

$data = array();
GetProperties($data); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T07:44:06.860

您可以使用参考

```
 $param = "aaa";
    function f(&$param)
    {
      //dostuff
      inner($param);
      echo $param;
    }
    function inner(&$inner) { //do other stuff } 
```

或使用返回值

```
 function f() { echo inner(); } 

 function inner($param) {return $param;} 
```

如果您处理引用，则两个函数都将处理同一个变量，而不是副本

[http://php.net/manual/en/language.references.php](http://php.net/manual/en/language.references.php)

最好的方法是上课

```
<?php 
class Person
{
 private $name;

 public function setName($name){ $this->name = $name;}
 public function sayName() {echo $this->name;}
}

$person = new Person();
$person->setName("Robert");
$person->sayName(); 
```

这是在 OOP 中实现它的好方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T07:44:13.417

首先将 getName() 的返回值分配给变量怎么样？

```
$name = getName(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-04-17T07:44:50.940

如果你只需要一个变量，你可以这样做

```
function getName(){
    // Some code
    return 'my name is XXX';
}
function sayMyName(){
     $name = getName(); // inner function generates $name value
     echo $name; // results to undefined
 }
 sayMyName(); 
```

否则你可以考虑使用一个类：[http ://www.php.net/manual/en/language.oop5.php](http://www.php.net/manual/en/language.oop5.php)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-04-17T08:14:39.857

您的想法是错误的，但是您可以返回一组值。例如：

```
function sayMyName()
{
    $result = getName(); // inner function creates an array

    echo $result['name']; 
} 
```

或者更好的对象：

```
class Results
{
    public $name;
}

function sayMyName()
{
    $result = getName(); // inner function creating an object

    echo $result->name;
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T07:45:27.130

您也可以按以下方式进行。

```
$name = "";

function sayMyName(){
    getName(); // inner function generates $name value
    //set $name variable inside getName() function.
    echo $name; // results to undefined
}

sayMyName(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-17T07:46:33.747

请使用以下代码，它将解决您的问题

```
global $var; 
```

您可以在 php 范围内的任何地方使用它。

# android - 调用 2 次时，自定义对话框给出了显示带有 supportfragment 的地图 v2 的异常？

> ID：16054283
> 
> 赞同：0
> 
> 时间：2013-04-17T07:40:37.207
> 
> 标签：android, map, fragment, customdialog

我想在自定义对话框中显示地图 v2 也显示地图，但是当我关闭自定义对话框并再次被称为自定义对话框时出现错误，我将代码用于该类

> 活动课

```
public class MainActivity extends  FragmentActivity {

     PopupWindow pw;
     GoogleMap map;
     final Context context = this;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

         DisplayMetrics displaymetrics = new DisplayMetrics();
            getWindowManager().getDefaultDisplay().getMetrics(displaymetrics);

          final int  screenheight = displaymetrics.heightPixels;
          final int   screenwidth = displaymetrics.widthPixels;

        Button button= (Button)findViewById(R.id.button);
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // custom dialog
                final Dialog dialog = new Dialog(context);

                dialog.getWindow().setLayout((screenwidth*90)/100,(screenheight*90)/100);
                dialog.setContentView(R.layout.popupstellodetailpage);
                dialog.setTitle("Title...");

                map= ((SupportMapFragment) getSupportFragmentManager()
                       .findFragmentById(R.id.popupmapview)).getMap(); 

                Button dialogButton = (Button) dialog.findViewById(R.id.buttoncancel);
                // if button is clicked, close the custom dialog
                dialogButton.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View v) {

                        dialog.dismiss();
                    }
                });

                dialog.show();

            }
        });

    } 
```

> 主要的.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:paddingBottom="@dimen/activity_vertical_margin"
    android:paddingLeft="@dimen/activity_horizontal_margin"
    android:paddingRight="@dimen/activity_horizontal_margin"
    android:paddingTop="@dimen/activity_vertical_margin"
    tools:context=".MainActivity" >

    <Button
        android:id="@+id/button"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="100dp"
        android:text="Button" />

</RelativeLayout> 
```

> Popupstellodetail.xml

<

```
LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/popuplayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@android:color/black"
    android:orientation="vertical" >

        <Button
            android:id="@+id/buttoncancel"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Cancel"
            android:layout_gravity="right"
             />

          <fragment
                    android:id="@+id/popupmapview"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent"
                    android:layout_margin="10dp"
                    class="com.google.android.gms.maps.SupportMapFragment" />

</LinearLayout> 
```

Logcat 错误

```
04-17 13:09:06.391: E/AndroidRuntime(11978): FATAL EXCEPTION: main
04-17 13:09:06.391: E/AndroidRuntime(11978): android.view.InflateException: Binary XML file line #16: Error inflating class fragment
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:306)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.app.Dialog.setContentView(Dialog.java:467)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at com.example.stiptis.MainActivity$1.onClick(MainActivity.java:58)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.view.View.performClick(View.java:4222)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.view.View$PerformClick.run(View.java:17273)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.os.Handler.handleCallback(Handler.java:615)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.os.Looper.loop(Looper.java:137)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.app.ActivityThread.main(ActivityThread.java:4895)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:994)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:761)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at dalvik.system.NativeStart.main(Native Method)
04-17 13:09:06.391: E/AndroidRuntime(11978): Caused by: java.lang.IllegalArgumentException: Binary XML file line #16: Duplicate id 0x7f040008, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
04-17 13:09:06.391: E/AndroidRuntime(11978):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
04-17 13:09:06.391: E/AndroidRuntime(11978):    ... 18 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:45:03.780

看看你的 xml 的第 1 行说你的 logcat

# c# - 如何动态地将 Include 添加到 ObjectSet 使用 C#？

> ID：16054284
> 
> 赞同：7
> 
> 时间：2013-04-17T07:40:44.373
> 
> 标签：c#, entity-framework

我想`Include`从 input 动态添加 s `params[]`。我怎样才能做到这一点？

这是我的代码

```
IQueryable<Work> query = this.ObjectContext.Works
    .Include("EmployeeSender.Person")
    .Include("EmployeeReceiver.Person")
    .Include("WorkCode")
    .Include("WorkFlowStep.WorkFlowFormState")
    .Include("WorkFlow")
    .Include("WorkRoot.EmployeeSender.Person")
    .Include("WorkParent"); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T07:45:27.290

在一个循环中，例如：

```
IQueryable<Work> query = null;  

query = this.ObjectContext.Works;
foreach (var param in params)
{
    query = query.Include(param);
}
var result = query.ToList(); 
```

正如 Christian Dietz 所提到的，您可以将其放入扩展方法中，使其可重用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:53:40.120

您可以将 L-Three 的答案与以下问题中的扩展方法结合起来。

[使用 Entity Framework 加入视图时使用 .Include()](https://stackoverflow.com/questions/3976563/using-include-when-joining-a-view-using-entity-framework)

```
public static IQueryable<T> Include<T>(this IQueryable<T> sequence, params string[] includes) {
    var objectQuery = sequence as ObjectQuery<T>;
    if (objectQuery != null){
        foreach(item in includes){
             objectQuery.Include(item);
        }
        return objectQuery;
    }
    return sequence;
} 
```

然后你应该能够使用包括：

```
IQueryable<Work> query = null;  

query = this.ObjectContext.Works.Include("Something", "Whatever"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-07-12T13:33:41.257

EF Core 尚无法进行延迟加载。[参考这里](https://docs.microsoft.com/en-us/ef/core/querying/related-data)。

或者，您可以使用急切加载。

阅读这篇[文章](https://stackoverflow.com/questions/31366236/lazy-loading-vs-eager-loading)

下面是我为实现急切加载而创建的扩展方法。

扩展方法：

```
public static IQueryable<TEntity> IncludeMultiple<TEntity, TProperty>(
            this IQueryable<TEntity> source,
            List<Expression<Func<TEntity, TProperty>>> navigationPropertyPath) where TEntity : class
        {
            foreach (var navExpression in navigationPropertyPath)
            {
                source= source.Include(navExpression);
            }
            return source.AsQueryable();
        } 
```

存储库调用：

```
public async Task<TEntity> FindOne(ISpecification<TEntity> spec)
        {
            return await Task.Run(() => Context.Set<TEntity>().AsQueryable().IncludeMultiple(spec.IncludeExpression()).Where(spec.IsSatisfiedBy).FirstOrDefault());
        } 
```

用法：

```
List<object> nestedObjects = new List<object> {new Rules()};

            ISpecification<Blog> blogSpec = new BlogSpec(blogId, nestedObjects); 

            var challenge = await this._blogRepository.FindOne(blogSpec); 
```

依赖项：

```
public class BlogSpec : SpecificationBase<Blog>
    {
        readonly int _blogId;
        private readonly List<object> _nestedObjects;

        public ChallengeSpec(int blogid, List<object> nestedObjects)
        {
            this._blogId = blogid;
            _nestedObjects = nestedObjects;
        }

        public override Expression<Func<Challenge, bool>> SpecExpression
        {
            get { return blogSpec => blogSpec.Id == this._blogId; }
        }

        public override List<Expression<Func<Blog, object>>> IncludeExpression()
        {
            List<Expression<Func<Blog, object>>> tobeIncluded = new List<Expression<Func<Blog, object>>>();
            if (_nestedObjects != null)
                foreach (var nestedObject in _nestedObjects)
                {
                    if (nestedObject is Rules)
                    {
                        Expression<Func<Blog, object>> expr = blog => blog.Rules;
                        tobeIncluded.Add(expr);
                    }

                }

            return tobeIncluded;
        } 
```

如果有帮助会很高兴。请注意，这不是生产就绪代码。

# android - (Android) 看不到 Flurry 日志

> ID：16054287
> 
> 赞同：0
> 
> 时间：2013-04-17T07:41:06.230
> 
> 标签：android, flurry

我正在尝试`Flurry Analytics`在我的应用程序上实现，这是会话的日志。

```
04-17 07:31:10.292: D/FlurryAgent(5431): Initializing Flurry session
04-17 07:31:10.311: D/FlurryAgent(5431): New session
04-17 07:31:10.681: I/FlurryAgent(5431): loading persistent data: /data/data/com.jekkusan.myapp/files/.flurryagent.4b5cc4c4
04-17 07:31:10.691: D/FlurryAgent(5431): Loading API key: ****************Z8R4
04-17 07:31:10.691: D/FlurryAgent(5431): Loading phoneId: AND21ed71f9f324aa40
04-17 07:31:10.691: D/FlurryAgent(5431): Loading session reports
04-17 07:31:10.691: D/FlurryAgent(5431): Persistent file loaded
04-17 07:31:10.731: D/FlurryAgent(5431): generating report
04-17 07:31:10.761: D/FlurryAgent(5431): Sending report to: http://data.flurry.com/aap.do
04-17 07:31:20.001: D/FlurryAgent(5431): Report successful
04-17 07:31:20.001: D/FlurryAgent(5431): Done sending initial agent report 
```

我在我的应用程序的仪表板上没有看到任何变化。我已经等了这么久，大约 1 小时，但仍然没有任何变化。我该如何解决这个问题？

另外，我正在调用`FlurryAgent.onStartSession(context, "APP_KEY")`我的`Activity`'s`onStart()`和`FlurryAgent.onEndSession(context)`.`onStop()`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T01:18:42.793

我的代码正在运行，这里没有问题。我只需要等待几个小时才能看到服务器上的更改。

# java - “偏移量或计数可能接近 -1>>>1。” 这是什么意思

> ID：16054289
> 
> 赞同：19
> 
> 时间：2013-04-17T07:41:12.353
> 
> 标签：java

在 java String [source code](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/String.java#String.%3Cinit%3E%28char%5B%5D,int,int%29)中，很少有地方用以下注释注明：

```
// Note: offset or count might be near -1>>>1. 
```

考虑以下示例：

```
public String(char value[], int offset, int count) {
    if (offset < 0) {
        throw new StringIndexOutOfBoundsException(offset);
    }
    if (count < 0) {
        throw new StringIndexOutOfBoundsException(count);
    }
    // Note: offset or count might be near -1>>>1.
    if (offset > value.length - count) {
        throw new StringIndexOutOfBoundsException(offset + count);
    }
    this.offset = 0;
    this.count = count;
    this.value = Arrays.copyOfRange(value, offset, offset+count);
} 
```

正如我们所见，`offset`和`value.length`都是`count`，`int`因此该值可能是 -1、0、1 或任何其他整数。评论中的“近”和“>>>”是什么意思，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-17T07:50:21.300

该值`-1>>>1 == 2147483647`是`int`您在 Java 中可以拥有的最大值。

换句话说，`-1>>>1 == Integer.MAX_VALUE`. 当您使用接近此类限制的值进行数学运算时，您获得意外结果的机会就会增加。例如，由于*整数溢出*`int a = (-1>>>1); System.out.println(a < a + 1);`而打印，尽管人们可以期望该代码总是打印，因为在纯数学中，对于任何整数来说.`false`*`true``n``n < n + 1`*

 *那段代码的作者只是在解释他（明智的）决定写

```
if (offset > value.length - count) 
```

而不是*看起来相似但不等价的*

```
if (offset + count > value.length) 
```

最后一个版本可能会导致整数溢出，这对后面的代码来说可能是一个巨大的麻烦。他警告说，至少有一个`offset`或`count`可能是接近 的值`Integer.MAX_VALUE`，这增加了溢出的可能性。

对于第一个版本（您提到的 String 的源代码中使用的版本），永远不会发生溢出：您肯定知道`offset`和`count`都是正数或 0 因为先前的检查，并且`value.length`也是正数或 0 因为长度在 Java 中，数组的值总是正数或 0，因此不会发生溢出问题！

除了记录选择之外，作者还警告其他开发人员（包括他未来的自己），以这种方式编写该行有一个非常具体的原因，以避免任何人试图将其替换为（可能更自然寻找）第二，引入错误的错误版本。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T07:44:44.423

您可能想查看[按位和位移运算符](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op3.html)以了解有关`>>>`运算符的说明：

> 无符号右移运算符“>>>”将零移到最左边的位置

假设你有：

```
int a = -1;
a = a >>> 1;
System.out.println(a); 
```

然后`a`将是 2147483647 （即`Integer.MAX_VALUE`）

**为什么？**

由于 `>>>`运算符填充零并且无论正数和负数都只填充零。因此，例如，如果您有：

`12 >>> 2`

(00000000 00000000 00000000 000011 00 >>> 2) 那么结果是 3。

（即 00000000 00000000 00000000 00000011）。

所以，如果你这样做：

```
System.out.println(Integer.toBinaryString(-1>>>1)); 
```

这将打印：

```
1111111111111111111111111111111 
```

当然，将其转换为十进制，这是 2147483647。

*正如@BrunoReis (+1) 在他的回答中解释的那样，这样做的原因是为了防止可能的整数溢出问题。**

# youtube-api - 未找到来自 https://www.googleapis.com/youtube/v3/video 的回复

> ID：16054297
> 
> 赞同：2
> 
> 时间：2013-04-17T07:41:42.710
> 
> 标签：youtube-api

我按照[https://developers.google.com/youtube/v3/guides/authentication#OAuth2_Calling_a_Google_API](https://developers.google.com/youtube/v3/guides/authentication#OAuth2_Calling_a_Google_API) 上的说明检查了我对 YouTube v3 API 的访问权限。

我从中得到了一个 access_token：

```
curl --data "code=4/XXX.YYY" \
--data "client_id=foo123.apps.googleusercontent.com" \
--data "client_secret=YYY" \
--data "redirect_uri=urn:ietf:wg:oauth:2.0:oob" \
--data "grant_type=authorization_code" \
https://accounts.google.com/o/oauth2/token 
```

返回：

```
{
  "access_token" : "ya29.XYXYXY",
  "token_type" : "Bearer",
  "expires_in" : 3600
} 
```

如果我现在使用 curl 或在浏览器中检查访问

[https://www.googleapis.com/youtube/v3/video?access_token=ya29.XYXYXY](https://www.googleapis.com/youtube/v3/video?access_token=ya29.XYXYXY)

我刚回来“未找到”。如果我使用另一个（幻想）access_token 或省略参数，结果总是相同的，只是“未找到”。我尝试使用“http”和“https”。

难道我做错了什么？服务只是暂时不可用吗？我应该使用 v2 吗？

谢谢你的时间，阿克塞尔。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T12:58:12.060

自己找到的。该文档对我来说具有误导性。它使用的样本

[https://www.googleapis.com/youtube/v3/video?access_token=ya29.XYXYXY](https://www.googleapis.com/youtube/v3/video?access_token=ya29.XYXYXY)

并不是说您需要更多参数。来自服务器的“未找到”响应没有帮助。此外，“视频”必须是“视频”。

一个正确的测试是

[https://www.googleapis.com/youtube/v3/videos?access_token=ya29.XYXYXY&id=12345678&part=snippet](https://www.googleapis.com/youtube/v3/videos?access_token=ya29.XYXYXY&id=12345678&part=snippet)

# oracle - 需要对值求和，然后在 Oracle 中减去贷方和借方票据

> ID：16054300
> 
> 赞同：2
> 
> 时间：2013-04-17T07:41:52.430
> 
> 标签：oracle, oracle9i

嗨，请帮帮我，我需要对值求和，然后在 Oracle 9i 中减去贷方和借方票据

```
ID   Acc_TYP     Amt  

1     CR         100
2     CR         200
3     DB         50
4     DB         50 
```

使用上面的表结构，我需要通过（CR-DB）计算余额，如何
在单查询中形成逻辑，请帮我解决这个问题，我是oracle的初学者。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:49:58.270

```
select sum(
         case 
            when acc_typ='CR' then amt
            when acc_typ='DB' then -amt
            else 0
         end) as balance
from the_table
where acc_typ in ('CR', 'DB'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:50:23.903

您应该使用 CASE 语句：

```
select sum(case when Acc_TYP='DB' 
                then -amt 
                else amt 
           end ) from t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:52:40.423

另一个基于案例的解决方案，使用“简单案例陈述”：[http ://docs.oracle.com/cd/B28359_01/appdev.111/b28370/controlstructures.htm#i8305](http://docs.oracle.com/cd/B28359_01/appdev.111/b28370/controlstructures.htm#i8305)

```
select sum(case acc_type
             when 'CR' then +amt
             when 'DB' then -amt
           end) balance
from   ... 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-17T07:48:15.410

尝试这个：

```
select sum(n) from (
(select sum(amt) as n from table where acc_typ='CR') 
union 
(select -sum(amt) as n from table where acc_typ='DB')
) 
```

# ios - dispatch_async 中的异步 url 请求

> ID：16054301
> 
> 赞同：6
> 
> 时间：2013-04-17T07:41:56.523
> 
> 标签：ios, grand-central-dispatch, nsoperation, nsoperationqueue

我正在尝试在特定函数中实现异步 url 请求，我希望所有这些请求都完成然后执行特定操作，但该操作先于请求，即在请求完成之前调用它。

```
dispatch_queue_t fetchQ = dispatch_queue_create("Featured Doc Downloader", NULL);
        dispatch_async(fetchQ, ^{
            [self myAsyncMultipleURLRequestFunction];
            dispatch_sync(dispatch_get_main_queue(), ^{
                [self updateUIFunction];
            });
        });

-(void)myAsyncMultipleURLRequestFunction
   {
    for (int i=0; i<count; i++) 
     {
     NSURLConnection *loginConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];          
     }
   } 
```

现在 updateUIFunction 在 myAsyncMultipleURLRequestFunction 完成所有请求之前被调用。也尝试使用 NSOperaitonQueue 进行此操作，但无法执行我真正想要的操作。

```
[_operationQ addOperationWithBlock: ^ {
     for (int i=0; i<count; i++)
      {
     NSURLConnection *loginConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];          
      }
    }

[[NSOperationQueue mainQueue] addOperationWithBlock: ^ {
         // updating UI
         [self updateUIFunction];
    }];
}]; 
```

我知道这很简单，但我的时间不多了，感谢您的帮助。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-19T13:30:59.023

@tkanzakic 走在正确的道路上。要使用的正确构造是 dispatch_group_t。但实施有待改进。通过使用信号量，您可以异步启动所有下载，并且仍然确保您没有太多的并发运行。这是一个代码示例，说明了您应该如何使用 dispatch_group_t 以​​及使所有下载并行：

```
dispatch_queue_t fetchQ = dispatch_queue_create("Featured Doc Downloader", NULL);
dispatch_group_t fetchGroup = dispatch_group_create();

// This will allow up to 8 parallel downloads.
dispatch_semaphore_t downloadSema = dispatch_semaphore_create(8);

// We start ALL our downloads in parallel throttled by the above semaphore.
for (int i=0; i<count; i++) {
    dispatch_group_async(fetchGroup, fetchQ, ^(void) {
        dispatch_semaphore_wait(downloadSema, DISPATCH_TIME_FOREVER);
        NSURLConnection *loginConnection = [[NSURLConnection alloc] initWithRequest:requestArray[i] delegate:self];
        dispatch_semaphore_signal(downloadSema);
    });
}

// Now we wait until ALL our dispatch_group_async are finished.
dispatch_group_wait(fetchGroup, DISPATCH_TIME_FOREVER);

// Update your UI
dispatch_sync(dispatch_get_main_queue(), ^{
    [self updateUIFunction];
});

// Release resources
dispatch_release(fetchGroup);
dispatch_release(downloadSema);
dispatch_release(fetchQ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:48:18.747

您可以创建一个`dispatch_group_t`然后用于`dispatch_group_notify`在`updateUIFunction`组的上一个块完成运行时执行，例如：

```
dispatch_queue_t fetchQ = dispatch_queue_create("Featured Doc Downloader", NULL);
dispatch_async(fetchQ, ^{
    dispatch_group_t group = dispatch_group_create();
    dispatch_group_async(group, dispatch_get_global_queue(0, 0), ^{
        [self myAsyncMultipleURLRequestFunction];
    });
    dispatch_group_notify(group, dispatch_get_global_queue(0, 0), ^{
        dispatch_async(dispatch_get_main_queue(), ^{
            [self updateUIFunction];
        });
    });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:07:49.237

首先配置运行循环。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
    NSURLRequest* request = [NSURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10];
    [NSURLConnection connectionWithRequest:request delegate:self];
    while(!self.finished) {
        [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate distantFuture]];
    }
}); 
```

尝试这个

# php - 从文本文件 php 中获取字符

> ID：16054302
> 
> 赞同：0
> 
> 时间：2013-04-17T07:42:00.020
> 
> 标签：php, regex, explode

我正在尝试读取文本文件的字符。

```
$lang['content.home'] = 'Home';
$lang['content.about_us'] = 'About Us';
$lang['content.team'] = 'team'; 
```

如何获得公正的性格

**content.home**和**Home**

和

**content.about_us**和**关于我们**

和

**content.team**和**团队**

我尝试使用 explode('\'', $data) 但效果不佳

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:46:27.220

`foreach`你可以 得到`$lang` `key`和`value`

```
 $lang['content.home'] = 'Home';
 $lang['content.about_us'] = 'About Us';
 $lang['content.team'] = 'team';
 foreach($lang as $key=>$value){
    echo $key."<br>\n";
    echo $value;
 } 
```

# iphone - 在 iphone 中创建二维码

> ID：16054305
> 
> 赞同：1
> 
> 时间：2013-04-17T07:42:09.683
> 
> 标签：iphone, ios, ios6, qr-code

我看过一些示例代码，这些代码是从文本创建二维码（下面是代码）。我们也可以从其他数据（如图像）生成二维码吗？

```
 NSString *code = @"1001012023034";

Barcode *barcode = [[Barcode alloc] init];

self.view.backgroundColor = [UIColor whiteColor];

[barcode setupQRCode:code];
self.imageView.image = barcode.qRBarcode; 
```

我的问题是，如果我们使用图像而不是字符串数据，那么有可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:36:01.453

**是**的，这是可能的。有两个可用的最佳库：

**1）**对于**编码：** [QR-Code-Encoder-for-Objective-C](https://github.com/myang-git/QR-Code-Encoder-for-Objective-C)

**2)**用于**解码：** [ZBar 条码阅读器](http://zbar.sourceforge.net/iphone/)

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:49:22.540

QR 码在数据存储方面非常有限，仅限于几 kb - 请参阅[http://en.wikipedia.org/wiki/QR_code#Storage](http://en.wikipedia.org/wiki/QR_code#Storage)了解存储大小。因此，您将无法在其中放置图像。但是，您可以做的是将图像上传到某处并编码到该图像的链接。

# hibernate - Hibernate 和 eclipseLink 的功能比较

> ID：16054307
> 
> 赞同：1
> 
> 时间：2013-04-17T07:42:13.760
> 
> 标签：hibernate, orm, eclipselink

我想看看 Hibernate 和 eclipselink（功能）之间最相关的区别。我们在选择其中一个或另一个时要考虑什么？eclipselink 没有的休眠是什么？

谢谢

# c# - 在不破坏内容的情况下清除 Winforms GroupBox

> ID：16054313
> 
> 赞同：2
> 
> 时间：2013-04-17T07:42:37.647
> 
> 标签：c#, winforms, ironpython, groupbox

我想清除 GroupBox 的内容以用新选项填充它，但我不能使用 Dispose() 函数，因为我不想破坏其中的对象（来自另一个类的文本框）。有没有办法在不破坏内容的情况下清空 GroupBox？

编辑：由于很难理解我到底想要什么，这就是我试图做的（这是 IronPython 顺便说一句，但这不应该是一个问题）

```
def loadMethod(self, sender, e):
    self.MethodParaBox.Visible = True
    for i in self.MethodParaBox.Controls:
        self.MethodParaBox.Controls[0].Dispose()

    panel = Panel()
    panel.AutoScroll = True
    panel.Width = 150
    panel.Height = 130
    panel.Left = 25
    panel.Top = 25
    self.MethodParaBox.Controls.Add(panel)

    for i, z in enumerate(self.parent.getParameter(self.project.SelectedItem, self.design.SelectedItem)):
        if self.textBoxList[i].value.Enabled == False:
            label = Label()
            label.Left = 0
            label.Top = 30 * i
            label.Width = 80
            label.Text = z
            panel.Controls.Add(label)

            self.textBoxList[i].option3.Left = 90
            self.textBoxList[i].option3.Top = 0 + 30 * i
            self.textBoxList[i].option3.Width = 40
            panel.Controls.Add(self.textBoxList[i].option3) 
```

如果我再次调用此函数，它将引发异常，因为文本框不再存在

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:48:39.343

尝试[`ControlCollection.Remove`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.remove.aspx)

```
foreach(Control c in groupBox.Controls()) groupBox.Controls.Remove(c); 
```

或者，您可以使用[`groupBox.Controls.Clear()`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.clear.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:54:50.483

你可以使用[`Control.ControlCollection.Clear`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.clear.aspx)

```
 groupBox.Controls.Clear() 
```

或[`Control.ControlCollection.RemoveAt`方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.removeat.aspx)

```
While groupBox.Controls.Count > 0
    groupBox.Controls.RemoveAt(0)
End While 
```

或者通过使用带有 Remove 方法的 For 循环

```
For i As Integer = (groupBox.Controls.Count - 1) To 0 Step -1
  Dim ctrl As Control = groupBox.Controls(i)
  groupBox.Controls.Remove(ctrl)
  ctrl.Dispose()
Next i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-15T14:01:54.593

您可以简单地选择设计中的组框内容并将它们从 gb 中移开，然后您可以安全地删除它并根据需要移回内容。

# sql - 使用sql数据库驱动

> ID：16054317
> 
> 赞同：3
> 
> 时间：2013-04-17T07:42:46.423
> 
> 标签：sql, go

最终用户（开发或生产）能否推荐一个 Sql 驱动程序包，最好使用“database/sql”包。我对可以在 Windows 和/或 Linux（最好两者）上使用的 Postgres、ODBC、MySql（可能还有其他东西，但用于大容量 - 即不是 Sqlite）感兴趣。为了引起我的兴趣，它可能需要最近更新/维护，并且必须与最新的 Go 版本一起使用。效率（吞吐量）显然很重要。欢迎任何相关评论。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T11:23:43.653

GO-SQL 驱动程序（MySQL）：

> [https://github.com/Go-SQL-Driver/MySQL](https://github.com/Go-SQL-Driver/MySQL)

样品表：

```
CREATE TABLE `userinfo` (
    `uid` INT(10) NOT NULL AUTO_INCREMENT,
    `username` VARCHAR(64) NULL DEFAULT NULL,
    `departname` VARCHAR(64) NULL DEFAULT NULL,
    `created` DATE NULL DEFAULT NULL,
    PRIMARY KEY (`uid`)
)

CREATE TABLE `userdetail` (
    `uid` INT(10) NOT NULL DEFAULT '0',
    `intro` TEXT NULL,
    `profile` TEXT NULL,
    PRIMARY KEY (`uid`)
) 
```

示例代码：

```
package main

import (
    _ "github.com/Go-SQL-Driver/MySQL"
    "database/sql"
    "fmt"
)

func main() {
    db, err := sql.Open("mysql", "reckhou:reckhou@/test?charset=utf8")
    checkErr(err)

    //Insert
    stmt, err := db.Prepare("INSERT userinfo SET username=?,departname=?,created=?")
    checkErr(err)

    res, err := stmt.Exec("reckhou", "IT", "2010-10-02")
    checkErr(err)

    id, err := res.LastInsertId()
    checkErr(err)

    fmt.Println(id)

    // Update
    stmt, err = db.Prepare("update userinfo set username=? where uid=?")
    checkErr(err)

    res, err = stmt.Exec("update", id)
    checkErr(err)

    affect, err := res.RowsAffected()
    checkErr(err)

    fmt.Println(affect)

    //Query
    rows, err := db.Query("SELECT * FROM userinfo")
    checkErr(err)

    for rows.Next() {
        var uid int
        var username string
        var department string
        var created string
        err = rows.Scan(&uid, &username, &department, &created)
        checkErr(err)
        fmt.Println(uid)
        fmt.Println(username)
        fmt.Println(department)
        fmt.Println(created)
    }

    //Delete
    stmt, err = db.Prepare("delete from userinfo where uid=?")
    checkErr(err)

    res, err = stmt.Exec(id)
    checkErr(err)

    affect, err = res.RowsAffected()
    checkErr(err)

    fmt.Println(affect)

    db.Close()

}

func checkErr(err error) {
    if err != nil {
        panic(err)
    }
} 
```

PostgreSQL：

> [https://github.com/bmizerany/pq](https://github.com/bmizerany/pq)

样品表：

```
CREATE TABLE userinfo
(
    uid serial NOT NULL,
    username character varying(100) NOT NULL,
    departname character varying(500) NOT NULL,
    Created date,
    CONSTRAINT userinfo_pkey PRIMARY KEY (uid)
)
WITH (OIDS=FALSE);

CREATE TABLE userdeatail
(
    uid integer,
    intro character varying(100),
    profile character varying(100)
)
WITH(OIDS=FALSE); 
```

示例代码：

```
import (
    "database/sql"
    "fmt"
    _ "github.com/bmizerany/pq"
)

func main() {
    db, err := sql.Open("postgres", "user=reckhou password=reckhou dbname=test sslmode=disable")
    checkErr(err)

    //Insert
    stmt, err := db.Prepare("INSERT INTO userinfo(username,departname,created) VALUES($1,$2,$3) RETURNING uid")
    checkErr(err)

    res, err := stmt.Exec("reckhou", "IT", "2010-10-01")
    checkErr(err)

    id, err := res.LastInsertId()
    checkErr(err)

    fmt.Println(id)

    // Update
    stmt, err = db.Prepare("update userinfo set username=$1 where uid=$2")
    checkErr(err)

    res, err = stmt.Exec("update", 1)
    checkErr(err)

    affect, err := res.RowsAffected()
    checkErr(err)

    fmt.Println(affect)

    // Query
    rows, err := db.Query("SELECT * FROM userinfo")
    checkErr(err)

    for rows.Next() {
        var uid int
        var username string
        var department string
        var created string
        err = rows.Scan(&uid, &username, &department, &created)
        checkErr(err)
        fmt.Println(uid)
        fmt.Println(username)
        fmt.Println(department)
        fmt.Println(created)
    }

    // Delete
    stmt, err = db.Prepare("delete from userinfo where uid=$1")
    checkErr(err)

    res, err = stmt.Exec(1)
    checkErr(err)

    affect, err = res.RowsAffected()
    checkErr(err)

    fmt.Println(affect)

    db.Close()

}

func checkErr(err error) {
    if err != nil {
        panic(err)
    }
} 
```

# sms - 使用 pic16f877a 和 sim 300 发送短信

> ID：16054318
> 
> 赞同：0
> 
> 时间：2013-04-17T07:42:55.227
> 
> 标签：sms, pic

嗨，我在项目中发送消息时遇到问题，我使用的是 pic16f877a 和 sim300。main 函数重复运行。发送的短信中缺少某些字符。我的程序是这样的......

```
void main()//main function
{ 
    Serial_init();  // initialization of serial communication
    Send_SMS();
}

void Serial_init()
{
    TRISC=0XC0; 
    TXSTA=0x24;
    SPBRG=129; // set baud rate 9600 Hz for 20MHz fosc
    RCSTA=0x90;
    TXIF=1;
}   

void Send_SMS(void)
{
    USART_puts("AT\0");
    putch1(0x0D);
    Delay_ms4M(200);
    USART_puts("AT+CMGF=1\0");       // switch into text mode

    putch1(0x0D);// ascii of Carriage Return
    Delay_ms4M(200);
    USART_puts("AT+CMGS=\"9741153218\"\0");   // send sms to the number
    putch1(0x0D);   
    Delay_ms4M(200);                            
    USART_puts("Hi this is working LOL\0"); // SMS text
    putch1(0x0A); // new line
    Delay_ms4M(200);
    putch1(0x0D);
    Delay_ms4M(100);
    putch1(0x1A);   // ascii of 'substitute' i.e end of file 
}

void USART_puts(const unsigned char *string)
{
    while(*string)
        putch1(*string++);
} 

void putch1(unsigned char data)
{
    while(TXIF==0);
    TXREG=data;
} 
```

请帮忙

附加细节：所有其他程序运行正常，但如果我调用 send_sms 函数，“main”会重复运行，并且发送了几条缺少字符的消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T10:44:07.890

恕我直言 ：

**你的芯片正在复位**。这是最可能的原因。

要么它有**故障**，要么你在某处设置了看门狗**定时器****。**

* * *

**对于缺少的字符：**

a) 在数据传输过程中芯片复位。

b) usart 的经验法则：

停止向 usart 填充字节。以 10-20 微秒的小前导延迟发送每个字节。

通信是异步的，这意味着接收器必须在每个*通信单元*的开头**进行同步**，这是一个. 为此，接收器会使用资源来检测起始位、它的长度（时间）等。因此，如果您尝试发送字节序列，您将停止接收器。*`byte`*

 ** * *

您是否尝试过使用**另一个**16F877a 的代码？（检查芯片故障）...*

# java - 连续删除重复的相同字符

> ID：16054321
> 
> 赞同：2
> 
> 时间：2013-04-17T07:42:56.510
> 
> 标签：java

我正在尝试创建一种方法，该方法要么从字符串中删除所有重复项，要么根据参数仅在一行中保留相同的 2 个字符。

例如：

```
helllllllo -> helo 
```

或者

`helllllllo -> hello`- 这保留了双字母

目前我通过执行以下操作删除重复项：

```
private String removeDuplicates(String word) {
    StringBuffer buffer = new StringBuffer();
    for (int i = 0; i < word.length(); i++) {
        char letter = word.charAt(i);
        if (buffer.length() == 0 && letter != buffer.charAt(buffer.length() - 1)) {
            buffer.append(letter);
        }
    }
    return buffer.toString();
} 
```

如果我想保留双字母，我正在考虑使用私有字符串之类的方法`removeDuplicates(String word, boolean doubleLetter)`

当`doubleLetter`为真时，它不会`hello`返回`helo`

我不确定在不复制大量代码的情况下最有效的方法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T07:52:05.097

为什么不只使用正则表达式？

```
 public class RemoveDuplicates {
      public static void main(String[] args) {
           System.out.println(new RemoveDuplicates().result("hellllo", false)); //helo
           System.out.println(new RemoveDuplicates().result("hellllo", true)); //hello
      }

      public String result(String input, boolean doubleLetter){
           String pattern = null;
           if(doubleLetter) pattern = "(.)(?=\\1{2})";
           else pattern = "(.)(?=\\1)";
       return input.replaceAll(pattern, "");
      }
 }

 (.)    --> matches any character and puts in group 1\. 
 ?=     --> this is called a positive lookahead. 
 ?=\\1  --> positive lookahead for the first group 
```

因此，总的来说，这个正则表达式会自行查找后面的任何字符（正前瞻）。例如 aa 或 bb 等。需要注意的是，实际上只有第一个字符是匹配的一部分，所以在单词 'hello' 中，只有第一个 l 匹配（部分 (?=\1)**不是比赛的一部分**）。所以第一个 l 被一个空字符串替换，我们留下了 helo，它与正则表达式不匹配

第二个模式是一样的，但这次我们期待第一组的两次出现，例如hello。另一方面，'hello' 将不匹配。

在这里寻找更多信息：[正则表达式](http://www.regular-expressions.info/lookaround.html)

PS如果有帮助，请免费填写以接受答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T07:53:16.660

尝试

```
 String s = "helllllllo";
    System.out.println(s.replaceAll("(\\w)\\1+", "$1")); 
```

输出

```
helo 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:56:53.347

试试这个，这将是最有效的方法[评论后编辑]：

```
public static String removeDuplicates(String str) {
    int checker = 0;
    StringBuffer buffer = new StringBuffer();
    for (int i = 0; i < str.length(); ++i) {
        int val = str.charAt(i) - 'a';
        if ((checker & (1 << val)) == 0)
            buffer.append(str.charAt(i));
        checker |= (1 << val);
    }
    return buffer.toString();
} 
```

我正在使用位来识别唯一性。

编辑：

整个逻辑是，如果一个字符已被解析，则其对应的位被设置，并且下次当该字符出现时，它将不会被添加到字符串缓冲区中，相应的位已经设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:00:48.487

以前面的 SO 示例为起点，我想出了这个[：](https://stackoverflow.com/questions/664194/how-can-i-find-repeated-characters-with-a-regex-in-java)

```
 String str1= "Heelllllllllllooooooooooo";

    String removedRepeated = str1.replaceAll("(\\w)\\1+", "$1");
    System.out.println(removedRepeated);

    String keepDouble = str1.replaceAll("(\\w)\\1{2,}", "$1");
    System.out.println(keepDouble); 
```

它产生：

> 直升机
> 
> 海洛

它能做什么：

`(\\w)\\1+`将匹配任何字母并将其放在正则表达式捕获组中。该组稍后通过`\\1+`. 这意味着它将匹配前一个字母的一个或多个重复。

`(\\w)\\1{2,}`与上面相同，唯一的区别是它只关注重复超过 2 次的字符。这使双重字符保持不变。

编辑：重新阅读问题，您似乎想用双打替换多个字符。为此，只需使用以下行：

`String keepDouble = str1.replaceAll("(\\w)\\1+", "$1$1");`

# java - JTable - Boolean.class 单元渲染器和 Nimbus 外观问题

> ID：16054330
> 
> 赞同：7
> 
> 时间：2013-04-17T07:43:29.890
> 
> 标签：java, swing, jtable, ubuntu-12.04, nimbus

我正在使用 JTable 来可视化一些数据。一列注定要通过复选框显示布尔数据。我通过从我的表模型中覆盖的 getColumnClass() 函数返回 Boolean.class 来实现这一点。

不幸的是，这会导致一个带有复选框但没有适合当前行的背景颜色的单元格。

![原来的](https://www.abload.de/img/originaleqzo9.png)

我通过使用这篇文章的答案解决了这个问题：[JTable - Boolean Cell Type - Background](https://stackoverflow.com/questions/6601994/jtable-boolean-cell-type-background)

![Boolean.class 修复](https://www.abload.de/img/with_boolean_fixfkymr.png)

现在我试图增加交替行的对比度。我通过设置我正在使用的 Nimbus LAF 的适当属性来实现这一点。

```
UIDefaults defaults = UIManager.getLookAndFeelDefaults();
defaults.put("Table.alternateRowColor", new Color(217, 217, 217)); 
```

![设置 Nimbus 属性](https://www.abload.de/img/with_nimbus_property82y9z.png)

如您所见，布尔单元格的背景仍然是旧的 Nimbus`Table.alternateRowColor`颜色。

有没有办法改变这个？我这样做完全错了吗？有没有更好的方法来实现交替的背景颜色和更多的对比度？

编辑

引起

> java 版本 "1.7.0_17" Java(TM) SE Runtime Environment (build 1.7.0_17-b02) Java HotSpot(TM) Server VM (build 23.7-b01, mixed mode), OS 是 Ubuntu 12.04

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T08:04:50.503

我（终于）能够让它工作。秘诀是在创建任何内容之前更改默认值。

![在此处输入图像描述](https://i.stack.imgur.com/I4ZC6.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;
import javax.swing.JCheckBox;
import javax.swing.JComponent;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.Border;
import javax.swing.border.EmptyBorder;
import javax.swing.plaf.UIResource;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.TableCellRenderer;

public class TestTable10 {

    public static void main(String[] args) {
        new TestTable10();
    }

    public TestTable10() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                UIManager.getLookAndFeelDefaults().put("Table.alternateRowColor", Color.RED);

                JTable table = new JTable(new MyModel());
                ((JComponent) table.getDefaultRenderer(Boolean.class)).setOpaque(true);

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new JScrollPane(table));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class MyModel extends AbstractTableModel {

        @Override
        public int getRowCount() {
            return 10;
        }

        @Override
        public int getColumnCount() {
            return 2;
        }

        @Override
        public Object getValueAt(int rowIndex, int columnIndex) {
            switch (columnIndex) {
                case 0:
                    return "Hello";
                case 1:
                    return true;
            }
            return "?";
        }

        @Override
        public Class<?> getColumnClass(int columnIndex) {
            return columnIndex == 0 ? String.class : Boolean.class;
        }
    }

} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-17T08:00:44.227

*   我将使用标准渲染器概念来完成这项工作，而不是使用 Nimbus 常量

*   渲染器适用于 Nimbus，覆盖所有颜色，不包括 JTableHeader

*   基于@camickrs[表行渲染的代码](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/)

![在此处输入图像描述](https://i.stack.imgur.com/Yntbh.jpg)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.table.*;

public class TableRowRenderingTip extends JPanel {

    private static final long serialVersionUID = 1L;

    public TableRowRenderingTip() {
        Object[] columnNames = {"Type", "Company", "Shares", "Price", "Boolean"};
        Object[][] data = {
            {"Buy", "IBM", new Integer(1000), new Double(80.5), Boolean.TRUE},
            {"Sell", "Dell", new Integer(2000), new Double(6.25), Boolean.FALSE},
            {"Short Sell", "Apple", new Integer(3000), new Double(7.35), Boolean.TRUE},
            {"Buy", "MicroSoft", new Integer(4000), new Double(27.50), Boolean.FALSE},
            {"Short Sell", "Cisco", new Integer(5000), new Double(20), Boolean.TRUE}
        };
        DefaultTableModel model = new DefaultTableModel(data, columnNames) {
            private static final long serialVersionUID = 1L;

            @Override
            public Class getColumnClass(int column) {
                return getValueAt(0, column).getClass();
            }
        };
        JTabbedPane tabbedPane = new JTabbedPane();
        tabbedPane.addTab("Alternating", createAlternating(model));
        add(tabbedPane);
    }

    private JComponent createAlternating(DefaultTableModel model) {
        JTable table = new JTable(model) {
            private static final long serialVersionUID = 1L;

            @Override
            public Component prepareRenderer(TableCellRenderer renderer, int row, int column) {
                Component c = super.prepareRenderer(renderer, row, column);
                if (!isRowSelected(row)) { //  Alternate row color
                    c.setBackground(row % 2 == 0 ? getBackground() : Color.orange);
                }
                return c;
            }
        };
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        ((JComponent) table.getDefaultRenderer(Boolean.class)).setOpaque(true);
        return new JScrollPane(table);
    }

    public static void main(String[] args) {
        try {
            for (UIManager.LookAndFeelInfo info : UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (Exception e) {
            return;
        }
        SwingUtilities.invokeLater(new Runnable() {
            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }

    public static void createAndShowGUI() {
        JFrame.setDefaultLookAndFeelDecorated(false);
        JFrame frame = new JFrame("Table Row Rendering");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new TableRowRenderingTip());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-10T11:44:58.230

为了解决这个问题，我使用**了 jxtable()**而不是 jtable() 并且我使用了自己的 prepareRenderer 作为行颜色（你可以使用 mKorbel 的，将它放到 netbeans 中的表格中，只需为 jxtable() 组件自定义代码），因为这个解决方案：[JTable - 布尔单元格类型 - 背景](https://stackoverflow.com/questions/6601994/jtable-boolean-cell-type-background)对我来说不适用于多色行。我的平台：Windows 7 32bit，java 版本“1.7.0_21”，Java(TM) SE Runtime Environment (build 1.7.0_21-b11)，Java HotSpot(TM) Client VM（build 23.21-b01，混合模式，共享），网豆 IDE 7.3

这是png（没有足够的声誉：D）：[jxtable()](http://pasteboard.co/2k7VnUjh.png)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-09T23:38:08.363

在设置 Nimbus L&F 之后，立即添加以下行：

```
 UIManager.getLookAndFeelDefaults().put("Table:\"Table.cellRenderer\".background", Color.DARK_GRAY);
    UIManager.getLookAndFeelDefaults().put("Table.background",new ColorUIResource(Color.DARK_GRAY));
    UIManager.getLookAndFeelDefaults().put("Table.alternateRowColor",Color.DARK_GRAY.brighter()); 
```

注意 Table.background 的 ColorUIResource 用法。这为我解决了复选框背景问题。

# java - 如何在 JUnit 测试中使用 AppStats？（谷歌应用引擎）

> ID：16054339
> 
> 赞同：2
> 
> 时间：2013-04-17T07:43:54.517
> 
> 标签：java, google-app-engine, junit, appstats

我正在为 Google App Engine 实施一个项目。

此时我有以下设置：

*   我有几个 servlet 可以将一些数据返回给客户端应用程序（例如 Android/iOS 客户端）
*   为了测试这个 servlet，我创建了访问这个 servlet 的 junit 测试。
*   在 servlet 内部，有一些逻辑可以确定我们是在运行测试还是从客户端进行实际调用。如果我们在本地机器上运行测试，我们会初始化 LocalServiceTestHelper 以使数据存储、内存缓存等工作。

这一切都很好。

现在问题来了。当我将 AppStats 过滤器添加到我的 web.xml 时，这也适用于在语言环境 junit 测试中使用的 servlet。但是 AppStats 过滤器不起作用。运行测试时，我得到以下堆栈跟踪：

```
java.lang.NullPointerException
    at com.google.appengine.tools.appstats.Recorder.checkNotNull(Recorder.java:378)
    at com.google.appengine.tools.appstats.Recorder.<init>(Recorder.java:210)
    at com.google.appengine.tools.appstats.Recorder.<init>(Recorder.java:200)
    at com.google.appengine.tools.appstats.AppstatsFilter.init(AppstatsFilter.java:183)
    at org.mortbay.jetty.servlet.FilterHolder.doStart(FilterHolder.java:97)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:593)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1220)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:513)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:448)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.handler.RequestLogHandler.doStart(RequestLogHandler.java:115)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
    at org.mortbay.jetty.Server.doStart(Server.java:222)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:39)
    at com.google.gwt.dev.shell.jetty.JettyLauncher.start(JettyLauncher.java:672)
    at com.google.gwt.dev.DevMode.doStartUpServer(DevMode.java:509)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1093)
    at com.google.gwt.junit.JUnitShell.getUnitTestShell(JUnitShell.java:707)
    at com.google.gwt.junit.JUnitShell.runTest(JUnitShell.java:652)
    at com.google.gwt.junit.client.GWTTestCase.runTest(GWTTestCase.java:441)
    at junit.framework.TestCase.runBare(TestCase.java:141)
    at junit.framework.TestResult$1.protect(TestResult.java:122)
    at junit.framework.TestResult.runProtected(TestResult.java:142)
    at junit.framework.TestResult.run(TestResult.java:125)
    at junit.framework.TestCase.run(TestCase.java:129)
    at com.google.gwt.junit.client.GWTTestCase.run(GWTTestCase.java:296)
    at junit.framework.TestSuite.runTest(TestSuite.java:255)
    at junit.framework.TestSuite.run(TestSuite.java:250)
    at junit.framework.TestSuite.runTest(TestSuite.java:255)
    at junit.framework.TestSuite.run(TestSuite.java:250)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)
    at org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906) 
```

有人知道为什么 AppStats 会出现 NullPointerException 吗？

据我所知，我在这里有两个选择：

1.  让 AppStats 过滤器在我当前的 junit 测试中工作。
2.  为我的语言环境 junit 测试禁用 AppStats 过滤器，但在正常调用 servlet 时保持它处于活动状态。

两者都很好，但我更喜欢选项 1。

* * *

2013 年 4 月 19 日更新：

*   我尝试在过滤器之前初始化 MemCache（如下所述），但这似乎没有解决任何问题。与以前相同的堆栈跟踪。
*   从 Recorder.java 源代码中，我发现构造函数中的 Delegate 参数可能为空，但我不知道为什么。（[https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/tools/appstats/Recorder.java](https://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/tools/appstats/Recorder.java)）

# php - 如何使用单个查询更新具有相同记录字段的记录？

> ID：16054344
> 
> 赞同：2
> 
> 时间：2013-04-17T07:44:14.937
> 
> 标签：php, mysql

我有一个用户表，其列名称为 id、father_email、mother_email、email_notification 等等，现在我想更新 email_notification 列

**父亲电子邮件，母亲电子邮件**我用多个查询完成了它，但我想知道如何只用单个查询来完成它，这样可以节省执行时间。

我的代码如下：

```
<?php 
    $qry="SELECT id,CONCAT(father_email,',',mother_email) as notify FROM user";
    $query=mysql_query($qry);
    while($row=mysql_fetch_assoc($query))
    {
        $qry2="UPDATE user SET email_notification='".$row['notify']."' WHERE id=".$row['id']."";
        mysql_query($qry2);
    }
?> 
```

它工作正常，但我想知道如何使用单个查询来做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T07:45:44.873

这将更新所有用户的所有 email_notification 列：

```
UPDATE user
SET email_notification = CONCAT_WS(',', father_email, mother_email) 
```

（我认为最好使用 CONCAT_WS 来跳过父亲电子邮件或母亲电子邮件中的空值）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:46:33.447

这将取代所有这些

```
UPDATE user AS u
INNER JOIN user AS ul ON ul.id = u.id
SET u.email_notification = CONCAT(ul.father_email,',',ul.mother_email)

UPDATE user
SET email_notification = CONCAT_WS(',', father_email, mother_email) 
```

# python - 在 python 生产者线程中删除 shouldStop 变量的使用

> ID：16054348
> 
> 赞同：0
> 
> 时间：2013-04-17T07:44:40.247
> 
> 标签：python, multithreading

我在 python 中编写了一个生产者线程，我想在设置某个事件时停止它的执行。我不知道如何使用`threading.Event`这个目的。所以，我自己写了一些代码：-

我使用了一个`self.shouldStop`默认设置为 False 的变量。每当我希望停止生产者线程的执行时，我设置`p.shouldStop`为 True

```
import Queue
import threading
import time

class ProducerThread( threading.Thread ):
    def __init__( self, q ):
        super( ProducerThread, self ).__init__()

        self._q = q
        self.shouldStop = False
    def run( self ):
        for i in range( 5 ):
            if self.shouldStop is True:
                return
            self._q.put( i )

class ConsumerThread( threading.Thread ):
    def __init__( self, q ):
        super( ConsumerThread, self ).__init__()
        self._q = q

    def run( self ):
        while True:
            data = self._q.get()
            if data == 'Stop':
                print 'returning from the thread as I got %s message' % data
                return
            print "%s got %s. Sleeping for %s seconds. %s" % ( self.getName(), data, data, time.time() )
            time.sleep( data )
            print "%s woke up from sleep after %s seconds %s" % ( self.getName(), data, time.time() )
    def stop( self ):
        self._q.put( "Stop" )
if __name__ == '__main__':
    q = Queue.Queue( 1 )
    p = ProducerThread( q )
    t = ConsumerThread( q )
    p.start()
    t.start()
    p.shouldStop = True
    p.join()
    t.stop()
    t.join() 
```

我的问题是：

有没有更好的方法通过删除使用`shouldStop`和使用来实现这一点`threading.Event`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:40:18.190

您必须在所有线程之间共享相同的事件对象（就像您已经对队列所做的那样）。

然后用于[`is_set()`](http://docs.python.org/2/library/threading.html#threading.Event.is_set)检查是否设置了事件。您还可以使用[`wait()`](http://docs.python.org/2/library/threading.html#threading.Event.wait)(with a timeout) 并捕获超时错误来确定事件是否已设置。我发现解决方案`is_set()`更容易阅读，所以这就是下面发布的内容：

```
import Queue
import threading
import time

class ProducerThread(threading.Thread):

    def __init__(self, work_queue, shutdown_event):
        super(ProducerThread, self).__init__()

        self._work_queue     = work_queue
        self._shutdown_event = shutdown_event

    def run(self):
        for i in range(5):
            if self._shutdown_event.is_set():
                return
            else:
                self._work_queue.put(i)

class ConsumerThread(threading.Thread):

    def __init__(self, work_queue, shutdown_event):
        super(ConsumerThread, self).__init__()
        self._work_queue     = work_queue
        self._shutdown_event = shutdown_event

    def run(self):
        while True:
            try:
                data = self._work_queue.get(timeout=1)
            except Queue.Empty:
                if self._shutdown_event.is_set():
                    print 'returning from thread; queue is empty and ' \
                          'shutdown_event.is_set() is True'
                    return
                else:
                    continue
            if self._shutdown_event.is_set():
                print 'returning from thread; shutdown_event.is_set() is True'
                return
            else:
                print "%s got %s. Sleeping for %s seconds. %s" % (
                    self.getName(), data, data, time.time())
                time.sleep(1.0+data/10)
                print "%s woke up from sleep after %s seconds %s" % (
                    self.getName(), str(1.0+data/10), time.time())

if __name__ == '__main__':
    work_queue = Queue.Queue(maxsize = 1)
    shutdown_event = threading.Event()
    producer = ProducerThread(work_queue, shutdown_event)
    consumer = ConsumerThread(work_queue, shutdown_event)
    producer.start()
    consumer.start()
    p
    time.sleep(10)
    print 'MainThread: calling shutdown_event.set()'
    shutdown_event.set()
    producer.join()
    consumer.join() 
```

# amazon-s3 - 如何防止使用 amazon cloudfront 窃取我的视频

> ID：16054349
> 
> 赞同：1
> 
> 时间：2013-04-17T07:44:42.590
> 
> 标签：amazon-s3, amazon-cloudfront

我创建了分发 ID。它具有以下属性

```
Array (
    [id] => E3VYXDXV1O9WXQ
    [status] => Deployed
    [time] => 1365430752
    [domain] => d1fhielx2etku.cloudfront.net
    [enabled] => 1
    [origin] => avijit_bucket.s3.amazonaws.com
    [originAccessIdentity] => 
    [defaultRootObject] => 
    [cnames] => Array
        (
            [mycustomvideo1.com] => mycustomvideo1.com
        )

    [trustedSigners] => Array
        (
        )

    [comment] => New distribution created ) 
```

下一步是什么。我如何访问视频

# database - LUN 的 WWN 作为表中的 PK

> ID：16054351
> 
> 赞同：0
> 
> 时间：2013-04-17T07:44:42.840
> 
> 标签：database, san

我正在开发一个应用程序来监控 RAID 和 LUN。作为其中的一部分，我必须设计一个表格来保存来自不同供应商的 RAID 的 LUN 信息。我知道供应商特定的 WWN 中有一个标准，但我不太确定 WWN 在 RAID 中的独特性。比如说，如果 HP EVA LUN 的 WWN 为 6001438009B013EC0000700000050000，那么假设没有 RAID 的其中一个 LUN 有这个 WWN 有多安全？我希望 WWN 作为我的“lun info”表的 PK。这样好吗？

请协助我。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-27T14:06:28.433

WWN 应该是来自任何拥有自己的 IEEE OUI 编号的供应商的全球唯一标识符。

[http://standards.ieee.org/develop/regauth/oui/oui.txt](http://standards.ieee.org/develop/regauth/oui/oui.txt)

# jquery - 从 Jquery 中的表中获取选定的文本

> ID：16054359
> 
> 赞同：0
> 
> 时间：2013-04-17T07:45:02.147
> 
> 标签：jquery

有没有一种方法可以在 _mouseStop 之后使用 jquery 在表格中获取选定的文本？

```
<table id='grid' class='TableStyle'>

    <tr>
        <td class='cellGrid'>F</td>                                                                      
        <td class='cellGrid'>W</td>
    </tr>

    <tr>
        <td class='cellGrid'>F</td>                                                                      
        <td class='cellGrid'>W</td>
    </tr>

</table> 
```

当文本被突出显示时，那个 的类`td`被更改为`cellHighlight`。

我认为我需要在表格网格中循环并找到他们的类是`cellHighlight`然后`.text()`用来获取值的那些？

我对吗？如果是，有没有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:55:37.793

如果一次只能突出显示一 (1) 个，那么您可以这样做

```
var hightlightedText = $('table#grid td.cellHighlight').text();
console.log(hightlightedText); 
```

但是，如果您有多种情况：

```
var cells = $('#grid .cellHighlight');
var texts = []
$.each(cells, function(index){
    texts.push($(cells[index]).text());
});
console.log(texts);
>> ["W", "F"] 
```

[在这里找到一个示例 JsFiddle](http://jsfiddle.net/R2H5n/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:47:57.837

```
 var txt = $("#grid .cellHighlight").text() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T07:51:21.917

如果您只想在页面上的任何位置获取 selectedText 。你应该做这个。

```
function getSelectionText() {
    var text = "";
    if (window.getSelection) {
        text = window.getSelection().toString();
    } else if (document.selection && document.selection.type != "Control") {
        text = document.selection.createRange().text;
    }
    alert( text);
} 
```

看到这个[小提琴](http://jsfiddle.net/9Qr9G/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T07:56:26.300

我发现了一些你想要的有趣的东西，可能是这样的：

```
function getSelectionHtml() {
    var html = "";
    if (typeof window.getSelection != "undefined") {
        var sel = window.getSelection();
        if (sel.rangeCount) {
            var container = document.createElement("div");
            for (var i = 0, len = sel.rangeCount; i < len; ++i) {
                container.appendChild(sel.getRangeAt(i).cloneContents());
            }
            html = container.innerHTML;
        }
    } else if (typeof document.selection != "undefined") {
        if (document.selection.type == "Text") {
            html = document.selection.createRange().htmlText;
        }
    }
    alert(html);
} 
```

艾莉森在这篇文章[**How to get selected(user-highlighted) text in contenteditable element 中回答了这个问题并替换它？**](https://stackoverflow.com/questions/6251937/how-to-get-selecteduser-highlighted-text-in-contenteditable-element-and-replac)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T08:06:26.917

```
$("#grid .cellGrid").mouseup( function(){    
    alert($(this).html());
}); 
```

# mysql - 会话关闭异常

> ID：16054362
> 
> 赞同：0
> 
> 时间：2013-04-17T07:45:15.217
> 
> 标签：mysql, hibernate, struts2, spring-3, c3p0

我正在使用 Struts 2 hibernate spring 3 构建一个应用程序，其中我的 sql 作为后端和 c3p0 连接池（c3p0-0.9.1.1 jar）。

有时，在执行查询时，我会收到以下错误。每当我执行查询时，我都会检查连接是否关闭，如果它关闭，我将在执行查询之前打开一个新连接。

* * *

```
public List<T> find(final Query query, final Object[] values) throws HibernateException, NullPointerException {  
        if (values != null) {  
            for (int i = 0; i < values.length; i++) {  
                query.setParameter(i, values[i]);  
            }  
        }  
        List<T> resultList = null;  
        if (hibernateSession == null || !hibernateSession.isOpen()) {  
            try {  
                openHibernateSession();  
                resultList = query.list();  
            } catch (Exception e) {  
                e.printStackTrace();  
            } finally {  
                closeHibernateSession();  
            }  
        } else {  
            resultList = query.list();  
        }  
        return resultList;  
    } 
```

* * *

```
public List<T> find(final String queryString, final Object[] values) throws HibernateException {  
        if (hibernateSession == null || !hibernateSession.isOpen()) {  
            openHibernateSession();  
        }  
        Query queryObject = hibernateSession.createQuery(queryString);  
        return find(queryObject, values);  
    } 
```

* * *

```
private void openHibernateSession() throws HibernateException {  
    try {  
        hibernateSession = HibernateUtil.getSessionFactory().openSession();  
        hibernateSession.setFlushMode(FlushMode.MANUAL);  
        hibernateTransaction = hibernateSession.getTransaction();  
        hibernateTransaction.begin();  
    } catch (Exception e) {    
        e.printStackTrace();  
    }  

} 
```

* * *

```
private void closeHibernateSession() {  
    try {  

        if (hibernateTransaction != null) {  
            hibernateSession.flush();  
            if (!hibernateTransaction.wasCommitted()) {  
                hibernateTransaction.commit();  
            }  

        }  
        if (hibernateSession != null) {  
            if (hibernateSession.isOpen()) {  
                hibernateSession.close();  
            }  
        }  
    } catch (Exception e) {  
        e.printStackTrace();  
    }  
} 
```

* * *

```
 <property name="hibernate.dialect">org.hibernate.dialect.MySQLDialect</property>  
    <property name="hibernate.connection.driver_class">com.mysql.jdbc.Driver</property>  
    <property name="hibernate.connection.url">jdbc:mysql://localhost:3306/projectdb</property>  
    <property name="hibernate.connection.username">root</property>  
    <property name="hibernate.connection.password">root</property>  

    <property name="show_sql">true</property>  
    <property name="format_sql">true</property>   

    <property name="hbm2ddl.auto">update</property>  
    <property name="hibernate.c3p0.min_size">5</property>  
    <property name="hibernate.c3p0.max_size">20</property>  
    <property name="hibernate.c3p0.timeout">1800</property>  
    <property name="hibernate.c3p0.max_statements">50</property>  
    <property name="hibernate.c3p0.idle_test_period">50</property>  
    <property name="hibernate.connection.provider_class">org.hibernate.connection.C3P0ConnectionProvider</property>  
    <property name="hibernate.c3p0.acquire_increment">2</property>  

    <property name="hibernate.c3p0.usesTraditionalReflectiveProxies">true</property>  
    <property name="connection.pool_size">20</property>  
    <property name="current_session_context_class">thread</property>  
    <property name="cache.provider_class">org.hibernate.cache.NoCacheProvider</property>  

    <property name="hibernate.connection.isolation">4</property> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:08:12.437

你可以很容易地解决你最直接的问题。让您的 closeHibernateSession() 可靠地将 hibernateSession 设置为 null。这将强制您的查询函数创建新的会话，而不是尝试重用旧的、关闭的会话。

**但不要只是这样做。你有更大的问题。**

你需要更清楚地组织你的休眠会话。从上面的代码中，很明显你有一个名为 hibernateSession 的成员变量，它可以由多个调用者或多个查询共享，有时为空，有时不为空，各种函数延迟初始化，但可能直到一段时间后才会关闭线。这一点都不好。

在最简单的安排中，不要将会话作为成员变量。将其保存为局部变量。让 openHibernateSession() 返回一个会话，该会话将在 finally 块中完全确定地关闭。如果由于某种原因您需要会话比单个函数调用可以封装的内容更长（当然，这可能会调用许多其他函数，每个函数都可能将会话作为参数），您将必须非常非常小心。打开的会话必须可靠地关闭（），并且您必须了解它们的生命周期。您当前的方法，如果一个会话已经打开，则使用一个会话，否则创建一个临时会话，这是不好的。如果你坚持维护一个 Session 成员变量，你必须非常确定地知道，无论何时初始化成员变量，

您还应该了解您的交易，这些都不是“如果我在 close() 之前有未提交的交易，请提交它。”

另外，请考虑迁移到 c3p0-0.9.2.1

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:05:14.633

当您尝试保存或更新瞬态实例时，请确保与实例关联的实体是持久的。这是用户尝试使用分离的引用持久化实体的新实例的常见错误。在将实体的引用设置为要持久化的瞬态或分离实例之前，从持久化上下文中获取实体。

# json - Jackson 将 String 属性序列化和反序列化为 JSON

> ID：16054366
> 
> 赞同：2
> 
> 时间：2013-04-17T07:45:44.187
> 
> 标签：json, serialization, jackson, deserialization, playframework-2.1

我有一个看起来像这样的模型（播放 2.1.1 java ebean）

```
@Entity
public class Link extends Model {
    @Id
    public Long id;

    @Lob
    public String points;
} 
```

其中 points 是一个原始 json 字符串，其中包含数组中的 x、y 坐标。

我不想将其反序列化为点数组，因为它只会用于 UI。因此，我想将其保存到数据库中的文本字段

我希望属性点在通过线路发送到前端时被序列化为 json 数组，并且我希望前端能够发送 json 数组并再次将其变为字符串。

在控制器中：

```
// Serialize
List<Link> links = Link.findAll();
return ok(Json.toJson(links));

// Deserialize
Link link = Json.fromJson(request().body().asJson(), Link.class); 
```

我该怎么做？

自定义序列化器，反序列化器？

@JsonRawValue？

还有其他注释吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T11:19:11.683

答案比你想象的要简单得多。

```
@Lob
public String points;

public JsonNode getPoints() {
    return Json.parse(StringUtils.isBlank(points) ? "[]" : points);
}

@JsonSetter
public void setPoints(JsonNode json) {
    points = json.toString();
} 
```

虽然我不太喜欢 getter 和 setter，但它确实有效。

如果有人有更通用的更好解决方案，请随时发布另一个答案:)

# c# - 无法加载设置文件。它可能已损坏或包含无效的 XML 或包含重复的标识符

> ID：16054368
> 
> 赞同：0
> 
> 时间：2013-04-17T07:45:46.430
> 
> 标签：c#, xml, asp.net-mvc, visual-studio-2012

我正在尝试打开我的项目 Settings XMl

为了向它添加一些可配置的对

但我收到此错误：

```
Unable to load settings file.  It might be corrupted or contain invalid XML or contain duplicate identifiers. 
```

但是，我的 XML 很薄：

```
<?xml version='1.0' encoding='utf-8'?>
<SettingsFile xmlns="http://schemas.microsoft.com/VisualStudio/2004/01/settings" CurrentProfile="(Default)" GeneratedClassNamespace="Conduit.Mam.MaMDBEntityFramework.Properties" GeneratedClassAppName="Settings">
  <Profiles />
  <Settings>
    <Setting AppName="SavedSuccessfullyInDB" Type="System.String" Scope="Application">
      <Value Profile="(Default)">The Test saved in DB successfully</Value>
    </Setting>
  </Settings>
</SettingsFile> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T14:12:01.837

我也有这个错误（“无法加载设置文件。它可能已损坏或包含无效的 XML 或包含重复的标识符。”）这也是 resharper 重构的结果。经过一番研究，这是我的解决方案：

1.  关闭 Visual Studio
2.  导航到项目`Properties`目录
3.  删除`Settings.settings`和`Settings.Designer.cs`
4.  启动 Visual Studio 并打开您的项目
5.  添加新设置（属性 -> 设置）

这种方法的美妙之处在于，Visual Studio 将读取您的 app/web.config 并注意到您已经有条目并会自动为您添加这些键/值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:42:36.683

Your XML declaration is using single quotes. I thought it needed to be double quotes. Might be worth a try.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T22:43:56.230

“SettingsFile”节点的属性应该是“GeneratedClassName”而不是“GeneratedClassAppName”。同样，“Setting”节点上的“AppName”属性应该是“Name”。

就我而言，我认为原因是 Resharper 过于激进的重构。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-05T15:48:42.437

我的 app.config 中的这个简单的区分大小写问题导致了我的问题

```
 <setting Name="BlankPrescriberNoWhenWelshFormInGroup" serializeAs="String">
    <value>2</value>
  </setting> 
```

这需要是“名称”而不是“名称”

```
 <setting name="BlankPrescriberNoWhenWelshFormInGroup" serializeAs="String">
    <value>2</value>
  </setting> 
```

但是请注意，我之前在输入大写字母“S”时也遇到过这个

```
<Setting name="value" serializeAs="String"> 
```

在我的 app.config 中，而不是小写的 's'

```
<setting name="value" serializeAs="String"> 
```

所以区分大小写可以让你在这里小心！还有一个要注意的和大写的“V”

```
<Value>2</Value> 
```

当它真的只喜欢'v'时

```
<value>2</value> 
```

# javascript - Sencha ExtJs 使用命名空间前缀调用函数？

> ID：16054370
> 
> 赞同：0
> 
> 时间：2013-04-17T07:45:48.423
> 
> 标签：javascript, extjs

我有两个模型和一个加载成功回调函数，如下所示：

```
Ext.define('Desktop.model.User', {
    extend: 'Ext.data.Model',
    hasMany: ['Desktop.model.Module'],
    //......
});
Ext.define('Desktop.model.Module', {
    extend: 'Ext.data.Model',
    belongsTo: 'Desktop.model.User'
    //......
}); 
```

和

```
Desktop.model.User.load('', {
    success : function(user,options) {
        user.desktop.model.modules().each(function(module) {
            //**** ERROR HERE ****
            //.......
        }
    }
}); 
```

在调试断点处，我可以看到有一个`desktop.model.modules()`商店自动生成的用户对象中有一个函数，但我不确定调用它的正确语法。如果我像上面那样直接调用它，则会发生错误，说 desktop.model 未定义，将其视为属性而不是模块模型的命名空间的一部分。

我对命名空间采取了错误的方法吗？或者我如何正确调用具有该命名空间的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:07:56.127

`name`在 hasMany 上指定属性：

```
Ext.define('Desktop.model.User', {
    extend: 'Ext.data.Model',
    hasMany: {
        model: 'Desktop.model.Module',
        name: 'modules'
    }
});
// Later
user.modules().each(); 
```

# iphone - 使用其他用户名登录 Facebook

> ID：16054371
> 
> 赞同：0
> 
> 时间：2013-04-17T07:45:48.813
> 
> 标签：iphone, ios, objective-c, facebook-ios-sdk

我在使用 Facebook 登录时遇到问题。我在我的 Facebook id 上创建应用程序，并且从我的应用程序中我能够登录并获取用户信息。它适用于我的 Facebook 用户名。但是，当我在 Facebook 中使用其他用户名登录并获取数据时，它无法正常工作。为什么它适用于我。但不适用于其他用户。

它显示以下错误。

![错误](https://i.stack.imgur.com/nbGjP.png)

如果我使用我的 ID 登录，那么它可以正常工作。

请帮我。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:03:39.783

在 facebook 的应用程序设置中将沙盒模式设置为 no。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:11:47.143

![](https://i.stack.imgur.com/kVrst.png)

检查您的应用设置 -> 沙盒模式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:05:47.320

问题可能是新用户没有授予您的应用程序获取数据的权限。验证当新用户登录时。请求基本权限，然后尝试获取数据。

# java - 对等方重置连接：套接字写入错误 c++ - java

> ID：16054372
> 
> 赞同：0
> 
> 时间：2013-04-17T07:45:53.297
> 
> 标签：java, c++, sockets

我正在尝试编写用于文件传输的服务器客户端应用程序。客户端是用 Java 编写的，服务器是用 C++ 编写的。

不幸的是，我有以下错误：

> java.net.SocketException：对等方重置连接：套接字写入错误“

这是我的客户代码：

```
 import java.io.*;
 import java.net.Socket;

 public class Proba_binar 
 {
     public static void main(String[] args) 
     {
         byte[] buffer = null;  
         byte[] auxByte = new byte[1000];  
         String fileName = "1.jpg";
         File a_file = new File(fileName);  
         try  
         {
             // Create a socket
             Socket socket = new Socket("192.168.14.146", 8888);

             BufferedWriter out = new BufferedWriter(new OutputStreamWriter(socket.getOutputStream()));

             BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

             // Read file
             FileInputStream fis = new FileInputStream(fileName);    
             int length = (int)a_file.length();  
             buffer = new byte[length];  
             fis.read(buffer);  
             fis.close();  

             // Send file length
             System.out.println("length = " + Integer.toString(length));
             out.write(Integer.toString(length) + "\n");
             out.flush();

             // Send file
             int imageSize = buffer.length;
             char[] auxChar = new char[1000];
             int nr_transf = imageSize / 1000;
             int rest_byte = imageSize % 1000;
             System.out.println("nr_transf = " + nr_transf);

             for(int j = 0; j < nr_transf; j++)
             {
                 // send series of 1000 bytes
                 for(int i = 0; i < 1000; i++)
                 {
                     auxChar[i] = (char)buffer[j*1000+i];
                     auxByte[i] = buffer[j*1000+i];
                 }
                 out.write(auxChar);
                 out.flush();
             }

             // send last bytes
             for(int i = 0; i < rest_byte; i++)
             {
                 auxChar[i] = (char)buffer[1000*nr_transf+i];
                 auxByte[i] = buffer[1000*nr_transf+i];
             }
             out.write(auxChar, 0, rest_byte);
             out.flush();

             out.close();
            in.close();
            socket.close();
            System.out.println("Transfer finished!");
         }  
         catch(IOException e)  
         {  
             e.printStackTrace();  
         } 
     }
 } 
```

服务器的代码：

```
 int main(int argc , char *argv[])

 {

     WSADATA wsa;

     SOCKET s , new_socket;

     struct sockaddr_in server , client;

     int c, bytecount, nr_transf, rest_byte, i;

     int recv_size, file_size;

     char message[1000];

    char buffer[1000];
    int buffer_len = 1000;
    FILE *f = fopen("out.jpg", "wb");

     printf("\nInitialising Winsock...");
     if (WSAStartup(MAKEWORD(2, 2),&wsa) != 0)
     {
         printf("Failed. Error Code : %d",WSAGetLastError());
         return 1;
    }

     printf("Initialised.\n");

     //Create a socket
     if((s = socket(AF_INET, SOCK_STREAM, 0 )) == INVALID_SOCKET)
     {
         printf("Could not create socket : %d" , WSAGetLastError());
        getch();
        return 0;
     }

     printf("Socket created.\n");

     //Prepare the sockaddr_in structure
     server.sin_family = AF_INET;
     server.sin_addr.s_addr = INADDR_ANY;
     server.sin_port = htons( 8888 );

     //Bind
     if(bind(s, (struct sockaddr*)&server, sizeof(server)) == SOCKET_ERROR)
     {
         printf("Bind failed with error code : %d" , WSAGetLastError());
        getch();
        return 0;
     }

     puts("Bind done");

     //Listen to incoming connections
     listen(s, 3);

     //Accept and incoming connection
     puts("Waiting for incoming connections...");

     c = sizeof(struct sockaddr_in);
     new_socket = accept(s, (struct sockaddr*)&client, &c);
     if (new_socket == INVALID_SOCKET)
     {
         printf("accept failed with error code : %d", WSAGetLastError());
        getch();
        return 0;
     }

     puts("Connection accepted");

     //Receive FILE DIMENSION from client

     if((recv_size = recv(new_socket, message, 1000, 0)) == SOCKET_ERROR)
     {
         puts("recv failed");
        getch();
     }     
        message[recv_size] = '\0';
    file_size = atoi(message);

    printf("\nfile_size = %d", file_size);

    nr_transf = file_size / 1000;
    rest_byte = file_size % 1000;

    //Receive FILE from client

    for(i = 0; i < nr_transf; i++)

    {

        // receive 1000 bytes

        if((bytecount = recv(new_socket, buffer, buffer_len, 0)) == SOCKET_ERROR)   

        {

            printf("Receive failed auxChar");

            getch();

            return 0;

        }

        fwrite(buffer, 1, buffer_len, f);

    }

    // receive last bytes

    if((bytecount = recv(new_socket, buffer, rest_byte, 0)) == SOCKET_ERROR)    

    {

        printf("Receive failed rest_byte");

        getch();

        return 0;

    }

    fwrite(buffer, 1, rest_byte, f);

    fclose(f);

    printf("Receive finished!");

     closesocket(s);

     WSACleanup();

    getch();

     return 0;

 } 
```

我用 Java 制作了等效的服务器并且运行良好。不知道c++版本是什么问题。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:16:40.143

[`recv()`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms740121%28v=vs.85%29.aspx)不保证它将读取请求的所有字节：

> ...调用 recv 将返回当前可用的尽可能多的数据——最大为指定缓冲区的大小...

这意味着`for`/`recv`循环的结构不正确，可能是服务器认为它已经读取了所有数据但实际上没有读取的情况。这会导致服务器在客户端发送完所有数据之前就关闭了套接字，从而导致 Java 客户端报错。

`recv`循环的示例（未经测试）重组：

```
int totalBytesRead = 0;
int bytesRead;
while (totalBytesRead < file_size)
{
    if((bytesRead = recv(new_socket, buffer, buffer_len, 0)) == SOCKET_ERROR)
    {
        /* Handle failure. */
        break;
    }

    if (bytesRead != fwrite(buffer, 1, bytesRead, f))
    {
        /* Handle failure. */
        break;
    }

    totalBytesRead += file_size;
} 
```

请记住，连接的套接字是基于流的，使用 mutilple `send()`s 并不意味着匹配`recv()`的 s 将读取与发送时相同的“块”中的数据。除了已经提到的数据内容检索错误之外，这同样适用于文件大小的读取。无法保证会读取整个文件大小。

我建议设计一个简单的协议来确保正确读取不同类型的数据。例如，客户端发送：

> <文件大小>\n<文件内容>

服务器读取所有数据直到换行符并将其转换为文件大小。然后服务器确定它具有正确的文件大小。然后服务器`file_size`从套接字读取字节。最后，服务器响应指示成功或失败：

> 成功\n

客户端读取换行符以获取响应。

# smtp - Phpmailer SMTP 500 错误

> ID：16054380
> 
> 赞同：0
> 
> 时间：2013-04-17T07:46:16.080
> 
> 标签：smtp, phpmailer

使用 phpmailer smtp 功能时收到错误消息。我正在使用 php5，下面是我使用的代码。

```
 require_once("class.phpmailer.php");
    $mail = new PHPMailer();

    $mail->IsSMTP(); 
    $mail->SMTPDebug = 1;  
    $mail->SMTPAuth = true;  
    $mail->Host = 'mail.mydomain.com';
    $mail->Port = 21; 
    $mail->Username = xxx;  
    $mail->Password = xxx;           
    $mail->SetFrom($email, $firstname . " " . $lastname);
    $mail->AddAddress($contact);

    $mail->Subject  = $subject;
    $mail->Body     = $message;
    $mail->WordWrap = 50;
    $mail->isHTML(true);
    $mail->Send();

if(!$mail->Send())
{
echo "email_has_not_been_sent <br><br>";
echo "Mailer Error: " . $mail->ErrorInfo;
$IsSent = 0;
exit;
} 
```

这是错误消息。

```
SMTP -> ERROR: EHLO not accepted from server: 500 EHLO not understood 
SMTP -> ERROR: HELO not accepted from server: 500 HELO not understood 
SMTP -> ERROR: AUTH not accepted from server: 500 AUTH not understood 
SMTP -> ERROR: RSET failed: 500 RSET not understood 
SMTP Error: Could not authenticate. SMTP -> ERROR: MAIL not accepted from server: 500   MAIL not understood 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:43:46.250

您的代码看起来不错，但我认为您使用的是更常用于 FTP 的端口... [25 和 587 更常用作 SMTP 端口](http://en.wikipedia.org/wiki/Simple_Mail_Transfer_Protocol)

一些基本的远程登录应该告诉你发生了什么：

```
telnet smtp.gmail.com 587 
```

然后输入命令`EHLO`，您将看到 gmail SMTP 服务器的欢迎消息。

现在在你的服务器上尝试一下，你会看到你得到了什么

然后对更常见的 SMTP 端口尝试相同的操作：**25**和**587**，您应该会看到区别。

# php - 使用 simplexml 和 php 访问某个节点的所有子节点

> ID：16054386
> 
> 赞同：1
> 
> 时间：2013-04-17T07:46:30.533
> 
> 标签：php, xml, simplexml, children

我有一个问题，答案肯定很简单，但我只是缺乏理解。

我有一个具有以下外观的 xml 文件（简短示例）

```
<item id="1234">
    <property name="country_id">
        <value>4402</value>
    </property>
    <property name="rc_maintenance_other">
    </property>
    <property name="claim_right_shareholder">
    </property>
    <property name="charges_other">
    </property>
    <property name="other_expenses_heating">
    </property>
    <property name="unpaid_bills_amount">
    </property>
    <property name="iv_person_phone">
        <value>03-6756711</value>
    </property>
</item>
<item id="9876">
   ...
</item> 
```

我的问题是，我想从 id 为 1234 的一项中读取所有属性，并在数组中读取其属性和值（如果存在）。

我知道如何使用 xpath 访问特定项目。（感谢这个精彩的 stackoverflow 社区 :)）

但是我怎样才能只对某个项目使用 children() 函数呢？

像这样

```
foreach ($item[id="1234"]->children() as $property) { 
```

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T07:59:04.123

我希望这可以帮助你。

**代码**

```
$xml = new SimpleXMLElement('<item id="1234">
    <property name="country_id">
        <value>4402</value>
    </property>
    <property name="rc_maintenance_other">
    </property>
    <property name="claim_right_shareholder">
    </property>
    <property name="charges_other">
    </property>
    <property name="other_expenses_heating">
    </property>
    <property name="unpaid_bills_amount">
    </property>
    <property name="iv_person_phone">
        <value>03-6756711</value>
    </property>
</item>');

foreach ($xml->xpath('//item[@id="1234"]') as $item)
{    
    foreach ($item->children() as $child) {
      echo $child['name'] ."\n";
    }
} 
```

**输出**

> ```
> country_id
> rc_maintenance_other
> claim_right_shareholder
> charges_other
> other_expenses_heating
> unpaid_bills_amount
> iv_person_phone 
> ```

示例：[http ://sandbox.onlinephpfunctions.com/code/4e0ddba2ed273ab4a20dc9379ea9ed0d669a4c0d](http://sandbox.onlinephpfunctions.com/code/4e0ddba2ed273ab4a20dc9379ea9ed0d669a4c0d)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:52:42.547

> 但是我怎样才能只对某个项目使用 children() 函数呢？

[`SimpleXMLElement::children()`^(*Docs*)](http://php.net/SimpleXMLElement.children)方法*总是*用于 Simplexml 中的某个元素。所以你可以通过使用它来做到这一点。

```
$element->children(); 
```

手册以这种方式铸造它：

> 查找给定节点的子节点

# oracle - 如何在 oracle 中创建新模式并列出所有模式名称

> ID：16054389
> 
> 赞同：7
> 
> 时间：2013-04-17T07:46:35.350
> 
> 标签：oracle, schema, authorization, database-schema

我想在 oracle 中创建一个新模式，我使用了示例代码，可[在此处获得](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6014.htm)

```
CREATE SCHEMA AUTHORIZATION oe
   CREATE TABLE new_product
      (color VARCHAR2(10)  PRIMARY KEY, quantity NUMBER)
   CREATE VIEW new_product_view
      AS SELECT color, quantity FROM new_product WHERE color = 'RED'
   GRANT select ON new_product_view TO scott
/ 
```

但是，得到错误

```
ERROR at line 1:
ORA-02421: missing or invalid schema authorization identifier 
```

另外，请帮助我如何列出所有可用架构的名称。我在用

```
 select username from dba_users; 
```

列出架构，但我认为这不是正确的方法，因为用户和架构具有多对多关系，这意味着我无法在这里获取所有架构名称。

请帮我 ！！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T08:19:32.707

来自 oracle[文档](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6014.htm)：

> 此语句实际上并不创建模式。Oracle 数据库在您创建用户时自动创建模式

因此，您首先需要使用架构名称[创建一个用户](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_8003.htm#i2065278)

至于您的查询，这很好，因为用户名列表等于架构名称不可用

* * *

**更新：**我现在无法真正测试它，但应该是这样的：

```
CREATE USER oe IDENTIFIED BY oePSWRD;

CREATE SCHEMA AUTHORIZATION oe
   CREATE TABLE new_product
      (color VARCHAR2(10)  PRIMARY KEY, quantity NUMBER)
   CREATE VIEW new_product_view
      AS SELECT color, quantity FROM new_product WHERE color = 'RED'
   GRANT select ON new_product_view TO scott; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:18:03.387

来自文档：[http ://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6014.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6014.htm)

> 模式名称必须与您的 Oracle 数据库用户名相同。

您要查找所有用户，还是查找存在表（例如）的所有用户？如果是后者那么...

```
select distinct
  owner
from
  dba_tables
where
  owner not in ('SYS','SYSTEM') 
```

根据需要添加您不想列出的其他用户名。

# networking - 获取当前传输的 MPI 网络通信量

> ID：16054390
> 
> 赞同：1
> 
> 时间：2013-04-17T07:46:38.357
> 
> 标签：networking, parallel-processing, mpi, benchmarking, shared-nothing

我有一个与 MPI 相关的问题。

为了跟踪我的实现使用的通信量，我想获取从 mpi 进程开始到当前测量点的当前传输的数据量。

我检查了规范以及 mpich 的 mpi.h 头文件，没有找到匹配的函数来调用或跟踪网络传输成本的变量。当然，可以实现一个小型流量注册表或定义一个宏来跟踪通信大小，但也许可以从某个地方读出它。

你知道获得当前传输大小的方法吗，也许也可以使用系统调用来获取这个数字来获取进程的网络流量大小？

是否可以访问当前进程的 proc 信息，也许 /proc/net 也是每个进程维护的，例如 /proc/self/net？

提前谢谢你，马丁

# sql-server - TSQL：按 asc 排序，不带列名

> ID：16054391
> 
> 赞同：7
> 
> 时间：2013-04-17T07:46:41.470
> 
> 标签：sql-server, tsql

我对 SQL Server 很陌生。现在我遇到了这样的查询：

```
SELECT country FROM Hovercraft.Orders GROUP BY country ORDER BY ASC 
```

order by 子句中没有给出列名。这可能吗？SSMS 说不。

约尔格

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-17T08:05:11.043

这可能是印刷错误 - 您必须指定*您*订购的商品；这可以是列名、表达式或输出中的列*号*。您看到的查询很可能是后者之一，它只是省略了列号`1`- 如下所示：

```
SELECT country FROM Hovercraft.Orders GROUP BY country ORDER BY 1 ASC 
```

- 所以这将按输出的第一列的内容排序（即。`country`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:57:41.100

我同意@Mahmoud Gamal。但是，也可以像这样写这样的黑客 -

```
SELECT o.country, const_column = 1 
FROM Hovercraft.Orders o
GROUP BY o.country 
ORDER BY const_column ASC 
```

在这种情况下，将执行排序，但不会更改行的顺序。

在 MS SQL 2005 上：

![@Martin Smith 的教授](https://i.stack.imgur.com/IOUXx.png)

在 MS SQL 2012 上：

![@Martin Smith 的教授](https://i.stack.imgur.com/vbI4T.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:35:33.303

这是不可能的 ！..

Order by 子句总是需要列名或列号。

你能回答我为什么你想要这种情况吗，我想你正在使用动态查询，否则请告诉我。

根据 SQL 标准，这是不可能的。

谢谢。

# sockets - 如何检查 luasocket 库中的套接字是否关闭？

> ID：16054394
> 
> 赞同：6
> 
> 时间：2013-04-17T07:46:45.120
> 
> 标签：sockets, tcp, lua, luasocket

我正在使用 Lua 编程语言编写服务器，网络层基于[LuaSocket](http://w3.impa.br/~diego/software/luasocket/home.html)。

而且我在其参考手册中找不到任何方法来检测套接字是否关闭，除非尝试从中读取数据（调用它时它将返回 nil 和字符串'close'）。

我的代码如下所示：

```
local socket = require 'socket'
local server = socket.tcp()
local port = 9527

server:bind('*', port)
local status, errorMessage = server:listen()
if status == 1 then
    printf('Server is launched successfully on port %u', port)
else
    printf('Server listen failed, error message is %s', errorMessage)
    return
end

local sockets = {server}

while true do
    local results = socket.select(sockets)
    for _, sock in ipairs(results) do
        if sock == server then
            local s = server:accept()

            callback('Connected', s)
            table.insert(sockets, s)

            printf('%s connected', s:getsockname())
        else
            -- trying to detect socket is closed
            if sock:isClosed() then
                callback('Disconnected', sock)

                for i, s in ipairs(sockets) do
                    if s == sock then
                        table.remove(sockets, i)
                        break
                    end
                end

                printf('%s disconnected', sock:getsockname())
            else
                callback('ReadyRead', sock)
            end
        end
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T03:42:51.810

> 除了尝试从中读取数据（调用它时它将返回 nil 和字符串 'close'）。

我不知道任何其他方法。为什么不检查读取套接字的结果为您工作？

您需要使用 settimeout 使调用非阻塞并检查`closed`(not `close`) 返回的错误。您可以读取一个字节并存储它，或者您可以尝试读取零字节。

# python - OneToOneField 两边都是空的

> ID：16054395
> 
> 赞同：0
> 
> 时间：2013-04-17T07:46:49.287
> 
> 标签：python, django, models

有什么方法可以创建一个两边都可以为空的 OneToOneField？

我的意思是，如果我在 和 之间有这种关系`ModelA`，`ModelB`我想允许`ModelA`没有`ModelB`关系，也`ModelB`没有`ModelA`关系。

在我的示例中，有以下代码：

`class Forum(models.Model):
.....

class Jobs(models.Model):
forum = models.OneToOneField(Forum, blank = True, null = True)`

. 这从方向上效果很好`Jobs -> Forum`，但是当我从`Forum -> Jobs`方向上尝试时，我肯定会`query does not exist`出错。

作为一种解决方法，我可以使用`ManyToManyField`或`hasattr`检查它，但我更感兴趣的是类似 OneToOneField 的解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:51:30.810

您应该为反向关系创建一个访问方法。

看看 Django 的 User 模型是如何使用[get_profile](https://github.com/django/django/blob/master/django/contrib/auth/models.py#L413)实现的。

# javascript - 使用正则表达式替换数字序列

> ID：16054396
> 
> 赞同：0
> 
> 时间：2013-04-17T07:47:06.757
> 
> 标签：javascript, regex

我正在尝试在诸如 12312345435 之类的数字序列中替换序列片段“123”，并从一开始就删除 123 的重复序列。因此，在替换后，新的数字序列将类似于：12345435。我可能也有 123123123123，但我想从序列中删除第一次出现的 123，其余的保持不变。如何在 Javascript 中使用正则表达式来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:00:55.260

我认为您应该简单地使用以下正则表达式：

```
Txt.replace(/123((123)+)/,"$1"); 
```

该正则表达式匹配任何包含序列 123 的字符串至少两次。所以说这个序列出现了 5 次（这里有空格是为了让它更易读）：，`123 123 123 123 123`那么它的内容`$1`就是`123 123 123 123`（再一次，这里的空格只是为了可读性，如果它们被插入到代码中就行不通了**）**）。

然后，您可以将命中替换为 的内容`$1`。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T08:21:44.813

您必须在字符串的开头找到第一次出现的“123”并替换为空字符串。

```
var patt  = /^(123)/;
"123123123".replace(patt, "")
"12312345435".replace(patt, "") 
```

有关更多信息，请查看[此](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

# c# - 线程已在 Windows 窗体中以代码 0 退出

> ID：16054399
> 
> 赞同：4
> 
> 时间：2013-04-17T07:47:39.313
> 
> 标签：c#, .net, multithreading, winforms

我在 Windows 窗体中退出线程时遇到问题。

我有经典的 Windows 窗体，它正在运行。我需要每隔一段时间做一些事情，所以我补充说：

```
TimerCallback timerDelegate = new TimerCallback(this.TryDoSomething);
int period = 10 * 1000; // to miliseconds
System.Threading.Timer stateTimer = new System.Threading.Timer(timerDelegate, null, period, period); 
```

方法 DoSomething 由几个线程（主线程和这个计时器）调用，所以我这样介绍：

```
private void TryDoSomething(object o)
        {
            lock (tryDoSomethingMutex)
            {
                if (this.dataGridView1.InvokeRequired)
                {
                    RefreshCallback d = new RefreshCallback(DoSomething);
                    this.Invoke(d, new object[] { o });
                }
                else
                {
                    this.DoSomething(o);
                } 
            }
        } 
```

一切正常，直到我的计时器线程刚刚退出并显示消息：

```
The thread 0x2798 has exited with code 0 (0x0). 
```

我的 FileSystemWatcher 也发生了同样的事情，它也调用了 DoSomething 方法。这两个事件都是独立的，并且在随机时间退出（至少我没有找到任何规则）

是什么导致了这种情况，我该如何预防？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:07:08.410

如果您不保留对计时器对象的引用，它将被垃圾收集。

查看您发布的代码，您似乎没有保留参考。您需要将其设置为包含类中的字段，而不是局部变量。

如果您在长时间运行的方法开始时声明计时器并且稍后在方法中不引用它，则计时器也可以进行垃圾收集。

[您可以通过在此处描述](http://msdn.microsoft.com/en-gb/library/system.timers.timer.aspx)`GC.KeepAlive(timer);`的方法末尾附近添加来解决该特定问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T08:06:26.470

听起来定时器正在收集垃圾。使其成为表单的实例变量，以便您可以保留引用。

# aix - apache 2.2 无法在 AIX 6.1 上加载模块

> ID：16054401
> 
> 赞同：0
> 
> 时间：2013-04-17T07:47:41.307
> 
> 标签：aix

我正在 6.1 power AIX、64 位平台上使用 apache 2.2 服务器测试身份验证模块。当我在 httpd.conf 中给出我的模块路径名时，apache 服务器根本没有启动，它在 AIX 5.3 上运行良好，尽管具有相同的模块。

没有崩溃，除了 error_log 文件中的错误之外没有其他错误消息：

httpd：/home/apache22-aix64/installApache/conf/httpd.conf 第 423 行的语法错误：//home/apache22-aix64/installApache/conf/agent.conf 第 9 行的语法错误：无法加载 /home/ agent/apache/lib/auth-module.so 进入服务器：空间不足

我通过将 ThreadStackSize 增加到 6mb、增加内存和其他参数进行了检查，但问题仍然相同。问题在 apache 服务器的 prefork n worker 模式中很常见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T02:02:02.370

这对我来说是一个新的......我猜你已经失去了*一些东西*（是的，你猜对了吗？）。尝试在两个系统（5.3 和 6.1）之间检查 ulimit -a。我假设您正在使用相同类型的 id 启动 apache（具有相同限制、权限等的非 root id）。

我还建议用 Apache 标记它，看看是否有一些 apache 人员可以提供帮助。我们需要确定它来自什么——内存、堆栈、磁盘空间、分页空间等。

你自己构建了这个 apache 版本吗？

# oop - 如何提取抽象？

> ID：16054404
> 
> 赞同：0
> 
> 时间：2013-04-17T07:47:51.190
> 
> 标签：oop, design-patterns

我的问题是微不足道的，但我找不到合适的解决方案。

代码（仅举例）：

```
public class ToRefact
{
    public int Func1(int i)
    {
        int a = i;
        a++;
        a++;
        a++;

        int b = FuncX2(a); //b = a * 2;

        b++;
        b++;
        b++;
        return a + b;
    }

    public int Func2(int i)
    {
        int a = i;
        a++;
        a++;
        a++;

        int b = FuncX3(a); // b = a * 3;

        b++;
        b++;
        b++;
        return a + b;
    }

    private int FuncX2(int b)
    {
        return b * 2;
    }

    private int FuncX3(int b)
    {
        return b * 3;
    }
} 
```

我们可以看到，func1 和 func2 具有相同的主体，除了代码中间：不同的是 FuncX2 和 FuncX3。但是，我不能做基础抽象类，因为这段代码在中间！我怎样才能做常见的抽象？请不要更改操作（3 次 a++，3 次 b++）并且不要更改顺序

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:54:20.257

假设您选择的语言可以将“指针”传递给函数：

```
public class ToRefact
{
    private int Func(int i, Func<int, int> f)
    {
        int a = i;
        a++;
        a++;
        a++;

        int b = f(a); //b = a * 2;

        b++;
        b++;
        b++;
        return a + b;    
    }

    public int Func1(int i)
    {
        return Func(i, FuncX2);
    }

    public int Func2(int i)
    {
        return Func(i, FuncX3);
    }

    private int FuncX2(int b)
    {
        return b * 2;
    }

    private int FuncX3(int b)
    {
        return b * 3;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:11:59.417

您可以使用[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)（甚至根据实际情况使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)），但在这种简单的情况下，我会这样做：

```
public class ToRefact
{
    public int Func1(int i)
    {
        int a = FuncAdd3(i);

        int b = FuncX2(a); //b = a * 2;

        b = FuncAdd3(b);
        return a + b; // Or more compact FuncAdd3(i) + FuncAdd3(FuncX2(FuncAdd3(i)))
    }

    public int Func2(int i)
    {
        int a = FuncAdd3(i);

        int b = FuncX3(a); //b = a * 2;

        b = FuncAdd3(b);
        return a + b; // Or more compact FuncAdd3(i) + FuncAdd3(FuncX3(FuncAdd3(i)))
    }

    private int FuncAdd3(int b)
    {
        return b + 2;
    }

    private int FuncX2(int b)
    {
        return b * 2;
    }

    private int FuncX3(int b)
    {
        return b * 3;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:01:14.677

或者，您可以创建一个更加模块化和可测试的方法。

创建 ICalculator 接口，如：

```
 public interface ICalculator
 {
      int Calculate(int a);
 } 
```

以及两个具体的实现

```
public class CalculatorX : ICalculator
{
      public int Calculate(int a)
      {
          return a * 2;
      }
}

public class CalculatorY : ICalculator
{
      public int Calculate(int a)
      {
          return a * 3;
      }
} 
```

然后你会接受这个作为参数：

```
public int Func1(ICalculator calculator)
{
    int a = i;
    a++;
    a++;
    a++;

    int b = calculator(a); 

    b++;
    b++;
    b++;
    return a + b;
} 
```

并称它为：

```
var calculatorX = new CalculatorX();
var result = Func1(calculatorX ); 
```

这使得替换实现、模拟它们、甚至使用你最喜欢的 IoC 容器注入它们变得很容易。您还明确指定了方法的协定，因此如果您必须添加新的实现，您可以通过接口知道要实现什么。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:05:03.977

```
public class ToRefact{
    public int Func1(int i){
        int a = i;
        a = addThree(a);

        int b = FuncX2(a); //b = a * 2;

        b = addThree(b);
        return a + b;
    }

    public int Func2(int i){
        int a = i;
        a = addThree(a);

        int b = FuncX3(a); // b = a * 3;

        b = addThree(b);
        return a + b;
    }

    private int FuncX2(int b){
        return b * 2;
    }

    private int FuncX3(int b){
        return b * 3;
    }

    private int addThree(int x){
        x++;
        x++;
        x++;
        return x;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T08:05:55.010

您可以创建一个基类并应用[模板方法](http://en.wikipedia.org/wiki/Template_method_pattern)设计模式。

**例子**

*请注意，我使用 Delphi，因为这对我来说是最容易从内存中编写的，但是在每种具有虚拟和抽象方法的语言中，意图都是相同的*

```
 TCustomRefact = class(TObject)
  protected
    function Calculate;
    function Multiply(const Value: Integer); virtual; abstract;
  end;

  TRefact1 = class(TCustomRefact )
  protected
    function Multiply(const Value: Integer); override;
  end;

  TRefact2 = class(TCustomRefact )
  protected
    function Multiply(const Value: Integer); override;
  end; 
```

# ubuntu - 在 EC2 实例上运行 nginx 时遇到问题

> ID：16054407
> 
> 赞同：3
> 
> 时间：2013-04-17T07:47:54.363
> 
> 标签：ubuntu, nginx, amazon-ec2

我用 phusion 乘客安装了 Nginx，但我无法访问服务器。我使用的是默认配置文件，但是当我尝试访问浏览器中的 IP 地址时，我从未得到服务器的响应。在我的服务器上，我可以这样做：

```
curl 127.0.0.1 
```

得到响应，但在浏览器中访问 IP 地址总是超时。我通过执行确保端口 80 已打开`sudo iptables -A INPUT -p tcp --dport 80 -j ACCEPT`，但没有任何改变。我正在使用 Ubuntu。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-17T20:04:51.123

可能的错误来源：

*   您使用内部 EC2 ip 而不是公共 IP。
*   您没有设置任何安全策略并且您正在访问 EC2 防火墙。
*   iptables 配置不正确，禁用它直到它没有工作。
*   Nginx 没有监听正确的端口。使用默认配置。

# ruby-on-rails - Rails 3.2.x - 记录经过的请求时间

> ID：16054410
> 
> 赞同：1
> 
> 时间：2013-04-17T07:48:12.523
> 
> 标签：ruby-on-rails, logging, rack

Rails 3.2.X 的日志记录机制有了很大的改进。

尽管如此，我仍在寻找一种方法来在每个日志项之前添加“自请求开始以来经过的时间”前缀（以毫秒或时间戳为单位）。（请求由 uuid 标识）

我认为我可能必须为此编写自己的 Rack 中间件，但也许有一个更简单的开箱即用解决方案？

**更新**

我构建了自己的 Rack 中间件：

```
class RequestElapsedTime
  def initialize(app)
    @app = app
  end

  def call(env)
    # Set request start time so it can be used as part of the 'request' context.
    env['REQUEST_START_TIME'] = Time.now

    # Call next middleware component
    status, headers, response = @app.call(env)

    # return a valid rack response
    [status, headers, response]
  end
end 
```

并将以下内容添加到 application.rb：

```
elapsed_time = lambda do |req|
  req_start_time = req.env['REQUEST_START_TIME']
  return unless req_start_time

  (Time.now - req_start_time) * 1000.0
end

# Add request UUID to logs
config.log_tags = [:uuid, elapsed_time] 
```

不幸的是，由于某种原因，这会为同一请求中的不同日志项输出相同的经过时间，这使我认为这可能与 lambda 正在同时针对多个项进行评估（缓冲日志记录？） ...知道如何解决这个问题吗？

# android - 仅在触摸时通过滑动/滚动/拖动和正常输入更改 EditText

> ID：16054419
> 
> 赞同：0
> 
> 时间：2013-04-17T07:48:24.770
> 
> 标签：android, android-edittext, ontouchlistener, motionevent

我想使用两种方法来更改我的 EditText 字段的输入。EditText 字段将只允许数字（“12.34”格式）。

**正常行为：** 当用户触摸 EditText 时，它应该显示键盘并且表现得像普通的 EditText 字段

**移动行为** 当用户触摸并向上/向下拖动时，我希望 EditText 增加/减少。

我已经搜索过这种类型的实现，因为我希望更多的人有类似的实现，但找不到它。

昨天我尝试了以下代码，但这不起作用。键盘在拖动过程中仍然显示，使用睡眠也不是一个很好的实现。

希望这里有人可以帮助我提供更好的解决方案。

提前致谢！

```
inputET.setOnTouchListener(otl);

private OnTouchListener otl = new OnTouchListener() {
   public boolean onTouch (View v, MotionEvent event) {

    if (v == inputET) {
        // to distinguish between touch and drag
        if (event.getX > 50) { // drag
            float oldPos = event.getX;
            thread.sleep(10);
            inputET.setText(Float.toString(Float.parseFloat(inputET.getText()) - oldPos - event.getX);
            return true;
        } else { // touch
            return false;
        }
   }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:03:49.167

```
float mLastMotionX;
@Override
public boolean onTouch(View v, MotionEvent ev) {
    // TODO Auto-generated method stub

    final int action = ev.getAction();
    final float x = ev.getX();
    switch (action) {
    case MotionEvent.ACTION_DOWN: 
    {
        mLastMotionX = x;
        break;
    }

    case MotionEvent.ACTION_MOVE: 
    {
        final int deltaY = (int) (x - mLastMotionX);

        if( Math.abs(deltaY) % 50 == 0 && deltaY != 0)
        {
            mLastMotionX  = x;
            float current = Float.valueOf(mTextView.getText().toString()) + deltaY;
            mTextView.setText("" + round(current, 2.0));
        }
        break;
    }

    }
    return true;
}

private double round( final float value, double precision  )
{
    precision = Math.pow(10, precision);
    return Math.round(value * precision) / precision;
} 
```

您应该为`EditText`10.34 之类的东西设置初始文本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:52:12.073

您的代码没问题，只需删除线程的睡眠并将其添加到显示 EditText 的活动中：

```
android:windowSoftInputMode="stateHidden" 
```

我还会将此添加到您的 if 条件中：

```
if (event.getAction() == MotionEvent.ACTION_MOVE && event.getX() > 50) 
```

在我的设备（Android > 4.0）中测试并且可以工作，希望它可以帮助你:)

# iphone - 在 iDevices 上获取 wifi 网络的密码

> ID：16054420
> 
> 赞同：-6
> 
> 时间：2013-04-17T07:48:33.973
> 
> 标签：iphone, ios, ipad, network-protocols

有什么方法可以在不越狱设备的情况下找出保存在我的 iPhone / iPad 上的 Wifi 密码？

如果有人建议我，那就太好了:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:49:55.183

**一点也不 ！坚决不！**您不能以任何方式在未越狱的设备上执行此操作。我认为它甚至在越狱设备上也是不可能的（不确定）。

# jquery - 读取 JSON 以添加图像

> ID：16054421
> 
> 赞同：-1
> 
> 时间：2013-04-17T07:48:36.653
> 
> 标签：jquery, css, json

我正在制作一个图像流滑块。如果我是硬编码，它工作正常。现在我使用 JSON 文件来指定如何从画廊加载图像。图像已成功加载，但我的外部 CSS 文件和 jquery 未正确加载。

任何帮助，将不胜感激。

```
<script>
      $(function(){
          var image= [{
    "src": "images/starting.jpg",
           "data-artist":"Gorillaz",
       "data-album":"Plastic Beach"
             },];

         $.each(image, function(){
       $('<img src="' + this.src+ '"  />').appendTo('#coverflow'); 
        });
   }); 
```

如果我在写这个，

```
 <div class="wrapper">
        <div id="coverflow">
            <img src="img/gorillaz-plasticbeach.jpg" data-artist="Gorillaz" data-album="Plastic Beach"/>-->
            <!--<img src="images/thumb1.jpg" data-artist="Kings Of Leon" data-album="Come Around Sunshine"/>
            <img src="images/thumb2.jpg" data-artist="Kid Rock" data-album="Born Free"/>        
            <img src="images/thumb3.jpg" data-artist="Eminem" data-album="Recovery"/>
            <img src="images/thumb4.jpg" data-artist="Lil Wayne" data-album="I Am Not A Human Being"/>
            <img src="images/thumb5.jpg" data-artist="Taylor Swift" data-album="Speak Now"/>
            <img src="images/thumb6.jpg" data-artist="The Band Perry" data-album="The Band Perry"/>
            <img src="images/thumb7.jpg" data-artist="Maroon 5" data-album="Hands All Over"/>
            <img src="images/thumb8.jpg" data-artist="My Chemical Romance" data-album="Danger Days"/>
            <img src="images/thumb9.jpg" data-artist="Iron Maiden" data-album="The Final Frontier"/>
            <img src="images/thumb10.jpg" data-artist="Order Of The Black" data-album="Black Label Society"/>   
            <img src="images/thumb11.jpg" data-artist="Usher" data-album="Raymond V Raymond"/>-->
        </div>
    </div> 
```

然后它的工作完美。

我努力了

```
$.each(image, function(){
 $('<img src="' + this.src+ '" />').appendTo('#coverflow');            `$('#coverflow').appendTo('#wrapper');
 $('#wrapper').appendTo('#demo');
 $('#demo').appendTo('#pageWrapper'); }); 
alert ('I am all Done'); 
alert('Elements are ' +$('#coverflow').length); }); 
```

在这里，我在 div 1 中逐个添加图像。但最后，当我最后检查 div #coverflow 时，它只包含 1 个元素。虽然循环迭代了 11 次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:47:23.080

1.  确保图像（来自“每个”）是一个具有 src 属性的对象（我知道你说它是硬编码的，只要确保它是一个对象，使用 console.log(typeof image); 在你做每个之前）
2.  .appendTo('#coverflow'); 不正确，您的意思可能是 .appendTo($('#coverflow')); 您只能将内容附加到 jquery 对象（appendTo 仅适用于 jQuery 对象）
3.  从一个简单的开始：

    $.each(image, function(){ console.log(image.src); });

# javascript - AngularJS 绑定到 WebGL / Canvas

> ID：16054424
> 
> 赞同：24
> 
> 时间：2013-04-17T07:48:40.107
> 
> 标签：javascript, model-view-controller, canvas, angularjs, webgl

我对 AngularJS 很满意。我想知道当您的视图使用 HTML5 Canvas 或 WebGL 时是否可以使用它？如果是这样，是否有任何关于如何进行此操作的好的教程？

我见过一些游戏吹嘘它们是使用 AngularJS 制作的，但我不知道这是否仅限于它们的菜单、排行榜和其他仪表板元素。

（我不一定会在游戏中使用 MVC，但显然你可以做的不仅仅是使用 Canvas 和 WebGL 的游戏。）

谢谢！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-06-01T20:14:45.613

编辑：我做了一个 WebGL 指令的完整示例，它使用带绑定的three.js 来调整对象的大小或更改它的材质类型。此外，窗口大小调整和鼠标移动等事件：

*   来源：[https ://github.com/winkerVSbecks/angularWebglDirective](https://github.com/winkerVSbecks/angularWebglDirective)
*   演示：[http ://winkervsbecks.github.io/angularWebglDirective/](http://winkervsbecks.github.io/angularWebglDirective/)

* * *

是的，这是很有可能的。除了菜单、排行榜等之外，您也可以将您的内容包装`canvas`到指令中。

1.  控制器将设置游戏状态
2.  将此状态、从服务器加载的数据以及您可能拥有的任何其他数据传递给指令
3.  最后你在指令链接函数中初始化画布

我制作了这个小应用程序来帮助我完成一个学校项目：[http](http://callmethey.herokuapp.com/polygons) ://callmethey.herokuapp.com/polygons 。这是我使用的指令（画布部分使用了三个.js）：

```
app.directive('polygon', function() {
  return {
    restrict: 'A',
    scope: { 
      vertices: '=polygon',  
      color: '=color'
    },
    link: function(scope, element, attrs)
    {
      var camera, scene, renderer;
      var polygon;
      var targetRotation = 0;
      var targetYRotation = 0, targetXRotation = 0;
      var targetYRotationOnMouseDown = 0, targetXRotationOnMouseDown = 0;
      var mouseX = 0, mouseY = 0;
      var mouseXOnMouseDown = 0, mouseYOnMouseDown = 0;
      var width = $(element).width();
      var height = 200;
      var widthHalfX = width/2;
      var widthHalfY = height/2;

      init();

      function init() {
        // Setup scene
        camera = new THREE.PerspectiveCamera( 70, width / height, 1, 1000 );
        camera.position.x = 0;
        camera.position.y = 0;
        camera.position.z = 300;
        scene = new THREE.Scene();
        // Build Polygon
        var geometry =  new THREE.Geometry();
        angular.forEach(scope.vertices, function (v) {
          geometry.vertices.push( new THREE.Vector3( v.x, v.y, v.z ) );
        });
        geometry.faces.push( new THREE.Face3(0, 1, 2 ));
        THREE.GeometryUtils.center( geometry );
        // Push polygon to scene
        var material = new THREE.MeshBasicMaterial( { color: cols[scope.color], side: THREE.DoubleSide } );
        polygon = new THREE.Mesh( geometry, material );
        scene.add(polygon);
        renderer = new THREE.WebGLRenderer();
        renderer.setSize( width, height );
      }

     // ..... rest of the code truncated for readability
  };
}); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-11T04:20:14.683

另一种技术是将 WebGL 场景封装为工厂，并通过返回的工厂 API 向模块公开对 3D 场景的访问。这种方法的一个优点是您可以将场景注入到任何其他控制器或指令中。Angular 中的工厂是单例的，所以只有 1 个 3D 场景的副本漂浮在各处。

这种封装方法还允许您将 3D 场景逻辑与应用程序逻辑隔离开来。

只要您通过公开的 Factory API 初始化工厂，您就应该能够使用大多数预先存在的 WebGL 代码。为此，请将所有 3D 场景代码复制到工厂中，然后从控制器调用注入的 3D 工厂的 init 函数来初始化渲染。

*   [3D井字游戏演示](http://www.tempt3d.com/webgl-code-samples/ng-3D-TTT/)
*   [Github 仓库](https://github.com/cubicleDowns/webgl-code-samples/tree/master/ng-3D-TTT)

我在画布元素上使用指令来定义场景交互。点击、选框、按键、事件。

![Angular 和 Three.js 架构演示](https://i.stack.imgur.com/crE5D.png)

# xmpp - 有没有人有安装 node-xmpp 的更新指南？

> ID：16054427
> 
> 赞同：2
> 
> 时间：2013-04-17T07:48:51.083
> 
> 标签：xmpp, node-xmpp

有没有人在 Cent OS 或 Ubuntu 的最新版本上从头到尾安装 node-xmpp 的更新指南？

我已尝试安装，但继续收到以下错误：

```
Cannot load StringPrep-0.1.0 bindings. You may need to `npm install node-stringprep' 
```

这是 stringprep 的日志：

```
root@node-xmpp:~/node-latest-install# npm install node-stringprep
npm http GET https://registry.npmjs.org/node-stringprep
npm http 200 https://registry.npmjs.org/node-stringprep
npm http GET https://registry.npmjs.org/node-stringprep/-/node-stringprep-0.1.5.tgz
npm http 200 https://registry.npmjs.org/node-stringprep/-/node-stringprep-0.1.5.tgz

> node-stringprep@0.1.5 install /root/node-latest-install/node_modules/node-stringprep
> node-gyp rebuild

make: Entering directory `/root/node-latest-install/node_modules/node-stringprep/build'
CXX(target) Release/obj.target/node-stringprep/node-stringprep.o
SOLINK_MODULE(target) Release/obj.target/node-stringprep.node
SOLINK_MODULE(target) Release/obj.target/node-stringprep.node: Finished
COPY Release/node-stringprep.node
make: Leaving directory `/root/node-latest-install/node_modules/node-stringprep/build'
node-stringprep@0.1.5 node_modules/node-stringprep 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-01T17:22:25.693

我在 Fedora 17 系统上安装 node-xmpp 时遇到了这个问题。

我的解决方案是**yum install libicu-devel**

**libicu** “为软件应用程序提供 Unicode 和全球化支持”，我猜 node-xmpp 需要它的最新版本。

见[https://github.com/astro/node-stringprep](https://github.com/astro/node-stringprep)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T09:57:29.683

我在 Debian 6 系统上安装 node-xmpp 时遇到了这个问题。我使用`apt-get install libicu-dev`，我已经升级节点，按照这个问题[https://github.com/astro/node-stringprep/issues/32](https://github.com/astro/node-stringprep/issues/32)但问题没有解决

# database - 用于连接 H2db 的 Perl 模块

> ID：16054431
> 
> 赞同：1
> 
> 时间：2013-04-17T07:49:07.350
> 
> 标签：database, perl, database-connection, h2, h2db

我有一个 perl 代码，我们正在读取 .txt 文件，但现在尽管有 .txt，但我们想从 H2DB 数据库中读取数据。我试图搜索，似乎没有可用的模块。你们中的一些人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T07:56:59.743

H2 支持 Postgresql 网络协议，所以你可以尝试使用 postgres 的驱动来做到这一点

以下是您可以使用的模块：

```
use DBI;

$dbh = DBI->connect("dbi:Pg:dbname=$dbname", "", "");

# for some advanced uses you may need PostgreSQL type values:
use DBD::Pg qw(:pg_types);

 # See the DBI module documentation for full details 
```

# c# - 获取注册表值导致程序无异常结束

> ID：16054439
> 
> 赞同：1
> 
> 时间：2013-04-17T07:49:22.340
> 
> 标签：c#, winforms, registry

我正在努力在 Windows 窗体中获取和设置注册表值。

我的代码如下所示：

```
Microsoft.Win32.RegistryKey key = Microsoft.Win32.Registry.CurrentUser.CreateSubKey("SmogUser");
if (((Guid)key.GetValue("DeviceId", Guid.Empty)) == Guid.Empty)
{
    Guid deviceId = Guid.NewGuid();
    key.SetValue("DeviceId", deviceId);
    key.Close();
}
else
{
    Guid deviceId = (Guid)key.GetValue("DeviceId");
} 
```

我第一次运行程序时，它进入了 if 子句并设置了`deviceId`，但是当我第二次运行时，程序没有继续，也没有异常。

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:00:50.370

我不太明白为什么`RegistryKey.GetValue()`方法行为是错误的，但是我使用以下代码解决了您的问题：

```
 Microsoft.Win32.RegistryKey key = Microsoft.Win32.Registry.CurrentUser.CreateSubKey("SmogUser");
        if (key != null)
        {
            var value = key.GetValue("DeviceId", null) ?? Guid.Empty;

            if (Guid.Empty.Equals(value))
            {
                Guid deviceId = Guid.NewGuid();
                key.SetValue("DeviceId", deviceId);
                key.Close();
            }
            else
            {
                var deviceId = (Guid)key.GetValue("DeviceId");
            }
        } 
```

似乎如果您将`null`其作为默认值传递，则该方法不会崩溃。然后，您可以检查 null 并将`Guid`变量值设置为`Guid.Empty`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:52:22.693

`Guid.Empty`您在第二个参数中传递默认值`key.GetValue("DeviceId", Guid.Empty)`，然后将其与`Guid.Empty`.

第一次没有键时，`Guid.Empty`返回并进入`if`块。然后返回另一个值（DeviceId）并输入`else`块

考虑 msdn 以获取有关[RegistryKey.GetValue](http://msdn.microsoft.com/en-us/library/xzxd58z1.aspx)参数的信息。签名是

```
public Object GetValue(
    string name,
    Object defaultValue) 
```

[RegistryKey.CreateSubKey](http://msdn.microsoft.com/en-us/library/microsoft.win32.registrykey.createsubkey.aspx)将*“创建一个新的子项或打开一个现有的子项”。*

当注册表中没有键时，您可以看到第二个参数将被返回。请注意，注册表在您的程序执行之间持续存在

* * *

这里的问题是您正在读取注册表两次。

```
RegistryKey key = Registry.CurrentUser.CreateSubKey("SmogUser");
Guid regValue = Guid.Parse(key.GetValue("DeviceId", Guid.Empty).ToString());
if (value == Guid.Empty)
{
    regValue = Guid.NewGuid();
    key.SetValue("DeviceId", regValue);
    key.Close();
}
//here you have Guid in regValue, which is exactly the same
//as in registry. No need to call GetValue again 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:05:40.287

您正在尝试从对象转换为 Guid，这是导致错误的原因。这有效 -

```
Microsoft.Win32.RegistryKey key = Microsoft.Win32.Registry.CurrentUser.CreateSubKey("SmogUser");
if ((new Guid(key.GetValue("DeviceId", Guid.Empty).ToString()) == Guid.Empty))
{
    Guid deviceId = Guid.NewGuid();
    key.SetValue("DeviceId", deviceId);
    key.Close();
}
else
{
    Guid deviceId = new Guid(key.GetValue("DeviceId").ToString());
} 
```

基本上我正在转换为字符串，然后从字符串创建一个新的 Guid 对象。第二次直接从对象转换为 Guid 不起作用，因为正在返回 Guid 字符串值。

至于没有抛出异常的问题，这发生在 64 位的 Visual Studio 上，请参阅同一主题的其他帖子 -

[Visual Studio 2010 调试器不再因错误而停止](https://stackoverflow.com/questions/6653263/visual-studio-2010-debugger-is-no-longer-stopping-at-errors) [VS2010 在 64 位版本的 Windows 上的 WinForms 应用程序中不显示未处理的异常消息](https://stackoverflow.com/questions/4933958/vs2010-does-not-show-unhandled-exception-message-in-a-winforms-application-on-a)

最好的解决方案是围绕您的代码进行尝试

# python - Django JSON自定义序列化丢失日期时间类型

> ID：16054440
> 
> 赞同：5
> 
> 时间：2013-04-17T07:49:22.530
> 
> 标签：python, django, django-serializer

我正在使用 Django json 库对从 Django 游标获取的数据进行编码，但是我看到反序列化后的日期时间现在是 unicode 类型。简单的例子：

```
import datetime
from django.core.serializers.json import json, DjangoJSONEncoder

today = datetime.datetime.now()
encoded = json.dumps(today, cls=DjangoJSONEncoder)
type(json.loads(encoded))
>> unicode 
```

如果我没记错的话，应该尊重变量类型。然后我想也许有类似 DjangoJSONDecoder 的东西，但什么都没有。我究竟做错了什么？这是预期的行为吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T08:12:53.667

它不能像你认为的那样工作。关键是 JSON 没有日期/时间的本机类型，这就是 Django 序列化程序将日期时间转换为字符串的原因。但是，当然，一旦它们是字符串，那么它们就是字符串；反序列化器无法知道它们曾经是日期时间。如果愿意，您*可以*编写一个进一步的自定义反序列化程序，尝试调用`strptime`每个字符串，看看它是否“应该”是一个日期时间；但是开销会很大，并且（取决于您的数据）可能会出现误报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T07:56:06.797

您没有为`json.loads`( `cls`kwarg)指定自定义解码器类

# android - 在 VideoView Android 中播放视频时，VideoView 的屏幕尺寸正在发生变化

> ID：16054442
> 
> 赞同：0
> 
> 时间：2013-04-17T07:49:28.923
> 
> 标签：android, media-player

当我在视频视图中播放视频但最初它很好，当视频开始播放时高度自动降低（chanded）。视频视图在相对布局内我需要紧急。谢谢提前。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T07:53:52.663

您好，我也遇到过这个问题，但我是这样设置的：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="horizontal" >
    <VideoView
        android:id="@+id/videoview"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" >
    </VideoView>
</RelativeLayout> 
```

# wordpress - 在 IIS7+ web.config 上强化 wordpress 相当于 .htaccess

> ID：16054444
> 
> 赞同：4
> 
> 时间：2013-04-17T07:49:39.813
> 
> 标签：wordpress, security, .htaccess, iis, rewrite

在 Linux 服务器上，我们可以从 .htaccess 规则中受益，以使 wordpress 安装更加安全。

这在 IIS7+ 上怎么可能？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T07:49:39.813

使用更好的 WP 安全性 .htaccess 规则和 IIS 管理器上的规则转换器向导，我得到了**web.config**文件的以下内容。

该文件包括：

*   通常的 wordpress 重写
*   拒绝列入黑名单的代理
*   文件窃取保护
*   跟踪 | 删除 | 轨道保护
*   禁止访问某些目录

除了这些，另一个提示：如果您将 wp-config.php 文件向上移动一级，wordpress 确实可以工作（不要将其保留在 /www/ 下）

```
<configuration>
 <system.webServer>
  <rewrite>
   <rules>

    <rule name="wordpress" patternSyntax="Wildcard">
     <match url="*" />
     <conditions>
      <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
      <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
     </conditions>
     <action type="Rewrite" url="index.php" />
    </rule>

    <rule name="Abuse Agent Blocking from HackRepair.com" stopProcessing="true">
          <match url="^.*" ignoreCase="false" />
          <conditions logicalGrouping="MatchAny">
            <!--# BEGIN Better WP Security-->
            <!--# Begin HackRepair.com Blacklist-->
            <!--# Abuse Agent Blocking-->
            <add input="{HTTP_USER_AGENT}" pattern="^BlackWidow" />
            <add input="{HTTP_USER_AGENT}" pattern="^Bolt\ 0" />
            <add input="{HTTP_USER_AGENT}" pattern="^Bot\ mailto:craftbot\@yahoo\.com" />
            <add input="{HTTP_USER_AGENT}" pattern="CazoodleBot" />
            <add input="{HTTP_USER_AGENT}" pattern="^ChinaClaw" />
            <add input="{HTTP_USER_AGENT}" pattern="^Custo" />
            <add input="{HTTP_USER_AGENT}" pattern="^Default\ Browser\ 0" />
            <add input="{HTTP_USER_AGENT}" pattern="^DIIbot" />
            <add input="{HTTP_USER_AGENT}" pattern="^DISCo" />
            <add input="{HTTP_USER_AGENT}" pattern="discobot" />
            <add input="{HTTP_USER_AGENT}" pattern="^Download\ Demon" />
            <add input="{HTTP_USER_AGENT}" pattern="^eCatch" />
            <add input="{HTTP_USER_AGENT}" pattern="ecxi" />
            <add input="{HTTP_USER_AGENT}" pattern="^EirGrabber" />
            <add input="{HTTP_USER_AGENT}" pattern="^EmailCollector" />
            <add input="{HTTP_USER_AGENT}" pattern="^EmailSiphon" />
            <add input="{HTTP_USER_AGENT}" pattern="^EmailWolf" />
            <add input="{HTTP_USER_AGENT}" pattern="^Express\ WebPictures" />
            <add input="{HTTP_USER_AGENT}" pattern="^ExtractorPro" />
            <add input="{HTTP_USER_AGENT}" pattern="^EyeNetIE" />
            <add input="{HTTP_USER_AGENT}" pattern="^FlashGet" />
            <add input="{HTTP_USER_AGENT}" pattern="^GetRight" />
            <add input="{HTTP_USER_AGENT}" pattern="^GetWeb!" />
            <add input="{HTTP_USER_AGENT}" pattern="^Go!Zilla" />
            <add input="{HTTP_USER_AGENT}" pattern="^Go-Ahead-Got-It" />
            <add input="{HTTP_USER_AGENT}" pattern="^GrabNet" />
            <add input="{HTTP_USER_AGENT}" pattern="^Grafula" />
            <add input="{HTTP_USER_AGENT}" pattern="GT::WWW" />
            <add input="{HTTP_USER_AGENT}" pattern="heritrix" />
            <add input="{HTTP_USER_AGENT}" pattern="^HMView" />
            <add input="{HTTP_USER_AGENT}" pattern="HTTP::Lite" />
            <add input="{HTTP_USER_AGENT}" pattern="HTTrack" />
            <add input="{HTTP_USER_AGENT}" pattern="ia_archiver" />
            <add input="{HTTP_USER_AGENT}" pattern="IDBot" />
            <add input="{HTTP_USER_AGENT}" pattern="id-search" />
            <add input="{HTTP_USER_AGENT}" pattern="id-search\.org" />
            <add input="{HTTP_USER_AGENT}" pattern="^Image\ Stripper" />
            <add input="{HTTP_USER_AGENT}" pattern="^Image\ Sucker" />
            <add input="{HTTP_USER_AGENT}" pattern="Indy\ Library" />
            <add input="{HTTP_USER_AGENT}" pattern="^InterGET" />
            <add input="{HTTP_USER_AGENT}" pattern="^Internet\ Ninja" />
            <add input="{HTTP_USER_AGENT}" pattern="^InternetSeer\.com" />
            <add input="{HTTP_USER_AGENT}" pattern="IRLbot" />
            <add input="{HTTP_USER_AGENT}" pattern="ISC\ Systems\ iRc\ Search\ 2\.1" />
            <add input="{HTTP_USER_AGENT}" pattern="^Java" />
            <add input="{HTTP_USER_AGENT}" pattern="^JetCar" />
            <add input="{HTTP_USER_AGENT}" pattern="^JOC\ Web\ Spider" />
            <add input="{HTTP_USER_AGENT}" pattern="^larbin" />
            <add input="{HTTP_USER_AGENT}" pattern="^LeechFTP" />
            <add input="{HTTP_USER_AGENT}" pattern="libwww" />
            <add input="{HTTP_USER_AGENT}" pattern="libwww-perl" />
            <add input="{HTTP_USER_AGENT}" pattern="^Link" />
            <add input="{HTTP_USER_AGENT}" pattern="LinksManager.com_bot" />
            <add input="{HTTP_USER_AGENT}" pattern="linkwalker" />
            <add input="{HTTP_USER_AGENT}" pattern="lwp-trivial" />
            <add input="{HTTP_USER_AGENT}" pattern="^Mass\ Downloader" />
            <add input="{HTTP_USER_AGENT}" pattern="^Maxthon$" />
            <add input="{HTTP_USER_AGENT}" pattern="MFC_Tear_Sample" />
            <add input="{HTTP_USER_AGENT}" pattern="^microsoft\.url" />
            <add input="{HTTP_USER_AGENT}" pattern="Microsoft\ URL\ Control" />
            <add input="{HTTP_USER_AGENT}" pattern="^MIDown\ tool" />
            <add input="{HTTP_USER_AGENT}" pattern="^Mister\ PiX" />
            <add input="{HTTP_USER_AGENT}" pattern="Missigua\ Locator" />
            <add input="{HTTP_USER_AGENT}" pattern="^Mozilla\.*Indy" />
            <add input="{HTTP_USER_AGENT}" pattern="^Mozilla\.*NEWT" />
            <add input="{HTTP_USER_AGENT}" pattern="^MSFrontPage" />
            <add input="{HTTP_USER_AGENT}" pattern="^Navroad" />
            <add input="{HTTP_USER_AGENT}" pattern="^NearSite" />
            <add input="{HTTP_USER_AGENT}" pattern="^NetAnts" />
            <add input="{HTTP_USER_AGENT}" pattern="^NetSpider" />
            <add input="{HTTP_USER_AGENT}" pattern="^Net\ Vampire" />
            <add input="{HTTP_USER_AGENT}" pattern="^NetZIP" />
            <add input="{HTTP_USER_AGENT}" pattern="^Nutch" />
            <add input="{HTTP_USER_AGENT}" pattern="^Octopus" />
            <add input="{HTTP_USER_AGENT}" pattern="^Offline\ Explorer" />
            <add input="{HTTP_USER_AGENT}" pattern="^Offline\ Navigator" />
            <add input="{HTTP_USER_AGENT}" pattern="^PageGrabber" />
            <add input="{HTTP_USER_AGENT}" pattern="panscient.com" />
            <add input="{HTTP_USER_AGENT}" pattern="^Papa\ Foto" />
            <add input="{HTTP_USER_AGENT}" pattern="^pavuk" />
            <add input="{HTTP_USER_AGENT}" pattern="PECL::HTTP" />
            <add input="{HTTP_USER_AGENT}" pattern="^PeoplePal" />
            <add input="{HTTP_USER_AGENT}" pattern="^pcBrowser" />
            <add input="{HTTP_USER_AGENT}" pattern="PHPCrawl" />
            <add input="{HTTP_USER_AGENT}" pattern="PleaseCrawl" />
            <add input="{HTTP_USER_AGENT}" pattern="^psbot" />
            <add input="{HTTP_USER_AGENT}" pattern="^RealDownload" />
            <add input="{HTTP_USER_AGENT}" pattern="^ReGet" />
            <add input="{HTTP_USER_AGENT}" pattern="^Rippers\ 0" />
            <add input="{HTTP_USER_AGENT}" pattern="SBIder" />
            <add input="{HTTP_USER_AGENT}" pattern="^SeaMonkey$" />
            <add input="{HTTP_USER_AGENT}" pattern="^sitecheck\.internetseer\.com" />
            <add input="{HTTP_USER_AGENT}" pattern="^SiteSnagger" />
            <add input="{HTTP_USER_AGENT}" pattern="^SmartDownload" />
            <add input="{HTTP_USER_AGENT}" pattern="Snoopy" />
            <add input="{HTTP_USER_AGENT}" pattern="Steeler" />
            <add input="{HTTP_USER_AGENT}" pattern="^SuperBot" />
            <add input="{HTTP_USER_AGENT}" pattern="^SuperHTTP" />
            <add input="{HTTP_USER_AGENT}" pattern="^Surfbot" />
            <add input="{HTTP_USER_AGENT}" pattern="^tAkeOut" />
            <add input="{HTTP_USER_AGENT}" pattern="^Teleport\ Pro" />
            <add input="{HTTP_USER_AGENT}" pattern="^Toata\ dragostea\ mea\ pentru\ diavola" />
            <add input="{HTTP_USER_AGENT}" pattern="URI::Fetch" />
            <add input="{HTTP_USER_AGENT}" pattern="urllib" />
            <add input="{HTTP_USER_AGENT}" pattern="User-Agent" />
            <add input="{HTTP_USER_AGENT}" pattern="^VoidEYE" />
            <add input="{HTTP_USER_AGENT}" pattern="^Web\ Image\ Collector" />
            <add input="{HTTP_USER_AGENT}" pattern="^Web\ Sucker" />
            <add input="{HTTP_USER_AGENT}" pattern="Web\ Sucker" />
            <add input="{HTTP_USER_AGENT}" pattern="webalta" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebAuto" />
            <add input="{HTTP_USER_AGENT}" pattern="^[Ww]eb[Bb]andit" />
            <add input="{HTTP_USER_AGENT}" pattern="WebCollage" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebCopier" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebFetch" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebGo\ IS" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebLeacher" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebReaper" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebSauger" />
            <add input="{HTTP_USER_AGENT}" pattern="^Website\ eXtractor" />
            <add input="{HTTP_USER_AGENT}" pattern="^Website\ Quester" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebStripper" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebWhacker" />
            <add input="{HTTP_USER_AGENT}" pattern="^WebZIP" />
            <add input="{HTTP_USER_AGENT}" pattern="Wells\ Search\ II" />
            <add input="{HTTP_USER_AGENT}" pattern="WEP\ Search" />
            <add input="{HTTP_USER_AGENT}" pattern="^Wget" />
            <add input="{HTTP_USER_AGENT}" pattern="^Widow" />
            <add input="{HTTP_USER_AGENT}" pattern="^WWW-Mechanize" />
            <add input="{HTTP_USER_AGENT}" pattern="^WWWOFFLE" />
            <add input="{HTTP_USER_AGENT}" pattern="^Xaldon\ WebSpider" />
            <add input="{HTTP_USER_AGENT}" pattern="zermelo" />
            <add input="{HTTP_USER_AGENT}" pattern="^Zeus" />
            <add input="{HTTP_USER_AGENT}" pattern="^Zeus\.*Webster" />
            <add input="{HTTP_USER_AGENT}" pattern="ZyBorg" />
          </conditions>
          <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
        </rule>

        <rule name="Imported Rule 2" stopProcessing="true">
          <match url="^wp-admin/includes/" ignoreCase="false" />
          <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
        </rule>

        <rule name="Imported Rule 3" stopProcessing="true">
          <match url="^wp-includes/[^/]+\.php$" ignoreCase="false" />
          <conditions>
            <!--# RewriteRule !^wp-includes/ - [S=3]-->
            <add input="{SCRIPT_FILENAME}" pattern="^(.*)wp-includes/ms-files.php" ignoreCase="false" negate="true" />
          </conditions>
          <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
        </rule>

        <rule name="Imported Rule 4" stopProcessing="true">
          <match url="^wp-includes/js/tinymce/langs/.+\.php" ignoreCase="false" />
          <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
        </rule>

        <rule name="Imported Rule 5" stopProcessing="true">
          <match url="^wp-includes/theme-compat/" ignoreCase="false" />
          <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
        </rule>

        <rule name="Imported Rule 6" stopProcessing="true">
          <match url="^(.*)$" ignoreCase="false" />
          <conditions>
            <add input="{REQUEST_METHOD}" pattern="^(TRACE|DELETE|TRACK)" />
          </conditions>
          <action type="CustomResponse" statusCode="403" statusReason="Forbidden" statusDescription="Forbidden" />
        </rule>

     </rules>           
    </rewrite>
  </system.webServer>
</configuration> 
```

# r - 循环遍历 R 中的当前函数

> ID：16054446
> 
> 赞同：0
> 
> 时间：2013-04-17T07:49:43.480
> 
> 标签：r, function

我生成了以下函数，它根据输入值的范围执行操作：

```
foof <- function(height,age){

# we have a choice of two methods to use
# initially set both methods to false
SS = FALSE; # method 1
TT = FALSE; # method 2

# set range for values 
H_rng <- c(0.5,20) # height range
A_rng <- c(0,60) # age range

# check to see if all values lie within the ranges specified
if (isTRUE(all(height<H_rng[1]))){
  SS <- TRUE # use method 1
} else if(!(sum(age<A_rng[1])||sum(age>A_rng[2])) && !(sum(height<H_rng[1]))||sum(height>H_rng[2])){
  TT <- TRUE # use method 2
}

if (SS == TRUE){
  Vals <- SS+TT
}

if (TT == TRUE){
  Vals <- SS-TT
}

return(Vals)

} 
```

其中用于特定计算的方程取决于输入数组的值。该函数基本上查看输入参数中的所有值，然后如果所有这些值都在指定的范围内，它使用显示的方程来计算答案。但是，我想知道如何更改它以查看输入变量中的每个单独的值，然后使用正确的方程。这很难用语言描述，所以我举个例子：

```
height <- c(0,0,0,0,0,0,0,0)
height <- matrix(height,nrow = 2)

age <- c(18,9,22,3,4,6,7,32)
age <- matrix(age,nrow = 2)

f <- foof(height,age) 
```

这很好用，因为所有“高度”都低于 H_rng，因此它使用了方法 1。

如果我将其更改为

```
height <- c(0,0,0,0,0,0,2,0)
height <- matrix(height,nrow = 2)

age <- c(18,9,22,3,4,6,7,32)
age <- matrix(age,nrow = 2)

f <- foof(height,age) 
```

该函数不会返回任何输出，这是因为高度中的所有值都不小于 H_rng。

因此，我需要在我的函数末尾添加类似循环的内容，如果 SS 和 TT 都为假，那么我们分别查看身高和年龄的每个条目并返回数组中的值。我试图通过以下方式做到这一点：

```
foof <- function(height,age){

# initially set both methods to false
SS = FALSE; # method 1
TT = FALSE; # method 2

# set range for values 
H_rng <- c(0.5,20) # height range
A_rng <- c(0,60) # age range

# check to see if all values lie within the ranges specified
if (isTRUE(all(height<H_rng[1]))){
  SS <- TRUE # use method 1
} else if(!(sum(age<A_rng[1])||sum(age>A_rng[2])) && !(sum(height<H_rng[1]))||sum(height>H_rng[2])){
  TT <- TRUE # use method 2
}

if (SS == TRUE){
  Vals <- SS+TT
}

if (TT == TRUE){
  Vals <- SS-TT
}

if (SS == FALSE && TT == FALSE){
  Vals <- 0
  for (i in 1:length(height)){
    Vals[i] <- foof(height[i],age[i])
  }     
}

return(Vals) 
```

这会生成一个输出，但它与输入变量的维度不同，例如这里它是一个向量，而输入变量是一个矩阵。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:24:43.843

例如，您可以在最后一行之前添加此行：

```
.....
dim(Vals) <- dim(height)
return(Vals) 
```

# wordpress - 移动 Wordpress 时出错

> ID：16054447
> 
> 赞同：0
> 
> 时间：2013-04-17T07:49:44.267
> 
> 标签：wordpress, caching

我已将 WP 安装从[thedepartment.dk/test 移动](http://thedepartment.dk/test)到[nordes.org/nordes2013](http://nordes.org/nordes2013) .. 我从 thedepartment.dk/test 域复制了文件并删除了 nordes.org/nordes2013 域上的旧站点。

之后，我从 thedepartment.dk 中移动了 mysql-database，并将 mysql-database 导入到 nordes.org/nordes2013 主机上的新数据库中。

我在 mysql-database 中进行了搜索/替换，并将所有 thedepartment.dk/test URL 替换为 nordes.org/nordes2013 URL。之后，我使用所有新设置配置了 wp-config.php。

但是当我访问该站点时，它是否链接到旧的 nordes.org/nordes2013 但是当我刷新新站点时

有任何想法吗？我遵循了法典，并且之前移动了 WP。会不会是一些缓存问题？清除 Firefox/Chrome/Safari 中的缓存后出现问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:20:40.733

检查 WordPress 地址 (URL) 和站点地址 (URL) 是否仍指向旧域。

您可以在以下位置找到它：

**仪表板 > 常规 > 设置**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:50:55.997

尝试把它放在你的 wp-config.php

```
define('WP_HOME','http://example.com');
define('WP_SITEURL','http://example.com'); 
```

或者您可以删除您的 .htaccess （备份）并将您的永久链接刷新为非常基本的。

# haskell - 使用具有代数数据类型的 nullary 构造函数，而不是使用 Maybe？

> ID：16054448
> 
> 赞同：9
> 
> 时间：2013-04-17T07:49:44.673
> 
> 标签：haskell

我在我的代码中做这种事情：

```
data MyType = Cons1 a b
data OtherType = OtherType
             { val1 :: Int
             , val2 :: String
             , val3 :: Maybe MyType
             } 
```

我想知道将代码更改为此是否会更简洁/更简单，以及优点/缺点是什么：

```
data MyType = Cons1 a b | Missing
data OtherType = OtherType
             { val1 :: Int
             , val2 :: String
             , val3 :: MyType
             } 
```

我正在做的是将文件中的行读入 [OtherType]，每行有 4 列，例如第 3 列和第 4 列用于创建 val3 :: MyType。目前我正在使用 readMaybe 读取 a 和 b，然后将它们传递给一个函数，如果它们中的任何一个是 Nothing，则返回 Nothing，如果它们是 Just a 和 Just b，则返回 Just MyType。我在想我可以将其更改为返回 Missing ，从而去除一层包装。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-17T07:54:21.903

仅当所有值都可能有意义时才应将`Missing`构造函数添加到. 您必须处理所有处理值的函数。如果其中大多数不是全部的——抛出错误或以其他方式失败——那么显然不属于，你应该改用。`MyType``MyType``Missing``Missing``MyType``Missing``MyType``Maybe MyType`

简单地说：如果可选性是类型固有的，则在类型中对其进行编码。否则，请将其分开。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-17T07:59:20.747

第二种方法有两个小优点：

1.  通过削减间接级别，您编写的函数和遍历 值的函数`OtherType`通常会变得更简单（但并不引人注目）。
2.  通过为添加的空值构造函数选择一个好名称，您的代码可能会变得更加不言自明（与`Nothing`在各个地方使用相当通用的名称相比）。

一个很大的缺点是您无法使用标准库为您提供的所有预定义函数来处理`Maybe`-values，并且您必须自己编写相应的功能。

# java - 使用 s:property 解析 Struts 标签

> ID：16054449
> 
> 赞同：0
> 
> 时间：2013-04-17T07:49:48.563
> 
> 标签：java, jsp, struts

在我们的一个具有挑战性的应用程序中，我在 Action 类中动态生成了几个 struts 标签一旦我生成了 struts 标签，我希望它能够通过解析`s:property`

在我的 JSP 中：

```
<s:property value='generateElement("ABC")' escape='false' /> 
```

在我的 Java 动作中

```
public String generateElement(String element){
     return "<s:select id='aaaa' list=\"{'1':'1','2':'2'}\" >";
} 
```

最后我想生成选择框。

我如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:54:25.977

编译 JSP 后，您无法执行 JSP 代码。因此，在您的方法中返回 JSP 标记是没有用的。相反，`generateElement`应该在您的选择中返回您需要的对象，然后`<s:select>`在您的 JSP 中已经存在的标记中引用该属性。

# mysql - 由于 COUNT 查询导致的 Amazon RDS CPU 利用率

> ID：16054453
> 
> 赞同：0
> 
> 时间：2013-04-17T07:49:57.657
> 
> 标签：mysql, cpu, cpu-usage, rds

我已经在 Amazon EC2（新加坡地区）上发布了我的网站，并且我在同一地区使用了 MySQL RDS 介质实例进行数据存储。

就我而言，大多数选择查询都有一些 COUNT 功能。这些查询显示的结果非常缓慢。我已经在表上创建了适当的索引，并检查了 EXPLAIN 命令来分析这些查询。它向我表明，要获得结果，必须进行全表扫描。

在我的 RDS 介质实例上，我使用以下设置配置了自定义参数组。

```
log_queries_not_using_index = true,
slow_query_log = true,
long_query_time = 2 sec,
max_connections = 303,
innodb_buffer_pool_size = {DBInstanceClassMemory*3/4} 
```

昨天我的 CPU 利用率超过 95%，我的网站因此而崩溃。客流量没有大的增加。

此外，我将数据转储到本地系统上，并测试了其中一个 COUNT 查询。它在 RDS 上运行大约需要 1.5 秒，而在我的本地系统上运行只需要大约 400 毫秒。我的本地系统（4GB RAM，Intel core 2 duo 2.8GHz）上的配置是：

```
max_connections = 100,
slow_query_log = true,
long_query_time = 2 sec,
innodb_buffer_pool_size = 72351744 
```

那么，导致 CPU 使用率飙升以及 RDS 与我的本地系统之间的性能时间差异的原因可能是什么？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T11:42:34.300

根据表的大小 - RDS 实例使用 EBS 来存储数据 - 如果您正在执行表扫描并且它必须从 EBS 而不是本地缓存的内存中的键获取数据然后扫描它。所以 - 您可能会看到 CPU 所在的 RDS 实例与 SAN 中的 EBS 数据之间的网络延迟增加。当您在本地计算机上执行相同的查询时，唯一的滞后是磁盘磁头寻道时间。

然后是 CPU 时间之间的差异 - 根据 Amazon 对 EC2 单元的定义，m1.medium 的 CPU 时间比 core2 duo 少（因此扫描结果的机会也更少）。

HTH - 一般来说，我会尽量避免在您的查询中执行 COUNT(s)，因为这是一个非常低效的查询（如您所见），当数据库处于真实状态时，它可能并且将继续导致令人讨厌的不希望的结果-随时间变化的负载水平。

R

# java - 按不包含在实体中的列对数据表进行排序/过滤

> ID：16054455
> 
> 赞同：4
> 
> 时间：2013-04-17T07:50:02.893
> 
> 标签：java, primefaces

我有一个数据表，其中包含在我的实体中定义的列。我还添加了另一个名为`total`index.xhtml 的列：

```
...
<p:column headerText="total">
    <h:outputText value="#{bean.total}" />
</p:column>
... 
```

此列计算并返回每行中列的总和。一切正常，除了当我想按列排序/过滤时，该`total`列保持不变。

我想我也应该`total`在我的实体中添加该字段，但这似乎不切实际。对于这种情况，primefaces 有更好更直接的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T14:50:55.897

由于您希望实体类保持不可变，因此我可以考虑两种解决方案：

1）创建实体的子类，但不要将其声明为实体。您还可以创建一个包装类，接收`Entity`作为构造函数参数，并通过 getter 和 setter 直接操作原始对象上的数据。子类化的优点是已经继承了公共方法，但缺点是必须关心数据。

检查[此答案](https://stackoverflow.com/a/6422622/1532705)，了解为什么不将实体子类化为实体以及持久性问题。

```
public class EntitySubclass extends Entity {

    private Entity parent;

    public EntitySubclass(Entity parent) {
        this.parent = parent;
        // set all data from parent to this entity.
    }

    // fetch the parent object for persistance.
    public Entity getParent() {
        // set all data from this to parent.
    }

    public int getTotal() {
        int iDidMathOnEntityData = 0;
        // do math
        return iDidMathOnEntityData;
    }

} 
```

jsf：

```
<p:column headerText="total">
    <h:outputText value="#{subClass.total}" />
</p:column> 
```

* * *

2) 使用`rowIndexVar`( [https://stackoverflow.com/a/5704087/1532705](https://stackoverflow.com/a/5704087/1532705)`rowIndexVar` ) 并在传递as 参数的托管 Bean 上调用方法。然后获取相应的实体并进行数学运算。[需要 EL 2.2](https://stackoverflow.com/a/8326551/1532705)。

```
<p:column headerText="total">
    <h:outputText value="#{bean.total(rowIndexVar)}" />
</p:column> 
```

托管豆：

```
public int total(int rowIndexVar) {
    int iDidMathOnEntityData = 0;
    Entity e = getEntityByIndex(rowIndexVar);
    // do some math
    return iDidMathOnEntityData;
} 
```

* * *

3）如果有相同问题的人编辑实体没有问题，您可以将`getTotal()`方法添加为`@Transient`：

```
 @Transient
    public int getTotal() {
        int iDidMathOnEntityData = 0;
        // do math
        return iDidMathOnEntityData;
    } 
```

# c++ - 临时工的寿命

> ID：16054464
> 
> 赞同：4
> 
> 时间：2013-04-17T07:50:39.607
> 
> 标签：c++

下面的代码显示在函数`create()`中创建的对象的生命周期延长到在`const ref`创建的生命周期`main`，*这在所有情况下都正确*吗？我的意思是我们可以在某些情况下通过创建对它的引用来延长临时的生命周期？或者在这种特定情况下，编译器行为不端？

用MSVC2005编译

```
#include <iostream>

class testClass
{
public:
    testClass()
    {
        std::cout << "in testClass " << ((void*)this) << std::endl;
    }

    ~testClass()
    {
        std::cout << "in ~testClass " << ((void*)this) << std::endl;
    }
};

testClass create()
{
    return testClass();
}

int main()
{
    {
        testClass const& obj = create();

        std::cout << "we got a const reference to obj " << ((void*)&obj) << std::endl;
    }

    return 0;
} 
```

输出

```
in testClass 0018FF13
we got a const reference to obj 0018FF13
in ~testClass 0018FF13 
```

当然，其他人可能会得到不同的地址......在上述情况下，我期待使用函数创建的对象的析构函数`create()`，将在行之前调用

```
std::cout << "we got a const reference to obj " << ((void*)&obj) << std::endl; 
```

被执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T07:57:56.790

这是一种特殊情况：将*const*引用绑定到临时对象，会延长其生命周期，直到该 const 引用超出范围。这仅适用于函数本地 const 引用，例如以下内容将不起作用：

```
struct X
{
  int const& i
  X(int const& i_) : i(i_) {}
};

int f();

int main()
{
  X x(f()); 
  int u = x.i; //!
} 
```

在构造期间`x`， will 绑定到由, as will`i_`返回的临时对象，但尽管它是一个 const 引用，但临时对象的生命周期不会延长到 的生命周期，即该规则在这里适用。`f``i``i`

请参阅[这篇 GOTW 文章](http://herbsutter.com/2008/01/01/gotw-88-a-candidate-for-the-most-important-const/)

**更新：**正如文章和评论中提到的，这`const`是至关重要的。C++ 标准只允许将临时对象绑定到 const 左值引用和右值引用，因此`int& i = f();`是不允许的。但是，MSVC 有一个允许这样做的扩展，并且与其他引用一样，临时的生命周期会延长，直到引用超出范围。我不建议利用该扩展，因为它使代码不可移植。事实上，我会小心地将临时对象绑定到引用，因为这个特性并不为人所知，而且你的同事可能会感到困惑，因为它可以工作，这意味着代码将缺乏可读性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:08:24.927

澄清一下 - 我们可以展示 3 个场景`testClass create()`：

## 1

返回一个副本但通过 const 引用捕获它

```
testClass create()
{
    return testClass();
}

testClass const &obj = create(); 
```

它延长了临时`testClass()`的使用寿命`obj`。

## 2

返回副本并通过分配 (RVO) 捕获它

```
testClass create()
{
    return testClass();
}

testClass obj = create(); 
```

它延长了临时的`testClass()`寿命`obj`，因为 RVO 隐含地应用在它上面。不如说，其实这里没有临时对象，所有的东西都在运作，`obj`即使是在`create()`功能上。

## 3

返回副本并通过分配捕获它（没有 RVO）

```
testClass create()
{
    return testClass();
}

testClass obj = create(); 
```

从 回来后临时的寿命`testClass()`超过了`create()`，一个新的对象来到了世界。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T07:57:01.457

此[链接](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/cplr382.htm)应该可以帮助您了解这种情况是如何限定的。

> 当创建临时对象来初始化引用变量时，临时对象的名称与引用变量的名称具有相同的范围。当在对完整表达式（不是另一个表达式的子表达式）求值期间创建临时对象时，它会作为其求值的最后一步被销毁，在词法上包含创建它的点。
> 
> 全表达式的销毁有两个例外：
> 
> *   该表达式作为定义对象的声明的初始化程序出现：初始化完成时，临时对象被销毁。
> *   引用绑定到临时对象：临时对象在引用的生命周期结束时被销毁。

# c# - Task.RunSynchronously() 是否“递归”工作？

> ID：16054467
> 
> 赞同：2
> 
> 时间：2013-04-17T07:50:47.200
> 
> 标签：c#, asynchronous, .net-4.0, async-await

如果我在 C# 中调用`RunSynchronously()`a `Task`，这会导致在兔子洞中进一步异步调用同步运行吗？

假设我有一个名为`UpdateAsync()`. 在这个方法中，另一个异步调用被调用`DoSomethingAsync()`，在这个内部我们再次发现`DoSomethingElseAsync()`，调用`RunSynchronously()`'UpdateAsync（）'会导致`RunSynchronously()`也间接被调用`DoSomethingAsync()`吗？

**我的问题的原因：** 我有一种情况，我“需要”在 -block`UpdateAsync()`内调用异步方法 ( )`catch`并想知道调用它`RunSynchronously()`是否安全。文档非常清楚您不能`await`在`catch`-block 内。（严格来说，我可以在 -block 内使用布尔值`catch`并在 try-catch 之后调用`UpdateAsync()`，但这感觉很脏）。对双重问题感到抱歉，但正如您可能理解的那样，我不太知道如何表达它，并且对这个领域没有很好的理解。

（**编辑：** 我不知道如何找出方法是否被异步调用。你将如何为此编写单元测试？是否可以以某种方式记录它？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T11:12:34.603

> 我“需要”调用一个异步方法并想知道调用它`RunSynchronously()`是否安全

s有两种`Task`：code-based* `Tasks`（你可以使用`Task`构造函数或创建它们`Task.Factory.StartNew()`）和 promise-style s（你可以通过使用或编写方法`Task`手动创建它们）。`TaskCompletionSource``async`

唯一`Task`可以通过调用`Start()`或未启动`RunSynchronously()`的*基于代码的`Task`s*开始。由于 async 方法返回 promise 样式`Task`（或者可能已经开始基于代码的`Task`s），因此调用`RunSynchronously()`它们是无效的并且会导致异常。

所以，要真正回答你的问题：你问的是不可能的，所以问它是否安全是没有意义的。

* * *

* 这不是官方名称，不知道有没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:17:09.227

没有代码很难预测它将如何执行嵌套的异步方法。

您可以登录每个异步方法 Thread.CurrentThread.ManagedThreadId 属性并将 id 与您拥有的其他线程 ID 进行比较。当它们变化时，您的异步方法处于多线程执行中

或者尝试使用 Visual Studio 中的 Concurrency Visualizer，Analyze 菜单。使用 Task 类实例，即使使用 C#5 异步语法，也无法知道您是在并行执行还是在另一个线程执行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-17T19:31:14.653

我想我会与@svick 的回答相矛盾，但我觉得 OP 问题是有效的，因为异步方法的“承诺”（使用 Svick 的术语）可以获得任务，但不能启动，因此允许执行`Task.RunSynchronously()`.

```
 static void Main(string[] args)
    {
        ...
        //obtain a Task that's not started
        var t = new Task<int>((ob) => GetIntAsync((string)ob).Result, someString);
        ...
    }

    static async Task<int> GetIntAsync(string callerThreadId)
    {
       ... 
```

话虽如此，答案是：不，这`RunSynchronously()`会影响您运行它的任务。如果调用链稍后包含更多异步调用，它们将异步运行。

我有一个小控制台应用程序正在对此进行建模，有人有兴趣看到它，但这个概念很容易重现 - 只需链接足够多的异步调用并在同步和异步运行最早的调用之间切换以查看不同的行为。

# extjs4 - 如何在 hbox 布局中拉伸单个元素？

> ID：16054470
> 
> 赞同：1
> 
> 时间：2013-04-17T07:51:11.687
> 
> 标签：extjs4

如何告诉 extjs4 在`hbox`布局中只拉伸一个元素？

例如我有以下布局：

```
{
    flex: 1,
    layout: {
        type: 'vbox',
        align: 'stretch'
    },
    items: [{
        flex: 1,
        // GRID, needs to be stretched
    }, {
        // button, don't stretch
    }, {
        // another button, don't stretch
    }]
} 
```

在上面的代码中，所有元素（包括按钮）都被拉伸了。可以在盒子布局中使用吗？

当然，我可以在 hbox 容器中包装按钮，但我不喜欢这种解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:44:13.787

您可以使用的一种解决方法是给按钮 a `maxHeight`，因为约束总是“获胜”。

```
Ext.onReady(function(){
    Ext.create('Ext.panel.Panel', {
        width: 400,
        height: 300,
        renderTo: document.body,
        layout: {
            type: 'hbox',
            align: 'stretch'
        },
        items: [{
            flex: 1,
            title: 'A panel'
        }, {
            xtype: 'button',
            text: 'B1',
            maxHeight: 25
        }, {
            xtype: 'button',
            text: 'B2',
            maxHeight: 25
        }]
    })
}); 
```

# python - SQLAlchemy：关于自引用关系（错误：没有属性'_sa_instance_state'）

> ID：16054472
> 
> 赞同：0
> 
> 时间：2013-04-17T07:51:12.127
> 
> 标签：python, sql, orm, sqlalchemy, pyramid

我想实现一些映射类型，`many to many`例如. 例如，“apple”是“juicy fruits”的子代，同时，“apple”是许多“特定种类的苹果”的父代，而“juicy fruits”当然有很多父代喜欢“吃的东西” ”。简而言之就是关系。而且，它们都是关键字 class( ) 的实例。我将其定义如下，`self referential``keyword net``many to many``self referential`

```
kw2kw_table=Table('kw2kw_table',Base.metadata,
              Column('child_id',Integer,ForeignKey('kw_table.id'),primary_key=True),
              Column('parent_id',Integer,ForeignKey('kw_table.id'),primary_key=True),
             )

class KW(Base):
    __tablename__='kw_table'
    id=Column(Integer,primary_key=True)
    name=Column(Unicode(28),unique=True)
    parents=relationship('KW',
                 secondary=kw2kw_table,
                 primaryjoin=id==kw2kw_table.c.child_id,
                 secondaryjoin=id==kw2kw_table.c.parent_id,
                 backref='children',
                 )
    def __init__(self,name,parent=None):
        self.name=name
        self.children=[]
        if parent==None: #default to a root keyword
            self.parents.append(self)
        else:
            self.parents.append(parent) 
```

在我的视图文件中：

```
...   
    keywordName = request.params['keyword']
    parentName = request.params.get('parent',u'')
    if parentName:
        parent=DBSession.query(KW).filter(KW.name==parentName)
        if parent: #if parent exists
            new_kw=KW(keywordName,parent)
        else:
            parent=KW(parentName)
            new_kw=KW(keywordName,parent)
    else: #if the parent was not provided
        new_kw=KW(keywordName)
    DBSession.add(new_kw)
... 
```

但是，当使用 提交视图时`(keyword,parent)`，出现错误：

```
File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/orm/attributes.py", line 910, in fire_append_event
value = fn(state, value, initiator or self)
File "build/bdist.macosx-10.6-intel/egg/sqlalchemy/orm/attributes.py", line 1138, in emit_backref_from_collection_append_event
child_state, child_dict = instance_state(child), \
AttributeError: 'Query' object has no attribute '_sa_instance_state' 
```

我用谷歌搜索了它，但无法弄清楚。请帮忙。

## - - - - - 更新 - - - - - - - - - - - -

详情： [https ://gist.github.com/actor2019/5417471](https://gist.github.com/actor2019/5417471)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T22:04:25.160

您需要调用 Query 以便获得一个实例，现在您将 Query 对象传递给您的 Session：

```
parent=DBSession.query(KW).filter(KW.name==parentName).first() 
```

# css - 没有额外的 CSS 类的多个行高

> ID：16054482
> 
> 赞同：0
> 
> 时间：2013-04-17T07:51:36.183
> 
> 标签：css, line, extra

有没有办法在无序列表中拥有多个行高？看下面的例子，正常的 li 有 25px 的行高，但是一旦句子变得太长，它就会分裂成与之前定义的相同的行高。

[http://i46.tinypic.com/w1pdhi.jpg](http://i46.tinypic.com/w1pdhi.jpg)

一旦句子变得太长，我希望行高为 16px，而不必为 li 提供额外的 CSS 类。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T07:54:02.270

`line-height`为每个列表项赋予相同的法线并将 a`margin-bottom`应用于它们以在彼此之间创建空间

Jsbin[示例](http://jsbin.com/uqejad/1/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:07:06.460

您不能使行高动态地依赖于`li`单行与多行的元素渲染。您可以`li`使用类标记多行元素，但多行通常应动态取决于可用宽度，而不是静态指定。

另一方面，我认为您真正要寻找的是一种设置列表项之间垂直间距的方法。为此，您只需使用`line-height`适合多行项目的设置来设置垂直边距或填充。

# vim - 你在 MacBook Pro 上使用 Vim 上的 hjkl 键吗？

> ID：16054486
> 
> 赞同：-2
> 
> 时间：2013-04-17T07:51:53.937
> 
> 标签：vim

有人在 MacBook Pro 上使用 Vim 上的 h、j、k、l 键吗？我觉得这很困难，因为它们离经常使用的 Enter 键很远。

我知道导航 Vim 应该以更有效的方式完成（/、?、easymotion 等），但对于近距离移动，箭头很有用。

我知道很多人使用 h,j,k,l 来靠近主行，但是这些让我的手远离 Enter 键，我觉得这很不舒服。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:04:36.667

在 Vim 的上下文中，你的问题没有意义。`hjkl`动作（除了你应该更喜欢更精确的动作，如，，）`w`用于普通*模式*，而主要用于*插入模式*和结束*命令行模式*。（有一个正常模式命令，但它相当晦涩。）`W``f{char}`*`Enter`**`<CR>`***

 *****不要在插入模式下导航！**相反，使用 回到正常模式`<Esc>`。

作为初学者，尤其是当您来自其他编辑器时，不要屈服于重新映射 Vim 命令的最初冲动。他们在那里是有原因的，尽管需要一些时间来适应他们并发现他们的魔力。（你可以在谷歌上搜索描述 Vim 的命令结构及其类似语法的使用的文章，例如[这里](http://jeetworks.org/grokking-the-zen-of-the-vi-wu-wei)。）***

# jquery - 将base64图像发送到phonegap中的服务器

> ID：16054487
> 
> 赞同：0
> 
> 时间：2013-04-17T07:52:03.267
> 
> 标签：jquery, jquery-mobile, base64, cordova

尝试通过 restwebservice 将 base64 图像发送到服务器。问题是我在 logcat 中没有收到任何错误，并且它没有命中服务器。服务器网址正确。我使用 webapp 测试了服务，它工作正常。但是在phonegap中它的问题

功能测试（）{警报（imgByte）；

```
/**imgByte is in base64 format -->pic.src = "data:image/png;base64," + imageURI;
imgByte = pic.src;*/

    $.ajax({
        type : "POST",
        url : IMGURL,
        data : {
            image : imgByte
        },
        delay : 3,
        dataType : "text",
        cache : false,
        error : function(xhr, ajaxOptions, thrownError) {
            debugger;
        },

        success : function(response, status, xhr) {
            alert("haiSuccess1");
            response = xhr.responseText;
            var responseArray = JSON.parse(response);
            if (responseArray.status == "success") {

                alert("haiSuccess");

            }

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:52:49.600

因为您使用的是 Phonegap，所以跨域调用应该不是问题。

1.  你的照片拍成功了吗，你能看到吗？
2.  检查您是否在服务器端接收数据。
3.  如果第 1 点有问题，请检查您是否可以向您的服务器发送任何 REST 请求
4.  检查您是否有足够的权限从您的移动应用程序访问互联网

这是我在一个示例中使用的工作代码。

**Javascript：**

```
navigator.camera.getPicture(success, fail, {quality: 45, sourceType: src});

function success(imageData) {
    var url = some_location;
    var params = {image: imageData};

    // send the data
    $.post(url, params, function(data) {
        alert('sent');
        // Display the selected image on send complete
        $('#image').attr('src', 'data:image/jpeg;base64,' + params['image']);     
    });
}

function fail(error) { 
    alert(error); 
} 
```

PHP：

```
<?php 
    if ($_REQUEST['image']) {
        // convert the image data from base64
        $imgData = base64_decode($_REQUEST['image']);

        // rest of the code
    }
?> 
```

但我的猜测是您收到此错误：错误 414（请求 URI 太大）。您正在尝试发送到大图片。将此较低的图像质量修复到最低点并尝试发送它。如果它工作正常，那么这就是你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-24T14:00:47.607

它不是Phonegap问题。默认情况下，您的网络服务器（在服务器上运行的服务器端代码），他们将传入数据大小（不是文件大小）限制为某个固定大小。您应该增加以使其正常工作。

# c# - 在 .NET Framework 中创建 JSONObject 的库

> ID：16054494
> 
> 赞同：1
> 
> 时间：2013-04-17T07:52:24.233
> 
> 标签：c#, java, .net, json, object

我正在寻找一个能够执行以下操作的 JSON 库：

**电脑 1**

```
JSONObject obj = new JSONObject();
obj.put("name", "mkyong.com");
obj.put("age", new Integer(100)); 
```

**电脑 2**

```
JSONObject jsonObject = (JSONObject) obj;

String name = (String) jsonObject.get("name");
System.out.println(name);

long age = (Long) jsonObject.get("age");
System.out.println(age); 
```

如您所见，无需创建类来发送姓名和年龄值对。现在，这段代码是用 Java 编写的。.NET 中是否有执行此操作的库？我检查了 JSON.NET 的文档，但它似乎不提供使用 JSONobject 来添加值对。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-17T08:05:15.700

您可以使用[Json.Net](http://json.codeplex.com/)

```
dynamic jsonObject = new JObject();
jsonObject.Name = "mkyong.com";
jsonObject.Age = 100;
var json = jsonObject.ToString(); 
```

输出：

```
{
    "Name": "mkyong.com",
    "Age": 100
} 
```

或没有`dynamic`

```
JObject jsonObject = new JObject();
jsonObject["Name"] = "mkyong.com";
jsonObject["Age"] = 100;
var json = jsonObject.ToString(); 
```

你甚至可以使用匿名类

```
var json = JsonConvert.SerializeObject(new {Name="mkyong.com", Age=100 }); 
```

# json - Ember.js/嵌套json/无法获取数据显示

> ID：16054495
> 
> 赞同：0
> 
> 时间：2013-04-17T07:52:29.623
> 
> 标签：json, ember.js, timestamp, nested

首次尝试掌握 Ember.js atm。我正在尝试制作一个简单的 CMS，但由于某种原因，我无法从显示的 json 中获取任何数据。我已经从 Fixture 切换到 RESTAdapter，但我仍然坚持

> 错误：断言失败：您的服务器返回了一个带有键时间戳的哈希，但您没有它的映射。

这是我的js代码：

```
 App.Store = DS.Store.extend(
      {
 revision:12,
 adapter: 'DS.RESTAdapter'
      }
     ); 

 App.Menucategory = DS.Model.extend({
       timestamp: DS.attr('number'),
       status: DS.attr('string')       
});

  App.MenucategoryRoute = Ember.Route.extend({
       model: function() {
               return App.Menucategory.find();
       }
});

DS.RESTAdapter.reopen({
  url: <my url>
});

DS.RESTAdapter.configure("plurals", {
  menucategory: "menucategory"
}); 
```

尝试通过以下方式访问它：

```
<script type="text/x-handlebars" id="menucategory">
    {{#each model}}
{{data}}
    {{/each}}
</script> 
```

我的json结构：

```
 {
"timestamp": 1366106783,
"status": "OK",
"data": [
{
"name": "starters",
"id": 1
},
{
"name": "main dishes",
"id": 2
}]} 
```

提前感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:54:27.160

默认情况下，RESTAdapter 期望您的 API 采用特定格式，您的 API 不符合该格式，如果您可以修改您的 API，则需要让它以这种格式返回，否则您需要自定义适配器.

预期格式（基于您的 JSON）：

```
{
  "menucategory": [
    {
      "name": "starters",
      "id": 1
    },
    {
      "name": "main dishes",
      "id": 2
    }
  ],
  "meta": {
    "timestamp": 1366106783,
    "status": "OK",
  }
} 
```

# java - 为动态添加的按钮添加全局键盘快捷键

> ID：16054497
> 
> 赞同：0
> 
> 时间：2013-04-17T07:52:33.820
> 
> 标签：java, swing

我在为动态添加的按钮设置快捷方式时遇到了一些困难。按钮位于动态添加的面板上。我想为这些按钮添加键盘快捷键，如下所示：

```
ctrl+1 -> button1
ctrl+2 -> button2
etc. 
```

按钮是通过算法添加的，所以我不知道会有多少个按钮（最小 0，最大 5）。我想用全局（在整个面板中工作）键盘快捷键来调用这些按钮。我想知道如何实现这一点，当我的按钮上的文本像这样动态制作时：

```
getNewAmountQueryButton(label) 
```

这使得：

```
private JButton getNewAmountQueryButton(final Decimal label) {
    JButton temp = new JButton(label.toString());
    ... 
```

我尝试添加 keylistener 但它仅在我关注按钮时才有效：

```
button.addKeyListener(new KeyAdapter() {

        @Override
        public void keyPressed(final KeyEvent e) {
                @Override
                public void run() {
                    if ((e.getKeyCode() == getKeyCode()) && ((e.getModifiers() & InputEvent.CTRL_MASK) != 0)) {
                        model.setAmount(model.getAmount().add(label));
                        field().selectAll();
                        refreshDisplay();
                    }
                }
            });
    }); 
```

你知道我该怎么做吗？我想将监听器添加到顶级面板，但是当我`model.setAmount(model.getAmount().add(label));`用来刷新一些 textField 时，由于缺少这个是不可能的`label`参数，这是不可能的。

任何想法？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:38:47.063

用于[`Action`](http://docs.oracle.com/javase/tutorial/uiswing/misc/action.html)封装每个按钮的行为。您可以指定所需的`MNEMONIC_KEY`，如此处所示[，](https://stackoverflow.com/a/5129757/230513)并且您可以向 中添加绑定，如此[处](https://stackoverflow.com/a/5797965/230513)`ACCELERATOR_KEY`所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T10:16:11.010

建议您使用[Key Bindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)。

基本上，他们不会遭受与相同的焦点问题`KeyListeners`

# testing - 如何使用 selenium IDE 验证网页中是否存在图像？

> ID：16054502
> 
> 赞同：2
> 
> 时间：2013-04-17T07:53:15.157
> 
> 标签：testing, selenium-ide

我正在使用`selenium IDE 1.10.0`. 我正在尝试检查产品类别中是否存在图像。我应该使用什么命令来验证图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-18T05:08:08.607

在 FF 浏览器中打开 selenium IDE

右键单击图像，然后您会看到`assertelementpresent`命令，如果您没有看到此命令，则将鼠标悬停在显示所有可用命令上并选择`assertelementpresent`

检查图像![这里](https://i.stack.imgur.com/auUuH.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-29T13:00:11.940

根据您的任务（为什么需要此图像），有 3 种方法可以做到这一点：

1) 您可以等待图像执行某些操作（例如等待按钮单击它）：waitForElementPresent(locator)。它使用 Selenium IDE 中设置的超时。因此，当元素出现时，您的脚本将执行下一行。如果它没有出现 - 这种情况应该以某种方式处理（例如使用验证 - 见第 2 项）

2）如果您需要知道图像是否存在 - 您可以使用 verifyElementPresent(locator) - 它返回 true 或 false（并且您可以存储此值）。如果图像不存在 - 测试将继续运行（这很重要！）

3) 如果这个图像很重要 - 使用这里已经建议的内容：assertElementPresent(locator) - 如果图像不存在，测试将停止。

Ps 我希望你知道定位器是什么意思。如果没有 - 查找样本，这很容易

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:21:06.673

尝试使用

```
assertElementPresent //img 
```

第二个是相对于图像的xpath

如何找到自己的最佳方法：

*   打开 Selenium IDE 插件
*   右键单击要检查的元素
*   悬停显示所有可用命令
*   尝试找到最合适的命令
*   使用该命令，看看会发生什么

# eclipse - 在eclipse中仅格式化选定的代码

> ID：16054504
> 
> 赞同：10
> 
> 时间：2013-04-17T07:53:16.533
> 
> 标签：eclipse, code-formatting, eclipse-pdt

正如标题所说，我只想格式化选定的代码行。我知道按`Ctrl`+`Shift`格式化`F`整个文件。

格式化整个文件不是很好的选择，因为当我提交文件时会产生很多冲突。我更改了文件的一部分（从互联网等复制了一些代码）。有没有简单的方法来格式化选定的行`eclipse`。我搜索了很多，但没有找到解决方案。我正在使用 PHP。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-17T08:53:38.343

突出显示（左键单击、拖动、左释放）要格式化的行，然后按`Ctrl`+ `Shift`+`F`或右键单击并选择`Source -> Format`。

对于 Java 代码，您必须突出显示一段完整的代码（语句、方法）。

对于 PHP，我想您仍然需要突出显示一段完整的代码。

在 Eclipse 4.2 的 Windows 版本上测试。

# c# - “双向”中的 ExceptionValidationRule 和 XmlParseValidationException

> ID：16054507
> 
> 赞同：1
> 
> 时间：2013-04-17T07:53:24.717
> 
> 标签：c#, wpf, xaml, exception, data-binding

我有一个 WPF 应用程序，其中包含数据库中的数据。我可以在我的 Appli 中创建新数据并保存到数据库，我可以从我的数据库中加载数据。

例如，我创建了一个 Person 类。

在我的 WPF 应用程序中，我可以创建一个 Person 并保存到数据库。当我创建客户端时，一些文本框使用 ExceptionValidationRule 进行验证，如果验证为假，则会出现一个带有详细错误的标签，一切正常：)

**我的问题很简单：**在我的 App Launching 中，在我的 MainWindow() 中，我将我的所有 Person 对象放在我的数据库中，并将其加载到 DataGrid 中。

当我加载“Person 对象”时，将调用验证（因为验证过程存在于 set() 函数中），并且，如果出现错误，则

```
throw new ApplicationException(....) 
```

不是扔！我有异常错误（ XmlParseValidationException ）消息，而不是说错误的标签。

只有当数据被加载到 Person 对象中时。

**所以，总结：**

如果我在绑定到 Person 对象的文本框中输入错误数据，如果验证为假，则一切正常，我会看到错误标签 :)

如果我将坏数据从数据库加载到 Person 对象，如果验证为假，异常消息框会出现在我的屏幕上！

**这是我的 XAML：**

```
<TextBox Name="TextBox_CodePerson" TabIndex="1" Grid.Column="1" VerticalAlignment="Center" Height="20">
    <TextBox.Text>
        <Binding Path="strCodePerson" >
            <Binding.ValidationRules>
                <ExceptionValidationRule />
            </Binding.ValidationRules>
        </Binding>
    </TextBox.Text>
</TextBox> 
```

* * *

```
 <Style TargetType="{x:Type TextBox}">
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <DockPanel LastChildFill="True">
                    <TextBlock Margin="50,0,0,0" DockPanel.Dock="Right"
                    Foreground="Red"
                    FontSize="10pt"
                    Text="{Binding ElementName=MyAdorner,Path=AdornedElement.(Validation.Errors)[0].ErrorContent}">
                    </TextBlock>
                    <Border BorderBrush="Red" BorderThickness="1">
                        <AdornedElementPlaceholder Name="MyAdorner" />
                    </Border>
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

**这是我的 Person 类（为了更好的视图而清理）：**

```
 private string m_strCodePerson;
    public string strCodePerson
    {
        get { return m_strCodePerson; }
        set
        {
            m_strCodePerson = value;
            if (m_strCodePerson.Trim() != "")
            {
                if (m_objIntervenant.ReadIntervenantCodebyCode(m_strCodePerson) != 0)
                {
                    throw new ApplicationException(m_strCodePerson.Trim() + " don't exist !");
                }
                FirePropertyChangedEvent("strCodePerson");
            }
            else
            {
                m_objIntervenant.strNom = "";
                m_objIntervenant.strIntervenant = "";
            }
            FirePropertyChangedEvent("objIntervenant.strNom");
        }
    } 
```

有人有想法吗？（我在调试或发布模式下测试我的代码，并在 VS 2012 调试器中取消选中未处理的异常）。

**编辑**：如果我在 Windows_load 事件上将我的数据从数据库加载到我的 Observable 集合中，我没有错误，但是，异常“停止” *LoadDataInObservableCollection*函数，因此结果是一个空的数据网格。

**一些细节：**

```
 private void Window_Loaded_1(object sender, RoutedEventArgs e)
{
    //
    //Fenetre_Parametres param = new Fenetre_Parametres();
    //param.ShowDialog();
    //

    LoadDataInObservableCollection();

    myDataGridEvenements.Focus();
    myDataGridEvenements.SelectedIndex = 0;
    myDataGridEvenements.MoveFocus(new TraversalRequest(FocusNavigationDirection.Next));

    Lbl_CliCodeCliDes.Content = App.obj_myClient.m_strCode.Trim() + " - " + App.obj_myClient.m_strNom.Trim();
    Lbl_CliCPostalVille.Content = App.obj_myClient.m_strCodePostal.Trim() + " - " + App.obj_myClient.m_strVille.Trim(); 

    App.obj_Parametres.LoadDataGridParams(myDataGridEvenements);

} 
```

**这是我的 LoadDataInObservableCollection 函数：**

```
 public ObservableCollection<Evenement> Collection_Evenements = new ObservableCollection<Evenement>();
    Evenement myEvenement = new Evenement();

    private void LoadDataInObservableCollection()
    {
        Collection_Evenements = myEvenement.GetEvenementsForCliCode(App.obj_myClient.m_strCode);
        Collection_Evenements.CollectionChanged += Collection_Evenements_CollectionChanged;
        myDataGridEvenements.ItemsSource = Collection_Evenements;
    } 
```

非常感谢 ：）

**编辑：**如果我使用自定义验证器类，它可以！

只是一个问题，为了强制验证测试，当我在 DataGrid 中选择行时，我需要这样做：

```
 private void myDataGrid_SelectedCellsChanged(object sender, SelectedCellsChangedEventArgs e)
    {
        // Affiche le code évt sélectionné dans le tableau, dans les champs modifiable ( en haut de l'écran )

        var item = myDataGrid.SelectedItem as Client;
        if ((item != null))
        {
            TextBox_Code.Text = item.strCode;
            TextBox_Name.Text = item.strName;
        }
    } 
```

：

```
TextBox_Code.Text = item.strCode;
TextBox_Name.Text = item.strName; 
```

如果我删除这两行，文本框会因为绑定而被正确初始化，但不会调用验证过程。为什么 ？有没有办法强制验证过程并使用完整的绑定 whitout ：

```
TextBox_Code.Text = item.strCode;
TextBox_Name.Text = item.strName; 
```

谢谢 ：）

尼克修斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T16:45:04.483

在事件中初始化您的对象，`Window.Loaded`而不是在构造函数中。当 Xaml 构造您的对象时，您无法正确地对异常做出反应。

# ab-testing - 整个网站的 Google 内容实验

> ID：16054508
> 
> 赞同：0
> 
> 时间：2013-04-17T07:53:31.180
> 
> 标签：ab-testing, multivariate-testing, google-experiments, content-expiration

我想对网站的整个部分进行 A/B 测试或实验。例如，在我的 /blog/ 页面上，其中一种变体将具有时事通讯表格，而另一种变体将具有免费的电子书下载按钮。

问题是我必须使用完整的 URL 路径进行实验，例如 /blog/2013/article/1?var=1 和 /blog/2013/article/1?var=2 使用这种方法我需要创建每篇博文都有一个新的实验。这是不可能的。

关于如何解决这个问题的任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T02:39:25.243

这是可能的，但缺少文档。

当您选择变体 URL 时，您需要使用*relative*而不是*http://*。这让您可以使用查询参数来定义变体，而不是完整的 URL。在您的示例中，您将原始页面定义为：

http://www.example.com/blog/2013/article/1

并且您的变体 URL 将是*?var=1*、*var=2*等，使用*relative*作为下拉菜单中的选项（而不是*http://*或*https://*）。

以下是关于为您的变体使用相对 URL 的不太清晰的文档：https: [//support.google.com/analytics/answer/2664470?hl=en&ref_topic=1745208](https://support.google.com/analytics/answer/2664470?hl=en&ref_topic=1745208)

要记住的一件重要事情是，如果您这样做，则需要在*每个*“原始”页面上包含内容实验代码。

还有另一种方法可以更好地控制提供变体页面并使用 Content Experiments JavScript API 控制实验。这是一个相对较新的功能 - 您可以在此处查看有关此的开发人员文档： [https ://developers.google.com/analytics/devguides/collection/gajs/experiments](https://developers.google.com/analytics/devguides/collection/gajs/experiments)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-05-02T01:39:23.463

我不确定这是可能的。您可能会查看更强大且易于使用的工具，例如 Visual Website Optimizer 或 Optimizely。

# wpf - 带有用户控件的 WPF 水平 ItemsControl

> ID：16054510
> 
> 赞同：1
> 
> 时间：2013-04-17T07:53:32.507
> 
> 标签：wpf, user-controls, itemscontrol, horizontallist

我正在尝试设计一个用户控件的水平堆栈。我的 named 中有一个named`UserControl`和`MiniControl`an 。在我试图把所有东西放在一起我有这个代码：`ObservableCollection<MiniControl>``ViewModel``MiniVideos``Window`

```
<ItemsControl x:Name="items" Margin="5" ItemsSource="{Binding Path=MiniVideos}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <StackPanel Orientation="Horizontal" Background="LightGray"/>
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>

    <ItemsControl.ItemTemplate>
        <DataTemplate>
            <ContentPresenter />
        </DataTemplate>
    </ItemsControl.ItemTemplate>
</ItemsControl> 
```

当我运行代码时，它没有按预期工作，并且输出中出现以下错误：

> System.Windows.Data 错误：26：ItemTemplate 和 ItemTemplateSelector 对于已经属于 ItemsControl 容器类型的项目被忽略；类型='MiniControl'。

任何想法？

# ankhsvn - AnkhSVN 2.4.11610.27 在 Visual Studio 2012 sp2 中不可用

> ID：16054513
> 
> 赞同：2
> 
> 时间：2013-04-17T07:53:41.397
> 
> 标签：ankhsvn

我已经安装了带有 SP 2 和 AnkhSVN 2.4.11610.27 的 Visual Studio Prof. 2012。两个设置过程都成功（没有错误），但我在 Visual Studios 源代码控制选项中看不到 AnkhSVN 插件，并且它没有在关于对话框中列出。从 AnkhSVN 的设置中卸载和修复并使用 /resetsettings 或 /resetskippkgs 启动 Visual Studio 没有帮助。有人有想法吗？谢谢安德烈亚斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T18:52:02.603

转到添加/删除程序并选择 AnkhSVN（或重新运行 MSI），选择更改，并确保启用“在 Microsoft Visual Studio 2012 中注册”。

# javascript - 为 iframe.contentDocument iframe 获取对象 null 使用带有必需选项的 jsdom 创建 iframe

> ID：16054515
> 
> 赞同：3
> 
> 时间：2013-04-17T07:53:50.057
> 
> 标签：javascript, iframe, jsdom

```
var elementFrame = window.document.createElement('iframe');
    elementFrame.style.display = 'none';
    elementFrame = window.document.body.insertBefore(elementFrame, null);

if (elementFrame.contentDocument) {
    element = elementFrame.contentDocument;
} else if (element.contentWindow) {
    element = elementFrame.contentWindow.document;
}

console.log("Element **********" + element); 
```

我正在使用带有必需参数的 jsdom

```
var path = require("path");
    global.jsdom = require("jsdom");
    global.jsdom.defaultDocumentFeatures = {
        ProcessExternalResources: true,
        ProcessExternalResources : ['script', 'frame', 'iframe'],
        FetchExternalResources : ['script','img','css','frame','iframe','link'],
        MutationEvents: true,
        QuerySelector : true
    }; 
```

我的 contentDocument 为空。我应该怎么做才能在 jsdom 中获取 iframe 的 html 对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-22T00:15:44.907

您的代码执行您希望它执行的操作，但您可能会尝试在文档完成加载之前添加 iframe。`<body>`在标签末尾添加 javascript 即可：

```
<!DOCTYPE html>
<html>
    <head>
        <title></title>

    </head>
    <body>
        <script>
            var elementFrame = window.document.createElement('iframe'); 
            elementFrame.style.display = 'none'; 
            elementFrame = window.document.body.insertBefore(elementFrame, null);

        if (elementFrame.contentDocument) {
            element = elementFrame.contentDocument;
        } else if (element.contentWindow) {
            element = elementFrame.contentWindow.document;
        }

        console.log("Element **********" + element);
        </script>
    </body>
</html> 
```

这是带有此代码的[jsFiddle 。](http://jsfiddle.net/Df4s2/)

# c# - 如何创建一个包含与源相同路径但具有不同根的新路径？

> ID：16054516
> 
> 赞同：-4
> 
> 时间：2013-04-17T07:53:50.893
> 
> 标签：c#, file, random, copy

我即将在 C# 中开发一个软件，该软件必须选择遵循以下规则的随机文件夹（在具有或多或少 10.000 个文件夹的场景中）：

1.  仅选择包含文件的那些；
2.  the software must stop the selection when the size of selected folder is 8GB;
3.  当我复制一个文件夹时，我需要保留该文件夹的整个路径（如果 c:\folder\temp\hello 是复制的，我想保留 d:\COPIED\folder\temp\hello）；

我想我会做类似的事情：

1.  从指定的根目录开始分析整个文件夹列表；
2.  在此列表中选择随机“行”，将其移动到“选定列表”，计算大小；
3.  当我达到 8GB 时，我停止第一阶段，开始复制它；

我认为这里不是一个大麻烦。你有什么想法？有什么建议么？

当我移动每个文件夹时，我真正的问题将是“重新创建”每个文件夹的整个路径。我该怎么做？使用 C# API 为每个级别创建文件夹还是有解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:09:08.550

所以最后一段是问题吗？我是这样理解的：

> 如何创建一个包含与源相同路径但具有不同根的新路径？

然后你可以使用这个[`Path`类](http://msdn.microsoft.com/en-us/library/system.io.path.aspx)和它的静态方法+`String.Substring`来获取新路径。

`D:\Copied`是您在 中使用的根目标文件夹`Path.Combine`。然后你必须添加没有根文件夹的旧路径（没有方法`Path`，我将使用`Substring`）：

```
var rootDest = @"D:\Copy";                                  // your root directory
var pathSource = @"C:\Test\Test.txt";                       // a sample file
var root = Path.GetPathRoot(pathSource);                    // C:\
var oldPathWithoutRoot = pathSource.Substring(root.Length); // Test\Test.txt
var newPath = Path.Combine(rootDest, oldPathWithoutRoot);   // D:\Copy\Test\Test.txt 
```

然后使用[`File.Copy`](http://msdn.microsoft.com/en-us/library/c6cfw35a.aspx)将文件夹中的所有文件从旧路径复制到新路径。

您必须检查目录是否存在并创建它：

```
var targetDir = Path.GetDirectoryName(newPath);
if (!Directory.Exists(targetDir))
{
    Directory.CreateDirectory(targetDir);                   // D:\Copy\Test
}
File.Copy(pathSource, newPath); 
```

# c# - Windows.UI.Xaml.Application.Start 方法说明

> ID：16054522
> 
> 赞同：2
> 
> 时间：2013-04-17T07:54:00.650
> 
> 标签：c#, windows-8

此代码来自**Programming Windows，第六版**书：

```
using Windows.ApplicationModel.Activation; 
using Windows.UI; 
using Windows.UI.Xaml; 
using Windows.UI.Xaml.Controls; 
using Windows.UI.Xaml.Media;    

namespace StrippedDownHello
{
    public class App : Application
    {
        static void Main(string[] args)
        {
            Application.Start((p) => new App());
        }

        ...
    }
} 
```

我无法理解`Application.Start((p) => new App());`line 的语法。在类文档`Start`方法中定义为：

```
public static void Start(ApplicationInitializationCallback callback); 
```

请解释一下这个带有 lambda 表达式的代码行是如何与`Start`方法定义相关的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:06:11.123

lambda 只是编写[ApplicationInitializationCallback实例的快捷方式](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.applicationinitializationcallback)

你可以检查这个委托的签名，看看它确实接受了一个参数并且什么都不返回。

在您的示例中，lambda 正是这样做的：接受一个参数 p，实例化一个 App 并且不返回任何内容。

如果不使用 lambda，你会这样写：

```
 static void Main(string[] args)
        {
            Application.Start(new ApplicationInitializationCallback(Start));
        }

        private static void Start(ApplicationInitializationCallbackParams p)
        {
            new App();
        } 
```

# spring - 属性如何在spring xml中使用

> ID：16054524
> 
> 赞同：1
> 
> 时间：2013-04-17T07:54:10.370
> 
> 标签：spring, properties

`<context:property-placeholder location="WEB-INF/classes/config.config"/> config.config: path=com`

`<import resource="../../conf/${path}/test.xml"/>`

> 错误：org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from file [test.service.xml]; 嵌套异常是 java.lang.IllegalArgumentException：无法在 org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions 解析占位符“路径”（XmlBeanDefinitionReader.java:412） 原因：java.lang.IllegalArgumentException：无法解析占位符org.springframework.util.PropertyPlaceholderHelper.parseStringValue 的“路径”（PropertyPlaceholderHelper.java:173）

${path} 不能用于导入，怎么办？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:12:26.167

你可以尝试用这种方法吗？

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="location" value="classpath:yourpropertiesfile"></property>
</bean> 
```

可以将您的财产放在其他位置吗？也许这就是问题所在。

# jsf - 移动 rich:simpleTogglePanel 的打开/关闭标记

> ID：16054528
> 
> 赞同：0
> 
> 时间：2013-04-17T07:54:16.303
> 
> 标签：jsf, richfaces, myfaces

我有一个 simpleTogglePanel 设置如下：

```
<rich:simpleTogglePanel
    headerClass="myHeaderClass"
    opened="false"
    switchType="client" style="border: 0px;" bodyClass="myBodyClass">
    <f:facet name="header">
        <h:outputText styleClass="panelHeader" value="#{myBean.header}"></h:outputText>
    </f:facet>
    <f:facet name="closeMarker">
        <h:outputText value="^"/>
    </f:facet>
    <f:facet name="openMarker">
        <h:outputText value=">" />
    </f:facet>
    Content
</rich:simpleTogglePanel> 
```

我想将打开/关闭标记（我已分别制作 ^ 和 > 移动到面板的左侧。

我尝试在 myHeaderClass 中使用 float:left 以及 float:left !important 和 float:left;text-align:right。

我在任何地方都找不到任何解释如何做到这一点的东西。我在人们展示 simpleTogglePanel 整体功能的网站上找到的样式，这似乎是我所没有的。

我正在使用 JSF 1.2（Apache MyFaces 实现）和 Richfaces 3.3。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:26:15.073

管理标记的 CSS`rich:simpleTogglePanel`是`rich-stglpnl-marker`按照[RichFaces 参考指南](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_simpleTogglePanel.html)（向下滚动查看定义组件外观部分的类名称）

```
rich-stglpnl-marker     Defines styles for a wrapper <div> element of a marker 
```

而`headerClass`仅适用于标题元素。

```
headerClass    applicable to header elements 
```

# c# - ServiceStack FluentValidation 中的自定义响应 DTO

> ID：16054535
> 
> 赞同：17
> 
> 时间：2013-04-17T07:54:40.027
> 
> 标签：c#, servicestack, fluentvalidation

我正在评估[ServiceStack 中的 FluentValidation](https://github.com/ServiceStack/ServiceStack/wiki/Validation#fluentvalidation-for-request-dtos)以处理请求 DTO 的自动验证：

```
Plugins.Add(new ValidationFeature());
container.RegisterValidators(typeof(MyValidator).Assembly); 
```

通过序列化 DTO 将错误返回给客户端`ErrorResponse`，可能如下所示：

```
{
    "ErrorCode": "GreaterThan",
    "Message": "'Age' must be greater than '0'.",
    "Errors": [
        {
            "ErrorCode": "GreaterThan",
            "FieldName": "Age",
            "Message": "'Age' must be greater than '0'."
        },
        {
            "ErrorCode": "NotEmpty",
            "FieldName": "Company",
            "Message": "'Company' should not be empty."
        }
    ]
} 
```

我想知道是否可以使用不同的响应 DTO 返回错误。例如：

```
{
    "code": "123",
    "error": "'Age' must be greater than '0'."
} 
```

我知道可以在服务中明确使用验证器：

```
public MyService : Service
{
    private readonly IValidator<MyRequestDto> validator;
    public MyService(IValidator<MyRequestDto> validator)
    {
        this.validator = validator;
    }

    public object Get(MyRequestDto request)
    {
        var result = this.validator.Validate(request);
        if (!result.IsValid)
        {
            throw new SomeCustomException(result);
        }

        ... at this stage request DTO validation has passed
    }
} 
```

但这里的问题是是否有可能在某处隐式拦截此验证错误，以便我可以替换响应 DTO 并获得更清洁的服务：

```
public MyService : Service
{
    public object Get(MyRequestDto request)
    {
        ... at this stage request DTO validation has passed
    }
} 
```

* * *

更新：

在进一步深入研究源代码后，它看起来像是*被烧*入了`ValidationFeature`它所注册的请求过滤器，更具体地说是它注册的请求过滤器：

```
public class ValidationFilters
{
    public void RequestFilter(IHttpRequest req, IHttpResponse res, object requestDto)
    {
        var validator = ValidatorCache.GetValidator(req, requestDto.GetType());
        if (validator == null) return;

        var validatorWithHttpRequest = validator as IRequiresHttpRequest;
        if (validatorWithHttpRequest != null)
            validatorWithHttpRequest.HttpRequest = req;

        var ruleSet = req.HttpMethod;
        var validationResult = validator.Validate(
        new ValidationContext(requestDto, null, new MultiRuleSetValidatorSelector(ruleSet)));

        if (validationResult.IsValid) return;

        var errorResponse = DtoUtils.CreateErrorResponse(
            requestDto, validationResult.ToErrorResult());

        res.WriteToResponse(req, errorResponse);
    }
} 
```

通过编写自定义验证功能，我能够达到预期的效果。但也许有更优雅的方式？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T16:48:16.217

我刚刚[签入了一个自定义错误钩子](https://github.com/ServiceStack/ServiceStack/commit/f0ed6945a2e0a505418da22e63d1cea31786dda2)，它允许您指定一个自定义错误过滤器，以便在下一个版本的 ServiceStack（v3.9.44+）中更容易地支持这个用例。

现在，您可以从[CustomValidationErrorTests](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/CustomValidationErrorTests.cs)配置 ValidationFeature 以使用将返回的自定义错误过滤器，例如：

```
public override void Configure(Container container)
{
    Plugins.Add(new ValidationFeature { 
        ErrorResponseFilter = CustomValidationError });
    container.RegisterValidators(typeof(MyValidator).Assembly);           
}

public static object CustomValidationError(
    ValidationResult validationResult, object errorDto)
{
    var firstError = validationResult.Errors[0];
    var dto = new MyCustomErrorDto { 
        code = firstError.ErrorCode, error = firstError.ErrorMessage };

    //Ensure HTTP Clients recognize this as an HTTP Error
    return new HttpError(dto, HttpStatusCode.BadRequest, dto.code, dto.error);
} 
```

现在您的 HTTP 客户端将收到您自定义的错误响应：

```
try
{
    var response = "http://example.org/customerror".GetJsonFromUrl();
}
catch (Exception ex)
{
    ex.GetResponseBody().Print(); 
    //{"code":"GreaterThan","error":"'Age' must be greater than '0'."}
} 
```

**警告**：以这种方式自定义错误响应时，[ServiceStack 的类型化 C# 客户端](https://github.com/ServiceStack/ServiceStack/wiki/Error-Handling)将不再提供类型化异常，因为它们期望错误响应包含**ResponseStatus** DTO 属性。

# email - 添加签名到 Outlook 邮件 VS2012

> ID：16054539
> 
> 赞同：0
> 
> 时间：2013-04-17T07:54:55.403
> 
> 标签：email, visual-studio-2012, outlook, signature, outlook-2007

我正在制作一个签名按钮，单击该按钮应在页面底部添加我的签名。我正在使用 Visual Studio 2012 并且我已经制作了按钮，但由于我不懂这种编程语言，我需要一些帮助。

OnClick 将我的 NewMessagesSignature 添加到邮件底部。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-22T22:39:54.647

在`Outlook`中，我正在使用以下`VBA`宏将我的签名添加到当前位于编辑窗口中的邮件中：

```
Public Sub addAxelSignature()
    ' Alt-H G Enter
    SendKeys "%hg~"
End Sub 
```

因此，宏只是模拟我的手动按钮序列来添加签名。不理想，但它有效。

[您可以使用Visual Studio Tools for Office (VSTO)](http://en.wikipedia.org/wiki/Visual_Studio_Tools_for_Office)实现各种花哨的`Outlook`扩展/加载项。但是对于添加签名，一个简单的宏就足够了。`VBA`

# ruby-on-rails - 如何对用户模型中添加的额外字段进行验证以进行设计

> ID：16054543
> 
> 赞同：1
> 
> 时间：2013-04-17T07:55:31.783
> 
> 标签：ruby-on-rails, ruby-on-rails-3, devise

我已经搜索过这个问题，但没有找到答案。

我正在使用设计来创建新用户。当我创建一个新用户时，我有一些必填字段。

我也在用户模型中输入了这些字段，例如 -

```
validates_presence_of :first_name, :last_name, :company 
```

我已经在用户模型中编写了验证这些字段的存在，但是当我尝试创建新用户时，设计只考虑验证电子邮件字段而不考虑其他字段。

我还尝试从用户模型中删除 :validatable 并编写自定义错误验证，但这也不起作用。

但是，我想在创建新用户时验证所有需要的字段。

这个怎么做。

提前致谢？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T12:16:18.187

像这样给的东西..

这是 rails 3.2 验证，让我知道您的 rails 版本是什么

验证 :first_name,:last_name, :presence=> { :message => "Field is required" }, :on => :create

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-08T13:15:10.853

在您的模型中添加

```
validates :first_name, presence: true
validates :last_name, presence: true 
```

# c# - 如何在动画中的wpf中从下到上显示窗口

> ID：16054544
> 
> 赞同：0
> 
> 时间：2013-04-17T07:55:31.547
> 
> 标签：c#, .net, wpf

```
static int screenWidth = (int)SystemParameters.WorkArea.Width;
static int screenHeight = (int)SystemParameters.WorkArea.Height;

int heightAvail = ((screenHeight - intHeight) / 2);
int widthAvail = ((screenWidth - intWidth) / 2);
DoubleAnimation animation = new DoubleAnimation(widthAvail, widthAvail, TimeSpan.FromMilliseconds(300));
DoubleAnimation animationT = new DoubleAnimation(1920, heightAvail, TimeSpan.FromMilliseconds(300));
objUIElement.BeginAnimation(Window.LeftProperty, animation);
objUIElement.BeginAnimation(Window.TopProperty, animationT); 
```

这是我用来做动画的一个，但它来到了中心。我希望它应该粘在窗口的底部。

如何做到这一点？请分享一些想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T07:58:58.673

你为什么要除以`heightAvail`2 ？

```
int heightAvail = (screenHeight - intHeight); 
```

这应该这样做。

# ios - 为什么带有 PUT 的 RestKit 的 ManagedObjectRequestOperation 不更新 CoreData

> ID：16054545
> 
> 赞同：0
> 
> 时间：2013-04-17T07:55:32.407
> 
> 标签：ios, core-data, restkit, put

我有以下代码：

```
NSMutableURLRequest *request = [[ObjectManager sharedInstance] requestWithObject:managedObj 
method:RKRequestMethodPUT path:nil parameters:nil]; 
```

（在我的 ObjectManager 中有该对象的注册请求和响应描述符）。

然后，我使用该请求创建一个`RKManagedObjectRequestOperation`并`[NSManagedObjectContext MR_defaultContext]`作为我的上下文，并将请求排入队列。

响应成功后，模型对象会更新为新数据，但不会保存到 CoreData。我必须调用块才能保存它`[[NSManagedObjectContext MR_defaultContext] saveToPersistentStore:nil];`。`success`

当我提出`POST`请求时，会在 CoreData 中创建新模型。当我更新模型时，它只是不会使用 PUT 保存到 CoreData。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T14:12:25.503

我们正在使用 RestKit 和 MagicalRecord。我们对`contextForCurrentThread`和感到困惑`defaultContext`。当我们迁移到 only`contextForCurrentThread`时，PUT 请求按我们的意愿工作。

# javascript - 折叠 jQuery 垂直选项卡（水平折叠 div）

> ID：16054549
> 
> 赞同：0
> 
> 时间：2013-04-17T07:55:51.607
> 
> 标签：javascript, jquery, jquery-ui

这是 jsfiddle 原型：http: [//jsfiddle.net/TRRP2/](http://jsfiddle.net/TRRP2/)

目前，如果我按下切换按钮，仅选项卡 div 会显示/隐藏，但 tabs-1 内容 div 会保持原位。

点击事件代码为：

```
$("#tabs-left").tabs();
$(function () {
    $('#hide').click(function () {
        $('#tabs-only').toggle();
    });
}); 
```

当仅选项卡的 div 被隐藏时，我希望内容 div 左对齐。换句话说，仅选项卡的 div 应该折叠。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:05:47.463

正如我的评论所说，您应该更喜欢在 CSS 中执行此操作。

你的小提琴更新：http: [//jsfiddle.net/TRRP2/2/](http://jsfiddle.net/TRRP2/2/)

我只是改变了一点CSS

```
#tabs-left {
    position: relative;
    padding-left: 0.5em;
}
#tabs-only {
    float: left;
    width: 130px;
    height: 150px;
} 
```

# .htaccess - Symfony2 - 将 /web 目录重定向到根目录

> ID：16054551
> 
> 赞同：11
> 
> 时间：2013-04-17T07:56:06.613
> 
> 标签：.htaccess, redirect, symfony, rewrite

我的 Symfony2 项目出现重复内容问题。以下网址给出了相同的内容：

`www.mywebsite.com/web/page`和`www.mywebsite.com/page`

这是我的`/.htaccess`文件的内容：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ web/$1 [QSA,L]
</IfModule> 
```

我的`/web/.htaccess`文件内容：

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteRule ^(.*)$ app.php [QSA,L]
</IfModule> 
```

我想重定向任何以`/web`to开头的网址，`/`但我无法做到。你有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-17T08:14:23.317

在您的 web 目录（`/web/.htaccess`文件）中的 htaccess 文件中，将这些规则添加到正下方`RewriteEngine On`：

```
RewriteCond %{THE_REQUEST} ^(GET|HEAD)\ /web/
RewriteRule ^(.*)$ /$1 [L,R=301] 
```

这会将所有对 Web 目录的直接访问重定向到根目录。

# java - 返回二维数组java中任意对象的索引。

> ID：16054554
> 
> 赞同：0
> 
> 时间：2013-04-17T07:56:17.390
> 
> 标签：java, arrays, object, indexing

我正在尝试查找放置在数组中的对象的索引。数组已像这样填充

```
for(i = 0 ; i<n ;i++){
    for(j=0; j<n ;j++){
        squares[i][j]= new Square(i,j)
        } 
```

所以这个数组基本上充满了没有名字的 Square 对象。我想创建一个返回方形对象索引的方法，例如：

```
getObject(Square s){
{ 
```

我已经看到其他要求使用的答案

```
Arrays.asList(array) 
```

诸如此类的东西，但它们都尝试返回 int 或 String 的索引。

我应该如何返回任何对象的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:02:57.123

只要您的比较运算符（`equals()`方法）`Square`适合您，那么这些方法中的任何一种都可以：

*   转换为`ArrayList`和取消`indexOf`和`get`
*   使用`java.util.Arrays.binarySearch`
*   循环`foreach`并手动搜索
*   等等

您只需要一个有效的比较运算符，如果默认`Object.equals()`（对象实例的比较）适合您的需要，那么您无需做太多事情：

```
Point getObject(Square s){
{
    for(int i = 0; i<n; i++){
        for(int j = 0; j<n; j++){
            if( squares[i][j].equals(s) ) {
                return Point(i, j);
            }
        }
    }
    return null;
} 
```

请注意，如果您的数组很大，这不是最快的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:13:24.220

如果您可以使用 equals 方法（假设也定义了 n，或者您可以使用长度）：

```
public int[] getObject(Square s){

int[] returnIndex = new int[2];

for(int i = 0 ; i<this.n ;i++){
    for(int j=0; j<this.n ;j++){ 

        if(s.equals(this.squares[i][j])) {
               returnIndex[0] = i;
               returnIndex[1] = j;
               return returnIndex;
            }

       }
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-29T04:29:45.447

我已经这样解决了

```
private ArrayList<Square> squareList= new ArrayList<Square>(9);

  for (int i = 0; i < 3; i++) {
            for (int j = 0; j < 3; j++) {
                mSquare[i][j] = new Square(i, j);
                squareList.add(mSquare[i][j]);
            }
        }

    public int index(int r, int c) {
        return squareList.indexOf(Square(r, c));
    } 
```

# javascript - 带有小数和负数条件的棘手数字正则表达式

> ID：16054556
> 
> 赞同：0
> 
> 时间：2013-04-17T07:56:23.757
> 
> 标签：javascript, regex

我正在寻找正则表达式来验证数字包括小数和负数条件。
至于我这个正则表达式的棘手部分是 - 如果数字从 0 开始，它必须是小数。
所以

```
true:
    0.12
    1.5
    53
    -2

false:
    0
    0.
    string 
```

这可以用正则表达式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:01:03.743

我建议您改用带有简单类型转换的条件语句。它会*更快*。

```
if ( parseFloat(n) === n && n !== 0 ) { ... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:06:05.797

如果你真的需要一个，你可以使用这样的正则表达式：

```
var regex = /^-?([1-9][\d.]*\d*|0.[\d]+)$/ 
```

# regex - Ant PropertyRegex 在属性中不支持捕获组

> ID：16054568
> 
> 赞同：0
> 
> 时间：2013-04-17T07:57:06.457
> 
> 标签：regex, ant

我正在尝试创建一个动态支持 var 替换的 ant 构建目标。

```
<target name="replace_property" depends="init_ant_contrib">
    <propertyregex input="${replace_inboundproperty"
        property="${replace_outboundproperty}"
        regex="${replace_match}"
        replace="${replace_target}"
        global="true"
        override="true" />
</target> 
```

所以我加载了属性文件，我基本上是这样设置变量的：

```
replace_inboundproperty="/target/path/targetfile"
replace_outboundproperty=blah
replace_match="/target/(.*)/targetfile"
replace_target="\1" 
```

所以当我回响 blah 时，我得到“1”。现在，如果我真的这样做：

```
<target name="replace_property" depends="init_ant_contrib">
    <propertyregex input="${replace_inboundproperty"
        property="${replace_outboundproperty}"
        regex="${replace_match}"
        replace="\1"
        global="true"
        override="true" />
</target> 
```

和回声等等，我会得到“路径”。

谁能告诉我我缺少什么以允许替换使用属性文件/ ant -D 中的捕获组？使用 ant-contrib 1.0b3。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:37:24.823

发现在属性文件中，如果你双重转义它，它将正常工作：

```
replace_target=\\1 
```

# java - Java 7 NIO / JPathWatch 问题 - 在 Windows 中移动目录

> ID：16054569
> 
> 赞同：2
> 
> 时间：2013-04-17T07:57:07.007
> 
> 标签：java, windows, nio, watchservice

我已经实现了一个应用程序，它使用 Java NIO`WatchService`来监视目录树中文件和文件夹的更改。在 Windows XP 上运行，所有文件系统更改都被拾取 - 除了通过在资源管理器中拖放将目录移动到受监视的树中。

拾取事件用于剪切和粘贴目录（ctrl+x、ctrl+v），而不是拖放（**编辑**- 请参阅下面的更新）。

我已经使用[JPathWatch](http://jpathwatch.wordpress.com/)重新实现了解决方案，但是这也遇到了同样的问题。

我正在注册标准`ENTRY_CREATE`，`ENTRY_DELETE`并且在 Windows 上运行应用程序`ENTRY_MODIFY`时还使用了好奇的未充分记录的文件`com.sun.nio.file.ExtendedWatchEventModifier`来避免其他问题。

除了投票——我真的不想这样做——有人有什么想法吗？

**更新**

问题一般是移动文件 - 我误认为 ctrl+x/ctrl+v 工作。有关说明，请参见下面的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T22:01:40.057

编写测试用例证明最初的怀疑是不正确的——问题在于Windows 下的*任何文件移动操作。*

根本问题似乎是在`ExtendedWatchEventModifier.FILE_TREE`复制父目录但未移动时，在 Windows 上使用修饰符递归地监视所有子目录。

移动`ENTRY_CREATE`目录时，仅在父目录上注册，因此我的解决方案是手动删除`FILE_TREE`并递归监视目录。

有一个警告，这有点输/输的情况 -`FILE_TREE`首先使用的原因是允许监视目录树的递归删除。如果手动递归监视目录，则会在子目录上放置文件锁。这可以防止用户在不先删除子目录的情况下删除父目录。

使用`FILE_TREE`意味着仅在父文件夹上获得锁定，因此用户可以删除完整的树。

使用 JPathWatch 而不是 Java 7 NIO 会导致相同的行为：文件锁定和用户无法递归删除目录树。

最后**一个可用的解决方案**是使用 Apache Commons IO 的监控类的轮询方法，基于[这个例子](http://andreinc.net/2012/06/30/writing-a-simple-file-monitor-in-java-using-commons-io/)（但在 之后有一个额外的无限循环`monitor.start()`，因为这不会像暗示的那样阻塞。

# java - 在 Eclipse 中安装 EGIT 时出错

> ID：16054572
> 
> 赞同：2
> 
> 时间：2013-04-17T07:57:25.780
> 
> 标签：java, eclipse, git

我在为 Eclipse 安装 eGIT 插件时遇到了一些实际问题。

如果我进入安装新软件页面并在使用 bar 时输入[http://download.eclipse.org/egit/updates-nightly](http://download.eclipse.org/egit/updates-nightly)或[http://download.eclipse.org/egit/updates-nightly](http://download.eclipse.org/egit/updates-nightly)，我不会结果 - 只有一条找不到消息。

如果我将工作更改为所有可用站点，然后搜索 egit，我什么也得不到。

如果我尝试更新 eclipse 然后搜索我仍然一无所获。

我不知道我还需要做什么！我正在使用显然已预先安装的 Juno，但我在任何地方的显示视图或透视窗口中都看不到它

![在此处输入图像描述](https://i.stack.imgur.com/lDMca.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T06:05:05.197

您的 Eclipse 安装只是无法访问 Internet。要么你的机器真的没有连接，要么你在 Eclipse 中的代理设置是错误的。对于后者，请查看 Window -> Preferences -> General -> Network connections。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T08:07:10.547

窗口 -> 打开透视图 -> 其他 -> git 存储库探索

我输入了与您提供的相同链接，我看到了插件。你看到了什么？可以发图片吗？ ![在此处输入图像描述](https://i.stack.imgur.com/Vsfdg.jpg)

# c - C 简介：加法和打印

> ID：16054574
> 
> 赞同：1
> 
> 时间：2013-04-17T07:57:33.337
> 
> 标签：c, printf, calculator, addition

我正在尝试制作一个可以执行各种算术功能的基本计算器，从加法开始！现在我已经弄清楚了它的基本逻辑，但我不确定如何获取两个输入并将其打印出来！

```
#include <stdio.h>

int main()
{
    char mychar;
    int a;
    int op1;
    int op2;

    printf("Welcome to Andrew Hu's calculator program!\n"); //Greeting

    while(1)
    {    printf("Enter a mathematical operation to perform:\n");
        scanf("%c", &mychar);

    if(mychar == '+') //Valid Operators
        a = 1;
    else
        a = 0;

    if(a == 0) //Operator Checker, error if invalid
        printf("\nError, not a valid operator\n");
    else if(a == 1){
        printf("%c\n", &mychar),
        printf("Enter OP1:\n"),

       /* not sure what to put here to echo the character as a decimal*/

        printf("Enter OP2:\n"),

         /* not sure what to put here to echo the character as a decimal either*/

        printf("Result of %d %c %d = %d\n", op1, mychar, op2, (op1 + op2) )
        /* this last line I'm not too sure of. I'm trying to print out the expression
           which is op1 + op2 = the sum of both. */
              ;
    }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T08:06:08.717

使用 scanf 语句获取输入，就像使用数学运算符一样。switch case 语句可以很好地实现计算器。

```
scanf(" %d",&op1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:03:55.393

使用该`scanf`函数读取浮点值，例如

```
double op1 = 0.0;
scanf("%lf", &op1); 
```

表示将`%lf`输入的值读取为 -`float`值。

当您在命令行上输入值时，它们将被显示。

```
else if(a == 1){
    printf("%c\n", mychar), // don't use & with printf as it will print the address of mychar
    printf("Enter OP1:\n"),

   double op1 = 0.0;
   scanf("%lf", &op1);

    printf("Enter OP2:\n"),

    double op2 = 0.0;
    scanf("%lf", &op2);

    if(a == 1)
        printf("Result of %lf + %lf = %lf\n", op1, op2, (op1 + op2) );
        } 
```

# internet-explorer - Octopress - 在 IE8 中呈现为移动设备，并且“导航”具有“未定义”。如何解决？

> ID：16054576
> 
> 赞同：0
> 
> 时间：2013-04-17T07:57:34.647
> 
> 标签：internet-explorer, internet-explorer-8, octopress

我已经使用 Ocopress 重新构建了我的网站。我发现它非常适合构建静态站点！

但现在的问题是 -**当我尝试在 Internet Explorer 8 中查看时 - 它具有“移动”外观！**我的意思是 - **IE8 被认为是移动**的。事实并非如此。至少不适合我...

此外 - **“导航”下拉菜单有“未定义”条目**。

我不时在我的工作电脑上使用 IE8（尽管我更喜欢 Firefox 和 Chrome / Chromium）。

请参阅我附上的图片 - 我的带有 IE8 的 Octopress 网站。[1]

与我的 Octopress 网站在 Firefox 中的外观相比（看起来不错！）：[2]

将其与我的 Octopress 网站在 Google Chrome 中的外观进行比较（也不错！）

1.  我在 IE8 上的网站（不好）：
    [http ://www.flickr.com/photos/meorero/8657827234/](http://www.flickr.com/photos/meorero/8657827234/)

2.  火狐（好）： [http ://www.flickr.com/photos/meorero/8656722709/](http://www.flickr.com/photos/meorero/8656722709/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T09:30:39.857

正如我在 octopress 网站上发现的那样，在 <= ie8 中存在一些问题。

（我在 2013 年 3 月 11 日使用从主分支克隆的 Octopress v2.0）

*   该网站使用 html5 标签
*   升级到 Modernizr 2.6 删除了 respond.js，这意味着该站点始终看起来像移动版本
*   并且导航下拉标签在任何 ie 版本中都不起作用

因此，以下内容在我的网站上为我工作：

1.  添加

    ```
    <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <script src="{{ root_url }}/javascripts/libs/respond.min.js"></script>
    <![endif]--> 
    ```

    到标签`source/_includes/head.html`之前`</head>`

2.  获取`respond.min.js`文件

    `git clone https://github.com/scottjehl/Respond.git`

    并将其放入`source/javascripts/libs`

这应该解决 <= ie8 的样式和媒体查询问题

1.  要修复导航下拉菜单，需要修复 octopress.js 中 link.text 属性的使用。我克隆的 octopress 版本包括 jquery，所以：

    如下所示`source/javascripts/octopress.js`对 getNav() 进行更改，替换`link.text`为`$(link).text()`IE 使用 innerText 而不是链接上的文本属性。

    这是更改集差异：

    ```
    @@ -3,10 +3,10 @@
       mobileNav.children('select').append('<option value="">Navigate&hellip;</option>');
       $('ul[role=main-navigation]').addClass('main-navigation');
       $('ul.main-navigation a').each(function(i, link) {
    -    mobileNav.children('select').append('<option value="'+link.href+'">&raquo; '+link.text+'</option>');
    +    mobileNav.children('select').append('<option value="'+link.href+'">&raquo; '+$(link).text()+'</option>');
       });
       $('ul.subscription a').each(function(i, link) {
    -    mobileNav.children('select').append('<option value="'+link.href+'">&raquo; '+link.text+'</option>');
    +    mobileNav.children('select').append('<option value="'+link.href+'">&raquo; '+$(link).text()+'</option>');
       });
       mobileNav.children('select').bind('change', function(event) {
         if (event.target.value) { window.location.href = event.target.value; } 
    ```

octopress 问题跟踪暂时在 github 上关闭，因此部分或全部这些问题有望在下一个版本中得到修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T19:59:23.040

这是我所做的 - 这似乎适用于桌面浏览器 -**包括 IE8** !!：

在 ./source/_includes/head.html

删除了这个：

```
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en">
<!--<![endif]-->
<head> 
```

并把这个：

```
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" class="no-js ie6"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" class="no-js ie7"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" class="no-js ie8"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html lang="en" class="no-js"> <!--<![endif]-->
<head> 
```

# java - 如何使用wifimanager设置android设备的端口号？

> ID：16054577
> 
> 赞同：0
> 
> 时间：2013-04-17T07:57:35.230
> 
> 标签：java, android, android-wifi, wifimanager, wifi

我正在尝试使用 wifimanager 将其他设备与我的 android 应用程序连接起来。我使用此代码获取我的 android 设备的 ip 地址。但我无法获得使用 wifi 的我的 android 设备的端口号。如何获取它？？？请帮我！！！！提前致谢...

```
 wifiManager = (WifiManager)context.getSystemService(context.WIFI_SERVICE); 
     wifiInfo = wifiManager.getConnectionInfo();
         int ipAddress = wifiInfo.getIpAddress();
         ip_Address=String.format("%d.%d.%d.%d",(ipAddress & 0xff),(ipAddress >> 8 &     `0xff),(ipAddress >> 16 & 0xff),(ipAddress >> 24 & 0xff)); 
```

`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:00:43.793

当您谈论 Wifi 连接到的端口时，您实际上想要获取 Wifi 连接到的代理主机的代理端口。要获得此类设置，请使用以下库：

[https://code.google.com/p/android-proxy-library/](https://code.google.com/p/android-proxy-library/)

还请看下面：

[http://developer.android.com/reference/android/net/Proxy.html](http://developer.android.com/reference/android/net/Proxy.html)

没有与 Wifi 或 WLAN 相关的实际端口。为什么要获得港口？

# python - setuptools 删除二进制文件，但将它们保存在 tar 中

> ID：16054580
> 
> 赞同：0
> 
> 时间：2013-04-17T07:57:40.153
> 
> 标签：python, python-2.7

当我做

> python setup.py bdist

对于我的 python 项目文件夹。我发现它创建了 dist, build 文件夹，但是在创建了 egg/tar 之后它会删除二进制文件。我如何保存二进制文件？我可以看到它在最后删除了 build 文件夹。

```
running bdist
running bdist_dumb
running build
running build_py
creating build
creating build/lib
creating build/lib/my_project_folder
copying my_project_folder/__init__.py -> build/lib/my_project_folder
copying my_project_folder/my_script.py -> build/lib/my_project_folder
installing to build/bdist.linux-x86_64/dumb
running install
running install_lib
creating build/bdist.linux-x86_64
creating build/bdist.linux-x86_64/dumb
creating build/bdist.linux-x86_64/dumb/usr
creating build/bdist.linux-x86_64/dumb/usr/lib
creating build/bdist.linux-x86_64/dumb/usr/lib/python2.6
creating build/bdist.linux-x86_64/dumb/usr/lib/python2.6/site-packages
creating build/bdist.linux-x86_64/dumb/usr/lib/python2.6/site-packages/my_project_folder
copying build/lib/my_project_folder/__init__.py -> build/bdist.linux-x86_64/dumb/usr/lib/python2.6/site-packages/my_project_folder
copying build/lib/my_project_folder/my_script.py -> build/bdist.linux-
byte-compiling build/bdist.linux-x86_64/dumb/usr/lib/python2.6/site-packages/my_project_folder/__init__.py to __init__.pyc
byte-compiling build/bdist.linux-x86_64/dumb/usr/lib/python2.6/site-packages/my_project_folder/my_script.py to my_script.pyc
running install_egg_info
running egg_info
creating my_project_folder.egg-info
writing requirements to my_project_folder.egg-info/requires.txt
writing my_project_folder.egg-info/PKG-INFO
writing top-level names to my_project_folder.egg-info/top_level.txt
writing dependency_links to my_project_folder.egg-info/dependency_links.txt
writing requirements to my_project_folder.egg-info/requires.txt
writing my_project_folder.egg-info/PKG-INFO
writing top-level names to my_project_folder.egg-info/top_level.txt
writing dependency_links to my_project_folder.egg-info/dependency_links.txt
writing manifest file 'my_project_folder.egg-info/SOURCES.txt'
reading manifest file 'my_project_folder.egg-info/SOURCES.txt'
writing manifest file 'my_project_folder.egg-info/SOURCES.txt'
Copying my_project_folder.egg-info to build/bdist.linux-x86_64/dumb/usr/lib/python2.6/site-packages/my_project_folder-1.0.0_SNAPSHOT-py2.6.egg-info
running install_scripts
creating /root/workspace/my_project-rpm/my_project-v1/target/my_project-v1-1.0.0-SNAPSHOT/dist
tar -cf /root/workspace/my_project-rpm/my_project-v1/target/my_project-v1-1.0.0-SNAPSHOT/dist/my_project-v1-1.0.0-SNAPSHOT.linux-x86_64.tar .
gzip -f9 /root/workspace/my_project-rpm/my_project-v1/target/my_project-v1-1.0.0-SNAPSHOT/dist/my_project-v1-1.0.0-SNAPSHOT.linux-x86_64.tar
tar -cf /root/workspace/my_project-rpm/my_project-v1/target/my_project-v1-1.0.0-SNAPSHOT/dist/my_project-v1-1.0.0-SNAPSHOT.linux-x86_64.tar .
gzip -f9 /root/workspace/my_project-rpm/my_project-v1/target/my_project-v1-1.0.0-SNAPSHOT/dist/my_project-v1-1.0.0-SNAPSHOT.linux-x86_64.tar
removing 'build/bdist.linux-x86_64/dumb' (and everything under it) 
```

**我要解决的问题**是创建一个仅包含二进制文件的 tar 文件。到目前为止，我能够创建包含 *.py 和 *.pyc 文件的 tar 文件（默认情况下使用 bdist 命令）我知道这是 bdist 命令的功能。但我不希望 .py 文件在最后 tar 中。

只要我可以访问 *.pyc 文件，我就可以自己创建 tar，但 setuptools 不允许我保留它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:11:59.560

两者都做。

```
python setup.py bdist build 
```

或者

```
python setup.py bdist
python setup.py build 
```

# wt - 使用 wt 上传文件

> ID：16054581
> 
> 赞同：4
> 
> 时间：2013-04-17T07:57:41.030
> 
> 标签：wt

我是 WT 新手，我正在尝试上传文件示例。当我单击发送按钮时，代码工作正常，文件进度条运行到 100%，但我不确定它上传到哪里？我们可以定义以特定路径上传..

```
class HelloApplication: public WApplication {
public:
    HelloApplication(const WEnvironment& env);

private:

    WPushButton *uploadButton;
    Wt::WFileUpload *fu;

    void greet();
};

HelloApplication::HelloApplication(const WEnvironment& env) :
        WApplication(env) {
    root()->addStyleClass("container");
    setTitle("Hello world");       // application title

    fu = new Wt::WFileUpload(root());
    fu->setFileTextSize(50); // Set the maximum file size to 50 kB.
    fu->setProgressBar(new Wt::WProgressBar());
    fu->setMargin(10, Wt::Right);

    // Provide a button to start uploading.
    uploadButton = new Wt::WPushButton("Send", root());
    uploadButton->setMargin(10, Wt::Left | Wt::Right);

    // Upload when the button is clicked.

    uploadButton->clicked().connect(this, &HelloApplication::greet);
}

void HelloApplication::greet() {
    fu->upload();
    uploadButton->disable();

}

WApplication *createApplication(const WEnvironment& env) {

    return new HelloApplication(env);
}

int main(int argc, char **argv) {
    return WRun(argc, argv, &createApplication);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-24T08:56:21.283

当文件完成时，WFileUpload 将触发一个信号 (uploaded())。然后查看 spoolFileName() 以获取本地磁盘上文件的文件名。也听一下 fileTooLarge()，因为它会通知你上传失败。

WFileUpload 的手册有很多信息和一个代码示例： [http ://www.webtoolkit.eu/wt/doc/reference/html/classWt_1_1WFileUpload.html](http://www.webtoolkit.eu/wt/doc/reference/html/classWt_1_1WFileUpload.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-02T03:00:04.653

我意识到这是一篇旧文章，但我也遇到了问题，而且问题没有得到很好的回答（特别是读取文件内容所需的**uploadFiles函数）**

在您的构造函数（即 HelloApplication::HelloApplication 函数）中添加它以响应 fileUploaded 信号：

```
uploadButton->uploaded().connect(this, &HelloApplication::fileUploaded); 
```

然后添加这样的函数来读取文件的内容：

```
void HelloApplication::fileUploaded() {
    //The uploaded filename
    std::string mFilename = fu->spoolFileName(); 

    //The file contents
    std::vector<Wt::Http::UploadedFile> mFileContents = fu->uploadedFiles();

    //The file is temporarily stored in a file with location here
    std::string mContents;
    mContents=mFileContents.data()->spoolFileName();

    //Do something with the contents here
    //Either read in the file or copy it to use it

    //return
    return;
} 
```

我希望这可以帮助其他重定向到这里的人。

# c# - WPF 用户控件 WindowStartupLocation

> ID：16054583
> 
> 赞同：0
> 
> 时间：2013-04-17T07:57:44.333
> 
> 标签：c#, wpf, user-controls, window

如何获得in的`WindowStartupLocation`属性？`Window``UserControl`

```
public partial class ActivityDetailsView : UserControl
{
    public ActivityDetailsView(ActivityDetailsViewModel viewModel)
    {
        InitializeComponent();
        DataContext = viewModel;
        Loaded += ActivityDetailsView_Loaded;
        JobOrderLineItem.SelectionChanged += JobOrder_SelectionChanged;

        //this.WindowStartupLocation doesnt exist
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:16:46.100

这个怎么样？

```
public partial class ActivityDetailsView : Window
{
    // ...
} 
```

如果你`UserControl`应该表现得像`Window`为什么不从中派生？

# jquery - 固定列标题宽度与正文列宽度不匹配

> ID：16054584
> 
> 赞同：6
> 
> 时间：2013-04-17T07:57:46.877
> 
> 标签：jquery, css, jquery-ui, jquery-plugins, datatables

标题不与列宽对齐。[提琴手](http://jsfiddle.net/DyMSb/1/)。

[截屏](http://s17.postimg.org/dybznay9b/screen.png)

我在用着：

*   ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.0/css/jquery.dataTables.css
*   ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.0/css/jquery.dataTables_themeroller.css
*   datatables.net/release-datatables/media/js/jquery.js
*   datatables.net/release-datatables/media/js/jquery.dataTables.js
*   datatables.net/release-datatables/extras/FixedColumns/media/js/FixedColumns.js

这是我正在使用的代码：

JS：

```
$(document).ready(function() {   
    var aoColumns = [null,null,null,null,null,null,null,null,null,null,null];

    var oTable = $('#example').dataTable( {
        "sScrollX": "100%",
        "sScrollXInner": "150%",
        "bPaginate": false,
        "bAutoWidth": false,
        "aoColumns": aoColumns       
    } );

    var oFC = new FixedColumns( oTable, {
        "iLeftColumns": 4
    } );

    oTable.fnAdjustColumnSizing();
}); 
```

HTML：

```
<body>
   <div class="container">
      <table width="100%" cellpadding="0" cellspacing="0" border="1" id="example">
         <thead>
            <tr>
               <th rowspan="2">Branch</th>
               <th rowspan="2">Object</th>
               <th rowspan="2">Address</th>
               <th rowspan="2">Count</th>
               <th colspan="7">Availability</th>
            </tr>
            <tr>
               <th>15</th>
               <th>16</th>
               <th>17</th>
               <th>18</th>
               <th>19</th>
               <th>20</th>
               <th>21</th>
            </tr>
         </thead>
         <tbody>
            <tr>
               <td>United States of America, Washington</td>
               <td>ABC-123</td>
               <td>1514 Amber Pond Highway, Nohead Bottom, Washington, 99205-8224, US, (425) 023-9448</td>
               <td><a href="#">7</a></td>
               <td>-</td><td>-</td><td>-</td>
               <td>-</td><td>-</td><td>-</td><td>-</td>
            </tr>
            <tr>
               <td>United States of America, South Dakota</td>
               <td>DEF-456</td>
               <td>7827 Stony Pointe, Sunsweet, South Dakota, 57006-2156, US, (605) 621-7800</td>
               <td><a href="#">7</a></td>
               <td>-</td><td>-</td><td>-</td>
               <td>-</td><td>-</td><td>-</td><td>-</td>
            </tr>
            <tr>
               <td>United States of America, Newfoundland</td>
               <td>XYZ-549</td>
               <td>2379 Dewy Pioneer Highlands, Humbug, Newfoundland, A7O-6P5, CA, (709) 217-5115</td>
               <td><a href="#">7</a></td>
               <td>-</td><td>-</td><td>-</td>
               <td>-</td><td>-</td><td>-</td><td>-</td>
            </tr>
            <tr>
               <td>United States of America, Washington</td>
               <td>GHI-789</td>
               <td>5842 Easy Bay, Kravaksarak, Washington, 98428-9376, US, (425) 998-1922</td>
               <td><a href="#">7</a></td>
               <td>-</td><td>-</td><td>-</td>
               <td>-</td><td>-</td><td>-</td><td>-</td>
            </tr>
         </tbody>
      </table>
   </div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-01T08:54:18.127

当数据表包含水平填充时，它们会错误地计算 th 宽度。

我通过从 th 中删除我的填充，在其中添加一个跨度，然后将填充添加到跨度来解决这个问题。

IE。

```
<style>
th {padding: 0}
th > span {padding: 0 10px}
<style> 
```

像这样更改标记：

```
<tr>
 <th rowspan="2"><span>Branch</span></th>
 <th rowspan="2"><span>Object</span></th>
</tr> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:30:26.650

问题是由 sScrollX-scrollbar 引起的，它为右侧的列添加了额外的水平空间，这就是为什么其他列（没有滚动条）在标题上变短的原因。

如果您注释 sScrollX 行，则列正确对齐。

- - 更新 - -

要使用 js 修复宽度，这将起作用：

```
// *** FIX WIDTHS ON LEFT SIDE ***
var widths = [];

// first fix widths on tbody ...
$('.DTFC_LeftBodyWrapper thead th').each(
    function(){
        $(this).css('width', $(this).width());
    });

// ... now save the actual widths on array
$('.DTFC_LeftBodyWrapper thead th').each(
    function(){ 
        widths.push($(this).width());
    });

// ... and now update widths on thead
$('.DTFC_LeftHeadWrapper thead th').each(
    function(i, val){
        console.log('i:', i, ', width:',  widths[i]);
        $(this).css('width', widths[i]);
    }); 
```

我更新了一个[jsfiddle](http://jsfiddle.net/aKDL7/32/)

注意：我在 jsfiddle 窗口上也改成`Count`了`Cnt`，因为它太长了，这导致了额外的宽度问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:23:55.080

我可以通过将`th`的边距和填充重置为零来解决它：

```
th {
  padding: 0 !important;
  margin: 0 !important;
} 
```

# sql-server - SQL Server 查询返回的行数超出预期

> ID：16054591
> 
> 赞同：1
> 
> 时间：2013-04-17T07:58:24.980
> 
> 标签：sql-server

我有一个 sql server 查询，它返回的行比我预期的要多：

```
select 
   b.isbn, l.lend_no, s.first_name
from 
   dbo.books b, dbo.lending l, dbo.students s 
where 
   (l.act between '4/16/2013' and '4/16/2013') 
   and (l.stat ='close')` 
```

我想做的是得到`isbn`，该书`lend_no`的`student name`归还日期在给定日期之间并且借出状态已关闭，我的借出表只有 2 个在给定日期归还的借出，但查询给了我 304 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:04:06.160

您当前的查询从导致检索意外结果的三个表中获取笛卡尔积。您需要定义关系或表应如何连接，例如

```
select b.isbn, l.lend_no, s.first_name
from    dbo.books b
        INNER JOIN dbo.lending l
            ON c.Colname = l.ColName -- << define condition here
        INNER JOIN dbo.students s 
            ON ......                -- << define condition here
where   l.act between '4/16/2013' and '4/16/2013' and 
        l.stat ='close' 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:04:07.580

您没有在表之间定义任何**连接条件**，因此您将获得笛卡尔积。

尝试这样的事情：

```
SELECT
   b.isbn, l.lend_no, s.first_name
FROM
   dbo.books b
INNER JOIN
   dbo.lending l ON l.Book_id = b.Book_id   -- just guessing here
INNER JOIN
   dbo.students s ON l.student_id = s.student_id   -- just guessing here
WHERE
   l.act BETWEEN '20130416' AND '20130416' 
   AND l.stat = 'close' 
```

根据需要定义连接条件 - 我不知道您的表，您必须找出分别链接两个表的列。

我还使用了**正确的 ANSI JOIN**语法——不要只列出一堆用逗号分隔的表，这在 20 多年前已被排除在 SQL 标准之外（SQL 1992）。

另外：为了安全起见，我**总是**使用 ISO-8601 日期格式`YYYYMMDD`- 这是**唯一**适用于所有 SQL Server 版本以及所有语言、区域和日期格式设置的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:06:33.377

您的`FROM`条款没有按照您的预期进行。通过以这种方式指定表，您可以进行完全连接，从而为您提供笛卡尔积。您需要使用[正确的表连接语法。](http://msdn.microsoft.com/en-us/library/ms191517%28v=sql.105%29.aspx)

这是对表连接的一个很好的解释：http: [//www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# java - 在Java中更改png不透明部分的颜色

> ID：16054596
> 
> 赞同：19
> 
> 时间：2013-04-17T07:58:48.410
> 
> 标签：java, image, colors, png, transparency

我正在尝试自动更改一组图标的颜色。每个图标都有一个白色填充层，另一部分是透明的。这是一个例子：（在这种情况下它是绿色的，只是为了让它可见）

![图标搜索](https://i.stack.imgur.com/NWvnS.png)

我尝试执行以下操作：

```
private static BufferedImage colorImage(BufferedImage image) {
        int width = image.getWidth();
        int height = image.getHeight();

        for (int xx = 0; xx < width; xx++) {
            for (int yy = 0; yy < height; yy++) {
                Color originalColor = new Color(image.getRGB(xx, yy));
                System.out.println(xx + "|" + yy + " color: " + originalColor.toString() + "alpha: "
                        + originalColor.getAlpha());
                if (originalColor.equals(Color.WHITE) && originalColor.getAlpha() == 255) {
                    image.setRGB(xx, yy, Color.BLUE.getRGB());
                }
            }
        }
        return image;
    } 
```

我遇到的问题是我得到的每个像素都具有相同的值：

```
32|18 color: java.awt.Color[r=255,g=255,b=255]alpha: 255 
```

所以我的结果只是一个彩色方块。如何实现仅更改非透明部分的颜色？为什么所有像素都具有相同的 alpha 值？我想这是我的主要问题：没有正确读取 alpha 值。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-17T08:16:02.613

为什么它不起作用，我不知道，这会。

这会将所有像素更改为蓝色，保持它们的 alpha 值......

![在此处输入图像描述](https://i.stack.imgur.com/Jy47z.png)

```
import java.awt.image.BufferedImage;
import java.awt.image.WritableRaster;
import java.io.File;
import java.io.IOException;
import javax.imageio.ImageIO;

public class TestColorReplace {

    public static void main(String[] args) {
        try {
            BufferedImage img = colorImage(ImageIO.read(new File("NWvnS.png")));
            ImageIO.write(img, "png", new File("Test.png"));
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    }

    private static BufferedImage colorImage(BufferedImage image) {
        int width = image.getWidth();
        int height = image.getHeight();
        WritableRaster raster = image.getRaster();

        for (int xx = 0; xx < width; xx++) {
            for (int yy = 0; yy < height; yy++) {
                int[] pixels = raster.getPixel(xx, yy, (int[]) null);
                pixels[0] = 0;
                pixels[1] = 0;
                pixels[2] = 255;
                raster.setPixel(xx, yy, pixels);
            }
        }
        return image;
    }
} 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-17T08:12:12.920

问题是，那

```
Color originalColor = new Color(image.getRGB(xx, yy)); 
```

丢弃所有 alpha 值。相反，您必须使用

```
 Color originalColor = new Color(image.getRGB(xx, yy), true); 
```

保持 alpha 值可用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-12-02T18:58:26.580

如果您的位图已在 ImageView 中设置，只需执行以下操作：

```
imageView.setColorFilter(Color.RED); 
```

将所有非透明像素设置为红色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-23T12:02:11.333

由于我们将始终只替换 RGB 像素的前三个波段，因此在不分配不必要的新数组的情况下实现相同效果的更有效方法是：

```
private static void colorImageAndPreserveAlpha(BufferedImage img, Color c) {
    WritableRaster raster = img.getRaster();
    int[] pixel = new int[] {c.getRed(),c.getGreen(),c.getBlue()};
    for (int x = 0; x < raster.getWidth(); x++) 
        for (int y = 0; y < raster.getHeight(); y++)
            for (int b = 0; b < pixel.length; b++)
                raster.setSample(x,y,b,pixel[b]);    
} 
```

# php - 在谷歌查看器中隐藏 pdf 源

> ID：16054599
> 
> 赞同：0
> 
> 时间：2013-04-17T07:58:57.397
> 
> 标签：php

我使用 Google 查看器在网页上显示 pdf。

[http://docs.google.com/viewer?url=http%3A%2F%2Fresearch.google.com%2Farchive%2Fbigtable-osdi06.pdf](http://docs.google.com/viewer?url=http%3A%2F%2Fresearch.google.com%2Farchive%2Fbigtable-osdi06.pdf)

我的客户想要隐藏 url 的来源，即如果查看 html 页面的来源，它会显示文件的路径。

请帮助我，有什么方法可以通过 php 或任何其他想法传递 url？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:14:37.950

除非您创建自己的 PDF 查看器，该查看器支持 PDF 身份或 URI 的某种隐藏传递。Google 的查看器允许您*将原始 PDF 保存*在“文件”菜单下。我不知道您的客户担心或试图隐瞒什么。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:32:50.727

由于谷歌查看器将所有页面转换为图像，您所要做的就是使用 php 获取这些图像，然后用/如何显示它们来显示它们。无论是滑块还是只是包含所有页面的表格。但我怀疑这可能违反了 ToS。

**这是一些示例代码：**

```
<?php
//Share the document first so it's saved then its id won't be changed making it alot easier for us to get the images, make sure its public aswell
$url = 'https://docs.google.com/file/d/someweirdid/edit?usp=sharing';//the url for the file
$urlexp = explode('/', $url);
end($urlexp);
$id = prev($urlexp);
//here you cant print the image as is or read it with php and use your own domain to output it
$image = "https://docs.google.com/file/d/".$id."/image?pagenumber=1&w=800";
echo "<img src='".$image."' />";
/* Code to print it on ur own domain as your own
$im = file_get_contents($image);
header("Content-type: image/jpeg");
echo $im;
*/
?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T09:29:29.663

在这种情况下，Google 只是访问您公开可用的 pdf 的另一个网络用户。

防止直接访问您的 PDF 网址的唯一选择是拥有一个临时网址，该网址在特定使用次数或特定时间后过期

例如。

使用 PHP 生成 pdf 的唯一 url

```
http://example.com/pdfs/importantpdf.pdf?id=2342oiuqer23413;ja;sekfj;kjewr 
```

仅当 id 正确且按计数或时间仍然可用时，才从您的服务器返回 pdf。这样，您无需在服务器上公开实际文件名，但可以根据需要提供您的 pdf。如果谷歌请求它，您也可以尝试只返回 pdf，但这可能不简单且容易出错。

但正如其他人指出的那样，谷歌 pdf 查看器（实际上是任何 pdf 查看器）将允许您保存 pdf。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:28:08.147

您可以做的一件事是让不同的 URL 传递 PDF，但前提是请求来自 docs.google.com。

因此，您将拥有一个站点，例如 www.mypdfserver.com，当有人调用 PDF 时，您检查请求是否来自 docs.google.com。如果是这样，您将重定向到原始 URL。如果不是，你什么都不服务。

# android - 媒体查询和安卓设备

> ID：16054603
> 
> 赞同：2
> 
> 时间：2013-04-17T07:59:07.143
> 
> 标签：android, html, css, media-queries

我使用 html5+JQueryMobile + Phonegap 开发我的第一个混合应用程序...我正在三星 w (android 2.3.3)、Iphone 4s 和 Iphone5 的 IphoneSimulator 上测试应用程序...在主页我'想为此设备使用不同的背景图像...我正在尝试使用 CSS 媒体查询...

```
/* IPHONE 4 - IPHONE 3*/
@media screen and (height: 480px)  {

#home {
background-image:url(images/home/home_Med.png);
background-size: auto 100%;
}

}

/* GALAXY S1 - S2 */
@media screen and (width: 480px)  {

#home {
background-image:url(images/home/home_Small.png);
background-size: auto 100%;
}

}

 /* GALAXY S3 - IPHONE 5*/
@media screen and (height: 568px),screen and (height: 1280px) {
#home {
background-image:url(images/home/home_Big.png);
background-size: auto 100%;
}

} 
```

媒体查询与不同的 Iphone 完美配合......但是当我在我的三星 W（480x800，如 S1 和 S2）或 Galaxy S3 ADV 上测试时，它不起作用......我试图做很多不同的媒体查询...当我使用 with:320 for the Samsung W it Works!!!....可能我不了解有关 android 设备分辨率的信息...有人可以解释一下吗？！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:14:31.450

当您对移动设备进行媒体查询时，请始终使用以下行：

```
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"> 
```

此外，最好使用最小宽度和最小高度进行响应式设计

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T09:52:23.410

您可能还想检查像素比率，因为屏幕上的 1px ！= css 上的 1px。

```
@media only screen (-moz-min-device-pixel-ratio: 2), 
only screen and (-o-min-device-pixel-ratio: 2/1), 
only screen and (-webkit-min-device-pixel-ratio: 2), 
only screen and (min-device-pixel-ratio: 2) 
```

查看有关 quirksmode 的这篇[文章以获取更多信息。](http://www.quirksmode.org/blog/archives/2010/04/a_pixel_is_not.html)

# batch-file - Windows 批处理文件 - 移动文件名相同但扩展名不同的文件

> ID：16054605
> 
> 赞同：0
> 
> 时间：2013-04-17T07:59:18.887
> 
> 标签：batch-file

我编写了一个小批处理文件，将所有内容从一个文件夹移动到另一个文件夹。这工作正常。但是，源文件夹包含两种类型的文件。其中一种类型是 .doc，另一种是 .xml。这两个文件具有相同的名称。但有时，其中一个文件（.doc 或 .xml）会丢失。

```
@echo off
move /y "\\networklocation\folder\folder\*.*" "M:\localfolder" 
```

问题是如何让我的脚本只移动几个具有相同名称的 .doc 和 .xml 文件。例如，源包含 1.doc、2.doc 和 1.xml。该脚本应该只移动 1.doc 和 1.xml。2.doc 应该保留在源文件夹中。

我一直在寻找这个特殊的问题，但没有发现任何东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T09:03:20.793

尝试这个：

```
@echo off &setlocal
for %%i in ("\\networklocation\folder\folder\*.doc") do (
    if exist "%%~dpni.xml" (
        move /y "%%~i" "M:\localfolder"
        move /y "%%~dpni.xml" "M:\localfolder"
    )
) 
```

# javascript - 定期发送ajax请求

> ID：16054608
> 
> 赞同：4
> 
> 时间：2013-04-17T07:59:27.047
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, ajax

有一个页面，我想定期发出“后台”ajax 请求。所以页面被加载然后它应该在一定时间内发送 ajax 请求。

我可能会为此使用cron。我以前从未使用过，所以我想知道它是否适合该任务。还有其他更简单的方法吗？

PS 时间延迟将是大约 5 分钟。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:10:33.300

由于在您发送 AJAX 请求和收到完整响应之间本质上存在未知延迟，因此通常更优雅的方法是在前一个 AJAX 调用完成后的固定时间*后开始下一个 AJAX 调用。*这样，您还可以确保您的通话不会重叠。

```
var set_delay = 5000,
    callout = function () {
        $.ajax({
            /* blah */
        })
        .done(function (response) {
            // update the page
        })
        .always(function () {
            setTimeout(callout, set_delay);
        });
    };

// initial call
callout(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T08:05:34.867

Cron 在服务器端运行，您使用的是 HTML 和 AJAX，因此您应该使用 Javascript 解决这个问题 :-)

通过使用类似[`setInterval`](https://developer.mozilla.org/en/docs/DOM/window.setInterval)可以继续执行函数的方法，您的情况可能类似于通过 AJAX 轮询 url：

```
function updatePage(){
  // perform AJAX request
}
setInterval(updatePage, 5000); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:23:03.810

您可以像这样在四秒内发送 ajax 请求：

```
setInterval(get_news, 4000);
        function get_news(){
             $.ajax('/dashboards/get_news', {
                type: 'POST',
                success: function(result) {
                    if(result > 0){
                        $('#div_1').text("See "+result+" new messages");
                        $('#div_1').show();
                    }
                    else{
                        $('#div_1').css('display', 'none');
                    }
                     },
                error: function() {
                    // alert("Error")
                }
            });       

        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:25:30.437

你在用jquery吗？如果是这样，您可以实现此方法：

```
// first, you need asing a callback timer
var timeout = 300; //milliseconds

// this method contain your ajax request
function ajaxRequest() { //function to ajax request
    $.ajax({
        url: "/url/to/request/"
    }).done(function(data) {
        alert("response is: " + data);
    });
}

$(document).on("ready", function(){

    //this method will be called every 300 milliseconds
    setInterval(ajaxRequest, timeout);
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T08:09:35.807

根据您可以使用的 rails 版本`periodically_call_remote`，否则您将需要@Bitterzoet 描述的 jquery 替代方案。

[这个问题的](https://stackoverflow.com/questions/3661967/rails-3-equivalent-for-periodically-call-remote)更多信息。

# ios - iPhone应用程序中的视频通话

> ID：16054611
> 
> 赞同：3
> 
> 时间：2013-04-17T07:59:32.373
> 
> 标签：ios, iphone, opentok, videochat, video-conferencing

我是 iPhone 的新手。我正在开发一个包含视频通话功能的应用程序，作为参考，我已经从 [https://github.com/opentok/OpenTok-iOS-Basic-Tutorial下载了示例](https://github.com/opentok/OpenTok-iOS-Basic-Tutorial)

我添加了 OpenTok 框架。我正在模拟器上运行它，但应用程序崩溃并出现错误程序接收信号：SIGABRT。

无法建立连接

谁能建议我如何使用其他框架来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-19T00:18:16.557

没有任何日志，我只能猜测可能是什么问题。如果您发布一些日志会更有帮助。

1.  就像 0x7ff... 说的，OpenTok 需要一个设备才能正常工作，因为它需要相机能够发布

2.  无效凭据不应导致崩溃，但您仍应确保您的 sessionId 和令牌有效。请记住，除非另有说明，否则令牌会在 24 小时后过期

3.  确保您正在部署到[受支持的设备](https://github.com/opentok/opentok-ios-sdk-webrtc#supported-devices)

4.  如果你是从基础教程中克隆的，仅仅下载 zip 文件是行不通的，因为 sdk 没有随它一起下载。您必须下载[OpenTok SDK](https://github.com/opentok/opentok-ios-sdk-webrtc)并将其放在适当的文件夹中。
    或者，您可以在终端中运行 `git clone --recursive [https://github.com/opentok/OpenTok-iOS-Basic-Tutorial](https://github.com/opentok/OpenTok-iOS-Basic-Tutorial) '。

这些都是我能想到的原因

# c# - 在每个按钮单击时添加行 datagridview

> ID：16054612
> 
> 赞同：1
> 
> 时间：2013-04-17T07:59:34.230
> 
> 标签：c#, datagridview, user-controls, runtime

我有`usercontrol`一个datagridview。我创建了一个数据表，并将数据网格的源设置为此数据表。我希望在运行时能够在每次单击按钮时在 gridview 上添加多少行。

我的代码：

```
 private DataTable CreateTable()
    {
        Datatable table=new Datatable();
        table.Columns.Add("Name".ToString());
        table.Columns.Add("Size".ToString());
        DataRow dr = table.NewRow();
        dr["Name"] = "Mike";
        DataRow dr2 = table.NewRow();
        dr2["Name"] = "Ryan;
        DataRow dr3 = table.NewRow();
        dr3["Name"] = "Taylor";
        dr["Size"] = " one";
        dr2["Size"] = "two";
        table.Rows.Add(dr);
        table.Rows.Add(dr2);
        table.Rows.Add(dr3);
        return table;
     //and on my constructor I set gridview.DataSource=Datatable;
    }

 //Code  on the event:
 private void button_Click(object sender, EventArgs e)
    {

        DataRow NewRow = table.NewRow();
        table.Rows.Add(NewRow);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:03:25.303

您需要`DataTable`在表单级别定义。然后在按钮单击中，您可以执行以下操作：

```
private void button_Click(object sender, EventArgs e)
{
    DataRow NewRow = table.NewRow();
    table.Rows.Add(NewRow);
    gridview.DataSource=table; //specify the source
} 
```

在表单级别定义表格：

```
DataTable table; //DataTable at form level

private DataTable CreateTable()
{
    table=new Datatable(); //here insntianting the form level table. 
    table.Columns.Add("Name".ToString());
    table.Columns.Add("Size".ToString());
    DataRow dr = table.NewRow();
    dr["Name"] = "Mike";
    DataRow dr2 = table.NewRow();
    dr2["Name"] = "Ryan;
    DataRow dr3 = table.NewRow();
    dr3["Name"] = "Taylor";
    dr["Size"] = " one";
    dr2["Size"] = "two";
    table.Rows.Add(dr);
    table.Rows.Add(dr2);
    table.Rows.Add(dr3);
    return table;
 //and on my constructor I set gridview.DataSource=Datatable;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:11:03.920

我会推荐以下方法以获得更好的处理。

创建通用列表，每次单击都会在列表中附加新的数据集，然后将列表转换为 DataTable，如下面的链接中所述，然后将 DataTable 绑定到网格。

[将通用列表/可枚举转换为数据表？](https://stackoverflow.com/questions/564366/convert-generic-list-enumerable-to-datatable)

如果您想要示例代码，请告诉我。

# redirect - SharePoint RSS 源重定向

> ID：16054620
> 
> 赞同：1
> 
> 时间：2013-04-17T07:59:58.583
> 
> 标签：redirect, sharepoint-2010, rss

目前我已经建立了一个内部 SharePoint (2010) 来为我们部门的各种更新/公告创建一个 RSS 源。

由于我们系统中具有官方更新/公告的部分不允许 RSS 提要，因此我们目前每天早上手动更新 SharePoint。

我收到的反馈建议之一是，对于官方的，当您单击 RSS 提要标题时，将其重定向到官方部分，而不是 SharePoint。

只是想知道这是否可能？不寻找完全提供的解决方案，但将不胜感激朝着正确的方向推动。

谢谢。

# dojo - 如何使用dojo获取dom元素的所有属性

> ID：16054621
> 
> 赞同：0
> 
> 时间：2013-04-17T08:00:01.140
> 
> 标签：dojo, attr

有没有办法在 DOJO 中获取 dom 元素的所有属性（不是像 domAttr.get("nodeId", "foo") 这样的特定属性）。

```
<div style="border-width: 2px; border-color: #000000; border-radius: 0px; -moz-border-radius: 0px; height: 100px; background-color: #FFFFFF; -webkit-border-radius: 0px; position: absolute; z-index: 900; width: 193px; left: 57px; top: 106px;" position="absolute" height="100px" width="193px" background-color="#FFFFFF" border-color="#000000" border-width="2px" z-index="900" -webkit-border-radius="0px" -moz-border-radius="0px" border-radius="0px" left="57px" top="106px"></div> 
```

我想读取 div 标签中的所有属性。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:29:34.497

我不确定 Dojo 是否有一个包装器（我已经对 1.8.3 源代码进行了简短搜索），但您可以使用[`Node.attributes`](https://developer.mozilla.org/en-US/docs/DOM/Node.attributes).

Dojo*确实*[在 parser.js](https://github.com/dojo/dojo/blob/1.8.3/parser.js#L222)`Node.attributes`中这样的地方使用。注意IE8和IE6-7的特殊处理，避免掉入同一个陷阱。

# php - 在 PHP 中拼接 XML

> ID：16054623
> 
> 赞同：-1
> 
> 时间：2013-04-17T08:00:05.373
> 
> 标签：php, xml, simplexml

是否可以从 xml 文档中删除 n 个 xml 元素，以便

```
<root>
<example>
<thing>1</thing>
<somethingelse>1</somethingelse>
</example>
<example>
<thing>2</thing>
<somethingelse>2</somethingelse>
</example>
<example>
<thing>3</thing>
<somethingelse>3</somethingelse>
</example>
</root> 
```

可能成为

```
<root>
<example>
<thing>3</thing>
<somethingelse>3</somethingelse>
</example>
</root> 
```

例如 xml_splice($xml,2,3)

搜索文档后，我找不到在 simpleXML 中执行此操作的简单方法，但还有其他我可以使用的方法吗？还是我坚持使用 $xmlIterator->next(); 编写自己的函数？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:39:24.543

在您的情况下，我不会使用 simplexml 迭代器，因为您遇到的问题是，当您在迭代它时删除一个元素时，迭代会随着元素节点的消失而中断。因此，在删除第一个元素后，第二个元素成为第一个元素。然后迭代器转到第二个，现在已经是第三个了。

相反，您可以将第一个元素删除两次：

```
$xml = simplexml_load_string($string);

for ($remove = 2; $remove--;)
{
    unset($xml->example[0]);
} 
```

这会给你：

```
<?xml version="1.0"?>
<root>

  <example>
    <thing>3</thing>
    <somethingelse>3</somethingelse>
  </example>
</root> 
```

这种方法的问题是你不能概括它。最好先创建一个包含要删除的元素的数组，然后遍历该数组并一个接一个地删除一个元素。

使用 simplexml 创建这样一个数组的一种简单方法是`iterator_to_array()`或者`SimpleXMLElement::xpath()`方法。当您*`xml_splice()`*在问题中用作模拟时，我假设您想先查看数组变体：

```
$examples = $xml->example;
$elements = iterator_to_array($examples, false);
array_splice($elements, 2, 3); 
```

这会将所有应该删除的*示例*`$elements`元素放入. 剩下要做的就是删除那些。在 SimpleXML 中，这需要一个 simplexmlelement-self-reference：

```
foreach($elements as $element)
{
    unset($element[0]);
} 
```

如您所见，`$element`要从文档中删除节点`$xml`，它的第一个偏移量 ( *0* ) 未设置。如果你想在它之后添加一个*var_dump*：

```
unset($element[0]);
var_dump($element); 
```

您会看到此警告，显示元素节点已被删除：

> 警告：var_dump()：节点不再存在

输出就像您现在可能预期的那样：

```
<?xml version="1.0"?>
<root>

  <example>
    <thing>3</thing>
    <somethingelse>3</somethingelse>
  </example>
</root> 
```

对于带有 xpath 的变体，请参阅我在相关问题中的回答：

*   [在 SimpleXML for PHP 中删除具有特定属性的子项](https://stackoverflow.com/a/16062633/367456)

# maven - Acceleo maven 生成多工件/项目

> ID：16054625
> 
> 赞同：2
> 
> 时间：2013-04-17T08:00:18.877
> 
> 标签：maven, acceleo, multi-project

我正在尝试构建一个`maven acceleo generator`. 生成器由多个 acceleo 项目（maven 中的工件）组成，具有相互依赖关系。

我遇到了 emtl 文件之间的依赖关系的问题。在运行时，我收到错误消息，指出 mtl 中存在编译错误（没有）。我猜它可能是编译后的 emtl 文件中的 href。

有一个 acceleo maven 编译插件允许这些是：

a) 绝对路径（最终通过 maven 存储库）

b)`'platform:/plugin/...'`路径。

(a) 如果 acceleo 项目（maven 工件）构建在与我们进行生成的机器相同的机器上，但如果 maven 存储库的位置发生变化，我们就会遇到问题。因此，部署 Maven 工件最终变得毫无意义。

(b) 不起作用，因为从 Maven 内部运行，`'platform:/plugin/'`无法解决。

我试图覆盖 中的`'createURIConverter'`方法`AbstractAcceleoGenerator`，然后使用 a`URLClassLoader`我们可以解码`'platform:/plugin/'`href 并找到正确的 emtl 文件。我可以验证这似乎有效，但是我仍然收到报告

```
"org.eclipse.acceleo.engine.AcceleoEvaluationException: Unresolved compilation error in generation module" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T16:07:44.980

该异常是由 EMTL 模型中的 href 解析为 null 引起的。

解决 hrefs 的问题只是缺少注册的资源工厂（通知我这一点的异常在 EcoreUtil.resolve 中丢失，该异常用“// 无法解决被忽略。” - 最无助）。

所以看来我的“覆盖'createURIConverter'方法，并让它使用URLClassLoader解码'platform：/plugin/..'”的方法确实有效。

使用在 AcceleoParserMojo 中完成的相同方法构建 URLClassLoader。

# spring - java.sql.SQLRecoverableException：IO 错误：套接字读取超时

> ID：16054629
> 
> 赞同：3
> 
> 时间：2013-04-17T08:00:32.237
> 
> 标签：spring, tomcat7

我正在使用 Spring JdbcTemplate 类来执行数据库操作。我的服务器是Tomcat 7。

当我单击应用程序的按钮执行一些数据库操作时，出现以下错误

org.springframework.dao.DataAccessResourceFailureException: PreparedStatementCallback; SQL [XXXXX（我的查询）]； **IO 错误：套接字读取超时；嵌套异常是 java.sql.SQLRecoverableException: IO Error: Socket read timed out**

**奇怪的行为：-**这只是第一次发生。当我下次单击按钮时，一切都很好。

我什至尝试直接从 toad 访问数据库，但我没有得到任何连接时间。

context.xml 中的数据库属性：-

资源名称="jdbc/dsStaloneTelefoni" auth="Container" type="javax.sql.DataSource" driverClassName="oracle.jdbc.OracleDriver" url="jdbc:oracle:thin:@someIP:XXXXX" username="XXXX" password="XXXXXXXXXX" testOnBorrow="true" testOnReturn="true" validationQuery="select 1 from dual" maxActive="20" maxIdle="30" maxWait="-1"/>

请帮忙。

# php - 无法从 SESSION 获取变量

> ID：16054640
> 
> 赞同：0
> 
> 时间：2013-04-17T08:01:05.753
> 
> 标签：php, session

我的学校项目有问题。我已经向老师和同学寻求帮助，但没有一个人不知道该怎么做。

我制作了一个基于浏览器的游戏，显然它需要有用户。这就是问题所在。

当我登录并进入身份验证页面时，它从 POST 中提取信息就好了，但是当我在身份验证中将信息插入 SESSION 然后转到主页索引时，它拒绝获取 SESSION 信息，我只是得到一个错误.

注意，design2.php 与登录过程没有任何关系。

这是代码：

登录.php

```
<?php
include_once'design2.php';
?>

<div id="center">

<form method="POST" action="authenticate.php">
User Name <input id="input" type="text" name="player" size="21">
Password <input id="input" type="password" name="password" size="21">
<br>
<input type="submit" value="Login" name="submit">

<br><br>Not Registered? <a id='underlinelink' href='register.php'>Register</a> 
```

验证.php

```
<?php
include_once 'connect.php';
?>
<div id="center">
<?php
if (isset($_POST['submit']))
{
  $player=$_POST['player'];
  $password=$_POST['password'];
  $player=strip_tags($player);
  $password=strip_tags($password);
  $password=md5($password);

  $query = "select name, password from players where name='$player' and password='$password'";
  $result = mysql_query($query) or die("Could not query players");
  $result2 = mysql_fetch_array($result);
  if ($result2)
  { 
    $_SESSION['player'] = $player;

    echo "<big>Logged in successfully<br>";
    echo "<A id='underlinelink' href='index.php'>Continue</a></big>";
  }
  else
  {
   echo "<big>Wrong username or password.<A id='underlinelink' href='login.php'>Try Again</a></big>";
  }
}
?>
</div> 
```

Design.php（这是在我网站上的每个网页上）

```
<?php
include_once 'connect.php';
?>

<link href="stilark.css" rel="stylesheet" type="css" />

<?php
session_start();  

if(isset($_SESSION['player']))
    $player = $_SESSION['player'];
else
    echo "could not logg in, <a href='login.php'>Go back</a>"; 
    exit;

$playerinfo="SELECT * from players where name='$player'";
$playerinfo2=mysql_query($playerinfo) or die("could not get player stats!");
$playerinfo3=mysql_fetch_array($playerinfo2);

?> 
```

请帮忙，我真的需要在到期之前完成这项工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:16:59.030

您需要在写入之前创建或恢复会话。因此，在您执行操作的*Authenticate.php*`$_SESSION['player'] = $player;`中，首先创建一个会话，就像您在其他文件中所做的那样。类似的东西

*验证.php*

```
<?php
session_start();
include_once 'connect.php';
?>
<div id="center">
<?php

// Rest of your code
// ...

if ($result2)
{ 
    $_SESSION['player'] = $player;

// and so on... 
```

此外，正如@DamienLegros 在他的回答中指出的那样，您应该始终`session_start()`在代码中尽早包含该语句，即作为第一个语句之一，因此您确保在它开始之前没有输出。否则，您将开始收到说明`headers has already been sent`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:05:44.063

你`session_start()`必须在任何输出之前

```
<?php
session_start(); 
include_once 'connect.php';
?>

<link href="stilark.css" rel="stylesheet" type="css" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:21:21.047

```
<?php
session_start();
include_once 'connect.php';
?>
<div id="center">
<?php
if (isset($_POST['submit']))
...
...
... 
```

注意：在页面`session_start();`顶部添加`Authenticate.php`

# php - Wordpress 特色图片未将图片上传到服务器

> ID：16054650
> 
> 赞同：0
> 
> 时间：2013-04-17T08:01:43.997
> 
> 标签：php, wordpress

所以我在functions.php中使用了下面的代码

```
add_theme_support( 'post-thumbnails', array( 'post'));
set_post_thumbnail_size(100, 100); 
```

然后在循环中，我打电话给：

```
<?php the_post_thumbnail(); ?> 
```

该图像在**数据库中有一个带有其 URL 的条目，但是当我检查****wp-content/uploads/**目录时，该文件没有上传。

我究竟做错了什么？

1.  我没有安装插件。
2.  我的 .htaccess 中的所有内容都被注释掉了（默认情况下是这样的）我仍然在我的本地机器上。

# xpages - java.util.ArrayList 与 [Ljava.lang.Object 复选框组不兼容

> ID：16054654
> 
> 赞同：0
> 
> 时间：2013-04-17T08:01:46.530
> 
> 标签：xpages, checkbox, xpages-ssjs

我有一个复选框组，其值是通过使用另一个复选框组的选定值计算的。所以当我这样做的时候

```
var check6:com.ibm.xsp.component.xp.XspSelectManyCheckbox = getComponent("check6");
ArrSelected = check6.getSelectedValues(); 
```

要获取选定的值，会发生以下异常：

```
Error calling method 'getSelectedValues()' on java class   'com.ibm.xsp.component.xp.XspSelectManyCheckbox'
java.util.ArrayList incompatible with [Ljava.lang.Object; 
```

Check6 从在 beforePageLoad 事件上计算的会话范围变量中获取其值，并且我还设置了默认值。

请注意，这不会在页面加载时发生，而是在第一次部分刷新时发生。有谁知道这个异常表示什么？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T12:40:54.690

将第二个复选框组的 selectItems 的值绑定到与第一个复选框组的 value 属性绑定的完全相同的表达式。

[这篇文章](http://www.timtripcony.com/blog.nsf/d6plinks/TTRY-942UPQ)对原因进行了冗长的描述，但这里有一个非常快速的总结：如果你问一个组件它的值是什么，它必须问它绑定到的数据。所以跳过组件，自己询问数据。

因此，如果您的第一组如下所示：

```
<xp:checkBoxGroup value="#{currentDocument.FirstField}">... 
```

然后你的第二组应该是这样的：

```
<xp:checkBoxGroup value="#{currentDocument.SecondField}">
  <xp:selectItems value="#{currentDocument.FirstField}">
</xp:checkBoxGroup> 
```

当第一组中的用户选择发布到数据源时，第二组将反映更改，因为它们链接到该数据源上的相同属性。轻微警告：如果您的页面包含任何必填字段，您可能需要跳过对`onchange`触发第二组重新计算的事件的验证。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T10:55:32.763

原因很简单，这个类没有方法 getSelectedValues() （据我所知，在这里查看更多信息：[http ://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/ JavaDocs/XPagesExtAPI/8.5.2/index.html?overview-summary.html](http://public.dhe.ibm.com/software/dw/lotus/Domino-Designer/JavaDocs/XPagesExtAPI/8.5.2/index.html?overview-summary.html) )

也许你可以将控件绑定到一个作用域变量，然后访问这个变量来计算你的其他值？

# c# - nhibernate c#条件来检索空值

> ID：16054657
> 
> 赞同：3
> 
> 时间：2013-04-17T08:02:02.203
> 
> 标签：c#, nhibernate

我需要检索状态文件 = 10 的文件，并且空值从 oracle 数据库中形成一个可为空的 VARCHAR2 列。

经过一番搜索，我发现了以下内容：

```
ICriteria criteria = NHibernateSession.CreateCriteria(persitentType);  
criteria.Add(Expression.In("StatusFile", 10));
criteria.Add(Restrictions.IsEmpty("StatusFile")); 
```

在 sql 中会是这样的：

```
select attstatus from table where file_tmode = 'P'and  (status is null or status = 10); 
```

如果我删除最后一行，它可以工作，但我无法找到一种方法来添加空值的条件。

我怎么能这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:09:08.640

你试过了`IsNull`吗？

```
NHibernateSession.CreateCriteria(persitentType)
  .Add(Expression.In("StatusFile", 10))
  .Add(Expression.IsNull("StatusFile")); 
```

使用`or`

```
NHibernateSession.CreateCriteria(persitentType)
  .Add(Expression.In("StatusFile", 10)
    || Expression.IsNull("StatusFile")); 
```

请注意，在 oracle 中没有索引空值（至少几年前我使用它时），并且在大表中查找空值可能非常慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:48:08.600

```
ICriteria criteria = NHibernateSession.CreateCriteria(persitentType);  
criteria.Add(Restrictions.Or (
    Restrictions.Eq ("StatusFile", 10), 
    Restrictions.IsNull ("StatusFile)
)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:23:49.350

.List() 既然 Stefan Steinegger 的回答是“与”你的标准，你为什么不尝试析取（“或”）？像这样的东西——

```
var query = Session.QueryOver<PersistentType>();
var disjunction = new Disjunction();   
disjunction.Add(Restrictions.On<PersistentType>(obj => obj.statusFile == 10));
disjunction.Add(Restrictions.On<PersistentType>(obj => obj.statusFile == null));
var queryResult = query.Where(disjunction).List<PersistentType>(); 
```

或者简单地说，

```
var queryResult = Session.QueryOver<PersistentType>()
    .Where(obj => obj.statusFile == 10 || obj.statusFile == null).List<PersistentType>(); 
```

# java - 关于使用 Axis2 通过 wsdl 开发客户端

> ID：16054661
> 
> 赞同：0
> 
> 时间：2013-04-17T08:02:13.023
> 
> 标签：java, web-services, axis2

我是 Web 服务世界的新手，我在问哪个螨虫也是可重复的，我的问题是我有一个 wsdl，我可以通过在浏览器中点击该 wsdl 的 url 来访问它，现在我想做客户端（生成 java 代码）使用 Axis 2 和 Eclipse 本身从该 WSDL，sp 请告知如何继续，如果可能的话，我正在寻找有关使用 Eclipse 本身内部的 Axis 2 从 wsdl 制作客户端的快照，请告知。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-29T09:10:43.993

以下链接应该对您有用。

[Axis2 客户端 API 快速介绍](http://wso2.org/library/290)

[Apache Axis2 用户指南 - 创建客户端](http://axis.apache.org/axis2/java/core/docs/userguide-creatingclients.html#createclients)

[Java Apache Axis2 Web 服务客户端示例](http://wiki.servicenow.com/index.php?title=Java_Apache_Axis2_Web_Services_Client_Examples)

# node.js - 如何构建查询以将父文档的字段与嵌入式数组文档的字段相关联。使用 MongoDB 聚合运算符

> ID：16054665
> 
> 赞同：1
> 
> 时间：2013-04-17T08:02:46.080
> 
> 标签：node.js, mongodb, mongodb-query

考虑名为“CityAssociation”的集合中的以下文档

```
{
  "_id" : "MY_ID",
  "ThisCityID" : "001",
  "CityIDs" : [{
      "CityID" : "001",
      "CityName" : "Bangalore"
    }, {
      "CityID" : "002",
      "CityName" : "Mysore"
    }],
   "CityUserDetails": {
       "User" : "ABCD"
   }
} 
```

现在我有了`User`价值，即在上述情况下，我有价值`ABCD`，并且只想在第一级的字段`ThisCityID`与嵌入式数组文档的字段匹配的城市中找到它`CityID`。最后我需要进行如下投影（对于上述情况）：

```
{
'UserName': 'ABCD',
'HomeTown':'Bangalore'
} 
```

在 Node.js + MongoDB 本机驱动器中，我编写了如下聚合查询，但未按预期工作。

```
collection.aggregate([
{ $match: { 'CityUserDetails.User': 'ABCD', 'CityIDs': { $elemMatch: { CityID: ThisCityID}}} },
{ $unwind: "$CityIDs" },
{ $group: {
    _id: '$_id',
    CityUserDetails: { $first: "$CityUserDetails" },
    CityIDs: { $first: "$CityIDs" }
   }
},
    { $project: {
        _id: 0,
        "UserName": "$CityUserDetails.User",
        "HomeTown": "$CityIDs.CityName"
       }
    }
    ], function (err, doc) {
        if (err) return console.error(err);
        console.dir(doc);
    }
); 
```

谁能告诉我如何通过查询来完成。

注意：在 MongoDB 架构上，我们无法控制更改它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T05:15:34.067

您可以使用[`$eq`](http://docs.mongodb.org/manual/reference/aggregation/eq/)运算符检查第一级的字段 ThisCityID 是否与嵌入数组文档的字段 CityID 匹配。

```
db.city.aggregate([
   { $match : { "CityUserDetails.User" : "ABCD" }}, 
   { $unwind : "$CityIDs" },
   { $project : {
         matches : { $eq: ["$CityIDs.CityID","$ThisCityID"]},
         UserName : "$CityUserDetails.User",
         HomeTown : "$CityIDs.CityName"
    }},
   { $match : { matches : true }},
   { $project : {
         _id : 0,
         UserName : 1,
         HomeTown : 1
   }},
]) 
```

结果是：

```
{
    "result" : [
        {
            "UserName" : "ABCD",
            "HomeTown" : "Bangalore"
        }
    ],
    "ok" : 1
} 
```

# cloud-foundry - Cloudfoundry URL(smile-spring.coludfoundry.com) 无法访问，状态如下

> ID：16054667
> 
> 赞同：-1
> 
> 时间：2013-04-17T08:02:53.293
> 
> 标签：cloud-foundry

C:>vmc stats smile DL 已弃用，请使用 Fiddle Getting stats for smile... OK

实例cpu内存盘

# 0 0.5% 1G 的 198.2K 2G 的 54.6M

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:52:12.280

404 来自 Tomcat，这意味着连接被正确转发。查看 404 来自的位置；

/WEB-INF/views/WEB-INF/views/home.jsp.jsp

只能假设在应用程序本身中路由请求的方式存在问题。

# php - Smarty - '无法写入文件... templates_c'。(smarty_internal_write_file.php:44)

> ID：16054669
> 
> 赞同：4
> 
> 时间：2013-04-17T08:03:01.237
> 
> 标签：php, smarty, templating

我是第一次使用 Smarty。它在我的笔记本电脑 (MAMP) 上运行良好，但是当我尝试在生产服务器 (Windows) 上运行基本模板时，我收到以下错误消息：

```
Fatal error: Uncaught exception 'SmartyException' with message 'unable to write file C:\Inetpub\vhosts\path\to\web\root\smarty\templates_c\wrt516e53290e2095.47946913' in C:\Inetpub\vhosts\path\to\web\root\smarty\libs\sysplugins\smarty_internal_write_file.php:44 Stack trace: 
#0 C:\Inetpub\vhosts\path\to\web\root\smarty\libs\sysplugins\smarty_internal_template.php(201): Smarty_Internal_Write_File::writeFile('C:\Inetpub\vhos...', '<?php /* Smarty...', Object(Smarty)) 
#1 C:\Inetpub\vhosts\path\to\web\root\smarty\libs\sysplugins\smarty_internal_templatebase.php(155): Smarty_Internal_Template->compileTemplateSource() 
#2 C:\Inetpub\vhosts\path\to\web\root\smarty\libs\sysplugins\smarty_internal_templatebase.php(374): Smarty_Internal_TemplateBase->fetch('test.tpl', NULL, NULL, NULL, true) 
#3 C:\Inetpub\vhosts\path\to\web\root\admin-new\admin.php(99): Smarty_Internal_TemplateBase->display('test.tpl') 
#4 {main} thrown in C:\Inetpub\vhosts\path\to\web\root\smarty\libs\sysplugins\smarty_internal_write_file.php on line 44 
```

我认为这可能与文件权限有关（并不是说我对文件权限在 Windows 上的工作方式一无所知），但是当这一行：

```
var_dump(is_writable('C:\Inetpub\vhosts\path\to\web\root\smarty\templates_c')) 
```

打印出来`bool(true)`

不知道从这里去哪里。为什么 Smarty 不工作？

# asp.net - 母版页按钮触发验证控件

> ID：16054673
> 
> 赞同：1
> 
> 时间：2013-04-17T08:03:24.127
> 
> 标签：asp.net

我的母版页中有几个链接按钮控件，我绑定单击事件以重定向到其他页面，它可以工作。但是如果我的内容页面有验证器，它就不起作用。当我点击链接按钮时，验证器将停止事件，我应该怎么做才能解决它？谢谢。

页面.aspx

```
<asp:LinkButton ID="lnkbtnHomePage" runat="server" Font-Underline="true" ForeColor="White" OnClick="lnkbtnHomePage_Click">HomePage</asp:LinkButton> 
```

页面.aspx.cs

```
protected void lnkbtnHomePage_Click(object sender, EventArgs e)
{
    Response.Redirect("Index.aspx");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:28:04.413

您可以为此使用两个选项。

第一种是将属性添加`CausesValidation="false"`到您不想在页面上触发任何验证的按钮。

第二个选项是将`ValidationGroup="[groupname]"`属性添加到要触发验证的控件和按钮。

如果页面上有一个或两个不应触发验证的按钮，则第一个选项很好，但是第二个选项可以防止您添加可能干扰验证的新控件。

当页面的不同部分有自己的验证组并且不应该影响其他部分时，第二个选项也非常方便。例如，如果您的母版页上有一些标准控件，这些控件会显示在您的整个站点中，但随后会有带有自己表单的各个页面。您可以轻松控制他们的行为。

但是，正如 Yassine Houssni 所提到的，您最好只使用标准`<a>`标签甚至`<asp:HyperLink>`控件来更改页面等简单行为。如果您的链接突然更改，那么您将需要重新编译项目，而不是能够更新 .aspx/master 页面中的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:06:55.970

希望这有助于[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.causesvalidation.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.button.causesvalidation.aspx)

你可以通过链接按钮验证 [http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.causesvalidation.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.causesvalidation.aspx)

# ruby-on-rails - Rails Wicked Gem - 在一个向导中使用两个（嵌套）模型

> ID：16054675
> 
> 赞同：3
> 
> 时间：2013-04-17T08:03:26.203
> 
> 标签：ruby-on-rails, ruby-on-rails-3, gem, wizard, formwizard

在用户成功注册后，我正在尝试将 Wicked-Gem 用于我的向导。

第一步是用户应该输入他的“一般信息”（简历和兴趣）。提交这些信息后，用户应该输入一个特征（一个用户有很多特征）。

我遇到的问题如下：如何正确使用 Wicked 为第一步的用户模型和第二步的特征模型（属于用户）创建表单？

我得到的错误是：

```
Can't mass-assign protected attributes: characteristics 
```

我不想使用嵌套属性，因为向导将是我使用它们的唯一地方。

这是我的源代码：

**邪恶的控制器：**

```
#!/bin/env ruby
# encoding: utf-8
class AfterFirstSignInController < ApplicationController
  include Wicked::Wizard

  skip_before_filter :check_if_profile_complete, only: [:show, :update]

  steps :general_infos, :characteristics

  def show
    @user = current_user
    @characteristic = @user.characteristics.new
    @title = t('controllers.after_first_sign_in_controller.show.title')
    render_wizard
  end

  def update
    @user = current_user
    @characteristic = @user.characteristics.new
    case step
      when :general_infos
        @user.attributes = params[:user]
        render_wizard @user
      else
        @characteristic.attributes = params[:characteristic]
        render_wizard @characteristic
    end
  end
end 
```

**“一般信息表格”**

```
.container
  .row
    .span5.offset3
      .progress.progress-info.progress-striped
        .bar(style='width: 50%')
          1/2
      .page-header
        %h1
          = t('views.after_first_sign_in.general_infos.h1')
      = form_for(@user, url: wizard_path, method: :put) do |f|
        = render 'shared/error_messages', object: @user
        .control-group
          %label.control-label(for='bio')
            = t('views.after_first_sign_in.general_infos.labels.bio')
          .controls
            = f.text_area :bio, id: 'bio', rows: '6'
        .control-group
          %label.control-label(for='interest_list')
            = t('views.after_first_sign_in.general_infos.labels.interest_list')
          .controls
            = f.text_field :interest_list, id: 'interest_list'
        .form-actions
          = f.submit t('views.after_first_sign_in.general_infos.buttons.submit'), disable_with: t('views.after_first_sign_in.general_infos.buttons.submit'), class: 'btn btn-primary pull-right' 
```

**“特征形式”**

```
.container
  .row
    .span5.offset3
      .progress.progress-info.progress-striped
        .bar(style='width: 100%')
          2/2
      .page-header
        %h1
          = t('views.after_first_sign_in.characteristics.h1')
      = form_for([@user, @characteristic], url: wizard_path, method: :put) do |f|
        = render 'shared/error_messages', object: @characteristic
        = f.fields_for :characteristics do |builder|
          .control-group
            %label.control-label(for='title')
              = t('views.after_first_sign_in.characteristics.labels.title')
            .controls
              = builder.text_field :title, id: 'title'
          .control-group
            %label.control-label(for='description')
              = t('views.after_first_sign_in.characteristics.labels.description')
            .controls
              = builder.text_area :description, id: 'description', rows: '6'
        .form-actions
          = f.submit t('views.after_first_sign_in.characteristics.buttons.submit'), disable_with: t('views.after_first_sign_in.characteristics.buttons.submit'), class: 'btn btn-primary pull-right'
          = link_to t('views.after_first_sign_in.characteristics.buttons.general_infos_step'), after_first_sign_in_path(:general_infos), class: 'btn' 
```

**路由文件**

```
Test::Application.routes.draw do
  scope '(:locale)' do
    resources :users do
      resources :characteristics
      resources :followings, only: [:create, :destroy, :index]
      resources :wall_entries, only: [:create, :destroy]
      resources :messages, only: [:create, :destroy, :index]
    end

    resources :characteristics do
      resources :votes, only: [:create, :destroy]
    end

    resources :after_first_sign_in

    match '/auth/:provider/callback', to: 'sessions#create'
    match '/auth/failure', to: redirect('/')
    match '/sign_out', to: 'sessions#destroy', as: 'sign_out'

    match '/change_locale', to: 'users#change_locale', as: 'change_locale'
    match '/home', to: 'users#home', as: 'home'
    match '/discover', to: 'users#discover', as: 'discover'

    match '/terms_of_service', to: 'pages#terms_of_service'
    match '/masthead', to: 'pages#masthead'
    match '/privacy', to: 'pages#privacy'

    root to: 'pages#index'
  end
end 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T14:43:05.883

我猜你正在使用`nested_attributes`for `@user.characteristics`。如果是这样，那么您应该将以下内容添加到您的用户模型中：

```
attr_accessible :characteristics_attributes
accepts_nested_attributes_for :characteristics 
```

但是你这部分也不清楚`characteristics-form`，你可能想要这样的东西：

```
= form_for(@user, url: wizard_path, method: :put) do |f|
    = render 'shared/error_messages', object: @user
    = f.fields_for :characteristics do |builder| 
```

请注意，`fields_for`可能会单独遍历每个特征并为每个特征呈现字段，因此您无需关心`@characteristic`

# django-models - django“在 MultiValueDict 中找不到键‘up_file’：{}”

> ID：16054678
> 
> 赞同：0
> 
> 时间：2013-04-17T08:03:39.647
> 
> 标签：django-models, python-2.7

在我的 htmlpage 中，我有 100 个字段
，我有一个用于上传文件的字段，这对用户来说是可选的。
当我提交带有所选文件且其他几个字段留空的表单时，它已保存到数据库中。

同时，当我尝试在不选择要上传的文件的情况下提交表单时，它会引发错误，因为“”Key 'up_file' not found in “”

**--models.py--**

```
class js_details(models.Model):
    user = models.ForeignKey(User, unique=True)
    fname = models.CharField(max_length=50)
    lastname = models.CharField(max_length=50)
    dob = models.CharField(max_length=20, null=True)
    sec_email = models.EmailField(max_length=50, null=True)
    address1 = models.CharField(max_length=50, null=True)
    address2 = models.CharField(max_length=50, null=True)
    up_file = models.FileField(upload_to='documents', null=True) 
```

**--views.py--**

```
def newpost(request):
if request.method == "POST":
        user_id = request.POST.get('user_id')

        fname= request.POST.get('fname')
        lastname= request.POST.get('lastname')
        dob = request.POST.get('dob')
        sec_email = request.POST.get('sec_email')
        address1 = request.POST.get('address1')
        address2 = request.POST.get('address2')
        up_file = request.FILES['up_file']
       p = js_details(user_id=user_id,fname=fname,lastname=lastname,dob=dob,sec_email=sec_email,address1=address1,address2=address2,up-file=up_file)
       p.save() 
```

如何在不填写文件字段的情况下保存表单。？

欢迎您的所有回答。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:53:12.143

严格回答您的问题：您在 request.FILES (=> KeyError request.FILES.get('up_file') None mapping dict` 上使用下标访问以获取`request.FILES['up_file']), which indeed raises a`有关`if there's no matchinh key. You should use`这些`and check the returned value which will be`数据`if the user didn't post a file. Read the Python's doc about`类型`and`的更多信息。

现在您的代码还有另一个问题。第一个是您盲目地接受任何用户输入，而无需验证、清理和数据类型转换。使用 a`ModelForm`可以解决这个问题并简化您的代码。

另外，作为旁注，您应该真正坚持 Django / Python 命名约定并使用 CapCase 作为您的类名。

这是您的代码的固定版本：

```
# models.py 
class JsDetails(models.Model):
    # ForeignKey -> OneToOneField, 
    # cf https://docs.djangoproject.com/en/1.4/ref/models/fields/#onetoonefield
    user = models.OneToOneField(User, unique=True)
    fname = models.CharField(max_length=50)
    lastname = models.CharField(max_length=50)
    # I assume "dob" means "date of birth"
    # so CharField -> DateField
    dob = models.DateField(blank=True, null=True)
    sec_email = models.EmailField(max_length=50, blank=True, null=True)
    address1 = models.CharField(max_length=50, blank=True, null=True)
    address2 = models.CharField(max_length=50, blank=True, null=True)
    up_file = models.FileField(upload_to='documents', blank=True, null=True)

# forms.py
from .models import JsDetail
from django import forms

class JsDetailForm(forms.ModelForm):
    class Meta:
        models = JsDetail

# views.py
from .forms import JsDetailForm 
from django.shortcuts import redirect, render

def newpost(request):
    if request.method == "POST":
        form = JsDetailForm(request.POST, request.FILES)
        if form.is_valid():
            newdetail = form.save()
            redirect("/somewhere/to/show/the/result")
        # if the form is not valid it will be redisplayed
        # to the user with error messages

    else:
        form = JsDetailForm()

    return render(
        request, 
        "your/template.htm",
        dict(form=form)
        ) 
```

恕我直言，此代码仍然存在问题，但这仍然是一个改进。我强烈建议你花点时间学习 Python 教程和 Django 教程，它会为你省去很多痛苦和麻烦。

# javascript - 如何在带有 node.js 的 html/javascript 中使用 mysql？

> ID：16054679
> 
> 赞同：1
> 
> 时间：2013-04-17T08:03:42.750
> 
> 标签：javascript, mysql, database, html

我有一个 node.js 网络服务器工作。而且我可以连接到我的数据库，但我不能将我的变量提供给我的 html 页面。我尝试使用 EJS，但我只能给页面一个句子（而不是变量）。有没有办法为页面提供变量或在页面上进行查询（可能使用 JS？）

服务器.js

```
var express = require('express');
var ejs = require('ejs');
var path = require('path');
var string = require('string');

var mysql      = require('mysql');
var connection = mysql.createConnection({
  host     : 'localhost',
  user     : 'website',
  password : 'root',
  database : 'TeamAwesome',
});

connection.connect(function(err) {
    console.log('Connection: Succeeded');
  // connected! (unless `err` is set)
});

var app = express();

app.use(express.static(__dirname + '/public'));
app.set('views', __dirname + '/views');
app.set('view engine', 'ejs');

app.get('/',function(req, res)
{
    res.render('index.ejs');

});
app.get('/index.ejs',function(req, res)
{
    res.render('index.ejs');

});
app.get('/muziek.ejs',function(req, res)
{
    string ='';
    muziek = connection.query('SELECT * FROM Muziek', function(err, rows) {
    // connected! (unless `err` is set)
    string = '<tr><td><img height="150px" width="150px"/></td><td><p id="Artiest">';
    string = string + rows[0][1];
    string = string + '</p></td><td><p id="Titel">';
    string = string + rows[0][2];
    string = string + '</p></td></tr> ';

    });

    res.render('muziek.ejs',{

         music: string

    });
    console.log(string)
});

app.listen(8125);
console.log('Running @ localhost:8125'); 
```

muziek.ejs

```
<html>
<head>
</head>
<body>
<%- music %>

</body>
</html> 
```

我的 html 页面中没有字符串。有谁能帮助我吗？

# c++ - 拆分定义和声明时 constexpr 不同的异常说明符

> ID：16054680
> 
> 赞同：0
> 
> 时间：2013-04-17T08:03:44.113
> 
> 标签：c++, gcc, c++11, constexpr, noexcept

我在以下测试代码段上进行了测试`gcc 4.7.2`：

```
#include <iostream>
#include <type_traits>

#ifdef REMOVE_CONSTEXPR_NOEXCEPT
# define CONSTEXPR_NOEXCEPT
#else
# define CONSTEXPR_NOEXCEPT noexcept
#endif

class ConstExpr {
public:
  // Some constructors
private:
  // Some member data
public:
  // Cannot split the declaration if noexcept
  static constexpr unsigned int Int(unsigned int i) CONSTEXPR_NOEXCEPT
#ifndef SPLIT_CONSTEXPR_DECLARATION
  {
    return i;
  }
#else
  ;
#endif
};

#ifdef SPLIT_CONSTEXPR_DECLARATION
constexpr unsigned int ConstExpr::Int(unsigned int i) CONSTEXPR_NOEXCEPT {
  return i;
}
#endif

class NoConstExpr {
public:
  // Some constructors
private:
  // Some member data
public:
  // Cannot split the declaration if noexcept
  static unsigned int Int(unsigned int i) noexcept;
};

// It's OK on normal functions
inline unsigned int NoConstExpr::Int(unsigned int i) noexcept {
  return i;
}

int main()
{
  std::cout << "ConstExpr: " << std::integral_constant<unsigned int,
    ConstExpr::Int(5)>::value << std::endl;
  std::cout << "NoConstExpr: " << NoConstExpr::Int(5) << std::endl;
} 
```

我得到以下编译输出：

```
[matt test] g++ -std=c++11 main.cpp && ./a.out
ConstExpr: 5
NoConstExpr: 5
[matt test] g++ -std=c++11 main.cpp -DSPLIT_CONSTEXPR_DECLARATION && ./a.out
main.cpp:28:55: error: declaration of ‘static constexpr unsigned int ConstExpr::Int(unsigned int)’ has a different exception specifier
main.cpp:17:33: error: from previous declaration ‘static constexpr unsigned int ConstExpr::Int(unsigned int) noexcept (true)’
[matt test] g++ -std=c++11 main.cpp -DSPLIT_CONSTEXPR_DECLARATION -DREMOVE_CONSTEXPR_NOEXCEPT && ./a.out
ConstExpr: 5
NoConstExpr: 5 
```

所以我的问题是：它是 C++11 规范的一部分，能够拆分`constexpr`函数的定义和声明，还是这是一个`gcc`错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-09T14:02:54.793

看起来[gcc](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=53473)错误解决了这个问题`4.8.1`

# c# - 如何在另一个类中的类中添加数据

> ID：16054681
> 
> 赞同：1
> 
> 时间：2013-04-17T08:03:46.207
> 
> 标签：c#, oop, class

我有一个像下面这样的课程。我想`Messageformat`为一个 web 服务发送一个这样的，所以我需要将值添加到`Attributecollection`and `Input`。

```
public class Messageformat
{
    public class Attributecollection
    {
        public string name { get; set; }

        public int id { get; set; }
    }

    public class Input
    {
        public string soid { get; set; }

        public string itemname { get; set; }

        public int qty { get; set; }
    }

    public class output
    {
        public string soid { get; set; }
    }
} 
```

我想为这个类添加值。我一次只能调用一个类并向该类添加值。有什么方法可以调用类`Messageformat`并通过该对象向子类添加值。我知道它是一个嵌套的类结构。我不擅长 oop 所以任何人都可以分享一些关于这个的想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T10:13:30.453

为什么不将内部类及其属性在其访问级别设为**静态，如下所示：**

```
 class MessageFormat
 {
    public static class Attributecollection
    {
        public static string name { get; set; }

        public static int id { get; set; }
    }

    public static class Input
    {
        public static string soid { get; set; }

        public static string itemname { get; set; }

        public static int qty { get; set; }
    }

    public static class output
    {
        public static string soid { get; set; }
    }
 } 
```

然后你可以访问内部类，虽然没有实例化：

```
 MessageFormat.Attributecollection.id = 1;
  MessageFormat.Attributecollection.name = "test";
  MessageFormat.Input.itemname = "Soda";
  MessageFormat.Input.qty = 10; 
```

尽管它违背了嵌套类的目的，因为据说嵌套类的内部类应该只能由外部类或父类访问。但根据您的要求，此代码将满足该要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:11:29.813

从它的外观/声音来看，您需要一个类的实例来公开其他类的属性：

```
public class Messageformat {

  public MessageFormat() {
    Attributes = new Attributecollection();
    Input = new Input();
    Output = new output();
  }

  public Attributecollection Attributes { get; set; }
  public Input Input { get; set; }
  public output Output { get; set; }
}

public class Attributecollection {
  public string name { get; set; }
  public int id { get; set; }
}

public class Input {
  public string soid { get; set; }
  public string itemname { get; set; }
  public int qty { get; set; }
}

public class output {
  public string soid { get; set; }
} 
```

然后你可以这样做：

```
var format = new MessageFormat();
format.Input.soid = "something";
format.Input.itemname = "something"; 
```

等等。可以肯定的是，这里有很多改进，但你已经有了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:07:18.310

你为什么这样做？不要嵌套你的类，而是在同一级别声明你的类并在`MessageFormat`其他类中创建属性，即

```
 public class Messageformat
  {
     public Attributecollection AtrributeCollection{get;set;}
     public Input Input{get;set;}
     public output Output{get;set;}
  }
  public class Attributecollection
  {
     public string name { get; set; }
     public int id { get; set; }
  }
  public class Input
  {
     public string soid { get; set; }
     public string itemname { get; set; }
     public int qty { get; set; }
  }
  public class output
  {
     public string soid { get; set; }
  } 
```

这样，您可以轻松创建 MessageFormat 对象并插入所有其他三个类的数据，即

```
 [WebMethod]
  public string GetMessage()
  {
        Messageformat msgFrmt = new Messageformat();
        msgFrmt.AtrributeCollection = new Atrributecollection()
                                         { 
                                             name="test",
                                             id=1
                                         };

        msgFrmt.Input = new Input()
                            {
                               soid= "soid value",
                               itemname="item",
                               qty=10
                            };
        msgFrmt.Output = new output()
                             {
                                soid="soid value"
                             };

        return new JavaScriptSerializer().Serialize(msgFrmt);
  } 
```

上面是一个简单的例子，你可以如何组织你的类并将它们用于任何目的。（上面是一个 webmethod 的例子，但你可以做任何你想做的事）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:08:41.567

您的问题不是很清楚，但是如果您要询问如何填充数据，则必须将所谓的*属性*添加到您的父类中。请注意，您不必使用内部类。

```
public class Attributecollection
{
    public string name { get; set; }
    public int id { get; set; }
}

public class Input
{
    public string soid { get; set; }
    public string itemname { get; set; }
    public int qty { get; set; }
}

public class output
{
    public string soid { get; set; }
}

public class Messageformat
{
    public Attributecollection MyAttributecollection { get; set; }
    public Input MyInput { get; set; }
    public output Myoutput { get; set; }
}

...

Messageformat test = new Messageformat
    {
        MyAttributecollection = new Attributecollection { name = "", id = 1 },
        MyInput = new Input { soid = "", itemname ="", qty = 1 },
        Myoutput = new output { soid = "" }
    }; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T08:09:21.337

您应该将每个类分开以进行定义。然后（WCF）你将能够创建你的 DataContract 并指定它的数据成员 - 属性，你在你的消息中发送什么：

```
 [DataContract]
  public class Messageformat
  {    
     [DataMember]
     public Attributecollection prop1;
     [DataMember]
     public Input prop2;
     [DataMember]
     public output prop3;
  } 

  [DataContract]
  public class Attributecollection
  {
     [DataMember]
     public string name { get; set; }
     [DataMember]
     public int id { get; set; }

  }

  [DataContract]
  public class Input
  {
      [DataMember]
      public string soid { get; set; }
      [DataMember]
      public string itemname { get; set; }
      [DataMember]
      public int qty { get; set; }
  }

  [DataContract]
  public class output
  {
      [DataMember]
      public string soid { get; set; }
  } 
```

然后你应该生成你的服务合同，在那里你可以使用你的类

```
 [ServiceContract]
  public interface IService
  {
     [OperationContract]
     SendMessage(Messageformat message);
  } 
```

# php - 使用 PHP 的微软翻译

> ID：16054689
> 
> 赞同：0
> 
> 时间：2013-04-17T08:04:06.207
> 
> 标签：php, translation

我现在和微软翻译一起工作。我试过这个教程：

1.  [http://blogs.msdn.com/b/translation/p/phptranslator.aspx](http://blogs.msdn.com/b/translation/p/phptranslator.aspx)

2.  [https://code.google.com/p/micrsoft-translator-php-wrapper/](https://code.google.com/p/micrsoft-translator-php-wrapper/)

而且它们不能正常工作。我也连接到互联网，在教程 1 中我无法连接到主机，在教程 2 中出现了一些错误：

> 警告：[function.file-get-contents]：打开流失败：由于目标机器主动拒绝，无法建立连接。在第 158 行的 C:\xampp\htdocs\translate\class\MicrosoftTranslator.class.php

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-15T07:25:11.470

我有同样的问题 ：

```
Notice: Undefined property: stdClass::$error 
```

我通过简单地替换来解决它：

```
if ( $objResponse->error ) 
```

经过 ：

```
if ( isset($objResponse->error) ) 
```

# iphone - 为推送通知创建配置文件

> ID：16054692
> 
> 赞同：6
> 
> 时间：2013-04-17T08:04:14.927
> 
> 标签：iphone, apple-push-notifications, provisioning-profile

我希望我的应用程序支持推送通知，我执行以下操作：

1.  生成 CSR 文件
2.  创建 App ID 并启用推送通知
3.  使用在步骤 1 中创建的 CSR 文件为 App ID 创建开发 SSL 证书
4.  创建配置文件

问题是，在第 4 步中，我无法选择在第 3 步中创建的证书。我的步骤有什么问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T08:26:56.187

不，您不能在创建配置文件时选择推送 SSL 证书。只需选择开发人员或分发证书。

在提供推送服务的服务器中上传推送 SSL 证书...例如：解析、arban 飞艇。它是可选的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T09:33:15.270

您不能仅仅因为不需要就选择 SSL 证书。供应配置文件与推送证书无关，但与 App ID 相关，这是您将应用设置为使用 APN 服务的位置。SSL 证书必须上传到您的服务器上，以便在调用 Apple 时将其识别为**您的应用服务器。**您只需要下载它，在您的钥匙串中打开它，然后通常将其导出并上传到您的服务器上。

这很简单，当您在服务器上使用开发推送证书（调用苹果沙箱服务器）时，请务必使用开发配置文件签署您的应用程序，并在使用生产证书时使用分发配置文件。

如果您仍然遇到问题，请查看[本指南](http://quickblox.com/developers/How_to_create_APNS_certificates)，它来自 quickblox，但与 Apple 门户相关的部分与您用于生成通知的服务器或服务相同，并且解释得非常好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T09:51:39.547

我还遵循了上面提到的所有教程。我对“第 4 步”也有同样的问题。

我发现我无法手动创建配置文件（使用证书）。一旦我的 Xcode **5**与我自己创建的 AppId 同步，它就会自动为我生成它。因此，我建议您在按常规选项卡中的“修复问题”按钮后等待几分钟。（顺便说一句，我是 IOS 开发人员的新手。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T12:16:36.550

按照这个可能对你有帮助， [http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

# ios - Xcode 4.2 不提交文件？

> ID：16054694
> 
> 赞同：1
> 
> 时间：2013-04-17T08:04:22.630
> 
> 标签：ios, svn, xcode4.2

我有 Xcode 4.2，我正在处理一个项目，该项目之前是用 - 让我们称之为 - 地方 A 提交的。然后我将它复制到我的磁盘上到另一个地方，进行了修改，现在我通过 Xcode Organizer 导入了全新的项目到地方 B。但是当我从地方签出项目时，BI 无法提交任何文件。我选择一个文件，选择提交，写评论然后去。看起来没问题，但实际上这个文件的状态并没有改变，所以我可以在没有任何警告的情况下不断地提交......是某些项目设置有问题还是什么？我记得在以前的 Xcode 项目设置中你可以设置 svn 位置，但在这里我没有看到类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:08:43.633

我认为您没有在项目的根目录中复制文件夹**.svn** - 存在 SVN 的元信息，没有这些信息 SVN 将无法工作。只需找到并将此文件夹从 A 复制到 B，问题就会消失！

# android - 随机 NullPointerException。没有线索

> ID：16054696
> 
> 赞同：0
> 
> 时间：2013-04-17T08:04:27.567
> 
> 标签：android

我已经在一个项目上工作了一段时间，通宵工作，这个项目一直在工作，任何我设法摆脱的小错误。

它处于工作状态，我进行了一次生物休息，然后又回到了这个！

```
04-17 08:42:53.017: E/AndroidRuntime(4779): FATAL EXCEPTION: main
04-17 08:42:53.017: E/AndroidRuntime(4779): java.lang.NullPointerException
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.AbsListView.obtainView(AbsListView.java:2163)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.ListView.makeAndAddView(ListView.java:1831)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.ListView.fillDown(ListView.java:674)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.ListView.fillFromTop(ListView.java:735)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.ListView.layoutChildren(ListView.java:1638)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.AbsListView.onLayout(AbsListView.java:1996)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.View.layout(View.java:14008)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.GridLayout.onLayout(GridLayout.java:1138)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.View.layout(View.java:14008)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.RelativeLayout.onLayout(RelativeLayout.java:1021)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.View.layout(View.java:14008)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.View.layout(View.java:14008)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1663)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1521)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.LinearLayout.onLayout(LinearLayout.java:1434)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.View.layout(View.java:14008)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.View.layout(View.java:14008)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewGroup.layout(ViewGroup.java:4373)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1892)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1711)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.Choreographer.doFrame(Choreographer.java:532)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.os.Handler.handleCallback(Handler.java:725)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.os.Looper.loop(Looper.java:137)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at android.app.ActivityThread.main(ActivityThread.java:5234)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at java.lang.reflect.Method.invokeNative(Native Method)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at java.lang.reflect.Method.invoke(Method.java:525)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:799)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:566)
04-17 08:42:53.017: E/AndroidRuntime(4779):     at dalvik.system.NativeStart.main(Native Method) 
```

在我休息之前我可能已经改变了一些东西，但这并没有给我太多关于我应该在哪里寻找指针异常的线索......

谁能阐明问题可能出在哪里？

提前致谢...

编辑！！！

```
public class MenuActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    WindowManager windowManager = getWindowManager();
    Display display = windowManager.getDefaultDisplay();
    if (display.getWidth() > display.getHeight()) {
        setContentView(R.layout.land_activity_menu);
    } else {
        setContentView(R.layout.activity_menu);
    }
}

public void aboutClick(View view) {
    startActivity(new Intent(this, AboutActivity.class));
}

public void newsClick(View view) {
    startActivity(new Intent(this, NewsActivity.class));
}

public void coursesClick(View view) {
    startActivity(new Intent(this, CoursesActivity.class));
}

public void loginClick(View view) {
    startActivity(new Intent(this, LoginActivity.class));
} 
```

然后应用程序在新闻活动启动后立即崩溃......

```
 public class NewsActivity extends Activity implements OnItemClickListener {

// globals... need to change these?
private ListView listview;
private List<RowItems> rowItems;
final int itemCount = 15;
String newsItemTitles[] = new String[itemCount];
String newsItemDates[] = new String[itemCount];
String newsItemDesc[] = new String[itemCount];
String newsItemHREFS[] = new String[itemCount];
String newsItemPicHREFS[] = new String[itemCount];

protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_news);

    ActionBar actionBar = getActionBar();
    actionBar.setDisplayHomeAsUpEnabled(true);

    // Start Async for News
    getNewsTask();

}

private void getNewsTask() {
    new getNews().execute();
}

private class getNews extends AsyncTask<Void, Void, Void> {
    private ProgressDialog pd;
    boolean service;
    CustomAdapter adapter;

    @Override
    protected void onPreExecute() {
        pd = new ProgressDialog(NewsActivity.this);
        pd.setTitle("Loading News...");
        pd.setMessage("Loading " + itemCount + " News Items");
        pd.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel",
                new DialogInterface.OnClickListener() {
                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        pd.dismiss();
                        startActivity(new Intent(NewsActivity.this,
                                MenuActivity.class));
                    }
                });
        pd.show();

    } 
```

我不完全确定什么会导致这里崩溃......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:15:36.920

正如评论中提到的，如果您在适配器的 getView() 方法中返回 null，您将遇到此问题。如果它为空，请确保创建一个新的 convertView 实例。

# highcharts - 高图表导出为 PDF

> ID：16054700
> 
> 赞同：0
> 
> 时间：2013-04-17T08:04:36.700
> 
> 标签：highcharts

我正在使用高图表。这些都有用于在每个图表上导出到 .PDF 的按钮。除了这些按钮之外，我还想要一个按钮。当我点击这个按钮时，它会将所有高图表导出到单个 PDF 文件中. 还有我在 c# 中的整个代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:48:06.110

您可以通过导出/按钮参数准备自己的按钮来添加覆盖按钮

[http://jsfiddle.net/fXHB5/8617/](http://jsfiddle.net/fXHB5/8617/)

```
 exporting:{
    buttons:[{
        enabled:true,
        align:'right',
        symbol:'triangle',
        onclick:function(){
           alert('aaa');
        }
    }]
}, 
```

[http://api.highcharts.com/highcharts#exporting.buttons](http://api.highcharts.com/highcharts#exporting.buttons)

# mule - Mule - 流程清理代码方法

> ID：16054702
> 
> 赞同：0
> 
> 时间：2013-04-17T08:04:47.543
> 
> 标签：mule, finalizer

一个月前我们才开始使用 Mule，到目前为止，这是一个很好的学习。现在，我们已经实现了相当多的流程来集成我们不同的系统。我们的要求之一是在每个流程结束时执行一些清理代码。更像是一个终结器构造。

我正在寻找一种可以用于我们所有流程的通用方法。

注意 - 如果我将一个步骤（我可以在其中执行清理代码）添加到流程的末尾 - 不能保证该步骤将在所有先前步骤完成后执行（因为某些步骤已运行在不同的线程上；我们不想在一个同步线程上运行整个流程）。Mule 中是否有任何事件机制可以在流程中的所有步骤完成时通知订阅者？我也不确定 mule flow 生命周期是否适合这里。请帮忙。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T14:20:29.603

Mule 服务器通知可能是一个很好的候选者：http: [//www.mulesoft.org/documentation/display/current/Mule+Server+Notifications](http://www.mulesoft.org/documentation/display/current/Mule+Server+Notifications)

# ms-access - 在 Ms-Access 中自动调整表单和内容的大小

> ID：16054703
> 
> 赞同：3
> 
> 时间：2013-04-17T08:04:48.207
> 
> 标签：ms-access, vba, screen-resolution, ms-access-2000

**背景：**

我正在 Ms-Access 中创建一个将在多用户平台上启动的应用程序 - 这意味着许多屏幕和许多不同的分辨率等。

**问题：**

是否可以让我的应用程序自动调整到正确的屏幕/分辨率大小，并且字体大小与增加或减少的百分比成正比？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T09:28:22.350

与我[在这里](https://stackoverflow.com/questions/15805877/how-to-auto-center-objects-in-a-form-in-access-2007/15808638#15808638)的回答类似，是的，您可以使用`On Resize`表单的事件来移动控件、更改子表单的大小以及执行其他类似的操作。这些调整适用于每个单独的对象，因此编码会有些乏味且有点“繁琐”，但可以完成（至少在某种程度上）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T17:20:09.910

在任何版本的 Access 中，字体大小都不会根据屏幕分辨率自动更改，但从**Microsoft Access 2007**开始，您可以使用控件的新属性来使它们根据表单的大小进行**拉伸、收缩或移动（**[在此处](http://office.microsoft.com/en-us/access-help/make-controls-stretch-shrink-or-move-as-you-resize-a-form-HA010253986.aspx)描述）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-04T23:46:19.027

尝试在[此](https://stackoverflow.com/a/40965025/2363207)答案中使用 VBA 代码，看看它是否能满足您的需求。它基本上按照 Gord Thompson 推荐的方式工作。当窗体调整大小时，窗体上的所有控件和文本也将按比例调整大小，以便无论窗口大小或用户将监视器分辨率设置为什么，它看起来都一样。

# python - Python - 用 findall 找到最长的序列

> ID：16054705
> 
> 赞同：4
> 
> 时间：2013-04-17T08:04:51.570
> 
> 标签：python, regex, findall

```
found = re.findall("g+", "fggfggggfggfg", re.DOTALL) 
```

我想使用 findall 找到一个模式的最长匹配项。我找到了一些解决方案，但仅适用于`re.match`or `re.finditer`。有人可以给我一个建议吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-17T08:05:44.183

`re.DOTALL`在这种情况下什么都不做，所以为了简单起见，我只是把它拿出来：

```
>>> import re
>>> max(re.findall("g+", "fggfggggfggfg"), key=len)
'gggg' 
```

如果您需要按长度顺序排列它们：

```
>>> sorted(re.findall("g+", "fggfggggfggfg"), key=len, reverse=True)
['gggg', 'gg', 'gg', 'g'] 
```

# jquery - 移动 jquery 和 phoneGap 中的同步调用以从数据库中获取数据

> ID：16054710
> 
> 赞同：0
> 
> 时间：2013-04-17T08:04:57.477
> 
> 标签：jquery, cordova, phonegap-build

```
i have written code to get max data from database and then insert that data in another table but it is not giving data first time.it is giving leadid as undefined because it is not waiting result of getMaxLeadId and executing second statement.my code is given below

var  leadId = getMaxLeadId();

alert("leadId"+leadId);

function getMaxLeadId() {} 
```

和

```
function getMaxIdData_success(tx, result){} 
```

在我需要调用插入`maxLeadId`插入函数之后。

请建议我一些想法如何在 java Script 中编写回调函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:48:29.790

执行此操作的常用方法是使用称为[CPS](http://en.wikipedia.org/wiki/Continuation-passing_style)的编程风格的回调。

这个的一般形式是

```
var doSomeCalc = function(resultFunc) {
    //do some long running calc
    var result = 4;

    resultFunc(result);
};

var writeOutResult = function(result) {
    console.log(result);
};

doSomeCalc(writeOutResult); 
```

所以你会想用这种形式写你的 getMaxLeadId() 来接受回调，然后在它计算出答案时调用它。

如果您认为是，请不要忘记将其标记为正确答案。

# linq - 这个 linq 如何执行？

> ID：16054711
> 
> 赞同：0
> 
> 时间：2013-04-17T08:04:57.683
> 
> 标签：linq, entity-framework, c#-4.0, linq-to-entities

```
Data = _db.ALLOCATION_D.OrderBy(a => a.ALLO_ID)
                       .Skip(10)
                       .Take(10)
                       .ToList(); 
```

假设我在`ALLOCATION_D`表中有 100000 行。我想选择前 10 行。现在我想知道上面的语句是如何执行的。我不知道，但我认为它以以下方式执行......

1.  首先它选择 100000 行
2.  然后按 ALLO_ID 排序
3.  然后跳过 10
4.  最后选择 10 行。

这样对吗？我想知道更多细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:16:42.217

此 Linq 通过实体框架生成 SQL 查询。然后它取决于您的 DBMS，但对于 SQL Server 2008，这是查询产生的：

```
SELECT TOP (10) [Extent1].[ALLO_ID] AS [ALLO_ID],   
FROM ( 
    SELECT [Extent1].[ALLO_ID] AS [ALLO_ID]
         , row_number() OVER (ORDER BY [Extent1].[ALLO_ID] ASC) AS [row_number]
    FROM [dbo].[ALLOCATION_D] AS [Extent1]
)  AS [Extent1]
WHERE [Extent1].[row_number] > 10
ORDER BY [Extent1].[ALLO_ID] ASC 
```

您可以在 C# 中运行它以检索查询：

```
var linqQuery = _db.ALLOCATION_D
                   .OrderBy(a => a.ALLO_ID)
                   .Skip(10)
                   .Take(10);
var sqlQuery = ((System.Data.Objects.ObjectQuery)linqQuery).ToTraceString();
Data = linqQuery.ToList(); 
```

Linq To SQL 的第二个选项

```
var linqQuery = _db.ALLOCATION_D
                   .OrderBy(a => a.ALLO_ID)
                   .Skip(10)
                   .Take(10);
var sqlQuery = _db.GetCommand(linqQuery).CommandText;
Data = linqQuery.ToList(); 
```

参考：

*   [如何查看实体框架生成的SQL？](https://stackoverflow.com/questions/1412863/how-do-i-view-the-sql-generated-by-the-entity-framework)
*   [如何：显示生成的 SQL](http://msdn.microsoft.com/en-us/library/bb386961.aspx)
*   [如何查看 LINQ 生成的 SQL 语句？](https://stackoverflow.com/questions/4899974/how-to-view-linq-generated-sql-statements)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:14:18.527

在`ToList`调用之前，调用只生成表达式。这意味着`OrderBy`,`Skip`和`Take`调用被捆绑为一个表达式，然后发送到实体框架以在数据库中执行。

实体框架将从该表达式进行 SQL 查询，该查询返回表中的十行，`ToList`方法读取这些行并将其放置在集合中项目的类型的`List<T>`where中。`T``ALLOCATION_D`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:08:00.733

你的陈述如下：

1.  选择所有行（被跳过/采取覆盖）
2.  按 Allo_ID 排序
3.  再次按 Allo_ID 订购
4.  跳过前 10 行
5.  取接下来的 10 行

如果您希望它选择**前**十行​​，您只需执行以下操作：

```
 Data = _db.ALLOCATION_D // You don't need to order twice
                    .OrderBy(a => a.ALLO_ID)
                    .Take(10)
                    .ToList() 
```

# android - 如何在其他标记之上显示 Google Maps Android Marker？

> ID：16054719
> 
> 赞同：3
> 
> 时间：2013-04-17T08:05:19.760
> 
> 标签：android, google-maps, google-maps-markers, google-maps-android-api-2

我的应用程序中有多个标记，有时其中一些位于同一位置。我希望其中一些标记始终显示在其他标记的前面。我应该如何进行？

先感谢您。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-09-30T23:52:42.810

marker.setZIndex(Float.MAX_VALUE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:11:40.000

您应该以某种方式对它们进行排序，并且适配器中的最后一个将位于顶部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:27:56.917

选择您希望始终可见的那些，然后将它们最后添加到地图中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:45:37.870

我认为这是错误的做法。即使您将一个标记放在另一个前面，用户仍有可能点击后面的标记。

我不会这样做，而是在向地图添加新数据时，检查新添加的位置`Marker`是否已经存在，如果是，只需将新数据添加到当前数据中，不要添加另一个数据。`Marker``Marker``Marker`

这样相同的标记将代表两个指定的位置。

**更新：**

看一下这段代码，在其中我检查当前单击的标记是否是我当前的位置。这样我就知道我是否应该启动一个方向活动。您可以使用相同的技术来确定您是否已经在特定位置有标记。

```
 map.setInfoWindowAdapter(new InfoWindowAdapter() {

            // Use default InfoWindow frame
            @Override
            public View getInfoWindow(Marker args) {
                return null;
            }

            // Defines the contents of the InfoWindow
            @Override
            public View getInfoContents(Marker args) {

                // Getting view from the layout file info_window_layout
                View v = getLayoutInflater().inflate(R.layout.info_window_layout, null);

                // Getting the position from the marker
                clickMarkerLatLng = args.getPosition();

                TextView title = (TextView) v.findViewById(R.id.tvTitle);
                title.setText(args.getTitle());

                map.setOnInfoWindowClickListener(new OnInfoWindowClickListener() {          
                    public void onInfoWindowClick(Marker marker) 
                    {
                        if (SGTasksListAppObj.getInstance().currentUserLocation!=null)
                        {   
                            if (String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) &&
                                    String.valueOf(SGTasksListAppObj.getInstance().currentUserLocation.getLongitude()).substring(0, 8).contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                            {
                                Toast.makeText(getApplicationContext(), "This your current location, navigation is not needed.",  Toast.LENGTH_SHORT).show();
                            }
                            else
                            {
                                FlurryAgent.onEvent("Start navigation window was clicked from daily map");
                                tasksRepository = SGTasksListAppObj.getInstance().tasksRepository.getTasksRepository();
                                for (Task tmptask : tasksRepository)
                                {
                                    String tempTaskLat = String.valueOf(tmptask.getLatitude());
                                    String tempTaskLng = String.valueOf(tmptask.getLongtitude());

                                    Log.d(TAG, String.valueOf(tmptask.getLatitude())+","+String.valueOf(clickMarkerLatLng.latitude).substring(0, 8));

                                    if (tempTaskLat.contains(String.valueOf(clickMarkerLatLng.latitude).substring(0, 8)) && tempTaskLng.contains(String.valueOf(clickMarkerLatLng.longitude).substring(0, 8)))
                                    {  
                                        task = tmptask;
                                        break;
                                    }
                                }
                                /*
                                findDirections(SGTasksListAppObj.getInstance().currentUserLocation.getLatitude(),
                                               SGTasksListAppObj.getInstance().currentUserLocation.getLongitude(),
                                               clickMarkerLatLng.latitude, clickMarkerLatLng.longitude, GMapV2Direction.MODE_DRIVING );
                                */
                                Intent intent = new Intent(getApplicationContext() ,RoadDirectionsActivity.class);
                                intent.putExtra(TasksListActivity.KEY_ID, task.getId());
                                startActivity(intent);

                            }
                        }
                        else
                        {
                            Toast.makeText(getApplicationContext(), "Your current location could not be found,\nNavigation is not possible.",  Toast.LENGTH_SHORT).show();
                        }
                    }
                });

                // Returning the view containing InfoWindow contents
                return v;

            }
        }); 
```

# java - 将 LinkedList 保存到文件并将 List 加载回程序

> ID：16054720
> 
> 赞同：2
> 
> 时间：2013-04-17T08:05:19.960
> 
> 标签：java, file, file-io, linked-list

我有一个正在使用的库存控制系统，并且我有一个 LinkedList 来保存库存对象，现在我需要向程序添加一个方法，该方法允许我将链表保存到文件并从文件中加载列表。

```
public void loadStockData(String filename) 
```

和

```
public void saveStockData() 
```

我将如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:10:33.773

确保您的对象支持序列化，提示：`implements Serializable`。[http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html](http://docs.oracle.com/javase/6/docs/api/java/io/Serializable.html)

然后，使用 java.io.ObjectOutputStream 保存并使用 java.io.ObjectInputStream 读取列表。

[http://www.tutorialspoint.com/java/java_serialization.htm](http://www.tutorialspoint.com/java/java_serialization.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:08:28.920

您没有提到该文件是否应该是人类可读的。

如果不是，则将`LinkedList`对象本身序列化到文件中，因为它包含的对象也是`Serializable`. 您可以使用[ObjectOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/ObjectOutputStream.html#writeObject%28java.lang.Object%29)来做到这一点。提供`FileOutputStream`给`ObjectOutputStream`

如果您需要某种特定格式，那么您需要编写逻辑并使用`FileOutputStream`您可以编写文件。

# html - 使用 HTML5 和画布重做和撤消图像上的文本

> ID：16054721
> 
> 赞同：1
> 
> 时间：2013-04-17T08:05:22.040
> 
> 标签：html

知道如何在 HTML5 中使用重做和撤消功能。我的任务是重做和撤消 fb 中应用程序图像上的文本更改。

在此先感谢，赛。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T19:59:37.690

如果您将图像和文本绘制到画布上，那么我将按照 The Pointy End of the Stick 博客中显示的示例进行操作；[http://pointystickgames.com/blog/?p=62](http://pointystickgames.com/blog/?p=62)

如果没有，那么也许您可以向我们提供有关您当前方法的更多详细信息。

# php - 上传的文件如何公开，未经授权可以下载？

> ID：16054722
> 
> 赞同：1
> 
> 时间：2013-04-17T08:05:26.543
> 
> 标签：php, google-drive-api

我像这样上传文件：

```
 if (isset($_FILES[$name])) {
        $service = new Google_DriveService($client);

        //Insert a file
        $file = new Google_DriveFile();
        $file->setTitle($_FILES[$name]['name']);
        $file->setMimeType($_FILES[$name]['type']);
        $file->setParents(array('imgs'));

        $insertedFile = $service->files->insert($file, array(
            'data' => file_get_contents($_FILES[$name]['tmp_name']),
            'mimeType' => $_FILES[$name]['type']
        ));

        return $insertedFile;
    } 
```

得到`insertedFile`这样的：

```
Array
(
    [kind] => drive#file
    [id] => 1sASTlgG7IFzcZyTUihp53uJbppFtxLs_GK_V2jYwapE
    [etag] => "vGmlhiWxP02tugPmRvLynwC_A0Y/MTM2NjE4NTYyNzQwOQ"
    [selfLink] => https://www.googleapis.com/drive/v2/files/1sASTlgG7IFzcZyTUihp53uJbppFtxLs_GK_V2jYwapE
    [alternateLink] => ... 
```

但是当我去 selfLink 时，我得到一个错误

```
{
  ...
  "code": 403,
  "message": "Daily Limit for Unauthenticated Use Exceeded. Continued use requires signup."
 }
} 
```

在没有任何授权的情况下获取上传文件的正确方法是什么？看起来文件只能通过 API 获得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:15:26.923

如果要下载内容，请向下载 URL 发出经过身份验证的请求。

```
// Get the contents of the file.
$request = new Google_HttpRequest($file->downloadUrl);
$response = $client->getIo()->authenticatedRequest($request);
$content = $response->getResponseBody(); 
```

# c++ - C ++ vtables中的双重间接

> ID：16054723
> 
> 赞同：4
> 
> 时间：2013-04-17T08:05:26.447
> 
> 标签：c++, pointers, assembly, function-pointers, vtable

我编写了这个非常简单的 C++ 程序，我想知道为什么编译器会跨两个指针取消引用来布置 vtable。这是 C++ 程序：

```
class Foo {
 public:
  virtual void bar() {
  }
};

int main(int argc, char *arv[]) {
  Foo foo;
  Foo *foo_p(&foo);
  foo_p->bar();
} 
```

现在，我可以查看编译器生成的程序集：

```
$ g++ -ggdb -Wall -O0 -S test.cpp 
```

以下是相关部分：

```
 .loc 1 9 0 
    leaq    -16(%rbp), %rax  # put the address of 'foo' in %rax
    movq    %rax, %rdi       # use it as the first argument of the following function
    call    _ZN3FooC1Ev      # call the Foo constructor
    .loc 1 10 0
    leaq    -16(%rbp), %rax  # put the address of 'foo' in %rax
    movq    %rax, -24(%rbp)  # create 'foo_p' on the stack
    .loc 1 11 0
    movq    -24(%rbp), %rax  # load 'foo_p' into %rax
    movq    (%rax), %rax     # dereference the pointer, put it in %rax
                             # %rax now holds the hidden pointer in 'foo', which is the vtable pointer
    movq    (%rax), %rdx     # dereference the pointer ::again:: (with an offset of 0), put it in %rdx
                             # %rdx now holds a function pointer from the vtable
    movq    -24(%rbp), %rax  # create the 'this' pointer (== foo_p) and put it in %rax
    movq    %rax, %rdi       # use the 'this' pointer as the first argument to the following function
    call    *%rdx            # call Foo::bar (via the vtable) 
```

为什么第二个指针取消引用是必要的？为什么对象中的“隐藏”vtable 指针不直接指向 vtable？

编辑：它 ::is:: 直接指向 vtable。我只是对我的指针感到困惑:-P

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:14:50.833

```
movq    -24(%rbp), %rax  # load 'foo_p' into %rax
movq    (%rax), %rax     # fetch VTABLE
movq    (%rax), %rdx     # fetch function `bar` from VTABLE. 
```

如果您将`baz`（或`kerflunk`）函数作为第二个函数添加到您的类中，您会更好地看到它，您会看到第二个提取位于`8`VTABLE 中。

您可以看到类内部的结构是这样的（注意这是“出于说明目的，并非旨在成为现实”）

```
struct VTABLE
{
    void (*bar)();
};

struct Foo
{
    VTABLE *vtable;
}; 
```

在 Foo [即使您没有声明它也存在] 的构造函数中，有一段代码可以执行以下操作：

```
this->vtable = &VTABLE_Foo; 
```

以及编译器已经完成的某处（再次，为了说明目的，名称肯定不同）：

```
VTABLE VTABLE_Foo = { foo::bar }; 
```

所以打电话`bar`，我们会这样做：

```
foo_p->vtable->bar(foo_p); 
```

编译器显示的是：

```
void (*temp)() = foo_p->vtable->bar;
temp(foo_p); 
```

这几乎可以肯定是 using 的结果`-O0`，如果您使用优化进行编译，编译器会更直接地进行编译（包括可能意识到在这种情况下它不需要 vtable 并内联不做任何事情的函数，因此完全消除呼叫）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:11:49.393

第一个将*vtable*指针放入`%rax`，第二个将*函数*指针放入`%rdx`。

# mysql - 如何查找在 mySQL 上创建是否过去整整一周？

> ID：16054724
> 
> 赞同：2
> 
> 时间：2013-04-17T08:05:30.257
> 
> 标签：mysql

我正在寻找一种解决方案，以使用 mySQL 查找自一个（或多个）整周（7 天）以来创建的每个结果。

我试过这个，但有时结果似乎是错误的，因为每周有不止一个结果。

```
SELECT *
FROM `datatable`
WHERE MOD(TIMESTAMPDIFF(DAY,UNIX_TIMESTAMP(created),NOW()),7)=0; 
```

*   created 是一个时间戳。

感谢您的任何回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:37:11.653

尝试这个：

```
SELECT 
    *
FROM 
    `datatable`
WHERE 1 
    AND `created` >= DATE_FORMAT(NOW() - INTERVAL 7 DAY,'%Y-%m-%d 00:00:00')
    AND `created` <= DATE_FORMAT(NOW() - INTERVAL 7 DAY,'%Y-%m-%d 23:59:59') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:18:19.827

据我了解的问题，您想要的记录比 a ***certainDate***新，**并且**不超过 7 天，或 14 天，...，140 天（以最接近于当前的***certainDate 为准***）日期。

**如果**我理解正确，以下可能对您有用`certainDate = '2013-04-01 00:00:00'`

```
SELECT *
FROM `datatable`
WHERE `created` >= ADDDATE(
                    '2013-04-01 00:00:00', 
                    INTERVAL MOD(ABS(TIMESTAMPDIFF(DAY, NOW(), '2013-04-01 00:00:00')),7) DAY
                  ) 
```

此查询将获取`created`过去 14 天内的所有结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:25:31.287

```
UNIX_TIMESTAMP(), UNIX_TIMESTAMP(date) 
```

如果不带参数调用，则返回 Unix 时间戳（自 '1970-01-01 00:00:00' UTC 以来的秒数）作为无符号整数。如果使用日期参数调用 UNIX_TIMESTAMP()，它返回参数的值作为自 '1970-01-01 00:00:00' UTC 以来的秒数，日期可以是 DATE 字符串、DATETIME 字符串、TIMESTAMP 或格式为 YYMMDD 或 YYYYMMDD 的数字。服务器将日期解释为当前时区的值，并将其转换为 UTC 的内部值。[客户端可以按照http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html](http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html)中的描述设置他们的时区 。

所以，不要使用`UNIX_TIMESTAMP()`函数，而要简单`DATE()`。

# c# - 在文本框中启用密码字符，除了最后 N 个字符/限制掩码字符

> ID：16054736
> 
> 赞同：5
> 
> 时间：2013-04-17T08:05:51.183
> 
> 标签：c#, textbox

除了最后 N 个字符，如何在 TextBox 中启用密码字符？

我已经尝试过这种方法

```
cardnumber.Select((c, i) => i < cardnumber.Length - 4 ? 'X' : c).ToArray() 
```

但这太难操作了，我会在每个事件中传递原始卡值`Keypress`， `TextChange`等等。

有没有更简单和易于管理的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:28:23.477

这应该可以解决问题，

```
string pw = "password1234";
char[] splitpw;
string cenpw;
int NtoShow;

splitpw = new char[pw.Length];
splitpw = pw.ToCharArray();
NtoShow = 4;
for (int i = 0; i < pw.Length; i++)
{
    if (i < pw.Length - NtoShow)
        cenpw += "*";
    else
        cenpw += splitpw[i];
}

//cenpw: "********1234" 
```

# batch-file - 当我制作了延迟启动批处理文件时，如何停止出现在桌面上的 cmd 窗口？

> ID：16054743
> 
> 赞同：0
> 
> 时间：2013-04-17T08:06:10.653
> 
> 标签：batch-file, invisible, minimized

这是我的.bat。一切正常，除了倒计时发生时我在屏幕上看到黑色窗口...

```
@echo off
timeout /nobreak /t 8 > nul
start /d "C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Skype\" Skype.lnk
exit 
```

Ps：`/min`不起作用，即使我`skype.lnk`在程序文件中右键单击并将那里设置为最小化，Skype 也不会开始最小化。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T11:15:59.320

我没有对此进行测试，但我认为它应该可以工作。这是一个批处理 + JScript + 再批处理混合脚本。用`.bat`扩展名保存它，让我知道它是否适合你。如果没有，我会做一些测试。

```
@if (@a==@b) @end /*

:: batch portion

@echo off
tasklist /fi "IMAGENAME eq cscript.exe" | find /i "cscript.exe" >NUL || (
    start "" cscript /nologo /e:jscript "%~f0"
    exit
)
:: ping -n seconds + 1 (because first ping result is instant)
ping -n 9 localhost > nul
start /d "C:\ProgramData\Microsoft\Windows\Start Menu\Programs\Skype\" Skype.lnk
exit

:: JScript portion */
var sh = new ActiveXObject("WScript.Shell");
sh.Run(WSH.ScriptFullName, 0);
WSH.Sleep(100); 
```

我将尝试描述脚本的工作流程。

1.  **cmd batch：**用户通过双击或`batfile.bat`在`cmd`提示符处输入来启动批处理脚本。

2.  脚本检查是否`cscript.exe`在任务列表中。它不是。

3.  脚本使用 JScript 解释器而不是 cmd 批处理解释器重新启动自身。当前 cmd 解释退出。

4.  **JScript：** WScript.Shell 对象[Run 方法](http://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx)使用 cmd 解释器在隐藏的非阻塞进程中重新启动批处理脚本。

5.  暂停 100 毫秒后，JScript 到达文件末尾并退出。这应该是最后一个可见窗口。

6.  **不可见的 cmd 批处理：**脚本检查是否`cscript.exe`在任务列表中。JScript 在这一点上仍然暂停，所以`cscript.exe`确实存在。

7.  去 ping 自己... 8 秒。

8.  在非阻塞过程中激活 Skype 快捷方式。

9.  批处理脚本退出。

# logback - 使用 logback 登录时屏蔽 PIN 和用户名等特殊标签

> ID：16054751
> 
> 赞同：1
> 
> 时间：2013-04-17T08:06:55.810
> 
> 标签：logback

我正在尝试使用 logback 来屏蔽日志文件中的多个条目，但模式标签似乎不接受多个替换，请帮我屏蔽多个

这是我所做的并且工作正常 %d{HH:mm:ss.SSS} [%thread] %-5level %logger{35} -%replace(%msg{'<PIN>. *</PIN>',
' <PIN>* ***</PIN>'}%n

但我想添加多个替换例如我想添加下面但它不接受

%replace(%msg){'<用户名>(. *)</用户名>', '<用户名>******** </用户名>'}%**

 **提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T11:31:15.830

听起来像是一个常见的用例。您能否[创建一个 jira 问题](http://jira.qos.ch/)来请求此功能？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T05:08:44.723

这在[https://github.com/tersesystems/terse-logback#censoring-sensitive-information](https://github.com/tersesystems/terse-logback#censoring-sensitive-information)和[https://tersesystems.com/blog/2019/05/11/application-logging-in-java-part- 3/](https://tersesystems.com/blog/2019/05/11/application-logging-in-java-part-3/) -- 您可以定义一个包含正则表达式的自定义转换器。**

# iphone - 使用 FacebookComposeViewController ，但照片无法显示

> ID：16054753
> 
> 赞同：-1
> 
> 时间：2013-04-17T08:07:00.340
> 
> 标签：iphone, ios, facebook

我学习了这个示例代码，并尝试在我的应用程序中实现，但照片无法显示。

[在此处输入链接描述](https://github.com/sakrist/FacebookSample)

![在此处输入图像描述](https://i.stack.imgur.com/P6KEX.png)

![在此处输入图像描述](https://i.stack.imgur.com/HMu6a.png)

```
- (IBAction)facebookBtn_down:(id)sender {
if (osVer >= 6.0) {
    SLComposeViewController *fbVC = [SLComposeViewController composeViewControllerForServiceType:SLServiceTypeFacebook];
    [fbVC setInitialText:apple_F_MSG];
    [fbVC addURL:[NSURL URLWithString:APP_URL]];
    [fbVC setCompletionHandler:^(SLComposeViewControllerResult res) {

        if (res == SLComposeViewControllerResultDone) [self AlertToukou];
    }];
    [self presentModalViewController:fbVC animated:YES];
} else {
    DEFacebookComposeViewController *fbVC = [[[DEFacebookComposeViewController alloc] init] autorelease];
    self.modalPresentationStyle = UIModalPresentationCurrentContext;
    [fbVC setInitialText:apple_F_MSG];
    [fbVC addURL:[NSURL URLWithString:APP_URL]];
    [fbVC setCompletionHandler:^(DEFacebookComposeViewControllerResult res) {
        if (res == DEFacebookComposeViewControllerResultDone) [self AlertToukou];
        [self dismissModalViewControllerAnimated:YES];
        self.modalPresentationStyle = UIModalPresentationFullScreen;
    }];
    [self presentModalViewController:fbVC animated:YES];
} 
```

}

请给我一些建议，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:10:28.803

从它的文档页面上说，

```
DEFacebookComposeViewController *facebookViewComposer = [[DEFacebookComposeViewController alloc] init];
self.modalPresentationStyle = UIModalPresentationCurrentContext;
[facebookViewComposer setInitialText:@"Look on this"];
[facebookViewComposer addImage:[UIImage imageNamed:@"1.jpg"]];//<------Check This
facebookViewComposer.completionHandler = completionHandler;
[self presentViewController:facebookViewComposer animated:YES completion:^{ }]; 
```

您应该使用`addImage`功能并提供适当的`UIImage`对象而不是它应该工作的对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:06:55.893

我发现了问题：</p>

我没有设置 Key "forKey:@"source"，不能贴在墙上

errorError Domain=com.facebook.sdk Code=5 "操作无法完成。(com.facebook.sdk error 5.)"

```
if ([self.images count] > 0) {
        [d setObject:UIImagePNGRepresentation([self.images lastObject]) forKey:@""];
        graphPath = @"me/photos";
    } 
```

# windows - Windows 线程何时需要消息循环，为什么？

> ID：16054771
> 
> 赞同：3
> 
> 时间：2013-04-17T08:08:05.230
> 
> 标签：windows, multithreading

我什么时候需要在 Windows 应用程序中使用消息循环？

例如，对于 Windows 服务，我是否需要为我创建的每个线程或仅用于主服务进程的消息循环？

```
while(true)
{
    GetMessage(&messageHandle, 0, 0, 0);
    DispatchMessage(&messageHandle);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:35:18.653

每个本机 Windows 程序都包含至少一个消息循环（通常称为“消息泵”），就像您给出的示例一样。

这是为了能够处理由程序本身、其他应用程序或操作系统发起的 Windows 事件。

Windows 事件的示例可以是计时器、套接字通信、GUI 操作、剪贴板等。

许多 API 和框架为您实现了消息循环。这将取决于您在特定情况下使用的内容。

（有关消息循环/消息泵的更多信息，请查看[此 Stack Overflow 问题中的答案。）](https://stackoverflow.com/questions/2222365/what-is-a-message-pump)

现在回到问题的要点：许多或大多数程序都可以在一个消息循环中正常工作。您需要多个事件的情况通常是处理 Windows 事件可能需要很长时间（即，它会锁定当前线程），并且有些要求也需要您继续处理新的窗口事件。我可以想到两个具体的例子：

1.  一个是在 GUI 应用程序中，您正在显示一个模式对话框（通常会冻结主消息泵并为对话框启动一个新的）
2.  由于外部依赖性和处理新 I/O 事件的及时性，处理 I/O 事件可能需要很长时间的某种服务至关重要

在 (1) 中，这通常是您使用的 GUI 框架的结果，而不是您必须明确执行的操作。在 (2) 中，更好的处理方法是异步“完成工作”每个事件，而不是阻塞消息泵。

总之：这取决于。:-) 在大多数情况下，您不需要使用多个消息循环，但如果必须，就这样做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:36:04.653

应用：

本质上，当线程要创建和管理窗口时。这包括支持 COM STA 等的“隐藏”窗口。

没有窗口，没有窗口消息，不需要消息循环。

服务：

服务管理器需要处理服务消息，因此需要一个服务消息循环用于启动/停止/任何内容。

对于服务中启动的其他线程，不需要消息循环。

# c++ - c++ 中的 sqlite - 来自不同应用程序的并行插入，会发生什么？

> ID：16054784
> 
> 赞同：2
> 
> 时间：2013-04-17T08:08:48.560
> 
> 标签：c++, sqlite

我打开 sqlite 数据库文件`sqlite3_open`并使用`sqlite3_exec`.

该文件是一个全局日志文件，许多用户正在写入它。

现在我想知道，如果具有两个不同程序实例的两个不同用户尝试同时插入数据会发生什么......第二个用户的打开失败了吗？还是插入？

在这种情况下会发生什么？

如果这种情况不起作用，有没有办法解决这个问题？没有服务器端数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:23:14.200

大多数情况下是的。它使用文件锁定，但在某些系统上已损坏，请参阅[http://www.sqlite.org/faq.html#q5](http://www.sqlite.org/faq.html#q5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T09:34:24.710

简而言之，锁是在您开始事务时创建的，并在之后立即释放。锁定时，其他实例既不能读取也不能写入数据库（在“大”数据库中，它们仍然可以读取）。[但是，您可以以独占模式](http://www.sqlite.org/pragma.html#pragma_locking_mode)连接 sqlite 。当您要写入被另一个进程锁定的 db 时，执行会暂停指定的超时时间，默认为 5 秒。如果锁被释放，它会继续写入，否则它会引发错误。

# networking - POCO HttpClient中的多个线程？

> ID：16054788
> 
> 赞同：1
> 
> 时间：2013-04-17T08:09:02.823
> 
> 标签：networking, poco-libraries

我正在使用 POCO/NET 用 C++ 开发一个项目。网络代码如下所示：

```
URI uri("http://my.url.se" );
HTTPClientSession session(uri.getHost(), uri.getPort());

// prepare path
string path(uri.getPathAndQuery());
if (path. empty()) path = "/";

// send request
HTTPRequest req(HTTPRequest::HTTP_GET, path, HTTPMessage::HTTP_1_1);
req.set("Accept", "AcceptString");
req.set("Consumer", "ALL");
req.set("Contract", "ALL");
session.sendRequest(req);

// recieve response

HTTPResponse res;
istream &is = session.receiveResponse(res); 
```

该应用程序可在 Android 2.3.6（Samsung Galaxy Gio）和最新的 Android 版本上运行，但根据以下帖子（和 developer.android）：

[https://stackoverflow.com/questions/15606791/android-httppost-freezes-and-crashes-app](https://stackoverflow.com/questions/15606791/android-httppost-freezes-and-crashes-app)

如果网络部分不在单独的线程中，则会在最新的 Android 版本（Honeycomb 或更高版本）上引发 NetworkOnMainThreadException。我还没有创建一个新线程，所以我的问题是：

谁能确认我的假设，即它已经实现/自动使用 Poco Net 库中的新线程？

非常感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T07:22:37.333

> 谁能确认我的假设，即它已经实现/自动使用 Poco Net 库中的新线程？

HTTPClientSession 不会在单独的线程上运行，您必须明确地这样做。您可以使用 Poco:: [Thread](https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/Thread.h)、[Task](https://github.com/pocoproject/poco/blob/develop/Foundation/include/Poco/Task.h)或[Activity](https://github.com/pocoproject/poco/blob/develop/Foundation/samples/Activity/src/Activity.cpp)。

# php - 从mysql中的两个表中获取字段

> ID：16054792
> 
> 赞同：0
> 
> 时间：2013-04-17T08:09:09.150
> 
> 标签：php, mysql

**我有两张表，一张存储注册的学生**，我们称之为student_register 。第二个表保存学生的考试详细信息，我们称之为**exam_details**。在 students_register 表中，我存储：

```
student registration number    
first name    
last name    
email_address    
date_of_birth 
```

和其他细节。

在exam_details 表中，我存储了不同科目的注册号和学生分数。

现在，挑战是我想查询**exam_details**表并在表中显示数据，而不是显示学生注册号，我想将exam_details 表中的注册号与students_register 表中的注册号相关联，**以便**我可以显示学生的姓名而不是注册号。

我该怎么办？

**1.students_register 表**

```
id reg_number first_name  last_name  email_address      dob
1   P2894      John        Smith       john@example.com   12/05/1990 
```

**2.考试明细表**

```
id reg_number english maths chemistry  biology physics
1  P2894       60%    80%    50%         72%     64% 
```

我如何在表格中显示这些数据，以便我拥有

```
first_name last_name  english  maths  chemistry  biology physics
 John       Smith      60%      80%    50%        72%    64% 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:12:44.550

```
SELECT tb2.first_name, tb2.last_name, tb1.english, tb1.maths, tb1.chemistry, tb1.bilogy, tb1.physics
FROM exam_details AS tb1
INNER JOIN students_register AS tb2
ON tb1.reg_number = tb2.reg_number 
```

看看 SQL Joins -> [http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:12:28.567

使用简单的 JOIN 查询：

```
SELECT id, student_register.reg_number, first_name, 
       last_name, english, maths, chemistry, etc 
FROM student_register
JOIN exam-details ON student_register.reg_number = exam-details.reg_number 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:13:05.960

没有必要在`JOIN`这里使用。我认为这是最简单的方法。

```
SELECT 
  sr.first_name, 
  sr.last_name, 
  ed.english, 
  ed.maths, 
  ed.chemistry, 
  ed.biology, 
  ed.physics 
FROM 
  students_register sr, 
  exam_details ed 
WHERE 
  sr.reg_number = ed.reg_numver 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:14:02.633

见为`JOIN`。

```
SELECT first_name, last_name, english, maths, chemistry, biology, physics FROM exam_details AS ex JOIN students_register st ON (ex.reg_number = st.reg_number) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-17T08:15:28.307

```
SELECT * FROM student-register INNER JOIN exam-details ON student-detail.reg_number=exam-details.reg_number 
```

可能是您的疑问。然后你打印出你喜欢的任何东西。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T08:12:14.753

```
select first_name, last_name, english, maths, chemistry, biology, physics
from students_register, exam_details
where students_register.reg_number=exam_details.reg_number 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T08:12:38.440

你必须加入这两张桌子

```
SELECT s.first_name, s.last_name, e.english, e.maths, e.chemistry; e.biology, e.physics FROM students_register s LEFT JOIN exam_details e USING (reg_number) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-17T08:17:02.023

可能这会帮助你。

选择 students_register.first_name,students_register.last_name,exam-details.english,exam-details.maths,exam-details.chemistry,exam-details.biology,exam-details.physics 从exam-details left join students_register on students_register.reg_number=考试详细信息.reg_number

# java - 它必须是 StackoverflowError 或 OOME

> ID：16054793
> 
> 赞同：2
> 
> 时间：2013-04-17T08:09:14.423
> 
> 标签：java

当我在程序下面运行时

```
class Person{
     Person p;
     Person(){
         System.out.println("Hi");
         p = new Person();
     }
 }

public class Main {

    public static void main(String[] args) {
        new Person();
    }
} 
```

它会引发 StackOverFlow 错误，但我希望它是 OOME，因为我们正在创建对象，而不是使用任何本地方法/变量或引用变量

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:11:46.313

您是递归的并且没有调用`Person()`构造函数的终止条件，该构造函数将数据放在堆栈上（至少，返回地址 - 堆栈不仅用于局部变量和参数）：

```
Person(){
    p = new Person();   // <<== Calls the Person() constructor, which again calls the Person() constructor, which again ...
} 
```

因此，您会收到堆栈溢出错误。

理论上，编译器可以看到这是一个尾递归并优化方法调用，但这不会发生。

对象本身是在堆上创建的`Person`，但通常堆比堆栈大（至少默认情况下），所以堆栈比堆更早填满。

尝试使用不同的堆栈大小和最大堆大小设置运行相同的应用程序，例如

```
java -Xss128M -Xmx4M Person 
```

你会得到一个OOME而不是堆栈溢出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:24:58.677

您的期望并非没有根据。

这里有两种力量在起作用：

*   在堆上创建 person() 的对象
*   通过深度递归扩大调用堆栈

这两个中的哪一个首先失败是任何人的猜测，并且很大程度上取决于 JVM 的设置。将您的 -Xmx 设置为非常低的值，您很可能首先会收到 OOMException。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:12:36.143

因为它进入了一个无限循环，其中 Person 构造函数再次调用构造函数。

堆栈有一个限制，当它到达时会发生错误。

[http://docs.oracle.com/javase/6/docs/api/java/lang/StackOverflowError.html](http://docs.oracle.com/javase/6/docs/api/java/lang/StackOverflowError.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:24:10.520

原因是在 Person() 的默认构造函数中发生了递归调用。

在更深层次的JVM知识来解释这个问题：java虚拟机规范对java栈有两种异常情况：

1.  允许Java栈自动扩展，当申请不到足够的内存时会抛出OOM(OutOfMemory)错误。
2.  Java栈是由栈帧构成的，每个java方法push一个帧，当当前线程的栈深度大于jvm允许的深度时，会抛出StackOverflowError。

也许对你有帮助:)

# jquery - 中继器中asp.net按钮上的Jquery确认对话框

> ID：16054794
> 
> 赞同：1
> 
> 时间：2013-04-17T08:09:15.327
> 
> 标签：jquery, asp.net, dialog, repeater, confirmation

我想对 asp.net 按钮单击进行 jquery 确认，该按钮位于中继器内，但下面的代码不起作用。

它甚至没有进入函数 Confirmation()

当页面加载时，confirmDialog div 是可见的，就像它是一个常规的 div 元素而不是弹出窗口一样，**这不再是问题，但其余部分保持不变**

我错过了什么？

```
<asp:Content ID="Content2" ContentPlaceHolderID="AdminHead" runat="server">
   <script lang="javascript" type="text/javascript">
       $(function () {
           $("#confirmDialog").dialog({
               autoOpen: false,
               modal: true,
               buttons: {
                   'Confirm': function () {
                       $(this).dialog('close');
                       return true;
                   },
                   'Cancel': function () {
                       $(this).dialog('close');
                       return false;
                    }
                }
            });
            function Confirmation() { 
            alert("IN");

                $('#confirmDialog')
            .dialog('option', 'onOk', $(this).attr('href'))
            .dialog('open');
            }
        });
    </script>
</asp:Content>

<asp:Content ID="Content1" ContentPlaceHolderID="AdminContentPlaceHolder" runat="server">

<div id="confirmDialog">
    <p>ARE YOU SURE YOU WANT TO CONFIRM THIS ACTION?</p>
</div>
<asp:Repeater ID="Repeater1" runat="server">
   <HeaderTemplate>
        <div class="repeaterItem">
            <table id="AdminTable">
              .
              .
              .
    </HeaderTemplate>
    <ItemTemplate>
              .
              .
              .
              <asp:Button ID="DeleteButton" CssClass="delete" OnClick="ClickDelete" OnClientClick="Confirmation();return false;" runat="server"
                    Text="DELETE" CommandArgument="<%#(Container.DataItem as TagObject).ID %>" ClientIDMode="AutoID" />
            </th>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
              .
              .
              .
        </table></div>
    </FooterTemplate>
</asp:Repeater>
</asp:Content> 
```

-------------------------------------问题已解决---------- --------------------

我的最终代码：

```
 <asp:Content ID="Content2" ContentPlaceHolderID="AdminHead" runat="server">
   <script lang="javascript" type="text/javascript">
    var deleteButton;
    $(function () {
        $("#confirmDialog").dialog({
            autoOpen: false,
            modal: true,
            buttons: {
                'Confirm': function () {
                    $(this).dialog('close');
                    __doPostBack($(deleteButton).attr('name'), '');
                },
                'Cancel': function () {
                    $(this).dialog('close');
                    callback(false);
                }
            }
        });
    });
    function Confirmation() {
        deleteButton = this;
            $('#confirmDialog').dialog('open');
        }
</script>
</asp:Content>

<asp:Content ID="Content1" ContentPlaceHolderID="AdminContentPlaceHolder" runat="server">

<div id="confirmDialog">
    <p>ARE YOU SURE YOU WANT TO CONFIRM THIS ACTION?</p>
</div>
<asp:Repeater ID="Repeater1" runat="server">
   <HeaderTemplate>
        <div class="repeaterItem">
            <table id="AdminTable">
              .
              .
              .
    </HeaderTemplate>
    <ItemTemplate>
              .
              .
              .
              <asp:Button ID="DeleteButton" CssClass="delete" OnClick="ClickDelete" OnClientClick="Confirmation();" runat="server"
                    Text="DELETE" CommandArgument="<%#(Container.DataItem as TagObject).ID %>" ClientIDMode="AutoID" />
            </th>
        </tr>
    </ItemTemplate>
    <FooterTemplate>
              .
              .
              .
        </table></div>
    </FooterTemplate>
</asp:Repeater>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:06:17.313

首先将确认功能从块中取出。编辑使其实际工作：

```
<script lang="javascript" type="text/javascript">
    $(function () {
        $("#confirmDialog").dialog({
            autoOpen: false,
            modal: true,
            buttons: {
                'Confirm': function () {
                    $(this).dialog('close');
                    return true;
                },
                'Cancel': function () {
                    $(this).dialog('close');
                    return false;
                }
            }
        });

    });
    function Confirmation() {
        alert("IN");

        $('#confirmDialog').dialog('open');
    }
</script>

<asp:Button ID="DeleteButton" CssClass="delete" OnClick="ClickDelete" OnClientClick="Confirmation();return false;"
    runat="server" Text="DELETE" CommandArgument="asd" ClientIDMode="AutoID" /> 
```

# c# - WPF - 触摸手势 - 滚动时抑制鼠标点击

> ID：16054799
> 
> 赞同：6
> 
> 时间：2013-04-17T08:09:24.207
> 
> 标签：c#, wpf, touch, gesture

我在 ScrollViewer 中有多个视频，当我单击其中一个视频时，它会播放并且我在全屏上看到电影，并且我使用滚动条移动它与视频一起移动。这没关系。我已经通过向媒体元素添加鼠标单击来实现这一点，现在我正在触摸屏上对其进行测试并且它正在工作。

但我想区分点击视频和在该区域移动。该用户不想“选择”视频，但他只是随区域移动，而不是在滚动条中，而是在视频区域中。为了更好地理解，我添加了图像：![例子](https://i.stack.imgur.com/eih6K.png)

让 WPF 在单击和移动之间有所不同（同时拥有但仍然只调用一个）。做这个的最好方式是什么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-28T22:09:37.113

自己处理触摸事件非常困难，尤其是当您必须处理嵌套控件时。

我认为解决此问题的最简单方法是让您使用[Microsoft Surface Touch Pack](http://www.microsoft.com/de-de/download/details.aspx?id=17368)

将您的 ScrollView 替换为 SurfaceScrollView 并在您的 MediaElements 上方放置一个透明的 SurfaceButton 并对 Click-event 做出反应（或通过 a 命令处理它）。

这样，Microsoft 会为您完成棘手的平移（滚动）或点击（单击）。作为一个很好的副作用，您可以免费获得 ScrollViewer 的弹跳和 interia 之类的东西。

# jquery - 如何使用 JQuery 将行与数字一起正确附加？

> ID：16054801
> 
> 赞同：0
> 
> 时间：2013-04-17T08:09:32.790
> 
> 标签：jquery

这是我的 HTML 代码：

```
<table width="600px" id="project">
    <tr>
        <td>1</td>
        <td><textarea name="pro_1" cols="100" rows="2"></textarea></td>
    </tr>
    <tr>
        <td>2</td>
        <td><textarea name="pro_2" cols="100" rows="2"></textarea></td>
    </tr>
    <tr>
        <td>3</td>
        <td><textarea name="pro_3" cols="100" rows="2"></textarea></td>
    </tr>
    <tr>
        <td>4</td>
        <td><textarea name="pro_4" cols="100" rows="2"></textarea></td>
    </tr>
    <tr>
        <td>5</td>
        <td><textarea name="pro_5" cols="100" rows="2"></textarea></td>
    </tr>
</table>

<input id="addbtn" type="button" name="addbtn" value="ADD"> 
```

这是我的 Jquery 代码：

```
$(document).ready(function() {
    $("#addbtn").click(function()
        $("table#project,textarea").append("<tr><td></td><td><textarea></textarea></td></tr>").attr({cols:"100",rows:"2"});
    }); 
}); 
```

实际上我编码时有两个问题：首先，当我第一次单击按钮时，它会追加行但不适合 Jquery Code 中符合“attr”的位置。但是当我第二次时它会起作用点击按钮。其次，它没有在代码中附加数字。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:23:34.073

只是简短而简单地在附录中执行此操作：

```
$("table#project,textarea").append(
       "<tr><td>6</td><td><textarea cols='100' rows='2'></textarea></td></tr>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:17:19.000

```
$(document).ready(function() {
    $("#addbtn").click(function()
        $("table#project").append('<tr><td>6</td><td><textarea cols="100" rows="2"></textarea></td></tr>');
    }); 
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:18:12.520

我不确定您指的是代码中的哪个数字；在您提供的代码中，您只有一个硬编码的 6。

对于您的代码实际如何工作以及我认为您认为它如何工作也存在一些混淆。

第一部分，选择器，如下所示：

```
$("table#project,textarea") 
```

这很简单。它选择具有 ID 的表`project`并选择所有`<textarea>`元素。

下一部分，追加，如下所示：

```
.append("<tr><td>6</td><td><textarea></textarea></td></tr>") 
```

也很简单。它将（尝试）将该 HTML 附加到所有匹配的元素 -`<table>`和所有`<textarea>`元素 - 但仅将其添加到表中，因为 a`<textarea>`没有子元素。

最后一部分：

```
.attr({cols:"100",rows:"2"}); 
```

在所有匹配的元素上设置这些属性。这是`<table>`元素以及除最后一个元素之外的所有`<textarea>`元素。为什么除了最后一个？因为该`.append()`函数不会更新 jQuery 对象中匹配的元素集 - 您仍在使用执行选择器时选择的那些元素，这发生在*添加*`.append()`最后一个元素之前。

我建议改为：

```
$('#project').append('<tr><td>' + yourNumberVariable + '</td><td><textarea></textarea></td></tr>').find('textarea').attr({cols: "100", rows: "2"}); 
```

这会将新行附加到`<table>`（选择器使用 ID，因此可能没有理由包含标签名称，但如果您愿意或确实需要，请将其重新添加），然后找到所有`<textarea>`元素（包括刚刚添加的元素） ，然后设置这些属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:18:31.883

好吧，首先，您的选择器`$("table#project,textarea")`要求一个`table`名为“项目”或任何`textarea`s。然后在选择的任何内容之后插入一堆 html，并尝试在其上设置一些属性，但是您拥有的 html 是一个带有单元格的表格行，等等。所以最外面的元素是`tr`(即表格行），你正在设置它的`cols`和`rows`属性，而不是`textarea`我假设你想要的。

你可能想要的是这样的：

```
$("table#project").append("<tr><td>6</td><td><textarea cols='100' rows='2'></textarea></td></tr>'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T16:18:03.133

这是从您所有建议中得到的解决方案：

```
$(document).ready(function() {
$("#addbtn").click(function(){
  var num=parseInt($("#project tr:last").text());
num+=1;
$("#project,textarea").append("<tr><td>"+num+"</td><td><textarea cols='100' rows='2'></textarea></td></tr>");
});
  }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-17T08:29:15.863

尝试这个

```
$("#addbtn").click(function(){
    var num = parseInt($("tr:last").text());
    num += 1;
    var row = $("<tr><td>"+num+"</td><td><textarea></textarea></td></tr>");
 $("table#project").append(row).find('textarea').attr({cols:"100",rows:"2"});
}); 
```

这将让您*自动为行编号*，并附加具有所需属性的行。我假设您可能不想*仅将新行编号为 6*。所以我也添加了编号逻辑。

[看演示](http://jsfiddle.net/2g9dR/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-17T08:21:33.823

```
$(document).ready(function() {
    $('#project tr:last').after('<tr><td>6</td><td><textarea cols="100" rows="2"></textarea></td></tr>');
}); 
```

# asp.net - 带有实体框架的业务逻辑架构

> ID：16054804
> 
> 赞同：0
> 
> 时间：2013-04-17T08:09:43.160
> 
> 标签：asp.net, entity-framework, repository-pattern, dao, unit-of-work

我正在使用实体框架，我有这样的实体：

```
 public class User : IEntity
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        [Required]
        public String Email { get; set; }

        public virtual ICollection<Project> UserProjects { get; set; }
    }

public class Project : IEntity
{
    [Key]
    public int ProjectId { get; set; }

    public String Title { get; set; }

    public String Description { get; set; }

    [ForeignKey("UserOwner")]
    public int UserOwnerId { get; set; }
    public virtual User UserOwner { get; set; }
} 
```

我也使用存储库模式和工作单元模式。例如，我在项目逻辑类中有方法 CreateProject(String title, String description, String userOwnerEmail)，它只包含项目存储库。我也有 UserLogic 类，允许我通过他的电子邮件获取用户。

我如何在 CreateProject 方法中通过他的电子邮件获取用户，以将他指定为项目所有者。

主要目的是创建松散耦合方法。

我认为这个例子很糟糕：

```
 public void CreateNewProject(String projectName, String description,String usersEmail)
    {
        var usersLogic = kernel.Get<IUsersServices>();
        User owner = usersLogic.GetUserByEmail(usersEmail);
        unit.Repository<Project>()
            .Insert(new Project
                {
                    Title = projectName,
                    Description = description,
                    CreationDate = DateTime.Now,
                    UserOwner = owner,
                    UsersIncludeedInProject = new List<User>()
                });
        unit.Save();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:50:45.480

业务逻辑和实体框架（或任何其他 ORM）不属于同一个短语。关注点分离是原则。

```
class Project
{
     public Project(IProjectRepository repo, IUsersServices userServ){}

     public void CreateNewProject(String projectName, String description,String usersEmail)
      {
          var owner=_users.GetByEmail(usersEmail);

           //create project\\

          _repository.Save(project);
       } 
```

另一种方法是将 User 对象作为参数传递，您将通过向 GetUserByEmail() 询问 UserService 甚至 UserRepository 来获得对象。但它将在 CreateNewProject 方法之外

```
var user= _usersService.GetByEmail();
var project=project.CreateNewProject(projectName,projectDescription,user);
_projectRepository.Save(project); 
```

在这种情况下，CreateNewProject 正是这样做的，因为它可能不关心保存项目。我推荐第二种方法。

# javascript - jqGrid 发送编辑/删除内联信息序列化 JSON 格式

> ID：16054805
> 
> 赞同：2
> 
> 时间：2013-04-17T08:09:43.273
> 
> 标签：javascript, json, api, jqgrid

我正在尝试使用列进行内联编辑，`formatter: 'actions'`并希望以 JSON 格式将信息发送到服务器，但我不能。我已经尝试了很多东西，但没有结果。仍然发送信息而不进行序列化。

还尝试`$.extend($.jgrid.edit, (...));`了初始化`$(function(){...});`，但没有结果。

我的格式选项如下所示：

```
formatoptions: {
    keys: true,
    editbutton: true,
    delbutton: true,
    //url: url,
    editOptions: {
        url: url,
        ajaxEditOptions: {
            //url: url,
            contentType: 'application/json;charset=utf-8',
            type: 'POST',
            datatype: 'json'
        }
    },
    delOptions: {
        url: url,
        ajaxDelOptions: {
            //url: url,
            contentType: 'application/json;charset=utf-8',
            type: 'POST',
            datatype: 'json'
        }
    }
}} 
```

但仍然无法正常工作：SI 不知道我做错了什么。如果你能帮助我，我将不胜感激。

PS：我写了太多 url 属性，因为我正在检查我必须在哪里写才能让它工作。对于编辑，仅当我将 url 从 editOptions 中放入时才有效，只有当我将其放入 formatoptions 中时才有效。但是对于删除，它不在乎我是否将其放入/输出`delOptions`，包括`ajaxDelOptions`. 如果你也能帮助我，我将不胜感激。

**更新**

删除适用于此配置，但内联编辑保存按钮仍然不起作用。我粘贴了相同的配置，更改了编辑选项，但仍然无法正常工作。

```
delOptions: {
    url: url,
    mtype: 'POST',
    reloadAfterSubmit: true,
    ajaxDelOptions: {
        contentType: "application/json"
    },
    serializeDelData: function(postdata) {
        return JSON.stringify(postdata);
    }
} 
```

**更新 2**

这是我的JS。

```
$(function() {
    $.mask.definitions['2'] = '[0-2]';
    $.mask.definitions['5'] = '[0-5]';
    $.extend($.jgrid.defaults, {
        ajaxRowOptions: {
            contentType: "application/json",
            dataType: "json",
            success: function() {

            },
            error: null
        },
        serializeRowData: function(data) {
            delete data.oper;
            return JSON.stringify(data);
        }
    });
});
function loadGrid(identifier) {
    $("#list").jqGrid({
        url: 'foo.html?identifier=' + identifier,
        type: 'GET',
        datatype: 'json',
        repeatitems: false,
        autowidth: true,
        altRows: false,
        hidegrid: false,
        cmTemplate: {
            sortable: false,
            resizable: false
        },
        colNames: ["id", "column1", "column2", "column3", "column4", "column5", "column6", "column7", " "],
        colModel: [
            {name: "id", label: "id", hidden: true},
            {name: "columnData1", label: "columnData1", key: true, hidden: true},
            {name: "columnData2", label: "columnData2", edittype: "select", editable: true,
                editoptions: {
                    dataUrl: 'foo/bar.html'
                }},
            {name: "columnData3", label: "columnData3", width: 75, editable: true},
            {name: "columnData4", label: "columnData4", width: 100, edittype: "select", editable: true,
                editoptions: {
                    dataUrl: 'foo/bar.html'
                }},
            {name: "columnData5", align: "right", label: "columnData5", width: 55, formatter: 'number',
                formatOptions: {
                    decimalPlaces: 2
                }, editable: true},
            {name: "columnData6", align: "right", label: "columnData6", width: 55, formatter: 'number',
                formatOptions: {
                    decimalPlaces: 2
                }, editable: true},
            {name: "columnData7", align: "right", label: "columnData7", width: 55, formatter: 'number',
                formatOptions: {
                    decimalPlaces: 2
                }},
            {name: "actions", formatter: "actions", width: 35}
        ],
        pager: '#pager',
        rows: '',
        rowList: [],
        pgbuttons: false,
        pgtext: null,
        viewrecords: false,
        gridview: true,
        caption: 'MyCaption',
        subGrid: true,
        subGridRowExpanded: function(subgrid_id, row_id) {
            var subgrid_table_id, pager_id;
            subgrid_table_id = subgrid_id + "_t";
            pager_id = "p_" + subgrid_table_id;
            $("#" + subgrid_id).html("<table id='" + subgrid_table_id + "'></table><div id='" + pager_id + "'></div>");
            $("#" + subgrid_table_id).jqGrid({
                url: 'foo/bar.html?identifier=' + identifier + '&rowId=' + row_id,
                type: 'GET',
                datatype: 'json',
                repeatitems: false,
                autowidth: true,
                altRows: false,
                hidegrid: false,
                cmTemplate: {
                    sortable: false,
                    resizable: false
                },
                colNames: ['column1', 'column2', 'column3', 'column4', 'column5', 'column6', ' '],
                colModel: [
                    {name: 'columnData1', hidden: true, key: true},
                    {name: 'columnData2', width: 75, formatter: 'date',
                        formatoptions: {
                            srcformat: 'Y-m-d',
                            newformat: 'd/m/Y'
                        },
                        editoptions: {
                            readonly: 'readonly',
                            dataInit: function(elem) {
                                $(elem).width("75%");
                                $(elem).datepicker({
                                    dateFormat: "dd/mm/yy",
                                    showOn: "button",
                                    buttonImage: "../css/images/calendar.gif",
                                    buttonText: "Muestra el calendario.",
                                    buttonImageOnly: true
                                });
                            }}
                        , editable: true},
                    {name: 'columnData3', width: 75,
                        formatter: function(cellval, opts) {
                            if (!/^([0-1][0-9]|2[0-3]:[0-5][0-9])/.test(cellval)) {
                                var date = new Date(cellval);
                                opts = $.extend({}, $.jgrid.formatter.date, opts);
                                return $.fmatter.util.DateFormat("", date, 'H:i', opts);
                            } else {
                                var date = new Date();
                                var time = cellval.split(":");
                                date.setFullYear(1899);
                                date.setMonth(12);
                                date.setDate(30);
                                date.setHours(time[0]);
                                date.setMinutes(time[1]);
                                date.setSeconds(0);
                                opts = $.extend({}, $.jgrid.formatter.date, opts);
                                return $.fmatter.util.DateFormat("", date, 'H:i', opts);
                            }
                        },
                        editoptions: {dataInit: function(elem) {
                                $(elem).mask("29:59");
                            }},
                        editrules: {custom: true, custom_func: function(value) {
                                if (/^([0-1][0-9]|2[0-3]:[0-5][0-9])/.test(value)) {
                                    return [true, ""];
                                } else {
                                    return [false, " no es un formato de hora v&aacute;lido.<br/>Por favor, introduzca una hora en un formato <b>hh:mm</b> v&aacute;lido."];
                                }
                            }}, editable: true},
                    {name: 'columnData4', width: 80, editable: true},
                    {name: 'columnData5', width: 200, editable: true},
                    {name: 'columnData6', align: 'right', width: 50, editable: true, formatter: 'number',
                        formatoptions: {
                            decimalPlaces: 2
                        }},
                    {name: 'actions', formatter: 'actions', width: 40,
                        formatoptions: {
                            //keys: false,
                            editbutton: true,
                            delbutton: true,
                            url: "foo/bar/edit.html?identifier=" + identifier + "&rowId=" + row_id,
                            editOptions: {
                                keys: true,
                                //url: "foo/bar/edit.html?identifier=" + identifier + "&rowId=" + row_id,
                                mtype: "POST"
                            },
                            delOptions: {
                                url: "foo/bar/delete.html?identifier=" + identifier + "&rowId=" + row_id,
                                mtype: 'POST',
                                reloadAfterSubmit: true,
                                ajaxDelOptions: {
                                    contentType: "application/json"
                                },
                                serializeDelData: function(postdata) {
                                    delete postdata.oper;
                                    return JSON.stringify(postdata);
                                }
                            }
                        }}
                ],
                height: 190,
                pager: pager_id,
                rows: '',
                rowList: [],
                pgbuttons: false,
                pgtext: null,
                viewrecords: false,
                gridview: true,
                loadError: function(xhr, status, error) {
                    alert(xhr + " : " + status + " : " + error);
                },
                jsonReader: {
                    repeatitems: false
                },
                gridComplete: function() {
                    $("div.ui-inline-save").click(function() {
                        var dlgDiv = $("#info_dialog");
                        dlgDiv.width(600);
                        var parentDiv = dlgDiv.parent();
                        var dlgWidth = dlgDiv.width();
                        var parentWidth = parentDiv.width();
                        var dlgHeight = dlgDiv.height();
                        var parentHeight = parentDiv.height();
                        dlgDiv.css('top', Math.round((parentHeight - dlgHeight) / 2));
                        dlgDiv.css('left', Math.round((parentWidth - dlgWidth) / 2));
                    });
                    $("div.ui-inline-del").click(function() {
                        var dlgDiv = $("#delmod" + subgrid_table_id);
                        dlgDiv.width(600);
                        var parentDiv = dlgDiv.parent();
                        var dlgWidth = dlgDiv.width();
                        var parentWidth = parentDiv.width();
                        var dlgHeight = dlgDiv.height();
                        var parentHeight = parentDiv.height();
                        dlgDiv.css('top', Math.round((parentHeight - dlgHeight) / 2));
                        dlgDiv.css('left', Math.round((parentWidth - dlgWidth) / 2));
                    });
                    $("#gbox_" + subgrid_id + "_t").removeClass('ui-corner-all');
                    $("#" + pager_id).removeClass('ui-corner-bottom');
                    disableSelection(document.getElementById(subgrid_table_id));
                }
            }).navGrid("#" + pager_id, {add: true, edit: false, del: false, search: false, view: false, refresh: true}, {},
                    {afterShowForm: function(form) {
                            var dlgDiv = $("#editmod" + subgrid_table_id);
                            dlgDiv.width(600);
                            var parentDiv = dlgDiv.parent();
                            var dlgWidth = dlgDiv.width();
                            var parentWidth = parentDiv.width();
                            var dlgHeight = dlgDiv.height();
                            var parentHeight = parentDiv.height();
                            dlgDiv.css('top', Math.round((parentHeight - dlgHeight) / 2));
                            dlgDiv.css('left', Math.round((parentWidth - dlgWidth) / 2));
                        }
                    });
        },
        loadError: function(xhr, status, error) {
            alert(xhr + " : " + status + " : " + error);
        },
        jsonReader: {
            repeatitems: false
        },
        gridComplete: function() {
            $("div.ui-inline-save").click(function() {
                var dlgDiv = $("#info_dialog");
                dlgDiv.width(600);
                var parentDiv = dlgDiv.parent();
                var dlgWidth = dlgDiv.width();
                var parentWidth = parentDiv.width();
                var dlgHeight = dlgDiv.height();
                var parentHeight = parentDiv.height();
                dlgDiv.css('top', Math.round((parentHeight - dlgHeight) / 2));
                dlgDiv.css('left', Math.round((parentWidth - dlgWidth) / 2));
            });
            $("div.ui-inline-del").click(function() {
                var dlgDiv = $("#delmodlist");
                dlgDiv.width(600);
                var parentDiv = dlgDiv.parent();
                var dlgWidth = dlgDiv.width();
                var parentWidth = parentDiv.width();
                var dlgHeight = dlgDiv.height();
                var parentHeight = parentDiv.height();
                dlgDiv.css('top', Math.round((parentHeight - dlgHeight) / 2));
                dlgDiv.css('left', Math.round((parentWidth - dlgWidth) / 2));
            });
            disableSelection(document.getElementById("list"));
        }
    }).navGrid("#pager", {add: true, edit: false, del: false, search: false, view: false, refresh: true}, {},
            {afterShowForm: function(form) {
                    var dlgDiv = $("#editmodlist");
                    dlgDiv.width(600);
                    var parentDiv = dlgDiv.parent();
                    var dlgWidth = dlgDiv.width();
                    var parentWidth = parentDiv.width();
                    var dlgHeight = dlgDiv.height();
                    var parentHeight = parentDiv.height();
                    dlgDiv.css('top', Math.round((parentHeight - dlgHeight) / 2));
                    dlgDiv.css('left', Math.round((parentWidth - dlgWidth) / 2));
                }
            });
    var height = $("body").height();
    $('.ui-jqgrid-bdiv').height(height);
} 
```

为安全起见，更改了列名等（显然）。这是我的 JS。我必须在 a 中使用 jqGrid`function`并`identifier`作为参数获取，因为我有一个加载到 Iframe 中的 JSP，并且该 JSP 有另一个加载此 JS 的 Iframe。我需要发送`identifier`我在 JSP 中收到的内容来构建网格。我发现的最好的方法就是这样。这就是`identifier`价值。

另外，我需要它`identifier`和`row_id`更新数据，因为我有 3 个主键来识别特定项目。我需要`identifier`，父母`row_id`和实际`row_id`我正在编辑。最后一个我从 JSON 格式的 JS 对象中得到它。

就像它不识别`editOptions`属性一样，因为它没有得到`keys: true`. 它没有让我接受带有`Enter`密钥的编辑。

如果您仍需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T08:56:24.580

我认为您的问题的根源是对`formatter: 'actions'`工作原理的误解。

jqGrid支持的树型主[编辑模式有：](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:jqgriddocs#editing)[内联编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing)、[表单编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing)和[单元格编辑](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:cell_editing)。如果您不使用inside of`editformbutton: true`选项，则 Edit 按钮将使用*内联编辑*。删除按钮总是使用表单编辑，因为内联编辑模块中没有删除方法。`formatter: 'actions'``formatoptions`

 *因此，如果您在 of 中包含一些选项`editOptions`，`formatoptions`那么`formatter: 'actions'`它应该是[editRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:inline_editing#editrow)的一个选项（请参阅`editparameters`文档中对象的属性）。所以你可以指定例如

```
editOptions: {
    url: url,
    mtype: "POST", // is already default and can be removed
    keys: true
} 
```

但`ajaxEditOptions`这里将被忽略。`$.jgrid.edit`可用于更改`editGridRow`作为表单编辑一部分的默认值，但要更改`editRow`您需要使用的默认值`$.jgrid.inlineEdit`。

`delOptions`允许您指定[delGridRow](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing#delgridrow)的参数。您问题的**更新**部分使用正确的选项。所以删除操作可以正常工作。

顺便说一句，您可以使用`editurl` **jqGrid 的选项**来指定用于内联编辑和表单编辑的 URL。因此，在一个地方指定多次`editurl: url`会更好。`url: url`

成功编辑需要做的是添加`ajaxRowOptions`和`serializeRowData` **作为 jqGrid 选项**

```
ajaxRowOptions: { contentType: "application/json", dataType: "json" },
serializeRowData: function (data) { return JSON.stringify(data); } 
```

或将其设置在`$.jgrid.defaults`.

**更新**：您误解了唯一 ID 的值。HTML 标准不允许`id`页面上有两个具有相同属性的元素。您提出的演示不在`idPrefix`子网格中使用。如果您打开谁行的子网格并使用开发人员工具检查页面的 HTML 代码（`F12`在 IE 中按），您将看到以下内容

![在此处输入图像描述](https://i.stack.imgur.com/znIc0.png)

所以你*必须使用* `idPrefix`子网格。我建议您使用取决于父网格的 rowid 的值（类似于`idPrefix: "s_" + row_id + "_"`）。在[这里](https://stackoverflow.com/search?q=user:me%20%5Bjqgrid%5D%20%2bsubgrid%20%2bidPrefix)查看我对这个主题的更多回答。

**更新 2**：我`formatter: "actions"`又查看了一次代码，发现它使用*格式化程序*`url`选项进行内联编辑操作（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:predefined_formatter#predefined_format_types)）并用于删除和表单编辑。仅当您使用选项时才会使用。*`delOptions``editOptions``editOptions.url``editformbutton: true`**

# javascript - 显示自定义 ASP.NET 错误页面而不重写 URL

> ID：16054809
> 
> 赞同：3
> 
> 时间：2013-04-17T08:09:54.650
> 
> 标签：javascript, asp.net

目前正在为我的网站在 ASP.NET 中处理错误页面。如果服务器无法找到请求的页面，我正在使用 Web 配置文件将用户重定向到错误页面。下面是我在配置文件中使用的 customErrors 标签：

```
<customErrors mode="On" defaultRedirect="~/ErrorPages/Error.aspx">
  <error statusCode="404" redirect="~/ErrorPages/Error.aspx"/>
</customErrors> 
```

它目前正在工作，但我的问题是我不希望用户在 URL 中看到我的错误页面，如下所示：

/MySite/ErrorPages/Error.aspx?aspxerrorpath=/MySite/ImaginaryPage.aspx

我期待像谷歌一样的东西： [谷歌错误页面](http://google.com/ImaginaryPage.aspx)

有没有办法在没有 Javascript 的情况下做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T04:55:23.760

这篇文章可能会帮助你，这里是其中的一个片段： [http ://blog.dmbcllc.com/aspnet-application_error-detecting-404s/](http://blog.dmbcllc.com/aspnet-application_error-detecting-404s/)

```
void Application_Error(object sender, EventArgs e)
{
    Exception ex = Server.GetLastError();
    if (ex is HttpException)
    {
        if (((HttpException)(ex)).GetHttpCode() == 404)
            Server.Transfer("~/Error404.aspx");
    }
} 
```

真正关键的部分是，如果您想保持与请求的 URL 相同的 URL，那么`Response.Redirect`这不是您想要的，因为它会返回客户端发出第二个请求，从而更改 URL。您希望保留在服务器上，以便适当的调用是`Server.Transfer`. 这个特定的事件处理程序进入您的 Global.asax.cs 文件，并且该方法将为与您的应用程序上下文关联的任何 404 引发。

不幸的是，它会跳过您的`customErrors`配置部分并依赖于更加程序化的方法，但是从维护的角度来看，代码相当简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-08T09:56:09.503

你可以添加：redirectMode="ResponseRewrite"

像这样

```
<customErrors defaultRedirect="Error404.aspx" mode="RemoteOnly" 
                   redirectMode="ResponseRewrite"  >
        <error statusCode="404" redirect="Error404.aspx" />
    </customErrors> 
```

# azure - Azure Blob 存储 - $logs 容器中的列表块

> ID：16054810
> 
> 赞同：3
> 
> 时间：2013-04-17T08:09:55.633
> 
> 标签：azure, azure-blob-storage

我们有一个 azure blob 存储，启用了日志记录。我可以使用管理门户查看这些日志并下载 blob。但现在我正在尝试使用 Client api 列出这些日志。类似的东西：

```
let account = new CloudStorageAccount(credentials, true)
let client = account.CreateCloudBlobClient()
let container = client.GetContainerReference "$logs"
container.ListBlobs() 
```

但这会引发网络异常代码`400 Bad Request`。我可以。但是，在此客户端上列出来自其他容器的 blob。我知道我需要对此容器进行身份验证，但我正在使用主访问密钥作为凭据。那么为什么我不能得到 $logs blob？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T15:40:04.860

正如我在上面的评论中提到的，您需要使用可以从 Nuget 获得的最新版本的存储客户端库：http: [//nuget.org/packages/WindowsAzure.Storage/](http://nuget.org/packages/WindowsAzure.Storage/)。

这是示例代码：

```
open Microsoft.WindowsAzure.Storage
open Microsoft.WindowsAzure.Storage.Auth
open Microsoft.WindowsAzure.Storage.Blob

[<EntryPoint>]
let main argv = 
    let credentials = new StorageCredentials("accountname", "accountkey")
    System.Console.WriteLine(credentials.AccountName)
    let account = new CloudStorageAccount(credentials, true)
    System.Console.WriteLine(account.BlobEndpoint)
    let client = account.CreateCloudBlobClient();
    let container = client.GetContainerReference "$logs"
    System.Console.WriteLine(container.Uri)
    let blobs = container.ListBlobs("", true, BlobListingDetails.All, null, null);
    for blob in blobs do
        System.Console.WriteLine(blob.Uri)
    let response = System.Console.ReadLine()
    0 // return an integer exit code 
```

以上代码需要 Storage Client Library 2.0。

您只返回一项的原因是因为您正在调用`ListBlobs`没有参数的函数。如果您在此处查看此函数的定义 ( [http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.cloudblobcontainer.listblobs.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/microsoft.windowsazure.storage.blob.cloudblobcontainer.listblobs.aspx) )，您会发现可以通过将参数指定为 true 来获取 blob 容器中的所有 blob `useFlatBlobListing`（我在上面的代码中这样做了）。试一试，它会返回你的 blob 容器中所有 blob 的列表。

# c++ - 返回 std::vector 时出现“堆损坏”错误 从函数

> ID：16054814
> 
> 赞同：2
> 
> 时间：2013-04-17T08:10:09.560
> 
> 标签：c++, dll, stl, heap-corruption

我面临堆损坏错误：我有一个 dll 和 TestAPP。

1.  `vector<Point> vInPts;`// 测试应用程序 - 转储输入如下

    ```
    vInPts.push_back(Point(730,405));
    vInPts.push_back(Point(319,680));
    vInPts.push_back(Point(292,757));
    vInPts.push_back(Point(318,756));
    vInPts.push_back(Point(726,736));
    vInPts.push_back(Point(344,731)); 
    ```

2.  `vector<Point> vOutPts;`

3.  `vInPts`调用 DLL -> 将相同的向量复制到`vOutPts`DLL 中的向量” -> 从该函数返回到 TestApp 时 -> 出现堆错误。现在面临堆错误![在此处输入图像描述](https://i.stack.imgur.com/zVt78.png)

如何修复此堆错误？
提前致谢 ！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:23:00.447

`Point`阅读您的班级的实际定义会很有趣。它可以正确复制吗？

此外，由于您使用的是带有 STL 类的 DLL 和 EXE，请确保 DLL 和 EXE 都使用**动态链接**构建到**相同风格的 CRT**（例如，两者都使用相同版本的 C++ 编译器构建，并使用相同的设置，例如发布构建 DLL 和发布构建 EXE 等）

事实上，STL 类的*实现*在发布构建和调试构建中有所不同（例如，在调试构建中，诸如迭代器验证等检查的开销更大）。
如果一个 STL 类在 EXE 和 DLL 之间共享，它必须是*同一个*类，而不是同名的类但不同的实现。

# c# - 未在 MVC4 中的 DropDownListFor() 上设置选定值

> ID：16054830
> 
> 赞同：3
> 
> 时间：2013-04-17T08:10:52.107
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, razor, drop-down-menu

好像这个问题被问过太多次了。但这让我发疯。

这是我的（简化的）模型。

```
public class UserEditModel
{
    [Required]
    public string Title { get; set; }

    private IEnumerable<SelectListItem> _titleList;
    public IEnumerable<SelectListItem> TitleList
    {
        get { return _titleList.Select(x => new SelectListItem {
                            Selected = (x.Value == Title), 
                            Text = x.Text,
                            Value = x.Value
                        });
        }
        set { _titleList = value; }
    }
} 
```

成员中每个的`Text`和`Value`属性是相同的。例如：`SelectListItem``TitleList`

```
new SelectListItem { Text = "Mr", Value = "Mr"  } 
```

发布以下代码时，正确的`Title`值被绑定到模型，但是每当模型被推送到视图以响应 POST 或 GET 时，即使所有智能感知都显示，下拉列表中也不会设置所选值存在正确的值。

```
@Html.DropDownListFor(x => x.Title, Model.TitleList) 
```

我已经根据几篇文章和几个 SO 答案确保代码是正确的，所以我很难过。

有什么建议么？

**更新：**

为了完整起见，这是动作和支持方法：

```
[HttpGet]
public ActionResult Edit(int id)
{
    var user = _userService.Get(id);

    var model = new UserEditModel()
    {
        ...
        Title = user.Title,
        TitleList = ListTitles()
    };

    return View(model);
}

private IEnumerable<SelectListItem> ListTitles()
{
    var items = new[] {
            new SelectListItem() {Text = "Mr", Value = "Mr" },
            new SelectListItem() {Text = "Mrs", Value = "Mrs"},
            new SelectListItem() {Text = "Ms", Value = "Ms"},
            new SelectListItem() {Text = "Miss", Value = "Miss"},
            new SelectListItem() {Text = "Professor", Value = "Professor"},
            new SelectListItem() {Text = "Dr", Value = "Dr" }
        };

    return items;
} 
```

如您所见，没有什么花哨的，只是一个简单的实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:27:20.410

您需要添加`ModelState.Clear()`，因为默认情况下，从发布操作返回视图时，它认为验证失败，因此使用模型中的值`ModelState`而**不是**模型中的值。许多人认为这实际上是 MVC 中的一个**错误**，但这是设计使然：

> ASP.NET MVC 假定，如果您正在呈现一个 View 以响应 a `HttpPost`，并且您正在使用 Html Helpers，那么您很可能会重新显示一个验证失败的表单。因此，Html 助手在`ModelState`查看模型之前实际上会检查要在字段中显示的值。这使他们能够重新显示用户输入的错误数据，并在需要时显示匹配的错误消息。

[关联](http://blogs.msdn.com/b/simonince/archive/2010/05/05/asp-net-mvc-s-html-helpers-render-the-wrong-value.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T08:57:01.387

好吧，看起来代码实际上并没有什么问题，只是`Title`模型中的属性名称。

它看起来像是`Title`一个保留字，将其替换为`TitleX`或更恰当地`Salutation`使一切正常。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:32:18.410

您确定您在控制器中适当地检索了选择列表项吗？对我来说，它工作正常。我将使用 get 方法而不是属性 ( `GetTitleList(string value)`)，以避免在代码中进一步获取选择列表时出错。

# iphone - Scrollview 中的多个 CollectionViews

> ID：16054832
> 
> 赞同：2
> 
> 时间：2013-04-17T08:10:54.560
> 
> 标签：iphone, ios, scrollview, horizontal-scrolling, collectionview

我正在尝试创建一个以collectionview（group1）开头的水平滚动条，当滚动到达group1的末尾时，我需要另一个collectionview来翻页，依此类推。

我是新手，我不太清楚如何解决它。
我创建一个添加三个不同视图的滚动视图没有问题，但是由于 contentsize 设置如下：`self.scrollView.contentSize = CGSizeMake(320*[controllers count], 460);`

一个特定的视图只显示尽可能多的单元格，而在滚动时将其余单元格留在下一个视图之后。所以为了澄清这一点，我需要在滚动视图将我弹出到另一个集合视图之前滚动到一个集合视图中。

任何正确方向的帮助或指示将不胜感激。

# asp.net - 删除目录错误

> ID：16054838
> 
> 赞同：0
> 
> 时间：2013-04-17T08:11:09.853
> 
> 标签：asp.net, directory

我在我的代码中这样做：

```
Directory.Delete(MapPath("..\\Directory1"),true); 
```

现在我收到了这个错误：
System.IO.IOException：目录不为空。

我有什么错误的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:33:33.583

尝试删除要删除的目录中的所有文件和文件夹，然后删除该目录。

```
System.IO.DirectoryInfo projectDetailsInfo = new DirectoryInfo(pathofyourdirectory);

foreach (FileInfo file in projectDetailsInfo.GetFiles())
{
       file.Delete();
}
foreach (DirectoryInfo dir in projectDetailsInfo.GetDirectories())
{
  dir.Delete(true);
}
Directory.Delete(path); 
```

希望这会帮助你。

# python - 在python中查找字符串中是否存在单词

> ID：16054841
> 
> 赞同：0
> 
> 时间：2013-04-17T08:11:13.510
> 
> 标签：python

这是我需要帮助的一段代码。

```
listword=["os","slow"]
sentence="photos"
if any(word in sentence for word in listword):
    print "yes" 
```

它打印是，因为照片中存在 os。但是我想知道字符串中是否存在**os 作为“单词”而不是 os****作为单词的一部分**存在。有没有办法不将**句子转换为单词列表。**基本上我不希望程序打印是.只有当字符串包含 os **word**时，它才必须打印 yes 。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:13:40.673

您需要使用正则表达式，并`\b`在匹配时在每个单词周围添加单词边界锚点：

```
import re

if any(re.search(r'\b{}\b'.format(re.escape(word)), sentence) for word in listword):
    print 'yes' 
```

边界锚点匹配字符串的`\b`起点和终点，以及在单词和非单词字符之间存在过渡的任何地方（例如在空格和字母或数字之间，或在标点符号和字母或数字之间）。

该[`re.escape()`函数](http://docs.python.org/2/library/re.html#re.escape)确保所有正则表达式元字符都被转义，并且我们匹配的文字内容`word`并且不会意外地将其中的任何内容解释为表达式。

演示：

```
>>> listword = ['foo', 'bar', 'baz']
>>> sentence = 'The quick fox jumped over the barred door'
>>> if any(re.search(r'\b{}\b'.format(re.escape(word)), sentence) for word in listword):
...     print 'yes'
... 
>>> sentence = 'The tradition to use fake names like foo, bar or baz originated at MIT'
>>> if any(re.search(r'\b{}\b'.format(re.escape(word)), sentence) for word in listword):
...     print 'yes'
... 
yes 
```

通过使用正则表达式，您现在也可以不区分大小写地匹配：

```
if any(re.search(r'\b{}\b'.format(re.escape(word)), sentence, re.I) for word in listword):
    print 'yes' 
```

在这个演示中`the`，`mit`即使句子中的大小写不同，也符合条件：

```
>>> listword = ['the', 'mit']
>>> if any(re.search(r'\b{}\b'.format(re.escape(word)), sentence, re.I) for word in listword):
...     print 'yes'
... 
yes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:20:55.430

正如人们指出的那样，您可以使用正则表达式将字符串拆分为列表单词。这称为标记化。

如果正则表达式对你来说不够好，那么我建议看看[NTLK——](http://nltk.org/api/nltk.tokenize.html)一个 Python 自然语言处理库。它包含多种标记器，它们将根据空格、标点符号和其他可能难以用正则表达式捕获的特征来拆分您的字符串。

例子：

```
>>> from nltk.tokenize import word_tokenize, wordpunct_tokenize, sent_tokenize
>>> s = '''Good muffins cost $3.88\nin New York.  Please buy me
... two of them.\n\nThanks.'''
>>> wordpunct_tokenize(s)
['Good', 'muffins', 'cost', '$', '3', '.', '88', 'in', 'New', 'York', '.',
'Please', 'buy', 'me', 'two', 'of', 'them', '.', 'Thanks', '.']
>>> "buy" in wordpunct_tokenize(s)
True 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T08:27:35.257

`sentence`这很简单，如果字符串包含逗号则不起作用，但仍然

```
if any (" {0} ".format a in sentence for a in listword): 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:40:39.100

虽然我特别喜欢分词器和正则表达式解决方案，但我确实认为它们对于这种情况有点矫枉过正，只需使用[str.find() 方法](http://docs.python.org/2/library/string.html#string.find)就可以非常有效地解决。

```
listword = ['os', 'slow']
sentence = 'photos'
for word in listword:
    if sentence.find(word) != -1:
       print 'yes' 
```

尽管这可能不是最优雅的解决方案，但（在我看来）它仍然是最适合刚开始使用该语言的人的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-17T08:29:01.257

```
>>> sentence="photos"
>>> listword=["os","slow"]
>>> pat = r'|'.join(r'\b{0}\b'.format(re.escape(x)) for x in listword)
>>> bool(re.search(pat, sentence))
False
>>> listword=["os","slow", "photos"]
>>> pat = r'|'.join(r'\b{0}\b'.format(re.escape(x)) for x in listword)
>>> bool(re.search(pat, sentence))
True 
```

# java - java.lang.Error：未解决的编译问题

> ID：16054842
> 
> 赞同：-1
> 
> 时间：2013-04-17T08:11:15.790
> 
> 标签：java, colors

这是我的错误代码：

```
Exception in thread "main" : 
TextAttributes cannot be resolved to a type
TextAttributes cannot be resolved to a type
Console cannot be resolved to a type

    at Font.main(Font.java:8)

import java.awt.Color;
import enigma.console.*;
import enigma.core.Enigma;
public class Main
{
    public static void main(String[] args)
    {
        TextAttributes attrs = new TextAttributes(Color.BLUE, Color.WHITE);
        s_console.setTextAttributes(attrs);
        System.out.println("Hello World!");
    }
    private static final Console s_console;
    static
    {
        s_console = Enigma.getConsole("Hellow World!");
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:28:43.930

不要关注评论，他们是错误的。问题不在于您的导入，而在于您的环境。如果您在 IDE 中运行代码，请尝试清理您的环境。我只是尝试在控制台中编译和运行您的代码，它工作正常。

# java - java aes加密，输出比输入多一个块，并且没有填充

> ID：16054845
> 
> 赞同：-2
> 
> 时间：2013-04-17T08:11:33.673
> 
> 标签：java, size, aes, output

所以我正在处理这个任务，我应该使用预定义的 aes 函数制作我自己的 CBC 和 CTR 算法，现在我似乎有一个问题，输出的大小总是比输入大一个块（输入 64，输出 80 ，依此类推）这是我正在使用的代码，十六进制到字节转换和字节到十六进制：

```
public static String encrypt(String PT,String skey) throws Exception, NoSuchPaddingException {
      Cipher cipher = Cipher.getInstance("AES");
        SecretKeySpec key = new SecretKeySpec(skey.getBytes("ascii"), "AES");
        cipher.init(Cipher.ENCRYPT_MODE, key);
        byte[] val = hexToBytes(PT);
        byte[] encVal = cipher.doFinal(val);

        return byteToString(encVal);
} 
```

转换函数运行良好，val 大小为 n * 16 字节，encVal 大小为 (n+1) * 16 字节

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:23:55.403

这是由于填充。

```
Cipher.getInstance("AES"); 
```

对模式和填充使用特定于提供程序的默认值。对于 JDK 6 和 7，这将默认为`AES/ECB/PKCS5Padding`.

# php - 使用表单中的按钮传递值

> ID：16054848
> 
> 赞同：0
> 
> 时间：2013-04-17T08:11:39.597
> 
> 标签：php, html

我试图通过单击表单内的按钮来传递值。

下面是我的代码：

```
 <form action=deleteProduct.php?skuCode=".$row["skuCode"]." method=get><input type=submit name=delete value=Delete></form> 
```

但是从上面的代码中我想得到 skuCode=".$row["skuCode"]."。相反，传递的值是 delete=Delete。

我应该如何修改我的代码以获取 deleteProduct.php 中的 skuCode。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:32:33.000

试试这个：

```
<form action="deleteProduct.php" method="get">
    <input type="hidden" value="<?php echo $row["skuCode"] ?>" name="skuCode">
    <input type="submit" value="Delete">
</form> 
```

在`deleteProduct.php`页面中，您可以使用`$_GET['skuCode']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:21:43.240

看来您可能会将其全部输出到一个`echo`. 在这种情况下，解决方案将需要一些额外的行，因此最好将其更改为：

```
//close off PHP if required 
?>

<form action="deleteProduct.php" method="get">
    <input type="hidden" value="<?php echo $row['skuCode'] ?>" name="skuCode">
    <input type="submit" value="Delete">
</form>

<?php 
//resume PHP if need be 
```

达到这种效果的东西应该起作用。

我不是 100% 确定你的`$row["skuCode"]`部分是如何工作的。我猜它是 PHP 的？无论哪种方式，只需插入所需的值，但 HTML 应该这样做。

**小提琴：http:**
[//jsfiddle.net/rt9yc/](http://jsfiddle.net/rt9yc/)

在这个 jsfiddle 中，当我单击`delete`在我的检查器中打开的网络工具的按钮时，我看到一个请求：（`deleteProduct.php?skuCode=testSKU`“testSKU”是我在小提琴中使用的虚拟 SKU）

# pointers - 如何通过 Go 中的地图指针更改/访问地图实例的值？

> ID：16054855
> 
> 赞同：-2
> 
> 时间：2013-04-17T08:11:47.700
> 
> 标签：pointers, map, go

假设我们有代码：

```
var Cache_map *map[string]int

Cache_map = new(map[string]int) 
```

那我们要在里面加上key: & `type`value ，怎么办呢？`1``Cache_map`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:24:45.477

在这种情况下，不需要`new`,`make`或指向 map 的指针。骨架/示例：

```
package main

import "fmt"

var CacheMap = map[string]int{}

func main() {
        CacheMap["type"] = 1
        fmt.Printf("%#v\n", CacheMap)
} 
```

[操场](http://play.golang.org/p/2uXk6H4VdS)

* * *

输出：

```
map[string]int{"type":1} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T10:54:21.893

如果你真的，真的需要这样做，例如，

```
package main

import "fmt"

func main() {
    var Cache_map *map[string]int
    Cache_map = new(map[string]int)
    *Cache_map = make(map[string]int)
    (*Cache_map)["type"] = 1
    fmt.Println(*Cache_map)
} 
```

输出：

```
map[type:1] 
```

# php - DomXPath 与 DOMDocument 以获取类 URL

> ID：16054856
> 
> 赞同：0
> 
> 时间：2013-04-17T08:11:48.733
> 
> 标签：php, domdocument, domxpath

我正在编写一个小爬虫脚本，它将找到具有特定类名的图像 URL。我知道我的 cURL 和 DOMDocument 运行正常，甚至是 DomXPath 真的（据我所知，没有错误）但我正在努力弄清楚如何获取 xpath 查询结果的 URL。

到目前为止我的代码：

```
$dom = new DOMDocument();
@$dom->loadHTML($x);

$xpath = new DomXpath($dom);
$div = $xpath->query('//*[@class="productImage"]');

var_dump($div);
echo $div->item(0); 
```

如果我 var_dump($x) 页面输出没有问题。所以 CURL 工作正常。但我不知道如何获取 $div 中包含的数据。我正在尝试查找具有“productImage”类的图像，如下所示：

```
<img src="/uploads/5W/yP/5WyPP4l7Z-jmZRzu_MJ6zg/1077-d.jpg" border="1" alt="Album" class="productImage"> 
```

我想要那个图像标签的来源。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:15:07.577

```
$dom = new DOMDocument();
$dom->loadHTML($x);

$xpath = new DomXpath($dom);
$imgs  = $xpath->query('//*[@class="productImage"]');

foreach($imgs as $img)
{
    echo 'ImgSrc: ' . $img->getAttribute('src') .'<br />' . PHP_EOL;
} 
```

试试那个...

== 编辑：附加信息 ==

我在这里使用循环的原因是因为你可能会发现不止一个 img。如果您知道只有一个元素（或者您希望找到第一个 dom 节点），您可以通过 domnodelist 的 item 方法从 domnodelist 访问 elelement - 如下所示：

```
$dom = new DOMDocument();
$dom->loadHTML($x);

$xpath = new DomXpath($dom);
$img   = $xpath->query('//*[@class="productImage"]');

echo 'ImgSrc: ' . $img->item(0)->getAttribute('src') .'<br />' . PHP_EOL; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-17T08:19:33.113

您实际上不需要在这里使用 XPath，因为您似乎只是在寻找图像，这可以通过 using 来完成[`DOMDocument::getElementsByTagName()`](http://www.php.net/manual/en/domdocument.getelementsbytagname.php)，然后是一个简单的过滤器：

```
foreach ($dom->getElementsByTagName('img') as $image) {
    $class = $image->getAttribute('class');
    if (strpos(" $class ", " productImage ") !== false) {
        $url = $image->getAttribute('src');
        // do stuff
    }
} 
```

然后，您可以`src`使用以下方法获取属性[`DOMElement::getAttribute()`](http://www.php.net/manual/en/domelement.getattribute.php)：

```
echo $image->getAttribute('src'); 
```

# load-testing - Tsung：在循环中使用迭代器

> ID：16054865
> 
> 赞同：4
> 
> 时间：2013-04-17T08:12:04.827
> 
> 标签：load-testing, tsung

我正在尝试为`ejabberd`with创建负载测试场景`tsung`。

我想模拟来自数千个客户端的数千个 XMPP 事件。根据 tsung 的[手册](http://tsung.erlang-projects.org/user_manual.html#htoc68)`for`，我可以使用循环创建重复动作：

```
<for from="1" to="10" incr="1" var="counter">
  [...]
  <request> <http url="/page?id=%%_counter%%"></http> </request>
  [...]
</for> 
```

但是这个例子对我不起作用：

```
alex@alex:~/.tsung$ tsung -f jabber.xml start
Starting Tsung
"Log directory is: /home/alex/.tsung/log/20130417-1404"
3306- fatal: {error,{validity_constraint_Name_Token,37}}
Config Error, aborting ! {fatal,{{error,{validity_constraint_Name_Token,37}},
                                 {file,"jabber.xml"},
                                 {line,10},
                                 {col,29}}} 
```

完整的配置文件：

```
<?xml version="1.0"?>
<!DOCTYPE tsung SYSTEM "/usr/share/tsung/tsung-1.0.dtd">
<tsung loglevel="notice" version="1.5">
    <clients>
        <client host="localhost" use_controller_vm="true"></client>
    </clients>
    <!-- Server side setup -->
    <servers>
        <for from="1" to="1000" incr="1" var="counter">
            <server host="t%%_counter%%.testserver.org" port="5222" type="tcp"></server>
        </for>
    </servers>
    <load>
        <arrivalphase phase="1" duration="1" unit="minute">
            <users interarrival="2" unit="second"></users>
        </arrivalphase>
    </load>
    <!-- JABBER parameters -->
    <!-- to synchronise users,  use a global acknoledgement -->
    <options>
        <option type="ts_jabber" name="global_number" value="100"></option>
        <option type="ts_jabber" name="userid_max" value="10000"></option>
        <option type="ts_jabber" name="domain" value="mydomain.org"></option>
        <option type="ts_jabber" name="username" value="user"></option>
        <option type="ts_jabber" name="passwd" value="pass"></option>
    </options>
    <sessions>
        <session probability="100" name="jabber-loadtest" type="ts_jabber">
            <request><jabber type="presence:broadcast" show="online" status="Status: online" ack="no_ack"/></request>
            <thinktime value="1"></thinktime>
            <request><jabber type="presence:broadcast" show="offline" status="Status: offline" ack="no_ack"/></request>
        </session>
    </sessions>
</tsung> 
```

如何在`tsung`配置文件中使用循环？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-19T19:49:44.583

您不能在`<servers>`部分中使用循环，循环`<session>`仅在中可用。

# python - 如何在python中将列表转换为带引号的字符串

> ID：16054870
> 
> 赞同：4
> 
> 时间：2013-04-17T08:12:26.160
> 
> 标签：python, string, type-conversion

我有一个列表并希望它作为带引号的字符串 `mylist = [1,2,3]`

要求 O/P 为 `myString = "'1','2','3'"`

我试过了`mystring = '\',\''.join(mylist)`

它给了我结果

`mystring = "1','2','3"`

第一个和最后一个引号 (') 丢失

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-17T08:13:30.327

到目前为止，这似乎是唯一不是黑客的解决方案......

```
>>> mylist = [1,2,3]
>>> ','.join("'{0}'".format(x) for x in mylist)
"'1','2','3'" 
```

这也可以更简洁地写成：

```
>>> ','.join(map("'{0}'".format, mylist))
"'1','2','3'" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-17T08:46:51.490

```
>>> mylist = [1,2,3]
>>> str([str(x) for x in mylist]).strip("[]")
"'1','2','3'" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-17T08:16:42.397

作为一个简单的黑客，你为什么不..

```
mystring = "'%s'" %"','".join(mylist) 
```

将命令的结果用引号括起来？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:24:29.253

你也可以这样做

```
mylist = [1, 2, 3]
mystring = str(map(str, mylist)).strip("[]") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-09-05T02:00:43.923

OR regular `repr`:

```
>>> l=[1,2,3]
>>> ','.join(repr(str(i)) for i in l)
"'1','2','3'"
>>> 
```

# c++ - COM dll 服务器和 COM exe 服务器有什么区别？

> ID：16054871
> 
> 赞同：3
> 
> 时间：2013-04-17T08:12:27.073
> 
> 标签：c++, visual-c++, com, atl

我想知道我们如何决定我们必须使用 COM dll 服务器还是 COM exe 服务器。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:44:31.837

COM DLL 服务器称为 INPROC 服务器，它作为动态库加载到调用者进程中。一般来说，与 INPROC 服务器的通信更有效，因为它不必进行 RPC。

COM EXE 服务器可以是本地的，也可以是远程的，但在这两种情况下，通信都是通过远程过程调用完成的，所以它更重。

如果您没有特定要求，我总是会选择 INPROC 服务器（COM DLL），因为它更高效且更易于调试，因为它在同一个进程中工作。

# c# - 只需要两个文本框之一（自定义验证器）

> ID：16054872
> 
> 赞同：2
> 
> 时间：2013-04-17T08:12:27.547
> 
> 标签：c#, asp.net

**说明：**我有两个文本框，用户可以选择填写，但用户必须至少填写其中一个。

**预期结果：**显示错误消息 **意外结果：**未显示错误消息

HTML：

```
<asp:TextBox ID="TB1" runat="server" /> 
<asp:CustomValidator ID="CV1" ControlToValidate="TB1" runat="server" OnServerValidate="blabla" ErrorMessage="one of two required" />
<asp:TextBox ID="TB2" runat="server" />
<asp:CustomValidator ID="CV2" ControlToValidate="TB2" runat="server" OnServerValidate="blabla" ErrorMessage="they cant both be blank" /> 
```

C＃：

```
protected void blabla(object sender, ServerValidateEventArgs e)
{
    if (TB1.Text.Length == 0 && TB2.Text.Length == 0)
        e.IsValid = false; 
    else
        e.IsValid = true; 
} 
```

请你能帮忙解释一下为什么这不是工作人员吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-17T08:22:32.727

两者只需要一个`CustomValidator`。它是唯一一个您可以省略这种`ControlToValidate`情况的验证器。

aspx：

```
<asp:TextBox ID="TB1" runat="server" /> 
<asp:TextBox ID="TB2" runat="server" />
<asp:CustomValidator ID="CV1"runat="server" 
    OnServerValidate="ServerValidation" 
    ErrorMessage="one of two required" /> 
```

代码隐藏：

```
protected void ServerValidation(object source, ServerValidateEventArgs args)
{
    args.IsValid = TB1.Text.Trim().Length > 0 || TB2.Text.Trim().Length > 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:22:26.767

`&&`意味着`and`如果两个长度都是 0 那么它是无效的，试试

```
bool b = false;
if (TB1.Text.Length != 0)
b = true;

if (TB2.Text.Length != 0)
b = true;

e.IsValid = b; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:29:46.940

尝试这个：

```
protected void blabla(object sender, ServerValidateEventArgs e)
{
    if (string.IsNullOrEmpty(TB1.Text) && string.IsNullOrEmpty(TB2.Text))
        e.IsValid = false;
    else
        e.IsValid = true;
} 
```

使用`ValidationGroup`属性也很有用：

```
<asp:TextBox ID="TB1" runat="server" /> 
<asp:CustomValidator ID="CV1" ControlToValidate="TB1" runat="server" OnServerValidate="blabla" ErrorMessage="one of two required" validationgroup="validationGroup" />
<asp:TextBox ID="TB2" runat="server" />
<asp:CustomValidator ID="CV2" ControlToValidate="TB2" runat="server" OnServerValidate="blabla" ErrorMessage="they cant both be blank" validationgroup="validationGroup" />

<asp:button id="ValidateButton" text="Validate" validationgroup="validationGroup" runat="server"/> 
```

# php - jQueryUI 对话框在通过 jQuery.load 加载的页面中不起作用

> ID：16054873
> 
> 赞同：0
> 
> 时间：2013-04-17T08:12:28.103
> 
> 标签：php, jquery, jquery-ui

我尝试了 jQuery UI 对话框的示例代码并让它工作——将该文件保存为 page1.html。但是，当我尝试通过 jQuery.load 将该页面加载到 PHP 页面的容器 div（数据容器）时，这是可行的，page1 将无法工作，甚至显示应该隐藏的所有内容。

两个页面都有其 CSS 和 js 集。有没有办法让那些 css/js 不妨碍彼此的页面？还是当您使用 jquery 的加载功能时，加载的页面使用父级（PHP 页面）加载的 css/js？如果是这种情况，我该如何解决我的这个问题？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T01:34:30.077

知道了！在接受了anpsmn在上述评论中提出的建议后，因为之后仍然没有工作，我所做的是，我将page1.html中对话框的css / js引用移至父页面（PHP页面）。

因此，包含此代码的 js：

```
$('#data-container').load('page1.html', function() { $( "#dialog" ).dialog(<my dialog stuff>); }); 
```

被移动到从父页面（PHP 页面）而不是 page1.html 中引用。我认为这是有道理的，因为对话框是在页面（page1.html）加载到父页面后初始化的。

感谢您在这里提出我的第一个问题，这是一次很好的体验。希望能学到更多，并希望能回答一个问题，然后再回答一些问题。^^;

# javascript - 动态输入的 Google Places 自动完成功能

> ID：16054875
> 
> 赞同：4
> 
> 时间：2013-04-17T08:12:29.167
> 
> 标签：javascript, dynamic, google-maps-api-3, autocomplete, google-places-api

再会。

我正在尝试使用以下代码在动态创建的输入上添加 Google Places Autocomplete：

```
<html>
<head>
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
<script type="text/javascript">
var _autoComplCounter = 0;

function assignAutoCompl(_id)
{
    var _autocomplete = new google.maps.places.Autocomplete(document.getElementById(_id));
    _autocomplete.setTypes(['geocode']);
    google.maps.event.addListener(_autocomplete, 'place_changed', function()
    {
        //processing code
    });
}

function CreateElem()
{
    var _id = "AutoCompl" + _autoComplCounter;
    _autoComplCounter++;

    var container = document.getElementById('AutoComplInputs');
    container.innerHTML += "<br>" + _id;

    var _elem_for_upd = document.createElement("input");
    _elem_for_upd.type = "text";
    _elem_for_upd.id = _id;
    container.appendChild(_elem_for_upd);

    assignAutoCompl(_id);
}
</script>
</head>
<body>
    <div id="AutoComplInputs"></div>
    <input type='button' value='Add' onclick='CreateElem();'>
</body>
</html> 
```

但是，当我按下按钮时，自动完成功能仅适用于最后一次输入，并且所有先前的输入都会损坏。我认为它可以连接到输入的动态创建，因为下面的代码可以正常工作：

```
<html>
<head>
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
<script type="text/javascript">
var _autoComplCounter = 0;

function assignAutoCompl(_id)
{
    document.getElementById(_id).hidden = false;
    var _autocomplete = new google.maps.places.Autocomplete(document.getElementById(_id));
    _autocomplete.setTypes(['geocode']);
    google.maps.event.addListener(_autocomplete, 'place_changed', function()
    {
        //processing code
    });
}

function CreateElem()
{
    assignAutoCompl("AutoCompl0");
    assignAutoCompl("AutoCompl1");
}
</script>
</head>
<body>
    <div id="AutoComplInputs">
        <input id="AutoCompl0" type="text" hidden>
        <input id="AutoCompl1" type="text" hidden>
    </div>
    <input type='button' value='Add' onclick='CreateElem();'>
</body>
</html> 
```

我不明白我做错了什么......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:38:50.620

不要用于`innerHTML`向 中添加内容`container`，您将丢失绑定到现有元素的所有处理程序。

改用 appendChild：

```
container.appendChild(document.createElement('br'));
container.appendChild(document.createTextNode(_id)); 
```

# ruby - 在块中截取def

> ID：16054876
> 
> 赞同：3
> 
> 时间：2013-04-17T08:12:31.457
> 
> 标签：ruby, metaprogramming

我有一个方法需要在附加的块上做一些巫术。这种块的样本可能是

```
myMethod do 

   somemethod x
   someother y
   def name(a,b)
     a+b
   end
end 
```

前两个方法调用 (`somemethod x`和`someother y`) 应该正常执行。但是，我想在不实际定义新方法的情况下截取方法定义（作为 S 表达式）。如果我将整个块转换为 S 表达式然后搜索 AST，我可以做到这一点。但是，我需要弄清楚如何调用这些方法。任何一个的解决方案都可以。那是要么

*   截取定义，转换为S-expression（Ruby2Ruby能看懂的）
*   将块转换为 S 表达式并找到方法调用并执行这些

**编辑** 我正在寻找的 AST 类似于

```
[:defn,
 :name,
 [:args,:a,:b],
 [:call,
     [lvar,:a],
     :+
     [lvar,:b]]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T15:38:53.457

如果我理解正确，您希望能够在传递给另一个方法的代码块中定义一个方法，但拦截该内部方法定义，以便它实际上没有被定义，而是转换为 S 表达式？所以你希望它的行为几乎就像它被注释掉并且一些外部过程已经通过源代码并将实现解析成一个 S 表达式？

就像是：

```
myMethod do 

   somemethod x
   someother y
   # def name(a,b)
   #   a+b
   # end
end 
```

where `somemethod`and `someother`still execute, 的实现`name`被定义，但被 Ruby 解释器忽略。然后，您想以某种方式将此实现捕获为 S 表达式。通过将其注释掉，显然不会这样做，但它是我描绘行为的好方法。

好吧，RubyParser gem 可能会做你想做的事。它利用了将“here document”作为字符串传递给方法的能力，如下例所示：

```
def x (str)
  str
end

x( <<-EOF )
this is
   a here
document
EOF

# => "this is\n   a here\ndocument\n" 
```

使用 RubyParser，您可以执行以下操作：

```
require 'ruby_parser'
require 'pp'

pp RubyParser.new.parse( <<-EOF )
def plus(x,y)
  x+y
end
EOF
# => s(:defn, :name, s(:args, :a, :b), s(:call, s(:lvar, :a), :+, s(:lvar, :b))) 
```

那么，将它与您想要的代码合并将是一件小事，如下所示：

```
require 'ruby_parser'

def myMethod
  x = yield
end

def somemethod( x )
  puts x
end

def someother( y )
  puts y
end

x = 'magic'
y = 'output'

sexp = myMethod do
  somemethod x
  someother y
  RubyParser.new.parse( <<-EOF )
  def name(a,b)
    a+b
  end
  EOF
end

pp sexp
name(1,2)
# magic
# output
# s(:defn, :name, s(:args, :a, :b), s(:call, s(:lvar, :a), :+, s(:lvar, :b)))
# NoMethodError: undefined local variable or method 'name' for main:Object 
```

如您所见，方法定义本质上只是一个字符串，并且可以这样操作。

# java - 无法将 admob 代码添加到我的应用程序？

> ID：16054883
> 
> 赞同：0
> 
> 时间：2013-04-17T08:12:47.347
> 
> 标签：java, android

我正在尝试使用本教程将 AdMob 广告集成到我的 Android 应用中

[http://www.wikihow.com/Add-Advertisements-to-Your-Android-Applications-Using-Admob](http://www.wikihow.com/Add-Advertisements-to-Your-Android-Applications-Using-Admob)

但问题是在完成每一步之后我的应用程序在启动时关闭

为什么？

布局xml文件

```
<?xml version="1.0" encoding="utf-8"?>
   <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
       xmlns:ads= "http://schemas.android.com/apk/lib/com.google.ads" 
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:layout_gravity="bottom"
       android:background="@drawable/background" >

    <com.google.ads.AdView
            android:id="@+id/adView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            ads:adSize="BANNER"
            ads:adUnitId="MYID"
            ads:loadAdOnCreate="true" >
 </com.google.ads.AdView> 
```

这是目录

```
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2070)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2095)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.ActivityThread.access$600(ActivityThread.java:137)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1206)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.os.Looper.loop(Looper.java:213)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.ActivityThread.main(ActivityThread.java:4786)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at java.lang.reflect.Method.invokeNative(Native Method)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at java.lang.reflect.Method.invoke(Method.java:511)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:789)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:556)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at dalvik.system.NativeStart.main(Native Method)
04-17 11:10:46.018: E/AndroidRuntime(19320): Caused by: android.view.InflateException: Binary XML file line #76: Error inflating class com.google.ads.AdView
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:749)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:262)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.Activity.setContentView(Activity.java:1867)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at net.alien.relaxhdfree.Main.onCreate(Main.java:12)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.Activity.performCreate(Activity.java:5008)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2034)
04-17 11:10:46.018: E/AndroidRuntime(19320):    ... 11 more
04-17 11:10:46.018: E/AndroidRuntime(19320): Caused by: java.lang.ClassNotFoundException: com.google.ads.AdView
04-17 11:10:46.018: E/AndroidRuntime(19320):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
04-17 11:10:46.018: E/AndroidRuntime(19320):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
04-17 11:10:46.018: E/AndroidRuntime(19320):    ... 23 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:19:50.927

我解决了 admob jar 文件必须添加到项目`libs`文件夹中`referenced libraries`

# delphi - 为什么类方法使用self时Delphi编译器不抛出警告？

> ID：16054887
> 
> 赞同：4
> 
> 时间：2013-04-17T08:12:56.723
> 
> 标签：delphi

在我的工作场所，我们有一些`class function`s 引用的代码`Self`，如果对象未初始化，则有效地创建潜在的访问冲突。`Self`类方法中更改的含义是否为引用类而不是对象？

我认为这是有效的唯一原因是因为`Self`引用另一个`class function`而不是常规方法。

我创建了以下测试类：

```
constructor TTest.Create;
begin
  FTest := 'Hej';
end;

procedure TTest.GoTest;
begin
  ShowMessage(FTest);
end;

class procedure TTest.Test;
begin
  Self.GoTest;
end; 
```

但是，编译它会引发错误：

```
[dcc32 Error] Unit1.pas(51): E2076 This form of method call only allowed for class methods or constructor 
```

我还测试了直接引用 FTest，这给出了另一个错误：

```
[dcc32 Error] Unit1.pas(51): E2124 Instance member 'FTest' inaccessible here 
```

但是我想知道，`Self`在类方法中是否有可能存在潜在危险的情况。

我知道，引用全局对象并假设它们存在总是不好的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:22:33.913

> Self 在类方法中的含义是否改变为引用类而不是对象？

在一个类中方法`Self`是指类。[文档](http://docwiki.embarcadero.com/RADStudio/en/Methods#Class_Methods)说：

> 在类方法的定义声明中，标识符 Self 表示调用该方法的类（可以是定义它的类的后代）。如果在类 C 中调用该方法，则 Self 属于C 的类型类。因此，您不能使用 Self 访问实例字段、实例属性和普通（对象）方法。您可以使用 Self 调用构造函数和其他类方法，或访问类属性和类字段。
> 
> 可以通过类引用或对象引用来调用类方法。当通过对象引用调用时，对象的类就变成了Self的值。

编译器不会反对您使用，`Self`因为这是合法且受支持的事情。当您尝试使用实例成员、实例方法等时，它只会抱怨。

`Self`在类方法中具有此含义，其原因与它存在于实例方法中的原因完全相同。它允许您完全指定一个符号，从而避免范围模糊。更重要的是，它允许您访问调用该方法的实际类。这可能是定义该方法的类的后代。

> 但是，我想知道`Self`在类方法中是否有可能存在潜在危险的情况。

我没有看到这部分语言固有的任何特殊危险。事实上，使用`Self`减少了范围，因此减少了无意中引用局部变量而不是类成员的危险。

# iphone - 从 NSMutableArray 读取会在第 2 项中引发异常，即使它存在

> ID：16054889
> 
> 赞同：0
> 
> 时间：2013-04-17T08:12:59.020
> 
> 标签：iphone, ios, objective-c

我有一个包含一堆字符串的文件，如下所示：

```
 item1,01-SR,admin,Missing or broken,undefined, 16/04/2013 18:10:10;
 item1,03-SR,admin,In Use,undefined, 16/04/2013 18:10:34;
 item1,01-SR,admin,In Use,undefined, 16/04/2013 18:10:45;
 item1,02-SR,admin,In Use,undefined, 16/04/2013 18:10:49;
 item1,05,admin,In Use,undefined, 16/04/2013 18:10:56; 
```

我正在读取字符串，然后将它们拆分，所以我一次只得到一个字符串。然后我想再次拆分我得到的字符串，所以每个 CSV 都是它自己的变量。我已经尝试过这样（numLines 是文件中行数的计数）：

```
 while (count1 < numLines) {
      NSString *message = [[strings objectAtIndex: count1] copy];

      NSMutableArray *items = [[fileContents componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@";"]] mutableCopy];

      NSString *items1 = [[items objectAtIndex: count1] copy];

      NSLog(@"items: %@", items1);

      NSMutableArray *inditems = [[items1 componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@","]] mutableCopy];

      NSString * item1 = inditems[0];
      NSString * bnum1 = inditems[1];
      NSString * user1 = inditems[2];
      NSString * state1 = inditems[3];
      NSString * gender1 = inditems[4];
      NSString * tstamp1 = inditems[5];

      NSLog(@"item: %@", item1);
      NSLog(@"bnum: %@", bnum1);
      NSLog(@"user: %@", user1);
      NSLog(@"state: %@", state1);
      NSLog(@"gender: %@", gender1);
      NSLog(@"tstamp: %@", tstamp1);

      count1++;
} 
```

现在，这可以从文件中选择一行并将前两项放入数组中，然后将 item1 和 bnum1 的值写入日志，但随后由于某种原因引发异常。现在这通常会向我暗示数组中不存在第 2 项，所以我做了这样的计数：

```
 NSLog(@"count = %d", [inditems count]); 
```

哪个正确返回 6。然后我想检查它是否真的可以从数组中读取另一个项目，所以我做了：

```
 NSString *tstamp1 = [[inditems lastObject] copy]; 
```

正确记录时会返回如下时间戳：

```
 16/04/2013 18:10:10 
```

所以我认为“哦，至少第 5 项有效”并尝试获取该项目：

```
 while (count1 < numLines) {
      NSString *message = [[strings objectAtIndex: count1] copy];

      NSMutableArray *items = [[fileContents componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@";"]] mutableCopy];

      NSString *items1 = [[items objectAtIndex: count1] copy];

      NSLog(@"items: %@", items1);

      NSMutableArray *inditems = [[items1 componentsSeparatedByCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@","]] mutableCopy];

      NSString * item1 = inditems[0];
      NSString * bnum1 = inditems[1];
      NSString * tstamp1 = inditems[5];

      NSLog(@"item: %@", item1);
      NSLog(@"bnum: %@", bnum1);
      NSLog(@"tstamp: %@", tstamp1);

      count1++;
} 
```

但这也会引发异常！我可能在这里做一些愚蠢的事情，但我会很感激任何帮助。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:48:51.213

我的猜测是您的 NSArray *strings 包含导致错误的空值。你需要先检查它，然后再做你的逻辑。

```
//path is your file path
NSString* fileContents = [NSString stringWithContentsOfFile:path encoding:NSUTF8StringEncoding error:nil];
NSArray *strings = [fileContents componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];
for (int i = 0; i < [strings count]; i++){
   if (![[strings objectAtIndex:i] isEqualToString:@""]){
   //Here do your code...
   }
} 
```

# sql - 如何在 Oracle REGEXP_REPLACE 函数中将括号替换为连字符？

> ID：16054892
> 
> 赞同：1
> 
> 时间：2013-04-17T08:13:21.040
> 
> 标签：sql, regex, oracle

我是正则表达式的新手。我想将 (,),[,] 之类的任何文本字符串符号替换为连字符（例如）：

```
SELECT REGEXP_REPLACE ('(<FIO>)', '(', '-') FROM dual; 
```

这给了我 ORA-12725 错误。

请解释一下，怎么了？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-17T08:23:25.590

要替换符号，请使用该[`TRANSLATE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions216.htm#SQLRF06145)函数，它比正则表达式函数占用更少的处理器：

```
SQL> SELECT translate ('(<FIO>)', '()[]', '----') replaced FROM dual;

REPLACED
--------
-<FIO>- 
```

正则表达式更通用，可以做更复杂的事情，但成本更高。在这种情况下，用另一个字符替换一个字符可以通过专门的函数更有效地完成。如果你真的想使用正则表达式，你可以使用[`REGEXP_REPLACE`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions149.htm#i1305521)：

```
SQL> SELECT regexp_replace ('[(<FIO>)]', '[]()[]', '-', 1, 0) reg FROM dual;

REG
---------
--<FIO>-- 
```

更新：如果您只想替换第一个符号，则 translate 将不起作用。相反，使用：

```
SQL> SELECT regexp_replace ('[(<FIO>)]', '[]()[]', '-', 1, 1) reg FROM dual;

REG
---------
-(<FIO>)] 
```

# php - PHP中布尔表达式的类型转换

> ID：16054896
> 
> 赞同：-1
> 
> 时间：2013-04-17T08:13:33.243
> 
> 标签：php, casting, expression

我有 3 种不同的行为：

```
var_dump((int) true); // returns 1

var_dump((int) true && true); // returns true

var_dump((int) (true && true)); // returns 1 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:16:07.377

因为先进行强制转换，然后进行 AND 操作，所以你最终得到 1 && true 这是真的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:17:31.583

```
(int)true && true;

 // same as:
 ((int) true) && true;

 // same as:
 1 && true; // = true 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:17:36.017

```
(int) true 
```

将 TRUE 转换为整数（给出 1）

```
(int) true && true 
```

将第一个 TRUE 转换为整数（给出 1），然后与第二个 TRUE 进行与运算（将 1 重新转换为布尔值）给出 TRUE

```
(int) (true && true) 
```

AND TRUE 和 TRUE（给出 TRUE），然后转换为整数（给出 1）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-17T08:17:40.333

在第一种情况下，简单的类型转换将起作用

```
var_dump((int) true); // returns 1 
```

在第二种情况下，第一个参数将首先进行类型转换，然后执行 && 操作，该操作将返回 ... 像往常一样 true

```
var_dump((int) true && true); // returns true 
```

在第三种情况下，首先执行返回 true 的操作，然后执行类型转换操作，将 true 转换为 1

```
var_dump((int) (true && true)); // returns 1 
```

# matlab - 生成1到10之间的随机数，matlab中的单个数字除外

> ID：16054897
> 
> 赞同：12
> 
> 时间：2013-04-17T08:13:33.647
> 
> 标签：matlab

例如，我想生成一个介于 1 和 10 之间的随机数，`randi([1,10])`但我想排除一个数字，比如 7 - 这个数字总是会改变并在一个名为`b`.

有可能以某种方式做到吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-17T08:18:52.913

使用[`randsample`](http://www.mathworks.com/help/stats/randsample.html). 例如，要生成 1 到 10 之间的数字（不包括 7），请执行以下操作：

```
b = 7;
x = randsample(setdiff(1:10, b), 1); 
```

这里[`setdiff`](http://www.mathworks.com/help/matlab/ref/setdiff.html)用于`b`从向量中排除 的值`1:10`。

如果您没有安装统计工具箱，您将无法使用`randsample`，因此请使用[`rand`](http://www.mathworks.com/help/matlab/ref/rand.html)：

```
v = setdiff(1:10, b);
x = v(ceil(numel(v) * rand)); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-17T08:33:35.973

For those without the statistics toolbox:

```
b = 7;
pop = 1:10;
pop(b) = []; 
```

then

```
pop(randperm(9,1)) 
```

or for `n` random integers from the population:

```
pop(randi(numel(pop), 1, n)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-17T08:36:06.123

正如@EitanT 提到的，您可以`randsample`这样做，但我认为以更简单的方式这样做应该适合您：

```
>> b = 7;
>> randsample([1:b-1,b+1:10],1) 
```

这只是从数组中采样一个随机值，`[1:b-1,b+1:10]`这里是

```
1     2     3     4     5     6     8     9    10 
```

或者类似地，如果@EitanT 提到的“randsample”函数不可用，

```
v = [1:b-1,b+1:10];
x = v(ceil(numel(v) * rand)); 
```

# linux - 从 crontab 执行时，sudo 密码自动化未按预期工作？

> ID：16054900
> 
> 赞同：1
> 
> 时间：2013-04-17T08:13:40.883
> 
> 标签：linux, bash, crontab

我有一个shell脚本如下。

abc.sh

```
echo "Password" | sudo -S /etc/init.d/mysqld status 
```

当我直接从 shell 执行时，它工作正常。当我尝试执行与**cron (crontab)**相同的操作时，我的问题就出现了，它不起作用。sudo -S 选项不适用于 crontab。是否有任何其他选项可以在 shell 脚本中指定 sudo 密码（自动化）

如果我有 root 访问权限，我可以尝试通过添加 NOPASSWD 选项来修改 /etc/sudoers 文件。但不幸的是，我没有 root 权限来修改 /etc/sudoers 文件。我只有执行某些命令的 sudo 访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T15:53:07.650

Sudo -S 似乎适用于我的 Ubuntu 12.04：

```
# m h  dom mon dow   command
 * * * * * cat /etc/shadow > /tmp/shadow.txt 2>&1 
```

结果是：

```
$ cat /tmp/shadow.txt 
cat: /etc/shadow: Permission denied 
```

然而

```
# m h  dom mon dow   command
* * * * * echo 'password' | sudo -S cat /etc/shadow > /tmp/shadow.txt 2>&1 
```

结果是：

```
$ head /tmp/shadow.txt 
[sudo] password for user: root:!:15736:0:99999:7:::
daemon:*:15453:0:99999:7:::
bin:*:15453:0:99999:7:::
... 
```

**编辑**：

这是让上述 Ubuntu 代码在 CentOS 6.4 上运行的 hack：

```
* * * * * export DISPLAY=:0 && gnome-terminal -e 'bash -c "echo password | sudo -S cat /etc/shadow > /tmp/shadow 2>&1"' 
```

# ruby - 我可以将正则表达式与guard-concat一起使用吗？

> ID：16054903
> 
> 赞同：1
> 
> 时间：2013-04-17T08:13:59.523
> 
> 标签：ruby, guard

我正在使用guard-concat 插件来连接我的车把模板文件。

我可以使用正则表达式来连接一个文件夹中的所有文件，而不是输入所有文件的名称吗？

所以不要这样做：

```
guard :concat, type: "php", files: %w(a b b/c b/d), input_dir: "app/views/handlebars",     output: "app/views/handlebars/all" 
```

我可以这样做：

```
guard :concat, type: "php", files: %r{.+}, input_dir: "app/views/handlebars", output: "app/views/handlebars/all" 
```

当我这样做时，我收到以下错误：

```
ERROR - Invalid Guardfile, original error is: > [#] undefined method `join' for /.+/:Regexp 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T08:43:26.000

Francesco Canessa（负责守卫连接）告诉我

> 我可以实现此功能，但通常文件顺序对于 CSS 和 JS 都很重要（例如对于需要首先加载库的代码）

所以这在今天是不可能的，但可能会在未来的版本中添加。

[链接到guard-concat github页面上的问题](https://github.com/makevoid/guard-concat/issues/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T08:54:42.670

您可以使用[`Dir#glob`](http://ruby-doc.org/core-2.0/Dir.html#method-c-glob)（或别名`Dir#[]`）：

```
Dir['*/**.php'] 
```

作为论据。它将返回包含所有`.php`子文件夹中所有扩展名的文件的数组。

# blackberry - 浏览器提交的链接点击事件

> ID：16054904
> 
> 赞同：1
> 
> 时间：2013-04-17T08:14:00.837
> 
> 标签：blackberry, browserfield

您好我正在使用 Eclipse IDE 在 Blackberry java 中开发应用程序。我在屏幕上添加了一个浏览器归档。并且Browser Filed 包含许多link()。我想知道用户单击了哪个链接并为每个链接执行操作。我的问题是如何获得浏览器归档链接的点击事件。

# java - Java Reporting Framework - 导出到 Excel、PDF 并邮寄

> ID：16054915
> 
> 赞同：5
> 
> 时间：2013-04-17T08:14:23.337
> 
> 标签：java, reporting

报告框架：

我有一个数据源（JSON/XML API），它为我提供了所有必要的数据。我只需要将其填充到各种表格中，然后以某种模板格式将其导出为各种格式，例如 PDF、Excel 等，然后向用户发送邮件。这必须在后台定期发生（根据某些 cron 作业）

我发现 Jasper 和 BIRT 是很好的解决方案。但是仅仅为了使用模板将数据导出为各种格式，它们是好的解决方案吗？还有比它们更轻的解决方案吗？我也尝试了 Apache POI，但鉴于各种导出库的免费可用性，我是否需要自己进行所有手动工作？

模板功能是必不可少的，而邮件等其他功能都是可选的，前提是该框架重量轻、灵活且易于使用。

请指教。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T17:34:21.663

如果您正在寻找替代品，这里是上面未提及的替代品。

**Docx4j** ( [http://www.docx4java.org/trac/docx4j](http://www.docx4java.org/trac/docx4j) ) 是开源的，在 Apache 许可证 (v2) 下可用。Docx4j 严重依赖 JAXB，即 Java 的 JCP 标准 - XML 绑定。您可以将 docx4j 视为 JAXB 实现。

**你可以用 docx4j 做什么**

*   打开现有的 docx（来自文件系统、SMB/CIFS、使用 VFS 的 WebDAV）、pptx、xlsx
*   **创建新的 docx**、pptx、xlsx
*   以编程方式操作上述内容（当然）
*   特定于 docx4j（相对于 pptx4j、xlsx4j）：
*   **模板替换；**CustomXML 绑定
*   生成/使用 Word 2007 的 xmlPackage (pkg) 格式
*   将 docx 作为 docx（即压缩）或 JCR（解压缩）保存到文件系统
*   应用转换，包括常用过滤器
*   导出为 HTML 或 PDF
*   比较/比较文档、段落或 sdt（内容控制）
*   字体支持（字体替换和使用文档中嵌入的任何字体）

对于带有附件的电子邮件 Java 邮件。这是示例[http://www.javatpoint.com/example-of-sending-attachment-with-email-using-java-mail-api](http://www.javatpoint.com/example-of-sending-attachment-with-email-using-java-mail-api)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T15:13:33.130

Jasper Reports 是一个很好的解决方案，可以使用来自 SQL 数据库和 XML 文件的模板创建报告（我还没有测试它是否支持 JSON），它的优点是如果你不喜欢默认 Jasper 服务器的工作方式，你可以修改它，或者您可以自己创建一个小型服务，这很容易做到，因为导出为 PDF（或任何格式）只需几行代码即可完成。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-22T08:02:58.253

你可以试试 Aspose 库。Aspose.cells 和 Aspose.pdf 将为您完成大部分工作，但您必须为此付费。尽管如此，这些库还是很有用的。
[http://www.aspose.com/](http://www.aspose.com/)

[http://www.aspose.com/java/excel-component.aspx](http://www.aspose.com/java/excel-component.aspx)

[http://www.aspose.com/java/pdf-component.aspx](http://www.aspose.com/java/pdf-component.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-22T08:27:54.800

我们正在使用艺术：[http](http://art.sourceforge.net/) ://art.sourceforge.net/ 。我认为它知道你想要的一切，它仍然是活跃的项目，所以如果你添加新功能，你可以添加对它的请求。

# asp.net - 使用文本框更新 SQL Server 表

> ID：16054920
> 
> 赞同：1
> 
> 时间：2013-04-17T08:14:36.317
> 
> 标签：asp.net, sql, sql-server, vb.net

我正在使用 asp.net vb.net 和 SQL Server 编写一个教育网站。我有 4 个堆栈持有者，如果任何人登录他的个人资料，他会看到他的信息

如果他想更新它们，他只需更改文本框，然后单击更新

我的问题是如何更新。

我写了一个更新方法，但它总是在查询中显示语法错误。我确定没有问题。我正在更新两个表，并制作了 sql 语句！

我的问题是我可以插入而不是更新吗？

如果不是：如何根据我拥有的会话更新一条记录？

请帮我

这是我的代码

```
' Private Sub UpdateInfo(ByVal USER_ID As Integer)

'Dim User As Integer = USER_ID
'Dim sql1 As String = "UPDATE AdminCoordinatorInformation  SET   MobileNumber =" + tbmobile.Text + ", HomeNumber=" + tbhome.Text + ", AltRelation = " + DDLRelationShip.SelectedValue + ", AlTitle = " + DDLTitle.SelectedValue + ", AltName = " + tbemname.Text + ", AltMobile = " + tbemmobile.Text + " WHERE USER_ID = User)"
'Dim sql2 As String = "UPDATE DIP_USERS SET USER_Email=" + tbEmail.Text.Trim + "  WHERE USER_ID = User)"

'  Try
' Dim conn As New SqlConnection(ConfigurationManager.ConnectionStrings("mydbConnectionString").ConnectionString)
' Dim cmd1 As New SqlCommand(sql1, conn)
' Dim cmd2 As New SqlCommand(sql2, conn)
' cmd2.Parameters.AddWithValue("@FirstName", tbname.Text)
' cmd2.Parameters.AddWithValue("@USER_PASSWORD", tbnewpassword.Text)
' cmd2.Parameters.AddWithValue("@USER_Email", tbEmail.Text)
' cmd1.Parameters.AddWithValue("@MobileNumber", tbmobile.Text)
' cmd1.Parameters.AddWithValue("@HomeNumber", tbhome.Text)
' cmd1.Parameters.AddWithValue("@AltRelation", DDLRelationShip.SelectedValue)
' cmd1.Parameters.AddWithValue("@AlTitle", DDLTitle.SelectedValue)
' cmd1.Parameters.AddWithValue("@AltName", tbemname.Text)
' cmd1.Parameters.AddWithValue("@AltMobile", tbemmobile.Text)
' conn.Open()

'Dim ra As Integer = cmd1.ExecuteNonQuery()

'Dim ra1 As Integer = cmd2.ExecuteNonQuery()

'cmd1.Dispose()
'cmd2.Dispose()

'   conn.Close()
'   Catch ex As Exception
' MsgBox(ex.Message)
' End Try

'End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T08:26:26.373

您没有在查询中指定参数，而是直接连接查询中控件的值。而且您仍然添加了参数。

首先，不要像那样连接你的 sql 查询，它容易出现`SQL Injection`.

像这样构造您的查询：

```
Dim sql1 As String = "UPDATE AdminCoordinatorInformation  SET   
                        MobileNumber =@MobileNumber, 
                        HomeNumber=@HomeNumber, 
                        AltRelation = @AltRelation, 
                        AlTitle = @AlTitle, 
                        AltName =@AltName, 
                        AltMobile = @AltMobile 
                        WHERE USER_ID = @User"
Dim sql2 As String = "UPDATE DIP_USERS SET 
                       USER_Email=@USER_Email 
                       WHERE USER_ID = @User" 
```

并且，也添加这个参数

```
 cmd1.Parameters.AddWithValue("@User", USER_ID)
 cmd2.Parameters.AddWithValue("@User", USER_ID) 
```

还有一件非常重要的事情。您需要为查询中的列分配正确的数据类型，即记住这些内容。

`txtBox.Text`返回字符串值，您可能需要将其转换为`Int32`using`Convert.Int32`或者您需要将其包装在单引号中，完全取决于您的列的数据类型

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:31:17.847

将您在 SQL 命令查询中声明的参数放入：

```
"UPDATE AdminCoordinatorInformation SET MobileNumber=@MobileNumber,HomeNumber=@homeNumber... 
```

您会收到语法错误，因为您在 sql 查询中的字符串数据必须用“'”包裹。

```
"UPDATE AdminCoordinatorInformation SET MobileNumber='0987654321',.... 
```

[注意：由于SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)，通过将查询与用户输入连接来创建 sql 查询`("...SET MobileNumber='" + txtbox.Text + "',...")`不是好的/危险的做法

# sql - 将 UNNEST 与 JOIN 一起使用

> ID：16054925
> 
> 赞同：9
> 
> 时间：2013-04-17T08:14:43.310
> 
> 标签：sql, postgresql, join, naming-conventions, unnest

我希望能够`unnest()`在具有许多`JOIN`s 的复杂 SQL 查询中使用 PostgreSQL 中的函数。这是示例查询：

```
SELECT 9 as keyword_id, COUNT(DISTINCT mentions.id) as total, tags.parent_id as tag_id
FROM mentions
INNER JOIN taggings ON taggings.mention_id = mentions.id
INNER JOIN tags ON tags.id = taggings.tag_id
WHERE mentions.taglist && ARRAY[9] AND mentions.search_id = 3
GROUP BY tags.parent_id 
```

我想消除`taggings`这里的表，因为我的`mentions`表有一个名为**taglist的****整数数组**字段，其中包含.**`mentions`**

 **我试过以下：

```
SELECT 9 as keyword_id, COUNT(DISTINCT mentions.id) as total, tags.parent_id as tag_id 
FROM mentions 
INNER JOIN tags ON tags.id IN (SELECT unnest(taglist))
WHERE mentions.taglist && ARRAY[9] AND mentions.search_id = 3 
GROUP BY tags.parent_id 
```

这可行，但会带来与第一个查询不同的结果。

所以我想做的是使用查询中的结果`SELECT unnest(taglist)`来`JOIN`补偿`taggings`表。

我怎样才能做到这一点？

**更新：** `taglist`与提及的相应标签 ID 列表相同。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-17T21:40:05.800

从技术上讲，您的查询可能会像这样工作（不完全确定此查询的目标）：

```
SELECT 9 AS keyword_id, count(DISTINCT m.id) AS total, t.parent_id AS tag_id
FROM  (
    SELECT  unnest(m.taglist) AS tag_id
    FROM    mentions m
    WHERE   m.search_id = 3
    AND     9 = ANY (m.taglist)
    ) m 
JOIN   tags t  USING (tag_id) -- assumes tag.tag_id!
GROUP  BY t.parent_id; 
```

但是，在我看来，您在这里走错了方向。通常，人们会删除冗余数组`taglist`并保留规范化的数据库模式。那么您的原始查询应该可以很好地服务，只是使用别名缩短了语法：

```
SELECT 9 AS keyword_id, count(DISTINCT m.id) AS total, t.parent_id AS tag_id
FROM   mentions m
JOIN   taggings mt ON mt.mention_id = m.id
JOIN   tags     t  ON t.id = mt.tag_id
WHERE  9 = ANY (m.taglist)
AND    m.search_id = 3
GROUP  BY t.parent_id; 
```

### 揭开谜底

`<rant>` 你的“不同结果”的根本原因是一些*智力上受到挑战的 ORM*强加给人们的不幸的命名约定。
我说的`**~~id~~**`是列名。切勿在具有多个表的数据库中使用此反模式。对，这基本上意味着*任何*数据库。一旦你加入一堆表（这就是你在数据库中*所做*的），你最终会得到一堆名为`id`. 完全没有意义。
命名表的 ID 列`tag`应该是**`tag_id`**（除非有另一个描述性名称）。从不`id`。 `</rant>`

您的查询无意中计数`tags`而不是`mentions`：

```
SELECT 25 AS keyword_id, count(m.id) AS total, t.parent_id AS tag_id
FROM  (
    SELECT unnest(m.taglist) AS id
    FROM   mentions m
    WHERE  m.search_id = 4
    AND    25 = ANY (m.taglist)
    ) m
JOIN   tags t USING (id)
GROUP  BY t.parent_id; 
```

它应该以这种方式工作：

```
SELECT 25 AS keyword_id, count(**DISTINCT** m.id) AS total, t.parent_id
FROM  (
    SELECT **m.id**, unnest(m.taglist) **AS tag_id**
    FROM   mentions m
    WHERE  m.search_id = 4
    AND    25 = ANY (m.taglist)
    ) m
JOIN   tags t **ON t.id =  m.tag_id**
GROUP  BY t.parent_id;
```

我还将在您的查询中丢失的`DISTINCT`您添加回。`count()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T09:41:10.590

像这样的东西应该工作：

```
...
tags t INNER JOIN
(SELECT UNNEST(taglist) as idd) a ON t.id = a.idd
... 
```**

# android - Azure 客户端 IServiceFilter 不起作用

> ID：16054928
> 
> 赞同：1
> 
> 时间：2013-04-17T08:14:47.763
> 
> 标签：android, azure, xamarin.android, xamarin

我正在尝试使用官方 xamarin 的 azure 组件在我的 android 应用程序中实现 Azure 移动服务。我必须使用过滤器调用 asure 服务，我只是这样做了：

```
class Filter : IServiceFilter 
{ 
    public System.Threading.Tasks.Task Handle(IServiceFilterRequest request, IServiceFilterContinuation continuation) 
    { 
        throw new NotImplementedException(); 
    } 
} 
```

如您所见，这是一个简单的 IServiceFilter 实现，但它失败了！这是错误

> TimestampFilter' 没有实现接口成员'Microsoft.WindowsAzure.MobileServices.IServiceFilter.Handle(Microsoft.WindowsAzure.MobileServices.IServiceFilterRequest, Microsoft.WindowsAzure.MobileServices.IServiceFilterContinuation)'。'TimestampFilter.Handle(Microsoft.WindowsAzure.MobileServices.IServiceFilterRequest, Microsoft.WindowsAzure.MobileServices.IServiceFilterContinuation)' 无法实现 'Microsoft.WindowsAzure.MobileServices.IServiceFilter.Handle(Microsoft.WindowsAzure.MobileServices.IServiceFilterRequest, Microsoft.WindowsAzure.MobileServices.IServiceFilterContinuation )' 因为它没有匹配的返回类型'System.Threading.Tasks.Task'

有谁知道为什么？？谢谢

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-18T21:39:24.760

错误消息表明返回类型不正确，所以我查看了Assembly Browser：

```
public Task<IServiceFilterResponse> Handle(IServiceFilterRequest request,IServiceFilterContinuation continuation) 
{ 
    throw new NotImplementedException(); 
} 
```

现在应该为你编译

# xml - 如何使用 mvc4 将 xml 数据保存到数据库

> ID：16054930
> 
> 赞同：0
> 
> 时间：2013-04-17T08:14:49.980
> 
> 标签：xml, asp.net-mvc-3, asp.net-mvc-4, web-config

我已经像这样创建了一个名为 SeedData.xml 的 xml 文件。

```
<Root>
    <User>
        <UserID>1</UserID>            
        <UserName>Admin</UserName>       
        <FirstName>Admin</FirstName>
        <LastName>Admin</LastName>
        <ShortName>Admin</ShortName>        
    </User>
</Root> 
```

我已经像这样在 web.config 中包含了路径。

```
<appSettings>    
    <add key="myFilePath" value="D:\XmlSample\Common\SeedData.xml"/>
  </appSettings> 
```

我需要将 xml 文件中的数据添加到数据库中。

我得到了xml的路径

```
string filePath = ConfigurationManager.AppSettings["myFilePath"]; 
```

但是如何从 xml 中提取值并保存在数据库中。我在 google 中搜索了很多，但我找不到解决方案。请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T09:46:51.000

XML 是一种基于标签的通用语言，非常容易跨应用程序传输和存储数据。.Net 技术是广泛支持的 XML 文件格式。.Net 框架为 XML 格式文件中的读取、写入和其他操作提供类。此外，ADO.NET 中的数据集使用 XML 格式作为其内部存储格式。

在这里，我们将使用 SQL 插入命令将 XML 文件的值插入到数据库表中。这里 Dataset 使用 XmlReader 来读取 XML 文件的内容。使用 XmlReader 定位 XML 文件并将 XmlReader 作为 Dataset 的参数传递。还使用连接字符串建立与数据库的连接。从 XML 文件中获取数据到 Dataset 后，我​​们可以遍历数据集值并使用 insert 命令将值添加到 Databse 中的表中。

**尝试这个**

```
 using System;
    using System.Data;
    using System.Windows.Forms;
    using System.Xml;
    using System.Data.SqlClient; 

    namespace WindowsApplication1
    {
        public partial class Form1 : Form
        {
            public Form1()
            {
                InitializeComponent();
            }

            private void button1_Click(object sender, EventArgs e)
            {
                string connetionString = null;
                SqlConnection connection;
                SqlCommand command ;
                SqlDataAdapter adpter = new SqlDataAdapter();
                DataSet ds = new DataSet();
                XmlReader xmlFile ;
                string sql = null;

                int ID = 0;
                string Name = null;
                double Price = 0;

                connetionString = "Data Source=servername;Initial Catalog=databsename;User ID=username;Password=password";

                connection = new SqlConnection(connetionString);

                xmlFile = XmlReader.Create("Xmlfile.xml", new XmlReaderSettings());
                ds.ReadXml(xmlFile);
                int i = 0;
                connection.Open();
                for (i = 0; i <= ds.Tables[0].Rows.Count - 1; i++)
                {
                    ID = Convert.ToInt32(ds.Tables[0].Rows[i].ItemArray[0]);
                    Name = ds.Tables[0].Rows[i].ItemArray[1].ToString();
                    Price = Convert.ToDouble(ds.Tables[0].Rows[i].ItemArray[2]);
                    sql = "insert into tablenamevalues(" + ID + ",'" + Name + "'," + Price + ")";
                    command = new SqlCommand(sql, connection);
                    adpter.InsertCommand = command;
                    adpter.InsertCommand.ExecuteNonQuery();
                }
                connection.Close();
                MessageBox.Show("Done .. ");
            }
        }
    } 
```

# linux - 用户登录后在终端中打开屏幕

> ID：16054932
> 
> 赞同：0
> 
> 时间：2013-04-17T08:14:51.473
> 
> 标签：linux, terminal, command, gnu-screen

当用户使用例如 Putty 登录到我的 Debian 服务器时，我需要执行以下操作：

1.  它会自动执行命令`screen -r MyWindow`，并且
2.  用户将无法离开屏幕窗口，因此我希望用户禁用所有命令。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T13:47:33.770

您可以将脚本放在 /etc/prodile 下，也可以将命令放在用户主目录的 .bash_profile 下

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T12:05:00.803

将您的命令写入/etc/init.d/rc.local，并将 ln 写入所有 rc.X

```
vi /etc/init.d/rc.local
i
screen -r MyWindow
:wq
ln -sf /etc/init.d/rc.local /etc/init.d/rc.3 (default) 
```

# ios - 为什么不使用指针变量

> ID：16054933
> 
> 赞同：0
> 
> 时间：2013-04-17T08:14:53.340
> 
> 标签：ios, objective-c, cocoa-touch, ios5, ios6

我是 iOS 应用程序开发的新手。

我正在关注一个教程，该教程在**BIDAppDelegate.m中有以下代码片段**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    self.switchViewController = [[BIDSwitchViewController alloc]
                                 initWithNibName:@"SwitchView" bundle:nil];

    UIView *switchView = self.switchViewController.view;

     /**** WHY here do not use pointer variable? ****/
    CGRect switchViewFrame = switchView.frame; 

    switchViewFrame.origin.y+=[UIApplication sharedApplication].statusBarFrame.size.height;
    switchView.frame = switchViewFrame;
    self.window.rootViewController=self.switchViewController;
    ...
    ...
    return YES;
    } 
```

我理解上面的代码做了什么，一般来说，当应用程序启动时，它会加载根控制器的视图（`switchViewController`）并进行一些视图调整。

我的问题是，在代码中为什么`CGRect switchViewFrame = switchView.frame;`不使用这样的指针变量：`CGRect *switchViewFrame = switchView.frame;`？

**===============更新==================**

现在，我意识到原因是它`CGRect`是一个结构，而不是一个 Objective-C 类。那么，我可以将代码行重新定义为：

```
struct CGRect switchViewFrame, *sViewFrame; 
sViewFrame = switchView.frame; 
```

上面的代码是否相同`CGRect switchViewFrame = switchView.frame;`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-17T08:17:06.817

`CGRect`是 C 结构，而不是 Objective-C 对象。`CGRect`在 中声明`CGGeometry.h`，它是具有 C API 的 Core Graphics 框架的一部分。

# java - 无法添加以下方面axis2 Web 服务核心

> ID：16054934
> 
> 赞同：1
> 
> 时间：2013-04-17T08:14:54.823
> 
> 标签：java, eclipse, axis2

对于我的一个项目，我需要使用 Apache Axis2 创建 Web 服务。
我开始阅读该框架并遵循[此处](http://www.eclipse.org/webtools/community/tutorials/BottomUpAxis2WebService/bu_tutorial.html)给出的指南。
但是，我收到错误“**安装 Axis 2 Web Services Core 1.1 时失败**”。

此外，当我尝试在同一个项目上显式创建 Web 服务时，我收到错误“**无法添加以下方面 axis2 Web 服务核心**”。我也提到了这个[问题](https://stackoverflow.com/questions/7239171/error-failed-while-installing-axis2-web-services-core-1-1-while-setting-axis)，但是由于我已经在使用**Eclipse 3.6 (Helios)**，所以答案对我不起作用。

感谢您的帮助...

# batch-file - 批处理文件：使用“建议”请求用户输入

> ID：16054936
> 
> 赞同：0
> 
> 时间：2013-04-17T08:15:06.967
> 
> 标签：batch-file

如何提示用户给出答案，建议他们可以编辑的内容？我知道如何进行问答，例如：

```
1\. The sky is: 
```

用户提出答案并：

```
echo For you the sky is %var% 
```

但我想要类似的东西：

```
 1\. The sky is: Blue

echo For you the sky is Blue 
```

但用户可以更改它

```
1\. The sky is: Green
echo For you the sky is Green 
```

我不知道我是否清楚，如果没有，请告诉我。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:52:13.093

用颜色初始化变量之前：

```
@echo off&setlocal
set "color=Blue"
set/p "color=For you the sky is %color% (hit enter for o.k. or type in other color): "
echo For you the sky is %color% 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T12:58:35.313

您可以通过 JScript 或 VBScript 使用 WScript.Shell 的[SendKeys 方法](http://msdn.microsoft.com/en-us/library/8c6yea83%28v=vs.84%29.aspx)来模拟按键。试一试。我认为它可以满足您的需求。它将发送不可编辑`1\. The sky is:`然后模拟用户击键`B``l``u``e`。然后用户可以自由地点击`Enter`，或者他可以`Backspace`删除“蓝色”并随意替换它。

使用`.bat`扩展名保存并运行它。

```
@if (@a==@b) @end /*

:: batch portion

@echo off
setlocal

set /p "=1\. The sky is: "<NUL
call :sendkeys Blue
set /p "sky="

echo For you the sky is %sky%.  Press any key to exit.
pause >NUL

exit /b

:sendkeys <string>
cscript /nologo /e:jscript "%~f0" "%~1"
goto :EOF

:: JScript portion */
var sh = new ActiveXObject("WScript.Shell");
sh.SendKeys(WSH.Arguments(0)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T22:25:15.820

正如其他答案所说，您必须需要第三方实用程序来解决此问题。例如，我用我的GetKey.exe和Show.exe辅助程序编写了ReadLine.bat，这是一个模拟`SET /P`命令的子程序，即读取字符直到按下Enter键，然后用BackSpace键删除最后一个字符。我们可以修改这样的例程以便为输入变量提供一个*初始值：*

```
@echo off

rem Read a variable with an initialized value
rem Antonio Perez Ayala

set Bell=7
set BackSpace=8
set Enter=13
set Space=32

:ReadInitVar var="prompt" ["initial value"]
rem          %1   %2        %3

setlocal EnableDelayedExpansion
Show %2
set len=0
if "%~3" equ "" (
   set %1=
) else (
   Show %3
   set "%1=%~3"
   for /L %%i in (0,1,80) do if "!%1:~%%i,1!" neq "" set /A len+=1
)

:nextKey
   GetKey
   set key=%errorlevel%
   if %key% geq %Space% (
      rem Ascii character: insert it
      Show %key%
      for /F "delims=" %%a in ('Show %key%') do set "%1=!%1!%%a"
      set /A len+=1
   ) else if %key% equ %BackSpace% (
      rem Backspace: delete last character
      if defined %1 (
         Show %BackSpace% %Space% %BackSpace%
         set "%1=!%1:~0,-1!"
         set /A len-=1
      ) else (
         rem Empty value
         Show %Bell%
      )
   )
if %key% neq %Enter% goto nextKey
echo/
for /F "delims=" %%a in ("!%1!") do endlocal & set %1=%%a
exit /B 
```

这样，您可以使用此行来解决您的问题：

```
call :ReadInitVar color="For you the sky is " "Blue" 
```

您可以从以下站点下载 Getkey.exe 和 Show.exe 辅助程序，并查看原始的 ReadLine.bat 子例程：[Advanced Batch features via assistant .exe 程序](http://www.dostips.com/forum/viewtopic.php?f=3&t=3428)。

还有另一个与上面的 ReadInitVar.bat 类似的子例程，但它使用 ColorShow.exe 辅助程序而不是 Show.exe在*不同的颜色字段中显示用户输入。*您可以在这里查看：[http ://www.dostips.com/forum/viewtopic.php?f=3&t=4198&p=23426#p23426](http://www.dostips.com/forum/viewtopic.php?f=3&t=4198&p=23426#p23426)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T08:50:36.690

```
set x=blue
set y=
set /p "y=The sky is [%x%] "
if not defined y set y=%x%
echo For your the sky is %y% 
```

如果用户输入为空，则将预定义的 %x% 复制到输出变量 %y%

# javascript - 什么是 javascript MVC 框架

> ID：16054948
> 
> 赞同：-5
> 
> 时间：2013-04-17T08:15:45.297
> 
> 标签：javascript, jquery

我发现一些链接讨论了哪个 MVC 框架更好，但没有任何实际描述它背后的意识形态。

我熟悉后端的 MVC 框架，因为我使用 django（MTV 框架）。

我本质上想了解客户端javascript MVC框架中每个模型、视图和控制器的映射（我总是将模型与映射到数据库的东西联系起来），以及如果我要使用这样的框架，代码是如何结构化的.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:22:08.253

MVC 模式可以在 n 层架构中用于设计表示层，使用基于 JavaScript 的新 UI，表示层现在可以完全用 JavaScript 实现，这就是为什么需要 MVC JavaScript 框架的一个例子。

在这篇来自[Microsoft 模式和实践](http://msdn.microsoft.com/en-us/library/ff647343.aspx)的文章中，他们讨论了在 Web 应用程序的表示层中使用 MVC 模式。

# java - 如何执行 Spring JDBC 连接和检索数据？

> ID：16054950
> 
> 赞同：1
> 
> 时间：2013-04-17T08:15:47.737
> 
> 标签：java, spring, servlets, spring-jdbc

我正在使用 Java 和 Spring 创建一个 Web 应用程序。我需要连接到 MySQL 数据库并在 Servlet 中检索数据以显示在我的 JSP 页面中。我搜索了很多并获得了许多连接到数据库的示例，但对我没有任何帮助

这是我的`applicationContext.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:tx="http://www.springframework.org/schema/tx" xmlns:batch="http://www.springframework.org/schema/batch"
    xmlns:jdbc="http://www.springframework.org/schema/jdbc" xmlns:context="http://www.springframework.org/schema/context"

    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
    http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc-3.1.xsd    
    http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch-2.1.xsd
    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <!-- 1) USE ANNOTATIONS TO CONFIGURE SPRING BEANS -->
    <context:component-scan base-package="com.app.any" />
    <!-- 2) DATASOURCE, TRANSACTION MANAGER AND JDBC TEMPLATE -->
    <bean id="dataSource"
        class="org.springframework.jdbc.datasource.DriverManagerDataSource">
        <property name="driverClassName" value="com.mysql.jdbc.Driver" />
        <property name="url" value="jdbc:mysql://localhost:3306/mydatabase" />
        <property name="username" value="root" />
        <property name="password" value="admin" />
       <bean>
       <bean id="transactionManager"
        class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource" />
    </bean>
    <tx:annotation-driven transaction-manager="transactionManager" />

    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
        <property name="dataSource" ref="dataSource" />
    </bean>
        <bean id="getTargetFields"  class="com.app.myapp.controllers.controllerClasses.GetTargetFields">
       </bean>
    <beans 
```

从我的 servlet 中，我调用了一个名为`GetTargetFields`. 在那个类中，我想传递查询并检索数据。但我不知道如何通过。`query()`使用类的方法尝试了许多示例`JdbcTemplate`。但它显示错误，因为我不知道要传递哪个类以及返回类型是什么。它的返回类型是`Object`. 我试过`ResultSet`但显示错误。

我想要的是在我的`GetTargetFields`课堂上我想传递一个选择查询并返回结果，我想将结果保存在 ResultSet 中。

```
public class GetTargetFields
{

    public void getTargetField()
    {
            // What code should be here?
    }

} 
```

任何人都可以帮我编码吗？谢谢

**更新 1**

```
public class GetTargetFields
{
    private JdbcTemplate jdbcTemplate;
    private DataSource dataSource;

    public static ResultSet rs=null;

    public void setDataSource(DataSource dataSource) {
        this.dataSource = dataSource;
        this.jdbcTemplate = new JdbcTemplate(this.dataSource);
    }

    public ResultSet getTargetField() // I know the code is wrong. But I tried this
    {
         ResultSet rs=jdbcTemplate.query("SELECT * from employee",
            ResultSet); //shows error. I want to get the result in ResultSet 
                //Or how the data will be stored in *Collector* and I can access each column fields?
     return rs;
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:04:11.760

您将不得不使用以下命令手动注入您的 jdbcTemplate 对象：

```
<bean id="getTargetFields" class="com.app.myapp.controllers.controllerClasses.GetTargetFields">
    <property name="jdbcTemplate" ref="jdbcTemplate" />  
</bean> 
```

然后，您可以将注入`jdbcTemplate`对象的类更改为：

```
public class GetTargetFields {
    private JdbcTemplate jdbcTemplate;
    ...
} 
```

或者使用`@Autowired`and`@Repository`注释。

请参阅以下 Spring 参考的前半部分，它显示了如何使用这两个注释来消除大部分复杂性：[http ://static.springsource.org/spring/docs/3.0.x/spring-framework-reference /html/jdbc.html](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:57:18.573

您没有将 jdbcTemplate 实例注入或自动装配到您的 GetTargetFields 类中。它应该像这样注入。

```
<bean id="getTargetFields"  class="com.app.myapp.controllers.controllerClasses.GetTargetFields">
         <property name="jdbcTemplate" ref="jdbcTemplate" />
</bean> 
```

`@Autowired`或使用注释自动装配它。

在当前情况下，即使您有数据源的 setter 方法，您也没有注入它。您不需要创建一个新实例，`JdbcTemplate`因为您已经在 app-context 文件中完成了 bean 定义，Spring 将为您实例化它。所以正确的实现应该是注入jdbcTemplate

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T09:00:55.513

您需要使用以下语法

```
jdbcTemplate.query("", new ResultSetExtractor<Object>() {

    @Override
    public Object extractData(ResultSet rs) throws SQLException,
            DataAccessException {
        //do what ever you want to do with rs
        return null;
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T09:15:32.090

您的 GetTargetFields 类中有以下方法

```
public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
    this.jdbcTemplate = new JdbcTemplate(this.dataSource);
} 
```

这意味着，在 bean 初始化期间，您可以将数据源作为属性提供，该属性将由 spring 框架注入。

```
<bean id="getTargetFields" class="com.app.myapp.controllers.controllerClasses.GetTargetFields">
    <property name="dataSource" ref="dataSource">    
</bean> 
```

# c++ - 如何从第三方框架和我的源代码创建框架？

> ID：16054951
> 
> 赞同：1
> 
> 时间：2013-04-17T08:15:47.860
> 
> 标签：c++, ios, objective-c, opencv, static-libraries

我将 opencv 从源代码编译为 opencv2.framework 文件。我写了一些使用 opencv2.framework 的代码。现在，我必须从我的代码为第三方开发人员创建包。

mysource(objective-c) + opencv2.framework(compiled from c++) => package => 第三方开发者将使用它。

（可以是**两个单独的框架**，也可以是**一个静态库+opencv2.framework** ，也可以是**一个框架文件**）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:09:07.660

您可以拥有自己的自定义框架，并且客户端可以将这两个框架添加到项目中并进行无错误编译。[您可以在此处查看如何创建框架](http://jaym2503.blogspot.in/2012/09/how-to-create-custom-ios-framework.html)。只需创建一个捆绑目标并添加要包含在框架中的文件。添加新的聚合目标复制 lipo 脚本，您将完成一个框架

# store - 将空行添加到 dojox/grid/DataGrid

> ID：16054953
> 
> 赞同：0
> 
> 时间：2013-04-17T08:15:58.143
> 
> 标签：store, dojo, dojox.grid.datagrid, dojox.grid

```
<div id="gridDiv"></div>
<button id="addRow"  data-dojo-type="dijit.form.Button">Add Row</button>

require(['dojo/_base/lang', 'dojox/grid/DataGrid' , 'dojo/data/ItemFileWriteStore' , 'dojo/dom' , 'dojo/domReady!'],
  function(lang, DataGrid, ItemFileWriteStore, Button, dom){
    /*set up data store*/
    var data = {
      identifier: "id",
      items: []
    };

    var store = new ItemFileWriteStore({data: data});

    /*set up layout*/
    var layout = [[
      {'name': 'Column 1', 'field': 'id', 'width': '100px'},
      {'name': 'Column 2', 'field': 'col2', 'width': '100px'},
      {'name': 'Column 3', 'field': 'col3', 'width': '200px'},
      {'name': 'Column 4', 'field': 'col4', 'width': '150px'}
    ]];

    /*create a new grid*/
    var grid = new DataGrid({
        id: 'grid',
        store: store,
        structure: layout,
        rowSelector: '20px'});

    /*append the new grid to the div*/
    grid.placeAt("gridDiv");

    /*Call startup() to render the grid*/
    grid.startup();
}); 
```

*   我有一个以编程方式创建的 dojox/grid/DataGrid，其中没有数据（空存储）。只有布局。
*   我在网格外有一个按钮。
*   我的需要是，单击按钮时，我需要在网格中添加一个空行。那个空行不应该来自json。它应该来自商店。
*   这意味着单击按钮，应将一个空行添加到存储中，然后使用该存储加载网格。可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T08:50:07.187

单击按钮时，[此小提琴会向商店添加一个新项目。](http://jsfiddle.net/Q9GYv/1/)并且网格将自我更新以反映商店的新内容。

代码的核心是这样的：

```
var id = 0;

var button = new Button({
    onClick: function () {
        store.newItem({
            id: id,
            col2: "col2-" + id,
            col3: "col3-" + id,
            col4: "col4-" + id
        });
        id++;
    }
}, "addRow"); 
```

屏幕截图（按 2 次按钮后）：

![在此处输入图像描述](https://i.stack.imgur.com/PH3fB.png)

# jquery - 如何将 rangevalidator 最大值设置为存储过程中的值，其输入值取自下拉列表中的选定项？

> ID：16054954
> 
> 赞同：0
> 
> 时间：2013-04-17T08:15:58.277
> 
> 标签：jquery, asp.net, stored-procedures, rangevalidator

这是场景。我有一个填充项目的下拉列表。下拉列表项包含产品 ID 作为值。现在需要使用 rangevalidator 验证要填写在文本框中的数量，其中最大值将根据所选项目的产品 ID 从数据库中获取。（我已经有一个存储的过程来提供相应产品 ID 的最大数量）。如何设置数量范围验证器的最大值。我还使用 jquery 插件来设计下拉菜单，并使用客户端脚本根据产品 ID 显示价格，因为 selectindexchanged 没有被触发。任何人都会对这个问题有所了解。

![在此处输入图像描述](https://i.stack.imgur.com/j5Moo.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T08:49:33.527

要在 Javascript 中更改验证器的最大值，请使用：

```
var rvalid = document.getElementById('<%= RangeValidator1.ClientID %>');
rvalid.maximumvalue = 10; 
```

为了从存储过程中获得最大数量，有很多解决方案。您可以进行 Ajax 调用，也可以在页面呈现时立即存储所有值。

你是如何根据ID得到价格值的？也许您应该在这里遵循类似的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T08:18:56.167

请改用 CustomValidator。将 SP 的结果设置为 Javascript 变量并在 ClientValidate 函数中使用它。

像这样的东西：

```
<script language="JavaScript">
  function CheckQuantity(sender, args)
  {
    if ($('#ddl').val()>maxQty)
         args.IsValid = false;
    else
         args.IsValid = true;
  }
</script>

<asp:CustomValidator
ControlToValidate="ddl"
OnServerValidate="CheckQuantity"
Text="Invalid quantity"
runat="server"/> 
```

# unity3d - 自定义窗口上的 Unity 自定义检查器

> ID：16054955
> 
> 赞同：7
> 
> 时间：2013-04-17T08:15:59.127
> 
> 标签：unity3d

我有一个显示对象列表的自定义窗口。每个对象都有一个自定义检查器编辑器。

是否可以在自定义窗口中显示自定义检查器？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-17T12:33:59.693

您不能强制`Unity3D`在检查器窗口以外的其他地方绘制自定义检查器。

顺便说一句，您可以手动实例化`Editor`using [Editor.CreateEditor](http://docs.unity3d.com/Documentation/ScriptReference/Editor.CreateEditor.html)方法。由于您正在显示自定义检查器，因此应该可以从内部`Window.OnGUI`方法手动实例化它，并使用编辑器的公共`OnInspectorGUI`方法在窗口内绘制编辑器。

例如，如果您附加了一个名为 a 的脚本`CustomScript`并`GameObject`有一个相关的`Editor`名为`CustomScriptEditor`，假设您`GameObject`已从层次结构中选择了 ，则此代码将自定义检查器可视化为 a `EditorWindow`：

```
using UnityEditor;
using UnityEngine;

public class TestWindow : EditorWindow
{

    [MenuItem ("Window/Editor Window Test")]
    static void Init () 
    {
        // Get existing open window or if none, make a new one:
        TestWindow window = (TestWindow)EditorWindow.GetWindow (typeof (TestWindow));
    }

    void OnGUI () {

        GameObject sel = Selection.activeGameObject;

        CustomScript targetComp = sel.GetComponent<CustomScript>();

        if (targetComp != null)
        {
            var editor = Editor.CreateEditor(targetComp);
            editor.OnInspectorGUI();            
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-09-28T13:59:29.357

截至目前，这个问题是诸如“编辑器窗口内的 Unity 检查器”之类的查询的顶级谷歌结果，所以我正在制作一个 necropost 来分享一些我在数小时的挫折中学到的非常重要的信息：

我正在构建一个编辑器工具，该工具在 EditorWindow 内使用自定义检查器，并且我使用了与 Heisenbug 完全相同的方法。有时在使用该工具时，我的控制台会被数百个神秘的空引用异常轰炸。重新启动 Unity 会使它们消失，但它们将不可避免地返回。我终于能够将问题追溯到“Editor.CreateEditor”，这是我艰难地学到的教训：

**您需要手动销毁从 Editor.CreateEditor 创建的任何检查器！**

通常 Unity 会在选择相关对象时实例化一个检查器，并在对象被取消选择/删除/等时自动销毁该实例。但是通过 Editor.CreateEditor 创建的检查器永远不会被销毁，并且会在它正在检查的对象被销毁后很长时间停留在内存中的某个位置。

您可以通过将以下代码添加到自定义检查器来证明这一点：

```
void OnEnable()
{
    Debug.Log("on enable " + this.GetInstanceID());
}

void OnDisable()
{
    Debug.Log("on disable " + this.GetInstanceID());
} 
```

正常使用检查器，您将始终成对地看到这些消息，因为检查器的实例被创建然后被销毁。但是尝试从您的 EditorWindow 类中实例化一些检查器，您只会看到“启用”消息。

我了解到，每当重新编译脚本时，Unity 都会调用 OnEnable()。试一试，你会看到你的控制台充满了来自所有从未清理过的检查器实例的“启用”消息。这些实例在它们检查的对象被销毁后仍将持续很长时间，并且 OnEnable() 中的任何初始化代码都将异常中断并引发大量神秘异常。

**我的解决方案看起来像这样（此代码将进入您的 EditorWindow 类）：**

```
Editor embeddedInspector;

...

// a helper method that destroys the current inspector instance before creating a new one
// use this in place of "Editor.CreateEditor"
void RecycleInspector(Object target)
{
    if (embeddedInspector != null) DestroyImmediate(embeddedInspector);
    embeddedInspector = Editor.CreateEditor(target);
}

...

// clean up the inspector instance when the EditorWindow itself is destroyed
void OnDisable()
{
    if (embeddedInspector != null) DestroyImmediate(embeddedInspector);
} 
```

# javascript - 在Javascript中确定黑白像素之间的距离

> ID：16054963
> 
> 赞同：1
> 
> 时间：2013-04-17T08:16:19.660
> 
> 标签：javascript, image-processing

我计划在这个项目中使用 JavaScript（但我愿意使用其他东西）。我在 javascript 中加载图像，当我在图像上放置一个点时，我想计算从放置点到第一个黑色或灰色像素的 x 和 y 距离。

![示例图像](https://i.stack.imgur.com/D7VTY.png)

所以我将红点放在图像上，然后我想向用户显示从所选点到第一个黑色像素的 x、y 距离。距离可以以像素为单位（我不介意）。这可能吗，有人可以帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T07:08:20.390

另一种方法是按照@Joseph the Dreamer 的建议再次使用该`getImageData`功能，但您可以执行以下操作而不是搜索方向：

```
// the context to the canvas which holds your map
var ctx {...};

var point = {x:x, y:y};
// this gets a 3 by 3 bitmap data from your canvas with the centre being your point
var search = ctx.getImageData(x - 1, y - 1, 3, 3);

var match = false;
while(!match)
{
    // iterate over the search array looking for a black or grey pixel
    // and add the co ordinates of the matches into another array

    // if we found matches in this loop, calculate the shortest length match
    // and then break out of the loop

    // otherwise get a bigger sample data to search through and do this loop again
    // you could optimise this by skipping the pixels you looked through
    // in the previous loop
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T08:35:35.343

[`drawImage`](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Tutorial/Using_images#drawImage)您可以使用此[MDN 示例](https://developer.mozilla.org/samples/canvas-tutorial/3_1_canvas_drawimage.html)中的方法将图像绘制到画布上。然后使用 提取像素数据[`getImageData`](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Pixel_manipulation_with_canvas#Getting_the_pixel_data_for_a_context)，返回一个包含`width`,`height`和`data`属性的对象。

该`data`属性是一系列 rgba（红色、绿色、蓝色、alpha）值，每行像素从左到右运行。数值范围为 0-255。对于透明度，0 表示像素透明，255 表示不透明。

数组如下所示：

```
 ,--- first pixel (top left)
    |       ,-- second pixel
____|___ ___|___    _______,--- last pixel (bottom right)
[r,g,b,a,r,g,b,a...,r,g,b,a] 
```

给定画布上下文的宽度和高度，您可以使用一些不那么复杂的数学来获取 (x,y) 处的像素，或者只是运行一些嵌套循环，您可以在任何给定的 (x,y) 处找到像素.

至于寻找最接近的黑色像素，我建议您从 (x,y) 处的像素开始，然后递增/递减 x,y 或两者来获取周围的像素。我能想到的最快的方法是在一个方向上穿过像素，直到你碰到你想要的像素。对其他方向执行此操作。然后比较值。

在笛卡尔平面中让相邻像素距离“红色像素”1 个像素的示例。如果只需要水平和垂直，则可以省略对角线。

```
/*(x-1,y+1)*/ ( x ,y+1) /*(x+1,y+1)*/
  (x-1, y )   ( x , y )   (x+1, y )
/*(x-1,y-1)*/ ( x ,y-1) /*(x+1,y-1)*/ 
```

对于距离，给定“红色像素”的 (x,y) 和最近的黑色像素 (x,y)，您可以使用[许多距离公式之一](http://en.wikipedia.org/wiki/Distance#Geometry)。

# c# - DataGrid 在我的 WPF MVVM 应用程序中更改选项卡时丢失选择、排序、分组等

> ID：16054965
> 
> 赞同：1
> 
> 时间：2013-04-17T08:16:25.050
> 
> 标签：c#, .net, wpf, mvvm, datagrid

[我在 MVVM 模式MVVM 模式](http://msdn.microsoft.com/en-us/magazine/dd419663.aspx)的基础上构建了一个应用程序

我使用[扩展 WPF 工具包](http://wpftoolkit.codeplex.com/)的[DataGrid 。](http://wpftoolkit.codeplex.com/wikipage?title=DataGrid&referringTitle=Home)

每次我更改选项卡并返回数据网格时，所有设置（如排序、选择和分组）都会丢失。

我读到我可以将这些设置保存在附加属性中，但为什么我必须这样做？

刷新视图的数据网格的触发器是什么？如何防止数据网格这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:33:07.997

the problem is the tab control, it load and unload every time you switch the tabitems. there are some posts around how you can change this behavior.

an another way would be to persist the datagrid states and apply it on load.

# javascript - 如何通过鼠标单击 highcharts 图表来更新 cvs 文件中的值

> ID：16054966
> 
> 赞同：0
> 
> 时间：2013-04-17T08:16:29.803
> 
> 标签：javascript, ajax, csv, highcharts

我想通过在图表上单击鼠标来更新我的 cvs 文件，就像我通过从同一个 cvs 文件中读取数据来创建图表一样，当我得到图表时，我想要的是每当我点击一个点时，它就会产生那个点在 y 轴上等于 0，并将 cvs 文件中的相应值更新为 0。

请有人帮忙。这是我的代码，它可以从 cvs 文件中获取值，但不会更新，但如果我采用硬编码的数组系列，相同的代码可以正常工作。
不明白为什么这些情节选项不起作用。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"     "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Highcharts Example</title>

<!-- 1\. Add these JavaScript inclusions in the head of your page -->
<script type="text/javascript"         src="http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js"></script>
<script type="text/javascript" src="../js/highcharts.js"></script>
<!--[if IE]>
<script type="text/javascript" src="../js/excanvas.compiled.js"></script>
<![endif]-->

<!-- 2\. Add the JavaScript to initialize the chart on document ready -->
<script type="text/javascript">
$(document).ready(function() {

var options = {

chart: {
renderTo: 'container',
defaultSeriesType: 'line'},

title: { text: 'Output'},

xAxis: { categories: []},

yAxis: {
title: { text: 'Units'} },

plotOptions: {
series: { cursor: 'pointer',
point: {
events: { click: function() {
var y = this.item(y);
var x = this.x;

chart.series[0].data[x].update(y -= y);} } } },
series: []
};

$.get('testFile.csv', function(data) {
// Split the lines
var lines = data.split('\n');
$.each(lines, function(lineNo, line) {
var items = line.split(',');
var series = {
data: []
}; 
$.each(items, function(itemNo, item) {
series.data.push(parseFloat(item));

});

options.series.push(series); });

var chart = new Highcharts.Chart(options);
});
});
</script>
</head>
<body>
<script src="http://code.highcharts.com/highcharts.js"></script>
<script src="http://code.highcharts.com/modules/data.js"></script>
<script src="http://code.highcharts.com/modules/exporting.js"></script>
<div id="container" style="width: 1400px; height: 400px; margin: 0 auto"></div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T09:49:15.013

您可以捕获点击点操作[http://api.highcharts.com/highcharts#plotOptions.series.point.events.click](http://api.highcharts.com/highcharts#plotOptions.series.point.events.click)然后使用通过 ajax 从 csv 获取新值并使用 update() 函数[http://api.highcharts .com/highcharts#Point.update()](http://api.highcharts.com/highcharts#Point.update())

# inno-setup - Inno Setup - 如何在欢迎页面上添加消息

> ID：16054969
> 
> 赞同：4
> 
> 时间：2013-04-17T08:16:32.350
> 
> 标签：inno-setup

我可以在 Inno Setup 欢迎页面上留言吗？我想要这样的[东西](http://goo.gl/MCfTI)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-17T09:20:03.067

您可以通过覆盖该`[Messages]`部分的值来更改欢迎消息的文本：

```
[Messages]
WelcomeLabel2=This will install [name/ver] on your computer.%n%nIt is recommended that you close all other applications and disable any anti virus before continuing. 
```

如果要更改样式（颜色、大小等），则需要在`InitializeWizard()`事件函数中单独创建和定位控件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-06-22T09:49:28.373

@Deanna 答案是正确的。

现在，如果您还想更改字体颜色和格式，您可以执行以下操作：

```
[Messages]
WelcomeLabel2=This will install [name/ver] on your computer.%n%nIt is recommended that you close all other applications and disable any anti virus before continuing.

[Code]
procedure InitializeWizard();
begin
  WizardForm.WelcomeLabel2.Font.Style := [fsBold]; //Bold
  WizardForm.WelcomeLabel2.Font.Color := clRed; // And red colour
end; 
```

# python - 在 wx.python 中使顶部窗口无法访问

> ID：16054983
> 
> 赞同：1
> 
> 时间：2013-04-17T08:17:07.797
> 
> 标签：python, user-interface, wxpython, frame

如何在子框架打开时使顶部框架无法访问？

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title, size=(400, 320), style=(wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | wx.CLOSE_BOX | wx.CLIP_CHILDREN))

        # Setting up menu
        filemenu = wx.Menu()
        set_m = filemenu.Append(wx.ID_PREFERENCES, 'Settings', 'Settings')
        # filemenu.Append(US)
        filemenu.AppendSeparator()
        exit_m = filemenu.Append(wx.ID_EXIT)

        # Creating the menubar
        menubar = wx.MenuBar()
        menubar.Append(filemenu, 'Menu')
        self.SetMenuBar(menubar)

        self.Bind(wx.EVT_MENU, self.OnSettings, set_m)

    def OnSettings(self, e):
        SetFrame().Show()

class SetFrame(wx.Frame):
    title = 'Settings'
    def __init__(self):
        wx.Frame.__init__(self, wx.GetApp().TopWindow, title=self.title, size=(400, 250), style=(wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | wx.CLOSE_BOX | wx.CLIP_CHILDREN))

class MyApp (wx.App):
    def OnInit(self):
        self.frame = MyFrame(None, title='Parent-Frame')
        self.frame.Show()
        self.SetTopWindow(self.frame)
        return True

if __name__ == '__main__':
    app = MyApp(0)
    app.MainLoop() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T12:03:58.800

您可以改用模态对话框，尽管模态对话框会阻止应用程序的其余部分，您可能不希望这样。

为了使您的框架像一个不阻塞应用程序的模式对话框一样，当您打开子框架时禁用父框架，记住在子框架关闭时再次启用父框架。

在子框架上设置样式 wx.FRAME_FLOAT_ON_PARENT 以使其保持在其父框架的顶部并将其设置为在父框架上居中也是一个好主意。

我已经修改了下面的代码，以使顶部框架在子框架打开时无法访问。

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent, title):
        style = (wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | wx.CLOSE_BOX |
                 wx.CLIP_CHILDREN)
        wx.Frame.__init__(self, parent, title=title, size=(400, 320),
                          style=style)

        # Setting up menu
        filemenu = wx.Menu()
        set_m = filemenu.Append(wx.ID_PREFERENCES, 'Settings', 'Settings')
        # filemenu.Append(US)
        filemenu.AppendSeparator()
        exit_m = filemenu.Append(wx.ID_EXIT)

        # Creating the menubar
        menubar = wx.MenuBar()
        menubar.Append(filemenu, 'Menu')
        self.SetMenuBar(menubar)

        self.Bind(wx.EVT_MENU, self.OnSettings, set_m)

    def OnSettings(self, e):
        SetFrame().Show()

class SetFrame(wx.Frame):
    title = 'Settings'

    def __init__(self):
        style = (wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | wx.CLOSE_BOX |
                 wx.CLIP_CHILDREN | wx.FRAME_FLOAT_ON_PARENT)
        wx.Frame.__init__(self, wx.GetApp().TopWindow, title=self.title,
                          size=(400, 250), style=style)

        self.CenterOnParent()
        self.GetParent().Disable()

        self.Bind(wx.EVT_CLOSE, self.onClose)

    def onClose(self, event):
        self.Close()
        event.Skip()

    def Close(self):
        self.GetParent().Enable()
        self.Destroy()

class MyApp (wx.App):
    def OnInit(self):
        self.frame = MyFrame(None, title='Parent-Frame')
        self.frame.Show()
        self.SetTopWindow(self.frame)
        return True

if __name__ == '__main__':
    app = MyApp(0)
    app.MainLoop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T14:39:28.470

您还可以像对话框一样使第二帧模态化。这是您修改后的代码以执行此操作：

```
import wx

class MyFrame(wx.Frame):
    def __init__(self, parent, title):
        wx.Frame.__init__(self, parent, title=title, size=(400, 320), style=(wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | wx.CLOSE_BOX | wx.CLIP_CHILDREN))

        # Setting up menu
        filemenu = wx.Menu()
        set_m = filemenu.Append(wx.ID_PREFERENCES, 'Settings', 'Settings')
        # filemenu.Append(US)
        filemenu.AppendSeparator()
        exit_m = filemenu.Append(wx.ID_EXIT)

        # Creating the menubar
        menubar = wx.MenuBar()
        menubar.Append(filemenu, 'Menu')
        self.SetMenuBar(menubar)

        self.Bind(wx.EVT_MENU, self.OnSettings, set_m)

    def OnSettings(self, e):
        SetFrame().Show()

class SetFrame(wx.Frame):
    title = 'Settings'
    def __init__(self):
        wx.Frame.__init__(self, wx.GetApp().TopWindow, title=self.title, size=(400, 250), style=(wx.MINIMIZE_BOX | wx.SYSTEM_MENU | wx.CAPTION | wx.CLOSE_BOX | wx.CLIP_CHILDREN))
        self.Bind(wx.EVT_CLOSE, self.onClose)
        self.MakeModal()

    #----------------------------------------------------------------------
    def onClose(self, event):
        """
        Make the frame non-modal as it closes to re-enable other windows
        """
        self.MakeModal(False)
        self.Destroy()

class MyApp (wx.App):
    def OnInit(self):
        self.frame = MyFrame(None, title='Parent-Frame')
        self.frame.Show()
        self.SetTopWindow(self.frame)
        return True

if __name__ == '__main__':
    app = MyApp(0)
    app.MainLoop() 
```

请注意，当您关闭设置框架以重新启用其他窗口时，您必须禁用该模式。有关更多信息，请参阅[http://wxpython-users.1045709.n5.nabble.com/making-a-frame-modal-td2363708.html](http://wxpython-users.1045709.n5.nabble.com/making-a-frame-modal-td2363708.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-24T12:41:54.147

嵌套模式对话框导致我的应用出现问题，所以我最终做了：

```
self.GetParent().Disable()
self.Enable()
self.Bind(wx.EVT_CLOSE, self.on_close)

def on_close(self, event):
    event.Skip()
    self.GetParent().Enable()
    self.Destroy() 
```

禁用父窗口也会禁用所有子窗口，但可以重新启用它们。

编辑：此外，添加`wx.FRAME_FLOAT_ON_PARENT`和`wx.FRAME_NO_TASKBAR`样式`wx.Frame.__init__`可以帮助复制模态对话框的行为

# javascript - 为什么访问已部署的网站时 JSON 未定义？

> ID：16054990
> 
> 赞同：0
> 
> 时间：2013-04-17T08:17:24.197
> 
> 标签：javascript, asp.net-mvc, json, razor, deployment

在一个 MVC4 网站上工作（目前开发仍处于早期阶段），我通过 IIS Express 对其进行调试（这里没什么特别的，我从`Internet Application`模板开始，然后 F5 离开。

我有这段 javascript：

```
function packData(F) {
     F.data.value = Base64.encode(
         JSON.stringify({
             'myField': 'myData'
         })
     );
     F.submit();
} 
```

从局部视图调用此函数：

```
@using (Html.BeginForm(actionName: "autoMagic", controllerName: "Magic", method: FormMethod.Post, htmlAttributes: new { id = "autoMagicForm" }))
    {
        @Html.Hidden("data")            
        <input type="button" value="go!" onclick="packData(this.form)" />
    } 
```

该表单应该充当传入 POST 请求的“模拟”。

我做了什么：

*   发布设置为`File System`（在我的电脑上的本地文件夹上）启用预编译，然后我将整个文件夹复制粘贴到远程服务器。我还没有设置任何 web.config 转换（还）。

*   浏览器相同：Internet Explorer 10

*   在远程服务器上，该文件夹设置为 IIS 中的应用程序，具有自己的应用程序池（框架 4.0，集成）

我所看到的：

*   在 IIS Express (localhost) 上，一切都按预期工作：javascript 函数和调用的控制器都成功地执行了它们的魔法。

*   在部署服务器 (http:testserver/site) 上，IE 抱怨**JSON is undefined**。

看起来我错过了什么？

我尝试使用 IE 的 F12 工具捕获网络流量，但我没有看到任何`404`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T10:18:59.303

在早期版本的 IE（更少的 IE8）JSON 对象（window.JSON）没有定义