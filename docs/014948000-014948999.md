# StackOverflow 问答 14948000-14948999

# c# - 单击与保持，保持导致语法错误

> ID：14948002
> 
> 赞同：0
> 
> 时间：2013-02-19T00:48:34.037
> 
> 标签：c#, silverlight, xaml, windows-phone

这是我的 XAML：

```
 <Button x:Name = "Helloworld"
                        Content = "Hello world"
                        Grid.Column = "0"
                        Grid.Row = "0"
                        Click="playEvent"
                        Hold="setEvent"
                        Tag="/Sounds/helloworld.mp3" 
                    />
                    <Button x:Name = "Helloworld_ring"
                        Grid.Column = "1"
                        Grid.Row = "0"
                        HorizontalAlignment="Stretch"
                        VerticalAlignment="Stretch"
                        Click="setEvent"
                        Tag="/Sounds/helloworld.mp3">
                        <Image Source="/Images/note.png" Stretch="Fill" Height="30" Width="30" />
                    </Button> 
```

后面的代码如下：

```
namespace MyApp
{
    public partial class MainPage : PhoneApplicationPage
    {
        Button playSrcButton;
        Button setSrcButton;
        SaveRingtoneTask saveRingtoneChooser;

        public MainPage()
        {
            InitializeComponent();

            saveRingtoneChooser = new SaveRingtoneTask();
            saveRingtoneChooser.Completed += new EventHandler<TaskEventArgs>(saveRingtoneChooser_Completed);
        }

        private void playEvent(object sender, RoutedEventArgs e)
        {
            playSrcButton = e.OriginalSource as Button;
            playFile(playSrcButton.Tag.ToString(), playSrcButton.Content.ToString());
        }

        private void setEvent(object sender, RoutedEventArgs e)
        {
            setSrcButton = e.OriginalSource as Button;
            saveRingtoneChooser.Source = new Uri(setSrcButton.Tag.ToString());
            saveRingtoneChooser.DisplayName = setSrcButton.Content.ToString();
            saveRingtoneChooser.Show();
        }
    }
} 
```

我遇到的问题是，如果我在单击 Helloworld_ring 按钮时设置 setEvent 函数，那么一切正常。如果我尝试消除这些按钮并在 Helloworld 函数上使用 Hold 事件，我会收到错误消息

```
An unhandled exception of type 'System.NullReferenceException' occurred in MyApp.dll 
```

我的理解是非常不起眼的。我注意到的问题是，在调试期间**setSrcButton**变量没有获得**e.OriginalSource**的值，但这*仅*在我使用 Helloworld 上的 Hold 事件时发生。当我在 Helloworld_ring 上使用 Click 事件时，一切正常。

感谢所有帮助。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T09:43:28.607

也许 e.OriginalSource 不是您的按钮。

在这种情况下，发件人应该是您的按钮，因此请尝试使用它。

```
 setSrcButton = sender as Button; 
```

# asp.net-mvc-3 - 将 XHTML 转换为 MVC .ASP.NET Web 应用程序的 Word Doc/Docx 的好方法和简单方法？

> ID：14948005
> 
> 赞同：2
> 
> 时间：2013-02-19T00:49:13.483
> 
> 标签：asp.net-mvc-3, xhtml-1.0-strict

我正在寻找一种在 ASP.NET MVC3 应用程序中将 XHTML 文档转换为 Word 文档的简单方法。

我知道许多组件，例如 Syncfusion 的 DocIO 和 Aspose，但想知道我是否错过了一个更简单的选项。

我在 XHTML 中进行格式化，所以这实际上是关于将 XHTML 转换为 Word。

编辑

我宁愿认为一种方法可能是从 Razor 转换中获取结果，即 View(myModel) 并添加一个 MIME 类型的 MS-Word，例如：

```
string myXHtml = View(MyModel) 
```

然后添加“application/msword”标头上下文代码并返回。我刚刚明白这在 Webforms 中很容易，但在 MVC 中更棘手。只是研究，但对想法持开放态度。

谢谢，

山姆

# authentication - 使用 Spring Web Service 添加 Spring Security @Secured 注解会禁用 Web Service 端点

> ID：14948007
> 
> 赞同：3
> 
> 时间：2013-02-19T00:49:24.233
> 
> 标签：authentication, soap, spring-security, authorization, spring-ws

**问题：当我在 Web 服务方法中添加 @Secured 注释时，端点被禁用意味着我在调用 ws 端点时收到*No endpoint mapping found错误。***

背景：我的 Spring Web 服务被保护以使用 UsernameToken 和 Timestamp 对消费者进行身份验证，这在我添加 @Secured 以强制执行基于角色的授权之前工作得非常好。拦截器在 spring-ws-servlet.xml 中使用 <sws:interceptors> 进行配置。框架版本：

*   春天ws：2.0.5.RELEASE
*   spring ws 安全性：2.0.5.RELEASE
*   春季安全：3.0.7.RELEASE
*   wss4j：1.5.12

这是我正在尝试做的示例。

## 端点：

```
 ...

    @Endpoint
    public class XYZEndpoint implements XYZService{
        @Override
        @PayloadRoot(localPart = XYZ_REQUEST, namespace = NAMESPACE_XYZ)
        //@Secured({"ROLE_XYZ"})
        public XYZResponse produceXYZ(XYZRequest request) {
                    ...
            return new XYZResponse();
        }
    }

... 
```

我正在使用下面的 global-method-security 来启用 @Secured 注释，如 spring 文档所述。

## spring-ws-servlet.xml

```
 ...

    <security:global-method-security secured-annotations="enabled" />

.... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T14:30:12.293

我遇到了同样的问题并且能够解决它

```
<security:global-method-security proxy-target-class="true" secured-annotations="enabled"/> 
```

# string - 定期拆分字符串

> ID：14948018
> 
> 赞同：5
> 
> 时间：2013-02-19T00:51:04.077
> 
> 标签：string, r

我想定期拆分一个字符串。我的问题与这个问题几乎相同：[如何将字符串拆分为给定长度的子字符串？](https://stackoverflow.com/questions/11619616/how-to-split-a-string-into-substrings-of-a-given-length)除了我在数据集中有一列字符串而不是一个字符串。

这是一个示例数据集：

```
df = read.table(text = "
my.id   X1    
010101   1
010102   1
010103   1
010104   1
020101   1
020112   1
021701   0
021802   0
133301   0
133302   0  
241114   0
241215   0
", header = TRUE, colClasses=c('character', 'numeric'), stringsAsFactors = FALSE) 
```

这是期望的结果。我宁愿删除前导零，如图所示：

```
desired.result = read.table(text = "
A1 A2 A3   X1
 1  1  1   1
 1  1  2   1
 1  1  3   1
 1  1  4   1
 2  1  1   1
 2  1 12   1
 2 17  1   0
 2 18  2   0
13 33  1   0
13 33  2   0
24 11 14   0
24 12 15   0
", header = TRUE, colClasses=c('numeric', 'numeric', 'numeric', 'numeric'), stringsAsFactors = FALSE) 
```

这是一个似乎接近的循环，也许我可以使用它。但是，我认为可能有更有效的方法。

```
for(i in 1:nrow(df)) {
     print(substring(df$my.id[i], seq(1, 5, 2), seq(2, 6, 2)))
} 
```

此`apply`语句不起作用：

```
apply(df$my.id, 1,  function(x) substring(df$my.id[x], seq(1, 5, 2), seq(2, 6, 2))   ) 
```

感谢您的任何建议。我更喜欢 base R 中的解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T01:14:00.363

我发现`read.fwf`应用于 a`textConnection`是解决此问题的各种方法中最有效和最容易理解的。它具有内置于 read.* 函数中的自动类别检测的优势。

```
cbind( read.fwf(file=textConnection(df$my.id), 
              widths=c(2,2,2), col.names=paste0("A", 1:3)), 
     X1=df$X1)
#-----------
   A1 A2 A3 X1
1   1  1  1  1
2   1  1  2  1
3   1  1  3  1
4   1  1  4  1
5   2  1  1  1
6   2  1 12  1
7   2 17  1  0
8   2 18  2  0
9  13 33  1  0
10 13 33  2  0
11 24 11 14  0
12 24 12 15  0 
```

（我相信大约 6 年前我从 Rhelp 上的 Gabor Grothendieck 那里学到了这一点。）

如果您更喜欢正则表达式策略，请查看此策略，它每两个位置插入一个选项卡并通过 read.table 运行它。非常紧凑：

```
read.table(text=gsub('(.{2})','\\1\t',df$my.id) )
#---------
   V1 V2 V3
1   1  1  1
2   1  1  2
3   1  1  3
4   1  1  4
5   2  1  1
6   2  1 12
7   2 17  1
8   2 18  2
9  13 33  1
10 13 33  2
11 24 11 14
12 24 12 15 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T01:00:07.873

您快到了。将您的更改`apply`为`sapply`or `vapply`，并更改`substring`适用的内容：

```
splt <- sapply(df$my.id, function(x) substring(x, seq(1, 5, 2), seq(2, 6, 2))   )
#this will produce the same thing
splt <- vapply(df$my.id, function(x) substring(x, seq(1, 5, 2), seq(2, 6, 2)),c("","","")   )
#     010101 010102 010103 010104 020101 020112 021701 021802 133301 133302 241114 241215
#[1,] "01"   "01"   "01"   "01"   "02"   "02"   "02"   "02"   "13"   "13"   "24"   "24"  
#[2,] "01"   "01"   "01"   "01"   "01"   "01"   "17"   "18"   "33"   "33"   "11"   "12"  
#[3,] "01"   "02"   "03"   "04"   "01"   "12"   "01"   "02"   "01"   "02"   "14"   "15" 
```

你想让这些数字。矩阵也应该被转置以使用数据框。我们可以通过以下方式完成这两个步骤：

```
splt <- apply(splt,1,as.numeric)
    # [,1] [,2] [,3]
 # [1,]    1    1    1
 # [2,]    1    1    2
 # [3,]    1    1    3
 # [4,]    1    1    4
 # [5,]    2    1    1
 # [6,]    2    1   12
 # [7,]    2   17    1
 # [8,]    2   18    2
 # [9,]   13   33    1
# [10,]   13   33    2
# [11,]   24   11   14
# [12,]   24   12   15 
```

现在您需要将其与旧数据框重新组合在一起。可能类似于以下内容。

```
df <- cbind(splt,df)
#    1  2  3  my.id X1
#1   1  1  1 010101  1
#2   1  1  2 010102  1
#3   1  1  3 010103  1
#4   1  1  4 010104  1
#5   2  1  1 020101  1
#6   2  1 12 020112  1
#7   2 17  1 021701  0
#8   2 18  2 021802  0
#9  13 33  1 133301  0
#10 13 33  2 133302  0
#11 24 11 14 241114  0
#12 24 12 15 241215  0 
```

您可以根据需要使用类似`names(df)[1:3] <- c("A1","A2","A3")`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T01:01:44.140

使用`gsub` 和一些正则表达式。我会做这样的事情（不是很优雅，但它可以完成工作）

```
cbind(
as.numeric(gsub('([0-9]{2})([0-9]{2})([0-9]{2})','\\1',df$my.id)),
as.numeric(gsub('([0-9]{2})([0-9]{2})([0-9]{2})','\\2',df$my.id)),
as.numeric(gsub('([0-9]{2})([0-9]{2})([0-9]{2})','\\3',df$my.id)),
df$X1)

    [,1] [,2] [,3] [,4]
 [1,]    1    1    1    1
 [2,]    1    1    2    1
 [3,]    1    1    3    1
 [4,]    1    1    4    1
 [5,]    2    1    1    1
 [6,]    2    1   12    1
 [7,]    2   17    1    0
 [8,]    2   18    2    0
 [9,]   13   33    1    0
[10,]   13   33    2    0
[11,]   24   11   14    0
[12,]   24   12   15    0 
```

**编辑**

我说它不是很优雅，所以我添加了@mnel 命题：

```
x <- gsub('([0-9]{2})([0-9]{2})([0-9]{2})','\\1-\\2-\\3',df$my.id)
do.call(rbind, lapply(strsplit(x,'-'), as.numeric)) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T01:05:44.860

您还可以使用`regex`提取每个两位数的部分。

我已经将它与`str_extract_all`from结合使用`stringr`

```
do.call(rbind,lapply(str_extract_all(as.character(df[['my.id']]), pattern = '[[:digit:]]{2}'), as.numeric)) 
```

# php - PHP EAS 加密/Python 解密

> ID：14948019
> 
> 赞同：2
> 
> 时间：2013-02-19T00:51:04.040
> 
> 标签：php, python, encryption, aes

我需要在 php 中加密文本并在 python 中解密。

这是我的 php 代码（标准示例）：

```
$key = "df811af36fcafd6dbd092955aa6fb15b";
$string = 'Hello World ++++';
$iv='1234567812345678';
$encrypted = base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $string, MCRYPT_MODE_CBC, $iv));
$decrypted = rtrim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, base64_decode($encrypted), MCRYPT_MODE_CBC, $iv), "\0");
var_dump($encrypted);
var_dump($decrypted); 
```

结果是：

```
string(44) "scPCUNHEMHZK5BoXbOixX6DUpo9Z5+uvmW4lW0bnpSY="
string(16) "Hello World ++++" 
```

然后我在python中尝试：

```
import base64
from Crypto.Cipher import AES

ciphertext=base64.decodestring("scPCUNHEMHZK5BoXbOixX6DUpo9Z5+uvmW4lW0bnpSY=")
key="df811af36fcafd6dbd092955aa6fb15b"
iv='1234567812345678'
cipher=AES.new(key, AES.MODE_CBC, iv)
cipher.decrypt(ciphertext) 
```

但结果是：

```
'\xe6I\x7fb\xe3{\xcf\x02\xcf^\x06\x06B`\xfd\xc71\x8d\x1f\xb5f.>K\xfe/\xdf\xdf\xb0\x96\x9b^' 
```

我找到了这些 python 和 php 模块。纯python和php的另一种实现。

[http://wiki.birth-online.de/snippets/python/aes-rijndael](http://wiki.birth-online.de/snippets/python/aes-rijndael)
[http://wiki.birth-online.de/snippets/php/aes-rijndael](http://wiki.birth-online.de/snippets/php/aes-rijndael)

这两个模块一起工作没有问题，但我需要在 php 和 python 中使用标准/著名模块。（php 中的 mcrypt 和 python 中的 Crypto）

* * *

我刚刚在我的 php 代码中将 MCRYPT_RIJNDAEL_256 更改为 MCRYPT_RIJNDAEL_128，一切看起来都很好。

但是我怎样才能拥有 256 位密钥？

# java - 为什么我的 UI 在浏览器中运行与在我的计算机上运行 (Java Swing) 时会丢失格式？

> ID：14948021
> 
> 赞同：8
> 
> 时间：2013-02-19T00:51:19.583
> 
> 标签：java, swing, awt, layout-manager, gridbaglayout

对于我的 CSE 205（Java 编程 2）课程，我们必须设计一个非常简单的 GUI 小程序。我对 Swing 非常熟悉，之前在我自己的一些项目中使用过它。我设计的程序几乎没有问题，当从 Eclipse 运行时，它在我的计算机上看起来很完美：

![在此处输入图像描述](../Images/1a5771660a539e9280308e21e7e814f4.png)

但是当我在线提交它时，它在浏览器中运行时，用户界面变得严重失智，恢复到默认状态：

![在此处输入图像描述](../Images/05f4ae57a0f2a49a4ba4c81d11447900.png)

我已经习惯了使用 GridBagLayout，因为它很简单。这就是我在这里使用的。CreatePanel 和 SelectPanel 类（如第一张图片所示）都扩展了 JPanel（根据我的教授）。我设置每个使用：

```
this.setLayout(new GridBagLayout()); 
```

以及每个组件：

```
//Call the method addItem() to add the create button to the panel
addItem(this, createB,0,2,2,1,defaultInset,GridBagConstraints.CENTER);

 //-------
    public void addItem(JPanel p, JComponent c, int x, int y, int width, int height, int[] inset, int align)
      {
            GridBagConstraints gc = new GridBagConstraints();
            gc.gridx = x;
            gc.gridy = y;
            gc.gridwidth = width;
            gc.gridheight = height;
            gc.weightx = 0;
            gc.weighty = 0;
            gc.insets = new Insets(inset[0],inset[1],inset[2],inset[3]);
            gc.anchor = align;
            gc.fill = GridBagConstraints.NONE;
            p.add(c, gc);
        } 
```

有人对可能发生的事情有任何想法吗？考虑到我一半以上的时间都花在让布局看起来正确上，我想要一个简单的修复。如果需要，我可以发布更多代码。感谢您的任何建议。

- 编辑 -

好吧，我根据@MadProgrammer 的建议做了一些尝试。我想我已经缩小了问题所在。

这是我用来将 JTextField 的大小设置到标签“输入宠物类型：

```
petTypeTF = new JTextField("");
petTypeTF.setPreferredSize(new Dimension(125, 60)); 
```

现在，如果我将代码更改为其他任何内容，例如设置列数：

```
petTypeTF = new JTextField("",12);
 petTypeTF.setPreferredSize(new Dimension(125, 60)); 
```

当我在线提交它时，我得到的 UI 看起来与它相同。与设置列数有关的事情似乎搞砸了。这对任何人都有帮助吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T01:49:35.623

确实没有足够的代码来确定问题的全部范围，但一些想法可能会有所帮助。

`GridBagLayout`如果可能的话，会想尝试根据首选尺寸来布置它的组件。如果不能，它将查看最小尺寸。

确保您正在创建带有列（以及在文本区域的情况下）行的文本组件。这将根据许多重要因素自动确定组件的首选尺寸。

![在此处输入图像描述](../Images/40d68d3ab8f9ec1d06011c8431ac6df9.png)

```
public class BadLayout11 {

    public static void main(String[] args) {
        new BadLayout11();
    }

    public BadLayout11() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                JTabbedPane pane = new JTabbedPane();
                pane.add("Pet List Creation", new TestPane());

                JFrame frame = new JFrame("Test");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.add(pane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

            }
        });
    }

    public class TestPane extends JPanel {

        public TestPane() {

            setLayout(new GridBagLayout());

            JPanel fields = new JPanel(new GridBagLayout());

            JTextField field = new JTextField(12);
            JTextArea area = new JTextArea(10, 20);
            JLabel label = new JLabel("Enter a Pet Type");
            JButton button = new JButton("Create a Pet");

            GridBagConstraints gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.anchor = GridBagConstraints.WEST;

            fields.add(label, gbc);
            gbc.weightx = 1;
            gbc.gridx++;
            fields.add(field, gbc);

            gbc.fill = GridBagConstraints.NONE;
            gbc.gridx = 0;
            gbc.weightx = 0;
            gbc.gridy++;
            gbc.gridwidth = 2;
            gbc.anchor = GridBagConstraints.CENTER;
            fields.add(button, gbc);

            gbc = new GridBagConstraints();
            gbc.gridx = 0;
            gbc.gridy = 0;
            gbc.insets = new Insets(2, 2, 2, 2);
            gbc.gridheight = GridBagConstraints.REMAINDER;
            gbc.weightx = 1;
            gbc.weighty = 1;
            gbc.fill = GridBagConstraints.BOTH;
            add(fields, gbc);
            gbc.gridx++;
            add(new JScrollPane(area), gbc);

        }

    }

} 
```

不幸的是，在某些时候，一切都会达到根本无法维持布局的程度，并且事情会崩溃或只是显得被剪裁。

在这些情况下，您可以将整个容器放在 a`JScrollPane`中，但在这种情况下，我认为这是最坏的情况。

# razor - asp.net mvc4 下拉列表返回显示在同一视图中的模型

> ID：14948024
> 
> 赞同：0
> 
> 时间：2013-02-19T00:51:39.533
> 
> 标签：razor, asp.net-mvc-4, html-select

我一直在试图弄清楚如何将从下拉列表中重读的值传递回与结果显示相同的下拉列表的视图

控制器：

```
//
// GET: /ProductByID/

[HttpGet]
public ActionResult ProductById()
{
    ViewBag.IDNumbers = ddlItems;
    return View();
}

//
// POST: /ProductByID/

[HttpPost]
public ActionResult ProductById(FormCollection formdata)
{
    string selected = formdata["IDNumbers"];
    int id = int.Parse(selected);
    Product p = items.GetByID(id);
    return View(p);
} 
```

风景：

```
@model ProductsMVC_Basic.Models.Product

@{
    ViewBag.Title = "Product By Id";
}

<script src="~/Scripts/jquery-1.7.1.js"></script>
<script>
    $(function () {
        $("#IDNumbers").change(function () {
            if ($("#IDNumbers").val() != "") {
                this.form.submit();
            }
        });
    });
</script>

<div>
    @using (Html.BeginForm("ProductById", "Home", FormMethod.Post))
    {
        @Html.DropDownList("IDNumbers", "--Select One--") 
    }

</div> 
```

这可以填充下拉列表并将表单数据发送回控制器。我的问题是如何在帖子视图中显示模型数据，以便显示下拉菜单，并且模型数据也显示为名称和类别等。

每次我发回同一个视图时，我都会收到一条错误消息，指出“没有具有键 'IDNumbers' 的 'IEnumerable' 类型的 ViewData 项。” 在 PostView 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:13:02.067

首先，原因

> “没有具有键 'IDNumbers' 的 'IEnumerable' 类型的 ViewData 项。”

因为，这个**DropdownList**将绑定来自 ViewBag/ViewData 的数据 name =`"IDNumbers"`

在您的 [Post]Action 中，没有**Viewbag.IDNumbers**！=> 所以这就是你得到那个错误的原因。

解决方案：

1.收到数据后重定向到[GET] ProductById。

> ```
> [HttpGet]
> public ActionResult ProductById(int iMyCode)
> {
>     ViewBag.IDNumbers = ddlItems;//set your default value here
>     return View();
> } 
> ```

2.使用 URL 重新加载您的页面，`Query String`而不是提交表单。

3.通过Javascript在客户端设置您的默认值（下拉列表），通过AJAX从服务器获取您的附加数据。通过 Cookie/Session/Query String 存储这些值。

我希望这个能帮上忙

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:17:50.720

您的示例存在问题：

1.  不知道您要实现什么，但看起来您陷入了 ASP.NET Web 窗体“回发”模型。无需在每次 DDL 更改时提交表单。更好的方法是通过 AJAX 将产品 ID 传递给服务器并对响应进行处理。
2.  不要使用`FormCollection`. 使用 ViewModel 并绑定到您的视图中，然后将其作为`[HttpPost]`操作方法中的参数接受。
3.  不要使用`@Html.DropDownList`, use `@Html.DropDownListFor(model => model.SomeDDl)`, where`SomeDddl`将是`SelectList`您的 ViewModel 上的类型属性（与上面的 2 相关）。

所以也许解释一下你想要达到的目标，我（和其他人）可以提供进一步的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T05:42:17.380

发生这种情况是因为您正在使用`ViewBag`存储下拉列表值。

相反，如果您使用模型属性绑定 Dropdownlist，即使发布数据也不会丢失 DropDownList 数据，情况会更好。

因此，答案是也可以`ViewBag.IDNumbers = ddlItems`在您的帖子中使用。

```
[HttpPost]
public ActionResult ProductById(FormCollection formdata)
{
    ViewBag.IDNumbers = ddlItems; //Set the ViewBag items 
    string selected = formdata["IDNumbers"];
    int id = int.Parse(selected);
    Product p = items.GetByID(id);
    return View(p);
} 
```

# python - re.findall() 在第一次运行时找到结果，但不是第二次

> ID：14948025
> 
> 赞同：0
> 
> 时间：2013-02-19T00:52:19.627
> 
> 标签：python, regex

我正在对 url 列表中的 ping 进行快速 rtt 比较。我想提取 ip，这样我就可以运行 whois 并获取地理位置。当我在一个以 google.com 和 facebook.com 开头的 url 列表上运行它时会发生什么，即使 ping 的输出格式相同，ip 与 google 的正则表达式匹配，但不是 facebook。下面的代码可以更好地了解正在发生的事情。

```
urls = ["google.com", "facebook.com"]
ip_regex = re.compile('[1-9]+\\.[1-9]+\\.[1-9]+\\.[1-9]+')
time_regex = re.compile(' [\.1-9]+/.*/.*/.* ms') 

for url in urls:
    output = ""
    print url

    ping = subprocess.Popen(["ping", "-c", "3", url], stdout=subprocess.PIPE)

    while ping.poll() == None:
        output += ping.stdout.read()

    output += ping.stdout.read()

    #DEBUG
    print "OUTPUT"
    print output

    ip = ip_regex.findall(output)
    print ip

    ip = ip[0]

    times = time_regex.findall(output)

    print times

    os.system('whois ' + ip + ' | egrep "Country|StateProv|City"') 
```

其他人的 ip_regex 在 facebook (#2) 上是否失败？为什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T00:56:07.983

facebook 的 IP 中有零。`1-9`不包括零。

当我们这样做时，将原始字符串用于正则表达式：

```
r'[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+' 
```

使用`\d`类匹配数字：

```
r'\d+\.\d+\.\d+\.\d+' 
```

不要忘记修复其他正则表达式：

```
r' [\.0-9]+/.*/.*/.* ms' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T01:01:29.003

您用于查找 IP 地址的正则表达式是 b0rked。这是一个更好的：

```
ip_pattern = r'(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\.(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])){3}' 
```

# python - 在 OpenERP 6.1 中创建菜单项时访问规则禁止的操作

> ID：14948028
> 
> 赞同：2
> 
> 时间：2013-02-19T00:52:56.727
> 
> 标签：python, openerp

当我尝试在 OpenERP 6.1 中创建新菜单项以打开窗口时，出现以下错误：

> 访问错误
> 
> 访问规则禁止的操作，或对已删除的文档执行的操作（操作：创建，文档类型：ir.values）。

我总是可以使用绕过所有安全检查的神奇管理员帐户，但如果可能的话，我宁愿进行更好的控制。为什么会失败，如何允许某些管理员创建菜单项？

我特别感兴趣，因为我想编写一个创建菜单项的模块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:52:56.727

经过一堆挖掘，我找到了错误的原因。有一条记录规则叫做“默认值：仅更改个人价值观”。这是在[修订版 3560.1.7中添加的，并在](http://bazaar.launchpad.net/%7Eopenerp/openobject-server/6.1/revision/3560.1.7)[修订版 3713](http://bazaar.launchpad.net/%7Eopenerp/openobject-server/6.1/revision/3713)中合并。提交评论说：

> [IMP] ir.values：提高安全性：用户只能写入个人默认值
> 
> 需要管理员访问权限才能为每个人设置默认值，以及更改操作绑定。

看来您应该只能使用魔术管理员帐户更改操作绑定，并且更改菜单项需要您更改操作绑定。

你怎么能解决这个问题？好吧，您可以使记录规则更加复杂。您需要限制大多数用户编辑他们自己的默认值，并让管理用户编辑`ir_values`表中的所有记录。我们所有的用户都在 Human Resources/Employee 组中，所以我将该组添加到“默认值：仅更改个人值”规则中，以阻止它成为全局规则。`ir_values`然后我添加了一个名为“默认值和操作：更改任何值”的新规则。我使用了一个虚拟域过滤器：`[(1,'=',1)]`并将其分配给管理/配置组。现在大多数用户只会匹配第一条规则，并且只能编辑自己的默认值。配置组中的任何人都将匹配这两个规则，因此这些规则将与 OR 组合在一起，他们将能够编辑表中的所有记录。完成这项工作的重要一点是，您需要一个或一组所有用户都是其成员的组。

# php - 在 PHP 中确定 .csv 分隔符

> ID：14948036
> 
> 赞同：3
> 
> 时间：2013-02-19T00:54:15.990
> 
> 标签：php, parsing, csv, delimiter, fgetcsv

**注意：**我首先要说我知道我可能遗漏了一些非常明显的东西。我正处于看不到简单解决方案的编码迷雾中。

**问题：**我用 PHP 编写了一个脚本来解析 .csv 文件，选择包含电子邮件地址的列，然后将它们放入数据库。现在，我发现用户正在尝试上传具有 .csv 文件类型但实际上不是逗号分隔的文件。我正在尝试编写一个能够正确确定分隔符（制表符、换行符、空格等）的函数，但是遇到了一些问题。我想我想获得所有这些地址的数组，以便键的数量可以增加对该分隔符的信任。

**编码：**

```
$filename = "../some/path/test.csv";   
if (($handle = fopen($fileName, "r")) !== FALSE) {
    $delimiters = array(',', ' ', "\t", "\n");
    $delimNum = 0;
    foreach ($delimiters as $delimiter) {
      $row = 0;
      while (($data = fgetcsv($handle, 1000, $delimiter)) !== FALSE) {
        $data = (string)$data[0];
        $delimiterList[$delimNum] = explode($delimiter, $data);
        $row++;
    }
    $delimNum++;
}
die(print_r($delimiterList));
} 
```

**结果：**

```
Array
(
[0] => Array
    (
        [0] => email
peter.parker@example.com
atticus.finch@example.com
steve.rogers@example.com
phileas.fogg@example.com
s.winston@example.com
paul.revere@example.com
fscott.fitzgerald@example.com
jules.verne@example.com
martin.luther@example.com
ulysses.grant@example.com
tony.stark@example.com
    )
) 
```

就像我说的，我知道这可能是处理这个问题的错误方法，所以我很感谢你能提供的任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:20:59.567

用可用性而不是代码来解决这个问题。让用户选择分隔符。

但是，由于他们可能不知道 CSV 等人用什么制表符分隔，所以只给他们看一个预览。他们可以从选项中进行选择，直到输出看起来正确且呈表格状。

然后根据选择的格式对其进行解析。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-27T10:00:43.853

我将展示一个可能是一个很好的解决方案的算法，不要认为这个问题很容易，这就像猜测，所以这个问题不会有一个完美的解决方案。

相反，人们应该尝试使用统计数据或其他一些启发式方法来接近 99% 的良好解决方案。我是一名计算机科学家，也是一名开发人员，但这是机器学习或数据科学家给出的近似值。

这里是：

1.  从文件的所有行中选择一些随机行，比如 10
2.  计算每个分隔符候选的出现次数
3.  用这个数字计算每个分隔符的平均值和方差。
4.  [标准化数字，这意味着使用自定义线性函数](https://stats.stackexchange.com/questions/70801/how-to-normalize-data-to-0-1-range)给出 0 到 1 之间的数字
5.  [为每个分隔符和总和的两个值](https://en.wikipedia.org/wiki/Weighted_sum_model)赋予权重，这给出了每个分隔符的分数，您可以将其用作决策

看起来很复杂，但它是一个相当不错且不难的算法。下面是一个计算示例：

**分隔符计数（直方图）**

```
|         | ; | , | \t  |
|---------|---|---|-----|
| LINE 1  | 3 | 1 |  13 |
| LINE 2  | 2 | 1 |   0 |
| LINE 3  | 3 | 1 |   0 |
| LINE 4  | 3 | 1 | 124 |
| LINE 5  | 2 | 1 |   2 |
| LINE 6  | 2 | 1 |   2 |
| LINE 7  | 3 | 1 |  12 |
| LINE 8  | 3 | 1 |   0 |
| LINE 9  | 3 | 1 |   0 |
| LINE 10 | 3 | 1 |   0 | 
```

**计算和最终分数**

```
|            |  ;   |  ,   |  \t  |  | WEIGHTS |  ;   |  ,   | \t |
|------------|------|------|------|--|---------|------|------|----|
| AVERAGE    |  2,7 |    1 | 15,3 |  |         |      |      |    |
| NORMALIZED | 0,17 | 0,06 |    1 |  | 1       | 0,17 | 0,06 |  1 |
| VARIANCE   | 0,21 |    0 | 1335 |  |         |      |      |    |
| NORMALIZED | 0,99 |    1 |    0 |  | 3       | 2,99 |    3 |  0 |
|            |      |      |      |  | SCORE   | 3,17 | 3,06 |  1 | 
```

如您所见，分隔符';' 有更好的分数。我认为加权方差比发现的分隔符的平均值也好。更有可能有一个文件，其中分隔符在每行中变化不大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T02:14:00.030

这不是一个完美的解决方案，但它可能会帮助你 - 如果你不能问分隔符是什么。

不再尝试解析为 CSV，而是尝试检索有效的电子邮件地址。我不认为空格、逗号、制表符或换行符是有效的电子邮件部分，对吧？（谁知道；）查看这个关于[使用正则表达式验证电子邮件的](https://stackoverflow.com/questions/12026842/how-to-validate-an-email-address-in-php)讨论- 这样您就可以看到这个解决方案的一些缺陷。

但是，然后我会使用 preg_match_all() 编写正则表达式，并以有效的电子邮件格式检索所有字符串的列表。

祝你好运！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-29T06:30:12.357

`SplFileObject::getCsvControl`在手册中

我直到为时已晚才找到它，所以写了一个运行良好的函数。如果它有用/感兴趣，我的方法是：

我使用`$handle`和`$ColName`参数`$ColName`可选

$ColName 允许您检查哪个分隔符在第一条记录中找到预期的标题列名称，如果 csv 文件有标题行。

如果没有标题行，或者您不知道列名，它会采用默认检查：哪个分隔符找到同一记录的大多数字段（这通常是正确的）。然后，我还检查该分隔符是否为接下来的几行中的每一行返回相同数量的字段。

fgetcsv 似乎在块中工作，并强制每条记录具有与块中的最大值相同的字段数，因此即使每条记录的字段数量不同，这也适用

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-12T13:23:54.227

这是我的解决方案。如果您知道您期望有多少列，它就可以工作。最后，分隔符是 $actual_separation_character

```
$separator_1=",";
$separator_2=";";
$separator_3="\t";
$separator_4=":";
$separator_5="|";

$separator_1_number=0;
$separator_2_number=0;
$separator_3_number=0;
$separator_4_number=0;
$separator_5_number=0;

/* YOU NEED TO CHANGE THIS VARIABLE */
// Expected number of separation character ( 3 colums ==> 2 sepearation caharacter / row )
$expected_separation_character_number=2;  

$file = fopen("upload/filename.csv","r");
while(! feof($file)) //read file rows
{
    $row= fgets($file);

    $row_1_replace=str_replace($separator_1,"",$row);
    $row_1_length=strlen($row)-strlen($row_1_replace);

    if(($row_1_length==$expected_separation_character_number)or($expected_separation_character_number==0)){
    $separator_1_number=$separator_1_number+$row_1_length;
    }

    $row_2_replace=str_replace($separator_2,"",$row);
    $row_2_length=strlen($row)-strlen($row_2_replace);

    if(($row_2_length==$expected_separation_character_number)or($expected_separation_character_number==0)){
    $separator_2_number=$separator_2_number+$row_2_length;
    }

    $row_3_replace=str_replace($separator_3,"",$row);
    $row_3_length=strlen($row)-strlen($row_3_replace);

    if(($row_3_length==$expected_separation_character_number)or($expected_separation_character_number==0)){
    $separator_3_number=$separator_3_number+$row_3_length;
    }

    $row_4_replace=str_replace($separator_4,"",$row);
    $row_4_length=strlen($row)-strlen($row_4_replace);

    if(($row_4_length==$expected_separation_character_number)or($expected_separation_character_number==0)){
    $separator_4_number=$separator_4_number+$row_4_length;
    }

    $row_5_replace=str_replace($separator_5,"",$row);
    $row_5_length=strlen($row)-strlen($row_5_replace);

    if(($row_5_length==$expected_separation_character_number)or($expected_separation_character_number==0)){
    $separator_5_number=$separator_5_number+$row_5_length;
    }

} // while(! feof($file))  END
fclose($file);

/* THE FILE ACTUAL SEPARATOR (delimiter) CHARACTER */
/* $actual_separation_character */

if ($separator_1_number==max($separator_1_number,$separator_2_number,$separator_3_number,$separator_4_number,$separator_5_number)){$actual_separation_character=$separator_1;}
else if ($separator_2_number==max($separator_1_number,$separator_2_number,$separator_3_number,$separator_4_number,$separator_5_number)){$actual_separation_character=$separator_2;}
else if ($separator_3_number==max($separator_1_number,$separator_2_number,$separator_3_number,$separator_4_number,$separator_5_number)){$actual_separation_character=$separator_3;}
else if ($separator_4_number==max($separator_1_number,$separator_2_number,$separator_3_number,$separator_4_number,$separator_5_number)){$actual_separation_character=$separator_4;}
else if ($separator_5_number==max($separator_1_number,$separator_2_number,$separator_3_number,$separator_4_number,$separator_5_number)){$actual_separation_character=$separator_5;}
else {$actual_separation_character=";";}

/* 
if the number of columns more than what you expect, do something ...
*/

if ($expected_separation_character_number>0){
if ($separator_1_number==0 and $separator_2_number==0 and $separator_3_number==0 and $separator_4_number==0 and $separator_5_number==0){/* do something ! more columns than expected ! */}
} 
```

# java - 位图不缩放到高度Android

> ID：14948039
> 
> 赞同：1
> 
> 时间：2013-02-19T00:54:31.960
> 
> 标签：java, android, android-canvas

我有一个 480 x 800 的位图，用于我正在创建的动态壁纸。当我在模拟器上测试时，位图宽度和高度可以很好地缩放，但是当我在三星 S3 上测试时，位图宽度可以很好地缩放，但高度太短，底部显示黑色矩形。我应该使用标准位图大小还是我的代码有问题？：

```
 public void doDraw(Canvas c) {
    c.drawColor(Color.rgb(0,0,0)); // Clear the background.

    final int canvasWidth = getScreenWidth();
    final int canvasHeight = getScreenHeight();

    int imageWidth = mBitmap.getWidth();
    int imageHeight = mBitmap.getHeight();

    float scaleFactor = Math.min( (float)canvasWidth / imageWidth, 
                                  (float)canvasHeight / imageHeight );
    Bitmap scaled = Bitmap.createScaledBitmap(  mBitmap, 
                                                (int)(scaleFactor * imageWidth), 
                                                (int)(scaleFactor * imageHeight), 
                                                true );
    c.drawBitmap(scaled, 0, 0, null); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:17:54.757

我想你想要`Math.max()`而不是`Math.min()`

# javascript - jQuery - CSS 类正在应用但未生效

> ID：14948044
> 
> 赞同：1
> 
> 时间：2013-02-19T00:55:36.740
> 
> 标签：javascript, jquery, html, css

我在`.addClass`选择选项卡时应用 CSS 类，并且它还将类添加到父父选项卡。正在添加该类，但 CSS 似乎没有对父类父类生效（如果这听起来很尴尬，请道歉）。

CSS：

```
.selectedTab{
  color:#234 !important;
  background-color:white !important;
} 
```

HTML：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Visit Northern Ireland</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.1/themes/base/jquery-ui.css" />
    <script src="js/common.js"></script>
    <script src="js/jquery.tools.min.js"></script>
    <link rel="stylesheet" type="text/css" href="css/accordion.css">
    <link rel="stylesheet" type="text/css" href="css/armagh.css">
    <link rel="stylesheet" type="text/css" href="css/common.css">
  </head>
  <body>
    <div id="centeredPane">
    <nav>
      <ul id="css-tabs">
        <li><a href="#" class="contentLinks selectedTab" name="home">Home</a></li>
        <li><a href="#" name="activities">Activities</a>
          <div class="subnav" id="activitiesLink">
            <a href="#" name="armagh" class="contentLinks">Co. Armagh</a>
            <a href="#" name="antrim" class="contentLinks">Co. Antrim</a>
            <a href="#" name="down" class="contentLinks">Co. Down</a>
            <a href="#" name="fermanagh" class="contentLinks">Co. Fermanagh</a>
            <a href="#" name="londonderry" class="contentLinks">Co. Londonderry</a>
            <a href="#" name="tryone" class="contentLinks">Co. Tyrone</a>
          </div>
        </li>
        <li><a href="#" name="restaurants">Restaurants</a>
          <div class="subnav" id="restaurantLink">
            <a href="#" name="indian" class="contentLinks">Indian</a>
            <a href="#" name="tapas" class="contentLinks">Tapas</a>
            <a href="#" name="american" class="contentLinks">American</a>
            <a href="#" name="italian" class="contentLinks">Italian</a>
          </div>
        </li>
        <li><a href="#" class="contentLinks" name="game">Game</a></li>
      </ul>
    </nav>
    <div class="content" id="home">home</div>
    <div class="content" id="armagh">armagh</div>
    <div class="content" id="antrim">antrim</div>
    <div class="content" id="down">down</div>
    <div class="content" id="fermanagh">fermanagh</div>
    <div class="content" id="londonderry">londonderry</div>
    <div class="content" id="tryone">tyrone</div>
    <div class="content" id="indian">indian</div>
    <div class="content" id="tapas">tapas</div>
    <div class="content" id="american">american</div>
    <div class="content" id="italian">italian</div>
    <div class="content" id="game">game</div>
    <footer>For more information visit <a href="http://www.discovernorthernireland.com/" target="_blank">Discover Northern Ireland</a></footer>
  </div>
  </body>
</html> 
```

jQuery：

```
$('.contentLinks').click(function() {
  $(this).addClass("selectedTab");
  $('a').not(this).removeClass("selectedTab");
  //var is_element_li = $(this).parent().parent().get(0).tagName.is("li");
  var is_element_li = $(this).parent().parent().is("li");
  if(is_element_li){
    $(this).parent().parent().addClass("selectedTab");
  }
  var nameAttribute = $(this).attr('name');
  nameAttribute = "#"+ nameAttribute;
  $(nameAttribute).show();  
  $('div.content').not(nameAttribute).hide();
}); 
```

如何获得要应用的样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:02:12.460

您需要将`selectedTab`类添加到锚元素，而不是`li`元素：

```
$(this).parent().parent().children("a").addClass("selectedTab"); 
```

# javascript - Node.js 脚本加载不是从浏览器（外部）加载，而是从命令（localhost）加载

> ID：14948046
> 
> 赞同：0
> 
> 时间：2013-02-19T00:55:44.567
> 
> 标签：javascript, node.js

我已经在基于 linux 的 vps（使用 SSH）上成功安装了 Node.JS 和[Balloons.IO聊天室。](https://github.com/gravityonmars/Balloons.IO/)输入`curl http://mydomain.com:9191/`ssh 命令时，我可以看到 html 已加载。但是，当尝试从我的浏览器访问同一页面时，加载需要一些时间，然后说无法访问该页面。知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:17:30.550

## 我的常见诊断步骤：

* * *

### 1）检查您的应用程序是否实际上正在侦听它应该在的端口，您可以这样做：

```
sudo netstat -anp | grep :9191 
```

您应该看到您的应用正在收听，`0.0.0.0:9191`或者`your.ip.address.here:9191`如果您看到类似的`127.0.0.1:9191`内容，那么它只是在本地收听，因此您将无法访问它。

### 2）确保您的防火墙没有阻止这些端口，如果您正在使用`iptables`，您可以检查：

```
sudo iptables --list 
```

这将打印防火墙规则，您可以检查您的端口是否被阻止（或允许）。

### 3）尝试在本地连接。我的第三步通常是在本地尝试使用`curl`，您已经完成了这一步，但是对于此处的其他登陆，您可以执行以下操作：

```
curl http://localhost:9191/ 
```

看看你会得到什么

### 4) 尝试远程连接。如果上面的一切看起来都很好，请尝试从远程主机运行详细的 curl 并查看您得到的结果：

```
curl -v http://mydomain.com:9191/ 
```

这将显示标题和正文输出，以便您查看远程主机是否响应；如果没有，则检查原始端口是否可以通过 telnet 访问：

```
telnet mydomain.com 9191 
```

如果成功将打印如下内容：

```
Trying your.ip.address.here...
Connected to mydomain.com.
Escape character is '^]'. 
```

如果它失败了，它就会挂起，`Trying...`如果它失败了，那么你的防火墙阻塞了端口，你的主机阻塞了端口，或者你的应用程序没有监听端口。如果您的上述测试通过了，请联系您的主机，因为可能会出现其他问题，您应该能够从他们那里获得支持。

# c# - 生成 HTML 表格 - 行控件

> ID：14948050
> 
> 赞同：1
> 
> 时间：2013-02-19T00:55:53.567
> 
> 标签：c#, html, html-table

我正在编写一个应用程序来生成目录的“图像摘要”。图像摘要是一个 HTML 文档，其中包含一个包含该目录图像的表格。我正在尝试使用 StreamWriter 创建 HTML 文档。我希望每行 ( `<tr>`) 包含 6 张图像。我怎样才能做到这一点？我已经搜索过，找不到有用的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:09:14.660

凌乱的例子..但有效（我假设您不是从 ASP.NET 执行此操作，正如其他人所假设的那样，因为您使用的是 a `StreamWriter`）：

```
static void renderHTML(string folder, string outputFile, int imagesPerRow, params string[] extensions) {
        string[] images = Directory.GetFiles(folder);

        using (var sw = new StreamWriter(File.OpenWrite(outputFile))) {
            sw.WriteLine("<!html><head><title>Example</title></head><body><table>");
            int counter = 0;
            sw.Write("<tr>");
            foreach (string image in images.Where(x => extensions.Any(y => x.Contains(y)))) {
                if (counter == imagesPerRow) {
                    sw.Write("</tr>");
                    sw.Write("<tr>");
                    counter = 0;
                }
                sw.Write("<td style=\"border: 1px solid;\">");
                sw.Write(string.Format("<img src=\"{0}\" />", image));
                sw.Write("</td>");

                counter++;
            }
            sw.Write("</tr></table></body></html>");
        }
    } 
```

你可以这样称呼它：

```
renderHTML(@"C:\folder", @"C:\output.html", 6, new string[] { ".jpg", ".png", ".gif" }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:03:41.913

我会使用[ListView](http://msdn.microsoft.com/en-us/library/bb398790%28v=vs.100%29.aspx)。这样的事情应该让你开始：

```
<asp:ListView runat="server" ID="ListView1" DataSourceID="SqlDataSource1">
  <LayoutTemplate>
    <table runat="server" id="table1" >
      <tr runat="server" id="itemPlaceholder" ></tr>
    </table>
  </LayoutTemplate>
  <ItemTemplate>
    <tr runat="server">
      <td runat="server">
        <asp:Image ID="Image1" runat="server" ImageUrl='<%#Eval("ImageUrl") %>' />
      </td>
    </tr>
  </ItemTemplate>
</asp:ListView> 
```

这只会为每一行数据创建一个带有单个 td 的 tr。您显然想用图像创建六个 td，而不仅仅是一个。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T01:04:27.233

在我看来，最简单的方法是从[Directory.GetFiles()](http://msdn.microsoft.com/en-us/library/07wt70x2(v=vs.100).aspx)开始。这将返回一个`string[]`文件路径。

从那里，您可以将该集合绑定到中继器。有关显示每行 n 个元素的巧妙方法，请参阅[此问题](https://stackoverflow.com/questions/1765942/how-do-you-show-x-items-per-row-in-a-repeater)的答案。该线程中还有一篇文章的链接，该链接显示了如何使用 ListView 进行操作。

# php - PHP 在错误的地方寻找文件

> ID：14948058
> 
> 赞同：1
> 
> 时间：2013-02-19T00:56:31.163
> 
> 标签：php, file, path, directory

我是一名业余网络开发人员，我正试图让我的网站第一次上线。该站点正在运行并且所有文件都已上传，但该站点未加载我的 PHP 包含。

这是错误消息：

> 警告：include(includes/header.php) [function.include]：未能打开流：第3 行的 /home4/ *myUsername /public_html/index.php 中没有此类文件或目录*

我怎样才能让 PHP 看起来`public_html/`而不是`public_html/index.php`？

编辑：我尝试编辑包含路径。它似乎并没有改变 php 在哪里寻找文件。此外，我的包含在 localhost 中正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:17:11.517

我将假设这是您的文件夹结构：

*   public_html/index.php
*   public_html/includes/header.php

通常（并非总是）， $_SERVER['DOCUMENT_ROOT'] 现在将反映基本 public_html 目录的路径（我假设这是基于您的消息的上下文）。这意味着您可以始终以这种方式指向根。- 无论你有 /index.php 还是 /my/deep/file/structure.php

尝试使用 index.php 上的 include 语句

```
<?php
include($_SERVER['DOCUMENT_ROOT'] . '/includes/header.php'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:07:57.530

您可能需要更改 php.ini 文件中的包含路径或用于`set_include_path()`更改包含路径。

如果您想了解更多信息，这里是函数调用的[手动条目。](http://php.net/manual/en/function.set-include-path.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:03:55.357

您是否已经检查过包含文件？

在给定的。包括（文件夹包含/file_header.php）；

# java - 自定义 ListView TextView 项都在顶部显示灰色条

> ID：14948059
> 
> 赞同：1
> 
> 时间：2013-02-19T00:56:31.867
> 
> 标签：java, android, android-listview

我在应用程序的 ListActivity 中使用的自定义 ListView 有问题。我的问题是通过 ArrayAdapter 添加到 ListView 的所有 TextView 项目都显示在它们上方的灰色条上。我将包含显示的 ListView 的图像，但由于我没有 stackoverflow 站点要求的 10 的声誉，所以我不能。

用于生成 ListView 的布局文件（index.xml）定义如下：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout  
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="fill_parent"
    android:layout_width="fill_parent"
    android:orientation="vertical" >

    <ListView 
        android:divider="@color/mg_red" 
        android:dividerHeight="1sp"
        android:id="@android:id/list"
        android:layout_height="fill_parent"
        android:layout_width="fill_parent" />

    <TextView 
        android:title="text_view"
        android:background="@drawable/listitemback"
        android:cacheColorHint="@drawable/listitemback"
        android:id="@+id/listItem"
        android:layout_width="fill_parent"    
        android:layout_height="fill_parent" 
        android:padding="10sp"    
        android:textColor="@color/listitemtext"
        android:textSize="16sp" />    

</LinearLayout> 
```

用于显示列表的 ListActivity 代码如下：

```
public class IndexListActivity extends ListActivity
{
    private ListView m_listView = null;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {       
        try 
        {
            if (MGApplication.DEBUG_BUILD)
            Log.i("TMG", "IndexListActivity.onCreate");

        super.onCreate(savedInstanceState);

        // Get our global data object.
        MGApplication mgApp = (MGApplication) getApplication();

        // Set view layout
        SetContentView(R.layout.index);

        // Get references to our ListView and AdView objects
        m_listView = (ListView) findViewById(android.R.id.list);

            // Create a new ArrayAdapter object that will be used to initialize 
        // the underlying ListView object.
        ArrayAdapter<String> aa = new ArrayAdapter<String>(this, R.layout.index,
                                                               R.id.listItem,
                                                               mgApp.m_strAZRhymeNames);

        // Assign array adapter
        m_listView.setAdapter(aa);
        }        
        catch (Exception e)
        {
        }

        return;
    }   
} 
```

非常感谢任何帮助，因为我对这个问题束手无策。我想我已经尝试了所有可以在网上找到的建议，但我无法删除灰色条。

谢谢你，

鲍勃

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:02:19.103

您必须在**test.xml**文件中设置此属性。

```
 <ListView
            android:id="@+id/listview_middle"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_margin="1dip"
            android:layout_weight="1"
            android:background="#ffffff"
            android:cacheColorHint="@android:color/transparent"
            android:choiceMode="singleChoice"
            android:scrollingCache="false" /> 
```

**并在listview 对象**中设置一些属性。

```
lv.setVerticalFadingEdgeEnabled(false); 
```

在我这边，这是完美的工作。

# jquery - if else循环中的jQuery UI对话框

> ID：14948060
> 
> 赞同：0
> 
> 时间：2013-02-19T00:56:39.807
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

只有当我的 if 语句的条件为真时，我才想激活（加载）jQuery 对话框。像这样的东西：

```
if (/*condition is true*/) {
  var dialog = '<div id="resultDialog" title="Search Results"><p>Results to your search.  </p></div>';
  $('body').append(dialog);
  $("#resultDialog").dialog({
    buttons: {
        "No": function () {
            $(this).dialog("close");
        },
        "Yes": function () {
            //do something
        }
    }
  });
  $("#resultDialog").dialog("open");
}else{
        //do something else
    }; 
```

该对话框不依赖于单击/更改事件。截至目前，当我调试时，我可以看到条件为真，但对话框仍然没有出现。任何建议/帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T00:58:53.220

以开头`$(document).ready(function(){`和结尾的代码`});`另外，您调用的是`.dialog()`on`#dialog`而不是`#resultDialog`. 您不需要使用调用来打开对话框，除非您将默认值更改`autoOpen`为`false`。

您的代码，已修复和清理：

```
$(document).ready(function(){
  if (/*condition is true*/) {
    var dialog = '<div id="resultDialog" title="Search Results" style="display:none"><p>Results to your search.</p></div>';
    $('body').append(dialog);
    $("#resultDialog").dialog({
      buttons: {
        "No": function () {
            $(this).dialog("close");
        },
        "Yes": function () {
            //do something
        }
      }
   });
 }else{
   //do something else
 }
}); 
```

# kendo-ui - kendo ui上传，仅限制1个文档

> ID：14948062
> 
> 赞同：3
> 
> 时间：2013-02-19T00:56:48.450
> 
> 标签：kendo-ui

您能否建议您如何只允许在 kendo ui 上传中上传 1 个文档。如果文件已被选中，则我们无法上传新文件。请在下面找到代码。谢谢

```
<div class="configuration k-widget k-header">
    <span class="infoHead">Information</span>
    <p>
        The Upload can be used as a drop-in replacement
        for file input elements.
    </p>
    <p>
        This "synchronous" mode does not require
        special handling on the server.
    </p>
</div>
<form method="post" action='@Url.Action("Submit")' style="width:45%">
    <div>
        @(Html.Kendo().Upload()
            .Name("files")
        )
        <p>
            <input type="submit" value="Submit" class="k-button" />
        </p>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T03:39:21.077

[参见 Kendo.MVC.UI.Fluent Doc's for **Multiple(System.Boolean)**](http://docs.kendoui.com/api/wrappers/aspnet-mvc/Kendo.Mvc.UI.Fluent/UploadBuilder#multiplesystemboolean)

```
@(Html.Kendo().Upload()
            .Name("files")
            .Multiple(false)
        ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-30T13:52:39.930

如果您使用的是 javascript/html5 版本：

```
$("#selctor").kendoUpload({ "multiple": false }); 
```

# iphone - 调整 UICollectionView 滚动速度/灵敏度

> ID：14948065
> 
> 赞同：25
> 
> 时间：2013-02-19T00:57:02.393
> 
> 标签：iphone, ios, objective-c, ipad, uicollectionview

我正在尝试减慢 UICollectionView 中的滚动速度。一切都很好，细胞之间的距离也很好，但它移动得太快了。

如何调整滚动的灵敏度或速度？

[编辑]我忘了提到我已经尝试过：

```
self.collectionView.decelerationRate = UIScrollViewDecelerationRateFast; 
```

和

```
self.collectionView.decelerationRate = UIScrollViewDecelerationRateNormal; 
```

速度没有明显变化...

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-19T01:13:44.350

`UICollectionView`是 的子类`UIScrollView`，因此您可以`decelerationRate`在集合视图控制器中调整`viewDidLoad`，如下所示：

目标-C：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.collectionView.decelerationRate = UIScrollViewDecelerationRateFast;
}; 
```

迅速：

```
override func viewDidLoad() {
    super.viewDidLoad()

    self.collectionView.decelerationRate = UIScrollViewDecelerationRateFast
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-02-12T01:44:23.680

对于任何想在 Swift 中进行操作的人

```
 self.collectionView.decelerationRate = UIScrollViewDecelerationRateFast 
```

斯威夫特 5：

```
 self.collectionView.decelerationRate = UIScrollView.DecelerationRate.fast 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-08T01:59:49.947

对于那些不使用 a 的人`UICollectionViewController`，我一直在寻找一种方法来完成这项工作。事实证明，如果您将自己子类化`UICollectionView`并设置`self.decelerationRate = UIScrollViewDecelerationRateFast`为所需的`init(coder aDecoder:)`方法，那么您就可以开始了。

对此的推测是 UICollectionView 不喜欢在布局创建后调整减速率。我不能确定，我在这方面浪费了足够多的时间。只是以为我会发布答案。

> **SDK：** iOS 9+ **Xcode：** 8.3.2 **Swift：** 3.1

# java - Google App Engine 中一对多关系的分页 - JPA

> ID：14948066
> 
> 赞同：0
> 
> 时间：2013-02-19T00:57:25.547
> 
> 标签：java, google-app-engine, jpa, pagination

我在 Google App Engine 中有一对多的关系。我正在使用 JPA

```
public class Profile {
    @OneToMany(targetEntity=Gift.class, mappedBy="user", fetch=FetchType.LAZY, cascade={CascadeType.PERSIST, CascadeType.REMOVE})
    @OrderBy("date DESC")
    private List<Gift> gift = null;

    ... 
}

public class Gift {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Key key;

    @ManyToOne(fetch=FetchType.LAZY, targetEntity=Profile.class)
    private Profile user = null;

    ... 
} 
```

如何为子实体“礼物”进行分页？假设我必须先退回第 1-10 个礼物，然后是第 11-20 个礼物。

目前，我返回了整个列表。

```
public List<Gift> listGift(String email) throws PersistenceException{
    EntityManager em = EMF.get().createEntityManager();
    EntityTransaction tx = null;
    List<Gift> list = null;

    try{
        tx = em.getTransaction();
        tx.begin();

        Profile user = em.find(Profile.class, email);
        list = new ArrayList<Gift>(user.getGift());

        tx.commit();
    }finally{
        try {
            if (tx != null && tx.isActive()) {
                tx.rollback();
            }
        } finally {
            em.close();
        }
    }

    return list;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T02:27:13.300

尝试这个

```
public List<Gift> listGift(String email,int p) throws PersistenceException{
    EntityManager em = EMF.get().createEntityManager();
    EntityTransaction tx = null;
    List<Gift> list = null;
    List pagedList = new ArrayList();
    int view=10;
    try{
        tx = em.getTransaction();
        tx.begin();

        Profile user = em.find(Profile.class, email);
        list = new ArrayList<Gift>(user.getGift());
        int begin=(p-1)*view;
        int end = p*view;
        if(end> list.size())
            end=list.size();
        for (int i=begin;i<end;i++){
            pagedList.add(list.get(i));
        }

        tx.commit();
    }finally{
        try {
            if (tx != null && tx.isActive()) {
                tx.rollback();
            }
        } finally {
            em.close();
        }
    }

    return pagedList;
} 
```

通常我在我的控制器和视图层（使用jstl的jsp）中进行分页。但也许您的要求需要在 DAO 层执行此操作。

# php - .htaccess 域斜杠用户名到用户名页面 php

> ID：14948067
> 
> 赞同：0
> 
> 时间：2013-02-19T00:57:49.973
> 
> 标签：php, html, .htaccess

我得到一个错误。或我需要帮助的问题。我想让用户更容易直接访问用户个人资料，例如 facebook 和 twitter。例如：twitter.com/kanyewest。我的 .htaccess 看起来像这样 请帮助我如何使我的重定向类似于 twitter 等。

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} ^(.*(data|tmp|log).*\.php)$
RewriteRule .*$ – [F,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L]

</IfModule> 
```

我的网站设置为 www.mydomain.com/u/1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:03:45.350

不是 100% 肯定，但尝试这样的事情：

```
RewriteRule /([a-zA-Z0-9]+)/$ /u/$1 
```

这将在不更改 url的情况下发送对`mydomain.com/username`to的请求。`mydomain.com/u/username`

# c++ - typeid 名称 类 不同 C++

> ID：14948076
> 
> 赞同：0
> 
> 时间：2013-02-19T00:58:38.650
> 
> 标签：c++

我正在使用行 typeid(obj).name() 来获取对象 obj 的类名，并得到名称 7Encrypt。但是该类的名称只是没有前缀“7”的加密（即）。

为什么会这样？

# javascript - 流星和杰基尔

> ID：14948080
> 
> 赞同：0
> 
> 时间：2013-02-19T00:59:30.067
> 
> 标签：javascript, meteor, jekyll, octopress

我想知道是否可以使用 Meteor 建立一个使用 Jekyll 来制作我的博客文章的网站。甚至使用 Octopress 和 Meteor。我将如何去做，我不确定这是否可能拥有 Meteor 服务器和 Jekyll 服务器。我基本上是想找出使用​​ Meteor 写博客的最简单方法。

[https://github.com/mojombo/jekyll](https://github.com/mojombo/jekyll)

[http://octopress.org/docs/](http://octopress.org/docs/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:19:37.753

如果不制作单独的服务器和堆栈，您将无法使用 jekyll，这确实会增加您的工作量，因为您也必须与流星服务器进行通信。Jekyll 是一颗红宝石，所以我想它最好搭配 Rails 堆栈

你可以看看一些看起来像 Meteor 博客的 github 项目，它们可能是一个很好的起点：

*   [https://github.com/jefflam/meteor-blog](https://github.com/jefflam/meteor-blog)
*   [https://github.com/xydudu/a-meteor-blog](https://github.com/xydudu/a-meteor-blog)

# pyqt - 树莓派：在没有 LXDE 的情况下启动 pyqt 应用程序

> ID：14948081
> 
> 赞同：1
> 
> 时间：2013-02-19T00:59:32.450
> 
> 标签：pyqt, boot, raspberry-pi, raspbian

我使用 PYQT4 制作了一个全屏 GUI 应用程序。这是 Raspberry Pi 的唯一用途。有没有办法在启动后启动它，而不启动不必要的 Raspbian GUI？它使用 gpio 信号和 uinput，因此它应该以 root 身份运行。

# java - Java-7 与 Multi-Catch 中的自定义包装器异常

> ID：14948082
> 
> 赞同：0
> 
> 时间：2013-02-19T00:59:33.743
> 
> 标签：java, exception, java-7

`catch`包装器异常和它们拥有的多语句之间有什么区别。它们不一样吗？我可以使用 multi-`catch`而不是构建自己的异常并在它的包装器中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:50:12.233

我认为您混淆了两个概念。multi-catch 是一种方便的说法，这里是处理这些条件的代码。它只是提供了旧代码的更简洁版本。而包装异常允许您为调用者提供更有意义的异常 - 这是您如何设计应用程序的问题。例如，我过去曾研究过选择将所有数据访问异常包装在 DAOException 中的应用程序。呼叫者通常知道出了什么问题，并可以采取相应的行动。如果需要，他们还可以查看内部以查看细节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:55:22.583

良好的做法是避免在您拥有用于完全相同目的的标准异常时创建自定义异常。但更重要的是，用你的一个代码包装方法调用会使你的代码可读性降低。此外，处理新异常是一项消耗资源的操作！

此外，某些代码块可能会引发本质上非常不同的异常。即使异常处理在您的情况下相似，将它们视为类似的东西也不是很明智的主意。

# jquery - JQuery UI 滑块处理淡入淡出颜色直到被点击

> ID：14948086
> 
> 赞同：0
> 
> 时间：2013-02-19T00:59:59.777
> 
> 标签：jquery, jquery-ui, slider

我有一个使用 Jquery UI 的垂直滑块，我想让它更明显一些应该有人点击它。为了实现这一点，我想我希望它在第一次点击之前改变颜色。我试图找出要更改的元素，但失败了。

我在尝试：

```
$("secrets-slider.a").animate("background-color","orange",500).animate("background-color","red",500); 
```

然后设置超时并再次调用该函数。但是，secret-slider.a 似乎无法引用句柄。我该怎么做？

编辑：因为我被要求提供代码，所以它是（虽然我不明白为什么需要它，因为它是股票 jquery UI）

[http://jsfiddle.net/tdWdw/](http://jsfiddle.net/tdWdw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:54:14.327

我不太确定你希望如何改变颜色，但这里有一个选项：

[http://jsfiddle.net/tdWdw/2](http://jsfiddle.net/tdWdw/2)

```
 $(function () {
      $("#slider-vertical").slider({
          orientation: "vertical",
          range: "min",
          min: 0,
          max: 100,
          value: 60,
          slide: function (event, ui) {
              $("#amount").val(ui.value);
              $('#slider-vertical a').css('background-color', 'gray');
          }
      });
  }); 
```

# knockout.js - 这慢是因为 knockout.js 或 jquery UI 对话框吗？

> ID：14948093
> 
> 赞同：2
> 
> 时间：2013-02-19T01:00:11.470
> 
> 标签：knockout.js, jquery-ui-dialog

在我真正的网络应用程序中，我有一个显示文件夹的树，在某些情况下，我在 jQuery UI 对话框中显示这棵树。我已经剥离了我所能做的一切，并在这个小提琴中举了一个问题的例子：

[http://jsfiddle.net/shopguy/gRbef/](http://jsfiddle.net/shopguy/gRbef/)

如果单击按钮 1，它将切换对话框的可见性。

如果单击按钮 2，它将切换内联（无对话框）列表可见性。

在 Firefox 中进行大部分测试。单击按钮 1 大约需要 1.5 秒，显示或隐藏（即使隐藏很慢）。单击按钮 2 几乎是即时的。

**这是 jQuery UI 对话框的问题吗？它对每个隐藏/显示的 DOM 有很大作用吗？或者这只是一个问题，因为我在模板中有它？KO是否仅仅因为它在这样的模板中而重新创建dom？**

这两种情况都使用模板，但对话版本有一个额外的模板，用于对话本身。他们都使用子文件夹的模板......因为我不确定如何使用 KO 进行递归树状布局。

这是小提琴中的主要 HTML，显示了我的带有树形布局的对话框：

```
<div data-bind="jqDialog: {autoOpen: false, modal: false, width: 350, height: 400, minWidth: 350, minHeight: 300 }, template: { name: 'folderDetailsTemplate' } , openDialog: dlg1"></div>
<script type="text/html" id="folderDetailsTemplate">
List<br />
<ul data-bind="template: { name: 'tmpl1', foreach: folders}"></ul>
</script>
<script type="text/html" id="tmpl1">
<li>
    <a data-bind="visible: expanded">-</a>
    <a data-bind="visible: !expanded">+</a>
    <a>
    <span data-bind="text: name"></span>
    </a>
    <ul data-bind="template: { name: 'tmpl1', foreach: folders}">
    </ul>
</li>
</script> 
```

这是脚本：

```
 ko.bindingHandlers.jqDialog = {
        init: function (element, valueAccessor) {
            var options = ko.utils.unwrapObservable(valueAccessor());
            $(element).dialog(options);
        }
    };

    ko.bindingHandlers.openDialog = {
        update: function (element, valueAccessor) {
            var value = ko.utils.unwrapObservable(valueAccessor());
            if (value) {
                $(element).dialog("open");
            } else {
                $(element).dialog("close");
            }
        }
    }

    function Folder(i, l) {
        this.name = "Test Folder " + i;
        this.folders = ko.observableArray();
        this.expanded = true;

        if (i < 4 && l < 4) {
            var fs = new Array();
            for (var x = 0; x < 2; x++) {
                var f = new Folder(x, l + 1);
                fs.push(f);
            }
            this.folders(fs);
        }

    }

    var vm = function () {
        var self = this;
        self.folders = ko.observableArray();
        var fs = new Array();
        for (var x = 0; x < 50; x++) {
            var f = new Folder(x, 0);
            fs.push(f);
        }
        self.folders(fs);
        self.dlg1 = ko.observable();
        self.list1 = ko.observable();

        self.test1 = function () {
            self.dlg1(!self.dlg1());
        }

        self.test2 = function () {
            self.list1(!self.list1());
        }
    }

    $(function () {
        ko.applyBindings(new vm());
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T01:16:24.743

让它变慢的原因是`openDialog`和`template`绑定在同一元素的绑定字符串中组合在一起。因此，每次`openDialog`更新时，模板绑定也会更新并重新呈现您的模板。我喜欢将模板绑定放在嵌套的注释绑定中，如下所示：

```
<div data-bind="jqDialog: {autoOpen: false, modal: false, width: 350, height: 400, minWidth: 350, minHeight: 300 }, openDialog: dlg1">
        <!-- ko template: 'folderDetailsTemplate' --><!-- /ko -->
</div> 
```

这一切都在这里非常详细：[http ://www.knockmeout.net/2012/06/knockoutjs-performance-gotcha-3-all-bindings.html](http://www.knockmeout.net/2012/06/knockoutjs-performance-gotcha-3-all-bindings.html)

# linux - 从脚本执行命令时没有此类文件或目录错误

> ID：14948094
> 
> 赞同：1
> 
> 时间：2013-02-19T01:00:13.950
> 
> 标签：linux, bash

我正在编写一个从 MySQL 获取命令并一一执行的脚本。我的问题是我无法从脚本执行命令：

> ./bash.sh: 第 26 行: /myscript.sh -c "": 没有这样的文件或目录

第 26 行是我希望执行的命令（“$com”）。如果我尝试手动运行命令，通过回显“$ com”的内容而不是从终端运行它，它就可以工作。

我究竟做错了什么？

```
if [ ! "${#array[*]}" -eq "0" ]; then
for (( i=0 ; i<cnt ; i++ )); do
        id=$(echo "${array[$i]}" | sed 's@\t@^@g' | cut -f'1' -d'^')
        com=$(echo "${array[$i]}" | sed 's@\t@^@g' | cut -f'2' -d'^')
        imp=$(echo "${array[$i]}" | sed 's@\t@^@g' | cut -f'3' -d'^')

        if [[ "$id" = [0-9]* ]]; then
                "$com"
                echo "DELETE FROM list WHERE id='$id'" | mysql "$DB_USER" -u "$DB_USER" -p"$DB_PASS"
        fi
done
else
        echo "The list is empty"
fi 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-30T11:14:52.763

**添加为社区 Wiki**

这个问题在*Vaughn Cato*的评论中得到了解决，并且自 3 月以来一直没有看到 OP。

必须使用接受答案，`eval`因此脚本中的 if 语句将是：

```
if [[ "$id" = [0-9]* ]]; then
   eval "$com"
   echo "DELETE FROM list WHERE id='$id'" | mysql "$DB_USER" -u "$DB_USER" -p"$DB_PASS"
fi 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-30T11:03:58.580

改变

```
"$com" 
```

而不是

```
$com 
```

（记住：太多的引用可能和太少一样有害）

比

```
eval "$com" 
```

*   `eval`仅用于撤消引用的不良影响是不必要的复杂。

# list - OCaml 解析列表

> ID：14948096
> 
> 赞同：0
> 
> 时间：2013-02-19T01:00:44.287
> 
> 标签：list, parsing, ocaml, lexical-analysis, cons

我想在我的我的解析器的一部分

```
listOps:
   | combOps COLONCOLON listOps { Bin($1,Cons,$3) }
   | combOps SEMI listOps       { Bin($1,Cons,$3) }
   | combOps                    { $1 }
; 
```

我有这个更进一步。

```
 | LBRAC RBRAC                { NilExpr }
   | LBRAC listOps RBRAC        { $2 } 
```

但我不确定如何让它读取“[”和“]”之间的列表，因为它的末尾有一个“::[]”。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:18:47.103

Your grammar as given doesn't look quite right to me. In essence it treats `::` and `;` identically. So it would treat `[a::b]` and `[a;b]` as the same. If you figure out how to handle the two cases differently, you'll probably find a place handle the `[]` at the end of a list specified with `::`.

As a side comment, if you allow `a :: b :: []` you are allowing the right side of `::` to be a non-empty list. So you might want `a :: [b]` to be allowed, as it is in OCaml. Or maybe you'd rather not, it's your grammar!

# java - Java 无法加载或找到主类

> ID：14948098
> 
> 赞同：0
> 
> 时间：2013-02-19T01:01:05.407
> 
> 标签：java, user-interface, netbeans

我正在使用 Netbeans 编写 Java 程序。我希望这个程序基本上可以打开一个应用程序，但将它全部放在一个区域中......（Windows已经完成了......但是w / e）。当我打开这个程序时，正如标题中所说，我收到错误“无法加载或找到主类”我不知道为什么会这样，因为我制作的大多数其他程序都没有这个问题。

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package org.javaapplication10;
import java.io.*;
/**
 *
 * @author Ethan
 */
public class javaapplication10 extends javax.swing.JFrame {

    /**
     * Creates new form javaapplication10
     */
    public javaapplication10() {
        initComponents();
    }

    /**
     * This method is called from within the constructor to initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is always
     * regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">                          
    private void initComponents() {

        jButton1 = new javax.swing.JButton();
        jButton2 = new javax.swing.JButton();
        jButton3 = new javax.swing.JButton();
        jButton4 = new javax.swing.JButton();

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        jButton1.setText("Minecraft");
        jButton1.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                jButton1ActionPerformed(evt);
            }
        });

        jButton2.setText("FTB");

        jButton3.setText("Tekkit");

        jButton4.setText("Chrome");

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addComponent(jButton3, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
            .addGroup(layout.createSequentialGroup()
                .addGroup(layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING, false)
                    .addComponent(jButton1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
                    .addComponent(jButton2, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
                .addGap(0, 0, Short.MAX_VALUE))
            .addComponent(jButton4, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addComponent(jButton1)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton2)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton3)
                .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                .addComponent(jButton4))
        );

        pack();
    }// </editor-fold>                        

    private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {                                         
 try {
      String line;
      Process p = Runtime.getRuntime().exec("cmd C:\\Users\\Ethan\\Desktop\\minecraft.bat");
      BufferedReader bri = new BufferedReader
        (new InputStreamReader(p.getInputStream()));
      BufferedReader bre = new BufferedReader
        (new InputStreamReader(p.getErrorStream()));
      while ((line = bri.readLine()) != null) {
        System.out.println(line);
      }
      bri.close();
      while ((line = bre.readLine()) != null) {
        System.out.println(line);
      }
      bre.close();
      p.waitFor();
      System.out.println("Done.");
    }
    catch (Exception err) {
      err.printStackTrace();
    }                                        
    }
    /**
     * @param args the command line arguments
     */
    public static void main(String args[]) {
        /* Set the Nimbus look and feel */
        //<editor-fold defaultstate="collapsed" desc=" Look and feel setting code (optional) ">
        /* If Nimbus (introduced in Java SE 6) is not available, stay with the default look and feel.
         * For details see http://download.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html 
         */
        try {
            for (javax.swing.UIManager.LookAndFeelInfo info : javax.swing.UIManager.getInstalledLookAndFeels()) {
                if ("Nimbus".equals(info.getName())) {
                    javax.swing.UIManager.setLookAndFeel(info.getClassName());
                    break;
                }
            }
        } catch (ClassNotFoundException ex) {
            java.util.logging.Logger.getLogger(javaapplication10.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (InstantiationException ex) {
            java.util.logging.Logger.getLogger(javaapplication10.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (IllegalAccessException ex) {
            java.util.logging.Logger.getLogger(javaapplication10.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        } catch (javax.swing.UnsupportedLookAndFeelException ex) {
            java.util.logging.Logger.getLogger(javaapplication10.class.getName()).log(java.util.logging.Level.SEVERE, null, ex);
        }
        //</editor-fold>

        /* Create and display the form */
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new javaapplication10().setVisible(true);
            }
        });
    }
    // Variables declaration - do not modify                     
    private javax.swing.JButton jButton1;
    private javax.swing.JButton jButton2;
    private javax.swing.JButton jButton3;
    private javax.swing.JButton jButton4;
    // End of variables declaration                   
} 
```

在 netbeans 中，我有一些看起来像这样的东西：“JavaApplication10”“源包”“javaapplication10”“javaapplication10.java”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:23:26.737

![enter image description here](../Images/b17f4c4ae2a6b36bb758b6608c7f4a62.png)

Make sure your **Main Class** field is having correct value. In your case, it should be `org.javaapplication10.javaapplication10`

# html5-canvas - EaselJS：更改形状对象尺寸

> ID：14948099
> 
> 赞同：3
> 
> 时间：2013-02-19T01:01:09.607
> 
> 标签：html5-canvas, easeljs, createjs

总菜鸟问题。我一直在滥用谷歌，出于某种原因，令人惊讶的是找不到任何关于这...？我觉得我在这里遗漏了一些东西。:P

我目前有一个 resize() 函数，可以将画布尺寸修改为窗口的大小。在一个最小的示例（也使用 jQuery）中，我有一个引用我的 Shape 对象的变量。根据文件，形状对象不包括宽度和高度属性。调整形状对象大小的最有效方法是什么？动态删除/重绘？

这就是我所拥有的：

```
 var stage;

            var bgColor;

            $(document).ready(function(){
                init();
            });

            function init()
            {
                stage = new createjs.Stage("canvasStage");

                bgColor = new createjs.Shape();
                bgColor.graphics.beginFill("#000000").drawRect(0,0, stage.canvas.width, stage.canvas.width);

                stage.addChild(bgColor);

                $(window).resize(function(){windowResize();});
                windowResize();
            }

            function windowResize()
            {
                stage.canvas.width = $(window).width();
                stage.canvas.height = $(window).height();
                //bgColor.width = $(window).height();// No width property
                //bgColor.height = $(window).height();// NO height property

                stage.update();} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:02:06.583

您可以使用形状的 scaleX 和 scaleY 来缩放形状。

注意：Shape Object 扩展了 DisplayObject，因此您可能还想查看 DisplayObject 文档以了解更多有用的属性/方法。

```
myShape.scaleX=1.2;
myShape.scaleY=1.2; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-21T06:31:14.243

正如@markE 所提到的，只有 scaleX 和 scaleY 可用。

解决此问题的一种方法是实例化具有 1px 宽度和 1px 高度的形状：

```
mc_bg = new createjs.Shape();
mc_bg.graphics.beginFill("#CCCCCC").drawRect(0,0,1,1);
stage.addChild(mc_bg);

mc_left = new createjs.Shape();
mc_left.graphics.beginFill("#333333").drawRect(0,0,1,1);
stage.addChild(mc_left);

mc_circle = new createjs.Shape();
mc_circle.graphics.beginFill("#888888").drawCircle(0,0,1,1);
stage.addChild(mc_circle); 
```

允许在渲染前使用 scaleX 和 scaleY 直接使用像素单位设置尺寸而不进行转换：

```
mc_bg.scaleX = stage_width;
mc_bg.scaleY = stage_height;

mc_left.scaleX = stage_width/2;
mc_left.scaleY = stage_height;

mc_circle.x = stage_width/4;
mc_circle.y = stage_width/4;
mc_circle.scaleX = stage_width/4;
mc_circle.scaleY = stage_width/4;

stage.update(); 
```

请参阅在窗口调整大小时实时调整大小的小提琴示例：[https ://jsfiddle.net/jckleinbourg/go3fs1zt/](https://jsfiddle.net/jckleinbourg/go3fs1zt/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T19:06:07.310

改变比例的转换方法 --> 尺寸，反之亦然：

```
function dimToScale(origDim, desiredDim)
{
    return desiredDim / origDim;
}

function scaleToDim(origDim, scale)
{
    return scale * origDim;
} 
```

# c++ - 多精度数的 Boost 矩阵乘积

> ID：14948102
> 
> 赞同：1
> 
> 时间：2013-02-19T01:01:32.950
> 
> 标签：c++, boost, ublas, boost-ublas

我正在尝试在 VS 2010 Express 中使用 Boost.Multiprecision 和 Boost.uBLAS 在 C++ 中实现一些高精度计算。但是，即使在最简单的情况下，我的代码也无法编译，并出现以下错误：

错误 C2677：二进制“+=”：未找到采用“boost::multiprecision::detail::expression”类型的全局运算符（或没有可接受的转换）c:\program files (x86)\boost_1_53_0\boost\numeric \ublas\functional.hpp 1176

```
#include <boost/multiprecision/cpp_dec_float.hpp>
#include <boost/numeric/ublas/matrix.hpp>

using namespace boost::multiprecision;   
using namespace boost::numeric::ublas;

int main(int, char**)
{
  matrix<number<cpp_dec_float<50> > > m (3, 3);
  matrix<number<cpp_dec_float<50> > > E (3, 3);

  E=prod(E,m);

  return 0;

} 
```

编译器抱怨的那行在 ublas 的functional.hpp 中：

```
 template<class E1, class E2>
 static BOOST_UBLAS_INLINE
 result_type apply (const matrix_expression<E1> &e1,
                    const matrix_expression<E2> &e2,
                    size_type i, size_type j) {
   size_type size = BOOST_UBLAS_SAME (e1 ().size2 (), e2 ().size1 ());
   result_type t = result_type (0);
   for (size_type k = 0; k < size; ++ k)
      t += e1 () (i, k) * e2 () (k, j); //here the error arises
   return t;
 } 
```

我使用 a`number<cpp_dec_float<50> >`作为高精度浮点数的类型，实例化两个矩阵 E 和 m - 这很好用。但是，如果我尝试使用 prod 将它们相乘，则代码无法编译。[此处提供](http://www.boost.org/doc/libs/1_53_0/libs/multiprecision/doc/html/boost_multiprecision/map/faq.html "这里")的多精度常见问题解答建议将 prod 的所有参数显式转换为高精度类型，但`prod(static_cast<matrix<number<cpp_dec_float<50> > > >(E),static_cast<matrix<number<cpp_dec_float<50> > > >(m) )`无济于事。

知道我还缺少什么吗？提前致谢。

# recursion - 方案递归

> ID：14948103
> 
> 赞同：1
> 
> 时间：2013-02-19T01:01:35.830
> 
> 标签：recursion, scheme

我正在尝试创建一个方案递归函数 deep_count 来计算数字的总和，即使它嵌套在子列表中。

```
(define deep_count
  (lambda (xs)
    (cond 
      ((empty? xs) 0)
      ((list? (first xs)) (+ 
                           (deep_count (first xs)) 
                           (deep_count (rest xs))))
      (else (+ 1 (deep_count (rest xs)))))))

(deep_count '(1 2 3 (4 5 6) ((7 8 9) 10 (11 (12 13))))) 
```

但我得到的是 13 而不是 91。这里有什么问题？

编辑：没关系，我知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:11:54.480

最后有个小错误。改变这个：

```
(+ 1 (deep_count (rest xs))) 
```

...为此，您已准备就绪：

```
(+ (first xs) (deep_count (rest xs))) 
```

# html - CSS 的边框和对齐问题

> ID：14948105
> 
> 赞同：0
> 
> 时间：2013-02-19T01:01:54.400
> 
> 标签：html, css

1.  我希望顶部`logo`div 中的元素居中。我不太确定该怎么做。

2.  我`navigation`的 div 与 div 不匹配`logo`。即使我已将边距设置为 0px，div 之间仍有空间。

3.  出于某种原因，我的占位符图形底部的填充比`logo`div 中的其他任何地方都多。我需要做什么来改变它？

```
<!DOCTYPE html>
<html>
<head>
    <title>css example</title>

<style type="text/css">

#logo {
    background-color: black;
    width: 100%;
    color: rgb(255,200,0);
    margin: 0px;
}

#logo p {
    display: inline;
}

#logo h2 {
    display: inline;
}

#logo a {
    float: right;
    color: rgb(255, 200, 0);
    text-decoration: none;
    font-size: 1.25em;
    padding: 10px;
}

#navigation {
    background-color: rgb(255,200,0);
    width: 100%;
    margin: 0px;
}

body {
    margin: 0px;
    font-family: Arial, Helvetica, Verdana;
}

</style>    
</head>

<body>    
<div id="logo">
    <p>
        <img src="picture.jpg" >
    </p>        
    <h2>SUBSCRIBER PORTAL</h2>      
    <a href="#">LOG-IN </a>
    <a href="#">CONTACT US </a>     
</div>    
<div id="navigation">
    <p>
        This is just a navigation test.
    </p>
</div>    
<div id="contents">    
    <p>This is just some dummy text. Dummy. </p>        
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T04:24:51.963

1) 给`img { vertical-align:middle; }`. 也删除

在img周围。2）你试过`padding:0;`吗？3）`padding-bottom:-<value here>px;`或者你可以试试`padding:0;`or `padding-bottom:0;`。我不确定这些问题，因为它们的设置并不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T06:06:22.920

使用位置：绝对；在您的 CSS 中为您的导航和徽标或标签指定您希望它们出现的确切位置。比如这个例子：

```
 #logo {
 position:absolute;
 top: 170px;
 left: 300px;
} 
```

# nhibernate - 如何在多对多关系中获取子项匹配特定条件的实体？

> ID：14948107
> 
> 赞同：0
> 
> 时间：2013-02-19T01:02:01.010
> 
> 标签：nhibernate, queryover

我已经使用**NHibernate**很长一段时间了，但仍然很难做一些“简单”的事情。我正在尝试处理`many-to-many`我的实体`ServiceProvider`和`Features`.

基本上每个人都`SERVICE_PROVIDERS`可以有不同的特征，这些特征必须存在于我的桌子上`FEATURES`。

这些是我的映射文件：

`ServiceProviders.hbm.xml`,

```
<class name="App.Domain.ServiceProvider, App.Domain" table="ServiceProviders">
    <id name="Code" type="System.Guid" unsaved-value="00000000-0000-0000-0000-000000000000">
        <column name="ServiceProviderCode" />
        <generator class="guid.comb" />
    </id>
    <property name="Description" type="AnsiString">
        <column name="Description" length="150" not-null="true" />
    </property> 
    <set name="Features" table="ServiceProvidersFeatures" access="field.pascalcase-underscore" cascade="save-update" optimistic-lock="false">
        <key column="ServiceProviderCode"></key>
        <many-to-many class="App.Domain.Feature" column="FeatureCode" not-found="exception" />
    </set>
</class> 
```

`Features`,

```
<class name="App.Domain.Feature, App.Domain" table="Features">
    <id name="Code" type="System.Guid" unsaved-value="00000000-0000-0000-0000-000000000000">
        <column name="FeatureCode" />
        <generator class="guid.comb" />
    </id>
    <property name="Description" type="AnsiString">
        <column name="Description" length="150" not-null="true" />
    </property>
    <set name="ServiceProviders" table="ServiceProvidersFeatures" cascade="none" inverse="true" lazy="true" access="field.pascalcase-underscore" optimistic-lock="false" mutable="false">
        <key column="FeatureCode"></key>
        <many-to-many class="App.Domain.ServiceProvider" column="ServiceProviderCode" not-found="ignore" />
    </set>
</class> 
```

这些是两个主要类：

`ServiceProvider.cs`

```
public class ServiceProvider
{
    public ServiceProvider()
    {
        this._Features = new HashSet<Feature>();
    }

    public virtual Guid Code { get; protected set; }

    public virtual string Description { get; set; }

    private ICollection<Feature> _Features = null;

    public virtual ReadOnlyCollection<Feature> Features
    {
        get { return (new List<Feature>(_Features).AsReadOnly()); }
    }   
} 
```

`Feature.cs`

```
public class Feature
{
    public Feature()
    {
        this._ServiceProviders = new HashSet<ServiceProvider>();
    }

    public virtual Guid Code { get; protected set; }

    public virtual string Description { get; set; }

    private ICollection<ServiceProvider> _ServiceProviders = null;

    public virtual ReadOnlyCollection<ServiceProvider> ServiceProviders
    {
        get { return (new List<ServiceProvider>(_ServiceProviders).AsReadOnly()); }
    }
} 
```

我要做的是获取描述以某个字符串开头的所有服务提供者（具有所有功能），并且它们至少指定了一个功能（参数）。

我认为我需要一个子查询，但我不知道如何构建 QueryOver。它应该是这样的：

```
var serviceProviders = 
    session.QueryOver<App.Domain.ServiceProvider>()
           .Inner.JoinAlias(x => x.Features, () => features)
           .WhereRestrictionOn(f => f.Description).IsLike("%" + "test" + "%")
           .AndRestrictionOn(() => features.Code).IsIn(<SubQuery>)
           .List(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:40:09.583

我想出了一个扩展方法，允许我构建表达式：

```
public static class ServiceProviderSearch
{
    public static IQueryOver<App.Domain.ServiceProvider, App.Domain.ServiceProvider> AttachWhereForSearchText(this IQueryOver<App.Domain.ServiceProvider, App.Domain.ServiceProvider> mainQuery, string searchText)
    {
        if (!string.IsNullOrEmpty(searchText))
        {
        ICriterion filterSearchText = Expression.Disjunction()
            .Add(Restrictions.On<App.Domain.ServiceProvider>(f => f.Description).IsLike(searchText, MatchMode.Anywhere))
            .Add(Restrictions.On<App.Domain.ServiceProvider>(f => f.ExtendedDescription).IsLike(searchText, MatchMode.Anywhere));
        mainQuery.Where(filterSearchText);
        }
        return (mainQuery);
    }

    public static IQueryOver<App.Domain.ServiceProvider, App.Domain.ServiceProvider> AttachWhereForFeatures(this IQueryOver<App.Domain.ServiceProvider, App.Domain.ServiceProvider> mainQuery, App.Domain.ServiceProvider serviceProvider, App.Domain.Feature features, Guid[] listOfFeatures)
    {
        if ((listOfFeatures != null) && (listOfFeatures.Count() > 0))
        {
        mainQuery
            .Inner.JoinAlias(() => serviceProvider.Features, () => features);

        mainQuery.WithSubquery.WhereProperty(() => features.Code)
                .In(
                QueryOver.Of<App.Domain.Feature>()
                    .WhereRestrictionOn(f => f.Code)
                    .IsIn(listOfFeatures)
                    .Select(f => f.Code)
                    );
        }
        return (mainQuery);
    }
} 
```

所以现在我可以写这样的东西：

```
App.Domain.ServiceProvider serviceProvider = null;
App.Domain.Feature features = null;
App.Domain.Language languages = null;
App.Domain.Service services = null;

Guid[] selectedFeatures = {};

var serviceProviders = Session.QueryOver(() => serviceProvider);    
serviceProviders
    .AttachWhereForSearchText(<searchText>)
    .AttachWhereForFeatures(serviceProvider, features, selectedFeatures);

Results = serviceProviders
    .TransformUsing(Transformers.DistinctRootEntity)
    .Take(<pageSize>)
    .Skip((<page> - 1) * <pageSize>)
    .ToList<App.Domain.ServiceProvider>(); 
```

灵感来自这个[答案](https://stackoverflow.com/a/10862783/219406)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:41:27.480

我会在您的代码段中更改几件事。首先，您不需要`%`在您的`IsLike`方法中指定：NHibernate 会自动执行此操作。其次，您可以通过以下方式构造子查询：

```
var subquery = 
    session.QueryOver<App.Domain.Feature>()
           .WhereRestrictionOn(f => f.Description).IsLike("test", MatchMode.Anywhere)
           .Select(f => f.Code); 
```

您可以将其插入主查询中：

```
var serviceProviders = 
    session.QueryOver<App.Domain.ServiceProvider>()
           .WithSubquery.WhereProperty(s => s.Code).In(subquery)
           .List(); 
```

或者你甚至可以尝试：

```
var serviceProviders = 
    session.QueryOver<App.Domain.ServiceProvider>()
           .JoinQueryOver<App.Domain.Feature>(s => s.Features)
             .WhereRestrictionOn(f => f.Description).IsLike("test", MatchMode.Anywhere)
           .List<App.Domain.ServiceProvider>(); 
```

根据您的`lazy`设置，您可以使用以下方法初始化`Features`集合，

```
serviceProviders.ToList()
                .ForEach(service => NHibernateUtil.Initialize(service.Features)); 
```

# ruby-on-rails - 呈现为呈现 javascript 而准备的 html.erb 文件

> ID：14948112
> 
> 赞同：0
> 
> 时间：2013-02-19T01:02:37.320
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我不知道如何最好地描述我的问题，所以我将尝试举例：我已经进入我的控制器

我的 res.js.erb 是这样的：

```
$ ( document).ready(function(){
$("#prikazuj").html('<%= render "rest"%>');
$('#res_').focus();
}); 
```

我在_rest.html.erb中有：

```
<%= t(:Measurementn) %>:<%= @measure.measurment %><br>\
<%= t(:player) %>:<%= @playerr.name %><br>\ 
```

在 _rest.html.erb 我有 \ 以便 javascript 可以正确解释这个 html。但是现在，如果我想在任何其他视图中使用相同的 <%= render "rest"%> ，我会得到一堆 \ 字符......摆脱它们的最佳方法是什么？我知道我可以在一行中制作 rest.html.erb，但我后来就无法阅读了……谢谢 Dorijan

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:39:10.027

您可以在从 javascript 代码调用部分时转义 javascript 并让`rest`部分*正常*。

```
$("#prikazuj").html('<%= escape_javascript(render("rest")) %>'); 
```

# objective-c - Objective C 线程错误

> ID：14948114
> 
> 赞同：-1
> 
> 时间：2013-02-19T01:02:37.653
> 
> 标签：objective-c, multithreading

如何在没有崩溃报告的情况下处理这些错误？我相信我发现的问题是调用一个类，其中某个线程应该管理清除和附加自己的缓冲区。

这是我收到的报告。我在控制台中找到了此报告，但在设备日志中没有找到崩溃日志（即使应用程序确实崩溃了）

```
Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 4 name:  WebThread

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 4:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fcdeb4 0x32fcd000 + 3764

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   libsystem_kernel.dylib         0x32fce048 0x32fcd000 + 4168

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   CoreFoundation                 0x3b2bd040 0x3b226000 + 618560

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   CoreFoundation                 0x3b2bbd9e 0x3b226000 + 613790

Feb 18 18:15:58  ReportCrash[14342] <Error>: 4   CoreFoundation                 0x3b22eeb8 0x3b226000 + 36536

Feb 18 18:15:58  ReportCrash[14342] <Error>: 5   CoreFoundation                 0x3b22ed44 0x3b226000 + 36164

Feb 18 18:15:58  ReportCrash[14342] <Error>: 6   WebCore                        0x36f0da40 0x36f03000 + 43584

Feb 18 18:15:58  ReportCrash[14342] <Error>: 7   libsystem_c.dylib              0x3634f30e 0x3633e000 + 70414

Feb 18 18:15:58  ReportCrash[14342] <Error>: 8   libsystem_c.dylib              0x3634f1d4 0x3633e000 + 70100

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 5:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fcdeb4 0x32fcd000 + 3764

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   libsystem_kernel.dylib         0x32fce048 0x32fcd000 + 4168

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   CoreFoundation                 0x3b2bd040 0x3b226000 + 618560

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   CoreFoundation                 0x3b2bbd9e 0x3b226000 + 613790

Feb 18 18:15:58  ReportCrash[14342] <Error>: 4   CoreFoundation                 0x3b22eeb8 0x3b226000 + 36536

Feb 18 18:15:58  ReportCrash[14342] <Error>: 5   CoreFoundation                 0x3b22ed44 0x3b226000 + 36164

Feb 18 18:15:58  ReportCrash[14342] <Error>: 6   Foundation                     0x3603f78a 0x3603b000 + 18314

Feb 18 18:15:58  ReportCrash[14342] <Error>: 7   Foundation                     0x360e3058 0x3603b000 + 688216

Feb 18 18:15:58  ReportCrash[14342] <Error>: 8   iOSMad                         0x000ff2e6 0xf5000 + 41702

Feb 18 18:15:58  ReportCrash[14342] <Error>: 9   Foundation                     0x360ec678 0x3603b000 + 726648

Feb 18 18:15:58  ReportCrash[14342] <Error>: 10  libsystem_c.dylib              0x3634f30e 0x3633e000 + 70414

Feb 18 18:15:58  ReportCrash[14342] <Error>: 11  libsystem_c.dylib              0x3634f1d4 0x3633e000 + 70100

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 6 name:  com.apple.NSURLConnectionLoader

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 6:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fcdeb4 0x32fcd000 + 3764

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   libsystem_kernel.dylib         0x32fce048 0x32fcd000 + 4168

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   CoreFoundation                 0x3b2bd040 0x3b226000 + 618560

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   CoreFoundation                 0x3b2bbd9e 0x3b226000 + 613790

Feb 18 18:15:58  ReportCrash[14342] <Error>: 4   CoreFoundation                 0x3b22eeb8 0x3b226000 + 36536

Feb 18 18:15:58  ReportCrash[14342] <Error>: 5   CoreFoundation                 0x3b22ed44 0x3b226000 + 36164

Feb 18 18:15:58  ReportCrash[14342] <Error>: 6   Foundation                     0x36068bc8 0x3603b000 + 187336

Feb 18 18:15:58  ReportCrash[14342] <Error>: 7   Foundation                     0x360ec678 0x3603b000 + 726648

Feb 18 18:15:58  ReportCrash[14342] <Error>: 8   libsystem_c.dylib              0x3634f30e 0x3633e000 + 70414

Feb 18 18:15:58  ReportCrash[14342] <Error>: 9   libsystem_c.dylib              0x3634f1d4 0x3633e000 + 70100

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 7:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fded98 0x32fcd000 + 73112

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   libsystem_c.dylib              0x36344cf6 0x3633e000 + 27894

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   libsystem_c.dylib              0x36344a12 0x3633e000 + 27154

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   libsystem_c.dylib              0x363448a0 0x3633e000 + 26784

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 8:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fded98 0x32fcd000 + 73112

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   libsystem_c.dylib              0x36344cf6 0x3633e000 + 27894

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   libsystem_c.dylib              0x36344a12 0x3633e000 + 27154

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   libsystem_c.dylib              0x363448a0 0x3633e000 + 26784

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 9 name:  com.apple.CFSocket.private

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 9:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fde594 0x32fcd000 + 71060

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   CoreFoundation                 0x3b2c11f2 0x3b226000 + 635378

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   libsystem_c.dylib              0x3634f30e 0x3633e000 + 70414

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   libsystem_c.dylib              0x3634f1d4 0x3633e000 + 70100

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 10:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fded98 0x32fcd000 + 73112

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   libsystem_c.dylib              0x36344cf6 0x3633e000 + 27894

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   libsystem_c.dylib              0x36344a12 0x3633e000 + 27154

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   libsystem_c.dylib              0x363448a0 0x3633e000 + 26784

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 11:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fde594 0x32fcd000 + 71060

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   ExternalAccessory              0x3440f742 0x34409000 + 26434

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   Foundation                     0x360ec678 0x3603b000 + 726648

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   libsystem_c.dylib              0x3634f30e 0x3633e000 + 70414

Feb 18 18:15:58  ReportCrash[14342] <Error>: 4   libsystem_c.dylib              0x3634f1d4 0x3633e000 + 70100

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 12:

Feb 18 18:15:58  ReportCrash[14342] <Error>: 0   libsystem_kernel.dylib         0x32fde08c 0x32fcd000 + 69772

Feb 18 18:15:58  ReportCrash[14342] <Error>: 1   libsystem_c.dylib              0x36347d2a 0x3633e000 + 40234

Feb 18 18:15:58  ReportCrash[14342] <Error>: 2   libsystem_c.dylib              0x36351f14 0x3633e000 + 81684

Feb 18 18:15:58  ReportCrash[14342] <Error>: 3   Foundation                     0x36068cca 0x3603b000 + 187594

Feb 18 18:15:58  ReportCrash[14342] <Error>: 4   ExternalAccessory              0x3440e986 0x34409000 + 22918

Feb 18 18:15:58  ReportCrash[14342] <Error>: 5   Foundation                     0x360ec678 0x3603b000 + 726648

Feb 18 18:15:58  ReportCrash[14342] <Error>: 6   libsystem_c.dylib              0x3634f30e 0x3633e000 + 70414

Feb 18 18:15:58  ReportCrash[14342] <Error>: 7   libsystem_c.dylib              0x3634f1d4 0x3633e000 + 70100

Feb 18 18:15:58  ReportCrash[14342] <Error>:  

Feb 18 18:15:58  ReportCrash[14342] <Error>: Thread 0 crashed with ARM Thread State (32-bit):

Feb 18 18:15:58  ReportCrash[14342] <Error>:     r0: 0x00000000    r1: 0x00000000      r2: 0x00000000      r3: 0x3c2c0534

Feb 18 18:15:58  ReportCrash[14342] <Error>:     r4: 0x00000006    r5: 0x3c2c0b88      r6: 0x1e57cd14      r7: 0x2fd0ba14

Feb 18 18:15:58  ReportCrash[14342] <Error>:     r8: 0x1e57ccf0    r9: 0x00000300     r10: 0x00000000     r11: 0x1f82b498

Feb 18 18:15:58  ReportCrash[14342] <Error>:     ip: 0x00000148    sp: 0x2fd0ba08      lr: 0x3636d123      pc: 0x32fde350

Feb 18 18:15:58  ReportCrash[14342] <Error>:   cpsr: 0x00000010 
```

任何帮助将不胜感激...在此先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:12:40.247

这可能对您的特定情况有所帮助，也可能无济于事，但将“所有异常”添加到调试器中的断点通常会有所帮助。这是通过选择断点导航器，单击窗格左下角的 + 图标并单击“添加异常断点”来完成的。

抱歉，如果您已经这样做了，但它可能对未来的读者有用。

# python - python根据字符串中的长度将一串数字切成部分

> ID：14948117
> 
> 赞同：0
> 
> 时间：2013-02-19T01:02:46.500
> 
> 标签：python, slice

我有一串数字，我想从文件中读取并解析成小节，小节的长度基于字符串中的数字。字符串中的第一个数字是第一个小节的长度。例如，如果我有一串数据如下：4、11、22、33、3、44、55、5、44、55、66、77

我想划分如下：

第一个小节长度为 4，因此，4、11、22、33

第二小节长度为 3，所以 3, 44, 55

第三小节长度为 5，因此 5、44、55、66、77

我尝试在切片中使用变量，以便在遍历数据时增加开始/停止值，但它不需要变量。我想出了一种方法来删除每个小节，这样第一个值将始终是下一个小节的长度，但这似乎有点笨拙。

我会很感激任何建议-谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:09:44.807

您可以执行以下操作：

```
your_list = [4, 11, 22, 33, 3, 44, 55, 5, 44, 55, 66, 77]
subsec = []
it = iter(your_list)
for n in it:
    subsec.append([n] + map(lambda x: next(it), range(int(n-1)))) 
```

这样，您只需在列表中循环一次。

或者

```
for n in it:
    subsec.append([n] + [next(it) for _ in range(int(n-1))]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:06:41.703

在处理更复杂的逻辑时，我更喜欢使用常规循环。

在这种情况下，我会使用一个`while`循环，一直运行到列表为空，然后删除已处理的元素。如果这些部分是错误的（即最后一个部分超出了字符串的大小），断言会告诉你。

```
sequence = [4, 11, 22, 33, 3, 44, 55, 5, 44, 55, 66, 77]
sections = []
while sequence:
    section_size = sequence[0]
    assert len(sequence) >= section_size
    sections.append(sequence[:section_size])
    sequence = sequence[section_size:]

print sections 
```

这会拆分这些部分并将它们保存在一个名为 的列表中`sections`，并将大小作为第一个元素，就像在您的示例中一样。

编辑：添加错误检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:43:05.817

Just thought I'd throw this out there. Very similar to both BoppreH's solution, but it avoids the overhead of creating `n` additional lists by iterating over indices:

```
def generateSlices(seq):
    i = 0
    while i < len(seq):
        n = x[i]
        yield x[i:i + n]
        i += n 
```

You can check for errors after generating a list of sublists by doing:

```
mySubLists = [[5, 23, 33, 44, 2], [10]]

all(len(x) == x[0] for x in mySubLists) 
```

Incidentally, why is your data structured in this strange way? It seems error-prone.

# javascript - JQuery：显示隐藏的父元素内的子元素

> ID：14948120
> 
> 赞同：0
> 
> 时间：2013-02-19T01:03:04.117
> 
> 标签：javascript, jquery, jquery-selectors

我有一系列菜单和子菜单（嵌套 uls）。我想显示一个嵌套在另一个父 ul 中的 ul，而不显示父级。我通常会这样做：

```
$('#menu ul li ul').show(300); 
```

但是因为原来，parent ul有`display:none`css，child ul不显示。

我试过添加：

```
$('#menu ul:first').addClass('nodisplay'); 
```

但这也不起作用。

谁能建议一种方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:06:28.963

我会用 jQuery[克隆](http://api.jquery.com/clone/)它并将其附加到可见的父级，然后在不再需要它时将其销毁。

# google-app-engine - 此 Blobstore blob 创建代码中的第二个参数是什么？

> ID：14948122
> 
> 赞同：1
> 
> 时间：2013-02-19T01:03:30.467
> 
> 标签：google-app-engine, blobstore

[这是GAE 文档](https://developers.google.com/appengine/docs/python/blobstore/overview#Writing_Files_to_the_Blobstore)中“将文件写入 Blobstore”代码示例的片段：

```
# Open the file and write to it
with files.open(file_name, 'a') as f:
  f.write('data') 
```

你能告诉我'a'参数是什么，为什么它是必要的？我没有看到它提到其他任何地方。

有人可能会认为它是文件名，但如果是这样，GAE 会立即忘记该名称，并且这些文件在 GAE 后端都被称为“未命名”。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:13:15.773

`'a'`指定打开文件以进行**附加**。必须指定它，因为默认值为`'r'`：读取模式。

因此，在[http://docs.python.org/2/library/functions.html#open的优秀 Python 文档中对其进行了描述](http://docs.python.org/2/library/functions.html#open)

> 最常用的模式值是`'r'`读取、`'w'`写入（如果文件已经存在，则截断文件）和`'a'`追加...

# mysql - 在 XAMPP 中禁用 Apache 登录

> ID：14948124
> 
> 赞同：0
> 
> 时间：2013-02-19T01:03:33.473
> 
> 标签：mysql, apache, xampp

我正在使用 XAMPP 在 DVD 上创建独立网站，Apache 服务无法启动，因为它访问只读的**error.log**（因为 XAMPP 已经在 DVD 上）。启动服务时 MySQL 也是如此。

我已经尝试编辑`httpd.conf`并评论了这一行`#ErrorLog "logs/error.log"`，但仍然得到了在 Apache 中创建的日志文件。还有另一种方法吗？我还想停止使用日志文件访问 MySQL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:17:21.083

对于 apache，您需要注释掉ErrorLog 和 CustomLog 指令**。**如果您的 xampp 配置使用虚拟主机，您还需要注释掉虚拟主机定义中的指令。

mysql 文档说可以启用或禁用日志，您应该遵循文档并相应地更改服务器配置： http: [//dev.mysql.com/doc/refman/5.1/en/server-logs.html](http://dev.mysql.com/doc/refman/5.1/en/server-logs.html)

# html - 网页打印

> ID：14948125
> 
> 赞同：1
> 
> 时间：2013-02-19T01:03:37.410
> 
> 标签：html, twitter-bootstrap

我的网页上有以下 HTML：

```
<div id=header>
   <a href="/" id="logo" name="logo"><span class="hide">FooBar</span></a>
      <div id="topnavmenu">
         <ul id="nav-utility">
            <li><a href="/careers">Careers</a></li>
            <li><a href="/blog">Blog</a></li>
            <li><a href="/test4/">Test4</a></li>
            <li><a href="/program">Program</a></li>
            <li><a href="/contact">Contact Us</a></li>
         </ul>
      </div>
</div> 
```

当我打印页面时，我得到：

```
(/)   Careers (/careers)   Blog(/blog)   Test4(/test4) .... 
```

问题：

1.  未显示徽标图像。在屏幕上工作正常
2.  为什么我会在父母中打印href？我该如何抑制这个？

这是使用引导程序，但我不确定引导程序是否是罪魁祸首。

谢谢，

磷

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-10T19:39:07.067

## 如何在印刷版中抑制来自父母的href。

这些 href 是 Bootstrap 的功能。如果您查看 Bootstrap CSS，您会发现：

```
a[href]:after{
    content:" (" attr(href) ")"
}

abbr[title]:after{
    content:" (" attr(title) ")"
} 
```

这就是问题。如果您有权访问 Bootstrap，则可以将其删除。否则，只需将其压制为您自己的 CSS：

```
a[href]:after{
    content:"";
}

abbr[title]:after{
    content:"";
} 
```

您甚至可以添加`!important`到每一行。

```
a[href]:after{
    content:"" !important;
}

abbr[title]:after{
    content:"" !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T03:32:43.763

编写 print css 时要记住的事情：-

1.  我们不需要导航来在纸上浏览 - 所以从打印中隐藏导航。
2.  删除横幅，广告任何不需要的图像。
3.  字体大小应缩放到眼睛可见且不是很大的好数字。
4.  不打印背景图像。保持白色。

您将不得不使用 CSS 媒体样式来提供打印某些区域的细节。好的做法是使用包含所有打印 css 的单独样式表，例如：

```
<link rel="stylesheet" type="text/css" media="print" href="print.css"> 
```

比在 print.css 中编写你的 CSS 样式，如下所示

```
@media print {
/* your stylesheet for printing, eg.: */
   body {
           color : #000000;
           background : #ffffff;
           font-family :"Times New Roman", Times, serif;
           font-size : 12pt;
        }
  a {
           text-decoration : underline;
           color : #ddd;
    }
 #topnavmenu {
          display : none;
    }
   #logo {
       height:20px;
       margin-top:10px;

    }
} 
```

Bootstrap css 不是罪魁祸首，因为它使用 media="screen" 属性指定，这就是为什么它只会影响屏幕而不影响打印的原因。

```
 <link href="css/bootstrap.min.css" rel="stylesheet" media="screen"> 
```

另一种方法是分配`MEDIA="screen, print"`给引导文件。**但是，只有**当您想完全按照桌面上显示的方式打印您的网站时，才建议这样做。“So Save Trees”，只打印那些绝对必要的区域。将 media="screen,print" 分配给引导 css 的示例：

```
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen,print"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T03:39:56.913

除了上面的建议，请记住，如果打印结果对您很重要，那么这就是打印样式表的用途。

在文档的头部包含对样式表的引用：

```
<link rel="stylesheet" href="URL to your print.css" type="text/css" media="print" /> 
```

然后根据需要设置样式。

例如，如果您想在打印页面时隐藏菜单，请包括以下内容：

```
#topnavmenu{
display:none;
} 
```

这是一个很好的链接，可以帮助您开始设置打印样式表的样式：http:
[//alistapart.com/article/goingtoprint](http://alistapart.com/article/goingtoprint)

希望这可以帮助！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T01:04:56.993

1.  背景图像通常不打印。

2.  你不能用代码。您必须在打印选项对话框中进行调整。

# sql-server - 为什么 SSIS 在上传到 FTP 的文件前加上下划线？

> ID：14948127
> 
> 赞同：0
> 
> 时间：2013-02-19T01:03:44.300
> 
> 标签：sql-server, sql-server-2008, ftp, ssis

我正在使用 FTP 任务将文件传输到远程 FTP 服务器。文件传输到 FTP 服务器后，我看到**`_`**（*下划线*）前缀自动添加到文件中。

当*FileName.Zip*上传到 FTP 网站时，在 FTP 服务器上，我看到文件名为*`_FileName.zip`*. 一个

SSIS 中的 FTP 任务使用局部变量生成文件名。该变量的*`Evaluate as Expression`*属性设置为 true 并使用以下表达式。表达式中没有下划线。

### 变量中使用的表达式：

```
@[User::InputPath]+ "\\" +@[User::ZIPFile] 
```

我该如何解决这个问题？

# php - 图像路径未覆盖

> ID：14948133
> 
> 赞同：0
> 
> 时间：2013-02-19T01:04:23.383
> 
> 标签：php, android, android-intent, android-activity

问题：当 Activity 1 通过 Intent 发送图像文件时，Activity 1 具有指向图像的路径，而 Activity 2 具有指向不同图像的不同路径。

代码活动 1：

```
...
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == CAMERA_REQUEST && resultCode == RESULT_OK) {
        imageFile = new File(outputFileUri.getPath());
    } else if (requestCode == UPLOAD_REQUEST && resultCode == RESULT_OK) {
        //Get the data back from the request in URI format (Path to file).
        selectedImage = data.getData();
        imageFile = new File(getRealPathFromURI(selectedImage));
    } else if (resultCode == RESULT_CANCELED) {
        return;
    }
    Intent menuIntent = new Intent(getApplicationContext(), MenuActivity.class);
    menuIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_SINGLE_TOP | Intent.FLAG_ACTIVITY_CLEAR_TOP | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
    menuIntent.putExtra("username", username);
    menuIntent.putExtra("latitude", latitude);
    menuIntent.putExtra("longitude", longitude);
    menuIntent.putExtra("imageFile", imageFile);
    Log.d("ACTIVITY1 image", imageFile.getPath());//THIS LOG BELOW!!
    try{
        startActivity(menuIntent);
        finish();
    }
    catch(ActivityNotFoundException e){
        e.printStackTrace();
        menuIntent.setFlags(Intent.FLAG_ACTIVITY_BROUGHT_TO_FRONT);
        startActivity(menuIntent);
        finish();
    }
} 
```

尝试捕获 Intent 的原因是此活动被用于除此之外的其他用途。代码活动 2：

```
...
@Override
public void onStart() {
    super.onStart();
    Bundle extras = getIntent().getExtras();
    if (extras != null) {
        username = extras.getString("username");
        latitude = extras.getDouble("latitude");
        longitude = extras.getDouble("longitude");
        if(extras.get("imageFile") != null){
            File imageFile = (File) extras.get("imageFile");
            Log.d("ACTIVITY2 image", imageFile.getPath());//THIS LOG BELOW!!
            toastContext = getApplicationContext();
            params = new ArrayList();
            params.add("upload");
            params.add(username);
            params.add(imageFile);
            uploadImage = new UserFunctions(this);
            uploadImage.execute(params);
        }
    }
} 
```

有一个 ASyncTask 通过 POST 将文件发送到服务器，并返回 JSON 以形成通知并根据响应进行更新。那里没有问题。如果用户登录，则加载活动 2，如果未登录，则稍后在用户登录时调用活动 2。当活动 2 通过 buttonListener 加载活动 1 时会出现问题，然后活动 1 拍摄照片或有文件选择。当活动 1 决定时，它会立即再次加载活动 2，并在意图中传递新的 imageFile。当活动 2 加载时，它将请求发送到服务器。返回的日志是：第一次通过 POST 发送图像：

```
 DEBUG/ACTIVITY1 image(15559): /storage/emulated/0/DCIM/Camera/IMG_20130215_193022.jpg 
```

然后通过意图传递给活动2......

```
 DEBUG/ACTIVITY2 image(15559): /storage/emulated/0/DCIM/Camera/IMG_20130215_193022.jpg 
```

第二次，在选择不同的图像或拍摄新照片后：

```
 DEBUG/ACTIVITY1 image(15559): /storage/emulated/0/DCIM/Camera/IMG_20130214_212205.jpg 
```

然后通过意图传递给活动2......

```
 DEBUG/ACTIVITY2 image(15559): /storage/emulated/0/DCIM/Camera/IMG_20130215_193022.jpg 
```

如果有 ASyncTask/onPostExecute 的请求，我会发布它！

谢谢！

编辑：添加了 Android Manifest 以澄清活动：

```
<activity android:name=".ACTIVITY1" android:label="@string/app_name"
              android:screenOrientation="portrait"/>
    <activity android:name=".ACTIVITY2"
              android:label="@string/app_name"
              android:parentActivityName=".ACTIVITY1"
              android:excludeFromRecents="true"
              android:hardwareAccelerated="true"
              android:launchMode="singleTop"
              android:taskAffinity=""
              android:screenOrientation="portrait">
    <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value=".ACTIVITY1"/>
    </activity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:18:38.717

哦，伙计，我感觉很糟糕......

Activity 2 启动 ASyncTask 后：

```
 uploadImage = new UserFunctions(this);
 uploadImage.execute(params); 
```

活动需要结束。添加

```
 finish(); 
```

修复。

# excel - 简化当前使用 INDEX、ROW、SUMPRODUCT 和 IFERROR 的 Excel 公式

> ID：14948140
> 
> 赞同：1
> 
> 时间：2013-02-19T01:04:46.130
> 
> 标签：excel, spreadsheet, vlookup

有没有人有任何绝妙的想法来简化这个困难的公式？看到后不要惊慌，我会尽力解释的。

> =IFERROR(INDEX(rangeOfDesiredValues,(1/SUMPRODUCT((rangeOfSerials=$D20) *(rangeOfApps=cfgAppID)* (rangeOfAccessIDs=cfgAccessID)*ROW(rangeOfDesiredValues))^-1)),"")

目前我正在使用 SUMPRODUCT 来做相当于以多列作为标准的 VLOOKUP。通常这只适用于数字结果，但由于我需要查找文本，我将 SUMPRODUCT 与 ROW 和 INDEX 结合使用。

不幸的是，当没有找到单元格时，我的 SUMPRODUCT 返回 0。这会导致公式返回不正确的单元格而不是空白。出于这个原因，我通过这个计算运行结果：

```
(1 / result)^-1 
```

这样0的结果就变成了错误，其他的结果保持不变。我把它输入到 IFERROR 中，这样错误就会变成空白。

有谁知道如何使这个更整洁？我无法在我的任何电子表格中创建新列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T10:18:53.830

最好避免使用多条件求和函数，例如`SUMPRODUCT`当你想找到一个值时（如果有不止一行匹配所有三个条件，它显然会给你一个不正确的结果或错误，我假设你期望一个匹配大多数在这里？）。`ROW`如果您在工作表中插入任何行，函数也可能会出现问题.....

有几种方法可以奏效。对于单个公式，使用`MATCH`是最常见的 -`MATCH`只会给出正确的位置或错误，因此零值没有问题。看起来像这样：

`=IFERROR(INDEX(rangeOfDesiredValues,MATCH(1,(rangeOfSerials=$D20)*(rangeOfApps=cfgAppID)*(rangeOfAccessIDs=cfgAccessID),0)),"")`

那是一个“数组公式”，需要用`CTRL+SHIFT+ENTER`......输入，或者您可以使用像这样的额外 INDEX 函数将其变成常规公式

`=IFERROR(INDEX(rangeOfDesiredValues,MATCH(1,INDEX((rangeOfSerials=$D20)*(rangeOfApps=cfgAppID)*(rangeOfAccessIDs=cfgAccessID),0),0)),"")`

第三种选择是使用不需要“数组条目”的 LOOKUP

`=IFERROR(LOOKUP(2,1/(rangeOfSerials=$D20)/(rangeOfApps=cfgAppID)/(rangeOfAccessIDs=cfgAccessID),rangeOfDesiredValues),"")`

在多场比赛的情况下，这与以前的版本略有不同——它会给你**最后**一场比赛，而不是那种情况下的第一场比赛（但我假设你最多只有一场比赛，如上所述）。

最后，如果您不介意使用辅助列，则可以大大简化公式。只需使用“帮助”列连接由破折号分隔的三个条件列，然后您可以使用简单的 VLOOKUP 或 INDEX/MATCH，例如

`=IFERROR(INDEX(rangeOfDesiredValues,MATCH($D20&"-"&cfgAppID&"-"&cfgAccessID,Helper_Column,0)),"")`

# java - 解析没有文档开始和结束标签的 XML

> ID：14948146
> 
> 赞同：0
> 
> 时间：2013-02-19T01:05:38.170
> 
> 标签：java, android, xml

我正在解析一个无法使用 SAX 解析器从 Internet 更改的文档。当文档格式如下时，它工作得很好：

```
<outtertag>
  <innertag>data</innertag>
  <innerag>moreData</innertag>
</outtertag> 
```

但是，在某些调用中，我会在没有外部标签的情况下对 XML 进行格式化，因此我基本上只得到了一个数据列表，如下所示：

```
 <innertag>data</innertag>
  <innerag>moreData</innertag> 
```

这对我来说似乎很愚蠢，但我无法选择 XML 的格式，现在也无法更改。问题在于，SAX 解析器似乎在遇到第一个关闭内部标签时就命中了 endDocument 事件。

我有一个相当老套的解决方案，将 InputStream 转换为 String，在其周围添加标签，然后将其转换回 InputStream。它实际上以这种方式解析得很好。但是，肯定有更好的方法。我也不想写一个完整的解析器。除了缺少开始和结束标签之外，大多数标签都是相同的。

只是为了它，我将发布代码，但它是非常标准的 SAX 解析器。原文实际上是在解析大约 30 一些标签：

```
 SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser saxParser = factory.newSAXParser();
        XMLReader xmlReader = saxParser.getXMLReader();

        MyHandler handler = new MyHandler();
        xmlReader.setContentHandler(handler);

        InputSource inputSource = new InputSource(url.openStream());
        xmlReader.parse(inputSource);
    }

    catch (SAXException e) { e.printStackTrace(); } 
    catch (ParserConfigurationException e) { e.printStackTrace(); }
    catch(Exception e) { e.printStackTrace(); }
}

private class MyHandler extends DefaultHandler {
    private StringBuilder content;

    public MyHandler() {
        content = new StringBuilder();
    }
    public void startElement(String uri, String localName, String qName, 
            Attributes atts) throws SAXException {
        content = new StringBuilder();
        if(localName.equalsIgnoreCase("innertag")) {
            //Doing stuff
        }

    }
    public void endElement(String uri, String localName, String qName) 
            throws SAXException {

        //Doing stuff
    }
    public void characters(char[] ch, int start, int length) 
            throws SAXException {
        content.append(ch, start, length);
    }
    public void endDocument() throws SAXException {
               //When parsing the second type of document, hits this event almost immediately after parsing first tag

    }
} 
```

而且，如果重要的话，这是我正在使用的 hacky 代码，但感觉不对，但它有效：

```
BufferedReader reader = new BufferedReader(new InputStreamReader(url.openStream()));
        StringBuilder sb = new StringBuilder("<tag>");
        String line = null;

        while ((line = reader.readLine()) != null) {
            sb.append(line);
        }           
        sb.append("</tag>");
        String xml =sb.toString();

        InputStream is = new ByteArrayInputStream(xml.getBytes());
        InputSource source = new InputSource(is);
        xmlReader.parse(source); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:27:45.493

我会说你现在所做的和你将得到的一样好。需要考虑改进的一件事是流 -> 字符串 -> 流转换，尤其是在文档很大的情况下。您可以使用 Guava 的[ByteStreams.join()](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/ByteStreams.html#join%28com.google.common.io.InputSupplier...%29)之类的东西，它可以让您将流连接在一起而不是字符串。类似于以下内容：

```
import com.google.common.io.*;
import java.io.*;

public class ConcatenateStreams {
    public static void main(String[] args) throws Exception {
        InputStream malformedXmlContent = externalXmlStream();
        InputSupplier<InputStream> joined = ByteStreams.join(
                inputSupplier("<root>"),
                inputSupplier(malformedXmlContent),
                inputSupplier("</root>"));
        ByteStreams.copy(joined, System.out);
    }

    private static InputStream externalXmlStream() {
        return new ByteArrayInputStream("<foo>5</foo><bar>10</bar>".getBytes());
    }

    private static InputSupplier<InputStream> inputSupplier(final String text) {
        return inputSupplier(new ByteArrayInputStream(text.getBytes()));
    }

    private static InputSupplier<InputStream> inputSupplier(final InputStream inputStream) {
        return new InputSupplier<InputStream>() {
            @Override
            public InputStream getInput() throws IOException {
                return inputStream;
            }
        };
    }
} 
```

输出：

```
<root><foo>5</foo><bar>10</bar></root> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:39:08.857

您拥有的 XML 不是格式良好的文档，但它是格式良好的外部解析实体，这意味着可以通过实体引用从格式良好的文档中引用它。所以创建一个这样的骨架文档：

```
<!DOCTYPE doc [
<!ENTITY e SYSTEM "data.xml">
]>
<doc>&e;</doc> 
```

其中 data.xml 是您的 XML，并将此文档传递给 XML 解析器以代替原始文档。胜过编写数十行 Java 代码。

# seo - “号召性用语” div 应该使用什么 HTML5 标记？

> ID：14948151
> 
> 赞同：5
> 
> 时间：2013-02-18T22:56:55.000
> 
> 标签：seo, html

我是 HTML5 新手，想知道应该在位于主页主要内容旁边的列中的号召性用语 div 上使用哪个 HTML5 标记。

选项1：

```
<aside>
    //call to action
</aside> 
```

选项 2：

```
<article>
    <section>
       //call to action
    </section>
</article> 
```

我问的原因是因为我认为这两种选择都不是完美的选择。也许我错过了一些东西。谢谢！

我的号召性用语 HTML：

```
 <section class="box">
            <hgroup>
                <h1 class="side">Call Now</h1>
                <h2 class="side">To Schedule a Free Pick-Up!</h2>
                    <ul class="center">
                        <li>Cleaning</li>
                        <li>Repair</li>
                        <li>Appraisals</li>
                    </ul>
                <h3 class="side no-bottom">(781) 729-2213</h3>
                <h4 class="side no-top no-bottom">Ask for Bob!</h4>
            </hgroup>
            <img class="responsive" src="img/satisfaction-guarantee.png" alt="100% Satisfaction Guarantee">
            <p class="side">We guarantee you will be thrilled with our services or your money back!</p>
        </section> 
```

这是三列布局的右列上的一个框。中间大栏中的内容对公司的服务进行了总结。如果您想使用这些服务，则必须安排取件，因此需要采取行动。

有没有人反对这种 HTML5 的使用，或者有更好的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T18:34:53.550

我的看法是，新 HTML5 结构元素的最佳实践仍在制定中，新 HTML5 经济的宽容性质意味着您可以建立对您的应用程序最有意义的约定。

在我的应用程序中，我对反映*视图布局*（即创建页面之间整体一致性的模板）与*内容本身的标记有不同的考虑*（通常是在插入到布局中的各个区域之前接收附加标记的任何函数或查询结果）。区别很重要，因为布局元素语义（如页眉、页脚和旁白）并不能真正帮助在搜索期间区分内容，因为该标记通常在页面之间重复。我特别喜欢使用 HTML5 中的语义区别来描述用户实际搜索的内容。例如，我通常使用 article 来包装主要内容，并使用 nav 来包装任何相关的链接列表。小部件包装器通常与页面布局相关联，因此我会遵循该指南的模板约定。

每当我必须决定语义名称和通用名称时，我的一般启发式是：

*   如果页面模板中已有可能的先例，请遵循该先例；
*   如果有问题的元素是页面布局的新部分（相对于呈现到布局中的区域的内容查询）并且模板中已经没有指导模式，则 div 可以将该页面布局行为关联到；
*   如果内容是动态创建的（即在请求时被实例化到布局中的任何内容——帖子、导航、大多数小部件），请将其包装在最能描述该项目是什么的语义包装器中（而不是你认为它应该如何出现）
*   每当创作或生成内容时，请在该内容中酌情使用语义 HTML5 标记（hgroup 将分层标题括起来，section 用于组织文章中的块等）。这是面向未来的搜索丰富。

根据所有这些，除非您的页面模板已经建立了不同的小部件包装器，否则 div 作为小部件的包装器是可以的。此外，您使用标题元素在小部件中创建大而粗的外观是使用标记来表示外观而不是语义。由于您的特定用途是出于外观动机，因此最好将 div 或 span 与 CSS 类一起使用，这些类可以让您根据需要为非特定文本指定大小、间距和其他装饰，而不必覆盖浏览器的默认值标题元素。我会为页面标题、小部件标题和页面主要内容区域内的标题保存标题元素。滥用不属于主要内容的标题可能会导致 SEO 排名问题。

我希望这些想法有助于您考虑 HTML5 标记的使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-21T17:03:06.380

就标记的语义而言，Don 的建议是有道理的。（正如您所说，您的 CTA 在视觉上位于主要内容旁边，次要于该内容，我赞成`aside`，但没有一个正确的答案。）

但是，您已经用“seo”标记了您的问题，所以我认为您对使用正确标记的 SEO 好处感兴趣。目前，Google 并没有特别重视良好的语义标记——他们不关心`aside`,`section`和`div`. 这可能部分是因为这些标签的含义仍在定义中（通过 Web 开发人员的实践），但它们甚至似乎忽略了明显相关的搜索结果的标签（例如`nav`，几乎总是与页面的描述无关搜索结果）。

Instead, they heavily favor [using microdata](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=176035) for marking up rich semantics. In the short term, marking your page up using the Schema.org [WebPage](http://schema.org/WebPage) microdata will likely provide greater benefit. You can mark your CTA as a `relatedLink` or `significantLink`, and keep it outside the `mainContent` of the page. If you're looking to optimize your page for search, this is a great way to do it---in my experience, Google very rarely shows text outside of your `mainContent` block in the search results description.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T01:13:28.983

正确的标记取决于您未提供的实际内容。

也就是说，无论您的内容是什么，将所有内容包装在 div 中都可以（尽管可能没有必要），因为`<div>`标签没有语义价值。您的两个示例可能不正确，除非您的“号召性用语”实际上是整篇文章（我怀疑是这种情况）。

号召性用语可能发生在 中`<aside>`，但号召性用语不太可能*是*旁白本身。再一次，这取决于*内容*（它是什么）和*上下文*（它与其他内容的关系）。

通常，“号召性用语”是某处的链接，因此对我来说显而易见的答案是使用锚点，`<a>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T01:12:53.463

它只是指向另一个页面的链接。使用一个 div。

# javascript - 在链接前插入复选框？

> ID：14948153
> 
> 赞同：0
> 
> 时间：2013-02-19T01:06:37.707
> 
> 标签：javascript, jquery

html

```
<ul class="navmore">
   <li><a href="link">Link</a></li>
   <li><a href="link">Link</a></li>
</ul> 
```

页脚中的jquery

```
$(".navmore li a").each(function(){
   var $this = $(this);
   $('<input type="checkbox">').insertBefore($this);
}); 
```

html应该变成

```
 <ul>
       <li><input type="checkbox"><a href="link">Link</a>
       <li><input type="checkbox"><a href="link">Link</a>
    </ul> 
```

我目前没有任何带有该代码的复选框

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:08:42.570

不需要循环吗？

```
$(function() {
    $(".navmore li a").before( $('<input />', {type:"checkbox"}));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:14:33.947

```
$(function () {
    $(".navmore li").prepend('<input type="checkbox" />');
}); 
```

# css - 导入css规则

> ID：14948154
> 
> 赞同：1
> 
> 时间：2013-02-18T22:46:44.043
> 
> 标签：css, optimization, import

这真的很简单。有没有办法将 CSS 规则而不是整个工作表导入另一个样式表。

例如，假设我只希望`p, blockquote, #main, and .red`样式表中的规则，但没有其他规则，例如简单的 OOP。这可以做到吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:19:35.433

你不能用 CSS 做到这一点，这是最近开发（以及使用增长）预处理器（如 LESS 和 SASS）的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-18T23:23:51.360

您可以将公共部分移动到一个文件中，然后从其他两个文件中调用它们。您可以为此使用 CSS @Import：[http ://www.cssnewbie.com/css-import-rule/](http://www.cssnewbie.com/css-import-rule/)

这种方法的问题在于，它意味着网络浏览器必须下载更多文件，并且大大减慢了网站的加载过程。这是一篇关于它的文章：http: [//www.stevesouders.com/blog/2009/04/09/dont-use-import/](http://www.stevesouders.com/blog/2009/04/09/dont-use-import/)

# json - Titanium Studio - 将我的详细数据放入表格中

> ID：14948158
> 
> 赞同：0
> 
> 时间：2013-02-19T01:06:56.623
> 
> 标签：json, titanium, tableview, titanium-mobile

我有一个数据表，在 eventlistener 单击时，该行将成为一个详细窗口，其中包含所选行的数据。我将数据作为标签，但我想将一些数据显示为带有行标题的表格（特别是我的 vars、mon、tues、weds、thurs、fri、sat、sund）。我试图在事件监听器中创建一个表，但它没有出现。我将如何处理这个？下面是我的代码：

```
var win = Titanium.UI.currentWindow;
var data = [];

var barList = Titanium.UI.createTableView({
    height: 366,
    width: 320,
    top: 0,
    left: 0
});
win.add(barList);
barList.addEventListener('click', function (e) {
    Ti.API.info('data: ' + JSON.stringify(e.rowData.data));
    var detail = Ti.UI.createWindow({
        backgroundColor: '#fff',
        data: e.rowData.data, // use rowData
        title: e.rowData.data.name, // now you can access name as well as address
    });

    var lbl = Ti.UI.createLabel({
        text: JSON.stringify(e.rowData.data.address),
        top: 10
    });
    detail.add(lbl); // just so you can see it here as well

     var mon = Ti.UI.createLabel({
        text: e.rowData.data.mon_special,
        top: 30
    });
    detail.add(mon); 

    var tues = Ti.UI.createLabel({
        text: e.rowData.data.tues_special,
        top: 50
    });
    detail.add(tues); 

    var weds = Ti.UI.createLabel({
        text: e.rowData.data.weds_special,
        top: 50
    });
    detail.add(weds); 

    var thurs = Ti.UI.createLabel({
        text: e.rowData.data.thurs_special,
        top: 50
    });
    detail.add(thurs); 

    var fri = Ti.UI.createLabel({
        text: e.rowData.data.fri_special,
        top: 50
    });
    detail.add(fri); 

    var sat = Ti.UI.createLabel({
        text: e.rowData.data.sat_special,
        top: 50
    });
    detail.add(sat); 

    var sund = Ti.UI.createLabel({
        text: e.rowData.data.sun_special,
        top: 50
    });
    detail.add(sund); 

    detail.open({
        modal: true
    });
});

var xhr = Titanium.Network.createHTTPClient();
xhr.onload = function () {
    var json = JSON.parse(this.responseText);
    Ti.API.info(json.length);
    for (var i = 0; i < json.length; i++) {
        var row = Titanium.UI.createTableViewRow({
            className: 'bar-row',
            data: json[i].bar, // pass everything because you also use name later on
            hasChild: true,
            filter: json[i].bar.name
        });
        var titleLabel = Titanium.UI.createLabel({
            text: json[i].bar.name,
            font: {
                fontSize: 14,
                fontWeight: 'bold'
            },
            left: 70,
            top: 5,
            height: 20,
            width: 210
        });
        row.add(titleLabel);
        var addressLabel = Titanium.UI.createLabel({
            text: json[i].bar.address,
            font: {
                fontSize: 10,
                fontWeight: 'normal'
            },
            left: 70,
            top: 25,
            height: 40,
            width: 200
        });
        row.add(addressLabel);
        var iconImage = Titanium.UI.createImageView({
            text: json[i].bar.logo_file_name,
            width: 50,
            height: 50,
            left: 10,
            top: 10
        });
        row.add(iconImage);
        data.push(row);
    }
    barList.setData(data);
};
xhr.open('GET', 'http://example.com/bars.json');
xhr.send(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:44:21.043

作为您的 Titanium 新手，它认为很难放置数据

我们可以通过以下方式接近这种方法

1）存储你调用的数据我的意思是你的酒吧数据

```
 var win = Titanium.UI.currentWindow;
 var data = [];

 var json=''

 var barList = Titanium.UI.createTableView({
   height: 366,
   width: 320,
   top: 0,
   left: 0
   });
  win.add(barList);

var xhr = Titanium.Network.createHTTPClient();
xhr.onload = function () {
json = JSON.parse(this.responseText);
Ti.API.info(json.length);
for (var i = 0; i < json.length; i++) {
    var row = Titanium.UI.createTableViewRow({
        className: 'bar-row',
        data: json[i].bar, // pass everything because you also use name later on
        hasChild: true,
        filter: json[i].bar.name
    });
    var titleLabel = Titanium.UI.createLabel({
        text: json[i].bar.name,
        font: {
            fontSize: 14,
            fontWeight: 'bold'
        },
        left: 70,
        top: 5,
        height: 20,
        width: 210
    });
    row.add(titleLabel);
    var addressLabel = Titanium.UI.createLabel({
        text: json[i].bar.address,
        font: {
            fontSize: 10,
            fontWeight: 'normal'
        },
        left: 70,
        top: 25,
        height: 40,
        width: 200
    });
    row.add(addressLabel);
    var iconImage = Titanium.UI.createImageView({
        text: json[i].bar.logo_file_name,
        width: 50,
        height: 50,
        left: 10,
        top: 10
    });
    row.add(iconImage);
    data.push(row);
}
barList.setData(data);
};
xhr.open('GET', 'http://site.com/bars.json');
xhr.send();

barList.addEventListener('click', function (e) {

   var newwindow =require('tabledetails')
   var wind= new newwindow(json[e.index])  /// here we are sending particular bar data
   wind.open({modal:true})
 }) 
```

2）使用数据显示细节

-----> tabledetails.js

```
 function details(data){

 var details =Ti.UI.createWindow({backgroundColor="#fff"})
 var lbl = Ti.UI.createLabel({
    text: JSON.stringify(data.address),
    top: 10
});
detail.add(lbl); // just so you can see it here as well

 var mon = Ti.UI.createLabel({
    text: data.mon_special,
    top: 30
});
detail.add(mon); 

var tues = Ti.UI.createLabel({
    text: data.tues_special,
    top: 50
});
detail.add(tues); 

var weds = Ti.UI.createLabel({
    text: data.weds_special,
    top: 50
});
detail.add(weds); 

var thurs = Ti.UI.createLabel({
    text: e.rowData.data.thurs_special,
    top: 50
});
detail.add(thurs); 

var fri = Ti.UI.createLabel({
    text: data.fri_special,
    top: 50
});
detail.add(fri); 

var sat = Ti.UI.createLabel({
    text: e.rowData.data.sat_special,
    top: 50
});
detail.add(sat); 

var sund = Ti.UI.createLabel({
    text: data.sun_special,
    top: 50
});
detail.add(sund); 

 return details;
}
 module.exports=detials 
```

# mysql - MySQL 连接提示输入密码，即使这是在连接字符串中

> ID：14948160
> 
> 赞同：3
> 
> 时间：2013-02-19T01:07:16.877
> 
> 标签：mysql, delphi, odbc

这个看起来很奇怪。

我有一个连接到 MySQL 数据库的 Pascal 单元

```
unit u_MySQLConnection;

interface

uses
  ADODB,
  AnsiStrings,
  Generics.Collections,
  SysUtils,
  DB
  ;

type
  TMySQLConnection = class
    strict private
      mysqlCon : TADOConnection;
    public
      function Connect:boolean;
      destructor Destroy;
  end;

var
  MySQLConnection : TMySQLConnection;

implementation

function TMySQLConnection.Connect:boolean;
var
    success : boolean;
begin

    success := true;
    try

      if NOT (mysqlCon = nil)
      then mysqlCon.Destroy;

      mysqlCon := TADOConnection.Create(nil);

      mysqlCon.ConnectionString := 'DRIVER={MySQL ODBC 3.51 Driver}; SERVER=localhost; DATABASE=database; UID=root; PASSWORD=password;OPTION=3;';

    except
        success := false;
    end;

    Result := success;
end;

destructor TMySQLConnection.Destroy;
begin
    FreeAndNil(mysqlCon);
    inherited;
end;

end. 
```

当我尝试连接时

```
MySQLConnection := TMySQLConnection.Create;

try
    MySQLConnection.Connect;
finally
    MySQLConnection.Destroy;
end; 
```

即使密码已经在连接字符串中，也会出现密码提示对话框。如果我在此提示中输入用户名和密码，其他一切正常。

这里的事情变得有点奇怪：

当我将数据库连接命令移动到主 .dpr 文件中时，如图所示

```
program DieselBatch;

uses
  Vcl.Forms,
  u_MySQLConnection in '..\src\u_MySQLConnection.pas'
  (*,
  frm_About in '..\src\frm_About.pas' {frmAbout},
  frm_AnalystDetails in '..\src\frm_AnalystDetails.pas' {frmAnalystDetails},
  frm_Batch in '..\src\frm_Batch.pas' {frmBatch},
  frm_ConfirmResultsChanged in '..\src\frm_ConfirmResultsChanged.pas' {frmConfirmResultsChanged},
  frm_DebugSample in '..\src\frm_DebugSample.pas' {frmDebugSample},
  frm_FlashManualEntry in '..\src\frm_FlashManualEntry.pas' {frmFlashEntry},
  frm_Main in '..\src\frm_Main.pas' {frmMain},
  frm_SampleComment in '..\src\frm_SampleComment.pas' {frmSampleComment},
  frm_SelectAnalystForResult in '..\src\frm_SelectAnalystForResult.pas' {frmSelectAnalystForResult},
  u_Data in '..\src\u_Data.pas',
  u_MicroCheck in '..\src\u_MicroCheck.pas',
  u_Undo in '..\src\u_Undo.pas'
  *)
  ;

{$R *.res}

var
  MySQLConnection : TMySQLConnection;

begin

  MySQLConnection := TMySQLConnection.Create;

  try
      MySQLConnection.Connect;
  finally
      MySQLConnection.Destroy;
  end; 
```

那么密码提示就不会出现了，只要把那些单位注释掉就行了。

当我再次取消注释上述单位时，问题再次出现。

其中一些单元确实使用 ADODB 和 DB，但我看不出这些单元的存在应该如何影响 MySQLConnection 单元的行为......

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T01:38:13.983

# 简短的回答

将`LoginPrompt`连接对象的属性设置为`False`。

# 为什么评论所有表单单元时它没有出现？

好吧，TCustomConnection 后代的常用 DoConnect 方法检查`LoginPrompt`属性，然后调用`LoginDialogProc`/`LoginDialogExProc`过程变量（如果已分配）。变量在`Data.DB.pas`.

`initialization`VCL 本身在单元部分中分配此变量`VCL.DBLogDlg.pas`，其中包含您看到的标准对话框，并且此单元由`DBCtrls.pas`单元使用，并在您使用任何数据感知控件时自动添加到您的项目中。

如果您注释掉所有包含数据感知控件的单元，则该`DBCtrls.pas`单元不会链接到您的可执行文件中，因此在您连接时不会显示已*注册的登录对话框。*

# ruby-on-rails - Sunspot Rails：无法建立连接，因为目标机器主动拒绝它

> ID：14948161
> 
> 赞同：0
> 
> 时间：2013-02-19T01:07:23.460
> 
> 标签：ruby-on-rails, solr, sunspot

我在 Rails 应用程序上运行 sunspot，并且可以（我假设）让搜索服务器使用“rake sunspot:solr:run”运行。不幸的是，当我尝试访问搜索索引时，我的搜索控制器中出现 ECONNREFUSED 错误。

我试过完全关闭我的防火墙，但没有运气。将 sunspot.yml 中的所有端口更改为 8983 也没有运气。我发现了命令“netstat -anb”，但不知道要查找什么进程。什么可能导致此错误？

**编辑**

以下内容也无济于事，因为 rake sunspot:solr:start 不起作用。

```
Common Initial Troubleshooting.
If you see: Errno::ECONNREFUSED (Connection refused - connect(2)) Then perhaps:

You have not started the solr server:
$ rake sunspot:solr:start

An error occurred in starting the solr server (such as not having the Java Runtime        Environment installed). do
$ rake sunspot:solr:run
to run the server in the foreground and check for errors.

If you come across this error in testing but not development, then perhaps you have not     invoked the task with the correct environment:
$ RAILS_ENV=test rake sunspot:solr:run 
```

**编辑 2** sunspot:solr:run 还在终端中显示以下内容，但似乎继续在终端中加载其他详细信息：

```
WARN:  failed SocketConnector @ 0.0.0.0:8983
java.net.BindException: Address already in use: JVM_Bind

:WARN:  EXCEPTION
java.net.BindException: Address already in use: JVM_Bind 
```

**更多细节**

```
INFO:  Started SocketConnector @ 0.0.0.0:8983 
```

我如何更改端口，因为 java.exe**也在**侦听此端口。我更改了 sunspot.yml 和 scripts.conf，但 solr:run 仍然连接到端口 8983。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-28T21:13:22.657

听起来您正在运行另一个 Solr 实例。尝试杀死所有实例并再次运行它。

# c++ - 简单的 C++ 输入文件和 if 语句

> ID：14948167
> 
> 赞同：0
> 
> 时间：2013-02-19T01:08:05.123
> 
> 标签：c++, if-statement, file-io

我编写了代码并且它可以工作，除了总数是错误的。它应该将 distanceRate 乘以速率并将每个成本相加得出总数，但它没有这样做。任何帮助，将不胜感激。

```
#include <iostream>
#include <string>
#include <iomanip>
#include <fstream>

using namespace std;

int main()
{
    //Declare Variables
    ifstream inFile;

    double packageWeight;
    double distance;
    double totalCharge = 0;
    double rate;
    double distanceRate;

    int customerNumber;
    double shippingCharge;
    int packageCount = 0;

    inFile.open("shipping.txt");
    if(inFile)
    {
        cout << "Customer   Package   Shipping" << endl;
        cout << "Number     Weight    Distance" << endl;

        while(!inFile.eof())
        {
            inFile >> customerNumber;
            inFile >> packageWeight;
            inFile >> distance;

            if(0 < packageWeight <= 2)
                rate = 1.10;
            else if(2 < packageWeight <=6)
                rate = 2.20;
            else if(6 < packageWeight <= 10)
                rate = 3.70;
            else if(10 < packageWeight <=20)
                rate = 4.80;
            else
                cout << "Invalid package weight" << endl;

            if( 0 < distance <= 500)
                distanceRate = 1;
            else if( 500 < distance <= 1000)
                distanceRate = 2;
            else if(1000 < distance <= 1500)
                distanceRate = 3;
            else if(1500 < distance <= 2000)
                distanceRate = 4;
            else
                cout << "Invalid distance" << endl;

            packageCount += customerNumber;
            shippingCharge = rate * distanceRate;
            totalCharge += shippingCharge;

            cout << fixed << setprecision(2) << showpoint;
            cout << setw(2) << customerNumber
            << right << setw(14) << packageWeight
            << setw(13) << distance
            << endl;

        } //End of while loop

        cout << "\nPackage shipped : " << packageCount << endl;
        cout << "Total Charge : $" << totalCharge << endl;
        inFile.close();
    }
    else
    {
        cout << "Could not open file" << endl;
    }
    system("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:18:54.523

Some issues that I see in the snippet you gave me are as follows:

1.  As pointed out by billz in a comment, your if statements are invalid. The statement `if( 0 < distance <= 500)` is not doing what you expect, it evaluates from left to right, so you have `0 < distance` (lets say that evaluates to `true`) so then you have `true <= 1000` which isn't going to give the results that you think it will. This actually needs to be broken apart into two separate comparisons like `distance > 0 && distance < 500`.

2.  As I noted in my comment, you're adding the customer number to the package count, this will most likely always give a wrong value for package count. If your customer numbers are 1, 2, 3, 4 then you claim the package count is 10 when it's actually only 4 (forgive me if I misunderstood the purpose of this field).

3.  You have no default value for `distanceRate` but you still use it in an operation (possibly uninitialized) which will give unexpected results (as you are seeing). In your else, you should actually give it a dummy value that way you guarantee that it will always be set. You also do reset it, so if it gets set to 4, and then next distance fails the tests and enters the else, you have another calculation on the variable as 4 instead of it's default value. You should initialize any variable that you plan to use unless you have explicit reason not to give it a value at initialization, and anytime you use a variable in a loop you should reset it's value at the start of the loop.

**Additional Note (EDIT)**

* * *

I wouldn't recommend using `system("pause");` as it does a lot more behind the scenes than you would want in a simple pause, a better approach I've seen used is:

```
#include <iostream>
#include <conio.h>
using namespace std;

int main() {
    cout << "Press any key to continue!";
    _getch();
    cout << "Finished";

    return 0;
} 
```

**EDIT 2**

* * *

If statments can contain a single line **or** a code block to execute.

Single line:

```
if (someValueIsTrue)
    executeThisFunction(); 
```

Code block:

```
if (someValueIsTrue) {
    executeThisFunction();
    alsoThisFunction();
} 
```

Anytime you need to execute more than one statement in an if/else/while/for/do...while/etc... you'll need a code block. I imagine (based on your explanation) that you did:

```
if (blah)
    // ....
else
    distanceRate = 0;
    cout << "Invalid Distance"; 
```

And the compiler only sees that you have the `distanceRate = 0` nested in the loop, the `cout` statement is actually not part of the else but part of the previous block of code. You need to use a code block here.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:24:12.590

```
!inFile.eof()  // incorrect
 inFile.good() // correct 
```

read on eof() it doesn't do what you might think it does.

```
if( 0 < distance <= 500) // all the if statements are incorrect
if(distance>0 && distance<=500) // correct 
```

The way you wrote the if condition, it does not do what you think it does.

# c# - 如何在 WPF 中模拟控制台？

> ID：14948171
> 
> 赞同：15
> 
> 时间：2013-02-19T01:08:33.220
> 
> 标签：c#, wpf, ssh, console, emulation

我想要一些正确方向的提示，甚至是解决这个问题的现成解决方案，但我很困惑（我只是初学者/中级）：

我正在尝试在我的应用程序中实现 SSH。SSH 后端工作正常等，但我被困在前端。什么 WPF 组合会为我提供模拟控制台的适当解决方案？抛开一个完整的终端仿真，我很乐意简单地将 readline/writeline 变成一个看起来像控制台的东西:-)

我目前最好的方法是一个 80x50 的单个字符网格，产生 4000 个单个单元格，这感觉就像一个过度杀伤力。

另一个想法是制作一个控制台应用程序。绑定到另一个项目中的 wpf 窗口。但是......这甚至可能吗？如何？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-19T12:27:05.400

鉴于您想*模拟*控制台，我会这样做。请注意，您必须自己处理命令并输出结果。

页面.xaml

```
<Window x:Class="ConsoleEmulation.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" MinHeight="350" MinWidth="525" Height="350" Width="525">
    <Grid>
        <ScrollViewer Name="Scroller" Margin="0" Background="Black">
            <StackPanel>
                <ItemsControl ItemsSource="{Binding ConsoleOutput, Mode=OneWay}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding Path=.}" Foreground="White" FontFamily="Consolas"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
                <TextBox Text="{Binding ConsoleInput, Mode=TwoWay}" Background="Black" Foreground="White" FontFamily="Consolas" Name="InputBlock" BorderBrush="{x:Null}" SelectionBrush="{x:Null}" />
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Window> 
```

页面.xaml.cs

```
public partial class MainWindow : Window
{
    ConsoleContent dc = new ConsoleContent();

    public MainWindow()
    {
        InitializeComponent();
        DataContext = dc;
        Loaded += MainWindow_Loaded;
    }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        InputBlock.KeyDown += InputBlock_KeyDown;
        InputBlock.Focus();
    }

    void InputBlock_KeyDown(object sender, KeyEventArgs e)
    {
        if (e.Key == Key.Enter)
        {
            dc.ConsoleInput = InputBlock.Text;
            dc.RunCommand();
            InputBlock.Focus();
            Scroller.ScrollToBottom();
        }
    }
}

public class ConsoleContent : INotifyPropertyChanged
{
    string consoleInput = string.Empty;
    ObservableCollection<string> consoleOutput = new ObservableCollection<string>() { "Console Emulation Sample..." };

    public string ConsoleInput
    {
        get
        {
            return consoleInput;
        }
        set
        {
            consoleInput = value;
            OnPropertyChanged("ConsoleInput");
        }
    }

    public ObservableCollection<string> ConsoleOutput
    {
        get
        {
            return consoleOutput;
        }
        set
        {
            consoleOutput = value;
            OnPropertyChanged("ConsoleOutput");
        }
    }

    public void RunCommand()
    {
        ConsoleOutput.Add(ConsoleInput);
        // do your stuff here.
        ConsoleInput = String.Empty;
    }

    public event PropertyChangedEventHandler PropertyChanged;
    void OnPropertyChanged(string propertyName)
    {
        if (null != PropertyChanged)
            PropertyChanged(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T11:35:59.733

您是否知道可以使用 AllocConsole 从应用程序中显示控制台窗口？

> 这是一种创建“双模式”应用程序的简单方法，可以是控制台或 Windows 窗体应用程序。

```
[DllImport("kernel32")]
static extern bool AllocConsole(); 
```

或者你可以使用这个：

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition/>
        <RowDefinition Height="30"/>
    </Grid.RowDefinitions>
    <TextBlock Text="Console contents..." HorizontalAlignment="Stretch" VerticalAlignment="Stretch" x:Name="ConsoleTextBlock"/>
    <DockPanel Grid.Row="1">
        <TextBox/>
    </DockPanel>
</Grid> 
```

为获得更好的外观，请将 TextBlock 替换为 ListBox 并相应地设置 ItemTemplate 的样式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-20T16:49:03.020

我自己没有做过，但这是我的“如果有时间我会做”的项目之一。因此，我仍在寻找现有的实现：-P

无论如何，一些想法：

使用视觉效果（即椭圆、文本块）的方法可能不是一个好主意。想想如果你想要 200x100 字符会发生什么。甚至可能是一个后备缓冲区。将它全部保存在内存中+绘制它......这将非常慢。

因此，更好（甚至是正确）的方法是“画自己”。由于 WPF 是后缓冲的，并且您不想显示任意位图，因此最可能的方法是创建一个新的 UserControl 并覆盖它的 Paint-Method。您可能更喜欢从 Control 派生，但 UserControl 可能有 Content，因此您可以在里面显示类似连接指示器图标的东西。

架构方面，我建议创建一个包含控制台缓冲区模型的依赖属性**Buffer** ( )。`ConsoleBuffer`另一个 DP 将持有左上角**位置**( `long`)。它决定了从哪里开始显示（当你往后看的时候）。控制台模型我将创建一个包含 a`char[]`和 a `Color[]`（一维）的类。使用换行符和`\n`字符来制作线条（因为这是控制台的字符）。然后，如果您调整控件的大小，它将重新流动而无需重新分配缓冲区。您可以使用不同大小的 **ConsoleBuffer**s（用于不同数量的后视字符）。

`ConsoleBuffer.Write(string s)`是你做事的方法。

Maybe it is advisable to hold arrays of arrays `char[][]` to represent lines.... but that is up to finding out while programming.

# c++ - 为指向两个不同类的指针重载赋值运算符

> ID：14948176
> 
> 赞同：2
> 
> 时间：2013-02-19T01:09:15.250
> 
> 标签：c++, overloading, variable-assignment, operator-keyword

我的问题：我正在尝试为指向两个不同类的指针重载赋值运算符。这是一个例子：

直流电：

```
#ifndef DC_H_
#define DC_H_

#include "ic.h"

class dc {

double d;
char c;

public:

dc(): d(0), c(0) { }

dc(double d_, char c_): d(d_), c(c_) { }

dc* operator=(const ic* rhs);

~dc() { }

};

#endif /* DC_H_ */ 
```

ic.h 类：

```
#ifndef IC_H_
#define IC_H_

class ic {

int i;
char c;

public:

ic(): i(0), c(0) { }

ic(int i_, char c_): i(i_), c(c_) { }

~ic() { }

};

#endif /* IC_H_ */ 
```

dc.cpp：

```
#include "dc.h"

dc* dc::operator=(const ic* rhs) {
d = rhs->i;
c = rhs->c;  
return this;
} 
```

ic.cpp：

```
#include "ic.h" 
```

主.cpp：

```
#include "dc.h"
#include "ic.h"

#include<iostream>

int main() {

dc DC;
ic IC;

dc* dcptr = &DC;
ic* icptr = &IC;

dcptr = icptr;

return 0;
} 
```

我收到以下错误消息：

> 错误：无法在分配中将“ic*”转换为“dc*”

如果我使用引用而不是指针来完成所有这些工作。不幸的是，因为我想使用指向 ic 和 dc 的指针作为另一个类中的成员，所以我不能使用引用，因为必须初始化作为成员的引用，并且一旦初始化它们就不能更改为引用另一个对象。我希望能够使用 ic 和 dc 进行算术运算，例如：

```
dc *d1, *d2, *d3;
ic *i1, *i2, *i3;
*d1 = (*d1)*(*i1) + (*i2)*(*d2) - (*d3)*(*i3); 
```

但是我希望我的代码看起来不错，并且不想`(*)*(*)`到处都是。取而代之的是这样的：

```
d1 = d1*i1 + i2*d2 - d3*i3; 
```

这就是我想这样做的原因。请让我知道这是否可能。对我来说，编译器似乎想要调用指向指针赋值的默认指针而不是重载的指针。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T01:17:23.877

您不能为指针重载运算符。

一个选项，如果你想坚持运算符重载，是创建一个指针包装对象，一个包含指向对象的指针的对象 - 本质上是一个智能指针，并重载该对象的运算符。

# node.js - 如何在登录时自动获取 nvm

> ID：14948179
> 
> 赞同：4
> 
> 时间：2013-02-19T01:09:37.700
> 
> 标签：node.js, nvm

我正在使用 nvm 来管理节点版本。

我喜欢在登录时制作 nvm，所以我不必每次登录时都手动进行。

在我的用户主目录中，有一个 .bashrc 文件。我在文件末尾附加了以下两行。然后重新启动我的mac os。登录后，没有获取 nvm。我必须再次手动运行它们。无法弄清楚出了什么问题。请帮忙。

```
. ~/nvm/nvm.sh

nvm use 0.8.20 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-03T08:47:29.693

你需要把你的`.bash_profile`这条线

```
[[ -s $HOME/.nvm/nvm.sh ]] && . $HOME/.nvm/nvm.sh 
```

获取文件 ( `source ~/.bash_profile`) 或重新打开 shell，然后在 shell 中执行：

```
$ nvm alias default <version> 
```

这将在您打开的任何新外壳中加载节点。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-26T23:27:06.953

## 使用`.nvmrc`文件

事实证明，`.nvmrc`在您的主目录中创建一个文件就足够了。打开终端时它会自动加载。

`.nvmrc`要使用我们要运行的版本*（0.12.2）*创建文件， 请执行以下操作：

```
echo '0.12.2' > ~/.nvmrc 
```

### 如果由于某种原因不起作用，请`nvm`从您的`.bashrc`

但前提是您在交互模式下运行。

如果 shell 以交互模式启动，请将要运行的命令`nvm use 0.12.2` *（或您想要运行的任何其他版本）*`.bashrc`添加到.

```
echo '[[ $- == *i* ]] && nvm use 0.12.2' >> ~/.bashrc 
```

**轰隆隆，搞定！:)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-03T02:56:21.633

至少对于 Mac，打开您的 .profile 文件，并将这一行添加到

```
[[ -s $HOME/.nvm/nvm.sh ]] && source "$HOME/.nvm/nvm.sh" 
# Load NVM into a shell session *as a function* 
```

完成，宾果游戏，GG。

# php - 如何将动态创建的列表传递给控制器 以保存到数据库中？

> ID：14948181
> 
> 赞同：2
> 
> 时间：2013-02-19T01:09:37.977
> 
> 标签：php, zend-framework, concrete5

我在 Concrete5 工作，对 MVC 概念很陌生。我有一些 jquery 从我的视图中的文本框创建一个无序列表。如果您熟悉 Concrete5，这是我要添加列表的块的视图。它基本上是产品的功能列表。此视图需要将列表保存到数据库基本文件中。通常这很简单地使用一个变量来保存信息（也就是视图中其他所有内容的保存方式）。我遇到的问题是我不知道如何使用控制器将无序列表从视图传递到控制器到数据库，以便保存它。任何帮助和示例代码将不胜感激。我很确定我需要在我的控制器中编写一个 php 函数来获取列表，但我不确定代码是什么。

自动.js

```
$("#addList").click(function() {
    var text = $("#inputList").val() + '<button>x</button>';
    if(text.length){
        $('<li />', {html: text}).appendTo('ul.featureList')
        };
});
$('ul').on('click','button', function(el){
    $(this).parent().remove()
}); 
```

添加/编辑.php

```
<div class="ccm-block-field-group">
<h2><?php echo t('Features') ?></h2> 
```

现在，'features' 是我的数据库文件 db.xml 中字段的名称。 featureList 区域是生成列表的位置。我知道它需要改变一下才能工作，只是不确定。

```
<?php echo $form->textarea('features', $features, array());?>
<input type="test" id="inputList" />
<button type="button" id="addList">Add</button> 
<ul class="featureList"></ul>
</div> 
```

视图.php

```
echo "<h2>{$proName}</h2>";
echo "{$description}";
echo "<h3>{$features}</h3>";
echo "<h2>{$price}</h2>";
echo "<p>{$priceInfo}</p>"; 
```

数据库.xml

```
<field name="features" type="X2"></field> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:44:10.203

使用混凝土块，您可能会遇到两种不同的情况：

1.  管理员用户正在编辑块（或添加新块），并且您希望将此数据保存到数据库中。
2.  公共用户正在查看该块，但该块视图本身有一个表单（例如，联系表单块），并且您想要在提交公共表单时执行某些操作（例如，向管理员发送通知电子邮件，表明某人拥有填写表格，或将提交的内容存储在数据库中以供将来审查）。

如果您正在谈论情况＃1，则需要在控制器的`save()`方法中放置一些自定义代码。如果您在谈论情况＃2，您需要在控制器中创建自己的操作方法，并且您实际上需要`<form>`在 view.php 文件中有一个。

更新：根据您添加到问题的示例代码，解决方案如下：您的数据返回服务器的唯一方法是通过表单 POST。`<li>`元素不是表单字段，因此它们中的数据不会与表单一起发布。因此，当您将新`<li>`元素添加到页面时，您*还*应该添加一个隐藏的表单字段，如下所示：

```
 var listItemCounter = 0;
$("#addList").click(function() {
        listItemCounter++;
    var text = $("#inputList").val() + '<button data-id="' + listItemCounter + '">x</button>'; //assign a unique id number to this button, so it knows which hidden field to remove when clicked
    if(text.length){
        $('<li />', {html: text}).appendTo('ul.featureList');
        $('<input type="hidden" name="features[]" value="' + text + '" data-id="' + listItemCounter + '" />').insertAfter('ul.featureList');
    };
});
$('ul').on('click','button', function(el){
        $('input[data-id="' + $(this).attr('data-id') + '"]').remove(); //remove the hidden field so it does not get POSTed when user saves
    $(this).parent().remove();
}); 
```

现在，在块的 controller.php 文件中，您将需要添加一个`save()`方法，该方法将从这些隐藏字段中获取所有数据，将它们组合起来并将它们放入您在 db.xml 文件中声明的“功能”字段中：

```
public function save($args) {
    $args['features'] = implode("\n", $args['features']); //combine all feature items into one string, separated by "newline" characters
    parent::save($args);
} 
```

最后，在您的 view.php 文件中，您可以转换特征列表（作为一个字符串保存到数据库中，每个项目由一个“换行符”字符分隔），如下所示：

```
<?php echo nl2br($features); ?> 
```

或者，如果您想将其作为单独的列表项输出，您可以执行以下操作：

```
<ul>
<?php
$features = explode("\n", $features);
foreach ($features as $feature) {
    echo '<li>' . $feature . '</li>';
}
?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T18:51:06.790

您不会将视图中的内容传递给控制器​​。控制器在视图之前执行，因此您只能从控制器传递到视图。

尝试使用从 jquery 传递到应用程序的内容

```
$this->getRequest()->getParam('yourParametersName'); 
```

控制器内部。

卢西安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T01:45:54.713

我更改了 auto.js 文件，如下所示。似乎工作正常。

```
var listItemCounter = 0;
$("#addList").click(function() {
    listItemCounter++;
    var text = $("#inputList").val(); //assign a unique id number to this button, so it knows which hidden field to remove when clicked
    var buttonDataId = text + '<button data-id="' + listItemCounter + '">x</button>';
    if(text.length){
        $('<li />', {html: buttonDataId}).appendTo('ul.featureList');
        $('<input type="hidden" name="features[]" value="' + text + '" data-id="' + listItemCounter + '" />').insertAfter('ul.featureList');
        };
});
$('ul').on('click','button', function(el){
    $('input[data-id="' + $(this).attr('data-id') + '"]').remove();//remove the hidden field so it does not get POSTed when user saves
    $(this).parent().remove()
}); 
```

我离开的观点和乔丹列夫所说的一样。（谢谢！）然后我将 controller.php 更改为

`public function save($args) { $args['features'] = implode("\n", $args['features']);//combine all feature items into one string, separated by "newline" characters parent::save($args); }`

如果有人发现任何问题或放置我的代码的更好方法，请告诉我！我现在的新问题是一旦保存，如果我去编辑列表，它会清除我过去的条目并保存新条目。如果有人知道我必须编写的函数来显示当前列表并在编辑时添加到它，那就太好了。请给出一些示例代码。

# php - json导入mysql

> ID：14948184
> 
> 赞同：0
> 
> 时间：2013-02-19T01:09:54.787
> 
> 标签：php, mysql, json

目的是将用户输入的 JSON 保存到数据库中。现在，在有人攻击我之前，我知道 json，我知道 mysql，我知道它们之间的所有链接。

问题是：我需要将整个 JSON 提要安全地存储在表中的单个单元格中。

背景：这个功能将是一个工具的临时修复，需要尽快但需要很多时间。临时修复将允许系统以最少的代码上线。

用户将在此处创建 GOOGLE 地图样式（[http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html](http://gmaps-samples-v3.googlecode.com/svn/trunk/styledmaps/wizard/index.html)）

并为他们制作 JSON

```
[
  {
    "stylers": [
      { "visibility": "off" }
    ]
  },{
    "featureType": "water",
    "stylers": [
      { "visibility": "on" }
    ]
  },{
    "featureType": "transit.line",
    "elementType": "geometry.fill",
    "stylers": [
      { "visibility": "on" },
      { "hue": "#ff3300" },
      { "color": "#ff0000" },
      { "weight": 0.7 }
    ]
  },{
    "featureType": "transit.station.rail",
    "stylers": [
      { "visibility": "on" },
      { "color": "#0000ff" },
      { "weight": 4.6 }
    ]
  },{
  }
] 
```

然后，该站点将只调用 JSON 并稍后使用 jQuery 应用它。我的“最佳实践”方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:07:13.230

为了回答您的具体问题，我同意您应该使用 TEXT 列的海报“汤姆”。

但是，我认为为了便于使用，您还应该使用准备好的语句。如果您创建一个准备好的插入语句，则可以直接传入 JSON。这将是您数据库中准确 JSON（没有烦人的斜线）的最佳表示 - 并且是最安全的。请不要忘记执行此步骤 - 这非常重要！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:15:54.930

由于 MySQL 没有专用的 JSON 列类型，我只需将 JSON 存储在无界 TEXT 列中。只要确保您始终在写入时检查有效的 JSON。

# bash - bash脚本if语句错误

> ID：14948188
> 
> 赞同：0
> 
> 时间：2013-02-19T01:10:28.023
> 
> 标签：bash, if-statement, for-loop

我对 bash 脚本很陌生，但我设法编写了一个几乎可以完美运行的脚本，我为自己感到自豪。但是，我有这个问题，我不明白为什么它不起作用。我当前代码的一部分是这样的：

```
for begin in 1 51
do 
    echo -e "$begin"
    url="http://something&start-index=$begin&something"

    wget -O $HOME/Music/YoutubePlaylist/output$begin.txt $url 2>&1

    cat output1.txt > output.txt

    if ! [[ "$begin" = 1 ]]
        then
        cat output$begin.txt >> output.txt
    fi

done 
```

它完美地工作。

但是，如果我将 101 添加到第一行，它将不起作用。知道为什么吗？当我查看我的临时文件时，它实际上所做的只是将 output1.txt 中的内容写入 output.txt 中，而没有其他内容。

PS： output1.txt 和 output51.txt 不为空，而 output101.txt 为空。也许这是一个暗示......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:37:21.717

`cat output1.txt > output.txt`覆盖`output.txt`每一圈。

改为执行此操作（仅使用 更正问题`output.txt`）：

```
rm -f output.txt # if it should start with an empty file

for begin in 1 51
do 
  echo -e "$begin"
  url="http://something&start-index=$begin&something"

  wget -O $HOME/Music/YoutubePlaylist/output$begin.txt $url 2>&1

  cat output$begin.txt >> output.txt
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T10:35:14.260

这样的选项应该可以正常工作：

```
for begin in 1 51 101
do
 echo -e "$begin"
 ...
done 
```

你检查是否`wget -O $HOME/Music/YoutubePlaylist/output$begin.txt $url 2>&1` 存在？你能从命令行执行它并检查结果吗？例如

```
$wget -O $HOME/Music/YoutubePlaylist/output101.txt $url 2>&1 
```

问候

# ruby - 使用爆炸？

> ID：14948190
> 
> 赞同：2
> 
> 时间：2013-02-19T01:10:44.543
> 
> 标签：ruby

有人说 bang`!`表示方法“可能”修改对象。

在这个例子中：

```
foo = "A STRING"
foo.downcase
puts foo
# => A STRING
foo.downcase!
puts foo
# => a string 
```

爆炸符号似乎引起了副作用。`obj.method!`相当于`obj = obj.method`？_ 如果不是，为什么？有没有这两个表达式不等价的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T01:16:08.533

砰！在方法名称中，通常意味着“危险”。

*   它是一种方法命名约定，*而不是*运算符，*也不*是规则。

*   它通常意味着警告，或突变，或不可逆转，或引发异常等。

我们经常使用“！” 作为命名约定来区分两种类似的方法：

*   正常的方法名称返回一个结果。

*   这 ”！” 方法名称会做一些危险的事情。

编造“！”的例子 突变的意思：

```
obj.change #=> return a new object that has the change.
obj.change! #=> do the change by mutating the object. 
```

编造“！”的例子 意思是“引发错误”：

```
obj.save #=> if the object can't save, then return false.
obj.save! #=> if the object can't save, then raise an exception. 
```

编造“！”的例子 表示“危险”或“无法撤消”：

```
obj.exit #=> exit normally, running all exit handlers.
obj.exit! #=> exit immediately, skipping all exit handlers. 
```

所有这些都只是命名约定，开发人员选择提供两个名称相似的方法。

# c++ - 如何使用 boost::lambda 为现有指针创建新对象？

> ID：14948191
> 
> 赞同：0
> 
> 时间：2013-02-19T01:10:55.877
> 
> 标签：c++, boost, boost-thread, boost-lambda

我想要做的是 --> 在新线程中创建一个新对象。就像是：

```
Class* object = 0;
Arg arg;
boost::thread t( lambda::bind( object = lambda::new_ptr< Class >()( boost::ref( arg ) ); 
```

它不编译，什么是正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T00:29:57.477

感谢 ildjarn，我尝试使用 boost::phoenix 并让它工作，代码是：

```
Class* object = 0;
CArg arg0;
Arg arg1;

boost::thread t( boost::phoenix::val( boost::ref( object ) ) = boost::phoenix::new_< Class >( boost::cref( arg0 ), boost::ref( arg1 ) ); 
```

**同样，来自 ildjarn，更好的代码是：**

类*对象 = 0；

CArg arg0;

精氨酸 arg1;

命名空间 phx = boost::phoenix;

boost::thread t( phx::ref( object ) = phx::new_< 类 >( phx::cref( arg0 ), phx::ref( arg1 ) );

# android - 当我的应用程序进入横向视图时，一切都出错了

> ID：14948194
> 
> 赞同：0
> 
> 时间：2013-02-19T01:11:25.983
> 
> 标签：android

当我进入横向视图时，一切看起来都很好。你看。“许可证类型”，然后是一个要输入的框。但是，当人们在框中输入内容时，视图会发生一些变化，并且您看不到“许可证类型”只是一个按钮，单击该按钮后会转到下一个框，没有描述 这意味着这个人不知道他们在做什么。

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >
    <Button
        android:id="@+id/SaveBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:onClick="SaveBtn_Click"
        android:text="@string/SaveStr" />

    <Button
        android:id="@+id/BackBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="@string/BackStr" />

</TableRow>

    <ScrollView
        android:id="@+id/scrollView1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

    <TableLayout
    android:id="@+id/tableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" >

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/LicenceTypeStr"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/TypeEt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:gravity="left"
            android:hint="@string/LicenceTypeHintStr"
            android:singleLine="true" />

    </TableRow>

    <TableRow
        android:id="@+id/tableRow3"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:text="@string/LicenceNumberStr"
            android:textAppearance="?android:attr/textAppearanceSmall" />

        <EditText
            android:id="@+id/NumberEt"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:hint="@string/LicenceNumberHintStr"
            android:singleLine="true" >

            <requestFocus />
        </EditText>
    </TableRow>
  // .. more rowws

    <EditText
        android:id="@+id/ExpiryDateEt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:ems="10"
        android:inputType="date" />

    <Button
        android:id="@+id/FrontImgBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/FrontImgStr" />

    <ImageView
        android:id="@+id/imageView1"
android:layout_width="300dip"
android:layout_height="200dip"
/>

    <Button
        android:id="@+id/BackImgBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/BackImageStr" />

        <ImageView
            android:id="@+id/imageView2"
android:layout_width="300dip"
android:layout_height="200dip"
/>

</TableLayout> 
```

视图处于布局模式，因为我发现这是获取照片并对其进行操作然后显示它而不是丢失它的最佳方式。我肯定错过了什么。如果有人能指出我正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:25:20.173

Dr. Dredel 很聪明。但是，仅此方法并不能解决我的问题，因为在注释中我看到了 3/4 的屏幕可见。他的回答确实给了我通往分析器的道路。

android:imeOptions="actionDone"

在每个 EditText 字段中。

正如他所说，这也是一个重复的问题，但我会留下它，因为我的回答可能对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:17:50.287

您需要指定您不希望键盘在横向时占据整个屏幕。

在这里查看我的答案，它也对你有用（这在技术上是同一问题的重复）

[如何在横向模式下只打开半键盘？](https://stackoverflow.com/questions/8648401/how-to-open-only-half-keyboard-in-landscape-mode)

# c# - 如何从代码中设置 RSAProtectedConfigurationProvider 的密钥大小

> ID：14948202
> 
> 赞同：6
> 
> 时间：2013-02-19T01:12:30.063
> 
> 标签：c#, security, web-config, rsa

我的应用程序有可能保护选择的配置文件。这是使用[`SectionInformation.ProtectSection`](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.protectsection.aspx)指定部分的方法来完成的[`Configuration`](http://msdn.microsoft.com/en-us/library/system.configuration.configuration.aspx)。我正在使用标准提供者[`RsaProtectedConfigurationProvider`](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.aspx)。

代码非常简单 - 与[MSDN 上的示例](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.protectsection.aspx)非常相似。

有没有办法设置提供者应该使用的密钥大小？据我所知，RSA 的默认值为 1024。我需要将其设置为 2048 或更大。

当我们使用**asp_regiis.exe**时，可以使用命令行选项**-size**来完成类似的操作。但我需要从代码中做到这一点。也许有任何方法可以配置或预先创建密钥并将其以某种方式注入到默认密钥存储中，因此下次使用 of将赶上它......**`RsaProtectedConfigurationProvider``SectionInformation.ProtectSection`**

 **感谢您提供任何建议或示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-18T20:15:27.967

`RSAProtectedConfigurationProvider`提供了两种不同的方法。一个调用[`AddKey`](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.addkey%28v=vs.90%29.aspx)可用于在容器内创建密钥。如果您将密钥标记为可导出，您可以[`ExportKey`](http://msdn.microsoft.com/en-us/library/system.configuration.rsaprotectedconfigurationprovider.exportkey%28v=vs.90%29.aspx)稍后使用方法来获取该密钥并将其存储在其他地方。

如果您已有密钥，则可以使用该`ImportKey`方法。它将接受一个 XML blob，很像来自`ExportKey`.

`RsaProtectedConfigurationProvider`如果未提供，则使用默认容器名称**NetFrameworkConfigurationKey 。**因此，如果您预先创建了密钥并将其添加到该容器中，那么提供者应该在您使用它时将其提取出来。

```
// Same properties as .NET uses to load the key
CspParameters csp = new CspParameters();
csp.KeyContainerName = "NetFrameworkConfigurationKey"; 
csp.KeyNumber = 1;
csp.ProviderType = 1;

// Create the new key, and save it in the key store
rsa = new RSACryptoServiceProvider(2048, csp);
rsa.PersistKeyInCsp = true;
rsa.Clear(); 
```**

# asp.net-mvc - 支持数据库上下文的模型已更改；考虑代码优先迁移

> ID：14948205
> 
> 赞同：61
> 
> 时间：2013-02-19T01:12:44.317
> 
> 标签：asp.net-mvc, entity-framework

> 自创建数据库以来，支持“MyDbContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 ( [http://go.microsoft.com/fwlink/?LinkId=238269](http://go.microsoft.com/fwlink/?LinkId=238269) )。

是什么导致这种情况发生？我实际上只是创建了一个全新的数据库并且没有进行任何更改，但是每次我尝试从控制器访问模型时都会抛出这个。

**编辑**

这与我试图与两个单独的实体共享连接字符串（即数据库）这一事实有关。

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2016-05-27T17:00:14.147

就我而言，此错误是由数据库中存在 _MigrationsHistory 表引起的。删除该表解决了这个问题。不确定该表是如何进入我们的测试环境数据库的。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-02-19T01:38:13.250

EF codefirst 将查看您的 DbContext，并发现其中声明的所有实体集合（并通过导航属性查看与这些实体相关的实体）。然后它会查看你给它一个连接字符串的数据库，并确保那里的所有表都与模型中实体的结构相匹配。如果它们不匹配，则它无法读取/写入这些表。每当您创建一个新数据库，或者如果您更改实体类声明的某些内容，例如添加属性或更改数据类型，那么它会检测到模型和数据库不同步。默认情况下，它只会给您上述错误。通常在开发过程中，您希望重新创建数据库（擦除任何数据）并从新模型结构中再次生成数据库。

为此，请参阅本文中的“RecreateDatabaseIfModelChanges 功能”： [http ://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx](http://weblogs.asp.net/scottgu/archive/2010/07/16/code-first-development-with-entity-framework-4.aspx)

您基本上需要提供一个继承自 DropCreateDatabaseIfModelChanges 的数据库初始化程序（现在不推荐使用 RecreateDatabaseIfModelChanges）。为此，只需将此行添加到文件的`Application_Start`方法中`Global.asax`。

```
Database.SetInitializer<NameOfDbContext>(new DropCreateDatabaseIfModelChanges<NameOfDbContext>()); 
```

一旦您投入生产并且不再希望丢失数据，那么您将删除此初始化程序并改为使用数据库迁移，以便您可以在不丢失数据的情况下部署更改。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2014-09-11T07:59:17.523

要解决此错误，请在 Global.asax.cs 文件的 Application_Start() 方法中编写以下代码

```
Database.SetInitializer<MyDbContext>(null); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-09-10T12:54:03.413

如果您对上下文进行了更改，并且想要手动对 DB 进行相关更改（或保持原样），则有一种快速而肮脏的方法。

转到数据库，并从“_MigrationHistory”表中删除所有内容

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2016-10-15T03:23:42.003

**最简单和最安全的方法** 如果您知道您确实想要更改/更新您的数据结构，以便数据库可以与您的 DBContext 同步，最安全的方法是：

1.  打开你的包管理器控制台
2.  类型：更新数据库 -verbose -force

这告诉 EF 对您的数据库进行更改，以使其与您的 DBContext 数据结构相匹配

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2019-08-31T16:27:32.673

只需转到包管理控制台，键入以下内容：

**启用迁移**

***如果出现这样的错误“无法更新数据库以匹配当前模型，因为有待处理的更改并且自动迁移已禁用。将待处理的模型更改写入基于代码的迁移或启用自动迁移。”**

执行此操作 >>>**添加迁移**

*Visual Studio 会询问名称，请输入您想要的名称。

**更新数据库**

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-12-03T13:35:49.430

将此添加为另一种可能的解决方案，因为这是在我们的案例中解决的问题；

**确保您是否有多个项目使用相同的实体框架 Nuget 包版本！。**

在我们的例子中，我们有一个项目（如果项目 A 则调用）包含所有实体的 EF 代码第一个上下文。我们使用这个项目来添加迁移和更新数据库。但是，第二个项目 ( B ) 正在引用项目 A 以利用上下文。运行这个项目时，我们遇到了同样的错误；

*自创建数据库以来，支持“MyDbContext”上下文的模型已更改。考虑使用 Code First 迁移来更新数据库 ( [http://go.microsoft.com/fwlink/?LinkId=238269](http://go.microsoft.com/fwlink/?LinkId=238269) )。*

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2019-09-25T08:19:24.127

您可以通过删除`__MigrationHistory`在数据库中自动创建的表并使用代码优先迁移记录数据库中的任何更新来解决此问题。在这里，在这种情况下，您手动更改了数据库，而 EF 假设您必须使用迁移工具进行更改。删除表对 EF 意味着没有更新，也不需要进行代码优先迁移，因此它工作得很好。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-09-24T10:33:02.587

当您的数据库与您的模型不同步时会发生此错误，反之亦然。要克服这个问题，请按照以下步骤操作 -

a)通过 nuget 包管理器控制台使用**add-migration <{Migration File Name}> 添加迁移文件。**此迁移文件将包含用于同步 Db 和代码之间不同步的任何内容的脚本。

b) 使用**update-database**命令更新数据库。这将使用模型中的最新更改更新数据库。

如果这没有帮助，请在 Global.asax.cs 文件的 Application_Start 方法中添加代码行后尝试这些步骤 -

```
Database.SetInitializer<VidlyDbContext>(new DropCreateDatabaseIfModelChanges<VidlyDbContext>()); 
```

参考 - [http://robertgreiner.com/2012/05/unable-to-update-database-to-match-the-current-model-pending-changes/](http://robertgreiner.com/2012/05/unable-to-update-database-to-match-the-current-model-pending-changes/)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-05-05T19:16:38.887

当您的**表结构和模型类不再同步**时，就会发生这种情况。您需要根据模型类更新表结构，反之亦然——这是您的数据很重要且不能删除的时候。如果您的数据结构已更改并且数据对您不重要，则可以通过在**Global.asax.cs**中添加以下代码来使用该`DropCreateDatabaseIfModelChanges`功能（以前称为“ ”功能） ：`RecreateDatabaseIfModelChanges`

 **```
Database.SetInitializer<MyDbContext>(new DropCreateDatabaseIfModelChanges<MyDbContext>()); 
```

再次运行您的应用程序。

顾名思义，这将删除您的数据库并根据您的最新模型类（或类）重新创建——前提是您相信模型类中的表结构定义是最新和最新的；否则更改模型类的属性定义。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-07-17T22:40:32.697

如果您使用已存在的表更改了模型和数据库，并且收到错误“支持数据库上下文的模型已更改；考虑代码优先迁移”，您应该：

*   删除项目中“迁移”文件夹下的文件
*   打开包管理器控制台并运行`pm>update-database -Verbose`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-11-03T15:33:29.943

实体框架检测到模型发生了一些变化，你需要对数据库做一些事情来完成这项工作。解决方案：**1**。启用迁移**2**。更新数据库

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-09-09T15:42:08.353

你需要相信我。我收到此错误的原因很简单，因为我忘记在您的启动项目的 App.Config（我的是一个 wpf 项目）中添加连接字符串。

就我而言，整个配置

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=6.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
  </configSections>
  <connectionStrings>
    <add name="ZzaDbContext" connectionString="Data Source=(localdb)\MSSQLLocalDB;Initial Catalog=ZaaDbInDepth;Integrated Security=True;Connect Timeout=30;Encrypt=False;TrustServerCertificate=True;ApplicationIntent=ReadWrite;MultiSubnetFailover=False" providerName="System.Data.SqlClient"/>
  </connectionStrings>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.5.2" />
  </startup>
  <entityFramework>
    <defaultConnectionFactory type="System.Data.Entity.Infrastructure.LocalDbConnectionFactory, EntityFramework">
      <parameters>
        <parameter value="mssqllocaldb" />
      </parameters>
    </defaultConnectionFactory>
    <providers>
      <provider invariantName="System.Data.SqlClient" type="System.Data.Entity.SqlServer.SqlProviderServices, EntityFramework.SqlServer" />
    </providers>
  </entityFramework>
</configuration> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-29T19:15:10.680

如果您使用身份，可能您的上下文名称与migrationHistory last record context Key 不同。因此，您需要在这部分代码中使用 ContextKey 中的新名称更改名称：

```
 Database.SetInitializer<ContextName>(null); 
```**

# tomcat - tomcat-users.xml 中角色标签的用途？

> ID：14948212
> 
> 赞同：12
> 
> 时间：2013-02-19T01:13:40.247
> 
> 标签：tomcat, configuration, tomcat7

在 Tomcat 7 的*tomcat-users.xml*`<role />`文件中，标签的用途是什么？

对于 Tomcat 7 的 XAMPP 实例，我已经弄清楚如何配置我的*tomcat-users.xml*文件以允许我访问**Tomcat Web Application Manager**和**Tomcat Virtual Host Manager**。更具体地说，以下启用上述访问：

```
<tomcat-users>
  <user username="uname" password="pword" roles="manager-gui,admin-gui"/>
</tomcat-users> 
```

请注意，这个成功的 XML 片段中没有的是任何`<role />`标签。这就是我的问题的症结所在：我一生都无法弄清楚*角色*标签的目的是什么。

为了学习如何配置访问权限，我阅读了大量文档和论坛帖子，但它们似乎都在循环：一个可以定义*角色*，但*角色*本身似乎并没有定义任何有用的东西（？ )

例如，这是在*tomcat-users.xml*文件和许多论坛帖子中使用的反复出现的插图，“解释”了角色的使用。

```
<tomcat-users>
  <role rolename="tomcat"/>
  <user username="uname" password="pword" roles="tomcat"/>
</tomcat-users> 
```

好的，所以在这个“解释”中，*role*元素定义了一个等于*tomcat的**rolename*属性，然后*user*元素包含一个将用户角色定义为*tomcat的**角色*属性。重点是什么？

 ***以另一种方式问，鉴于在*角色*元素中，角色名称属性定义了*tomcat*，*角色= tomcat**究竟*做了什么？特别是与我的工作用户定义相比**其中*manager-gui*和*admin-gui*定义了启用**Tomcat Web 应用程序管理器**和**Tomcat 虚拟主机管理器**访问的角色。**

 **干杯并感谢，
莱利
SFO

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T15:57:33.227

据我了解，您（可以）定义角色：

*   因为它为您提供了更大的灵活性，例如添加描述。GUI 可以使用此信息。

    ```
    <role rolename="customer" description="Customer of Java WebService"/> 
    ```

*   您可以稍后在特定的 servlet 中重新映射或分组角色

    ```
    <security-role-ref>
        <role-name>cust</role-name>
        <role-link>bankCustomer</role-link>
    </security-role-ref> 
    ```

请记住，我不是 Tomcat 专家，所以我希望真正的专家可以完善这个答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-27T10:13:25.880

`<role .../>`元素 in的使用`tomcat-users.xml`是可选的。Tomcat 从元素和用户属性中`<role .../>`命名的角色构建角色列表。`roles="..."`

使用该`<role .../>`元素的好处是您可以声明支持的完整角色集，并且可以包含描述角色的描述属性。

顺便说一句，`tomcat-users.xml`它也支持组，尽管在默认情况下与 Tomcat 一起提供的示例中没有显示它们。组是一组角色，然后可以分配给用户。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-07T07:02:17.860

> 换一种方式问，鉴于在角色元素中，角色名称属性定义了tomcat，角色=tomcat 究竟做了什么？特别是与我的工作用户定义相比，manager-gui 和 admin-gui 定义了启用 Tomcat Web 应用程序管理器和 Tomcat 虚拟主机管理器访问的角色。

角色/安全约束在应用程序描述符*web.xml*中定义。

例如，在 tomcat *manager*应用程序中定义了*manager-gui*：

 *```
<security-constraint>
<web-resource-collection>
  <web-resource-name>HTML Manager interface (for humans)</web-resource-name>
  <url-pattern>/html/*</url-pattern>
</web-resource-collection>
<auth-constraint>
   <role-name>manager-gui</role-name>
</auth-constraint>
</security-constraint>
<security-role>
<description>
  The role that is required to access the HTML Manager pages
</description>
<role-name>manager-gui</role-name>
</security-role> 
```******

# javascript - 主干：删除省略号 onclick

> ID：14948215
> 
> 赞同：2
> 
> 时间：2013-02-19T01:13:53.357
> 
> 标签：javascript, jquery, backbone.js, underscore.js, ellipsis

**一点背景**

我正在尝试创建一个类似推特的提要，其中推文/行将在点击时展开，从而显示更多信息。

数据从 JSON 文件中提取（从后端发送到前端）。我使用主干在前端呈现数据。

假设我的提要显示 10 行，每行显示一些信息，然后单击行/div 展开以显示更多信息。描述字段包含相当多的文本，因此我在其上应用了 JavaScript 省略号。我使用 Javascript 省略号，因为简短描述需要多于一行（不要认为 CSS 省略号适用于多行）。

1.  我创建了一个插件，它将截断描述文本并单击我想删除省略号并将其替换为完整描述（因为该行将扩展）。

2.  我创建了一个插件，它将完整的描述（在被截断之前）保存到一个数组中。

**问题**

我的想法是将单击的行的索引（currentTarget）与保存的行的索引（在数组中）进行比较，然后用完整的描述替换省略号文本，然后用 jQuery animate 展开 div。

我不确定是否有办法从主干“点击事件”中获取索引（以便将其与保存在数组中的索引进行比较）？

如果有更好的方法来解决这个问题，请随时告诉我。

提前致谢

这是我的代码：

**截断和保存原始文本功能**

```
/**
 * Plugins
 */
var arr = [];

$.fn.truncate = function(){
    return this.each(function(index,element){
        var elementText = $(element).text();
        if(elementText.length > 165){
            var truncated = elementText.trim().substring(0, 165).split(" ").slice(0, -1).join(" ") + "…";
        }
        $(element).text(truncated);
    });
};

$.fn.getText = function(){
    return this.each(function(index,element){
        arr.push({
            i: index,
            v: $(element).text()
        });
    });
}; 
```

**骨干模型和集合**

```
/**
 * Model
 */
var Task = Backbone.Model.extend();

/**
 * Collections
 */
var RecentTasksList = Backbone.Collection.extend({
    model: Task,
    url: 'json/recentTasks.json'
}); 
```

**主干视图**

```
/**
 * Views
 */
var RecentTasksView = Backbone.View.extend({
    el: '.taskList',
    template: _.template($('#recentTasksTemplate').html()),
    render: function(){
        _.each(this.model.models, function(data){
            this.$el.append(this.template(data.toJSON()));
        }, this);

        $('.description').getText();
        $('.description').truncate();

        return this;
    }
});

var FullTaskView = Backbone.View.extend({
    el: '.taskContainer',
    events: {
        'click .task': 'showFullDetails'
    },
    showFullDetails: function(e){
        var eTarget = $(e.currentTarget);
        var $desc = $('.description');

        if(eTarget.hasClass('expanded')){
            eTarget.animate({
                'height': '80px'
            },
            function(){
                eTarget.removeClass('expanded');
            });
        }
        else{
            console.log($(eTarget).find($desc).html());

            eTarget.animate({
                //doesn't work lesser IE 8
                'height': eTarget[0].scrollHeight
            },
            function(){
                eTarget.addClass('expanded');
            });     
        }
    }
});

var AppView = Backbone.View.extend({
    el: 'body',
    initialize: function(){
        //Recent Tasks
        var recentTasksList = new RecentTasksList();
        var recentTasksView = new RecentTasksView({
            model: recentTasksList
        });
        recentTasksList.bind('reset', function(){
            recentTasksView.render();
        });
        recentTasksList.fetch();

        //Full Task Details
        var fullTaskView = new FullTaskView();
    }
});

var appView = new AppView(); 
```

**下划线模板**

```
<script id="recentTasksTemplate" type="text/template">
    <div class="task clearfix">
        <div class="image">
            <img src="<%= image %>" />
        </div>
        <div class="details">
            <h3 class="title"><%= title %></h3>
            <div class="description">
                <%= description %>
            </div>
        </div>
    <div>
</script> 
```

**HTML**

```
<div class="taskContainer">
    <div class="taskList"></div>
</div> 
```

**编辑**

最后一个问题。我在我的页面上添加了一个标签（类似的号召性用语）。单击时将显示相同类型的信息（我使用的是相同的模板）。例如我现在有RecentTask 和PopularTask。我为包含点击事件的选项卡创建了一个视图。我是否需要每次都实例化模型并查看和获取数据，还是可以重复使用已经初始化的模型？

我为第二个选项卡创建了一个新视图。从服务器获取 JSON 文件：

```
var PopularTasksList = Backbone.Collection.extend({
    model: Task,
    url: 'json/popularTasks.json'
});

var PopularTasksView = Backbone.View.extend({
    el: '.taskList',
    render: function(){
        $('.taskList').empty();
        _.each(this.model.models, function(model){
            var taskView = new TaskView({model: model});
            this.$el.append(taskView.render().el);
        }, this);
        return this;
    }
}); 
```

然后我创建了一个选项卡视图，它将在单击时显示正确的任务。

```
var TabsView = Backbone.View.extend({
            el: 'body',
            events:{
                'click .tabRecent': 'fetchDataRecentTasks',
                'click .tabPopular': 'fetchDataPopularTasks'
            },
            fetchDataRecentTasks: function(){
                var recentTasksList = new RecentTasksList();
                var recentTasksView = new RecentTasksView({
                    model: recentTasksList
                });
                recentTasksList.bind('reset', function(){
                    recentTasksView.render();
                });
                recentTasksList.fetch();
            },
            fetchDataPopularTasks: function(){
                var popularTasksList = new PopularTasksList();
                var popularTasksView = new PopularTasksView({
                    model: popularTasksList
                });     
                popularTasksList.bind('reset', function(){
                    popularTasksView.render();
                });
                popularTasksList.fetch();
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:19:30.023

我认为您应该为单个任务创建一个新视图。然后在该视图中，您可以处理点击，因此您可以访问任务模型，也可以非常轻松地访问该视图的 DOM。

然后你可以摆脱你的 FullTask​​View 和 jQuery 插件。

```
 /**
 * Model
 */
var Task = Backbone.Model.extend({
    getShortDescription: function(){
       var desc = this.get('description');
       if(desc.length > 165){
        return desc.trim().substring(0, 165).split(" ").slice(0, -1).join(" ") + "…";
       }
       return desc;
    }
}); 
```

添加新的TaskView，并更改RecentTasksView 以创建/渲染它们。

```
/**
 * Views
 */

var TaskView = Backbone.View.extend({
    template: _.template($('#recentTasksTemplate').html()),
    events: {
       'click': 'showFullDetails'
    },
    render: function(){
        // pass the model json, plus the short description to the template
        this.$el.html(this.template({
            data: this.model.toJSON(), 
            shortDesc: this.model.getShortDescription()
            }));

        return this;
    },
    showFullDetails: function(){
       // change text, show/hide, animate here
       // In the view, this.$() will only match elements within this view.

       // if expand...
       this.$('.description').html(this.model.get('description'));

       // if hide...
       this.$('.description').html(this.model.getShortDescription());
    }
});
var RecentTasksView = Backbone.View.extend({
    el: '.taskList',
    render: function(){
        _.each(this.model.models, function(model){
            // create a view for each task, render and append it
            var taskView = new TaskView({model: model});
            this.$el.append(taskView.render().el);
        }, this);

        return this;
    }
}); 
```

更改模板以使用传递给它的新数据。

```
// access the model stuff with data.title, etc. 
<script id="recentTasksTemplate" type="text/template">
    <div class="task clearfix">
        <div class="image">
            <img src="<%= data.image %>" />
        </div>
        <div class="details">
            <h3 class="title"><%= data.title %></h3>
            <div class="description">
                <%= shortDesc %>
            </div>
        </div>
    <div>
</script> 
```

编辑：

Backbone 视图旨在管理 DOM 元素，因此让每个任务成为自己的视图实例是一个好主意。这使得根据点击进行扩展和更改文本变得更加容易。此外，最好不要让视图外的代码更改其 DOM 元素内的内容，因此最好在每个任务视图内进行该操作。

这类似于 Todo 示例中的 TodoView：

[http://backbonejs.org/docs/todos.html](http://backbonejs.org/docs/todos.html)

[http://backbonejs.org/examples/todos/index.html](http://backbonejs.org/examples/todos/index.html)

您可以将模板函数传递给任何 javascript 对象（甚至是具有函数的对象，而不仅仅是属性）。由于您想要显示一些技术上不属于模型的数据，因此传递该`data`对象只是将您需要的内容放入模板的一种方式。

# php - Pagespeed 仍然可以在新服务器上运行，即使它不应该

> ID：14948220
> 
> 赞同：0
> 
> 时间：2013-02-19T01:14:31.493
> 
> 标签：php, apache, cpanel, pagespeed

我在以前的服务器上安装了 mod_pagespeed。我没有使用它，也不允许通过 .htaccess 使用它，因为经过一些测试后发现它实际上降低了我的网站速度。因此，它在很长一段时间内仍然通过 .htaccess 被“禁止”。

今天我搬到了一个新的服务器并使用 cPanel VHM 迁移功能迁移了用户帐户。据说它只迁移帐户而不迁移配置，但我现在有很多问题，我怀疑这主要是由于页面速度。它没有安装在新服务器上，因为我不需要它，但不知何故，各种日志和控制台消息显示仍然不时请求文件的 pagespeed 版本，如下面的“d14dafe2dc85d5ff8142236c3f55e0d4.pagespeed.jm.ReWsy_33cT.js”导致随机404 错误甚至 500 内部服务器错误。

如果没有安装 pagespeed，它如何请求 pagespeed 版本？这怎么可能？谁能解释一下，拜托。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T15:34:32.707

好的，修好了。这是 DNS 问题.. 正在从两台服务器加载数据。也就是说，必须等待 DNS 传播完成。

# r - 使用 read.table 读取 csv 文件的问题

> ID：14948222
> 
> 赞同：0
> 
> 时间：2013-02-19T01:15:03.103
> 
> 标签：r, csv

我有一个 csv 文件，它只有一列

> ID
> 
> 66185
> 
> 66186
> 
> 66187

我按如下方式阅读此 csv 文件：

```
 a=read.table("a.csv",sep=",",header=T) 
```

但是 R 给出了以下错误信息

```
Warning message:    In read.table("a.csv", sep = ",", header = T) :
incomplete final line found by readTableHeader on 'a.csv' 
```

# javascript - 如何将 \n 转换为 HTML 换行符

> ID：14948223
> 
> 赞同：35
> 
> 时间：2013-02-19T01:15:24.040
> 
> 标签：javascript

我正在使用这个插件来解析 bbcode [bbcodeparser](https://github.com/wGEric/phpBB-BBCode-Javascript-Parser)

但它没有转换`\n`为`<br/>`.

我试着添加这个：

```
replace(/\r?\n|\r/g, '<br>') 
```

......但它没有工作。

如何实现换行功能？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2014-05-19T11:27:02.293

If you are doing this to show new line and return carriage in html, then you don't need to do it explicitly. You can do it in css by setting the *white-space* attribute *pre-line* value.

```
<span style="white-space: pre-line">@Model.CommentText</span> 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-07-24T20:44:28.300

上面的答案帮助我解决了我的问题，但我进一步挖掘并发现了一些关于`white-space`属性的额外信息。我希望它可以帮助像我这样的人：

**什么是`white-space`财产：**

> white-space 是一个 CSS 属性，有助于控制元素文本中的空白和换行符的处理方式。它可以采用以下值：normal、nowrap、pre、pre-line、pre-wrap。

[![在此处输入图像描述](../Images/27c6763667f602fc3e76219ab62d8ac7.png)](https://i.stack.imgur.com/uSEvb.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-10T08:56:00.463

`\r\n`实际上，在使用 PHP [nl2br](http://in2.php.net/nl2br)时，浏览器不会将其视为真正的换行符，而在 Javascript 中，您可以使用下面的函数进行`nl2br()`等效。

```
function nl2br (str, is_xhtml) {
var breakTag = (is_xhtml || typeof is_xhtml === 'undefined') ? '<br />' : '<br>';
return (str + '').replace(/([^>\r\n]?)(\r\n|\n\r|\r|\n)/g, '$1' + breakTag + '$2');} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-14T11:28:22.780

这对我有用

```
const regex = /\\n|\\r\\n|\\n\\r|\\r/g;
string.replace(regex, '<br>'); 
```

# node.js - iPhone 将二进制文件上传到 Node.js 服务器（使用 express、mongoDB 和 mongoose）

> ID：14948229
> 
> 赞同：3
> 
> 时间：2013-02-19T01:16:12.927
> 
> 标签：node.js, mongodb, mongoose, gridfs

抱歉，这里对 Node.js 很陌生。我很难找到一个好的策略，将文件从 iphone 客户端上传到 node.js 服务器并将其存储在服务器端。

现在，我可以接受服务器上的二进制文件并使用以下代码将其保存到文件系统：

```
app.post('/upload', function(req, res){

    // get the temporary location of the file
    var tmp_path = req.files.pic.path;
    // set where the file should actually exists - in this case it is in the "images" directory
    var target_path = './uploads/' + req.files.pic.name;
    // move the file from the temporary location to the intended location
    fs.rename(tmp_path, target_path, function(err) {
        if (err) throw err;
        // delete the temporary file, so that the explicitly set temporary upload dir does not get filled with unwanted files
        fs.unlink(tmp_path, function() {
            if (err) throw err;
            res.send('File uploaded to: ' + target_path + ' - ' + req.files.pic.size + ' bytes');
        });
    });

    console.log(req.files.pic.name);
    res.send('DONE', 200);
    res.end();
}); 
```

使用此代码，我首先接受从 iphone 到 /tmp 目录的 jpeg 的多部分表单上传，然后我重命名并将文件移动到 ./uploads 目录。我的问题是如何将此文件保存到数据库中。

根据我的阅读，我有三个选择（我认为！）

1.  将文件保存到某个上传目录并将本地路径存储到 mongodb 以供以后访问
2.  使用缓冲区将文件本身保存到 MongoDb
3.  使用 grid-fs 保存文件。

我一直在尝试#3，使用我发现的名为 gridfs-stream 的模块（因为我使用的是 mongoose），但我真的不明白包中的源代码。

我的问题是两部分的：在上面的 3 个选择中，#3 确实是要走的路吗？如果是这样，我真的需要一些帮助来理解如何使用 gridfs-stream。

我知道下面的代码是错误的，但这是我迄今为止的尝试，看看我是否可以将它插入到我现有的上传代码中：

```
app.post('/upload', function(req, res){

    // get the temporary location of the file
    var tmp_path = req.files.pic.path;
    // set where the file should actually exists - in this case it is in the "images" directory
    var target_path = './uploads/' + req.files.pic.name;
    // move the file from the temporary location to the intended location
    fs.rename(tmp_path, target_path, function(err) {
        if (err) throw err;

        var conn = mongoose.createConnection('localhost', 'myahkvoicedb');

        conn.once('open', function () {
            var gfs = Grid(conn.db, mongoose.mongo);

            // all set!
            var writestream = gfs.createWriteStream('req.files.pic.name');
            fs.createReadStream('./uploads/').pipe(writestream);

            /* // APP CRASHES HERE WITH THE FOLLOWING:
            stream.js:81
            throw er; // Unhandled stream error in pipe.
            ^
            Error: EISDIR, read
            */
        })

        // delete the temporary file, so that the explicitly set temporary upload dir does not get filled with unwanted files
        fs.unlink(tmp_path, function() {
            if (err) throw err;
            res.send('File uploaded to: ' + target_path + ' - ' + req.files.pic.size + ' bytes');
        });
    });

    console.log(req.files.pic.name);
    res.send('DONE', 200);
    res.end();
}); 
```

任何帮助，将不胜感激。谢谢！

# php - PHP中的JSON验证和解析

> ID：14948230
> 
> 赞同：0
> 
> 时间：2013-02-19T01:16:32.467
> 
> 标签：php, json, validation, parsing

我正在使用以下示例 php 语法解析 JSON

```
$carModel = strip_tags($_REQUEST['car']['model']); 
```

唯一的问题是有时提供的 JSON 中缺少“模型”数组。在这种情况下，我的 php 脚本在到达该行时会关闭。任何人都可以推荐一种在解析之前检查模型数组的方法，这样如果“模型”不存在，我的 php 脚本仍然会运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:18:33.040

我不确定这与 json 有什么关系，但如果你想在使用变量之前检查它是否存在，你可以这样做：

```
if (isset($_REQUEST['car']['model']))
{
  $carModel = strip_tags($_REQUEST['car']['model']);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T01:18:47.050

只需检查它是否在那里。如果不为其分配默认值：

```
$carModel = (isset($_REQUEST['car']['model'])) ? strip_tags($_REQUEST['car']['model']) : ''; 
```

# android - 如何显示jsoup解析的数据

> ID：14948233
> 
> 赞同：0
> 
> 时间：2013-02-19T01:17:01.887
> 
> 标签：android, html, parsing, cordova, jsoup

我正在尝试从一个只有正文的 HTML 页面进行解析，并且正文中是一个 pre 标签，但仅此而已。我需要从中获取信息并将其放入使用 phonegap 的我的 android 应用程序中。我非常了解javascript。我听说 Jsoup 会很好用，但我不确定如何将使用 Jsoup 提取的数据输出为我可以显示的文本。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:09:08.937

你可以这样试试。

```
try {
        Document doc = Jsoup.connect(url).get();
        Element element = doc.select("input[name=username]").first();
        String get_value = element.attr("value");
        Log.e(Tag, get_value);
        }
    } catch (Exception e) {
        // TODO Auto-generated catch block
        Log.e(Tag, e.toString());
    } 
```

如果 html 是这样的：

```
<........
 ...........>
 <........>
<input name='username' value='fantastic' type='text' .... />
<........
 ...........>
 <........> 
```

输出将是`fantastic`

**已编辑**

对于您的情况：

```
new Thread( new Runnable() {
    @Override
    public void run() {
       try {
           Document doc = Jsoup.connect(url).get();
           Element element = doc.select("body").first();
           String get_value = element.text();
           Log.e(Tag, get_value);
       } catch (Exception e) {
           // TODO Auto-generated catch block
           Log.e(Tag, e.toString());
       }
     }
   }).start(); 
```

注意：我没有运行此代码。但你应该试试这个。

如何使用它：

```
public class MainActivity extends FacebookActivity {
    private TextView textview;
    private String get_value;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    textview = (TextView)findViewById(R.id.your_textview_id);

    new Thread( new Runnable() {
         @Override
         public void run() {
            try {
                // marked for your use
                Document doc = Jsoup.connect(url).get();
                Element element = doc.select("body").first();
                get_value = element.text();
                // marked for your use

                textview.setText(get_value);

                Log.e(Tag, get_value);
            } catch (Exception e) {
                // TODO Auto-generated catch block
                Log.e(Tag, e.toString());
            }
          }
        }).start();

   // textview.setText(get_value);

}
} 
```

# perl - 捕获另一个动作的催化剂响应体

> ID：14948238
> 
> 赞同：0
> 
> 时间：2013-02-19T01:17:32.733
> 
> 标签：perl, catalyst

在我的一个页面上，我试图从不同的控制器获取另一个页面的内容，然后获取该 HTML 并使用它在第一页上制作一个小“小部件”。

如果我抓住当前页面，我可以这样做：

```
my $html = $c->response->body(); 
```

但由于它在另一个控制器中，我不知道如何得到它。

一个额外的（潜在的）复杂情况是，有问题的操作需要一个 arg 传递给它。

我试过`my $html = $c->visit('/action/')->body();`- 在黑暗中拍摄 - 我在最近的另一篇文章中对其进行了故障排除。但这似乎只是接管了当前的行动，而不是让我只是从中获取响应。

我唯一能想到的（这是未经测试的）是存储第 1 页的响应，执行 my `$c->visit`，存储该响应，然后获取第 1 页的原始响应并在最后输出该响应。似乎过于复杂，但这是我能想到的最好的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:50:24.073

我在看到这个之前回答[了你的另一个问题。](https://stackoverflow.com/questions/14927650/passing-args-down-catalyst-chain-w-c-visit)我怀疑，我回答的后半部分在这里是密切相关的。

在我看来，/assets/widget 中的逻辑需要位于模型中而不是控制器中，以便它可以被任何需要它的功能使用。

和/或您需要将模板分解为（可重用）组件，以便您计划嵌入的任何内容都可以作为单个渲染过程的一部分完成。

```
[%- IF foo;
        PROCESS widget.tt;
    END; -%] 
```

或者你对你的小部件进行不同的建模，这样你就可以使用 AJAX 方法生成它们，而不是让它们成为你的主页渲染的一部分，这样每个小部件都会对你的应用程序进行自己的调用，获取一些 JSON，并呈现自己（可能通过[jQuery](http://api.jquery.com/category/ajax/) - 一个例子超出了问题的范围）。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:37:23.937

[Catalyst::Plugin::SubRequest](http://search.cpan.org/~edenc/Catalyst-Plugin-SubRequest-0.20/lib/Catalyst/Plugin/SubRequest.pm)可能会满足您的需求。正如 RET 所说，稍微重构您的应用程序可能更谨慎，但在某些情况下，渲染子请求可能很有用

# excel - 在 Excel 2007 中删除特定字符串之后的所有内容

> ID：14948239
> 
> 赞同：1
> 
> 时间：2013-02-19T01:17:49.327
> 
> 标签：excel, parsing

```
 A                                         B
 1 www.harborfreight.com/                   www.harborfreight.com
 2 totsy.com                                totsy.com
 3 www.totsy.com/customer/account/login/    www.totsy.com/customer/account/login
 4 www.pandawill.com/                       www.pandawill.com 
```

**我试图通过删除第一个**“/”之后的每个字符来将上述 A 列值减少为最简单的域名形式。使用以下公式在上面的第 3 行不起作用：

```
=IF(ISERROR(SEARCH("/",A3)),A3,TRIM(LEFT(A3,FIND("|",SUBSTITUTE(A3,"/","|",LEN(A3)-LEN(SUBSTITUTE(A3,"/",""))))-1))) 
```

显然我上面的公式似乎**在最后一个**“/”之后剥离了每个字符。你能推荐正确的改变吗？

谢谢，丹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T01:35:58.823

你的公式对我来说似乎很复杂，你有什么理由搞乱替换？

这对我来说似乎很好：

`=IFERROR(LEFT(A1,FIND("/",A1)-1),A1)`

因为它返回第一个之前的字符串`/`，或者如果`/`没有找到则只返回字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T11:24:55.603

使用这个公式。

```
=MID(A1;1;if(ISERR(find("/";A1))=true;"99";find("/";A1)-1)) 
```

它找到“/”字符并返回它之前的文本。防错。

# z3 - 在 Z3 Python 中使用量词消除

> ID：14948246
> 
> 赞同：2
> 
> 时间：2013-02-19T01:18:27.580
> 
> 标签：z3, z3py

`g = And(ForAll([i, j, k], Implies(And(k <= 0, A * i + B * j + C * k + D <= 0), k + i - j <= 0)),Not(And(A==0,B==0,C==0)))` 我尝试使用找到满足公式的 A、B、C、D 的值`solve(g)` 。这有很多可能的解决方案，一个是`A=1,B=-1,C=D=0`但 Z3 似乎无法做到这一点（`solve(g)`不会终止）。

Z3 可以做这种非线性（但简单）的公式吗？也许我可以为此指定一些量化宽松策略或其他东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:08:07.957

Z3 有一个量词消除策略。我们可以通过使用以下方法创建求解器来启用它：

```
s = Then('qe', 'smt').solver() 
```

此命令将创建一个求解器，该求解器首先应用量词消除，然后调用 SMT 求解器。但是，Z3 对非线性公式的量词消除的支持非常有限。您的示例是非线性的，因为它包含：`A * i + B * j + C * k + D <= 0`. 因此，该`qe`策略将无法消除量词。

如果您可以为非线性算术实现更好的 QE 支持，那就太好了。

# jquery - How to list the methods associated with a Jquery object

> ID：14948257
> 
> 赞同：2
> 
> 时间：2013-02-19T01:19:15.917
> 
> 标签：jquery, methods, dir

I'm learning JQuery, and I'm looking for a way to view the methods an object as associated with it after its created, much like python's dir().

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-19T02:02:39.347

这是假设您加载了 jquery，正在使用 firefox 或 chrome（用于控制台），并且有一个 document.ready 方法：

```
$(document).ready(function(){
   console.log($('body'));
}); 
```

在控制台中，您应该看到您使用 jquery 创建的选择器对象。单击它以查看其实例数据。当您查看该选择器对象时，您将看到可用于对该选择器对象进行操作的所有 jquery 方法的列表。

您应该能够查看如下内容： ![选择器中 jquery 方法的 console.log](../Images/50d1c449ccc324c1c037a54723539ae5.png)

顺便说一句，您应该能够单击任何方法名称以在控制台中查看它的代码。

# algorithm - Given an input array find all subarrays with given sum K

> ID：14948258
> 
> 赞同：30
> 
> 时间：2013-02-19T01:19:35.133
> 
> 标签：algorithm

Given an input array we can find a single sub-array which sums to K (given) in linear time, by keeping track of sum found so far and the start position. If the current sum becomes greater than the K we keep removing elements from start position until we get current sum <= K.

I found sample code from geeksforgeeks and updated it to return all such possible sets. But the assumption is that the input array consists of only +ve numbers.

```
bool subArraySum(int arr[], int n, int sum)
{
    int curr_sum = 0, start = 0, i;
    bool found = false;

    for (i = 0; i <= n; i++)
    {
        while (curr_sum > sum && start < i)
        {
            curr_sum = curr_sum - arr[start];
            start++;
        }

        if (curr_sum == sum)
        {
            cout<<"Sum found in b/w indices: "<<start<<" & "<<(i-1)<<"\n";
            curr_sum -= arr[start];
            start++;
            found = true;
        }

        // Add this element to curr_sum
        if (i < n) {
          curr_sum = curr_sum + arr[i];
        }
    }

    return found;
} 
```

My question is do we have such a solution for mixed set of numbers too (both positive and negative numbers)?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-02-19T09:02:11.633

对于正数和负数的情况，没有线性时间算法。

由于您需要总和为 的所有子数组，因此`K`任何算法的时间复杂度都不能优于结果子数组集的大小。而这个大小可能是二次方的。例如，任何`[K, -K, K, -K, K, -K, ...]`以正“K”开始和结束的子数组都有所需的总和，并且有 N ² /8 个这样的子数组。

如果 O(N) 额外空间可用，仍然可以在 O(N) 预期时间内获得结果。

计算数组中每个元素的前缀总和，并将该对插入`(prefix_sum, index)`到哈希映射中，其中`prefix_sum`是键，`index`是与此键关联的值。在此哈希图中搜索`prefix_sum - K`以获取结果子数组开始的一个或多个数组索引：

```
hash_map[0] = [-1]
prefix_sum = 0
for index in range(0 .. N-1):
  prefix_sum += array[index]
  start_list = hash_map[prefix_sum - K]
  for each start_index in start_list:
    print start_index+1, index
  start_list2 = hash_map[prefix_sum]
  start_list2.append(index) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-11-02T07:23:52.140

@Evgeny Kluev 给出的解决方案用 Java 编码，并带有一点解释。

```
public static void main(String[] args) {
    int[] INPUT = {5, 6, 1, -2, -4, 3, 1, 5};
    printSubarrays(INPUT, 5);
}

private static void printSubarrays(int[] input, int k) {
    Map<Integer, List<Integer>> map = new HashMap<Integer, List<Integer>>();
    List<Integer> initial = new ArrayList<Integer>();
    initial.add(-1);
    map.put(0, initial);
    int preSum = 0;

    // Loop across all elements of the array
    for(int i=0; i< input.length; i++) {
        preSum += input[i];
        // If point where sum = (preSum - k) is present, it means that between that 
        // point and this, the sum has to equal k
        if(map.containsKey(preSum - k)) {   // Subarray found 
            List<Integer> startIndices = map.get(preSum - k);
            for(int start : startIndices) {
                System.out.println("Start: "+ (start+1)+ "\tEnd: "+ i);
            }
        }

        List<Integer> newStart = new ArrayList<Integer>();
        if(map.containsKey(preSum)) { 
            newStart = map.get(preSum);
        }
        newStart.add(i);
        map.put(preSum, newStart);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-16T23:34:56.933

二次时间：最坏情况下为 O(n2)。

```
private static void findSubArray(int[] is, int N) {
    System.out.println("Continuous sub array of " + Arrays.toString(is) + " whose sum is " + N + " is ");
    List<Integer> arry = new ArrayList<>(is.length);
    for (int i = 0; i < is.length; i++) {
        int tempI = is[i];
        arry.add(tempI);
        for (int j = i + 1; j < is.length; j++) {
            if (tempI + is[j] == N) {
                arry.add(is[j]);
                System.out.println(arry);

            } else if (tempI + is[j] < N) {
                arry.add(is[j]);
                tempI = tempI + is[j];
            } else {
                arry.clear();
                break;
            }
        }
    }

}
public static void main(String[] args) {
    findSubArray(new int[] { 42, 15, 12, 8, 6, 32 }, 26);

    findSubArray(new int[] { 12, 5, 31, 13, 21, 8 }, 49);

    findSubArray(new int[] { 15, 51, 7, 81, 5, 11, 25 }, 41);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-06T06:30:29.173

试试这个代码，这对你有用：

```
private static void printSubArrayOfRequiredSum(int[] array, int requiredSum) {
        for (int i = 0; i < array.length; i++) {
            String str = "[ ";
            int sum = 0;
            for (int j = i; j < array.length; j++) {
                sum = sum + array[j];
                str = str + array[j] + ", ";
                if (sum == requiredSum) {
                    System.out.println(" sum : " + sum + " array : " + str
                            + "]");
                    str = "[ ";
                    sum = 0;
                }
            }
        }
    } 
```

使用这种方法，如：

```
 int array[] = { 3, 5, 6, 9, 14, 8, 2, 12, 7, 7 };
 printSubArrayOfRequiredSum(array, 14); 
```

输出 ：

```
sum : 14 array : [ 3, 5, 6, ]
sum : 14 array : [ 14, ]
sum : 14 array : [ 2, 12, ]
sum : 14 array : [ 7, 7, ] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-15T09:54:26.373

@Evgeny Kluev 给出的解决方案，用 C++ 编码

```
#include<bits/stdc++.h>
using namespace std;
int c=0;
// Function to print subarray with sum as given sum
void subArraySum(int arr[], int n, int k)
{
   map<int,vector<int>>m1;
   m1[0].push_back(-1);
   int curr_sum=0;
   for(int i=0;i<n;i++){
       curr_sum=curr_sum+arr[i];
       if(m1.find(curr_sum-k)!=m1.end()){
           vector<int>a=m1[curr_sum-k];
           c+=m1[curr_sum-k].size();
           for(int j=0;j<a.size();j++){  // printing all indexes with sum=k
              cout<<a[j]+1<<" "<<i<<endl;
            }
        }
        m1[curr_sum].push_back(i);
    }  
 }
int main()
{
   int arr[] =  {10,2,0,10,0,10};
   int n = sizeof(arr)/sizeof(arr[0]);
   int sum = 10;
   subArraySum(arr, n, sum);
   cout<<c<<endl; //count of subarrays with given sum
   return 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-07T21:47:14.147

这个问题与这里解决的组合问题非常相似：http: [//introcs.cs.princeton.edu/java/23recursion/Combinations.java.html](http://introcs.cs.princeton.edu/java/23recursion/Combinations.java.html)

这是我的解决方案：

```
public static void main(String[] args) {
    int [] input = {-10, 0, 5, 10, 15, 20, 30};
    int expectedSum = 20;

    combination(new SumObj(new int[0]), new SumObj(input), expectedSum);
}

private static void combination(SumObj prefixSumObj, SumObj remainingSumObj, int expectedSum){
    if(prefixSumObj.getSum() == expectedSum){
        System.out.println(Arrays.toString(prefixSumObj.getElements()));
    } 

    for(int i=0; i< remainingSumObj.getElements().length ; i++){
        // prepare new prefix
        int [] newPrefixSumInput = new int[prefixSumObj.getElements().length + 1];
        System.arraycopy(prefixSumObj.getElements(), 0, newPrefixSumInput, 0, prefixSumObj.getElements().length);
        newPrefixSumInput[prefixSumObj.getElements().length] = remainingSumObj.getElements()[i];
        SumObj newPrefixSumObj = new SumObj(newPrefixSumInput);

        // prepare new remaining
        int [] newRemainingSumInput = new int[remainingSumObj.getElements().length - i - 1];            
        System.arraycopy(remainingSumObj.getElements(), i+1, newRemainingSumInput, 0, remainingSumObj.getElements().length - i - 1);
        SumObj newRemainingSumObj = new SumObj(newRemainingSumInput);

        combination(newPrefixSumObj, newRemainingSumObj, expectedSum);
    }
}

private static class SumObj {
    private int[] elements;
    private int sum;

    public SumObj(int[] elements) {
        this.elements = elements;
        this.sum = computeSum();
    }

    public int[] getElements() {
        return elements;
    }

    public int getSum() {
        return sum;
    }

    private int computeSum(){
        int tempSum = 0;
        for(int i=0; i< elements.length; i++){
            tempSum += elements[i];
        }
        return tempSum;
    }
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2017-04-18T08:46:24.130

我在几次采访中也遇到了这个问题，并提出了以下最佳方法：

```
class MazSubArraySum {
public static void main(String[] args) {
    int[] a = { -2, -3, 4, -1, -2, 1, 5, -3 };
    System.out.println("Maximum contiguous sum is " + maxSubArraySum(a));

}

static int maxSubArraySum(int a[]) {
    int size = a.length;
    int currentindex = 0, end = 0, begin = 0;
    int max_so_far = Integer.MIN_VALUE, max_ending_here = 0;

    for (int i = 0; i < size; i++) {

        max_ending_here = max_ending_here + a[i];

        if (max_so_far < max_ending_here) {
            max_so_far = max_ending_here;
            begin = currentindex;
            end = i;

        }
        if (max_ending_here < 0) {
            max_ending_here = 0;
            currentindex++;

        }
    }

    System.out.println("begin and end: " + begin + "&" + end);
    return max_so_far;
} 
```

}

下面是输出：

```
begin and end: 2&6
Maximum contiguous sum is 7 
```

就时间和空间复杂度而言，上述解决方案是 O(n) 的最佳解决方案。

# c++ - 自动从列表中添加和删除对象

> ID：14948262
> 
> 赞同：0
> 
> 时间：2013-02-19T01:19:48.567
> 
> 标签：c++, constructor, shared-ptr, weak-ptr

我有一堂课。实例化此类时，我希望将实例添加到列表中。删除对象后，我希望将其从列表中删除。

所以我给对象一个指向它自己的共享指针。然后我有一个指向这些共享指针的弱指针列表。当一个对象被创建时，它会创建一个指向自身的共享指针，创建一个指向它的弱指针，并将弱指针放入一个列表中。

当对象被销毁时，共享指针也被销毁。每当我尝试访问列表中的成员时，我都会确保它没有过期并且它的使用计数不为 0。尽管如此，当列表成员被销毁时，我仍然会崩溃。为什么？我可以绕过它吗？这是我的SSCCE：

```
#include <iostream>
#include <memory>
#include <vector>

class test
{
    private:
        std::shared_ptr<test> self;

    public:
        int val;
        test(int set);

        test(test &copy) = delete; // making sure there weren't issues 
                                   // with a wrong instance being deleted
};

std::vector<std::weak_ptr<test>> tests;

test::test(int set):
    val(set)
{
    this->self = std::shared_ptr<test>(this);

    tests.push_back(std::weak_ptr<test>(this->self));
}

void printTests()
{
    for (auto i = tests.begin(); i != tests.end(); i++)
    {
        if (i->use_count() == 0 || i->expired())
        {
            tests.erase(i);
            continue;
        }

        std::cout << i->lock()->val << std::endl;
    }

    std::cout << std::endl;
}

int main(int argc, char **argv)
{
    {
        test t(3);

        std::cout << "First tests printing: " << std::endl;

        printTests();
    } // SEGFAULTS HERE

    std::cout << "Second tests printing: " << std::endl;
    printTests();

    return 0;
} 
```

该程序的输出如下：

```
First tests printing:
3

Segmentation fault (core dumped) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:29:28.510

您的问题在于如何创建自指针：

```
 this->self = std::shared_ptr<test>(this); 
```

`shared_ptr`根据[文档](http://www.boost.org/doc/libs/1_53_0/libs/smart_ptr/shared_ptr.htm)，使用此构造函数创建a 时，

> 当 T 不是数组类型时，构造一个拥有指针 p 的 shared_ptr。... p 必须是指向通过 C++ new 表达式分配的对象的指针，或者为 0

所以问题是`shared_ptr`你的堆栈对象的所有权，所以当对象被破坏（以及`shared_ptr`随之而来的）时，`shared_ptr`正在尝试`delete`你在堆栈上的对象。这是无效的。

对于您的用例，如果您希望`test`s 比您的 s 寿命更长`vector`，那么您可以只存储`this`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:04:08.483

我认为 OP 对解决他最初的问题很感兴趣，即使它使用的方法与他尝试的方法不同。下面是一个简单的例子，说明如何在构造对象时将其添加到全局列表中，并在删除时将其删除。要记住的一件事：您必须在添加到基类的每个构造函数中调用 AddList。我不知道您是否希望列表可以在类外访问，所以我添加了 getter 函数来将非常量迭代器返回到列表中。

```
class MyClass
{
private:
    static std::list<MyClass*> mylist;
    std::list<MyClass*>::iterator mylink;

    // disable copy constructor and assignment operator
    MyClass(const MyClass& other);
    MyClass& operator = (const MyClass& other);

    void AddList()
    {
        mylink = mylist.insert(mylist.end(), this);
    }

    void RemoveList()
    {
        mylist.erase(mylink);
    }

public:
    MyClass()
    {
        AddList();
    }

    virtual ~MyClass()
    {
        RemoveList();
    }

    static std::list<MyClass*>::iterator GetAllObjects_Begin()
    {
        return mylist.begin();
    }

    static std::list<MyClass*>::iterator GetAllObjects_End()
    {
        return mylist.end();
    }

    virtual std::string ToString() const
    {
        return "MyClass";
    }
};

class Derived : public MyClass
{
    virtual std::string ToString() const
    {
        return "Derived";
    }
};

std::list<MyClass*> MyClass::mylist;

int main()
{
    std::vector<MyClass*> objects;
    objects.push_back(new MyClass);
    objects.push_back(new MyClass);
    objects.push_back(new Derived);
    objects.push_back(new MyClass);

    for (std::list<MyClass*>::const_iterator it = MyClass::GetAllObjects_Begin(), end_it = MyClass::GetAllObjects_End(); it != end_it; ++it)
    {
        const MyClass& obj = **it;
        std::cout << obj.ToString() << "\n";
    }

    while (! objects.empty())
    {
        delete objects.back();
        objects.pop_back();
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T01:29:03.333

这条线很麻烦：

> ```
> tests.erase(i); 
> ```

指向被擦除元素的迭代器是无效的，你不能再增加它。幸运的是，`erase`返回了一个可以使用的新迭代器：

```
auto i = tests.begin();
while (i != tests.end())
{
    if (i->use_count() == 0 || i->expired())
    {
        i = tests.erase(i);
    }
    else {
        std::cout << i->lock()->val << std::endl;
        ++i;
    }
} 
```

# jquery - 使用 jquery 和 ajax 从表单显示搜索结果

> ID：14948263
> 
> 赞同：0
> 
> 时间：2013-02-19T01:20:07.783
> 
> 标签：jquery, ajax

我有简单的表单和脚本，它接受输入数据并调用烂番茄 API 并显示结果。如果我不使用`$('#submitid').click(function()`并且 var 查询是硬编码的，结果会很好地显示。如果我只是`$('#submitid').click(function() {})`与警报结合使用，则会显示表单数据。但是在当前状态下没有显示任何内容。任何帮助表示赞赏。

```
<form action="">
    <input  type="text" id='myid' />
    <input value="Search" type="submit" id="submitid" />
</form>

<script>
    $('#submitid').click(function () {
        var query = $('#myid').val();
        var apikey = "my_api_key_sample";
        var baseUrl = "http://api.rottentomatoes.com/api/public/v1.0";

        // construct the uri with our apikey
        var moviesSearchUrl = baseUrl + '/movies.json?apikey=' + apikey;

        $(document).ready(function () {
            // send off the query
            $.ajax({
                url: moviesSearchUrl + '&q=' + encodeURI(query),
                dataType: "jsonp",
                success: searchCallback
            });
        });

        // callback for when we get back the results
        function searchCallback(data) {
            $(document.body).append(
                'Found ' + data.total + ' results for ' + query
            );
            var movies = data.movies;
            $.each(movies, function (index, movie) {
                var mydata += //code for appending my data 
            });

            //displaying mydata on div with id result
            $('#result').html(mydata);
        }
    })
    })
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:35:24.987

尝试：

HTML：

```
<form action="" id="someform">
    <input  type="text" id='myid'>
    <input value="Search" type="submit" id="submitid">
</form> 
```

jQuery：

```
$(document).ready(function() {

    $("#someform").submit(function(){
        $.ajax({
            url: moviesSearchUrl + '&q=' + encodeURI(query),
            dataType: "jsonp",
            success: searchCallback
        });
        return false;
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:27:54.750

`var mydata += //code for appending my data`

您需要真正完成这一行或将其完全注释掉。另外，最后你`} }) })`应该是 `} });`.

# spring - 在 Spring 中使用 TaskScheduler 的 NoSuchBeanDefinition

> ID：14948265
> 
> 赞同：0
> 
> 时间：2013-02-19T01:20:35.890
> 
> 标签：spring, scheduled-tasks

我正在尝试使用 Spring 安排任务。这是我的代码：

```
@Service
public class MyWork implements Runnable {
    @Override
    public void run() {
        workToDo();
    }

    private void workToDo()  { /*do it*/}
}

@Service
public class MySchedulerInvoker {
    @Autowired
    private TaskScheduler scheduler;

    @Async
    public void executeTask() {
    scheduler.schedule(new MyWork(), new CronTrigger(
            "* 15 9-17 * * MON-FRI"));
} 
```

当我运行时，我收到以下错误：

```
ava.lang.ExceptionInInitializerError
at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
[...]
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name     'mySchedulerInvoker ': Injection of autowired dependencies failed; nested exception is     org.springframework.beans.factory.BeanCreationException: Could not autowire field: private     org.springframework.scheduling.TaskScheduler com.infoone.siglo.GestoreNotificheCtr.scheduler; nested exception is     org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type     [org.springframework.scheduling.TaskScheduler] found for dependency: expected at least 1 bean which qualifies as     autowire candidate for this dependency. Dependency annotations: [...]
Caused by: org.springframework.beans.factory.BeanCreationException: Could not autowire field: private     org.springframework.scheduling.TaskScheduler com.infoone.siglo.GestoreNotificheCtr.scheduler; nested exception is     org.springframework.beans.factory.NoSuchBeanDefinitionException: No matching bean of type     [org.springframework.scheduling.TaskScheduler] found for dependency: expected at least 1 bean which qualifies as     autowire candidate for this dependency. Dependency annotations: [...] 
```

少了什么东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:35:20.350

在`TaskScheduler`与您的`MySchedulerInvoker`. 您需要显示一些配置，以便有人指出原因。

# php - two dropdown menus to be processed by 3 dimensional array to determine a price

> ID：14948269
> 
> 赞同：0
> 
> 时间：2013-02-19T01:22:25.800
> 
> 标签：php, html

i have been spending the entire weekend on this but cannot seem to get it solved.

My html consists of two drop down menus. One determines a specific type and the second determines a component.

There is predefined costs associated with each component based on the type its being used for.

Here my HTML:

```
 <td><select name="type">
<option value= "0" selected>None</option>
<option value = "CAR">Car</option>
<option value = "VAN">Van</option>
<option value = "TRK">Truck</option>
</select></td>

<td>Component:</td>
<td><select name="component">
<option value= "0" selected>None</option>
<option value = "TIR">Oil</option>
<option value = "OIL">Tire</option>
<option value = "SPK">Spark Plug</option>
</select></td> 
```

My php looks like this:

```
$cat = array(
'CAR_TIR' => array('comp' => 'Tires','price' => 100),
'CAR_OIL' => array('comp' => 'Oil', 'price' => 10),
'CAR_SPK' => array('comp' => 'Spark Plug', 'price' => 4),

'VAN_TIR' => array('comp' => 'Tires','price' => 120),
 'VAN_OIL' => array('comp' => 'Oil', 'price' =>12),
      'VAN_SPK' => array('comp' => 'Spark Plug', 'price' =>5),

'TRK_TIR' => array('comp' => 'Tires','price' => 150),
'TRK_OIL' => array('comp' => 'OIL','price' => 15),
'TRK_SPK' => array('comp' => 'Tires','price' => 6),

);
echo $cat[$_POST['type'].'_'.$_POST['component']]['price']; 
?> 
```

and the output that i am getting looks like this : Price checkup? array('comp' => 'Tires','price' => 100), 'CAR_OIL' => array('comp' => 'Oil', 'price' => 10), 'CAR_SPK' => array('comp' => 'Spark Plug', 'price' => 4), 'VAN_TIR' => array('comp' => 'Tires','price' => 120), 'VAN_OIL' => array('comp' => 'Oil', 'price' =>12), 'VAN_SPK' => array('comp' => 'Spark Plug', 'price' =>5), 'TRK_TIR' => array('comp' => 'Tires','price' => 150), 'TRK_OIL' => array('comp' => 'OIL','price' => 15), 'TRK_SPK' => array('comp' => 'Tires','price' => 6), ); echo $cat[$*POST['type'].'*'.$_POST['component']]['price']; ?>

so literally that is the output. please let me know what i could do. thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:42:23.930

Is a three dimensional array necessary? It seems like a very messy and hard to read way of doing things to me. Three arrays would be easier to read I would think, if possible?

Write three separate arrays to show the dropdowns (try `foreach` instead of a `for` loop) then use the values of each to calculate the price after it has been submitted.

If this is not what you're looking for then you'll have to clarify your questions a little better. :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:03:23.030

为什么不通过二维和一个关联数组，我发现它更容易阅读：

```
<td>Car type:</td>
<td><select name="type">
    <option value= "0" selected>None</option>
    <option value = "CAR">Car</option>
    <option value = "VAN">Van</option>
    <option value = "TRK">Truck</option>
</select></td>

<td>Component:</td>
<td><select name="component">
    <option value= "0" selected>None</option>
    <option value = "TIR">Oil</option>
    <option value = "OIL">Tire</option>
    <option value = "SPK">Spark Plug</option>
</select></td>

$cat = array(
    'CAR_TIR' => array('comp' => 'Tires','price' => 100),
    'CAR_OIL' => array('comp' => 'Oil', 'price' => 10),
    'CAR_SPK' => array('comp' => 'Spark Plug', 'price' => 4),
    'VAN_TIR' => array('comp' => 'Tires','price' => 200),
    'TRK_TIR' => array('comp' => 'Tires','price' => 300)
    ); // fill in the missing values for VAN and TRK 
```

参考：

```
echo $cat['CAR_TIR']['comp']; // output: Tires
echo $cat['CAR_TIR']['price']; // output: 100
echo $cat['TRK_TIR']['price']; // output: 300 
```

引用来自表单的输入（假设`type`并`component`设置）：

```
echo $cat[$_POST['type'].'_'.$_POST['component']]['price']; 
// type='CAR', component='OIL', Output: 10 
```

循环：

```
foreach ($cat as $key => $value) {
    echo 'Code: '.$key.', component: '.$value['comp'].', price:'.$value['price'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:47:44.867

您应该使用嵌套关联数组而不是数字。关联数组是其元素由字符串而不是数字引用的数组。这应该使引用每个元素变得更加容易。

对于您的情况，您应该使用以下内容：

```
$categories = array( 
    'car' => array( 'oil' => 10, 'spark' => 10 ),
    'van' => array( 'oil' => 12, 'spark' => 12 ),
    'truck' => array( 'oil'=> 15, 'spark' => 15 )
); 
```

要从表单中获取所选项目，您可以这样做：

```
$type = $_POST['type'];
$component = $_POST['component'];
// Error check $type and $component
$selected = $categories[$type][$component]; 
```

不要忘记将您的 html`option`值从整数更改为与数组键匹配的字符串。您还需要将 for 循环更改为[foreach 循环。](http://php.net/manual/en/control-structures.foreach.php)

# c++ - 为什么我调用数据库关闭函数后，在 Qt 中无法删除 SQLite 数据库？

> ID：14948273
> 
> 赞同：1
> 
> 时间：2013-02-19T01:23:00.557
> 
> 标签：c++, sqlite, qt

我正在编写一个代码来使用 SQLite 数据库，数据库的所有代码都可以工作，但最后，当我尝试删除数据库时，数据库文件没有被删除。我调用了close函数，为什么我不能删除数据库？db.isOpen(); 函数返回 false，并且 QFile::remove(path); 也返回假。注意：在 Windows 资源管理器中，我只能在关闭程序窗口后删除数据库。

```
QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
QString path = "path_to_db";
db.setDatabaseName(path);

if(db.open())
{
    qDebug() << "Opened";
    qDebug() << path;
}
else
{
    qDebug() << db.lastError();
    return a.exec();
}
QSqlQuery query(db);

//code to work with the database

db.close();
qDebug() << db.isOpen();
qDebug() << QFile::remove(path); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T01:57:31.587

我找到了解决方案，只需`query.clear();`在关闭连接之前调用。

# php - 列数与第 1 行的值数不匹配 - 但我有 27 列和 27 个值？PHP MySQL 错误

> ID：14948274
> 
> 赞同：1
> 
> 时间：2013-02-19T01:23:06.457
> 
> 标签：php, mysql, phpmyadmin, key-value-store

这是我的数组：

```
$person = array(
    "fullname" => $fn,
    "skin_shade" => $_POST['skin_shade'],
    "acne" => $_POST['acne'],
    "dry_skin" => $_POST['dry_skin'],
    "oily_skin" => $_POST['oily_skin'],
    "wrinkles_aging" => $_POST['wrinkles_aging'],
    "sensative_skin" => $_POST['sensative_skin'],
    "darkspots" => $_POST['darkspots'],
    "hair_type" => $_POST['hair_type'],
    "parabens" => $_POST['parabens'],
    "sulfates" => $_POST['sulfates'],
    "mineral_oil" => $_POST['mineral_oil'],
    "silicones" => $_POST['silicones'],
    "relaxed" => $_POST['relaxed'],
    "colortreated" => $_POST['colortreated'],
    "thinning" => $_POST['thinning'],
    "growth" => $_POST['growth'],
    "braidout" => $_POST['braidout'],
    "roller" => $_POST['roller'],
    "wng" => $_POST['wng'],
    "heat" => $_POST['heat'],
    "wig" => $_POST['wig'],
    "braid" => $_POST['braid'],
    "dreadlocks" => $_POST['dreadlocks'],
    "henna" => $_POST['henna'],
    "hair_color" => $_POST['hair_color'],
    "hair_style" => $_POST['hair_style'],
); 
```

这是我尝试插入它并得到错误的地方：

```
$columns = implode(", ",array_keys($person));
$escaped_values = array_map('mysql_real_escape_string', array_values($person));
$values = implode(", ", $escaped_values);
$sql = "INSERT INTO people ($columns) VALUES ('$values')";
mysql_query($sql) or die (mysql_error()); 
```

我还在列和值上使用了 print_r 以确保它们的大小相同：

```
print_r($columns); echo"</br></br>";
print_r($values); 
```

这是我得到的输出：

> 全名，skin_shade，粉刺，干性皮肤，油性皮肤，皱纹_老化，敏感皮肤，黑斑，头发类型，对羟基苯甲酸酯，硫酸盐，矿物油，有机硅，放松，颜色处理，变薄，生长，辫子，滚筒，wng，热，假发，辫子，长发绺，指甲花，头发颜色，头发样式
> 
> 克里斯·鲁诺，2，不，是，不，是，是，不，直，不，不，不，不，不，不，不，是，不，不，不，不，不，不，不，不，深棕色，经典

我还检查了我的 MySQL 表，有 27 列。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T01:25:38.650

```
$sql = "INSERT INTO people ($columns) VALUES ('$values')"; 
```

这将把*一个*字符串文字放入 VALUES 子句中，一个包含逗号分隔值列表的单引号字符串：

```
INSERT INTO people (...columns...) VALUES ('Chris Runo, 2, No, Yes, No, Yes, Yes, No, Straight, No, No, No, No, No, No, No, Yes, No, No, No, No, No, No, No, No, dark_brown, classic') 
```

为了解决这个问题，您可以编写自己的引用/转义函数并在 array_map() 中使用它：

```
function myquote($val)
{
  return "'" . mysql_real_escape_string($val) . "'";
}

$escaped_values = array_map('myquote', array_values($person));

$values = implode(", ", $escaped_values);
$sql = "INSERT INTO people ($columns) VALUES ($values)"; 
```

否则，您可以放弃已弃用的 mysql_* 函数，并使用 PDO，这样可以更轻松地编写不受 SQL 注入影响的查询：

```
$columns = implode(", ",array_keys($person));
$params = implode(",", array_fill(0, count($person), "?"));

$sql = "INSERT INTO people ($columns) VALUES ($params)";
$stmt = $pdo->prepare($sql) or die(print_r($pdo->errorInfo(), true));
$stmt->execute(array_values($people)) or die(print_r($stmt->errorInfo(), true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:27:53.140

您需要将您的值与`''`. 因此，将您的内爆更改为：

```
$values = implode("', '", $escaped_values); 
```

# performance - 在 CUDA 上测量有效带宽

> ID：14948275
> 
> 赞同：1
> 
> 时间：2013-02-19T01:23:20.913
> 
> 标签：performance, cuda, cublas

所以我想知道如何计算总内存有效带宽：

```
cublasSdot(handle, M, devPtrA, 1, devPtrB, 1, &curesult); 
```

该功能低于`cublas_v2.h`

该函数在 0.46 毫秒内运行，向量是`10000 * sizeof(float)`

我有`((10000 * 4) / 10^9 )/0.00046 = 0.086 GB/s`吗？

我想知道它是因为我不知道 cublasSdot 函数内部是什么，也不知道它是否有必要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T03:26:32.603

在您的情况下，输入数据的大小为 10000 * 4 * 2，因为您有 2 个输入向量，输出数据的大小为 4。有效带宽应约为 0.172 GB/s。

基本上只做`cublasSdot()`计算。配置文件结果显示`cublasSdot()`调用 2 个内核来计算结果。如果指针模式为 ，则还会调用额外的 4 字节设备到主机内存传输`CUBLAS_POINTER_MODE_HOST`，这是 cublas lib 的默认模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T11:58:24.127

如果内核时间以毫秒为单位，则需要乘以 1000。结果为 86 GB/s。

作为示例，请参阅 NVIDIA 为 Matrix Transpose 提供的示例，网址为[http://docs.nvidia.com/cuda/samples/6_Advanced/transpose/doc/MatrixTranspose.pdf](http://docs.nvidia.com/cuda/samples/6_Advanced/transpose/doc/MatrixTranspose.pdf)

在最后一页上存在整个代码。计算有效带宽的方式是 2.*1000*mem_size/(1024*1024*1024)/(Time in ms)

# rake - Neo4j rake aborted! No such file or directory - wget http://dist.neo4j.org/neo4j-community-1.7-unix.tar.gz

> ID：14948282
> 
> 赞同：0
> 
> 时间：2013-02-19T01:23:50.930
> 
> 标签：rake, neo4j, wget, rake-task

Trying to install and run a simple Neo4j app from Max Demarzi's "d3_js_intro" app on GitHub. Issuing the command `rake neo4j:install`, I get the message shown below. Questions:

1.  **Q**: What is the root cause of wget failing to get the file; a file that appears to exist in exactly the place expected? (Note: the URL following the error message "No such file or directory" is valid; that file exists there... so message is incorrect. Why?) **A**: the root cause was that wget is not installed on a Mac OSX machine. If you are running a Mac OSX machine, you too will need to install wget.

I've tried:

1.  I've manually downloaded the file ([http://dist.neo4j.org/neo4j-community-1.7-unix.tar.gz](http://dist.neo4j.org/neo4j-community-1.7-unix.tar.gz)) that the wget was failing to get.
2.  extracting the file to the app root directory.

Questions related to manually recovering from this problem:

1.  **Q**: Does the manually-extracted directory need to be named anything special? (i.e.: "Neo4j", "neo4j", etc.). **A**: It would have to be called "neo4j", but the fix (below) eliminates the need to do this.
2.  **Q**: What configuration files would I need to modify (and how) in order to get the app to see the neo4j server? **A**: the fix below eliminates the need to deal with this.

The gem files reads:

```
source 'http://rubygems.org'

gem 'sinatra'
gem 'neography'
gem 'haml'
gem 'json'

group :test do
  gem 'rspec'
  gem 'rack-test'
  gem 'net-http-spy' 
end 
```

The Rakefile reads:

```
require 'neography/tasks'
require './d3.rb'

namespace :neo4j do
  task :create do
    create_graph
  end
end 
```

Thanks for anything you can provide - HisHighnessDog

```
rake neo4j:install --trace
** Invoke neo4j:install (first_time)
** Execute neo4j:install
Installing Neo4j-community-1.7
rake aborted!
No such file or directory - wget http://dist.neo4j.org/neo4j-community-1.7-unix.tar.gz
/Users/tomjones/.rvm/gems/ruby-1.9.3-p194/gems/neography-0.0.26/lib/neography/tasks.rb:44:in ``'
/Users/tomjones/.rvm/gems/ruby-1.9.3-p194/gems/neography-0.0.26/lib/neography/tasks.rb:44:in `block (2 levels) in <top (required)>'
...
...
/Users/tomjones/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
/Users/tomjones/.rvm/gems/ruby-1.9.3-p194/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
/Users/tomjones/.rvm/gems/ruby-1.9.3-p194/bin/rake:23:in `load'
/Users/tomjones/.rvm/gems/ruby-1.9.3-p194/bin/rake:23:in `<main>'
Tasks: TOP => neo4j:install 
```

# Should I be concerned that the Rakefile does not contain a task entry for 'install', while the command I'm running is `rake neo4j:install`?

**Solution**: the root cause for the error message is that (OSX machine default): wget is not installed.

**Recovery**: Install and configure wget:

1.  curl -O [http://ftp.gnu.org/gnu/wget/wget-1.14.tar.gz](http://ftp.gnu.org/gnu/wget/wget-1.14.tar.gz)
2.  tar -xzvf wget-1.13.tar.gz
3.  cd wget-1.14
4.  ./configure --with-ssl=openssl
5.  make
6.  sudo make install
7.  which wget (to confirm wget is now installed)

Use the current wget download from gnu org's website.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:06:30.883

您必须下载、解压缩并启动 Neo4j 服务器。在这种情况下，版本不相关。请访问[http://neo4j.org/download](http://neo4j.org/download)获取说明和下载链接。

# php - what causes this error NS_ERROR_DOCUMENT_NOT_CACHED

> ID：14948283
> 
> 赞同：0
> 
> 时间：2013-02-19T01:24:02.363
> 
> 标签：php, actionscript-3, apache-flex, firefox

I'm using URLLoader in flex, but as i load a certain url, the connection is aborted (monitored using HTTPFox plugin in firefox). I simulate same instance on another server but it does not abort. When I checked HTTPFox content it has the following value:

**Error loading content (NS_ERROR_DOCUMENT_NOT_CACHED)**

I've been searching the net but there seemed to be no explaination why NS_ERROR_DOCUMENT_NOT_CACHED occurs. I just thought knowing why such error message appeared would solve why the connection is aborted.

Here is a part of the code of the sample i made to test on both of the servers that worked and did not that does the URLLoader.

```
private var UrlLoaderService : URLLoader = new URLLoader();

function initializeData():void
{
     var parameters : URLVariables = new URLVariables();
     var requests : URLRequest = new URLRequest();

     parameters.param1="param1";
     parameters.param2="param2";
     parameters.param3="param3";

     requests.data = parameters;
     requests.method = URLRequestMethod.POST;
     requests.url = "/sampletest/testrequest.php?antiCache="+Math.random();

     UrlLoaderService.addEventListener(Event.COMPLETE, successResult);
     UrlLoaderService.load(requests);
} 
```

# html - Forcing Scala's XML library to render "singleton tag" (e.g., ) as such

> ID：14948284
> 
> 赞同：1
> 
> 时间：2013-02-19T01:24:03.087
> 
> 标签：html, xml, scala, xml-parsing

If I use the `loadString` method to load HTML containing a `<br/>` tag, Scala's XML lib wants to convert that to the longer, and seemingly less standard `<br></br>` (which unfortunately even seems to *render differently* than the plain-old `<br/>` in some browsers).

I.e., the following...

```
val xml = scala.xml.XML.loadString("<body>Hi<br/>there.</body>")
xml.toString() 
```

...yields...

```
<body>Hi<br></br>there.</body> 
```

Is there a way to force Scala's XML lib to render the tag as a "singleton"?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:27:50.453

不是这样！

```
scala> val xml = scala.xml.XML.loadString("<body>Hi<br/>there.</body>")
xml: scala.xml.Elem = <body>Hi<br/>there.</body>

scala> xml.toString()
res0: String = <body>Hi<br/>there.</body> 
```

当然，您使用的不是 Scala 2.10.0，所以您可以看到您所看到的。

# tfs - How do I query workitems with the build number starts with 1.1

> ID：14948287
> 
> 赞同：1
> 
> 时间：2013-02-19T01:25:00.180
> 
> 标签：tfs, workitem

If I use build number contains = 1.1, it also returns all the work items for with build number starts with 1.1 and also if 1.1 contains anywhere in build number. For example 1.0.1.123\. Is there any way to use Regex or something similar to query work items?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-22T05:46:29.147

似乎默认工作项查询无法实现这一点。您可以使用 TFS API 创建自定义查询。

# php - Output PDF file using header

> ID：14948288
> 
> 赞同：1
> 
> 时间：2013-02-19T01:25:06.237
> 
> 标签：php, pdf

I can output a PHP table in an excel file using this code:

```
<?php 

require("aacfs.php");

header("Content-type: application/octet-stream");
header("Content-Disposition: attachment; filename=Cancelled Flight Summary_sortbydate.xls");
header("Pragma: no-cache");
header("Expires: 0");

echo "<center>Ayala Aviation Corporation</center>";
echo "<center><b>Cancelled Flight Summary</b></center>";
echo "<center>For the period ________</center></br></br>";

$result=mysql_query("select * from reservation where status='Cancelled' order by bdate");   
echo "<center></br></br><table border=1 class='imagetable'><tr>
    <th>Flight Date</th> 
    <th>Client</th>
    <th>Group Code</th>
    <th>Itinerary</th>
    <th>ETD</th>
    <th>Aircraft</th>
    <th>ETA</th>
    <th>Reservation No.</th>
    <th>Last Status</th>
    <th>Remarks</th>
    <th>Reserved By</th>
    </tr>";
if(mysql_num_rows($result)>0)
{
while($row=mysql_fetch_array($result))
{
    $rvno=$row['reservno'];
    $yr=(string) date("Y");
    $rn=$yr."-".$rvno;
    echo"<tr><td>".$row['fdate']."</td><td>".$row['cliename']."</td><td>".$row['grpcode']."</td><td>".$row['itinerary']."</td><td>".$row['etd']."</td><td>".$row['acode']."</td><td>".$row['eta']."</td><td>".$rn."</td><td>".$row['lstatus']."</td><td>".$row['remarks']."</td><td>".$row['adminid']."</td></tr>";

}
}
else
    { ?>
        <tr><td colspan="11" style="text-align:center; color:#FF0000; font-size:16px;">*No Data Available!*</td></tr>
        <?php
    }
        ?><?php

?> 
```

I tried this,

```
<?php 

require("aacfs.php");

header("Content-type: application/pdf");
header("Content-Disposition: attachment; filename=Cancelled Flight Summary_sortbydate.pdf");
header("Pragma: no-cache");
header("Expires: 0");

echo "<center>Ayala Aviation Corporation</center>";
echo "<center><b>Cancelled Flight Summary</b></center>";
echo "<center>For the period ________</center></br></br>";

$result=mysql_query("select * from reservation where status='Cancelled' order by bdate");   
echo "<center></br></br><table border=1 class='imagetable'><tr>
    <th>Flight Date</th> 
    <th>Client</th>
    <th>Group Code</th>
    <th>Itinerary</th>
    <th>ETD</th>
    <th>Aircraft</th>
    <th>ETA</th>
    <th>Reservation No.</th>
    <th>Last Status</th>
    <th>Remarks</th>
    <th>Reserved By</th>
    </tr>";
if(mysql_num_rows($result)>0)
{
while($row=mysql_fetch_array($result))
{
    $rvno=$row['reservno'];
    $yr=(string) date("Y");
    $rn=$yr."-".$rvno;
    echo"<tr><td>".$row['fdate']."</td><td>".$row['cliename']."</td><td>".$row['grpcode']."</td><td>".$row['itinerary']."</td><td>".$row['etd']."</td><td>".$row['acode']."</td><td>".$row['eta']."</td><td>".$rn."</td><td>".$row['lstatus']."</td><td>".$row['remarks']."</td><td>".$row['adminid']."</td></tr>";

}
}
else
    { ?>
        <tr><td colspan="11" style="text-align:center; color:#FF0000; font-size:16px;">*No Data Available!*</td></tr>
        <?php
    }
        ?><?php

?> 
```

And it does download a PDF file but it can't be opened.

Is it really impossible to output the PHP table in a PDF file the same way it does in the above code? Or I'm just doing something wrong on my 2nd code? This way is the easiest for me so I'm eager to know if it is impossible (if it is, then why?) or possible. And please point me out to an easy alternative to achieve this in case it is not possible, since I'm new to generating external files through PHP. Any help would do. Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:30:53.840

您不能只回显 HTML 并希望它会神奇地生成 PDF 二进制文件，因为您发送了 PDF 标头。查看 PHP PDF 库 ( [http://php.net/manual/en/book.pdf.php](http://php.net/manual/en/book.pdf.php) ) 或其他基于 PHP 的库以创建 PDF。

同样，我很震惊输出带有 Excel 标头的 HTML 会创建一个可用的 Excel 文件。这必须通过与 Excel 的幸运兼容性才能起作用。如果您想以更可靠的方式创建 Excel 文件，您应该使用真正的 Excel 库（或创建与 Excel 兼容的 CSV 文件）。

# c# - EF5.x 与 Power Tools 3.x Beta

> ID：14948290
> 
> 赞同：3
> 
> 时间：2013-02-19T01:25:14.193
> 
> 标签：c#, entity-framework

我做了一个 Reveres 代码 Eng 内部，首先使用 MYSQL DB 的 EF 电动工具生成代码，我可以很好地读取表。当我尝试保存任何东西时，我在下面得到异常。我没有设置此字段，我的解决方案中也没有此字段名称的任何内容。

```
 ProjectContext db = new ProjectContext();
            Person person = new Person();
            person.UpdatedAt = DateTime.Now;
            person.UserId = 1;
            person.PersonName = "test";
            db.Persones.Add(person);

            db.SaveChanges();

{"Unknown column 'Discriminator' in 'field list'"} 
```

**编辑** 我注意到我有另一个类继承了这个类

公共课学生：人{

}

当我删除该继承时，它起作用了。但有人知道为什么吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T06:54:21.283

问题是当您有一个继承自另一个的类时，会自动添加此字段。使用此字段以便 EF 可以知道女巫记录代表学生，女巫记录只是人。

[soadyp](https://stackoverflow.com/users/1347784/soadyp)提到的[这篇文章](http://weblogs.asp.net/manavi/archive/2010/12/24/inheritance-mapping-strategies-with-entity-framework-code-first-ctp5-part-1-table-per-hierarchy-tph.aspx)更好地解释了这一点。

默认情况下，使用 codefirst 创建的模型使用 TPH。

# c# - Where are file operations handled in MVP?

> ID：14948292
> 
> 赞同：0
> 
> 时间：2013-02-19T01:25:18.390
> 
> 标签：c#, user-interface, file-io, mvp

This may be a silly question, but with my current searches I have found mostly information about the presentation of data and the interplay between the Presenter and the View, but very little about the Model and the Presenter.

Basically, say I have a C# application, and it opens a CSV file that is a 5 by 5 array of numbers. Now if I wanted to load that 5 by 5 CSV array into an array of ints, where is this handled in the grand scheme?

This is my current idea to follow MVP, but please correct me if I am wrong (or confirm that I'm right, if I manage to be).

1.  The user clicks a button to load the file.
2.  The View loads a showOpenDialog() for the user to select the file.
3.  After user clicks okay in that dialog, the View, sends an event to the presenter containing that filename.
4.  The presenter takes that filename, handles the file opening and parsing it into a 5 x 5 int array.
5.  The presenter then provides that int array to the Model through an event. The model then stores that array.
6.  The model gives an event saying that it's data has changed.
7.  The presenter listens and handles this event, putting that 5 x 5 int array into a DataTable.
8.  The presenter raises an event saying that it has a new DataTableready.
9.  The view listens and handles this event, and updates a dataGridView with the information provided by the DataTable.

My understanding of MVP gets murky at about step 5 there. Is that how it should go, or did I misinterpret what each component does in MVP?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:30:11.750

您在 MVP 中使用事件的方式很有趣。但是我通常没有遇到过。

根据我的经验，这是工作流程：

1.  在视图中单击的按钮
2.  查看显示对话框
3.  在属性中查看存储文件名
4.  View 调用 Presenter 方法（例如 loadFile）
5.  Presenter 使用 View 接口从属性中检索文件名
6.  演示者 a) 使用服务执行加载或 b) 加载文件本身
7.  模型是通过 Service 或 Presenter 构建的
8.  模型通过 loadFile 方法传回给视图

# javascript - Loading Issues With Masonry

> ID：14948293
> 
> 赞同：0
> 
> 时间：2013-02-19T01:25:21.847
> 
> 标签：javascript, jquery, jquery-masonry, preloader

I'm having a few issues with masonry, just wondering if anyone can help with any of them

1) Masonry doesn't kick in until all images are loaded and they're all stuck on the top-left of page until that's done
2) Images visibly load slowly, would love if they wouldn't display until fully loaded through some kind of pre-loader 3) The images are always positioned in a funny way on first load, but every refresh after that they are placed correctly

you can see the work in progress here, a little background, the images are meant to be loaded with random sizes, positioning and order on every load [http://www.coreytegeler.com/jb/oddfuture/](http://www.coreytegeler.com/jb/oddfuture/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:04:10.097

您正在使用延迟砌体插件初始化的图像加载插件。你可以做的是：

使用 css 隐藏内容：

```
#container {display:none} 
```

加载图像并应用砌体后显示图像：

```
var $container = $('#container');

$container.imagesLoaded( function(){

  $container.show();

  $container.masonry({
    itemSelector : '.photo'
  });

}); 
```

# excel - 导出到 Excel 的电子邮件数据 - 按接收日期排序

> ID：14948295
> 
> 赞同：1
> 
> 时间：2013-02-19T01:26:24.967
> 
> 标签：excel, vba, outlook

我正在编写一个宏来将电子邮件数据导出到 excel 文件以获取月度报告。

但是，我意识到提取的数据与日期不相符；一切都混乱了。

一些邮箱有大量的电子邮件
因此考虑到效率问题，有没有办法以最新到最旧的顺序获取数据？

以下是部分代码：

```
Dim msg As Outlook.MailItem
Dim nms As Outlook.NameSpace
Dim fld As Outlook.MAPIFolder
Dim itm As Object

'Select export folder
Set nms = Application.GetNamespace("MAPI")
Set fld = nms.PickFolder

'Open and activate Excel workbook.
Set appExcel = CreateObject("Excel.Application")
appExcel.Workbooks.Open (strSheet)
Set wkb = appExcel.ActiveWorkbook
Set wks = wkb.Sheets(1)
wks.Activate
appExcel.Application.Visible = True

'Copy field items in mail folder.
 For Each itm In fld.Items
'Check item type
If TypeName(itm) = "MailItem" Then
intColumnCounter = 1
Set msg = itm
intRowCounter = intRowCounter + 1
Set rng = wks.Cells(intRowCounter, intColumnCounter)
rng.Value = msg.To
intColumnCounter = intColumnCounter + 1
Set rng = wks.Cells(intRowCounter, intColumnCounter)
rng.Value = msg.SenderName
intColumnCounter = intColumnCounter + 1
Set rng = wks.Cells(intRowCounter, intColumnCounter)
rng.Value = msg.Subject
intColumnCounter = intColumnCounter + 1
Set rng = wks.Cells(intRowCounter, intColumnCounter)
rng.Value = msg.ReceivedTime
intColumnCounter = intColumnCounter + 1
Set rng = wks.Cells(intRowCounter, intColumnCounter)
rng.Value = GetLastVerb(msg)
End If
Next 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T02:54:20.450

您需要先对 Items 集合进行排序：

```
set Items = fld.Items
Items.Sort "ReceivedTime", true
For Each itm In Items
  ... 
```

# osgi - OSGi - 是否可以使用片段覆盖包的导入包版本？

> ID：14948301
> 
> 赞同：1
> 
> 时间：2013-02-19T01:27:11.680
> 
> 标签：osgi, equinox, apache-karaf

我有一个包（jersey-server），它导入一个包（`org.objectweb.asm`），分辨率为可选且未指定版本：

```
org.objectweb.asm;resolution:=optional 
```

目前，我们的应用程序部署到 Apache Karaf（使用 Equinox 框架），它导出了这个包的一个新版本（`org.objectweb.asm`），即 4.0 版。我试图解决的问题是，由于 jersey-server 捆绑包没有为它连接到 4.0.0 的包指定版本。但是，我使用的 jersey-server 版本（1.12）与此版本不兼容。我需要 jersey-server 捆绑包连接到的容器中提供 3.1 版本的软件包。

我试图使用一个片段来满足我的需要，但它似乎不起作用。我不完全了解片段导入包冲突解决在 Equinox（或 Felix）中的工作原理，以了解我正在尝试做的事情是否可能。也许还有另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T12:27:53.533

我对 pax-web 有类似的问题，我为它创建了一个“解决方法”：

[https://github.com/ops4j/org.ops4j.pax.web/tree/master/pax-web-features/xbean-fragment](https://github.com/ops4j/org.ops4j.pax.web/tree/master/pax-web-features/xbean-fragment)

它也可以通过 maven 获得： [http ://search.maven.org/#artifactdetails%7Corg.ops4j.pax.web%7Cxbean-fragment%7C3.0.0.M2%7Cbundle](http://search.maven.org/#artifactdetails%7Corg.ops4j.pax.web%7Cxbean-fragment%7C3.0.0.M2%7Cbundle)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T11:34:24.747

不，碎片只是添加剂。即他们可以向他们的主机包添加额外的导入，但他们不能替换或删除主机的导入。

捆绑包被破坏了，`jersey-server`必须修复。

# ios - barbuttonitem 现在出现了，presentmodalviewcontroller

> ID：14948302
> 
> 赞同：0
> 
> 时间：2013-02-19T01:27:13.093
> 
> 标签：ios, xcode, uiviewcontroller

我需要以模态方式显示 PDF 文件，当我的用户单击某些按钮时，我将 PDF 加载到一个类中并以模态方式呈现它，现在我需要在 modalVC 上为用户提供关闭或返回的按钮，所以我添加了RightBarButtonItem，问题是它没有出现吗？这是加载 PDF 的代码

```
 [self.pdfViewController.view addSubview:pdfViewer];
     UINavigationController *navController = [[UINavigationController alloc]      
     initWithRootViewController:pdfViewController];
     self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc]   
     initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(shutDown)];
     [self presentModalViewController:navController animated:YES]; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:32:55.923

您将条形按钮附加到错误的 viewController。它应该属于您呈现的 navigationController 中的 viewController。这是 pdfViewController。

此外...

*   假设`self.pdfViewController`是同一个对象`pdfViewController`，最好是一致地引用它
*   `presentModalViewController`至少从 ios5.0 起已弃用，您应该使用`presentViewController:animated:completion`

所以你的代码应该是这样的

```
 [self.pdfViewController.view addSubview:pdfViewer];
 UINavigationController *navController = 
   [[UINavigationController alloc] initWithRootViewController:self.pdfViewController];
 self.pdfViewController.navigationItem.rightBarButtonItem = 
   [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd 
                                                 target:self 
                                                 action:@selector(shutDown)];
 [self presentViewController:navController 
                    animated:YES 
                  completion:nil]; 
```

你的`shutDown`方法将被发送到呈现的 ViewController，而不是你呈现的 pdfViewController……所以这就是你需要实现它的地方。

# c++ - C++ 错误：为...指定的返回类型冲突...模板化子类

> ID：14948303
> 
> 赞同：0
> 
> 时间：2013-02-19T01:27:19.303
> 
> 标签：c++, templates

乍一看，一切似乎都是正确的，但这段代码不会编译。但是，如果我将基类的返回类型更改为，`double *`那么它将编译。有人可以解释编译器如何/为什么不将模板类型“T”视为有效的返回类型。

**基类：**

```
01 template <typename T>
02 class DefaultValueFunctorBase {
03   public:
04     virtual const T operator() (void) const = 0;
05 }; 
```

**子类：**

```
01 class DblPtrDft : public DefaultValueFunctorBase<double *> {
02   public:
03     DblPtrDft (double default_value_)
04     : DefaultValueFunctorBase<double *>(),
05       _default_value(default_value_),
06       _default_value_ptr(&_default_value)
07     {}
08 
09     const double * operator() (void) const { return _default_value_ptr; }
10 
11   private:
12     const double *_default_value_ptr;
13     const double _default_value;
14 }; 
```

**错误：**

> DblPtrDft.h:09：错误：为 'virtual const double* DblPtrDft::operator()() const' DefaultValueFunctorBase.h:04 指定的返回类型冲突：错误：覆盖 'const T DefaultValueFunctorBase::operator()() const [与 T = 双*]'</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:02:55.010

问题是`const T`应该读作`T const`，这清楚地表明`const`限定符适用于`T`。因此，当您在模板实例化中替换`T`为时`double*`，您得到的基类调用运算符的返回类型是`double* const`.

这与派生类的调用运算符中的返回类型不同（即`const double*`，等效于`double const*`）。在超类中，您返回一个指向 a 的常量指针`double`。在子类上，您返回一个指向常量的非常量指针`double`。

修复应用程序的一种方法是：

```
template<typename T>
class DefaultValueFunctorBase
{
    public:
        // Do not return T const here: the top-level const is useless anyway
        virtual T operator() (void) const = 0;
};

// Instantiate your base class template with double const* rather than double*
class DblPtrDft : public DefaultValueFunctorBase<double const*>
{
public:
    DblPtrDft (double default_value_)
    : DefaultValueFunctorBase<double const*>(), // Same change here of course...
    _default_value(default_value_),
    _default_value_ptr(&_default_value)
    {}

    // Return a double const*, consistently with the instantiated template...
    double const* operator() (void) const { return _default_value_ptr; }

private:
    double const*_default_value_ptr;
    double const _default_value;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:32:18.783

您的重写函数返回 a `const double *`，但带有 的虚函数`T = double *`实际上的返回类型为`double * const`。

# php - 更高效的 SQL 查询方式

> ID：14948312
> 
> 赞同：0
> 
> 时间：2013-02-19T01:28:15.097
> 
> 标签：php, sql, performance, web

我一直在使用下面的 php 和 sql 来加载英国旅客列车的时刻表信息和实时信息。本质上，您必须找到相关的时间表，然后为每个时间表加载实时信息，这些信息位于与今天的火车相关的不同表格中。

查询花费的时间比真正的想法要长一些，并且使用了大量的 CPU%，这又不是理想的。在 sql 编程方面我很弱，所以任何关于什么是低效的指针都会很棒。

这是一个 android 应用程序，所以我尝试通过 http 进行一次调用。prints(*) 和 > 用于在另一端拆分字符串。

这是代码：

```
<?

//Connect to the database
 mysql_connect("localhost","XXXX","XXXX")
or die ("No connection could be made to the OpenRail Database");
mysql_select_db("autotrain");
//Set todays date from system and get HTTP parameters for the station,time to find trains         and todays locations table.
$date = date('Y-m-d');
$test = $_GET['station'];
$time = $_GET['time'];
$table = $_GET['table'];

//Find the tiploc associated with the station being searched.
$tiplocQuery = "SELECT tiploc_code FROM allstations WHERE c LIKE '$test';";
$tiplocResult =mysql_query($tiplocQuery);
$tiplocRow = mysql_fetch_assoc($tiplocResult);

$tiploc=$tiplocRow['tiploc_code'];
//Now find the timetabled trains for the station where there exists no departure     information. Goes back two hours to account for any late running.
$timeTableQuery = "SELECT tiplocs.tps_description AS 'C',     locations$table.public_departure, locations$table.id,schedules.stp_indicator
,schedules.train_uid
FROM locations$table, tiplocs, schedules_cache, schedules,activations
WHERE locations$table.id = schedules_cache.id
AND schedules_cache.id = schedules.id
AND schedules.id =activations.id
AND '$date'
BETWEEN schedules.date_from
AND schedules.date_to
AND locations$table.tiploc_code = '$tiploc'
AND locations$table.real_departure LIKE '0'
AND locations$table.public_departure NOT LIKE '0'
AND locations$table.public_departure >='$time'-300
AND locations$table.public_departure <='$time'+300
AND schedules.runs_th LIKE '1'
AND schedules_cache.destination = tiplocs.tiploc
ORDER BY locations$table.public_departure ASC
LIMIT 0,30;";

$timeTableResult=mysql_query($timeTableQuery);

while($timeTablerow = mysql_fetch_assoc($timeTableResult)){
$output[] = $timeTablerow;

}

//Now for each id returned in the timetable, get the locations and departure times so the app may calculate expected arrival times.
foreach ($output as $value) {
$id = $value['id'];
$realTimeQuery ="SELECT     locations$table.id,locations$table.location_order,locations$table.arrival,locations$table.public_arrival,
locations$table.real_arrival,locations$table.pass,locations$table.departure,locations$   table.public_departure,locations$table.real_departure,locations$table.location_cancelled,
tiplocs.tps_description FROM locations$table,tiplocs WHERE id =$id AND     locations$table.tiploc_code=tiplocs.tiploc;";

$realTimeResult =mysql_query($realTimeQuery);
while($row3 = mysql_fetch_assoc($realTimeResult)){
    $output3[] = $row3;
}
print json_encode($output3);
print("*");
unset($output3);
unset($id);
}

print('>');
print json_encode($output);

?> 
```

非常感谢马特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:36:33.337

我注意到了一些事情。

首先，您在 where 子句中加入表，如下所示

```
from table1, table2
where table1.something - table2.something 
```

加入 from 子句更快

```
from table1 join table2 on table1.something - table2.something 
```

接下来，我不是 php 程序员，但看起来您正在循环中运行类似的查询。如果这是真的，请寻找一种只运行一个查询的方法。

**编辑从这里开始**

这是对 gazarsgo 的回应，我声称 where 子句中的连接更快。他是对的，我错了。这就是我所做的。编程语言是 ColdFusion：

```
<cfsetting showdebugoutput="no">
<cfscript>
fromtimes = ArrayNew(1);
wheretimes = ArrayNew(1);
</cfscript>

<cfloop from="1" to="1000" index="idx">
<cfquery datasource="burns" name="fromclause" result="fromresult">
select count(distinct hscnumber)
from burns_patient p join burns_case c on p.patientid = c.patientid
</cfquery>
<cfset ArrayAppend(fromtimes, fromresult.executiontime)>

<cfquery datasource="burns" name="whereclause" result="whereresult">
select count(distinct hscnumber)
from burns_patient p, burns_case c 
where p.patientid = c.patientid
</cfquery>
<cfset ArrayAppend(wheretimes, whereresult.executiontime)>
</cfloop>
<cfdump var="#ArrayAvg(fromtimes)#" metainfo="no" label="from">
 <cfdump var="#ArrayAvg(wheretimes)#" metainfo="no" label="where"> 
```

我确实跑了5次。结果（以毫秒为单位）如下。

```
 9.563 9.611
 9.498 9.584 
 9.625 9.548 
 9.831 9.769 
 9.792 9.813 
```

第一个数字表示加入 from 子句，第二个表示加入 where 子句。第一个数字只有 60% 的时间较低。如果它在 100% 的时间里较低，它会表明加入 from 子句更快，但事实并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:13:34.777

您设置的最大问题是这个 foreach 循环，因为它是不必要的，并且会导致 n 次往返数据库以执行查询、获取和分析结果。

```
foreach ($output as $value) { 
```

重写初始查询以包含您以后进行计算所需的所有字段。

像这样的东西会起作用。

```
SELECT tl.tps_description AS 'C', lc.public_departure, lc.id, s.stp_indicator, s.train_uid,
lc.id, lc.location_order, lc.arrival, lc.public_arrival, lc.real_arrival, lc.pass, lc.departure, lc.real_departure, lc.location_cancelled
FROM locations$table lc INNER JOIN schedules_cache sc ON lc.id = sc.id
  INNER JOIN schedules s ON s.id = sc.id
  INNER JOIN activations a ON s.id = a.id
  INNER JOIN tiplocs tl ON sc.destination = tl.tiploc
WHERE '$date' BETWEEN schedules.date_from AND schedules.date_to
  AND lc.tiploc_code = '$tiploc'
  AND lc.real_departure LIKE '0'
  AND lc.public_departure NOT LIKE '0'
  AND lc.public_departure >='$time'-300
  AND lc.public_departure <='$time'+300
  AND s.runs_th LIKE '1'
ORDER BY lc.public_departure ASC
LIMIT 0,30; 
```

从页面加载中消除 n 次查询执行应该会显着增加响应时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:26:58.317

忽略代码中的问题，为了加快查询速度，请使用 EXPLAIN 命令评估需要在查询中添加索引的位置。

猜测一下，您可能希望在任何`locations$table.public_departure`评估结果上创建一个索引。

[http://dev.mysql.com/doc/refman/5.0/en/using-explain.html](http://dev.mysql.com/doc/refman/5.0/en/using-explain.html)

# kinect - 如何在 Mac 上安装 OpenNI 1.x？

> ID：14948315
> 
> 赞同：2
> 
> 时间：2013-02-19T01:28:39.510
> 
> 标签：kinect, openni

我有一台适用于 Windows 的 Kinect，我想将它连接到装有 OSX 10.7.5 的 Mac 笔记本电脑。

我想使用 openNI 作为驱动程序。

OpenNI 的网站列出了“OpenNI 2.1 Beta (OS X)”，但[源代码页面](https://github.com/OpenNI/OpenNI2)没有列出安装说明。他们是在其他地方找到的吗？

[OpenNI 1.x github](https://github.com/OpenNI/OpenNI)页面和[OpenNI 1.x Unstable 分支](https://github.com/OpenNI/OpenNI/tree/unstable)页面上有安装说明。这两个分支的说明略有不同，但对我来说都没有。

我最初安装了 XCode 4.6。两条指令都表示他们想要我安装的 XCode 4.3.2，将其重命名为 XCode 4.6 并使用“sudo xcode-select -switch”在它们之间切换。

两条指令都要求“libusb-devel +universal”，在这两种情况下我都得到：

```
Error: Please do not install this port since it has been replaced by 'libusb'.
Error: org.macports.configure for port libusb-devel returned: 
Please see the log file for port libusb-devel for details:
/opt/local/var/macports/logs/_opt_local_var_macports_sources_rsync.macports.org_release_tarballs_ports_devel_libusb-devel/libusb-devel/main.log
Error: Processing of port libusb-devel failed 
```

如果我继续安装“libusb +universal”，那么其余的依赖项安装得很好（尽管我必须在 Doxygen 之前安装 GraphViz）。

但是当我运行：“./RedistMaker”时，我收到了很多警告，尽管它确实创建了一个最终文件。“sudo ./install.sh”运行良好，我猜 OpenNI 已安装，但在尝试安装 Sensor 时出现更多错误。

谁能帮忙告诉我应该从哪里开始担心？我是否需要手动安装 libusb（我尝试过这样做）？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-14T07:41:38.847

我通过运行以下说明修复了 OpenNI 的安装：

```
> sudo rm -f /opt/local/lib/libusb-1.0.0.dylib
> sudo port clean libusb
> sudo port install libusb +universal 
```

基本上，Mac 安装说明需要更新，并且应该包含一个警告，即短安装可能会留下需要在使用端口安装之前删除的文件。

# sql - 返回包含在 Active Record 中的多个模型

> ID：14948318
> 
> 赞同：1
> 
> 时间：2013-02-19T01:29:28.713
> 
> 标签：sql, ruby-on-rails, ruby-on-rails-3, rails-activerecord

我有两个模型，邀请和回复。一个邀请有多个 rsvps，而 rsvp 属于一个邀请。我想运行一个查询，该查询将返回所有邀请以及属于每个邀请的 rsvps。我想拥有属于邀请和 rsvp 的所有属性。我知道包含并一直在尝试诸如

```
@results = RSVP.where(user_id: 3).includes(:invitation) 
```

但我只返回了 RSVP 的属性。理想情况下，我希望将 RSVP 所属的邀请属性添加到结果中。我错过了什么概念，或者我应该以不同的方式思考这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:05:04.767

让我们假设`Invitation`模型有两个字段`event_name`，`event_date`并且您希望在查询结果中访问。如果提供`joins`子句，您可以自定义选择列表。

```
RSVP.select("rsvps.*, invitations.event_name invitation_event_name, 
  invitations.event_date invitation_event_date"
).where(user_id: 3).joins(:invitation).each do |rsvp|    
  puts rsvp.invitation_event_name, rsvp.invitation_event_date
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:37:32.833

`RSVP.where(...)`有或没有`includes(...)`将返回一个`RSVP`对象的集合。通过包含`:invitation`each`RSVP`具有的关联，您可以一次急切地加载集合中`:invitation`的每个`RSVP`。当您引用它的关联时，这可以防止为集合中的每个运行单独的`SELECT * FROM invitations WHERE ...`查询。`RSVP``:invitation`

`.includes`如果您计划对集合中的对象使用关联，那只不过是一种查询优化。它不会**将**关联中的属性合并到结果集中的模型实例中。

如果你想将一个属性从关联**的**实例中`Invitation`包含进来，你可以使用 Rails方法。你可以在**[这里](http://apidock.com/rails/Module/delegate)**阅读。**`RSVP``delegate`**

 **在你的`RSVP`模型上，你会做这样的事情，列出所需的属性来`Invitation`代替我在下面留下的占位符。

```
class RSVP < ActiveRecord::Base

  has_one :invitation

  delegate :some_invitation_attribute, :another_invitation_attribute, to: :invitation 
```

现在您可以直接在实例上调用`:some_invitation_attribute`和。`:another_invitation_attribute``RSVP`

```
@results = RSVP.where(user_id: 3).includes(:invitation)
puts @results.first.some_invitation_attribute # delegates the .some_invitation_attribute method call to the associated Invitation 
```**

# java - if else 语句中的意外结果

> ID：14948320
> 
> 赞同：0
> 
> 时间：2013-02-19T01:29:29.277
> 
> 标签：java, if-statement, joptionpane

我是一个初学者，所以我得到的结果是我的 if else 语句的一个条件让我大吃一惊。除了 QtyCalc 变量 >= 100 的情况外，一切正常。 Finprice 变量被列为磁盘变量，我不知道为什么。帮助？

```
import javax.swing.JOptionPane;
public class SoftwareSales {
    public static void main(String[] args) {
        final int price = 99;
        String Qty;
        double QtyCalc, preprice, Finprice, disc;

        Qty = JOptionPane.showInputDialog(null, "How many packages will you buy?");
        QtyCalc = Double.parseDouble(Qty);
        preprice = QtyCalc * price;

        if (QtyCalc >= 100) {
            disc = (preprice * (0.5));
            Finprice = (preprice - disc);
            JOptionPane.showMessageDialog(null, "Your discount is: " + disc + ".\n" + "Your final price is: " + Finprice + ". ");
        } else if (QtyCalc >= 50 && QtyCalc <= 99) {
            disc = (preprice * 0.4);
            Finprice = (preprice - disc);
            JOptionPane.showMessageDialog(null, "Your discount is: " + disc + ".\n" + "Your final price is: " + Finprice + ". ");
        } else if (QtyCalc >= 20 && QtyCalc <= 49) {
            disc = (preprice * 0.3);
            Finprice = (preprice - disc);
            JOptionPane.showMessageDialog(null, "Your discount is: " + disc + ".\n" + "Your final price is: " + Finprice + ". ");
        } else if (QtyCalc >= 10 && QtyCalc <= 19) {
            disc = (preprice * 0.2);
            Finprice = (preprice - disc);
            JOptionPane.showMessageDialog(null, "Your discount is: " + disc + ".\n" + "Your final price is: " + Finprice + ". ");
        } else if (QtyCalc < 10 && QtyCalc >= 1) {
            disc = 0;
            Finprice = 0;
            JOptionPane.showMessageDialog(null, "Sorry, there is no discount for purchases less than 10." + " Your price is: " + preprice);

        } else {
            JOptionPane.showMessageDialog(null, "You have entered an invalid number.");
        }
        disc = 0;
        Finprice = 0;

        System.exit(0);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:36:47.603

当数量 >= 100 时，最终价格等于折扣，因为折扣为 50% ...查看您发布的代码。尤其：

```
if (QtyCalc >= 100) {
    disc = (preprice * (0.5));
    Finprice = (preprice - disc);
    JOptionPane.showMessageDialog(null, "Your discount is: " + disc + ".\n" + "Your final price is: " + Finprice + ". ");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:37:21.877

没有奇怪的行为，只是简单的数学：

```
 disc = (preprice * (0.5));
        Finprice = (preprice - disc); 
```

您还应该考虑消除冗余代码：

```
import javax.swing.JOptionPane;
public class SoftwareSales {
    public static void main(String[] args) {
        final int PRICE = 99;
        String qty;
        double qtyCalc, preprice, finprice, disc;
        disc = 0;
        qtyCalc = 0;

        boolean invalid = false;
        do{
            invalid = false;
            qty = JOptionPane.showInputDialog(null, "How many packages will you buy?");
            if (qty == null){
                return;
            }
            try{
                qtyCalc = Double.parseDouble(qty);          
            }catch(NumberFormatException e){
                invalid = true;
            }
        }while(invalid);

        preprice = qtyCalc * PRICE;
        if (qtyCalc >= 100) {
            disc = (preprice * (0.5));
        } else if (qtyCalc >= 50 && qtyCalc <= 99) {
            disc = (preprice * 0.4);
        } else if (qtyCalc >= 20 && qtyCalc <= 49) {
            disc = (preprice * 0.3);
        } else if (qtyCalc >= 10 && qtyCalc <= 19) {
            disc = (preprice * 0.2);
        } else if (qtyCalc < 10 && qtyCalc >= 1) {
            disc = 0;
            finprice = 0;
            JOptionPane.showMessageDialog(null, "Sorry, there is no discount for purchases less than 10\. Your price is: " + preprice);
            return;
        } else {
            JOptionPane.showMessageDialog(null, "You have entered an invalid number.");
            return;
        }

        finprice = (preprice - disc);
        JOptionPane.showMessageDialog(null, String.format("Your discount is: %.2f.\nYour final price is: %.2f. ",disc,finprice));

    }
} 
```

还要记住变量的 java 约定：总是以小写字母开头。决赛总是大写

# c - 如何在c中重写linux命令

> ID：14948323
> 
> 赞同：0
> 
> 时间：2013-02-19T01:29:46.570
> 
> 标签：c, linux, command

我在课堂上的作业是将 cat 命令重写为程序。我已经写了很多代码，效果很好，但似乎教授希望我们只写“$ cat file1 file2”而不是“$ ./cat file1 file2”来执行我们的程序（不是shell命令） . Makefile 是这样写的：

```
CFLAGS=-std=c99 -pedantic -Wextra -Wall -O

all: cat

cat: cat.c 

clean:
       rm cat 
```

我正在浏览所有可用的笔记，但似乎找不到答案。我可以做些什么来通过我的程序重定向命令 cat ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:31:52.917

为此，您需要在 $PATH 中有 ./

```
export PATH=./:$PATH 
```

但似乎这些说明只是为以这种方式设置 $PATH 的人编写的

# exchangewebservices - Exchange 2010 客户端访问服务器版本与访问的资源不匹配邮箱服务器版本

> ID：14948326
> 
> 赞同：0
> 
> 时间：2013-02-19T01:30:25.280
> 
> 标签：exchangewebservices, exchange-server-2007, exchange-server-2010

我最近在 Exchange 2007 机器旁边安装了一台 Exchange 2010 机器。除了我已移至 2010 机器邮箱数据库的邮箱的外部 EWS 外，一切正常。

[当我在https://www.testexchangeconnectivity.com](https://www.testexchangeconnectivity.com)上为 Exchange2010 服务器上的邮箱运行 Microsoft Exchange Web 服务连接测试时，我收到消息：客户端访问服务器版本与访问资源的邮箱服务器版本不匹配。

但是，我可以使用本地交换服务器 2010 地址在内部访问邮箱。

如果我在 2007 服务器上对邮箱运行相同的测试，它就可以工作。

我不知道该怎么做才能解决这个问题。我的自动发现 URL 指向 Exchange 2010 机器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T08:23:44.007

我发现这是由 NAT 引起的。它仍然被设置为只去旧的交换服务器。一旦允许端口 443 和 25 进入新服务器，它就可以正常工作了。

# jquery - 过滤具有多个属性的骨干集合

> ID：14948328
> 
> 赞同：1
> 
> 时间：2013-02-19T01:30:39.113
> 
> 标签：jquery, backbone.js, underscore.js

伙计们，我有一个客人收藏。每个客人都有一个 inDate、一个 outDate 和占用床位的 id_beds。我正在尝试过滤所有客人同时满足以下陈述：

*   id_beds == 床
*   outDate <== 日期
*   inDate >== 日期

    ```
    App.Collections.Guests = Backbone.Collection.extend({
    url: 'guests/',
    model: App.Models.Guest,
    getBooking: function(bed, date){
    var gf = _.filter(this.models, function(model){
        // Get all Guests with id_beds = bed
            // && outDate < date && inDate <= date
    });

    console.log(gf);
    return gf;
    }
    }); 
    ```

现在，问题是，我不知道如何用这 3 个语句过滤掉集合。首先，不知道如何比较日期，因为它们是字符串并且看不到哪个大于另一个。其次，不知道使用超过 1 个参数进行过滤的逻辑将如何。

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T01:46:13.827

您快到了。由于您的日期是`YYYY-MM-DD`简单的字符串比较工作，并且您的过滤器函数应该`true`在满足三个条件时返回：

```
getBooking: function(bed, date) {
  var gf = this.models.filter(function(model) {
    return (
      model.get('outDate') > date &&
      model.get('inDate') <= date &&
      model.get('id_beds') === bed
    )
  })
  // ...
  return gf
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T14:37:19.013

嗨，这里是使用主干过滤集合的简单解决方案

首先在您的收藏中，您应该有一个过滤功能 Like

```
 App.Collections.Guests = Backbone.Collection.extend ({
  filtered : function ( ) { 
```

我建议使用 UnderScore 过滤器，它将为有效返回 true，为无效返回 false，其中 true 是您要查找的内容。使用 this.models 获取当前集合模型 使用 model.get( '' ) 获取要检查的元素

```
var results = _.filter( this.models, function ( model ) {           
        if ( model.get('id_beds') == bed 
           && model.get('outDate') < date
           && model.get('inDate ') < date ) 
        return true ; 
        return false ;
    }); 
```

然后使用下划线映射您的结果并将其转换为 JSON

```
results = _.map( results, function( model ) { return model.toJSON()  } ); 
```

最后返回一个只有结果的新主干集合

```
return new Backbone.Collection( results ) ; 
```

或者，如果您不想保留集合中的所有数据，而只想保留已过滤的数据，则应重置集合并跳过上面的返回，例如

```
this.reset( results ) ; 
```

# php - 在 Laravel 4 中访问包控制器

> ID：14948329
> 
> 赞同：11
> 
> 时间：2013-02-19T01:30:43.043
> 
> 标签：php, laravel, laravel-4

我[按照 Laravel 4 文档中的“创建包”说明创建了一个包](http://four.laravel.com/docs/packages#creating-a-package)。创建包后，我创建了一个“控制器”文件夹和一个路由文件。新的文件结构是：

```
/src
    /Vendor
        /Package
            PackageServiceProvider.php
    /config
    /controllers
    /lang
    /migrations
    /views
    routes.php
/tests
/public 
```

我将路由文件添加到包服务提供商的引导部分：

```
public function boot()
{
    $this->package('vendor/package');
    include __DIR__ . '/../../routes.php';
} 
```

然后在路由文件中添加一个基本路由：

```
Route::get('/package', function() {
    return "Package route test";
}); 
```

在指定路径 (app.dev/package) 访问我的应用程序会返回预期的结果：

```
Package route test 
```

然后向路由添加一个基本的控制器调用（使用默认的 Laravel 控制器，“HomeController”）就可以了：

```
Route::get('/package', 'HomeController@showWelcome'); 
```

然后我按照[这个 SO answer](https://stackoverflow.com/a/14667793/200518)为包设置控制器。我将 src/controllers 文件夹添加到 Composer 类映射中，然后我转储了自动加载器并检查了 vendor/composer/autoload_classmap.php 并发现该类已被 Composer 成功加载：

```
<?php

// autoload_classmap.php generated by Composer

$vendorDir = dirname(__DIR__);
$baseDir = dirname($vendorDir);

return array(
    'HomeController' => $baseDir . '/src/controllers/HomeController.php',
); 
```

现在我使用命名空间将新的包控制器添加到路由中：

```
Route::get('/package', 'Vendor\Package\Controllers\HomeController@showWelcome'); 
```

但这会产生一个关于找不到类的错误：

```
ReflectionException: Class Vendor\Package\Controllers\HomeController does not exist 
```

我也尝试过使用包名来调用它：

```
Route::get('/package', 'Package::HomeController@showWelcome'); 
```

这会产生相同的错误：

```
ReflectionException: Class Vendor\Package\Controllers\HomeController does not exist 
```

无论我尝试什么，包都无法访问它自己的控制器，作曲家确认已加载（通过查看 vendor/package/autoload_classmap.php）。

有任何想法吗？我不确定问题是否是作曲家没有加载类，我不确定从哪里开始调试问题。我创建了另一个包并在这里重复了这些步骤并得到了同样的问题。

我可以从包和应用程序访问包视图，例如：

```
View::make('package::view'); 
```

问题似乎在作曲家加载控制器和 Laravel 能够访问它之间。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-19T03:03:21.207

错误是在路由中包含控制器路径。我有以下内容：

```
Route::get('/package', 'Vendor\Package\Controllers\HomeController@showWelcome'); 
```

正确的用法是：

```
Route::get('/package', 'Vendor\Package\HomeController@showWelcome'); 
```

使用控制器中包含的命名空间：

```
namespace Vendor\Package; 
```

控制器应延长照明：

```
\Illuminate\Routing\Controllers\Controller 
```

仍然不能使用包名（例如：Package::HomeController@showWelcome），但我可以使用命名空间。耶。

问题解决了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T12:46:58.887

您可以尝试编辑您的 Vendor/Package/composer.json 并将控制器目录插入到 autoload/classmap：

```
....
"autoload": {
    "classmap": [
        "src/migrations",
        "src/controllers",
        "src/models"
    ],
    "psr-0": {
        "Package\\Controller": "src/"
    }
}
.... 
```

之后，打开您的终端并从您的包根目录执行**composer dump-autoload**

为我工作...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-10T04:12:45.733

看看这篇 git 文章可能会有所帮助 [https://github.com/jaiwalker/setup-laravel4-package](https://github.com/jaiwalker/setup-laravel4-package)

# vb.net - 如何在 Visual Basic 2010 中为运行时创建的控件创建单击事件？

> ID：14948332
> 
> 赞同：3
> 
> 时间：2013-02-19T01:30:58.687
> 
> 标签：vb.net

我在运行时向我的表单添加了一些控件，我需要它们在单击时调用一个函数。我不知道会添加多少控件，但它们都需要运行相同的功能。我将如何定义事件？我可以根据给定类的所有控件定义事件吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T01:58:43.113

一个简单的例子：

```
Public Class Form1

    Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load
        ' creating control
        Dim btn1 As Button = New Button()
        Dim btn2 As Button = New Button()

        btn1.Parent = Me
        btn1.Name = "btn1"
        btn1.Top = 10
        btn1.Text = "Btn1"

        btn2.Parent = Me
        btn2.Name = "btn2"
        btn2.Top = 50
        btn2.Text = "Btn2"

        'adding handler for click event
        AddHandler btn1.Click, AddressOf HandleDynamicButtonClick
        AddHandler btn2.Click, AddressOf HandleDynamicButtonClick

    End Sub

    Private Sub HandleDynamicButtonClick(ByVal sender As Object, ByVal e As EventArgs)
        Dim btn As Button = DirectCast(sender, Button)

        If btn.Name = "btn1" Then
            MessageBox.Show("Btn1 clicked")
        ElseIf btn.Name = "btn2" Then
            MessageBox.Show("Btn2 Clicked")
        End If

    End Sub
End Class 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:02:53.147

简单地：

```
AddHandler Control.Event, AddressOf MethodExecuting 
```

例如：

```
AddHandler Button1.Click, AddressOf ClickMethod 
```

# java - 将表单上的两个不同值传递给 servlet？

> ID：14948333
> 
> 赞同：-2
> 
> 时间：2013-02-19T01:31:02.960
> 
> 标签：java, html, jsp, servlets

给定以下 HTML：

```
<form action="" name="<%=rs.getString(1)%>" method="post">
    <select name="opcao">
        <option value="Did not like">Did not like</option>
        <option value="Ok">Ok</option>
        <option value="Liked" selected="selected">Liked</option>
        <option value="Loved!">Loved!</option>
    </select>
</form> 
```

是否可以将表单的名称和从选择标记获取到相同的 servlet 作为不同的参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:38:42.733

HTML 表单名称未作为请求的一部分提交。虽然如果你愿意，你可以作为表单隐藏字段传递，如下所示：

```
 <form name="myForm" action="/my_servlet">
   <input type="hidden" name="htmlFormName" value="myForm"/>
    .... 
```

但是，如果您有两个表单字段，那么它们将被传递给 servlet，并且可以使用`request.getParameter("fieldName")`servlet 内部的方法进行访问。

# c - cython中的结构中的结构

> ID：14948335
> 
> 赞同：1
> 
> 时间：2013-02-19T01:31:12.403
> 
> 标签：c, struct, cython

在 cython 中，我需要做一个带有父子节点的系统（对于 kdtree ）。我试试这个：

```
cdef struct Node:
    int id
    Node *left_child
    Node *right_left 
```

但是我得到一个结构不能包含自身的错误。我可以在 python 中做到这一点，所以我认为 cython / C 是可能的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-28T13:57:00.717

Cython 允许前向定义，因此：

```
cdef struct Node

cdef struct Node:
    int id
    Node *left_child
    Node *right_left 
```

您可能已经知道这一点，但是 Scipy 在[纯 Python](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.KDTree.html)和[Cython](http://docs.scipy.org/doc/scipy/reference/generated/scipy.spatial.cKDTree.html)中有非常好的 kdtree 实现。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T01:39:33.710

我对 cython 或 cdef 不熟悉——所以就这样吧；你试过这样做吗？

```
cdef struct Node:
    int id
    struct Node *left_child
    struct Node *right_left 
```

# google-maps-api-3 - getpaths() 多边形谷歌地图 API

> ID：14948337
> 
> 赞同：5
> 
> 时间：2013-02-19T01:31:25.100
> 
> 标签：google-maps-api-3, latitude-longitude, polygons

我正在尝试检索折线和多边形的纬度坐标。在完成任一对象的绘制后，我想将 latlng 存储在数据库中，但现在我只是试图在 textarea 中显示 latlng。对于标记、矩形和圆形，我已经很容易做到这一点，但是折线和多边形的术语让我感到困惑。当我完成绘图时，我使用 addDomListener(drawingManager, 'polygoncomplete', ... 用于多边形，然后遍历我绘制的所有多边形。对于每个多边形，然后遍历其坐标数组。我搜索了这个论坛数据库并在 Google 文档页面上尝试了百慕大三角示例 [。](https://google-developers.appspot.com/maps/documentation/javascript/examples/polygon-arrays) 我已经阅读了很多次文档，只是看不到我缺少什么。任何帮助表示赞赏。

```
//Save polygons data to text area
                var polygons = [];

                google.maps.event.addDomListener(drawingManager, 'polygoncomplete', function(polygon) {
                  polygons.push(polygon);
                });

                google.maps.event.addDomListener(savebutton, 'click', function() {
                    document.getElementById("savedatapolygon").value = "";
                    for (var i = 0; i < polygons.length; i++) {
                      var polygonBounds = polygons[i].getPath();
                      var xy;
                        // Iterate over the polygonBounds vertices.
                        for (var i = 0; i < polygonBounds.length; i++) {
                            xy = polygonBounds.getAt(i);
                            contentString += '<br>' + 'Coordinate: ' + i + '<br>' + xy.lat() +',' + xy.lng();
                        }
                      document.getElementById("savedatapolygon").value += "polygon(";
                      document.getElementById("savedatapolygon").value += contentString;
                      document.getElementById("savedatapolygon").value += ")";

                    }
        }); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-19T21:53:23.650

[Google Maps Polygon](https://developers.google.com/maps/documentation/javascript/reference#Polygon)类返回一个[MVCArray](https://developers.google.com/maps/documentation/javascript/reference#MVCArray)。您需要使用[MVCArray](https://developers.google.com/maps/documentation/javascript/reference#MVCArray)`forEach`的方法来循环它。

```
var polygonBounds = polygons[i].getPath();
// Iterate over the polygonBounds vertices.
polygonBounds.forEach(function(xy, i) {
  contentString += '<br>' + 'Coordinate: ' + i + '<br>' + xy.lat() +',' + xy.lng();
});
document.getElementById("savedatapolygon").value += "polygon(";
document.getElementById("savedatapolygon").value += contentString;
document.getElementById("savedatapolygon").value += ")"; 
```

# android - 如何使用 Android uiautomator 填写密码 EditText？

> ID：14948341
> 
> 赞同：8
> 
> 时间：2013-02-19T01:31:59.000
> 
> 标签：android, ui-automation, android-testing, android-uiautomator

uiautomator 是否可以选择密码 EditText？我通过他们的 android:hint 属性找到其他 EditText 视图没有问题，但是 uiautomatorviewer 将所有密码字段显示为 NAF。我尝试设置密码字段内容描述，但也没有用。

如果不可能，您如何设置测试人员手动输入密码的超时时间？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-31T11:13:18.380

我对 API v16 有同样的问题。今天我用 v17 (Android 4.2) 尝试了我的脚本，它就像一个魅力。似乎第一个版本`uiautomator`有一些重大错误。

这是我的代码：

```
// click the admin button
new UiObject(new UiSelector().text("admin")).click();
// set pwd text
new UiObject(new UiSelector().description("pwdEditText")).setText("admin");
// click login button
new UiObject(new UiSelector().description("loginButton")).click(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-26T11:12:55.670

有时，您`View`的 s 不会有`ResourceId`，例如您需要以编程方式在`WebView`. IE

```
// Fetch the EditText within the iOrder Webpage.
final UiObject lUiObject = UiDevice.getInstance(getInstrumentation()).findObject(new UiSelector().className(EditText.class).textContains("Enter Loyalty Code")); 
```

在这种情况下，我们需要使用`UiSelector`类来动态搜索`EditText`; 但是，您会发现返回`Matcher<View>`的方法与方法不兼容`onView(with(...))`。

使用 时`UiSelector`，您可以`UiDevice`使用以下方法利用对以编程方式伪造按键的引用：

```
/* Declare the KeyCodeMap. */
private static final KeyCharacterMap MAP_KEYCODE = KeyCharacterMap.load(KeyCharacterMap.VIRTUAL_KEYBOARD);

/** Simulates typing within a UiObject. The typed text is appended to the Object. */
private final void type(final UiObject pUiObject, final String pString, final boolean pIsSimulateTyping, final boolean pIsClearField) throws Exception {
    // Fetch the Instrumentation.
    final Instrumentation lInstrumentation = getInstrumentation();
    // Fetch the UiDevice.
    final UiDevice        lUiDevice        = UiDevice.getInstance(lInstrumentation);
    // Are we clearing the Field beforehand?
    if(pIsClearField) {
        // Reset the Field Text.
        pUiObject.setText("");
    }
    // Are we going to simulate mechanical typing?
    if(pIsSimulateTyping) {
        // Click the Field. (Implicitly open Android's Soft Keyboard.)
        pUiObject.click();
        // Fetch the KeyEvents.
        final KeyEvent[] lKeyEvents = SignUpTest.MAP_KEYCODE.getEvents(pString.toCharArray());
        // Delay.
        lInstrumentation.waitForIdleSync();
        // Iterate the KeyEvents.
        for(final KeyEvent lKeyEvent : lKeyEvents) {
            // Is the KeyEvent a Release. (The KeyEvents contain both down and up events, whereas `pressKeyCode` encapsulates both down and up. This conditional statement essentially decimates the array.)
            if(lKeyEvent.getAction() == KeyEvent.ACTION_UP) {
                // Press the KeyEvent's corresponding KeyCode (Take account for special characters).
                lUiDevice.pressKeyCode(lKeyEvent.getKeyCode(), lKeyEvent.isShiftPressed() ? KeyEvent.META_SHIFT_ON : 0);
                // Delay.
                lInstrumentation.waitForIdleSync();
            }
        }
        // Close the keyboard.
        lUiDevice.pressBack();
    }
    else {
        // Write the String.
        pUiObject.setText(pUiObject.getText() + pString);
    }
    // Delay.
    lInstrumentation.waitForIdleSync();
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-04-04T14:09:58.037

我只是通过 id 找到它们：

```
onView(withId(R.id.input_password)).perform(typeText("password")); 
```

我看到 UI Automator Viewer 现在还显示了 resource-id 属性，如果您无权访问代码，这将很有用。

# jquery - Flickr Json 不同大小

> ID：14948345
> 
> 赞同：0
> 
> 时间：2013-02-19T01:32:20.780
> 
> 标签：jquery, api, flickr

我正在为我的网站构建一个自定义小部件，获取 flickr 照片。此代码工作正常，但我需要获取小尺寸 320x240 而不是 240x180。

```
jQuery(document).ready(function($){
                $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?ids=<?php print $flickrid; ?>lang=en-us&format=json&jsoncallback=?", function(data){
                      $.each(data.items, function(index, item){
                            $("<img/>").attr("src", item.media.m).appendTo(".slides_container")
                      });
                    });
            }); 
```

它目前正在获取“_m”大小，我需要的是“_n”，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:16:31.590

轻松搞定，昨晚肯定累了。

对于其他寻找这个的人，只需更改

```
("src", item.media.m) 
```

至

```
("src", item.media.m.replace('_m', '_n')) 
```

_n 是您希望获取的大小。

# iphone - 多个 UIButton 以不同的 UIButton 名称垂直显示

> ID：14948349
> 
> 赞同：-2
> 
> 时间：2013-02-19T01:33:00.773
> 
> 标签：iphone, ios, uiview, uibutton

我有 3 个不同的按钮，我正在使用 for 循环在我的 UIView 中显示它。问题是，只显示了一个按钮。

```
float yButton = 50.0;

for (int i = 0; i < 2; i++) {
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    button.frame = CGRectMake(80.0, yButton + 70.0, 160.0, 40.0);
    [button addTarget:self action:@selector(buttonClicked:) forControlEvents:UIControlEventTouchDown];
    [self.view addSubview:button];
    [button setTag:i];
} 
```

另外，如何将按钮标题设置为 A、B 和 C（因为只有 3 个按钮）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:38:55.653

您为所有按钮提供相同的框架。您需要增加`y`原点。

在循环结束时，执行以下操作：

```
yButton += 50; // pick a value that meets your needs. 
```

要设置标题，请创建一个包含三个标题的数组：

```
NSArray *titles = @[ @"A", @"B", @"C" ]; 
```

然后在循环中：

```
[button setTitle:titles[i] forState:UIControlStateNormal]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T01:37:49.420

你给所有按钮相同的框架：

```
telcoButton.frame = CGRectMake(80.0, yButton + 70.0, 160.0, 40.0); 
```

你可能想要这样做：

```
telcoButton.frame = CGRectMake(80.0, (yButton * i) + 70.0, 160.0, 40.0); 
```

# php - 如何将 PHP preg_match 用于冒号和句点之间的文本？

> ID：14948352
> 
> 赞同：2
> 
> 时间：2013-02-19T01:33:19.530
> 
> 标签：php, regex, preg-match

我有这个字符串：

```
$style = "width:87.0%;"; 
```

如何使用 PHP preg_match() 从中提取“87”？对于我的一生，我无法在正则表达式周围得到我的头套:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T01:34:34.357

```
preg_match('/:(.*?)\./', $style, $matches);
echo $matches[1]; 
```

这`?`使得正则表达式不情愿/不贪婪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:38:10.817

```
preg_match('~:(\d+)\.~', 'width:87.0%;', $m);
print_r($m);
print $m[1]; // 87 
```

`\d`只有数字，`+`一次或多次，`()`将其分组（捕获）以供以后使用。

# android - 存储片段以处理屏幕旋转变化

> ID：14948355
> 
> 赞同：2
> 
> 时间：2013-02-19T01:33:38.880
> 
> 标签：android, fragment, screen-rotation

我有一个由一个活动和 3 个片段组成的应用程序。该活动创建一个菜单，其中包含创建适当片段的按钮。我的代码在没有屏幕旋转的情况下完美运行，但是当我旋转屏幕时它会中断。

`setRetainInstance(true)`创建片段时，我的第一次尝试没有包括调用。我发现的问题是，在两次替换片段后（一个片段保留在后堆栈上），如果我旋转屏幕，我会在当前未显示的片段中得到一个空指针异常。**编辑：请注意，空指针异常在`setOnItemClickListener`下面显示的调用中。 `lv`在`onCreateView()`方法中声明。**

我的第二次尝试，我`setRetainInstance(true)`在创建片段时包含了一个调用。这解决了第一个问题。但是，我的片段之一是 a `ListFragment`，当我旋转屏幕时，`OnItemClickListener`似乎不再设置。这是我设置监听器的代码：

```
ListAdapter adapter = new SimpleAdapter(getActivity(),
        gameslist, R.layout.list_object,
        new String[] { TAG_ID, TAG_NAME, TAG_LOCATION, TAG_CREATED },
        new int[] { R.id.id, R.id.name, R.id.location, R.id.created_date });
setListAdapter(adapter);
lv.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0,
                View arg1, int position, long arg3) {
            // ...
        }
}); 
```

这个问题的任何想法或解决方案？我对如何使用片段进行设计的理解完全关闭了吗？

谢谢你的帮助！

编辑：另外，只是为了我的理解，在代码中重新创建的片段在哪里？它们不在`oncreate()`我活动的功能范围内。谢谢！

弄清楚了！我在 onCreate() 函数中调用 AsyncTask，该函数在屏幕旋转时被调用。但是，我在 onCreateView() 函数中声明了 lv，在创建视图之前不会调用该函数。空指针异常！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:50:31.360

你的片段中实现了 onCreate(...) 和 onResume() 和 onCreateView(...) 吗？

适配器代码在这三个中的哪一个？

# c++ - 我可以缩短这个 istream 函数吗？

> ID：14948356
> 
> 赞同：0
> 
> 时间：2013-02-19T01:33:49.833
> 
> 标签：c++, istream

```
friend istream& operator>>(istream &is, Complex &c) {
    int re;
    int im;

    is >> re >> im;
    c.setReal(re);
    c.setImaginary(im);

    return is;
} 
```

有什么办法可以做到这一点是一两行？也许像，

```
is >> setReal() >> setImaginary(); 
```

这些函数虽然需要一个 int，但我不知道我将如何编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:17:42.273

鉴于您的函数是 a `friend`，它可以访问所有类的数据成员。我假设您对每个实部和虚部都有一个数据成员，因此您可以更改代码以避免设置函数：

```
friend istream& operator>>(istream &is, Complex &c)
{
    return is >> c.re_ >> c.im_;  // or whatever you've called the data members...
} 
```

作为一般准则，最好通过公共接口，即使是冗长的，因为这意味着您不必仅仅因为您更改了一些私有实现细节（例如重命名这些成员变量或将您的类更改为是一个库的复杂类的包装器），但如果你在这里更看重简洁，那么这就是你的选择。

顺便说一句/-Kerrek 的评论是正确的：您的代码没有正确失败。如果实数或虚数转换失败，您可能需要考虑要让 Complex 对象和流处于什么状态......

# android - 从活动中调用片段中的方法时菜单项为空

> ID：14948357
> 
> 赞同：2
> 
> 时间：2013-02-19T01:33:53.293
> 
> 标签：android, android-actionbar, android-viewpager, menuitem

我的应用程序使用`ViewPager`纵向模式和横向双片段布局。

我正在尝试启动一个`AsyncTask`, 即 in the `Fragment`, from `Activity`。`AsyncTask`通常从 中的菜单项启动，`Actionbar`但我需要从`Activity`.

菜单项是一个`ImageView`，我在`AsyncTask`运行时对其进行动画处理。我的代码在双片段横向视图中运行良好，但是`NullPointerException`在纵向模式下我在菜单项上得到了一个。

**活动**

```
public class Main extends SherlockFragmentActivity
{
    private static List<Integer> mIds;
    private static SparseArray<Fragment> mPageReferenceMap = new SparseArray<Fragment>();

    @Override
    public void onCreate(final Bundle icicle)
    {    
        super.onCreate(icicle);

        setContentView(R.layout.main);

        mViewPager = (ViewPager)findViewById(R.id.viewpager); //view pager exists, so we are using the portait layout

        if (mViewPager != null)
        {
            mIds = new ArrayList<Integer>();

            mIds.add(0);
            mIds.add(1);
            mIds.add(2);

        }
        else //in landscape
        {           
            ListFragment lf = (ListFragment)getSupportFragmentManager().findFragmentById(R.id.fragmentList);

            if (lf == null)
                lf = new ListFragment();

            DetailFragment df = (DetailFragment)getSupportFragmentManager().findFragmentById(R.id.fragmentDetail);

            if (df == null)
            {
                df = new DetailFragment();
                df.setArguments(getIntent().getExtras());   
            }

            getSupportFragmentManager().beginTransaction().add(R.id.fragmentList, lf).commit();
            getSupportFragmentManager().beginTransaction().add(R.id.fragmentDetail, df).commit();

        }

        final MyFragmentPagerAdapter fpa = (MyFragmentPagerAdapter)mViewPager.getAdapter();
        ListFragment lf2 = (ListFragment)fpa.getFragment(0);

        //this works if I use:
        //(ListFragment)getSupportFragmentManager().findFragmentById(R.id.fragmentList);

        lf2.RunTask();
    }       

    private static class MyFragmentPagerAdapter extends FragmentStatePagerAdapter  {  

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }  

        @Override  
        public Fragment getItem(int index) {        
            if (index == 0)
            {
                ListFragment lf = ListFragment.newInstance();
                mPageReferenceMap.put(index, lf);
                return lf;
            }
            else
            {
                DetailFragment df = DetailFragment.newInstance(mIds.get(index-1));
                mPageReferenceMap.put(index, df);
                return df;
        }  

        public Fragment getFragment(int key) {
            return mPageReferenceMap.get(key);
        }

        public void destroyItem(View container, int position, Object object) {
            super.destroyItem(container, position, object);
            mPageReferenceMap.remove(position);
        }

        @Override
        public int getCount() {  
             return 4;
        }
   }  
} 
```

**分段**

```
public class ListingFragment extends SherlockListFragment
{
    private MenuItem refreshItem;

    public static ListingFragment newInstance() {

        ListingFragment lf = new ListingFragment();

        return lf;
    }

    @Override
    public void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setHasOptionsMenu(true);
    }   

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {

        return inflater.inflate(R.layout.listing_layout, container, false);
    }

    private void StartAnimation() {
       final LayoutInflater inflater = (LayoutInflater)getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
       final ImageView ivRefresh = (ImageView)inflater.inflate(R.layout.refresh_view, null);

       final Animation rotation = AnimationUtils.loadAnimation(getActivity(), R.anim.refresh);
       ivRefresh.startAnimation(rotation);

        //this is null
       refreshItem.setActionView(ivRefresh);
    }

    public void StopAnimation()
    {
        if (refreshItem != null && refreshItem.getActionView() != null) 
        {
            refreshItem.getActionView().clearAnimation();
            refreshItem.setActionView(null);
        }
    }

    public void RunTask()
    {
        new GetItems().execute();
    }

    private class GetItems extends AsyncTask<Void, Void, Void> 
    {
        @Override
        protected void onPreExecute() 
        {
          StartAnimation();
        }

        @Override
        protected Void doInBackground(Void... unused)
        {
            ...
        }

        protected void onPostExecute(final Void unused)
        {
            StopAnimation();
        }
    }

    @Override
    public void onCreateOptionsMenu(final Menu menu, final MenuInflater inflater) {
        inflater.inflate(R.menu.keyword_menu, menu);

        refreshItem = menu.findItem(R.id.get);

        super.onCreateOptionsMenu(menu, inflater);
    }

    @Override
    public boolean onOptionsItemSelected(final MenuItem item) 
    {
        if (item.getItemId() == R.id.get) {
            gi = new GetItems(getActivity(), null);
            gi.execute();
            return true;
        } else {
            return super.onOptionsItemSelected(item);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:11:29.367

我认为以下链接为您提供了有关如何避免空指针异常的答案。Fragment 的实例可能随时被系统重新创建，这就是为什么“持有对它们的引用”并不容易。您必须使用片段管理器。

[适配器实例与列表视图一起进入片段](https://stackoverflow.com/questions/14697436/adapter-instance-gone-in-fragment-with-listview)

# java - 使用 Tomcat 部署 Play 2.1 应用程序

> ID：14948358
> 
> 赞同：3
> 
> 时间：2013-02-19T01:33:59.027
> 
> 标签：java, playframework-2.0, tomcat7

我有一个播放应用程序，我已使用[play2war](https://github.com/dlecan/play2-war-plugin)转换为 .war 文件，现在需要将其部署到 tomcat。

我必须将哪些文件移到我的 tomcat 中的 webapps 目录中，我需要解压缩 war 文件吗？

使用 Tomcat 7，仅供参考。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-11T07:37:28.537

评论中已经回答了这些问题。

使用“玩战争”，您可以生成战争文件。将此文件复制到 webapps 文件夹，tomcat 将对其进行解包。

[https://github.com/play2war/play2-war-plugin/wiki/Usage](https://github.com/play2war/play2-war-plugin/wiki/Usage)

[https://github.com/play2war/play2-war-plugin/wiki/Deployment](https://github.com/play2war/play2-war-plugin/wiki/Deployment)

# azure - json.net JsonConvert.DeserializeObjectAsync ISO 8601 日期

> ID：14948360
> 
> 赞同：0
> 
> 时间：2013-02-19T01:34:02.947
> 
> 标签：azure, json.net

编辑2：

我创建了一个 Windows phone 8 应用程序并包含 Microsoft.WindowsAzure.MobileServices；使用与原始问题中下面的违规代码相同的类，我创建了一条 json.net DID 成功反序列化的记录。

```
 [{"id":1,"DataLoggerName":"Ben Walkin","Time":"2013-02-19T18:39:51.733Z",
[{"id":1,"DataLoggerName":"JHANetDuino","Time":"2013-02-19T16:46:55.205K", 
```

重新阅读[ISO 8601 Wikipedia 文章](http://en.wikipedia.org/wiki/ISO_8601)，我现在将“K”解释为罪魁祸首。只有“Z”祖鲁时间是可以接受的。偏移量用数字表示。" *ISO 8601 中的时区表示为本地时间（未指定位置）、UTC 或与 UTC 的偏移量。* "

我将尝试为使用不受支持的 .dll 发布“K”.netmf 的客户端发布解决方案，以允许在 Azure 中创建表数据。

编辑1：

我在我的解决方案中包含了 json.net 以逐步解决错误并发现：

> 用户代码未处理 Newtonsoft.Json.JsonReaderException
> HResult=-2146233088 消息=无法将字符串转换为日期时间：2013-02-18T06:35:25.604K。路径“[0].Time”，第 1 行，位置 74。

原始问题

我有一个使用.php 构建的 Json 数据的 Windows 商店应用程序。我最近一直在增强它以与 Windows Azure 一起使用。我“拥有”代码并且可以更正它以对其他人有用并遵循“标准”为此我正在尝试标准化我的 Json，特别是 DateTime（让我感到困惑）

这是一个有效的 ISO 8601 日期吗？"Time":"2013-02-18T06:35:25.604K" 这不是有效的 ISO 8601 日期吗？“时间”：“2013-02-11 16:25:54”

有效日期在数据和时间之间有'T'，无效有''？

来自旧工作 .php 代码的数据

```
 [{"Time":"2013-02-11 16:25:54","Temperature0":"74.38478","Temperature1":"57.142857142857146"},{"Time":"2013-02-11 16:26:54","Temperature0":"74.38478","Temperature1":"57.753357753357754"}, 
```

来自新 Azure 崩溃代码的数据

```
 [{"id":1,"DataLoggerName":"JHA NetDuino","Time":"2013-02-18T06:35:25.604K","Temperature0":82.78388278388276,"Temperature1":0}, 
```

这是旧的工作代码，读取在我看来无效的 json ISO 8601 日期数据，因为日期和时间之间没有“T”。

```
 var strJson = await GetJsonHistoricalTemperatureData.GetHistoricalTemperatureData();
        return await JsonConvert.DeserializeObjectAsync<ObservableCollection<HistoricalTemperatureData>>(strJson);

        public class HistoricalTemperatureData
{
    public int Id { get; set; }
    public string DataLoggerName { get; set; }
    public DateTime Time { get; set; }
    public double Temperature0 { get; set; }
    public double Temperature1 { get; set; }
} 
```

如果我使用相同的代码读取 Azure 数据，我会在 json.net 上收到异常错误

```
 A first chance exception of type 'Newtonsoft.Json.JsonReaderException' occurred in mscorlib.dll 
```

从我读过的所有内容来看，该应用程序似乎不应该使用原始日期数据，而应该使用新的 Azure 数据。按照 ISO 8601 格式，Azure 数据似乎更正确。我想对齐我的旧 .php 代码来生成这个（很容易完成）并*修复*Windows 商店应用程序以正确反序列化 Json。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:40:43.673

重新阅读[ISO 8601 Wikipedia](http://en.wikipedia.org/wiki/ISO_8601)文章，我现在将“K”解释为罪魁祸首。只有“Z”祖鲁时间是可以接受的。偏移量用数字表示。*“ISO 8601 中的时区表示为本地时间（未指定位置）、UTC 或与 UTC 的偏移量。”*

# android - 如何初始化上下文？

> ID：14948362
> 
> 赞同：3
> 
> 时间：2013-02-19T01:34:47.747
> 
> 标签：android, android-context

这是一个非常愚蠢的问题，但我在 Context context = ...

只需声明它将其设置为 null，我需要为我的应用程序使用上下文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T02:38:20.410

您不能实例化 Context 对象。这是由系统控制的。然而，每个应用程序都有一个上下文，每个活动都是一个上下文，所以你有几个方法来获取一个上下文对象的指针：

1.  将一个Activity对象的指针赋值给Context对象指针（即使用this关键字）

2.  Activity 类有一个名为 getApplicationContext() 的方法，该方法检索指向 Application 包含的 Context 对象的指针。

# html - 外部 css 链接在 IE 网站页面中不起作用

> ID：14948363
> 
> 赞同：0
> 
> 时间：2013-02-19T01:34:47.933
> 
> 标签：html, css, stylesheet

我似乎在链接我的 CSS 样式表时遇到了一个有趣的问题。对于 chrome、firefox 和其他任何页面上的每个页面，在我的网站 css 上一切都运行良好。但由于某种原因，IE 中的 1 页显示很奇怪。我对网站上的几乎每个页面都使用相同的样式表，但它不能在 IE 上的一页上工作。

在 IE 上自己检查一下。这是运行良好的主页[http://www.sentinelgaming.net](http://www.sentinelgaming.net)

然后在论坛页面上它搞砸了。[http://www.sentinelgaming.net/forums](http://www.sentinelgaming.net/forums)

同样，我在主页上使用与论坛相同的样式表。但是一页显示不同。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:18:19.003

论坛页面似乎无法加载此 css 文件：

[http://files.enjin.com/202624/general%20files/navbar%20css.css](http://files.enjin.com/202624/general%20files/navbar%20css.css)

这可能是因为第 740 行有第二个、、、`DOCTYPE`和标签。您应该删除所有这些并将 css 文件链接移动到页面顶部的正确标记。`html``head``body``head`

这应该有望解决您的问题。

# php - 如何通过 RewriteRule 读取源代码

> ID：14948364
> 
> 赞同：0
> 
> 时间：2013-02-19T01:35:01.287
> 
> 标签：php, apache, .htaccess, mod-rewrite

我想帮助解决这个问题

这个命令不好用，你能帮帮我吗

我的网站上有这个名称的新文件夹

“文本PHP”

我把这段代码放在.htaccess

RewriteRule ^(.*) /home/myhome/public_html/$1.php [L,T=text/plain]

我希望任何人进入该文件夹都可以从我的 php 文件中读取任何源

这行不通

我尝试 H=text/plain

我收到错误 500

我也尝试关闭 php_value 引擎 php_value 引擎关闭

不工作:(

它还有其他技巧吗

对不起我的英语太糟糕了：p

谢谢你的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:40:35.877

You don't specify the full path to the file in the rewrite rule, what you are specifiying is a new absolute URL or a URI relative to the web root. So if you want to make any URI go to a PHP file of teh same name, here is how you would do it:

```
RewriteEngine On
RewriteRule ^(.*) /$1.php [L] 
```

No need to specify `/home/myhome/public_html` here.

This is a basic example however, as typically, this is much too broad of a rule, as it would prevent you from serving up images or other actual files from the web root (they would all end up with `.php` appended to the. So assuming this is actually what you want, you would commonly see something like:

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*) /$1.php [L] 
```

This rule applies in cases when the URI does not match an actual filename or directory. Thus requests to `/some_file.php` would not be redirected to `/some_file.php.php`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:40:43.380

You can configure your webserver to show the source for `*.phps` files (e.g. make symlinks) with:

```
AddType application/x-httpd-php-source .phps 
```

Or to disable PHP processing for that directory completely use:

```
RemoveHandler .php 
RemoveType .php 
```

Alternatively or additionally with:

```
php_flag engine off 
```

On some setups (cgi / fastcgi) even:

```
Options -ExecCGI 
```

If you wanna use mod_rewrite, then write a wrapper script for displaying them via `readfile()` (and some basename() filtering for security) and apply it like:

```
RewriteRule ^(.+\.php)$ showsrc.php?file=$1 
```

# sql - 用于从两个表中检索数据的 sql 查询

> ID：14948365
> 
> 赞同：1
> 
> 时间：2013-02-19T01:35:05.043
> 
> 标签：sql, select, join

有两个表如下

员工表：`empid, empname, deptid`

部门表：`deptid, deptname`

然后将查询写入“列出部门名称=计算机的所有员工”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:37:52.860

这应该很简单，

```
SELECT  a.empid, a.empname, b.deptname
FROM    employee a
        INNER JOIN department b
            ON a.deptid = b.deptid
ORDER   BY  b.deptname, a.empname 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/ba05b/3)

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codeproject.com/Articles/33052/Visual-Representation-of-SQL-Joins)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-16T07:04:38.277

```
SELECT empname, deptname 
from employee, department
where employee.deptid=department.deptid
and department.deptname='computer'; 
```

根据表中的值，计算机必须区分大小写

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T01:38:27.757

```
SELECT e.empname, deptname
FROM employee e
    INNER JOIN department d
    ON e.deptid = d.deptid
GROUP BY emptname, deptname 
```

# php - 使用数组 php 更新 mysql 数据库字段

> ID：14948367
> 
> 赞同：0
> 
> 时间：2013-02-19T01:35:06.337
> 
> 标签：php, mysql, arrays

我试图在一次提交中实现多次更新。我有一个包含许多行的表，并且希望能够通过切换到下一个插入框来更新每一行中的一个字段。

因此，我的代码是：-//开始一个表 echo ' ';

```
//start header of table
echo '<tr>

<td width="60" align="center"><strong>Lab Item ID</strong></td>
<td width="60" align="center"><strong>Test Suite Name</strong></td>
<td width="60" align="center"><strong>Test Name</strong></td>
<td width="50" align="center"><strong>Result</strong></td>
</tr>';

//loop through all results
while ($row=mysql_fetch_object($sql)) {
    //print out table contents and add id into an array and email into an array
    echo '<tr>
    <td align="center"><input name="id[]" value='.$row->lab_item_id.' readonly> </td>
    <td align="center">'.$row->test_suite_name.'</td>
    <td align="center">'.$row->test_name.'</td>
    <td><input name="test_result[]" type="text" value="'.$row->test_result.'"></td>
    </tr>';
}

//submit the form

echo'<tr>
<td colspan="3" align="center"><input type="submit" name="Submit" value="Submit"></td>
</tr>
</table>
</form>';
//if form has been pressed proccess it
if($_POST["Submit"])
{

//get data from form
//$name = $_POST['name'];

//$_POST['check_number'] and $_POST['check_date'] are parallel arrays

foreach( $_POST['id'] as $id ) {
     $tresult = trim($_POST['test_result']);
      $query = "UPDATE tbl_lab_item SET test_result='$tresult' WHERE lab_item_id = '$id'";
      //execute query

}  
 print_r($_POST);
 var_dump($tresult);
//redirect user
$_SESSION['success'] = 'Updated';
//header("location:index.php");
}
?> 
```

当我打印 $_POST 数组时，一切都很好，但是变量为 Null。我知道我不能在多个数组上做一个 foreach （至少我不认为我可以）所以还有其他一些我想念的技巧吗？我不能走得太远，因为 $_Post 打印中有正确的数据。

顺便说一句，整个事情都是由查询生成的，所以我永远不知道我需要更新多少条记录。

我一直在查看这个（和其他）论坛，但似乎无法找到解决方案。我以为我理解数组，但现在我开始怀疑了！

编辑 - 这是 $tresult 变量不起作用。

非常感谢，杰森

编辑 2 月 21 日星期四（英国时间 05:41）感谢大家的意见。我现在已经解决了这个问题，您的集体建议有所帮助。最终破解它的代码是：-

```
//get data from form
$id1 = $_POST['id'];
$test_result1 = $_POST['test_result'];
foreach ($id1 as $key => $value){
$query = "UPDATE tbl_lab_item SET test_result='$test_result1[$key]' WHERE lab_item_id=$value ";
//execute query 
```

研究填充了哪些变量等以及填充了什么是关键。回到第一原则，不是吗？

祝大家欢呼。Ĵ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:17:58.533

实际上，您可以通过执行更简单（基本）形式的 for 循环来完成它：

```
//get data from form
//$name = $_POST['name'];

//$_POST['check_number'] and $_POST['check_date'] are parallel arrays

$numberOfData = count($_POST['id']);

for($index = 0; $index < $numberOfData; $index++)
{
     $id = $_POST['id'][$index];
     $tresult = trim($_POST['test_result'][$index]);
      $query = "UPDATE tbl_lab_item SET test_result='$tresult' WHERE lab_item_id = '$id'";
       //execute query

}
 print_r($_POST); 
```

我希望这有帮助。

干杯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T01:47:53.907

像这样更改查询：

```
 $query = "UPDATE tbl_lab_item SET test_result=$tresult WHERE lab_item_id = $id"; 
```

通过添加单引号 ' '，您可以告诉它以字符串的形式读取，而不是获取 var 的值。

**编辑**

用以下内容替换您的 foreach 循环并告诉我：

```
$id1 = $_POST['id'];
$test_result1 = $_POST['test_result'];

foreach( $id1 as $key => $value ) {
  $query = "UPDATE tbl_lab_item SET test_result='$test_result1[$key]' WHERE lab_item_id = '$key' ";

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T03:32:24.477

问题是您告诉 PHP 将输入字段构建为数组，但稍后将其视为字符串：

```
<td><input name="test_result[]" type="text" value="'.$row->test_result.'"></td>
                            ^^--- array

 $tresult = trim($_POST['test_result']);
                 ^^^^^^^^^^^^^^^^^^^^^--- no array key, so you're assigning the entire array

  $query = "UPDATE tbl_lab_item SET test_result='$tresult'
                                                ^^^^^^^^^^--- array in string context 
```

trim() 需要一个字符串，但是你传入一个数组，所以你会得到一个 PHP`NULL`和一个警告。然后那个 null 会被塞进你的 SQL 语句中，这就是你的问题。

# facebook-fql - facebook api - 列出我邀请参加活动的用户标识符

> ID：14948368
> 
> 赞同：1
> 
> 时间：2013-02-19T01:35:11.270
> 
> 标签：facebook-fql

我正在使用 facebook php api 使用画布为 facebook 编写应用程序。

我的问题：是否有可能（如果是，如何）从受邀参加活动的用户 i（或使用 AccessToken 授予我权限的用户）的 api 列表中获取？

当我使用 FQL 列出 event_members 表时，我没有得到邀请者或邀请者类型信息......

```
SELECT inviter,inviter_type,rsvp_status,uid FROM event_member WHERE eid = someeventid 
```

该查询以这些字段为空结束 - 从我读到的预期行为，因为它的私人日期 - 谁邀请了谁。

# post - IIS7.5 URL 重写：不要将 POST 转换为 GET

> ID：14948369
> 
> 赞同：4
> 
> 时间：2013-02-19T01:35:13.040
> 
> 标签：post, iis-7, url-rewriting, iis-7.5, url-rewrite-module

我有一组具有通用基本 uri 的 URI，其中相对 uri 的第一段需要转换为各种端口：

```
http://base-uri/service1/*  =>  http://base-uri:3000/service1/*
http://base-uri/service2/*  =>  http://base-uri:3001/service2/* 
```

GET 和 POST 都将定向到这些 URI。

是否可以配置 IIS 7.5 URL 重写规则，以便 POST 请求继续是 POST ？（即未翻译为 GET ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:47:46.877

您需要为此安装[应用程序请求路由](http://www.iis.net/downloads/microsoft/application-request-routing)模块。您不能重定向客户端，因为重定向意味着客户端应该执行的下一个请求是 GET。因此，您必须将请求代理到其他服务器/端口。

# php - 正则表达式替换，除非在评论

> ID：14948377
> 
> 赞同：0
> 
> 时间：2013-02-19T01:36:07.540
> 
> 标签：php, sql, regex, comments

我正在尝试编写一个 PHP 函数，它可以（给定一个带有命名 printf 样式参数的 SQL 查询和一个关联数组）用问号（对于 SQL 准备语句）替换命名参数并重新排列数组，以便参数是按照它们在查询中出现的顺序。

我编写了以下代码，它可以工作，但是我想扩展此代码以忽略出现在注释中的命名参数。

```
function sqlprintfn($sql, array $args = array()) {
    $ordered_args = array();
    static $formats = array('b','c','d','e','E','u','f','F','g','G','o','s','x','X');
    $regex = sprintf('/(\?\(([a-zA-Z_]\w*)\)([%s]))/', implode('', $formats));

    // Find the next named argument. Each search starts at the end of the previous replacement
    for ($pos = 0; preg_match($regex, $sql, $match, PREG_OFFSET_CAPTURE, $pos);) {
        $arg_pos = $match[0][1];
        $arg_len = strlen($match[0][0]);
        $arg_key = $match[2][0];
        $arg_format = $match[3][0];

        // Programmer did not supply a value for the named argument found in the format string
        if (!array_key_exists($arg_key, $args)) {
            trigger_error(sprintf('%s(): Missing argument \'%s\'', __FUNCTION__, $arg_key), E_USER_WARNING);
            return false;
        }
        array_push($ordered_args, $args[$arg_key]);

        // Replace the named argument with a question mark
        $sql = substr_replace($sql, $replace = '?', $arg_pos, $arg_len);
        $pos = $arg_pos + strlen($replace); // skip to end of replacement for next iteration
    }

    return array_merge((array) $sql, $ordered_args);
} 
```

作为我想要实现的一个例子：

```
$sql = 'SELECT id FROM users WHERE username = ?(username)s AND type = ?(type)s';
$params = array('type' => 'admin', 'username' => 'bob', email => 'bob@domain.com');
print_r(sqlprintfn($sql, $params)); 
```

应该输出：

```
Array
(
    [0] => 'SELECT id FROM users WHERE username = ? AND type = ?',
    [1] => 'bob',
    [2] => 'admin'
) 
```

和：

```
$sql = 'SELECT id FROM users WHERE /* email = ?(email)s AND */ username = ?(username)s AND type = ?(type)s';
$params = array('type' => 'admin', 'username' => 'bob', email => 'bob@domain.com');
print_r(sqlprintfn($sql, $params)); 
```

应该输出：

```
Array
(
    [0] => 'SELECT id FROM users WHERE /* email = ?(email)s AND */ username = ? AND type = ?',
    [1] => 'bob',
    [2] => 'admin'
) 
```

另外，请注意 $sql 变量可能是多行的。

# android - android应用程序使用带有多个条件的if else语句

> ID：14948378
> 
> 赞同：1
> 
> 时间：2013-02-19T01:36:22.627
> 
> 标签：android, conditional-statements, rules

Hye，我有一个问题，解决它有点困惑......我需要创建一个清单供用户在我的 android 应用程序中回答......它包含几个问题......例如，我有 5 个问题，用户需要通过选择回答单选按钮上的选项......所以基本上这个清单是检查用户是否被允许开车......

1）您是否受到药物的影响？//RG1, rbyes1, rbno1

```
O Yes       O No 
```

2) 你有驾照吗？//RG2, rbyes2, rbno2

```
O Yes       O No 
```

3）你有车吗？//RG3, rbyes3, rbno3

```
O YES       O No 
```

4) 你喝醉了吗？//RG4, rbyes4, rbno4

```
O Yes       O No 
```

5）你是色盲吗？//RG5, rbyes5, rbno5

```
O Yes       O No 
```

用户需要回答

1) **没有**

2) **是的**

3) **是的**

4) **没有**

5) **没有**

为了让用户有资格开车..

如果用户回答相反，系统应显示每个相反回答的原因。

这是我的示例代码

```
 If(RG1\. getCheckedRadioButtonId() == R.id.rbno1 &&
    RG2\. getCheckedRadioButtonId() == R.id.rbyes2 &&
    RG3\. getCheckedRadioButtonId() == R.id.rbyes3 &&
    RG4\. getCheckedRadioButtonId() == R.id.rbno4 &&
    RG5\. getCheckedRadioButtonId() == R.id.rbno5)
   {
      Toast.makeText(getApplicationContext(),”Congratz, you can drive”, Toast.LENGTH_LONG).show();
       } 
```

上面的代码是符合条件的用户的答案..如果用户这样回答怎么办

1) **没有**

2) **没有**

3) **是的**

4) **是的**

5) **没有**

所以，系统应该显示

```
{
 Toast.makeText(getApplicationContext(),”Sorry, you are not allow to drive because you have\n“+ 
  “2) No driving license\n” +
  “4) influenced of alcohol\n”, Toast.LENGTH_LONG).show();

  } 
```

这是我能做的一个想法..我需要创造每一种可能性吗？？？..因为对于实际的问题，我有10多个问题......所以，这意味着会有很多条件..而且由于条件太多，我也很困惑如何用代码编写它..希望你们理解我的意思并能帮助我……谢谢..！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:48:28.913

您不需要检查所有可能性。您只检查每个答案一次并跟踪错误消息，例如：

```
boolean canDrive = true;
ArrayList<String> errorMessages = new ArrayList<String>();
if(RG1.getCheckedRadioButtonId() == R.id.rbno1) {
     canDrive = canDrive && true;
} else {
     canDrive = false;
     errorMessages.add("Influenced of drugs");
}

if(RG2.getCheckedRadioButtonId() == R.id.rbyes2) {
     canDrive = canDrive && true;
} else {
     canDrive = false;
     errorMessages.add("No driving license");
}

// Check the rest of your answers 
```

在您的条件结束时，您将拥有`canDrive`反映用户回答结果的变量，并且您将拥有`errorMessages`列表中的所有错误消息，您可以循环并适当地显示这些消息。

尝试使您的代码更通用，考虑使用 Array of your `CheckedRadioButtons`，您可以使用存储每个问题的错误消息`checkBox.setTag()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:37:57.780

**解决方案 1：** 在我看来，您必须在数据库上创建以存储结果。

当您必须要求打印错误消息时，您必须触发简单的选择查询，结果为是。

然后打印您的信息

**解决方案2：**

如果是，您必须创建 arrayList 并存储结果值。

然后你必须找到arrayList的长度并输入你的条件并输入消息

# iphone - 将 UIView 转换为 UITableView

> ID：14948380
> 
> 赞同：0
> 
> 时间：2013-02-19T01:36:41.567
> 
> 标签：iphone, ios, objective-c, xcode

我以前做过，但我不知道我错过了什么。

我将该项目作为单个 View 项目启动。

然后将 ViewController 转换为从 UITableViewController 继承，如下所示：

```
 @interface ViewController : UITableViewController 
```

进入这个 ViewController 的 .xib 并将自定义类部分中的类从 UIView 更改为 UITableView：

![在此处输入图像描述](../Images/369e0e13e7e2f74f0e66092adca803e3.png)

查看我的其他项目，其中 ViewController 只是直接的 TableView 控制器，我看不出还有什么需要做的，但是当我运行应用程序或查看 xib 时，它没有显示 tableview。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T01:48:05.780

您需要在 Interface Builder 中拖出一个 UITableView 来替换 UIView。然后将 UITableViewDataSource 和 UITableViewDelegate 协议添加到您的视图控制器头文件中，并将数据源和委托出口从您的 UITableView 连接到 Interface Builder 中的视图控制器。

```
 @interface ViewController : UITableViewController <UITableViewDataSource, UITableViewDelegate> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:43:45.123

添加委托和数据源。我认为您忘记添加代表和数据源，这就是它不显示表格的原因。将以下行添加到您的 viewDidLoad()。

```
 self.myTableView.dataSource = self;
  self.myTableView.delegate = self; 
```

在这之后还实现了委托所需的方法，即

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
 return 1;
}

- (NSInteger) tableView:(UITableView *)tableView  numberOfRowsInSection:(NSInteger)section
{ 
 return
 10; 
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
//your code for cell data
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T02:34:45.340

您在 .m 文件中使用什么初始化方法。您需要使用

```
[[UITableViewController alloc] initWithStyle:UITableViewStylePlain] 
```

分配方法，并确保您已包含`<UITableViewDataSource, UITableViewDelegate>`相关的数据源和委托方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-24T03:43:22.383

行，

基本上，如果你想从头开始拥有一个 UITableViewController 而无需手动执行上述操作，只需创建一个新的 Obj-C 类，让它从 UITableViewController 继承，然后选择创建一个 xib，它会给你一个 viewcontroller 和视图已经连接到使用 UITableView：

![在此处输入图像描述](../Images/bed7a19da69ab082818eaf20b729a20a.png)

![在此处输入图像描述](../Images/0801dcda4916b73ff64616ce4e35ee9c.png)

# python - manytomany 的 django 管理表单域不工作

> ID：14948384
> 
> 赞同：0
> 
> 时间：2013-02-19T01:37:05.790
> 
> 标签：python, django

我在读这个

[https://docs.djangoproject.com/en/1.5/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_manytomany](https://docs.djangoproject.com/en/1.5/ref/contrib/admin/#django.contrib.admin.ModelAdmin.formfield_for_manytomany)

我正在尝试查询数据库，`like field`但出现错误

> FieldError：不允许加入字段“汽车”。您是否将查找类型的“喜欢”拼错了？

我正在使用的代码是

```
def formfield_for_manytomany(self, db_field, request, **kwargs):
        if db_field.name == "cars":
            kwargs["queryset"] = models.Cars.objects.filter(car_like="ford")
        return super(MyAdmin, self).formfield_for_manytomany(db_field, request, **kwargs) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:19:09.757

发布的代码不会引发此错误。如果您使用双下划线，它只会混淆连接`car__like`。[您应该查看 django 查询参考以获取确切的详细信息。](https://docs.djangoproject.com/en/dev/topics/db/queries/)

无论如何，[也许您正在寻找`__icontains`](https://docs.djangoproject.com/en/dev/ref/models/querysets/#std%3afieldlookup-contains)生成 LIKE 语句的方法？

```
Foo.objects.filter(some_field__icontains='ford') 
```

# android - 在 Android 应用中嵌入 YouTube HTML5 的问题

> ID：14948385
> 
> 赞同：0
> 
> 时间：2013-02-19T01:37:06.370
> 
> 标签：android, html, youtube

所以我今天在 SO 上进行了相当多的搜索，并取得了重大进展，但现在我遇到了一个我从未见过的问题。我已经使用 iframe 将 YouTube 视频嵌入到 HTML 文件中：

```
<body>
    <div align="center">
    <iframe class="youtube-player" type="text/html" width="480" height="320"
        src="http://www.youtube.com/embed/9DNAyD4ll6E?html5=1" frameborder="0">
    </div>
</body> 
```

我在我的活动中修改的 WebView 中显示它，如下所示：

```
 WebView welcomeWebView = (WebView) findViewById(R.id.welcomeVideo);
    welcomeWebView.setHorizontalScrollBarEnabled(false);
    welcomeWebView.setVerticalScrollBarEnabled(false);
    welcomeWebView.getSettings().setJavaScriptEnabled(true);
    welcomeWebView.loadUrl("file:///android_asset/welcome.html"); 
```

我遇到的问题是出现了静止图像显示和控件，但是当我单击播放时，我看到的是一个灰色屏幕，其中有一个胶片和播放图标。这是点击播放之前/之后的屏幕截图

[http://www.ptrprograms.com/youtubeapp.png](http://www.ptrprograms.com/youtubeapp.png)
[http://www.ptrprograms.com/youtubeapp2.png](http://www.ptrprograms.com/youtubeapp2.png)

如果有人以前看过这个或者可以指出我显示视频的正确方向，我会非常感激。谢谢！

编辑：我也知道我可以使用意图在 YouTube 应用程序中打开它，但我的客户（我捐赠此应用程序的非营利组织）非常具体地希望它嵌入到我们可以的页面中有一个文本视图，下面有更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:51:16.277

所以我放弃了 webview 的外部资产，而是决定将它加载到活动本身中，它似乎工作得更好（它实际上运行:)）

```
WebView webView = (WebView) findViewById(R.id.welcomeVideo);
    String play= "<html><body><div align=\"center\"> <iframe class=\"youtube-player\" type=\"text/html\" width=\"480\" height=\"320\" src=\"http://www.youtube.com/embed/9DNAyD4ll6E?rel=0\" frameborder=\"0\"></div></body></html>";
    webView.setWebChromeClient(new WebChromeClient() {
    });
    webView.getSettings().setJavaScriptEnabled(true);
    webView.loadData(play, "text/html", "utf-8");
    webView.setBackgroundColor(0x00000000); 
```

# sql - sql选择显示问题

> ID：14948386
> 
> 赞同：-3
> 
> 时间：2013-02-19T01:37:07.377
> 
> 标签：sql, sql-server, select

```
SELECT nom AS Nom, id_type_produit, id_format 
FROM dbo.Produits 
```

这只显示我的 id， `id_type`我`id_Format`需要显示它们的值（在 2 个其他表中，如 id_format = 1 = 750 ml）和 type = 1 = wine..

但是当我选择时，我只看到 1 和 2，我没有看到 750 毫升和葡萄酒

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:41:19.130

```
SELECT nom AS Nom, Produits.id_type_produit, type_produits.value, Produits.id_format, formats.value
FROM dbo.Produits
INNER JOIN dbo.type_produits ON Produits.id_type_produit = type_produits.id_type_produit
INNER JOIN dbo.dbo_formats ON Produits.id_format = formats.id_format 
```

# php - Json 到 php，无法获取我需要的数据

> ID：14948388
> 
> 赞同：2
> 
> 时间：2013-02-19T01:37:14.013
> 
> 标签：php, arrays, serialization, json

我需要一些帮助来获取从 JSON 到 php 的一些数据，我尝试了很多选项，但无法获得我需要的结果，请你们中的某个人帮忙。

可以通过 url 获取数据。以下是来自 url 的数据：`a:5:{i:0;s:3:"135";i:1;s:3:"177";i:2;s:3:"178";i:3;s:3:"166";i:4;s:3:"165";}`

我需要获取 "" 内的数字，例如 135，以及 i 之后的数字，例如 i:0、i:1 等

这是我厌倦的代码：

```
$string = file_get_contents("http://www.myweb.com/url.php?url=1");
$json_a=json_decode($string,true);
echo  $json_a['a:5']['i']; 
```

我无法得到任何结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:41:08.570

`a:5:{i:0;s:3:"135";i:1;s:3:"177";i:2;s:3:"178";i:3;s:3:"166";i:4;s:3:"165";}`

这看起来像是`serialize`PHP 函数的序列化字符串。

试试`unserialize`。这里： http: [//php.net/unserialize](http://php.net/unserialize)

您的数据输出；

```
大批
(
    [0] => 135
    [1] => 177
    [2] => 178
    [3] => 166
    [4] => 165
)

```

# javascript - AngularJS 在模型更新期间丢失了 css 类（DOM 重新绘制）

> ID：14948389
> 
> 赞同：1
> 
> 时间：2013-02-19T01:37:16.953
> 
> 标签：javascript, jquery, model, angularjs, toggleclass

我有一个表，其行通过一些模型数据循环。单击表格单元格时，该行的所有单元格都会切换`.active`（背景变为红色）。这很好用（尽管我最终会添加一个更复杂的检查器，`.active`从所有行的兄弟姐妹中删除）。但是，我的表正在通过更新模型并导致重新绘制表的 WebSocket 推送/消息接收数据。发生这种情况时，我的“选择”就会丢失。

```
<tr ng-repeat="item in items | orderBy:'time':true">
  <td
    ng-click="items[$index].active =! items[$index].active"
    ui-refresh="items[$index].active"
    ui-jq="toggleClass"
    ui-options="'active'"
  >{{item.time | date:'hh:mm a'}}</td>
  <td
    ng-click="items[$index].active =! items[$index].active"
    ui-refresh="items[$index].active"
    ui-jq="toggleClass"
    ui-options="'active'"
  >
    <a href="#/items/details/{{item.id}}">{{item.name}}</a>
  </td>
</tr> 
```

在我的控制器中，新的 WebSocket 消息被推送到我的数组中`items`：

```
function Items($scope , WebSocket)
{
  $scope.items = [];

  WebSocket.on('items', function(data)
  {// receive a bunch of items onload
    $scope.items = data.items;
  });

  WebSocket.on('item', function(data)
  {// receive subsequent items as they are pushed
    $scope.items.push(data.item);
  });
} 
```

所以我想知道为什么`items[$index].active`不通过 DOM 重新绘制（并保留其`active`css 类）。此外，如果有人对我如何坚持我的“状态”有解决方案，那就太好了。

通常我会完全松开 css 类，但有时（看似随机）它会重新出现在与原始行相同的表格位置（例如第二行）的新行上，即使原始行已向下移动（到那么第 5 行是什么），并且添加`active`时出现的新行不存在`active`。

我会发布一个示例，但是 Plunkr 和 jsfiddle 都不支持 NodeJS（它会推出 WebSocket 消息）并且对于演示该行为是必要的。

## 解决方案

根据[Alex 的回答](https://stackoverflow.com/a/14948533/758177)，我稍微修改了我的控制器以添加第二个数组：

```
function Items($scope , WebSocket)
{
  $scope.items = [];
  $scope.rowSelection = [];// <- THIS IS NEW

  WebSocket.on('items', function(data)
  {// receive a bunch of items onload
    $scope.items = data.items;
  });

  WebSocket.on('item', function(data)
  {// receive subsequent items as they are pushed
    $scope.items.push(data.item);
  });
} 
```

在我的模板中，交换`items[$index].active`了`rowSelection[$index]`（因为第二个数组的唯一目的是记住谁被选中/激活，它不需要`active`属性）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:52:48.927

您正在丢失其中的值，`items[$index].active`因为当 WebSocket 更新时整个项目数组被覆盖。

要保持选定状态，您应该将其存储在不受影响的单独变量中。

就像是：

在控制器中

```
$scope.items = [];
$scope.itemStatus = []; 
```

在指令/模板中

```
 <td
    ng-click="itemStatus[item.id].active =! itemStatus[item.id].active"
    ui-refresh="itemStatus[item.id].active" 
```

# c# - 使用 C# 连接到 MySql

> ID：14948396
> 
> 赞同：2
> 
> 时间：2013-02-19T01:37:57.727
> 
> 标签：c#, mysql, ado.net

我在加载表单中运行此函数以将我的数据库中的信息显示到 c# 中的 dataGridView 中。问题是表单在尝试访问广告检索数据之前弹出。这是它在调试器中的运行方式。我运行下面的函数。

```
public void loadData()
{
    var list = mysql.Select();
    try
    {
        //start from first row
        for (int i = 0; i < dataGridView1.RowCount; i++)
        {
            //insert IDs
            dataGridView1[0, i].Value = list[0][i];
            //insert Names
            dataGridView1[1, i].Value = list[1][i];
            for (int j = 0; j < dataGridView1.ColumnCount; j++)
            {
                if (list[3][j] != null)
                {
                    dataGridView1[j + 2, i].Value = list[3][j];
                }
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

然后调用mysql类中的Select函数，停在MySqlDataReader处，弹出Window Form。有人能告诉我发生了什么吗？

这是 Mysql.Select()

```
public List <string> [] Select()
{
    string query = "SELECT id,name,weekday,description FROM employee e INNER JOIN schedule s ON e.id=s.id";

    //Create a list to store the result
    List<string>[] list = new List<string>[4];
    list[0] = new List<string>();
    list[1] = new List<string>();
    list[2] = new List<string>();
    list[3] = new List<string>();

    //Open connection
    if (this.OpenConnection() == true)
    {
        //Create Command
        MySqlCommand cmd = new MySqlCommand(query, connection);
        //Create a data reader and Execute the command
        MySqlDataReader dataReader = cmd.ExecuteReader();

        //Read the data and store them in the list
        while (dataReader.Read())
        {
            list[0].Add(dataReader["id"] + "");
            list[1].Add(dataReader["name"] + "");
            list[2].Add(dataReader["weekday"] + "");
            list[3].Add(dataReader["description"] + "");
        }

        //close Data Reader
        dataReader.Close();

        //close Connection
        this.CloseConnection();

        //return list to be displayed
        return list;
    }
    else
    {
        return list;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:43:55.690

While its processing the MySQL command and fetching info from the Database it appears the application has been given time to paint the form.

Simple fix is to do it like this:

```
 private void frmMain_Load(object sender, EventArgs e)
    {
          this.visible = false;
          loadData();
          this.visible = true;
    } 
```

# django - 创建多个递归 m2m 关系时出错

> ID：14948401
> 
> 赞同：0
> 
> 时间：2013-02-19T01:38:19.453
> 
> 标签：django, django-models

我需要存储人与人之间的关系。所以我有以下型号

```
class Person(models.Model):
    name = models.CharField(max_length=255, blank=True)
    parents = models.ManyToManyField('self', through='PersonRelationship', symmetrical=False, blank=True, related_name="person_parents_set")
    friends = models.ManyToManyField('self', through='PersonRelationship', symmetrical=False, blank=True, related_name="person_friends_set") 

class PersonRelationship(models.Model):
    from_person = models.ForeignKey(Person, related_name="from_persons")
    to_person = models.ForeignKey(Person, related_name="to_persons")
    relation_start = models.DateField(blank=True)
    relation_end = models.DateField(blank=True) 
```

当我尝试同步数据库时，我收到此错误：

```
Error: One or more models did not validate:
films.person: The model Person has two manually-defined m2m relations through the model PersonRelationship, which is not permitted. Please consider using an extra field on your intermediary model instead. 
```

我想我不能通过同一个模型建立两个 m2m 关系，所以我尝试为每种类型的关系创建一个模型，以避免重复自己，我使用了这样的抽象模型：

```
class PersonRelationship(models.Model):
    from_person = models.ForeignKey(Person, related_name="from_persons")
    to_person = models.ForeignKey(Person, related_name="to_persons")
    relation_start = models.DateField(blank=True)
    relation_end = models.DateField(blank=True)

    class Meta:
        abstract = True

class PersonParent(PersonRelationship):
    pass 

class PersonFriend(PersonRelationship):
    pass 
```

我收到此错误，但我已经有一个相关名称：

```
films.personparent: Accessor for field 'from_person' clashes with related field     'Person.from_persons'. Add a related_name argument to the definition for 'from_person'.
films.personparent: Reverse query name for field 'from_person' clashes with related field    'Person.from_persons'. Add a related_name argument to the definition for 'from_person'.
films.personparent: Accessor for field 'from_person' clashes with related field 'Person.from_persons'. Add a related_name argument to the definition for 'from_person'.
films.personparent: Reverse query name for field 'from_person' clashes with related field 'Person.from_persons'. Add a related_name argument to the definition for 'from_person'. 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:59:27.657

我刚刚找到了解决方案，我发布它以防来自谷歌的人发现同样的问题。

阅读此链接 [链接更新到 v1.9]：

[https://docs.djangoproject.com/en/1.9/topics/db/models/#be-careful-with-related-name](https://docs.djangoproject.com/en/1.9/topics/db/models/#be-careful-with-related-name)

所以我只是将相关名称更改为：

```
from_person = models.ForeignKey(Person, related_name="%(app_label)s_%(class)s_from_persons")
to_person = models.ForeignKey(Person, related_name="%(app_label)s_%(class)s_to_persons") 
```

# postgresql - 如何启动 Postgres 服务器？

> ID：14948406
> 
> 赞同：26
> 
> 时间：2013-02-19T01:38:46.143
> 
> 标签：postgresql, osx-lion, django-postgresql

我实际上有一段时间遇到这个问题，但我最终决定接受它。Postgres 最初是使用 Brew 安装的。

在我升级到 OSX 10.8.2 后收到一个

```
psql: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

当我输入错误

```
$ psql 
```

命令。

我看到以下过程：

```
$ ps auxw | grep post
Tulsa           59222   0.0  0.2  2483256  14808   ??  Ss   Thu03PM   0:02.61 /System/Library/PrivateFrameworks/DiskImages.framework/Resources/diskimages-helper -uuid 470DA5CC-1602-4D69-855F-F365A6512F90 -post-exec 4
Tulsa           57940   0.0  0.2  2498852  13648   ??  Ss   Wed10PM   0:00.61 /System/Library/PrivateFrameworks/DiskImages.framework/Resources/diskimages-helper -uuid FAFAAAB4-0F67-42C8-864E-EF8C31A42EE3 -post-exec 4
root            24447   0.0  0.1  2476468  10080   ??  Ss    8Feb13   0:03.40 /System/Library/PrivateFrameworks/DiskImages.framework/Resources/diskimages-helper -uuid CC768720-12C2-436C-9020-548C275A6B0C -post-exec 4
Tulsa           74224   0.0  0.0  2432768    596 s002  R+    7:24PM   0:00.00 grep post

$ which psql
/usr/local/bin/psql

$ pg_ctl start 
pg_ctl: no database directory specified and environment variable PGDATA unset
Try "pg_ctl --help" for more information. 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-02-19T03:56:10.250

您还没有启动 Postgres 服务器。Postgres 的一些 dmg 软件包将其设置为在启动时作为服务运行。但不是您进行了安装。

您需要初始化一个数据目录，启动 postgres，然后从那里开始。

```
initdb /some/directory # just do this ONCE
pg_ctl -D /some/directory start # many other options, e.g. logging, available here
psql postgres 
```

您可以为数据目录设置环境变量，以后不需要该`-D`标志。你可以稍后再看。

# ruby-on-rails - 如何使用 ember-rails gem 为我的 HandlebarsJS 模板指定替代目录？

> ID：14948410
> 
> 赞同：7
> 
> 时间：2013-02-19T01:39:12.047
> 
> 标签：ruby-on-rails, ember.js, asset-pipeline, handlebars.js, ember-rails

我有一个 Rails 应用程序，我在前端使用 Ember。我想将与 ember 相关的文件在目录结构中下移一级，但是当我这样做时，模板不再呈现。

在应用程序的普通工作版本中，我的目录结构是：

```
./app/
  assets/
    javascripts
      application.js
      ember-app.js
      routes.js
      store.js
      models/
      controllers/
      routes/
      templates/
      views/ 
```

* * *

与：application.js

```
//= require jquery
//= require jquery_ujs
//= require handlebars
//= require ember
//= require ember-data
//= require_self
//= require ember-app
App = Ember.Application.create(); 
```

* * *

和： ember-app.js

```
//= require ./store
//= require_tree ./models
//= require_tree ./controllers
//= require_tree ./views
//= require_tree ./helpers
//= require_tree ./templates
//= require ./router
//= require_tree ./routes 
```

一切正常。但是，我想将 ember-app 文件和所有 ember javascript 代码下移一级，当我这样做时，模板不会呈现。（部分应用程序使用 Ember，但不是整个应用程序，我正在尝试通过资产管道设置两条单独的路径。）

所需的结构是：

```
./app/
  assets/
    javascripts
      application.js
      embro/
        ember-app.js
        routes.js
        store.js
        models/
        controllers/
        routes/
        templates/
        views/ 
```

* * *

with：application.js（修订：'require ember-app'变成'require embro/ember-app'）

```
//= require jquery
//= require jquery_ujs
//= require handlebars
//= require ember
//= require ember-data
//= require_self
//= require embro/ember-app
App = Ember.Application.create(); 
```

（ember-app.js 未修订。）

正如我所说，移动后，屏幕上不会出现任何模板内容。屏幕上或控制台中没有错误，只是一个空的 ember 应用程序。

当我在控制台中检查 Ember.TEMPLATES 时，会列出所有预期的模板。此外，如果我将所需的内容放在适当的 rails 视图中的 x-handlebars 模板中，则内容会成功呈现，就像它使用原始目录结构一样。

例如，在apps/views/welcome/index.html....

```
<script type="text/x-handlebars" data-template-name="application">
  <h1>hello</h1>
  {{ outlet }}
</script>

<script type="text/x-handlebars" data-template-name="index">
  <h1>this is the index</h1>
</script> 
```

......我们很高兴再去一次。

但是，如果我将 rails 视图留空，就像我对原始结构所做的那样，那就不行了。

想知道 ember-rails gem 是否需要将车把模板存在于 app/assets/javascripts/templates 中，以及是否有办法覆盖它。文档提到向应用程序配置块添加一个 templates_root 选项，我想知道这是否是关键。我玩了一会儿，还没有运气。

有任何想法吗？

* * *

更新：

恐怕我对 templates_root 选项没有任何运气。作为一个实验，我尝试构建一个新的、简单的 Rails 应用程序，并使用 ember-rails 引导生成器启动并运行它。一切都很好，但是如果我尝试简单地更改模板文件夹的*名称*（即 app/assets/javascripts/templates -> app/assets/javascripts/temple），并对 sprockets 包含和配置文件进行适当更改，我' m 得到相同的结果。

templates_root 选项是否有可能以某种方式损坏？

我正在使用 Ruby 1.9.3、Rails 3.2.11、ember-rails 0.10.0

任何指向我应该在 ember/ember-rails/handlebars 源代码中查看的位置的指针？已经开始四处闲逛了。

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T04:42:29.180

你是对的，你需要设置`templates_root`. 尝试添加

```
config.handlebars.templates_root = 'embro/templates' 
```

中的配置块`application.rb`，或

```
RailsApp::Application.config.handlebars.templates_root = 'embro/templates/' 
```

到一个新的初始化程序，`RailsApp`您的应用程序在哪里命名。

**编辑：**

我能够重现您描述的行为`templates_root`。对我来说，解决方法是删除`/tmp`我的应用程序文件夹并重新启动 rails。之后，模板被正确命名。

**编辑：**

更准确地说，您需要`/tmp/cache/assets`在更改后清除 sprockets 缓存`templates_root`。

**编辑：**

正如下面的评论中提到的，一个简单的`rake tmp:cache:clear`应该解决这个问题。

# php - 为什么 class_exists 函数返回 false？

> ID：14948413
> 
> 赞同：2
> 
> 时间：2013-02-19T01:39:20.540
> 
> 标签：php

在以下脚本中，我检查了该`class_exists`功能。这个功能的范围是什么？`false`当我测试这个类时，它会返回这个脚本。

```
<?php
namespace my;
class Tester {      
    public function check() {
        $classname = 'Tester';
        if(class_exists($classname)) {
            echo "class exists ! <br />";
        } else {
            echo "class doesn't exist ! <br />";
        }
    }
}   

$obj = new Tester();
$obj->check(); 
```

*输出：类不存在*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T01:42:11.033

`Tester`不在全局命名空间中。它在`my`命名空间中。

这两个都可以工作：

```
$classname = '\my\Tester';
$classname = 'my\Tester'; 
```

# c# - 根据 MS 图表中其他 2 个系列的差异创建一个系列

> ID：14948414
> 
> 赞同：0
> 
> 时间：2013-02-19T01:39:23.420
> 
> 标签：c#, charts, dataset, mschart

在我的图表中创建了 2 个系列。我想创建另一个系列 (H)，其值是第一个系列 (v1) 的值减去第二个系列 (S) 的值。如您所见，S 是使用财务公式得出的。有谁知道我如何制作H系列？

```
chartIndicators.DataSource = data;
chartIndicators.Series["v1"].XValueMember = "x";
chartIndicators.Series["v1"].YValueMembers = "y1";
chartIndicators.DataBind();

    // transform to macd  
chartIndicators.DataManipulator.FinancialFormula(FinancialFormula.MovingAverageConvergenceDivergence, "v1");

// signal
chartIndicators.DataManipulator.FinancialFormula(FinancialFormula.ExponentialMovingAverage, "9", "v1", "S"); 
```

我可以从以下数据集生成系列 H - 如果可以，我该怎么做？还是有更好的方法来做到这一点？

```
DataSet dsV1 = chartIndicators.DataManipulator.ExportSeriesValues("v1");
DataSet dsS = chartIndicators.DataManipulator.ExportSeriesValues("S"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:28:36.423

我自己找到了解决方案：

```
 for (int i = 0; i < dsS.Tables[0].DefaultView.Count;i++) {
        double y = Convert.ToDouble(dsV1.Tables[0].DefaultView[i][1]) - Convert.ToDouble(dsS.Tables[0].DefaultView[i][1]);
        double x = Convert.ToDateTime(dsV1.Tables[0].DefaultView[i][0]).ToOADate();
        chartIndicators.Series["H"].Points.AddXY(x, y);                
    } 
```

# c# - Easiest way to play audio in an openTK application, using any method

> ID：14948422
> 
> 赞同：2
> 
> 时间：2013-02-19T01:40:44.390
> 
> 标签：c#, .net, audio, opentk

My goal here is to be able to play an MP3 in an OpenTK/OpenGL application (.NET but NOT windows forms), being able to stop/play/pause it, access/set the position of the audio file, and have it play to within a few milliseconds of when I tell it to.

I've tried using WindowsMediaPlayer (WMPLib) but for whatever reason the audio doesn't start playing until I resize or move the window. Not sure why but it probably has something to do with the fact that it's meant to be a control on Windows Forms, and this is a GL application.

I've tried using .NET's soundplayer but that incurs a huge delay of up to a second, and I can't set/access the position of the file.

I've looked into OpenTK and OpenAL but that seems way too complex to figure out.

Does anyone have any ideas?

THANKS!

Oh and worst case scenario I could also deal with playing WAV or OGG files instead, and if the play timing is accurate enough I wouldn't need access to the position of the audio.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-22T01:34:48.477

OpenAL 可能看起来很复杂，但听起来像是解决您问题的最佳方法。它上面有很多，尽管大多数示例可能是其他语言的，但 API 是相同的。也许[这个线程](https://stackoverflow.com/questions/6739306/playing-audio-in-net-c-sharp)也有一些解决方案。

# javascript - Count the number of spaces of the current line in a textarea

> ID：14948425
> 
> 赞同：0
> 
> 时间：2013-02-19T01:40:52.970
> 
> 标签：javascript, jquery, html, textarea

How can I count the number of spaces of the current line in a textarea

```
asdf
   asdf
asdf 
```

If my cursor is current on line 2 then the result should be: 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:54:41.290

您需要拆分 textarea 的字符串值，然后：

```
var textString = //pull data from textarea
var textArray = textString.split("\n");
for(var i=0; i<textArray.length; i++) {
    var count = textArray[i].match(/ /g); //regex to get any number of spaces 
    alert(count.length);
} 
```

[http://jsfiddle.net/2qfHn/](http://jsfiddle.net/2qfHn/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:59:42.490

这是代码：

```
window.onload = function () {
    var ta = document.getElementById('ta'); //set your textarea's id
    ta.onclick = function (e) {
        var lineNo = ta.value.substr(0, ta.selectionStart).split(/\r?\n|\r/).length,
            lineText = ta.value.split(/\r?\n|\r/)[lineNo - 1],
            numOfSpaces = lineText.split(/\s/).length - 1;
        console.log(lineNo, lineText, numOfSpaces);
    }
} 
```

这是[**小提琴**](http://jsfiddle.net/onury/tfXN2/)。

***注意：****在某些浏览器中不起作用。**如需跨浏览器支持，请参阅****[这篇文章](https://stackoverflow.com/a/263796/112731)****。* *`textarea.selectionStart`*

# c++ - Class member function pointer that uses another class member

> ID：14948429
> 
> 赞同：1
> 
> 时间：2013-02-19T01:41:10.473
> 
> 标签：c++, class, methods, function-pointers

I'm trying to make a code that find the numerical derivation of a function. I also have a polynomial class described as follows:

```
 class polynomial
    {
    public:
        polynomial(Vector, int);
        polynomial();
        ~polynomial();

        double returnValue(double);
        void print();

    private:
        int Degree;
        Vector Coeficients;
    }; 
```

my numerical derivation have the following prototype:

```
 double numericalDerivation( double (*F) (double), double x); 
```

I want to pass the returnValue method into the numericalDerivation, is that possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:49:47.497

是的，这是可能的，但不要忘记它是一个*成员*函数：如果没有（指向）用于调用它的类型对象，您将无法`polynomial`调用它。

以下是您的函数的签名应如下所示：

```
double numericalDerivation(double (polynomial::*F)(double), polynomial* p, double x)
{
    ...
    (p->*F)(x);
    ...
} 
```

以下是调用它的方法：

```
double d = ...;
polynomial p;
numericalDerivation(&polynomial::returnValue, &p, d); 
```

或者，您可以使用一个`std::function<>`对象作为函数的参数，然后`std::bind()`将对象绑定到成员函数：

```
#include <functional>

double numericalDerivation(std::function<double(double)> f, double x)
{
    ...
    f(x);
    ...
}

...

double d = ...;
polynomial p;
numericalDerivation(std::bind(&polynomial::returnValue, p, std::placeholders::_1), d); 
```

# msmq - MQ - Peaking Queues in .NET

> ID：14948431
> 
> 赞同：0
> 
> 时间：2013-02-19T01:41:22.817
> 
> 标签：msmq

I am relatively new to MS-MQ Development and I was wondering if any of you guru's out there know an answer to the following:

In the concept of queues, there is something called "peaking", whereby; you can look at the message on the queue BUT NOT take it off the queue. This is different to performing a GET call.

Does anyone know how to do this?

Thanks in Advance.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T07:18:39.380

嗯，这与从队列中接收消息没有太大区别。

```
var queue = new MessageQueue([path to queue]);

var msg = queue.Peek(); 
```

也可以通过使用迭代队列中的消息

```
var msg = queue.Peek(TimeSpan.FromSeconds(10), PeekAction.Next); 
```

你也可以通过不同的ID偷看

*   PeekByCorrelationId
*   PeekByLookupId
*   PeekById

查看 MSDN 文档中有关这些方法的示例，因为它们可以让您轻松入门。

[http://msdn.microsoft.com/en-us/library/829zyck7.aspx](http://msdn.microsoft.com/en-us/library/829zyck7.aspx)

# java - 作为参数传递的方法定义

> ID：14948432
> 
> 赞同：0
> 
> 时间：2013-02-19T01:41:29.520
> 
> 标签：java, android, methods, arguments

我在查看 Android 示例时看到了这段代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    EditText editNumber;
    Button btnCall = (Button) this.findViewById( R.id.btnCall);

    editNumber = (EditText) this.findViewById(R.id.editNumber);
    btnCall.setOnClickListener(
            new OnClickListener() {

                public void onClick(View v) {
                    call();
                }
            });
    // ...
} 
```

这里：

```
new OnClickListener() {
    public void onClick(View v) {
        call();
    }
} 
```

`setOnClickListener()`作为参数传递给。我不明白的是里面的代码在`{...}`这里做什么？if`new OnClickListener()`调用构造函数，构造函数返回一个对象，是的，对象可以作为参数传递给方法，但是什么是：

```
{
    public void onClick(View v) {
        call();
    }
} 
```

在这里做什么？它看起来像一个方法定义？

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T01:47:57.817

正如@Perception 所说，它是一个匿名内部类。`btnCall.setOnClickListenter()`期待一个类型为 的参数`OnClickListener`。您可以实例化一个对 an 的具体引用`OnClickListener`并将其作为参数传递，但如果您永远不会再次引用它，有时简单地创建一个匿名内部类会更容易。

# c - 释放 realloc 导致错误

> ID：14948434
> 
> 赞同：0
> 
> 时间：2013-02-19T01:41:36.210
> 
> 标签：c, malloc, realloc

我正在尝试释放在以下程序中分配的内存：

```
include <stdio.h>
#include <stdlib.h>

void main(int argc, char** argv) {
  int* x = (int *) malloc(4 * sizeof(int));
  int i;

  for(i = 0; i < 4; i++) {
   x[i] = i;
   printf("X[%d] = %d\n", i, x[i]);
  }

   x = (int *) realloc(x, 4 * sizeof(int));

   for(i = 0; i < 8; i++) {
     x[i] = i;
     printf("X[%d] = %d\n", i, x[i]);
//   free(x[i]);
   }

  free(x);
} 
```

我得到以下信息：libC 中止错误：*** glibc 检测到****./a.out: free(): 下一个尺寸无效（快速）：0x00000000014f8010 ** **

 *我试图在最后一个循环中释放，但这仍然存在问题。我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:46:31.783

realloc() 不会将分配的内存增加指定的数量。它准确地重新分配请求的字节数。因此，如果要将数组大小调整为 8 个整数，则需要：

```
x = realloc(x, 8 * sizeof(int)); 
```

顺便说一句，不要在 C 中转换 malloc() 和 realloc() 的返回值：

[http://c-faq.com/malloc/mallocnocast.html](http://c-faq.com/malloc/mallocnocast.html)*

# android - Phonegap Build App not closing on exit

> ID：14948436
> 
> 赞同：0
> 
> 时间：2013-02-19T01:41:51.543
> 
> 标签：android, eclipse, phonegap-build

I have gone through quite an obstacle working with this first app. I developed it in Dreamweaver using PhoneGap Build. After many tests and revisions I finally had it working properly then I had to sign it so I had to import everything into eclipse and now my exit functionality is not working. Below is the snippet I am currently using to close my app but after moving this into eclipse it no longer works. Can anyone tell me how to get the exit button (anchor) to exit when clicked? Or even the app to exit when user presses the home screen? Currently testing on Android.

```
<script type="text/javascript">
$(document).ready(function() {
 $('a.exit').click(function() {

     localStorage.clear(); 
     navigator.app.exitApp();

     return true;
});
});
</script>

...

<a href="#" class="exit" data-role="button" onclick="navigator.app.exitApp()">Exit Game</a> 
```

It would also be ideal if I could use the native menu button on dock to have an exit option.. Again I had this working before importing into eclipse. Currently if you press the menu button on your android then you see a "settings" button but it doesnt do anything or go anywhere and I cant find where to control whats in there.

# c++ - GLSL 将指示法线传递给着色器

> ID：14948437
> 
> 赞同：1
> 
> 时间：2013-02-19T01:41:55.030
> 
> 标签：c++, opengl, glsl, render, wavefront

我在搅拌机中生成模型（Suzie）并将其导出到带有法线的 .obj 文件。在我的应用程序加载模式期间，我注意到顶点和法线的数量不同（2012 年和 1967 年）。

![型号详情](../Images/6238857b3ac7c871feee1ff24ee664a4.png)

我尝试实现简单的单元格着色。问题在于将法线传递给着色器。为了存储顶点数据，我使用来自 glm 的向量。

```
std::vector<unsigned int> face_indices;
std::vector<unsigned int> normal_indices;
std::vector<glm::vec3> geometry;
std::vector<glm::vec3> normals; 
```

**结果我到目前为止**

![错误的法线](../Images/1cc1e1c5feb5030310168917beac7644.png)

**缓冲区布局**

```
 glBindVertexArray(VAO);

    glEnableVertexAttribArray(0);
    glBindBuffer(GL_ARRAY_BUFFER, VertexVBOID);
    glBufferData(GL_ARRAY_BUFFER, geometry.size() * sizeof(glm::vec3), &geometry[0], GL_STATIC_DRAW);
    glVertexAttribPointer(0, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glEnableVertexAttribArray(1);
    glBindBuffer(GL_ARRAY_BUFFER, NormalVBOID);
    glBufferData(GL_ARRAY_BUFFER, normals.size() * sizeof(glm::vec3), &normals[0], GL_DYNAMIC_DRAW);
    glVertexAttribPointer(1, 3, GL_FLOAT, GL_FALSE, 0, 0);

    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, VIndexVBOID);
    glBufferData(GL_ELEMENT_ARRAY_BUFFER, face_indices.size() * sizeof(unsigned int), &face_indices[0], GL_DYNAMIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, 0);
    glBindVertexArray(0); 
```

**渲染片段**

```
 glBindVertexArray(VAO);

    glPolygonMode(GL_FRONT_AND_BACK, GL_QUADS);
    glDrawElements(GL_QUADS, face_indices.size(), GL_UNSIGNED_INT, (void*)0);

    glBindVertexArray(0); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T17:52:15.887

出现这种奇怪问题的原因是一些法线被多次使用以保留磁盘空间，所以我必须以正确的顺序重新排列它们。所以解决方案非常简单。

```
geometry.clear();
normals.clear();

geometry.resize(vv.size());
normals.resize(vv.size());

for (unsigned int i = 0; i < face_indices.size(); i++)
{
    int vi = face_indices[i];
    int ni = normal_indices[i];
    glm::vec3 v = vv [vi];
    glm::vec3 n = vn [ni];
    geometry[vi] = v ;
    normals[vi]  = n ;
    indices.push_back(vi);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-25T01:27:29.047

您还应该记住，在导出之前在 Blender 中使用平滑修改器在某些情况下有助于确保每个顶点有 1 个法线（您可能需要也可能不需要设置每个顶点的法线视图而不是面法线视图。 ..can't rem 所以你必须测试）。这是因为默认情况下，blender 使用每个面的法线。平滑修改器（“w”热键菜单）会将其切换为每个顶点规范。然后在导出时，像往常一样导出顶点和规范，并且数字应该匹配。并非总是如此，但这在过去对我有用。这可能意味着在导入期间减少不必要的数据处理。

# google-app-engine - App Engine Go 中的 Kindless 查询

> ID：14948440
> 
> 赞同：1
> 
> 时间：2013-02-19T01:42:28.750
> 
> 标签：google-app-engine, google-cloud-datastore, go

在 Python 中是

```
q = db.Query()
q.ancestor(ancestor_key) 
```

我试过：

```
q := datastore.NewQuery("")
q.Ancestor(ancestor_key) 
```

运行 GetAll 时出现错误“datastore: empty kind”

我也试过：

```
q := &datastore.Query{}
q.Ancestor(ancestor_key) 
```

我收到错误“数据存储：空查询类型”

提前感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:52:35.513

> [函数新查询](https://developers.google.com/appengine/docs/go/datastore/reference#NewQuery)
> 
> func NewQuery(kind string) *Query
> 
> NewQuery 为特定实体类型创建一个新查询。种类必须是非空的。

在您的代码中，

```
q := datastore.NewQuery("") 
```

那种是空的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:05:13.153

Rich Churcher 的评论似乎是正确的，至少目前是这样。

> 我认为 Go 不支持 Python kindless 祖先查询。有那么一会儿，我以为你可以使用祖先键的 Kind() 方法，然后我又喝了一些咖啡，然后才清醒过来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-04T05:54:34.770

GetAll 似乎不起作用，但您可以进行无情的查询。

```
ctx := appengine.NewContext(r)
q := datastore.NewQuery("")
for it := q.Run(ctx); ; {
  key, err := t.Next(nil)
  if err == datastore.Done {
    break
  }
  if err != nil {
    break
  }
  fmt.Printf("%v\n", key)
} 
```

# macos - Vim Can't Save File (E212)

> ID：14948441
> 
> 赞同：62
> 
> 时间：2013-02-19T01:42:37.187
> 
> 标签：macos, vim

Sometimes when I create a file using `vim some/path/newfile`, vim lets me edit it, only to complain when I attempt to save my changes.

```
E212 Can't open file for writing. 
```

This appears to happen only when the new file is located in a system directory.

`:w!` does not override this error.

How can I write the current buffer, without having to save it to a temporary location, exit, then rename it using sudo?

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2013-02-19T01:49:47.540

这将要求您输入 root 密码，然后按照您的要求保存更改：

```
:w !sudo tee % 
```

然后在提示符下键入 (L)oad，以在文件保存后重新加载文件。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-02-19T01:44:51.020

Add this line to your `.vimrc`:

```
cmap w!! %!sudo tee > /dev/null 
```

and then you can do

```
:w!! 
```

when you get into this position, and it will write the file using sudo. Very handy.

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2014-07-14T18:09:52.420

你可以先*mkdir*，然后保存。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2020-11-27T22:27:54.843

您可以通过使用“sudo”启动编辑会话来避免此问题。

```
sudo vi name-of-file 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-03-01T20:15:55.900

如果在 Windows 7 或更高版本中出现这种情况，请以管理员身份运行 VI 编辑器。右键单击应用程序并选择“以管理员身份运行”。这个问题将得到解决。此外，错误是由于管理权限。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-02-19T08:13:11.313

如果您想要一个强大、易于记忆的解决方案并且不介意安装插件，请尝试[SudoEdit.vim - 使用 sudo 或 su 或任何其他工具编辑文件](http://www.vim.org/scripts/script.php?script_id=2709)。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2018-04-11T15:03:07.243

# vim 一些/路径/新文件

您可以尝试分两步进行，首先使用 mkdir ~ 创建文件夹 'some' 和 'path'；其次进入 'path' 文件夹，使用命令：sudo vim newfile.然后保存

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-02-14T01:04:03.310

确保您尝试保存文件的目录存在并且您有权编辑该文件。

您可以输入`:help message`Vim 以获取有关此错误消息和其他错误消息的更多信息。`/E212`一旦文档出现，请尝试通过键入进行搜索。您还可以在[http://vimdoc.sourceforge.net/htmldoc/message.html](http://vimdoc.sourceforge.net/htmldoc/message.html)和 CTRL-F 上在线查看文档以找到它。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-05-08T17:08:46.357

对于它的价值，您可能还希望确保在尝试保存文件的分区中有足够的存储空间。我不得不在我的 /home 驱动器中释放一些空间，这解决了这个问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-18T17:54:47.177

我知道这是一个老问题，但这就是为我解决的问题。您的文件可能设置为不可变，这意味着您无法对其进行编辑。

你可以检查这个`lsattr /path/to/file.txt`

如果它 `chattr -i /etc/resolv.conf`用于使其不再不可变。

# c - 读取 Wav 头文件的代码会产生奇怪的结果？C

> ID：14948442
> 
> 赞同：2
> 
> 时间：2013-02-19T01:42:42.493
> 
> 标签：c, wav

我需要从波形文件中读取标题变量并显示它们是什么。我正在使用以下代码，但我的输出数字太大。我已经搜索了几个小时的解决方案。帮助将不胜感激！谢谢。[我从https://ccrma.stanford.edu/courses/422/projects/WaveFormat/](https://ccrma.stanford.edu/courses/422/projects/WaveFormat/)获得了波形声音文件格式

输出： `Wav file header information: Filesize 3884 bytes RIFF header RIFF WAVE header WAVE Subchunk1ID fmt Chunk Size (based on bits used) 604962816 Subchunk1Size 268435456 Sampling Rate 288030720 Bits Per Sample 2048 AudioFormat 256 Number of channels 2048 Byte Rate 288030720 Subchunk2ID Subchunk2Size 1684108385`

这是来源：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct  WAV_HEADER
{
char                RIFF[4];        
int                 ChunkSize;     
char                WAVE[4];       
char                fmt[4];        
int                 Subchunk1Size;                              
short int           AudioFormat;  
short int           NumOfChan;      
int                 SamplesPerSec;  
int                 bytesPerSec;    
short int           blockAlign;    
short int           bitsPerSample;  
int                 Subchunk2Size; 
char                Subchunk2ID[4];
}wav_hdr; 

int getFileSize(FILE *inFile); 
int main(int argc,char *argv[])
{
//check startup conditions
if(argc >= 2); //we have enough arguments -- continue
else { printf("\nUSAGE: program requires a filename as an argument -- please try again\n"); exit(0);}

wav_hdr wavHeader;
FILE *wavFile;
int headerSize = sizeof(wav_hdr),filelength = 0;
wavFile = fopen(argv[1],"r");
if(wavFile == NULL)
{
    printf("Unable to open wave file\n");
    exit(EXIT_FAILURE);
}
fread(&wavHeader,headerSize,1,wavFile);
filelength = getFileSize(wavFile);
fclose(wavFile);
printf("\nWav file header information:\n");
printf("Filesize\t\t\t%d bytes\n",filelength);
printf("RIFF header\t\t\t%c%c%c%c\n",wavHeader.RIFF[0],wavHeader.RIFF[1],wavHeader.RIFF[2],wavHeader.RIFF[3]);
printf("WAVE     header\t\t\t%c%c%c%c\n",wavHeader.WAVE[0],wavHeader.WAVE[1],wavHeader.WAVE[2],wavHeader.WAVE[3]);
     printf("Subchunk1ID\t\t\t%c%c%c%c\n",wavHeader.fmt[0],wavHeader.fmt[1],wavHeader.fmt[2],wavHeader.fmt[3]);
printf("Chunk Size (based on bits used)\t%d\n",wavHeader.ChunkSize);
printf("Subchunk1Size\t\t\t%d\n",wavHeader.Subchunk1Size);
printf("Sampling Rate\t\t\t%d\n",wavHeader.SamplesPerSec); //Sampling frequency of the wav file
printf("Bits Per Sample\t\t\t%d\n",wavHeader.bitsPerSample); //Number of bits used per sample
printf("AudioFormat\t\t\t%d\n",wavHeader.AudioFormat);
printf("Number of channels\t\t%d\n",wavHeader.bitsPerSample);     //Number of channels (mono=1/sterio=2)
printf("Byte Rate\t\t\t%d\n",wavHeader.bytesPerSec);   //Number of bytes per second
printf("Subchunk2ID\t\t\t%c%c%c%c\n",wavHeader.Subchunk2ID[0],wavHeader.Subchunk2ID[1],wavHeader.Subchunk2ID[2],wavHeader.Subchunk2ID[3]);
printf("Subchunk2Size\t\t\t%d\n",wavHeader.Subchunk2Size);
printf("\n");
return 0;
}

int getFileSize(FILE *inFile)
{
int fileSize = 0;
fseek(inFile,0,SEEK_END);
fileSize=ftell(inFile);
fseek(inFile,0,SEEK_SET);
return fileSize;
}` 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:55:33.567

因此，您的代码基本上可以工作——如果您使用文件格式规范的作者使用的相同编译器和 O/S（32 位 Windows）来编译它。您希望您的编译器完全按照您需要匹配文件字节来布置您的结构。例如，我可以在 win32 上编译和运行它，并完美地读取 WAV 文件——一直到头文件的可变部分，您未能编码其可变性。

在编写了大量代码来处理各种文件格式之后，我建议您放弃尝试读入结构，而是为“读取接下来的 4 个字节并将它们转换为 int”之类的东西制作一些简单的实用函数.

Notice things like the "extra format bytes". Parts of the file format depend on the values in previous parts of the file format. That's why you generally need to think of it as a dynamic reading process rather than one big read to grab the headers. It's not hard to keep the result highly portable C that will work between operating systems without relying on O/S specific things like stat() or adding library dependencies for things like htonl() -- should portability (even portability to a different compiler or even just different compiler options on the same O/S) be desirable.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:22:54.657

您似乎注意到了字节序问题，但处理它的方法是使用`htonl`, `ntohl`, `htons`, and, `ntohs`。这是您的号码问题的一部分。

在这里阅读：

```
http://www.beej.us/guide/bgnet/output/html/multipage/htonsman.html 
```

请注意，这里还有很多关于 WAV 文件的其他帖子。你考虑过阅读它们吗？

此外，还有一些标准方法可以通过 windows 上的 windows API 或`stat`linux/unix 上获取文件信息，例如大小

# java - 如何从 JSON 数组中清除数据

> ID：14948443
> 
> 赞同：10
> 
> 时间：2013-02-19T01:42:44.013
> 
> 标签：java, android, json, arrays

我正在做一个项目，我必须从 JSON 数组中清除所有数据。似乎没有像**jsonArray.clear()**这样的方法。还尝试**了 jsonArray = new JSONArray()**。那也没有奏效。请提出建议

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T01:48:26.607

只需创建一个新的 JSONArray。

```
JSONArray otherJsonArray = new JSONArray(); 
```

或者遍历数组和`remove(int index)`索引。

[http://www.json.org/javadoc/org/json/JSONArray.html#remove(int)](http://www.json.org/javadoc/org/json/JSONArray.html#remove(int))

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-01-30T13:14:37.053

就放`jsonArray = new JSONArray()`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-23T15:05:34.913

创建一个新的将起作用，除非您将它作为参数传递给方法，在这种情况下，您需要修改引用的对象，因为调用方法不会看到新的引用。

因此，如果是这种情况，请向后执行，这样您的迭代器就不会超出范围：

```
 int startingLength = someJsonArray.length();

    for (int i = startingLength - 1; i >= 0; i--) {

        someJsonArray.remove(i);

    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-05-05T11:03:31.620

你使用 otherJsonArray 已经存在然后你使用

```
JSONArray otherJsonArray = new JSONArray("[]"); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-07T15:32:43.767

我们可以使用 someJsonArray.pop(index) 来删除需要的记录。我们可以在循环中使用此代码来删除所有记录。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-08-02T12:26:51.797

我有一种情况，我想使用键“Constants”从 JSONArray 中删除所有条目，这是 JSONObject 中的一个元素，创建一个新的 JSONArray 并分配它不会清除 JSONArray，我必须遍历 JSONArray 和jsonArray.remove(i)，但是还有第二种方法可以工作，它涉及删除数组元素，在这种情况下，从 JSONObject 中完全删除“常量”并将其重新添加为新的 JSONArray。

这是分配了新数组的代码，它不起作用，JSONArray 保持不变：（我尝试了以上关于 new JSONArray(); 和 new JSONArray("[]"); 的建议

```
 JSONObject jsonObj = new JSONObject(metadataOriginalJSON);
        if (jsonObj.isJSONArray("Constants")) {
            JSONArray constantsArray = jsonObj.getJSONArray("Constants");
            constantsArray = new JSONArray();
            metadataConstantsRemoved = jsonObj.toString();
        } 
```

这是通过 JSONArray 进行迭代的代码：

```
 JSONObject jsonObj = new JSONObject(metadataOriginalJSON);
  if (jsonObj.isJSONArray("Constants")) {
      JSONArray constantsArray = jsonObj.getJSONArray("Constants");
      int i = 0;
      int arrayLenSanityCheckPreventEndlessLoop = constantsArray.length();
      while (constantsArray.length() > 0 && i < arrayLenSanityCheckPreventEndlessLoop) {
          constantsArray.remove(0);
          i++;
      }
      metadataConstantsRemoved = jsonObj.toString();
  }
```

第二种方法通过删除整个 JSONArray 元素并将其重新添加到 JSONObject 来工作：

```
 JSONObject jsonObj = new JSONObject(metadataOriginalJSON);
  if (jsonObj.isJSONArray("Constants")) {
      jsonObj.remove("Constants");
      jsonObj.put("Constants", new JSONArray());
      metadataConstantsRemoved = jsonObj.toString();
  }
```

# android - Eclipse Will Not Recognize Galaxy S 2 When Debugging Even Though It Will Recognise My Touch and Run The App

> ID：14948445
> 
> 赞同：0
> 
> 时间：2013-02-19T01:42:45.390
> 
> 标签：android, eclipse

I am a java beginner. I am going through a book right now actually called Java in 24 Hours sixth edition by Rogers Cadenhead learning java and android programming. Anyways, to my problem. I am using eclipse to make a simple app and I want to transfer it to my galaxy s 2\. I am ready to debug it and pick my device.... except its not there. I have installed Kies, the drivers, made sure its in USB debug mode but it will not recognize it. Any suggestions? This is not a duplicate! It is different because even though its in debugging mode, even though Ive reinstalled kies twice, even though Ive made sure the USB port or cord is not a problem it still does not work! But whats strange is my My Touch will work perfectly with the app. What am I missing here? This is the third time I have asked about this and cant find an answer. HELP PLEASE.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:35:26.027

可悲的是，对于这些类型的问题没有明确的答案，我只能提供一个可以尝试的列表：

-确保手机有“开发者设置”：“USB调试”和“安装未知来源的应用”

-重新启动 adb（从命令行：“adb kill-server”然后“adb start-server”

- 重启 Eclipse

- 重启手机

-重启电脑

- 尝试不同的电缆

抱歉，我不能更具体，我的 S3 和 S1 有这些问题，它似乎有随机的原因和随机的解决方案

您可能还会在这里找到一些答案： [为什么即使我可以使用驱动器号传输文件，Eclipse 也看不到我的三星 Galaxy 手机？](https://stackoverflow.com/questions/3908301/why-doesnt-eclipse-see-my-samsung-galaxy-phone-even-though-i-can-transfer-files?rq=1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:25:59.403

这可能是有益的：

> 如何为三星 Galaxy S2 安装 ADB 驱动程序
> 
> 第 1 步：断开我的手机与 USB 的连接
> 
> 第 2 步：使用 USBDeview，我卸载了所有以前安装的与手机相关的驱动程序（这里小心！）
> 
> 第 3 步：安装三星凯斯，并加载它
> 
> 第 4 步：在 Samsung Kies 中，我选择了工具 > 安装驱动程序（这一步花了一些时间，而且似乎停滞不前？请耐心等待！）
> 
> 第 5 步：将我的手机连接到 USB
> 
> 第6步：安装的设备？Windows然后给了我一个关于缺少驱动程序的错误，但是，当我检查设备管理器时，我可以看到“Samsung Android Phone”下面是“Samsung Android ADB Device”
> 
> 第 7 步：然后运行“adb.exe devices”（从命令提示符 adb.exe 位于 android-sdk 文件夹中）

[从这里](http://www.downloadatoz.com/howto/how-to-set-up-install-android-adb-usb-driver,30261.html)也[看这里。](http://naturalprogression.wordpress.com/2011/07/19/samsung-galaxy-s2-adb-device-driver/)

# android - 绘制具有相对布局的位图会返回非法参数异常

> ID：14948454
> 
> 赞同：0
> 
> 时间：2013-02-19T01:44:06.793
> 
> 标签：android, layout, bitmap, android-relativelayout

我正在尝试从我以编程方式创建的相对布局中创建位图。Realtivelayout 按预期显示，但是当我尝试创建位图时，它返回非法参数异常，即高度和宽度必须> 0 这就是我的做法

```
Bitmap.createBitmap(saveLayout.getWidth(),
            saveLayout.getHeight(), Bitmap.Config.ARGB_8888); 
```

任何指针？

**编辑：**也添加了此代码：

```
 ViewTreeObserver viewTreeObserver = saveLayout.getViewTreeObserver();
    if (viewTreeObserver.isAlive()) {
        viewTreeObserver
                .addOnGlobalLayoutListener(new OnGlobalLayoutListener() {
                    @Override
                    public void onGlobalLayout() {
                        saveLayout.getViewTreeObserver()
                                .removeGlobalOnLayoutListener(this);
                        viewWidth = saveLayout.getWidth();
                        viewHeight = saveLayout.getHeight();

                    }
                });
    } 
```

在上面给出的代码`onGlobalLayout()`中似乎也从未被调用过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:48:55.707

如果您以编程方式创建，您可能*过早*`saveLayout`地要求它的宽度和高度。（只是一个有根据的猜测，因为我看不到你的其余代码）

 *[看到这个解释](https://stackoverflow.com/a/6145113/119114)

[createBitmap() 调用引发该异常的原因是：](http://developer.android.com/reference/android/graphics/Bitmap.html#createBitmap%28int,%20int,%20android.graphics.Bitmap.Config%29)

> 如果宽度或高度 <= 0

所以，尝试推迟创建`Bitmap`直到视图出现**之后**，或者找到另一种方法来计算宽度/高度。

[这个问题有一些关于如何推迟这个计算以避免 0 结果的选项/答案](https://stackoverflow.com/q/6939002/119114)*

# javascript - 当内容脚本需要时通知后台任务

> ID：14948457
> 
> 赞同：0
> 
> 时间：2013-02-19T01:44:39.897
> 
> 标签：javascript, google-chrome-extension

我有一个运行一些东西的主要任务（background.js）。

我需要在我的应用程序的后台脚本上创建一个新的触发事件，以便他将创建一个新的一天（24 小时）的超时。但是，我不想检查我在后台输入的每个页面，我想做的是通过一个 content_script 页面向我的后台任务（同一个应用程序）发送某种“消息”。

我需要什么：从我的 content_script 在我的背景上运行一个函数。

是否可以？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T07:10:32.433

是的，可以通过消息传递。您可以参考以下脚本作为参考

# 示范

当从内容脚本触发时，以下代码将在后台页面中执行一个函数。

### 清单.json

已注册的背景和内容脚本，带有扩展名并添加了必要的权限

```
{
    "name": "Run Background page function from content script",
    "description": "",
    "version": "1",
    "manifest_version": 2,
    "background": {
        "scripts": [
            "background.js"
        ]
    },
    "content_scripts": [
        {
            "matches": [
                "https://www.google.co.in/*"
            ],
            "js": [
                "myscript.js"
            ]
        }
    ],
    "permissions": [
        "https://www.google.co.in/*"
    ]
} 
```

### 背景.js

它包含一些微不足道的函数和一个用于触发函数调用的侦听器

```
//Some Trivial Function
function runme() {
    console.log("I am executed ... ");
}
//Listener fired when message is recieved
chrome.extension.onMessage.addListener(function (content) {
    if (content.message == "Hey i am from Google.co.in Page please run runme function") { // Check for correct message
        runme(); // Invoke function
    }
}); 
```

### myscript.js

```
//Trigger background page through message passing
chrome.extension.sendMessage({
    message: "Hey i am from Google.co.in Page please run runme function" //Some message
}); 
```

# 输出

您可以看到调用触发器时正在运行的后台函数。

# 参考

*   [消息传递](https://developer.chrome.com/extensions/messaging.html)。

# android - 如何从 ArrayAdapter 继承？

> ID：14948462
> 
> 赞同：2
> 
> 时间：2013-02-19T01:45:14.373
> 
> 标签：android, android-arrayadapter

所以我找到了一些我正在努力工作的代码。我是 Android/Exclipse/Java 的新手，但我仍在努力思考整个事情。然而，我正在盲目地主演自己。

说我有这个：

```
private class RSSListAdapter extends ArrayAdapter<MyRSSItem> {
  private List<MyRSSItem> objects = null;        
  public RSSListAdapter(Context context, int viewid, List<MyRSSItem> objects) {
    super(context, viewid, objects);                       
    this.objects = objects;            
  }
} 
```

然后在其他地方：

```
myRssAdapter = new RSSListAdapter(thisActivityContext, newsListView, myItemsDataArrayList); 
```

where`myItemsDataArrayList`声明如下：

```
ArrayList<MyRSSItem> myItemsDataArrayList = new ArrayList<MyRSSItem>(); 
```

我收到此错误：

> 构造函数 News.RSSListAdaptor(Context, ListView, ArrayList) 未定义

当然我试过谷歌，但是，没有运气。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T01:48:29.787

构造函数的定义是这样的：

```
public RSSListAdapter(Context context, int viewid, List<MyRSSItem> objects) { 
```

这意味着它只接受 a `Context`、 an`int`和 a`List <MyRSSItem>`

但是，您使用以下参数调用构造函数：

```
new RSSListAdapter(thisActivityContext, newsListView, myItemsDataArrayList); 
```

第二*个*参数是 a `newsListView`，它不是 a `int`，它是 a `ListView`。它们不是同一类型，因此会出现编译时错误。

如果您更改为`android.R.id.text1`，它应该可以工作，因为这是一个有效的 TextView id，就像[超类构造函数](https://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter%28android.content.Context,%20int,%20java.util.List%3CT%3E%29)所要求的那样。

并且绝对不要忘记在创建后将`ListView`' 适配器设置为您的适配器。`RSSListAdapter`

有关更详细的信息，[本](http://www.vogella.com/articles/AndroidListView/article.html)教程非常有用。

# c++ - C++ 从头文件定义构造函数

> ID：14948464
> 
> 赞同：1
> 
> 时间：2013-02-19T01:45:16.593
> 
> 标签：c++, compiler-errors, instantiation, unresolved-external, lnk2019

**class_one.h**：

```
#ifndef CLASS_ONE
#define CLASS_ONE
#include <string>

namespace ones{

    typedef enum{BLACK, WHITE, RED} b_color;

    typedef char b_letter;
    const b_letter letters[4] = {'A', 'B', 'C', 'D'};

    class one{
        b_color color;
        b_letter letter;
        public:
        one(b_color, b_letter);
        std::string combo();
        b_color getColor();
        b_letter getLetter();
    };
}
#endif 
```

给定这个头文件，我应该如何创建 .cpp 文件，然后如何在另一个文件 main.cpp 中实例化这个类？我会这样想：

**class_one.cpp**

```
#include <iostream>
#include "class_one.h"

using namespace ones;

class one
{
    b_color color;
    b_letter letter;
public:

    one(b_color c, b_letter l) //Not sure about this one..
    {
        color = c;
        letter = l;
    }
    std::string combo()
    {
        return "blahblah temporary. letter: " + letter; //not finished
    }
    b_color getColor()
    {
        return color;
    }
    b_letter getLetter()
    {
        return letter;
    }
}; 
```

然后实例化它，我会做这样的事情：

**主文件**

```
#include "class_one.h"

int main()
{
    ones::one test(ones::BLACK, ones::letters[0]);
    //cout<<test.name()<<endl;
    return 0;
} 
```

一切都是从更大的文件集群中提取的，但这是我问题的要领。头文件应该是正确的，但我不确定如何实例化“一个”类，而不是使用该构造函数。我认为我在 .cpp 中定义的构造函数是错误的。我习惯了 Java，所以我从来没有见过像头文件中的构造函数，如果它甚至是构造函数的话。对我来说，它看起来不像`method(int, int)`我习惯的那样：`method(int a, int b)` 运行时我收到此错误：

```
main.obj : error LNK2019: unresolved external symbol "public: __thiscall ones::one::one(enum ones::b_color, char)" (??0one@ones@@QAE@W4b_color@1@D@Z) referenced in function _main
<path>/project.exe : fatal error LNK1120: 1 unresolved externals 
```

很抱歉我在这里有一个非常愚蠢的命名，但它确实有意义。问题代码中可能有一些输入错误，因为我现在大部分都是手工编写的。任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T01:49:38.490

您的 cpp 文件应如下所示：

```
#include "class_one.h"

ones::one::one(ones::one::b_color c, ones::one::b_color l)
{
    //code here
}

std::string ones::one::combo()
{
   // code here
}

// additional functions... 
```

等等。您无需使用类块重新定义类，您只需像我在此处显示的那样指定单个函数定义。函数定义格式应该是这样的：

```
[return type] [namespace]::[class]::[function]([parameters])
{
    // code here
} 
```

看起来你很擅长实例化。您也不必重新声明成员变量。

# javascript - 谷歌图表连续轴上的数据差距

> ID：14948467
> 
> 赞同：2
> 
> 时间：2013-02-19T01:46:12.670
> 
> 标签：javascript, charts, google-visualization

我有一个带有连续日期时间 X 轴的谷歌图表。我的数据以短暂的突发形式出现，突发之间有很长的延迟。我想让图表有一个不连续的 X 轴，但在样本*期间仍然有自动生成的时间戳。*那可能吗？

基本上，假设我有 3 个样本，每个样本有 300 个数据点，记录间隔为 10 秒，但它们之间有小时间隔。我想让我的图表以可以区分的缩放级别显示 30 秒的数据。我卡住了吗？

编辑：根据@jmac 的建议，以下是数据的示例：

```
1360096658270, 10.228335
1360096658274, 10.308437
1360096658277, 10.294770
[...]
1360096673968, 9.014943
1360096673969, 8.971434
1360096673970, 9.041739
1360096673971, 9.097484
^^-- 15 seconds
<--- (~10 days)
1360989176509, 9.856928
1360989176513, 9.852907
1360989176517, 9.861740
1360989176523, 9.820416
1360989176527, 9.871401 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T23:14:43.807

**方法 1：多个图表**

这可能是最简单的概念（尽管仍然很麻烦）。

概括：

1.  将数据分组（消除差距）
2.  为每个组创建单独的图表
3.  消除第一个之后的每个图表的 vAxis 标签
4.  创建一致的 vAxis 最小值/最大值
5.  使用 CSS 将图表并排排列

细节：

如果你有一个静态数据集，你可以手动拆分它。如果它不是静态的，那么您必须编写一些 javascript 来拆分您的数据。由于我不知道您的数据是如何工作的，因此我在这里无法真正帮助您。

至于设置图表，我将由您决定。我不知道您希望它们如何格式化，所以我无法真正帮助您了解当前信息。

要为所有图表创建一致的轴值，您需要在 javascript 函数中使用一些基本数学来为每个 vAxis 最大值/最小值分配相同的数字。这是一个示例：

```
// Take the Max/Min of all data values in all graphs
var totalMax = 345;
var totalMin = -123;

// Figure out the largest number (positive or negative)
var biggestNumber = Math.max(Math.abs(totalMax),Math.abs(totalMin));

// Round to an exponent of 10 appropriate for the biggest number
var roundingExp = Math.floor(Math.log(biggestNumber) / Math.LN10);
var roundingDec = Math.pow(10,roundingExp);

// Round your max and min to the nearest exponent of 10
var newMax = Math.ceil(totalMax/roundingDec)*roundingDec;
var newMin = Math.floor(totalMin/roundingDec)*roundingDec;

// Determine the range of your values
var range = newMax - newMin;

// Define the number of gridlines (default 5)
var gridlines = 5;

// Determine an appropriate gap between gridlines
var interval = range / (gridlines - 1);

// Round that interval up to the exponent of 10
var newInterval = Math.ceil(interval/roundingDec)*roundingDec;

// Re-round your max and min to the new interval
var finalMax = Math.ceil(totalMax/newInterval)*newInterval;
var finalMin = Math.floor(totalMin/newInterval)*newInterval; 
```

**方法2：多个系列**

只要查看您的数据的人了解他们是不同的集合，那么轴就没有理由需要说出确切的日期/时间，只要他们可以在其他地方轻松弄清楚。

概括：

1.  将每个“序列”的数据分成不同的系列
2.  人为地缩短序列之间的间隔（如果每个序列是 15 秒，那么序列之间有 5 秒的间隔，或者每 15 秒开始一次）
3.  运行开始/结束时使用名称标签格式化每个不同的系列

细节：

同样，您必须手动拆分数据或创建 javascript 来执行此操作，但您要做的是将每组数字移动到自己的列中，如下所示：

```
1360096658270, 10.228335, null
1360096658274, 10.308437, null
1360096658277, 10.294770, null
[...]
1360096673968, 9.014943, null
1360096673969, 8.971434, null
1360096673970, 9.041739, null
1360096673971, 9.097484, null
^^-- 15 seconds
<--- (~10 days)
1360989176509, null, 9.856928
1360989176513, null, 9.852907
1360989176517, null, 9.861740
1360989176523, null, 9.820416
1360989176527, null, 9.871401 
```

这将使每个系列具有不同的颜色（并且在图例中/鼠标悬停时具有不同的标签），因此您可以看到运行之间的差异，但也会得到一个很好的工具提示，说“此数据是从 X 到 Y 收集的”所以如果获取数据的时间很重要，那么它仍然存在（尽管不在 X 轴上）。

这些是最简单的方法。

**方法 3：手动编辑 X 轴标签**

第三种方式最灵活，但也需要最多的工作。您可以创建自定义 javascript 函数来操作 SVG 中的 X 轴标签。@jeffery_the_wind在[此](https://stackoverflow.com/questions/14526032/google-charts-bubble-charts-categorical-x-and-y-axes-instead-of-numeric)提供更多详细信息：

```
/*
 *
 * The following 2 functions are a little hacky, they have to be done after calling the "draw" function
 * The bubble chart originally displays only numbers along the x and y axes instead of customer or product names
 * These 2 functions replace those numbers with the words for the customers and products
 *
 */
for ( var i = -2; i < products.length + 1; i ++ ){
    $('#customer_product_grid svg text[text-anchor="start"]:contains("'+i+'")').text(function(j,t){
        if (t == i){
            if (i >= products.length || i < 0){
                return " ";
            }
            return products[i];
        }
    });
}

for ( var i = -2; i <= customers.length + 3; i ++ ){
    $('#customer_product_grid svg text[text-anchor="end"]:contains("'+i+'")').text(function(j,t){
        if (i >= customers.length + 1 || i <= 0){
            return " ";
        }else if (t == i){                    
            return customers[i-1];
        }
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T08:52:37.900

[谷歌关于自定义轴](https://developers.google.com/chart/interactive/docs/customizing_axes)的文档描述了如何做你所要求的。您可以将列的类型更改为字符串并使用格式化的日期字符串进行填充。

# ruby-on-rails - 将整个数组作为局部变量传递给部分，然后用集合渲染另一个部分

> ID：14948469
> 
> 赞同：0
> 
> 时间：2013-02-19T01:46:25.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我有一个分层的部分方案，正在尝试编写 DRY 代码。我需要将一个变量传递给一个局部变量并保持它的数组状态，以便在局部变量中我可以使用`:collection`参数渲染另一个局部变量。

**在此页面上，我呈现`'feed'`部分内容：**

```
 %div.row
    %div.span6
      %h1 Posts 
      /Post feed
      =render 'feed',:locals => {:feed_items => @posts}
    %div.span6
      %h1 Groups
      /Group feed
      =render 'feed', :locals => {:feed_items => @groups} 
```

**以下是`'feed'`部分内容：**

```
%ol
  -if feed_items.first.is_a?(Post)
    =render :partial => 'post_feed_item', :collection => feed_items
  -else
    =render :partial => 'group_feed_item', :collection => feed_items
=will_paginate feed_items 
```

**目前给我这个错误：**

```
undefined local variable or method `feed_items' for #<#<Class:0x007fa8e2aa8b00>:0x007fa8e5405390> 
```

**更新 1：**

真正的错误。final partial 不能识别`:collection`传递给它的组件：

```
undefined local variable or method `feed_item' for #<#<Class:0x007fa8e2aa8b00>:0x007fa8e2c6d670> 
```

**最终部分`'post_feed_item'`（第 3 层？）：**

```
%li.feed_item.row-fluid
  %div.image.span3
    =link_to image_tag(feed_item.assets.empty?  ? '/assets/small.png': feed_item.assets.first.image.url(:small), :alt => feed_item.title), post_url(feed_item) 
```

所以第一部分有一些问题......`feed_items`没有被解析为数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:23:19.913

打电话

```
= render partial: 'post_feed_item', collection: feed_items 
```

会给你一个`post_feed_item`局部变量而不是一个`feed_item`变量。您要么使用它，要么传入一个`as`选项来设置局部变量名称。

```
= render partial: 'post_feed_item', collection: feed_items, as: :feed_item 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T01:49:23.190

我认为您需要将其渲染为部分：

```
 %div.row
    %div.span6
      %h1 Posts 
      /Post feed
      =render :partial => 'feed',:locals => {:feed_items => @posts}
    %div.span6
      %h1 Groups
      /Group feed
      =render :partial => 'feed', :locals => {:feed_items => @groups} 
```

# android - 使用经过时间类型设置警报会从内核中的 dmesg 打印不准确的延迟

> ID：14948472
> 
> 赞同：1
> 
> 时间：2013-02-19T01:46:47.647
> 
> 标签：android, kernel, alarmmanager

有人可以解释一下内核日志中的时间戳差异吗？

我们编写了一个应用程序来在指定时间唤醒 Android，该应用程序利用`AlarmManager`API 并设置：

```
AlarmManager.ELAPSED_REALTIME_WAKEUP 
```

该应用程序按预期工作，并在用户指定的时间正确唤醒。但是内核时间戳存在差异。`AlarmManagerService.java`我从to跟踪源代码`alarm-dev.c`并确认 Android 正确设置了闹钟唤醒时间并将其发送到内核（例如，从 Java 层 Android 用于`SystemClock.elapsedRealtime()`获取经过时间并添加 100 秒并将值转换为秒和纳秒和最后通过JNI发送到内核层）。

但是，在读取`dmesg`日志时，内核时间戳似乎存在差异。在调用具有状态的函数`alarm_ioctl`时打印以下消息：`ANDROID_ALARM_SET(0):``dmesg`

```
[20450.036529] alarm 2 set 20544.720000000 
```

这意味着这`[20450.036529]`是当前时间，`20544.720000000`也是`AlarmManager`唤醒 Android 的时间。该值`20544.720000000`是从 Android 层和 logcat 的时间戳（例如`logcat -v time`）设置的，该值是 Android 应该唤醒的时间。

从 Android 层到内核层只需要不到十分之一秒，但为什么增量是`94.683471`，`5.316529`比它应该的要小？或者经过的时间与打印的内核时间不同`dmesg`？

另一个有趣的观察是，如上所述，应用程序确实在用户指定的时间唤醒。所以在这种情况下，用户调用应用程序`AlarmManager`后，平板电脑会在 100 秒内唤醒。

谢谢，

参考：

*   [`AlarmManagerService.java`](https://github.com/android/platform_frameworks_base/blob/master/services/java/com/android/server/AlarmManagerService.java)
*   [`alarm-dev.c`](https://github.com/TripNRaVeR/enrc2b-jb-3.1.10-endeavoru/blob/master/drivers/rtc/alarm-dev.c)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:54:14.760

**选项1**

您可能希望在消息中嵌入时间戳，而不是依赖于 printk() 生成的时间戳。这种方法至少应该给你一个真正的时间衡量标准。

**选项 2**

您可以调查**kernel/printk.c**使用的 API来获取时间戳。

如果*printk*正在使用 cpu_clock() 您可能需要考虑以下几点：

[中央处理器时钟](http://lxr.free-electrons.com/source/kernel/sched/clock.c#L14)

```
 14  * What:
 15  *
 16  * cpu_clock(i) provides a fast (execution time) high resolution
 17  * clock with bounded drift between CPUs. The value of cpu_clock(i)
 18  * is monotonic for constant i. The timestamp returned is in nanoseconds 
```

# design-patterns - Haskell 不正确的 IO 输出

> ID：14948477
> 
> 赞同：2
> 
> 时间：2013-02-19T01:47:01.563
> 
> 标签：design-patterns, haskell, io, return

这就是我所拥有的，我想要这样的输出

```
*Main> sumThree
Please enter three integers:
1
2
3
Their sum is: 6
(1,2,3) 
```

然而，我不断得到，没有总和

```
*Main> sumThree
Please enter three integers:
1
2
3
Their sum is:
(1,2,3) 
```

* * *

```
**summ :: Integer -> Integer -> Integer -> IO Integer
summ x1 x2 x3 = return(x1+x2+x3)
sumThree :: IO (Integer, Integer, Integer)
sumThree = do putStr "Please enter tree integers:"
              x1 <- getInteger
              x2 <- getInteger
              x3 <- getInteger
              putStr "Their Sum is: "
              summ x1 x2 x3
              return(x1,x2,x3)** 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:03:54.743

您必须实际打印`summ`.

不要`return`在您的`summ`函数中，以便函数的结果类型`Integer`与`IO Integer`. 然后做

```
putStr (show (summ x1 x2 x3)) 
```

而不仅仅是`summ x1 x2 x3`.

另外，您知道`sum`内置（Prelude）功能对吗？它需要一个数组`Num`，所以你可以这样做`putStr (show (sum [x1, x2, x3]))`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T06:20:57.290

我可能在这里对您的代码读得过多，所以如果我错了，请纠正我，但看起来您对 Haskell 程序的工作方式感到困惑，尤其是对什么`return`意思感到困惑。

`return`Haskell 中的 return 语句不是您可能熟悉的许多命令式编程语言。`return`在 Haskell 中是一个*函数*。像任何其他函数一样，您将其应用于参数以计算值。它对流控制**没有影响**，特别是它不会导致它的参数被“返回”为你所在的函数计算的值。

对于`IO`monad，`return`是这种类型的函数：`return :: a -> IO a`，这意味着它接受任何类型的值并为您提供“该`IO`类型的版本”中的值。在 的特定情况下`return`，它为您提供了一个将产生该值的无操作 IO 计算。

这个：

```
summ :: Integer -> Integer -> Integer -> IO Integer
summ x1 x2 x3 = return(x1+x2+x3) 
```

对于 Haskell 程序员来说，这是一个非常奇怪的功能。没有必要做 IO 来计算 3 个整数的和，那么为什么结果类型是`IO Integer`？在我*看来*，你试图写这个：

```
summ :: Integer -> Integer -> Integer -> Integer
summ x1 x2 x3 = return(x1+x2+x3) 
```

这会给你一个关于`Integer`不是一元类型的类型错误。您可以通过更改类型来解决此问题，但类型是对 3 个整数求和的正确表达式，因此将其更改为其他内容相当奇怪。由于`return`根本不需要计算函数的结果，因此您可以这样做：

```
summ :: Integer -> Integer -> Integer -> Integer
summ x1 x2 x3 = x1+x2+x3 
```

同样，您的`sumThree`功能也很奇怪。当您在 Haskell 解释器中执行此操作时：

```
*Main> sumThree
Please enter three integers:
1
2
3
Their sum is:
(1,2,3) 
```

解释器正在评估`sumThree`IO 操作，它要求您输入 3 个整数并打印“它们的总和为：”，并产生值`(1, 2, 3)`。动作本身在`sumThree`之后不打印任何内容`"Their sum is:"`，它是为您打印的解释器，它打印的是执行产生的值`sumThree`。

这是 do 块中的最后一件事，它决定了`sumThree`;产生的值。在这种情况下，就是`return(x1,x2,x3)`。因此，您可以看到这不可能是 3 个数字的总和，因为您非常明确地采用 tuple `(x1, x2, x3)`，将其包装成一个`IO`带有 的动作`return`，然后就是结果。

你的倒数第二行：

```
summ x1 x2 x3 
```

是一个`IO`动作（感谢`Integer -> Integer -> Integer -> IO Integer`for的类型`summ`）。所以它被允许坐在那里，它被“执行”以产生它的价值，但你对它不做任何事情！

所以有两件事：

1.  `summ``return`根本不需要
2.  `sumThree`实际上应该打印您想要打印的内容

把它们放在一起你可以得到这样的东西：

```
summ :: Integer -> Integer -> Integer -> Integer
summ x1 x2 x3 = x1 + x2 + x3

sumThree :: IO ()
sumThree = do putStr "Please enter tree integers:"
              x1 <- getInteger
              x2 <- getInteger
              x3 <- getInteger
              putStr "Their Sum is: "
              putStr (show (summ x1 x2 x3)) 
```

那是如果你不想`sumThree`产生总和以及打印它。如果`sumThree` *应该*产生价值以及打印它，你会想要更像这样的东西：

```
summ :: Integer -> Integer -> Integer -> Integer
summ x1 x2 x3 = x1 + x2 + x3

sumThree :: IO Integer
sumThree = do putStr "Please enter tree integers:"
              x1 <- getInteger
              x2 <- getInteger
              x3 <- getInteger
              putStr "Their Sum is: "
              putStr (show (summ x1 x2 x3))
              return (summ x1 x2 x3) 
```

# big-o - 哪个更大：O(n*logn) 还是 O(1)？

> ID：14948480
> 
> 赞同：2
> 
> 时间：2013-02-19T01:47:37.490
> 
> 标签：big-o

我们在我的算法课上讨论了主定理，对于一个问题，我试图比较 nlogn 与 1 以找出它属于 MT 的哪种情况。但我很难确定哪个更大。

编辑：这是为了解决重复问题。等式是 T(n) = 2T(n/4) + N*LogN。把它扔进去以防万一它有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T01:51:33.127

这样想：

*   `O(N*LogN)`将以`N`这样的方式增加，对于任何`X`，无论有多大，您都可以找到一个大于`N`的值。`N*LogN``X`
*   `O(1)`将保持不变，无论是什么`N`。

这意味着*渐近*`O(1)`更好，即对于某些（可能非常高的）值将变得更慢。*`N``O(N*LogN)`*

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:15:14.997

如果一个算法是 O(NlogN)，这意味着存在一个数字 A 和一个数量的执行时间 B，这样对于任何大于 A 的输入大小 N，执行时间将小于 B 乘以 NlogN。

如果一个算法是 O(1)，这意味着存在一些固定的时间量 C，无论输入大小如何，算法都可以保证完成。

在比较两种算法时，一种是 O(NlgN)，一种是 O(1)，通常会发现 O(1) 算法对于足够大的 N 值更快，但在许多情况下对于较小的 N 值，O(NlgN) 算法可能更快。

事实上，虽然像 O(N^3) 或 O(N^4) 算法这样的算法通常看起来很糟糕，但如果 N 通常为一个小数字（例如 1-5 左右）并且永远不会变得很大（即使是偶尔的 50 值也会严重影响性能）。*

# javascript - 如果对文本框进行了更改，则禁用提交按钮并启用

> ID：14948488
> 
> 赞同：1
> 
> 时间：2013-02-19T01:48:16.633
> 
> 标签：javascript, jquery, asp.net-mvc

我有一个文本框和一个提交按钮。我希望在页面加载时按钮变灰（禁用），当用户在文本框中进行更改时，无论是添加文本还是删除文本，该按钮都将被启用，一旦保存，该按钮将再次被禁用。

```
<h3>Username</h3>
   @Html.TextBoxFor(m=>m.username)

<button class="btn btn-small savebtn" type="submit" value="User Name">Save</button> 
```

现在我遇到的问题是如何将此脚本正确插入到我的视图中。这是我目前的看法：

```
@model Project.Models.UsernameModel

@using (Html.BeginForm("_UsernamePartial", "Account")) {

   <h3>Username</h3>
   @Html.TextBoxFor(m=>m.Username)

<button class="btn btn-small savebtn" type="submit" value="User name">Save</button> 
```

我是否在标签后的底部添加这样的脚本：

```
@section scripts {
<script type="text/javascript">
    $(document).ready(function () {
        $(".savebtn").attr('disabled', 'disabled');

        $("#UserName").keyup(function () {
            $(".savebtn").removeAttr('disabled');
        });

        $(".savebtn").click(function () {
            $(this).attr('disabled', 'disabled');
        });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:01:16.980

如果我正确理解您的要求，您需要这样的东西：

```
$(document).ready(function () {
    //Disable Save Button On Page Load
    $(".savebtn").attr('disabled', 'disabled');

    //When User Name changes, enable Save Button
    $("#UserName").keyup(function() {
        $(".savebtn").removeAttr('disabled');
    });

    //Disable Save Button once clicked
    $(".savebtn").click(function() {
        $(this).attr('disabled', 'disabled');
    });
}); 
```

这是一个示例[JS Fiddle](http://jsfiddle.net/9C6CE/)。

# c++ - Windows 线程睡眠并从另一个线程唤醒

> ID：14948494
> 
> 赞同：1
> 
> 时间：2013-02-19T01:48:47.917
> 
> 标签：c++, windows, multithreading

我有一个线程在一个类中运行，我想在另一个线程唤醒它时让自己进入睡眠状态并唤醒它，如果可能的话，不传递互斥锁或其他元素，所以它是自包含的。

基本上，我已经尝试了在调用 WaitForSingleObject 两次的线程中使用互斥锁的方法，期望它使互斥锁不发出第一次调用的信号，但是每次函数返回 0 因为互斥锁已经发出信号并且线程是互斥锁所有者并且仍然是所有者。例如，我希望一旦睡着了，就会调用一个类方法来释放互斥锁。

在 Windows 中是否有一个简单的方法或者我会被迫打破封装？跑

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:50:55.227

尽管 Waitable 句柄方法是处理此任务的普遍受欢迎的方法，但您始终可以使用 SuspendThread / ResumeThread 来完成您尝试执行的操作，而无需使用 WaitForSingleObject / WaitForMultipleObjects。

这两个函数都处理您想要休眠或唤醒的线程。

# c++ - 为什么 C++11 不支持 'std::function '？

> ID：14948495
> 
> 赞同：7
> 
> 时间：2013-02-19T01:48:48.930
> 
> 标签：c++, function, templates, c++11, variadic-templates

```
#include <functional>

void f1(int)
{}

void f2(int, ...)
{}

int main()
{
    std::function<void(int)>      g1 = f1; // OK.
    std::function<void(int, ...)> g2 = f2; // Error! Not standard C++!
} 
```

为什么C++11不提供专门的模板类如下：

```
template<class ResultType, class... ArgTypes>
class function<ResultType(ArgTypes......)>
{
    // ... ... ...
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T02:51:07.673

我并不是要提供未提供该专业化的最终原因（我不知道），但也许我可以暗示尝试实施它时可能遇到的一些技术障碍。这有望让您了解为什么没有专业化。

让我们首先考虑如何实现`std::function<>`类模板本身。其设计基础的类型擦除技术可以概括如下（这只是一个说明性的*简化*，实际实现要复杂得多）：

```
#include <memory>

template<typename T>
struct function { };

template<typename R, typename... Args>
struct function<R(Args...)>
{

public:

    template<typename F>
    function(F&& f) : _holder(
        new holder<typename std::decay<F>::type>(std::forward<F>(f))
        )
    { }

    R operator () (Args&&... args)
    { _holder->call(std::forward<Args>(args)...); }

private:

    struct holder_base
    { virtual R call(Args&&... args) = 0; };

    template<typename F>
    struct holder : holder_base
    {
        holder(F&& f) : _f(std::forward<F>(f)) { }
        R call(Args&&... args) { return _f(std::forward<Args>(args)...); }
        F _f;
    };

    std::unique_ptr<holder_base> _holder;
}; 
```

现在让我们看看椭圆的特化是什么样子的。首先，提供给可变参数函数的参数的数量和类型在该函数的签名中*并不固定。*因此，我们的专用模板的调用运算符必须是一个接受任意数量和类型参数的函数模板：

```
template<typename R, typename... Args>
struct function<R(Args.......)>
{
    ...

    template<typename... Ts>
    R operator () (Args&&... args, Ts&&... ts)
    { _holder->call(std::forward<Args>(args)..., std::forward<Ts>(ts)...); }

    ... 
```

这反过来又迫使我们将`holder<>`' 调用运算符设为可变参数函数模板。但是，为了实现类型擦除，相同的调用运算符必须是`virtual`，并且函数模板不能`virtual`在 C++ 中。

如果可以轻松转发可变参数（我在这里谈论的是省略号），而不必重复可变模板参数和完美转发，事情肯定会更容易。我不知道实现这一点的简单方法，尤其是如果没有其他参数传递给函数，而不是匹配可变参数列表的参数。

# css - 提交按钮不接受 CSS 样式

> ID：14948499
> 
> 赞同：0
> 
> 时间：2013-02-19T01:49:12.113
> 
> 标签：css, button

我有一个表单中的提交按钮，它没有采用我为其设置的所有样式。我希望提交按钮看起来与我拥有的“下一部分”按钮相同，但看起来不同

以下是一些相关的 HTML：

```
<form>
    <a href="#step2" class="btn">Next Section >></a><br/>
    <input type="submit" name="submit" value="Submit Application" id="submit" />
</form> 
```

这是CSS：

```
.btn, #submit {
    margin-top: 20px;
    background-color: #ccc;
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    border-radius:6px;
    display: inline-block;
    color: #fff;
    font-family: 'Oswald';
    font-size: 20px;
    padding: 12px 24px;
    text-decoration: none;
    cursor: poiner;
    float: right;
}
.btn:hover, #submit:hover {
    cursor: pointer;
    box-shadow: 0px 0px 1px #777;
} 
```

这是一个显示输出差异的 JS Fiddle：[JS Fiddle](http://jsfiddle.net/hSwJN/4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T01:54:49.357

在提交按钮上使用此 CSS。

```
#submit {
    border: none;
} 
```

# python - Python：将重复字典复制到列表中-最后一个字典项被复制到所有列表项

> ID：14948500
> 
> 赞同：1
> 
> 时间：2013-02-19T01:49:20.717
> 
> 标签：python, list, dictionary

考虑到以下几点：

```
import re
sequence = 'FFFFFF{7}FFFFFF'
patterns = [ ('([0-9a-fA-F]+)', 'Sequence'),
    ('(\\([0-9a-fA-F]+\\|[0-9a-fA-F]+\\))', 'Option'),
    ('({[0-9a-fA-F]+})', 'Range'),
    ('(\\[[0-9a-fA-F]+:([0-9a-fA-F]+|\*)\\])', 'Slice'),
    ('(\\?\\?)+', 'Byte_value_Wildcard'),
    ('(\\*)+', 'Byte_length_wildcard') ]
fragment_counter = 0
fragment_dict= {}
fragments_list = []
while sequence:
    found = False
    for pattern, name in patterns:
        m = re.match (pattern,sequence)
        if m:
            fragment_counter+=1
            m = m.groups () [0]
            fragment_dict["index"]=fragment_counter
            fragment_dict["fragment_type"]=name
            fragment_dict["value"]=m
            print fragment_dict
            fragments_list.append(fragment_dict)
            sequence = sequence [len (m):]
            found = True
            break
     if not found: raise Exception ('Unrecognized sequence')

print fragments_list 
```

每次点击“print fragment_dict”行时，我都会得到正确的（预期的）输出：

```
{'index': 1, 'fragment_type': 'Sequence', 'value': 'FFFFFF'}
{'index': 2, 'fragment_type': 'Range', 'value': '{7}'}
{'index': 3, 'fragment_type': 'Sequence', 'value': 'FFFFFF'} 
```

但是，列表项 `fragments_list`是最终字典的 3 个副本，而不是我期望的每一行：

```
[{'index': 3, 'fragment_type': 'Sequence', 'value': 'FFFFFF'}, {'index': 3, 'fragment_type': 'Sequence', 'value': 'FFFFFF'}, {'index': 3, 'fragment_type': 'Sequence', 'value': 'FFFFFF'}] 
```

我假设这是因为`append`引用字典的实例，而不是复制字典的每次迭代。我查看了使用该`list()`功能，但在 dict 项目上它只是给了我一个 dict 键的列表。

我究竟做错了什么？
我并不拘泥于数据类型，我只需要一种方法来为我找到的每个片段保存 3 个数据元素（也许是第 4 个）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:51:24.553

你很亲密。代替从任何序列`list()`生成新的函数（在这种情况下，作为序列的 a 是其键的序列），使用从任何映射生成新的函数。`list``dict``dict()``dict`

或者，也许更简单，只使用该`copy`方法。

或者，更简单地说，只是将它`fragment_dict= {}`移到循环中，这样你就可以构建一个新`dict`的而不是继续重复使用同一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:08:17.627

很高兴看到您实际上正在使用我对您最后一个问题的回答的代码。当我的回答确实有帮助时，我总是很高兴。

考虑到，在您之前的问题中，您表示此解析只是之后处理已解析令牌的热身，您可能会考虑这一点：

为您拥有的每种令牌类型创建一个类。在每个内部实现一个`process`方法，有时会进行实际处理（而不是我在下面的代码中执行的 wolfing、bearing、foxing 和 badgering）。

然后用类解析整个流`Stream`。您可以通过遍历令牌，`Stream.tokens`并且可以处理调用包含的所有令牌`Stream.process`。

您将这些类放在一个 python 文件中，将其导入到您的主代码中，您只需要创建一个实例`Stream`来解析和处理它。

像这样的东西：

```
#! /usr/bin/python3.2

import re

class Sequence:
    def __init__ (self, raw): self.__raw = raw
    def __str__ (self): return 'Sequence {}'.format (self.__raw)
    def process (self): print ('Wolfing sequence {}'.format (self.__raw) )

class Option:
    def __init__ (self, raw): self.__raw = raw
    def __str__ (self): return 'Option {}'.format (self.__raw)
    def process (self): print ('Foxing option {}'.format (self.__raw) )

class Range:
    def __init__ (self, raw): self.__raw = raw
    def __str__ (self): return 'Range {}'.format (self.__raw)
    def process (self): print ('Bearing range {}'.format (self.__raw) )

class Slice:
    def __init__ (self, raw): self.__raw = raw
    def __str__ (self): return 'Slice {}'.format (self.__raw)
    def process (self): print ('Badgering slice {}'.format (self.__raw) )

class Stream:
    patterns = [ ('([0-9a-fA-F]+)', Sequence),
        ('(\\([0-9a-fA-F]+\\|[0-9a-fA-F]+\\))', Option),
        ('({[0-9a-fA-F]+})', Range),
        ('(\\[[0-9a-fA-F]+:[0-9a-fA-F]+\\])', Slice) ]

    def __init__ (self, stream):
        self.__tokens = []
        while stream:
            found = False
            for pattern, cls in self.patterns:
                m = re.match (pattern, stream)
                if m:
                    m = m.groups () [0]
                    self.__tokens.append (cls (m) )
                    stream = stream [len (m):]
                    found = True
                    break
            if not found: raise Exception ('Unrecognized sequence')

    @property
    def tokens (self): return (token for token in self.__tokens)

    def process (self):
        for token in self.__tokens: token.process ()

stream = Stream ('524946(46|58){4}434452[22:33]367672736E')
print ('These are the tokens:')
for idx, token in enumerate (stream.tokens):
    print ('{} at position {}.'.format (token, idx) )

print ('\nNow let\'s process them all:')
stream.process () 
```

这产生：

```
These are the tokens:
Sequence 524946 at position 0.
Option (46|58) at position 1.
Range {4} at position 2.
Sequence 434452 at position 3.
Slice [22:33] at position 4.
Sequence 367672736E at position 5.

Now let's process them all:
Wolfing sequence 524946
Foxing option (46|58)
Bearing range {4}
Wolfing sequence 434452
Badgering slice [22:33]
Wolfing sequence 367672736E 
```

# java - Java中的梯度下降线性回归

> ID：14948503
> 
> 赞同：3
> 
> 时间：2013-02-19T01:49:27.200
> 
> 标签：java, machine-learning, linear-regression

这有点长镜头，但我想知道是否有人可以看看这个。我在这里正确地为线性回归进行批量梯度下降吗？它给出了单个独立变量和截距的预期答案，但没有给出多个独立变量的预期答案。

```
/**
 * (using Colt Matrix library)
 * @param alpha Learning Rate
 * @param thetas Current Thetas
 * @param independent 
 * @param dependent
 * @return new Thetas
 */
public DoubleMatrix1D descent(double         alpha,
                              DoubleMatrix1D thetas,
                              DoubleMatrix2D independent,
                              DoubleMatrix1D dependent ) {
    Algebra algebra     = new Algebra();

    // ALPHA*(1/M) in one.
    double  modifier    = alpha / (double)independent.rows();

    //I think this can just skip the transpose of theta.
    //This is the result of every Xi run through the theta (hypothesis fn)
    //So each Xj feature is multiplied by its Theata, to get the results of the hypothesis
    DoubleMatrix1D hypothesies = algebra.mult( independent, thetas );

    //hypothesis - Y  
    //Now we have for each Xi, the difference between predictect by the hypothesis and the actual Yi
    hypothesies.assign(dependent, Functions.minus);

    //Transpose Examples(MxN) to NxM so we can matrix multiply by hypothesis Nx1
    DoubleMatrix2D transposed = algebra.transpose(independent);

    DoubleMatrix1D deltas     = algebra.mult(transposed, hypothesies );

    // Scale the deltas by 1/m and learning rate alhpa.  (alpha/m)
    deltas.assign(Functions.mult(modifier));

    //Theta = Theta - Deltas
    thetas.assign( deltas, Functions.minus );

    return( thetas );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:29:45.977

您的实施没有任何问题，并且根据您的评论`collinearity`，您在生成`x2`. 这在回归估计中是有问题的。

要测试您的算法，您可以生成两个独立的随机数列。分别选择和的值`w0`，即`w1`和的`w2`系数。计算从属值。`intercept``x1``x2``y`

然后看看你的随机/批量梯度体面算法是否可以恢复`w0`,`w1`和`w2`值

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-08-16T21:29:11.210

我认为添加

```
 // ALPHA*(1/M) in one.
double  modifier    = alpha / (double)independent.rows(); 
```

是个坏主意，因为您将梯度函数与梯度下降算法混合在一起，所以最好在公共方法中使用梯度下降算法，例如 Java 中的以下方法：

```
import org.la4j.Matrix;
import org.la4j.Vector;

public Vector gradientDescent(Matrix x, Matrix y, int kmax, double alpha)
{
    int k=1;
    Vector  thetas = Vector.fromArray(new double[] { 0.0, 0.0});
    while (k<kmax)
    {
        thetas = thetas.subtract(gradient(x, y, thetas).multiply(alpha));
        k++;
    }
    return thetas;
} 
```

# python - 在 Python 中检查图像格式是否无损？

> ID：14948505
> 
> 赞同：3
> 
> 时间：2013-02-19T01:49:32.363
> 
> 标签：python, python-imaging-library, lossless-compression

我正在开发一个要求提交给它的图像是无损的应用程序。目前我正在使用 PIL 打开图像并检查“格式”属性是否为无损格式。这需要我手动保留格式列表，并且我不知道，例如，提交的 jpeg 是否恰好应用了无损变体。

```
import PIL
import PIL.Image

def validate_image(path):
    img = PIL.Image.open(path)
    if not img.format.lower() in ['bmp', 'gif', 'png', ...]:
        raise Exception("File %s has invalid image format %s" % (path, img.format)) 
```

有没有更好的方法来检查图像文件是否无损？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T19:10:28.530

我想我现在明白了：你想通过 PIL 打开图像。您想要拒绝有损图像，因为您正在进行某种科学处理，需要所有丢失的数据，因为对人类视觉处理不重要的信息对您的算法很重要。

PIL 在顶层没有任何类型的接口来区分不同类型的压缩。您*可以*进入图像解码器并假设使用“原始”解码器的任何内容都是无损的，但即使您想这样做，也太有限了——它将排除 GIF、LZW 压缩的 TIFF 等以及JPEG、JPEG 压缩的 TIFF 等

请记住，真正的问题在于消息传递和文档——管理用户期望。检查有损图像实际上只是一种启发式方法，一种捕捉更明显错误并提醒用户需求的方法。所以，你不需要完美的东西，但拥有相当好的东西可能会有所帮助。

所以，只有几个选项，它们都不是很好：

1.  破解 PIL 的解码器源以保留编码信息并将其传递到顶层。显然，这需要在 30 个不同的导入程序中进行一些重要的工作，可能涉及 C 和 Python，并且它会导致您必须针对（缓慢）发展的代码库维护一个补丁——尽管当然，您始终可以将其提交到上游，并希望它能够成为 PIL 的未来版本。

2.  深入解码器本身以在运行时获取信息。您真正能找到的唯一半标准的东西是他们使用的是原始解码器还是位解码器，这根本没有用（许多无损格式都需要位解码器），所以您最终可能会阅读所有 30进口商并编写十几段代码来从中提取信息。

3.  将另一个库与（或代替）PIL 一起使用。例如，虽然 ImageMagick 绝对*不比*PIL 容易得多，但它确实有一个 API 可以告诉您图像文件使用哪种压缩类型。基本上，如果它是`UndefinedCompression`或`JPEGCompression`它是有损的，其他任何东西，它都是无损的。主要的缺点（除了需要安装两个图像库）是PIL可以打开但IM不能打开的文件，反之亦然，以及PIL和IM处理不同的多图像文件，等等。

4.  做你已经在做的事情。通读 30 个进口商，列出哪些是有损的，哪些是无损的。要处理有时无损的 JPEG 和 TIFF 等情况，您可能需要编写不会完全拒绝它们的代码，而是给出警告“这些文件可能有损。您确定要导入它们吗？ " （或者，或者，只为所有有损格式提供“我知道我在做什么”覆盖，然后只考虑 JPEG 和 TIFF 有损。）

对于许多用例，我会非常谨慎地选择#4，但对于你的用例，它实际上似乎很合理。您不是因为您的代码会崩溃，或者出于安全原因或类似原因而试图阻止有损图像；您只是想警告人们，如果他们提交 JPEG，他们将浪费大量时间获取无用的信息，对吗？

# c++ - 使用可同时编译和链接的可执行单元测试开发 C++ DLL？

> ID：14948507
> 
> 赞同：1
> 
> 时间：2013-02-19T01:49:35.850
> 
> 标签：c++, visual-studio-2010, visual-studio, unit-testing, dll

我正在 Visual Studio 2012 中开发一个 C++ 项目，该项目使用驱动程序代码与打开的 DMX 盒（ENTTEC DMX USB PRO）接口。到目前为止，我一直在编写代码并编译为 EXE，以便我可以`main()`用来运行单元测试。

我想把它移植过来，以便我拥有编译成 .DLL 的设备接口代码，然后是一个单独的源文件，其中包含 C++ 代码来编译链接到 DLL 并调用函数来运行测试的 EXE .

本质上，当我去调试时，有没有办法设置 Visual Studio 2012 来生成一个 .DLL 和一个 .exe 调用 .DLL 并一步自动运行 .exe？我是 Visual Studio 的新手，发现它很混乱。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:06:48.330

是的。在您的解决方案中设置两个项目：一个用于您的主要代码（生成 DLL），另一个用于您的可执行文件，您的单元测试所在的位置。然后查看项目依赖项（在 VS2010 的项目菜单下，不确定 2012 年）以使 EXE 依赖于 DLL（这将确保 EXE 在必要时重建/重新链接）。

在解决方案资源管理器中右键单击 EXE 项目并选择属性。如有必要，您可以在那里设置包含/链接器以访问您的头文件/ lib 文件（如果您明确使用 LoadLibrary 或其他东西，则可能没有必要，但我猜您没有这样做）。

现在在构建事件下的 EXE 项目设置中，添加一个运行测试的构建后事件。请注意，如果您的 EXE 从 main() 返回 0 以外的值，VS 可以将其报告为构建中的错误。

# python - 在 python splinter 网络爬虫中设置一个 timout

> ID：14948513
> 
> 赞同：3
> 
> 时间：2013-02-19T01:49:53.517
> 
> 标签：python, selenium-chromedriver, webautomation, splinter

尝试在 python 中设置超时，就像在 ruby​​ 中一样。

我有一个链接，当我单击它时会打开一个弹出窗口，但我无法访问它，因为它会导致脚本冻结，直到我杀死它。几个月来，我一直在尝试访问这个弹出窗口，但对 ruby​​ watir-webdriver 并不满意。

我正在尝试使对弹出窗口的调用超时，然后访问弹出窗口。

```
@timeout(3)
try:
b.execute_script("javascript:openMdlWindow('InvestmentDetailOptions.aspx?IDAssetType=','620','600');if(window.document.RetValue == '2'){window.parent.LoadinIframe('InvestmentDetail.aspx?FromMenu=N&IDAssetType=','Investment Details > Full View','false');}")
except Exception, e:
print 'timeout!' 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-11-22T05:27:03.997

试试这个：

```
from splinter import Browser
from selenium.common.exceptions import TimeoutException
b = Browser('firefox')
b.driver.set_page_load_timeout(1)
try:
   b.visit('http://www.bbc.com')
except TimeoutException:
   pass
print b.html 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-08T01:52:43.297

```
import signal
from time import sleep

class TimeoutException(Exception):
    pass

def do_something_else():
    time = 5
    sleep(time)
    return 'do_something_else has to run for %d seconds' % time

def handler(signum, frame):
    raise TimeoutException 

def do_something_with_timeout(callback, timeout=3):
    signal.signal(signal.SIGALRM, handler)
    signal.alarm(timeout)
    try:
        value = callback()
        signal.alarm(0)
        return value
    except TimeoutException:
        pass
    signal.signal(signal.SIGALRM, signal.SIG_IGN)
    return 'time out'

def main():
    print 'hello'
    print do_something_with_timeout(do_something_else)
    print 'world'

main() 
```

# ios - 游戏中心沙盒——既没有真正登录也没有真正退出

> ID：14948518
> 
> 赞同：1
> 
> 时间：2013-02-19T01:50:19.500
> 
> 标签：ios, login, sandbox, game-center, logout

我正在开发我的应用程序的新版本。我正常使用沙盒有一段时间了，但现在我所有的设备都遇到了一个非常奇怪的问题。他们似乎已半登录到游戏中心。这对他们不起作用，但他们也无法注销。这是我的身份验证方法：

```
- (void)authenticateLocalPlayer {
    GKLocalPlayer* localPlayer = WJLocalPlayer;
    WJLog(@"Authenticating local user...");
    if (localPlayer.authenticated == NO) {
        localPlayer.authenticateHandler = ^ (UIViewController* vc, NSError *error) {
            if (error) {
                WJLog(@"Authentication failed! %@", [error localizedDescription]);
            }
            else {
                WJLog(@"Authentication succeeded!");
                NSString* name = [GKLocalPlayer localPlayer].displayName;
                WJLog(@"display name is %@", name);
                NSString* alias = [GKLocalPlayer localPlayer].alias;
                WJLog(@"alias is %@", alias);
                GKTurnBasedEventHandler *ev = [GKTurnBasedEventHandler sharedTurnBasedEventHandler];
                ev.delegate = self;
            }
        };
    }
} 
```

这是我从日志语句中看到的 [WJLog 只是我自己的 NSLog 版本，没有垃圾]：

```
Authenticating local user...
Authentication succeeded!
display name is Me
alias is (null) 
```

我可以在游戏中心应用程序中登录或退出。没什么区别。我总是看到上面的。我什至尝试将其中一台设备恢复为出厂设置。结果还是一样。我还尝试为我的应用程序的新版本禁用和重新启用游戏中心。结果还是一样。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T05:11:07.317

您完全忽略了 UIViewController 参数。如果它存在，您应该将其呈现给用户，以便他们可以登录。可能您现在才遇到这种情况，因为您登录到非沙盒游戏中心，现在当您运行它想要询问的应用程序时您的沙盒凭据，但您假设您已通过身份验证。

您这里还有一些其他问题：

*   您应该只设置一次 authenticateHandler，在您的应用启动后不久。

*   您应该在您的 authenticateHandler 中检查 localPlayer.authenticated，而不是其他任何地方，因为这是唯一保证它有效的地方。具体来说，在您从后台恢复之后，直到您的 authenticateHandler 再次被调用，这是一个毫无意义的值。如果您在其他地方需要它，请使用在启动时以及在您的 applicationWillEnterForeground 方法中初始化为 false 的全局变量，并且只有在您确定 localPlayer 实际经过身份验证时才在您的 authenticateHandler 中设置为 true。

*   检查错误并通过各种方式记录它，但它不会告诉您任何关于身份验证是否真正成功的信息，因此请删除“else”。

看看[这里](http://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/GameKit_Guide/Users/Users.html#//apple_ref/doc/uid/TP40008304-CH8-SW19)的文档。

# c - char** 到 char*

> ID：14948519
> 
> 赞同：0
> 
> 时间：2013-02-19T01:50:24.413
> 
> 标签：c

所以，

我有一个字符**；这本质上是一个带有指向该句子中每个单词的指针的句子；IE

```
'h''i''\0''w''o''r''l''d''\0''y''a''y''!''\0' 
```

在这种情况下，我希望使用一个可以接受不同字数和字母数的句子的函数来提取最后一个 char*（耶！）。有任何想法吗？到目前为止，我发现了一些库函数可以做类似的事情，但没有一个可以完全做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:56:31.990

当您将值分配给 时`char **`，您如何跟踪最后一个单词？您的问题的答案取决于此。您可以使用终端值，例如。最后一个单词之后的一个`NULL`值，然后像这样搜索最终值`strlen`，或者将长度存储在一个`size_t`变量中，或者`struct`使用一个灵活的数组成员（即`struct fubar { size_t size; char *word[]; }`，随着数组的增长，使用一些`push_back`函数来重新分配整个对象，并递增`size`） . 如果没有有关您迄今为止编写的代码的更多信息，我无法确定其中哪一个适用于您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:02:13.983

为此使用适当的数据结构。例如：

```
struct sentence {
    size_t word_count;
    char** words;
}; 
```

然后，您将始终能够在 O(1) 时间内找到最后一个单词：

```
struct sentence blah;
// ...
char* last_word = blah.words[blah.word_count - 1]; 
```

# magento - Magento Adminhtml 覆盖模块不起作用

> ID：14948525
> 
> 赞同：0
> 
> 时间：2013-02-19T01:51:03.553
> 
> 标签：magento, overriding, adminhtml

源于[我的最后一个问题](https://stackoverflow.com/questions/14905791)，我很难尝试进行覆盖。我也在做 MudithaE[在这里](https://stackoverflow.com/questions/1876897)的回答。

我想实现`_prepareColumns()`在文件中找到的我自己的`app/code/core/Mage/Adminhtml/Block/Sales/Order/Grid.php`。我设置了模块的目录和文件，如下所示。在研究的过程中，我看到很多开发人员喜欢这样做`Dev_Module_Block_Adminhtml_blah`，所以我尝试在代码中随处更改目录结构和类名。不用找了。我的 Cycleworks_SalesGridImproved 模块也出现在系统 -> 配置 -> 高级列表中。

**文件** `app/code/local/Cycleworks/SalesGridImproved/Adminhtml/Block/Sales/Order/Grid.php`：：

```
<?php
class Cycleworks_SalesGridImproved_Adminhtml_Block_Sales_Order_Grid  extends Mage_Adminhtml_Block_Sales_Order_Grid {
    protected function _prepareColumns() // tried public too
    {
                    parent::_prepareColumns();
        ...
        ...
        $this->addColumn('created_at', array(
            'header' => Mage::helper('sales')->__('Purchased On'),
            'index' => 'created_at',
             'type' => 'datetime',
             'format' => 'MMM d, h:mm a',
            'width' => '165px', 
        ));
        ...
        ...
        return $this; 
    }
} 
```

`app/code/local/Cycleworks/SalesGridImproved/etc/config.xml`：

```
<?xml version="1.0"?>
<config>
    <modules>
        <!-- also tried: Cycleworks_SalesGridImproved -->
        <Cycleworks_Adminhtml>
            <version>0.0.01</version>
        </Cycleworks_Adminhtml>
    </modules>

    <global>
        <blocks>
            <adminhtml>
                <salesgridimproved>
                      <class>Cycleworks_SalesGridImproved_Adminhtml_Block_Sales_Order_Grid</class>
                </salesgridimproved>
                <rewrite>
                    <sales_order_grid>Cycleworks_SalesGridImproved_Adminhtml_Block_Sales_Order_Grid</sales_order_grid>
                </rewrite>
            </adminhtml>
        </blocks>        
    </global>

</config> 
```

并在`/app/etc/modules/Cycleworks_SalesGridImproved.xml`：

```
<?xml version="1.0"?>
<config>
    <modules>
        <Cycleworks_SalesGridImproved>
            <active>true</active>
            <codePool>local</codePool>
        </Cycleworks_SalesGridImproved>
    </modules>
</config> 
```

请告诉我看看我错过了什么......谢谢！

* * *

**更新：**

刚刚发现扩展 EM_DeleteOrder 也覆盖了与我相同的销售订单网格类。他的扩展配置比我的更复杂，因为他的设置是在 Mage 核心之前调用。config.xml 肯定很忙！

```
<?xml version="1.0"?>
<config>
    <modules>
        <EM_DeleteOrder>
            <version>1.0.0</version>
        </EM_DeleteOrder>
    </modules>
    <global>
        <rewrite>
        <em_emadmin_adminhtml_sales_order>
            <from><![CDATA[#/admin/sales_order/#]]></from>
            <to>/emadmin/adminhtml_sales_order/</to>
        </em_emadmin_adminhtml_sales_order>
        </rewrite>

        <blocks>
            <adminhtml>
                <rewrite>
                    <sales_order_grid>EM_DeleteOrder_Block_Adminhtml_Sales_Order_Grid</sales_order_grid>
                </rewrite>
            </adminhtml>
        </blocks>       
    </global>
    <admin>
        <routers>
            <em_deleteorder>
                <use>admin</use>
                <args>
                    <module>EM_DeleteOrder</module>
                    <frontName>emadmin</frontName>
                </args>
            </em_deleteorder>           
            <adminhtml>
                <args>
                  <modules>
                    <EM_DeleteOrder_Adminhtml before="Mage_Adminhtml">EM_DeleteOrder_Adminhtml</EM_DeleteOrder_Adminhtml>
                  </modules>
                </args>
            </adminhtml>
        </routers>
    </admin>
</config> 
```

你有什么想法我可以使用类似的语法并让我的模块工作而不必破解他的代码吗？像一个`after="Mage_Adminhtml"`？

* * *

**最终更新：** 可悲的是，下面的 3 个答案不是答案，而是扩展冲突。我会回答我自己的问题并将其标记为已回答。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T04:01:43.870

我刚试过这个，它有效。我认为通过返回`parent::_prepareColumns()`它忽略了您的更改。在函数顶部添加它然后返回`$this`对我来说很好。

```
<?php
class Cycleworks_SalesGridImproved_Adminhtml_Block_Sales_Order_Grid  extends Mage_Adminhtml_Block_Sales_Order_Grid {
protected function _prepareColumns() // tried public too
{
//       ...
  //     ...

parent::_prepareColumns();

    $this->addColumn('created_at', array(
        'header' => Mage::helper('sales')->__('Purchased On'),
        'index' => 'created_at',
         'type' => 'datetime',
         'format' => 'MMM d, h:mm a',
        'width' => '165px',
    ));
 //   ...
   // ...
    return $this; #parent::_prepareColumns();
}
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T01:38:57.803

我在回答自己，因为这是扩展冲突及其解决方案的一个重要教训。此外，我学到了很多关于我们的特定安装以及草率的扩展如何破坏一切的知识。

在更新中，**EM_DeleteOrder**覆盖了 Adminhtml Block Sales Order Grid ( `absog`)。我还使用了扩展**MDN_ExtensionConflict**，虽然它没有检测到我的确切冲突，但它确实告诉我 EM_DeleteOrder 正在使用`absog`. 我搜索了允许在不使用的情况下删除订单的扩展`absog`，这一定是最简单的方法。

扩展**Asperience_DeleteAllOrders**设法在不覆盖整个页面的情况下做到这一点，而是在路由器中捕获某些内容。它对`config.xml`我来说是抽象艺术，所以如果你是一名高级开发人员，我想你会比我更欣赏他的作品。

最终，我找到**了 MageWorx_ExtendedOrders**`absog` ，它用自己的网格替换了整个网格，并具有可配置的附加列。包括自定义运费、订单编辑、订单删除和订单存档。我对这个 149 美元的扩展印象深刻。我还将删除已替换为**MageWorx_ExtendedOrders**的多个扩展。我正在破解他们的扩展程序代码，以将列按我想要的顺序排列并更新日期格式（我将与他们分享我的更改作为功能建议）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T02:11:25.170

`_prepareColumns()`是`protected`，不是`public`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T04:34:04.943

尝试将 adminhtml 文件夹放入块文件夹中，即`app/code/local/Cycleworks/SalesGridImproved/Block/Adminhtml/Sales/Order/Grid`

# php - 定制为与公共应用程序一起使用的私有包装器 - XERO API？

> ID：14948527
> 
> 赞同：0
> 
> 时间：2013-02-19T01:51:31.873
> 
> 标签：php, api, oauth

我正在尝试自定义[Github](https://github.com/XeroAPI/PHP-Xero)上的 PHP Private App 包装器以与公共应用程序一起使用。

我看到这个类默认调用这个类：

```
$this->signature_method = new OAuthSignatureMethod_Xero($this->public_cert, $this->private_key); 
```

然后由此类扩展 - OAuthSignatureMethod_RSA_SHA1。

我知道公共应用程序使用 HMAC_SHA1，所以 OAuthSignatureMethod_Xero 类实际上需要扩展 OAuthSignatureMethod_HMAC_SHA1。

我不确定的是里面有什么功能：

```
class OAuthSignatureMethod_Xero extends OAuthSignatureMethod_HMAC_SHA1 {
   - ?
   - ?
} 
```

课堂上的所有其他内容看起来都应该适用于私人、公共或合作伙伴应用程序。

有人做过吗？或者知道怎么做？

我对 Oauth 和 APi 还很陌生，所以我很难自己定制它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-02T03:42:29.870

我正在使用 Xero-API-PHP-CLASS， [https://github.com/mediabeastnz/Xero-API-PHP-Class](https://github.com/mediabeastnz/Xero-API-PHP-Class)

它很容易使用。我用公共类型进行了测试，效果很好。干杯，基督徒

# c - 动态数组堆栈结构 C

> ID：14948529
> 
> 赞同：1
> 
> 时间：2013-02-19T01:51:49.970
> 
> 标签：c, struct, typedef

我有一些问题。我有点难以理解这段代码。它到底在做什么？

例如：

typedef struct dynArrStruct 做了什么，为什么它的末尾有 dynArr？我知道 typedef 的定义为“允许为已知数据类型创建别名”，但这对我来说是行话。有人可以尝试用外行的话吗？谢谢！

为什么有 2 个结构变量（a1/a2）？

如果需要，链接到完整代码：

[http://www.cs.uic.edu/pub/CS211/CS211LectureNotesS13/dynArr.c](http://www.cs.uic.edu/pub/CS211/CS211LectureNotesS13/dynArr.c)

```
typedef struct dynArrStruct
{
    double *location;
    int length;
    int currSize;
} dynArr;

int main (int argc, char**argv)
{
    struct dynArrStruct a1;
    dynArr a2;
    int i;

    //rest of code
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T01:57:04.783

> 做什么`typedef struct dynArrStruct`以及为什么在它`dynArr`的末尾有？

`typedef`为类型创建别名以节省您的键入时间或提高可读性。在这种特殊情况下，它会`dynArr`为`struct dynArrStruct`.

没有 a `typedef`，即只有这个

```
struct dynArrStruct
{
    double *location;
    int length;
    int currSize;
}; 
```

`struct dynArrStruct`每次需要声明该类型的变量时，您都将被迫编写`struct`。有了 a `typedef`，您可以简单地编写`dynArr`，编译器会将其解释`struct dynArrStruct`为 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:00:41.733

```
typedef struct dynArrStruct
{
    double *location;
    int length;
    int currSize;
} dynArr; 
```

是两段不同代码的简短形式。

```
// define a struct by name dynArrStruct
struct dynArrStruct
{
    double *location;
    int length;
    int currSize;
}; 

//Example of use
struct dynArrStruct d1; 
```

和

```
// define an alias to "struct dynArrStruct" called dynArr
typedef struct dynArrStruct dynArr; 

//Example of use
dynArr d2; //whoa so short! 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T02:10:08.833

除了dasblinkenlight的回答，

```
Why are there 2 struct variables (a1/a2)? 
```

呈现的代码似乎是模块化不良代码（a1）和良好模块化代码（a2）的示例。对 的修改`a1`与对 的修改非常相似`a2`。但是，对 的修改`a2`被抽象为函数（第 53-55 行对应于 中的行`init`，第 57-58 行对应于`push`和中的行`push`），因此可以轻松重用该功能。这种重用的一个例子是第 69-72 行。

# google-oauth - 使用 Google API Java 客户端库刷新令牌

> ID：14948530
> 
> 赞同：5
> 
> 时间：2013-02-19T01:52:15.763
> 
> 标签：google-oauth, google-api-java-client, google-oauth-java-client

我正在使用 Google API Java 客户端[http://code.google.com/p/google-api-java-client/](http://code.google.com/p/google-api-java-client/)并且能够成功获取 Android 的访问令牌。

```
 // Google Accounts
credential = GoogleAccountCredential.usingOAuth2(this, CalendarScopes.CALENDAR);
SharedPreferences settings = getPreferences(Context.MODE_PRIVATE);
credential.setSelectedAccountName(settings.getString(PREF_ACCOUNT_NAME, null)); 
```

由于我希望我的 Web 服务器进行离线 API 调用，因此我需要一个刷新令牌。我一直在广泛搜索，但还没有弄清楚如何去做。

理想情况下，我更喜欢在 WebView 上使用 Google API Java 客户端来获取刷新令牌（无需输入用户名或密码）。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-11-07T03:48:36.167

您还可以通过创建配置为 OAuth 2.0 客户端 ID 的刷新令牌来执行此操作。

转到[https://console.developers.google.com/apis/credentials](https://console.developers.google.com/apis/credentials)

1.  单击“创建凭据”。
2.  单击“OAuth 客户端 ID”。
3.  选择“Web 应用程序”> 命名。
4.  将[https://developers.google.com/oauthplayground](https://developers.google.com/oauthplayground)添​​加到“授权重定向 URI”。
5.  单击创建。

您将需要 ClientId 和 Secret 进行后续步骤。

然后去[https://developers.google.com/oauthplayground/](https://developers.google.com/oauthplayground/)

1.  单击右上角的“AOuth 2.0 配置”。
2.  选中“使用您自己的 OAuth 凭据”。
3.  使用上面创建的 OAuth 2.0 凭据的客户端 ID 和密码更新“OAuth 客户端 ID”和“OAuth 客户端密码”。
4.  在左上角的第 1 步中，选择所有必要的范围。（请注意，请求中不匹配的范围将返回 'invalid_scopes'。）
5.  单击“授权 API”。这会将您重定向到同意页面以允许权限。
6.  在第 2 步中，单击“交换令牌授权码”
7.  您将获得一个带有刷新令牌的访问令牌。我们将需要此刷新令牌进行下一步。

您可以使用此访问令牌对您在范围中指定的服务进行身份验证。访问令牌是短暂的，刷新令牌会在 24 小时后过期，除非它没有绑定到 OAuth 2.0 客户端（我们只是让我们的刷新令牌持续到它被用户撤销或由于 6 个月不活动而过期）。

您需要在访问令牌过期之前刷新它。查看以下示例以了解如何操作。

```
 public String getNewToken(String refreshToken, String clientId, String clientSecret) throws IOException {
            ArrayList<String> scopes = new ArrayList<>();

            scopes.add(CalendarScopes.CALENDAR);

            TokenResponse tokenResponse = new GoogleRefreshTokenRequest(new NetHttpTransport(), new JacksonFactory(),
                    refreshToken, clientId, clientSecret).setScopes(scopes).setGrantType("refresh_token").execute();

            return tokenResponse.getAccessToken();
    } 
```

上面示例中的 clientId 和 clientSecret 指的是 OAuth 2.0 客户端凭据。

您可以像这样创建“GoogleCredential”

```
 public Credential getCredentials() throws GeneralSecurityException, IOException, FileNotFoundException {
        final NetHttpTransport HTTP_TRANSPORT = GoogleNetHttpTransport.newTrustedTransport();
        final JsonFactory JSON_FACTORY = JacksonFactory.getDefaultInstance();

        // Load client secrets.
        String CREDENTIALS_FILE_PATH = "/credentials.json"; //OAuth 2.0 clinet credentials json
        InputStream in = DriveQuickstart.class.getResourceAsStream(CREDENTIALS_FILE_PATH);
        if (in == null) {
            throw new FileNotFoundException("Resource not found: " + CREDENTIALS_FILE_PATH);
        }
        GoogleClientSecrets clientSecrets = GoogleClientSecrets.load(JSON_FACTORY, new InputStreamReader(in));

        String clientId = clientSecrets.getDetails().getClientId();
        String clientSecret = clientSecrets.getDetails().getClientSecret();

        GoogleCredential credential = new GoogleCredential.Builder()
                .setTransport(HTTP_TRANSPORT)
                .setJsonFactory(JSON_FACTORY)
                .setClientSecrets(clientId, clientSecret)
                .build();

        String refreshToken = "<REFRESH-TOKEN>"; //Find a secure way to store and load refresh token
        credential.setAccessToken(getNewToken(refreshToken, clientId, clientSecret));
        credential.setRefreshToken(refreshToken);

        return credential;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-22T13:26:32.100

启动授权流程时需要设置以下内容：

*   批准提示=强制
*   访问类型 = 离线

设置这些参数后，谷歌将返回一个刷新令牌，库将处理刷新。这对我有用：

```
new GoogleAuthorizationCodeFlow.Builder(HTTP_TRANSPORT, JSON_FACTORY, getClientCredential(),
                Arrays.asList(SCOPES)).setCredentialStore(new OAuth2CredentialStore()).setAccessType("offline")
                .setApprovalPrompt("force").build(); 
```

# shell - 使用`find`命令时排除指定目录

> ID：14948537
> 
> 赞同：0
> 
> 时间：2013-02-19T01:53:50.470
> 
> 标签：shell, unix, command-line, find

我有一个包含许多文件的目录（没有子目录）。我希望`find`这些文件。以下让我接近：

```
$ find docs
docs
docs/bar.txt
docs/baz.txt
docs/foo.txt 
```

我不想列出目录本身。我可以这样做：

```
$ find docs -type f
docs/bar.txt
docs/baz.txt
docs/foo.txt 
```

使用通配符似乎也可以解决问题：

```
$ find docs/*
docs/bar.txt
docs/baz.txt
docs/foo.txt 
```

我的理解是，它们以不同的方式工作：使用`-type`，我们提供了到 的单一路径`find`，而在后一种情况下，我们使用通配符扩展将多个路径传递到`find`. 有理由支持一种方法而不是另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:45:28.740

你有一个 UNIX 标签，你的例子有一个 *. 某些版本的 find 对此有问题。如果目录没有子目录。供参考。

通常，要查找的第一个参数必须是目录或目录列表

```
find /dir1 /dir2 -print 
```

Find 是递归的——所以它会跟随每个目录，列出所有东西、符号链接、目录、管道和常规文件。这可能会令人困惑。-type 界定您的搜索

```
find /dir1 /dir2 -type f -print 
```

您还可以使用 find 做额外的输出示例：让 rm 文件超过 30 天，例如：

```
find /dir1 /dir2 -type f -mtime +30 -exec rm {} \; 
```

或提供完整信息

```
find /dir1 /dir2 -type f -mtime +30 -exec ls -l {} \;
find /dir1 /dir2 -type f -mtime +30 -ls   # works on some systems 
```

回答你的问题：因为 find 可能很危险，所以当你使用像 rm 这样的讨厌的命令时，总是完全指定每个目录、文件类型等。您可能忘记了您最喜欢的目录也在其中。或者用来生成你的薪水的那个。只需环顾四周，就可以使用通配符。

使用 *

```
find /path/to/files -type f -name 'foo*' 
```

-- 在某些 UNIX 系统中，带有星号的字符串周围的 tic 或引号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-11T23:48:49.040

```
find docs -type f 
```

将为您提供 docs 的每个子目录的每个非目录文件的列表

```
find docs/* 
```

将为您提供每个文件和文档的每个子目录的列表

# asp.net - 将 GetHashCode() 用于随机的持久索引

> ID：14948538
> 
> 赞同：1
> 
> 时间：2013-02-19T01:53:52.910
> 
> 标签：asp.net, .net, gethashcode

我有一个标识客户的字符串。在我的网站上，我为未设置个人资料图片的客户提供了 3 张不同的图片。我想将这些图像中的一个随机关联到客户，但不会在会话之间更改图像。

使用 GetHashCode 是否有任何问题，例如以下代码？

```
switch (CustomerIdString.GetHashCode() % 3)
{
    case 0:
        return "NoProfileImage0.png";
        break;

    case 1:
        return "NoProfileImage1.png";
        break;

    case 2:
    default:
        return "NoProfileImage2.png";
        break;
} 
```

我知道还有其他解决方案，例如-

*   使用更好的哈希库
*   使用客户 ID 作为随机数生成器中的种子
*   根据客户记录保留图像名称

但我喜欢使用 GetHashCode() 的简单性（没有添加库，没有 DB 代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-28T19:34:41.597

相关：[我可以依赖 GetHashCode() 的值来保持一致吗？](https://stackoverflow.com/questions/53086/can-i-depend-on-the-values-of-gethashcode-to-be-consistent)

基本上，`string.GetHashCode`不保证跨 .NET 框架的版本相同。

您可能需要考虑使用存在于 .NET 之外的更广泛范围内的散列函数（但仍然在 .NET 中实现！）并具有相关规范，例如 MD5。这将使您的软件更具可移植性和弹性。

有关如何获取 MD5 哈希，请参阅相关：[MD5 Hash From String](https://stackoverflow.com/questions/12979212/md5-hash-from-string)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-28T19:00:19.143

我发现您的示例代码在我的应用程序中很有用，因为我正在做类似的事情。但是，我发现我需要在 GetHashCode 周围使用 Math.Abs​​，因为它有时会返回负数：

```
Math.Abs(String.GetHashCode()) Mod 3 
```

（很抱歉我的回复是在 vb.net 而不是 c# 中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T19:29:59.253

我看不出有任何问题，尽管它根本不是随机的，但它始终是基于`CustomerIdString`.

# ios - TableView 项目未显示

> ID：14948540
> 
> 赞同：-4
> 
> 时间：2013-02-19T01:54:06.420
> 
> 标签：ios, objective-c, cocoa-touch, uitableview

我对 XCode 了解不多。好吧，我对 XCode 几乎一无所知。但是我遇到了 TableView 的问题。

我正在关注[本教程](http://maybelost.com/2011/10/tutorial-storyboard-in-xcode-4-2-with-navigation-controller-and-tabbar-controller-part-2/)，但是当我尝试自己制作时，除了 TableView 项目外，一切都完美无缺。我尝试过的所有涉及表格视图的教程都给我同样的问题。没有显示任何项目:(我将留下完整项目的下载链接，因为我不确定你们需要什么代码来帮助我。

[下载链接 (MediaFire)](http://www.mediafire.com/?1dqe1bl1ha83dr3)

## 请帮忙！我的头快要爆炸了......

这是我尝试运行应用程序时遇到的错误。

```
//
//  main.m
//  Demo TWo
//
//  Created by Alexander Pina on 2/18/13.
//  Copyright (c) 2013 Alexander Pina. All rights reserved.
//

#import <UIKit/UIKit.h>

#import "AppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

在 @autoreleasepoo { ... 它告诉我，“线程 1：信号 SIGABRT

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:01:18.897

添加委托和数据源。我认为您忘记添加代表和数据源，这就是它不显示表格的原因。将以下行添加到您的 viewDidLoad().like 下面的代码

```
self.myTableView.dataSource = self;
  self.myTableView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:13:50.913

我看了你的项目。我认为您的问题是由 Xcode 中的错误引起的。这可能发生在连接 xib 或 Storyboard 文件时，在 xib 文件的文件检查器中更改某些内容后，我多次遇到问题。

即使您在情节提要中将 UITableViewController 的自定义类名称设置为 Tab2_TableViewController，您的 Tab2_TableViewController 类代码也没有被使用。我通过在 Tab2_TableViewController 子类的 viewDidLoad 中放置一个断点来测试这一点，并看到该方法从未被调用过。它应该可以工作，但是 Xcode 中有些东西搞砸了，所以它不起作用。

我通过这样做解决了这个问题：

*   将 Tab2_TableViewController.h 和 .m 文件复制到另一个文件夹
*   从 Xcode 项目中删除 Tab2_TableViewController.h 和 .m
*   将 Tab2_TableViewController.h 和 .m 从另一个文件夹复制回 Xcode 项目。

这就是我所做的一切，它解决了问题，表格视图单元格现在正在加载到视图中。

* * *

实际上，我找到了解决问题的更好方法。在 Xcode Project Navigator 中，选择项目文件。选择目标 DemoTWo->Build Phases->Compile Sources。点击小“+”按钮并添加 Tab2_TableViewController.m。通常，当您添加文件时，它们会自动添加到此列表中，但无论出于何种原因，您的情况下都没有添加该文件。

![在此处输入图像描述](../Images/6818249ece94dfbaf17e662c5d7d45ce.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T04:16:35.857

试试这个，

-> 只需在您的 xcode 中创建基于单个 View Application 的示例项目

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UITableViewDataSource,UITableViewDelegate>

{
IBOutlet UITableView *TableView;
NSArray *arrItems;
}
@end 
```

视图控制器.m

```
 #import "ViewController.h"
     @interface ViewController ()

     @end

     @implementation ViewController

      - (void)viewDidLoad
     {
         [super viewDidLoad];
         arrItems =[[NSArray alloc]initWithObjects:@"row1",@"row2",@"row3",@"row4",@"row5",@"row6",@"row7", nil];
        TableView.dataSource =self;
         TableView.delegate =self;
// Do any additional setup after loading the view, typically from a nib.
     }
        #pragma mark -
        #pragma mark Table view data source

      - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
         // Return the number of sections.
         return 1;
         }

      - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
         // Return the number of rows in the section.
      return [arrItems count];
              }

         - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

        static NSString *CellIdentifier = @"Cell";

       UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
         if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    [cell.textLabel setFont:[UIFont boldSystemFontOfSize:16]];
    [cell.textLabel setTextColor:[UIColor colorWithRed:0 green:0.5 blue:0 alpha:1]];
          }

    cell.textLabel.text = [arrItems objectAtIndex:indexPath.row];
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
         }

     #pragma mark -
     #pragma mark Table view delegate

         - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

         } 
```

# bash - 用于在目录和特定文件末尾添加文本的 Shell 脚本

> ID：14948542
> 
> 赞同：0
> 
> 时间：2013-02-19T01:54:29.013
> 
> 标签：bash, shell

我需要一些帮助来编写 Bash 脚本。我已经尝试了很多，但不知道如何完成它，而且我是编程新手。

我想创建一个脚本，该脚本将采用一个应该是当前目录的子目录的参数。

然后查找参数是文件还是目录。

*如果它是一个目录，它应该只在找到的目录DDD*名称的末尾添加扩展文本。

如果它是具有以下扩展名“mpg 或 wmv 或 mov”的文件，则应在文件名末尾添加与文件扩展名相同的扩展名。

## 例子：

如果文件名是: `hello.mov`，它将被重命名为`hello.mov.mov`

## 我的脚本：

```
#!/bin/bash
for file in ./$*
do
    find ./$1  -maxdepth 1
    if [ -d $file ]

        ?????????
    fi
    for ext in avi mpg wmv mov; 
    do
        ????????????????? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:12:11.483

```
#!/bin/bash
for file in ./* # */ This comment here just to fix broken syntax highlighting
do
    if [[ -d $file ]]
    then
        ext=DDD 
    else
        ext="${file##*.}" # Get extension
    fi
    mv "${file}" "${file}.$ext" # Rename file to $file + . + $ext
done 
```

# html - 使用文本阴影在 IE 中的字体边框

> ID：14948546
> 
> 赞同：0
> 
> 时间：2013-02-19T01:54:42.677
> 
> 标签：html, css, webkit

我在 CSS 中使用以下内容来用一些边框勾勒出我的字体，但这在 IE 中不起作用，有没有可能，我可以做类似的事情，以便在 IE 中起作用。目前，这在 Chrome、FF、Safari 中运行良好。

```
.ItemPrice { 
     font-size: 40px; 
     color: #E8C61E; 
     -webkit-text-stroke: 1px #B2412F; 
     text-shadow: -1px 0 #B2412F, 0 1px #B2412F, 1px 0 #B2412F, 0 -1px #B2412F; 
 } 
```

由于这些是动态出现的价格，我不能使用图像。如果有人可以帮助我，那就太好了。

当人们将其标记为重复问题时，为其添加更多描述。

1.  我知道我可以使用过滤器来创建阴影，但这不会给字体带来类似边框的感觉。
2.  如果我们使用多个 dropShadow 过滤器来创建边框，字体会从边角处被截断，这又看起来不太好。
3.  有 JS 插件可用于创建带边框的字体，但由于我需要显示的价格必须在同一页面上显示多次，因此使用这些 JS 插件会很慢。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T04:19:10.860

你可以看看这个，它的工作方式类似于 css3 PIE，但有一些文本阴影功能。我从未使用过这个特定的，但它可能值得一试。

[http://www.fetchak.com/ie-css3/](http://www.fetchak.com/ie-css3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:07:37.123

您可以使用过滤器制作多个文本阴影：

```
filter: progid:DXImageTransform.Microsoft.Chroma(color='white') progid:DXImageTransform.Microsoft.Alpha(opacity=100) progid:DXImageTransform.Microsoft.dropshadow(color=#ffffff,offX=1,offY=1) progid:DXImageTransform.Microsoft.dropshadow(color=#ffffff,offX=-1,offY=1) progid:DXImageTransform.Microsoft.dropshadow(color=#ffffff,offX=1,offY=-1) progid:DXImageTransform.Microsoft.dropshadow(color=#ffffff,offX=-1,offY=-1); 
```

# javascript - 从特定日期起每 24 小时将 var 递增 1

> ID：14948549
> 
> 赞同：2
> 
> 时间：2013-02-19T01:55:06.797
> 
> 标签：javascript, date, increment

我以前从未使用过 Javascript（或任何其他编程语言），所以很抱歉问这个问题，因为我确信它非常简单。

我想要做的是在 Javascript 中设置一个日期，然后每 24 小时将其增加一个。因此，在设置日期三天后，HTML 中会显示 3（而不是日期本身）。100 天后，显示 100。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:14:14.607

您必须创建两个日期对象，一个代表您的初始日期，另一个代表现在。然后，计算差异：

```
// Calculate days since Dec 1st 2012
var initialDate = new Date(2012, 11, 1); // Attention: month is zero-based
var now = Date.now();
var difference = now - initialDate;
var millisecondsPerDay = 24 * 60 * 60 * 1000;
var daysSince = Math.floor(difference / millisecondsPerDay);
alert(daysSince); // 80 
```

[http://jsfiddle.net/PmYFc/](http://jsfiddle.net/PmYFc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:17:10.720

如果您想显示页面打开了多少天，您需要使用 setInterval 函数：[https](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval) ://developer.mozilla.org/en-US/docs/DOM/window.setInterval 。

因此，如果您的 HTML 元素看起来像`<span id='example'>0</span>`，那么您的 JS 可能看起来像这样：

```
var date = 0,
    element = document.getElementById("example");

setInterval(function(){
    date++;
    element.innerText = date;
}, 1000 * 60 * 60 * 24); //milliseconds, seconds, minutes, hours 
```

尽管如此，任何页面似乎都不太可能长时间处于未刷新状态。如果您需要在页面刷新之后保留日期变量，您可以查看 localstorage。

# algorithm - 类似于装箱的算法

> ID：14948550
> 
> 赞同：0
> 
> 时间：2013-02-19T01:55:09.807
> 
> 标签：algorithm, math, layout, user-interface, grid

我一直在试验数据可视化的装箱算法，但没有一个能完全达到我想要完成的效果。本质上，我试图想出一种算法来用加权网格表示一组数字。例如，给定一组数字 [25,25,25,25]，您可以将其表示为矩形或正方形，如下所示 -

![四等份](../Images/88f4ec12f9fb4074b290d75647307672.png)

但是，给定这样的集合 [10,1,1,1]，它看起来与此类似。

![4个不等份](../Images/d8c060dbd766097069825cc3fd9757a5.png)

我试图用非偶数来解决这个问题，感觉类似于装箱，但在我的情况下，我不一定关心子对象的大小，我只关心它们是否适合正方形或矩形，并保持它们与其他元素的比例。这有意义吗？该问题似乎类似于Android UI属性权重..

我知道这可能很简单，我只是没有透过树木看到森林。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:18:08.923

树形图是我一直在寻找的。谢谢尤金！

# ruby-on-rails - 具有大量小计的 Rails 应用程序的最干燥方法

> ID：14948551
> 
> 赞同：0
> 
> 时间：2013-02-19T01:55:16.983
> 
> 标签：ruby-on-rails

我有一个 Rails 应用程序，它记录了许多 Movie_Categories 的用户、评论数。模型如下所示：

```
class User < ActiveRecord::Base
  has_many :comments
end

class Movie < ActiveRecord::Base
  belongs_to :movie_category

  has_many :comments
end

class MovieCategory < ActiveRecord::Base
  has_many :movies  
end

class Comment < ActiveRecord::Base
  belongs_to :movie
  belongs_to :user
end 
```

我当然可以通过 MovieCategory 为每个 MovieCategory 执行类似的操作来查找用户评论数：

```
@user.comment.where("movie_category_id =?", movie_category_id) 
```

但是，如果我需要过于频繁地进行此调用，它会给服务器带来很多负载，所以我正在考虑为所有 Movie_Categories 的所有用户每小时进行一次计算（在后台作业中），然后存储计数在用户表中，每个电影类别都有自己的列。这样，我就不必频繁地为每个用户运行计算，而只需访问 User 表中的计数。

我想知道是否有更干的方法来做到这一点，因为我不确定我的 Movie_Categories 何时会停止增长（并且每次都会出现一个新的表字段）。我还考虑过缓存用户显示视图（这些计数出现的位置），但即便如此，如果我在用户表中没有这些列，那么似乎每次加载新用户页面（或缓存过期）时它将不得不再次为用户评论计数计算所有这些。

对于我所面临的问题，是否有更好的方法来避免给服务器带来太多负担？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:17:25.483

鉴于您对目前正在开发中的评论，我会说在您不得不担心它之前不要担心它！但是，如果您想提前计划，我的建议是在外键上使用[片段缓存和索引。](http://api.rubyonrails.org/classes/ActionController/Caching/Fragments.html)

如果您的网站增长到您所说的大小，运行迁移以向您的用户表添加其他字段可能需要大量时间。

我注意到您在问题中提到了缓存，因此假设您对它非常熟悉，但给出了如下观点：

```
<ul>
  <li>Action Movies: 23 Comments</li>
  <li>Comedy Movies: 14 Comments</li>
</ul> 
```

您可以将其包装在一个`cache`块中：

```
<% cache "user-#{user.id}-comments", @user.comments.last.created_at.to_i  do %>
  ...
<% end %> 
```

这将缓存显示计数的片段，并在该用户每次发布新评论时自动过期。`<li>`您可以通过缓存每个内容并仅在该类别中发布评论时才过期，从而真正获得详细的细节，但在早期阶段可能会过度杀伤力。

对于外键上的索引，您可以使用以下语法将其添加到迁移中：

```
add_index :comments, :movie_category_id 
```

我认为您运行的查询并没有*那么糟糕*，但是您永远不会知道直到您投入生产并扩展它会产生什么影响。

# php - 图像代码执行

> ID：14948556
> 
> 赞同：1
> 
> 时间：2013-02-19T01:56:00.713
> 
> 标签：php, .htaccess

我有一个允许 jpg、jpeg、png 和 gif 文件上传到另一个目录的 php 图像上传脚本。当然，我会检查上传脚本中的 mime/type 和文件扩展名，但聪明的黑客可以轻松绕过这些。

我有一个模糊的理解，您可以以某种方式将可执行代码嵌入到这些图像文件中。谷歌搜索了一个多小时，我还没有找到一种在标准 Godaddy apache 配置上执行图像内部代码的方法。我发现如果文件类型类似于 test.php.jpg，那么代码可能会执行。因此，我将那个特定上传文件夹的 htaccess 文件更改为

```
RewriteEngine on
RewriteRule !^([0-9]*)[.](jpg|jpeg|gif|png)$ /error.php? 
```

我的问题是这是否足够或者它仍然很脆弱？如果是这样，您对如何将文件保护为仅具有不可执行代码的纯图像有任何想法。

# pandas - `dict.keys` 的 `DataFrameGroupBy` 等效项是什么？

> ID：14948558
> 
> 赞同：0
> 
> 时间：2013-02-19T01:56:10.947
> 
> 标签：pandas

让我直接说我正在寻找的*绝对*不是已经定义的`DataFrameGroupBy.keys`属性。这个属性与我所追求的*不同。*

这篇文章标题的基本原理是，当迭代一个`pandas` `DataFrameGroupBy`对象时，迭代器在每次迭代中都会产生一个*对*，这强烈地让人想起迭代时生成的键值对`dict.items()`。我想要的是这些伪键值对中的“键”；因此，我正在寻找 -`DataFrameGroupBy`等效项`dict.keys`（同样***不是*** `DataFrameGroupBy.keys`）。

对于`dict`'s，一个人可以用这样的折磨和复杂的东西来获得钥匙

```
keys = [k for k, _ in d.items()] 
```

...但是，当然，这是不必要的，因为已经通过它的方法`dict`公开了这些信息。`keys`因此`keys = d.keys()`是所有一个需要。

同样，我可以通过做一些折磨和令人费解的事情来获得我想要的钥匙，比如

```
keys = [k for k, _ in g]  # for some DataFrameGroupBy object g 
```

...但我希望这`DataFrameGroupBy`使这些杂技变得不必要，就像那样`dict`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T02:18:25.567

如果您发现`[k for k, _ in g]`“受折磨和令人费解”，那么我不确定我们是否拥有相同的标准。无论如何，我认为您所追求的信息可以在多个地方找到。

```
>>> df = pd.DataFrame({"A": [1,2,1,0.8], "B": [1,2,3,9], "C": [0,1,2,3]})
>>> df
     A  B  C
0  1.0  1  0
1  2.0  2  1
2  1.0  3  2
3  0.8  9  3
>>> g = df.groupby("A")
>>> [k for k, _ in g]
[0.8, 1.0, 2.0]
>>> g.groups
{1.0: [0, 2], 2.0: [1], 0.80000000000000004: [3]}
>>> g.groups.keys()
[1.0, 2.0, 0.80000000000000004]
>>> set(g.groups)
set([1.0, 2.0, 0.80000000000000004]) 
```

我`g.indices`认为也是如此。如果您关心订单，可以使用`result_index`：

```
>>> g.grouper.result_index
Index([0.8, 1.0, 2.0], dtype=object) 
```

# django - 在哪里手动安装 django mixin 文件？

> ID：14948559
> 
> 赞同：1
> 
> 时间：2013-02-19T01:56:22.817
> 
> 标签：django, mixins

我正在为 django 中的客户端编写一个小型桌面应用程序，并且我想使用其中的一个组合，但我不希望他们每次安装应用程序时都必须安装 easy_install 然后 pip 和 mixin 本身. mixin 是“django-file-resubmit”，看起来只有三个文件——我应该把它们藏在哪里？还是取决于mixin？我完全意识到潜在的维护问题，在这种情况下并不严重。

谢谢，

罗杰

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:09:06.520

文件`requirements.txt`是处理这个问题的最佳方式，它现在几乎是处理依赖关系的通用方式。但是，如果您不打算使用 pip，只需将其包含在项目的根目录下`lib/`，然后将该目录添加到您的 Python 路径中。当年老人们就是这样干的。;-)

# python - 将井字棋棋盘游戏的绘图居中

> ID：14948560
> 
> 赞同：0
> 
> 时间：2013-02-19T01:56:28.467
> 
> 标签：python, turtle-graphics

我的代码绘制网格并设置 Xs 和 Os。我的问题是它在屏幕的右上角完成了所有操作。我想找到一种方法来做这一切，但要居中。问题是我希望它尽可能美观。一切正常，我对此完全没有问题，除了职位。我找不到将我的板设置在屏幕中央的命令。

```
from turtle import*

def tttDrawLineFromMidpoint(pen, orientation, lineLength):
    pen.setheading(orientation)
    pen.down()
    pen.fd(lineLength/2)
    pen.bk(lineLength)
    pen.fd(lineLength/2)

def tttDrawXFromMidpoint(pen, cellSize):
        lineLength = 1.41 * cellSize
        tttDrawLineFromMidpoint(pen, 45, lineLength)
        tttDrawLineFromMidpoint(pen, 135, lineLength)

def tttDrawX(pen, cellsize, row, col):

        x=col*cellsize
        y=row*cellsize

        x+=cellsize/2
        y+=cellsize/2

        pen.up()
        pen.goto(x,y)

        xSize = cellsize/2
        tttDrawXFromMidpoint(pen, xSize)

def tttDrawCircleFromPoint(pen, orientation,lineLength):
        pen.setheading(orientation)
        pen.down()
        pen.up()
        pen.fd(lineLength/1.5)
        pen.lt(45)
        pen.bk(25)
        pen.down()
        pen.circle(lineLength/2)

def tttDrawOFromPoint(pen, cellSize):
        lineLength = cellSize
        tttDrawCircleFromPoint(pen,90, lineLength)

def tttDrawO(pen, cellsize, row, col):

        x=col*cellsize
        y=row*cellsize

        x+=cellsize/2
        y+=cellsize/2

        pen.up()
        pen.goto(x,y)

        oSize = cellsize/2
        tttDrawOFromPoint(pen, oSize)

def tttDrawLineFromEnd(pen, orientation, lineLength):
        pen.setheading(orientation)
        pen.down()
        pen.fd(lineLength)
        pen.bk(lineLength)

def tttDrawGrid(pen,cellSize):
    pen.ht()

    for i in range (2):
                pen.up()
                pen.goto(0, cellSize * (i+1))
                tttDrawLineFromEnd(pen,0,3*cellSize)
    for i in range(2):
                pen.up()
                pen.goto(cellSize*(i+1),0)
                tttDrawLineFromEnd(pen,90,3*cellSize)

def ttt(cellSize):
        marker = Turtle()
        marker.width(3)
        marker.color('purple')
        tttDrawGrid(marker,cellSize)

def tttDrawXOTest(cellSize):
        marker = Turtle()
        marker.width(3)
        marker.color('purple')
        tttDrawGrid(marker,cellSize)
        xTurtle = Turtle()
        xTurtle.width(3)
        xTurtle.color('orange')
        for row in range(3):
            for col in range(3):
                    tttDrawX(xTurtle, cellSize, row, col)

        xTurtle = Turtle()
        xTurtle.width(3)
        xTurtle.color('pink')
        for row in range(3):
            for col in range(3):
                    tttDrawO(xTurtle, cellSize, row, col)

t=Turtle()
t.ht()
ttt(100)
print("Let's Play Tic Tac Toe >:D")
print("X goes first!")
x = input("Choose a row between 0-2: ")
x = int(x)
x = x
y = input("Choose a coluumn between 0-2: ")
y = int(y)
tttDrawX(t,100,x,y)

print("O goes next!")
x = input("Choose a row between 0-2: ")
x = int(x)
x = x
y = input("Choose a coluumn between 0-2: ")
y = int(y)
tttDrawO(t,100,x,y)

exitonclick() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-18T18:32:32.917

由于这个问题是关于使板居中的，因此我在下面的示例代码中删除了除板图之外的所有内容。关键是围绕零点进行数学运算，因此井字棋棋盘中线对的位置仅因符号而异：

```
from turtle import Turtle, Screen

def tttDrawLineFromEnd(pen, orientation, lineLength):
    pen.setheading(orientation)
    pen.down()
    pen.forward(lineLength)

def tttDrawGrid(pen, cellSize):
    for sign in (-1, 1):
        pen.up()
        pen.goto(-3 * cellSize / 2, sign * cellSize / 2)
        tttDrawLineFromEnd(pen, 0, 3 * cellSize)

    for sign in (-1, 1):
        pen.up()
        pen.goto(sign * cellSize / 2, -3 * cellSize / 2)
        tttDrawLineFromEnd(pen, 90, 3 * cellSize)

def ttt(cellSize):
    marker = Turtle(visible=False)
    marker.width(3)
    marker.color('purple')
    tttDrawGrid(marker, cellSize)

ttt(100)

screen = Screen()

screen.exitonclick() 
```

我在使用海龟编程时使用的一个技巧是在创建海龟之后，我调用`turtle.dot()`以在屏幕的正中心制作一个可见点，这样我就知道我是否在我期望的地方绘图。然后我在我的最终代码中删除了这个调试辅助。

# node.js - caolon 异步瀑布模型的工作范围是什么

> ID：14948565
> 
> 赞同：0
> 
> 时间：2013-02-19T01:57:29.610
> 
> 标签：node.js, asynchronous

我正在尝试使用 nodejs 异步模型进行异步调用。这是一种情况

Coffeee 中的粗略代码

```
app.get '/register/email',(req,res)->
     re = new require '/model/registerEmail'
     re.register
     ## will the next line of code will be executed immediately if so what should be done
     ## to send the response..should I wait

class RegisterEmail
   checkEmail: (cb)->
     mongocall 
   saveMail: (cb) ->
     mongocall
   register: ->
     async.waterfall([checkmail,savemail],(err,res)->
          ## how to send the error or response back to server
          ## since there is no response object access here     
 exports = RegisterEmail 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:48:00.400

您的注册函数应该接受您在瀑布回调中调用的回调。也许是这样的：（对不起，我不做 CoffeeScript）

```
re.register(function(err, data){
  if(err){
    return res.send(500, err);
  }
  res.send(data);
}; 

var register = function(callback){
  async.waterfall([checkmail, savemail], function(err, res){
    if(err){
      return callback(err);
    }
    callback(null, res.body);
  }
}; 
```

# iphone - 如何自定义 UILabel 进行图像显示？

> ID：14948567
> 
> 赞同：1
> 
> 时间：2013-02-19T01:57:36.060
> 
> 标签：iphone, image, uilabel, customization

我想自定义 UILabel 控件。

例如，

```
lblName.text = @"Zotiger"; 
```

然后标签正常显示Ztiger。

如果我用一些特殊字符设置它的文本（在我的情况下，* 是用于替换图像的特殊字符）

```
lblName.text = @"***";
lblPhone.text =  @"***-****-****"; 
```

然后标签显示三个图标，如下图所示。

![星星文字将被替换爱心图标](../Images/dc4582445601c655eb1b4179fcd0347e.png)

如何简单地自定义 UILabel？有开源控制吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:05:02.030

很简单，您可以在字符串中使用某些 Unicode 字符，iPhone 会将它们显示为 Emoji

请参阅此链接以获取[心脏 unicode](http://www.easyapns.com/category/just-for-fun)

就你的红心而言：`\ue022`

# javascript - 所有 jQuery ajax 调用的默认设置

> ID：14948571
> 
> 赞同：8
> 
> 时间：2013-02-19T01:58:33.917
> 
> 标签：javascript, jquery, ajax, header

我有一个 JS 客户端 (app.domain.com)，它连接到用 rails 和 grape (api.domain.com) 编写的 API。CORS 已设置，我在两个域之间有一个共享 cookie，因为登录是在 api.domain.com 服务器上执行的。

这个 JS 应用程序使用 Spine.js，所以一切都是用 CoffeeScript 编写的。因此，要发送删除请求，我只需使用：

```
 @item.destroy 
```

这将向 API 发送 DELETE 请求。但是 cookie 没有与请求标头一起发送，所以我不得不将上面的代码行更改为这一行：

```
 $.ajax({
        url: "http://api.domain.com/tasks/" + @item.id,
        type: "DELETE",
        crossDomain: true,
        xhrFields: {
            withCredentials: true
        }
    }) 
```

这非常有效。它将随请求发送响应标头“Access-Control-Allow-Credentials：true”，以便提交 cookie 并验证操作。

但是，这样我将不得不为每个请求编写几行代码，这非常耗时，并且也使 Spine 框架的好处无效。

我知道可以在 jQuery 中设置默认的 ajax 设置，以便随后的每个 ajax 调用都将使用这些设置。所以我试过：

```
jQuery.ajaxSetup({
headers: {
    "X-Requested-With": "XMLHttpRequest",
    "Access-Control-Allow-Credentials": "true"
    }, crossDomain: true
}); 
```

这与我手动为每个 ajax 调用设置的设置基本相同。但是，尽管我在发送到 API 的请求中看到这些标头（通过萤火虫），但这种方法不起作用。

我错过了什么吗？

提前致谢！

达夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-25T22:02:37.707

在客户端应用程序的引导程序中执行此操作：

```
$.ajaxSetup({
  xhrFields: {
    withCredentials: true
  }
}) 
```

然后服务器需要用这个 cors 头响应：

```
Access-Control-Allow-Credentials: true 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-29T06:31:17.657

我最近遇到了一个非常相似的问题，并找到了两种简单的方法。首先创建 java 脚本函数来为您进行调用，即：

```
function delete (url){
   $.ajax({
        url: url,
        type: "DELETE",
        crossDomain: true,
        xhrFields: {
            withCredentials: true
        }
    })
} 
```

或者如果在多个页面上重用，我建议创建一个可以轻松包含和重用的小类。这也使得不仅可以设置默认设置，还可以为常用的 api 调用创建函数。

# javascript - 清除无序列表按钮不起作用

> ID：14948573
> 
> 赞同：0
> 
> 时间：2013-02-19T01:58:53.503
> 
> 标签：javascript, jquery

我已经盯着这个问题看了好几个小时。我刚开始学习 Jquery，我有一个小项目需要我使用一个按钮来清除无序列表的元素。

首先，我最常跟踪用户的鼠标位置和鼠标点击。每次他们单击按钮时，我都会构建一个无序列表并记录 x,y 位置。然后，我应该使用一个按钮来清除列表。一切似乎都工作正常，但是单击该按钮时，会添加到列表中而不是清除它。

谁能帮我发现问题？

```
<!doctype html>
<head>
<title>Click away</title>
<link href="stylesheets/standard.css" rel="stylesheet">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script>
var count = 0;
$("html").click(function(){
count++; 
$("#display").html("The click count is: " + count);
});
$("html").click(function(e) {
var xPos = e.pageX;
var yPos = e.pageY;
$("#list").append("<li>" + xPos + ", " + yPos + "</li>");
});
//This is the section I can't get to work
$("#clear").click(function () {
$("#list").remove();
}); 
</script> 
</head>
<body>
<h1> Click away</h1>
<h2>Start clicking...</h2>  
<h2 id="display"></h2>
<button id="clear">Clear the location list</button> 
<h2>Click locations:</h2>   
<ul id="list"></ul>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:11:39.050

采用`$("#list").empty();`

使用`$("#list").children().remove();`也可以，但第一个更有效。

我认为您还应该从列表中排除清除按钮并将代码放在`.ready()`处理程序中，以便在 DOM 准备好并加载元素后执行代码：

```
$(document).ready(function(e) {

    var count = 0;
    $("html").click(function () {
        count++;
        $("#display").html("The click count is: " + count);
    });
    $("html").click(function (e) {
        if (e.target !== document.getElementById('clear')) { //exclude the clear button 
            var xPos = e.pageX;
            var yPos = e.pageY;
            $("#list").append("<li>" + xPos + ", " + yPos + "</li>");
        }
    });

    $("#clear").click(function () {
        $("#list").empty(); //empty list
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:01:45.840

`$("#list").empty();`

它将清除该元素的所有子元素。

# javascript - 如何注入将执行功能的按钮？

> ID：14948575
> 
> 赞同：0
> 
> 时间：2013-02-19T01:59:18.113
> 
> 标签：javascript, html, greasemonkey

我使用Greasemonkey和Firefox JavaScript遇到了真正的困难，以将一个按钮注入，所选的按钮将执行函数。

例如，我试图将按钮放在[SO "Ask a Question" page](https://stackoverflow.com/questions/ask)上的 "Unanswered" 按钮之后。

我希望它运行一个可以做*任何事情*的函数，比如说`alert ("Hello World")`or `console.log('TEST start')`。

有人可以发布一些示例代码来完成这项工作吗？一旦我有一个工作样本，那么我应该能够从那里开始。

提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:33:30.010

这种事情的过程是：

2.  确定要修改的内容的 HTML 结构。
3.  添加或更改您的新内容。请注意，[jQuery](http://jquery.com/)使它变得如此简单。
4.  为您的新内容添加、修改和/或删除 javascript 事件侦听器。
5.  如果目标内容是通过 AJAX 方法添加的，请使用[AJAX 补偿技术](https://stackoverflow.com/a/10664942/331508)。

对于[您的示例页面](https://stackoverflow.com/questions/ask)：

使用*Firebug*检查显示`Unanswered`“按钮”HTML 如下所示：

```
<div class="nav mainnavs">
  <ul>
    ...
    <li>
      <a href="/unanswered" id="nav-unanswered">Unanswered</a>
    </li>
  </ul>
</div> 
```

所以我们将添加一个像这样的“按钮”：

```
<div class="nav mainnavs">
  <ul>
    ...
    <li>
      <a href="/unanswered" id="nav-unanswered">Unanswered</a>
    </li>
    <li>
      <a href="#" id="gmOurFirstButton">Log something</a>
    </li>
  </ul>
</div> 
```

我们将使用[jQuery 的`.click()`](http://www.jqapi.com/#p=click).

对于这个页面和这个按钮，我们不需要担心AJAX。

将它们放在一起，**一个完整的工作脚本**如下所示：

```
// ==UserScript==
// @name     _Add a simple button to a page
// @include  https://stackoverflow.com/questions/ask*
// @require  http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js
// @grant    GM_addStyle
// ==/UserScript==
/*- The @grant directive is needed to work around a design change
    introduced in GM 1.0\.   It restores the sandbox.
*/
var unansweredBtn   = $("#nav-unanswered");

//-- Add our button.
unansweredBtn.parent ().after (
    '<li><a href="#" id="gmOurFirstButton">Log something</a></li>'
);

//-- Activate the button.
$("#gmOurFirstButton").click ( function () {
    console.log ("Something.");
} ); 
```

# php - 按 PHP/MySQL 的顺序显示以逗号分隔的数据库 ID 列表

> ID：14948581
> 
> 赞同：-2
> 
> 时间：2013-02-19T01:59:39.937
> 
> 标签：php, mysql

我有一个包含 2 个表的数据库，如下所示：

**类别**

```
Name        |    Items
---------------------------------
At Home     |    3,4,8,9
At Office   |    10,3,2,1 
```

* * *

**项目**

```
Name        |    id
--------------------------------
Fix Car     |    3
Mow Lawn    |    4
Garbage     |    8
Laundry     |    9
Desk Clean  |    10 
```

* * *

在类别表中，逗号分隔的数字表示按 id 排列的项目列表。

我将如何执行 SQL Select 来选择特定类别中的所有项目（例如“在家”），然后按照与项目列相同的顺序对它们进行排序。

数据库已被简化，希望使问题更容易理解。

此外，如果您能想出一种更好的方法来为这种类型的应用程序组织数据库，那就太好了。

**定制订单对该项目至关重要**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:17:03.360

如果可能，创建第三个表来**规范**您的数据库，或查看下面的编辑:-)

```
CATEGORIES

Name        |    id
---------------------------------
At Home     |    1
At Office   |    2

ITEMS

Name        |    id
--------------------------------
Fix Car     |    3
Mow Lawn    |    4
Garbage     |    8
Laundry     |    9
Desk Clean  |    10

LINKS

cat_id     |   item_id
--------------------------------
1          |   3
1          |   4
1          |   8
1          |   9
2          |   10
2 etc. 
```

然后去：

```
SELECT items.name 
FROM items 
LEFT JOIN links ON items.id = links.item_id
WHERE items.cat_id = 1
ORDER BY items.id 
```

我刚刚意识到我的操作是假设 each`items`可以是多个`categories`. 如果您想要 1 个项目 --> 1 个类别，则不需要第三个表，只需在 中添加一个字段`items`，然后再添加一个用于自定义排序：

项目

```
Name        |    id   | cat_id |  order
-----------------------------------------
Fix Car     |    3    |   1    |   1
Mow Lawn    |    4    |   2    |   1
Kill Cat    |    9    |   1    |   2

SELECT name 
FROM items 
WHERE cat_id = 1
ORDER BY order 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:02:12.937

采用`FIND_IN_SET`

```
SELECT  a.name, b.Name itemName
FROM    categories a
        INNER JOIN items b
            ON FIND_IN_SET(b.id, a.items) > 0 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/77025/3)

更好地规范化表以获得更好的性能。这样做的一个缺点是很难满足您的要求，例如。*..按照与项目列相同的顺序对它们进行排序*

# ruby-on-rails - 如何在检查长度之前使导轨验证修剪？

> ID：14948584
> 
> 赞同：0
> 
> 时间：2013-02-19T01:59:52.143
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的`user.rb`模型中，我有以下内容：

```
validates :fname, :length => { :minimum => 1, :maximum => 100 }, :unless => Proc.new { |user|  user.new_record? || !user.password_confirmation.nil? } 
```

问题是用户可以提交 fname 作为`" "`所有空格，这会欺骗验证。在寻找长度之前如何进行验证修剪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:00:58.753

您可以添加一个 before_validation 回调来修剪 fname

```
before_validation :trim_fname

def trim_fname
  self.fname.strip!
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:10:56.767

也许你可以试试这个 gem：[https](https://github.com/holli/auto_strip_attributes) ://github.com/holli/auto_strip_attributes ，这可能是一个快速的解决方法。

问候，

# c# - What exactly is happening in my for loop

> ID：14948588
> 
> 赞同：0
> 
> 时间：2013-02-19T02:00:27.103
> 
> 标签：c#, loops, for-loop

This is my current code:

```
string userName = "";
        int v1 = 0, v2 = 0, v3 = 0, v4 = 0, v5 = 0;
        int sum = 0;
        float avg;
        float variance;

        Console.WriteLine("Please enter your name:");
        userName = Console.ReadLine();
        Console.WriteLine("Please enter in a number between 10 and 50: ");
        int inputCheck = 0;
        inputCheck = Convert.ToInt32(Console.ReadLine());

        for (int i = 0; i <= v5; i++)
        {
            if (i == v1)
            {
                v1 = inputCheck;
                if (v1 < 10 || v1 > 50)
                {
                    Console.WriteLine("The number you have entered is invalid please enter a new variable: ");
                }
                continue;
            }
            if (i == v2)
            {
                v2 = inputCheck;
                if (v2 < 10 || v2 > 50)
                {
                    Console.WriteLine("The number you have entered is invalid please enter a new variable: ");
                }
                continue;
            }
            if (i == v3)
            {
                v3 = inputCheck;
                if (v3 < 10 || v3 > 50)
                {
                    Console.WriteLine("The number you have entered is invalid please enter a new variable: ");
                }
                continue;
            }
            if (i == v4)
            {
                v4 = inputCheck;
                if (v4 < 10 || v4 > 50)
                {
                    Console.WriteLine("The number you have entered is invalid please enter a new variable: ");
                }
                continue;
            }
            if (i == v5)
            {
                v5 = inputCheck;
                if (v5 < 10 || v5 > 50)
                {
                    Console.WriteLine("The number you have entered is invalid please enter a new variable: ");
                }
                continue;
            } 
```

I'm getting the console to correctly identify that if v1 is greater than 50 or less than 10 it gives the message. But the code stops and doesn't continue asking for variables. I've tried following what is happening in the for loop and the if's loop but I'm just getting lost. I'm tasked with getting 5 variables by using loops and one console.readlin();. If that helps at all as to why I'm asking this question.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:04:22.657

Some error in your loop :

1.  `for (int i = 0; i <= v5; i++)` since v5 = 0, the loop will run only one time

2.  `inputCheck = Convert.ToInt32(Console.ReadLine());` would only read the number once, and even if you fixed the loop to run `5 times`, the input asked from the user will be just once, hence needed to move `inputCheck = Convert.ToInt32(Console.ReadLine());` within the loop.

3.  The check for input for 1 to 50 can be improved in the loop, since u have the same restriction for all the variables.

Try this way :

```
 string userName = "";
    int v1 = 0, v2 = 0, v3 = 0, v4 = 0, v5 = 0;
    int sum = 0;
    float avg;
    float variance;

    Console.WriteLine("Please enter your name:");
    userName = Console.ReadLine();
    Console.WriteLine("Please enter in a number between 10 and 50: ");
    int inputCheck = 0;

    for (int i = 0; i < 5; i++)
    {
        inputCheck = Convert.ToInt32(Console.ReadLine());

        while (!(inputCheck < 10 || inputCheck > 50))
        {
             switch (i)
            {

                case 1:
                    v1 = inputCheck;
                    break;

                case 2:
                    v2 = inputCheck;
                    break;

                case 3:
                    v3 = inputCheck;
                    break;

                case 4:
                    v4 = inputCheck;
                    break;

                case 5:
                    v5 = inputCheck;
                    break;

            }
        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:04:30.267

You need to put the `Console.WriteLine("Please enter your name:");` and the `userName = Console.ReadLine();` inside the beginning of the `for` loop if you want the input again.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T02:05:34.553

Well, it looks like `v5` is 0, so your loop is gonna run only once!

```
for (int i = 0; i <= v5; i++) //this will be true only once because v5 = 0 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T02:08:30.390

There are a few issues with your code. As others have pointed out,

```
int v5 = 0;
for (int = 0; i < v5; i++) ... 
```

Means you will never enter the for loop because `i < v5` is `false`.

Secondly, it seems like you're trying to loop through `v1` - `v5` as variables. This is not the correct way to perform a loop over an arbitrary number of variables. You will need an array or some other type of collection.

Probably what you want is something like this:

```
string userName = "";
int[] v= new int[5];
int sum = 0;
float avg;
float variance;

Console.WriteLine("Please enter your name:");
userName = Console.ReadLine();
Console.WriteLine("Please enter in a number between 10 and 50: ");

for (int i = 0; i < v.Length; i++)
{
    int inputCheck = Convert.ToInt32(Console.ReadLine());
    while (inputCheck < 10 || inputCheck > 50)
    {
        Console.WriteLine("The number you have entered is invalid please enter a new variable: ");
        inputCheck = Convert.ToInt32(Console.ReadLine());
    }
    v[i] = inputCheck;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T04:39:48.157

```
for (int i = 0; i <= v5; i++)
    {
        if (i == v1)
        {
            v1 = inputCheck;
            if (v1 < 10 || v1 > 50)
            {
                Console.WriteLine("The number you have entered is invalid please enter a new variable: ");
            }
            continue;
        }

        ...
     } 
```

The loop will have only first iteration. Because there is `continue;` in first iteration. `v5` will be 0 always.`i` will be changed to 1 after first `continue;` and then `i <= v5` - false (1 > 0 :) ), and loop will be completed.

# wpf - 带有自定义标题的 Wpf DataGrid ClipboardCopyMode="IncludeHeader"

> ID：14948589
> 
> 赞同：7
> 
> 时间：2013-02-19T02:00:35.190
> 
> 标签：wpf, wpfdatagrid

我有一个 WPF 表，它有一个自定义标题（基于 StackPanel），其中包括一个按钮，用于显示和处理设置列的单位。效果很好，但是我希望能够将数据复制到剪贴板，包括标题。

```
<DataGrid ClipboardCopyMode="IncludeHeader"
...
<DataGridTextColumn Header="Some Header" Binding={Binding Path=SomeValue}/>
<DataGridTextColumn Binding={Binding Path=OtherValue, Converter="{StaticResource unitsConverter}">
<DataGridTextColumn.Header>
<StackPanel>
<TextBlock Text="Period" />
<Button ... />
</Stackpanel> 
```

问题是具有自定义标题的列复制到剪贴板为

```
SomeHeader System.Windows.Controls.StackPanel
v1         33 
```

使用自定义标题时，有没有办法更改为标题打印的文本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-06-05T12:50:04.383

我四处寻找解决方案，然后最终将我的自定义标题控件子类化，只是为了覆盖它，`ToString()`以便`ClipboardCopyMode="IncludeHeader"`复制正确的文本。

就我而言，我在标题中使用了图像：

```
class HeaderImage : Image
{
    public override string ToString()
    {
        return Tag.ToString();
    }
} 
```

xml:

```
 <DataGridCheckBoxColumn.Header>
     <elements:HeaderImage Source="..\Resources\skull.png" Width="15" Tag="Deprecated"/>
 </DataGridCheckBoxColumn.Header> 
```

现在复制/粘贴数据已“弃用”而不是`System.Windows.Controls.Image`. 我相信你可以对`StackPanel`. 我使用标签作为标题文本，因为它很方便

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-29T22:12:14.483

使用其中包含文本块的 HeaderTemplate 时，我正在寻找解决此问题的方法。就我而言，我通过附加属性解决了这个问题。您可以看到我只是从标题模板中获取文本，并将其设置到标题属性中。这样剪贴板复制模式 IncludeHeader 可以按预期工作。

```
 /// <summary>  
 /// WPF Data grid does not know what is in a header template, so it can't copy it to the clipboard when using ClipboardCopyMode="IncludeHeader".  
 /// This attached property works with a header template that includes one TextBlock. Text content from the templates TextBlock is copied to the  
 /// column header for the clipboard to pick up.  
 /// </summary>  
public static class TemplatedDataGridHeaderText  
{  
 private static readonly Type OwnerType = typeof(TemplatedDataGridHeaderText);  
 public static readonly DependencyProperty UseTextFromTemplateProperty = DependencyProperty.RegisterAttached("UseTextFromTemplate", typeof(bool), OwnerType, new PropertyMetadata(false, OnHeaderTextChanged));  
 public static bool GetUseTextFromTemplate(DependencyObject obj)  
 {  
   return (bool)obj.GetValue(UseTextFromTemplateProperty);  
 }  
 public static void SetUseTextFromTemplate(DependencyObject obj, bool value)  
 {  
   obj.SetValue(UseTextFromTemplateProperty, value);  
 }  
 private static void OnHeaderTextChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)  
 {  
   var textColumn = d as DataGridTextColumn;  
   if (textColumn == null) return;  
   if (textColumn.HeaderTemplate == null) return;  
   var headerTemplateTexblockText = textColumn.HeaderTemplate.LoadContent().GetValue(TextBlock.TextProperty).ToString();  
   textColumn.Header = headerTemplateTexblockText;  
 }  
} 
```

xaml 看起来像这样....

```
 <DataGrid ItemsSource="{Binding }" AutoGenerateColumns="False" IsReadOnly="True" VerticalScrollBarVisibility="Auto" VerticalAlignment="Stretch">  
 <DataGrid.Columns>  
   <DataGridTextColumn Binding="{Binding FlowRate.UserValue, StringFormat=N3}" HeaderTemplate="{StaticResource FlowRate}"  
             attachedProperties:TemplatedDataGridHeaderText.UseTextFromTemplate="True"/>  
   <DataGridTextColumn Binding="{Binding Pressure.UserValue, StringFormat=N3}" HeaderTemplate="{StaticResource Pressure}"  
             attachedProperties:TemplatedDataGridHeaderText.UseTextFromTemplate="True"/>  
 </DataGrid.Columns> 
```

更多信息可以在这里找到...... [http://waldoscode.blogspot.com/2014/08/issue-using-wpf-datagrid-columnheader.html](http://waldoscode.blogspot.com/2014/08/issue-using-wpf-datagrid-columnheader.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T16:18:21.190

我在 GetFuzzy 的链接[http://waldoscode.blogspot.com/2014/08/issue-using-wpf-datagrid-columnheader.html](http://waldoscode.blogspot.com/2014/08/issue-using-wpf-datagrid-columnheader.html)中使用了替代的 AttachedProperty 。作者（Don）创建了一个 AttachedProperty 如下（我自己的几个小模块）：

```
/// <summary>  
/// Allows binding a property to the header text. Works with the clipboard copy mode - IncludeHeaders.  
/// </summary>  
public static class DataGridHeaderTextAttachedProperty  
{  
  private static readonly Type OwnerType = typeof(DataGridHeaderTextAttachedProperty);  
  public static readonly DependencyProperty HeaderTextProperty = DependencyProperty.RegisterAttached("HeaderText", typeof(string), OwnerType, new PropertyMetadata(OnHeaderTextChanged));  

  public static string GetHeaderText(DependencyObject obj)  
  {  
    return (string)obj.GetValue(HeaderTextProperty);  
  }  

  public static void SetHeaderText(DependencyObject obj, string value)  
  {  
    obj.SetValue(HeaderTextProperty, value);  
  }  

  private static void OnHeaderTextChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)  
  {  
    var column = d as DataGridColumn;  
    if (column == null) return;  
    column.Header = GetHeaderText(column);  
  }  
} 
```

直接设置 Column.Header 时我无法让它工作，但能够让它与 HeaderTemplate 一起工作，如下所示：

```
<DataGridTemplateColumn ...
                        ui:DataGridHeaderTextAttachedProperty.HeaderText="Some Text">
    <DataGridTemplateColumn.HeaderTemplate>
        <DataTemplate>
            <Path Data="{StaticResource SomeGeometry}" ... />
        </DataTemplate>
    </DataGridTemplateColumn.HeaderTemplate>

    ...
</DataGridTemplateColumn> 
```

感谢 GetFuzzy 的精彩博文！

# extjs - 如何在 Ext.js 中使用 d3.js 图表？

> ID：14948593
> 
> 赞同：1
> 
> 时间：2013-02-19T02:00:56.367
> 
> 标签：extjs, d3.js

谁能指出我如何将 d3.js 图形嵌入 ext.js 的最简单示例？我做了很多搜索：我什至不确定这是否可能。或者是吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-14T18:52:24.670

到目前为止，我使用的结果还不错的一个过于简化的版本：

```
Ext.define('desktop.controls.d3svg', {
extend: 'Ext.container.Container',
alias: 'widget.d3svg',

listeners: {

    added: function() {

        this.onAdded();

    }

},

onAdded: function() {

    // ext container has the outer and inner containers
    // use id for selection of inner container for appending svg
    var svg = d3.select('#' + this.id + '-innerCt').append("svg");

    this.svg = svg;

},

onResize: function(width, height) {

    // on the way to an example of using ext resize event and width
    // and height vars
    // this.svg.do_d3_resize_things.....

}

}); 
```

# php - CakePhp 很多很多的下拉菜单

> ID：14948604
> 
> 赞同：0
> 
> 时间：2013-02-19T02:02:19.907
> 
> 标签：php, cakephp

我有一个巨大的表格，我将分成几部分。每个部分都有自己的模型。我有大量的下拉菜单。它们有点相似，所以我想做的是能够通过调用 php 变量向它们添加选项。这将确保我没有错字，如果需要更改，我可以在一个地方进行更改。

如果我有这样的语言下拉列表：

```
echo $this->Form->input(__('Language'), array(
    'options' => array('en' => 'English', 'fr' => 'Français')
)); 
```

如果我可以这样做会很好 $this->Form->input(__('Language'), $languages); 然后在 $language 中，我也可以使用变量添加这些语言。$languages = array('options' => $option1, $option2...); 类似的东西。

我只是想找到管理 1000 个下拉菜单的最佳方法。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:32:39.057

在您的 AppController 中设置 beforeRender 回调中的语言选项：-

```
public function beforeRender() {

    parent::beforeRender();

    $this->set('languages', array('en' => 'English', 'fr' => 'Français'));

} 
```

然后在相关视图中您可以使用：-

```
$this->Form->input(__('Language'), $languages); 
```

创建一个语言模型并将您的语言存储在其中并通过在模型上使用 find('list') 加载它们可能是有意义的。如果您的其他模型需要链接到一种语言，那么您可以`$belongsTo = array('Language')`在相关模型上使用关系并为模型保存`language_id`。然后，您所有的语言数据都将存储在数据库中，供您在一个地方进行更改。

# c++ - 发布模式下的 ITK 访问冲突错误，但在读取 DICOM 文件时不在调试模式下

> ID：14948611
> 
> 赞同：1
> 
> 时间：2013-02-19T02:03:25.017
> 
> 标签：c++, memory, access-violation, itk

好吧，我知道很多人都有 Release VS 的问题。调试模式。我进行了很多搜索，并检查了程序的堆栈跟踪并检查了指针。但是，我不明白为什么我的程序在调试模式下完美运行时，在发布模式下会出现访问冲突错误！在深入 ITK 代码的一些步骤之后，我突然看到一个函数导致访问冲突。我将首先介绍我的代码，然后介绍导致此访问冲突的调用层次结构：

这是我的类型定义：

```
//typedef unsigned char PixelType;
const unsigned int dimention = 3;

//STD types
typedef std::vector<std::string> FileNamesContainer;
typedef std::vector<std::string> SeriesUIDContainer; 

//ITK Types
typedef itk::DICOMSeriesFileNames NamesGeneratorType;
typedef itk::Image <signed short, dimention> ImageType; //Defining Image Type
typedef itk::ImageSeriesReader<ImageType> ReaderType; //Defining the type of the image series reader

//GDCM Types
typedef itk::GDCMImageIO DICOMImageIOType; 
```

这是我的功能：

```
ReaderType::Pointer itkReadDICOM::ReadImages(char *sourceFolderAddress, std::string &seriesUID)
{
    std::cout<<"- Getting file names in: "<<sourceFolderAddress<<std::endl;
    std::cout<<"- Series ID: "<<seriesUID<<std::endl;

    //Creating a pointer to an object of the reader type. ReaderType is defined on top as itk ImageSeriesReader
    ReaderType::Pointer reader = ReaderType::New();

    //Setting the IO type by creating a dicomIO object from the GDCMImageIO. This will make sure we read DICOM images.
    DICOMImageIOType::Pointer dicomIO = DICOMImageIOType::New();
    reader->SetImageIO(dicomIO);

    //Creating a dicom series name generator. It will generate the name of the dicom series based on the input directory.
    NamesGeneratorType::Pointer namesGenerator = NamesGeneratorType::New();
    namesGenerator->SetDirectory(sourceFolderAddress);

    //Getting names and passing the names to the reader to read them.
    FileNamesContainer fileNames = namesGenerator->GetFileNames(seriesUID);
    reader->SetFileNames(fileNames);

    std::cout<<"- Reading files ... ";

    //Adding a reading progress observer to the reader so we can see how are we reading.
    ITKCmdProgressObserver::Pointer progressObserver = ITKCmdProgressObserver::New();
    reader->AddObserver(itk::ProgressEvent(), progressObserver);

    //Actually reading the files here. If any error happens it will be Printed and the program exists. 
    try
    {
        reader->UpdateLargestPossibleRegion();
        std::cout<<"Successfully read "<< fileNames.size() <<" file(s)."<<std::endl;
    }
    catch  (itk::ExceptionObject &ex)
    {
        std::cout<<"Failed."<<std::endl<<"*********************************************************************"<<std::endl;
        std::cout<<ex<<std::endl;
        std::cout<<"*********************************************************************"<<std::endl;
        return 0;
    }
    return reader;
} 
```

导致错误的调用是这样的：

```
reader->UpdateLargestPossibleRegion(); 
```

上面的函数调用经过这个最终导致错误的调用链：

1.

```
this->UpdateOutputInformation(); //void ProcessObject::UpdateLargestPossibleRegion() 
```

2.

```
this->GenerateOutputInformation(); //void ProcessObject::Update() 
```

3.

```
reader->UpdateOutputInformation(); //template <class TOutputImage> void ImageSeriesReader<TOutputImage>::GenerateOutputInformation(void) 
```

4.

```
this->GenerateOutputInformation(); //void ProcessObject::UpdateOutputInformation() 
```

5.

```
m_ImageIO->SetFileName(m_FileName.c_str());
m_ImageIO->ReadImageInformation(); //template <class TOutputImage, class ConvertPixelTraits> void ImageFileReader<TOutputImage, ConvertPixelTraits> ::GenerateOutputInformation(void) 
```

在第 5 步，第一行很好，第二行导致访问冲突。它甚至不让我通过它。我正在使用 Visual Studio 2010。感谢您的回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T21:35:17.403

感谢保罗的回答。我并行尝试了几件事，直到现在我找到了解决方案！虽然我无法真正让 gflags 运行我的程序，但因为我有一种直觉认为问题不在代码中，所以我没有在它上面投入太多时间。

无论如何，这就是我所做的并**解决**了这个问题：

我从 ITK 网站下载了一个名为 resampleDICOM 的示例并对其进行了编译，但遇到了完全相同的问题。所以最初我认为这是一个 ITK 错误。然后我用调试（RelWithDebInfo）在发布模式下重新编译了 ITK，这样我就可以在发布模式下调试时进入 ITK 代码。令我惊讶的是，一个与 GDCMImageIO::MetaDataDictionary 相关的完全有效的指针突然变成了一个坏指针 ()，而没有任何代码影响它。所以我意识到某处应该有堆损坏！我也知道导致这种损坏的任何东西都不能在我的代码中。

所以我读了很多线程，混合调试和发布 .lib 和 .dll 文件会使事情变得非常讨厌。但我确信我使用的是 ITK 版本的 .lib 文件和 .dll 文件，因为我检查了很多次！我的意思是MAAANY次！我正要从阳台上跳下来结束这种痛苦，我有这个想法只是为了确保我的程序没有使用 ITK 调试编译中的任何内容。**因此，我将 ITK 调试文件夹的名称更改为其他名称，**并在发布模式下运行我的程序，突然：

```
ITKCommon.dll is missing! 
```

尽管我将 Visual Studio 中的所有文件夹和所有设置都设置为使用发布文件夹，但**我的程序在运行时从调试文件夹中使用 ITKCommon.dll。**所以我将发布版本中的 ITKCommon.dll 复制到我的发布文件夹中，瞧！我的程序就像一个魅力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:09:50.870

尝试使用[gflags](http://msdn.microsoft.com/en-us/library/windows/hardware/ff549557%28v=vs.85%29.aspx)（在WinSDK的调试工具中可用）或appverifier（我认为它也在winsdk中）。

在您的应用程序上启用 gflag 时（在调试模式下），它会发现内存中发生的所有令人讨厌的事情，并在发生坏事时立即引发断点

# recursion - 方案尾递归

> ID：14948613
> 
> 赞同：3
> 
> 时间：2013-02-19T02:03:30.443
> 
> 标签：recursion, scheme, tail-recursion, tailrecursion-modulo-cons

我正在尝试创建一个方案尾递归函数 flatten-tl-rec 来展平嵌套的列表列表。

```
(define flatten-tl-rec
  (lambda (xs)
    (letrec ([flatten-tl-rec-acc
              (lambda (xs acc)
                (cond ((empty? xs) acc)
                      ((list? (first xs)) (flatten-tl-rec-acc (rest xs) (append (flatten-tl-rec-acc (first xs) '()) acc)))
                      (else (flatten-tl-rec-acc (rest xs) (cons (first xs) acc))))
                )])
      (flatten-tl-rec-acc xs '()))))

(flatten-tl-rec '(1 2 3 (4 5 6) ((7 8 9) 10 (11 (12 13))))) 
```

但我得到`(13 12 11 10 9 8 7 6 5 4 3 2 1)`的不是`(1 2 3 4 5 6 7 8 9 10 11 12 13)`. 这里有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:11:37.047

您在列表的错误末尾累积元素。您可以将它们附加到列表的正确末尾：

```
(define flatten-tl-rec
  (lambda (xs)
    (letrec ([flatten-tl-rec-acc
              (lambda (xs acc)
                (cond ((empty? xs) acc)
                      ((list? (first xs))
                       (flatten-tl-rec-acc
                        (rest xs)
                        (append acc (flatten-tl-rec-acc (first xs) '()))))
                      (else (flatten-tl-rec-acc
                             (rest xs)
                             (append acc (list (first xs)))))))])
      (flatten-tl-rec-acc xs '())))) 
```

...或者只是在最后反转列表：

```
(define flatten-tl-rec
  (lambda (xs)
    (letrec ([flatten-tl-rec-acc
              (lambda (xs acc)
                (cond ((empty? xs) acc)
                      ((list? (first xs))
                       (flatten-tl-rec-acc
                        (rest xs)
                        (append (flatten-tl-rec-acc (first xs) '()) acc)))
                      (else (flatten-tl-rec-acc
                             (rest xs)
                             (cons (first xs) acc)))))])
      (reverse (flatten-tl-rec-acc xs '()))))) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T08:05:17.853

您更大的问题是该函数根本***不是*尾递归的**：并非它对自身的*每个*调用都处于尾部位置。而是这样做：

```
(define (flatten xs)
  (let ((result (list 1)))
    (let loop ((xs xs) (p result))
      (cond 
        ((null? xs) 
          (cdr result))
        ((pair? (car xs))
          (loop (cons (caar xs) 
                  (cons (cdar xs) (cdr xs)))
                p))
        ((null? (car xs))
          (loop (cdr xs) p))
        (else
          (set-cdr! p (list (car xs)))
          (loop (cdr xs) (cdr p))))))) 
```

这手动实现了[*尾递归模 cons*](http://en.wikipedia.org/wiki/Tail_call#Tail_recursion_modulo_cons)优化，使用“head-sentinel”技巧极大地简化了代码，代价是仅分配一个额外的 cons 单元格。[更多在这个答案中。](https://stackoverflow.com/questions/13255731/a-tail-recursion-version-list-appending-function/13256555#13256555)

# c# - 如何修复列表框项目标题？

> ID：14948614
> 
> 赞同：-1
> 
> 时间：2013-02-19T02:03:37.367
> 
> 标签：c#, visual-studio-2010, windows-phone-7

![在此处输入图像描述](../Images/89a28198c76ff3e2fab5e45f2e8ee87a.png)我有一个文本框和一个列表框，并且希望在列表框中选择的任何内容都显示在文本框中，但是在列表框中选择的任何项目都显示为“system.windows.controls.listboxitem”，而不是显示单词物品。

这是我的代码：

```
 private void listBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        texbox1.text = listbox.selecteditem.tostring();
    } 
```

这是一张图片，它没有显示所选项目的标题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:07:28.037

用这个 ：

```
 private void listBox_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        texbox1.text = (listBox.SelectedItem as ListBoxItem).Content.ToString();
    } 
```

# mysql - 省略某些值的 SQL 查询

> ID：14948615
> 
> 赞同：0
> 
> 时间：2013-02-19T02:03:46.507
> 
> 标签：mysql

**我正在尝试返回ts_allocation**表中不存在的所有房间（即尚未分配）或**ts_allocation**表中的 Pending、Failed 或 Declined 状态。房间可以满足其中一项条款。

但是D.0.02等几个值被省略了（请参考fiddle）？为什么是这样？它以上述状态存在于**ts_allocation**中 - 但它似乎不满足某个条款。我该如何解决这个问题？

这是我的 SQLFiddle：[http ://sqlfiddle.com/#!2/e1021/6](http://sqlfiddle.com/#!2/e1021/6)

```
SELECT 
  *
FROM 
  ts_room rm
WHERE 
  NOT EXISTS (
    SELECT 1
    FROM ts_roompref rp
      JOIN ts_request rq
      ON rp.request_id = rq.id
      AND day_id = 1
      AND period_id = 1
    WHERE 
      rm.id = rp.room_id)
AND NOT EXISTS (
    SELECT 1
    FROM ts_roompref rp
      JOIN ts_allocation a
      ON rp.request_id = a.request_id
            AND a.status <> 'Pending'
            AND a.status <> 'Failed'
            AND a.status <> 'Declined'
    WHERE 
      rm.id = rp.room_id) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:32:52.693

```
SELECT  rm.* 
FROM    ts_room rm
        LEFT JOIN (
            SELECT  a.*, rp.room_id 
            FROM    ts_roompref rp 
                    INNER JOIN  dbo.ts_allocation a on a.request_id = rp.request_id) x 
                    ON  x.room_id = rm.id
WHERE   x.id is null    
        or (x.id is not null and x.status in ('Pending', 'Failed','Declined')) 
```

`x.id is null`为您提供所有尚未分配的房间，并且该`or`部分为您提供**更多结果**- 那些具有待处理、拒绝或失败状态的房间。

# objective-c - Json 和 Bundle 资源 Xcode

> ID：14948616
> 
> 赞同：0
> 
> 时间：2013-02-19T02:03:50.983
> 
> 标签：objective-c, xcode, json, bundle

我可以像这样访问和显示来自 Xcode 包的文件：

```
NSString *file = [[NSBundle mainBundle] pathForResource:@"1" ofType:@"pdf"]; 
```

现在我想做的是使用这个 JSON 填写文件的名称，它确实为我获取了正确的名称：

```
self.localFileName = [BT_strings getJsonPropertyValue:self.screenData.jsonVars:@"localFileName":@""]; 
```

如何将这两件事放在一起，以便可以使用 JSON 名称调用捆绑文件？

这是整个事情：

```
//
//  ReaderDemoController.m
//  PDFViewer
//
//  Created by C. A. Beninati on 5/21/12.
//  Copyright (c) 2012 __MyCompanyName__. All rights reserved.
//
//BT imports
#import <UIKit/UIKit.h>
#import <Foundation/Foundation.h>
#import <MediaPlayer/MediaPlayer.h>
#import "JSON.h"
#import "BT_strings.h"
#import "testapp_appDelegate.h"
#import "BT_fileManager.h"
#import "BT_color.h"
#import "BT_viewUtilities.h"
#import "BT_downloader.h"
#import "BT_item.h"
#import "BT_debugger.h"
#import "BT_viewControllerManager.h"

#import "ReaderDemoController.h"
#import "ReaderViewController.h"

@interface ReaderDemoController ()<ReaderViewControllerDelegate>

@end

@implementation ReaderDemoController
@synthesize localFileName;

- (void)viewDidLoad
{ [BT_debugger showIt:self:@"ZZZZZZZZZZ!!!"];
    [super viewDidLoad];

    self.localFileName = [BT_strings getJsonPropertyValue:self.screenData.jsonVars:@"localFileName":@""];

    self.localFileName = @""; // added this to make it work!!

    NSString *file=[[NSBundle mainBundle]pathForResource:self.localFileName ofType:@"pdf"];

    ReaderDocument *document = [ReaderDocument withDocumentFilePath:file password:nil];

    if (document != nil)
    {
        ReaderViewController *readerViewController = [[ReaderViewController alloc] initWithReaderDocument:document];
        readerViewController.delegate = self;

        readerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        readerViewController.modalPresentationStyle = UIModalPresentationFullScreen;

        [self presentModalViewController:readerViewController animated:YES];
    }

}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)dismissReaderViewController:(ReaderViewController *)viewController {
    [self dismissModalViewControllerAnimated:YES];
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:13:46.807

如果您从“self.localFilename”中获得正确的文件名，那么您只需将其传递给您的文件，如下所示：

NSString *file=[[NSBundle mainBundle]pathForResource:self.localFileName ofType:@"pdf"];

# datomic - 在不存在的实体上成为孤儿？

> ID：14948624
> 
> 赞同：0
> 
> 时间：2013-02-19T02:04:58.030
> 
> 标签：datomic

假设我有一个实体，然后我收回它的所有属性。该实体是否仍保留在数据库中？

问题是因为这段代码：

```
=> (def e (d/entity mdb 9876))
#'ww.billing/e
=> e
{:db/id 9876} 
```

归还某事。这可能看起来像数据库中的一个实体，但我知道这个实体不存在。从来没有在那里。也许在这种情况下有一个例外会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-09T16:43:20.333

对于任何结构上有效的实体 ID，实体将始终返回非零。或者，换一种说法，没有属性就像一个实体一样不存在。

有关更多讨论，请参阅[https://groups.google.com/d/msg/datomic/wLRRwipLrz8/e0lwtpfNop8J](https://groups.google.com/d/msg/datomic/wLRRwipLrz8/e0lwtpfNop8J)和[https://groups.google.com/d/msg/datomic/hnOLG-fhZOU/RZvLlrGajHIJ](https://groups.google.com/d/msg/datomic/hnOLG-fhZOU/RZvLlrGajHIJ)。

# css - IE8 从错误位置的 css 中寻找图像

> ID：14948629
> 
> 赞同：0
> 
> 时间：2013-02-19T02:05:38.207
> 
> 标签：css, internet-explorer, internet-explorer-8

我的样式表中有以下条目：

```
html, body 
{ 
  background: #eee url('../Content/Images/texture.jpg') center;
} 
```

我的样式表的位置是

```
C:\Websites\MyWebsite\Themes\Contoso\Styles\Site.css 
```

纹理图像的位置是

```
C:\Websites\MyWebsite\Themes\Contoso\Content\Images\texture.jpg 
```

IE8 似乎在解决相对路径方面存在一些问题。浏览网址 www.mysite.com/Clients/12345/Dashboard 会导致我的日志文件中出现以下条目：

```
2013-02-18 00:54:40 131.203.91.104 GET /Clients/12345/Content/Images/texture.jpg
 - 443 9260085 222.155.91.136 Mozilla/4.0+(compatible;+MSIE+8.0;+Windows+NT+5.1;+Trident/4.0;+BTRS124349;+GTB7.4;+.NET+CLR+1.1.4322;+.NET+CLR+2.0.50727;+.NET+CLR+3.0.4506.2152;+.NET+CLR+3.5.30729) 
404 0 64 187

...

2013-02-18 00:54:40 131.203.91.104 GET /Themes/Contoso/Content/Images/texture.jpg
 - 443 9260085 222.155.91.136 Mozilla/4.0+(compatible;+MSIE+8.0;+Windows+NT+5.1;+Trident/4.0;+BTRS124349;+GTB7.4;+.NET+CLR+1.1.4322;+.NET+CLR+2.0.50727;+.NET+CLR+3.0.4506.2152;+.NET+CLR+3.5.30729)
304 0 0 436 
```

它请求的第一个 URL 会根据请求的 URL 进行更改。这发生在我网站上的 3 或 4 张其他图像上，但所有其他图像都很好。我想解决它，因为这些 404 阻塞了我的错误日志

以前有人见过这种行为吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T02:34:05.213

将 css 更改为以下内容后，所有 404 都消失了：

```
html, body 
{ 
  background: #eee url('/Themes/Contoso/Content/Images/texture.jpg') center;
} 
```

# objective-c - sqlite3 没有链接到我的 IOS 项目

> ID：14948635
> 
> 赞同：2
> 
> 时间：2013-02-19T02:06:21.653
> 
> 标签：objective-c, database, xcode, sqlite, ios6

我目前正在将一个 sqlite3 数据库链接到我的 ios 项目。我已将项目创建为单视图应用程序。![在此处输入图像描述][1] 如下图所示，我有我设置的框架和我的数据库文件。但是，当我输入 #import "./usr/include/sqlite3.h" 时，它说找不到该文件。

我要做的是创建一个包含大约 100 个项目的数据库。就我个人而言，我不想使用 CoreData，这是设置数据库的最简单方法。如果有人对如何设置此 dd 有任何建议，将不胜感激。

```
#import <UIKit/UIKit.h>
***#import "/usr/include/sqlite3.h"***

@interface databaseViewController :UIViewController { 
    UITextField     *name;
    UITextField *address;
    UITextField *phone;
    UILabel *status;
    NSString        *databasePath;
    sqlite3 *contactDB;
}
@property (retain, nonatomic) IBOutlet UITextField *name;
@property (retain, nonatomic) IBOutlet UITextField *address;
@property (retain, nonatomic) IBOutlet UITextField *phone;
@property (retain, nonatomic) IBOutlet UILabel *status;
- (IBAction) saveData;
- (IBAction) findContact;
@end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T04:16:36.997

其实代码

```
#import "/usr/include/sqlite3.h" 
```

也应该有效，但无论如何使用这种方法是不正确的。正确的方法是像这样包含：

```
#import <sqlite3.h> 
```

因此 Xcode 将始终在当前用于构建项目的相应 SDK 中搜索标头。并且不要忘记将 libsqlite3 添加到目标的链接库部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T04:46:40.557

要获得 iphone Sqlite 数据库连接的最佳教程，您可以单击[此处](https://stackoverflow.com/questions/6977973/iphonehow-to-use-sqlite-connectivity-in-iphone)：

并将 libsqlite3.dylib 添加到您的项目中。然后在你必须使用sqlite的类的.h文件中添加#import“sqlite3.h”。有关更多详细信息，您可以回复我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-30T04:10:41.003

在您的项目中添加 libsqlite3.tbd

选择您的目标 > 构建阶段 > 将二进制文件与库链接

> 添加 libsqlite3.tbd

[![在此处输入图像描述](../Images/a971be3a4028d2186e6406d4d4189202.png)](https://i.stack.imgur.com/yTB9U.png)

我有 xcode7

# android - Android中同步app数据库的云解决方案

> ID：14948639
> 
> 赞同：7
> 
> 时间：2013-02-19T02:06:34.543
> 
> 标签：android, database, synchronization, cloud

我正在开发一个自定义联系人应用程序，它将设备上的数据存储在 SQLite 数据库中。由于某些原因，此设备数据库可能与云数据库同步非常重要：

用户可能拥有不止一台设备，并希望在所有设备上更新其应用数据；用户可能能够从 Web 应用程序访问这些数据；由于此应用程序将存储许多图片，因此设备内存不足以保存所有数据，并且可以使用存档选项将数据仅保存在云数据库中。对于较旧的记录，将自动存档到云端。需要时可以使用恢复选项下载记录数据。如您所见，设备数据库将为一个用户保存联系人，而云数据库将是一个类似的数据库，但为所有用户保存数据。所以，这种同步是有逻辑的。这不仅仅是上下复制整个 SQLite DB 文件的问题。这必须是行/列级别的同步。

我想知道我可以使用哪种解决方案来完成此任务？是否可以使用 Google Cloud 或 App Engine 来实现服务器端？我可以在设备端做什么？有任何想法吗？

我真的很感激任何答案。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:16:25.993

您可以使用任何您想要的基于“云”的 Web 服务，您可以在手机上使用 Java 的全部优势和可靠的 http 库。当然可以在 Amazon EC2 或 App Engine 等平台上构建应用程序/网络服务，然后直接从您的应用程序调用它，自行处理安全性、存储和同步。

就我个人而言，根据我的经验，我在 EC2 上使用 Django/Python（以及各种 AWS 数据服务）并且效果很好。

另外，我知道有各种各样的初创公司为您的场景构建开箱即用的解决方案——即专门针对移动开发人员的特殊 SDK 和后端服务。我对这些没有任何经验，但这里有两个我知道（没有认可，只是链接）： [https://www.parse.com/](https://www.parse.com/) [https://www.stackmob.com/](https://www.stackmob.com/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:28:34.353

我强烈建议您考虑使用 Google Cloud Messaging，更具体地说。“发送到同步”模式。

至于检测记录更改和同步的细节，我不能提供好的建议，只能说这个功能是由许多数据库系统完成的，所以你可能想看看他们是如何解决的。最常见的包括时间戳和版本号。

参考链接： GCM 上的 Google I/O 会议（我觉得这是一个很好的介绍，可以让您开始使用 GCM） [http://www.youtube.com/watch?v=YoaP6hcDctM&list=PL4C6BCDE45E05F49E&index=9](http://www.youtube.com/watch?v=YoaP6hcDctM&list=PL4C6BCDE45E05F49E&index=9)

Google Cloud Messaging 文档（链接直接发送到同步） [http://developer.android.com/google/gcm/adv.html#s2s](http://developer.android.com/google/gcm/adv.html#s2s)

# c# - Visual Studio 添加与 dll 同名的可执行文件

> ID：14948643
> 
> 赞同：8
> 
> 时间：2013-02-19T02:07:08.377
> 
> 标签：c#, visual-studio, dll, assemblies

在 Visual Studio 2008 中，我添加了 WinScp.dll（在项目根目录中）作为参考，并且立即出现了一个黄色图标。在编译时：

*   找不到类型或命名空间名称“WinSCP”（您是否缺少 using 指令或程序集引用？）
*   已解决的文件有错误的图像、没有元数据或无法访问。无法加载文件或程序集“E:...\winscp.exe”或其依赖项之一。该模块应包含程序集清单。

经过一个小时的挫折，我发现如果我将 WinSCP.exe 作为项目文件（也在项目根目录中）删除，一切都编译得很好。*奇怪的！！！！*

问题是我的输出目录中同时需要 WinSCP.dll 和 WinSCP.exe。我该怎么办？

**编辑**：我知道有一些解决方法，例如重命名文件或更改路径。我一开始重命名了exe；现在我重命名了 dll（感谢@Michael），因为它不需要我在我的代码中指定重命名的 exe。

但为什么首先会出现问题？WinSCP.dll 和 WinSCP.exe 是两个不同的文件。这是 Visual Studio 中的错误，还是我不理解的错综复杂的 dll/exe？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T19:13:15.127

> WinSCP.dll 和 WinSCP.exe 是两个不同的文件

不是程序集加载器，它不注意文件扩展名。它只知道它需要找到*显示名称*为“winscp”的程序集。搜索匹配项时，它首先尝试使用该名称的 EXE 文件，然后是 DLL 文件。您可以使用 Fuslogvw.exe 实用程序看到的内容。使用 Fusion 组件的 Microsoft 人员在这篇[博](http://blogs.msdn.com/b/junfeng/archive/2004/09/14/229254.aspx)文中描述了显示名称：

> “名称”部分通常是程序集的文件名，**不包括扩展名**. 所以对于程序集 foo.dll，“名称”部分是“foo”。当然，由于我说的是“通常”，所以有时“名称”部分与不包括扩展名的文件名不同。我稍后会讨论这个问题。

Emphasis added. So it finds WinSCP.exe first and that's a kaboom, it is not a valid .NET assembly. The simple workaround is *rename* the DLL, that changes the display name of the assembly.

# ruby-on-rails-3 - 为什么 Rails 指南建议对关联使用 scoped 方法？

> ID：14948649
> 
> 赞同：3
> 
> 时间：2013-02-19T02:07:40.890
> 
> 标签：ruby-on-rails-3, activerecord

[Rails 指南](http://guides.rubyonrails.org/active_record_querying.html#scopes)声明可以在关联上调用范围。但再[进一步](http://guides.rubyonrails.org/active_record_querying.html#working-with-scopes)，它指出`scoped`返回`ActiveRecord::Relation`对象的方法“可能会派上用场......在关联上”。如果可以在关联上调用范围，则`scoped`提供了哪些附加功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T16:18:05.833

[`scoped`](http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html#method-i-scoped)返回一个*匿名*范围。从 API 文档：

> 在程序生成复杂查询时，匿名范围往往很有用，其中将中间值（范围）作为一等对象传递很方便。

这是示例：

```
posts = Post.scoped
posts.size # Fires "select count(*) from  posts" and returns the count
posts.each {|p| puts p.name } # Fires "select * from posts" and loads post objects

fruits = Fruit.scoped
fruits = fruits.where(:color => 'red') if options[:red_only]
fruits = fruits.limit(10) if limited? 
```

# python - 如何验证字符串是否为有效浮点数？

> ID：14948651
> 
> 赞同：3
> 
> 时间：2013-02-19T02:07:45.757
> 
> 标签：python, string, validation, numbers

我想要做的是验证一个字符串是否是数字——一个浮点数——但我还没有找到一个字符串属性来做到这一点。也许没有。我对这段代码有疑问：

```
N = raw_input("Ingresa Nanometros:");
if ((N != "") and (N.isdigit() or N.isdecimal())):
    N = float(N);
    print "%f" % N; 
```

如您所见，我需要的是只取数字，十进制或浮点数。`N.isdecimal()`不能解决我想到的问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T02:08:59.347

```
try:
    N = float(N)
except ValueError:
    pass
except TypeError:
    pass 
```

这会尝试转换`N`为`float`. 但是，如果不可能（因为它不是数字），它将`pass`（什么也不做）。

我建议你阅读一下[`try`和`except`blocks](http://docs.python.org/2/tutorial/errors.html#handling-exceptions)。

你也可以这样做：

```
try:
    N = float(N)
except (ValueError, TypeError):
    pass 
```

# android - 使用 loadDataWithBaseURL() 时 webView.canGoBack() 不起作用

> ID：14948652
> 
> 赞同：3
> 
> 时间：2013-02-19T02:07:48.760
> 
> 标签：android, html, android-webview

我的应用程序中有一个`WebView`显示从网页下载的 HTML 数据。为什么我要加载 HTML 而不是单独加载 URL？好吧，为了让我允许离线搜索，我下载了 HTML 数据并将其存储在 SQL 数据库中。

一切运行良好，后续调用运行`loadDataWithBaseUrl()`良好，并继续在 my 上正确加载`WebView`，但每当用户按下后退键时，用户只是被带回堆栈上的最后一个活动，而不是返回。

我尝试使用以下代码：

```
// Check if the key event was the Back button and if there's history
if ((keyCode == KeyEvent.KEYCODE_BACK) && myWebView.canGoBack()) {
    myWebView.goBack();
    return true;
} 
```

但是后来我尝试通过以下方式强制`WebView`返回，而不检查它是否可以：

```
// Check if the key event was the Back button and if there's history
if ((keyCode == KeyEvent.KEYCODE_BACK)) {
    myWebView.goBack();
    return true;
} 
```

但什么也没发生，它只是停留在同一个地方。

作为一个仅供参考，我已经尝试`null`在调用时传递一个实际的 URL `loadData()`，这就是我现在设置它的方式：

```
view.loadDataWithBaseURL(mUrl, mHtmlData, SearchUtils.MIME_TYPE, SearchUtils.CHARSET, ""); 
```

我读了这个[答案](https://stackoverflow.com/questions/2686933/android-webview-can-render-html-going-forward-but-not-backward)，但我希望好运。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-25T18:43:27.500

所以我实际上决定实现我自己的“返回”功能，不确定这是否适合每个人的意图，但它对我有用。

第一的，

创建一个`ArrayList`将按时间顺序存储您访问的 url。

```
private ArrayList<String> searchHistory; 
```

从`onCreate()`初始化它：

```
searchHistory = new ArrayList<String>(); 
```

现在，每次加载 url 时，只需将 url 字符串添加到历史记录中：

```
String mUrl = "www.example.com";
searchHistory.add(mUrl);
mWebView.loadDataWithBaseURL(mUrl,...); 
```

并且，当用户按下后，通过删除数组的最旧条目来处理它，然后加载删除后剩余的最后一个：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {     
    if ((keyCode == KeyEvent.KEYCODE_BACK) && searchHistoryPos > 0) {
        Constants.LogMessage("Handling back keyevent");
        //remove eldest entry
        searchHistory.remove(mUrl);
        //make the url-to-load be the latest entry after deletion
        mUrl = searchHistory.get(searchHistory.size);
        //load the new url
        mWebView.loadDataWithBaseURL(mUrl...);
        }
    } 
```

当然，在调用 loadDataWithBaseUrl 时，我也是在传递预加载的 HTML 数据。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-09T13:23:10.897

另一个简单的解决方案是保存第一个 url，然后检查是否等于当前 url

场地 ：

```
String mFirstUrlLoaded = ""; 
```

比 ：

```
mFirstUrlLoaded = "your first url....."; 
```

比 ：

```
@Override
public void onBackPressed() {
        if (!mFirstUrlLoaded.equals(mWebView.getUrl())) { 
        mWebView.goBack();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-17T21:46:26.000

将第一个链接放在历史字段上

```
view.loadDataWithBaseURL(mUrl, mHtmlData, SearchUtils.MIME_TYPE, SearchUtils.CHARSET, mUrl); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-03T18:51:10.810

```
String mFirstUrlLoaded = "";

mFirstUrlLoaded = "your first url.....";

@Override
public void onBackPressed() {
        if (!mFirstUrlLoaded.equals(mWebView.getUrl())) { 
        mWebView.goBack();
} 
```

这对我有用..

# asp.net-mvc-3 - 如何从 Sitecore MediaItem 获取图像参数？

> ID：14948653
> 
> 赞同：4
> 
> 时间：2013-02-19T02:08:05.123
> 
> 标签：asp.net-mvc-3, sitecore, sitecore6

在构建 json 提要时，我需要在控制器中读取图像参数（源、宽度、高度）。

我做了[这个问题](https://stackoverflow.com/questions/14766428/how-can-i-make-sitecore-showing-an-image-or-other-resources)的所有步骤。但是建议的方法允许您使用 View Helper 获取图像标签，并且只能在视图上下文中。由于我不能（而且真的不想这样做，因为这是非常糟糕的做法）在 Controller 中创建 HTMLHelper 我不能在那里生成它。

无论我在 web.config 文件中设置什么，[此方法都只给我 *.ashx 的路径。](https://stackoverflow.com/questions/3835050/how-do-i-render-a-media-library-item-by-itself)所以我有这个 *.ashx URL ( `/~/media/5EE32493443547ED8DB0B26166209C85.ashx`) 但我不能利用它并生成正常的 *.jpg URL，即`/~/media/001FC62786B044F5888640C7164ED72F.JPG`.

*.ashx URL 中包含 ID ( `5EE32493-4435-47ED-8DB0-B26166209C85`)，但 *.jpg 没有...

此外，当我将 *.ashx URL 粘贴到浏览器中时，服务器响应异常，即找不到资源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T03:43:40.240

经过一段时间的搜索和尝试，并测试了许多选项，我找到了非常简单的解决方案：

```
string mediaUrl = Sitecore.Resources.Media.MediaManager.GetMediaUrl(item); 
```

`item`应该是`Sitecore.Data.Items.MediaItem`类的对象。

`mediaUrl`变量具有以下值：`/~/media/001FC62786B044F5888640C7164ED72F.JPG`

基于这个简单的方法，我回到了关于宽度和高度的问题，并且我编写了简单的类（以便于将图像序列化为 JSON），它将向您展示如何从通过 Sitecore CMS 添加的图像中获取所有属性：

```
public class DataItemImage
{
    public string ID { get; set; }
    public string Source { get; set; }
    public string Width { get; set; }
    public string Height { get; set; }
    public string Alt { get; set; }

    public DemoDataItemImage(Sitecore.Data.Fields.ImageField obj)
    {
        string mediaUrl = Sitecore.Resources.Media.MediaManager.GetMediaUrl(obj.MediaItem);
        ID = obj.MediaItem.ID.ToString();
        Source = mediaUrl;
        Width = obj.Width;
        Height = obj.Height;
        Alt = obj.Alt;
    }
} 
```

我也添加了`Alt`和`ID`参数。还有其他的like `Class`and `Border`，但是由于这些东西可以在前端设置（HTML + CSS），所以我没有添加它们。

如果要将此类输出为 Json，请将控制器操作设置为 return `JsonResult`，并添加以下行（其中`obj`是`DataItemImage`类的实例）：

```
return Json(obj, JsonRequestBehavior.AllowGet); 
```

我希望它也能帮助其他 Sitecore 开发人员。

# mysql - mysql列名是否必须以字母开头？

> ID：14948660
> 
> 赞同：1
> 
> 时间：2013-02-19T02:08:36.370
> 
> 标签：mysql, syntax, create-table

考虑以下 CREATE TABLE 查询：

```
CRAETE TABLE tablename (100 VARCHAR(10), 200 VARCHAR(10)); 
```

在此查询中，`100`和`200`是列名。是否可以创建这样的表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:10:07.197

从[手册](http://dev.mysql.com/doc/refman/5.1/en/identifiers.html)

> 标识符可以以数字开头，但除非引用，否则标识符可能不仅仅由数字组成。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:10:09.187

是的，这是可能的，但您需要用反引号包装这些值。

```
CREATE TABLE tablename 
(
`100` VARCHAR(10), 
`200` VARCHAR(10)
); 
```

# magento - Magento 管理员 - 两个 Ajax 调用在更改国家/地区时正在进行订购表格

> ID：14948665
> 
> 赞同：0
> 
> 时间：2013-02-19T02:09:25.077
> 
> 标签：magento

似乎是magento核心中的一个错误，但是当我向magento支持报告时，他们已经尝试并说他们无法重现。即使我附上了屏幕演员。请检查并提出您的意见，以便我们解决此问题。Atlease magento 支持将接受存在问题。

**重现步骤。**

*   Magento 管理员 --> 销售 --> 订单 --> 创建新订单 --> 创建新客户或选择客户 --> 更改国家

*   在执行此操作之前，请启用 fire bug 控制台以查看 xmlHttpRequest 正在执行两次。

# bash - sed 没有正确地将标准输出传递给 ls

> ID：14948666
> 
> 赞同：0
> 
> 时间：2013-02-19T02:09:34.280
> 
> 标签：bash, ssh, sed, ls, xargs

我正在尝试在 sed 中编辑一个我一直遇到问题的简单字符串。基本上我要做的是使用 pwd 获取我当前的工作目录，将其通过管道传输到 sed，编辑文件路径，然后使用 ls 检查文件路径内容。我需要这样做的原因是动态检查备份以查看备份是否包含我当前正在使用的文件夹中的文件（只是将其设置为快速热键）。

这是我到目前为止所得到的：

```
 pwd | sed "s/`whoami`/`whoami`.{daily,weekly,monthly}/g" | xargs ls 
```

在我的服务器上运行它时（它是一个共享托管服务器，因此需要`whoami`而不仅仅是用户名）我得到这个错误：

```
 /bin/ls: cannot access /home1/username.{daily,weekly,monthly}: No such file or directory 
```

但是，我可以毫无问题地运行此命令：

```
 ls /home1/username.{daily,weekly,monthly} 
```

我已经尝试了大约 20 种该命令的不同变体（以及各种 sed 和 xargs 标志），但似乎无法使其正常工作。我相信这个错误是由 sed 处理搜索和替换流的方式引起的，但是我不知道如何解决它或导致它的*确切原因。*

我相信是 sed 导致了这个问题，因为这个命令有同样的错误：

```
 ls `pwd | sed "s/$(whoami)/$(whoami).{daily,weekly,monthly}/g"`
    /bin/ls: cannot access /home1/username.{daily,weekly,monthly}: No such file or directory 
```

如果有人能告诉我为什么会这样，或者 sed 以某种方式将编辑后的版本正确传递给 ls。我应该能够为它找出一个命令，我只需要知道为什么。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:18:12.050

该`{daily,weekly,monthly}`字符串由 解释`bash`，但 bash 看不到该字符串：它直接从`sed`to`xargs`和传递`ls`。

为了`bash`有机会扩展字符串，也许可以尝试：

```
eval ls $(pwd | sed "s/`whoami`/`whoami`.{daily,weekly,monthly}/g") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:13:12.240

`bash`展开大括号，所以

```
ls /home1/username.{daily,weekly,monthly} 
```

实际上被执行为

```
ls /home1/username.daily /home1/username.weekly /home1/username.monthly 
```

名为的目录`/home1/username.{daily,weekly,monthly}`不存在。`xargs`只会传递它从字面上接收到的任何东西，绕过大`bash`括号扩展。

看到这个：

```
echo a{b,c}d
>>> abd acd

echo "a{b,c}d" | xargs echo
>>> a{b,c}d 
```

所以你的问题不在于`sed`, 也不`ls`。您需要找到一种手动进行扩展的方法。最简单的方法是使用`eval`（编辑：如 Adrian Pronk 所示）

# python - 将 NDArray 写入 JSON 和 .CV 文件

> ID：14948668
> 
> 赞同：4
> 
> 时间：2013-02-19T02:09:42.353
> 
> 标签：python, json, csv, file-io, numpy

我有一个大小为 9742 rown x 26 列的 ndarray。它有日期、整数、浮点数等类型，以及“日期”、“金额”、“标记”等列标题......问题是，我想将它逐行保存到另一个文件中。我希望你能帮我做这件事。

我尝试使用：

```
for k1 in range(1,len(arr)):
    c.writerow([arr[index[1:27]][k1]]) 
```

但它给了我一个不可散列的类型错误。index 是一个 python 映射，我用它来循环列标题，如 1：“Date”，2：“Amount”等等......

我也想可能将其写入 JSON 文件。虽然我没有使用 JSON 的经验。如果您能帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:50:01.920

您最好使用[`numpy.savetext()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)而不是尝试手动编写每一行。在这种情况下，您可以使用：

```
numpy.savetxt(filename, arr, header=arr.dtype.names) 
```

您还可以尝试使用以下方法将您正在写入的内容转换为字符串：

```
for arr_row in arr:
    c.writerow(" ".join(map(str, arr_row))) 
```

# jquery - 在 phonegap 上使用 Jquery 读取 txt 文件

> ID：14948670
> 
> 赞同：0
> 
> 时间：2013-02-19T02:09:51.893
> 
> 标签：jquery, cordova

我正在尝试使用 jquery 从 phonegap 索引文件中读取 .txt 文件，但 jquery 函数不返回任何内容

这是我的代码：

```
jQuery.get('http://gridberry.com/uploaded_files/E1BDA03F-3F9A-45E7-B16D-78F68C21DCD8.txt', function(data) {
   alert(data);
}); 
```

可以查看txt文件的链接；它有数据。问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:15:37.077

您不能使用 ajax 请求来访问来自不同域的数据。一个简单的解决方法是制作一个 PHP 脚本，像这样从该 URL 下载内容。

```
echo file_get_contents('http://gridberry.com/uploaded_files/E1BDA03F-3F9A-45E7-B16D-78F68C21DCD8.txt'); 
```

以及`.get()`您服务器上的脚本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:23:36.700

在 JSfiddle 中尝试你的代码给了我这个错误：

XMLHttpRequest 无法加载[http://gridberry.com/uploaded_files/E1BDA03F-3F9A-45E7-B16D-78F68C21DCD8.txt](http://gridberry.com/uploaded_files/E1BDA03F-3F9A-45E7-B16D-78F68C21DCD8.txt)。Access-Control-Allow-Origin 不允许来源[http://fiddle.jshell.net 。](http://fiddle.jshell.net)

这是一个经典的跨域问题……您不能以这种方式调用域外的 url。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T02:18:44.170

它可能是一个跨域调用，因此它失败了，你可以做两件事中的任何一件。1.) 尝试使用 Jsonp 进行此调用，以便您可以使跨域调用正常工作。

2) 将源代码作为您的 url 的脚本标签，并在您的 javascript 中读取脚本标签的内部内容

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T02:15:49.837

尝试`jQuery('#where_it_displays').load(file_url_here);`

[（jQuery 文档）](http://api.jquery.com/load/)

# java - 如何获取所有超链接但忽略图像的链接

> ID：14948675
> 
> 赞同：0
> 
> 时间：2013-02-19T02:10:20.160
> 
> 标签：java, css-selectors, jsoup

我想用 Jsoup 获取网页的所有超链接。同时，我想忽略所有图像的超链接。是否可以为 getElementsByTag 添加更多限制？

```
Document doc = Jsoup.connect(url).timeout(1000).get();
links = doc.getElementsByTag("a").not("[src]"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:43:03.607

如果您的图像使用-attribute与`a`标签链接（而*普通*链接使用），请使用：`src`*`href`*

 *```
Document doc = Jsoup.connect(url).timeout(1000).get();
Elements links = doc.select("a[href]"); // Only select 'a'-tags with 'href' attribute 
```

有关 jsoup 选择器 api，请参见[此处](http://jsoup.org/cookbook/extracting-data/selector-syntax)。*

# c++ - 在 centos 上打开 gcc

> ID：14948678
> 
> 赞同：-3
> 
> 时间：2013-02-19T02:11:06.230
> 
> 标签：c++, c, linux

想问一下我在linux上安装gcc后，在哪里可以找到并打开它。我需要它来编译 c/c++ 代码。仅供参考，我正在使用通过 yum install gcc gcc-c++ autoconf automake 命令安装的 centos 5.5 和 gcc 并成功。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:39:06.580

`gcc`是一个命令行程序，而不是一个用于编写、编译、运行程序的图形环境。你用一些文本编辑器写你的文件，比如`gedit`or `vim`or `emacs`or... Unix/Linux 上也有 IDE（集成开发环境），但我个人喜欢用`xemacs`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T06:36:02.820

Open a terminal/console and change to the directory (with `cd path/to/directory`) with the source code you want to compile.
With the command `gcc sourcefile1.c sourcefile2.c -o output` you compile your own simple programs.

When you've downloaded a complexer program there is normally a configure file and a make file. First execute `./configure` which will check if your system satisfies all dependencies for the program and then execute `make` which build (compiles) everything. Most programs support `sudo make install` too, which will install the program on the whole system (normally in /usr/bin/).

# java - 如何从本地 Eclipse 运行远程 jar

> ID：14948683
> 
> 赞同：2
> 
> 时间：2013-02-19T02:11:52.427
> 
> 标签：java, eclipse, debugging, deployment, execute

这是我的情况（独立的jar程序）

1.  构建罐子
2.  将 jar 部署到远程目标 - 然后开始调试
3.  执行jar（在目标上）
4.  从我的 Eclipse 环境中调试。（我参考了[http://www.ibm.com/developerworks/java/library/os-eclipse-javadebug/index.html](http://www.ibm.com/developerworks/java/library/os-eclipse-javadebug/index.html)）

我想知道有什么方法可以控制我的 Eclipse 上的第 3 步。在不连接目标控制台和启动 jar 文件的情况下，我想在 Eclipse 上执行所有步骤。

我会很感激你的建议。

# vb.net - 在 Visual Basic 中如何操作 gridview 对象的数据？(VB.NET)

> ID：14948687
> 
> 赞同：0
> 
> 时间：2013-02-19T02:12:03.977
> 
> 标签：vb.net

gridview 对象的元素的语法是什么？

我希望能够在 Visual Studio 2010 中操作 gridview 对象，就好像它是一个二维数组，其中该数组的每个单独元素都包含一个变量。

我怎么能做这样的事情：

```
GridView1.SetElementAt(X,Y) = strEventName 
```

其中 X 是行索引，Y 是列索引。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:19:50.403

使用[行](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rows.aspx)和[单元格](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.tablerow.cells.aspx)属性：

```
GridView1.Rows(X).Cells(Y).Text = strEventName 
```

# c++ - graph axis calibration in c++

> ID：14948693
> 
> 赞同：2
> 
> 时间：2013-02-19T02:12:56.547
> 
> 标签：c++, graph, axis-labels

I am plotting some float data in a 2D graph and I need to calibrate the axis of graph into small units that looks neat. Obviously this unit varies based on magnitude of the data. I am trying to find out a good way to divide the axis into nice looking number. for example if my data runs from -1.3345 to +5.882 may be divide in units of 1.0 or 0.5\. if my data us from -100 to 800 divide the axes into units of 100 or 50\. (I hope that makes sense) right now I am dividing the range (largest value - lowest value) by some fixed integer and getting the units but that gives me ugly looking number with long trailing digits. Is there any smart way of doing this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:39:17.830

One way to calculate a good step would be to find the value of the most significant digit of the range's length (i.e. the `diff = maxVlaue - minValue`), and use that as your step. To calculate the value of the most significant digit use this simple formula:

```
pow(10, floor(log10(diff))) 
```

This takes a decimal logarithm of the difference, discards the fractional part, if any, and raises ten to the power of that logarithm. For a difference of 7.2165, the calculation would return 1; for 721.65, it would return 100, and so on.

One shortcoming of this calculation is that the grid step for the `diff` of 9.99 and the `diff` of 1.001 would be the same. One way to address this would be to calculate the number of grid lines you'd get for the step, and decrease the step ten times if the number of lines is insufficient (say, less than three).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:54:21.087

[ACM Algorithm 463](http://www.netlib.org/toms/463) provides three simple functions to produce good axis scales with outputs xminp, xmaxp and dist for the minimum and maximum values on the scale and the distance between tick marks on the scale, given a request for `n` intervals that include the data points `xmin` and `xmax`:

1.  `Scale1()` gives a linear scale with approximately `n` intervals and `dist` being an integer power of 10 times 1, 2 or 5.
2.  `Scale2()` gives a linear scale with exactly `n` intervals (the gap between xminp and xmaxp tends to be larger than the gap produced by `Scale1()`).
3.  `Scale3()` gives a logarithmic scale.

The code is in Fortran but it is very straightforward to interpret and convert into other languages. There are more complicated functions that give prettier scales (e.g. the ones in `gnuplot`), but Scale1 would likely do the job for you with minimal code.

(EDIT)

I found the text of the original 1973 paper online [here](http://lists.gnu.org/archive/html/octave-bug-tracker/2011-09/pdfJd5VVqNUGE.pdf), which provides more explanation than the code linked to above.

# java - 将Bundle的内容打印到Logcat？

> ID：14948697
> 
> 赞同：73
> 
> 时间：2013-02-19T02:13:19.357
> 
> 标签：java, android, logcat, android-bundle

`Bundle`如果您不记得所有键的名称（即使只打印键名也会很酷），是否有一种简单的方法可以将 a 的内容打印到 Logcat？

* * *

## 回答 #1

> 赞同：125
> 
> 时间：2013-02-19T02:15:22.110

[Bundle#keySet()](http://developer.android.com/reference/android/os/Bundle.html#keySet%28%29)应该可以工作。

```
for (String key: bundle.keySet())
{
  Log.d ("myApplication", key + " is a key in the bundle");
} 
```

如果你想获得对象，你可以使用[`Bundle#get(String key)`（这也在我在答案顶部链接的同一个文档中）](http://developer.android.com/reference/android/os/Bundle.html#get%28java.lang.String%29)。但是，请记住使用通用`get()`调用：

*   您正在使用对象。如果您只是打印到日志，`toString()`将被调用，一切都会好起来的。但是，如果您真的想使用密钥对，则需要进行`instanceof`检查以避免调用错误的方法。
*   因为 toString 将被调用，如果你有一个特殊的对象（例如 ArrayLists，或特殊的 Serializable/Parcelable extras），你很可能不会从打印输出中得到任何有用的东西。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2013-02-19T04:37:14.757

您可以通过按如下方式打印映射值来获得更具体的信息：

```
for (String key : bundle.keySet())
{
    Log.d("Bundle Debug", key + " = \"" + bundle.get(key) + "\"");
} 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2013-11-20T11:32:35.993

捆绑到字符串转换器：

```
public static String bundle2string(Bundle bundle) {
    if (bundle == null) {
        return null;
    }
    String string = "Bundle{";
    for (String key : bundle.keySet()) {
        string += " " + key + " => " + bundle.get(key) + ";";
    }
    string += " }Bundle";
    return string;
} 
```

示例用法：

```
Log.d(TAG,"details="+bundle2string(details)); 
```

和输出：

```
details=Bundle{ RESPONSE_CODE => 5; }Bundle 
```

请注意，箭头`=>`和分号可`;`让您在键和值中提及空格。箭头前一个空格，箭头后一个空格，分号前没有空格，分号后一个空格，后`{`一个空格，前一个空格`}`，所有其他空格都在那里，因为它们在键或值中.

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2018-07-09T03:20:38.313

意识到这并没有准确回答问题，但我看到很多开发人员试图将内容转储到 logcat/console，因为他们不知道他们可以在 Android Studio 调试器中设置以在调试时显示自定义对象渲染，当你达到了一个断点。在 Bundle 的情况下，您可以采用此处其他答案中显示的代码类型，并将其应用为自定义渲染器，这样您就不需要将转储通过管道传输到 logcat 和/或控制台。

（这些说明来自 Android Studio 3.1.3（2018 年 6 月）...

1.  选择“文件”，然后选择“设置”菜单选项/子选项。
2.  在左侧的“设置”对话框中，向下钻取并选择“构建、执行、部署”、“调试器”、“数据视图”、“Java 类型渲染器”。
3.  对话框右侧显示“渲染器名称”，输入您希望与正在创建的渲染器标识的名称。
4.  对话框右侧显示“将渲染器应用于类型对象”，输入“android.os.Bundle”。
5.  在对话框的右侧，在“渲染节点时”部分下，选择“使用以下表达式：”单选按钮。
6.  在下面的文本字段中，输入以下内容...

> ```
> StringBuilder builder = new StringBuilder();
> for (String key : ((android.os.Bundle)this).keySet()) {
>     Object value = ((android.os.Bundle)this).get(key);
>     builder.append("[");
>     builder.append(key);
>     builder.append("]=[");
>     builder.append(value);
>     builder.append("](");
>     builder.append((value != null) ? value.getClass().getSimpleName() : "null");
>     builder.append("), ");
> }
> return builder.toString(); 
> ```

5.  按“应用”/“确定”按钮。

现在，当您运行您的应用程序时，您遇到了一个显示 android.os.Bundle 类型的变量的断点，您将在调试器窗口的变量部分看到上述代码生成的输出。

我还将包括一个屏幕截图，显示我上面描述的内容...... [![截屏](../Images/1a4810c8bf57faaf40f38dcb97606164.png)](https://i.stack.imgur.com/nUBaH.png)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-23T12:34:47.487

在 Kotlin 中，当它包含子包时递归：

```
/**
 * Recursively logs the contents of a [Bundle] for debugging.
 */
fun Bundle.printDebugLog(parentKey: String = "") {
    if (keySet().isEmpty()) {
        Log.d("printDebugLog", "$parentKey is empty")
    } else {
        for (key in keySet()) {
        when (val value = this[key]) {
                is Bundle -> value.printDebugLog(key)
                is Array<*> -> Log.d("printDebugLog", "$parentKey.$key : ${value.joinToString()}")
                else -> Log.d("printDebugLog", "$parentKey.$key : $value")
            }
        }
    }
} 
```

用法：`myBundle.printDebugLog()`

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-03-05T11:00:47.440

Kotlin 中简单的 Bundle to String 实现：

```
val bundleToString = bundle.keySet()
            .joinToString(", ", "{", "}") { key ->
                "$key=${bundle[key]}"
            } 
```

结果示例`{id=3, name="Jhon"}`

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-03-27T03:11:49.747

我开发了一个名为`pretty-print`which annotation processor 的库，它以漂亮的表格格式打印包的内容。请检查一下 [https://github.com/NULLPointerGuy/pretty-print](https://github.com/NULLPointerGuy/pretty-print)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-04-17T18:41:31.910

Kotlin 解决方案：

```
val bundleFromNotifications: Bundle? = remoteMessage?.toIntent()?.extras
bundleFromNotifications?.keySet()?.forEach{
    Log.d(LOG_TAG, it + "=> \"" + bundleFromNotifications.get(it) + "\"")
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-06T10:10:55.637

Kotlin 中的解决方案：

```
fun Bundle.toPrintableString(): String {
    val sb = StringBuilder("{")
    var isFirst = true
    for (key in keySet()) {
        if (!isFirst)
            sb.append(',')
        else
            isFirst = false
        when (val value = get(key)) {
            is Bundle -> sb.append(key).append(':').append(value.toPrintableString())
            else -> sb.append(key).append(':').append(value)
            //TODO handle special cases if you wish
        }
    }
    sb.append('}')
    return sb.toString()
} 
```

样本：

```
 val bundle = Bundle()
    bundle.putString("asd", "qwe")
    bundle.putInt("zxc", 123)
    Log.d("AppLog", "bundle:${bundle.toPrintableString()}") 
```

请注意，它不能处理所有可能类型的值。您应该决定展示哪些重要内容以及展示方式。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-04-11T17:41:53.217

Java 8 流式一班轮：

```
bundle.keySet().stream().forEach(k -> Log.d(TAG, k + " = " + bundle.get(k))); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-03-01T19:10:03.713

技巧：**访问 Bundle 的内容以对其进行具体化，然后`bundle.toString()`将其元素格式化。**

（我仅将其用于调试目的。）

AppWidgetProvider 中的示例，调用`newOptions.keySet()`：

```
 @Override
    public void onAppWidgetOptionsChanged(Context context, AppWidgetManager appWidgetManager,
            int appWidgetId, Bundle newOptions) {
        super.onAppWidgetOptionsChanged(context, appWidgetManager, appWidgetId, newOptions);

        newOptions.keySet(); // <-- reify the Bundle so .toString() will elaborate
        Log.i(TAG, "*** WidgetOptionsChanged: " + newOptions);
    } 
```

结果：

```
*** WidgetOptionsChanged: Bundle[{appWidgetMaxHeight=137, appWidgetCategory=1, appWidgetMaxWidth=603, appWidgetMinHeight=82, appWidgetMinWidth=338, appWidgetSizes=[338.0x137.5, 603.5x82.0]}] 
```

比：

```
*** WidgetOptionsChanged: Bundle[mParcelledData.dataSize=408] 
```

# algorithm - 通过图像识别解决迷宫

> ID：14948699
> 
> 赞同：5
> 
> 时间：2013-02-19T02:13:27.370
> 
> 标签：algorithm, opencv, image-processing, computer-vision, maze

我正在尝试和我的一些朋友一起做一个项目，我们遇到了这个问题：

假设我必须以编程方式破译这个[迷宫](http://i.stack.imgur.com/BB8dO.jpg)，我该怎么做呢？当我试图通过图像识别解决迷宫时，我的第一个决定显然是简单地绘制开放路径，这样油漆结束（迷宫开始处的箭头是为识别提供一种方式来看到“好的，这就是开始” ) 表示退出。

问题是，有了这些过滤器，我无法绘制它，我也不知道如何解决它。那么，Open CV 有什么办法吗？（或任何其他选项也可以，如果可能的话）

我真的不知道如何解决这个问题，所以如果可能的话，只需指出一个选项的方向，我会对此进行更多研究。

非常感谢。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T03:41:59.253

为简单起见，考虑一个颜色空间，它提供了一个通道，在该通道中这种噪声被渲染为无用。例如，如果我们从中获取`S`通道，`HSB`我们会得到左边的图像，它很容易被 Otsu 二进制化——右边的图像。

![在此处输入图像描述](../Images/ff3e663f6d6c3416b2240c347b24b29d.png) ![在此处输入图像描述](../Images/d5adebbe347f2d77b54e5979c7b19830.png)

请注意，在较高的手动阈值下，我们将只获得终点和起点。通过这样做，我们可以扩大这些点（左图）并将结果图像添加到右上角的图像。现在，如果使用左侧的图像作为标记在此生成的图像中执行测地线膨胀，我们将获得连接至少两个点的路径——右侧的图像。

![在此处输入图像描述](../Images/8b84996eaede259ebd0310120bd77336.png) ![在此处输入图像描述](../Images/57c02588b1fd2358bfa4e39b6335f7a1.png)

可以通过简单的模板匹配找到起点，从而消除不包含起点的路径。这给出了下一个图像。现在您所要做的就是以广度优先的方式执行泛洪填充，以获得从起点到某个出口点的最小路径。

![在此处输入图像描述](../Images/387ce17f74793fc8dcc3b4927bfdf7d0.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:19:16.277

解决迷宫的一个有趣方法可能是查看任何迷宫的墙壁都会构成连接组件的事实。如果只有一个出口，那么迷宫墙可以分成两部分，沿着入口和出口之间的路径连接。由于有几个出口，这个迷宫分成几个连接的组件。

通过对图像执行一些非常基本的阈值处理，我能够将其简化为墙壁为黑色而路径为白色的简化版本。通过在墙壁的每个大连接部分进行洪水填充，我得到了一些[看起来像这样](http://imgur.com/AM31rkK)的东西。

您可以通过沿着以不同颜色为边界的路径找到从一个点到另一个点的路径。这似乎在岛上有一个故障模式，您可以在 A 出口看到，但从入口到 D 的路径非常清晰。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-20T11:33:13.860

这个答案只是对上述答案的补充：有一种简单的方法可以解决迷宫。它被称为**“右手法则”**。当你进入一个迷宫时，你把你的右手放在右边的墙上，然后就走了。永远不要放开正确的墙，你最终会找到出路。换句话说，当有交叉路口时，总是向右转（否则你的右手会失去对墙的抓地力）。当你走到死胡同时，让 U 向左转（因此总是接触右墙）。

根据这个原理实现一个算法。当您面向前方时，请始终确保右侧的相邻像素是迷宫墙。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-19T02:19:33.957

我相信您在谈论“寻路”

维基百科条目有一个在网格上查找路径的简单算法：[http](http://en.wikipedia.org/wiki/Pathfinding) ://en.wikipedia.org/wiki/Pathfinding但谷歌搜索应该以您选择的语言提供一些代码示例。

# c++ - 添加/删除 COM 方法和属性时的注意事项

> ID：14948702
> 
> 赞同：0
> 
> 时间：2013-02-19T02:14:13.360
> 
> 标签：c++, windows, com, idl

我最近继承了一个在 DLL 中创建和实现 COM coclass/interface 的项目。该 COM DLL 由应用程序使用，该应用程序将 GUI 应用于 COM 类的接口。这是唯一使用 COM DLL 的应用程序。我是处理 COM 的新手，很难找到好的文档。

我的部分任务涉及向接口添加一些方法/属性（以及删除一些不再需要的）。我了解到我需要修改 IDL 才能完成此操作。现在我只是简单地将我的新方法和属性添加到接口的末尾，一切似乎都很好。但是，当我删除其中一个属性（例如）时，当我运行应用程序时，事情很快就会变糟。

```
interface IMyComInterface : IDispatch
    {
        [id(1), helpstring("method CheckMessage")] HRESULT CheckMessage([in] VARIANT vMsg);
        [id(2), helpstring("method CheckFolder")] HRESULT CheckFolder([in] VARIANT Folder, [out] VARIANT *pCount, [out, retval] VARIANT *pErrorCount);
        //[propget, id(3), helpstring("property Flags")] HRESULT Flags([out, retval] VARIANT *pVal);
        //[propput, id(3), helpstring("property Flags")] HRESULT Flags([in] VARIANT newVal);
        [propget, id(4), helpstring("property MessageStore")] HRESULT MessageStore([out, retval] VARIANT *pVal);
        [propput, id(4), helpstring("property MessageStore")] HRESULT MessageStore([in] VARIANT newVal);
        [propget, id(5), helpstring("property Directory")] HRESULT Directory([out, retval] VARIANT *pVal);
        [propput, id(5), helpstring("property Directory")] HRESULT Directory([in] VARIANT newVal);
    } 
```

我猜这与分解的身份证号码序列有关。我想我可以把它下面的所有东西都移上来，一切都会奏效。但我很好奇做这一切的正确方法。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T04:19:39.657

如果 GUI 用于`IDispatch::Invoke`调用您的方法，它应该能够适应接口中的更改（只要您保持 ID 相同），因为方法调用是在运行时解决的（后期绑定）。VB6 程序和脚本语言以这种方式运行是很常见的。

但是，如果 GUI 是直接编译的`IMyComInterface`（如果它是 C++ 或 C# 应用程序最有可能），那么重要的是接口中方法的确切顺序。方法调用在编译时解析（早期绑定），接口中方法的索引存储在COM客户端中。如果您从 IDL 中删除一个方法，来自客户端的所有函数调用都将关闭一个。这就是为什么在最后添加新方法有效，但在中间删除方法无效。

解决所有这些问题的最简单方法（因为您同时控制 COM DLL 和 GUI）是确保在更改 IDL 后重新编译所有内容。但是，在一般情况下，您应该将每个接口视为“一组方法的不可变契约”（[source](http://msdn.microsoft.com/en-us/library/windows/desktop/ms688484.aspx)），并且在 COM 接口发布后永远不要修改它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T04:22:28.820

如果 COM 客户端是 C++，它可能会使用早期绑定（这意味着它依赖于保持不变的界面布局）而不是后期绑定。在这种情况下，DISPID 是什么并不重要，因为 DISPID 用于后期绑定，而不是用于早期绑定。这就是为什么从接口中删除方法/属性会破坏客户端，除非你重新编译它。这也是为什么不建议更改 COM 接口，而是添加从旧接口继承的新接口并添加新功能的原因：

```
interface IMyComInterface : IDispatch
{
    // existing methods/properties
}

interface IMyComInterface2 : IMyComInterface
{
    // new methods/properties
} 
```

# android - Android原生使用Qt库

> ID：14948703
> 
> 赞同：1
> 
> 时间：2013-02-19T02:14:13.153
> 
> 标签：android, qt, stl, android-ndk

我正在使用一个使用 QT(necessitas) 开发的静态库。有些问题阻碍了我的工作，所以我写信征求你的意见。我遇到的奇怪问题是静态库和 libQtCore.so 与我的 Android 本机共享库（使用 ndk-r8b 编译）成功链接，但在 libQtCore.so 崩溃。跟踪表明 libQtCore.so 在某些 STL 操作中崩溃。

我注意到 necessitas 有自己的 ndk，所以我应该使用 necessitas 的 ndk 编译我所有的 android 原生库吗？necessitas 的 libc++/libstdc++ 和 android libc++/libstdc++ 是否兼容 ABI？

这是崩溃跟踪。非常感谢你。

```
signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 0000`enter code here`0000

/data/app-lib/com.balabala-1/libQtCore.so (std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, int)+468)
/data/app-lib/com.balabala-1/libQtCore.so (std::basic_ostream<char, std::char_traits<char> >& std::__ostream_insert<char, std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*, int)+28)
02-18 10:53:50.779: I/DEBUG(159): stack:
02-18 10:53:50.779: I/DEBUG(159):          780664d0  7806656c  [stack:24549]
02-18 10:53:50.779: I/DEBUG(159):          780664d4  78066510  [stack:24549]
02-18 10:53:50.779: I/DEBUG(159):          780664d8  78066510  [stack:24549]
02-18 10:53:50.779: I/DEBUG(159):          780664dc  7806656c  [stack:24549]
02-18 10:53:50.779: I/DEBUG(159):          780664e0  72e37488  
02-18 10:53:50.779: I/DEBUG(159):          780664e4  761fcbcb  /data/app-lib/com.balabala-1/libmsess.so
02-18 10:53:50.779: I/DEBUG(159):          780664e8  c0000000  
02-18 10:53:50.779: I/DEBUG(159):          780664ec  0000004c  
02-18 10:53:50.779: I/DEBUG(159):          780664f0  0000004c  
02-18 10:53:50.779: I/DEBUG(159):          780664f4  00000000  
02-18 10:53:50.779: I/DEBUG(159):          780664f8  72e37480  
02-18 10:53:50.779: I/DEBUG(159):          780664fc  4021a3c3  /system/lib/libc.so (dlmalloc+5170)
02-18 10:53:50.779: I/DEBUG(159):          78066500  76317d28  
02-18 10:53:50.779: I/DEBUG(159):          78066504  762d2b0c  /data/app-lib/com.balabala-1/libmsess.so
02-18 10:53:50.779: I/DEBUG(159):          78066508  df0027ad  
02-18 10:53:50.779: I/DEBUG(159):          7806650c  00000000  
02-18 10:53:50.779: I/DEBUG(159):     #00  78066510  00000001  
02-18 10:53:50.779: I/DEBUG(159):          ........  ........
02-18 10:53:50.779: I/DEBUG(159):     #01  78066510  00000001  
02-18 10:53:50.779: I/DEBUG(159):          78066514  76317d28  
02-18 10:53:50.779: I/DEBUG(159):          78066518  78066594  [stack:24549]
02-18 10:53:50.779: I/DEBUG(159):          7806651c  76317d28  
02-18 10:53:50.779: I/DEBUG(159):          78066520  762d2b0c  /data/app-lib/com.balabala-1/libmsess.so
02-18 10:53:50.779: I/DEBUG(159):          78066524  725e2fc8  
02-18 10:53:50.779: I/DEBUG(159):          78066528  78066594  [stack:24549]
02-18 10:53:50.779: I/DEBUG(159):          7806652c  72e37488  
02-18 10:53:50.779: I/DEBUG(159):          78066530  00100000  
02-18 10:53:50.779: I/DEBUG(159):          78066534  72e37488  
02-18 10:53:50.779: I/DEBUG(159):          78066538  00000000  
02-18 10:53:50.779: I/DEBUG(159):          7806653c  75c7c4e0  /data/app-lib/com.balabala-1/libQtCore.so (std::basic_ostream<char, std::char_traits<char> >& std::operator<< <std::char_traits<char> >(std::basic_ostream<char, std::char_traits<char> >&, char const*)+40)
02-18 10:53:50.779: I/DEBUG(159):          78066540  00000001  
02-18 10:53:50.779: I/DEBUG(159):          78066544  78066594  [stack:24549]
02-18 10:53:50.779: I/DEBUG(159):          78066548  725e2fc8  
02-18 10:53:50.779: I/DEBUG(159):          7806654c  762026d5  /data/app-lib/com.balabala-1/libmsess.so 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:09:50.237

默认情况下，构建 C++ 源代码时使用最小 C++ 运行时系统库 (/system/lib/libstdc++.so) 的头文件和库。

但是，您可以通过将变量 APP_STL 设置为 Application.mk 中的其他内容来选择不同的实现，例如：

APP_STL := stlport_static

选择此 NDK 提供的静态 STLport 实现。值 APP_STL 值如下：

system -> 使用默认的最小 C++ 运行时库。stlport_static -> 使用作为静态库构建的 STLport。stlport_shared -> 使用作为共享库构建的 STLport。gnustl_static -> 使用 GNU libstdc++ 作为静态库。

您使用的是哪个 NDK？您是否尝试过编译使用 STL 的示例应用程序之一，例如 test-libstdc++？

# ios - 使用 Storyboard 时视图是否必须是“全屏”？

> ID：14948707
> 
> 赞同：1
> 
> 时间：2013-02-19T02:15:11.217
> 
> 标签：ios

我一直在使用一个 Storyboard 文件和几个自定义的 NIB，用于应用程序中的自定义控件。我正在阅读故事板并尝试改进应用程序。但我想我现在很困惑

1.  是否有可能在使用情节提要时有一个场景，而不是全屏？
2.  如果是，那么应该由谁来处理这种情况，比如说，用户触摸了小于全屏的这个视图的“外部”？
3.  如果我有一些仅在从服务器获取一些数据时才显示的“视图对象”，该怎么办？当显示此自定义控件时，触摸它会导致其他视图。我也可以为此使用故事板和转场吗？

谢谢！

# html - VBScript 中的 Html 显示数组结果并重新启动函数

> ID：14948708
> 
> 赞同：0
> 
> 时间：2013-02-19T02:15:12.210
> 
> 标签：html, excel, vbscript

这是我的代码。我必须连接到 324k+ 行的电子表格并在 html 页面上的表格中返回值。该函数正常工作并返回值。我坚持让它只是更新当前表而不重新加载页面，然后“再次搜索”按钮无法再次启动该功能。必须是 HTML 网页类型的界面。但我可以在 Javascript 和 VBScript 之间进行选择。出于安全考虑，我已经取了一些名字。

```
<!DOCTYPE html>
<html>
<head>
<title>CS Number Search Tool</title>
        <table id="Header" border="1" bgcolor="E6E7F5">
            <thead bgcolor="69BDF5">
                <tr>
                    <th width="1130"><font color="F2F2F2" />the title i created</th>
                </tr>
            </thead>
        </table>
        <table id="Incidents" border="1" summary="CS Search Results">
            <thead bgcolor="DAF0F5">
                <tr >
                    <th></th>
                </tr>
            </thead>
        </table>
<button onclick="vbscript:ReadExcel()">Search</button>
</head>

<body>
<script Language="VBScript" type="text/vbscript">

  Option Explicit

  Dim idTimer

  function ReadExcel()

  Dim myXlsFile
  myXlsFile = "path\\reprogrammingticketsPOX.xlsb"
  Dim mySheet
  mySheet = "Sheet1"
  Dim my1stCell
  my1stCell = "A1"
  Dim myLastCell
  myLastCell = "F324375"
  Dim blnHeader
  blnHeader = True

  Dim srcphr, Message
  Dim Title

  Message = "Please Enter A Number To Search"
  Title = "CS Search Tool TycoIS"

  srcphr = InputBox(Message, Title)
  If srcphr = "" Then
  Exit Function
  End If

  Dim arrData( ), i, j
  Dim objExcel, objRS
  Dim strHeader, strRange

  Const adOpenForwardOnly = 0
  Const adOpenKeyset      = 1
  Const adOpenDynamic     = 2
  Const adOpenStatic      = 3

  ' Define header parameter string for Excel object
  If blnHeader Then
  strHeader = "HDR=YES;"
  Else
  strHeader = "HDR=NO;"
  End If
  ' Open the object for the Excel file
  Set objExcel = CreateObject( "ADODB.Connection" )
  ' With IMEX=1 numbers won't be ignored; tip by Thomas Willig.
  ' Connection string updated by Marcel Niënkemper to open Excel 2007 (.xslx) files.
  objExcel.Open "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" _
  & myXlsFile & ";Extended Properties=""Excel 12.0;HDR=YES;IMEX=1;Format=xlsb;" _
                & strHeader & """"

    ' Open a recordset object for the sheet and range
    Set objRS = CreateObject( "ADODB.Recordset" )
    strRange = mySheet & "$" & my1stCell & ":" & myLastCell
    objRS.Open "SELECT * FROM [" & strRange & "] WHERE [CS_No]= '" & srcphr & "' OR [Cust_No]='" & srcphr & "' OR [Job_No]='" & srcphr & "' OR [New_CS_No]='" & srcphr & "' " , objExcel, adOpenStatic

    ' Read the data from the Excel sheet
    i = 0
    Do Until objRS.EOF
        ' Stop reading when an empty row is encountered in the Excel sheet
        If IsNull( objRS.Fields(0).Value ) Or Trim( objRS.Fields(0).Value ) = "" Then Exit Do
        ' Add a new row to the output array
        ReDim Preserve arrData( objRS.Fields.Count - 1, i )
        ' Copy the Excel sheet's row values to the array "row"
        ' IsNull test credits: Adriaan Westra
        For j = 0 To objRS.Fields.Count - 1
            If IsNull( objRS.Fields(j).Value ) Then
                arrData( j, i ) = ""
            Else
                arrData( j, i ) = Trim( objRS.Fields(j).Value )
            End If
        Next
        ' Move to the next row
        objRS.MoveNext
        ' Increment the array "row" number
        i = i + 1
    Loop

    ' Close the file and release the objects
    objRS.Close
    objExcel.Close
    Set objRS    = Nothing
    Set objExcel = Nothing

    ' Return the results
    ReadExcel = arrData

Call writeTable(arrData)

End function

sub writeTable(arrData)

Dim intCount, objSheet
For intCount = 0 To UBound( arrData, 2 )

document.write "<!DOCTYPE html>"
document.write "<html>"
document.write "<head>"
document.write "<title>CS Number Search Tool</title>"
document.write "<table id='Header' border='1' bgcolor='E6E7F5'>"
document.write "<thead bgcolor='69BDF5'>"
document.write "<tr>"
document.write "<th width='1130'><font color='F2F2F2' />Tyco Integrated Security - Panel Reprogramming Project CS Search</th>"
document.write "</tr>"
document.write "</thead>"
document.write "</table>"
document.write "<table id='Incidents' border='1'>"
document.write "<tbody bgcolor='DAF0F5'>"
document.write "<tr>"
document.write "<th width='200px'>Old CS Number <BR>"& arrData( 0, intCount ) &"</th>"
document.write "<th width='150px'>Site Number <BR>"& arrData( 1, intCount ) &"</th>"
document.write "<th width='150px'>Customer Number <BR>"& arrData( 2, intCount ) &"</th>"
document.write "<th width='150px'>Job Number <BR>"& arrData( 3, intCount ) &"</th>"
document.write "<th width='150px'>New CS Number <BR>"& arrData( 4, intCount ) &"</th>"
document.write "<th width='300px'>Source Sheet <BR>"& arrData( 5, intCount ) &"</th>"
document.write "</tr>"
document.write "</tbody>"
document.write "</table>"
document.write "</head>"
document.write "</html>"

Next

Call searchExcel()

End sub

Sub searchExcel()
    document.write "<button onclick=ReadExcel()>Search Again</button>"
End Sub
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T06:57:48.543

正如我正确理解的那样，您说，该`Search Again`按钮不起作用。那是因为附加到 onclick 事件的函数调用不在双引号之间。改变

```
Sub searchExcel()
    document.write "<button onclick=ReadExcel()>Search Again</button>"
End Sub 
```

至

```
Sub searchExcel()
    document.write "<button onclick=""VBScript:ReadExcel()"">Search Again</button>"
End Sub 
```

而这部分会表现得更好。

您将遇到的下一个挑战是 Search Again 操作之后的表写在第一个表之后。您可以通过创建具有 ID 的表、获取表并使用新数据`document.getElementById`设置属性来使其更干净。`innerHtml`

# html - CSS 菜单导航搞砸了

> ID：14948710
> 
> 赞同：0
> 
> 时间：2013-02-19T02:15:19.363
> 
> 标签：html, css, navigation

我正在为此处显示的网站更新标题导航菜单：

如您所见，文本和分隔符被向下推，菜单看起来关闭。我尝试了几种不同的方法无济于事。我希望文本和分隔符彼此垂直对齐，而顶部没有额外的填充。

**CSS**

```
/*Header Link Wrap & Align*/

#nav-wrap { 
    width: 100%;
    overflow: hidden;
    height: 52px;
    background-image: url(/nd/images/hlink-bg.jpg);
    background-repeat: repeat-x;

}

#nav {
    text-align: center;

}

#nav li {
    list-style: none;
    display: inline-block;
    vertical-align: middle;
    padding: 0px 10px 0px 0px;
}

#nav a {
    color: #FFFFFF;
    display: inline-block;
    font-family:arial;
    margin: 0;
    padding: 9px 18px 9px 18px;
    text-decoration: none;
    vertical-align: middle;
}

#nav a:hover {
    background-color: #ffa500;
    color: #fff9;
}

.head-divider {
    list-style: none;
    vertical-align: middle;
    display: inline-block; 
    margin: 0;
    width:2px;
    height:52px;
    background-image:url(/nd/images/h-divider.jpg);
    background-repeat: no-repeat;

} 
```

**HTML**

```
<div id="nav-wrap">
    <ul id="nav">
    <li><a href="homes.php">Custom Homes</a></li>
    <li class="head-divider"></li>
    <li><a href="inspections.php">Inspection Services</a></li>
    <li class="head-divider"></li>
    <li><a href="energy.php">Energy Audits</a></li>
    <li class="head-divider"></li>
    <li><a href="contact.php">Contact</a></li>
    </ul>   
</div>  
</div> 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:20:14.587

您可以简单地重置`margin`和`padding`。`<ul>`

为您添加以下样式`#nav`：

```
#nav{
  margin:0px;
  padding:0px;
} 
```

# python - 在 Pygame 中，如何将透明图像无头保存到文件中？

> ID：14948711
> 
> 赞同：2
> 
> 时间：2013-02-19T02:15:20.173
> 
> 标签：python, png, pygame

这是我最近问的一个问题：

[在 Pygame 中，如何以无头模式保存屏幕图像？](https://stackoverflow.com/questions/14472781/in-pygame-how-can-i-save-a-screen-image-in-headless-mode)

我能够保存涉及非透明表面对象的屏幕图像。但是，该技术不适用于透明表面对象。下面的代码说明了这个问题：

```
import sys
import os
import pygame
from pygame.color import THECOLORS as RGB

class PygameProblemDemo(object):

    def __init__(self):
        screen_width, screen_height = 200, 200
        os.environ['SDL_VIDEODRIVER'] = 'dummy'

        pygame.init()
        pygame.display.init()

        self.screen = pygame.display.set_mode((screen_width, screen_height))

    def save_non_alpha_image(self):
        r = 50
        color = RGB['blue']
        img_path = '/tmp/non_alpha_image.png'

        background = pygame.Surface((200, 200), pygame.SRCALPHA, 32)
        pygame.draw.rect(background, RGB['lightgray'], (0, 0, 200, 200), 0)

        self.screen.fill(RGB['black'])
        self.screen.blit(background, (0,0))
        pygame.draw.circle(self.screen, color, (100,100), r, 0)

        pygame.image.save(self.screen, img_path)
        print "image saved to %s" % (img_path)

    def save_alpha_image(self):
        r = 50
        color = RGB['blue']
        img_path = '/tmp/alpha_image.png'

        background = pygame.Surface((200, 200), pygame.SRCALPHA, 32)
        pygame.draw.rect(background, RGB['lightgray'], (0, 0, 200, 200), 0)

        transparent_circle = self.draw_transparent_circle(r, color, 50)

        self.screen.fill(RGB['black'])
        self.screen.blit(background, (0,0))
        self.screen.blit(transparent_circle, (50,50))

        pygame.image.save(self.screen, img_path)
        print "image saved to %s" % (img_path)

    def draw_transparent_circle(self, radius, color, transparency=0):
        """transparency is value between 0 and 100, 0 is opaque,
        100 invisible"""
        width, height = radius*2, radius*2

        # transparent base surface
        flags = pygame.SRCALPHA
        depth = 32
        base = pygame.Surface((width, height), flags, depth)

        # alpha surface
        alpha = int(round(255 * (100-transparency) / 100.0))
        alpha_surface = pygame.Surface((width, height))
        alpha_surface.set_colorkey(RGB['black'])
        alpha_surface.set_alpha(alpha)

        # draw circle (to alpha surface)
        pygame.draw.circle(alpha_surface, color, (radius,radius), radius)

        # draw alpha surface to base surface
        base.blit(alpha_surface, (0,0))

        return base

demo = PygameProblemDemo()
demo.save_non_alpha_image()
demo.save_alpha_image() 
```

结果如下：

**non_alpha_image.png**

![non_alpha_image.png](../Images/64fd8e41de44406dbc6068097adc9096.png)

**alpha_image.png**

![alpha_image.png](../Images/3bbefb478321b604dc8de04ce6d0170e.png)

* * *

### 更新

如果我在构造函数中注释掉该行`os.environ['SDL_VIDEODRIVER'] = 'dummy'`，则透明图像保存成功：

**alpha_image.png**

![alpha_image.png](../Images/9627300b69f696d3ef0293df5a152882.png)

但是，那是禁止打开窗口的行，因此脚本不能再无头运行。:\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T03:32:10.830

我已经想通了。Pygame 显示需要在启用 Alpha 通道的情况下启动。要修复上面的示例，只需在构造函数中替换此行：

```
self.screen = pygame.display.set_mode((screen_width, screen_height)) 
```

有了这个：

```
self.screen = pygame.display.set_mode((screen_width, screen_height), 0, 32) 
```

# ruby-on-rails - 如何在不定义类能力的情况下在 cancan 中定义实例能力？

> ID：14948712
> 
> 赞同：3
> 
> 时间：2013-02-19T02:15:21.160
> 
> 标签：ruby-on-rails, ruby, cancan

如何在不定义类能力的情况下在 cancan 中定义实例能力？

我想允许`:manage`特定`Course`实例的操作，**而不是`Course`class**。

```
# ability.rb
can :manage, Course do |course|
  # Check if the user is a helper for this course
  CourseRole.get_role(user, course) == "helper"
end 
```

这适用于实例变量：

```
# some_view.rb
can? :manage, @course # checks the instance to see if :manage is allowed 
```

但如果我这样做：

```
# some_view.rb
can? :manage, Course 
```

它总是返回 true，这很糟糕。

一些上下文：

```
class User < ActiveRecord::Base
  has_many :course_roles
  has_many :courses, :through => :course_roles
  ...
class CourseRoles < ActiveRecord::Base
  belongs_to :user
  belongs_to :course
  ...
class Courses < ActiveRecord::Base
  has_many :course_roles
  has_many :users, :through => :course_roles 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:44:08.850

而不是`can? :manage, Course`，您可以使用`can? :manage, Course.new`并确保新课程对象无法通过您传入的 block 能力.rb

# dll - 构建dll并链接到它？

> ID：14948717
> 
> 赞同：2
> 
> 时间：2013-02-19T02:16:11.623
> 
> 标签：dll, mingw, codeblocks, dynamic-linking

我在 XP SP3 上的代码块 10.05 mingw 上，我基本上[在 mingw 站点创建 dll 并链接到它](http://www.mingw.org/wiki/sampleDLL)之后构建了 dll 和 lib 文件。我遇到的问题是我试图链接到图书馆的第二部分。我创建了一个控制台应用程序并使用了以下源：

```
#include <stdio.h>
#include "example_dll.h"

int main(void)
{
    hello("World");
    printf("%d\n", Double(333));
    CppFunc();

    MyClass a;
    a.func();

    return 0;
} 
```

然后我设置我的链接器设置，就像网站所说的添加`-L. -lexample_dll`，我还链接库文件 libexample_dll.a，就像我与许多其他已成功使用相同设置的库一样。然后，当我尝试链接可执行文件时出现错误，

```
 C:\example_dll_client\example_dll_client.cpp|2|error: example_dll.h: No such file or directory|
C:\example_dll_client\example_dll_client.cpp||In function 'int main()':|
C:\example_dll_client\example_dll_client.cpp|6|error: 'hello' was not declared in this scope|
C:\example_dll_client\example_dll_client.cpp|7|error: 'Double' was not declared in this scope|
C:\example_dll_client\example_dll_client.cpp|8|error: 'CppFunc' was not declared in this scope|
C:\example_dll_client\example_dll_client.cpp|10|error: 'MyClass' was not declared in this scope|
C:\example_dll_client\example_dll_client.cpp|10|error: expected ';' before 'a'|
C:\example_dll_client\example_dll_client.cpp|11|error: 'a' was not declared in this scope|
||=== Build finished: 7 errors, 0 warnings ===| 
```

我还包括了用于构建 dll 和 lib 文件的两个文件（不是项目，而是这个站点以供参考。我只有错误的源作为整个项目，否则 dll 的意义何在？） .

```
//example_dll.cpp
#include <stdio.h>
#include "example_dll.h"

__stdcall void hello(const char *s)
{
        printf("Hello %s\n", s);
}
int Double(int x)
{
        return 2 * x;
}
void CppFunc(void)
{
        puts("CppFunc");
}
void MyClass::func(void)
{
        puts("MyClass.func()");
} 
```

```
//example_dll.h
#ifndef EXAMPLE_DLL_H
#define EXAMPLE_DLL_H

#ifdef __cplusplus
extern "C" {
#endif

#ifdef BUILDING_EXAMPLE_DLL
#define EXAMPLE_DLL __declspec(dllexport)
#else
#define EXAMPLE_DLL __declspec(dllimport)
#endif

void __stdcall EXAMPLE_DLL hello(const char *s);

int EXAMPLE_DLL Double(int x);

#ifdef __cplusplus
}
#endif

// NOTE: this function is not declared extern "C"
void EXAMPLE_DLL CppFunc(void);

// NOTE: this class must not be declared extern "C"
class EXAMPLE_DLL MyClass
{
public:
        MyClass() {};
        virtual ~MyClass() {};
        void func(void);
};

#endif  // EXAMPLE_DLL_H 
```

编辑：

我对 DLL 和 lib 文件的编译进行了以下更改。

我首先确保我的构建目标是一个动态库，可以通过右键单击项目管理器树中活动项目的属性在构建目标选项卡下找到它。我还检查了创建导入库和检查 .def 导出文件。然后我进入代码块构建选项并在编译器设置->其他选项选项卡下添加

-c -共享

在我添加的#defines 选项卡下

BUILDING_EXAMPLE_DLL BUILD_DLL

我的链接器设置在链接库中有 user32，在链接器设置下我有 -mwindows --out-imlib

构建现在应该编译和链接，没有错误或警告。

为了使用 int main() 编译源代码，我包含了头文件以及这些设置：

在我有 libexample_dll.dll.a 的链接库和我有的链接器设置下

-L。-lexample_dll

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T12:32:34.130

对我来说，看起来你有不同的 exe 和 dll 目录。

所以`L.`不行。应该是`LpointsToThelibexample_dll.aFolder`。

将 example_dll.h 复制到您的 exe 目录中，或者使用`-IpointsToTheexample_dll.hFolder`.

可以肯定的是，由于命令不正确，执行不起作用。
我做了一个makefile。

测试生成文件

*   创建一个新目录。
*   复制 example_dll.h ， example_dll.cpp ， example_dll.cpp 文件在那里。
*   文件makefile（在同一目录中）中的安全以下代码。

生成文件

```
# Environment 
MKDIR=mkdir
CP=cp
CCADMIN=CCadmin

# build
builddll:
    g++ -c -DBUILDING_EXAMPLE_DLL example_dll.cpp
    g++ -shared -o example_dll.dll example_dll.o -Wl,--out-implib,libexample_dll.a

buildexe:
    g++ -c example_exe.cpp
    g++ -o example_exe.exe example_exe.o -L. -lexample_dll

clean:
    rm -f libexample_dll.a example_exe.exe example_dll.dll 
```

**因为复制和粘贴错误。**
在您可以使用这个 makefile 之前，将命令（g++ 和 rm）前面的所有空白替换为两个制表符。
或者你会得到这样的错误。`makefile:9: *** missing separator. Stop.`

执行以下命令。

*   制作 builddll
*   制作 buildexe

现在您可以测试 example_exe.exe

仅仅因为完整性，还有一个make clean。

*   打扫干净

**更新**

如果你想使用没有头文件的 DLL，你必须知道所有的 DLL 函数。

这是加载 DLL 并调用的 loadDll.cpp `Double`。

```
/* 
 * File:   loadDll.cpp
 * Author: Administrator
 *
 * Created on 19\. Februar 2013, 22:42
 */

#include <cstdlib>
#include <windows.h>
#include <stdio.h>

using namespace std;

typedef int (WINAPI *PFNDOUBLE)(int x);
PFNDOUBLE idlldouble;
HINSTANCE dllctrl_inst;

int main(int argc, char** argv) {
    puts("---start---");
    dllctrl_inst = LoadLibrary( "example_dll.dll" );
    if( dllctrl_inst != NULL ) {
      idlldouble = (PFNDOUBLE)GetProcAddress( dllctrl_inst, "Double" );
    }
    if( idlldouble != NULL ) {printf("%d\n", idlldouble(333));}
    return 0;
} 
```

# javascript - 是否可以检测到三星股票浏览器

> ID：14948720
> 
> 赞同：12
> 
> 时间：2013-02-19T02:16:50.797
> 
> 标签：javascript, canvas, android-browser, navigator

因为三星股票浏览器的canvas bug，我的程序会报错。（[http://code.google.com/p/android/issues/detail?id=39247](http://code.google.com/p/android/issues/detail?id=39247)）

所以我想在所有三星股票浏览器上禁用画布。

我可以通过导航器对象或其他方式检测到它吗？

我发现了同样的问题，但它的解决方案看起来并不完美（[javascript - 用户代理上的正则表达式匹配设备](https://stackoverflow.com/questions/14507996/javascript-regex-matching-devices-on-user-agent)）

维基显示三星有更多型号。( [http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III](http://en.wikipedia.org/wiki/Samsung_Galaxy_S_III) )

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2016-11-18T18:52:45.243

你可以简单地做到这一点

```
var isSamsungBrowser = navigator.userAgent.match(/SamsungBrowser/i) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-03-24T10:19:26.573

以下正则表达式涵盖了几乎所有三星**移动**设备。

```
if(navigator.userAgent.match(/SAMSUNG|Samsung|SGH-[I|N|T]|GT-[I|N]|SM-[A|N|P|T|Z]|SHV-E|SCH-[I|J|R|S]|SPH-L/i)) {
    console.log("it's Samsung");
    // your code for Samsung Smartphones goes here...
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T20:24:49.393

使用 userAgent 就足以检测到这个错误。寻找字符串`534.30`。例如：

```
 if (window.navigator && window.navigator.userAgent.indexOf('534.30') > 0) {
    // Clear the canvas a different way because they are using a known-bad version of the default android browser
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-10-29T15:06:06.200

我认为可以：

```
const isSamsungBrowser = navigator.userAgent.indexOf('SamsungBrowser') > - 1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-09T09:54:37.620

一些三星用户代理中包含“三星”一词。如果您在用户代理字符串中找到“samsung”，这是一个很好的指标。然而，我看到的大多数三星用户代理都不包含三星这个词。但是有一个不同的检查，所有三星型号（到目前为止）都是格式“GT-xxxxxx”，所以我们检查用户代理是否有“android”，然后是 UA 某处的“GT-”。（或三星这个词……）这显然有点松懈，但到目前为止似乎还不错……

# ruby-on-rails - rails client_side_validations 仅在点击保存时

> ID：14948721
> 
> 赞同：0
> 
> 时间：2013-02-19T02:17:00.163
> 
> 标签：ruby-on-rails, client-side-validation

我不希望客户端验证验证模糊输入，就在我点击保存时。

这可能吗？我怎样才能做到这一点？

我只有一些简单的验证（基本上是空的）......我正在考虑手写它......值得吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:14:46.090

您可以使用纯 Javascript 或借助任何 JQuery/Prototype 和类似框架轻松完成此操作。

这是我尝试使用 JQuery 的代码

```
<html>
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <body>
        <form id="my_form" action="http://google.com?q=ruby" method="GET">
            <input type="text" name="first_name" placeholder="First Name" /> <br/>
            <input type="text" name="last_name" placeholder="Last Name" /> <br/>
            <input type="text" name="city" placeholder="City" /> <br/>
            <input id="form_button" type="button" value="Submit"/>
        </form>
    </body>
</html>
<script type="text/javascript">
    $(document).ready(function() {
        $("#form_button").on('click', function() {
            var form_valid = true;
            $("#my_form > input[type='text']").each(function() {
                if(this.value == "") {
                    var error_span_present = $(this).next("span").length != 0;
                    if(!error_span_present) {
                        $("<span style='color:red;'>" + $(this).attr("placeholder") + " cannot be Blank </span>").insertAfter($(this));
                    } 
                    else { 
                        $(this).next("span").html($(this).attr("placeholder") + " cannot be Blank");
                    } 
                    form_valid = false;
                }   
                else {
                    if($(this).next("span").length != 0) {
                        $(this).next("span").remove();
                    } 
                }
            });
            if(form_valid){ 
                $("#my_form").submit();
            }
        });
    });
</script> 
```

这是演示此代码的[JSFiddle 。](http://jsfiddle.net/NbD5q/)

希望这可以帮助

# java - 尝试制作控制台应用猜谜游戏？我的逻辑正确吗？

> ID：14948730
> 
> 赞同：1
> 
> 时间：2013-02-19T02:17:50.767
> 
> 标签：java

我的“如果”语句没有给我写答案，例如，如果我输入“5”，它打印得太高，这意味着随机数较低，但如果我输入一个较低的数字，如“4”，它打印得太低，这将意味着随机数更高。它非常令人困惑，我只是想知道我在代码中的逻辑是否正确？

导入 java.util.Scanner；导入java.lang.Math；

公共类 GuessTest {

```
public static void main(String[] args) 
{
   System.out.println("Welcome to the gussing game, Try to guess the number am thinking of to win!");
   System.out.println("++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
   System.out.println();

    System.out.println("Am thinking of a number between 0 and 10\. Try to guess it.");
    System.out.println();

   Scanner sc = new Scanner(System.in);
   String choice =  "y";

   while (!choice.equalsIgnoreCase("n"))
   {

     System.out.println("Enter the Number:");
       int guess = sc.nextInt();
       double rightNum = Math.random() *10;
       int randomNum = (int) rightNum;

       if (guess == randomNum)
       {
           System.out.println("Correct you've got it! The Number Was " + randomNum );
           System.out.println();
           System.out.println("Would you like to play again (y/n):");
           choice = sc.next();
       }
     else  if (guess < randomNum)
       {
           System.out.println("your too low!");
       }
     else if (guess > randomNum)
       {
            System.out.println("Your too high!");
       }   

}

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:19:39.907

您正在计算每次`while-loop`迭代的随机数。只需将计算代码移出循环即可计算一次：

```
double rightNum = Math.random() *10;
int randomNum = (int) rightNum;
while (!choice.equalsIgnoreCase("n")) {
    //your logic...
} 
```

* * *

由于要进行多轮游戏，因此可以在接受新游戏时重新计算随机数：

```
double rightNum = Math.random() *10;
int randomNum = (int) rightNum;
while (!choice.equalsIgnoreCase("n")) {
    //your logic...
    if (guess == randomNum) {
        System.out.println("Correct you've got it! The Number Was " + randomNum );
        System.out.println();
        System.out.println("Would you like to play again (y/n):");
        choice = sc.nextLine();
        if (choice.equalsIgnoreCase("y")) {
            rightNum = Math.random() *10;
            randomNum = (int) rightNum;
        }
    }
    //your logic...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:31:16.657

好吧，您的逻辑是合理的……但是代码存在相当大的缺陷。您希望程序生成一个随机数，然后让玩家根据它们是过高还是过低来猜测它，但是您让计算机每次选择一个不同的随机数。

尝试放置

```
double rightNum = Math.random() *10;
int randomNum = (int) rightNum; 
```

就在while循环之外。这可能会解决您的问题（但当然它会创造更多关于继续选择的信息）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T02:50:04.540

不要从已经建议的内容中删除任何内容，这是可以完成的简单“另一种”方式......

```
public class GuessWhat {

    public static void main(String[] args) {
        System.out.println("Welcome to the gussing game, Try to guess the number am thinking of to win!");
        System.out.println("++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++");
        System.out.println();

        System.out.println("Am thinking of a number between 0 and 10\. Try to guess it.");
        System.out.println();

        Scanner sc = new Scanner(System.in);
        String choice = "y";

        int randomNum = -1;
        while (!choice.equalsIgnoreCase("n")) {

            if (randomNum < 0) {
                randomNum = (int) (Math.random() * 10);
            }

            System.out.println("Enter the Number:");
            int guess = sc.nextInt();

            if (guess == randomNum) {
                System.out.println("Correct you've got it! The Number Was " + randomNum);
                System.out.println();
                System.out.println("Would you like to play again (y/n):");
                choice = sc.next();
                randomNum = -1;
            } else if (guess < randomNum) {
                System.out.println("your too low!");
            } else if (guess > randomNum) {
                System.out.println("Your too high!");
            }

        }

    }
} 
```

基本上，如果 低于 0，我只是重新计算随机值`randomNum`。当用户猜对时，我只需将 重置`randomNum`为`-1`

# java - 在 Java 中使用 HTTP post 来模拟 Web 浏览器

> ID：14948732
> 
> 赞同：2
> 
> 时间：2013-02-19T02:18:01.237
> 
> 标签：java, php, http

好的，这是简单的设置...

> **索引.html**

```
<html>   
<p> Login to Blob </p>
<form action='welcome.php' method='post'>
      <div>
      <p> Username: </p>
     <input type='text' name='usernamebox' id='inputtext'/>        
     </div>
     <div>
     <p> Password: </p>
     <input type="text" name="passwordbox" id='inputpass'/>
     </div>
     <div>
     <input type='submit' value='submit' id='button'/>
     </div>         
</form>

</html> 
```

* * *

> **欢迎.php**

```
<?php

    if($_POST['usernamebox'] == 'BLOB' && $_POST['passwordbox'] == 'password')
    {
        echo "welcome to BLOB!";
    }

    else
    {
        header ('Location:index.html');
    }

?> 
```

设置（在 localhost 中）运行良好，我看到“欢迎来到 BLOB！” 仅当我将用户名字段设置为“BLOB”并将密码字段设置为“密码”时才会显示消息。

* * *

> **问题 ：**

我需要使用java（最好`HttpURLConnection`）以编程方式发布数据并从服务器获取响应消息..这将只是“我们来到BLOB！”..

我已经尝试过这段代码，但它给了我返回的 html但不是来自...`index.html`的响应`welcome.php`

```
import java.net.*;
import java.io.*; 

public class DateServer
{
    private static final String TARGET_URL = "http://localhost/myfiles/index.html";

    public static void main(String[] args)
    {
        String response = readResponse(doHttpPost(TARGET_URL, "usernamebox=BLOB&passwordbox=password"));

        System.out.println("Response : \n" + response);
    }

    public static HttpURLConnection doHttpPost(String targetUrl, String urlEncodedContent)
    {
        try
        {
            HttpURLConnection urlConnection = (HttpURLConnection)(new URL(targetUrl).openConnection());
            urlConnection.setDoInput(true);
            urlConnection.setDoOutput(true);

            urlConnection.setRequestProperty("Content-Type", "application/x-www-form-urlencoded");
            urlConnection.setRequestProperty("User-Agent", "Mozilla/5.0 (Windows; U; Windows NT 6.1; en-GB; rv:1.9.2.8) Gecko/20100722 Firefox/3.6.8");

            HttpURLConnection.setFollowRedirects(true);
            urlConnection.setRequestMethod("POST");

            DataOutputStream dataOutputStream = new DataOutputStream(urlConnection.getOutputStream());

            // throws IOException
            dataOutputStream.writeBytes(urlEncodedContent);
            dataOutputStream.flush();
            dataOutputStream.close();

            return urlConnection;           

        }

        catch (IOException e)
        {
            e.printStackTrace();
        }

        return null; 
    }

    private static String readResponse(HttpURLConnection urlConnection)
    {
        BufferedReader bufferedReader = null;
        try
        {

            bufferedReader = new BufferedReader(new InputStreamReader(urlConnection.getInputStream()));
            String responeLine;

            StringBuilder response = new StringBuilder();

            while ((responeLine = bufferedReader.readLine()) != null)
            {
                response.append(responeLine);
            }

            return response.toString();
        }
        catch (IOException e)
        {
            e.printStackTrace();
        }
        finally  // closing stream
        {
            if (bufferedReader != null)
            {   try
                {                   
                    bufferedReader.close();                   
                }
                catch (IOException e)   
                {
                    e.printStackTrace();
                }
            }
        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:39:04.137

你调用了错误的资源！在java中，请求必须到php脚本，而不是html

改变

```
private static final String TARGET_URL = "http://localhost/myfiles/index.html"; 
```

进入

```
private static final String TARGET_URL = "http://localhost/myfiles/welcome.php"; 
```

因为这是 index.php 中发生的事情

表单将表单数据传递给welcome.php

```
<form action='welcome.php' method='post'> 
```

# authentication - Yii 添加管理员

> ID：14948734
> 
> 赞同：0
> 
> 时间：2013-02-19T02:18:06.803
> 
> 标签：authentication, yii, admin

我一直按照这里的说明 ( [http://www.yiiframework.com/doc/guide/1.1/en/topics.auth](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth) ) 添加基于 DB 的授权和使用 Yii 的用户。我可以使用用户表中定义的用户登录，但我无法以管理员身份登录。我可以在我的 authassignment 表中看到 1 行，其中 itemname 为“admin”，其密钥为用户 id 1 - 这是我用来登录的用户。

我的 authManager 看起来像这样：

```
'authManager'=>array(
    'class'=>'CDbAuthManager',
    'connectionID'=>'db',
    'defaultRoles'=>array('authenticated', 'admin'),
), 
```

我使用的特定控制器的访问规则是：

```
 public function accessRules() {
        return array(
            array('allow', // allow all users to perform 'index' and 'view' actions
                'actions' => array('index', 'view'),
                'users' => array('*'),
            ),
            array('allow', // allow admin user to perform 'admin' and 'delete' actions
                'actions' => array('admin', 'delete','create', 'update'),
                'users' => array('admin'),
            ),
            array('deny', // deny all users
                'users' => array('*'),
            ),
        );
    } 
```

尝试使用“管理员”操作会导致 403 错误。我似乎无法解决这个问题。有什么建议么？

**编辑：** 所以知道 admin authitem 的 bizrule 是`return Yii::app()->user->name === "admin";`，我将用户的用户名更改为 'admin' 并且它当然有效。我需要更改 bizrule 以让 authassignment 表中的管理员以管理员身份登录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T10:45:30.073

您可以`roles`在 accessRules 中指定，参见[http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#access-control-filter](http://www.yiiframework.com/doc/guide/1.1/en/topics.auth#access-control-filter)和[http://www.yiiframework.com/doc/api/ 1.1/CAccessRule#roles-detail](http://www.yiiframework.com/doc/api/1.1/CAccessRule#roles-detail)

```
class PostController extends CController
{
    ......
    public function accessRules()
    {
        return array(
            array('allow',
                'actions'=>array('admin'),
                'roles'=>array('admin'),
            ),
        );
    }
} 
```

# regex - Excel、Vba、Asterisk、语法、文本文件

> ID：14948738
> 
> 赞同：0
> 
> 时间：2013-02-19T02:18:12.167
> 
> 标签：regex, excel, vba, replace

我正在使用 excel 打开一个文本文件，找到某个字符串并将其替换为空/删除它。显然，我很难弄清楚星号/通配符的正确语法，希望这对某人来说是一个简单的答案！

这是我的代码的一个简短示例，以防它有一些隐藏的影响。

```
Sub ReplaceText()
Dim DataFind As String

Open "ORIGINAL\073347.TXT" For Binary As #1
DataFind = Space$(LOF(1))
Get #1, , DataFind
Close #1

                     '<< 073347 >>
DataFind = Replace(DataFind, "<< * >>", "")

Open "NEW\073347.TXT" For Output Access Write As #1
Print #1, DataFind
Close #1

End Sub 
```

基本上我想在文本文件中找到一种特定类型的字符串（语法方面），在这种情况下它将是“<< 073347 >>”但我似乎找不到正确的语法来使用 < < >> 在任何一方，或者一旦我知道我做错了什么，可能会发生其他事情。“<< 073347 >>”工作正常。我尝试过“&”符号、添加空格等，可能只是在正确的上下文中。希望这是足够的信息。并提前感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:25:50.143

您不能使用 Excel 替换功能进行通配符替换。[使用使用正则表达式/vbscript](https://superuser.com/questions/181005/can-you-do-regular-expressions-in-excel-without-vbscript)你很可能会有更好的运气

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:38:37.760

您可以使用 Mid 函数和循环来处理此问题：

```
 Sub ReplaceText()
    Dim DataFind As String
    Open "1.TXT" For Binary As #1
    DataFind = Space$(LOF(1))
    Get #1, , DataFind
    Close #1

                         '<< 073347 >>
    While InStr(DataFind, "<<") > 0 And InStr(DataFind, "<<") < InStr(DataFind, ">>")
        DataFind = Mid(DataFind, 1, InStr(DataFind, "<<") - 1) & Mid(DataFind, InStr(DataFind, ">>") + 2, Len(DataFind))
    Wend
    Open "1.TXT" For Output Access Write As #1
    Print #1, DataFind
    Close #1
    End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T02:41:37.543

Replace 函数仅搜索完全匹配。为了根据模式替换字符串，您应该使用正则表达式。

一个好的开始是教程[http://www.macrostash.com/2011/10/08/simple-regular-expression-tutorial-for-excel-vba/](http://www.macrostash.com/2011/10/08/simple-regular-expression-tutorial-for-excel-vba/)。匹配后，使用 Mid() 替换内容。

不要忘记首先通过 Tools --> References 添加“Microsoft VBScript 正则表达式”引用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T03:02:10.040

像这样使用正则[表达式](/questions/tagged/regexp "显示标记为“正则表达式”的问题")

```
Sub ManipulateStrings()
    Dim strIn As String
    Dim objRegex As Object
    'first and last sub-portions are matches, middle missing leading/trailing spaces   
    strIn = "<< 073347 >> ff <<fred>>, << fred >>"
    Set objRegex = CreateObject("vbscript.regexp")
    With objRegex
        .Global = True
        .Pattern = "<< .+? >>"
        If .test(strIn) Then
            MsgBox .Replace(strIn, vbNullString)
        Else
            MsgBox "No matches"
        End If
    End With
End Sub 
```

# ios - 为什么这个方法签名有效？

> ID：14948742
> 
> 赞同：2
> 
> 时间：2013-02-19T02:18:42.090
> 
> 标签：ios, methods, method-signature

我刚刚遇到了一些具有如下方法的代码：

```
- (void) AddImage:(NSString *)imageURL: (UIImage *)image{
    [imgCache setObject:image forKey:imageURL];
} 
```

通常我会看到这样的方法：

```
-(typeReturned)methodParameter1:(Param1Type)name1 Parameter2:(Param2Type)name2{
    //do something
} 
```

但是这个方法好像省略了Parameter2。为什么这行得通？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:29:49.883

这至少不常见并且会引发警告。“imageURL”不是“Parameter2”而是“name1”。所以“Parameter2”是空的。你会这样称呼它：

```
[self AddImage:@"eins" :[UIImage imageNamed:@"1.png"]]; 
```

我会避免它:)。

# windows - 迷宫游戏中的变量未声明错误

> ID：14948759
> 
> 赞同：-1
> 
> 时间：2013-02-19T02:20:48.623
> 
> 标签：windows, vb.net, soundplayer

我通过研究发现的教程开发的迷宫游戏做得很好。一步一步地，我一直在使用 Visual Studio 2012 中的 VB 为 Windows 调试此应用程序。教程告诉我使用以下代码：

```
Private Sub MoveToStart()
    startSoundPlayer.Play()
    Dim startingPoint = Panel1.Location
    startingPoint.Offset(10, 10)
    Cursor.Position = PointToScreen(startingPoint)
End Sub 
```

在线`startSound.Play()`Visual Basic 给我一条错误消息说：**Error Correction Options**。所以我点击它，它告诉我：

> 未声明“startSoundPlayer”。由于其安全级别，它可能无法访问。

我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:56:57.147

宣布：

```
Private startSoundPlayer = New System.Media.SoundPlayer("C:\Windows\Media\chord.wav") 
```

正如教程所说。在同一个类中的`MoveToStart`方法。如果仍然失败，则声明`startSoundPlayer`为`Public`而不是`Private`.

# caldav - CalDav 请求示例

> ID：14948763
> 
> 赞同：1
> 
> 时间：2013-02-19T02:21:17.397
> 
> 标签：caldav

我正在构建一个 CalDAV 服务器（在 Java 中，使用第三方库），请帮助我：

如果请求是：返回日历中开始日期在 [date1, date2] 之间的所有事件，那么它是什么类型的请求？以及请求的参数？

我打算放一个servlet供客户查询。我想知道是否必须为每种类型的请求制作一个 servlet：`GET,HEAD,OPTIONS,PUT (target exists),PUT (no target exists),PROPPATCH,PROPFIND,DELETE,LOCK (target exists),LOCK (no target exists), MKCOL, MKCALENDAR,UNLOCK,REPORT,FREEBUSY`

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T09:45:06.170

第一个问题：您想使用基于时间范围的日历查询。见[https://www.rfc-editor.org/rfc/rfc4791#section-7.8.1](https://www.rfc-editor.org/rfc/rfc4791#section-7.8.1)

第二个问题：您只需要一个 servlet。通常，您重写其默认的 service() 方法以分派到单独的处理程序，每个方法（REPORT、PUT、...）一个处理程序。

# c++ - 多线程 cpp CRT 时如何同步 recv()

> ID：14948764
> 
> 赞同：0
> 
> 时间：2013-02-19T02:21:20.167
> 
> 标签：c++, multithreading, synchronization, recv

我有一个服务器与多个客户端交互，其中客户端向服务器发送消息，服务器通过 recv() 方法读取它们。我遇到的问题是，我使用 waitforsingleobject(handler, 10000 毫秒) 来让服务器等待几秒钟与一个客户端交互，然后让其他人访问它，但随后我开始从服务器看到错误的答案向客户端发送消息并被阻止。所以看起来像一个同步问题。

所以我的问题是（因为我是 C++ 的初学者）我如何确保接收到每条传入消息并回复到正确的客户端，从而允许所有客户端与服务器交互。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T08:22:41.817

有两种选择。

首先是一个非常标准的模型——每个客户端一个线程。当客户端连接时，您启动一​​个线程来处理它。

第二种方法不需要很多线程。您应该在重叠的套接字上使用 WSARecv() 而不是 recv()。这样，您可以同时打开多个接收操作，每个客户端一个，并在 WaitForMultipleObjects() 中等待它们。具体来说，您将等待 WSAOVERLAPPED 中的事件。请记住，WaitForMultipleObjects() 对等待对象的数量有限制。超过时，您将需要运行另一个线程。WaitForMultipleObjects() 的返回码会告诉你哪个客户端发送了数据，所以你可以回复它。

或者，如上所述，您可以使用 select() 来确定哪个套接字有数据。

# string - Haskell 无法将预期类型“字符串”与实际类型“字符”匹配

> ID：14948765
> 
> 赞同：4
> 
> 时间：2013-02-19T02:21:31.397
> 
> 标签：string, haskell, char

我想知道为什么我会收到这个错误。这是一个分配，我要将整数从整数转换为十六进制值。当我将整数值修改为 时，我调用此辅助转换函数`16`。`16`（与我在递归调用中除以的整数值连接）

**这是我的代码：**

```
 changeToHex :: Integer -> String
    --main function

    toHex :: Integer -> String
    toHex x
        |x == 0         = '0'
        |x == 1         = '1'
        |x == 2         = '2'
        |x == 3         = '3'
        |x == 4         = '4'
        |x == 5         = '5'
        |x == 6         = '6'
        |x == 7         = '7'
        |x == 8         = '8'
        |x == 9         = '9'
        |x == 10        = 'A'
        |x == 11        = 'B'
        |x == 12        = 'C'
        |x == 13        = 'D'
        |x == 14        = 'E'
        |x == 15        = 'F' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T02:23:38.817

使用单引号 ( `'F'`) 为您提供`Char`文字。对于`String`实际上是`Char`值列表的文字，您应该使用双引号 ( `"F"`)。

由于`String`是 的别名`[Char]`，因此如果您想从 a 转换`Char`为 a `String`，您只需将其包装`Char`在一个单元素列表中即可。这样做的函数可能如下所示：

```
stringFromChar :: Char -> String
stringFromChar x = [x] 
```

这通常是内联写的，如`(:[])`，等价于`\x -> (x : [])`or `\x -> [x]`。

顺便说一句，您可以大大简化代码，例如使用`Enum`typeclass：

```
toHexDigit :: Int -> Char
toHexDigit x
  | x < 0 = error "toHex: negative digit value"
  | x < 10 = toEnum $ fromEnum '0' + x
  | x < 15 = toEnum $ fromEnum 'A' + x - 10
  | otherwise = error "toHex: digit value too large" 
```

更一般地说，任何时候你都有这样的功能：

```
f x
  | x == A = ...
  | x == B = ...
  | x == C = ...
  ... 
```

您可以使用以下命令将其转换为更少重复、更有效的等价物`case`：

```
f x = case x of
  A -> ...
  B -> ...
  C -> ...
  ... 
```

# algorithm - 最小化有向图中的边集，保持连通分量

> ID：14948770
> 
> 赞同：3
> 
> 时间：2013-02-19T02:22:40.350
> 
> 标签：algorithm, graph-theory, directed-acyclic-graphs, edges, clrs

这是完整的问题：

假设我们有一个有向图 G = (V,E)，我们想找到一个图 G' = (V,E')，它具有以下属性：

1.  G' 具有与 G 相同的连通分量
2.  G' 与 G 具有相同的分量图
3.  E' 被最小化。也就是说，E' 尽可能小。

这是我得到的：

首先，运行强连通分量算法。现在我们有了强连接的组件。现在转到每个强连接组件，并在该 SCC 内做一个简单的循环；也就是说，唯一重复的节点是开始/结束节点的循环。这将最小化每个 SCC*内的边缘。*

现在，我们需要最小化SCC*之间的边缘。*唉，我想不出这样做的方法。

我的两个问题是：（1）关于最小化SCC*之间*边缘的部分**之前的算法听起来正确吗？**(2) 如何最小化 SCC 之间的边缘。

 *对于 (2)，我知道这相当于最小化 DAG 中的边数。（将 SCC 视为顶点）。但这似乎对我没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T08:25:39.043

1.  该算法似乎是正确的，只要您允许封闭游走（即重复顶点）。可能不存在适当的循环（例如在“8”形组件中）并且找到它们是NP-hard。

2.  似乎通过它们连接的有序组件对对组件间边进行分组并在每组中只留下一条边就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-02T00:01:26.870

关于步骤 2，最小化 SCC 之间的边，您可以随机选择一个顶点，并运行 DFS，只保留每对 (root, end) 的最长路径，同时删除其他路径。将搜索到的所有顶点存储在列表 L 中。

选择另一个顶点，如果存在于L中，则跳到下一个顶点；如果没有，请重复上述过程。*

# jvectormap - 自定义地图，没有latLng，如何添加标记？

> ID：14948772
> 
> 赞同：2
> 
> 时间：2013-02-19T02:22:51.473
> 
> 标签：jvectormap

$(function(){ var 映射，markerIndex = 0，markersCoords = {};

```
 map = new jvm.WorldMap({
          map: 'jilin',
          markerStyle: {
            initial: {
              fill: 'red'
            }
          },
          container: $('#world-map-gdp')
      });

      map.container.click(function(e){
          var latLng = map.pointToLatLng(e.offsetX, e.offsetY);
        alert(latLng);

      });
      $('.jvectormap-zoomin').click(); //放大  
    }); 
```

我用 svg 制作了一张中国吉林省地图。我想在地图中添加几个标记但是我无法获取 latLng ，而且我不知道为什么？帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:30:45.680

这是官方网站上关于处理从 SVG 转换的地图的标记的[示例。](http://jvectormap.com/examples/mall/)

# c# - 重载减法运算符以删除对象

> ID：14948778
> 
> 赞同：1
> 
> 时间：2013-02-19T02:23:39.390
> 
> 标签：c#, overloading, operator-keyword

```
case Choices.ADD_PERSON:
                    Console.WriteLine("enter info for person to add.");
                    InfoForPerson();
                    PersonList Z = x + p;
                    break;

case Choices.REMOVE_PERSON:
                    Console.WriteLine("enter info for person to remove: ");
                    InfoForPerson();
                    Z = x - p;
                    break; 
```

以上是从菜单中选择选项时发生的两件事。因为`Choices.ADD_PERSON`结果符合预期，又加了一个人。但是，我假设 + & - 会以完全相同的方式起作用，只是相反，但它并没有发生。

```
public static PersonList operator -(PersonList x, Person y)
    {
        PersonList temp = x;
        if (temp._Plist.Contains(y))
        {
            temp._Plist.Remove(y);
        }
        return temp; } 
```

以上是我对减法运算符的定义。下面是我用来允许用户选择要添加/减去的人的代码。

```
public static void InfoForPerson()
    {
        Console.Write("Enter your name: ");
        string name = Console.ReadLine();
        string phone = ValidPhone();
        string email = ValidEmail();
        p = new Person(name, phone, email); 
```

它适用于加法，而不是减法。我看了 p 并且它保存的数据很好，但它与列表中已经存在的项目不匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:34:54.670

正如@sapi 和@TheEvilPenguin 已经指出的那样，这种类型的运算符重载是不受欢迎的，原因有很多。然而，这并不能回答你的问题。

如果没有关于您`p`在`Z = x - p`声明中的来源的更多信息，我会怀疑您的问题是该`p`元素不存在于列表中。

请记住，`Contains`并且`Remove`仅对列表中对象的特定实例有效。

```
List<Tuple<int, int>> collection = new List<Tuple<int, int>>();
collection.Add(new Tuple<int, int>(1, 1));
if (collection.Contains(new Tuple<int, int>(1, 1))
{
    Console.WriteLine("This will NEVER happen.");
}
collection.Remove(new Tuple<int, int>(1, 1);
Console.WriteLine("{0}", collection.Count); // => 1 
```

如果您想测试是否存在*与测试值具有相同属性的类型的任何实例，*则不`Contains`会这样做。

另外一点，`-`操作员*不应该*（有人会说***必须***不）修改左边的操作数。您应该返回一个包含过滤项目的新列表，因为这是`A - B`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:33:31.860

无论您使用哪种类型的列表（或集合），都`_Plist`需要支持匹配`Person`为“值”（如果引用则默认）。您可以将自定义比较器传递给包含函数或实现`Equals`并`GetHashCode`继续`Person`比较所有属性。

注意：正如大家所说，在非数学相关的课程中使用 +/- 会导致代码不直观。即你已经有奇怪的行为 - 如果元素不存在，`-`将什么也不做。数字永远不会发生这种情况：`whatever -2`从不等于`whatever`。

# ios - 我设置了segue，但说没有带有标识符的segue

> ID：14948781
> 
> 赞同：1
> 
> 时间：2013-02-19T02:24:19.877
> 
> 标签：ios, segue

我做了一个演示来记录微博。在我得到令牌跳转到其他页面后。

```
- (void)sinaweiboDidLogIn:(SinaWeibo *)sinaweibo
{
    [self saveWeiboInfo];

    NSLog(@"uid= %@ accessToken= %@", sinaweibo.userID, sinaweibo.accessToken);

    [self performSegueWithIdentifier:@"login" sender:self];

} 
```

然后获取令牌后转错误：

```
2013-02-18 17:31:50.683 WeiboTimeline[5690:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Receiver (<WeiboLoginViewController: 0x712a850>) has no segue with identifier 'login'' 
```

标识符设置正确。

但在 viewdidLoad 中，它可以向右跳转。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSDictionary *dic = [[NSUserDefaults standardUserDefaults] dictionaryForKey:@"weiboUserData"];
    NSString *token = [dic valueForKey:@"access_token"];
    NSLog(@"token= %@", token);
    if (token != nil) {
        [self performSegueWithIdentifier:@"login" sender:self];
    }
} 
```

代码运行后，token 保存时，下次打开应用程序时可以正确跳转。

为什么？它们是相同的代码，谢谢你教。

# haskell - 哈斯克尔 getArgs

> ID：14948787
> 
> 赞同：3
> 
> 时间：2013-02-19T02:24:52.987
> 
> 标签：haskell

getArgs 是如何工作的，我试图从终端读取文本文件，然后将内容发送到我定义的函数之一。有人可以发布一个示例代码，让我了解它是如何工作的。谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T02:35:26.580

`getArgs`是一个`IO`动作，它产生一个列表`String`

```
fmap someFunction $ readFile =<< fmap head getArgs 
```

或应用风格：

```
someFunction <$> readFile =<< head <$> getArgs 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T20:11:08.493

`getArgs`为您提供命令行参数列表（*不*包括 C 程序员调用`argv[0]`的内容、正在运行的二进制文件的名称）。因此，例如，如果您将应用程序编译为`foo`然后`foo a b c`在命令行上执行，那么`getArgs`将返回`["a", "b", "c"]`.

根据您的问题，我不确定您是否希望在命令行上有一个*文件名*，或者您是否希望在标准输入中输入数据*。*

如果您要查找文件名，只需将结果从中获取`getArgs`并将其传递给`openFile`（或者可能`readFile`，取决于您所追求的内容）。

如果您尝试做管道，您可能会查看`interact`，这可能会做您想要的。

# c - 理解c中的字符串数组

> ID：14948789
> 
> 赞同：0
> 
> 时间：2013-02-19T02:25:13.970
> 
> 标签：c, arrays, string

我试图理解这行特定的代码。

我无法理解为什么需要 3 个赋值语句。我认为这是最低限度的必要条件，我似乎无法用我的思想去遵循它。

如果有人能用英语带我了解每一行的作用，那就太好了。

谢谢。

```
void to_upper(char *word) {

  int index = 0;

  while (word[index] != '\0') {
    word[index] = toupper(word[index]);
    index++;
  }
}

int length(char *word) {

  int index=0;

  while (word[index] != '\0')
    index++;
  return index;
}

void reverse(char *word) {
  int index, len;
  char temp;
  len = length(word);
  for (index=0; index<len/2; index++) {
    temp = word[index];
    word[index] = word[len-1-index];
    word[len-1-index] = temp;
  }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:31:30.323

```
 for (index=0; index<len/2; index++) {
1    temp = word[index];
2    word[index] = word[len-1-index];
3    word[len-1-index] = temp;
  } 
```

1：存储的值`word[index]`（我们稍后会需要它）

2：将与数组中点等距的单词数组的值存入`word[index]`

3：将原始值存储`word[index]`到与数组中点等距的位置

eg: if `index = 0`, 第一个词与最后一个词交换，依此类推。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:35:10.750

我假设你理解你的代码的`length`和`to_upper`部分，因为它们基本上是 c++ 101 的东西。

```
//Well, just be the title, I would assume this function reverses a string, lets continue.
void reverse(char *word) {
  int index, len;  //declares 2 integer variables
  char temp;       //creates a temporary char variable
  len = length(word); //set the length variable to the length of the word
  for (index=0; index<len/2; index++) {
    //Loop through the function, starting at 
    //index 0, going half way through the length of the word
    temp = word[index]; //save the character at the index
    word[index] = word[len-1-index]; //set the character at the index in the array 
                                     //to the reciprocal character.
    word[len-1-index] = temp; //Now set the reciprocal character to the saved one.
  }
}

//This essentially moves the first letter to the end, the 2nd letter to the 2nd 
//to end, etc. 
```

因此，如果你有“race”这个词，它会将“r”与“e”交换，然后将“a”与“c”交换，以获得最终的“ecar”字符串，或者倒退。

要了解他们为什么需要 3 个作业：如果您`word[index] = word[len-1-index]`在两个地方都设置 then，则存在相同的字符。这就像将“race”设置为“racr”。如果您随后设置`word[len-1-index] = word[index]`，您只需将相同的字符放回第一部分，因此您将从“racr”变为“racr”。您需要一个临时变量来保存原始值，以便您可以替换字符串前面的字符。

# objective-c - iOS 应用程序中的 Twitter 提要 - 我如何仅从我自己的帐户获取列表提要 [无需应用用户登录 Twitter]

> ID：14948791
> 
> 赞同：6
> 
> 时间：2013-02-19T02:25:26.460
> 
> 标签：objective-c, twitter, ios6, twitter-oauth

我正在制作一个需要在我设置的列表提要中显示推文的 iOS 应用程序。问题是[我根本不想使用最终用户的 Twitter 帐户]，我只想通过 Twitter API 拉取数据来在应用程序中显示一个列表提要。

对我来说不幸的是，1.1 版之后的 Twitter API 需要身份验证才能对其进行任何操作。

[https://dev.twitter.com/docs/api/1.1/get/lists/statuses#example-request](https://dev.twitter.com/docs/api/1.1/get/lists/statuses#example-request)

我见过的所有案例都是在 iOS 中使用最终用户的登录名来提取提要，这很有效，但这是我的问题：

我是否可以验证列表提要的这些请求，而使用该应用程序的最终用户无需在 iOS 上登录到他们自己的 Twitter 帐户。即请求通过一个特定的 Twitter 帐户 [我的] 进行身份验证？

或者如果有一种方法可以在不使用 twitter API 的情况下获取原始提要数据 [我需要将原始数据放入我的应用程序中的 UITableView - 我不想使用 UIWebView]。

这将使没有 twitter 帐户的最终用户可以访问提要[列表提要无论如何都是公开的，所以我不知道为什么它首先需要身份验证]。

非常感谢！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-25T15:47:12.190

### 更新：他们似乎是这种方法中的请求限制问题，请使用以下答案[https://stackoverflow.com/a/15419005/1228669](https://stackoverflow.com/a/15419005/1228669)

它使用[STTwitter](https://github.com/nst/STTwitter)，

它包含一个检查请求限制的方法

```
- (void)getRateLimitsForResources:(NSArray *)resources // eg. statuses,friends,trends,help
                 successBlock:(void(^)(NSDictionary *rateLimits))successBlock
                   errorBlock:(void(^)(NSError *error))errorBlock { 
```

使用此方法检查当前 api 限制，因为现在 api 限制为 15 分钟间隔，更多详细信息请访问[Twitter 1.1 API 限制](https://dev.twitter.com/docs/rate-limiting/1.1/limits)

==================================

如果您还没有找到解决方案，您可以尝试这种方法

1.  在 Twitter 上注册您的应用程序[https://dev.twitter.com/apps](https://dev.twitter.com/apps)

2.  在应用信息页面底部“单击创建我的访问令牌”按钮，它将创建访问令牌和秘密

3.  下载 FHSTwitterEngine [https://github.com/fhsjaagshs/FHSTwitterEngine](https://github.com/fhsjaagshs/FHSTwitterEngine)

使用以下代码将访问令牌设置为 twitter 引擎：

```
self.engine = [[FHSTwitterEngine alloc]initWithConsumerKey:@"yourAppConsKey" andSecret:@"yourAppsecret"];
OAToken *token = [[OAToken alloc] init];

token.key = @"setaccessToken";
token.secret = @"setAccessTokenSecret";
[self.engine setAccessToken:token]; 
```

你可以试试这个方法来获取推文

```
[self.engine getTimelineForUser:username isID:NO count:1]; 
```

还要确保在您的项目中添加 SystemConfiguration.framework

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-10T07:33:39.700

使用 STTwitter 库，您无需登录即可获取 twitter 提要，有一些方法可以使用 screenName 获取所有时间线或特定列表，首先您设置密钥使用者和秘密：

```
self.twitter = [STTwitterAPI twitterAPIAppOnlyWithConsumerKey:kTwitterConsumerKey
                                               consumerSecret:kTwitterSecretKey]; 
```

然后使用屏幕名称从列表中获取时间线：

```
[_twitter verifyCredentialsWithSuccessBlock:^(NSString *bearerToken) {
    // NSLog(@"Access granted with %@", bearerToken);

    // load user tweets according to list
    [_twitter getListsStatusesForSlug:kSlug screenName:kScreenName ownerID:nil sinceID:nil maxID:nil count:nil includeEntities:0 includeRetweets:0 successBlock:^(NSArray *statuses) {
        //your code for getting feeds from array statuses
    } errorBlock:^(NSError *error) {
        NSLog(@"-- error: %@", error);
    }];

} errorBlock:^(NSError *error) {
    NSLog(@"-- error %@", error);
}]; 
```

这对我有用，如果您想获取关注者列表，请使用 FHSTwitter 引擎和检查状态的方法是：

```
[[FHSTwitterEngine sharedEngine] lookupFriendshipStatusForUsers:users areIDs:NO]; 
```

# azure - IIS 上托管的 Web 应用程序是否仍可使用 Azure App Fabric

> ID：14948792
> 
> 赞同：0
> 
> 时间：2013-02-19T02:25:38.303
> 
> 标签：azure

我将 Web 应用程序托管到 IIS 中？我是否仍可以将 Azure App Fabric 缓存服务用于会话？我看到的所有示例都说首先我必须创建一个 Web 角色，然后为会话管理配置应用结构缓存服务。有没有办法可以为常规 Web 应用程序配置应用程序结构缓存服务？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:44:19.777

是的，您可以使用 app fabric 来监控 wcf 和 wf 工作流并进行缓存：

这里有一些有用的链接：

[http://social.msdn.microsoft.com/Forums/en/velocity/threads](http://social.msdn.microsoft.com/Forums/en/velocity/threads)

[http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx](http://www.hanselman.com/blog/InstallingConfiguringAndUsingWindowsServerAppFabricAndTheVelocityMemoryCacheIn10Minutes.aspx)

[http://msdn.microsoft.com/en-us/library/ff383731(v=azure.10).aspx](http://msdn.microsoft.com/en-us/library/ff383731(v=azure.10).aspx)

# php - 如何在表单中使用 HTML 代码填充 TextArea

> ID：14948793
> 
> 赞同：0
> 
> 时间：2013-02-19T02:25:40.800
> 
> 标签：php, html, forms, post, get

所以我昨晚建立了一个网站，现在我想添加能够从网络编辑文件的功能。要进行我创建的概念验证：

1.  在 DIR (Working) 中包含文件名的列表框

2.  调用所选文件的提交按钮（工作）

3.  显示代码的文本区域（有点工作）

4.  保存按钮（尚未连接）

我不知道如何用包含`<form>`标签的 HTML 文件填充文本区域。一旦我这样做，它就会破坏页面上的实际表单并弄乱所有用户界面。这只是一个原型，但我只能想象真实的网站会有类似的问题。

这是用于测试目的的相关代码。

```
<html>
<body>
  <form action="getdir.php" method="GET">
   <table>
    <td valign="top">
     <select name="file">
     <option value=""></option>
     <?php
       $size = 0;    
        foreach(glob("*.html") as $filename)
        {
          $size++;
        }
       $count = 0;
       $files[size];

        foreach(glob("*.html") as $filename)
        {
         $files[$count] = $filename;
         print('<option value=');
         print($filename);
         print('>');
         print($filename);
         print('</option>');
         $count++;
        }
     ?>
     </select>
    <input type="submit" value="Get Code"/></td><td>
</form>

<form action="getdir.php" method="POST">
<?php     
 $f = $_GET['file'];
 if($f!=null){
    $openedFile = fopen($f,'r');
    $read = fread($openedFile,filesize($f));
    print('<textarea name="tb1" rows="100" cols="100">');
    print(addslashes($read));
    print('</textarea></td>');
    fclose($openedFile);
  }
 else{
   print('<textarea name="tb1" rows="100" cols="100"></textarea></td>');
  }
?>
<td>
   <input type="submit" style="height:800px" value="Save Code"/>
</td>
</form>   
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:32:25.017

尝试替换`addslashes`为`htmlspecialchars`

# javascript - IE10 是否支持 FormData()？

> ID：14948797
> 
> 赞同：6
> 
> 时间：2013-02-19T02:26:15.023
> 
> 标签：javascript, html, ajax, internet-explorer, internet-explorer-10

我读过（[这里](http://msdn.microsoft.com/en-us/library/ie/hh772723(v=vs.85).aspx)）IE10 支持 FormData()。但是当我在 IE10 JavaScript 控制台中输入这个：

```
foo = new FormData(); 
```

我收到错误“未定义 FormData”

IE10 支持 FormData() 还是不支持？让它在 IE10 中工作有什么诀窍吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T02:28:43.807

我可以确认确实如此 - 在此页面的控制台中运行您的代码可以正常工作。

因此，我假设您处于 Quirks 模式，因此浏览器假装它不知道它与所述模式兼容。

确保您的页面`<!DOCTYPE html>`在开始时有效，并且没有错误可以退回到怪癖模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-22T22:09:53.393

还要确保您的网络服务器请求“边缘”兼容模式。这可能有助于防止回退到旧的兼容模式。

# hadoop - 错误 org.apache.hadoop.hdfs.server.datanode.DataNode: java.io.IOException: Call to localhost/127.0.0.1:54310 failed on local exception

> ID：14948801
> 
> 赞同：0
> 
> 时间：2013-02-19T02:27:31.143
> 
> 标签：hadoop, mapreduce, hadoop-streaming

在我的机器上启动单节点集群时，我在启动数据节点时遇到错误

```
 ************************************************************/
2013-02-18 20:21:32,300 INFO org.apache.hadoop.hdfs.server.datanode.DataNode: STARTUP_MSG:
/************************************************************
STARTUP_MSG: Starting DataNode
STARTUP_MSG:   host = somnath-laptop/127.0.1.1
STARTUP_MSG:   args = []
STARTUP_MSG:   version = 1.0.4
STARTUP_MSG:   build = https://svn.apache.org/repos/asf/hadoop/common/branches/branch-1.0 -r 1393290; compiled by 'hortonfo' on Wed Oct  3 05:13:58 UTC 2012
************************************************************/
2013-02-18 20:21:32,593 INFO org.apache.hadoop.metrics2.impl.MetricsConfig: loaded properties from hadoop-metrics2.properties
2013-02-18 20:21:32,618 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source MetricsSystem,sub=Stats registered.
2013-02-18 20:21:32,620 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Scheduled snapshot period at 10 second(s).
2013-02-18 20:21:32,620 INFO org.apache.hadoop.metrics2.impl.MetricsSystemImpl: DataNode metrics system started
2013-02-18 20:21:33,052 INFO org.apache.hadoop.metrics2.impl.MetricsSourceAdapter: MBean for source ugi registered.
2013-02-18 20:21:33,056 WARN org.apache.hadoop.metrics2.impl.MetricsSystemImpl: Source name ugi already exists!
2013-02-18 20:21:37,890 ERROR org.apache.hadoop.hdfs.server.datanode.DataNode: java.io.IOException: Call to localhost/127.0.0.1:54310 failed on local exception: java.io.IOException: Connection reset by peer
    at org.apache.hadoop.ipc.Client.wrapException(Client.java:1107)
    at org.apache.hadoop.ipc.Client.call(Client.java:1075)
    at org.apache.hadoop.ipc.RPC$Invoker.invoke(RPC.java:225)
    at sun.proxy.$Proxy5.getProtocolVersion(Unknown Source)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:396)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:370)
    at org.apache.hadoop.ipc.RPC.getProxy(RPC.java:429)
    at org.apache.hadoop.ipc.RPC.waitForProxy(RPC.java:331)
    at org.apache.hadoop.ipc.RPC.waitForProxy(RPC.java:296)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.startDataNode(DataNode.java:356)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.<init>(DataNode.java:299)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.makeInstance(DataNode.java:1582)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.instantiateDataNode(DataNode.java:1521)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.createDataNode(DataNode.java:1539)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.secureMain(DataNode.java:1665)
    at org.apache.hadoop.hdfs.server.datanode.DataNode.main(DataNode.java:1682)
Caused by: java.io.IOException: Connection reset by peer
    at sun.nio.ch.FileDispatcher.read0(Native Method)
    at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:39)
    at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:251)
    at sun.nio.ch.IOUtil.read(IOUtil.java:224) 
```

关于如何解决此错误的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:48:02.700

好的，问题解决了。

由于我通过网络代理使用我的单节点集群，因此我在 $HADOOP_HOME/conf/mapred-site.xml 中添加了以下属性行，以便在跨 Hadoop 守护程序进行通信时绕过代理服务器。

但是，这次我尝试直接连接互联网，所以不得不注释掉我在 mapred-site.xml 中添加的属性。

以下是我注释掉的 mapred-site.xml 中的属性：

```
<!-- 
<property>
<name>hadoop.rpc.socket.factory.class.default</name>
<value>org.apache.hadoop.net.StandardSocketFactory</value>
<final>true</final>
<description>
  Prevent proxy settings set up by clients in their job configs from affecting our connectivity.
</description>
</property> 
--> 
```

# php - 将两个简单的 SQL 查询转换为 Doctrine

> ID：14948804
> 
> 赞同：0
> 
> 时间：2013-02-19T02:27:55.937
> 
> 标签：php, mysql, doctrine-orm, dql

首先，我想为这个问题的长度道歉；如果没有很多背景，我不知道如何正确地提出我的问题。请多多包涵。

我正在将一个用于磨练我的技能的简单应用程序从我自己的自定义数据库访问模式转换为 Doctrine。我选择 Doctrine 有很多原因，其中最重要的是我在日常工作中经常使用它。我也喜欢 Doctrine 通常是一个非常薄（出现）的层，它既不碍事，又增加了很多功能。

我已将`users`数据库中表的数据访问层转换为 Doctrine。它非常不起眼（只是 getter 和 setter），除了一些细节：

*   我需要有一个自定义存储库来处理一些特定的查询和
*   该`User`对象在构造函数中有一个默认`ArrayCollection`实例化

* * *

```
namespace model\entities;

/**
 * @Entity(repositoryClass="model\repositories\UserRepository")
 * @Table(name="users")
 */
class User{
    /* snip variables */

    /**
     * @OneToOne(targetEntity="Authentication", mappedBy="user", cascade="persist")
     */
    private $authentication;

    /**
     * @OneToMany(targetEntity="Contact", mappedBy="user", cascade="persist")
     */
    private $contacts;

    public function __construct() {
        $this->contacts = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /* snip getters and setters */  
} 
```

* * *

在我的旧模式中，我有两个自定义查询选择了`users`表的一个子集。

他们是：

```
public function search( $term = null ){
    if( !$term ){
        $sql = "SELECT *
                FROM
                " . $this->tableName . "
                ORDER BY
                    lname ASC,
                    fname ASC";
        $res = $this->db->q($sql);
    }
    else{
        $sql = "SELECT *
                FROM
                " . $this->tableName . "
                WHERE
                    lname LIKE ?
                    OR fname LIKE ?
                    OR CONCAT(fname, ' ', lname) LIKE ?
                ORDER BY
                    lname ASC,
                    fname ASC";
        $values = array( '%' . $term . '%', '%' . $term . '%', '%' . $term . '%' );
        $res = $this->db->qwv( $sql, $values );
    }

    return $this->wrap( $res );
} 
```

和：

```
public function getAllWithRestrictions(){
    $sql = "SELECT *
            FROM
            " . $this->tableName . "
            WHERE
                userid IN
                (
                    SELECT
                        userid
                    FROM
                        " . $this->uiPre . "authentications
                    WHERE
                        resetPassword = 1
                        OR disabled = 1
                )";
    $res = $this->db->q( $sql );

    return $this->wrap($res);
} 
```

where`$this->db`是一个瘦[PHP PDO](http://php.net/manual/en/book.pdo.php) [包装器](https://github.com/rockerest/nox/blob/master/classes/backbone/Database.php)，[`$this->wrap`它](https://github.com/rockerest/nox/blob/master/classes/model/access/UserAccess.php)通过返回零/单/多行并将它们转换为[数据对象](https://github.com/rockerest/nox/blob/master/classes/model/objects/User.php)来发挥作用。

现在，我认为这很容易转换为 Doctrine。如果`getAllWithRestrictions`它只是一个`->where`,`->orWhere`集，对吧？我不知道了。

我发现了这些 Stackoverflow 问题，我曾经尝试构建我的查询，但我一个接一个地遇到错误，我不确定我需要走多远的兔子洞：

[SQL 多重排序和分组](https://stackoverflow.com/questions/10826299/sql-multiple-sorting-and-grouping)
[使用 Doctrine Doctrine 按多列排序](https://stackoverflow.com/questions/11575325/order-by-multiple-columns-with-doctrine)
[：多重（whereIn OR whereIn）查询？](https://stackoverflow.com/questions/2343767/doctrine-multiple-wherein-or-wherein-query)
[教义——还是在哪里？](https://stackoverflow.com/questions/6878448/doctrine-or-where)

我的自定义存储库目前看起来像这样，但我不能说它甚至接近正确，因为我已经摆弄了很长时间，而且它只是我认为可能有用的大杂烩：

```
<?php
namespace model\repositories;
use Doctrine\ORM\EntityRepository;
use Doctrine\ORM\Query\Expr;

class UserRepository extends EntityRepository{
    public function search( $term ){
        if( !$term ){
            return $this
                    ->_em
                    ->createQuery('SELECT u FROM model\entities\User u')
                    ->addOrderBy( 'u.lname' )
                    ->addOrderBy( 'u.fname' )
                    ->getResult();
        }
        else{
            $qb     = $this->_em->createQueryBuilder();

            $qb ->select(array('u'))
                ->from('model\entities\User', 'u')
                ->where( $qb->expr()->like( 'u.lname', '?1' ) )
                ->orWhere( $qb->expr()->like( 'u.fname', '?2' ) )
                ->orWhere( $qb->expr()->like( 'CONCAT(u.fname, \' \', u.lname)', '?3' ) )
                ->addOrderBy( 'u.lname' )
                ->addOrderBy( 'u.fname' )
                ->setParameters(
                    array(
                        1 => $term,
                        2 => $term,
                        3 => $term
                    )
                );

            $query = $qb->getQuery();
            return $query->getResult();
        }
    }

    public function getAllWithRestrictions(){
        $qb     = $this->_em->createQueryBuilder();

        $qb ->select(array('u'))
            ->from('model\entities\User', 'u')
            ->add('where', $qb->expr()->orx(
               $qb->expr()->eq('u.disabled', '1'),
               $qb->expr()->eq('u.resetPassword', '1')
           ));

        $query = $qb->getQuery();
        return $query->getResult();
    }
} 
```

*编辑：我刚刚意识到我正在`getAllWithRestrictions`对错误的表进行查询（应该是`authentications`。）无论如何，这是导致我现在出现问题的搜索方法。但是，我还需要知道如何做类似的事情`$qb->expr()->eq('u.Authentication.disabled = '1')`，但我不知道 DQL 是如何工作的。*

我现在遇到的特定错误是

*   `Fatal error: Uncaught exception 'Doctrine\ORM\Query\QueryException' with message 'SELECT u FROM model\entities\User u WHERE u.lname LIKE ?1 OR u.fname LIKE ?2 OR CONCAT(u.fname, ' ', u.lname) LIKE ?3 ORDER BY u.lname ASC, u.fname ASC'`

其次是

*   `Doctrine\ORM\Query\QueryException: [Syntax Error] line 0, col 99: Error: Expected Doctrine\ORM\Query\Lexer::T_CLOSE_PARENTHESIS, got ','`

但是根据我构建 DQL/查询生成器的方式，我遇到了许多不同的问题。

同样，我希望这两个 SQL 查询能够简单地转换为 Doctrine / DQL。我想在不通过 Doctrine 诉诸原始 SQL 的情况下做到这一点（正如我链接的许多已接受的答案所建议的那样）。这一定很容易。 **有谁知道如何构建优雅的 Doctrine 查询？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:53:44.330

根据`CONCAT`学说中的函数解析器，它只需要用逗号分隔的2个参数，

```
//Doctrine/ORM/Query/AST/Functions/ConcatFunction.php
$parser->match(Lexer::T_IDENTIFIER);
$parser->match(Lexer::T_OPEN_PARENTHESIS);

$this->firstStringPrimary = $parser->StringPrimary();
$parser->match(Lexer::T_COMMA);
$this->secondStringPrimary = $parser->StringPrimary();

$parser->match(Lexer::T_CLOSE_PARENTHESIS); 
```

所以这

```
->orWhere( $qb->expr()->like( 'CONCAT(u.fname, \' \', u.lname)', '?3' ) ) 
```

应该

```
->orWhere( $qb->expr()->like( 'CONCAT(u.fname, u.lname)', '?3' ) ) 
```

这不会引发任何错误，但可能不是您真正需要的。在这种情况下，您将不得不为`CONCAT`:)滚动您自己的自定义函数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T01:21:24.217

除了上面@Broncha 的答案（通过添加嵌套的`CONCAT`like来帮助解决错误`'CONCAT(u.fname, CONCAT(\' \', u.lname))'`）之外，其他功能可以通过加入所需的实体来修复，然后`WHERE`在加入上添加子句，如下所示：

```
$qb ->select(array('u'))
    ->from('model\entities\User', 'u')
    ->leftJoin('u.authentication', 'a')
    ->add('where', $qb->expr()->orx(
        $qb->expr()->eq('a.disabled', '1'),
        $qb->expr()->eq('a.resetPassword', '1')
    )); 
```

# spring - 在 Spring 初始化期间 Hibernate 无法创建配置

> ID：14948806
> 
> 赞同：0
> 
> 时间：2013-02-19T02:27:57.360
> 
> 标签：spring, hibernate

我正在开发一个涉及 Spring 和 Hibernate 的控制台应用程序。在源目录中有一个`hibernate-spring.xml`locate`resources/spring`并包含以下代码：

```
<property name="mappingLocations">
   <list>
      <value>resources/hibernate/Pojo_A.hbm.xml</value>
   </list>
</property> 
```

当我执行程序时，我得到了这个异常错误。我可以知道代码中还缺少什么吗？

```
Exception in thread "main" org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in class path resource [spring/hibernate-spring.xml]: Invocation of init method failed; nested exception is org.hibernate.HibernateException: Unable to get the default Bean Validation factory
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1338)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:473)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory$1.run(AbstractAutowireCapableBeanFactory.java:409)
    at java.security.AccessController.doPrivileged(Native Method)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:380)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:264)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:261)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:185)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:164)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:423)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:728)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:380)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:140)
    at org.springframework.context.support.FileSystemXmlApplicationContext.<init>(FileSystemXmlApplicationContext.java:84)
    at org.huahsin.main(Program_A.java:766)
Caused by: org.hibernate.HibernateException: Unable to get the default Bean Validation factory
    at org.hibernate.cfg.beanvalidation.BeanValidationActivator.applyDDL(BeanValidationActivator.java:127)
    at org.hibernate.cfg.Configuration.applyBeanValidationConstraintsOnDDL(Configuration.java:1704)
    at org.hibernate.cfg.Configuration.applyConstraintsToDDL(Configuration.java:1654)
    at org.hibernate.cfg.Configuration.secondPassCompile(Configuration.java:1445)
    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1375)
    at org.springframework.orm.hibernate3.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:673)
    at org.springframework.orm.hibernate3.AbstractSessionFactoryBean.afterPropertiesSet(AbstractSessionFactoryBean.java:211)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1369)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1335)
    ... 15 more
Caused by: java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.hibernate.cfg.beanvalidation.BeanValidationActivator.applyDDL(BeanValidationActivator.java:118)
    ... 23 more
Caused by: org.hibernate.HibernateException: Unable to build the default ValidatorFactory
    at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:383)
    at org.hibernate.cfg.beanvalidation.TypeSafeActivator.applyDDL(TypeSafeActivator.java:109)
    ... 28 more
Caused by: javax.validation.ValidationException: Could not create Configuration.
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:175)
    at javax.validation.Validation.buildDefaultValidatorFactory(Validation.java:50)
    at org.hibernate.cfg.beanvalidation.TypeSafeActivator.getValidatorFactory(TypeSafeActivator.java:380)
    ... 29 more
Caused by: java.lang.IndexOutOfBoundsException: Index: 0, Size: 0
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
    at java.util.ArrayList.get(ArrayList.java:322)
    at javax.validation.Validation$GenericBootstrapImpl.configure(Validation.java:173)
    ... 31 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:44:15.927

我通过下载解决了问题`hibernate-validator-4.1.0.Final.jar`。

# c# - C# 错误和头痛 >.< (MonoDevelop version2.8.2 for Unity 3d)

> ID：14948809
> 
> 赞同：1
> 
> 时间：2013-02-19T02:28:05.257
> 
> 标签：c#, unity3d

好的，所以我有一个问题：/首先我使用 C#.. 接下来，在你看到的部分

```
public int BaseValue()
    {
 get{return _basevalue;}
 set{_basevalue value; }
 } 
```

我得到 3 个错误

1) 意外符号“{”

2) 类、结构或接口成员声明中的意外符号“{”

和

3) 解析错误

坦率地说，这让我很生气-_-所以有人知道问题可能是什么吗？

* * *

```
public class BaseStats {

private int _basevalue; //base value of this stat
private int _buffvalue; //amount needed to buff the stat
private int _expToLevel; //amount needed to move to the next level
private float _LevelModifier; //the modifier applied to the exp needed to raise the skill

public BaseStats()
{
_basevalue = 0;
_buffvalue = 0;
_expToLevel = 100;
_LevelModifier = 1.1f;
}

//Basic Setters and Getters
public int BaseValue()
{
get{return _basevalue;}
set{_basevalue value; }
}

public int BuffValue()
{
get{return _buffvalue; }
set{_buffvalue value; }
}

public int ExpToLevel()
{
get{return _expToLevel; }
set{_expToLevel.value; }
}

public float LevelModifier()
{
get{return _levelModifier; }
set{_levelModifier.value; }
}

private int CalculateExpToLevel()
{
return (int)(_expToLevel * _levelModifier);
}

public void LevelUp()
{
_expToLevel = CalculateExpToLevel();
_baseValue++;
}

public int AdjustedValue()
{
return _baseValue + _buffValue;
}

} 
```

* * *

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:30:50.167

属性没有括号。消除 () 并将您的设置器修复为您打算成为属性的内容。消除您打算成为方法的get/set。

```
// this is a property 
public int Foo
{
     get { return foo; }
     set { foo = value; }
}

// this is a method 
public decimal Bar()
{
    // do something and return a decimal
} 
```

请注意，从 C# 3 开始，如果您的属性是简单的 get/set 操作，则可以使用自动实现的属性并消除显式支持变量。

```
public int Foo { get; set; } 
```

# python - Django 1.5 自定义用户模型加上 admin.autodiscover() 中断应用程序

> ID：14948810
> 
> 赞同：1
> 
> 时间：2013-02-19T02:28:11.257
> 
> 标签：python, django, django-admin, django-authentication

我在我的 Django 1.5c1 项目（目前在 github 上的 Django 1.5 分支的最新版本上运行）中有一个自定义用户模型（实际上是这样命名`User`的，因为我没有看到任何需要以其他方式命名它）。 `AUTH_USER_MODEL`在我的设置中正确定义，因此`auth`模块可以正常工作，我可以登录等等。

但是，启用自定义用户模块后，管理站点将无法工作。当我添加`admin.autodiscover()`到我`urls.py`的时，网站上的每个页面（不仅仅是管理页面）都会抛出`NotRegistered`异常并显示`The model User is not registered`. 回溯显示`admin.autodiscover()`正在尝试调用`admin.site.unregister(User)`，显然是在它注册该模型之前。

我尝试将我的用户模型重命名为 以外的名称`User`，但它似乎不起作用。我还尝试为该应用程序创建自己`admin.py`的应用程序，然后尝试使用运行之前指定`User`的自定义模型手动注册我的自定义模型，但这实际上导致了一个单独的异常，说明已经注册。`UserAdmin``admin.py``admin.autodiscover()``User`

为了开始`admin.autodiscover()`工作，我接下来应该尝试什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-11T04:34:07.503

如果您希望自定义用户模型与管理员一起使用，您似乎需要跳过一些额外的障碍。从[文档](https://docs.djangoproject.com/en/dev/topics/auth/customizing/#custom-users-and-django-contrib-admin)中：

> ...您的用户模型必须定义一些额外的属性和方法。这些方法允许管理员控制用户对管理员内容的访问：
> 
> `class models.CustomUser`
> 
> > `is_staff`如果允许用户访问管理站点，则为真。
> > 
> > `is_active`如果用户帐户当前处于活动状态，则为真。
> > 
> > `has_perm(perm, obj=None)`如果用户具有命名权限，则为真。
> > 
> > `has_module_perms(app_label)`如果用户有权访问给定应用程序中的模型，则为真。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T18:35:00.487

我使用自定义用户模型建立了一个全新的空项目并尝试重新创建这种情况，这导致了诊断：我们已将`django-usertools`包添加到项目中，该包尚未针对 Django 1.5 进行更新，并且显然与自定义用户模型冲突. 从设置中的已安装应用程序列表中删除该软件包解决了该问题。

# ruby-on-rails - 是否可以用 glyphicon/raw html 替换 form_for 或 simple_form_for 中的按钮/提交？

> ID：14948812
> 
> 赞同：0
> 
> 时间：2013-02-19T02:28:27.387
> 
> 标签：ruby-on-rails, twitter-bootstrap-rails

我一直在玩弄使用图标而不是标准按钮。我喜欢它的外观，有时图标比带标签的按钮更清晰。

`link_to`虽然我发现调用很容易实现；

```
<%= link_to raw('<i class="icon-exclamation-sign"></i>'), '#' %> 
```

当与 form_for（或 simple_form_for）嵌套时，我正在努力实现相同的结果。有没有办法在使用表单时使用图标`submit`？`input`

以下是我的代码中使用标准按钮的一些示例表单：

```
<%= simple_form_for :present, url: present_path(list_item), method: 'put' do |f| %>
    <%= f.hidden_field :purchased, value: "1" %>
    <%= f.submit "owned" %>
<% end %>

<%= form_for :present, action: 'new', url: presents_path do |f| %>
    <%= f.hidden_field :purchased, value: '0' %>
    <%= f.submit "List", class: "btn btn-mini" %>
<% end %> 
```

我尝试了一些方法，但没有一个只产生用作按钮的图标 - 大多数都使用原始 HTML 作为其内容或按钮内的图标来呈现按钮。

我希望能够实现的最终结果只是充当可点击项目的图标（类似于`link_to`结果）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:34:07.057

你可能想看看 image_submit_tag [http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-image_submit_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-image_submit_tag)

# php - 为什么我在声明 2 个名称相同但签名不同的方法时会出错？

> ID：14948818
> 
> 赞同：0
> 
> 时间：2013-02-19T02:29:01.590
> 
> 标签：php, polymorphism

在以下脚本中，我声明了两个名称相同但签名不同的*方法*。但我在声明时收到错误： `Fatal error: Cannot redeclare Tester::calculate() in /opt/lampp/htdocs/tester.php on line 7`. 这是为什么 ？PHP 不支持这种类型的多态性？

```
<?php
class Tester {
    public function calculate() {
        echo 2*2;
    }

    public function calculate($var_1,$var_2) {
        echo $var_1*$var_2;
    }
}

$obj = new Tester();
$obj->calculate();
echo "<br />";
$obj->calculate(5,4); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T02:30:27.873

PHP != (Java, C++, C#, VB.Net)

尽管 PHP 从 Java 中大量借鉴，但两者（以及其他 OOP 语言）之间存在一些重大差异。一个重要的问题是您不能使用具有不同参数的相同名称的方法。您要么需要：

*   使用[默认参数变量](http://www.php.net/manual/en/functions.arguments.php#functions.arguments.default)
*   使用不同的方法名称
*   扩展父/抽象类（又名[继承](http://php.net/manual/en/language.oop5.inheritance.php)），然后你可以使用[多态性](http://net.tutsplus.com/tutorials/php/understanding-and-applying-polymorphism-in-php/)

# c - 如何仅使用 C 编程语言使用 GCC 编译 Allegro 5 程序

> ID：14948819
> 
> 赞同：0
> 
> 时间：2013-02-19T02:29:10.217
> 
> 标签：c, ubuntu, gcc, allegro5

堆栈溢出等。等，

我刚刚在我的 Ubuntu 机器上安装了 Allegro 5，我看到了这个游戏开发工具的一些源代码，但我没有看到如何编译它的具体说明。

对于 C 程序，我在终端上使用 gcc。

我的问题是：

*   我从哪个目录编译 allegro5 程序？
*   需要哪些编译器选项？（正常的*gcc someCProgram.c -o MyProgram*不起作用）

谢谢你的阅读。我读过两本书，所以我不是一个完整的菜鸟，但我有挣扎......

祝一切顺利，

用户2085446

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:49:53.747

好吧，让我们把它变成一个答案：

如果您的程序仅包含一个`.c`文件，则可以从文件所在的路径运行。但是，通常只要路径正确，从其他任何地方`gcc`调用都没有错。`gcc`

对于与外部库的链接，您需要`-lmylibrary`编译器命令中的选项，例如`-lfreetype`freetype 库等。

现在，当您的库依赖于其他库等时，这可能会变得有点复杂。这就是该`pkg-config`工具的用途。

当您查看 allegro wiki 页面时，您将看到以下示例命令：

```
gcc [source file(s)] -o [output] `pkg-config --libs allegro-5.0` 
```

该`pkg-config`位将为`-l`您解决相关选项。

# java - 数据库连接设计

> ID：14948822
> 
> 赞同：1
> 
> 时间：2013-02-19T02:30:19.047
> 
> 标签：java, tomcat, jdbc

我有一个设计问题，我希望有人能说出一些智慧的话。我有两个应用程序（我们称它们为父母和孩子）。每个父母和孩子都有自己的数据库实例（我真的很想隔离数据）。Tomcat 中运行着一个父级。孩子将在单独的 Tomcat 实例中运行（每个容器有多个孩子，希望有许多 Tomcat 实例）。子应用程序的数量是动态的 - 当客户注册时，新部署会自动放入可用的 Tomcat 实例中，并创建新的数据库模式。当子用户成功登录时，它将向父用户进行身份验证，父用户将返回一个用户对象和数据库连接参数。

我绝对希望将父母和孩子放在单独的容器中。我不确定每个孩子是否需要一个专用的数据库，但它“似乎”更安全。我主要关心的是性能和安全性。我的困境是传递加密的数据库连接参数感觉不对。

谁能提供一个好的设计或者指向我解释一些解决方案的文档？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T05:40:20.040

最好查看多租户设计

这是一些资源，（讨论了安全性和性能）

[http://www.ibm.com/developerworks/cloud/library/cl-multitenantsaas/](http://www.ibm.com/developerworks/cloud/library/cl-multitenantsaas/) [http://www.ibm.com/developerworks/data/library/techarticle/dm-1201dbdesigncloud/index.html](http://www.ibm.com/developerworks/data/library/techarticle/dm-1201dbdesigncloud/index.html) [http://msdn .microsoft.com/en-us/library/aa479086.aspx](http://msdn.microsoft.com/en-us/library/aa479086.aspx)

# python - Couchdb/Mongodb 应用/逻辑层，如 Oracle DB

> ID：14948824
> 
> 赞同：0
> 
> 时间：2013-02-19T02:30:35.330
> 
> 标签：python, oracle, node.js, mongodb, couchdb

在我的工作中，我们使用 Oracle 作为我们的数据库。效果很好。我不是主要的数据库管理员，但我确实使用它。我喜欢的一件事是数据库有一个使用 PL/SQL 的内置逻辑层，它可以处理与保存数据和检索数据相关的逻辑。我真的很喜欢这个，因为它让我们的 MVC 应用程序（PHP/Zend 框架）变得更轻，并且更容易将另一个平台与数据联系起来，例如桌面或移动。

虽然，我有一个个人项目，我想使用 couchdb 或 mongodb，我想尝试实现类似的目标。在 mvc/framework 之外，我想要一个主要应用程序与之对话的 API 层。他们实际上并不直接与数据库对话。他们为 mongo 指定设计文档 (couchdb) 或类似的东西，以获得结果。该 API 层将验证传入的数据，并确保数据本身被正确保存和更新。例如保存一个新用户，在框架中我只需要发送一个带有需要保存的键/值的json对象，api层将数据保存在需要的适当位置。

这个 API 可能会有一个 UI，但仅用于管理目的并让我的生活更轻松。一般来说，它总是会回复 json 字符串，或者在某些情况下是预渲染/缓存的 html。因为无论如何每个 api 层都是特定于应用程序的。

我想知道是否有人做过这样的事情，或者有任何关于网络的提示，我可以做到这一点。我目前正在寻找用 python 编写我的应用程序，前端可能是 Angularjs 之类的。虽然我也在寻找 node.js 作为后端。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:10:31.303

我们在我目前的工作中做这件事。我们在后端有 MongoDB，在它之上有一个 RESTful API，然后在前端有 PHP/Zend。

我们的大部分数据都是只读的，所以我们将这些数据导入 MongoDB，然后 RESTful API（Java 中）就可以提供它。

使用这种方法需要考虑的一些事情：

1.  在您的 API 中编写通用排序/分页逻辑。您将需要此数据列表。用户可以传入诸如[http://yourapi.com/entity/1?pageSize=10&page=3](http://yourapi.com/entity/1?pageSize=10&page=3)之类的内容。

2.  确保在 Mongo 中创建适当的索引以匹配人们将查询的内容。假设您正在存储用户。在 Mongo 中的用户 id 字段上创建索引，或者只使用已在所有调用中索引的 _id 字段。

3.  确保在给定文档中包含*所有*相关数据。Mongo 不像您在 Oracle 中习惯的那样进行连接。请记住，建模数据与文档数据库非常不同。

4.  您似乎想编写一个与数据库无关的层（中间层 API）。这是一个很好的目标。请注意不要让 Mongo 特定的术语渗入您公开的 API。Mongo 具有特定的运算符/概念，您需要使用更通用的术语来掩盖它们。例如，他们有一个 $set 运算符。不要直接暴露。

最后，在对 CouchDB 和 Mongo 有相当多的经验之后，我肯定会选择 Mongo。

# c# - asp.net 4.5 中的验证错误

> ID：14948828
> 
> 赞同：5
> 
> 时间：2013-02-19T02:30:45.973
> 
> 标签：c#, asp.net, asp.net-4.5

我已经广泛搜索了这个并找不到答案，所以我在这里发布这个希望得到帮助。

我们有一个 asp.net 4.5 项目，在数据库对象类中指定了验证。例如：

```
[Required(ErrorMessage = "Name is a required field.")]
public string Name { get; set; } 
```

有什么方法可以让我们在表单页面**的字段旁边显示此错误消息？**验证摘要显示得很好，但我们真的希望它们显示在各自的字段旁边，而不使用传统的、代码繁重的 asp.net 验证器（RequiredFieldValidator 和其他）。

谢谢您的帮助。

*编辑：我们使用的是网络表单，而不是 MVC*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T06:01:37.227

您可以使用 ModelErrorMessage 控件。例如，假设您有一个具有 FirstName 属性的模型。你会添加这样的东西：

```
<asp:ModelErrorMessage ID="FirstNameErrorMessage" ModelStateKey="FirstName" runat="server" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-24T18:50:31.200

不幸的是，WebForms 模型绑定验证框架还没有 MVC 全面。一方面，数据注释的客户端验证不是内置的。我所知道的显示数据注释错误的唯一方法是通过 ValidationSummary 控件，该控件具有 ShowModelStateErrors 属性（默认为 true）。这是一个超级简单的例子：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:FormView ID="FormView" runat="server" RenderOuterTable="false" ItemType="Person"
            DefaultMode="Insert" InsertMethod="FormView_InsertItem">
            <InsertItemTemplate>
                <asp:ValidationSummary ID="ValSummary" runat="server" ValidationGroup="FormGroup"
                    HeaderText="The following problems occured when submitting the form:" />
                <table>
                    <tr>
                        <td>
                            <asp:Label ID="NameLabel" runat="server" AssociatedControlID="NameField">Name</asp:Label>
                        </td>
                        <td>
                            <asp:TextBox ID="NameField" runat="server" Text='<%# BindItem.Name %>' ValidationGroup="FormGroup" />
                        </td>
                    </tr>
                </table>
                <asp:Button ID="SaveButton" runat="server" CommandName="Insert" Text="Save" ValidationGroup="FormGroup" />
            </InsertItemTemplate>
        </asp:FormView>
    </form>
</body>
</html> 
```

代码背后：

```
public partial class create_person : System.Web.UI.Page
{
    public void FormView_InsertItem()
    {
        var p = new Person();
        TryUpdateModel(p);
        if (ModelState.IsValid)
        {
            Response.Write("Name: " + p.Name + "<hr />");
        }
    }
} 
```

班级：

```
using System.ComponentModel.DataAnnotations;

public class Person
{
    [Required, StringLength(50)]
    public string Name { get; set; }
} 
```

因为数据注释验证没有客户端/javascript 支持，所以生成模型状态错误的唯一方法是在回发之后。如果您需要在控件旁边进行内联验证，您仍然需要使用标准验证控件。

我在用户语音上发布了一个功能请求，要求他们考虑改进数据注释集成： [http ://aspnet.uservoice.com/forums/41202-asp-net-web-forms/suggestions/3534773-include-client-side -validation-when-using-data-ann](http://aspnet.uservoice.com/forums/41202-asp-net-web-forms/suggestions/3534773-include-client-side-validation-when-using-data-ann)

如果您喜欢这个想法，请在用户语音上投票。希望这可以帮助。

# ios - 使用构造函数加载 dylib 时的段错误 - 仅在发布版本中

> ID：14948831
> 
> 赞同：1
> 
> 时间：2013-02-19T02:30:53.910
> 
> 标签：ios, objective-c, macos, debugging, dylib

我正在用 Objective-C 编写一个动态库，最近我开始遇到一个非常奇怪的问题，加载 dylib 会在加载后立即触发段错误崩溃。问题是，这只发生在发布版本中 - 调试版本工作得很好。这是崩溃中相关堆栈跟踪的示例：

```
Terminating due to signal Segmentation fault: 11; backtrace: (
    0   <redacted>.dylib                    0x003417a9 SignalHandler + 52
    1   libsystem_c.dylib                   0x39cded33 _sigtramp + 34
    2   CoreFoundation                      0x31abaac9 CFRelease + 1104
    3   ???                                 0x2ff07629 0x0 + 804288041
    4   ???                                 0x2ff04a39 0x0 + 804276793
    5   ???                                 0x2ff04875 0x0 + 804276341
    6   ???                                 0x2fefdfff 0x0 + 804249599
    7   ???                                 0x2ff01a47 0x0 + 804264519
    8   libdyld.dylib                       0x39c97949 dlopen + 48
    9   CoreFoundation                      0x31b31b11 <redacted> + 116
    10  CoreFoundation                      0x31b067cb _CFBundleLoadExecutableAndReturnError + 418
    11  Foundation                          0x32424159 <redacted> + 848 
```

我对代码进行了一些试验，并将崩溃的来源缩小到我的代码中的单个构造函数。删除此构造函数后，不再发生崩溃。但是，如果我`printf`在构造函数中包含一个语句，那么崩溃会再次出现。像这样简单的事情会触发它：

```
static void __attribute__((constructor)) TestConstructor() {
    printf("THIS IS A TEST");
} 
```

我还应该提到，我在其他文件中确实有其他构造函数（所有这些都是静态声明的），并且每个都可以正常工作。正是*这个特殊的构造函数*导致了崩溃，这让我很困惑。

有任何想法吗？我不确定如何从这里进一步调试它。

# c++ - 简单的 c++ inFile 和设置

> ID：14948836
> 
> 赞同：0
> 
> 时间：2013-02-19T02:31:44.847
> 
> 标签：c++, if-statement

该程序有效，我唯一的问题是我不知道如何排列输出。当使用 .txt 文件运行时，它会打印名称、框和 cookie 的名称，但未对齐。另外，我必须计算每个人的应付金额并显示出来，但我只能弄清楚如何计算总数。感谢帮助

```
#include <iomanip>
#include <string>
#include <fstream>
#include <iostream>
using namespace std;

int main()
{

ifstream inFile;
//Declare Variables

string firstName;
string cookieName;

int boxesSold;
int numCustomers = 0;
double amountDue;
int totalCustomers;
int totalBoxesSold = 0;
double totalAmount = 0;

cout << "Girl Scout Cookies" << endl;
cout << "Created By Aaron Roberts" << endl;

inFile.open("cookie.txt");
if(inFile)
{
cout << "Customer    Number      Cookie" << endl;
cout << "Name        Of Boxes    Name" << endl;

while(inFile >>firstName>>boxesSold>>cookieName)
{
    totalBoxesSold += boxesSold;
    totalAmount += boxesSold * 3.50;

    cout << setprecision(2) << fixed << showpoint;
    cout << setw(2) << firstName 
         << right << setw(7) << boxesSold
         << setw(20) << cookieName 
         << endl;
    numCustomers += 1;

}
cout << "\nNumber of Customers: "<< numCustomers << endl;
cout << "Total Boxes Sold: " << totalBoxesSold << endl;
cout << "Total Amount: $" << totalAmount << endl;
inFile.close();
}

else
{
cout << "Could not open file " << endl;
}

system("pause");
return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:45:38.013

假设您在标题中为“客户名称”和“框数”列分配了 12 个字符，您可能希望为它们的数据分配 11 个字符，留下一个字符作为尾随空格。

为了清晰和可维护性，我建议您为这些创建常量：

```
int const name_column_width = 11;
int const boxes_column_width = 11; 
```

然后你可以写：

```
 std::cout << std::setw(name_column_width) << std::left << "Customer" << ' '
        << std::setw(boxes_column_width) << std::left << "Number" << ' '
        << "Cookie"
        << std:: endl;

    std::cout << std::setw(name_column_width) << std::left << "Name" << ' '
        << std::setw(boxes_column_width) << std::left << "Of Boxes" << ' '
        << "Name"
        << std:: endl;

    while (inFile >> firstName >> boxesSold >> cookieName)
    {
        totalBoxesSold += boxesSold;
        totalAmount += boxesSold * 3.50;

        std::cout << std::setw(name_column_width) << std::left << firstName << ' '
            << std::setw(boxes_column_width) << std::right << boxesSold << ' '
            << cookieName 
            << std::endl;
        ++numCustomers;
    } 
```

调整这些列的大小就变成了改变常数的简单问题。

# python - 熊猫时间戳减法

> ID：14948838
> 
> 赞同：2
> 
> 时间：2013-02-19T02:31:56.997
> 
> 标签：python, datetime, pandas

我有一个像这样的时间戳列。

```
In [493]: df_data['last_seen'][:5]
Out[493]: 
1   1838-10-31 01:36:32.493180416
2   1826-08-10 09:38:02.493180416
3   1839-05-04 21:14:42.493180416
4   1831-06-11 17:44:24.493180416
5   1820-01-26 10:32:07.493180416
Name: last_seen 
```

我想要自每行的最近时间戳以来经过的小时数。所以我写

```
df['last_seen'] = df['last_seen'] - df['last_seen'].max() 
```

这会引发错误。

```
AttributeError: 'Timestamp' object has no attribute 'dtype' 
```

请注意，当我要求：

```
>>> type(df['last_seen']) 
>>> pandas.core.series.Series

>>> type(df_data['last_seen'][1])
>>> pandas.tslib.Timestamp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:08:48.027

我没有正确解析日期。正如你所看到的，从 1838 年的所有这些日期中可以明显看出这一点！我使用了通用的 dateutil 解析器，上面的语句有效。

```
pd.read_csv('pet_data.csv', parse_dates=['last_seen'], date_parser=dateutil.parser.parse, skipfooter=1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:49:28.317

这是一个错误

已在此 PR 中修复

[https://github.com/pydata/pandas/pull/2899](https://github.com/pydata/pandas/pull/2899)

# mpi - 使用MPI进行简单计算，不同数量的进程得到不同的结果？

> ID：14948840
> 
> 赞同：0
> 
> 时间：2013-02-19T02:32:10.983
> 
> 标签：mpi

我在一个非常简单的 PI 计算中使用 MPI，使用数值积分，使用一些数学规则，最终我将计算转换为求和，它具有以下格式：

PI = ∑(f(i))，其中 i 从 1 到 100000 开始，f(i) 是一个基于 i 返回某个 double 类型值的函数。

在编程时，我可以将 sum 转换为 for 循环，迭代 100000 次，这是相当困难的。对于使用 p 个处理器的 MPI，我将 for 循环分成 p 个段，每个处理器得到 100000/p 个循环（假设 100000%p = 0）。然后使用 MPI_Reduce、MPI_SUM 收集这些子结果并将它们相加得到最终结果。

但是，当我使用不同数量的进程时，最终结果会略有不同，我的最终 PI 结果有 12 位精度，并且在大约 7 位之后结果开始有所不同。

我无法回答为什么结果会有所不同，因为在我看来，无论任务如何分配，它都只是执行完全相同的任务。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T08:38:24.973

浮点运算的数值结果通常取决于它们的执行顺序。要理解这一点，您首先需要了解计算机如何表示[浮点数](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)。一个例子是添加不同大小的数字时：由于指数不同，一个将被截断（例如四舍五入）。您可以通过以下示例看到这一点：

```
 double small, result1, result2;
    small = 1\. / 3000.;
    result1 = 0.;
    for (int i = 0; i < 10000; i++)
            result1 += small;

    result2 = 0.;
    for (int i = 0; i < 100; i++) {
            double tmp = 0.;
            for (int j = 0; j < 100; j++)
                    tmp += small;
            result2 += tmp;
    }
    printf("result1= %.17g, result2= %.17g\n", result1, result2); 
```

通过首先将数字添加到临时结果，减少截断的发生。您的代码中很可能会发生类似的情况。

# django - Django 和单选按钮

> ID：14948841
> 
> 赞同：3
> 
> 时间：2013-02-19T02:32:21.930
> 
> 标签：django, loops, radio

我正在实现一个测验应用程序，并且正在使用单选按钮显示多项选择答案。

我需要对每个问题的答案进行分组，所以我有这样的

```
{% for answer in quiz.quizanswer_set.all %}
<p><input type="radio" name="score[{{quiz.id}}]" value="{{answer.score}}"/>{{answer.answer}}</p>
{% endfor %} 
```

当我点击提交时，我有这样的 POST 对象

```
<QueryDict: {u'score[1]': [u'10'], u'score[3]': [u'10'], u'score[2]': [u'10'], u'Get Result': [u'Submit']}> 
```

如何以规范的方式遍历分数？

我试过`request.POST.getlist('score')`了，它返回空列表

PS。quiz.id 可能不是按顺序排列的，它来自数据库的行 id。

我目前的工作是：

```
for quiz in Quiz.objects.all():
        total_score += int(request.POST.get('score[{0}]'.format(quiz.id))) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T05:09:28.790

只需过滤 POST 键：

```
for score_key in filter(lambda key:key.startswith('score'), request.POST.keys()):

    total_score += int(request.POST[score_key]) 
```

# 更新

考虑一下，列表理解会比过滤器更好：

```
for score_key in [key for key in request.POST.keys() if key.startswith('score[')]:

   total_score += int(request.POST[score_key]) 
```

# 更新 2

我一直在研究的另一种方法是保持每个单选按钮的名称相同（例如分数），然后将测验 id 与值合并：

```
<input type="radio" name="score" value="{{quiz.id}}-{{answer.score}} /> 
```

然后，您可以轻松获取所有分数的列表并拆分值：

```
for value in request.POST['score']:
    quiz_id, score = value.split('-') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T09:45:16.723

您通过命名输入来使用 PHP 主义`score[{{quiz.id}}]`。不要那样做。只需调用它们`score`，您的浏览器就会做正确的事情，将它们都放在相同的 POST 值中，然后您可以通过该值获取`request.POST.getlist('score')`。

# ruby-on-rails - 如何使用 mongoid 组合/合并两个结果集？

> ID：14948845
> 
> 赞同：0
> 
> 时间：2013-02-19T02:32:54.980
> 
> 标签：ruby-on-rails, mongoid

如何获得包含课堂信息和学生信息的**单个**结果集？这可能吗？`Student``description``name`

`Classroom``Student`在我当前的示例中，与 1 对 N 的关系

`Classrooms.first`目前返回

```
Classroom {
  :_id => "5222da075d39f3e4e802000a",
  :description => "Learn english",
  :student_id => "50f9d5bc5d39f30ebb010004"
} 
```

`Classroom.first.student.first`目前只返回：

```
Student {
  :_id => "50f9d5bc5d39f30ebb010004",
  :name => "Michael",
  :classroom_id => "5222da075d39f3e4e802000a"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T11:26:02.450

这是一种解决方案：-

```
Classroom.first.attributes.merge(Classroom.first.student.first.attributes) 
```

它将返回一个包含两个模型值的哈希

# django - 如何在 Django 单元测试中使用图像字段

> ID：14948847
> 
> 赞同：2
> 
> 时间：2013-02-19T02:32:56.873
> 
> 标签：django

假设我有一个带有单元测试的表单，该表单将验证文件格式：

```
class QForm(forms.ModelForm):
    error_messages = {
    'title_too_short': 'Title is too short',
    'invalid_image_format': 'Invalid image format: Only jpg, gif and png are allowed',
    }

    VALID_IMAGE_FORMATS = ('jpg', 'gif', 'png')

    title  = forms.CharField(label="Title")

    pic = forms.CharField(label="Picture")

    class Meta:
        model = Q
        fields = ("title", )

    def clean_title(self):
        title = self.cleaned_data["title"]
        if len(title) < 11:
           raise forms.ValidationError(self.error_messages['title_too_short'])
        return title

    def clean_pic(self):
        pic = self.cleaned_data["pic"]
        if pic:
            from django.core.files.images import get_image_dimensions
            if not pic.content_type in VALID_IMAGE_FORMATS:
                raise forms.ValidationError(self.error_messages['invalid_image_format'])

        return pic 
```

我试图编写一个单元测试，但它总是返回这个错误：

```
AttributeError: 'unicode' object has no attribute 'content_type' 
```

我的单元测试如下所示：

```
class FormTests(TestCase):
    def test_add(self):
        upload_file = open(os.path.join(settings.PROJECT_ROOT, 'static/img/pier.jpg'), "rb")
        data = {
            'title': 'Test', 
            'pic': SimpleUploadedFile(upload_file.name, upload_file.read())
        }

        q = QForm(data)

        self.assertEqual(q.is_valid(), True) 
```

只是想知道我是否使用错误的方法上传文件？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T10:20:16.610

如果您使用表单处理文件，则需要将单独的`files`值传递给构造函数。请参阅 Django 文档中的此处：

[https://docs.djangoproject.com/en/dev/ref/forms/api/#binding-uploaded-files-to-a-form](https://docs.djangoproject.com/en/dev/ref/forms/api/#binding-uploaded-files-to-a-form)

```
class FormTests(TestCase):
    def test_add(self):
        upload_file = open(os.path.join(settings.PROJECT_ROOT, 'static/img/pier.jpg'), "rb")
        data = {
            'title': 'Test', 
        }
        file_data = {
            'pic': upload_file
        }

        q = QForm(data, file_data)

        self.assertEqual(q.is_valid(), True) 
```

# jenkins - jenkins 挂断电话：Jenkins 正在准备工作，请稍候

> ID：14948851
> 
> 赞同：3
> 
> 时间：2013-02-19T02:33:31.727
> 
> 标签：jenkins, apache

我试图在我的服务器上运行 jenkins，但我总是收到相同的消息，等待再等待，什么也没有。在官方网站上他们报告了这个问题，但我想问是否有人知道如何解决它，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:49:19.143

因为对我来说采取解决方案有点棘手，我将发布我自己的答案，现在它的工作：

最后，我手动运行了 jenkins，通过在 linux 中使用带有下一个命令的战争，而不是使用服务（“service jenkins start”）：

```
java -jar /usr/lib/jenkins/jenkins.war --httport=8081 --aj13port=8081 --prefix=/jenkins 
```

# r - 如何在R中使用pairs函数与布局相结合？

> ID：14948852
> 
> 赞同：5
> 
> 时间：2013-02-19T02:33:34.713
> 
> 标签：r, layout

我正在尝试向自定义配对图添加一个简单的图例。

这是可复制的代码（没有我的自定义对功能）：

```
layout(cbind(1,2),width=c(1,1))
layout.show(2)
pairs(USJudgeRatings) 
```

为什么对功能“擦除”我的布局信息？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-19T02:37:59.820

帮助中包含的警告`layout`是

> 这些函数与在设备上安排绘图的其他机制完全不兼容：par(mfrow)、par(mfcol)

不幸的是，`pairs`用于`mfrow`安排情节。

使用[Duncan Murdoch 和 Uwe Ligges 在 R help 上](https://stat.ethz.ch/pipermail/r-help/2001-September/015379.html)的提示，您可以设置`oma`一个合理的值，以便为您留出余地来放置传奇人物，例如

```
pairs(iris[1:4], main = "Anderson's Iris Data -- 3 species",
      pch = 21, bg = c("red", "green3", "blue")[iris$Species],
      oma=c(4,4,6,12))
# allow plotting of the legend outside the figure region 
# (ie within the space left by making the margins big)
par(xpd=TRUE)
legend(0.85, 0.7, as.vector(unique(iris$Species)),  
       fill=c("red", "green3", "blue")) 
```

![在此处输入图像描述](../Images/b9e5e3bf2df0da93c398dcd9557085de.png)

# asp.net-mvc - 当它影响所有用户时让一个用户刷新服务器缓存是否很奇怪？

> ID：14948855
> 
> 赞同：0
> 
> 时间：2013-02-19T02:33:50.783
> 
> 标签：asp.net-mvc, caching

我在一个不会经常更改的网站上显示大量数据。因此，我将数据缓存在 HttpRuntime.Cache 中，据我所知，它可以为网站的所有用户缓存数据。

但是，我还想提供在缓存数据过时时强制刷新的功能。由于数据是为所有用户缓存的，这意味着如果几个人同时使用该网站，它会影响到每个人。这是一种常见的模式吗？显示网站似乎是一种奇怪的行为，尤其是因为一个用户可以通过不断强制刷新缓存来减慢所有人的速度。进行客户端缓存仍然没有意义，因为所有用户的数据都是相同的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:09:01.650

我认为允许普通用户调用“清除缓存”操作的能力是粗心的。您的可缓存数据应该定义某种依赖关系。请参阅：[缓存过期策略](http://www.neovolve.com/page/Cache-Expiration-Policies.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:09:38.093

缓存对所有用户可见的数据非常普遍，是一种很好的做法。然而，让用户能够刷新缓存是非常罕见的。更好的方法是在保存会更改缓存页面内容的数据时使缓存过期。

智能缓存失效意味着您的用户始终可以看到最新的数据，但他们也可以从您的缓存工作中受益。理想情况下，您只会使受更改影响的页面过期 - 而不是整个缓存。

# jquery - ASP.Net MVC 4 包

> ID：14948862
> 
> 赞同：9
> 
> 时间：2013-02-19T02:34:56.230
> 
> 标签：jquery, asp.net-mvc

我见过的很多代码都引用了这个：

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

这很棒，而且它有效……如果包含“某物”。我是否必须添加参考才能获得这些？使用 NuGet？复制一个DLL？这是从哪里来的？

当我运行我的项目时，我得到了该资源的 404。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-19T02:41:48.170

您需要创建捆绑包。这通常在`App_Start\BundleConfig.cs`ASP.NET MVC 4 项目的文件中完成。这一切都在[Bundling and Minification](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)中进行了解释。

在`BundleConfig`课堂上你需要这样的东西（这个方法应该在 中执行`Application_Start`）：

```
public static void RegisterBundles(BundleCollection bundles) {
  bundles.Add(new ScriptBundle("~/bundles/jquery").Include(
              "~/Scripts/jquery-{version}.js"));

  bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
              "~/Scripts/jquery.unobtrusive*",
              "~/Scripts/jquery.validate*"));

  // ... more registrations ...
} 
```

javascript 源文件应该存在于该`Scripts`文件夹中。上面链接的教程解释了如何在发布版本等中捆绑缩小版本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-10-29T16:21:23.063

仅供参考 - 我已经看到了许多在 MVC 中使用 Bundles 的示例，但大多数人都忽略了提到它的程序集在 System.Web.Optimization.dll 中，您可以通过添加**Microsoft ASP.NET Web 优化框架**包从 NuGet 获得它.

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-19T02:43:37.663

是的，您必须在您的应用程序中注册捆绑包。

全球.asax.cs：

```
 protected void Application_Start() {

        AreaRegistration.RegisterAllAreas();

            // Register the bundles
            BundleConfig.RegisterBundles(BundleTable.Bundles);
      } 
```

捆绑配置.cs：

```
 public class BundleConfig
     {
        // For more information on Bundling, visit http://go.microsoft.com/fwlink/?LinkId=254725
        public static void RegisterBundles(BundleCollection bundles)
        {
            bundles.Add(new ScriptBundle("~bundles/jqueryval").Include(
                        "~/Scripts/jquery.unobtrusive*",
                        "~/Scripts/jquery.validate*",
                        "~/Scripts/jquery.livequery.js",
                        "~/Scripts/jquery.numeric.js"
                       ));               
        } 
```

因此，当您将此代码放在视图中时：

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

它将呈现 4 个 javascript 文件。

更多：[捆绑和缩小](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-05T18:43:01.437

1.  转到 App_Start 文件夹。
2.  打开 BundleConfig.cs
3.  在 RegisterBundles 方法中，检查您是否有以下内容。

```
 bundles.Add(new ScriptBundle("~bundles/jqueryval").Include("~/Scripts/jquery.min.js")); 

```

请不要在 Include 方法中，它包含在您项目中的文件中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T02:43:10.803

在您的项目`App_Start/BundleConfig.cs`中是所有捆绑包的声明。考虑一下：

```
 bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
        "~/Scripts/jquery.unobtrusive*",
        "~/Scripts/jquery.validate*")); 
```

在这种情况下，如果您引用“~/bundles/jqueryval”，它将为您包含列出的 2 个脚本，并且作为奖励，它将缩小它们（如果您在“发布”模式下运行您的项目）。

看看**[这个](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)**了解更多细节。

# jquery - 延迟 javascript 函数的切换时间

> ID：14948864
> 
> 赞同：0
> 
> 时间：2013-02-19T02:35:13.790
> 
> 标签：jquery, drupal

这是一个 javascript 将在 edit-panes-delivery-delivery-country 选项列表更改后运行，几个选项将附加到 $("select[id^='edit-panes-delivery-delivery-zone'] ")，但是当 edit-panes-delivery-delivery-country 选项列表发生变化时也会运行 ajax，因此 ajax 操作将覆盖 javascript 的结果。

```
(function ($) {
  // Original JavaScript code.
    $('#edit-panes-delivery-delivery-country').ready (function() {
        $("#edit-panes-delivery-delivery-country").change(function() {
            if ($("#edit-panes-delivery-delivery-country option[value='156']").attr('selected')) {   

                var myOptions = {
                    949 : '福州 (hkpost only)',
                    951 : '廣州 (hkpost only)',               
                    952 : '昆明 (hkpost only)',
                    956 : '溫州 (hkpost only)',
                    957 : '廈門 (hkpost only)'

                };
                $.each(myOptions, function(val, text) {
                    //alert("added");
                    $("select[id^='edit-panes-delivery-delivery-zone']").append( new Option(text,val) );

                })
            }
        })
    })
})(jQuery); 
```

所以，我的问题是，是否可以延迟 jquery 运行例如几秒钟？

附言。该脚本在drupal 7模块中运行，因为我不知道drupal 7中的alter ajax动作，所以我选择延迟jquery运行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T02:39:11.050

将您的代码移动到一个单独的 JS 函数中，并在 jQuery 代码中使用 setTimeout 调用它，替换 alert("Hello")。此示例中的计时器为 3,000 毫秒，即 3 秒。

```
setTimeout(yourFunctionNamehere,3000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:39:58.087

试试这个：

```
$("#edit-panes-delivery-delivery-country").change(function() {
    setTimeout(myHandler, 5000);
});

function myHandler(){
    // do everything here
} 
```

# c - 如何将指针传递给抽象数据类型的多维数组

> ID：14948879
> 
> 赞同：0
> 
> 时间：2013-02-19T02:37:02.997
> 
> 标签：c, pointers, multidimensional-array

我已经阅读了一些关于将指针传递给多维数组的材料，但我无法让它为自己工作。

我有：

```
/* This code basically, in order, does this--or tries to:
    - Create 2D array of cell structs
    - Create info_pass detailing certain attributes of the 2D array
         + in particular, I am trying to include a pointer to the 2D array so that I
           can pass the info_pass struct between functions and update the contents of 
           the 2D array in each function.
    - The updating is done in struct info_pass* update(...){}
    - ... however, in my full program, there are several other functions it is passed 
      to, so being able to pass a pointer that allows manipulation of the 2D array is
      what I'm really after.
*/

struct info_pass {
    /* stuff */
    struct cell* master;
};
struct cell {
    /* values */
    /* lots of pointers to other cells */
};
struct info_pass* genesis() {                 /* creating an the multiD array */
    /* stuff */
    struct cell* (*cells)[width];
    cells = malloc(sizeof(struct cell) * width * length);

    struct info_pass* keycard = NULL;
    keycard = malloc(sizeof(struct info_pass));
    /* assign values to key card */
    keycard->master = cells;     /* problem here?! */  <==== (A)

    /* update cells */

    return keycard;                           /* therefore problem here too */
}
struct info_pass* update(struct info_pass* key) {
    struct info_pass* keyRef = NULL;
    keyRef = malloc(sizeof(struct info_pass));
    keyRef = key;                             /* and of course here */

    struct cell* home1 = NULL;
    home1 = malloc(sizeof(struct cell));

    /*here I want to update the multidimensional array*/ <===== (B)
    /*... and then send it back ...*/
    return keyRef;
 } 
```

错误@ **(A)** = 警告：来自不兼容的指针类型的赋值。

错误@ **(B)** = 错误：下标值既不是数组也不是指针。

只是希望朝着正确的方向推进。

**编辑**

根据 ThePosey 的建议，我将展示更多涉及“错误：下标值既不是指针也不是数组”的代码。我将在下面添加它而不是将其放入上面的代码示例中，以便为将来的上下文保留原始问题的状态。

```
struct info_pass* update(struct info_pass* key) {      

    /* passing data, including a pointer to a 2D array from info_pass     */
    /* struct then I want to access the 2D array and change it's contents */
    /* contents and then send it back in another info_pass struct         */

    struct info_pass* keyRef = NULL;      
    keyRef = malloc(sizeof(struct info_pass));
    keyRef = key;                     /* to pass the info back afterwards */

    int len = keyRef->length;
    int wid = keyRef->width;

    struct cell* home1 = NULL;
    home1 = malloc(sizeof(struct cell));
    home1 = key->masterRef[len][wid];       /* to access and change the data */

    int fate = 0;
    int a = 0;
    int b = 0;

    for (a = 0; a < len; a++) {
            for (b = 0; b <  wid; b++) {
                    if (keyRef->masterRef[a][b].go_up.state == 1) { 
     /* just trying different styles of calls */
                            fate++;
                    } if (home1[a][b].go_down.state == 1) {
                            fate++;
                    } if (home1[a][b]->go_left->state == 1) {
                            fate++;
                    } if (home1[a][b]->go_right->state == 1) {
                            fate++;
     /* there more calls to the array, and all generate the same error: */
     /* subscripted value is neither array nor pointer */ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:10:00.477

您在 @A 的错误是由于尝试将 a 分配`cell***`给 a `cell*`。如果你想创建一个多维（从代码看起来你想要一个 2D 长度 x 宽度）数组，你可以执行以下操作：

```
struct cell* cells[length];

for (int i = 0; i < length; i++)
{
    //give each row width number of cell structs
    cells[i] = malloc(sizeof(struct cell) * width);
} 
```

试图帮助您解决剩下的问题。你会改变

```
struct info_pass {
    /* stuff */
    struct cell* master;
}; 
```

至

```
struct info_pass {
    /* stuff */
    struct cell** master;
}; 
```

但您可能还需要在该结构中保留长度和宽度信息，以便了解数组的大小。之后，无论您拥有信息通行证，您都可以通过执行以下操作来访问各个单元格元素：

```
struct cell* single_cell = &my_info_pass->master[lengthIndex][widthIndex]; 
```

或者如果您在单元格结构中有一个 cell_id int ，则直接获取值，例如：

```
int cell_value = my_info_pass->master[lengthIndex][widthIndex].cell_id; 
```

如果没有更具体的案例和准确的代码，很难缩小您不理解的部分。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:30:13.710

不是真正的答案，而是需要一些格式的注释。:-) 很容易理解 C 中的“数组”只是指针运算。例如：

```
char* ptr = "abcd";

    printf("Letter = %c\n", ptr[1]);
    printf("Letter = %c\n", 1[ptr]); // Same damn thing!
    printf("Letter = %c\n", *(1 + ptr)); // and again! 
```

所以，当你在做看起来像“数组索引”的事情时，C 只是添加东西并通过它们间接。语法“x[y]”表示“将 x 添加到 y 并将结果用作指针”。（当然，需要注意的是，在将整数添加到指针之前，C 会将整数乘以所指向事物的大小）

IOW，[] 运算符的真正含义是“添加和间接”。

好的旧 ANSI C 有多维数组吗？不是真的，不是像 FORTRAN 这样经常使用它们的语言。但是，只要你有简单的数组和指针算法，你就可以自己动手。所以，如果我想要一个一维数组，我只需要一个指向 malloc() 提供的内存的指针。但是如果我想要一个二维数组，那么我需要一个指针数组，每个指针都指向 malloc() 返回的一些内存。因为这：

```
int** Matrix = MallocMatrix(3, 5);

Matrix[2][3] = 0; 
```

表示“将 2*sizeof(int*) 添加到 Matrix 和间接。然后将 3*sizeof(int) 添加到该矩阵和间接。”

# javascript - Javascript：为什么日期不返回正确的日期？

> ID：14948881
> 
> 赞同：0
> 
> 时间：2013-02-19T02:37:07.187
> 
> 标签：javascript, date

我来自巴西，我用 Javascript 编写了这段代码

```
var dt = new Date(2012,9,21);   // Oct-21-2012
alert(dt.getDate()); 
```

但是，它产生 20 而不是 21。我用 Firefox 18、Chrome 24 和 Internet Explorer 8 进行了测试。

怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:37:07.187

你遇到了一个巨大的巧合。

在巴西，2012 年 10 月 21 日是该国大部分地区夏令时的开始，因此巴西不存在 2012 年 10 月 21 日 0:0 到 1:0 之间的本地日期！

其他国家的一些人在同一天没有遇到同样的问题。

见：[http ://www.timeanddate.com/news/time/brazil-dst-2012.html](http://www.timeanddate.com/news/time/brazil-dst-2012.html)

在巴西，问题中的代码确实输出 20

```
var dt = new Date(2012,9,21);  // 21-Oct-2012 0:0
alert(dt.getDate()); 
```

然而，轻微的变化会产生 21，因为 1 小时足以“跳过”丢失的小时：

```
var dt = new Date(2012,9,21,1);  // 21-Oct-2012 1:00
alert(dt.getDate()); 
```

见：[http ://www.timeanddate.com/time/dst/2013.html](http://www.timeanddate.com/time/dst/2013.html)

**评论后编辑：**例如，在美国，2013 年 3 月 10 日将开始夏令时。

```
var dt = new Date(2013,02,10);  // March-10-2013
alert(dt.getDate());    // Output: 10 
```

为什么是对的？因为在美国，夏令时是在 2:00 而不是像巴西那样的 0:00，因此隐含的 0 小时可以保护生成的日期免受问题的影响。但是，在经过的小时计算中仍然可能出现错误。 **-/-**

在巴西，这种情况应该会在许多处理日期的站点中引发错误，而不管时间如何。可以在表格中输入日期，并且算法以错误的方式计算经过的天数。

例如，如果有人使用这个漂亮的 javascript 代码在表单（ [DHML Goodies Calendar](http://www.dhtmlgoodies.com/index.html?page=calendarScripts "dhtmlgoogies - 日历")）中输入日期，并且在决定将该日期保存在数据库中之后，如果一个人运气不好，可能会得到错误的日期以满足特殊的日期。

最终的解决方案是使用 UTC（协调世界时）时间，因为没有夏令时更改并且您使用一种抽象时间。在大多数实际应用中没有问题。

```
var dt = new Date( Date.UTC(2012, 9, 21, 8, 5, 12));
alert( (dt.getUTCMonth()+1) + '/' + dt.getUTCDate() + '/' + 
        dt.getUTCFullYear() + " " + dt.getUTCHours()+ ':' + 
        dt.getUTCMinutes() + ':' + dt.getUTCSeconds() ); 
```

如果有人不使用小时、分钟和秒，而不是使用 UTC，只需在 Date() 调用中放置一个大于或等于 1 的虚拟小时值，如上所示。

**评论后编辑：**因此巴西（以及伊朗、黎巴嫩、巴拉圭、智利和葡萄牙等国家）应将夏令时的开始时间更改为 2:00 而不是 0:00，以避免这种混淆并与更多发达国家。 **-/-**

# python - 如何对音频进行采样以进行实时处理？

> ID：14948884
> 
> 赞同：-1
> 
> 时间：2013-02-19T02:37:33.193
> 
> 标签：python, audio, sampling

音频是复杂的正弦波。我想从播放的音频文件中采样数据并对其进行操作。

每个样本应该是多个间隔的正弦波幅度列表。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:52:58.503

如果您只是想阅读 wav 文件，wave 库应该可以做到这一点：http: [//docs.python.org/2/library/wave.html](http://docs.python.org/2/library/wave.html)

例如：

```
import wave
CHUNK_SIZE=1024
wf = wave.open('filename.wav')
data = wf.readframes(CHUNK_SIZE)
while data != '':
    do_something(data)
    data = wf.readframes(CHUNK_SIZE) 
```

将 1024 个样本读入数据。也就是说，数据将是一个包含 1024 个条目的数组，每个条目都是特定时间的幅度，其中该时间取决于文件的帧速率。看到这个问题：[音频帧包含什么？](https://stackoverflow.com/questions/3957025/what-does-a-audio-frame-contain)更多解释。

# file - 为什么文件扩展名在 Web 上区分大小写但在 localhost 上不区分大小写？

> ID：14948885
> 
> 赞同：6
> 
> 时间：2013-02-19T02:37:35.813
> 
> 标签：file, localhost, server-side, src

所以我试图在我的网站上链接一张图片，`<img src="cat.png alt="cat"/>`但由于某种原因它不起作用。后来我发现当上传到我的服务器时，该文件被标记为“cat.PNG”，所以我输入了它并修复了它。但是，当我在 localhost 上测试我的网站时，一切正常。为什么是这样？这是一些安全问题还是 localhost 在解析文件时更聪明？

我知道这是一个奇怪而随机的问题，但我很好奇。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T02:45:11.773

这取决于操作系统。您的服务器似乎运行 Linux，这通常区分大小写，如果您在 localhost 上运行 Windows，则不是。

# c++ - 使用模板参数重载 operator<< 时编译错误

> ID：14948886
> 
> 赞同：3
> 
> 时间：2013-02-19T02:37:37.863
> 
> 标签：c++, templates, namespaces, operator-overloading, name-lookup

我正在尝试使用 stl copy() 在地图中打印键值对。代码如下：

```
#include <iterator>
#include <iostream>
#include <algorithm>
#include <map>

using namespace std;
//compile error if I comment out "namespace std"
namespace std {    
template<typename F, typename S> 
ostream& operator<<(ostream& os, const pair<F,S>& p) {
  return os << p.first << "\t" << p.second << endl;
}
}

int main() {
  map<int, int> m;
  fill_n(inserter(m, m.begin()), 10, make_pair(90,120));
  copy(m.begin(), m.end(), ostream_iterator<pair<int,int> >(cout,"\n"));
} 
```

我正在尝试重载运算符<<。问题是代码不会编译，除非我将重载 operator<< 的定义用`namespace std`. 我认为这是由于 C++ 的名称查找机制，我仍然无法理解。即使我这样定义非模板版本：

```
ostream& operator<<(ostream& os, const pair<int,int>& p) {
    return os << p.first << "\t" << p.second << endl;
} 
```

它仍然不会编译。谁能解释为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:47:32.030

您的问题是与[参数相关的名称查找](http://en.wikipedia.org/wiki/Argument-dependent_name_lookup)(ADL)。编译器正在搜索`operator<<`in的实现`namespace std`，因为`ostream`和`pair`都在该命名空间中。您应该制作一个`operator<<`从正确命名空间转发到的包装器：

```
template<class T>
struct ostreamer {
  ostreamer(const T& value) : reference(value) {}
  const T& reference;
  friend ostream& operator<<(ostream& stream, const ostreamer& value) {
    return stream << value.reference;
  }
}; 
```

然后只需使用`ostream_iterator<ostreamer<pair<const int, int>>>`而不是`ostream_iterator<pair<int, int>>`. 请注意，由于`ostreamer`按引用而非按值存储，因此您不能再依赖从`pair<const int, int>`to的隐式转换`pair<int, int>`。您可以更改`ostreamer`为按值存储，但实际上，它没有开销，而且我认为无论如何最好是明确的。

# c++ - Qt 5.0.1：应用程序不会在 Qt 创建者之外执行

> ID：14948887
> 
> 赞同：3
> 
> 时间：2013-02-19T02:37:46.880
> 
> 标签：c++, qt5

我正在尝试运行程序 TransitTalker.exe，这是我从 qt 编译的代码，如下图所示：

[https://www.dropbox.com/s/ypgklrm4uschri5/filecontents.png](https://www.dropbox.com/s/ypgklrm4uschri5/filecontents.png)

（请注意，我没有足够的声誉来发布图片，这就是我提供图片链接的原因）

**我的问题：**

*   我的程序不在 qt creator 之外执行。

*   我在尝试运行 TransitTalker.exe 时收到以下消息：*“此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。”*

**我已经做了什么：**

*   我已经添加了所需的 dll（GPSVC.dll 和 IESHIMS.dll 除外）。我通过一个名为dependency walker的程序找到了所需的dll。

*   我确保我的程序在 qt creator 中运行，没有错误。

**我的主要问题：** 为什么我会收到此运行时消息：*“此应用程序已请求运行时以不寻常的方式终止它。请联系应用程序的支持团队以获取更多信息。”* . 我希望能够将我的程序 TransitTalker.exe 作为 qt 独立应用程序运行。

运行 qt creator 5.0.1 (MINGW 47_32)。我在同一台计算机上也有 Visual Studio 2012。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-20T02:45:14.147

我知道这被标记为已解决，但我遇到了同样的问题，我通过`libEGL.dll`从 Qt 二进制目录复制解决了它。出于某种奇怪的原因，它没有出现在依赖项检查中，我不得不查看长长的调试日志以查看实际加载了哪些库。（并且它不在您的图像中，因此很可能是相同的问题）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:37:11.903

我的应用程序现在可以工作了。请参阅下面的解决方案，了解我是如何做到的。

Dmitry 是正确的，MinGW GCC 4.7与 Qt 5.0.1**不**兼容，我通过[这篇文章验证了这一点](http://qt-project.org/forums/viewreply/100664/ "这个帖子")

**我的解决方案**：我安装了使用 MinGW GCC 4.4 的 Qt Creator 4.8 SDK。我能够在 Qt Creator 之外运行我的应用程序可执行文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T04:40:05.050

我的猜测是 Qt 出现某种启动时断言失败（例如在 QApplication 构造函数中），并且正在向 stdout（或 stderr？）打印一条消息，然后错误地“以不寻常的方式终止应用程序”。

如果是这种情况，那么您将想了解该错误消息的内容。一种方法是将以下代码临时添加到 main() 的顶部：

```
AllocConsole();
freopen("conin$",  "r", stdin);
freopen("conout$", "w", stdout);
freopen("conout$", "w", stderr); 
```

...然后重新编译您的程序并再次运行它。当它运行时，应该会出现一个 MS-DOS 外壳窗口，观察它是否有任何关于 Qt 为何不满意的信息性消息。

# java - c - 客户端/java - 服务器 - 客户端读取奇怪的东西

> ID：14948894
> 
> 赞同：0
> 
> 时间：2013-02-19T02:38:56.330
> 
> 标签：java, c, networking, tcp

服务器：

```
 public static void getListOfFiles(String path, DataOutputStream outToClient) throws IOException
    {
        // Directory path here
          //String path = "."; 

          String files;
        try 
        {
              File folder = new File(path);
              File[] listOfFiles = folder.listFiles(); 
              String sendOver = "";

              for (int i = 0; i < listOfFiles.length; i++) 
              {

                   files = listOfFiles[i].getAbsolutePath();
                   sendOver = sendOver + "!" + files;

              }
              outToClient.writeBytes(sendOver + "\n");
        } 
        catch (Exception e) 
        {
            outToClient.writeBytes("There was an error with the path, please try again. \n" );
        }

    }

    public static void getDate(DataOutputStream outToClient) throws IOException
    {

        outToClient.writeBytes(Calendar.getInstance().getTime().toString() + '\n');
    }

    public static void getUsers(DataOutputStream outToClient) throws IOException
    {
        outToClient.writeBytes("User logged in: "+ System.getProperty("user.name") + "\n");
    }

} 
```

客户：

```
#include <sys/socket.h>
#include <sys/types.h>
#include <netinet/in.h>
#include <netdb.h>
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <unistd.h>
#include <errno.h>

int main()

{

    int sock, bytes_recieved;
    char send_data[1024],recv_data[1024];
    struct hostent *host;
    struct sockaddr_in server_addr;
    bytes_recieved = 1024;
    host = gethostbyname("localhost");

    sock = socket(AF_INET, SOCK_STREAM,0);

    server_addr.sin_family = AF_INET;
    server_addr.sin_port = htons(3324);
    server_addr.sin_addr = *((struct in_addr *)host->h_addr);
    bzero(&(server_addr.sin_zero),8);

    connect(sock, (struct sockaddr *)&server_addr,sizeof(struct sockaddr));
    char *temp = '\n';

    while(1)
    {
        printf("Enter Command...\n");
        gets(send_data);
        strcat(send_data, "\n");
        send(sock,send_data,strlen(send_data), 0);

        if(send_data[0] == 'Q' && send_data[1] == 'U' && send_data[2] == 'I' && send_data[3] == 'T')
        {
            printf("Quiting...");
            break;
        }

        //printf("\nSend Data :");

        recv_data[bytes_recieved] = '\0';
        bytes_recieved = recv(sock,recv_data,1024,0);
        //fflush(stdin);
        printf("\nRecieved data = %s" , recv_data);
        recv_data[bytes_recieved] = '\0';

    }
} 
```

本质上，服务器端正确接收所有内容（我已经调试过），但是客户端不能正确读取 -

以下是我在客户端的控制台中的一些示例：

```
test

Recieved data = Error wEnter Command...**<---- What The??**

Recieved data = ith command: TEST_c.dylibEnter Command... **<---- What The??**

Recieved data = Error with command: dylibEnter Command... **<---- What The??**

Recieved data = Error with command: Enter Command... **<---- What The??** 
```

我正在回信

```
outToClient.writeBytes("Error with command: " + capitalizedSentence + "\n" ); 
```

当我得到上述。希望有人更精通C。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:17:12.623

一个错误（不确定是否还有更多错误）：您这样做：

```
bytes_recieved = 1024;
char send_data[1024],recv_data[1024]; 
recv_data[bytes_recieved] = '\0'; //  <--- HERE YOU ARE WRITING OUT OF BOUNDS
bytes_recieved = recv(sock,recv_data,1024,0); 
```

尝试：

```
recv_data[bytes_recieved - 1] = '\0';
bytes_recieved = recv(sock,recv_data,1023,0); 
```

此外，除非所有消息都是 1023 字节长。您可能必须`\0`在字符串的末尾添加 ，而不是缓冲区的末尾。

最后，您应该查看一下手册以了解 read 的用法。[http://linux.die.net/man/2/recv](http://linux.die.net/man/2/recv)。

您可能没有使用您打算使用的标志。您可以在此处查看确定缓冲区中可用字节数的方法：[https ://stackoverflow.com/a/3054519/828193](https://stackoverflow.com/a/3054519/828193)

希望有帮助。

# python - python中的strncmp

> ID：14948900
> 
> 赞同：11
> 
> 时间：2013-02-19T02:39:14.553
> 
> 标签：python

我正在解析一个带有路径列表的文件。我试图查看一个路径是否在特定目录下。所以我有两个字符串：`S1 = '/tmp/'`和`S2 = '/tmp/file.txt'`

如果我想检查是否`S2`包含`S1`加上一些额外的字节，在 C 中，我会做一个`strncmp`of`S1`和`S2`upto`strlen(S1)`个字节。有没有办法在 Python 中做到这一点？我是 Python 新手，还不知道所有可用的模块。我可以通过迭代字符串中的字符并进行比较来轻松实现这一点，但想知道是否有任何东西可以默认为我提供这些帮助函数

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-19T02:42:12.990

是的。你可以这样做： `if a in b:` 这将检查是否`a`是`b`.

例如

```
if 'foo' in 'foobar':
    print True

if 'foo' in 'barfoo':
    print True 
```

从您的帖子中，您似乎只想查看字符串的开头。在这种情况下，您可以使用以下`.startswith`方法：

```
if 'foobar'.startswith('foo'):
    print "it does!" 
```

同样，您可以使用以下方法执行相同的操作`endswith`：

```
if 'foobar'.endswith('bar'):
    print "Yes sir :)" 
```

最后，也许最直接的翻译`strncmp`是使用切片和`==`：

```
if a[:n] == b[:n]:
    print 'strncmp success!' 
```

Python 还具有许多处理[`os.path`](http://docs.python.org/2/library/os.path.html)模块中路径名的工具。值得调查那里有什么。有一些非常简洁的功能。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T02:42:42.560

您可能正在寻找`os.path.commonprefix`.

例如：`os.path.commonprefix(['/tmp/','/tmp/file.txt'])`将返回`'/tmp/`

所以你应该检查`len(os.path.commonprefix([s1,s2])) > 0`

在此处查看文档：http: [//docs.python.org/2/library/os.path.html](http://docs.python.org/2/library/os.path.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T02:46:38.990

您可以通过以下方式进行测试

```
S2[:len(S1)] == S1 
```

甚至更简单：

```
S2.startswith(S1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T02:43:43.047

你可以使用`find`字符串的方法

```
>>> s1 = "/tmp"
>>> s2 = "/tmp/file.txt"
>>> s2.find(s1)
0 
```

# php - Php - 从 gmdate() 日期中减去天数

> ID：14948902
> 
> 赞同：2
> 
> 时间：2013-02-19T02:39:21.430
> 
> 标签：php, date, datetime, timezone

我想从我在 PHP 脚本中的 GMDATE() 中减去 180 天（出于 UTC 目的）。我刚刚看过 SO，但几乎没有人在使用 gmdate()。

这就是我所拥有的：

```
$from_date = gmdate("Y-m-d H:i:s"); 
```

有没有一种简单的方法可以从中减去 X 天，而无需完全使用不同的函数？还是我应该以另一种方式来做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T02:40:52.737

使用日期时间。处理日期要好得多，尤其是在处理时区时。

```
$datetime = new DateTime(null, new DateTimeZone('UTC'));
$datetime->modify('-180 days');
echo $datetime->format('Y-m-d H:i:s'); 
```

[看到它在行动](http://www.php.net/manual/en/class.datetime.php)

**参考**

*   [约会时间](http://www.php.net/manual/en/class.datetime.php)
*   [日期时区](http://www.php.net/manual/en/class.datetimezone.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:46:23.413

UTC格式应该是这样的；

```
$timezone = new DateTimeZone('UTC');
$datetime = new DateTime('NOW', $timezone);
$datetime->modify('-180 days');
echo $datetime->format('Y-m-d H:i:s'); 
```

日期时间：[PHP 日期时间类](http://www.php.net/manual/en/class.datetime.php)

> `public __construct ([ string $time = "now" [, DateTimeZone $timezone = NULL ]] )`

时区：[PHP DateTimeZone 类](http://www.php.net/manual/en/class.datetimezone.php)

> `public __construct ( string $timezone )`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-21T20:11:05.937

gmdate('Ymd H:i:s', time() - 15552000)

# c# - 如何浏览与应用程序在同一目录中的文件夹

> ID：14948905
> 
> 赞同：1
> 
> 时间：2013-02-19T02:39:50.923
> 
> 标签：c#, browser, directory

[解决方案截图](http://qwertyuiop1234567890.com/img/howto.png)

只是想知道在c#中，如果我在图片/img中设置一个文件夹，现在我如何从这个文件夹中读取图像，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:07:53.023

您的解决方案似乎是 WinForm 应用程序

例如将图像加载到 PictureBox

```
PictureBox1.Image = Image.FromFile("img\\image_file_name.jpg"); 
```

要知道该文件夹的绝对路径，您可以执行类似的操作

```
string img_folder_path = System.IO.Path.Combine(Application.StartupPath, @"img");
string path_to_image = System.IO.Path.Combine(img_folder_path, "image_filename.jpg");
PictureBox1.Image = Image.FromFile(path_to_image); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T04:23:18.313

如果修改 img 目录下文件的 Copy to output directory 属性并将其设置为 Copy if newer 可以直接访问该文件，例如

`Image.FromFile("img\image.png")`

![在此处输入图像描述](../Images/3ace79e281cf2c750db7ed519ed0485c.png)

# ios - 如何同时实现两个UIButton？

> ID：14948909
> 
> 赞同：1
> 
> 时间：2013-02-19T02:40:01.647
> 
> 标签：ios, uibutton, ibaction

我创建了 2 个 UIButton（不同的标签）并连接到 1 个动作，但是当同时按下时，它会以很小的延迟触发 2 个动作。

```
- (IBAction)keysPress:(UIButton *)sender {
    UIButton *butOne = (UIButton *)[sender viewWithTag:0];
    UIButton *butTwo = (UIButton *)[sender viewWithTag:1];
    NSLog(@"BUT 1: %@ || BUT 2: %@",butOne, butTwo);
} 
```

始终记录 2 次：

```
2013-02-19 09:37:40.933 TestActions[1107:c07] BUT 1: <UIButtonLabel: 0xca4d450; frame = (65 67; 9 19); text = 'â'; clipsToBounds = YES; opaque = NO; userInteractionEnabled = NO; layer = <CALayer: 0xca4d4c0>> || BUT 2: <UIRoundedRectButton: 0xca4d310; frame = (161 164; 139 153); opaque = NO; autoresize = RM+BM; tag = 1; layer = <CALayer: 0xca4d270>>

2013-02-19 09:37:40.935 TestActions[1107:c07] BUT 1: <UIRoundedRectButton: 0xca4c5c0; frame = (20 164; 135 153); opaque = NO; autoresize = RM+BM; layer = <CALayer: 0xca4c6b0>> || BUT 2: (null) 
```

如何控制这种情况？2 个按钮，1 个动作 - 开火 1 次。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T02:48:16.523

你似乎不明白它`sender`是什么。发送者是触发事件的按钮，您可以根据它的内容进行编程。

您需要保存对按钮的引用，然后在进入函数时将它们与发送者进行比较。

```
@property (nonatomic, weak) IBOutlet UIButton *butOne;
@property (nonatomic, weak) IBOutlet UIButton *butTwo;

-(IBAction)keysPress:(UIButton *)sender {
   if(sender == [self butOne]) {
       //Do button one actions
   } 

   if(sender == [self butTwo]) {
       //Do button two actions
   }
} 
```

如果您不想保留引用并使用这些`viewWithTag`东西，我真的不建议这样做，但如果您这样做，您可以：

```
- (IBAction)keysPress:(UIButton *)sender {
   UIButton *butOne = (UIButton *)[self viewWithTag:1];
   UIButton *butTwo = (UIButton *)[self viewWithTag:2];
   if(sender == butOne) {
       //Do button one actions
   } 

   if(sender == butTwo) {
       //Do button two actions
   }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:54:56.570

```
- (IBAction)keysPress:(UIButton *)sender {
    if(_canClick)
    {
        _canClick = NO;
        UIButton *butOne = (UIButton *)[sender viewWithTag:0];
        UIButton *butTwo = (UIButton *)[sender viewWithTag:1];
        NSLog(@"BUT 1: %@ || BUT 2: %@",butOne, butTwo);
        [self performSelector:@selector(makeButtonCanClick) withObject:nil afterDelay:YOURTIMEINTERVAL];
    }

}

- (void)makeButtonCanClick
{
    _canClick = YES;
} 
```

`_canClick`是一个`BOOL`ivar ，默认是`YES`

# php - 为什么这个 PHP 代码可以在 localhost 上运行，但不能在共享主机上运行？

> ID：14948912
> 
> 赞同：-1
> 
> 时间：2013-02-19T02:40:13.003
> 
> 标签：php, web-hosting

我可以在 MAMP 上完美执行代码，但不能在我的 hostgator 服务器上执行。在服务器上，文本会自动转义以防止执行。

```
<?php 
    if (@isset($_POST['code'])) {
        @$code = $_POST['code'];
        @eval($code);
    }
    ?>
    <head>
        <style>
            textarea{
                font-family: verdana;
                font-size:20px;
                color: #2799a0;
            }
            input[type="submit"] {
                width: 200px;
                height: 100px;
                font-size: 30px;
            }
        </style>
        <title>PHP Playground</title>
    </head>
    <form action="playground.php" method="POST">
        <textarea name="code" cols="100" rows="20"><?php echo $_POST['code']; ?></textarea><br><br>
        <input type="submit" value="Execute">
    </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:55:02.737

来自 php 文档：（由于 markdowm 限制而减去它们的格式）

[http://www.php.net/manual/en/function.eval.php](http://www.php.net/manual/en/function.eval.php)

> # 警告
> 
> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

如果您检查托管计划的 phpinfo()，您将看到该指令`eval`列在`disable_functions`指令下，这意味着它不能使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:43:21.480

他们可能`eval`在`php.ini`. 这很好，因为你永远不需要使用`eval()`......尤其是不要以非常危险的方式使用它。

如果你没有`@`在所有东西的前面压制它们，你会看到一个错误。

我建议使用[键盘](http://codepad.org/)作为 php 游乐场。

# ruby - 错误：使用本地 gem 执行 gem 时

> ID：14948913
> 
> 赞同：0
> 
> 时间：2013-02-19T02:40:16.503
> 
> 标签：ruby, gem, jekyll

我遇到了 [**这个问题**](https://stackoverflow.com/q/13684137/error-while-executing-gem) ，答案建议手动下载宝石，而不是让它们被`gem install`.

好吧，尽管使用了本地 gem 文件，但我收到了同样的错误。

```
$ git clone git://github.com/mojombo/jekyll.git

$ cd jekyll

$ gem build jekyll.gemspec
  Successfully built RubyGem
  Name: jekyll
  Version: 0.12.0
  File: jekyll-0.12.0.gem

$ gem install jekyll-0.12.0.gem
ERROR:  While executing gem ... (Zlib::GzipFile::Error)
    not in gzip format 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:58:41.730

我刚才能够成功构建和安装gem，也许这可能会对您有所帮助：[安装gem时出现此错误：“错误：执行gem时...（Zlib::GzipFile::Error）”](https://stackoverflow.com/questions/937608/i-get-this-error-when-installing-a-gem-error-while-executing-gem-zlibg)

问候，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-23T17:37:24.040

我通过更改我的 DNS 来解决此问题，如本问题所述

[Rubygems 被 Norton DNS 阻止](https://stackoverflow.com/questions/14951135/rubygems-blocked-by-norton-dns)

我运行了[namebench](http://code.google.com/p/namebench)并切换到了 OpenDNS-2。

# kinect - 如何在 Mac 上安装 OpenNI 2.1？

> ID：14948918
> 
> 赞同：5
> 
> 时间：2013-02-19T02:40:31.387
> 
> 标签：kinect, openni

我找不到这个版本的 OpenNI 的安装说明。我有一个适用于 Windows 和 Mac OSX 10.8 的 Kinect。

[它在OpenNI.org](http://www.openni.org/openni-sdk/)上列为可下载的，但该站点上没有安装说明（我可以找到），并且[OpenNI2 Github 页面](https://github.com/OpenNI/OpenNI2)没有 Mac 的说明。

所以，我尝试下载存储库并运行：

```
sudo ./install.sh 
```

与以前的版本一样。我没有得到任何回应，只是提示回来。当我跑

```
./Tools/NiViewer 
```

我明白了

```
openDevice failed:
DeviceOpen using default: no devices found

Press any key to continue . . . 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-29T21:11:42.807

您需要安装一个名为 libfreenect 的库以及 libusb。在你的 Mac 上最简单的方法是添加 brew 包管理器，然后从你的命令行拨号：#brew install libfreenect

下面的链接将指导您（它对我有用）[http://openkinect.org/wiki/Getting_Started#OS_X](http://openkinect.org/wiki/Getting_Started#OS_X)

# c++ - C++ 动态字符串数组

> ID：14948919
> 
> 赞同：0
> 
> 时间：2013-02-19T02:40:34.953
> 
> 标签：c++, arrays, string

我正在学习来自 Objective-C / C 的 C++，对于一个虚拟项目，我想从`/usr/share/dict/words`存储在 Mac OS X 机器上的文件中加载单词。

这个想法是加载文件并将每个单词放入一个数组中，所以我有一个`array`.`string`

但是我在使用我的数组使用动态内存时遇到问题 - 使用`new`和`delete`. 我在下面添加了一些代码，如果有人可以帮忙...

所以我得到一个内存错误：

```
word:: A
word:: a
word:: aa
word:: aal
definitions(2758) malloc: *** error for object 0x100103b90: incorrect 
checksum for freed object - object was 
probably modified after being freed.
*** set a breakpoint in malloc_error_break to debug 
```

加载词：

```
string* Definition::loadWords()
{
    int arrayLength = 0;

    arrayOfWords = new string[arrayLength];

    ifstream file;

    file.open("/usr/share/dict/words");

    if(file.is_open())
    {
        while(file.good()){
            string word;
            getline( file, word );
            this->addWord(word, arrayOfWords, &arrayLength);
        }

    }

    file.close();

    cout << endl << "There are " << arrayLength << " words" << endl;

    return arrayOfWords;
}; 
```

将单词添加到数组：

```
void Definition::addWord(string newWord, string currentArray[], int* arrayLength)
{
    cout << endl << "word:: " << newWord;

    string *placeholderArray = new string[*arrayLength + 1];
    placeholderArray[*arrayLength + 1] = newWord;

    for(int i = 0; i < *arrayLength; i++){
        placeholderArray[i] = currentArray[i];
    }

    (*arrayLength)++;

    currentArray = placeholderArray;

    delete [] placeholderArray;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T02:46:52.553

```
currentArray = placeholderArray; 
```

这将 placeholderArray 别名为 currentArray。所以，当你打电话...

```
delete [] placeholderArray; 
```

..您正在删除 currentArray 指向的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:47:03.107

在这里，您只是分配*指针*，而不是数组中的值：

```
currentArray = placeholderArray; 
```

在这里，您释放所述指针指向的空间：

```
delete [] placeholderArray; 
```

下次您从释放的内存空间中读取将导致未定义的行为。

* * *

不要在 C++ 中使用 C 样式的数组，而是使用`std::vector`及其`resize()`函数。更好的是，您的应用程序可以简单地`push_back()`在 each 上调用`newWord`，这将消除对您的`addWord()`函数的全部需求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T02:48:39.530

我能看到的第一件事是：

```
placeholderArray[*arrayLength + 1] = newWord; 
```

您要在数组末尾添加一个元素。数组从 0 开始索引。例如，如果数组长度为 5，则数组中的最后一个元素位于索引 4。所以该行应该是：

```
placeholderArray[*arrayLength] = newWord; 
```

然后，您将使用以下命令删除您的数组：

```
currentArray = placeholderArray;

delete [] placeholderArray; 
```

由于您只是将 currentArray 设置为指向 placeholderArray 然后将其删除。

通过引用传递也比通过指针传递要好得多。所以而不是这个：

```
void Definition::addWord(string newWord, string currentArray[], int* arrayLength) 
```

用这个：

```
void Definition::addWord(string newWord, string currentArray[], int& arrayLength) 
```

每次您想使用它时，您不必总是使用 * 来获取值。

这是使用参考的教程：http: [//www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/](http://www.learncpp.com/cpp-tutorial/73-passing-arguments-by-reference/)

还可以节省自己的时间和精力，并尽早学习使用向量和 stl 容器而不是数组。

这是使用向量的教程：http: [//www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c4027/C-Tutorial-A-Beginners-Guide-to-stdvector-Part-1.htm](http://www.codeguru.com/cpp/cpp/cpp_mfc/stl/article.php/c4027/C-Tutorial-A-Beginners-Guide-to-stdvector-Part-1.htm)

# asp.net-mvc - “无法解析 IProjectServices”与 MVC 中服务层的接口

> ID：14948928
> 
> 赞同：0
> 
> 时间：2013-02-19T02:41:39.180
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我不确定我这样做是否正确。我有一个名为 Project.Services 的项目，其中包含我的 MVC 应用程序中的控制器利用的一堆服务。

在将服务项目暴露给 Web 项目方面 - 我在我的 Web 项目中定义了一个名为“IProjectServices”的接口，其中包含一堆与我需要的对应的空白方法。

然后我尝试使用类似的语法在服务项目中实现这个接口

```
public class ProjectServices : IProjectServices 
```

我现在收到“无法解决 IProjectServices”错误 - 在我开始深入研究之前，我是否在这里正确使用了接口？

我在想 web 项目说“嘿，我需要某种服务，但我不想直接依赖于服务项目，所以我将创建一个界面”，然后服务项目说“嘿没问题我'会实现它，但也许另一个项目（如测试）将来会以不同的方式实现它，所以我们不会紧密耦合”。我想对了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T11:05:38.077

这是使用 Unity 的示例实现。我希望这有帮助。

从控制器向后工作...

MVC 项目：DashboardController.cs

```
public class DashboardController : Controller
{
    private readonly IDashboardService dashboardService;

    public DashboardController(IDashboardService dashboardService)
    {
        this.dashboardService = dashboardService;
    }

    [HttpGet]
    public ActionResult Index()
    {
        var model = this.dashboardService.BuildIndexViewModel();

        return this.View(model);
    }
} 
```

MVC 项目：Global.asax

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        // Standard MVC setup
        // ...

        // Application configuration 
        var container = new UnityContainer();
        new AppName.Services.UnityBootstrap().Configure(container);
    }
} 
```

服务项目：DashboardService.cs

```
public class DashboardService : IDashboardService
{
    // ctor
    // ...

    public IndexViewModel BuildIndexViewModel()
    {
        var currentPerformanceYear = this.repository.GetMaxPerformanceYear().PerformanceYearID;
        var staff = this.repository.GetStaffBySamAccountName(this.currentUser.Identity.Name);

        var model = new IndexViewModel
        {
            StaffName = staff.FullName,
            StaffImageUrl = staff.StaffImageUrl,
            // ...
        };

        return model;
    }
} 
```

服务项目：IDashboardService.cs

```
public interface IDashboardService
{
    IndexViewModel BuildIndexViewModel();
} 
```

服务项目：UnityBootstrap.cs

```
public class UnityBootstrap : IUnityBootstrap
{
    public IUnityContainer Configure(IUnityContainer container)
    {
        return container.RegisterType<IDashboardService, DashboardService>()
                        .RegisterType<ISharePointService, SharePointService>()
                        .RegisterType<IStaffService, StaffService>();
    }
} 
```

公司企业图书馆实用程序项目：IUnityBootstrap.cs

```
public interface IUnityBootstrap
{
    IUnityContainer Configure(IUnityContainer container);
} 
```

# redirect - 将一个模型重定向到另一个模型

> ID：14948931
> 
> 赞同：0
> 
> 时间：2013-02-19T02:41:55.073
> 
> 标签：redirect, yii

所以，我在 yii 中遇到问题，假设我创建了一个信息，当我点击保存时，我希望它重定向到另一个模型中的另一个表单。所以事情是这样的

```
public function actionCreate()
{
    $model=new SessionOne;
    $SessionTwo = new SessionTwo;

    // Uncomment the following line if AJAX validation is needed
    // $this->performAjaxValidation($model);

    if(isset($_POST['SessionOne']) && isset($_POST['SessionTwo']))
    {
        $model->attributes=$_POST['SessionOne'];
        if($model->save())
            $this->redirect(array('view','id'=>$model->session_one_id));
    }

    $this->render('create',array(
        'model'=>$model,
    ));
} 
```

那么我应该如何在 $this->redirect(array());

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T03:23:48.027

```
 if(isset($_POST['SessionOne']) && isset($_POST['SessionTwo']))
        {
            $model->attributes=$_POST['SessionOne'];
            if($model->save()) {
                $this->render('application.views.your_view', array('id'=>$model->session_one_id, 'model'=> $SessionTwo));
            } else {
                print_r($model->getErrors()); // show error
            }
        } else {
            $this->render('create',array(
               'model'=>$model,
        ));
    } 
```

# c - 如何在 C 中创建自己的字符串函数？

> ID：14948932
> 
> 赞同：0
> 
> 时间：2013-02-19T02:42:08.653
> 
> 标签：c, string, pointers

我正在尝试创建自己的字符串函数，但我似乎被困在了这一点上。下面是我到目前为止制作一个字符串并打印它并返回大小的内容。但是我需要创建一个函数，将指针传递给一个字符字符串以及一个字符，并返回该字符在字符串中出现的次数。我正在尝试从此函数调用函数 make_string 但无法使其工作。.h 文件仅具有预先列出的功能。对此的任何帮助将不胜感激。谢谢！

```
#include "readLineUtilities.h"

int make_string(char **line)
{
char *a,b;
int i,size=0;
a = (char *) malloc(sizeof(char));
b = getchar();
while( b != '\n' && size < MAX)
{       
    *(a+size) = b;  //remember at this point size = 0
    size++;
    b = getchar();
    a = realloc(a,size+1);
}
*(a+size) = '\0';  //end of string marker so no need to return the size directly
*line = a;
return size;    

}

int char_in_string (char *line, char c) {

make_string(*line);

}

void print_string(char *line, int size){
char *a;
int i;
a = line;
for (i=0;i<size;i++)
    printf("%c",*(a+i)); //no end of line
printf("\n");
}

int length_string(char *line){
int size = 0;
char *c,b;
c = line;
if ( c == NULL){ 
    printf("line is null\n");
    return size;
}
while (*(c + size) != '\0'){
    size++;
}
return size;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T03:06:48.263

像下面这样的东西会起作用。

```
int char_in_string (char *line, char c) {

    int len = make_string(&line);
    int i, cnt = 0;
    for ( i = 0; i < len; ++i )
    {
        if ( line[i] == c ) ++cnt;
    }
    return cnt;

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:50:55.573

通过查看此代码中出现的错误集合，很容易找出使用此代码的程序可能无法按预期运行的原因。

`a = (char *) malloc(sizeof(char));`// sizeof(char)*始终*为1，因为 sizeof(type) 告诉你 type 中有多少个字符。malloc 返回哪种类型？没有必要强制转换`void *`为`char *`，因为该转换是由 C 隐式提供的：`a = malloc(1);`如果您在转换时遇到错误消失，那么您就缺少了`#include <stdlib.h>`malloc/realloc 运行所必需的 a 。

`b = getchar();`// getchar 返回哪个类型？b的类型是什么？这些类型应该是相同的，但在您的示例中它们不是。getchar 返回一个 int，成功后将是一个 unsigned char 值。失败时，getchar 将返回一个负值，这与任何可能的成功值不同。我建议将 getchar() 的返回值存储到 int 中，并在继续之前验证它是否为正。否则，当 getchar() 返回与 '\n' 值不同的错误时，您的程序可能会挂起并占用资源。

`a = realloc(a,size+1);`// 如果 realloc 返回 NULL 会发生什么？您的程序泄漏了旧的分配。我建议将返回值分配给 a `char *temp`，并在覆盖 a 之前检查是否成功。如果你不修复这个，你的程序可能偶尔会出现段错误。

`int char_in_string (char *line, char c) { make_string(*line); }`// 你的`return`语句在哪里？make_string 需要 a `char **`，但表达式的`*line`计算结果为 a `char`。线的类型是什么？&线呢？这在使用时肯定会导致段错误。

我假设您在 make_string 中的字符串末尾放置了一个 '\0' ，以确定字符串的结束位置。我建议在你的 print_string 实现中停在 '\0' 处。如果您尝试使用未初始化的值，您将调用未定义的行为并且您的程序可能会崩溃。

# recursion - 如何模式匹配嵌套列表？

> ID：14948937
> 
> 赞同：0
> 
> 时间：2013-02-19T02:42:29.893
> 
> 标签：recursion, pattern-matching, smlnj, ml

在 sml/nj 中，我想创建一个函数，它接受一个非空列表的列表，并返回每个非空列表的第一个元素的列表。

```
fun get_first [] = []
 | get_first x::xs = (hd x)::get_first xs;
get_first: ('a list) list -> 'a list; 
```

但是，这不起作用...有谁知道出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T09:26:46.857

您忘记在列表模式周围加上括号`x::xs`，如下所示：

```
fun get_first [] = []
  | get_first (x::xs) = (hd x)::get_first xs 
```

它不起作用的原因有点“复杂”。在 SML 中，列表只是被定义为一种数据类型和一些语法糖。它基本上看起来像这样

```
datatype 'a list = nil | :: of ('a * 'a list) 
```

由于可以对数据类型构造函数进行模式匹配，因此可以对`nil`（通常写为 []）和`::`.
但是，如果您不在它周围放置括号，那么它将被解释为该函数是模式匹配 3 个咖喱参数。这可能像这样更好地可视化

```
 | get_first (x) (::) (xs) = .... 
```

另请注意，您可以使用 map 函数轻松实现这一点

```
fun get_first xs = map hd xs 
```

# php - 社交 Android 应用程序的通知系统 - 推送与轮询以及如何使服务器“推送”

> ID：14948946
> 
> 赞同：3
> 
> 时间：2013-02-19T02:43:21.457
> 
> 标签：php, android, push-notification, server-side, google-cloud-messaging

对于那些只想切入正题并知道我在问什么的人。我的问题在下面的段落中用编号和粗体表示。

我有一段时间试图弄清楚**1.) 如何为 Android 社​​交网络应用程序实施适当的通知系统？**到目前为止，我收集到的只有 2 个选择，轮询与推送，推送比轮询更好，因为它可以节省电池，推荐的推送通知方式是通过 Google Cloud Messaging(GCM)，但我没有得到的是 **2 .)是什么让我的服务器推送？**和/或**3.) 当有新数据可用时，如何设置我的服务器端推送？** 进一步的研究表明，Facebook 只能实现其近乎实时的通知系统，因为他们拥有某种称为 thrift 的服务器端 api/库/技术或类似的东西，可以检测谁在线和谁不在线（不确定为什么这很重要然而） 。**4.) 是否有人对我尝试实施类似于 Facebook 的社交通知系统有一些建议？**

其他重要信息：

*   我目前使用 Codeigniter Rest 服务器作为 api(PHP)

*   我更喜欢可以使用我现有的 API 实现的 php 解决方案，除非有另一种语言（Java、Ruby、Javascript）的解决方案可以独立实现（也就是说，我仍然可以将现有的 api 用于除通知之外的所有其他内容）

*   我不是在找人来解释如何使用 GCM 或指导我学习教程。我已经完成了研究并获得了 GCM 推送通知的几个“示例”并运行，但到目前为止我发现的教程都没有告诉我如何让我的服务器自行推送。

*   我需要向用户发出的通知类型包括新朋友请求、来自其他用户的新私人消息、对收到通知的用户发布的内容的新评论、对用户评论过的内容的新评论（类似于 fb notify 的方式）您是否将评论添加到已评论的状态中）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T03:38:24.687

对于您描述的任务（朋友请求、私人消息、通知等），GCM 绝对是要走的路。当事件发生时，您的服务器将发送 GCM 消息，并由 Google 管理消息的发送 - 您不必担心手机处于开机状态或类似情况。

听起来您已经接近将所有这些放在一起，但是缺少一个部分 - GCM 消息的实际发送。至少根据我的经验，没有自动推送的概念。每次推送都基于发生的某些操作，例如发送消息或新朋友请求。例如，如果您已经设置了代码来处理服务器上的好友请求并更新数据库，您只需要添加一些代码来查找被请求者的 GCM ID 并发送 GCM 消息告诉您的客户端已收到好友请求。在 Android 客户端，您将拥有一个扩展 GCMBaseIntentService 的类，该类将接收此消息并在收到好友请求时运行您想要运行的任何客户端代码（发布本地通知、更新 ui 等）

# javascript - javascript - 为什么不运行 innerHTML 替换？

> ID：14948949
> 
> 赞同：0
> 
> 时间：2013-02-19T02:43:31.663
> 
> 标签：javascript, web

```
<!DOCTYPE HTML>
<html>
<head>
<script>
document.write("TEST1")
document.getElementById("demo").innerHTML="TEST2"
document.write("TEST3")
</script>
</head>

<body>
<p id="demo">TO_BE_REPLACED</p>
</body>
</html> 
```

这是输出：TEST1

```
TO_BE_REPLACED 
```

似乎 javascript 执行停止在`document.getElementById("demo").innerHTML="TEST2"`. 为什么不执行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:47:29.260

脚本运行时，`<p id="demo">` *还不存在*。因此，`document.getElementById('demo')`正在返回`null`，然后在您尝试分配时触发错误`null.innerHTML = "TEST2"`

此错误会停止所有执行，因此您永远无法看到最终的`TEST3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T02:58:13.487

您需要将脚本包含在一个函数中，该函数将在窗口加载时调用（使用“window.onload”事件）。

```
<!DOCTYPE HTML>
<html>
<head>
<script>
    function replaceDemoText()
    {
        document.getElementById("demo").innerHTML="TEST2";
    }
    window.onload = replaceDemoText;
</script>
</head>

<body>
<p id="demo">TO_BE_REPLACED</p>
</body>
</html> 
```

# java - ImageIO.read 正在终止程序而没有错误

> ID：14948952
> 
> 赞同：1
> 
> 时间：2013-02-19T02:43:37.680
> 
> 标签：java, swing, user-interface, jpanel, imageicon

大声笑，我刚才完全失败了。删除某些内容后上传代码。

无论如何，我使用 ImageIcons 加载了背景，但我正在尝试使用 BufferedImage，因为这就是我被告知您必须这样做才能在其上绘制更多图像的方式。

BufferedImage 不返回错误，但不绘制任何内容。

代码如下：

```
import java.awt.*;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.*;

public class Client {
    static JFrame client = new JFrame();

    public static void drawBackground() throws IOException {
        BufferedImage background = ImageIO.read(new File("Resources/Images/Background.png"));
        client.setTitle("Keldagrim: The lost Empire");
        client.setSize(1280, 720);
        client.setDefaultCloseOperation(client.EXIT_ON_CLOSE);
        Container pane = client.getContentPane();
        BackgroundPanel backgroundPanel = new BackgroundPanel(background);
        pane.add(backgroundPanel);
        client.pack();
        client.setVisible(true);
    }

    public static void drawLogin() {
        ImagePanel loginBox = new ImagePanel(new ImageIcon("Resources/Images/LoginBox.png").getImage());
        client.add(loginBox);
        client.repaint();
        System.out.println("Painted");
    }

    public static void main(String[] args) {
        try {
            drawBackground();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        drawLogin();
    }

}

    class ImagePanel extends JPanel {

    private Image img;

    public ImagePanel(String img) {
        this(new ImageIcon(img).getImage());
    }

    public ImagePanel(Image img) {
        this.img = img;
        Dimension size = new Dimension(img.getWidth(null), img.getHeight(null));
        setPreferredSize(size);
        setMinimumSize(size);
        setMaximumSize(size);
        setSize(size);
        setLayout(null);
    }

    public void paintComponent(Graphics g) {
        g.drawImage(img, 0, 0, null);
    }

}

class BackgroundPanel extends JPanel {
    BufferedImage backgroundImage;
    public BackgroundPanel(BufferedImage image){
        backgroundImage = image;
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(backgroundImage, null, 50,50);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:01:20.100

有很多事情不适合你...

1.  您`drawClient`实际上并没有在任何地方调用，因此永远不会创建框架。我实际上会摆脱这种方法，因为它没有增加任何价值，实际上是混淆了问题。
2.  您正在使用对背景图像的静态引用，这意味着在整个应用程序中只能使用一个图像，无论您创建了多少“客户端”面板。然后，无论如何您将该引用传递给面板，这是一种浪费。
3.  虽然您至少应该真正记录错误（并显示错误消息），但您应该将堆栈跟踪转储到控制台，这将使您的生活更轻松。
4.  `setVisible`在你完成框架设置后打电话，如果你不这样做会发生有趣的事情

尝试使用类似...

```
public class Client extends JPanel {

    private Image backgroundImage;

    public Client(Image backgroundImage) {
        this.backgroundImage = backgroundImage;
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (Exception ex) {
                }

                BufferedImage background = null;
                try {
                    background = ImageIO.read(new File("Resources/Images/Background.png"));
                    JFrame client = new JFrame();
                    client.setTitle("Keldagrim: The lost Empire");
                    client.setSize(1280, 720);
                    client.setDefaultCloseOperation(client.EXIT_ON_CLOSE);
                    client.setContentPane(new Client(background));
                    client.setVisible(true);
                } catch (IOException e) {
                    e.printStackTrace();
                }

            }
        });
    }
} 
```

另外，作为旁注，您实际上并没有画背景，但我怀疑这是另一个问题；）

试着看看

*   [如何使用 Swing 创建 UI](http://docs.oracle.com/javase/tutorial/uiswing/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:55:29.660

尝试这个：

```
if (backgroundImage != null) {
         Client c =   new Client(backgroundImage);
         c.drawClient();
} else {
            System.out.println("Error: No background Image.");
} 
```

# vim - 如何为 vim 的命令创建一个 vim :map 等效项（例如：2<<）？

> ID：14948953
> 
> 赞同：0
> 
> 时间：2013-02-19T02:43:39.953
> 
> 标签：vim

我倾向于使用 vim 很多。Vim 有很多命令，起初并不容易记住。`:map`显示当前映射列表。我想为正常模式命令获得相同的东西（见下文示例）

`:cheatsheet`会显示：

```
-------- vim-commands ----------------------------------------------------------
// BASIC CONTROL
hjkl        - move
i           - insert mode
R           - replace mode
o           - insert new line below
O           - insert new line above

// BASIC MOTIONS
0           - start of line
^           - start of text on line
$           - end of line

// WORD MOTIONS
w           - forwards a word
W           - forwards MORE
... 
```

**a) vim 命令是否有类似的东西（例如： 2<< 向左缩进 2 行）？**

**b）如果是，如何定制这个输出（比如只显示他/她学过的命令）？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T06:12:17.043

您正在寻找`:viusage`但无法定制。您需要为此提出自己的解决方案。

***编辑***

请注意，还有`:exusage`用于列出 Ex 命令。

当我开始时，我养成了在学习过程中[向文件添加新技巧](https://github.com/romainl/dotvim/wiki/Notes)的习惯。就目前而言，这个习惯的目的不是创建一个备忘单，而是将我学到的东西形式化。帮助我记住所有这些。随着时间的推移，编辑这个文件的需要慢慢消失了，但我不时地不断添加东西。但是，像您问题中的命令这样的命令实际上并不需要放在备忘单上，因为您每天要执行数十次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T08:17:56.523

我所做的是创建一个备忘单作为 Vim 帮助文件（例如`~/.vim/doc/cheat.txt`）。你可以使用 Vim 帮助标记，在 之后`:helptags ~/.vim/doc`，它也被索引并通过`:help`. 您可以使用从内置帮助中复制的片段预填充它。随着时间的推移，添加新提示并删除您已记住的内容。

# c++ - C ++类型将基础对象转换为派生对象

> ID：14948957
> 
> 赞同：4
> 
> 时间：2013-02-19T02:43:52.377
> 
> 标签：c++

所以我有一个动态分配的基类数组。我在数组中存储了它的派生类的一些对象。

学生（基）类及其派生类都有一个`getInfo()`函数，显然派生类已经覆盖了那个基类`getInfo()`。目标是使用`getinfo`基类中的函数，然后将派生类的两个对象键入类，回到派生类并使用覆盖的`getinfo()`.

直到“打破”的一切都完美无缺。它正在弄清楚如何将对象类型转换回让我丧命的派生类。

我已经确定了一些可能的问题：

1）我没有正确动态分配。很有可能，因为我讨厌指针并且非常讨厌它们。

2）我不知道我在实际类型转换方面做了什么。

有几点需要注意：

1) 基类 getinfo 不是虚拟的

2）我不允许修改基类。

所以，混乱代码的救星。你说什么？你能帮助这个可怜的学生吗？

编辑！！！

更新代码，现在得到“Static_cast from Student ** to Gradstudent * is not allowed”

```
#include <iostream>

#include "GradStudent.h"
#include "UndergradStudent.h"

int main()
{
    int arraySize = 3;
    Student* classRoom[arraySize];

    GradStudent gst1("Ta", "Da", 4444, 'A', "Death");
    cout << gst1;

    UndergradStudent ust1("Bluh", "Bluh", 2222, 1);
    cout << ust1;

    Student bst1( "Blah", "Blah", 1111 );

    classRoom[0] = &bst1;
    classRoom[1] = &gst1;
    classRoom[2] = &ust1;

    for (int x = 0; x < arraySize; x++)
    {
        cout << classRoom[x]->getInfo();
        cout << endl;
    }

    cout << "TEST" << endl;

    GradStudent* gStudent =  static_cast<GradStudent*>(&classRoom[2]);
    cout << gStudent->getInfo();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T02:46:26.320

`dynamic_cast`返回转换后的指针，它不修改参数本身。

您需要执行以下操作。

```
// removed the & since the elements are now pointers
GradStudent* gStudent =  dynamic_cast<GradStudent*>(classRoom[1]); 
cout << gStudent->getInfo(); 
```

警告 - 对于指针，如果它无法转换`dynamic_cast`将返回`nullptr`，您需要检查这一点以防止崩溃。

编辑：代码中的主要[对象切片](http://en.wikipedia.org/wiki/Object_slicing)错误 - #1 几乎是正确的

```
int arraySize = 3;
Student *classRoom;
classRoom = new Student[arraySize];

GradStudent gst1("Ta", "Da", 4444, 'A', "Death");
...
classRoom[0] = gst1; 
```

应该

```
int arraySize = 3;
Student **classRoom;
//      ^
classRoom = new Student*[arraySize];
//                     ^
GradStudent gst1("Ta", "Da", 4444, 'A', "Death");

classRoom[0] = &gst1;
//             ^ 
```

要不就

```
Student* classRoom[3];

GradStudent gst1("Ta", "Da", 4444, 'A', "Death");
...
classRoom[0] = gst1; 
```

没有这个，属于派生类的所有数据都会丢失，只存储基类数据，这称为**对象切片**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T02:54:10.807

为了使多态性起作用，您需要使用指向对象的指针。当你这样做

```
classRoom[1] = gst1; 
```

C++ 将 GradStudent 对象的 Student 部分存储在 classRoom[1] 中。

# java - JFrame 未正确加载

> ID：14948962
> 
> 赞同：2
> 
> 时间：2013-02-19T02:43:59.173
> 
> 标签：java, swing, sockets, jframe, event-dispatch-thread

我正在编写一个网络游戏客户端，并且在单击按钮时在帧之间切换时遇到问题。

我已经在不同的框架中编写了客户端的每个页面，当从客户端的主页单击菜单按钮时，应该显示这些框架。

以下是我所做的代码..

```
public class homePage extends JFrame{
       public homePage () {
       initComponents();
      }

      private void initComponents(){
      // the frame and butttons are here....

      GameListBtn.addActionListener(new ActionListener() {
        public void actionPerformed(ActionEvent evt) {
            this.setVisible(false); // to hide the current home page
            new GameList().start(); // to start new frame called GameList
            // basically the same thing as following code
            // GameList gl = new GameList();
            // gl.setVisible (true);
            // gl.run();
        }
      }
} 
```

* * *

```
 public class GameList extends JFrame{
       public GameList(){
       //Everything about the frame is here
       }

       // this method is for connection
       public void run(){
             try{
              // open socket and initialize input streams, output streams here

             while (true){
                     //process data to and from server
             }
             }// end of try
       } // end of run

       // this method is to display GameList frame and it's connection
       public static void start(){
         GameList frame = new GameList();
         frame.setVisible(true);
         frame.run();
       }

     } 
```

* * *

下面这个类只是运行 GameList 框架，它是从一个 main 方法连接的

```
 public static void main(String[] args) {
    new GameList().start();
    // basically the same thing as following code
    // GameList gl = new GameList();
    // gl.setVisible (true);
    // gl.run();
    } 
```

* * *

当我从 main 方法运行它时，我的 GameList 框架可以正常工作。显示GUI，连接建立，数据传输成功。我基本上想要做的是从主页的 ActionListener 调用新的 GameList().start() 方法，因为我可以从 main 方法调用，显示 GameList 并隐藏主页。

当我按照第一个代码中所示执行此操作时，GameList 的 GUI 没有加载（只是变黑），但建立了连接并且数据传输成功。GUI 仅在连接终止时显示。我怀疑原因是 GameList 的 run() 方法中的 while 循环？

但同样，当我从 GameList 类的 main 运行它时，完全相同的东西就像一个魅力。谁能告诉我为什么当我从主页调用它时没有加载 gui，尽管我所做的一切都完全相同。

对不起，如果我的问题听起来很愚蠢，但任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T02:54:30.763

当您从 调用`GameList.start()`时`ActionListener`，您处于[Swing EDT](http://en.wikipedia.org/wiki/Event_dispatching_thread)中，即 Swing 线程处理每个事件，如鼠标或键盘输入，以及组件重绘。当您在 Swing EDT 中执行长流程时，您实际上是在阻塞线程并阻止处理任何其他事件，其中包括重绘事件。这就是为什么您的框架是黑色的并且 GUI 似乎没有加载的原因。当您从 main 方法调用它时没有发生这种情况，因为您不在 EDT 线程中，而是在应用程序的主线程中。

为了解决这个问题，你应该从另一个线程调用 GameList 的 run() 方法，使用`Thread.start()`和`Runnable`.

一个好的经验法则是，除了 GUI 的东西和一些标志之外，您不应该在事件中添加任何东西，并且永远不要在其中进行任何计算，以保持您的应用程序响应。

另一个规则是，为了避免一般的问题，你应该把你所有的 GUI 东西（包括你的框架的创建）放在线程 EDT 中。如果您需要从另一个线程执行某些操作（如果您没有响应事件或您在 main 方法中），请使用`SwingUtilities.invokeLater`.

# android - 显示后更改 ActionBarSherlock 背景颜色

> ID：14948964
> 
> 赞同：0
> 
> 时间：2013-02-19T02:44:17.930
> 
> 标签：android, android-actionbar, actionbarsherlock

当我从页面 1 导航[到](http://actionbarsherlock.com/)`ViewPager`.

我已经尝试过`setTheme(R.style...)`，但正如它在文档上所说的那样，它应该在绘制视图之前被调用。事实上，我根本没有得到任何改变。

我已经使用[它](http://jgilfelt.github.com/android-actionbarstylegenerator/)创建了主题，我想在实体和透明操作栏样式之间切换。

在`setTheme(int)`我没有使用`int`样式的 上，我创建了一个新主题，它只用透明可绘制对象覆盖`android:actionBarStyle`and 。`actionBarStyle`

有没有办法即时更改颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:41:29.650

只需将您的背景创建为可绘制的 xml（或者如果您想要简单的颜色，它可以是一种颜色）。然后使用`setBackgroundDrawable(drawable)`方法。

看这里：[如何制作具有 YouTube 应用程序背景的 ActionBar](https://stackoverflow.com/questions/12409081/how-do-i-make-an-actionbar-with-a-background-like-the-youtube-app)

在这里：[ActionBar setBackgroundDrawable() 从 Thread/Handler 清空背景](https://stackoverflow.com/questions/11002691/actionbar-setbackgrounddrawable-nulling-background-from-thread-handler)

# html - Margin 0 auto 在我的情况下不起作用

> ID：14948968
> 
> 赞同：0
> 
> 时间：2013-02-19T02:45:00.690
> 
> 标签：html, css, margin

这是我的代码的一部分：[jsfiddle](http://jsfiddle.net/sZNJG/3/)

我试图找到一种解决方案，将`.person`div 置于 div 内部`.team`。

我花了大约一个小时来弄清楚我做错了什么，但没有成功。

`.person`即使页面宽度发生变化，是否可以使div 保持居中？就我而言，我有一个 static `width: 768px`，但即使如此，我也无法将 div 居中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:13:13.657

通过将 person 类设置为`display:inline-block`而不是`float:left`.
然后，您可以申请`text-align:center`团队课程。
这应该达到预期的结果。

```
.team {
    text-align: center;
    border: 1px solid green;
    overflow: hidden;
    width: 768px;
    margin: 0 auto;
    margin-top: 30px;
}

.person {
    border:1px solid red;
    text-align:left;
    width: 200px;
    display: inline-block;

    &:nth-child(5n+1) {
        margin-left: 0px;
    } 
```

我更改边框颜色仅用于测试目的。

在这里小提琴 - [http://jsfiddle.net/sZNJG/7/](http://jsfiddle.net/sZNJG/7/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T03:06:51.937

尝试添加`text-align: center;`类`team`。请参阅[此处的 jsfiddle 示例](http://jsfiddle.net/GA66d/1/)。

# java - 为什么 ArrayList 从多个线程修改时不会抛出 ConcurrentModificationException？

> ID：14948971
> 
> 赞同：3
> 
> 时间：2013-02-19T02:45:28.897
> 
> 标签：java, multithreading, arraylist, thread-safety

ConcurrentModificationException ：当这种修改是不允许的时，检测到对象的并发修改的方法可能会抛出此异常。

以上是来自 javadoc 的 ConcurrentModificationException 定义。

所以我尝试测试下面的代码：

```
final List<String> tickets = new ArrayList<String>(100000);
for (int i = 0; i < 100000; i++) {
    tickets.add("ticket NO," + i);
}
for (int i = 0; i < 10; i++) {
    Thread salethread = new Thread() {
        public void run() {
            while (tickets.size() > 0) {
                tickets.remove(0);
                System.out.println(Thread.currentThread().getId()+"Remove 0");
            }
        }
    };
    salethread.start();
} 
```

代码很简单。10 个线程从 arraylist 对象中删除元素。可以确定多个线程访问一个对象。但它运行正常。不会抛出异常。为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T02:50:52.357

为了您的利益，我引用了[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)Javadoc 的大部分内容。突出显示解释您所看到的行为的相关部分。

> **请注意，此实现不同步。如果多个线程同时访问一个 ArrayList 实例，并且至少有一个线程在结构上修改了列表，则必须在外部进行同步**。（结构修改是添加或删除一个或多个元素，或显式调整后备数组大小的任何操作；仅设置元素的值不是结构修改。）这通常通过同步一些自然封装的对象来完成列表。如果不存在这样的对象，则应使用 Collections.synchronizedList 方法“包装”该列表。这最好在创建时完成，以防止对列表的意外不同步访问：
> 
> 列表列表 = Collections.synchronizedList(new ArrayList(...));
> 
> 此类的 iterator 和 listIterator 方法返回的迭代器是快速失败的：如果在创建迭代器后的任何时间对列表进行结构修改，除了通过迭代器自己的 remove 或 add 方法之外的任何方式，迭代器将抛出 ConcurrentModificationException。因此，面对并发修改，迭代器快速而干净地失败，而不是在未来不确定的时间冒任意的、非确定性的行为。
> 
> **请注意，不能保证迭代器的快速失败行为，因为一般来说，在存在不同步的并发修改的情况下，不可能做出任何硬保证**。快速失败的迭代器会尽最大努力抛出 ConcurrentModificationException。因此，编写一个依赖于这个异常的正确性的程序是错误的：迭代器的快速失败行为应该只用于检测错误。

***如果您在通过其迭代器访问列表时***对列表进行结构性修改，ArrayLists 通常会引发并发修改异常（但这也不是绝对的保证）。请注意，在您的示例中，您直接从列表中删除元素，并且您没有使用迭代器。

如果您喜欢它，您还可以浏览 的实现[`ArrayList.remove`](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/ArrayList.java#ArrayList.remove%28int%29)，以更好地了解它的工作原理。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T02:53:57.347

在这种情况下，我认为“并发”并不意味着与线程相关，或者至少并不一定意味着那样。`ConcurrentModificationException`s 通常源于在迭代过程中修改集合。

```
List<String> list = new ArrayList<String>();
for(String s : list)
{
     //modifying list results in ConcurrentModificationException
     list.add("don't do this");     

} 
```

请注意，`Iterator<>`该类有一些方法可以规避这一点：

```
for(Iterator it = list.iterator(); it.hasNext())
{
     //no ConcurrentModificationException
     it.remove(); 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T02:53:17.000

您没有收到 a 的原因是`ConcurrentModificationException`没有`ArrayList.remove`抛出一个。您可能可以通过启动一个遍历数组的附加线程来获得一个：

```
final List<String> tickets = new ArrayList<String>(100000);
for (int i = 0; i < 100000; i++) {
    tickets.add("ticket NO," + i);
}
for (int i = 0; i < 10; i++) {
    Thread salethread = new Thread() {
        public void run() {
            while (tickets.size() > 0) {
                tickets.remove(0);
                System.out.println(Thread.currentThread().getId()+"Remove 0");
            }
        }
    };
    salethread.start();
}
new Thread() {
    public void run() {
        int totalLength = 0;
        for (String s : tickets) {
            totalLength += s.length();
        }
    }
}.start(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T02:59:06.010

因为您没有使用迭代器，所以没有机会`ConcurrentModificationException`被抛出。

调用`remove(0)`只会删除第一个元素。如果另一个线程在执行完成之前删除 0，它可能不是调用者想要的*相同元素。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T03:26:21.047

> 但它运行正常。不会抛出异常。为什么？

仅仅是因为允许同时进行修改。

异常的描述是这样说的：

> ***“当这种修改是不允许**的时，检测到对象的并发修改的方法可能会抛出此异常。 ”*

明确的暗示是（或可能是）*允许*的并发修改。事实上，对于标准的 Java 非并发集合类，并发修改是允许的……前提是它们不会在迭代期间发生。

* * *

这背后的原因是，对于非并发集合，在迭代时修改从根本上是不安全和不可预测的。即使您要正确同步（这并不容易¹），结果仍然是不可预测的。并发修改的“快速失败”检查包含在常规集合类中，因为这是使用 Java 1.1 集合类的多线程应用程序中 Heisenbugs 的常见来源。

^(1- 例如，“synchronizedXxx”包装类不会，也不能与迭代器同步。问题是迭代涉及对 and 的交替调用`next()`，`hasNext()`并且在排除其他线程的同时进行一对方法调用的唯一方法是使用外部同步。包装器方法在 Java 中不实用。)

# android - Android SharedPreferences

> ID：14948974
> 
> 赞同：0
> 
> 时间：2013-02-19T02:45:36.697
> 
> 标签：android, sharedpreferences

我不确定为什么我的代码不起作用，按照 android 开发人员指南这应该可以工作。我认为这是因为我没有创建首选项文件，我不知道该怎么做。有人可以看看我是否正确地写了所有东西吗？

```
public static final String PREFS_NAME = "TestPrefs";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

public void Save(View v){
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    final EditText s = (EditText) findViewById(R.id.editText1);
    settings.edit().putString("TBox1", s.getText().toString());
    settings.edit().commit();
}

public void Open(View v){
    SharedPreferences settings = getSharedPreferences(PREFS_NAME, MODE_PRIVATE);
    final EditText s = (EditText) findViewById(R.id.editText1);
    String newS = settings.getString("TBox1", "");
    s.setText(newS);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:46:45.960

你必须`commit()`在同一个编辑器上。像您所做的那样提交另一个对象意味着前一个对象`putString()`会丢失。这意味着改变

```
settings.edit().putString("TBox1", s.getText().toString());
settings.edit().commit(); 
```

到

```
settings.edit().putString("TBox1", s.getText().toString()).commit(); 
```

当然，如果您要编辑的东西不止一件，您可以保留对您的编辑器的引用：

例如：

```
SharedPreferences.Editor editor = settings.edit();
editor.putString("key1", "value1");
editor.putString("key2", "value2");
editor.commit(); 
```

# xcode - xcode 是否编译注释掉的行？

> ID：14948976
> 
> 赞同：1
> 
> 时间：2013-02-19T02:46:00.150
> 
> 标签：xcode, compiler-construction, build, io

简单的问题，编译器会忽略任何注释掉的内容吗？

任何带有 // 或 /* 的东西

我相信是这样，但想仔细检查一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T02:46:47.920

没有永不。XCode 不编译注释行。

# hadoop - sqoop 导入成功但配置单元显示表看不到表

> ID：14948978
> 
> 赞同：0
> 
> 时间：2013-02-19T02:46:04.213
> 
> 标签：hadoop, import, hive, sqoop

环境：sqoop-1.4.2 hadoop-1.0.4 hive-0.9.0

import cmd: ./bin/sqoop import --connect jdbc:mysql://localhost/metrics --username root -password 1023 --table 访问 --hive-import --create-hive-table --hive-table hivevisit2 --hive-home /home/hadoop/hive/

hdfs 中存在文件：找到 1 项 drwxr-xr-x - hadoop supergroup 0 2013-02-19 10:36 /user/hive/warehouse/hivevisit2

但在 hive 中显示表，表 hivevisit2 不存在

好像exe cmd "sqoop -hive-import" 时会自动创建表，但是为什么看不到表

如果我重新执行 cmd "./bin/sqoop import --connect jdbc:mysql://localhost/metrics --username root -password 1023 --table 访问 --hive-import --create-hive-table -- hive-table hivevisit2 --hive-home /home/hadoop/hive/"

错误显示“元数据错误：AlreadyExistsException（消息：表 hivevisit2 已存在）”

谁能告诉我解决方案如何在配置单元导入期间自动创建表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-19T22:12:59.227

尝试从同一位置运行 sqoop 命令和 hive 命令。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T02:20:50.983

您使用什么作为配置单元数据存储后端？默认情况下，Hive 将在当前工作目录中为其元存储创建嵌入式 derby 数据存储。因此，当从不同目录运行 Hive 和 Sqoop 时，您可能会得到不同的表空间。我建议将 Hive 配置为使用一些数据库支持的数据存储（MySQL、PostgreSQL）并配置 Hive 和 Sqoop 以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-08T09:46:51.683

1.  首先，您必须创建一个类似*/user/hive/warehouse/mySchema.db*的模式。它只是一个名为**mySchema.db的目录**
2.  然后您可以使用以下命令在架构下导入所需的表：

    sqoop import --connect jdbc:mysql://localhost/metrics --username root --password 1023 --table 访问
    --hive-import --create-hive-table --hive-table **mySchema** .hivevisit2

# objective-c - Cocos2d如何播放一秒哔声

> ID：14948979
> 
> 赞同：2
> 
> 时间：2013-02-19T02:46:10.020
> 
> 标签：objective-c, cocos2d-iphone

我的倒计时使用`InGameTime`每帧更新的值每秒更新一次。

这在视觉上效果很好，因为我可以将游戏时间四舍五入到最接近的整数。

...但是如何让我的应用在每秒后播放一次哔声？

下面是我的代码：

```
-(void) setTimer:(ccTime) delta{

    int timeInSeconds = (int)appDelegate.InGameTime;//Game time E.G: 8.2332432
    /*

            Stuff is here to display the tempTime

    */

    //The below effect plays the sound every frame, 
    //is there an equation that I can apply to appDelegate.InGameTime 
    //that will play it once a second?

    [[SimpleAudioEngine sharedEngine] playEffect:@"tick.mp3"];

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T03:41:18.603

```
-(void) setTimer:(ccTime) delta{

    static float timeSinceLastTick = 0.f;

    int timeInSeconds = (int)appDelegate.InGameTime;//Game time E.G: 8.2332432
    /*

        Stuff is here to display the tempTime

    */

    // if your delta is small and relatively constant, this 
    // should be real close to what you want.
    // other ways exist

    timeSinceLastTick += delta;
    if (timeSinceLastTick > 1.0f) {
       timeSinceLastTick=0.f;
       [[SimpleAudioEngine sharedEngine] playEffect:@"tick.mp3"];
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:39:54.493

您可以做到这一点的一种方法是跟踪方法调用之间的时间量并将其与 InGameTime 相关联。

例如

```
- (void)setTimer:(ccTime) delta
{

    int timeInSeconds = (int)appDelegate.InGameTime;//Game time E.G: 8.2332432
    /*

        Stuff is here to display the tempTime

    */

    //The below effect plays the sound every frame, 
    //is there an equation that I can apply to appDelegate.InGameTime 
    //that will play it once a second?

    // beepTime is a float instance variable at first initialized to appDelegate.InGameTime - floor(appDelegate.InGameTime)
    beepTime += delta;

    if (beepTime >= 1.0f) // where 1.0f is the frequency of the beep
    {
        [[SimpleAudioEngine sharedEngine] playEffect:@"tick.mp3"];
        beepTime = appDelegate.InGameTime - floor(appDelegate.InGameTime); // should return a decimal from 0.0f to 1.0f
    }
} 
```

我相信这应该有效。让我知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T10:36:16.990

为什么不使用调度方法？

[http://www.cocos2d-iphone.org/api-ref/latest-stable/interface_c_c_node.html#a7e0c230d398bba56d690e025544cb745](http://www.cocos2d-iphone.org/api-ref/latest-stable/interface_c_c_node.html#a7e0c230d398bba56d690e025544cb745)

您只需指定间隔，然后将要触发的代码放在块内

```
//call startBeep function every 1 second
[self schedule:@selector(startBeep:) interval:1.0f];

- (void)startBeep:(ccTime) delta
{
[[SimpleAudioEngine sharedEngine] playEffect:@"tick.mp3"];
} 
```

# weblogic11g - JNDI 树中的 Weblogic WorkManager

> ID：14948981
> 
> 赞同：1
> 
> 时间：2013-02-19T02:46:22.863
> 
> 标签：weblogic11g, workmanagers

为什么针对应用服务器的 WorkManager 不是应用服务器 JNDI 树的一部分？我在这方面花了很多时间。还是我错过了什么？然后可以使用 java:comp/env/WorkManagerName 获取它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-25T19:15:54.770

我不完全理解您问题中的最后一句话，但我猜您是在问如何在 java:comp/env/.. 中查找工作管理器？

您需要首先在您的部署描述符中配置您的工作管理器，例如 web.xml、ejb-jar.xml，如下所示

```
<resource-ref>
   <res-ref-name>wm/MyWorkManager</res-ref-name>
   <res-type>commonj.work.WorkManager</res-type>
   <res-auth>Container</res-auth>
   <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref> 
```

然后您将 JNDI 查找为 java:comp/env/wm/MyWorkManager

# jquery - 将鼠标悬停在引导按钮上时不要更改 CSS

> ID：14948984
> 
> 赞同：7
> 
> 时间：2013-02-19T02:46:27.203
> 
> 标签：jquery, css, twitter-bootstrap

我正在使用`btn-group`这样的：http: [//jsfiddle.net/dy9uH/34/](http://jsfiddle.net/dy9uH/34/)

我不希望我的用户认为左侧的按钮是可点击的，但不喜欢我添加`disabled`类时按钮的外观。当用户将鼠标悬停在左按钮上时，如何确保没有任何反应？我不想编辑 bootstrap.css，因为我还有其他按钮可以使用`.btn-group`我需要像往常一样运行的类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T03:19:25.013

我认为唯一的解决方案是用您的自定义更改覆盖引导样式。

1.  向`btn`ex 添加一个自定义类：`special`
2.  在自定义 css 文件中定义覆盖样式如下
3.  在您的页面中包含自定义文件

CSS：

```
.btn.special {
    background-color: #F5F5F5;
    color: #333333;
    background-image: linear-gradient(to bottom, #FFFFFF, #E6E6E6);
    text-decoration: none;
    background-position: 0;
    transition: none;
} 
```

演示：[小提琴](http://jsfiddle.net/dy9uH/35/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T03:32:54.177

我将假设您也想使用禁用，因此该按钮实际上是禁用的。您将需要覆盖一些引导程序

我会做以下事情

HTML

```
<div class="btn-group">
  <button class="btn special" disabled>I'm Special</button>
  <button class="btn dropdown-toggle" data-toggle="dropdown">
    <span class="caret"></span>
  </button>
  <ul class="dropdown-menu">
    <!-- dropdown menu links -->
  </ul>
</div> 
```

CSS

```
.special,
.special.disabled,
.special[disabled] 
.special.disabled:hover,
.special[disabled]:hover,
.special.disabled:focus,
.special[disabled]:focus {
  display: inline-block;
  *display: inline;
  padding: 4px 12px;
  margin-bottom: 0;
  *margin-left: .3em;
  font-size: 14px;
  line-height: 20px;
  color: #333333;
  text-align: center;
  text-shadow: 0 1px 1px rgba(255, 255, 255, 0.75);
  vertical-align: middle;
  cursor: pointer;
  background-color: #f5f5f5;
  *background-color: #e6e6e6;
  background-image: -moz-linear-gradient(top, #ffffff, #e6e6e6) !important;
  background-image: -webkit-gradient(linear, 0 0, 0 100%, from(#ffffff), to(#e6e6e6)) !important;
  background-image: -webkit-linear-gradient(top, #ffffff, #e6e6e6) !important;
  background-image: -o-linear-gradient(top, #ffffff, #e6e6e6) !important;
  background-image: linear-gradient(to bottom, #ffffff, #e6e6e6) !important;
  background-repeat: repeat-x !important;
  opacity: 1 !important;
  filter: alpha(opacity=100) !important;
     background-position: 0 0;
  -webkit-transition:none;
     -moz-transition:none;
       -o-transition: none;
          transition: none;
  border: 1px solid #cccccc;
  *border: 0;
  border-color: #e6e6e6 #e6e6e6 #bfbfbf;
  border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
  border-bottom-color: #b3b3b3;
  -webkit-border-radius: 4px;
     -moz-border-radius: 4px;
          border-radius: 4px;
  filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffffff', endColorstr='#ffe6e6e6', GradientType=0);
  filter: progid:DXImageTransform.Microsoft.gradient(enabled=false);
  *zoom: 1;
  -webkit-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
     -moz-box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
          box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.2), 0 1px 2px rgba(0, 0, 0, 0.05);
} 
```

注意`disabled`选择器。

**然而**，这在 IE 中仅部分支持，这应该不会让任何人感到惊讶！

[小提琴](http://jsfiddle.net/dy9uH/11/)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-02-19T02:48:15.503

好吧，您可以向该特定按钮添加一个类，这样它就不会与其他按钮崩溃，并重写禁用的类，这将是最简单的方法。

# asp.net-mvc-4 - Autofac 为类提供组件注册

> ID：14948994
> 
> 赞同：0
> 
> 时间：2013-02-19T02:47:04.590
> 
> 标签：asp.net-mvc-4, autofac, multi-tenant

我需要访问 autofac 组件寄存器以找出已注册的类型与某个接口和名称匹配。

[我在这个问题](https://stackoverflow.com/questions/14061472/get-all-registered-implementations-of-an-interface-in-autofac)中找到了这样做的方法

```
var types = scope.ComponentRegistry.Registrations
    .SelectMany(r => r.Services.OfType<IServiceWithType>(), (r, s) => new { r, s })
    .Where(rs => rs.s.ServiceType.Implements<T>())
    .Select(rs => rs.r.Activator.LimitType); 
```

如何将范围、组件注册表和注册传递给我的类，以便它可以在内部执行此操作。

这样做的原因是我试图解析一个 asp.net mvc 控制器，我只有一个名称（没有命名空间或具体类型），并且可以使用 autofacs 多租户支持覆盖它。

因此，我需要根据在 Autofac 中注册的内容，将“HomeController”之类的字符串解析为实际的 HomeController 类型。

所有这些都将在控制器工厂中完成。

# java - 如何在@Stateless bean 中为@WebMethod 设置超时值？

> ID：14948995
> 
> 赞同：2
> 
> 时间：2013-02-19T02:47:04.027
> 
> 标签：java, jakarta-ee, timeout, stateless

我试图弄清楚是否可以在@Stateless bean 中为 web 方法设置超时值。或者即使有可能。我进行了相当多的搜索，但没有发现与此问题相关的任何内容。

例子：

```
@WebService
@Stateless
public class Test {

    @WebMethod
    @WebResult(name = "hello")
    public String sayHello(){
        return "Hello world";
    }
} 
```

非常感谢您提供任何答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-26T19:42:45.837

因此，经过一番搜索和学习后，我通过执行以下操作解决了这个问题：我创建了一个包含 @Asynchronous 方法的无状态 Bean：

```
@Asynchronous
public Future<String> sayHelloAsync() 
{
     //do something time consuming ...
     return new AsyncResult<String>("Hello world");
} 
```

然后在第二个 bean 中将其方法公开为 Web 服务，我做了以下事情：

```
@WebService
@Stateless
public class Test {

     @EJB
     FirstBean myFirstBean;//first bean containing the Async method.

    /**
     * Can be used in futher methods to follow
     * the running web service method
     */
    private Future<String> myAsyncResult;

    @WebMethod
    @WebResult(name = "hello")
    public String sayHello(@WebParam(name = "timeout_in_seconds") long timeout)
    {
        myAsyncResult = myFirstBean.sayHelloAsync();
        String myResult = "Service is still running";
        if(timeout>0)
        {
            try {
                myResult= myAsyncResult.get(timeout, TimeUnit.SECONDS);
            } catch (InterruptedException e) {
                myResult="InterruptedException occured";
            } catch (ExecutionException e) {
                myResult="ExecutionException occured";
            } catch (TimeoutException e) {
                myResult="The timeout value "+timeout+" was reached."+ 
                                 " The Service is still running.";
            }
        }
        return myResult;
    }
} 
```

如果设置了超时，那么客户端将等待这段时间，直到达到。在我的情况下，这个过程仍然必须运行。我希望它会帮助别人。