# StackOverflow 问答 14259000-14259999

# nsis - 如何让我的安装程序检查无效的文件夹安装？

> ID：14259000
> 
> 赞同：0
> 
> 时间：2013-01-10T13:26:27.603
> 
> 标签：nsis

.实际上我已经在同一台计算机上安装了不同版本的软件，所以当用户继续安装第三个版本时，想要检查两个版本的文件夹。我正在尝试使用循环，但安装程序无法正常工作。提前致谢。

我已经在同一台计算机上安装了相同软件的 2 个版本。我希望在安装第三个版本时，脚本应该检查路径，并且它不应该允许用户安装在已经安装了前两个版本的相同路径中

```
Function .onVerifyInstDir

  nsArray::Set array 1.6
  nsArray::Set array 1.7
  nsArray::Set array 1.8

  nsArray::Length array
  Pop $R0
  ;DetailPrint `array length: $R0`

  StrCpy $R1 0
  ${DoWhile} $R1 < $R0
    nsArray::Get array $R1
    Pop $R2
    StrCpy $tempregistry "$(^Name)_$R2"

    ;DetailPrint `MyArray2[$R1] is $R2`

 ReadRegStr $path  HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstal\$tempregistry""InstallLocation"  ;fetching installed location

   ${If} $path == ""

   ${Else}
   strCmp $path $INSTDIR 0 pathGood
   ;Abort
    IntOp $R1 $R1 + 1
   ${EndIf}  
  ${Loop}

    PathGood:
  FunctionEnd 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T11:13:54.960

以下是步骤

1.  将您的产品名称或您的注册表项存储在变量中。
2.  将要安装的路径存储在变量中，例如 $path
3.  在循环中检查注册表项。

    ReadRegStr $pdt HKLM "SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall\productname

4.  如果找到，则检索安装位置的值并将其存储在变量中；例如 $path1 ReadRegStr $path1 $pdt "安装位置" 否则继续

5.  ${if} $path == $path1 messagebox mb_ok "路径中已经安装了另一个版本"

6.  ${else} 继续
7.  ${endif}

# vb.net - 离线使用微软同步框架时如何查询本地数据库？

> ID：14259001
> 
> 赞同：0
> 
> 时间：2013-01-10T13:26:30.877
> 
> 标签：vb.net, sql-server-2008, sql-server-ce, microsoft-sync-framework

我有一个基于 Microsoft 同步框架的应用程序。数据被输入并存储在使用同步框架向导配置的数据库中。据我了解，这会将服务器数据库的克隆放在本地目录中，并且数据库版本是 SQL Compact 版本。

用户有时会离线使用应用程序，并且需要来自一个数据库的信息才能填充另一个数据库。他们将从工具数据库中选择一个工具，并从设备数据库中选择一个具有某些参数的设备。为了做到这一点，我需要能够在离线时查询本地数据库。

首先，我尝试使用设置中的本地 ConnectionString 来填充组合框。

```
Dim conn As New SqlConnection(My.Settings.ClientDatabaseConnectionString)
conn.Open()
Dim dat As SqlDataAdapter = New SqlDataAdapter("SELECT Distinct InstrumentType FROM CreateScriptTable", conn)
Dim dt As New DataSet
dat.Fill(dt, "TestScriptTable")
cbInst.DataSource = dt.Tables("TestScriptTable").DefaultView
cbInst.DisplayMember = "InstrumentType"
cbInst.ValueMember = "InstrumentType" 
```

接下来，因为它是一个 SQL ce 数据库，所以我使用了 SQLCeConnection：

```
Dim conn As SqlCeConnection
conn = New SqlCeConnection("Data Source=|DataDirectory|\TestsDatabase4.sdf;Max Database Size=2047")
Dim dat As SqlCeDataAdapter = New SqlCeDataAdapter("SELECT Distinct InstrumentType FROM TestScriptTable", conn)
Dim dt As New DataSet
dat.Fill(dt, "TestScriptTable")
cbInst.DataSource = dt.Tables("TestScriptTable").DefaultView
cbInst.DisplayMember = "InstrumentType"
cbInst.ValueMember = "InstrumentType" 
```

本地连接字符串的各种格式被传递到 SQLConnection() 包括删除`Max Database Size=2047` 这些方法都不起作用所以我尝试在运行时按照教程[here](http://msdn.microsoft.com/en-us/vstudio/cc307956.aspx)更改连接字符串 这也不起作用所以目前我无法检索任何数据随意离线。有人对此有任何想法吗？谢谢。

# java - 集群 Quartz 调度器配置

> ID：14259005
> 
> 赞同：0
> 
> 时间：2013-01-10T13:26:43.163
> 
> 标签：java, quartz-scheduler

我正在开发一个使用 Quartz 来安排作业的应用程序。要计划的作业是通过读取属性文件以编程方式创建的。我的问题是：如果我有几个节点的集群，其中哪些应该以编程方式创建计划？只有其中之一？或者也许全部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:50:55.390

我在一个网络应用程序中使用了石英，其中用户可以创建执行某些任务的石英作业。

只要至少每个工作的工作名称不同，我们在那个应用程序上就没有问题。你也可以有不同的组名，如果我没记错的话，jobgroup+jobname 组合形成一个工作键。

无论如何，我们从不同节点创建运行作业没有问题，但当时的石英（大约 6 个月前，我不相信这已经改变，但我不确定）没有提供停止集群中作业的可能性，它只能停止执行停止命令的节点上的作业。

相反，如果您只想在应用程序启动时创建固定数量的作业，则最好将该作业委托给其中一个节点，因为将从每个节点的相同属性文件中读取作业名称/组，并且会出现冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:29:03.627

您是否尝试过在所有这些上创建它们？我认为您会因为名称重复而产生一些冲突。所以我认为其中一位成员应该在启动期间创建时间表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-25T11:18:49.877

如果像您说的那样在属性中预定义它们，则您应该只为集群设置一个系统调度作业。如果所有系统都这样做，您将不必要地重新创建作业，并且如果每个服务器都创建或删除相同的作业和触发器，则可能会将它们置于奇怪的状态。

您可以只将作业的属性部署到一台服务器，然后只有一台服务器会尝试创建它们。

您可以制作一个单独的应用程序来安排作业，并且只运行一次。

如果这些是 Web 服务器，您可以创建一个简单的安全 REST API 来触发调度过程。然后，您可以编写一个自动化脚本来访问 API，并在部署过程中或任何您需要的时候启动作业调度。如果您在负载均衡器后面有多台服务器，它应该只转到一台服务器并安排石英将保存到数据库支持的作业存储的作业。集群中的其他节点将在下次从数据库更新时接收它们。

# asp.net-mvc - jquery unobtrusive 在有子网格时不会在客户端发出验证属性

> ID：14259012
> 
> 赞同：0
> 
> 时间：2013-01-10T13:27:15.720
> 
> 标签：asp.net-mvc, unobtrusive-validation

我已经设置了一个小测试项目，希望能解释我的问题。我有一个父类，该类的属性包含其所有 Child 类型的子项。在 MVC 视图中，我列出了表格中的所有子项，并让表单回发我的子项并将它们自动映射到父属性，我将它们呈现为：

```
@Html.TextBox(string.Format("Children[{0}].ChildName", childIndex), child.ChildName) 
```

在控制器中，我已将属性 ChildName 标记为必需。我遇到的问题是 jquery 不显眼的验证不会发出任何数据验证属性。一切都在服务器上验证得很好，但在客户端上却没有（显然是因为在这些输入上找不到 jquery 验证的属性）。

请看一下代码：

看法

```
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<!DOCTYPE html>

<html>
<head>
    <meta name="viewport" content="width=device-width" />
    <title>Index</title>
</head>
<body>
    <div>
        <form action="@Url.Action("Save")" method="post">
            @Html.TextBox("Name", (string)Model.Name)

            <table>
                <tr><td>Child name</td></tr>
                @{var childIndex = 0;}
                @foreach (var child in (List<GridValidationTest.Controllers.Child>)Model.Children)
                {
                    <tr><td>@Html.TextBox(string.Format("Children[{0}].ChildName", childIndex), child.ChildName)</td></tr>
                    childIndex++;
                }
            </table>

            <br /><button>Submit</button>
        </form>
    </div>
</body>
</html> 
```

控制器

```
namespace GridValidationTest.Controllers
{
    public class Parent
    {
        [Required]
        public string Name { get; set; }
        public IList<Child> Children { get; set; }
    }

    public class Child
    {
        [Required]
        public string ChildName { get; set; }
    }

    public class MyController : Controller
    {
        //
        // GET: /My/

        public ActionResult Index()
        {
            var parent = new Parent { Name = "Parent name" };
            parent.Children = new List<Child>
            {
                new Child {ChildName = "First child"},
                new Child {ChildName = "Second child"}
            };
            return View("Index", parent);
        }

        public ActionResult Save(Parent parent)
        {
            return View("Index", parent);
        }

    }
} 
```

对父类的属性名称的客户端验证按预期工作正常。我应该如何让孩子们让客户端验证按我的预期工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:02:43.967

您需要将视图中的字段绑定到模型。而不是使用：

```
@Html.TextBox(string.Format("Children[{0}].ChildName", childIndex), child.ChildName) 
```

利用

```
@Html.TextBoxFor(model => model.Children[childIndex])
@Html.ValidationMessageFor(model => model.Children[childIndex]) 
```

还要确保在您的页面上包含正确的 jquery javascript 文件。就像是：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script> 
```

还要确保在您的网络配置中，您已启用 ClientValidationEnabled 和 UnobtrusiveJavaScriptEnabled，如下所示：

```
<appSettings>
    ....
    <add key="ClientValidationEnabled" value="true" />
    <add key="UnobtrusiveJavaScriptEnabled" value="true" />
    ....
</appSettings> 
```

# mysql - 突然访问被拒绝消息

> ID：14259023
> 
> 赞同：2
> 
> 时间：2013-01-04T20:07:29.167
> 
> 标签：mysql

我刚刚发现我的网站在所有网址上都显示“拒绝访问”消息！我也无法访问cp。我可以通过 ftp 访问文件，但配置文件给了我一条错误消息：权限被拒绝错误 -160：无法启动数据传输。系统中的各种其他 .php 文件也会出现此错误消息。

我尝试禁用 htacess 文件，但这没有任何区别。一个普通的 html 文件输出正常。

我可以通过 phpmyadmin 访问数据库。

有什么建议可以解决这个问题或可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-05T15:39:40.617

感谢您的意见。我的 ISP 发送了一封电子邮件，说 ftp 帐户已被黑客入侵并且文件已更改。不要真的认为是这种情况，因为无法通过该 ftp 帐户访问一个文件！但是我确实发现大多数文件权限都已更改，因此文件不可读！一旦这些权限得到修复，它就会再次正常工作！

# asp.net - 在编辑模式下打开 Gridview 的每一行

> ID：14259028
> 
> 赞同：0
> 
> 时间：2013-01-10T13:28:15.773
> 
> 标签：asp.net, gridview

快速的一般性问题，是否可以在编辑模式下打开 Gridview 的每一行，类似于 Excel 电子表格？或者是否有其他控制可以做到这一点？

我玩了一点，但无法做到这一点。.net 3.5

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:38:25.293

您可以使用[GridView TemplateFields](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.templatefield%28v=vs.100%29.aspx)并向其添加 TextBox 控件。

```
<asp:TemplateField HeaderText="Territories">
   <ItemTemplate>
            <asp:TextBox ID="textbox1" runat="server"/>
   </ItemTemplate>
</asp:TemplateField> 
```

# c# - C# - 向 DataGridView 添加新行

> ID：14259029
> 
> 赞同：4
> 
> 时间：2013-01-10T13:28:22.973
> 
> 标签：c#, datagridview

`DataGridView`当我点击一个按钮时，我需要动态添加行。我已经阅读了很多关于它的帖子，但所有这些帖子都有一个`DataTable`as `DataSource`。在我的情况下，`DataSource`是 a`List`并且行是自定义对象（产品）。请参阅以下代码：

```
 List<Product> products = 
    (List<Product>)repository.Session.CreateCriteria<Product>().List<Product>();
    ProductsDataGrid.DataSource = products; 
```

`AllowUserToAddRow`是真的。那么如何动态添加一行呢？

* * *

据我了解，根据我尝试过的 Nasmi Sabeer 的回答：

```
 private void addProductBtn_Click(object sender, EventArgs e)
    {
        List<Product> products = (List<Product>) ProductsDataGrid.DataSource;
        products.Add(new Product());
        ProductsDataGrid.DataSource = products;
        ProductsDataGrid.Refresh();   
    } 
```

但不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T13:52:02.147

您可以将您的列表包装成`BindingSource`这样：

```
BindingSource bs = new BindingSource();
bs.DataSource = products; 
```

然后将`DataSource`网格的属性设置为`bs`.

```
ProductsDataGrid.DataSource = bs; 
```

然后将您的点击处理程序更新为

```
private void addProductBtn_Click(object sender, EventArgs e)
{
    ...
    bs.Add(new Product());
    ....
    ProductsDataGrid.Refresh();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:15:25.713

利用`BindingList`

```
public partial class Form1 : Form
{
    private IBindingList blist;

    public Form1()
    {
        InitializeComponent();
    }

    private void button1_Click(object sender, EventArgs e)
    {
        //Binding
        this.blist = new BindingList<Product>();
        this.dataGridView1.DataSource = this.blist;

    }

    private void button2_Click(object sender, EventArgs e)
    {
        // Add
        this.blist.Add(new Product { Id = 2, Text = "Prodotto 2" });
    }
}

public class Product
{
    public int Id { get; set; }

    public string Text { get; set; }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T13:31:51.373

首先将产品添加到列表中，然后在 DataGridView 上调用 Refresh

# python - 如何在 Python 3 中通过 SocketServer 发送图像？

> ID：14259030
> 
> 赞同：0
> 
> 时间：2013-01-10T13:28:22.930
> 
> 标签：python, image, python-3.x, encode, socketserver

我想用 python 3 的 socketserver 发送图像，但我遇到了编码问题。我需要以字节还是文本形式发送？我是否需要使用“b”选项打开我的图像并将其转换为特定格式？

使用以前版本的 python 我可以这样做：

```
image = open('my_image.jpg', 'rb')
image_data = image.read()
image.close()

socketData = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
socketData.connect((ADDRESS,PORT))

socketData.sendall(image_data) 
```

但是对于 python 3，它不再起作用了。存在编码和编解码器问题，我不太了解 encode()、decode() 或 str() 的使用。

你知道我该如何实现它吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:47:56.227

就像我上面写的那样，您的代码目前按原样工作。要向要通过套接字发送的数据添加标头，首先需要知道其编码。假设它是 UTF-8，您可以执行以下操作：

```
header = "Header！\n"
header_bytes = bytes(header, 'utf-8')
socketData.sendall(header_bytes + image_data) 
```

`bytes`type 只能`bytes`在 Python 3 中连接。

# android - 适合在 webview 中缩放，android 4.0.3

> ID：14259032
> 
> 赞同：1
> 
> 时间：2013-01-10T13:28:26.203
> 
> 标签：android, webview

我已将 webview.setInitialScale(1) 用于 nexus、mdpi 和 ldpi 设备，并且工作正常。它最初适合缩放，不允许通过双击或捏合进行放大，但它在 vernet 平板电脑中不起作用（android 4.0.3 ）。谁能帮我 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T12:17:22.053

尝试这个 -

`webView.getSettings().setSupportZoom(false);`

我希望它有效。

# javascript - SoundCloud 小部件事件未触发

> ID：14259035
> 
> 赞同：1
> 
> 时间：2013-01-10T13:28:32.250
> 
> 标签：javascript, api, widget, soundcloud

我在使用 SoundCloud Widget API 时遇到问题。

由于某种原因，在使用 auto_play 选项播放曲目后，PLAY 和 PLAY_PROGRESS 事件不会触发。不过，READY 事件运行良好。

这是代码：

```
player = SC.Widget(document.getElementById('soundcloud-player'));

player.bind(SC.Widget.Events.READY, this.SC_onPlayerReady.bind(this));
player.bind(SC.Widget.Events.PLAY, this.SC_onPlayerPlay.bind(this));
player.bind(SC.Widget.Events.PLAY_PROGRESS, this.SC_onPlayProgress.bind(this)); 
```

SC 工作人员的帮助表示赞赏，因为我找不到任何解决方案:-)

谢谢，
皮埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:18:18.873

感谢您报告此事。

实际上，当参数设置为时，`SC.Widget.Events.Play`现在不会触发。该修复程序正在部署中。`auto_play``true`

但是，`PLAY_PROGRESS`事件很好，您可以在以下示例中看到：http: [//jsbin.com/adubav/6/edit](http://jsbin.com/adubav/6/edit)

# android - Android 正在发送 2 个请求以通过移动浏览器下载一个文件

> ID：14259037
> 
> 赞同：0
> 
> 时间：2013-01-10T13:28:43.993
> 
> 标签：android, download, billing, mobile-browser

这真的在发生。我在 PHP 中进行了测试以确认这一点。

我创建了一个 test.php 文件并输入：

```
<?php
    error_log('Downloading...');
    header('Content-type: application/force-download');
    header('Content-Disposition: attachment; filename="test.txt"');
    echo 'test android download';
?> 
```

因此，当我通过任何 Android 移动浏览器打开 www.myurl/test.php 时，在 error_log.log 中我会得到两次“正在下载...”。

当我在任何其他移动操作系统（Windows、IOS 等）中打开相同的 URL 时，我只会在 error_log.log 文件中获得一次“正在下载...”。

有谁知道发生了什么以及如何避免这种情况？

这对我来说是个大问题，因为当有人下载​​文件时我会执行用户收费。现在从 Android 手机下载 1 个文件需要 2 次费用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T10:01:53.587

我在死胡同:(

[http://code.google.com/p/android/issues/detail?id=1978](http://code.google.com/p/android/issues/detail?id=1978)

浏览器需要点击服务器来确定某个东西是下载，然后下载管理器必须单独联系服务器进行下载。

因此，Android 启动第一个请求以打开“你确定吗？ - 是/否”对话框。如果用户单击“是”Android 转发请求到 Android 下载管理器和管理器发送第二个请求以下载文件。（某些Android版本会立即向DownloadManager发送请求）

问题是第一个和第二个请求都是 GET 类型（不是 HEAD）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T10:20:35.437

就我而言，我收到两个请求。第一个抛出 org.apache.catalina.connector.ClientAbortException，描述为 java.net.SocketException: Connection reset by peer: socket

所以我只是捕捉到那个异常并写日志。我想你也可以这样做，只有在成功下载后才向客户收费

# git - 如何更改失败的 git mergetool 留下的备份文件的位置

> ID：14259039
> 
> 赞同：1
> 
> 时间：2013-01-10T13:28:47.410
> 
> 标签：git, mergetool

当我使用 git merge 工具并使用 Ctrl+C 取消它时，以下文件会留在存储库中：

`app/controllers/application_controller.rb.orig app/controllers/application_controller.rb.BACKUP.22361.rb app/controllers/application_controller.rb.BASE.22361.rb app/controllers/application_controller.rb.LOCAL.22361.rb app/controllers/application_controller.rb.REMOTE.22361.rb`

我可以更改这些文件的位置，因此它们根本不会写入存储库，即使是暂时的？例如 ~/.mergefiles

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T17:23:55.163

如果您觉得完全不需要保留临时文件以防止合并损坏，您可能更愿意完全删除它们。为此，请设置以下 git config 行，这将防止它们在合并工具退出并出现错误时被遗忘：

```
git config --global mergetool.keepBackup false 
```

您可能还需要更改合并工具中的一些内部设置，以防合并失败后它还会保存备份。另一方面，如果您发现自己出于某种原因需要临时文件，那么这可能不是您的解决方案。

# javascript - JavaScript 关闭其他 JavaScript

> ID：14259044
> 
> 赞同：0
> 
> 时间：2013-01-10T13:29:01.293
> 
> 标签：javascript

javascript 中是否有一些功能允许我使 javascript 代码的其他特定部分变得惰性？

例如，假设我有几行 jquery 代码不断地操纵 DOM（如“选框”），但在某些特定时间该代码完全无用，并且那些特定的代码行需要停止。

当某些条件为真时，javascript 是否有一个固有的功能会关闭特定的代码行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:31:19.417

您可以禁用在任何地方定义的函数，如下所示：

```
otherFunction = function() {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:31:04.723

```
function doStuff() {
    // do my fancy jQuery stuff in this function.
}

if ( condition ) {
     doStuff();
} 
```

# grails - 空对象参数值重新出现在 GSP 中

> ID：14259045
> 
> 赞同：0
> 
> 时间：2013-01-10T13:29:01.663
> 
> 标签：grails, groovy, gsp

我正在围绕 springsource-security-core 插件实现用户控制器。

当我在控制器（“用户”）中“显示”一个用户实例时，我想确保密码参数为空并显示为空白编辑控件。

这是“show”方法的代码：

```
@Secured(['ROLE_SUPERUSER','ROLE_USER'])
def show(Long id) {

/**
 * If we're not the Superuser, then we only want to see the instance of the logged in user.
 */
def userInstance

if (SpringSecurityUtils.ifNotGranted('ROLE_SUPERUSER')) {
    userInstance=springSecurityService.currentUser
} else {
    userInstance = User.get(id)
}

    if (!userInstance) {
        flash.message = message(code: 'default.not.found.message', args: [message(code: 'user.label', default: 'User'), id])
        redirect(action: "list")
        return
    }

    userInstance.setPassword(null)

    [userInstance: userInstance]
} 
```

在 'userInstance' 上设置“watch”表示 userInstance.setPassword(null) 具有预期的效果，并将“password”参数设置为 'null'。

但是，当使用相同的参数集呈现视图时，会填充密码。

我也在寻找实现“密码确认”字段。我对 groovy/grail 有点陌生，所以我一步一步地摸索着。看来，通过传入“userInstance”，我传递了“User”域类的一个实例。

我是否需要域类中的两个编码字段，或者我可以在运行中向 GSP 添加一个字段，然后在使用编码密码保存域类之前在控制器中验证它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:06:01.653

最好的方法是使用命令对象，请参阅： [官方文档](http://grails.org/doc/latest/guide/theWebLayer.html#commandObjects)

# scala - Scala 处理非常大的列表

> ID：14259046
> 
> 赞同：1
> 
> 时间：2013-01-10T13:29:03.260
> 
> 标签：scala, scala-collections

我有一个大约 1176^3 个位置的列表。做某事

```
val x = list.length 
```

需要几个小时..

当列表中的位置是 1271256 时是可以的，只需几秒钟。有人知道如何加快速度吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T13:42:23.460

`List`长度操作可能是错误的数据结构，因为它是 O(n) - 完成列表越长，完成所需的时间就越长。

如果您需要调用[Vector](http://www.scala-lang.org/api/current/index.html#scala.collection.immutable.Vector)`length`可能是一种更好的数据结构，因为它的存储支持有限时间内的随机访问。

当然，这并不意味着 List 结构不好使用，只是在这种情况下它可能不是更可取的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:34:47.340

为了增加 gpampara 的答案，在这种情况下，您实际上可以证明使用数组是合理的，因为它具有最低的存储每个项目的开销和 O(1) 访问元素和长度确定（因为它记录在数组标题本身）。

数组有很多缺点，但我认为当内存开销是主要考虑因素时（并且当创建时已知大小的固定大小集合是可行的）时它是合理的。

# visual-studio-2010 - AWS Toolkit for .NET 无法在 Visual Studio 中打开

> ID：14259051
> 
> 赞同：4
> 
> 时间：2013-01-10T13:29:11.210
> 
> 标签：visual-studio-2010, amazon-web-services, visual-studio-2012

几周前我下载了适用于 .NET 的 AWS Takekit，它运行良好。

[http://aws.amazon.com/visualstudio/](http://aws.amazon.com/visualstudio/)

在过去的几天里，我无法在 Visual Studio 2010 或 Visual Studio 2012 中打开它。

我已经卸载它，重新启动并重新安装（多次）

我可以从视图菜单中选择它，但是当我选择它时，什么也没有发生。

我只是在寻找一些方向，看看我能做些什么来解决这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-08T20:25:10.583

我想到了。我不得不卸载 Toolkit，然后转到 PC 上的配置文件并删除整个 AWSToolkit 文件夹，最后我重新安装了它。它使我可以将其恢复并浏览所有内容。

具体来说，您要删除在以下位置找到的文件夹：`%USERPROFILE%\AppData\Local\AWSToolkit`

# flash - 从 flash 调用 /flashservices/gateway

> ID：14259055
> 
> 赞同：1
> 
> 时间：2013-01-10T13:29:22.570
> 
> 标签：flash, coldfusion, coldfusion-8, jrun

我们目前有 2 台服务器运行相同的（据我所知）ColdFusion 8 的配置：

*   相同的数据源配置
*   相同的映射
*   相同的 JVM 配置
*   相同的文件夹结构
*   相同的代码

我们正在使用 Flash 远程处理使用一个组件的数据自定义 Flash 资产。

在一台服务器上，调用工作正常：

```
HTTP/1.1 200 OK
Content-Length: 298
Content-Type: application/x-amf
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Access-Control-Allow-Origin: *
Access-Control-Allow-Headers: X-Requested-With
Date: Thu, 10 Jan 2013 13:12:11 GMT

������
/1/onResult�null���������COPYTEXT�JIf ... 
```

对另一个的相同调用失败：

```
<head><title>JRun Servlet Error</title></head><h1>500 </h1><body>
<br><pre>
java.lang.NullPointerException
    at jrun.servlet.JRunRequestDispatcher.invoke(JRunRequestDispatcher.java:285)
    at jrun.servlet.ServletEngineService.dispatch(ServletEngineService.java:543)
    at jrun.servlet.jrpp.JRunProxyService.invokeRunnable(JRunProxyService.java:203)
    at jrunx.scheduler.ThreadPool$DownstreamMetrics.invokeRunnable(ThreadPool.java:320)
    at jrunx.scheduler.ThreadPool$ThreadThrottle.invokeRunnable(ThreadPool.java:428)
    at jrunx.scheduler.ThreadPool$UpstreamMetrics.invokeRunnable(ThreadPool.java:266)
    at jrunx.scheduler.WorkerThread.run(WorkerThread.java:66)
</pre></body> 
```

如前所述，我比较了两个盒子的配置，看起来都很好。

我还将日志记录代码添加到被调用的组件中。在工作机器上，记录已完成。在故障机器上，不会生成日志。因此，我怀疑代码根本没有得到评估。

任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:04:59.913

在深入检查 ColdFusion 日志时，似乎 JRUN 日志中充满了以下错误：

```
01/10 14:01:25 user FlashGateway: init
01/10 14:01:25 user failed to load: flashgateway.controller.GatewayServlet
01/10 14:01:25 error [Flash Remoting MX]-> Unable to load configuration. Reason: The string "--" is not permitted within comments.
[1]flashgateway.GatewayException: [Flash Remoting MX]-> Unable to load configuration. Reason: The string "--" is not permitted within comments. 
```

然后使用比较两个配置文件，两个配置文件之间有一个字符差异： \wwwroot\WEB-INF\gateway-config.xml 故障机器：

```
<!---<adapter>coldfusion.flash.adapter.CFWSAdapter</adapter>---> 
```

工作机器：

```
<!---<adapter>coldfusion.flash.adapter.CFWSAdapter</adapter>--> 
```

删除额外的破折号（ColdFusion 结束注释到 HTML 结束注释）解决了这个问题。

# .htaccess - URL 重写规则在 cakephp 上使用 .htaccess 不起作用

> ID：14259060
> 
> 赞同：0
> 
> 时间：2013-01-10T13:29:33.580
> 
> 标签：.htaccess, url-rewriting, cakephp-1.3, cakephp-2.0, cakephp-2.1

我使用的是 cakephp 1.2，最近我更新了 cake 版本并迁移到了 2.4。

在我们为应用程序使用许多 .htaccess 规则之前。我们将它们写在 /webroot/.htaccess 文件中。但是在迁移到 2.4 之后，任何规则都不起作用。

例如

> RewriteCond %{REQUEST_FILENAME} -d
> 
> RewriteCond %{REQUEST_URI} /news/$
> 
> RewriteRule ^(.*)$ pages/news/ [QSA,L]

但是这个规则不适用于蛋糕 2.4。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:16:05.217

您最好的选择可能是不使用`mod_rewrite`规则，而是使用[`Router`](http://book.cakephp.org/2.0/en/development/routing.html#Router)类。

如果您编辑文件`app/config/routes.php`并添加这样的路由（假设您要调用`PagesController::display('news')`）：

```
Router::connect('/news/*', array(
    'controller' => 'pages',
    'action' => 'display', 
    'news'
)); 
```

你应该得到相同的结果。

# c# - User.IsInRole() 在 MVC C# 类中工作

> ID：14259063
> 
> 赞同：3
> 
> 时间：2013-01-10T13:29:40.043
> 
> 标签：c#, asp.net-mvc

我在用

```
If(User.IsInRole("member"))
{

} 
```

但无法让它在 C# MVC 类中工作。请注意，我没有在能够工作的控制器中使用它。我错过了什么？该代码甚至无法识别用户是什么。

我认为它可能是一个命名空间，但我已经使用了`.Mvc`命名空间以及其他......

先感谢您

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T13:32:32.870

`HttpContext.Current.User`改为使用

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T13:37:58.883

这是一种方法（在耦合方面是正确的，但它违反了单一责任原则）：

```
if (Roles.IsUserInRole("member"))
{

} 
```

基本上在这里，您使用的是[`Roles.IsUserInRole`](http://msdn.microsoft.com/en-us/library/4z6b5d42.aspx)静态方法，该方法又使用您在`<roles>`web.config 部分中配置的角色提供程序来获取当前经过身份验证的用户的角色。

但这不是我建议您采用的方法。角色和成员资格提供者之类的内容应该特定于您的 Web 层。您的业​​务课程不应该为检索此信息而烦恼。此信息应作为参数传递给他们。

例如，如果此类的所有方法都需要此信息，您可以简单地使用构造函数注入：

```
public class MyClass
{
    private readonly bool _isCurrentUserAMember;
    public MyClass(bool isCurrentUserAMember)
    {
        _isCurrentUserAMember = isCurrentUserAMember;
    }

    public void SomeMethod()
    {
        if (_isCurrentUserAMember)
        {
            // do some business logic for members
        }
        else
        {
            // do some other business logic for non-members
        }
    }
} 
```

正如您在这里看到的那样，这个类关心的是当前用户是否是成员以便执行他的业务逻辑，对吧？这个类不关心如何获取这些信息。这不是它的责任，如果你开始从类中获取它，你就违反了单一职责原则，这非常重要，因为现在你的类正在做两件事：检索角色信息和执行业务逻辑。

通过我推荐的方法，我们将这种责任倒转给调用代码，在这种情况下，调用代码通常恰好是一个 MVC 控制器，它可以查询角色提供者，如我的第一个示例所示，并将其传递给底层类。

如果这个类有更多的方法，而其他方法不需要这些信息，你也可以将布尔参数作为参数传递给方法，而不是使用构造函数注入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-20T14:24:04.290

用这个`System.Web.HttpContext.Current.User.IsInRole("yourRole")`

# c# - 如何在 Visual Studio 中进行批量重构

> ID：14259067
> 
> 赞同：1
> 
> 时间：2013-01-10T13:29:43.977
> 
> 标签：c#, visual-studio, refactoring, dynamics-crm-2011

我们正在从 Dynamics CRM 4.0 转换到 Dynamics CRM 2011。我们针对自动生成的代理类（由 crmsvcutil.exe 程序输出）编写了 100kloc+。

此实用程序的新版本更改了代理类的命名，因此：

```
 var myEntity = new MyEntity();
    myEntity.MyField = 2; 
```

现在是这样的：

```
 var myEntity = new new_myentity();
    myEntity.new_myfield = 2; 
```

我可以自动匹配符号，以便我知道`MyEntity`is `new_myentity`，但现在我需要一种方法来使用所有新符号更新我的代码。

# linqpad - linqpad ; 预期的

> ID：14259071
> 
> 赞同：0
> 
> 时间：2013-01-10T13:30:06.917
> 
> 标签：linqpad

我正在尝试将以下内容作为“C# 表达式”运行

```
Directory.GetDirectoryRoot( @"C:\Users\DMORIN\Documents\Penguino\Shelves\session").Dump(); 
```

我收到错误“；预期”

如果我将其复制并粘贴到现有的示例查询中（替换示例），它就可以工作。

例如。如果我用上面的代码替换“Readme.First()”的内容，一切正常。如果我使用语言“C# statements”进行新查询，则会收到错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:33:48.890

当您使用 时`C# expression`，LinqPad 需要一个表达式，而不是一个语句。

您需要删除`;`行尾的 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:14:45.347

**F4**并检查您的**Additional Namespace Imports**。

例如，如果您有一个空格，例如 System Windows Forms 而不是 System.Windows.Forms，您可能会收到错误消息。

如果出现问题，您需要将其保存为新查询的默认值。

# python - tkinter 将函数与循环中的变量绑定

> ID：14259072
> 
> 赞同：2
> 
> 时间：2013-01-10T13:30:11.557
> 
> 标签：python, loops, tkinter

我有这段代码可以在循环中创建一系列绑定：

```
from Tkinter import *
keys = {0:'m', 1:'n', 2:'o'}
def SomeFunc(event=None,number=11):
    print keys[number], number
root = Tk()
field = Canvas(root, height = 200, width = 200, bg = "gray") 
for i in range(2):
    root.bind("<KeyPress-%c>" % keys[i],lambda ev:SomeFunc(ev,i))
field.pack()
root.mainloop() 
```

我的问题是，当我按“m”或“n”时，函数`SomeFunc`会以可变的“i”作为参数调用。我希望在我按“m”时使用 0 作为参数（使用“bind”时的数值“i”）调用它，在按“n”时使用 1。这可以做到吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T15:03:55.980

您的问题是该变量`i`被*捕获*，`lambda`但是您可以通过创建一个小辅助函数来解决该问题，例如：

```
for i in range(2):
    def make_lambda(x):
        return lambda ev:SomeFunc(ev,x)
    root.bind("<KeyPress-%c>" % keys[i], make_lambda(i)) 
```

这将为您创建的每个绑定创建一个新范围，因此执行`for`循环并在循环期间更改 of`i`不会影响您已经使用的 lambda 函数。

# android - 使用上次访问的 url 打开浏览器

> ID：14259075
> 
> 赞同：13
> 
> 时间：2013-01-10T13:30:16.220
> 
> 标签：android, browser, browser-history

这就是我用来打开具有给定**URI的浏览器的方法**

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("http://www.google.com/"));
startActivity(browserIntent); 
```

有没有办法可以用以前访问过的页面打开浏览器。或者说只是打开浏览器，以便显示最后查看的页面。

**目的：**

在应用程序中，用户被要求提交一个 URL，因此它有一个选项**打开浏览器**，以便他/她可以复制 URL，返回并提交它，而不是输入。最后一个 URL 很有可能是他/她想要提交的内容

**编辑：**

我可以使用从浏览器历史记录中获取上次访问的页面

```
<uses-permission android:name="com.android.browser.permission.READ_HISTORY_BOOKMARKS" /> 
```

但是在安装应用程序时，它说：

***此应用程序将读取您的浏览器历史记录***

一看，没有人安装。

任何更改浏览器设置的方法，例如打开**继续我离开的地方**？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:50:12.510

我相信您正在开发此应用程序，因此您知道何时触发打开 Web 浏览器的意图。只需将该 URL 作为字符串保存在您的共享首选项变量中，每当您打开一个新 URL 时，将其值替换为新打开的 URL。

这样，您将始终在共享首选项变量中拥有最后一个 URL 地址。现在，当您需要它时，只需从共享首选项中获取它。

您可以从此处找到有关共享首选项的更多详细信息：

[http://developer.android.com/reference/android/content/SharedPreferences.html](http://developer.android.com/reference/android/content/SharedPreferences.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-05T10:24:34.460

此代码可能会有所帮助：

```
Intent browserIntent = getPackageManager().getLaunchIntentForPackage("com.android.chrome");
startActivity(browserIntent); 
```

碰巧用户没有chrome，那么您可以获得默认浏览器的包名称并打开该意图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-13T03:26:12.260

这是代码：

```
// create an intent to describe what app you wanna open
Intent browserIntent = new Intent("android.intent.action.VIEW", Uri.parse("http://"));

// and then get the default package name and start this app by yourself with a flag which allow it restore from history
ResolveInfo resolveInfo = getPackageManager().resolveActivity(browserIntent,PackageManager.MATCH_DEFAULT_ONLY);
Intent startIntent = getPackageManager().getLaunchIntentForPackage(resolveInfo.activityInfo.packageName);
startIntent.addFlags(Intent.FLAG_ACTIVITY_LAUNCHED_FROM_HISTORY);
startActivity(startIntent); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T13:49:44.113

如果您想提交 URL，最简单的解决方案是能够将 URL 从浏览器共享到您的应用程序。浏览器有一个分享按钮。

如果您有正确的 Intent 过滤器，您的应用程序将显示在该列表中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-12T11:47:57.387

我认为保持打开状态是可以的`www.google.com`。如果您的用户要插入一个刚刚剪贴板的链接，他几乎不想离开他当前打开的选项卡。所以他必须创建一个新标签并插入链接。现在，如果您已经打开了这个新标签并提供给`www.google.com`. **如果你保持原样，他需要做的就少了一步。**

# c# - 如何记录所有 Web 服务客户端请求和响应

> ID：14259079
> 
> 赞同：0
> 
> 时间：2013-01-10T13:30:24.537
> 
> 标签：c#, logging, soap, web, toolkit

我有一个非常复杂和大的项目。项目内部有很多 Web 服务调用。所有服务调用都记录在数据库的不同表中。我需要一个中央日志机制来避免所有这些不同的日志表。

我认为客户端必须有类似 Soap Toolkit 的东西来捕获所有服务调用。如何捕获呼叫和响应以将它们记录到所需的数据库。？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:35:40.503

首先，记录到数据库不是一个好主意。它有几个原因，例如，如果由于某种原因，存在与数据库相关的异常，它将永远不会被记录。

我建议使用 Apache 的 Log4net。[这](http://www.codeproject.com/Articles/14819/How-to-use-log4net)是一篇关于如何在 asp.net 项目中使用 log4net 的好文章。它是一种高效且可配置的日志记录方法。

# c# - c# winforms应用程序中datagridview /控件中的子级对象属性绑定

> ID：14259080
> 
> 赞同：6
> 
> 时间：2013-01-10T13:30:25.560
> 
> 标签：c#, c#-4.0

在将对象列表绑定到 datagridview 或控件时遇到问题。其实我想要什么，我有班说`Person`，`Address`和`Contact`。`Person`类有 3 个属性，一个是字符串`Add`类型的名称，一个是地址类型，最后一个是`Cont`类型`Contact`。通过谷歌搜索，我发现我必须创建`CustomTypeDescriptor`我创建的类，它只适用于一个类 for`Contact`或 for `Address`。当我们放两次时，它显示编译时错误，不能有重复`[TypeDescriptionProvider(typeof(MyTypeDescriptionProvider<Contact>))]`。

我怎么解决这个问题。

在这里，我提供了我正在尝试实现的示例代码，

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.AutoGenerateColumns = false;

        dataGridView1.Columns.Add("Name", "Name");
        dataGridView1.Columns.Add("City", "City");
        dataGridView1.Columns.Add("ContactName", "ContactName");

        dataGridView1.Columns["Name"].DataPropertyName = "Name";
        dataGridView1.Columns["City"].DataPropertyName = "Add_City";
        dataGridView1.Columns["ContactName"].DataPropertyName = "Cont_ContactName";

        List<Person> PersonList = PersonProxy.GetPersonCollection();
        dataGridView1.DataSource = PersonList;
    }
}

public class PersonProxy
{
    public static List<Person> GetPersonCollection()
    {
        List<Person> persList = new List<Person>();

        persList.Add(new Person
        {
            Name = "Awadhendra",
            Add = new Address
            {
                City = "Allahabad"
            },
            Cont = new Contact
            {
                ContactName = "Awadh"
            }
        });

        persList.Add(new Person
        {
            Name = "Alok",
            Add = new Address
            {
                City = "Allahabad"
            },
            Cont = new Contact
            {
                ContactName = "Alok"
            }
        });

        persList.Add(new Person
        {
            Name = "Ankit",
            Add = new Address
            {
                City = "Lucknow"
            },
            Cont = new Contact
            {
                ContactName = "Ankit"
            }
        });

        persList.Add(new Person
        {
            Name = "Swati",
            Add = new Address
            {
                City = "Lucknow"
            },
            Cont = new Contact
            {
                ContactName = "Awadh"
            }
        });

        return persList;
    }
}

[TypeDescriptionProvider(typeof(MyTypeDescriptionProvider<Contact>))]    
public class Person
{
    public string Name { get; set; }
    public Address Add { get; set; }    ////How to get address and contact both for binding.        
    public Contact Cont { get; set; }  ////Write now am getting Contact
}

public class Address
{
    public string City { get; set; }
}

public class Contact
{
    public string ContactName { get; set; }
}

public class MyTypeDescriptionProvider<T> : TypeDescriptionProvider
{
    private ICustomTypeDescriptor td;
    public MyTypeDescriptionProvider()
        : this(TypeDescriptor.GetProvider(typeof(Person)))
    {
    }
    public MyTypeDescriptionProvider(TypeDescriptionProvider parent)
        : base(parent)
    {
    }
    public override ICustomTypeDescriptor GetTypeDescriptor(Type objectType, object instance)
    {
        if (td == null)
        {
            td = base.GetTypeDescriptor(objectType, instance);
            td = new MyCustomTypeDescriptor(td, typeof(T));
        }
        return td;
    }
}

public class SubPropertyDescriptor : PropertyDescriptor
{
    private PropertyDescriptor _subPD;
    private PropertyDescriptor _parentPD;

    public SubPropertyDescriptor(PropertyDescriptor parentPD, PropertyDescriptor subPD, string pdname)
        : base(pdname, null)
    {
        _subPD = subPD;
        _parentPD = parentPD;
    }

    public override bool IsReadOnly { get { return false; } }
    public override void ResetValue(object component) { }
    public override bool CanResetValue(object component) { return false; }
    public override bool ShouldSerializeValue(object component)
    {
        return true;
    }

    public override Type ComponentType
    {
        get { return _parentPD.ComponentType; }
    }
    public override Type PropertyType { get { return _subPD.PropertyType; } }

    public override object GetValue(object component)
    {
        return _subPD.GetValue(_parentPD.GetValue(component));
    }

    public override void SetValue(object component, object value)
    {
        _subPD.SetValue(_parentPD.GetValue(component), value);
        OnValueChanged(component, EventArgs.Empty);
    }
}

public class MyCustomTypeDescriptor : CustomTypeDescriptor
{
    Type typeProperty;
    public MyCustomTypeDescriptor(ICustomTypeDescriptor parent, Type type)
        : base(parent)
    {
        typeProperty = type;
    }
    public override PropertyDescriptorCollection GetProperties(Attribute[] attributes)
    {
        PropertyDescriptorCollection cols = base.GetProperties(attributes);

        string propertyName = "";
        foreach (PropertyDescriptor col in cols)
        {
            if (col.PropertyType.Name == typeProperty.Name)
                propertyName = col.Name;
        }
        PropertyDescriptor pd = cols[propertyName];
        PropertyDescriptorCollection children = pd.GetChildProperties();
        PropertyDescriptor[] array = new PropertyDescriptor[cols.Count + children.Count];
        int count = cols.Count;
        cols.CopyTo(array, 0);

        foreach (PropertyDescriptor cpd in children)
        {
            array[count] = new SubPropertyDescriptor(pd, cpd, pd.Name + "_" + cpd.Name);
            count++;
        }

        PropertyDescriptorCollection newcols = new PropertyDescriptorCollection(array);
        return newcols;
    }
} 
```

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:11:03.743

基于[MSDN](http://msdn.microsoft.com/en-us/library/system.componentmodel.typedescriptionprovider.aspx)

> 有两种方法可以将 a`TypeDescriptionProvider`与 a关联起来`TypeDescriptor`：
> 
> *   在设计时，可以为目标类分配适当的 `TypeDescriptionProviderAttribute`标记。
> *   在运行时，可以调用类的`AddProvider`方法之一。`TypeDescriptor`这些重载方法需要目标对象或其类类型。

所以只需在运行时添加它们：

```
private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.AutoGenerateColumns = false;

        dataGridView1.Columns.Add("Name", "Name");
        dataGridView1.Columns.Add("City", "City");
        dataGridView1.Columns.Add("ContactName", "ContactName");

        dataGridView1.Columns["Name"].DataPropertyName = "Name";
        dataGridView1.Columns["City"].DataPropertyName = "Add_City";
        dataGridView1.Columns["ContactName"].DataPropertyName = "Cont_ContactName";

        List<Person> PersonList = PersonProxy.GetPersonCollection();

        //add them here
        System.ComponentModel.TypeDescriptor.AddProvider((new MyTypeDescriptionProvider<Address>()), typeof(Person));
        System.ComponentModel.TypeDescriptor.AddProvider((new MyTypeDescriptionProvider<Contact>()), typeof(Person));
        dataGridView1.DataSource = PersonList;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-05T13:00:48.333

我发现在 .NET 4.5 中，前面的答案几乎可以工作，但问题是 AddProvider 方法作为最后一个获胜者，所以我们只能看到来自 Contract 的属性，而不是 Address。

解决方案是将提供者链接在一起，以便我们得到......

```
//add them here
var addressProvider = new MyTypeDescriptionProvider<Address>();
System.ComponentModel.TypeDescriptor.AddProvider(t1, typeof(Person));
System.ComponentModel.TypeDescriptor.AddProvider(new MyTypeDescriptionProvider<Contact>(t1), typeof(Person)); 
```

# java - java mysql连接中的运行时错误

> ID：14259086
> 
> 赞同：0
> 
> 时间：2013-01-10T13:30:50.883
> 
> 标签：java, mysql, database, netbeans-7

现在我得到一个运行时错误。'java.lang.UnsupportedOperationException：尚未实现'我该如何恢复它。

```
 private void btnlogActionPerformed(java.awt.event.ActionEvent evt) {

    user=txtuser.getText();
    char[] pass=jPasswordField1.getPassword();
    String passString=new String(pass);
    try{
      Connection con = createConnection();
      String sql = "INSERT INTO login(username,Password) VALUES ('" + user + "','" + passString + "')";
      Statement st = con.prepareStatement(sql);
      st.executeUpdate(sql);
    }
    catch(Exception e){
      JOptionPane.showMessageDialog(null,"Exception: "+ e.toString());
    }
  }
  public static void main(String args[]) {
    try {
      Class.forName("com.mysql.jdbc.Driver");
      String connectionUrl = "jdbc:mysql://localhost/Stock?"+
        "user=root&password=";
      Connection con = DriverManager.getConnection(connectionUrl);
    } catch (SQLException e) {
      JOptionPane.showMessageDialog(null,"SQL Exception: "+ e.toString());
    } catch (ClassNotFoundException cE) {
      JOptionPane.showMessageDialog(null,"Class Not Found Exception: "+ cE.toString());
    }
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:36:56.140

好的，我发现了问题。您有`Statement`指向`PreparedStatement` 对象的引用。但是`PreparedStatement`没有`execute(String)`你正在使用的任何方法。它有`execute()`没有任何参数的方法。这就是问题的根源。而且这不是正确的使用方式`PreparedStatement`。您应该使用您编写查询的方式，或者您可以[在此处](http://www.mkyong.com/jdbc/jdbc-preparedstatement-example-batch-update/)`Statement`查看其`PreparedStatements`工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:47:43.333

正确使用`java.sql.PreparedStatement`，EG：

```
 java.sql.PreparedStatement statement= con.prepareStatement("delete from song where no=(?)"); 
```

设置变量：

```
 statement.setInt(1,id);
    statement.setInt(2,...);
    sta... 
```

**更新：**

按要求提供 EG：

```
import com.mysql.jdbc.Statement;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.SQLException;

public class Insert {
public static void main(String args[]) throws ClassNotFoundException, SQLException    {

insert("e:/helloJDBC");

              }
public static void insert(String path) throws ClassNotFoundException, SQLException
{int id=1;

         Connection con = null;
  Statement stmt = null;
    String dbUrl = "jdbc:mysql://127.0.0.1:3306/song";//your db
 String dbClass = "com.mysql.jdbc.Driver";

 Class.forName(dbClass);
con = DriverManager.getConnection(dbUrl,"root","sesame");//enter reqd. fields
    java.sql.PreparedStatement statement= con.prepareStatement("insert into song values(?,?)");//Whatever your query
    statement.setInt(1,id);
    statement.setString(2,path);//set as per the order of ? above
    statement.execute();
    System.out.println("1 row effected");

     }

} 
```

# memory - 缓存寻址：索引长度、块偏移量、字节偏移量和标记？

> ID：14259088
> 
> 赞同：7
> 
> 时间：2013-01-10T13:30:55.107
> 
> 标签：memory, mips, cpu-cache

假设我知道以下值：

```
W = Word length (= 32 bits)
S = Cache size in words
B = Block size in words
M = Main memory size in words 
```

如何计算需要多少位：

```
- Index
- Block offset
- Byte offset
- Tag 
```

a) 在直接映射缓存中 b) 在全关联缓存中？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2014-03-27T18:52:17.630

地址可以分为以下几部分：

```
[ tag | index | block or line offset | byte offset ] 
```

## 字节偏移位数

0 用于字可寻址存储器，log [2]（每字字节数）用于字节可寻址存储器

## 块或行偏移位数

日志[2]（每行字数）

## 索引位数

log [2] (CS)，其中 CS 是缓存集的数量。

*   对于完全关联，CS 为 1。由于 log [2] (1) 为 0，因此没有索引位。
*   对于 Direct Mapped，CS 等于 CL，即缓存行数，因此索引位数为 log [2] (CS) === log [2] (CL)。
*   对于 n 路关联 CS = CL ÷ n：log [2] (CL ÷ n) 索引位。

可以通过将缓存大小除以块大小 = S/B 来计算您拥有多少缓存行（假设它们都不包括标记和有效位的大小）。

## 标签位数

地址长度减去用于偏移量和索引的位数。地址的长度可以使用主存储器的大小来计算，例如，如果它是字节可寻址存储器，则需要寻址任何字节。

来源：[http ://babbage.cs.qc.edu/courses/cs343/cache_parameters.xhtml](http://babbage.cs.qc.edu/courses/cs343/cache_parameters.xhtml)

# tfs - 查找在 TFS 上更改严重性的错误

> ID：14259089
> 
> 赞同：1
> 
> 时间：2013-01-10T13:30:56.720
> 
> 标签：tfs

我需要在 TFS 上的一个项目中找到在过去 2 周内严重性更改为高的所有错误。我只能通过以下查询找到过去 2 周内打开的严重性高的错误：

```
<?xml version="1.0" encoding="utf-8"?>
<WorkItemQuery Version="1">
  <TeamFoundationServer>http://tfs-srv:8080/tfs/defaultcollection</TeamFoundationServer>
  <TeamProject>Project</TeamProject>
  <Wiql>SELECT [System.Id], [System.WorkItemType], [System.Title], [System.AssignedTo],[System.State] FROM WorkItems WHERE [System.TeamProject] = @project  AND  [System.WorkItemType] = 'Bug'  AND  [Microsoft.VSTS.Common.Severity] = 'High'  AND  [System.CreatedDate] &gt; @today - 14 ORDER BY [System.Id] </Wiql>
</WorkItemQuery> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T11:35:57.967

我认为这不能通过简单地通过 VS 定义查询来完成，因为它涉及比较两个工作项历史记录。

另一方面，可以直接查询TFS数据库来获取数据。尝试在 TFS 服务器上的 TFSWarehouse 数据库上运行此查询：

```
SELECT DATEDIFF(DD, H.System_ChangedDate, GETDATE()) as DaysAgo, H.System_Id, H.System_ChangedDate
, H.System_Rev, H2.System_Rev, H.Microsoft_VSTS_Common_Severity, H2.Microsoft_VSTS_Common_Severity
, 'X', H.*
FROM WorkItemHistoryView H INNER JOIN WorkItemHistoryView H2 ON H.System_Id = H2.System_Id 
                                                                AND H.System_Rev = H2.System_Rev + 1
                                                                AND H.Microsoft_VSTS_Common_Severity = 'High' 
                                                                AND H2.Microsoft_VSTS_Common_Severity = 'Low' 
                                                                AND H.System_ChangedDate BETWEEN DATEADD(dd, -14, GETDATE()) AND GETDATE()
                                                                AND H2.RecordCount = 1
WHERE H.ProjectNodeName = 'MyProject'
AND H.System_WorkItemType = 'Bug'
AND H.RecordCount = 1
ORDER BY H.System_Id ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:44:09.787

只需转到工作项类型........>我的查询，然后进行新的查询。它是一个简单的用户界面，可以让您轻松查询。您可以通过以下示例找到它：

团队项目 = 你的项目

工作项类型 = 错误

严重性=高

# c# - 如何组合从一个类继承的多个子类的所有功能

> ID：14259100
> 
> 赞同：0
> 
> 时间：2013-01-10T13:31:20.520
> 
> 标签：c#, subclass

我需要使用从一个类继承的不同子类中嵌入的几个函数。例如`ListViewA`，`ListViewB`从`ListView`. 子类来自第三方软件和开源。有没有一种简单的方法来组合所有功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:37:01.097

你可以尝试这样的事情：

```
foreach(ListView unknownListView in unknownObjectList)
{
    if (unknownListView is ListViewA )
    {
       var LWA = unknownListView as ListViewA;
       // ... do something with ListViewA 
    }
    if (unknownListView is ListViewB )
    {
       var LWB = unknownListView as ListViewB ;
       // ... do something with ListViewB 
    } 
} 
```

# ios - IOS。NSURLConnection 和 UIView 的 setNeedsDisplay 是否依赖 GCD 进行异步行为？

> ID：14259102
> 
> 赞同：0
> 
> 时间：2013-01-10T13:31:25.783
> 
> 标签：ios, nsurlconnection, grand-central-dispatch, nsurlconnectiondelegate, setneedsdisplay

我最近做了很多 GCD 和异步渲染和数据检索工作，我**真的**需要确定关于异步是如何完成的心智模型。

我想专注于`setNeedsDisplay`方法`NSURLConnectionDelegate`套件。

1.  异步调用 setNeedsDisplay 是否正确？我经常调用它，`dispatch_async(dispatch_get_main_queue(), ^{})`这让我感到困惑。
2.  回调被描述为异步的`NSURLConnectionDelegate`，但它们实际上并没有在主线程/运行循环上同时运行。我对这里的区别很模糊。

更一般地说，在 GCD 的现代 iOS 时代，制作 GCD 的最佳实践是什么，这些方法可以很好地结合在一起。我只是在这里寻找一般指导方针，因为我经常使用它们并且只是尽量不让自己陷入困境。

干杯，
道格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:07:56.873

1.  不，您通常不会`setNeedsDisplay`异步调用。但是，如果您是从主队列以外的队列调用它（我猜是这样），那么您应该注意，您永远不应该从后台队列进行 UI 更新。你总是从主队列运行那些。因此，这看起来像是将 UI 更新从后台队列分派到主队列的非常典型的模式。

2.  `NSURLConnection`被描述为异步，因为当您调用它时，除非您使用 ，否则您`sendSynchronousRequest`的应用程序会在连接进行时立即返回。委托事件在主队列上的事实与连接本身是异步的概念并不矛盾。就个人而言，如果我可以使用一些未从启动进程的同一队列调用的委托方法，我会认为这是一种不好的形式，除非通过接口相当明确。

3.  对于您的问题标题的问题，是否在`NSURLConnection`内部使用 GCD 与其他并发技术（`NSOperationQueue`线程等），这是我们作为应用程序开发人员通常不担心的内部实现问题。

4.  对于您关于指南的最后一个后续问题，我自愿提出我在上面提到的一般规则。也就是说，所有会阻塞用户界面的耗时进程都应该分派到后台队列，但是后台队列所需的任何后续 UI 更新都应该分派回主队列。这是我能想到的最普遍的经验法则，它概括了我们通常进行[并发编程](https://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091)的原因以及如何正确地进行。

# visual-studio - 用 TFS 下的标签替换分支解决方案

> ID：14259105
> 
> 赞同：0
> 
> 时间：2013-01-10T13:31:26.690
> 
> 标签：visual-studio, tfs

当解决方案在生产中发布时，通常我们会继续在相同的解决方案中开发下一个版本。但有时，生产版本包含错误，需要尽快更正（在下一个版本之前）。这个问题的解决方案可能是在 TFS 下使用分支（在需要时从 A 合并到 B 或 B 到 A 取决于...）。

此处显示了一个实施示例：http: [//hectorcorrea.com/blog/simple-branching-strategies-for-team-foundation-server](http://hectorcorrea.com/blog/simple-branching-strategies-for-team-foundation-server)

**我的问题**：我想知道我们是否可以轻松地用标签解决方案替换分支解决方案。如果是这样，怎么做？如果不是，为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:44:28.977

我会使用分支，除了您发布的链接之外，您还应该查看[TFS ALM Rangers 分支指南](http://vsarbranchingguide.codeplex.com/)。

为什么不使用标签？

1.  分支旨在完全支持您描述的场景，它是处理并行开发的标准方式。
2.  在 TFS 中，标签不是不可变的，即它们可以在创建后更改。
3.  标签没有历史记录，这意味着如果有人更改标签，您不知道谁、为什么或何时。因此，您不能“信任”一个标签来识别它在创建它时所做的相同代码。

# javascript - 将二维数组与一维数组进行比较并删除匹配条目 (JavaScript)

> ID：14259118
> 
> 赞同：0
> 
> 时间：2013-01-10T13:32:06.907
> 
> 标签：javascript, arrays

我有一个这样的二维数组：

```
all = [
    [bla, bla, ID1, bla, bla],
    [bla, bla, ID2, bla, bla],
    [bla, bla, ID3, bla, bla],
    [bla, bla, ID4, bla, bla],
    [bla, bla, ID5, bla, bla],
    [bla, bla, ID6, bla, bla]
] 
```

接下来，我有一个像这样的一维数组：

```
selected = [ID1, ID2, ID6] 
```

我需要从数组`all`中删除 ID 值与数组中的任何 ID 都不匹配的所有条目`selected`。从上面的例子中，我会得到一个像这样的新数组：

```
reduced = [
    [bla, bla, ID1, bla, bla],
    [bla, bla, ID2, bla, bla],
    [bla, bla, ID6, bla, bla]
] 
```

我怎样才能得到这样的数组？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:40:38.077

您可以使用这一行[`Array.prototype.filter`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/filter)

```
var reduced = all.filter(function (a) {return selected.indexOf(a[2]) !== -1;}); 
```

它只是意味着，如果`all[i][2]`（来自 ID col 的值）在所选数组中，则保留此条目。它会构建一个新的*Array*`all`，因此`selected`不会受到此过程的影响。

使用循环进行相同的测试可能会稍微快一些，因为这意味着更少的函数开销

```
var reduced = [], i = 0;
for (; i<all.length; ++i)
    if (selected.indexOf(all[i][2]) !== -1)
        reduced[reduced.length] = all[i]; 
```

# php - 即使脚本稍后出现错误，强制 PHP 执行包含

> ID：14259119
> 
> 赞同：0
> 
> 时间：2013-01-10T13:32:08.893
> 
> 标签：php, parsing, include

我正在尝试创建一个系统，通过添加一个包含，我可以将 PHP 设置为显示错误（php.ini 文件可以防止这种情况发生）。换句话说：

```
<?php
    include "showerrors.php";
    // Produce Error
    ERROR;
?> 
```

这将产生一个解析错误并且“showerrors.php”不会被执行，这意味着错误永远不会被显示。但是，如果确实执行了“showerrors.php”，则会显示错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:35:38.513

如果你有一个*解析错误*，即*无效的语法*，那么文件中的代码将不会被执行，因为该文件无法被解析。这包括`include`声明。就这么简单，没办法。确保您的文件至少具有*正确的语法*并不难，此类工具已集成到大多数编辑器和 IDE 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:36:20.900

您应该完全相反 - 在 showerrors.php 中打开错误报告并包含请求的文件（您可以通过 mod_rewrite / 服务器支持的任何内容将所有请求重定向到 showerrors.php，然后包含请求的文件）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:45:20.597

如果出现解析错误，PHP 将无法执行。询问是否可以强制 PHP 在出现错误后继续执行就像询问是否可以强制汽车启动，即使引擎被炸毁 - 它只是不可能发生。

# c# - 字节数组到pdf

> ID：14259121
> 
> 赞同：40
> 
> 时间：2013-01-10T13:32:10.513
> 
> 标签：c#, file, writeallbytes

我正在尝试将存储在 sql 列中的文件的内容转换为 pdf。

我使用以下代码：

```
byte[] bytes;
BinaryFormatter bf = new BinaryFormatter();
MemoryStream ms = new MemoryStream();
bf.Serialize(ms, fileContent);
bytes = ms.ToArray();
System.IO.File.WriteAllBytes("hello.pdf", bytes); 
```

从某种意义上说，生成的 pdf 已损坏，因为当我在 notepad++ 中打开 pdf 时，我看到了一些垃圾标题（无论文件内容如何，​​它都是相同的）。垃圾标题是 NUL SOH NUL NUL NUL ....

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2013-01-10T13:35:57.017

您不应该`BinaryFormatter`为此使用 - 用于将 .Net 类型序列化为二进制文件，以便可以将它们作为 .Net 类型再次读取。

如果它存储在数据库中，希望，作为`varbinary`- 那么您需要做的就是从中获取字节数组（这将取决于您的数据访问技术 - 例如，EF 和 Linq to Sql 将创建一个映射，使获取字节数组很简单），然后像在最后一行代码中一样将其写入文件。

运气好的话-我希望这`fileContent`是字节数组？在这种情况下，你可以做

```
System.IO.File.WriteAllBytes("hello.pdf", fileContent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-11-06T00:46:04.070

如果字节数组有问题，通常会发生这种情况。

```
File.WriteAllBytes("filename.PDF", Byte[]); 
```

这将创建一个新文件，将指定的字节数组写入文件，然后关闭文件。如果目标文件已存在，则将其覆盖。

也可以使用异步实现。

```
public static System.Threading.Tasks.Task WriteAllBytesAsync 
(string path, byte[] bytes, System.Threading.CancellationToken cancellationToken = null); 
```

# jquery - Masonry.js 列号随浏览器宽度变化

> ID：14259123
> 
> 赞同：3
> 
> 时间：2013-01-10T13:32:12.403
> 
> 标签：jquery, responsive-design, jquery-masonry

如何在浏览器窗口宽度上更改 Masonry 中的列数？

像这样的东西：

```
@media all and (min-device-width: 320px) and (max-device-width : 480px) { 2 columns }
@media all and (min-device-width : 768px) and (max-device-width : 1024px) { 3 columns }
@media all and (min-width : 1024px) { 4 columns } 
```

```
$('#content .home').masonry({
    //options
    itemSelector : '.item',
    columnWidth : function(containerWidth) {
        return containerWidth / 2; 
    },
    isAnimated: true
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T13:05:11.250

尝试这样的事情：

```
jQuery(document).ready(function($) {
var CollManag = (function() {
    var $ctCollContainer = $('#grid'),
    collCnt = 1,
    init = function() {
        changeColCnt();
        initEvents();
        initPlugins();
    },
    changeColCnt = function() {
        var w_w = $(window).width();
        if( w_w <= 480 ) n = 1;
        else if( w_w <= 700 ) n = 2;
        else n = 3;
    },
    initEvents = function() {
        $(window).on( 'smartresize.CollManag', function( event ) {
            changeColCnt();
        });
    },
    initPlugins = function() {
        $ctCollContainer.imagesLoaded( function(){
            $ctCollContainer.masonry({
                itemSelector : '.box_item',
                columnWidth : function( containerWidth ) {
                    return containerWidth / n;
                },
                isAnimated : true,
                animationOptions: {
                    duration: 400
                }
            });
        });

    };
    return { init: init };
})();
CollManag.init();
}); 
```

或者

```
$( window ).load( function()
{
    var columns    = 3,
        setColumns = function() { columns = $( window ).width() > 700 ? 3 : $( window ).width() > 480 ? 2 : 1 };

    setColumns();
    $( window ).resize( setColumns );

    $( '#grid' ).masonry(
    {
        itemSelector: '.box_item',
        gutterWidth: 0,
        isAnimated: true,
        columnWidth:  function( containerWidth ) { return containerWidth / columns; }
    });
}); 
```

# sockets - Socket编程客户端连接

> ID：14259130
> 
> 赞同：1
> 
> 时间：2013-01-10T13:32:37.780
> 
> 标签：sockets, tcp, serversocket

我正在使用客户端-服务器编程我指的是这个[链接](http://www.linuxhowtos.org/C_C++/socket.htm)，我的服务器正在成功运行。

1.  我需要不断地向服务器发送数据。
2.  我不想每次在发送每个数据包之前都连接（）。所以第一次我只是创建了一个套接字并发送第一个数据包，其余的数据我只是使用 write() 函数将数据写入套接字。

但我的问题是，如果服务器不存在或我的以太网被禁用，它仍然成功地将数据写入套接字，则在连续发送数据时。

有没有什么方法可以让我一次创建套接字并在知道服务器故障的情况下连续发送数据？

这样做的主要原因是，在服务器端，我使用的是 GPRS 调制解调器，并且每次为每个数据包调用 connect() 函数时，调制解调器都会挂起。

为了创建套接字，我使用下面的代码

```
Gprs_sockfd = socket(AF_INET, SOCK_STREAM, 0);
if (Gprs_sockfd < 0)
{
  Display("ERROR opening socket");
  return 0;
}
server = gethostbyname((const char*)ip_address);
if (server == NULL)
{               
  Display("ERROR, no such host");                
  return 0;
}

bzero((char *) &serv_addr, sizeof(serv_addr));
serv_addr.sin_family = AF_INET;
bcopy((char *)server->h_addr,(char *)&serv_addr.sin_addr.s_addr,server->h_length);
serv_addr.sin_port = htons(portno);
if (connect(Gprs_sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0)
{
  Display("ERROR connecting");
  return 0;
} 
```

每次我使用下面的代码写入套接字时

```
n = write(Gprs_sockfd,data,length);
if(n<0)
{
  Display("ERROR writing to socket");
  return 0;
} 
```

提前致谢.............

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:05:45.643

TCP 旨在容忍临时故障。它进行字节排序、确认，并在必要时进行重传。所有未确认的数据都缓存在内核网络堆栈中。如果我没记错的话，默认值是三次重传尝试（如果我错了，请有人纠正我），并带有指数回退超时。这很快就会增加几十秒，如果不是几分钟的话。

我的建议是在你的协议中设计*应用程序级别的*确认，这意味着服务器会发送一个简短的回复，说它到目前为止收到了这么多数据，比如每秒。如果客户端在 3 秒内没有收到吮吸确认，则客户端知道连接不可用并可以关闭它。顺便说一句，使用非阻塞套接字和轮询函数（如[`select(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)or ）更容易做到这一点[`poll(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)。

### 编辑0：

我认为这在这里非常相关- [“最终的 SO_LINGER 页面，或者：为什么我的 tcp 不可靠”](http://blog.netherlabs.nl/articles/2009/01/18/the-ultimate-so_linger-page-or-why-is-my-tcp-not-reliable)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:25:27.590

Nikolai 在这里是正确的，您在这里遇到的行为是可取的，因为基本上您可以在网络中断后继续传输数据，而无需在应用程序中使用任何逻辑。如果您的应用程序应该检测到超过指定时间的中断，您需要将*心跳*添加到您的协议中。这是解决问题的标准方法。它还可以让您检测网络正常，接收器还活着，但它已经死锁（由于软件错误）的情况。

心跳可以像 Nikolai 提到的那样简单——每 X 秒发送一个小数据包；如果服务器在 N*X 秒内看不到数据包，则连接将被丢弃。

# eclipse - 让 Eclipse 在我的 Java Web 应用程序中自动重新加载 JSP 页面

> ID：14259134
> 
> 赞同：2
> 
> 时间：2013-01-10T13:32:52.763
> 
> 标签：eclipse, jsp, tomcat

我得到了一个 Struts 项目的模板来处理，我注意到当我在 Eclipse 中的集成 Tomcat 上运行 Web 项目并对 .jsp 视图页面进行更改时，它们不会在几秒钟后自动重新加载 - 这确实发生在我自己制作的其他项目中。

所以我认为这是一个配置问题，我做了一些研究，查看了我的 Tomcat 服务器设置：

> (x) 资源变化时自动发布（1秒间隔）

但是因为我自己的项目重新加载并且我为它们使用相同的服务器，所以我认为这一定是一个特定于应用程序的问题。所以我看了`context.xml`看这里是否有什么要改变的

```
<Context 
...
reloadable="true"
...
> 
```

我只能假设告诉服务器确实在更改时重新加载应用程序。

所以我真的想不通。在我看来，这里一切都井井有条。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:27:14.447

[从关于Context 属性](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Common_Attributes)的 Apache Tomcat 文档：

> **可重新加载**
> 
> 如果您希望 Catalina**监视 /WEB-INF/classes/ 和 /WEB-INF/lib 中的类的更改，则设置为 true ，并在检测到更改时自动重新加载 Web 应用程序**。此功能在应用程序开发期间非常有用，但它需要大量运行时开销，因此不建议在已部署的生产应用程序中使用。这就是该属性的默认设置为 false 的原因。但是，您可以使用 Manager Web 应用程序来按需触发重新加载已部署的应用程序。

也许这对你来说会很有趣：[Using Tomcat Reload Features To Speed up Development](http://www.mulesoft.com/tomcat-reload)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-28T11:15:23.020

我遇到了同样的问题，我通过其 Maven .pom 文件将 Java/Spring 项目导入 Eclipse。

我发现我必须使用“调试”而不是“运行”来运行项目 - 只有这样，我的 .jsp 文件的更改才会被注意到，因此重新加载网页几乎会立即显示更改。

# llvm - LLVM ICmpInst 到指令转换

> ID：14259138
> 
> 赞同：0
> 
> 时间：2013-01-10T13:33:10.387
> 
> 标签：llvm

我想要一些关于 LLVM 通行证的建议。我的特殊问题是：

有一种方法

```
bool patternDC::runOnFunction(Function &F) {
...
    if ( CC->operEquiv(icmpInstrArray[i], icmpInstrArray[j]) ) {...}
...
} 
```

具有指令*类型的数组元素。

调用的方法是

```
bool ifChecker::operEquiv(Instruction *I1, Instruction *I2)
{
...
} 
```

但我想使用 operEquiv 中的 ICmpInst 类中的方法。我不能做类似的事情

```
ICmpInst** II1 = dyn_cast<ICmpInst*>(I1); 
```

（一种来自 Java 的 instanceOf()），存在转换编译问题。

ICmpInst 类在[http://llvm.org/doxygen/Instructions_8h_source.html](http://llvm.org/doxygen/Instructions_8h_source.html) 的第 913 行定义继承图在[http://llvm.org/doxygen/classllvm_1_1ICmpInst.html](http://llvm.org/doxygen/classllvm_1_1ICmpInst.html)

我想对指令类型的对象使用 ICmpInst 方法。这些方法很难复制/复制。我最好使用什么解决方案来解决这个问题？我应该使用访客模式（我不太了解）吗？

感谢您的任何建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:52:06.780

执行演员表的正确方法是：

```
ICmpInst* II1 = dyn_cast<ICmpInst>(I1); 
```

（去掉多余的星号）

# python - 使用python登录quora

> ID：14259144
> 
> 赞同：2
> 
> 时间：2013-01-10T13:33:33.993
> 
> 标签：python, proxy, urllib2, urllib, cookielib

我尝试使用python登录quora。但它给了我以下错误。

```
urllib2.HTTPError: HTTP Error 500: Internal Server Error 
```

这是我到目前为止的代码。我也在代理后面工作。

```
import urllib2
import urllib
import re
import cookielib

class Quora:
    def __init__(self):
         '''Initialising and authentication'''

         auth = 'http://name:password@proxy:port' 
         cj = cookielib.CookieJar()
         logindata = urllib.urlencode({'email' : 'email' , 'password' : 'password'})
         handler = urllib2.ProxyHandler({'http' : auth})
         opener = urllib2.build_opener(handler , urllib2.HTTPCookieProcessor(cj))
         urllib2.install_opener(opener)
         a = urllib2.urlopen('http://www.quora.com/' , logindata)

def main():
    Quora() 
```

有人可以指出什么是错的吗？

```
if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T19:06:58.417

尝试这样的事情：

```
# Load proxies
proxies = []
proxies_fp = open('proxies.txt', 'r') # A list of proxies
for proxy in proxies_fp:
        proxies.append(proxy)

cookiejar = cookielib.CookieJar()

def perform_request(url, opener, credientials):
        # Instantiate our request object
        request = urllib2.Request(url)

        # Perform the request, returning a pointer to the result set.
        result = opener.urlopen(request, credentials)

        return result

credentials ={
        'username' : 'username',
        'password' : 'password'
        }

encoded_credentials = urllib.urlencode(credentials)

def main():
        # Get random proxy
        proxy = random.choice(proxies)

        # Install our proxy
        opener = urllib2.build_opener(
            urllib2.ProxyHandler({'http': proxy}),
            urllib2.HTTPRedirectHandler(),
            urllib2.HTTPHandler(debuglevel=0),
            urllib2.HTTPSHandler(debuglevel=0),
            urllib2.HTTPCookieProcessor(cookiejar),
            )
        urllib2.install_opener(opener)
        a = perform_request(url, opener, encoded_credentials) 
```

--**未经测试**--

我不得不做类似的事情，它以这种方式对我有用。（请注意，这不是我使用的代码的精确副本。我不得不对其进行一些操作，并且没有测试）

# gwt - GWT Grid 编辑 Tab 顺序

> ID：14259145
> 
> 赞同：0
> 
> 时间：2013-01-10T13:33:40.857
> 
> 标签：gwt, gxt

我使用 GXT（煎茶 3.0.1 版）

我有这样的网格：

![在此处输入图像描述](../Images/712838c70e579135f71817176b4b6933.png)

当我选择第二个列并尝试移动下一个列时，使用 Tab 键移动并且它工作正常，但是当我从组合中选择任何值并尝试移动下一个列后，它会转到其他地方（网格之外）。

该怎么办？我需要将焦点（编辑下一列）放在 Tab 键上。试过这个但不起作用：

```
combo2.addSelectionHandler( new SelectionHandler<Street>() {
    @Override
    public void onSelection( SelectionEvent<Street> event ) { 
        grid.getSelectionModel().selectNext( false );
    }
} ); 
```

该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:19:18.427

```
combo2.addSelectionHandler(new SelectionHandler<Street>() {

            @Override
            public void onSelection(SelectionEvent<Street> event) { 
                streetCombo.resetFocus(null, grid.getView().getCell(0, 2), null);
            }
        }); 
```

我现在完成了这个和它的工作，当你选择值时它跳转到下一个组合框（0,2 表示 0 行和 2 列）

# editor - 如何在 Qt Creator 中设置基本的键盘快捷键？

> ID：14259147
> 
> 赞同：1
> 
> 时间：2013-01-10T13:33:45.053
> 
> 标签：editor, keyboard-shortcuts, qt-creator

例如，我可以指定 ctrl+p 像向上箭头一样向上移动一条线吗？或者 ctrl+f 像右箭头一样行动？

似乎缺少最基本的键盘快捷键。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T21:19:37.563

您可以在以下位置编辑键盘快捷键：工具 -> 选项 -> 环境 -> 键盘，包括导入一组新快捷键。

# c# - 跨视图/表单的事件处理（MVP-VM 框架）

> ID：14259150
> 
> 赞同：0
> 
> 时间：2013-01-10T13:33:53.353
> 
> 标签：c#, events, architecture, mvp

建筑，事件流程 -

**类型 1**

1.  MainForm - 创建演示者
2.  然后演示者创建并显示视图。

**类型 2 - 网格**

1.  MainForm - 创建一个网格演示器
2.  网格中的每一行都链接到一个详细信息表单 - DetailPresenter
3.  双击后，grid-presenter 创建了一个 detail Presenter，然后 detail Presenter 创建并显示视图。

问题 - 视图需要刷新或演示者需要重新加载数据。例如，有两个表单 A 和 B。当两者同时打开时，A 中的任何更改都应该触发 B 中的刷新。还有一种情况是 Type 1 表单应该刷新网格。

我想避免主窗体保留每个演示者的引用并触发必要事件的解决方案。到目前为止，我只能想到静态事件。我想解决跨视图消息传递的更高问题。有更好的解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:01:28.383

将评论附在答案中：

这里需要的是[事件聚合器](https://stackoverflow.com/questions/2343980/event-aggregator-implementation-sample-best-practices)模式。

正如您所建议的，[简单的 Messenger 实现](http://www.minddriven.de/index.php/technology/development/design-patterns/event-aggregator-implementation)应该工作得很好，如果您想推出自己的，您可以随时查看[Caliburn.Micro 实现或](http://caliburnmicro.codeplex.com/SourceControl/changeset/view/7e9f69969a0e#src/Caliburn.Micro.Silverlight/EventAggregator.cs)[MVVM Light Toolkit](http://mvvmlight.codeplex.com/SourceControl/changeset/view/0f4486b50609)中的 Mvvm Light Messenger 以获得灵感。

# c++ - 转换为完整的 BST 函数

> ID：14259153
> 
> 赞同：0
> 
> 时间：2013-01-10T13:34:10.487
> 
> 标签：c++, recursion, binary-search-tree

我需要将 bst 中的数据保存到排序数组中，然后，该`ConvertToCompleteBST`函数清除当前树并使用数组通过在每次调用中插入中间值来递归地重新插入值。

```
InsertRecursively(data_array,size); 
```

例如，如果数组是 [5 7 10 12 16 18 30]

然后`InsertRecursively([5 7 10 12 16 18 30],7)`首先被调用，

中间是**12**所以 12 是第一个插入到树中的。然后在递归调用中，它会做同样的事情，但对于

```
InsertRecursively([5 7 10],3)
InsertRecursively([16 18 30],3) 
```

然后，`InsertRecursively([5 7 10],3)`将导致插入节点**7**和另外两个递归调用

`InsertRecursively([5],1)` >> 导致插入节点 5

`InsertRecursively([10],1)`>> 导致插入节点 10

当 size 为 1 时，它将停止递归调用。

我不知道如何实现 insertRecursively 功能

# php - 正则表达式将查询字符串转换为斜杠和值

> ID：14259155
> 
> 赞同：0
> 
> 时间：2013-01-10T13:34:20.020
> 
> 标签：php, regex

PHP中的正则表达式是什么：

```
?take=2&skip=0&page=1&pageSize=2&comment=the%20comment 
```

进入：

```
/2/0/1/2/the%20comment 
```

* * *

谢谢，我做了以下事情：

```
$qPos = strpos($url, '?') ;

        $queryString = substr($url, $qPos+1) ;

        parse_str($queryString, $params) ;
        foreach($params as $param) {
            $pString .= '/'.$param ; 
        }
        $url = substr($url, 0, $qPos).$pString ; 
        echo $url ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:44:01.570

你不能使用 $_GET 变量吗？例如：

```
$name = $_GET['name'];
$skip = $GET['skip'];
$str = $name . " " . $skip etc etc 
```

# c# - 创建二级 AppDomain 挂起

> ID：14259157
> 
> 赞同：4
> 
> 时间：2013-01-10T13:34:35.247
> 
> 标签：c#, .net, mono, appdomain

我有两个带有 Main 方法的程序集。

*   第一个执行另一个。
*   第二个程序集在新的 AppDomain 中创建一个对象。
*   该对象即将创建一个文件或在屏幕上打印一些东西。

第一个组件（简化示例）：

```
class MainClass
{
    public static void Main(string[] args)
    {
        var domain = AppDomain.CreateDomain("server");
        new Task(() => domain.ExecuteAssembly(PathToSecondAssembly)).Start();
        new ManualResetEvent(false).WaitOne(); //wait forever
    }
} 
```

第二个：

```
class MainClass
{
    public static void Main(string[] args)
    {
        var domain = AppDomain.CreateDomain("name");
        Console.WriteLine ("A");

        domain.CreateInstance(Assembly.GetExecutingAssembly().FullName,
            typeof(Run).FullName, false, 0, null, 
            new object[0], null, new object[0]);

        Console.WriteLine ("B");
        new ManualResetEvent(false).WaitOne();
    }
}

class Run
{
    public Run()
    {
            File.Create("something");
            Console.WriteLine ("C");
    }
} 
```

结果因我执行的程序而异。

如果我运行**第二个** `Main`，我会得到：

```
A
C
B 
```

并创建文件。我将其视为第二个应用程序有效的证据。

当我运行第**一个** `Main`时，我只得到：

```
A 
```

并且文件没有出现。应用程序不会崩溃，但会挂起。

我已经在 .NET 4 和 Mono 2.10.9 和 3.0.3 (~git head) 上验证了它。

这是为什么？我怎么能覆盖这个问题？

# ==编辑==

（在 .NET 上测试）

我越来越糊涂了。

我有一个问题`PathToSecondAssembly`。当二进制文件在保存文件夹中时，一切似乎都很好（在 .NET 4.0 上测试，但我也假设为单声道）。

当我使用相对路径或不同目录的路径时，结果如下：

*   在 Visual Studio 2010 的调试中我得到了`FileNotFoundException`，**但显示了**A。

信息：

```
Could not load file or assembly 'test2, Version=1.0.0.0,
Culture=neutral, PublicKeyToken=null' or one of its dependencies. 
```

在第一次组装时出现异常：

```
new Task(() => domain.ExecuteAssembly(PathToSecondAssembly)).Start(); 
```

*   在没有调试的情况下运行时，只打印 A，但没有任何反应。

因此找到了程序集（打印了 A），但不知何故出现了异常。

我真的不知道为什么。某种权限问题？如何克服这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T23:51:47.123

我曾经遇到过类似的问题（我没有做同样的事情，但是从第二个域创建第三个域的失败使我脑海中浮现出记忆，然后 FileNotFoundException 那种证实了“我的恐惧”）。

这不是什么好证据无法解决的。正如 MSDN 所述：http: [//msdn.microsoft.com/en-us/library/system.security.policy.evidence.aspx](http://msdn.microsoft.com/en-us/library/system.security.policy.evidence.aspx)

***证据** 定义构成安全策略决策输入的信息集。这个类不能被继承。*

所以只需这样做：

```
class MainClass
{
  public static void Main(string[] args)
  {  
    var currentEvidence = AppDomain.CurrentDomain.Evidence;
    var domain = AppDomain.CreateDomain("server", securityInfo: currentEvidence);
    new Task(() => domain.ExecuteAssembly(PathToSecondAssembly)).Start();
    new ManualResetEvent(false).WaitOne(); //wait forever
  }
} 
```

如果您计划启动第四个域（等等），请继续将证据从一个“信任者”传递给另一个“受托者”：

```
class MainClass
{
  public static void Main(string[] args)
  {
    var evAgain = AppDomain.CurrentDomain.Evidence;
    var domain = AppDomain.CreateDomain("name", securityInfo: evAgain);
    Console.WriteLine ("A");

    domain.CreateInstance(Assembly.GetExecutingAssembly().FullName,
        typeof(Run).FullName, false, 0, null, 
        new object[0], null, new object[0]);

    Console.WriteLine ("B");
    new ManualResetEvent(false).WaitOne();
  }
} 
```

希望这就是问题所在。

# silverlight - 在 Silverlight 中使用 DataPager 控件跳转到选定页面

> ID：14259158
> 
> 赞同：0
> 
> 时间：2013-01-10T13:34:36.457
> 
> 标签：silverlight, silverlight-5.0, datapager

我的视图中有两个按钮。一个是下载书，另一个是查看书。当我单击查看按钮时，我导航到其他页面并保存 DataPager 当前页面。并且在导航回来时，我必须在 DataPager 中显示以前保存的页面。

是否有任何方法或属性可用于跳转到 Silverlight 5 中 DataPager 控件中的选定页面。

我已经使用 PageIndex 获得了当前页码，但找不到导航回同一页面的方法。每次页面从 1 和 PageIndex 0 开始。

任何帮助将不胜感激。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T11:15:50.770

做一个像这样的事件

```
((BooksViewModel)LayoutRoot.DataContext).PropertyChanged += new PropertyChangedEventHandler(BooksView_PropertyChanged); 
```

并调用

```
void BooksView_PropertyChanged(object sender, PropertyChangedEventArgs e)
    {
        if (e.PropertyName == "AnyDistinguishedstring")
        {
            Pager.PageIndex = 4; //it will take you to the page 5
        }
    } 
```

并从 Viewmodel 调用

```
NotifyPropertyChanged("AnyDistinguishedstring"); 
```

会成功的。:)

# php - 用 == 比较 PHP 中的不同字符串返回 true

> ID：14259162
> 
> 赞同：3
> 
> 时间：2013-01-10T13:34:51.863
> 
> 标签：php, string, comparison, string-comparison, comparison-operators

我只是在调试一个脚本，发现 if 语句没有按我预期的方式工作。

```
var_dump("6064365413078728979" == "6064365413078728452");
die(); 
```

上面的代码将产生以下结果：

```
bool(true) 
```

使用 === 运算符，它可以按预期工作。任何人有任何想法为什么？

我在 x64 Windows 机器上使用 PHP 版本 5.3.13 和 wamp 安装。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T13:39:15.020

PHP具有松散的类型比较行为，因此您的数字字符串在`==`非严格比较之前被转换为整数类型，并且转换结果溢出。

这是在可能的情况下使用的主要原因`===`。

查看[此页面](http://php.net/manual/en/language.types.type-juggling.php)以获取有关类型杂耍的更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T13:46:24.637

```
<?php
$a=6064365413078728979;
$b=6064365413078728452;
echo $a."<br>".$b;
//var_dump( $a==$b );
die();
?> 
```

当你运行它时，在你的机器上可能会超过一个数字的限制，这是一个数字比较发生。试试上面的脚本，看看 $a 的值可能与你给出的值不同。

这就是为什么当两者在数字上进行比较时，它们是相等的。因此 ，按照其他人的建议使用**===**

编辑：基于@Axel 建议的解释。

[PHP手册](http://php.net/manual/en/language.types.float.php)解释

> 浮点数的大小取决于平台，尽管最大约 1.8e308 和大约 14 位十进制数字的精度是一个常见值（64 位 IEEE 格式）。

[这个网站](http://www.herongyang.com/PHP/Data-Type-Overflow-of-Integer-and-Float-Values.html)提供和解释溢出现象和一个小的 php 代码来测试你的系统的整数和浮点范围。了解服务器上的限制很可能最好地解释为什么会出现报价流

# java - 尝试使用 EhCache 使用 Spring 和扩展 Hibernate 的 JpaRepository 的自定义 GenericDao 接口

> ID：14259165
> 
> 赞同：2
> 
> 时间：2013-01-10T13:35:02.203
> 
> 标签：java, spring, hibernate, ehcache, genericdao

**背景**

这是我的工作（简化）`GenericDao`界面，由 any 实现`DomainDao`：

*GenericDao.java*

```
@NoRepositoryBean
public interface GenericDao<E extends Persistable<K>, K extends Serializable> extends JpaRepository<E, K> {

    public List<E> findAll();

    public E persist(E entity);

} 
```

*GenericDaoImpl.java*

```
public class GenericDaoImpl<E extends Persistable<K>, K extends Serializable> extends SimpleJpaRepository<E, K> implements GenericDao<E, K> {

    private final JpaEntityInformation<E, ?> entityInformation;
    private final EntityManager em;
    private final Class<E> type;

    public GenericDaoImpl(JpaEntityInformation<E, ?> entityInformation, EntityManager em) {
        super(entityInformation, em);
        this.entityInformation = entityInformation;
        this.em = em;
        this.type = entityInformation.getJavaType();
    }

    @Override
    public List<E> findAll() {
        return super.findAll();
    }

    @Override
    @Transactional
    public E persist(E entity) {
        if (entityInformation.isNew(entity) || !EntityUtils.isPrimaryKeyGenerated(type) && !em.contains(entity)) {
            em.persist(entity);
        }
        return entity;
    }

} 
```

例如，要管理域`Foo`和`Bar`，您只需要创建两个接口，如下所示：

*FooDao.java*

```
public interface FooDao extends GenericDao<Foo, Integer> {

} 
```

*巴道.java*

```
public interface BarDao extends GenericDao<Bar, Integer> {

} 
```

的[`@Autowired`](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/beans/factory/annotation/Autowired.html)注解`Spring`将自动实例化`GenericDaoImpl`具有良好实体和主键类型的 a。

* * *

**问题**

我现在正在尝试使用 EhCache 和[EhCache Spring Annotations](http://code.google.com/p/ehcache-spring-annotations/)模型在我的 DAO 上添加一个缓存过程。

*GenericDao.java*

```
@NoRepositoryBean
public interface GenericDao<E extends Persistable<K>, K extends Serializable> extends JpaRepository<E, K> {

    @Cacheable(cacheName = "dao")
    public List<E> findAll();

    @TriggersRemove(cacheName = "dao")
    public E persist(E entity);

} 
```

*应用程序上下文.xml*

```
<ehcache:annotation-driven cache-manager="ehCacheManager" />    
<bean id="ehCacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" /> 
```

*ehcache.xml*

```
<cache name="dao"
    eternal="false"
    maxElementsInMemory="10000"
    overflowToDisk="false"
    timeToIdleSeconds="86400"
    timeToLiveSeconds="86400"
    memoryStoreEvictionPolicy="LFU" /> 
```

使用 , 的问题`GenericDao`是缓存应该相互`DomainDao`独立地管理。例如，在当前配置下，如果我调用`fooDao.findAll()`, 然后`barDao.persist(new Bar())`，生成的缓存`fooDao.findAll()`将被重置，因为会使用相同的缓存（即`<cache name="dao" />`），而它不应该使用。

* * *

**小径**

我尝试实现自己的[`CacheKeyGenerator`](http://code.google.com/p/ehcache-spring-annotations/wiki/CacheKeyGenerators)，这将考虑到调用的类型`DomainDao`：

*应用程序上下文.xml*

```
<ehcache:annotation-driven cache-manager="ehCacheManager" default-cache-key-generator="daoCacheKeyGenerator" />    
<bean id="ehCacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" />
<bean id="daoCacheKeyGenerator" class="myapp.dao.support.DaoCacheKeyGenerator" /> 
```

*DaoCacheKeyGenerator.java*

```
public class DaoCacheKeyGenerator implements CacheKeyGenerator<DaoCacheKey> {

    @Override
    public DaoCacheKey generateKey(MethodInvocation methodInvocation) {
        Class<?> clazz = methodInvocation.getThis().getClass().getInterfaces()[0];
        Method method = methodInvocation.getMethod();
        String methodName = method.getName();
        Class<?>[] parameterClasses = method.getParameterTypes();
        return new DaoCacheKey(clazz, methodName, parameterClasses);
    }

    @Override
    public DaoCacheKey generateKey(Object... data) {
        return null;
    }
} 
```

*DaoCacheKey.java*

```
public class DaoCacheKey implements Serializable {

    private static final long serialVersionUID = 338466521373614710L;

    private Class<?> clazz;
    private String methodName;
    private Class<?>[] parameterClasses;

    public DaoCacheKey(Class<?> clazz, String methodName, Class<?>[] parameterClasses) {
        this.clazz = clazz;
        this.methodName = methodName;
        this.parameterClasses = parameterClasses;
    }

    @Override
    public boolean equals(Object obj) { // <-- breakpoint
        if (obj instanceof DaoCacheKey) {
            DaoCacheKey other = (DaoCacheKey) obj;
            if (clazz.equals(other.clazz)) {
                // if @TriggersRemove, reset any cache generated by a find* method of the same DomainDao
                boolean removeCache = !methodName.startsWith("find") && other.methodName.startsWith("find");
                // if @Cacheable, check if the result has been previously cached
                boolean getOrCreateCache = methodName.equals(other.methodName) && Arrays.deepEquals(parameterClasses, other.parameterClasses);
                return removeCache || getOrCreateCache;
            }
        }
        return false;
    }

    @Override
    public int hashCode() { // <-- breakpoint
        return super.hashCode();
    }

} 
```

上面的问题`DaoCacheKey`是该`equals`方法从未被调用（至少程序永远不会中断），但是该方法`hashCode`确实如此，因此无法应用该算法。

* * *

**问题**

有没有人已经管理过这样的缓存？如果是怎么办？我的尝试是否相关？如果是，如何使`equals`方法被调用，而不是那个`hashCode`？通过扩展现有的[`CacheKeyGenerator`](http://code.google.com/p/ehcache-spring-annotations/wiki/CacheKeyGenerators)? 如果是，是哪一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T10:22:12.490

这是我最终采用的工作解决方案。只有几个精度：我的域都实现了[`Persistable`](http://static.springsource.org/spring-data/data-commons/docs/1.0.0.RELEASE/api/org/springframework/data/domain/Persistable.html)Spring 的接口。此外，由于我使用的是反射，我不确定缓存过程节省的时间不会减少一点......

*应用程序上下文.xml*

```
<ehcache:annotation-driven cache-manager="ehCacheManager" default-cache-key-generator="daoCacheKeyGenerator" />    
<bean id="ehCacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" />
<bean id="daoCacheKeyGenerator" class="myapp.dao.support.cache.DaoCacheKeyGenerator" /> 
```

*DaoCacheKeyGenerator.java（使用[gentyref](http://code.google.com/p/gentyref/)库）*

```
public class DaoCacheKeyGenerator implements CacheKeyGenerator<DaoCacheKey> {

    @SuppressWarnings("unchecked")
    @Override
    public DaoCacheKey generateKey(MethodInvocation methodInvocation) {
        Method method = methodInvocation.getMethod();
        Class<? extends GenericDao<?, ?>> daoType = (Class<? extends GenericDao<?, ?>>) methodInvocation.getThis().getClass().getInterfaces()[0];
        Class<? extends Persistable<?>> domainType = getDomainType(daoType);
        String methodName = method.getName();
        Class<?>[] parameterTypes = method.getParameterTypes();
        Object[] parameters = methodInvocation.getArguments();
        return new DaoCacheKey(domainType, methodName, parameterTypes, parameters);
    }

    @SuppressWarnings("unchecked")
    private Class<? extends Persistable<?>> getDomainType(Class<?> daoType) {
        Type baseDaoType = GenericTypeReflector.getExactSuperType(daoType, GenericDao.class);
        ParameterizedType parameterizedBaseDaoType = (ParameterizedType) baseDaoType;
        return (Class<? extends Persistable<?>>) parameterizedBaseDaoType.getActualTypeArguments()[0];
    }

    @Override
    public DaoCacheKey generateKey(Object... data) {
        return null;
    }

} 
```

*DaoCacheKey.java*

```
public class DaoCacheKey implements Serializable {

    private static final long serialVersionUID = 338466521373614710L;

    private Class<? extends Persistable<?>> domainType;
    private String methodName;
    private Class<?>[] parameterTypes;
    private Object[] parameters;

    public DaoCacheKey(Class<? extends Persistable<?>> domainType, String methodName, Class<?>[] parameterTypes, Object[] parameters) {
        this.domainType = domainType;
        this.methodName = methodName;
        this.parameterTypes = parameterTypes;
        this.parameters = parameters;
    }

    public Class<? extends Persistable<?>> getDomainType() {
        return domainType;
    }

    @Override
    public boolean equals(Object obj) {
        return this == obj || obj instanceof DaoCacheKey && hashCode() == obj.hashCode();
    }

    @Override
    public int hashCode() {
        return Arrays.hashCode(new Object[] { domainType, methodName, Arrays.asList(parameterTypes), Arrays.asList(parameters) });
    }

} 
```

*ehcache.xml*

```
<cache name="dao"
    eternal="false"
    maxElementsInMemory="10000"
    overflowToDisk="false"
    timeToIdleSeconds="86400"
    timeToLiveSeconds="86400"
    memoryStoreEvictionPolicy="LFU">
    <cacheEventListenerFactory class="myapp.dao.support.cache.DaoCacheEventListenerFactory" />
</cache> 
```

*DaoCacheEventListenerFactory.java*

```
public class DaoCacheEventListenerFactory extends CacheEventListenerFactory {

    @Override
    public CacheEventListener createCacheEventListener(Properties properties) {
        return new DaoCacheEventListener();
    }

} 
```

*DaoCacheEventListener.java*

```
public class DaoCacheEventListener implements CacheEventListener {

    @SuppressWarnings("unchecked")
    @Override
    public void notifyElementRemoved(Ehcache cache, Element element) throws CacheException {
        DaoCacheKey daoCachekey = (DaoCacheKey) element.getKey();
        List<Class<? extends Persistable<?>>> impacts = getOneToManyImpacts(daoCachekey.getDomainType());
        for (DaoCacheKey daoCachedkey : (List<DaoCacheKey>) cache.getKeys()) {
            if (impacts.contains(daoCachedkey.getDomainType())) {
                cache.remove(daoCachedkey);
            }
        }
    }

    @SuppressWarnings("unchecked")
    private List<Class<? extends Persistable<?>>> getOneToManyImpacts(Class<? extends Persistable<?>> domainType) {
        List<Class<? extends Persistable<?>>> impacts = new ArrayList<Class<? extends Persistable<?>>>();
        impacts.add(domainType);
        for (Method method : domainType.getDeclaredMethods()) {
            if (method.isAnnotationPresent(OneToMany.class)) {
                ParameterizedType parameterizedType = (ParameterizedType) method.getGenericReturnType();
                Class<? extends Persistable<?>> impactedDomainType = (Class<? extends Persistable<?>>) parameterizedType.getActualTypeArguments()[0];
                if (!impacts.contains(impactedDomainType)) {
                    impacts.addAll(getOneToManyImpacts(impactedDomainType));
                }
            }
        }
        return impacts;
    }

    @Override
    public void notifyElementPut(Ehcache cache, Element element) throws CacheException {
    }

    @Override
    public void notifyElementUpdated(Ehcache cache, Element element) throws CacheException {
    }

    @Override
    public void notifyElementExpired(Ehcache cache, Element element) {
    }

    @Override
    public void notifyElementEvicted(Ehcache cache, Element element) {
    }

    @Override
    public void notifyRemoveAll(Ehcache cache) {
    }

    @Override
    public void dispose() {
    }

    @Override
    public Object clone() throws CloneNotSupportedException {
        return super.clone();
    }

} 
```

希望能有所帮助`;)`

# ios - 从 ASIhttpRequest 转换为 AFNetwork？

> ID：14259166
> 
> 赞同：1
> 
> 时间：2013-01-10T13:35:06.757
> 
> 标签：ios, objective-c, asihttprequest, afnetworking

我在 ASIHTTPRequest 中的代码是：

```
 NSURL *url = [NSURL URLWithString:@"http://avicenna-apps.com/harleyeventget.php"];
ASIHTTPRequest *_Request = [ASIHTTPRequest requestWithURL:url];
__weak ASIHTTPRequest * Request=_Request;
[Request setCompletionBlock:^{
    NSData *Data = [Request responseData];
];
[Request setFailedBlock:^{
    NSError *error = [Request error];
      NSlog(@"Error IS %@,error");
}];
[Request startAsynchronous]; 
```

我如何在 AFNetwork 中编写它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:03:42.450

里面`AFHttpClient`，

```
 (void)getPath:(NSString *)path
     parameters:(NSDictionary *)parameters
        success:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
        failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure 
```

这里是 AFNetworking 的官方网站，[点击](http://afnetworking.com)

# android - 在片段内使用 viewpager 和片段时没有活动异常

> ID：14259170
> 
> 赞同：5
> 
> 时间：2013-01-10T13:35:23.860
> 
> 标签：android, android-viewpager, viewpagerindicator

让我描述一下我的项目。

我将 actionbarsherlock 与 jfeinstein10 中的 SlidingMeno 一起使用。在我的主要活动中，我有这个滑动菜单，其中包含几个在容器中打开片段的菜单项。（与滑动菜单示例中的基本片段示例相同）在其中一个片段中，我有带有 viewpageindicator 的 view-pager。View-pager 与我的片段绑定到 FragmentStatePagerAdapter。所以我在片段中有片段。当在片段中使用片段时，我使用 getChildFragmentManager() 就像文档中建议的那样。

当我第一次选择带有视图分页器的片段的菜单项时，一切都像它应该的那样工作。但是当我选择其他一些菜单项然后返回到这个视图寻呼机片段时，我得到了这个异常。所有其他片段都没有这个问题，并且在堆栈跟踪中没有对我的代码的引用。

[https://gist.github.com/4502038](https://gist.github.com/4502038)

有没有人遇到过类似的问题或知道发生了什么。

编辑：如果我使用 getFragmentManager() 而不是 getChildFragmentManager() 即使你在子片段中。我没有遇到异常，但是在我第二次选择 viewpager 片段后，没有重新创建 viewpager 中的片段之一。

我在github上创建了一个项目，大家可以看看。 [https://github.com/pzagor2/TestErrorApp](https://github.com/pzagor2/TestErrorApp)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T02:19:47.300

看到这个：[https](https://code.google.com/p/android/issues/detail?id=42601) ://code.google.com/p/android/issues/detail?id= 42601 错误。

取消注释 addToBackStack [https://github.com/pzagor2/TestErrorApp/blob/master/MainActivity/src/com/example/myapp/MainActivity.java#L69](https://github.com/pzagor2/TestErrorApp/blob/master/MainActivity/src/com/example/myapp/MainActivity.java#L69)，为我的项目设置工作。

您可以在第一个 URL 的 Google 错误报告中看到该错误。

希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T09:52:21.950

我刚刚查看了 GitHub 项目，看起来您还没有提交代码。但我假设您的 ViewPager 本身位于片段中，并且 ViewPager 正在托管子片段。如果是这样，那么我建议您进行测试以确保您的 FragmentStatePagerAdapter 是使用 getChildFragmentManager() 的结果构造的。

# sql - TSQL 参数化透视查询 SP SSRS

> ID：14259174
> 
> 赞同：1
> 
> 时间：2013-01-10T13:35:34.347
> 
> 标签：sql, tsql, reporting-services

想知道以前是否有人这样做过，您想出了什么解决方案？

我有一个存储过程，基本上是一个财务老化的债务人查询。我已为其添加了参数，以便您可以选择查询的开始日期、频率和周期长度。例如，我可以从今天或 01/01/2012 或 4 个季度前或 1 年前选择 12 个月，具体取决于我希望看到的输出细节。

一切都很好，当我在 SQL 中运行它时，它很可爱并且工作得很好。我已经根据 Period 参数以不同的方式对 SP 中的数据进行了透视，以便列正确显示（即显示月份的月份名称列、季度的季度名称等），因此透视取决于输入参数。

正如我在 SQL 中所说，这是一件美丽的事情......现在我到底要如何在 SSRS 中显示它！？:o)

由于 PIVOT 是有条件的，我看不到可用的字段，而且我已经到了无法再想办法解决它的地步。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-14T11:41:51.660

假设我猜对了，可以选择将整个 SP 放入数据集中。

在数据集属性中，将查询类型更改为存储过程。

希望对你有帮助...

# php - 如何防止从地址栏加载页面？

> ID：14259178
> 
> 赞同：0
> 
> 时间：2013-01-10T13:35:45.813
> 
> 标签：php, captcha

我有一个`game captcha`，我想把它放在一个单独的页面上。
解决验证码后 - 用户将被重定向到带有注册表单的页面。
所以，丰富表单的唯一方法——应该是—— `via captcha page`，问题是：如何防止用户从地址栏丰富表单页面？
也许 - 在验证码页面上创建一个 SESSION 变量`as a ticket for form page`，然后在表单页面的末尾销毁该变量......但我不确定 - 有没有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:40:30.543

您可以在通过验证码后使用 AJAX 动态加载注册表单。

# wordpress - 如何更改某个 Pods 字段的输出？

> ID：14259179
> 
> 赞同：3
> 
> 时间：2013-01-10T13:35:46.423
> 
> 标签：wordpress, podscms

我有两个豆荚：`course`和`teacher`.

每个`course`都有一个`teacher`。

我使用简码来构建一个表单来定义新的`course`：

```
[pods name='course' form='1' fields='name, teacher' ] 
```

定义新`course`的时，用户可以`teacher`为此选择`course`。

默认情况下， 的`name`显示`teacher`在下拉列表中。我想知道是否可以更改`teachers`下拉列表中的输出。

比如除了`name`我要显示的某个字段，比如下拉列表中的`location`。`teacher`

这可以使用 Pods 2 的内置短代码吗？

* * *

**更新：**

按照斯科特的指示，我解决了这个问题。我将解决方案写入评论部分，但格式丢失。下面，我再次放上代码：

```
function pods_teacher_pick_data($data, $name, $value, $options, $pod, $id){
    if ($name == "pods_field_teachers") {
        foreach ($data as $id => &$value) {
            $p = pods('teacher', $id);
            $name = $p->display('name');
            $city = $p->display('profile.city.name');
            $value = $name . ' - ' . $city;
        }
    }
    return $data;
}

add_filter('pods_field_pick_data', 'pods_teacher_pick_data', 1, 6); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T14:35:44.077

尚未内置，但您可以使用过滤器接管数据输出：pods_field_pick_data

```
$data = apply_filters( 'pods_field_pick_data', $data, $name, $value, $options, $pod, $id ); 
```

向该过滤器添加过滤器应该使您能够更改下拉列表中显示的内容或其他关系输入类型。

编辑：我刚刚添加了一个类似的过滤器来过滤自动完成数据。

```
$pick_data = apply_filters( 'pods_field_pick_data_ajax', array(), $field[ 'name' ], null, $field, $pod, 0, $data ); 
```

这个数组中的 $data 实际上是完整设置的 PodsData 对象

**编辑（2013 年 2 月 7 日）：**

在 Pods 2.3 中，我添加了一个快速函数，可以简化添加自定义关系对象。这是覆盖现有关系或动态使用自定义简单定义的首选。非常易于使用，请访问[https://github.com/pods-framework/pods/issues/1033查看](https://github.com/pods-framework/pods/issues/1033)

```
$options = array(
    'group' => 'Special Relationships', // Whatever you want the selection group to be, defaults to label
    'simple' => false, // Whether this field is related by strings or integer IDs, integer IDs get stored in wp_podsrel, strings are stored in the field itself either serialized (meta-based) or json encoded (table-based)
    'data' => array( // Custom define the items to select from manually
        1 => 'Gravity Form 1',
        2 => 'Gravity Form 2'
    ),
    'data_callback' => 'get_custom_gravity_forms_list', // Provide a callback function to call to define the data (instead of setting 'data' above)
    'value_to_label_callback' => 'get_custom_gravity_forms_list', // Provide a callback function to define the data when called through PodsField_Pick::value_to_label
    'simple_value_callback' => 'get_custom_gravity_forms_list' // Provide a callback function to define the data when called through PodsField_Pick::simple_value
);

pods_register_related_object( 'gravity-form', 'Gravity Forms', $options ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T15:59:58.313

对于 ajax，似乎需要使用一些不同的过滤器 pods_field_pick_data_ajax_items，如下所示：

```
function pods_teacher_pick_data_ajax_items($items, $name, $null, $field, $pod, $id){
    if ($name == "pods_meta_categorie" || $name == 'categorie') {
        foreach ($items as &$item) {
            $id = $item['id'];
            $value = $item['text'];
            $p = pods('dvd_categories', $id);
            $code = $p->display('code');
            $item['text'] .= ' - ' . $code;
        }
    }
    return $items;
}

add_filter('pods_field_pick_data_ajax_items', 'pods_teacher_pick_data_ajax_items', 1, 6); 
```

注意数组 $data 和 $items 的不同结构。过滤器 pods_teacher_pick_data_ajax 对我来说看起来很奇怪而且没用，因为它不接受 $data 数组。

# ruby-on-rails - 基于日期时间的搜索

> ID：14259182
> 
> 赞同：0
> 
> 时间：2013-01-10T13:36:07.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3, search, ruby-on-rails-3.2

我对 ruby​​ on rails 比较陌生。我确实有一个自定义搜索表单，我想在其中搜索日期和时间。我的数据库表确实有一列以日期时间作为数据类型。我知道我们可以从日期（列名）中提取日期。我想知道如何仅从日期时间字段中提取时间。请帮我解决一下这个。提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:46:24.077

利用[`date_format`](http://www.w3schools.com/sql/func_date_format.asp)

```
mysql> select id, created_at from users limit 1;
+----+---------------------+
| id | created_at          |
+----+---------------------+
|  8 | 2009-08-19 09:24:24 |
+----+---------------------+
1 row in set (0.00 sec)

mysql> select id, DATE_FORMAT(created_at, "%h/%i/%s") from users limit 1;
+----+-------------------------------------+
| id | DATE_FORMAT(created_at, "%h/%i/%s") |
+----+-------------------------------------+
|  8 | 09/24/24                            | 
```

# mysql - 如何通过最大计数优化主从查询？

> ID：14259184
> 
> 赞同：0
> 
> 时间：2013-01-10T13:36:08.947
> 
> 标签：mysql, sql

我有一个查询，以获取每个游戏的当前玩家数量的游戏，按玩家填充的玩家插槽百分比的度量来排序。

它是这样的：

```
SELECT 
  g.* , COUNT( p.ID ) NUM_OF_PLAYERS 
FROM 
  games g, 
  players p
WHERE  
  g.ID = p.GAME_ID 
GROUP BY 
  g.ID 
ORDER BY 
  COUNT( p.ID ) / g.MAX_NUM_OF_PLAYERS DESC 
```

它需要大约 4 秒。

解释主要给了我这个：

![在此处输入图像描述](../Images/1615239c8ace1834698bb864b97dc064.png)

如何让它更快？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:16:23.463

试试这个查询。它更快吗？

```
select g.*,p.NUM_OF_PLAYERS NUM_OF_PLAYERS 
from games g
left join 
(
select GAME_ID, COUNT( ID ) NUM_OF_PLAYERS 
  from players group by GAME_ID
) p on (g.ID = p.GAME_ID)

ORDER BY 
  p.NUM_OF_PLAYERS/g.MAX_NUM_OF_PLAYERS DESC 
```

# ruby-on-rails - rails迁移复制和删除表

> ID：14259186
> 
> 赞同：0
> 
> 时间：2013-01-10T13:36:15.673
> 
> 标签：ruby-on-rails, migration

我有用户模型和用户模型 has_one 配置文件模型。我也有 user.phone 和 user.profile.phone，但我想删除 user.phone，我将只使用 user.profile.phone。

在我删除 user.phone 之前，如果 user.phone 不为空，我想将 user.phone 复制到 user.profile.phone。然后我将删除 user.phone

例如：

```
user.phone = 123
user.profile.phone = 234 
```

迁移后：

```
user.phone will be removed
user.profile.phone = 123 - 234 
```

为此目的，适当的迁移是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:05:22.187

尝试这个

```
class YourMigration < ActiveRecord::Migration
 def self.up
   User.find_each do |user|
 user.profile.update_attributes(:phone => user.phone) unless user.phone.blank?
   end
   remove_column :users, :phone
 end

 def self.down
  add_column :users, :phone, :string
 end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T03:07:06.510

我不喜欢在迁移中使用模型，因为它会产生不必要的痛苦：

假设许多人在同一个项目上工作，并且您在迁移中使用模型进行提交。其他人删除用户模型或对模型应用一些验证并执行提交。当他或其他人尝试运行迁移时，它可能会失败，因为您使用的模型不存在或某些验证。

所以我推荐在迁移中使用 SQL 语句。

```
class SomeMigartion < ActiveRecord::Migration
  def self.up
    execute('update profiles p inner join users u on p.user_id = u.id set p.phone = u.phone where u.phone is not null')
    remove_column :users, :phone
  end

  def self.down
     add_coulmn :users, :phone
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:56:13.493

如果您的数据库不是很大，您可以简单地这样做：

```
User.includes(:profile).all.each{ |u| u.profile.phone = u.phone unless u.phone.nil? } 
```

在您的控制台中。或者你可以在你的迁移中这样写：

```
def change
  User.includes(:profile).all.each{ |u| u.profile.phone = u.phone unless u.phone.nil? }
  remove_column :users, :phone
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T15:05:56.687

```
class YourMigration < ActiveRecord::Migration
  def self.up
     User.where("phone IS NOT NULL").includes(:profiles).each{ |u| u.profile.phone = u.phone}
     remove_column :users, :phone
  end
  def self.down
    add_column :users, :phone, :string
  end
end 
```

# php - 如何在 wordpress 主页中添加自定义图像框

> ID：14259191
> 
> 赞同：0
> 
> 时间：2013-01-10T13:36:30.930
> 
> 标签：php, html, css, wordpress

我想在不使用 HTML 编辑器的情况下在我的 WordPress 网站的主页上添加图像框。

盒子就像：`ssense.com` 我喜欢这个设计，但不知道如何更改文件的代码。

所以有人可以帮我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:40:41.577

您需要学习一点html和css，如果您想动态放置它们，那么php也可以。

# android - 复选框默认值 & OnCheckedChangeListener

> ID：14259193
> 
> 赞同：4
> 
> 时间：2013-01-10T13:36:38.527
> 
> 标签：android, checkbox, oncheckedchanged

这不是什么大问题，但我正在尝试找到正确的方法。

我有以下情况：

```
public class SettingsDialogFragment extends DialogFragment implements OnCheckedChangeListener {

...

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.settings, container);

    ...

    CheckBox lBox1  = (CheckBox)view.findViewById(R.id.checkBox1);

    lBox1.setOnCheckedChangeListener(this);
    lBox1.setChecked(true);

    return view;
}

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {

    ....

} 
```

我遇到的“问题”是通过调用`setChecked(true)`onCheckChanged 已经触发。我想当我膨胀布局时 -`CheckBox`使用错误设置初始化，我将其更改为 true 确实是一个`CheckedChanged`事件。

我当然可以在设置初始值后更改顺序并分配侦听器，但是有没有办法在以某种方式传递各种组件的初始值的同时扩大布局？它们是动态的，因此我无法将值固定为 settings.xml 中的特定值

干杯

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-27T12:59:03.813

上面的建议很好，但是在一个checkable ListView中还是存在这个问题。我是这样解决的：禁用监听器，设置检查状态，然后再次设置监听器。这是一个辅助函数：

```
private void checkCheckBox(CheckBox checkBox, boolean checked) {
    checkBox.setOnCheckedChangeListener(null);
    checkBox.setChecked(checked);
    checkBox.setOnCheckedChangeListener(this);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T13:53:40.893

你已经回答了你自己的问题，这`setChecked(true)`是导致`OnCheckedChangeListener`被调用的原因。

一个简单的解决方法是添加`android:checked="true"`到您的 CheckBox XML 声明并省略`setChecked(true)`调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T14:18:43.877

CheckBox 的代码如下所示：

```
public void setChecked(boolean checked) {
    if (mChecked != checked) {
        mChecked = checked;
        refreshDrawableState();

        // Avoid infinite recursions if setChecked() is called from a listener
        if (mBroadcasting) {
            return;
        }

        mBroadcasting = true;
        if (mOnCheckedChangeListener != null) {
            mOnCheckedChangeListener.onCheckedChanged(this, mChecked);
        }
        if (mOnCheckedChangeWidgetListener != null) {
            mOnCheckedChangeWidgetListener.onCheckedChanged(this, mChecked);
        }

        mBroadcasting = false;            
    }
} 
```

所以基本上你不能在不触发事件的情况下使用该方法，除非你之前删除或禁用事件处理程序（或仅在之后设置它们）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T13:39:26.447

如果您只想设置初始值，那么您的第一个建议可能是最好的：在初始化所有内容后注册侦听器。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-16T13:44:55.573

解决方案是**OnTouchListener**。默认情况下，您不设置 OnCheckedChangeListener。您需要做的是：

```
**declared in the class object declaration**:
OnCheckedChangeListener onCheckedChangeListener = new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            **have fun**
        }
    };

**used to the point you would have set the OnCheckedChangeListener**
anyView.setOnTouchListener(new View.OnTouchListener() {

            @Override
            public boolean onTouch(View v, MotionEvent event) {

                anyUsableView.setOnCheckedChangeListener(onCheckedChangeListener);

                return false;
            }
        }); 
```

OnTouchListener 的返回 false 非常重要，否则视图将不再工作。

**提示：此解决方案可用于任何类型的适合它的侦听器（我将它与 Switch 小部件一起使用）**

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-08-19T04:12:31.697

我想解决方案可能是一个 setChecked() 函数，它在设置检查值之前分离侦听器。

```
public void setCheckedNoEvent(boolean checked) {
    if (onCheckedChangeListener == null) {
        switcher.setChecked(checked);
    } else {
        switcher.setOnCheckedChangeListener(null);
        switcher.setChecked(checked);
        switcher.setOnCheckedChangeListener(OnCheckedChangeListener);
    }
} 
```

# haskell - Haskell - 在 Applicative 的情况下，效果顺序是否确定？

> ID：14259195
> 
> 赞同：15
> 
> 时间：2013-01-10T13:36:43.377
> 
> 标签：haskell, applicative

执行定义的IO动作时，和动作`someFun <$> (a :: IO ()) <$> (b :: IO ())`的执行是否有序？也就是说，我可以指望那是在执行之前吗？`a``b``a``b`

对于 GHC，我可以看到 IO 是使用 State 实现的，[在这里](http://www.haskell.org/ghc/docs/latest/html/libraries/base-4.6.0.0/System-IO.html)也看到它是一个 Applicative 实例，但是找不到实际实例声明的来源。通过 State 实现表明不同的 IO 效果需要是顺序的，但不需要定义它们的顺序。

在 GHCi 中玩耍似乎 Appliative 保留了效果顺序，但这是一些普遍的保证，还是 GHC 特定的？我会对细节感兴趣。

```
import System.Time
import Control.Concurrent
import Data.Traversable
let prec (TOD a b) = b
fmap (map prec) (sequenceA $ replicate 5 (threadDelay 1000 >> getClockTime))

[641934000000,642934000000,643934000000,644934000000,645934000000] 
```

谢谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-10T13:49:50.590

这当然是*确定性*的，是的。对于任何特定实例，它总是会做同样的事情。但是，没有*内在*的理由选择从左到右而不是从右到左来选择效果顺序。

但是，从[文档中`Applicative`](http://hackage.haskell.org/packages/archive/base/4.6.0.0/doc/html/Control-Applicative.html)：

> 如果`f`也是 a `Monad`，它应该满足`pure`=`return`和`(<*>)`= `ap`（这意味着满足应用函子定律）`pure`。`<*>`

的定义`ap`是这样的，来自`Control.Monad`：

```
ap :: (Monad m) => m (a -> b) -> m a -> m b
ap =  liftM2 id 
```

并且`liftM2`以明显的方式定义：

```
liftM2 f m1 m2 = do { x1 <- m1; x2 <- m2; return (f x1 x2) } 
```

这意味着，对于任何既是 a 又是 a 的函子`Monad`，`Applicative`它是预期的（根据规范，因为这不能在代码中强制执行），`Applicative`它将从左到右工作，因此`do`块`liftM2`做同样的事情`liftA2 f x y = f <$> x <*> y`。

由于上述原因，即使对于`Applicative`没有相应 的实例`Monad`，按照惯例，效果通常也是从左到右排序的。

更广泛地说，因为计算的结构必须独立于“效果”，所以您通常可以独立于效果的排序`Applicative`方式来分析程序的含义。`Applicative`例如，如果将 for 的实例`[]`更改为从右到左的顺序，则任何使用它的代码都会给出相同的结果，只是列表元素的顺序不同。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T14:00:37.193

是的，顺序是由 Monad-Applicative 对应预定义的。这很容易看出：`(*>)`组合子需要对应于一个单子`(>>)`行为良好的`Applicative`实例中的组合子，它的定义是：

```
a *> b = liftA2 (const id) a b 
```

换句话说，如果`b`在 之前执行过`a`，`Applicative`实例将表现不佳。

编辑：作为旁注：这没有在任何地方明确指定，但您可以找到许多其他类似的对应关系，例如`liftM2`=`liftA2`等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-19T15:57:26.600

对于 IO Applicative 来说，肯定是这样的。但是请查看[async 包](http://hackage.haskell.org/package/async)以获取 Applicative 的示例，其中`f <$> a <*> b`的效果`a`和`b`并行发生。

# android - Android使用短信意图从平板电脑发送短信？

> ID：14259196
> 
> 赞同：2
> 
> 时间：2013-01-10T13:36:46.297
> 
> 标签：android, android-intent, sms, tablet

我想知道是否可以使用 SMS Intent 从 Android 平板电脑发送 SMS？如果这是不可能的，我有什么选择？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T13:48:03.813

> 我想知道是否可以使用 SMS Intent 从 Android 平板电脑发送 SMS？

没有真正的“短信” `Intent`。有可能导致发送 SMS 的操作`ACTION_SEND`。`ACTION_SENDTO` `Intent`

关于“平板电脑”，大多数屏幕尺寸高于平均水平的设备都没有电话功能，因此无法对 SMS 进行任何操作，更不用说`startActivity()`在某些`Intent`.

> 我有什么选择？

如果您绝对必须能够发送 SMS 消息，请添加`<uses-feature android:name="android.hardware.telephony"/>`到您的清单中，这样您的应用程序将只安装在具有电话功能的设备上。

如果您想在可能的情况下发送 SMS 消息，但在不可能的情况下解决它，您需要做三件事：

1.  添加`<uses-feature android:name="android.hardware.telephony" android:required="false"/>`到您的清单

2.  使用`PackageManager`并`hasSystemFeature()`查看您在运行时是否确实具有电话功能

3.  对于具有电话功能的设备，在您调用`startActivity()`“SMS `Intent`”之前，请使用`PackageManager`并`queryIntentActivities()`查看设备上是否有任何响应`Intent`，或者将您的呼叫包装`startActivity()`在异常处理程序中以捕获 `ActivityNotFoundException`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T20:50:38.070

如何检查平板电脑是否有可用的短信服务：

这是[CommonsWare](https://stackoverflow.com/users/115145/commonsware)在他的[回答](https://stackoverflow.com/a/14259411/1306012)中描述为一种方法的第三个解决方案：

```
public static boolean hasSmsService(Context context)
{
    Intent intent = new Intent(Intent.ACTION_VIEW, Uri.parse("smsto:123456789"));
    PackageManager pm = context.getPackageManager();
    List<ResolveInfo> res = pm.queryIntentActivities(intent, PackageManager.MATCH_DEFAULT_ONLY);
    if(res.size() > 0)
    {
        return true;
    }
        return false;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-05T10:30:41.390

这是给你的锅。试试看.........

```
Method :
CAll on button click event.....
sendSMS("Any text",number,sms_string); 
```

现在，在 oncreate() 中声明这个；

```
public static void sendSMS(String status, String phoneNumber, String message) {

    Log.e("", "Page : " + status + ", No : " + phoneNumber
            + ",Message Length: " + message.length() + ", Message : "
            + message);
    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, null, null);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T13:42:16.693

```
String smsNumber = "your number here";
String smsText = "Your text";

Uri uri = Uri.parse("smsto:" + smsNumber);
Intent intent = new Intent(Intent.ACTION_SENDTO, uri);
intent.putExtra("sms_body", smsText);  
startActivity(intent); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T13:43:10.390

```
startActivity(new Intent(Intent.ACTION_VIEW, Uri.parse("sms:"
                        + phoneNumber)));
```

尝试这个。

# window - Squeak and Pharo 中的主窗口标题如何设置？

> ID：14259200
> 
> 赞同：5
> 
> 时间：2013-01-10T13:36:59.573
> 
> 标签：window, title, smalltalk, pharo, squeak

Squeak and Pharo 中的主窗口标题如何设置？

在 Pharo 中，我认为它可以在 System -> Settings Menu 中设置，但在那里找不到任何东西。

只能在代码中设置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:54:43.640

在 Squeak 中试试这个：

```
HostWindowProxy basicNew primitiveWindowTitle: 1 string: 'My Title' squeakToUtf8 
```

在 Etoys 中，我们有一个方便的方法：

```
DisplayScreen hostWindowTitle: 'My Title' 
```

（因为 Etoys 将当前项目名称显示为窗口标题）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-26T11:46:00.810

这适用于 Pharo 3.0（在 Windows 和 Mac 上测试）： DisplayScreen hostWindowTitle: 'My Title'

# jquery - jquery $.when() .then() 和 .done() 之间的区别

> ID：14259203
> 
> 赞同：28
> 
> 时间：2013-01-10T13:37:01.803
> 
> 标签：jquery

我试图了解两者之间的区别

```
$.when(...).then(...)

$.when(...).done(...) 
```

在 jQuery 中。据我了解，它们都是在内部对象完成加载时执行的。但是有什么区别。示例将不胜感激。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-10T13:39:22.333

`.done()`只有成功回调。

`.then()`有成功和失败的回调。

> 从 jQuery 1.8 开始，该`deferred.then()`方法返回一个新的 Promise，它可以通过函数过滤 deferred 的状态和值，替换现在已弃用的`deferred.pipe()`方法。
> 
> 该`deferred.done()`方法接受一个或多个参数，所有参数都可以是单个函数或函数数组。
> 
> 由于`deferred.done()`返回延迟对象，延迟对象的其他方法可以链接到这个，包括附加 `.done()`方法。当 Deferred 被解析时，doneCallbacks 将使用提供给 resolve 或 resolveWith 方法调用的参数按照它们被添加的顺序执行。

# authentication - Symfony2 登录认证

> ID：14259205
> 
> 赞同：0
> 
> 时间：2013-01-10T13:37:07.560
> 
> 标签：authentication, symfony, login, doctrine

我试图限制用户访问 /admin/ 中的任何内容，如果他们尝试这样做，他们将被重定向到 /login。

目前我可以进入使用传统登录表单的登录页面，如果我提交它，我会收到一条错误消息，提示“凭据错误”，因此 /login_check 似乎工作正常。但是，如果我转到 /admin/ 或 /admin/foo，它不会重定向到 /login。相反，它显示“找不到 GET /admin/ 的路由”。

我的 security.yml 文件是：

> jms_security_extra：secure_all_services：假表达式：真

```
security:
    encoders:
        Symfony\Component\Security\Core\User\User: plaintext

role_hierarchy:
    ROLE_ADMIN:
    ROLE_SUPER_ADMIN:
providers:
    administrators:
                entity: { class: XXXBundle:AdminUser, property: email }

firewalls:
    dev:
        pattern:  ^/(_(profiler|wdt)|css|images|js)/
        security: false
    admin_area:
        pattern:    ^/admin
        form_login:
          login_path:  /login
          check_path:  /admin/login_check
        #anonymous: ~
        #http_basic:
        #    realm: "Secured Demo Area"

access_control:
  - { path: ^/admin, roles: ROLE_ADMIN } 
```

我的 routing.yml 文件是：

```
login:
    pattern:   /login
    defaults:  { _controller: XXXBundleSecurity:login }
login_check:
    pattern:   /admin/login_check 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:01:48.280

您似乎错过了您尝试访问的两条路线。尝试将其添加到您的 routing.yml：

```
admin:
    resource: "@XXXBundle/Controller/Admin.php"
    type:     annotation
    prefix:   /admin 
```

我非常喜欢[使用注释的路由](http://symfony.com/doc/current/bundles/SensioFrameworkExtraBundle/annotations/routing.html)，所以我在这个例子中使用了它。

然后在您的 Admin.php 中，您可以使用以下内容：

```
// XXXBundle/Controller/Admin.php

namespace XXXBundle/Controller;

use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Sensio\Bundle\FrameworkExtraBundle\Configuration\Route;
use Symfony\Component\HttpFoundation\Request;

class AdminController extends Controller
{
    /**
     * @Route("/", name="admin_index")
     */
    public function indexAction(Request $request)
    {
       // Code goes here
    }

    /**
     * @Route("/foo ", name="admin_foo")
     */
    public function fooAction(Request $request)
    {
       // Code goes here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:57:28.870

/admin/XXX 路由是不必要的。如果你已经设置

```
pattern:    ^/admin 
```

/admin/XXX 应该被重定向到 /login。更多细节见[http://symfony.com/doc/2.0/book/security.html#using-a-traditional-login-form](http://symfony.com/doc/2.0/book/security.html#using-a-traditional-login-form)

# c# - Ria 服务组合一对一，如何？

> ID：14259206
> 
> 赞同：0
> 
> 时间：2013-01-10T13:37:16.593
> 
> 标签：c#, silverlight, ria

我有一些使用具有组合属性的 RIA 服务的代码。我可以向客户端发送数据并且工作正常，但我无法编写我的层次结构。它告诉我需要在域服务中创建一个实体集，但这不是我想要的。

> 此“内部”类型的 EntitySet 不支持“编辑”操作。

与 ObservableCollection 组合的类似代码可以正常工作。

```
public class Top
{
    [Include]
    [Composition]
    [Association("MyAssociation", "InnerId", Inner.THIS_ID)]
    public Inner Podmiot { get; set; }
    public Guid InnerId { get; set; }
}

public class Inner
{
    public const String THIS_ID = "Id";

    [Key]
    public Guid Id { get; set; }

} 
```

My DomainSerivce 只有查询、插入和更新顶级类的方法。

Top 中的此类代码可以工作，但我需要一对一的组合，而不是一对多

```
 [Include]
    [Composition]
    [Association("MyAssociation", THIS_ID, Inner.ForeignKeyOfTop)]
    public ObservableCollection<Inner> MyCompositeCollection { get; set; }

public class Inner
{
    public const String ForeignKeyOfTop= "TopId";

    [Key]
    public Guid Id { get; set; }

    public Guid TopId{ get; set; }
} 
```

# android - 如何无错误地处理与数据库的 2 个连接？

> ID：14259207
> 
> 赞同：0
> 
> 时间：2013-01-10T13:37:24.190
> 
> 标签：android, database, sqlite, locked

我的数据库有问题。

基本上，我的应用程序从我的 SQLite 数据库中读取文本和文本速率并将其显示在屏幕上。我还有 Thread 功能，它从外部互联网服务器下载内容并将其上传到数据库中。

在不太流行的设备（主要是平板电脑）上，它会产生如下错误：

```
DB close exception
DB locked 
```

有人建议我创建一个称为单例的东西来处理这个问题，我创建了它，但它会产生错误。所以我有一个想法，用 AsyncTask 代替 Thread；你认为会有帮助吗？也许您还有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:45:04.500

`AsyncTask`在这里不会帮助你。您必须将数据库连接创建为单例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:45:11.690

您应该在阅读时获得可读数据库，在写作时获得可写数据库。然后你就可以同时做这两件事了。

这两种方法都在[SQLHelper 类中](https://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:49:44.767

永远不要关闭数据库。确保每个应用程序只有一个 Helper 实例。请参阅此参考[SQLiteDatabase close() 函数在多个线程时导致 NullPointerException](https://stackoverflow.com/questions/7999075/sqlitedatabase-close-function-causing-nullpointerexception-when-multiple-threa)

这可能会帮助你:)

# java - Hibernate，什么是最有效的 id 生成策略？

> ID：14259209
> 
> 赞同：6
> 
> 时间：2013-01-10T13:37:43.950
> 
> 标签：java, mysql, performance, hibernate, id-generation

我需要通过 Hibernate 将许多实体插入到数据库中。所以，我想找到最有效的 ID 生成算法。

因此， [Hibernate Documentation](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/mapping.html#mapping-declaration-class)存在四种广泛使用的生成策略：

*   身份
*   序列
*   桌子
*   汽车

我应该使用 MySQL 数据库，所以我不能应用 SEQUENCE 生成策略。其他策略呢？从性能的角度来看，什么是最有效的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T14:12:22.370

Hibernate 中最好的 id 生成器是*enhanced-table*和*enhanced-sequence*，再加上适当的优化器，例如*hilo*。我有使用*enhanced-table* + *hilo*的经验，每秒插入超过 10,000 条记录。

顺便说一句，“hilo 需要对每个生成的实体进行额外的查询”的说法显然是错误的：优化器的全部目的是**防止**这种情况发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:50:22.337

由于您不能使用`SEQUENCE`，而`AUTO`只是从现有算法中自动选择支持的生成器算法，因此您只剩下`IDENTITY`and `TABLE`。

*   `TABLE`：使用 hi/lo 算法有效地生成 long、short 或 int 类型的标识符，给定一个表和列作为 hi 值的来源。hi/lo 算法生成仅对特定数据库唯一的标识符。-> 表示**每个生成的实体的额外查询**。（如果您使用优化器，则情况并非如此。不幸的是，如果未指定优化器，通常不使用优化器是默认设置。）

*   `IDENTITY`：支持 DB2、MySQL、MS SQL Server、Sybase 和 HypersonicSQL 中的标识列。->**性能方面，这是要走的路**，就像你在没有 Hibernate 的情况下正常做的一样。生成数据库，几乎没有开销。

存在更多特定于 Hibernate 的生成器，但它们在性能方面不会超过数据库生成的 ID。（请参阅`5.1.2.2.1\. Various additional generators`您的链接文档。）

# node.js - 导致循环引用的咖啡 require() 语句？

> ID：14259210
> 
> 赞同：4
> 
> 时间：2013-01-10T13:37:51.720
> 
> 标签：node.js, coffeescript

我遇到了一个奇怪的问题，Coffeescript 没有正确缓存/完成加载循环引用的 require() 语句。

当我使用*节点 main.js*运行此代码时...

**main.js**

```
module.exports = {
    name: 'John'
}

var config = require('./config');
config.hello(); 
```

**配置.js**

```
var main = require('./main');

module.exports = {
    hello: function() {
        console.log("Hello " + main.name);
    }
} 
```

...我得到以下输出：

> 你好约翰

但是，当我使用*咖啡 main.coffee*运行等效的咖啡脚本代码时...

**主咖啡**

```
module.exports =
    name: 'John'

config = require './config'
config.hello() 
```

**配置.coffee**

```
main = require './main'

module.exports =
    hello: ->
        console.log "hello #{main.name}" 
```

...我明白了：

> TypeError: Object # has no method 'hello'

当我将代码编译为普通的 Javascript 并通过节点运行时，这很好。

*咖啡*怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T16:22:58.160

我的理论是这种行为是 node.js`require`缓存如何工作、node 如何处理循环依赖关系以及咖啡转译器在将`.coffee`文件直接加载到 node 时如何工作的组合。

我制作了不同的coffeescript和javascript版本的程序，并带有如下说明性日志记录。我使用“maincs”和“mainjs”来确保没有混合两种语言。

**mainjs.js**

```
console.log("mainjs starting");
console.log("mainjs exporting name");
module.exports = {
  name: 'John'
};
console.log("mainjs requiring configjs");

var configjs = require('./configjs');

console.log("mainjs calling configjs.hello()");

configjs.hello(); 
```

**configjs.js**

```
console.log("configjs starting");
console.log("configjs requiring mainjs");
var mainjs = require("./mainjs");
console.log("configjs exporting hello");
module.exports = {
  hello: function() {
    return console.log("hello " + mainjs.name);
  }
}; 
```

**maincs.coffee**

```
console.log "maincs starting"
console.log "maincs exporting name"
module.exports =
  name: 'John'

console.log "maincs requiring configcs"
configcs = require './configcs'
console.log "maincs calling configcs.hello()"
configcs.hello() 
```

**configcs.coffee**

```
console.log "configcs starting"
console.log "configcs requiring maincs"
maincs = require "./maincs"
console.log "configcs exporting hello"
module.exports =
  hello: ->
    console.log "hello #{maincs.name}" 
```

因此，当我们运行它们时，我们会得到不同的输出（如您所见）。我在下面强调了有趣的一点。

```
node mainjs.js
mainjs starting
mainjs exporting name
mainjs requiring configjs
configjs starting
configjs requiring mainjs   #<--- Note the top-level mainjs.js code does not re-execute
configjs exporting hello
mainjs calling configjs.hello()
hello John 
```

* * *

```
coffee maincs.coffee 
maincs starting
maincs exporting name
maincs requiring configcs
configcs starting
configcs requiring maincs
maincs starting      # <-- Look, the top-level maincs.coffee code is re-executing
maincs exporting name
maincs requiring configcs
maincs calling configcs.hello()
TypeError: Object #<Object> has no method 'hello' 
```

所以我认为这种行为与 node.js 要求系统模块缓存的工作方式和 transpile-on-the-fly coffeescript 解释器有关。基本上，如果`maincs = require "maincs"`导致重新执行模块中的顶级代码`maincs`，我们会遇到循环依赖情况，节点将提供导出对象`maincs`的未完成副本。`configcs`

请阅读[关于循环依赖的 node.js 文档，它解释了这种行为](http://nodejs.org/docs/latest/api/all.html#all_cycles)（至少部分地）。

现在，有趣的是，如果您确保在require**之前**`hello`导出了该函数，则可以部分解决。但是，从代码中引用将不起作用，因为 main 在第一次执行时将是未定义的。**`maincs``main.name``hello`**

 ****maincs2.coffee**

```
console.log "maincs2 starting"
console.log "maincs2 exporting name"
module.exports =
  name: 'John'

console.log "maincs2 requiring configcs2"
configcs2 = require './configcs2'
console.log "maincs2 calling configcs2.hello()"
configcs2.hello() 
```

**configcs2.coffee**

```
console.log "configcs2 starting"
console.log "configcs2 exporting hello"
module.exports =
  hello: ->
    console.log "hello from configcs"
console.log "configcs2 requiring maincs2"
maincs2 = require "./maincs2" 
```

* * *

```
coffee maincs2.coffee
maincs2 starting
maincs2 exporting name
maincs2 requiring configcs2
configcs2 starting
configcs2 exporting hello
configcs2 requiring maincs2
maincs2 starting
maincs2 exporting name
maincs2 requiring configcs2
maincs2 calling configcs2.hello()
hello from configcs
maincs2 calling configcs2.hello()
hello from configcs 
```

所以基本上，这种行为是模块如何被缓存的组合，它如何`require`与循环依赖交互，以及咖啡转译器本身的某些方面。请注意，将 .coffee 转换为 .js 并使用 node 执行可以避免在具有 IIFE 包装器的常规咖啡脚本和没有包装器的裸咖啡脚本中出现此问题，因此 IIFE 包装器似乎无关紧要（无论如何，节点基本上都会添加自己的）。**

# opengl - 将自定义形状传输到 openGL

> ID：14259212
> 
> 赞同：-1
> 
> 时间：2013-01-10T13:37:55.550
> 
> 标签：opengl, vectorization, vector-graphics

我的想法有问题，如何将自定义形状添加到 OPENGL。

我有这样的自定义形状的图像：http: [//www.coloringpagebook.com/chicken-simple-shapes-coloring-pages/](http://www.coloringpagebook.com/chicken-simple-shapes-coloring-pages/)

我想从此图像创建矢量图像，然后将此矢量图像放入 openGL 以创建形状。

我应该使用哪些工具来获取可以在 open GL 中使用的曲线信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:35:06.103

[potrace](http://potrace.sourceforge.net/)是一个免费的矢量化程序。

# ruby-on-rails - 仅当使用 ElasticSearch 和轮胎存在时，如何按属性过滤搜索？

> ID：14259213
> 
> 赞同：2
> 
> 时间：2013-01-10T13:37:56.997
> 
> 标签：ruby-on-rails, ruby, full-text-search, elasticsearch, tire

现在我写了

```
Tire.search INDEX_NAME do
  query do
    filtered do
      query { string term }
      filter :or, { missing: { field: :app_id } },
                  { terms: { app_id: app_ids } }
    end
  end
end.results.to_a 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:28:16.613

好吧，返回没有 app_id 或与您的条款匹配的项目听起来像是一个或过滤器的工作 - 我会尝试

```
filter :or, [
    {:not => {:exists => {:field => :app_id}}},
    {:terms => {:app_id => app_ids}}
  ] 
```

# json - 使用 Knockout JS 在多个表中填充 JSON 值

> ID：14259215
> 
> 赞同：0
> 
> 时间：2013-01-10T13:38:03.460
> 
> 标签：json, knockout.js

我有一个引导手风琴，它从 JSON 获取它的标题信息，在每个手风琴窗格中我都有一个表格，并且每个表格的信息也填充了 JSON。

我遇到的问题是所有表数据都填充在第一个手风琴窗格中。它不会移动到辅助表并在那里填充信息，我的 JSON 数据确实包含 ID，因此可以在项目之间导航，只是不确定如何。

这是一些代码：

```
<div class="well"> 
```

```
 </div>
  <div data-bind="attr: {id: 'collapse'+$index()}" class="accordion-body collapse">
    <div class="accordion-inner">
      <div id="injectbody">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>ContentID</th>
              <th>Content</th>
              <th>Qty To Assign</th>
            </tr>
          </thead>
          <tbody data-bind="foreach: Locations">
            <tr>
              <td id="Lot" data-bind="text: ContentID"></td>
              <td id="Area" data-bind="text: Content"></td>
              <td id="QtyToAssign">
                <input type="text" />
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div> 
```

以及使这一切正常工作的 JQuery：

```
 var data = {
  "d": [{
    "__type": "Sample",
      "ItemID": "1",
    "ItemName": "First Item",
      "QtyUnassigned": 10
  }, {
    "__type": "Sample",
      "ItemID": "2",
    "ItemName": "Second Item",
      "QtyUnassigned": 15
  }]
};

var data2 = {
  "d": [{
    "__type": "Sample2",
      "ItemID": 1,
      "ContentID": "1",
      "Content": "This Is The First Item Content"
  }, {
    "__type": "Sample2",
      "ItemID": 2,
      "ContentID": "2",
      "Content": "This Is The Second Item Content"
  }]
};

var ProductViewmodel;
//debugger; 

//Binds ViewModel
function bindProductModel(Products) {
  var self = this;
  self.items = ko.mapping.fromJS([]);
  ProductViewmodel = ko.mapping.fromJS(Products.d, self.items);
  console.log(ProductViewmodel());
}

//Binds First DataSet
function bindModel(vm, data) {
  var self = this;
  vm.Locations = ko.mapping.fromJS(data.d);
  console.log(ProductViewmodel());
}

//Starting Function
$(document).ready(function () {
  bindProductModel(data);
  bindModel(ProductViewmodel()[0], data2);
  ko.applyBindings(ProductViewmodel);
}); 
```

我还创建了这个[Fiddle](http://jsfiddle.net/Fumunchu/4yHLQ/)来展示我想要达到的目标。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:08:54.090

您的错误是，由于您的 ViewModel 实际上是一个数组，因此您仅在此处绑定`Locations`到变量的第一个元素`ProductViewmodel`。

```
bindModel(ProductViewmodel()[0], data2); 
```

这意味着你有类似...

```
[0].Locations = [],
[1].Locations = undefined 
```

因此在绑定标记时抛出错误（请参阅小提琴中的控制台）。

在相关说明中，您的变量命名极具误导性。`ProductViewmodel`是一个**数组**，但您将其命名为 ViewModel 并命名为`applyBindings`它。

我建议你给[Learn KnockoutJS](http://learn.knockoutjs.com/)一个评论。另外，当变量命名选择camelCase，或underscore_case，或PascalCase或其他东西时，请遵守约定，但不要混合它们。最后，如果您的功能只适用于特定对象，请尝试使用比`bindModel`like更好的名称`bindLocationsToModel`。

# php - MYSQL 如果一个字段返回 0 然后选择另一个查询并加入

> ID：14259218
> 
> 赞同：0
> 
> 时间：2013-01-10T13:38:18.897
> 
> 标签：php, mysql, sql

大家好，我有这些桌子；

```
USERS( user_id ,fullname ,username etc.)

POSTS ( post_id, user_id, post, orig_post_id, replyto date)

USER_PROFILE (id, user_id, profile_image_path etc) 
```

例子

```
USERS (1 ,John Doe ,johndoe etc.),( 2 ,Stack Flow ,stackflow etc.)

POSTS (2, 1, My naame is John doe and i approve this message, 0, 0,sometimestamp),
      (3, 12, My naame is Stack Flow and i approve this message, 0, 2,sometimestamp)

USER_PROFILE (1, 1, ppdjodjf.jpg etc),(2, 2, grsdjodjf.jpg etc) 
```

基本上，如果回复字段为 0，我希望查询输出这个

```
array('post_id' => 2, 
'user_id' => 1, 
'post' => the post, 
'orig_post_id,' => 0
'replyto,' => 0
username => johndoe,
fullname => John Doe,
profile_image_path => etc) 
```

当它不为零时

```
array('post_id' => 3, 
'user_id' => 2, 
'post' => Another post, 
'orig_post_id,' => 0
'replyto,' => 2
username => stackflow,
fullname => Stack Flow,
profile_image_path => etc,
'replies' => array(all the replies) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:14:37.053

这些是 SQL 的基础知识。你真的应该学习一些 SQL。简单易学，花半个小时就可以了，受益匪浅。

首先，给定用户的帖子将是：

```
select posts.*
from posts
where posts.user_id = '$user_id' 
```

要获取您想要的用户字段，请加入

```
select posts.*,users.username,users.fullname
from posts
  inner join users where posts.user_id = users.user_id
where posts.user_id = '$user_id' 
```

您应该能够弄清楚如何加入 user_profile 以获取这些字段。

要仅过滤那些没有 orig_post_id 的记录，您可能需要测试为零，或者您可能需要测试 NULL。也许两者兼而有之，因此假设您想同时测试两者：

```
where posts.user_id = '$user_id'
  and (orig_post_id = 0 or orig_post_id is null) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T02:28:55.490

在花了一整天的时间之后，我的代码最终看起来像这样。

```
 public function get_connected_post()
    {
        $user_id = $this->session->userdata('user_id');

        $sql = "SELECT  p.*,up.fullname,u.username,upi.file_path_thumb,IF(hi5c.hi5_count is NULL,'0',hi5c.hi5_count) AS count_hi5,
                        IF(brn.branch_count is NULL,'0',brn.branch_count) AS count_branch, IF(rply.reply_count is NULL,'0',rply.reply_count) AS count_reply,
                        IF((SELECT COUNT(*) FROM post_highfives ph WHERE ph.user_id = $user_id AND ph.post_id = p.post_id),'1','0') AS count_is_hi5ed,
                        IF((SELECT COUNT(*) FROM posts pt WHERE pt.user_id = $user_id AND pt.is_branch_of_id = p.post_id),'1','0') AS count_is_branched
                FROM    (
                         SELECT  user_id
                         FROM    user_followers
                         WHERE   follower_id = $user_id
                         UNION ALL
                         SELECT  $user_id
                        ) uf
                JOIN    posts p
                ON      p.user_id = uf.user_id
                JOIN   user_profile up
                ON     up.user_id = p.user_id
                JOIN user_profile_images upi
                ON     upi.image_id = up.profile_image_id
                JOIN users u
                ON     u.user_id = p.user_id
                LEFT OUTER JOIN (SELECT ph.post_id, count(*) AS hi5_count
                                 FROM post_highfives ph
                                 GROUP BY ph.post_id) hi5c
                ON p.post_id = hi5c.post_id
                LEFT OUTER JOIN (SELECT pst.post_id,pst.is_branch_of_id, count(*) AS branch_count
                                 FROM posts pst
                                 GROUP BY pst.is_branch_of_id) brn
                ON p.post_id = brn.is_branch_of_id
                LEFT OUTER JOIN (SELECT pst.post_id,pst.reply_to, count(*) AS reply_count
                                 FROM posts pst
                                 GROUP BY pst.reply_to) rply
                ON p.post_id = rply.reply_to
                ORDER BY p.post_date DESC";

        $query = $this->db->query($sql);
        if ($query) {
            $result = array();
                foreach($query->result_array() as $r){
                    $branch_id = $r['is_branch_of_id'];
                    if($branch_id != 0){
                        $branch_array = $this->branch_query($this->postid_return_user_id($branch_id),$branch_id);
                    }else{
                        $branch_array = array();
                    }
                    $result[] = array_merge((array)$branch_array, (array)$r);
                }
            return $result;
        }
         else {
            return false;
        }

    } 
```

我知道这看起来与我提出的问题不同，但我试图简化我实际在做什么。我不认为提出一个说明这个问题的问题会让我到任何地方，尽管简单地提出这个问题仍然没有让我到任何地方没有人理解我哈哈。无论如何，对于我的问题，相关部分是代码的最后一点，我在其中设置了一个条件，如果 branch_id 不为零，则获取一些数组数据，如果它返回一个空数组。我将数组与查询结果合并在一起。现在我必须考虑如何简化这一点。

# dynamics-ax-2009 - Axapta 中的 numericsToTxt() 方法

> ID：14259219
> 
> 赞同：0
> 
> 时间：2013-01-10T13:38:22.030
> 
> 标签：dynamics-ax-2009, dynamics-ax-2012

当我尝试打印时`info(numeralsToTxt(3492.4069));` ，它给我输出为`*** Three Thousand Four Hundred Ninety Two and 41/100`. 现在我希望它是`*** Three Thousand Four Hundred Ninety Two and 406/1000` 当我检查方法 numericsToTxt() 我发现函数`frac()`返回 .41

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:48:10.843

`frac()`不返回 .41。它`decRound(frac(_num), 2)`是返回 0.41。decRound 方法的第二个参数是您想要的小数位数。

你能做的就是改变

`int numOfPennies = (decRound(frac(_num), 2) * 100) mod 100;`

到

`int numOfPennies = (decRound(frac(_num), 3) * 1000) mod 1000;`

然后，将方法底部的输出字符串更改`numeralsToTxt`为显示`'/1000'`而不是`'/100'`

实际输出将是 407/1000，而不是 406/1000，因为它会四舍五入。

# r - R eval 列出 data.frames 的字符串，然后连接 data.frames

> ID：14259220
> 
> 赞同：1
> 
> 时间：2013-01-10T13:38:22.243
> 
> 标签：r, list, eval, dataframe

我有以下情况，我非常绝望。

```
paste("crossdata","$geno$'",1:4,"'$data",sep="") 
```

生成 4 个字符串，如下所示：

```
"crossdata$geno$'1'$data" "crossdata$geno$'2'$data" "crossdata$geno$'3'$data" "crossdata$geno$'4'$data" 
```

我想通过评估这些字符串之一来检索这 4 个字符串的相应 data.frames，并通过 cbind 将它们组合起来。但是，当我做这样的事情时：

```
cbind(sapply(parse(text=paste("crossdata","$geno$'",i,"'$data",sep="")),eval)) 
```

那是行不通的。有人可以帮帮我吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:40:59.970

使用 和 的组合`parse`就像`eval`是在说您知道如何从纽约市到波士顿，因此通过从您的出发地到纽约，然后到波士顿，再到您的目的地来制定您的所有旅行计划。在某些情况下，这可能还不错，但如果您从伦敦到巴黎旅行，那就有点绕道而行了。

`$`您应该首先了解使用and的子集列表之间的关系和区别`[[`（请参阅`?'[['`文档）以及何时使用，更重要的是，不适合使用`$`. 一旦您了解您应该能够找到不需要`parse`和`eval`.

您的问题可能很简单（未经测试，因为您的示例不可重现）：

```
do.call( cbind, lapply( 1:4, function(x) crossdata[['geno']][[x]][['data']] ) ) 
```

或者可能

```
do.call(cbind, lapply(as.character(1:4), function(x) crossdata$geno[[x]]$data ) ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:03:54.153

```
datlist <- list(adat=data.frame(u=1:5,v=6:10),bdat=data.frame(x=11:15,y=16:20))

extdat <- c("datlist$adat","datlist$bdat")

do.call('cbind',lapply(extdat,function(i) eval(parse(text=i))))

  u  v  x  y
1 1  6 11 16
2 2  7 12 17
3 3  8 13 18
4 4  9 14 19
5 5 10 15 20 
```

当然，这使用`eval`+ `parse`，这通常意味着你走错了路。

# magento - 在 Magento 中设置促销规则

> ID：14259223
> 
> 赞同：0
> 
> 时间：2013-01-10T13:38:27.900
> 
> 标签：magento

想在购物车上设置规则

如果购物车总额大于 200 美元，则免费提供 1 个固定可配置产品

有没有办法在magento中使用促销规则来设置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:28:30.893

是的，当固定配置已经在购物车中时，这是可能的。您可以创建一个购物车规则，在其中设置总计大于或等于 200 的条件。之后，您在第三个选项卡上选择 100% 折扣并设置一个条件来描述应该获得折扣的商品，例如它的 sku。

# jquery - 检查 textarea 的元素类型，选择一个，按钮不起作用

> ID：14259227
> 
> 赞同：0
> 
> 时间：2013-01-10T13:38:31.113
> 
> 标签：jquery, vbscript

我正在将 vb 脚本函数转换为 javascript。

`If oElement.type = "text" Or oElement.type = "textarea" Or oElement.type = "checkbox" Or oElement.type = "select-one" Or oElement.type = "button" Then`

我需要对 vbscript 行进行转换。当我使用以下解决方案时，它会为“textarea”、“select-one”和“button”提供一些脚本错误。这对于“text”和“checkbox”来说效果很好。

```
 $("#frmOrder").children().each(function () {
    var child = $(this);
    // type checking for textarea,select-one,button is not working.
    if (child.is(":text") || child.is(":checkbox")) {
        if(Number(child.attr('tabindex')) >= nIndex) {
            child.attr('tabindex', child.attr('tabindex')+ <%=nChemIndexIncrement%>);
        }
    }
}); 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:08:36.413

您必须检查有效的 css 选择器，`:hover`或者`first-child`是这些伪类的示例。`:checkbox`并且`:text`不存在。试试`input[type=text]`吧。

```
$("#frmOrder").children().each(function () {
    var child = $(this);
console.log(child);
    // type checking for textarea,select-one,button is not working.
    if (child.is("input[type=text]") || child.is("input[type=checkbox]") || child.is("textarea") || child.is("button") || child.is("input[type=button]")) {
        if(Number(child.attr('tabindex')) >= nIndex) {
            child.attr('tabindex', child.attr('tabindex')+ nChemIndexIncrement);
        }
    }
}); 
```

看到这个工作jsfiddle：http: [//jsfiddle.net/GKegv/](http://jsfiddle.net/GKegv/)

# opencl - Opencl中用于结构中动态数组的内存对象分配

> ID：14259228
> 
> 赞同：6
> 
> 时间：2013-01-10T13:38:32.283
> 
> 标签：opencl, gpgpu, gpu

我在 C 中创建了以下结构“数据”

```
typedef struct data
{
  double *dattr;                           
  int d_id;                                
  int bestCent;                            
}Data; 
```

'dattr' 是上述结构中保持动态的数组。假设我必须创建 10 个上述结构的对象。IE

```
dataNode = (Data *)malloc (sizeof(Data) * 10); 
```

对于这个结构的每个对象，我必须使用 C 为数组“dattr”重新分配内存：

```
for(i=0; i<10; i++)
   dataNode[i].dattr = (double *)malloc(sizeof(double) * 3); 
```

应该如何在 OpenCL 中实现相同的功能？为结构对象分配内存后，如何为数组“dattr”分配内存？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-11T01:45:28.443

OpenCL 设备（例如，GPU）中的内存分配必须在主机线程中使用[clCreateBuffer](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clCreateBuffer.html)（或[clCreateImage2D](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clCreateImage2D.html) / [3D](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clCreateImage3D.html)，如果您希望使用纹理内存）执行。这些函数允许您自动将主机数据（例如使用 malloc 创建）复制到设备，但我通常更喜欢显式使用[clEnqueueWriteBuffer](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clEnqueueWriteBuffer.html) / [clEnqueueMapBuffer](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clEnqueueMapBuffer.html)（或[clEnqueueWriteImage](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clEnqueueWriteImage.html) / [clEnqueueMapImage](http://www.khronos.org/registry/cl/sdk/1.1/docs/man/xhtml/clEnqueueMapImage.html)，如果使用纹理内存），以便我可以分析数据传输。这是一个例子：

```
#define DATA_SIZE 1000

typedef struct data {
    cl_uint id;
    cl_uint x;
    cl_uint y;
} Data;

...

// Allocate data array in host
size_t dataSizeInBytes = DATA_SIZE * sizeof(Data);
DATA * dataArrayHost = (DATA *) malloc(dataSizeInBytes);

// Initialize data
...

// Create data array in device
cl_mem dataArrayDevice = clCreateBuffer(context, CL_MEM_READ_ONLY, dataSizeInBytes, NULL, &status );

// Copy data array to device
status = clEnqueueWriteBuffer(queue, dataArrayDevice, CL_TRUE, 0, dataSizeInBytes, &dataArrayHost, 0, NULL, NULL );

// Make sure to pass dataArrayDevice as kernel parameter
// Run kernel
... 
```

您需要考虑的是，在执行 OpenCL 内核之前，您需要了解它的内存需求。因此，如果在内核执行之前（即在主机中）执行内存分配，则可以是动态的。没有什么能阻止您多次调用内核，并且在每次调用内核时都调整（分配）内核内存需求。

考虑到这一点，我建议您重新考虑解决问题的方式。首先，使用结构数组比使用数组结构更简单（但不一定更有效）（在这种情况下，数组无论如何都必须具有固定大小）。

这只是为了让您了解 OpenCL 的工作原理。看看[Khronos OpenCL 资源页面](http://www.khronos.org/opencl/resources)，它有很多 OpenCL 教程和示例，还有[Khronos OpenCL 页面](http://www.khronos.org/opencl/)，它有官方 OpenCL 参考、手册页和快速参考卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-11T11:49:31.873

正如 Faken 所建议的，如果您关心动态内存分配并且您渴望稍微更改算法，这里有一些提示：

以下代码动态分配本地内存空间并将其作为第 8 个参数传递给 OpenCL 内核：

```
 int N; //Number_of_data_points, which will keep on changing as per your requirement  
   size_t localMemSize = ( N* sizeof(int));      
 ...   
 // Dynamically allocate local memory (allocated per workgroup)
 clSetKernelArg(kernel, 8, localMemSize, NULL); 
```

# lazy-evaluation - Haskell中目录的流式递归下降

> ID：14259229
> 
> 赞同：11
> 
> 时间：2013-01-10T13:38:41.287
> 
> 标签：lazy-evaluation, directory-structure, haskell

我正在尝试使用 Haskell 对目录结构进行递归下降。我只想根据需要（懒惰地）检索子目录和文件。

我编写了以下代码，但是当我运行它时，跟踪显示在第一个文件之前访问了所有目录：

```
module Main where

import Control.Monad ( forM, forM_, liftM )
import Debug.Trace ( trace )
import System.Directory ( doesDirectoryExist, getDirectoryContents )
import System.Environment ( getArgs )
import System.FilePath ( (</>) )

-- From Real World Haskell, p. 214
getRecursiveContents :: FilePath -> IO [FilePath]
getRecursiveContents topPath = do
  names <- getDirectoryContents topPath
  let
    properNames =
      filter (`notElem` [".", ".."]) $
      trace ("Processing " ++ topPath) names
  paths <- forM properNames $ \name -> do
    let path = topPath </> name
    isDirectory <- doesDirectoryExist path
    if isDirectory
      then getRecursiveContents path
      else return [path]
  return (concat paths)

main :: IO ()
main = do
  [path] <- getArgs
  files <- getRecursiveContents path
  forM_ files $ \file -> putStrLn $ "Found file " ++ file 
```

如何将文件处理与下降交错？问题是`files <- getRecursiveContents path`在以下`forM_`in之前执行该操作`main`吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T15:46:49.657

这正是 iteratees/coroutines 旨在解决的问题。

您可以使用`pipes`. 我对您所做的唯一更改`getRecursiveContents`是将其设为 a `Producer`of `FilePath`s 并`respond`使用文件名而不是返回它。这让下游立即处理文件名，而不是等待`getRecursiveContents`完成。

```
module Main where

import Control.Monad ( forM_, liftM )
import Control.Proxy
import System.Directory ( doesDirectoryExist, getDirectoryContents )
import System.Environment ( getArgs )
import System.FilePath ( (</>) )

getRecursiveContents :: (Proxy p) => FilePath -> () -> Producer p FilePath IO ()
getRecursiveContents topPath () = runIdentityP $ do
  names <- lift $ getDirectoryContents topPath
  let properNames = filter (`notElem` [".", ".."]) names
  forM_ properNames $ \name -> do
    let path = topPath </> name
    isDirectory <- lift $ doesDirectoryExist path
    if isDirectory
      then getRecursiveContents path ()
      else respond path

main :: IO ()
main = do
    [path] <- getArgs
    runProxy $
            getRecursiveContents path
        >-> useD (\file -> putStrLn $ "Found file " ++ file) 
```

这会在遍历树时立即打印出每个文件，并且不需要 lazy `IO`。更改您对文件名所做的操作也很容易，因为您所要做的就是`useD`使用您的实际文件处理逻辑切换阶段。

要了解更多信息`pipes`，我强烈建议您阅读[Control.Proxy.Tutorial](http://hackage.haskell.org/packages/archive/pipes/3.0.0/doc/html/Control-Proxy-Tutorial.html)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T14:49:58.697

*使用*惰性 IO /`unsafe...`不是一个好方法。Lazy IO 会导致[很多问题](https://stackoverflow.com/q/5892653/1333025)，包括未关闭的资源和在纯代码中执行不纯的操作。（另请参阅Haskell Wiki 上[的惰性 I/O 问题。）](http://www.haskell.org/haskellwiki/Iteratee_I/O#The_problem_with_lazy_I.2FO)

 *一种安全的方法是使用一些迭代器/枚举器库。（替换有问题的惰性 IO 是开发这些概念的动机。）您`getRecursiveContents`将成为数据源（AKA 枚举器）。并且数据将被一些迭代器消耗。（参见Haskell wiki 上的[Enumerator 和 iteratee 。）](http://www.haskell.org/haskellwiki/Enumerator_and_iteratee)

有一个关于[*枚举*](http://www.mew.org/~kazu/proj/enumerator/)[器库](http://www.mew.org/~kazu/proj/enumerator/)[的教程，](http://www.mew.org/~kazu/proj/enumerator/)*它只是给出了一个遍历和过滤目录树的例子，实现了一个简单的*查找*实用程序。它实现方法*

 *```
enumDir :: FilePath -> Enumerator FilePath IO b 
```

这基本上就是你所需要的。相信你会觉得很有趣。

[在The Monad Reader, Issue 16](https://themonadreader.wordpress.com/2010/05/12/issue-16/)中还有一篇很好的文章解释了 iteratee ：*Iteratee: Teaching an Old Fold New Tricks* by John W. Lato，[iteratee](http://hackage.haskell.org/package/iteratee-0.8.9.4)库的作者。

今天，许多人更喜欢新的库，例如[管道](http://hackage.haskell.org/package/pipes)。您可能对比较感兴趣：[枚举器与导管与管道的优缺点是什么？](https://stackoverflow.com/questions/9983840/what-are-the-pros-and-cons-of-enumerators-vs-conduits-vs-pipes).

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T14:17:50.330

感谢 Niklas B. 的评论，这是我的解决方案：

```
module Main where

import Control.Monad ( forM, forM_, liftM )
import Debug.Trace ( trace )
import System.Directory ( doesDirectoryExist, getDirectoryContents )
import System.Environment ( getArgs )
import System.FilePath ( (</>) )
import System.IO.Unsafe ( unsafeInterleaveIO )

-- From Real World Haskell, p. 214
getRecursiveContents :: FilePath -> IO [FilePath]
getRecursiveContents topPath = do
  names <- unsafeInterleaveIO $ getDirectoryContents topPath
  let
    properNames =
      filter (`notElem` [".", ".."]) $
      trace ("Processing " ++ topPath) names
  paths <- forM properNames $ \name -> do
    let path = topPath </> name
    isDirectory <- doesDirectoryExist path
    if isDirectory
      then unsafeInterleaveIO $ getRecursiveContents path
      else return [path]
  return (concat paths)

main :: IO ()
main = do
  [path] <- getArgs
  files <- unsafeInterleaveIO $ getRecursiveContents path
  forM_ files $ \file -> putStrLn $ "Found file " ++ file 
```

有没有更好的办法？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-20T00:00:28.183

我最近在研究一个非常相似的问题，我正在尝试使用`IO`monad 进行一些复杂的搜索，在找到我感兴趣的文件后停止。虽然使用 Enumerator、Conduit 等库的解决方案似乎为了在发布这些答案时做到最好，我刚刚得知大约一年前`IO`成为 GHC 基础库中的一个实例，这开辟了一些新的可能性。`Alternative`这是我编写的尝试代码：

```
import Control.Applicative (empty)
import Data.Foldable (asum)
import Data.List (isSuffixOf)
import System.Directory (doesDirectoryExist, listDirectory)
import System.FilePath ((</>))

searchFiles :: (FilePath -> IO a) -> FilePath -> IO a
searchFiles f fp = do
    isDir <- doesDirectoryExist fp
    if isDir
        then do
            entries <- listDirectory fp
            asum $ map (searchFiles f . (fp </>)) entries
        else f fp

matchFile :: String -> FilePath -> IO ()
matchFile name fp
    | name `isSuffixOf` fp = putStrLn $ "Found " ++ fp
    | otherwise = empty 
```

该`searchFiles`函数对目录树进行深度优先搜索，当它找到您要查找的内容时停止，这由作为第一个参数传递的函数确定。该`matchFile`函数只是为了展示如何构造一个合适的函数以用作`searchFiles`; 的第一个参数。在现实生活中，您可能会做一些更复杂的事情。

这里有趣的是，现在您可以使用`empty`“`IO`放弃”计算而不返回结果，并且您可以将计算与`asum`（只是`foldr (<|>) empty`）链接在一起以继续尝试计算，直到其中一个成功。

`IO`我发现一个动作的类型签名不再反映它可能故意不产生结果的事实有点令人不安，但它确实简化了代码。我之前曾尝试使用类似的类型`IO (Maybe a)`，但这样做使得编写动作变得非常困难。

恕我直言，不再有理由使用类似的类型`IO (Maybe a)`，但是如果您需要与使用类似类型的代码进行交互，则很容易在两种类型之间进行转换。要转换`IO a`为`IO (Maybe a)`，您可以使用`Control.Applicative.optional`，反之，您可以使用以下内容：

```
maybeEmpty :: IO (Maybe a) -> IO a
maybeEmpty m = m >>= maybe empty pure 
```**

# wordpress - Mediaelements.js 未指定的错误

> ID：14259231
> 
> 赞同：2
> 
> 时间：2013-01-10T13:38:52.677
> 
> 标签：wordpress, mediaelement.js, unspecified

我在带有 MP4 视频的 wordpress 网站上使用 mediaelements.js。

在 IE9/Firefox/Chrome 中运行良好。

但是在 IE 7/8 中单击播放时会出现以下错误：

```
Webpage error details

User Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; CMNTDF; BRI/1; InfoPath.3; .NET4.0C; BOIE9;ENGB)
Timestamp: Thu, 10 Jan 2013 13:34:50 UTC

Message: Unspecified error.
Line: 49
Char: 5
Code: 0
URI: http://website.local/page/independence/ 
```

我什至尝试使用他们提供的 wordpress 插件并获得相同的结果。

其他人有这样的问题吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T21:56:37.937

[从 WordPress 3.6 开始，mediaelements.js 包含在 WordPress 中，并且可以使用http://codex.wordpress.org/Embeds](http://codex.wordpress.org/Embeds)中概述的帖子编辑器嵌入视频。自从我上次查看以来已经一两个月了，但我相信他们在决定将其包含在 WP 3.6 中时停止开发 wordpress 插件。

为了具体回答您的特定错误，您能否提供页面的片段或 URL？

# python - 使用 Networkx (Python) 进行图遍历

> ID：14259233
> 
> 赞同：9
> 
> 时间：2013-01-10T13:38:58.293
> 
> 标签：python, networkx

我正在使用 Networkx 来管理依赖关系图。假设我有这个图表，每个字母代表一个服务器

```
>>> G = nx.Graph()
>>> G.add_edge("A","B")
>>> G.add_edge("A","H")
>>> G.add_edge("H","C")
>>> G.add_edge("B","C")
>>> G.add_edge("B","D")

           A
         /   \
       H       B
     /        /  \
   C         C     D 
```

所以在这里我们可以看到，在启动 A 之前我们需要启动 H 和 B 启动 H 我们需要启动 C 然后启动 B 我们需要启动 C 和 D

通过摆弄 Networkx，我发现我可以通过 dfs 遍历来获得它

```
print nx.dfs_successors(G,"A")
{A:[H,B], H:[C], B:[D] } 
```

但我对这种方法有疑问。如您所见，当树中有两个相同的字母时，Networkx 只选择将其中一个放入最终结构中（这是正确的）但我需要拥有完整的结构如何强制 Networkx 添加到结构 B :[D,C] ??

我想通过这样做来精确

```
>>> nx.dfs_successors(G,"B")
{'B': ['C', 'D']} 
```

所以一切都是“内部”正确的，只是 dfs_successors 没有以我希望的方式显示它。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-11T00:49:37.843

我认为您正在寻找的是拓扑排序 [http://networkx.github.com/documentation/latest/reference/generated/networkx.algorithms.dag.topological_sort.html](http://networkx.github.com/documentation/latest/reference/generated/networkx.algorithms.dag.topological_sort.html)

这仅在您有 DAG（有向无环图）时才有效。如果是这样，您也可以绘制您想要的树 - 像这样：

```
import uuid
import networkx as nx
import matplotlib.pyplot as plt
G = nx.DiGraph()
G.add_edge("A","B")
G.add_edge("A","H")
G.add_edge("H","C")
G.add_edge("B","C")
G.add_edge("B","D")

order =  nx.topological_sort(G)
print "topological sort"
print order

# build tree
start = order[0]
nodes = [order[0]] # start with first node in topological order
labels = {}
print "edges"
tree = nx.Graph()
while nodes:
    source = nodes.pop()
    labels[source] = source
    for target in G.neighbors(source):
        if target in tree:
            t = uuid.uuid1() # new unique id
        else:
            t = target
        labels[t] = target
        tree.add_edge(source,t)
        print source,target,source,t
        nodes.append(target)

nx.draw(tree,labels=labels)
plt.show() 
```

绘图使用标签映射将节点的 id 映射到原始标签。

![在此处输入图像描述](../Images/ec09aeb1c80ac2ef21275eaa4086d598.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T14:31:11.767

使用您的代码，您的图表并没有像您预期的那样出现。如果你这样做：

```
import pylab as p
import networkx as nx

G = nx.Graph()
G.add_edge("A","B")
G.add_edge("A","H")
G.add_edge("H","C")
G.add_edge("B","C")
G.add_edge("B","D")

nx.draw(G)
p.show() 
```

你会看到你的图表： ![图形](../Images/cc93b4067ee95cc34ae025ab37243656.png)

这是由于以下逻辑`G.add_edge("A", "B")`：

1.  如果`G`没有 id 为“A”的节点，则添加它。
2.  如果`G`没有 id 为“B”的节点，则添加它。
3.  用新边将“A”连接到“B”。

因此，您只创建五个节点，而不是您图片中的六个。

**编辑** Networkx 可以将任何哈希值作为节点的值，并且在图中它使用 str(node) 来标记每个圆。因此，我们可以简单地定义我们自己的 Node 类（您可能想将其称为 Server？）并为其提供所需的行为。

```
import pylab as p
import networkx as nx

class Node(object):
    nodes = []

    def __init__(self, label):
        self._label = label

    def __str__(self):
        return self._label

nodes = [Node(l) for l in ["A","B","C","C","D","H"]]
edges = [(0,1),(0,5),(5,2),(1,3),(1,4)]

G = nx.Graph()
for i,j in edges:
    G.add_edge(nodes[i], nodes[j])

nx.draw(G)
p.show() 
```

给我们 ![新图表](../Images/4d702cbfc45ea046e01913f546852ba5.png) ，所以你想要什么。

# javascript - 从 jquery 插件外部调用 this.each(function(){}) 内部的函数

> ID：14259234
> 
> 赞同：3
> 
> 时间：2013-01-10T13:38:58.483
> 
> 标签：javascript, jquery

```
(function( $ ){

$.fn.foo = function(params) {

    params = $.extend( {
        on: false
    }, params);

    this.each(function(){
        if(params.on) {
            function alertDate(){
                alert('FOO BAR!!!');
            }
        }
    });
};
})( jQuery ); 
```

如何从脚本中访问“alertDate()”函数？

如果我使用：

```
$('#test').foo() 
```

将允许我访问该函数，好的，一切都很好，我将在 this.each(function(){}) 内部访问函数“alertDate()”。

我想通过以下方式从外部访问函数“alertDate()”：

```
$('#text').foo({on: 'true'}).each().alertDate(); 
```

我怎样才能做到这一点？

提前感谢，对不起英语不好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:05:56.793

这是我将如何处理它，以便您的`alertDate()`函数可以在内部和外部使用：

```
$.fn.foo = function(params) {
    params = $.extend( {
        on: false
    }, params);

    this.alertDate = function(){
        alert("FOO BAR!!!");
    }

    this.each(function(){
        if(params.on) {
            this.alertDate();
        }
    });

    return this; 
};

//Externally the alertDate function could be called as:
$("test").foo().alertDate(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:49:18.183

你可以做这样的事情，但这不是插件通常的工作方式。

```
$.fn.foo = function() {
    function bar() { 
        alert("bar");
    } 
    this.bar = bar; 
    return this; 
};

$("a").foo().bar(); 
```

# xpages - 获取列表框的选定值？

> ID：14259235
> 
> 赞同：1
> 
> 时间：2013-01-10T13:38:59.120
> 
> 标签：xpages

如何获取所选项目是列表、组合框等？

[我在这里](http://openntf.org/XSnippets.nsf/snippet.xsp?id=get-selectable-values-of-a-component)找到了这段代码：

```
/*****
 *** getSelectableValues()
 *** prints all selectable values for a given component, f.e. comboboxes, listboxes etc.
 ***
 *** @params id of component
 *****/

function getSelectableValues( id ) {
   var ComboBox = getComponent( id );
   var ChildrenList:java.util.ListIterator;
   ChildrenList = ComboBox.getChildren().listIterator();
   while (ChildrenList.hasNext()) {
      var Child = ChildrenList.next();

      /*** process computed / multiple values ***/
      if( typeof( Child ) == 'com.ibm.xsp.component.UISelectItemsEx' ){
         var hlp = Child.getValue();
         for( var i=0; i< hlp.length; i++ ){

            /*** print to server console ***/
            print( hlp[i].getLabel() + "|" + hlp[i].getValue() );
         }
      }

      /*** process single values ***/
      if( typeof( Child ) == 'com.ibm.xsp.component.UISelectItemEx' ){

      /*** print to server console ***/
      print( Child.getItemLabel() + "|" + Child.getItemValue() );
      }
   }
}

/*** get all selectable values for element 'comboBox1' ***/
getSelectableValues( 'comboBox1' ); 
```

但它似乎获得了列表框中的所有项目，而不仅仅是选定的项目。任何想法如何修改它以获取选定的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:14:31.547

与其询问组件，不如询问数据模型。例如，如果列表框绑定到：

```
#{someDoc.someItemName} 
```

...然后您可以通过询问数据源来检索选定的值：

```
var selectedValues = someDoc.getValue("someItemName"); 
```

如果组件改为绑定到作用域变量：

```
#{viewScope.selectedValues} 
```

...然后只问那个变量：

```
var selectedValues = viewScope.get("selectedValues"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:56:23.680

您可以使用 SSJS 访问选定的值：

```
getComponent('comboBox1').value 
```

如果您正在使用列表框并启用了多项选择，则可以使用 Explode 获取字符串数组：

```
@Explode(getComponent('listBox1').value) 
```

# ios - iOS IAP 问题 - 当用户必须确认信用卡时，iOS 仍保留在 App Store 中

> ID：14259244
> 
> 赞同：1
> 
> 时间：2013-01-10T13:39:24.330
> 
> 标签：ios, app-store, in-app-purchase

我们偶尔会遇到这样的问题：

*   用户在新设备上的首次购买恰好是使用我们应用的 IAP
*   iOS 要求他们确认他们的信用卡详细信息，因为他们之前没有使用过该设备。
*   似乎将他们带到 App Store 应用程序以填写这些详细信息
*   完成此操作后，他们将留在应用商店中
*   如果他们手动返回我们的应用程序，则购买失败，但已向他们收费
*   重新启动应用程序没有帮助

我们发现了应该有所帮助的修订，但是否有其他人遇到过 iOS 在这种情况下无法返回他们的应用程序的问题，因此可能无法传达购买成功的信息？

如果用户手动返回应用，IAP 流程是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:19:24.050

所以我建议让你的编码员来这里，也许谈谈你是如何实现的`StoreKit`。该系统旨在处理用户被带离应用程序并且不会返回的极端情况，但您必须`SKPaymentTransaction`正确实现观察者。一个常见的错误是在用户购买商品时初始化事务观察器，但这是错误的。观察者需要从应用程序启动开始。

# mysql - MYSQL INSERT 或 UPDATE IF

> ID：14259249
> 
> 赞同：6
> 
> 时间：2013-01-10T13:39:33.117
> 
> 标签：mysql, sql, database

现在在网上浏览了一段时间，似乎无法找到与我想要的类似的东西。我知道这与我编写查询的方式有关，但我们将不胜感激。

我正在尝试做的基本工作是：

*   如果表不存在，则将一些项目插入表中
*   如果项目确实存在，则更新它

它以以下格式存在：

名称、条形码、项目、数量、位置、价格和日期

名称 - 可以在多行中使用 条形码 - 用于特定项目，但可以用作多个位置 项目 - 与条形码相同但包含名称 数量 - 不言自明的位置 - 这可以是不同的位置 价格 - 附加到特定商品日期 - 上次购买该商品的时间

棘手的是，一个“名称”可以在不同的位置以不同的价格包含多个项目（条形码和项目）。这个想法是客户可以看到他们在设定的时间购买了多少物品，因此他们知道需要以多少价格出售它。

但是，他们购买它的价格可能会有所不同，因此如果价格与之前购买的价格不同，他们需要在表中创建另一行。

整个事情背后的想法是它记录每个位置每个项目的“名称”有多少，然后是他们购买它的价格以及他们最后一次购买的时间。

希望这是有道理的。

在伪代码中：

```
 Insert into table if does not exist
    - name, barcode, item, quantity, location, price and date
    If name, barcode, item, location and price are the same
    - Update quantity and date (if more recent) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T13:48:07.083

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T13:48:24.150

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T09:59:45.630

感谢以上人员的所有帮助，我最终找到的解决方案非常接近两者。在下面找到它：

```
INSERT INTO `stock`
    (name, barcode, item, quantity, location, price, date)  
VALUES
    (?,?,?,?,?,?,?)                         
ON DUPLICATE KEY UPDATE
     quantity = CASE WHEN 
                VALUES(date) < $date
                THEN quantity + $quantity
                ELSE quantity 
                END,
    date = CASE WHEN 
                VALUES(date) < $date
                THEN VALUES(date)
                ELSE $date
                END 
```

# ios - 将图像路径保存到 sqlite3 数据库

> ID：14259251
> 
> 赞同：1
> 
> 时间：2013-01-10T13:39:42.810
> 
> 标签：ios, objective-c, sqlite

我在将图像路径保存到 Documents 文件夹并将路径存储到我的 sqlite3 本地数据库中时遇到了一些麻烦。

今天我成功地将图像以BLOB的形式存储到了数据库中，但是在互联网上阅读，人们说不推荐这样做。

所以，现在我正在尝试将图像路径存储在数据库中但是..

**情况**

1.  用户点击按钮选择图像（通过 UIImagePickerView）或拍摄新照片
2.  选择图像后，会使用所选图像设置 imageView。

选择器代码：

```
-(void)imagePickerController:(UIImagePickerController *)pickr didFinishPickingMediaWithInfo:(NSDictionary *)info{
    UIImage *image = [info objectForKey:UIImagePickerControllerEditedImage];
    /* Test code for saving data */   
    //NSString *dir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    //NSString *pngPath = [NSString stringWithFormat:@"%@/test.png",dir];
    //NSData *data = [NSData dataWithData:UIImagePNGRepresentation(image)];
    //[data writeToFile:pngPath atomically:YES];

    [imageView setImage:image];
    picture = YES;
    [pickr dismissModalViewControllerAnimated:YES];
} 
```

现在我有几个问题

1.  进入我的数据库，图像是 BLOB 类型。我应该将其编辑为 TEXT 吗？
2.  路径如何保存？我的意思是，在测试代码中 /test.png 是一个通用图像名称。选择的图像名称是否也被保存以便我可以检索它？或者，更好的是，如果我保存从我的库中选择的名为“IMG0001”的图像，它会保存为“测试”吗？
3.  将图像保存到文档文件夹中的正确方法是什么，它的数据库路径然后检索它？

我用谷歌搜索了很多以找到答案，但在尝试了很多之后我放弃了。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:46:51.067

[这](http://blog.teliaz.com/2010/capture-saveloadremove-image-in-documents-directory)是关于如何在 Documents 目录中保存图像的好教程

您需要将 BLOB 字段转换为 TEXT 字段并保存该图像的文件名。您也可以在 Documents 目录中创建文件夹，然后通过文件夹名/文件名.png 访问。

希望这些信息对你有帮助。。

编辑

这是检查该文件夹是否存在的代码，如果不存在则创建新的该文件夹

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentsDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; // Get documents folder
NSString *dataPath = [documentsDirectory stringByAppendingPathComponent:@"MyFolder"];

if (![[NSFileManager defaultManager] fileExistsAtPath:dataPath]){

    NSError* error;
    if(  [[NSFileManager defaultManager] createDirectoryAtPath:dataPath withIntermediateDirectories:NO attributes:nil error:&error])
        ;// success
        else
        {
            NSLog(@"[%@] ERROR: attempting to write create MyFolder directory", [self class]);
            NSAssert( FALSE, @"Failed to create directory maybe out of disk space?");
        }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:43:56.850

您不能直接访问用户照片库中的图像，因为您只能访问 Applications Sandbox 文件夹。

因此，如果您不想将图像作为 blob 文件存储在数据库中，则应将图像保存在应用程序文档文件夹内的缓存文件夹中，然后将您设置为图像的文件名存储在数据库中。

由于所有图像都将位于同一个路径文件夹中，因此您实际上不需要将整个路径保存在数据库中，但只需文件名就足够了。

# c - 代码中的这一行是什么意思？（指向字符的指针数组）？

> ID：14259254
> 
> 赞同：1
> 
> 时间：2013-01-10T13:39:48.913
> 
> 标签：c, arrays, pointers, char, size

在这段代码中，“数组”是一个指向字符的指针数组？或者是其他东西？

```
struct tmep{
    char (*array) [SIZE];
} 
```

提前致谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T13:41:27.037

它是一个指向 s 数组的指针`SIZE` `char`。

声明模仿使用，所以你首先评估括号，`(*array)`给你一个`char[SIZE]`.

分配，稳定版照常

```
array = malloc(num_elements * sizeof *array); 
```

通过采用取消引用的指针来指定块中每个对象（`char[SIZE]`此处）的大小。`sizeof`如果类型更改为`int (*)[SIZE]`.

如果要指定类型，

```
array = malloc(num_elements * sizeof(char (*)[SIZE])); 
```

这将分配 - 如果`malloc`成功 - 一个足够大的块用于s 的`num_elements`数组`SIZE` `char`，这些数组中的每一个都可以使用

```
array[i] 
```

以及`char`块中数组中的 s

```
array[i][j] 
```

# c++ - 如何将类的可见性限制为特定的其他类？

> ID：14259258
> 
> 赞同：0
> 
> 时间：2013-01-10T13:40:12.397
> 
> 标签：c++

C++（03 或 11）中有没有办法限制类的可见性（类似于 Java 中的默认或包范围）？例如：

`Foo`应该只对 可见`Bar`但对 不可见`Baz`。

```
class Foo {};
class Bar { Foo foo; /* OK */ };
class Baz { Foo foo; /* not visible, error */ }; 
```

此处建议的匿名命名空间解决方案[如何限制声明它的命名空间之外的类的可见性？](https://stackoverflow.com/questions/9858754/how-to-restrict-the-visibility-of-a-class-outside-the-namespace-in-which-it-is-d)似乎没有工作。[演示： http: [//ideone.com/fsEKPu](http://ideone.com/fsEKPu) ]我有什么误解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:42:32.697

如果您只想`Foo`对 可见`Bar`，那么只需在内部创建`Foo`一个私有嵌套类`Bar`。

```
class Bar
{
  public:

  private:
  class Foo { };
}; 
```

只有这种方式`Bar`（以及任何声明为 a `friend`of 的类`Bar`）才能访问`Bar::Foo`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:25:17.587

如果可以在不同的 cpp 文件中有 Bar 和 Baz 类定义，则在 Bar 存在（或 Bar1 和 Bar2 存在）的同一文件中定义 Foo ，并将 Foo 包含在匿名命名空间下。

# svn - 为什么 SVNVersion.exe 返回未版本化目录

> ID：14259260
> 
> 赞同：0
> 
> 时间：2013-01-10T13:40:14.963
> 
> 标签：svn, c#-4.0, tortoisesvn, msbuild-task

我正在尝试使用 SVN 修订号标记我的 make 项目构建。

我正在使用 MsBuildTask 更新 AssemblyVersionFile 详细信息。

我正在使用以下 BuildScript 来获取信息，但这会返回 -1，因为 SVNVersion.exe 正在返回未版本化的目录，如何更新 SVNVersion.exe

```
<Target Name="BeforeBuild">
    <SvnVersion LocalPath="$(MSBuildProjectDirectory)" ToolPath="$(ProgramFiles)\TortoiseSVN\bin">

   <Output TaskParameter="Revision" PropertyName="Revision" />

    </SvnVersion>

    <FileUpdate Files="Properties\AssemblyInfo.cs"
     Regex="(\d+)\.(\d+)\.(\d+)\.(\d+)"
  ReplacementText="$1.$2.$3.$(Revision)" />

</Target> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:05:20.170

您**不能更新**svnversion（出于这个原因，您认为更新是解决方案），但要获得正确的工作字符串** 以运行 svnversion，以获得结果。

`svnversion --help`命令行的读取、注释格式

`svnversion [OPTIONS] [WC_PATH [TRAIL_URL]]`

并备注

> 如果 WC_PATH 是未版本化的路径，程序将输出“未版本化的目录”或“未版本化的文件”。

即 - 为任务构建命令行，**检查需要你版本化的目录**，而不是一些奇怪的非 WC 位置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-26T16:55:09.193

这是因为您使用的是旧版本的 svnversion。

尝试打开命令行提示符，导航到 svnversion 目录并执行与 MSBuild 相同的工作。

命令：

```
cd C:\ProgramFiles\TortoiseSVN\bin
[进入]
svnversion C:\VisualStudio\Projects\YourDirectory
[进入]

SVNVERSION 应该回答为什么它不工作，在我的例子中是 E155021：这个客户端太老了，不能在...

```

# php - php中的jquery ajax

> ID：14259261
> 
> 赞同：-1
> 
> 时间：2013-01-10T13:40:16.013
> 
> 标签：php, jquery, mysql, ajax

我第一次尝试在我的 php 代码中使用 jquery ajax。我有一组复选框。根据我选中的复选框，将构建 mysql 查询并将其显示在我的页面中。你能帮我如何前进吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:53:28.290

看说明书[`jQuery.ajax()`](http://api.jquery.com/jQuery.ajax/)。你也有几个例子。

您必须收集您的复选框值，然后将其发送到您的 PHP 脚本

```
var cb1 = $('#checkbox1').attr('checked');
var cb2 = $('#checkbox2').attr('checked');
$.ajax({ type: 'POST',
         url: 'checkboxes.php',
         data: { checkbox1: cb1,
                 checkbox2: cb2 },
         success: function(response) {
                  // do something with response from PHP script
                 }
       }); 
```

有关您可以使用的更多选项，请参阅 jQuery API。

在服务器端，您可以`$_POST`像使用任何其他请求一样评估变量。

# c# - 实现 IValueConverter 将字符串转换为图像

> ID：14259262
> 
> 赞同：2
> 
> 时间：2013-01-10T13:40:27.693
> 
> 标签：c#, windows, xaml, converter, ivalueconverter

我目前正在尝试在我的 Windows 8 应用程序中显示图像。`List<string>`我有一个方法，它用许多图像路径填充类型的属性。我希望在屏幕上显示这些图像。

因此，我实现了一个从字符串到图像的转换器。但是，我得到了错误：

*   *名称空间“using:TestApp.Converters”中不存在名称“StringToImageConverter”。*
*   *'TestApp.Converters.StringToImageConverter' 没有实现接口成员 'Windows.UI.Xaml.Data.IValueConverter.ConvertBack(object, System.Type, object, string)'*
*   *'TestApp.Converters.StringToImageConverter' 没有实现接口成员 'Windows.UI.Xaml.Data.IValueConverter.Convert(object, System.Type, object, string)'*

这是我的转换器的代码：

```
namespace TestApp.Converters
{
    public sealed class StringToImageConverter : IValueConverter
    {
        public object Convert(object value, Type targetType,
                              object parameter, CultureInfo culture)
        {
            try
            {
                return new BitmapImage(new Uri((string)value));
            }
            catch
            {
                return new BitmapImage();
            }
        }

        public object ConvertBack(object value, Type targetType,
                                  object parameter, CultureInfo culture)
        {
            throw new NotImplementedException();
        }
    }
} 
```

从我的 XAML 文件中：

```
 <common:LayoutAwarePage
        ...
        xmlns:converters="using:TestApp.Converters"
         DataContext="{Binding RelativeSource={RelativeSource Self}}">
        <Page.Resources>
            <converters:StringToImageConverter x:Key="StringToImageConverter"> </converters:StringToImageConverter>
        </Page.Resources>
...
  <ItemsControl ItemsSource="{Binding Path=test}" Grid.Column="1" Grid.Row="3" Grid.ColumnSpan="4"
              HorizontalContentAlignment="Stretch">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate>
                            <Image Source="{Binding Converter={StaticResource StringToImageConverter}}" />
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
... 
```

这是否适用于在 Windows 8 应用程序中显示我的图像？`List<string>`图像路径的 被调用并且`test`位于 xaml 文件后面的代码中。

非常感谢您对此提供的所有帮助:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T13:50:38.900

显然有两种类型的 IValueConverters：

```
Windows.UI.Xaml.Data.IValueConverter
System.Windows.Data.IValueConverter 
```

听起来您的框架期待前者，而您正在实施后者。

您可能还需要更改此设置：

```
xmlns:converters="using:TestApp.Converters" 
```

对此：

```
xmlns:converters="clr-namespace:TestApp.Converters" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T13:51:45.657

`Windows.UI.Xaml.Data.IValueConverter`期望最后一个参数是 a `string`，而不是 a`CultureInfo`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-02T16:22:04.737

```
<Window
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"       
        xmlns:s="clr-namespace:System.Collections;assembly=mscorlib"
        xmlns:p="clr-namespace:System;assembly=mscorlib"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:Entities="clr-namespace:Entities;assembly=Entities" 
        mc:Ignorable="d" 
        x:Name="XXXXX"
        x:Class="AAAA.XXXXX" Title="Seciones" Height="644.305" Width="909.579"
        xmlns:c="clr-namespace:AAAA">
    <Window.Resources>
        <c:StringToImageConverter x:Key="stringToImageConverter"/>
    </Window.Resources>
.....
</Window> 
```

# grails - 上传文件抛出没有方法异常的签名（在 getFile() 方法中）

> ID：14259264
> 
> 赞同：2
> 
> 时间：2013-01-10T13:40:28.800
> 
> 标签：grails

我正在尝试上传文件，并将其存储在文件中。这是 GSP 中的代码：

```
<g:form method="post" enctype="multipart/form-data"  action="update">
<input type="file" name="cv" id="cv"/>
<g:actionSubmit action="upload" name="upload" value="Upload" />
</g:form> 
```

在控制器中：

```
def upload(){
def f = request.getFile('cv')
InputStream file = f.inputStream
byte[] bytes = file.bytes
println('bytes: '+bytes)
} 
```

正如我在标题中所说，我在这里遇到了一个例外。有什么帮助吗？谢谢。

编辑（完整堆栈跟踪，应要求）：

```
Error 500: Internal Server Error

URI
/com.publidirecta.azafatas/azafataCertificada/index
Class
groovy.lang.MissingMethodException
Message
No signature of method:org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestWrapper.getFile() is applicable for argument types: (java.lang.String) values: [cv] Possible solutions: getXML(), getPart(java.lang.String), getAt(java.lang.String), getAt(java.lang.String), getLocale(), getJSON()

Around line 1158 of grails-app/controllers/com/publidirecta/AzafataCertificadaController.groovy

1155:           def upload(){
1156:       println("Acci√≥n upload. Params: "+params)
1157:       Azafata aza=Azafata.findByUsername(params.user)
1158:       def f = request.getFile('cv')
1159:       InputStream file = f.inputStream
1160:       byte[] bytes = file.bytes
1161:               }

Trace

    Line | Method
->> 1158 | upload  in AzafataCertificadaController.groovy
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    886 | runTask in java.util.concurrent.ThreadPoolExecutor$Worker
|    908 | run . . in     ''
^    680 | run     in java.lang.Thread 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-02T16:23:38.207

问题是您的请求没有被视为 MultiPartRequest。做这样的事情：

```
MultipartRequest multipartRequest =  request as MultipartRequest
  if(multipartRequest){
    MultipartFile attachmentFile = multipartRequest.getFile("attachment_file".toString())
    if (attachmentFile) {
        -- copy it ---
    }
  } 
```

# eclipse - egit - 未授权

> ID：14259265
> 
> 赞同：48
> 
> 时间：2013-01-10T13:40:30.140
> 
> 标签：eclipse, git, egit

我刚刚使用 EGit 从 Eclipse Juno 连接到 GIT，并成功克隆了某个远程存储库。在克隆过程中，我输入了我的 Github 用户名和密码，但选择不保存它们。

然后我尝试“从上游获取”。我收到了这个错误：

```
https://github.com/biunlp/nlp-lab.git：未授权
```

我没有机会输入我的用户名和密码......

这很奇怪，因为我连接到这个存储库是为了克隆......

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-10T15:01:14.207

## A. 为每个遥控器单独指定凭据

1.  打开 Git 存储库视图，
2.  打开“ `Remotes > origin > <your push url>`”
3.  单击“更改凭据...”

![推送菜单](../Images/7e71e560a1feddb8d202050b3fc5fb6b.png)

（来自[用户指南 - 资源上下文菜单](http://wiki.eclipse.org/EGit/User_Guide#Resource_Context_Menu)）

## B. 指定每台服务器的凭据

如果您想访问同一服务器上的多个存储库而不多次提供相同的凭据，您可以使用*.netrc*。这样，eGit 将使用您提供的配置。

1.  在用户主目录中创建一个名为`.netrc`（`_netrc`在 Windows 中）的文本文件。
2.  以这种形式将内容添加到文件中：

```
    机器 my.server1.com
    登录你的用户名
    密码 yourPassword

    机器 my.server2.com
    登录你的用户名
    密码 yourPassword

```

Stash 文档包含[有关 .netrc 的更多信息](https://confluence.atlassian.com/display/STASH/Permanently+authenticating+with+Git+repositories#PermanentlyauthenticatingwithGitrepositories-Usingthe.netrcfile)

**安全问题**以这种方式使用 .netrc 的问题是密码以纯文本形式可见。请参阅[Stackoverflow 中的此答案](https://stackoverflow.com/questions/5343068/is-there-a-way-to-skip-password-typing-when-using-https-github/18362082#18362082)以解决该问题。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-09-01T03:48:50.670

你可以试试：

> eclipse/myeclipse > 菜单
> 
> 窗口 > 首选项 > 常规 > 安全 >
> 
> 内容 > 点击“删除” > 确定

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2016-01-26T15:08:10.960

**如果您在 GitHub 上使用两因素身份验证，即使您使用正确的用户名和密码，也会返回“未授权”错误**。这可以通过[生成个人访问令牌](https://help.github.com/articles/creating-an-access-token-for-command-line-use/)来解决。

生成安全访问令牌后，我们将使用它而不是密码。确保在完成之前不要离开页面，因为一旦离开页面，您将永远不会再看到它（幸运的是它可以重新生成，但使用之前生成的令牌的任何内容都将停止验证）。

这假设您已成功安装 EGit 并且您已成功克隆了一个存储库。

1.  转到您的 GitHub.com 设置，然后在左侧窗格中单击`Personal access tokens`。
2.  单击`Generate new token`。选择您希望此令牌能够使用的范围，然后生成它。
3.  复制令牌。它应该看起来像这样：（ `9731f5cf519e9abb53e6ba9f5134075438944888`别担心，这是无效的）。
4.  回到 Eclipse（Juno，因为那是 OP 的版本），单击`Window > Show View > Other...`. 在 下`Git`，选择`Git Repositories`。
5.  将出现一个新窗格，您可以从中打开`(repository name) > Remotes > origin`.
6.  右键单击一个节点并选择`Change Credentials...`。输入您的用户名`User`，以及您的安全访问令牌`Password`。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2014-04-30T17:23:27.160

当我在远程存储库上更改密码时，我遇到了类似的问题。

这是我在 Mac 上的 Eclipse 上修复它的方法：

重要提示：这些说明具有清除所有密码和其他安全信息的副作用。我对此很好，但在您遵循这些说明之前，您需要考虑这一点。

1.  在菜单上单击 Eclipse -> 首选项。
2.  期待一个名为 Preferences 的弹出窗口。
3.  展开“常规”树项。
4.  双击“安全”树项。
5.  预计弹出窗口的主窗格将更改为“请参阅 'Secure Storage' for...”
6.  单击“安全存储”。
7.  期望主窗格更改为选项卡式窗口。
8.  单击“内容”选项卡。
9.  点击“删除”。
10.  接受您的所有安全信息已被删除的警告。
11.  单击“取消”或“应用”退出弹出窗口。
12.  单击“Git Pull”图标，系统会提示输入用户名和密码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-13T14:01:30.190

这对我有用：

转到 Git 配置文件-> 设置-> 开发人员设置-> 个人访问令牌如果有任何现有令牌，则删除并生成新令牌 [提供注释，指定天数并检查回购] -> 复制生成的新令牌转到 eclipse 和现在当出现相同的登录提示时，尝试提供生成的个人令牌作为密码而不是 Git 密码。

# wpf - caliburn 微和混淆

> ID：14259268
> 
> 赞同：2
> 
> 时间：2013-01-10T13:40:34.490
> 
> 标签：wpf, obfuscation, caliburn.micro

我在我的 WPF 应用程序中使用 caliburn micro。我发现当我混淆我的应用程序时，它不起作用，因为 caliburn micro 正在使用反射和混淆更改名称，因此 caliburn micro 无法工作。

有什么解决方法吗？是否有任何混淆软件可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-01T20:07:59.467

我将 caliburn micro 与我的混淆器（SmartAssembly）一起使用，我必须配置混淆以排除 View 和 ViewModel 命名空间中的所有内容。

# validation - 将本地化的显示名称添加到约束违规消息？

> ID：14259272
> 
> 赞同：1
> 
> 时间：2013-01-10T13:40:38.497
> 
> 标签：validation, gwt

我们在 2.5 中使用新的 GWT 验证库。

我们正在向我们的屏幕添加一个汇总的违规列表。此列表必须显示本地化的字段名称。

```
@MyNotNull(foo= "Stage")
public String getStage(); 
```

本地化消息需要显示

“阶段是必填字段”

MyValidationMessages.properties 中的消息读取

> {foo} 是必填字段

请注意，注释不允许将非常量值分配给属性。所以我们必须在设计时以某种方式获取语言环境值：/

这行不通

```
@MyNotNull(foo = injector.getLocale().errorMessage()) 
public String errorMessage() 
```

我如何使用 localeKey 在语言环境文件中查找语言环境，因为该属性需要一个常量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T19:51:20.600

The solution is to

*   add something like FieldLocale.properties this is a constants lookup
*   Add an attribute to your annotation like localeKey
*   Iterate your ConstraintViolation collection
*   Use something like the below to get the attribute value
*   Look up the localized value in your FieldLocale.properties file
*   Copy the violation and change the message to the localized version

    protected String getAttributeValue(ConstraintViolation violation, String key) { ConstraintDescriptor descriptor = violation.getConstraintDescriptor();

    ```
     if (descriptor.getAttributes().containsKey(key))
            return (String) descriptor.getAttributes().get(key);

        return null;
    }

    protected ConstraintViolation<T> copyMessage(ConstraintViolation<T> violation, String message) {
        return ConstraintViolationImpl.<T> builder() //
                .setConstraintDescriptor(violation.getConstraintDescriptor()) //
                .setInvalidValue(violation.getInvalidValue()) //
                .setLeafBean(violation.getLeafBean()) //
                .setMessage(message) //
                .setMessageTemplate(violation.getMessageTemplate()) //
                .setPropertyPath(violation.getPropertyPath()) //
                .setRootBean(violation.getRootBean()) //
                .setRootBeanClass(violation.getRootBeanClass()) //
                .build();
    } 
    ```

# twitter - 如何从推特获得关注建议？

> ID：14259274
> 
> 赞同：4
> 
> 时间：2013-01-10T13:40:40.687
> 
> 标签：twitter

在 Twitter 上，有一个页面列出了一些建议的用户*“根据您关注的人等为您推荐的 Twitter 帐户”。*从此链接：[https ://twitter.com/i/#!/who_to_follow/suggestions](https://twitter.com/i/#!/who_to_follow/suggestions)

我没有找到一个 API 来检索相同的列表（也许我错过了它？）。

有人知道如何访问该列表吗？（除了解析html）

该列表的好处是它没有分类，并且确实包含普通人（即不是体育/电影巨星等）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:42:37.010

我认为这可以通过 twitter API 分两步实现。似乎首先您需要获取 twitter 向用户建议的类别，然后从这些类别中您可以将建议的用户获取给经过身份验证的用户。

[https://dev.twitter.com/docs/api/1.1/get/users/suggestions](https://dev.twitter.com/docs/api/1.1/get/users/suggestions)

[https://dev.twitter.com/docs/api/1.1/get/users/suggestions/%3Aslug](https://dev.twitter.com/docs/api/1.1/get/users/suggestions/%3Aslug)

# octopus-deploy - 八达通部署和 VPN

> ID：14259277
> 
> 赞同：7
> 
> 时间：2013-01-10T13:40:45.520
> 
> 标签：octopus-deploy

有谁知道是否可以使用 Octopus Deploy 部署到 VPN 中的服务器？如果触手在 VPN 中的服务器上，是否可以通过 Octopus Deploy 连接/断开与 VPN 的连接？

干杯

**更新**

我们认为我们已经通过以下方式找到了解决方法：

1.  在运行我们的 Octopus 的同一台服务器上安装触手，然后添加执行 Powershell 脚本以创建 VPN 连接的第一步。
2.  下一步是将 NuGet 包部署到 VPN 中的触手服务器。
3.  最后一步是在与第一步相同的触手服务器上执行另一个 Powershell 脚本来关闭连接

早期的测试似乎表明这是可行的！

感谢我的同事 Rachel 提出这个想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:04:14.083

目前没有办法做到这一点，除非自己建立 VPN 连接，然后使用 Octo.exe 触发 Octopus 部署，然后断开连接。

将来如果支持在 Octopus 中打开 VPN 连接会很好。您的 VPN 会话是使用 Windows 远程访问服务器组件建立的（例如，像[http://dotras.codeplex.com/](http://dotras.codeplex.com/)这样的工具包是否能够打开连接？）还是通过一些自定义软件建立的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-25T14:42:00.037

您可以将 Hamachi 用于 VPN - 我决定将任何作为部署目标的服务器放置到 Hamachi 组中。

它使用起来非常简单，可能只对那些不受严格 IT 政策等约束的人有用。

但可能对大多数人都有好处。

请参阅[https://secure.logmein.com/products/hamachi/download.aspx](https://secure.logmein.com/products/hamachi/download.aspx)

# c++ - decltype 没有从函数中推导指针，导致调用错误的特征类

> ID：14259279
> 
> 赞同：-4
> 
> 时间：2013-01-10T13:40:50.373
> 
> 标签：c++, templates

```
#include <iostream>
#include <vector>
#include <memory>
#include <type_traits>
#include <string>
#include <algorithm>
#include <functional>
#include <iterator>

using namespace std;

class person{
public:
    person(){
        cout << "default ctor\n";
    };
    person(string const & name) : name(name){
        cout << "in name ctor\n";
    }
    person(person const & other) : name(other.name){
        cout << "copy ctor\n";
    }
    person& operator = (person other){
        cout << "copy assign oper\n";
        std::swap(name,other.name);
        return *this;
    }
    person(person&& other) : name(std::move(other.name)){
        cout << "Move ctor\n";
    }
    person& operator = (person && other){
        name = std::move(other.name);
        cout << "Move assign operator\n";
        return *this;
    }
    void print() const{
        cout << name << endl;
    }
private:
    string name;
};

template<class T>
class get_unwrapped{
public:
    T& get(T& t){
        return t;
    }
};

template<class T>
class get_unwrapped<T*>{
public:
    T& get(T* t){
        return *t;
    }
};

template<class T>
class get_unwrapped<shared_ptr<T>>{
public:
    T& get(shared_ptr<T>& t){
        return *t;
    }
};

template<class T>
void print_all(T&& elements){    
    for(auto it = std::begin(elements); it != std::end(elements); ++it){
        get_unwrapped<decltype(*it)> unwrapper;
        auto &result = unwrapper.get(*it);
        result.print();
    }
}

int main()
{

    vector<person*> v;

    v.reserve(3);
    v.push_back(new person("Blair"));
    v.push_back(new person("Esther"));

    print_all(v);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:50:27.343

为什么不简单地使用函数模板？

```
template<class T>
T& get_unwrapped(T& t){
  return t;
}

template<class T>
T& get_unwrapped(T* t){
  return *t;
}

template<class T>
T& get_unwrapped(shared_ptr<T>& t){
  return *t;
}

// ...
auto &result = get_unwrapped(*it);
result.print(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:52:09.480

`operator*`迭代器的返回引用类型，因此指针特化不匹配。

如果您这样说，您的代码将起作用：

```
get_unwrapped< typename std::remove_reference<decltype(*it)>::type > unwrapper; 
```

你可以试试：

```
std::cout << std::is_same< decltype(*it), person*&>::value; 
```

打印`1`。

# scheduled-tasks - Windows 任务计划程序错误 101 启动失败代码 2147943785

> ID：14259285
> 
> 赞同：77
> 
> 时间：2013-01-10T13:41:09.497
> 
> 标签：scheduled-tasks

我正在尝试安排我的 C# 程序在 Windows 调度程序上运行。我正在使用，Windows 7 专业版。

无论用户是否登录，我都可以创建任务安全选项集来运行，赋予它高权限，它是在我有权访问的远程路径上启动一个 exe。

“错误值：2147943785”您的帮助将不胜感激。

这是错误的 XML

```
- <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
- <System>
  <Provider Name="Microsoft-Windows-TaskScheduler" Guid="{DE7B24EA-73C8-4A09-985D-          5BDADCFA9017}" /> 
  <EventID>101</EventID> 
  <Version>0</Version> 
  <Level>2</Level> 
  <Task>101</Task> 
  <Opcode>101</Opcode> 
  <Keywords>0x8000000000000001</Keywords> 
  <TimeCreated SystemTime="2013-01-10T12:44:20.882178000Z" /> 
  <EventRecordID>51522</EventRecordID> 
  <Correlation /> 
  <Execution ProcessID="652" ThreadID="1892" /> 
  <Channel>Microsoft-Windows-TaskScheduler/Operational</Channel> 
  <Computer>pcb.co.za</Computer> 
  <Security UserID="S-1-5-18" /> 
  </System>
- <EventData Name="TaskStartFailedEvent">
  <Data Name="TaskName">\Naedo</Data> 
  <Data Name="UserContext">Domanin\User31r</Data> 
  <Data Name="ResultCode">2147943785</Data> 
  </EventData>
  </Event> 
```

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2013-01-10T13:50:32.897

配置为运行此计划任务的用户必须在托管您要启动的 exe 的计算机上具有“作为批处理作业登录”权限。这可以在托管 exe 的计算机的本地安全策略上进行配置。您可以在下面更改策略（在托管 exe 的服务器上）

> 管理工具 -> 本地安全策略 -> 本地策略 -> 用户权限分配 -> 作为批处理作业登录

将您的用户添加到此列表中（您也可以将用户帐户设置为托管 exe 的计算机上的本地管理员）。

最后，您还可以简单地将您的 exe 从网络位置复制到本地计算机，然后从那里运行它。

另请注意，域策略可能会限制您组织的“作为批处理作业登录”权限。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2018-04-11T08:40:16.440

有同样的问题，但在此之前我的工作了几周。意识到我已经更改了服务器上的密码。

如果您选择了“无论用户是否登录都运行”选项，请记住更新您的密码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-05-07T08:17:40.747

只需为与我有相同问题的任何人添加此内容，我就会收到“任务启动失败”错误，因为我更改了 Windows 密码，因此我必须打开任务属性并使用新密码保存。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-08-04T08:27:13.260

我已经更改了任务的执行方法，现在它可以毫无问题地执行它

[![改变方法](../Images/9a8609448c6b0d4bb84283b8954c07d8.png)](https://i.stack.imgur.com/sLQmS.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-09T18:49:40.863

我今天在Win7.x64上也有同样的问题，这解决了。

右键单击我的计算机 > 管理 > 本地用户和组 > 组 > 管理员双击 > 你的名字应该在那里，如果没有按添加...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-06-11T19:24:18.580

今天有同样的问题。我将用户添加到：

> 管理工具 -> 本地安全策略 -> 本地策略 -> 用户权限分配 -> 作为批处理作业登录

但仍然收到错误。我找到[了这篇文章](https://social.technet.microsoft.com/Forums/windowsserver/en-US/760ee186-8074-40a5-95b0-35d17c2bdfab/log-on-as-batch-job-right?forum=winserverGP)，结果发现还有这个设置我必须从中删除用户（不确定它是如何进入的）：

> 管理工具 -> 本地安全策略 -> 本地策略 -> 用户权限分配 -> 拒绝作为批处理作业登录

因此请注意，您可能需要为用户检查这两个策略。

# grails - Grails：将 Hql 查询转换为 GORM

> ID：14259288
> 
> 赞同：0
> 
> 时间：2013-01-10T13:41:16.347
> 
> 标签：grails, orm, hql, grails-orm

请使用标准或使用某些 API 将下面的 hql 查询转换为 GORM。我是 grails 的新手，我进行了足够的搜索，但我没有得到任何积极的解决方案，如果它很简单，请原谅我。

> MappingDetail.executeQuery("select map.id from MappingMaster as map where map.id = (select mapdetail.id from MappingDetail as mapdetail where mapdetail.rawdata_template.id=(select rawdata.id from RawDataMasterTemplate as rawdata where rawdata.name like :name ))",[名称:'%Rick%'])

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:27:11.147

为什么必须在这里使用标准？我认为这是您使用 HQL 的选择。

```
def raw = RawDataMasterTemplate.findByNameLike('%Rick%')
def detail = MappingDetail.findByRawdata_template(raw)
def master = MappingMaster.get(detail?.id) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-04T19:31:19.963

测试这个：

```
MappingMaster.withCriteria {
  createAlias 'mappingDetail', 'mp'
  createAlias 'mp.rawDtaMasterTemplate', 'rd'
  projections {
    property 'id'
  }
  ilike 'rd.name', '%Rick%'
} 
```

# javascript - ExtJS如何在提交时获得检查节点？

> ID：14259289
> 
> 赞同：0
> 
> 时间：2013-01-10T13:41:16.383
> 
> 标签：javascript, magento, extjs, prototypejs

我使用 ExtJS 1.0.1（在 magento 中）

我想在表单提交时获取所有已检查的节点。我卡在这里：

**tree.html（初始化）：**

```
tree<?php echo $this->getId() ?> = new Ext.tree.TreePanel.Enhanced('<?php echo $_divId ?>', {
            animate:          false,
            loader:           categoryLoader,
            enableDD:         false,
            containerScroll:  true,
            rootVisible:      '<?php echo $this->getRoot()->getIsVisible() ?>',
            useAjax:          true,
            currentNodeId:    <?php echo (int) $this->getCategoryId() ?>,
            addNodeTo:        false
        }); 
```

**关于提交功能：**

```
function submit()
{

   console.log(tree'.$this->getId().');
   // got html code <div id="treeoptions_fieldset992cb0dd9a7da511e5596a229a5386d5_select_catalogb0f2cd4faa4f13b72f0df314bdc222ec" class="tree x-tree"><ul class="x-tree-root-ct x-tree-lines" id="ext-gen5859">...</ul></div>

   var checked_nodes = tree'.$this->getId().'.getChecked();
   // got an error Uncaught TypeError: Object #<HTMLDivElement> has no method 'getChecked'
} 
```

Magento 在管理面板中使用prototypeJS。问题是如何处理checked_nodes 来运行getChecked()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:13:05.137

基于对 EXTJS 的 Tree 功能的一些谷歌搜索，试试这个

```
var checked_nodes = tree'.$this->getId().'.select(".x-grid-row-selected");
console.log(checked_nodes); 
```

该`.select()`方法查找与所选 CSS 选择器匹配的所有子节点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T05:34:50.800

得到作品！

我在 treegetId() ?> init 之后创建了对象：

```
function av_OkButton()
    {
        var tree = null;

        this.onPress = function()
        {
            var ids = this.tree.getChecked();
        }

        this.getTree = function()
        {
            return this.tree;
        }

        this.setTree = function(treeObj)
        {
            this.tree = treeObj;

            return this;
        }
    }

okButton = new av_OkButton;
okButton.setTree(tree<?php echo $this->getId() ?>); 
```

然后创建提交按钮：

无法理解我所做的与我现在拥有的有什么区别，但它对我有用

# sql - SQL Server 中的选择性更新

> ID：14259290
> 
> 赞同：0
> 
> 时间：2013-01-10T13:41:16.770
> 
> 标签：sql, sql-server, select, junction-table

我创建了一个像这样的连接表：

[http://imageshack.us/scaled/landing/822/kantotype.png](http://imageshack.us/scaled/landing/822/kantotype.png)

我试图找出一个能够选择一些行的查询 - 基于`PokémonID`- 然后在主要的“**过滤**”之后只更新第一行或第二行。

例如：

假设我想从包含的第二行更改 TypeID 的值`PokémonID = 2`。我不能简单地使用`UPDATE KantoType SET TypeID = x WHERE PokémonID = 2`，因为它会改变两行！

我已经尝试使用包含`IN`,`EXISTS`和的子查询`LIMIT`，但没有成功。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:44:23.440

目前尚不清楚您要做什么。但是，您可以`UPDATE`像`JOIN`这样：

```
UPDATE 
SET k1.TypeID = 'somethng' -- or some value from k2
FROM KantoType k1
INNER JOIN
(
   Some filtering and selecting
) k2 ON k1.PokémonID = k2.PokémonID 
WHERE k1.PokémonID = 2; 
```

**或者：**如果你只想拥有你可以这样做`UPDATE`的两行：`PokémonID = 2`

```
WITH CTE
AS 
(
   SELECT *,
     ROW_NUMBER() OVER(ORDER BY TypeID) rownum
   FROM KantoType
   WHERE PokemonID = 2
) 
UPDATE c 
SET  c.TypeID = 5
FROM CTE c
WHERE c.rownum = 1; 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!3/ea769/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:04:37.850

不确定即使您尝试通过对 TypeID 进行**主要过滤**来更新 PokemenID =2 的行...所以只是出于假设（大），您可以尝试一下`Case`

```
UPDATE yourtable a
LEFT JOIN youtable b on a.pokeid = b.pokeid
SET a.typeid = (CASE
   WHEN a.typeid < b.typeid THEN yourupdatevalue
   WHEN a.typeid > b.typeid THEN someothervalue   
   ELSE a.typeid END); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:57:08.453

如果您只需要更新表中的一行，我可以建议这样的事情：

```
UPDATE kantotype
SET 
  type = 2
WHERE pokemon = 2
AND NOT EXISTS (SELECT * FROM kantotype k2 
                WHERE kantotype.type > k2.type
                   AND kantotype.pokemon = k2.pokemon) 
```

如果表中有唯一标识符字段，则更容易获取表的第一项或最后一项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T13:36:34.147

如果您知道口袋妖怪 ID 和类型 ID，那么只需将两者都添加到查询的 where 子句中。

```
UPDATE KantoType 
SET TypeID = x 
WHERE PokémonID = 2
AND TypeID=1 
```

如果您不知道类型 ID，那么您需要提供有关您要完成的任务的更多信息。目前尚不清楚您为什么没有此信息。

也许考虑一下数据集中的唯一标识符是什么。

# javascript - 获取 Kendo Grid 表单数据字符串

> ID：14259293
> 
> 赞同：0
> 
> 时间：2013-01-10T13:41:42.933
> 
> 标签：javascript, model-view-controller, kendo-ui

我正在使用网格数据创建一个报告，这样我就可以窃取我试图从我自己的方法在 MVC 中调用剑道网格处理程序的完全相同的外观。

我观察到 kendo 在更新网格时会发送此消息：

```
sort:dueDate-desc
page:1
pageSize:20
group:
filter: 
```

到目前为止，为了格式化这个，我刚刚循环并手动创建了表单数据，例如排序字段：

```
 var sortSet = grid.dataSource.sort();
     var sortString = '&sort=';
     for (var i = 0; i < sortSet.length; i++) {
        sortString = sortString + sortSet[i].field + '-' + sortSet[i].dir + '~';
     } 
```

有没有办法让剑道做到这一点？已经存储字符串的地方？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:51:49.953

如果您`dataSource`在选项`serverAggregates`中定义`serverFiltering`、`serverGrouping`、`serverPaging`和 / 或`serverSorting`，KendoUI 会将这些参数发送到服务器，以让它完成需要做的事情以及所需的不同参数。

在这些情况下，您可以定义`transport.parameterMap`或`transport.read.data`允许您将参数从 KendoUI 内部格式*转换*或添加到您的服务器格式，因此您可以在此处拦截请求并保存最后一个请求的参数列表以供以后使用。

**选项1**：

```
var savedParamAsJSON = undefined;
var savedParamAsStringifiedJSON = undefined;
var savedParamAsUriEncoded = undefined;
var savedParamAsUriDecoded = undefined;

var dataSource = new kendo.data.DataSource({
    serverPaging   : true,
    serverSorting  : true,
    serverFiltering: true,
    transport      : {
        read        : {
            url : "data.json"
        },
        parameterMap: function (data, type) {
            if (type === "read") {
                savedParamAsJSON = data;
                savedParamAsStringifiedJSON = JSON.stringify(data);
                savedParamAsUriEncoded = encodeURIComponent(jQuery.param(data));
                savedParamAsUriDecoded = jQuery.param(data);

                // Actual update the link
                $("#exportLink").attr("href", "http://www.onabai.com?" + savedParamAsUriDecoded);
            }
        }
    },
    schema         : {
        model: {
            id    : "ID",
            fields: {
                ID: { type: "number"}
            }
        }
    },
    pageSize       : 8

}); 
```

在`parameterMap`我以四种不同的格式保存它：

1.  `savedParamAsJSON`并存储为`savedParamAsStringifiedJSON`JSON 对象或其*字符串化*表示（例如：） `{"take":8,"skip":0,"page":1,"pageSize":8}`。
2.  In`savedParamAsUriEncoded`存储为字符串，但作为 URI 编码（例如`take%3D8%26skip%3D0%26page%3D1%26pageSize%3D8`：）
3.  In`savedParamAsUriDecoded`存储为字符串，但不是 URI 编码的（例如：）`take=8&skip=0&page=1&pageSize=8`。

**选项2：**您也可以在`transport.read.data`定义保存数据的函数时这样做：

```
transport      : {
    read        : {
        url : "data.json",
        data: function (data) {
            savedParamAsJSON = data;
            savedParamAsStringifiedJSON = JSON.stringify(data);
            savedParamAsUriEncoded = encodeURIComponent(jQuery.param(data));
            savedParamAsUriDecoded = jQuery.param(data);

            // Actual update the link
            $("#exportLink").attr("href", "http://www.onabai.com?" + savedParamAsUriDecoded);
        }
    }
}, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:26:45.657

您可以使用该方法从涉及导出网格数据的代码库中生成链接。这是[PDF](http://www.kendoui.com/code-library/mvc/grid/export-grid-to-pdf.aspx)的一个。

基本上，使用**dataBound**事件更新链接 URL 的魔术代码如下：

```
//initial URL of the link is generated with this helper

Url.Action("Export", "Home", new { page = 1, pageSize = "~", filter = "~", sort = "~" })

<script type="text/javascript">
    function onDataBound(e) {
        var grid = $('#Grid').data('kendoGrid');

        // ask the parameterMap to create the request object for you
        var requestObject = (new kendo.data.transports["aspnetmvc-server"]({ prefix: "" }))
        .options.parameterMap({
            page: grid.dataSource.page(),
            sort: grid.dataSource.sort(),
            filter: grid.dataSource.filter()
        });

        // Get the export link as jQuery object
        var $exportLink = $('#export');

        // Get its 'href' attribute - the URL where it would navigate to
        var href = $exportLink.attr('href');

        // Update the 'page' parameter with the grid's current page
        href = href.replace(/page=([^&]*)/, 'page=' + requestObject.page || '~');

        // Update the 'sort' parameter with the grid's current sort descriptor
        href = href.replace(/sort=([^&]*)/, 'sort=' + requestObject.sort || '~');

        // Update the 'pageSize' parameter with the grid's current pageSize
        href = href.replace(/pageSize=([^&]*)/, 'pageSize=' + grid.dataSource._pageSize);

        //update filter descriptor with the filters applied

        href = href.replace(/filter=([^&]*)/, 'filter=' + (requestObject.filter || '~'));

        // Update the 'href' attribute
        $exportLink.attr('href', href);
    }
</script> 
```

我希望这就是你要找的。

# android - Abbyy ocr android未指定链接错误

> ID：14259301
> 
> 赞同：0
> 
> 时间：2013-01-10T13:41:57.567
> 
> 标签：android, ocr, abbyy

遵循 android 包装器的 abbyy 设置。显然错过了设置中的某些内容，因为在创建引擎实例时出现以下错误。

在android中执行以下代码时出现以下错误：

```
 final AssetDataSource ad = new AssetDataSource(ctx.getAssets());

   final List<DataSource> dataSources =  new ArrayList<DataSource>();
   dataSources.add(ad);
   DataFilesExtensions dfe = new DataFilesExtensions(".mp3",".mp3",".mp3");
   String LicenseFile = "";
          try {

                 Engine.createInstance(dataSources, new FileLicense(ad,LicenseFile,appID),dfe); 
```

产生以下错误（logcat）：

```
01-09 20:54:49.405: W/dalvikvm(3514): No implementation found for native Lcom/abbyy/mobile/ocr4/DataArray;.create (I)Z
01-09 20:54:49.522: E/DataArray(3514): java.lang.UnsatisfiedLinkError: create
01-09 20:54:49.522: W/dalvikvm(3514): No implementation found for native Lcom/abbyy/mobile/ocr4/DataArray;.pushChunk ([BI)V 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T13:00:18.137

问题可能与意外将资产添加为链接而不是使用副本有关。Eclipse 不会将它们显示为链接。当你的目录结构改变时，所有这些链接都被破坏了。复制您需要的资产文件并将它们重命名为 mp3 后，一切都应该可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T13:33:52.870

包装器设置中不太清楚的是资源文件在移动和重命名之前的名称。有 europen.rom、english.edc，然后有一个名为 BcrData 的文件夹，其中包含一个文件 english.akw。哪些文件应该复制到哪里？

SL

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T17:08:25.700

`Engine.loadNativeLibrary();`打电话前一定要打电话`Engine.createInstance();`。

# php - wchar_t 到 PHP UTF8 文件

> ID：14259308
> 
> 赞同：0
> 
> 时间：2013-01-10T13:42:16.423
> 
> 标签：php, c++, utf-8, wchar-t

我写了一个 php 脚本，它从 windows-client-software 接收 http POST 包。

Windows 客户端使用 C++ 的“ [WinHttpClient](http://www.codeproject.com/Articles/66625/A-Fully-Featured-Windows-HTTP-Wrapper-in-C) ”。

WinHttpClient 将我发送的消息作为 wchar_t 发送。

现在的问题是，我收到了我的 PHP 文件中的消息，但是像“®”符号这样的一些符号显示为“®”。

据我所知，我无法将客户的字符集更改为 utf-8 或类似的东西。但也许这里的一些人知道如何将宽字符“转换”为 PHP 可以正常工作的 utf8。因为我必须将数据保存到仅使用 utf-8 运行的数据库中。

我尝试了以下方法，但它没有改变它:(

```
function ewchar_to_utf8($matches) {
    $ewchar = $matches[1];
    $binwchar = hexdec($ewchar);
    $wchar = chr(($binwchar >> 8) & 0xFF) . chr(($binwchar) & 0xFF);
    return iconv("unicodebig", "utf-8", $wchar);
}

function special_unicode_to_utf8($str) {
return preg_replace_callback("/\\\u([[:xdigit:]]{4})/i", "ewchar_to_utf8", $str);
} 
```

也许你有一些想法:) 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T16:37:13.827

Windows wchar_t 是 UTF-16LE，所以试试`$u8str = iconv('UTF-16LE', 'UTF-8', $input);`

但是从我在 WinHttpClient 网站上看到的内容来看，它有一个`_b_str`类，因此您可以转换为字节 - 它没有说明这是否是通过 UTF-8，但如果所有其他方法都失败了，您可以使用[WideCharToMultiByte()](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374130.aspx)和`CP_UTF8`代码页来获得适合 POST 的字节缓冲区。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:48:39.580

这是一个很好的 PHP 函数，用于将您在 wchar_t 中获得的整个字符串转换为 UTF-8： http: [//php.net/manual/en/function.mb-convert-encoding.php](http://php.net/manual/en/function.mb-convert-encoding.php) - 使用 PHP 信息确保您拥有的 PHP 版本支持多字节字符串。

如果您不确定使用 mb_detect_encoding() 的编码或使用 mb_check_encoding() 验证字符串是否采用特定编码，MultiByte 库可以为您提供帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T11:53:58.733

> 现在的问题是，我收到了我的 PHP 文件中的消息，但是像“®”符号这样的一些符号显示为“®”。

这意味着您已经有 UTF-8... 在 ISO-8859-1/Windows-1252 中被误解了。

如果是这样

```
<?php

echo $rsymbol; //Comes out as Â® 
```

然后您需要更改的所有内容：

```
<?php
header("Content-Type: text/html; charset=UTF-8");
echo $rsymbol; //Comes out as ® 
```

# bash - 设置或更改光标的垂直位置

> ID：14259311
> 
> 赞同：18
> 
> 时间：2013-01-10T13:42:25.223
> 
> 标签：bash

*据我所知，可以使用echo*中的退格序列将光标向左移动。但是有没有可能改变光标的垂直位置，使用*echo*？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-10T13:46:04.327

本节介绍 ANSI 转义序列：

*   [http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html](http://www.tldp.org/HOWTO/Bash-Prompt-HOWTO/x361.html)

例子：

```
echo -en "\033[s\033[7B\033[1;34m 7 lines down violet \033[u\033[0m"
echo -en "\033[s\033[7A\033[1;32m 7 lines up green \033[u\033[0m" 
```

本节介绍 tput 实用程序：

*   [http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x405.html](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/x405.html)

有关演示，请参阅终端中*的浮动时钟：*

*   [http://tldp.org/HOWTO/Bash-Prompt-HOWTO/clockt.html](http://tldp.org/HOWTO/Bash-Prompt-HOWTO/clockt.html)

取自[http://www.cyberciti.biz/tips/spice-up-your-unix-linux-shell-scripts.html](http://www.cyberciti.biz/tips/spice-up-your-unix-linux-shell-scripts.html)的示例脚本：

```
#!/bin/bash

tput clear      # clear the screen

tput cup 3 15   # Move cursor to screen location X,Y (top left is 0,0)

tput setaf 3    # Set a foreground colour using ANSI escape
echo "XYX Corp LTD."
tput sgr0

tput cup 5 17
tput rev        # Set reverse video mode
echo "M A I N - M E N U"
tput sgr0

tput cup 7 15; echo "1\. User Management"
tput cup 8 15; echo "2\. Service Management"
tput cup 9 15; echo "3\. Process Management"
tput cup 10 15; echo "4\. Backup"

tput bold       # Set bold mode 
tput cup 12 15
read -p "Enter your choice [1-4] " choice

tput clear
tput sgr0
tput rc 
```

![输入示例](../Images/d7dd56beb958318bd40c2cb2a0918cb5.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-10T13:46:15.170

使用`echo`将限制您使用特定的终端类型。最好使用`tput`.

```
tput cup 10 4; echo there 
```

将光标放在第 10 行第 4 列并在该位置打印“there”。

对于更基本的移动，您必须`tput cub1`向左移动、`tput cuf1`向右`tput cuu1`移动、向上移动和`tput cud1`向下移动光标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T13:59:02.920

是的，正如 miku 所指出的，ANSI 终端转义，或者更清洁的是 tput，它应该可以在任何终端上工作：

```
tput cuu 1             # move cursor up 1 position
nudgeup=`tput cuu 2`   # save it for later
nudgeleft=`tput cub 2`   
echo -n $nudgeup $nudgeleft 
```

请参阅 BASH 提示操作方法中 ANSI 部分之后的几个部分。

tput 还返回一个退出代码，告诉您是否不支持某些内容。

# powershell - 使用 PowerShell 重命名文件时，如何处理带有“[”的文件名？

> ID：14259317
> 
> 赞同：3
> 
> 时间：2013-01-10T13:42:46.610
> 
> 标签：powershell, file-rename

我正在运行这个 PowerShell 命令：

```
Get-ChildItem .\tx\*.htm | Rename-Item -NewName {$_.Name -replace '\.htm','.tmp'} 
```

`[`并在文件名包含方括号 --和/或--时收到以下错误，`]`这是可以理解的，因为它们在 PowerShell 语法中具有含义。

```
重命名项目：无法重命名，因为项目位于
'Microsoft.PowerShell.Core\FileSystem::C:\users\xxxxx\desktop\tx\
Foofoofoofoo_foo_foo_[BAR]_Foofoofoofoo_foofoofoo.htm' 不存在。
在 C:\users\xxxxx\desktop\foo002.ps1:59 char:39
+ 获取子项 .\tx\*.htm | 重命名项目 <<<< -NewName { $_.Name -replace '\.htm','.tmp' }
    + CategoryInfo : InvalidOperation: (:) [Rename-Item], PSInvalidOperationException
    + FullyQualifiedErrorId : InvalidOperation,Microsoft.PowerShell.Commands.RenameItemCommand
```

路径中的所有其他文件都具有相似的名称 ( `Phrase_With_Underscores.htm`)，并且毫无意外地被重命名。任何人都有这方面的经验并且知道如何应对它，以便我可以操纵这些文件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T14:06:36.757

您可以使用参数来解决使用`move-item`重命名项目的问题`-LiteralPath`。

是一个已知的错误：[连接](https://connect.microsoft.com/PowerShell/feedback/details/277707/rename-item-fails-when-renaming-a-file-and-the-filename-contains-brackets) *（阅读 Keith Hill 评论：powershell V3 修复此问题）*

# android - 是否可以从 Android 上的网页启动导航应用程序？

> ID：14259320
> 
> 赞同：4
> 
> 时间：2013-01-10T13:43:02.370
> 
> 标签：android, web-applications, navigation

我正在开发网络应用程序的移动版本。它主要只是显示一些商店的信息，但如果它可以将坐标发送到导航程序而不是仅仅显示它，那就太好了。

如果我只是放一个这样的链接：

```
<a href="geo:37.422219,-122.08364?z=14">go there</a> 
```

它可以工作，并将谷歌地图启动到给定的坐标。我想对导航程序做同样的事情：用户点击链接，导航启动并将用户引导到给定的坐标。这可能吗？我试图将 geo: 更改为 nav:、navi:、navigation: 没有运气。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T13:44:26.353

尝试这个：

```
<a href="http://maps.google.com/maps?saddr=20.344,34.34&daddr=20.5666,45.345">Go There</a> 
```

参数可以在哪里
saddr ：源地址
daddr ：目标地址

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-21T10:17:58.823

您可以使用 window.open();

对于**导航**- window.open("google.navigation:q=23.3728831,85.3372199" , '_system');

对于**搜索**- window.open("geo:0,0?q=pizza" , '_system');

*在这里阅读*- [https://developers.google.com/maps/documentation/android/intents](https://developers.google.com/maps/documentation/android/intents)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:46:54.613

而不是`geo`在坐标前面，尝试使用`google.navigation`，应该可以。

编辑：似乎无论如何都不是那么容易。WebView 似乎只支持 3 种不同的“方案”：GEO、TEL 和 MAILTO。

我认为您需要查看以下示例：[http](http://android-er.blogspot.dk/2011/10/run-android-java-code-from-webpage.html) ://android-er.blogspot.dk/2011/10/run-android-java-code-from-webpage.html其中 JavaScript 用于调用一些 Java 代码。

在从 WebView 调用的 JavaScript 函数中，您需要输入以下代码才能打开 Google Navigation：

```
Uri uri = Uri.parse("google.navigation:q=37.422219,-122.08364");
Intent intent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(intent); 
```

请记住，您不能使用 z=14，因为 Google Navigation 显然不支持此功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-15T20:42:37.533

用这个：

```
<a href="geo:49.510843,5.938203299999941?q=49.510843,5.938203299999941">YOUR ADDRESS</a> 
```

这适用于我的 Android 设备网站。我认为苹果设备将无法工作。

# apache - Apache + Node.js + mod_proxy。如何将一个域路由到：3000，将另一个域路由到：80

> ID：14259321
> 
> 赞同：33
> 
> 时间：2013-01-10T13:43:04.940
> 
> 标签：apache, node.js, mod-proxy

问题：我需要在不同域的同一台服务器上托管一个节点应用程序和一个 php 应用程序。

example.com 应该正常使用端口 80，但 node-example.com 应该路由到端口 3000。

使用 mod_proxy 将所有流量从端口 80 路由到 3000 工作正常，因此：

```
<VirtualHost *:80>
    ServerAdmin info@node-example.com
    ServerName  node-example.com
    ServerAlias www.node-example.com

    ProxyRequests off

    <Proxy *>
            Order deny,allow
            Allow from all
    </Proxy>

    <Location />
            ProxyPass http://localhost:3000/
            ProxyPassReverse http://localhost:3000/
    </Location>

</VirtualHost> 
```

然而，这使得 example.com 和 node-example.com 都指向 localhost:3000 并运行 Node-app。

有没有办法让 example.com 指向端口 80？

example.com/old-admin 也可以指向端口 80。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2013-01-10T14:21:16.407

只做两个`<VirtualHost *:80>`标签

```
<VirtualHost *:80>
    ServerAdmin info@node-example.com
    ServerName www.node-example.com

    ProxyRequests off

    <Proxy *>
            Order deny,allow
            Allow from all
    </Proxy>

    <Location />
            ProxyPass http://localhost:3000/
            ProxyPassReverse http://localhost:3000/
    </Location>

</VirtualHost>
<VirtualHost *:80>
    ServerAdmin info@node-example.com
    ServerName  node-example.com    

    ProxyRequests off

    <Proxy *>
            Order deny,allow
            Allow from all
    </Proxy>

    <Location />
            ProxyPass http://localhost:80/
            ProxyPassReverse http://localhost:80/
    </Location>

</VirtualHost> 
```

它应该这样工作；）

或者，如果您的`localhost:80`应用不是节点，您可以删除该目标的`<Proxy *>`&`<Location />`标签并将其替换为`DocumentRoot /var/www/node-example.com`- 您的 index.html 的静态路径

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-09-05T12:41:25.097

我建议您为两个域创建两个不同的虚拟主机配置文件。除了在缩放不同时将它们移动到不同的服务器之外，这将使您能够独立配置它们。

对于具有默认安装位置的 apache2，

> 在 /etc/apache2/sites-available/www.example1.com.conf 中创建一个文件

```
<VirtualHost *:80>
        ServerName  www.example1.com
        ServerAdmin webmaster@example1.com

        <Directory /home/example1/api/admin/docs>
                Options -Indexes +FollowSymLinks
                AllowOverride All
                Require all granted
                DirectoryIndex index.html
        </Directory>

        <Directory /home/example1/api/mobile/docs>
                Options -Indexes +FollowSymLinks
                AllowOverride All
                Require all granted
                DirectoryIndex index.html
        </Directory>

        ProxyRequests Off
        ProxyPreserveHost On

        ProxyPass /api/         "http://localhost:30007/"
        ProxyPassReverse /      "http://localhost:30007/"

        ErrorLog ${APACHE_LOG_DIR}/example1/example1.log
        CustomLog ${APACHE_LOG_DIR}/example1/example1.log combined

</VirtualHost> 
```

`www.example2.com.conf`在其中创建另一个文件`sites-available`并复制上述配置，将 example1 替换为 example2。

对于子域，`www`用您的子域替换文件名和内部配置，例如：`api`.

创建 conf 文件后，您必须使用命令启用它们

`a2ensite www.example1.com.conf`

然后用命令重新加载 apache2

`sudo systemctl reload apache2`

确保在重新加载 apache 之前创建了目录`example1`并在 APACHE_LOG_DIR 中创建。`example2`

而已。在您的域名注册商或 CDN 中使用服务器 IP 地址配置您的域的 A 记录，无论您使用什么，都应该一切顺利。

# android - 当我启用 Wifi Direct 时，为什么 wifi 会被禁用？

> ID：14259325
> 
> 赞同：-3
> 
> 时间：2013-01-10T13:43:11.650
> 
> 标签：android, sony, wifi-direct

我的设备是索尼爱立信 Arc S。

安卓：4.0.4

我将手机植根并在**/system/etc/permissions/中添加“** **android.hardware.wifi.direct.xml** ” 。

 **我可以在我的设置中看到 wifi direct 选项。

当我启用 wifi direct 时，它显示 wifi direct 已打开，但我的 wifi 已禁用。

然后我启用wifi，我的wifi直接更改为禁用。

有谁知道我的手机怎么才能支持wifi直连？

还是不可能？为什么？

谢谢~

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:47:55.983

有了 Wifi Direct，其中一个设备就像一个 wifi 接入点，所以如果您使用 wifi direct，您的手机就会连接到这个 wifi 网络，所以您无法连接到另一个 wifi 信号，这就是您无法启用 wifi 和同时wifi直连。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T18:18:00.903

ICS 中的 WiFi 直接堆栈可让您关闭 WiFi 以使用 WiFi 直接。它们不能同时运行。在 Android 4.1 中，他们更改了它，它在 WiFi 开启时“始终”运行，但是我发现它通常不会响应发现请求，除非您在其他设备执行某个时间范围内打开 WiFi 直接菜单搜索。

不幸的是，我没有你的资源，但我记得在某处读过它。它在我的 LG Mach 4.0.4 上以这种方式运行（并解释它）。**

# php - PHP：将整数转换为 int - 出现错误

> ID：14259327
> 
> 赞同：5
> 
> 时间：2013-01-10T13:43:26.617
> 
> 标签：php, casting

我知道 PHP 中的 int 和 integer 之间没有什么不同。我一定是错的。

我将一个整数值传递给一个仅在该值上具有 int 的函数。像这样：-

```
$new->setPersonId((int)$newPersonId); // Have tried casting with (int) and intval and both 
```

我的另一面：-

```
 public function setPersonId(int $value) {
        // foobar
    } 
```

现在，当我跑步时-我收到消息：-

**“PHP 可捕获的致命错误：传递给 setPersonId() 的参数 1 必须是 int 的实例，给定整数”**

我尝试使用 (int) 和 intval() 进行调用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T13:47:45.463

PHP 中的类型提示仅适用于对象而非标量，因此 PHP 期望您传递“int”类型的对象。

您可以使用以下解决方法

```
public function setPersonId($value) {
    if (!is_int($value)) {
        // Handle error
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-10T13:49:39.560

要将值显式转换为整数，请使用 (int) 或 (integer) 强制转换。但是，在大多数情况下不需要强制转换，因为如果运算符、函数或控制结构需要整数参数，则会自动转换值。也可以使用 intval() 函数将值转换为整数。

[http://php.net/manual/en/language.types.integer.php](http://php.net/manual/en/language.types.integer.php)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-01-10T13:50:14.070

确保该`PersonID`属性定义为 int 而不是整数：

```
private int $personId; 
```

代替

```
private integer $personId; 
```

# memory - 限制 64 位 Ubuntu 12.10 上的可用内存

> ID：14259328
> 
> 赞同：2
> 
> 时间：2013-01-10T13:43:32.583
> 
> 标签：memory, ubuntu, ram, ubuntu-12.10

有没有一种有效的方法来限制 Ubuntu 12.10 64 位操作系统的可用内存？我有一个 8GB 的​​ ram 内存，我只想让 1GB 可用。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:48:18.700

根据内核引导参数的[文档，内核引导参数](http://www.kernel.org/doc/Documentation/kernel-parameters.txt)`mem=xxx`可以满足您的需求。

# facebook - Facebook Graph API 为帖子 ID 返回 0

> ID：14259331
> 
> 赞同：0
> 
> 时间：2013-01-10T13:43:38.513
> 
> 标签：facebook, facebook-graph-api, post, facebook-access-token

我正在尝试了解我的桌面应用程序是否受到速率限制...我的应用程序将链接发布到一个组。我在发帖时没有收到错误响应，但我收到的帖子 ID 为 0。这是我所看到的：

```
2013.01.10 13:31.13 UTC [D] URL :  "https://graph.facebook.com/493177717399935/feed" 
2013.01.10 13:31.13 UTC [D] ARGS:  "message=Colosseum Missouri Tigers Rival Sleeveless TeeNow: $6.00 80%Sizes: M&link=http://www.kohls.com/kohlsStore/PRD~1012006/testing.jsp&picture=http://media.kohls.com.edgesuite.net/is/image/kohls/1012006&name=Colosseum Missouri Tigers Rival Sleeveless Tee&access_token=ACCESS_TOKEN" 
2013.01.10 13:31.14 UTC [D] Recv'd:  "{"id":"493177717399935_0"}" 
```

组 ID 正确，但帖子 ID 为 0。帖子未发布到组。发生这种情况时，我的帐户也被阻止通过该网站发布图片。

是什么导致了这种情况，我该如何避免？我在 Facebook Developer Insights 页面上没有看到限制。

# iphone - 获取联系人图片 ios

> ID：14259332
> 
> 赞同：2
> 
> 时间：2013-01-10T13:43:38.897
> 
> 标签：iphone, ios, ios5, ios6

我试图弄清楚如何在下面的代码中添加人的**姓氏**和**名字**，以便从我的手机中获取他们的联系人图像：

```
if(ABPersonHasImageData(aABRecordRef))
{
   UIImage *image = [UIImage imageWithData:(NSData *)ABPersonCopyImageData(aABRecordRef)];
   cell.imageView.image = image;
} else {
   UIImage *image1=[UIImage imageNamed:@"User.jpg"];
   cell.imageView.image=image1;
} 
```

我也可能在这里缺少代码，所以请填写需要的区域。我只是不知道如何在上面的代码中添加名字**，**姓氏，所以我知道什么时候我已经联系到那个联系人来提取它的图像。

任何帮助都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:36:31.953

要获取 FirstName 和 LastName ，您可以使用：

```
NSString *firstName = (NSString *)ABRecordCopyValue(aABRecordRef, kABPersonFirstNameProperty);
NSString *lastName = (NSString *)ABRecordCopyValue(aABRecordRef, kABPersonLastNameProperty); 
```

这里它展示了如何[使用 ABAddressBook 按数字搜索和获取图像](https://stackoverflow.com/questions/5115977/search-by-number-and-get-the-image-using-abaddressbook)。

但是您想按名字和姓氏搜索。因此，根据[文档](https://developer.apple.com/library/mac/#documentation/userexperience/Conceptual/AddressBook/Tasks/Searching.html#//apple_ref/doc/uid/20001024-103495)，您应该对多个参数使用[-recordsMatchingSearchElement:](https://developer.apple.com/library/mac/#documentation/userexperience/Reference/AddressBook/Classes/ABAddressBook_Class/Reference/Reference.html#//apple_ref/occ/instm/ABAddressBook/recordsMatchingSearchElement:)方法。

获得匹配的数据后，您可以使用以下代码提取图像：

```
CFDataRef imageData = ABPersonCopyImageData(aABRecordRef);
UIImage *image = [UIImage imageWithData:(NSData *)imageData];
CFRelease(imageData); 
```

希望你能从中得到一些有用的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:50:03.680

尝试：

```
CFStringRef firstName, lastName; // can cast this to NSString *

firstName = ABRecordCopyValue(aABRecordRef, kABPersonFirstNameProperty);
lastName = ABRecordCopyValue(aABRecordRef, kABPersonLastNameProperty); 
```

# java - Liferay 6.1 中的友好 URL

> ID：14259338
> 
> 赞同：4
> 
> 时间：2013-01-10T13:44:03.923
> 
> 标签：java, url-rewriting, liferay-6, friendly-url

我刚刚将 blogs(default) portlet 的 url 更改为“ **http://localhost:8080/web/standorman/blogs/-/blogs/application-development-in-liferay** ”

但我希望它是“ **http://localhost:8080/web/standorman/blogs/application-development-in-liferay** ”

谁能建议我如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-20T00:43:04.747

首先，如果不真正侵入您不想这样做的 Liferay，就无法摆脱 /-/（这将导致更多的问题而不是好处）。你可以摆脱的只是一个“博客”，以 URL 结尾`/web/standorman/-/blogs/application-development-in-liferay`- 这对我来说似乎足够接近。

以下是yannicuLar 建议的使用[https://github.com/DevJonny/Liferay-6-Friendlier-Friendly-URL-Mapper/的方法。](https://github.com/DevJonny/Liferay-6-Friendlier-Friendly-URL-Mapper/)

他的建议对您不起作用，因为您正在尝试更改嵌入在 Liferay 本身中的开箱即用 Liferay portlet。要改变这样的事情，必须使用 EXT 插件。所以这正是你应该做的。

第 1 步 - 在 Plugins SDK 中创建一个 EXT 插件（通过在插件 SDK“ext”子文件夹中运行 create.bat 或 create.sh）。

第 2 步 - 进入创建的 ext 插件文件夹，在`/docroot/WEB-INF/ext-impl/src`删除文件`portal-ext.properties`中，而不是放置这个文件 - [https://github.com/DevJonny/Liferay-6-Friendlier-Friendly-URL-Mapper/blob/master/docroot/WEB- INF/src/com/mysmallcornerstudios/friendlierurlmapping/portlet/FriendlierFriendlyURLMapper.java](https://github.com/DevJonny/Liferay-6-Friendlier-Friendly-URL-Mapper/blob/master/docroot/WEB-INF/src/com/mysmallcornerstudios/friendlierurlmapping/portlet/FriendlierFriendlyURLMapper.java)将其放入路径中

```
/docroot/WEB-INF/ext-impl/src/com/mysmallcornerstudios/friendlierurlmapping/portlet/FriendlierFriendlyURLMappe r.java 
```

第 3 步 - 打开文件`docroot/WEB-INF/ext-web/docroot/WEB-INF/liferay-portlet-ext.xml` 用如下内容填充它：

```
<?xml version="1.0"?>
<!DOCTYPE liferay-portlet-app PUBLIC "-//Liferay//DTD Portlet Application 6.1.0//EN" "http://www.liferay.com/dtd/liferay-portlet-app_6_1_0.dtd">

<liferay-portlet-app>

    <portlet>
        <portlet-name>33</portlet-name>
        <icon>/html/icons/blogs.png</icon>
        <struts-path>blogs</struts-path>
        <configuration-action-class>com.liferay.portlet.blogs.action.ConfigurationActionImpl</configuration-action-class>
        <indexer-class>com.liferay.portlet.blogs.util.BlogsIndexer</indexer-class>
        <open-search-class>com.liferay.portlet.blogs.util.BlogsOpenSearchImpl</open-search-class>
        <scheduler-entry>
            <scheduler-event-listener-class>com.liferay.portlet.blogs.messaging.CheckEntryMessageListener</scheduler-event-listener-class>
            <trigger>
                <simple>
                    <property-key>blogs.entry.check.interval</property-key>
                    <time-unit>minute</time-unit>
                </simple>
            </trigger>
        </scheduler-entry>
        <scheduler-entry>
            <scheduler-event-listener-class>com.liferay.portlet.blogs.messaging.LinkbackMessageListener</scheduler-event-listener-class>
            <trigger>
                <simple>
                    <property-key>blogs.linkback.job.interval</property-key>
                    <time-unit>minute</time-unit>
                </simple>
            </trigger>
        </scheduler-entry>
        <friendly-url-mapper-class>com.mysmallcornerstudios.friendlierurlmapping.portlet.FriendlierFriendlyURLMapper</friendly-url-mapper-class>
        <friendly-url-mapping>blogs</friendly-url-mapping>
        <friendly-url-routes>com/liferay/portlet/blogs/blogs-friendly-url-routes.xml</friendly-url-routes>
        <preferences-unique-per-layout>false</preferences-unique-per-layout>
        <preferences-owned-by-group>true</preferences-owned-by-group>
        <use-default-template>false</use-default-template>
        <scopeable>true</scopeable>
        <private-request-attributes>false</private-request-attributes>
        <private-session-attributes>false</private-session-attributes>
        <render-weight>50</render-weight>
        <header-portlet-css>/html/portlet/blogs/css/main.css</header-portlet-css>
        <css-class-wrapper>portlet-blogs</css-class-wrapper>
        <add-default-resource>true</add-default-resource>
    </portlet>
</liferay-portlet-app> 
```

此内容对于我的 Liferay 版本是正确的。对于您的版本，您可能需要执行此操作以生成类似的内容：

*   在您的 Liferay 发行版中找到文件 liferay-portlet.xml（对于 Tomcat 捆绑发行版，应该在 webapps/ROOT/WEB-INF 中，但可能在不同的位置以备不时之需 - 只需搜索即可）
*   在该文件中找到其中的`<portlet>...</portlet>`部分`<portlet-name>33</portlet-name>`
*   将里面的整个部分复制到您的 EXT 插件中的`<liferay-portlet-app><!-- copied text goes here --></liferay-portlet-app>`上述文件中。`docroot/WEB-INF/ext-web/docroot/WEB-INF/liferay-portlet-ext.xml`
*   将行替换`<friendly-url-mapper-class>...</friendly-url-mapper-class>`为`<friendly-url-mapper-class>com.mysmallcornerstudios.friendlierurlmapping.portlet.FriendlierFriendlyURLMapper</friendly-url-mapper-class>`
*   删除行

``

```
<portlet-data-handler-class>com.liferay.portlet.blogs.lar.BlogsPortletDataHandlerImpl</portlet-data-handler-class>
<social-activity-interpreter-class>com.liferay.portlet.blogs.social.BlogsActivityInterpreter</social-activity-interpreter-class>
<xml-rpc-method-class>com.liferay.portlet.blogs.util.PingbackMethodImpl</xml-rpc-method-class>
<asset-renderer-factory>com.liferay.portlet.blogs.asset.BlogsEntryAssetRendererFactory</asset-renderer-factory>
<atom-collection-adapter>com.liferay.portlet.blogs.atom.BlogsEntryAtomCollectionAdapter</atom-collection-adapter>
<custom-attributes-display>com.liferay.portlet.blogs.BlogsEntryCustomAttributesDisplay</custom-attributes-display>
<workflow-handler>com.liferay.portlet.blogs.workflow.BlogsEntryWorkflowHandler</workflow-handler> 
```

第 4 步 - 部署您的 ext 插件（在它的文件夹中运行 ant 来构建它，转到 Plugins SDK 中的子文件夹“dist”，为您的插件找到 .war 文件 - 通过将 .war 文件复制到“deploy”来将该 .war 文件部署到 Liferay Liferay 发行版中的文件夹）并重新启动 Liferay。

那应该这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T03:32:52.270

在您的资源中创建一个 url-mapping.xml 文件。在文件中添加以下条目：

/{value} ----- 尝试不使用“/view/”你的资源名称 2 cacheLevelPage

此外，您需要在 liferay-portlet.xml 中添加以下代码。.....在图标 com.liferay.portal.kernel.portlet.DefaultFriendlyURLMapper 您的资源名称之后，它将映射您的 url /urlMapping/您的 url-mapping.xml 名称 ....

就我而言，我创建了一个资源，基本上是一个超链接，在该超链接上创建了一个带有友好 url 的新页面。

我希望这会有所帮助。祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T09:46:03.247

~~也许添加一个自定义 FriendlyURL Mapper 类来禁用“-”前缀。你试过[这个](http://nomakode.com/how-to-remove-friendly-url-mapper-prefix-minus-sign-in-liferay/)吗？~~

我真的很抱歉我可以帮助举一个有效的例子。我给了它一个很好的尝试，因为我也对该功能感兴趣，但我担心这至少对于 liferay 6.1.0 是不可能的。看起来“/-/”对于友好的网址是必需的。我发现并提出的[解决方案](https://github.com/DevJonny/Liferay-6-Friendlier-Friendly-URL-Mapper/)实际上是一个 hack，我相信鉴于一些限制它可能会起作用，但即使你设法实现它，你也不能确定它是否适用于所有 liferay 版本。

根据要求，我在这里发布了详细的步骤，尽管我不得不说这对我不起作用（自定义映射器在创建friendlyUrl 时抛出错误）

1.  您应该已经使用 DefaultFriendlyURLMapper 完成了至少一个路由的友好映射。如果你在你的 url 中看到 '/-/' 字符，你就知道它有效。记住这个 url，稍后您将需要它来测试，因为您确信 Friendly -url 会在此路由中起作用
2.  创建一个扩展 DefaultFriendlyURLMapper 的自定义 MApper 类

    ```
     public class DemoCustomFriendlyUrlMapper extends DefaultFriendlyURLMapper {

    @Override
    public boolean isCheckMappingWithPrefix() {

        return false;
    } 
    ```

确保获得您的类限定名称（在 Eclipse 中，将鼠标悬停在类名称上时按 F2）

1.  转到 liferay-portlet.xml 并替换

    ```
    <friendly-url-mapper-class>com.liferay.portal.kernel.portlet.DefaultFriendlyURLMapper</friendly-url-mapper-class> 
    ```

和

```
<friendly-url-mapper-class>com.liferay.samples.DemoCustomFriendlyUrlMapper</friendly-url-mapper-class> 
```

转到并导航到友好路由的 url，看看会发生什么。

# c++ - 重载非成员运算符==未定义？

> ID：14259342
> 
> 赞同：0
> 
> 时间：2013-01-10T13:44:31.617
> 
> 标签：c++, operator-overloading

g++ 4.5.3 (cygwin)

我在定义重载的非成员运算符== 时遇到了麻烦。编译器输出错误信息

> main.cpp:11：未定义引用`slip::operator==(bool, slip::SlipDatum const&)

而且我无法弄清楚我做错了什么。在我看来，所有的定义都是可见的，所有的函数原型和代码都是正确的。当重载用作成员函数时，如“(SlipDatum&)Y == (bool)X”，没有问题。作为一个非成员函数，我不断得到一个未定义的引用。

另一个问题是，当从 Slip.cpp 中删除 '#include SlipOp.h"' 时，SlipDatum 在 Slip.cpp 中未定义。我查看了 SlipDatum.h 并且不需要 SlipOp.h。我查看了 SlipDatum .cpp 和 SlipOp.h 是需要和包含的，SlipOp.h 在 Slip.cpp 中是不需要也不需要引用的，那为什么编译器会认为需要它呢？

使用的示例代码如下：

主文件

```
# include <cstdlib>
# include "Slip.h"
# include <iostream>
using namespace std;
using namespace slip;

int main(int argc, char** argv) {
   SlipDatum Y;
   bool X = true;
   if (X == Y) cout << "here" << endl;
   return 0;
} 
```

滑倒.h

```
#ifndef SLIP_H
#define SLIP_H
# include "SlipDatum.h"

namespace slip {
   bool      operator==(const bool   X, const SlipDatum& Y);  // Y == X
}; // namespace slip
#endif  /* SLIP_H */ 
```

滑动.cpp

```
# include "Slip.h"
# include "SlipCellBase.h"
# include "SlipOP.h"
# include "SlipDatum.h"

inline  bool operator==(const bool X, const SlipDatum& Y) 
     { return const_cast<SlipDatum&>(Y) == X; }; 
```

滑动定义

```
#ifndef SLIPDEF_H
#define SLIPDEF_H

# include <string>

using namespace std;

namespace slip {

#ifdef UCHAR
   # undef UCHAR
#endif
#ifdef ULONG
   # undef ULONG
#endif
#ifdef DOUBLE
   # undef DOUBLE
#endif
#ifdef PTR
   # undef PTR
#endif

   typedef unsigned char   UCHAR;               //  8-bits
   typedef unsigned long   ULONG;               // 32-bits
   typedef double          DOUBLE;              // 64-bits
   typedef void *          PTR;                 // pointer
   typedef string *        STRING;              // C String

   union Data {                                 // Slip data contents
       bool      Bool;                          // compiler defined
       char      Chr;                           //  8-bits
       UCHAR     UChr;                          //  8-bits
       long      Long;                          // 32-bits
       ULONG     ULong;                         // 32-bits
       double    Double;                        // 64-bits
       PTR       Ptr;                           // 
       STRING    String;                        // pointer to a string
   }; // union Data
} // namespace slip
#endif  /* SLIPDEF_H */ 
```

SlipCellBase.h

```
#ifndef _SLIPCELLBASE_H
#define _SLIPCELLBASE_H

# include "SlipDef.h"

using namespace std;

namespace slip {
  class SlipCellBase {
     friend class SlipOp;
  private:
      void*         operation;   //! Operations cell can perform
      SlipCellBase* leftLink;    //! Pointer to preceding cell
      SlipCellBase* rightLink;   //! Pointer to following cell
      Data          datum;       //! SLIP cell data field
 protected:
      void** getOperator() const 
           { return &const_cast<SlipCellBase*>(this)->operation; }
      static void** getOperator(SlipCellBase* X) 
           { return   &(X->operation);   }
  }; // class SlipCellBase
}; // namespace slip
#endif  /* SLILPCELLBASE_H */ 
```

滑动基准.h

```
#ifndef SLIP_DATUM_H
#define SLIP_DATUM_H
# include "SlipCellBase.h"
namespace slip {
  class SlipDatum : public SlipCellBase {
  public:
     bool       operator==(const bool X);  // Y == X
  }; // SlipDatum
}; // namespace slip
#endif 
```

滑动基准面.cpp

```
# include "SlipDatum.h"
# include "SlipOP.h"
# include "SlipCellBase.h"

bool SlipDatum::operator==(const bool X)
    { return ((SlipOp*)*getOperator())->equal(*this, X); } 
```

滑点

```
#ifndef _SLIPOP_H
#define _SLIPOP_H
# include "SlipDatum.h"

using namespace slip;

namespace slip {
  class SlipOp {
  public:
     virtual bool equal(SlipDatum& Y, const bool X)  = 0;
  }; // class SlipOp
}; // namespace slip
#endif  /* _SLIPOP_H */ 
```

滑动布尔.h

```
#ifndef _SLIPboolOP_H
#define _SLIPboolOP_H
# include "SlipOp.h"

namespace slip {
  class SlipBoolOp : public SlipOp {
  public:
     virtual bool equal(SlipDatum& Y, const bool   X);
  }; // class SlipBoolOp
}; // namespace slip
#endif  /* SLIPboolOP_H */ 
```

滑动布尔.cpp

```
# include "SlipBoolOp.h"
# include "SlipDatum.h"

using namespace slip;

namespace slip {
  bool SlipBoolOp::equal (SlipDatum& Y, const bool X) {
    return false;
  }; // bool SlipBoolOp::equal (SlipDatum& Y, const SlipDatum& X) 

}; // namespace slip 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:48:55.157

在 slip.cpp 中，您在全局范围内定义 operator==，即您错过了命名空间：

```
namespace slip {
  bool operator==(bool X, const SlipDatum& Y) 
  { return const_cast<SlipDatum&>(Y) == X; };
} 
```

PS： const_cast 应该不是必需的，因为`operator==(SlipDatum&, bool)`也应该通过 const 引用获取 SlipDatum。即在slipdatum.h/cpp中：

```
namespace slip {
  class SlipDatum : public SlipCellBase {
  public:
     bool       operator==(bool X) const; // <--! *this is left constant                                          
  }; 
}; 
```

# mysql - MySQL Group by 查询多个主键表

> ID：14259343
> 
> 赞同：3
> 
> 时间：2013-01-10T13:44:38.333
> 
> 标签：mysql, group-by

我在具有两列主键的特定表中遇到 GROUP BY 查询问题。

我的表如下所示：

```
 CREATE TABLE IF NOT EXISTS `stocks` (
      `id_city` int(10) NOT NULL,
      `id_prod` int(10) NOT NULL,
      `sell_price` int(10) DEFAULT '0',
      PRIMARY KEY (`id_city`,`id_prod`)
    ) 
```

假设它插入了这样的值：

```
INSERT INTO `stocks` (`id_city`, `id_prod`, `sell_price`) 
VALUES ('1', '1', '100'), ('2', '1', '90'), ('3', '1', '10'); 
```

经过这样的查询：

```
SELECT id_prod, id_city, MIN(sell_price)
            FROM stocks 
            GROUP BY id_prod 
```

结果行丢失了 'id_city' 键 - 它需要 city_id 的第一次出现，

```
id_prod     id_city     MIN(sell_price)
1           1           10 
```

如何为这种情况建立适当的查询？结果应如下所示：

```
id_prod     id_city     MIN(sell_price)
1           3           10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:50:59.100

如果要返回包含 的记录，`min(sell_price)`可以使用子查询：

```
SELECT s1.id_prod, 
  s1.id_city, 
  s1.sell_price
FROM stocks s1
inner join
(
  select id_prod,  MIN(sell_price) sell_price
  from stocks
  group by id_prod
) s2
  on s1.id_prod = s2.id_prod
  and s1.sell_price = s2.sell_price 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/131c2/3)

这将返回：

```
| ID_PROD | ID_CITY | SELL_PRICE |
----------------------------------
|       1 |       3 |         10 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:53:04.987

你的意思是这样使用`max(id_city)`

```
 SELECT id_prod, max(id_city) city , MIN(sell_price)
        FROM stocks 
        GROUP BY id_prod 
```

[**sql演示**](http://sqlfiddle.com/#!2/d9aa0/8)

或喜欢使用`count(id_city)`

```
 SELECT id_prod, count(id_city) city, MIN(sell_price)
        FROM stocks 
        GROUP BY id_prod 
```

[**sql演示**](http://sqlfiddle.com/#!2/d9aa0/7)

两者都返回

```
 ID_PROD   CITY    MIN(SELL_PRICE)
      1        3                10 
```

**编辑**

试试这个`INNER JOIN`

```
 SELECT s.id_prod, 
          s.id_city, 
          s.sell_price
   FROM stocks s
   inner join
             (
              select id_prod,  MIN(sell_price) sell_price
              from stocks
               group by id_prod
              ) s1
     on s.id_prod = s1.id_prod
     and s.sell_price = s1.sell_price 
```

[**演示 SQLFIDDLE**](http://sqlfiddle.com/#!2/86bd0/2)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:46:59.723

您还必须添加`id_city`到该`GROUP BY`子句

[http://www.w3schools.com/sql/sql_groupby.asp](http://www.w3schools.com/sql/sql_groupby.asp)

# android - Monodroid：在 xml 中使用扩展视图类

> ID：14259348
> 
> 赞同：1
> 
> 时间：2013-01-10T13:44:55.620
> 
> 标签：android, xml, xamarin.android

我有一个扩展 Horizo​​ntalScrollView 的类。但我不知道如何在 xml 中使用它。如果我使用我的类名作为 xml 标记，我得到一个错误：Error inflating class MyClass

我的代码：

```
public class ToothScroller : HorizontalScrollView
{

    private GestureDetector mGestureDetector;

    public ToothScroller(Context context) : base(context)
    {
    }

    public ToothScroller(Context context, IAttributeSet attrs) : base(context, attrs)
    {

        SetFadingEdgeLength(0);
    }

    public ToothScroller(Context context, IAttributeSet attrs, int defStyle) : base(context, attrs, defStyle)
    {
    }

    public ToothScroller(IntPtr javaReference, JniHandleOwnership transfer) : base(javaReference, transfer)
    {
    }

    public override bool OnInterceptTouchEvent (Android.Views.MotionEvent ev)
    {
        Console.WriteLine(this.ScrollX);

        return base.OnInterceptTouchEvent (ev);
    }

} 
```

还有我的 xml (axml) 代码：

```
 <MyClass
        android:id="@+id/scrollMyClass"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/imageSomething"
        android:fillViewport="true"
        android:background="@drawable/pusherbg">
        <RelativeLayout
            android:id="@+id/layoutSomething"
            android:orientation="vertical"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" />
    </MyClass> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:47:26.073

替换这个

```
 <MyClass
    android:id="@+id/scrollMyClass"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/imageSomething"
    android:fillViewport="true"
    android:background="@drawable/pusherbg"> 
```

和

```
 <YourPackage.YourClass
    android:id="@+id/scrollMyClass"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/imageSomething"
    android:fillViewport="true"
    android:background="@drawable/pusherbg"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:47:59.147

将您的布​​局 xml 更改为：

```
<com.username.package.MyClass
    android:id="@+id/scrollMyClass"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/imageSomething"
    android:fillViewport="true"
    android:background="@drawable/pusherbg">
    <RelativeLayout
        android:id="@+id/layoutSomething"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</com.username.package.MyClass> 
```

这是一个很好的资源，其中包含更多直接来自 Google 的详细信息，可能会有更多关于如何创建自定义视图的信息：http: [//developer.android.com/guide/topics/ui/custom-components.html](http://developer.android.com/guide/topics/ui/custom-components.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:08:50.890

感谢您的帮助，它现在可以使用以下代码。Packagename 有点令人困惑，因为在我使用的 Monodroid 中，它是我必须使用的命名空间，而不是包名。

```
<MyNamespace.MyClass
    android:id="@+id/scrollMyClass"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@+id/imageSomething"
    android:fillViewport="true"
    android:background="@drawable/pusherbg">
    <RelativeLayout
        android:id="@+id/layoutSomething"
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />
</MyNamespace.MyClass> 
```

# html - 在某些计算机上，元素隐藏在相同版本的 Chrome 中 - Adblock

> ID：14259349
> 
> 赞同：2
> 
> 时间：2013-01-10T13:44:57.137
> 
> 标签：html, ads, adblock

**概括**

在我们的新工具发布时，带有一些广告预览的 div 不会显示在每个浏览器中。即使我和我的同事的浏览器版本完全相同。经过一些（长时间）调试后，我们设法找到了导致 Chrome 插件的原因。

在下方，您可以阅读整个故事。我将其标记为[问答风格](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)，因此甚至不必费心考虑可能的答案，因为我已经为您准备好了:)。我在这里发布这个是因为我还没有博客，我想分享它！我希望我们可以帮助您或您遇到相同（相似）问题的同事程序员。

**问题**

今天，我们在内部 CRM 应用程序上发布了一个新工具，该工具根据员工和客户提供的数据创建广告。此工具能够在全部导出之前显示其中一些 (5) 广告。此预览是通过 Ajax 调用完成的，该调用将使用提供的数据创建广告。我在 localhost 上开发了这个工具，将它上传到测试服务器，一切都很好。在具有多个不同用户的多台计算机/浏览器上，一切正常。是时候发布这些东西了。

我们将文件上传到服务器，添加了不同的数据库表，并使我们自己成为唯一被[允许访问](http://en.wikipedia.org/wiki/Access_control_list)该页面以进行一些最终检查的用户。我在我的电脑上做了一些检查（Win 7 with Chrome），一切都像在本地主机和测试服务器上一样正常工作。我的一位开发主管同事也在尝试使用该工具。它工作得很好，但是...

由于某种原因，当他登录自己的计算机（带有 Chrome 的 Win 7）时，“预览广告”没有显示。起初我们认为它必须与 JavaScript 做一些事情。他必须刷新甚至清除缓存才能使其正常工作，但这并没有解决问题。控制台也没有抛出任何错误，所以......

也许这与他的帐户有关？因为他是头部发育，我们当然想阻止他，只是因为我们可以:)。我们考虑了 ACL 管理，因为我们有一些特殊的规则，所以我们可以访问，但员工不能。也许我们忘记了一些东西，但是它不得不在身份验证日志中抛出一个错误。但是当他通过 Firefox 或我的电脑登录时，一切正常。所以这与它无关。

然后我们有了一个聪明的想法，即查看元素检查器，看看广告是否正确加载到 DOM。它似乎在那里，所以这很奇怪。我们试图关闭一些在重新加载时临时隐藏广告包装器的类，但这并没有解决问题。所以我们开始摆弄这些元素。拖动它们，切换类和样式，但似乎没有任何效果。但是后来......他想出了将`<table>`包含广告的内容拖到包裹桌子的div之外的想法。我们有这个结构是因为这个包装器还包含加载指示器，以便在它们之间更轻松地切换。就在那里，桌子出现了。所以，我们现在知道它必须与包装器有关。但是什么？

**解决方案**

在我的浏览器中进行了一些尝试和调试并再次尝试之后，我开始大声说出来，比如：“相同的 Chrome 版本”、“相同的 CSS”、“f5'd”、“插件”……等等什么？我的同事跑到他的电脑前说，可能和这个有关；并关闭[Adblock plus](https://chrome.google.com/webstore/detail/adblock-plus/cfhdojbkjhnklbpkdaibdccddilifddb)。刷新页面后，出现了 div（广告包装）。

所以，现在我们知道是什么导致了问题，但我们想知道原因，我们想让每个员工都可以使用该工具。如果员工正在使用此插件怎么办？我们不能强迫他关闭 Adblock。

```
<div id="ads-wrapper">
    <table> ... </table>
</div> 
```

你在这里看到什么？一个`<div>`ID 为“ads-wrapper”的广告。似乎 Adblocker 正在隐藏具有此 ID 的元素。因此，让我们尝试在元素检查器中更改该属性。将其值更改为“预览”、“包装”甚至“广告”都可以。但是，当我们有“广告”和“包装”的组合时，它会失败。将“包装器”更改为“容器”也会导致隐藏元素。

第一个想法：正则表达式。它可能是一些正则表达式，它过滤具有与其模式匹配的 id 的元素并简单地隐藏它。

我搜索了一种方法来查看这些 Chrome 插件的来源。另一位同事正在构建他自己的插件，我在 HTML 和 CSS 方面帮助了他一些，所以我知道它是用 JavaScript 制作的。源头一定在某处。我发现[这篇文章](http://saravananthirumuruganathan.wordpress.com/2010/05/01/how-to-read-the-source-code-of-chrome-and-firefox-extensions/)描述了在哪里可以找到已安装插件的来源。我打开[插件](https://chrome.google.com/webstore/detail/adblock-plus/cfhdojbkjhnklbpkdaibdccddilifddb)的文件夹，发现一大堆 JavaScript 文件。我将它们全部打开并批量搜索诸如“正则表达式”之类的东西，希望不必吐出所有文件。没有。

过了一会儿，我找到了第 189 行`background.js`。幸运的是，这是我打开的第二个文件，所以我很快就找到了。

```
addSubscription("https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt", "Liste FR+EasyList"); 
```

我在 Chrome 中打开[了这个函数中使用的链接](https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt)，看到了大量的标签、url 和其他我什至不想记住的东西。

在第 5876 行，我找到了以下行：

```
...
###ads-wrapper
... 
```

似乎前两个`##`用来说：嘿，这是一个属性，所以在你的函数 Mr. Adblock plus 中过滤它。因为稍后您可以找到类似`##.ads-wrapper`. 我们在这个文件中找到了我们之前尝试过的所有属性值。（在`background.js`您可以找到更多包含要隐藏的匹配项的文件。）

**结论**

查看[.txt](https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt)并检查它们排除的类、id 和其他属性以及 url。请不要试图记住它们，而是看一眼。您会在这些值中找到一些模式，因此希望您能记住，即使您的意图不是显示广告，某些插件也会阻止您的内容！

如果您的公共可访问网站的访问者向您发送以下消息，那可能会非常令人头疼：

> 嘿，您的网站无法正常工作。我看不到Foo Bar ...

因此，希望您现在在本文中思考一下并思考：“也许它与广告拦截器插件以及我在 id 和类中的选择有关。”。

**使用的链接**

*   [https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)
*   [http://en.wikipedia.org/wiki/Access_control_list](http://en.wikipedia.org/wiki/Access_control_list)
*   [https://chrome.google.com/webstore/detail/adblock-plus/cfhdojbkjhnklbpkdaibdccddilifddb](https://chrome.google.com/webstore/detail/adblock-plus/cfhdojbkjhnklbpkdaibdccddilifddb)
*   [http://saravananthirumuruganathan.wordpress.com/2010/05/01/how-to-read-the-source-code-of-chrome-and-firefox-extensions/](http://saravananthirumuruganathan.wordpress.com/2010/05/01/how-to-read-the-source-code-of-chrome-and-firefox-extensions/)
*   [https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt](https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:44:57.137

我已将此问题检查为“回答您自己的问题”，因为我想分享我的发现，这确实令人头疼。

您可以在原始帖子中找到完整的解决方案/答案。在否决这个答案之前，请注意这一点！

**解决方案总结**

AdBlock plus，一个 Chrome 插件似乎会根据其网站上的文件阻止具有指定属性的 url 和元素。

查看[文件](https://easylist-downloads.adblockplus.org/liste_fr+easylist.txt)并检查它们排除的类、id 和其他属性以及 url。请不要试图记住它们，而是看一眼。您会在这些值中找到一些模式，因此希望您能记住，即使您的意图不是显示广告，某些插件也会阻止您的内容！

# javascript - 奇怪的 jQuery 错误 .children(...).attr(...).change 不是函数？

> ID：14259350
> 
> 赞同：2
> 
> 时间：2013-01-10T13:44:56.997
> 
> 标签：javascript, jquery, magento

我很欣赏这可能不是一个好问题，但我束手无策（如果问题需要删除，请告诉我）

我在 Magento (Zetaprints Web To Print) 中安装了一个插件，这个插件的图像上传部分不起作用。我已经联系了他们的支持，但他们不想知道这件事，除非我掏钱。

我认为这是由于引发了 JavaScript 错误，在 Firefox 和 Chrome 控制台中我都会收到错误消息：

铬合金

> 未捕获的类型错误：对象没有“更改”方法

火狐

> TypeError: $td.children(...).attr(...).change 不是函数

无论如何，我都不是 jQuery 或 JavaScript 方面的专家，但在我看来，这是因为被引用的对象不是 jQuery 对象，而是其他东西（我不确定）。错误引用的代码如下：

```
 function add_image_to_gallery (guid, url, on_image_load) {
    var trs = $('.tabs-wrapper > .user-images > table > tbody > tr');

    $(trs).each(function () {
      var $tr = $(this);
      var $template = $tr.children('.zp-html-template');

      var $td = $template
                  .clone()
                  .removeClass('zp-html-template')
                  .insertAfter($template);

      // THE CODE BELOW IS THROWING THE ERRORS
      $td
        .children('.zetaprints-field')
        .attr('value', guid)
        .change({ zp: zp }, image_field_select_handler);

      $td
        .children('.image-edit-thumb')
        .click(thumbnail_edit_click_handler);

      var $thumb = $td.children('.image-edit-thumb');

      $thumb
        .find('> .buttons-row > .zp-delete-button')
        .click(delete_image_click_handle);

      var $img = $thumb
                   .children('img')
                   .attr('alt', guid)
                   .attr('src', url);

      if (on_image_load)
        $img.load(on_image_load);
    });
  } 
```

（以及一小段代码，文件超过 1400 行）

有人能看出上述代码有什么明显错误吗？或者有人知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:52:06.017

如果 guid 未定义`$td.attr('value')`，将返回字符串而不是 jquery 链。所以 'string'.change 会触发错误。

```
 $td
    .children('.zetaprints-field')
    .attr('value', guid)
    .change({ zp: zp }, image_field_select_handler); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:49:36.097

jQuery $ 与 magento 不完全兼容。我认为它与 Prototype.js 有关，但我从来没有比“这么想”更深入地研究过它。我只知道执行以下操作可以解决您的问题...

任何 jQuery 插件都必须启用 jQuery().noConflict()。

请参阅：[http ://api.jquery.com/jQuery.noConflict/](http://api.jquery.com/jQuery.noConflict/)

基本上你必须通过你的插件并将任何有“$(”的地方替换为“jQuery(”

# cakephp - Cakephp : 仅通过电子邮件确认创建会员帐户

> ID：14259353
> 
> 赞同：-2
> 
> 时间：2013-01-10T13:45:00.100
> 
> 标签：cakephp

对于一个项目，我需要使用 CakePHP 从客户数据库创建成员资格。

例如，客户提交包含单字段电子邮件的注册表单并收到一封确认电子邮件，其中包含指向编辑页面配置文件的链接，他必须完成以创建您的帐户（用户名、密码等）。

我不知道如何启动我的控制器和模型。

感谢您的帮助

亲切地

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:58:03.283

您的问题在这里有点宽泛，但他简要概述了您如何从您的客户控制器开始处理这个问题：-

```
class CustomersController extends AppController {

    public function register() {

        // Drive your registration form from this action and on successful form
        // submission email user a unique registration token using CakeEmail
        // that links to the confirmation action.

    }

    public function confirm_email($registrationToken) {

        // Check user's registration token and confirm their account.

    }   

} 
```

基本上，用户会首先访问 example.com/customers/register 并提供他们的电子邮件地址。当您处理数据并将其保存到数据库时，会生成一个唯一的注册令牌（并将其与客户的数据一起存储在数据库中）。[使用CakeEmail](http://book.cakephp.org/2.0/en/core-utility-libraries/email.html)将令牌作为到 confirm_email 操作的链接的一部分发送电子邮件，例如 example.com/customers/confirm_email/X2458FHJ 。当用户访问链接时，您需要在您的 confirm_email 操作中检查注册令牌并从那里继续。

# php - Mysql_fetch_array php 和 jquery 自动完成

> ID：14259354
> 
> 赞同：0
> 
> 时间：2013-01-10T13:45:00.427
> 
> 标签：php, jquery, arrays, jquery-autocomplete

所以我使用 mysql_fetch_array 让 Jquery 自动完成与 mysql 一起工作，我知道我知道，

我在返回一行中的每一列时遇到了一点麻烦，到目前为止，对表的 name 列的请求发生了，并从行中返回 name 列。

我的“事件”表如下所示，

```
name     event    price    date    color    drinks 
```

我想做的是搜索“名称”、“事件”、“日期”和“颜色”列，但是当在任何列中找到匹配项时，以特定顺序显示它们列的结果。

因此，如果我的“事件”表包含以下数据

```
name     event       price     date             color         drinks
Helen    Topmark      31       03/02/2013       red            brandy
Gregg    maxpower     27       01/02/2013       red            whiskey 
```

有人搜索“red helen”，自动完成会像这样填充

```
Helen Topmark red 03/02/2013 
```

另外，如果有人搜索“红色”，我想优先考虑日期

```
Gregg maxpower red 01/02/2013
Helen Topmark red 03/02/2013 
```

这是我目前拥有的代码

```
$req = "SELECT name "
    ."FROM events "
    ."WHERE name LIKE '%".$_REQUEST['term']."%' "; 

$query = mysql_query($req);

while($row = mysql_fetch_array($query))
{
    $results[] = array('label' => $row['name']);
}

echo json_encode($results); 
```

非常感谢您的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:51:16.920

你可以做：

```
$req = "SELECT name, event, color, date FROM events WHERE (name LIKE '%".$_REQUEST['term']."%' OR event LIKE '%".$_REQUEST['term']."%' OR date LIKE '%".$_REQUEST['term']."%' OR color LIKE '%".$_REQUEST['term']."%')"; 
```

还有你的while循环：

```
while($row = mysql_fetch_array($query))
{
    echo $row['name'] . ' ' . $row['event'] . ' ' . $row['color'] . ' ' . $row['date']; 
} 
```

只是给出一些方向，仍然对sql注入开放。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:57:46.697

更新您的查询，如下所示：

```
$search  =  $_REQUEST['term'];
$pieces = explode(" ", $search);
$in = "";
foreach($pieces as $val) {
    $in = "'".$val."' IN (name,color) AND ";
    if(end($pieces) === $val)
        $in = "'".$val."' IN (name,color)";
} 
```

注意：mysql_query() 这些函数在 PHP5.3 中已被弃用。

# c++ - Com Interop DLL 的多个版本

> ID：14259358
> 
> 赞同：0
> 
> 时间：2013-01-10T13:45:05.090
> 
> 标签：c++, .net, com-interop

我有一个使用 Com Interop 构建的 .NET 2.0 DLL，因此我可以从在 VS 6 中开发的两个不同的 C++/MFC 应用程序访问它。

目前，一个 C++ 应用程序 (App1) 使用一种形式的 .NET DLL (Lib1)，而另一个 (App2) 使用另一种形式 (Lib2)。我想将这些单独的库组合成一个代码库（应该如此），但我仍然需要它们成为两个单独的库。但是，如果它们具有相同的名称，我不知道如何注册这两个单独的库。这可以做到吗？有没有替代我目前正在做的事情？

App1 通过调用访问它的库版本：
hr = ::CLSIDFromProgID(L"Lib1.Devices", &clsid); App2 通过调用来访问它的库版本：
hr = ::CLSIDFromProgID(L"Lib2.Devices", &clsid);

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:50:59.977

你可以在这里做两件事

*   您可以为两种不同的表单放置两种不同的方法，这样您就可以拥有一个单独的 COM 对象，该对象公开两种可供两个不同应用程序使用的方法

*   您可以做的第二件事是，为您的 com dll 放置两个不同的 GUID，这样，您可以拥有同名的 dll 仍然有两个不同的代码。虽然不推荐，但它是 dll 地狱的根本原因。

请参阅此处以获取 [DLL (.Net) 中的此解决方案 GUID](https://stackoverflow.com/questions/489715/guids-in-dlls-net)

# formatting - Number.format() 的反转？

> ID：14259369
> 
> 赞同：0
> 
> 时间：2013-01-10T13:45:47.117
> 
> 标签：formatting, numbers, mootools, mootools-more

在 MooTools More (1.4) 中，有一个`Number.format()`函数可以接受一个数字并转换为可读格式，例如...

```
"5,003.2" === (5003.2).format() 
```

..考虑到当前设置`Locale`。

我的问题：是否有可能发生相反的效果，例如将普通数字存储在数据库中？就像是：

```
5003.2 === "5,003.2".reverseformat() 
```

还是我必须使用正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:31:21.147

没有一个是现成的，它不是微不足道的。您拥有的字符串很容易通过正则表达式完成，但正则表达式并不能真正告诉您语言环境是什么以及自定义格式是什么样的。

比如，`5,300`在英国看应该去很酷`5300`。在欧盟，它通常意味着四舍五入`5.3`。

话虽如此，请参阅[http://josscrowcroft.github.com/accounting.js/](http://josscrowcroft.github.com/accounting.js/)

它还支持`unformat`哪个可以带回来。

信任客户端区域设置也可以是通用的`falsy`，人们带着笔记本电脑旅行......虽然这更适用于区域设置时间/时区的东西。

# ios - iOS 6 通过 ABPeoplePickerNavigationController 创建新联系人

> ID：14259382
> 
> 赞同：3
> 
> 时间：2013-01-10T13:46:29.180
> 
> 标签：ios, addressbook, addressbookui

我正在尝试遵循 Apple 的地址簿编程指南，并对 peoplePickerController 有疑问。Apple 教程中的示例照片在右上角有“加号”按钮，这似乎允许用户通过 peoplePickerController 添加新联系人。

我通过调用 ABPeopleNavigationControllerPicker

```
 - (void)showPicker
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;

    [self presentViewController:picker animated:YES completion:nil];
} 
```

但是屏幕右上角有一个取消按钮，而不是加号按钮。是否有任何选项可以更改按钮或允许用户通过此视图控制器添加新联系人？

在谷歌搜索了一段时间后，我找到了以下内容。所以我尝试以编程方式更改栏按钮......

```
 - (void)addPerson
{
    ABNewPersonViewController *newPersonVC = [[ABNewPersonViewController alloc] init];
    newPersonVC.newPersonViewDelegate = self;
    UINavigationController *nc = [[UINavigationController alloc] initWithRootViewController:newPersonVC];
    [self presentViewController:nc animated:YES completion:nil];
}
- (void)showPicker
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.topViewController.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addPerson)];
    picker.peoplePickerDelegate = self;
    [self presentViewController:picker animated:YES completion:nil];
}但是，不知何故，栏按钮仍然固定为“取消”而不是“添加”......

            回答 #1

赞同：2

时间：2013-11-04T22:39:08.163

在 iOS 7 上，我需要稍后设置这些按钮...

```
 - (void)showPicker
 {
     ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
      picker.peoplePickerDelegate = self;
     [self presentViewController:picker animated:YES completion:nil];
   [picker.topViewController setEdit:YES];
   [self performSelector:@selector(setThemBuddons:) withObject:picker afterDelay:0.1];
}

-(void)setThemBuddons:(ABPeoplePickerNavigationController*)picker;
{
     picker.topViewController.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addPerson)];

} 
```

            回答 #2

赞同：0

时间：2013-01-10T14:49:35.323

没关系，我现在开始工作了。看来我需要在覆盖其按钮之前呈现 ViewController ......

```
 - (void)showPicker
{
    ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController alloc] init];
    picker.peoplePickerDelegate = self;
    [self presentViewController:picker animated:YES completion:nil];
    [picker.topViewController setEdit:YES];
    picker.topViewController.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addPerson)];
} 
```

            回答 #3

赞同：-1

时间：2014-06-16T16:38:22.850

您只需要对 addPerson 方法进行一点修改。

**用于显示联系人：**

-（无效）显示选择器

{

```
ABPeoplePickerNavigationController *picker = [[ABPeoplePickerNavigationController       alloc] init];
  picker.peoplePickerDelegate = self;
  [self presentViewController:picker animated:YES completion:nil];
  [picker.topViewController setEdit:YES];
  [self performSelector:@selector(addContact:) withObject:picker afterDelay:0.1]; 
```

}

-(void)addContact:(ABPeoplePickerNavigationController*)picker；

{

```
picker.topViewController.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(addPerson)]; 
```

}

通过此代码，您将在右上角获得一个加号以添加联系人。

我们为此使用@selector。

-(void)addPerson

{

```
ABNewPersonViewController *newPersonVC = [[ABNewPersonViewController 
alloc] init];
newPersonVC.newPersonViewDelegate = self;
UINavigationController *nc = [[UINavigationController alloc]     initWithRootViewController:newPersonVC]; 
```

//这是完成工作的代码。通过使用self.presentedViewController，我们可以//获取添加联系人屏幕，否则我们将收到类似空视图层次结构的错误。

```
 [self.presentedViewController presentViewController:nc animated:YES completion:nil]; 
```

}

```

# process - QTP 一次打开多个测试

> ID：14259384
> 
> 赞同：2
> 
> 时间：2013-01-10T13:46:35.450
> 
> 标签：process, qtp

我们都知道，一次只能使用 QTP 打开一个测试或项目是一件令人头疼的事情。

我想找到一种方法来一次打开两个测试，或者为此启动 QTP 两次（两个并行进程）。

提前感谢您的答案/想法。

PS> 我现在无法使用 VMwares...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:21:00.400

很简单，升级到支持同时打开多个测试的[UFT 11.50 。](http://www.youtube.com/watch?v=-DKilwaiyGE)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-05T08:35:25.073

你去文件>添加>现有测试

# java - 函数 getResourceAsStream 返回 null 而 getResource 返回 URL

> ID：14259385
> 
> 赞同：4
> 
> 时间：2013-01-10T13:46:35.830
> 
> 标签：java

我遇到了很奇怪的问题，希望你能帮助我： 我运行以下行：

```
InputStream stream = this.getClass().getClassLoader().getResourceAsStream(SOME_PATH); 
```

它有效。然后，我创建一个指向同一个文件的新类加载器，然后

```
this.getClass().getClassLoader().getResourceAsStream(SOME_PATH) 
```

返回空值。

当我调试它时，我看到了

```
this.getClass().getClassLoader().getResource(SOME_PATH) 
```

返回一个有效的 URL 对象。

所以，我调试了getResourceAsStream，发现它调用了getResource，当它试图打开steam时——它在FileNotFoundException上失败了。

我不知道如何解决它。流已正确关闭。

任何人？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:14:41.303

`ClassLoader.getResourceAsStream()`将尝试获取`URL`资源并执行`resource.openStream()`.

它吞下任何`IOException`并返回 a `null`。如果您得到一个`FileNotFoundException`，则意味着该资源一开始就没有被发现。

要对此进行测试，请尝试：

```
URL resource = this.getClass().getClassLoader().getResource(SOME_PATH);
if (resource != null) {
    try {
        resource.openStream();
    } catch (IOException e) {
        e.printStackTrace();
    }
} 
```

如果您收到任何内容，`IOException`则`ClassLoader.getResource()`可能找不到资源或无法打开流。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:03:34.850

我找到了解决方法（注意 setUseCaches）：

```
 InputStream zipStream = null;
        URL resource = this.getClass().getClassLoader().getResource(SOME_PATH);
        if (resource != null) {
            try {
                URLConnection urlConnection = resource.openConnection();
            urlConnection.setUseCaches(false);
                zipStream = urlConnection.getInputStream();
            } catch (IOException e) {
                e.printStackTrace();
                NolioAction._log.error(e.getMessage(), e);
            }
        } 
```

# php - 从 Yahoo! 获取联系人的 Oauth HMAC-SHA1 身份验证 联系人 API

> ID：14259389
> 
> 赞同：0
> 
> 时间：2013-01-10T13:46:49.677
> 
> 标签：php, oauth, yahoo-api

> **可能重复：**
> [使用 Yahoo Contacts API 获取联系人](https://stackoverflow.com/questions/12179189/get-contacts-using-yahoo-contacts-api)

我正在开发一个系统来从用户那里获取雅虎联系人。[我已经完成了http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html](http://developer.yahoo.com/oauth/guide/oauth-auth-flow.html)的所有步骤，并且我已经获得了访问令牌和令牌密码。

我在使用 HMAC-SHA1 算法进行签名时遇到问题，我已按照[http://developer.yahoo.com/oauth/guide/oauth-signing.html](http://developer.yahoo.com/oauth/guide/oauth-signing.html)中的步骤生成签名密钥，但是当我向给定用户请求联系人时我得到错误：

```
<yahoo:error xmlns:yahoo='http://yahooapis.com/v1/base.rng'
    xml:lang='en-US'>
    <yahoo:description>Please provide valid credentials. OAuth oauth_problem="signature_invalid", realm="yahooapis.com"</yahoo:description>
</yahoo:error> 
```

这是我负责生成签名密钥的代码：

```
$s =  'oauth_consumer_key='.rawurlencode($yahoo_consumer_key).'&';
$s .= 'oauth_nonce='.rawurlencode(uniqid()).'&';
$s .= 'oauth_signature_method='.rawurlencode('HMAC-SHA1').'&';
$s .= 'oauth_timestamp='.rawurlencode(time()).'&';
$s .= 'oauth_token='.rawurlencode($ouathToken).'&';
$s .= 'oauth_version='.rawurlencode('1.0').'&';
$s .= 'realm='.rawurlencode('yahooapis.com');

$baseString ='GET&'.rawurlencode('http://social.yahooapis.com/v1/user/'.$guid.'/contacts').'&'.rawurlencode($s);

$signingKey = rawurlencode($yahoo_consumer_secret).'&'.rawurlencode($ouathTokenSecret);

$signature = urlencode(base64_encode(hash_hmac('sha1', $baseString, $signingKey, true)));

curl_setopt_array($ch, array(
            CURLOPT_RETURNTRANSFER => true,
            CURLOPT_FOLLOWLOCATION => TRUE,
            CURLOPT_SSL_VERIFYPEER => false,
            CURLOPT_SSL_VERIFYHOST => 0,
            CURLOPT_HTTPGET => true,
            CURLOPT_POST       => false,
            CURLOPT_URL => 'http://social.yahooapis.com/v1/user/'.$guid.'/contacts'.    
                                  '?realm=yahooapis.com'.
                                  '&oauth_consumer_key='.$yahoo_consumer_key.
                                  '&oauth_nonce='.uniqid().
                                  '&oauth_signature_method=HMAC-SHA1'.
                                  '&oauth_timestamp='.time().
                                  '&oauth_token='.$ouathToken.
                                  '&oauth_version=1.0'.
                                  '&oauth_signature='.$signature
        ));

$result = curl_exec($ch); 
```

任何人都可以帮助告诉我错误在哪里？我没有正确生成签名密钥吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:44:09.430

看起来您在某些地方使用了 urlencode 而不是 rawurlencode 整个地方将使用“+”而不是“%20”之类的东西作为空格。雅虎文档（对这个领域来说不是很好）显示了使用 rawurlencode 而不是 urlencode 的“规范化” Header/URL 字符串。除了您对请求进行编码的方式之外，它看起来还不错。

*已编辑：我将 rawurlencode 和 urlencode 混淆了。Rawurlencode 使用 OAuth 要求的 RFC 3986：http: [//oauth.net/core/1.0/#encoding_parameters](http://oauth.net/core/1.0/#encoding_parameters)

你也是双重编码 $s！不要这样做 - 创建 $s 时根本不要使用 rawurlencode，而不是在构建 $baseString 或 URL 时对其进行编码 在创建 $s 时在顶部对其进行编码，然后不要在 $ 中再次对其进行编码基本字符串。

# ios - Flex ActionScript3 FileStream.writeObject 在 iOS 中静默失败 - 我做错了什么？

> ID：14259393
> 
> 赞同：1
> 
> 时间：2013-01-10T13:47:05.983
> 
> 标签：ios, apache-flex, mobile, actionscript, filestream

使用 Flash Builder 4.7、AIR 3.5、Flex 4.6.0（内部版本 23201）的最终版本，并运行/调试快速构建到运行 iOS 6.0.1 (10A523) 的 iPad2 MC981LL

我已经在我认为应该相当简单的事情上浪费了一天多的时间，但在这一点上，我完全不知所措。任何帮助表示赞赏。

我没有收到任何错误消息。运行后文件存在，但大小仅为 128 字节。不用说，除了 NULL 之外，它不能被读入任何东西。我什至在 writeObject 函数中实例化了一个 Object()，只是为了确保不是我的更复杂的对象导致了困难（为了简单起见，我暂时将 bitmapData 和 thumbnail 属性留空）。没有骰子。

除了我在对象中读回的尝试之外，我已经包含了所有相关代码。

不用说，它最初是一个具有读写功能的简单类，随着我尝试并尝试获取有关它失败原因的可用信息，它变得更加复杂。最初没有 trace 语句，没有自定义的 even 和 dispatcher，没有 try、catch、finally，也没有事件监听器，任何可以给我线索的东西。

另外，我可能做错了整个自定义事件/处理程序/侦听器/调度程序，因为让整个球滚动的类中的 statusMessage（底部的最后一个代码块）显示“将图像和缩略图保存到库”但从来没有“文件保存到库”

任何帮助是极大的赞赏。

这是我的踪迹：

```
[SWF] PictureToolsOnTheMoveMakeIt.swf - 4,154,904 bytes after decompression
FileSerializer FUNCTION writeObjectToFile()
FileStream.openAsync(write) finally
FileStream.writeError() finally 
```

FileSerializer 类：

```
package classes
{
    import flash.events.Event;
    import flash.events.EventDispatcher;
    import flash.events.IEventDispatcher;
    import flash.events.IOErrorEvent;
    import flash.errors.*;
    import flash.filesystem.File;
    import flash.filesystem.FileMode;
    import flash.filesystem.FileStream;

    import events.FileSerializerEvent;

    import vo.PTotmImageVO;

    [Event(name = "writeComplete", type = "events.FileSerializerEvent")]
    [Event(name = "readComplete", type = "events.FileSerializerEvent")]

    public class FileSerializer extends EventDispatcher
    {
        private var fileStream:FileStream = new FileStream();

        public function FileSerializer(target:IEventDispatcher=null)
        {
            super(target);
        } // End CONSTRUCTOR FileSerializer

        public function writeObjectToFile(ptotmImageVO:PTotmImageVO, fnam    e:String):void
        {
            trace("FileSerializer FUNCTION writeObjectToFile()");
            var file:File = File.applicationStorageDirectory.resolvePath(ptotmImageVO.userid+"-"+ptotmImageVO.timestamp+".PTotmImageVO");

            fileStream.addEventListener(Event.CLOSE, close);
            fileStream.addEventListener(IOErrorEvent.IO_ERROR, ioErrorEventHandler);

            try
            {
                fileStream.openAsync(file, FileMode.WRITE);
            }
            catch (e:SecurityError)
            {
                // The file location is in the application directory, and the fileMode parameter is set to "append",
                // "update", or "write" mode.

                trace("FileStream.openAsync(write) SecurityError "+e);
            }
            finally
            {
                trace("FileStream.openAsync(write) finally");
            }

            try
            {
                fileStream.writeObject(ptotmImageVO);
            }
            catch (e:IOError)
            {
                // The file has not been opened; the file has been opened, but it was not opened with write capabilities;
                // or for a file that has been opened for synchronous operations (by using the open() method), the file
                // cannot be written (for example, because the file is missing).
                trace("FileStream.writeObject() IOError "+e);
            }           
            finally
            {
                trace("FileStream.writeObject() finally");
            }
        } // End FUNCTION writeObjectToFile

        protected function close(e:Event):void
        {
            trace("FileSerializer FUNCTION close()");
            dispatchEvent(new FileSerializerEvent(FileSerializerEvent.WRITE_COMPLETE, null,true,true));
        } // End FUNCTION close

        protected function ioErrorEventHandler(event:Event):void
        {
            trace("FileSerializer FUNCTION ioErrorEventHandler()");
        } // End FUNCTION ioErrorEventHandler

        public function readObjectFromFile(fname:String):Object
        {
            var file:File = File.applicationStorageDirectory.resolvePath(fname);

            if(file.exists)
            {
                var obj:Object;
                var fileStream:FileStream = new FileStream();
                fileStream.addEventListener(Event.COMPLETE, readComplete);
                fileStream.open(file, FileMode.READ);
                obj = fileStream.readObject();
                fileStream.close();
                return obj;
            }
            return null;
        } // End FUNCTION readObjectFromFile

        protected function readComplete(event:Event):void
        {
            dispatchEvent(new FileSerializerEvent(FileSerializerEvent.READ_COMPLETE, event.target));            
        } // End FUNCTION readComplete
    } // End CONSTRUCTOR FileSerializer
} // End PACKAGE classes 
```

值对象类：

```
package vo
{
    import flash.display.BitmapData;

    [remoteClass(alias="PTotmImageVO")]

    public class PTotmImageVO
    {
        public var userid:String;
        public var thumbnail:BitmapData;
        public var image:BitmapData;
        public var timestamp:Number;
        public var description:String;
        public var type:String;

        public function PTotmImageVO()
        {

        } // End Constructor PTotmImageVO
    } // End Class PTotmImageVO
} // End Package vo 
```

事件类 FileSerializerEvent：

```
package events
{
    import flash.events.Event;

    public class FileSerializerEvent extends Event
    {
        public static const WRITE_COMPLETE:String = "writeComplete";
        public static const READ_COMPLETE:String = "readComplete";

        public function FileSerializerEvent(type:String, data:*=null, bubbles:Boolean = true, cancelable:Boolean = true)
        {
            super(type, bubbles, cancelable);

            switch(type)
            {
                case WRITE_COMPLETE:
                    break;
                case READ_COMPLETE:
                    break;
            }
        }
    }
} 
```

最后，我创建对象、实例化类并使用创建的对象调用类的 writeObjectToFile() 函数的代码：

```
 private var ptotmImageVO:PTotmImageVO = new PTotmImageVO();
            private var fileSerializer:FileSerializer = new FileSerializer();

            protected function createThumbnail():void
            {
                thumbBmpData = ImageResizer.bilinearIterative(bmpData, borderRect.width, borderRect.height, ResizeMath.METHOD_LETTERBOX , true, 3);

                saveImageToLibrary();
            }

            protected function saveImageToLibrary():void
            {
                statusMessage.text = "Saving Image and Thumbnail to Library...";

                ptotmImageVO.userid = parentApplication.userid;
                ptotmImageVO.description = "";
                ptotmImageVO.timestamp = new Date().getTime();
//              ptotmImageVO.thumbnail = thumbBmpData;
//              ptotmImageVO.image = bmpData;
                ptotmImageVO.type = "PictureTools - On The Move - Photo Entity";

                    fileSerializer.addEventListener(FileSerializerEvent.WRITE_COMPLETE, saveComplete);
                fileSerializer.writeObjectToFile(ptotmImageVO, ptotmImageVO.userid+"-"+ptotmImageVO.timestamp+".PTotmImageVO");
            }

            protected function saveComplete(event:FileSerializerEvent):void
            {
                statusMessage.text = "File Saved to Library";
            } 
```

呃，好吧。还不如提供所有信息。这是我试图读取对象的类，因为我计划使用 itemRenderer 在平铺布局中显示它们（希望很快在 Apache Flex 4.9 中出现新的 DataGrid）...

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009" 
         xmlns:s="library://ns.adobe.com/flex/spark"
         creationComplete="drawBackground()"
         click="refreshFileListing()">

    <fx:Script>
        <![CDATA[
            import spark.components.VGroup;

            import classes.FileSerializer;          
            import events.FileSerializerEvent;
            import vo.PTotmImageVO;

            [Bindable]
            private var file:File = File.applicationStorageDirectory;
            [Bindable]
            private var directoryListing:String = new String();

            private var files:Array;
            private var fs:FileSerializer = new FileSerializer();

            public function refreshFileListing():void
            {               
                files = file.getDirectoryListing();

                trace("MyLibraryPhotoPanel FUNCTION refreshFileListing -- file.nativePath -- "+file.nativePath);
                trace("MyLibraryPhotoPanel FUNCTION refreshFileListing -- file.isDirectory -- "+file.isDirectory);
                trace("MyLibraryPhotoPanel FUNCTION refreshFileListing -- file.name -- "+file.name);
                trace("MyLibraryPhotoPanel FUNCTION refreshFileListing -- file.getDirectoryListing -- "+file.getDirectoryListing());
                trace("MyLibraryPhotoPanel FUNCTION refreshFileListing -- files.length -- "+files.length);

            var objects:Array = new Array();

                for (var i:uint = 0; i < files.length; i++)
                {
                    fs.addEventListener(FileSerializerEvent.READ_COMPLETE, fileReadComplete);

                    var f:String = files[i].name;
                    var o:PTotmImageVO = fs.readObjectFromFile(f) as PTotmImageVO;
                    objects.push(o); // Desperate at this point pretty much trying nonsense

                    trace("MyLibraryPhotoPanel FUNCTION refreshFileListing in for() -- o -- "+o);

                    // This is destined for an itemRenderer if ever I can get an object serialized to file and read back in.
//                  var b:BitmapData = o.thumbnail as BitmapData;
//
//                  var img:Image = new Image();
//                  img.source = b;
//
//                  var l:Label = new Label();
//                  l.text = files[i].name;
//
//                  var vg:VGroup = new VGroup();
//                  vg.addElement(img);
//                  vg.addElement(l);
//
//                  tg.addElement(vg);              

                    trace("MyLibraryPhotoPanel FUNCTION refreshFileListing in for()#1 -- count/name/size -- "+i+". "+files[i].name+" "+files[i].size+"bytes");
                }

                for(var k:uint = 0; k<objects.length; k++)
                {
                    trace("MyLibraryPhotoPanel FUNCTION refreshFileListing in for()#2 -- file object in Array -- "+k+". "+objects[k]);
                }
            } // End FUNCTION refreshFileListing

            protected function fileReadComplete(event:FileSerializerEvent):void
            {
                trace("MyLibraryPhotoPanel FUNCTION FileReadComplete");
            } // End FUNCTION fileReadComplete

            protected function drawBackground():void
            {
                with(graphics)
                {
                    beginFill(0xffffff,0);
                    drawRect(0,0,parent.width,parent.height);
                    endFill();
                }
            } // End FUNCTION drawBackground

        ]]>
    </fx:Script>
    <s:VGroup id="tg" height="100%" width="100%">
    </s:VGroup> 
</s:Group> 
```

和跟踪输出：

```
[SWF] PictureToolsOnTheMoveMakeIt.swf - 4,152,506 bytes after decompression
FileSerializer FUNCTION writeObjectToFile()
FileStream.openAsync(write) finally
FileStream.writeObject() finally
FileSerializer FUNCTION writeObjectToFile()
FileStream.openAsync(write) finally
FileStream.writeObject() finally
MyLibraryPhotoPanel FUNCTION refreshFileListing -- file.nativePath -- /var/mobile/Applications/926FFAF1-3FBE-4854-A61C-3BB8A3752D50/Library/Application Support/org.PictureTools.Apps.PictureToolsOnTheMoveMakeIt.debug/Local Store
MyLibraryPhotoPanel FUNCTION refreshFileListing -- file.isDirectory -- true
MyLibraryPhotoPanel FUNCTION refreshFileListing -- file.name -- Local Store
MyLibraryPhotoPanel FUNCTION refreshFileListing -- file.getDirectoryListing -- [object File],[object File]
MyLibraryPhotoPanel FUNCTION refreshFileListing -- files.length -- 2
MyLibraryPhotoPanel FUNCTION refreshFileListing in for() -- o -- null
MyLibraryPhotoPanel FUNCTION refreshFileListing in for()#1 -- count/name/size -- 0\. 000000-1357831345565.PTotmImageVO 117bytes
MyLibraryPhotoPanel FUNCTION refreshFileListing in for() -- o -- null
MyLibraryPhotoPanel FUNCTION refreshFileListing in for()#1 -- count/name/size -- 1\. 000000-1357831356829.PTotmImageVO 117bytes
MyLibraryPhotoPanel FUNCTION refreshFileListing in for()#2 -- file object in Array -- 0\. null
MyLibraryPhotoPanel FUNCTION refreshFileListing in for()#2 -- file object in Array -- 1\. null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T20:00:53.957

解决。Metadata 标记是 [RemoteClass... 而不是 [remoteClass，如我开始工作的示例代码中所示。由于编译器不检查这些标签，并且制作您自己的标签在技术上并不是错误，因此 - 永远 - 不会有任何诊断数据可以工作。

# jquery - 单击 jQuery Mobile 中的按钮链接会导致 pageinit 行为不端

> ID：14259395
> 
> 赞同：1
> 
> 时间：2013-01-10T13:47:09.947
> 
> 标签：jquery, jquery-mobile

我在页面上有以下代码：

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Appski</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
</head> 
<body> 
<div data-role="page" id="quizPage">
        <div data-role="content">   
            <button id="bigButton"></button>
        </div><!-- /content -->
</div><!-- /page -->
</body>

<script>
    $(document).ready(function() { 
        $("#bigButton").html("hello");
        $("#bigButton").button('refresh'); 

    });

    $("#bigButton").click(function() {
        window.location.replace("page2.html");
    });
</script>

</html> 
```

当我加载此页面时，它工作正常并在按钮中显示“你好”，但是当我从另一个带有以下源代码的 jQuery Mobile 页面链接时，页面加载时按钮中没有出现任何文本（并且链接没有也不行）：

```
<a href="page1.html" data-role="button">click me</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T02:54:09.627

这是因为当您返回上一页时 jquery mobile 进行了 ajax 调用。

因此，实际上，当您单击第二页上的按钮时，它会`data-role="page"`通过 ajax 调用直接加载第一页的部分，这就是您不会获得在第一页上编写的脚本并显示`Hello`在按钮上的原因。

因此，在这种情况下，您还需要在第二页上插入相同的脚本，或者如果适合您，您可以在每个页面上使用通用标题。

并且不使用`$(document).ready`你应该使用`$(document).on('pageinit')`. 有关详细信息，请参阅[此处](http://jquerymobile.com/test/docs/api/events.html)的文档。

**所以这是你的第一页：**

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Appski</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
     <link rel="stylesheet" href="css/style.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
<script>
  $(document).on('pageinit',function(e){
    $("#bigButton").html("hello");
        $("#bigButton").button('refresh');         
    });
</script>  
</head> 
<body>
<div data-role="page" id="quizPage">
        <div data-role="content">   
            <button id="bigButton"></button>
        </div><!-- /content -->
</div><!-- /page -->
</body>
</html> 
```

**第二页**

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Appski</title> 
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <script>
  $(document).on('pageinit',function(e){
    $("#bigButton").html("hello");
        $("#bigButton").button('refresh');         
    });
</script> 
</head> 
<body> 
<div data-role="page" id="quizPage">
        <div data-role="content">   
          <a href="main.html"  data-role="button">click me</a>
        </div><!-- /content -->
</div><!-- /page -->
</body>
</html> 
```

我对此进行了测试，它对我有用。您可以进一步优化这些页面的代码。

最好也阅读[官方活动文档](http://jquerymobile.com/test/docs/api/events.html)。

# ios - NSCalendar 日期错误

> ID：14259397
> 
> 赞同：2
> 
> 时间：2013-01-10T13:47:24.327
> 
> 标签：ios, objective-c, nsdate, nsdateformatter, nscalendar

我正在尝试使用`NSCalendar`标识符`NSIslamicCalendar`。但是当天结果不好，她是我的代码：

```
NSCalendar *calandar = [[NSCalendar alloc]initWithCalendarIdentifier:NSIslamicCalendar];    
NSDateComponents *components = [calandar components:(NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit) fromDate:[NSDate date]];
NSInteger theDay = [components day];
NSInteger theMonth = [components month];
NSInteger theYear = [components year];

[components setDay:theDay];
[components setMonth:theMonth];
[components setYear:theYear];
NSDate *thisDate = [calandar dateFromComponents:components];    
NSLog(@"year=%i month=%i day=%i",theYear,theMonth,theDay);
NSLog(@"thisdate = %@", [thisDate description]);

NSString *strDate = [NSString stringWithFormat:@"%i-%i-%i",theYear,theMonth,theDay];
NSDateFormatter *formatter = [[NSDateFormatter alloc]init];
[formatter setDateFormat:@"yyyy-MM-dd"];
NSDate *datee = [formatter dateFromString:strDate];
NSLog(@"datee = %@", [datee description]); 
```

日志：

```
year=1434 month=2 day=28              ----> all good (it's islamic calandar)
thisdate = 2013-01-09 23:00:00 +0000  ----> not good (we are in 2013-01-10 not 09).
datee = 1434-02-27 23:19:16 +0000     ----> not good (we are in 1434-02-28 not 27) 
```

正如您所看到的，第一个日期是正确的，而不是另一个日期，而且时间也不正确（当我编译时它大约是 14:20）并且它在最后 2 个最后一个日志之间有所不同（23:00:00 与 23:19： 16）。

此代码在我的 viewDidload: 函数中，之前或之后没有其他代码在运行。

另外，如果我想获得一个月中的天数，我会再获得一天：

```
NSCalendar *c = [[NSCalendar alloc]initWithCalendarIdentifier:NSIslamicCalendar];
NSRange dayRange = [c rangeOfUnit:NSDayCalendarUnit inUnit:NSMonthCalendarUnit forDate:date];
NSLog(@"dayRange.length = %i",dayRange.length); 
```

日志：

```
dayRange.length = 30 -----> but this islamic month have 29 day not 30. 
```

有什么问题，我该如何解决？谢谢你。

***编辑：***

似乎是相同的`NSGregorianCalendar`，其中一个区别是天数是正确的。使用日志`NSGregorianCalendar`

```
 year=2013 month=1 day=10                -----> all good
 thisdate = 2013-01-09 23:00:00 +0000    -----> not good
 datee = 2013-01-09 23:00:00 +0000       -----> not good

 dayRange.length = 31 ------------------------> all good 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T18:21:16.320

`datee = 1434-02-27 23:19:16 +0000`也许这是伊斯兰历法的特色？在伊斯兰教中，祈祷的时间与日出方程式有关，它可以尝试在某个点上表达太阳时间。iE 在沙特阿拉伯，由于宗教原因，太阳时间是唯一有效的时间。他们拒绝给同一块土地一次。如果太阳处于最高点，则为 12:00。由于这在相距仅几百公里的城市中差异很大，因此沙特阿拉伯的城市有不同的时间。

请注意，尽管在任何其他伊斯兰国家都使用正常时区，但这种实现是有意义的，因为伊斯兰日历最有效的用例可能是计算宗教事件——如果我使用太阳时间，它会变得容易得多。

* * *

使用此代码

```
 NSCalendar *islamicCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSIslamicCalendar];

     NSDate *today = [NSDate date];
    [islamicCalendar rangeOfUnit:NSDayCalendarUnit startDate:&today interval:NULL forDate:today];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setCalendar:islamicCalendar];
    [dateFormatter setTimeStyle:NSDateFormatterFullStyle];
    [dateFormatter setDateStyle:NSDateFormatterFullStyle];

    //english output 
    dateFormatter.locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];

    NSString * islamicDateString = [dateFormatter stringFromDate:today];
    NSLog(@"%@", islamicDateString); 
```

结果是

```
2013-01-11 01:13:46.110 islamicCalendarTest[18346:303] Friday, Safar 29, 1434 12:00:00 AM Central European Standard Time 
```

NSDateFormatter 会考虑您的默认时区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T13:51:11.613

`time is not correct (when i compile it's about 14:20) and it differs between the last 2 last log (23:00:00 vs 23:19:16).`

这是因为 GMT 和您当地区域之间的时区差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-18T06:18:45.220

```
// Create a Gregorian Calendar
NSCalendar *gregorianCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];

// Set up components of a Gregorian date
NSDateComponents *gregorianComponents = [[NSCalendar currentCalendar] components:NSDayCalendarUnit | NSMonthCalendarUnit | NSYearCalendarUnit fromDate:[NSDate date]];

NSLog(@"[In Gregorian calendar ->] Day: %ld, Month: %ld, Year:%ld",
      (long)[gregorianComponents day],
      (long)[gregorianComponents month],
      (long)[gregorianComponents year]);

gregorianComponents.day = [gregorianComponents day];
gregorianComponents.month = [gregorianComponents month];
gregorianComponents.year = [gregorianComponents year];

// Create the date
NSDate *date = [gregorianCalendar dateFromComponents:gregorianComponents];

// Then create an Islamic calendar
NSCalendar *hijriCalendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSIslamicCivilCalendar];

// And grab those date components for the same date
NSDateComponents *hijriComponents = [hijriCalendar components:(NSDayCalendarUnit |
                                                               NSMonthCalendarUnit |
                                                               NSYearCalendarUnit)
                                                     fromDate:date];

NSLog(@"[In Hijri calendar ->] Day: %ld, Month: %ld, Year:%ld",
      (long)[hijriComponents day],
      (long)[hijriComponents month],
      (long)[hijriComponents year]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-20T15:52:37.143

这里的所有答案都是好方法，但只是从科学的角度来看。但事实上，作为一名居住在土耳其并知道这个问题的根源的开发人员，Apple 拥有不止一个伊斯兰日历标识符

```
- NSCalendarIdentifierIslamic
- NSCalendarIdentifierIslamicCivil
- NSCalendarIdentifierIslamicTabular
- NSCalendarIdentifierIslamicCivilUmmAlQura 
```

我认为他正在寻找的是`NSCalendarIdentifierIslamicCivil`。我的应用程序里面还有一个回历日历并`NSCalendarIdentifierIslamicCivil`解决了这个问题

# python - Django Dynamic Sc raper STANDARD(UPDATE) 暗示强制元素？

> ID：14259399
> 
> 赞同：3
> 
> 时间：2013-01-10T13:47:30.663
> 
> 标签：python, django, scrapy

## 问题：

在 Django Dynamic Sc​​raper 中，似乎将抓取的对象类的 scraped_obj_attr 类型设置为 STANDARD(UPDATE) 会导致元素被认为是强制性的，如果蜘蛛无法获取该元素的数据，它将丢弃结果。当我将类型更改为 STANDARD 时，蜘蛛在没有获取该元素时不再丢弃结果。*这是不可取的，因为如果它们*碰巧存在，我希望有更新的可选元素。

## 检查：

我已经确认数据库包含 dynamic_scraper_scraperelem 表中相应行的“强制”列的“f”。Django admin 中的表也没有显示该元素的 Mandatory 复选标记。我还阅读了有关该主题的所有相关文档和问答主题。关于 DDS/我的 Django 安装的其他一切似乎都运行良好。

我深入研究了代码，并在dynamic_scraper.pipelines、ValidationPipeline 类中找到了它。第 5 行似乎是相关的——也许这个“如果”条件被意外地满足了？

```
class ValidationPipeline(object):

    def process_item(self, item, spider):

        url_elem = spider.scraper.get_detail_page_url_elem()
        url_name = url_elem.scraped_obj_attr.name
        if url_name in item and item[url_name][0:6] == 'DOUBLE':
            mandatory_elems = spider.scraper.get_standard_update_elems()
        else:
            mandatory_elems = spider.scraper.get_mandatory_scrape_elems()
        for elem in mandatory_elems:
            if not elem.scraped_obj_attr.name in item or\
                (elem.scraped_obj_attr.name in item and not    item[elem.scraped_obj_attr.name]):
                spider.log("Mandatory elem " + elem.scraped_obj_attr.name + " missing!", log.ERROR)
                raise DropItem()
        ... 
```

## 问题：

这是预期的行为吗？

## 配置：

Ubuntu 12.04.1 32 位，适用于 Python 2.7.3、Postgresql 9.1 和 Supervisor 的系统包。Nginx 是 PPA 的最新稳定版本。蜘蛛正在手动运行以进行测试：“scrapy crawl my_spider -a id=1 -a do_action=yes”。

my_scraper.scraper.settings.py：

```
import sys
import os.path

PROJECT_ROOT = os.path.abspath(os.path.dirname(__file__))
sys.path = sys.path + [os.path.join(PROJECT_ROOT, '../../..'), os.path.join(PROJECT_ROOT, '../..')]

from django.core.management import setup_environ
import mysite.settings
setup_environ(mysite.settings)

BOT_NAME = 'mybot'
BOT_VERSION = '1.0'

SPIDER_MODULES = ['dynamic_scraper.spiders', 'my_scraper.scraper',]
USER_AGENT = '%s/%s' % (BOT_NAME, BOT_VERSION)

ITEM_PIPELINES = [
    'dynamic_scraper.pipelines.DjangoImagesPipeline',
    'dynamic_scraper.pipelines.ValidationPipeline',
    'my_scraper.scraper.pipelines.DjangoWriterPipeline',
]

IMAGES_STORE = os.path.join(PROJECT_ROOT, '../thumbnails')

DSCRAPER_LOG_ENABLED = True
DSCRAPER_LOG_LEVEL = 'INFO'
DSCRAPER_LOG_LIMIT = 5

DOWNLOAD_DELAY = 2
CONCURRENT_SPIDERS = 1 
```

虚拟环境：

```
$ pip freeze
Django==1.4.3
Fabric==1.5.1
PIL==1.1.7
Pillow==1.7.8
Scrapy==0.14.4
South==0.7.6
Twisted==12.3.0
amqp==1.0.6
amqplib==1.0.2
anyjson==0.3.3
argparse==1.2.1
billiard==2.7.3.19
celery==2.5.3
django-appconf==0.5
django-celery==2.5.5
django-dynamic-scraper==0.2.3
django-forms-bootstrap==2.0.3.post1
django-kombu==0.9.4
django-picklefield==0.3.0
django-user-accounts==1.0b7
gevent==0.13.8
greenlet==0.4.0
gunicorn==0.17.1
httplib2==0.7.7
kombu==2.1.8
lxml==3.1beta1
metron==1.0
numpy==1.6.2
oauth2==1.5.211
paramiko==1.9.0
pinax-theme-bootstrap==2.2.2
pinax-theme-bootstrap-account==1.0b2
pinax-utils==1.0b1.dev3
psycopg2==2.4.6
pyOpenSSL==0.13
pycrypto==2.6
python-dateutil==1.5
pytz==2012d
six==1.2.0
w3lib==1.2
wsgiref==0.1.2
zope.interface==4.0.3 
```

# iphone - 使用 NSSortDescriptors，返回数组为空

> ID：14259401
> 
> 赞同：1
> 
> 时间：2013-01-10T13:47:34.387
> 
> 标签：iphone, sorting, nssortdescriptor

借助 StefanB 在[How to sort NSMutableArray using sortedArrayUsingDescriptors 中的回答？](https://stackoverflow.com/questions/1844031/how-to-sort-nsmutablearray-using-sortedarrayusingdescriptors)我非常了解，因此在我的项目中实现了 NSSortDescriptors，我有来自 Facebook Graph 的 Facebook Places 名称、描述、id、long 和 lat。然后使用我的位置和来自 Facebook Places 的经纬度计算距离。并将所有这些保存在字典的数组（placesDataArray）中。

现在的问题是，当试图对这个数组（placesDataArray）进行排序时，返回数组（sortedArray）是否为空？

```
 NSLog(@"PLACES DATA ARRAY ===== > %@", placesDataArray);

    NSSortDescriptor * distanceDescriptor = [[NSSortDescriptor alloc] initWithKey:DISTANCE
                                                                         ascending:YES];

    id obj;
    NSEnumerator * enumerator = [placesDataArray objectEnumerator];
    while ((obj = [enumerator nextObject]));

    NSArray * descriptors =
    [NSArray arrayWithObjects:distanceDescriptor, nil];
    NSArray * sortedArray =
    [placesDataArray sortedArrayUsingDescriptors:descriptors];

    NSLog(@"\nSorted =========================>");

    enumerator = [sortedArray objectEnumerator];
    while ((obj = [enumerator nextObject]));
    NSLog(@"SORTED ARRAY ===========> \n%@", obj); 
```

我的结果是：

```
> 2013-01-10 18:50:40.439 Chat.Points[12091:c07] PLACES DATA ARRAY ===== > (
        {
        category = Hotel;
        distance = "0.109";
        name = "New York Marriott Marquis";
        placeImageString = 20372413613;
    },
        {
        category = Hotel;
        distance = "0.019";
        name = "DoubleTree Suites by Hilton New York City - Times Square";
        placeImageString = 85286252698;
    },
    .
    .
    .
    .
    .
        {
        category = "Local business";
        distance = "0.229";
        name = "Le Pain Quotidien";
        placeImageString = 153110388035573;
    },
        {
        category = "Local business";
        distance = "0.074";
        name = NYSC;
        placeImageString = 144712562228653;
    },
        {
        category = "Local business";
        distance = "0.193";
        name = "The W Hotel";
        placeImageString = 113613138695956;
    },
        {
        category = "Local business";
        distance = "0.015";
        name = "Palace Theatre - Pricilla Queen Of The Desert!";
        placeImageString = 130723233698153;
    },
        {

         category = Hotel;
            distance = "0.033";
            name = "Renaissance New York Times Square Hotel";
            placeImageString = 111789988858447;
        } ) 
2013-01-10 18:50:40.500 Chat.Points[12091:c07]  Sorted =========================> 
2013-01-10 18:50:44.993 Chat.Points[12091:c07] SORTED ARRAY ===========>  
(null) 
```

请参考我上面提供的链接中的问题。非常感谢您的努力。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T14:51:29.630

打印 'sortedArray' 而不是 'obj'

错误-->

```
NSLog(@"SORTED ARRAY ===========> \n%@", obj); 
```

正确-->

```
NSLog(@"SORTED ARRAY ===========> \n%@", sortedArray); 
```

感谢[https://stackoverflow.com/users/1187415/martin-r](https://stackoverflow.com/users/1187415/martin-r)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T15:04:08.763

您对数组进行了正确排序，但在最终输出中打印了错误的对象：

```
NSLog(@"SORTED ARRAY ===========> \n%@", obj); 
```

应该

```
NSLog(@"SORTED ARRAY ===========> \n%@", sortedArray); 
```

# c++ - ios项目的预链接静态库

> ID：14259405
> 
> 赞同：6
> 
> 时间：2013-01-10T13:47:45.653
> 
> 标签：c++, ios, templates, linker, static-libraries

我有一个大的 iOS 项目，它由几个（大约 20-30 个）静态库组成，这些静态库链接在一起成为最终的可执行文件。有些组件是平台无关的（纯 C++），有些是 iOS 特定的（Obj-C/Obj-C++）。C++ 模板被大量使用，因此每个目标文件都包含大量链接模糊的符号。问题是这些符号仅在链接最终可执行文件期间合并，而不是在制作静态库时合并。每个库都包含大量重复的符号（6-60 个克隆）。因此，应用程序的最终链接需要几分钟时间。这在调试和做一些小改动时变得非常烦人。

有没有办法为每个库执行具有模糊链接的符号合并？

我知道，这是在使用动态库时自动完成的。通过一些黑客攻击 (http://sumgroup.wikispaces.com/iPhone_Dynamic_Library) 可以为 iOS 构建动态库。有没有办法静态链接dylib（将它们链接到一个可执行文件中）？

当然，能够调试生成的应用程序是必须的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-02-06T12:10:48.680

您可以将静态库对象预链接到一个中，也可以将其他静态库预链接到一个中。它实际上会将对象与链接器链接（几乎就像在动态库中一样）。

1.  在您的单个库（主要库）中，转到构建设置并`Perform Single-Object Prelink`在链接部分中找到。将其切换为是
2.  在 Prelink 库中，您可以指定要包含的其他库。在那里，您不仅需要输入名称，还需要输入完整的文件名。如果其他库也来自您的项目，那么您可以使用`$(CONFIGURATION_BUILD_DIR)`变量。因此，如果您有库 foo，那么它将是`$(CONFIGURATION_BUILD_DIR)/libfoo.a`
3.  您可以在 Single-Object Prelink Flags 中添加其他标志
4.  如果要去除本地符号，请确保将部署后处理设置为是，因为默认情况下不会去除静态库。

# css - css图片背景定位

> ID：14259422
> 
> 赞同：2
> 
> 时间：2013-01-10T13:48:41.950
> 
> 标签：css, list, styling

我正在努力应对 CSS 挑战。我有一个带有箭头符号的列表。我希望箭头子弹在第一行对齐。这个箭头子弹是通过背景图像设置的，如下所示：

```
.linklist a { 
  display: block; 
  padding: 0 0 0 8px; 
  background: transparent url("../images/css/arrow-left.png") no-repeat 0; 
  text-decoration: none; 
  outline: none; } 
```

结果是：

![在此处输入图像描述](../Images/0f28b8c01a1918cdd218d0a2965ba033.png)

当我删除 display: block 时，它会在第一行显示箭头子弹，就像我想要的那样。但是现在，第二行缩进了。我想要两条线之间的垂直对齐和第一行对齐的箭头子弹。有什么我忽略了如何设计这个吗？

![在此处输入图像描述](../Images/2fc00d710133d3da5f49b70d48eee811.png)

希望有人能帮助我吗？

亲切的问候。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T13:51:35.827

CSS

```
background-position: left top; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:51:57.387

尝试类似：

```
background: transparent url("../images/css/arrow-left.png") 0 -4px no-repeat; 
```

作为`0`左边的背景位置和`-4px`顶部的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:52:51.803

您需要使用背景位置：

```
.linklist a { 
  display: block; 
  padding: 0 0 0 8px; 
  background: transparent url("../images/css/arrow-left.png") no-repeat 0; 
  text-decoration: none; 
  outline: none;
  /*new*/
  background-position: 15px 20px
 } 
```

# php - PHP 在 3 个帖子记录后创建新行

> ID：14259426
> 
> 赞同：0
> 
> 时间：2013-01-10T13:48:47.757
> 
> 标签：php, foreach, split

我正在尝试在数据库中的每组 3 条记录之后创建一个新的表行或新的中断。

我已经包含了部分代码：

```
<?php foreach ($payment_methods as $payment_method) {?>
    <?php if ($payment_method['code'] == $code || !$code) { ?>

        <?php $code = $payment_method['code']; ?>
        <input type="radio" name="payment_method" value="<?php echo $payment_method['code']; ?>" id="<?php echo $payment_method['code']; ?>"/>
    <?php } ?>
    <label for="<?php echo $payment_method['code']; ?>"><?php echo $payment_method['title']; ?></label>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:58:56.900

我希望我能得到你的问题。我认为您在 foreach 的每三个循环后要求换行。

这是一个如何做到这一点的示例：

```
<?php $i=0;?>
<?php foreach ($payment_methods as $payment_method):?>
    <?php if($i++ % 3 == 0){echo "<br>";} /* replace br with tr tags if you want*/ ?>
    <?php if ($payment_method['code'] == $code || !$code): ?>
        <?php $code = $payment_method['code']; ?>
        <input type="radio" name="payment_method" value="<?php echo $payment_method['code']; ?>" id="<?php echo $payment_method['code']; ?>"/>
    <?php endif; ?>
        <label for="<?php echo $payment_method['code']; ?>"><?php echo $payment_method['title']; ?></label>
<?php endforeach; ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:59:14.673

```
for($i = 0; $i < count($payment_methods); $i++) {
  // line break after 3 records
  if($i != 0 && $i % 3 == 0)
    echo '<br />';

  if ($payment_methods[$i]['code'] == $code || !$code) {
    $code = $payment_methods[$i]['code'];
    echo '<input type="radio" name="payment_method" value="', $payment_methods[$i]['code'], '" id="', $payment_methods[$i]['code'], '" />';
  }
    echo '<label for="', $payment_methods[$i]['code'], '">', $payment_methods[$i]['title'], '</label>';
} 
```

# android - 我们可以比较 uiautomatorviewer 获取的两个转储文件（xml）吗

> ID：14259430
> 
> 赞同：2
> 
> 时间：2013-01-10T13:48:58.383
> 
> 标签：android, ui-automation, ui-testing

我正在使用 Android API Level 17 的 uiautomatorviewer 工具，所以我想比较两个由 uiautomatorviewer 工具获取的用于 UI 测试的转储文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-17T14:46:28.933

最简单的解决方案是打开两个不同的 uiautomatorviewer。您始终可以将 UIXML 保存到本地文件并比较 2 个保存的 UI。

# ruby-on-rails - 应用程序在开发环境中运行时未初始化的常量 VCR

> ID：14259431
> 
> 赞同：1
> 
> 时间：2013-01-10T13:49:04.940
> 
> 标签：ruby-on-rails, ruby, vcr

我正在使用 VCR 来加快我在 rails 应用程序中的测试，它在测试环境中就像一个魅力

但是，当我在开发环境中实际浏览该站点*时*，当我到达

```
VCR.use_cassette("name") do 
  # http request
end 
```

我可以通过在我的 config/application.rb 中要求 VCR 来解决这个问题

```
require 'vcr' 
```

但这感觉不是正确的解决方案......

这不会强制应用程序在我所有的 RAILS_ENV 中使用磁带吗？

我只想在我的测试环境中使用我的 VCR 磁带，而不是在我的应用程序运行的任何其他环境中。

什么是最好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:09:41.203

VCR 旨在仅用于您的测试环境（当然，您可以在任何类型的程序中使用它，因为它不以任何方式与测试框架耦合）。如果您按预期使用 VCR，您应该只引用`VCR`测试环境中加载的文件中的常量。`VCR`如果您在另一个引用该常量的环境中加载文件，您只会收到此错误。

# python - PyQt - Window().show() 失败但 var = Window(); var.show() 有效吗？

> ID：14259433
> 
> 赞同：2
> 
> 时间：2013-01-10T13:49:08.717
> 
> 标签：python, constructor, pyqt, variable-assignment

当我发现一些我根本不理解的东西时，这是我正在搞乱的一些示例代码。

这段代码似乎工作

```
from PyQt4 import QtGui, QtCore
import sys

class Window(QtGui.QWidget):
    def __init__(self):
        pass

ap = QtGui.QApplication(sys.argv)
var = Window()
var.show()
sys.exit(ap.exec_()) 
```

但这会导致窗口出现而不是快速连续消失。（第二条底线改变）

```
from PyQt4 import QtGui, QtCore
import sys

class Window(QtGui.QWidget):
    def __init__(self):
        pass

ap = QtGui.QApplication(sys.argv)
Window().show()
sys.exit(ap.exec_()) 
```

我根本无法理解为什么。在我对 python 和 Qt 的所有理解中，我无法理解为什么底部会失败。是垃圾收集还是什么？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:03:49.393

在第二个版本中，您不保留对`Window`实例的引用，因此 Python 将在执行该行代码后销毁它。在第一个版本中，您`var`通过代码块保留参考。最重要的是，`var`在您调用时存在`ap.exec_()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T20:09:03.377

它有效，但不是写`pass`in `__init__()`，而是这样写：

```
super(Window, self).__init__() 
```

你的`__init__()`函数是空的。

这是完整的代码：

```
from PyQt4 import QtGui
import sys

class Window(QtGui.QWidget):
    def __init__(self):
        super(Window, self).__init__()

ap = QtGui.QApplication(sys.argv)
var = Window()
var.show()
sys.exit(ap.exec_()) 
```

我用 PySide 测试了这个，也应该在 PyQt 上工作。

# java - JTable 不显示表头

> ID：14259438
> 
> 赞同：2
> 
> 时间：2013-01-10T13:49:28.280
> 
> 标签：java, database, swing, user-interface, jtable

我的目标是使用 JTable 显示数据库中的数据。

参考代码来自：[从 ResultSet 填充 JTable 的最简单代码](https://stackoverflow.com/questions/10620448/most-simple-code-to-populate-jtable-from-resultset)

我修改了代码以适应我的情况。我有一个具有以下方法的类 TopicData：

```
public DefaultTableModel buildTableModel(){
    //open connection
    ResultSet rs = null;
    Vector<String> columnNames = new Vector<String>();
    Vector<Vector<Object>> data = new Vector<Vector<Object>>();
    int columnCount = 0;
    DBController db = new DBController();
    db.setUp("myDatabase");
    String dbQuery = "SELECT topicName, topicDate, topicCategory, topicUser FROM topicTable ORDER BY topicDate";

    rs = db.readRequest(dbQuery);
    try{    
        ResultSetMetaData metaData = rs.getMetaData();

        // names of columns
        columnCount = metaData.getColumnCount();
        for (int column = 1; column <= columnCount; column++) {
            columnNames.add(metaData.getColumnName(column));

        }
        // data of the table 
        while (rs.next()) {
            Vector<Object> vector = new Vector<Object>();
            for (int columnIndex = 1; columnIndex <= columnCount; columnIndex++) {
                vector.add(rs.getObject(columnIndex));
            }
            data.add(vector);
        }
    } 
    catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //close connection 
    db.terminate();

    return new DefaultTableModel(data, columnNames);

} 
```

在另一个类 TopicView 中：

```
private JTable getTable() {
    if (table == null) {
        TopicData topic= new TopicData();
        table = new JTable(topic.buildTableModel());
        table.setShowGrid(false);
        table.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        table.setBounds(95, 59, 625, 357);
    }
    return table;
} 
```

我意识到我的表格在每列的顶部没有标题。 [http://i.stack.imgur.com/FcnHb.png](https://i.stack.imgur.com/FcnHb.png)

因此，我简化了我的 TopicData 以进行故障排除：

```
public DefaultTableModel testTableModel(){
    Vector<String> columnNames = new Vector<String>();
    columnNames.add("test1");
    columnNames.add("test1");
    columnNames.add("test1");
    Vector<Vector<Object>> data = new Vector<Vector<Object>>();
    Vector<Object>vector = new Vector<Object>();
    vector.add("test2");
    vector.add("test2");
    vector.add("test2");
    data.add(vector);

    return new DefaultTableModel(data, columnNames);
} 
```

再一次，该表没有标题。“test1”这个词没有出现在表格的任何地方，而“test2”显示了3列。

我对此感到非常困惑，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T13:50:54.950

*   放到, [`JTable`](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html)_[`JScrollPane`](http://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)

*   否则必须更改[`LayoutManager`为`BorderLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)for 容器，然后放入`JTable`,`CENTER area`和`getTableHeader`from并`JTable`放入/`JTableHeader``NORTH``SOUTH`

*   正确的方法是使用`JScrollPane`

编辑

> 如何使表格中的字段不可编辑？现在，如果我双击，我可以编辑单元格的内容

覆盖两个方法`DefaultTableModel`，伪代码

```
model = new DefaultTableModel(data, columnNames) {

    private static final long serialVersionUID = 1L;

    @Override
    public Class getColumnClass(int column) {
        return getValueAt(0, column).getClass();
    }

    @Override
    public boolean isCellEditable(int row, int column) {
        return false;
    }
};
table = new JTable(model); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:09:54.527

把你的桌子放在`JScrollPane`.

例子：

```
container.add(new JScrollPane(table)); 
```

或者您可以通过直接添加到容器来做到这一点（如[javadoc](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#show)中所述）

```
container.setLayout(new BorderLayout());
container.add(table.getTableHeader(), BorderLayout.PAGE_START);
container.add(table, BorderLayout.CENTER); 
```

关于如何使单元格不可编辑的问题是，

覆盖 isCellEditable(..) 在您的`TableModel`

```
@Override
public boolean isCellEditable(int rowIndex, int colIndex) {
    // return false for not making it editable.
     return false; 

} 
```

# hibernate - hibernate-search、空间查询和新的 lucene 空间模块

> ID：14259440
> 
> 赞同：1
> 
> 时间：2013-01-10T13:49:36.877
> 
> 标签：hibernate, solr, lucene, spatial, hibernate-search

我想在 Hibernate 中执行空间搜索。特别是，我想存储一些具有纬度/经度的项目，然后查询哪些项目在给定点的 x 公里范围内。

我发现[休眠搜索](https://github.com/hibernate/hibernate-search)通过它的 Lucene 集成提供[对空间查询的支持。](http://docs.jboss.org/hibernate/search/4.2/reference/en-US/html/spatial.html)

我也知道 Lucene 中的空间模块已经在 Lucene 4.0 版中[完全重写](https://issues.apache.org/jira/browse/LUCENE-3795)，但最新版本的[hibernate-search](https://github.com/hibernate/hibernate-search)使用的是 Lucene 的 Lucene 3.6.2。

所以，我有几个问题：

1.  hibernate-search 中的空间支持是否使用现已弃用的 lucene 空间模块？
2.  或者休眠搜索是否使用来自 solr 的空间模块？
3.  重写 lucene spatial 的原因之一是因为它不可靠/有问题。这是否意味着休眠搜索中的空间查询不可靠？
4.  hibernate-search 会在未来的版本中更改以支持新的 lucene-spatial 模块吗？（基于[spatial4j](https://github.com/spatial4j/spatial4j)）
5.  假设 hibernate-search 将来会升级到 Lucene 4+，那么新版本中的空间查询是否可能向后兼容当前的 hibernate-search API？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T23:58:51.327

1.  不，不是，我们很幸运地让一位地理定位领域专家加入团队，原因与您相同：Nicolas 想避免在 Lucene 中使用空间模块，因为它存在问题。

2.  不，它是一组自定义的 Lucene 组件；Hibernate Search 的嵌入式特性使我们的要求非常简单，至少在 Lucene 集成方面（距离数学仍然很有趣）。

3.  从原始模块的灵感和动机到创建新扩展的限制，所以我相信不是，假设它与我们谈论的已知限制相同。

4.  很有可能，我们此时的重点是提供一个合理实用的 API；有了今天介绍的相对简单的功能，我们可能不需要急于使用它，但我们并不排除集成它。Hibernate ORM 也计划对 Spatial 类型提供更好的支持，因此我们可能希望集成自定义类型：欢迎提供帮助和建议，即使只是在用例或愿望形式中。

5.  我们过去一直为我们的 API 稳定性感到非常自豪，并将努力保持这一记录。我们肯定会升级到 Lucene 4+，但这可能会破坏一些 API（不一定与 Spatial 相关）。我们将努力将更改保持在最低限度。这是还没有暴露太多的原因之一：确保我们保持实施的灵活性，至少现在我们正在为升级做准备。

# postgresql - 用于查询的原始 SQL

> ID：14259441
> 
> 赞同：0
> 
> 时间：2013-01-10T13:49:37.030
> 
> 标签：postgresql, join

我正在尝试使用原始 SQL 查询我的数据库。我想在某个领域获得类似的对象。我还想为某个字段查询这些对象的位置关系。这是我到目前为止的 SQL：

```
Center.find_by_sql("SELECT * FROM Centers WHERE name ILIKE '%" + query + "%'
                    AND status = 1"); 
```

一个中心有一个位置关系，我也想查询位置字段。Location.country = 什么？我使用的数据库是 PostgreSQL 数据库，我使用 Datamapper 作为 ORM。我使用 datamapper 进行了此查询设置，但结果并不好。谁能帮我扩展这个查询以包括对`Center.location`国家字段的查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:58:01.557

你能展示一个有问题的数据库的简要模型吗？

我会从“一个中心有一个位置关系，我也想查询位置字段。Location.country = something”假设还有另一个你想要**加入**的表。

您的查询应该定义要返回的列（将星号替换为列标题，并可能在它们前面加上表名。）

在此处查看有关联接的更多信息。

[http://www.w3schools.com/sql/sql_join.asp](http://www.w3schools.com/sql/sql_join.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:59:49.667

您需要在每个表中都有一个字段，以便 SQL 知道如何连接正确的记录。我将在示例中使用 .ID，但这需要更改为可以连接两个表的任何字段（ID、SSN、TIN、ACCT 等）。

您应该将 .* 换成您需要的实际列，例如 `SELECT Centers.name, Centers.status, Location.country`

```
SELECT Centers.*, Location.country
  FROM Centers
  INNER JOIN Location
  ON Centers.ID = Location.ID
  WHERE Centers.name LIKE '%query%'
  AND Centers.status = 1
  AND Location.country LIKE '%something%'
; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:59:50.127

你会为此而[`JOIN`](http://www.postgresql.org/docs/current/interactive/sql-select.html#SQL-FROM)表。`location``centers`

```
SELECT c.*
FROM   centers  c
JOIN   location l ON l.location_id = c.location_id
WHERE  c.name ILIKE '%query%'
AND    c.status = 1
AND    l.country = 'something' 
```

假设您在 和 之间有 1:n 关系`location`，`centers`这是使用外键列实现的`location_id`。

使用准备好的语句来避免 SQL 注入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T14:03:50.213

这个查询应该这样做：

```
SELECT *
FROM Centersc c
JOIN Locations l ON l.id = c.location_id
WHERE c.name ILIKE ?
AND c.status = 1
AND l.country = ? 
```

请注意，我已从答案中删除了所有应用程序代码，因为这只是一个 SQL 问题。

# ios - 应用程序接收到的信号 SIGABRT

> ID：14259442
> 
> 赞同：-5
> 
> 时间：2013-01-10T13:49:38.157
> 
> 标签：ios

```
Application received signal SIGABRT
  (null)
  (
        0   CoreFoundation                      0x36faa8d7 __exceptionPreprocess + 186
        1   libobjc.A.dylib                     0x316781e5 objc_exception_throw + 32
        2   CoreFoundation                      0x36faa7b9 +[NSException raise:format:] + 0
        3   CoreFoundation                      0x36faa7db +[NSException raise:format:] + 34
        4   ktv                                 0x1731f1 _ZNSt11_Deque_baseIsSaIsEE15_M_create_nodesEPPsS3_ + 1411812
        5   libsystem_c.dylib                   0x31c6652f _sigtramp + 38
        6   libsystem_c.dylib                   0x31c5bf5b pthread_kill + 54
        7   libsystem_c.dylib                   0x31c54feb abort + 94
        8   libc++abi.dylib                     0x3492ef6b abort_message + 46
        9   libc++abi.dylib                     0x3492c3f1 _ZL19safe_handler_callerPFvvE + 120
        10  libc++abi.dylib                     0x3492c451 _ZdlPv + 0
        11  libc++abi.dylib                     0x3492d825 __cxa_current_exception_type + 0
        12  libobjc.A.dylib                     0x31678235 objc_exception_rethrow + 12
        13  CoreFoundation                      0x36f00545 CFRunLoopRunSpecific + 404
        14  CoreFoundation                      0x36f003a5 CFRunLoopRunInMode + 104
        15  GraphicsServices                    0x310b6fcd GSEventRunModal + 156
        16  UIKit                               0x32572743 UIApplicationMain + 1090
        17  ktv                                 0xaaa7 _mh_execute_header + 39591
        18  ktv                                 0x37b8 _mh_execute_header + 10168
  ) 
```

有谁知道这个崩溃？这是我的应用程序中最崩溃的一次，但我不知道是什么原因造成的。任何帮助都是感谢的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:04:31.560

对于您提供的信息，这里的任何人都无话可说。

您将需要“符号化”崩溃日志（拖放到 Xcode 中的管理器中）。这会将日志中的地址转换为代码中的文件和行号。从那里你将能够看到你在哪里得到异常，并希望找出原因。

# c# - 位置跟踪窗口 8

> ID：14259446
> 
> 赞同：0
> 
> 时间：2013-01-10T13:49:40.590
> 
> 标签：c#, windows-8, background, gps, location

我正在开发一个提醒，它也支持基于位置的提醒（例如，当你靠近你的房子时，它会告诉你关闭闹钟）..

我需要该应用程序检查一次位置，让我们说每 2 分钟一次（因此它不会过多地消耗电池）。

我应该使用什么技术？我在考虑 toast 通知，但这是为了提醒用户他正在接近该位置，但是即使应用程序没有运行，也需要一个后台任务来检查位置？

除了我应该考虑的后台任务之外，还有其他技术吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T05:30:33.540

既然你似乎是新人，我会给你一些好消息：

**第一，频率。**

可以根据时间触发 Windows 8 后台任务。但是，支持的最短时间为 15 分钟。这意味着您的后台计时器无法以低于 15 分钟的频率更新任何内容。

尽管支持更短的时间，并且尽管您的后台任务将在该设置时间执行，但任何设置低于 15 分钟的时间都不会重复。这是一次运行完成的操作。对于不了解 15 分钟规则的开发人员来说，这是一个常见的问题。

您可能想阅读以下内容：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9622daff-4cf7-4cb9-9f78-251ac4287cde](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/9622daff-4cf7-4cb9-9f78-251ac4287cde)

**二、首次使用、认可**

> > 开始使用设备的第一次调用必须在 UI 线程上进行，以便可以向用户显示同意提示。如果无法显示同意提示，则用户无法授予设备访问应用程序的权限。

引用：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh768223.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh768223.aspx)

**第三，背景行为（只是让你知道）**

读这个：

> > 如果适用于 Windows 8 的 Windows 应用商店应用没有焦点，则它在后台挂起时不会接收位置更新事件。如果您的应用程序通过记录位置更新来跟踪它们，请注意这一点。当应用重新获得焦点时，它只接收新事件。它没有得到任何在它处于非活动状态时发生的更新。

引用：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh465148.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465148.aspx)

更多后台任务信息： http: [//go.microsoft.com/fwlink/ ?LinkID=227329&clcid=0x409](http://go.microsoft.com/fwlink/?LinkID=227329&clcid=0x409)

在这里：[http ://blog.jerrynixon.com/2012/08/windows-8-scheduled-tasks-lock-screen.html](http://blog.jerrynixon.com/2012/08/windows-8-scheduled-tasks-lock-screen.html)

# php - 找不到类“Zend_Controller_Action”

> ID：14259447
> 
> 赞同：0
> 
> 时间：2013-01-10T13:49:42.027
> 
> 标签：php, zend-framework

我正在尝试将工作作为本地项目。我是通过 svn 得到的，以前我从来没有处理过它。

尝试触发 indexController 时出现此错误：

```
Fatal error: Class 'Zend_Controller_Action' not found 
```

所有的图书馆似乎都在我的项目中。有谁知道这是从哪里来的？

提前致谢

我的引导它有帮助：

```
<?php
/**
 * Init application directory
 */
defined('APPLICATION_PATH')
    || define('APPLICATION_PATH', realpath(__DIR__ . '/../applications/' . APPLICATION_NAME . '/'));
defined('PROJECT_PATH')
    || define('PROJECT_PATH', realpath(__DIR__ . '/..'));
defined('APPLICATION_ENV')
    || define('APPLICATION_ENV', (getenv('APPLICATION_ENV') ? getenv('APPLICATION_ENV') : 'development'));

/**
 * Init error
 */
ini_set("display_errors", 1);
ini_set("display_startup_errors", 1);
error_reporting(E_ALL);

/**
 * Set libraries include path
 */
set_include_path(implode(PATH_SEPARATOR, array(
    APPLICATION_PATH . DIRECTORY_SEPARATOR . 'services',
    PROJECT_PATH . DIRECTORY_SEPARATOR . 'inline',
    PROJECT_PATH . DIRECTORY_SEPARATOR . 'library',
    PROJECT_PATH . DIRECTORY_SEPARATOR . 'library' . DIRECTORY_SEPARATOR . 'Doctrine',
    PROJECT_PATH . DIRECTORY_SEPARATOR . 'library' . DIRECTORY_SEPARATOR . 'Doctrine' . DIRECTORY_SEPARATOR . 'Doctrine',
    PROJECT_PATH . DIRECTORY_SEPARATOR . 'library' . DIRECTORY_SEPARATOR . 'Doctrine' . DIRECTORY_SEPARATOR . 'extension' . DIRECTORY_SEPARATOR . 'Sortable' . DIRECTORY_SEPARATOR . 'lib',
    PROJECT_PATH . DIRECTORY_SEPARATOR . 'library' . DIRECTORY_SEPARATOR . 'Doctrine' . DIRECTORY_SEPARATOR . 'vendor' . DIRECTORY_SEPARATOR . 'sfYaml',
    APPLICATION_PATH . DIRECTORY_SEPARATOR . 'models',
    APPLICATION_PATH . DIRECTORY_SEPARATOR . 'models' . DIRECTORY_SEPARATOR . 'amf',
    APPLICATION_PATH . DIRECTORY_SEPARATOR . 'controllers',
    APPLICATION_PATH . DIRECTORY_SEPARATOR . 'models' . DIRECTORY_SEPARATOR . 'doctrine',
    APPLICATION_PATH . DIRECTORY_SEPARATOR . 'models' . DIRECTORY_SEPARATOR . 'doctrine' . DIRECTORY_SEPARATOR . 'data',
    get_include_path(),
)));

/**
 * Zend application
 */
require_once 'Zend' . DIRECTORY_SEPARATOR . 'Loader' . DIRECTORY_SEPARATOR . 'Autoloader.php';
Zend_Loader_Autoloader::getInstance()->setFallbackAutoloader(true);

/**
 * Config
 */
global $config;
$config = new Zend_Config_Ini(APPLICATION_PATH . DIRECTORY_SEPARATOR . 'configs' . DIRECTORY_SEPARATOR . 'application.ini', APPLICATION_ENV);
date_default_timezone_set('Europe/Paris');

/**
 * Doctrine
 */
$dsn="mysql:dbname=" . $config->resources->db->dbname . ";host=" . $config->resources->db->host;
Doctrine::setExtensionsPath(PROJECT_PATH . DIRECTORY_SEPARATOR . 'library' . DIRECTORY_SEPARATOR . 'Doctrine' . DIRECTORY_SEPARATOR . 'extension');
$manager = Doctrine_Manager::getInstance();
$manager->registerExtension('Sortable',PROJECT_PATH . DIRECTORY_SEPARATOR . 'library' . DIRECTORY_SEPARATOR . 'Doctrine' . DIRECTORY_SEPARATOR . 'extension' . DIRECTORY_SEPARATOR . 'Sortable' . DIRECTORY_SEPARATOR . 'lib' . DIRECTORY_SEPARATOR . 'Doctrine' . DIRECTORY_SEPARATOR . 'Template');
$dbh = new PDO($dsn, $config->resources->db->username, $config->resources->db->password);
$conn = Doctrine_Manager::connection($dbh,'portail');
$conn->setOption('username', $config->resources->db->username);
$conn->setOption('password', $config->resources->db->password);
$conn->setCharset("utf8");
$conn->setCollate('utf8_general_ci');
$conn->setAttribute(Doctrine::ATTR_USE_NATIVE_ENUM, true);

$layout = new Zend_Layout();
$layout->setLayoutPath('/layouts/scripts/');

/**
 * Router
 */
$front = Zend_Controller_Front::getInstance();
$router = $front->getRouter(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:11:42.580

您在评论中包含的错误消息显示了 include_path of `.;C:\php\pear`，其中不包括您的应用程序的“库”文件夹，或者您在问题中包含的引导程序中添加的任何其他路径。所以要么这个引导程序没有运行，要么它在你的应用程序的其他地方被覆盖。

# java - 在 Swing 应用程序中集成 Java 的 Oracle 帮助

> ID：14259450
> 
> 赞同：2
> 
> 时间：2013-01-10T13:49:45.757
> 
> 标签：java, swing, javahelp

我想在我的 Java Swing 应用程序中集成 Oracle Help for Java (ohj) 以在我的自定义窗口中显示其组件。有任何想法吗？我认为网络上没有源代码。

# jquery - 如何使完美的砌体居中？（同位素）

> ID：14259451
> 
> 赞同：5
> 
> 时间：2013-01-10T13:49:47.637
> 
> 标签：jquery, jquery-masonry, jquery-isotope

使用同位素与[zonear 扩展的完美砌体](https://github.com/zonear/isotope-perfectmasonry)

到目前为止，它看起来运行良好，我想知道的是是否有人知道如何将容器居中。尝试使用 css 没有运气。原始同位素[已居中砌体](http://isotope.metafizzy.co/v1/custom-layout-modes/centered-masonry.html)

任何人？谢谢

**>> 更新 <<**

新同位素 (v2) 已经发布，它使用[名为 packery](http://isotope.metafizzy.co/layout-modes/packery.html)的布局模式完成了“完美的砌体”位。此外，新的同位素版本[确实中心石工/同位素](http://isotope.metafizzy.co/layout-modes/masonry.html#isfitwidth)。但我实际上并没有使用`fitWidth`，因为我只是在顶部使用[引导程序](http://getbootstrap.com/)和同位素来在布局开始时获得居中的砌体（过滤后不居中，用于该用途`fitWidth`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-14T09:24:04.963

很高兴听到您找到了扩展程序。:) 目前，使其居中的唯一方法是在容器上设置特定宽度。当然，如果您希望您的设计具有响应性（为什么不这样做），作为纯 CSS 解决方案，这是不可行的。

对于响应式布局，您需要“手动”进行 - 将调整大小触发器绑定到窗口，并在每次调整大小时，计算容器需要的宽度（知道您的平铺宽度）。当我有时间时，我会在某个时候将此功能融入到扩展中。希望这可以帮助。:)

* * *

编辑：perfectMasonry 现在支持通过纯 CSS 使布局居中，因为它现在可以指定宽度。因此，容器 CSS 的简单边距自动应该可以解决问题。像这样。

```
#container {
    margin: auto;
} 
```

# eclipse - 如何将 Eclipse 中的“-D”参数传递给我的 weblogic 服务器

> ID：14259452
> 
> 赞同：3
> 
> 时间：2013-01-10T13:49:48.267
> 
> 标签：eclipse, weblogic11g

我正在 ubuntu 上的 Eclipse 上开发并部署在 weblogic 上。我正在使用 System.getProperty("key") 获取系统属性值...如何将 Eclipse 中的“-Dxxx=yyy”参数传递给我的 weblogic 服务器。

在运行-> 运行配置中，我没有 weblogic 服务器的“参数”选项卡

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-11T13:29:28.507

我找到了解决方案：

菜单：`Run > Run configurations > environment tab`
添加： `JAVA_OPTIONS variable with arguments "-Dxxx=yyy -Daaa=bbb"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:57:45.520

我假设您已将服务器添加到 Eclipse 中的 Servers-View。如果是这样，您可以双击服务器以打开配置。标题下方`General Information`应该是一个名为 的按钮`Open launch configuration`。当您单击此按钮时，应打开一个新窗口。在此窗口内导航到名为`Arguments`. 在那里您应该能够配置服务器参数。

这至少对我来说适用于 Tomcat。我认为它应该与 weblogic 以相同的方式工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-02T13:36:53.403

我的解决方案是：在文件 ../user_projects/domains/mydomain/bin/startWebLogic.sh 中，我在 SAVE_JAVA_OPTIONS="${JAVA_OPTIONS}" 行中添加了文本 -Dxxx=yyy，因此结果是 --> SAVE_JAVA_OPTIONS ="${JAVA_OPTIONS} -Dxxx=yyy"。

# c# - 节省内存的 IList 执行

> ID：14259462
> 
> 赞同：0
> 
> 时间：2013-01-10T13:50:14.617
> 
> 标签：c#, .net, list, sockets, collections

我需要在我的套接字应用程序中接收到的字节的集合类型（它处理约 5k 的并发连接）。

我尝试使用 a`List<byte>`但由于它有一个内部数组并且我收到大量数据，它可能会导致`OutOfMemoryException`s.

所以我需要一个集合，

*   将数据保存在较小的块中；像[展开的链接列表](http://en.wikipedia.org/wiki/Unrolled_linked_list "维基百科 |  展开的链表")。
*   提供快速查找（最好是`IList<T>`），因为我会在每次接收操作后寻找一个标记消息结束的分隔符。

我现在使用的是`Stream`. 我`MemoryStream`为不涉及太多数据的操作提供一个，为涉及大量数据`FileStream`的操作提供一个临时文件。

`MemoryStream`与 a 没有什么不同`List<T>`，但我不喜欢将文件用作缓冲区。

那么......
你推荐什么收藏或方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:55:46.910

您似乎为网络应用程序使用了不合适的架构。您应该只缓冲那些需要的数据。在这里，您使用列表来缓冲数据，直到收到所需的数据量。

我建议您应该检查数据本身中每个数据接收的分隔符，如果存在，您应该只推送数据，直到遇到分隔符。数据准备好后，您应该从列表中取出并使用它并从列表中丢弃。将所有内容添加到列表中并不是一个好方法，并且肯定会消耗大量内存。

理想情况下，您应该有一个协议，该协议始终在您实际接收数据之前通知您将要接收的数据长度。这样，您可以确保已收到所需的数据，并且您不应该依赖分隔符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:34:26.200

一个可能的快速而肮脏的解决方案：

在程序开始时，为您将接收的最大数据量分配一个足够大的缓冲区。使用单独的“计数”字段来跟踪当前正在使用的数据量。

（我不太喜欢这个解决方案；我会使用文件或找到某种方法来处理块中的数据，但它可能对你有用）。

# delphi - 使用 Thunderbird 从 Delphi 发送邮件

> ID：14259464
> 
> 赞同：1
> 
> 时间：2013-01-10T13:50:25.377
> 
> 标签：delphi, email, thunderbird

我处于需要使用 Thunderbird 和 Delphi XE3 发送带有附件的电子邮件的情况，我不知道从哪里开始，所以我想问是否有人有指向我可能找到信息的网站的链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T14:36:14.507

从文档中，您可以使用 Thunderbird 的[命令行选项](https://developer.mozilla.org/en-US/docs/Mozilla/Command_Line_Options?redirectlocale=en-US&redirectslug=Command_Line_Options)，所以我认为使用[ShellExecute](http://delphi.about.com/od/windowsshellapi/a/executeprogram.htm)应该可以。我没有试过这个。

```
ShellExecute(Handle, 'path\to\thunderbird.exe',
    '-compose "to=foo@nowhere.net,attachment=''file:///c:/test.txt''", 
    nil, SW_SHOWNORMAL); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T18:35:01.637

以下代码基于这两篇文章：

*   [Dateien von der eigenen Anwendung per Drag and Drop zum Windows Explorer kopieren?](http://www.swissdelphicenter.ch/de/showcode.php?id=2335)

*   [以编程方式使用 SendTo 邮件收件人快捷方式](http://www.codeproject.com/KB/shell/sendtomail.aspx)

脚步：

在窗体上拖放一个 FileListBox 和一个按钮，并将 FileListBox MultiSelect 属性设置为 true。使用此代码将文件列表框中的选定条目传递给默认邮件应用程序。

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, FileCtrl;

type
  TForm1 = class(TForm)
    FileListBox1: TFileListBox;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  end;

var
  Form1: TForm1;

implementation

uses
  ActiveX, ShlObj, ComObj;

{$R *.dfm}

function GetFileListDataObject(const Directory: string; Files:
  TStrings):
  IDataObject;
type
  PArrayOfPItemIDList = ^TArrayOfPItemIDList;
  TArrayOfPItemIDList = array[0..0] of PItemIDList;
var
  Malloc: IMalloc;
  Root: IShellFolder;
  FolderPidl: PItemIDList;
  Folder: IShellFolder;
  p: PArrayOfPItemIDList;
  chEaten: ULONG;
  dwAttributes: ULONG;
  FileCount: Integer;
  i: Integer;
begin
  Result := nil;
  if Files.Count = 0 then
    Exit;
  OleCheck(SHGetMalloc(Malloc));
  OleCheck(SHGetDesktopFolder(Root));
  OleCheck(Root.ParseDisplayName(0, nil,
    PWideChar(WideString(Directory)),
    chEaten, FolderPidl, dwAttributes));
  try
    OleCheck(Root.BindToObject(FolderPidl, nil, IShellFolder,
      Pointer(Folder)));
    FileCount := Files.Count;
    p := AllocMem(SizeOf(PItemIDList) * FileCount);
    try
      for i := 0 to FileCount - 1 do
      begin
        OleCheck(Folder.ParseDisplayName(0, nil,
          PWideChar(WideString(Files[i])), chEaten, p^[i],
          dwAttributes));
      end;
      OleCheck(Folder.GetUIObjectOf(0, FileCount, p^[0], IDataObject,
        nil,
        Pointer(Result)));
    finally
      for i := 0 to FileCount - 1 do
      begin
        if p^[i] &lt;&gt; nil then
          Malloc.Free(p^[i]);
      end;
      FreeMem(p);
    end;
  finally
    Malloc.Free(FolderPidl);
  end;
end;

procedure TForm1.Button1Click(Sender: TObject);
var
  SelFileList: TStrings;
  I: Integer;
  DataObject: IDataObject;
  Effect: Integer;
  CLSID_SendMail: TGUID;
  DT: IDropTarget;
  P: TPoint;
begin
  CLSID_SendMail := StringToGUID('{9E56BE60-C50F-11CF-9A2C-00A0C90A90CE}');

  with FileListBox1 do
  begin
    SelFileList := TStringList.Create;
    try
      SelFileList.Capacity := SelCount;
      for i := 0 to FileListBox1.Items.Count - 1 do
        if Selected[i] then
          SelFileList.Add(Items[i]);
      DataObject := GetFileListDataObject(Directory, SelFileList);
    finally
      SelFileList.Free;
    end;
    Effect := DROPEFFECT_NONE;
    CoCreateInstance(CLSID_SendMail, nil, CLSCTX_ALL, IDropTarget, DT);
    DT.DragEnter(DataObject, MK_LBUTTON, P, Effect);
    DT.Drop(DataObject, MK_LBUTTON, P, Effect);
  end;
end;

end. 
```

（用 Delphi 2009 测试）

* * *

我的原始博客文章： http: [//mikejustin.wordpress.com/2009/07/03/how-can-i-simulate-send-to-with-delphi/](http://mikejustin.wordpress.com/2009/07/03/how-can-i-simulate-send-to-with-delphi/)

# cursor - Safari 处于非活动状态时，手形光标未显示在链接上

> ID：14259468
> 
> 赞同：0
> 
> 时间：2013-01-10T13:50:36.840
> 
> 标签：cursor, mouse, safari

正如标题所说，即使窗口处于非活动状态，每个浏览器都可以在链接上显示手形光标，但不幸的是，这不适用于 Windows 上的 Safari v5.1.7，即今天安装的最后一个版本。

有谁知道这是否是 Safari 的错误？有没有人知道如何解决或是否有可能解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T13:07:38.047

是的，那是 Safari 中的一个错误。

# kannel - AT 上 CSMS 的通道配置

> ID：14259471
> 
> 赞同：1
> 
> 时间：2013-01-10T13:50:46.903
> 
> 标签：kannel

我正在开发一个配置为向移动客户端发送短信的网络应用程序。我的主要问题是 kannel 网关上的短信设置（框架的新手！）。当我运行承载箱时，我得到以下堆栈..

```
2013-01-10 16:17:34 [4875] [0] INFO: Kannel bearerbox II version 1.4.3 starting
2013-01-10 16:17:34 [4875] [0] INFO: MAIN: Start-up done, entering mainloop
2013-01-10 16:17:34 [4875] [0] DEBUG: AT2[Huawei]: start called
2013-01-10 16:17:34 [4875] [6] DEBUG: AT2[Huawei]: device opened. Telnet mode = 0
2013-01-10 16:17:34 [4875] [6] DEBUG: AT2[Huawei]: device opened
2013-01-10 16:17:34 [4875] [6] INFO: AT2[Huawei]: speed set to 9600
2013-01-10 16:17:34 [4875] [6] DEBUG: AT2[Huawei]: --> ^M
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: --> AT^M
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: <-- AT
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:36 [4875] [6] INFO: AT2[Huawei]: Closing device
2013-01-10 16:17:36 [4875] [6] INFO: AT2[Huawei]: speed is 9600
2013-01-10 16:17:36 [4875] [6] INFO: AT2[Huawei]: opening device
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: device opened. Telnet mode = 0
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: device opened
2013-01-10 16:17:36 [4875] [6] INFO: AT2[Huawei]: Logging in
2013-01-10 16:17:36 [4875] [6] INFO: AT2[Huawei]: init device
2013-01-10 16:17:36 [4875] [6] INFO: AT2[Huawei]: speed set to 9600
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: --> ATZ^M
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: <-- ATZ
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: --> AT^M
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: <-- AT
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:36 [4875] [6] DEBUG: AT2[Huawei]: --> AT&F^M
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- AT&F
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: --> ATE0^M
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- ATE0
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: --> ATQ0^M
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: --> AT+CPIN?^M
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- +CPIN: READY
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: --> AT+CMGF=0^M
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: --> AT+CSMS=?^M
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- +CSMS: (0,1,128)
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- OK
2013-01-10 16:17:37 [4875] [6] INFO: AT2[Huawei]: Phase 2+ is supported
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: --> AT+CSMS=1^M
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- +CSMS: 1,1,1
2013-01-10 16:17:37 [4875] [6] DEBUG: AT2[Huawei]: <-- ERROR
2013-01-10 16:17:37 [4875] [6] ERROR: AT2[Huawei]: Generic error: ERROR
2013-01-10 16:17:37 [4875] [6] ERROR: AT2[Huawei]: Initialization of device failed.
2013-01-10 16:17:37 [4875] [6] INFO: AT2[Huawei]: Closing device 
```

我已经检查过类似的问题，但似乎无法得到明确的解决方案，因为到目前为止它们都不起作用。任何帮助是极大的赞赏...

# asp.net-mvc - 如何使用 Automapper 将所有零 int 值映射到可为空的 int 目标的空值？

> ID：14259479
> 
> 赞同：0
> 
> 时间：2013-01-10T13:51:01.553
> 
> 标签：asp.net-mvc, model-view-controller, asp.net-mvc-4, automapper

我在 ViewModels 中使用`int?`所有我需要的“FK”属性。这为我提供了一种简单的方法，可以在 Create 视图模型上指定一个值可以为空，并且必须为其分配一个值以满足该`Required`属性。

我的问题出现了，因为我首先使用域工厂创建域模型实体，然后将其映射到视图模型。现在，视图模型中的许多可为空的整数从域模型中的不可为空的整数中被赋值为 0。我宁愿不在视图模型中构建新实体，而只将其映射回域模型以避免他的。我还可以做些什么？我确定有 som Automapper voodoo 可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-29T23:07:29.467

编辑：你不需要做任何这些，但我想我会把它留在这里给寻找类似解决方案的人。实际上，您所要做的就是提供一个从`int`到`int?`这样的映射：`Mapper.Map<int, int?>()`

在这种情况下，我相信您可以使用继承自自动映射器 ITypeConverter 的自定义类型转换器。此代码有效，我已通过 .NET Fiddle 运行它：

```
using System;
using AutoMapper;

public class Program
{
    public void Main()
    {
        CreateMappings();
        var vm = Mapper.Map<MyThingWithInt, MyThingWithNullInt>(new MyThingWithInt());

        if (vm.intProp.HasValue)
        {
            Console.WriteLine("Value is not NULL!");

        }
        else
        {
            Console.WriteLine("Value is NULL!");
        }
    }

    public void CreateMappings() 
    {
        Mapper.CreateMap<int, int?>().ConvertUsing(new ZeroToNullIntTypeConverter ());
        Mapper.CreateMap<MyThingWithInt, MyThingWithNullInt>();
    }

    public class ZeroToNullIntTypeConverter : ITypeConverter<int, int?>
    {
        public int? Convert(ResolutionContext ctx)
        {
           if((int)ctx.SourceValue == 0)
           {
              return null;
           }
            else
           {
               return (int)ctx.SourceValue;
           }
        }
    }

    public class MyThingWithInt
    {
        public int intProp = 0; 
    }

    public class MyThingWithNullInt
    {
        public int? intProp {get;set;}  
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-28T00:34:55.643

您始终可以`.ForMember()`在映射上使用该方法。像这样的东西：

```
Mapper
    .CreateMap<Entity, EntityDto>()
    .ForMember(
        dest => dest.MyNullableIntProperty,
        opt => opt.MapFrom(src => 0)
    ); 
```

# iphone - 不使用 GPS 的两部 iPhone 之间的距离

> ID：14259480
> 
> 赞同：1
> 
> 时间：2013-01-10T13:51:03.473
> 
> 标签：iphone, ios, objective-c

有没有什么方法可以在 iOS 中不使用 GPS 来查找两部 iPhone 之间的距离？我正在努力找出几英尺外的两部 iPhone 之间的确切距离。任何建议，教程/链接将不胜感激。期待回复...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:56:30.640

您可以创建某种声纳类型的东西。在设备之间使用蓝牙“安排”日期戳，并在确切的时间戳从其中一个设备发出声音。

在第二台设备上收听声音并标记它进入的时间戳。

然后你可以计算出从一个到另一个需要多长时间。

我不知道那会有多准确。

或者可能更容易的是从一个设备发出声音，然后当第二个设备拿起它时，它会重新发出另一种声音。

然后第一个设备监听回复，并能及时找到它们之间的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:56:44.063

唯一想到的是某种音频啁啾声，你可以测量它们之间的延迟，但相距几英尺，我不知道你能否让两部 iPhone 同步到足够近的程度进行准确的测量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T13:58:46.400

只要没有太多噪音，您就可以使用蓝牙配对设备并使用信号强度作为距离的度量。这可能需要大量的试验和错误，但我认为没有 GPS 可能是您的最佳选择。如果您有足够多的已知位置的接入点，您也可以进行 wifi 三角测量，但这可能更加不准确。

# sql-server - 本地运行的 Web 服务不会连接到本地数据库

> ID：14259484
> 
> 赞同：0
> 
> 时间：2013-01-10T13:51:21.707
> 
> 标签：sql-server, web-services, iis, connection

我有一个通过 IIS 在本地运行的 Web 服务。使用 IE 导航到它以测试特定服务会立即返回 0（输入无效内容时调用的存储过程返回的默认值）。但是，如果我更改连接字符串`web.config`以连接到托管实时数据库的服务器，它就可以正常工作。如果我将连接字符串更改为服务器的无效名称并尝试测试服务，它将在返回 0 之前加载大约 15 秒，因此我相当确定整个连接字符串是正确的。我认为这是与 SQL、IIS 或两者相关的权限。

我的连接字符串是：

```
<add name="LocalSQLServer" connectionString="Data Source=.\SQL_R2;Initial Catalog=localDBcopy;Persist Security Info=True;Trusted_Connection=Yes;Pooling=False" providerName="System.Data.SqlClient" /> 
```

当我将它连接到实时服务器时，我`Trusted_Connection`用名称和密码替换。

为什么我无法连接到本地数据库？或者如果我正在连接，为什么我不能运行通过 Web 服务调用的存储过程？有什么想法，或者需要任何其他信息？

# vector - 二维向量

> ID：14259485
> 
> 赞同：-1
> 
> 时间：2013-01-10T13:51:25.733
> 
> 标签：vector, dimensional

我想要一个具有以下结构的节点链接列表。

```
 struct node
    {
     string word;
     string color;
     node *next;
    } 
```

由于某些原因，我决定使用向量而不是列表。我的问题是，是否可以实现一个向量，它的 j 方向是有界的，而 i 方向是无限的，并在我的顶点末尾添加更多两个字符串。换句话说，是否可以在向量中实现以下结构？

```
 j       
    i   color1  color2  …
        word1   word2   … 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:42:31.127

我不擅长 C/C++，所以这个答案只会很笼统。除非您非常关心速度或内存优化（大多数情况下您不应该如此），否则请使用*封装*。

做一堂课。制作一个界面，*说明*您想要做什么。尽可能简单地实现*如何*做到这一点。大多数时候，*最简单*的实现就足够了，除非它包含一些错误。

让我们从界面开始。你本可以把它作为问题的一部分。对我来说，您似乎想要一个类似于字符串的二维数组，其中一个维度只允许值 0 和 1，而另一个维度允许任何非生成整数。

只是为了确保没有误解：有界维度*总是*大小为 2（*最多*不是2），对吧？所以我们基本上是在谈论 2×N 的“矩形”字符串。

你需要什么方法？我的猜测：一个新的 2×0 大小矩形的构造函数。一种附加一对新值的方法，它将矩形的大小从 2×N 增加到 2×(N+1) 并设置两个新值。一种返回矩形当前长度的方法（只有无界维度，因为另一个是常数）。以及一对通过坐标读取或写入单个值的随机访问方法。这就是全部？

让我们编写接口（对不起，我不擅长 C/C++，所以这将是一些 C/Java/pseudocode 混合）。

```
class StringPairs {
    constructor StringPairs();  // creates an empty rectangle
    int size();  // returns the length of the unbounded dimension
    void append(string s0, string s1);  // adds two strings to the new J index
    string get(int i, int j);  // return the string at given coordinates
    void set(int i, int j, string s);  // sets the string at given coordinates
} 
```

如果索引超出范围，我们应该指定函数“set”和“get”会做什么。为简单起见，假设“set”什么都不做，而“get”将返回 null。

现在我们准备好了问题。让我们来看看答案。

我认为编写这个类的最快方法是简单地将现有的 C++ 类用于一维向量（我不知道它是什么以及它是如何使用的，所以我只是假设它存在，并且会使用一些伪代码；我将其称为“StringVector”）并执行以下操作：

```
class StringPairs {
    private StringVector _vector0;
    private StringVector _vector1;
    private int _size;

    constructor StringPairs() {
        _vector0 = new StringVector();
        _vector1 = new StringVector();
        _size = 0;
    }

    int size() {
        return _size;
    }

    void append(string s0, string s1) {
        _vector0.appens(s0);
        _vector1.appens(s1);
        _size++;
    }

    string get(int i, int j) {
        if (0 == i) return _vector0.get(j);
        if (1 == i) return _vector1.get(j);
        return null;
    }

    void set(int i, int j, string s) {
        if (0 == i) _vector0.set(j, s);
        if (1 == i) _vector1.set(j, s);
    }

} 
```

现在，将此伪代码转换为 C++，并添加您需要的任何新方法（应该很明显如何）。

使用现有类来构建新类可以帮助您更快地编程。如果您以后改变主意，您可以在保留接口的同时更改实现。

# c# - 带有 where 子句的泛型类

> ID：14259486
> 
> 赞同：-1
> 
> 时间：2013-01-10T13:51:28.157
> 
> 标签：c#, generics

我确实在网上搜索了一些关于在创建泛型类时使用 where 子句的示例。其中大多数展示了较少的实际使用情况。

有人能指出一些体面的例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:56:57.183

实际用法可能是您想要使用从接口（例如）派生的特定类型，而无需自己创建实例。

例子：

```
class FooReader<T> where T : IFoo, new()
{
    public int Read()
    {
        var foo = new T();
        return foo.Read();
    }
}

class Foo : IFoo
{
    public int Read()
    {
        return 42;
    }
}

interface IFoo
{
    int Read();
} 
```

用法：

```
var reader = new FooReader<Foo>();
var result = reader.Read(); 
```

# php - HTTP 基本身份验证：如何使用 php / jQuery 登录到保护区？

> ID：14259487
> 
> 赞同：0
> 
> 时间：2013-01-10T13:51:30.680
> 
> 标签：php, jquery

我有一个目录，其中包含必须保护的文件。通过标准 HTTP 基本身份验证（.htaccess、.htpasswd 等）进行保护。使用下面的代码，我可以获得受保护页面的内容，但没有其他内容（“会话/登录”立即过期）。我需要访问该页面并下载文件。如何使用 php（或 javascript/ajax）**登录**到保护区并**停留在该页面上？**

```
<?php 
// HTTP authentication 
$url = "http://localhost/protected_files/"; 
$ch = curl_init();     
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);  
curl_setopt($ch, CURLOPT_URL, $url);  
curl_setopt($ch, CURLOPT_USERPWD, "login:password");  
$result = curl_exec($ch);  
curl_close($ch);  
echo $result; 
?> 
```

同样使用 jQuery ajax：

```
var username = $("input#username").val();
var password = $("input#password").val();  

function make_base_auth(user, password) {
  var hash = btoa(user + ':' + password);
  return "Basic " + hash;
}

$.ajax
  ({
    type: "GET",
    url: "http://localhost/protected_files/",
    headers: {
       'Authorization' : make_base_auth(username, password)
    },
    success: function (data){
      $('body').html(data);
    }
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:44:19.140

您的 PHP 脚本使用 CURL 读取位于受 HTTP 基本身份验证保护的目录中的文件并将其回显到屏幕上。如果您的 PHP 位于您的 Web 根目录中，并且您的受保护目录位于名为“protected”的子目录中，则用户的浏览器实际上永远不会重定向到受保护目录。用户的浏览器保留在 Web 根目录中。

此外，用户的浏览器从未经过身份验证。只有您的 Web 服务器通过您的 PHP 脚本进行了身份验证。可以这样想，您的 Web 服务器充当人类并使用基于 PHP 的各种 Web 浏览器进行身份验证。坐在家里电脑前的人从未对他们的网络浏览器进行身份验证。Apache 进行身份验证，读取该文件的内容，并将其作为某种代理传递给最终用户。

初始脚本加载页面后。任何具有指向“受保护”文件夹内文件的 href 属性的锚点标签都会弹出要求用户进行身份验证的弹出窗口。您误认为这是一个过期的会话。发生这种情况是因为托管 PHP 脚本的服务器（而不是最终用户的计算机）在您的 PHP 脚本中进行了身份验证。最终用户的计算机甚至还没有进行一次身份验证。在他们输入他们的凭据后，他们应该可以在接下来的会话中使用。

你问的是不可能的。每当用户单击链接时，将始终提示用户输入用户名和密码。为什么不让他们登录？如果文件需要密码保护，为什么要绕过保护。您可能需要重新考虑您的方法。

进一步细分：这是您的 PHP 脚本。

*   最终用户：嘿，我刚上网给你
*   Apache：太好了，让我运行这个从受保护目录中获取文件的 php 脚本
*   PHP：好的。让我去拿文件。嘿，Apache，我被指示使用 httpd basic auth 从您的文件夹中获取文件！
*   阿帕奇：奇怪！行。登录名和密码是多少。除非你有那个信息，否则我不能给你文件。
*   PHP：我把这些信息硬编码在我里面。干得好。
*   阿帕奇：谢谢！这是那个文件。
*   PHP：太好了。感谢您的文件！现在，你能把它还给最终用户吗？干得好。马上回到你身边。
*   阿帕奇：谢谢！我有那个文件。在这里你去最终用户。
*   最终用户：哇，我可以看到文件了！感谢 Apache 和 PHP！

现在，最终用户单击链接以下载文件

*   最终用户：嘿，我现在想下载那个文件。
*   阿帕奇：好的，登录名和密码是什么。
*   最终用户：嘿！我不需要那个。我不是刚给你的吗？
*   阿帕奇：不。PHP 为您获取了该文件并告诉我给您一份副本。你实际上从来没有通过我的大门。那么密码是什么！
*   最终用户：让我问一下堆栈溢出的 Mrbinky3000 是怎么回事。

这是您的 JavaScript 示例将进行的对话。

*   最终用户：嘿，浏览器先生，请访问此 URL。
*   浏览器先生：嗨，阿帕奇，你能把这个 URL 的页面给我吗？
*   阿帕奇：给你，浏览器先生。享受页面。
*   浏览器先生：哦，我看到这里有一些 Javascript 先生的代码。

最终用户输入用户名和密码，点击提交按钮

*   浏览器先生：好的。是时候执行一些javascript了。给你，Javascript先生。
*   JavaScript 先生：嘿，阿帕奇！我被告知从子文件夹中获取此页面并将其显示在浏览器先生的正文中。唯一的问题是，该子文件夹受基本身份验证保护。所以我需要给你这些凭据。
*   阿帕奇：嘿。JavaScript 先生怎么了。我看到您希望我从受保护的目录中获取此页面。我想这样做，我们是朋友，但我需要问你这个：登录名和密码是什么。没什么私人的，这只是我的工作。
*   JavaScript 先生：Apache 没问题！我有证件。干得好。
*   阿帕奇：太好了！我会去这里为你取那个页面。这是那个页面。玩得开心。
*   JavaScript 先生：感谢您为我获取该文件，Apache。嘿，浏览器先生，我需要用 Apache 刚刚给我的文件替换你的正文内容。
*   浏览器先生：当然，没问题。让我从你这里拿走。我们到了，你取来的那一页现在是我的身体。
*   最终用户：哇，我现在可以看到那个受保护的页面了，感谢浏览器先生。是时候点击链接了。

最终用户单击链接。

*   浏览器先生：嘿 Apache，我的用户刚刚点击了一个链接，现在我需要在那个受保护的目录中获取一个文件。
*   阿帕奇：嘿，伙计，不要这么快！登录名和密码是多少？
*   浏览器先生：呃，我不知道。我需要告诉你吗？JavaScript 先生不是刚刚给了你这些信息吗？
*   Apache：是的，JavaScript 先生确实给了我这个。但你不是 Javascript 先生。你是浏览器先生。由于您试图通过我的安全，而不是 Javascript 先生，所以我需要问您与 JavaScript 先生相同的问题。请问是什么证件。不要把它当成个人，这是我的工作。
*   浏览器先生：呃，不知道答案。我最好询问最终用户。嘿，最终用户。登录名和密码是多少？
*   最终用户：浏览器先生怎么了！！！我们不是刚刚在那里吗？为什么你又需要那个信息？嗯。最好问问 MrBinky 怎么了。

# c++ - 如何在 C++ 中将 A 转换为 B

> ID：14259488
> 
> 赞同：-3
> 
> 时间：2013-01-10T13:51:31.257
> 
> 标签：c++

任何人都知道任何代码如何使“AB”变为“BC”？类似于 A+1 = B

```
ZEND_FUNCTION(hello)
{
char *str;
str = 'AB'; 
strcpy (str,str);
puts (str);

RETURN_STRING(str ,0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T13:59:09.683

我不确定您在期待什么，但这里有您可能正在寻找的东西

```
#include <iostream>
using namespace std;

int main()
{
    char str[3] = "AB";
    str[0] += 1;
    str[1] += 1;
    cout << str <<endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:56:52.523

您可以读取字符的 ASCII 码，然后将其递增。如果你做 char `c = 'b'+1`，你会得到'c'。

# c++ - 如何获取 QLineEdit 的内容

> ID：14259496
> 
> 赞同：5
> 
> 时间：2013-01-10T13:51:51.710
> 
> 标签：c++, qt

我想`QLineEdit`用于输入。我的问题是我不知道如何阅读它的内容。

假设我有：

```
QLineEdit *edit = new QLineEdit(""); 
```

将其添加到 GUI 后如何获取内容？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T13:54:01.860

它有一个`text`属性，所以只需这样做：

```
edit->text(); 
```

# android - 在 Android 上，正在运行的进程和缓存的后台进程有什么区别？

> ID：14259504
> 
> 赞同：30
> 
> 时间：2013-01-10T13:52:08.107
> 
> 标签：android, background-process

在Android上，当我查看“设置”->“应用程序”时，在“运行”选项卡下，我可以看到内存被分成几部分：“已用内存”和“可用内存”，应用程序也被放置进入“已用内存”或“可用内存”。“内存空闲”部分中的应用程序被称为“缓存后台进程”。

那么，什么是“缓存的后台进程”？它们仍在内存中，而不是切换到“磁盘”（就像台式机/笔记本电脑一样），对吧？当用户选择这些“缓存的后台进程”之一时，它会立即显示，因为它仍在内存中，就像正在运行的进程一样，对吧？

Android 在“缓存”应用程序时会做什么？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-01-10T14:01:39.697

> 那么，什么是“缓存的后台进程”？

由于您要求对设备 UI 中列出的内容进行技术解释，因此如果设备制造商选择修改“设置”应用程序，则定义可能因设备而异。

话虽如此，“缓存的后台进程”通常是指没有前台活动且没有正在运行的服务的进程。这些进程保存在内存中只是因为我们有足够的内存来执行此操作，因此，正如您所注意到的，用户可以快速切换回这些进程。随着 Android 开始需要更多系统 RAM 用于其他进程，“缓存的后台进程”往往是被终止以释放系统 RAM 的进程。

“缓存后台进程”的突出示例是用户启动应用程序，短暂浏览它，然后按 HOME 返回主屏幕。如果该进程没有正在运行的服务，我希望它会被列为“缓存的后台进程”。

> 它们仍在内存中，而不是切换到“磁盘”（就像台式机/笔记本电脑一样），对吧？

正确的。Android 设备不使用交换空间。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-04-30T09:41:20.257

为什么不查看[“设置”应用程序的源代码](https://github.com/android/platform_packages_apps_settings)。

在我的 Nexus 4 中，“设置”->“应用”->“运行”如下所示。

![在此处输入图像描述](../Images/915b552e0f95f2d6d8fe27ff89b608c8.png) ![在此处输入图像描述](../Images/c08328b0255459d9c5dbe04e0342cad8.png)

在开始之前，***Android Process 中的重要性层次结构有五个级别。*** 这些都是

1）前台进程，
2）可见进程，
3）服务进程，
4）后台进程，
5）空进程

[您可以在 Android 开发者网站的“进程和线程”文档中](http://developer.android.com/guide/components/processes-and-threads.html)找到更多详细信息。

我确实查看了代码，结果发现**"SHOW CACHED PROCESSES"**显示了***重要性层次等于或低于 "Background process" 的***那些进程。另一方面，**“SHOW RUNNING SERVICES”**显示***重要性等级等于“可见进程”或更高的***那些。我删除了一些细节以清楚地显示要点。[您可以在此处查看](https://github.com/android/platform_packages_apps_settings/blob/master/src/com/android/settings/applications/RunningState.java#L1288-1322)这部分的完整源代码。

```
try {
        final int numProc = mAllProcessItems.size();
        int[] pids = new int[numProc];
        for (int i=0; i<numProc; i++) {
            pids[i] = mAllProcessItems.get(i).mPid;
        }

        ...

        for (int i=0; i<pids.length; i++) {
            ProcessItem proc = mAllProcessItems.get(i);
            changed |= proc.updateSize(context, pss[i], mSequence);
            if (proc.mCurSeq == mSequence) {
                serviceProcessMemory += proc.mSize;
            } else if (proc.mRunningProcessInfo.importance >=
                    ActivityManager.RunningAppProcessInfo.IMPORTANCE_BACKGROUND) {
                backgroundProcessMemory += proc.mSize;
                MergedItem mergedItem;
                if (newBackgroundItems != null) {
                    mergedItem = proc.mMergedItem = new MergedItem(proc.mUserId);
                    proc.mMergedItem.mProcess = proc;
                    diffUsers |= mergedItem.mUserId != mMyUserId;
                    newBackgroundItems.add(mergedItem);
                } else {
                   ...
                }

               ...

            } else if (proc.mRunningProcessInfo.importance <=
                    ActivityManager.RunningAppProcessInfo.IMPORTANCE_VISIBLE) {
                foregroundProcessMemory += proc.mSize;
            }
        }
    } catch (RemoteException e) {
    } 
```

所以，回到你的问题，

> 它们仍在内存中，而不是切换到“磁盘”（就像台式机/笔记本电脑一样），对吧？

**是的，它们仍在内存中**，但最终 Android 系统可能需要删除旧进程来为新的或更重要的进程回收内存。为了确定保留哪些进程以及终止哪些进程，系统将每个进程置于“重要性层次结构”中。

> 当用户选择这些“缓存的后台进程”之一时，它会立即显示，因为它仍在内存中，就像正在运行的进程一样，对吧？

**对**。例如，[保持“空进程”处于活动状态的唯一原因是在下次组件需要在其中运行时缩短启动时间。](http://developer.android.com/guide/components/processes-and-threads.html#Lifecycle)

> Android 在“缓存”应用程序时会做什么？

AFAIK，**它根本不会终止进程并保留资源**以在用户回来时立即响应用户。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-26T06:33:37.807

**进程等级**

Android 操作系统会尽可能长时间地保持应用程序运行，但是当可用内存不足时，它会首先通过杀死重要性较低的进程来尝试释放系统中的资源。

这就是流程排名出现的时候；Android 进程按优先级从高到低排列在接下来的五个类别中：

*   **前台进程**：这是一个承载用户当前正在与之交互的活动或服务的进程：在前台启动的服务或运行其生命周期回调的服务
*   **可见进程**：这是一个托管暂停活动或绑定到可见活动的服务的进程
*   服务进程：这是一个托管未绑定到可见活动的服务的进程
*   **后台进程**：这是一个承载不可见活动的进程；所有后台进程都按最近最少使用 (LRU) 列表排序，因此，最近使用的进程是最后被杀死的进程
*   **空进程**：这是一个用于缓存非活动 Android 组件并改善任何组件启动时间的进程

当系统达到需要释放资源的程度时，将根据进程排名、上次使用的进程和运行的组件对可被杀死的进程进行排序。

**来源**：

异步 Android 编程 - 第二版 - Helder Vasconcelos - 2016 年 7 月

# css - div之间出现空格

> ID：14259506
> 
> 赞同：0
> 
> 时间：2013-01-10T13:52:15.860
> 
> 标签：css, html, space

这是页面代码，您将在其下方找到代码的图像：

```
<body style="color: #25670c; margin: 0 0 0 0; padding: 0 0 0 0; font-family : Times New Roman; font-size : 16px; text-align: center;">

<div style="width:985px; margin:0 auto; background-color:#d6d6a4;">
<div style="height: 96px; width: 985px;"><a href="http://stores.ebay.co.uk/Digi-Spot">
    <img border="0" src="http://www.gvcdigital.co.uk/images/graphic/header.png" width="985" height="96" alt="header" title="DigiSpot eBay store" /></a></div>
<div style="height: 41px; width: 985px;">
    <img border="0" src="http://www.gvcdigital.co.uk/images/graphic/meniu.png" alt="DigiSpot meniu" width="985" height="41" usemap="#mapas" />

<map name="mapas">
  <area shape="rect" coords="56,0,0,41" href="http://stores.ebay.co.uk/Digi-Spot" alt="DigiSpot eBay store home" title="DigiSpot eBay store home">
  <area shape="rect" coords="539,0,400,41" href="http://stores.ebay.co.uk/Digi-Spot/About-us.html" alt="About Digispot" title="About DigiSpot">
  <area shape="rect" coords="699,0,539,41" href="http://stores.ebay.co.uk/Digi-Spot/Delivery.html" alt="Delivery information" title="Delivery information">
  <area shape="rect" coords="845,0,699,41" href="http://stores.ebay.co.uk/Digi-Spot/Returns.html" alt="Returns information" title="Returns information">
    <area shape="rect" coords="985,0,845,41" href="http://stores.ebay.co.uk/Digi-Spot/Contacts.html" alt="Contacts information" title="Contacts information">
</map> </div>

  <div style="overflow:hidden;">
    <div style="float:left; width: 661px; text-align: center;">
        <img border="0" src="http://www.gvcdigital.co.uk/images/graphic/description.png" width="232" height="81" title="Product description"><br /><p style="text-align: left; margin-left: 10;">[[Description]]</p></div>
    <div style="float:left; width: 324px; text-align: center;">
        <div style="color: #ffffff; background-color:#6b8861; font-size : 18px;" title="Product title">[[Title]]</div>
        <div style="border:1px dotted #6b8861; text-align:center; width: 324px; background-color:#ffffff;" title="Product picture">[[Picture1]]</div>
        <div style="width: 324px; color: #000000; font-size : 18px;" title="In stock: [[QtyToList]]">In stock: <b>[[QtyToList]]</b></div>
        <div style="width: 324px; color: #801010; font-size : 35px;" title="Product Price">Price: [[BuyItNowPrice]]</div>
    </div>
</div>

<div style="clear: both; text-align: center; width:200px; margin: 0 auto; background-color:#58794c; color: #ffffff; font-size : 28px; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;">Postage</div>
<div style="width:985px; margin: 0 auto; background-color:#58794c; color: #efda5d; border-bottom:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;"><p style="text-align: left; margin-left: 10;">Available shipping type/It's price/Additional cost for this product:<br />[[ShippingService1]]/[[ShippingServiceCost1]]/[[ShippingServiceAdditionalCost1]]<br />[[ShippingService2]]/[[ShippingServiceCost2]]/[[ShippingServiceAdditionalCost2]]<br />[[ShippingService3]]/[[ShippingServiceCost3]]/[[ShippingServiceAdditionalCost3]]<br />[[ShippingService4]]/[[ShippingServiceCost4]]/[[ShippingServiceAdditionalCost4]]<br />More information about products delivery you will find by clicking <a href="http://stores.ebay.co.uk/Digi-Spot/Delivery.html">here</a>.</p></div>
<br />
<div style="text-align: center; width:200px; background-color:#558b40; color: #ffffff; font-size : 28px; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;">Return</div>
<div style="width:985px; margin: 0 auto; background-color:#558b40; color: #efda5d; border-bottom:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;"><p style="text-align: left; margin-left: 10;">Product must be returned within [[ReturnWithin]] to this adress <b>[[ReturnAddress]]</b>. For return shipping pays <b>[[ReturnShipPaid]]</b>.<br /> More information about returning products you will find by clicking <a href="http://stores.ebay.co.uk/Digi-Spot/Returns.html">here</a>.</p></div>
<br />
<div style="text-align: center; width:200px; margin: 0 0 0 0; background-color:#66ac4a; color: #ffffff; font-size : 28px; border-top:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;">Payment</div>
<div style="width:985px; margin: 0 auto; background-color:#66ac4a; color: #efda5d; border-bottom:1px dotted #015811; border-left:1px dotted #015811; border-right:1px dotted #015811;"><p style="text-align: left; margin-left: 10;">Product price is <b>[[FixedPrice]]</b><br />Additional payment instructions for this product: [[PaymentInstructions]]</p></div>

<div style="text-align: center; width:985px; margin: 0 auto;">
    <img border="0" src="http://www.gvcdigital.co.uk/images/graphic/buttom.png" width="524" height="42" title="DigiSpot - Supplier of Electrical and Related Products at Low Price"></div>
  </div>
</body> 
```

这是它的样子（用红色标记的探测区）： ![在此处输入图像描述](../Images/69b6d5e19b5757b406c389dd730dcb8b.png)

这里有什么问题？我知道这是“小”的东西，但是我找不到问题：s 这个问题只出现在 Chrome 浏览器中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:53:45.983

空间在您应用边距时出现，所以只需删除`margin: 10;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:06:56.377

尝试添加`"margin-top:0"`标签`<p>`，否则浏览器将添加默认的上边距，并且由于它们是块级 div 内的内联元素，它们会强制包含 div 之外的边距。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:15:17.187

内联样式...我感到痛苦！:P

好的，您的问题是**p 标签**：

```
<p style="text-align: left;">
Available shipping type/It's price/Additional cost for this product: 
```

通过在此处添加边距来进行修复，如下所示：

```
<p style="text-align: left; margin: 0px;"> 
```

快乐编码:)

# java - Java：如何读取输入 int

> ID：14259508
> 
> 赞同：2
> 
> 时间：2013-01-10T13:52:23.330
> 
> 标签：java, input, java.util.scanner

所以，我一直在寻找一种有效的方法，使用 Java 的标准包来读取输入整数......例如，我遇到了“Scanner”类，但我发现了两个主要困难：

1.  如果我不插入 int，我实际上无法解决异常；
2.  这个类使用标记，但我的目标是加载完整长度的字符串。

这是我想实现的执行示例：

```
Integer: eight
Input error - Invalid value for an int.
Reinsert: 8 secondtoken
Input error - Invalid value for an int.
Reinsert: 8
8 + 7 = 15 
```

这是我试图实现的（不正确的）代码：

```
import java.util.Scanner;
import java.util.InputMismatchException;

class ReadInt{
    public static void main(String[] args){
        Scanner in = new Scanner(System.in);
        boolean check;
        int i = 0;
        System.out.print("Integer: ");
        do{
            check = true;
            try{
                i = in.nextInt();
            } catch (InputMismatchException e){
                System.err.println("Input error - Invalid value for an int.");
                System.out.print("Reinsert: ");
                check = false;
            }
        } while (!check);
        System.out.print(i + " + 7 = " + (i+7));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T13:58:15.587

与令牌一起使用：

```
int i = Integer.parseInt(in.next()); 
```

然后你可以这样做：

```
int i;
while (true) {
    System.out.print("Enter a number: ");
    try {
        i = Integer.parseInt(in.next());
        break;
    } catch (NumberFormatException e) {
        System.out.println("Not a valid number");
    }
}
//do stuff with i 
```

上面的代码适用于令牌。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:01:27.713

使用 BufferedReader。检查 NumberFormatException。否则与您所拥有的非常相似。像这样...

```
import java.io.*;

public class ReadInt{
    public static void main(String[] args) throws Exception {
        BufferedReader in = new BufferedReader(new InputStreamReader(System.in));
        boolean check;
        int i = 0;
        System.out.print("Integer: ");
        do{
            check = true;
            try{
                i = Integer.parseInt(in.readLine());
            } catch (NumberFormatException e){
                System.err.println("Input error - Invalid value for an int.");
                System.out.print("Reinsert: ");
                check = false;
            }
        } while (!check);
        System.out.print(i + " + 7 = " + (i+7));
    }
} 
```

# model - CakePHP 没有来自相关模型的数据

> ID：14259509
> 
> 赞同：1
> 
> 时间：2013-01-10T13:52:28.280
> 
> 标签：model, relationship, cakephp-2.1

我有 2 个相互关联的模型。

```
class AccountModel extends AppModel {

    public $name = 'Account';
    public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey'   => 'user_id',

        ),
    );
}

class UserModel extends AppModel {

    public $name = 'User';
    public $hasMany = array(
        'Account' => array(
            'className' => 'Account',
            'foreignKey'   => 'user_id',

        ),
    );

} 
```

表：帐户 -id -user_id -其他字段...

用户 -id -其他字段...

从一个模型请求数据只返回这个数据，但没有相关数据。我想请求具有 id 的模型用户并返回所有用户数据和相关的帐户数据。与使用一个参数请求 Account-model 相同，而不是 account_id 或 user_id，并返回所有 Account-data 和相关的 User-data。

```
$User = $this->Account->findByField($param); 
```

只返回 array('Account' => array(...)) 和

```
$User = $this->User->findById($id); 
```

只返回 array('User' => array(...)) 但没有请求返回 array('User' => array(...), 'Account' => array(..))

我将如何获取所有相关数据？

问候米。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:02:08.323

`FindBy{fieldname}`不允许使用递归选项（如 cakephp 文档中所定义`findBy<fieldName>(string $value[, mixed $fields[, mixed $order]]);`）。

为了通过关系获取递归数据，您应该使用 find 方法。

```
$userData = $this->User->find('first', array(
    'conditions' => array('id' => $userId),
    'recursive' => 1,
)); 
```

如果没有返回数据，请检查以下内容： - 是否传递了有效的 userId？- 两个表中是否有给定 userId 的数据？- 模型是否在您尝试运行 Find 查询的位置正确加载？

# qt - pyqt qstatemachine 图形表示

> ID：14259513
> 
> 赞同：1
> 
> 时间：2013-01-10T13:52:51.493
> 
> 标签：qt, qt4, pyqt, pyqt4

我正在努力实现我已经拥有的状态机的图形表示。我的问题是，如何使用 PyQT 生成图形表示？所以更清楚的是，我希望弹出一个窗口，显示状态的 fsm 和显示的转换。如果不手动绘制每个状态或构建我自己的状态绘图库，这是否可能？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:47:00.383

看看[Graphviz](http://www.graphviz.org/)，这是一套图形布局工具和库，许多其他程序都使用它来绘制图形，例如 Doxygen 和 KCacheGrind。

您可以将其用作库来链接；或者写出一个文件，调用可执行文件来处理它并读回文件。第二种（文件写入/处理/读取）方法是最常用的。

为此，您：

1.  以点格式（一种简单的文本格式）写出图形（您的 FSM）。
2.  使用输出格式调用`dot`（graphviz 工具之一）`dot`，这会将布局信息附加到文件中
3.  读回点文件并使用位置信息

有几个库可以做到这一点，包括 Python，请参阅[pydot](http://code.google.com/p/pydot/)。

# scala - Scala：整个流的过滤器强制评估

> ID：14259516
> 
> 赞同：4
> 
> 时间：2013-01-10T13:52:56.063
> 
> 标签：scala, filter, stream

下面的代码从类的构造函数中调用一次的方法本身调用一次。当它作为规范 UnitTest 的一部分执行时，测试会卡住，并产生一个快速消耗更多内存的 javaw 进程。

```
private def placeMines( excludes: List[( Int, Int )] ) {
    def rndstream: Stream[( Int, Int )] = {
        def s: Stream[( Int, Int )] =
            ( Random.nextInt( ysize ), Random.nextInt(  xsize ) ) #:: s
        s
    }
    def posPermitted( pos: ( Int, Int ) ): Boolean = {
        !excludes.contains( pos ) &&
            fieldEmpty( pos._1, pos._2 )
    }
    val positions = rndstream.filter( posPermitted )
    positions.take( minecount ).foreach( x => grid( x._1 )( x._2 ) = MineField() )
} 
```

为了找出发生了什么，我用副作用注释掉了最后一行（网格是一个二维数组），并用不同的过滤谓词替换了过滤谓词，包括 x => false 和 x => true。有趣的是，它在 true 情况下终止，但在 false 情况下一直运行。在我终止 java 进程之前，插入一些 println 显示谓词被调用了数十万次。

我尝试使用以下代码重现这种情况：

```
import scala.util.Random
import org.specs.SpecificationWithJUnit

class foobar extends SpecificationWithJUnit {
    val x = 0xDead
    val y = 0xBeef

    bar(x, y)

    private def bar(x: Int, y: Int) = foo(x)

    private def foo(x: Int) = {
        def s: Stream[( Int, Int )] = {
            def p: Stream[( Int, Int )] =
                ( Random.nextInt( x ), Random.nextInt( y ) ) #:: p
            p
        }
        val fiveodd = s.filter( x => x._1 % 2 == 1 )
        println( fiveodd.take( 5 ).toList )
    }
} 
```

但是，该代码运行得很好。

搜索“scala 流过滤器无休止”“scala 流过滤器强制评估”和“scala 流过滤器不终止”只提出了教程，展示了流的用法，这在原则上与我的代码相同。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:17:21.727

我猜你的过滤功能有问题。`Stream.filter`尝试找到第一个匹配值，如果没有，它将永远搜索。

以您的示例流并调用

```
s.filter(_ => false) 
```

这不会返回，因此它必须是您的过滤器功能。

# ios - 通过类别覆盖Objective c中的方法

> ID：14259517
> 
> 赞同：20
> 
> 时间：2013-01-10T13:53:01.133
> 
> 标签：ios, objective-c, categories

以下是在目标 c 中工作：

```
// Base Class in ClassA.h and ClassA.m
@interface ClassA : NSObject 
- (NSString *) myMethod;
@end
@implementation ClassA
- (NSString*) myMethod { return @"A"; }
@end

//Category in ClassA+CategoryB.h and ClassA+CategoryB.m
@interface ClassA (CategoryB) 
- (NSString *) myMethod;
@end
@implementation ClassA (CategoryB)
- (NSString*) myMethod { return @"B"; }
@end 
```

问题是，如果我只是导入 ClassA.h 并发送消息

```
[myClassA myMethod]; //returns B 
```

为什么这又回来了`B`？我没有导入 ClassA+CategoryB

更重要的是，如果我执行以下操作：

```
// Base Class in ClassA.h and ClassA.m
@interface ClassA : NSObject 
- (NSString *) myMethod;
- (NSString *) mySecondMethod;
@end
@implementation ClassA
- (NSString*) myMethod { return @"A"; }
- (NSString *) mySecondMethod { return [self myMethod]; }
@end

//Category in ClassA+CategoryB.h and ClassA+CategoryB.m
@interface ClassA (CategoryB) 
- (NSString *) myMethod;
@end
@implementation ClassA (CategoryB)
- (NSString*) myMethod { return @"B"; }
@end 
```

并调用 mySecondMethod：

```
ClassA *a = [[ClassA alloc] init];
NSLog(@"%@",[a myMethod]); 
```

结果仍然是`B`尽管没有人知道（由于没有导入）类别的实现？！

我例外，只有`B`在我导入类别时才返回......

所以任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-01-10T13:57:30.633

Objective-C 消息传递是动态的，这意味着您是否导入类别并不重要。该对象将接收消息并执行该方法。

该类别正在覆盖您的方法。这意味着当运行时向该对象发送消息时，将始终找到被覆盖的方法，无论您导入什么。

如果您想忽略某个类别，则不应编译它，因此您可以从编译器源代码中删除该类别。
另一种方法是子类化。

另请阅读：

> **避免类别方法名称冲突**
> 
> 因为在类别中声明的方法被添加到现有类中，所以您需要非常小心方法名称。
> 
> 如果在一个类别中声明的方法的名称与原始类中的方法相同，或者与同一类（甚至超类）上的另一个类别中的方法相同，则行为未定义至使用哪种方法实现运行。如果您将类别与您自己的类一起使用，这不太可能成为问题，但在使用类别向标准 Cocoa 或 Cocoa Touch 类添加方法时可能会导致问题。

因此，在您的情况下，您没有任何问题，因为如上所述，用户定义的类不太可能发生这种情况。但是**您绝对应该使用子类化而不是编写类别**。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-01-10T14:01:44.323

Obj-C 允许您使用类别向现有类添加方法。因此，如果您向 NSString 添加方法，则分类方法可用于 NSMutableString 以及继承 NSString 的所有类或 NSString 的任何子类。

但是您应该避免覆盖类别。

您不会 100% 确定将调用哪个方法。这取决于编译器。

来自 Apple 文档。

> 尽管 Objective-C 语言目前允许您使用类别来覆盖类继承的方法，甚至是类接口中声明的方法，但强烈建议您不要这样做。类别不能替代子类。使用类别重写方法有几个显着的缺点： 当类别重写继承的方法时，类别中的方法可以像往常一样通过向 super 发送消息调用继承的实现。但是，如果一个类别覆盖了该类别的类中存在的方法，则无法调用原始实现。一个类别不能可靠地覆盖在同一类的另一个类别中声明的方法。这个问题特别重要，因为许多 Cocoa 类是使用类别实现的。您尝试覆盖的框架定义的方法本身可能已经在一个类别中实现，因此没有定义哪个实现优先。某些类别方法的存在可能会导致所有框架的行为发生变化。例如，如果您在 NSObject 的一个类别中覆盖 windowWillClose: 委托方法，那么您程序中的所有窗口委托都会使用该类别方法进行响应；您的所有 NSWindow 实例的行为可能会改变。您在框架类上添加的类别可能会导致行为的神秘变化并导致崩溃。NSObject 上的一个类别中的委托方法，然后程序中的所有窗口委托都使用该类别方法进行响应；您的所有 NSWindow 实例的行为可能会改变。您在框架类上添加的类别可能会导致行为的神秘变化并导致崩溃。NSObject 上的一个类别中的委托方法，然后程序中的所有窗口委托都使用该类别方法进行响应；您的所有 NSWindow 实例的行为可能会改变。您在框架类上添加的类别可能会导致行为的神秘变化并导致崩溃。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T14:04:10.170

您通过编译隐式包含在类别中定义的代码。

如果您想避免执行类别代码，则应通过删除类别实现文件将其从目标中删除。你可以从

**目标->构建阶段->编译源**

也就是说，您**永远不**应该使用类别来覆盖方法。这是一个非常糟糕的做法，这不是类别的用途。

# ios - 通过链接在 Drive 应用程序 (iOS) 中打开文件/文件夹

> ID：14259519
> 
> 赞同：1
> 
> 时间：2013-01-10T13:53:06.187
> 
> 标签：ios, google-drive-api

我正在寻找一种直接从 iPad/iPhone 上的链接打开特定文件或文件夹的方法。我们已经测试了这个链接 (googledrive://)，它打开了 Drive 应用程序，让我们非常接近。下一步是添加文件或文件夹 ID，并在单击链接时直接打开它。关于参数可能是什么的任何想法？

任何帮助深表感谢。

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-06T14:05:14.187

我在指向 Google Drive 中特定文档和文件夹的链接上将 https 替换为 googledrive，它在 iOS 中运行良好。

# c++ - c++ 只有第一个答案行正确

> ID：14259529
> 
> 赞同：0
> 
> 时间：2013-01-10T13:53:39.653
> 
> 标签：c++

我的程序有问题，它只打印正确的第一行答案是我的 .txt 文件，第一个数字 (3) 是商店编号，第二个数字 (5) 是产品编号，其他行是产品价格

```
3 5
1.27 2.92 3.45 1.09 0.89
1.08 2.25 3.75 1.12 0.69
0.98 2.48 3.62 1.10 0.72 
```

这是我的 results.txt 文件，其中是每一行的所有结果

```
 9.62
 8.89
 8.90 
```

我的程序代码：

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    double dienos, results;
    int shops;

    ifstream fin ("duomenys1.txt");
    fin >> shops;

    for( int shop = 1; shop <= 3; shop++ ) {
        results = 0;
        fin >> dienos;

        for ( int pricelist = 1; pricelist <= 5; pricelist++ ) {
            double price;
            fin >> price;
            results += price;

        }
        cout << results << endl;

    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:58:05.113

我怀疑在：

```
ifstream fin ("duomenys1.txt");
    fin >> shops;

    for( int shop = 1; shop <= 3; shop++ ) {
        results = 0;
        fin >> dienos; 
```

`fin >> dienos`应该在你的循环之外。

此外，两个循环都是硬编码的，而不是使用读取的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:07:41.443

你可以试试这个代码：

```
#include <iostream>
#include <fstream>

using namespace std;

int main()
{
    double dienos, results;
    int shops;

    ifstream fin("duomenys1.txt");
    fin >> shops;
    fin >> dienos;

    for (int shop = 1; shop <= shops; shop++)
    {
        results = 0;
        for (int pricelist = 1; pricelist <= dienos; pricelist++)
        {
            double price;
            fin >> price;
            results += price;
        }
        cout << results << endl;
    }
} 
```

# javascript - 从页面屏幕生成 PDF

> ID：14259530
> 
> 赞同：0
> 
> 时间：2013-01-10T13:53:39.620
> 
> 标签：javascript, html, pdf

我需要从我的 HTML5/Javascript 项目中的页面屏幕生成 PDF 文件。我已经尝试过 jsPDF，但是使用起来太难了，而且我还没有找到任何关于创建表格的信息。有人知道可以对网页进行简单截图并将其转换为 PDF 文件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:03:36.013

我认为您可以使用这样的工具： [http ://code.google.com/p/wkhtmltopdf/](http://code.google.com/p/wkhtmltopdf/)

我刚刚找到了这个线程： [使用 PHP 的网站截图](https://stackoverflow.com/questions/757675/website-screenshots-using-php)

# spring - 跨平台的 RandomGenerator 的 Spring 初始化

> ID：14259531
> 
> 赞同：0
> 
> 时间：2013-01-10T13:53:40.227
> 
> 标签：spring, ubuntu, windows-7, random

我在两个不同平台（Win7 和 Ubuntu PP）上的 Spring3 应用程序上运行 JUnit 测试。出于测试/再现性目的，我在应用程序上下文中设置了随机生成器的种子

```
<bean class="org.apache.commons.math3.random.MersenneTwister">
        <property name="seed" value="1111111" />
</bean> 
```

现在这个测试

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration( { Config.APP_CONFIG_PATH })
public class StatTestAtomicInitOut {

@Autowired 
RandomGenerator rg;

@Test
public void testRandomGenerator() {

    Assert.assertEquals(9183, rg.nextInt(10000));

}

} 
```

在 Windows7 中始终通过，但在 Ubuntu PP 上始终失败（java.lang.AssertionError: expected:<9183> but was:<9561>）。

这另一个测试

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration( { Config.APP_CONFIG_PATH })
public class StatTestAtomicInitIn {

 @Autowired 
 RandomGenerator rg;

 @Test
 public void testRandomGenerator() {

    rg.setSeed(new Long(1111111));
    Assert.assertEquals(9183, rg.nextInt(10000));

 }

} 
```

在 Windows7 和 Ubuntu PP 上始终通过。

为什么在 Ubuntu 上（但不是在 Win7 上）随机生成器的 Spring 初始化产生的结果与在运行时设置种子所获得的结果不同？

提前感谢您的任何反馈。

啊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T08:43:13.577

有了这个配置

```
<bean class="org.apache.commons.math3.random.MersenneTwister">  
    <constructor-arg type="long" value="1111111" />
</bean> 
```

测试在两个平台上都通过。感谢 Tom McIntyre 让我走上正轨。另一种可能是

```
<bean class="org.apache.commons.math3.random.MersenneTwister">
    <property name="seed" >
        <value type="long">1111111</value>
    </property>
</bean> 
```

测试通过的。

为什么 Spring 在不同的平台上选择不同的默认设置器这个有点学术的问题仍然没有答案。奇怪的是，至少对我来说，使用以下配置

```
<bean class="org.apache.commons.math3.random.MersenneTwister">
    <property name="seed" >
        <value type="java.lang.Long">1111111</value>
    </property>
</bean> 
```

StatTestAtomicInitOut 在 win7 上通过，但在 Ubuntu 上失败。

# jquery - JQuery Mobile 日期选择器消失

> ID：14259533
> 
> 赞同：1
> 
> 时间：2013-01-10T13:53:42.067
> 
> 标签：jquery, jquery-mobile, datepicker, datebox

当我从我的 JQM 页面中的[http://dev.jtsage.com/jQM-DateBox2打开我的日期框时，日期选择器会在 0.5 秒后消失。](http://dev.jtsage.com/jQM-DateBox2)这只发生在智能手机/平板电脑上。在桌面浏览器上显示正常。

我还注意到，当我在平板电脑上打开选择器时，标题闪烁了一下。也许这是刷新某些东西的标志？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T08:54:09.273

我有一个类似的问题。我不知道为什么，但如果 HTML 标记和 JQuery Mobile pages () 之间有一些纯文本，它就可以工作。

```
<body>plain text <div data-role"page"></div> </body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T20:06:30.717

我们可以查看您的源代码或 js fiddle 链接吗？

我猜您尝试禁用页面上的任何其他脚本并尝试解决此问题。

您的页面上是否也有以下代码？setTimeout("$('#datetime').trigger('datebox', {'method': 'open'});", 6000);

# vba - 多个链接的 aacdb 文件的并发问题

> ID：14259536
> 
> 赞同：1
> 
> 时间：2013-01-10T13:53:46.717
> 
> 标签：vba, ms-access

我的数据库开始遇到一些并发问题。我在办公室网络的共享位置大约有十个不同的 aacdb 文件。这些数据库之一是一种“主”数据库。它分为后端和前端。该数据库的后端包含常用表，例如用户/密码、员工、部门等。

昨天，我做了两个数据库，纯粹是为了输入。它们每个都有一个以“数据输入”模式绑定到表的表单，记录锁定设置为“已编辑记录”。它们还链接到其他数据库共享的一些相同表。这是我第一次开始遇到（可能？）并发问题。

人们一直在“主”数据库中报告奇怪的行为（表单未打开等）。这经过了一些测试，只有当用户也在链接的数据输入数据库中时才会发生。

在给定时间，所有数据库中的当前用户仍然少于十个。

下拉选择是否会锁定表格，从而阻止某些表格打开？AFAIK，仅在加载表单时查询下拉列表。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T16:07:09.983

我很适合这个问题，试图让几个用户从网络共享共享同一个前端。事情只会......行不通。然后当我回去时，不可能复制失败。我决定将应用程序安装在本地机器上，但这存在版本控制问题，特别是因为我有几个不同的前端同时运行在不同的项目中。那里有更新程序，但他们要么花钱，要么我看不到代码并且不信任他们。我想出了这个作为解决方案，并且自 Access 2003 以来一直在使用它。

这是一个单独的 ACCESS 数据库，您必须像锁定任何前端一样将其锁定。

这个启动器适用于我现在正在运行的四个访问前端。您必须在网络上设置两个表。

表名：运行时间跟踪

字段：RTTID：自动编号

字段：RTTComputerName：文本

字段：RTTLoginTime：日期/时间

表名：版本控制表

字段：VCTID：自动编号

字段: VCTVersion : 数字

字段：VCTSourceLoc：文本

字段：VCTDest：文本

字段：VCTDateVer：日期/时间

RunTimeTracking 表用于防止用户在不使用启动器的情况下启动实际应用程序。当启动器运行时，它会在表中插入一个带有计算机名称的条目。当应用程序运行时，它会查找该条目，如果它没有看到它。它警告并转储。

在版本控制表中放置最新应用程序的位置，即您希望存储应用程序的本地计算机上的位置。

如果您控制的程序不止一个，则增加 VCTVersion 条目并在启动器的代码中引用它。

```
strSQL = "SELECT * FROM VersionControlTable WHERE VCTVersion = 200" 
```

当启动器运行时，它会检查本地文件上的创建日期戳到网络上的文件，如果它们不同，它会复制。如果没有，它会运行。

```
 Private Sub Form_Load()

        DoCmd.ShowToolbar "Ribbon", acToolbarNo
        DoCmd.ShowToolbar "Status Bar", acToolbarNo

        DoCmd.Maximize

        Form.TimerInterval = 2000

    End Sub

    Private Sub Form_Timer()

        runDataCheck

    End Sub
Private Sub runDataCheck()

' This is the launcher program. This program is designed to check for
' Version information and upload and download the new version automaticaly.

' Place entry into the Run Time Tracking Table. This will be used by the Main Application to verify that
' The application was launched by the Launcher and not run straight from the desktop

'First, retrieve the name of the computer from the Environment.

Dim strCompName As String

strCompName = Environ("computername")

' Now, delete all entries on the tracking table that have this computer name associated with it.
' Later we will try to add a trigger that archives the logins.
Dim strSQL As String

strSQL = "DELETE FROM RunTimeTracking WHERE RTTComputerName = '" & strCompName & "'"

adoSQLexec (strSQL)

' Now, add and entry into the table
strSQL = "INSERT INTO RunTimeTracking (RTTComputerName,RTTLoginTime) VALUES ('" & strCompName & "','" & Now() & "')"
adoSQLexec (strSQL)

' First, retrieve the parameters from the Version Control File and put them into variables that we can use.
Dim strSource As String
Dim strDest As String
Dim dateVer As Date
Dim rs As New ADODB.Recordset

'LBLSplashLabel.Caption = "Checking Version Information...."

strSQL = "SELECT * FROM VersionControlTable WHERE VCTVersion = 200"

     With rs

        rs.Open strSQL, CurrentProject.Connection

     End With

strSource = rs.Fields("VCTSourceLoc").Value
strDest = rs.Fields("VCTDest").Value
dateVer = rs.Fields("VCTDateVer").Value

Set rs = Nothing

' Next. See if the folders on both the local drive and the source drive exists.
Dim binLocal As Boolean
Dim binNet As Boolean
Dim binDirectoryLocal As Boolean

'Debug.Print strSource
' First check to see if the network file exists.
binNet = FileExists(strSource)

If binNet = False Then

    MsgBox ("The network source files are missing. Please contact Maintenance!")
    Application.Quit (acQuitSaveNone)

End If

' Get the timestamp from the network version since it exists.
Dim fileNet As File

Dim fileLocal As File

Dim fileNetObject As New FileSystemObject

Set fileNet = fileNetObject.GetFile(strSource)

Debug.Print strSource

Debug.Print "Created Date : " & fileNet.DateCreated

Dim strDirName As String
Dim intFind As Integer

' Check to see if the Local file Exists.

binLocal = FileExists(strDest)

If binLocal = False Then
    'There is no local file.  Check to see if the directory exists

    ' Get the directory name
    intFind = (InStrRev(strDest, "\", , vbTextCompare))
    strDirName = (Left(strDest, intFind - 1))

    Debug.Print "Directory Name: " & strDirName

     binDirectoryLocal = FolderExists(strDirName)

     If binDirectoryLocal = False Then
        'There is no local directory. Create one
        MkDir (strDirName)

'        LBLSplashLabel.Caption = "Copying Files...."

        'Copy the source file to the directory.
        FileCopy strSource, strDest

        'Since we have no copied the latest version over, no need to continue. Open the main app

    OpenMaintApp (strDest)

     Else
        ' No need to create the directory, simply copy the file.
        'Copy the source file to the directory.
'         LBLSplashLabel.Caption = "Copying Files...."
         FileCopy strSource, strDest

         'Since we have no copied the latest version over, no need to continue. Open the main app

    OpenMaintApp (strDest)

     End If
End If

'Now we know that the file is in the directory, now we need to check its version.

'Get the last modified date from the file.

Set fileLocal = fileNetObject.GetFile(strDest)

Debug.Print "Last Modified Date : " & fileLocal.DateCreated

'Do the version check

If fileLocal.DateCreated <> fileNet.DateCreated Then

'         LBLSplashLabel.Caption = "Copying Files...."
         'Copy the source file to the directory.
         FileCopy strSource, strDest

         'Since we have no copied the latest version over, no need to continue. Open the main app

    OpenMaintApp (strDest)

Else

    OpenMaintApp (strDest)
End If

    OpenMaintApp (strDest)

End Sub
Private Sub OpenMaintApp(strAppName As String)
Dim accapp As Access.Application

Set accapp = New Access.Application

accapp.OpenCurrentDatabase (strAppName)

accapp.Visible = True

DoCmd.Quit acQuitSaveNone

End Sub 
```

# java - 不等弦：HP 5”6'5A 和 HP 5”6'5A

> ID：14259537
> 
> 赞同：0
> 
> 时间：2013-01-10T13:53:53.380
> 
> 标签：java, mysql, compare, dataformat

我有两个表 A 和 B。表 A 有一个名为`a_value varchar(20)`B的列`b_value as varchar(20)`。两个表数据由不同的来源填充`using java`。

`A`从`Excel sheet`. `B`从`xml`.

```
HP 5"6'5A  - xml(table A)

HP 5”6'5A - Excel (Table B) 
```

我想`a_value`采用`not`.`b_value`

但我总是得到上述价值。

我该如何解决这个问题？

干杯..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T11:00:00.887

我已经通过添加以下条件来修复

```
 String value = "HP 5”6'5A"; 
 value = value.contains("”")?value.replace("”", "\""):value); 
```

# c - 使用指针的 C 编程 strcat

> ID：14259540
> 
> 赞同：2
> 
> 时间：2013-01-10T13:54:01.300
> 
> 标签：c

我是 C 语言的初学者。我想使用指针创建 strcat 函数。我做到了，但不知道有什么问题。我使用了 gcc 编译器，它给出了分段错误输出。

```
#include<stdio.h>
#include<string.h>

char scat(char *,char *);

void main()
{
    char *s="james";
    char *t="bond";

    char *q=scat(s,t);
    while(*q!='\0') printf("the concatenated string is %c",*q);
}

char *scat(char *s,char *t)
{
    char *p=s; 
    while(*p!='\0'){
        p++;
    } 
    while(*t!='\0'){
        *p=*t;
        p++;
        t++;
    }
    return p-s-t;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T14:05:33.173

这个有效：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>

char *scat(char *,char *);                 /* 1: your prototype was wrong */

void main()
{
    char *s="james";
    char *t="bond";

    char *q=scat(s,t);   
    printf("cat: %s\n", q);               /* 2: you can use %s to print a string */
    free(q);
}

char *scat(char *s,char *t)
{
    char *p=malloc(strlen(s)+strlen(t)+1);    /* 3: you will have to reserve memory to hold the copy. */
    int ptr =0, temp = 0;                   /* 4 initialise some helpers */

    while(s[temp]!='\0'){                  /* 5\. use the temp to "walk" over string 1 */
        p[ptr++] = s[temp++];
    }
    temp=0;
    while(t[temp]!='\0'){                   /* and string two */
        p[ptr++]=t[temp++];
    }
    return p;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T13:59:54.313

您必须在`s`. 否则，您的 while loo[ 将进入您无法访问的内存中。

你应该了解`malloc()` [这里](http://linux.die.net/man/3/malloc)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T14:00:32.597

修改字符串文字是未定义的行为`s`，并且最终`p`指向字符串文字：

```
char* s = "james"; 
```

`s``scat()`作为分配给本地的第一个参数传递`char* p`，然后：

```
*p=*t; 
```

在第一次调用时，它试图覆盖空字符和字符串文字的结尾`"james"`。

一个可能的解决方案是使用[`malloc()`](http://en.cppreference.com/w/c/memory/malloc)分配一个足够大的缓冲区来包含两个输入字符串的连接：

```
char* result = malloc(strlen(s) + strlen(p) + 1); /* + 1 for null terminator. */ 
```

并将它们复制到其中。调用者必须记住要[`free()`](http://en.cppreference.com/w/c/memory/free)返回的`char*`.

您可能会发现[常见的指针问题](http://c-faq.com/ptrs/index.html)列表很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-10T13:59:07.323

因为 p 一直到字符串的末尾，然后它开始进入非法内存。这就是你得到分段错误的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T13:58:44.067

这是因为 s 指向“james\0”，字符串文字&你不能修改常量。

更改`char *s="james";`为`char s[50]="james";`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-10T14:01:17.970

您需要了解指针的基础知识。

char * 不是字符串或字符数组，它是数据开头的地址。

你不能做一个 char * - char* ！

[这是一个很好的教程](http://www.tutorialspoint.com/cprogramming/c_pointers.htm)

你将不得不使用**malloc**

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-10T14:09:09.470

您会遇到分段错误，因为您将指针移动到末尾，`s`然后开始将数据`p`直接写入内存`s`。是什么让你相信之后有可写内存可用`s`？任何将数据写入不可写内存的尝试都会导致分段错误，并且看起来后面的内存`s`不可写（这是可以预料的，因为“字符串常量”通常存储在只读内存中）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-01-10T14:09:30.130

有几件事情看起来不正常。

首先请记住，当您想要返回一个指向在函数中创建的东西的指针时，它需要在某个地方进行 malloc'ed。如果您将目标作为参数传递给函数，则容易得多。`free()`如果你遵循前一种方法，当你完成它时不要忘记它。

此外，函数 scat 必须在声明中返回一个指针，即`char *scat`不是`char scat`。

最后，您不需要该循环来打印字符串，`printf("%s", string);`它将为您打印字符串（前提是它已终止）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-10T14:36:59.403

首先，由于以下行，您的代码将处于无限循环中。您应该通过包含“p++; t++”语句来使用正确的大括号。

```
while(*t!='\0')
 *p=*t; 
```

尽管您确实喜欢这样做，但您正在尝试更改字符串文字的内容。这将导致未定义的行为，如分段错误。

用双引号括起来的一系列字符称为字符串文字。它也被称为“字符串”。字符串的大小是固定的。创建后，您将无法扩展其大小和更改内容。这样做会导致未定义的行为。

为了解决这个问题，您需要分配一个新的字符数组，其大小是传递的两个字符串的长度之和。然后将两个字符串附加到新数组中。最后返回新数组的地址。

```
#include<stdio.h>
#include<string.h>
#include<stdlib.h>

char* scat(char *,char *);
void append(char *t , char *s);

int main(void)
{
    char *s="james";
    char *t="bond";

    char *n = scat(s,t);        
    printf("the concatenated string is %s",n);

    return 0;
}

char* scat(char *s,char *t)
{
    int len = strlen(s) + strlen(t);
    char *tmp = (char *)malloc(sizeof(char)* len);

    append(tmp,s);
    append(tmp,t);

    return tmp;
} 

void append(char *t , char *s)
{   
     //move pointer t to end of the string it points. 
    while(*t != '\0'){
        t++;
    }

    while( *s != '\0' ){
        *t = *s;
        t++;
        s++;    
    }       
} 
```

# x86 - 像 PTLsim 这样的 CAS 模拟器如何实现 x86 硬件的周期精确模拟？

> ID：14259542
> 
> 赞同：4
> 
> 时间：2013-01-10T13:54:04.303
> 
> 标签：x86, simulation, rtos, osdev

[有人能告诉我像http://www.ptlsim.org/](http://www.ptlsim.org/)这样的 CAS 软件是如何工作的吗？如果既不知道每条指令使用多少个周期也不知道 CPU 分支预测逻辑的信息，它们如何实现周期精度？或者所有东西都可以通过 NDA 获得？

我想它们可能在缓存被命中或丢失时非常准确（也许我错了，但我认为预测内部算法更容易），但是在不知道如何实现流水线和超标量的情况下，我很困惑如何进行模拟循环准确的。

因此，理论上是否可以在基于 x86 的硬件上实现**硬rtos？**或者应该签署某种 NDA 以便能够估计每条指令所需的时间？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T23:12:14.783

第一个问题：*如果既不知道每条指令使用多少个周期，也不知道 CPU 分支预测逻辑，它们如何实现周期精度？*

该模拟器确实为足够精确的 CPU 模型提供了周期精确的模拟，但没有为英特尔或 AMD 当前产品提供开箱即用的模型。Intel 或 AMD 的人员可以访问所需信息，可以创建 RTL 级模型并获得当前处理器的周期精确模拟。英特尔和 AMD 以外的人不能。您仍然可以将公开的信息提供给模拟器并获得合理的结果。这些结果与真实硬件不同。

如果您是软件开发人员并想对真实硬件进行基准测试，请使用真实硬件！像 PLTsim 这样的模拟器是为（学术）硬件开发人员设计的，他们希望在不花费数十万美元购买新芯片的情况下测试新硬件功能。

第二个问题：*理论上是否可以在基于 x86 的硬件上实现硬 rtos？*

当然*理论上*是可以的。您需要考虑所有情况下所有输入的每个代码段的绝对最坏情况。实际的问题是像Core 2这样的处理器非常复杂，处理器的状态是巨大的。此外，这些处理器并未设计为在时序方面具有确定性。一个非常硬的 RTOS 必须非常保守。最后，正如您正确观察到的那样，英特尔和 AMD 以外的人无法获得做出这些保守假设所需的所有信息。在实践中，传递最新和最好的 cpu 并使用具有确定性时序的较旧、更简单的 cpu 是合理的。

另一方面，如果 RTOS 不必真的很难实时，你总是可以只包括一些安全余量并希望最好。;-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T23:25:03.953

*这不是两个问题的答案；我只回答第二个。随意投票，尽管**Mackie**的回答总体上似乎更好。*

硬 RTOS**很难**在 x86 上实现。一个可以扼杀 RTOS 承诺的特殊事物是 SMM，即系统管理模式。CPU 在系统管理中断后进入它，它可能因不同的原因触发 - 硬件故障，在某些特殊的 MMIO 位置写入，`out`对某些特殊端口的指令。您无法禁用它，您无法真正预测 SMI 何时发生，并且 SMI 处理程序可能需要很长时间才能完成。

本质上，您对 CPU 何时处于 SMM 中一无所知，直到由于 CPU 花费了很长时间处理 SMI 而导致您的操作系统出现故障。在某些特殊情况下，即使对于非实时操作系统也可能成为问题，更不用说硬 RTOS。

还有[这个线程](http://forum.osdev.org/viewtopic.php?t=25205)可以为您提供有关 x86 上的 RTOSing 的更多要点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-13T11:02:25.550

在您链接的网站上，有如下声明；

> PTLsim 是用于 x86 和 x86-64 指令集的最先进的周期精确微处理器模拟器和**虚拟机。**

和

> 它**直接在它模拟的同一平台上**运行（运行 Linux 的 x86-64 或 x86 机器）

我不清楚这与任何其他 x86 虚拟机技术（例如 QEMU、VirtualBox、VMWare 或 Virtual PC）有何不同，这些技术通过实际直接在硬件上运行指令（以及在核心上运行）将是周期准确的速度）。是模拟器还是虚拟机？在我看来，它们不是一回事。 [例如bochs](http://bochs.sourceforge.net/)是模拟器而不是 VM，PTLsim 似乎介于两者之间？

# java - 如何使 JPanel 在另一个 JPanel 中扩展到最大宽度

> ID：14259543
> 
> 赞同：16
> 
> 时间：2013-01-10T13:54:12.943
> 
> 标签：java, swing, jpanel, layout-manager, boxlayout

我觉得我需要重新表述一下这个问题。

***更新了下面的问题。***

我有一个 JPanel，其中包含：

```
myjpanel.setLayout(new BoxLayout(selectors, BoxLayout.PAGE_AXIS)); 
```

**它包含以下三个面板：**

具有固定大小“x”和“y”的 JPanel

没有固定大小的JPanel

没有固定大小和小高度的JPanel

第二个 JPanel 包含一个 JTable，因此它会扩展以填充整个高度并将底部面板一直向下推，正如预期的那样。

*像这样：*

```
t
t
m
m
m
m
m
b 
```

t = 顶部面板，m = 中间面板，b = 底部面板。

这样可行。但是底部面板感觉不像填充父级的整个宽度，这是一个问题。

```
ttt
mmm
 b 
```

我想要这个，面板填充整个宽度：

```
ttt
mmm
bbb 
```

或者这个，底部面板居中：

```
ttt
mmm
b 
```

* * *

***下面的老问题：***

我有一个 JPanel，其中包含：

```
.setLayout(new BoxLayout(selectors, BoxLayout.PAGE_AXIS)); 
```

在其中，还有另外三个 JPanel。前两个是固定大小的，中间一个不是。

我希望我的底部面板只采用它需要的高度，但使用外部 JPanel 的所有可用宽度。

我曾尝试使用胶水但无济于事，我宁愿不设置首选尺寸和最小/最大尺寸。有没有办法只使用布局管理器和框架来告诉组件“填充整个父级宽度”。我宁愿不开始做一些技巧，比如设置大小和覆盖方法。

**注意：**我不能在内面板中放置任何胶水或填充物，只能修改外面板及其布局管理器。

*尝试1：*

使用`myPanel.setLayout(new GridLayout(3, 1));`没有产生预期的结果。它做了一个这样的网格：

```
XX
 X 
```

但我期望：

```
X
X
X 
```

*尝试2：*

使用`myPanel.setLayout(new GridLayout(0,1));`没有产生预期的结果。它做了一个这样的网格：

```
x
x
x 
```

但是所有面板的大小都相同，忽略了限制。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-10T13:57:18.140

最简单的方法是使用另一个布局管理器，例如`GridLayout`自动调整组件大小以填充父容器。

```
myPanel.setLayout(new GridLayout(0, 1)); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-10T14:50:08.377

如果使用 a`BorderLayout`并且`b`面板在其中，`SOUTH`或者`PAGE_END`它确实填充了整个宽度。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-10T14:07:17.997

您可以使用[GridBagLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)，为此，使用

```
gridBagObject.fill = GridBagConstraints.HORIZONTAL 
```

一个与 GridBagLayout 相关的帮助[示例](https://stackoverflow.com/a/11166903/1057230)。

**如评论中所问，与此相关**

[BoxLayout](http://docs.oracle.com/javase/tutorial/uiswing/layout/box.html)是另一种选择，它尊重组件的首选大小。如果 GridBagLayout 这么难的话，你可以试试 :-)

带有 GridBagLayout 的代码，更清晰：

```
import javax.swing.*;
import java.awt.*;

/**
 * Created with IntelliJ IDEA.
 * User: Gagandeep Bali
 * Date: 1/10/13
 * Time: 7:43 PM
 */
public class GridBagExample
{
    private void displayGUI()
    {
        JFrame frame = new JFrame("GridBagLayout Example");
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

        CustomPanel topPanel = new CustomPanel(Color.BLUE.darker().darker());
        CustomPanel middlePanel = new CustomPanel(Color.CYAN.darker().darker());
        CustomPanel bottomPanel = new CustomPanel(Color.DARK_GRAY);

        JPanel contentPane = new JPanel();
        contentPane.setBorder(BorderFactory.createEmptyBorder(5, 5, 5, 5));
        contentPane.setLayout(new GridBagLayout());

        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.FIRST_LINE_START;
        gbc.fill = GridBagConstraints.VERTICAL;
        gbc.gridx = 0;
        gbc.gridy = 0;
        gbc.weightx = 1.0;
        gbc.weighty = 0.3;

        contentPane.add(topPanel, gbc);

        gbc.gridy = 1;
        contentPane.add(middlePanel, gbc);

        gbc.gridy = 2;
        gbc.fill = GridBagConstraints.BOTH;
        contentPane.add(bottomPanel, gbc);

        frame.setContentPane(contentPane);
        frame.pack();
        frame.setLocationByPlatform(true);
        frame.setVisible(true);
    }

    public static void main(String... args)
    {
        EventQueue.invokeLater(new Runnable()
        {
            @Override
            public void run()
            {
                new GridBagExample().displayGUI();
            }
        });
    }
}

class CustomPanel extends JPanel
{
    public CustomPanel(Color backGroundColour)
    {
        setOpaque(true);
        setBackground(backGroundColour);
    }

    @Override
    public Dimension getPreferredSize()
    {
        return (new Dimension(200, 150));
    }
} 
```

输出 ：

![GridBagExample 输出](../Images/64aa1642a384f1041fb51a287496fd70.png)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-07-06T06:03:24.903

这里一些自定义 JPanel 用于使用静态输入值进行扩展和收缩。
Java timer 用于延迟和加快面板显示时间。

```
 public class SlidingPanel extends JPanel {
 private int paneHeight;
 private int paneWidth;
 private int comHeight;
 private int comWidth;
 private Timer everyspeedmillisec;

/**custom class for slide up and down actions for JPanel
 * 
 */

public SlidingPanel(LayoutManager layout,Dimension panedim) {

    super(layout);  
    setPreferredSize(panedim);
    paneHeight = (int)panedim.getHeight();;
    paneWidth  = (int) panedim.getWidth(); 

}

    /**function for expanding Jpanel
 * 
 */

public void expand_sft_det(int speed ,JPanel slidingcom)
{

 //Add Jpanel for sliding 

    this.add(slidingcom); 
```

//获取面板的高度和宽度，即我们想要显示的幻灯片高度。

```
 comHeight=(int)slidingcom.getMinimumSize().getHeight();

 comWidth=(int) slidingcom.getMinimumSize().getWidth(); 
```

//用一些静态值初始化计时器 - 中等速度）

```
 everyspeedmillisec = new Timer(30, new ActionListener() {

       private int count_timer=0; 

       public void actionPerformed(ActionEvent e) {

       count_timer++;

         if( paneHeight < comHeight){

             setPreferredSize(new Dimension(paneWidth, paneHeight));

             paneHeight+=20;

             repaint();

             revalidate();

         }
         else

             everyspeedmillisec.stop() ;
    }

  });

  everyspeedmillisec.start(); 

} 
```

/** 缩小 Jpanel 的函数 * */

```
public void shrink_sft_det(int speed ,JPanel slidingcom) {

 comHeight    = (int)slidingcom.getMinimumSize().getHeight();

     comWidth     = (int)slidingcom.getMinimumSize().getWidth(); 
```

//滑动到顶部的高度

```
 paneHeight=0;

     everyspeedmillisec = new Timer(30, new ActionListener() {

     private int count_timer=0;

 public void actionPerformed(ActionEvent e) {

     count_timer++; 

     if( paneHeight < comHeight){

           setPreferredSize(new Dimension(comWidth,comHeight));

           comHeight-=20;

           repaint();

           revalidate();

     }
     else
       everyspeedmillisec.stop() ;

 }

});
everyspeedmillisec.start(); 
```

}

//声明类并使用收缩onclick事件

```
public class SoftPanel extends JPanel implements ActionListener
, MouseListener {

JPanel MoredetPane;

JPanel SlidedetPane;

private JLabel SoftDOCLabel;

private JLabel SoftLocation;

private JLabel SoftUpdates;

private boolean mr_det_flag =true;

MoredetPane = new SlidingPanel(new GridLayout(1,1,5,5),new Dimension(300,1));

MoredetPane.setOpaque(false);

//Add some components 

        SlidedetPane = new JPanel(new GridLayout(3,2,50,25));

        SlidedetPane.setPreferredSize(new Dimension(300,200));

        SlidedetPane.setOpaque(false);

                SoftDOCLabel = new JLabel("Software Date") ;

            SoftLocation = new JLabel("Software Location") ;

        SoftUpdates  = new JLabel("Software Updates") ;

        SlidedetPane.add(SoftDOCLabel);

        SlidedetPane.add(new JLabel(softbean.getSoftDOC()));

        SlidedetPane.add(SoftLocation);

        SlidedetPane.add(new JLabel(softbean.getSoftPath()));  

        SlidedetPane.add( SoftUpdates);

        SlidedetPane.add(new JLabel(""));  

//Onclick events

      modedetails_Label.addMouseListener(new MouseAdapter() {

       @Override
       public void mousePressed(MouseEvent clickeve) {

           if(mr_det_flag){

              mr_det_flag=false;

                  ((SlidingPanel)MoredetPane).expand_sft_det(200,SlidedetPane);

                  add(SlidingPanel);
            }
            else{

            mr_det_flag=true;

          ((SlidingPanel) MoredetPane).shrink_sft_det(0,SlidedetPane);

            }

          });

    add( MoredetPane );

     } 
```

# mobile - Tizen Os 是否支持 Android 安装程序（.apk 文件）？

> ID：14259544
> 
> 赞同：5
> 
> 时间：2013-01-10T13:54:27.173
> 
> 标签：mobile, apk, store, tizen, android-runtime

Tizen Os是否支持基于[.apk 文件的安装？](http://en.wikipedia.org/wiki/APK_%28file_format%29)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-20T08:24:05.313

两者的原生应用程序完全不同，.apk 用于 android 用 Ja​​va 编码，.tpk 用于 Tizen 用 C++ 编码。所以在 Tizen 中直接安装 .apk 文件是不可能的。

但是 OpenMobile 为 Tizen 创建了一个名为 ACL 的应用程序，它将在 Tizen 平台上运行几乎所有的安卓应用程序。

首先，您必须在 Tizen 设备中安装应用程序，并且必须在 ACL 应用程序中加载 apk。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-24T19:49:46.157

不，虽然有一些第三方模拟器，但不直接支持。

Tizen 支持其自己`.tpk`的原生格式和`.wgt`（使用并扩展 W3C 规范）的 Web 应用程序格式。Android`adb`用于部署，Tizen`sdb`用于部署。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T07:31:24.003

不是直接的，但有一个兼容层。[http://openmobile.co/pdf/Data_Sheet_ACL_for_Tizen_8.pdf](http://openmobile.co/pdf/Data_Sheet_ACL_for_Tizen_8.pdf)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-04T08:02:25.243

由于 android 应用程序是由 java 编写的，而 Tizen OS 是基于 C/C++ 的。不支持。

# php - Linkedin 标记为工作 - php

> ID：14259545
> 
> 赞同：1
> 
> 时间：2013-01-10T13:54:38.230
> 
> 标签：php, api, linkedin, jobs

我正在尝试使用 OAuth PUT 将 post-id 标记为工作讨论：

```
$post_id = "G-34343-example";
$cmd = "http://api.linkedin.com/v1/posts/{$post_id}/category/code";
$xml = "<?xml version='1.0' encoding='UTF-8'?><code>job</code>";
$this->oauthc->fetch($cmd, $xml, OAUTH_HTTP_METHOD_PUT, array("Content-Type" => "application/xml")); 
```

但我收到一个错误：

有人知道这是什么意思吗？

```
com.linkedin.common.leo.core.UnauthorizedActionException: Unauthorized change of forum type 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T13:59:24.267

问题出在这里：

```
<?php
$post id = "G-34343-example";
?> 
```

变量名中有一个空格。使用下划线而不是空格来使其工作。

（这：`$cmd = "http://api.linkedin.com/v1/posts/{$post_id}/category/code";`将包含一个空白点，帖子 ID 应该是。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:25:42.677

您使用 API 连接的用户是否有权标记目标组中的帖子？您是否尝试过以该用户的身份直接登录 LinkedIn，进入目标论坛并尝试标记帖子？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-22T18:06:31.717

创建群组帖子时，它的 URL 在“位置”标头中返回。出于某种原因，位置标头中的 URL 使用的是 http 而不是 https。

如果您使用的是 OAuth2，如果您尝试使用 http 而不是 htttps 访问 API，LinkedIn 会返回 401。因此，如果您收到 401 响应，请检查您是否使用了 https。

所以代码应该是这样的：

```
$url = $response->headers['location'] . '/category/code';
$url = str_replace('http://', 'https://', $post_url);
// ... 
```

# jquery - Syntax error trying get classname from a jquery object

> ID：14259551
> 
> 赞同：0
> 
> 时间：2013-01-10T13:54:53.653
> 
> 标签：jquery, map, syntax-error

This seems not to be the right way:

```
$(".row-fluid div").each(function() {
    var $this = $(this),
        getClassLFT = $this.attr("class").split(" ").map(function(item) {
            return item.indexOf("lineFromTop") === -1 ? "" : item;
        });

    // following line throws the error
    $this.find("."+ getClassLFT[0]).wrapAll("<div class='clear' />");
}); 
```

The last line throws following error: `Syntax error, unrecognized expression: .` I want to get the first (and it's the only) value in this object. How can I handle that?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:09:36.893

Everything is fine in your codepiece. But the collection `getClassLFT` may be empty and you may need to check it before using ...

```
if(getClassLFT.length){
  $this.find("."+ getClassLFT[0]).wrapAll("<div class='clear' />");
}
else{
  // handle here...
} 
```

or use [jQuery.isEmptyObject()](http://api.jquery.com/jQuery.isEmptyObject/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T13:56:49.783

I think there poblem with the `getClassLFT[0]`, it might be empty collection that why its giveing error..

you need to check you code to fill the collection of `getClassLFT[0]`

# jquery - 通过 Ajax 从数据库中传递 HTML 格式的文本字段报告“null”

> ID：14259553
> 
> 赞同：0
> 
> 时间：2013-01-10T13:55:03.167
> 
> 标签：jquery, html, mysql, ajax, phpmyadmin

我正在尝试`text field`在 jQuery 弹出框中通过 Ajax 从 php myadmin 数据库中传递一个。文本以 HTML 格式编写，因此它会自动格式化。但是，`null`正在显示的不是文本。文本字段是：

```
<div class="topic">Arjun</div>
<p>content</p><br>
<div class="clr"></div> 
```

我没有提交（或存储）任何东西。表（通过其获取文本）是手动编写的。

**编辑#1**

*   我单击具有特定的链接`id`。
*   该`id`-name 被传递给 php 脚本并在表中匹配。
*   详细信息存储为文本字段，并通过 Ajax 在弹出的 jQuery 中获取。

这是文本字段之一：

```
<div class="topic">Arjun</div>
<p>content</p><br>
<div class="clr"></div> 
```

但是 jQuery 弹出窗口中的输出是`null`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:06:27.437

什么意味着您从 phpMyAdmin 获取数据？您可以从 php 文件中获取它，该文件实际上从数据库中获取信息。这通常看起来像：

# 根据您的帖子更改：

PHP：

```
 $id=$_POST['id'];
    $ret = mysql_query("select * from table where id='" . $id . "'");
    echo mysql_fetch_array($ret);
    die(); 
```

jQuery：

```
$("#link").click(function(){
  $.ajax({
               type: "POST",
               url: "file.php",
               data: "id="+$("selector#for.id"),
               success: function(data)
               {
                   //append your data here. e.g.
                   body.html=data.key;
               }
             });
}); 
```

# 来自您的链接的样本

```
$.ajax({
                type: 'POST',
                url: 'js/db.php',
                dataType: 'json',
                data: "id=" + this.id },
                success: function(data){ 
                    if (data[0]=='showe1'){
                        $('#' + data).avgrund({
                            openOnEvent: false,
                            height: 270,
                            width:350,
                            template: '<div class="topic">' + data[1] + '</div>'+
                            '<div class="clr"></div>'+
                            '<div class="intro">'+data[2]+'</div>'+
                            '<div class="clr"></div>'+
                            '<div>' +
                                '<a href="#" target="_new" class="b2 lfloat">Register</a>' +
                                '<a href="#" target="_new" class="b2 rfloat">More</a>' +
                            '</div>'
                        });
                    } 
```

我传递了这些参数并将 param 更改为 function from `id`to `data`，以使其成为标准。这是你需要看的吗？

# c# - 如何防止 Web 响应流关闭？

> ID：14259557
> 
> 赞同：0
> 
> 时间：2013-01-10T13:55:06.217
> 
> 标签：c#, encoding, httpwebrequest

**语境：**

我正在改进我的 .dll 以执行 WebRequests（Get 和 Post），添加一个新功能，即：响应后自动编码检测

**它将如何工作：**

1.  库的用户为请求配置它的默认参数，包括编码
2.  库执行对某个 url 的请求
3.  库检查页面的编码是否与预先配置的相同（通过检查元标记的值）
4.  如果编码不同，我使用正确的编码（在页面上找到的那个）重新编码响应

**代码片段：**

```
 // Executes web request and wait for response
            using (HttpWebResponse resp = (HttpWebResponse) m_HttpWebRequest.GetResponse())
            {
                using (var stream = resp.GetResponseStream ())
                {
                    using (var reader = new StreamReader (stream))
                    {
                        // Reading Stream to the end
                        response = reader.ReadToEnd ();

                        // Identifying the encode used on the page
                        // I will not paste method here, but it works
                        m_PageEncoding = IdentifyEncoding (response);                            
                    }

                    // Checking if the page encode is not the same as the preconfigured one
                    if (m_PageEncoding != System.Text.Encoding.GetEncoding (m_encoding))
                    {
                        using (var encodedReader = new StreamReader (stream, m_PageEncoding))
                        {
                            response = encodedReader.ReadToEnd();                                
                        }
                    }
                }
            } 
```

**问题：**

一旦我创建了另一个`EncodedReader`带有 Encoding 参数的 Reader，就会引发异常：`Stream was not readable`.

如果，我使用块将读取器嵌套在 responseStream 中，则第二次读取后的响应值始终为“空”

```
using (var stream = resp.GetResponseStream ())
                {
                    using (var reader = new StreamReader (stream))
                    {
                        // Reading Stream to the end
                        response = reader.ReadToEnd ();

                        // Identifying the encode used on the page
                        m_PageEncoding = IdentifyEncoding (response);

                        // Checking if the page encode is not the one i've used as argument
                        if (m_PageEncoding != System.Text.Encoding.GetEncoding(m_encoding))
                        {
                            using (var encodedReader = new StreamReader(stream, m_PageEncoding))
                            {
                                response = encodedReader.ReadToEnd();
                            }
                        }                         
                    }
                } 
```

**问题：**

如何在同一个 WebResponse 上执行两次 ReadToEnd 方法，而不执行两次请求，这很糟糕。

# url - Facebook Graph API 不返回一页的个人资料图片

> ID：14259559
> 
> 赞同：2
> 
> 时间：2013-01-10T13:55:21.773
> 
> 标签：url, facebook-graph-api, facebook-page

*抱歉，作为新用户，我只能包含 2 个 URL，所以我不得不节省开支。*

我遇到了一个问题，Facebook 的 Graph API 中的用户对象没有正确返回个人资料图像。我只能找到这个问题的一个案例。对于我测试过的所有其他用途，它似乎工作正常。个人资料图片似乎没有任何隐私设置，因为我可以从个人资料页面正常查看它。

我正在使用 Facebook 的 Graph API 通过将此 URL 放入 IMG 标记来加载用户/页面的个人资料图像：

> https://graph.facebook.com/[profile-id]/picture?type=square

这适用于我在测试期间发现的所有情况，包括页面和用户。但是，对于我们在页面上部署应用程序的用户之一，URL 正在加载问号图像，就好像该页面没有个人资料图像一样。他们的页面显然有个人资料图片，如您在此处看到的：

> [http://www.facebook.com/EgansRestaurantPub](http://www.facebook.com/EgansRestaurantPub)

但是，如果您单击进入 Egan 的日历选项卡，您将看到问号图像。图片 URL 如下，返回问号：

> [https://graph.facebook.com/400488613342471/picture?type=square](https://graph.facebook.com/400488613342471/picture?type=square)

我使用以下链接格式检查了 ID，以确保它是页面的正确 ID：

> http://www.facebook.com/pages/[anything]/400488613342471

我的第一个理论是个人资料图片上有隐私设置，但我的个人帐户（作为页面的非粉丝）能够查看个人资料图片。我唯一的另一个想法是，这可能是因为该页面使用了一个不包含页面 ID 的短 URL (EgansRestaurantPub)。对于类似的页面，我发现使用以下方法有效：

> [graphurl]/可口可乐/图片
> 
> [graphurl]/宝马/图片

但是当对我的客户页面使用相同的方法时，它仍然返回一个问号。

有谁知道为什么这没有返回此页面的个人资料图片？这是我发现此问题的唯一页面。

我正在使用 PHP SDK 和一些 JS SDK。我宁愿避免再次调用会延迟加载页面的 API。这就是为什么我喜欢能够将 URL 直接放入 IMG 标记的原因。但如果没有其他办法，我会再打一个电话。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T14:21:38.477

[`user`](https://developers.facebook.com/docs/reference/api/user/)文件（图片字段） 中提到的似乎有某种限制：

> `access_token`具有白名单/定位限制的页面需要，否则`access_token`不需要

你只需要提供一个用户`access_token`就可以了：

```
https://graph.facebook.com/400488613342471/picture?type=square&access_token=XXX 
```

要对此进行测试，您可以直接从[Access Token Tool](https://developers.facebook.com/tools/access_token/)获取 access_token 。

# css - 是否可以为 Google 字体指定自定义名称？

> ID：14259560
> 
> 赞同：6
> 
> 时间：2013-01-10T13:55:27.177
> 
> 标签：css, fonts, webfonts, font-family, google-font-api

这是一个示例 CSS

```
h1 {
   font-family: 'header-font', arial, sans-serif;
}

p {
   font-family: 'paragraph-font', arial, serif;
} 
```

是否可以加载任何远程 Google 字体（比如说“Lato”），使其在 CSS 中的姓氏为“header-font”？

编辑：这背后的想法是能够轻松地交换 WP 主题中的字体。不幸的是，在我的情况下，在 CSS 预处理器中使用变量不是一个选项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:26:11.757

我不认为你可以说实话。当您查看 Google 字体时，Google 字体有一个预定义的名称。例如，请参阅：http: [//fonts.googleapis.com/css?family=Akronim](http://fonts.googleapis.com/css?family=Akronim)

它的名称设置为“Akronim”，我认为您不能使用任何其他名称来引用它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-06-03T11:01:48.803

是的，非常容易。一旦你在谷歌找到了字体，例如。

```
@import url('https://fonts.googleapis.com/css?family=Lato:400&subset=latin-ext'); 
```

只需将您的浏览器定向到指定的 url：

```
https://fonts.googleapis.com/css?family=Lato:400&subset=latin-ext 
```

你得到的是`@font-face`字体（或字体）的 CSS 项。只需在您的 CSS 中使用此详细版本，而不是原始`@import`规范。您可以`font-family`在任何这些描述中自由地重命名项目。是的，您必须确保与其他字体没有冲突，但命名完全取决于您。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-10T14:19:16.197

是的，当您在 @font-face 样式声明中定义字体系列时，您可以提供任何您想要的名称，并使用该名称稍后在样式表中引用它。

```
@font-face
{
  font-family: whateverYouWant;
  src: url('example.ttf'),
       url('example.eot');
       ... /* and so on */
} 
```

无论您在 font-family 属性中如何命名样式，它都会在文档的其余部分中被引用。但是我不知道它如何与本地字体文件竞争（因此，如果您尝试命名自定义字体 Arial，我不确定您会得到什么 - 自定义字体或真正的 Arial）。我不知道你为什么要这样做。

# .net - 迁移到 Azure 的最佳方式

> ID：14259563
> 
> 赞同：0
> 
> 时间：2013-01-10T13:55:44.430
> 
> 标签：.net, sql, azure, asmx, azure-sql-database

我是 Windows Azure 的新手，这对我来说很有趣，但我对此有一些疑问。我有网站（aspx），我的数据库是 SQL server 2008。还有一个 .NET windows 服务和 asmx 页面。

在 Azure 上托管它并支付更少费用的最佳选择是什么？是否可以将带有这些应用程序的整个 Windows 7 操作系统作为虚拟机并正常访问我的网站 (aspx) 页面（通过 IP）？这比直接迁移我的应用程序和数据库执行 Azure 更好（更便宜）吗？我仍然不知道这个环境会多久使用一次，如果有人可以解释一下它是如何计算的。

谢谢，尼古拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T13:58:47.187

这范围非常广泛，超出了您可能希望在这里得到有意义的答案的范围 - 听起来您的设置很复杂。您最好的选择是查看定价并得出自己的结论。

[定价计算器](http://www.windowsazure.com/en-us/pricing/calculator/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T13:59:44.920

Azure 定价计算器可[**在此处**](http://www.windowsazure.com/en-us/pricing/calculator/)获得。

Azure 定价[**在此处解释**](http://www.windowsazure.com/en-us/pricing/details/)

您可能想检查您是否有资格免费使用 WebSiteSpark 计划一年。 [http://blogs.msdn.com/b/windowsazure/archive/2012/06/20/announcing-one-year-of-windows-azure-free-with-websitespark.aspx](http://blogs.msdn.com/b/windowsazure/archive/2012/06/20/announcing-one-year-of-windows-azure-free-with-websitespark.aspx)

# javascript - 如何使用jsonp获取数据？

> ID：14259566
> 
> 赞同：-1
> 
> 时间：2013-01-10T13:55:46.997
> 
> 标签：javascript, jquery, json, jsonp

我正在尝试 使用 jsonp从[http://www.ikea.com/us/en/catalog/products/10176292获取一些文本。](http://www.ikea.com/us/en/catalog/products/10176292)

为了测试它是否有效，这就是我所做的

```
$.getJSON("http://www.ikea.com/us/en/catalog/products/10176292?format=json&jsoncallback=?",function(data) {
$('h1').text(data.modified);
}); 
```

这不起作用，所以它可能无效，但我在谷歌上找到的所有 jsonp 文档都使用 twitter 或 flickr API 作为示例。我很确定宜家没有 API，所以这些方法对我没有帮助。

但是，这确实有效并从 flickr 返回文本

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?id=25053835@N03&format=json&jsoncallback=?",function(data) {
$('h1').text(data.title);
}); 
```

我正在尝试这个，因为我看到了这个例子[http://www.foxycart.com/whos-using-foxy/case-studies/modernash](http://www.foxycart.com/whos-using-foxy/case-studies/modernash)它似乎与 jsonp 从宜家获取文本数据一起使用。我不需要任何复杂的东西，只需要能够检索一些简单的文本。

有人可以指出我正确的方向或提供一些提示。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:05:34.193

宜家的链接不是 JSON，因此您无法从中提取。宜家似乎没有公共 API。因此，您将无法从他们那里获取任何数据以供使用。

对于 Flickr，您走在正确的轨道上。这是你如何做到的。

```
$.ajax({
    dataType: 'jsonp',
    url: 'http://api.flickr.com/services/feeds/photos_public.gne?id=25053835@N03&format=json&jsoncallback=?',
    success: function(data){
        console.log(data);
    } 
}); 
```

如果你想得到标题，你会做 data.title 等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-26T14:56:07.240

您可能需要提供一些自定义标题。Wireshark 是你的朋友

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-22T20:07:38.777

在我看来，他们只是从网站上抓取数据。所有产品信息都存储在 html 中，他们将其添加到自己的购物车中的对象中。

由于您将图像拖到他们的书签中，我查看了图像中存储的数据@http : [//www.ikea.com/us/en/catalog/products/20011408/#/80193735](http://www.ikea.com/us/en/catalog/products/20011408/#/80193735)：

```
<img id="productImg" src="/us/en/images/products/lack-side-table__0115088_PE268302_S4.JPG" border="0" alt="LACK Side table IKEA The high-gloss surfaces reflect light and give a vibrant look. Easy to assemble. Low weight; easy to move." title="LACK Side table - high gloss red, 21 5/8x21 5/8 &quot; - IKEA" width="500" height="500" class="mn_global_shadow ui-draggable" style="width: 244px; display: inline-block; height: 244px; left: 0px; top: 0px;"> 
```

在标题中，我们得到名称、饰面、颜色和尺寸。
价格和数量保存在整个网站上似乎是标准的 id/class 中。

除了我没有看过之外，它是如何运作的，但它似乎并不太复杂。希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T14:00:42.253

您可以使用 ajax 补充您的 getJSON（请参阅此处的官方文档 - [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)），然后声明 JSONP 非常容易。

```
 $.ajax({
      dataType: "jsonp",
      url: 'http://api.flickr.com/services/feeds/photos_public.gne?id=25053835@N03&format=json&jsoncallback=?',
      data: data,
      success: function( data ) {
            $('h1').text(data.modified);
       }); 
```

编辑：@Matt Ball 是对的。在您使用类似上面的 ajax 调用之前，您需要确保您使用的 URL 返回实际的 json。您应该能够导航到所需的 URL 并查看原始 JSON。然后上面的所有函数都会做相应的获取和解析。

# java - 如何使用 Java Swing 以最大尺寸将组件绘制到图像上？

> ID：14259567
> 
> 赞同：0
> 
> 时间：2013-01-10T13:56:07.917
> 
> 标签：java, swing, bufferedimage

我一直在寻找一种将 JSwing 组件绘制到我找到许多答案的图像的方法。我还没有找到以忽略当前窗口大小并将自身打印到完全首选大小的图像的方式来绘制组件的方法。

我在可调整大小的框架中有组件。缩小后，一些组件被裁剪。不管怎样，我想要的是将此帧绘制成首选尺寸的图像。

```
 BufferedImage img = new BufferedImage(getPreferredSize().width,
            getPreferredSize().height, BufferedImage.TYPE_INT_RGB);
    Graphics2D g = img.createGraphics();
    this.printAll(g); 
```

这会产生在调整大小的窗口上看到的图像，但我希望它自己绘制，就像它有足够的首选空间一样，无论窗口或计算机屏幕大小如何。

已编辑。

这是SSCCE：

```
import java.awt.BorderLayout;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class Test extends JFrame {

    private static final long serialVersionUID = 1L;

    public Test() {
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setSize(100, 100);
        JLabel lbl = new JLabel("Long text. Long text. Long text. Long text.");
        JPanel panel = new JPanel();
        panel.add(lbl);
        JButton btn = new JButton("Screenshot");
        btn.addActionListener(new ActionListener() {

            @Override
            public void actionPerformed(ActionEvent e) {
                BufferedImage img = new BufferedImage(getPreferredSize().width,
                        getPreferredSize().height, BufferedImage.TYPE_INT_RGB);
                Graphics2D g = img.createGraphics();
                printAll(g);
                try {
                    ImageIO.write(img, "jpeg", new File("image.jpg"));
                } catch (IOException ex) {
                }
            }
        });

        getContentPane().setLayout(new BorderLayout());
        getContentPane().add(panel, BorderLayout.CENTER);
        getContentPane().add(btn, BorderLayout.PAGE_START);
    }

    public static void main(String[] args) {
        Test t = new Test();
        t.setVisible(true);
    }

} 
```

这将创建一个带有按钮和标签的小窗口，该标签太长而无法完全显示。按钮按原样截取屏幕截图。我想要的是一个 image.jpg，它在按钮和标签上具有完全可见的文本，就好像框架足够大以容纳它们一样。

如果我这样做：

```
Graphics2D g = img.createGraphics();
lbl.printAll(g); // instead of printAll(g); 
```

我将标签完全打印到 image.jpg （忽略帧边界）。我想用框架的所有组件来做到这一点。

# java - 内存不足错误 - 写入 Excel 时出现 Java 堆空间

> ID：14259568
> 
> 赞同：7
> 
> 时间：2013-01-10T13:56:10.140
> 
> 标签：java, excel, apache-poi

我有近 100,000 条记录的数据，我正在尝试通过 Java 代码将数据写入`.xlsx`文件。`XSSFWorkbook`我能够将所有数据从数据库获取到`ArrayList`. 通过迭代`ArryList`，我将数据`.xlsx`逐个单元格地写入文件。当它达到 8000 行时，java 代码会抛出`Out of Memory Heap Space`错误。

我在某个地方读过，`SXSSFWorkbook`与 相比会更轻`XSSFWorkbook`，所以我尝试使用`SXSSFWorkbook`. 但我仍然面临同样的问题。

那么工作簿或我的 Java 代码有什么遗漏吗？

最初，当我有 60,000 条记录数据时，我使用了`.xls`file. 相同的 java 代码能够生成`.xls`带有`HSSFWorkbook`.

增加 Java 堆空间根本不是一种选择，因为我的数据将来会大大增加。

任何帮助将不胜感激。

一小段代码，我将数据写入 Excel 的方式。

```
int rowNum = sheet.getLastRowNum();

Row lastRow = null ;

Cell cell = null;

ReportingHelperVo reportingHelperVo = null; 

for (ReportingVo reportingVo : reportingVos) {

rowNum++;

lastRow = sheet.createRow(rowNum);

reportingHelperVo = reportingVo.reportingHelperVo;

cell = lastRow.createCell(0);

cell.setCellValue(reportingHelperVo.getLocation());

cell.setCellStyle(style);

cell = lastRow.createCell(1);

cell.setCellValue(reportingHelperVo.getCity());

cell.setCellStyle(style);

cell = lastRow.createCell(2);

cell.setCellValue(reportingHelperVo.getCountry());

cell.setCellStyle(style);

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-05-24T08:12:37.797

`SXSSFWorkbook`不像重量轻，但这有一个优势。

如果您声明为

```
SXSSFWorkbook workbook= new SXSSFWorkbook(200); 
```

然后对于工作簿上每写入 200 行，内存将被刷新到磁盘空间，因此堆空间不会有负担。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T14:44:02.317

[XSSFWorkbook](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFWorkbook.html) - 为所有 Excel 文档创建对象表示（应该像 DOM 一样工作）。

[SXSSFWorkbook](http://poi.apache.org/apidocs/org/apache/poi/xssf/streaming/SXSSFWorkbook.html) - 应该需要恒定的内存。JMV什么时候抛出OOM？您使用了哪种类型的[ResultSet](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html)？尝试使用[FORWARD_ONLY](http://docs.oracle.com/javase/7/docs/api/java/sql/ResultSet.html#TYPE_FORWARD_ONLY)来限制从数据库中检索到的 JDBC 驱动程序缓存数据。

顺便说一句，修复 OutOfMemoryError 的最佳方法是分析堆转储。使用 -XX:+HeapDumpOnOutOfMemoryError 参数和[MAT](http://www.eclipse.org/mat/)来了解您的应用程序是如何工作的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T14:35:16.893

> 我正在将数据逐个单元格地写入 .xlsx 文件。当它达到 8000 行时，java 代码抛出内存堆空间不足错误。

重用现有的 java 对象，而不是`new`每次迭代都创建一个。

和/或使用 csv 文件而不是 excel。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-11T12:24:55.377

```
Workbook workBook = new SXSSFWorkbook(); 
```

您可以导出超过 10 万 (100000) 条记录。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T14:36:52.477

从数据库中获取页面结果，而不是一次性读取所有结果。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-12T15:34:25.303

很久以前，我在尝试从 R 写入 excel 文件（但使用 XLConnection）时遇到了类似的问题。最后，我通过使用 write.csv 然后用 Excel 打开它并使用“文本到列”按钮来解决。它非常快速和可靠。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-07-24T21:09:31.960

当我的 excel 达到 3000 行时，我遇到了同样的问题。在我的情况下，与 POI Excel 生成相关的主内存问题发生在样式表上。以下是我从代码中删除的内容。

1.  尝试在行级别使用样式表设置。
2.  如果您需要为每个单元格设置样式表.. 避免为每个单元格设置边框。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-12-07T10:16:44.543

嗨使用最新的 Apache POI JAR//并使用 SXSSF 进行流式传输或下载

```
 SXSSFWorkbook workbook = new SXSSFWorkbook(100); 
            workbook.setCompressTempFiles(true);
            Sheet sh = workbook.createSheet();
            ((SXSSFSheet) sh).setRandomAccessWindowSize(100); 
```

//写你的逻辑

```
 response.setContentType("application/vnd.ms-excel");
            response.setHeader("Content-Disposition", "attachment; 
       filename="+filename+".xlsx");
            workbook.write(response.getOutputStream());
            workbook.close();
            workbook.dispose(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-30T17:16:45.310

将 XSSFWorkbook 写入文件时出现内存不足问题。
上面的建议帮助很大。
见[http://poi.apache.org/components/spreadsheet/how-to.html#xssf_sax_api](http://poi.apache.org/components/spreadsheet/how-to.html#xssf_sax_api)

1.  更改 XSSFWorkbook wb = new XSSFWorkbook();
        到 SXSSFWorkbook wb = new SXSSFWorkbook(-1);
    SXSSFSheet sh = ... 到 SXSSFSheet sh = ...
    XSSFRow 到 SXSSFRow
    XSSFCell 到 SXSSFCell

2.  在 for 循环中使用 sh.flushRows(100); 每 100 行

3.  在 wb.write(out) 之后；
    添加 wb.dispose();

# java - 安装 SVN 后 Eclipse 在加载工作台时冻结

> ID：14259573
> 
> 赞同：2
> 
> 时间：2013-01-10T13:56:25.483
> 
> 标签：java, eclipse, osx-mountain-lion, eclipse-juno

我刚刚在 eclipse.org 上为 Java 开发人员下载了 eclipse 安装程序

我运行它没有问题，但是在上面安装了SVn之后，我再也无法打开eclipse了。

它每次都挂在加载工作台上（并且eclipse没有响应）。我必须终止进程。

我尝试了几件事，例如删除 .metadata 文件夹中的一些文件，但没有任何改变

我该怎么做才能将它与 SVN 客户端一起使用？

（Eclipse Juno，Mac OS X 山狮）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:09:41.190

您需要在您的计算机上安装 JavaHL。我认为这就是问题所在。这是[网站上的一些信息](http://subclipse.tigris.org/wiki/JavaHL#head-7498d204a5be83e0e97d196ba75fc797d5f0c822)

> OSX 带有一个 SVN 命令行客户端，但不幸的是它们不包含 JavaHL 库。
> 
> 最好的办法是为开源软件（例如 MacPorts 或 HomeBrew）安装一个 OSX 包管理器。如果您在 OSX 上进行软件开发，您最终会想要或需要不同的开源 Unix 应用程序。因此，值得努力设置其中之一，它们使您可以轻松获得 Subversion 并始终拥有最新版本。您还可以通过类似的简单命令轻松访问其他开源应用程序。
> 
> 对于 MacPorts，要运行的命令是：
> 
> sudo port install subversion-javahlbindings +no_bdb +universal 对于 HomeBrew，命令是：
> 
> brew install --universal --java subversion 注意与在 /Library/Java/Extensions 中创建符号链接相关的任何安装后说明。您需要遵循这些说明，以便 JavaHL 库默认可供 JVM 使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T09:53:32.937

这里有一个部分解决方法：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=388170#c14](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388170#c14)

你需要把这一行：
-Djava.awt.headless=true

eclipse.ini 文件中的某处（最后是可以的）。

在我的机器上可以找到 eclipse.ini：
/Applications//eclipse/Eclipse.app/Contents/MacOS/eclipse.ini

[在https://bugs.eclipse.org/bugs/show_bug.cgi?id=388170#c17](https://bugs.eclipse.org/bugs/show_bug.cgi?id=388170#c17)中提到了 MDT/papyrus 的一些问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T14:02:38.210

我不确定这是否有效。但是你可以试一试。

在 eclipse 文件夹中打开 eclipse.ini 并更改`--launcher.XXMaxPermSize 256M`为更大的值，例如`--launcher.XXMaxPermSize 512M`.

这增加了分配给 eclipse 进程的内存。但是，请确保 eclipse 以外的进程不会加载计算机。

# r - 使用 R 计算 XIRR

> ID：14259575
> 
> 赞同：1
> 
> 时间：2013-01-10T13:56:28.113
> 
> 标签：r

我正在尝试使用 R（类似于名为 XIRR 的 Excel 函数）计算非定期现金流的 IRR（内部收益率）。唯一的问题是它不起作用。我当然可以使用一些帮助来弄清楚出了什么问题..

```
R>cashflow <- c(275,275,275,275,275,275,275,275,275,275,275,275,416.833333333333,416.833333333333,416.833333333333,416.833333333333,416.833333333333,416.833333333333,416.833333333333,416.833333333333,416.833333333333,416.833333333333,416.833333333333,416.833333333333,452.666666666667,452.666666666667,452.666666666667,452.666666666667,452.666666666667,452.666666666667,452.666666666667,452.666666666667,452.666666666667,452.666666666667,452.666666666667,452.666666666667,534.583333333333,534.583333333333,534.583333333333,534.583333333333,534.583333333333,534.583333333333,534.583333333333,534.583333333333,534.583333333333,534.583333333333,534.583333333333,534.583333333333,-9246.969046)
R>dates <- c("1997-01-31","1997-02-28","1997-03-31","1997-04-30","1997-05-31","1997-06-30","1997-07-31","1997-08-31","1997-09-30","1997-10-31","1997-11-30","1997-12-31","1998-01-31","1998-02-28","1998-03-31","1998-04-30","1998-05-31","1998-06-30","1998-07-31","1998-08-31","1998-09-30","1998-10-31","1998-11-30","1998-12-31","1999-01-31","1999-02-28","1999-03-31","1999-04-30","1999-05-31","1999-06-30","1999-07-31","1999-08-31","1999-09-30","1999-10-31","1999-11-30","1999-12-31","2000-01-31","2000-02-29","2000-03-31","2000-04-30","2000-05-31","2000-06-30","2000-07-31","2000-08-31","2000-09-30","2000-10-31","2000-11-30","2000-12-31","2001-01-31")

R>irr <- xirr(cashflow, dates) 
```

它抛出错误：

`Error in while (pchg >= tol & abs(fval) > tol & iter <= itmax) { : missing value where TRUE/FALSE needed`

这是功能：

```
xirr <- function(cf, dates) {

 # Secant method.
secant <- function(par, fn, tol=1.e-07, itmax = 100, trace=FALSE, ...) { 
    # par = a starting vector with 2 starting values 
    # fn = a function whose first argument is the variable of interest 
    if (length(par) != 2) stop("You must specify a starting parameter vector of length 2") 
    p.2 <- par[1] 
    p.1 <- par[2] 
    f <- rep(NA, length(par)) 
    f[1] <- fn(p.1, ...) 
    f[2] <- fn(p.2, ...) 
    iter <- 1 
    pchg <- abs(p.2 - p.1) 
    fval <- f[2] 
    if (trace) cat("par: ", par, "fval: ", f, "\n") 
    while (pchg >= tol & abs(fval) > tol & iter <= itmax) { 
        p.new <- p.2 - (p.2 - p.1) * f[2] / (f[2] - f[1]) 
        pchg <- abs(p.new - p.2) 
        fval <- fn(p.new, ...) 
        p.1 <- p.2 
        p.2 <- p.new 
        f[1] <- f[2] 
        f[2] <- fval 
        iter <- iter + 1 
        if (trace) cat("par: ", p.new, "fval: ", fval, "\n") 
    } 
    list(par = p.new, value = fval, iter=iter) 
} 

# Net present value.
npv <- function(irr, cashflow, times) sum(cashflow / (1 + irr)^times) 

times <- as.numeric(difftime(dates, dates[1], units="days"))/365.24 

r <- secant(par=c(0,0.1), fn=npv, cashflow=cf, times=times) 

return(r$par)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T10:52:10.577

你有一个数学问题，而不是编程问题；

接近 -100% 的回报率时，净现值接近无穷大，符号为最后现金流量，因此无法计算内部回报率。

[http://en.wikipedia.org/wiki/Internal_rate_of_return](http://en.wikipedia.org/wiki/Internal_rate_of_return)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T18:25:18.247

首先让我感谢你发表这篇文章，因为我一直在寻找这样的功能很长一段时间。您的功能仍然无法控制`NaN`. `[fval]`您应该将`while`循环中的表达式更改为

```
fval <- ifelse(is.na(fn(p.new, ...)),1,fn(p.new, ...)) 
```

希望能帮助到你。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-05T11:20:43.167

包中有一个`xirr`功能`tvm`。

```
library(tvm)

xirr_value <- xirr(cashflow, dates) 
```

希望这可以帮助。

# javascript - 具有有限行和字符限制的文本区域

> ID：14259580
> 
> 赞同：4
> 
> 时间：2013-01-10T13:56:48.433
> 
> 标签：javascript, jquery, html, textarea

我需要具有 TextArea 的功能

```
1) maximum total lines- 6 and 
2) in each line there must be maximum of 16 chars
3) if user enters 17th character the cursor should go to the next line 
and user will type in there (the line will be counted)
4) if user reaches to the 7th line it will not allow user to write
5) if user type e.g "Hello, I Love StackOverflow and its features" (counting 
from 1st Char 'H', the 16th char is 't' but it is whole word 'StackOverflow',
    it shouldn't break and continue to next line e.g.
        Hello, I Love St
        ackOverflow
now the whole word should come to next line like:

        Hello, I Love
        StackOverflow 
        and its features 
```

这是我到目前为止所做的链接 [http://jsfiddle.net/nqjQ2/2/](http://jsfiddle.net/nqjQ2/2/)

有时某些功能有效，有时无效，并且面临 onKeyUp 和 onKeyDown 的浏览器问题，谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-10T14:21:38.177

我认为这主要是你想要的：

```
<textarea id="splitLines"></textarea> 
```

JavaScript：

```
var textarea = document.getElementById("splitLines");
textarea.onkeyup = function() {
    var lines = textarea.value.split("\n");
    for (var i = 0; i < lines.length; i++) {
        if (lines[i].length <= 16) continue;
        var j = 0; space = 16;
        while (j++ <= 16) {
            if (lines[i].charAt(j) === " ") space = j;
        }
        lines[i + 1] = lines[i].substring(space + 1) + (lines[i + 1] || "");
        lines[i] = lines[i].substring(0, space);
    }
    textarea.value = lines.slice(0, 6).join("\n");
}; 
```

看看[小提琴在行动](http://jsfiddle.net/9x5Fb/2/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:54:58.320

在jQuery中

```
$(function () {

    var limit = function (event) {
        var linha = $(this).attr("limit").split(",")[0];
        var coluna = $(this).attr("limit").split(",")[1];

        var array = $(this)
            .val()
            .split("\n");

        $.each(array, function (i, value) {
            array[i] = value.slice(0, linha);
        });

        if (array.length >= coluna) {
            array = array.slice(0, coluna);
        }

        $(this).val(array.join("\n"))

    }

    $("textarea[limit]")
        .keydown(limit)
        .keyup(limit);

})

<textarea limit='10,5'  cols=10 rows=5 ></textarea> 
```

[http://jsfiddle.net/PVv6c/](http://jsfiddle.net/PVv6c/)

# django - Django 相当于 Rails application.html.erb？

> ID：14259581
> 
> 赞同：3
> 
> 时间：2013-01-10T13:56:48.750
> 
> 标签：django

Django 中是否有类似于 Rails 的 HTML 文件的共享“主”布局`application.html.erb`？如果没有，是否有关于如何创建一个的最佳实践？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T14:10:08.523

[在 Django 中，最好的做法是使用模板继承](https://docs.djangoproject.com/en/1.4/topics/templates/#template-inheritance)来使用三个级别的模板。

我引用[django 的书](http://www.djangobook.com/en/2.0/chapter04.html#template-inheritance)来解释你：

> 您可以根据需要使用尽可能多的继承级别。使用继承的一种常见方法是以下三级方法：
> 
> 1.  创建一个 base.html 模板来保存您网站的主要外观。这是很少（如果有的话）改变的东西。
> 2.  为您网站的每个“部分”创建一个 base_SECTION.html 模板（例如，base_photos.html 和 base_forum.html）。这些模板扩展 base.html 并包括特定于部分的样式/设计。
> 3.  为每种类型的页面创建单独的模板，例如论坛页面或照片库。这些模板扩展了相应的部分模板。
> 
> 这种方法最大限度地提高了代码重用性，并可以轻松地将项目添加到共享区域，例如部分范围的导航。

# python - Python中的数据关系如何（pickle数据）？

> ID：14259588
> 
> 赞同：0
> 
> 时间：2013-01-10T13:57:02.263
> 
> 标签：python, pickle, relation

我是python环境的新手，所以我创建了一个示例小项目来试试这个：

1.  创建手机品牌并保存到brands.pkl文本字段：“品牌名称”
2.  通过下拉列表从先前创建的品牌中选择品牌并保存到 models.pkl 文本字段中创建手机模型：手机名称下拉列表：已创建品牌。

但我还没有找到解决它的方法（在 sql 中我可以通过 id 使用外键）。

谢谢你。

这是我的示例代码：

```
def phones(self):

    saved_phones= util.load_phones()

    return json.dumps(saved_phones)

@cherrypy.expose
def new_brands(self, *args, **kwargs):
    try:
        saved_brands = util.load_brands()

        brand = {'name': kwargs['brand_name']}

        try:
            brand['id'] = saved_brands[-1]['id'] + 1
        except IndexError:
            brand['id'] = 1

        saved_brands.append(brand)
        util.save_brands(saved_brands)

        return json.dumps(brand)
    except Exception as e:
        return json.dumps({'error': str(e)})

@cherrypy.expose
def new_phones(self, *args, **kwargs):
    try:
        saved_phones = util.load_phones()

        phone = {'model': kwargs['phone_model']}

        try:
            phone['id'] = saved_module[-1]['id'] + 1
        except IndexError:
            phone['id'] = 1

        saved_phones.append(phone)
        util.save_phones(saved_phones)

        return json.dumps(phone)
    except Exception as e:
        return json.dumps({'error': str(e)})

def save_phones(phones):
    pickle.dump(phones, open('phones.pkl', 'wb'))

def load_phones():
    try:
        saved_phones = pickle.load(open('phones.pkl', 'rb'))
    except IOError:
        saved_phones = []

    return saved_phones

def get_modul(phones, phone_id):
    for phone in phones:
        if phone['id'] == phone_id:
            return phone
        # if
    # for

    return None

def save_brands(brands):
    pickle.dump(brands, open('brands.pkl', 'wb'))

def load_brands():
    try:
        saved_brands = pickle.load(open('brands.pkl', 'rb'))
    except IOError:
        saved_brands = []

    return saved_brands

def get_modul(brands, brand_id):
    for brand in brands:
        if brand['id'] == brand_id:
            return brand
        # if
    # for

    return None 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:11:24.113

泡菜可能不适合您似乎试图解决的问题。当您想要一次性持久保存或传输一组相关对象时，pickle 是有意义的。

也许你真的想要一个 sql 数据库？ `sqlite3`python 提供了开箱即用的绑定，您可以在时间到来时轻松过渡到更强大的数据库。

# php - Wordpress 中是否有任何方法可以检查是否为 XMLRPC 调用生成内容，如 Feed

> ID：14259590
> 
> 赞同：1
> 
> 时间：2013-01-10T13:57:15.527
> 
> 标签：php, wordpress, xml-rpc

我有一个插件，它在网页内容之前呼应了一些东西。通常我不希望它出现在提要上，所以我这样做

```
if ( ! is_admin() && ! is_feed() )
  echo $script; 
```

现在，当有人使用 xmlrpc 调用来获取帖子时，我无法检查以防止我的脚本回显到帖子中。有没有像 is_xmlrpc() 这样的东西来检查这个？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:11:16.693

不是真的，但你可以很容易地自己创建它（我真的建议将它包装到一个函数中，因为检测不是太稳定，你可能需要更改它）：

```
/**
 * @return bool
 */
function is_xmlrpc() {
    return defined('XMLRPC_REQUEST') && XMLRPC_REQUEST;
} 
```

这是有效的，因为在[`xmlrpc.php`](http://core.trac.wordpress.org/browser/trunk/xmlrpc.php)最顶部`XMLRPC_REQUEST`定义了该常量。

# android - 将arraylist保存到androids内存的最佳方法

> ID：14259593
> 
> 赞同：1
> 
> 时间：2013-01-10T13:57:22.267
> 
> 标签：android, arrays, arraylist, save, fileoutputstream

我有一个包从一个活动传递到另一个活动。其中包含字符串 n（长度最大为 30）、字符串 ID 和字符串颜色。我需要将这些值作为数组（n、ID、颜色）保存到 ArrayList 中，然后将 ArrayList 保存到 androids 内存中。我一直在寻找一种最好的方法。我已经尝试过数据库，但目前它对我来说很复杂，我认为我不需要这么复杂的东西。我已经尝试过 FileOutputStream （正如这里解释的那样：http: [//developer.android.com/guide/topics/data/data-storage.html#pref](http://developer.android.com/guide/topics/data/data-storage.html#pref)？）但它对我不起作用，可能是因为我正在做某事错误的。我真的需要创建一个数组的arraylist，还是我可以使用arraylist of bundles，或者任何其他方式..？什么是最好的方法...？请帮忙..

谢谢大家...一直在尝试，但没有运气..我正在发布代码，希望有人可以帮我解决这个问题：

```
public class MainActivity extends Activity
{
String gotNotes;
String n;
String gotDOW;
String gotID;
public String clrs;
public String id;
public String nts;
String gotHour;
String gotColor;
TextView notes;
public static String FILENAME = "allevents";
String[] newevent;
String[] events;
SharedPreferences sharedPref;

  @Override
  public void onCreate(Bundle savedInstanceState) 
   {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Button settings = (Button)findViewById(R.id.settings);

    Bundle gotPackage = getIntent().getExtras();
    if (gotPackage != null){
    gotNotes = gotPackage.getString("AddedNote");
    if (gotNotes.equals(" "))
      {
        n = "Empty";
      }
    else 
        {
        n = gotNotes;
        }
    //gotDOW = gotPackage.getString("Day");
    //gotHour = gotPackage.getInt("Hour");
    gotID = gotPackage.getString("ID");
    gotColor = gotPackage.getString("color");

    initialize();

    }
    else{}

 settings.setOnClickListener(new OnClickListener()
    {
       public void onClick(View v)
         {
              Intent i = new Intent(v.getContext(),Settings.class);
              startActivityForResult(i,0);
         }

    });

 }

private void initialize() 
 {
    // TODO Auto-generated method stub
String[] newevent = {n, gotID, gotColor};

ArrayList<String[]> events = new ArrayList<String[]>();
events.add(newevent);

SharedPreferences sharedPref = this.getPreferences(Activity.MODE_PRIVATE);
SharedPreferences.Editor editor =     this.getPreferences(Activity.MODE_PRIVATE).edit();
editor.putString("yourKey", events.toString());
editor.commit();

String allData = sharedPref.getString("yourKey", null);
String[] playlists = allData.split(",");

  /* for (int number=0;number<events.lastIndexOf(sharedPref);number++)
   {

           notes = (TextView)findViewById(getResources().getIdentifier(playlists[number], getString(0), allData));
           notes.setText(number+1);

   }*/

    notes = (TextView)findViewById(getResources().getIdentifier(gotID,     "id",getPackageName()));
    notes.setText(n);
    notes.setGravity(Gravity.CENTER_HORIZONTAL);
    notes.setTextSize(TypedValue.COMPLEX_UNIT_SP, 12);
    if (gotColor.equals("Blue")){
    notes.setBackgroundColor(Color.rgb(99, 184, 255));}else
    if(gotColor.equals("Green")){
    notes.setBackgroundColor(Color.rgb(189, 252, 201));}else
    if(gotColor.equals("Yellow")){
    notes.setBackgroundColor(Color.rgb(238, 233, 191));}else
    if(gotColor.equals("Grey")){
    notes.setBackgroundColor(Color.LTGRAY);}else    
    if(gotColor.equals("Aqua")){
    notes.setBackgroundColor(Color.rgb(151, 255, 255));}else
    if(gotColor.equals("White")){}

}

    @Override
public boolean onCreateOptionsMenu(Menu menu) 
{
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:07:06.103

只需使用 SharedPreferences 来保存应用程序的数据。

```
SharedPreferences sharedPref = activity.getPreferences(Activity.MODE_PRIVATE);
SharedPreferences.Editor editor = activity.getPreferences(Activity.MODE_PRIVATE).edit();
editor.putString("yourKey", yourArray.toString());
editor.commit(); 
```

要将您的数组作为字符串，请执行以下操作：

```
String arrayString = sharedPref.getString("yourKey", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:31:25.780

您可以将数组保存到共享首选项中并取回它。[这](https://stackoverflow.com/questions/9054193/how-to-use-sharedpreferences-to-save-more-than-one-values#answer-9054246)是一个功能齐全的代码的好例子。

# java - 继承泛型类型并强制

> ID：14259600
> 
> 赞同：1
> 
> 时间：2013-01-10T13:57:54.040
> 
> 标签：java, class, generic-type-argument

是否可以继承泛型类型并在子类中强制接收类型？

就像是：

```
class A<GenericType>{}
class B extends A<GenericType>{} 
```

或者：

```
class B <PreciseType> extends A <GenericType>{} 
```

但是我在哪里定义 B 中使用的 GenericType？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:07:40.943

给定

```
class A<T> {} 
```

这取决于您尝试做什么，但两种选择都是可能的：

```
class B extends A<SomeType> {};
B bar = new B();
A<SomeType> foo = bar; //this is ok 
```

和

```
class B<T> extends A<T>{}; //you could use a name different than T here if you want
B<SomeType> bar = new B<SomeType>();
A<SomeType> foo = bar; //this is ok too 
```

但请记住，在第一种情况下*SomeType*是一个实际的类（如`String`），而在第二种情况下，*T*是一个泛型类型参数，在声明/创建B 类型的*对象*时需要实例化。

作为一条建议：在集合中使用泛型简单直接，但如果你想创建自己的泛型类，你真的需要正确理解它们。关于它们的方差属性有一些重要的陷阱，因此请仔细阅读本[教程](http://docs.oracle.com/javase/tutorial/java/generics/index.html)并多次掌握它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:14:43.100

假设 A 被声明为`class A<T> {}`并且您只想专注于`String`例如，您可以将其声明为`class B extends A<String>`.

例子：

```
public class A<T> {
    public T get() {
        return someT;
    }
}

public class B extends A<String> {
    public String get() {
        return "abcd";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:09:25.367

```
class B extends A<GenericType>{} 
```

这个有可能。您的`B`类将是一个新类，它`A`以特定类作为参数扩展泛型类，而`B`不是泛型类。

```
class B <PreciseType> extends A <GenericType>{} 
```

在这种情况下，您将创建一个`B`具有泛型参数的泛型类`PreciseType`。此类`B`扩展了 的特定版本`A`，但`A`的参数不依赖于`PreciseType`.

如果你想创建一个泛型类，它有一个在父类规范中使用的参数，你可以使用以下内容：

```
class B <PreciseType> extends A <PreciseType>{} 
```

# javascript - 获取对象值

> ID：14259601
> 
> 赞同：-1
> 
> 时间：2013-01-10T13:57:54.537
> 
> 标签：javascript, jquery, html

我有一个对象

```
var actions = {
    'photos': function()
    {
        var self = this; // self = actions

        $.get('./data.php?get=photos', function(data)
        {
            self.result = data;
        });
    },
    'videos': function()
    {
        var self = this;

        $.get('./data.php?get=videos', function(data)
        {
            self.result = data;
        });
    }
}; 
```

`actions`每个函数在被调用中再创建一项`result`

然后，而不是`switch`我使用这个（效果很好）：

```
if (actions[action])
{
    actions[action](); // call a function
    console.log(actions);
    console.log(actions.result);
} 
```

`action`是具有值`photos`或的变量`videos`。

`console.log(actions)`给出了这个：

```
Object
message: function ()
messages: function ()
profile: function ()
profile-edit: function ()
result: "<div>...</div>"
__proto__: Object 
```

所以我认为有`result`item in`actions`的 value `"<div>...</div>"`。

**但是**，`console.log(actions.result)` **回报** `undefined`。

**为什么？**

我知道所有这些代码都可能被重写，但我想了解`undefined`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:02:25.500

因为我们正在处理异步请求，所以我们使用“回调”。

当异步请求准备好时调用回调。您的请求将得到响应，然后您通过回调发送该响应。回调处理响应。

```
var actions = {
    'photos': function(callback)
    {
        $.get('./data.php?get=photos', callback);
    },
    'videos': function(callback)
    {
        $.get('./data.php?get=videos', callback);
    }
};

var action = 'photos';

actions[action](function(data) {
    console.log(data);
}); 
```

* * *

由于您坚持保留这些值，因此我将使用以下结构：

```
var actions = {
    'photos': function()
    {
        $.get('./data.php?get=photos', function() {
            this.__callback('photos', data);
        });
    },

    'videos': function()
    {
        $.get('./data.php?get=videos', function() {
            this.__callback('videos', data);
        });
    },

    '__callback': function(action, data) {
        this.results[action].push(data);
    },

    'results': {
        'photos': [],
        'videos': []
    }
};

var action = 'photos';

actions[action]();

// use a timeout because we are dealing with async requests
setTimeout(function() {
    console.log(actions.results); // shows all results
    console.log(actions.results.photos); // shows all photos results
    console.log(actions.results.videos); // shows all videos results
}, 3000); 
```

gaaah 多么可怕的一段代码……

# c++ - C++ 初始值设定项列表中的默认值

> ID：14259602
> 
> 赞同：16
> 
> 时间：2013-01-10T13:57:55.480
> 
> 标签：c++, standards, initializer-list

我昨天才知道，为初始化列表项指定参数是可选的。但是，在这种情况下发生的事情的规则是什么？

在下面的示例中，ptr 是否会被初始化为 0、切换为 false 和 Bar 默认构造？我想这个问题有点多余，因为如果未指定的参数值 == 未定义的行为，初始化列表中将没有什么意义。

我是否也可以指出 C++ 标准的部分，该部分说明了在初始化列表项没有被赋予参数的情况下的行为？

```
class Bar
{
    Bar() { }
};

class SomeClass;
class AnotherClass
{
public:
    SomeClass *ptr;
    bool toggle;
    Bar bar;

    AnotherClass() : ptr(), toggle(), bar() { }
    // as opposed to...
    // AnotherClass() : ptr(NULL), toggle(false), bar(Bar()) { }
}; 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-10T14:07:26.363

是的，成员将分别初始化为零和默认构造的对象。

C++ 11 标准在 12.6.2/7 中指定了这种行为：

> mem-initializer 中的 expression-list 或 braced-init-list 用于根据 8.5 的直接初始化规则初始化指定的子对象（或者，在委托构造函数的情况下，完整的类对象）。

反过来，8.5/10 内容如下：

> 初始值设定项为空括号集的对象，即 ()，应进行值初始化。

第 8.5/7 段定义了*value-initialized*：

> 对 T 类型的对象进行值初始化意味着：
> 
> *   如果 T 是具有用户提供的构造函数（12.1）的（可能是 cv 限定的）类类型（第 9 条），则调用 T 的默认构造函数（如果 T 没有可访问的默认构造函数，则初始化格式错误） ;
> *   如果 T 是没有用户提供的构造函数的（可能是 cv 限定的）非联合类类型，则该对象被零初始化，并且如果 T 的隐式声明的默认构造函数不平凡，则调用该构造函数。
> *   如果 T 是一个数组类型，那么每个元素都是值初始化的；
> *   否则，对象被零初始化。

最后，8.5/5 定义了*zero-initialized*：

> 对 T 类型的对象或引用进行零初始化意味着：
> 
> *   如果 T 是标量类型（3.9），则将对象设置为值 0（零），作为整数常量表达式，转换为 T；
> *   如果 T 是（可能是 cv 限定的）非联合类类型，则每个非静态数据成员和每个基类子对象都被初始化为零并且填充被初始化为零位；
> *   如果 T 是（可能是 cv 限定的）联合类型，则对象的第一个非静态命名数据成员被零初始化，填充被初始化为零位；
> *   如果 T 是数组类型，则每个元素都初始化为零；
> *   如果 T 是引用类型，则不执行初始化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-10T14:07:57.323

> 在下面的示例中，ptr 是否会被初始化为 0、切换为 false 和 Bar 默认构造？

是的。如果成员初始化器出现在带有空括号的初始化器列表中，则该成员是*value initialized*。这意味着数值类型将被初始化为零、指向 null 的指针以及具有使用该构造函数的默认构造函数的类。

如果您根本不将成员包含在初始化列表中，那么它将被*默认初始化*；在这种情况下。数字和指针类型将保持未初始化。

> 我是否也可以指出 C++ 标准的部分，该部分说明了在初始化列表项没有被赋予参数的情况下的行为？

C++11 12.6.2/7 指定规则与直接初始化相同。

C++11 8.5/16 指定如果初始化程序是`()`，则对象是值初始化的。

C++11 8.5/7 定义了值初始化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T14:07:06.920

[dcl.init] (aka 8.5) 中介绍了初始化

第 10 点说：

> 初始值设定项为空括号集的对象，即 ()，应进行值初始化。

*简单地说，值初始化*是类的默认构造和非类类型的零初始化。

# c# - 清除列表 - 清除的数据返回

> ID：14259603
> 
> 赞同：0
> 
> 时间：2013-01-10T13:57:55.550
> 
> 标签：c#, winforms

我正在构建播放 Wireshark 文件并使用 pcapdot.net 将数据包发送到网卡的应用程序。

在我的应用程序中，我获取目录根目录并仅添加过去 24 小时内的新文件。首先，我将目录中的所有文件添加到 List，然后添加到 ListView。现在，在我的应用程序完成播放我的所有文件后，我想清除我的列表，清除我的 ListView 并再次搜索过去 24 小时内的 now 文件并添加到我的 ListView。我的问题是，如果我选择包含 2 个文件的文件夹，添加 2 个文件，并且在应用程序完成播放这 2 个文件之后，我`List<string>`现在`ListView`是空的，应用程序现在不仅再次添加这 2 个文件，而且多次添加这个文件我找不到问题所在。

```
List<string> capturesList = null;
    string pathToSearch = null;
    DialogResult dialog;
lvFiles is my ListView 
```

**添加目录按钮**

```
private void btnAddDir_Click(object sender, EventArgs e)
{
    string fileToAdd = string.Empty;
    capturesList = new List<string>();
    dialog = folderBrowserDialog1.ShowDialog();
    tbAddDir.Text = folderBrowserDialog1.SelectedPath;
    pathToSearch = folderBrowserDialog1.SelectedPath;
    if (dialog == DialogResult.OK)
    {
        toolStripStatusLabel.Text = "Search for pcap files...";
        groupBoxRootDirectory.Enabled = false;
        btnStart.Enabled = false;
        addFiles();
    }
} 
```

**和添加文件：**

```
private void addFiles()
{
    BackgroundWorker backgroundWorker = new BackgroundWorker();
    backgroundWorker.WorkerReportsProgress = true;
    backgroundWorker.DoWork += new DoWorkEventHandler(
    (s3, e3) =>
    {
        capturesList = SafeFileEnumerator.EnumerateFiles(pathToSearch, "*.pcap",
            SearchOption.AllDirectories).ToList();
    });

    backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s3, e3) =>
        {
            if (capturesList.Count != 0)
                AddFilesToListView(capturesList);
        });

    backgroundWorker.RunWorkerAsync();
} 
```

**将文件添加到我的 ListView：**

```
private void addFileToListBox(string filePath, string duration)
{
    ListViewItem item = new ListViewItem(new string[] { new FileInfo(filePath).Name, duration, "Waiting" });
    item.Tag = new FileInfo(filePath).FullName;
    this.Invoke((MethodInvoker)delegate { lvFiles.Items.Add(item); });
}

private void AddFilesToListView(List<string> filesList)
{
    string fileToAdd = string.Empty;
    Editcap editcap = new Editcap();
    Capinfos capinfos = new Capinfos();
    BackgroundWorker backgroundWorker = new BackgroundWorker();
    backgroundWorker.WorkerReportsProgress = true;
    backgroundWorker.DoWork +=
        (s1, e1) =>
        {
            for (int i = 0; i < filesList.Count; i++)
            {
                FileInfo fileInfo = new FileInfo(filesList[i]);
                if (checkFileCreationDate(fileInfo))
                {
                    if (editcap.isWiresharkFormat(fileInfo.FullName))
                    {
                        if (editcap.isLibpcapFormat(fileInfo.FullName))
                        {
                            addFileToListBox(fileInfo.FullName, capinfos.getFileDuration(fileInfo.FullName));
                        }
                        else if (!editcap.isLibpcapFormat(fileInfo.FullName))
                        {
                            fileToAdd = editcap.getNewFileName(fileInfo.FullName);

                            if (new FileInfo(fileToAdd).Exists)
                            {
                                addFileToListBox(fileToAdd, capinfos.getFileDuration(fileToAdd));
                            }
                        }
                    }
                }
            }
        };

    backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
    (s1, e1) =>
    {

    });

    backgroundWorker.RunWorkerAsync();
} 
```

**开始播放按钮：**

```
private void btnStart_Click(object sender, EventArgs e)
{
    playFiles();
}

playFiles function:

private void playFiles()
{
    lockButtons();
    string filePath = string.Empty;
    BackgroundWorker backgroundWorker = new BackgroundWorker();
    backgroundWorker.WorkerReportsProgress = true;
    backgroundWorker.DoWork += new DoWorkEventHandler(
    (s3, e3) =>
    {
        for (int i = 0; i < lvFiles.Items.Count && shouldContinue; i++)
        {
            PcapFile pcapFile = new PcapFile();
            pcapFile.sendQueue(filePath, adapter);
        }
    });

    backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s3, e3) =>
        {
            capturesList.RemoveRange(0, capturesList.Count);
            lvFiles.Items.Clear();
            addFiles();
            playFiles();
        });

    backgroundWorker.RunWorkerAsync();

} 
```

在我完成 backgroundWorker.RunWorkerCompleted 中的 playFiles 函数后，我清除了所有列表并再次从我的目录根目录添加文件并再次 playFiles：

```
 capturesList.RemoveRange(0, capturesList.Count);
        lvFiles.Items.Clear();
        addFiles();
        playFiles(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:38:19.447

尝试将线程同步添加到列表中。以下是您在迭代或修改列表时可以使用的一个示例：

```
 lock (capturesList.SyncRoot) {

        /* perform iteration or modification */
        capturesList.Add("All other threads are waiting until i am finished");          

    } 
```

# abap - 在同一天为员工执行两个不同的操作

> ID：14259609
> 
> 赞同：1
> 
> 时间：2013-01-10T13:58:30.900
> 
> 标签：abap, sap-hr

通过 PA40 执行此操作时，它会覆盖前一个，如果我使用 HR_info_type 操作，它会在附加操作中创建第二个记录。为什么这种行为与 PA40 不同？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T11:10:43.530

尝试使用 302 信息类型进行添加操作。

[http://saphr.iexpertify.com/2008/12/additional-actions-infotype-it0302.html](http://saphr.iexpertify.com/2008/12/additional-actions-infotype-it0302.html)

# android - 是否可以使用 Dropbox、Google Drive、Skydrive 等作为服务器空间？

> ID：14259613
> 
> 赞同：3
> 
> 时间：2013-01-10T13:58:49.147
> 
> 标签：android, ios, cloud, storage

我正在创建一个在线连接到服务器以收集信息的应用程序。为了节省从大公司租用服务器空间的钱，我想知道这些免费服务（Dropbox、Google Drive、Microsoft Skydrive、Amazon Cloud 等）是否可以用作服务器空间？

我非常想要一个人们可以连接以收集数据的“空间”或“云”。示例：我有一个天气应用程序，我的服务器上有文件，我根据天气更新文件。我希望他们能够打开应用程序并连接到我的服务器以收集保存在我服务器上的天气数据。它真的不会有太多的数字空间，所以当我有可能使用像 Dropbox 这样的免费服务时，我不想支付 bookoo 的钱。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:08:04.390

您不能在任何这些服务上执行远程代码（我知道），但您当然可以将文件保存到它们。例如，您可以将文本文件（CSV？XML？JSON？）写入这些位置。

查看[Dropbox SDK](https://www.dropbox.com/developers/start/setup#ios)，了解如何将其集成到您的 iOS 或 Android 项目中的详细信息。这很简单。

这是上传文件的基本代码示例：

```
NSString *localPath = [[NSBundle mainBundle] pathForResource:@"Info" ofType:@"plist"];
NSString *filename = @"Info.plist";
NSString *destDir = @"/";
[[self restClient] uploadFile:filename toPath:destDir withParentRev:nil fromPath:localPath]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:08:42.997

我多次听说它有效，但还没有亲身体验。

查看这篇文章[http://lifehacker.com/5528104/use-dropbox-to-share-and-host-your-web-site](http://lifehacker.com/5528104/use-dropbox-to-share-and-host-your-web-site)

正如 Axeva 所说，您无法运行自己的脚本或 sql。您必须编写自己的解决方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T14:12:12.597

我确定您可以使用 Dropbox。但前提是您要下载或上传一些文件。而且我不确定它是否理想。但是您可能还想看看其他替代方案。如果您想在服务器上进行一些处理，您可以使用 GoogleAppEngine。也许 Parse.com 是另一种选择，但不确定它是否符合您的需求。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T14:15:08.807

查看[site44](http://site44.com/)。它允许您连接 Dropbox 并使用友好的 URL（自己的域或其他）来访问文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-10T14:30:31.657

我建议使用 Parse.com 之类的东西作为你的后端。他们的免费套餐可让您存储 1GB。可能不如 Dropbox，但 Parse 的 API 非常棒，用于存储/检索移动应用程序。你会很快启动并运行。不过，我还没有看过 Dropbox SDK。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-01-10T14:32:13.343

如果您只想将 Dropbox 用作 FTP 来放置一些 JSON 或 XML 文件，那么 Dropbox 可以正常工作。

请务必将其放入您的保管箱的“公共”文件夹并请求公共链接。

# c# - 如何根据查询中的 IF 语句的结果进行更新？

> ID：14259625
> 
> 赞同：-1
> 
> 时间：2013-01-10T13:59:17.320
> 
> 标签：c#, mysql, if-statement

正如上面的问题所说，我的查询中有一个 IF 子句。现在我想根据 IF 子句的结果进行更新。任何想法我怎么能做到这一点？

这是我的代码：

```
string cmdstr = "UPDATE itemsordered i " +
                "INNER JOIN" +
                    "(  SELECT itemsOrdered_quantity, itemsOrdered_ID,  " +
                            "CASE WHEN itemsOrdered_quantity = '" + quantityTxtBox.Text + "' THEN 'EQUAL' " +
                                 "WHEN itemsOrdered_quantity < '" + quantityTxtBox.Text + "' THEN 'LESS' " +
                                 "WHEN itemsOrdered_quantity > '" + quantityTxtBox.Text + "' THEN 'MORE'  " +
                        "END AS r " +
                        "FROM itemsordered " +
                    ") res ON i.itemsOrdered_ID = res.itemsOrdered_ID " +
               "INNER JOIN stocksdb s ON s.stock_ID = i.stock_ID " +
               "IF (res.r = 'EQUAL') " +
               "BEGIN " +
               "SET s.stock_quantity = (s.stock_quantity + i.itemsOrdered_quantity), " +
                   "s.stock_dateUpdated = '" + DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss") + "', " +
                   "i.itemsOrdered_status = 'RECEIVED', " +
                   "i.itemsOrdered_dateReceived = '" + DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss") + "' " +
                   "WHERE i.itemsOrdered_ID = '" + idTxtBox.Text + "' " +
               "END " +
               "IF (res.r = 'LESS') " +
               "BEGIN " +
               "SET s.stock_quantity = (s.stock_quantity + i.itemsOrdered_quantity), " +
                   "s.stock_dateUpdated = '" + DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss") + "', " +
                   "i.itemsOrdered_quantity = (i.itemsOrdered_quantity - " + quantityTxtBox.Text + "), " +
                   "i.itemsOrdered_dateReceived = '" + DateTime.Now.ToString("yyyy-MM-dd hh:mm:ss") + "' " +
                   "WHERE i.itemsOrdered_ID = '" + idTxtBox.Text + "' " +
               "END";
cmd = new MySqlCommand(cmdstr, db.mycon);
cmd.ExecuteNonQuery();

MessageBox.Show("ITEM RESTOCKED!"); 
```

它在 the 上返回一个错误，并说第一个子句`cmd.ExecuteNonQuery()`附近有一个错误。`IF`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:05:48.750

代替`IF ... BEGIN`, 使用`CASE`表达式。删除`BEGIN ... IF`and 只有一个`SET`子句。就像是：

```
SET s.stock_quantity = CASE 
                         WHEN res.r = 'EQUAL' THEN s.stock_quantity + i.itemsOrdered_quantity
                         ELSE ...
                       END,
   s.stock_dateUpdated = CASE 
                           WHEN res.r = 'EQUAL' THEN ...
                           ELSE ...
                         END,
   ....
... 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:06:02.547

我会取出`IF`块并有 2 个不同的 SQL 语句。

将不同的`IF`条件放在`WHERE`每个查询的子句中。

# youtube - 在画布元素上渲染 youtube 视频

> ID：14259626
> 
> 赞同：3
> 
> 时间：2013-01-10T13:59:20.400
> 
> 标签：youtube, youtube-api, html5-canvas

我们正在开发一个 html5 / javascript 应用程序，它在 html5 画布元素上呈现图像和视频。对于视频，我们使用的机制如下：

1.  在页面上嵌入隐藏的 html5 视频标签，并将所需视频作为 src
2.  使用 requestAnimationFrame 循环渲染画布
3.  在每次渲染调用中，我们从视频标签中获取当前视频帧并将其渲染到画布上。

现在我们正在寻找一种在画布上播放来自 youtube 的视频的方法。问题是 youtube 只允许嵌入他们的播放器并且没有选择只获取视频 url（嵌入到自己的视频元素中）他们提供的 html5 播放器被放置在 iframe 中，因此我们没有机会抓住视频帧。

有没有办法做这样的事情。或者 youtube 将来会允许获取视频网址吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-21T17:02:59.263

我可能有点晚了，但我遇到了这个网站，它在 <video> 标签中呈现 YouTube 视频，然后在画布上对其进行操作。

[http://omgig.com/](http://omgig.com/)

有人设法获得了该网站的源代码

[https://github.com/endlesshack/youtube-video](https://github.com/endlesshack/youtube-video)

我遇到的唯一问题是它似乎不适用于 vevo 视频

# asp.net - Web API：没有 MediaTypeFormatter 可用于从媒体类型为“text/plain”的内容中读取类型为“IEnumerable`1”的对象

> ID：14259629
> 
> 赞同：2
> 
> 时间：2013-01-10T13:59:23.440
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我通过调用我的 ASP.NET Web API 在我的客户端（一个 ASP.NET MVC 应用程序）中收到此错误。我检查了一下，Web API 正在返回数据。

```
No MediaTypeFormatter is available to read an object of type 
'IEnumerable`1' from content with media type 'text/plain'. 
```

我相信我可以继承`DataContractSerializer`并实现我自己的序列化程序，它可以将`Content-Type`HTTP 标头附加为`text/xml`.

但我的问题是：有必要吗？

因为如果是，则意味着默认情况下`DataContractSerializer`不会设置此基本标头。我想知道微软是否可以忽略这么重要的事情。还有其他出路吗？

**这是相关的客户端代码：**

```
public ActionResult Index()
        {
            HttpClient client = new HttpClient();

            var response = client.GetAsync("http://localhost:55333/api/bookreview/index").Result;

            if (response.IsSuccessStatusCode)
            {
                IEnumerable<BookReview> reviews = response.Content.ReadAsAsync<IEnumerable<BookReview>>().Result;
                return View(reviews);
            }
            else
            {
                ModelState.AddModelError("", string.Format("Reason: {0}", response.ReasonPhrase));
                return View();
            }
        } 
```

**这是服务器端（Web API）代码：**

```
public class BookReviewController : ApiController
    {
        [HttpGet]
        public IEnumerable<BookReview> Index()
        {
            try
            {
                using (var context = new BookReviewEntities())
                {
                    context.ContextOptions.ProxyCreationEnabled = false;

                    return context.BookReviews.Include("Book.Author");
                }
            }
            catch (Exception ex)
            {
                var responseMessage = new HttpResponseMessage
                {
                    Content = new StringContent("Couldn't retrieve the list of book reviews."),
                    ReasonPhrase = ex.Message.Replace('\n', ' ')
                };

                throw new HttpResponseException(responseMessage);
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T19:43:10.120

我相信（因为我现在没有时间测试它）您需要在您传递给的 responseMessage 上显式设置状态代码`HttpResponseException`。通常，`HttpResponseException`将为您设置状态代码，但由于您明确提供了响应消息，因此它将使用其中的状态代码。默认情况下，`HttpResponseMessage 的状态码为 200。

所以发生的事情是您在服务器上遇到错误，但仍然返回 200。这就是为什么您的客户端试图反序列化由 StringContent 生成的文本/纯文本，就好像它是一个 IEnumerable。

你需要设置

```
responseMessage.StatusCode = HttpStatusCode.InternalServerError 
```

在服务器上的异常处理程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T17:43:15.537

`ReadAsStringAsync`如果您的 WebAPI 期望以纯文本形式返回内容，那么如何使用？

```
response.Content.ReadAsStringAsync().Result; 
```

# sql - 如何从 TSQL 调用 Web 服务？(SQL 服务器 2000)

> ID：14259630
> 
> 赞同：4
> 
> 时间：2013-01-10T13:59:37.143
> 
> 标签：sql, sql-server, tsql, sql-server-2000

我想在 SQL Server 2000 中从 TSQL 调用 Web 服务。我尝试使用以下代码：

```
Declare @Object as Int; 
Declare @ResponseText as Varchar(8000);
Exec sp_OACreate 'MSXML2.XMLHTTP', @Object OUT;
Exec sp_OAMethod @Object, 'open', NULL, 'get','http://server/ws/service1.asmx/Test', 'false';
Exec sp_OAMethod @Object, 'send';
Exec sp_OAMethod @Object, 'responseText', @ResponseText OUTPUT;
Select @ResponseText Resultado;
Exec sp_OADestroy @Object; 
```

为此，我必须启用 Ole 自动化：

```
sp_configure 'show advanced options', 1;
GO
RECONFIGURE;
GO
sp_configure 'Ole Automation Procedures', 1;
GO
RECONFIGURE;
GO 
```

在我的测试服务器上工作正常，问题是在生产服务器上运行

```
sp_configure 'Ole Automation Procedures', 1; 
```

我收到以下错误：

> 配置选项“Ole 自动化程序”不存在，或者它可能是一个高级选项。

跑步时

```
exec sp_configure 
```

测试服务器上的记录“Ole 自动化程序”在生产服务器上没有。

## 更新

我修改代码以捕获错误：

```
Declare @Object as Int; 
Declare @ResponseText as Varchar(8000);
Exec sp_OACreate 'MSXML2.XMLHTTP', @Object OUT;
Exec sp_OAMethod @Object, 'open', NULL, 'get','http://server/ws/service1.asmx/Test', 'false';
Exec sp_OAMethod @Object, 'send';
Exec sp_OAMethod @Object, 'responseText', @ResponseText OUTPUT;
EXEC sp_OAGetErrorInfo @Object
Select @ResponseText Resultado;
Exec sp_OADestroy @Object; 
```

指令“sp_OAGetErrorInfo EXEC @ Object”返回：**(0x8004271A) srv_convert 中的错误。**

根据 Microsoft（[链接](http://support.microsoft.com/default.aspx?scid=kb%3ben-us%3b325492)）是 SqlServer 的问题。因为在我的情况下，网络服务的结果超过了 4000 个字符。

**如何从 TSQL 调用 Web 服务？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-28T19:18:16.627

我只是偶然发现了同样的错误-“（0x8004271A）srv_convert 中的错误。”

要克服字符限制，请使用如下 #tmp 表：

```
Create table #tmp(dt nvarchar(max))
insert into #tmp 
exec @hr =sp_OAGetProperty @objWinHttp, 'ResponseText'
Select dt from #tmp -- single column/single row.
Drop Table #tmp -- clean up 
```

[解决方案来源](http://jatindersingh.blogspot.com/2014/04/0x8004271a-odsole-extended-procedure.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:12:13.943

嘿嘿，如果您想从 T-SQL（无 SQLCLR）调用 HTTP Web 服务，我可能会对您有所帮助。您可以使用对象自动化扩展存储过程自动化 XMLHTTP 服务器对象。

[例子](http://sqlblog.com/blogs/adam_machanic/archive/2006/07/12/validate-a-url-from-sql-server.aspx)

不过，我建议您使用 CLR 或 SSIS 包。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-11T12:21:18.757

我通过以下方式解决了它：使用以下代码
创建一个 VBScript 文件（**callWS.vbs ）：**

```
if WScript.Arguments.Count = 1 then
    Set http = CreateObject("Microsoft.XmlHttp")
    http.open "GET", WScript.Arguments(0), FALSE
    http.send ""
    WScript.Echo http.responseText
else
    WScript.Echo "Not was provided the WS address."
end if 
```

然后在 TSQL 中：

```
declare @Command varchar(100)
declare @RetInfo varchar(8000)
select @Command = 'cscript c:\callWS.vbs "http://server/ws/service1.asmx/Test"'
print @Command
exec @RetInfo = master.dbo.xp_cmdshell @Command
print @RetInfo 
```

# c# - Scrollviewer 外的 WPF 元素忽略 ZIndex

> ID：14259638
> 
> 赞同：0
> 
> 时间：2013-01-10T14:00:00.533
> 
> 标签：c#, wpf, scrollviewer

如果我有一个元素在 WPF 滚动查看器的范围之外进行了转换，我似乎无法将它呈现在顶部。

考虑以下示例：

```
<Window x:Class="ScrollViewerContentTransform.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="350" Width="525">
    <Grid>

         <Grid.RowDefinitions>
             <RowDefinition/>
             <RowDefinition/>
         </Grid.RowDefinitions>

         <Border Grid.Row="0" Background="Blue" Panel.ZIndex="1"/>

         <ScrollViewer Grid.Row="1" Panel.ZIndex="2">
             <Grid>
                 <Border Width="30" Height="30" Background="Red">
                     <Border.RenderTransform>
                         <TranslateTransform Y="-80"/>
                     </Border.RenderTransform>
                 </Border>
             </Grid>
         </ScrollViewer>

    </Grid>
</Window> 
```

即使我设置了 zorder，红色边框仍将隐藏在蓝色边框下。

[http://imm.io/Sm2Q](http://imm.io/Sm2Q)

如果我用 Grid 替换 ScrollViewer，这将根据需要显示。关于在使用 ScrollViewer 时如何让元素显示在顶部的任何提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:24:48.883

据我所知，在使用 ScrollViewer 时是无法移除内容剪辑的，因为 ScrollViewer 控件模板会生成一个，而该模板`ScrollContentPresenter`又具有以下`GetLayoutClip`方法的实现：

```
protected override Geometry GetLayoutClip(Size layoutSlotSize) {
    return new RectangleGeometry(new Rect(base.RenderSize));
} 
```

这个类是`Sealed`所以你不能从它派生来覆盖这个方法。因此，请考虑从您的布局中删除 ScrollViewer。

# ios - 在每个选项卡错误处使用导航控制器从视图控制器转换到选项卡栏控制器

> ID：14259639
> 
> 赞同：0
> 
> 时间：2013-01-10T14:00:13.060
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, segue

嗨，我添加了一个准备 segue 代码以传输信息，但是我收到了一个错误。

我有一个标签栏控制器。它有 4 个选项卡。每个选项卡都有一个导航控制器和一个作为根视图控制器的 VC。

从 tab 1-->nav controller-->VC 1 我需要取一个值到 tab2-->nav controller --->VC1

（也是在选项卡 2 处连接到导航控制器的 segue，或在选项卡 2 处连接到根视图）提前谢谢

错误：customizableViewControllers]：无法识别的选择器发送到实例 0xf19bd60（但我要去选项卡 2（索引 1））？我的错误在哪里？

```
 if ([segue.identifier isEqualToString:@"ResultsSegue"])

        {
//the root VC at tab 2
            ResultsIndexViewController*controller=[[ResultsIndexViewController alloc]init];

            UITabBarController *tabController = [segue destinationViewController];
            controller = (ResultsIndexViewController*)[[tabController customizableViewControllers]objectAtIndex:1];//crashing here
            controller.resultsArray=[NSMutableArray arrayWithArray:_matchedResultsArray];

        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:42:26.440

这部分代码

```
 [1]   UITabBarController *tabController = [segue destinationViewController];
 [2]    controller = (ResultsIndexViewController*)[[tabController customizableViewControllers]objectAtIndex:1];//crashing here 
```

充满了误解。

在 [1] 中，您将 destinationViewController (type `UIViewController`) 分配给 type 的对象`UITabBarController`。这是编译器合法的（`UITabBarController`继承自`UIViewController`所以它们都是类型`UIViewController`），但它并不能真正反映正在发生的事情。您的转场将是 the `UIViewController`or it's `UINavigationController`。

因此，在第 [2] 行中，当您尝试将*tabController*用作选项卡栏控制器时，它会崩溃（因为它不是一个）。

您需要重新设计您的项目...忘记 Segue，并使用标签栏控制器。就像是...

```
- (IBAction)moveToTab2:(id)sender {
    ResultsViewController* resultsVC = (ResultsViewController*)
                [[self.tabBarController viewControllers] objectAtIndex:1];
    resultsVC.resultsArray=
                [NSMutableArray arrayWithArray:_matchedResultsArray];
    [self.tabBarController setSelectedViewController:resultsVC;
} 
```

# android - 我应该在 onStart/onStop 还是 onCreate/onDestroy 中启动/停止服务

> ID：14259642
> 
> 赞同：4
> 
> 时间：2013-01-10T14:00:29.353
> 
> 标签：android

目前，我有服务，它在单独的进程中运行。这是主要活动中的代码。

```
@Override
public void onStart() {
    super.onStart();

    // Start auto complete service.
    autoCompleteServiceIntent = new Intent(AutoCompleteService.class.getName()); 
    startService(autoCompleteServiceIntent);
    bindService(autoCompleteServiceIntent, serviceConnection, 0);        
}

@Override
public void onStop() {
    super.onStop();

    // Stop auto complete service.
    unbindService(serviceConnection);
    stopService(autoCompleteServiceIntent);
    autoCompleteServiceIntent = null;
} 
```

该服务将具有以下特点。

*   该服务在单独的进程中运行。原因是，它将大量数据加载到内存中。让服务在单独的进程中运行，将允许我们有更大的内存限制。
*   一旦主要活动死亡，服务也将死亡。

我想知道，我应该在**onStart/onStop**对中启动/停止服务吗？**或者，我应该在onCreate/onDestroy**中启动/停止服务。

我能想到的好处是，当代码在 onStart/onStop 对中时，只要活动不可见，我就可以立即释放未使用的内存。因此，释放大量系统资源。注意，onDestroy 并不总是被立即调用，即使活动已经退出。

不好的是，如果我按 HOME 并频繁返回，我的服务将频繁执行内存加载/卸载。这可能会导致我的应用程序执行速度相当慢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:05:13.817

在您的场景中，您应该停止**onDestroy**服务，原因是，当活动被销毁、取消赎回权或在需要内存时被系统销毁时调用它。因此，这将是结束服务的合适地点。

当您在应用程序中来回移动或访问家时，甚至还会调用**onStop 。****在主页上没有调用onDestroy**的原因是活动还没有被销毁。好像你关闭活动按下它会调用**onDestroy**。

# windows - 如何使用域管理员凭据登录 azure 虚拟机，在域中添加机器

> ID：14259650
> 
> 赞同：0
> 
> 时间：2013-01-10T14:00:51.140
> 
> 标签：windows, azure, azure-diagnostics, azure-connect

我在 azure 上创建了两个虚拟机。在一台机器上，我配置了 Active Directory/域控制器，并在配置的域中添加了另一台机器。

问题是如何使用域管理员控制器登录第二台机器。

谢谢拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:58:36.787

通过简单地指示您正在登录的域：

> 用户名：域名\管理员
> 
> 密码：您的管理员密码

就如此容易。

# mysql - 5个孩子后C分叉停止

> ID：14259651
> 
> 赞同：1
> 
> 时间：2013-01-10T14:00:54.253
> 
> 标签：mysql, c, ssh, fork

我正在开发一个 C 程序，它与数据库建立连接，获取设备列表，然后分叉请求并创建与该设备的 SSH 连接。我遇到的问题是，有 700 个结果的查询总是在遇到 5 个分叉后从头开始。

从本质上讲，我已经研究`pthread`并`glibc`处理了线程，但是我发现的一些示例没有按预期工作，或者增加了太多复杂性。

我遇到的问题是，它会在 5 个孩子处停止，然后停止，而不是完成其余 700 台设备。

示例代码：

```
#include <libssh2.h>

#include <sys/socket.h>
#include <netinet/in.h>
#include <sys/select.h>
#include <unistd.h>

#ifdef HAVE_ARPA_INET_H
#include <arpa/inet.h>
#endif

#include <sys/time.h>
#include <sys/wait.h>
#include <sys/types.h>
#include <stdlib.h>
#include <fcntl.h>
#include <errno.h>
#include <stdio.h>
#include <ctype.h>
#include <limits.h>

#include <mysql.h>

/********************************
 *
 * gcc -o confmgr cfgmgr.c -Wall -lpthread -lz -lm -lrt -ldl -lssh2 $(mysql_config --cflags) $(mysql_config --libs) -std=gnu99
 *
 ********************************/
static int waitsocket(int socket_fd, LIBSSH2_SESSION *session)
{
    struct timeval timeout;
    int rc;
    fd_set fd;
    fd_set *writefd = NULL;
    fd_set *readfd = NULL;
    int dir;

    timeout.tv_sec = 10;
    timeout.tv_usec = 0;

    FD_ZERO(&fd);

    FD_SET(socket_fd, &fd);

    /* now make sure we wait in the correct direction */ 
    dir = libssh2_session_block_directions(session);

    if(dir & LIBSSH2_SESSION_BLOCK_INBOUND)
        readfd = &fd;

    if(dir & LIBSSH2_SESSION_BLOCK_OUTBOUND)
        writefd = &fd;

    rc = select(socket_fd + 1, readfd, writefd, NULL, &timeout);

    return rc;
}

int *connect_to_device(MYSQL_RES** args){

    printf("%s", args[2]);

    const char *hostname = "1.1.1.1";
    const char *commandline = "command_to_run ";
    const char *username    = "static_user";
    const char *password    = "static_pass";

    unsigned long hostaddr;

    int sock;

    struct sockaddr_in sin;

    const char *fingerprint;
    LIBSSH2_SESSION *session;
    LIBSSH2_CHANNEL *channel;
    int rc;
    int exitcode;
    char *exitsignal=(char *)"none";
    int bytecount = 0;
    size_t len;
    LIBSSH2_KNOWNHOSTS *nh;
    int type;

    rc = libssh2_init (0);

    if (rc != 0) {
        fprintf (stderr, "libssh2 initialization failed (%d)\n", rc);
        return 1;
    }

    hostaddr = inet_addr(hostname);

    /* Ultra basic "connect to port 22 on localhost"
     * Your code is responsible for creating the socket establishing the
     * connection
     */ 
    sock = socket(AF_INET, SOCK_STREAM, 0);

    sin.sin_family = AF_INET;
    sin.sin_port = htons(22);
    sin.sin_addr.s_addr = hostaddr;
    if (connect(sock, (struct sockaddr*)(&sin),
                sizeof(struct sockaddr_in)) != 0) {
        fprintf(stderr, "failed to connect!\n");
        return -1;
    }

    /* Create a session instance */ 
    session = libssh2_session_init();

    if (!session)
        return -1;

    /* tell libssh2 we want it all done non-blocking */ 
    libssh2_session_set_blocking(session, 0);

    /* ... start it up. This will trade welcome banners, exchange keys,
     * and setup crypto, compression, and MAC layers
     */ 
    while ((rc = libssh2_session_handshake(session, sock)) ==

           LIBSSH2_ERROR_EAGAIN);
    if (rc) {
        fprintf(stderr, "Failure establishing SSH session: %d\n", rc);
        return -1;
    }

     /* We could authenticate via password */ 
     while ((rc = libssh2_userauth_password(session, username, password)) == LIBSSH2_ERROR_EAGAIN);
     if (rc) {

            fprintf(stderr, "Authentication by password failed.\n");

            goto shutdown;
     }

    libssh2_trace(session, LIBSSH2_TRACE_TRANS | LIBSSH2_TRACE_KEX | LIBSSH2_TRACE_AUTH | LIBSSH2_TRACE_CONN | LIBSSH2_TRACE_SCP | LIBSSH2_TRACE_SFTP | LIBSSH2_TRACE_ERROR | LIBSSH2_TRACE_PUBLICKEY );

    /* Exec non-blocking on the remove host */
    while( (channel = libssh2_channel_open_session(session)) == NULL &&
           libssh2_session_last_error(session,NULL,NULL,0) == LIBSSH2_ERROR_EAGAIN )
    {
        waitsocket(sock, session);
    }
    if( channel == NULL )
    {
        fprintf(stderr,"Error\n");
        exit( 1 );
    }
    while( (rc = libssh2_channel_exec(channel, commandline)) == LIBSSH2_ERROR_EAGAIN )
    {
        waitsocket(sock, session);
    }

    if( rc != 0 )
    {
        fprintf(stderr,"Error\n");
        exit( 1 );
    }

    for( ;; )
    {
        // loop until we block
        int rc;
        do
        {
            char buffer[0x4000];

            /* strange thing */
            sleep( 1 );

            rc = libssh2_channel_read( channel, buffer, sizeof(buffer) );
            if( rc > 0 )
            {
                int i;
                for( i=0; i < rc; ++i )
                    putchar( buffer[i] );
            }
        }
        while( rc > 0 );
        // this is due to blocking that would occur otherwise so we loop on this condition
        if( rc == LIBSSH2_ERROR_EAGAIN )
        {
            waitsocket(sock, session);
        }
        else if( rc == 0 )
            break;
    }

    while( (rc = libssh2_channel_close(channel)) == LIBSSH2_ERROR_EAGAIN )
        ;
    if( rc == 0 )
    {
        //does-not-work if( libssh2_channel_wait_closed(channel) == 0 )
        exitcode = libssh2_channel_get_exit_status( channel );
    }
    printf("\n%d\n", 221 );

    libssh2_channel_free(channel);
    channel = NULL;

    /***********************/

    shutdown:

        libssh2_session_disconnect(session, "Normal Shutdown, Thank you for playing");
        libssh2_session_free(session);

    close(sock);

    fprintf(stderr, "\n----------------------\nScript Finished\n\n");

    libssh2_exit();

    return 7;
}

/********************************
 *
 *
 *
 *
 ********************************/
int main(int argc, char *argv[]){

   pid_t childPID;
   int children = 0;

   MYSQL *conn;
   MYSQL_RES *res;
   MYSQL_ROW row;

   char *mySQLserver = "localhost";
   char *mySQLuser = "root";
   char *mySQLpassword = ""; /* set me first */
   char *mySQLdatabase = "Devices";

   conn = mysql_init(NULL);

   /* Connect to database */
   if (!mysql_real_connect(conn, mySQLserver,
         mySQLuser, mySQLpassword, mySQLdatabase, 0, NULL, 0)) {
      fprintf(stderr, "%s\n", mysql_error(conn));
      exit(1);
   }
   /* send SQL query */
   if (mysql_query(conn, "SELECT Hostname,Descr,IP,Username,Password FROM All_Active_Devices")) {
      fprintf(stderr, "%s\n", mysql_error(conn));
      exit(1);
   }

   res = mysql_use_result(conn);
   /* output table name */
   printf("MySQL Tables in mysql database:\n");
   while ((row = mysql_fetch_row(res)) != NULL){

      printf("%s \n", row[0]);

      children++;  // Last fork() was successful

        while (children >= 5)
        {
            int status;
            // Wait for one child to exit
            if (wait(&status) == 7)
            {
                children--;
            }
        }

      childPID = fork ();
      if (childPID < 0) {
                    printf("Fork Error \n");

      } else if (childPID == 0) {

        printf("\tCreating Fork for %s: pid %d \n", row[0], childPID);
        connect_to_device ( &row );

      }
      else{

        printf("\tDid not create Fork for %s \n", row[0]);

      }

   }

   /* close connection */
   mysql_free_result(res);
   mysql_close(conn);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:10:59.303

`connect_to_device`退货后会发生什么？看起来该线程也将在 while 循环中启动，因为我没有看到该子进程退出，让您处于`while children >=5`循环中。您的情况下的 5 个和 5 个线程并非巧合。

运行的一些输出会有所帮助，同时也会减少代码。

尝试在没有 ssh 代码的情况下让您的脚手架工作。只是让进程停止和启动不需要 ssh。一旦确定底层支持有效，然后添加应用程序逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:24:32.673

您的子进程正在退出 - 特别是没有退出状态 7 - 您的`connect_to_device`函数中有一个 return，但它被忽略了，每个子进程开始循环，创建更多的子进程。

你可能想要：`return connect_to_device ( &row );`相反。

`wait()`返回死亡的子 PID，而不是它的状态——在`WEXITSTATUS(status)`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T14:11:01.717

也许`ServerAliveCountMax`正在妨碍：

***从下面的 NETCODER 编辑***

> **ServerAliveCountMax设置在没有** **ssh** (1) 从服务器接收到任何消息的
> 情况下可以发送的服务器活动消息的数量（见下文） 。如果在发送服务器活动消息时达到此阈值，ssh 将断开与服务器的连接，终止会话。需要注意的是，服务器存活消息的使用与**TCPKeepAlive**非常不同（如下）。服务器活动消息是通过加密通道发送的，因此不会被欺骗。**TCPKeepAlive**启用的 TCP keepalive 选项 是可欺骗的。当客户端或服务器依赖于知道连接何时变为非活动状态时，服务器活动机制很有价值。
> 
>  ******默认值为 3。例如，如果**ServerAliveInterval**（见下文）设置为 15 并且**ServerAliveCountMax**保留默认值，如果服务器变得无响应，则 ssh 将在大约 45 秒后断开连接。此选项仅适用于协议版本 2。******

 ****有关详细信息，请参见ssh_config ( )的[手册页。](http://linux.die.net/man/5/ssh_config)`man 5 ssh_config`****

# hibernate - Hibernate 的 sessionFactory 是线程安全的原因

> ID：14259652
> 
> 赞同：8
> 
> 时间：2013-01-10T14:01:11.967
> 
> 标签：hibernate

我了解到 Hibernate 的会话工厂据说是线程安全的。任何人都可以阐明它如何在 Web 应用程序中充当线程安全以及所有方法如何同步或其他任何东西？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T14:31:14.313

[SessionFactory 的内部状态是不可变的。](http://docs.jboss.org/hibernate/core/3.5/api/org/hibernate/SessionFactory.html)大多数并发问题是由于共享具有可变状态的对象而发生的。一旦对象是不可变的，它的内部状态就会在创建时设置并且不能更改。如此多的线程可以同时访问它并请求会话。

但是，Session 是一个非线程安全的对象，你不能在线程之间共享它。

# utf-8 - ANTLR 3 - 我如何制作不跨特殊字符的唯一令牌

> ID：14259653
> 
> 赞同：0
> 
> 时间：2013-01-10T14:01:14.133
> 
> 标签：utf-8, antlr, special-characters

我有一个简短的问题：

```
// Lexer 
LOOP_NAME   :   (LETTER|DIGIT)+;

OTHERCHARS  :   ~('>' | '}')+;

LETTER      :   ('A'..'Z')|('a'..'z');

DIGIT       :   ('0'..'9');

A_ELEMENT
    :       (LETTER|'_')*(LETTER|DIGIT|'_'|'.');

// Parser-Konfiguration
WS          : ( ' '     
        | '\t'
        | '\r'
            | '\n'
            ) {$channel=HIDDEN;}
            ; 
```

我的问题是这是不可能的，因为：

> 因此，对于该输入 [14:55:32] 错误（208）：ltxt2.g:61:1：以下标记定义永远无法匹配，因为先前的标记与相同的输入匹配，因此禁用了替代项 2：字母、数字、A_ELEMENT、WS

我的问题是我还需要用 OTHERCHARS 捕获 UTF8 ......而且我不能将所有特殊的 UTF8 字符放入 Lexer 规则中，因为我的范围不能像（“！”..“？”）。

所以我需要NOT（〜）。这里的 OTHERCHARS 可以是除“>”或“}”之外的所有字符。这两个关闭了一个字面的上下文，并且被禁止在其中。

似乎没有很好地引用此类案例，所以如果有人知道解决方法，我会很高兴。这里的 NOT 运算符产生了我需要解决的矛盾。

提前致谢。

最好的，希望

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:32:37.387

移动`OTHERCHARS`到词法分析器的最后并像这样定义它：

```
OTHERCHARS : . ; 
```

在 Java 目标中，这将匹配单个 UTF-16 代码点，该代码点与之前的规则不匹配。我通常命名规则`ANY_CHAR`并将其视为后备。通过使用`.`而不是`.+`，词法分析器将仅在没有其他规则匹配时使用此规则。

1.  如果另一条规则匹配多个字符，则该规则将优先`ANY_CHAR`于匹配输入中的大量字符。
2.  如果另一条规则与一个字符完全匹配，则该规则将优先`ANY_CHAR`于出现在语法中的较早位置。

编辑：要从规则中排除`}`和`>`排除`ANY_CHAR`，您需要为它们创建规则，以便它们包含在第 2 点中。

```
RBRACE   : '}' ;
GT       : '>' ;
ANY_CHAR : . ; 
```

# jsf - 带有 JSF 的 Spring 安全性

> ID：14259657
> 
> 赞同：0
> 
> 时间：2013-01-10T14:01:24.500
> 
> 标签：jsf, spring-security

两个问题：

**问题1：**

我的`applicaitonContext-security.xml`文件中有以下内容：

```
<security:http auto-config="true" access-denied-page="/denied.jsf" servlet-api-provision="false">
    <security:intercept-url pattern="/denied.jsf" filters="none" />     
    <security:intercept-url pattern="/login.jsf" filters="none" />
    <security:intercept-url pattern="/redirect.html" filters="none" />
    <security:intercept-url pattern="/images/**" filters="none" />      
    <security:intercept-url pattern="/a4j_resource/**" filters="none" />        
    <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_FULLY" />
    <security:form-login login-page="/login.jsf" authentication-failure-url="/login.jsf" default-target-url="/redirect.html" />     
    <security:logout />
</security:http> 
```

但是当我去时，`http://localhost:8080/summary/projects.jsf`我不会被重定向到`login.jsf`页面。有任何想法吗。

**问题2：** 在`projects.xhtml`我的页面中

```
<rich:comboBox  value="#{projectUiService.coordinatorSelected}"  directInputSuggestions="true"  defaultLabel="Enter Co-ordinator" > 
```

在`getCoordinatorSelected`我拥有的方法上，`@RolesAllowed("READ_PROJECT")`但我得到的只是错误：

```
AuthenticationCredentialsNotFoundException: An Authentication object was not found in the SecurityContext 
```

当用户未登录时，如何让 Spring 重定向到登录页面，`denied.jsf`如果用户没有正确的权限，如何让它重定向到页面？

在过去的 6 小时里，我环顾四周并尝试了大量的日志记录，但找不到解决方案。任何指针将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:16:28.723

你需要更换你所有的

```
<security:intercept-url pattern="/denied.jsf" filters="none" /> 
```

由分开的建筑

```
<security:http pattern="/denied.jsf" security="none" /> 
```

标签。一个带有 filters="none" 的拦截 URL[将停用您的所有 http 配置元素](http://static.springsource.org/spring-security/site/docs/3.2.x/reference/springsecurity-single.html#nsa-intercept-url-filters)

第二种选择：

```
<security:intercept-url pattern="/denied.jsf" access="IS_AUTHENTICATED_ANONYMOUSLY" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:14:57.490

**解决了！** @[Maksym Demidas] 是正确的。继承了一个使用 Spring 2.5 和 3 组合的应用程序。整理出对 Spring 3 的所有依赖项并将安全 xml 文件更新为：

```
....
<security:http pattern="/denied.jsf" security="none"/>
<security:http pattern="/login.jsf" security="none"/>
....
<security:http auto-config="true" access-denied-page="/denied.jsf" servlet-api-provision="false">
    <security:intercept-url pattern="/login.jsf" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <security:intercept-url pattern="/**" access="IS_AUTHENTICATED_FULLY" />
    <security:form-login login-page="/login.jsf" authentication-failure-url="/login.jsf" default-target-url="/redirect.html" />
    <security:logout />
</security:http> 
```

现在一切正常。

# bash - 在 shell 脚本中处理 python 返回的退出代码

> ID：14259660
> 
> 赞同：16
> 
> 时间：2013-01-10T14:01:36.760
> 
> 标签：bash, shell, python-2.7, error-handling

我正在从 shell 脚本中调用 python 脚本。如果发生故障，python 脚本会返回错误代码。

如何在 shell 脚本中处理这些错误代码并在必要时退出？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-10T14:04:54.133

最后一个命令的退出代码包含在`$?`.

使用下面的伪代码：

```
python myPythonScript.py
ret=$?
if [ $ret -ne 0 ]; then
     #Handle failure
     #exit if required
fi 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T14:04:56.937

你的意思[是`$?`变量](http://tldp.org/LDP/abs/html/exit-status.html)？

```
$ python -c 'import foobar' > /dev/null
Traceback (most recent call last):
  File "<string>", line 1, in <module>
ImportError: No module named foobar
$ echo $?
1
$ python -c 'import this' > /dev/null
$ echo $?
0 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-08-17T14:52:18.657

请使用以下逻辑处理脚本执行结果：

```
python myPythonScript.py
# $? =  is the exit status of the most recently-executed command; by convention, 0 means success and anything else indicates failure. 
if [ $? -eq 0 ]
then
  echo "Successfully executed script"
else
  # Redirect stdout from echo command to stderr.
  echo "Script exited with error." >&2
fi 
```

# magento - Magento 1.7：在菜单中添加活动主页按钮

> ID：14259662
> 
> 赞同：1
> 
> 时间：2013-01-10T14:01:42.900
> 
> 标签：magento, menu

我试图在我的 magento 商店的导航中添加一个主页按钮。已经写了很多，我发现这段代码可以完成这项工作。

```
 <li class="home <?php echo !$_anyActive ? 'active' : '' ?>"><a href="<?php echo $this->getUrl('')?>"><span><?php echo $this->__('Home') ?></span></a></li> 
```

唯一的缺点是它在单击其他类别时保持活动状态。所以它的行为不像菜单的其余部分。

有什么帮助吗？

提前谢谢了！

更新：解决了下面给出的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:41:47.187

这应该为您解决问题...

```
<li class="home <?php if (Mage::helper('core/url')->getCurrentUrl() === Mage::helper('core/url')->getHomeUrl()):?> active<?php endif;?>"><a href="<?php echo $this->getUrl('')?>"><span><?php echo $this->__('Home') ?></span></a></li> 
```

如您所见，它会检查 url 是否与 home url 匹配。如果是这样，则设置类`active`。

# grails - Grails 控制器视图文件夹的相对路径

> ID：14259668
> 
> 赞同：0
> 
> 时间：2013-01-10T14:02:12.007
> 
> 标签：grails, taglib

有一个 Grails 2.1 应用程序，我有一个标签库来为不同的控制器呈现摘要，我有一个指向正确视图文件夹的问题。

例如。**TestAController**和**TestBController**`summary.gsp`在各自的视图文件夹中都有一个特定于控制器的视图文件。即`/testa/summary.gsp`和`/testb/summary.gsp`。

我如何才能让我的 taglib 呈现`summary.gsp`与当前正在运行的控制器相关的内容 - 我需要设置一个类似`"??/summary-gsp"`.

我不想实现任何 if/else 逻辑，因为可能有 10000 个控制器使用这个 taglib，都指定自己的`summary.gsp`.

这是可行的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:07:00.117

您可以访问 taglib 中的 params 对象，这样：

```
out << render(template: "/${params.controller}/summary") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:25:59.447

调用者应该将模板的路径作为标签的参数传递。如果省略此参数，您可以使用约定来定位模板，例如

```
class MyTagLib {

  def renderSummary = {attrs ->

    def defaultTemplatePath = "/${params.controller}/summary"
    def templatePath = attrs.template ?: defaultTemplatePath
    out << g.render(template: templatePath)
  }
} 
```

# asp.net - Orchard 1.6 内容类型字段问题？

> ID：14259669
> 
> 赞同：0
> 
> 时间：2013-01-10T14:02:12.610
> 
> 标签：asp.net, asp.net-mvc, orchardcms, orchardcms-1.6

果园版本是 1.6。

我创建了一个名为**Book**的新内容类型，并向该类型添加了一些字段。

我有 3 个关于内容类型字段的问题。

*   输入字段和文本字段有什么**区别**？

*   如何**将枚举字段与数据绑定**，例如我想创建一个枚举字段，数据为“北京”、“上海”、“广州”？

*   我已经上传了一个 .docx 文件，其中 Media Picker Field 写作替代文本是**This is my first attachment**，但**MediaPickerField**链接显示在网页中，而不是我的书面替代文本。如何解决？

就这些。谢谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T18:15:20.523

好问题......输入字段和文本字段之间的区别在于输入字段不应该存在。:) 我强烈反对它，因为它会引起混乱，而且确实如此……输入字段应该可以帮助您使用新的 html5 输入类型。文本字段是关于输入所有类型的文本。一个是呈现实现细节，特定于所使用的渲染技术，另一个是关于内容语义。

不知道你说的第二个问题是什么意思。是什么阻止你这样做？这些值在内容类型编辑器中输入，在部署字段时出现的设置中（旁边的小 >）。

旁注：可能最好创建三个不同的问题......

# java - 支持 AES-NI 的 Java SSL 提供程序

> ID：14259671
> 
> 赞同：4
> 
> 时间：2013-01-10T14:02:15.270
> 
> 标签：java, security, aes-ni

是否有可以处理 SSL 连接并支持 AES-NI 指令的 Java 安全提供程序？

我曾尝试将 SunPKCS11 与 Mozilla NSS 一起使用，但它不适用于使用 AES 加密的 SSL 连接。根据[Java PKCS#11 Reference Guide](http://docs.oracle.com/javase/7/docs/technotes/guides/security/p11guide.html)，此提供程序不支持 SSLContext.* “算法” :-(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T12:39:24.240

2012 年 12 月最近有一些关于[openjdk](/questions/tagged/openjdk "显示标记为“openjdk”的问题")的活动，以支持x86 上的**AES-NI**。见[JEPS-164](http://openjdk.java.net/jeps/164)

[此处讨论](http://hg.openjdk.java.net/jdk8/jdk8/hotspot/rev/a3ecd773a7b9)[了](http://permalink.gmane.org/gmane.comp.java.openjdk.hotspot.compiler.devel/9204)2012 年 12 月与 jdk8 的合并，包括更改汇编代码以支持 AES-NI。从讨论看来，更改可能会重新移植到 jdk7u12。

2012 年 11 月的[IBM JCE](http://www-01.ibm.com/support/docview.wss?uid=swg21615622) for Java V7 包括对**AES-NI 的**支持。

如果使用这些新的 JRE 之一，您的 java SSL/TLS 实现应该利用**AES-NI**而无需使用 PKCS11 提供程序。

您可以检查您的 BIOS 以查看是否可以启用/禁用**AES-NI 。**如果可以，那么您可以运行 AES 加密/解密的微基准测试，看看有什么区别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:49:55.310

我相信我已经找到了我的问题的答案。

首先，我为两个不同的库混合了“提供者”：JCE（加密算法的实现）和 JSSE（对安全套接字的支持）。

根据[JavaTM 安全套接字扩展 (JSSE) 参考指南，JCE 和硬件加速/智能卡支持部分](http://docs.oracle.com/javase/6/docs/technotes/guides/security/jsse/JSSERefGuide.html#PKCS11)，默认 JSSE 提供程序 (SunJSSE) 使用 JCE 进行所有加密操作。

可以将 JCE 配置为使用硬件加速的 AES，例如通过使用 SunPKCS11 + mozilla-nss 库，如[本答案](https://stackoverflow.com/a/14260181/47190)中所述。

剩下要做的（在我的情况下）是确保 SSL 配置了正确的密码，并验证 SunPKCS11 是否实际被 ssl 连接使用。

# iphone - 如何在目标c中以期望格式显示字符串组合

> ID：14259672
> 
> 赞同：1
> 
> 时间：2013-01-10T14:02:22.603
> 
> 标签：iphone, objective-c

嗨，我想像这种格式在 nslog 上显示字符串组合

```
abc
bca
acb
and so on 
```

但我的程序向我展示了这种格式排列 =

```
 (
        (
        c,
        b,
        a
    ),
        (
        b,
        c,
        a
    ),
        (
        c,
        a,
        b
    ),
        (
        a,
        c,
        b
    ),
        (
        b,
        a,
        c
    ),
        (
        a,
        b,
        c
    )
) 
```

这是我正在使用的代码

```
NSArray *array = [NSArray arrayWithObjects:@"a",@"b",@"c",nil];

NSMutableArray *permutations = nil;

int i = 0;
for (i = 0; i < array.count ; i++){

    if (!permutations){
        permutations = [NSMutableArray array];
        for (NSString *character in array){
            [permutations addObject:[NSArray arrayWithObject:character]];

        }

    } else {

        //make copy of permutations array and clean og array
        NSMutableArray *aCopy = [permutations copy] ;
        [permutations removeAllObjects];

        for (NSString *character in array){

            //loop through the copy
            for (NSArray *oldArray in aCopy){

                //check if old string contains looping char..
                if ([oldArray containsObject:character] == NO){

                    //update array
                    NSMutableArray *newArray = [NSMutableArray arrayWithArray:oldArray];
                    [newArray addObject:character];

                    //add to permutations
                    [permutations addObject:newArray];

                }

            }
        }            
    }

}

NSLog(@"permutations = \n %@",permutations);
} 
```

请告诉我如何以我的要求格式显示它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:16:05.377

试试这种方式：

```
NSString *stringPermuted=[NSString new];
for (NSArray *array in permutations) {
    for (NSString *string in array) {
        stringPermuted=[stringPermuted stringByAppendingFormat:@"%@",string];
    }
    stringPermuted=[stringPermuted stringByAppendingFormat:@"\n"];
}

NSLog(@"permutations=\n%@",stringPermuted); 
```

另一种方式 ：

```
NSString *stringPermuted=[NSString new];
for (NSArray *array in permutations) {
    stringPermuted=[stringPermuted stringByAppendingFormat:@"%@\n",[array componentsJoinedByString:@""]];
}
NSLog(@"permutations=\n%@",stringPermuted); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:17:41.767

创建一个简单的显示方法

```
- (NSString *)formatPermutations:(NSArray *)permutations {
    NSString * formattedPermutations = @"";
    for (NSArray * permutation in permutations) {
        formattedPermutations = [formattedPermutations stringByAppendingFormat:@"%@\n", [self formatPermutation:permutation]];
    }
    return formattedPermutation;
}

- (NSString *)formatPermutation:(NSArray *)permutation {
    NSString * formattedPermutation = @"";
    for (NSString * letter in permutation) {
        formattedPermutation = [formattedPermutation stringByAppendingString:letter];
    }
    return formattedPermutation;
} 
```

并使用它

```
NSLog(@"permutations = \n %@",[self formatPermutations:permutations]); 
```

另一种选择（也许是更好的选择）是创建您自己的类`PermutationArray`并`Permutation`覆盖它们的`description`方法。

这种方法等效于 Java `toString`，只要`NSLog`需要`NSString`从对象中获取表示，就会调用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:15:24.567

在最后一行`NSLog(@"permutations = \n %@",permutations);`中，您将整个记录`NSMutableArray`在控制台中。Xcode 正在格式化它以使其更具可读性。

尝试以这种方式记录您的结果：

更新后的版本：

```
for (NSArray *permutation in permutations){
    NSMutableString *tempString = [[NSMutableString alloc] initWithString:@""];
    for(NSString *character in permutation){
        [tempString appendString:character]
    }
    NSLog(@"%@\n",tempString);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T14:20:36.930

您的排列对象是 NSArrays 的 NSArray。当使用 NSLog 记录它时，NSLog 将调用`description`NSArray 的方法，这使用换行符来分割数组中的每个对象。

如果你想改变它的打印方式，你可以使用你自己的 NSArray 子类并覆盖描述方法，或者只写一个稍微复杂的日志语句，如下所示：

### 又快又脏

```
for (NSArray *arrayOfStrings in permutations) {
    for (NSString *oneCharacterString in arrayOfStrings) {
        printf("%s", [oneCharacterString UTF8String]);
    }
    printf(" ");
} 
```

### 不那么快，不那么脏

```
// with linebreaks after each permutation
// If you don't want those, move the NSLog out of the for loop construct one big string to log in the format you like
for (NSArray *arrayOfStrings in permutations) {
    NSMutableString *permutationString = [NSMutableString string];
    for (NSString *oneCharacterString in arrayOfStrings) {
        [permutationString appendString:oneCharacterString]
    }
    NSLog(permutationString);
} 
```

其他评论：如果你只想保存一个字符，你也可以使用一个 NSNumber 对象（使用创建它`[NSNumber numberWithChar:]`）。或者您可以使用 NSString 或 NSMutableString 代替内部数组。

# iphone - 在运行时在本地化故事板之间切换

> ID：14259674
> 
> 赞同：9
> 
> 时间：2013-01-10T14:02:30.550
> 
> 标签：iphone, ios, localization, storyboard, xcode-storyboard

我有 iPhone 应用程序使用两种语言（阿拉伯语/英语）的故事板我如何从阿拉伯语本地化故事板切换到英语故事板而无需更改语言 iPhone 设置（在运行时）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-12T05:54:58.497

我已经解决了您可以按照以下代码执行此操作：

```
 UIStoryboard *storyBoard;
 if ([language isEqualToString:@"ar"]) {
   lan = [[NSLocale preferredLanguages] objectAtIndex:0];
   storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone5Arabic" bundle:bnd];
 }
 else if([language isEqualToString:@"en"]) {
    NSLog(@"DDD ");
    lan = [[NSLocale preferredLanguages] objectAtIndex:20];
    storyBoard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone5English" bundle:bnd];
 }
 NSBundle *bnd = [NSBundle bundleWithPath:[[NSBundle mainBundle]pathForResource:lan ofType:@"lproj" ]];

UIViewController *initViewController = [storyBoard instantiateInitialViewController];
[self.window setRootViewController:initViewController]; 
```

# regex - 用 Perl 匹配两个重叠的模式

> ID：14259677
> 
> 赞同：7
> 
> 时间：2013-01-10T14:02:49.160
> 
> 标签：regex, perl, pattern-matching

我希望我的问题还没有被其他人提出，因为我试图在网站的几乎所有地方寻找，但我无法找到答案。

我的问题是：我正在制作一个 PERL 脚本，它必须检测字符串中每个模式**出现****的**位置。

 **例如：

```
$string = "betaalphabetabeta";
$pattern = "beta|alpha"; 
```

在这种情况下，我希望我的脚本返回 4 个匹配项。

我认为这可以通过以某种方式使用匹配运算符来轻松实现：

```
$string =~ /beta|alpha/g; 
```

但是，由于我的两个模式（“alpha”、“beta”）部分重叠，所以我刚刚发布的这段代码在与第二个模式重叠时会跳过第一个模式的任何出现。

例如，如果我有这样的字符串：

```
$string = "betalphabetabeta"; 
```

它只返回 3 个匹配而不是 4 个。

我试图用 ?= 运算符做一些事情，但我无法以正确的方式将它与 OR 运算符结合起来......

有没有人有任何解决方案？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T14:16:23.520

以下使用零宽度断言（我相信这就是所谓的）。

```
#!/usr/bin/perl
use strict;
use warnings;

$_ = "betalphabetabeta";

while (/(?=(alpha|beta))/g) {
    print $1, "\n"; 
```

印刷：

```
C:\Old_Data\perlp>perl t9.pl
beta
alpha
beta
beta 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-10T14:11:25.957

您必须使用`looakahead`并计算匹配数

```
(?=beta|alpha) 
```

未在 perl 中测试，但应该可以工作

在[这里工作](http://regexhero.net/tester/)**

# c# - Visual Studio：在 C# 程序中插入对可执行路径的引用

> ID：14259683
> 
> 赞同：0
> 
> 时间：2013-01-10T14:03:22.763
> 
> 标签：c#, visual-studio-2012

我在 Visual Studio（2012 Express for Desktop）中有两个 C# 项目。一个是控制台应用程序，另一个是 Nunit 测试库。我希望测试库能够使用 Process 调用控制台应用程序。

我可以硬编码可执行文件的路径，但我不想这样做。有没有办法让 Visual Studio 将路径字符串嵌入我的测试库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:06:24.677

尝试使用此代码段查找`Assembly` `CodeBase`（`Location`执行测试时可能会出错，因为许多测试运行者创建了临时文件夹）

```
var codeBase = typeof(AnyTypeFromAnotherAssembly).Assembly.CodeBase;
var uri = new UriBuilder(codeBase);
var path = Uri.UnescapeDataString(uri.Path); 
```

另一种方法是通过它的名称查找，但我什至不建议对其名称进行硬编码，因为您会希望安全地更改它的名称。

```
var codeBase= AppDomain.CurrentDomain
                    .GetAssemblies()
                    .First(assembly => assembly.ManifestModule.Name == "MyAssembly.dll")
                    .CodeBase 
```

不要在任何地方硬编码完整路径，因为它会因环境而异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:06:36.267

你有几个我能想到的选择：

1）添加资源文件（`.resx`），然后引用资源键（强类型）

2）在配置文件中添加路径。 `AppSettings`可能会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:21:52.183

您可以使用

```
string path = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

查找当前正在执行的程序集的路径。

# python - python查询维基百科的性能

> ID：14259685
> 
> 赞同：4
> 
> 时间：2013-01-10T14:03:34.453
> 
> 标签：python, wikipedia

我只需要为了一个非常特殊的目的查询维基百科，即获取给定 url 的文本。更准确地说：

我有大约 14.000 个英文语料库的维基百科 url，我需要获取文本，或者至少需要这些 url 的介绍。我的进一步处理将在 python 中，所以这将是选择的语言。

我正在寻找性能最佳的方法，并组成了 4 种不同的方法：

1.  直接通过python获取xml转储和解析
    ->这里的进一步问题是：如何查询xml文件，知道url？
2.  获取xml，设置数据库并`sql`使用python查询
    ->这里的进一步问题是：如何查询sql，知道url？
3.  使用wikipedia api并通过python直接查询
4.  只需抓取这些维基百科页面（这可能有点偷偷摸摸，也很烦人，因为它的 html 并且没有纯文本）

我应该使用哪种方法，即哪种方法具有最佳性能并且在某种程度上是标准的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-10T14:21:21.580

一些想法：

> 我有大约 14.000 个英文语料库的维基百科 url，我需要获取文本，或者至少需要这些 url 的介绍。
> 
> 1 - 直接通过 python 获取 xml 转储和解析

英文维基百科目前有 4,140,​​640 篇文章。您对 14,000 篇文章感兴趣，约占总数的三分之一。这听起来太稀疏了，不能让倾倒所有文章成为最好的方法。

> 2 - 获取xml，设置数据库并使用python查询sql

您希望您感兴趣的文章集增长或改变吗？如果您需要快速响应文章集中的变化，本地数据库可能会很有用。但你必须保持最新。如果速度足够快，使用 API 获取实时数据会更简单。

> 4 - 只需抓取这些维基百科页面（这可能有点偷偷摸摸，也很烦人，因为它的 html 并且没有纯文本）

如果你能从 API 中得到你需要的东西，那将比爬取维基百科站点更好。

> 3 - 使用wikipedia api并通过python直接查询

根据您感兴趣的文章的低百分比（0.338%），这可能是最好的方法。

请务必查看[MediaWiki API 文档](http://www.mediawiki.org/wiki/API:Main_page)和[API 参考](http://en.wikipedia.org/w/api.php)。还有[python-wikitools 模块](http://code.google.com/p/python-wikitools/)。

> 我需要得到文本，或者至少是介绍

如果您真的只需要介绍，那将节省大量流量，并且确实使使用 API 成为迄今为止的最佳选择。

检索引言的方法有很多种，这里有一个好方法：

[http://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&format=xml&titles=Python_(programming_language)](http://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&format=xml&titles=Python_(programming_language))

如果您一次处理多个请求，您可以将它们分成最多 20 篇文章的组：

[http://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&exlimit=20&format=xml&titles=Python_(programming_language)|History_of_Python|Guido_van_Rossum](http://en.wikipedia.org/w/api.php?action=query&prop=extracts&exintro&exlimit=20&format=xml&titles=Python_(programming_language)%7CHistory_of_Python%7CGuido_van_Rossum)

这样，您可以在 700 次往返中检索 14,000 篇文章介绍。

**注意：** [API 参考](http://en.wikipedia.org/w/api.php) `exlimit`文档指出：

> 不超过 20 个（机器人为 20 个）

**另请注意：** [关于礼仪和使用限制的 API 文档部分](http://www.mediawiki.org/wiki/API:Etiquette)说：

> 如果您以串行方式而不是并行方式发出请求（即在发送新请求之前等待一个请求完成，这样您就不会同时发出多个请求），那么您肯定没问题。还可以尝试将事物组合到一个请求中（例如，在标题参数中使用多个标题，而不是为每个标题发出新请求。

维基百科不断更新。如果您需要刷新数据，跟踪修订 ID 和时间戳将使您能够识别哪些本地文章是过时的。您可以使用（例如）检索修订信息（连同介绍，这里有多篇文章）：

[http://en.wikipedia.org/w/api.php?action=query&prop=revisions|extracts&exintro&exlimit=20&rvprop=ids|timestamp&format=xml&titles=Python_(programming_language)|History_of_Python|Guido_van_Rossum](http://en.wikipedia.org/w/api.php?action=query&prop=revisions%7Cextracts&exintro&exlimit=20&rvprop=ids%7Ctimestamp&format=xml&titles=Python_(programming_language)%7CHistory_of_Python%7CGuido_van_Rossum)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T15:21:58.713

这也只是答案的一部分，我对 jimhark 提出的一种可能的解决方案做了一些自我介绍：

## 维基百科 API

我使用了这段代码，保存在`query.py`：

```
import urllib2
import xml.etree.ElementTree as ET
import numpy as np

for i in np.arange(0,1000):
    url = 'http://en.wikipedia.org/w/api.php?format=xml&action=query&titles=Fish&prop=revisions&rvprop=content'
    response = urllib2.urlopen(url)
    html_string = response.read()
    a = ET.fromstring(html_string)
    try :
        a.find('query').find('pages').find('page').find('revisions').find('rev').text
    except (AttributeError):
        pass 
```

跑了`python -m cProfile query.py`。

这不是很聪明的分析，因为很可能 Wikipeda api 会将查询缓存到`fish`.

结果：

```
1431056 function calls (1412734 primitive calls) in 686.813 seconds 
```

几乎所有的地方，因为：

```
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
118081  644.566    0.005  644.566    0.005 {method 'recv' of '_socket.socket' objects} 
```

我将尝试将其用于我的数据集并让您知道。

# delphi - 如何将撇号放在字符串中？

> ID：14259687
> 
> 赞同：3
> 
> 时间：2013-01-10T14:03:36.603
> 
> 标签：delphi, delphi-7, delphi-xe2

我有一个宽字符串说 StringABC 我有一个数组说 ArrayABC，这个数组的元素是

```
ArrayABC[0]='A';
ArrayABC[1]='B';
ArrayABC[2]='C'; 
```

现在我必须`stringABC`做 `StringABC := ''A','B','C'';`

我正在尝试这样做

```
StringABC := '';
for (i:=0 to 2) do
begin
StringABC := StringABC + ArrayABC[i] + ',';
if i = 2
stringABC := StringABC + ArrayABC[i];
end 
```

我得到的结果是`stringABC = 'A,B,C'`但不是`''A','B','C''` 我应该在我的代码中改进什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:06:06.017

```
StringABC := '';
for (i:=0 to 2) do
begin
StringABC := StringABC + '''' + ArrayABC[i] + ''',';
if i = 2
stringABC := StringABC + '''' + ArrayABC[i] + '''';
end 
```

虽然我只是将所有 i 的逗号连接起来，然后最后删除最后一个逗号。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-10T14:22:40.030

```
Const
  StringArray:Array[7..11] of String=('A','B','C','D','E');

Function GetQuotedStringArray(const a:Array of String) : String;

var
 i:Integer;

 Function GetComma:String;
  begin
    if i <> High(a) then 
     Result :=',' else Result :='';
  end;

begin
  for I := Low(a) to High(a) do 
   Result := Result + QuotedStr(a[i]) + GetComma;
end;

procedure TForm4.Button1Click(Sender: TObject);
begin
  Showmessage(GetQuotedStringArray(StringArray));
end; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T18:53:16.660

另一种选择：

```
const
  StringArray:Array[7..11] of String=('A','B','C','D','E');

function GetQuotedStringArray(const a:Array of String): String;
var
  i: Integer;
  ComStrings: TStringList; 
begin
  ComStrings := TStringList.Create;
  try
    ComStrings.QuoteChar := '''';

    for i := low(a) to high(a) do
      ComStrings.Add(a[i]);

    Result := ComStrings.CommaText;
  finally
    ComStrings.Free;
  end;
end; 
```

# hibernate - 将 Hibernate Restrictions.in 与列表一起使用

> ID：14259692
> 
> 赞同：2
> 
> 时间：2013-01-10T14:03:48.323
> 
> 标签：hibernate

如何将 Restrictions.in 与列表字段一起使用？

这是我的模型：

```
@Entity
@Table(name = "W_GROUP", schema = "U_FRONTEND")
public class UserGroup {
@Id
@Column(name = "GROUP_ID")
private Long id;

@Column(name = "NAME", length = 100, nullable = false, unique = true)
private String name;

@ElementCollection(targetClass = Feature.class)
@JoinTable(name = "W_FEATURE", joinColumns = @JoinColumn(name = "GROUP_ID", nullable = false), schema = "U_FRONTEND")
@Column(name = "NAME", nullable = false, length = 50)
@Enumerated(EnumType.STRING)
private List<Feature> features;

@JoinTable(name = "W_USER_GROUP", joinColumns = @JoinColumn(name = "GROUP_ID"), inverseJoinColumns = @JoinColumn(name = "USER_ID"), schema = "U_FRONTEND")
@ManyToMany
private List<User> users;

@Column(name = "UPD_USER", nullable = false, length = 50)
private String updUser;

@Column(name = "UPD_DATE", nullable = false, columnDefinition = "date")
private Calendar updDate;
// Getters and setters
} 
```

我正在尝试仅获取具有某些功能的组：

```
Criteria criteria = session.createCriteria(UserGroup.class);

            criteria.addOrder(new Sort(Order.ASC, "name").getOrder());

            criteria.add(Restrictions.not(Restrictions.in("features",
                    FeatureUtils.getInvalids()))); 
```

但这会返回一个错误：

> 原因：org.hibernate.exception.GenericJDBCException：在 org.hibernate.engine.jdbc.spi 的 org.hibernate.exception.internal.StandardSQLExceptionConverter.convert(StandardSQLExceptionConverter.java:54) 处缺少 IN 或 OUT 参数索引:: 1 .SqlExceptionHelper.convert(SqlExceptionHelper.java:125) 在 org.hibernate.engine.jdbc.spi.SqlExceptionHelper.convert(SqlExceptionHelper.java:110) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler .java:129) 在 org.hibernate.engine.jdbc.internal.proxy.AbstractProxyHandler.invoke(AbstractProxyHandler.java:81) 在 $Proxy35.executeQuery(Unknown Source) 在 org.hibernate.loader.Loader.getResultSet(Loader. java:1926) 在 org.hibernate.loader.Loader.executeQueryStatement(Loader.java:1727) 在 org.hibernate.loader.Loader.doQuery(Loader.java:852) at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:293) at org.hibernate.loader.Loader.doList(Loader.java:2411) at org .hibernate.loader.Loader.doList(Loader.java:2397) 在 org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2227) 在 org.hibernate.loader.Loader.list(Loader.java:2222) 在org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:122) 在 org.hibernate.internal.SessionImpl.list(SessionImpl.java:1621) 在 org.hibernate.internal.CriteriaImpl.list(CriteriaImpl.java: 374) 在 hamburgsud.frontend.dao.UserGroupDAO.list(UserGroupDAO.java:39) 在 hamburgsud.frontend.controller.UserController.form(UserController.java:38) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun 。反映。NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 br.com.caelum.vraptor .interceptor.ExecuteMethodInterceptor.intercept(ExecuteMethodInterceptor.java:61) ... 43 更多原因：java.sql.SQLException：索引处缺少 IN 或 OUT 参数：：oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError. java:112) 在 oracle.jdbc.driver.OraclePreparedStatement.processCompletedBindRow(OraclePreparedStatement.java:1681) 在 oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement) 的 oracle.jdbc.driver.DatabaseError.throwSqlException(DatabaseError.java:146) .java:3280) 在 oracle.jdbc.driver.OraclePreparedStatement。com.mchange.v2.c3p0.impl.NewProxyPreparedStatement.executeQuery(NewProxyPreparedStatement.java:76) 在 sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) 在 sun.reflect.NativeMethodAccessorImpl.invoke( NativeMethodAccessorImpl.java:39) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect.Method.invoke(Method.java:597) 在 org.hibernate.engine.jdbc.internal.proxy .AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122) ... 63 更多NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.hibernate.engine.jdbc .internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122) ... 63 更多NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39) at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) at java.lang.reflect.Method.invoke(Method.java:597) at org.hibernate.engine.jdbc .internal.proxy.AbstractStatementProxyHandler.continueInvocation(AbstractStatementProxyHandler.java:122) ... 63 更多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:18:26.250

我知道这不是很漂亮，但是您可以构造一个 ids ( `List<Long> featureIds`) 列表，然后执行以下操作：

```
Restrictions.in("features", featureIds); 
```

# javascript - 有没有办法在 JavaScript 中实现 StringBuilder

> ID：14259700
> 
> 赞同：2
> 
> 时间：2013-01-10T14:04:07.287
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 字符串连接](https://stackoverflow.com/questions/112158/javascript-string-concatenation)
> [javascript 是否有内置的 stringbuilder 类？](https://stackoverflow.com/questions/2087522/does-javascript-have-a-built-in-stringbuilder-class)

众所周知，当我们`str = str + "123"`创建一个新字符串时。如果我们有大量的连接，它可能会相当昂贵。有没有一种在 JavaScript 中实现 StringBuilder 的简单方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-10T14:10:07.337

您可以将部件推入一个数组，然后加入它：

```
var builder = []
builder.push( "some", "123" );
builder.push( "content" );
var str = builder.join(""); 
```

[这个 SO question](https://stackoverflow.com/questions/2087522/does-javascript-have-a-built-in-stringbuilder-class)详细解释了它，另见[这个类](http://www.codeproject.com/Articles/12375/JavaScript-StringBuilder)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:08:49.180

我认为，实现一个比普通字符串连接更快的 StringBuilder 从来都不是一件容易的事。这显然是 Builder 的原因。

填充一个数组，如果它已满，则将其转换为字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T14:45:56.077

如果字符串是静态的，则 JavaScript 中的传统串联是最佳选择。

```
var foo = 'a' + 'b' + 'c' + 'd'; 
```

在大多数浏览器中都是如此。[字符串连接](http://jsperf.com/string-concatenation)

如果字符串根据程序可能是可变的，则任何一种方法都同样有效。

```
var foo = ""+Math.random() + Math.random() + Math.random() + Math.random();
var foo = [Math.random(), Math.random(), Math.random(), Math.random()].join(''); 
```

浏览器之间的差异不是太大，但传统的方式似乎更好一些[字符串随机连接](http://jsperf.com/string-random-concatenation)

# c# - 使用 YouTube API 和 HTTpWebRequest 批量删除视频

> ID：14259704
> 
> 赞同：1
> 
> 时间：2013-01-10T14:04:27.217
> 
> 标签：c#, youtube, youtube-api

我在这上面花了将近 10 个小时，但仍然没有运气，只有错误。

我正在尝试使用 c# .net 中的 YouTube API 和 HttpWebRequest 批量删除 2 个视频（我没有使用默认的 api dll）

我将请求（带有 POST）发送到： [http ://gdata.youtube.com/feeds/api/users/default/uploads/batch?v=2](http://gdata.youtube.com/feeds/api/users/default/uploads/batch?v=2)

这是我发送的 xml 请求：

```
<feed xmlns='http://www.w3.org/2005/Atom' 
 xmlns:media='http://search.yahoo.com/mrss/' 
 xmlns:batch='http://schemas.google.com/gdata/batch' 
 xmlns:yt='http://gdata.youtube.com/schemas/2007'>
<entry>
<batch:operation type="delete"/>
<id>http://gdata.youtube.com/feeds/api/users/default/uploads/Fe-Wzz4thKk</id>
</entry>
</feed> 
```

我收到错误：无效的条目 ID/Uri

我也尝试只发送视频的 ID，但仍然没有运气，只有错误。我该怎么办？这真的很令人沮丧，因为我找不到任何删除视频（不是播放列表）的例子。

希望有人可以提供帮助。

谢谢！弗拉德

编辑：

我还尝试将 POST 数据发送到：

[http://gdata.youtube.com/feeds/api/videos/batch?v=2](http://gdata.youtube.com/feeds/api/videos/batch?v=2)

和数据：

```
 <feed xmlns='http://www.w3.org/2005/Atom' 
 xmlns:media='http://search.yahoo.com/mrss/' 
 xmlns:batch='http://schemas.google.com/gdata/batch' 
 xmlns:yt='http://gdata.youtube.com/schemas/2007'>
<entry>
<batch:operation type="delete"/>
<id>http://gdata.youtube.com/feeds/api/videos/Fe-Wzz4thKk</id>
</entry>
</feed> 
```

错误是：此提要是只读的

我用好用户记录了它（我测试了上传视频和其他东西并且它有效）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:13:53.117

我想让你们现在我破解了这个。答案很简单。

首先，请求：

```
http://gdata.youtube.com/feeds/api/users/ACCOUNT_CHANNEL_NAME/uploads/batch?v=2 
```

并且不要：

```
http://gdata.youtube.com/feeds/api/users/default/uploads/batch?v=2 
```

所以你不能使用“默认”关键字。我认为这是唯一不起作用的地方。

此外，每个元素的 .. 应如下所示：

```
<id>http://gdata.youtube.com/feeds/api/users/ACCOUNT_CHANNEL_NAME/uploads/VIDEO_ID</id> 
```

祝你好运！

# jquery - 如何找到包含模态数据的 div？

> ID：14259705
> 
> 赞同：0
> 
> 时间：2013-01-10T14:04:28.387
> 
> 标签：jquery, jquery-ui, modal-dialog, jquery-ui-dialog

背景：

在将产品添加到结帐图表之前，我需要启动一个具有自定义选项的模式窗口。只有在此事件之后，该项目才应添加到图表中。如果我使用其他语言（c#），我可以实现这个功能，但我喜欢学习更多的 JQuery 和 JQuery UI。

问题：

我尝试了各种方法来为容器分配数据，但到目前为止我所有的方法都失败了。所以我稍微简化了程序，因为 HTML 端大约有 2000 行代码，我不想让你们感到厌烦。请忽略任何愚蠢的错误，例如额外的标记标签和缺少结束标签，因为我试图从原始来源缩短问题并且可能遗漏了一些东西。

部分 HTML：

```
 <html>
    <head></head>       
    <body>
    <div class="ui-widget ui-helper-clearfix" style="height:100%; float:left !important; border:2px solid Black;">

    <center>
    <div class="optionsHeader" style="">RECOMMENDED VALUE PACKAGES</div></center><br />
    <ul id="options" class="options ui-helper-reset ui-helper-clearfix">
    <li class="ui-widget-content ui-corner-tr" id="100400" title="Please view product details for handle preferences before sellecting this option.">
    <h5 class="ui-widget-header">Option 1</h5>
            <font class="repairDetails" alt="Repair Details" style="">REHANDLE<br />FULL BLADE/TOE<br />REPAIR/REFURB</font>
            <font style="color:Red; text-decoration:blink; font-size:0.7em; bottom:10;">Please view product details for <u>handle preferences</u> before sellecting this option.
            </font><br />
      <label class="price">£49.99</label>
            <a class="ui-icon ui-icon-wrench dialog_but" title="View Product Detail" href="#" style="">View Product Detail</a>
              <div class="dialog_content" title="" style="">

                <div id="products">
                <h1 class="ui-widget-header">Avaliable Bundle Options</h1>
                <font>You can customise this option below</font>

                <div id="pOptions">
                    <h2><a href="#">Handle</a></h2>
                    <div>
                        <ul>

                        </ul>
                    </div>
                    <h2><a href="#">Blade</a></h2>
                    <div>
                        <ul>

                        </ul>
                    </div>
                    <h2><a href="#">Grips</a></h2>
                    <div>
                        <ul>

                        </ul>
                    </div>
                </div>
            </div>

<div id="cart">
    <h1 class="ui-widget-header">Sellected Options</h1>
    <div class="ui-widget-content">
        <ol>
            <li class="placeholder"><i>Drag & Drop</i> your bat repair here</li>
        </ol>
    </div>
</div>

                </div>
            <a href="" title="Add to chart" class="ui-icon ui-icon-cart chart_but">Add to chart</a>

</li>

 </ul>

  </div>

  <div id="chart" class="ui-widget-content ui-state-default">
  <h4 class="ui-widget-header"><span class="ui-icon ui-icon-cart"></span>Repair Options       You Have Chosen</h4>
  </div>
  </body>
  </html> 
```

部分jQuery：

```
 $(function() {
// there's the options and the chart
var $options = $("#options"),
    $chart = $("#chart");

//Add to chart
var recycle_icon = "<a href='' title='Remove this option' class='ui-icon ui-icon-arrowreturnthick-1-w'>Remove Option</a>";

function addToChart($item) {
 // He is where i need to prompt the modal than continue as below;

    $item.fadeOut(function() {
        var $list = $("ul", $chart).length ? $("ul", $chart) : $("<ul class='options     <ui-helper->  </ui-helper->reset'/>").appendTo($chart);

        $item.find("a.ui-icon-cart").remove();
        $item.append(recycle_icon).appendTo($list).fadeIn(function() {
            $item.animate({
                width: "100%px",
                height: "100%px"
            }) //Box
            .find("font").animate({}); //Font
        });
    });
}

// revert frm chart function
var chart_icon = "<a href='' title='Add this option' class='ui-icon ui-icon-cart'>Add Option</a>";

function revertFrmChart($item) {
    $item.fadeOut(function() {
        $item.find("a.ui-icon-arrowreturnthick-1-w").remove().end().css("width", "100%px").append(chart_icon).find("font").css("height", "100%px").end().appendTo($options).fadeIn();
    });
}

// resolve the icons behavior with event delegation
$("ul.options > li").click(function(event) {
    var $item = $(this),
        $target = $(event.target);

    if ($target.is("a.ui-icon-cart")) {
        addToChart($item);
    } else if ($target.is("a.ui-icon-arrowreturnthick-1-w")) {
        revertFrmChart($item);
    }

    return false;
     });
    });

   //do when the dom is ready
    jQuery(document).ready(function($) {
//loop through every button anchor element
$('.dialog_but').each(function() {
    //create a local scope of a dialog variable to attach
    var $dialog;

    //create the dialog for the div.dialog_content standing next to the anchor element
    //I set the autoOpen false so that it can be reusable later
    //also I set the modal = true to appear the dialog as a modal prompt
    $dialog = $(this).next('div.dialog_content').dialog({
        title: 'Product Detail',
        modal: true,
        autoOpen: false,
        width: 600,
        show: 'fade',
        hide: 'fade'
    });

    //Swapped this with the inline version
    //add a wee bit of button thing
    //                    $(this).button({
    //                        icons: {
    //                            primary: 'ui-icon-info'
    //                        }
    //                    });
    //now attach the open event of the dialog to the anchor element
    $(this).click(function(e) {
        //prevent the anchor element to go to the hyperlinked page
        e.preventDefault();

        //open the dialog
        $dialog.dialog('open');
    }); //done
});
   });

    //Modal window to ask and submit additional user details
   $(function() {
   var hShape = $("#hShape"),
    hSize = $("#hSize"),
    hType = $("#hType"),

    allFields = $([]).add(hShape).add(hSize).add(hType),
    tips = $(".validateTips");

$("#dialog-form").dialog({
    autoOpen: false,
    height: 400,
    width: 400,
    modal: true,
    show: 'fade',
    hide: 'fade',
    buttons: {
        "Add Details": function() {
            var bValid = true;
            allFields.removeClass("ui-state-error");

            bValid = bValid && checkLength(hShape, "Handle Shape", 3);
            bValid = bValid && checkLength(hSize, "Handle Size", 1);
            bValid = bValid && checkLength(hType, "Handle Type", 3);
            // find relevant parent element
            var $el = $(this).closest('.ui-dialog');

            if (bValid) {
                // set the context to the visible div in the background -
                $('#addHere', $el.prevAll('.ui-dialog:visible')).append("<tr>" + "<td>" + hShape.val() + "</td>" + "<td>" + hSize.val() + "</td>" + "<td>" + hType.val() + "</td>" + "</tr>")
            }
            $(this).dialog("close");

        },
        Cancel: function() {
            $(this).dialog("close");
        }
    },
    close: function() {
        allFields.val("").removeClass("ui-state-error");
    }
});

$("#handle-pre").live("click", function() {

    $("#dialog-form").dialog("open");
});
   }); 
```

JSF中：

如果您单击扳手图标，您将收到一个模态提示。这是当用户单击添加到图表时我需要触发的模式。

[关联](http://www.jsfiddle.net/7g5bC/7/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T10:17:52.827

我认为令人困惑的一点是为每个产品确定每个模态数据 div。因此，给每个模态数据 div 一个唯一的 ID，在添加到图表时，我添加了一个 switch 语句来触发正确的模态。

因此，模态数据所在的 HTML 现在有一个 ID；

```
 <div id="op1Dialog" class="dialog_content" title="" style=""> 
```

并且添加到聊天现在有以下内容；

```
 function addToChart($item) {
            var currentId = $item.attr('id');

                    switch(currentId) {
                      case "100400": $('#op1Dialog').dialog('open');  break;
                      case "100401": $('#op2Dialog').dialog('open'); break;
                      and so on...
                    }
                 Rest of the function obove.............. 
```

（编辑）小提琴[链接](http://www.jsfiddle.net/7g5bC/8/)

让我知道是否有人能想到比使用 switch 语句更好的方法......

# android - 只有创建视图层次结构的原始线程才能接触其视图错误

> ID：14259708
> 
> 赞同：-1
> 
> 时间：2013-01-10T14:04:40.133
> 
> 标签：android, view, android-asynctask, progressdialog

一切正常，除非它到达代码的最后一部分并显示“成功注册！” 然后标题中提到的错误出现在 registerDialog 消息部分中。

有什么我做错了吗？谁能帮我检查我的代码

非常感谢你。

该应用程序没有崩溃，尽管它只是退出到应用程序主页。如果我再次按下注册按钮，它将返回相同的错误。

> 私人无效setRegister（按钮b）{b.setOnClickListener（新View.OnClickListener（）{

```
 private AsyncTask<String, Void, String> task2;

        public void onClick(View v) {
            // TODO Auto-generated method stub
            registerDialog = new AlertDialog.Builder(Login.this).create();
            registerDialog.setTitle("Register Alert!");
            registerDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Back", new DialogInterface.OnClickListener() {

                        public void onClick(DialogInterface dialog, int which) {
                            // TODO Auto-generated method stub
                            registerDialog.dismiss();
                        }
                    });

            task2 = new AsyncTask<String, Void, String>() {

                ProgressDialog dialog2;
                ArrayList<NameValuePair> postParameters2;
                String response2 = null;

                    @Override
                    protected void onPreExecute() {
                        postParameters2 = new ArrayList<NameValuePair>();
                        postParameters2.add(new BasicNameValuePair("usernamelog", rUsername.getText().toString()));
                        postParameters2.add(new BasicNameValuePair("passwordlog", rPassword.getText().toString()));
                        postParameters2.add(new BasicNameValuePair("rpasswordlog", rRpassword.getText().toString()));
                        postParameters2.add(new BasicNameValuePair("emaillog", rEmail.getText().toString()));
                        postParameters2.add(new BasicNameValuePair("phonenumlog", rPhoneNum.getText().toString()));
                        postParameters2.add(new BasicNameValuePair("doblog", rBirthday.getText().toString()));
                        postParameters2.add(new BasicNameValuePair("genderlog", rGender.getText().toString().toUpperCase(Locale.ENGLISH)));                 

                        dialog2 = new ProgressDialog(Login.this, ProgressDialog.STYLE_SPINNER);
                        dialog2.setMessage("Registering...");       

                        dialog2.show();
                    }

                    @Override
                    protected String doInBackground(String... params) {
                        try {
                            response2 = CustomHttpClient.executeHttpPost("http://whatstherex.info/checkR.php", postParameters2);

                            String res2 = response2.toString();

                            res2 = res2.replaceAll("null", "");

                            if (res2.equals("1")) {
                                res2 = "Successfully Registered!";
                                rAuth.setTextColor(Color.GREEN);
                                return res2;
                            } else {
                                res2 = res2.toString();
                                rAuth.setTextColor(Color.RED);
                                return res2;
                            }
                        } catch (Exception e) {
                            res2 = e.toString();
                            rAuth.setTextColor(Color.BLACK);
                            return res2;
                        }
                    }

                    @Override
                    protected void onPostExecute(String result2) {
                        if(!result2.equals("Successfully Registered!") && !result2.equals("Username have to be at least 5 characters") && !result2.equals("Password have to be at least 8 characters") && !result2.equals("Passwords does not match") && !result2.equals("Email field is empty") && !result2.equals("Email field is not valid") && !result2.equals("Phone number Field is empty") && !result2.equals("Phone number is not numeric") && !result2.equals("Phone number is not 8 digit") && !result2.equals("Birthday Field is empty") && !result2.equals("Birthday is not numeric") && !result2.equals("Birthday is not in DDMMYYYY format") && !result2.equals("Gender Field is empty") && !result2.equals("Gender Field is invalid") && !result2.equals("Gender not in the format M or F") && !result2.equals("Duplicate entry '"+rUsername.getText().toString()+"' for key 'username'") && !result2.equals("Duplicate entry '"+rEmail.getText().toString()+"' for key 'email'") && !result2.equals("Duplicate entry '"+rPhoneNum.getText().toString()+"' for key 'phoneNum'")){
                        rAuth.setText("Unknown Error!!!");
                        rAuth.setTextColor(Color.BLUE);
                        registerDialog.setMessage(result2);
                        registerDialog.show();
                        dialog2.dismiss();
                        }else if (result2.equals("Duplicate entry '"+rUsername.getText().toString()+"' for key 'username'")) {
                            rAuth.setText("Username already in used");
                            rAuth.setTextColor(Color.RED);
                            registerDialog.setMessage("Username already in used");
                            registerDialog.show();
                            dialog2.dismiss();
                        }else if (result2.equals("Duplicate entry '"+rEmail.getText().toString()+"' for key 'email'")) {
                            rAuth.setText("Email already in used");
                            rAuth.setTextColor(Color.RED);
                            registerDialog.setMessage("Email already in used");
                            registerDialog.show();
                            dialog2.dismiss();
                        }else if (result2.equals("Duplicate entry '"+rPhoneNum.getText().toString()+"' for key 'phoneNum'")){
                            rAuth.setText("Phone number already in used");
                            rAuth.setTextColor(Color.RED);
                            registerDialog.setMessage("Phone number already in used");
                            registerDialog.show();
                            dialog2.dismiss();
                        }else {
                            rAuth.setText("Successfully Registered!");
                            rAuth.setTextColor(Color.GREEN);
                            registerDialog.setMessage("Successfully Registered!");
                            registerDialog.show();
                            dialog2.dismiss();
                        }
                    }

            };
            task2.execute();                                    
        }
    });         
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:09:58.333

我猜那`rAuth`是一个`TextView`. 这需要移至 ，`onPostExecute()`因为您无法`UI`更新`doInBackground()`. 只有`onPostExecute()`,`onProgressUpdate()`和`onPreExecute()`在`UI`线程上运行。

[这是文档的链接](http://developer.android.com/reference/android/os/AsyncTask.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:10:57.160

你做了一些 UI 工作`doInBackground`，例如这个调用

```
rAuth.setTextColor(Color.GREEN); 
```

将此代码移动到`onPostExecute`方法中。

# java - 使用 libopencore-amr 支持为 ARM 构建 ffmpeg

> ID：14259711
> 
> 赞同：1
> 
> 时间：2013-01-10T14:04:50.717
> 
> 标签：java, android, ffmpeg

我正在尝试使用 opencore-amr 和 libx264 支持构建 ffmpeg，我发现这个构建脚本[http://sourceforge.net/projects/ffmpeg4android/](http://sourceforge.net/projects/ffmpeg4android/)，它按预期编译，生成的二进制文件在设备上运行良好，并且 --enable-当我不传递任何参数时，libx264 会出现在二进制文件的输出中。

但是，当我尝试包含对 libopencore-amr 的支持时，它似乎不起作用，我已经安装了 libopencore-amr 和 libopencore-amr-devel（我应该补充一点，我已经在 fedora 和 ubuntu 上尝试了整个过程）。我修改了 Android_Configure.mk 文件，使其看起来像这样：

```
FF_CONFIGURATION_STRING := \
    --arch=$(TARGET_ARCH) \
    --target-os=linux \
    --enable-cross-compile \
    --cross-prefix=$(NDK_CROSS_
PREFIX) \
    --sysroot=$(NDK_SYSROOT) \
    --enable-shared \
    --enable-static \
    --enable-libopencore-amrnb   <-- i've added this line 
```

但是，当我运行 ./configure 时，我看到：

```
libopencore-amrnb support no
libopencore-amrwb support no 
```

尽管如此，构建运行良好，编译错误为零。当我在设备上运行 ffmpeg 时，一切似乎都可以正常工作，但是绝对不支持 amrnb。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T03:09:50.510

您必须确保 libopencore 存在于您正在编译的 sysroot 中，这就是 --sysroot 参数指向的位置。有可能那里没有 libopencore，因此配置脚本将其禁用。

# jquery - jQuery 背景位置动画在第一次悬停时向相反方向移动

> ID：14259718
> 
> 赞同：1
> 
> 时间：2013-01-10T14:05:02.730
> 
> 标签：jquery

当我在 Chrome（Windows 8）中的“.tile”类的 div 上执行第一次悬停时，背景位置虽然指定为只有负移位，但会向相反方向撤退。对于每个这样的 div，第一次悬停时都会重复此行为；但是，它似乎不会在随后的悬停中重复出现，平滑地滑动而没有卡顿。

我尝试按照一些较旧的 jQuery 动画口吃常见问题解答中的建议删除填充，但无济于事（尽管我认为它们不再适用于 jQ 1.3+？）。我是 jQuery 新手，需要一些帮助，谢谢。:)

```
$(function() {
    $('.tile').hover(function () {
        console.log('in');
        $(this).animate({
            'background-position-y': -($(this).children('figcaption').height())
        }, 'fast', 'linear');
        $(this).children('figcaption').slideToggle('fast');
    },
    function () {
        console.log('out');
        $(this).animate({
            'background-position-y': 0
        }, 'fast', 'linear');
        $(this).children('figcaption').slideToggle('fast');
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T18:18:21.627

我意识到，由于我不知道背景图像的高度，由于 css 背景位置规则，不可能指定从中心的偏移量。

我继续使用图像大小调整脚本 ( [SLIR](https://github.com/lencioni/SLIR) ) 将其裁剪成形状。知道结果图像的尺寸后，我可以根据需要使用绝对值来定位我的背景。

**参考：**

*   [CSS：在背景图像中使用百分比](http://www.sitepoint.com/css-using-percentages-in-background-image/)

# shell - 如何确定我的 csh 版本？

> ID：14259723
> 
> 赞同：6
> 
> 时间：2013-01-10T14:05:16.580
> 
> 标签：shell, version, csh, bsd

我有一些代码对我有用，但是当我把它交给一些同事时，它坏了。他们正在使用`tcsh`，而据我所知，我正在使用`csh`.

我试过了：

```
csh -v
csh --version
csh -V
csh --help
csh -h 
```

没有成功（他们都直接带我到解释器提示）。我还为字符串“版本”搜索了手册页，但我也没有想出任何有用的东西。有没有办法确定`csh`我安装的版本？

- 编辑 -

按照来自 的符号链接`/bin/csh`，它们似乎终止于`/bin/bsd-csh`这似乎暗示我正在使用一些 BSD 风格的 csh shell，如果这对任何人都有帮助的话。另外，我正在使用 ubuntu linux。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T16:36:28.803

在评论中，您已经表明您在 Ubuntu 上，这是`/bin/csh`指向 的符号链接`/etc/alternatives/csh`，这是指向`/bin/csh`.

[`csh`shell起源于 BSD Unix，因此](http://en.wikipedia.org/wiki/C_shell)它`csh`是指向`/bin/bsd-csh`. 它可以追溯到 1978 年左右，在 Unix 程序报告自己的版本号变得普遍之前。

由于您使用的是 Ubuntu，因此：

```
dpkg -l csh 
```

应该告诉您您拥有的版本——尽管 Debian/Ubuntu 软件包的版本号可能不会比您已经拥有的信息更有用。并且包版本号和shell版本之间的关系并不完全清楚。

我假设这是正确的包名称。如果没有，请尝试`dpkg -S /bin/bsd-csh`。

您可以判断您是否正在运行`tcsh`，如下所示：

```
if ($?tcsh) then
    echo This is tcsh
else
    echo This is csh, not tcsh
endif 
```

`tcsh`应该与 csh 向后兼容，具有一些额外的功能，主要用于交互使用*。*如果为 tcsh 编写的脚本使用 tcsh 特定的功能，它很容易在 csh 下失败，但我希望 tcsh 能够处理 csh 脚本。正如`tcsh(1)`手册页所说：

> *tcsh* 是 Berkeley UNIX C shell *csh(1)*的增强但完全兼容的版本。

我知道您可能无法发布整个失败的脚本，但是您能否发布一个对您有用但对您的同事失败的小型代表性示例？

一种解决方案可能是请您的同事`csh`在他们的系统上安装 vanilla；如果他们愿意，他们仍然可以`/bin/tcsh`用作他们的交互式 shell，但是`#!/bin/csh`会导致脚本由旧的 csh 执行，而不是 tcsh。

[最后，如果不添加指向this](http://www.faqs.org/faqs/unix-faq/shell/csh-whynot/)的链接，我将无法回答有关 [t]csh 脚本的问题。

附录：我可以访问一个`/bin/csh`不是 tcsh 的 Solaris 系统；如果你愿意，我可以在那里运行一些简单的测试。一个数据点：两者都`/bin/tcsh`接受`/bin/csh`为`:`空命令，但`/bin/csh`不接受参数：

```
% :
% arg
:: Too many arguments 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T15:10:55.423

`csh --version`仅当`csh`实际上是指向...的符号链接时才有效`/bin/tcsh`（！）

否则，`csh`会话似乎没有设置任何版本，除了在这个[MKSToolkit](http://www.mkssoftware.com/)中，`csh`它[应该设置一个 variable`$csh_version`](http://www.mkssoftware.com/docs/man1/csh.1.asp)。

### 预定义变量

> 以下变量对 C Shell 具有特殊意义。
> 其中，`argv`, `csh_version`, `cwd`, `home`, `path`, `prompt`, `ROOTDIR`, `shell`, `status`, `COMSPEC`, 和`TMPDIR`总是由 shell 设置。
> 除`cwd`和外`status`，此设置仅在初始化时发生；除非用户明确修改，否则这些变量不会被修改。

例如，请参阅[此点文件](https://github.com/bsandrow/dotfiles/blob/master/shell/common)：

```
shell_is_csh  () { return [ -n "$csh_version"  ]; } 
```

* * *

> `/bin/csh`链接到`/etc/alternatives/csh`哪个链接`/bin/bsd-csh`。
> 显然是`bsd-csh`

...然后`bsd-csh`似乎不支持任何类型的版本功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-10T16:40:21.057

如果您使用的是 Ubuntu，那么您`csh`的`OpenBSD`版本就是带有一些补丁的版本。它绝对不支持获取其版本，因为它不会在任何地方对其版本进行编码。但是，除此之外无法为您提供帮助。

如果您尚未`csh`在 ubuntu 上安装，但已安装`tcsh`，那么它将`tcsh`用作`csh`. 正如您所发现的，它们大多是兼容的。

对于您自己，您可能可以通过使用`update-alternatives`重定向`csh`来调试问题`tcsh`（只要您也安装了 tcsh）。

# c# - ajax回发后如何从代码隐藏调用javascript函数

> ID：14259724
> 
> 赞同：2
> 
> 时间：2013-01-10T14:05:18.967
> 
> 标签：c#, javascript, asp.net, ajax

我在我的项目中使用 Telerik 控件，并且出于我的目的使用 RadTabStrip

```
<telerik:RadTabStrip ID="tsRequisitions" Skin="" MultiPageID="mpRequisitions" runat="server" Width="980"  ScrollButtonsPosition="Right" ScrollChildren="True" OnTabCreated="tabCreated"> 
```

正如您在此模板中看到的那样，`tabCreated`每次创建新选项卡时我都会调用方法。现在我想从服务器端调用一些javascript函数（所有提到的都在RadAjaxPanel中）。

我试过使用`RegisterClientScriptBlock`，但它并没有帮助我触发我的 javascript 函数。

```
if (!ClientScript.IsClientScriptBlockRegistered("tabSelected"))
            {
                ClientScript.RegisterClientScriptBlock(this.GetType(),
                    "tabSelected", "TabSelected();", true);
            } 
```

我的 `.aspx`文件中有这个

```
<script type="text/javascript">
    function TabSelected() {
       console.log("dfgdfgfdg");
    }          
</script> 
```

如何在 AJAX 回发后从代码隐藏调用我的函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T08:24:52.537

以下代码片段可以解决问题

```
RadScriptManager.RegisterStartupScript(this,this.GetType(), "tabSelectedScript", "TabSelected();", true); 
```

`RegisterStartupScript`是`RadScriptManager`类的静态方法（我在这里再次使用 Telerik 控件，但也许它也可以与 asp.net 标准 ScriptManager 一起使用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T19:03:31.403

你试过这个吗？

```
 Page.RegisterStartupScript("OnLoad", "<script>TabSelected();</script>"); 
```

# parallel-processing - 向量化和尴尬并行是什么关系？

> ID：14259737
> 
> 赞同：5
> 
> 时间：2013-01-10T14:06:15.643
> 
> 标签：parallel-processing

这个问题说明了一切。在我看来，向量化与令人尴尬的并行问题密切相关。换句话说，所有可向量化的程序都必须是令人尴尬的并行程序。这个对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T19:07:05.500

令人尴尬的并行性的快速总结：

如果代码无需任何努力就可以并行化，尤其是处理数据依赖性，那么代码就是*令人尴尬的并行。*请注意，令人尴尬的并行性仅意味着代码将被安全地并行化而无需付出任何努力；它不保证任何最佳性能。

一个简单的例子是两个向量的总和。

```
// A, B, and C are all distinct arrays.    
for (int i = 0; i < N; ++i)
  C[i] = A[i] + B[i]; 
```

这段代码是令人尴尬的并行，因为没有数据依赖于`C`. 该代码可以简单地并行化，例如，通过使用 OpenMP：

```
#pragma omp parallel for 
for (int i = 0; i < N; ++i)
  C[i] = A[i] + B[i]; 
```

* * *

**矢量化**是实现并行性的一种特殊形式。特别是，向量化主要在使用 x86 SSE/AVX 和 ARM NEON 等专用指令的处理器中使用专用 SIMD 执行硬件单元。编译器可以自动向量化您的代码，或者您可以使用内在函数和直接汇编代码手动向量化。

我不认为向量化一定意味着要向量化的代码必须是令人尴尬的并行。但是，在实践中，大多数可向量化代码都是令人尴尬的并行，因为几乎所有 SIMD 指令都假设这一点。我找不到任何允许数据相关操作的 SIMD 指令。从这个意义上说，是的，您可以说可矢量化程序需要令人尴尬地并行。

然而，从广义上讲，向量化可以包含 GPGPU 风格的 SIMD 编程，例如 Nvidia 的 CUDA 和 Intel 的 MIC 架构。它们通过处理数据相关的操作和分支来允许更灵活的 SIMD 操作。

* * *

总而言之，在向量化的狭义定义中，即传统 CPU 的 SIMD 操作的向量化，我认为可向量化的程序应该是令人尴尬的并行。但是，SIMD/矢量化的高级形式可以启用数据相关操作和任意分支。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T14:20:44.797

**令人尴尬的并行问题**是不需要努力以并行形式编写的任务。**矢量化**是传统程序变得并行的过程。

所以，这不是一个人成为另一个人的逻辑子类型的情况，而是一种趋势。问题越接近**令人尴尬的并行**，需要的向量化就越少。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:25:11.750

并行是尽可能多地使用我们的计算设备，因此我们尝试以这样的方式调度任务，使它们的执行几乎相互独立。

现在，并行计算中的向量化是并行化的一种特殊情况，其中默认情况下在单个线程上一次执行一个操作的软件程序被修改为同时执行多个操作。

向量化是将计算机程序从一次处理一对操作数的标量实现转换为一次处理对多对操作数的一个操作的向量实现的更有限的过程。

让我们举一个添加两个数组的简单示例：

在正常模式下，我们需要一个循环来添加两个数组。我们可以通过多种方式使其并行，例如我们可以创建两个线程并将数组分成两个相等的部分并分别分配给线程。现在，最大没有。可以提高性能的线程数等于否。数组的节点数或数组的长度。如果我们应用并行性，那么它不需要循环所有数组来添加它。它应该只启动一个命令，并且将添加两个数组。为此，我们需要使数组加法程序并行，使其不需要任何循环。为此，我们将数组划分为等于数组长度的部分，并将每个部分分配给一个新线程并同时启动所有这些部分，以便所有添加都在一条指令下发生，而不会同时循环。

为了使一个完全向量化的规则，它必须像上面的例子一样是令人尴尬的平行。但这取决于给定的场景。对于两个具有相互依赖关系的规则，它们可以单独矢量化，等等。

# c++ - 从 C++ 调用 JNI 导出的方法

> ID：14259738
> 
> 赞同：0
> 
> 时间：2013-01-10T14:06:17.047
> 
> 标签：c++, java-native-interface, native

在我的 c++ 中有一个 JNI 导出方法，以便我可以在我的 Java 代码中使用它：

```
JNIEXPORT int JNICALL
Java_com_wessel_QC_privateMethod(); 
```

但现在我想从 C++ 代码中调用该函数。但这怎么可能？

# javascript - AngularJS 控制器取决于 URL 参数

> ID：14259739
> 
> 赞同：7
> 
> 时间：2013-01-10T14:06:18.977
> 
> 标签：javascript, angularjs

**编辑：**添加了 $routeProvider 和 $routeParams，但 $routeParams.productId 始终未定义。这是我最初的尝试，但我认为这是错误的方式。无论如何，它暂时不起作用。

我开始学习 AngularJS，我有一个非常简单的问题：根据 URL 中包含的 ID，我想显示不同的 BD 记录。

```
...
<div ng-app=MyApp>
  <div ng-controller="MyCtrl">
    {{ record }}
  </div>
</div>
... 
```

我的 Javascript 文件：

```
var MyApp = angular.module("MyApp",[]);

MyApp.config(['$routeProvider', function($routeProvider) {
  $routeProvider
    .when('/get/:productId', {
       controller: 'MyCtrl'
    });
}])

MyApp.controller('MyCtrl',['$scope','$routeParams','$http',
  function($scope,$routeParams,$http) {
     $http.get("/get/"+$routeParams.productId).success(function(data) {
        $scope.record = data;
     });
}]) 
```

我尝试使用 $routeProvider 和 $routeParams 没有成功。

提前谢谢你，比尔

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-10T14:17:36.323

您需要两件事，将 $routeParams 注入您的控制器并使用 get 方法创建有效路由

```
 MyApp.controller('MyCtrl',['$scope','$http',"$routeParams",
        function($scope,$http,$routeParams) {
             $http.get("/get/"+$routeParams.productId).success(function(data) {
                 $scope.record = data;
        });
    }; 
```

# c++ - 提升共享指针初始化

> ID：14259740
> 
> 赞同：1
> 
> 时间：2013-01-10T14:06:19.963
> 
> 标签：c++, pointers, shared

我是 C++ 的初学者。我有以下问题。在我定义的 MevisPatientModel 类中：

```
typedef boost::shared_ptr<egMevisPatientModel> Ptr_t; 
```

然后我“定义”了变量：

```
egMevisPatientModel::Ptr_t v_PatientModel; 
```

现在，当我尝试访问 MevisPatientModel 类的 getType 函数时：

```
v_PatientModel->getType() 
```

...我收到以下消息：

> 断言失败！...shared_ptr.hpp 表达式 px!= 0

我的意图是指针未初始化。现在我知道这里有很多“适合”我的问题的答案。但正如我所说，我是初学者。老实说，我不明白这些答案。请帮助我，并为我的问题给出明确而具体的答案。非常感谢。

问候，马可

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:11:12.310

您需要创建一个动态对象`new`并将结果指针分配给`shared_ptr`：

```
egMevisPatientModel::Ptr_t v_PatientModel(
    std::make_shared<egMevisPatientModel>()); 
```

# asp.net - 调用page_load表单jquery ajax客户端

> ID：14259741
> 
> 赞同：0
> 
> 时间：2013-01-10T14:06:20.823
> 
> 标签：asp.net, jquery, postback

我需要在服务器端获取用户屏幕分辨率并根据分辨率调整控件的大小。

我有`asp:HiddenField`我想存储分辨率的地方。

```
<asp:HiddenField runat="server" ID="hdnScreenResolution" /> 
```

我有提交分辨率的 jquery ajax 调用：

```
 $(document).ready(function () {
      width = screen.width;
      height = screen.height;
      $.ajax({
         url: "Questionnaire.aspx/WindowResolutionSet",
         data: "{ 'width': '" + width + "', 'height' : '" + height + "'}",
         type: "POST",
         contentType: "application/json; charset=utf-8",
         sucess: function (msg) { alert("it works"); },
         error: function () { alert("error"); }
     });
 }); 
```

和它的网络方法：

```
 [WebMethod]
    public static bool WindowResolutionSet(string width, string height)
    {
        return true;
    } 
```

从 WindowResolutionSet 我无法访问页面上的服务器控件。

并且`sucess: function (msg) { alert("it works");`不开火。

我想填充`width`并`height`打开`sucess`，然后从中访问它，`Page_Load()`但`sucess`不会触发。`error`也不执行。

必须有更有效的方法，但我不知道它=/

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:10:27.227

[这些值可以使用HttpCapabilitiesBase.ScreenPixelsWidth](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.screenpixelswidth.aspx)和[HttpCapabilitiesBase.ScreenPixelsHeight](http://msdn.microsoft.com/en-us/library/system.web.configuration.httpcapabilitiesbase.screenpixelsheight.aspx)直接访问。

例子：

```
 var clientSize = new { 
      X = Page.Request.Browser.ScreenPixelWidth, 
      Y = Page.Request.Browser.ScreenPixelHeight
      };
 SomeMethod(clientSize.X, clientSize.Y); 
```

# sharepoint-2010 - 与 2010 年相比，SharePoint 2013 中博客网站的网站定义或 onet.xml 文件有何变化？

> ID：14259744
> 
> 赞同：0
> 
> 时间：2013-01-10T14:06:24.723
> 
> 标签：sharepoint-2010, sharepoint-2013, site-definition

我们在安装 SharePoint 2013 的服务器中的 15 个配置单元文件夹“C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\15\TEMPLATE\SiteTemplates”中有一个“Blog”文件夹。里面有 xml\onet.xml 文件。在 onet.xml 文件中，如下所示

![在此处输入图像描述](../Images/1825c0f43233d3e1ef937070c488c496.png)

图 1：SharePoint 2013 的 Onet.xml

我想展示的是这个 xml 在“Configurations\Configuration\Lists”节点内没有任何子列表。如果查看 SharePoint 2010 的 onet.xml 文件，则它有 5 个列表，如下图所示。

![在此处输入图像描述](../Images/dd2bf1b8c259fc9edc79f470eab25f7a.png)

图 2：SharePoint 2010 的 Onet.xml

据我所知，当创建博客模板的新站点时，SharePoint（2010 或 2013）服务器会创建这些列表节点中定义的列表。

在 SharePoint 2013 中没有列表节点，但有一个“博客功能”（Id=FAF00902-6BAB-4583-BD02-84DB191801D8，如图 1 所示）。

如果打开博客功能的 Elements.xml 文件，它只有 ListTemplate 节点，但没有任何 ListInstance 节点。

所以，我想知道，SharePoint 2013 如何确定/知道它应该在创建新博客网站时创建“帖子”、“评论”、“类别”和“照片”库。

请对此有所了解吗？或者 15 hive 结构比 14 hive 有什么变化吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T10:25:56.177

在 SharePoint 2013 中，博客网站模板中有一个功能接收器类，它在其中激活“博客内容”功能 - 进而添加帖子、评论、类别和照片列表。我们可以使用反射器看到这些信息。

# eclipse - 将文件标记为活动 - eclipse 插件

> ID：14259745
> 
> 赞同：0
> 
> 时间：2013-01-10T14:06:26.253
> 
> 标签：eclipse, file, eclipse-plugin

我为 eclipse 写了一个插件，让用户创建我自己的项目类型，项目的模板有一些配置文件，我想让用户选择哪个是活动的，这意味着我将使用哪个当我将编译项目时，我添加了一个让用户将其设置为活动的文件的操作，我的问题是是否有任何方法可以在包资源管理器中将其标记为活动（可能是带有一些边框的粗体 ar）所以当用户看这个他可以知道现在哪个是活跃的

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:11:37.020

您可以使用装饰器扩展点`org.eclipse.ui.decorators`。将此添加到您的 plugin.xml：

```
<extension
      point="org.eclipse.ui.decorators">
   <decorator
         adaptable="true"
         class="MyDecoratorClass"
         id="some.id.for.decorator"
         label="Active Build Configuration Decorator"
         lightweight="true"
         location="BOTTOM_RIGHT"
         state="false">
      <enablement>
         <and>
            <objectClass
                  name="org.eclipse.core.resources.IResource">
            </objectClass>
            <or>
               <objectClass
                     name="org.eclipse.core.resources.IProject">
               </objectClass>
               <objectClass
                     name="org.eclipse.core.resources.IFile">
               </objectClass>
            </or>
         </and>
      </enablement>
   </decorator>
</extension> 
```

在您的（或您选择的任何名称）中提供实现`MyDecoratorClass`以检查项目的活动配置并添加文本或图像。也许有这样的东西：[]

每当用户进行需要您更新装饰器的修改以便可以装饰最新更改时，您可以使用以下命令：

```
// the resource whose properties changed and needs to be re-decorated
IResource resource = ...;

IDecoratorManager manager = PlatformUI.getWorkbench().getDecoratorManager();
IBaseLabelProvider decorator = manager.getBaseLabelProvider("id.of.my.decorator");
if (decorator != null)
    ((ILabelProviderListener) manager).labelProviderChanged(new LabelProviderChangedEvent(decorator, resource)); 
```

# android - 从数据库中生成随机词，除了 ID 字段

> ID：14259749
> 
> 赞同：0
> 
> 时间：2013-01-10T14:06:36.533
> 
> 标签：android, sqlite, random

我制作了一个从数据库生成随机单词的应用程序。但是有这样一个问题：
我在数据库中插入了一些行，而 ID 字段是 AUTOINCREMENT。我从数据库中得到一个随机词。但是，当我删除一条记录并插入新记录时，如您所知，ID 正在跳过旧记录。
因此，当我尝试获取随机单词时，可能会发生错误。我怎么解决这个问题？
谢谢你的回复...

```
public void kelimeUret() {

    SQLiteDatabase db = kelimeler.getReadableDatabase();

    rastgele = new Random();

    Cursor kayit = db.rawQuery("SELECT count(*) FROM kelimeler", null);

    kayit.moveToFirst();

    int max = Integer.parseInt(kayit.getString(0));
    int min = 1;

    int rastgeleKayit = rastgele.nextInt(max - min + 1) + min;

    Cursor kayit2 = db.rawQuery("SELECT ingilizce FROM kelimeler WHERE id=" + rastgeleKayit, null);

    kayit2.moveToFirst();
    String sonuc = kayit2.getString(0);

    olusturulanKelime = sonuc;

    kelime = (TextView) findViewById(R.id.kelime);
    kelime.setText(sonuc);

} 
```

我的代码在这里。其实没有问题。有用。但是当 random 生成一个之前已从数据库中删除的 ID 时，它会出错。我认为我应该为记录生成一个有序的数字，但我找不到这样做的方法。我想用另一种方式来做。（不在身份证上）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:30:31.040

如果可以的话，您最简单的选择可能是放弃 AUTOINCREMENT，而是自己处理提供 ID。只需查询当前的最高 ID 并自行递增。

# c - 带有 C 语言编程的骰子模拟器

> ID：14259751
> 
> 赞同：0
> 
> 时间：2013-01-10T14:06:47.403
> 
> 标签：c, dice

我正在尝试为基本的骰子模拟器程序编写代码。当按下一个开关时，两个七段显示器将在 1-6 之间快速变化。松开按钮时，随机数将显示在两个七段显示器上。

此代码将连接到 ISIS 中的 pic16F877，我正在使用 MPLAB 进行 C 编程。

我对这个编程的东西真的很陌生，所以我很难理解它。

```
#include <pic.h>
const char patterns[]={0X3F, 0X06, 0X5B, 0x4F, 0X66, 0X6D, 0X7D}
char rand_num1=0;
char rand_num2=0;

void main(void)

{
     TRISB=0x00;
     TRISC=0x01;
     TRISD=0x00;

     for(;;)
            {
                if(RCO==0)
                {
                         rand_num1=rand()%6+1;
                         rand_num2=rand()%6+1;
                }

                if (RC0==1)
                  {
                         const char patterns[];
                  }
            }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:17:49.023

让我们首先将其分解为多个部分，然后分别解决它们。无论如何，这是一个很好的做法，你最终应该会遇到很多单独容易解决的小问题。

我们可以从主循环的伪代码开始：

```
for ever {
    while button is pushed {
        roll the dice
        update the displays
    }
    /* this ^ loop ends when the button is released
        and is never entered until the button is pushed
    */
} 
```

这意味着：

```
int main(void)
{
    /* somewhere to keep the current value of each die,
       initialized to zero */
    char dice[2] = {0,0};
    for (;;) {
        while (button_pushed()) {
            roll(dice);
            display(dice);
        }
    }
} 
```

所以现在我们需要写`button_pushed`：

```
/* return true (non-zero) if RC0 is zero/one (delete as appropriate) */
int button_pushed(void)
{
    return RC0 == 0;
} 
```

... 和`roll`, 和`display`. 这会让你开始吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:56:04.827

让我澄清一下我上面的评论：

首先，您不需要调用`rand()`. 用户将按下按钮一段时间（精度为 10 或 20 纳秒，这对于微控制器来说是一个合理的时钟）。这个间隔，并且给定精度可能会比调用更随机`rand()`。因此，您可以拥有一个计数器（即最多 256 个）并从该计数器中获取两个随机数。在代码中，这将类似于：

```
int counter = 0;
int lo_chunk, hi_chunk;
if(RCO == 0) { // assuming that RCO == 0 means the button is pressed
    counter = (counter + 1) % 256; // keep one byte out of the int
                                   // we'll use that byte two get 2 4-bit
                                   // chunks that we'll use as our randoms
    lo_chunk = (counter & 0xF) % 6; // keep 4 LSBits and mod them by 6
    hi_chunk = ((counter >> 4) & 0xF) % 6; // shift to get next 4 bits and mod them by 6
    // Now this part is tricky.
    // since you want to display the numbers in the 7seg display, I am assuming 
    // that you will need to write the respective patterns "somewhere"
    // (either a memory address or output pins). You'll need to check the
    // documentation of your board on this. I'll just outline them as 
    // "existing functions"
    write_first_7segment(patterns[lo_chunk]);
    write_second_7segment(patterns[hi_chunk]);

 } else if(RCO == 1) { // assuming that this means "key released" 
     rand_num1 = lo_chunk;
     rand_num2 = hi_chunk;
     // probably you'll also need to display the numbers.
 } 
```

我希望我在上面的评论中写的现在更有意义。

请记住，由于不知道您的电路板的确切细节，我无法告诉您如何将模式实际写入 7 段显示器，但我假设会有某种功能。

# google-apps-script - 从电子表格脚本中调用 Web App 脚本？

> ID：14259755
> 
> 赞同：2
> 
> 时间：2013-01-10T14:06:58.750
> 
> 标签：google-apps-script, google-sheets

如何从 Google 电子表格容器中的脚本中调用外部 Google Web App 脚本？我有许多动态创建的电子表格，并希望它们都调用一个 Web 应用程序以实现统一性和易于维护。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:20:02.133

看看这篇博文：[在主从电子表格之间触发更新](http://www.jellybend.com/2012/12/18/trigger-updates-between-master-slave-spreadsheets/) 基本上你想要在相同的情况下完成，在特定场景中，主电子表格实际上是所有从电子表格文档的 Web 应用程序（Web 服务）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T16:13:06.037

您正在描述使用 Google Apps 脚本库的教科书！从阅读[Apps 脚本中的版本和库简介](http://googleappsdeveloper.blogspot.ca/2012/05/introducing-versions-and-libraries-in.html)开始。

您的主脚本以及您想要访问的任何实用程序都需要设置为库，例如假设它被称为`MyLib`. 然后，您动态创建的（客户端）电子表格`MyLib`通过将其视为 javascript 对象来访问其中的函数。例如，一个函数`calcValues()`会被这样引用：

```
...
var result = MyLib.calcValues(dataRange);
... 
```

您没有问这个问题，但如果您正在考虑使用在您的库/主脚本中实现的自定义函数（如[电子表格中的自定义函数中](https://developers.google.com/apps-script/execution_custom_functions)所述），您将需要在您的客户端电子表格中提供包装函数。这是与包装器相同的示例：

```
function calcValues (dataRange) {
  return MyLib.calcValues(dataRange);
} 
```

# mysql - MySQL UPDATE with SELECT（将“项目”标记为已读）

> ID：14259762
> 
> 赞同：2
> 
> 时间：2013-01-10T14:07:16.783
> 
> 标签：mysql, sql, select, join, sql-update

我有以下查询，它从“ac_pms”表中选择个人消息（PM）。附加信息正在从其他表中获取 - “ac_accounts”使用`LEFT JOIN`. “ ”表中有“ `pm_read`”列`ac_pms`定义是否读取PM。我需要在选择 PM 时将该字段 ( `pm_read`) 设置为 " "。`1`

```
SELECT p.*, a.seller_id, a.winner_id 
FROM `ac_pms` AS p 
LEFT JOIN `ac_accounts` AS a ON p.pm_for_lot = a.id 
WHERE (p.pm_from=[user_id] OR p.pm_to=[user_id]) 
  AND p.pm_for_lot=[account_id] 
ORDER BY p.pm_date DESC; 
```

我无法想象在哪里插入`UPDATE`表达式`SET pm_read = 1`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:09:30.660

你不能在`SELECT`同`UPDATE`一个 SQL 语句中使用。

但是，您可以`UPDATE`这样`JOIN`：

```
UPDATE ac_pms AS p 
LEFT JOIN ac_accounts AS a ON p.pm_for_lot = a.id 
SET p.pm_read = 1
WHERE (p.pm_from=[user_id] OR p.pm_to=[user_id]) 
  AND p.pm_for_lot = [account_id]; 
```

然后你可以在那之后再做一个`SELECT`。

# performance - 为什么这个查询在使用 pymongo 的 MongoDB 中会变慢？

> ID：14259767
> 
> 赞同：0
> 
> 时间：2013-01-10T14:07:31.117
> 
> 标签：performance, mongodb, networking, pymongo

我正在运行类似的查询 374 次，直到第 367 次性能是合理的，但是返回结果的时间会急剧下降。

我查询的集合存储帖子，其中每个帖子都有一个唯一的 ID，并且数据库中将有同一个帖子的多个版本。任务是获取每个帖子 ID 的最新版本。该方法是获取不同的帖子 ID 列表，然后为每个帖子 ID 获取具有最高 ObjectID 的帖子 ID。

这也可以通过聚合框架来完成，但它会出错`exception: aggregation result exceeds maximum document size (16MB)`

这是代码：

```
for oi in obj_ids: #obj_ids is a list of strings containing unique post IDs
    t1 = time.time()
    o = col.find({'object_id':oi}).sort('_id', -1).limit(1)[0]
    t2 = time.time() 
```

该`col.find`函数是定时的，下面是这个查询的性能如何随着时间的推移而恶化：

```
364 of 374 in 0.00369000434875s
365 of 374 in 0.0037579536438s
366 of 374 in 0.00375485420227s
367 of 374 in 0.00367307662964s
368 of 374 in 0.735110998154s
369 of 374 in 3.09494900703s
370 of 374 in 5.16561698914s
371 of 374 in 7.14517307281s
372 of 374 in 8.3472340107s
373 of 374 in 8.61702394485s
374 of 374 in 8.07462406158s 
```

任何想法发生了什么？

更新 2012/11/01

使用 Python cprofile 我发现似乎存在网络瓶颈

![按时间排序](../Images/f623dc2a48f2c98f4e285b8a85d0614d.png)

编辑：拼写

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:03:38.200

好像你的内存可能用完了。在 linux 上，您可以通过以下方式检查 RAM`$ free -m`

查看您是否有可用的 RAM。它增加延迟的因素似乎是您正在访问磁盘（交换操作）。

如果 python 占用内存，请使用[gc](http://docs.python.org/2/library/gc.html)模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T15:54:46.390

问题与指数有关。我在 _id 和 object_id 上创建了一个复合索引，而实际上我应该添加一个单独的 _id 索引和 object_id 索引。完成此操作后，约 380 个查询在大约 10 秒内运行，而不是 5 分钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-27T12:22:22.943

如果您想使用聚合框架，并且出现“聚合结果超出最大文档大小 (16MB)”错误，您可以使用 $out 语句将结果放在临时集合中，然后从该集合中查看结果收藏。如果您的集合中有大量元素，这可能会更快，因为您最终会减少查询，从而减少网络延迟。

# java - Java 5 中的 AES 256 加密支持

> ID：14259771
> 
> 赞同：0
> 
> 时间：2013-01-10T14:07:52.067
> 
> 标签：java, encryption

我已经看到 AES 256 加密解密适用于 Java 6 及更高版本。

我如何在 Java 5 中实现相同的功能（除了策略文件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T18:38:07.240

BouncyCastle库一直支持到 1.4 [。](http://www.bouncycastle.org/documentation.html)它包括 AES256，只要您不将其用作 JCE 提供程序，我认为您可以在没有策略文件的情况下使用它。

也就是说，默认的[Java 1.5 JCE](http://docs.oracle.com/javase/1.5.0/docs/guide/security/jce/JCERefGuide.html#AppA)（Java 加密扩展）确实包含 AES256。正如您在问题中指出的那样，您需要部署一个无限制的策略文件才能实际使用 256 位算法。这是不可避免的，但不应该那么困难。上面的 bouncycastle 链接告诉您如何操作。

# jquery - jQuery 在第一个面板内工作，但不能在重复面板内工作

> ID：14259775
> 
> 赞同：0
> 
> 时间：2013-01-10T14:08:01.177
> 
> 标签：jquery, html, css

我有以下下拉列表，可以在其生成的第一个面板上与我的 jquery 一起正常工作，但同一面板可以生成多次，并且 jQuery 的后续页面不适用于显示另一个框。

例如，您将在代码 panel22_0 ...panel22_1 等中看到。

我现在很困惑。非常感谢任何帮助。

面板22_

```
<xsl:for-each select="bankguarantees/bankguaranteedata">
    <div id="panel22" class="panels">
    <xsl:attribute name="id">panel22_<xsl:value-of select="@id"/></xsl:attribute>
  <table border="1" width="100%" height="100%"  bgcolor="#CECFFF" style="border-top: none" cellspacing="10">    
<tr>
<td>
<table border="0" width="100%" height="100%" bgcolor="lightyellow" class="inline">
<tr>
<td colspan="3" class="Header" height="1"></td>
</tr>
   <tr name="contliab" id="contliab">
        <script type="text/javascript">
         $('#producttypes').change(function()
         {
           if($('#otherprodtype').is(':selected'))
           {
           $('#otherprodtypebox').show();
           }
         else
          {
           if($('#otherprodtypebox').is(':visible'))
           {
             $('#otherprodtypebox').hide();
           }
          }
         });;
        </script>
        <td class="Label">Product Type</td>
        <td class="field">
         <select name="producttypes" id="producttypes">
          <option value="interventionguar">
           <xsl:if test="producttypes/option[@id='interventionguar']='selected'">
            <xsl:attribute name="selected"/>
           </xsl:if>Intervention Guarantee</option>
          <option value="customsguar">
           <xsl:if test="producttypes/option[@id='customsguar']='selected'">
            <xsl:attribute name="selected"/>
          </xsl:if>Customs Guarantee</option>
          <option value="otherprodtype" id="otherprodtype">
           <xsl:if test="producttypes/option[@id='otherprodtype']='selected'">
            <xsl:attribute name="selected"/>
           </xsl:if>Other</option>
         </select>
         <input class="amdInputText" type="text" id="otherprodtypebox" value="" style="display:none;">
            <xsl:attribute name="value"><xsl:value-of select="otherprodtypebox"></xsl:value-of></xsl:attribute></input>
        </td>
       </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:55:00.280

您应该在 html 中只使用每个 ID 一次。改用类：

```
$('.producttypes').change(function()
     {
       $this = $(this);
       if($this.children('.otherprodtype').is(':selected'))
       {
       $this.sliblings('.otherprodtypebox').show();
       }
     else
      {
       if($this.sliblings('.otherprodtypebox').is(':visible'))
       {
         $this.sliblings('.otherprodtypebox').hide();
       }
      }
     });; 
```

当然，您需要将 producttypes 类添加到 id 为 producttypes 的元素，将 otherprodtype 类添加到 id 为 otherprodtype 的元素等。比你可以扔掉 ID 以免它们重复。

# php - 从自定义类别属性中获取值

> ID：14259776
> 
> 赞同：1
> 
> 时间：2013-01-10T14:08:02.267
> 
> 标签：php, magento

我正在尝试从 Magento 中的自定义类别属性中获取值。该属性是一个选择字段，由以下安装脚本创建：

```
$this->startSetup();

$this->addAttribute('catalog_category', 'category_categorycolor', array(
    'group'         => 'General Information',
    'input'         => 'select',
    'type'          => 'varchar',
    'label'         => 'Categorie kleur',
    'backend'       => '',
    'visible'       => 1,
    'required'      => 0,
    'user_defined'  => 1,
    'option'            => array (
                                    'value' => array('yellow' => array('Geel'),
                                                     'purple' => array('Paars'),
                                                     'blue' => array('Blauw'),
                                                     'red' => array('Rood'),
                                                     'orange' => array('Oranje'),
                                                     'green' => array('Groen'),
                                                     'darkblue' => array('Donkerblauw'),
                                                     'lightgreen' => array('Lichtgroen'),                                               
                                                )
                                ),
    'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
));

$this->endSetup(); 
```

不幸的是，只得到数字而不是文本值。我使用这一行来检索值：

```
<?php $_category_categorycolor = $_category->getData('category_categorycolor'); if($_category_categorycolor): ?> <?php echo $_category_categorycolor; ?> <?php endif; ?> 
```

有人能帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:21:33.907

像这样的东西：

```
$category_id = '10';
$attribute_code = 'category_categorycolor';
$category = Mage::getModel('catalog/category')->load($category_id);

echo $category->getResource()->getAttribute($attribute_code)->getFrontend()->getValue($category); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T14:15:27.730

解决方案非常混乱（我知道的唯一一个）。

```
$opt = array(); // will contain all options in a $key => $value manner
$attribute = Mage::getSingleton('eav/config')->getAttribute('catalog_category', 'category_categorycolor');
    if ($attribute->usesSource()) {
        $options = $attribute->getSource()->getAllOptions(false);
        foreach ($options as $o) {
            $opt[$o['value']] = $o['label'];
        }
    }

$categoryColorId = $_category->getData('category_categorycolor');
$categoryColorLabel = $opt[$categoryColorId];

// if you have problems, do a Zend_Debug::dump($opt); 
// - it should contain an array of all the options you added 
```

没测试过，看看有没有用。

PS：无法回复您的评论，不知道为什么。$opt 包含什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:23:10.350

您返回的数字是下拉列表中每个值的 id。您也必须加载下拉值。

请参阅以下页面。它帮助我理解了这一点。

[http://www.sharpdotinc.com/mdost/2009/04/06/magento-getting-product-attributes-values-and-labels/](http://www.sharpdotinc.com/mdost/2009/04/06/magento-getting-product-attributes-values-and-labels/)

# javascript - 始终使用 filterlist.js 在行 boxlist 中的第一个选择集

> ID：14259779
> 
> 赞同：0
> 
> 时间：2013-01-10T14:08:05.543
> 
> 标签：javascript, django, html-lists, row, html-select

我有一个列表，创建如下：

```
 <label>
    <select class="select" name="myselect" size="20" required="true">
        {% for row in rows %}
        <option class="{% cycle 'eins' 'zwei' %}">{{ row|cut:"'"|cut:"("|cut:")" }}</option>
        {% endfor %}
    </select>
    </label> 
```

现在我使用了这个 javascript：[filterlist.js](http://www.barelyfitz.com/projects/filterlist/)

我的以下代码如下所示：

```
 <SCRIPT TYPE="text/javascript">
            <!--
            var myfilter = new filterlist(document.myform.myselect);
            //-->
</SCRIPT>
        <P>Count: {{ rows|length }}</P>
        <P>Previously set filter from the first page: "{{ form1 }}"</P>

        <label>
        <INPUT class="input" NAME= regexp onKeyUp="myfilter.set(this.value)">
        </label>
        <INPUT class="senden" TYPE=button onClick="myfilter.reset();this.form.regexp.value=''" value="Clear">

        <INPUT TYPE=HIDDEN NAME="sef" VALUE="">

    <input  class="senden" type="submit" name="send" href="kundendaten" value="Send"> 
```

所有工作都没有麻烦...

当我在选择选项中填写 now selected="selected" 时，将选择最后一个。当我使用过滤器（填写字母）时，列表不再有 7k 数据行或更多......但选择不再存在。:(

现在我的两个问题：

1.  如何始终将第一个而不是最后一个设置为选中？

2.  使用过滤器后如何保持选择？（我将永远选择第一个）

我是否要更改此 javascript 中的任何内容，或者我自己的代码是否有一个简单的技巧？

我使用 win7 32bit、python 2.7.3、django 1.4.1、html5 和 css3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:04:08.147

我没有找到正确的答案，但是使用此过滤器列表 js 最好将输入字段设置为活动...

HTML：

```
 <label>
        <input id="select" name="variable" class="input" size="25" maxlength="9">
    </label> 
```

JS：

```
$('input[id="select"]').focus(); 
```

# spring-mvc - Spring Security Authentication 在我的配置中没有按预期工作

> ID：14259780
> 
> 赞同：-1
> 
> 时间：2013-01-10T14:08:06.883
> 
> 标签：spring-mvc, spring-security

我已经如下配置了弹簧身份验证，但它没有按预期工作

```
<sec:http auto-config="true">
    <!-- Restrict URLs based on role -->
    <sec:intercept-url pattern="pages/login.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY" />

    <sec:intercept-url pattern="/css/style.css" access="IS_AUTHENTICATED_ANONYMOUSLY" />
     <sec:intercept-url pattern="pages/**" access="ROLE_USER" />

    <!-- Override default login and logout pages -->
    <sec:form-login login-page="/login.jsp" 
                         default-target-url="/pages/products.xhtml" 
                         authentication-failure-url="/login.html?login_error=1" />
    <sec:logout logout-url="/logout" logout-success-url="/login.jsp" />
</sec:http> 
```

在服务器启动时，我被重定向到 login.jsp，如果我使用登录表单，到目前为止我被重定向到 products.xhtml 很好，但如果我直接访问 products.xhtml，它只允许我访问 product.xhtml（即使在关闭broser甚至在服务器重新启动时）而不是重定向到 login.jsp 。谁能告诉我我到底错过了什么？

感谢和问候维杰

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:31:16.670

您的模式和 URL 不一致。登录页面有“/login.jsp”，`intercept-url`模式中有“pages/login.jsp”。

尝试使用：

```
<http pattern="/css/**" security="none">

<http>
    <intercept-url pattern="/login.jsp" access="IS_AUTHENTICATED_ANONYMOUSLY" />
    <intercept-url pattern="/**" access="ROLE_USER" />
    <form-login login-page="/login.jsp" 
                     default-target-url="/pages/products.xhtml" 
                     authentication-failure-url="/login.html?login_error=1" />
    <logout logout-url="/logout" logout-success-url="/login.jsp" />
</http> 
```

特定请求的调试日志将准确解释为什么它是安全的或不安全的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:33:23.823

**确保**您没有 Cookie 或有效会话...

# ruby - 如何使用 ruby 连接到 Cassandra

> ID：14259781
> 
> 赞同：0
> 
> 时间：2013-01-10T14:08:17.660
> 
> 标签：ruby, amazon-web-services, cassandra

我是 Cassandra 的新手，正在尝试实现一些简单的操作，例如将数据插入 cassandra。我正在使用 cassandra gem 来实现这一点。

```
client = Cassandra.new('tags_logs', 'ec2-xxx-xxx-xxx.com:9160')
client.disable_node_auto_discovery!
client.get('tag_data','red') 
```

我收到以下错误：

```
ThriftClient::NoServersAvailable - No live servers in ... 
```

我正在从我的本地机器上运行这段代码。虽然我使用 cassandra-cli 连接**没有问题**（所以这不是防火墙问题），但代码拒绝工作。在我自己的本地机器上访问 Cassandra 时，它**可以完美运行。**

有任何想法吗？谢谢，

伊甸园。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-05T01:44:32.547

我建议您使用我正在开发的这个 gem：[https ://github.com/hsgubert/cassandra_migrations](https://github.com/hsgubert/cassandra_migrations)

它通过 CQL3 提供对 Cassandra 的访问权限，并通过迁移管理模式。

注意：它需要 Rails。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T07:54:08.847

对于后代：只需更改超时...

客户端 = Cassandra.new('tags_logs', 'ec2-example-example-example.com:9160',:connect_timeout => 10000)

# android - android公共文本框

> ID：14259782
> 
> 赞同：-3
> 
> 时间：2013-01-10T14:08:32.250
> 
> 标签：android, tabs, public

我遇到了另一个棘手的小问题。

我正在编写一个带有选项卡的应用程序，但我在屏幕顶部有一个文本框（EditText），我希望能够从任何选项卡接收文本数据。由于每个选项卡都有自己的活动和布局，因此很难实现。

我希望能够使用：

```
editText1.setText("Hello World");//sample text 
```

从任何选项卡/活动。

有谁知道如何从一个布局公开一个文本框并能够接收文本？

我正在使用 TabActivity，是的，我知道它已被弃用，但由于这是我的第一个带有标签的应用程序，它比 Fragments 更容易学习。下次我会尝试它们，除非它们是我问题的答案，在这种情况下我有很多重新编码要做！

好的，新的部分。

```
package com.epsilonitsystems.epecsandroid;

import android.app.TabActivity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.EditText;
import android.widget.TabHost;
import android.widget.TextView;
import android.widget.TabHost.TabSpec;
import android.view.Menu;
import android.speech.tts.TextToSpeech;

public class MainActivity extends TabActivity {

public EditText editText1;  

@Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    editText1 = (EditText) findViewById(R.id.editText1); 
    TabHost tabHost = getTabHost();

    // Tab for Core
    TabSpec corespec = tabHost.newTabSpec("Core");
    corespec.setIndicator("", getResources().getDrawable(R.drawable.ic_i));
    Intent coreIntent = new Intent(this, CoreActivity.class);
    corespec.setContent(coreIntent);

    // Tab for Drink
    TabSpec drinkspec = tabHost.newTabSpec("Drink");
    drinkspec.setIndicator("", getResources().getDrawable(R.drawable.ic_drink));
    Intent drinkIntent = new Intent(this, DrinkActivity.class);
    drinkspec.setContent(drinkIntent);

    // Adding all TabSpec to TabHost
    tabHost.addTab(corespec); // Adding Core tab    
    tabHost.addTab(drinkspec); // Adding Drink tab  
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
} 
```

}

那是主要活动，我将只展示核心活动，因为当我让它工作时它们都是一样的。

```
package com.epsilonitsystems.epecsandroid;

import android.app.Activity;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.ImageButton;
import android.widget.TextView;
import android.speech.tts.TextToSpeech;

public class CoreActivity extends Activity {

private TextToSpeech mTts;
// This code can be any value you want, its just a checksum.
private static final int MY_DATA_CHECK_CODE = 1234;

EditText editText1;
String Spch,Str;
ImageButton imageButton1,imageButton2;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.core_layout);

    //button1 = (Button) findViewById(R.id.button1);
    editText1 = (EditText) findViewById(R.id.editText1);
    mTts = new TextToSpeech(this, null);

}

public void onimageButton1Click(View view) {
//mTts.speak("I",TextToSpeech.QUEUE_FLUSH,null);
//Spch=editText1.toString();
//Spch=Spch+"I ";

    editText1.setText("Hello World");
}

}//Activity End 
```

由于我还是新用户，所以我无法发布屏幕截图，抱歉。

请问有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:24:33.750

加里，

您正在寻找的可能是如何在不同的活动之间共享数据。您可以通过多种方式做到这一点，但最干净的是使用启动新 Activity 的 Intent。有了这个，您可以通过 Intent.putXXXXXX 方法设置额外的数据。你可以使用 Intent.putExtra("my_private_key", mTextVar); 并使用 this.getIntent().getStringExtra("my_private_key"); 在您的其他活动中获取它

附言。尽管从 TabActivity 开始看起来很诱人，但您实际上通过一个糟糕的开始和学习您不应该再使用的课程来让自己变得更加困难。我建议您选择一些好的片段教程，一旦正确解释，它们将同样简单。您应该查看每个示例[http://www.vogella.com/android.html](http://www.vogella.com/android.html)

# android - 复杂的android布局

> ID：14259784
> 
> 赞同：0
> 
> 时间：2013-01-10T14:08:40.080
> 
> 标签：android, layout, android-linearlayout, android-tablelayout

我需要用 4 个 TextView 进行布局。

第一个 TextView 位于屏幕的左边界，第二个 TextView 可能有不同的大小，第三个 TextView 位于第二个 textView 之后，第四个 TextView 位于屏幕的右边界。

如果第二个 TextView 很短，则在第三个 TextView 之后添加空格，例如：

```
[TextView1 TextView2 TextView3 (free space) TextView4] 
```

如果第二个 TextView 很长，它会在末尾用 ... 椭圆化：

```
[TextView1 VeryLooooooongTexVi... TextView3 TextView4] 
```

如何在 xml 中编写此布局？我必须使用 LinearLayout 还是 TableLayout 更好？你能举一些例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T20:36:30.653

您可以使用**RelativeLayout**使用属性 layout_ **alignParentLeft**、layout_ **alignParentRight**和 layout_ **toRightOf**以您想要的方式对齐文本视图。第二个**TextView**可以使用TextView的**maxWidth、ellipsize、singleLine**属性按需要的方式设计。布局会有点像这样：

```
 <RelativeLayout android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView android:id="@+id/firstTextView"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:text="first"/>

    <TextView android:id="@+id/secondTextView"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_toRightOf="@id/firstTextView"
        android:layout_marginLeft="10dp"
        android:singleLine="true"
        android:maxWidth="100dp"
        android:ellipsize="end"
        android:text="secondtextviewlonnnnnnnnnnnnnnnnng"/>

    <TextView android:id="@+id/thirdTextView"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_toRightOf="@id/secondTextView"
        android:layout_marginLeft="10dp"
        android:text="third"/>

    <TextView android:id="@+id/fourthTextView"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:layout_alignParentRight="true"
        android:layout_marginLeft="10dp"
        android:text="fourth"/>

</RelativeLayout> 
```

[此外，您可以在此处](https://github.com/asnehal/Layouts.git)找到不同布局的示例项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T16:45:34.137

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:layout_width="0"
    android:layout_height="fill_parent"
    android:layout_weight="1" />

<TextView
    android:layout_width="0"
    android:layout_height="fill_parent"
    android:layout_weight="1" />

<TextView
    android:layout_width="0"
    android:layout_height="fill_parent"
    android:layout_weight="1" />

<View
    android:layout_width="0"
    android:layout_height="fill_parent"
    android:layout_weight="1" />

<TextView
    android:layout_width="0"
    android:layout_height="fill_parent"
    android:layout_weight="1" /> 
```

# python - Python TCP 缓冲区溢出

> ID：14259786
> 
> 赞同：0
> 
> 时间：2013-01-10T14:08:42.250
> 
> 标签：python, tcp

我有一个客户端服务器通信，我编写了以下服务器来处理传入的消息，但是如果消息大于缓冲区，它将丢失。如果消息大于缓冲区大小，我如何接收整个包？有没有可能，或者我必须强制客户端（在请求时以最大缓冲区大小发送消息）在缓冲区大小内发送消息？

```
msg ='' 
while( True ):                 
     msg += server.recv( 20480 )                                    
     aSplit = msg.partition( "</packet>" ) 
     #We received the full message
     while( aSplit[ 1 ] == "</packet>" ):                           
          messagehandler(  aSplit[ 0 ] + "</packet>" )                        
          msg = aSplit[ 2 ]
          aSplit = msg.partition( "</packet>" ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:47:36.150

在处理任何类型的分组消息格式时，您实际上只有两种选择：

1.  确保您的缓冲区足够大以处理整个消息。
2.  编写您的代码，以便它可以解析部分消息。

但是，当我说“缓冲区”时，我指的不是参数 for `recv()`- 您可以将其设为任意小，然后`while`多次循环，直到获得完整的消息。

因此，要采用缓冲方法，您可以执行以下操作：

```
msg = ''
while True:
    msg += server.recv(8192)
    while True:
        aSplit = msg.partition("</packet>")
        if not aSplit[1]:
            break
        messagehandler(aSplit[0] + "</packet>")
        msg = aSplit[2] 
```

这是有效的，因为如果`</packet>`未找到，则`partition()`仍然返回一个 3 元组，其中第一项是整个字符串，另外两项是空的。因此，一直`partition()`为分隔符返回一个非空字符串，然后找到一个数据包。一旦它是空的，就会有一个部分数据包进入`msg`（或者它是空的），所以我们返回从网络读取，直到我们再次获得整个数据包。

这确实涉及缓冲字符串中的整个消息`msg`，但这很好，除非您希望这些消息变得非常大（数兆字节） - 例如，如果消息包含大文件，就会发生这种情况。在这种情况下，您需要更聪明一些，例如将数据交换到磁盘或在收到数据时处理数据。

如果我不清楚这些，请告诉我。

编辑：我应该补充一点，确保缓冲区（即`msg`）不会变得太大通常是个好主意 - 如果确实如此，那么您需要关闭连接，因为出现问题。这会阻止某些东西向应用程序提供无尽的数据，直到系统上的内存意外或恶意耗尽。此外，您需要非常确定字符串`</packet>`实际上不会出现在消息中 - 这会错误地将消息分成两半。

# android - 设置与其他视图相同的视图宽度

> ID：14259788
> 
> 赞同：-1
> 
> 时间：2013-01-10T14:08:43.173
> 
> 标签：android, layout

我有一个带有 2 个等重按钮的线性布局。所以它们占据了整个屏幕（宽度方向）。

在第一个下方的另一个线性布局中，我只有 1 个按钮，我希望其宽度与前 2 个按钮中的任何一个相同。

除了使用gridview或tableview等之外，有没有一种简单的方法可以做，

我试过这个：

```
Button one = (Button) findViewById(R.id.one);
Button two = (Button) findViewById(R.id.two);
Button three = (Button) findViewById(R.id.three);

three.setLayoutParams(new LinearLayout.LayoutParams(
        one.getLayoutParams())); 
```

**布局：**

```
<LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            xmlns:tools="http://schemas.android.com/tools"
            android:id="@+id/first"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >

        <Button
            android:id="@+id/one"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <Button
            android:id="@+id/two"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </LinearLayout>

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        xmlns:tools="http://schemas.android.com/tools"
        android:id="@+id/second"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/first"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/three"
            android:layout_width="150dp"
            android:layout_height="wrap_content" />
    </LinearLayout> 
```

但是第三个按钮现在是不可见的。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:16:44.423

试试这个第二排

```
<LinearLayout
    android:id="@+id/second"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/first1"
    android:weightSum="2"
    android:orientation="horizontal" >

    <Button
        android:layout_weight="1"
        android:id="@+id/three"
        android:layout_width="0dp"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:16:10.240

您可以在 java 代码中设置第三个按钮的宽度，只需使用 get 和 set width 方法。

获取其他按钮之一的宽度，并将其设置为第三个按钮的宽度。

其次，您的第三个按钮是不可见的，因为您的 2 个 LinearLayouts 周围没有根布局。

您应该在其周围添加第三个“根”LinearLayout，使用 android:orientation="vertical"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:53:21.843

您的第三个按钮不可见的原因是因为在构造（和设置）新的 LinearLayout.LayoutParams 时通过

```
three.setLayoutParams(new LinearLayout.LayoutParams(one.getLayoutParams())); 
```

权重不会转移到新的 LinearLayout.LayoutParams 中。

您可以使用以下代码来解决这种情况：

```
LinearLayout.LayoutParams newlayout = new LinearLayout.LayoutParams(one.getLayoutParams());
    newlayout.weight = 1;
    three.setLayoutParams(newlayout); 
```

或者您可以使用另一个构造函数（[LinearLayout.LayoutParams (int width, int height, float weight)](http://developer.android.com/reference/android/widget/LinearLayout.LayoutParams.html#LinearLayout.LayoutParams%28int,%20int,%20float%29)），它明确地采用权重：

```
LayoutParams param = new LinearLayout.LayoutParams(one.getLayoutParams().width, one.getLayoutParams().height,((LinearLayout.LayoutParams) one.getLayoutParams()).weight);
three.setLayoutParams(param); 
```

现在三个也应该可见。

# java - 如何获取多个选择值

> ID：14259791
> 
> 赞同：0
> 
> 时间：2013-01-10T14:08:50.147
> 
> 标签：java, jsp, liferay

我想获取 liferay 中的项目列表。

我使用`<aui:select>`了如下标签：

```
<aui:select name="select" multiple="true">
    <aui:option value="one"></aui:option>
    <aui:option value="two"></aui:option>
    <aui:option value="three"></aui:option>
    <aui:option value="four"></aui:option>
</aui:select> 
```

当表单提交时，ProccessAction 中没有参数。

```
String[] items =  actionRequest.getParameterValues("select");   
System.out.println(items); 
```

如何提交**多选**项目？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-11T04:51:12.440

试试这个代码..

```
<aui:select name="select" id="select" multiple="true"> 
```

```
String[] items = ParamUtil.getParameterValues(request, "select");

for(String item : items){
    System.out.println(item);
} 
```

希望对你有帮助 ！！！

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-20T16:39:06.910

问题在于您的 portlet 代码中的参数名称。当您使用 aui taglig 时，请记住它始终会在您的输入名称中添加一个命名空间（例如*_yourPortletName_WAR_yourPluginName_ ）。*因此，您可以像这样更改代码：

```
String mySelectInputName = actionResponse.getNamespace() + "select";
String[] items =  actionRequest.getParameterValues(mySelectInputName); 
```

替代方案：使用类 ParamUtil 而不是直接访问 actionRequest。

希望这有帮助。

谢谢。

# java - 使用 NioSocketConnector 重新连接失败

> ID：14259794
> 
> 赞同：0
> 
> 时间：2013-01-10T14:08:56.303
> 
> 标签：java, mina

```
ConnectFuture future = connector.connect(address);
future.addListener(new IoFutureListener<ConnectFuture>() {
    @Override
    ublic void operationComplete(ConnectFuture future) {
    try
    {
        if (future.isConnected()) 
```

当我使用以下代码连接到服务器时，它工作正常并`isConnected`返回我`TRUE`。但是当服务器崩溃并出现时，我会再试一次。然后它不工作。然后我还需要重新启动客户端。知道为什么吗？

# c# - 3D 世界中的碰撞

> ID：14259797
> 
> 赞同：1
> 
> 时间：2013-01-10T14:09:01.200
> 
> 标签：c#, 3d, xna, collision-detection, game-engine

我最近一直在开发一款基于网格的小型自上而下的 2D 游戏。作为实验的一部分，我认为将自动生成的关卡的 2D 表示转换为 3D 很有趣，类似于 Wolfenstein 3D 的风格（例如，我实际上并没有使用 Raycasting）。

将网格转换为带有纹理的四边形并不是什么大问题，但是，我有点纠结于如何实现碰撞。我已经在 Internet 上浏览了 2 天的文章，但没有一篇文章真正为我提供了一个很好的起点，让我了解如何准备我的 3D 世界以进行碰撞以及如何实际实现它。

有谁知道有什么好文章供我阅读，或者甚至愿意写一小段我必须经历的步骤？

我正在用 XNA/C# 编写游戏，但是，您可能知道的任何类型的资源都是受欢迎的（无论是 C++ 还是其他）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:30:32.437

Wolfenstein 3D（和类似的）处理碰撞检测的方式很简单：地图是统一的方形单元格地图。Wolf3d 将单元格细分为 64x64 子单元（如果我没记错的话），以允许玩家优雅地滑过迷宫。对于碰撞检测，检查玩家与网格单元格的位置就足够了，如果单元格包含阻挡障碍物（桌子、墙壁、狗、门）：阻挡否则：继续前进。

如果您正在寻找对角线和其他随机多边形，请查看有关 Portal 引擎的文章。从 Wolf3D 单元到 Doom/Quake BSP 树的步骤是一个很大的步骤，但是[在 Flipcode 档案的底部有很多 Jacco Bikker 的好文章](http://www.flipcode.com/archives/articles.shtml) **阅读那些！**

# ios - 在 iOS 中使用 MPMusicPlayerController 播放和跳过播放列表中的歌曲

> ID：14259798
> 
> 赞同：2
> 
> 时间：2013-01-10T14:09:03.967
> 
> 标签：ios, cocoa-touch, mpmusicplayercontroller

我有播放列表歌曲，`NSArray`并在我`UITableView`喜欢的图片中显示这些歌曲。

![在此处输入图像描述](../Images/9a561f23800bc5343c061b451617b851.png)

就我而言，当我从中选择一首歌曲时`UITableView`，我想用`MPMusicPlayerController's` `applicationMusicPlayer`.

我的意思是当我选择**美国白痴**时`UITableView`，我想和美国白痴一起玩`MPMusicPlayerController's`

当我点击下面的跳过按钮时，它必须像郊区的耶稣一样播放下一首歌。

这是我将歌曲加载到 UITableView 的代码

```
self.player = [MPMusicPlayerController applicationMusicPlayer];

    MPMediaQuery *query = [MPMediaQuery playlistsQuery];
    MPMediaPredicate *predicate = [MPMediaPropertyPredicate predicateWithValue:@"GreenDay" forProperty:MPMediaPlaylistPropertyName comparisonType:MPMediaPredicateComparisonContains];

    [query addFilterPredicate:predicate];

    self.arrayOfSongs = [query items]; 
```

我想你明白我的意思。我想做所有音乐按钮的工作，比如 iOS 内置的音乐应用程序，并在我从`UITableView`.

我正在尝试任何东西，但我没有找到可以解决我的问题的解决方案。

请帮助我这样做。

谢谢。:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:40:44.660

假设您的 NSArray 填充了来自 MPMediaItemCollection 的 MPMediaItems，一旦您知道需要配置什么，这实际上相当简单。首先，创建一个 iVar，最好是 NSUInteger 来存储当前播放曲目的索引。这对于按顺序从一条轨道转到另一条轨道是必要的。

其次，很难从您的帖子中看出曲目标题是从集合中的媒体项目中读取的，还是它们只是静态放置在桌子上，但我提供了一个如何读取曲目标题的示例来自数组中的媒体项，并使用 . 将该值设置为单元格文本`valueForProperty`。

最后，`didSelectRowAtIndexPath`在下面配置以演示将您已经创建的无符号整数设置为所选单元格的值。我创建的两个`didSelectRowAtIndexPath`IBAction 都修改了该索引的值，然后调用了我创建的 void “stopCurrentTrackAndPlaySelection”，它停止当前播放的曲目，将 MPMediaItem 类型转换为该索引处的对象，然后再次开始播放。

如果您需要更多说明，请询问:)

**旁注：**我建议您将媒体选择器选择 (MPMediaItemCollection) 的副本存储在 NSMutableArray 而不是 NSArray 或 MPMediaItemCollection 中。这将允许您即时添加或删除曲目，而无需停止播放。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [myArrayOfTracks count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
    [[cell textLabel] setText:[(MPMediaItem *)[myArrayOfTracks objectAtIndex:indexPath.row] valueForProperty:MPMediaItemPropertyTitle]];

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    indexOfCurrentlyPlayingTrack = indexPath.row;
    [self stopCurrentTrackAndPlaySelection];
}

- (IBAction)nextTrack:(UIButton *)sender
{
    indexOfCurrentlyPlayingTrack ++;
    [self stopCurrentTrackAndPlaySelection];
}

- (IBAction)previousTrack:(UIButton *)sender
{
    indexOfCurrentlyPlayingTrack --;
    [self stopCurrentTrackAndPlaySelection];
}

- (void)stopCurrentTrackAndPlaySelection
{
    [myMPMusicPlayerController stop];
    [myMPMusicPlayerController setNowPlayingItem:(MPMediaItem *)[myArrayOfTracks objectAtIndex:indexOfCurrentlyPlayingTrack]];
    [myMPMusicPlayerController play];
} 
```

# php - 下拉选项更改时如何使用jquery清空选择框

> ID：14259799
> 
> 赞同：1
> 
> 时间：2013-01-10T14:09:03.670
> 
> 标签：php, jquery, html

我在下面有一个 jQuery click 函数，它将一个选择框中的选定值附加到另一个：

```
// Add Button
$('#addbtn').click(function() {
    var selectedOption = jQuery("#studentremain option:selected");
    selectedOption.appendTo($("#studentadd"));
}); 
```

现在我遇到的问题是，如果用户更改下拉菜单中的选项，那么我希望选择框`#studentadd`恢复为空。问题是附加到选择框中的值仍然存在，我怎样才能清空选择框？

下面是下拉菜单更改时的 jQuery 函数以及我尝试清空选择框：

```
$('#sessionsDrop').change(function() {
    if ($(this).val() !== '') {
        var text = $(this).find('option:selected').text();
        $('#studentadd').val('');     
    }
}); 
```

HTML/PHP：

选择框：

```
$addSELECT = "";  
$addSELECT .= '<select name="addtextarea" id="studentadd" size="10">';
$addSELECT .= '</select>'; 
```

下拉式菜单：

```
$sessionHTML = '<select name="session" id="sessionsDrop">'.PHP_EOL;
$sessionHTML .= '<option value="">Please Select</option>'.PHP_EOL;        
$sessionHTML .= '</select>'; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:13:10.043

这肯定会做到吗？

```
$('#studentadd').html(''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:12:50.233

要删除元素的内容，您可以使用`empty()`：

```
$('#sessionsDrop').change(function() {
    if ($(this).val() !== '') {
        var text = $(this).find('option:selected').text();
        $('#studentadd').empty();     
    }
}); 
```

# iphone - MGTwitterEngine 检查是否关注用户

> ID：14259815
> 
> 赞同：0
> 
> 时间：2013-01-10T14:09:59.347
> 
> 标签：iphone, ios, twitter, mgtwitterengine

我`MGTwitterEngine`在我的应用程序中使用 SDK `iOS`。我正在尝试使用此方法检查用户是否正在关注另一个用户：

```
- (NSString *)isUser:(NSString *)username1 receivingUpdatesFor:(NSString *)username2
{
    if (!username1 || !username2) {
        return nil;
    }
    NSMutableDictionary *params = [NSMutableDictionary dictionaryWithCapacity:0];
    [params setObject:username1 forKey:@"user_a"];
    [params setObject:username2 forKey:@"user_b"];

    NSString *path = [NSString stringWithFormat:@"friendships/exists.%@", API_FORMAT];

    return [self _sendRequestWithMethod:nil path:path queryParameters:params body:nil 
                            requestType:MGTwitterUpdatesCheckRequest 
                           responseType:MGTwitterMiscellaneous];
} 
```

此方法总是返回一个格式相同但不相同的字符串：

```
CB4C097E-6740-4536-885E-BAF7D8A981FD 
```

基本上，获得一个布尔值会更好，我不知道我将如何处理这个值。

有任何想法吗？

**编辑初始化_engine的代码

```
 _engine = [[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate: self];
    _engine.consumerKey = kOAuthConsumerKey;
    _engine.consumerSecret = kOAuthConsumerSecret; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:36:48.690

这是一个异步请求，您必须将您的类设置为 MGTwitterEngine 的委托并在这些方法中获取结果，您必须在您的类中实现：

```
- (void)statusesReceived:(NSArray *)statuses forRequest:(NSString *)connectionIdentifier;
- (void)directMessagesReceived:(NSArray *)messages forRequest:(NSString *)connectionIdentifier;
- (void)userInfoReceived:(NSArray *)userInfo forRequest:(NSString *)connectionIdentifier;
- (void)miscInfoReceived:(NSArray *)miscInfo forRequest:(NSString *)connectionIdentifier; 
```

正如您在 MGTwitterEngineDelegate.h 中所读到的：

> ```
> // These delegate methods are called after all results are parsed from the connection. If 
> // the deliveryOption is configured for MGTwitterEngineDeliveryAllResults (the default), a
> // collection of all results is also returned. 
> ```

在那里您可以检查结果值。

# java - 操作系统升级后让我的 ANT 构建工作的问题

> ID：14259820
> 
> 赞同：3
> 
> 时间：2013-01-10T14:10:13.557
> 
> 标签：java, svn, ant, build, javahl

我最近将我的系统从 Mint12 升级到了 Mint14，并且在让我的旧项目在新系统上很好地工作方面遇到了严重的问题。总结一下：

*   让 Mint14 运行良好并安装了我所有的基本软件（Eclipse、ANT 等）
*   从我的备份磁盘恢复我的文件
*   将 Oracle JDK 设置为默认 java 版本
*   从 SVN 签出我的项目的新副本
*   更新了构建文件中的所有路径以反映新的 user_id

这一切都很好，但是我的 ant 构建似乎已经搞砸了，不知何故，当我尝试构建我的项目时，我收到以下错误：

```
~/new_workspace/my_project $ ant dist
Buildfile: /home/my_userid/new_workspace/my_project/build.xml
  [taskdef] Could not load definitions from resource net/sf/antcontrib/antlib.xml. It could not be found.

init:

compile:
    [javac] /home/my_userid/new_workspace/my_project/build.xml:246: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds

static:

dist:
      [svn] <Status> started ...
      [svn] svn: This client is too old to work with working copy '/home/my_userid/new_workspace/my_project'; please get a newer Subversion client
      [svn] svn: This client is too old to work with working copy '/home/my_userid/new_workspace/my_project'; please get a newer Subversion client
      [svn] <Status> failed !

BUILD FAILED
/home/my_userid/new_workspace/my_project/build.xml:104: Can't get status of /home/my_userid/new_workspace/my_project

Total time: 0 seconds 
```

我注意到“太旧而无法使用工作副本......”但是当我检查时`svn --version`我发现它是 1.7.5 应该没问题。注意服务器上的SVN版本同时没有改变。一个理论是该项目（通过 Eclipse 签出，使用 Subclipse 1.6）不适用于 ANT 通过命令行使用的版本，但在这种情况下，客户端版本不是太旧，而是太新！？是否值得“降级”Subversion？

否则可能是什么问题，我该如何解决？是否还有其他常见问题（可能在发行版升级/迁移期间发生）我应该检查以确保项目正常运行？（以下是构建文件的相关位）

* * *

该位定义了 svn 绑定

```
 <path id="svnant.classpath">
    <fileset dir="/home/my_userid/.ant/lib">
      <include name="svnant.jar" />
      <include name="svnClientAdapter.jar" />
      <include name="svnjavahl.jar" />
      <!-- <include name="svnkit.jar" /> tried this as well but no joy -->
    </fileset>
  </path> 
```

“dist”目标中的相关位：

```
 <target name="dist"
          depends="compile,static" description="Compiles and builds jar files">

    <mkdir dir="${dist}"/>
    <buildnumber file="project-version.properties"/>
    <property name="version.number" value="${major.version}.${minor.version}.${micro.version}"/>
    <svn>
      <status path="."
              lastChangedRevisionProperty="rev.number" />
     <info target="." />
    </svn>
    ... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:45:13.673

我看到了第一个问题：

```
[taskdef] Could not load definitions from resource net/sf/antcontrib/antlib.xml. It could not be found. 
```

这告诉我您`<taskdef>`在文件中的某个位置有一个任务`build.xml`，并且它无法再找到丢失的可选 Ant jar。

**我的理论**：在您的旧 Ant 版本中`$ANT_HOME/lib`，您安装了 Ant-Contrib jar。由于该目录默认在 Ant 中`$CLASSPATH`，因此您不必在`<taskdef>`任务行中指定它，因此它看起来像这样：

```
<taskdef resource="net/sf/antcontrib/antcontrib.properties"/> 
```

我始终建议您始终将这些可选任务 jar 放入您的项目中。这样，由于它们已经在项目中，因此没有人必须*安装这些 jars 才能使它们工作：*

*   创建一个目录`/home/my_userid/new_workspace/my_project/antlib/ac`，这样你的项目就会有一个目录`antlib/ac`。
*   在该目录下，下载并安装[ant-contrib-1.03.jar](http://sourceforge.net/projects/ant-contrib/files/ant-contrib/1.0b3/ant-contrib-1.0b3-bin.tar.gz/download)
*   现在更改您`<taskdef>`以将此 jar 包含在其类路径中。

它应该如下所示：

```
<property name="antlib.dir"       value="${basedir}/antlib"/>
<property name="ant-contrib.lib"  value="${antlib.dir}/ac"/>

<taskdef resource="/net/sf/antcontrib/antlib.xml">
    <classpath>
        <fileset dir="${ant-contrib.lib/>
    </classpath>
</taskdef> 
```

添加`antlib/ac/ant-contrib-1.03b.jar`到您的项目中。这样，如果有人签出您的项目，即使他们没有下载并将 ant-contrib jar 安装到他们的机器中，它也会构建。

注意我正在使用`ant.xml`而不是`antcontrib.properties`. 这使我可以访问`<for/>`任务而不是旧`<foreach>`任务。整个事情在这个[Ant-Contrib 安装](http://ant-contrib.sourceforge.net/tasks/index.html#install)页面上进行了解释。

* * *

现在另一个错误：

```
dist:
      [svn] <Status> started ...
      [svn] svn: This client is too old to work with working copy '/home/my_userid/new_workspace/my_project'; please get a newer Subversion client
      [svn] svn: This client is too old to work with working copy '/home/my_userid/new_workspace/my_project'; please get a newer Subversion client
      [svn] <Status> failed ! 
```

首先，真正的问题是您的 Subversion 客户端版本实际上是**太新**而不是**太旧**。Ant 内部的 Subversion 正在使用`svnjavahl.jar`可能需要旧 1.6 版本的 Subversion 工作目录的客户端。同时，您签出的 Subvfersion 客户端版本使用的是***较新***的1.7 版本。Eclipse 可以通过安装 JavaHL、SVNKit 甚至使用命令行客户端来执行 Subversion 检出。

看看你签出的目录的目录结构，看看那些臭名昭著`.svn`的目录是分散在每个目录中还是只是在根目录中。如果该`.svn`目录仅在您的工作目录的根目录下，那么您有一个 1.7.x 版本的 Subversion 进行检出，并且 Ant 使用的 Subversion jar 需要旧的 1.2 到 1.6.x 版本的工作目录。如果您确实看到这些`.svn`目录分散在您的工作目录中，那么您的初始签出使用的是旧的工作目录版本，而 Ant 使用的是新版本。

因此，无论如何，这是解决方案： 从您的**文件中****删除整个 Subversion 提交内容`build.xml`**。首先，它是一个***构建文件***，不应在您的版本控制系统中进行任何类型的更改。那是不好的形式。只应在用户需要时进行更改，而不是因为他们不加思索地执行了 build.xml 文件。

其次，您不应该将派生的构建输出存储在您的存储库中。只存储源，而不是派生的东西。相反，使用像[Jenkins](http://jenkins-ci.org)这样的构建系统来为您处理整个构建和分发业务。

在版本控制中保存分发对您没有任何好处。您无法查看分发历史记录并了解进行了哪些更改。您无法在发行版的两个版本之间进行差异并查看更改。你能说的最好的就是它是一个方便的地方找到它。问题是，每次你做一个新版本时，发行版都会占用很多空间，过了一段时间，你不再使用它们中的大部分了。在 Subversion 中，没有简单的方法可以删除它们，因此它们开始占用大量空间。

假设您为日常构建存储了 100Mb 的适度分布。假设每年有 200 次构建（周末或节假日没有构建），并且您每年向存储库添加 2Gb 的空间。

使用 Jenkins，您可以将您的发行版存储在 Jenkins 构建中，Jenkins 甚至会自动为您删除旧的、不重要的发行版。该发行版现在与使用它的构建相关联，您可以看到构建之间的差异。

但是，如果这些发行版是其他项目需要的 jar 文件怎么办？使用像[Ivy](http://ant.apache.org/ivy)这样的依赖管理系统和像[Nexus](http://www.sonatype.org/nexus/)或[Artifactory](http://jfrog.org)这样的本地 Maven 存储库来管理它。

即使您不想走那么远，您仍然可以`<get/>`直接从 Jenkins 使用任务拉取所需的罐子。Jenkins 为您提供了最后一个好的工件链接，这可以在您的构建系统中用于拉取您想要的 jar。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T22:36:39.880

David 提到使用[ivy](http://ant.apache.org/ivy/)来管理 3rd 方依赖项。

这个例子演示了如何通过构建下载和缓存 ant-contrib 和 subversion 依赖项。

关于颠覆问题，我一直发现在 ANT 中启用是有问题的。我想要的是一种纯 Java 方法会更健壮和跨平台。我的解决方案是[svnkit](http://svnkit.com/)，然后创建一个宏来调用命令行客户端。

# 例子

演示使用 ivy 来管理 subversion 和 ant-contrib 依赖项。使用[cachepath](http://ant.apache.org/ivy/history/latest-milestone/use/cachepath.html)任务以内联方式声明依赖项。如果您管理多个类路径，请使用单独的[ivy.xml文件](http://ant.apache.org/ivy/history/latest-milestone/ivyfile.html)

```
Apache Ant(TM) version 1.8.2
Apache Ivy 2.3.0-rc2 
```

## 构建.xml

```
<project name="build" 
         default="demo-ant-contrib" 
         xmlns:ivy="antlib:org.apache.ivy.ant" 
         xmlns:ac="antlib:net.sf.antcontrib">

    <!--
    ======
    Macros
    ======
    -->
    <macrodef name="svn-checkout">
        <attribute name="src"/>
        <attribute name="dest"/>
        <sequential>
            <mkdir dir="@{dest}"/>
            <java classname="org.tmatesoft.svn.cli.SVN" dir="@{dest}" fork="true" classpathref="build.path">
                <arg value="--non-interactive"/>
                <arg line="--username ${svn.user}"/>
                <arg line="--password ${svn.pass}"/>
                <arg value="checkout"/>
                <arg value="@{src}"/>
            </java>
        </sequential>
    </macrodef>

    <!--
    =======
    Targets
    =======
    -->
    <target name="resolve" description="Resolve 3rd party dependencies">
        <ivy:cachepath pathid="build.path">
            <dependency org="org.tmatesoft.svnkit" name="svnkit-cli" rev="1.7.8" conf="default"/>
            <dependency org="ant-contrib" name="ant-contrib" rev="1.0b3" conf="default"/>
            <exclude org="ant"/>
        </ivy:cachepath>
    </target>

    <target name="checkout" depends="resolve" description="Pull code from SCM repository">
        <svn-checkout src="http://svn.apache.org/repos/asf/subversion/trunk" dest="build/subversion"/>
    </target>

    <target name="demo-ant-contrib" depends="resolve" description="Demonstrate using ant-contrib">
        <taskdef uri="antlib:net.sf.antcontrib" resource="net/sf/antcontrib/antlib.xml" classpathref="build.path"/>

        <ac:for list="a,b,c,d,e" param="letter">
            <sequential>
                <echo>Letter @{letter}</echo>
            </sequential>
        </ac:for>
    </target>

    <target name="clean" description="Cleanup build files">
        <delete dir="build"/>
    </target>

    <target name="clean-all" depends="clean" description="Cleanup and purge ivy cache">
        <ivy:cleancache/>
    </target>

</project> 
```

# jsf-2 - JSF 2 验证以及丰富面孔中的 tabbedPanel 导致问题

> ID：14259822
> 
> 赞同：0
> 
> 时间：2013-01-10T14:10:14.997
> 
> 标签：jsf-2, richfaces

我正在开发一个带有 JSF 2.0 和丰富面孔 4.2.3 的网络应用程序。我有一个页面，其中选项卡式面板相互嵌套，如下所示（代码在最后给出）。

我面临以下问题：

单击选项卡时，将触发验证并且不显示第二个选项卡（因为文本字段没有设置任何值，验证失败）。这是因为，当单击选项卡时，会触发 POST 请求，从而调用验证。我怎样才能解决这个问题？

一种选择可能是将 switchType 更改为“client”。但是，当单击选项卡时，不会显示更新的数据。

```
<h:form>    
    <rich:tabPanel switchType="client">

        <rich:tab header="UserManagement">  
             <rich:tabPanel switchType="client">
                    <rich:tab header="AddUser">

                     <h:form>                       
                         <h:panelGrid id="addUserForm" columns="3">

                                Enter Name : 
                                <h:inputText id="name" value="#{userBean.name}"
                                    required="true" requiredMessage="User Id Required.">
                                </h:inputText>
                                <h:message for="name"></h:message>

                                Enter passWord : 
                                <h:inputText id="passWord" value="#{userBean.passWord}" required="true" requiredMessage="PassWord Required.">                    
                                </h:inputText>
                                <h:message for="passWord"></h:message>

                                Roles : 
                                 <h:selectOneMenu id="roles" value="#{userBean.roleId}">
                                                <f:selectItems  value="#{userBean.roles}"/>
                                </h:selectOneMenu>      
                                <h:message for="roles"></h:message>

                                <h:commandButton action="#{userBean.addUser}"
                                                    value="Add User">
                                      <f:ajax render="addUserForm" execute="@form"></f:ajax>
                                </h:commandButton>  
                        </h:panelGrid>
                    </h:form> 

                    </rich:tab>
                    <rich:tab header="EditUser"> 

                        <h:form>

                            <h:panelGrid id="editUserForm" columns="3">

                                    Enter passWord : 
                                    <h:inputText id="passWord" value="#{userBean.passWord}" required="true" requiredMessage="PassWord Required.">                    
                                    </h:inputText>
                                    <h:message for="passWord"></h:message>

                                    Roles : 
                                    <h:selectOneMenu id="roles" value="#{userBean.roleId}">
                                                    <f:selectItems  value="#{userBean.roles}"/>
                                    </h:selectOneMenu>      
                                    <h:message for="roles"></h:message>

                                    <h:commandButton action="#{userBean.editUser}"
                                                        value="Edit User">
                                          <f:ajax render="editUserForm" execute="@form"></f:ajax>
                                    </h:commandButton>
                            </h:panelGrid>  
                        </h:form>

                    </rich:tab>                          
             </rich:tabPanel>

        </rich:tab>     

        <rich:tab header="DeviceManagement">
        </rich:tab>     

    </rich:tabPanel>
</h:form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:34:50.347

你已经在上面做了一件非常错误的事情，那就是嵌套`<h:form/>`s。表单嵌套在 HTML 和扩展 JSF 中都是非法的。即使您的观点没有其他问题，仅此构造就会在以后让您非常头疼。看到[这个](https://stackoverflow.com/a/7372315/1530938)和[这个](https://stackoverflow.com/a/12684051/1530938)答案

单击选项卡时会触发验证，因为在一天结束时，您的所有组件都集中在同一个`<h:form/>`. 因此，该表单中的任何操作都将提交其中的所有组件。您必须摆脱最顶层`<h:form/>`并相应地重组组件。此外，您可以选择性地处理视图组件`<a4j:commandButton process="someId" ajaxSingle="true"/>`，指定要提交处理的组件的 clientId

# vb.net - 检查被屏蔽的文本框

> ID：14259824
> 
> 赞同：-1
> 
> 时间：2013-01-10T14:10:29.600
> 
> 标签：vb.net, maskedtextbox

我的表单中有五个蒙面文本框。两个带日期格式的蒙版文本框，两个带钱，一个带电话号码。我正在使用下面给出的代码来检查这些框是否为空。

```
 Dim mtxt As Control
    Dim flagmtxt As Boolean
    flagmtxt = False
    For Each mtxt In EMPGBDATA.Controls
        If TypeOf mtxt Is MaskedTextBox Then
            If mtxt.Text = "" Then
                mtxt.BackColor = Color.Red
                flagmtxt = True
            End If
        End If
    Next

    If flagmtxt Then
        MessageBox.Show("Give Compleate Data!", "Warning", MessageBoxButtons.OK, MessageBoxIcon.Warning)
    End If 
```

我想避免检查带有工资格式的蒙面文本框。有机会吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T12:44:14.797

```
flagmtxt = False
    For Each mtxt In EMPGBDATA.Controls
        If TypeOf mtxt Is MaskedTextBox Then
            If mtxt.Text = "" And mtxt.Name <> "MTXTPFESI" Then
                flagmtxt = True
            Else
                flagmtxt = False
            End If
        End If
    Next 
```

# xml - 使用正则表达式从网站中提取内容

> ID：14259826
> 
> 赞同：0
> 
> 时间：2013-01-10T14:10:35.040
> 
> 标签：xml, regex, preg-match

嗨，我只是想掌握正则表达式，我一直在尝试从该网站提取内容，但我认为我的正则表达式有问题，因为我无法向数组中添加任何内容。谁能指出我正确的方向，我认为它只是一件小事。

谢谢

```
<?php   
    $f1 = fopen("http://www.irishexaminer.com/","r");
    $document = fread($f1,100000);
    fclose($f1);
    $regexp = "%<p>(.+)</p><p>%";
    preg_match($regexp,$document,$getHeading);  
    echo "<br>" . $getHeading[1];
    echo '<pre>';
    print_r($getHeading);
    echo '</pre>';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:33:09.297

在您的情况下， p 的结束标签中没有空格的借口。

```
<p> THERE is no excuse for loyalist violence on the streets of Belfast.<p /><p> 
```

正则表达式匹配

```
%<p>(.+)</\s*p><p>% 
```

使正则表达式对 HTML 具有足够的弹性需要一段时间。也接受 Frankies 的建议。将你的努力投入到不太容易失败的事情上。你可以使用[PHP HTML Tidy](http://php.net/manual/en/book.tidy.php)

# c# - 需求建议：数据库连接类使用C#连接mysql

> ID：14259828
> 
> 赞同：-1
> 
> 时间：2013-01-10T14:10:37.870
> 
> 标签：c#, mysql, connection-string, dispose, static-variables

我创建数据库连接类只是为了打开、关闭和创建连接字符串。我命名它`db_connections`。我创建了另一个名为 `db_operations`执行所有 CRUD 数据库事务的类。

我的想法是：我只想声明一次连接字符串（为此，假设我有一个表单来输入任何数据库连接属性，例如：server_name、db_name 等）。

我所知道的 C# 确实有全局变量 cmiiw，我的搜索很多建议使用静态变量来存储数据。但有人告诉我，使用静态变量并不安全。

所有代码都使用 C# 4.0。

这是我的连接类的代码：

```
class db_connections : databases_abstract
{

    private static string dbname;
    private static string dbuser;
    private static string dbpass;
    private static string dbserver;

    public MySqlConnection mysqlConn;

    public static string DB_NAME
    {
        get
        {
            return dbname;
        }
        set
        {
            dbname = value;
        }
    }

    public static string DB_USER
    {
        get
        {
            return dbuser;
        }
        set
        {
            dbuser = value;
        }
    }

    public static string DB_PASSWORD
    {
        get
        {
            return dbpass;
        }
        set
        {
            dbpass = value;
        }
    }

    public static string DB_SERVER
    {
        get
        {
            return dbserver;
        }
        set
        {
            dbserver = value;
        }
    }

    protected override string db_make_connstring(string dbserver, string dbuser, string dbpass, string dbname)
    {
        //## Our connection string
        string connString = String.Format("server={0};user id={1}; password={2}; database={3}; pooling=false",
        dbserver, dbuser, dbpass, dbname);

        return connString;
    }

    public override Boolean db_open_connection()
    {
        try
        {
            //## Initialise the connection
            mysqlConn = new MySqlConnection(
                this.db_make_connstring(db_connections.dbserver, db_connections.dbuser,
                    db_connections.dbpass, db_connections.dbname)
                );
            if (mysqlConn != null)
            {
                mysqlConn.Close();
            }
            //## Open the connection
            mysqlConn.Open();

            return true;
        }
        catch (Exception Ex)
        {
            System.Windows.Forms.MessageBox.Show(Ex.Message, "Error",
                System.Windows.Forms.MessageBoxButtons.OK,
                System.Windows.Forms.MessageBoxIcon.Error);
            return false;
        }
    }

    public override void db_close_connection()
    {
        try
        {
            if (mysqlConn != null)
            {
                mysqlConn.Close();
                mysqlConn.Dispose();
            }
        }
        catch(Exception Ex)
        {
            System.Windows.Forms.MessageBox.Show(Ex.Message, "Error",
                System.Windows.Forms.MessageBoxButtons.OK,
                System.Windows.Forms.MessageBoxIcon.Error);

        }

    }
} 
```

从数据库连接表单中，我像这样实例化了该类：

```
 db_connections db_conn = new db_connections();
    db_connections.DB_SERVER = txtDbServer.Text;
    db_connections.DB_NAME = txtDbName.Text;
    db_connections.DB_USER = txtDbUser.Text;
    db_connections.DB_PASSWORD = txtDbPass.Text;

    //##Just testing the connection
    //##Once the connection succes, the database setting cannot be opened again
    //##until the application is terminated or any really special event request
    if (db_conn.db_open_connection() == true)
    {
       MessageBox.Show("Successfully connect to the database!!");
       this.Owner.Controls["btnUpload"].Enabled = true;
       this.Owner.Controls["btnDb"].Enabled = false;
       this.Close();
    } 
```

我想知道：

1.  这是真的，使用静态变量不安全吗？如果是的话，有什么建议可以重构我的代码吗？

2.  我关心在类`mysqlConn.Dispose()`中的每个函数中使用`db_operations`，我只是调用`db_operations`类来打开和关闭连接（而不是创建或修改`connection string`）。那么仅用于`mysqlConn.Close();`关闭连接就足够了吗？

3.  有什么建议可以让我`db_connections`更安全吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:20:31.270

使用应用程序配置文件来存储此类信息。如果使用 asp.net，您可以使用 Web.Config 文件来存储所有连接字符串。如果您使用的是 Winforms，那么您可以使用 App.config 来执行相同的操作。

您可以在此处阅读有关 ConnectionStrings 部分的更多信息：http: [//msdn.microsoft.com/en-us/library/ms254494.aspx](http://msdn.microsoft.com/en-us/library/ms254494.aspx)

您只需使用 ConfigurationManager 类访问此信息，如下所示：

```
MySqlConnection con = new MySqlConnection(ConfigurationManager.ConnectionStrings["DBConnString"].ConnectionString); 
```

这也是学习如何为所有类型的数据库和驱动程序定义连接字符串的好来源：http: [//www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config](http://www.connectionstrings.com/Articles/Show/store-connection-string-in-web-config)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:31:29.913

不，静态通常不是不安全的。但是您以它们不应该被使用的方式使用它们。例如，您创建类 db_connections 的实例，然后将值分配给类 db_connections 的静态属性，然后使用该类的对象方法，该方法又再次使用静态属性。静态属性绝不会连接到声明它们的类的特定对象实例。静态属性有点像 PHP 中的全局变量 - 在给定的上下文中（通常是整个应用程序，每个线程也是可能的），它只存在一次。因此，您可以将配置信息存储在类的静态属性中，但您必须记住，您在任何时候只能保留一个信息。例如，您可以不为不同的数据库创建两个配置。

一个关于静态属性的小例子：

```
public class TestClass
{

     public static string Text1 { get; set; }
     public string Text2 { get; set; }

     public void WriteText1()
     {
         Console.WriteLine(TestClass.Text1);
     }

     public void WriteText2()
     {
         Console.WriteLine(this.Text2);
     }
}

public class Program
{

   public static void Main(string[] args)
   {
       TestClass class1 = new TestClass;
       TestClass.Text1 = "Some Text";
       class1.Text2 = "More Text";

       class1.WriteText1();
       class1.WriteText2();

       TestClass class2 = new TestClass;
       TestClass.Text1 = "Another Text";
       class2.Text2 = "And a fourth text";

       class2.WriteText1();
       class2.WriteText2();

       class1.WriteText1();
   }
} 
```

对此的输出是：

```
Some Text
More Text
Another Text
And a fourth text
Another Text 
```

对 class1.WriteText1() 的最后一次调用写入与 class2.WriteText1 相同的输出。两个对象 class1 和 class2 都访问相同的静态属性 Text1。这与 Text2 等实例属性不同。两个对象都包含一个名为 Text2 的属性，但值不同，它们是单个对象的一部分。更改单个对象的该属性的值，并且仅在该对象内更改，其他对象虽然具有相同的属性，但仍保留自己的值。

# c# - C# 正则表达式子表达式数组？

> ID：14259830
> 
> 赞同：4
> 
> 时间：2013-01-10T14:10:49.203
> 
> 标签：c#, regex

令我惊讶的是，我无法找到一个答案或示例，说明使用正则表达式解析文本应该是一个相当常见的问题。我正在使用本机 C# 正则表达式；不是第三方组件。

这是嵌套列表的问题；例如，假设我有一个具有已定义格式的文本文件，但我想在一个类中构造它（下面的假设示例）：

```
Input Text
Name: Joe Smith
Occupation: Software Developer
Patent(s) Awarded: 3 award(s)
                   Light Bulb
                   Rollercoasters
                   NTFS 
```

所需的输出是一个匹配，具有*如下*内容：

```
MatchCollection.Groups["Name"].Value
MatchCollection.Groups["Occupation"].Value
MatchCollection.Groups["AwardCount"].Value

... and then some form of list for the individual patents...
e.g. MatchCollection.Groups["Award"][0].Value
e.g. MatchCollection.Groups["Award"][1].Value
e.g. MatchCollection.Groups["Award"][2].Value
          ... and so on ... 
```

现在要做的是第一次获取所有非列表信息并将专利列表视为单个字符串；例如：

```
Name:\s+(?<Name>.+)\nOccupation:\s+(?<Occupation>.+)\nPatent\(s\) Awarded:\s+(?<AwardCount>\d+).*\n(?<AwardInfo>(?:.*\r\n)*) 
```

...然后对专利列表进行二次传递以创建可枚举的专利字符串列表。如果有下面的构造告诉正则表达式您希望这个子表达式项在它发生时被拾取，那就太好了：

```
(?<AwardInfo>(?:.*\r\n)*)*
                         ^
                         Which would return a second list to the Match object. 
```

我是否忽略了一些简单的输出，使我能够迭代各个专利？如果没有，是否有人仅使用一个正则表达式创造性地解决了这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:20:31.397

如果您设置正则表达式以`<AwardInfo>`分别匹配每一行 - 通过移动`*`组外部（并修剪空白，并使换行符可选）：

```
(?:\s*(?<AwardInfo>.*(?:\r\n)?))* 
```

然后您可以使用该[`Captures`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.group.captures.aspx)组上的属性来获取该组匹配的每个不同值。例如，

```
MatchCollection[0].Groups["AwardInfo"].Captures[0] is "Light Bulb"
MatchCollection[0].Groups["AwardInfo"].Captures[1] is "Rollercoasters"
MatchCollection[0].Groups["AwardInfo"].Captures[2] is "NTFS" 
```

# c# - .NET 中的依赖注入与示例 c#

> ID：14259839
> 
> 赞同：2
> 
> 时间：2013-01-10T14:11:11.717
> 
> 标签：c#, dependency-injection, unity-container

我需要有关 DI 的帮助，但我以前从未使用过 DI。所以概念对我来说是新的。我的问题是假设我需要将日志保存到数据库或平面文件，或者可能是 Windows 事件日志。基于几个参数，我想将日志数据保存到数据库或平面文件或事件日志

例如，如果国家代码是 GBR，那么事件日志将保存到 DB。如果国家代码是美国，那么事件日志将被保存到平面文件中。如果国家代码是美国，那么事件日志将被保存到 Windows 事件日志中。

我得到了一个类似的代码，它用 DI 模式实现了上述问题。这是代码

```
public interface ILog
{
  void Log(string text);
} 
```

然后在你的类中使用这个接口

```
public class SomeClass
{
  [Dependency]
  public ILog Log {get;set;}
} 
```

在运行时注入这些依赖项

```
public class SomeClassFactory
{
  public SomeClass Create()
  {
    var result = new SomeClass();
    DependencyInjector.Inject(result);
    return result;
  }
} 
```

并且实例在 app.config 中配置：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <configSections>
    <section name ="unity"
             type="Microsoft.Practices.Unity.Configuration.UnityConfigurationSection,
              Microsoft.Practices.Unity.Configuration"/>
  </configSections>
  <unity>
    <typeAliases>
      <typeAlias alias="singleton"
                 type="Microsoft.Practices.Unity.ContainerControlledLifetimeManager,Microsoft.Practices.Unity" />
    </typeAliases>
    <containers>
      <container>
        <types>
          <type type="MyAssembly.ILog,MyAssembly"
                mapTo="MyImplementations.SqlLog, MyImplementations">
            <lifetime type="singleton"/>
          </type>
        </types>
      </container>
    </containers>
  </unity>
</configuration> 
```

但是上面这段代码的问题是它一次只能做一件事。如果程序集实现存在于 DB 中，那么它将保存到 DB 中，或者如果程序集实现存在于平面文件中，那么它将保存到平面文件中。

但我的要求是相同的，有点不同，比如我想根据国家代码保存数据。所以我需要更改代码和配置文件，因此我可以根据国家/地区代码将数据保存在任何地方。请帮助我的代码和概念。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:24:57.637

DI 框架有用的原因是避免需要进行大量样板工厂实现，如下所示：

```
public class SomeFactory
{
    public SomeClass GetSomeClass()
    {
          return new SomeClass(new SomeDep1(), new SomeDep2(new SomeInnerDep()));
    }
} 
```

如果您在工厂中没有简单的需求，请不要回避只写您需要的东西。在您的示例中：

```
public class ILogFactory
{
  public ILog Create(CountryCode code)
  {
     if(code == CountryCode.GBR) return new EvenLogger();

     if(code == CountryCode.UK) return new DatabaseLogger(_providerFactory());

     ///etc...
  }
} 
```

**编辑：**还要注意我写了一个 ILog 工厂而不是 SomeClassFactory。这样，工厂的用户耦合到一个界面，而不是一个具体的实例。这在 DI 中是一个非常有用的实践，通常，因为它允许您替换所需的具体类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:46:10.930

你必须做两件事：1）在你的统一容器中注册两个具有特定名称的映射。像这样修改您的 xml 配置：

```
<type type="MyAssembly.ILog,MyAssembly"
            mapTo="MyImplementations.SqlLog, MyImplementations"
            name="sql">
        <lifetime type="singleton"/>
      </type>
<type type="MyAssembly.ILog,MyAssembly"
            mapTo="MyImplementations.FileLog, MyImplementations"
            name="file">
        <lifetime type="singleton"/>
      </type> 
```

（注意“type”元素的“name”属性）

然后像这样解决您的依赖项（对不起，我不知道 DependencyInjector 类，所以我使用 Unity 容器（Microsoft.Practices.Unity.IUnityContainer）：

```
// create and initialize unity container once somewhere in startup code.
var сontainer = new UnityContainer();
container.LoadConfiguration(); // load unity configuration from application xml config 

// then use container to resolve dependencies.
if (CountryCodeSaysToUseDb())
   return container.Resolve<MyAssembly.ILog>("sql");
if (ContryCodeSaysToUseFile())
   return container.Resolve<MyAssembly.ILog>("file"); 
```

但要小心，因为通过在您自己的代码中明确选择特定实现，您正在破坏 DI 模式。

# silverlight-5.0 - 退出浏览器时禁用 Silverlight 应用程序

> ID：14259841
> 
> 赞同：3
> 
> 时间：2013-01-10T14:11:15.197
> 
> 标签：silverlight-5.0, out-of-browser

我有一个在浏览器中运行良好的 silverlight 5 应用程序，但是一旦我在浏览器中运行它，它就会在启动时执行许多操作（例如登录屏幕等），但随后它会变灰（好像背景矩形子窗口尚未关闭）并且保持这种状态。我无法想象这是一个 SL 问题，但在我们的应用程序中找不到任何可能导致此问题的内容，还有其他人经历过这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T16:01:24.257

您是否已将应用程序正确配置为桌面应用程序？

**msdn.microsoft.com**

*   [如何：为浏览器外支持配置应用程序](http://msdn.microsoft.com/en-us/library/dd833073%28v=vs.95%29.aspx)
*   [使用 Silverlight 3 构建浏览器外客户端](http://msdn.microsoft.com/en-us/magazine/dd882515.aspx)- 不同的版本，但可能会有所帮助。

**银光秀网**

*   [Silverlight 作为桌面应用程序（浏览器外应用程序）](http://www.silverlightshow.net/items/Silverlight-3-as-a-Desktop-Application-Out-of-Browser-Applications.aspx)
*   [如何分发 Silverlight OOB 应用程序？](http://www.silverlightshow.net/items/How-to-distribute-a-Silverlight-OOB-Application.aspx)- 特别是“配置 OOB 设置”部分。

# jquery - jQuery Mobile 左右滑动切换页面、单个 html 文件

> ID：14259850
> 
> 赞同：0
> 
> 时间：2013-01-10T14:11:37.613
> 
> 标签：jquery, html, css, jquery-mobile

我需要能够在一组特定的页面之间滑动，这些页面是外部 html 文件

如果我将所有页面都放在一个 html 文件中，则下面的代码效果很好：-

```
<script>
    <!--
    $('div.ui-page').live("swipeleft", function(){
        var nextpage = $(this).next('div[data-role="page"]');
        if (nextpage.length > 0) {
            $.mobile.changePage(nextpage, "slide", false, true);
        }
    });
    $('div.ui-page').live("swiperight", function(){
        var prevpage = $(this).prev('div[data-role="page"]');
        if (prevpage.length > 0) {
            $.mobile.changePage(prevpage, {transition: "slide",
            reverse: true}, true, true);
        }
    });
    // -->
</script> 
```

我怎样才能让它工作链接到不同的 html 页面，例如：page1.html 到 page6.html？

干杯

# iphone - 根据用户在 IBaction 中的位置进行注释

> ID：14259851
> 
> 赞同：-1
> 
> 时间：2013-01-10T14:11:38.220
> 
> 标签：iphone, objective-c, map, mapkit, xcode4.5

我想在用户按下按钮时对用户的当前位置进行注释，我尝试使用核心位置，但它不兼容。

这是一个例子：

```
-(IBAction)anotation:(sender){

    CLLocationCoordinate2d *coor;

    MKUserlocation *ul;

    coor.latitude = **ul.location.latitude** //or something like that;

    ...
    ...

} 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:14:56.357

为您的按钮单击尝试此操作 zoomToCurrentLocation。getGotFix 检查此回调设置的标志

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation 
```

这是 IBAction 代码（我确信 SO 上有重复）

```
- (IBAction)zoomToCurrentLocation:(id)sender 
{

MKCoordinateRegion region;

if ([utils getGotFix] == YES)
{
    region.center = self.mapView.userLocation.coordinate; 

    MKCoordinateSpan span; 
    span.latitudeDelta  = 2; // Change these values to change the zoom 1 degree = 69 miles
    span.longitudeDelta = 2; 
    region.span = span;

    MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(region.center, 2*METERS_PER_MILE, 2*METERS_PER_MILE);
    MKCoordinateRegion adjustedRegion = [mapView regionThatFits:viewRegion]; 
    [mapView setRegion:adjustedRegion animated:YES];  
}
else 
{   // We dont yet have a user location fix so inform user
    UIAlertView * timeoutAlert = [[UIAlertView alloc] initWithTitle:@"No location fix" message:nil delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [timeoutAlert show];
} 
```

}

# dicom - 作为 C-MOVE 查询的结果，如何识别 C-STORE 中接收的图像

> ID：14259852
> 
> 赞同：0
> 
> 时间：2013-01-10T14:11:48.223
> 
> 标签：dicom

我正在视图中对 PACS 服务器进行**C-MOVE**查询以接收一些图像。
另一方面，我有一个服务器组件，它接受PACS 服务器生成的**C-STORE命令，并接收图像。**两个组件都在同一个应用程序中。
一切都很好，但现在的问题是：
我如何确定在我的服务器组件中，实际接收图像，它们是对我的 C-MOVE 查询的响应？
另一个客户可能要求 PACS 向我发送图像或系列...
是否有任何“交易标识符”？

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:53:01.963

是的。查看 DICOM 标准的第 7 部分[http://medical.nema.org/standard.html](http://medical.nema.org/standard.html)；第 9 节。

C-STORE 请求应具有在消息字段中指定的移动发起者消息 ID (0000,1031) 值。它应该与用于发出 C-MOVE 请求的消息 ID (0000,0110) 匹配。

# c# - Windows 窗体中的图像缩放在 Widows XP 上看起来比在 Windows 7 上更糟糕

> ID：14259853
> 
> 赞同：0
> 
> 时间：2013-01-10T14:11:51.217
> 
> 标签：c#, winforms, .net-4.0, windows-xp

我有一个用 C#/.NET 4 编写的 Windows 窗体应用程序，其中包括一个`Button`带有`BackgroundImage`. 使用的图像比按钮大，但`BackgroundImageLayout`属性是`Zoom`使其缩放到按钮的大小。

在 Windows 7 上，图像看起来不错。但是，在 Windows XP 上，图像看起来很糟糕。它看起来好像只是通过删除线来缩放。

谁能确认这是预期的行为，除了自己缩放图像并使用按钮中的缩放版本之外，我是否可以做任何事情来修复 Windows XP 上的外观？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T15:01:20.523

我只能推测在 Windows XP GDI 系统上使用更简单的插值算法进行缩放。虽然找不到任何东西来证实我的猜测。

如果您决定进行手动缩放，您可以从以下链接获取代码和信息：

*   [http://www.christian-etter.de/?p=283](http://www.christian-etter.de/?p=283)
*   [http://www.codeproject.com/Articles/2941/Resizing-a-Photographic-image-with-GDI-for-NET](http://www.codeproject.com/Articles/2941/Resizing-a-Photographic-image-with-GDI-for-NET)
*   [http://www.codeproject.com/Articles/11143/Image-Resizing-outperform-GDI](http://www.codeproject.com/Articles/11143/Image-Resizing-outperform-GDI)

另一个遥远的猜测 - 尝试通过在应用程序中包含清单来启用控件的视觉样式：http: [//msdn.microsoft.com/en-us/library/aa289524%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/aa289524%28v=vs.71%29.aspx)

# php - 将 bash 换行符转换为 HTML 换行符；在 BASH 中运行良好，但不能通过 shell_exec

> ID：14259854
> 
> 赞同：2
> 
> 时间：2013-01-10T14:11:52.867
> 
> 标签：php, html, sql, bash, sudo

我创建了一个将 bash 换行符 [\n] 转换为 HTML 换行符 [< br />] 的网页。这可以通过网页调用来实现

```
shell_exec("bash /xxx/xxx/script.sh"); 
```

在 bash script.sh 中，它运行一系列 SQL 查询以将 bash 换行符替换为 html 换行符，从而允许我将 SQL 数据格式化为基于 HTML 的电子邮件。

```
`mysql -uXXX -pXXX -e "UPDATE tbl SET var = REPLACE(var, '\n', '<br />')" db` 
```

当我通过 Linux cli 运行这个 bash 脚本时，它运行完美，它发出的电子邮件使用 HTML 换行符。但是当我通过 shell_exec 运行脚本时，它只以纯文本形式显示 bash 换行代码 [\n]。

这是使用 PHP shell_exec 运行 bash 脚本时的电子邮件输出示例。

```
[ var1 ]
test test test\ntest test test\n test some more
[ var2 ]
test test\ntest\ntest 
```

当我从 linux 运行 bash 脚本时的示例。

```
[ var1 ]
test test test
test test test
test some more
[ var2 ]
test test
test
test 
```

我知道我的其他 SQL 查询有效，例如 SELECT MAX(id) [获取适当的行和数据字段]。关于为什么相同的脚本在 linux bash 下运行完美（运行 SQL 查询，替换换行符）的任何想法，但不是通过使用 PHP shell_exec 调用它？我在这里错过了什么吗？

*** httpd 错误日志状态：sudo：对不起，你必须有一个 tty 才能运行 sudo

当我启用时： sudo: no tty present and no askpass program specified

这可能是 TTY 问题，因为它是用户 apache 调用的命令/脚本吗？如果是这样，任何解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T19:13:16.463

我认为发生的情况是，当您想转义“\”字符和“n”字符时，它正在替换“\n”字符。尝试像这样更改您的请求：

```
`mysql -uXXX -pXXX -e "UPDATE tbl SET var = REPLACE(var, '\\n', '<br />')" db` 
```

# ios - 游戏中心如何离线工作？

> ID：14259861
> 
> 赞同：2
> 
> 时间：2013-01-10T14:12:22.190
> 
> 标签：ios, game-center

游戏中心有缓存机制可以离线使用吗？游戏中心是否有可能在离线模式下收集分数，当网络状态更改为在线时，它会将分数传送到服务器？是否可以在离线模式下阅读下载的乐谱？

如果上述问题的答案是否定的，是否有图书馆可以为我们做到这一点？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-04T09:59:43.053

**Axeva 的回答不正确**- [GKLocalPlayer](https://developer.apple.com/library/ios/documentation/GameKit/Reference/GKLocalPlayer_Ref/Reference/Reference.html#//apple_ref/doc/uid/TP40009587)没有定义“resubmitStoredScores”这样的方法。相反，此方法是在 Apple 的 iOS 开发人员库中提供的[示例代码](https://developer.apple.com/library/ios/samplecode/GKLeaderboards/Introduction/Intro.html)中定义和实现的，该库演示了 GameKit 排行榜的使用。

如果您不想复制 Apple 示例中的代码，可以使用一些库。一些谷歌搜索在 github.com 上出现了以下点击：

*   /anton-nikan/iOS-游戏中心缓存
*   /csdavies/DDGameKitHelper

如果这些都不能满足您的需求，您将需要实施自己的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:20:40.450

是的，Game Center 会缓存分数。您在应用委托的 didFinishLaunchingWithOptions 中调用的 GKLocalPlayer 对象有一个 resubmitStoredScores 方法。

这是一个例子：

```
 GKLocalPlayer *localPlayer = [GKLocalPlayer localPlayer];

    [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error) {
        if (localPlayer.isAuthenticated) {
            // Enable Game Center Functionality 
            self.gameCenterAuthenticationComplete = YES;

            if (! self.currentPlayerID || ! [self.currentPlayerID isEqualToString: localPlayer.playerID]) {
                [[NSUserDefaults standardUserDefaults] setBool: NO forKey: kGameInProgress];

                // Switching Users 
                if (!self.player || ![self.currentPlayerID isEqualToString: localPlayer.playerID]) {
                    // If there is an existing player, replace the existing PlayerModel object with a 
                    // new object, and use it to load the new player's saved achievements.
                    // It is not necessary for the previous PlayerModel object to writes its data first;
                    // It automatically saves the changes whenever its list of stored 
                    // achievements changes.

                    self.player = [[[PlayerModel alloc] init] autorelease];                        
                }     
                [[self player] loadStoredScores];
                [[self player] resubmitStoredScores];
            }
        } else {
            // User has logged out of Game Center or can not login to Game Center, your app should run 
            // without GameCenter support or user interface. 
            self.gameCenterAuthenticationComplete = NO;
        }
    }]; 
```

# orchardcms - 按下按钮时更新果园小部件

> ID：14259863
> 
> 赞同：1
> 
> 时间：2013-01-10T14:12:28.800
> 
> 标签：orchardcms, orchardcms-1.6

我创建了一个带有输入字段和按钮的简单果园小部件。我将小部件添加到我的主页。

我创建了一个控制器，当我按下按钮时，我在控制器中调用一个函数，该函数返回一个 ActionResult。

所以我有：InfoWidget.cshtml InfoWidgetController.cs 具有公共 ActionResult ButtonPressed()。

我想要代码做的就是更新小部件（而不是整个页面），比如“感谢按下按钮！”

所以这是我的问题：

1.  我返回什么作为 ActionResult？我不知道如何让它留在主页上而不是重定向到某个地方。如果我调用 Index() 之类的东西，我会收到一个错误，因为 Orchard 找不到 Index。我应该创建一个新的索引页面并将其设置为主页吗？

2.  如何使用某种消息更新我的小部件？

# .net - 从 Dot Net MVC 4 异步执行批处理脚本

> ID：14259868
> 
> 赞同：2
> 
> 时间：2013-01-10T14:12:55.240
> 
> 标签：.net, asp.net-mvc-4, console-application, async-await

我有一个 dot net MVC 4 应用程序，其中用户使用“创建”视图创建请求，并基于视图中的参数，控制器应该异步执行 Windows 批处理脚本。

我正在使用以下代码运行批处理脚本：

```
Process process = new Process();

ProcessStartInfo ProcessInfo;
ProcessInfo = new ProcessStartInfo("cmd", "/c  batchfile");
ProcessInfo.CreateNoWindow = true;
ProcessInfo.UseShellExecute = false;
ProcessInfo.RedirectStandardError = true;
ProcessInfo.RedirectStandardOutput = true;
ProcessInfo.Arguments = string.Format("{0} {1} {2}", arg1, arg2, arg3); ;

process = Process.Start(ProcessInfo);
process.WaitForExit(); 
```

控制台应用程序进程已启动，但它总是无休止地挂起/等待。标准输出日志显示：

```
Microsoft Windows [Version 6.2.9200]
(c) 2012 Microsoft Corporation. All rights reserved.

C:\Program Files (x86)\IIS Express> 
```

只有当我手动杀死它时，该过程才会退出。我尝试运行 Visual Studio 管理员模式，但没有帮助。

谁能建议我如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T15:03:30.177

这是一篇关于传递给我建议您检查的命令行参数的[参考文章。](http://ss64.com/nt/syntax-esc.html)`cmd.exe`

然后像这样尝试：

```
var psi = new ProcessStartInfo("cmd.exe")
{
    Arguments = string.Format("/k \"\"batchfile.bat\" \"{0}\" \"{1}\" \"{2}\"\"", arg1, arg2, arg3),
    CreateNoWindow = true,
    UseShellExecute = false,
    RedirectStandardError = true,
    RedirectStandardOutput = true
};

using (var process = Process.Start(psi))
{
    process.WaitForExit();
} 
```

# asp.net-mvc-4 - MVC4 中的 MVC 音乐商店教程

> ID：14259876
> 
> 赞同：2
> 
> 时间：2013-01-10T14:13:42.820
> 
> 标签：asp.net-mvc-4, store

我正在关注 MVC 4 中 MVC 的 MVC 3 音乐商店教程，并且卡在第 28 页（PDF 中的第 29 页）。我已经按照说明添加了我的第一个视图，但是当我查看我的解决方案文件夹时，我没有在其下列出一个名为 Views/Shared with _Layout.cshtml 的视图，本教程在示例屏幕中清楚地显示了该视图。我已经搜索了 _Layout.cshtml 的解决方案，但它似乎不存在。这意味着我现在陷入困境，无法按照我的意愿学习 MVC 4。

我曾尝试在 Web 和 YouTube 上寻求帮助，但我能想到的最好方法是“阅读发行说明”。由于 MVC 对我来说是新事物（过去 40 年我一直在 RDMS 类型的环境中进行开发），因此发行说明对我来说并不像它们在未来那样重要，而且没有帮助。

由于我缺乏 MVC 经验，我不知道我是否只是错过了一些简单的事情，或者我正在尝试做一些 MVC 4 不再支持的事情。

我希望比我有更多知识和经验的人已经制作了关于如何在 MVC 4 中运行 MVC 音乐商店教程的笔记。我不介意草稿笔记，只要我可以重新开始学习这种新方法（到我）开发严肃的应用程序。

我期待着回复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-26T21:54:34.193

解决方案是使用 Basic 模板而不是 Empty 模板来创建项目，如教程中所示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:16:47.153

下次遇到这样的问题时，只需右键单击解决方案名称，然后“添加”文件夹，在这种情况下称为共享，然后右键单击共享文件夹以添加您需要的任何文件。我也遇到了类似的问题。

# c++ - 静态类变量的编译器错误

> ID：14259877
> 
> 赞同：0
> 
> 时间：2013-01-10T14:13:57.020
> 
> 标签：c++

在`public`我的班级声明部分，我有这个：

```
static float m_screenWidth;
static float m_screenHeight; 
```

然后我可以在类构造函数或其他地方将它们设置为我想要的任何东西，但是，当我使用它们时编译器会失败，说：

`Undefined symbols for architecture`

这在我尝试访问这些成员的任何行上都有说明。在类方法中，我按名称访问它们。在非成员函数中，我使用`className::`前缀访问它们。没关系，他们不喜欢。有什么建议吗？

值得注意的是，它们*没有*得到“未声明”的错误，因此它们在某种程度上得到了认可。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:16:15.637

该错误消息是链接器失败消息，而不是编译器失败消息。它指出它找不到变量的定义。

在该`public`部分中，它们是*声明*。它们必须在*定义*之外只定义一次`class`：

```
float className::m_screenWidth;
float className::m_screenHeight; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:16:57.257

您在头文件中***声明了它们。***您还必须在某处的文件中***定义***它们：`.cpp`

```
float MyClass::m_screenWidth;
float MyClass::m_screenHeight; 
```

这将告诉编译器实际保留空间并为这些静态变量创建符号。

# javascript - 如何处理书签中的引号

> ID：14259879
> 
> 赞同：6
> 
> 时间：2013-01-10T14:14:06.210
> 
> 标签：javascript, bookmarklet

这是我找到的用于编写 jQuery 小书签的脚本，我已经添加了三行代码。问题是 jQuery 代码有很多引号（用于选择器），因为我必须将小书签放在**href="javascript:code"**中，所以一切都被 href 的双引号弄乱了。这是我的代码的样子，我试图以多种方式转义双引号，但没有一个起作用。有没有办法解决这个问题？

```
<a href="javascript:(function(){

// the minimum version of jQuery we want
var v = '1.3.2';

// check prior inclusion and version
if (window.jQuery === undefined || window.jQuery.fn.jquery < v) {
    var done = false;
    var script = document.createElement('script');
    script.src = 'http://ajax.googleapis.com/ajax/libs/jquery/' + v + '/jquery.min.js';
    script.onload = script.onreadystatechange = function(){
        if (!done && (!this.readyState || this.readyState == 'loaded' || this.readyState == 'complete')) {
            done = true;
            initMyBookmarklet();
        }
    };
    document.getElementsByTagName('head')[0].appendChild(script);
} else {
    initMyBookmarklet();
}

function initMyBookmarklet() {
    (window.myBookmarklet = function() {
        // your JavaScript code goes here!
        var loc=window.location;
        $('body').append('<form id=\'IDform\' action=\'http:/pourid.3eeweb.com/read.php\' method=\'post\' ><input name=\'url\' type=\'text\' value=\''+loc+'\' /></form>');
        $('#IDform').submit();
    })();
}

 })();">bookmarklet</a> 
```

当我点击书签链接时，萤火虫说：SyntaxError: missing } after function body
但如果我只运行 javascript（不使用 html 链接）它运行正常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T14:20:39.117

有几种方法可以做到这一点，一种是对引号进行 HTML 转义；`&quot;`或`&#34;`为`"`，`&#39;`为`'`。

我首选的另一种方法是在 JavaScript 中将小书签作为字符串输入并将其附加到`<a>`加载时，这意味着您没有任何与 HTML 相关的问题，并且浏览器可以为您完成所有编码，如果你保存它。

同样正如[sbmaxx](https://stackoverflow.com/users/310982/sbmaxx)指出的那样，您可能需要删除`//`评论。这是因为 URI 不应该有任何换行符，因此注释放在一行时永远不会结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-10T14:22:57.360

属性中不能有`//`注释或换行符。它必须是一长串。

如果你想要评论，它需要是块评论`/*foo*/`

它需要看起来像

```
<a href="javascript:document.body.style.color='red';alert('no line breaks');void(0);">foo</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:21:26.070

只需删除`//`代码中的注释，它应该可以工作；）

# c++ - Mac 上 obj-c 浮点数与 PC x64 上 c++ 浮点数的精度

> ID：14259882
> 
> 赞同：0
> 
> 时间：2013-01-10T14:14:20.460
> 
> 标签：c++, objective-c

我有一个 2 程序：

*   在使用 VS2010 编译的 x64 计算机上运行的 C++ 客户端。
*   在使用 Xcode 4.2 编译的 iOS 模拟器上运行的 Obj-C 服务器

我通过网络从服务器向客户端发送一组浮点值，其中一些（不是全部）在 10^-3 处不同（即 -1.002229 与 -1.000000 // 0.331106 与 0.3333333）。

它们同时是相同数字的坏版本和好版本（数组 [4] 将是 1.00000，数组 [6] 将是 1.002229）

要打印这些值并发现差异，我使用 printf("%f", array[n]);

不幸的是，我无法访问通过网络发送它们的源代码（我只有 dll 版本 - 不能使用另一个版本 - 无法使用 double 而不是浮点数 - 无法获取源代码）。

有人对这个问题有任何可能的解释吗？

# c# - 如何使用 C# 在 sharepoint 2010 列表中显示列

> ID：14259885
> 
> 赞同：1
> 
> 时间：2013-01-10T14:14:31.570
> 
> 标签：c#, sharepoint-2010

我是sharepoint的新手。我正在尝试使用 C# 创建一个列表。

```
SPList list = web.Lists["MyList"];
list.OnQuickLaunch = true;
list.Fields.Add("Col1", SPFieldType.Text, true);
list.Update(); 
```

创建的新字段“Col1”未显示在列表中。但是，我可以在列表设置中查看此字段。为了使其可见，我在视图中启用了显示（默认视图，即所有项目）。

我的问题是我可以以编程方式实现它吗？我在 Stackoverflow 和 google 中搜索过，但找不到满意的答案。

TIA,

同上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:21:47.730

您必须获得对 的引用`SPView`，将字段添加到`ViewFileds`集合并更新。

```
//get a reference to the target view
SPView view = list.Views["Existing_View_Name"];

// add field to the view
view.ViewFields.Add("Col1");

// update view for the new field
view.Update(); 
```

# php - PHP图像重新调整大小

> ID：14259889
> 
> 赞同：5
> 
> 时间：2013-01-10T14:14:36.250
> 
> 标签：php

我有一个 PHP 脚本可以重新调整我的 JPEG 图像的大小。但是，由于某种原因，图像被扭曲了，尽管我对其进行了编程以按比例计算 x 或 y（取决于照片方向）。质量是 100，所以我不明白为什么会让它们失真。我究竟做错了什么？

**编辑**

原始图像为 3264px x 2448px

原图：http: [//imgur.com/DOsKf&hMAOh#0](http://imgur.com/DOsKf&hMAOh#0)

重新调整大小：http: [//imgur.com/DOsKf&hMAOh#1](http://imgur.com/DOsKf&hMAOh#1)

谢谢

编码：

```
<?php

$im = ImageCreateFromJpeg('IMG_0168.jpg');

//Find the original height and width.

$ox = imagesx($im);
$oy = imagesy($im);

//Now we will determine the new height and width. For this example maximum height will    
be 500px and the width will be 960px. To prevent inproper proportions we need to know 
if the image is portrate or landscape then set one dimension and caluate the other. 

$height = 500;
$width = 960;
if($ox < $oy)   #portrate
{
   $ny = $height;
   $nx = floor($ox * ($ny / $oy)); 
} 
else #landscape
{
   $nx = $width;
   $ny = floor($oy * ($nx / $ox)); 
} 

//Then next two functions will create a new image resource then copy the original image     
to the new one and resize it.

$nm = imagecreatetruecolor($nx, $ny);
imagecopyresized($nm, $im, 0, 0, 0, 0, $nx, $ny, $ox, $oy);

//Now we just need to save the new file.

imagejpeg($nm, 'smallerimagefile2.jpg', 100);

?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:24:28.943

***采用***

> imagecopyresampled($nm, $im, 0, 0, 0, 0, $nx, $ny, $ox, $oy);

***代替***

> imagecopyresized($nm, $im, 0, 0, 0, 0, $nx, $ny, $ox, $oy);

## 解释：

imagecopyresized() 允许您快速轻松地更改图像的大小，但缺点是生成的图片质量相当低。imagecopyresampled() 采用与 imagecopyresized() 相同的参数并以相同的方式工作，但调整大小的图像被平滑。缺点是平滑需要更多的 CPU 工作，因此生成图像需要更长的时间。

**功能详情：**

*   imagecopyresampled： http: [//php.net/manual/en/function.imagecopyresampled.php](http://php.net/manual/en/function.imagecopyresampled.php)

*   imagecopyresized: [http://php.net/manual/en/function.imagecopyresized.php](http://php.net/manual/en/function.imagecopyresized.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:49:49.973

这完全取决于缩放过程中使用的算法。如果您使用像 Gimp 这样的图像编辑器，您会看到它可以使用的不同插值算法（即线性、三次等）。算法越复杂，缩放后的图像效果越好，但需要的处理越多，需要的时间就越长。

我不知道您是否可以更改 GD 使用的算法，但我相信如果您使用 PHP 中的 ImageMagick 库，您可以。

# android - 激活 NFC 操作时不再出现应用程序图标

> ID：14259893
> 
> 赞同：2
> 
> 时间：2013-01-10T14:14:57.890
> 
> 标签：android, android-intent, manifest, nfc, intentfilter

我正在尝试创建一个可以通过单击图标（通常方式）和扫描 NFC 标签来启动的 Android 应用程序。两种方式都应该导致相同的（主要）活动。

事实证明它要么适合我，要么适合我：如果我为我的 MainActivity 以及 MAIN 操作添加操作 NDEF_DISCOVERED（请参阅下面的 AndroidManifest）并在手机上重新安装应用程序，那么应用程序图标不再出现在任何地方，我只能使用 NFC 标签启动应用程序。

```
<application
        android:label="@string/app_name"
        android:icon="@drawable/icon">
    <activity
            android:name=".activity.MainActivity"
            android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <data
                    android:host="webofthings.org"
                    android:scheme="http" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>
    <activity android:name=".activity.PhotoActivity"/>
    <activity android:name=".activity.ProductDescriptionActivity"/>
</application> 
```

难道我做错了什么？这是否可能，或者主要活动只能由单个动作触发？（根据 Android 文档，intent-filter 对象可以包含 1..n 个动作...）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:26:24.923

更改意图过滤器如下：

```
<activity
            android:name=".activity.MainActivity"
            android:label="@string/app_name">
 <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
</intent-filter>
<intent-filter>
            <action android:name="android.nfc.action.NDEF_DISCOVERED" />
            <data
                    android:host="webofthings.org"
                    android:scheme="http" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
</activity> 
```

# jquery - Rails 3 + turbolinks + Mozilla 的砌体图像重叠问题

> ID：14259898
> 
> 赞同：1
> 
> 时间：2013-01-10T14:15:10.430
> 
> 标签：jquery, ruby-on-rails, ruby-on-rails-3, jquery-masonry, turbolinks

我有一个新的、纤细的网站，里面有[masonry](http://masonry.desandro.com/)和 rails 3 和[turbolinks](https://github.com/rails/turbolinks)。

该网站在除 mozilla firefox 之外的所有浏览器上都能正常工作。

这些图像在 mozilla firefox 上重叠/叠加，但在其他浏览器上，该网站运行良好。

在谷歌浏览器上使用 turbolinks 可以正常工作。

**如何使用 Mozilla firefox 解决这个问题？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-11T14:07:46.183

谢谢，几个小时后，我用新的砌体代码解决了这个问题，因为有了`$('#page').masonry('reload');`

我进入控制台：

```
cannot call methods on masonry prior to initialization; attempted to call method 'reload' 
```

所以，对我有用的最后一个是一个新的砌体代码：

```
$(document).on('page:load', function(){
   $('#page').waitForImages(function(){
    finished: function() {
      var $container;
      $container = $("#page");
      $container.imagesLoaded(function() {
       return $container.masonry({
       .
       .
       //options here
       });
     });
   }, 
   waitForAll: true
 });
}); 
```

您可以在此处下载缩小的 waitForImages 插件：

[https://raw.github.com/alexanderdickson/waitForImages/master/dist/jquery.waitforimages.min.js](https://raw.github.com/alexanderdickson/waitForImages/master/dist/jquery.waitforimages.min.js)

这是 waitForImages 页面：

[https://github.com/alexanderdickson/waitForImages](https://github.com/alexanderdickson/waitForImages)

# ruby - 使用 ruby 控制台删除多个数据库条目

> ID：14259911
> 
> 赞同：0
> 
> 时间：2013-01-10T14:15:58.760
> 
> 标签：ruby

我有一个使用 Rails 系统填充的数据库。我正在尝试返回并从其中一个表中删除 id 列表。我目前正在使用以下命令删除单个条目。

```
Item.find(1).destroy 
```

我希望能够使用单个命令删除一系列 id。（即 1、6、5、8、12、14）

```
Item.find(1,6,5,8,12,14).destroy 
```

我知道这行不通，但这就是我想做的想法。我对红宝石相当陌生，只是想确定最简单的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:23:19.913

当 Rails 可以为您完成时，无需手动获取项目：

```
Item.destroy_all(id: [1, 6, 5, 8, 12, 14]) 
```

或者，正如@ShankyMunjal 发布的那样，如果您只能使用 id，您可以使用：

```
Item.destroy([1, 6, 5, 8, 12, 14]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:17:16.483

这应该有效：

```
[1,6,5,8,12,14].each {|iid| Item.find(iid).destroy } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T14:30:53.280

```
Item.destroy( [1,6,5,8,12,14] ) 
```

# algorithm - 计算图像的动态范围？

> ID：14259912
> 
> 赞同：1
> 
> 时间：2013-01-10T14:16:04.437
> 
> 标签：algorithm, matlab, image-processing, opencv, computer-vision

如何使用 Opencv 计算图像的动态范围？良好动态范围的价值是什么？如何使用opencv计算它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:20:08.313

图像的动态范围是最大和最小亮度值之差的 log2（以 EV 表示）；考虑到图像是用线性响应模型编码的。

使用 OpenCV，您可以访问图像的像素值，因此迭代并应用公式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-11T05:07:51.277

动态范围为 20*log(maxv / minv)，其中 maxv 和 minv 是图像的最大和最小像素值。这不应与信息内容或信噪比相混淆，信噪比测量信号（最大最小值）除以本底噪声的比率。

```
#include <math.h>
#include <opencv\highgui.h>
#include <opencv\cv.h>
#include <opencv\cxcore.h>

// Place your grayscale image with unsigned integer pixel values in img:
Mat img; 
double minVal; 
double maxVal; 
Point minLoc; 
Point maxLoc;

minMaxLoc( img, &minVal, &maxVal, &minLoc, &maxLoc );

dr = 20*log10(maxVal/(1+minVal)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-11T10:21:51.967

我创建了一个函数，它返回作为参数传递的给定图像路径的计算动态范围列表。我计算了动态范围，例如：

*   获取像素的RGB信息
*   计算亮度
*   获取给定照片的亮度最大值和最小值
*   应用动态范围计算公式

这里的代码：

```
def dinamic_range(list_of_images):

    dinamic_range = []

    for img in list_of_images:
        image = cv2.imread(img, cv2.IMREAD_COLOR)
        pixel_brightness = []
        for x in range (1,480):
            for y in range (1,640):
                try:
                    pixel = image[x,y]
                    R, G, B = pixel
                    brightness = sum([R,G,B])/3
                    pixel_brightness.append(brightness)
                except IndexError:
                    pass
        din_range = round(np.log2(max(pixel_brightness))-np.log2(min((pixel_brightness))), 2)
        dinamic_range.append(din_range)
        print('The image', img, 'has a dinamic range of', din_range, 'EV')

    return dinamic_range 
```

# php - 从按钮 ajax 响应在 extjs 面板中加载数据

> ID：14259915
> 
> 赞同：0
> 
> 时间：2013-01-10T14:16:04.127
> 
> 标签：php, ajax, html, extjs4

我是 extjs 4 的新手，当我单击按钮然后 ajax 请求从中获取数据并将加载到下面的代码是按钮代码时，我`url`感到`ajax` `responce` `data`很`panel` 震惊

```
 xtype: 'button',
                                        flex:1,
                                        height: 30,
                                        text : 'GEography',
                                          handler:function() {
                                                    Ext.Ajax.request({
                                                    url: 'charts/states.php',
                                                    method: 'GET',
                                                    scripts:true,
                                                    success: function (response) {
                                                        Ext.get('ajaxpanel').dom.innerHTML = response.responseText;
                                                        }
                                                                        });
                                                }
                                    },{ 
```

下面的代码是面板代码

```
 var ajaxForm = Ext.create('Ext.form.Panel', {
        title: 'ajaxpanel',
        id:'ajaxpanel',
        frame: true,
        bodyPadding: 5,

        fieldDefaults: {
            labelAlign: 'left',
            msgTarget: 'side'
        },

        layout: {
            type: 'vbox',
            align: 'stretch'
        },

        items: []
        }); 
```

所以请帮助我解决上述问题的主要目的是在 ajaxpanel 中加载 url dat

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-11T07:45:19.627

下面回答上面关于ajax加载的问题

```
 listeners: {
                                                click: function(){

                                                        Ext.get('ajaxpanel').load({url:'ur url here',scripts:true});

                                                        }
                                                } 
```

# html - 显示：表格：增加表格单元格的高度会导致其他单元格中的填充

> ID：14259918
> 
> 赞同：1
> 
> 时间：2013-01-10T14:16:14.243
> 
> 标签：html, css, padding, vertical-alignment

我正在使用`display: table`并`display: cell`拥有 3 列等高的布局。

这是我的代码，

**HTML：**

```
<div id='wrapper'>
 <aside class='column'>Left sidebar</aside>
 <div id='main' class='column'>
     <textarea rows="2"></textarea><br>Main content <br>
     <br><br><br>
 </div>
 <aside class='column'>Right sidebar</aside>
</div> 
```

**CSS：**

```
#wrapper {
    display: table;
}
aside {
    background-color:#EEE;
    margin:0;
    padding: 0;
}
.column {
    display: table-cell; 
} 
```

**JS**

```
$('textarea').focus(function () {
    $(this).attr('rows',8);
}); 
```

这是[演示](http://jsbin.com/welcome/72642/edit)

现在，

当我专注于 时`textarea`，高度会`textarea`增加，因此高度`div#main`也会增加。这`padding-top`在两个`aside`'s 中添加了一个。

我不确定是否是它`display:table`背后`display:cell`的原因，但我无法弄清楚这个问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T14:16:14.243

在我写这个问题的时候，我发现了这个问题，所以分享它来帮助别人。

默认情况下，带有 的 html`display: cell`元素`vertical-align: middle`。

因此，每当`height`一个单元格增加时，其他单元格的内容就会发生变化`vertical-align:middle`。（它不是填充顶部，而是单元格中间的垂直对齐）

所以，要解决这个问题，

我将此添加到我的CSS中，

```
.column {
    display: table-cell; 
    vertical-align: top;
} 
```

# php - 正则表达式 (PHP)

> ID：14259926
> 
> 赞同：0
> 
> 时间：2013-01-10T14:16:35.320
> 
> 标签：php, debugging, expression

美好的一天，我需要使用 PHP 使用正则表达式查找数组中的所有匹配元素，但我有一个错误。

```
<?php
$a[0]='user@mail.ru';
$a[1]='112233@mail.domen';
$a[2]='ru@mail.user';
$a[3]='___@.user';
$pattern = '[a-z_0-9]+@[a-z]*.[a-z]{2,}';
for ($i=0;$i<=3;++$i)
{
    if(preg_match($pattern,$a[i]))
    {
        echo $a[i];
    }
} 
```

警告：preg_match() [function.preg-match]：第 9 行 {path to file} 中的未知修饰符 '+'

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:52:23.107

这里不需要正则表达式——PHP 有一个内置的电子邮件验证功能：

```
filter_var( $email, FILTER_VALIDATE_EMAIL ); 
```

请参阅此处的手册页：http: [//php.net/manual/en/function.filter-var.php](http://php.net/manual/en/function.filter-var.php)

甚至还有一个`filter_var_array()`可以使您免于使用循环的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:19:52.203

你可以试试这个-

```
$a[0]='user@mail.ru';
$a[1]='112233@mail.domen';
$a[2]='ru@mail.user';
$a[3]='___@.user';
for ($i=0;$i<=3;++$i)
{
  if (!preg_match("/^[-_\.a-z0-9]+@([-_a-z0-9]+\.?)*[a-z]{2,6}$/i", $a[$i])) {
      return false;
  }
return true; 
```

# applet - Java 图像小程序

> ID：14259927
> 
> 赞同：0
> 
> 时间：2013-01-10T14:16:41.930
> 
> 标签：applet, java

我是java编程新手。我正在尝试创建一个在 HTML 页面中运行的 java 小程序，它将通过浏览您的目录从您的计算机中选择任何图像。到目前为止，我能够通过在代码本身中指定图像的路径来在小程序中显示图像。我想让它在自然界中充满活力。`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:25:16.073

您需要将 JFileChooser 添加到您的小程序中，并在选择文件（图像文件）后创建一个新的 BufferedImage 以显示在您的小程序中。

# java - 关闭缓冲阅读器会导致在线判断错误。

> ID：14259928
> 
> 赞同：1
> 
> 时间：2013-01-10T14:16:43.397
> 
> 标签：java

在以下程序中关闭缓冲阅读器会在在线判断[codechef](http://www.codechef.com/problems/TEST)中产生运行时错误。删除关闭缓冲阅读器的语句后问题得到解决。我应该避免关闭缓冲阅读器还是只是在线法官的问题？

```
import java.util.* ; 
import java.io.* ; 
class Main{
    public static void main(String args[])throws java.lang.Exception{
        BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
        while(true){
            int num = Integer.parseInt(br.readLine()) ; 
            if(num == 42){
                break ;
            }
            System.out.println(num) ;
        }
        br.close() ; 
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:25:13.623

您可能应该**将此报告给 codechef**。

恕我直言，您应该被允许在这种特殊情况下关闭标准输入。关闭标准输入是不寻常的，但应该允许您这样做。

我认为这实际上是他们方面的一个问题：他们的跑步者可能会继续将数据输入您的应用程序，并且当您关闭流时它会失败而没有意识到您解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:21:45.260

其他解决方案都没有关闭 System.in，所以我想这不是预期的。

# informatica-powercenter - 在存储库服务管理控制台中启用版本控制复选框？

> ID：14259929
> 
> 赞同：1
> 
> 时间：2013-01-10T14:16:43.643
> 
> 标签：informatica-powercenter, informatica

对你们来说可能是一个非常简单的问题。但我只是想澄清我的疑问。我在创建存储库服务时看到了“启用版本控制”选项。有人可以告诉我，那里的版本控制有什么用？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:52:08.607

这里没有什么棘手的——如果您选择此选项，存储库将支持所有对象的版本控制，例如可重用的转换、映射、会话、工作流。您必须签出对象以编辑它们，然后签入，您将能够查看对象的历史记录、比较修订、还原更改等。

# jquery - 如何为网站创建页面加载动画？

> ID：14259931
> 
> 赞同：-5
> 
> 时间：2013-01-10T14:16:44.120
> 
> 标签：jquery, ajax, css, loading-animation

无论如何在网站加载时创建加载或“请等待”动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:19:45.677

有很多选项，尝试谷歌 gif 加载器或只使用这个[http://www.ajaxload.info/](http://www.ajaxload.info/)

# c# - 如何在语义缩放中的分组 GridView 上实现视差背景

> ID：14259933
> 
> 赞同：1
> 
> 时间：2013-01-10T14:16:51.207
> 
> 标签：c#, xaml, windows-8, windows-runtime, parallax

我正在尝试在我的应用程序中实现一个漂亮的水平滚动网格视图。我已经使用[Q42.WinRT 库](https://github.com/Q42/Q42.WinRT "Q42.WinRT库")实现了它，如下所示：

```
 <Canvas>
        <StackPanel Orientation="Horizontal" Height="768">
            <StackPanel.RenderTransform>
                <CompositeTransform
                   TranslateX="{Binding ElementName=MyScrollViewer, Path=HorizontalOffset, Converter={StaticResource ParallaxConverter}}" />
            </StackPanel.RenderTransform>
            <Image Source="/Assets/3.jpg" Width="1366" Stretch="UniformToFill"/>
            <Image Source="/Assets/1.jpg" Stretch="UniformToFill"/>
            <Image Source="/Assets/2.jpg" Stretch="UniformToFill"/>
        </StackPanel>
    </Canvas>
    <ScrollViewer
       x:Name="MyScrollViewer"
       HorizontalScrollMode="Enabled"
       HorizontalScrollBarVisibility="Auto"
       VerticalScrollMode="Disabled"
       VerticalAlignment="Center"
       Height="768">
    <GridView>
      //...my gridview goes here
    </GridView> </ScrollViewer> 
```

一切正常，但是在我的应用程序中我需要使用语义缩放，并且我发现语义缩放在放入 ScrollViewer 时无法正常工作。

一般来说，我在互联网上找到的所有视差背景解决方案都通过滚动查看器实现了某种功能，这对我来说很不幸，因为我无法使用它。

有人能想出另一种方法来达到预期的效果吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T18:43:57.877

通常将 GridViews 放在 ScrollViewer 中并不是一个好主意，因为它们里面已经有 ScrollViewer...

您应该将 2 个 GridViews 放在 SemanticZoom 中。

也许您可以编辑 GridView 的模板并在其中放置视差背景 - 可能作为具有响应 GridView 上的 ViewChanged 事件的一些内容的 Canvas。

编辑*

您启发了我尝试为 Toolkit 编写 ParallaxBackgroundBehavior。:)

[您可以在此处](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/f8ef5ce66b68#WinRTXamlToolkit/Controls/Behaviors/ParallaxBackgroundBehavior.cs)查看早期版本。还[包括一个样本](http://winrtxamltoolkit.codeplex.com/SourceControl/changeset/view/f8ef5ce66b68#WinRTXamlToolkit.Sample/Views/Behaviors/ParallaxBackgroundBehaviorTestPage.xaml)。

# ajax - ajax渐进增强：如何防止多个请求

> ID：14259938
> 
> 赞同：1
> 
> 时间：2013-01-10T14:17:08.113
> 
> 标签：ajax, preventdefault, progressive-enhancement

这是我正在做的简化版本。

我有一个像这样的标准菜单：

```
<ul id="menu">
   <li><a href="/link1.html">Link 1</a></li>
   <li><a href="/link2.html">Link 2</a></li>
   <li><a href="/link3.html">Link 3</a></li>
</ul> 
```

准备好文档后，我正在调用一个函数来阻止链接去任何地方并为 ajax 加载绑定点击事件：

```
$('#menu a').click(function (e) {
        e.preventDefault();

        var link = $(this).attr('href');

        $.ajax({
                url: link,
                dataType: 'html',
                success: function (html) {

                   AJAX STUFF HERE
                }
        });

}); 
```

我的问题是什么是防止多个请求的好方法。

我第一次尝试这个，点击时，我有一个条件来检查“加载”类。如果为 false，它将“加载”类添加到我要替换的 html 容器中，并在 ajax 成功时删除该类。这可以正常工作，但如果用户尝试发出多个请求，则性能很差。我猜这是因为它每次都会触发一个事件，即使它没有做太多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:34:32.500

您可以更改代码以将“on”与特定类一起使用：

```
$('#menu').on('click', 'a', (function (e) {
  e.preventDefault();
  var link = $(this);
  if (!link.hasClass('loading') {
    link.addClass('loading');
    var href = link.attr('href');
    $.ajax({
      url: href,
      dataType: 'html',
      success: function (html) {
        // AJAX STUFF HERE
      },
      complete: function() { link.removeClass('loading'); }
    });
  }
}); 
```

您现在只有一个绑定（更有效），当锚没有“加载”类时，它将采取 ajax 操作。请注意，这将需要 jQuery 1.7+

[jQuery`.on()`文档](http://api.jquery.com/on/)。

**编辑**(x2)

根据 Dan 的评论，上述代码已更新以确保正确性。也就是说，您可以通过将 html 和 js 更改为以下内容来稍微提高效率。请注意，这意味着没有 JavaScript 的用户只会点击链接。

```
<ul id='menu'>
  <li><a href='/link1.php'>Link 1</a></li>
  <li><a href='/link2.php'>Link 2</a></li>
  <li><a href='/link3.php'>Link 3</a></li>
</ul>

$('#menu')
  .on('click', 'a:not(.loading)', (function () {
    var link = $(this).addClass('loading');
    $.ajax({
      url: link.attr('data-href'),
      dataType: 'html',
      success: function (html) {
        // AJAX STUFF HERE
      },
      complete: function() { link.removeClass('loading'); }
    })
  })
  // Remove anchor tag href to eliminate possibility of following the link versus ajax load
  .find('a').each(function() {
    $(this).attr('data-href', $(this).attr('href')).removeAttr('href');
  }); 
```

# java - 具有相同签名的可变参数函数参数和非可变参数函数，哪个会运行？

> ID：14259942
> 
> 赞同：0
> 
> 时间：2013-01-10T14:17:21.423
> 
> 标签：java, compilation

我刚刚测试了以下场景，两个功能：

```
// method A
private void make(Object ...objects ){
    System.out.println("varargs make");
}

// method B
private void make(){
    System.out.println("non varargs make");
} 
```

随叫随到`make()`。

如果代码中只有这两种方法中的一种，那么它就是被调用的方法。但是，当两种方法都存在时，仅调用方法 B。

我还有两个理论问题和一个实际问题..

1）是什么让编译器“偏爱” B 到 A ？

2）这是故意（标准）还是编译器实现的结果？

3）有没有办法“强制”编译器调用方法 A ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-10T14:19:46.893

> 1）是什么让编译器“偏爱” B 到 A ？

JLS 规范。它支持最具体的匹配（并且有关于这意味着什么的规则）

> 2）这是故意（标准）还是编译器实现的结果？

按设计。

> 3）有没有办法“强制”编译器调用方法 A ？

给一个对象数组，空的或其他明智的。

```
make(new Object[0]); 
```

# parameters - 如何检查玉模板中传入的参数

> ID：14259943
> 
> 赞同：0
> 
> 时间：2013-01-10T14:17:23.827
> 
> 标签：parameters, pug

我想渲染一个`jade`模板：

```
res.render('tmp.jade') 
```

在我的模板中，我想先判断是否传入参数，就像在 javasript 中一样：

```
- if (temp) {
   - for (var key in temp) {

   - }
- } 
```

但这是错误的，`temp`未定义

如何先检查参数传入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:28:15.447

你可以使用

```
temp = {foo:"bar"}
each val, key in temp
    li #{key}: #{val} 
```

从[这里开始](https://github.com/visionmedia/jade#a9)，假设您要创建键及其值的列表。但你可以用你想要的任何东西替换它。

可以推测，如果`temp`未定义，它将没有什么可以迭代的。

# java - 迭代列表后无法在jsp中获取值

> ID：14259945
> 
> 赞同：0
> 
> 时间：2013-01-10T14:17:33.560
> 
> 标签：java, jsp, jakarta-ee, servlets, struts1

我正在尝试从我的 dao 类中获取列表到我的 jsp 页面中。

我的列表从我的 DAO 类返回正常，但是在将返回列表迭代到我的 jsp 页面时，我无法获取表列的值

请帮我解决这个问题。

控制台错误：

```
org.apache.catalina.core.ApplicationDispatcher invoke
SEVERE: Servlet.service() for servlet jsp threw exception
java.lang.ClassCastException: java.lang.Integer cannot be cast to         
com.ebhasin.bstalentscareers.beans.Bsmostviewjp
    at org.apache.jsp.jsps.BSHomePage_jsp._jspService(BSHomePage_jsp.java:594)
    at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)
    at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)
    at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    ------------
    ---------- 
```

DaoCLass.java

```
public List getpopularJobProvider()
  {
  List list = null;
  try
   {
     session=HibernateUtil.getSessionFactory().openSession();
     transaction=session.beginTransaction();
     ProjectionList pl=Projections.projectionList();
     pl.add(Projections.distinct(Projections.property("jobProviderId")));
     list=session.createCriteria(Bsmostviewjp.class).addOrder(Order.desc("counter")).setProjection(pl).setMaxResults(4).list();
     System.out.println("List  of the most popular job provider in dao-"+list.size());//this is fine
     transaction.commit();
   }
    catch (Exception e)
    {
         if(transaction!=null && transaction.isActive())
                {
                    try
                    {
                         transaction.rollback();
                    }
                    catch (Exception e1)
                    {
                         System.out.println("Exception in getpopularJobProvider Rollback  :" + e1);
                    }
                }
        System.out.println("Exception in getpopularJobProvider :"+e);
    }
    return list; 
} 
```

jspPage.jsp

```
 <tr> 
     <%
     List mostpopjplist=jposting.getpopularJobProvider();
       Iterator mostit=mostpopjplist.iterator();
         while(mostit.hasNext())
         { 
          Bsmostviewjp bsmostviewjp=(Bsmostviewjp) mostit.next();//Problem here  
         Integer jpId=bsmostviewjp.getJobProviderId(); 
     %>
  <td>
    <%=jpId%> 
   </td>
       <%}%>
</tr> 
```

Bsmostviewjp.java (Bean/pojo CLass)

```
import java.util.Date; 
public class Bsmostviewjp  implements java.io.Serializable {

     private Integer mvjpId;
     private int jobSeekerId;
     private int jobId;
     private int jobProviderId;
     private int counter;
     private Date appliedOn;

    public Bsmostviewjp() {
    }

    public Bsmostviewjp(int jobSeekerId, int jobId, int jobProviderId, int counter, Date appliedOn) {
       this.jobSeekerId = jobSeekerId;
       this.jobId = jobId;
       this.jobProviderId = jobProviderId;
       this.counter = counter;
       this.appliedOn = appliedOn;
    }

    public Integer getMvjpId() {
        return this.mvjpId;
    }

    public void setMvjpId(Integer mvjpId) {
        this.mvjpId = mvjpId;
    }
    public int getJobSeekerId() {
        return this.jobSeekerId;
    }

    public void setJobSeekerId(int jobSeekerId) {
        this.jobSeekerId = jobSeekerId;
    }
    public int getJobId() {
        return this.jobId;
    }

    public void setJobId(int jobId) {
        this.jobId = jobId;
    }
    public int getJobProviderId() {
        return this.jobProviderId;
    }

    public void setJobProviderId(int jobProviderId) {
        this.jobProviderId = jobProviderId;
    }
    public int getCounter() {
        return this.counter;
    }

    public void setCounter(int counter) {
        this.counter = counter;
    }
    public Date getAppliedOn() {
        return this.appliedOn;
    }

    public void setAppliedOn(Date appliedOn) {
        this.appliedOn = appliedOn;
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T16:17:47.843

代替

> 列表列表=空；

利用

> 列表 < Bsmostviewjp > 列表 = null;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T06:52:15.823

`Integer bsmostviewjp=(Integer) mostit.next();`是 Stefan Be 建议的我的解决方案

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:32:42.913

首先，你不应该在没有参数化的情况下使用 List 和 Iterator。我的意思是您必须指出您列出的元素类型。因此，您应该编写**List<Integer>**、**Iterator<Integer>**或**List<Bsmostviewjp>而不是****List**、**Iterator**。这将允许编译器在出现问题时更容易地告诉您。看到[这个很好的解释为什么](http://en.wikipedia.org/wiki/Generics_in_Java)。这为您提供了类型安全性，这非常有用。

 ******完成此操作后，我想您会很快发现错误。

其次，您不应该在 jsp 中使用 scriptlet，而应使用 taglibs。看到[这个](http://www.developer.com/java/ejb/article.php/1447551/An-Introduction-to-JSP-Standard-Template-Library-JSTL.htm)。******

# asp.net - 捕获存储过程的返回值

> ID：14259946
> 
> 赞同：0
> 
> 时间：2013-01-10T14:17:34.330
> 
> 标签：asp.net, sql-server, asp.net-4.0, roleprovider

我正在尝试为我的 .Net 应用程序实现自定义角色提供程序。我试图通过使用 Asp.NET 的角色提供程序存储过程来检查用户添加的角色是否已经存在于数据库中，例如

```
SqlConnection sqlConnection = new SqlConnection(conn);
SqlCommand sqlCommand = new SqlCommand("aspnet_Roles_RoleExists", sqlConnection);
sqlCommand.CommandType = CommandType.StoredProcedure;
sqlCommand.Parameters.Add("@RoleName", SqlDbType.VarChar, 256).Value = "/";
sqlCommand.Parameters.Add("@ApplicationName", SqlDbType.VarChar, 256).Value = roleName;
sqlCommand.Parameters.Add("@ReturnValue", SqlDbType.Int,4).Direction = ParameterDirection.ReturnValue;
try
{
  sqlConnection.Open();
  sqlCommand.ExecuteNonQuery();
  int x = (int)sqlCommand.Parameters["@ReturnValue"].Value;
  if ((int)sqlCommand.Parameters["@ReturnValue"].Value == 0)
                 ... 
```

问题是当我添加角色时，例如 `admin`并从数据库中手动运行 sp

```
DECLARE @return_value int

EXEC    @return_value = [dbo].[aspnet_Roles_RoleExists]
        @ApplicationName = N'/',
        @RoleName = N'admin'

SELECT  'Return Value' = @return_value 
```

它给了我正确的结果，但是如果我尝试`admin`再次添加该角色，则来自应用程序的语句

```
(int)sqlCommand.Parameters["@ReturnValue"].Value 
```

总是给我`0`。任何人都可以指导我导致这种行为的原因

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:46:05.843

这更有可能是因为您反转了存储过程预期的值：

```
sqlCommand.Parameters.Add("@RoleName", SqlDbType.VarChar, 256).Value = "/";
sqlCommand.Parameters.Add("@ApplicationName", SqlDbType.VarChar, 256).Value = roleName; 
```

它应该是：

```
sqlCommand.Parameters.Add("@RoleName", SqlDbType.VarChar, 256).Value = roleName;
sqlCommand.Parameters.Add("@ApplicationName", SqlDbType.VarChar, 256).Value = "/"; 
```

您将 roleName 作为 ApplicationName 的参数传递。

# mysql - SQL Server 同步到 MySQL

> ID：14259953
> 
> 赞同：0
> 
> 时间：2013-01-10T14:17:59.663
> 
> 标签：mysql, sql-server, synchronization

> **可能重复：**
> [Sql Server 和 Mysql Server 之间的同步](https://stackoverflow.com/questions/1951174/sync-between-sql-server-and-mysql-server)

我想每隔 30 分钟或更短时间将 380000 行数据从 SQL Server 数据库的 11 个表持续同步到 MySQL 数据库。我怎样才能做到这一点？什么程序可以做到这一点？

两台服务器都是远程的。

# php - mysql查询熨烫网页上的一个搜索结果？

> ID：14259954
> 
> 赞同：0
> 
> 时间：2013-01-10T14:17:59.427
> 
> 标签：php, mysql, while-loop

我的查询打印在网页上

```
SELECT * FROM products WHERE (product_name like '%meat%' OR description like '%meat%' OR ingradients like '%meat%') AND hide!=1 ORDER BY id ASC 
```

如果我在 mysql 中运行相同的查询查询，它会显示 2 个结果，而我的 php 循环代码只显示一个结果，

我的PHP代码

```
<?php       

$keyword=mysql_real_escape_string($_GET['Keyword']);

$query2 = "SELECT * FROM products WHERE (product_name like '%$keyword%' OR description like '%$keyword%' OR ingradients like '%$keyword%')   AND hide!=1 ORDER BY id        ASC ";

    echo $query2 ;

    $result2 = mysql_query($query2) or die('Error, query failed2'); 
    if  (mysql_num_rows($result2)>0){
    mysql_data_seek($result2, 0);   

    $row2 = mysql_fetch_array($result2, MYSQL_ASSOC)

    ?>
      <ul id="product-listing">
        <?php

        $i=1;

        while($row2 = mysql_fetch_array($result2, MYSQL_ASSOC)){ ?>
        <li <?php  $i; if ($i%3==0) {echo "class=\"last\"";} ?>>
          <div class="img">
            <?php  if ( $row2['new'] ==1 )  { ?>
            <div class="new"><img src="images/new.png" width="18" height="41" /></div>
            <?php  } ?>
            <a href="product-details.php?refID=<?php echo $row2['id']; ?>"> <img src="images/products/284X190/<?php echo $row2['image_1']; ?>" width="284" height="190" alt="" title="" /></a> </div>
          <div class="name"><?php echo $row2['product_name']; ?></div>
          <form action="" method="post">
            <div class="price">Price:
              <?php  if ( $row2['market_price'] !=0 )  { ?>
              <span> $<?php echo $row2['market_price']; ?> </span>
              <?php  } ?>
              $<?php echo $row2['price'];   ?></div>
            <div class="add-to-cart">
              <input type="image" src="images/btn-1.jpg" />
            </div>
            <div class="clear"></div>
          </form>
        </li>
        <?php  $i++; } ?>
      </ul>
      <?php  } else {  ?>
      No Products,
      <?php  } ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:21:13.257

您应该在 php.ini 中使用 while 循环。

```
while($item = mysql_fetch_assoc($query))
{
print_r($item); // echo out whatever you need to for each item returned
} 
```

# php - 检查强制转换为 int 是否会丢失数据 - PHP

> ID：14259957
> 
> 赞同：1
> 
> 时间：2013-01-10T14:18:20.527
> 
> 标签：php, casting, biginteger

我有这段代码：

```
$result = new stdClass();
foreach ($array as $index => $value) {
    if(is_numeric($value)){
        $int = (int)$value;
        $double = (double)$value;
        if($int == $double)
            $value = $int;
        else
            $value = $double;
    }
    $index = strtolower($index);
    $result->$index = $value;
} 
```

它工作了很长时间。现在我遇到了问题。我的数据库中有一个列，其中包含数字（大数字）。但它们不是数字，它们是`varchar`，而且这些数字不是用于数学目的。不幸的是，由于该列仅填充了数字，因此它通过了`is_numeric`测试，但是由于它是一个巨大的数字，因此由于内存限制（我认为是 40 亿）而丢失了数据。无论如何，我如何检查演员表后我是否丢失了数据？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-10T14:20:59.887

```
if($value<=PHP_INT_MAX) ... // safe to convert
else // not safe 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:19:52.107

将其转换回来，看看它是否给出与源相同的值。

# vb.net - 更新 Awesomium 版本和会话更改首选项

> ID：14259959
> 
> 赞同：0
> 
> 时间：2013-01-10T14:18:32.840
> 
> 标签：vb.net, visual-studio-2010, visual-studio, awesomium

我有一些应用程序在 Awesomium 1.6.6 中工作，但后来我升级到 1.7，因为我需要向旧应用程序添加新功能，而旧 Awesomium 版本不支持。

但是现在我遇到了更深层次的问题，Awesomium 的所有 API 都不同。我已经改变了很多东西，现在我的应用程序可以工作，但这是我遇到的问题。

我通过更改标题遇到问题：Awesomium 1.7 中 的[http://pastebin.com/HrgmAJZS](http://pastebin.com/HrgmAJZS)**我如何在新版本中完成此操作？**

我需要**通过单击表单上的按钮来关闭 JavaScript**。我试过这个[http://pastebin.com/yU3StmWG](http://pastebin.com/yU3StmWG)但它似乎不起作用。

这是我在 Awesomium 讨论板上的完整对话：http: [//bit.ly/Zw3Ldi](http://bit.ly/Zw3Ldi)

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T23:00:02.263

有一个已知的错误，`WebView`当`WebControl`视图的. **这将在1.7**版的最终版本中得到修复。`WebPreferences.Javascript``false``WebSession`

# android - 找到 xml 类的错误？

> ID：14259960
> 
> 赞同：-9
> 
> 时间：2013-01-10T14:18:40.690
> 
> 标签：android, xml, android-layout

我的课`activity_main.xml`做得不好。当我执行我的程序时，出现一个错误，并创建一个新的空类，activity_main.out.xml。这是错误：

[2013-01-10 11:05:20 - EstudandoSQLite] ActivityManager：警告：Activity 未启动，其当前任务已被置于最前面

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:21:36.497

您错误地运行 hte xml 文件而不是应用程序。（在 Eclipse 中）尝试：Window->Preferences->Run/Debug->Launching->Always 启动以前启动的应用程序而不是另一个。另一段文字：

```
Warning: Activity not started, its current task has been brought to the front 
```

意味着您重新启动了您的应用程序而没有进行任何更改，这不是错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:21:49.387

您正在尝试运行 XML 文件而不是 java 类文件。关闭并删除`xml.out`. 当您运行程序时，您需要将焦点放在类文件上或单击“运行”按钮旁边的箭头并选择您的项目而不是 xml 文件

# bash - 来自 shell 脚本的 ln -sfn -v 的意外行为

> ID：14259962
> 
> 赞同：0
> 
> 时间：2013-01-10T14:18:51.447
> 
> 标签：bash, shell, sh

我有以下内容：

```
if [ $kernel == 'Darwin' ]; then
    $HOME="/Users/$user"
elif [ $kernel == 'Linux' ]; then
    $HOME="/home/$user"
fi

# Let the script know what the dotfiles dir is
dotfiles_dir="$HOME/dotfiles"

# Making symlinks to shell files, add yours as you need
echo 'Making symlinks to shell files'
ln -sfn -v $dotfiles_dir/shells/zsh $HOME/.zsh
ln -sfn -v $dotfiles_dir/shells/zsh/zshrc $HOME/.zshrc
ln -sfn -v $dotfiles_dir/shells/bash $HOME/.bash
ln -sfn -v $dotfiles_dir/shells/bash/bash_profile $HOME/.bash_profile
ln -sfn -v $dotfiles_dir/shells/bash/bashrc $HOME/.bashrc
ln -sfn -v $dotfiles_dir/shells/profile $HOME/.profile
echo "Done at [$time]...\n" 
```

然而，这奇怪地输出：

```
[Other output here...]

Making symlinks shell files
/Users/eduan/.zsh -> /Users/eduan/dotfiles/shells/zsh
/Users/eduan/.zshrc -> /Users/eduan/dotfiles/shells/zsh/zshrc
/Users/eduan/.bash -> /Users/eduan/dotfiles/shells/bash
./bashrc -> /Users/eduan/dotfiles/shells/bash/bashrc
/Users/eduan/.profile -> /Users/eduan/dotfiles/shells/profile
Done at [08:15]...

[Other output here...] 
```

谁能告诉我为什么我会得到这个意外的输出？我的其他符号链接生成正确，但是 Bash 符号链接由于某种原因被弄乱了。

顺便说一句，这是一个生成符号链接的大脚本。这只是其中的一部分，我把相关部分放在了上面，以免你感到困惑。:)

编辑：

这是脚本最新版本的链接：[https ://github.com/Greduan/dotfiles/blob/master/scripts/make_symlinks.sh](https://github.com/Greduan/dotfiles/blob/master/scripts/make_symlinks.sh)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:42:18.830

符号链接命令的 darwin 版本缺少 bashrc 的目标，因此转到当前目录。

我不确定为什么该脚本有两个版本？

此外，如果备份目录已经存在，您只创建它，这是不对的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:46:19.787

这条线是错误的，不是吗。缺少目标目录。

```
ln -sfn -v $dotfiles_dir/shells/bash/bashrc 
```

# iphone - 通过 JSON 从报纸 API 作品中获取最后 10 篇文章，但如何加载下 10 篇？

> ID：14259965
> 
> 赞同：1
> 
> 时间：2013-01-10T14:18:58.057
> 
> 标签：iphone, json, api, offset

使用 iPhone 应用程序从网络上获取报纸文章。

出于性能目的，仅发送最后 10 篇文章`request`。

一切都按预期工作，但是当用户向下滚动并想要阅读更多内容时，我如何获得接下来的 10 篇文章？

*   **工作**：首先`request`给我文章：1 - 10
*   **不工作**：`Request`再次发送应该给我文章：11-20（通过设置`offset`）

（当我阅读 API 文档时，我应该设置一个`offset`来获取下一篇文章，但它不起作用，我总是根据我的搜索查询得到相同的前 10 篇文章。）

以下`request`搜索包含`keyword` **frankfurt**的最后 10 篇文章，并设置`offset`10 篇，当我`request`再次发送时，它应该向我发送接下来的 10 篇文章。

[http://api.zeit.de/content?q=frankfurt&limit=10&offset=10&api_key=MY_API_KEY](http://api.zeit.de/content?q=frankfurt&limit=10&offset=10&api_key=MY_API_KEY)

*来自 API 文档：默认情况下，搜索结果限制为 10 个匹配项。您可以使用 limit 参数增加此值。要遍历结果集，请重复您的请求，并将 offset 参数设置为限制的倍数。*

更新：

```
- (IBAction)runBtnTapped:(id)sender
{
    NSError *error;

    NSData *data = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://api.zeit.de/content?q=frankfurt&fields=teaser_title%20AND%20release_date&limit=5&offset=5&sort=release_date%20desc&api_key=123456789"]];

    NSDictionary *dictFromData = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

    NSArray *array = dictFromData[@"matches"];
    NSLog(@"%@", array);
} 
```

**控制台输出：**

```
2013-01-10 17:21:39.261 ZEITreisen[94644:c07] (
        {
        "release_date" = "2013-01-03T06:00:00Z";
        "teaser_title" = "Im Stich gelassen";
    },
        {
        "release_date" = "2012-12-28T13:18:58Z";
        "teaser_title" = "Serbiens Nachwuchs baut den Weg nach Europa";
    },
        {
        "release_date" = "2012-12-27T10:18:07Z";
        "teaser_title" = "Das Fu\U00dfballgott bestrafte Hoffenheim";
    },
        {
        "release_date" = "2012-12-27T06:00:00Z";
        "teaser_title" = "Sind Fitschen und Jain die Richtigen f\U00fcr 2013?";
    },
        {
        "release_date" = "2012-12-27T06:00:00Z";
        "teaser_title" = Sparen;
    }
)
2013-01-10 17:21:43.447 ZEITreisen[94644:c07] (
        {
        "release_date" = "2013-01-03T06:00:00Z";
        "teaser_title" = "Im Stich gelassen";
    },
        {
        "release_date" = "2012-12-28T13:18:58Z";
        "teaser_title" = "Serbiens Nachwuchs baut den Weg nach Europa";
    },
        {
        "release_date" = "2012-12-27T10:18:07Z";
        "teaser_title" = "Das Fu\U00dfballgott bestrafte Hoffenheim";
    },
        {
        "release_date" = "2012-12-27T06:00:00Z";
        "teaser_title" = "Sind Fitschen und Jain die Richtigen f\U00fcr 2013?";
    },
        {
        "release_date" = "2012-12-27T06:00:00Z";
        "teaser_title" = Sparen;
    }
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T16:51:45.477

找到了解决方案。`Offset`每次重新调用它时都必须增加它才能起作用。

例子：

**第一次通话：（**无偏移）

```
http://api.zeit.de/content?q=frankfurt&fields=teaser_title%20AND%20release_date&limit=5&sort=release_date%20desc&api_key=123456789 
```

**下次调用 API 时，只需将偏移量加 5 即可。**

```
http://api.zeit.de/content?q=frankfurt&fields=teaser_title%20AND%20release_date&limit=5&offset=5&sort=release_date%20desc&api_key=123456789 
```

注意：第二个请求会留下前 5 个搜索结果，并提供接下来的 5 个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T14:52:47.563

没有任何代码，很难说。但是你的想法似乎很好。

您的请求中可能有错误（您是否记录了它们以查看参数是否设置正确，没有任何拼写错误？响应如何？）或者 API 可能有错误。在这种情况下，您应该直接联系提供商。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T16:50:12.293

您可能会遇到 API 错误地将某些参数优先于其他参数以忽略您的偏移量的实例。尝试删除限制，因为您使用的是默认值，或者尝试在限制和偏移之间使用不同的数字。可能会有一些糟糕的比较导致您的偏移量无法被接受。如果没有 API 文档，很难说可能出了什么问题。如果修改您的查询字符串不起作用，我会支持@Geraud.ch 的建议：联系 API 提供商。

**编辑**刚刚意识到您发布了实际的 URL。我现在正在搜索文档。

# java - 使用 maven 程序集插件，如何将工件复制到目录？

> ID：14259969
> 
> 赞同：4
> 
> 时间：2013-01-10T14:19:09.603
> 
> 标签：java, maven, maven-assembly-plugin

我有一个程序集描述符，可以将项目模块、依赖项甚至文件复制到我的发布文件夹，这很好。然而，我想复制的一个文件实际上是一个可以用 maven 坐标识别的工件。

**问题：**是否可以使用 maven 坐标（groupId:artifactId:version）在程序集`fileSet`或节中指定文件？`files`如果不是，那么实现这一目标的等效方法是什么？

最后，我要复制的工件*不是*我的项目的依赖项，所以我不能使用 filters `dependencySet`。这也将这个问题与这个问题区分开[来](https://stackoverflow.com/questions/11123862/how-to-get-maven-assembly-plugin-to-copy-artifact)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:33:07.070

您可以使用依赖插件和获取目标。

[http://maven.apache.org/plugins/maven-dependency-plugin/get-mojo.html](http://maven.apache.org/plugins/maven-dependency-plugin/get-mojo.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T15:11:26.047

我会使用 maven-dependency-plugin（特别是`copy`目标）来获取外部工件，然后使用程序集插件来打包它。

这是[插件的文档](http://maven.apache.org/plugins/maven-dependency-plugin/)

# javascript - 在我的脚本中设置打印首选项

> ID：14259971
> 
> 赞同：1
> 
> 时间：2013-01-10T14:19:16.383
> 
> 标签：javascript, printing, xul, xulrunner

我正在使用 HTML 模板打印账单，纸张高度是动态的。我正在使用 printSilent 模式。所以没有显示打印设置的对话框。它使用默认模板，当纸币高度大于 A4 尺寸纸的高度时，空白（边距）可见。我想删除它。有没有办法在我的脚本中设置打印首选项，例如纸张高度和宽度？我正在为我的应用程序使用 XULRunner。

# jquery - Jquery - 如何用 for 属性覆盖标签？

> ID：14259972
> 
> 赞同：0
> 
> 时间：2013-01-10T14:19:17.753
> 
> 标签：jquery, jquery-selectors

这似乎是一个愚蠢的问题，但我不知道如何做到这一点。我有这个 HTML：

```
<label for="id_form-1-somefield">some name</label>
<label for="id_form-2-somefield">some name 2</label>
... 
```

我需要更改标签中的字符串“某个名称”。如何构建选择器更改值“某个名称”？

有什么线索吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T14:21:15.853

```
 $("label[for='id_form-1-somefield']") 
```

会按照你的要求去做。请记住，id 上的选择器将是最快的，因此如果您可以创建一个唯一的 id 并在其上进行选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T14:25:55.910

```
$("label[for='id_form-1-somefield']").text("your new text"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-10T14:22:14.513

将 id 附加到这些字段，例如`someid` 然后

```
$("label[for='id_form-1-somefield']").val("some value"); 
```

或者

```
$("#someid").val("some value"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-10T14:22:56.857

```
$("label[for='id_form-1-somefield']")
and
$("label[for='id_form-2-somefield']") 
```

# javascript - Plupload、IE8 和 HTML4 运行时未触发添加文件对话框

> ID：14259974
> 
> 赞同：1
> 
> 时间：2013-01-10T14:19:32.600
> 
> 标签：javascript, jquery, plupload

[我对这个问题](https://stackoverflow.com/questions/11898082/plupload-html4-add-files-dialog-not-triggering-in-ie)有类似的问题，但遗憾的是不是相同的解决方案。

[我有一个与他们的示例](http://www.plupload.com/example_custom.php)非常相似的自定义上传实例，它在 FF、Chrome 和 IE9 中运行良好，但它在 IE8 中根本不起作用（或者至少我能得到的最接近 IE8：[IETester](http://www.my-debugbar.com/wiki/IETester/HomePage)）。

上传器似乎已初始化并报告已加载 html4 运行时，但浏览按钮不会触发“添加文件”对话框。

最初是因为输入项​​位于浏览按钮的前面，但我更改了 z-indexes 以确保浏览按钮位于顶部。现在单击按钮，但对话框仍未触发。

在初始化 plupload 之前，容器是可见的。

调用 uploader.refresh() 没有帮助。

在相同的 IE8 环境中，plupload 的自定义示例确实有效。

现在我已经没有其他想法可以尝试了，有人有什么建议吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T11:59:15.820

谢谢@jbl，你是对的。这个问题与 IETester 的限制有关，而不是实际问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:05:42.040

我有一个类似的问题：我的上传表单的浏览按钮也没有触发文件浏览器对话。我的问题是我没有在上传器选项中定义上传器父元素的 ID。您可以在 plupload 选项中将元素的 id 作为“容器”传递。

在修复之前，我的上传器的初始化是（在 Coffeescript 中）：

```
 options =
   runtimes: 'html4'
   browse_button: 'modal-browse'
   upload_button: 'modal-upload'
   filelist: 'modal-upload-queue'
   max_file_size: '10mb'
   url: 'upload_url.json'
   multipart_params: params

 @uploader = new plupload.Uploader(options) 
```

我的上传器托管在 id 为“image-upload-modal”的模态元素中。简单的添加`container: 'image-upload-modal'`解决了我的问题。例如：

```
 options =
   runtimes: 'html4'
   container: 'image-upload-modal'
   browse_button: 'modal-browse'
   upload_button: 'modal-upload'
   filelist: 'modal-upload-queue'
   max_file_size: '10mb'
   url: 'upload_url.json'
   multipart_params: params

 @uploader = new plupload.Uploader(options) 
```

顺便说一句，这也修复了我的上传器的 flash 运行时，它也在 IE 中崩溃。

如果这不能解决您的问题，我在其他 Q+A 上看到一些人的解决方案涉及定位 html4 运行时创建以处理文件上传的假文件输入，例如：

1.  修复了浏览按钮上虚假文件输入的位置，因为浏览器将该元素定位错误。
2.  与浏览按钮相比，修复了伪造文件输入的 z-index。

# linux - 使用 --enable-compat15 编译 nfdump

> ID：14259983
> 
> 赞同：0
> 
> 时间：2013-01-10T14:19:55.177
> 
> 标签：linux, networking, compilation

尝试使用 nfdump 处理 netflow 数据时出现错误：“无法处理 nfdump 1.5.x 块类型 1。添加 --enable-compat15 以编译兼容性代码。跳过块。” 我尝试编译了几次，但无济于事。我总是得到同样的错误。我究竟需要在哪里添加该参数？我尝试将其添加到 ./configure --enable-compat15，但没有任何区别。我必须在其他地方添加它吗？有人遇到同样的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:36:25.850

所以，我终于想通了。./configure --enable-compat15 是正确的，但是如果您之前在该目录中运行过 make ，则必须删除所有目录并再次从 tar.gz 中提取。现在它起作用了。

# mysql - 使用 PhpMyAdmin 导入 MSSQL.sql 时出现问题

> ID：14259984
> 
> 赞同：0
> 
> 时间：2013-01-10T14:19:57.470
> 
> 标签：mysql, sql-server, import, phpmyadmin

一直在研究将 MSSQL 转换为 MYSQL。对我来说最好的选择是使用 MSSQL.sql 并使用 PhpMyAdmin 导入它。

以下帖子和链接很有帮助：

[如何将 SQL Server 数据库导出到 MySQL？](https://stackoverflow.com/questions/3917081/how-to-export-ms-sql-database-to-mysql)

[如何将 SQL Server 数据库转换为 MySQL 数据库](https://stackoverflow.com/questions/7279303/how-to-convert-mssql-database-to-mysql-database?answertab=active#tab-top)

[http://forums.eukhost.com/f15/how-create-sql-file-mssql-database-created-sql-server-express-12514/#.UO68SHOLJ8s](http://forums.eukhost.com/f15/how-create-sql-file-mssql-database-created-sql-server-express-12514/#.UO68SHOLJ8s)

但是当我尝试这样做时，它似乎失败并出现以下错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册以获取正确的语法

这发生在 .sql 文件的各个点，例如：

> 使用 [充电]
> 
> 去
> 
> /****** 对象：表 [dbo].[CountryNm] 脚本日期：01/10/2013 13:28:42 ******/

这看起来像是 MSSQL.sql 文件的基本部分。我曾尝试从文件中删除 USE 和 GO，但随后停在评论处。我还没有删除这些，因为我在想我所做的事情可能从根本上是错误的？

我将 PhpMyAdmin 设置为 Format: SQL, Format-Specific Options: MSSQL 和 Do not use AUTO_INCREMENT for zero values: Checked。

提前谢谢了

编辑：MSSQL Server Management Studio 脚本向导选项：

ANSI 填充：真

附加到文件：错误

继续编写错误脚本：错误

将 UDDT 转换为基本类型：False

为依赖对象生成脚本：False

包括描述性标题：真

包括如果不存在：假

包括系统约束名称：False

架构质量对象名称：真

脚本绑定：假

脚本整理：真

脚本默认值：真

脚本丢弃：错误

脚本扩展属性：True

服务器版本的脚本：SQL Server 2008

脚本登录：假

脚本对象级权限：False

脚本使用数据库：错误

脚本更改跟踪：错误

脚本检查约束：真

脚本日期：真

脚本数据压缩选项：False

脚本外键：真

脚本全文索引：错误

脚本索引：错误

脚本主键：真

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T14:29:23.420

没有`GO`关键字，它是仅用于 SSMS/OSQL 和其他一些 MS 产品的脚本拆分器（可从选项中自定义）。

在 MYSQL 中更改数据库的`USE`语句应该没问题 - 请参阅[此处](http://www.tutorialspoint.com/mysql/mysql-select-database.htm)以获取参考。尝试换成`GO`分号来结束语句。

根据[文档](http://dev.mysql.com/doc/refman/5.0/en/comments.html)，这种类型的评论也适用于 Mysql。

考虑到这两个因素，试试这个语句：

```
USE [Charging];

/* Object: Table [dbo].[CountryNm] Script Date: 01/10/2013 13:28:42 */ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T00:37:39.903

嗯，这是一个特别痛苦的练习，但我设法让 MSSQL 数据库迁移到 MSSQL，这是最终目标。但不要走乍一看似乎最简单的使用 PhpMyAdmin 的路线。

MSSQL 服务器是隔离的，所以我必须备份数据库（.BAK 文件）并在我的本地计算机上安装 MSSQL 服务器 2008 express。在我的 Windows 7 专业 PC 上单独安装 Microsoft SQL Management Studio Express 时遇到了很多麻烦，但通过安装 MSSQL server 2008 高级服务解决了这个问题。然后我将备份恢复到那个。不确定这是否需要，但我还安装了 MYSQL ODBC 驱动程序。

然后我安装了 SQL Data Examiner 2012。这让我可以同时连接到本地 MSSQL 实例和远程 MYSQL DB。然后我可以将表添加到 MYSQL DB 并运行同步。幸运的是，这样做似乎突出了为什么我可能在使用 PhpMyAdmin 导入时遇到问题，其中大多数似乎是 MYSQL 不喜欢的超过 16 列的表！

嗯，它仍然是成功的，在某种程度上，我能够在我导出的几个表中删除很多列 - 希望对处于相同情况的其他人有用。

# iphone - iphone应用程序的sqlite数据库

> ID：14259986
> 
> 赞同：0
> 
> 时间：2013-01-10T14:20:02.067
> 
> 标签：iphone, ios, database, sqlite

我们正在为 iphone 开发一个应用程序，

问题：在客户端（iphone）或服务器上运行查询的最佳方式是什么？

是否有在客户端（iphone）上运行查询的注意事项，例如从查询返回的数据数量或在每个操作上运行的查询数量。

我的团队总是要求我从服务器返回所有日期（在服务器上运行查询），他们不想返回 id 并在他们身边运行查询以获取数据。

前任。返回完整的教师姓名而不是教师 ID。虽然教师表存在于客户端（iphone）

所以我的老板问我这种方式是最好的吗？

# c# - 带有 linq .where 子句的空引用异常

> ID：14259991
> 
> 赞同：7
> 
> 时间：2013-01-10T14:20:13.437
> 
> 标签：c#, arrays, linq, null

我试图从一个可以为空的对象数组（数组）中获取一个属性，但我总是得到一个空引用异常。

我如何告诉 LINQ 在它为空或返回空字符串的情况下不处理它？

```
foreach (Candidate c in candidates) {
   results.Add(new Person 
      { 
         firstName = c.firstname, //ok
         lastName = c.Name, //ok

         // contactItems is an array of ContactItem
         // so it can be null that's why I get null exception 
         // when it's actually null
         phone = c.address.contactItems.Where( ci => ci.contactType == ContactType.PHONE).First().contactText 
      }
   );
} 
```

我也试过不取null。如果数组为空，我没有告诉 LINQ 不处理的机制。

```
phone = c.address.contactItems.Where( ci => ci != null && ci.contactType == ContactType.PHONE).First().contactText 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-10T14:26:03.400

您可以检查它是否`null`使用[`?:`（条件）运算符](http://msdn.microsoft.com/en-us/library/vstudio/ty67wk28.aspx)：

```
phone = c.address.contactItems == null ? ""
    : c.address.contactItems.Where( ci => ci.contactType == ContactType.PHONE).First().contactText 
```

如果[`First`](http://msdn.microsoft.com/en-us/library/bb291976.aspx)因为没有人而引发异常，`ContactType.PHONE`您可以使用[`DefaultIfEmpty`](http://msdn.microsoft.com/en-us/library/bb355419.aspx)自定义默认值：

```
c.address.contactItems.Where( ci => ci.contactType == ContactType.PHONE)
                      .DefaultIfEmpty(new Contact{contactText = ""})
                      .First().contactText 
```

请注意，`First`现在不能再抛出异常，因为我提供了默认值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T14:29:53.537

试试下面的代码（我假设`contactText`是 a `string`）。

您可能希望将公共属性名称的大写标准化为全部以大写字母开头。

```
foreach (Candidate c in candidates) {
    string contactText =
        c.address.contactItems
            .Where(ci => ci.contactType == ContactType.PHONE)
            .Select(ci => ci.contactText)
            .FirstOrDefault()

    results.Add(
        new Person 
        { 
            firstName = c.firstname,
            lastName = c.Name,
            phone = contactText ?? string.Empty
        });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T14:23:47.017

尝试：

```
var contact = c.address.contactItems.Where( ci => ci.contactType == ContactType.PHONE).FirstOrDefault();
 phone = contact != null ? contact.contactText : ""; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-10T14:25:02.783

`null`值是所以`contactType`我们添加`(ci.contactType != null)`

```
 var phone = c.address.contactItems.Where( ci => (ci.contactType != null) && ci.contactType == ContactType.PHONE).First().contactText 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-10T14:22:51.400

```
foreach (Candidate c in candidates) {
results.Add(new Person 
  { 
     firstName = c.firstname, //ok
     lastName = c.Name, //ok

     // contactItems is an array of ContactItem
     // so it can be null that's why I get null exception 
     // when it's actually null
     phone = c.address.contactItems == null
          ? string.Empty
          :c.address.contactItems.Where( ci => ci.contactType == ContactType.PHONE).First().contactText 
  } 
```

); }

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-03-09T06:55:29.077

避免 linq 中的参数 null 异常，如下所示

```
 Summaries = (from r in Summaries
              where r.Contains(SearchTerm)
              orderby r
              select r).ToArray(); 
```

在这种情况下，如果 null 传递给 searchTerm，您可以检查 null 表达式，如下所示

```
 Summaries = (from r in Summaries
              where string.IsNullOrEmpty(SearchTerm) ||r.Contains(SearchTerm)
              orderby r
              select r).ToArray(); 
```

这个对我有用！

# c++ - 命名空间“std”没有成员“sort”

> ID：14259993
> 
> 赞同：21
> 
> 时间：2013-01-10T14:20:18.360
> 
> 标签：c++, sorting, std

尝试对整数数组进行排序，经过一番谷歌搜索后，遇到了使用`std::sort`伴随此错误的解决方案：`namespace "std" has no member "sort"`.

只是为了消除我没有使用 std 命名空间的任何疑虑，这是我的标题：

```
#include "stdafx.h"
#include <iostream>
#include <fstream>
#include <sstream>
#include <string>
using namespace std; 
```

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-01-10T14:21:53.130

添加：

```
#include <algorithm> 
```

如[`std::sort()`](http://en.cppreference.com/w/cpp/algorithm/sort)参考页所述。

请参阅[使用 std 命名空间](https://stackoverflow.com/questions/1265039/using-std-namespace)，[为什么“使用命名空间 std”被认为是不好的做法？](https://stackoverflow.com/questions/1452721/why-is-using-namespace-std-considered-a-bad-practice-in-c)以及关于 SO 讨论的许多其他问题`using namespace std;`。

# ios - AFNetworking 的问题？

> ID：14259996
> 
> 赞同：-1
> 
> 时间：2013-01-10T14:20:35.497
> 
> 标签：ios, objective-c, afnetworking

我想从 PHP 页面获取数据
我的代码是

```
NSURL *url = [NSURL URLWithString:@"http://avicenna-apps.com/harleychatget.php"];
AFHTTPClient * Client = [AFHTTPClient clientWithBaseURL:url];

[Client defaultValueForHeader:@"Accept"];

[Client getPath:@"" parameters:nil success:^(AFHTTPRequestOperation *operation, id responseObject)
{
    NSLog(@"Data %@",responseObject);
}

             failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    NSLog(@"Error retrieving data: %@", error);
}]; 
```

输出是

```
Data <32352020 32303133 2d30312d 31302030 383a3234 3a353620 2041686d 65642020 68656c6c 6f206865 6c6c6f20 3c627220 2f3e3234 20203230 31332d30 312d3130 2030383a 32343a35 30202041 686d6564 20203c62 72202f3e 32332020 32303133 2d30312d 31302030 383a3234 3a343920 2041686d 65642020 3c627220 2f3e3230 20203230 31332d30 312d3130 2030383a 32343a34 38202041 686d6564 20203c62 72202f3e 32312020 32303133 2d30312d 31302030 383a3234 3a343820 2041686d 65642020 3c627220 2f3e200a 0a> 
```

请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:24:37.700

那是二进制数据。你应该转换它。

尝试`NSString *response = [[NSString alloc] initWithData:(NSData*)responseObject encoding:NSUTF8StringEncoding];`以字符串形式获取响应

或简单： `NSString *response = request.responseString;`