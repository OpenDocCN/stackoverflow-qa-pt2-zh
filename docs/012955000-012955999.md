# StackOverflow 问答 12955000-12955999

# java - Java解密文件被破坏

> ID：12955003
> 
> 赞同：1
> 
> 时间：2012-10-18T12:44:59.373
> 
> 标签：java, cryptography, jce

我有一个程序必须加密音频文件，然后在需要时对其进行解密。我在一些其他类型的文件上测试了我的程序，比如 .bin 或 .txt。我得到的问题是解密文件在实际内容之前有一些奇怪的字符，比如源文件包含“010101”，加密解密后它有“¬íw0w 010101”。

我的加密方法代码在这里：

```
public void cipherTheAudioFile(String fileDir, String fileToCipher) throws            FileNotFoundException, IOException, NoSuchAlgorithmException, InvalidKeySpecException,  InvalidKeyException, NoSuchPaddingException {
    File audioSourceFile = new File(fileDir + "\\" + fileToCipher);
    ObjectOutputStream oos = new ObjectOutputStream(
        new CipherOutputStream(new FileOutputStream(
            new java.io.File("").getAbsolutePath().toString() + "/encrypted/" + fileToCipher + ".sky"), cipher));

    byte[] audioFileInBytes = FileUtils.readFileToByteArray(audioSourceFile);
    oos.write(audioFileInBytes);

    fos = new FileOutputStream(KEY_FILE);
    SecretKeyFactory skf = SecretKeyFactory.getInstance(ENCRYPTION_ALGORITHM);
    DESKeySpec keyspec = (DESKeySpec) skf.getKeySpec(key, DESKeySpec.class);
    fos.write(keyspec.getKey());

    fos.close();
    oos.close();
} 
```

我的解密方法代码在这里：

```
public void decryptTheAudioFile(String fileDir, String fileToDecipher) throws NoSuchAlgorithmException, NoSuchPaddingException, FileNotFoundException, IOException, ClassNotFoundException, InvalidKeySpecException, InvalidKeyException {
    fis = new FileInputStream(keyFile);
    byte[] keyspecbytes = new byte[fis.available()];

    File fileToWriteIn = createFileToWriteIn(fileDir, fileToDecipher);

    fis.read(keyspecbytes);
    SecretKeyFactory skf = SecretKeyFactory.getInstance(encryptionAlgorithm);
    DESKeySpec keyspec = new DESKeySpec(keyspecbytes);
    SecretKey key = skf.generateSecret(keyspec);
    Cipher cipher = Cipher.getInstance(encryptionAlgorithm);
    cipher.init(Cipher.DECRYPT_MODE, key);

    ObjectInputStream ois = new ObjectInputStream(
        new CipherInputStream(
            new FileInputStream(new java.io.File("").getAbsolutePath().toString() + "/encrypted/" + fileToDecipher + ".sky"), cipher));
    ObjectOutputStream oos = new ObjectOutputStream(new FileOutputStream(fileToWriteIn));

    byte[] audioFileInBytes = new byte[1024];

    int numRead = 0;
    while ((numRead = ois.read(audioFileInBytes)) >= 0) {
        oos.write(audioFileInBytes, 0, numRead);
    }

    oos.close();
    fis.close();
    ois.close();
} 
```

PS这可能与编码有关，但我不确定。

已编辑

好的，我已更改为 FileWriters，但仍然没有更改。代码如下：

```
 OutputStream os = new FileOutputStream(new java.io.File("").getAbsolutePath().toString() + "/encrypted/" + fileToCipher + ".sky");
    CipherInputStream cis = new CipherInputStream(new FileInputStream(audioSourceFile), cipher);
    byte[] audioFileInBytes = new byte[1024];
    int numRead = 0;
    while ((numRead = cis.read(audioFileInBytes)) >= 0) {
            os.write(audioFileInBytes, 0, numRead);
    } 
```

解密器也是如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:27:11.530

问题在于`decryptTheAudioFile`方法写入文件的方式。具体来说，问题在于它使用的是`ObjectOutputStream`. 那就是添加一个对象序列化标头。但它根本不属于那里。

解决方案是摆脱这个`decryptTheAudioFile`：

```
ObjectOutputStream oos = new ObjectOutputStream(
         new FileOutputStream(fileToWriteIn)); 
```

并将其替换为：

```
OutputStream os = new FileOutputStream(fileToWriteIn); 
```

并将其余代码更改为写入`os`. 您的代码需要反映您在`cipherTheAudioFile`.

* * *

摆脱其他`ObjectStream`实例并简单地读取和写入 plain 也是一个好主意`Streams`。其他`ObjectStream`s 是无害的（大部分），但它们实际上并没有实现任何目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:54:45.693

删除所有 ObjectOutputStreams 和 ObjectInputStreams。您正在编写一个字节数组，因此它们是不必要的。您看到的额外字节可能会告诉您 byte[] 的类型和大小。

# delphi - 如何修复 TScrollBar MouseWheel 故障？

> ID：12955008
> 
> 赞同：2
> 
> 时间：2012-10-18T12:45:15.657
> 
> 标签：delphi, scroll, delphi-2006

我有一个[`TScrollBox`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TScrollBox)内部，`TFrame`当我使用鼠标滚轮时，它根本不会上下滚动框滚动。

我试过用

```
TScrollBox(Sender).Perform(WM_VSCROLL,1,0); 
```

上，`FrameMouseWheelDown`但它不会触发。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:51:14.860

我的滚动框如下所示：

```
type
  TMyScrollBox = class(TScrollBox)
  protected
    function DoMouseWheel(Shift: TShiftState; WheelDelta: Integer; MousePos: TPoint): Boolean; override;
    procedure WndProc(var Message: TMessage); override;
  end;

function TMyScrollBox.DoMouseWheel(Shift: TShiftState; WheelDelta: Integer; MousePos: TPoint): Boolean;
begin
  Result := inherited DoMouseWheel(Shift, WheelDelta, MousePos);
  if not Result then begin
    if Shift*[ssShift..ssCtrl]=[] then begin
      VertScrollBar.Position := VertScrollBar.Position - WheelDelta;
      Result := True;
    end;
  end;
end;

procedure TMyScrollBox.WndProc(var Message: TMessage);
begin
  if Message.Msg=WM_MOUSEHWHEEL then begin
    (* For some reason using a message handler for WM_MOUSEHWHEEL doesn't work. The messages
       don't always arrive. It seems to occur when both scroll bars are active. Strangely,
       if we handle the message here, then the messages all get through. Go figure! *)
    if TWMMouseWheel(Message).Keys=0 then begin
      HorzScrollBar.Position := HorzScrollBar.Position + TWMMouseWheel(Message).WheelDelta;
      Message.Result := 0;
    end else begin
      Message.Result := 1;
    end;
  end else begin
    inherited;
  end;
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T17:22:22.527

您可以使用`OnMouseWheel`事件处理程序：

```
ScrollBar1.OnMouseWheel := ScrollBoxMouseWheel;
...
procedure TFrame1.ScrollBoxMouseWheel(Sender: TObject; Shift: TShiftState; WheelDelta: Integer; MousePos: TPoint; var Handled: Boolean);
begin
  Handled := True;
  if WheelDelta < 0 then
    TScrollBox(Sender).VertScrollBar.Position := TScrollBox(Sender).VertScrollBar.Position + TScrollBox(Sender).VertScrollBar.Increment 
  else
    TScrollBox(Sender).VertScrollBar.Position := TScrollBox(Sender).VertScrollBar.Position - TScrollBox(Sender).VertScrollBar.Increment;
end; 
```

# c# - 避免在除主请求之外的其他请求上处理 404

> ID：12955009
> 
> 赞同：0
> 
> 时间：2012-10-18T12:45:17.117
> 
> 标签：c#, http-status-code-404, httprequest, global-asax

我在 from 的方法中使用了下面的`EndRequest`方法`global asax`。我`HTTP 404 error`从图像请求或其他请求中得到一个偶数。关键是我只想检查第一个请求/主要请求。你能帮我吗。这是唯一有效的解决方案。

```
{
    if (Context.Response.StatusCode == 404)
    {
        Response.Clear();

        var rd = new RouteData();
        rd.DataTokens["area"] = "AreaName"; 
        rd.Values["controller"] = "Errors";
        rd.Values["action"] = "NotFound";

        IController c = new ErrorsController();
        c.Execute(new RequestContext(new HttpContextWrapper(Context), rd));
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:05:55.403

假设您只想为控制器操作处理 404，您可以检查当前请求是否是这样的：

```
if(!string.IsNullOrEmpty(Request.RequestContext.RouteData.GetRequiredString("controller")))
{
  ...handling code goes here....
} 
```

# java - 阅读从 GMail 发送的邮件

> ID：12955010
> 
> 赞同：2
> 
> 时间：2012-10-18T12:45:17.587
> 
> 标签：java, android, gmail, jakarta-mail

我正在使用 JavaMail 在我的 Android 应用程序中阅读邮件。我试图涵盖所有组合，即在自定义服务器/Gmail ID/Live ID 上/从自定义服务器发送/接收的邮件。

从 GMail WITH Attachment 发送的一些邮件会出现问题。我能够接收附件，但内容返回`javax.mail.internet.MimeMultipart@44f2e698`

这是用于接收和读取消息的代码：

```
 Properties props = System.getProperties();
    props.setProperty("mail.store.protocol", "imap");

    try {
     /* Create the session and get the store for read the mail. */
     Session session = Session.getInstance(props, null);
     Store store = session.getStore("imaps");
     store.connect("imap.gmail.com", Username, Password);

     /* Mention the folder name which you want to read. */
     Folder inbox = store.getFolder("INBOX");
     System.out.println("No of Unread Messages : " + inbox.getUnreadMessageCount());         

     /* Open the inbox using store. */
     inbox.open(Folder.READ_ONLY);

     Message messages[] = inbox.getMessages();       
     Log.d("Inbox", "Message Count: "+inbox.getMessageCount());

     for (int i = messages.length - 1 ; i > 0; --i) {
         Log.i("ContentType", "ContentType: "+messages[i].getContentType());

         Object msgContent = messages[i].getContent();

         String content = "";

         /* Check if content is pure text/html or in parts */            
         if (msgContent instanceof Multipart) {

             Multipart multipart = (Multipart) msgContent;

             Log.e("BodyPart", "MultiPartCount: "+multipart.getCount());

             for (int j = 0; j < multipart.getCount(); j++) {

              BodyPart bodyPart = multipart.getBodyPart(j);

              String disposition = bodyPart.getDisposition();

              if (disposition != null && (disposition.equalsIgnoreCase("ATTACHMENT"))) { // BodyPart.ATTACHMENT doesn't work for gmail
                  System.out.println("Mail have some attachment");

                  DataHandler handler = bodyPart.getDataHandler();
                  System.out.println("file name : " + handler.getName());                                 
                }
              else { 
                  System.out.println("Content: "+bodyPart.getContent());
                  content= bodyPart.getContent().toString();
                }
            }
         }
         else                
             content= messages[i].getContent().toString(); 
```

我对有问题的邮件的了解：

*   `getFrom`还返回名称，即它采用这种格式 FirstName LastName <emailID@gmail.com>

*   MultiPart 包含 2 个 BodyParts：

    *   BodyPart 1 将内容返回为`javax.mail.internet.MimeMultipart@44f2e698`

    *   BodyPart 2 返回正确的附件名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:52:45.433

> BodyPart 1 将内容返回为 javax.mail.internet.MimeMultipart@44f2e698

[尝试在MimeMultiPart](http://docs.oracle.com/javaee/5/api/javax/mail/internet/MimeMultipart.html#getBodyPart%28int%29)上调用 getBodyPart

这可能会返回一个 MimeBodyPart，您可以在 [http://docs.oracle.com/javaee/5/api/javax/mail/internet/MimeBodyPart.html#content上调用](http://docs.oracle.com/javaee/5/api/javax/mail/internet/MimeBodyPart.html#content)[getContent()](http://docs.oracle.com/javaee/5/api/javax/mail/internet/MimeBodyPart.html#getContent%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T16:47:04.337

您可能只处理带有附件的文本消息的最简单情况。MIME 允许更多。您需要了解 multipart/mixed、multipart/alternative、multipart/related 和 multipart/signed 之间的区别。JavaMail FAQ 提供了有关处理附件的更多信息，JavaMail 下载包中包含的 msgshow.java 演示程序展示了如何处理带有嵌套多部分的消息。

# xmlhttprequest - XMLHttpRequest 的默认 URL

> ID：12955019
> 
> 赞同：1
> 
> 时间：2012-10-18T12:46:01.400
> 
> 标签：xmlhttprequest

`<form>`与没有`action`属性或空属性的a 类似，具有为 URL 参数提供的 en 空字符串的 XMLHttpRequest 将请求当前 URL 的行为是否一致且可靠？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:55:39.950

经过实验，答案似乎是“否”。实际上，URL 参数是必需的，会导致错误。

# recursion - let函数内部的递归

> ID：12955024
> 
> 赞同：7
> 
> 时间：2012-10-18T12:46:14.393
> 
> 标签：recursion, clojure, let

我对 def 和 let 如何以不同方式绑定变量感到困惑。有人可以向我解释为什么这样做：

```
(def leven
  (memoize
   (fn [x y]
     (cond (empty? x) (count y)
           (empty? y) (count x)
           :else (min (+ (leven (rest x) y) 1)
                      (+ (leven x (rest y)) 1)
                      (+ (leven (rest x) (rest y)) (if (= (first x) (first y)) 0 1))))))) 
```

但是当我尝试将函数声明为 let 时，它无法编译：

```
(def leven
  (let [l (memoize (fn [x y]
                     (cond (empty? x) (count y)
                           (empty? y) (count x)
                           :else (min (+ (l (rest x) y) 1)
                                      (+ (l x (rest y)) 1)
                                      (+ (l (rest x) (rest y)) (if (= (first x) (first y)) 0 1))))))]
    (l x y))) 
```

编辑：这行得通，使用 Ankur 展示的技术。

```
(defn leven [x y]
  (let [l (memoize (fn [f x y]
                     (cond (empty? x) (count y)
                           (empty? y) (count x)
                           :else (min (+ (f f (rest x) y) 1)
                                      (+ (f f x (rest y)) 1)
                                      (+ (f f (rest x) (rest y)) (if (= (first x) (first y)) 0 1))))))
        magic (partial l l)]
    (magic x y))) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T12:53:13.010

下面是一个这样的例子来做你所要求的。为了简单起见，我使用阶乘并在阶乘中添加了 println 以确保记忆工作正常

```
(let [fact (memoize (fn [f x] 
                       (println (str "Called for " x))
                       (if (<= x 1) 1 (* x  (f f (- x 1))))))
      magic (partial fact fact)] 
     (magic 10)
     (magic 11)) 
```

首先计算 10 的阶乘，然后计算 11，在这种情况下，它不应该再次调用 10 到 1 的阶乘，因为这已被记住。

```
Called for 10
Called for 9
Called for 8
Called for 7
Called for 6
Called for 5
Called for 4
Called for 3
Called for 2
Called for 1
Called for 11
39916800 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T13:02:00.007

该`let`表单按顺序绑定名称，因此在您的第二个函数定义中，`l`当您尝试引用它时该名称不存在。您可以使用`letfn`（与一些次要的 mods）或给定义的函数一个名称，而不是引用它，如下所示：

```
(def leven  
  (let [l (memoize (fn SOME-NAME [x y]
    (cond 
      (empty? x) (count y)
      (empty? y) (count x)
      :else (min (+ (SOME-NAME (rest x) y) 1)
                 (+ (SOME-NAME x (rest y)) 1)
                 (+ (SOME-NAME (rest x) (rest y)) (if (= (first x) (first y)) 0 1))))))]
l)) 
```

正如您可能注意到的那样，我将返回从 t​​o 更改`let`为`l`本身，因为这是您想要`leven`绑定的。是有问题的`(l x y)`，因为它只引用了函数本地的绑定，而`let`.

# java - 超类类型的ArrayList

> ID：12955028
> 
> 赞同：0
> 
> 时间：2012-10-18T12:46:21.447
> 
> 标签：java, mongodb, jdo, datanucleus

我在我的项目中使用 mongodb-datanucleus。我配置我的 jdoconfig.xml 如下：

```
 <persistence-manager-factory name="mongodb-factory">
    <property name="javax.jdo.PersistenceManagerFactoryClass" value="org.datanucleus.api.jdo.JDOPersistenceManagerFactory" />
    <property name="javax.jdo.option.ConnectionURL" value="mongodb:localhost/test" />
    <property name="javax.jdo.option.Mapping" value="mongodb" />
    <property name="javax.jdo.option.ConnectionUserName" value="username" />
    <property name="javax.jdo.option.ConnectionPassword" value="psw" />
    <property name="javax.jdo.option.Optimistic" value="false" />
    <property name="datanucleus.autoCreateSchema" value="true" /> 
    <property name="datanucleus.DetachAllOnCommit" value="true" />
    <property name="datanucleus.DetachOnClose" value="true" />
    </persistence-manager-factory> 
```

我创建了超级类：

```
 @PersistenceCapable(detachable="true")
    public class Definition implements Serializable {
        private String label;
    } 
```

我创建了一个子类：

```
 @PersistenceCapable(detachable="true")
    public class SubDefinition extends Definition implements Serializable {
        private String label;
    } 
```

然后，我创建了一个存储定义数组列表的类：

```
 @PersistenceCapable(detachable="true")
    public class Master implements Serializable {
        @Persistent(defaultFetchGroup="true")
        @Element(dependent = "true")
        private List<Definition> subDef;
    } 
```

我的定义列表可以包含定义或子定义类型的对象。我创建了一个 Master 对象并将其持久化。

当我从数据库中检索对象时会出现问题：

```
 Transaction tx = pm.currentTransaction();
    tx.begin();
    Query query = pm.newQuery();
    query.setClass(Master.class);
    Collection<Master> masterList = (Collection<Master>)query.execute();
    tx.commit(); 
```

如果我不重新启动我的服务器，代码检索正确的对象，我的“subDef”列表正确加载。但是，在我重新启动服务器数据库后，该对象未正确加载。变量“subDef”包含一个空数组。它应该包含 2 个子元素。

每次我重新启动服务器后都会出现此问题。之后，我重新启动一些代码使数组为空。这不是我的代码之一。

如果我检查数据库，两个子元素都存在，但不再与它们的父元素链接。在我持久化对象之后，关系就正确地存在于数据库中。

存储对象的图形表示：

```
 Master
      ->subDef
        ->Definition (children 1)
        ->Definition (children 2) 
```

为什么我有这个问题？也许不允许创建超类列表？

非常感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:56:23.043

所有在文档中，根据 “获取深度”的[http://www.datanucleus.org/products/accessplatform_3_1/jdo/fetchgroup.html#static部分。](http://www.datanucleus.org/products/accessplatform_3_1/jdo/fetchgroup.html#static)

# scala - 这个函数可以被认为是尾递归吗？

> ID：12955032
> 
> 赞同：1
> 
> 时间：2012-10-18T12:46:29.973
> 
> 标签：scala, tail-recursion

这是我的功能：

```
 //Data Structures :
    abstract class HuffmanTree
  case class Node(left: HuffmanTree, right: HuffmanTree, chars: List[Char], weight: Int) extends HuffmanTree
  case class Leaf(char: Char, weight: Int) extends HuffmanTree

  def find_char(tree: HuffmanTree, x: Char, accu: List[Int]): (Boolean, List[Int]) = {
    tree match {
      case Leaf(c, _) => ((x == c),accu)
      case Node(left, right, ll, _) =>
      (find_char(left,  x,  accu ::: List(0))._1 || find_char(right, x,  accu :::List(1))._1, accu);
    }
  } 
```

该函数采用霍夫曼树、字符和累加器。该函数的目的是在霍夫曼树中搜索字符并对其进行编码。所以我遍历树，当我向左时，我向累加器加 0，当我向右时，我向累加器加 1。

我想知道这个函数是否是尾递归的？

我还有另一个问题。当我到达 a`Leaf`时，返回的累加器总是空的。有人可以解释我为什么会遇到这个问题吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T12:47:57.497

一般提示：`@tailrec`注解可用于检查方法是否为尾递归。

基本上在你的情况下，它不是尾递归：在这种情况下，两个递归调用之间`Node`有一个运算符。`||`

考虑到 的空列表`Int`。`accu`这很简单：在任何情况下都返回原始值。如果您`find_char`使用空列表作为第二个参数进行调用，则除了空列表之外，您无法获得其他内容。

# web-applications - 部署移动站点的选项

> ID：12955033
> 
> 赞同：1
> 
> 时间：2012-10-18T12:46:33.363
> 
> 标签：web-applications, mobile, web, lamp

所以我有一个网站“somesite.com”，现在我想部署一个相同的移动版本。开发完成，桌面版和移动版的代码库是通用的。主要变化是 smarty 模板；PHP 代码有 if else 语句来显示适当的模板。桌面和移动站点的模板位于完全不同的文件中。

我正在考虑以下替代方案，非常感谢您在对此做出明智决定时提供的帮助。

1.  在单个站点之外为移动站点和桌面站点提供服务；thesomesite.com 本身。代码可以毫无问题地处理它。优点 - 我只将代码部署到一个地方。对我来说没有管理麻烦。缺点 - ??。这是一个不好的做法吗？我看到大多数网站为移动网站维护不同的 URL。
2.  从新域中提供移动站点 - somesite.mobi 专业人士 - ??。这有什么优点吗？喜欢改进的搜索引擎优化？缺点 - 我最终将完全相同的代码部署到两个不同的位置
3.  从子域中提供移动网站 - m.somesite.com 专业人士 - ?? 缺点 - 与上面的 #2 相同。

非常感谢您的投入。

-阿米特

# sql - 出现错误“将 nvarchar 值 'egt1egt' 转换为数据类型 int 时转换失败。”

> ID：12955042
> 
> 赞同：0
> 
> 时间：2012-10-18T12:46:58.167
> 
> 标签：sql, sql-server

我创建了一个 sql 过程来返回与用户名关联的密码。

SQL过程：

```
USE [C:\INETPUB\WWWROOT\ADDMARKER\MAP\MAP\APP_DATA\ASPNETDB.MDF]
GO
/****** Object:  StoredProcedure [dbo].[aspnet_Membership_EmailPassword]    Script Date: 10/18/2012 15:32:02 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
-- =============================================
-- Author:      <Author,,Name>
-- Create date: <Create Date,,>
-- Description: <Description,,>
-- =============================================
ALTER PROCEDURE [dbo].[aspnet_Membership_EmailPassword] 
    -- Add the parameters for the stored procedure here
            (
            @UserName  nvarchar(256),
            @PasswordReturn nvarchar(128) out
            )
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
     DECLARE @UserId                                 uniqueidentifier
     DECLARE @Password                               nvarchar(128)
     DECLARE @Return_Password                         nvarchar(256)
     DECLARE @IsLockedOut                            bit
     DECLARE @ErrorCode     int
     SET @ErrorCode = 0

     DECLARE @TranStarted   bit
     SET @TranStarted = 0
      SET NOCOUNT ON;

IF( @@TRANCOUNT = 0 )
    BEGIN
        BEGIN TRANSACTION
        SET @TranStarted = 1
    END
    ELSE
        SET @TranStarted = 0

    SELECT  @UserId = u.UserId,
            @Password = m.Password,
            @IsLockedOut = m.IsLockedOut

    FROM    dbo.aspnet_Users u, dbo.aspnet_Membership m WITH ( UPDLOCK )
    WHERE    u.UserId = m.UserId AND
            LOWER(@UserName) = u.LoweredUserName

     IF ( @@rowcount = 0 )
    BEGIN
        SET @ErrorCode = 1
    END

    IF( @IsLockedOut = 1 )
    BEGIN
        SET @ErrorCode = 99
    END
    IF(Not( @ErrorCode = 0) )
    set @PasswordReturn = 'Error in search'
       ELSE
       set @PasswordReturn = @Password
       RETURN @PasswordReturn
END 
```

我收到错误

> “消息 245，级别 16，状态 1，过程 aspnet_Membership_EmailPassword，第 59 行将 nvarchar 值 'egt1egt' 转换为数据类型 int 时转换失败。”

在执行该程序时。

请问有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:51:00.407

`Return`只能返回一个int，它是过程的返回值。

退出过程会自动返回输出参数，所以去掉这行

```
 RETURN @PasswordReturn 
```

输出参数和返回值的区别详见[http://msdn.microsoft.com/en-us/library/59x02y99(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/59x02y99(v=vs.71).aspx)

# oracle - 流畅的 NHibernate 类映射 班级

> ID：12955049
> 
> 赞同：0
> 
> 时间：2012-10-18T12:47:08.233
> 
> 标签：oracle, fluent-nhibernate, nhibernate-mapping

我有一个问题——ClassMap 类会占用大量内存吗？大类映射会导致缓慢和abd性能吗？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:22:29.467

> 我有一个问题——ClassMap 类会占用大量内存吗？

不

> 大类映射会导致缓慢和abd性能吗？

不是类本身，而是将其添加到配置对象时的序列化反序列化。然而，这个成本通常只支付一次（应用程序启动），并且巨大的映射意味着设计缺陷，这将对映射之外的其他事物产生更大的影响。

# sql - 修改 SQL 查询

> ID：12955050
> 
> 赞同：0
> 
> 时间：2012-10-18T12:47:13.693
> 
> 标签：sql, alter

在我的应用程序的某个地方，我有一个查询：

```
$sql = SELECT * FROM table ORDER BY column1; 
```

我将此查询传递给我的类，它会生成一个表：

```
$table = new HtmlTable($sql) 
```

这个 $table 对象有一个方法 'groupBy'，它应该改变 $sql 字符串，它应该在 ORDER BY 子句中添加第二列，所以查询应该如下所示：

```
$sql = SELECT * FROM table ORDER BY added_column, column; 
```

我试过这个：

```
select * from (SELECT * FROM table ORDER BY column1) innerSQL ORDER BY innerSQL.column2 
```

但它没有正确排序..

实际上，我需要的是：

```
$sql = SELECT * FROM table ORDER BY column2, column1; 
```

但我不知道，如何更改 HtmlTable 类中的 $sql 字符串..

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:14:21.850

您可以使用正则表达式来执行此操作。这是您的方法的示例：

```
protected function groupBy($sql) {
  return preg_replace('/ORDER BY (.*)/i', 'ORDER BY SomeField, $1', $sql);
} 
```

它所做的是将“ORDER BY”替换为“ORDER BY , SomeField”。这是一个测试它的示例：

```
$sql = 'SELECT * FROM table ORDER BY column1';
$sql = preg_replace('/ORDER BY (.*)/i', 'ORDER BY SomeField, $1', $sql);
echo $sql; 
```

# maven - 删除码头 web.xml 中的过滤器

> ID：12955059
> 
> 赞同：3
> 
> 时间：2012-10-18T12:47:26.237
> 
> 标签：maven, jetty, web.xml

我已经配置了 jetty 以使用 jetty maven 运行我的 Web 应用程序。Jetty 应该是开发的轻量级替代品，因此它不需要 web.xml 中的所有内容。更具体地说，我想删除 web.xml 中的过滤器。

我尝试使用 overrideDescriptor 配置属性，但这仅允许我覆盖 web.xml，而不是替换它。因此，过滤器仍然存在。

有什么想法可以在不修改原始 web.xml 文件的情况下删除过滤器吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T09:42:31.150

由于没有答案，我将发布我的解决方案，这并不完美。

```
<!-- Jetty configuration -->
<plugin>
    <groupId>org.mortbay.jetty</groupId>
    <artifactId>jetty-maven-plugin</artifactId>
    <version>8.1.5.v20120716</version>
    <configuration>
        <webApp>
            <descriptor>src/main/webapp/mock-web.xml</descriptor>
            [...]
        </webApp>
        [...]
    </configuration>
</plugin> 
```

这种方法的缺点是您必须维护两个几乎相同的 web.xml 文件。我还没有找到允许我覆盖原始 web.xml 文件并删除侦听器的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-28T20:42:33.510

您可以在 override-web.xml 中将过滤器类替换为 PassThroughFilter：

```
public class PassThroughFilter implements Filter{

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {}

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)
        throws IOException, ServletException {
        chain.doFilter(request, response);
    }

    @Override
    public void destroy() {}
} 
```

* * *

```
<filter>
    <filter-name>OriginalFilter</filter-name>
    <filter-class>mypackage.PassThroughFilter</filter-class>        
</filter> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T18:10:24.850

一个强大的解决方案是在您的 2 个 XML 实体中使用`web.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document [
<!ENTITY webEntity1 SYSTEM 'webEntity1.xml'>
<!ENTITY webEntity2 SYSTEM 'webEntity2.xml'>
]>
<web-app>
    &webEntity1;
    &webEntity2;
</web-app> 
```

`custom-web.xml`一个文件中只有一个：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE document [
<!ENTITY webEntity1 SYSTEM 'webEntity1.xml'>
]>
<web-app>
    &webEntity1;
</web-app> 
```

这样，`webEntity1.xml`您将声明您的共享 servlet、过滤器、映射，并且`webEntity2.xml`仅在您不想在 Jetty 中使用的过滤器中声明。

然后你会像这样配置码头插件：

```
 <configuration>
        ...
        <webApp>
            ...
            <descriptor>${project.basedir}/src/main/webapp/WEB-INF/custom-web.xml</descriptor>
        </webApp>
        ...
    </configuration> 
```

我刚刚在我的[码头插件 wiki 页面](http://www.benoitschweblin.com/2013/03/run-jetty-in-maven-life-cycle.html)中添加了一个部分。

# mysql - 选择最小值、最大值、平均值、WHERE

> ID：12955060
> 
> 赞同：1
> 
> 时间：2012-10-18T12:47:28.573
> 
> 标签：mysql, sql, where

我正在使用 MySQL。

我正在尝试选择字段的最小、最大和平均长度，但我不确定如何。像这样的东西：

```
SELECT 
  min as min,
  max as max,
  avg as avg
FROM COLUMNS
WHERE COLUMN_NAME like '%password%' 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T12:49:15.110

```
select
    column_name,
    min(length(column_name)) as min,
    max(length(column_name)) as max,
    avg(length(column_name)) as avg
from columns
where column_name like '%password%'
group by column_name 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:51:27.137

```
SELECT Min(COLUMN_NAME), 
       Max(COLUMN_NAME), 
       Avg(COLUMN_NAME) 
  FROM TABLENAME 
 WHERE COLUMN_NAME LIKE '%password%' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:52:54.103

```
SELECT Min(MENTION_COLUMN_NAME_HERE) AS minimum_value, 
       Max(MENTION_COLUMN_NAME_HERE) AS maximum_value, 
       Avg(MENTION_COLUMN_NAME_HERE) AS average_value 
  FROM COLUMNS 
 WHERE COLUMN_NAME LIKE '%passord%' 
```

# windows-8 - Windows RT 平板电脑是否能够在睡眠模式下接收推送消息

> ID：12955065
> 
> 赞同：0
> 
> 时间：2012-10-18T12:47:41.490
> 
> 标签：windows-8, windows-runtime, push-notification

iPad 可以在屏幕关闭时接收推送消息。

是否可以在睡眠模式下使用 WinRT 设备接收推送消息？

我猜这对于基于英特尔的专业模型是不可能的......

笔记。在规划 Windows RT 应用程序时，这是一个非常重要的问题。如果可以向用户发出某种警报，则可以进行聊天应用程序。Pro 型号可以运行真正的 Windows 桌面应用程序，在后台运行时可以提醒用户...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:03:21.760

根据这份白皮书[http://www.microsoft.com/en-us/download/details.aspx?id=30703](http://www.microsoft.com/en-us/download/details.aspx?id=30703)和我之前读过的内容，有一个连接待机..

白皮书讨论了后台任务应该如何工作。每个人都没有提到通知，但我想它们也应该可以工作。但是，此时应用程序将处于暂停状态

# scripting - 用于脚本语言的可嵌入编辑器

> ID：12955073
> 
> 赞同：-1
> 
> 时间：2012-10-18T12:47:59.793
> 
> 标签：scripting, code-editor

我正在寻找一个可以嵌入到应用程序中的好编辑器（如果需要，可以使用 QT 或 GTK 工具包），并且允许编辑脚本：

*   代码完成
*   内联文档/上下文相关文档
*   语法高亮

任何语言都可以（Scheme、Lua、Python 等），只要我能做得很好 - 我可以将它嵌入到我的应用程序中（所以许可证也是一个问题，我不想不得不全部许可证）项目作为 GPL 和 AGPL - 我想保留 MIT/BSD 许可证的项目）

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T00:25:47.410

闪烁被嵌入。而且，据我所知，它与 GTK 和 QT 一起工作。但它可能需要一些定制才能使代码完成和内联文档/上下文相关文档正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T00:23:14.877

我不确定这是否可行，但[http://www.ubuntugeek.com/gummi-simple-latex-editor-written-in-pythongtk.html](http://www.ubuntugeek.com/gummi-simple-latex-editor-written-in-pythongtk.html)。它似乎是一个开源的、麻省理工学院许可的 LaTeX 编辑器。我以前没用过，也没有嵌入过，但理论上你可以嵌入它（当然除非n00bs不知道乳胶......）

# c - 如何打印指针的指向值？

> ID：12955076
> 
> 赞同：0
> 
> 时间：2012-10-18T12:48:01.867
> 
> 标签：c, pointers, memory-address

我在教科书中找到了以下代码：

```
#include<stdio.h>

void disp( int *k)
{
printf("%d",*k);
}

int main( )
{
 int i ;
 int marks[ ] = { 55, 65, 75, 56, 78, 78, 90 } ;
 for ( i = 0 ; i <= 6 ; i++ )
 disp ( &marks[i] ) ;
 return 0;
}

 } 
```

代码工作得很好，但我对逻辑有疑问：

1.  我正在发送数组变量的地址。但在`disp`函数中，我使用指针变量作为参数并打印指针的值。因此，从`main`函数发送的参数类型应该与 的参数不匹配`disp`。那么它是怎样工作的？

2.  我试图通过将`disp`函数更改为

    ```
    void disp( int (&k))
    {
    printf("%d",*k);
    } 
    ```

    但我收到一个错误。我应该怎么做才能通过将地址作为参数来使其工作，即`void disp(int &k)`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:51:00.820

> 1）我正在发送数组变量的地址。但是在 disp 函数中，我使用指针变量作为参数并打印指针的值。

了解指针是地址。一个. _ `&marks[i]` **_** `int*`而且您不是在打印指针的值，而是它指向的值。

```
printf("%d",*k); 
```

取消`*k`引用指针并给出指向的值。

```
void disp( int (&k)) 
```

是 C 中的无效语法，`&k`不是有效的标识符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T12:53:15.617

当你这样做时： -

```
int *k = &marks[i]; 
```

上面的语句被分解为：-

```
int *k;   -> Integer Pointer
k = &marks[i]; --> `k` points to the address of marks[i] 
```

所以，基本上，`k`是一个`integer`指针，它指向你的当前元素的地址`array`。

因此，当您 print 时`*k`，它等效于： - `*(&marks[i])`，它取消引用值并打印 element `marks[i]`。

因此，在下面的代码中，您可以了解整个`pointer`分配过程是如何`de-referencing`发生的：-

```
int *k;  // Declaring integer pointer.

// Actually 'k' is equal to the `&marks[i]`. 
// '*k' is just the indication of it being a pointer
k = &marks[i];      

// Dereference pointer
*k = *(&marks[i]); -->  = marks[i]

printf("%d",*k);  --> printf("%d",marks[i]); 
```

**此外，由于您不能声明变量，例如：-**

```
int &k = &marks[i]; 
```

您不能将它们作为函数中的参数：-

```
void disp(int &k); 
```

因为，最终`array element`传递的地址存储在这个变量中。所以，它必须是`int *k`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:56:32.490

1）您理解正确，在 for 循环中地址被发送到`disp`. 但是`disp`接收指针作为参数......这只是一个地址。在该函数内部，您不会打印指针的“值”。您打印该指针指向的值（该地址上的值）。在 printf 调用 "*k" 中，您取消引用指针 - 获取该指针指向的值。

2）您没有更改函数以使其接收地址。您对其进行了更改，以便它接收参考。您也可以说它接收到一个隐藏指针 - 它与指针的作用相同，但您不需要 "*k" 来取消引用它 - 您将它用作普通变量

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T12:51:22.560

阅读指针和变量地址。以及它们是如何使用的。当一个函数需要一个指针时，你必须发送一个指针或一个变量的地址。由于指针保存地址。

您面临的第二个问题是语法错误。因为没有 & 运算符可以应用于“左值”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T12:54:39.087

好吧，我可以简单地说你在函数中传递一个**地址**并在一个指针中接收它。它是正确的，因为指针可以指向或保存地址。或者简单地说，如果您发送一个地址但将其存储在一个**引用**变量中，但要问的问题是对谁的引用。反之亦然，你会更好地理解结构......

# php - PHP DOMDocument：如何删除一个 div？

> ID：12955079
> 
> 赞同：2
> 
> 时间：2012-10-18T12:48:10.273
> 
> 标签：php, domdocument, removechild

这是我的代码：

```
$doc = new DOMDocument();
$doc->loadHTML(stripslashes($sContent));

// si le meta existe alors il y a un sondage
if($doc->getElementById('meta') != null){
    $nombreMeta = $doc->getElementById('meta')->nodeValue;
    $numSondage = $doc->getElementById('meta')->getAttribute('class');
    for($i=0;$i<$nombreMeta;$i++){
        $meta = $meta."0,";
    }
    $meta = substr($meta,0,-1); 
    $divMeta = $doc->getElementById('meta');
    $oldchapter = $doc->removeChild($divMeta);
    $oHead = $doc->getElementsByTagName('head')->item(0);
    $oMeta2 = $doc->createElement('meta');
    $oMeta2->setAttribute('name',"metapoll".$numSondage);
    $oMeta2->setAttribute('content',$meta);
    $oHead->insertBefore($oMeta2, $oHead->firstChild);
    $sContent = $doc->saveHTML();
} 
```

我正在尝试删除 div `id="meta"` `($doc->getElementById('meta'))`，但我不知道为什么它不起作用。

我已经测试了很多东西，比如：

```
$metmet = $doc->documentElement;
$divMeta = $metmet->getElementById('meta')->item(0);
$metmet->removeChild($divMeta); 
```

但它不起作用。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:51:44.207

以下代码应该可以工作：

```
$divMeta = $doc->getElementById('meta');
$divMeta->parentNode->removeChild($divMeta); 
```

*   [`removeChild`](http://php.net/manual/en/domnode.removechild.php)
*   [`parentNode`](http://www.php.net/manual/en/class.domnode.php#domnode.props.parentnode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:51:52.730

该`removeChild`方法从节点中删除子元素。div 不能是`document`对象的子元素，只能`<html>`是（在 HTML 文档中）。

找到要删除的 div 后，您需要获取其父节点。然后调用`removeChild`那个。

```
$divMeta->parentNode->removeChild($divMeta) 
```

# iphone - 如何与 HTTP_PROXY 服务器建立 NSStream 套接字连接（服务器也需要身份验证）？

> ID：12955082
> 
> 赞同：2
> 
> 时间：2012-10-18T12:48:14.987
> 
> 标签：iphone, objective-c, ios, ipad

我知道如何使用`NSStream`类创建输入/输出流套接字。我也能够建立 TCP 连接和 SSL 连接。但我不知道如何与`HTTP_PROXY`服务器建立流套接字连接。服务器还需要发送用户名/密码。

这可能使用`NSStream`API 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-16T14:42:18.657

对于像我这样被卡住的人。这就是我解决它的方法。

*   使用 CFReadStreamCreateForHTTPRequest 而不是 CFStreamCreatePairWithSocketToHost。
*   使用正确的代理密钥 -`kCFStreamPropertyHTTPProxyHost`和 `kCFStreamPropertyHTTPProxyPort`.

    ```
     CFHTTPMessageRef    request;

       request = CFHTTPMessageCreateRequest(
           NULL, 
           CFSTR("GET"), 
           (__bridge CFURLRef) [NSURL URLWithString:@"http://www.apple.com/"], 
           kCFHTTPVersion1_1
       );
       assert(request != NULL);

       self.inputStream = CFBridgingRelease( 
           CFReadStreamCreateForHTTPRequest(NULL, request)
       );

       CFRelease(request);

       if (YES) {
           BOOL            success;
           NSDictionary *  proxyDict;

           proxyDict = @{
               (__bridge NSString *) kCFStreamPropertyHTTPProxyHost: @"proxy.example.com",
               (__bridge NSString *) kCFStreamPropertyHTTPProxyPort: @12345,
           };

           success = [self.inputStream setProperty:proxyDict 
               forKey:(__bridge NSString *) kCFStreamPropertyHTTPProxy
           ];
           assert(success);
       }

       [self.inputStream setDelegate:self];
       [self.inputStream scheduleInRunLoop:[NSRunLoop currentRunLoop] 
           forMode:NSDefaultRunLoopMode
       ];
       [self.inputStream open]; 
    ```

# python - 使用嵌入式 Python/C 函数编译文件 .c

> ID：12955086
> 
> 赞同：4
> 
> 时间：2012-10-18T12:48:26.827
> 
> 标签：python, c, gcc, python-c-api, python-c-extension

我开始研究 Python/C API，并编写了第一个代码来测试一些函数，我写了这个：

文件：test.c

```
#include "Python.h"

int main() {
    PyObject* none = Py_BuildValue("");
} 
```

我用命令编译：

```
gcc -I/usr/include/python2.7 test.c 
```

我有错误未定义对“Py_BuildValue”的引用

我运行后：

```
gcc -I/usr/include/python2.7 --shared -fPIC hashmem.c 
```

这个编译没有错误，但是当我运行编译文件时，我有一个

```
Segmentation fault (core dumped) 
```

如何设置 gcc 参数？

我有 ubuntu 12.04、python 2.7.3、gcc 4.6.3 并安装了 python-dev。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:43:07.847

在评论中@Pablo 提供了解决方案

```
gcc -I/usr/include/python2.7 test.c -lpython2.7 
```

我忘了用“-l”参数链接python库。

> -llibrary -l library 链接时搜索名为 library 的库。（将库作为单独参数的第二种选择仅适用于 POSIX）合规性，不推荐使用。）在命令中编写此选项的位置有所不同；链接器按照指定的顺序搜索和处理库和目标文件。因此，`foo.o -lz bar.o' searches library`z' 在文件 foo.o 之后但在 bar.o 之前。如果 bar.o 引用`z', those functions may not be loaded.The linker searches a standard list of directories for the library, which is actually a file named liblibrary.a. The linker then uses this file as if it had been specified precisely by name.The directories searched include several standard system directories plus any that you specify with -L.Normally the files found this way are library files—archive files whose members are object files. The linker handles an archive file by scanning through it for members which define symbols that have so far been referenced but not defined. But if the file that is found is an ordinary object file, it is linked in the usual fashion. The only difference between using an -l option and specifying a file name is that - l surrounds library with`lib' 和 `.a' 中的函数并搜索多个目录。

[参数说明来源](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.htmlBlockquoteBlockquote)

# git - 如何为位于 GIthub 中的存储库实施编码标准

> ID：12955088
> 
> 赞同：9
> 
> 时间：2012-10-18T12:48:37.497
> 
> 标签：git, github, hook, pre-commit-hook

我们在 Github 中有一个帐户，并在 Github（私人存储库）中托管我们所有的项目。

我们希望强制执行编码标准以及可能用于内部目的的其他钩子。由于存储库位于一个地方，因此我们已经让这些挂钩非常适合 subversion，管理这些挂钩非常好。

使用 Github，看起来我无法在主存储库中添加我的钩子（？），因此我很震惊：

1.  当每个成员将更改的文件推送到主存储库时，我如何对他们强制执行编码标准？
2.  Github 上有什么方法可以在我的服务器处理任何推送请求之前执行我的钩子吗？

我正在寻找让我的生活更轻松的想法/建议，非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:30:08.563

我认为这不是 VCS 的工作。问题是帮助执行编码标准的工具通常与源代码一起工作，有时与二进制文件一起工作。例如在 Java 中 checkstyle 可以在源代码上运行，但 findbugs 需要源代码 + 编译代码。但据我了解，在补丁上运行此类工具还不够有效。这些工具需要上下文。

所以我建议创建一个像 Jenkins 这样的持续集成服务器实例，如果有新的变化，让它从 Github 签出代码，编译并运行静态分析工具，构建结果应该发送给所有团队成员。它不仅会为您提供有关已正确编码的推送更改的反馈，而且如果从构建的角度来看代码是稳定的，它还会提供有益的反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:36:41.813

就像 Eugene 说的，我不确定这是否真的是 VCS 的任务。（但可能有一个地方可以挂钩）。

由于您使用的是 Github，您熟悉[Commit Status API](https://github.com/blog/1227-commit-status-api)吗？这样你就可以设置一个服务（比如 Jenkins），它会自动检查编码风格，例如运行单元测试，这样你就可以看到拉取请求是“干净的”还是“安全的”。

# oauth-2.0 - 是否可以使用服务帐户访问 Provisioning API？

> ID：12955089
> 
> 赞同：4
> 
> 时间：2012-10-18T12:48:41.583
> 
> 标签：oauth-2.0, google-apps, google-provisioning-api

我的服务帐户范围是：[https](https://apps-apis.google.com/a/feeds/user/) : //apps-apis.google.com/a/feeds/user/ 和 DriveScope.DRIVE

我在域设置的“管理第三方 OAuth 客户端访问”中为我的服务帐户 ID 授权了相同的范围。

我使用配置 api 的 java 客户端。

我使用 google oauth 客户端构建了我的凭据`GoogleCredential.Builder`：

```
credBuilder.setTransport(HTTP_TRANSPORT)
        .setJsonFactory(JSON_FACTORY)
        .setServiceAccountId(config.serviceAccountId)
        .setServiceAccountPrivateKeyFromP12File(new File(config.keyFilePath))
        .setServiceAccountScopes(SCOPES);
        .setServiceAccountUser("admin.of.my@domain.com") 
```

我尝试通过以下方式授权我对配置 api 的请求

```
userService = new UserService(config.repositoryId);
userService.setOAuth2Credentials(oAuthCredentials); 
```

`oAuthCredentials`我之前构建的服务凭据在哪里。

使用该配置，我可以访问我域中任何用户的 Google Drive 中的文件和集合。但是我无法使用这些凭据访问我的域的用户列表。

如果我不指定服务帐户用户，它也不起作用

这是我得到的堆栈跟踪：

```
com.google.gdata.util.ServiceForbiddenException: You are not authorized to access this API.
<HTML>
<HEAD>
<TITLE>You are not authorized to access this API.</TITLE>
</HEAD>
<BODY BGCOLOR="#FFFFFF" TEXT="#000000">
<H1>You are not authorized to access this API.</H1>
<H2>Error 403</H2>
</BODY>
</HTML>
at com.google.gdata.client.http.HttpGDataRequest.handleErrorResponse(HttpGDataRequest.java:605)
at com.google.gdata.client.http.GoogleGDataRequest.handleErrorResponse(GoogleGDataRequest.java:564)
at com.google.gdata.client.http.HttpGDataRequest.checkResponse(HttpGDataRequest.java:560)
at com.google.gdata.client.http.HttpGDataRequest.execute(HttpGDataRequest.java:538)
at com.google.gdata.client.http.GoogleGDataRequest.execute(GoogleGDataRequest.java:536)
at com.google.gdata.client.Service.getFeed(Service.java:1135)
at com.google.gdata.client.Service.getFeed(Service.java:998)
at com.google.gdata.client.GoogleService.getFeed(GoogleService.java:645)
at com.google.gdata.client.Service.getFeed(Service.java:1017)
at com.google.gdata.client.appsforyourdomain.AppsForYourDomainService.getFeed(AppsForYourDomainService.java:137)
at foo.bar.baz.eci.gdrive.service.BaseService$1.doTry(BaseService.java:125)
at foo.bar.baz.eci.gdrive.service.BaseService$1.doTry(BaseService.java:1)
at foo.bar.baz.eci.gdrive.service.backoff.BackoffRequest.execute(BackoffRequest.java:50)
at foo.bar.baz.eci.gdrive.service.BaseService.getFeedWithBackoff(BaseService.java:129)
at foo.bar.baz.eci.gdrive.service.BaseService.retrieveAllEntries(BaseService.java:90)
at foo.bar.baz.eci.gdrive.service.GappsUserService.getAllUserFeed(GappsUserService.java:57)
at foo.bar.baz.eci.gdrive.GdriveContentProviderFactory.doDiscover(GdriveContentProviderFactory.java:67)
... 19 more 
```

以及来自客户端库的日志记录：

```
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setPrivateHeader
PLUS FIN: Authorization: <Not Logged>
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setPrivateHeader
PLUS FIN: Authorization: <Not Logged>
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setPrivateHeader
PLUS FIN: Authorization: <Not Logged>
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: User-Agent: gdocsRepo GData-Java/1.47.1(gzip)
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: User-Agent: gdocsRepo GData-Java/1.47.1(gzip)
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: User-Agent: gdocsRepo GData-Java/1.47.1(gzip)
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: Accept-Encoding: gzip
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: Accept-Encoding: gzip
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: Accept-Encoding: gzip
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: GData-Version: 1.0
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: GData-Version: 1.0
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest setHeader
PLUS FIN: GData-Version: 1.0
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
FIN: 403 You are not authorized to access this API.
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
FIN: 403 You are not authorized to access this API.
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
FIN: 403 You are not authorized to access this API.
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Encoding: gzip
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Encoding: gzip
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Encoding: gzip
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Length: 151
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Length: 151
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Length: 151
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: null: HTTP/1.1 403 You are not authorized to access this API.
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: null: HTTP/1.1 403 You are not authorized to access this API.
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: null: HTTP/1.1 403 You are not authorized to access this API.
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Expires: Wed, 21 Nov 2012 14:17:37 GMT
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Expires: Wed, 21 Nov 2012 14:17:37 GMT
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Expires: Wed, 21 Nov 2012 14:17:37 GMT
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-XSS-Protection: 1; mode=block
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-XSS-Protection: 1; mode=block
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-XSS-Protection: 1; mode=block
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-Frame-Options: SAMEORIGIN
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-Frame-Options: SAMEORIGIN
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-Frame-Options: SAMEORIGIN
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Date: Wed, 21 Nov 2012 14:17:37 GMT
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Date: Wed, 21 Nov 2012 14:17:37 GMT
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Date: Wed, 21 Nov 2012 14:17:37 GMT
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Type: text/html; charset=UTF-8
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Type: text/html; charset=UTF-8
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Content-Type: text/html; charset=UTF-8
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Server: GSE
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Server: GSE
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Server: GSE
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-Content-Type-Options: nosniff
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-Content-Type-Options: nosniff
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: X-Content-Type-Options: nosniff
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Cache-Control: private, max-age=0
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Cache-Control: private, max-age=0
21 nov. 2012 15:17:37 com.google.gdata.client.http.HttpGDataRequest execute
PLUS FIN: Cache-Control: private, max-age=0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T00:58:34.300

`.setServiceAccountUser("admin.of.my@domain.com")`经过调查，如果设置的帐户不是域的“超级管理员”，似乎会发生 403 错误。

但是，在上述情况下，“admin.of.my@domain.com”确实是域的超级管理员。此外，该代码也适用于域的任何其他超级管理员，这导致人们认为帐户“admin.of.my@domain.com”特别有问题。

如果这种情况发生在其他任何人身上 - 也就是设置为“超级管理员”的帐户，它无法通过服务帐户访问仅限管理员的 API - 请确保您在下面的评论中告知我们，如果这会影响很多，我们将进一步调查的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T05:17:11.300

现在，自 2013 年 5 月 15 日起，配置 API 已被弃用。他们引入了一组称为[目录 API](https://developers.google.com/admin-sdk/directory/)的新 API ，可以解决您的问题。

# ruby - 通过 csv 中的 ID 解析行

> ID：12955094
> 
> 赞同：0
> 
> 时间：2012-10-18T12:48:57.200
> 
> 标签：ruby

如何通过 id 将行解析为数组？

例子：

```
id  | name |  descritption
---------------------------
1   | eg1  | dummytext1
1   | eg2  | dummytext2
2   | eg3  | dummytext3
2   | eg4  | dummytext4 
```

示例问题，我如何将 id 为 2 的行解析为数组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:46:03.250

```
result = Hash.new { |h,k| h[k] = Hash.new { |j,l| j[l] = [] } }

FasterCSV.foreach( "yourfile.csv", :headers=>true, :header_converters=>:symbol ) do |line|
  if line[:id] == 2
    result[:id][:name] << line[:name]
    result[:id][:descritption] << line[:descritption]
  end
end 
```

请注意，此代码未经测试。

关于 CSV 库的文档在[这里](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)

# magento - Magento 注销后重定向

> ID：12955101
> 
> 赞同：3
> 
> 时间：2012-10-18T12:49:18.500
> 
> 标签：magento, magento-1.7

注销后如何将客户重定向到magento中的默认商店视图？在注销时，我将他们重定向到另一个商店视图。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-18T13:51:11.953

我知道这并不优雅，但我找到的最简单的方法是将模板文件复制并修改`app/design/frontend/base/default/template/customer/logout.phtml`到您自己的主题目录中。

特别是这一行：

```
<p><?php echo Mage::helper('customer')->__('You have logged out and will be redirected to our homepage in 5 seconds.') ?></p>
<script type="text/javascript">
//<![CDATA[
    setTimeout(function(){ location.href = '<?php echo $this->getUrl() ?>'},5000);
//]]>
</script> 
```

通过修改 location.href url 甚至超时，您可以在注销后将用户指向任何地方。例如：

```
<script type="text/javascript">
//<![CDATA[
    setTimeout(function(){ location.href = '<?php echo $this->getUrl('*/*/login') ?>'},500);
//]]>
</script> 
```

同样，它并不优雅，但它应该是一个足够快的重定向，页面上的快速跳转会将它们推到另一个 url，在上面的示例中，返回到登录屏幕。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-18T20:23:47.700

不幸的是，没有方便的事件挂钩来操作注销重定向位置。

`Mage_Customer_AccountController::logoutAction()`*在调度事件后*在`::logoutSuccessAction()`响应对象上设置一个重定向，它是*customer/logout.phtml*模板的呈现，它使用 PHP~~设置~~echo 一个 javascript 参数以重定向到主页，没有 OOB 可能传递一个 arg替代基于 JS 的重定向。*`customer_logout`*

 **~~我认为最干净的解决方案是观察，抓取控制器对象，并使用响应对象的方法`controller_action_postdispatch_customer_account_logout`覆盖位置标头：`setRedirectWithCookieCheck()`

```
public function logoutRedirect($obs)
{
    $obs->getControllerAction()
        ->setRedirectWithCookieCheck(/* your URL param(s) */);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-29T11:10:37.477

在 Your Model > Observer 中编写以下方法。

```
public function customerLoggedOut(Varien_Event_Observer $observer)    
{    
    $observer->getControllerAction()
    ->setRedirectWithCookieCheck(CustomUrl);    
} 
```

Customurl 是您要在注销后重定向到的 url。

如果您想要在登录、注销和注册后为您的电子商务网站自定义 URL 重定向的完整解决方案。自定义重定向扩展可以帮助你。单击链接以获取扩展名。[http://www.magentocommerce.com/magento-connect/custom-redirection.html](http://www.magentocommerce.com/magento-connect/custom-redirection.html)~~**

# ruby-on-rails - 使用 RSpec 测试作为_as_nested_set 的模型

> ID：12955103
> 
> 赞同：4
> 
> 时间：2012-10-18T12:49:29.987
> 
> 标签：ruby-on-rails, testing, rspec, nested-sets

我有一个`Organization`模型`acts_as_nested_set`，使用`awesome_nested_set`：

```
class Organization < ActiveRecord::Base
  acts_as_nested_set
  attr_accessible :name, :location_id, :parent_id

  has_many :org_prod_relationships, dependent: :destroy
  has_many :products, through: :org_prod_relationships

  def has_product?(prod)
    org_prod_relationships.find_by_product_id(prod.id)
  end

  def add_product!(prod)
    org_prod_relationships.create!(product_id: prod.id)
  end

  def publish_product!(prod)
    self.descendants.each do |d|
      d.add_product!(prod)
    end
  end
end 
```

如何在 RSpec 中为 编写测试`publish_product!`，和/或这是在嵌套集中创建的错误方法`org_product_relationships`，因此难以测试？我的非工作尝试在这里（从较大的规范文件中剪辑）[https://gist.github.com/3911555](https://gist.github.com/3911555)。

编辑：更新以包含错误消息。注意，第 79 行和第 80 行是：

```
it { should have_product(product) }
its(:products) { should include(product) } 
```

在要点。

* * *

```
Failures:

  1) Organization publishes_product 
     Failure/Error: it { should have_product(product) }
       expected #has_product?(#<Product id: 34, name: "floo powder", created_at: "2012-10-21 14:15:08", updated_at: "2012-10-21 14:15:08", photo_file_name: nil, photo_content_type: nil, photo_file_size: nil, photo_updated_at: nil>) to return true, got false
     # ./spec/models/organization_spec.rb:79:in `block (3 levels) in <top (required)>'

  2) Organization publishes_product products 
     Failure/Error: its(:products) { should include(product) }
       expected [] to include #<Product id: 35, name: "floo powder", created_at: "2012-10-21 14:15:08", updated_at: "2012-10-21 14:15:08", photo_file_name: nil, photo_content_type: nil, photo_file_size: nil, photo_updated_at: nil>
       Diff:
       @@ -1,2 +1,2 @@
       -[#<Product id: 35, name: "floo powder", created_at: "2012-10-21 14:15:08", updated_at: "2012-10-21 14:15:08", photo_file_name: nil, photo_content_type: nil, photo_file_size: nil, photo_updated_at: nil>]
       +[]
     # ./spec/models/organization_spec.rb:80:in `block (3 levels) in <top (required)>'

Finished in 29.93 seconds
184 examples, 2 failures

Failed examples:

rspec ./spec/models/organization_spec.rb:79 # Organization publishes_product 
rspec ./spec/models/organization_spec.rb:80 # Organization publishes_product products 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T05:43:18.873

我认为你必须重新加载一个对象。尝试以下操作：

```
@organization.products.reload 
```

在之前的声明中发布产品之后。基本上一旦保存了@organization，调用@organization.products 就会有force_reload=false。参考： http: [//guides.rubyonrails.org/association_basics.html#has_many-association-reference](http://guides.rubyonrails.org/association_basics.html#has_many-association-reference)

此外，既然你问了，鉴于你已经建立了关系，你实际上应该能够使用 products 关系定义你的方法：

```
def has_product?(prod)
  products.include? prod
end

def add_product!(prod)
  products << prod
end 
```

我认为如果您以这种方式定义方法，您可能不必重新加载，因为 organization.products 关联已经更新。

希望有帮助。

# c++ - 从 SQL DB 中删除出现在数组中的行

> ID：12955104
> 
> 赞同：0
> 
> 时间：2012-10-18T12:49:31.083
> 
> 标签：c++, sql, arrays, mfc

我使用 MFC Visual C++ 和 Oracle SQL Server 进行开发。
我有 SQL 表：ID、值和时间，当应用程序插入新行时：一些 ID、一些值和时间被插入。

我的目标是删除在特定时间之间更改的值行。因为在那段时间插入的数据值不正确。

问题在哪里？我不需要删除在该时间段内更新的所有行，只需要删除具有出现在某个 CArray 上的 ID 的行。

我可以通过 CArray 中的每个 ID 并在该时间段内对该特定 ID 执行删除查询（无论是否有条目） - 问题因为我可以有 150K 个 ID 进行迭代..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:58:21.510

```
DELETE FROM table-name WHERE id in (...) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:58:46.017

将您的数组转换为具有一列的临时表，然后从 ID 所在的目标表中删除（从临时表中选择 ID）

这是一个例子：

```
declare @RegionID varchar(50)
SET @RegionID = '853,834,16,467,841'
declare @S varchar(20)
if LEN(@RegionID) > 0 SET @RegionID = @RegionID + ',' 
CREATE TABLE #ARRAY(region_ID VARCHAR(20))

WHILE LEN(@RegionID) > 0 BEGIN
   SELECT @S = LTRIM(SUBSTRING(@RegionID, 1, CHARINDEX(',', @RegionID) - 1))
   INSERT INTO #ARRAY (region_ID) VALUES (@S)
   SELECT @RegionID = SUBSTRING(@RegionID, CHARINDEX(',', @RegionID) + 1, LEN(@RegionID))
END

delete from from your_table
where regionID IN (select region_ID from #ARRAY) 
```

# php - Content-Type 什么时候应该是 application/json

> ID：12955105
> 
> 赞同：3
> 
> 时间：2012-10-18T12:49:31.740
> 
> 标签：php, javascript, json

我的服务器正在向客户端发送数据。

```
header('Content-type: application/json');
echo json_encode($jsondata); 
```

标题有什么好处？它对数据进行编码，但在我测试的各种浏览器中似乎没有任何视觉效果。我还看到它破坏了一个文件上传插件（我认为是 Valum，但不记得了）。最后，如果我的服务器只返回真/假（或 1/0，或成功/空），我还应该对响应进行编码吗？

那么，回顾一下我的问题，Content-Type 何时以及为什么应该是 application/json？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:51:15.577

很简单：内容类型应该是`application/json`您提供 JSON 数据的任何时候。这只是正确声明数据的问题，例如在您的汽车上放置正确的车牌或在一袋薯片上放置配料表。

浏览器中是否有数据的可视化表示是另一个问题，这不是您提供内容类型的主要原因。（我知道没有浏览器可以为 JSON 数据显示漂亮的树形视图。不过会很好！）

> 最后，如果我的服务器只返回真/假（或 1/0，或成功/空），我还应该对响应进行编码吗？

这取决于客户的期望，但最好的策略通常是在您的输出中保持一致，即如果您的其他服务也使用 JSON 编码，则始终对其进行 JSON 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:52:11.910

它应该强制浏览器尝试将其下载为 .json 文件。Javascript（例如 JQuery）会将其解析为 json 而不是 text/html。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:52:34.690

当数据实际上是 JSON 时，我倾向于使用标头。也就是说，看起来像`{...}`or `[...]`（或者，在这种情况下，它使用`json_encode`）。

此外，它可能对浏览器没有任何影响，因为大多数（没有插件）将其呈现为纯文本，但确实使其返回的数据更加简洁。此外，诸如此类的库`jQuery`使用此标头来处理响应（如果未在调用中手动提供）。

# android - 验证 Android 用户是人类（没有验证码）

> ID：12955107
> 
> 赞同：2
> 
> 时间：2012-10-18T12:49:41.270
> 
> 标签：android, captcha, bots, spam, google-cloud-messaging

我有一个应用程序，用户可以在其中添加评分，我不希望他们必须注册才能做到这一点，但我也不希望机器人很容易游戏评分。

有没有一种方法可以让我合理地（不一定是 100%，但我不想使用反应式启发式方法）确保我的用户是人类？*无需*任何类型的验证码/登录/其他操作。通常我会说这是不可能的，但由于我的应用程序在 Android 上运行，我认为我们可以做得比没有好。

# 邮箱地址。

我的第一个想法是从 获取他们的 gmail 地址`AccountManager`，但我看不到验证他们是否拥有该电子邮件地址的方法 - 即机器人只能将虚构的电子邮件发送到我的服务器，所以我认为这不能工作（我不想让他们使用他们的谷歌帐户验证我的应用程序；他们不太可能这样做）。

# GCM

我的下一个想法是使用 Google 的 Cloud Messaging。我可以从设备获取云消息 ID，将其发送到我的服务器，将随机云消息从服务器发送回设备，然后将该消息发送回服务器。我*认为*这至少可以验证他们确实拥有带有 gmail 帐户的 Android 设备，这已经足够了。

# 短信

当然，我可以向他们发送 SMS，但这需要花钱，而且无缝意味着我需要获得阅读他们消息的权限，而我真的很想避免这种情况（特别是因为评级是一个可选功能）。

# Android 许可服务器

也许可以使用[许可验证库](http://developer.android.com/guide/google/play/licensing/overview.html)从谷歌获得用户从市场上下载它的签名保证，但由于我的应用程序的性质，我无法将其投放市场。

# 设备ID、EMEI、电话号码等

我当然不能用这些。机器人可以弥补它们！

所以 GCM 看起来是最好的（也是唯一的）选择。谁能想到别的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:45:49.597

当您控制通信的双方时，您可以执行以下操作：

## 流动

1.  应用程序：从服务器请求一次性秘密令牌。
2.  服务器：创建一次性秘密令牌和跟踪 ID，并将两者发送到应用程序，同时使用跟踪 ID 跟踪秘密令牌。
3.  应用程序：使用一次性秘密令牌对投票进行加密（有关加密，请参见下文）
4.  应用程序：向服务器发送加密消息和跟踪 ID。
5.  服务器：使用 tracking-id 查找秘密令牌，确保它尚未被使用并使用秘密令牌解密投票。

## 加密

您可以使用任何对称加密技术。一个非常简单的例子是在应用程序端使用秘密令牌对您的消息（即投票）进行异或运算。在服务器端 XOR-ing 再次使用相同的秘密令牌再次给出明文消息。

只要攻击者不知道您的加密方法，此方法就是安全的。如果知道他当然可以模拟应用程序所做的请求，但它适用于每种方法，所以你可能应该使用比简单的 XOR-ing 更好的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:51:24.867

随机显示一些弹出窗口并将其关闭按钮放置在不同的位置，因此用户必须关闭它们。

或者

使用拖放 API 要求用户将按钮拖放到屏幕上的某个区域，然后提交评分。您可以随机放置按钮。

可能有多个地方可以拖动按钮，但您可以指示用户放入正确的按钮。

# c# - 十进制类型的空值

> ID：12955110
> 
> 赞同：0
> 
> 时间：2012-10-18T12:49:50.103
> 
> 标签：c#, visual-studio-2010, datagridview

我有一个包含很多行的 DataGridView，并且一些单元格值类型是十进制的。在某些行中，我需要十进制类型的单元格为空。
例如：
如果单元格值为 0，则将单元格留空而不是 0。
有可能吗？如果是，那么如何？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:52:54.097

处理`CellFormatting`事件。您将从`args`表示未格式化值的事件中获取传入的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T12:55:28.540

转到属性并将空值设置为零或对所有单元格使用循环并检查它们的值

# iphone - iphone的mac地址是静态的吗？寻找一种方法来识别哪个用户在线

> ID：12955111
> 
> 赞同：1
> 
> 时间：2012-10-18T12:49:55.143
> 
> 标签：iphone, ios, database, mac-address

我正在构建一个不需要登录系统的应用程序。我仍然希望能够知道哪些用户正在向我的在线数据库发送信息。据我所知，UDID 是不允许上传到任何服务器的，所以这是不可能的。我可以使用iphone的mac地址吗？如果它是动态的，它会不时变化，我将无法跟踪它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:57:11.863

我们现在使用 MAC 地址作为唯一标识符，现在 UDID 已被弃用。

MAC 地址是基于硬件的，因此无法更改。

# jenkins - 如何在 Jenkins Build Pipeline Plugin 中显示 SVN 版本而不是作业编号？

> ID：12955113
> 
> 赞同：0
> 
> 时间：2012-10-18T12:50:02.193
> 
> 标签：jenkins, build-pipeline-plugin

我正在使用 Jenkins Build Pipeline 插件。
你知道如何在 Jenkins Build Pipeline Plugin 中显示 SVN 版本而不是作业编号吗？

我在这个插件的旧版本的截图中看到它有时会显示 SVN 版本。
是对插件的更改，还是要添加一些参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T09:41:19.533

您可以使用“Build Name Setter Plugin”来设置构建的名称，但这不受 Build Pipeline 插件的尊重。目前，使用内部版本号是硬编码的，因此您目前无法配置它。

作为参考，您可以在源代码中看到这一点

[http://code.google.com/p/build-pipeline-plugin/source/browse/src/main/resources/au/com/centrumsystems/hudson/plugin/buildpipeline/BuildPipelineView/bpp.jelly](http://code.google.com/p/build-pipeline-plugin/source/browse/src/main/resources/au/com/centrumsystems/hudson/plugin/buildpipeline/BuildPipelineView/bpp.jelly)

在第 319 行

```
<div>
  Pipeline
  <j:if test="${from.isShowPipelineParameters()}">
  ${buildGrid.get(x).get(0).getRevision()}
  </j:if>
</div> 
```

我还希望看到插件尊重由 Build Name Setter 插件设置的构建的显示名称。在 Build Pipeline 插件 Google 代码页上有一个未解决的问题。[http://code.google.com/p/build-pipeline-plugin/issues/detail?id=94](http://code.google.com/p/build-pipeline-plugin/issues/detail?id=94)

编辑：我对源代码进行了更深入的研究，似乎在 1.3 版本之后进行了一些更改。相关的提交是[http://code.google.com/p/build-pipeline-plugin/source/detail?r=d8f1b6ab3e4e78383a89994cc569e11542b1e532](http://code.google.com/p/build-pipeline-plugin/source/detail?r=d8f1b6ab3e4e78383a89994cc569e11542b1e532)。希望此功能将在下一个版本中推出。

# wpf - WPF DependencyProperty 链通知

> ID：12955114
> 
> 赞同：4
> 
> 时间：2012-10-18T12:50:05.130
> 
> 标签：wpf, binding, notifications, dependency-properties, dependencyobject

我正在探索 WPF 世界，我在网上找到了一个关于如何在 xml 上使用绑定的好例子

[http://www.codeproject.com/Articles/37854/How-to-Perform-WPF-Data-Binding-Using-LINQ-to-XML](http://www.codeproject.com/Articles/37854/How-to-Perform-WPF-Data-Binding-Using-LINQ-to-XML)

现在我试图扩展这个例子：我想在`XElement`UI 和 UI 之间创建一个“中间类”，并将所有 togheder 绑定在一个链中，所以，如果我对 xml 进行了修改，那么我有中间的属性类更新了，然后 UI 也更新了。

这里有一些代码：

这是包装的类`XElement`

```
public class XElementDataProvider : ObjectDataProvider
{
    public XElementDataProvider()
    {
        ObjectInstance = XElement.Load(@"C:\MyFile.xml");
    }

    private static XElementDataProvider instance;

    public static XElementDataProvider Instance
    {
        get
        {
            if (instance == null)
            {
                instance = new XElementDataProvider();
            }
            return instance;
        }

    }
} 
```

这是`MiddleClass`

```
public class MiddleClass : DependencyObject
{

    XElementDataProvider xElementDataProvider;
    XElement myxml;

    public MiddleClass()
    {
                    //here i get my dataprovider
        xElementDataProvider = XElementDataProvider.Instance;
        myxml = xElementDataProvider.Data as XElement;

                    //i bind my internal collection to the Elements...
        Binding binding = new Binding("Elements[book]")
        {
            Source = myxml,
            Mode = BindingMode.Default//here i cant use TwoWay, give me          //back an exeption
        };

        BindingOperations.SetBinding(this, XBookListProperty, binding);

                    //just to have confirmation of the adding
        myxml.Changed += new EventHandler<XObjectChangeEventArgs (myxml_Changed);

    }

    void myxml_Changed(object sender, XObjectChangeEventArgs e)
    {

    }

            //i use a DependencyProperty to have also a change callback
    public static readonly DependencyProperty XBookListProperty =
        DependencyProperty.Register("XBookList", typeof(IEnumerable),
        typeof(MiddleClass),
        new PropertyMetadata(XBookPropertyChanged)
        );

            //here i have a notification only at start but no when i add a new book
    private static void XBookPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        MiddleClass middleClass = d as MiddleClass;
        middleClass.XBookPropertyChanged((IEnumerable)e.OldValue, (IEnumerable)e.NewValue);
    }

    private void XBookPropertyChanged(IEnumerable old, IEnumerable newValue)
    {

    }
             //this is the propery i finally want to expose to the UI but im not able //to keep updated
    public List<Book> bookList;
    public List<Book> BookList
    {
        get
        {
            return bookList;
        }
        set
        {
            bookList = value;
        }
    }

    //this is my internal list binded to the xml
    private IEnumerable XBookList
    {
        get
        {
            return (IEnumerable)GetValue(XBookListProperty);
        }
        set
        {
            SetValue(XBookListProperty, value);
        }
    }

            //here i try to add a book addind direcly to the xml//i expect a //notification of propery changed...but nothing
    public bool AddBook(string name)
    {

        XElement newWorkSheet = new XElement("Book",
            new XAttribute("Name", name)
            );

        myxml.Add(newWorkSheet);

        return true;
    } 
```

Book 是一个代表一本书的类，假设它现在只有一个名称属性。

UI 类未命中，但它应该绑定在公共`List<Book>`BookList 上并以`ListBox`

Enyone 知道为什么我没有收到任何通知......或者我必须做些什么来保持公共`List<Book>`BookList 与私有同步`IEnumerable<XBookList>`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T11:55:50.777

好的，经过多次尝试，我找到的唯一解决方案是这个：

要在发生某些更改时收到通知，`IEnumerable<XBookList>`您需要在修改后清除它并重新绑定。

通过这种方式，您有一个关于清除的第一个未使用的通知，然后是关于新集合的另一个通知。

然后在处理程序中，您可以将新列表与旧列表同步。

```
public bool AddBook(string name)
{

    XElement newWorkSheet = new XElement("Book",
        new XAttribute("Name", name)
        );

    myxml.Add(newWorkSheet);

    ClearValue(XBookListProperty);
Binding binding = new Binding("Elements[book]")
    {
        Source = myxml,
        Mode = BindingMode.Default          
    };
    BindingOperations.SetBinding(this, XBookListProperty, binding);
    return true;
} 
```

# jquery - 所有子页面上的不同标题计数器#jQuery

> ID：12955115
> 
> 赞同：0
> 
> 时间：2012-10-18T12:50:08.507
> 
> 标签：jquery

您好，只是一个一般性问题（没有任何代码）：是否可以制作受不同页面上的操作影响的计数器？例如，如果我有一个带有计数器的标题，并且在每个子页面上都有一个按钮“A”，则在每个页面上按下按钮时都会添加该值，并且标题中显示的值是在所有页面上连贯。

# iphone - 没有为 Instagram 集成删除 Cookie

> ID：12955120
> 
> 赞同：2
> 
> 时间：2012-10-18T12:50:32.630
> 
> 标签：iphone, xcode, cookies, instagram

我已经在我的应用程序中集成了 Instagram，我可以登录和注销，但是当我尝试重新登录时，它不再要求提供凭据。它使用相同的旧凭据登录，但是当我从 iPhone 或模拟器的 Safari/设置中删除 cookie 和历史记录时，它只能正常工作，否则无法正常工作

我正在使用的登录过程是

```
 // here i can store accessToken
    IGAppDelegate* appDelegate = (IGAppDelegate*)[UIApplication sharedApplication].delegate;
    [[NSUserDefaults standardUserDefaults] setObject:appDelegate.instagram.accessToken forKey:@"accessToken"];
    [[NSUserDefaults standardUserDefaults] synchronize];
IGListViewController* viewController = [[IGListViewController alloc] init];
    [self.navigationController pushViewController:viewController animated:YES]; 
```

对于注销，我正在尝试这样：静态 NSString* kDialogBaseURL = @"https://instagram.com/";

```
NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    NSArray* instagramCookies = [cookies cookiesForURL:[NSURL URLWithString:kDialogBaseURL]];
    NSLog(@"Cookies %@",cookies);
    NSLog(@"Cookies %@",instagramCookies);
    for (NSHTTPCookie* cookie in instagramCookies)
    {
        NSLog(@"cookies is %@",cookie);
        [cookies deleteCookie:cookie];
    }
        NSLog(@"Cookies %@",cookies); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-20T06:28:18.643

```
NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
for (NSHTTPCookie* cookie in [cookies cookies]) {
    if ([cookie.domain.uppercaseString containsString:@"instagram.com".uppercaseString]) {
        [cookies deleteCookie:cookie];
    }
} 
```

# c++ - 初始化中的双'='

> ID：12955121
> 
> 赞同：3
> 
> 时间：2012-10-18T12:50:39.167
> 
> 标签：c++, initialization, variable-assignment

我在做一些实验时遇到了这条线：

```
 int home_address = current_pos_ = hash(key, size_); 
```

我想知道它实际上是做什么的？（不是散列函数或任何东西，只是“int variable = variable = value;”的东西）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:52:28.803

该表达式读作：

```
int home_address = (current_pos_ = hash(key,size_)); 
```

它分配`hash(key,size_)`into的结果，`current_pos_`然后分配`current_pos_`into的值`home_address`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T12:52:28.840

赋值运算符计算其左参数的最终值，因此此代码分配`hash(key, size_)`给，并使用 的新值进行`current_pos_`初始化。`home_address``current_pos_`

赋值运算符可以被重载以返回任何类型的任何值，所以一般来说，这个表达式的行为是调用赋值运算符`current_pos_`的结果`hash(key, size_)`（可能执行隐式转换），然后 `home_address`用返回值初始化赋值运算符（同样可能执行隐式转换）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T12:51:44.013

```
int x = y = 0; 
```

是相同的

```
int x = 0;
y = 0; 
```

# java - Protobuf / 协议缓冲区 - IndexOutOfBoundsException

> ID：12955122
> 
> 赞同：1
> 
> 时间：2012-10-18T12:50:42.080
> 
> 标签：java, buffer, protocols, protocol-buffers, indexoutofboundsexception

我正在开发一个使用 Google 协议缓冲区的客户端服务器应用程序。不幸的是，当我使用构建器模式在服务器端构建协议缓冲区响应时，我得到了 IndexOutOfBoundsException：

这是我构建 protobuf 文件的行：

```
Builder getVGResonseBuilder = App_getVGResponse.GetVGResponse.newBuilder().getVGBuilder(0);
[some more code that uses the builder patterns]
getVGResponseBuilder.set...
getVGResponseBuilder.set... 
```

错误发生在第一行代码中。

这里是protobuf的定义（ofc我已经编译过了！编译的calss是App_getVGResponse）：

```
message GetVGResponse {

    message VG {
        optional string id = 1;
        optional string g_id = 2;
        optional int64 f_id = 3;
        optional string g_name = 4;
    }

    repeated VG v_gp = 1;
} 
```

这是我的堆栈跟踪的摘录

```
Exception in thread "main" com.google.protobuf.InvalidProtocolBufferException: **Protocol message tag had invalid wire type.**
    at com.google.protobuf.InvalidProtocolBufferException.invalidWireType(InvalidProtocolBufferException.java:78)
    at com.google.protobuf.UnknownFieldSet$Builder.mergeFieldFrom(UnknownFieldSet.java:498)
    at com.google.protobuf.GeneratedMessage$Builder.parseUnknownField(GeneratedMessage.java:439) 
```

并且在运行时调试器显示 ma 变量：

```
e
-> cause: IndexOutOfBoundsException (id=12291)
-> detaiMessage: Index: 0, Size: 0 (id=12324)
-> stackTrace null 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T02:59:22.733

我个人创建了“子构建器”，然后将其添加到父构建器。IE

```
 App_GetVGResponse.GetVGResponse.Builder bldr = App_GetVGResponse.GetVGResponse.newBuilder();
    App_GetVGResponse.GetVGResponse.VG.Builder childBldr = App_GetVGResponse.GetVGResponse.VG.newBuilder();

    childBldr.setId(value);
            ...........

    bldr.addVGp(childBldr); 
```

我认为错误是因为您在添加之前获得了“子”构建器

# c# - 协调 3 个列表的最佳算法

> ID：12955126
> 
> 赞同：0
> 
> 时间：2012-10-18T12:50:55.343
> 
> 标签：c#, .net, algorithm

我正在寻找一种方法来协调来自 3 个不同来源的元素。我已经将元素简化为只有一个键（字符串）和版本（长）。

这些列表是同时获得的（2 个来自单独的数据库查询，1 个来自另一个系统上的内存缓存）。

对于我的最终结果，我只关心所有 3 个来源中版本不同的元素。所以我关心的结果将是一个密钥列表，每个系统都有相应的版本。

```
Element1 | system1:v100    | system2:v100 | system3:v101 |
Element2 | system1:missing | system2:v200 | system3:v200 | 
```

并且可以丢弃具有相同版本的元素。

我想到的实现这一目标的两种方法是

1.  等待所有数据源完成检索，然后遍历每个列表以聚合一个主列表，其中包含一个键联合 + 所有 3 个版本（丢弃所有相同的项目）。

2.  检索完第一个列表后，将其放入并发集合中，例如字典（在 .net 4.0 中提供），并在剩余列表可用时立即开始聚合（到并发集合中）。

我的想法是第二种方法会快一点，但可能不会快很多。在所有 3 个来源都存在之前，我真的做不了太多，所以从第二种方法中获得的收益并不多，并且引入了争用。

也许还有另一种方法可以解决这个问题？此外，由于版本是使用 long 存储的，并且会有成千上万（可能是数百万）的元素，内存分配可能会引起关注（因为这些对象是短暂的，所以可能不是一个大问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:26:33.800

HashSet 是一个选项，因为它具有 Union 和 Intersect 方法

[HashSet.UnionWith 方法](http://msdn.microsoft.com/en-us/library/bb342097.aspx)

要使用它，您必须覆盖 Equals 和 GetHashCode。
一个好的（唯一的）散列是性能的关键。

如果版本都是 v 那么数字可以使用数字来构建缺少为 0 的散列。
有 Int32 可以玩，所以如果版本是 Int10 或更低可以创建完美的散列。

另一个选项是 ConcurrentDictionary（没有并发 HashSet），并且将所有三个输入都输入其中。
仍然需要重写 Equals 和 GetHashCode。
我的直觉是三个 HashSet，然后 Union 会更快。

如果所有版本都是数字的并且您可以使用 0 来表示缺失，那么可以将其打包到 UInt32 或 UInt64 中，然后直接将其放入 HashSet 中。在Union之后解压。使用位推 << 而不是数学来打包解包。

这只是两个 UInt16 但它在 2 秒内运行。
这将比散列类更快。

如果所有三个版本都很长，那么 HashSet`<integral type>`将不是一个选项。
长1 ^ 长2 ^ 长3；可能是一个很好的哈希，但这不是我的专长。
我知道元组上的 GetHashCode 很糟糕。

```
class Program
{
    static void Main(string[] args)
    {
        HashSetComposite hsc1 = new HashSetComposite();
        HashSetComposite hsc2 = new HashSetComposite();
        for (UInt16 i = 0; i < 100; i++)
        {
            for (UInt16 j = 0; j < 40000; j++)
            {
                hsc1.Add(i, j);
            }
            for (UInt16 j = 20000; j < 60000; j++)
            {
                hsc2.Add(i, j);
            }
        }
        Console.WriteLine(hsc1.Intersect(hsc2).Count().ToString());
        Console.WriteLine(hsc1.Union(hsc2).Count().ToString());
    }
}

public class HashSetComposite : HashSet<UInt32>
{
    public void Add(UInt16 u1, UInt16 u2)
    {      
        UInt32 unsignedKey = (((UInt32)u1) << 16) | u2;
        Add(unsignedKey);           
    }
    //left over notes from long
    //ulong unsignedKey = (long) key;
    //uint lowBits = (uint) (unsignedKey & 0xffffffffUL);
    //uint highBits = (uint) (unsignedKey >> 32);
    //int i1 = (int) highBits;
    //int i2 = (int) lowBits;
} 
```

使用 ConcurrentDictionary 进行测试，上面的速度是原来的两倍多。
在插入件上加锁是很昂贵的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:05:20.563

您的问题似乎适合基于事件的解决方案。基本上为每个来源的数据完成分配事件。保持一个类型为 的全局并发散列。在您的事件处理程序中检查已完成的数据源，如果您的并发哈希包含当前元素的键，则只需将其添加到列表中，如果不只是插入具有给定元素的新列表。

但是根据您的性能要求，这可能会使您的应用程序过于复杂。您的第一种方法将是最简单的方法。

# jenkins - 多配置作业 - 输出在哪里？

> ID：12955134
> 
> 赞同：8
> 
> 时间：2012-10-18T12:51:12.970
> 
> 标签：jenkins

我是詹金斯的新手，所以也许这是一个愚蠢的问题，但是......

我正在尝试编写一个在多个 UNIX 节点上编译我的代码的工作。我创建了一个多配置项目，并向其中添加了一个从属。

作业本身是一个外壳，只执行 'ls' 和 'pwd'

输出是：

```
Started by user anonymous
Building on master in workspace C:\Program Files (x86)\Jenkins\workspace\Unix-third-party
Triggering Linux64
Linux64 completed with result SUCCESS
Finished: SUCCESS 
```

但是我在任何地方都看不到表扬的输出。

当我将矩阵更改为使用节点而不是标签时，我设法查看了输出，但我仍然不确定我做了什么。

同一节点的自由样式项目可以正常工作。

我在哪里可以找到输出？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T19:34:34.087

在您的工作页面上，如果您只有一个节点/从站，您将看到一个名为“默认”的链接，如果您有多个节点，您将看到该节点的名称。

单击该链接，然后单击构建和控制台输出。

它的工作方式是：

```
 -----------------config 1 -> build #X -> console output
                                       /
Main Job build #X console output ---->
                                       \-----------------config 2 -> build #X -> console output 
```

您正在查看的是主要作业的控制台输出，但这仅包含触发信息。实际输出包含在 config 1 和 config 2 控制台输出中。

如果您需要进一步澄清，请发表评论，我很乐意提供帮助。顺便说一句，欢迎来到詹金斯的世界:-)

**==================================================== =========================**

**编辑**：

以下 URL 应将您带到您选择“标签”的构建的您的控制台输出：

*替换 <> 中的所有内容。*

```
http://<myserver>/job/<jobname>/label=<label>/<buildnumber>/console 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-30T00:16:22.853

不确定这是否会帮助您，但是在工作中查看我们的从属控制台，以下 URL 将起作用：

[https://ci.(company).com/job/QA/job/[项目名称]/13/script=loadtest1/console](https://ci.(company).com/job/QA/job/[projectname]/13/script=loadtest1/console)

我假设您的系统将是相似的。

或者，如果我去主要的 ci.(company).com/job/QA/job/[projectname]/ 我可以在左角看到最近的工作。

选择该特定作业后，屏幕底部是我们的配置，您可以选择该配置，然后可以查看该特定作业的控制台输出。

查看主 jenkins 作业不会从从站输出控制台日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-15T21:01:52.077

我今天遇到了这个问题，不确定是什么原因造成的，但我能够通过删除“C:\Program Files (x86)\詹金斯\工作\项目名称”。

显然，这也摆脱了您的构建历史，但我只需要再次运行配置。

# javascript - onChange 仅偶尔触发一次

> ID：12955136
> 
> 赞同：0
> 
> 时间：2012-10-18T12:51:13.037
> 
> 标签：javascript, jquery, onchange

我有以下问题：我有一个包含 2 个输入元素的表格。如果其中一个大于另一个，则应该根据比较对整行进行着色。我在加载网站时第一次触发了 onchange 事件。这些程序运行良好，但 onchange 事件仅在 4 次更改中的 1 次中触发。

表语句如下：

```
<div class="grid">
 <table id="table" class="tableRegion w100">
  <thead style="text-align:left">
   <tr>
    <fmt:bundle basename="res/web/ec_resources">
     <td class="tableHeader">
    ...
     </td> ...
    </fmt:bundle>
   </tr>
  </thead>      
  <tbody>
   <c:set var="i" value="0"/>
   <c:forEach var="participation" items="${someForm.list}">
     <tr id="participationRow${i}"> 
```

在这里，表格的代码 > tr > td：

```
<td class="right bottom nowrap">
 <div>
  <c:out value="${someForm.event.currency.code}"/>
  <fmt:formatNumber maxFractionDigits="2" minFractionDigits="2" var="ovFee" value="${overallFee}" />
  <c:if test="${someForm.array[i].feeDebit != 0.0}">
   <spring:input class="right debit" path="array[${i}].feeDebit" maxlength="7" size="6" onchange="isPaid(${i});" />
  </c:if><c:if test="${someForm.array[i].feeDebit == 0.0}">
   <spring:input class="right debit" path="array[${i}].feeDebit" maxlength="7" size="6" onchange="isPaid(${i});" value="${ovFee}"/>
  </c:if>
 </div>
</td>

<td class="right bottom nowrap">
 <div class="padT5"><c:out value="${someForm.event.currency.code}"/> <spring:input class="right paid" path="array[${i}].feePaid" maxlength="7" size="6" onchange="isPaid(${i});"/></div>
</td> 
```

被调用的脚本如下：

```
$(document).ready(function(){
    $('#table > tbody > tr').each(function(i) {
        var paid = parseFloat($(this).find('input.paid').val());
        var debit = parseFloat($(this).find('input.debit').val());
        if (paid == debit)
            $('#participationRow'+i).addClass("green");
        else if (paid > debit)
            $('#participationRow'+i).addClass("yellow");
        }
    );
});

function isPaid(i){
    var paid = parseFloat($('#participationRow'+i).find('input.paid').val());
    var debit = parseFloat($('#participationRow'+i).find('input.debit').val());
    if (paid == debit)
        $('#participationRow'+i).addClass("green");
    else if (paid > debit)
        $('#participationRow'+i).addClass("yellow");

} 
```

事件偶尔触发的原因是什么？我用 jQuery 和 onclick 进行了交叉检查。它们都只会偶尔触发一次。无论我是点击离开还是点击离开。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:06:34.900

当它应该运行时，您的代码缺少任何触发器定义。

第一部分（`.each()`块）仅在 上执行`$(document).ready();`，这意味着它在每次页面加载时执行一次（在文档完成加载后立即执行。）

该`isPaid()`函数只不过是一个函数，我看不到它在哪里被调用，因为它不存在于当前代码片段中。

您的代码本身似乎还可以，但它只是缺少任何形式的触发器。

你会期待这样的事情：

```
$("input").change(function() {

    var the_row = $(this).parent().parent(); //finds the <tr> it belongs to.
    var i = the_row.attr("id").replace("participationRow","");

    isPaid(i);
}); 
```

有一些方法可以改进这一点，但这是您的代码中缺少的关键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T08:39:22.260

```
 function highlightIfPaid(i){
        var paid = parseFloat($('#participationRow'+i).find('input.paid').val());
        var debit = parseFloat($('#participationRow'+i).find('input.debit').val());
        if (paid == debit)
            $('#participationRow'+i).addClass("green");
        else if (paid > debit)
            $('#participationRow'+i).addClass("yellow");
    }

    $(document).ready(function(){
        //just use jquery for binding to change event,
        //my guess is that Spring doesn't have a value for i at the point and jquery is not loaded by then so $ is undefined
        $('input.debit').change(function(){
            //you need to get the index i based on your table structure
            //I assumed this is just the index of the row
            //I get this method from this other post http://stackoverflow.com/questions/1620391/find-table-row-index-using-jquery
            var i = $(this).closest('tr').prevAll().length;
            highlightIfPaid(i);
        });

//Dry: highlight your rows on first load
$('#table > tbody > tr').each(highlightIfPaid);
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-19T09:22:29.403

好的...看了一会儿，在@kabaros und @Flater 的帮助下，我发现以下方法有效：

```
$(document).ready(function(){
 $('input.paid').change(function(){
  var i = $(this).closest('tr')[0].sectionRowIndex;
  isPaid(i);
 }); 
```

解决方案是`$('input.paid')`触发，而不是`$('input')`. 计算行数也不是那么容易，但上面的代码正确计算了行数。不幸的是`onchange`，在`input`-field 中只会偶尔触发一次！

# javascript - 需要 jQuery ui 选项卡的 iframe 替代品

> ID：12955140
> 
> 赞同：0
> 
> 时间：2012-10-18T12:51:15.127
> 
> 标签：javascript, jquery, html, ajax, jquery-tabs

我有一个使用 jQuery 选项卡的基于 Spring 的 Web 应用程序。

我建立了一个数据字符串（包含特定的）并附加到一个 URL

```
var hrefData = "?" + item1 + "&" + item2 + "&" + item3;
var href = "myURL";
href = href + hrefData; 
```

基本上我使用以下内容将 URL 加载到基于 jQuery 的选项卡中：

```
$( ui.panel ).append( '<iframe frameborder="0" style="border:0px" src="'+href+'" width="100%" height="100%"></iframe>'); 
```

我的 servlet 控制器接收到这个 URL，我从字符串和进程中获取参数，返回结果数据和页面，显示在上述 iframe 中。

我不想为此使用 iframe。有人可以建议替代解决方案或提供示例，以将 HTML 写入选项卡面板，或类似的东西。

谢谢

* * *

我也试过这个：

```
 $.get(href, function(data){
                alert("Data Loaded: " + data);
                $('ui.panel').append(data); // also tried .load(data);
            }); 
```

但这不起作用。

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:58:19.197

使用 jQuery load() 怎么样？

```
$('ui.panel').load(href); 
```

[http://api.jquery.com/load/](http://api.jquery.com/load/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:06:31.803

如何使用客户端模板（handlebars.js，但许多其他非常好的替代品）。

回复将是一个简单的 JSON 对象，该对象将映射到客户端模板（而不是 JSP 页面）。

# ruby - Nexpose XML 结果解析器中的 Ruby/Nokogiri 嵌套循环失败

> ID：12955144
> 
> 赞同：1
> 
> 时间：2012-10-18T12:51:22.537
> 
> 标签：ruby, xml, nokogiri

我正在尝试编写一个 ruby​​ 脚本来导出 Nexpose Simple XML 结果，对其进行解析，并将所需的结果写成更漂亮的格式以便于查看。我正在使用 Nokogiri 来解析 XML。我的问题是我有一个嵌套循环，对于每个设备，它遍历每个服务部分并从每个设备中提取名称、端口和协议属性。这最终将被打印回文本文件或 csv 文件。但是，我的嵌套循环似乎只从第一个服务部分中提取这三个属性并重复打印它们。

**示例输入（将有多个这些设备块）：**

```
<device address="10.x.x.1" id="20xx">
<fingerprint certainty="0.85">
<description>Microsoft Windows</description>
<vendor>Microsoft</vendor>
<family>Windows</family>
<product>Windows</product>
<version/>
<device-class>General</device-class>
<architecture/>
</fingerprint>
<vulnerabilities>
</vulnerabilities>
<services>
<service name="NTP" port="123" protocol="udp">
<vulnerabilities>
</vulnerabilities>
</service>
<service name="HTTP" port="8080" protocol="tcp">
<fingerprint certainty="0.75">
<description>Apache</description>
</device>

<device address="10.x.x.2" id="20xx">
<fingerprint certainty="0.85">
<description>Microsoft Windows</description>
<vendor>Microsoft</vendor>
<family>Windows</family>
<product>Windows</product>
<version/>
<device-class>General</device-class>
<architecture/>
</fingerprint>
<vulnerabilities>
</vulnerabilities>
<services>
<service name="DNS" port="53" protocol="udp">
<vulnerabilities>
</vulnerabilities>
</service>
<service name="HTTP" port="80" protocol="tcp">
<fingerprint certainty="0.75">
<description>Apache</description>
</device> 
```

**红宝石代码：**

```
#! /usr/bin/env ruby

require 'rubygems'
require 'nokogiri'

doc = Nokogiri::XML(open('report.xml').read)
device = doc.xpath('//device')

device.each do |d|
 service = d.xpath('//service')
 puts d.attr('address')

 service.each do |s|
   name = s.attr('name')
   port = s.attr('port')
   protocol = s.attr('protocol')

   puts port
   puts protocol
   puts name
 end
end 
```

**期望的输出：**

```
10.x.x.1
123
udp
NTP
8080
tcp
HTTP

10.x.x.2
53
udp
DNS
80
tcp
HTTP 
```

**实际输出：**

```
123
NTP
udp
123
NTP
udp 
```

因此代码应该显示每个设备的每个服务的服务端口、名称和协议的列表。但是，当前代码似乎只是一遍又一遍地打印第一个服务（即 123、NTP 和 udp）的集合。

我在循环的逻辑中遗漏了什么吗？或者你看到循环有什么问题吗？任何帮助使其工作都会有所帮助。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:27:22.013

请注意，XPath 构造意味着在文档中的*任何位置*`//`查找元素。您不想在内部循环中执行此操作，因为您已经为您的设备完成了此操作。

 ***更新**

根据新的输入文档，这是提取所需信息的一种方法。我冒昧地使用 CSV 来生成一个很好的 Excel 就绪输出文件。请注意，有一个*解析*循环。代码：

```
require 'nokogiri'
require 'csv'

doc = Nokogiri::XML(open('report.xml').read)

CSV.open("devices.csv", "wb") do |csv|
  csv << ["Device", "Service", "Port", "Protocol"]
  doc.search('//service').each do |s|
    device = s.xpath('ancestor::device[1]/@address')
    name = s.attr('name')
    port = s.attr('port')
    protocol = s.attr('protocol')
    csv << [device, name, port, protocol]
  end
end 
```

以下是 的内容`devices.csv`：

```
Device,Service,Port,Protocol
10.x.x.1,NTP,123,udp
10.x.x.1,HTTP,8080,tcp
10.x.x.2,DNS,53,udp
10.x.x.2,HTTP,80,tcp 
```*

# php - 将整数分配为变量

> ID：12955152
> 
> 赞同：2
> 
> 时间：2012-10-18T12:51:47.420
> 
> 标签：php, mysql

我知道的通用主题。很难在一个主题中具体。无论如何，我对这个 sql 逻辑有疑问：

```
"SELECT * FROM imagecomment WHERE filename = :filename ORDER BY comment_timestamp DESC LIMIT '$min', '$max'"; 
```

当我尝试相同的逻辑但直接在 sql 逻辑中使用整数时，它可以工作。变量 min 和 max 是整数：

int(10) int(20) 我在 var_dump() 时得到这个。我还尝试将变量（就像我通常做的那样）绑定到两个参数，但它仍然不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T12:59:38.547

您在 PDOStatement 中使用它，对吗？（因为您使用的是：文件名）

`$db = new PDO(); //assume you have this set`

 ````
$stmt = $db->prepare(
         "SELECT * 
          FROM imagecomment 
          WHERE filename = :filename 
          ORDER BY comment_timestamp 
          DESC LIMIT :min, :max";

$stmt->bindValue(':filename', $filename);
$stmt->bindValue(':min', $min);
$stmt->bindValue(':max', $max);

$stmt->execute(); 
````  `你应该能够获取你的结果，如果这不起作用，让我知道你从 PDOStatement 得到什么错误。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T12:57:08.307

```
 "SELECT * FROM imagecomment
 WHERE filename = :filename ORDER BY comment_timestamp DESC LIMIT $min, $max"; 
````

# ios - ios cocos2d如何创建瓦片地图属性

> ID：12955153
> 
> 赞同：1
> 
> 时间：2012-10-18T12:51:48.257
> 
> 标签：ios, cocos2d-iphone, tile

[我从http://www.raywenderlich.com/4970/how-to-implement-a-pathfinding-with-cocos2d-tutorial](http://www.raywenderlich.com/4970/how-to-implement-a-pathfinding-with-cocos2d-tutorial)下载了 CatMaze 示例项目。

CatMaze.tmx 文件有以下内容..

```
<tile id="0">
   <properties>
    <property name="Bone" value="1"/>
   </properties>
  </tile>
  <tile id="1">
   <properties>
    <property name="Multibone" value="1"/>
   </properties>
  </tile> 
```

我尝试使用地图编辑器应用程序创建类似的属性，但我无法弄清楚。如何创建新的图块和属性？谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T12:54:25.827

在[平铺地图编辑器](http://www.mapeditor.org)中，您几乎可以右键单击任何内容。瓦片集中的瓦片、图层、对象等。上下文菜单为您提供编辑属性的选项。

![在此处输入图像描述](../Images/4f5216a90cc03a7b3171cc940956d25b.png)

唯一的例外是地图属性，它们可以通过**地图 -> 地图属性**菜单进行编辑。

**更新：**即将推出的 Tiled（v0.91 或更高版本）的属性将始终在“侧边栏”中可见。查看每日构建，它极大地简化了对属性的处理。

# javascript - NodeJS 读取并解析每一行标准输出

> ID：12955154
> 
> 赞同：7
> 
> 时间：2012-10-18T12:51:49.120
> 
> 标签：javascript, node.js

我有一个 NodeJS 脚本，它是一个子进程来捕获文件的 cat 转储：

```
var exec = require('child_process').exec;
var result = '';
var child = exec('./scripts/first.sh',function(err, stdout, stderr) {
    result = stdout.split("=");
}); 
```

如果文件不存在，我会转储另一个文件：

```
var result = '';
var child = exec('./scripts/first.sh',function(err, stdout, stderr) {
    result = stdout.split("=");
    if(stdout.indexOf('No such file or directory') != -1){
        var child = exec('./scripts/second.sh', function(err, stdout, stderr) {
            result = stdout.split("=");
    });
}); 
```

最后我记录结果变量的值：

```
console.log(result); 
```

这些文件将具有如下所述的数据：

```
line_1 = 7888
line_2 = 8998
line_3 = 9090
line_4 = 9097 
```

我需要解析和提取 line_1 和 line_3 的值吗？

结果变量不显示任何值。我的想法是在字符串变量中获取标准输出数据并使用一些搜索机制。

虽然我不确定这种方法，因为我对 JS / NodeJS 没有太多经验。

==编辑==

请找到我编写的函数的副本。

```
var exec = require('child_process').exec;

function getdetail() {
        var result = '';
        var child = exec('./scripts/first.sh', function(err, stdout, stderr) {
                if(stdout.indexOf('No such file or directory') != -1){
                        var child = exec('./scripts/second.sh',function(err, stdout, stderr) {
                        result = stdout.toString().split("=");
                        console.log(result);
                        });
                }
                else
                {
                        result = stdout.toString().split("=");
                        console.log(result);
                }
        });
} 
```

stdout 流对象上的 tostring() 起到了作用，但我得到了控制台日志，如下所述：

```
[ 'spawn ssh -o UserKnownHostsFile',
  '/dev/null -o StrictHostKeyChecking',
  'no user@www.mybox.com cat ver.txt\r\nWarning: Permanently added \'www.mybox.com,XX.XX.XX.XX\' (RSA) to the list of known hosts.\r\r\nuser@www.mybox.com\'s password: \r\line_1',
  '9400\r\nline_2',
  '3508\r\nline_3',
  '77f3\r\nline_4',
  '/tmp\r\nline_5',
  '/tmp/ramdisk/\r\nline_5',
  '77f3\r\n' ] 
```

如何提取 line_1 和 line_3 的值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T13:38:22.643

**`exec`是异步的。**因此，如果您编写如下内容：

```
var result = '';
var child = exec('...'), function() { result = 'abc'; } );
console.log(result); 
```

然后`result`可能是空的，因为`console.log(result)`can 并且经常会在 exec 返回其回调并填充新值之前执行。

要解决此问题，您需要在 exec 的回调函数中异步处理结果。

此外，我不确定您检查错误的方式是否是最好的。`err`您可以简单地测试是否具有非空值，而不是检查“没有这样的文件或目录” ：

```
if(err) { 
```

综上所述，我们最终得到以下代码：

```
var exec = require('child_process').exec;

var result = '';
var processResult = function(stdout) {
    var result = stdout.split("=");
    console.log(result);
};

var child = exec('./scripts/first.sh',function(err, stdout, stderr) {
    if(err) {
        var child = exec('./scripts/second.sh', function(err, stdout, stderr) {                         
            processResult(stdout);
        });
    } else {            
        processResult(stdout);
    }
}); 
```

如果您需要进一步处理标准输出数据，则需要对其进行迭代以找出所有可能出现的包含“key=value”的字符串。这是一个粗略的想法：

```
var processResult = function(stdout) {  
    var lines = stdout.toString().split('\n');
    var results = new Array();
    lines.forEach(function(line) {
        var parts = line.split('=');
        results[parts[0]] = parts[1];
    });

    console.log(results);
}; 
```

我希望这能让你开始。

# c - 如何在c中获取bmp图像的像素数据

> ID：12955162
> 
> 赞同：3
> 
> 时间：2012-10-18T12:52:07.403
> 
> 标签：c, bmp

你如何在C中获取bmp图像的像素数据？

我可以读取图像的结构，但有没有办法显示像素数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:06:40.383

在我看来，使用 C 而不是 C++ 的最简单方法是使用[OpenCV](http://opencv.willowgarage.com/wiki/)。该库包含一个 C API，可以让您的生活更轻松。您可以在文档中查看更多详细信息，但您执行此类简单任务的代码将类似于以下代码：

```
IplImage* img = 0; 
uchar *data;

// load an image  
img=cvLoadImage("filename.bmp");
if(!img)
{
   printf("Could not load image file: %s\n",argv[1]);
   exit(0);
}

// create a window
cvNamedWindow("mainWin", CV_WINDOW_AUTOSIZE); 
cvMoveWindow("mainWin", 100, 100);

// show the image
while(1)
{
   cvShowImage("mainWin", img );
   if(cvWaitKey(30) > 0)
   break;
}

// release the image
cvReleaseImage(&img); 
```

# c - MS-DOS 的套接字库（C 语言）

> ID：12955167
> 
> 赞同：3
> 
> 时间：2012-10-18T12:52:26.743
> 
> 标签：c, api, sockets, dos

我需要使用 C 语言为 MS-DOS 编写客户端和服务器应用程序。
我不想从头开始并实现套接字。
你能告诉我在哪个库中实现了套接字功能并且存在好的手册和示例。

我已经尝试过 mTCP 库：我从中获取了源文件，从示例文件中添加了源并尝试在 Turbo C 中编译，但是它引发了很多错误，这对我来说处理它们将是一项非常艰巨的任务。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T16:12:30.840

There is also WATTCP: [http://www.erickengelke.com/wattcp/](http://www.erickengelke.com/wattcp/)

Have you tried that?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:21:17.277

试试 libnet。根据它的网页（http://libnet.sourceforge.net/），它支持 DOS 系统（djgpp 编译器），虽然我个人没有在 DOS 上尝试过。

# javascript - 无法到达嵌套 使用 jquery 逐类元素

> ID：12955174
> 
> 赞同：1
> 
> 时间：2012-10-18T12:52:34.220
> 
> 标签：javascript, jquery

我正在尝试（没有成功）在 div 中使用“remove”类访问并隐藏所有嵌套元素

这是附加元素的代码片段

```
$('<li id="com'+msg[key]['id']+'"></li>').prependTo('.mCSB_container').html('<div class="acomments"> <img src="'+url_Avatar+'" alt="Avatar fotomontaggio" /></div><div class="tcomments"><h1>'+nome+'</h1><p class="text">'+commento+'</p><p class="differenza">'+dif+'</p>**<p class="remove" id="r'+msg[key]['id']+'">rimuovi commento</p></div>'); 
```

这是试图隐藏这些元素的脚本

```
$(document).ready(function() { $('.remove').hide();}); 
```

有人可以帮我吗？我无法摆脱这个...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T12:56:40.053

假设你有

```
$(function() {
    ...
    $('<li id="com'+msg[key]['id']+'"></li>').prependTo('.mCSB_container').html('<div class="acomments"> <img src="'+url_Avatar+'" alt="Avatar fotomontaggio" /></div><div class="tcomments"><h1>'+nome+'</h1><p class="text">'+commento+'</p><p class="differenza">'+dif+'</p>**<p class="remove" id="r'+msg[key]['id']+'">rimuovi commento</p></div>');

    ...
});

$(document).ready(function() { $('.remove').hide();}); 
```

隐藏代码在添加之前运行（在加载之前准备好）。这意味着它什么也没有隐藏。

解决方案是确保在创建元素后执行隐藏代码：

```
$(function() {
    ...
    $('<li id="com'+msg[key]['id']+'"></li>').prependTo('.mCSB_container').html('<div class="acomments"> <img src="'+url_Avatar+'" alt="Avatar fotomontaggio" /></div><div class="tcomments"><h1>'+nome+'</h1><p class="text">'+commento+'</p><p class="differenza">'+dif+'</p>**<p class="remove" id="r'+msg[key]['id']+'">rimuovi commento</p></div>');

    ...
    $('.remove').hide();
}); 
```

# django - 如何创建一个存储给定模型的所有实例的自更新 django 字段？

> ID：12955176
> 
> 赞同：0
> 
> 时间：2012-10-18T12:52:40.570
> 
> 标签：django, django-models

假设我有以下模型：

```
class Cow (models.Model):
    name = models.CharField(max_length=100)
    color = models.CharField(max_length=100, default="brown") 
```

在我们的农场，我们有很多奶牛。通常情况下，农民会按规定的批次将奶牛带到兽医处：

```
class Cow_Batch(models.Model):
    batch_name = models.CharField(max_length=100)
    cows = models.ManyToManyField(Cow) 
```

在我们的管理中，我们可以创建一个 Cow_Batch，让我们的农民可以轻松地将 Daisy 和 Debbie（两个患有类似疾病的姐妹）一起带到兽医那里。

我希望能够将“全部”作为 Cow_Batch。这很容易填充我自己，但我希望“所有”的内容在新奶牛添加到牛群时自动更新。最终目的是能够使用：

```
class Vet_Visit(models.Model):
    cows_brought_to_vet = models.ForeignKey(Cow_Batch) 
```

并且将“全部”作为有效的可能性，等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:59:16.627

我认为您可以将[django post_save 信号](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)用于`Cow`模型。在`Cow`添加 new 时的信号处理程序中，将其添加到*all* `Cow_Batch`。

[Django 信号](https://docs.djangoproject.com/en/dev/topics/signals/)

# actionscript-3 - as3 - flvplayback 组件 - 禁用自动缓冲区？

> ID：12955177
> 
> 赞同：0
> 
> 时间：2012-10-18T12:52:42.530
> 
> 标签：actionscript-3, flv, playback

我在 AS3 影片剪辑中使用 flvplayback 组件。我确实在 Amazon s3 上托管的视频的组件属性中定义了源。

现在的问题是，一旦 swf 在浏览器中加载，它就会开始下载/缓冲视频，即使它没有设置为自动播放。

是否可以仅在单击播放按钮时才开始下载（我确实有一个自定义播放按钮通过 AS3 连接到播放器）？我在 swf 中有 3 个独立的视频播放器，每个播放器都有相当大的视频，我真的不想消耗大量带宽，特别是如果用户只播放一个视频。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:22:20.380

我没有使用 flvplayback 组件，但我假设只要你指定一个 url，它就会开始下载。尝试在与之交互之前不要设置它，或者 - 做其他人所做的 - 在顶部放置一个可点击的图像，然后一旦完成，创建您的视频播放器。

# c# - C# Visual Studio GUI 设计

> ID：12955178
> 
> 赞同：1
> 
> 时间：2012-10-18T12:52:44.563
> 
> 标签：c#, user-interface, visual-studio-2012

我在 Visual Studio 中创建了一个带有漂亮功能区的 gui。现在我想用不同的面板填充主表单。我可以只使用面板，将所有项目放在上面，并在需要时将它们调用到前面。这将解决我的问题。编程时实际上很难维护这些面板。我想知道，是否有一个很好的选择来创建可以轻松维护的彼此上方的面板？

提前致谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:00:38.167

`Form.MdiParent` 您可以使用属性 来实现这一点。
您可以点击以下链接了解更多信息。

[http://msdn.microsoft.com/en-us/library/d4dabts7%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/d4dabts7%28v=vs.80%29.aspx)
[http://www.codeproject.com/Articles/3553/Introduction-to-MDI-Forms-with -C](http://www.codeproject.com/Articles/3553/Introduction-to-MDI-Forms-with-C)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:00:30.980

一种选择是将每个面板创建为单独的用户控件。这样您就可以在设计时轻松查看内容，而不必一直放在前面。

# android - Android - 一个选项卡中的多个片段

> ID：12955181
> 
> 赞同：3
> 
> 时间：2012-10-18T12:52:50.897
> 
> 标签：android, tabs, android-fragments, fragment

我在网上搜索了很多关于在一个操作栏选项卡中包含多个片段的可能性。

[这个问题](https://stackoverflow.com/questions/9216108/actionbar-tabs-with-multiple-fragments)最接近我的需求，但代码不起作用。

是否有另一种可能在一个选项卡中包含多个片段？

* * *

这是`StartActivity`

```
public class StartActivity extends FragmentActivity implements ActionBar.TabListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_start);

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        actionBar.addTab(
              actionBar.newTab()
             .setText("Karte")
              .setTabListener(new MapFragmentListener(this)));

    } 
```

相应的布局`acticity_start`包含两个框架布局，用于将放置在选项卡中的两个片段。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >  

    <FrameLayout
        android:id="@+id/fragment_map"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>
    <FrameLayout
        android:id="@+id/fragment_realtime"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"/>

</LinearLayout> 
```

`TabListener`看起来像这样：

```
private class TabListener implements ActionBar.TabListener {

        private static final String fragment1_tag = "fragment1_tag";
        private static final String fragment2_tag = "fragment2_tag";

        private FragmentActivity activity;
        private RealtimeFragment fragment1;
        private RealtimeFragment fragment2;

        public TabListener(FragmentActivity activity) {

            this.activity = activity;

            android.support.v4.app.FragmentTransaction ft = activity.getSupportFragmentManager().beginTransaction();

            fragment1 = (RealtimeFragment) activity.getSupportFragmentManager().findFragmentByTag(fragment1_tag);
            if (fragment1 != null && !fragment1.isDetached()) {
                ft.detach(fragment1);
            }

            fragment2 = (RealtimeFragment) activity.getSupportFragmentManager().findFragmentByTag(fragment2_tag);
            if (fragment2 != null && !fragment2.isDetached()) {
                ft.detach(fragment2);
            }

            ft.commit();
        }

        @Override
        public void onTabReselected(Tab tab, FragmentTransaction ft) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onTabSelected(Tab tab, FragmentTransaction ft) {

            android.support.v4.app.FragmentTransaction fragmentTransaction = activity.getSupportFragmentManager().beginTransaction();

            if(fragment1 == null) {
                fragment1 = new RealtimeFragment();
                fragmentTransaction.add(R.id.fragment_map, fragment1, fragment1_tag);
            } else {
                fragmentTransaction.attach(fragment1);
            }

            if(fragment2 == null) {
                fragment2 = new RealtimeFragment();
                fragmentTransaction.add(R.id.fragment_realtime, fragment2, fragment2_tag);
            } else {
                fragmentTransaction.attach(fragment2);
            }

            fragmentTransaction.commit();

        }

        @Override
        public void onTabUnselected(Tab tab, FragmentTransaction ft) {

            android.support.v4.app.FragmentTransaction fragementTransaction = activity.getSupportFragmentManager().beginTransaction();

            if(fragment1_tag != null)
                fragementTransaction.detach(fragment1);
            if(fragment2 != null)
                fragementTransaction.detach(fragment2);

            fragementTransaction.commit();

        }

    } 
```

类`RealtimeFragment`和相应的布局`fragment_realtime`如下所示：

```
public class RealtimeFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
         View view = inflater.inflate(R.layout.fragment_realtime, container, false);
        return view;
    }
}

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

`RealtimeFragment`现在在一个选项卡中应该显示该类的两个片段。片段只显示一个按钮，但没有显示！为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T07:25:48.007

I was looking for a solution to the same Topic, and found this, which comes in quite handy.

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="horizontal"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <fragment android:name="com.example.news.ArticleListFragment"
            android:id="@+id/list"
            android:layout_weight="1"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
    <fragment android:name="com.example.news.ArticleReaderFragment"
            android:id="@+id/viewer"
            android:layout_weight="2"
            android:layout_width="0dp"
            android:layout_height="match_parent" />
</LinearLayout> 
```

so Reference your Fragments and inflate it, just like a normal Fragment

# c - 不同上下文中char数组的内存分配

> ID：12955186
> 
> 赞同：-2
> 
> 时间：2012-10-18T12:52:55.703
> 
> 标签：c, memory, memory-management, memory-leaks

假设我有一个结构：

```
typedef struct {
    int number1;  /* dummy */
    int number2;  /* dummy */
    int number3;  /* dummy */
    char *name1;
    char name2[];
} Klass; 
```

其余的代码是：

```
int main(int argc, char const *argv[])
{
    char *name1 = "this is a name";            /* 1st case */
    char name2[] = "this is also a name";      /* 2nd case */

    Klass k;
    k.number1 = 10;
    k.number2 = 20;
    k.number3 = 30;
    k.name1 = "this is my first name";         /* 3rd case */

    /* error: invalid use of flexible array member */
    k.name2 = "this is my second name";

    Klass *kp = (Klass*)malloc(sizeof(Klass));
    kp->number1 = 100;
    kp->number2 = 200;
    kp->number3 = 300;
    kp->name1 = "this is also my first name";  /* 4th case */

    /* error: invalid use of flexible array member */
    kp->name2 = "this is my second name";

    return 0;
} 
```

1.  谁能为我澄清在标记的情况下如何分配内存（堆与堆栈）？
~~*   ~~我应该如何在主块的末尾释放内存？~~~~*   ~~编译器给出的原因是`error: invalid use of flexible array member`什么？~~~~~~

 ~~~~**编辑** 如果你说`k.name = "this is my name";`并且`kp->name = "this is also my name";`在堆栈上，你能解释一下我是如何达到`"this is my name"`这样的：

```
Klass *kp;

int foo() {
    Klass k;
    k.number1 = 10;
    k.number2 = 20;
    k.number3 = 30;
    k.name = "this is my name";
    kp = &k;
} // k is destroyed now

int main(int argc, char const *argv[])
{
    kp = (Klass*)malloc(sizeof(Klass));
    foo();
    printf("%d\n", kp->number1); /* segfault */
    printf("%d\n", kp->number2); /* segfault */
    printf("%d\n", kp->number3); /* segfault */
    printf("%s\n", kp->name);    /* prints "this is my name" */
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:57:21.947

灵活长度的数组主要用于指针。

```
Klass *kp = malloc( sizeof(Klass) + 100 ); 
```

这 100 个字节是可以通过`name2`成员访问的额外字节。通常结构中有一个成员用于存储灵活的零件尺寸。

释放此内存与用于常规结构的内存没有任何不同。

编译器抱怨的原因是它仍然是一个数组（不是指针），你不能简单地分配数组。当您访问时，`kp->name2`不会引入额外的间接（与 when`name2`是指针的情况不同）。

至于内存分配：

1)`name1`是指向存储字符串文字的某个内存区域（很可能是只读内存）的指针（包含以 0 结尾的 char 数组的字节）。尝试修改`name1`指向 的字符串会导致未定义的行为（不允许修改字符串文字）。

2)`name2`是一个数组，它在堆栈上。您可以自由修改其内容。将字符串文字放入此数组的初始化代码在不同的平台和编译器之间可能会有所不同。我什至看到过反汇编，其中字符串文字位于只读内存区域（.rodata）中，它只是`memcpy`'ed到'name2。

3) 和 4) 是分配给非法数组的尝试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T12:59:15.940

1.  1.  字符串的内存位于一个静态区域，这是所有字符串常量所在的位置。`name1`只是指向该区域的指针。
    2.  内存具有自动存储（“在堆栈上”）。
    3.  与案例 1 相同。
2.  是的，因为你已经打电话给`malloc`. 每个都`malloc`必须通过调用来反映`free`。

3.  在`Klass`中，该成员`name2`是一个[灵活的数组成员](http://gustedt.wordpress.com/2011/03/14/flexible-array-member/)，编译器不知道其大小（顺便说一句，您没有在`malloc`调用中分配任何内存）。此外，您不能直接在 C 中复制数组；如果你分配了足够的内存，你可以使用`memcpy`or `strcpy`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T12:59:32.583

```
char *name1 = "this is a name";            /* 1st case */ 
```

这只是分配一个指针，将其设置为指向字符串（作为静态数据保存）。

```
char name2[] = "this is also a name";      /* 2nd case */ 
```

这是字符串的缩写，`char name2[sizeof(init_string)] = "this is also a name";`并分配了足够的空间来存储字符串中的字符。

你的第三个案例

```
char name2[]; 
```

根本不分配空间！没有地方可以存储字符串（无论如何都必须使用它来复制`strcpy`）。

第四种情况

```
kp->name1 = "this is also my first name";  /* 4th case */ 
```

类似于案例 1 -`name1`是设置为指向静态文本的指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T12:57:11.333

你应该自己释放内存的唯一时刻是当你来 (m)alloc 一些东西，或者调用一个这样做的函数( `strdup()`, ...)

如果 1,3 和 4 您在堆栈上分配字符串，则当您退出函数时，这些字符串将不可用。第二种情况有点棘手，但是这个字符串在可执行文件中是硬编码的，你不能修改它（如果你尝试这样做，你会遇到分段错误）。

你不能让 name2 指向一个字符串，因为 name2 不是一个指针，而是一个数组。~~~~

# java - 使用 Java 将 MySql 字符串 ISO-8859-1 转换为 UTF-8

> ID：12955187
> 
> 赞同：0
> 
> 时间：2012-10-18T12:52:58.340
> 
> 标签：java, mysql, utf-8, iso-8859-1

在 MySql 数据库中，我有一列包含`varchar`用 ISO-8859-1 (latin1_swedish_ci) 编码的字符串。

当字符串不是`latin1`MySql 存储时，例如，为`"à¸à¸µà¹à¸à¸."`

使用 Java 我需要提取它并将其转换为 UTF-8。

你知道我该怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:55:29.620

你的意思是像...

```
byte[] inIso_8859_1 = "à¸à¸µà¹à¸à¸.".getBytes("ISO-8859-1");
byte[] inUtf_8 = new String(inIso_8859_1, "ISO-8859-1").getBytes("UTF-8"); 
```

检查 UTF-8 编码字节

```
String s = new String(inUtf_8, "UTF-8");
System.out.println(s); 
```

印刷

```
à¸à¸µà¹à¸à¸. 
```

# html - 固定位置会降低文档高度吗？

> ID：12955192
> 
> 赞同：1
> 
> 时间：2012-10-18T12:53:14.283
> 
> 标签：html, css

我真的很困惑。在这里，我有一个**div**，它的**位置**应该在**某些 scroll**之后**固定**。**在**该 div 的位置是**absolute**之前。我试过了，发现对于我的一个屏幕固定位置确实减少了文档，而在其他屏幕上却不是。

 ******我想知道的是其中哪个是错误？元素的**固定位置会****降低**文档**高度**吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T12:57:30.247

如果您对元素使用固定定位，则会将其从“正常布局流程”中移除。文档的高度由页面中所有元素的定位决定，**因此，定位的所有更改都会影响文档高度**。

固定和绝对定位在 CSS 视觉格式化模型规范中有详细解释：http: [//www.w3.org/TR/CSS2/visuren.html#absolute-positioning](http://www.w3.org/TR/CSS2/visuren.html#absolute-positioning)

关于绝对定位（来自规范）：

> 在绝对定位模型中，一个盒子相对于它的包含块显式地偏移。它完全从正常流程中移除（它对后来的兄弟姐妹没有影响）。

几乎同样适用于固定定位（同上）：

> 固定定位是绝对定位的一个子类别。唯一的区别是对于一个固定定位的盒子，包含块是由视口建立的。******

# asp.net - 在 Web 表单中模拟大视图状态（用于演示目的）

> ID：12955195
> 
> 赞同：0
> 
> 时间：2012-10-18T12:53:27.683
> 
> 标签：asp.net, webforms

我将为一些从未使用过 jQuery 的人展示回发和 jQuery ajax 调用之间的区别。

当我创建一个新的 webforms 项目时，几乎不会注意到回发。您对如何模拟具有巨大视图的慢速页面有任何建议吗？或者任何其他可以显示 AJAX 调用强度与将整个页面（表单）发布回服务器的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T12:57:53.163

在 GridView 上启用 ViewState 并一次绑定数千条记录。这将创建数量惊人的 ViewState。如果这还不够，只需获取一个巨大的 DataTable 并将其保存在 ViewState 中。就像是：

```
DataTable dt = GetDataTableWithThousandsOfRows();
ViewState["Data"] = dt; 
```

现在查看页面渲染时的 ViewState。

# c# - 访问文件夹时权限错误

> ID：12955196
> 
> 赞同：0
> 
> 时间：2012-10-18T12:53:31.023
> 
> 标签：c#, web-services

我创建了一个 Web 服务来获取在指定文件夹中找到的所有文件，例如 C:/Incoming/20121018 并将它们作为附件通过电子邮件发送到我指定的电子邮件地址。

我可以成功发送带有一个附件的邮件，但我想我会通过一个数组传递几个文件以作为附件发送。唯一的问题是，当我尝试读取包含文件的文件夹时，即使我拥有该文件夹的权限，我也会收到权限错误。知道我要去哪里错了吗？

请参阅下面的代码：

```
[WebMethod]
    public string Sending_Email(string strEmailAddrFrom, string[] strEmailAddrTo, int intTotalEmailTo, string [] strAttachement)
    {
        DateTime LeadDate;

        LeadDate = DateTime.Now.Date;
        string Year = Convert.ToString(LeadDate.Year);
        string Month = Convert.ToString(LeadDate.Month);
        string Day = Convert.ToString(LeadDate.Day);
        string[] arr1 = new string[150];
        string Loc = "C:\\Incoming\\" + "" + Year + "" + Month + "" + Day + "";

        StreamReader reader = File.OpenText(Loc);
        string contents = reader.ReadToEnd();
        reader.Close();

        DirectoryInfo di = new DirectoryInfo(Loc);
        FileInfo[] fileList = di.GetFiles(".*.");
        int count = 0;
        foreach (FileInfo fi in fileList)
        {
            arr1[count] = fi.Name;
        }

        EmailAlert NewMail = new EmailAlert();
        return NewMail.EmailSent(strEmailAddrFrom, strEmailAddrTo, intTotalEmailTo, arr1);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:35:44.157

您的错误在于您试图将文件夹作为流打开，这是不正确的方法。

```
StreamReader reader = File.OpenText(Loc);
string contents = reader.ReadToEnd();
reader.Close(); 
```

# database - 电影数据库关系

> ID：12955198
> 
> 赞同：0
> 
> 时间：2012-10-18T12:53:38.287
> 
> 标签：database, database-design, oracle11g, relationship, rdbms

我正在设计一个存储电影相关信息的数据库。我被困在一个问题上，似乎不知道如何解决它。

所以我正在创建一个存储电影的数据库，对于我的电影表，这些是它的属性

```
-movieID NUMBER PRIMARY KEY,
-title VARCHAR(10),
-genres genre_varray,
-producers
-director
-cast 
```

我将为制片人、演员和导演创建另一个表格。我的问题是对于现场制作人和演员我必须插入一个人员列表和演员我必须为每个演员添加一个角色，我不知道我会怎么做，我正在考虑使用嵌套表？另一个问题是，一个人可以是演员、导演、制片人或所有。

到目前为止我所拥有的是

```
supertype person_type - personID, name, sex
subtype actor_type - country
subtype director_type - country
subtype producer_type - company
table of people of type person_type
table of movie_people - profession 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T12:57:10.933

任何人都可以在一部电影中扮演一个或多个角色，不同的电影所扮演的角色会有所不同。

我将有一张人员表、一张电影表、一张角色类型表（例如：演员、导演、制片人等），以及一张将所有三者与（PersonID、MovieID、RoleID）字段链接的表

我还将为 MovieGenres 提供一个单独的表，而不是您详细说明的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:19:34.607

总共需要六个表：

```
GENRES
GenreID
GenreName

ROLES
RoleID
RoleName  

PEOPLE
PersonID
PersonName

MOVIES
MovieID
MovieName
MovieYear

CASTLIST
CastID
MovieID
PersonID
RoleID 

MOVIEGENRE
MovieID
GenreID 
```

一个人可以以多个角色出现在电影的演员表中，这就是为什么我给表指定了代理 ID。否则，您将需要一个由所有三个外键组成的主键（并且假设您只想列出一个扮演三个不同角色的人 - 查看 Strangelove 博士）。

编辑以包括 MovieGenre 表。

# java - 内部类中的休眠会话

> ID：12955201
> 
> 赞同：6
> 
> 时间：2012-10-18T12:53:42.957
> 
> 标签：java, spring, hibernate, annotations, inner-classes

我在使用春季会话工厂在休眠中获取匿名内部类的会话时遇到问题。这是代码：

```
public class DomainDaoImpl extends BasicDaoImpl<Domain> implements Iterable<Collection<Domain>> {

...

@Override
public Iterator<Collection<Domain>> iterator() {
    return (new Iterator<Collection<Domain>>() {
        private int counter = 0;
        public static final int LIMIT = 100;

        ...

        @Override
        @Transactional(readOnly = true)
        public Collection<Domain> next() {
            final Criteria criteria = getCurrentSession().createCriteria(Domain.class);
            final LinkedHashSet<Domain> result = new LinkedHashSet<Domain>();

            List resultList = null;
            while (!(resultList = criteria.list()).isEmpty()) {
                criteria.setFirstResult((counter++ * LIMIT) + 1);
                criteria.setMaxResults(LIMIT);
                result.addAll(resultList);
            }
            return result;
        }

        ...
    }); 
```

问题是*org.hibernate.HibernateException: No Session found for current thread* 这通常发生在 DAO 方法不在事务中时。那么如何使它与内部类一起工作呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:22:12.533

我认为`@Transactional(readOnly = true)`在内部类级别定义，spring 将无法检测和应用事务方面。所以它肯定不会工作。

但我认为如果您编写类似下面的内容可能无法 100% 确定（我怀疑一旦您调用迭代器方法，事务就关闭了）

```
@Override
@Transactional(readOnly = true)
public Iterator<Collection<Domain>> iterator() {
...
} 
```

另一个选项可以让调用者负责事务或编写包装器方法`iterator()`并将`getAllDomain()`事务应用于该方法。

有效的解决方案（在评论中提到）

> 可能你可以在 getCurrentSession() 中做一些补丁，比如 sessionFactory 中的 getCurrentSession() 如果不可用，然后使用 openSession()，当然如果新会话打开，你必须手动关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T19:17:21.490

您可以配置加载时方面编织

这是如何做到这一点的基本示例

**春天上下文**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:jdbc="http://www.springframework.org/schema/jdbc"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd http://www.springframework.org/schema/jdbc http://www.springframework.org/schema/jdbc/spring-jdbc.xsd">

    <context:component-scan base-package="org.foo.bar" />
    <context:annotation-config />
    <context:load-time-weaver />

    <tx:annotation-driven mode="aspectj" proxy-target-class="true"/>

    <jdbc:embedded-database id="dataSource">
        <jdbc:script location="classpath:schema.sql"/>
    </jdbc:embedded-database>

    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource"/>
        <property name="annotatedClasses">
            <list>
                <value>org.foo.bar.MyEntity</value>
            </list>
        </property>
    </bean>

    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory"/>
    </bean>

</beans> 
```

* * *

**实体类**

包 org.foo.bar；

```
import javax.persistence.Entity;
import javax.persistence.Id;
import javax.persistence.Table;

@Entity
@Table(name = "ENTITY")
public class MyEntity {

    @Id
    private long id;
    private String name;

    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    @Override
    public String toString() {
        final StringBuilder sb = new StringBuilder();
        sb.append("MyEntity");
        sb.append("{id=").append(id);
        sb.append(", name='").append(name).append('\'');
        sb.append('}');
        return sb.toString();
    }
} 
```

* * *

**道类**

包 org.foo.bar；

```
import org.hibernate.Criteria;
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;
import org.springframework.transaction.annotation.Transactional;

import java.util.Iterator;
import java.util.NoSuchElementException;

@Component
public class MyEntityDao implements Iterable<MyEntity> {

    @Autowired
    private SessionFactory sessionFactory;

    @Override
    public Iterator<MyEntity> iterator() {
        return new Iterator<MyEntity>() {
            private int num = 0;
            private MyEntity item;

            @Override
            @Transactional(readOnly = true)
            public boolean hasNext() {
                item = getEntity();
                return item != null;
            }

            @Override
            @Transactional(readOnly = true)
            public MyEntity next() {
                try {
                    if(item == null) {
                        item = getEntity();
                        if(item == null) {
                            throw new NoSuchElementException();
                        }
                    }
                    return item;
                } finally {
                    item = null;
                }
            }

            @Override
            public void remove() {
                throw new UnsupportedOperationException();
            }

            private MyEntity getEntity() {
                final Criteria criteria = getCurrentSession().createCriteria(MyEntity.class);
                criteria.setFirstResult(num++);
                criteria.setMaxResults(1);
                return (MyEntity) criteria.uniqueResult();
            }
        };
    }

    public Session getCurrentSession() {
        return sessionFactory.getCurrentSession();
    }
} 
```

* * *

**SQL**

```
drop table ENTITY if exists

create table ENTITY (id bigint generated by default as identity (start with 1),  name varchar(255),  primary key (id))

insert into ENTITY (name) values ('Entity1')
insert into ENTITY (name) values ('Entity2')
insert into ENTITY (name) values ('Entity3') 
```

* * *

**单元测试**

包 org.foo.bar；

```
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;

import static org.junit.Assert.assertEquals;

@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {
    "classpath:applicationContext.xml"
})
public class MyEntityDaoTest {

    @Autowired
    private MyEntityDao dao;

    @Test
    public void testDao() throws Exception {
        int count = 0;
        for(MyEntity a : dao) {
            count++;
        }
        assertEquals(3, count);
    }

} 
```

* * *

**这是我的 pom.xml** http://maven.apache.org/xsd/maven-4.0.0.xsd"> 4.0.0

```
 <groupId>org.foo.bar</groupId>
    <artifactId>spring-aspectj-hibernate</artifactId>
    <version>1.0</version>

    <properties>
        <spring.version>3.1.1.RELEASE</spring.version>
    </properties>

    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aspects</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-instrument</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-test</artifactId>
            <version>${spring.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>org.aspectj</groupId>
            <artifactId>aspectjweaver</artifactId>
            <version>1.6.12</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>4.1.1.Final</version>
        </dependency>

        <dependency>
            <groupId>org.hsqldb</groupId>
            <artifactId>hsqldb</artifactId>
            <version>1.8.0.10</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.10</version>
            <scope>test</scope>
        </dependency>

    </dependencies>

</project> 
```

* * *

毕竟，您必须使用以下参数运行 JVM `-javaagent:<PATH-TO>/spring-instrument-{vertion}.jar`。为了防止添加`-javaagent`参数，您还可以配置 aspectj 编译时编织。

# maven - 无法针对不同的 java 版本进行编译

> ID：12955203
> 
> 赞同：0
> 
> 时间：2012-10-18T12:53:47.023
> 
> 标签：maven, compilation, version, java-7

我有一个多模块 Maven 项目。我做了`mvn clean install`其中一个示例，它下载并安装了一些依赖项。

如果我`$ file WhateverClass.class`从由 Maven 下载和编译的 WEB-INF/lib 中的某些 jar 中执行操作，我会不断收到

```
WhateverClass.class: compiled Java class data, version 51.0 
```

这意味着该类已使用 Java 7 编译。

无论我先自己编译该模块多少次，我都会得到这个！为什么？在我看到目标文件夹是如何生成的之后，我还检查了模块本身的 .class 文件。

在该项目中，一些`POM.xml`指定的

```
<configuration>
  <source>1.5</source>
  <target>1.5</target>
</configuration> 
```

但没有指定更高的java版本。

我的java版本是：

```
java version "1.6.0_23"
OpenJDK Runtime Environment (IcedTea6 1.11pre) (6b23~pre11-0ubuntu1.11.10)
OpenJDK Client VM (build 20.0-b11, mixed mode, sharing) 
```

和 javac 版本：

```
javac 1.6.0_23 
```

**编辑**

这是我的[有效pom](https://docs.google.com/file/d/0B1Lg8GzZGJyLekVvbGVFWTM1M0E/edit)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:00:36.860

当您遇到此类问题时，请尝试隔离问题。第一步是沿着 JAR 的路径倒退：你在哪里找到的类？那个 JAR 是从哪里来的？如果它来自战争，它来自哪里？执行此操作，直到找到`.class`编译文件的计算机。检查 JAR 和`.class`文件`target/classes/`夹中的文件。

在每一步，当你看到 Java 7 时，继续运行并更进一步`file`。`WhateverClass.class`

找到构建计算机后，您可以使用以下选项来调试构建过程：

*   `mvn -v`显示 Maven 和 Java 的版本。
*   `mvn help:effective-pom`显示已解析的 POM（即在包含每个父 POM、解析所有属性后，您可以命名它）。哪个`target`选项处于活动状态？
*   运行`mvn`以`-X`获取调试输出。这有助于查看 Maven 将哪些选项传递给分叉进程。

# wcf - 在连接期间更改 IP 地址和接口的 WCF 客户端

> ID：12955204
> 
> 赞同：2
> 
> 时间：2012-10-18T12:53:51.903
> 
> 标签：wcf, wcf-client

想象一下情况（这是真实情况）：

笔记本电脑上有一个 WCF 客户端应用程序。笔记本电脑通过 WiFi 连接到互联网。用户在连接到 WCF 服务的工作时在他的笔记本电脑上做一些事情（请求回复操作）。

然后用户的笔记本电脑进入睡眠状态，用户回家。在家用户唤醒他的笔记本电脑，连接 HSPDA/3G 调制解调器（不同的接口和 ip）并希望继续在客户端应用程序中工作。请注意，应用程序尚未关闭。

用户（客户端应用程序）应经过身份验证，如果可能，应加密通信。

最佳实践是什么？为每个操作创建新代理？使用身份验证初始化 net.tcp 连接时，这应该很慢。

解决方案 basicHttp 连接 (+HTTPS) 与 InstanceContextMode.PerCall 吗？请注意，速度和更高的有效载荷是问题。

或者最好的解决方案是类似“wrapper(Func<>)”的东西，它包含 while 循环，直到操作成功完成（失败时，创建新连接并再次调用函数）。

谢谢你的建议

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:09:59.740

只要工作单元是必要的，我就一直保持连接打开。基本上，连接仅在应用程序执行某些处理时才打开且可用（并且这些进程需要 WCF 连接）。保持重新连接可能会产生更多开销（并且取决于连接速度，它可能会增加延迟），但在连接工作时它也更安全（故障概率最小），我通常会将这些资源保存给其他人目的。

但是，这一切都取决于应用程序的功能；如果客户端是哑的并且服务正在完成所有工作，那么保持连接可能是有意义的，因为每个函数都在服务上执行一个方法。虽然随之而来的是一些故障检查和重新建立，如果连接被意外切断。

Also, `netTcp` is going to be a lot faster than `wsHttp`. And I personally haven't see a lot of latency on establishing a `netTcp` connection (though I don't know what kind of authentication you're doing [mine has generally implemented windows authentication])

# error-handling - 翻译自定义错误消息

> ID：12955208
> 
> 赞同：1
> 
> 时间：2012-10-18T12:54:19.907
> 
> 标签：error-handling, internationalization, ruby-on-rails-3.2, simple-form

我有一个表单（使用 simple_form），我想实现对已翻译错误消息的支持。我的所有翻译都会出现，但错误消息除外。

我的客户模型是：

```
class Customer < ActiveRecord::Base
  attr_accessible :name, :phone, :email, :contact_method

  validates_presence_of :phone, :email, :contact_method, :message => I18n.t(:required)
end 
```

我的`fr.yml`档案

```
fr:
  name: 'Nom'
  phone: 'Téléphone'
  email: 'Courriel'
  contact_method: 'Méthode de contact'
  required: 'Requis' 
```

我的表格如下：

```
= simple_form_for @customer do |f|
  = f.input :name, label: t(:name)
  = f.input :phone, label: t(:phone)
  = f.input :email, label: t(:email) 
```

有什么我想念的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T17:46:23.263

首先，您应该使用`Symbol`with `validates_presence_of`。不要用 I18n 手动翻译它：

```
validates_presence_of :phone, :email, :contact_method, :message => :required 
```

其次，将错误消息的翻译添加到您的语言环境文件中，如下所示：

```
activerecord:
  errors:
    models:
      customer:
        required: 'Requis' 
```

# php - 使用 Doctrine 将大量数据插入 MongoDB 集合

> ID：12955209
> 
> 赞同：2
> 
> 时间：2012-10-18T12:54:23.243
> 
> 标签：php, mongodb, doctrine-orm

我正在将 Doctrine 和 MongoDB 用于应用程序，并且有一项任务应将数据从 CSV 文件导入到集合中。大约有 5 个不同的 CSV 文件，每个文件至少有 450.000 个条目，每年应该重要 1 到 3 次。

目前，我遍历文件的所有行，创建一个对象，`persist()`每 2.500 个项目调用和刷新一次。

每个项目都不是很大，它有一个 ID，一个 10-20 个字符的字符串，一个 5-10 个字符的字符串和一个布尔值。

我的第一个问题是：当我刷新每 5.000 个项目时，插入速度会明显变慢。在我的测试环境中，刷新 5.000 个项目大约需要 102 秒，刷新 2.500 个项目大约需要 10 秒。

一段时间后冲洗会变慢。如前所述，开始刷新 2.500 个项目大约需要 10 秒，在 100.000 个项目之后，刷新 2.500 个项目需要将近一分钟。

我可以做任何优化来加快速度吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T15:17:48.480

我认为您的脚本中有两个部分可以优化。

*   您读取 CSV 文件的方式取决于您加载它的方式，您可以将其完全加载到内存中（使用`file_get_contents()`或例如），或者使用,`file()`逐块读取它。`fopen()``fread()`

首选最后一个选项，因为它在处理一堆行时只会占用必要的内存量。

*   您需要`clear()`已处理的对象，否则它将保存在内存中直到脚本结束。这意味着如果一个 DC2 对象使用 1Mo 内存，并且您有 100,000 个对象，那么在脚本结束时它将使用 100,000Mo。因此，按 2,500 的范围对插入进行批处理是一个不错的主意，但您显然需要从 EntityManager 中删除已处理的对象。

可以使用`$entityManager->clear();`

将`clear()`清除整体`EntityManager`，您想清除单个实体，您可以使用`$entityManager->detach($object)`.

* * *

如果您想分析您的内存使用情况，您可能还对这些功能感兴趣

[`memory_get_usage()`](http://www.php.net/manual/en/function.memory-get-usage.php)

[`memory_get_peak_usage()`](http://php.net/manual/en/function.memory-get-peak-usage.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:05:28.450

这个导入脚本是否有任何理由需要使用 Doctrine ODM？对于整个应用程序 - 当然。但是以如此多的开销处理大量数据并不是最佳选择，因为 PHP 在保存和处理大型集合方面效率不高。

您可以做的最佳优化是跳过该层并直接使用 mongodb 类，并确保您逐行而不是一次全部读取文件。如果您对 MongoDB 有一些网络延迟（但您不需要将其推送到 5k 个文档），那么使用 batchInsert() 也会大大加快您的速度。

# android - 实现 android GCM 演示时的问题

> ID：12955216
> 
> 赞同：1
> 
> 时间：2012-10-18T12:54:32.690
> 
> 标签：android, ant, google-cloud-messaging

我参考了这个：http: [//developer.android.com/guide/google/gcm/demo.html](http://developer.android.com/guide/google/gcm/demo.html)

在 Using App Engine for Java number 4 我应该在 samples/gcm-demo-appengine 目录中的 cmd 上运行它：ant -Dsdk.dir=/opt/google/appengine-java-sdk runserver -Dserver.host= 192.168.1.10

我将“192.168.1.10”替换为“127.0.0.1”，这是我的本地主机。

执行此命令后，我得到：

构建失败

```
C:\Program Files (x86)\Android\android-sdk\extras\google\gcm\samples\gcm-demo-ap
pengine\build.xml:27: Cannot find C:\opt\google\appengine-java-sdk\config\user\a
nt-macros.xml imported from C:\Program Files (x86)\Android\android-sdk\extras\go
ogle\gcm\samples\gcm-demo-appengine\build.xml 
```

你能告诉我什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-25T08:35:51.450

转到以下链接：

[ [https://developers.google.com/appengine/downloads#Google_App_Engine_SDK_for_Java]](https://developers.google.com/appengine/downloads#Google_App_Engine_SDK_for_Java%5d)

并下载 appengine-java-sdk-1.9.3.zip

因此，不要将其提取到您想要的位置并使用以下路径，例如：

```
C:\programs\appengine-java-sdk-1.9.3 
```

所以你将使用：

```
ant -Dsdk.dir=C:\programs\appengine-java-sdk-1.9.3 runserver -Dserver.host=1.1.1.1 
```

您必须将 1.1.1.1 替换为您的服务器的 ip

# compass-sass - Compass/Sass 自动生成 IE css 文件

> ID：12955221
> 
> 赞同：1
> 
> 时间：2012-10-18T12:54:52.927
> 
> 标签：compass-sass, sass

有没有办法像下面的示例那样自动生成 IE 特定文件？

```
 /* content.scss */
.box {
    color:red;
    .ie7 & {
        color:green;
    }
} 
```

这会生成两个文件：

```
/* content.css */
.box {
  color: red;
}

/* ie7.css */
.ie7 .box {
  color: green;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:04:57.993

您必须设置 2 个不同的 Sass 文件，但您可以使用自定义 mixin：

[http://jakearchibald.github.com/sass-ie/](http://jakearchibald.github.com/sass-ie/)

```
$old-ie: false !default;

@mixin old-ie {
    // Only use this content if we're dealing with old IE
    @if $old-ie {
        @content;
    }
}

.test {

    float: left;
    width: 70%;

    @include old-ie {
        // These hacks won't appear in the normal stylesheet
        display: inline;
        zoom: 1;
        whatever-ie-needs: le-sigh;
    }
} 
```

# html - 在文本框中按 Enter 时如何触发 HTML 按钮？

> ID：12955222
> 
> 赞同：122
> 
> 时间：2012-10-18T12:54:52.303
> 
> 标签：html, jquery, button, input, textbox

所以我到目前为止的代码是：

```
<fieldset id="LinkList">
    <input type="text" id="addLinks" name="addLinks" value="http://">
    <input type="button" id="linkadd" name="linkadd" value="add">
</fieldset> 
```

它不在 a`<form>`中，就像在 a 中一样`<div>`。但是，当我在`textbox`所谓的“addLinks”中输入内容时，我希望用户能够按 Enter 并触发“linkadd” `button`，然后运行 ​​JavaScript 函数。
我怎样才能做到这一点？
谢谢

**编辑：** 我确实找到了这段代码，但它似乎不起作用。

```
$("#addLinks").keyup(function(event){
    if(event.keyCode == 13){
        $("#linkadd").click();
    }
}); 
```

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-10-18T12:57:32.633

```
$(document).ready(function(){
    $('#TextBoxId').keypress(function(e){
      if(e.keyCode==13)
      $('#linkadd').click();
    });
}); 
```

* * *

## 回答 #2

> 赞同：95
> 
> 时间：2017-08-12T13:32:37.993

# 是的^， 2021 年。我相信这仍然适用。

* * *

## 不使用`keypress`

1.  `keypress`当用户按下**不产生任何字符的键时****不会触发**事件，例如, , , , , left & right , 功能键 ( - )。**`Tab``Caps Lock``Delete``Backspace``Escape``Shift``F1``F12`**

 **> ### `keypress`活动[[*Mozilla 开发者网络*](https://developer.mozilla.org/en-US/docs/Web/Events/keypress)]
> 
> **当按下**`keypress`某个键时会触发该事件，并且该键通常**会产生一个字符值**。改为使用。****`input`****

 ****2.  它已被弃用。

> ### `keypress`event [[***UI Events**（2018 年 11 月 8 日发布的 W3C 工作草案。）*](https://www.w3.org/TR/2018/WD-uievents-20181108/#event-type-keypress)]
> 
> *   **注意**| 该[`keypress`](https://www.w3.org/TR/2018/WD-uievents-20181108/#keypress)事件传统上与**检测[字符值](https://www.w3.org/TR/2018/WD-uievents-20181108/#character-value)而不是物理键**相关联，并且可能并非在某些配置中的所有键上都可用。
> *   **警告**| 在本[`keypress`](https://www.w3.org/TR/DOM-Level-3-Events/#keypress)规范中定义事件类型是为了参考和完整性，但**本规范[不推荐](https://www.w3.org/TR/2018/WD-uievents-20181108/#deprecates)使用此事件类型。**在编辑上下文中，作者可以[`beforeinput`](https://www.w3.org/TR/DOM-Level-3-Events/#beforeinput)改为订阅事件。

* * *

## 不使用`KeyboardEvent.keyCode`

1.  它已被弃用。

> ### `KeyboardEvent.keyCode` [[*Mozilla 开发者网络*](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode)]
> 
> **已弃用**| 不再推荐此功能。尽管某些浏览器可能仍然支持它，但它可能已经从相关的 Web 标准中删除，可能正在被删除，或者可能仅出于兼容性目的而保留。避免使用它，并尽可能更新现有代码；请参阅本页底部[的兼容性表以指导您的决定。](https://developer.mozilla.org/en-US/docs/Web/API/KeyboardEvent/keyCode#Browser_compatibility)请注意，此功能可能随时停止工作。

* * *

## 那我应该用什么？（好习惯）

```
// Make sure this code gets executed after the DOM is loaded.
document.querySelector("#addLinks").addEventListener("keyup", event => {
    if(event.key !== "Enter") return; // Use `.key` instead.
    document.querySelector("#linkadd").click(); // Things you want to do.
    event.preventDefault(); // No need to `return false;`.
}); 
```

* * *

## 回答 #3

> 赞同：86
> 
> 时间：2014-06-16T14:05:29.980

有一个无 js 的解决方案。

设置`type=submit`为您想要默认的按钮和`type=button`其他按钮。现在在下面的表单中，您可以在任何输入字段中按 Enter，该`Render`按钮将起作用（尽管它是表单中的第二个按钮）。

例子：

```
 <button id='close_renderer_button' class='btn btn-success'
            title='Перейти к редактированию программы'
            type=button>
      <span class='glyphicon glyphicon-edit'> </span> Edit program
    </button>
    <button id='render_button' class='btn btn-primary'
            title='Построить фрактал'
            type=submit
            formaction='javascript:alert("Bingo!");'>
      <span class='glyphicon glyphicon-send'> </span> Render
    </button> 
```

在 FF24 和 Chrome 35 中测试（`formaction`是 html5 功能，但`type`不是）。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-10-18T12:57:56.877

1.  将 替换`button`为`submit`
2.  [进步](http://en.wikipedia.org/wiki/Progressive_enhancement)，确保你有一个服务器端版本
3.  将您的 JavaScript 绑定到`submit`表单的处理程序，而不是`click`按钮的处理程序

在字段中按 enter 将触发表单提交，并且提交处理程序将触发。

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-10-18T13:00:50.400

您可以像这样向您的输入添加事件处理程序：

```
document.getElementById('addLinks').onkeypress=function(e){
    if(e.keyCode==13){
        document.getElementById('linkadd').click();
    }
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-10-31T10:13:34.217

当 input type="button" 被 input type="submit" 替换为需要触发的默认按钮时，它可以工作。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-18T12:58:15.847

这应该可以，我使用的是 jQuery，你可以编写普通的 javascript。
替换`sendMessage()`为您的功能。

```
$('#addLinks').keypress(function(e) {
    if (e.which == 13) {
        sendMessage();
        e.preventDefault();
    }
}); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-10-18T13:00:36.467

首先添加 jquery 库文件[jquery](http://jquery.com/)并在你的 html 头中调用它。

然后使用基于 jquery 的代码...

```
$("#id_of_textbox").keyup(function(event){
    if(event.keyCode == 13){
        $("#id_of_button").click();
    }
}); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-11-24T22:03:44.940

根据以前的一些答案，我想出了这个：

```
<form>
  <button id='but' type='submit'>do not click me</button>
  <input type='text' placeholder='press enter'>
</form>

$('#but').click(function(e) {
  alert('button press');
  e.preventDefault();
}); 
```

看看[小提琴](https://jsfiddle.net/nmzuh1ws/1/)

编辑：如果你不想添加额外的 html 元素，你可以只用 JS 做到这一点：

```
 $("input").keyup(function(event) {
        if (event.keyCode === 13) {
            $("button").click();
        }
    }); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-15T00:54:16.227

## **请勿在此解决方案中使用 Javascript！！！**

当网页中与类型按钮或输入相关联的任何表单字段控件具有用户焦点时，现代 HTML 页面**自动允许表单的提交按钮使用****ENTER** / **RETURN**键提交页面，属性设置在任何表单字段上、按钮或输入，或用户选项卡进入任何表单字段。按键盘上的 ENTER 或 RETURN 然后自动触发该表单的第一个可用提交按钮或输入控件。`submit``autofocus`

因此，与其使用 JavaScript，更简单的解决方案是`tabindex=0`在表单元素中添加任何表单字段或提交按钮，然后`autofocus`在第一个输入控件或提交按钮上添加。Tabindex=0 将该输入分配给页面的索引标签顺序页面项目列表，并且自动聚焦将焦点转移到您的任何表单字段，触发任何提交按钮以响应 ENTER/RETURN 键命令。用户现在可以按键盘上的“ENTER”在他们喜欢的任何时间提交表单。这还有一个优点，即第一个表单字段被用户关注并准备好接收数据。下面的一个例子：

```
<form id="buttonform2" name="buttonform2" action="#" method="get" role="form">
  <label for="username1">Username</label>
  <input type="text" id="username1" name="username" value="" size="20" maxlength="20" title="Username" tabindex="0" autofocus="autofocus" />
  <label for="password1">Password</label>
  <input type="password" id="password1" name="password" size="20" maxlength="20" value="" title="Password" tabindex="0" role="textbox" aria-label="Password" />
  <button id="button2" name="button2" type="submit" value="submit" form="buttonform2" title="Submit" tabindex="0" role="button" aria-label="Submit">Submit</button>
</form> 
```

停止编写一切脚本！浏览器拥有这种原生能力已经将近 20 年了！！

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-05-24T15:06:33.720

我找到了 w3schools.com howto，他们的 try me 页面如下。

[https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_trigger_button_enter](https://www.w3schools.com/howto/tryit.asp?filename=tryhow_js_trigger_button_enter)

这在我的常规浏览器中有效，但在使用内置 php 浏览器的我的 php 应用程序中不起作用。

在玩了一会儿之后，我想出了以下纯 JavaScript 替代方案，它适用于我的情况，并且应该适用于其他所有情况：

```
 function checkForEnterKey(){
        if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById("myBtn").click();
        }
    }

    function buttonClickEvent()
    {
        alert('The button has been clicked!');
    } 
```

HTML 在文本框中按回车键激活按钮。

```
 <br />
    <input id="myInput" onkeyup="checkForEnterKey(this.value)">
    <br />
    <button id="myBtn" onclick="buttonClickEvent()">Button</button> 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-07-16T17:44:49.000

使用纯 HTML[表单](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/form)：

```
<form class="my-form" action="javascript:myFunction();">
    <button>Submit</button>
</form>
```

默认情况下，浏览器将解释`Enter`为提交表单。[`<button>`](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button)默认情况下是类型“提交”并访问位于表单`action`属性中的任何内容（如果按钮`formaction`存在则覆盖）。在这种情况下，为简单起见，我使用带有[`javascript:`伪协议](https://stackoverflow.com/questions/561550/when-is-the-javascript-prefix-valid-syntax)的 javascript 函数，但它可以是 javascript 事件侦听器或普通形式的 GET/POST 方法。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2019-07-10T06:13:05.263

```
<input type="text" id="input_id" />    

$('#input_id').keydown(function (event) {
    if (event.keyCode == 13) { 
         // Call your function here or add code here
    }
}); 
```

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2017-02-17T15:14:47.260

我正在使用剑道按钮。这对我有用。

```
<div class="form-group" id="indexform">
    <div class="col-md-8">
            <div class="row">
                <b>Search By Customer Name/ Customer Number:</b>
                @Html.TextBox("txtSearchString", null, new { style = "width:400px" , autofocus = "autofocus" })
                @(Html.Kendo().Button()
                    .Name("btnSearch")
                    .HtmlAttributes(new { type = "button", @class = "k-primary" })
                    .Content("Search")
                    .Events(ev => ev.Click("onClick")))
            </div>
    </div>
</div>
<script>
var validator = $("#indexform").kendoValidator().data("kendoValidator"),
          status = $(".status");
$("#indexform").keyup(function (event) {
    if (event.keyCode == 13) {
        $("#btnSearch").click();
    }
});
</script> 
```******

# iphone - 是否可以根据用户的应用商店更改设置？（iPhone 应用程序）

> ID：12955223
> 
> 赞同：0
> 
> 时间：2012-10-18T12:54:53.603
> 
> 标签：iphone, ios, app-store

我想提交一个通用的 iOS 应用程序，并且根据国家/地区的不同，我想进行一些小改动（图片、标题）。我可以通过将此问题与用户下载应用程序的应用程序商店联系起来吗？

感谢你并致以真诚的问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:27:22.970

您无法分辨应用是从哪个 App Store 国家/地区下载的。

您必须根据用户设备上设置的语言本地化您的应用程序。

我建议您查看 WWDC 的一些本地化视频：[https](https://developer.apple.com/videos/wwdc/2012/?id=244) ://developer.apple.com/videos/wwdc/2012/?id=244 （需要登录）

此外，要确定用户设备的区域设置，请查看以下文档：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)

# asp.net-mvc-3 - 生产与开发服务器内容处置文件名编码

> ID：12955224
> 
> 赞同：3
> 
> 时间：2012-10-18T12:54:55.530
> 
> 标签：asp.net-mvc-3, google-chrome, content-disposition

我正在使用 asp.net mvc3，在同一个浏览器（Chrome 22）中下载文件。这是控制器代码：

```
[HttpPost]
public ActionResult Uploadfile(HttpPostedFileBase file)//HttpPostedFileBase file, string excelSumInfoId)
{
    ...
    return File(
        result.Output,
        "application/vnd.ms-excel",
        String.Format("{0}_{1:yyyy.MM.dd-HH.mm.ss}.xls", "Суммирование", DateTime.Now));
} 
```

在我的开发机器上，我下载了一个以正确名称“Суммирование_2012.10.18-13.36.06.xls”以编程方式创建的文件。

**回复：**

```
Content-Disposition:attachment; filename*=UTF-8''%D0%A1%D1%83%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5_2012.10.18-13.36.06.xls
Content-Length:203776
Content-Type:application/vnd.ms-excel
Date:Thu, 18 Oct 2012 09:36:06 GMT
Server:ASP.NET Development Server/10.0.0.0
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0 
```

我从生产服务器下载了一个带有控制器操作名称的文件+正确的扩展名“Uploadfile.xls”，这是错误的。

**回复：**

```
Content-Disposition:attachment; filename="=?utf-8?B?0KHRg9C80LzQuNGA0L7QstCw0L3QuNC1XzIwMTIuMTAuMTgtMTMuMzYu?=%0d%0a =?utf-8?B?NTUueGxz?="
Content-Length:203776
Content-Type:application/vnd.ms-excel
Date:Thu, 18 Oct 2012 09:36:55 GMT
Server:Microsoft-IIS/7.5
X-AspNet-Version:4.0.30319
X-AspNetMvc-Version:3.0
X-Powered-By:ASP.NET 
```

两台机器上的 Web.config 文件相同。

为什么同一浏览器的文件名编码不同？web.config 中是否有任何类型的默认设置在我缺少的机器上有所不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T16:57:18.240

开发服务器运行 .NET 4，生产服务器运行 .NET 4.5。MVC 框架包含一个启发式方法，用于确定是否需要将 RFC 6266 用于 Content-Disposition 标头，虽然此启发式方法在 .NET 4 上可以正常工作，但在 .NET 4.5 上却不能正常工作。最终结果是 Content-Disposition 标头被破坏，正如您在本例中所看到的那样。

您最简单的做法可能是将应用程序升级到 MVC 4。该版本的框架包含一个不同的启发式算法，它更健壮并且应该在 .NET 4 和 .NET 4.5 上都能正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:29:26.810

最可能的原因似乎是服务器确实看到了不同的 User-Agent 标头字段。

话虽如此，第二个响应对于任何浏览器都不正确，您应该将该问题报告给 Microsoft。

# iphone - 如何在 UIWebView 中添加弹出按钮

> ID：12955231
> 
> 赞同：5
> 
> 时间：2012-10-18T12:55:23.830
> 
> 标签：iphone, ios, uiwebview, popup

当我长按任何 url 中的音乐播放选项时，默认弹出窗口会打开`UIWebView`。我想在弹出窗口中再添加一个按钮..可以做到吗..

就像我想添加`FETCH`按钮一样。

我可以在默认弹出功能中进行更改`OPEN`吗`COPY`？如下图

![在此处输入图像描述](../Images/e7ba3104ad186deb3ff75064d4b94ec6.png)

我通过谷歌知道 -

首先，您确实不能向标准上下文菜单的默认菜单项添加其他菜单项。但是您可以使用某个 CSS 属性关闭上下文菜单。所以解决方案是关闭默认菜单并从头开始实施您自己的菜单。而要实现你自己的上下文菜单，你必须首先捕捉到tab-and-hold手势，获取手指在屏幕上的坐标，将这些坐标转换为网页的坐标系，最后在以下位置查找HTML元素这个位置。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T06:31:04.257

新答案：

看起来这就是我们想要的，这里：

[https://stackoverflow.com/a/3198220/700471](https://stackoverflow.com/a/3198220/700471)

旧答案：

好的，经过一番研究，这是交易：

您在问题中描述的内容似乎是准确的：

> 首先，您确实不能向标准上下文菜单的默认菜单项添加其他菜单项。但是您可以使用某个 CSS 属性关闭上下文菜单。所以解决方案是关闭默认菜单并从头开始实施您自己的菜单。而要实现你自己的上下文菜单，你必须首先捕捉到tab-and-hold手势，获取手指在屏幕上的坐标，将这些坐标转换为网页的坐标系，最后在以下位置查找HTML元素这个位置。

所以你打算用上下文菜单实现你自己的弹出框控制器——好吧，我根本不会涉及到，我会假设你知道如何做到这一点。

您的问题似乎是，您如何在 UIWebView 中采用长按手势并将其转换为网页的坐标以查找所选的 DOM 元素，并将其用作生成弹出框的上下文菜单。

我发现的是[这个](https://stackoverflow.com/questions/9940987/getting-selected-elements-programatically-from-uiwebview)，特别是[这](https://stackoverflow.com/a/10061763/700471)行代码：

```
NSString *js = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).innerHTML", touchPoint.x, touchPoint.y]; 
```

这看起来像 JS，你需要弄清楚*什么*元素刚刚被长按，当然你需要做一些图形来查看它是否是一个链接并从那里执行你的上下文菜单，但这不是我调查过的东西。

一些进一步的想法：

可能最简单的方法是将 a 附加`UILongPressGestureRecognizer`到您的 UIWebView（这可以在 nib 中轻松完成）并确保“Sent Action”指向 ViewController 上的适当 IBAction。（我想你也可以使用委托出口，但我从来不需要这样做。）

在任何情况下，您都可以使用手势识别器的[locationOfTouch:inView:](http://www.google.com/url?url=http://developer.apple.com/library/ios/documentation/uikit/reference/UIGestureRecognizer_Class/Reference/Reference.html#//apple_ref/occ/instm/UIGestureRecognizer/locationOfTouch:inView:&rct=j&q=UIGestureRecognizer%20locationOfTouch&usg=AFQjCNFMZYd7Sk7HsMdJagJNx1Pb5pxiNg&sa=X&ei=WduIUIn_Fsji2gWan4HoDQ&ved=0CDMQygQwAg)方法，而您可能想要使用的视图将是 UIWebView 的内容视图，我相信您可以使用类似`myWebView.scrollView.subviews[0]`（或 objectAtIndex: 变化，如果您没有使用新的数组索引下标）。

无论如何，我想我已经提供了足够的答案来回答你的问题。

* * *

编辑：

好的，所以你仍然有这个问题，所以我去做了一个测试项目并让它工作。对此有点烦人的一点是，WebKit 以某种方式在 DOM 中的对象周围添加了一个“缓冲区”区域，这意味着如果您在链接*旁边*稍微触摸它仍然会突出显示，但是当您使用 JS 命令`elementFromPoint`时它不会这样做，因此您必须更仔细地触摸才能使用此方法触发弹出窗口。但是，它有效。

我用“单一视图”模板制作了一个空白项目，并将 a`UIWebView`放入 xib 中，将其`delegate`出口指向文件所有者。然后我把一个`UILongPressGestureRecognizer`放入xib，附加到UIWebView。我将其设置`delegate`为文件所有者，并将其`selector`出口设置为文件所有者中的`longPressDetected`IBAction。我还在 Interface Builder 的识别器属性中取消选中“在视图中取消”。

这是视图控制器的代码。

界面：

```
//
//  WVTViewController.h
//  WebViewTest
//

#import <UIKit/UIKit.h>

@interface WVTViewController : UIViewController <UIWebViewDelegate, UIGestureRecognizerDelegate>

@property (nonatomic, weak) IBOutlet    UIWebView   *myWebView;
@property (nonatomic)                   BOOL        didFirstLoad;

- (IBAction)longPressDetected:(id)sender;

@end 
```

执行：

```
//
//  WVTViewController.m
//  WebViewTest
//

#import "WVTViewController.h"

@interface WVTViewController ()

@end

@implementation WVTViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    // Just load google.
    NSURL *theURL = [NSURL URLWithString:@"http://www.google.com"];
    NSURLRequest *request = [NSURLRequest requestWithURL:theURL];
    [self.myWebView loadRequest:request];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)webViewDidFinishLoad:(UIWebView *)webView
{
    if (!self.didFirstLoad) {
        // Disable the default contextual menu.
        [webView stringByEvaluatingJavaScriptFromString:@"document.body.style.webkitTouchCallout='none';"];
    }
}

// Called by the gesture recognizer.
- (IBAction)longPressDetected:(UILongPressGestureRecognizer *)sender
{
    if (sender.state == UIGestureRecognizerStateBegan) {

        NSLog(@"Long press detected.");

        CGPoint webViewCoordinates = [sender locationInView:self.myWebView];
        NSLog(@"WebView coordinates are: %@", NSStringFromCGPoint(webViewCoordinates));

        // Find the DOM element
        NSString *locatorString = [NSString stringWithFormat:@"document.elementFromPoint(%f, %f).innerHTML", webViewCoordinates.x, webViewCoordinates.y];
        NSString *result = [self.myWebView stringByEvaluatingJavaScriptFromString: locatorString];
        NSLog(@"Element Found: %@", result);

    }

}

// Necessary or the gesture recognizer won't call the IBAction.
- (BOOL)gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldRecognizeSimultaneouslyWithGestureRecognizer:(UIGestureRecognizer *)otherGestureRecognizer
{
    return YES;
}

@end 
```

正如我所说，我测试了上面的代码，它工作正常。你当然可以改变你的 JS 并使用除 之外的东西`innerHTML`，例如`tagName`or`href`或任何你喜欢的东西。您尝试执行的操作可能需要多次检查，可能使用排队的 JS 命令（这将是蹩脚的），除非您可以对 DOM 对象进行 JSON 字符串化，将其传递回 Objective-C，转换为本机对象和在那个环境中执行你的检查——但是，我不是 JS 专业人士，我不会对此进行调查。

作为说明，我有点惊讶的是，工作的`elementFromPoint`坐标是 UIWebView 本身内的触摸坐标。我已经组装了整个代码块，它遍历`myWebView.scrollView.subviews`并找到了内容视图，然后调用`locationOfTouch:inView:`了该视图。但是我的行为很奇怪，所以我预感到我使用了 webview 坐标并且它工作得很好，即使在我被滚动到一边和向下时在一个大网页上也是如此。我怀疑 webview 中的某种 Apple 编程行为可能会转换这些坐标。可能 JS 的坐标系会根据内容视图在滚动视图内的移动方式而改变——这对我来说是最有意义的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-27T11:26:21.143

回答这个问题的正确和准确的方法是下面的链接

[http://www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/](http://www.icab.de/blog/2010/07/11/customize-the-contextual-menu-of-uiwebview/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:50:10.703

您可以使用以下方式触发事件：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{
  if( navigationType == UIWebViewNavigationTypeLinkClicked )
  {
    // Handle your URL click here (open the popup menu)
    // ...
    return NO;
  }
  return YES;
} 
```

不要忘记委托 UIWebView

# database - 在 yii 应用程序中如何将从另一个表中获取的数据插入到当前表中

> ID：12955238
> 
> 赞同：0
> 
> 时间：2012-10-18T12:55:41.747
> 
> 标签：database, yii

我在数据库中有两个表，即 QbQuestion(Qid,Question,StatusId) 和 Qbstatus(StatusId,Status),,,,, 其中 Status 将状态存储为新的、活动的、非活动的等。我想在 QbQuestion 的视图形式上获取 StatusOptions下拉框的形式。我成功地在 QbQuestion 视图表单上获取 StatusOptions，但所选条目未插入 QbQuestion 表中。在 _form.php 中，为了获取 StatusOptions，我插入了如下代码： labelEx(Qbstatus::model(),'Status'); ?> findAll(); $list = CHtml::listData($records,'QuestionStatusId', 'Status'); echo CHtml::dropDownList('Qbstatus', null, $list, array('empty' => 'Select a Status')); ?> 错误(QbStatus::model(),'状态'); ?>

那么我应该怎么做才能在 QbQuestion 表中输入条目

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:05:07.073

您的问题不是很清楚，但据我了解，您无法使下拉列表显示正确的选项/值，这会阻止您的 QbQuestion 表存储 QuestionStatusId 的正确 ID？

这是您的下拉列表的外观（显然未经测试）：

```
echo CHtml::dropDownList($model,'StatusId',CHtml::listData(Qbstatus::model()->findAll(),'QuestionStatusId','Status'),array('empty'=>'Select a Status')); 
```

如果您查看源代码，您应该会看到带有显示值的普通 HTML 结构

在接收表单的控制器/操作中，您应该能够回显 StatusId 的模型值并查看它是否通过

# jquery - 为什么 $(document).height() 与 $(document.body).height() 不同？

> ID：12955239
> 
> 赞同：5
> 
> 时间：2012-10-18T12:55:46.613
> 
> 标签：jquery, document

我已经用谷歌搜索了一段时间，但仍然找不到为什么
与`$(document).height()`不同`$(document.body).height()`？

另外，谁能告诉我
jQuery中的height方法和原始JavaScript方法之间的对应关系？

例如，`$(document).height()`等价于`document.documentElement.scrollHeight`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:05:33.497

因为`<body>`HTML 中的元素只是另一个块元素（很像 a `<div>`），并且与任何块元素一样，它可以具有尺寸样式（`margin`、`padding`、`width`、`height`等）。

考虑到这一点，`<body>`元素的“大小”不需要直接对应于`document`对象的大小（它对应于呈现的整个 HTML 文档，作为一个整体）。一个很好的理由是`<body>`元素也在`<html>`元素内部，它**也是**一个块元素，可以有自己的维度。

`<html>`例如，如果您的元素 has `padding:10px`，那么您的`<body>`元素的有效大小肯定会与整体`document`完全不同。

现在，不要误会我的意思：`document`并且`document.body` **可以**具有完全相同的大小（例如，尝试检查 StackOverflow 的），但您必须了解这`<body>`只是您可以通过 CSS 操作的另一个 HTML 块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:01:22.723

我认为身体有一个标准的边距。对于第二部分，我不知道你的意思。

# javascript - 代码定制

> ID：12955240
> 
> 赞同：1
> 
> 时间：2012-10-18T12:55:47.493
> 
> 标签：javascript, validation

我希望我的代码更准确。有人可以建议我编写以下更合适的代码片段吗？

```
<script>

var frmvalidator  = new Validator("SubscriptionForm");
 frmvalidator.EnableOnPageErrorDisplaySingleBox();
 frmvalidator.EnableMsgsTogether();

  frmvalidator.addValidation("usernameReg","req","Please enter your Username");
  frmvalidator.addValidation("usernameReg","maxlen=20", "Max length for Username is 20");
  frmvalidator.addValidation("usernameReg","alpha_s","Username can contain alphabetic chars only");

  frmvalidator.addValidation("usernameReg","req","Please enter your Username");
  frmvalidator.addValidation("usernameReg","maxlen=20", "Max length for Username is 20");
  frmvalidator.addValidation("usernameReg","alpha_s","Username can contain alphabetic chars only");
  frmvalidator.addValidation("fname","req","Please enter your First Name");
  frmvalidator.addValidation("fname","maxlen=20",   "Max length for FirstName is 20");
  frmvalidator.addValidation("fname","alpha_s","Name can contain alphabetic chars only");

  frmvalidator.addValidation("lname","req","Please enter your Last Name");
  frmvalidator.addValidation("lname","maxlen=20","For LastName, Max length is 20");

  frmvalidator.addValidation("email","maxlen=50");
  frmvalidator.addValidation("email","req");
  frmvalidator.addValidation("email","email");

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T11:21:37.033

@Nida Hafeez，

如果您愿意在下一个项目中开始使用 jquery，这将对您有很大帮助：http: [//www.w3schools.com/jquery/default.asp](http://www.w3schools.com/jquery/default.asp)

还有一个来自 jQuery 的很好的表单验证器

[http://docs.jquery.com/Plugins/Validation](http://docs.jquery.com/Plugins/Validation)

# bash - 递归 wget 不起作用

> ID：12955253
> 
> 赞同：5
> 
> 时间：2012-10-18T12:57:04.530
> 
> 标签：bash

我正在尝试使用 wget -r 抓取本地站点，但我没有成功：它只是下载第一页并且不会更深入。顺便说一句，我很不成功，以至于我尝试的任何网站都不起作用...... :)

我尝试了各种选择，但没有更好的事情发生。这是我认为可以使用的命令：

```
wget -r -e robots=off --user-agent="Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.79 Safari/537.4" --follow-tags=a,ref --debug `http://rocky:8081/obix` 
```

真的，我一点头绪都没有。无论我读到什么关于 wget 的网站或文档都告诉我它应该只与 wget -r 一起工作，所以我开始认为我的 wget 有问题（我在 Fedora 16 上）。

任何想法？

* * *

*编辑*：这是我要得到的输出`wget -r --follow-tags=ref,a http://rocky:8081/obix/`：

> wget -r --follow-tags=ref,a `http://rocky:8081/obix/` --2012-10-19 09:29:51-- `http://rocky:8081/obix/`解决 rocky... 127.0.0.1 连接到 rocky|127.0.0.1|:8081... 已连接。HTTP 请求已发送，等待响应... 200 OK 长度：792 [text/xml] 保存到：“rocky:8081/obix/index.html”</p>
> 
> 100%[================================================= ================================>] 792 --.-K/s in 0s
> 
> 2012-10-19 09:29:51 (86,0 MB/s) - “rocky:8081/obix/index.html” 已保存 [792/792]
> 
> 已完成 --2012-10-19 09:29:51-- 已下载：1 个文件，792 in 0s (86,0 MB/s)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:30:47.440

通常不需要给用户代理。

提供以下内容就足够了：

```
wget -r http://stackoverflow.com/questions/12955253/recursive-wget-wont-work 
```

要了解为什么 wget 不执行您想要的操作，请查看它提供给您的输出并将其发布在此处。

# ios - 我应该在哪里调用 [FBSettings publishInstall:appId]

> ID：12955259
> 
> 赞同：16
> 
> 时间：2012-10-18T12:57:14.023
> 
> 标签：ios, facebook, sdk

我正在考虑集成对跟踪 Facebook 的新移动应用广告的支持。

我在这里阅读了教程： [https ://developers.facebook.com/docs/tutorials/mobile-app-ads/](https://developers.facebook.com/docs/tutorials/mobile-app-ads/)

它说：

> 包括以下在用户首次打开您的应用程序时要执行的代码
> 
> ```
> [FBSettings publishInstall:appId]; 
> ```

所以第一个问题是 - 我应该把它放在哪里，以便它只在安装是从 Facebook 驱动的情况下调用调用？我不希望 FB 因在应用商店中自己发现我的应用的人而获得荣誉。

我是否需要手动跟踪我之前是否为该特定用户调用了 publishInstall？（序言句暗示了这一点 - 但 publishInstall 的 SDK 文档另有暗示）。

更令人困惑的是 SDK FBSettings 参考包括`shouldAutoPublishInstall`默认为`YES`. 这表明除了集成 SDK 之外我不需要做任何事情。那么为什么教程没有提到这个选项呢？

我假设 appId 是关联的 Facebook appId（而不是 App Store App ID）。这在文档中也不清楚。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T08:35:18.320

我浏览了 facebook iOS SDK 的来源，似乎该指南是错误的。

你是对的，这`autoPublishInstall`是`YES`默认设置的，这意味着我们不需要`[FBSettings publishInstall:appId];`手动调用。`AppId`确实是 facebook 应用程序 ID。

当您调用方法时，它会使用 最后包含的内容进行`openActiveSessionWith....`初始化`FBSession``initWithAppID:permissions:defaultAudience:urlSchemeSuffix:tokenCacheStrategy:``[FBSettings autoPublishInstall:self.appID];`

```
+ (void)autoPublishInstall:(NSString *)appID {
    if ([FBSettings shouldAutoPublishInstall]) {
        dispatch_once(&g_publishInstallOnceToken, ^{
            // dispatch_once is great, but not re-entrant.  Inside publishInstall we use FBRequest, which will
            // cause this function to get invoked a second time.  By scheduling the work, we can sidestep the problem.
            [[FBSettings class] performSelector:@selector(publishInstall:) withObject:appID afterDelay:FBPublishDelay];
        });
   }
} 
```

所以从技术上讲，它应该报告开箱即用的安装（如果我没有遗漏什么）。我今天要多玩一点，看看它是否按预期工作，并用结果更新答案。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-14T08:46:43.090

1.  把它放在`-[application:didFinishLaunchingWithOptions]`.

2.  并非所有应用程序都希望集成 Facebook 登录。他们只想要“移动应用安装广告”功能。对于这类应用程序，他们应该`+[FBSettings publishInstall:appId]`手动调用。另一方面，如果你的应用已经集成了 facebook 登录，你可以假设 FB sdk 已经发布了安装。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-30T06:10:41.500

如果我们只需要放

```
[FBSettings publishInstall:appId]; 
```

手动输入

```
-[application:didFinishLaunchingWithOptions] 
```

我将如何确定从 facebook 发生的安装？我不希望 FB 因在应用商店中自己发现我的应用的人而获得荣誉。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-07-16T10:30:48.203

将代码放在 Appdelegate DidbecomeActive 方法中

```
- (void)applicationDidBecomeActive:(UIApplication *)application 
```

希望这有帮助:)

# c - 套接字：“fd”和“select”操作的任何库或包装器？

> ID：12955262
> 
> 赞同：1
> 
> 时间：2012-10-18T12:57:25.037
> 
> 标签：c, sockets, networking

是否有任何 C 包装器或库可用于对原始套接字（`fd`、[选择](http://linux.die.net/man/2/select)、...）进行操作？没有火箭科学，只是一个可读的、漂亮的包装`FD_SET`等等。

[boost::asio](http://www.boost.org/doc/libs/1_51_0/doc/html/boost_asio.html)用于 C++，所以在这里没用。

我知道[Beej 的网络编程指南](http://beej.us/guide/bgnet/)以及如何对套接字进行操作，我在自己开始包装之前会寻找包装器

**有关的**

*   [便携式轻量级 C++ 套接字包装器](https://stackoverflow.com/questions/4472175/portable-lightweight-c-sockets-wrapper)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:08:23.157

看看libdnet。详情： http: [//libdnet.sourceforge.net/](http://libdnet.sourceforge.net/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T10:33:07.710

您可能想看看 Dan Kegel（c10k 人）的 rn：http: [//www.kegel.com/rn/](http://www.kegel.com/rn/)。它具有围绕多个类似 select 的系统调用（如 poll/epoll/sigio）的普通-old-c 接口。在高 fd 计数时它们之间存在显着的性能差异，并且最好的接口（epoll/kqueue）是不可移植的。

rn api 是 epoll 式的：您只需添加/删除单个 fd，而不是像 select 那样传递整个列表。带有 FD_SET 的良好旧选择在编译时被限制为多个套接字，并在每次调用时将整个列表从用户空间复制到内核空间。使用 epoll，您有单独的系统调用来添加/删除单个 FD，即使您在等待 100K 空闲套接字时也很快。

所有现代 linux 系统都应该支持 epoll。如果您不关心可移植性，您可以直接使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:02:32.863

在 Linux 上，只需使用由标准 GNU libc 库包装的适当[系统调用。](http://www.kernel.org/doc/man-pages/online/pages/man2/syscalls.2.html)使用[socket(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/socket.2.html)获取原始套接字上的 fd，然后使用其他系统调用，如[recv(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/recv.2.html)、[poll(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/poll.2.html)等。

您可能需要 root 权限才能使用原始套接字。

您应该更喜欢选择已过时`poll(2)`的[select(2) 。](http://www.kernel.org/doc/man-pages/online/pages/man2/select.2.html)（阅读有关[C10K](http://www.kegel.com/c10k.html)问题的更多信息）。

另请参见[socket(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/socket.7.html)和[packet(7)](http://www.kernel.org/doc/man-pages/online/pages/man7/packet.7.html)手册页。

# jquery - Ajax 调用下载从 RESTful 服务返回的文件

> ID：12955266
> 
> 赞同：12
> 
> 时间：2012-10-18T12:57:31.463
> 
> 标签：jquery, ajax, rest

我对 AJAX 相当陌生。我正在使用 AJAX 向服务器发送请求。该服务返回一个文本文件。但是返回数据时没有出现下载框。返回文件的其余服务如下：

```
@Path("/examples")
public class ExampleCodesRest {

    @POST
    @Path("/getcode")
    @Produces(MediaType.TEXT_PLAIN)
    public Response getCodes(@Context ServletContext context){

        String in=context.getRealPath("/WEB-INF/reports.jrxml");
        File file=new File(in);

        ResponseBuilder response = Response.ok((Object) file);
        response.header("Content-Disposition",
            "attachment; filename=\"file_from_server.log\"");
        return response.build();

    }
} 
```

我的 AJAX 调用如下：

```
 $('a#link').click(function(event){
    event.preventDefault();
    $.ajax({
        url: '/reports/rest/examples/getcode',
        type: 'POST'
    });
}); 
```

在没有 AJAX 的情况下，文件下载成功。使用AJAX，它不会下载文件。请指教。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-18T13:02:47.110

建议很简单：您不能通过 AJAX 下载文件 - 这是一项安全策略。我的意思是您可以下载数据，但不能从 JavaScript 端将其保存到磁盘。

如果您想在点击时下载文件，那么您只需添加`href`到您的`a`标签即可。或使用文件的`URL`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:04:04.607

A）您没有回调来接收数据
b）向您的代码添加错误回调，以便您可以查看调用后是否有接收错误：

```
 $.ajax({
    url: '/spaconsole/rest/examples/getcode',
    type: 'POST'
    success: function (data) {
        console.log('ok');
    },
    error: function (xhr) {
      console.log(xhr);
    }
    }); 
```

编辑：这是如果您想在页面中显示文本。如果你想下载文件，这不是办法，你不能使用ajax

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:05:31.470

您不能直接从 AJAX 执行此操作，但您可以通过使用 iframe 启动下载来绕过它。有关讨论，请参阅[Ajax 文件下载问题](https://stackoverflow.com/questions/1538741/ajax-file-download-issue)。

# liferay - Liferay 6.1 主题 - 外观和感觉

> ID：12955274
> 
> 赞同：0
> 
> 时间：2012-10-18T12:57:55.363
> 
> 标签：liferay, liferay-theme

我有 liferay-look-and-feel.xml 文件：

```
<?xml version="1.0"?>
<!DOCTYPE look-and-feel PUBLIC "-//Liferay//DTD Look and Feel 6.1.0//EN"
"http://www.liferay.com/dtd/liferay-look-and-feel_6_1_0.dtd">

<look-and-feel>
    <compatibility>
       <version>6.1.10+</version>
    </compatibility>
    <theme id="sample-theme" name="Sample Theme">
       <settings>
         <setting key="portlet-setup-show-borders-default" value="false" />
       </settings>
    </theme>
</look-and-feel> 
```

我使用 maven 构建我的项目并取得成功

但是当我在 Eclipse 中打开 localhost 时，我看到：

```
[ThemeLocalServiceImpl:149] No theme found for specified theme id sample_WAR_sampletheme. Returning the default theme. 
```

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-16T09:25:55.130

**只需在Liferay-6.1.10/tomcat-7.0.27/webapps/sample_WAR_sampletheme/META-INF/context.xml**中删除该属性`antiJarLocking`并设置`antiResourceLocking`为 false即可。 [在这里阅读更多](https://www.themeray.com/blog/-/blogs/no-theme-found-for-specified-theme-id-%E2%80%A6-returning-the-default-theme?_33_redirect=https://www.themeray.com/blog?p_p_id=33&p_p_lifecycle=0&p_p_state=normal&p_p_mode=view&p_p_col_id=column-1&p_p_col_count=1)。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T14:31:59.480

这是tomcat 7中antiResourceLocking的问题。

请查看博客：[No theme found for specified theme id ... 返回默认主题](https://www.themeray.com/blog/-/blogs/no-theme-found-for-specified-theme-id-...-the-default-theme)**

# ruby-on-rails-3 - Rails 3.2.8 的回形针和 Ajax 问题

> ID：12955288
> 
> 赞同：1
> 
> 时间：2012-10-18T12:53:49.300
> 
> 标签：ruby-on-rails-3, paperclip

我正在用 rails 3.2.8 编写一个 100% ajax 的应用程序

一切都很顺利，直到我尝试将员工的照片上传到员工管理模块。

这是我的代码的一部分：

**在控制器处：**

```
class EmpleadosController < ApplicationController
  respond_to :js
  before_filter :require_user

  def index
    @empleados = Empleado.paginate( page: params[ :page ],
                                    joins: [:user,:contacto],
                                    select: 'empleados.id as id, empleados.user_id, empleados.contratado_el, empleados.despedido_el, empleados.nss, empleados.sueldo_base_semanal, empleados.comentarios, empleados.foto_file_name, empleados.foto_content_type, empleados.foto_file_size, empleados.foto_updated_at, users.username as username, contactos.salutacion_id as salutacion_id, contactos.id as contacto_id, contactos.nombres as nombres, contactos.apellidos as apellidos'
                                  ).sorted( params[ :sort ] )
  end

  def new
    @empleado = Empleado.new
  end

  def create
    @empleado = Empleado.new(params[:empleado])
    @empleado.sueldo_base_semanal = params[:empleado][:sueldo_base_semanal].gsub(',','').gsub('$','').to_f
    if @empleado.save
      redirect_to empleados_path
    else
      render action: 'new'
    end
  end
... 
```

**现在来看视图（我正在使用 HAML）：**

```
= form_for( @empleado, remote: true, html: {multipart: true} ) do |f|
  = show_me_the_errors @empleado

  %table.captura
    %tr
      %td.etiqueta
        = f.label :user_id
      %td.campo
        = f.select  :user_id,
                    User.usuarios_no_asignados,
                    { include_blank: true },
                    { tabindex: 1 }
        = image_tag 'nuevo_24.png',
                    style: 'vertical-align: bottom;',
                    id: 'empleado_nuevo_usuario'
... ( 5 more text fields ) ...

    %tr
      %td.etiqueta
        = f.label :foto
      %td.campo
        = f.file_field :foto,
                       accept: 'image/png,image/gif,image/jpeg' 
```

问题是，虽然没有选择要上传的文件，但一切正常，该命令在与和`respond_to :js`之间的所有交互中都应该正常工作。`create``index``new`

但是，当你选择一个图像时，所有的交互都`create`完全`index`忽略`new`了`HTML`，`respond_to :js`我的意思是，`form for`就像`remote: true`不存在

当一切正常时，URL 是 localhost:3000 并且永远不会更改，但是当我选择要上传的图像时，之后的 URL`crete`变为 localhost:3000/empleados

有人对此有任何线索吗？在过去的 3 天里，我一直在尝试解决这个问题，但失败了。

提前谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-19T14:14:40.920

好的，经过几天尝试找到问题后，我开始研究解决方法。就是这样：

**1）**我创建了一个用于临时存储的数据库表，ID字段设置为没有自动增量，并且具有正常的字段名称：

```
mysql> describe imagens;
+---------------------+--------------+------+-----+---------+-------+
| Field               | Type         | Null | Key | Default | Extra |
+---------------------+--------------+------+-----+---------+-------+
| id                  | int(11)      | NO   | PRI | NULL    |       |
| imagen_file_name    | varchar(500) | YES  |     | NULL    |       |
| imagen_content_type | varchar(500) | YES  |     | NULL    |       |
| imagen_file_size    | int(11)      | YES  |     | NULL    |       |
| imagen_updated_at   | datetime     | YES  |     | NULL    |       |
| created_at          | datetime     | NO   |     | NULL    |       |
| updated_at          | datetime     | NO   |     | NULL    |       |
| lock_version        | int(11)      | NO   |     | 0       |       |
+---------------------+--------------+------+-----+---------+-------+
8 rows in set (0.00 sec) 
```

**2)**在视图 ( `_form.html.haml`) 处：

```
-# this variable will be used as primary key for identifying the image to upload in the database
- ale = Time.now.to_i 
```

**3)**在视图 ( `_form.html.haml`) 处：

我把`file_field`标签分开了

```
-# FORM for general data input
= form_for( @empleado, remote: true ) do |f|
  ... 
```

然后，在我添加的那个表单中，一个带有变量的隐藏文件`ale`和一个非常小的`iframe`

```
-# I use it in order to find out for wich record to search at the temporary DBTable 
= hidden_field_tag :ale, ale
-# this IFRAME will be used to catch the error message returned by rails when uploading the image, it will be invisible
%iframe{src: '#', frameborder:0, height: 0, width: 0, id: 'nulo', name: 'nulo'} 
```

并封装在自己的`form_for`标签中，但没有任何类型`submit`或`commit`按钮。

```
= form_for( @imagen, remote: true, html: {multipart: true, target: 'nulo'} ) do |f|
  -# used to set the primary key to this value
  = hidden_field_tag :ale, ale
  = f.file_field :imagen, {style: 'vertical-align: middle;'} 
```

然后当用户选择一个小javascript来上传图像时，它会通过事件触发器提交：

```
:javascript
  $('#imagen_imagen').change(function(){
    $('#new_imagen').submit();
  }); 
```

**4）**这是imagen模型的*内容*（models/imagen.rb）：

```
class Imagen < ActiveRecord::Base
  attr_accessible :imagen
  has_attached_file :imagen,
                    styles: { t100: '100x100>', t300: '300x300X', t600: '600x600' },
                    convert_options: { all: '-strip' },
                    path: ":rails_root/public/system/:class/:attachment/:id/:style/:filename",
                    url: "/system/:class/:attachment/:id/:style/:filename",
                    hash_secret: 'topsecret'
  validates_attachment_size :imagen,
                            less_than: 250.kilobytes,
                            message: (I18n.t :mensajes)[:paperclip][:grande]
end 
```

**5)**这是 controllers/imagens_controller.rb 的代码：

```
class ImagensController < ApplicationController

  respond_to :js
  # by the way, this sline is from authlogic, a great gem to control the access to your site
  before_filter :require_user

  def create
    @imagen = Imagen.new(params[:imagen])
    @imagen.id = params[:ale]
    @imagen.save
    render text: ''
  end

end 
```

**6)**现在，在 controller/empleados_controller.rb 中的代码是：

```
def create
  @empleado = Empleado.new(params[:empleado])
  if @empleado.save
    imagen = Imagen.find(params[:ale].to_i)
    if imagen
      @empleado.foto = imagen.imagen
      @empleado.save
      imagen.destroy
    end
    redirect_to empleados_path
  else
    @imagen = Imagen.new
    render action: 'new'
  end
end 
```

**7)**词汇表：

*图像*= 图像

*empleado* = 雇员

*empleados* = 员工

*ale* = aleatorio 的简称，我的意思是，随机的

*照片*= 图片或摄影

**8)**结论：

***有用 ！！！***

**9）**待办事项：

缺点是上传图片后，图片会保存在数据库中，然后可以取消表单或更改页面，这样会保留记录和图片。

一开始，我将在我的管理模块中创建一个链接，该链接会破坏包含临时图像的表中的所有记录，例如`Imagen.all.each{|x| x.destroy }`

稍后，我将编写一个脚本，在凌晨 2:00 执行该代码。

# c - IP_RECVDSTADDR 未定义

> ID：12955291
> 
> 赞同：-1
> 
> 时间：2012-10-18T12:58:43.767
> 
> 标签：c, linux, network-programming

错误：IP_RECVDSTADDR 未声明（在此函数中首次使用），我可以在 Linux 上使用此套接字选项还是它已经未定义我在 linux 上的所有 in.h 文件中搜索但我找不到任何关于它的信息。

史蒂文使用它，但他打字

```
#ifdef IP_RECVDSTADDR 
.......
#endif 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:06:34.457

如果没有为您的实现定义它，那么您将无法使用它。

斯蒂芬斯的书之所以使用它，`#ifdef`是因为如果它没有定义，你就不能使用它。

该选项是一个`BSD`特定的选项；它出现在 Mac OS X 和 FreeBSD 中

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:27:44.237

首选选项是`IP_PKTINFO`BSD 和 OSX，并没有为 IPv4 实现此功能，值得注意的是，它们确实根据 IPv6 标准使用`IPV6_PKTINFO`. 同样有趣的是，Solaris 定义了两者。

因此，您需要每个平台特定的代码来处理 IPv4。

# magento - 如何将地址和发货项目加入 Magento 中的 order_shipment 集合？

> ID：12955295
> 
> 赞同：0
> 
> 时间：2012-10-18T12:59:01.947
> 
> 标签：magento, join, collections

我需要从 Magento 导出包含完整地址详细信息和完整货件详细信息的已过滤货件集合。

我得到（未过滤的）集合：

```
/* @var Mage_Sales_Model_Resource_Order_Shipment_Collection $collection */
$collection = Mage::getModel('sales/order_shipment')->getCollection(); 
```

该对象`$collection`提供两个连接函数，`join`和`joinAttribute`。`joinAttribute`继承自 Mage_Sales_Model_Resource_Collection_Abstract 并且未实现。

地址模型是 EAV 模型，所以`join`我没有得到地址的属性，只有实体 ID。

另一种解决方案是获取所有地址的集合，并将其与过滤后的货物集一起加入。然后问题是获取所有货物的集合，因为下面的代码返回一个空集合。

```
/* @var Mage_Customer_Model_Resource_Address_Collection $collection */
$collection = Mage::getModel('customer/address')->getCollection()->addAttributeToSelect('*'); 
```

如何获取包含完整地址详细信息和所有货件的货件集合？

# ios - 使用 ZipArchive 压缩 NSDocumentDirectory 中的子目录/子文件夹

> ID：12955296
> 
> 赞同：0
> 
> 时间：2012-10-18T12:59:09.337
> 
> 标签：ios, zip

如何压缩`NSDocumentDirectory`using的子目录`ZipArchive`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T12:20:32.730

```
BOOL isDir=NO;
NSArray *subpaths;
NSFileManager *fileManager = [NSFileManager defaultManager];    
if ([fileManager fileExistsAtPath:dataPath isDirectory:&isDir] && isDir)
{
    subpaths = [fileManager subpathsAtPath:dataPath];
}

NSString *archivePath = [dataPath stringByAppendingString:@".zip"];

ZipArchive *archiver = [[ZipArchive alloc] init];
[archiver CreateZipFile2:archivePath];

for(NSString *path in subpaths)
{
    NSString *longPath = [dataPath stringByAppendingPathComponent:path];

    if ([fileManager fileExistsAtPath:longPath isDirectory:&isDir] && !isDir)
    {
        [archiver addFileToZip:longPath newname:path];      
    }

}

BOOL successCompressing = [archiver CloseZipFile2];
if(successCompressing)
    NSLog(@"Successfully Zipped");
else
    NSLog(@"Fail"); 
```

# ip - 2个位置之间的IP比较

> ID：12955300
> 
> 赞同：0
> 
> 时间：2012-10-18T12:59:15.657
> 
> 标签：ip

一个位置可以有超过 1 个 IP 地址吗？我有 2 个 IP 地址，需要知道它们是否来自同一来源。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:33:21.113

您在问题中缺少对“位置”和“来源”的明确定义，但假设您的意思是两者的“物理机器”（因为很明显多台机器将具有不同的地址并且单台机器可以更改它的 IP 地址随时间变化）。

在这种情况下，答案是**肯定**的。操作系统可以根据需要将任意数量的 IP 地址绑定到物理网络端口（以及单个 MAC——以太网使用的物理地址）。

在 HTTP/1.1 带有“Host”标头之前，绑定多个 IP 地址是执行“虚拟 Web 托管”的标准方式。提供商将使用 DNS 将不同的主机名映射到同一网络（通常也是同一子网）上的不同 IP，然后将它们全部分配到同一接口。网络服务器将从传入连接中获取地址信息，并根据*本地*IP 地址知道正在访问哪个虚拟主机。

这导致公共 IP 地址的使用频率高于典型值，但随着 HTTP/1.1 的普及，这种做法现在已经不复存在。

我不确定 Windows 是如何呈现的，但 Linux 会呈现一个具有多个 IP 地址的物理接口作为多个逻辑接口，例如“eth0”、“eth0:1”、“eth0:2”等。每个逻辑接口都有一个即使它们共享相同的物理接口，也是唯一的 IP 地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:28:42.520

这很难说。尤其是很难判断这些 IP 地址是否来自不同的时间。今天我的 IP 地址可能与明天不同。

即使它们来自同一时间，如果第一个过载或发生故障，我的内部设备中的负载均衡器也可能通过故障转移线路发送我的数据包。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:07:38.057

一个网络适配器通常一次只有一个 IP 地址，而典型的最终用户只有一个活动的网络连接，但即使这样，IP 地址也可以更改。用户可以从无线切换到有线并返回，或者断电可能会重置 ISP 的 DHCP 服务器（为每个人分配一个新的 IP 地址）。

如果您想在 IP 地址发生变化的情况下识别用户，则需要通过存储在 cookie 中的会话 id 来识别用户。由于两个用户可以拥有相同的 IP 地址（整个公司可能在 NAT 后面），因此您永远不应依赖 IP 地址进行识别。

# modeling - 线性时序逻辑 (LTL) 和自动机建模

> ID：12955303
> 
> 赞同：1
> 
> 时间：2012-10-18T12:59:19.060
> 
> 标签：modeling, automata, automata-theory

我很难理解我们如何使用线性时间逻辑对这些自动机建模。有人可以请在此[链接](http://imageshack.us/a/img9/9572/avtomati.png)图片中的案例上向我解释这一点，或者将我指向一个在示例中解释这一点的来源。

我提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T20:59:38.190

LTL 公式是在字母表上定义的（通常称为“原子命题”，在您的示例中，字母表是 set `{x,y}`）。LTL 公式将字母表子集的无限序列拆分为满足公式和不满足公式的（无限）单词。例如，单词`{x}, {x,y}, {}, {}...`满足公式`F not x and not y`，但不满足公式`Gy`。

Buchi 自动机也是如此。它在某个字母表上读取一个无限的单词，然后接受或拒绝该单词。Vardi 和 Wolper 表明，给定一个 LTL 公式，构造一个 Buchi 自动机是可能的，该自动机准确地接受满足该公式的无限词。你可以在[这里](http://en.wikipedia.org/wiki/Linear_temporal_logic_to_B%C3%BCchi_automaton)看到建筑。

# java - 无法导出有效的 jar 文件？

> ID：12955308
> 
> 赞同：-1
> 
> 时间：2012-10-18T12:59:35.097
> 
> 标签：java, class, jar, export

![在此处输入图像描述](../Images/a034add8a8c08bf4fb891409b828f92b.png)

在我的项目中，我有五个类，但是当我导出项目的 jar 文件时，它只包含一些类，而不是源文件夹中的所有类。我怎样才能解决这个问题？

由于 Jar 不包括所有类，我最终以**NoClassDefFoundError**结束。

1) 对于我的项目，我使用的是 eclipse 版本 3.6.2、ADT 版本 20 和最新的 Android SDK

2）所有类都在SRC文件夹下

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T11:29:54.607

最后我想通了。

在 Eclipse 中，当您导出 jar 文件时，它仅包含没有任何错误或警告的类。因此，要生成包含警告的所有类的 jar 文件，您需要选择**生成带有警告的 Jar。**

# php - 在这个例子中如何使用 javascript 而不是 PHP

> ID：12955310
> 
> 赞同：0
> 
> 时间：2012-10-18T12:59:36.043
> 
> 标签：php, javascript, ajax, implode

大家好，我需要将结果从 PHP 返回到 Javascript。

这是我的 PHP 代码，我需要将其形成为在 javascript 中使用。

```
$result = dbMySql::Exec('SELECT Latitude,Longitude FROM data');
while ($row = mysqli_fetch_assoc($result))
   $coordinates[] = 'new google.maps.LatLng(' . $row['Latitude'] . ', ' . $row['Longitude'] . ')'; 
```

我需要返回一个数组 $coordinates 并像这样内爆它，但使用 Javascript：

```
var flightPlanCoordinates = [<?php echo implode(',', $coordinates) ?>]; 
```

这就是我开始使用 javascript 的方式：

```
$.ajax({
        type: 'POST',
        url: 'history.php',
        data: {'query': url},
       });
var flightPlanCoordinates = [<?php echo implode(',', $coordinates) ?>]; 
```

我需要用返回的数据和 JOIN 或其他与 PHP 中的 implode 执行相同操作的函数填充此变量。

编辑：

这是我的ajax代码：

```
$.ajax({
                  type: 'POST',
                  url: 'history.php',
                  data: {
                  'id_user':$('#select-choice-user').val(),
                  'reg_id':$('#select-choice-reg').val(),
                  'd_year1':$('#select-choice-year1').val(),
                  'd_month1':   $('#select-choice-month1').val(),
                  'd_day1':$('#select-choice-day1').val(),
                  'd_year2':$('#select-choice-year2').val(),
                  'd_month2':   $('#select-choice-month2').val(),
                  'd_day2':$('#select-choice-day2').val()
                  },
                  success: function(data)//callback to be executed when the response has been received
                        {

                            for (var i=0;i<data.length;i++)
                            {
                                flightPlanCoordinates[i] = new google.maps.LatLng(data[i].x,data[i].y);
                            }
                        }
                }); 
```

这些是 JSON 格式的返回值：

```
[
    {
        "x": "46.5564266666667",
        "y": "15.6467166666667"
    },
    {
        "x": "46.5566583333333",
        "y": "15.6465533333333"
    },
    {
        "x": "46.5567416666667",
        "y": "15.6465566666667"
    },
    {
        "x": "46.556745",
        "y": "15.646555"
    },
    {
        "x": "46.5567366666667",
        "y": "15.6465766666667"
    },
    {
        "x": "46.55675",
        "y": "15.6465933333333"
    },
    {
        "x": "46.55677",
        "y": "15.6466116666667"
    },
    {
        "x": "46.5567766666667",
        "y": "15.6466183333333"
    },
    {
        "x": "46.5567783333333",
        "y": "15.64662"
    },
    {
        "x": "46.5567583333333",
        "y": "15.6466066666667"
    },
    {
        "x": "46.556725",
        "y": "15.6465966666667"
    },
    {
        "x": "46.5566983333333",
        "y": "15.6465983333333"
    }
] 
```

我已经检查了 JSON 验证器并且格式是有效的。所以我不知道可能出了什么问题。

我将放置 PHP 代码只是为了确保它按应有的方式编写：

```
$result = dbMySql::Exec($query);
while ($row = mysql_fetch_assoc($result))
{
    $coordinates[] = array('x' => $row['Latitude'], 'y' => $row['Longitude']);
}
echo json_encode($coordinates);//send as JSON object 
```

我在控制台中遇到的错误类型：

```
Uncaught Error: Invalid value for constructor parameter 0: undefined   
Uncaught TypeError: Cannot set property '0' of undefined 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:01:32.103

你见过[`json_encode`](http://php.net/manual/en/function.json-encode.php)吗？这应该为您带来魔力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:12:05.220

好的，阅读评论，似乎`var flightPlanCoordinates`应该为ajax调用的返回值分配这种情况。在这种情况下：

```
var flightPlanCoordinates = [];
$.ajax({type: 'POST',
        url: 'history.php',
        data: {'query': url},
        success: function(data)//callback to be executed when the response has been received
        {
            for (var i=0;i<data.length;i++)
            {
                flightPlanCoordinates[i] = new google.maps.LatLng(data[i].x,data[i].y);
            }
        }
    }); 
```

而且，为了避免`eval`，只需像这样返回数据：

```
while ($row = mysqli_fetch_assoc($result))
{
    $coordinates[] = array('x' => $row['Latitude'], 'y' => $row['Longitude']);
}
echo json_encode($coordinates);//send as JSON object 
```

这应该够了吧

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-18T13:09:38.213

```
var flightPlanCoordinates = <?php echo json_encode($coordinates); ?> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-18T13:11:00.260

```
<script>  
  var coordinates = new Array();
    <?php
        foreach($coordinates as $key => $value) {
    ?>
        coordinates[<?php echo $key; ?>] = [<?php echo $value; ?>];
    <?php
         }
    ?>
</script> 
```

这将数组从 php 传递到 javascript

# java - 如何在 JAX-WS Web 服务中返回自定义复杂类型？

> ID：12955313
> 
> 赞同：2
> 
> 时间：2012-10-18T12:59:44.550
> 
> 标签：java, web-services, jax-ws

我最近一直在尝试编写一个返回自定义对象的 Web 服务。这个对象很简单：

```
public class AppInfo {
private int AppID;
private String Appname;
private String AppDesc;
private String AppPriv;

public int GetAppID()
{ return this.AppID;}

public void SetAppID(int AppID)
{ this.AppID = AppID;}

public String GetAppName()
{ return this.Appname;}

public void SetAppName(String AppName)
{ this.Appname = AppName;}

public String GetAppDesc()
{ return this.AppDesc;}

public void SetAppDesc(String AppDesc)
{ this.AppDesc = AppDesc;}

public String GetAppPriv()
{ return this.AppPriv;}

public void SetAppPriv(String AppPriv)
{ this.AppPriv = AppPriv; }

public AppInfo()
{}
} 
```

但是，无论出于何种原因，当 NetBeans 生成 WSDL 和 XSD 时，AppInfo 总是返回：

```
<xs:complexType name="appInfo">
<xs:sequence/>
</xs:complexType> 
```

搜索有关返回自定义类的任何信息似乎让我回到了计算器或图像 Web 服务的重新哈希，这对我来说都没有用。不能使用 JAX-WS 返回自定义对象吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:08:38.687

很可能是因为您没有使用 JavaBean 标准的 getter/setter？尝试将您的 getter/setter 更改为

```
public String getAppPriv()
{ return this.AppPriv;}

public void setAppPriv(String AppPriv)
{ this.AppPriv = AppPriv; } 
```

# sql - JPA 中的 Alias Select 语句给出了无效的列名

> ID：12955316
> 
> 赞同：1
> 
> 时间：2012-10-18T12:59:53.587
> 
> 标签：sql, jpa, glassfish-3

我对这些别名的**“c”**选择语句有疑问。我从数据库中得到一个无效的列**“c”**错误。但是网上各种例子都是用这种写select语句的。

```
Query query = em.createQuery(
"SELECT c FROM Country c WHERE c.name = 'Canada'");
Country c = (Country)query.getSingleResult(); 
```

这种写供应商的方式是特定的吗？

谢谢你的帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:03:48.900

你不能只说 c 被选中，因为它只是一个别名

你必须尝试这样的事情；

> select c.name from country c where c.name='canada'

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:08:07.713

使用 SELECT 时，您需要指定数据库中的哪些列。如果您想要所有列，请使用

```
SELECT * FROM <table> 
```

或者，如果您要连接表，并且只希望该表中的列使用

```
SELECT <table>.* FROM <table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:34:14.383

上面的示例是对类/实体的查询，而不是对本机数据库的查询。C 代表对象实例。我的错误是我混淆了原生查询和普通查询。

# php - PHP 服务器设置中的什么会导致 $_REQUEST 为空？

> ID：12955318
> 
> 赞同：5
> 
> 时间：2012-10-18T13:00:11.657
> 
> 标签：php, ajax, wordpress, request

我一直在我的本地机器上开发一个 WordPress 网站并在我自己的服务器上托管。一切运行完美。

自从移至客户端服务器后，编辑器中的某些功能已停止工作。具体来说，那些涉及 ajax 请求的。我研究了一些事情，它`die(0)`在`admin-ajax.php`以下代码中退出：

```
// Require an action parameter
if ( empty( $_REQUEST['action'] ) )
    die( '0' ); 
```

进一步阅读看到在in`$_REQUEST`期间被重置如下：`wp_magic_quotes()``wp-includes/load.php`

```
$_REQUEST = array_merge( $_GET, $_POST ); 
```

服务器上的 PHP 设置可能是什么问题，在期间可能会`$_REQUEST`保持空白？`wp_magic_quotes()``ajax-admin.php`

如果我编辑`ajax-admin.php`添加`$_REQUEST`重置：

```
$_REQUEST = array_merge( $_GET, $_POST );

// Require an action parameter
if ( empty( $_REQUEST['action'] ) )
    die( '0' ); 
```

...然后编辑器中的所有 ajax 都可以正常工作。

但我宁愿不编辑核心文件，所以想知道如何更改服务器设置以使用标准文件？

**设置详情：**
Wordpress 3.4.2
PHP 5.4.5 使用 Apache 2.0 Handler
Unix 服务器

**PHP 设置：**
request_order：无值
variables_order：GPCS

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:06:37.700

检查两个指令

1) request_order [http://www.php.net/manual/en/ini.core.php#ini.request-order](http://www.php.net/manual/en/ini.core.php#ini.request-order)

2) variables_order [http://www.php.net/manual/en/ini.core.php#ini.variables-order](http://www.php.net/manual/en/ini.core.php#ini.variables-order)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:04:22.460

验证您的 php.ini 配置。对于 Get 和 Post，有一个选项 request_order 必须设置为“On”，Value 必须设置为“GP”。

它已关闭..但这就是我在 WAMP 的本地 ini 上的样子。

```
; request_order
;   Default Value: None
;   Development Value: "GP"
;   Production Value: "GP" 
```

# uitextfield - -[UITextFieldLabel setTextColor:] 中的断言失败

> ID：12955319
> 
> 赞同：4
> 
> 时间：2012-10-18T13:00:15.420
> 
> 标签：uitextfield, textfield, categories

我得到以下断言失败：

****-[UITextFieldLabel setTextColor:], /SourceCache/UIKit_Sim/UIKit-1448.89/UILabel.m:314 中的断言失败****

 **在这条线上

***[self.window makeKeyAndVisible];***

在 appDidFinishLaunching 方法中。

```
 Unhandled exception: Debug info are

    Invalid parameter not satisfying: color
    (
"4   libc++abi.dylib                     0x991331fe _Z19safe_handler_callerPFvvE + 15",
"5   libc++abi.dylib                     0x99133268 __cxa_bad_typeid + 0",
"6   libc++abi.dylib                     0x991342a0 _Z23__gxx_exception_cleanup19_Unwind_Reason_CodeP17_Unwind_Exception + 0",
"7   libobjc.A.dylib                     0x0167e416 __objc_personality_v0 + 0",
"8   CoreFoundation                      0x0182cef8 +[NSException raise:format:arguments:] + 136"
  ) 
```

任何帮助，将不胜感激 ：）

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:32:42.710

我有同样的问题，我终于找到了问题的原因。

当 nil 颜色作为参数传递时，它看起来像 [UILabel setTextColor:] 在（仅！）iOS 4.x 上崩溃。我的应用在 iOS 5 和 6 上运行良好。

我正在使用一个使用 IB 创建的导航栏，其中有一个 UITextField（通常是 BarButtonItem 的子视图）。这个 TextField 有一个 TextColor 属性留给它的默认值。对于放置在普通视图上的 TextField，这可以正常工作，但不适用于导航栏中的 TextField。一旦我将 TextColor 更改为其他任何内容（例如深色文本颜色），就可以正常工作并且不会导致任何进一步的崩溃。

很难追查这个问题，因为它发生在应用程序启动时以及加载所有 NIB 文件时，因此调试代码或异常断点不起作用。甚至崩溃日志也无济于事，因为它只是告诉您它是在加载 NIB 文件时发生的，但没有告诉您是哪一个。就我而言，启动时会加载很多视图。我终于能够通过创建 UILabel 类的类类别来追踪问题，并在`-(void )setTextColor:(UIColor *)color`该类别中添加了一个方法。在这种方法中，我随后能够设置断点，并发现参数仅在一种情况下为 nil。此外，我随后添加`-(void )setText:(NSString *)text`并查看了为这个特定的 UILabel 设置了哪些文本，其中颜色先前设置为非 nil。text 参数最终将我指向导航栏中的 UITextField。

也许这在其他情况下会有所帮助，因为此崩溃与 UINavigationBar 中的 UITextField 无关。**

# jquery - 如何向具有某些 css 类 onsubmit 输入的 div 添加样式？

> ID：12955321
> 
> 赞同：0
> 
> 时间：2012-10-18T13:00:17.980
> 
> 标签：jquery

我无法理解我做错了什么。

如果输入无效，我想为父 div 添加背景。

我的意思是 - 如果电子邮件输入 hasClass 错误，则将背景添加到 field2。

这是我的js代码：

```
 $('.login').submit(function() {

 $(':input').each(function() {

 if ($(this).hasClass('valid')) {

 $(".field2").has($(this)).removeClass('bg2').addClass('bg1');
  }
 if ($(this).hasClass('error')) {

 $(".field2").has($(this)).removeClass('bg1').addClass('bg2');

  }
 })

}); 
```

我有工作代码：

```
 $('input').each(function() {

  if ($(this).hasClass('valid')) {

 $(".field2").has(this).removeClass('bg2').addClass('bg1');
  }
 if ($(this).hasClass('error')) {

 $(".field2").has(this).removeClass('bg1').addClass('bg2');

 }
 })
}
window.setInterval(foo3, 1); 
```

**但是为什么以前的变体不起作用？**

和 HTML：

```
 <div class="field2">
  <label for="user_email" id="em">E-mail Adress</label>

    <input id="user_email" name="user[email]" size="30" type="email" value="" class="error">
  </div> 
```

我的 jQuery 出了点问题 - 有人可以建议什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:04:25.277

这是因为当页面提交时，页面将回发到服务器。添加[event.preventDefault()](http://api.jquery.com/event.preventDefault/)以停止回发并将[.submit()](http://api.jquery.com/submit/)添加到代码末尾以重新提交。看下面的代码：

```
$('input[type="submit"]').click(function(e) {
   e.preventDefault();

   $(':input').each(function() {
      if ($(this).hasClass('valid')) {
      $(".field2").has($(this)).removeClass('bg2').addClass('bg1');
      }
      if ($(this).hasClass('error')) {
      $(".field2").has($(this)).removeClass('bg1').addClass('bg2');
      }
   })

   if ($('input[class="error"]').length == 0) {
      $('.login').submit();
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:03:02.117

我想`$(':input')`选择器应该是`$('input')`。

因为`:input`不匹配任何 DOMElements。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:04:20.710

[`closest()`](http://api.jquery.com/closest/)在这种情况下你最好使用：

```
$('.login').submit(function() {
    $(':input').each(function() {
        if ($(this).hasClass('valid')) {
            $(this).closest('.field2').removeClass('bg2').addClass('bg1');
        }

        if ($(this).hasClass('error')) {
            $(this).closest('.field2').removeClass('bg1').addClass('bg2');
        }
    })
});​ 
```

# django - Django 检索 GET 列表

> ID：12955323
> 
> 赞同：1
> 
> 时间：2012-10-18T13:00:28.733
> 
> 标签：django, list, url

我是 Django 新手，我有一个 URL 列表，例如：

```
example.com?item=test&item=for&test=url 
```

我知道如何在视图中检索此值：

```
a = request.GET.getlist('item') 
```

我的问题是：如何在模板中检索此列表？

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:32:56.393

您需要通过模板上下文传递给模板。

例如

```
def myview(request):
    a = request.GET.getlist('item')
    ...
    ctx = {'myitems': a}
    return render(request, 'your_template.html', ctx) 
```

在模板中：

```
{% for item in myitems %}
    <p>{{ item }}</p>
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-24T03:21:55.590

您可以使用以下方法获取列表：

```
{% for e in request.GET.lists %}{% if e.0 == 'item' %}{{ e.1 }}{% endif %}{% endfor %} 
```

这将显示您想要的列表：

```
['test', 'for', 'url'] 
```

# fonts - 当我将 css 文件移动到自己的文件夹时，Web 字体在服务器上不起作用

> ID：12955325
> 
> 赞同：2
> 
> 时间：2012-10-18T13:00:29.383
> 
> 标签：fonts

因此，当我启动这个网站时，我犯了一个错误，忘记将我的外部 CSS 文件放入根文件夹中它自己的“css”文件夹中。

在我的根目录中创建了一个新文件夹，将 CSS 文件粘贴到该文件夹​​中，并确保它正确链接到我的 HTML。除了背景图像（有 2 个）之外，所有样式都有效。

在我移动我的 CSS 文件之前，背景图像的代码看起来像这样 -

```
 background-image: url(images/main_bg.png); 
```

我重新输入了它，然后它看起来像这样，它起作用了。我的背景图像现在显示在我的服务器和本地主机上。

```
 background-image: url(../images/main_bg.png); 
```

但是，我的字体工具包现在不显示了。我尝试在每个链接前面添加“.../”，假设它会像背景图像一样工作，但没有运气。所有字体都在服务器上自己的文件夹中。这就是它们在我的样式表中的样子——

```
 @font-face {
font-family: 'OpenSansExtraboldItalic';
src: url('fonts/OpenSans-ExtraBoldItalic-webfont.eot');
src: url('fonts/OpenSans-ExtraBoldItalic-webfont.eot?#iefix') format('embedded-opentype'),
     url('fonts/OpenSans-ExtraBoldItalic-webfont.woff') format('woff'),
     url('fonts/OpenSans-ExtraBoldItalic-webfont.ttf') format('truetype'),
     url('fonts/OpenSans-ExtraBoldItalic-webfont.svg#OpenSansExtraboldItalic') format('svg');
font-weight: normal;
font-style: normal; 
```

我如何错误地链接它们？这可能是我眼皮底下的愚蠢答案，但我很生气，哈哈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:04:48.900

将 ../ 添加到 url 应该可以，就像图像一样。CSS 中的所有内容都与 css 文件所在的路径相对链接。您是否不小心移动了字体文件夹？确保在此设置中您的根文件夹中有一个字体文件夹。

# iphone - 无法发送推文消息。ios5出现错误

> ID：12955327
> 
> 赞同：0
> 
> 时间：2012-10-18T13:00:31.257
> 
> 标签：iphone, ios

嗨，我正在使用 ios5 twitter 集成，我知道一条独特的消息不会第二次在 twitter 上发布。

但是尝试第二次发送相同的消息，它显示警报消息为“无法发送推文”。

这很好。但立即，它转到

```
if(result == TWTweetComposeViewControllerResultDone) 
{

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Done" message:@"tweet posted successfully" delegate:nil cancelButtonTitle:@"Ok" otherButtonTitles:nil];
    [alert show];
    [alert release];
} 
```

并显示此消息。我认为这是一个错误，请告诉我如何纠正这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:10:55.983

在 iOS 5 推特集成中，

`TWTweetComposeViewControllerResult`只有2个选项

当用户选择完成时——`TWTweetComposeViewControllerResultDone`

当用户选择取消时——`TWTweetComposeViewControllerResultCancel`

这个结果不依赖于苹果在后台更新的推文。如果推文在更新时失败，则会显示警报。

所以我建议不要为成功或失败实施任何自定义弹出窗口。由于苹果本身实现了成功/失败推文更新的指示。成功时它会播放声音，失败时会弹出一个带有原因的弹出窗口。

# asp.net-mvc-3 - 子对象的验证

> ID：12955332
> 
> 赞同：2
> 
> 时间：2012-10-18T13:00:44.190
> 
> 标签：asp.net-mvc-3, validation, jquery-validate

我有一个包含子对象的对象。例如。

```
public class Person
{
    public string Name { get; set; }
    public Car Car { get; set; }
 }

 public class Car
 {
     public int CarId{get;set;
     public string Name { get; set; }
     public string Year { get; set; }
 } 
```

然后在我的 Razor 视图中，我使用 DropDownlistFor，其中包含用户可以选择的汽车列表。我像绑定下拉列表一样

```
 @Html.LocalLabelFor(m => m.Person.Car)
    @Html.DropDownListFor(m => m.Person.Car, new SelectList(Model.Cars, "CarID, "Name"), "Select") 
```

当用户未选择汽车时，jquery 验证仍将 CarId 验证为未选择。汽车对象必须可以为空。

我知道我可以通过创建一个平面视图模型来解决这个问题。

有没有其他方法可以让汽车在表格上成为可选的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:19:30.720

只需让 CarId 可以为空：

```
public class Car
 {
     public int? CarId { get; set };
     public string Name { get; set; }
     public string Year { get; set; }
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:34:12.777

清除控制器动作中模型状态的错误

例如。

```
[HttpPost]
public ActionResult Save(Person person)
{
      if (person.Car != null && person.Car.CarId == 0)
      {
        if (ModelState.ContainsKey("Car.CarId"))
          ModelState["Car.CarId"].Errors.Clear();
      }

      return View();
} 
```

# android - 从代码设置屏幕自动旋转系统设置

> ID：12955335
> 
> 赞同：4
> 
> 时间：2012-10-18T13:00:56.347
> 
> 标签：android

我试图弄清楚如何以编程方式修改此设置。有人可以指出一个 API 或提出一些建议吗？

图像说明了此选项在 Android 中的位置：

![在此处输入图像描述](../Images/51f391ac7ed1c088bbf8c8535166e2b8.png) ![在此处输入图像描述](../Images/6976da3343008715e69448862c5ce859.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:15:38.227

检查此链接

[http://developer.android.com/reference/android/provider/Settings.System.html#ACCELEROMETER_ROTATION](http://developer.android.com/reference/android/provider/Settings.System.html#ACCELEROMETER_ROTATION)

这是给你的代码

```
android.provider.Settings.System.putInt(getContentResolver(),
android.provider.Settings.System.ACCELEROMETER_ROTATION,1); 
```

并且清单中需要此权限

`<uses-permission android:name="android.permission.WRITE_SETTINGS" />`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T13:04:48.497

如果您尝试将应用程序锁定在特定的屏幕方向，则可以`android:screenOrientation`在 Activity 的清单中使用该属性。

见[这里](http://developer.android.com/guide/topics/manifest/activity-element.html#screen)。

# javascript - Angular.js Backbone.js 和其他 MV* 模式的 js 库？

> ID：12955337
> 
> 赞同：30
> 
> 时间：2012-10-18T13:01:08.920
> 
> 标签：javascript, web-applications, backbone.js, frameworks, knockout.js

我是 Web 应用程序的新手，更具体地说是这种`MV*`模式。我们正在制作一个 Web 应用程序，我们正在考虑脱离 jQuery，但并非完全如此，但我们正在尝试实现一种支持 MVC、MVVM 或 MVP 的客户端语言。基本上是将视图与模型分开的东西。作为这种`MV*`模式的新手，我偶然发现了[**这个网站**。](http://codebrief.com/2012/01/the-top-10-javascript-mvc-frameworks-reviewed/)

它基本上列出了（几乎！）所有支持这种`MV*`模式的客户端语言/框架，在访问它之后我真的很困惑。因为根据这个网站..

> 归根结底，Ember.js 是唯一一个拥有我想要的一切的框架。我最近将一个相对较小的 Backbone.js 应用程序移植到 Ember.js，尽管存在一些小的性能问题，但我对生成的代码库更满意。在 Yehuda Katz 的支持下，Ember.js 周围的社区也很棒。这绝对是需要注意的框架。

但是在 SO 上，我发现[了 this](https://stackoverflow.com/a/9408089)，它让我认为 angular 更好，而在 SO 上，[this](https://stackoverflow.com/a/10264263)和[this](https://stackoverflow.com/a/11260673)让我认为它可能是我正在寻找的主干。

更糟糕的是，测试显示完全不同的结果。这里

[http://jsfiddle.net/HusVw/1/](http://jsfiddle.net/HusVw/1/) `Backbone clear winner`

[http://jsfiddle.net/ericf/NrpcQ/](http://jsfiddle.net/ericf/NrpcQ/) `Backbone winner again`

[http://jsperf.com/angular-vs-knockout-vs-extjs-vs-backbone/2](http://jsperf.com/angular-vs-knockout-vs-extjs-vs-backbone/2) `angular winner for less data for more its knockout`

[http://jsperf.com/knockout-js-vs-direct-dom-manipulation/3](http://jsperf.com/knockout-js-vs-direct-dom-manipulation/3) `Backbone again`

[http://jsperf.com/angular-vs-knockout-vs-ember/33](http://jsperf.com/angular-vs-knockout-vs-ember/33) `no way its ember as the site mentioned`

所以，基本上这一切都让我感到困惑，我无法决定我应该以网络的名义学习什么，以及我应该在网站中实现什么。在测试中`Backbone`显然很突出，但我听说过很多关于`knockout`的，但我提到的 SO 链接说的是`angular`? 我知道这可能取决于我目前正在开发的应用程序，但我想要更广泛的观点，什么不仅对这个项目有用，而且对长期有用？在这种情况下，您更喜欢哪个框架？或者我应该全部学习吗？（jk，在合理的时间内真的不能这样做。）

为了让事情变得更糟，我听说了[dart](http://www.dartlang.org/)，[wiki](http://en.wikipedia.org/wiki/Dart_%28programming_language%29)说..

> Dart 的目标是“最终取代 JavaScript 作为开放 Web 平台上 Web 开发的通用语言”。

因此，如果要替换 js，为什么我还要考虑学习这些 js 库/框架？

所以，基本上，一切都搞砸了，我完全糊涂了？有人可以帮我决定吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-18T13:13:43.003

可能没有客观的答案，但这是我的 2 美分：

Backbone 通常会导致更大的代码库更难维护。与您的链接中的轶事类似，我参与了一个项目，其中代码从 Backbone 的 2500 行缩减到 Angular 的 600 行。淘汰赛可能会产生同样小的（=好）结果。我的同事们已经从 Backbone 搬到了 Knockout，之后更快乐了。

Backbone 的优势在于它非常轻巧，并为您提供了更多构建事物的选择。这也意味着您可以进行更多的性能调整，因此它可以更快。这些相同的方面也是它的缺点：您**需要**自己构建事物，这意味着：更多代码、更复杂并且可能存在更多错误。

关于您提到的测试：它们几乎不客观，因为它们强调一个非常特殊的用例。此外，它们是由 Backbone 的作者本人发布的，因此显然它们很好地展示了 Backbone。对于普通的 UI，无论您选择 3 个（Backbone、Angular、Knockout）中的哪一个，性能都应该不是问题。Angular 的一个警告：如果您想在页面上动态显示超过 2000 个元素，这可能会出现问题（请参阅 Angular 的创建者本人的回答：[AngularJS 中的数据绑定如何工作？](https://stackoverflow.com/questions/9682092/databinding-in-angularjs)）。

关于 Dart：它的目标是成为一种语言，而不仅仅是一种语言中的 MV* 框架。那是一个完全不同的野兽，如果你只需要一个 MV* 框架，Dart 将是矫枉过正。此外，Dart 还很年轻，大多数浏览器都没有原生支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T13:13:11.193

嗯，首先，这个问题真的没有任何“好的”答案。如果你问他们的创建者，所有 MVC 库都很好：p 也就是说，我建议你开始阅读[TODO-MVC](http://todomvc.com/)中的示例，这样你就可以看到一个简单的 TO-DO Web 应用程序需要多少代码，以及有多复杂是。然后自己决定你愿意做什么。我个人的推荐是Backbone。此外，还有一些互补的库可以做（几乎）神奇的事情，例如[Backbone Nested](https://github.com/afeld/backbone-nested)。

祝你好运！

# symfony - 如何安装 Symfony2.1 的 FosJSRoutingBundle

> ID：12955340
> 
> 赞同：0
> 
> 时间：2012-10-18T13:01:13.393
> 
> 标签：symfony, bundle, symfony-2.1, composer-php

我不想安装 FosJSRoutingBundle，但自述文件说要使用`dep`.

请注意，我将我的应用程序更新到**Symfony2.1**并且我使用`composer.json`并`composer.phar`安装了任何捆绑包（如文档所建议的那样）。

因此，如何使用Symfony2.1 下的**Composer安装该捆绑包？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T15:39:07.447

## 第 1 步：将[Packagist.org](https://packagist.org/)添加到您的书签。

相信我，你会经常去那里的！

## 第 2 步：找到包裹详情并添加到您的`composer.json`文件中

要在 Symfony 2.1.x 应用程序中安装包，您只需在 Packagist 上搜索它，然后将包的名称和相关版本添加到您的`composer.json`文件中。所以在这种情况下，你会找到[friendsofsymfony/jsrouting-bundle](https://packagist.org/packages/friendsofsymfony/jsrouting-bundle)包。通过查看它的要求，你会发现“dev-master”版本（这通常是你想要的版本，但并不总是那么小心）迎合了你当前的 Symfony 版本：`symfony/framework-bundle: >=2.0,<2.2-dev`. 因此，您只需将以下内容添加到文件的`"require":`部分中`composer.json`：

```
"friendsofsymfony/jsrouting-bundle": "dev-master" 
```

或者，如果您在命令行上更开心，composer.phar 会为您提供一种方法：

```
$ php composer.phar require friendsofsymfony/jsrouting-bundle dev-master 
```

## 第 3 步：更新您的供应商

这只是运行以下命令的一种情况。它将安装供应商及其所有依赖项。

```
$ php composer.phar update 
```

## 笔记

`php composer.phar update`running和running 之间的区别在于`php composer.phar install`它将`update`根据您的配置安装可用的最新包，然后将每个包的当前版本写入`composer.lock`文件。改用`install`只会安装`composer.lock`文件中当前列出的版本。

# image - 用它们的骨架替换连接的区域

> ID：12955345
> 
> 赞同：1
> 
> 时间：2012-10-18T13:01:28.680
> 
> 标签：image, matlab, image-processing, morphological-analysis, mathematical-morphology

![具有一些连通区域的二值医学图像](../Images/8900409742f87145fa7f65ba36d6dd18.png)

在这里，我展示了一个具有许多连接区域（白色）的二进制图像。我想用单个像素边缘替换这些区域。我该怎么做？

请帮助某人

我想要[这种](https://imgur.com/TOmyf)类型的结果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:30:05.167

带有选项的[BWMORPH](http://www.mathworks.com/help/images/ref/bwmorph.html)`skel`查找图像的骨架。请注意，我需要稍微清理一下图像以获得不错的结果

```
img = imread('http://i.stack.imgur.com/0Paok.jpg');
img = imopen(img,strel('disk',3)); %# you may want to play with the radius here
border = bwmorph(img,'skel',inf); 
```

![在此处输入图像描述](../Images/4da8f997b7706e478167fae476898da1.png)

# android - android：获得两个地理位置之间的路线转弯方向

> ID：12955349
> 
> 赞同：0
> 
> 时间：2012-10-18T13:01:47.997
> 
> 标签：android, google-maps

我想显示两个位置之间的转弯方向。我试过了

```
 uri = "http://maps.google.com/maps?saddr="
                + "lat1" + ","
                +  "lon1" + "&daddr="
                + "lat2" + "," + "long2";
        Intent intent = new Intent(android.content.Intent.ACTION_VIEW,
                Uri.parse(uri)); 
```

它给出了路线。但我不想打开浏览器并显示。相反，有一种方法可以获取路线，以便它可以显示在我自己的布局中。对于文本视图中的 ex。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-01T06:56:49.907

这些代码是我在毕业项目中编写的，因此没有进行优化。

1.  MapService 类：我解析来自谷歌地图的数据响应。

    ```
    public class MapService {
    public static final String TAG = "[MapService]";
    public static final String GET_DIRECTION_URL = "http://maps.google.com/maps/api/directions/json?" + "origin=%f,%f" + "&destination=%f,%f" + "&sensor=true&language=en&units=metric";

    public static DirectionResult getDirectionResult(double latitude1, double longtitude1, double latitude2, double longtitude2) {
        String url = String.format(GET_DIRECTION_URL, latitude1, longtitude1, latitude2, longtitude2);
        Log.d("URL", url);
        // parse direction
        DirectionParser directionParser = new DirectionParser() {
            @Override
            public void onSuccess(JSONObject json) throws JSONException {
                // process response status
                String status = json.getString("status");
                if (!status.equals("OK")) {
                    String error = null;

                    if (status.equals("NOT_FOUND") || status.equals("ZERO_RESULTS")) {
                        error = Global.application.getString(R.string.errCantGetDirection);
                    } else {
                        error = Global.application.getString(R.string.errGetDirection);
                    }

                    result.instructions = new String[] { error };
                    result.hasError = true;
                    return;
                }

                /*
                 * routes[] legs[] steps[] html_instructions
                 */
                JSONArray arrRoutes = json.getJSONArray("routes");

                // no routes found
                if (arrRoutes.length() == 0) {
                    result.instructions = new String[] { Global.application.getString(R.string.errCantGetDirection) };
                    result.hasError = true;
                    return;
                }

                JSONArray arrLegs = arrRoutes.getJSONObject(0).getJSONArray("legs");
                JSONObject firstLeg = arrLegs.getJSONObject(0);
                JSONArray arrSteps = firstLeg.getJSONArray("steps");
                int len = arrSteps.length();
                result.instructions = new String[len];
                result.points = new LinkedList<GeoPoint>();
                JSONObject leg = null;

                // get instructions
                for (int i = 0; i < len; ++i) {
                    leg = arrSteps.getJSONObject(i);
                    // location = leg.getJSONObject("start_location");
                    String encoded = leg.getJSONObject("polyline").getString("points");
                    result.points.addAll(decodePoly(encoded));

                    result.instructions[i] = Html.fromHtml(leg.getString("html_instructions")).toString();
                    Log.d("html_instructions", "" + Html.fromHtml(leg.getString("html_instructions")));
                    // result.points[i] = new GeoPoint(
                    // (int) (location.getDouble("lat") * 1E6),
                    // (int) (location.getDouble("lng") * 1E6));
                }

                // location = leg.getJSONObject("end_location");
                // result.points[len] = new GeoPoint(
                // (int) (location.getDouble("lat") * 1E6),
                // (int) (location.getDouble("lng") * 1E6));

                // distance and duration info
                JSONObject distance = firstLeg.getJSONObject("distance");
                if (distance != null) {
                    result.distance = distance.getString("text");
                }
                JSONObject duration = firstLeg.getJSONObject("duration");
                if (duration != null) {
                    result.duration = duration.getString("text");
                }
            }

            @Override
            public void onFailure(String message) {
                String error = "Error";

                result.instructions = new String[] { error };
                result.hasError = true;
            }
        };

        // return direction result
        RestClient.getData(url, directionParser);
        return directionParser.result;
    }

    private static List<GeoPoint> decodePoly(String encoded) {
        List<GeoPoint> poly = new ArrayList<GeoPoint>();
        int index = 0, len = encoded.length();
        int lat = 0, lng = 0;

        while (index < len) {
            int b, shift = 0, result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lat += dlat;

            shift = 0;
            result = 0;
            do {
                b = encoded.charAt(index++) - 63;
                result |= (b & 0x1f) << shift;
                shift += 5;
            } while (b >= 0x20);
            int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
            lng += dlng;

            GeoPoint p = new GeoPoint((int) (((double) lat / 1E5) * 1E6), (int) (((double) lng / 1E5) * 1E6));
            poly.add(p);
        }

        return poly;
    }

        } 
    ```

2.  方向解析器和方向结果

    ```
    public class DirectionParser extends JSONParser {
    public DirectionResult result = new DirectionResult();

    protected int jsonType = JSONParser.GOOGLE_DIRECTION_JSON;

    public DirectionParser() {
        jsonType = JSONParser.GOOGLE_DIRECTION_JSON;
    }

    @Override
    public void onFailure(String message) {
    }

    @Override
    public void onSuccess(JSONObject json) throws JSONException {
    }
    }

    public class DirectionResult {
     public String[] instructions;
     public List<GeoPoint> points;
     public String duration;
     public String distance;
     public boolean hasError = false;
    } 
    ```

3.  你想要的是DirectionResult的指令。您可以使用字符串数组简单地创建一个数组适配器

    ```
     instructions = directionResult.instructions;// DirectionResult you got from MapService.
        ArrayAdapter<String> adapter1 = new ArrayAdapter<String>(DirectionListActivity.this, android.R.layout.simple_list_item_1, instructions);
                     listDirection.setAdapter(adapter1); 
    ```

更新：我发现另一个解析器[Google-Maps-Directions-API-Java-Parser](https://github.com/iamamused/Google-Maps-Directions-API-Java-Parser)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:11:30.380

查看 GreatMaps。他们有检索路线的逻辑。它基于 C#，只需使用它们的逻辑并用 Java 编写等价物。

[http://greatmaps.codeplex.com/](http://greatmaps.codeplex.com/)

# android - 小部件不会留下

> ID：12955359
> 
> 赞同：0
> 
> 时间：2012-10-18T13:02:35.767
> 
> 标签：android, android-activity, android-appwidget

我做了一个小部件，一旦放在主屏幕上就会启动一个活动

所以我有：

```
public class WidgetActivity extends AppWidgetProvider
{    
    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgets) {
        RemoteViews remoteViews = new RemoteViews(context.getPackageName(), R.layout.widget_activity);
        Intent intent = new Intent(context, Info.class);
        PendingIntent pendingIntent = PendingIntent.getActivity(context, 0, intent, 0);
        remoteViews.setOnClickPendingIntent(R.id.Widget, pendingIntent);
    }
} 
```

和

```
public class Info extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.widget_activity_info);
    }
} 
```

但是在成功启动 widget_activity_info.xml 后，按返回或主页后，小部件不在主屏幕上。我在这里错过了什么吗？在我让它启动新活动之前，小部件会留在屏幕上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T04:53:44.303

我看到你在这个问题/答案中得到答案之前发布了这个问题[（点击）](https://stackoverflow.com/a/12945420/1110688)

[您可以在Android 开发者网站](http://developer.android.com/guide/topics/appwidgets/index.html#Configuring)上阅读它是如何完成的

# android - 设计页面中的 ListView 元素选择器

> ID：12955364
> 
> 赞同：0
> 
> 时间：2012-10-18T13:02:45.457
> 
> 标签：android, android-ui

我遇到了一个设计[页面](http://developer.android.com/guide/topics/ui/dialogs.html)，其中包含可滚动值选择器（“文本消息限制”）的图像 - 有点类似于 Listview 组件。这个组件存在吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:29:52.050

有这样的看法。您可以从此链接访问视图：

[http://code.google.com/p/android-wheel/](http://code.google.com/p/android-wheel/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:44:39.067

这就是API 级别 11 (Android 3.0) 提供的[NumberPicker 。](http://developer.android.com/reference/android/widget/NumberPicker.html)但是您可以从Simon Vig Therkildsen 开发的[android-numberpicker （支持的 API 级别 7）库中获取它。](https://github.com/SimonVT/android-numberpicker/)您只需将其添加到您的对话框中。

这里是截图！![在此处输入图像描述](../Images/130d66814c1f2d0bb18113645e0abcc7.png)

# ubuntu - Opencv 构建错误

> ID：12955366
> 
> 赞同：0
> 
> 时间：2012-10-18T13:02:47.233
> 
> 标签：ubuntu, opencv, build, makefile, build-process

我试图在 ubuntu 12.04 上使用 cuda=on 设置 Opencv。我用我想要的所有设置做了 cmake Opencv，没有任何问题，我的 Cuda 工具包运行顺利。但是，当我来到 Opencv 机器的步骤时，出现了错误。虽然我得到了错误

**`Linking CXX executable ../../bin/opencv_perf_core`**

我的 guake 终端视图如下

```
brkn@brknPC:~/Source/OpenCV-2.4.2/release$ make
[  4%] Built target opencv_core
[  5%] Built target opencv_ts
[ 11%] Built target opencv_imgproc
[ 14%] Built target opencv_highgui
Linking CXX executable ../../bin/opencv_perf_core
../../lib/libopencv_core.so.2.4.2: error: undefined reference to 'cuDeviceGetAttribute'
collect2: ld returned 1 exit status
make[2]: *** [bin/opencv_perf_core] Error 1
make[1]: *** [modules/core/CMakeFiles/opencv_perf_core.dir/all] Error 2
make: *** [all] Error 2
brkn@brknPC:~/Source/OpenCV-2.4.2/release$ 
```

我卡在这里，我不能把它扔掉你有什么建议吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-30T15:59:39.037

我也遇到这个问题。这是我尝试过的。

1.  将 libcuda 链接到 /usr/lib 取决于您使用的驱动程序。此版本使用 nvidia-current-updates

    su -c 'ln -s /usr/lib/nvidia-current-updates/libcuda.so /usr/lib/libcuda.so && ln -s /usr/lib/nvidia-current-updates/libcuda.so.1 / usr/lib/libcuda.so.1'

2.  再次运行“cmake”

3.  然后继续'制作'

# javascript - 通过 jQuery/Ajax 获取 GET URL

> ID：12955368
> 
> 赞同：1
> 
> 时间：2012-10-18T13:02:53.083
> 
> 标签：javascript, jquery, ajax

`GET`当使用方法提交表单时，我希望重新加载页面的一部分。以下 JavaScript 运行，但我不确定如何从表单中获取提交的 URL？

我会认为`var link = jQuery(this).attr('GET');`或somethign会退回它，并尝试过`URL`等等......但没有运气。有任何想法吗？

```
jQuery('form').submit(function(e){
    e.preventDefault();
    var link = jQuery(this).attr('GET'); //Get the href attribute
    alert(link);
    history.pushState('data', '', link);
    jQuery('#search_main_section').fadeTo(300,0.3,function(){
        load(link + ' #search_main_section', function(){ jQuery("#loader").hide(); 
        jQuery('#search_main_section').fadeTo(100,1, function(){}); 
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:04:30.757

```
var link = jQuery(this).prop('action'); 
```

如果你想要表单的值，你想使用[serialize()](http://api.jquery.com/serialize/)

使用 action 和 searlize 加载的示例。

​</p>

```
$("#form1").on("submit", function(e) {

    e.preventDefault();

    var form = $(this);
    var action = form.attr("action") || window.location.href;
    var formValues = form.serialize();
    //example with get     
    //$.get(action, formValues, function(){ alert("done"); });
    //example with load
    var url = action + "?" + formValues;
    $.load(url + ' #search_main_section', function(){ jQuery("#loader").hide();
});​​​​​​​​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:05:34.967

```
<form action="something.php" method="POST">

</form>

jQuery('form').submit(function(e){
    e.preventDefault();
    var url = $(this).attr('action');
   ....// rest of code 
```

# firefox-addon - 使用 xulrunner-sdk-15.0.1 编译 firefox 扩展也是更高版本

> ID：12955371
> 
> 赞同：0
> 
> 时间：2012-10-18T13:03:05.893
> 
> 标签：firefox-addon

我有一个在所有以前的版本中都可以使用的 FF 工具栏。我的工具栏部分用 C++ 编写。我尝试使用 xulrunner-sdk-15.0.1 构建 C++ 部分（我也尝试过 xulrunner-sdk-16.0.1）在两个版本中我都收到链接错误。

```
1>Link:
1>     Creating library C:\Dev\Projects\fftoolbar\toolbar\src\components\vc2010\\..\bin\win32\agat.lib and object C:\Dev\Projects\fftoolbar\toolbar\src\components\vc2010\\..\bin\win32\agat.exp
1>xpcomglue_s.lib(nsStringAPI.obj) : error LNK2001: unresolved external symbol __imp___snprintf
1>xpcomglue_s.lib(nsCRTGlue.obj) : error LNK2001: unresolved external symbol __imp__rand
1>xpcomglue_s.lib(nsCRTGlue.obj) : error LNK2001: unresolved external symbol __imp__srand
1>xpcomglue_s.lib(nsCRTGlue.obj) : error LNK2001: unresolved external symbol __imp___fdopen
1>xpcomglue_s.lib(nsCRTGlue.obj) : error LNK2001: unresolved external symbol __imp___dup
1>C:\Dev\Projects\fftoolbar\toolbar\src\components\vc2010\..\bin\win32\agat.dll : fatal error LNK1120: 5 unresolved externals
1>
1>Build FAILED.
1>
1>Time Elapsed 00:00:06.39
========== Rebuild All: 0 succeeded, 1 failed, 0 skipped ========== 
```

有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:22:20.150

这些符号由`msvcrt.lib`（运行时库）公开。因此，您可能将项目配置为忽略标准库 - 然后您需要`msvcrt.lib`显式添加到库列表中。

以防万一您不知道：[js-ctypes](https://developer.mozilla.org/en/js-ctypes)允许您在扩展中编译代码，而无需使用二进制 XPCOM 组件并为每个 Firefox 版本重新编译它们。你可以在你的扩展中包含一个常规的 Windows DLL，并使用 js-ctypes 来调用它的函数。缺点：这个 DLL 不能访问 XPCOM。因此，如果您确实需要 JavaScript 所没有的低级 XPCOM 访问权限，那么您就无法避免二进制 XPCOM 对象。

# css - rake 资产：预编译不起作用 - Windows 7

> ID：12955373
> 
> 赞同：0
> 
> 时间：2012-10-18T13:03:17.700
> 
> 标签：css, ruby-on-rails, ruby, windows, compiler-errors

我的 css 文件和缓存有问题。现在似乎没有任何样式表加载，我读到我可以尝试使用`rake assets:precomile`，但我得到一个错误。

当我使用跟踪运行时：

```
C:\Users\admin\Desktop\webapp>rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
"C:/Program Files/ruby-1.9.2/bin/ruby.exe" C:/Program Files/ruby-1.9.2/bin/rake assets:precompile:all RAILS_ENV=producti
on RAILS_GROUPS=assets --trace
rake aborted!
Command failed with status (127): ["C:/Program Files/ruby-1.9.2/bin/ruby.exe"...]
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:53:in `block in create_shell_ru
nner'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `call'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:45:in `sh'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `sh'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils.rb:80:in `ruby'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:39:in `ruby'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:12:in `ruby_rake_task'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:21:in `invoke_or_reboot_
rake_task'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/actionpack-3.2.6/lib/sprockets/assets.rake:29:in `block (2 levels)
in <top (required)>'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `call'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:205:in `block in execute'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `each'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:200:in `execute'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:158:in `block in invoke_with_call_cha
in'
C:/Program Files/ruby-1.9.2/lib/ruby/1.9.1/monitor.rb:201:in `mon_synchronize'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:151:in `invoke_with_call_chain'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/task.rb:144:in `invoke'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:116:in `invoke_task'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block (2 levels) in top
_level'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `each'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:94:in `block in top_level'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_han
dling'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:88:in `top_level'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:66:in `block in run'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:133:in `standard_exception_han
dling'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/lib/rake/application.rb:63:in `run'
C:/Program Files/ruby-1.9.2/lib/ruby/gems/1.9.1/gems/rake-0.9.2.2/bin/rake:33:in `<top (required)>'
C:/Program Files/ruby-1.9.2/bin/rake:19:in `load'
C:/Program Files/ruby-1.9.2/bin/rake:19:in `<main>'
Tasks: TOP => assets:precompile 
```

有谁知道如何解决这个问题？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:41:13.767

状态码 127 通常用于表示“未找到命令”。在您的情况下`["C:/Program Files/ruby-1.9.2/bin/ruby.exe"...]`，找不到 ruby​​.exe。您是否正确安装了 ruby​​？

# makefile - Makefile 中的条件编译

> ID：12955379
> 
> 赞同：2
> 
> 时间：2012-10-18T13:03:27.590
> 
> 标签：makefile

我目前有一个 make 文件，其中一部分如下所示。

```
####################################################################
# Files                                                            #
####################################################################

C_SRC +=  \
CMSIS/CM3/CoreSupport/core_cm3.c \
CMSIS/CM3/DeviceSupport/EnergyMicro/EFM32/system_efm32.c \
efm32lib/src/efm32_assert.c \
efm32lib/src/efm32_system.c \
efm32lib/src/efm32_gpio.c \
efm32lib/src/efm32_cmu.c \
efm32lib/src/efm32_usart.c \
efm32lib/src/efm32_i2c.c \
efm32lib/src/efm32_dma.c \
efm32lib/src/efm32_timer.c \
efm32lib/src/efm32_int.c \
efm32lib/src/efm32_emu.c \
efm32lib/src/efm32_adc.c \
efm32lib/src/efm32_rtc.c \
radio.c \
led.c \
trace.c \
    main.c

S_SRC +=  \
CMSIS/CM3/DeviceSupport/EnergyMicro/EFM32/startup/cs3/startup_efm32.s

####################################################################
# Rules                                                            #
####################################################################

C_FILES = $(notdir $(C_SRC) )
S_FILES = $(notdir $(S_SRC) )
#make list of source paths, sort also removes duplicates
C_PATHS = $(sort $(dir $(C_SRC) ) )
S_PATHS = $(sort $(dir $(S_SRC) ) )

C_OBJS = $(addprefix $(OBJ_DIR)/, $(C_FILES:.c=.o))
S_OBJS = $(addprefix $(OBJ_DIR)/, $(S_FILES:.s=.o))
C_DEPS = $(addprefix $(OBJ_DIR)/, $(C_FILES:.c=.d))

vpath %.c $(C_PATHS)
vpath %.s $(S_PATHS)

# Default build is debug build
all:    debug

debug:    CFLAGS += -DDEBUG -O0 -g3
debug:    $(OBJ_DIR) $(LST_DIR) $(EXE_DIR) $(EXE_DIR)/$(PROJECTNAME).bin

release:  CFLAGS += -DNDEBUG -O3
release:  $(OBJ_DIR) $(LST_DIR) $(EXE_DIR) $(EXE_DIR)/$(PROJECTNAME).bin

base:     CFLAGS += -DDEBUG -O0 -g3
base:     $(OBJ_DIR) $(LST_DIR) $(EXE_DIR) $(EXE_DIR)/$(PROJECTNAME).bin 
```

基本上我想要做的是，如果它与基本目标一起运行，那么我想`C_SRC`用 mainbase.c更改 main.c 文件

我已经尝试了几个小时，但没有得到任何结果。有什么建议吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T13:09:15.483

如果您使用的是 GNU make，那么您可以使用`if`类似的指令。

请参阅文档[中的 Makefile 的条件部分。](http://www.gnu.org/software/make/manual/html_node/Conditionals.html#Conditionals)

如果你的情况，你可以这样做：

```
C_SRC +=  \
CMSIS/CM3/CoreSupport/core_cm3.c \
....
led.c \
trace.c

ifeq ($(SPECIAL),"")
C_SRC += main.c
else
C_SRC += main_special.c
endif 
```

在命令行调用`make`时，如果设置了变量`SPECIAL`则使用该文件`main_special.c`，否则使用该文件`main.c`。

使用命令行`main_special.c`：

```
$ make SPECIAL=1 
```

# python - 如何使用代理服务器创建套接字？

> ID：12955380
> 
> 赞同：1
> 
> 时间：2012-10-18T13:03:28.370
> 
> 标签：python, sockets, proxy

```
import socket
sock = socket.socket()
sock.connect('somesite') 
```

如果我想通过代理连接套接字，我该怎么做？我在文档中没有看到相关的参数或选项。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:07:46.297

您首先需要弄清楚它是哪种代理（SOCKS、HTTP 等），然后找到一个为该代理类型实现连接的库，或者滚动您自己的例程。基本思路是让脚本连接到代理服务器/端口，然后请求代理连接到您尝试请求的站点。

如果你不想那样做，另一个可行的选择是使用 LD_PRELOAD 让它透明地连接（在 Linux 下），就像 torify 一样。

# visual-studio-2010 - 引用了忽略提示路径的同名程序集

> ID：12955381
> 
> 赞同：2
> 
> 时间：2012-10-18T13:03:30.210
> 
> 标签：visual-studio-2010

我的代码依赖于第三方库 (dll)。

由于[Nugget 无法管理不同的平台](http://nuget.codeplex.com/workitem/679)（[也在此处](http://nuget.codeplex.com/workitem/1959)），我创建了两个重复相同代码的项目（将代码保持在最低限度 - 基本上是一个 API 包装器）。

一个项目引用 dll 的 x86 版本，另一个项目引用 x64。

我的解决方案中只有一个项目引用了这些项目。
它同时引用它们，并且有条件地这样做（所以当我使用 x64 配置构建时，项目引用了 x64 dllis 引用等）

它的 .csproj 包含如下内容：

```
ProjectReference Include="..\3rdPartyModule.x86\3rdPartyModule.x86.csproj" Condition="'$(Platform)' == 'x86'" 
```

和

```
ProjectReference Include="..\3rdPartyModule.x64\3rdPartyModule.x64.csproj" Condition="'$(Platform)' == 'x64'" 
```

现在，发生了一件奇怪的事情：

如果我卸载两个项目，然后先加载 x86 一个，然后加载 x64 一个，x64 中的引用实际上表明它指向 x86 dll（我可以看到路径）。

如果我更改加载顺序，则相反：x64 很好，但 x86 引用 x64 版本！

我的猜测是 VS 在内存中找到了一个同名的程序集，并自动将第二个引用到第一个。

这是一个已知的问题？有办法解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:10:04.037

在 VS2010 中曾经有一个错误，在这种情况下，引用无法在 VS UI 中正确显示，但在编译期间会复制正确的文件。就您而言，您是否在构建输出目录中获得了正确版本的文件？

此外，您可能希望为引用的程序集设置不同的别名（来自引用属性）。它可能会有所帮助。

# php - 网址规范化问题

> ID：12955382
> 
> 赞同：0
> 
> 时间：2012-10-18T13:03:36.720
> 
> 标签：php, url

在我的网站中，例如[http://www.someone.com](http://www.someone.com)。我有一个壁纸部分

```
http://www.someone.com/wallpaper/ 
http://www.someone.com/wallpaper/index.php?imageid=123 
```

我已经阅读了一些关于它的文章，（网址规范化）。我想知道--------这对我的网站搜索是否有害。我很担心，因为网站搜索没有增长，而且谷歌没有像我给页面一样显示索引页面的描述。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:05:00.210

规范页面/url 是一组具有高度相似内容的页面/url 的首选版本。因此，基本上您是在告诉搜索引擎（例如 google）链接属性中指示的站点是主站点。

我不确定这两个是否是您未指出的相同或相似的网页，但如果是，它们可能会产生不同的 url，因为图像壁纸可能已用于列出具有相同列表的多个页面产品或内容，即第一页 url 显示来自顶级关键字的壁纸，第二个 url 显示来自指定类别的相同壁纸，

如果 Google 知道这些页面具有相同的内容，它们只会索引其他搜索结果的一个版本，即您在其中指出的对搜索引擎用户最有用的版本。

Ankit 你不应该担心索引页面的描述，它会显示；但是如果您希望在不久的将来防止这种情况再次发生，请确保您编写 SEO 友好的 URL，拥有独特的内容并添加一个包含无索引和无关注的机器人元标记。

一切顺利

# css - 流畅的 CSS 布局，背景上有一个大的居中 div

> ID：12955385
> 
> 赞同：2
> 
> 时间：2012-10-18T13:03:42.923
> 
> 标签：css, layout, html, fluid

我想做一个网页设计，它包含一个浮动的流体布局，由背景图像上的 2 个 div 组成：一个居中的主要内容布局和一个重叠但相对位于 te 内容 div 左侧部分的菜单。

我怎样才能让它如此流畅并在任何分辨率下都可以看到？你推荐我哪个最小/最大宽度？

```
browser window -> 100%
====================
     backgrnd      |
   -------------   |
   |           |   |
 |--|          |   |
 |M | content  |   |
 |__|          |   |
   |-----------|   |
   |__footer___|   |
___________________|

body {
    margin:0; 
    padding:80px; 
    color:yellow; 
    background: url('image.jpg') no-repeat center center fixed; background-size: cover;
    font-size: 65%; 
} 
```

背景应始终占据屏幕

```
.centraldiv {
    max-width: 1000px;
    min-width: 775px;
    width: 90%;
    padding: 80px;
}

.menudiv {
    position: relative?
    width: 100px;       
} 
```

我会走好路吗？

编辑：不需要实际解决它，只要我假设好的方法就任命我（我在互联网上找到的流体布局的所有示例都是多列的，而少数不是，根本不使用中央面板（如果你知道一些资源就够了！）。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:43:14.627

关于媒体查询的评论是要走的路。在您的示例中，您设置了宽度、最小宽度和最大宽度，这也是不正确的。为超过 1280 像素的任何内容设置桌面版本，仅使用 % 宽度。然后开始为低于您所需桌面宽度的任何内容覆盖媒体查询，因此可能低于 900 像素，然后在该点将其降低。

阅读更多：[Mozilla 开发人员的：媒体查询](https://developer.mozilla.org/en-US/docs/CSS/Media_queries)- [CSS 技巧：媒体查询](http://css-tricks.com/css-media-queries/)

编辑：CSS Tricks 也是一种响应式布局，请使用浏览器窗口进行测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:59:37.553

虽然使用百分比是生成良好响应式布局的基本（但不是必需的），但如果您[真的希望内容几乎适合任何屏幕](http://www.alistapart.com/articles/the-infinite-grid/)，则肯定会指示[媒体查询](http://webdesignerwall.com/tutorials/css3-media-queries)。

您还应该开始考虑`em`s 中的[布局](http://blog.cloudfour.com/the-ems-have-it-proportional-media-queries-ftw/)和[文本](http://www.alistapart.com/articles/howtosizetextincss/)。

* * *

通常，您应该从一个简单的布局开始，其中每个内容块都填充窗口的宽度：智能手机上的 100 像素菜单将占据大约三分之一的屏幕！

```
====================
     backgrnd      |
   -------------   |
   |   menu    |   |
   |-----------|   |
   |           |   |
   |  content  |   |
   |           |   |
   |-----------|   |
   |__footer___|   |
___________________| 
```

只需将它们保持在`display:block;`：

```
body {
    font-size: 62.5%; /* 62.5% = ~10px = 1em */
    margin:0; 
    padding:8em; 
    color:yellow; 
    background: url('image.jpg') no-repeat center center fixed; background-size: cover;
}
#centraldiv, #menudiv {
    padding:2em 0;
} 
```

然后，玩弄浏览器窗口，直到找到一个有足够水平空间将菜单向左移动的点：

```
@media screen and (min-width:40em){
    #centraldiv {
        width:90%;
    }
    #menudiv {
        float:left;
        /* etc... */
    }
} 
```

...等等。百分比没问题，但没那么简单。

# ios - XCode iOS 用 + 替换空格

> ID：12955386
> 
> 赞同：0
> 
> 时间：2012-10-18T13:03:43.923
> 
> 标签：ios, xcode, nsstring, nsurl

需要帮助来替换文本字段条目中的空格以发布到 GET

我当前的代码：

```
 NSString* urlString = [NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone+App&message=%@", messageBox.text];
NSURL *add = [NSURL URLWithString:urlString];

[messageView loadRequest:[NSURLRequest requestWithURL:add]]; 
```

但是我尝试了

```
NSString *finalAdd = [add stringByReplacingOccurrencesOfString:@" " withString:@"+"]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:10:37.230

您应该转义参数

```
NSString* urlString = [NSString stringWithFormat:@"http://server.com/ios/add.php?user=iPhone+App&message=%@", [messageBox.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSURL *add = [NSURL URLWithString:urlString]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:07:58.337

查看[这篇文章](http://madebymany.com/blog/url-encoding-an-nsstring-on-ios)或[这个 SO question](https://stackoverflow.com/questions/9187316/string-wont-url-encode-in-ios)。两者都为编码 url 提供了很好的解决方案。

# c# - Visual Studio 2012 - 代码覆盖率 - 如何正确执行？

> ID：12955388
> 
> 赞同：4
> 
> 时间：2012-10-18T13:03:46.267
> 
> 标签：c#, .net

我正在尝试使用单元测试自动化代码覆盖率。我所做的是：

1.  创建了具有某些功能的 Metro 应用程序。

2.  创建单元测试库（用于 Metro 应用程序） - 在与我的应用程序（上图）相同的解决方案中。

3.  添加了一个包含少量测试方法的测试类。

4.  为了能够编译测试库，我将链接添加到在我的应用程序中创建的类（添加->现有项目->添加为链接”。

5.  在 VS 下运行测试 - 成功。

6.  使用 vstest.console.exe 从控制台运行测试 - 成功。

现在我必须计算我的应用程序的代码覆盖率。我知道 vstest.console.exe 有一个启用代码覆盖的选项，但我使用的是 VS 的 Express 版本，并且该功能似乎在那里不可用。

问题是：如何使用 vstest.console.exe（或任何其他工具）来获得正确的代码覆盖率。该工具采用测试库项目的 appx，因此它计算库中代码的覆盖率（提到应用程序中的单个类），对吗？您如何使用该工具来获取带有测试代码的库和带有所有代码的应用程序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-10T16:54:00.103

代码覆盖在 Visual Studio 2012 的高级和终极版本中可用

但是请注意，我们尚未在 VS 2012 中为 Windows Store 应用程序启用代码覆盖。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T13:39:56.020

我们使用一个工具[OpenCover](https://github.com/sawilde/opencover)来执行代码覆盖。这将输出结果的 xml 覆盖率报告。然后我们将该 xml 文件传递​​给[ReportGenerator](http://reportgenerator.codeplex.com/)以创建样式精美的 html 报告。

# mysql - 简单社交网站的数据库设计

> ID：12955390
> 
> 赞同：0
> 
> 时间：2012-10-18T13:03:54.550
> 
> 标签：mysql, ruby-on-rails, database, database-design, social-networking

我目前正在尝试为一个简单的社交网站设计数据库。我正在为我的数据库使用 MySQL。目前，我只有一个用户表。基本上，我希望用户能够添加朋友并能够列出他们的朋友。我正在考虑创建一个朋友表，例​​如：

```
friends table
user_id
friend_id 
```

每当有人添加朋友时，它都会创建一个条目。我不确定我的方向是否正确。另一个问题，有没有办法检索所有二级朋友？（朋友的朋友）任何帮助将不胜感激。提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:07:49.697

是的，你在正确的道路上。

您可以通过将朋友表加入自身来检索 2 度朋友

```
select t2.friend_id
from friends t1 
     inner join friends t2 on t1.friend_id = t2.user_id
where t1.user_id = ... 
```

要考虑的一件事是交换性——如果 A 是 B 的朋友，那么 B 是 A 的朋友吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:13:55.267

创建一个包含所有用户属性的用户表，然后创建另一个表来存储用户之间的关系。

关系表将包含两列，每列都包含一个 user_id，在此表中，您将存储两个用户之间的友谊。（否则每个用户只能有一个朋友）。

为了获得不同级别的关系，您需要在两个表之间进行连接。（根据您使用的 RDMBS，您可能有一些快捷方式）。

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T13:25:46.387

当然。那会很好用。您所描述的是一种自我参照的多对多关系。查询相当简单。以下是 $current_user 的所有朋友：

```
select u.* from users as u 
  inner join friends as f on u.id = f.friend_id 
  where f.user_id = $current_user_id 
```

需要考虑的是，这在技术上是一个有向图。所以用户 A 可以和用户 B 成为朋友，但用户 B 不一定是用户 A 的朋友。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T13:15:53.703

我有一个存储友谊的连接表。有一列存储请求友谊的用户的 ID，一列存储请求发送到的用户的 ID，一个布尔列存储友谊是否已被接受，以及一个时间戳列存储何时请求已发送。

# perl - 段落中的拆分句子

> ID：12955391
> 
> 赞同：2
> 
> 时间：2012-10-18T13:04:02.053
> 
> 标签：perl

我想使用 perl 在 para 中拆分句子。

现在我使用 Lingua::EN::Sentence 模块，我可以在没有内部的情况下拆分句子

```
> <em> 
```

标签，但我不能拆分这一段，因为内部有一些标签

脚本：

```
use strict; use Lingua::EN::Sentence qw( get_sentences add_acronyms );

$line = "En meteen is er iets. Die voorstelling dat hapert";

my $sentences = get_sentences($line); foreach my $sentence
(@$sentences) {
     print $sentence."\n"; } 
```

输出：

```
En meteen is er iets.
Die voorstelling dat hapert

  > <p>luk heeft aan zichzelf genoeg, het heeft geen getuigen nodig. Then
    > <em class="xix"><span class="emph-xix-brl">anna Karenina</span>.
    > </em>Ik zou daar hooguit afkunnen. Hoe meer <em>getuigen hoe<em>
    > beter. Het alleen is.</p> 
```

这个段怎么拆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:23:12.350

在拆分之前尝试使用 HTML::Strip 删除标签。

***代码***

```
#! /usr/bin/env perl
use strict;
use warnings;
use HTML::Strip;
use Data::Dumper;

use Lingua::EN::Sentence qw( get_sentences add_acronyms );

my $line = "En meteen is er iets. Die voorstelling dat hapert";
my $paragraph = '<p>luk heeft aan zichzelf genoeg, het heeft geen getuigen nodig. Then <em class="xix"><span class="emph-xix-brl">anna Karenina</span>.  </em>Ik zou daar hooguit afkunnen. Hoe meer <em>getuigen hoe<em>    beter. Het alleen is.</p>' ;

my $html_strip = HTML::Strip->new();
my $clean_paragraph = $html_strip->parse($paragraph);

my $sentences = get_sentences($clean_paragraph);

print Dumper($sentences); 
```

***输出***

```
$VAR1 = [
      'luk heeft aan zichzelf genoeg, het heeft geen getuigen nodig.',
      'Then anna Karenina .  Ik zou daar hooguit afkunnen.',
      'Hoe meer getuigen hoe    beter.',
      'Het alleen is.'
    ]; 
```

# java - 将 RAMDirectory 上传到 AzureCloud 会创建 EOF 异常

> ID：12955397
> 
> 赞同：1
> 
> 时间：2012-10-18T13:04:15.597
> 
> 标签：java, azure, lucene, azure-storage, azure-blob-storage

我目前正在尝试使用 AzureBlobStorage 与 Lucene 一起工作。所以我创建了一个新目录，为了避免太多延迟，我使用 RAMDirectory 作为缓存（这可能不是最好的解决方案，但它似乎很容易做到，我愿意接受建议）。无论如何，一切似乎都很好，除了当我将`.nrm`文件写入云时，当我将它们上传到 blob 时总是会引发 EOFExceptions。

我将快速解释目录是如何工作的，因为它有助于理解：我创建了一个新的 IndexOutput `BlobOutputStream`，它几乎封装了一个，`RAMOutputStream`但是当它关​​闭时，它会将所有内容上传到 azureBlobStorage。这是如何完成的：

```
String fname = name;
output.flush();
long length = output.length();
output.close();
System.out.println("Size of the upload: " + length);
InputStream bStream = directory.openCachedInputAsStream(fname);
System.out.println("Uploading cache version of: " + fname);
blob.upload(bStream, length);
System.out.println("PUT finished for: " + fname); 
```

`blob`是一个`CloubBlockBlob`并且`output`是一个`RAMOutputStream`。`directory.openCacheInputAsStream`打开一个新`InputStream`的`IndexInput`。

因此，大多数情况下，除了在上传`.nrm`文件时总是引发 an 的文件之外，一切都正常工作。`EOFException`尽管我检查了当索引中只有一个文档并且包含“NRM-1 和该文档的规范”时它们的长度为 5 个字节。

当我在上传调用中指定流的大小时，我真的不明白为什么 Azure 会尝试上传比文件中存在的更多的内容。

很抱歉，如果我不清楚，解释起来很有挑战性。如果您需要更多代码，请告诉我，我将在 github 或其他地方提供所有内容。

感谢您的回答

# 编辑

所以也许我的代码`inputStream`可能会显示问题：

```
public class StreamInput extends InputStream {
public IndexInput input;

public StreamInput(IndexInput openInput) {
    input = openInput;
}

@Override
public int read() throws IOException {
    System.out.println("Attempt to read byte: "+ input.getFilePointer());
    int b = input.readByte();
    System.out.println(b);
    return b;
}
} 
```

这是我得到的痕迹：

```
 Size of the upload: 5
Uploading cache version of: _0.nrm
Attempt to read byte: 0
78
Attempt to read byte: 1
82
Attempt to read byte: 2
77
Attempt to read byte: 3
-1
Attempt to read byte: 4
114
Attempt to read byte: 5
Attempt to read byte: 1029
java.io.EOFException: read past EOF: RAMInputStream(name=_0.nrm)
    at org.apache.lucene.store.RAMInputStream.switchCurrentBuffer(RAMInputStream.java:100)
    at org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:73)
    at org.lahab.clucene.core.StreamInput.read(StreamInput.java:18)
    at java.io.InputStream.read(InputStream.java:151)
    at com.microsoft.windowsazure.services.core.storage.utils.Utility.writeToOutputStream(Utility.java:1024)
    at com.microsoft.windowsazure.services.blob.client.BlobOutputStream.write(BlobOutputStream.java:560)
    at com.microsoft.windowsazure.services.blob.client.CloudBlockBlob.upload(CloudBlockBlob.java:455)
    at com.microsoft.windowsazure.services.blob.client.CloudBlockBlob.upload(CloudBlockBlob.java:374)
    at org.lahab.clucene.core.BlobOutputStream.close(BlobOutputStream.java:92)
    at org.apache.lucene.util.IOUtils.close(IOUtils.java:141)
    at org.apache.lucene.index.NormsWriter.flush(NormsWriter.java:172)
    at org.apache.lucene.index.DocInverter.flush(DocInverter.java:71)
    at org.apache.lucene.index.DocFieldProcessor.flush(DocFieldProcessor.java:60)
    at org.apache.lucene.index.DocumentsWriter.flush(DocumentsWriter.java:581)
    at org.apache.lucene.index.IndexWriter.doFlush(IndexWriter.java:3587)
    at org.apache.lucene.index.IndexWriter.prepareCommit(IndexWriter.java:3376)
    at org.apache.lucene.index.IndexWriter.commitInternal(IndexWriter.java:3485)
    at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3467)
    at org.apache.lucene.index.IndexWriter.commit(IndexWriter.java:3451)
    at org.lahab.clucene.server.IndexerNode.addDocuments(IndexerNode.java:139) 
```

真的好像上传太远了……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:51:09.250

所以问题是我的 inputStream 以及我无法读取文档并转换字节的事实；）。我的读取功能应该是：

```
`System.out.println("file:" + input.getFilePointer() + "/" + input.length());
if (input.getFilePointer() >= input.length()) {
    return -1;
}
System.out.println("Attempt to read byte: "+ input.getFilePointer());
int b = (int) input.readByte() & 0xff;
System.out.println(b);
return b;` 
```

`javadoc 说关于 inputStream.read()：`

 `> 从输入流中读取数据的下一个字节。值字节作为 int 返回，范围为 0 到 255。**如果由于到达流的末尾而没有可用的字节，则返回值 -1**。此方法会一直阻塞，直到输入数据可用、检测到流结束或引发异常。

然后`& 0xff`就是屏蔽符号位`

# cookies - 禁用谷歌设置的cookies加一键

> ID：12955398
> 
> 赞同：6
> 
> 时间：2012-10-18T13:04:17.293
> 
> 标签：cookies, option, setting, cookieless

当我将以下代码放在我的网站上以获得一个不错的标准 +1

```
<!-- Place this tag where you want the +1 button to render. -->
<div class="g-plusone"></div>

<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  window.___gcfg = {lang: 'nl'};

  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script> 
```

它做了我不想要的事情。

如果没有此代码，我只有自己的 phpsessid 需要让我的网站正常运行。

使用此代码，以下 cookie 将从域 plusone.google.com 中删除

![Google Plus 一会掉很多饼干！](../Images/2d91a6ec30efb8f011133072d4bc0b63.png)

现在，当查看到期日期时，在 2014 年、2022 年、2013 年的某个地方……他们会活得很长很长。

关键是，如何通过 google+1 按钮禁用 cookie 放置的文档无处可取，我已尽力查看，甚至阅读了很多堆栈溢出帖子，希望找到相关的内容。

然而，我确实找到[了如何](https://stackoverflow.com/questions/10668292/is-there-a-setting-on-google-analytics-to-suppress-use-of-cookies-for-users-who/10721214#10721214)在我的任务中禁用用于分析的 cookie（万岁！）但现在我需要找到一种方法、javascript 选项或其他东西来告诉 plusone 不要丢弃 cookie（荷兰万岁/欧洲 cookielaw）

**问题：** 有没有人遇到过告诉 +1 按钮不要丢弃 cookie 的文档/选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-27T08:07:19.323

似乎欧盟 cookie 法比乍一看要笨拙得多：\

似乎没有办法阻止 Google 的 +1 按钮设置的 cookie。*用户*可能会在他们的偏好中阻止第三方 cookie，但作为站点开发人员，*您*不能表明*您的特定站点*不允许来自第三方的 cookie，并且实际的 cookie 设置在不同的域中，因此您的 Javascript 也不会干扰。

该指令允许您保留*必要*的cookie，因此您*可以*存储 cookie 以记录访问者接受或拒绝 cookie。如果未设置该 cookie，您可以请求*一次许可。**只有*当访问者允许您跟踪第三方 cookie*或者*您已经在 cookie 中记录了他们的许可时，您才应该继续初始化 +1 按钮；否则您应该跳过 +1 按钮初始化代码。

粗略的不完整示例（省略了实际的 cookie 操作）：

```
(function() {
    var allowed = getCookie('allowCookies');
    if (allowed === undefined) {
        allowed = confirm('Allow cookies?');
        setCookie('allowCookies', allowed? 1: 0);
    }
    if (allowed) {
        // initialize +1 buttons:
        var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
        po.src = 'https://apis.google.com/js/plusone.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);

        // initialize any other third-party tools that might set cookies ...
    }
})(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T10:21:32.117

我编写了一个基于权限的解决方法，但我仍然觉得它远非理想，因为我必须在用户点击时让他们获得权限，但总比没有好。

我仍然需要一种方法来阻止谷歌丢弃不需要的 cookie。在我看来，没有必要用这么多 cookie 或任何 cookie 来跟踪用户。

此代码使用户单击该链接，当他们单击该链接时，系统会询问他们是否要显示该按钮以及该决定的后果是什么。

我的示例代码：http: [//jsfiddle.net/CADjN/3/](http://jsfiddle.net/CADjN/3/)

**现场演示** [https://www.ortho.nl/orthomoleculaire-bibliotheek/artikel/8091/Langer-leven-met-vitamine-D](https://www.ortho.nl/orthomoleculaire-bibliotheek/artikel/8091/Langer-leven-met-vitamine-D)

```
<script type="text/javascript"> 
// Function to set the cookie plusone.
function setCookie()
    {
    domain = "www.mysite.com";
    c_name="plusone";
    value="yes";
    var exdate=new Date();
    exdate.setDate(exdate.getDate() + 365);
    var c_value=escape(value) + "; expires="+exdate.toUTCString()+';domain='+domain+';path=/';
    document.cookie=c_name + "=" + c_value;
    }
// Function to see if our plusone cookie exists and has value yes
// Returns true when the cookie is set, false if isn't set.
function getCookie()
    {
    var i,x,y,ARRcookies=document.cookie.split(";");
    for (i=0;i<ARRcookies.length;i++)
        {
        x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
        y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
        x=x.replace(/^\s+|\s+$/g,"");

        if (x.indexOf("plusone") != -1)
            {
        if(unescape(y)=="yes")
        {
        return true;
        }
    else
        {
        return false;
        }
        }
    }
}
// Load the plusone module but first ask permission
function loadplusone(thelink) 
    {   
    // Cookie hasn't been set
    if(!getCookie())
        {
            // Get permission
        if(window.confirm("If you wish to 'plusone' this page we need to load a special button from Google.com.\n\nWith this button Google will place some cookies on your computer. Google uses these cookies for statistics and maintaing your login status if you have logged in with Google.\n\nDo you consent to loading the button and the placement of cookies by Google?\n\nIf you agree this website will place a cookie with a year lifetime on your computer to remember this and the plusone button will be loaded on every page where the plusone button is present on this site."))
            {
                    // set cookie, load button
            setCookie();
            var jsnode = document.createElement('script');   
            jsnode.setAttribute('type','text/javascript');   
            jsnode.setAttribute('src','https://apis.google.com/js/plusone.js');   
            document.getElementsByTagName('head')[0].appendChild(jsnode);   
            document.getElementById(thelink).innerHTML = ''; 
            }
        }
    // cookie has already been set, just load button.
    else
        {
        var jsnode = document.createElement('script');   
        jsnode.setAttribute('type','text/javascript');   
        jsnode.setAttribute('src','https://apis.google.com/js/plusone.js');   
        document.getElementsByTagName('head')[0].appendChild(jsnode);   
        document.getElementById(thelink).innerHTML = ''; 
        }
    }
    </script>
    <!-- Where the plusone button should go this piece of code should be placed -->
    <a id="plus1" href="javascript:loadplusone('plus1')">Show Google +1</a><g:plusone></g:plusone>
    <!-- This should be placed below the above code or in the onload event of the document -->
    <script type="text/javascript">
    if(getCookie())
        {
        var jsnode = document.createElement('script');   
        jsnode.setAttribute('type','text/javascript');   
        jsnode.setAttribute('src','https://apis.google.com/js/plusone.js');   
        document.getElementsByTagName('head')[0].appendChild(jsnode);   
        document.getElementById('plus1').innerHTML = ''; 
        }
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T06:41:08.600

我不喜欢社交分享按钮的一件事是有 javascript 操作和浪费速度

所以几乎每次我使用**静态按钮**时 ，你也应该使用静态按钮

否则：解决此问题的方法是在页面加载后取消设置 Cookie

使用 onLoad() 并取消设置

你怎么看？

# wcf - HttpWebRequest.StatusCode 200 “OK”，但应用程序未更新

> ID：12955400
> 
> 赞同：0
> 
> 时间：2012-10-18T13:04:20.117
> 
> 标签：wcf

我正在执行以下代码

```
string requestUrl = "http://SFPRTH010001:18109/1010-SF-TNTIN/Configurator/rest/importConfiguration?";

HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(requestUrl);
request.Method = "POST";
request.ContentType = "text/html;charset=utf-8";
//request.ContentType = "application/json";

byte[] fileToSend = File.ReadAllBytes("TestSCDS.properties");
request.ContentLength = fileToSend.Length;
MessageBox.Show(fileToSend.Length.ToString());

using (Stream requestStream = request.GetRequestStream())
{
    requestStream.Write(fileToSend, 0, fileToSend.Length);
    //MessageBox.Show(requestStream.);
    requestStream.Close();
}

using (HttpWebResponse resp = (HttpWebResponse)request.GetResponse())
{
    StreamReader reader = new StreamReader(resp.GetResponseStream());
    MessageBox.Show(reader.ReadToEnd());
    MessageBox.Show(resp.StatusCode.ToString());                    
} 
```

我得到 HTTP 状态代码“OK”，Fiddler 也显示状态 200。运行这些服务后，我希望更新一些键，但没有发生。有人可以让我知道问题可能是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T18:13:48.187

你在打 WCF 服务吗？如果是，我建议您为该服务启用 WCF 跟踪，这将确认服务中是否发生任何异常，这似乎是随后处理的。您可以使用以下跟踪配置，

```
<system.diagnostics>
    <sources>
      <source name="System.ServiceModel" switchValue="Verbose,ActivityTracing"
        propagateActivity="true">
        <listeners>
          <add type="System.Diagnostics.DefaultTraceListener" name="Default">
            <filter type="" />
          </add>
          <add name="ServiceModelTraceListener">
            <filter type="" />
          </add>
        </listeners>
      </source>
    </sources>
    <sharedListeners>
      <add initializeData="tracelog.svclog" type="System.Diagnostics.XmlWriterTraceListener"
        name="ServiceModelTraceListener" traceOutputOptions="Timestamp, ProcessId, ThreadId, Callstack">
        <filter type="" />
      </add>
    </sharedListeners>
    <trace autoflush="true" />
  </system.diagnostics> 
```

HTH，阿米特

# r - 为R中的方程制作函数

> ID：12955413
> 
> 赞同：1
> 
> 时间：2012-10-18T13:04:55.847
> 
> 标签：r, function, for-loop, matrix

在尝试了我正在尝试制作的功能的几种编码变体之后，我仍然没有成功。这是下面的等式，我希望在 R 中对其进行函数处理，

![在此处输入图像描述](../Images/1bb3dc52537a695113fcd41bebac6e5e.png)

**编辑：*s*这里当然小于*T***。

此外，这两个矩阵显示了 wij、zj(t) 和 zi(t+s) 的来源。

![在此处输入图像描述](../Images/069d84352751488e3b776f0e987e0f76.png)

因此，wij = w12 等于 wmatrix 中的 w1,2。类似地，zj(t) = z2(1) 等于 datamat 中的 a2,1。同样，i=j。因此，如果 i=1，t=1 和 s = 1，那么我们有 zi(t+s) = z1(1+1) = z1(2)，它等于数据矩阵中的 a1,2。

现在，这是我最终得到的代码，

```
st.acf <- function(datamat, wmatrix,ss){
          a = dim(datamat)[1]
          b = dim(datamat)[2]
          sumn <- 0 
          for(i in 1:a){
             for(j in 1:a){
                for(t in 1:b-ss){
                    sumn <- sumn + wmatrix[i,j]*datamat[j,t]*datamat[i,t+ss]
                }
             }
          }
          print(sumn/sqrt(sum((wmatrix%*%datamat)^2)*sum(datamat^2)))
      } 
```

我使用了一个手动计算的示例，这是它的数据，

```
DataMatrix <- rbind(c(54, 55, 51), c(52, 51, 57))
WeightsMatrix <- rbind(c(0, 1), c(1, 0)) 
```

这个答案应该是 0.66389。但是，当我使用我的函数时，它的输出显示`numeric(0)`.

```
st.acf(DataMatrix, WeightsMatrix, 1)
numeric(0) 
```

我无法理解这一点，我函数中的所有代码都是正确的，当我运行循环和 sqrt(sum((wmatrix%*%datamat)^2)*sum(datamat^2)) 时，我得到了正确答案。但是，当我尝试合并它们并创建一个函数时，我总是得到`numeric(0)`. 任何人都可以在这方面帮助我。

我会非常感激的！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:18:07.090

在 R 中，`:`运算符的优先级高于二元`-`。这意味着当你`1:b-ss`打算`(1:b)-ss`使用`1:(b-ss)`. 在您的代码中进行更改，您将获得预期的结果。

有关运算符优先级的更多详细信息，请参阅`?Syntax`。

# haskell - “关于 monads”中的 MonadError 部分

> ID：12955415
> 
> 赞同：2
> 
> 时间：2012-10-18T13:05:00.323
> 
> 标签：haskell, monads

我现在对“所有关于 monads”描述的 Error monad 感到非常困惑。

它声称 Error monad 的定义为

```
class (Monad m) => Monaderror e m | m -> e where
  throwError :: e -> m a
  catchError :: m a -> (e -> m a) -> m a 
```

其中一个实例是Either e。

```
instance MonadError (Either e) where
  throwError = Left
  (Left e) `catchError` handler = handler e
  a        `catchError` _       = a 
```

这是我不明白的。MonadError 类有两个类型参数，(Either e) 有一个，这个实例化是如何工作的？这是因为功能依赖吗？我还是不明白。

和！我在 GHCi 中运行了这段代码（带有 -XFunctionalDependencies，-XMultiParamTypeClasses）没有编译！这段代码到底是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T13:07:23.080

这只是一个错字，实例应该是

```
instance MonadError e (Either e) where
  throwError = Left
  (Left e) `catchError` handler = handler e
  a        `catchError` _       = a 
```

如您所料，使用两个类型参数。

`Either e`是 monad，`e`是对应的错误类型。

# json - 在手动停止线程之前，JMeter 没有通过基于 TCP 协议的 JSON RPC 从服务器获得答案

> ID：12955417
> 
> 赞同：1
> 
> 时间：2012-10-18T13:05:06.110
> 
> 标签：json, tcp, jmeter, json-rpc

我测试了一个服务器，它通过 TCP 响应 JSON RPC 请求。
我使用 JMeter，最新的可用版本 2.8 r1393162。
我的测试计划有带有 JSON RPC 版本 1.0 请求的 TCP 采样器`{ "method": "registrate", "params": [1,1], "id": 100}`。
当我启动它时，JMeter 在我停止线程之前不会给我答案。服务器接受了我的请求（在他的日志中查看）。
当我停止它时，我会在查看结果树中看到答案。

它是采样器中的错误还是我的测试中的错误？
这是测试服务器中的错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T07:40:11.270

根据评论，当您准备测试时，jMeter 代理非常宝贵。

因此，首先使用代理将您的操作保存在浏览器中（您会看到采样器和其他组件在您单击时出现，您会知道究竟发送了什么）。

以下是有关如何使用它的完整说明：http: [//jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf](http://jmeter.apache.org/usermanual/jmeter_proxy_step_by_step.pdf)

要启用的一个重要选项是 jMeter 代理的`Put each group in a new transaction controller`属性。因为在浏览器中的一次点击往往会导致在后台发送多个请求（例如，每个资源，如页面、js、图像都是单独的获取请求）。使用此选项，jMeter 将每个用户操作的所有请求分组到单独的事务控制器中。你会看到你的测试和你的听众（图表、表格）看起来有多干净。

以下是一些额外的指针： [https ://stackoverflow.com/a/12068377/465710](https://stackoverflow.com/a/12068377/465710)

# iphone - Iphone 中的内存问题

> ID：12955420
> 
> 赞同：0
> 
> 时间：2012-10-18T13:05:19.400
> 
> 标签：iphone, ios, uiimage

在我的应用程序中，我正在从 iPhone 的全尺寸**640 * 960**的服务器下载图像并将其保存在`core data`. 一段时间后，我在控制台上收到**“接收内存警告”**消息，因为应用程序大小越来越大并且图像从屏幕上卸载。我不知道如何管理接收内存警告问题，因为应用程序在收到消息 4 或 5 次后崩溃。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:33:06.277

我无法告诉你这么详细的原因。但我可以告诉你一种方法，你可以尝试找出你的问题。您可以使用**Instruments**来查找泄漏或内存占用。

*   在您的 Xcode 项目中，转到“产品”-> 单击“配置文件”。仪器窗口将打开。
*   点击“泄漏”。现在探索您的应用程序，仪器将告诉您泄漏的确切代码行。

# sencha-touch - Ext XTemplate 的问题

> ID：12955421
> 
> 赞同：0
> 
> 时间：2012-10-18T13:05:21.337
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我正在尝试创建一个 XTemplate 来显示数据视图中每个项目的一对多关系显示。

我想将 TransactionType 显示为列表项的标题，我必须遍历该 ActionSummary 的 ActionList 并显示每个 Action 项名称。

但是下面的代码失败了。

**楷模**

行动模型在这里

```
Ext.define('MyMobile.model.ActionModel', {
extend: 'Ext.data.Model',
config: {
    fields: [
        { name: 'Action', type: 'string' },            
        { name: 'Count', type: 'int' },            
        { name: 'Id', type: 'int' },
        { name: 'CurrentStatus', type: 'string' }
    ]
}
}); 
```

行动总结模型

```
Ext.define('MyMobile.model.ActionSummaryModel', {
extend: 'Ext.data.Model',
config: {
    fields: [
        { name: 'Id', type: 'int' },
        { name: 'TransactionType', type: 'string' }

    ]
    ,
    hasMany: {
        model: 'MyMobile.model.ActionModel',
        name: 'ActionList'
    }
}
}); 
```

**店铺**

Ext.define('MyMobile.store.ActionSummaryStore', { 扩展：'Ext.data.Store',

```
config: {
    model: 'MyMobile.model.ActionSummaryModel',

    proxy: {
        type: 'ajax',
        url: 'home/GetActionSummary',
        method: 'GET',
        reader: {
            type: 'json'
        }
    }
}
}); 
```

**看法**

```
Ext.define('MyMobile.view.ActionListView', {
extend: 'Ext.dataview.List',
xtype: 'actionsummary',
id: 'actionsummaryList',

config: {
    title: 'Actions',

    store: 'ActionSummaryStore',
    emptyText: 'Loading action items...',
    itemTpl: Ext.create('Ext.XTemplate', '<tpl for=".">',
                                            '<div><p class="action-text">{TransactionType}</p>',
                                                  '<tpl for="ActionList"><tpl for=".">',       
                                                        '<p>{Action}</p>',  
                                                         '<span class="action-count">Count:{Count}</span><br>',
                                                         '<span class="action-status">Current Status: {CurrentStatus}</span>',
                                                    '</tpl></tpl>',          
                                             '</div>',
                                           '</tpl>'

                       )
 }
 }); 
```

**JSON** JSON 是来自服务器的摘要数组

```
[{"Id":1,"TransactionType":"Transaction 1","ActionList":[{"Id":1,"Count":4,"Action":"Action Item 1","CurrentStatus":"Open"},{"Id":2,"Count":14,"Action":"Action Item 3","CurrentStatus":"Open"},{"Id":3,"Count":44,"Action":"Action Item 5","CurrentStatus":"Close"}]}] 
```

**如果我硬编码这个 JSON 数据而不是存储它正在工作。**

```
Ext.define('WorksMobile.view.ActionListView', {
extend: 'Ext.dataview.List',
xtype: 'actionsummary',
id: 'actionsummaryList',

config: {
    title: 'Actions',

    data:[{"Id":1,"TransactionType":"Transaction 1","ActionList":[{"Id":1,"Count":4,"Action":"Action Item 1","CurrentStatus":"Open"},{"Id":2,"Count":14,"Action":"Action Item 3","CurrentStatus":"Open"},{"Id":3,"Count":44,"Action":"Action Item 5","CurrentStatus":"Close"}]}],

    emptyText: 'Loading action items...',
    itemTpl: Ext.create('Ext.XTemplate', '<tpl for=".">',
                                            '<div><p class="action-text">{TransactionType}</p>',
                                                  '<tpl for="ActionList"><tpl for=".">',  
                                                        '<p>{Action}</p>',  
                                                         '<span class="action-count">Count:{Count}</span><br>',
                                                         '<span class="action-status">Current Status: {CurrentStatus}</span>',
                                                    '</tpl></tpl>',          
                                             '</div>',
                                           '</tpl>'

                       )
}
}); 
```

我不知道为什么上面的 XTemplate 不能与 JSON 存储一起使用。它仅显示交易类型、平均标题，而不显示嵌套项目的详细信息。请帮助解决这个问题。

**编辑：**一段时间后，我意识到商店没有加载关系。它没有在每个 ActionSummary 下显示 ActionList。有映射问题吗？

**编辑 2** 我删除了 ActionSummaryModel 中的 hasMany 映射并添加了一个字段 { name: 'ActionList', type: 'auto' } 然后它正在工作。但我想通过与**hasMany**和**belongsTo**的关系来做到这一点。感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:23:20.220

我将列出使您的代码按以下方式工作的所有步骤：

首先，`autoLoad`在您的商店中添加以在实例化时自动从远程源加载相关商店

```
model: 'MyMobile.model.ActionSummaryModel',
autoLoad: true 
```

其次，您需要使用`associationKey`which 是数据中的属性名称来读取关联，而不是`name`在您的`hasMany`关联中：

```
hasMany: {
    model: 'MyMobile.model.ActionModel',
    associationKey: 'ActionList'
} 
```

最后，在您看来，您需要`tpl`通过更改来进行一些更改：

```
<tpl for="ActionList"> 
```

到相关模型名称的复数形式：

```
<tpl for="actionmodels"> 
```

顺便说一句，请记住在 app.js 中包含所有相应的视图、存储和模型以使其正常工作。希望能帮助到你 ：）

# spring - SpringMVC 变量未携带到视图中

> ID：12955422
> 
> 赞同：0
> 
> 时间：2012-10-18T13:05:22.913
> 
> 标签：spring, jsp

我是 Spring 新手，正在尝试使用 Spring Framework 设置一个基本的 Web 应用程序。但是我面临一个问题，即消息变量没有传递给视图——jsp 不显示消息。

以下是我的代码 -

控制器.java

```
import org.springframework.stereotype.Controller;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.servlet.ModelAndView;

@Controller

public class HomeController {
        @RequestMapping(method=RequestMethod.GET, value="/")
    public String index(){
        ModelAndView mav = new ModelAndView();
        mav.setViewName("index");
        String message = new String("Hello Welcome - Please click to login");
        System.out.println(message);
        mav.addObject("message", message);
            return "index";
    } 
```

索引.jsp

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>
<%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core" %>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<html>
<head>
<title>Login</title>
</head>
<body>
<c:url value="login" var="somevar" />
<h1>Click here to </h1> <a href= "${somevar}">${1+1}</a>  
 <c:out value="${message}"/>
</body>
</html> 
```

评估工作正常 - 但变量“消息”的字符串为空。

我错过了什么吗？任何指导将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:31:31.257

您必须从您的页面中获取模型。试试下面的代码：

```
@Controller
public class UpdateController {

@RequestMapping(method=RequestMethod.GET, value="/")
public String index(Model model){
    String message = new String("Hello Welcome - Please click to login");
    System.out.println(message);
    model.addAttribute("message", message);
    return "index";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:09:18.433

您的`index()`控制器方法返回一个`String`，而不是一个`ModelAndView`对象。尝试：

```
public ModelAndView index(ModelAndView mav){
    mav.setViewName("index");
    String message = new String("Hello Welcome - Please click to login");
    System.out.println(message);
    mav.addObject("message", message);
    return mav;
} 
```

# html - 元标记中的长属性

> ID：12955426
> 
> 赞同：0
> 
> 时间：2012-10-18T13:05:32.753
> 
> 标签：html, seo, search-engine

我有一个用于描述的元标记：

```
<meta name="description"
      content="a very very long string that is rather boring" /> 
```

可以将内容放在多行上以便编辑可读吗？所有浏览器和搜索引擎都是这样吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:11:26.653

> 可以将内容放在多行上以便编辑可读吗？

是的。

> 所有浏览器和搜索引擎都是这样吗？

是的。

只要内容是有效的属性内容，就可以了。

HTML 4 将[content 属性](http://www.w3.org/TR/html4/struct/global.html#adef-content)定义为[CDATA](http://www.w3.org/TR/html4/types.html#type-cdata)：

> CDATA 是来自文档字符集的字符序列，可能包括字符实体。用户代理应该如下解释属性值：
> 
> *   用字符替换字符实体，
> *   忽略换行，
> *   用一个空格替换每个回车符或制表符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:01:25.033

根据规范，属性值中的换行符相当于一个空格，如 Oded 的回答中所述。

但是，实际上并不能保证程序实际上遵循这里的规则。他们无法对其他一些属性（具有 CDATA 值）执行此操作，例如将`title`属性显示为工具提示。事实上，如果您在 Firefox 中右键单击页面并选择页面信息，您将看到`content`属性值，因此会保留换行符，而不是被空格替换。

另一方面，该属性主要用于搜索引擎。没有人能真正说出*所有*搜索引擎在这方面的行为是否相同。但在这种情况下，常用的搜索引擎似乎以`content`空格和换行符之间的差异无关紧要的方式处理属性值。

# wpf - WPF 文本框绑定

> ID：12955431
> 
> 赞同：0
> 
> 时间：2012-10-18T13:05:35.513
> 
> 标签：wpf

我有一个 WPF 应用程序。我正在使用 MVVM。我有绑定到 WPF CreatePerson 视图的人模型。在 CreatePerson 视图中，有一个文本框，我在其中将 Text 属性绑定到 Person.FirstName 现在我的默认焦点是 FirstName 文本框。当我不做任何事情就按 Tab 键时，它不会触发验证，但是当我写一些东西时，它会正确触发。

所有验证均已正确设置。

现在我想当我按 Tab 键时，它应该触发验证。

如果需要更多许可，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:40:40.160

当发生任何更新绑定源的尝试时，将调用验证。如果您想在 GotFocus 事件发生时触发验证，您必须以编程方式更新您的绑定，即在 GotFocus 的事件处理程序中您可以强制绑定

```
private void textBox1_GotFocus(object sender, RoutedEventArgs e)
{
      BindingExpression binding = BindingOperations.GetBindingExpression(textBox1, TextBox.TextProperty);
 binding.UpdateSource(); 
} 
```

# c++ - 使用 WaveIn 获得声音输出？

> ID：12955438
> 
> 赞同：3
> 
> 时间：2012-10-18T13:06:04.250
> 
> 标签：c++, audio

我用 C++ 编写了一个程序，它使用 WaveIn 获取麦克风输入并对其进行分析。我很想选择将输入源从麦克风输入更改为 Windows 的声音输出，但我真的不知道该怎么做，而且很多搜索结果都是用 C# 编写的，这没有帮助大部头书。为应用程序付费的人真的希望它使用 C++。

任何人都可以帮助我用 WaveIn 或其他 API 来捕获声音输出吗？该程序旨在仅在 Windows 7 上运行，我目前正在使用 Visual C++ 2010 进行编程，如果这对您有帮助的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:13:46.903

在我的脑海中，这将需要您挂钩 waveOut 呼叫并捕获数据，然后将其用作麦克风的输入。这也意味着挂钩 waveIn。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:59:13.357

当您打开 WaveIn 设备时，不要使用`WAVE_MAPPER`作为设备 ID，而是明确设置设备

uDeviceID 指定的设备标识符从零变化到比存在的设备数量少一 -[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/dd743847%28v=vs.85%29.aspx)

您可以通过这种方式浏览所有设备：

```
 WAVEINCAPS wc; 

  /* Get the number of Digital Audio Out devices in this computer */ 
  int n_devices = waveInGetNumDevs(); 

  for (int i = 0; i < n_devices; i++) 
  { 
    if (!waveInGetDevCaps(i, &wc, sizeof (WAVEINCAPS))) 
      printf("device id #%d: %s\n", i, wc.szPname); 
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:20:01.123

根据要求，根据对 OP 的评论...

您需要选择不同的录音设备。许多 Win7 机器默认禁用“立体声混音”

转到录音设备并右键单击麦克风条目下的空白区域。您应该可以选择显示已禁用。然后，启用立体声混音，您应该能够选择它并以与麦克风完全相同的方式使用它

# bash - 存储与 sed 中的模式匹配的整行的变量是什么？

> ID：12955440
> 
> 赞同：2
> 
> 时间：2012-10-18T13:06:24.127
> 
> 标签：bash, sed, autohotkey, dvorak

我有一个文件，其行是以意大利语结尾的单词`[aiou]'`

```
gia'
giacche'
giovedi'
giu' 
```

我想用自动热键命令替换这些行，这将允许我用撇号写这些词并自动将它们翻译成正确的版本，这就是我想要的

```
::gia'::già
::giacche'::giacché
::giovedi'::giovedì
::giu'::giù 
```

我知道我可以用 sed 完成这个，但我无法让它工作。我知道有一个变量可以存储整行，但我找不到它。如果是`@`以下可能会起作用

```
sed -e "s/.a'/::@::@\b\bà/" temp
sed -e "s/.i'/::@::@\b\bì/" temp
sed -e "s/.o'/::@::@\b\bò/" temp
sed -e "s/.u'/::@::@\b\bù/" temp 
```

请注意，虽然这些行是按字母顺序排列的，但它们并不都以 g 开头，单词的最后两个字符也没有模式。

那么你知道我要找的变量是什么吗？你认为我的问题有比我正在尝试的更好的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:09:52.167

您要查找的变量是`&`. 也许是这样的：

```
sed -e "s/\(.*\)a'/::&::\1à/" temp 
```

您还可以将所有五个元音的所有命令串在一起：

```
sed -e "s/\(.*\)a'/::&::\1à/" -e "s/\(.*\)e'/::&::\1é/" -e "s/\(.*\)i'/::&::\1ì/" -e "s/\(.*\)o'/::&::\1ò/" -e "s/\(.*\)u'/::&::\1ù/" temp 
```

* * *

如果您有`GNU sed`：

```
sed -re "s/(.+)a'/::&::\1à/" -e "s/(.+)e'/::&::\1é/" -e "s/(.+)i'/::&::\1ì/" -e "s/(.+)o'/::&::\1ò/" -e "s/(.+)u'/::&::\1ù/" temp 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:53:08.867

这可能对您有用（GNU sed）：

```
sed -r '1{x;s/^/aàeéiìoòuù/;x};/[aeiou]'\''$/!b;G;s/((.*)(.).)\n.*\3(.).*/::\1::\2\4/' file 
```

解释：

*   `1{x;s/^/aàeéiìoòuù/;x}`在文件开头的保持空间 (HS) 中存储查找表
*   `/[aeiou]'\''$/!b`保释，除非所需的词结尾
*   `G`将换行符和 HS 的内容附加到模式空间 (PS)
*   `s/((.*)(.).)\n.*\3(.).*/::\1::\2\4/`使用原始单词中的最后一个字符作为附加查找表中的查找并生成所需的输出

# javascript - 使用 jquery 加载更新多个 div

> ID：12955441
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:06:27.217
> 
> 标签：javascript, jquery

我想用单个 jquery .load 调用更新同一页面上的两个 div

**脚本**

```
 $('#ipc').load('/dashboard/details/options');
  $('#inv').load('/dashboard/details/options'); 
```

我不想通过传统的 ajax 调用来做到这一点。我还尝试了 append 方法和 .each() 函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T13:07:47.010

您可以使用逗号分隔的选择器：

`$('#ipc, #inv').load('/dashboard/details/options');`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-18T13:07:43.260

一种方法：

```
$('#ipc').load('/dashboard/details/options', function(){
    $('#inv').html($('#ipc').html());
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T13:08:12.393

```
$('#ipc,#ipc2').load('/dashboard/details/options'); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T13:08:27.840

尝试这个

```
jQuery.load(
    '/dsahboard/details/options',
    {},
    function(res) {
        $('#ipc').html(res);
        $('#inv').html(res);
    }
); 
```

# devexpress - 如何隐藏文字水印

> ID：12955448
> 
> 赞同：0
> 
> 时间：2012-10-18T13:06:41.383
> 
> 标签：devexpress, watermark, xtrareport

我有一个 Devexpress XtraReport，我只是不知道如何`watermark`根据数据的可用性隐藏/显示文本。我希望仅在数据不可用时才显示“数据不可用”水印，并在有一些数据要显示时动态隐藏水印。

我应该考虑隐藏/显示水印的 XtraReport 的哪些属性？
提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T14:03:48.017

要完成此任务，请处理[XRControl.BeforePrint](http://documentation.devexpress.com/#XtraReports/DevExpressXtraReportsUIXRControl_BeforePrinttopic)事件并修改[XtraReport.Watermark 属性。](http://documentation.devexpress.com/#XtraReports/DevExpressXtraReportsUIXtraReport_Watermarktopic)

```
if(report.PrintingSystem.Watermark.TextTransparency == 255)
      report.PrintingSystem.Watermark.TextTransparency = 0;
  else
      report.PrintingSystem.Watermark.TextTransparency = 255;

  printBarManager1.PrintControl.Refresh(); 
```

参考这些：
[隐藏水印](http://www.devexpress.com/Support/Center/p/Q208434.aspx)
[如何：在预览中更改命令的可见性](http://documentation.devexpress.com/#xtrareports/CustomDocument2746)

# php - 删除与 EntityManager 的多对多关系的对象部分返回错误

> ID：12955449
> 
> 赞同：3
> 
> 时间：2012-10-18T13:06:54.037
> 
> 标签：php, symfony, doctrine-orm

我有一个模式，在实体“用户”和“角色”之间具有多对多关系，映射如下。

角色实体

```
/**
 * @ORM\ManyToMany(targetEntity="User", mappedBy="roles", cascade={"persist", "remove"})
 */
protected $users; 
```

和用户实体

```
/**
 * @ORM\ManyToMany(targetEntity="Role", inversedBy="users", cascade={"persist", "remove"})
 * @ORM\JoinTable(name="users_roles")
 * 
 * @var ArrayCollection $userRoles
 */
protected $userRoles; 
```

当我尝试使用以下代码删除角色对象时，

```
$role = $em->getRepository('ACMEDefaultBundle:Role')->find($id);
$em->remove($role);
$em->flush(); 
```

我得到了一个教义例外

> ErrorException：注意：未定义索引：/media/sf_sandbox/aalcodev/vendor/doctrine /media/sf_sandbox/aalcodev/vendor/doctrine/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php 第 964 行（未捕获的异常）中的角色/orm/lib/Doctrine/ORM/Persisters/BasicEntityPersister.php 第 964 行

请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:50:07.933

您应该更改`mappedBy="roles"`为`mappedBy="userRoles"`. “映射者”应该指向对方的属性名称......

# php - 使用带有wordpress url的jquery在新窗口中的FB共享按钮？

> ID：12955451
> 
> 赞同：0
> 
> 时间：2012-10-18T13:06:56.123
> 
> 标签：php, jquery, wordpress

> **可能重复：**
> [如何在 JavaScript 或 jQuery 中访问 PHP 变量，而不是 <?php echo $variable ?>](https://stackoverflow.com/questions/1808108/how-to-access-php-variables-in-javascript-or-jquery-rather-than-php-echo-vari)

我实际上是在问这个问题：

[新视窗分享FB](https://stackoverflow.com/questions/5653858/fb-share-in-new-window)

有一件事是不同的，这就是为什么那里给定的答案对我不起作用的原因。

我正在使用 wordpress，所以我的链接包含 php 元素。这意味着我不能只是将 url 粘贴到 jquery 中，因为 jquery 无法处理 php。

链接如下：

```
href="http://www.facebook.com/sharer.php?u=<?php the_permalink();?>&t=<?php the_title(); ?>" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:22:14.170

您可以在页面级别定义 url 和标题，因此在 index.php 中它的元素中会包含以下内容：

```
<script>
    var fbUrl = "<?php the_permalink(); ?>";
    var fbTitle = "<?php the _title(); ?>";
</script> 
```

然后在您需要包含在上述脚本块之后的 javascript 文件中：

```
 href = href="http://www.facebook.com/sharer.php?u=" + fbUrl + "&t=" + fbTitle; 
```

# c - 用于存储字符串的哈希表实现

> ID：12955453
> 
> 赞同：0
> 
> 时间：2012-10-18T13:07:05.617
> 
> 标签：c, hashtable

这是我用于存储字符串值的哈希表的代码。要在我的“插入”函数中使用线性探测，我需要检查指针在该特定哈希值处是否为 NULL。我还没有完成我的插入函数，但是我被卡住了，因为当我在插入函数中检查**if(the_hash_table[n]==NULL)** 时，它没有进入分支。如果我打印“the_hash_table[1]”，在散列值之前，它会打印“faz”，但是在我打印它的那一步之后，它会打印一些奇怪的字符。我哪里出错了？

```
 #include <stdio.h>
    #include <stdlib.h>
    #include <string.h>

    /*
    creates a hash table of size 10
    */

    char** create_hash_table(){

        char* the_hash_table[10];   // defines a hash table to store strings

        *the_hash_table=malloc(sizeof(char*)*10); // allocates memory in the heap for the hash table
        int i;
        for(i=0;i<10;i++){ // this loop initializes the string pointers to NULL at the starting point of the hash table
            the_hash_table[i]=NULL;
        }
        return &the_hash_table; // returns the address of the hash table to the main memory

    }

    /*
    this is a method to insert a string into the relevant position of the hash table
    */

    void insert(char* the_string,char** the_hash_table){

        printf("%s",the_hash_table[1]);
        int n=hash(the_string);
        printf("%s",the_hash_table[1]);
        if(the_hash_table[n] == NULL)
            the_hash_table[n]=the_string;

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:11:35.700

您没有正确分配内存。

您将自动变量定义`the_hash_table`为指针数组。您分配一些内存并将指向该内存的指针放入数组中。`the_hash_table`您立即用空指针覆盖该指针（以及 的其他元素）。

然后你返回一个指向本地数组的指针，但是一旦函数退出，这个数组就不再存在了。从定义它的函数返回指向自动变量的指针*总是错误的。*

你应该做的是：

```
char** create_hash_table(void) {
    char** the_hash_table = malloc(sizeof(*the_hash_table) * 10);
    for (int i = 0; i < 10; ++i) {
        the_hash_table[i] = NULL;
    }
    return the_hash_table;
} 
```

所以，`the_hash_table`是一个指向分配内存的局部变量。您返回它的值，即分配的内存的地址。那么在`main`你`free(the_hash_table)`不会`free(*the_hash_table)`。

此外，在您的`hash`函数中，复制字符串是没有意义的：只需从`the_string[i]`. 即使复制它是有道理的，您为此创建的缓冲区也太小了 1 个字节，这是`strlen(the_string)+1`因为返回的长度`strlen`不包括终止字符串的 0 字节。

# excel - 错误 3011 访问 2007

> ID：12955456
> 
> 赞同：0
> 
> 时间：2012-10-18T13:07:07.810
> 
> 标签：excel, vba, ms-access, ms-access-2007

嘿大家我一直在这个网站上检查一些类似的问题，但我还没有找到对我的问题的回应。我不断崩溃的线路是：

```
 DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel9, "MY_FUT_REPORT", "U:\Desktop\TEST.xls", True, "FUTURE" 
```

所以 MY_FUT_REPORT 是一份报告，我想将它转移到 Excel 表中。然后我在下面有以下行，我想附加到现有的工作表中。

```
 DoCmd.TransferSpreadsheet acExport, acSpreadsheetTypeExcel9, "MY_ND_REPORT", "U:\Desktop\TEST.xls", True, "NEXT DAY" 
```

到目前为止，第一行崩溃我已经创建了多个文件到同一路径并且它有效，我也尝试过这一行

DoCmd.OutputTo acOutputReport, "MY_FUT_REPORT", acFormatXLS, "U:\Desktop\TEST.xls", 0

这工作得很好所以我想知道问题是什么我也尝试了通过将命令替换为 acSpreadsheetTypeExcel12Xml 的命令，但仍然没有成功。谁能帮我！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:29:02.687

您在评论中暗示了您的答案。无论如何，您是正确的，您不能使用[DoCmd.TransferSpreadsheet](http://msdn.microsoft.com/en-us/library/office/ff844793.aspx)导出报告。为了获得您期望的结果，您需要将代码中调用报告名称的部分更改为报告的实际基础数据，即报告的记录源。

# excel - 如果在“Sheets”、“ThisWorkbook”和“Modules”中运行 VBA 代码会有什么不同？

> ID：12955461
> 
> 赞同：9
> 
> 时间：2012-10-18T13:07:23.220
> 
> 标签：excel, spreadsheet, vba

如果在“Sheet”（“Sheet1”、“Sheet2”等）、“ThisWorkbook”和“Modules”（“Module1”等）中运行 VBA 代码会有什么不同？

换句话说，在哪些情况下应该使用哪一个？

![在此处输入图像描述](../Images/b9d1fbb49a09d190bf04487e2947a3c3.png)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-18T13:21:11.620

模块是类似功能和子例程的集合，通常根据其功能进行分组。

在模块子例程/函数中， **Private** : Functions 和 Sub-routines 仅在该模块中可用。 **Public**：可以从任何地方直接访问它们。（另一个模块，不同的宏等）将实用程序功能存储在模块中是常见的做法。

`Option Private Module`，这使得模块本身私有，可以添加到任何标准模块的顶部，但不允许在对象模块上，如 ThisWorkbook 或 Sheet1 等。

* * *

ThisWorkbook 是 Workbook 对象的私有模块。例如，**Workbook_Open()**、**Workbook_Close()**例程驻留在此模块中。（[**工作簿对象参考**](http://msdn.microsoft.com/en-us/library/office/aa224504%28v=office.11%29.aspx)）

* * *

同样，Sheet1、Sheet2 是各个工作表的私有模块。在它们中，您将放入特定于该工作表的功能。 **Worksheet_Activate**、**Worksheet_Deactivate**、**Workbook_SheetChange**是提供给您的默认事件，以便您可以在各自的私有工作**表**模块中处理它们。（**[工作表对象参考](http://msdn.microsoft.com/en-us/library/office/ff847327.aspx)**）

正如@Daniel Cook 在评论中所说，虽然 ThisWorkbook 和 WorkSheet 的模块不能直接用作模块`subName()`或`functionName()`模块外，但仍然可以使用`ThisWorkbook.subName()`或调用它们`ThisWorkbook.functionName()`

* * *

类模块是您可以在 VBA 中获得的最接近 OOP 的模块。它们具有构造函数、析构函数，并且可以实例化以提供类对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:19:43.823

我知道至少`Modules`必须运行并`ThisWorkBook`用于事件等`SheetChange`事件。

常见代码吐出`ThisWorkBook`：

```
Private Sub Workbook_Open()

End Sub

Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)

End Sub 
```

这个问题也已经在这里回答了：

[http://www.pcreview.co.uk/forums/macro-module-function-sub-and-workbook-and-sheets-t980275.html](http://www.pcreview.co.uk/forums/macro-module-function-sub-and-workbook-and-sheets-t980275.html)

# jquery-ui - 制作一个 bootstrapjs 按钮以充当下拉菜单

> ID：12955464
> 
> 赞同：0
> 
> 时间：2012-10-18T13:07:28.213
> 
> 标签：jquery-ui, twitter-bootstrap

我正在尝试制作一个 bootstrapjs 按钮以充当引导下拉菜单

引导文档仅提供一个下拉列表项：http: [//twitter.github.com/bootstrap/javascript.html#dropdowns](http://twitter.github.com/bootstrap/javascript.html#dropdowns)

我试着给它上课`btn`，但没有运气，它看起来很乱，不能正常工作

# html - iBooks 作者 iframe

> ID：12955472
> 
> 赞同：0
> 
> 时间：2012-10-18T13:07:57.447
> 
> 标签：html, iframe, ibooks

我想知道我是否可以通过**iframe**在 ibooks 作者中添加**自定义的 html 页面**，然后从服务器更新该页面。

 **目的是拥有一个包含多个链接和图像的自定义网页，然后根据需要不时更改内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-11T22:06:46.927

您可以使用 Widget 包来执行此操作。您基本上将拥有一个包含 iframe 并调用您的 Web URL 的小部件，然后将该小部件嵌入到您的图书文件中。如果将 iframe 直接放在您的图书内容中，则该小部件不受您会遇到的安全限制。在此处查看[有关在 ibooks 中使用小部件的指南](http://support.apple.com/kb/HT5068)**

# c# - 在 C# 中转换/查找 Java 类库的类似物的选项？

> ID：12955476
> 
> 赞同：2
> 
> 时间：2012-10-18T13:08:05.460
> 
> 标签：c#, java, axis2, axiom, sharpen-tool

我的任务是用 C#.NET 重写 Java Web 服务客户端。事实证明，这项任务中唯一真正乏味的部分是弄清楚如何处理所有 Java 类库（抱歉，如果这不是正确的术语——Java 的经验不如 C# 的经验丰富）。我正在寻找两种不同的选择：

1）反编译jar并使用Sharpen进行转换

2) 反编译或使用 Apache 的在线文档来重新创建我需要的部分

这两种方法的最大缺点是是否有任何 C# 类比我要转换的 Java 类的问题，这意味着我会重复工作。第一个选项也有一个缺点，即某些代码可能无法干净地转换，这让我必须查看所有代码才能弄清楚。我需要 C# 等效代码的两个最重要的库是 Axis2 AxisFault 和常量库以及 Axiom OM 库。

**这是我的问题：**除了我列出的两个之外，还有其他选择吗？我已经用谷歌搜索了十几次，我发现的只是这两个选项。

# jquery - 访问某些页面元素后，jQuery 1.8.2 插件和验证方法会间歇性加载

> ID：12955494
> 
> 赞同：1
> 
> 时间：2012-10-18T13:08:49.407
> 
> 标签：jquery, html

一段时间以来一直未能成功解决此问题。

我正在使用 JSPX，并使用图块来呈现 HTML（不是 XHTML）页面，父图块模板是这样的

```
<html lang="en-us" dir="ltr" xmlns:jsp="http://java.sun.com/JSP/Page"
  xmlns:tiles="http://tiles.apache.org/tags-tiles" xmlns:c="http://java.sun.com/jsp/jstl/core"
>
<jsp:output doctype-root-element="HTML" doctype-system="about:legacy-compat" omit-xml-declaration="yes"/>
<jsp:directive.page contentType="text/html;charset=UTF-8" />
<jsp:directive.page pageEncoding="UTF-8" />
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=8" />
<c:url var="rootUrl" value="/resources/" />
<link rel="stylesheet" type="text/css" href="${rootUrl}css/screen.css" />
<link href="${rootUrl}css/forms/uni-form.css" media="screen" rel="stylesheet" />
<link href="${rootUrl}css/forms/form.css" media="screen" rel="stylesheet" />
<link href="${rootUrl}css/forms/blue.uni-form.css" id="formStyle" title="Default Style" media="screen" rel="stylesheet" />
<link rel="stylesheet" type="text/css" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
<!--[if lte ie 7]>
          <style type="text/css" media="screen">
          /* Move these to your IE6/7 specific stylesheet if possible */
            .uniForm, .uniForm fieldset, .uniForm .ctrlHolder, .uniForm .formHint, .uniForm .buttonHolder, .uniForm .ctrlHolder ul{ zoom:1; }
          </style>
        <![endif]-->
<![CDATA[
<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.2.js">
</script>

<script type="text/javascript" src="http://code.jquery.com/ui/1.9.0/jquery-ui.min.js">
</script>
]]>
<script type="text/javascript" src="${rootUrl}js/ext/forms/uni-form-validation.jquery.js">
    <!--avoid jspx tag collapse -->
    <jsp:text></jsp:text>
</script>   
<![CDATA[
<script type="text/javascript">
    $(function() {
        $( "#demographicInfo.dateOfBirth" ).datepicker({ 
            minDate: -20, maxDate: "+1M +10D", 
            changeMonth: true,
            changeYear: true });
        $('form.uniForm').uniform({
            prevent_submit : true,
            ask_on_leave : true,
        })
    });
</script> ]]>
<title>Mystery Shopping</title>
</head>
<body>
  <div id="page">
    <tiles:insertAttribute name="header" />
    <tiles:insertAttribute name="body" />
    <tiles:insertAttribute name="footer" ignore="true" />
  </div>
</body>
</html> 
```

在实现 body 属性的视图中，表单已实现如下：

```
 <div id="createPane" class="panel roundedCorners">
    <form:form commandName="shopperDemographicInfo" method="POST" action="/shopper/contactinfo/save" id='contactInfo' class="uniForm">
      <div class="header">
        <h2>Contact Information</h2>
        <p>
          <a href="/shopper/info#contact_info" class="cta">Do I have to? →&lt;/a>
        </p>
      </div>
      <fieldset>
      ...
      ...
        <div class="ctrlHolder">
          <label for="demographicInfo.dateOfBirth"><em>*</em> Date of birth</label>
          <spring:bind path="demographicInfo.dateOfBirth">
            <input name="demographicInfo.dateOfBirth" id="demographicInfo.dateOfBirth" size="35" type="text"
              class="textInput auto required validateDate"
            >
          </spring:bind>
          <p class="formHint">Date of birth in dd/mm/yyyy format</p>
        </div
      ... 
```

> 如您所见，我正在起诉基于 Jquery 的 UI 和表单生成插件。问题是块

```
<![CDATA[
<script type="text/javascript">
    $(function() {
        $( "#demographicInfo.dateOfBirth" ).datepicker({ 
            minDate: -20, maxDate: "+1M +10D", 
            changeMonth: true,
            changeYear: true });
        $('form.uniForm').uniform({
            prevent_submit : true,
            ask_on_leave : true,
        })
    });
</script> ]]> 
```

不执行。也不是下面提到的形式

**看到第一个回复后添加了备用块**

```
<script type="text/javascript">
  <![CDATA[
    $(function() {
        $( "#demographicInfo.dateOfBirth" ).datepicker({ 
            minDate: -20, maxDate: "+1M +10D", 
            changeMonth: true,
            changeYear: true });
        $('form.uniForm').uniform({
            prevent_submit : true,
            ask_on_leave : true,
        })
    });
  ]]>
</script> 
```

详细说明 uni-form-jquery-validation 如果存在验证错误，javascript 预计不允许提交；然而这并没有发生。然而，我确实看到验证适用于其他一些预期场景，例如元素失去焦点时。同样，来自 jQuery 的日期选择器组件根本不会被渲染。

如果我放置一个简单的 HTML 5 页面，所有这些都可以正常工作。我已经正确地转义了脚本；调试器没有显示任何错误（不是我有限的 javascript 知识可以学习）。

关于可能仍然出现问题的任何指示或想法？

这是[统一 jquery 插件](http://sprawsm.com/uni-form/)和[github 源的链接](https://github.com/draganbabic/uni-form)

**更新**：这是一个 jQuery 加载问题，而不是其他任何事情；这是每次都会发生的事情：

1.  我等到页面完全加载
2.  目的将文本字段完全留空，这会在元素失去焦点时导致违规错误
3.  此时，如果我点击刷新或返回按钮，系统会提示我确认配置要求的离开页面

    > 'ask_on_leave：真'

4.  但是该脚本永远不会“阻止”表单提交。

对此加载问题进一步进行故障排除以归零。

我得到的另一个相当诡异的行为是，在几次随机刷新之后，要求确认离开页面的弹出窗口开始按照配置的要求工作

```
ask_on_leave : true 
```

对我来说，这似乎是一个实例化问题，但我无法再进行故障排除，因为运行 firebug 或 chrome 开发者控制台，当页面加载或添加断点以在访问页面上的控件时检查流程时，不会出现错误。

检查 JQuery 打开的缺陷，看看那里是否有一些指针。

***日期选择器解决了***

我对“id​​”属性的值使用了错误的格式

```
id='demographicInfo.dateOfBirth' 
```

并在 jQuery 函数中

```
 $( "#demographicInfo.dateOfBirth" ).datepicker({ 
        minDate: -20, maxDate: "+1M +10D", 
        changeMonth: true,
        changeYear: true }); 
```

这让 jQuery 感到困惑，将其更改为

```
id='dateOfBirth' 
```

和

```
 $( "#dateOfBirth" ).datepicker({ 
        minDate: -20, maxDate: "+1M +10D", 
        changeMonth: true,
        changeYear: true }); 
```

**解决了**

我必须添加片段来转义所有元素的名称，这些元素有一个句点，即一个元素

```
<input name='demographicInfo.age' .... /> 
```

javascript代码

```
required : function (field, caption) {
    var name;
    if (field.is(':radio')) {
        var rawName = field.attr('name');
        if(~rawName.indexOf('.')){
            console.log("escaping . chanracter");
            name = rawName.replace(".","\\.");
            console.log(name);
        }else
            name = rawName;
        if ($("input[name=" + name + "]:checked").length) {
            return true;
        }
        return i18n('req_radio', caption);
    }
    if (field.is(':checkbox')) {
        name = field.attr('name');
        if (field.is(":checked")) {
            return true;
        }
        return i18n('req_checkbox', caption);
    }
    if (jQuery.trim(field.val()) === '') {
        return i18n('required', caption);
    }
    return true;
} 
```

由于带有 . 名字中的字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:14:45.823

```
<script type='text/javascript'>//<![CDATA[ 
    ...
//]]>  
</script> 
```

注意脚本标签内的 CDATA 没有包围它们。

# python - raw_input 应该只接受单个字符

> ID：12955495
> 
> 赞同：3
> 
> 时间：2012-10-18T13:08:55.097
> 
> 标签：python

> **可能重复：**
> [Python 从用户读取单个字符](https://stackoverflow.com/questions/510357/python-read-a-single-character-from-the-user)

我正在使用下面的代码。但是它允许用户放置多个字符，而不是接受单个字符。

我该如何解决？

```
guess = raw_input(':')
guessInLower = guess.lower() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-18T13:17:10.787

以下将不断提示用户输入，直到他们恰好输入一个字符。

```
userInput = ''
while len(userInput) != 1:
    userInput = raw_input(':')
guessInLower = userInput.lower() 
```

这样做是一样的，但也会在再次提示输入之前通知他们一个字符的限制

```
while True:
    userInput = raw_input(':')
    if len(userInput) == 1:
        break
    print 'Please enter only one character'
guessInLower = userInput.lower() 
```

看起来你只期待字母。如果是这种情况，您可以进一步扩展以要求：

```
import string

while True:
    userInput = raw_input(':')
    if len(userInput) == 1:
        if userInput in string.letters:
            break
        print 'Please enter only letters'
    else:
        print 'Please enter only one character'
guessInLower = userInput.lower() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T13:16:35.340

默认情况下，python 使用行缓冲输入，这意味着`raw_input()`在用户点击回车之前调用不会返回。如果您想关闭线路缓冲，您可能需要查看您可以执行的特定于操作系统的操作。[你可以在这里找到一个演示这个的食谱](http://code.activestate.com/recipes/134892-getch-like-unbuffered-character-reading-from-stdin/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:54:03.567

对于 Python 2.7.x，

```
guess = raw_input(': ')[0].lower() 
```

对于 Python 3.x

```
guess = input (': ')[0].lower() 
```

在这两种情况下，来自终端原始输入字符串的第一个字符（不需要使用`''`）将被降低并传递给变量`guess`。

# jasper-reports - 如何准备数据以传递给 $X{} 表达式而不是使用 CONCAT SQL

> ID：12955497
> 
> 赞同：1
> 
> 时间：2012-10-18T13:09:03.113
> 
> 标签：jasper-reports

是否可以`concat`在表达式中使用sql的功能`$X{}`：

```
($X{IN,(CONCAT(vtiger_usersAccounts.first_name,' ',vtiger_usersAccounts.last_name)),user) 
```

我有错误，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:48:46.087

尝试在 $X 函数中使用分号（或管道）分隔符，然后它将被正确解析：

```
$X{IN;CONCAT(vtiger_usersAccounts.first_name,' ',vtiger_usersAccounts.last_name);user) 
```

如果您在 iReport 中使用此功能，需要注意的另一件事是，每次更改 Gui 中的报告（假设您调整列的大小）时，sql 都会恢复为逗号分隔符，这似乎是 iReport 中的一个烦人的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:36:18.883

试试这个表达式：

```
SELECT CONCAT(vtiger_usersAccounts.first_name,' ',vtiger_usersAccounts.last_name) as name FROM table WHERE $X{IN, name, user} 
```

*HSQLDB*的工作示例：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ..>
    <parameter name="cities" class="java.util.Collection">
        <defaultValueExpression><![CDATA[Arrays.asList("Dallas 2 Upland Pl.", "Chicago 202 College Av.")]]></defaultValueExpression>
    </parameter>
    <queryString>
        <![CDATA[SELECT id, CONCAT(city, CONCAT(' ', street)) as name FROM address WHERE $X{IN, name, cities}]]>
    </queryString>
    <field name="ID" class="java.lang.Integer"/>
    <field name="name" class="java.lang.String"/>
    <detail>
        <band height="20" splitType="Stretch">
            <textField>
                <reportElement x="0" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{ID}]]></textFieldExpression>
            </textField>
            <textField>
                <reportElement x="100" y="0" width="100" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{name}]]></textFieldExpression>
            </textField>
        </band>
    </detail>
</jasperReport> 
```

***注意：***在此示例中，我使用了*`CONCAT(value1, CONCAT(' ', value2))`*表达式而不是您的表达式*`CONCAT(value1, ' ', value2)`*。

* * *

您可以在[查询示例](http://jasperreports.sourceforge.net/sample.reference/query/index.html#query)帖子中找到有关使用`$X{}`语法的更多信息。

# scala - Scala 是否过于复杂，以至于任何 IDE 都无法支持等同于对 Java / C# 的重构支持的重构？

> ID：12955498
> 
> 赞同：3
> 
> 时间：2012-10-18T13:09:10.103
> 
> 标签：scala, automated-refactoring

typesafe.com 上的 Scala IDE 功能列表吹捧基本的重构支持，如重命名、提取方法等。但是我发现支持非常糟糕。它很容易崩溃，我发现它不利于它在大型项目中的可用性。

在一个项目中，我们正在全力以赴地使用 Scala，而缺乏工具可能是对在 Scala 中工作的 Java 和 C# 开发人员最难卖的东西。当重命名仍然无法正常工作时，很难说服人们对编写代码感到兴奋。有人认为 Scala 太复杂了。Jetbrains 最初在其网站上的 Kotlin 常见问题解答中的某个时间点提出的声明似乎很普遍。

这种说法有什么问题吗？直到此时，typesafe 是否无法充分利用此功能？

# api - REST API，提供表示的变体。导出具有依赖关系的文件

> ID：12955513
> 
> 赞同：1
> 
> 时间：2012-10-18T13:10:01.770
> 
> 标签：api, rest, content-negotiation

我有一个关于服务不同资源表示的最佳实践的问题。我的用例比简单地以不同的内容类型（比如 xml 或 json）提供对象的表示要复杂一些。

背景：此 API 用于内容管理系统。API 的一个关键方面是用户可以请求文档的 zip 文件，以及它的所有依赖项（链接的图像和其他文档）。

例如，一个人可能会访问一个文档，`/rest/all-documents/{doc-id}`该文档将返回该文档的 XML 表示。

在为他们设计一种获取文档压缩包及其所有依赖项的方法时，我提出了一些选择：

1.  使用内容协商并将`Accept`标头设置为特定于供应商的内容，即：vnd.company.compiled-doc+zip
2.  使用子集合，例如`/rest/all-documents/{doc-id}/export`（Export 是动词，所以我不确定这是否标准化）
3.  在只读的不同 URI 上提供服务：`/rest/compiled-documents/{doc-id}`

由于这个问题可能会一次又一次地出现，我很难确定设计这部分 API 的最佳方法是什么。到目前为止，我倾向于选项 3，

谢谢，

凯西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T09:03:32.733

我建议采用以下方法：/rest/all-documents/{doc-id}.zip

知道您最终选择了什么解决方案会很有趣。

文斯。

# html - 从浏览器打开图像到画廊

> ID：12955516
> 
> 赞同：5
> 
> 时间：2012-10-18T13:10:14.610
> 
> 标签：html, image, gallery

我正在开发一个移动网站并设计一个包含图像和视频的滑动画廊。如果我点击视频，它会在 Youtube 中打开并且工作正常。这是我使用的代码。

```
<a href="http://www.youtube.com/v/YouTubeID?version=3&hl=en_US">
<img class="sliderImage" src="http://img.youtube.com/vi/YouTubeID/0.jpg" alt="Video" />
</a> 
```

我希望图像具有类似的功能，以便根据移动设备在默认图像库中打开，如 Android 图像库、Windows Mobile 照片查看器等。

这是代码

```
<a href="Some Image URL">
<img class="sliderImage" src="Some Image URL" alt="It's Better" />
</a> 
```

我认为，href 中需要一些东西来将图像重定向到画廊，但我不知道那可能是什么。

如果有人能指出我正确的方向，那将非常有帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T21:30:51.060

一种方法是将图像的 mimetype 设置为默认下载的值，例如 application/octet-stream。

如果您无法访问文件来更改 mimetype，您可以只更改 HTTP 响应的 mimetype（[PHP 示例](http://www.webdeveloper.com/forum/showthread.php?244007-RESOLVED-Force-download-of-MP3-file-instead-of-streaming&p=1145805#post1145805)）

该帖子谈论的是 MP3，但该方法也适用于图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T13:41:43.760

如果你想这样做，你可以使用下面的代码。我尝试了它并且它正在工作，但是该图像链接不会在“图像查看器”中打开..它将在浏览器中打开..

```
<a href="file://c:/user/documents/images/abc.png">
<img class="sliderImage" src="Some Image url" alt="It's working">
</a> 
```

可能是在“图像查看器”中打开的图像，但它肯定会在浏览器中打开..

# javascript - 如何为 JavaScript 编写测试用例

> ID：12955519
> 
> 赞同：0
> 
> 时间：2012-10-18T13:10:33.053
> 
> 标签：javascript, ruby-on-rails, ruby-on-rails-3.1, bdd, testcase

我有`Rails Application`哪些用途`JavaScript Extensively`。

我想知道是否有任何工具`(Similar to Rspec, Cucumber For Rails)`可以用来测试我的应用程序中编写的 JS 代码。

确保您的 JS 正确的最佳实践是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:14:23.720

使用茉莉花。

[http://pivotal.github.com/jasmine/](http://pivotal.github.com/jasmine/)

并结合 jTestDrive 来测试不同的浏览器。 [http://code.google.com/p/js-test-driver/](http://code.google.com/p/js-test-driver/)

jasmine 用于测试用例，jsTestDrive 用于在不同的浏览器上执行测试。

随意询问您是否需要更多信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:15:18.493

有几种 JavaScript 单元测试工具。我用过的有：

*   [QUnit](http://qunitjs.com/)
*   [JSUnit](https://github.com/pivotal/jsunit)
*   [茉莉花](http://pivotal.github.com/jasmine/)

对这些的网络搜索会出现很多关于使用它们的比较、教程和其他文章。[这里](http://railscasts.com/episodes/261-testing-javascript-with-jasmine)有一篇关于在 Rails 中使用 Jasmine 的文章。

[这里](https://www.ruby-toolbox.com/categories/javascript_testing)有一篇不错的文章比较了几个用于 Rails 的 JavaScript 测试套件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:15:27.323

你可以试试 jasminerice gem git 链接 [https://github.com/bradphelan/jasminerice](https://github.com/bradphelan/jasminerice)

# crystal-reports - 将显示限制为在某个日期范围内具有大于 X 条记录的组

> ID：12955525
> 
> 赞同：2
> 
> 时间：2012-10-18T13:10:50.777
> 
> 标签：crystal-reports

我需要根据日期范围内返回的记录数过滤报告。即如果上个月的记录少于 x，则不显示该组。我可以成功地使用 Count() 函数过滤整个数据库，但我不知道如何让它只考虑日期范围内返回的记录（通过参数设置）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:23:50.827

我假设您是按日期分组的，并且日期中没有时间，所以我`{YourTable.YourDate}`将从这里开始引用该字段。

您可以将自定义抑制公式添加到您的组页眉、详细信息和组页脚，如下所示：

```
Count ({YourTable.YourDate}, {YourTable.YourDate}) <= 1 
```

是硬编码的`1`，但你可以传入一个参数，任何计数小于或等于传入数字的组和细节都将被抑制。

# javascript - 在文本框中输入文本时，我需要使用 AJAX 获取搜索内容

> ID：12955527
> 
> 赞同：0
> 
> 时间：2012-10-18T13:10:54.300
> 
> 标签：javascript, jquery, asp.net, ajax

如何在使用 Ajax 和 jQuery 在文本框上键入时显示搜索结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:13:09.230

[jquery 自动完成](http://jqueryui.com/autocomplete/)对你来说可能是一个不错的选择。

jquery 还不够，您需要添加 jqueryui 库，但您可能迟早会使用该库中的更多功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:16:45.170

即使我是 ajax 领域的初学者，昨天我也尝试了一些东西......在谷歌搜索后在某个网站上找到了我 cud 获取这个之后......

[http://jqueryui.com/autocomplete/](http://jqueryui.com/autocomplete/)

如果没有，请通过这个，我会给你我的代码......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:23:01.067

我建议使用此自动完成代码。

[http://www.devbridge.com/projects/autocomplete/jquery](http://www.devbridge.com/projects/autocomplete/jquery)

它适用于 jQuery，但它是一个小代码，不需要运行这么多额外的 javascript 文件，并且在您键入时突出显示单词。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-03-12T03:41:33.967

它通常会起作用-

```
 protected void TextBox7_TextChanged(object sender, EventArgs e)
{
    con.Open();

    SqlCommand cmd = con.CreateCommand();
    cmd.CommandType = CommandType.Text;
    cmd.CommandText = "select * from TableTest where Name like('" + TextBox7.Text + "%')";
    cmd.ExecuteNonQuery();
    DataTable dt = new DataTable();
    SqlDataAdapter da = new SqlDataAdapter(cmd);
    da.Fill(dt);
 // GridView1.DataSource = dt;

    con.Close();
} 
```

# android - Listview 和 CustomAdapter 扩展 SimpleCursorAdapter

> ID：12955532
> 
> 赞同：5
> 
> 时间：2012-10-18T13:11:13.053
> 
> 标签：android, listview, background-color, extend, custom-adapter

我希望在我的 ListView 中操作选定行的背景颜色，从阅读中我需要使用 CustomAdapter 进行扩展。我的主适配器属于 SimpleCursorAdapter 类型，因此我修改了一个将 ArrayAdapter 扩展为 SimpleCursorAdapter 的 CustomAdapter。

我的问题是使用 CustomAdapter 时列表视图是空白的，但如果不扩展并使用 SimpleCursorAdapter 列表视图有行/项目。Logcat 在我的 CustomAdapter 中显示了一个问题，请参见下文。

这是我的主要活动代码：

```
phrasesdb helper = new phrasesdb(this);
database = helper.getWritableDatabase();
data = database.query("phrases", fields, null, null, null, null, fields[0] + " COLLATE NOCASE ASC");
//WORKING SimpleCursorAdapter
//dataSource = new SimpleCursorAdapter(this, R.layout.phrases, data, fields, new int[] { R.id.phrase });

//NOT WORKING
dataSource = new CustomAdapter(this, R.layout.phrases, data, fields, new int[] { R.id.phrase });

view = getListView();
setListAdapter(dataSource); 
```

这是自定义适配器类，我已经标记了 logcat 错误的位置：

```
import android.content.Context;
import android.database.Cursor;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class CustomAdapter extends SimpleCursorAdapter {

protected static final int NO_SELECTED_COLOR = 0xFF191919;
protected static final int SELECTED_COLOR = 0xFF3366CC;

Cursor items;
private LayoutInflater mInflater;
private int viewResourceId;
private int selectedPosition;

public CustomAdapter(Context context, int resourceId, Cursor data, String[] fields, int[] is) {
    super(context, resourceId, data, fields, is);
    mInflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    viewResourceId = resourceId;
    items = data;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    TextView tv = (TextView)convertView;
    if (tv == null) {
  //WHEN DEBUGGING THIS IS WHERE LOGCAT ERROR MESSAGES STARTS
        tv = (TextView)mInflater.inflate(viewResourceId, null);
    }
    tv.setText(items.getString(position));

    // Change the background color
    if (position==selectedPosition) tv.setBackgroundColor(SELECTED_COLOR);
    else tv.setBackgroundColor(NO_SELECTED_COLOR);

    return tv;
}

public void setSelected(int position) {
    selectedPosition = position;
}
} 
```

这是 LogCat：

> 10-18 13:33:17.869: E/ListView(28378): android.widget.LinearLayout 10-18 13:33:17.869: E/ListView(28378): java.lang.ClassCastException: android.widget.LinearLayout 10- 18 13:33:17.869: E/ListView(28378): 在 com.xxx.xxx.CustomAdapter.getView(CustomAdapter.java:49) 10-18 13:33:17.869: E/ListView(28378): 在 android. widget.AbsListView.obtainView(AbsListView.java:1449) 10-18 13:33:17.869: E/ListView(28378): at android.widget.ListView.makeAndAddView(ListView.java:1801) 10-18 13:33: 17.869: E/ListView(28378): 在 android.widget.ListView.fillSpecific(ListView.java:1339) 10-18 13:33:17.869: E/ListView(28378): 在 android.widget.ListView.layoutChildren(ListView .java:1637) 10-18 13:33:17.869: E/ListView(28378): 在 android.widget.AbsListView.onLayout(AbsListView.java:1279) 10-18 13:33:17.869: E/ListView(28378) ): 在 android.view.View。布局(View.java:7321) 10-18 13:33:17.869: E/ListView(28378): 在 android.widget.FrameLayout.onLayout(FrameLayout.java:338) 10-18 13:33:17.869: E/ ListView(28378): 在 android.view.View.layout(View.java:7321) 10-18 13:33:17.869: E/ListView(28378): 在 android.widget.FrameLayout.onLayout(FrameLayout.java:338 ) 10-18 13:33:17.869: E/ListView(28378): 在 android.view.View.layout(View.java:7321) 10-18 13:33:17.869: E/ListView(28378): 在 android .view.ViewRoot.performTraversals(ViewRoot.java:1217) 10-18 13:33:17.869: E/ListView(28378): 在 android.view.ViewRoot.handleMessage(ViewRoot.java:1991) 10-18 13:33 :17.869: E/ListView(28378): 在 android.os.Handler.dispatchMessage(Handler.java:99) 10-18 13:33:17.869: E/ListView(28378): 在 android.os.Looper.loop( Looper.java:150) 10-18 13:33:17.869: E/ListView(28378): 在 android.app。ActivityThread.main(ActivityThread.java:4385) 10-18 13:33:17.869: E/ListView(28378): at java.lang.reflect.Method.invokeNative(Native Method) 10-18 13:33:17.869: E /ListView(28378): at java.lang.reflect.Method.invoke(Method.java:507) 10-18 13:33:17.869: E/ListView(28378): at com.android.internal.os.ZygoteInit$ MethodAndArgsCaller.run(ZygoteInit.java:849) 10-18 13:33:17.869: E/ListView(28378): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 10-18 13: 33：17.869：E/ListView（28378）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 10-18 13:33:17.869: E/ListView(28378): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 10-18 13:33:17.869：E/ListView（28378）：在 dalvik.system.NativeStart.main（本机方法）ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849) 10-18 13:33:17.869: E/ListView(28378): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607) 10-18 13:33:17.869：E/ListView（28378）：在 dalvik.system.NativeStart.main（本机方法）

这是布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout android:id="@+id/rowLayout"
android:layout_width="fill_parent"
android:layout_height="wrap_content" xmlns:android="http://schemas.android.com/apk/res/android" android:orientation="horizontal">
<TextView
android:id="@+id/phrase" 
android:layout_width="wrap_content" 
android:layout_height="wrap_content" 
android:layout_marginLeft="2dp" 
android:layout_marginRight="2dp" 
android:focusable="false" 
android:focusableInTouchMode="false" 
android:text="@string/wordforphrases"
android:textAppearance="?android:attr/textAppearanceMedium"
android:visibility="visible"/>

</LinearLayout> 
```

Logcat 表示与 LinearLayout 有关，但我无法弄清楚我哪里出错了。

请问有人能指出我正确的方向吗？

谢谢马克

更新：根据 Sardor 的想法更改为匹配充气后（谢谢）：

```
tv = (TextView)mInflater.inflate(viewResourceId, parent); 
```

我现在收到此错误

```
10-18 15:23:22.083: E/ListView(28931): addView(View, LayoutParams) is not supported in AdapterView
10-18 15:23:22.083: E/ListView(28931): java.lang.UnsupportedOperationException: addView(View, LayoutParams) is not supported in AdapterView
10-18 15:23:22.083: E/ListView(28931):  at android.widget.AdapterView.addView(AdapterView.java:461)
10-18 15:23:22.083: E/ListView(28931):  at android.view.LayoutInflater.inflate(LayoutInflater.java:416)
10-18 15:23:22.083: E/ListView(28931):  at android.view.LayoutInflater.inflate(LayoutInflater.java:320)
10-18 15:23:22.083: E/ListView(28931):  at android.view.LayoutInflater.inflate(LayoutInflater.java:276)
10-18 15:23:22.083: E/ListView(28931):  at com.xxx.xxx.CustomAdapter.getView(CustomAdapter.java:36)
10-18 15:23:22.083: E/ListView(28931):  at android.widget.AbsListView.obtainView(AbsListView.java:1449)
10-18 15:23:22.083: E/ListView(28931):  at android.widget.ListView.makeAndAddView(ListView.java:1801)
10-18 15:23:22.083: E/ListView(28931):  at android.widget.ListView.fillSpecific(ListView.java:1339)
10-18 15:23:22.083: E/ListView(28931):  at android.widget.ListView.layoutChildren(ListView.java:1637)
10-18 15:23:22.083: E/ListView(28931):  at android.widget.AbsListView.onLayout(AbsListView.java:1279)
10-18 15:23:22.083: E/ListView(28931):  at android.view.View.layout(View.java:7321)
10-18 15:23:22.083: E/ListView(28931):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-18 15:23:22.083: E/ListView(28931):  at android.view.View.layout(View.java:7321)
10-18 15:23:22.083: E/ListView(28931):  at android.widget.FrameLayout.onLayout(FrameLayout.java:338)
10-18 15:23:22.083: E/ListView(28931):  at android.view.View.layout(View.java:7321)
10-18 15:23:22.083: E/ListView(28931):  at android.view.ViewRoot.performTraversals(ViewRoot.java:1217)
10-18 15:23:22.083: E/ListView(28931):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1991)
10-18 15:23:22.083: E/ListView(28931):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-18 15:23:22.083: E/ListView(28931):  at android.os.Looper.loop(Looper.java:150)
10-18 15:23:22.083: E/ListView(28931):  at android.app.ActivityThread.main(ActivityThread.java:4385)
10-18 15:23:22.083: E/ListView(28931):  at java.lang.reflect.Method.invokeNative(Native Method)
10-18 15:23:22.083: E/ListView(28931):  at java.lang.reflect.Method.invoke(Method.java:507)
10-18 15:23:22.083: E/ListView(28931):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:849)
10-18 15:23:22.083: E/ListView(28931):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:607)
10-18 15:23:22.083: E/ListView(28931):  at dalvik.system.NativeStart.main(Native Method)
10-18 15:23:22.093: D/View(28931): onTouchEvent: viewFlags: 0x18244001 
```

检查父级时，它看到的是 TextView。

请问还有其他想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-23T10:23:30.297

好吧，我终于让它工作了......

这里的问题是，如果您的自定义适配器数据来自游标，那么您必须在扩展的 SimpleCursorAdapter 类中使用 bindView 和 newView 而不是 getView。

我会为可能遇到此问题的其他人发布我的工作代码...

```
public class CustomAdapter extends SimpleCursorAdapter {

private int mSelectedPosition;
Cursor items;
private Context context;
private int layout;

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {

    Cursor c = getCursor();

    final LayoutInflater inflater = LayoutInflater.from(context);
    View v = inflater.inflate(layout, parent, false);

    int nameCol = c.getColumnIndex("phrase");
    String name = c.getString(nameCol);

    TextView name_text = (TextView) v.findViewById(R.id.phrase);
    if (name_text != null) {
        name_text.setText(name);
    }
    return v;
}

public CustomAdapter(Context context, int layout, Cursor c, String[] from, int[] to) {
    super(context, layout, c, from, to);
    this.context = context;
    this.layout = layout;
}

@Override
public void bindView(View v, Context context, Cursor c) {

    int nameCol = c.getColumnIndex("phrase");
    String name = c.getString(nameCol);

    TextView name_text = (TextView) v.findViewById(R.id.phrase);
    if (name_text != null) {
        name_text.setText(name);
    }

    //name_text.setTextColor(Color.GREEN);

    int position = c.getPosition(); 
    if (mSelectedPosition == position) {
       v.setBackgroundResource(R.drawable.listviewbackground);
       v.getBackground().setDither(true);
    } else {
       v.setBackgroundColor(Color.BLACK);
    }

}

public void setSelectedPosition(int position) {
    mSelectedPosition = position;
    notifyDataSetChanged();

} 
```

和

```
 Cursor data;
  static final String fields[] = { "phrase", BaseColumns._ID };

  dataSource = new CustomAdapter(this, R.layout.phrases, data, fields, new int[] { R.id.phrase });
  view = getListView();
  setListAdapter(dataSource); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:27:19.463

`tv = (TextView)mInflater.inflate(viewResourceId,` **父母**，`null);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-15T16:46:16.907

如果您尝试自定义布局中项目的显示，则可以[使用`SimpleCursorAdapter.setViewBinder`](https://stackoverflow.com/questions/3609126/changing-values-from-cursor-using-simplecursoradapter#answer-4774370)更简单的方法。

# c# - 从表单调用方法

> ID：12955533
> 
> 赞同：2
> 
> 时间：2012-10-18T13:11:13.127
> 
> 标签：c#, winforms

是否可以使用表单中的参数调用方法？我知道我可以使用一个动作。我想闭包会在动作中捕获变量以使其起作用。不过，我觉得方法会更干净。我的代码库中有很多这样的操作，我不喜欢它们隐藏在难以重构的方法内部。

```
 public static void Main()
    {
        Form form = new Form();
        Action action = () => form.SendToBack();//(Now Imagine this Action is 50 lines of code and there's 15 of them...Then it should make sense as to why I want to seperate this logic out into classes and methods.
        //Action action2 = AMethod(form);//doesnt work

        Task.Factory.StartNew(
            () =>
            {                    
                //form.Invoke(AMethod);//doesnt work see error below...also no params
                form.Show();                    
                form.Invoke(action);
                Application.Run();
            }
         );
        Console.Read();
    }

    public static void AMethod(Form form)
    {
        form.SendToBack();
    } 
```

**更新**
我根据评论尝试了重载，但`form.Invoke(AMethod,form);`出现错误：

> 参数 1：无法从“方法组”转换为“System.Delegate”

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T13:58:54.773

Control.Invoke() 的重载是：

```
 public Object Invoke(Delegate method)
  public Object Invoke(Delegate method, params Object[] parameters) 
```

第一个参数类型是麻烦制造者，`Delegate`是“无类型”委托类型。C# 编译器坚持您使用类型化委托，以便它可以验证您正在调用具有正确签名的方法。在您的情况下，这意味着您必须传递一个类型的委托对象`Action<Form>`。要求它仅从方法“组”推断委托类型是它不会做的。有点烦人，但类型安全在 C# 中是最重要的。

所以正确的语法是：

```
 form.Invoke(new Action<Form>(AMethod), form); 
```

没有任何奖品。很难传递捕获表单变量的 lambda 语法：

```
 form.Invoke(new Action(() => AMethod(form))); 
```

匿名方法也可以，但出于同样的原因你必须强制转换：

```
 form.Invoke((Action)delegate { AMethod(form); }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:57:24.323

根据我原始答案的评论，这是一个新的，我相信 OP 正在寻找。感谢您在转换为 C# 方面的帮助。

```
public static void Main()
{
    Form form = new Form();
    Action action = New Action<Form>(AMethod);

    Task.Factory.StartNew(
        () =>
        {                    
            form.Show();                    
            form.Invoke(action, form);
            Application.Run();
        }
     );
    Console.Read();
}

public static void AMethod(Form form)
{
    form.SendToBack();
} 
```

# javascript - 如何根据从页面清除 amplify.store

> ID：12955536
> 
> 赞同：1
> 
> 时间：2012-10-18T13:11:21.023
> 
> 标签：javascript, html, amplifyjs

我正在使用 amplify.store 存储在页面上单击的当前选项卡的变量，当我转到另一个页面（该页面的历史版本）时，它会停留在同一个单击的选项卡上，这是所需的行为。我遇到了一个问题，因为 amplify.store 跨会话保留。
我目前正在使用当前代码来存储 val。

```
amplify.store("CurrentTab","SomeVal"); 
```

单击菜单按钮时，我尝试清除放大存储，但是我不确定为什么它不起作用。以下是我的明确命令

```
 <script>
    $("#hreftothelink").click(function () {
        amplify.store("CurrentTabH",null);
        amplify.store("CurrentTab",null);
        someViewModel()
                .tabs('select','someVal');
    });
    </script> 
```

有没有人可以想到的另一种方法来清除 val 或根据当前选择的选项卡传递变量？

注意：使用 amplify.store 的定时销毁将不起作用，因为有人可以在选项卡上的时间是可变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:22:57.143

我将此添加到单击中，并且能够清除该值。

```
var CurrentTabH = amplify.store("CurrentTabH"); 
```

# javascript - 如何语法检查一个充满数学运算的字符串

> ID：12955545
> 
> 赞同：3
> 
> 时间：2012-10-18T13:11:39.410
> 
> 标签：javascript, syntax

> **可能重复：**
> [Javascript中算术表达式的安全评估](https://stackoverflow.com/questions/5066824/safe-evaluation-of-arithmetic-expressions-in-javascript)

我正在尝试构建一个在线计算器，作为我一直在开发的网站的一部分。

我有`+ - * / ( ) AVG MIN MAX sine cos etc`作为操作。有数字、运算符和功能按钮。我只是在按下任何按钮时附加一个字符串。

我必须在 UI 端构建一个基本的语法检查器。服务器将实际执行操作并将它们存储并显示。我不想花太多时间编写客户端代码，但我的想法是验证它在数学上是否有意义。

这是我的计划：

我将尝试`eval()`生成的字符串并捕获错误。如果错误是 synatxError，则表示该字符串在语法上是错误的。如果是其他类型的错误，我可以接受。

所以我在脚本的开头做了这个：

```
Error.prototype.dummy_attribute = "notSyntaxError"
SyntaxError.prototype.dummy_attribute = "SyntaxError" 
```

上述方法对我不起作用，因为如果有字符串链接`2()`，我会收到类型错误。现在我必须编写一个代码来检查空括号和括号前面没有运算符，或者括号后面没有运算符

或者是否有另一种方法可以用来检查字符串的语法，我必须看看它在数学上是否有意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:44:53.217

使用 eval 是可能的。我知道一些顽固的 eval 仇恨者会对此表示反对。唯一不好的方法是让人们在查询字符串中使用等式提供指向您页面的链接。这将使您面临 XSS 攻击。如果您仅在当前页面上使用它进行验证，那么该人只会搞砸自己的页面，对其他人没有风险。

基本思路：

```
function avg () {
    var len = arguments.length;
    if(len===0) {
        throw "no arguments suppulied for AVG";   
    }
    var arr = Array.prototype.slice.call(arguments, 0);   
    var total = 0;
    for (var i=0; i<len; i++) {
        total += arr[i];
    }
    return total/len;
}
function sine (num) {
    return Math.sin(num);
}

function max () {

    var len = arguments.length;
    if(len===0) {
        throw "no arguments suppulied for MAX";      
    }   
    var arr = Array.prototype.slice.call(arguments, 0);
    return Math.max.apply(null, arr);

}

function isValidEqn (eqn) {
    try{
        eval("var x = " + eqn.toLowerCase());
        return !isNaN(x);
    } catch(e) {
        //console.error(e);
        return false;
    }
}

var eqn1 = "AVG ( 2008 , 2000 )";
var eqn2 = "AVG ( 2008 , 2000 ) / 100 + sine(10)";
var eqn3 = "AVG ( 2008 , 2000 ) / 100 + sine(10) + MAX(10,20)";

console.log("sadjhsahd", isValidEqn("sadjhsahd") );
console.log(eqn1, isValidEqn(eqn1) );
console.log(eqn2, isValidEqn(eqn2) );
console.log(eqn3, isValidEqn(eqn3) ); 
```

# snmp - MIB 文件写入问题

> ID：12955546
> 
> 赞同：0
> 
> 时间：2012-10-18T13:11:41.660
> 
> 标签：snmp, net-snmp, mib

```
IONLINE-MIB DEFINITIONS ::= BEGIN

IMPORTS
    IpAddress,
    MODULE-IDENTITY,
    OBJECT-TYPE,
    NOTIFICATION-TYPE,
    snmpModules,
    OBJECT-IDENTITY,
    enterprises,
    Counter32,
    Integer32
        FROM SNMPv2-SMI
    DisplayString,
    TEXTUAL-CONVENTION,
    TruthValue,
    DateAndTime
        FROM SNMPv2-TC;

elite   MODULE-IDENTITY
      LAST-UPDATED  "201208220000Z"
      ORGANIZATION  "E Technologies"
      CONTACT-INFO
                        "
                        Postal: XXX
                        E-mail: i@o.c
                        "
      DESCRIPTION
                        "
                        This MIB module defines MIB objects which provide
                            mechanisms to remotely configure the parameters used
                            by 24Online Agent for the generation of SNMP messages.
                        "
    ::= { enterprises 21068 }

ionline OBJECT-IDENTITY
    STATUS          current
    DESCRIPTION ""
    ::= { elite 3 }

-- Enumerations used in 24online system

-- 24online
onSystem        OBJECT IDENTIFIER ::= { ionline 1 }

-- 24online.system
sysStatus       OBJECT IDENTIFIER ::= { onSystem 1 }

-- onSystem.sysInstall

poolStatus      OBJECT IDENTIFIER ::= { sysStatus 3 }

poolUsage  OBJECT-TYPE
    SYNTAX          Counter32
    MAX-ACCESS      read-only
    STATUS          current
    DESCRIPTION     "% pool usage"
    ::= { poolStatus 1 }
END 
```

以上是我的标量对象的示例 MIB 文件.. poolUsage 是单个 OID 的存储...我想将它添加为一个表，我可以分配诸如 poolUsage.1、poolUsage.2 等的值。我想要将此标量转换为“表格”格式...我应该做哪些更改？请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-14T14:45:47.397

请参阅[本教程](http://lakm.us/logit/2011/09/write-mib-file-tabular/)。我认为这正是您所需要的。

它的要点转载如下：

```
batteryTable OBJECT-TYPE
    SYNTAX     SEQUENCE OF BatteryEntry
    MAX-ACCESS not-accessible
    STATUS     current
    DESCRIPTION
        "The (conceptual) table of batteries contained by the
        module."
    ::= { monitor 1 }

batteryEntry OBJECT-TYPE
    SYNTAX     BatteryEntry
    MAX-ACCESS not-accessible
    STATUS     current
    DESCRIPTION
        "A (conceptual) entry for one battery contained by
        the module.  The batteryIndex in the index represents
        the entry in the batteryTable that corresponds to the
        batteryEntry.

        As an example of how objects in this table are named,
        an instance of the batteryVoltage object might be
        named batteryVoltage.3"
    INDEX { batteryIndex }
    ::= { batteryTable 1 }

batteryIndex OBJECT-TYPE
    SYNTAX      DeviceIndex
    MAX-ACCESS  read-only
    STATUS      current
    DESCRIPTION
            "A unique value, greater than zero, for each battery. 
            It is recommended that values are assigned contiguously
            starting from 1."
    ::= { batteryEntry 1 }

batteryVoltage    OBJECT-TYPE 
   SYNTAX Integer32 
   ACCESS read-only 
   STATUS current 
   DESCRIPTION 
      "Voltage A/D value" 
   ::= { batteryEntry 2 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:19:38.397

如果你需要写任何复杂的东西，我强烈建议你买一本关于 MIB 的书。这是一种“有趣”的语言，如果你在写东西时能正确使用它会更好......

但是，您至少应该阅读描述该语言的[RFC2578 （但是比教程更正式）。](https://www.rfc-editor.org/rfc/rfc2578)您还可以查看一个示例，例如[RFC2863：IF-MIB](https://www.rfc-editor.org/rfc/rfc2863)，其中包含一个简单的表 ( `ifTable`)，其结构可以复制。

# sql - TSQL 优化 - 没有 LIKE 的 WHERE 子句

> ID：12955547
> 
> 赞同：1
> 
> 时间：2012-10-18T13:11:42.427
> 
> 标签：sql, sql-server, tsql, optimization, where

这种情况下最优化的解决方案是什么：

我的查询的 WHERE 子句是这样的：

```
WHERE columnX LIKE @Account + '%' 
```

我使用 '%' 因为 @Account 可能是 ' ' 并且在这种情况下我想获取所有值。在所有其他情况下，我可以使用等于 (=)。

此解决方案未优化，因为我在 columnX 上有索引，因此我想使用 equals (=)。此外，由于性能原因，使用 OR 的解决方案是不可接受的。

你有其他推荐吗？我尝试在 WHERE 子句中使用 CASE，但没有找到优化的好解决方案。我们的兼容级别是 80，所以不能使用更新的语法。（不要问为什么:-)）

提前TnX！

内马尼亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:17:45.467

你可以试试这个

```
where columnX = isnull(nullif(@Account, ''), columnX) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:29:16.870

You are attempting to execute two semantically different queries; one to pull all rows, and one to pull a single row. These two queries will by definition have two different query plans. Your attempt to combine them into one query to avoid "code duplication" is misguided. "Code duplication" is *not* the enemy, complexity is. The answer is for you to create a stored proc for each scenario. This will not only allow each stored proc to represent a single query plan; you will also simplify your application by following the [single responsibility principle](http://programmer.97things.oreilly.com/wiki/index.php/The_Single_Responsibility_Principle).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:20:50.697

这是我们都面临的情况:)

如果您选择了“赞”，那么您实际上无能为力。你的情况并不是最糟糕的，如果你只在最后加上 %，那么索引很有可能被用于查找。真正的问题是，当您在开始时有 % 时，索引（如果使用）将在扫描中

另外，请记住，索引的使用也与您选择的列有关。如果您有一个带有 ID 和名称的表，并在名称上有一个索引，并从中选择 *，则可能不会使用该索引。

最后，您可以考虑全文搜索，但它的实现相当复杂

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T13:24:21.270

试试这个

```
DECLARE @var VARCHAR(10) = '' 
DECLARE @table TABLE ( ID VARCHAR(10) ) 

INSERT INTO @table 
SELECT '11' 
UNION 
SELECT '2' 

SELECT * 
FROM @table 
WHERE ( Len(@var) = 0 OR ID = @var ) 

SET @var = '11' 

SELECT * 
FROM @table 
WHERE ( Len(@var) = 0 OR ID = @var ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T13:25:58.603

在某些版本的 SQL Server 上，如果您使用`OPTION(RECOMPILE)`. 有关详细信息，请参阅[http://sommarskog.se/dyn-search-2008.html](http://sommarskog.se/dyn-search-2008.html)

# mongodb - 用于快速数据访问和报告的 mongodb 文档格式

> ID：12955550
> 
> 赞同：1
> 
> 时间：2012-10-18T13:11:59.973
> 
> 标签：mongodb, format, reporting, document

哪种存储大数据的方式对于快速搜索和报告使用情况更有效？

```
{ website: "google.com", 
  description: "google is a search engine", 
  vistits: [
    {date: 1334565455, referrer: "http://bing.com"}, 
    {date: 1334565455, referrer: "http://bing.com"},
    {date: 1334565455, referrer: "http://bing.com"},
    {date: 1134565455, referrer: "http://bing.com"},
    {date: 1334542455, referrer: "http://bing.com"},
    {date: 1334555455, referrer: "http://bing.com"},
    {date: 1334575455, referrer: "http://bing.com"},
    {date: 1324565455, referrer: "http://bing.com"},
    {date: 1334565455, referrer: "http://bing.com"},
]} 
```

还是使用传统方式将访问存储在单独的表中，并以站点 ID 作为参考？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:24:23.993

这取决于。如果您有来自某些站点的多次访问，那么这些文档将会增长得非常快。最终，它们将太大而无法加载。

另一方面，如果您的报告工具总是需要加载所有访问，则将它们拆分为多个文档会降低性能。

尝试平衡这两个目标。例如，如果数组`visits`变得太大，则创建另一个文档并将其文档 ID 保存为`continuedIn`. 这样，您可以限制每个文档的大小，但仍然可以将很多信息放在一起。

如果您的报告工具按天汇总，您也可以尝试按天对访问进行分组（即一个文档包含某一天的所有访问）。这样，文档可以增长，但不会永远增长——只会增长一天。

最后，您可以在 N 次访问后停止记录（例如 100'000）。知道您的访问量是 100001 还是 100015 有什么意义？

注意：根据您所在的位置，只有在您获得每位访问者的书面许可的情况下，长时间记录 IP 地址和推荐人信息才是合法的。即使在您所在的国家/地区是合法的，一些访问者对跟踪他们的网站也很敏感。当然，他们对此无能为力。除了停止访问您、配置他们的网络浏览器以停止与您的服务器交谈或在博客和论坛中发表负面评论。

# android - 在 Eclipse linux 中安装 Android SDK 管理器

> ID：12955551
> 
> 赞同：0
> 
> 时间：2012-10-18T13:12:01.067
> 
> 标签：android, eclipse

根据 Android 安装文档，我使用终端提示符 ./android sdk 从 android_sdk_linux 的工具文件夹中打开了我的 Android SDK 管理器。然后我安装了 Android 4.1.2 下列出的所有必要文件。但是，当我在 Eclipse 中打开 Android SDK 管理器时，我发现这些文件没有安装。我尝试在 Android 4.1.2 下再次从这些文件安装，eclipse 编辑器没有警告，并且下载正常。有什么方法可以告诉我的 Eclipse SDK 经理我已经安装了所有必要的文件。

我正在使用 Eclipse Juno 。

编辑：原来我已经下载了两次核心 sdk 文件。如果我可以在顶部编辑 android sdk 路径，问题可能会解决，是否可能，如果可以，如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:12:10.780

可以在 Eclipse Juno（或任何其他版本）上更改 SDK 的位置。只需转到 Window -> Preferences -> Android，您就可以在其中放置 SDK 的安装路径。

![在此处输入图像描述](../Images/11b9f3ca425aac5aeb59dcdb0bc869ba.png)

高温高压

# android - Android后台位置更新？

> ID：12955554
> 
> 赞同：1
> 
> 时间：2012-10-18T13:12:05.217
> 
> 标签：android, location

我已经知道如何使用以下方法获取用户的当前位置：

```
locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 10, 500, locationListener) 
```

但是，在 Android 的后台运行位置更新时通常需要哪些步骤？

我必须让整个应用程序在 GPS 开启的情况下在后台运行吗？

我基本上想定期将用户的纬度经度发送回我们的服务器，如果不是在计时器上，那么例如当移动超过 25m 时。

我也不想杀死电池，因为持续使用 GPS 是臭名昭著的。

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T14:08:15.977

我建议您创建一个扩展类[`Service`](http://developer.android.com/reference/android/app/Service.html)，该服务将在后台运行。[这是一个示例，它将 GPS 数据存储在 SQLite 数据库](http://code.google.com/p/gpslogger/source/browse/trunk/GPSLogger/src/com/prom2m/android/gpslogger/service/GPSLoggerService.java)中。这可能会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T14:29:38.487

您可以使用蜂窝网络在特定时间间隔内 ping 用户的地理数据吗？一旦您发现位置已经改变了某个变量，您就可以激活 GPS 并获取准确的坐标以发送回您的服务器。完成后请记住停止接收位置更新（出于明显的电池耗尽原因。）

```
locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

蜂窝网络精确到 50m，因此可以满足您对重复 ping 的需求——在准确性和电池寿命之间进行一些折衷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-28T11:37:20.893

我用来在后台将我的位置更新到我的本地主机服务器的这项服务

```
import java.util.ArrayList;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;

import com.google.android.gcm.GCMRegistrar;

import android.app.Service;
import android.content.Context;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

public class LocationService extends Service{

@Override
public void onCreate() {
// TODO Auto-generated method stub
super.onCreate();
final LocationManager mlocmag = (LocationManager)getSystemService(Context.LOCATION_SERVICE);
final LocationListener mlocList = new MyLocationList();
final Location loc = mlocmag.getLastKnownLocation(LocationManager.GPS_PROVIDER);
   // This method is used to get updated location. 
mlocmag.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, mlocList);
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

Criteria criteria = new Criteria();
criteria.setAccuracy(Criteria.ACCURACY_FINE);
String provider = lm.getBestProvider(criteria, true);
Location mostRecentLocation = lm.getLastKnownLocation(provider);
UpdateWithNewLocation(mostRecentLocation); 

}

@Override
public void onDestroy() {
// TODO Auto-generated method stub
super.onDestroy();
}

@SuppressWarnings("deprecation")
@Override
public void onStart(Intent intent, int startId) {
// TODO Auto-generated method stub
super.onStart(intent, startId);
}
 private void UpdateWithNewLocation(final Location loc) {
    // TODO Auto-generated method stub

    if(loc!= null)
    {
    final double lat =loc.getLatitude(); // Updated lat
    final double Long = loc.getLongitude(); // Updated long
    final String regId = GCMRegistrar.getRegistrationId(this);
    ArrayList<NameValuePair> postParameters = new ArrayList<NameValuePair>();
    String Latitude=String.valueOf(lat);
    String Longitude=String.valueOf(Long);
    // define the parameter
    postParameters.add(new BasicNameValuePair("lat",Latitude));
    postParameters.add(new BasicNameValuePair("lang", Longitude));
    postParameters.add(new BasicNameValuePair("regId", regId));
    String response = null;

    // call executeHttpPost method passing necessary parameters 
    try {
    response = CustomHttpClient.executeHttpPost(
   "http://192.168.0.144/location.php", // your ip address if using localhost server

 postParameters);
    String result=response.toString();
   // Toast.makeText(this, result ,Toast.LENGTH_LONG).show();

    }catch (Exception e) {
         Log.e("log_tag","Error in http connection!!" + e.toString());     
        }
    }

    else 
    {
         String latLongStr = "No lat and longitude found";
         Toast.makeText(this, "Your location is "+latLongStr ,Toast.LENGTH_LONG).show();
    }

}
 public class MyLocationList implements LocationListener
 {

 public void onLocationChanged(Location arg0) {
     // TODO Auto-generated method stub
     UpdateWithNewLocation(arg0);
 }

 public void onProviderDisabled(String provider) {
     // TODO Auto-generated method stub
     Toast.makeText(getApplicationContext(),"GPS Disable ", Toast.LENGTH_LONG).show();
 }

 public void onProviderEnabled(String provider) {
     // TODO Auto-generated method stub
     Toast.makeText(getApplicationContext(),"GPS enabled", Toast.LENGTH_LONG).show();
 }

 public void onStatusChanged(String provider, int status, Bundle extras) {
     // TODO Auto-generated method stub

 }

}
@Override
public IBinder onBind(Intent arg0) {
    // TODO Auto-generated method stub
    return null;
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:08:42.763

嗯，这很难做到，因为如果你不定期请求位置，你就无法确定手机是否移动了，它可以像汽车一样快，也可以像人一样慢，所以我想出了一种可能性：

我不确切知道加速度计在 android 上的工作原理以及它的精度是多少（确保它必须取决于设备），但可以使用这些传感器来间接评估近似行进距离。

**[编辑]**

请注意，使用加速度计会消耗一些功率，并且您需要它不断运行，因此使用具有较小“采样率”的 GPS 可以更有效，并且肯定具有更高的精度。

# entity-framework - 实体框架 - 表的继承

> ID：12955555
> 
> 赞同：2
> 
> 时间：2012-10-18T13:12:08.197
> 
> 标签：entity-framework, inheritance

如何在 Entity Framework 中管理以下两个表：

* * *

## 命令

*   订单编号
*   产品编号
*   日期

和

* * *

## 订单存档

*   订单编号
*   产品编号
*   日期

在此模式中，订单会定期从表 Order 转移到表 OrderArchive... 按类型表和按层次结构表似乎都不适合我的需要...我想为两种对象类型共享相同的方法。

请注意，我无法更改数据库架构。感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:25:21.037

好吧，如果你不能改变数据库模式，......你有一个巨大的限制！

如果你能改变它，我会做一个（抽象的）`OrderBase`类，用通用的属性和方法，并`Order`从`OrderArchive`它继承。

但如果你不能，我唯一看到的（有人可能有更好的主意）将是

创建一个接口 IOrder

```
public Interface IOrder {
   int OrderId {get;set;}
   int ProductId {get;set;}
   int Date {get;set;}
} 
```

制作`Order`和`OrderArchive`实施`IOrder`（不会改变数据库模式）

并使用常用方法创建一个辅助类。

```
public static class IOrderHelper {
   //a fake method
   public static IList<IOrder> GetOrderByDate(IEnumerable<IOrder> orderList, DateTime dt) {
       return orderList.Where(m => m.Date.Date == dt);
    }
} 
```

但当然，在这种情况下，继承会更简洁。

**编辑** 也许寻找每个具体类型的表：您可能能够从一个抽象类继承，该类不会映射到数据库中，并且您的数据库不会被更改。

使用 Code First，您必须这样做

```
modelBuilder.Entity<Order>()
    .Map(m =>
            {
                m.ToTable("Orders");
                m.MapInheritedProperties();
            });
modelBuilder.Entity<ArchiveOrder>()
    .Map(m =>
            {
                m.ToTable("ArchiveOrders");
                m.MapInheritedProperties();
            }); 
```

但我不知道你在使用什么（CodeFirst、ModelFirst、DatabaseFirst）？

# java - 如何将函数作为参数传递给android中的另一个函数？

> ID：12955558
> 
> 赞同：9
> 
> 时间：2012-10-18T13:12:23.293
> 
> 标签：java, android, methods, parameters

那么如何将一个函数作为参数传递给另一个函数，例如我想传递这个函数：

```
public void testFunkcija(){
    Sesija.forceNalog(reg.getText().toString(), num);
} 
```

在这：

```
 public static void dialogUpozorenjaTest(String poruka, Context context, int ikona, final Method func){
    AlertDialog.Builder alertDialogBuilder = new AlertDialog.Builder(
            context);
        alertDialogBuilder.setTitle("Stanje...");
        alertDialogBuilder
            .setMessage(poruka)
            .setIcon(ikona)
            .setCancelable(true)                        
            .setPositiveButton("OK",new DialogInterface.OnClickListener() {
                public void onClick(DialogInterface dialog,int id) {
                    //here
                }
              });

        AlertDialog alertDialog = alertDialogBuilder.create();
        alertDialog.show();
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-18T13:16:22.923

您可以使用 Runnable 来包装您的方法：

```
Runnable r = new Runnable() {
    public void run() {
        Sesija.forceNalog(reg.getText().toString(), num);
    }
} 
```

然后将其传递给您的方法并`r.run();`在您需要的地方调用：

```
public static void dialogUpozorenjaTest(..., final Runnable func){
    //.....
        .setPositiveButton("OK",new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog,int id) {
                func.run();
            }
          });
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T13:16:51.550

好吧，因为在 Java 中没有代表（哦 C#，我好想你），你可以这样做的方法是创建一个实现接口的类，可能是可运行的或一些自定义接口，然后你可以通过接口调用你的方法.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:15:39.960

函数本身不能直接传递。您可以使用`interface`实现作为回调机制来进行调用。

界面：

```
public interface MyInterface {

   public void testFunkcija();
} 
```

执行：

```
public class MyInterfaceImpl implements MyInterface 
   public void testFunkcija(){
       Sesija.forceNalog(reg.getText().toString(), num);
   }
} 
```

并根据需要传递给它一个`MyInterfaceImpl`实例：

```
public static void dialogUpozorenjaTest(MyInterface myInterface, ...)

   myInterface.testFunkcija();
   ... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T08:18:21.353

最简单的方法是使用`runnable` 让我们看看如何

```
//this function can take function as parameter 
private void doSomethingOrRegisterIfNotLoggedIn(Runnable r) {
    if (isUserLoggedIn())
        r.run();
    else
        new ViewDialog().showDialog(MainActivity.this, "You not Logged in, please log in or Register");
} 
```

现在让我们看看如何将任何函数传递给它（我不会使用 lambda 表达式）

```
Runnable r = new Runnable() {
                @Override
                public void run() {
                    startActivity(new Intent(MainActivity.this, AddNewPostActivity.class));
                }
            };
doSomethingOrRegisterIfNotLoggedIn(r); 
```

让我们传递另一个函数

```
Runnable r = new Runnable() {
                @Override
                public void run() {
                    if(!this.getClass().equals(MyProfileActivity.class)) {
                        MyProfileActivity.startUserProfileFromLocation( MainActivity.this);
                        overridePendingTransition(0, 0);
                     }
                }
            };
doSomethingOrRegisterIfNotLoggedIn(r); 
```

就是这样。快乐的大思想...

# sql - 不使用名称显式约束删除

> ID：12955560
> 
> 赞同：1
> 
> 时间：2012-10-18T13:12:27.373
> 
> 标签：sql, sql-server-2008, tsql

```
CREATE TABLE [dbo].[tmp_rg_xx_LBJ]
(
[ROWVERSION] [bigint] NULL,
[ROWDATE] [datetime] NULL,
[SAPNO] [int] NOT NULL DEFAULT 1)

IF  EXISTS (SELECT * FROM dbo.sysobjects WHERE id = OBJECT_ID(N'[DF__tmp_rg_xx__SAPNO__1B0907CE]') AND type = 'D')
BEGIN
ALTER TABLE [dbo].[LBJ] DROP CONSTRAINT [DF__tmp_rg_xx__SAPNO__1B0907CE]
END

GO 
```

我有一个脚本可以创建一个带有默认值的表，但我想删除约束。手动没有问题，因为我知道名称，除了我想在重新创建表后删除约束。所以我可以重新运行放置约束脚本。在不明确使用名称的情况下如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:19:53.270

你可以试试这个 - 这将在系统目录视图中查找必要的信息并创建一个“drop” T-SQL 命令，你可以复制并执行该命令以摆脱系统命名的默认约束：

```
SELECT
    DropCmd = 'ALTER TABLE ' + t.name + ' DROP CONSTRAINT ' + df.Name
FROM sys.default_constraints df
INNER JOIN sys.columns c ON df.parent_object_id = c.object_id AND df.parent_column_id = c.column_id
INNER JOIN sys.tables t ON c.object_id = t.object_id
WHERE 
    t.Name = 'YourTableNameHere'
    AND c.name = 'YourColumnNameHere' 
```

如果您需要将其放入您自己的脚本中 - 您可以将 分配`DropCmd`给一个变量，然后使用动态 SQL 执行该 SQL 语句：

```
DECLARE @DropStatement NVARCHAR(200)

SELECT
    @DropStatement = N'ALTER TABLE ' + t.name + N' DROP CONSTRAINT ' + df.Name
FROM sys.default_constraints df
INNER JOIN sys.columns c ON df.parent_object_id = c.object_id AND df.parent_column_id = c.column_id
INNER JOIN sys.tables t ON c.object_id = t.object_id
WHERE 
    t.Name = 'YourTableName'
    AND c.name = 'YourColumnName'

EXEC sp_executesql @DropStatement 
```

# html - Zurb Foundation - 删除中等屏幕的列

> ID：12955563
> 
> 赞同：5
> 
> 时间：2012-10-18T13:12:31.473
> 
> 标签：html, css, responsive-design, zurb-foundation

我在 Zurb Foundation 3 中有一个站点原型，到目前为止我有桌面版本，现在我正在调整它以负责平板电脑和手机。

我正在苦苦挣扎的是：我有一些列内容连续，我想删除一些用于中小分辨率的列。但我希望其他列延伸到页面宽度的其余部分。我该如何正确地做到这一点？

我在用

```
class="hide-for-medium-down" 
```

隐藏元素，但是如何包装内容以便在隐藏某些元素时拉伸？

我找到了两种方法，但它们都不起作用：1）我将其作为标准行列，例如：

```
<div class="row">
    <div class="three columns">...</div>
    <div class="three columns">...</div>
    <div class="three columns hide-for-medium-down">...</div>
    <div class="three columns">...</div>
</div> 
```

但在这种情况下，第三列将保持空白。

2）我可以使用这样的块网格来制作它：

```
<ul class="block-grid four-up">
    <li>1</li>
    <li>2</li>
    <li class="hide-for-medium-down">3</li>
    <li>4</li>
</ul> 
```

但是这次第 4 列只是向左移动到第 3 的位置，并且第四个空间将再次保持空白。

我得到的最接近的是使用 mobile-x-up 类来调整网格以减少移动设备的列 - 这样：

```
<ul class="block-grid four-up mobile-three-up">
    <li>1</li>
    <li>2</li>
    <li class="hide-for-medium-down">3</li>
    <li>4</li>
</ul> 
```

不幸的是，这仅适用于手机，但我也无法将其用于中等分辨率的平板电脑，因为没有等效的。

所以总的来说我的问题是：解决这个问题的最佳方法是什么？在保持网格的同时在较小的屏幕上隐藏元素的最佳方法是什么？是否可以在保持网格正常工作的同时从中等屏幕上的网格中删除元素？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-12T17:53:03.800

不确定您使用的是哪个版本，但在 Foundation 5 中，试试这个...

```
<div class="row">
    <div class="columns small-3">...</div>
    <div class="columns small-6 large-3">...</div>
    <div class="columns small-3 hide-for-medium-down">...</div>
    <div class="columns small-3">...</div>
</div> 
```

或这个...

```
<div class="row">
    <div class="columns small-3 large-4">...</div>
    <div class="columns small-6 large-4">...</div>
    <div class="columns small-3 hide-for-medium-down">...</div>
    <div class="columns small-3 large-4">...</div>
</div> 
```

等等，这取决于您希望剩余列如何填充空间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-28T17:45:14.173

我想出的最佳解决方案是在调整浏览器大小（或以特定大小加载）时使用 jQuery 对特定列进行一些更改。

如下所示（直接从我的项目文件中取出 - 因此您必须针对您的特定目的进行编辑）。

```
$(document).ready(function() {
    check_column_size();  
});

$(window).resize(function() {
    check_column_size();
});

function check_column_size() {
    if( $(window).width() >= 768 && $(window).width() <= 800 ) {
        $('section#main').removeClass( 'eight' ).addClass( 'eleven' );
        $('section#sidebar').removeClass( 'hide-for-small' ).addClass( 'hide' );
    } else {
        $('section#main').removeClass( 'eleven' ).addClass( 'eight' );
        $('section#sidebar').removeClass( 'hide' ).addClass( 'hide-for-small' );
    }
} 
```

需要添加/删除*hide-for-small*类的行，因为该类包含样式

```
display:inherit !important; 
```

它覆盖了任何隐藏/删除元素的尝试。因此，我需要删除该类，然后再将其重新添加，以便成功地将我的元素隐藏在“小”以上的分辨率下。

似乎适用于我的情况，但我只在一小部分进行。如果您试图同时为页面上的许多不同元素实现这一点，您可能会遇到问题。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-28T16:41:02.707

您可以使用重复的内容进行此操作：

```
<div class="row hide-for-medium-down">
    <div class="three columns">...</div>
    <div class="three columns">...</div>
    <div class="three columns">...</div>
    <div class="three columns">...</div>
</div>
<div class="row show-for-medium-down">
    <div class="four columns">...</div>
    <div class="four columns">...</div>
    <div class="four columns">...</div>
</div> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-04T03:07:57.500

我最好的建议，升级你的框架......使用基础 5，这段代码将实现你想要的：隐藏移动/平板电脑的列，并且列空间均匀。

```
<div class="row">
    <div class="small-4 large-3">...</div>
    <div class="small-4 large-3">...</div>
    <div class="large-3 show-for-large-up">...</div>
    <div class="small-4 large-3">...</div>
</div> 
```

第三列对于手机和平板设备会隐藏，只显示3列；在桌面上，将显示 25% 宽度的四列。

恕我直言，这是解决此要求的最佳方法

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-23T10:21:09.470

听起来您正在寻找 CSS 媒体查询。我建议您阅读下一页。

[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

也不要隐藏内容，为什么不调整它的大小，以便您的移动用户也可以查看它，除非您觉得这是一个糟糕的设计选择！

我希望这会有所帮助。

# javascript - 防止在线编辑模式下编辑特定可编辑行的单元格

> ID：12955568
> 
> 赞同：2
> 
> 时间：2012-10-18T13:12:45.640
> 
> 标签：javascript, jquery, jqgrid

在 jqGrid 中，我在 inline-edit 模式下工作。

当用户尝试编辑一行时（单击笔操作图标），我想阻止（`{editable: false}`）根据该行中另一个单元格的内容编辑特定可编辑行的单元格。

`grid.setColProp('myColumn',{editable:false});`对我不利，因为这将禁用所有网格行中“myColumn”的编辑，我只想将它应用于**当前编辑的行。**

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-18T14:00:55.073

该属性的值`editable`对所有行都是通用的，但该值仅由*初始化*内联编辑的`editRow`方法使用。因此，您可以相对于（如[答案](https://stackoverflow.com/a/7732536/315935)）动态更改属性的值。在*每次*调用. 在[答案](https://stackoverflow.com/a/4308172/315935)中，您可以看到相应的代码示例和演示。*`editable``setColProp``editable`*`editRow`**

 ***更新**：如果你使用`formatter: "actions"`那么你可以“子类化”被`$.fn.fmatter.rowactions`调用的`onclick`处理程序。下面您可以看到相应代码的示例

```
var orgRowActions = $.fn.fmatter.rowactions;
$.fn.fmatter.rowactions = function (rid, gid, act, pos) {
    var $grid = $("#" + $.jgrid.jqID(gid)),
        rowData = $grid.jqGrid("getLocalRow", rid),
        isNonEditable = false,
        result;
    // we can test any condition and change
    // editable property of any column
    if (act === "edit" && parseFloat(String(rowData.tax)) <= 20) {
        $grid.jqGrid("setColProp", "note", {editable: false});
        isNonEditable = true;
    }
    result = orgRowActions.call(this, rid, gid, act, pos);
    if (isNonEditable) {
        // reset the setting to original state
        $grid.jqGrid("setColProp", "note", {editable: true});
    }
    return result;
} 
```

[您可以在此处](http://www.ok-soft-gmbh.com/jqGrid/SubclassActions.htm)找到相应的演示。仅当“税”列中的值 <= 20 时，“注释”列才可在演示中编辑：

![在此处输入图像描述](../Images/a57495971860b283923d68a14806861c.png)

如果您有`datatype: "json"`或`datatype: "xml"`没有使用，`loadonce: true`您应该将调用替换为上述代码中`getLocalRow`的调用`getRowData`或。`getCell`*

# ruby-on-rails - 将 ruby 对象映射到 json 的正确（版本安全）方法是什么？

> ID：12955569
> 
> 赞同：0
> 
> 时间：2012-10-18T13:12:45.747
> 
> 标签：ruby-on-rails, ruby, json

我将一些 json 传递给这样的视图：

```
@items = Item.where(:custom => false).map do |item|
    "{'id': #{item.id}, 'label': '#{item.name}', 'category': '#{item.category}'},"
end
@items = "[#{@items}]" 
```

这在本地运行良好，使用 ruby​​ 1.8.7：

```
[{'id': 1, 'label': 'Ball', 'category', : 'Toy'},{'id': 2, 'label': 'Rat', 'category', : 'Live Rodent'}] 
```

然而，在部署到heroku（我相信是ruby 1.9.2）时，发生了可怕的事情：

```
[["{'id': 1, 'label': 'Ball', 'category', : 'Toy'},", "{'id': 2, 'label': 'Rat', 'category', : 'Live Rodent'},"]]; 
```

我假设 ruby​​ 版本的差异是问题所在，但我也怀疑我的方法是最优的。我该如何重写它以使其适用于两个版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:17:26.307

这将适用于 Ruby 1.8.7 和 1.9.2：

```
@items = Item.where(:custom => false).map do |item|
   {'id' => item.id, 'label' => item.name, 'category' => item.category}
end
@items = @items.to_json 
```

您的问题可能是由于 Ruby 1.9.2 添加了一种额外的方法来定义哈希，因此 {key: value} 与 {:key => value} 相同。

# c - 代码块中的编译选项

> ID：12955572
> 
> 赞同：1
> 
> 时间：2012-10-18T13:12:56.510
> 
> 标签：c, compiler-construction, codeblocks

我希望能够在代码块中输入选项。就像我想做的那样`gcc -P test.c`。我该怎么做呢？基本上，我希望代码块在`prompt box`每次编译时都给出一个，以便我可以在该框中输入选项。该功能在代码块中可用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T10:04:22.037

Code::Blocks 中没有您希望在更新答案中出现的行为。

但是，如果您花时间为此编写插件，您应该能够获得这种行为（应该不到一个小时，取决于您的 wxWidgets 技能，弹出对话框的 GUI 位可能是最难的事情）。

要么写一个脚本插件（据说这是最简单和最快的方法，虽然我从来没有这样做过，所以不能确定）——看看`share/codeblocks/scripts/sample_plugin.script`，看看你是否可以适应——或者用 C++ 写一个合适的插件.
编辑：[脚本插件上的一些稀疏文档](http://wiki.codeblocks.org/index.php?title=Script_plugins)。

例如查看`src/plugins/autosave/autosave.[h|cpp]`（这是最原始的插件之一）以了解这是如何完成的。像这样的东西应该工作：

*   从 派生一个类`cbPlugin`，将所有纯虚拟实现为`{}`（不需要它们）
*   将 a`namespace { PluginRegistrant<YourClassName> reg(_T("Readable Plugin Name")); }`放入源文件
*   `EVT_COMMAND(cbEVT_COMPILER_STARTED...)`在您的街区内注册`BEGIN_EVENT_TABLE/END_EVENT_TABLE`。
*   在您的事件处理程序中，弹出对话框，读出文本框，然后修改您想要的任何设置。修改编译器的设置，或者使用事件中包含的指向项目的指针，这使您可以使用自己的设置访问项目设置和目标
*   您可能也想撤消您的更改。做同样的事情`cbEVT_COMPILER_FINISHED`，恢复原始设置

或者，一个人可能只是在收到时调用`cbProject::ShowOptions()`（毕竟，该事件为您提供了一个指向 a 的指针`cbProject`，所以为什么不直接使用它）`cbEVT_COMPILER_STARTED`，这应该会调出内置选项对话框。

# javascript - 单击并使用 jquery 选择图像的垂直切片

> ID：12955578
> 
> 赞同：1
> 
> 时间：2012-10-18T13:13:14.530
> 
> 标签：javascript, jquery, html, jquery-ui-resizable

我想实现以下目标：当用户单击图像时，会在 mouse.x 坐标处创建一个选择“div”，并​​且用户可以水平调整该 div 的大小。在“mouseup”上，页面被重定向到另一个页面。到目前为止，这是我的代码：

```
<html>
<head>
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript"
    src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.js"></script>
<link rel="stylesheet" type="text/css"
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.9.0/themes/base/jquery-ui.css" />
<script type="text/javascript">
function myDrag(evt,e)
    {
    var id="sel"+e.id;
    var startX= evt.pageX;
    var mouseX = evt.pageX - e.offsetLeft;
    var mouseY = evt.pageY - e.offsetTop ; 
    var child=document.getElementById(id);
    if(child==null)
        {
        child=document.createElement("div");
        child.id=id;
        child.setAttribute("style","color:white;background-color:red;opacity:0.5;width:5px;height:300px; position:absolute;top:0px;left:"+mouseX+"px;font-size:9pt;");
        e.appendChild(child);
        var constraint=
        $("#"+id).resizable({
             maxHeight: 300,
             minHeight:300,
             minWidth: 1,
             maxWidth: 500,
            containment:"parent"
            });
        }

    }
</script>
</head>
<body>

<div style="margin-top:50px;margin-left:150px;">
<div id="x" onmousedown="javascript:myDrag(event,this)" style="position:relative;">
<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Old_Man_with_Water_Studies.jpg/500px-Old_Man_with_Water_Studies.jpg" width="500" height="300"/>
</div>
</div>

</body>
</html> 
```

**用户单击图像后**如何开始调整大小？我试过`$("#"+id).trigger("resize");`没有成功。

在这里使用[draggable.containment](http://api.jqueryui.com/draggable/#option-containment)的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T17:25:48.717

这种方法怎么样？需要改进，但有效：

```
<html>
<head>
  <style type="text/css">
    #container { width:800px; height:600px; border:1px dotted #555; }
    #selector { z-index:100; position:absolute; width:100px; height:200px; border:1px dashed #555; box-shadow: 3px 3px 5px #888888; }
  </style>

  <script src="http://code.jquery.com/jquery-latest.js"></script>

  <script>
    $(document).ready(function () {
        $(document).data('drag_mode', false);
        $(document).data('x', 0);
        $(document).data('y', 0);
        $(document).data('width', 0);
        $(document).data('height', 0);

        $('#container').on('mousedown', function(e) {
            $(document).data('drag_mode', true);
            $(document).data('x', e.pageX);
            $(document).data('y', e.pageY);
            $('#selector').css('left',e.pageX);
            $('#selector').css('top',e.pageY);
        });

        $('#container').on('mousemove', function(e) {
            if ($(document).data('drag_mode')) {
                $('#selector').css('width', (e.pageX - $(document).data('x')));
                $('#selector').css('height', (e.pageY - $(document).data('y')));
            }
        });

        $('#container').on('mouseup', function(e) {
            $(document).data('drag_mode', false);
        });

    });
  </script>

</head>
<body>

    <div id="container">
        <div id="selector">
        </div>
    </div>

</body>
</html> 
```

# .net - 如何使用mono.cecil获取方法的参数值？

> ID：12955580
> 
> 赞同：3
> 
> 时间：2012-10-18T13:13:20.083
> 
> 标签：.net, mono.cecil

是否可以使用 mono.cecil 获取方法参数的值。我正在做的方法调用的拦截让我知道是否可行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-14T11:06:57.350

不太清楚你的意思，但我会尽力回答。

`Cecil`在运行时无法帮助您，因此您无法评估参数的值或任何其他运行时值。

但是，`Cecil`您可以添加`dll\exe`可以拦截任何方法调用的代码，并且在拦截代码中，您可以获得方法参数运行时值以及您想要的。

# javascript - 使用 javascript 重定向安全 URL 而不会破坏后退按钮

> ID：12955587
> 
> 赞同：2
> 
> 时间：2012-10-18T13:13:43.457
> 
> 标签：javascript, redirect, https, popup, parent

我有一个从父 jsp 页面生成的弹出窗口。弹出窗口包含一个按钮，单击该按钮会关闭弹出窗口并以下列方式重定向父页面：

```
self.close();
opener.location = "<%= url %>"; 
```

我的问题仅在 IE8 上表现出来，并且我确定问题来自这样一个事实，即我的弹出窗口是`https:\\`(安全) 页面，而父页面是 (不安全) `http:\\`。

IE8 碰巧打开了在弹出窗口内重定向的页面，而不是关闭弹出窗口并重定向父级。

任何不包括制作父母`https:\\`的解决方案？

提前致谢！

# html - 如何实现 schema.org containsIn？

> ID：12955591
> 
> 赞同：5
> 
> 时间：2012-10-18T13:13:53.907
> 
> 标签：html, seo, markup, schema.org

我正在使用 Schema.org 微数据标记一个房产列表网站。我的网站的层次结构是这样排列的：

```
-City
--Region
---Postcode
----Area 
```

每一个都是带有相互链接的单独页面，都用`Place`itemtype 标记。我想使用该`containedIn`属性来描述这些不同页面之间的关系，但找不到任何关于如何最好地做到这一点的示例。

例如，在“区域”页面上，我有以下链接回“城市”，但不确定这是否足够或正确：

```
<meta itemprop="containedIn" content="New York"> 
```

当然，将搜索引擎指向纽约的实际城市页面 URL 比仅仅提供名称更有用吗？有人对此有任何提示或参考吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T17:19:23.187

这是您如何选择标记的一个示例。schema.org 标记非常灵活，因此不只有一种方法可以做到这一点。

```
<div itemscope itemtype="http://schema.org/Residence">
<span itemprop="name">Property Listing 1</span><br />
<a href="http://www.mypropertylisting.com/property1" itemprop="url">Property One</a><br />
    <span itemprop="telephone">555-555-5555</span><br />
    <div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress">
        <span itemprop="streetAddress">555 N. Anywhere Street</span><br />
        <span itemprop="addressLocality">Somewhere</span>,
        <span itemprop="addressRegion">LA</span> <span itemprop="postalCode">55555</span>
        <span itemprop="addressCountry">USA</span>
    </div>
<div itemprop="containedIn" itemscope itemtype="http://schema.org/Place">
<span itemprop="name">Metropolitan Area</span>
<a href="http://www.mypropertylisting.com/metropolitan1" itemprop="url">LA Metropolitan Area</a>
<div itemprop="geo" itemscope itemtype="http://schema.org/GeoCoordinates">
<meta itemprop="latitude" content="34.065174" />
<meta itemprop="longitude" content="-118.240585" />
</div>
</div>
</div> 
```

[您可以使用 Google 的结构化数据测试工具 -> http://www.google.com/webmasters/tools/richsnippets](http://www.google.com/webmasters/tools/richsnippets)验证这是否按预期工作

除了使用“geo”itemprop 之外，可能还有更好的方法来指定位置，但使用地理坐标可以确定您定位的是正确的位置。查看 schema.org 站点以查找您可以使用的其他属性，然后使用 google 结构化数据测试工具来测试您创建的标记。

祝你好运！

# c# - Telerik 未知错误，未知版本

> ID：12955595
> 
> 赞同：0
> 
> 时间：2012-10-18T13:14:08.023
> 
> 标签：c#, winforms, telerik, telerik-grid

我有一个 vs 应用程序，我不知道使用的版本是什么，但我使用的是 2010 年第 2 季度。请帮助我找到版本或获取此错误的解决方案。

1- 索引是只读的。

```
radGridViewContainerStock.Columns["Product_Name"].Index = 1; 
```

2 行信息没有 CellElement 属性和 VisualElement。

```
private void radGridViewContainerStock_ViewCellFormatting(object sender, CellFormattingEventArgs e)
 {
     e.CellElement.RowInfo.Cells["Discrepancy"].CellElement.ForeColor = radGridViewTripStock.Rows[e.CellElement.RowIndex].VisualElement.ForeColor;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T08:05:15.470

1- 索引是只读的。

> radGridViewContainerStock.Columns["Product_Name"].Index = 1;

回答：这是在旧版本 Q1 2010 和更早版本上，但从版本 Q2 到现在订购 Coulmn 使用移动功能

> radGridViewContainerStock.Columns.Move(radGridViewContainerStock.Columns["Product_Name"].Index , 1);

2-细胞元素

```
 e.CellElement.RowInfo.Cells["Discrepancy"].CellElement.ForeColor = radGridViewTripStock.Rows[e.CellElement.RowIndex].VisualElement.ForeColor; 
```

它移动到我们可以使用的样式探针：

> e.CellElement.RowInfo.Cells["Discrepancy"].Style.ForeColor = ...

谢谢你。

# php - 使用 htaccess 作为变量的 URL 目录

> ID：12955596
> 
> 赞同：1
> 
> 时间：2012-10-18T13:14:09.820
> 
> 标签：php, .htaccess, mod-rewrite

我实际的 .htaccess 是

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([_0-9a-zA-Z-]+)? index.php?cl=$1 [L] 
```

当我输入 sub.domain.com/client1 之类的东西时它工作得很好（然后我在我的 php 代码中正确获取了 $cl 变量）。问题是当我添加一个像 sub.domain.com/client1/ 这样的最后一个斜杠时，我会在我的 var 中得到“client1/”！

我该如何解决？我知道我的 htaccess 中的第二个条件会查找现有目录并跳过重写规则，但我的服务器上没有“client1”目录！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:18:43.983

“问题是当我添加一个像 sub.domain.com/client1/ 这样的最后一个斜杠时，我会在我的 var 中得到“client1/”！”

这是预期的行为。之后您需要通过 PHP 去除斜线：

```
$cl = trim( $_REQUEST['cl'], '/' ); 
```

或者您分解该值以获取所有文件夹（如果斜线后有另一个名称）

```
$cl = explode( '/', $_REQUEST['cl'] ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-22T09:14:28.870

我正在尝试做一些非常相似的事情，这对我有用：

```
RewriteEngine on
RewriteCond %{REQUEST_URI} !^$
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^([^\/]+)$ index.php?arg1=$1&arg2=default [L]
RewriteRule ^([^\/]+)\/$ index.php?arg1=$1&arg2=default [L]
RewriteRule ^([^\/]+)\/([^\/]+)$ index.php?arg1=$1&arg2=$2 [L]
RewriteRule ^([^\/]+)\/([^\/]+)\/$ index.php?arg1=$1&arg2=$2 [L] 
```

如果找到条件，重写规则将退出，因此这会逐步检查每个较长的 URL 路径。

不是只过滤“_0-9a-zA-Z-”字符，而是允许所有字符不是“/”，因为在每个参数之间我寻找文字“/”。

您可以根据需要将其扩展为尽可能多的参数。对于超出此规则接受的参数数量的 URL，应将用户带到由您的根 .htaccess 设置的错误 404 页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:18:10.453

只需要求匹配消耗整个 URL 路径：

```
# Note the trailing $ on the pattern
RewriteRule ^([_0-9a-zA-Z-]+)?$ index.php?cl=$1 [L] 
```

就目前而言，您的模式检查请求路径是否以（可选）一个或多个字母、数字和/或下划线和破折号字符开头 - 但它不会以其他方式限制自身。所以它会`a/b/c/d/e/f/g`毫无怨言地匹配。如果变量不应该*包含*除模式以外的任何内容，则添加`$`（在这种情况下表示“字符串结尾”）会限制您的匹配。

# node.js - Node.js - 部署 Node.js 应用程序时是否需要在生产服务器上重新安装所有模块

> ID：12955597
> 
> 赞同：3
> 
> 时间：2012-10-18T13:14:09.247
> 
> 标签：node.js, production

我已经开发了我的第一个 Node.js pp。现在，它只放在我的笔记本电脑上。

在开发过程中，我必须安装一些模块：

```
npm install socket.io
npm install mysql@2.0.0-alpha3
npm install iniparser
npm install js-yaml
npm install nodemailer 
```

我已经“按项目”安装了所有这些，而不是全局安装。

我的项目的目录是这样的（我的代码都在 push_server.js 中）：

```
|
|--- push_server.js
|
|--- node_modules
     |--- iniparser
     |--- js-yaml
     |--- mysql
     |--- socket.io
     |--- nodemailer 
```

现在我想把这个项目推送到生产服务器。

我的问题是：我可以上传整个代码库（包括已安装的模块）还是应该只上传我的应用程序的代码并在服务器上一一重新安装模块？

注意：我的开发机器运行的是 Ubuntu 10.04，生产服务器运行的是 CentOS 5.3

我认为所有这些模块都仅由js文件组成，因此应该没问题。
但是，npm 安装的模块是否有可能在本地机器上编译一些代码，因此该代码可能无法在另一台机器上运行。另外，我怎么知道一个模块是否这样做？

希望这个问题不是太傻 - 我刚刚开始使用 Node.js。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:23:21.397

如果可能的话，你绝对应该复制`node_modules`。

如果您在服务器上重新下载它们，您将面临使用的模块版本略有不同的风险。即使您需要严格的模块版本 X，该模块也可以再次对其他模块 Y Z 具有通配符依赖关系。这意味着如果 Y 更新并且您发布到服务器，它现在将使用与您使用的不同的 Y 代码运行用于您的本地测试和验证。

在某些情况下，您甚至可能在部署时没有可用的所需模块，因为作者已决定出于任何原因取消发布该软件包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T15:13:29.077

我总是尝试使用所需模块的最新版本。Node.js 还很年轻，每当更新模块时，它通常会带来错误修复、速度改进等。我在本地安装模块，在它们上测试我的代码，最后在生产中使用它们。当您安装它们时，`npm install module --save`它们会自动添加到您的`package.json`文件中作为`dependencies`.

`git`用于版本控制和部署，我通常将文件`node_modules`夹放入我的`.gitignore`文件中。因此它没有上传到我的服务器。在服务器上，您只需运行`npm install`安装所有需要的模块，这比一个一个安装要快得多。

[heroku](https://devcenter.heroku.com/articles/nodejs)也使用此工作流程。

# c# - 初始化继承的静态属性

> ID：12955603
> 
> 赞同：0
> 
> 时间：2012-10-18T13:14:25.813
> 
> 标签：c#, inheritance

我们有一个类`IoC<TContainer>`，其中`TContainer`一个类包装了我们在包含该类的模块中使用的任何 IoC 容器。它是这样实现的：

```
public class IoC<TContainer>
    where TContainer : IServiceLocator
{
    public static TContainer Container { get; set; }

    public static T Resolve<T>()
    {
        return Container.Resolve<T>();
    }
    public static object Resolve(Type type)
    {
        return Container.Resolve(type);
    }
    public static IEnumerable<T> ResolveAll<T>()
    {
        return Container.ResolveAll<T>();
    }
    public static IEnumerable ResolveAll(Type type)
    {
        return Container.ResolveAll(type);
    }
} 
```

目前，某处需要像这样初始化

```
IoC<StructureMapServiceLocator>.Container = ... 
```

为了简化使用，我尝试定义一个这样的类：

```
public class SMIoC : IoC<StructureMapServiceLocator>
{
    private SMIoC()
    {}

    static SMIoC()
    {
        Container = ... // Initialization
    }
} 
```

但是，这不起作用（[较早的问题](https://stackoverflow.com/questions/12953797)），并且有人认为这是一个糟糕的设计。如何自动化初始化（使用静态构造函数或其他方法）或其他技巧？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:36:17.170

通常我在应用程序或服务初始化期间在应用程序中执行此操作：

*   *ASP.NET*。Global.asax`Application_Start`事件或自定义 HTTP 模块。
*   *网络 API*。与 ASP.NET 相同。
*   Windows 窗体 / WPF / Silverlight ......`Main()`
*   ...

我不会依赖静态构造函数。如果您需要确保为任何请求或线程分配了容器，我更喜欢我上面解释的内容，因为每个平台都会提供方法覆盖、事件或在框架初始化期间执行的任何内容*（此时单个线程将工作实例化容器并将其设置为某个静态属性，而其他线程将被阻塞，直到初始化结束）*。

最后，没有通用的、与平台无关的**安全**方法将*控制*容器的反转设置为静态属性。为了确保事情做对了，请接受提示！:)

# java - 重绘（），重新验证（），无效（）。如何使用它们？

> ID：12955605
> 
> 赞同：1
> 
> 时间：2012-10-18T13:14:29.070
> 
> 标签：java, swing, jtable, panel, repaint

我的表格显示有问题。我的表最初有行。但是下次如果我做一些操作，我的表格列表就会变成空的。所以当我将该模型添加到表中时，表是空的。它是`empty`，但显示器在表格区域显示白色。

最初，该表如下图所示。

![第一个表](../Images/508ffe6264a29ebdbe3da60504c8708e.png)

然后我需要调用一些操作，如果该操作返回一个空列表，那么我将使用该列表创建一个新的 Jtable 并将其放置在面板上。但它看起来像下面这样。

![空表](../Images/f1f4b4da7d75df868f9233555adaa6f2.png)

以下是我要遵循的方法，

```
pnlRight.removeAll();
//pnlRight.invalidate();
// pnlRight.revalidate();
// pnlRight.repaint();
pnlRight.add(new JScrollPane(table), BorderLayout.CENTER);
pnlRight.invalidate();
pnlRight.validate();
pnlRight.repaint(); 
```

我已阅读此[@kdgregory](https://stackoverflow.com/questions/1097366/java-swing-revalidate-vs-repaint)上的一篇文章，删除后我应该调用上述方法。这奇怪的事情正在发生。如果我只调用 repaint() ，那么即使面板中缺少列名（理想情况下，这种情况不应该发生。）请解释这是什么问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:20:40.033

*   不是，我认为没有（逻辑）理由，删除一个`JTable`（with `JScrollPane`）并放另一个`JTable`

*   创建`JTable`并将所有数据存储到`XxxTableModel`,

*   重置`XxxTableModel`然后以不同的结构加载另一个数据

*   用于`CardLayout`在视图之间切换

编辑

*   以下代码

> pnlRight.revalidate();
> 
> pnlRight.repaint();

没有引起任何问题，问题不在此代码中....

# php - 查询 MySQL 表，存储在 PHP 数组中，然后从数组中返回单个值

> ID：12955606
> 
> 赞同：0
> 
> 时间：2012-10-18T13:14:29.103
> 
> 标签：php, mysql, sql, arrays

我有一张桌子“rel”

```
---------------------
|id|refid|cellid|cat|
|1 |1    |1     |1  |
|2 |2    |1     |3  |
|3 |3    |1     |5  |
|4 |3    |5     |2  |
|5 |4    |2     |7  | 
```

我想计算每个单元格具有相同单元格的行数。然后在 HTML 页面中检索这些计数。

我编写了代码来运行 SQL 查询并将结果存储在一个数组中

```
<?php
// Connect to the database server
$dbcnx = mysql_connect("localhost",USER,PASSWORD);
if (!$dbcnx) {
  echo( "<P>Database Connection Failed</P>" );
  exit();
}
// Select the matrix databse database
  if ( !@mysql_select_db("DATABASE") ) {
    echo( "<P>Not connected to Database</P>" );
    exit();
  }

  $cell_array = array();
  if ($result = mysql_query("SELECT cellid, COUNT(*) FROM rel GROUP BY cellid")) {
    if (mysql_num_rows($result)) {
      while ($row = mysql_fetch_assoc($result)) {
        $array[] = $row;
      }
    }
  }
?> 
```

然后我想使用 require 从另一个页面访问这个 php 脚本，然后恢复任何 cellid 的计数结果，以便我可以将结果放入 HTML 表中。

这是解决这个问题的正确方法吗？如果是，从这个数组中调用值的语法是什么，我见过

```
echo $cell_array['cellid']; 
```

用于其他答案，但它似乎对我不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:16:14.840

该列`COUNT(*)`需要有一个，`ALIAS`以便您可以从它获取值

```
SELECT cellid, COUNT(*) totalCount
FROM rel 
GROUP BY cellid 
```

所以在PHP中你可以访问

```
while ($row = mysql_fetch_assoc($result)) 
{
    echo $row["cellid"];
    echo $row["totalCount"];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:22:40.970

您正在将行添加到一个名为“$array”而不是“$cell_array”的新数组中，因此 $cell_array 为空。

给 count(*) 一个 John 提到的别名，然后

改变

```
$array[] = $row; 
```

到

```
$cell_array[$row["cellid"]] = $row['totalcount']; 
```

提取价值使用：

```
echo $cell_array[x]; 
```

其中 x 是您想要计数的单元格。

我还假设您想为“数据库”使用常量，因此请更改

```
if ( !@mysql_select_db("DATABASE") ) { 
```

到

```
if ( !@mysql_select_db(DATABASE) ) { 
```

# objective-c - UITableViewCellAccessibilityElement 发布在选项卡切换时崩溃

> ID：12955607
> 
> 赞同：0
> 
> 时间：2012-10-18T13:14:33.657
> 
> 标签：objective-c, ios, debugging, uitableview

我正在为 iOS（5 以上）开发一个选项卡式应用程序。在 3 个选项卡中的 2 个选项卡之间进行了几次切换后，我的应用程序在模拟器中遇到了崩溃，这两个选项卡都包含表（以及其他一些 - 这里可能不相关的东西）。以下是单元格创建的重要部分和错误代码。

崩溃发生在（每次不同的）更改次数之后，并且总是在访问选项卡 2 时发生。

***注意*** 我正在使用 ARC。

*** 更新***该问题仅出现在 iOS 6 上。以前的版本不受影响。它可能依赖于一些被调用的线程代码，如下所示：

```
if (!self.progressBackground) {
        self.progressBackground = [[UIView alloc]initWithFrame:CGRectMake(100, 260, 120, 120)];
        [self.progressBackground setBackgroundColor:[UIColor blackColor]];
        [[self.progressBackground layer]setCornerRadius:15];
        UILabel *progressText = [[UILabel alloc]initWithFrame:CGRectMake(0, 80, 120, 30)];
        UIFont *fontName = [UIFont fontWithName:@"Helvetica" size:14.0];
        [progressText setFont:fontName];
        [progressText setText:@"Updating Tags"];
        [progressText setTextColor:[UIColor whiteColor]];
        [progressText setTextAlignment:UITextAlignmentCenter];
        [progressText setBackgroundColor:[UIColor clearColor]];
        [self.progressBackground addSubview:progressText];
        [self.progressBackground setAlpha:.6];                   
    }
    if (!self.progressView) {
        self.progressView = [[UIActivityIndicatorView alloc]initWithFrame:self.progressBackground.frame];
        [self.progressView setActivityIndicatorViewStyle:UIActivityIndicatorViewStyleWhiteLarge];
    }
    [self.view addSubview:self.progressBackground];
    [self.view addSubview:self.progressView];
    [self.progressView  startAnimating];

    [NSThread detachNewThreadSelector:@selector(initializeCategoriesArray) toTarget:self withObject:nil]; 
```

'initializeCategoriesArray' 方法看起来像这样：

```
-(void)initializeCategoriesArray{

if (!self.categoryArchive) {
    self.categoryArchive = [[NSMutableArray alloc]init];
} 

//set the right month' expenses
self.currentMonthExpenses = (NSMutableArray*)[self.dataHandler fetchAllExpensesForMonth:[NSNumber numberWithInteger:self.currentMonthNumber ]];

// check if expenses exist at all

if (self.currentMonthExpenses.count == 0) {
    [self.categoryArchive removeAllObjects];
    [self.categoriesTable reloadData];
    [self.progressView performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:YES];
    [self.progressView performSelectorOnMainThread:@selector(removeFromSuperview) withObject:nil waitUntilDone:YES];
    [self.progressBackground performSelectorOnMainThread:@selector(removeFromSuperview) withObject:nil waitUntilDone:YES];
    return;
}

// sort out month Expenses
NSMutableArray *dayTypeExpenses = [[NSMutableArray alloc]init];
for (Expense *exp in self.currentMonthExpenses) {
    if (exp.expenseType.boolValue == NO) {
        [dayTypeExpenses addObject:exp];
    }
}

// check if dayExpenses exist
if (dayTypeExpenses.count == 0) {
    [self.categoryArchive removeAllObjects];
    [self.categoriesTable reloadData];
    [self.progressView performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:YES];
    [self.progressView performSelectorOnMainThread:@selector(removeFromSuperview) withObject:nil waitUntilDone:YES];
    [self.progressBackground performSelectorOnMainThread:@selector(removeFromSuperview) withObject:nil waitUntilDone:YES];
    return;
}

// create Dictionary holding all DayExpenses under their STRING AS KEY
NSMutableDictionary *tempDict = [[NSMutableDictionary alloc]init];
for (Expense *exp in dayTypeExpenses) {

    NSMutableArray *temp = [tempDict objectForKey:exp.name];
    if (temp == nil) {
        NSMutableArray *tempArray = [[NSMutableArray alloc]init];
        [tempDict setValue:tempArray forKey:exp.name];
    }
    [[tempDict objectForKey:exp.name]addObject:exp];
}

// create temporary (unsorted) array of Categories
NSMutableArray *tempCatArray = [[NSMutableArray alloc]init];
for (NSMutableArray *expArray in [tempDict allValues]) {
    double totValue = 0;
    NSInteger count = 0;
    double average = 0;
    CGFloat percentage = 0;
    for (Expense* exp in expArray) {
        count++;
        totValue = totValue+exp.value.doubleValue;
    }
    average = totValue/count;
    percentage = totValue/self.spentCurrentMonth;
    Category *newCategory = [[Category alloc]init];
    [newCategory setTotalValue:totValue];
    [newCategory setName:[[expArray objectAtIndex:0]name]];
    [newCategory setNumberOfExpenses:count];
    [newCategory setAverageValue:average];
    [newCategory setPercentOfBudgetInFloat:fabs(percentage)];

    [tempCatArray addObject:newCategory];
}

// sort tempArray
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc]initWithKey:@"totalValue" ascending:YES];
NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptor, nil];
self.categoryArchive = [[tempCatArray sortedArrayUsingDescriptors:sortDescriptors]mutableCopy];

// find normfactor

CGFloat normFactor = fabs(1.0/[[self.categoryArchive objectAtIndex:0] percentOfBudgetInFloat]);

for (Category *cat in self.categoryArchive) {
    if (cat.name.length == 0) {
        cat.name = @"Uncategorized";
    }
    if (cat.percentOfBudgetInFloat >= 1) {
        cat.percentOfBudgetInFloat = 1;
    }
    cat.percentOfBudgetInFloat = cat.percentOfBudgetInFloat*normFactor;
}

// reload
[self.categoriesTable reloadData];

[self.progressView performSelectorOnMainThread:@selector(stopAnimating) withObject:nil waitUntilDone:YES];
[self.progressView performSelectorOnMainThread:@selector(removeFromSuperview) withObject:nil waitUntilDone:YES];
[self.progressBackground performSelectorOnMainThread:@selector(removeFromSuperview) withObject:nil waitUntilDone:YES];

} 
```

***表 1：***

```
TableView, each cell contains 2 labels 1 button

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"dayCell";    
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    UIFont *subjectFont = [UIFont fontWithName:@"Helvetica" size:14.0];
    UIFont *valueFont = [UIFont fontWithName:@"Helvetica-Bold" size:14.0];

    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    [cell.textLabel removeFromSuperview];

    // Cell Look
    UIImageView *backgroundImg = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"cell" ]];
    [cell setBackgroundView:backgroundImg];

    // Subjectlabel
    UILabel *subjectLabel = [[UILabel alloc]initWithFrame:CGRectMake(30, 15, 160, 20)];
    //...

    // ValueLabel
    UILabel *valueLabel = [[UILabel alloc]initWithFrame:CGRectMake(160, 15, 90, 20)];
    //...

    // Deletion Button
    UIButton *delButton = [[UIButton alloc]initWithFrame:CGRectMake(255, 0, 50, 50)];
    [delButton setBackgroundColor:[UIColor clearColor]];
    [delButton setImage:[UIImage imageNamed:@"delButt" ] forState:UIControlStateNormal ];
    delButton.tag = 1002;
    [cell addSubview:delButton];
}
//...

UIButton *delButton = (UIButton*)[cell viewWithTag:1002];
[delButton addTarget:self action:@selector(deleteRow:) forControlEvents:UIControlEventTouchUpInside];

//...
return cell;
} 
```

***选项卡 2：***

```
TableView, each cell contains 2 labels, 1 rectangular UIView

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
static NSString *CellIdentifier = @"thisMonthCell";

UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

if (cell == nil) {
    UIFont *subjectFont = [UIFont fontWithName:@"Helvetica" size:14.0];
    UIFont *valueFont = [UIFont fontWithName:@"Helvetica-Bold" size:16.0];

    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier];
    [cell.textLabel removeFromSuperview];

    // BarGraph for this Cell
    UIView *barProgress = [[UIView alloc]initWithFrame:CGRectMake(20, 1, 1, 37)];
    [barProgress setBackgroundColor:[self goldBarColor]];
    [barProgress setAlpha:.5];
    barProgress.tag = 1000;
    [cell addSubview:barProgress];

}

Category *cellCategory = [self.categoryArchive objectAtIndex:indexPath.row];

UIView *progressBar = (UIView *)[cell viewWithTag:1000];
[progressBar setFrame:CGRectMake(progressBar.frame.origin.x, progressBar.frame.origin.y, cellCategory.percentOfBudgetInFloat*280, progressBar.frame.size.height)];

//...

return cell;

} 
```

* * *

崩溃时的错误代码如下所示：

> 2012-10-18 14:57:13.218 DailyBudget[4714:c07] *** -[UITableViewCellAccessibilityElement release]：消息发送到已释放实例 0x7571630 dlopen(/Applications/Xcode.app/Contents/PlugIns/DebuggerFoundation.ideplugin/Contents/Resources/ DebuggerIntrospectionSupport.dylib，0x00000002）dyld：加载：/Applications/Xcode.app/Contents/PlugIns/DebuggerFoundation.ideplugin/Contents/Resources/DebuggerIntrospectionSupport.dylib

* * *

问题***只***出现在模拟器上，真机上不出现（均为iOS 6.0）

任何想法可能是什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T15:53:22.690

**编辑：**

实际问题是从主线程更新 UI。阅读评论了解详情。

--- 原始答案 ---

我建议您使用自定义单元格，而不是尝试以编程方式更改内置的 Apple tableviewcell。文档有一些很好的例子来说明如何做到这一点。如果你有一个故事板，那真的很容易。

我的猜测可能是您弄乱的 tableview 单元格的对象（文本标签-辅助视图连接）中的预期保留计数正在发生，并且 arc 没有捕捉到您的 removeFromSuperview 魔术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:30:48.070

UIKit 可能会尝试发布一些它内部预计不需要发布的东西。尝试在这两个实现中注释掉`[cell.textLabel removeFromSuperview];`并替换它，`cell.textLabel.hidden = YES`这很可能会阻止这次崩溃。

# mysql - 方法 openMask 未找到 P4A

> ID：12955613
> 
> 赞同：2
> 
> 时间：2012-10-18T13:15:04.403
> 
> 标签：mysql, zend-framework

我正在尝试将我的 p4a 应用程序的用户重定向到我的应用程序的仪表板视图，但在成功登录后，重定向到“main_dashboard_mask”出现错误“找不到方法 openmask login_mask.php 第 35 行”

```
class login_mask extends P4A_Base_Mask
{
public function __construct()
{
    parent::__construct();

    $this->setTitle("Login to Dashboard");

    $this->build("p4a_field", "username");

    $this->build("p4a_field", "password");
    $this->build("p4a_button", "login")
    ->implement("onclick", $this, "login");

    $this->frame
    ->anchor($this->username)
    ->anchor($this->password)
    ->anchor($this->login);
}

public function login()
{
    $username = $this->username->getNewValue();
    $password = $this->password->getNewValue();

    $sql = "SELECT * FROM users
    WHERE
            username = ?";      

    $row = p4a_db::singleton()->fetchRow($sql, array($username));

    if (($row['username'] == $username) && ($row['password'] == $password )){
        $this->openMask("main_dashboard_mask");}
    else {
          $this->setTitle("Login Failed");}
    }
} 
```

我不确定它是索引文件还是我在这里错过的东西，好的，现在我又经历了一次，无论我将功能放在页面上的哪个位置，我似乎都找不到问题，无论错误在哪里继续发生，这让我认为问题来自较早的页面之一，它们是：

```
<?php

define ("P4A_DSN", "mysql://root:@localhost/login" );

require_once dirname(__FILE__) . '/../../p4a.php';

$login = p4a::singleton('login_begin');

$login->main(); 
```

...

```
<?php 
class login_begin extends P4A
{
public function __construct()
{
    parent:: __construct();
    $this->openMask("login_mask");
}
} 
```

任何帮助都会非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T15:45:36.890

对，我解决了问题是什么，当使用类 login_mask 扩展 P4A_Base_Mask 时，我排除了排序所需的函数（主要是 openmask 函数），我只是使用扩展 P4A 的前导符（允许使用 openMask）这行代码是

```
p4a::singleton()->openmask() 
```

所以公共函数 login() 的变化是

```
public function login()
{

    $username = $this->username->getNewValue();
    $password = $this->password->getNewValue();

    $sql = "SELECT * FROM users
    WHERE
            username = ?
            ";      

    $row = p4a_db::singleton()->fetchRow($sql, array($username));

    if (($row['username'] == $username) && ($row['password'] == $password ))
    {   
        p4a::singleton()->openmask("main_dashboard_mask");
    }

    else {
    $this->setTitle("Login Failed");}
} 
```

如果这不清楚并且有人想更清楚地解释它，那将是最受欢迎的，我不完全确定我应该使用哪些技术术语:)

# objective-c - -[__NSArrayM objectAtIndex:]: 索引 1 超出范围 [0 .. 0]'

> ID：12955614
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:15:08.023
> 
> 标签：objective-c, ios, nsarray

我有两个 xml 文件，我正确地解析了它们，一切都在我的日志中，我想将我的按钮标签连接到我的 xml 数组，但我有这个错误

```
 *** Terminating app due to uncaught exception 'NSRangeException', reason: '*** - 
  [__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]'

 *** First throw call stack:

 (0x1c9b012 0x10d8e7e 0x1c3d0b4 0x30b0 0x101817 0x101882 0x50a25 0x50dbf 0x50f55 0x59f67
  0x1dfcc 0x1efab 0x30315 0x3124b 0x22cf8 0x1bf6df9 0x1c1ef3f 0x1c1e96f 0x1c41734  
 0x1c40f44 0x1c40e1b 0x1e7da 0x2065c 0x26dd 0x2605)

  libc++abi.dylib: terminate called throwing an exception 
```

这是代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    pLabel.textColor = [UIColor blackColor];
    Presentation *p1 = [appDelegate.presentationArray objectAtIndex:0];
    NSLog(@"p1 %@", p1);
    pLabel.text = p1.pLabel;

    p2Label.textColor = [UIColor blackColor];

    //I have error in this line objectAtIndex:1

    Presentation *p2 = [appDelegate.presentationArray objectAtIndex:1];
    NSLog(@"p2 %@", p2);
    p2Label.text = p2.pLabel;

    [yBtn setTag:0];
    [dBtn setTag:1];

} 
```

这是 appDelega 中的部分解析：http: [//pastebin.com/SygRZAGj](http://pastebin.com/SygRZAGj)

这是 XMLParser 类： http: [//pastebin.com/yuFNnFB7](http://pastebin.com/yuFNnFB7)

你能帮我实现这个吗，我怎样才能将所有文件放在同一个数组中，我的问题是因为空数组但是我应该如何以及我应该如何解决这个问题

提前致谢！

**编辑：**

我只想初始化一次，然后在同一个数组中一个接一个地添加每个演示对象，我该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:22:26.913

这个...

```
app.presentationArray = [[NSMutableArray alloc] init]; 
```

...为您找到的每个元素创建一个新数组。在开始解析之前创建一次数组，然后在找到表示元素时添加它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:20:55.700

每次循环重复搜索元素时，它都会将对象归零，因此最后只有一个对象。

# jquery - Jquery Datetimepicker - 添加清除按钮

> ID：12955616
> 
> 赞同：-3
> 
> 时间：2012-10-18T13:15:14.597
> 
> 标签：jquery, datetimepicker

如何向 datetimepicker 插件添加清除按钮。我正在考虑用清除按钮替换完成按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T07:37:01.607

在 HTML 中创建具有唯一 ID 的按钮。在jQuery中写这个......

```
$("#yourbuttonid").click(function(){
   $("#thedattimepicker").val("");
}); 
```

单击时，它将清除您在函数中指定的任何元素的值。您只需复制函数中的第二行代码以获得更多选择器，即可清除更多元素。

# php - 突然间，这已添加到我的 joomla 1.5 网站：xxxxxx.org/Lexmark?8

> ID：12955620
> 
> 赞同：1
> 
> 时间：2012-10-18T13:15:21.207
> 
> 标签：php, joomla, malware

两天前，这开始出现在我们的 joomla 1.5 网站的标题中：

```
<iframe src="http://xxxxxx.org/Lexmark?8" align="middle" frameborder="no" height="5" scrolling="auto" width="5">/iframe> 
```

我找不到任何关于它的参考，也不知道它是如何到达那里的。我无法删除它。我尝试了所有方法，包括更新所有插件、删除插件和组件等。

有没有其他人遇到过这个，如果是这样，我该如何摆脱这个？

更新：似乎网站上的每个 .js 文件现在都在其末尾添加了上述行。有什么方法可以在不下载每个文件并手动编辑每个文件的情况下删除它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-21T19:14:15.073

Congratulations, you got hacked. This is usually due to using an older version of Joomla or the extensions installed, and even a kid could easily hack sites that don't update. Reinstall Joomla (the latest version of 2.5) and set up your site again. Don't try to fix the files, since you likely have backdoors.

Read this and follow every word: [http://docs.joomla.org/Security](http://docs.joomla.org/Security)

# c++ - 如何将字符数组文本存储在字符串中？

> ID：12955624
> 
> 赞同：0
> 
> 时间：2012-10-18T13:15:23.577
> 
> 标签：c++, arrays, string, char

ref:c++ 示例代码在底部来自[http://msdn.microsoft.com/en-us/library/windows/desktop/ms740120(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms740120(v=vs.85).aspx) 我有一个 char 数组

```
char RecvBuf[1024]; 
```

它在接收到 UDP 消息时被填满。如何将它存储在 std::string 变量中，`string str;`以便我可以从我的函数中返回一个字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:16:22.780

使用以下构造函数`std::string`：

```
string ( const char * s, size_t n ); 
```

基本上，如果`RecvBuf`是标准（文本）“字符串”，只需制作即可

```
std::string str( RecvBuf ); 
```

但这将复制所有`char`s，直到`\0`被击中。

* * *

由于此缓冲区存储从套接字接收的原始字节，因此您应该期望`\0`字节。

当您收到数据时，您就会知道它的大小。所以，只需使用

```
std::string str( RecvBuff, buff_len ); 
```

# javascript - parseXml 后无法获取 attr

> ID：12955633
> 
> 赞同：0
> 
> 时间：2012-10-18T13:15:44.050
> 
> 标签：javascript, jquery, xml

我编写了这个简单的 JQuery 代码，以查找一些 XML 代码的属性：

```
<html>
<head>
<meta charset='utf-8' />
<script type="text/javascript" src="js/jquery.min.js"></script>
</head>
<body>
<script>
var msg = '<utility value="346" cost="0" />';
alert(msg);
var xmlInput = $.parseXML(msg);
alert(xmlInput);
var xmlObject = $(xmlInput);
alert(xmlObject);
var tagname = xmlObject.nodeName;
alert("tagname="+tagname);
var value = xmlObject.attr("value");
alert("value="+tagname);
</script>
</body></html> 
```

但是，它不起作用： http://irsrv2.cs.biu.ac.il:8080/GeniusWeb/ [jqueryTest3.html](http://irsrv2.cs.biu.ac.il:8080/GeniusWeb/jqueryTest3.html)

标签名称和值是“未定义”，我在 Firefox 和 Chrome 上检查过。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:18:06.043

您应该在 中搜索某个元素`xmlObject`，因为 XML 从根元素“开始”。

```
var tagname = xmlInput.firstChild.nodeName;
// or xmlObject.children().get(0).nodeName

var value = $("utility", xmlObject).attr("value"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:23:45.023

两个问题。首先，您发布的代码的最后一个`alert`是`alert("value="+tagname`);`，无论如何它都不会给您想要的东西。其次，您需要从已解析的 XML jQuery 集中检索元素：

```
var msg = '<utility value="346" cost="0" />';
alert(msg);
var xmlInput = $.parseXML(msg);
alert(xmlInput);
var xmlObject = $(xmlInput);
alert(xmlObject);
var utility = xmlObject.find("utility");
alert("utility="+utility);
var value = utility.attr("value");
alert("value="+value);​ 
```

# iphone - iOS Facebook SDK 3.1 登录时添加权限

> ID：12955635
> 
> 赞同：3
> 
> 时间：2012-10-18T13:15:50.787
> 
> 标签：iphone, objective-c, ios, xcode, facebook

我正在尝试遵循 Facebook SDK 3.1 教程：Scrumptious 并将 FB 集成到我的应用程序中。

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {

NSArray *permissions = @[@"email"];

return [FBSession openActiveSessionWithReadPermissions:permissions
                                          allowLoginUI:allowLoginUI
                                     completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
                                         [self sessionStateChanged:session state:state error:error];
                                     }]; 
```

我想添加额外的权限，但它只显示身份验证中的基本信息，如下图所示：

![截屏](../Images/b389b6840927338952c4e74d09077f0e.png)

我还使用了不推荐使用的方法，得到了相同的结果：

```
[FBSession openActiveSessionWithPermissions:permissions allowLoginUI:allowLoginUI completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
    [self sessionStateChanged:session state:state error:error];
}]; 
```

我通过在其他地方使用从[这里](https://stackoverflow.com/questions/12915420/facebook-ios-3-1-sdk-login-with-publish-permission-callbacks)找到了临时解决方案。`reauthorizeWithPublishPermissions`用户必须登录 facebook 两次才能阅读用户电子邮件。

有什么解决方案可以一次完成吗？

感谢您的帮助！

编辑：关于 stackoverflow的另一篇[文章](https://stackoverflow.com/questions/12776503/facebook-permission-facebook-sdk-for-ios-5)`openActiveSessionWithPublishPermissions`，使用，仍然与屏幕截图具有相同的结果。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T09:54:48.307

根据[Facebook FBSession Reference](https://developers.facebook.com/docs/reference/ios/3.1/class/FBSession/#openActiveSessionWithPermissions%3aallowLoginUI%3acompletionHandler%3a%20Facebook%20FBSession%20Reference)，作为最佳实践，您应该在打开会话时请求读取权限。然后在您需要时请求其他权限。

> 要求初始权限请求仅代表只读权限。

其次，我在下面尝试了这段代码，我得到了正确的权限要求。

```
NSArray *permissions = [[NSArray alloc] initWithObjects:@"email", nil];

[FBSession openActiveSessionWithReadPermissions:permissions
                                   allowLoginUI:YES
                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error) {
 [self sessionStateChanged:session state:state error:error];}];
 [permissions release]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:19:22.980

我会在 Facebook 应用的权限设置中检查 Facebook.com 上的权限，并确保它们匹配。我相信他们说您可以在 iOS 代码中设置权限，但我建议您也匹配 FB 应用程序设置中的权限。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:41:43.247

[http://developers.facebook.com/docs/reference/login/#permissions](http://developers.facebook.com/docs/reference/login/#permissions)

这是一个如何使用它们的例子

```
NSArray *permissions = [[NSArray alloc] initWithObjects:@"publish_stream", @"email", nil];
[facebook authorize:permissions];
[permissions release]; 
```

# c# - 字符串操作：拆分这个由 - 字符分隔的字符串？

> ID：12955640
> 
> 赞同：1
> 
> 时间：2012-10-18T13:16:18.350
> 
> 标签：c#, string

我有以下字符串（我在这里处理的是网球运动员的名字）：

```
string bothPlayers = "N. Djokovic - R. Nadal"; //works with my code
string bothPlayer2 = "R. Federer - G. Garcia-Lopez"; //works with my code 
string bothPlayer3 = "G. Garcia-Lopez - R. Federer"; //doesnt works
string bothPlayer4 = "E. Roger-Vasselin - G. Garcia-Lopez"; //doesnt works 
```

我的目标是让这两个玩家分开两个新字符串（对于第一个 bothPlayers 来说）：

```
string firstPlayer = "N. Djokovic";
string secondPlayer = "R. Nadal"; 
```

**我试过的**

我解决了，用以下方法拆分第一个字符串/两个播放器（也解释了为什么我把“作品”作为评论放在后面）。第二个也有效，但它只是运气，因为我正在搜索第一个'-'然后拆分..但我无法让它适用于所有4种情况..这是我的方法：

```
string bothPlayers = "N. Djokovic - R. Nadal"; //works 
string bothPlayer2 = "R. Federer - G. Garcia-Lopez"; //works
string bothPlayer3 = "G. Garcia-Lopez - R. Federer"; //doesnt works
string bothPlayer4 = "E. Roger-Vasselin - G. Garcia-Lopez"; //doesnt works

string firstPlayerName = String.Empty;
string secondPlayerName = String.Empty;

int index = -1;
int countHyphen = bothPlayers.Count(f=> f == '-'); //Get Count of '-' in String

index = GetNthIndex(bothPlayers, '-', 1);
if (index > 0)
{
    firstPlayerName = bothPlayers.Substring(0, index).Trim();
    firstPlayerName = firstPlayerName.Trim();

    secondPlayerName = bothPlayers.Substring(index + 1, bothPlayers.Length - (index + 1));
    secondPlayerName = secondPlayerName.Trim();

    if (countHyphen == 2)
    {
        //Maybe here something?..
    }
}

//Getting the Index of a specified character (Here for us: '-') 
public int GetNthIndex(string s, char t, int n)
{
    int count = 0;
    for (int i = 0; i < s.Length; i++)
    {
        if (s[i] == t)
        {
            count++;
            if (count == n)
            {
                return i;
            }
        }
    }
    return -1;
} 
```

也许有人可以帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T13:19:23.983

您的大部分代码都可以使用内置[`string.Split`](http://msdn.microsoft.com/en-us/library/system.string.split.aspx)方法替换：

```
var split = "N. Djokovic - R. Nadal".Split(new string[] {" - "}, 
                                           StringSplitOptions.None);

string firstPlayer = split[0];
string secondPlayer = split[1]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:25:41.330

`"string".Split`可以使用，但您必须提供一个字符串数组，最简单的方法如下：

```
string[] names = bothPlayers.Split(new string[]{" "}, StringSplitOptions.None);

string firstPlayer = names[0];
string secondPlayer = names[1]; 
```

祝你好运 ：）

# .net-4.0 - URL 重写 .NET 4 不起作用？

> ID：12955642
> 
> 赞同：1
> 
> 时间：2012-10-18T13:16:21.833
> 
> 标签：.net-4.0, url-rewriting

我一直在尝试 .net 4 中 URL 重写的最基本示例，但在本地或 IIS 服务器上无法正常工作？

这是我的 global.asax 文件

```
<%@ Application Language="C#" %>

<script runat="server">

void Application_Start(object sender, EventArgs e) 
{
    // Code that runs on application startup
    RegisterRoutes(System.Web.Routing.RouteTable.Routes); 

}

public static void RegisterRoutes(System.Web.Routing.RouteCollection routeCollection)
{
    routeCollection.MapPageRoute("RouteForCustomer", "Customer/{Id}", "~/Customer.aspx");
} 

void Application_End(object sender, EventArgs e) 
{
    //  Code that runs on application shutdown

}

void Application_Error(object sender, EventArgs e) 
{ 
    // Code that runs when an unhandled error occurs

}

void Session_Start(object sender, EventArgs e) 
{
    // Code that runs when a new session is started

}

void Session_End(object sender, EventArgs e) 
{
    // Code that runs when a session ends. 
    // Note: The Session_End event is raised only when the sessionstate mode
    // is set to InProc in the Web.config file. If session mode is set to StateServer 
    // or SQLServer, the event is not raised.

}

</script> 
```

但是当我打电话时

```
http://localhost:3564/Customer/1 
```

我只是找不到HTTP？

# c - 在 HP UX 中找不到 rexec

> ID：12955644
> 
> 赞同：1
> 
> 时间：2012-10-18T13:16:22.767
> 
> 标签：c, hp-ux

简单的程序：

```
#include <sys/types.h>
#include <sys/socket.h>
#include <sys/ioctl.h>
#include <netinet/in.h>
#include <netdb.h>

int main(int argc, char **argv)
{
    int ret = rexec((char**) 0, "", "", "", 0);

    return 0;
} 
```

编译：

```
$ g++ -o rexec -D_XOPEN_SOURCE_EXTENDED rexec.cpp

rexec.cpp: In function 'int main(int, char**)':
rexec.cpp:10:49: error: 'rexec' was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T15:58:42.733

> 这些函数**不在**POSIX.1-2001 中。rexec() 函数首先出现在 4.2BSD 中，并且出现在 BSD、Solaris 和许多其他系统上。rexec_af() 函数较新，但不那么普遍。

资料来源：“人 rexec”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T16:07:28.040

```
find /usr/local -type f -print -exec grep rexec {} \; # no rgrep/grep -R on HP-UX 
```

在我的 HP-UX 系统上的任何头文件中显然都没有 rexec 函数。

HP-UX 没有。我猜你必须自己通过`popen`在`rexec(1)`应用程序上执行它来实现它（不太难）。或者，停止使用 rexec！

# option - web2py - 从 IS_IN_DB 验证器中删除空白选项

> ID：12955650
> 
> 赞同：3
> 
> 时间：2012-10-18T13:16:40.753
> 
> 标签：option, web2py, validation

在 web2py 中，假设我通过添加一个名为“agent_code”的字段来修改默认的 auth_user 表。此字段应包含另一个表中的值：

```
auth_table = db.define_table(
    auth.settings.table_user_name,
    Field('first_name', length=128, default=''),
        ...more fields here...,
    Field('auth_age_cod', length=512,default=None))

auth_table.auth_age_cod.requires = \
    IS_IN_DB(db, db.agea.agea_cod,
             '%(agea_cod)s - %(agea_name)s',
             error_message='Agent not in DB') 
```

我希望用户能够在注册期间将自己标识为代理。

用户注册表单现在显示允许选择代理的下拉框，但在开始时包含一个空白选项。由于某些原因，这在我们的系统中是不可接受的。

在调查了验证器的源代码后，我发现 IS_IN_DB 验证器有一个名为“零”的参数。默认设置为 ''（空字符串）并在下拉列表中创建一个空白选项。

因此，要删除空白选项，请将验证器更改为：

```
IS_IN_DB(db, db.agea.agea_cod,
         '%(agea_cod)s - %(agea_name)s',
         error_message='Agent not in DB',
         zero=None) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T09:49:08.717

您的问题不清楚，但如果您要问的`zero`论点`IS_IN_DB`是否是为了这个目的，那就是。[web2py 手册](http://web2py.com/books/default/chapter/29/07)说参数`zero`in 的工作方式`IS_IN_DB`类似于`zero``IS_IN_SET`

对于`IS_IN_SET`手动状态：*参数`zero`是可选的，它确定默认选择的选项的文本，`IS_IN_SET`验证器本身不接受的选项。如果您不想要“选择一个”选项，请设置`zero=None`*

# iphone - Xcode 4.5 中@property 和 ivar 的区别

> ID：12955655
> 
> 赞同：12
> 
> 时间：2012-10-18T13:16:53.173
> 
> 标签：iphone, ios, properties, ivars

以前我总是看到像这样使用属性和 iVar 的例子......

SomeClass.h 内部

```
@interface SomeClass : NSObject {
    NSString *_someString;
}

@property NSString *someString;

@end 
```

然后在 SomeClass.m

```
#import "SomeClass.h"

@implementation SomeClass

@synthesize someString = _someString;

@end 
```

最近（在 WWDC 2012 视频中）我听说我们不再需要`@synthesize`，建议只使用`@property`没有关联的 iVar。

所以上面会变成...

一些类.h

```
@interface SomeClass : NSObject

@property NSString *someString;

@end 
```

SomeClass.m

```
#import "SomeClass.h"

@implementation SomeClass

@end 
```

这只是使用`@property`并且没有 ivar。这是有道理的，我一直在使用它。

但是，我也看到了一些例子......

一些类.h

```
@interface SomeClass : NSObject

@end 
```

SomeClass.m

```
#import "SomeClass.h"

@interface SomeClass () {
    NSString *someString;
}

@end

@implementation SomeClass

@end 
```

在这方面，他们只有一个私人的`iVar`，没有`@property`。

那么有什么区别呢？我知道这也`@property`提供了访问器方法，但您不必重写访问器方法。您可以只使用默认访问器。

那么什么时候你会使用 @property 而不是 ivar，什么时候你会只使用 ivar 而不是 a `@property`？你为什么不完全摆脱 ivars 而只是使用`@properties`呢？如果它们需要是私有的，那么只需在**.m**的接口扩展中使用它们。

快速编辑以响应有关内存管理的答案。`strong`我正在使用 ARC，对我来说，使用和`weak` `@properties`使用 iVar 时我似乎可以更好地控制内存管理。

我希望这个问题足够清楚。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:24:38.943

通常，您始终可以使用属性。如果您有“分配”属性，您可以使用 ivar，因为您不需要在 getter/setter 中进行任何内存管理。但是，如果您应该保留对象，那么使用 ivars 是不方便的，因为您必须手动保留/释放它们，而属性会为您执行此操作。

此外，如果您使用 ivars，您将无法控制设置/获取值。一般来说，使用公共字段而不是 getter 或 setter 是一种不好的做法。例如，如果您可以为存储人员年龄的字段设置负值，则不可以。

而且您不能将 KVO 与 ivars 一起使用

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-18T13:59:05.933

我认为这取决于您可以使用“ `->`”语法访问公共 ivars 的事实。也许以前，如果你声明一个没有`@private`ivar 的只读属性，你可以使用 " `->`" 语法访问它。（也许它打破了封装）。

但是现在如果你声明这样的东西

```
{
@private NSArray *a;
@protected NSArray *b;
@public NSArray *c;
}
@property (nonatomic, retain) NSArray *d; 
```

您只能使用“ `->`”访问“ `c`” ivar，只需尝试此代码。使用 a,b 和 d 将是警告或错误。

如果它有帮助，我会很高兴。

# php - PHP 优化 - json_decode

> ID：12955662
> 
> 赞同：1
> 
> 时间：2012-10-18T13:17:08.803
> 
> 标签：php

我的 PHP 应用程序在每个请求中解码大约 100 个 json 对象，我每秒有很多请求，我需要优化我的代码。我想知道解码一个巨大的 json 对象而不是 100 个较小的对象是否会更快（假设这个大 json 是通过嵌套小对象制作的）。有人有类似的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:19:39.367

使用这两种方法，您将获得几乎相同的性能。

检查您的请求时间执行和响应时间`Firebug`或类似。

经过您的测试，您的大 json 似乎比多个 mini json 慢。

# c++ - QRegExp 与预期不匹配

> ID：12955667
> 
> 赞同：0
> 
> 时间：2012-10-18T13:17:29.240
> 
> 标签：c++, regex, qt, qregexp

我想将所有不包含这些字符“<”、“>”、“=”的字符串与 QRegExp (Qt) 匹配。使用以下正则表达式，这不起作用：

```
 "^[^><=]+$" 
```

为什么？对我来说这意味着：字符串的开头，一个或多个不是>，<，=的字符和字符串的结尾

谢谢

编辑

我想匹配

```
BUILD 
```

例如，我不想匹配

```
BU<ILD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:42:42.597

尝试另一种方法。采用：

`^(?!.*[<>=]).*$`

# c++ - 在行驶方向和侧面偏移 Lat Lon 坐标

> ID：12955668
> 
> 赞同：1
> 
> 时间：2012-10-18T13:17:30.883
> 
> 标签：c++, geocoding

我想将坐标（纬度/经度）偏移少量米（1-2 米）到驾驶车辆的后部和右侧。

它必须非常准确！

我发现了一个似乎有效但不准确（或错误？）的功能：

```
double deltaSide = 1.0; // +=offset to the right
double deltaRear = 1.1; // +=offset in backwards-direction of driving

//transform to offset to North and East
double deltaSideN = -deltaSide * sin( m_yaw_d ) - deltaRear * cos( m_yaw_d );
double deltaSideE = deltaSide * cos( m_yaw_d ) - deltaRear * sin( m_yaw_d );

f_lat_d = f_orgLat_d + deltaSideN / (double)EARTH_RADIUS * rad2grad;
f_lon_d = f_orgLon_d + deltaSideE / (double)EARTH_RADIUS / cos( f_orgLat_d * grad2rad ) * rad2grad; 
```

有更准确的功能吗？还是我只是犯了一个重大错误？

谢谢！

# c# - 如何更改 Kendo ui Grid 的高度

> ID：12955673
> 
> 赞同：46
> 
> 时间：2012-10-18T13:17:38.070
> 
> 标签：c#, asp.net-mvc-3, kendo-ui

使用包装器时如何更改剑道网格的高度？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-10-21T18:32:53.080

我假设您正在寻找的方法是在 Scrollable 配置下（它在那里是因为如果您希望一个 Grid 具有高度，则它需要是可滚动的）

```
.Scrollable(scr=>scr.Height(230)) 
```

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-07-24T10:32:00.193

动态改变高度

删除 html 属性：

`.HtmlAttributes(new { style = "height:600px;" })`

使用自动添加可滚动：

`.Scrollable(a => a.Height("auto"))`

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-10-02T21:12:04.580

在强类型中，用于刚性固定高度

```
.Scrollable(scrollable => scrollable.Height(100)) 
```

在 Js 中 dataSource 声明后使用

```
$("#Grid").kendoGrid({

            dataSource: { },

            height: 450,

            pageable: {
                refresh: true,
                pageSizes: true
            },

            columns:
                [
                   ***
                ]
        }); 
```

您还可以通过 css 为您拥有的所有网格绑定网格的最小和最大高度。

```
.k-grid .k-grid-content {
 min-height: 100px;
 max-height: 400px;
} 
```

或者您可以指定一个特定的网格，将 .k-grid 替换为特定的网格 id `#YourGridName`。希望这可以帮助。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-10-19T12:18:30.057

`HtmlAttributes()`将允许您向`<div>`包含工具栏、分页、表格等的属性添加属性。

`TableHtmlAttributes()`将允许您仅向`<table>`元素添加属性

通过添加样式属性将表格设置为 750px 的示例：

```
 @Html.Kendo().Grid(Model)
               .Name("Grid")
               .TableHtmlAttributes(new {style="height: 750px;"}) 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-31T18:59:25.900

您也可以为此使用外部 css 规则，如果您的网格被重复使用（如在局部视图中），这可能会更好。如果您提供样式或高度属性，Kendo 会内联添加这些属性，因此它们不能被外部样式表覆盖。有时你想要，但有时你不想要。

使用`.Name()`提供给包装器的字符串，很容易编写一个 css 规则来定位标题或内容。

```
#GridName .k-grid-content {
    height: 300px; /* internal bit with the scrollbar */
}

#GridName .k-grid-header-wrap tr {
    height: 75px; /* header bar */
} 
```

请注意，`.k-grid-header-wrap`类可能会因您初始化网格的方式而异。此外，您必须针对标头内的`tr`or`th`标记。对整个标题（通常是 div 标签）进行样式设置会导致结果不一致。有些浏览器不会应用该规则，有些浏览器会在实际 tr/th 的边界开始处留下可见的工件。

哦，我还应该说，当在 MVC 包装器创建的网格和常规的 js 创建的网格之间进行更改时，这种方法允许灵活性。或者您可以在不同的网格之间重用样式表。

# php - 在 ORACLE 数据库中保存 XML 数据时出错，警告和致命错误

> ID：12955675
> 
> 赞同：3
> 
> 时间：2012-10-18T13:17:48.883
> 
> 标签：php, oracle

帮助了解哪里出了问题。

重点是：

1.  包括缓冲，创建 XML 数据：

    ```
    ob_start();
    header("Content-Type: text/xml");
    header("Expires: Thu, 19 Feb 1998 13:24:18 GMT"); 
    header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT"); 
    header("Cache-Control: no-cache, must-revalidate"); 
    header("Cache-Control: post-check=0,pre-check=0"); 
    header("Cache-Control: max-age=0"); 
    header("Pragma: no-cache"); echo "<?xml version=\"1.0\" encoding=\"WINDOWS-1251\" standalone=\"yes\"?>";
        echo "<MAIN>";
        echo "<ROWSET>";
            echo "<ROW>";
                echo "<CODE>somecode</CODE>";
                echo "<DESC>somedesc</DESC>";
                echo "<NOMINAL>somenominal</NOMINAL>";
                echo "<DATE>2012.01.01</DATE>";
                echo "<TYPE>sometype</TYPE>";
            echo "</ROW>";
        echo "</ROWSET>";
    echo "</MAIN>"; 
    ```

2.  将缓冲区的内容放入变量`content`中，刷新缓冲区并关闭缓冲。

    ```
    $content = ob_get_contents();
    ob_end_clean(); 
    ```

3.  连接数据库，调用函数，传递`content`保存我写的代码，取自官方手册，可能不是这样）。

    ```
    error_reporting(E_ALL);
    ini_set('display_errors',1);
    header('Content-Type: text/xml; charset=windows-1251');
    $c=oci_connect("test_user", "test_schema", "DBtest");
    $rclob = oci_new_descriptor($c, OCI_D_LOB);
    $clob = oci_new_descriptor($c, OCI_D_LOB);   
    $s = oci_parse($c, "begin :ret:=create_sm.get_xml_data(:data, :out); end;");    
    oci_bind_by_name($s, ":data", $clob, -1, OCI_B_CLOB);
    oci_bind_by_name($s, ":ret", $rclob, -1, OCI_B_CLOB);
    oci_bind_by_name($s, ":out", $out, 1000);
    $clob->writeTemporary($content);
    $r = oci_execute($s, OCI_DEFAULT); // use OCI_DEFAULT so $lob->save() works
    //$e = oci_error($s);
    //var_dump($e);
    oci_commit($c);
    //echo $out;
    $returnvalues = convertDateBackwards($rclob->load());
    $returnvalues = str_replace("<SECURITY>","<SECURITY ret=\"".$out."\">",$returnvalues);
    //echo convertDateBackwards($rclob->load());
    echo $returnvalues;
    $clob->free(); // close LOB descriptor to free resources
    $rclob->free(); // close LOB descriptor to free resources
    oci_free_statement($s);
    oci_close($c); 
    ```

错误出现在这个：

```
Warning: oci_execute() [function.oci-execute]: 
ORA-06550: line 1, column 14: 
PLS-00201: identifier 'CREATE_SM.GET_XML_DATA' must be declared 
ORA-06550: line 1, column 7: PL / SQL: Statement ignored in C:\webserver\www.site.ru\www\blocks\create_xml.php on line 57  
Fatal error: Call to undefined function convertDateBackwards() in C:\webserver\www.site.ru\www\blocks\create_xml.php on line 62 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T12:38:48.833

Solved. Originally posted by owner as a comment , solved it by :

> Yes, like I said the problem was related to the access rights. Thank you all for the help.

using `APC` comment :

```
So, does TEST_USER own a package called CREATE_SM which has
a function called GET_XML_DATA? 
It appears not, because that is what the error message is telling you. 
```

# asp.net - 如何在 X 轴上显示 3 个值而不是 1？

> ID：12955676
> 
> 赞同：0
> 
> 时间：2012-10-18T13:17:52.987
> 
> 标签：asp.net, charts

我有一个条形图，显示重量与计数的直方图。x 轴是重量，y 轴是在该重量范围内的重量的计数。

我还想显示每个重量范围的百分比，这将是重量范围计数/总计数，并在 x 轴上每个重量旁边显示计数的数值。

因此，x 轴后跟 y 轴的示例应如下所示

重量百分比计数 | 数数

1.000 3.013% 512 | 512

我可以通过将重量、百分比和计数组合成一个字符串，然后将数据表 = 的数据行设置为整个字符串而不是计数来实现这一点。但是我想知道是否有办法通过将每个数据值放入它自己的列来实现这一点，所以当我将它导出到 excel 而不是图表时，每个值都有自己的列而不是一个连接列 3价值观。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:32:40.190

我可以检查是否选择了导出到 excel 而不是图表，然后动态构建我的数据表以包含每个值的列或包含每行的连接值的列，具体取决于他们选择的内容。但是我仍然相信有一个更好的选择，我还没有想出来。

# c# - WP7如何使网格尺寸适应图像尺寸

> ID：12955677
> 
> 赞同：3
> 
> 时间：2012-10-18T13:17:57.290
> 
> 标签：c#, silverlight, windows-phone-7

我正在开发一个愚蠢的应用程序： - 从媒体库打开图片， - 将所选图像放入网格元素（其中包含 TextBlok 元素） - 将图片保存在“保存的图片”相册中。

我的 XAML 代码是：

```
<controls:PanoramaItem Header="Image Selection" Height="652">
<Grid Name="markedImage" Margin="0,0,4,89">
    <Image x:Name="img" Stretch="Fill" Margin="0,0,0,10"></Image>
    <TextBlock x:Name="text" Text="Hello!">
        <i:Interaction.Behaviors>
            <el:MouseDragElementBehavior ConstrainToParentBounds="True"/>
        </i:Interaction.Behaviors>
    </TextBlock>
</Grid> 
```

打开和保存所选图片的代码是：

```
private void photoChooserTask_Completed(object sender, PhotoResult e)
    {
        try
        {
            BitmapImage image = new BitmapImage();
            image.SetSource(e.ChosenPhoto);
            WriteableBitmap wbp = new WriteableBitmap(image);
            this.img.Source = image;
            height = image.PixelHeight;
            width = image.PixelWidth;
            MessageBox.Show("H: " + height + "\t" + "W: " + width);
        }
        catch 
        { 
            MessageBox.Show("Disconnect your device from Zune"); 
        }
    }
private void save_Click(object sender, System.EventArgs e)
    {

        WriteableBitmap marked = new WriteableBitmap(this.markedImage, null);
        ThreadPool.QueueUserWorkItem(callback =>
        {
            MemoryStream ms = new MemoryStream();
            marked.SaveJpeg(ms, (width * 2), (height * 2), 0, 100);
            using (MediaLibrary lib = new MediaLibrary())
                lib.SavePicture("Test", ms.ToArray());
        });
        MessageBox.Show("H: " + marked.PixelHeight + "\t" + "W: " + marked.PixelWidth);

        // wbm.SaveToMediaLibrary("SavedPicture.jpg", true);

        MessageBox.Show("Picture saved successfully");
    } 
```

我不能发布图片，因为我是新用户，无论如何图片（原始图片和保存的图片）具有相同的高度和宽度，但它们看起来不同我认为问题在于网格尺寸和 Stretch 属性。我尝试了不同的组合，但结果并不好。有什么建议吗？

编辑：我赢得了声望点原始照片是 ![原图](../Images/94ad2ce4bf2a7323fd098217e75eb054.png)

保存的照片是 ![保存的照片](../Images/86bc4a4e7d2af0653eae43f544d10960.png)

如果您在另一个窗口中打开两者，您可以看到不同之处

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T21:19:17.670

这个问题很容易理解：基本上，您正在对网格进行“屏幕截图”。因此，生成的图片大小与网格大小相同。因此下采样的图片。

然而，解决这个问题可能很棘手。我可以建议两种方法：

1.  在代码隐藏中以编程方式重新创建网格及其内容，然后从这个新网格创建 WriteableBitmap

2.  在执行图像生成代码之前从其父控件中删除网格（然后网格将能够根据需要使用尽可能多的空间），然后将其添加回来：

    ```
    <Grid x:Name="ParentGrid" Grid.Row="1" Width="200" Height="150">
        <Grid Name="markedImage" Margin="0,0,4,89">
            <Image x:Name="img" Source="Images/Test.jpg" Stretch="Fill" Margin="0,0,0,10"></Image>
            <TextBlock x:Name="text" Text="Hello!">
                <i:Interaction.Behaviors>
                    <el:MouseDragElementBehavior ConstrainToParentBounds="True"/>
                </i:Interaction.Behaviors>
            </TextBlock>
        </Grid>
    </Grid> 
    ```

    和代码隐藏：

    ```
    this.ParentGrid.Children.Remove(this.markedImage);

    WriteableBitmap marked = new WriteableBitmap(this.markedImage, null);          

    MemoryStream ms = new MemoryStream();
    marked.SaveJpeg(ms, 1349, 1437, 0, 100);
    using (MediaLibrary lib = new MediaLibrary())
        lib.SavePicture("Test", ms.ToArray());

    MessageBox.Show("H: " + marked.PixelHeight + "\t" + "W: " + marked.PixelWidth);

    MessageBox.Show("Picture saved successfully");

    this.ParentGrid.Children.Add(this.markedImage); 
    ```

# c# - CookComputing XmlRpc 客户端 - 如何使用时区获取 DateTime

> ID：12955678
> 
> 赞同：0
> 
> 时间：2012-10-18T13:18:01.267
> 
> 标签：c#, timezone, xml-rpc, iso8601

> **可能重复：**
> [在 C# 中，给定一个 DateTime 对象，我如何以字符串格式获取 ISO 8601 日期？](https://stackoverflow.com/questions/114983/in-c-given-a-datetime-object-how-do-i-get-a-iso-8601-date-in-string-format)

在我的 .NET C# 程序中，我使用的是 CookComputing.XmlRpcV2.dll

我有一个需要连接到 xmlrpc 服务器的 XMLRPC 客户端。我需要发送带有时区 (20121018T00:00:12+0200) 的 iso8601 日期时间格式。到目前为止，我已经尝试过`Convert.ToDateTime(DateTime.UtcNow.ToString("o"))`，但这会返回 `<dateTime.iso8601>20121009T16:06:47</dateTime.iso8601>`，这不是我想要的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:34:54.987

```
DateTime.UtcNow.ToString("yyyy-MM-ddTHH\:mm\:ss.fffffffzzz"); 
```

这给你一个类似于**2012-10-18T13:57:31.2311892-04:00的日期**

另一种方法是：

```
DateTime.UtcNow.ToString("o"); 
```

这给了你**2012-10-18T14:01:54.9571247Z**

要获得您想要的格式，您可以使用：

```
 DateTime.UtcNow.ToString("yyyy-MM-ddTHH:mm:ssZ") 
```

# plugins - JIRA 插件：从哪里开始

> ID：12955687
> 
> 赞同：0
> 
> 时间：2012-10-18T13:18:20.073
> 
> 标签：plugins, workflow, jira, custom-fields

我被要求创建一个简单的 JIRA 插件，它结合了工作流 + 自定义字段 + 条件步骤

我刚开始安装 JIRA，最后设法创建了一个运行简单的 Hello World 插件。

我已经对这个界面有多大感到困惑，似乎无法掌握大局

你们中的任何人都可以把我送到正确的方向吗？关于什么可以包括所有这些的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T11:36:40.513

[从scriptrunner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner "Atlassian Marketplace 的 Script Runner")插件开始可能是个好主意。这使您能够为工作流条件、验证器、后置函数、侦听器等编写自定义 groovy 脚本。

优点是简单 groovy 脚本的学习曲线不像“真正的”插件那么陡峭。这样您就可以使用 jira api，然后当您无法再使用 groovy 时切换到正常的插件机制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T22:21:39.527

[Atlassian Plugin SDK](https://developer.atlassian.com/display/DOCS/Introduction+to+the+Atlassian+Plugin+SDK)的介绍其实相当不错。

试着把注意力集中在你想要的插件类型上：

*   customfield - 计算与否？
*   工作流插件 - 验证器、条件

在每个插件中，找出您需要的信息，然后查看您可以从 API 的何处获取这些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-17T15:37:55.827

Script Runner 更容易学习，它完全符合您的要求。如果您想在其他实例中安装 SR 脚本（SR 插件必须可用），它也可以成为 JIRA 插件。学习 Script Runner 可以帮助您更好地了解如何开发 JIRA 插件，无论如何这不会浪费时间，因为您可以轻松地在原生 JIRA 插件和 SR 之间切换（SR 使用 JIRA 组件所以主要逻辑仍然相同，它只是隐藏了大部分烦人和重复的东西）。你可以从这个模板开始：

[https://bitbucket.org/jamieechlin/sr-scripts-plugin/overview](https://bitbucket.org/jamieechlin/sr-scripts-plugin/overview)

# java - Java Web Start 在浏览器中运行时不会将参数传递给应用程序

> ID：12955688
> 
> 赞同：1
> 
> 时间：2012-10-18T13:18:27.883
> 
> 标签：java, java-web-start, java-ws

我无法将参数传递给使用 Java Web Start 启动的 Java 应用程序。我的系统是 Ubuntu Linux 12.04.1 Precise，但同样的情况也发生在 Windows 7 中。两者都使用 Oracle Java 版本 1.7.0_09。

**编辑**：我正在研究 Web Start 应用程序是否比普通小程序更适合我们的需求。小程序的问题在于，如果用户导航离开我们不想要的页面，它就会关闭。（我们也想看看是否可以通过使用 Web Start 而不是小程序来解决某个安全问题。）我们想从浏览器启动应用程序，以便我们可以将有关经过身份验证的用户的信息传递给Java 应用程序。要求用户登录应用程序似乎是一个糟糕的解决方案（我们可能必须支持 OAuth 之类的东西）。

我有一个示例程序 CommandLineArgs.java：

```
public class CommandLineArgs {
    public static void main(String[] args)  {
        System.out.println(String.format("Got %d command line args:", args.length));
        for (String arg : args) {
            System.out.println(arg);
        }
    }
} 
```

我把它打包成一个罐子：

```
javac CommandLineArgs.java
zip cmd.jar CommandLineArgs.class 
```

然后我有一个名为 cmd.jnlp 的 JNLP 文件：

```
<?xml version="1.0" encoding="utf-8"?>

<!-- Empty codebase means use same directory. -->
<jnlp spec="1.0+" codebase="https://localhost:9876/">
    <information>
        <title>Command Line Args Printer</title>
        <vendor>No one</vendor>
        <homepage href="https://localhost:9876/"/>
        <description>Application that prints the command line arguments that it gets.</description>
    </information>
    <resources>
        <j2se version="1.6+" initial-heap-size="32m" max-heap-size="128m" />
        <property name="jnlp.versionEnabled" value="true"/>

        <jar href="cmd.jar" main="true"/>

    </resources>
    <application-desc main-class="CommandLineArgs">
        <!-- Here are sample arguments I'd like to pass to the program. -->
        <argument>arg1</argument>
        <argument>arg2</argument>
        <argument>arg3</argument>
    </application-desc>
</jnlp> 
```

这是我用于测试的 HTML 页面 cmd.html。div 元素最初是使用 deployjava.js 创建的：`deployJava.launchWebStartApplication('https://localhost:9876/cmd.jnlp')`

```
<!DOCTYPE html>

<html>
<head>
    <title>Java web start command line arguments test</title>

    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
</head>
<body>

<div id="div1" style="position: relative; left: -10000px; margin: 0px auto; " class="dynamicDiv">
    <embed type="application/x-java-applet;jpi-version=1.7.0_09" width="0" height="0" launchjnlp="https://localhost:9876/cmd.jnlp" docbase="https://localhost:9876/">
</div>

</body>
</html> 
```

让 https 服务器运行的最快方法是使用 Linux 中常见的 openssl 工具。像这样运行服务器时，当前目录应该包含 cmd.html、cmd.jar 和 cmd.jnlp。

```
sudo cp /etc/ssl/private/ssl-cert-snakeoil.key .
sudo chmod 666 ssl-cert-snakeoil.key
openssl req -batch -new -x509 -key ssl-cert-snakeoil.key -out ssl-cert-snakeoil.key.crt
openssl s_server -cert ssl-cert-snakeoil.key.crt -key ssl-cert-snakeoil.key -accept 9876 -WWW 
```

现在，如果我上网，`https://localhost:9876/cmd.html`我可以运行该应用程序。Java 控制台打开并打印出来。请注意，有 0 个命令行参数。

```
 JNLP Ref (absolute): https://localhost:9876/cmd.jnlp
    Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.6+, heap=33554432-134217728, args=null, href=null, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_09
    location is: http://java.sun.com/products/autodl/j2se
    path is: /opt/jre1.7.0_09/bin/java
    args is: -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8001
    native platform is: Linux, amd64 [ x86_64, 64bit ]
    JavaFX runtime is: JavaFX 2.2.3 found at /opt/jre1.7.0_09/
    enabled is: true
    registered is: true
    system is: true

    Match: ignoring maxHeap: 134217728
    Match: selecting InitHeap: 33554432
    Match: digesting vmargs: null
    Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
    Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
    Match: digest LaunchDesc: null
    Match: digest properties: []
    Match: JVM args: [JVMParameters: isSecure: true, args: ]
    Match: endTraversal ..
    Match: JVM args final: -Xms32m
    Match: Running JREInfo Version    match: 1.7.0.09 == 1.7.0.09
     Match: Running JVM args match: have:<-Xms32m     satisfy want:<-Xms32m>
Got 0 command line args: 
```

另一方面，如果我从命令行 ( `javaws cmd.jnlp`) 运行 javaws，我会在 java 控制台中得到它。现在有 3 个命令行参数。

```
 Match: beginTraversal
Match: digest selected JREDesc: JREDesc[version 1.6+, heap=33554432-134217728, args=null, href=null, sel=false, null, null], JREInfo: JREInfo for index 0:
    platform is: 1.7
    product is: 1.7.0_09
    location is: http://java.sun.com/products/autodl/j2se
    path is: /opt/jre1.7.0_09/bin/java
    args is: -agentlib:jdwp=transport=dt_socket,server=y,suspend=n,address=8001
    native platform is: Linux, amd64 [ x86_64, 64bit ]
    JavaFX runtime is: JavaFX 2.2.3 found at /opt/jre1.7.0_09/
    enabled is: true
    registered is: true
    system is: true

    Match: ignoring maxHeap: 134217728
    Match: selecting InitHeap: 33554432
    Match: digesting vmargs: null
    Match: digested vmargs: [JVMParameters: isSecure: true, args: ]
    Match: JVM args after accumulation: [JVMParameters: isSecure: true, args: ]
    Match: digest LaunchDesc: null
    Match: digest properties: []
    Match: JVM args: [JVMParameters: isSecure: true, args: ]
    Match: endTraversal ..
    Match: JVM args final: -Xms32m
    Match: Running JREInfo Version    match: 1.7.0.09 == 1.7.0.09
     Match: Running JVM args match: have:<-Djnlp.versionEnabled=true -Xms32m     satisfy want:<-Xms32m>
Got 3 command line args:
arg1
arg2
arg3 
```

难道我做错了什么？为什么在浏览器中运行时参数不传递给我的程序？

我发现帖子[Java WS 应用程序偶尔忽略参数](https://stackoverflow.com/questions/4049994/java-ws-application-ignoring-arguments-sporadically)似乎描述了同样的问题。posdef 的解决方案是从 jnlp 文件中的 jnlp 元素中删除 href 属性，但我没有该属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-19T10:07:54.177

> 我们也有兴趣看看我们是否可以通过使用 Web Start 而不是小程序来解决某个安全问题。

应用于基于 JWS 的应用程序的安全环境。总是与应用于小程序的非常相似。一些小的差异`System.exit(n)`是始终在小程序（甚至是受信任的小程序）中受到限制，并且 JWS 提供了介于沙盒和受信任之间的中间级别的安全性。

在 Oracle 收购这两种形式的插件之前，Sun 付出了巨大的努力。

所以这个问题的简短回答是，“不”。如果您可以在 JWS 应用程序中执行此操作，那么您应该可以在小程序中执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-19T04:49:44.997

`application-desc`用于 WebStart 应用程序，`applet-desc`用于小程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T06:42:37.177

根据 Oracle 文档

“property 元素**定义了一个系统属性，可通过 System.getProperty 和 System.setProperties 方法使用。**它有两个必需的属性：名称和值。”

然后给出这个例子：

```
<property name="key" value="overwritten"/> 
```

要检索 Java 类中的值：

`System.getProperty("key");`

# regex - Notepad ++中的正则表达式删除空行

> ID：12955690
> 
> 赞同：4
> 
> 时间：2012-10-18T13:18:41.143
> 
> 标签：regex, notepad++, replace

我有多个 html 文件，其中一些有一些空行，我需要一个正则表达式来删除所有空行并只留下一个空行。所以它删除了不止一个空行，并留下那些只有一个或没有的（不像在其中有文字）。

我还需要它来考虑不完全空白的行，因为某些行可能有空格或制表符（不显示的字符），所以我需要它考虑这些行，只要它更多不止一条线。。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-18T13:21:15.210

搜索

```
^([ \t]*)\r?\n\s+$ 
```

并替换为

```
\1 
```

**解释：**

```
^         # Start of line
([ \t]*)  # Match any number of spaces or tabs, capture them in group 1
\r?\n     # Match one linebreak
\s+       # Match any following whitespace
$         # until the last possible end of line. 
```

`\1`然后将包含第一行空白字符，因此当您将其用作替换字符串时，只会保留第一行空白（不包括末尾的换行符）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-12-11T18:35:51.053

这对我有用`notepad++ v6.5.1\. UNICODE windows 7`

搜索： `^[ \t]*\r\n`

替换为：*无，留空*

搜索模式：`Regular expression.`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:30:50.677

搜索`(\r?\n(\t| )*){3,}`，替换为`\r\n\r\n`，检查“正则表达式”和“。匹配换行符”。

使用记事本++ 6.2 测试

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-18T13:33:22.010

这将替换包含空格（或不包含空格）的连续空白行，并将其替换为一个新行。

**搜索** `(\s*\r?\n){3,}`

**用。。。来代替** `\r\n`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-12-16T03:27:03.307

![在此处输入图像描述](../Images/4c89e39a19b84ca43354ae3f5624f439.png)

您可以自己找到需要替换为 \n\n 或 \n\r\n 或 \r\n\r\n 等的内容......现在您甚至可以`^([ \t]*)\r?\n\s+$`根据需要修改正则表达式。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T14:56:48.757

我测试了上述任何建议，总是太少或太删除。这样要么你没有空行，其中至少有一个是预先删除的，要么是删除的不够多（留下了空格等）。不幸的是，我还不能写评论。用 6.1.5 测试并更新到 6.2 并再次测试。取决于可能有​​多少文件，我建议使用

```
Edit->Blank Operations->Trim trailing whitespace 
```

后跟`Ctrl`+`A`和

```
TextFX -> TextFX Edit -> Delete surplus blank lines 
```

我尝试录制的宏不起作用。甚至还有一个用于删除尾随空格的宏（`Alt`+ `Shift`+ `S`，请参阅设置 | 快捷方式映射器... | 宏）。有个

```
Edit->Blank Operations->Remove unnecessary EOL and whitespace 
```

但这会删除每个 EOL 并将所有内容放在一行中。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-28T07:26:20.003

我`^\r\n`在“替换为”文本框中查找并单击“全部替换”，没有任何内容（空）。

# asp.net - 无法修改 Controls 集合，因为该控件包含代码块（即 <% ... %>）

> ID：12955693
> 
> 赞同：0
> 
> 时间：2012-10-18T13:19:01.533
> 
> 标签：asp.net, master-pages, webusercontrol

我有一个网络用户控件：

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="SitewideNotification.ascx.cs" Inherits="Controls_Fresh_SitewideNotification" %>

<asp:PlaceHolder runat="server" ID="Javascript">
    test
</asp:PlaceHolder> 
```

在我背后的代码中，我有：

```
protected void Page_Load(object sender, EventArgs e)
{
    Page.Master.FindControl("JSContent").Controls.Add(Javascript);
} 
```

我的母版页以：

```
 <asp:ContentPlaceHolder runat="server" ID="JSContent"/>

    </form>

</body>
</html> 
```

但我得到了错误：

```
System.Web.HttpException: The Controls collection cannot be modified because the control contains code blocks (i.e. <% ... %>).

Page.Master.FindControl("JSContent").Controls.Add(Javascript); 
```

我有点迷茫这是为什么，有人知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:40:58.040

当我在页面的头部有带有 <% %> 块的 javascript 代码时，我通常会看到这种情况。当你将它从头部移到身体下方时，它似乎在我所见过的情况下消失了。由于您没有向我们展示那部分代码，因此很难确切地说出问题所在，但这里有一篇关于该问题的好帖子：

[http://leedumond.com/blog/the-controls-collection-cannot-be-modified-because-the-control-contains-code-blocks/](http://leedumond.com/blog/the-controls-collection-cannot-be-modified-because-the-control-contains-code-blocks/)

# asp.net - 将 facebook 图片推送到 ASP.net 网站？

> ID：12955701
> 
> 赞同：0
> 
> 时间：2012-10-18T13:19:32.533
> 
> 标签：asp.net, facebook

有谁知道是否有可能开发一个 facebook 应用程序来检测上传到特定相册的图像并以某种方式自动将它们上传到 asp.net 网站？

任何输入将不胜感激，因为我还没有任何 FB 开发经验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T14:19:21.293

但是，我不知道已经存在一个应用程序来实现这一点；很有可能开发一个应用程序来做到这一点。合理的步骤可能如下：

1.  从相册中检索当前图像的数据（到数据库）
2.  以特定间隔轮询相册以检查更改
3.  如果存在变化，将相册内容与保存的数据进行比较
4.  下载（到所需位置）尚不存在的图像
5.  更新申请记录（数据库）以反映新项目

重复。

如果需要供个人使用，这可以相当快地生成，并且您不需要一般消费应用程序可能需要的最后润色。

如果这是您决定采取的路线，那么 FB api [Facebook Developers](http://developers.facebook.com)参考非常完整，以及在 stackoverflow 上可用的信息。

# java - Java ResultSet 转换为我的 Class 类型的数组

> ID：12955707
> 
> 赞同：-4
> 
> 时间：2012-10-18T13:19:42.357
> 
> 标签：java, sql

我正在改写我的问题，因为显然有些人无意中冒犯了（我是 Java 新手）:(

我正在连接到一个 DB2 数据库——结果集包含表 V_LVCS 中的前 10 行。

我希望做到这一点！

```
while (rs.next())
{ keys[i] = new V_LVCS();
   keys[i] = this_Row_Object;
} 
```

我在一组 V_LVCS 对象之后。目前我正在将每个数据行转换为 V_LVCS 对象，如下所示，但我认为有更好更快的方法来执行此操作。

```
 public class V_LVCS {

    public String SERIAL;
        public String TRANSFORMERID;
        public String LVT;

        public V_LVCS() {

        }

        public V_LVCS(String Serial, String Transformerid, String lvt) {
            this.SERIAL = Serial;
            this.TRANSFORMERID = Transformerid;
            this.LVT = lvt;
        }

        public V_LVCS[] getAllV_LVC() {
            try {
                Connection conn = getAMMDBConnection();

                Statement stmt = conn.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE, ResultSet.CONCUR_READ_ONLY);
                ResultSet rs;
                rs = stmt.executeQuery("SELECT * FROM V_LVC FETCH FIRST 10 ROWS ONLY");
                rs.last();
                int numRows = rs.getRow();
                V_LVCS[] keys = new V_LVCS[numRows];
                rs.beforeFirst();
                int i = 0;
                while (rs.next()) {

keys[i] = new V_LVCS();
                    keys[i].SERIAL = (rs.getString("SERIAL") == null) ? "" : rs.getString("SERIAL");
                    keys[i].LVT = (rs.getString("LVT") == null) ? "" : rs.getString("LVT");
                    keys[i].TRANSFORMERID = (rs.getString("TRANSFORMERID") == null) ? "" : rs.getString("TRANSFORMERID");
                    ++i;
                }
                conn.close();
                System.out.println("stop!");
                return keys;
            } catch (Exception e) {
                System.err.println("Got an exception! ");
                // System.err.println(e.printStackTrace());
                StringWriter sw = new StringWriter();
                e.printStackTrace(new PrintWriter(sw));
                return null;
            }
        }
    } 
```

我真的很感激你的想法！（并希望在受到 -ve 分数的惩罚之前能坚持几个小时！）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:27:01.533

您只需要更改循环以调用构造函数，而不是尝试分配给字段：

```
while ( rs.next() ) {           
    String serial = ( rs.getString("SERIAL") == null)?"":rs.getString("SERIAL") ; 
    String lvt = ( rs.getString("LVT") == null)?"":rs.getString("LVT");
    String id = ( rs.getString("TRANSFORMERID") == null)?"":rs.getString("TRANSFORMERID") ;
    keys[i] = new V_LVCS(serial, id, lvt);
    ++i;
} 
```

请特别注意这一行：

```
V_LVCS [] keys = new V_LVCS[numRows]; 
```

创建一个对 的引用数组`V_LVCS`，*所有这些都是* `null`. 在取消引用该元素之前，您需要为每个元素分配一些东西。

# java - TraceClassloading 显示的已加载类中的重复项

> ID：12955711
> 
> 赞同：4
> 
> 时间：2012-10-18T13:19:57.570
> 
> 标签：java, out-of-memory, permgen, jvisualvm

为了在我们的 Tomcat tomcat-6.0.28 开发环境中跟踪永久空间 OOM，我们添加了 TraceClassloading、TraceClassUnloading 和 JMX 监控。服务器有三个 web 应用程序（devapp1、2、3），它们具有几乎相同的框架和库（Spring、Hibernate、Axis 等）。我希望每个应用程序的每个类都只加载一次，但是 traceclassloading 日志显示每个 webapp 加载两次相同的类。

示例（实际日志条目随着时间的推移而分散，为清楚起见将它们组合在一起）

```
[Loaded org.springframework.aop.framework.AdvisorChainFactory from file:/appl/devapp/tomcat/server/devapp/webapps/devapp3/WEB-INF/lib/spring-aop-3.0.6.RELEASE.jar]
[Loaded org.springframework.aop.framework.AdvisorChainFactory from file:/appl/devapp/tomcat/server/devapp/webapps/devapp3/WEB-INF/lib/spring-aop-3.0.6.RELEASE.jar]
[Loaded org.springframework.aop.framework.AdvisorChainFactory from file:/appl/devapp/tomcat/server/devapp/webapps/devapp2/WEB-INF/lib/spring-aop-3.0.6.RELEASE.jar]
[Loaded org.springframework.aop.framework.AdvisorChainFactory from file:/appl/devapp/tomcat/server/devapp/webapps/devapp2/WEB-INF/lib/spring-aop-3.0.6.RELEASE.jar]
[Loaded org.springframework.aop.framework.AdvisorChainFactory from 
file:/appl/devapp/tomcat/server/devapp/webapps/devapp1/WEB-INF/lib/spring-aop-3.0.6.RELEASE.jar]
[Loaded org.springframework.aop.framework.AdvisorChainFactory from 
file:/appl/devapp/tomcat/server/devapp/webapps/devapp1/WEB-INF/lib/spring-aop-3.0.6.RELEASE.jar] 
```

但是，JVisualVM“总加载”计数似乎接近计算值（~18700），并且不显示重复。MaxPermSize 设置为 128M，现在在服务器运行一天后徘徊在 119M 左右。请让我知道什么可能导致 TraceClassLoading 和 JVisualVM 计数之间的这种差异，以及如何确认占用的 permgen 空间是否包含重复项？

# playframework-2.0 - 如何在play 2.0中通过ajax函数传递一个值

> ID：12955712
> 
> 赞同：2
> 
> 时间：2012-10-18T13:19:58.057
> 
> 标签：playframework-2.0

如何通过 Play 2.0 中的 Ajax 函数传递值？

对于`@routes.Content.editExam()?examid="+tid`我得到的网址：

```
not enough arguments for method editExam: (examid: Long)play.api.mvc.Call. Unspecified value parameter examid. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-01T10:01:48.133

Play 生成反向路由以要求查询参数作为方法参数。在这种情况下，您可能需要做的就是将变量传递给它。您不需要构造查询参数字符串。

解决方案是：

```
@routes.Content.editExam(tid) 
```

# sql - 如何使用子查询修改 SQL 查询以获得额外的列

> ID：12955714
> 
> 赞同：0
> 
> 时间：2012-10-18T13:20:04.340
> 
> 标签：sql, sql-server-2008

我正在尝试修改用户查询，以便从以下 SQL 查询中返回一个额外的列 INV1.WhsCode：

```
SELECT  T0.CardCode,
        T2.CardName,
        T0.CodeBars,
        T0.ItemCode,
        T0.ItemName,
        T3.Price AS [POS Price],
        T1.AvgPrice,
        T1.OnHand,
        T1.MinStock,
        T1.MaxStock,
        T0.NumInBuy AS Packsize,
        T0.LstSalDate,
        (
            SELECT SUM(Quantity) AS Expr1
            FROM dbo.INV1
            INNER JOIN OINV
                    ON INV1.DocEntry = OINV.DocEntry
            WHERE INV1.ItemCode = T0.ItemCode
                    AND INV1.WhsCode = [%2]
                    AND Month(OINV.DocDate) = month(GetDate())
        ) AS [Current Period],
        (
            SELECT SUM(Quantity) AS Expr1
            FROM dbo.INV1
            INNER JOIN OINV
                    ON INV1.DocEntry = OINV.DocEntry
            WHERE INV1.ItemCode = T0.ItemCode
                    AND INV1.WhsCode = [%2]
                    AND Month(OINV.DocDate) = month(GetDate()) - 1
        ) AS [Previous Period],
        (
            SELECT SUM(Quantity) AS Expr1
            FROM dbo.INV1
            INNER JOIN OINV
                    ON INV1.DocEntry = OINV.DocEntry
            WHERE INV1.ItemCode = T0.ItemCode
                    AND INV1.WhsCode = [%2]
                    AND Month(OINV.DocDate) = month(GetDate()) - 2
        ) AS [60-90],
        (
            SELECT TOP 1 OPDN.DocDate AS Expr1
            FROM dbo.PDN1
            INNER JOIN OPDN
                    ON PDN1.DocEntry = OPDN.DocEntry
            WHERE PDN1.ItemCode = T0.ItemCode
            ORDER BY OPDN.DocDate DESC
        ) AS LastGRNDate
FROM    OITM T0
        INNER JOIN OITW T1
            ON T0.ItemCode = T1.ItemCode
        INNER JOIN OCRD T2
            ON T0.CardCode = T2.CardCode
        INNER JOIN ITM1 T3
            ON T0.ItemCode = T3.ItemCode
        INNER JOIN OWHS T4
            ON T1.WhsCode = T4.WhsCode
        INNER JOIN OITB T5
            ON T0.ItmsGrpCod = T5.ItmsGrpCod
WHERE   T3.PriceList = '3'
        AND T4.WhsName = [%0]
        AND T5.ItmsGrpNam = [%1] 
```

我如何实现这一目标？（微软 SQL 服务器 2008）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:38:53.393

您的所有子查询在 where 子句中包含以下内容：INV1.WhsCode = [%2]

这意味着您可以像这样返回 [%2] 而不是 INV1.WhsCode：

```
SELECT  [%2] as WhsCode,
        T0.CardCode,
        T2.CardName,
        T0.CodeBars,
...... 
```

这假定 [%2] 和其他类似的令牌被应用程序替换为 SQL Server 理解的东西，然后再发送以执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:43:42.363

我知道您的查询有很多错误/效率低下的问题，但我还是会回答，因为这将有助于回答您提出的问题。

您需要尽可能避免相关子查询，有时它们是不可避免的，也是最好的解决方案，但是我经常在 JOIN 可以完成相同工作并且优化器会更好地处理 join 的地方看到它们。例如，您有：

```
SELECT  (
            SELECT TOP 1 OPDN.DocDate AS Expr1
            FROM dbo.PDN1
            INNER JOIN OPDN
                    ON PDN1.DocEntry = OPDN.DocEntry
            WHERE PDN1.ItemCode = T0.ItemCode
            ORDER BY OPDN.DocDate DESC
        ) AS LastGRNDate
FROM    OITM T0 
```

这会评估每一行的子查询，而如果您这样重写：

```
SELECT  LastGRN.LastGRNDate
FROM    OITM TO
        LEFT JOIN
        (   SELECT  PDN1.ItemCode, [LastGRNDate] = MAX(OPDN.DocDate)
            FROM    dbo.PDN1
                    INNER JOIN OPDN
                        ON PDN1.DocEntry = OPDN.DocEntry
            GROUP BY PDN1.ItemCode
        ) LastGRN
            ON LastGRN.ItemCode = T0.ItemCode 
```

您会得到相同的结果，但会以更有效的方式进行评估。

下一个错误是你的使用方法`MONTH(GETDATE())`- 1 得到 2 个月前。在 1 月份，这将评估为 0 并且没有匹配项。最好的方法是使用类似于他的方法将每个日期转换为每个月的第一天：

```
SELECT  [FirstOfThisMonth] = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE()), 0),
        [FirstOfLastMonth] = DATEADD(MONTH, DATEDIFF(MONTH, 0, GETDATE() - 1), 0) 
```

连接而不是相关子查询的相同原则也可以应用于您的数量列，这可以访问`WhsCode`列，这不是必需的，但我使用了一个公共表表达式来清理查询（使用来自的日期逻辑多于）

```
WITH Quantities AS
(   SELECT  [DocMonth] = DATEADD(MONTH, DATEDIFF(MONTH, 0, IONV.DocDate),
            Inv1.WhsCode,
            ItemCode,
            [Quantity] = SUM(Quantity)
    FROM    dbo.Inv1
            INNER JOIN OINV
                ON Inv1.DocEntry = OINV.DocEntry
    GROUP BY DATEADD(MONTH, DATEDIFF(MONTH, 0, IONV.DocDate), WhsCode, itemCode
)
SELECT  T0.ItemCode,
        [Current Period] = COALESCE(Cur.Quantity, 0),
        [Previous Period] = COALESCE(prev.Quantity, 0),
        [60-90] = COALESCE(prev2.Quantity, 0)
FROM    OITM T0
        LEFT JOIN Quantities cur
            ON cur.ItemCode = T0.ItemCode
            AND cur.DocDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP), 0)
            AND Cur.WhsCode = [%2]
        LEFT JOIN Quantities prev
            ON prev.ItemCode = T0.ItemCode
            AND prev.DocDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - 1, 0)
            AND prev.WhsCode = [%2]
        LEFT JOIN Quantities prev2
            ON prev2.ItemCode = T0.ItemCode
            AND prev2.DocDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - 2, 0)
            AND prev2.WhsCode = [%2] 
```

将所有这些结合到您的最终查询中给出：

```
SELECT  T0.CardCode,
        T2.CardName,
        T0.CodeBars,
        T0.ItemCode,
        T0.ItemName,
        T3.Price,
        T1.AvgPrice,
        T1.OnHand,
        T1.MinStock,
        T1.MaxStock,
        T0.NumInBuy AS Packsize,
        T0.LstSalDate
        [Current Period] = COALESCE(Cur.Quantity, 0),
        [Previous Period] = COALESCE(prev.Quantity, 0),
        [60-90] = COALESCE(prev2.Quantity, 0)
        LastGRN.LastGRNDate
FROM    OITM T0
        INNER JOIN OITW T1
            ON T0.ItemCode = T1.ItemCode
        INNER JOIN OCRD T2
            ON T0.CardCode = T2.CardCode
        INNER JOIN ITM1 T3
            ON T0.ItemCode = T3.ItemCode
        INNER JOIN OWHS T4
            ON T1.WhsCode = T4.WhsCode
        INNER JOIN OITB T5
            ON T0.ItmsGrpCod = T5.ItmsGrpCod
        LEFT JOIN Quantities cur
            ON cur.ItemCode = T0.ItemCode
            AND cur.DocDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP), 0)
            AND Cur.WhsCode = [%2]
        LEFT JOIN Quantities prev
            ON prev.ItemCode = T0.ItemCode
            AND prev.DocDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - 1, 0)
            AND prev.WhsCode = [%2]
        LEFT JOIN Quantities prev2
            ON prev2.ItemCode = T0.ItemCode
            AND prev2.DocDate = DATEADD(MONTH, DATEDIFF(MONTH, 0, CURRENT_TIMESTAMP) - 2, 0)
            AND prev2.WhsCode = [%2]
        LEFT JOIN
        (   SELECT  PDN1.ItemCode, [LastGRNDate] = MAX(OPDN.DocDate)
            FROM    dbo.PDN1
                    INNER JOIN OPDN
                        ON PDN1.DocEntry = OPDN.DocEntry
            GROUP BY PDN1.ItemCode
        ) LastGRN
            ON LastGRN.ItemCode = T0.ItemCode
WHERE   T3.PriceList = '3'
AND     T4.WhsName = [%0]
AND     T5.ItmsGrpNam = [%1] 
```

这一切都未经测试，因此可能存在一些拼写错误/轻微的语法错误，但仍应适用相同的原则。

如果您仍然坚持相关子查询的想法，您可以使用`APPLY`它允许您从中访问多个列。例如

```
SELECT  T0.Code, cur.WhsCode, cur.Expr1 AS [Current Period]
FROM    OITM T0
        OUTER APPLY
        (   SELECT  INV1.WhsCode, SUM(Quantity) AS Expr1
            FROM    dbo.INV1
                    INNER JOIN OINV
                        ON INV1.DocEntry = OINV.DocEntry
            WHERE   INV1.ItemCode = T0.ItemCode
            AND     INV1.WhsCode = [%2]
            AND     MONTH(OINV.DocDate) = MONTH(GETDATE())
        ) cur 
```

# twitter-bootstrap - Twitter Bootstrap：如何打印与屏幕相同的缩略图？

> ID：12955718
> 
> 赞同：3
> 
> 时间：2012-10-18T13:20:27.883
> 
> 标签：twitter-bootstrap, twitter-bootstrap-rails

我想打印与屏幕相同的 Twitter Bootstrap 缩略图，但它们水平扩展并且背景颜色变为黑色。我在 Mac 上使用 Twitter Bootstrap 2.1.1(twitter-bootstrap-rails 2.1.3) 和 Chrome。

我的问题在此页面上重现：

[http://twitter.github.com/bootstrap/components.html#thumbnails](http://twitter.github.com/bootstrap/components.html#thumbnails)

这里以截图为例。

![在此处输入图像描述](../Images/1712fc364167e6187ac26382e9c8d7a2.png)

![在此处输入图像描述](../Images/f25bfe67262aa9c0b284a15c1330dc28.png)

我将不胜感激任何帮助。

## 更新

感谢zeMicro的回答，这个问题得到了解决。如果您使用的是 twitter-bootstrap-rails，则可以`responsive.css`通过编辑删除`bootstrap_and_overrides.less`.

您可以通过在 css 文件中指定它来更改背景颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:48:32.240

那是因为引导程序的响应式设计。以下行很重要：

```
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet"> 
```

将其更改为

```
<link href="assets/css/bootstrap-responsive.css" rel="stylesheet" media="screen"> 
```

然后在打印时忽略响应式样式表。

# real-time - 我可以构建什么应用程序来对多用户环境中的实时通信进行压力测试？

> ID：12955719
> 
> 赞同：1
> 
> 时间：2012-10-18T13:20:29.273
> 
> 标签：real-time

作为CS学位第5学期的主要项目，我正在研究在多用户环境中实现实时server2client通信的技术。决定因素是：
**1\. 性能
2\. 可扩展性**
3\. 易于实施
4\. 可移植性
5\. 架构灵活性
6\. 社区支持
7\. 许可费用

现在，我可以使用我分析的每种技术构建一个聊天应用程序，并获得它结束。问题是我认为这样的应用程序甚至不会远程达到某种技术的极限。

所以我的问题是：我可以构建什么样的原型应用程序来对性能和可扩展性进行良好的测试？

如果有帮助的话，我要测试的技术是：SignalR、Pusher、Pubnub、LightStreamer。

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:41:02.303

不是“流行”的答案，尽管：

我的经验告诉我，每一个案例都是特殊的。
没有`prototype application`那个，除了`generic tools`like [ab](http://httpd.apache.org/docs/2.2/programs/ab.html)（在某种程度上通用，呃）。

对于每个测试，您只需获得正确的“成分”。

# java - XMLStreamException when writing a XML file

> ID：12955720
> 
> 赞同：1
> 
> 时间：2012-10-18T13:20:32.267
> 
> 标签：java, stax

Before I was using this code to write an XML file using StAX:

```
 // Create a XMLOutputFactory
 XMLOutputFactory outputFactory = XMLOutputFactory.newInstance();
 // Create XMLEventWriter
 XMLEventWriter eventWriter = outputFactory
        .createXMLEventWriter(new FileOutputStream(behaviorsFilePath));
 // Create a EventFactory
 XMLEventFactory eventFactory = XMLEventFactory.newInstance();
 XMLEvent end = eventFactory.createDTD("\n");
 // Create and write Start Tag
 StartDocument startDocument = eventFactory.createStartDocument();
 eventWriter.add(startDocument);
 eventWriter.add(end);
 eventWriter.add(end);

 // Create config open tag
 StartElement configStartElement = eventFactory.createStartElement("",
          "", ROOT);
//... 
```

This code was working fine but now it throws me an `javax.xml.stream.XMLStreamException: Trying to write multiple DOCTYPE declarations` exception.

When debugging the application, I am able to see that the exception is thrown when I call the second time: `eventWriter.add(end);`

Why this code was working before and now it isn't?

**UPDATE:**

I'm not sure if this is really important but this code is running in a `SwingWorker` thread...

The only modification that I made that could be a problem is that I added libraries to the project to use Axis2 Web Services (one of them is: `geronimo-stax-api_1.0_spec-1.0.1.jar`)... And I saw [this](http://axis.apache.org/axis2/java/core/):

> Speed - Axis2 uses its own object model and StAX (Streaming API for XML) parsing to achieve significantly greater speed than earlier versions of Apache Axis.

And [this](http://axis.apache.org/axis2/java/core/tools/CodegenToolReference.html):

> stax-api-1.0.1.jar (The StAX API's that contain the javax.xml.namespace.QName class. This jar may be replaced by any other jar that contains the javax.xml.namespace.QName implementation. However Axis2 uses this class from the stax-api-1.0.1.jar which comes bundled with the Axis2 distribution)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:38:41.897

Because, like the exception tells you already, you are "`Trying to write multiple DOCTYPE declarations`". Why does your code have `eventWriter.add(end);` twice?

# c# - 使用 ASP.NET MVC 阅读 Yahoo Weather Rss？

> ID：12955724
> 
> 赞同：1
> 
> 时间：2012-10-18T13:20:42.053
> 
> 标签：c#, rss

我想在这里解析雅虎天气 rss 提要 xml：http: [//developer.yahoo.com/weather/](http://developer.yahoo.com/weather/)

我的 Rss 项目

```
public class YahooWeatherRssItem
{
    public string Title { get; set; }
    public string Link { get; set; }
    public string Description { get; set; }
    public string City { get; set; }
    public string Country { get; set; }
    // temp, wind, etc...
} 
```

我的 Rss 经​​理

```
public static IEnumerable<YahooWeatherRssItem> GetYahooWeatherRssItems(string rssUrl)
{
    XDocument rssXml = XDocument.Load(rssUrl);

    var feeds = from feed in rssXml.Descendants("item")
                select new YahooWeatherRssItem
                {
                    I can get following values
                    Title = feed.Element("title").Value,
                    Link = feed.Element("link").Value,
                    Description = feed.Element("description").Value,

                    // I dont know, How can I parse these.
                    Text = ?
                    Temp = ?
                    Code = ?
                };
        return feeds;
    } 
```

我不知道，如何解析以下 xml 行：

```
<yweather:condition  text="Mostly Cloudy"  code="28"  temp="50"  date="Fri, 18 Dec 2009 9:38 am PST" />
<yweather:location city="Sunnyvale" region="CA"   country="United States"/>
<yweather:units temperature="F" distance="mi" pressure="in" speed="mph"/>
<yweather:wind chill="50"   direction="0"   speed="0" />
<yweather:atmosphere humidity="94"  visibility="3"  pressure="30.27"  rising="1" />
<yweather:astronomy sunrise="7:17 am"   sunset="4:52 pm"/> 
```

问题是`yweather:<string>`。可能有一篇关于xml解析这样的结构的文章。还是代码示例？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T14:03:51.793

下面的表达式应该可以工作，首先引用`ycweather`命名空间；

```
XNamespace yWeatherNS = "http://xml.weather.yahoo.com/ns/rss/1.0"; 
```

然后你通过这种方式获得属性值：

```
Text = feed.Element(yWeatherNS + "condition").Attribute("text").Value 
```

问题是您的条件元素位于另一个名称空间中，因此您必须通过[XNamespace](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnamespace.aspx)在该名称空间的上下文中选择此节点。

[您可以通过 MSDN 文章C# 中的命名](http://msdn.microsoft.com/en-us/library/bb387042.aspx)空间来阅读有关 XML 命名空间的更多信息

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T14:06:05.163

使用命名空间并使用获取数据`Attribute`

```
XNamespace ns = "http://xml.weather.yahoo.com/ns/rss/1.0";
var feeds = from feed in rssXml.Descendants("item")
            select new YahooWeatherRssItem
            {

                Title = feed.Element("title").Value,
                Link = feed.Element("link").Value,
                Description = feed.Element("description").Value,
                Code=feed.Element(ns+"condition").Attribute("code").Value       
                //like above line, you can get other items 
            }; 
```

这将起作用。**测试:)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:41:14.453

您需要读取这些值的 XML 属性。根据此处的问题（[Find Elements by Attribute using XDocument](https://stackoverflow.com/questions/2678251/find-elements-by-attribute-using-xdocument)），您可以尝试以下操作：

```
Temp = feed.Attribute("temp"); 
```

# c# - 使用 MonoTouch 反序列化 Protobuf 文件的问题

> ID：12955725
> 
> 赞同：3
> 
> 时间：2012-10-18T13:20:49.740
> 
> 标签：c#, serialization, xamarin.ios, protobuf-net

我们目前面临的问题是，我们想通过使用 MonoTouch 将当前在 Android (Monodroid) 和 Wp7 上运行的应用程序移植到 IOS。

这不是问题，但是使用 protobuf-net 框架反序列化数据会不断失败，并出现以下异常：

```
ProtoBuf.ProtoException: Invalid wire-type; this usually means you have over-written a file without truncating or setting the length; see http://stackoverflow.com/q/2152978/23354
  at ProtoBuf.ProtoReader.StartSubItem (ProtoBuf.ProtoReader reader) [0x00000] in <filename unknown>:0
  at ProtoBuf.BclHelpers.ReadGuid (ProtoBuf.ProtoReader source) [0x00000] in <filename unknown>:0
  at TpSerializer.Read (Application.Mobile.TpDataAccess.TimeEntryLoggingDao.Entities.ActiveTimeEntryDbo , ProtoBuf.ProtoReader ) [0x00000] in <filename unknown>:0
  at TpSerializer.Deserialize (Int32 , System.Object , ProtoBuf.ProtoReader ) [0x00000] in <filename unknown>:0
  at ProtoBuf.Meta.TypeModel.TryDeserializeAuxiliaryType (ProtoBuf.ProtoReader reader, DataFormat format, Int32 tag, System.Type type, System.Object& value, Boolean skipOtherFields, Boolean asListItem, Boolean autoCreate, Boolean insideList) [0x00000] in <filename unknown>:0
  at ProtoBuf.Meta.TypeModel.TryDeserializeList (ProtoBuf.Meta.TypeModel model, ProtoBuf.ProtoReader reader, DataFormat format, Int32 tag, System.Type listType, System.Type itemType, System.Object& value) [0x00000] in <filename unknown>:0
  at ProtoBuf.Meta.TypeModel.TryDeserializeAuxiliaryType (ProtoBuf.ProtoReader reader, DataFormat format, Int32 tag, System.Type type, System.Object& value, Boolean skipOtherFields, Boolean asListItem, Boolean autoCreate, Boolean insideList) [0x00000] in <filename unknown>:0
  at ProtoBuf.Meta.TypeModel.DeserializeCore (ProtoBuf.ProtoReader reader, System.Type type, System.Object value, Boolean noAutoCreate) [0x00000] in <filename unknown>:0
  at ProtoBuf.Meta.TypeModel.Deserialize (System.IO.Stream source, System.Object value, System.Type type, ProtoBuf.SerializationContext context) [0x00000] in <filename unknown>:0
  at ProtoBuf.Meta.TypeModel.Deserialize (System.IO.Stream source, System.Object value, System.Type type) [0x00000] in <filename unknown>:0
  at Application.Mobile.TpDataAccess.Core.CoreProtobufDao`2[System.Guid,Application.Mobile.TpDataAccess.TimeEntryDao.Entities.TimeEntryDbo].EnsureCollection () [0x00000] in <filename unknown>:0
  at Application.Mobile.TpDataAccess.TimeEntryDao.TimeEntryProtobufDao.PrepareAccess () [0x00000] in <filename unknown>:0
  at Application.Mobile.TpBusinessComponents.TimeEntryService.TimeEntryService.PrepareAccess () [0x00000] in <filename unknown>:0
  at App.TP.Mobile.AppDelegate.FinishedLaunching (MonoTouch.UIKit.UIApplication app, MonoTouch.Foundation.NSDictionary options) [0x00031] in /Users/Developer/Dropbox/Application Mobile/Application Mobile iOS Project/Application_Mobile/AppDelegate.cs:34
  at (wrapper managed-to-native) MonoTouch.UIKit.UIApplication:UIApplicationMain (int,string[],intptr,intptr)
  at MonoTouch.UIKit.UIApplication.Main (System.String[] args, System.String principalClassName, System.String delegateClassName) [0x0004c] in /Developer/MonoTouch/Source/monotouch/src/UIKit/UIApplication.cs:38
  at App.TP.Mobile.Application.Main (System.String[] args) [0x00000] in /Users/Developer/Dropbox/Application Mobile/Application Mobile iOS Project/Application_Mobile/Main.cs:17 
```

问题是我们没有改变实体，也没有改变我们存储数据的方式。

```
// and serialize
string file = Path.Combine(StoragePath, dataFileName);
using (var stm = new FileStream(file, FileMode.Create))
{
    foreach (var item in list)
        Serializer.Serialize(stm, item);
} 
```

不管我们读取哪个实体，它都会失败：

```
string file = Path.Combine(StoragePath, dataFileName);
if (!File.Exists(file))
    return;

using (var stm = new FileStream(file, FileMode.Open))
{
    var list = (TClass[]) Serializer.Deserialize(stm, null, typeof(TClass[]));
    if (list == null)
        return;

    // transform array into dictionary
    for (int i = 0; i < list.Length; i++)
    {
        var entity = list[i];
        entities[primaryKeyFunction(entity)] = entity;
    }
} 
```

我们正在使用以下 Protobuf-NET 环境。

*   Protobuf-net r594（统一 dll）
*   预先创建的序列化程序

保存数据不是问题，但加载失败。非常感谢任何帮助。

谢谢 - 格哈德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:33:16.403

很简单的一个。您已序列化为`Foo`和反序列化为`Foo[]`。实际上，因为协议缓冲区是一种可附加格式，通过`Serialize`重复使用（到同一个文件），你*实际上*只写了一个`Foo`（但重复地覆盖了大部分成员）。

基本上，要保留您当前的代码，您*可以*使用`SerializeWithLengthPrefix`代替`Serialize`，即

```
foreach(var item in list)
{
    Serializer.SerializeWithLengthPrefix(stm, item,
        PrefixStyle.Base128, Serializer.ListItemTag);
} 
```

但也可以简单地使用：

```
Serializer.Serialize(stm, list); 
```

它们在语义上是相同的；在这两种情况下，你得到的是（以密集的二进制形式）：

```
[field 1, string]
[payload length of item 0]
[payload of item 0]
[field 1, string]
[payload length of item 1]
[payload of item 1]
...
[field 1, string]
[payload length of item n]
[payload of item n] 
```

这*正是*你`Deserialize`告诉它时正在寻找的东西`TClass[]`

# javascript - Coda Slider 在动画期间不显示图像

> ID：12955733
> 
> 赞同：0
> 
> 时间：2012-10-18T13:21:06.063
> 
> 标签：javascript, wordpress, conflict, coda-slider

我有一个 Coda Slider 正在从帖子中检索数据，但是现在我已经在该站点上安装了其他插件，它开始在转换发生时无法显示图像。

[http://poesis.savvy-studio.net/](http://poesis.savvy-studio.net/)

我知道这可能是 javascript 冲突，但我不知道从哪里开始，希望你们知道从哪里开始。

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:26:09.843

首先你需要确定哪个插件有冲突，这只是一个试错过程，一次删除一个，直到你得到结果。

我将假设您此时没有收到任何控制台错误，因此您可以做的最好的事情是确定插件，然后查找更具体的信息。目前你的问题非常模糊......

# php - $_GET['_t'] 是什么意思

> ID：12955734
> 
> 赞同：-6
> 
> 时间：2012-10-18T13:21:07.483
> 
> 标签：php

是否有某种类型的数据作为 传递`_t`？我在一些代码中看到了很多，但无法弄清楚它的含义

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:23:32.080

没有。只是`$_GET[]`数组的常规键。

此外，这`'_t'`可能来自 http 查询字符串或提交为`GET`. 可能想要梳理您的 HTML 以获取其含义的线索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:22:50.290

这意味着有人将 get 变量设置`_t`为某物，而您正在获得它的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:28:08.203

[`_GET`](http://www.php.net/manual/en/reserved.variables.get.php)实际上是一个预定义的键值对关联数组，由 HTTP GET 请求*动态*填充。如果在请求中没有向您的 Web 服务器传递任何参数，则`GET`此数组将为空。`_t`大概是在请求中传递给服务它的脚本的键。就这样

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-10-18T13:23:14.457

没有特殊含义`_t`- 它只是`input`HTML 中 s 的名称。将提交给 PHP 的 HTML 表单与处理代码进行比较：如果代码相当正确，那么您将在 PHP 中看到对`input`HTML 中每个 s 的引用。

虽然最有可能来自 HTML，但数组中的这个元素也有可能只是在 PHP 中单独设置`$_GET['_t'] = "some value";`

# php - htaccess AddHandler ***x-httpd-php5x*** 和 ***application/x-httpd-php5x***

> ID：12955741
> 
> 赞同：4
> 
> 时间：2012-10-18T13:21:24.577
> 
> 标签：php, .htaccess, addhandler

`x-httpd-php5x`和有什么区别`application/x-httpd-php5x`

在他们将 PHP 升级到版本>=5.2 之前，我一直在使用我的网络托管 ( **Linux**`application/x-httpd-php` )多年。现在我必须使用在 localhost ( **Windows** )上不起作用的网络托管。**`x-httpd-php5x`**

 ****因此，每次我对 .htaccess 进行一些更改时，我都必须在上传到虚拟主机时更改 AddHandler。

是否有跨平台`AddHandler`将文件解析为 PHP？

# 编辑

.php 始终可以工作，无论是否在 .htaccess 中指定。但不是自定义扩展，例如 .myphp

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-19T20:17:58.803

媒体类型`application/x-httpd-php5`是专门为 PHP 5.0、`application/x-httpd-php51`PHP 5.1、`application/x-httpd-php52`PHP 5.2 等引入的……

换句话说：它们之间的区别在于它们所指的 PHP 版本。

`application/x-httpd-php`有点过时了，因为它并没有真正引用任何版本。在 PHP 的早期这很好，但随着版本数量的增加，需要更具体的东西。
现在大多数网络主机都支持多个版本的 PHP，并且他们的网络服务器使用媒体类型将正确的文件传递给正确的 PHP 解释器。

如果您的本地开发机器安装了 PHP 5.1 或更低版本，这可能是它不支持 PHP 5.2 及更高版本的媒体类型的原因。

有点题外话：如果您安装了 PHP 5.2 或更低版本，我建议您升级到 PHP 5.3 或更高版本。在撰写本文时，所有低于 5.3 的版本均已弃用。****

# android - 如何创建 3 个连接的按钮？

> ID：12955746
> 
> 赞同：1
> 
> 时间：2012-10-18T13:22:04.433
> 
> 标签：android, android-layout, button

我们正在使用 eclipse 开发一个 android 应用程序，我们只是想创建 3 个相互连接的按钮。这是 MyActivity .xml ，看起来像这样，但是我们想做按钮需要没有空格的按钮。

```
 <Button
        android:id="@+id/button1
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="0dp"
        android:layout_marginLeft="0dp"
        android:text="Button" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="0dp"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Button" /> 
```

这是图像

![有效的 XHTML](../Images/c752a39fa0495c28be0b969b2f1d1169.png).

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:24:58.540

您可以为此设置边距。

```
<Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/button1"
        android:layout_alignBottom="@+id/button1"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="-10dp"
        android:text="Button" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentRight="true"
        android:text="Button" /> 
```

设置负边距并检查您的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:26:31.377

使用带有内部按钮的 LinearLayout。

```
<LinearLayout
     <Button/>
     <Button/>
     <Button/>
/> 
```

然后，您可以根据需要对齐 LinearLayout（中心，右侧，左侧，...）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:36:26.967

`android:layout_weight="1"`在每个按钮中都这样使用

```
 <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button1" />

    <Button
        android:id="@+id/button2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button2" />

    <Button
        android:id="@+id/button3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1"
        android:text="Button3" />
</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T13:28:16.983

使用 RelativeLayout 并将其居中，然后在 RelativeLayout 内部，创建 3 个按钮（button1、button2、button3）并赋予它们以下属性：
1- button1
alignParentLeft=true ，tototheLeftOf=button2
2- button2 ：
toTHeRightOf=button1 ，totheLeftOf=button3
3 - button3：
totheRightOf = button2，alignparentRight = true。

希望那有帮助

# c# - 如何使用 Silverlight 实现 WCF，同时支持 ASP.NET 会话状态和 SSL？

> ID：12955748
> 
> 赞同：0
> 
> 时间：2012-10-18T13:22:02.800
> 
> 标签：c#, wcf, ssl, session-state

我们有一个使用旧 Web 服务的 Silverlight Intranet 应用程序，我的任务是添加对 SSL 的支持。为此，我计划放弃旧的 Web 服务并用新的 WCF 服务替换它们。

我还需要摆脱旧的 Web 引用并动态构建代理（因为端点会有所不同），并发现这篇有用的文章概述了如何构建动态代理[http://sonyarouje.com/2010/10/ 01/proxy-less-silverlight-wcf-communication](http://sonyarouje.com/2010/10/01/proxy-less-silverlight-wcf-communication)。

我现在有这个工作（虽然我现在需要弄清楚如何调用一个有参数的方法）但我刚刚发现（a）Silverlight 只支持 BasicHttpBinding（即不支持 ws），并且（b）BasicHttpBinding 不支持会话状态。

我们的应用程序当前使用会话通过我们的单例数据访问层来跟踪和排队请求。目前我唯一能想到的就是编写我自己的会话实现——但我想知道是否有更好的解决方案我错过了，因此这篇文章。

所以基本上，是否有支持 Silverlight、WCF、会话状态和 SSL 的“最佳实践”方法，或者我是否可以继续用我自己的等价物替换会话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T18:09:58.517

我认为您已将 WCF 会话与 ASP.NET 会话混合在一​​起。WCF 会话和 ASP.NET 会话完全不同。在您的情况下，要在 WCF 服务中启用 ASP.NET 状态，您只需要在服务上启用 ASP.NET 兼容模式，

请找到一个非常好的文龙博客， [http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx](http://blogs.msdn.com/b/wenlong/archive/2006/01/23/516041.aspx)

HTH，阿米特

# ios - UIImagePickerController 大小 iPhone 5

> ID：12955750
> 
> 赞同：1
> 
> 时间：2012-10-18T13:22:08.727
> 
> 标签：ios, ipad, uiimagepickercontroller, iphone-5, camera-overlay

我正在使用 UIImagePickerController 和自定义 Overlay 构建一个应用程序。iPhone 5 的屏幕尺寸增加了 88 点，但相机视口尺寸保持大致相同，我想知道人们是如何解决这个问题的？我真的反对硬编码值或根据屏幕高度做出假设，特别是有传言称苹果将在下周发布另一款具有另一组屏幕尺寸的设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:42:00.493

不幸的是，这是一个私有的视图控制器，你真的不能安全地调查它来看看到底发生了什么。我已经确定工具栏已经从大约 54 像素变为大约 92 像素，但是硬编码这样的东西可能有一天会咬你。

我最终使用 AVFoundation 滚动了我自己的相机……这可以完全控制预览视图的比例和位置，以及您想要放在它上面的任何叠加层。

您可以下载像 SquareCam 这样的 Apple 示例，它将为您提供所需的大部分内容，并完全放弃 UIImagePickerController。

# jquery - 如何将表单数据（对象）数组作为json发送

> ID：12955753
> 
> 赞同：0
> 
> 时间：2012-10-18T13:22:14.730
> 
> 标签：jquery, json

在[JSFiddle](http://jsfiddle.net/Tribhuwan/Mv9MY/11/) 中，我给出了一个示例，我正在尝试获取 JSON 数据，但并不如预期。

```
{"txtTitle":["Tribhuwan","Pankaj"],"txtName":["Dewangan","Sharma"]
,"seGender":["Male","Male"]} 
```

我想要这个数据`{[{"txtTitle":"Tribhuwan","txtName":"Dewangan","seGender":"Male"}, {"txtTitle":"Pankaj","txtName":"Sharma","seGender":"Male"}]}` 提前谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:58:59.740

```
JSONObject myjson ;
JSONArray the_json_array;
StringBuilder builder = ... your jason content by buffer .....
            String a = "{child:"+builder.toString()+"}";
            myjson = new JSONObject(a);
            the_json_array = myjson.getJSONArray("child");
            int size = the_json_array.length();
            ArrayList<JSONObject> arrays = new ArrayList<JSONObject>();
            for (int i = 0; i < size; i++) {
                JSONObject another_json_object =  the_json_array.getJSONObject(i);
                    arrays.add(another_json_object);
            }
        } catch (ClientProtocolException e) {
            System.out.println("ClientProtocolException :"+e);
            e.printStackTrace();
        } catch (IOException e) {
            System.out.println("IOException :"+e);
            e.printStackTrace();
        } catch (JSONException e) {
            System.out.println("JSONException :"+e);
            e.printStackTrace();
        }
        return arrays; 
```

我只是希望这对你有用，对我有点帮助，我通过 httppost 客户端响应获得了我的 Sontent，存储在 builder 变量中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:12:51.717

您想要的输出[无效](http://jsonlint.com/)

如果你能忍受一个输出

```
[{"txtTitle":"Tribhuwan","txtName":"Pankaj","seGender":"Male"},{"txtTitle":"Dewangan","txtName":"Sharma","seGender":"Male"}] 
```

[然后链接示例](http://jsfiddle.net/Tribhuwan/Mv9MY/11/)中的这个 serializeObject 方法可以工作

```
$.fn.serializeObject = function() {
    var o = [];
    var a = this.serializeArray();
    var t = {};
    $.each(a, function() {

        if(t[this.name] !== undefined){
            o.push(t);
            t = {};
        }

        t[this.name] = this.value;        
    });
    o.push(t);
    return o;
}; 
```

# mysql - codeigniter 计数 / 分组依据

> ID：12955755
> 
> 赞同：0
> 
> 时间：2012-10-18T13:22:23.903
> 
> 标签：mysql, sql, codeigniter, group-by

我的数据库中有一个表`ANKETADATA`，其中包含一个列`PROVO`。我想要这样的输出：

`povremeno : 15`. （数字显示在 PRVO 列中找到该行的次数） `nikad : 40`。

模型：

```
$anketadb = $this->load->database('anketa',TRUE);

    $anketadb->select('prvo');
    $anketadb->from('anketadata');
    $anketadb->group_by('prvo');
$result =   $anketadb->get();

$result =   $result->result_array();

$count  =   array('povremeno' => 0, 'nikad' => 0, 'svakibroj' => 0, 'prodajemkupujem' => 0);

foreach($result as $row){
    switch($row){
        case 'povremeno' :  $count['povremeno']++; break;
        case 'nikad' : $count['nikad']++; break;
        case 'svakibroj' :  $count['svakibroj']++; break;
        case 'prodajemkupujem' : $count['prodajemkupujem']++; break;
    }
}
return $count; 
```

控制器：

```
$this->load->model('anketerezultati_model');
    $data['count'] = $this->anketerezultati_model->prvo();
    $this->load->view('ankete/rezultatiankete', $data); 
```

看法：

```
echo "povremeno".$count['povremeno'];
echo "nikad".$count['nikad']; 
```

两者的结果都是 0。我找不到错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:50:35.043

使用这样的 SQL 查询执行此操作会不会更快：

```
SELECT COUNT(*) as `count`, `prvo` FROM `anketadata` GROUP BY `prvo` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:27:07.073

摆脱这个：

```
$anketadb->group_by('prvo'); 
```

你的前锋：

```
foreach($result as $row){
   $val = $row['prvo'];
   $count[$val]++;
} 
```

# javascript - 从 XML 中获取 url 并制作 Javascript 超链接

> ID：12955758
> 
> 赞同：0
> 
> 时间：2012-10-18T13:22:36.580
> 
> 标签：javascript, jquery, xml, hyperlink, jquery-events

我有一项任务需要完成面试，但我遇到了一个烦人的部分。我必须创建一个在首页上一次显示 8 张图片的作品集网站。这些图像需要是超链接。

我需要的所有数据（图像位置、url、标题等）都存储在一个 XML 文件中。我已经获得了所有这些数据，并成功创建了一个分页 Javascript 动画，该动画在一个页面上显示 8 个图像及其相关标题。

我正在努力做的是将图像制作成超链接，我确信答案正盯着我看，但每次我尝试添加超链接时，它要么停止显示图像，要么显示图像，但会破坏分页和动画。

我在下面包含了 HTML、JS 和 CSS，显然我没有附加 XML，你将看不到任何东西。我希望有些人会知道如何做到这一点！

让我知道是否需要 XML..

[http://jsfiddle.net/gFg56/1/](http://jsfiddle.net/gFg56/1/) `-`代码

首页上的图像意味着什么：

[![在此处输入图像描述](../Images/200fddc1a1c745b2d4b73f4fa70cbcec.png)](https://i.stack.imgur.com/Ibh67.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T21:55:54.453

图像真的需要超链接还是只是表现得像它们？这里的问题不是基于这样一个事实，即您必须阻止超链接的默认行为，以便您可以处理 JavaScript 中的呈现，并可能使用 JavaScript 导航到链接的 URL？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:49:20.687

这应该工作

```
$('#portfolio-item').append('<li><a href="' + url + '"><img src="' + image + '" alt="' + title + '"></a></li>'); 
```

如果没有，你可以发布你得到的错误吗？

再见

# javascript - 任何 Javascript toString() 来发出 JSON？

> ID：12955760
> 
> 赞同：2
> 
> 时间：2012-10-18T13:22:44.363
> 
> 标签：javascript, json

我在 Rhino 中使用 Javacript 并且无法导入外部文件（但我确实可以访问 java.lang 和 java.util），所以我正在寻找一个 toString() 来发出它所在对象的 JSON。

```
MyOjbect.prototype.toString = function() {  /* magically emits JSON of MyObject */ } 
```

我不介意从头开始写这个，但如果它已经存在，它会节省一些时间。这仅用于调试转储以记录自定义对象。

编辑：旧版本的犀牛，更新不是一个选项。没有字符串化（）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:24:29.667

你试过[`JSON.stringify()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/JSON/stringify)吗？它应该存在，即使在 Rhino 中也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:24:47.310

JSON.stringify(MyObject) 应该可以解决问题。如果你没有这个功能，在interwebs中寻找json2.js

链接：[https ://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

如果你想把它放在你的对象中，你可以添加一个这样的函数：

```
MyObject.prototype.toString= function () {
    return JSON.stringify(this);
} 
```

通过这样做，您可以构建对象的子集并将其字符串化，而不是对象原型本身：

```
MyObject.prototype.toString = function () {
    var subset = {
    ...
    }
    return JSON.stringify(subset);
} 
```

[这是一篇关于如何将 .js 文件添加到 rhino 脚本的帖子](https://stackoverflow.com/questions/880533/how-to-load-js-files-into-a-rhino-context-in-java)

从 json[许可证](http://www.json.org/license.html)开始：特此免费授予任何人获得本软件和相关文档文件（“软件”）副本的许可，不受限制地处理本软件，包括但不限于使用权，复制、修改、合并、发布、分发、再许可和/或出售本软件的副本，并允许向其提供本软件的人这样做，但须符合以下条件：

上述版权声明和本许可声明应包含在本软件的所有副本或大部分内容中。

软件应用于善而不是恶。

# c# - 如何在多个列上的 DataSet 的 DataTables 之间定义 DataRelation？

> ID：12955766
> 
> 赞同：3
> 
> 时间：2012-10-18T13:23:00.960
> 
> 标签：c#, datatable, dataset

在我的项目中有两个数据表`dtNames`和`dtDetails`.

我不知道SQL。在这里，我连接到 XML 和文本文件。

**名称**

```
EmpName    EmpRole

   a         2
   b         3
   c         4 
```

**dt详情**

```
 Empid     EmpName   EmpCity   EmpRole

  101        a         abc       3  //EmpRole not equal to above table EmpRole
  102        b         abc       3
  103        c         xyz       4
  104        d         pqr       5
  105        e         rst       6 
```

我想根据`EmpName`and关联这两个数据表`EmpRole`（这里比较`dtNames`）并将结果存储在 DataSet `dsMain`（表来自`dtDetails`）中，然后根据比较像`matchedDataTable`和划分两个数据表`unmatchedDataTable`。

我知道这可以使用[DataRelation](https://stackoverflow.com/q/1014906/1577396)或[RowFilter](https://stackoverflow.com/q/6007872/1577396)来完成，但我不知道如何做到这一点，因为有两列要与我不知道的其他数据表两列进行比较。（我是 .net 的初学者）

我尝试了以下代码：（*不工作*）

```
 DataSet dsMain = new DataSet();
            DataRelation newRelation = new DataRelation("processData"
                , dtNames.Columns["EmpName"], dtDetails.Columns["EmpName"]);
            dsMain.Relations.Add(newRelation); 
```

如您所见，在上面的代码中，我只是将一列与另一列进行比较。如何与两个比较。我很亲近

请协助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:39:35.667

使用接受列数组的构造函数：

```
DataSet dsMain = new DataSet();
DataRelation newRelation = new DataRelation("processData",
    new DataColumn[] { dtNames.Columns["EmpName"], dtNames.Columns["EmpRole"] },
    new DataColumn[] {dtDetails.Columns["EmpName"], dtDetails.Columns["EmpRole"]}
);
dsMain.Relations.Add(newRelation); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T13:37:09.813

你检查了可能的构造函数`DataRelation`吗？

只需传递一个数组`DataColumn`，您就可以组合多个列。像这样：

```
DataRelation newRelation = new DataRelation("test", new DataColumn[] { dt1.Columns[0], dt1.Columns[1] },
                                                    new DataColumn[] { dt2.Columns[0], dt2.Columns[1] }); 
```

# facebook - Facebook Canvas 应用程序 Firefox 水平和垂直滚动条

> ID：12955773
> 
> 赞同：1
> 
> 时间：2012-10-18T13:23:25.960
> 
> 标签：facebook, canvas

我刚刚推出了一个名为 Pazooza (http://apps.facebook.com/pazooza) 的 Facebook 画布应用程序的测试版，但我无法摆脱 Firefox 中的水平和垂直滚动条。在我的应用程序设置中，画布宽度设置为 760 像素，画布高度设置为流畅。是否有人有他们使用过的 canvas html 模板，我可以尝试在我的网站上工作，而 firefox 不显示水平和垂直滚动条？我的包含所有其他内容的主 html 表设置为 740 像素，所以我看不出这如何破坏水平滚动条的额外宽度。

任何帮助或建议将不胜感激。

# java - Ini4J 更改我的整个 INI 文件而不是 1 键设置

> ID：12955776
> 
> 赞同：3
> 
> 时间：2012-10-18T13:23:31.927
> 
> 标签：java, configuration, ini4j

我正在编写一个 Java 应用程序，我只需要它来更改 ini 文件中的一个键设置。我正在使用 ini4j 来执行此操作，但在加载文件时遇到了一些问题。

该文件如下所示：

```
[SECTION 1]
#Some Commented text
Key1=value 1 for key 1
+value 2 for key 1
+value 3 for key 1

Key2=value for key 2<BR>
Key3=value for key 3<BR> 
```

发生的事情是，当我的应用程序更改一个设置（例如键 3）时，它会更改整个文件，我会在下面得到我所拥有的：

```
[SECTION 1]
#Some Commented text
Key1=value 1 for key 1
+value 2 for key 1=
+value 3 for key 1=

Key2=value for key 2
Key3=new value 1 for key 3
+new value 2 for key 3 
```

请注意，ini4j 将我在新行上的多值键识别为键设置并`=`在其末尾放置一个符号，并将所有注释从`;`to更改`#`（这不应该引起问题，但宁愿除了键之外别无其他我指定更改）。

当我使用下面的代码片段加载 ini 文件时，我能够隔离发生的问题：

```
String iniFileLoc = "my path\\iniFile.ini";

    String valueLine = "value 1 for key 3\n" + "+value 2 for key 3\n";
    Wini ini = new Wini();
    File iniFile = new File(iniFileLoc);
    ini.load(iniFile);

        ini.add("SECTION1", "Key3", valueLine);

        ini.store(iniFile); 
```

除了我指定的特定键之外，有什么方法可以防止 ini4j 更改其他任何内容？如果没有，我怎样才能让 ini4j 无法将未注释的行识别为必要的关键设置。我正在使用的文件必须采用这种格式，因此除了使用符号`ini`之外，我无法指定另一种拥有多值键的方法。`+`

任何帮助将不胜感激。

谢谢

# java - 用于排除 javax.faces.resource 被 servlet 过滤器调用的 URL 模式

> ID：12955778
> 
> 赞同：1
> 
> 时间：2012-10-18T13:23:44.353
> 
> 标签：java, jsf, jsf-2, servlet-filters, spring-webflow

我创建了一个**servlet 过滤器**来处理会话超时和身份验证。

```
@WebFilter(urlPatterns={"/acc/*"})
public class ResourceAuthorizationFilter implements Filter { ... } 
```

我要过滤的页面有这样的模式：`/acc/login-flow`, `/acc/profiles-flow`. 过滤器也会为资源（css、js 和图像）调用。如何配置**urlPatterns**从过滤这些资源中排除？

**EDIT1**
以下是一些被过滤的网址：

```
http://localhost:8081/acme-0.0.1/acc/login-flow
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/theme.css
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/jquery/jquery.js
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/primefaces.js
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/ajax.gif
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/login.png
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/header.png
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/images/ui-bg_flat_75_ffffff_40x100.png
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/images/default.png
http://localhost:8081/acme-0.0.1/acc/javax.faces.resource/images/ui-icons_888888_256x240.png 
```

我在`webapp/resources`文件夹下有一些自定义 css/js 文件，但这些文件不是来自那里。

`acc`部分来自：

```
<servlet-mapping>
    <servlet-name>Spring MVC Servlet</servlet-name>
    <url-pattern>/acc/*</url-pattern>
</servlet-mapping> 
```

**EDIT2**
这些代码示例来自一个使用 JSF 2.0、PrimeFaces 3.4.1、Spring 3.0.5.RELEASE、Spring Security 3.0.3.RELEASE 和 Spring Web Flow 2.3.0.RELEASE 实现的项目。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-18T13:57:16.710

只需将资源移动到外部的不同文件夹`/acc`。默认情况下，它们无论如何都应该在文件夹中，`/resources`以便您可以以正确的方式使用。`<h:outputScript>``<h:outputStylesheet>``<h:graphicImage>`

如果由于某种原因您无法解决该问题，那么您确实需要在`doFilter()`实现中检查请求 URI。即*没有*办法在 URL 模式中排除子模式。

```
String path = request.getRequestURI().substring(request.getContextPath().length());

if (path.startsWith("/acc" + ResourceHandler.RESOURCE_IDENTIFIER)) {
    chain.doFilter(request, response);
} else {
    // ...
} 
```

* * *

**更新**：根据您的问题更新，您使用 Spring MVC 的原因不明。它还处理所有 JSF 资源请求。你应该告诉它不要那样做。我无法从头顶告诉如何做到这一点，但它至少与`<mvc:resources>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T16:12:13.017

如果您已经在项目中使用 Spring Security。在安全上下文中注册您的自定义会话管理过滤器很容易，然后您可以轻松地排除添加新拦截 url 元素的模式，如下所示：

```
<intercept-url pattern="/javax.faces.resource/**" filters="none"/> 
```

请参阅命名空间配置[文档](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/ns-config.html#d0e832)。

如果设置为“无”，则从应用的任何过滤器中删除路径。

也可以看看：

*   自定义会话管理过滤器示例：[JSF 2、Spring Security 3.x 和 Richfaces 4 在 ajax 请求的会话超时时重定向到登录页面](https://stackoverflow.com/questions/10143539/jsf-2-spring-security-3-x-and-richfaces-4-redirect-to-login-page-on-session-tim)
*   [春季安全CSS样式不起作用](https://stackoverflow.com/questions/8608359/spring-security-css-styles-dont-work)

# javascript - 如何将 keyCode 添加到 WebKit 中的合成键盘事件？

> ID：12955779
> 
> 赞同：1
> 
> 时间：2012-10-18T13:23:44.393
> 
> 标签：javascript, webkit

我正在尝试通过 JavaScript 创建一个`KeyboardEvent`尽可能接近浏览器本机创建的一个（例如，当我按下一个键时，`keyDown`事件会触发。与此事件关联的事件对象就是我正在尝试的重现）。

该[`createEvent`方法](https://developer.mozilla.org/en-US/docs/DOM/document.createEvent)可用于创建特定类型的事件：

```
var evt = document.createEvent("KeyboardEvent"); 
```

然后，该[`initKeyboardEvent`方法](https://developer.mozilla.org/en-US/docs/DOM/KeyboardEvent#initKeyboardEvent%28%29)可用于使用一些数据初始化事件对象。此方法的签名似乎在浏览器之间差异很大。我已经在 Firefox 中使用了这个`initKeyEvent`方法，它使用了这个方法。据我所知，WebKit 期望以下论点：

```
evt.initKeyboardEvent(
    "keydown",          // The name of the event
    true,               // Whether it bubbles
    true,               // Whether it can be cancelled
    window,             // The `window` in which it is being fired
    "U+004A",           // The "key identifier" (this is an uppercase "J")
    0,                  // The "key location" (0 for the normal character keys)
    false,              // Whether the Control key was held
    false,              // Whether the Alt key was held 
    false,              // Whether the Shift key was held 
    false,              // Whether a meta key was held 
    false               // Whether the "Alt Graph" key was held?
); 
```

似乎没有任何方法可以传递密钥代码（在`keyCode`or`which`属性中）。我试图关注 WebKit 源代码，但这并没有帮助。[`KeyboardEvent`IDL 定义](https://trac.webkit.org/browser/trunk/Source/WebCore/dom/KeyboardEvent.idl)似乎引用了一个属性`keyCode`（和一个`charCode`属性），但我一直无法弄清楚它是如何获得值的。

来自 WebKit 源的相关文件：

*   [键盘事件.cpp](https://trac.webkit.org/browser/trunk/Source/WebCore/dom/KeyboardEvent.cpp)
*   [键盘事件.h](https://trac.webkit.org/browser/trunk/Source/WebCore/dom/KeyboardEvent.h)

这是一个[演示这个问题的小提琴](http://jsfiddle.net/jamesallardice/FznHj/1/)。打开控制台，`KeyboardEvent`应该在那里进行检查。那是合成的。注意`keyCode`和`which`属性如何具有值`0`。如果您聚焦“结果”框架并按任意键，您可以检查本机事件对象以查看差异。

所以，我的问题是：**是否可以在 WebKit中为合成对象添加一个`keyCode`或值，如果可以，我该怎么做？`which``KeyboardEvent`**

# android - 如何在 Html.fromHtml 中为下一行的空格开始新行以用于 android 中的文本视图

> ID：12955781
> 
> 赞同：15
> 
> 时间：2012-10-18T13:23:56.630
> 
> 标签：android, html

谁能告诉我如何`Html.fromHtml`在android中为文本视图的下一行开始新行？我`<br>`在下一行使用了标签；我无法做到给空间，因为`&nbsp;`不支持`Html.fromHtml`。谁能告诉有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-18T13:44:42.687

你试过了`<br/>`，`<br><br/>`还是干脆`\n`？`<br>`不过，应该根据这个来源得到支持。

[支持的 HTML 标签](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T11:06:44.487

`<br> &nbsp;`为我工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-10-08T21:30:19.930

简单地添加 `+ "<br />" +` 就足够换行了

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-10-21T05:14:23.920

将您的文本包含在
--Here- 中，并在新行中添加您想要的空格。将其保存在字符串变量中，然后将其传递给 Html.fromHtml()。

* * *

## 回答 #5

> 赞同：-5
> 
> 时间：2014-09-26T13:16:45.410

使用`<br/>`标签

例子：

```
<string name="copyright"><b>@</b> 2014 <br/>
Corporation.<br/>
<i>All rights reserved.</i></string> 
```

# node.js - 在“NodeJs”中读写 XML 节点值

> ID：12955783
> 
> 赞同：6
> 
> 时间：2012-10-18T13:24:02.823
> 
> 标签：node.js, readxml

谁能指导我如何在“NodeJS”中读取/写入由 xml2js.Parser() 解析的 XML 节点值？到目前为止，我的代码是流程：

```
var parser = new xml2js.Parser();
fs.readFile( './foo.xml', function(err, data) {
    parser.parseString(data, function (err, result) {
        console.dir(result);
    });
}); 
```

我想读取`result`如下的值

```
result.to 
```

我的 XML：

```
<note>
    <to>Tove</to>
    <from>Jani</from>
    <heading>Reminder</heading>
    <body>Don't forget me this weekend!</body>
</note> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-18T13:33:16.330

我认为您必须检查 result.note.to[0] 的值：

```
xml2js = require('xml2js');
fs = require('fs');

var parser = new xml2js.Parser();
fs.readFile( './foo.xml', function(err, data) {
    parser.parseString(data, function (err, result) {
        console.dir(result.note.to[0]);
    });
}); 
```

# ruby-on-rails - Rails 2：respond_to 上的 ArgumentError

> ID：12955785
> 
> 赞同：0
> 
> 时间：2012-10-18T13:24:11.100
> 
> 标签：ruby-on-rails, web-services, rest

我理解了格式化给定对象（比如@user）的传统方式如下：

```
respond_to do |format|
  format.html  
  format.xml  { render :xml => @user }
  format.json { render :json => @user}
end 
```

我的控制器中有以下代码：

```
@selected_criteria = @criteria[0][1]   
@home_members = current_user.my_home_members(@selected_criteria).paginate(:per_page => HOME_MEMBERS_TO_SHOW_PER_PAGE, :page => 1)
respond_to do |format|
  format.html  
  format.xml  { render :xml => @home_members }
  format.json { render :json => @home_members}
end 
```

这给出了一个空响应，并且错误日志给出：

```
ArgumentError (wrong number of arguments (0 for 1)):
  app/controllers/home_controller.rb:33:in `matches'
  app/controllers/home_controller.rb:32:in `matches' 
```

我不知道我错过了什么，还有另一个我必须通过的论点吗？

# asp.net-mvc - 不同服务器的备用 web.config

> ID：12955790
> 
> 赞同：1
> 
> 时间：2012-10-18T13:24:28.340
> 
> 标签：asp.net-mvc, asp.net-mvc-3, web-config

我正在阅读此[http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx](http://blogs.msdn.com/b/webdev/archive/2009/05/04/web-deployment-web-config-transformation.aspx)但是当我在 Visual Studio 中右键单击 web.config 时“添加编码转换”显示为灰色。（我不是在调试或任何东西。）

基本上，我想根据我发布到的服务器来更改我的连接字符串。我有一个开发服务器，我有一个生产服务器。

我可以通过什么方式在 ASP.NET MVC 中适应这种情况？

目前，我的 web.config 下存在两个文件：`Web.Debug.Config`和`Web.Release.Config`.

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:27:53.250

您需要打开[解决方案配置下拉菜单](http://msdn.microsoft.com/en-us/library/bb166577%28v=vs.100%29.aspx)并添加新配置。

请注意，执行此操作时，您可以有不同的编译常量、代码协定设置等。请务必复制现有配置（即，发布）。此外，代码合同设置当前不复制。

# javascript - DIV、文本框、文本区域等内的插入符号位置/选择

> ID：12955793
> 
> 赞同：9
> 
> 时间：2012-10-18T13:24:30.330
> 
> 标签：javascript, internet-explorer, firefox, selection, caret

是否有从不同元素在每个浏览器中获取插入符号位置和/或选择的整体解决方案。我正在寻找一个我可以执行的解决方案，例如 mGetCaretPosition(iControl) 女巫将返回其元素内的插入符号位置。

**我尝试了很多功能：**

*   `selection (window/document) [document=IE, window=Opera]`
*   `getSelection (window/document) [document=Firefox, document=Chrome, document=Safari]`
*   `selectionStart (input/textarea) [All]`
*   `craeteRange (selection)`
*   `createTextRange (selection)`

调用像 document.selection.createRange().text 这样的方法不会返回插入符号位置，因为它没有选择。设置 tRange.moveStart('character', -X) 时，X 不是已知值。当您在 div 中使用它并且插入符号位于中间时，它会将代码放在 div 之前。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:28:50.777

我今天已经建立了这个。这是你的回应亚历克斯和谷歌内部其他结果的组合。我已经在 PC 上的浏览​​器 IE9、Chrome、Opera、Safari 和 Firefox 以及带有默认浏览器 Firefox、Chrome 和 Opera 的 Android 的 HTC Sensation 上测试了它。

只有移动设备上的 Opera 确实存在一些问题。

我的解决方案：

```
// Control
var BSControl = function(iControl)
{
    // Variable
    var tControl = (typeof iControl == 'string' ? document.getElementById(iControl) : iControl);

    // Get Caret
    this.mGetCaret = function()
    {
        // Resultaat aanmaken
        var tResult = -1;

        // SelectionStart
        // *) Input & Textarea
        if(tResult == -1 && (tControl.selectionStart || tControl.selectionStart == '0'))
        {
            tResult = tControl.selectionStart;
        }

        // ContentWindow.GetSelection
        // *) IFrame
        if(tResult == -1 && (tControl.contentWindow && tControl.contentWindow.getSelection))
        {
            var tRange= tControl.contentWindow.getSelection().getRangeAt(0); 
            tResult = tRange.startOffset;
        }

        // GetSelection
        // *) Div
        if(tResult == -1 && (window.getSelection))
        {
            var tRange= window.getSelection().getRangeAt(0); 
            tResult = tRange.startOffset;
        }

        // Resultaat teruggeven
        return tResult;
    }

    // Set Caret
    this.mSetCaret = function(iPosition)
    {
        // SelectionStart
        // *) Input & Textarea
        if(tControl.selectionStart || tControl.selectionStart == '0')
        {
            tControl.selectionStart = iPosition;
            tControl.selectionEnd = iPosition;
            return;
        }

        // ContentWindow.GetSelection
        // *) IFrame
        if(tControl.contentWindow && tControl.contentWindow.getSelection)
        {
            var tRange = tControl.contentDocument.createRange();
            tRange.setStart(tControl.contentDocument.body.firstChild, iPosition);
            tRange.setEnd(tControl.contentDocument.body.firstChild, iPosition);

            var tSelection = tControl.contentWindow.getSelection();
            tSelection.removeAllRanges();
            tSelection.addRange(tRange);

            return;
        }

        // GetSelection
        // *) Div
        if(window.getSelection)
        {
            var tSelection = window.getSelection();
            var tRange= tSelection.getRangeAt(0); 

            tRange.setStart(tControl.firstChild, iPosition);
            tRange.setEnd(tControl.firstChild, iPosition);

            tSelection.removeAllRanges();
            tSelection.addRange(tRange);

            return;
        }
    }

    // Get Selection
    this.mGetSelection = function()
    {
        // Resultaat aanmaken
        var tResult = null;

        // SelectionStart
        // *) Input & Textarea
        if(tResult == null && (tControl.selectionStart || tControl.selectionStart == '0'))
        {
            tResult = this.mGet().substring(tControl.selectionStart, tControl.selectionEnd);
        }

        // ContentWindow.GetSelection
        // *) IFrame
        if(tResult == null && (tControl.contentWindow && tControl.contentWindow.getSelection))
        {
            var tSelection = tControl.contentWindow.getSelection() 
            tResult = tSelection.toString();
        }

        // GetSelection
        // *) Div
        if(tResult == null && (window.getSelection))
        {
            var tSelection = window.getSelection() 
            tResult = tSelection.toString();
        }

        // Resultaat teruggeven
        return tResult;
    }

    // Set Selection
    this.mSetSelection = function(iFrom, iUntil)
    {
        // SelectionStart
        // *) Input & Textarea
        if(tControl.selectionStart || tControl.selectionStart == '0')
        {
            tControl.selectionStart = iFrom;
            tControl.selectionEnd = iUntil;
            return;
        }

        // ContentWindow.GetSelection
        // *) IFrame
        if(tControl.contentWindow && tControl.contentWindow.getSelection)
        {
            var tRange = tControl.contentDocument.createRange();
            tRange.setStart(tControl.contentDocument.body.firstChild, iFrom);
            tRange.setEnd(tControl.contentDocument.body.firstChild, iUntil);

            var tSelection = tControl.contentWindow.getSelection();
            tSelection.removeAllRanges();
            tSelection.addRange(tRange);

            return;
        }

        // GetSelection
        // *) Div
        if(window.getSelection)
        {
            var tSelection = window.getSelection();
            var tRange= tSelection.getRangeAt(0); 

            tRange.setStart(tControl.firstChild, iFrom);
            tRange.setEnd(tControl.firstChild, iUntil);

            tSelection.removeAllRanges();
            tSelection.addRange(tRange);

            return;
        }
    }

    // Set
    this.mSet = function(iValue)
    {
        // Afhankelijk van aanwezige property waarde instellen
        if('value' in tControl)
        {
            tControl.value = iValue;
        }else if('innerText' in tControl)
        {
            tControl.innerText = iValue;
        }else if('textContent' in tControl)
        {
            tControl.textContent = iValue;
        }else if('innerHTML' in tControl)
        {
            tControl.innerHTML = iValue;
        }
    }

    // Get
    this.mGet = function()
    {
        // Resultaat aanmaken
        var tResult = null;

        // Afhankelijk van aanwezige property waarde instellen
        if('value' in tControl)
        {
            tResult = tControl.value;
        }else if('innerText' in tControl)
        {
            tResult = tControl.innerText;
        }else if('textContent' in tControl)
        {
            tResult = tControl.textContent;
        }else if('innerHTML' in tControl)
        {
            tResult = tControl.innerHTML;
        }

        // Resultaat teruggeven
        return tResult;
    }
} 
```

# php - 不包括 admin.php 的表达式引擎 htaccess 重写

> ID：12955796
> 
> 赞同：0
> 
> 时间：2012-10-18T13:24:42.550
> 
> 标签：php, regex, .htaccess, mod-rewrite

我正在使用表达式引擎，并且在我的 htaccess 中有一个规则来重写 url，以便删除 url 的 index.php 部分。然而，由于某种原因，这会停止管理区域的工作，它使用 admin.php 来路由所有内容。这是我的 htaccess 的内容：

```
RewriteEngine on 
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

有谁知道如何防止将此规则应用于 admin.php？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:25:53.963

RewriteCond 行指定过滤器。

```
RewriteEngine on 
RewriteCond $1 !^(index\.php|admin\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

请参阅[RewriteCond](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)（我不会假装它很简单......）

# android - 不同设备上的预览纵横比不同

> ID：12955797
> 
> 赞同：1
> 
> 时间：2012-10-18T13:24:46.677
> 
> 标签：android

在我的应用程序中，我有一个预览屏幕。在一台设备（LG，Android 2.2，320x480 屏幕）和另一台设备（HTC，Android 2.3，480x800 屏幕）上一切正常。在这两种情况下，支持的预览尺寸列表都包括一个完全适合屏幕尺寸的尺寸，我选择了它并且图像非常完美。问题出现在另一台设备上，其屏幕与第一台设备相似（三星、Android 2.3、320x480 屏幕）。不管我选择了适合屏幕尺寸的预览尺寸，就像以前的情况一样，图像不会保留其纵横比；圆圈呈椭圆形；图像沿屏幕的短轴被挤压。看来硬件本身为了获得 320x480 的预览，会压缩图像（相机的外形尺寸为 4:3，而屏幕的外形尺寸为 3:2）。[Camera.Parameters.getHorizo​​ntalViewAngle](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getHorizontalViewAngle%28%29)和[Camera.Parameters.getHorizo​​ntalViewAngle](http://developer.android.com/reference/android/hardware/Camera.Parameters.html#getVerticalViewAngle%28%29)似乎很有帮助；他们在所有三个设备上给出相同的值！谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T08:23:08.493

经过更深入的调查，包括编写临时代码来检查预览在屏幕上的实际显示方式，这就是我发现的。在一台设备 (LG E-720) 上，预览图像被裁剪以获得 3:2 的外形尺寸，然后调整大小以适合屏幕。保留纵横比： ![在此处输入图像描述](../Images/034dadd411400d255243eb60bce23144.png)

在第二台设备 (Samsung ACE) 上，预览图像似乎以不同的方式裁剪，生成 5:4 图像 (!?)，然后调整大小以适应屏幕。由于外形尺寸不同，屏幕上的图像会出现挤压。： ![在此处输入图像描述](../Images/fffd1ce170f7e1f4df53d481ac2e2516.png)

我检查了第二个设备是否有可用的软件更新，但事实并非如此。因此，为了在屏幕上获得或多或少正确的图像，我将目标视图定义为 384 像素高；这实际上会导致恢复正确纵横比的裁剪。但是，由于原始裁剪是水平不对称的，它不能补偿小的水平偏移。

# oracle - Oracle 会覆盖我的日期吗？

> ID：12955801
> 
> 赞同：0
> 
> 时间：2012-10-18T13:25:05.850
> 
> 标签：oracle, date, jpa, insert

我遇到了 Oracle Dates 的问题。插入 OracleDB 后，Java 应用程序中的预定义日期似乎有所不同。

通过 JPA 实体插入：

```
entity.setDateOfCreation(new Date(System.currentTimeInMillis())); 
// 1350565985000 
```

提交并检索后：

```
entity.getDateOfCreation() // 1350565985047 
```

为什么这不一样？

我假设 Oracle 只会将具有这些精确毫秒的特定日期对象插入到数据库中。但显然不是。由于最小的延迟，它似乎以毫秒为单位用自己的日期“覆盖”了给定的日期（尽管我不使用@GeneratedValue）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:29:50.037

您使用的表是否有填充该列的触发器？我希望它确实如此。上次我遇到了很多问题，应用服务器和数据库之间的时间差异。最好有一个时间来确保整个州的时间一致。

# playframework-2.0 - Morphia/Mongodb 有时会丢失一大块 blob

> ID：12955804
> 
> 赞同：2
> 
> 时间：2012-10-18T13:25:15.700
> 
> 标签：playframework-2.0, morphia

我正在将 Mongodb/Morphia 与 Play 2.0.4 和 Play2 Morphia 插件一起使用（据我所知，这实际上只是 Morphia 的一个包装器 - [https://github.com/leodagdag/play2-morphia-plugin](https://github.com/leodagdag/play2-morphia-plugin)）。

当我上传显示图片时，我将其与对象一起保存，如下所示：

```
MultipartFormData body = request().body().asMultipartFormData();
FilePart picture = body.getFile("thumbnail");
if (picture != null) {
    File file = picture.getFile();
    obj.setThumbnailUpload(file);
}
obj.save(); 
```

这将在我第一次上传文件时起作用。但是，当我随后在不更新图片的情况下重新保存交易时，它会说它丢失了一大块。我需要做什么才能不覆盖 blob？

```
[ERROR] [10/19/2012 00:04:24.640] [promise-akka.actor.default-dispatcher-170] [akka.dispatch.Dispatcher] can't find a chunk!  file id: 507f89250364707ed55a816f chunk: 0
com.mongodb.MongoException: can't find a chunk!  file id: 507f89250364707ed55a816f chunk: 0
    at com.mongodb.gridfs.GridFSDBFile.getChunk(GridFSDBFile.java:103)
    at com.mongodb.gridfs.GridFSDBFile$MyInputStream.read(GridFSDBFile.java:151)
    at com.mongodb.gridfs.GridFSDBFile$MyInputStream.read(GridFSDBFile.java:142)
    at play.api.libs.iteratee.Enumerator$$anonfun$fromStream$2.apply(Iteratee.scala:980)
    at play.api.libs.iteratee.Enumerator$$anonfun$fromStream$2.apply(Iteratee.scala:978)
    at play.api.libs.iteratee.Enumerator$$anon$17$$anonfun$22.apply(Iteratee.scala:949)
    at play.api.libs.iteratee.Enumerator$$anon$17$$anonfun$22.apply(Iteratee.scala:948)
    at play.api.libs.iteratee.Cont$$anon$21.fold(Iteratee.scala:341)
    at play.api.libs.iteratee.Iteratee$$anon$18$$anonfun$fold$1.apply(Iteratee.scala:16)
    at play.api.libs.iteratee.Iteratee$$anon$18$$anonfun$fold$1.apply(Iteratee.scala:16)
    at play.api.libs.concurrent.AkkaPromise$$anonfun$flatMap$1.apply(Akka.scala:58)
    at play.api.libs.concurrent.AkkaPromise$$anonfun$flatMap$1.apply(Akka.scala:57)
    at akka.dispatch.Future$$anonfun$onSuccess$1.apply(Future.scala:484)
    at akka.dispatch.Future$$anonfun$onSuccess$1.apply(Future.scala:483)
    at akka.dispatch.KeptPromise$$anonfun$onComplete$2.apply$mcV$sp(Future.scala:956)
    at akka.dispatch.Future$$anon$4$$anonfun$run$1.apply$mcV$sp(Future.scala:386)
    at akka.dispatch.Future$$anon$4$$anonfun$run$1.apply(Future.scala:378)
    at akka.dispatch.Future$$anon$4$$anonfun$run$1.apply(Future.scala:378)
    at scala.util.DynamicVariable.withValue(DynamicVariable.scala:57)
    at akka.dispatch.Future$$anon$4.run(Future.scala:378)
    at akka.dispatch.TaskInvocation.run(AbstractDispatcher.scala:94)
    at akka.jsr166y.ForkJoinTask$AdaptedRunnableAction.exec(ForkJoinTask.java:1381)
    at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
    at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:975)
    at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1479)
    at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

谢谢史蒂夫

# jquery - 使用 Jquery 替换多个 DIV

> ID：12955809
> 
> 赞同：-2
> 
> 时间：2012-10-18T13:25:23.340
> 
> 标签：jquery, html, replace

我有一个 jquery 脚本，它将 1 个 div 替换为另一个，并在选择它时将 1 个链接替换为另一个：

```
$('.child2, a[href="#1"]').hide()

$('#replacepagelinks a').click(function(){
     $(this).hide().siblings().show()
     var w = this.hash.replace('#', '');
     $('#parent div.child'+w).show().siblings().hide()
}) 
```

这是我的html：

```
<div id="parent">
   <div class="child1">Child 1 Contents</div>
   <div class="child2">Child 2 Contents</div>
</div>
<div id="replacepagelinks">
     <a href="#1">Replace Child 1 with Child 2</a>
     <a href="#2">Replace Child 2 with Child 1</a>
</div> 
```

请查看此 jsfiddle [http://jsfiddle.net/KaqZ5/](http://jsfiddle.net/KaqZ5/)以获取工作示例。

这很好用，但是我需要它最多可以处理 5 个 div，如下所示：

1.  在 child1 我只想`<a href="#1">Replace Child 1 with Child 2</a>`

2.  在 child2 我想`<a href="#2">Replace Child 2 with Child 1</a>`和`<a href="#3">Replace Child 2 with Child 3</a>`

3.  在 child3 我想`<a href="#3">Replace Child 3 with Child 2</a>`和`<a href="#4">Replace Child 3 with Child 4</a>`

4.  在 child4 我想`<a href="#4">Replace Child 4 with Child 3</a>`和`<a href="#5">Replace Child 4 with Child 5</a>.`

5.  在 child5 我只想`<a href="#5">Replace Child 5 with Child 4</a>`

所以每个页面都有一个“下一页”和“后退”链接，除了只有“下一个”链接的第一页和只有“后退”链接的最后一页，我需要这个来支持 2 个子 div，3 个子div 和 4 个子 div 也是如此。

我对 jquery 的经验几乎为零，所以如果有人可以请更新我的 jsfiddle，我将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:56:48.607

[请参阅http://jsfiddle.net/Palpatim/KaqZ5/7/](http://jsfiddle.net/Palpatim/KaqZ5/7/)上的更新小提琴

**修改后的 HTML：**

```
<div class="menu">
    <div class="menu_item">
        <div class="parent">
            <div class="child1">Child 1 Contents</div>
            <div class="child2">Child 2 Contents</div>
            <div class="child3">Child 3 Contents</div>
            <div class="child4">Child 4 Contents</div>
            <div class="child5">Child 5 Contents</div>
        </div>
        <div class="nav">
            <a class="prev" href="#">Back</a>
            <a class="next" href="#">Next</a>
        </div>
    </div>

    <div class="menu_item">
        <div class="parent">
            <div class="child1">Child 1 Contents</div>
            <div class="child2">Child 2 Contents</div>
            <div class="child3">Child 3 Contents</div>
        </div>
        <div class="nav">
            <a class="prev" href="#">Back</a>
            <a class="next" href="#">Next</a>
        </div>
    </div>
</div> 
```

**新的 CSS**

```
/* Initially hide all menu items */
.parent div {
    display: none;
}

/* Show active item */
.parent div.active {
    display: block;
}

/* If a nav link is disabled, color it grey and set the cursor to an arrow */
a[disabled="disabled"] {
    color: #999;
    cursor: default;
} 
```

​<strong>修改后的JavaScript

```
// Set the initial menu state: Each 'prev' link is disabled and the first menu item 
// for each menu block is active
$('a.prev').attr('disabled', 'disabled');
$('.parent div:first-child').addClass('active');

$('a.next').click(function() {
    // Find the parent menu container 
    // - parent of (this) is div.nav
    //   - parent of div.nav is div.menu_item
    var menu = $(this).parent().parent();

    // Find the currently active menu item
    var active = $('.active', menu);

    // Find the next menu item in the list
    var nextItem = active.next();

    // If there is a next menu item, make it active
    if (nextItem.length) {
        // Make current item inactive
        active.removeClass('active');
        // Make new item active
        nextItem.addClass('active');

        // If there's no item after the new item,
        // disable navigation
        if (!nextItem.next().length) {
            $('a.next', menu).attr('disabled', 'disabled');
        }

        // If we just clicked 'next', we can enable the 'prev' button
        if ($('a.prev', menu).attr('disabled') == 'disabled') {
            $('a.prev', menu).removeAttr('disabled');
        }
    }
});

// Pretty much same as above, with the directions reversed
$('a.prev').click(function() {
    var menu = $(this).parent().parent();
    var active = $('.active', menu);
    var prevItem = active.prev();
    if (prevItem.length) {
        active.removeClass('active');
        prevItem.addClass('active');
        if (!prevItem.prev().length) {
            $('a.prev', menu).attr('disabled', 'disabled');
        }
        if ($('a.next', menu).attr('disabled') == 'disabled') {
            $('a.next', menu).removeAttr('disabled');
        }
    }
}); 
```

以下是我对您的原始文件所做的一些重要更改：

*   使用 CSS 隐藏菜单项并使用类重新显示它们`.active`。这使标记更清晰，并允许您设置样式
*   使用 CSS 在视觉上禁用导航链接，而不是完全抑制它们。您当然可以简单地隐藏它们，但如果它确实是用户导航，那么您希望他们能够看到该链接根本不适用，而不是从他们的视图中完全删除它。
*   重组了导航，在视觉上将“返回”放在“下一步”之前。如果你真的想删除它，你可以简单地改变禁用锚的 CSS 定义。
*   将您的链接更改为具有类而不是

您应该考虑的其他一些优化：

*   将导航代码的内容重构为一个独立的函数。无论您是前进还是后退，几乎都是一样的，因此请考虑通过传入父菜单元素和所需方向来使函数更加抽象。
*   使用 jQuery 分页插件，例如[http://www.xarg.org/2011/09/jquery-pagination-revised/](http://www.xarg.org/2011/09/jquery-pagination-revised/)这些具有更强大功能的好处，并且在积极开发插件的情况下，它们很可能是比你自己做的更好。
*   您的页面上有两个导航块，但每个导航块都有`id`冲突的属性。`id`s 在页面上必须是唯一的。我将它们改为类。
*   考虑菜单有一个项目或没有项目的情况。这段代码会在这些情况下窒息

可能有许多其他方法可以做到这一点，但这应该可以帮助您入门。为了进一步阅读，我建议仔细阅读 jQuery 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:56:21.313

这是我想出的：

```
<html>
<head>
 <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script> 
 <script type="text/javascript">
    function showPage(x){
        $("#parent div").hide();    //hide all pages        
        $('#parent div.child'+x).show();    //then show selected page           
    }
    function showLinks(x){              
        $('#replacepagelinks a').hide(); //hide all links               
        if(x>1)         
            $('#replacepagelinks a#'+(parseInt(x)-1)).show(); //if current page isn't the first one show back link

        $('#replacepagelinks a#'+(parseInt(x)+1)).show();  // show next link
    }
    $(document).ready(function(){                                   
        //$('#replacepagelinks span').on('click',function(e){       
        $(document).on('click', '#replacepagelinks a', function (e) {
            e.preventDefault();             
            var w = $(this).attr('id');
            showPage(w);
            showLinks(w);                       
        });     
    });
</script>
</head>
<body onload="showPage(1);showLinks(1);">
 <div id="parent">
  <div class="child1">Child 1 Contents</div>
  <div class="child2">Child 2 Contents</div>
  <div class="child3">Child 3 Contents</div>
  <div class="child4">Child 4 Contents</div>
</div>
<div id="replacepagelinks">
 <a href="#1" id="1">page 1</a>
 <a href="#2" id="2">page 2</a>
 <a href="#3" id="3">page 3</a>
 <a href="#4" id="4">page 4</a>  
</div>

</body>
</html> 
```

# jquery - 为什么基于 window.scrolltop 调整 css 可以始终如一地工作，而 animate 却不能？

> ID：12955810
> 
> 赞同：1
> 
> 时间：2012-10-18T13:25:27.083
> 
> 标签：jquery, css, jquery-ui, jquery-animate

以下获取 scrollTop 值并按预期​​调整 css：

```
 $(window).scroll(function() {
      if($window.scrollTop()>918){
        $menu.css({top:'0px'});
        }
      else{
        $menu.css({top:'80px'});
        }
      } 
```

但以下（效果更好）没有。滚动事件完成后，它似乎间歇性地触发

```
 $(window).scroll(function() {
       if($window.scrollTop()>918){
        $menu.animate({top:'0px'},100);
        }
      else{
        $menu.animate({top:'80px'},100);
        }
        } 
```

任何人有任何想法为什么？如此简单，但让我精神抖擞。当然我错过了一些东西，非常感谢任何帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:28:15.293

因为滚动事件在用户移动滚动条时会触发很多次，并且每次触发时都会启动一个新动画，因此最终会同时运行一堆动画，它们都试图移动菜单不同。

如果您像这样停止以前的动画，它可能会起作用：

```
$(window).scroll(function() {
    if($window.scrollTop()>918){
        $menu.stop(true).animate({top:'0px'},100);
    } else {
        $menu.stop(true).animate({top:'80px'},100);
    }
} 
```

但是，如果您在执行动画之前等待滚动操作完成，它可能会更好。有关等待滚动完成的 jQuery 加载项方法，请参阅[这篇文章。](https://stackoverflow.com/a/7392655/816620)

* * *

编辑：我有一个更好的主意。在第一次滚动移动时开始动画并让它继续运行，除非值发生变化：

```
$(window).scroll(function() {
    var menuTarget = $window.scrollTop()>918 ? "0px": "80px";
    // only do an animation if one isn't already going or
    // the current animation target is not what we want
    if (!$menu.is(":animated") || $menu.data("animTarget") !== menuTarget) {
        // set the new target, stop the current animation and start new animation
        $menu.data("animTarget", menuTarget)
            .stop(true).animate({top: menuTarget},100);
    }
} 
```

# uuid - UUID 和字符串转换

> ID：12955820
> 
> 赞同：0
> 
> 时间：2012-10-18T13:25:53.377
> 
> 标签：uuid

我不确定我的理解是否正确。可以将任意字符串转换为 UUID，并且能够从 UUID 转换回原始字符串（就像加密/解密一样）。这是真的吗？如果有，转换规则是什么？看来这个 twiki 没有太多信息 => [http://en.wikipedia.org/wiki/UUID](http://en.wikipedia.org/wiki/UUID)

提前谢谢，乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T18:12:03.237

不，那不是真的。您可以从任意字符串（即版本 3“基于名称”的 UUID）生成 UUID，如[RFC4122 的第 4.3 节中所述](https://www.rfc-editor.org/rfc/rfc4122#section-4.3)，但是这是不可逆的。用于散列字符串的 MD5 和 SHA-1 算法是单向散列。它们在设计上是不可逆的，因此无法恢复生成 UUID 的原始字符串（除非您在其他地方缓存 hash->string 映射）。

# sql - 如何在没有像 ApexSqlLog 这样的应用程序的情况下在 SQL Server（.ldf 文件）中从事务日志文件中获取用户

> ID：12955823
> 
> 赞同：4
> 
> 时间：2012-10-18T13:26:09.880
> 
> 标签：sql, sql-server, tsql

如何从 SQL Server 的事务日志文件中获取用户？

我试过这个查询，但它没有给我正确的用户

```
SELECT 
CASE 
  WHEN (SELECT NAME 
          FROM SYS.SERVER_PRINCIPALS lgn 
         WHERE Rtrim(lgn.SID) = Rtrim(log2.[TRANSACTION SID])) IS NOT 
       NULL THEN 
  'login: ' 
+ Upper((SELECT NAME FROM SYS.SERVER_PRINCIPALS lgn WHERE Rtrim(lgn.SID) 
  = Rtrim 
(log2.[TRANSACTION SID]))) 
  ELSE 'db user: ' 
       + Upper((SELECT NAME FROM SYS.SERVER_PRINCIPALS lgn WHERE Rtrim( 
       lgn.SID) 
       = Rtrim(log2.[TRANSACTION SID] ))) 
END 
AS 'Login_or_User', 
log1.*, 
CASE log1.__$OPERATION 
  WHEN 1 THEN 'DELETE' 
  WHEN 2 THEN 'INSERT' 
  WHEN 4 THEN 'UPDATED VALUE' 
  WHEN 3 THEN 'PREVIOUS UPDATED VALUE' 
  ELSE NULL 
END 
AS operation, 
CONVERT(VARCHAR(19), log2.[BEGIN TIME])                                                                                                                 AS 'Begin Time',
LEFT(log.ALLOCUNITNAME, Charindex('.', log.ALLOCUNITNAME) - 1) 
AS 'Schema', 
LEFT(RIGHT(log.ALLOCUNITNAME, Len(log.ALLOCUNITNAME) - 
                                   Charindex('.', log.ALLOCUNITNAME)), 
Charindex('.', RIGHT(log.ALLOCUNITNAME, 
Len(log.ALLOCUNITNAME) 
- 
                                                                                                               Charindex('.', log.ALLOCUNITNAME))) - 1) AS 'Object',
SYS.Fn_cdc_hexstrtobin(Substring(log.[CURRENT LSN], 1, 8) 
                       + Substring(log.[CURRENT LSN], 10, 8) 
                       + 
Substring(log.[CURRENT LSN], 19, 4))                                                                                           currentlsn
  FROM DBO.TEMPTABLE log1 
       LEFT JOIN ::FN_DBLOG(NULL, NULL) log 
              ON log1.__$SEQVAL = SYS.Fn_cdc_hexstrtobin( 
                                  Substring(log.[CURRENT LSN], 1, 8) 
                                  + Substring(log.[CURRENT LSN], 10, 8) 
                                  + Substring(log.[CURRENT LSN], 19, 4)) 
       LEFT JOIN ::FN_DBLOG(NULL, NULL)log2 
              ON log.[TRANSACTION ID] = log2.[TRANSACTION ID] 
       LEFT JOIN SYS.ALLOCATION_UNITS au 
              ON log.ALLOCUNITID = au.ALLOCATION_UNIT_ID 
       LEFT JOIN SYS.PARTITIONS p 
              ON p.PARTITION_ID = au.CONTAINER_ID 
       LEFT JOIN SYS.OBJECTS so 
              ON so.OBJECT_ID = p.OBJECT_ID 
       LEFT JOIN SYS.SERVER_PRINCIPALS spa 
              ON spa.SID = log2.[TRANSACTION ID] 
```

此代码用于检查已启用 CDC（更改数据捕获）的数据库，然后选择特定表以获取其更改

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T15:15:34.737

您始终可以在表上放置一个触发器，以捕获针对该表插入、更新或删除数据的任何用户的 PK、getdate() 和 suser_id()。然后，您可以与 CDC 一起跟踪它以获得您想要的结果。我意识到人们希望远离触发器，但它是一个简单易行的解决方案。

# xml - 为什么在 Google API 文档中通常推荐 JSON 而不是 XML？

> ID：12955824
> 
> 赞同：6
> 
> 时间：2012-10-18T13:26:13.610
> 
> 标签：xml, json

在我的应用程序中，我使用了多个 Google API，在所有这些 API 的文档中，它给了我两个选项：

*   JSON（推荐）
*   XML

现在，在发送请求和检索响应时，为什么 JSON 更好？Xcode 有一个内置的原生 xml 解析器，对于 JSON，您必须使用像 AFNetworking 这样的 JSON 解析器。是什么让 JSON 脱颖而出？它更有效还是更快？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:31:05.333

当您比较同一对象的 JSON 和 XML 表示的大小时，JSON 要小得多。

因此，当使用它通过网络（如 Internet）传输数据时，使用 JSON 效率更高。

它也是一个比 XML 更易于实现和使用的标准，因此更易于处理和解析（意味着更少的 CPU 开销）。

对于大多数应用程序来说，不需要 XML 的一些更高级的使用，因此 JSON 是一个不错的选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:31:27.553

JSON 比 XML 更小，开销也更少。

是的，XML 可以由[`NSXMLParser`](https://developer.apple.com/library/iOS/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html).

由于 iOS 5 JSON 本身是可用的，[`NSJSONSerialization`](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

`AFNetworking``NSJSONSerialization`不是 JSON 解析器，如果 avalalable 或您提供的，它将使用本机。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-18T14:05:30.580

XML 具有支持自由文本文档所需的数据类型（尤其是混合内容），但在 Javascript 等标准编程语言中不易处理。因此，如果您想使用标准编程语言并且不需要支持自由文本文档，则可以通过不使用 XML 来避免复杂性。相反，如果您想使用自由文本文档，则需要 XML，并且最好使用旨在轻松处理它的编程语言，例如 XSLT、XQuery 或 Linq。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T12:14:28.340

JSON 比 XML 效率高得多，XML 整体上比 JSON 大。它非常容易解析，您可以在 2 行和毫秒的时间内使用`NSJSONSerialization`和解析`NSData`JSON 的表示，只是表明它消耗的内存更少。

JSON代表JavaScript Object Notation，它不像Java，JavaScript到Java就像火腿到仓鼠。很多人都会犯这个错误。

# jquery - 在fancybox中动态显示谷歌地图

> ID：12955827
> 
> 赞同：2
> 
> 时间：2012-10-18T13:26:20.317
> 
> 标签：jquery, asp.net, fancybox, maps

我有一个 ASP.NET 网站，它有一个中继器和一个`div`用于显示地图的网站。在其中，我从数据源动态地给出纬度和经度。我可以用地图填充`div`，但是当我调用花哨的框时，起初地图没有显示。在我第二次单击该链接时，它会显示以前的地图位置。它有什么问题？

```
 <asp:Repeater ID="rptBranchList" runat="server">
        <ItemTemplate>
            <div class="branch" onclick="ShowBranchInfo('<%#Eval("Value") %>');">
                <img id='img<%#Eval("Value") %>' src="images/down.png" alt=""         style="float: left;
                    width: 20px;" />
                <span id='<%#Eval("Value") %>'>
                    <%#Eval("Name") %></span>
            </div>
            <div id='div<%#Eval("Value") %>' class="branchInfo" style="display: none;">
                <div style="float: left; width: 400px;">
                    <span><b>Şube Kodu</b>
                        <asp:Label ID="lblRegion" runat="server" Text='<%#Eval("Value") %>'></asp:Label>
                    </span>
                    <br />
                    <span><b>Adres</b>
                        <asp:Label ID="Label1" runat="server" Text='<%#Eval("Address") %>'></asp:Label>
                    </span>
                    <br />
                    <span><b>Telefon</b>
                        <asp:Label ID="Label2" runat="server" Text='<%#Eval("Phone") %>'></asp:Label>
                    </span>
                    <br />
                    <span><b>Faks</b>
                        <asp:Label ID="Label3" runat="server" Text='<%#Eval("Fax") %>'></asp:Label>
                    </span>
                    <asp:HiddenField ID="hdnValue" runat="server" Value='<%#Eval("Value") %>' />
                </div>
                <div style="float: left; width: 120px; padding-left: 30px;">
                    <a href="#map_canvas" class="mapInfo_click" data-coor='<%#String.Format("{0},{1}",Eval("Latitude"),Eval("Longitude"))%>'
                        addres='<%#Eval("Address") %>' branchname='<%#Eval("Name") %>'>
                        <img src="images/pin.png" alt="harita da göster" />
                    </a>
                </div>
            </div>
        </ItemTemplate>
    </asp:Repeater>

          <div id="map_canvas" style="width: 600px; display: block; height: 300px; z-index: 1200;"> &#160;</div>

$(".mapInfo_click").fancybox({
'transitionIn': 'elastic',
'transitionOut': 'elastic',
'speedIn': 100,
'speedOut': 100,
'overlayShow': false
}).click(function () {
var _lat = $(this).attr('data-coor').split(',')[0];
var _lon = $(this).attr('data-coor').split(',')[1];
init(_lat, _lon, 15, $(this).attr('branchname'), $(this).attr('addres'));
var mess = "Lattitute: " + _lat + " Longtitute:" + _lon;
//konum();
//$("#map_canvas").animate({ "height": "toggle" }, { duration: 1000 });
}); 
```

* * *

![在此处输入图像描述](../Images/d331c66ccf4f92a918bf29fbb4c31631.png)

代码不清楚所以我放了一张图片

# c# - 如何使用 FluentNhibernate 将我的集合配置为非只读？

> ID：12955829
> 
> 赞同：1
> 
> 时间：2012-10-18T13:26:28.930
> 
> 标签：c#, fluent-nhibernate, fluent-nhibernate-mapping, readonly-collection

我已经在这里尝试了我能想到的一切，但我只是卡住了。我有一个`User`有很多`Invitations`但是当我尝试通过调用将异常添加`Invitation`到`invitations`字段时抛出异常，因为. 我觉得它是映射覆盖中的东西，但我有各种其他类/关系遵循相同的模式，并且（到目前为止）我在其他地方没有遇到这个问题。为什么支持字段是只读的，我应该怎么做才能防止支持字段变为只读？`User``AddInvitation()``NotSupported``Collection is read-only`

用户.cs

```
public class User
{
  private IList<Invitation> invitations = new List<Invitation>();

  public virtual IEnumerable<Invitation> Invitations
  {
    get { return new ReadOnlyCollection<Invitation>(this.invitations);
  }

  public virtual User AddInvitation(Invitation invitation)
  {
    if (!this.invitations.Contains(invitation))
    {
      this.invitations.Add(invitation); // <-- throws System.NotSupportedException: Collection is read-only.
    }

    return this;
  }
} 
```

邀请.cs

```
public class Invitation
{
  private User sender = null;

  public virtual User Sender
  {
    get { return this.sender; }
  }

  public virtual Invitation From(User sender)
  {
    this.sender = sender;
    return this;
  }
} 
```

数据库.cs

```
public class Database
{
  // code removed for brevity
  private static void MapAssemblies(FluentNHibernate.Cfg.MappingConfiguration config)
  {
    config.AutoMappings.Add(
      AutoMap.Assembly(Assembly.GetAssembly(typeof(User)))
      .Override<User>(userMapping =>
      {
        userMapping.HasMany<Invitation>(userType => userType.Invitations)
        .Not.LazyLoad()
        .Inverse()
        .Cascade.SaveUpdate()
        .KeyColumn("User_id");
      })
      .Override<Invitation>(invitationMapping =>
      {
        invitationMapping.References<User>(invitationType => invitationType.Sender)
        .Column("User_id");
      });
    );
  }
  // code removed for brevity
} 
```

管理器.cs

```
public class Manager
{
  private ISession session = null; // initialised in .ctor

  // code removed for brevity
  public void AddInvitation(/*parameters removed*/)
  {
    User user = this.session.Get<User>(identifier);
    Invitation invitation = new Invitation().From(user);
    user.AddInvitation(invitation);
    using (ITransaction transaction = this.session.BeginTransaction())
    {
      this.session.SaveOrUpdate(invitation);
      transaction.Commit();
    }
  }
  // code removed for brevity
} 
```

我得到了实际的异常消息（最初应该添加这个）

在 System.ThrowHelper.ThrowNotSupportedException(ExceptionResource 资源) 在 System.Collections.ObjectModel.ReadOnlyCollection'1.System.Collections.Generic.ICollection.Add(T 值) 在 NHibernate.Collection.Generic.PersistentGenericBag'1.System.Collections.Generic .ICollection.Add(T 项)

似乎即使我正在修改字段邀请，访问者邀请添加的 ReadOnlyCollection 包装器也在修改字段本身。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:48:40.713

我认为问题出在 ReadOnlyCollection，您将 Invitations 初始化为只读集合有什么理由吗？

在您的映射中，您正在将数据填充到 Invitation 只读集合中，并且可能您将邀请字段初始化为 List 被只读集合隐藏。

每次要访问的时候可能尽量不要重新初始化邀请集合，而只是返回邀请字段，您可以将此字段设置为只读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-29T06:02:42.843

老问题，实际问题！在保持集合只读的同时修复并不难：

```
 userMapping.HasMany<Invitation>(userType => userType.Invitations)
    .Not.LazyLoad()
    .Inverse()
    .Access.CamelCaseField() // this does the trick!
    .Cascade.SaveUpdate()
    .KeyColumn("User_id"); 
```

如果 NHibernate 通过后台字段访问集合，它不知道它是只读的，所以它会实例化一个读写集合。公共接口保持只读状态。

# sharepoint - 使用 XMLHTTP 删除 Sharepoint 文件

> ID：12955831
> 
> 赞同：3
> 
> 时间：2012-10-18T13:26:30.583
> 
> 标签：sharepoint, excel, automation, xmlhttprequest, vba

继这项出色的工作之后，请点击此处： [将文件批量复制到 SharePoint 网站](https://stackoverflow.com/questions/12039730/batch-copy-files-to-sharepoint-site)

我现在可以通过单击按钮将我的压缩文件上传到 Sharepoint。

我现在的问题是：如何删除使用相同方法上传的文件？

我稍微修改了代码以将不同的文件保存到不同的 SharePoint 文件夹。下面的示例：

```
 Public Sub CopyToSharePoint()

Dim xmlhttp
Dim sharepointUrl
Dim sharepointFolder
Dim sharepointFileName
Dim LstrFileName, strFilePath, strMonthYear, PstrFullfileName, PstrTargetURL As String
Dim LlFileLength As Long
Dim Lvarbin() As Byte
Dim LvarBinData As Variant
Dim fso, LobjXML As Object
Set fso = CreateObject("Scripting.FileSystemObject")
Dim fldr As folder
Dim f As File

'Parent Sharepoint
sharepointUrl = "[SHAREPOINT PATH HERE]"

'Sets the Month%20Year
strMonthYear = Format(Now(), "mmmm yyyy") & "\"

'File Path
strFilePath = "[ARCHIVE DRIVE]" & strMonthYear

'Check to see if DRA for current month%20year exists
If Len(Dir(strFilePath, vbDirectory)) = 0 Then
    MkDir "strFilePath"
End If

Set LobjXML = CreateObject("Microsoft.XMLHTTP")

'Where we're uploading files from
Set fldr = fso.GetFolder(strFilePath)

For Each f In fldr.Files

If Format(f.DateCreated, "dd/mm/yyyy") = Format(Now(), "dd/mm/yyyy") Then

```
If InStr(1, f.Name, "[FILESTRING1]", vbTextCompare) > 0 Then
sharepointFolder = "[SHAREPOINTSTRING1]/"
    ElseIf InStr(1, f.Name, "[FILESTRING2]", vbTextCompare) > 0 Then
    sharepointFolder = "[SHAREPOINTSTRING2]"
        ElseIf InStr(1, f.Name, "[DONOTUPLOADTHISFILE]", vbTextCompare) > 0 Then
        GoTo NextF:
            Else
            sharepointFolder = "[SHAREPOINTMAINFOLDER]"
End If 
```

sharepointFileName = sharepointUrl & sharepointFolder & f.Name

```
PstrFullfileName = strFilePath & f.Name
LlFileLength = FileLen(PstrFullfileName) - 1

' Read the file into a byte array.
ReDim Lvarbin(LlFileLength)
Open PstrFullfileName For Binary As #1
Get #1, , Lvarbin
Close #1

' Convert to variant to PUT.
LvarBinData = Lvarbin
PstrTargetURL = sharepointUrl & sharepointFolder & f.Name

' Put the data to the server, false means synchronous.
LobjXML.Open "PUT", PstrTargetURL, False 
```

' Send the file in.
    LobjXML.Send LvarBinData

End If

NextF:
Next f

Set LobjXML = Nothing
  Set fso = Nothing

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T07:40:55.920

我没有关闭对服务器的请求，哦！在单独的实例中设置它为我解决了它。

我没有将文件名转换为二进制然后再转换为变体，只是将其保存为字符串。您必须省略LastCoder 示例`NOTHING`中最后给出的 。`LobjXML.SEND`添加这个会重现我上面给出的运行时错误。

感谢您的帮助，LastCoder。这是修改后的代码：

```
 Public Sub DeleteFromSharePoint()

Dim xmlhttp
Dim sharepointUrl, sharepointFolder, sharepointFileName
Dim f, strZip As String
Dim LobjXML As Object

' Parent Sharepoint
sharepointUrl = "[SHAREPOINT URL]"

' In this test module, we're just deleting from the parent directory
sharepointFolder = ""

' Sets the report name we want to remove
f = "test"

' Sets the full .ZIP filename
' This is how reports are archived by date
strZip = f & "%20-%20" & Format(Now() - 1, "YYYY.MM.DD") & ".zip"

Set LobjXML = CreateObject("Microsoft.XMLHTTP")

    sharepointFileName = sharepointUrl & sharepointFolder & strZip

    ' Removes the data from the server, false means synchronous
    LobjXML.Open "DELETE", sharepointFileName, False

    ' Sends the request to remove the file
    LobjXML.Send

  Set LobjXML = Nothing

End Sub 
```

# php - PHP require 失败且没有错误

> ID：12955837
> 
> 赞同：5
> 
> 时间：2012-10-18T13:26:57.540
> 
> 标签：php, include, require

这是我努力了几个小时的代码：

```
if ((require $_SESSION['ROOT_PATH'] . '/templates/core/menu_js.php') == 'OK') {
   echo 'OK';
} else {
   echo 'KO';
} 
```

如果我正确理解了关于“require”指令的 PHP 文档，则永远不应该编写“KO”，因为如果 require 不起作用，则会引发错误。

就我而言，即使有错误调整，也会始终显示“KO”：

```
error_reporting(E_ERROR | E_WARNING | E_PARSE | E_COMPILE_ERROR); 
```

请注意，相同的要求（或包含）在站点的其他页面中也能完美运行。

**编辑**

看了文档后添加了if结构。起初，我只有一行：

```
require $_SESSION['ROOT_PATH'] . '/templates/core/menu_js.php'; 
```

当我检查这条线没有工作时，我添加了`if`.

顺便一提。所需页面（当它工作时）`script`向调用页面添加了一个我在这个唯一页面上从未见过的标签。在使用此要求的任何其他页面上，脚本会出现在输出中。

所以我的问题应该是“如果没有显示所需的php文件的输出，为什么没有引发错误？”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:28:12.650

根据[文档](http://php.net/manual/en/function.include.php)

> 成功的包含，除非被包含的文件覆盖，否则返回 1... 此外，可以从包含的文件返回值。您可以像获取普通函数一样获取 include 调用的值。

所以你的文件没有返回“OK”。它返回 1（表示成功）或自定义值。

`require`是一种语言结构，而不是标准功能。通过使用`require`，您已经表明如果找不到文件，代码应该会失败。您很可能不需要检查返回值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T13:32:12.313

这只适用于您期望 if `menu_js.php`contains的方式`return 'OK';`。否则`require`工作正常，但返回值不是“OK”，这就是触发“KO”条件的原因。`require`不返回`'OK'`。如果`require`不起作用，程序将立即停止，您的`false`状况将永远不会像您认为的那样受到打击。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:33:43.847

这里有一些错误：

1.  根据 PHP 文档：

    > `require`与失败相同，`include`但它也会产生致命`E_COMPILE_ERROR`级别的错误。

    致命错误将停止您的脚本执行。

2.  `require`返回包含的文件返回的内容：

    ```
    // a.php
    return 'test';

    // b.php
    $result = require 'a.php';
    echo $result; // will display 'test' 
    ```

所以，不要测试`require`!的返回值 使用`is_file()`, then if `true`, 需要该文件！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T13:31:54.943

虽然 require 确实**不会**返回任何内容，但使条件**始终**返回“KO”，因为括号中的左侧值永远不会等于“OK”，您可以通过设置 display_errors ini 值来检查文件是否失败在这个脚本中暂时打开。

由于您已将错误报告设置为捕获此问题，因此您的 display_errors 可能已关闭，因此不会向您显示。像这样为此脚本设置它：

```
ini_set('display_errors', 'on'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T13:28:23.920

你不能`require`在`if`

用这个

```
if(file_exists($_SESSION['ROOT_PATH'] . '/templates/core/menu_js.php'))
{
 echo 'OK';
} else {
   echo 'KO';
} 
```

# ruby - irb --noprompt 错误，自动缩进开启

> ID：12955845
> 
> 赞同：0
> 
> 时间：2012-10-18T13:27:22.890
> 
> 标签：ruby, irb

我有时喜欢在 irb 上使用 --noprompt 选项，尤其是当我可能想从中复制代码并将其粘贴到其他地方时。但是，当 .irbrc 文件中出现以下内容时会发生错误：

```
IRB.conf[:AUTO_INDENT] = true 
```

irb启动时出现如下错误：

```
/Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:280:in `dup': can't dup NilClass (TypeError)
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:280:in `prompt'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:129:in `block in eval_input'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:206:in `call'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:206:in `prompt'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:220:in `initialize_input'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb/ruby-lex.rb:227:in `each_top_level_statement'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:155:in `eval_input'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:70:in `block in start'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:69:in `catch'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/irb.rb:69:in `start'
from /Users/keithb/.rvm/rubies/ruby-1.9.3-p125/bin/irb:16:in `<main>' 
```

在 JRuby 中也会出现该错误，但堆栈跟踪当然有点不同。

这是一个错误，对吧？人们会认为不适当的配置设置会得到更优雅的处理，至少会在更高级别报告错误的性质，以便用户知道如何解决它。或者是否可以争辩说在不存在的提示上指定缩进是开发人员的错？

——基思

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T22:38:56.190

这不是错误。

如果您希望`.irbrc`在特殊情况下忽略文件（例如当您需要时`--noprompt`），那么您可能还希望提供`-f`标志来禁止加载`.irbrc`文件。

提供相互矛盾的选项时，您将正确地遇到问题。

TLDR；

`irb -f --noprompt`

# php - 如何在php中操作表格

> ID：12955848
> 
> 赞同：-1
> 
> 时间：2012-10-18T13:27:41.370
> 
> 标签：php, arrays, list

请我有以下代码：

```
foreach($global as $item) 
    {   
        $item_array[] = array
                        (
                            '0'  => value($this->elem[0], $item),
                            '1'   => value($this->elem[1], $item),
                            '2' => value($this->elem[2], $item),
                            '3'  => value($this->elem[3], $item),
                            '4' => value($this->elem[4], $item)
                        );
    } 
```

我想将其简化为以下内容：

```
foreach($global as $item) 
    {       
        $i=0;
        array_push($item_array[], value($this->elem[$i], $item) );
        $i++; 
             } 
```

这段代码给了我一个错误，因为我的脚本需要“$item_array []”。我能做些什么 ？

注意：我是 PHP 的新手。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:34:13.407

您需要删除 [] 并将 $i=0 放在 for 循环之外。

# charts - BIRT Chart API将标题设置为带有等号的字符串会截断左侧的值

> ID：12955850
> 
> 赞同：1
> 
> 时间：2012-10-18T13:27:47.713
> 
> 标签：charts, birt

我正在尝试直接使用 Chart API，但遇到了表达式问题。

如果我尝试执行以下操作

```
chart.getTitle().getLabel().getCaption().setValue("Day of Week (M=1)"); 
```

结果标签是：

```
1) 
```

如果我从值中删除“=”，它可以正常工作，但“=”似乎正在触发表达式评估。

请注意，这是使用图表引擎 API，并且此图表不与 BIRT 报告相关联。

有人有什么建议吗？

**编辑**看起来在生成图表时，它试图将图表标题解析为外部化消息的键。RunTimeContext.externalizeMessage(...) 因为我的标题包含一个“=”符号。有没有办法逃避这个以防止它试图把它渲染成这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T11:51:16.130

我对此进行了更深入的研究，并且能够通过实现一个外部化器并将其键入以将键和默认值与“=”令牌常量连接起来来伪造它。

因为这是出于演示目的，所以它起作用了……虽然不是最佳解决方案，但它得到了我所需要的。

# android-layout - Android - 当样式是自定义的并由主题控制时，以编程方式更改 TextView 的样式

> ID：12955852
> 
> 赞同：1
> 
> 时间：2012-10-18T13:27:52.803
> 
> 标签：android-layout, android-theme, android-styles

我在我的 android 应用程序中使用主题来根据清单中当前选择的主题来控制将哪些样式应用于每个元素。

在任何一个主题（其中可能有很多）中，都有许多样式我想在运行时在它们之间切换。例如，我有一个样式定义了文本的正常外观，另一种样式定义了当代码输入错误时同一段文本的外观。

我不能直接引用@style，因为这是由主题决定的。

我制作了一个示例应用程序来说明我的问题（请注意，下面的片段省略了一些不相关的点点滴滴）

**Attrs.xml：（**我的自定义资源引用，所以我的布局不直接引用样式）

```
<resources>
    <attr name="theme_style_one" format="reference" />
    <attr name="theme_style_two" format="reference" />
</resources> 
```

**Themes.xml：（**根据主题选择合适的样式应用）

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
<style name="ThemeOne" parent="android:Theme">
    <item name="theme_style_one">@style/blue</item>
    <item name="theme_style_two">@style/red</item>
</style>

<style name="ThemeTwo" parent="android:Theme">
    <item name="theme_style_one">@style/green</item>
    <item name="theme_style_two">@style/red</item> 
</style>
</resources> 
```

**Styles.xml**（样式本身）

```
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="blue">
        <item name="android:textColor">@color/color_blue</item>
    </style>

    <style name="red">
        <item name="android:textColor">@color/color_red</item>
    </style>

    <style name="green">
        <item name="android:textColor">@color/color_green</item>
    </style>
</resources> 
```

**Colors.xml**（只是一些颜色）

```
<resources>
      <color name="color_blue">#0000FF</color>
      <color name="color_green">#00FF00</color>
      <color name="color_red">#FF0000</color>
</resources> 
```

**活动主布局：**

```
<TextView
    android:id="@+id/txt_text"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="@string/hello_world"
    style="?theme_style_one" /> 
```

**activity_main 的 onCreate：**

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    TextView textView = (TextView)findViewById(R.id.txt_text);
    textView.setTextAppearance(this, R.attr.theme_style_two);
} 
```

我想要实现的是以编程方式将 TextView 的样式更改为“theme_style_two”。“SetTextAppearance”命令无效。我无法在此命令中直接引用 @style/blue，因为如果我更改清单中的主题，则会应用不正确的样式。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-07T08:22:09.127

```
 /**
     * Gets a colour attribute for the specified theme attribute
     * 
     * @param The activity context so we can get the theme
     * @param themeAttr The theme attribute we want to get the style attribute for (e.g. R.attr.text_small)
     * @param styleAttr The attribute of the style that we want to get the value for (e.g. android.R.attr.textColor)
     * @return The resource ID of the colour (default is black if the style attribute can't be found)
     */
    public static int GetColourFromThemeAttribute(Context c, int themeAttr, int styleAttr)
    {
        // Get the resource ID of the style that the attribute references for the current theme
        TypedValue typedValue = new TypedValue();
        c.getTheme().resolveAttribute(themeAttr, typedValue, true);

        // Define an array of attributes we want to get from the style
        int[] attributes = new int[] { styleAttr };

        // Get the style attributes from the style that the theme attribute references
        TypedArray a = c.obtainStyledAttributes(typedValue.data, attributes);

        // Get the colour from the list of style attributes
        int colour = a.getColor(0, Color.BLACK);

        // Release the typed array
        a.recycle();

        return colour;
    } 
```

# php - 从左边获取字符直到空格，然后再获取一个字符

> ID：12955853
> 
> 赞同：1
> 
> 时间：2012-10-18T13:27:52.907
> 
> 标签：php

我想从左边获取所有文本，直到有一个空格，然后在空格后面再得到一个字符。

例如： ***“Brian Spelling”***将是***“Brian S”***

我怎样才能在 php 中做到这一点？

在 ASP 中，代码如下所示：

```
strName1=left(strName1,InStr(strName1, " ")+1) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:30:38.740

```
<?php
$strName1 = "Brian Spelling";
$strName1 = substr($strName1, 0, strpos($strName1, ' ')+2);
echo $strName1; 
```

印刷

```
Brian S 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-18T13:31:01.330

1.  找到空间的索引[`strpos`](http://php.net/manual/en/function.strpos.php)
2.  从开头提取字符串到该索引+ 2[`substr`](http://php.net/manual/en/function.substr.php)

还要考虑您可能需要如何更新名称的逻辑，例如：

*   HG 威尔斯
*   马丁路德金。
*   雪儿

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-18T13:31:05.620

用函数分割你的字符串，用`explode`函数子串第二部分的第一个字符`substr`。

```
$explodedString = explode(" ", $strName1);

$newString = $explodedString[0] . " " . substr($explodedString[1], 1); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T13:31:44.227

```
$string = "Brian Spelling";
$element = explode(' ', $string);
$out = $element[0] . ' ' . $element[1]{0}; 
```

只是为了好玩，在建议下采纳 Rob Hruska 的答案，你可以做这样的事情：

```
$skip = array( 'jr.', 'jr', 'sr', 'sr.', 'md' );
$string = "Martin Luther King Jr.";
$element = explode(' ', $string);
$count = count( $element );
if( $count > 1)
{
    $out = $element[0] . ' ';
    $out .= ( in_array( strtolower( $element[ $count - 1 ] ), $skip ) )
        ? $element[ $count - 2 ]{0} : $element[ $count - 1 ]{0};
} else $out = $string;
echo $out; 
```

- 刚刚编辑所以“雪儿”也可以工作

添加要跳过的任何后缀添加到 $skip 数组

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-18T13:32:58.593

正则表达式 - 确保它使用 /U 修饰符（不贪婪）命中第二个单词。

```
$t = "Brian Spelling something else";
preg_match( "/(.*) ./Ui", $t, $r );
echo $r[0]; 
```

你会得到“Brian S”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-18T13:36:36.570

试试下面的代码

```
$name="Brian Lara"
$pattern = '/\w+\s[a-zA-Z]/';
preg_match($pattern,$name,$match);
echo $match[0]; 
```

输出

```
Brian L 
```

# git - 如何为 HTTPS git push 设置默认用户名？

> ID：12955854
> 
> 赞同：8
> 
> 时间：2012-10-18T13:27:53.923
> 
> 标签：git, github

我想使用 HTTPS 推送到托管在 github 上的远程仓库。不，我不想使用 SSH 或任何其他协议，所以请不要这样做。

现在，我知道您可以在远程本身中指定默认用户名，如下所示：

```
git remote add origin https://[Username]@github.com/[OrgName]/[RepoName].git 
```

但是，考虑到 github 提供的默认 HTTPS URL*不*包含用户名，这可能意味着每个开发人员都需要手动修改远程 URL 以添加他们的用户名。是不是有一些全局配置设置可以用来告诉 git 你的默认推送用户名？如果没有，为什么 github 不给你一个包含该`[Username]@`部分的 HTTPS 远程 URL？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-18T14:19:03.467

好的，git凭证可以做到这一点。将此添加到我的 git 配置中解决了问题：

```
[credential "https://github.com"]
    username = (MyUsername) 
```

注意 git 凭证是 git 中一个相对较新的功能，在 1.7.9 或其他版本中发布，因此它在旧版本中不起作用。

# jquery - 列出绑定在 dom 元素上的所有 jquery 事件

> ID：12955857
> 
> 赞同：3
> 
> 时间：2012-10-18T13:28:10.403
> 
> 标签：jquery, google-chrome-devtools

我正在开发一个意大利面条编码的网站。某些元素会出现一些奇怪的动作。Chrome 事件侦听器上没有列出任何内容。

有没有其他的方式来看待它？就像在控制台中写这样的东西：

```
$('#myElement').getEvents(); //Not a real code 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:47:21.783

作为另一种选择，您可以使用以下钩子在 jQuery 绑定和元素之间切换：

```
(function($){
    var event_add_orig = $.event.add;
    $.event.add = function(){
        console.log('Added event (' + arguments[0].tagName + '::' + arguments[1] + ')');
        // arguments[0] // elem
        // arguments[1] // types
        // arguments[2] // handler
        // arguments[3] // data
        // arguments[4] // selector
        event_add_orig.apply(this, arguments);
    };
})(jQuery); 
```

这样，您将看到在整个页面中应用的每个绑定。然后，您可以使用更多逻辑将其提炼为指定的事件或元素。请记住，这需要在页面上的任何其他内容执行之前定义，但当然是在 jQuery 定义之后。

# git - 如何强制 git 对所有更改使用 mergetool？

> ID：12955862
> 
> 赞同：0
> 
> 时间：2012-10-18T13:28:26.103
> 
> 标签：git, merge

我的计算机上有一个 c 项目，在 git 中有他自己的 repo 和分支。我不得不将它集成到另一台设备上，我们也在那里进行了一些更改。然后这些更改的文件作为存档通过电子邮件发回给我。

现在我想在我的 repo 和新文件之间进行合并，选择我想要更改的每一行以及不应该更改哪一行，但是 git 显示没有合并冲突，只是将新更改应用于旧文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:35:19.870

问题解决了在文件夹上使用合并工具。我不知道。

# .htaccess - htaccess：仅将 .html 文件重定向到网站根目录

> ID：12955867
> 
> 赞同：1
> 
> 时间：2012-10-18T13:28:43.093
> 
> 标签：.htaccess, redirect

我最近将一个静态站点升级为 CMS，我想将旧站点的所有 html 文件重定向到站点的根目录 (http://www.url.com)，而不影响 CMS 的 PHP。

当前的 htaccess 看起来像这样

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME}/index.html !-f
RewriteCond %{REQUEST_FILENAME}/index.php !-f
RewriteRule . index.php [L]
</IfModule> 
```

显然，我添加的任何新规则都不得与此冲突。

我希望将旧文件 (url.com/page.html) 重定向到 url.com。

搜索后我尝试了一些东西，但没有任何效果。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T20:29:28.890

您需要在CMS 规则**之前添加这些规则：**

```
RewriteEngine On

# check that the request isn't for a legitimate existing resource
RewriteCond %{REQUEST_FILENAME} !-f

# redirect the .html request to the site root
RewriteRule ^(.*)\.html$ / [L,R=301] 
```

# android - BaseAdapter getView 类转换异常

> ID：12955874
> 
> 赞同：1
> 
> 时间：2012-10-18T13:29:10.450
> 
> 标签：android, android-gallery, classcastexception, baseadapter

我试图根据 position 在 BaseAdapter 的 getView 方法中返回 2 种不同类型的视图。

但我得到了 ClassCastException。下面是我的代码：

```
public View getView(final int position, View convertView, ViewGroup parent) {
    if(position != 5){

        WebPageView web;
        if(convertView == null){

            web = new WebPageView(mContext, new Point(parent.getWidth(), parent.getHeight()), parent);

    } else {
        web = (WebPageView) convertView;

    }

        web.setPage("http://yahoo.com");
        return web;
    }else{
    final PageView pageView;
    if (convertView == null) {
        pageView = new PageView(mContext);
    } else {
        pageView = (PageView) convertView;
    }

    return pageView;
}
} 
```

但我总是得到 ClassCastException。当我在 getView 中单独使用 WebPageView 或 PageView 时，我没有收到异常。

任何人有任何想法？

下面是我的 logcat 输出。

```
10-18 18:03:59.250: E/AndroidRuntime(31390): FATAL EXCEPTION: main
10-18 18:03:59.250: E/AndroidRuntime(31390): java.lang.ClassCastException: com.getit.WebPageView cannot be cast to com.getit.PageView
10-18 18:03:59.250: E/AndroidRuntime(31390):    at com.getit.PageAdapter.getView(PageAdapter.java:94)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at com.getit.CustomGalleryView.getOrCreateChild(CustomGalleryView.java:467)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at com.getit.CustomGalleryView.onLayout(CustomGalleryView.java:422)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.View.layout(View.java:13754)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewGroup.layout(ViewGroup.java:4364)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.widget.RelativeLayout.onLayout(RelativeLayout.java:948)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.View.layout(View.java:13754)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewGroup.layout(ViewGroup.java:4364)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.View.layout(View.java:13754)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewGroup.layout(ViewGroup.java:4364)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.widget.LinearLayout.setChildFrame(LinearLayout.java:1649)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.widget.LinearLayout.layoutVertical(LinearLayout.java:1507)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.widget.LinearLayout.onLayout(LinearLayout.java:1420)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.View.layout(View.java:13754)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewGroup.layout(ViewGroup.java:4364)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.widget.FrameLayout.onLayout(FrameLayout.java:448)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.View.layout(View.java:13754)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewGroup.layout(ViewGroup.java:4364)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewRootImpl.performLayout(ViewRootImpl.java:1868)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1689)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:1000)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4214)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.Choreographer$CallbackRecord.run(Choreographer.java:725)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.Choreographer.doCallbacks(Choreographer.java:555)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.Choreographer.doFrame(Choreographer.java:525)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:711)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.os.Handler.handleCallback(Handler.java:615)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.os.Handler.dispatchMessage(Handler.java:92)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.os.Looper.loop(Looper.java:137)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at android.app.ActivityThread.main(ActivityThread.java:4745)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at java.lang.reflect.Method.invokeNative(Native Method)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at java.lang.reflect.Method.invoke(Method.java:511)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-18 18:03:59.250: E/AndroidRuntime(31390):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:39:55.610

您会收到此错误，因为您尝试回收已被转换为另一个对象的视图。我不知道您是否使用自定义对象，就好像两者都在扩展一个可以工作的公共类一样。您可以做两件事：

1：检查转换视图是否是您的自定义对象的一个​​实例。这可确保您不会尝试将网页浏览量转换为网页浏览量，反之亦然

```
if (convertView == null || !convertView instanceof PageView) {
    pageView = new PageView(mContext);
} else {
    pageView = (PageView) convertView;
} 
```

同样检查webview。

2：每次实例化一个新对象

```
if(position != 5){
WebPageView web;
web = new WebPageView(mContext, new Point(parent.getWidth(), parent.getHeight()), parent);
web.setPage("http://yahoo.com");
return web;
}else{
final PageView pageView;
pageView = new PageView(mContext);
return pageView;
} 
```

不是很建议，但仍然...

# java - Eclipse 中以下问题的根源是什么？

> ID：12955877
> 
> 赞同：0
> 
> 时间：2012-10-18T13:29:19.630
> 
> 标签：java, eclipse

我有一个包含所有结构的现有 src/java 目录。

我在Eclipse中新建了一个java项目，src目录自然读入了项目中。

但是，有几个问题：

*   (a) 我无法运行任何东西（Java 解释器找不到该类，即使它是源代码的一部分），
*   (b) 错误不会将文件标记为有错误，它们仅在源代码中的相关行标记（以前从未出现过该问题）
*   (c) 在左侧的资源管理器中，java 项目的标题旁边有一个大大的感叹号。

我可能错误地配置了一些东西，但我不确定是什么。有没有办法至少看到大感叹号的原因是什么？我很确定它会提供一些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:31:19.007

该项目的 JRE 引用可能配置错误。检查**Project > Properties > Java Build Path**并查看是否正确引用了 JRE 库。如果没有，通过**Add Library > JRE System Library 添加**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:32:46.027

听起来您的源目录不是 eclipse 项目的一部分。右键单击项目（在 Eclipse 资源管理器中），打开属性并单击 java 构建路径。检查您的源目录是否列在源选项卡中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:34:59.397

您的 java 项目有构建问题，因此文件没有被编译。**主要是由于构建路径。** 通过去更正构建路径，`Project-> Properties -> Java Build Path`然后重试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-18T14:06:27.320

我认为您的路径设置存在一些问题，请遵循

```
1 : Project-> (right click)BUildPath -> Libraries 
```

检查任何库上是否有任何红色标志，只需删除并使用正确的路径再次添加它。

```
2 : if you are using some jar file , add as external jar from the same process . 
```

3：如果这不能达到目的，

```
open window -> showview -> markers 
```

阅读此处的错误并尝试可用的快速修复。如果问题仍然存在，请告诉我们

# c++ - Clang 错误，没有可行的转换

> ID：12955878
> 
> 赞同：4
> 
> 时间：2012-10-18T13:29:21.513
> 
> 标签：c++, gcc, clang, wchar-t, char16-t

我遇到了clang 3.1的问题。GCC 4.2 不会出现此特定问题。以下是发生的错误的示例：

```
#include <stdio.h>
#include <iostream>
#include <sstream>
#include <string>

typedef unsigned short char16_t;
typedef char16_t TCHAR;

typedef std::basic_string<TCHAR, std::char_traits<TCHAR>, std::allocator<TCHAR> > wstringT;

template<class T>
inline wstringT MyTestFunction(const T& source)
{
std::wstringstream out;
out << source ;
return out.str();    // error occurs here
}; 
```

错误消息指出：

```
No viable conversion from '__string_type' (aka 'basic_string<wchar_t, std::char_traits<wchar_t>, std::allocator<wchar_t> >') to 'wstringT' (aka 'basic_string<TCHAR, std::char_traits<TCHAR>, std::allocator<TCHAR> >') 
```

代码使用编译器标志 -fshort-wchar 编译，它应该将 wchar_t 转换为 16 位无符号短整型。我正在 XCode v4.3.2 上编译代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:32:17.960

如果你想使用`TCHAR`，你必须让每个模板扩展以使用它，包括`wstringstream`你真正想要的`basic_stringstream<TCHAR>`或者你可以：

```
typedef std::basic_stringstream<TCHAR> tstringstream; 
```

# viewstate - 查看禁用控件的状态

> ID：12955879
> 
> 赞同：1
> 
> 时间：2012-10-18T13:29:26.713
> 
> 标签：viewstate, disabled-control

我已经创建了 ASP.Net 服务器控件。它上面有 ComboBoxies。启用 ComboBox 时它会正常保存视图状态，禁用时 [b] 不保存 [/b]。是我的错吗？我该如何纠正？

# php - 如何即时更新 php 中的多电子表格 xls 文件？

> ID：12955881
> 
> 赞同：2
> 
> 时间：2012-10-18T13:29:47.337
> 
> 标签：php, xls

我有一个包含 15 个电子表格的示例 xls 文件。他们每个人都有某种样本数据。我必须更新一些单元格值。我怎么能在 php 中做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:33:31.147

目前没有用于 Excel 电子表格的统一读取器/写入器包，因此您必须使用两个单独的包，一个读取器包和一个写入器包。您可以尝试 Google Code 中提供的 ExcelReader 项目或 souceforge 中的 PHP-ExcelReader 包和 PEAR 中的 Spreadsheet_Excel_Writer 包，以构建适合从电子表格中读取数据的东西，将其导入数据库，然后进行编辑并将其保存为Excel。

干杯

链接：

*   [http://code.google.com/p/php-excel-reader/](http://code.google.com/p/php-excel-reader/)
*   [http://sourceforge.net/projects/phpexcelreader/](http://sourceforge.net/projects/phpexcelreader/)
*   [http://pear.php.net/package/Spreadsheet_Excel_Writer](http://pear.php.net/package/Spreadsheet_Excel_Writer)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:44:51.583

使用[PHPExcel](http://phpexcel.codeplex.com)库：

```
$myExcelFile = 'myFile.xls'
$objPHPExcel = PHPExcel_IOFactory::load($myExcelFile);

$objPHPExcel->getActiveSheet()
    ->setCellValue('A1', 'Hello')
    ->setCellValue('B1', 'World!')

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
$objWriter->save($myExcelFile); 
```

# jquery - phonegap jqm 位置和安全设置

> ID：12955886
> 
> 赞同：1
> 
> 时间：2012-10-18T13:30:03.067
> 
> 标签：jquery, cordova

您知道 phonegap 中的系统允许我直接从应用程序（android 和 ios）打开位置和安全设置吗？

# java - 如果运行时间过长，我可以使用 executorservice 杀死特定线程吗？

> ID：12955889
> 
> 赞同：5
> 
> 时间：2012-10-18T13:30:05.263
> 
> 标签：java, multithreading, interrupt, executor

到目前为止，在我对 executorservice 的实验中，我有很多建议涉及使用future.get，然后是future.cancel 以便抛出一个线程中断，然后需要在线程中捕获该线程中断并在那里处理。我的问题有点不同。

假设我正在运行一个线程，它只是跟踪事物运行了多长时间以及它们是否超过了某个阈值，这是否是杀死 executorservice 和所有正在运行的线程的好方法？

思维过程示例：

```
ExecutorService threadPool = Executors.newFixedThreadPool(12);
timekeeper.start();
List<Future<?>> taskList = new ArrayList<Future<?>>();
    for (int i = 0; i < objectArray.length; i++) {
        Future<?> task = threadPool.submit(new ThreadHandler(objectArray[i], i));
        taskList.add(task);
        Thread.sleep(500);
    }

if(timekeeper.now() > 60)
    threadpool.shutdownNow();
} 
```

这行得通吗？我无法检查，因为我的线程非常罕见地失败（大约 1/700 次运行，并且仅在我不工作的一天中的某些时间）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:33:58.480

这就是我会做的

```
ExecutorService threadPool = Executors.newFixedThreadPool(12);
List<Future<?>> taskList = new ArrayList<Future<?>>();
for (int i = 0; i < objectArray.length; i++) {
    taskList.add(threadPool.submit(new ThreadHandler(objectArray[i], i)));
threadPool.shutdown();
threadPool.awaitTermination(60, TimeUnit.SECONDS); // or what ever
threadPool.shutdownNow(); 
```

这假设您的任务将尊重中断。如果他们不这样做，就没有干净的方法来杀死线程（除了使用一个几乎相同的标志）

* * *

此处不使用 Thread.stop() 的原因

*   您无权访问 Thread 对象来调用 stop() 。
*   如果一个任务忽略了中断（），它可能表现不佳，这可能会使堆处于损坏状态。
*   调用 stop() 应该停止任务，但不会停止线程池线程，除非它已经被`shutdown()`捕获。（诚​​然，很容易解决）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T13:37:34.923

该`shutdownNow`方法尝试中断所有活动的任务线程，并且这仅在任务被编码为受尊重的中断时才有效。他们需要：

*   检查是否在长时间运行的循环中设置了中断标志，以及

*   正确处理`InterruptedException`s。

基本上，任务需要配合中断才能工作。如果他们不合作，就没有安全可靠的方法来阻止他们……除了退出 JVM。

* * *

> 上面有人提到 .stop() 方法作为评论，你能评论一下为什么这是一个坏主意吗？

该[`Thread.stop()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#stop%28%29)方法已被[弃用](http://docs.oracle.com/javase/7/docs/technotes/guides/concurrency/threadPrimitiveDeprecation.html)，因为它从根本上是不安全的。停止一个线程可能会使关键数据结构处于中间状态，并且可能会干扰以各种方式与其交互的其他线程。理论上是可以`stop`安全使用的，但是很难制定出一套足以保证没有坏事发生的通用前提条件。

# java - Java中的子字符串 - 长度不超过一个值

> ID：12955890
> 
> 赞同：13
> 
> 时间：2012-10-18T13:30:18.777
> 
> 标签：java, string, substring

我正在尝试创建一个子字符串，它可以让我拥有最多 6 个姓氏的字母，但是当它找到少于 6 个字母的姓氏时，我在这里所拥有的似乎会引发错误，我一直在寻找几个小时的解决方案没有成功：/

```
id = firstName.substring (0,1).toLowerCase() + secondName.substring (0,6).toLowerCase();
System.out.print ("Here is your ID number: " + id); 
```

这是`.substring(0,6)`. 我需要它*最多为*6 个字母，而不是 6 个。

错误：

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 6
    at java.lang.String.substring(Unknown Source)
    at Test.main(Test.java:27) 
```

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-10-18T13:32:20.413

利用

```
secondName.substring (0, Math.min(6, secondName.length())) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T13:33:16.790

我更喜欢

```
secondName.length > 6 ? secondName.substring(0, 6) : secondName 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-05T19:23:37.123

[试试 Apache Commons StringUtils 类。](https://commons.apache.org/proper/commons-lang/javadocs/api-2.6/org/apache/commons/lang/StringUtils.html)

```
// This operation is null safe.
org.apache.commons.lang.StringUtils.substring(secondName, 0, 6); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T13:36:45.457

这可能是一个解决方案：检查姓氏的长度并做出相应决定

```
if (secondName.length() >6)
id = firstName.substring (0,1).toLowerCase() + secondName.substring (0,6).toLowerCase(); 
else
id = firstName.substring (0,1).toLowerCase() + secondName.substring (0,secondName.length()).toLowerCase();

System.out.print ("Here is your ID number: " + id); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-18T13:32:32.910

尽管您没有提供错误，但很容易发现问题：

```
 id = firstName.substring (0,1).toLowerCase() + secondName.substring (0,6<secondName.length()?6:secondName.length).toLowerCase();
 System.out.print ("Here is your ID number: " + id); 
```

**编辑**这可能更具可读性：

```
 id = firstName.substring (0,1).toLowerCase() + (6<secondName.length()?secondName.substring(0,6):secondName).toLowerCase();
 System.out.print ("Here is your ID number: " + id); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-18T13:36:28.947

您将收到 java.lang.StringIndexOutOfBoundsException。

您需要确保长度始终小于字符串长度。就像是

```
int len = Math.min(6, secondName.length());
String id = firstName.substring (0,1).toLowerCase() + secondName.substring (0,len).toLowerCase(); 
```

# android - Android：编写支持消息队列的自定义视图

> ID：12955899
> 
> 赞同：1
> 
> 时间：2012-10-18T13:30:50.570
> 
> 标签：android, mobile

您如何在 Android 中实现自定义视图，以便它正确支持或使用消息队列？

我正在尝试模拟内置视图的行为，以便我可以正确/正常地使用 onCreate 中的数据更新自定义视图。

目前，我的自定义视图具有临时设置/更新功能，可将数据放入其中。这样做的问题是，我的视图的子视图直到第一次调用 onMeasure 时才被初始化，这是在 onCreate 退出之后（我认为这是内置插件的做法）。

因此，我想知道从 onCreate 更新自定义视图的一般策略是什么（即，要覆盖哪些方法），以便更新进入消息队列并在正确实例化后到达视图（就像内置）？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T14:43:44.980

看看[View.post()](https://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    final TextView hello = ((TextView) findViewById(R.id.hello));
    hello.post(new Runnable() {
        @Override
        public void run() {
            hello.setText("Hello World!");
        }
    });
} 
```

# .net - System.IO.Compression.ZipFile UnauthorizedAccessException

> ID：12955907
> 
> 赞同：14
> 
> 时间：2012-10-18T13:31:15.037
> 
> 标签：.net, zipfile

我正在尝试使用 .NET 4.5 ZipFile 类和 CreateFromDirectory(string, string) 方法备份一些文件。我收到 UnauthorizedAccessException - 拒绝访问。我可以成功读取该目录中的所有文件以及将文件写入该目录。所以我认为权限设置正确。关于为什么我在 ZipFile 类上被拒绝访问的任何想法？

```
static void Main(string[] args)
{
    string backupLocation = @"C:\Backups";
    string directoriesToBackup = @"F:\myMedia\myPictures\Our Family\2012\Misc";

    try
    {
        ZipFile.CreateFromDirectory(directoriesToBackup, backupLocation);
    }
    catch (System.UnauthorizedAccessException e) 
    {
        Console.WriteLine(e.Message);
    }

    DirectoryInfo di = new DirectoryInfo(@"F:\myMedia\myPictures\Our Family\2012\Misc");
    File.Create(@"F:\myMedia\myPictures\Our Family\2012\Misc\testCreateFromVs.txt");
    foreach (FileInfo i in di.GetFiles())
    {
        Console.WriteLine(i.Name);
    }

    Console.ReadKey();

} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-18T14:03:04.717

**看来你误会了什么。**

```
backupLocation = @"C:\Backups"; 
```

你想用一个**文件覆盖****目录**“C:\Backups” ！这是不允许的！;-） （拒绝访问）

 **您必须使用文件名指定路径。
**语法： CreateFromDirectory(string,string)**

```
public static void CreateFromDirectory(
    string sourceDirectoryName,
    string destinationArchiveFileName
) 
```

例子：

```
 string startPath = @"c:\example\start";
 string zipPath = @"c:\example\result.zip";
 ZipFile.CreateFromDirectory(startPath, zipPath);
 [...] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T12:58:53.260

在我的情况下，我在开始将文件压缩到那里之前尝试创建目标目录，但是将目标目录创建为 zip 文件的名称，所以因为空的 zip 文件已经存在（作为目录），所以我得到了同样的错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-04-14T12:43:44.093

当与（输出）zip 同名的文件夹已经存在时，也会出现此问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-01-21T10:58:40.467

就我而言，我正在使用 Unity，并且我已手动将 System.IO.Compression.dll 和 System.IO.Compression.ZipFile.dll（以及相关的 XML）添加到 Assets 文件夹中。

但是我选择了一个带有错误 SDK 版本的 DLL，虽然它在 MacO 上运行良好，但在 Android 和 iOS 上却出现了 UnauthorizedAccessException。

我通过删除 dll 和 XML 并关注[Unity Forum](https://forum.unity.com/threads/c-compression-zip-missing.577492/page-2)上的帖子解决了这个问题。

基本上你必须确保你的项目 Api Compatibility Level 和 dll .Net 版本匹配。**

# android - 使用 NFC_EXTRAS 在 Android ICS 上启用 CardEmulation

> ID：12955919
> 
> 赞同：7
> 
> 时间：2012-10-18T13:32:09.213
> 
> 标签：android, payment, nfc

我需要 NFC 和 Android 方面的帮助。

在进行了大量研究以在 Android 上模拟 Mifare 4K 之后，我发现唯一存在的补丁是为 2.3.4 制作的。在 StackOverFlow 中，NFCGuy 告诉我们，从 Android 的 API 14 开始，不需要修补 ROM，因此我们可以使用隐藏的 Nfc_extras 包打开卡模拟。

我已经使用带有反射的 NFC_EXTRAS 编译了一个 APK，并将我的签名和包添加到 nfcee_access.xml。

在我将 cardEmulationRoute 设置为 ON_WHEN_SCREEN_ON 后，我在 logcat 中得到一个输出，告诉我 NFCEE 已打开且 NFC_CC 已打开，但是当我将 Nexus S 靠近 ACR122 时，它没有检测到 2.3.4 补丁制造商可以检测到的 Emulated Mifare 4K得到。我可以得到一张无法识别的智能卡（我想它是 SE 像智能卡一样），但我需要使用模拟的 Mifare。

**我是否需要像在 2.3.4 补丁中那样修改 lib-nfc 才能使该小程序正常工作（Mifare Manager）？或者我的应用程序访问该包应该足够了？**

我正在下载 android 源以将 2.3.4 补丁移植到 4.1，但查看他们发布的差异，lib-nfc 库上与 4.1 仅存在差异。（定义注释，理论上用于卡模拟）

也许不需要重新编译修改后的 ROM，我错过了获得模拟 Mifare 4k 的一小步。

感谢您对 StackOverFlow 中所有人的帮助

问候

```
 private void getSecureElement(){
    try{
        //Obtenemos la clase NFCAdapterExtras
        Class nfcExtrasClazz = Class.forName("com.android.nfc_extras.NfcAdapterExtras");

        if (nfcExtrasClazz == null){
            Log.w("EnableCardEmu", "No existe la clase Extras");
            return;
        }

        Log.w("EnableCardEmu", "Existe la clase");

        //Obtenemos el método "get" de dicha clase
        Method getMethod = nfcExtrasClazz.getMethod("get", Class.forName("android.nfc.NfcAdapter"));

        if (getMethod == null) {
            Log.w("EnableCardEmu", "No existe el método");
        } else {
            Log.w("EnableCardEmu", "Existe el método");
            //Obtenemos el manager del componente NFC del dispositivo
            NfcAdapter adapter = NfcAdapter.getDefaultAdapter(this);

            if (adapter == null)
                Log.w("EnableCardEmu", "Adapter es null");
            else {
                //Instancia del SecureElement
                Log.w("EnableCardEmu", "Adapter NO es null");
                nfcExtras = getMethod.invoke(null, adapter);

                Method getEEMethod = nfcExtras.getClass().getMethod("getEmbeddedExecutionEnvironment", 
                        (Class[]) null);
                embebbed = getEEMethod.invoke(nfcExtras , (Object[]) null);
            }
        }
    } catch (InvocationTargetException ee){
        Log.w("EnableCardEmu", ee.getTargetException());
    }
    catch (Exception e){
        Log.w("EnableCardEmu", e.getClass().getName() + " / " + e.getMessage());
        StackTraceElement[] a = e.getStackTrace();
        for (StackTraceElement aa : a){
            Log.w("EnableCardEmu", aa.toString());
        }
    } 
}

    private void deactivateCardEmulation(){
    try{
        Class clss = Class.forName("com.android.nfc_extras.NfcAdapterExtras");
        Class[] cs = clss.getDeclaredClasses();
        /*          
        for (Class cc : cs){
            Log.w("EnableCardEmu", cc.getName();)
        }*/

        //Class route = Class.forName("com.android.nfc_extras.NfcAdapterExtras$CardEmulationRoute");
        Constructor c = cs[0].getConstructor(Integer.TYPE, Class.forName("com.android.nfc_extras.NfcExecutionEnvironment"));
        Object routeOn = c.newInstance(1, null);

        Class cls = nfcExtras.getClass();           
        Method mtd = cls.getMethod("setCardEmulationRoute", cs[0]);
        mtd.invoke(nfcExtras, routeOn);
    } catch (InvocationTargetException ee){
        Log.w("EnableCardEmu", ee.getTargetException());
    } catch (Exception e){
        Log.w("EnableCardEmu", e.getClass().getName() + " / " + e.getMessage());
    }
}

    private void activateCardEmulation(){
    try{

        Class clss = Class.forName("com.android.nfc_extras.NfcAdapterExtras");
        Class[] cs = clss.getDeclaredClasses();
        /*          
        for (Class cc : cs){
            Log.w("EnableCardEmu", cc.getName();)
        }*/

        //Class route = Class.forName("com.android.nfc_extras.NfcAdapterExtras$CardEmulationRoute");
        Constructor c = cs[0].getConstructor(Integer.TYPE, Class.forName("com.android.nfc_extras.NfcExecutionEnvironment"));
        Object routeOn = c.newInstance(2, embebbed);

        Class cls = nfcExtras.getClass();           
        Method mtd = cls.getMethod("setCardEmulationRoute", cs[0]);
        mtd.invoke(nfcExtras, routeOn);
    } catch (InvocationTargetException ee){
        Log.w("EnableCardEmu", ee.getTargetException());
    } catch (Exception e){
        Log.w("EnableCardEmu", e.getClass().getName() + " / " + e.getMessage());
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:52:37.527

您的代码似乎应该正确启用卡模拟模式。我也在尝试同样的事情并遇到了类似的问题，我无法使用与 MIFARE 兼容的 RFID 阅读器检测到手机。

原来的原因是我正在使用的手机支持 NFC，但没有安装嵌入式安全元件。安全元件位于 SIM 卡上，而 ICS 4.0.3 中的内置 NFC 支持无法定位和使用该安全元件。

当通过某些手机供应商而不是通过我的供应商销售时，同一品牌/型号的手机具有嵌入式安全元件。

当我尝试对我的 NfcExecutionEnvironment 实例进行“打开”时，我得到了第一个提示，这就是原因，并且在我的 logcat 中显示了以下输出：

```
D/NFC JNI (  911): phLibNfc_SE_GetSecureElementList()
D/NFC JNI (  911): 
D/NFC JNI (  911): > Number of Secure Element(s) : 0
E/NFC JNI (  911): phLibNfc_SE_GetSecureElementList(): No SMX detected 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-18T21:26:47.980

我认为问题可能出在`Object routeOn = c.newInstance(2, embebbed)`. 看起来这个对象的类型错误（不过，我不是阅读反射代码的专家）。

我就是这样做的，没有反射，并且工作正常（设备同时模拟 ISO 14443-4A 卡和 MIFARE Classic 卡）：

```
Context mContext; // initialize this
NfcAdapterExtras mAdapterExtras =
  NfcAdapterExtras.get(NfcAdapter.getDefaultAdapter(mContext));
NfcExecutionEnvironment mEe = mAdapterExtras.getEmbeddedExecutionEnvironment();
mAdapterExtras.setCardEmulationRoute(
  new CardEmulationRoute(CardEmulationRoute.ROUTE_ON_WHEN_SCREEN_ON, mEe)); 
```

无需为此修改 libnfc-nxp。

# jquery-mobile - 如何使用 Bootstrap 的选项卡和 jQuery Mobile 的页面？

> ID：12955924
> 
> 赞同：1
> 
> 时间：2012-10-18T13:32:25.073
> 
> 标签：jquery-mobile, twitter-bootstrap

我正在开发一个使用桌面版 Bootstrap 和移动设备版 jQuery Mobile 的网站。我在 Bootstrap 中的选项卡与 jQuery Mobile 中的页面的 HTML 结构方面遇到问题。如果我使用 Bootstrap 的 HTML（如下所示），基本上 jQuery Mobile 页面最终会被嵌套。当 jQuery Mobile`data-role="page"`标记嵌套时，它似乎不起作用。有任何想法吗？

```
<div class="tabbable" data-role="page"> <!-- Only required for left/right tabs -->
    <ul class="nav nav-tabs">
        <li class="active"><a href="#tab1" data-toggle="tab">Section 1</a></li>
        <li><a href="#tab2" data-toggle="tab">Section 2</a></li>
    </ul>
    <div class="tab-content">
         <div class="tab-pane active" id="tab1" data-role="page">
             <p>I'm in Section 1.</p>
    </div>
    <div class="tab-pane" id="tab2" data-role="page">
        <p>Howdy, I'm in Section 2.</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:59:43.700

我用来解决这个问题的解决方案是一个名为[subpage](https://github.com/ToddThomson/jQuery-Mobile-Subpage-Widget)的 jquery 移动插件。

我将嵌套页面更改为子页面并且它有效。

# android - android行没有在sqlite DB中更新

> ID：12955930
> 
> 赞同：0
> 
> 时间：2012-10-18T13:32:53.317
> 
> 标签：android, sqlite

我有一个应用程序，我试图在我的数据库中的 Transactions 表中更新一行。这是桌子。

```
//table transactions column names
    public static final String C_ID = BaseColumns._ID; // special for id internally in system
    public static final String C_TYPE = "type";
    public static final String C_COMPANY_ID = "companyid";
    public static final String C_PERSON_ID = "person";
    public static final String C_NAME = "name";
    public static final String C_TAG_ID = "tagid";
    public static final String C_STATUS = "status";
    public static final String C_TAG_SCAN_TIME = "tagscantime";
    public static final String C_TAG_SENTSERVER_TIME = "tagsentservertime";
    public static final String C_TRANSACTIONS_LATITUDE = "transactionslatitude";
    public static final String C_TRANSACTIONS_LONGITUDE = "transactionslongitude"; 
```

.

当我在此表中插入一行时，列 C_TAG_SENTSERVER_TIME 设置为空。这是因为我此时还没有将交易发布到网络服务。一旦我从服务器得到响应，我想用“发送到服务器时间”来更新手机数据库中的行。目前我尝试获取数据库中的最后一行，然后尝试获取该行的 id，即传递给更新该行的方法。目前的结果

```
String[] param = {c.getString(c.getColumnIndex(LoginValidate.C_ID))}; 
```

是返回空。这是更新方法的其余部分。为什么上面的调用返回null？

```
public void updateTransactionWithServerTime(DateTime sentToServerAt) {

        SQLiteDatabase db = dbhelper.getWritableDatabase();

        Cursor c = null;

        c = db.query(DBHelper.TABLETRANSACTIONS, null, null, null, null, null, null);

        if (c != null ) {
            if  (c.moveToLast()) {
                String[] param = {c.getString(c.getColumnIndex(LoginValidate.C_ID))};
                Log.e(TAG, "C_ID = " + param[0]);
                ContentValues values = new ContentValues();
                  values.put(C_TAG_SENTSERVER_TIME, sentToServerAt.getMillis());

                 int res =  db.update(DBHelper.TABLETRANSACTIONS, values, LoginValidate.C_ID+"=?", param[0]);

                  Log.e(TAG, "done the update on trans table num of rows affected is " + res);

            }

         }
        c.close();
        db.close();
    }//end of updateTransactionWithServerTime 
```

[编辑1]

```
private class DBHelper extends SQLiteOpenHelper {

        // database name and version number
        public static final String DB_NAME = "carefreemobiledb.db";
        public static final int DB_VERSION = 26;

        //table names
        public static final String TABLETRANSACTIONS = "transactions";
        public static final String TABLECARER = "carer";
        public static final String TABLETRANSACTIONSMAP = "transactionsmap";
        public static final String TABLEPHONE = "phone";

        // public static final String C_ID = BaseColumns._ID; // special for id
        // internally in
        // system

        public DBHelper() {
            super(context, DB_NAME, null, DB_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            String sqlToCreateTransactionsTable = String
                    .format("create table %s ( %s INT primary key, %s TEXT, %s TEXT, %s TEXT, %s TEXT, %s TEXT," +
                            " %s TEXT, %s TEXT, %s INT, %s TEXT, %s TEXT )",
                            TABLETRANSACTIONS, C_ID, C_TYPE, C_COMPANY_ID, C_PERSON_ID,
                            C_NAME, C_TAG_ID, C_STATUS, C_TAG_SCAN_TIME, C_TAG_SENTSERVER_TIME,
                            C_TRANSACTIONS_LATITUDE, C_TRANSACTIONS_LONGITUDE);

            db.execSQL(sqlToCreateTransactionsTable);
            Log.e(TAG, "oncreate " + sqlToCreateTransactionsTable); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T15:59:25.510

您必须使用`INTEGER PRIMARY KEY`来获取自动增量列；`INT`是不足够的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:38:03.220

```
String [] str new String[c.getCount()];
int i = 0;
            while (c.moveToNext()) {
                str[i] = c.getString(c.getColumnIndex(LoginValidate.C_ID));
                i++;
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T13:56:05.087

假设表实际上包含该列，则从光标读取 ID 的代码看起来是正确的。

无论如何，读取表的所有行的所有字段只是为了获取一个值是低效的，并且没有`ORDER BY`，并不能保证最新记录是最后一条。

我建议使用此查询来读取最后一个 ID：

```
cursor = db.rawQuery("SELECT max(" + LoginValidate.C_ID + ")" +
                     " FROM " + DBHelper.TABLETRANSACTIONS, null); 
```

但是，您可以将其作为子查询直接插入更新查询：

```
int res = db.update(DBHelper.TABLETRANSACTIONS, values,
                    LoginValidate.C_ID + " = " +
                     "(SELECT max("+LoginValidate.C_ID+")" +
                     " FROM " + DBHelper.TABLETRANSACTIONS + ")", null); 
```

# php - 单击链接时，通过在 jwplayer 中播放音频，将音频文件路径发送到电子邮件和那里

> ID：12955935
> 
> 赞同：0
> 
> 时间：2012-10-18T13:33:00.977
> 
> 标签：php, javascript, web-services, jwplayer

我的一个朋友给我发了一封电子邮件。它包含音频文件的路径。当我单击链接时，音频开始以 chrome 播放（仅当它是 .mp3 格式时）。

并非每次用户都可以发送任何格式的情况，例如：aac、m4a 等。

所以我想在 jwplayer 中播放音频

单击 url 时，音频必须能够使用 jwplayer 在浏览器中播放。音频文件的路径是 bitle 生成的短 url。

[我从http://www.longtailvideo.com/players/jw-flv-player/](http://www.longtailvideo.com/players/jw-flv-player/)下载了 jwplayer 文件和源代码， 并根据文档设置了我的播放器。但仍然面临问题

请提出建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-20T10:17:54.127

JWPlayer 不错，但它缺少一个好的界面。我已经能够将 jwplayer 嵌入到 prettyphoto 中，这为我解决了很多问题。

有一篇文章描述了如何做到这一点位于[http://forums.no-margin-for-errors.com/discussion/5671/how-to-integrate-jwplayer-in-prettyphoto-with-flash-and- html5/p1](http://forums.no-margin-for-errors.com/discussion/5671/how-to-integrate-jwplayer-in-prettyphoto-with-flash-and-html5/p1)

一旦你开始工作，我的建议是让 url 包含 GET vars，其中包含要播放的文件名。使用 PHP 创建一个 href 将触发 prettyphoto/jwplayer 打开和播放文件。

另外，我给你的链接上的说明对我不起作用。我不得不修改它们，但这里是让它工作的代码：

```
case 'jwplayer':
    pp_dimensions = _fitToViewport(movie_width,movie_height); // Fit item to viewport
    controlbar_height = 29; //Allow for JWplayer's bar
    pp_dimensions['height']+=controlbar_height;pp_dimensions['contentHeight']+=controlbar_height;pp_dimensions['containerHeight']+=controlbar_height;

    jwplayer_settings = {flashplayer: '/jwplayer/player.swf', controlbar: 'bottom', skin: '/jwplayer/jwplayer_skin.zip', autostart: true, id: 'jwplayer1'};
    jwplayer_settings.width = pp_dimensions['width'];
    jwplayer_settings.height= pp_dimensions['height'];
    jwplayer_settings.file = pp_images[set_position];
    skipInjection = true;
    /* include jwplayer JS embedder */
    $.getScript('/jwplayer/jwplayer.js', function() {
        jwplayer("pp_full_res").setup(jwplayer_settings);
        _showContent();
    });
break; 
```

# python - 使用 stringIO 和 pygame.mixer.music.load() 时 Python 应用程序不会退出

> ID：12955945
> 
> 赞同：1
> 
> 时间：2012-10-18T13:33:19.740
> 
> 标签：python, pygame, stringio

我正在使用 StringIO 流式传输音乐数据，但是当我使用 pygame.mixer.music.load() 运行时，我的应用程序似乎不会退出。即使我使用 close()：

```
def PlaySong(self, song_id):
    song = StringIO.StringIO(resp.read())
    self.pygame.mixer.music.load(song)
    .... 
```

该函数将返回，但必须终止应用程序。如果我将响应保存到文件，然后加载文件名，它将关闭。有人可以帮忙吗？我不想使用本地存储。

更多信息。我在从文件打开和使用 stringio 时都做了一个 strace，strace 将为这两个实例正确退出。痕迹看起来很干净。

工作代码：

```
def playsong():
    mp3 = "/home/adam/Documents/pinyin/pinyinchart_win/pinyin/zuo2.mp3"
    #with open(mp3, "rb") as outfile:
    #    song = outfile.read()

    #io = StringIO.StringIO(song)
    pygame.init()
    pygame.mixer.music.load(mp3)
    pygame.mixer.music.play()
    while pygame.mixer.music.get_busy():
        pygame.time.Clock().tick(50)

    #io.close()
    #outfile.close() 
```

不工作的代码：

```
def playsong():
    mp3 = "/home/adam/Documents/pinyin/pinyinchart_win/pinyin/zuo2.mp3"
    with open(mp3, "rb") as outfile:
        song = outfile.read()

    io = StringIO.StringIO(song)
    pygame.init()
    #pygame.mixer.music.load(io)
    pygame.mixer.music.load(mp3)
    pygame.mixer.music.play()
    while pygame.mixer.music.get_busy():
        pygame.time.Clock().tick(50)

    io.close()
    outfile.close() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T21:13:58.723

我有同样的问题 - 显然 pygame 在自行清理方面非常糟糕，`pygame.quit()`有时调用会挂起。Even`sys.exit()`实际上并没有退出，可能是因为`pygame.init()`. 据`#pygame`IRC 频道上的人说，这个问题永远不会得到解决，而且 pygame 是一个死项目（！？），尽管邮件列表和项目网站上似乎仍有一些活动。也许这将在pygame2中修复......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T21:37:45.357

当使用 Python 的线程支持时，我已经看到了这种行为。pygame 可能正在使用线程，并且其中一些线程是隐式生成的，没有标记为“守护进程”线程，并且在您尝试*.quit()*时没有加入。

请注意，*sys.exit()*不太可能工作，因为这会引发 SystemExit 异常（可能会被捕获，特别是可能被*atexit*处理程序捕获）。此外*sys.exit()*只会退出处理它的线程，其他线程仍将运行。（[StackOverflow：pygame 中 sys.exit() 的问题，以](https://stackoverflow.com/q/11488122/149076)获取更多详细信息）。

这是另一个：[StackOverflow: pygame screen freezes when I close it](https://stackoverflow.com/q/5615860/149076)。

我在 Google 上尝试了一些关于以下短语的搜索：pygame quit {fails, hangs,stalls} ...其中大多数导致了与我在此处提供的类似的讨论。

共识似乎是您希望构建线程以处理“退出”事件，以便在您的主（父）进程尝试使用*sys.exit()*或干脆退出之前，所有线程都调用*pygame.quit()* _ ***_******套房***。****`_main_`****

 *除此之外，我还会检查是否某些进程、线程或驱动程序在您的音乐设备上停滞不前。`ps`在进程列表（命令输出）中显示为“D”状态的类 Unix 系统中。（我假设您提到*strace*是在 Linux 上运行的）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-06T03:54:56.547

我在尝试运行 pykaraoke 时经常遇到这个问题；直到今晚，我才将其追溯到 pygame.mixer.music.play()。奇怪的是，它只发生在多处理器系统上；如果我在单处理器系统上进行测试，或者使用“maxcpus=1”启动 Linux，则不会发生。否则，硬挂起会经常发生，我必须使用 SIGKILL，因为 SIGTERM 不起作用。

所以我认为这是pygame中的一个错误，或者它依赖的东西。我刚刚向 pygame-users 邮件列表发送了一个 Python 脚本和非常短（50k）的 MP3 文件；如果有什么事，我会回来报告的。

更新：我能够使用与 SDL_mixer 直接交互的程序重现该错误。答案是，这是 smpeg 中的一个错误。重建 SDL_mixer 并启用对 libmad 的支持。您还必须完全卸载 smpeg，因为 SDL_mixer 会尝试使用它来支持 libmad。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T16:44:04.743

试试 sys.exit() 和内置函数 exit()。*

# iphone - 归档项目时出现 Apple Mach-O 链接器错误

> ID：12955946
> 
> 赞同：1
> 
> 时间：2012-10-18T13:33:20.473
> 
> 标签：iphone, objective-c, ios

我在归档项目时遇到错误，我用谷歌搜索了确切的解决方案，但它们不符合我的要求。

> Apple Mach-O 链接器错误命令/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/clang 失败，退出代码为 1

我得到的一些解决方案，

*   导入文件`#import “xView.m`而不是`#import “xView.h`
*   清理构建并重新启动 xcode
*   缺少框架工作

但这对我不起作用，即使我的项目在模拟器中测试时也在运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T07:24:28.427

最后我解决了我的问题，实际上在我的项目中，我有两个具有相同名称的图像，通常 xcode 不接受相同的文件名，但有些地方接受了它，因此我每次在归档项目时都会收到错误，所以我删除了重复的图像并成功存档了项目。

希望这对你们有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:59:16.007

当构建文件中缺少某些文件时，通常会发生此错误。检查您是否删除了某些类文件，并且它的条目仍然存在于项目文件中。

您可以在构建设置中看到它。希望它能解决你的问题。

如果仍未解决，请在 XCode 中找到异常下方的总描述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-21T07:45:57.650

有很多修复，但我的问题是我不再需要框架，我删除了它，但在我的一个文件中，它仍然在顶部声明了框架并使用了该框架。删除它，它的工作！另外检查您的 AppDelegate.m 中是否有任何问题

# html - HTML5 画布 drawImage 返回

> ID：12955949
> 
> 赞同：1
> 
> 时间：2012-10-18T13:33:27.230
> 
> 标签：html, html5-canvas

反正有没有让这个方法返回？只是为了检查它是否被执行？

```
context.drawImage(video,0,0,100,200); 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T15:56:51.457

该方法返回`void`（参见[w3 规范](http://dev.w3.org/html5/2dcontext/)）：

```
 // drawing images
  void drawImage((HTMLImageElement or HTMLCanvasElement or HTMLVideoElement) image, unrestricted double dx, unrestricted double dy); 
```

[这里](https://stackoverflow.com/questions/4406864/html-canvas-unit-testing)有一些关于如何对`canvas`代码进行单元测试的好建议。

# wordpress - 在 Wordpress 中为自定义帖子类型创建分页

> ID：12955950
> 
> 赞同：2
> 
> 时间：2012-10-18T13:33:28.150
> 
> 标签：wordpress, pagination, custom-post-type

我有一个要添加分页的活动页面。但是，由于它是自定义帖子类型，我发现它相当困难。我已经设法为我的新闻页面进行分页，但我无法为事件页面获得相同的结果。这是我的活动页面代码

```
<?php
get_header();
get_sidebar('left');
?>
<article class="content-main events" role="main" id="post-<?php the_ID() ?>">
<?php include 'breadcrumbs.php'; ?>
<?php query_posts(array('posts_per_page'=>'2')); ?>
<?php while (have_posts()) : the_post(); ?> 
        <div class="news-post">
            <h1><a href="<?php the_permalink() ?>"><?php the_title() ?></a></h1>
            <?php the_excerpt() ?>
        </div>

        <?php endwhile; ?>
        <?php wp_reset_query(); ?>

<!--Pagination-->
    <?php echo paginate_links( $args ) ?>
    <?php
    global $wp_query;

    $big = 999999999; // need an unlikely integer

    echo paginate_links( array(
        'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
        'format' => '?paged=%#%',
        'current' => max( 1, get_query_var('paged') ),
        'total' => $wp_query->max_num_pages
    ) );
    ?>
</article><!-- //.content-main -->
<?php

get_footer(); 
```

如果我尝试改变这一点

```
<?php query_posts(array('posts_per_page'=>'2')); ?> 
```

对此

```
<?php query_posts(array('category_name'=>'events','posts_per_page'=>'2')); ?> 
```

这也不起作用。但是，如果我完全删除该行，它会显示新闻帖子类型。我难住了！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:52:08.320

自定义帖子类型的分页应该与普通帖子一样工作。

如果您查看默认主题[TwentyEleven](http://wordpress.org/extend/themes/twentytwelve)，您可以了解他们是如何做到的。

基本上他们使用**next_posts_link()**和**previous_posts_link()**函数。

你可以在functions.php> **twentytwelve_content_nav()中查看。**

干杯，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T14:01:44.450

您需要添加全局 $paged ，然后在传递给 WP_Query 的数组中添加 'paged' => $paged

">

```
<?php 
global $paged;
$temp = $wp_query;
                    $wp_query = null;

                    $wp_query = new WP_Query( array('post_type' => 'yourcustomepost','posts_per_page' => 2, 'paged' => $paged ) ); ?>
<?php while (have_posts()) : the_post(); ?> 
        <div class="news-post">
            <h1><a href="<?php the_permalink() ?>"><?php the_title() ?></a></h1>
            <?php the_excerpt() ?>
        </div>

        <?php endwhile; ?>
        <?php wp_reset_query(); ?>

<!--Pagination-->
    <?php echo paginate_links( $args ) ?>
    <?php
    global $wp_query;

    $big = 999999999; // need an unlikely integer

    echo paginate_links( array(
        'base' => str_replace( $big, '%#%', esc_url( get_pagenum_link( $big ) ) ),
        'format' => '?paged=%#%',
        'current' => max( 1, get_query_var('paged') ),
        'total' => $wp_query->max_num_pages
    ) );
    ?>
</article><!-- //.content-main -->
<?php 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-18T16:36:11.687

只需在functions.php文件中替换以下函数注意：在后端设置->阅读->每页发布：将此值设置为1

```
function twentyeleven_content_nav( $html_id ) 
{
    global $wpdb;
    global $wp_query;

    if ( $wp_query->max_num_pages > 1 ) : ?>
        <nav id="<?php echo esc_attr( $html_id ); ?>">
            <h3 class="assistive-text"><?php _e( 'Post navigation', 'twentyeleven' ); ?></h3>
            <div class="nav-previous">
                <?php next_posts_link( __( ' Previous', 'twentyeleven' ) ); ?>
                <?php
                    $count = $wpdb->get_var( "SELECT COUNT(*) FROM wp_posts where post_type='post' and post_content<>''" );

                    for($j=1;$j<=$count;$j++)
                    {
                        echo "<a href='?paged=$j'> $j < </a>";
                    }
                ?>
                <?php previous_posts_link( __( 'Next', 'twentyeleven' ) ); ?>
            </div>

        </nav><!-- #nav-above -->
    <?php endif;
} 
```

# magento-1.7 - Magmi 进口产品不显示属性集中定义的所有属性

> ID：12955953
> 
> 赞同：1
> 
> 时间：2012-10-18T13:33:41.883
> 
> 标签：magento-1.7, magento, magmi

我必须在 Magento 中导入大约 2000 种产品，由于本地导入工具非常慢，我们决定使用 magmi。

我们所做的是创建了大约 20 个自定义属性，创建了一个新的属性集（基于默认集）并将所有这些属性添加到新的自定义集。（Magento 设置为 .de/.at 域的多存储）

使用 magmi，我用一篇测试文章进行了测试导入，导入运行良好（没有错误）。但是在后端缺少一些字段（例如“价格”）；不是缺少值，而是根本没有显示字段。

这是我使用的 csv 示例：

```
"attribute_set";"type";"sku";"websites";"name";"description";"short_description";"z_bottled";"status";"tax_class_id";"category_ids";"price";"special_price"
"z_article";"Simple Product";"123456";"base";"MAGMI Produkt";"Description";"Kurzbeschreibung";"2012";"1";"2";"87,88,105";"123";"123" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T16:07:43.353

*   您缺少“存储”列，将“管理员”放入其中或使用值替换插件将其强制为“管理员”值。但是，这也可以在没有的情况下工作，因为 magmi “通常”能够将其默认为该值。

另外，也许您需要启动平面重新索引和价格重新索引。

# javascript - jQuery on(click) 不起作用，但 on(hover) 起作用

> ID：12955961
> 
> 赞同：1
> 
> 时间：2012-10-18T13:34:03.123
> 
> 标签：javascript, jquery, jquery-events

初始化 js 后，我创建`<div>`了具有关闭类的新元素，并且`on("click")`功能不起作用。

```
$(document).on('click', '.post-close', function () {
        alert("hello");
}); 
```

但`on('hover')`工作完美。

```
$(document).on('hover', '.post-close', function () {
        alert("hello");
}); 
```

但我需要让它在点击时工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-18T13:36:05.437

这是因为您没有阻止浏览器的默认行为。传递`e`给您的处理程序，然后使用`e.preventDefault()`

```
$(document).on('click', '.post-close', function (e) {
    e.preventDefault();
    alert("hello");
}); 
```

## 编辑

此外，在创建新的之前绑定处理程序`<div>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T13:36:58.620

为什么不使用类似的东西

```
$('.post-close').click(function(){
   //do something
}); 
```

如果元素是动态添加的，请使用：

```
$(document).on('click', '.post-close', function(){
   //do something
}); 
```

编辑：
就像 danWellman 说的，如果你想确保没有其他代码被执行，你可以添加 preventDefault 。否则使用上面的代码。

edit2：
将 .live 更改为 .on

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-31T14:49:47.777

这是一篇旧帖子，但我遇到了完全相同的问题（动态创建的元素，悬停有效，但点击无效）并找到了解决方案。我希望这篇文章对某人有所帮助。

就我而言，我发现 ui-selectable 用于父元素，这阻止了单击事件传播到文档。

所以我在 ui-selectable 的“取消”选项中添加了一个按钮元素的选择器，问题就解决了。

如果您有类似的问题，请检查此

*   尝试为父元素转库
*   您没有在父元素中使用 stopPropagation() 吗？

# sql-server - 输出csv文件SQL

> ID：12955962
> 
> 赞同：0
> 
> 时间：2012-10-18T13:34:05.017
> 
> 标签：sql-server, csv

这是我到目前为止的代码：

```
DECLARE @bcpCommand varchar(2000)   
DECLARE @query varchar(2000)

SET @query = 'select job_description from [mainDB].[myschema].[table]'
SET @bcpCommand = 'bcp " ' + @query + ' "  queryout "c:\test.csv" -T -c -t,'''
EXEC master..xp_cmdshell @bcpCommand 
```

当我运行它时，我收到以下消息：

> NULL
> 开始复制...
> 1000 行已成功批量复制到主机文件。
> 收到的总数：1000 1000 行已成功批量复制到主机文件。
> 收到的总数：2000 1000 行已成功批量复制到主机文件。
> 收到的总数：3000 1000 行已成功批量复制到主机文件。
> 收到的总数：4000 1000 行已成功批量复制到主机文件。
> 收到的总数：5000 1000 行已成功批量复制到主机文件。
> 收到的总数：
> 复制了 6000 6564 行。
> 网络数据包大小（字节）：4096
> 时钟时间（毫秒）总计：16 平均：（每秒 410250.00 行）

但是c盘里没有这个文件。为什么文件没有出现在c盘？我看错地方了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:36:33.117

这将输出到服务器的C盘，而不是客户端机器。您是否有可能正在查看您的 C 驱动器而不是服务器的驱动器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:45:50.473

对于那些无法访问服务器 C 盘的人，我找到了一种检索 csv 文件并将其插入临时表的方法

```
BULK
INSERT tempTable
FROM 'c:\filename.csv'
WITH
(
FIELDTERMINATOR = ',',
ROWTERMINATOR = '\n'
)
GO

select * from tempTable 
```

# msbuild - 将解决方案升级到 .NET 框架 4.5 后，日常部署停止工作

> ID：12955967
> 
> 赞同：6
> 
> 时间：2012-10-18T13:34:13.983
> 
> 标签：msbuild, .net-4.5, msdeploy, webdeploy

我们已经成功地每天使用 TFS2010 中的 msdeploy 更新我们的开发网站。

在我们升级到 VS2012，我们的应用程序从 .NET Framework 4.0 到 4.5 和 ASP.NET MVC 从 3.0 到 4.0 之前，这一切正常。看起来一切都很好，并且部署了程序集，但实际上并没有部署任何东西。

我已经研究了两天了，无法弄清楚为什么会发生这种情况，现在我的想法已经不多了。

以下是我的构建脚本的一部分，它在升级之前一直在工作。

```
<MSBuild
                Projects="$(SolutionRoot)\My.Web\My.Web.csproj"
                Properties="MvcBuildViews=False;AllowUntrustedCertificate=True;AuthType=Basic;Configuration=Dev;CreatePackageOnPublish=True;DeployIisAppPath=dev.myweb;DeployOnBuild=True;DeployTarget=MsDeployPublish;MSDeployPublishMethod=WMSvc;MsDeployServiceUrl=https://10.xxx.xxx.xxx:8172/MsDeploy.axd;UserName=UserName;Password=Password;UseMsdeployExe=True"
                ContinueOnError="False"
                /> 
```

当升级开始并发现我的问题时，我们使用的是 Web Deploy 2.0，但现在我们已经升级到 Web Deploy 3.0。我还确保我们正在使用`ToolsVersion="4.0"`.

**更新 -**

msbuild.exe /p:AllowUntrustedCertificate=True /p:AuthType=Basic /p:Configuration=Dev /p:CreatePackageOnPublish=True /p:DeployIisAppPath=dev.myweb /p:DeployOnBuild=True /p:DeployTarget=MsDeployPublish /p: MSDeployPublishMethod=WMSvc /p:MsDeployServiceUrl=https://10.xxx.xxx.xxx:8172/MsDeploy.axd /p:UserName=UserName /p:Password=Password /p:UseMsdeployExe=True E:\Builds\1\ WhatEver\Daily_Build\Sources\My.Web\My.Web.csproj

现在我还尝试从我们的 TFS 运行上面的 msbuild 命令，但没有任何响应，这让我完全感到沮丧。TFS 的事件日志中没有任何内容，无论详细程度如何，日志文件中都没有任何内容......有什么想法吗？

它确实使用 msdeploy 直接工作，如下所示；

```
<Exec Command="&quot;C:\Program Files\IIS\Microsoft Web Deploy V3\MSDeploy.exe&quot; -verb:sync -source:contentPath=&quot;E:\Builds\1\WhatEver\Daily_Build\Sources\My.Web\My.Web.csproj&quot; -dest:contentPath=&quot;E:\dev.my.web&quot;,computername=https://10.xxx.xxx.xxx:8172/MsDeploy.axd,username=UserName,password=Password,authtype=Basic -allowUntrusted=True"
              ContinueOnError="false" /> 
```

**--**

**更新 2 -** 微软似乎添加了检查哪些类型的项目是可发布的项目，而我们的 Web 应用程序不是，因为*输出类型是 Class Library*。这对 v4.0 有效，但显然不适用于 v4.5。

任何人都知道该怎么做才能让它再次工作？我需要更改项目类型吗？预先创建发布包然后部署它？或者是什么？

**--**

还有其他人有同样的问题吗？你找到解决方案分享了吗？

MSBuild的版本可能有问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-30T07:08:04.987

这是我推荐的。在 VS2012 中，我们可以使用发布对话框创建的发布配置文件轻松地自动发布您的 Web 项目。在您的情况下，创建一个新的 MSDeploy 配置文件。当您创建该配置文件时，我们会将设置保存到 Properties\PublishProfiles（或 VB 的 My Project\PublishProfiles）下的文件中。此文件的扩展名为 .pubxml。这些文件实际上是 MSBuild 文件，您可以根据需要对其进行自定义。您也可以继续使用发布对话框。密码将存储在 .user 文件中并加密，只有您可以解密它。

创建该配置文件后，如果您正在构建 .sln 文件，则可以使用以下命令发布。

```
msbuild mysoln.sln /p:DeployOnBuild=true /p:PublishProfile=<ProfileName> /p:Password=<Password> 
```

如果您正在构建 .csproj/.vbproj，那么您需要通过以下方式对其进行一些调整

```
msbuild mysoln.sln /p:DeployOnBuild=true /p:PublishProfile=<ProfileName> /p:Password=<Password> /p:VisualStudioVersion=11.0 
```

有关为什么需要 VisualStudioVersion 的更多信息，请访问[http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx)。

完成此操作后，您将能够像以前一样构建+发布。[仅供参考，我们已经在 Azure SDK https://www.windowsazure.com/en-us/develop/net/#](https://www.windowsazure.com/en-us/develop/net/#)中为 VS2010 提供了所有这些新的 Web 发布功能。

同样在您的问题中，我注意到您正在指定一些自定义属性，例如 MvcBuildViews。如果需要，您现在可以将这些属性直接放在发布配置文件（.pubxml 文件）中。当然，如果这对您的场景更有意义，您仍然可以在命令行中传递它们。

更多信息请访问[http://sedodream.com/2012/06/15/VisualStudio2010WebPublishUpdates.aspx](http://sedodream.com/2012/06/15/VisualStudio2010WebPublishUpdates.aspx)。

如果您看一下我们为开发人员提供的自动化发布的方法，那就是指定要在构建期间执行的属性和目标。这种方法的问题在于，这限制了我们增强网络发布体验的能力。在新版本中，我们引入了一个抽象，发布配置文件，它允许我们更改 Web 发布管道的底层目标，您的自动化脚本将继续运行。希望从现在开始，您将不必重新访问此问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-04T21:59:19.503

我今天有很多同样的问题。我也试图使用没有安装 Visual Studio 2012 的机器自动部署 .NET 4.5 Web 应用程序。但是，我的情况有一些细微差别：我使用的是 TeamCity 而不是 TFS，我们的解决方案是使用 .NET 4.5 创建的，而不是从 .NET 4.0 升级的解决方案。

尽管如此，我确实遇到了同样的问题。我将使用 MSBuild 构建 Web 应用程序并将其部署到 IIS，方式大致相同。这种方法在我的开发机器上运行良好。然而，当我在 CI 服务器上运行 MSBuild 时，它非常愉快地构建了 Web 应用程序，但之后就停止了：没有错误，没有警告，什么也没有，只是一条构建成功的消息。没有任何尝试将应用程序部署到 IIS 的迹象。

似乎 MSBuild 缺少执行 Web 部署的相关目标。解决方法是将文件夹`C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web`从我的开发机器复制到 CI 服务器，将其复制到 CI 服务器上与我机器上相同的位置。

一旦我这样做了，MSBuild 就会抱怨需要 Web Deploy 3.0，但这很容易解决。在 CI 服务器上也安装了它之后，MSBuild 非常高兴地部署了 Web 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T19:29:58.273

扩展[卢克伍德沃德的回答](https://stackoverflow.com/a/14165663/1677912)：

我也发现`C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\`从我的本地机器部署到构建服务器是解决办法。

但是，真正的解决方法是将 Microsoft Web Developer Tools 作为 VS 2012 安装的一部分进行安装，这将创建此文件夹等。这解决了 Ieppie 的许可异议。

我测试了这个...

1.  删除`C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\`
2.  运行 VS 2012 安装程序并添加 MS Web 开发工具。
3.  验证，安装后，`C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\Web\`回来了。

# c++ - 如何在 C++ 中引用函数（转换 python 代码）

> ID：12955972
> 
> 赞同：1
> 
> 时间：2012-10-18T13:34:28.230
> 
> 标签：c++, python, types, reference

在python中，我可以将对函数的引用传递给类，然后通过调用具有所需参数的类变量来再次使用它。如下：

```
def add_together(a, b):
    return a + b

class Function:
    def __init__(self,action,name,num_inputs=2,num_outputs=1):
        self.action      = action
        self.num_inputs  = num_inputs
        self.num_outputs = num_outputs
        self.name        = name
        self.f_type      = True

    def solve(self,*args):
        return self.action(*args)

f = Function(add_together,"'add'")
print f.action(3,5) 
```

我正在将代码移动到 c++ 以提高速度，但对 C++ 了解不多，我在找出如何实现相同目标时遇到了一些麻烦。请参阅下面的（弱）尝试。我热衷于保持逻辑尽可能相似。

我想知道两件事，

1.  如何将函数的引用传递给类？
2.  我相信 c++ 中的 *args 可以通过重载来工作，但我不确定如何加载和卸载变量。

我知道一些基本问题，但我很难用谷歌解决。

在 C++ 中的尝试

```
double add_together(double a, double b) {
    return a + b;
}

class Function {
public:
    Function(int ni, double act) {
        int num_inputs = ni;
        double action = act;

    }
protected:
    int num_inputs;
    double action;
};

Function f(2,add_together); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:37:44.823

函数指针似乎是您正在寻找的。开头的 typedef 不是必需的，但它确实简化了语法。

```
typedef double (*function_ptr)(double, double);

double add_together(double a, double b) {
    return a + b;
}

class Function {
public:
    Function(int ni, function_ptr act) {
        num_inputs = ni;
        action = act;
    }
protected:
    int num_inputs;
    function_ptr action;
};

Function f(2,add_together); 
```

您的构造函数中也有错误。您在构造函数中重新定义了成员变量`num_inputs`和`action`局部变量。我不认为你想那样做。

# java - 查找我项目中的所有枚举

> ID：12955973
> 
> 赞同：3
> 
> 时间：2012-10-18T13:34:34.973
> 
> 标签：java, enums

在我的项目中，我有一些声明的枚举。我想创建一个循环遍历所有这些然后遍历每个枚举的所有值的方法。

带有两个枚举的示例：

```
public enum Mood {
    GOOD, BAD;  
}

public enum Weather {
   WET, DRY;
} 
```

如果我遍历每个枚举及其值并将它们分别打印在一行上，程序将打印

```
GOOD
BAD
WET
DRY 
```

顺序不重要...

如果我添加一个新的枚举，也应该打印它而无需更改代码。我不知道枚举将位于哪个包中。只有一个根包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-18T13:38:19.383

[Reflections](http://code.google.com/p/reflections/)库将为您提供帮助。

您可以搜索每个实现`Enum`并使用获取所有类值的类`clazz.getEnumConstants()`

# android - 在android中启动不同的按钮计时器

> ID：12955981
> 
> 赞同：0
> 
> 时间：2012-10-18T13:34:59.740
> 
> 标签：android

我的应用程序有几个按钮，它们上面的文本是一个计数器。每个按钮都有不同的计数器。我想独立地开始我想要的2。我的问题是，当我按下一个按钮时，所有其他按钮计数器都会启动。所以我有很多按钮可以在按下一个时启动计数器。我知道有很多大声笑应用程序，但我想练习编码 android:PI 知道问题出在 onTick 方法上。但我不知道如何为每个按钮调用多个 onTick 方法，或者在 onTick 中有 if/switch 语句。任何人都知道我该怎么做？

谢谢你的时间

```
public class TimersActivity extends Activity {

Button wraith, wolf, golem, blue_golem, red_golem, enemy_wraith, enemy_wolf, enemy_golem, enemy_blue_golem, enemy_red_golem, dragon, baron;

final MyCounter wraithTimer = new MyCounter(50000,100, wraith);
final MyCounter enemy_wraithTimer = new MyCounter(50000,100, wolf);

final MyCounter wolfTimer = new MyCounter(60000,100, null);
final MyCounter enemy_wolfTimer = new MyCounter(60000,100, null);
final MyCounter golemTimer = new MyCounter(60000,100, null);
final MyCounter enemy_golemTimer = new MyCounter(60000,100, null);
final MyCounter blue_golemTimer = new MyCounter(300000,100, null);
final MyCounter enemy_blue_golemTimer = new MyCounter(300000,100, null);
final MyCounter red_golemTimer = new MyCounter(300000,100, null);
final MyCounter enemy_red_golemTimer = new MyCounter(300000,100, null);
final MyCounter dragonTimer = new MyCounter(360000,100, null);
final MyCounter baronTimer = new MyCounter(420000,100, null);

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_timers);

        wraith = (Button)findViewById(R.id.wraiths);
        wolf = (Button)findViewById(R.id.wolfs);
        golem = (Button)findViewById(R.id.golems);
        blue_golem = (Button)findViewById(R.id.blue_golem);
        red_golem = (Button)findViewById(R.id.redbuff_creep);
        enemy_wraith = (Button)findViewById(R.id.enemy_wraiths);
        enemy_wolf = (Button)findViewById(R.id.enemy_wolfs);
        enemy_golem = (Button)findViewById(R.id.enemy_golems);
        enemy_blue_golem = (Button)findViewById(R.id.enemy_blue_golem);
        enemy_red_golem = (Button)findViewById(R.id.enemy_redbuff_creep);
        dragon = (Button)findViewById(R.id.dragon);
        baron = (Button)findViewById(R.id.baron);

        wraith.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                wraithTimer.start();
            }
        });

    }

    public enum buttons{wraith,wolf};
    public class MyCounter extends CountDownTimer{

        public MyCounter(long millisInFuture, long countDownInterval, Button nam) {
            super(millisInFuture, countDownInterval);
        }

        public void onFinish() {
            wraith.setText("DONE");

        }
        public void onTick(long millisUntilFinished, buttons names) {

            switch(names){

            case wraith: 
                wraith.setText((millisUntilFinished/1000)+"");
                break;
            case wolf: 
                 wolf.setText((millisUntilFinished/1000)+"");
                 break;         
            }

        }

        public void onTick(long millisUntilFinished) {
            // TODO Auto-generated method stub

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T13:39:40.533

一种选择是在 MyCounter 类中使用 Enums。

只需在构造函数中分配它，然后在 onTick() 方法中，使用带有枚举作为参数的开关。

* * *

编辑：

在构造函数中使用枚举意味着在初始化程序中使用此代码：

```
final MyCounter <name>Timer = new MyCounter(x0000, 100, buttons.wraith); 
```

在您的 MyCounter 类中添加一个私有字段，您可以在其中存储枚举，如下所示：

```
private buttons button; 
```

并在您的构造函数中，分配枚举：

```
public MyCounter(long millisInFutre, long countdownInterval, buttons name) {
    super(millisInFutre, countdownInterval);
    this.button = name;
} 
```

那么 onTick 方法应该像往常一样被调用：

```
public void onTick(long millisUntilFinished) {
    switch(button) {
    case buttons.wraith:
        wraith.setText(...);
        break;
    }
} 
```

希望你能完成这个:)

# wpf - 如何将手动创建的 WPF Menuitem 转换为模板/样式资源/控件模板

> ID：12955983
> 
> 赞同：4
> 
> 时间：2012-10-18T13:35:01.307
> 
> 标签：wpf, xaml, templates, styles, menuitem

我已经手动创建了一个 MenuItem。现在我想要它作为模板/样式资源/控制模板——不管这个任务最好的。

我的 MenuItem 看起来像这样（我知道短代码）：

```
<MenuItem
x:Name="Quit"                           << OUTSIDE TEMPLATE
Command="{Binding ShutdownCommand}">    << OUTSIDE TEMPLATE
<MenuItem.Header>
    <StackPanel 
        Orientation="Horizontal">
        <TextBlock 
            Width="150" 
            Text="Quit ERD Builder"/>   << OUTSIDE TEMPLATE
        <TextBlock 
            Width="80" 
            Margin="0,2,0,0" 
            TextAlignment="Right">
            <Border 
                Padding="4,0,4,0" 
                BorderBrush="#B0B0B0" 
                Background="#fff" 
                BorderThickness="1" 
                CornerRadius="6">
                <TextBlock 
                    Width="Auto" 
                    Text="Alt+F4"       << OUTSIDE TEMPLATE
                    FontSize="10" 
                    Foreground="#555" />
            </Border>
        </TextBlock>
    </StackPanel>
</MenuItem.Header>
<MenuItem.Icon>
    <Image 
        Width="16" 
        Height="16" 
        Margin="0,0,5,0" 
        HorizontalAlignment="Center" 
        VerticalAlignment="Center" 
        RenderOptions.BitmapScalingMode="HighQuality" 
        SnapsToDevicePixels="True">
        <Image.Source>
            <BitmapImage 
                UriSource="/ERDBuilder;component/icons/bw/102-walk.png" />  << OUTSIDE TEMPLATE
        </Image.Source>
    </Image>
</MenuItem.Icon> 
```

我声明`<< OUTSIDE TEMPLATE`的行是我要在 MenuItem 中声明的行，而不是在`Template`.

我已经尝试过一些样式，但“背景”例如由于某些原因无法工作。我可以更改“FontSize”但不能更改“背景”颜色：

```
<Style 
x:Key="TopTaskBarMenuitem" 
TargetType="MenuItem">
<Style.Triggers>
    <Trigger Property="IsMouseOver" Value="True">
        <Setter Property="Background" Value="#ffff00" />    << DONT WORK
        <Setter Property="FontSize" Value="20" />           << WORKS
    </Trigger>
</Style.Triggers>
<Setter Property="Foreground" Value="#000" />               << WORKS
<Setter Property="BorderThickness" Value="1" />             << WORKS
<Setter Property="Width" Value="150"/>                      << WORKS 
```

如果我手动“XAML”它，这是菜单的外观：

[手动创建 Menuitem](http://visualrequest.com/share/mi_manualy.png)（我不允许在这里上传图片？！）

这是具有静态样式资源的菜单项：

[带有样式资源的菜单项](http://visualrequest.com/share/mi_style_resource.png)

如您所见，“背景”颜色不会影响菜单项。

如果我能希望我最终在“Menuitem”端拥有这样的东西：

```
<MenuItem
Style="{StaticResource TopTaskBarMenuitem}"                     << TEMPLATE / STYLE BINDING
x:Name="Quit"                                                   << OUTSIDE TEMPLATE
Command="{Binding ShutdownCommand}"                             << OUTSIDE TEMPLATE
MyHeaderText="Quit ERD Builder"/>                               << OUTSIDE TEMPLATE
MyShortcutText="Alt+F4"                                         << OUTSIDE TEMPLATE
MyUriSource="/ERDBuilder;component/icons/bw/102-walk.png" />    << OUTSIDE TEMPLATE 
```

非常感谢他们会提供帮助的所有人！

PS：这里的所有三个代码发布中都缺少最后一个代码行。我不知道为什么。我无法解决这个问题。

短剑

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:04:16.107

要获得这一点，您必须创建*自己的*从 MenuItem 派生的控件。

您需要做的就是使用 DependencyProperties 创建控件类以利用其所有优点，请阅读[以下](http://msdn.microsoft.com/en-us/library/ms752914.aspx)内容了解更多信息：

```
namespace MyControls
{
    class MyMenuItem : MenuItem
    {
        public string MyHeaderText
        {
            get { return (string)GetValue(MyHeaderTextProperty); }
            set { SetValue(MyHeaderTextProperty, value); }
        }
        public static readonly DependencyProperty MyHeaderTextProperty = DependencyProperty.Register("MyHeaderText", typeof(string), typeof(MyMenuItem));

        public string MyShortcutText
        {
            get { return (string)GetValue(MyShortcutTextProperty); }
            set { SetValue(MyShortcutTextProperty, value); }
        }
        public static readonly DependencyProperty MyShortcutTextProperty = DependencyProperty.Register("MyShortcutText", typeof(string), typeof(MyMenuItem));

        public string MyUriSource
        {
            get { return (string)GetValue(MyUriSourceProperty); }
            set { SetValue(MyUriSourceProperty, value); }
        }
        public static readonly DependencyProperty MyUriSourceProperty = DependencyProperty.Register("MyUriSource", typeof(string), typeof(MyMenuItem));
    }
} 
```

现在您可以实例化您的控件，但您仍然需要*“重新模板化”*它：

```
<mc:MyMenuItem MyHeaderText="Quit ERD Builder" MyShortcutText="Alt+F4" MyUriSource="/ERDBuilder;component/icons/bw/102-walk.png">
    <mc:MyMenuItem.Style>
        <Style TargetType="mc:MyMenuItem">
            <Style.Setters>
                <Setter Property="HeaderTemplate">
                    <Setter.Value>
                        <DataTemplate>
                            <StackPanel Orientation="Horizontal">
                                <TextBlock Width="150" Text="{Binding Mode=TwoWay, Path=MyHeaderText, RelativeSource={RelativeSource FindAncestor, AncestorType=mc:MyMenuItem}}"/>
                                <TextBlock Width="80" Margin="0,2,0,0" TextAlignment="Right">
                                    <Border Padding="4,0,4,0" BorderBrush="#B0B0B0" Background="#fff" BorderThickness="1" CornerRadius="6">
                                        <TextBlock Width="Auto" Text="{Binding Mode=TwoWay, Path=MyShortcutText, RelativeSource={RelativeSource FindAncestor, AncestorType=mc:MyMenuItem}}" FontSize="10" Foreground="#555" />
                                    </Border>
                                </TextBlock>
                            </StackPanel>
                        </DataTemplate>
                    </Setter.Value>
                </Setter>
                <Setter Property="Icon">
                    <Setter.Value>
                        <Image Width="16" Height="16" Margin="0,0,5,0" HorizontalAlignment="Center" VerticalAlignment="Center" RenderOptions.BitmapScalingMode="HighQuality" SnapsToDevicePixels="True" Source="{Binding Mode=OneWay, Path=MyUriSource, RelativeSource={RelativeSource FindAncestor, AncestorType=mc:MyMenuItem}}" />
                    </Setter.Value>
                </Setter>
            </Style.Setters>
        </Style>
    </mc:MyMenuItem.Style>
</mc:MyMenuItem> 
```

不要忘记在您的窗口（或您可以放置​​此控件的任何位置）标记中引用此新控件的命名空间：

```
xmlns:mc="clr-namespace:MyControls" 
```

可以在 ResourceDictionary 中插入此样式，因此您无需在每次使用此控件时都引用它。

```
<Style TargetType="mc:MyMenuItem">
    <!-- Style comes here -->
</Style> 
```

然后你可以得到你问的：

```
<mc:MyMenuItem MyHeaderText="Quit ERD Builder" MyShortcutText="Alt+F4" MyUriSource="/ERDBuilder;component/icons/bw/102-walk.png" /> 
```

我希望它可以帮助你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T23:17:51.693

## CoreStyle.xaml

模板/样式中的部分：

```
<Setter Property="Icon">
  <Setter.Value>
    <ctrl:Bitmap>
      <ctrl:Bitmap.Source>
        <!-- This doesnt work: --> <BitmapImage UriSource="{Binding Mode=OneWay, Path=MenuIcon, RelativeSource={RelativeSource FindAncestor, AncestorType=ctrl:MainMenuItem}}" />
        <!-- This Still works fine: <BitmapImage UriSource="../Resources/Icons/16/page_add.png" />-->
      </ctrl:Bitmap.Source>
    </ctrl:Bitmap>
  </Setter.Value>
</Setter> 
```

## 主菜单项.cs

派生自 MenuItem 的自定义控件类：

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Input;

namespace ErdBuilder.Shell.Controls
{
class MainMenuItem : MenuItem
{
    public ICommand MenuCommand
    {
        get { return (ICommand) GetValue(MenuCommandProperty); }
        set { SetValue(MenuCommandProperty, value); }
    }

    public static readonly DependencyProperty MenuCommandProperty = DependencyProperty.Register("MenuCommand", typeof(ICommand), typeof(MainMenuItem));

    public string MenuText
    {
        get { return (string)GetValue(MenuTextProperty); }
        set { SetValue(MenuTextProperty, value); }
    }

    public static readonly DependencyProperty MenuTextProperty = DependencyProperty.Register("MenuText", typeof(string), typeof(MainMenuItem));

    public string MenuShortcut
    {
        get { return (string)GetValue(MenuShortcutProperty); }
        set { SetValue(MenuShortcutProperty, value); }
    }

    public static readonly DependencyProperty MenuShortcutProperty = DependencyProperty.Register("MenuShortcut", typeof(string), typeof(MainMenuItem));

    public string MenuIcon
    {
        get { return (string)GetValue(MenuIconProperty); }
        set { SetValue(MenuIconProperty, value); }
    }

    public static readonly DependencyProperty MenuIconProperty = DependencyProperty.Register("MenuIcon", typeof(string), typeof(MainMenuItem));

} 
```

}

我也试过这个：

```
public BitmapImage MenuIcon
    {
        get { return new BitmapImage(new Uri((string)GetValue(MenuIconProperty))); }
        set { SetValue(MenuIconProperty, value); }
    }

    public static readonly DependencyProperty MenuIconProperty =     DependencyProperty.Register("MenuIcon", typeof(BitmapImage), typeof(MainMenuItem)); 
```

## 壳牌.xaml

最后是我尝试使用新控件的部分：

```
<ctrl:MainMenuItem x:Name="TestMenu"
  MenuCommand="{x:Static ApplicationCommands.New}"
  MenuText="New..."
  MenuShortcut="Ctr+N"
  MenuIcon="../Resources/Icons/16/page_add.png"/> 
```

# backbone.js - 如何将集合绑定选择框添加到 Backbone.Marionette 中的表单？

> ID：12955984
> 
> 赞同：2
> 
> 时间：2012-10-18T13:35:04.310
> 
> 标签：backbone.js, marionette

我有一个成员表单，其中有一个选择框用于选择该成员的一组。

我正在使用 Backbone 和 Backbone.Marionette。成员表单绑定到 MemberModel。选择框的数据来自 GroupCollection。MemberModel 仅包含一个 group_id，不包含对 GroupCollection 的任何引用。

我现在手动生成这个选择框（获取 GroupCollection 然后使用 Javascript 添加到选择框）。

我想知道在 Backbone.Marionette 中是否有更好的方法。我认为可以使用 ListView 和 ItemView 来完成，但我不知道如何将选择框添加到此成员表单，因为此表单不是布局。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-20T12:32:41.273

有许多不同的方法可以做到这一点，并且可以使用 CollectionView。您必须将 CollectionView 设置`tagName`为“select”，然后与 CollectionView 一起使用的 itemView 将 tagName 设置为“option”。

更简单的想法可能是单独使用 ItemView，并将您的集合作为数据源。您可以使用带有 ItemView 的集合没问题，您只需在模板中执行循环。

使用 underscore.js 模板：

```
<script type='text/template' id='some-template'>
  <select>
    <%= _.each(items, function(item){ %>
    <option value="<%= item.value %>"><%= item.name %>
    <%= }) %>
  </select>
</script> 
```

```
 Marionette.ItemView.extend({
  template: "#some-template"
  // ...
}) 
```

我在这里更详细地写了这两个基本选项：http: [//lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/](http://lostechies.com/derickbailey/2011/10/11/backbone-js-getting-the-model-for-a-clicked-element/)

希望有帮助。

# bash - 过滤文本文件以根据第 3 列中的值获取唯一条目

> ID：12955985
> 
> 赞同：4
> 
> 时间：2012-10-18T13:35:08.257
> 
> 标签：bash, sorting, filter

我知道一点 bash，但我在过滤文件时遇到了问题。我将用一个例子来解释：

**给定如下文本文件（file1）：**

```
10.10.12 bib24 Avenger goodone
10.10.12 bib21 The_Dark_Knight_Rises betterone
10.10.12 bib53 Avenger goodone
10.10.12 bib35 Ice_Age wow
11.10.12 bib53 TheAmazingSpiderMan nice
11.10.12 bib54 TheAmazingSpiderMan nice
11.10.12 bib01 Avenger goodone
12.10.12 bib29 Avenger goodone
12.10.12 bib11 TheAmazingSpiderMan nice
12.10.12 bib03 Ice_Age wow
12.10.12 bib98 Ice_Age wow
14.10.12 bib12 Ice_Age wow 
```

**这是我想要的结果（file2）：**

```
10.10.12 bib24 Avenger goodone
10.10.12 bib21 The_Dark_Knight_Rises betterone
10.10.12 bib35 Ice_Age wow
11.10.12 bib53 TheAmazingSpiderMan nice 
```

**所以我的问题是：**我使用哪个命令来获得这个结果（file2）？（即电影的第一个条目，不考虑列/字段 1、2 和 4）。

我希望它足够清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-18T13:50:28.463

这是一种使用方法`awk`：

```
awk '!a[$3]++' file.txt 
```

结果：

```
10.10.12 bib24 Avenger goodone
10.10.12 bib21 The_Dark_Knight_Rises betterone
10.10.12 bib35 Ice_Age wow
11.10.12 bib53 TheAmazingSpiderMan nice 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-18T13:43:20.937

尝试做的是：

```
sort -u -k3 file.txt 
```

**输出**：

```
10.10.12 bib24 Avenger goodone
10.10.12 bib35 Ice_Age wow
11.10.12 bib53 TheAmazingSpiderMan nice
10.10.12 bib21 The_Dark_Knight_Rises betterone 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-24T10:37:32.247

对于生锈的 csh 用户：

用这个：

```
awk '{c[$3]++} {if (c[$3] == 1) print $0}' file.txt 
```

因为有了原始答案，它会报错“未找到事件”（也可以使“！”正常字符！但这更易于阅读和使用）

# c++ - 调用返回后如何删除[]内存

> ID：12955991
> 
> 赞同：1
> 
> 时间：2012-10-18T13:35:45.453
> 
> 标签：c++, class, free, delete-operator

我有一个代表矩阵的类和矩阵上的几个操作。我试图重载`*`运算符以将两个矩阵相乘。

```
matrix matrix::operator* (matrix param) {
  if(n!=param.n){
    matrix blah;
    return blah;}

  matrix temp(n,0);
  temp.user_matrix=mult(param.user_matrix);
  return temp;} 
```

矩阵都是方形的，所以第一部分只是检查它们是否具有相同的大小。这可行，但是在将临时矩阵返回到另一个矩阵对象后，我应该如何删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-18T13:38:59.697

你不应该。它会自动销毁。

您应该只`delete`使用已分配的对象`new`。

通常使用 raw`new`并且`delete`在现代 C++ 中不受欢迎。看看`std::unique_ptr`和`std::shared_ptr`寻找替代品。（您的示例中不需要它们）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:42:40.550

“temp”是一个局部变量，作用于你的函数，不需要释放它的内存。它使用的内存在堆栈上，因此它会被函数后缀（构成 return 语句的底层代码）自动“释放”。

```
void foo() {
    int temp = 5;
    return temp + temp;
}
;; x86 ASSEMBLY (NASM/FASM syntax)
foo:
    SUB esp, 4 ;; <-- local memory for temp variable
    MOV [esp], 5 ;; temp = 5
    MOV eax, [esp] ;; eax = 5 (eax is the return-value register)
    ADD eax, eax ;; 5 + 5
    ADD esp, 4 ;; <-- "free" local memory for temp variable
    RETN 
```

# sql-server - 在重复项中选择最大值

> ID：12955997
> 
> 赞同：1
> 
> 时间：2012-10-18T13:36:07.683
> 
> 标签：sql-server, reportingservices-2005

我正在用 SQL 编写一个用于 SSRS 2005 的查询，它是

```
select t1.Category, t2.condition,'1' as hasCondition from t1
left outer join t2 on t1.ID = t2.ID
left outer join t3 on t2.cID = t3.cID
where t3.clientID = 6 

union

select t1.Category, t2.condition, '0' as hasCondition from t1
left outer join t2 on t1.ID = t2.ID 
```

并将数据返回为：

```
 Category            Condition            hasCondition

 Behavioural       Tourette's Syndrome         0
 Communications    Impaired Speech             0
 Dexterity         Osteoarthritus              0
 Dexterity         Osteoporosis                0
 Dexterity         Other Dexterity             0
 Dexterity         Rheumatoid Arthritus        0
 Emotional         Bipolar Disorder            0
 Emotional         Clinical Depression        0
 Emotional         Depression                 0
 Emotional         Depression                 1
 Emotional         Gulf War Syndrome          0
 Emotional         Gulf War Syndrome          1 
```

现在我只想从重复行/结果中选择一条记录，例如：Category-Emotional, condition-Depression which hasCondition '1' or 'true'

我希望我用这个例子说清楚了。请帮我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T13:38:31.703

```
SELECT  category, condition, MAX(hasCondition)
FROM (
    select t1.Category, t2.condition,'1' as hasCondition from t1
    left outer join t2 on t1.ID = t2.ID
    left outer join t3 on t2.cID = t3.cID
    where t3.clientID = 6 

    union

    select t1.Category, t2.condition, '0' as hasCondition from t1
    left outer join t2 on t1.ID = t2.ID)
GROUP BY category, condition 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T13:40:20.773

不是 100% 清楚你想要什么，但我认为你只是在寻找最终字段的 MAX() ......

```
SELECT
  category, condition, MAX(has_condition) AS hasCondition
FROM
(
  select t1.Category, t2.condition,'1' as hasCondition from t1
  left outer join t2 on t1.ID = t2.ID
  left outer join t3 on t2.cID = t3.cID
  where t3.clientID = 6 

  union

  select t1.Category, t2.condition, '0' as hasCondition from t1
  left outer join t2 on t1.ID = t2.ID
)
  AS data
GROUP BY
  category, condition 
```

如果您想简化整个查询...

```
 select
    t1.Category,
    t2.condition,
    MAX(CASE WHEN t3.clientID = 6 THEN 1 ELSE 0 END) as hasCondition
  from
    t1
  left outer join
    t2
      on  t2.ID = t1.ID
  left outer join
    t3
      on  t3.cID = t2.cID
      and t3.clientID = 6 
  group by
    t1.Category,
    t2.condition 
```

# php - 在php中使用ajax级联下拉列表

> ID：12955999
> 
> 赞同：0
> 
> 时间：2012-10-18T13:36:15.200
> 
> 标签：php, javascript, ajax, list, drop-down-menu

我有一个通过 ajax 从数据库中获取的级联下拉列表。该列表加载但它没有发布到数据库，也没有看到后面的代码。

```
function getXMLHTTP() { //function to return the xml http object
        var xmlhttp=false;  
        try{
            xmlhttp=new XMLHttpRequest();
        }
        catch(e)    {       
            try{            
                xmlhttp= new ActiveXObject("Microsoft.XMLHTTP");
            }
            catch(e){
                try{
                xmlhttp = new ActiveXObject("Msxml2.XMLHTTP");
                }
                catch(e1){
                    xmlhttp=false;
                }
            }
        }

        return xmlhttp;
    }

function getCity(stateid)
{
    //alert(stateid);
  var strURL="findCity.php?state="+stateid;
  var req = getXMLHTTP();
  if (req)
  {
    req.onreadystatechange = function()
    {
      if (req.readyState == 4) // only if "OK"
      {
        if (req.status == 200)
        {
          document.getElementById('citydiv').innerHTML=req.responseText;
        } else {
          alert("There was a problem while using XMLHTTP:\n" + req.statusText);
        }
      }
    }
    req.open("GET", strURL, true);
    req.send(null);
  }
} 
```

和php文件

```
<? $state=$_GET['state'];
    $link = mysql_connect('localhost', '', ''); //change the configuration if required
    if (!$link) {
        die('Could not connect: ' . mysql_error());
    }
    mysql_select_db('a'); //change this if required
    $query="select FOR_CODE,FOR_DESC from maruti_city where FOR_STAT_CODE='{$state}' order by FOR_DESC";
    $result=mysql_query($query);?>
    <select name="city" onchange="getDealer(this.value)" class="sel" >
        <option value="0">Select City</option>
        <? while($row=mysql_fetch_array($result)) {  ?>
        <option value><?=$row['FOR_DESC']?></option>
        <?} ?>
    </select> 
```

DDL 的负载，但这些值未发布到数据库。形式

```
<div class="container">
<table width="528" border="0" cellpadding=1 class="formTable" style="width: 515px;font-family:arial;font-size:12px;" >
<form action="form_submit.php" method="POST" name="alto800" id="alto800" onsubmit="return validate();">
    <tbody>
        <tr>
            <td width="52%">Name</td>
            <td width="48%" >Mobile/Phone No.</td>
        </tr>
        <tr>
            <td>
                <select name="title" id="mr" class="sel">
                <option value="mr">Mr.</option>
                <option value="mrs">Mrs.</option>
                </select>
                <input type="text" name="name" id="name" class="formName" />
            </td>
            <td>
                <input type="text" name="mobile" id="mobile"/>
            </td>
        </tr>
        <tr>
            <td >State</td>
            <td >City</td>
        </tr>
        <tr>
            <td>
                <select name="state" id="state" class="sel"  onchange="getCity(this.value)">
                <option value="0">Select state</option>
                <option value="AN">ANDAMAN</option>
<option value="AP">ANDHRA PRADESH</option>
<option value="AR">ARUNANCHAL PRADESH</option>
<option value="AS">ASSAM</option>
<option value="BH">BIHAR</option>
<option value="CG">CHATTISGARH</option>
<option value="CH">CHANDIGARH</option>
<option value="DL">DELHI</option>
<option value="DM">DAMAN</option>
<option value="DN">DADRA & NAGAR HAVELI</option>
<option value="GJ">GUJRAT</option>
<option value="GO">GOA</option>
<option value="HN">HARYANA</option>
<option value="HP">HIMACHAL PRADESH</option>
<option value="JH">JHARKHAND</option>
<option value="JK">JAMMU & KASHMIR</option>
<option value="KL">KERALA</option>
<option value="KT">KARNATAKA</option>
<option value="MH">MAHARASHTRA</option>
<option value="ML">MEGHALAYA</option>
<option value="MN">MANIPUR</option>
<option value="MP">MADHYA PRADESH</option>
<option value="MZ">MIZORAM</option>
<option value="NG">NAGALAND</option>
<option value="OS">ORISSA</option>
<option value="PJ">PUNJAB</option>
<option value="PY">PONDICHERRY</option>
<option value="RJ">RAJASTHAN</option>
<option value="SK">SIKKIM</option>
<option value="TN">TAMIL NADU</option>
<option value="TR">TRIPURA</option>
<option value="UP">UTTAR PRADESH</option>
<option value="UT">UTTARANCHAL</option>
<option value="WB">WEST BENGAL</option>

                </select>
            </td>
            <td><div id="citydiv">
                <select name="city" id="city" class="sel" onChange="getDealer(this.value)" >
                <option value="0">Select state first</option>
                </select>
                </div>

            </td>
        </tr>
        <tr>
            <td >Preffered Dealer</td>
            <td >&nbsp;</td>
        </tr>
        <tr> 
            <td colspan="2"><div id="dealerdiv"><select name="dealer"  style="width:500px;height:25px;" >
              <option value="0">Select city first</option>
            </select>                   </div>  </td>
        </tr>
        <tr>
          <td>Email Address</td>
          <td>&nbsp;</td>
      </tr>
        <tr>
          <td><input type="text" name="email" id="email" /></td>
          <td>&nbsp;</td>
      </tr>
        <tr>
            <td >Your Query</td>
            <td rowspan="2" ><br />
              <br />            </td>
        </tr>
        <tr>
            <td>
             <textarea name="query" id="query"></textarea>

            </td>
        </tr>
        <tr>
            <td >
                <div style="height:10px"></div>
                <input type="image" name="submit" value="submit" src="images/submit.png" />
            </td>
            <td ></td>
        </tr>

    </tbody>
    </form>
</table> 
```