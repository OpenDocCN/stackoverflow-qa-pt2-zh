# StackOverflow 问答 13019000-13019999

# r - 乘以数据框的列

> ID：13019003
> 
> 赞同：3
> 
> 时间：2012-10-22T20:08:05.620
> 
> 标签：r

我一直在为此挠头。我有两个数据框：`df`

```
df <- data.frame(group = 1:3,
                 age = seq(30, 50, length.out = 3),
                 income = seq(100, 500, length.out = 3),
                 assets = seq(500, 800, length.out = 3)) 
```

和`weights`

```
weights <- data.frame(age = 5, income = 10) 
```

我只想将这两个数据框乘以相同的列名。我试过这样的事情：

```
colwise(function(x) {x * weights[names(x)]})(df) 
```

但这显然不起作用，因为`colwise`没有将列名保留在函数内。我查看了各种`mapply`解决方案（[示例](https://stat.ethz.ch/pipermail/r-help/2007-November/145917.html)），但无法找到答案。

结果`data.frame`应如下所示：

```
structure(list(group = 1:3, age = c(150, 200, 250), income = c(1000, 
3000, 5000), assets = c(500, 650, 800)), .Names = c("group", 
"age", "income", "assets"), row.names = c(NA, -3L), class = "data.frame")

  group age income assets
1     1 150   1000    500
2     2 200   3000    650
3     3 250   5000    800 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T20:43:00.423

`sweep()`是你的朋友，对于这个特殊的例子。它依赖于名称中的名称`df`和`weights`正确的顺序，但可以安排。

```
> nams <- names(weights)
> df[, nams] <- sweep(df[, nams], 2, unlist(weights), "*")
> df
  group age income assets
1     1 150   1000    500
2     2 200   3000    650
3     3 250   5000    800 
```

`weights`如果和中的变量名`df`顺序不同，可以这样：

```
> df2 <- data.frame(group = 1:3,
+                   age = seq(30, 50, length.out = 3),
+                   income = seq(100, 500, length.out = 3),
+                   assets = seq(500, 800, length.out = 3))
> nams <- c("age", "income") ## order in df2
> weights2 <- weights[, rev(nams)]
> weights2  ## wrong order compared to df2
  income age
1     10   5
> df2[, nams] <- sweep(df2[, nams], 2, unlist(weights2[, nams]), "*")
> df2
  group age income assets
1     1 150   1000    500
2     2 200   3000    650
3     3 250   5000    800 
```

换句话说，我们对所有对象重新排序，以便`age`和`income`处于正确的顺序。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T20:32:24.360

有人可能有一种巧妙的方法来使用 plyr，但这可能是基础 R 中最直接的方法。

```
shared.names <- intersect(names(df), names(weights))
cols <- sapply(names(df), USE.NAMES=TRUE, simplify=FALSE, FUN=function(name) 
        if (name %in% shared.names) df[[name]] * weights[[name]] else df[[name]])
data.frame(do.call(cbind, cols))

#   group age income assets
# 1     1 150   1000    500
# 2     2 200   3000    650
# 3     3 250   5000    800 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T20:37:18.123

您的数据：

```
df <- data.frame(group = 1:3, 
                 age = seq(30, 50, length.out = 3), 
                 income = seq(100, 500, length.out = 3), 
                 assets = seq(500, 800, length.out = 3))
weights <- data.frame(age = 5, income = 10) 
```

逻辑：

```
# Basic name matching looks like this
names(df[names(df) %in% names(weights)])
# [1] "age"    "income"

# Use that in `sapply()`
sapply(names(df[names(df) %in% names(weights)]), 
       function(x) df[[x]] * weights[[x]])
#      age income
# [1,] 150   1000
# [2,] 200   3000
# [3,] 250   5000 
```

实施：

```
# Put it all together, replacing the original data
df[names(df) %in% names(weights)] <- sapply(names(df[names(df) %in% names(weights)]), 
                                            function(x) df[[x]] * weights[[x]]) 
```

结果：

```
df
#   group age income assets
# 1     1 150   1000    500
# 2     2 200   3000    650
# 3     3 250   5000    800 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T22:00:11.377

这是一个 `data.table`解决方案

```
library(data.table)
DT <- data.table(df)
W <- data.table(weights) 
```

使用`mapply`（或`Map`）计算新列，然后通过引用一次添加两者。

```
DT <- data.table(df)
W <- data.table(weights)

DT[, `:=`(names(W), Map('*', DT[,names(W), with = F], W)), with = F] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T20:41:05.837

您也可以在 for 循环中使用由 which(%in%) 生成的索引来执行此操作。上述方法效率更高，但这是一种替代方法。

```
results <- list()
  for ( i in 1:length(which(names(df) %in% names(weights))) ) {
    idx1 <- which(names(df) %in% names(weights))[i]
      idx2 <- which(names(weights) %in% names(df))[i] 
    results[[i]] <- dat[,idx1] * weights[idx2] 
  } 
unlist(results) 
```

# python - Tornado AsyncHTTPClient HTTP 持久连接支持（HTTP keep-alive）

> ID：13019005
> 
> 赞同：1
> 
> 时间：2012-10-22T20:08:09.733
> 
> 标签：python, tornado

tornado 的**AsyncHTTPClient**是否支持 HTTP 持久连接（HTTP keep-alive）？如果是，是否有任何示例代码这样做？

我会很感激任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-27T03:40:53.520

截至 2012 年 10 月，Tornado 的 AsyncHTTPClient 不支持持久 HTTP 连接。

但是，有一个[拉取请求](https://github.com/facebook/tornado/pull/328)来添加它。

# xcode - 如何使用 applescript xcode 项目从文本字段中获取文本

> ID：13019010
> 
> 赞同：0
> 
> 时间：2012-10-22T20:08:29.843
> 
> 标签：xcode, applescript

我正在尝试用 applescript 编写一个 xcode 应用程序。我需要从文本框中获取用户输入的文本，并在按下提交按钮时将其设置为变量。

谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T18:51:15.167

我也刚刚开始掌握 Cocoa-Applescript（周围没有那么多信息！）但它应该按如下方式工作，至少这是我在我的应用程序中所做的:)

**1）为文本字段创建一个出口：**

即在下面：

```
 script AppDelegate
     property parent : class "NSObject" 
```

添加：

```
 property myTextField : missing value 
```

“缺失值”位使 myTextField 在 Interface Builder 中可用。

**2）为您的按钮创建一个处理程序：**

```
 on submitButtonClicked_(sender)

 end submitButtonClicked_ 
```

（可以随意命名，但据我所知，它必须以小写字母开头并以下划线结尾）

**3) 将处理程序和出口链接到它们各自的 UI 元素：**

*   在 Interface Builder 中，右键单击 App Delegate，然后将 submitButtonClicked 旁边的圆圈拖到您的按钮上

*   同样将圆圈从 myTextField 拖到文本字段

**4）在点击处理程序中添加一行以将变量设置为字段的值：**

```
 on submitButtonClicked_(sender)

     set currentTextFieldText to myTextField's stringValue() as text

     -- do stuff with currentTextFieldText

 end submitButtonClicked_ 
```

如果你想在文本字段中放一些东西：

```
 tell myTextField to setStringValue_(whatYouWantInTheField) 
```

希望这可以帮助！

# java - 需要关于如何组织 SQL 结果的建议

> ID：13019011
> 
> 赞同：1
> 
> 时间：2012-10-22T20:08:30.937
> 
> 标签：java, sql

我正在构建一个多层菜单。因此，例如，每个主菜单项可能有 5-10 个子菜单项，每个子菜单项可能有 5-10 个第三级项。菜单项，无论它们来自哪一层，都保存在一个表中。我（当前）用来提取数据的查询如下所示：

```
SELECT *
FROM menu_items AS m1
LEFT JOIN (SELECT name AS slName, id AS slId, parent_id AS slPid FROM menu_items)
m2 ON m1.id = m2.slPid
LEFT JOIN (SELECT name AS tlName, id AS tlId, parent_id AS tlPid FROM menu_items)
m3 ON m2.slId = m3.tlPid
WHERE parent_id = 0 
```

此查询的结果在视觉上看起来像我想要的菜单，但现在我想我可能想尝试重组，以便我可以将它干净地粘贴在一个对象中，而不是将其保留为 DataTable 或其他任何东西。

以下是上述查询的示例结果：

作为参考，sl 表示二级，tl 表示三级，以此类推。

```
{id=1, name=Industry, level=1, parent_id=0, slname=Equipment & Machinery, slid=4, slpid=1, tlname=null, tlid=null, tlpid=null}
{id=1, name=Industry, level=1, parent_id=0, slname=Food, slid=5, slpid=1, tlname=null, tlid=null, tlpid=null}
{id=1, name=Industry, level=1, parent_id=0, slname=Fabricated Metal Products, slid=8, slpid=1, tlname=null, tlid=null, tlpid=null}
{id=1, name=Industry, level=1, parent_id=0, slname=Automotive, slid=9, slpid=1, tlname=null, tlid=null, tlpid=null}
{id=1, name=Industry, level=1, parent_id=0, slname=Chemicals and Allied Products, slid=10, slpid=1, tlname=null, tlid=null, tlpid=null}
{id=2, name=Application, level=1, parent_id=0, slname=App Stuff 1, slid=11, slpid=2, tlname=null, tlid=null, tlpid=null}
{id=2, name=Application, level=1, parent_id=0, slname=App Stuff 2, slid=12, slpid=2, tlname=null, tlid=null, tlpid=null}
{id=2, name=Application, level=1, parent_id=0, slname=App Stuff 3, slid=13, slpid=2, tlname=null, tlid=null, tlpid=null}
{id=2, name=Application, level=1, parent_id=0, slname=App Stuff 4, slid=14, slpid=2, tlname=null, tlid=null, tlpid=null}
{id=3, name=Product, level=1, parent_id=0, slname=Prod Stuff 1, slid=15, slpid=3, tlname=null, tlid=null, tlpid=null}
{id=3, name=Product, level=1, parent_id=0, slname=Prod Stuff 2, slid=16, slpid=3, tlname=null, tlid=null, tlpid=null}
{id=3, name=Product, level=1, parent_id=0, slname=Prod Stuff 3, slid=17, slpid=3, tlname=null, tlid=null, tlpid=null} 
```

所以问题是现在我得到了一堆行，这些行的格式不是很好，无法从中创建一个 Menu 对象。我只是在寻找有关如何重组的建议。也许改变 sql 查询以获得更好的基本数据集，或者可能对如何格式化我当前的 SQL 有一个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:22:54.167

您可以执行以下操作：

```
ID   NAME            PARENT 
 1   Industry        1(or null. either self referencing or null = top level)
 2   Food            1
 3   Burgers         2
 4   Application     4
 5   Software        4
 6   Product         6 
```

在您的数据库中。本质上，Name 会循环回来，您的代码可以对其进行设置，以便它沿着链向上走，直到父列为空或引用该行的 ID。

所以这个菜单最终看起来像：

```
Industry
  Food
    Burgers
Application
  Software
Product 
```

# jquery - 带有检查 IE8 的 jQuery xml 解析不起作用

> ID：13019015
> 
> 赞同：1
> 
> 时间：2012-10-22T20:08:53.190
> 
> 标签：jquery, internet-explorer-8, xml-parsing, each

我已经查看并尝试了有关 jQuery、XML 和 IE8 的所有 SO 答案，但没有任何结果。关于如何让它与 jQuery 或 Javascript 一起工作的任何其他建议？

```
 $.ajax({
        type: "GET",
        url: "http://query.yahooapis.com/v1/public/yql?q=select%20title%2C%20link%20from%20rss%20where%20url%3D%22http%3A%2F%2Fwww.fs.usda.gov%2Fwps%2FPA_WIDConsumption%2Frssgetfile%3FxFSENavChannel00%3D1109%26xFSENavChannel02%3D091000000000000%26pathinfo%3D%2Fwps%2Fportal%2Ffsinternet%2F!ut%2Fp%2Fc5%2F04_SB8K8xLLM9MSSzPy8xBz9CP0os3gjAwhwtDDw9_AI8zPwhQoYAOUjzeINcABHAwK6w0H2YaoI84GrAMvjMd_PIz83Vb8gN8Igy8RREQC1scDO%2Fdl3%2Fd3%2FL2dJQSEvUUt3QS9ZQnZ3LzZfMjAwMDAwMDBBODBPSEhWTjJNMDAwMDAwMDA!%2F%3Fnavtype%3DBROWSEBYSUBJECT%26forestname%3DRegion%25209%22",
    dataType:"xml",    
    success: function(msg){             
            data = parseXml(msg);

            $(data).find('item').each(function(index,val){
                var title = $(this).find("title").text();
                var link = $(this).find("link").text();
                $('#loadnews').append("<li><a href="+link+">"+title+"</a></li>");
            });    
        }
    });     

function parseXml(xml) {
     if ($.browser.msie  && parseInt($.browser.version, 10) === 8) {
        var xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
        xmlDoc.loadXML(xml);
        xml = xmlDoc;
    }   
    return xml;
}
if ($.browser.msie  && parseInt($.browser.version, 10) === 8) {
  alert('IE8');
} else {
  alert('Non IE8');
} 
```

小提琴在这里：http: [//jsfiddle.net/tjbLf/7/](http://jsfiddle.net/tjbLf/7/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:12:10.913

为什么需要 XML 转换？jQuery 可以为您完成所有工作：

```
$.ajax({
    type: "GET",
    url: "...",
    dataType: "xml",
    success: function(data) {
        $(data).find('item').each(function(index, val) {
            var title = $(this).find("title").text();
            var link = $(this).find("link").text();
            $('#loadnews').append("<li><a href=" + link + ">" + title + "</a></li>");
        });
    }
});​ 
```

**演示：http:** [//jsfiddle.net/tjbLf/9/](http://jsfiddle.net/tjbLf/9/)

*但是*，在跨域请求中，IE 会给出“No transport”错误。考虑使用 JSONP 从外部 Web 服务接收数据。

# css - 为什么从谷歌代码存储库中使用 css 文件的样式时不应用？

> ID：13019017
> 
> 赞同：0
> 
> 时间：2012-10-22T20:09:06.133
> 
> 标签：css, svn, project-hosting

这是小提琴 -[愚蠢的测试](http://jsfiddle.net/sauliuslx/UXH2E/2/) 资源文件 test.css 有这些类：

```
.parent {width:120px;display:table-row;}
.second {width: 65px; background:green;}
.cell {display:table-cell;}​ 
```

但它们不适用。似乎下载了两个资源文件并执行了javascript。我想知道为什么不应用css？ ![在此处输入图像描述](../Images/fb4cb854af497c7a446ca01f50ec0cbc.png)

# java - 在 Java 中实现曾经是 Mixin 的正确方法？

> ID：13019018
> 
> 赞同：1
> 
> 时间：2012-10-22T20:09:06.583
> 
> 标签：java, c++, mixins

我参与了一个项目，该项目将在不同时间用不同语言编写的代码整合到一个应用程序中。

我的作品是从 C++ 到 Java。在阅读了对这个问题的评论后：[https](https://stackoverflow.com/questions/587458/implement-mixin-in-java%22Implement%20Mixin%20In%20Java?%22) : //stackoverflow.com/questions/587458/implement-mixin-in-java 我得出的结论是，如果没有代码生成方案，Java 中的 mixins 是不可能的，而且这些方案不会在内部受到好评我正在工作的团队。

使用 vanilla Java 在 C++ 中实现曾经是 Mixin 的正确方法是什么？特别是，曾经有一种 MVC 类型的设计，其中一些控制器具有使用控制器状态的混合匹配逻辑。控制器将继承 Mixins 以在各种排列中获得此功能，因此线性继承路径没有多大意义。

我现在能想到的最好的事情是一堆实用程序类型的类，它们包含以前在 Mixin 中的逻辑，并让控制器调用它们的功能，同时将自己作为引用传递，以便实用程序类可以访问它们的状态. 恕我直言，这真的很臭，我希望有更好的方法。

那么，在 Java 中设计这个的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:15:04.717

如果你真的想要 mixins，你可以使用像 Scala 这样支持它们的语言（并在带有 Java 代码的 JVM 上运行）

否则我会作曲，这也不漂亮，但很简单。

# facebook - 如何根据将选项卡添加到页面的用户将查询字符串传递给 Facebook 选项卡应用程序 url

> ID：13019020
> 
> 赞同：3
> 
> 时间：2012-10-22T20:09:26.287
> 
> 标签：facebook, facebook-javascript-sdk, facebook-apps

我有一个非常简单的页面标签应用程序，可以添加到任何人的 FB 页面。我在我的网站上提供了一个按钮，以帮助用户将应用程序添加到他们的 FB 页面。

我想更新 iframe 页面选项卡 url（和安全 url）以包含查询字符串。这将允许为将应用程序添加到其页面的每个用户自定义 iframe 的内容。

一个基本用例是用户 1 单击按钮并将应用程序添加到他们的页面。iframe 的内容特定于用户 1。用户 2 执行相同操作，但其选项卡的内容特定于用户 2。我可以处理我网站上的查询字符串内容，以便它正确响应，但我不知道如何让 Tab url 从 Add App to Facebook 按钮添加查询字符串参数。

我正在使用的当前将应用添加到 facebook 代码：

```
<div id='fb-root'></div>
<script src='http://connect.facebook.net/en_US/all.js'></script>
<p><a onclick='addToPage(); return false;'>Add to Page</a></p>
<p id='msg'></p>

<script> 
  FB.init({appId: "252314034891861", status: true, cookie: true});

   function addToPage() {

  // calling the API ...
  FB.ui(
    {
        method: 'pagetab'
    },
    function(response) {
        if (response != null && response.tabs_added != null) {

            $.each(response.tabs_added, function(pageid) {
                  alert(pageid);
            });
        }
    }
  );

  }

</script> 
```

感谢您的帮助！

编辑添加更多信息

在与另一位开发人员讨论后，我想确保我清楚。如果 User1 将选项卡添加到他们的页面，那么无论谁查看选项卡，内容将始终是 User1 的上下文。如果 User2 将此选项卡添加到他们的页面，那么无论谁查看该选项卡，内容都将与 User2 相关。选项卡的内容特定于将选项卡添加到其页面的用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:52:57.677

您应该根据页面 ID 而不是添加它的页面管理员的用户 ID 来更改内容。短版：这是因为您无法在应用程序负载中可靠地传递页面管理员的用户 ID（或任何其他信息，因为用户可以手动访问选项卡）

但是，页面 ID 会通过[signed_request](https://developers.facebook.com/docs/howtos/login/signed-request/)`page`的属性与其他一些参数一起传递给您的应用程序，包括当前用户 ID（如果他们已授权您的应用程序）以及他们是否喜欢该页面或是否是管理员页面的（不管他们的授权状态）

一个应用程序不能多次安装到一个页面上，因此应用程序 ID/页面 ID 将是唯一的

您可以传递给页面标签应用程序以自定义显示的唯一其他参数是`app_data`将在`page`signed_request的属性中发送的参数，但这仅适用于包含该参数的链接：用户直接点击页面标签获胜'没有传递那个参数并且会得到未定制的内容

有关更多信息，请参阅文档*入门*部分中的[页面选项卡教程](https://developers.facebook.com/docs/appsonfacebook/pagetabs/)

# android - 比较骰子游戏中的数组

> ID：13019025
> 
> 赞同：1
> 
> 时间：2012-10-22T20:09:43.013
> 
> 标签：android, arrays, poker, dice

*** Coded Edited with Fix ***我发现一个开源项目有一些错误（到目前为止我已经修复了几个），但这个让我很难过。我要解决的问题...如果我有 3 组对（isThreePair）并且它也是一种 4（例如：4ea - 3's 和 2ea 4's），它总是选择一种 4（isFourOfAKind ），我应该可以选择任何一个。有人可以告诉我代码有什么问题。

```
 import android.content.Context;
import android.content.SharedPreferences;
import android.preference.PreferenceManager;

final class Scorer {

        private Scorer() {

        }

        public final static int calculate(int[] array, boolean ignoreExtraDice,
                        Context c) {
                int length = array.length;

                if (length == 0)
                        return 0;

                int[] newArray = count(array);

                if (length == 6) {

                        int straightStatus = isStraight(newArray, c, false);
                        if (straightStatus > 0) {
                                return straightStatus;
                        }

                        int threePairStatus = isThreePair(newArray, c, false);
                        if (threePairStatus > 0)
                                return threePairStatus;

                        int sixOfAKindStatus = isSixOfAKind(newArray, c);
                        if (sixOfAKindStatus > 0)
                                return sixOfAKindStatus;

                        int doubleTripletStatus = isDoubleTriplet(newArray, c);
                        if (doubleTripletStatus > 0)
                                return doubleTripletStatus;
                }

                int fiveOfAKindStatus = 0;
                if (length == 5)
                        fiveOfAKindStatus = isFiveOfAKind(newArray, c, length)[0];
                if (fiveOfAKindStatus > 0)
                        return fiveOfAKindStatus;

                int fourOfAKindStatus = 0;
                if (length == 4)
                        fourOfAKindStatus = isFourOfAKind(newArray, c, length)[0];
                if (fourOfAKindStatus > 0)
                        return fourOfAKindStatus;

                int threeOfAKindStatus = 0;
                if (length == 3)
                        threeOfAKindStatus = isThreeOfAKind(newArray, c, length)[0];
                if (threeOfAKindStatus > 0)
                        return threeOfAKindStatus;

                int combinationScore = scoreCombinations(newArray, c, length);

                if (combinationScore >= 0 && !ignoreExtraDice)
                        return 0;
                else
                        return Math.abs(combinationScore);

        }

        private final static int[] count(int[] array) {
                int numOf1 = 0;
                int numOf2 = 0;
                int numOf3 = 0;
                int numOf4 = 0;
                int numOf5 = 0;
                int numOf6 = 0;

                for (int j = 0; j < array.length; j++) {
                        switch (array[j]) {
                        case (1):
                                numOf1++;
                                break;
                        case (2):
                                numOf2++;
                                break;
                        case (3):
                                numOf3++;
                                break;
                        case (4):
                                numOf4++;
                                break;
                        case (5):
                                numOf5++;
                                break;
                        case (6):
                                numOf6++;
                                break;
                        }

                }

                int[] newArray = { numOf1, numOf2, numOf3, numOf4, numOf5, numOf6 };
                return newArray;
        }

        public final static int isStraight(int[] array, Context c, boolean calledPublicly) {
                if (array.length < 6)
                        return 0;

                SharedPreferences prefs = PreferenceManager
                                .getDefaultSharedPreferences(c);

                boolean toScoreStraight = prefs.getBoolean("toScoreStraightPref", true);

                if (!toScoreStraight)
                        return 0;

                int straightScore = 0;
                if (toScoreStraight)
                        straightScore = Integer.valueOf(prefs.getString("straightPref",
                                        "1500"));

                if (calledPublicly)
                        array = count(array);

                boolean isStraight = (array[0] == 1 && array[1] == 1 && array[2] == 1
                                && array[3] == 1 && array[4] == 1 && array[5] == 1);

                if (isStraight)
                        return straightScore;
                else
                        return 0;

        }

        public final static int isThreePair(int[] array, Context c, boolean calledPublicly) {

                if (array.length < 6)
                        return 0;

                SharedPreferences prefs = PreferenceManager
                                .getDefaultSharedPreferences(c);

                int threePairScore = Integer.valueOf(prefs.getString("threePairPref",
                                "750"));

                if (calledPublicly)
                        array = count(array);

                int count = 0;

                if (array[0] >= 2)
                    count += array[0] / 2;
                if (array[1] >= 2)
                    count += array[1] / 2;
                if (array[2] >= 2)
                    count += array[2] / 2;
                if (array[3] >= 2)
                    count += array[3] / 2;
                if (array[4] >= 2)
                    count += array[4] / 2;
                if (array[5] >= 2)
                    count += array[5] / 2;

                if (count == 3)
                        return threePairScore;
                else
                        return 0;

        }

        private final static int isSixOfAKind(int[] array, Context c) {

                SharedPreferences prefs = PreferenceManager
                                .getDefaultSharedPreferences(c);

                String sixKindPref = prefs.getString("sixOfAKindPref",
                                "4x the 3 Of A Kind Value");
                int sixOfAKindMult = (sixKindPref.contains("3000")) ? 3000 : Integer
                                .valueOf("" + sixKindPref.charAt(0));

                int score = 0;

                if (array[0] == 6)
                        score = 10000;
                if (array[1] == 6)
                        score = 200 * sixOfAKindMult;
                if (array[2] == 6)
                        score = 300 * sixOfAKindMult;
                if (array[3] == 6)
                        score = 400 * sixOfAKindMult;
                if (array[4] == 6)
                        score = 500 * sixOfAKindMult;
                if (array[5] == 6)
                        score = 600 * sixOfAKindMult;

                if (sixOfAKindMult > 100)
                        return sixOfAKindMult;
                if (score != 0)
                        return score;
                else
                        return 0;

        }

        private final static int isDoubleTriplet(int[] array, Context c) {
                SharedPreferences prefs = PreferenceManager
                                .getDefaultSharedPreferences(c);

                boolean toVariateTwoTripsScore = prefs.getBoolean(
                                "toScoreTwoTripsPref", false);

                if (!toVariateTwoTripsScore)
                        return 0;

                int twoTripsScore = 0;
                if (toVariateTwoTripsScore)
                        twoTripsScore = Integer.valueOf(prefs.getString(
                                        "twoTripletScorePref", "2500"));

                int count = 0;

                if (array[0] == 3)
                        count++;
                if (array[1] == 3)
                        count++;
                if (array[2] == 3)
                        count++;
                if (array[3] == 3)
                        count++;
                if (array[4] == 3)
                        count++;
                if (array[5] == 3)
                        count++;

                if (count == 2)
                        return twoTripsScore;
                else
                        return 0;
        }

        private final static int scoreCombinations(int[] array, Context c, int length) {

                int score = 0;

                int[] fiveArray = isFiveOfAKind(array, c, length);
                int[] fourArray = isFourOfAKind(array, c, length);
                int[] threeArray = isThreeOfAKind(array, c, length);

                int[] temp = null;

                if (fiveArray[0] != 0)
                        temp = fiveArray;
                else if (fourArray[0] != 0)
                        temp = fourArray;
                else if (threeArray[0] != 0)
                        temp = threeArray;

                if (temp != null) {

                        for (int i = 1; i <= 6; i++) {
                                if (temp[i] == 0)
                                        array[i - 1] = 0;
                        }

                }

                score += fiveArray[0];
                score += fourArray[0];
                score += threeArray[0];

                int scoreOfRemainders = scoreRemainders(array);

                if (scoreOfRemainders > 0)
                        score *= -1;

                score += scoreOfRemainders;

                return score;

        }

        private final static int[] isFiveOfAKind(int[] array, Context c, int length) {

                SharedPreferences prefs = PreferenceManager
                                .getDefaultSharedPreferences(c);

                String fiveKindPref = prefs.getString("fiveOfAKindPref",
                                "3x the 3 Of A Kind Value");
                int fiveOfAKindMult = (fiveKindPref.contains("2000")) ? 2000 : Integer
                                .valueOf("" + fiveKindPref.charAt(0));

                int score = 0;

                if (array[0] == 5) {
                        score = 1000 * fiveOfAKindMult;
                        array[0] = 0;
                }
                if (array[1] == 5) {
                        score = 200 * fiveOfAKindMult;
                        array[1] = 0;
                }
                if (array[2] == 5) {
                        score = 300 * fiveOfAKindMult;
                        array[2] = 0;
                }
                if (array[3] == 5) {
                        score = 400 * fiveOfAKindMult;
                        array[3] = 0;
                }
                if (array[4] == 5) {
                        score = 500 * fiveOfAKindMult;
                        array[4] = 0;
                }
                if (array[5] == 5) {
                        score = 600 * fiveOfAKindMult;
                        array[5] = 0;
                }

                if (score != 0) {

                        if (fiveOfAKindMult > 100)
                                score = fiveOfAKindMult;
                        else if (length > 5)
                                score *= -1;
                }

                int[] returnArray = { score, array[0], array[1], array[2], array[3],
                                array[4], array[5] };

                return returnArray;

        }

        private final static int[] isFourOfAKind(int[] array, Context c, int length) {

                SharedPreferences prefs = PreferenceManager
                                .getDefaultSharedPreferences(c);

                String fourKindPref = prefs.getString("fourOfAKindPref",
                                "2x the 3 Of A Kind Value");
                int fourOfAKindMult = (fourKindPref.contains("1000")) ? 1000 : Integer
                                .valueOf("" + fourKindPref.charAt(0));

                int score = 0;

                if (array[0] == 4) {
                        score = 1000 * fourOfAKindMult;
                        array[0] = 0;
                }
                if (array[1] == 4) {
                        score = 200 * fourOfAKindMult;
                        array[1] = 0;
                }
                if (array[2] == 4) {
                        score = 300 * fourOfAKindMult;
                        array[2] = 0;
                }
                if (array[3] == 4) {
                        score = 400 * fourOfAKindMult;
                        array[3] = 0;
                }
                if (array[4] == 4) {
                        score = 500 * fourOfAKindMult;
                        array[4] = 0;
                }
                if (array[5] == 4) {
                        score = 600 * fourOfAKindMult;
                        array[5] = 0;
                }

                if (score != 0) {

                        if (fourOfAKindMult > 100)
                                score = fourOfAKindMult;
                        else if (length > 4)
                                score *= -1;
                }

                int[] returnArray = { score, array[0], array[1], array[2], array[3],
                                array[4], array[5] };

                return returnArray;
        }

        private final static int[] isThreeOfAKind(int[] array, Context c, int length) {
                int score = 0;

                if (array[0] == 3) {
                        score += 1000;
                        array[0] = 0;
                }
                if (array[1] == 3) {
                        score += 200;
                        array[1] = 0;
                }
                if (array[2] == 3) {
                        score += 300;
                        array[2] = 0;
                }
                if (array[3] == 3) {
                        score += 400;
                        array[3] = 0;
                }
                if (array[4] == 3) {
                        score += 500;
                        array[4] = 0;
                }
                if (array[5] == 3) {
                        score += 600;
                        array[5] = 0;
                }

                if (score != 0 && length > 3) {
                        score *= -1;
                }

                int[] returnArray = { score, array[0], array[1], array[2], array[3],
                                array[4], array[5] };

                return returnArray;

        }

        private final static int scoreRemainders(int[] array) {

                boolean thereAreExtra = (array[1] != 0 || array[2] != 0
                                || array[3] != 0 || array[5] != 0);

                int score = 0;
                if (thereAreExtra) {
                        score += array[0] * 100;
                        score += array[4] * 50;
                } else {
                        score += array[0] * -100;
                        score += array[4] * -50;
                }

                return score;
        }

} 
```

我的问题在代码审查中得到了回答。上述代码反映了工作代码。但这里是需要修改的部分。

```
 public final static int isThreePair(int[] array, Context c, boolean calledPublicly) {

            if (array.length < 6)
                    return 0;

            SharedPreferences prefs = PreferenceManager
                            .getDefaultSharedPreferences(c);

            int threePairScore = Integer.valueOf(prefs.getString("threePairPref",
                            "750"));

            if (calledPublicly)
                    array = count(array);

            int count = 0;

            if (array[0] >= 2)
                count += array[0] / 2;
            if (array[1] >= 2)
                count += array[1] / 2;
            if (array[2] >= 2)
                count += array[2] / 2;
            if (array[3] >= 2)
                count += array[3] / 2;
            if (array[4] >= 2)
                count += array[4] / 2;
            if (array[5] >= 2)
                count += array[5] / 2;

            if (count == 3)
                    return threePairScore;
            else
                    return 0;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:15:06.627

浏览代码并思考如果它是四种类型会发生什么。

```
 int fourOfAKindStatus = 0;
                if (length == 4)
                        fourOfAKindStatus = isFourOfAKind(newArray, c, length)[0];
                if (fourOfAKindStatus > 0)
                        return fourOfAKindStatus;

                int threeOfAKindStatus = 0;
                if (length == 3)
                        threeOfAKindStatus = isThreeOfAKind(newArray, c, length)[0];
                if (threeOfAKindStatus > 0)
                        return threeOfAKindStatus; 
```

如果结果是 4 个同类，则在检查 3 个同类之前从该方法返回。因此，永远不会执行三类检查。

您可以让 calculate() 返回一个 HashMap 而不是 int，而不是在找到匹配项时立即返回状态，您可以向映射添加一个条目并继续检查，最后返回它。

# scala - scala cloud Foundry mongodb：访问mongodb被拒绝

> ID：13019028
> 
> 赞同：4
> 
> 时间：2012-10-22T20:10:00.017
> 
> 标签：scala, mongodb, cloud-foundry

我已经安装了 eclipse、cloudfoundry 插件、scala 插件、vaadin 插件（用于 web 开发）和 mongodb 库。

我创建了一个这样的类：

```
import vaadin.scala.Application
import vaadin.scala.VerticalLayout
import com.mongodb.casbah.MongoConnection
import com.mongodb.casbah.commons.MongoDBObject
import vaadin.scala.Label
import vaadin.scala.Button

class Launcher extends Application {

   val label=new Label

   override def main = new VerticalLayout() {

      val coll=MongoConnection()("mybd")("somecollection")

      val builder=MongoDBObject.newBuilder
      builder+="foo1" -> "bar"
      var newobj=builder.result()
      coll.save(newobj)

      val mongoColl=MongoConnection()("mybd")("somecollection")

      val withFoo=mongoColl.findOne()

      label.value=withFoo
      add(label)

      //bouton pour faire joli
      add(new Button{
        caption_=("click me!")
      })
   }
} 
```

错误（拒绝访问 mongodb 数据库）来自参数，这是默认参数。你知道如何在 scala 或 java 中设置好的参数吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T19:35:45.323

看起来你在[vcap-dev](https://groups.google.com/a/cloudfoundry.org/d/msg/vcap-dev/bVdoc1-d1oE/b8wMT9poHV4J "vcap-开发")邮件列表上得到了一些帮助

```
package com.example.vaadin_1

import vaadin.scala.Application
import org.cloudfoundry.runtime.env.CloudEnvironment
import org.cloudfoundry.runtime.env.MongoServiceInfo
import com.mongodb.casbah.MongoConnection

class Launcher extends Application {

   val cloudEnvironment = new CloudEnvironment()
   val mongoServices = cloudEnvironment.getServiceInfos(classOf[MongoServiceInfo])
   val mongo = mongoServices.get(0)
   val mongodb = MongoConnection(mongo.getHost(), mongo.getPort())("abc")
   mongodb.authenticate(mongo.getUserName(),mongo.getPassword())           
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:22:24.807

我建议使用[Spring Data for MongoDB](http://www.springsource.org/spring-data/mongodb)来实现，这里有一个 Cloudfoundry 的示例应用程序，特别是[由 Spring 家伙放在一起](https://github.com/SpringSource/cloudfoundry-samples/tree/master/hello-spring-mongodb)。通过[一些 xml 配置](https://github.com/SpringSource/cloudfoundry-samples/blob/master/hello-spring-mongodb/src/main/resources/root-context.xml)，您已经准备好注入类似于熟悉的 Spring xxxTemplate 范例的 mongoTemplate。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T10:10:21.457

部署到 CloudFoundry 时，与连接到服务相关的信息（*即*在您的情况下为 mongo）通过环境变量提供给应用程序`VCAP_SERVICES`。它是一个 json 文档，每个服务有一个条目。您当然可以自己解析它，但您会发现[http://cf-runtime-api.cloudfoundry.com/org/cloudfoundry/runtime/env/CloudEnvironment.html](http://cf-runtime-api.cloudfoundry.com/org/cloudfoundry/runtime/env/CloudEnvironment.html)类很有用。您需要将 org.cloudfoundry/cloudfoundry-runtime/0.8.1 jar 添加到您的项目中。您可以在没有 Spring 的情况下使用它。

查看[http://docs.cloudfoundry.com/services.html](http://docs.cloudfoundry.com/services.html)以了解 VCAP_SERVICES 底层 var

# mysql - 如何为使用 tomcat 连接池的重负载 ajax 应用程序配置 mysql？

> ID：13019038
> 
> 赞同：0
> 
> 时间：2012-10-22T20:10:41.403
> 
> 标签：mysql, ajax, database-connection, innodb

我在 tomcat 服务器 7 上有一个 GWT ajax 应用程序，它使用连接池与其后端 mysql 5 数据库进行交互（我的数据库只包含 InnoDB 表）。
该应用程序非常基于数据库操作，对于每个小操作，它需要从/向数据库获取一些数据或写入数据，调用数据库 SP 和用户定义的函数等等......
该程序将使用每个连接短暂time & 然后将其返回到连接池。在挑选加载时，最大并发连接数可能会增加大约 100-200 个连接。它在开始运行 mysql 服务器时运行良好，但一两个小时后，它变得太慢了，与数据库的失败连接数增加了所有连接的 10% 左右。
我尝试使用 my-large 或 my-huge 默认建议的 mysql 服务器配置，但我认为我需要比这些更多的东西来实现 mysql 服务器的稳定情况。
任何想法 ？

# internationalization - 国际化英语和印度语言

> ID：13019040
> 
> 赞同：1
> 
> 时间：2012-10-22T20:10:47.230
> 
> 标签：internationalization

我正在开发一个主要使用英语的 Java 应用程序，但也希望支持印地语、泰卢固语和古吉拉特语等印度语言。我想知道什么是一个好的策略。

我见过基于拉丁语脚本语言的 I18N 项目，但印地语使用梵文脚本，所以它有点复杂。

有没有人做过类似的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T11:54:37.710

老实说，您提到的脚本和语言在编程中并不是很常见。由于您没有提及它将是桌面应用程序还是 Web 应用程序，因此除了使用最新的 Java（7）和[ICU](http://site.icu-project.org/)（49.1 甚至 50M2）版本之外，很难给您任何建议。
这是因为此版本支持更新版本的 Unicode 标准，它将在此处发挥作用。

顺便提一句。您可能想知道，[Unicode 联盟](http://www.unicode.org/)正在努力为印度文字提供更好的支持。因此，将来使用这种语言开发应用程序会更容易，因为现在你可能会有点挣扎。

# c# - 确保 lambda 表达式指向类的实际属性？

> ID：13019049
> 
> 赞同：2
> 
> 时间：2012-10-22T20:11:37.720
> 
> 标签：c#, reflection, lambda, expression, .net-4.5

有什么办法可以确保我只能传入一个指向类属性的表达式？

```
public class Foo
{
    public string Bar { get; set; }

    public void DoSomething()
    {
        HelperClass.HelperFunc(() => Bar);
    }
}

public static class HelperClass
{
    public static void HelperFunc(Expression<Func<string>> expression)
    {
        // Ensure that the expression points to a property
        // that is a member of the class Foo (or throw exception)
    }
} 
```

另外，如果需要，我可以更改签名以传递实际的课程......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:15:58.810

这是扩展方法，它将 lambda 转换为属性。如果 lambda 不指向属性，则抛出异常

```
public static PropertyInfo ToPropertyInfo(this LambdaExpression expression)
{
    MemberExpression body = expression.Body as MemberExpression;
    if (body != null)
    {
        PropertyInfo member = body.Member as PropertyInfo;
        if (member != null)
        {
            return member;
        }
    }
    throw new ArgumentException("Property not found");
} 
```

# facebook - Facebook API 发送对话框

> ID：13019050
> 
> 赞同：1
> 
> 时间：2012-10-22T20:11:38.697
> 
> 标签：facebook, dialog, send

这是我发送的 javascript 代码：

```
function send(id, description, title) {
        FB.ui({
            app_id: '390841657651335',
            method: 'send',
            description: description,
            link: http://vic.bg/Vits.aspx?vicid=' + id,
            name: title
        }
    } 
```

发送总是好的（我将回调中的响应转储到控制台），但是 recients 得到了该消息

**附件不可用此附件可能已被删除，或者共享它的人可能无权与您共享**

而不是实际的帖子。有人遇到过这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T08:52:23.460

问题在于应用程序沙盒模式的设置：已检查。我不知道为什么在那种情况下他们会显示如此奇怪的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-27T13:32:06.133

那么，“发送对话框”对您有用吗？因为从我所有的研究和阅读所有相关的帖子来看，facebook 目前不允许通过 graph api 向朋友发送私人消息..

我正在通过直接 URL 而不是通过 JS SDK 尝试“发送对话框”。

# jmockit - 相当于 JMockit 中的 never(mock)

> ID：13019052
> 
> 赞同：3
> 
> 时间：2012-10-22T20:11:48.173
> 
> 标签：jmockit

我正在将一些测试用例从 JMock 迁移到 JMockit。到目前为止，这是一段愉快的旅程，但 JMock 有一个我无法在 JMockit（版本 0.999.17）中找到的功能

我想检查是否从未调用过模拟（任何方法）。

使用 JMock，我只需要在 Expectations 块中添加以下内容：

```
never(mock) 
```

JMockit 是否可行？

**编辑：**

我可能已经找到了解决方案，但不是很明确。如果我将这个模拟的任何方法`times =0`放在我的期望块中，那么这个模拟就会变得严格，我相信任何调用的方法都会触发异常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T11:06:00.060

尝试一个空的*完整*验证块，它应该验证在任何给定的模拟上都没有发生调用：

```
@Test
public void someTest(@Mocked SomeType mock)
{
    // Record expectations on other mocked types...

    // Exercise the tested code...

    new FullVerifications(mock) {};
} 
```

# ruby-on-rails - 在 Rails 中手动创建表单字段，rails 在编辑时如何自动填充字段？

> ID：13019054
> 
> 赞同：1
> 
> 时间：2012-10-22T20:11:56.727
> 
> 标签：ruby-on-rails, forms

我正在手动在 Rails 中创建一个表单，即：

`<input type="number" name="funds_application[product_revenues_attributes][1][amount]">`

这在提交数据时工作正常，但是当我编辑记录时，字段不会自动填充。有谁知道rails是如何做到的？我是否需要使用 a`<%= text_field_tag %>`来让它的那部分工作。

这是我使用 Simple_form 的较大表单的一小部分，其余部分按预期工作。我发现复杂的形式有点像在铁轨中融化，它想要什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:20:59.630

你必须用手做吗？你还能使用[表单助手](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html)吗？

不管怎样，Rails 的做法是你总是给表单一个你正在使用的模型的实例，并在它的属性上调用 getter。对于新实例，它们将是空白的。对于已保存的实例，它们将具有值。例如，如果你有一个`User`带有`login`and`name`属性的模型，你可以`@user = User.new`在你的控制器中做，在你的表单中做（使用帮助标签）：

```
<%= text_field_tag "login", @user.login %>
<%= text_field_tag "name", @user.name %> 
```

如果您有一个实际用户 ( `@user = User.first`)，您仍然可以在该视图中使用它。

所以不，您不必使用表单标签，因为基本原则总是给出您正在使用的模型的实例，并决定如果属性为 nil/blank 时使用的默认值。

因此，如果您总是有一个对象要使用，但仍想手动执行，您可以键入：

```
<input type="number" name="funds_application[product_revenues_attributes][1][amount]" value=@my_object.amount> 
```

或者无论该领域到底是什么。这样，它会获得一些默认值，但如果对象已经具有该属性的某些内容，它将输出它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:18:17.887

如果您自己构建表单，则可以使用传入的对象自己填充字段，代码如下：

```
<input type="number" name="funds_application[product_revenues_attributes][1][amount]" value="<%= @model.value %>"> 
```

不过，最狡猾的方法是使用`form_for`构造。这方面的[指南](http://guides.rubyonrails.org/form_helpers.html)非常好。

# windows-7 - Windows XP 注册表转换为 Windows 7 注册表

> ID：13019055
> 
> 赞同：0
> 
> 时间：2012-10-22T20:11:59.370
> 
> 标签：windows-7, windows-xp, registry

我正在整理一个 Windows 7 映像，以访问大约 300 个异地位置。我正在拍摄这些位置拥有的当前 XP 盒子的图像，并且正在逐个测试所有内容，包括让一名程序员将任何 32 位程序转换为 64 位程序。我接下来会出现在注册表上——我几乎知道其中的一些东西。这些系统有 3 个不同的可能用户，每个用户的注册表都会略有不同，具体取决于我们需要锁定的内容 - 即一个用户能够访问网络，而另一个用户的地址被锁定并且只能访问我们放在他们的安全桌面上的链接。

因此，我需要为大约 3 页的 reg 设置（通过批处理脚本 - 并且在我们每个 reg 文件的顶部，我们都有“Windows 注册表编辑器版本 5.00”）查找 Windows 7 等效注册表设置特定用户登录。举个例子，在 XP 中我有：

> [HKEY_CURRENT_USER\Software\Policies\Microsoft\Internet Explorer\Restrictions] "NoPrinting"=dword:00000000

在 Windows 7 中找到其等效项的最佳方法是什么？

任何能指出我正确方向的东西都将不胜感激。

谢谢！

# llvm - 为什么 Apple 在他们的 OpenGL/OpenCL 实现中使用 CLang

> ID：13019063
> 
> 赞同：3
> 
> 时间：2012-10-22T20:12:18.213
> 
> 标签：llvm, clang

我不知道它是否适合问这个问题。但是，为什么 Apple 选择使用OpenCL/OpenGL 的代码`llvm`及其`clang`实现？它给他们带来了什么好处以及如何带来的好处？请原谅我对这个话题的无知，我对此知之甚少。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T19:42:29.233

Apple 创建 Clang 作为 GCC 的替代品，用于 C/C++/ObjC 和 ObjC++。LLVM 的创建者在 Apple 的编译器部门工作。在与主持项目的伊利诺伊大学的共同努力下，Apple 创建了 GCC、GDB [参见 LLDB]、libstdc++ [参见 libc++] 和几个新项目的完整替代品。

GPLv3 是压垮苹果对 GCC 贡献兴趣的最后一根稻草，这也是苹果在 GCC 4.2.x 中结束它的原因。

LLVM/Clang 正在整个行业迅速取代 GCC。

LLVM 现在是一个名称的误称。

LLVM/Clang 中支持的当前目标硬件：

-- 针对 ARM -- 针对 CppBackend -- 针对 Hexagon -- 针对 Mips -- 针对 MBlaze -- 针对 MSP430 -- 针对 NVPTX -- 针对 PowerPC -- 针对 Sparc -- 针对 X86 -- 针对 XCore -- Clang 版本：3.3

很快添加了开箱即用的 AMD R600 代码库。

Clang 符合 C99。OpenCL 使用 C99 的一个子集。Clang 是免费提供的最完整的 C11 兼容编译器套件。

FreeBSD 已移至 LLVM/Clang 作为即将到来的 10.0 发行版的默认设置。

AMD 和 Nvidia 使用 LLVM/Clang 构建他们的 OpenCL 堆栈。

英特尔正在将他们的 OpenCL 和更多内容迁移到 LLVM/Clang。

谷歌全力支持 LLVM/Clang。同样适用于 Adob​​e、Sony、IBM、Cray 等。

GCC 是一团糟的架构。LLVM/Clang 的模块化使其改进速度和开发人员的选择具有更大的上限。

LLVM/Clang 3.2 的开发人员和用户指南现在非常可靠，3.3 主干添加了更多的文档来了解 LLVM/Clang 的好处。

高质量编译器代码的开发速度是首屈一指的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T22:57:01.793

[直接来自 LLVM/Apple 开发人员](http://lists.cs.uiuc.edu/pipermail/llvmdev/2006-August/006492.html)

[更多信息，PDF 幻灯片](http://www.llvm.org/devmtg/2007-05/10-Lattner-OpenGL.pdf)

LLVM 在运行时以两种不同的方式使用：

1.  固定功能顶点处理管道中的运行时代码专业化。基本上，OpenGL 管道有很多参数（是否启用了雾？顶点是否有纹理信息？等），它们很少改变：执行完全分支的代码会淹没分支预测器并且性能很差。为了解决这个问题，代码被预编译为 LLVM .bc 形式，在运行时根据需要对代码进行专门化、优化和 JIT 编译。

2.  OpenGL 顶点着色器是使用一系列编程语言编写的小程序，具有高度特定于领域的特性（例如点积、纹理查找等）。在运行时，OpenGL 堆栈将顶点程序转换为 LLVM 形式，运行 LLVM 优化器通道，然后 JIT 编译代码。

（更多细节在上面的链接中）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:15:05.350

因为它们有助于 Clang/LLVM 的开发，并且因为使用 LLVM/Clang 编译的源代码生成的二进制文件比 GCC 更快......

> Clang 的开发人员声称，与 GCC 等竞争编译器相比，它减少了内存占用并提高了编译速度。为了支持他们的说法，他们提出，截至 2007 年 10 月，Clang 编译 Carbon 库的速度是 GCC 的两倍多，同时使用了大约六分之一的 GCC 内存和磁盘空间。

[http://en.wikipedia.org/wiki/Clang](http://en.wikipedia.org/wiki/Clang)

# java - 简单的错误检查用户输入

> ID：13019067
> 
> 赞同：0
> 
> 时间：2012-10-22T20:12:29.850
> 
> 标签：java, fractions

我无法让我的方法来加、减和除分数。我已经有了乘法部分，我只是在添加时无法获得正确的输出。请帮我弄清楚我做错了什么我是Java新手，我还在学习。这是我到目前为止所得到的。``

```
private int numer;
private int denom;

public Fraction(int num, int den) {
    numer = num;
    denom = den;

simplify();
}
public int findGcd(int a, int b) {
    int temp;
    while (b != 0) {
        temp = b;
        b = a % b;
        a = temp;
    }
    return a;
}

void simplify() {
    int gcd = findGcd(numer, denom);
    numer /= gcd;
    denom /= gcd;
}
public int getNumer() {
    return numer;
}
public int getDenom() {
    return denom;
}

Fraction add(Fraction x) {
    Fraction answer;

    if (x.getDenom() == denom) {
        answer = new Fraction(x.getNumer() + numer, denom);
    } else {
        denom = this.getDenom() * x.getDenom();
        numer = this.getNumer() * x.getDenom() + x.getNumer()
                * this.getDenom();

        return new Fraction(numer, denom);

    }
    return answer;
}

Fraction subtract(Fraction x) {
    Fraction answer;

    if (x.getDenom() == denom) {
        answer = new Fraction(x.getNumer() - numer, denom);
    } else {
        denom = this.getDenom() * x.getDenom();
        numer = this.getNumer() * x.getDenom() - x.getNumer()
                * this.getDenom();
        answer = new Fraction(numer, denom);
    }
    return answer;
}

Fraction mult(Fraction x) {
    Fraction answer;

    denom = this.getDenom() * x.getDenom();
    numer = this.getNumer() * x.getNumer();
    answer = new Fraction(numer, denom);

    return answer;
}

Fraction div(Fraction x) {
    Fraction answer;

    denom = this.getDenom() * x.getNumer();
    numer = this.getNumer() * x.getDenom();
    answer = new Fraction(numer, denom);
    return answer;
} 
```

当我输入 2 个分数时，它会返回一个分数，但这不是正确的答案。我究竟做错了什么？

### 更新

如果我使用小分数，例如 1/2 和 3/4，它仍然会给我错误的答案。对于加法，它打印出 7/2、减法 1/2 和除法 3/1。所以我认为这与成为一个`int`或一个`float`数字没有任何关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:31:44.610

在您的函数中，您将覆盖 numer 和 denom 的值。改变：

```
denom = this.getDenom() * x.getDenom(); 
numer = this.getNumer() * x.getDenom() - x.getNumer() 
            * this.getDenom(); 
answer = new Fraction(numer, denom); 
```

至

```
int newdenom = this.getDenom() * x.getDenom(); 
int newnumer = this.getNumer() * x.getDenom() - x.getNumer() 
            * this.getDenom(); 
answer = new Fraction(newnumer, newdenom); 
```

# iphone - Iphone 到 WCF 服务

> ID：13019070
> 
> 赞同：0
> 
> 时间：2012-10-22T20:12:37.987
> 
> 标签：iphone, objective-c, wcf, web-services

我一直试图让我的 iPhone 应用程序与 WCF 服务通信。我的应用程序成功连接/找到了 Web 服务，但似乎从来没有得到非错误响应。当我使用视觉工作室 wcf 测试仪时，它工作正常。

xml格式：`<mAccess><user></user><pwd></pwd></mAccess>`

我的头部/身体结构有问题吗？

```
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:[NSURL URLWithString:website]];
[request setHTTPMethod:@"POST"];
[request setValue:@"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-type"];

NSString *soapMessage = [[NSString alloc] initWithFormat:@"<SOAP-ENV:Envelope
xmlns:SOAP-ENV=\"http://schemas.xmlsoap.org/soap/envelope/\"><SOAP-ENV:Body>
<MobileAccess xmlns=\"http://tempuri.org/\"><mAccess><user>user</user><pwd>pwd</pwd><custID>0</custID></mAccess>
</MobileAccess></SOAP-ENV:Body></SOAP-ENV:Envelope>"];

[request setValue:[NSString stringWithFormat:@"%d",[soapMessage length]] forHTTPHeaderField:@"Content-length"];
[request addValue:@"http://tempuri.org/IProviderDataService/MobileAccess" forHTTPHeaderField:@"Soapaction"];

[request setHTTPBody:[soapMessage dataUsingEncoding:NSUTF8StringEncoding]]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:08:06.913

在构建 URL 请求时存在一个潜在错误：“Content-Length”必须设置为 HTTP 正文的长度。`[soapMessage length]`如果将消息中的非 ASCII 字符转换为 UTF-8，这可能会有所不同。

所以你应该使用转换后的数据长度：

```
NSData *bodyData = [soapMessage dataUsingEncoding:NSUTF8StringEncoding];
[request setValue:[NSString stringWithFormat:@"%d",[bodyData length]] forHTTPHeaderField:@"Content-length"];
[request setHTTPBody:bodyData]; 
```

# android - 在 LinearLayout 扩展类中画一条线

> ID：13019071
> 
> 赞同：2
> 
> 时间：2012-10-22T20:12:40.193
> 
> 标签：android, android-layout, android-canvas

我有这门课： 我的问题：

```
public class Example extends Activity implements OnClickListener{
    DrawView view1;
    Canvas canvas = new Canvas();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);   
        view1 = new DrawView(this);
        setContentView(view1);
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
    int x = (int) event.getX();
    int y = (int) event.getY();

    switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            view1.setFirstCoord(x, y);
            break;
        case MotionEvent.ACTION_MOVE:
            break;
        case MotionEvent.ACTION_UP:
            view1.setSecondCoord(x, y);
            view1.dispatchDraw(canvas);
            break;
        }
    return true;
    }

    public class DrawView extends LinearLayout {
        private Paint paint = new Paint();
        public int x1, x2;
        public int y1, y2;

        public DrawView(Context c){
            super(c);           
            LayoutInflater inflater = (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            addView(inflater.inflate(R.layout.union, null));

            x1 = 0;
            x2 = 0;
            y1 = 0;
            y2 = 0;

            paint.setColor(Color.BLACK);
            paint.setAntiAlias(true);
            paint.setDither(true);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeWidth(10);        
        }

        @Override
        public void dispatchDraw(Canvas canvas) {
            super.dispatchDraw(canvas);
            canvas.drawLine(0, 50, 900,2000 , paint);//WORKS
            canvas.drawLine((int) x1, (int) y1,(int) x2,(int) y2, paint);//NO WORKS
        }

        public void setFirstCoord(int e, int f){
            x1 = e;
            y1 = f;
        }

        public void setSecondCoord(int e, int f){
            x2 = e;
            y2 = f;
        }
    }
} 
```

执行下一行时，我在屏幕上看到“示例”行：

```
canvas.drawLine(0, 50, 900,2000 , paint); 
```

但是当下面的行“被执行”时没有画出任何直线。为什么？？？

```
canvas.drawLine((int) x1, (int) y1,(int) x2,(int) y2, paint); 
```

我也尝试过：

```
canvas.drawLine(x1, y1, x2, y2, paint); 
```

但是，显然，结果是一样的。

我也尝试过执行 onDraw() 方法，但任何线都被绘制，因为 onDraw 在“UI”下绘制（在布局 .xml 文件的内容下）

我希望找到可以帮助我的人。我认为解决方案很容易，但我会在没有找到解决方案的情况下疯狂尝试。

谢谢！！！

解决方案：

```
public class Example extends Activity implements OnClickListener{
    DrawView view1;
    Canvas canvas = new Canvas();

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);   
        view1 = new DrawView(this);
        setContentView(view1);
        view1.setOnClickListener(this);
    }

    public class DrawView extends LinearLayout {
        private Paint paint = new Paint();
        public int x1, x2;
        public int y1, y2;

        public DrawView(Context c){
            super(c);           
            LayoutInflater inflater = (LayoutInflater) c.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            addView(inflater.inflate(R.layout.union, null));

            x1 = 0;
            x2 = 0;
            y1 = 0;
            y2 = 0;

            paint.setColor(Color.BLACK);
            paint.setAntiAlias(true);
            paint.setDither(true);
            paint.setStyle(Paint.Style.STROKE);
            paint.setStrokeJoin(Paint.Join.ROUND);
            paint.setStrokeWidth(10);        
        }

        public boolean onTouchEvent(MotionEvent event) {
        int x = (int) event.getX();
        int y = (int) event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            view1.setFirstCoord(x, y);
            break;
        case MotionEvent.ACTION_MOVE:
            break;
        case MotionEvent.ACTION_UP:
            view1.setSecondCoord(x, y);
            view1.onDraw(canvas);
            view1.postInvalidate();
            break;
        }
        return true;
        }

        public void setFirstCoord(int e, int f){
            x1 = e;
            y1 = f;
        }

        public void setSecondCoord(int e, int f){
            x2 = e;
            y2 = f;
        }

        public void onDraw(Canvas canvas){
        canvas.drawLine((int) x1, (int) y1,(int) x2,(int) y2, paint);
    }
    }
} 
```

再次感谢您的帮助和关注。我的荣幸！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:19:13.547

如果要为此使用 OnClickListener 接口，则需要将活动设置`OnClickListener`为视图：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);   
    view1 = new DrawView(this);
    setContentView(view1);

    // Add this:
    view1.setOnClickListener(this);
} 
```

否则，`onTouchEvent`永远不会被调用。

另外，`onTouchEvent`应该命名为`onClick`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:21:46.780

不要将您的绘图代码放在 dispatch draw 中，而是尝试将其放在 onDraw 中。

然后修改你的 onTouch 方法，如下所示：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
  int x = (int) event.getX();
  int y = (int) event.getY();
  switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
    view1.setFirstCoord(x, y);
    break;
    case MotionEvent.ACTION_MOVE:
    break;
    case MotionEvent.ACTION_UP:
    view1.setSecondCoord(x, y);
    view1.postInvalidate();
    break;
  }
   return true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:26:01.723

*   将 OnTouchEvent 移动到 DrawView，而不是活动
*   使 DrawView 扩展 View，而不是 LinearLayout
*   代替 dispatchDraw，实现方法 onDraw 并在 onTouchEvent 中调用 invalidate()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:26:40.020

我认为您的问题可能是您在活动中检索的 x/y 坐标在屏幕空间中，而您在画布上的绘制坐标在画布空间中。

因此，您活动中的 (0,0) 与画布的 (0,0) 位置不同。

您可能应该在视图中而不是在活动中接收触摸事件，然后触摸事件和画布绘制的坐标系将相同。

# jquery - 使用 Ajax，如何跨域触发和遗忘

> ID：13019076
> 
> 赞同：10
> 
> 时间：2012-10-22T20:12:54.063
> 
> 标签：jquery, ajax, cross-domain

我想对 Web 服务进行一次即发即弃的 jQuery 调用。

基本上，我想发送一个 JSON 对象到`http://myservice.com/uservisits/create`并且**我不在乎接收任何类型的返回响应**。但是，我们希望对我们的几个域使用相同的服务，这意味着要面对与 Ajax 相关的跨域限制。

你怎么做到这一点？JSONP 之类的有很多，但我不需要处理响应。我觉得我错过了一个明显的细节。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T20:23:39.263

发送 http GET 请求的最简单方法是使用图像信标：

```
var json = encodeURIComponent(JSON.stringify(obj));
new Image().src = "http://myservice.com/uservisits/create?JSON=" + json; 
```

`load`而且，您甚至可以通过处理和`error`事件来获取一些信息。当然，如果响应不是图像，`error`则将调用事件，而不是`load`. 您可以将服务设置为返回单像素图像来解决这个问题。

**编辑：**您[提到](https://stackoverflow.com/questions/13019076/using-ajax-how-do-you-fire-and-forget-across-domains#comment17670028_13019147)您可能更喜欢使用 HTTP POST。它不像图像信标那么简单，但您可以使用隐藏的 iframe 进行跨域发布：

```
var frame = $("<iframe>").hide();
frame.load(function() {
    var frameBody = frame.contents().find("body");
    var form = $("<form>", {
        action: "http://myservice.com/uservisits/create",
        method: "POST"
    });
    form.appendTo(frameBody);
    $("<input/>", {
        name: "json",
        value: json
    }).appendTo(form);
    form[0].submit();
});
frame.appendTo("body"); 
```

我*认为*jQuery 已经内置了类似的东西。您可以尝试挖掘[`jQuery.ajax`](http://api.jquery.com/jquery.ajax)文档。如果没有，您可能会找到一个可以做到这一点的插件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:17:59.833

您没有处理响应这一事实不会影响您面临的相同来源策略问题。但是，您将控制服务的所有消费者这一事实开启了使用[CORS](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)的可能性。但是，并非所有浏览器都支持 CORS。[请参阅浏览器兼容性图表。](http://caniuse.com/cors)如果您需要支持其他浏览器，您仍然必须使用 JSONP。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:17:43.937

您不想要任何数据的事实实际上是无关紧要的，您仍然面临相同的跨域问题。有两种方法可以去...

1）您可以使用 jsonp（它实际上发出一个 get 请求）来发送数据，尽管这感觉有点混乱，因为您应该尝试使用 http 动词来表达他们的意图（即 GET 应该检索数据）。

2）您可以使用ARR（IIS中的应用程序请求路由）来基本重写请求。因此，您将为每个域设置一个规则以具有重写规则，例如 www.mydomain.com/webcall 路由到[http://myservice.com/uservisits/create](http://myservice.com/uservisits/create)其中 mydomain.com 是启动 ajax 调用的域。如果您这样做，那么您可以以正常方式使用 ajax，因为就浏览器而言，您现在正在同一个域上发出请求

# objective-c - AudioFileReadBytes 和 iPod 资产

> ID：13019081
> 
> 赞同：0
> 
> 时间：2012-10-22T20:13:05.063
> 
> 标签：objective-c, ios, media-player, core-audio, ipod

我一直在使用 MediaPlayer 框架、AVFoundation 和 Core Audio 从 iPod 库音频资产中访问原始示例音频数据。我知道的 iPod 库 URL 只能从 iOS 中的音频 API 访问，我一直在使用可从 AVAssetTrack (copyNextBuffer) 访问的 CMSampleBufferRef。现在我需要通过随机访问来访问音频数据并且已经碰壁了。

我希望能够使用字节偏移量、AudioFileReadBytes 或类似的东西访问音频数据。尝试将其用于 iPod 曲目时，AudioFileReadBytes 返回 -4 (unimpErr)。使用字节偏移进行随机访问真的可行吗？是否有另一种使用定时偏移量随机访问音频数据的方法（打开资产时可能使用 AVURLAssetPreferPreciseDurationAndTimingKey），并将字节偏移量转换为定时偏移量？

# css - CSS 的 TOC 生成器 - 评论和文档相关问题

> ID：13019085
> 
> 赞同：1
> 
> 时间：2012-10-22T20:13:23.523
> 
> 标签：css, documentation, comments, sections

我想改进我的 CSS 内联注释和文档。

我正在寻找一个可以吃 CSS 输入的生成器，例如：

```
/* @section 1.0 Foobar *

.foobar {
     color: #fff; }

/* @section 1.1 Hello *

... css definitions ...

/* Another sub comment *

... css definition ...

/* @section 1.2 Woop * 
```

输出部分概述，如：

```
 1.0 Foobar

     1.1 Hello

        1.1.1 Another sub comment

     1.2 Woop 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:17:52.497

我不知道这是否涵盖了您要查找的内容，但请尝试此[http://csscomb.com/](http://csscomb.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T00:21:45.940

我写了一个小小的 Grunt 插件，它正在做我正在寻找的东西：

[https://github.com/redaxmedia/grunt-tocgen](https://github.com/redaxmedia/grunt-tocgen)

# mysql - 如何使用 concat 和 UPPER 在 sql 查询中搜索多个列

> ID：13019086
> 
> 赞同：2
> 
> 时间：2012-10-22T20:13:32.167
> 
> 标签：mysql, sql, database

所以我有一个数据库和一个网页，我想在其中显示我的数据库搜索结果

我尝试了几种方法都可以工作，但它们对于我想要完成的事情是不完整的

我希望能够使用我的搜索文本中的一个或多个单词来搜索我的表格列 id、Id_Nombre、Pais、Estado、Ciudad、website。

此代码有效，但我必须准确输入区分大小写的单词：

```
$query = "SELECT * FROM Medios_table WHERE concat(id,Id_Nombre,Pais,Estado,Ciudad,website) LIKE '%$Busqueda%'"; 
```

所以结果我在我的搜索框中输入了一个像“人”这样的词，在我的数据库中，这个词在任何这些列中输入为“人”，它不会找到它。

我使用的第二个代码有效，但只使用一列

```
$query = "SELECT * FROM Medios_table WHERE UPPER(Id_Nombre) LIKE UPPER('%$Busqueda%')"; 
```

这段代码的结果很好，因为无论使用哪种情况，它都会找到它，但我需要将这种类型的搜索扩展到所有其他列，但到目前为止我使用的所有内容都不起作用。

我试过了：

```
 $query = "SELECT * FROM Medios_table WHERE UPPER(id,Id_Nombre,Pais,Estado,Ciudad,website) LIKE UPPER('%$Busqueda%')";

  $query = "SELECT * FROM Medios_table WHERE UPPER(concat(id,Id_Nombre,Pais,Estado,Ciudad,website)) LIKE UPPER('%$Busqueda%')";

  $query = "SELECT * FROM Medios_table WHERE concat(UPPER(id,Id_Nombre,Pais,Estado,Ciudad,website)) LIKE UPPER('%$Busqueda%')"; 
```

等任何帮助都非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:19:24.310

您是否尝试`UPPER`过每个列名？像这样：

```
$query = "SELECT * FROM Medios_table WHERE concat(UPPER(id),UPPER(Id_Nombre),UPPER(Pais),UPPER(Estado),UPPER(Ciudad),UPPER(website)) LIKE UPPER('%$Busqueda%')"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:23:16.640

您的 upper(concat(...)) 版本应该可以工作。如果您对此有疑问，则可能只是一个错字，例如您遗漏了括号之类的东西。

你不能说 upper(x,y,z) 因为 upper 只接受一个参数。你必须先做concat，然后做upper，即upper(concat(x,y,z))。

也就是说，这个查询在大型数据库上会非常慢，因为 db 引擎必须读取表中的每条记录，然后逐个字符地搜索每条记录。如果桌子很小或者不经常这样做，那可能是可以接受的。如果表很大并且/或者这个查询会经常被执行，你真的需要一个完全不同的方法。

*更新*

如果您确实需要搜索字段中的任何文本，而您无法对正在搜索的文本或正在搜索的文本做出任何假设，那么您应该研究全文搜索。[http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html](http://dev.mysql.com/doc/refman/5.0/en/fulltext-natural-language.html)

如果您将一直进行此类搜索，您可能想要构建一个字典，即构建一个包含该单词出现的所有记录的所有单词的列表。我认为这基本上就是全文所做的，所以这可能会或可能不会为您带来任何好处。

但是，如果您有一些先见之明，也就是说，如果您不是真的要搜索出现在任意文本中的任意文本，则可以将要搜索的内容分解到单独的字段中。

举个简单的例子，假设您有一个包含客户全名的字段，例如“Fred Smith”、“Mary Jones”等。您想按姓氏搜索某人。你可以搜索

```
where full_name like '%Smith%' 
```

但这需要读取表中的每条记录。相反，如果您将该字段分为名字和姓氏，那么您可以搜索

```
where last_name='Smith' 
```

如果您在 last_name 上有一个索引，这将是一个非常快速的搜索。

如果您只是想在多个字段中的任何一个中查找输入的值，这样做会快得多

```
where estado='Toledo' or ciudad='Toledo' or pais='Toledo' 
```

（假设您在 estado、ciudad 和 pais 上有索引），那么

```
where concat(estado, ciudad, pais) like '%Toledo%' 
```

（没有索引会对你有任何好处）。

如果要进行不区分大小写的搜索，请在 upper(estado) 而不是 estado 等上创建索引。然后“where upper(estado)='TOLEDO'”可以使用该索引。

另外，我不确定 MySql，但如果 LIKE 不以通配符开头，某些数据库引擎可以使用索引。也就是说，“somefield like '%x%'”必须读取表中的每条记录。但是在某些数据库上，“像'x％'这样的某个字段”可以使用can索引来获取字段以“x”开头的记录，然后处理这些记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:19:02.080

您需要全文搜索

这个链接可能有用[Mysql全文搜索](http://devzone.zend.com/26/using-mysql-full-text-searching/)

# machine-learning - 训练算法以获得更好的图像识别

> ID：13019091
> 
> 赞同：2
> 
> 时间：2012-10-22T20:14:08.547
> 
> 标签：machine-learning, image-recognition

这是一个研究问题，而不是直接的编程问题。

我正在研究一种符号识别算法，该软件目前所做的是，它拍摄一张图像，将其划分为轮廓（斑点）并开始将每个轮廓与预定义模板列表进行匹配。然后对于每个轮廓，它采用具有最高匹配率的轮廓。

该算法做得很好，但是我需要更好地训练它。我的意思是：我想使用一种机器学习算法来训练算法以获得更好的匹配。所以让我们举个例子：

我在一个符号上运行识别，算法将运行并发现这个符号是一辆车，然后我必须确认结果（可能通过单击“是”或“否”）算法应该从中学习。因此，如果我单击“否”，算法应该知道这不是一辆车，并且下次会有更好的结果（也许尝试匹配其他东西）。而如果我点击“是”，他会知道他是正确的，并且下次他在寻找汽车时会表现得更好。

这是我正在尝试研究的概念。我需要可以实现这类事情的文档或算法。我不是在寻找实现或编程，只是概念或研究。

我做了很多研究，阅读了很多关于机器学习、神经网络、决策树的文章……但我不知道如何在我的场景中使用任何东西。

我希望我很清楚，并且在堆栈溢出时允许此类问题。如果不是，我很抱歉

非常感谢任何帮助或提示

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:55:29.193

图像识别在社区中仍然是一个挑战。您在手动单击是/否的过程中描述的只是创建标记数据。由于这是一个非常广泛的领域，我将只为您指出一些可能有用的链接。

*   首先，您可能希望使用一些现有的图像数据库而不是创建自己的图像数据库，这样可以节省大量精力。例如，[UCIC image db](http://cogcomp.cs.illinois.edu/Data/Car/)中的这个汽车数据集。

*   由于您已经具备机器学习的背景，您可以查看一些与您的项目兴趣完全匹配的调查论文，例如搜索`object recognition survey paper`或`feature extraction car`在 google 中。

*   然后你可以深入研究一些好的论文，看看它们是否适合你的项目。例如，您可以查看以下与 UCIC 图像数据库链接的两篇论文。

    *   Shivani Agarwal、Aatif Awan 和 Dan Roth，学习通过基于部分的稀疏表示来检测图像中的对象。IEEE Transactions on Pattern Analysis and Machine Intelligence, 26(11):1475-1490, 2004。
    *   Shivani Agarwal 和 Dan Roth，学习对象检测的稀疏表示。在第七届欧洲计算机视觉会议论文集，第四部分，第 113-130 页，哥本哈根，丹麦，2002 年。
*   还要检查一些已实施的软件，而不是从头开始，在你的情况下，[opencv](http://opencv.org/)应该是一个很好的开始。

*   对于图像识别，特征提取是最重要的步骤之一。您可能想查看社区中一些最新的算法。（SIFT、均值偏移、harr 特征等）。

*   当您到达分类步骤时，提升算法也可能很有用。我看到很多学者在图像识别社区中提到了这一点。

*   正如@nickbar 建议的那样，在[https://stats.stackexchange.com/上讨论更多信息](https://stats.stackexchange.com/)

# javascript - 如何在 Internet Explorer(IE) 中知道 cookie 的过期时间

> ID：13019093
> 
> 赞同：2
> 
> 时间：2012-10-22T20:14:15.997
> 
> 标签：javascript, internet-explorer, cookies

我知道它不可能从 document.cookie 中读取过期值。它可以从那里的选项/设置中轻松读取 Firefox 和 Chrome 中的值。但是旧版本的 IE（6 和 7）不提供这样的接口读取过期值（我不确定最新版本）。

那么，我如何知道 IE 中的 cookie 何时到期。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:25:21.287

你不能，至少不能通过javascript。

但是你为什么需要呢？您可以再次设置它，在这种情况下，到期时间将被重置。

# ruby-on-rails - Pengwynn LinkedIn Gem : 如何关注公司

> ID：13019106
> 
> 赞同：3
> 
> 时间：2012-10-22T20:15:09.700
> 
> 标签：ruby-on-rails, linkedin

我在我的 rails 项目中使用 pengwynn linkedIn gem。给定公司 ID，我如何关注公司。我已经编写了以下代码，但它不起作用。

```
client = LinkedIn::Client.new('consumer_key', 'consumer_secret')

rtoken = client.request_token.token

rsecret = client.request_token.secret

client.request_token.authorize_url
=> "https://api.linkedin.com/uas/oauth/authorize?oauth_token=<generated_token>"

client.authorize_from_request(rtoken, rsecret, pin)

client.company(:id => <company_id>).follow 
```

知道为什么它不起作用或任何其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T09:12:21.360

如果您使用的是linkedin gem 0.3.x，它没有跟踪公司的方法。它可以添加到 2-0-stable 分支中。

然后我有同样的任务，我只是 fork gem 并将`follow_company`方法添加到`/lib/linked_in/api/update_methods.rb`

```
def follow_company(company_id)
  path = "/people/~/following/companies"
  post(path, {id: company_id}.to_json ,"Content-Type" => "application/json")
end 
```

# c++ - 局部变量的 C++ 动态内存分配

> ID：13019111
> 
> 赞同：3
> 
> 时间：2012-10-22T20:15:51.433
> 
> 标签：c++, memory, dynamic, allocation

我在学校上过计算机科学课，我们的老师在谈论动态内存分配以及为什么

```
cin>>size;
int array[size]; // According to him this should result in a compiler error 
```

这**不应该**工作，而是我们应该使用：

```
int *p, size;
cin>>size;
p = new int[size]
...
delete[] p; 
```

我的问题是，如果您不能像这样声明动态数组，为什么第一个示例有效？

**更新：**所有测试都是在*GNU GCC 编译器*中进行的，上面的代码在*main*函数中

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T20:16:41.500

您正在使用支持可变长度数组的非标准编译器。你的教授是对的，`int array[size]`不应该编译。

你的教授也是~~错误的~~告诉你使用`p = new int[size]`. 他应该做的是告诉你使用`std::vector<int> p(size)`. （好吧，出于教育目的，这没关系）:)

# symfony - Symfony2 - 如何在隐藏表单输入中传递实体

> ID：13019113
> 
> 赞同：2
> 
> 时间：2012-10-22T20:15:55.927
> 
> 标签：symfony, doctrine

> **可能重复：**
> [在表单的隐藏字段中传递值](https://stackoverflow.com/questions/12939186/pass-a-value-in-a-hidden-field-in-a-form)

我知道我想通过隐藏表单输入传递的实体的 ID。在`newAction`我有 ID，或者我可以从存储库中获取对象。

实体：

```
/**
 * @var object $target
 *
 * @ORM\ManyToOne(targetEntity="Acme\TestBundle\Entity\Target")
 * @ORM\JoinColumn(name="target_id", referencedColumnName="id", nullable=false)
 */
private $target; 
```

表格类型：

```
->add('target', 'hidden', array('property_path' => 'target.id')) 
```

在`newAction`我做：

```
$target = $em->...->find($id);
$entity->setTarget($target); 
```

但是当我坚持我得到错误：

```
Warning: spl_object_hash() expects parameter 1 to be object, string given(...) 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:23:29.413

您无需传递隐藏的 ID 变量来创建关系。

如果您需要配置默认值，您应该在将实体传递给表单之前对其执行此操作。

```
$target = $em->...->find($id);

$entity = new MyEntity;
$entity->setTarget($target);

$this->createForm(new MyFormType(), $entity); 
```

然后您的表单将永远不需要担心目标，如果您选择创建它，它已经设置在您的新实体上。

# jquery - 图库以显示最新图像和后退/前进按钮以滚动浏览旧图像。jQuery？

> ID：13019119
> 
> 赞同：0
> 
> 时间：2012-10-22T20:16:09.663
> 
> 标签：jquery, image, gallery

我之前问了一个问题，但我认为我需要一个不同的 PHP 解决方案。

我想显示我最新的气象摄像头图像，但可以回滚一整天的图像。

我想要实现的一个例子是这里：

[http://www.ocean-sports.co.uk/ourwebcam/](http://www.ocean-sports.co.uk/ourwebcam/)

有人可以建议一个能给我这种能力的脚本吗？我到处寻找，但找不到一个好的起点。

一如既往地感谢。

我应该解释一下图像每 2 分钟以 jpg 格式上传到我的服务器空间上的一个文件夹。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:20:23.150

有无穷无尽的 jQuery 图片库插件。只需选择一个你喜欢的并使用它。然后只需将图像写入按创建日期排序的页面。

# sql-server-2008 - SQL Server 2008 查询以提取最大帐户打开日期

> ID：13019120
> 
> 赞同：0
> 
> 时间：2012-10-22T20:16:09.577
> 
> 标签：sql-server-2008

我有下表，
我想找到最大值（account_opened_date），如果存在空日期，我必须显示空值。

**场景1**

**表格1**

```
CLIENTID            ACCOUNTID           ACCOUNT_OPENED_DATE
11562               3880                07/05/2012
11562               3884                08/05/2012
11562               3885                09/06/2012
11562               3886                10/06/2012
11562               3881                NULL
11562               3882                NULL 
```

结果如下。

```
CLIENTID            ACCOUNTID           ACCOUNT_OPENED_DATE  
11562               3882                NULL 
```

在上述情况下，我必须取空值，因为开户日期中存在空值

**情景2**

**表格1**

```
CLIENTID            ACCOUNTID           ACCOUNT_OPENED_DATE  
11563               3880                07/05/2012
11563               3884                08/05/2012
11563               3885                09/06/2012
11563               3886                10/06/2012
11563               3881                11/10/2011
11563               3882                10/22/2012 
```

结果如下。

```
CLIENTID            ACCOUNTID           ACCOUNT_OPENED_DATE
11563               3882                10/22/2012 
```

在上述情况下，我必须选择 2012 年 10 月 22 日，因为在开户日期中不存在空值，
请帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:19:32.180

您可以选择`TOP 1`获取一条记录并`ORDER BY CASE`满足您的“null-first”要求：

```
SELECT TOP 1 CLIENTID, ACCOUNTID, ACCOUNT_OPENED_DATE
FROM dbo.Table
ORDER BY CASE WHEN ACCOUNT_OPENED_DATE IS NULL THEN 0 ELSE 1 END ASC
  , ACCOUNT_OPENED_DATE DESC
  , ACCOUNTID DESC 
```

*   场景 1 小提琴：[http ://sqlfiddle.com/#!3/b7906/1/0](http://sqlfiddle.com/#!3/b7906/1/0)
*   场景 2 小提琴：[http ://sqlfiddle.com/#!3/752db/1/0](http://sqlfiddle.com/#!3/752db/1/0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:28:20.647

试试这个

```
SELECT * FROM (
SELECT CLIENTID, ACCOUNTID, ACCOUNT_OPENED_DATE, 
ROW_NUMBER() OVER (partition by clientid 
             ORDER BY CASE WHEN ACCOUNT_OPENED_DATE IS NULL THEN '12/31/9999' 
                      ELSE ACCOUNT_OPENED_DATE END DESC) opened_date_rank
FROM dbo.Table1
) v WHERE opened_date_rank = 1 
```

例子：

```
declare @table table (clientid int, accountid int, opened_date date)
insert into @table 
select 11562, 3880, '07/05/2012' UNION ALL
select 11562,3884, '08/05/2012' UNION ALL
select 11562,3882, null UNION ALL
select 11563,3880, '07/05/2012' UNION ALL
select 11563,3884, '08/05/2012' UNION ALL
select 11563,3882,'10/22/2012'

SELECT * FROM (
SELECT clientid, accountid, opened_date, 
row_number() over (partition by clientid 
             ORDER BY CASE WHEN opened_date IS NULL THEN '12/31/9999' 
                      ELSE opened_date END DESC) opened_date_rank
FROM @table
) v where opened_date_rank = 1 
```

# django - 尝试配置 apache 和 django 时出错

> ID：13019122
> 
> 赞同：0
> 
> 时间：2012-10-22T20:16:11.210
> 
> 标签：django, apache

我正在尝试在 Windows 7 上使用 mod_wsgi 在 apache 2.2 上安装 django 1.3 应用程序。我在 httpd.conf 中添加了以下几行

```
Listen 8080
...

LoadModule wsgi_module modules/mod_wsgi.so

Alias /static/ "C:/Users/.../my_app/my_app/static/"

<Directory "C:/Users/.../my_app/my_app/static">
  Order deny,allow
  Allow from all
<Directory>

WSGIScriptAlias / "C:/Users/.../my_app/my_app/wsgi.py"
WSGIPythonPath "C:/Users/.../my_app/"

<Directory "C:/Users/.../my_app/my_app">
  <Files wsgi.py>
    Order allow,deny
    Allow from all
  <Files>
<Directory> 
```

wsgi.py

```
import os
import sys

os.environ.setdefault('DJANGO_SETTINGS_MODULE', 'my_app.settings')

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandlers()

path = 'C:/Users/.../my_app/my_app'
if path not in sys.path:
    sys.path.append(path) 
```

该文件与和`wsgi.py`位于同一文件夹中`settings.py``urls.py`

当我去`localhost:8080`它说： **未找到**请求的URL /在此服务器上找不到

注意：我对 apache 完全陌生，我不知道我缺少什么，一些文档显示了一种配置它的方法，而另一些则显示了一种完全不同的方法来做同样的事情。

关于此配置有什么问题的任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:47:48.710

由于您使用的是 Windows 7，我的第一个猜测是权限。“用户”文件夹之外的任何内容都会出现奇怪的权限问题。当我在 Windows 上本地开发任何东西时，我总是将项目放在根文件夹中，例如“C:/projects/django/my_project/”。此外，请确保查看 Windows 防火墙设置（如果有的话，为了调试，暂时禁用 Windows 防火墙，或者最好添加防火墙规则）：

[http://www.howtogeek.com/112564/how-to-create-advanced-firewall-rules-in-the-windows-firewall/](http://www.howtogeek.com/112564/how-to-create-advanced-firewall-rules-in-the-windows-firewall/)

老实说，我在 Windows 上遇到的一半问题是确保项目和开发设置在核心结构之外。不要将服务安装到“C:/Program Files”或在“C:/Users”中创建项目文件夹。

# ms-access - 仅以连续形式更改控制源选择的组合框

> ID：13019124
> 
> 赞同：2
> 
> 时间：2012-10-22T20:16:18.077
> 
> 标签：ms-access, ms-access-2010

如您在此处看到的，用户可以选择合同或提案

![在此处输入图像描述](../Images/782e6e1210e58c10afeb5c1db49bf2cf.png)

如果是提案或合同，参考控制源是不同的。

所以在类型组合框类型的更新后，我这样做

```
Private Sub cbType_AfterUpdate()
    If ([ReferenceType] = "Proposal") Then
        cbReference.ControlSource = "[ProposalNo]"
        cbReference.RowSource = "SELECT ProposalNo FROM Proposals WHERE ProposalNo is not null"
    ElseIf ([ReferenceType] = "Contract") Then
        cbReference.ControlSource = "[ContractNo]"
        cbReference.RowSource = "SELECT ContractNo FROM Proposals WHERE ContractNo is not null"
    End If
End Sub 
```

问题是它改变了所有行的控制源。

有没有办法只为选定的行更改它？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:24:32.907

不，那里没有。您可以将连续表单视为显示其他行的单个表单。对未绑定控件的任何操作都会影响所有行。有一些可能适合的解决方法。例如，您可以显示参考的文本框和“更改参考”组合。这将避免混淆用户，因为绑定的文本框不会更新。您可以使用条件格式设置更改组合的各种属性，以使其更漂亮。或者，您可以使用两个子表单或弹出表单来编辑数据。

# graphite - Graphite 在长时间使用时无法正确绘制数值？

> ID：13019126
> 
> 赞同：8
> 
> 时间：2012-10-22T20:16:24.007
> 
> 标签：graphite

我正在尝试使用 statsd 和石墨绘制数据。我有一个简单的计数器，我将它增加 1，然后当我绘制一天中计数器的值时，我看到奇怪的值，如 0.09 作为我的图表中的峰值（参见[http://i.stack.imgur. com/o4gmz.png](http://i.stack.imgur.com/o4gmz.png) )

该图应该显示 2 个登录，但它显示的是 0.09。如果我将时间刻度从 1 天更改为最后 15 分钟，那么它会正确显示两次登录（请参阅[http://i.stack.imgur.com/23vDJ.png](http://i.stack.imgur.com/23vDJ.png)）

我在 storage-schemas.conf 中设置了我最好的保留时间，以 10 秒为增量：

```
retentions = 10s:7d,1m:21d,24h:5y 
```

我已经设置了 storage-aggregation.conf 文件来汇总计数：

```
[sum]
pattern = \.count$
xFilesFactor = 0
aggregationMethod = sum 
```

（而且，在你问之前，是的；这是一个 .count）。

如果我尝试使用我的 URL，`&rawData=true`那么在任何一种情况下，我都会看到一些`None`s、一些`0.0`s 和一对`1.0`由一些 s 分隔的`0.0`s。我从来没有看到这些以某种方式出现在图表上的小数值。所以......这是一个错误吗？难道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-01-09T11:11:40.353

还有一个**consolidateBy**函数，它告诉石墨如果没有足够的像素来准确地绘制所有内容，该怎么做。默认情况下，它使用“avg”函数，因此当时间范围较大时会出现奇怪的结果。[这里](http://graphite.readthedocs.org/en/latest/functions.html#graphite.render.functions.consolidateBy)摘自文档：

> 当绘制图形时，图形大小的宽度（以像素为单位）小于要绘制的数据点的数量，Graphite 会合并这些值以防止线重叠。consolidateBy() 函数将合并函数从默认的“average”更改为“sum”、“max”或“min”之一。这在销售图表中特别有用，其中分数值没有意义，合并值的“总和”是合适的。

另一个可能有用的函数是**hitcount**。[这里](http://graphite.readthedocs.org/en/latest/functions.html#graphite.render.functions.hitcount)的简短摘录为什么它有用：

> 这个函数类似于summarize()，除了它自动补偿不同的时间尺度（因此使用细粒度或粗粒度记录产生类似的图形）并优雅地处理很少发生的事件。

我花了一些时间挠头，为什么当我的聚合规则为最大值时，我的计数器的时间范围超过几个小时。这很令人困惑，尤其是在您开始使用单个计数器以查看是否一切正常时。检查 rawData 是调试完整性检查的好方法；）

# c# - 使用 RijndaelManaged 时出现 CryptographicException

> ID：13019127
> 
> 赞同：2
> 
> 时间：2012-10-22T20:16:34.623
> 
> 标签：c#, encryption, aes

我正在尝试使用 .NET 中的 RijndaelManaged 类加密一串文本。但是，我不断收到 CryptographicException（“要解密的数据长度无效”）。这条消息并不完全有帮助，特别是因为它发生在我尝试加密数据而不是解密时。下面是代码。

```
public static string EncryptKMSToken(string valueToEncrypt, string encryptionKey)
{
  string results = string.Empty;

  using (RijndaelManaged aes = new RijndaelManaged())
  {
    aes.BlockSize = 128;
    aes.KeySize = 128;
    aes.Padding = PaddingMode.PKCS7;
    aes.Mode = CipherMode.CBC;

    UTF8Encoding byteTransform = new UTF8Encoding();
    aes.Key = byteTransform.GetBytes(encryptionKey);
    ICryptoTransform encryptor = aes.CreateDecryptor(aes.Key, aes.IV);

    using (MemoryStream stream = new MemoryStream())
    {
      using (CryptoStream encryptStream = new CryptoStream(stream, encryptor, CryptoStreamMode.Write))
      {
        using (StreamWriter writer = new StreamWriter(encryptStream))
        {
          writer.Write(valueToEncrypt);
        }

        byte[] encryptedBytes = stream.ToArray();
        results = byteTransform.GetString(encryptedBytes);
      }
    }
  }

  return results;
} 
```

错误发生在第三个 using 语句关闭时（即 writer.Write(valueToEncrypt) 之后的行。如果我尝试将两行移到第三个 using 块内的下方，我最终得到一个空字符串（并且错误仍然发生）。我直接从这个网站（http://stackoverflow.com/questions/273452/using-aes-encryption-in-c-sharp）中提取了这段代码，但它似乎不起作用。有没有人有任何想法?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:19:57.563

是的，但是如果您重新阅读代码，我认为您也会这样做：

```
ICryptoTransform encryptor = aes.CreateDecryptor(aes.Key, aes.IV); 
```

那是一个名为加密器的解密器...

# c++ - 为什么虚拟析构函数的行为方式是这样的？

> ID：13019129
> 
> 赞同：3
> 
> 时间：2012-10-22T20:16:38.753
> 
> 标签：c++

我读到虚拟析构函数必须在具有虚拟方法的类中声明。我只是不明白为什么必须将它们声明为虚拟的。我知道为什么我们需要虚拟析构函数，如下例所示。我只是想知道为什么编译器不为我们管理虚拟析构函数。关于虚拟析构函数的工作，我需要了解些什么吗？下面的例子表明，如果析构函数没有声明为虚拟的，那么派生类的析构函数不会被调用，为什么会这样？

```
class Base 
{
    // some virtual methods
public:
    Base()
    {std::cout << "Base Constructor\n";}
    ~Base()
    {std::cout << "Base De-structor\n";}

};

class Derived : public Base
{
public:
    Derived()
    {std::cout << "Der constructor\n";}
    ~Derived()
    { std::cout << "Der De-structor\n";}
} ;         
void main()
{

    Base *b = new Derived();
    delete b;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:21:19.433

> 我只是想知道为什么编译器不为我们管理虚拟析构函数。

因为在 C++ 中，您为使用的东西付费。默认情况下有一个`virtual`析构函数涉及编译器向类添加一个虚拟表指针，这会增加它的大小。这并不总是可取的。

> 下面的例子表明，如果析构函数没有声明为虚拟的，那么派生类的析构函数不会被调用，为什么会这样？

该示例表现出**未定义的行为**。这简直是​​违反规则的。并非所有析构函数都被调用这一事实只是一种可能的表现形式。它可能会崩溃。

> 关于虚拟析构函数的工作，我需要了解些什么吗？

是的。如果您通过指向基类的指针删除对象，则它们是必需的。否则它是未定义的行为。

### 5.3.5 删除[expr.delete]

> 3）在第一种选择（删除对象）中，**如果待删除对象的静态类型与其动态类型不同**，则静态类型应为待删除对象的动态类型和静态类型的基**类应具有虚拟析构函数或行为未定义**。在第二种选择（删除数组）中，如果要删除的对象的动态类型与其静态类型不同，则行为未定义。（强调我的）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:32:17.650

> 我读到虚拟析构函数必须在具有虚拟方法的类中声明。

是的。但这是过于简单化了。
这并不是说具有虚拟方法的类需要虚拟析构函数。但是使用具有虚拟方法的类的方式意味着它通常需要一个虚拟析构函数。**仅**当您通过指向其基类的指针删除对象时才需要虚拟析构函数。问题在于，当一个对象具有虚拟方法时，您通常使用指向其基类的指针，即使实际对象略有不同。

> 我只是不明白为什么必须将它们声明为虚拟的。

这不是他们必须的。如上所述。这是通常使用模式的结果。

> 我只是想知道为什么编译器不为我们管理虚拟析构函数。

因为它并不总是需要。C++ 的精神是您不必为不需要的东西付费。如果编译器总是将虚拟析构函数添加到具有虚拟方法的类中，那么即使在我可以在我的代码库中证明我不需要它的情况下，我也必须为使用虚拟析构函数付出代价。

> 关于虚拟析构函数的工作，我需要了解些什么吗？

只是使用它们需要一点成本。

> 如果没有将析构函数声明为虚拟的，则不会调用派生类的析构函数，为什么会这样？

这就是为什么我们有虚拟析构函数来导致这种行为。如果您需要此行为，则需要添加虚拟析构函数。但是在某些情况下，可能不需要虚拟析构函数，这使得这种方法的用户无需付出代价。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T20:29:26.000

> 我读到虚拟析构函数必须在具有虚拟方法的类中声明。

“必须”这个词太强了：“应该”更适合该建议。

> 我只是想知道为什么编译器不为我们管理虚拟析构函数。

C++ 设计者试图避免编译器只在最极端的情况下做你没有要求它做的事情。语言设计者认识到使类具有多态性的决定应该由程序的设计者决定，因此他们拒绝将这一责任重新分配给编译器。

> 下面的例子表明，如果析构函数没有被声明为虚拟的，那么派生类的析构函数不会被调用，为什么会这样呢？

因为您的代码无效：通过声明`Derived`non-virtual 的析构函数，您承诺永远不会`Derived`通过指向`Base`;的指针进行销毁。你`main`违反了这个承诺，调用了未定义的行为。

请注意，仅`b`通过使用确切类型声明变量，您就可以避免与非虚拟析构函数相关的问题（[指向 ideone 的链接](http://ideone.com/dkR1cN)）。但是，这会导致设计相当不稳定，因此您应该避免使用虚拟函数和非虚拟析构函数的继承层次结构。

# .net - 使用线程 VB 调用 Web 服务时出现 InvalidOperationException。网

> ID：13019135
> 
> 赞同：2
> 
> 时间：2012-10-22T20:16:52.343
> 
> 标签：.net, vb.net, multithreading, web-services

我为我的项目添加了网络参考。

我正在使用线程，它们以这种方式调用 Web 服务：

```
Private Sub principal()
    Dim arrayH As New ArrayList
    Dim h As Thread
    Dim z As Integer = 150

    For i As Integer = 1 To Z
        h= New Thread(AddressOf doWork)
        arrayH.Add(h)
    Next

    For Each _h As Thread In arrayH
        _h.Start()
    Next
End Sub

Private Sub doWork()
    Dim service As webService.Query
    Dim parameter, response As String

    parameter = "..."'The parameter is a xml

    Try
        service = New Query
        response = service.Report(parameter)

    Catch ex As Exception
        'do something
    End Try

End Sub 
```

当有很多线程（Z = 150）时，它会抛出：

```
System.InvalidOperationException

There is an error in XML document (1, 279).

Unable to read data from the transport connection: The connection was closed. 
```

如果 Z 很小，没有问题。我该如何避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T14:14:59.990

错误“无法从传输连接读取数据：连接已关闭。” 实际上是服务器端问题。您可能一次请求太多请求。

# c# - 识别字符串中的相似性

> ID：13019140
> 
> 赞同：5
> 
> 时间：2012-10-22T20:17:12.600
> 
> 标签：c#, asp.net-mvc-3, entity-framework, localization, similarity

我正在开发一个允许将导入的文件本地化为其他语言的系统。

这主要是一个私人项目，用于掌握 MVC3、EntityFramework、LINQ 等。因此，我喜欢做一些疯狂的事情来为最终结果增添趣味，其中之一就是识别相似的字符串。

想象一下，您有以下字符串列表 - 从我过去使用过的游戏中借来的：

*   Megabeth：Holy Roller 制服 - 包括头部、躯干和腿部
*   Megabeth：神圣滚轮制服头
*   Megabeth：Holy Roller 制服腿
*   Megabeth：Holy Roller 制服躯干
*   Megabeth：PAX East 2012 制服 - 包括头部、躯干和腿部
*   Megabeth：PAX East 2012 制服主管
*   Megabeth：PAX East 2012 制服腿
*   Megabeth：PAX East 2012 制服躯干

如您所见，一旦用户翻译了前 4 个字符串，以下 4 个字符串有很多相似之处，在本例中：

*   梅加贝丝
*   制服
*   包括头部、躯干和腿部
*   头
*   腿
*   躯干

考虑前 4 个字符串确实已经翻译，当用户从列表中选择第 5 个字符串时，我可以使用哪种算法或技术在“类似”的子标题下向用户显示第一个字符串（以及可能的其他字符串）字符串”？

编辑 - 对 Levenshtein 距离的一点评论：我目前的目标是数据库中的 10k 个字符串。Levenshtein Distance 比较每个字符串的字符串，因此在这种情况下有 10k x (10k -1) 个可能的组合。我将如何以可行的方式解决这个问题？有没有比这个特定算法更好的解决方案？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:20:26.373

您可以查看[Levenshtein Distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。低于某个阈值的将被视为相似。两个相同的字符串的距离为零。

[在Rosetta Code](http://rosettacode.org/wiki/Levenshtein_distance#C.23)上有一个 C# 实现以及其他语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:25:40.193

这将取决于数据的大小和词汇的丰富程度。这是第一个想法：构建一个单词到字符串的映射，然后构建另一个单词对到字符串的映射，也许如果数据不是字符串三元组到字符串的巨大映射。删除指向单个字符串的映射（这将大大减少三元组映射的数量）。如果构建需要时间，则将结果字典保存在磁盘或数据库中。

现在给定一个字符串，您应该能够快速将其拆分为单词、单词对和三元组，并查找与其相关的所有字符串。您将需要重视三元组匹配与 4 个单词匹配。即“我是一个老人”更接近于“一个老人吃了一根胡萝卜”或“男人用箭杀死了老狗”（听起来三连音更重要）。

更新：如果这在 Microsoft SQL Server 数据库中，您可以使用全文搜索功能。不过我从来没有尝试过。您还应该看看[Lucene](http://lucenenet.apache.org/)。

# debian - 需要指导设置 Debian 文件服务器

> ID：13019143
> 
> 赞同：1
> 
> 时间：2012-10-22T20:17:33.633
> 
> 标签：debian, media, samba, nfs, fileserver

我最近真正进入了 Linux，并且有兴趣在我的家中设置文件服务器。我希望能够从我的网络外部进行 ssh。文件服务器将主要用于媒体，最终我希望能够设置一个小树莓派芯片来通过 hdmi 将服务器上的媒体流式传输到我的电视（但这是未来的努力）。

我还希望这些文件可用于 Windows、其他 linux 发行版和其他 UNIX 操作系统。这有多难实现？有没有基本指南？在研究了一下之后，我不断遇到 NFS 和 Samba 服务器，这更适合我的设置（如果有的话）。

我知道这个问题有点含糊，但我希望你们中的一个人对此非常有经验，并且可以将我推向正确的方向。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:26:05.373

[我使用本教程http://www.howtoforge.com/setting-up-a-linux-file-server-using-samba](http://www.howtoforge.com/setting-up-a-linux-file-server-using-samba) 使用 ubuntu 服务器 lts设置了我的文件服务器。它很容易理解，并且在 10 年或更早的计算机上运行良好。本教程很好地介绍了使用 samba 设置 Windows 共享。ubuntu 服务器没有 gui，这将使您真正进入 linux 文件系统并手动编辑配置文件。这对我来说是一次很棒的学习经历！！

# php - How to transpose MYSQL db in PHP

> ID：13019151
> 
> 赞同：1
> 
> 时间：2012-10-22T20:18:21.260
> 
> 标签：php, mysql, transpose

I am using PHP to query a MYSQL db to output data to a csv file.

I am currently able to query the db and export the data to the CSV file.

However i am unable to transpose the data so that the columns are rows, and rows are columns.

**CODE:**

```
 function transpose($array) {
             if (!is_array($array) || empty($array)) {
             return array();

             else {
                foreach ($array as $row_key => $row) {
                    if (is_array($row) && !empty($row)) { //check to see if there is a                  second dimension

                foreach ($row as $column_key => $element) {
                       $transposed_array[$column_key][$row_key] = $element;

        else {
               $transposed_array[0][$row_key] = $row;

                   return $transposed_array;

    }
}

    exportMysqlToCsv($tablename,$tokenmain, $id);
    function exportMysqlToCsv($tablename,$tokenmain, $id, $filename = 'Results.csv'){
        $sql_query = "select * from $tablename";

        // Gets the data from the database
        $result = mysql_query($sql_query);

        $f = fopen('php://temp', 'wt');
        $first = true;

        while ($row = mysql_fetch_assoc($result)) {

            if ($first) {

                fputcsv($f, array_keys($row));

                $first = false;
     }

      fputcsv($f, $row);

        } // end while

        $size = ftell($f);
        rewind($f);
        header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
        header("Content-Length: $size");

     // Output to browser with appropriate mime type, you choose ;)
        header("Content-type: text/x-csv");
        header("Content-type: text/csv");
        header("Content-type: application/csv");
        header("Content-Disposition: attachment; filename=$filename");

        fpassthru($f);

        exit;
    } 
```

Somehow, those two functions should be intertwined to give me the output I need.

Any help would be greatly appreciated. thanks! -Merica

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:29:37.657

Try this function:

```
function array_transpose($array, $selectKey = false) {
    if (!is_array($array)) return false;
    $return = array();
    foreach($array as $key => $value) {
        if (!is_array($value)) return $array;
        if ($selectKey) {
            if (isset($value[$selectKey])) $return[] = $value[$selectKey];
        } else {
            foreach ($value as $key2 => $value2) {
                $return[$key2][$key] = $value2;
            }
        }
    }
    return $return;
}

$fruits = array(
    array('id' => 1, 'name' => 'Apple', 'color' => 'Red'),
    array('id' => 2, 'name' => 'Orange', 'color' => 'Orange'),
    array('id' => 3, 'name' => 'Mango', 'color' => 'Yellow')
);
echo "<pre>";
print_r(array_transpose($fruits));
echo "</pre>"; 
```

Returns:

```
Array
(
    [id] => Array
        (
            [0] => 1
            [1] => 2
            [2] => 3
        )

    [name] => Array
        (
            [0] => Apple
            [1] => Orange
            [2] => Mango
        )

    [color] => Array
        (
            [0] => Red
            [1] => Orange
            [2] => Yellow
        )

) 
```

# c# - XAML 中的精灵表

> ID：13019153
> 
> 赞同：0
> 
> 时间：2012-10-22T20:18:28.933
> 
> 标签：c#, wpf, xaml

我目前正在制作一个扑克应用程序，并且我发现了一个带有卡片图像的精灵表。但我不知道如何使用 XAML 仅显示该图片的一部分。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:30:10.733

创建一个辅助类，它将获取您的 spritesheet 位图并根据需要从中生成新的位图。

这是一个例子：

[http://taylorza.blogspot.co.uk/2009/08/silverlight-spritesheet-management-with.html](http://taylorza.blogspot.co.uk/2009/08/silverlight-spritesheet-management-with.html)

# css - z-index 铬错误

> ID：13019155
> 
> 赞同：8
> 
> 时间：2012-10-22T20:18:30.183
> 
> 标签：css, google-chrome, z-index

我遇到了一个非常烦人的错误，它似乎只发生在 Windows 和 OS X 上：父元素位置固定的元素的 z-index 在 Chrome 上不起作用！我将我的奇怪情况转换为一个简单的代码：

html:

```
<div id="mask">
    &nbsp;
</div>

<div id="box">
    <div class="below-mask circle">
        should be below the mask
    </div>

    <div class="above-mask circle">
        should be above the mask
    </div>
</div>​ 
```

CSS：

```
body {
    font-family: Verdana;
    font-size: 9px;
    margin: 0px;
}

#box {
    position: fixed;
}

#mask {
    position: absolute;
    left: 0px;
    top: 0px;
    background-color: rgba(0, 0, 0, 0.5);
    width: 100%;
    height: 100%;
    z-index: 9998;
}

.circle {
    position: relative;
    background-color: rgba(255, 204, 0, 0.75);
    border-radius: 75px;
    line-height: 150px;
    margin: 50px;
    text-align: center;
    width: 150px;
    height: 150px;
}

.above-mask {
    z-index: 9999;
}

.below-mask {
    z-index: 9997;
}​ 
```

沙盒：http: [//jsfiddle.net/gibatronic/umbgp/](http://jsfiddle.net/gibatronic/umbgp/)

我在 OS X 和 Windows 上的 Internet Explorer 9、Firefox 15、Opera 12.02 和 Safari 5.1.7 上进行了测试，所有这些都按预期显示。我还在 Ubuntu 12.10 上进行了测试，它适用于包括 Chrome 在内的所有浏览器！我什至在 Kindle 4 浏览器上进行了测试，它工作正常！

我想知道是否有人知道解决此问题的任何方法！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-09-06T23:58:40.167

one800higgins 的答案是正确的。真正的答案是，[在移动 WebKit 和 Chrome 22+ 上，`position: fixed`总是会创建一个新的堆叠上下文，即使`z-index`是`auto`](https://developer.mozilla.org/en-US/docs/Web/Guide/CSS/Understanding_z_index/The_stacking_context). 所以堆叠上下文层次结构看起来像这样：

*   文档根 (z-index `0`)
    *   `#mask`(z-index `9998`)
    *   `#box`(z-index `0`)
        *   `.above-mask`(z-index `9999`)
        *   `.below-mask`(z-index `9997`)

这意味着`9998`永远不会与堆叠顺序进行比较`9999`或`9997`确定堆叠顺序。取而代之的`9999`是，与 比较`9997`以确定哪个`.above-mask`和`.below-mask`更靠前，然后一旦内部的所有内容都`#box`在该上下文中堆叠，它就会被视为 z-index 的单层，然后堆叠在 z-index`0`的后面。`#mask``9998`

这也解释了为什么@TheNextBillGates 的移动`#mask`内部`#box`工作的答案 - 因为 then与and`#mask`处于相同的堆叠上下文中。我强烈推荐上面的链接以获得更全面的详细信息，您还应该看到[Chrome 中元素](http://updates.html5rocks.com/2012/09/Stacking-Changes-Coming-to-position-fixed-elements)[堆叠更改的公告](http://updates.html5rocks.com/2012/09/Stacking-Changes-Coming-to-position-fixed-elements)。`.above-mask``.below-mask`[`fixed`](http://updates.html5rocks.com/2012/09/Stacking-Changes-Coming-to-position-fixed-elements)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-31T08:07:12.400

如果你移动它的`#mask`内部，`#box`它就可以了。

```
<div id="box">
    <div id="mask">&nbsp;</div>
    <div class="below-mask circle">should be below the mask</div>
    <div class="above-mask circle">should be above the mask</div>
</div> 
```

这是一个小提琴[http://jsfiddle.net/TheNextBillGates/jKm4b/](http://jsfiddle.net/TheNextBillGates/jKm4b/)

不知道为什么会这样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-24T20:46:33.947

我刚刚遇到了这个错误，它仍然在 Google Chrome v26 中发生。我可以通过代码或 Chrome 的 CSS 编辑器将 z-index 设置为我想要的最高值，这没有任何区别（并且元素的位置设置为绝对位置）。相同的 z-index 设置在 Firefox 甚至 IE8-IE10 中按预期工作。当我将父元素从 position:fixed 切换到 position:absolute 时，子元素的 z-index 在 Chrome 中运行良好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-05T18:17:22.483

为您的固定 div 分配一个 z-index。这应该会导致 chrome 也尊重所有子级的 z-index 值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-11T22:15:18.937

在我看来，多个 z-index 堆栈是不幸和令人困惑的，但是如果您提高任何目标元素的父元素的 z-index，您可以在不更改 html 结构的情况下解决这个问题。尝试找到一个父元素，它是与您的内容重叠的麻烦元素的兄弟。应用此样式：

```
position: relative; z-index: [# higher than overlapping element's z-index]; 
```

您的里程可能会因您的项目而异，但是此解决方案适用于我的项目。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-05T15:29:05.337

我认为这是因为它不像模态窗口那样位于页面底部。简单的解决方法是抓住所有模态窗口并将它们放入结束正文标记之前的 div 中。下面的示例修复了我遇到的每个 chrome 问题。

```
$('body').append('<div id="modelContainer" />');
$('.modal').each(function() {
  $(this).appendTo('#modelContainer');
}) 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-10-22T20:41:02.427

更改或删除`position: fixed`on `#box`，就可以了。

[jsFiddle](http://jsfiddle.net/one800higgins/umbgp/18/)

# c++ - 将套接字路由到另一个端口

> ID：13019156
> 
> 赞同：5
> 
> 时间：2012-10-22T20:18:39.720
> 
> 标签：c++, c, sockets, routing

我有一个系统，我想在其中侦听套接字并等待客户端连接，然后将连接传递给另一个应用程序，一旦建立连接，我就会启动该应用程序。

我无法控制其他应用程序，只能设置它将侦听的端口，但我希望每个新客户端都有一个进程。

这就是我想要做的：

![路由](../Images/801c30bef9927b990a075b4305da750c.png)

我一直在寻找解决方案，但我觉得我没有正确的术语，但我设法在 Richard Stevens 的“Unix 网络编程”中找到了一些关于`AF_ROUTE`套接字系列的东西，这些套接字可以与`SOCK_RAW`路由 a连接到另一个 IP 和端口。[但是关于如何使用这个标志](http://www.cs.cmu.edu/~srini/15-441/F01.full/www/assignments/P2/htmlsim_split/node20.html)的文档太少了，而且似乎需要超级用户权限（我想避免）。

也许有一个更简单的解决方案，但我可能使用了错误的术语。清楚我想做什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:31:40.187

我认为你不能像你想要的那样“传递”套接字，特别是如果你不能改变和重新编译“APP”。套接字包括与它们所拥有的进程相关联的各种管理开销（资源管理等）。此外，如果您无法重新编译 APP，则无法使其绕过接受连接所涉及的步骤，只需将已打开的连接“交给”路由器即可。

但是，您是否考虑过简单地使用路由器作为通道？基本上，让您的“路由器”进程通过套接字连接到它产生的每个“APP”进程，并简单地将它从适当的客户端收到的任何内容回显到适当的 APP，反之亦然，APP 到客户端？

这确实会增加开销，并且您必须管理一个小型映射来跟踪哪些客户端访问哪些应用程序，但它可能会起作用（假设 APP 或客户端没有基于它们所连接的 IP 地址的任何行为） ， ETC）。假设你不能重新编译APP，可能没有太多其他的选择。

代码相对简单。您从 APP 接收的数据的处理程序只是从您的映射中查找适当应用程序的套接字，然后在其上执行此数据的非阻塞发送。同样，从客户端接收到的数据的处理程序。根据客户端和应用程序的行为方式，您可能需要处理一些同步（如果您同时从两者接收）。

# php - 安全地将 printf() 更改为 print()？

> ID：13019159
> 
> 赞同：0
> 
> 时间：2012-10-22T20:18:46.467
> 
> 标签：php, printing, printf, echo

所以我出于某种原因采用了 using`printf()`作为`echo`or的替代品`print`

我没有任何 REQUIRE 的格式化字符串`printf($var);`，因此它们可以（并且应该）全部转换为`print($var);`

既然他们都有相同的语法`printf($this.'that');`，我可以只做一个文件夹范围的“查找和替换”`printf(`来`print(`安全地更改吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:36:05.793

如果你有调用`printf`不期望格式化，你会遇到问题，他们真的应该更改为`print`. 例如，如果您的输入`printf`包含该`%`字符，您将收到一个错误，而不是有关格式错误的参数字符串。

```
$something = 'Results: 10% complete.';
print($something);
printf($something); // ERROR: printf() thinks it should replace "% c"
                    //        with an integer not passed as a second argument
printf('%s',$something); // Pass unquoted input as a formatted argument 
```

因此，基本上，如果您的代码从未`printf`与有意识地格式化输入一起使用，您将受益于代码中的查找/替换以将所有这些调用转换为`print`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:26:18.027

如果您确定不在任何地方使用 printf 功能，并且 print 就足够了，那么您可以用简单的搜索/替换来替换它。

# java - 使用 GWT 演示者小部件中的 prepareFromRequest(PlaceRequest)

> ID：13019165
> 
> 赞同：0
> 
> 时间：2012-10-22T20:19:04.523
> 
> 标签：java, gwt, url-parameters, gwtp

我正在尝试从 GWT 演示者小部件获取 URL 参数，但收到以下错误消息：

```
The method prepareFromRequest(PlaceRequest) of type ViewDiagramPresenter must override or implement a supertype method
The method prepareFromRequest(PlaceRequest) is undefined for the type PresenterWidget<ViewDiagramPresenter.MyView> 
```

有任何想法吗？谢谢你

```
public class ViewDiagramPresenter extends
        PresenterWidget<ViewDiagramPresenter.MyView> {
[...]

@Override
     public void prepareFromRequest(PlaceRequest placeRequest) {
       super.prepareFromRequest(placeRequest);
       String actionString = placeRequest.getParameter("action", "view");
    }
[...]
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T23:50:50.067

该类`PresenterWidget`似乎没有一个名为`prepareFromRequest()`. 也许您的意思是`Presenter`从 gwtp 扩展类？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:45:25.217

将 注入您的 PresenterWidget 并在方法`PlaceManager`中处理 url 。`onReset()`

```
public class ViewDiagramPresenter extends
        PresenterWidget<ViewDiagramPresenter.MyView> {

    protected final PlaceManager placeManager;

    @Inject
    public ViewDiagramPresenter(final EventBus eventBus, final MyView view, final MyProxy proxy, final PlaceManager placeManager) {
        super(eventBus, view, proxy);
        this.placeManager = placeManager;
    }

    @Override
    public void onReset() {
        super.onReset();
        PlaceRequest placeRequest = placeManager.getCurrentPlaceRequest();
        String actionString = placeRequest.getParameter("action", "view");
    }
} 
```

# mysql - Shapado：在 MySQL 或 PostgreSQL 上运行？

> ID：13019168
> 
> 赞同：0
> 
> 时间：2012-10-22T20:19:10.307
> 
> 标签：mysql, ruby-on-rails, ruby, postgresql, shapado

我有兴趣使用[Shapado](https://github.com/ricodigo/shapado)在 Ruby on Rails 上创建一个问答网站。但它使用 MongoDB 作为数据库；如何将其更改为在 MySQL 或 PostgreSQL 上运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:35:43.423

重写每个模型以从 ActiveRecord::Base 继承。将字段重写为迁移并以这种方式重新创建数据模型。

这不是一件容易的事。

# algorithm - 如何将整数 n <= 12 划分为 12 个元素的数组，以便我可以将此数组划分为尽可能相等的周期

> ID：13019174
> 
> 赞同：3
> 
> 时间：2012-10-22T20:19:26.683
> 
> 标签：algorithm

我正在尝试将整数 N <= 12（即工作日数）除以 12 个月，这样如果我将 12 个月分为 1、2、3、4 或 6 个月的时间段，则天数在这些时期应尽可能相等。

例如：

如果 N = 6，则数组应如下所示：

`1 0 1 0 1 0 1 0 1 0 1 0`或者`0 1 0 1 0 1 0 1 0 1 0`

N = 4

`1 0 0 1 0 0 1 0 0 1 0 0`

N = 3

`1 0 0 1 0 0 1 0 0 0 0 0`

N = 2

`1 0 0 0 0 0 1 0 0 0 0 0`

编辑：

我所说的“尽可能相等”的意思是，当我将此数组划分为多个时段时，这些时段中的工作日数的差异不应超过 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:35:57.173

**编辑——针对一般情况进行了改进，假设您只要求 1,2,3,4,6 有问题！**

你想要的是通过给定的周期调制 N 。（我的术语可能完全错误：D 可能应该再次阅读我的高中物理！）

来点红宝石吧。。

```
def spread_it(n)
  d = 12.0 / n
  (0..11).map do |index|
    (12.0 - (index % d) > 11.0) ? '1' : '0'
  end
end

(1..12).each do |n|
  puts "N=#{n} - #{spread_it n}"
end 
```

输出是：

```
N=1 - ["1", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0", "0"]
N=2 - ["1", "0", "0", "0", "0", "0", "1", "0", "0", "0", "0", "0"]
N=3 - ["1", "0", "0", "0", "1", "0", "0", "0", "1", "0", "0", "0"]
N=4 - ["1", "0", "0", "1", "0", "0", "1", "0", "0", "1", "0", "0"]
N=5 - ["1", "0", "0", "1", "0", "1", "0", "0", "1", "0", "1", "0"]
N=6 - ["1", "0", "1", "0", "1", "0", "1", "0", "1", "0", "1", "0"]
N=7 - ["1", "0", "1", "0", "1", "0", "1", "1", "0", "1", "0", "1"]
N=8 - ["1", "0", "1", "1", "0", "1", "1", "0", "1", "1", "0", "1"]
N=9 - ["1", "0", "1", "1", "1", "0", "1", "1", "1", "0", "1", "1"]
N=10 - ["1", "0", "1", "1", "1", "1", "1", "0", "1", "1", "1", "1"]
N=11 - ["1", "0", "1", "1", "1", "1", "1", "1", "1", "1", "1", "1"]
N=12 - ["1", "1", "1", "1", "1", "1", "1", "1", "1", "1", "1", "1"] 
```

现在好点了？:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:38:04.593

每个区间的平均长度是`12/N`（在数学术语中，不是整数除法）。要强制执行“一比一”规则，唯一的选项是`ceil(12/N)`("long") 和`floor(12/N)`("short")。每个所需的数量是`12 % N`和`N - (12 % N)`。即在Python中

```
def allocate_intervals(N):
    short = 12 // N # integer division
    long = short + 1

    # lists of [1,0, ..., 0] lists
    short_intervals = [[1] + [0] * (short - 1)] * (N - (12 % N))
    long_intervals =  [[1] + [0] * (long - 1)] * (12 % N)

    # concatenate to get [1, 0, ..., 1, 0, ...]
    return sum(short_intervals + long_intervals, []) 
```

上面的代码创建了每个间隔的适当数量，然后连接起来。

（此方法完全通用，可以将`12`s 替换为任何正整数。）

* * *

在 C/C++ 等中对上述内容的实现略有不同。

```
// array is [0, 0, ..., 0] with 12 elements. It is modified in-place.
void allocate_intervals(int N, int array[12]) {
   // length of each interval
   int len_short = 12 / N, len_long = len_short + 1;

   // number of each interval
   int num_long = 12 % N, num_short = N - num_long;

   int step = 0;
   for (int i = 0; i < num_long; i++) {
      array[step] = 1;
      step += len_long;
   }
   for (int i = 0; i < num_short; i++) {
      array[step] = 1;
      step += len_short;
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:37:50.563

如果你所拥有的只是一个 12 个元素的数组，那么你可以使用暴力递归回溯：

```
Arr = [ ] // holds best solution
tempArr = [ ] // temproray

function rec( i, n )
     if n == 0
        return
     if i == Arr.length
        checkBest(Arr, tempArr) // copies tempArr to Arr if it is better solution
        return
     tempArr[i] = 1
     rec(i + 1, n - 1)
     tempArr[i] = 0
     rec(i + 1, n) 
```

用法：rec(0, 1234)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:29:47.857

这个想法是`int n = 12 / N`给出期间。

**更新了代码。** 这适用于从 1 到 12 的所有情况。超过 6 的情况使用对称性来避免连续的 1

```
public int[] Splitter(int N, int max) // max = 12 for above problem.
{
    if (max < 1 || N < 1 || N > max)
    {
        throw new ArgumentException();
    }

    if (N != max && N > max / 2)
    {
        return Splitter(max - N, max).Select(s => s == 1 ? 0 : 1).ToArray();
    }

    int[] a = new int[max];
    int n = max / N;
    int count = 0;

    for (int i = 0; i < max; i++)
    {
        if (i % n == 0 && count < N)
        {
            a[i] = 1;
            count++;
        }
        else
        {
            a[i] = 0;
        }
    }

    return a;
} 
```

**旧代码：**

```
int n = 12 / N;
for(int i = 0; i < 12; i++)
{
  if (i % n == 0)
  {
    a[i] = 1;
  }
  else
  {
    a[i] = 0;
  }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T22:34:20.687

```
def alloc(N, length=12):

    result = zeros(length) # preinitialise an array with zeros

    short_gap = length // N # where // is integer division
    long_gap = short_gap + 1

    change_over_index = (N - (length % N)) * (length // N)

    result[0:change_over_index:short_gap] = 1
    result[change_over_index:length:long_gap] = 1
    # above two lines of code is called slicing. arr[x:y:z] = 1 means:
    # set all indexes from x to y by increments of z to be 1... eg.
    # for (int i = x; i < y; i += z) arr[i] = 1;

    return result 
```

# c# - 如何将窗口所有者设置为非托管窗口

> ID：13019176
> 
> 赞同：1
> 
> 时间：2012-10-22T20:19:39.900
> 
> 标签：c#, winforms, pinvoke

我想将所有者表单设置为未管理的窗口。我有非托管窗口的句柄。如何将此非托管窗口设置为我的托管窗体的所有者窗口？

```
IntPtr hWnd = GetUnmanagedWindow();//assume the handle is returned correctly
Form form = new Form();
form.Show(ConvertToManaged(hWnd));//Need an implementation for ConvertOrSomething() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-23T13:17:41.253

执行此操作的标准方法是使用[`NativeWindow`](http://msdn.microsoft.com/en-us/library/system.windows.forms.nativewindow.aspx)该类。

```
IntPtr hWnd = GetUnmanagedWindow();//assume the handle is returned correctly
Form form = new Form();
NativeWindow nativeWindow = new NativeWindow();
nativeWindow.AssignHandle(hWnd);
form.Show(nativeWindow); 
```

正如汉斯指出的那样，请记住`ReleaseHandle`在完成时致电。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:36:05.260

```
public ManagedWindow ConvertToManaged(IntPtr hWnd)
{
   return new ManagedWindow(hWnd);
}

    public class ManagedWindow : IWin32Window
    {
        IntPtr _handle;
        public IntPtr Handle
        {
            get { return _handle; }
        }

        public ManagedWindow(IntPtr handle)
        {
            _handle = handle;
        }
    } 
```

# android - Ios 相当于 android 选项卡式列表

> ID：13019177
> 
> 赞同：3
> 
> 时间：2012-10-22T20:19:47.447
> 
> 标签：android, ios, list, tabs

有没有办法在 iOS 中创建类似于 Android 上的选项卡。也就是说，通过滑动在它们之间移动，就好像它们是彼此相邻的窗格？

麦克风

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:25:44.750

只需使用`UIScrollView`with `pagingEnabled=YES`。

请参阅 Apple 文档中演示这一切的[PageControl](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)示例代码。

# android - Android意图过滤器未从浏览器启动应用程序

> ID：13019182
> 
> 赞同：1
> 
> 时间：2012-10-22T20:20:07.430
> 
> 标签：android, intentfilter

这是一个非常奇怪的问题......上周，如果调用了某个 URL，我正在使用这个意图过滤器从浏览器启动我的应用程序。那时它工作得很好。今天，它不再启动我的应用程序了。

这是意图过滤器：

```
 <intent-filter>
            <action android:name="android.intent.action.VIEW" />

            <category android:name="android.intent.category.DEFAULT" />
            <category android:name="android.intent.category.BROWSABLE" />

                <data android:host="web1.tunnlr.com"
                    android:port="12257"
                    android:pathPattern=".*androidapp.*"
                    android:scheme="http" />

        </intent-filter> 
```

如您所见，我只是在这里使用一个测试站点。当加载页面[http://web1.tunnlr.com/androidapp](http://web1.tunnlr.com/androidapp)的重定向被发送到用户的浏览器时，它会给出一个小的选择器对话框，您可以在其中使用浏览器打开页面（因为 http 方案总是被浏览器捕获）或我的应用程序。现在，它只停留在浏览器上。我从来没有为浏览器执行过“记住我的选择”之类的操作来处理这个意图，我什至卸载并重新安装了该应用程序以确保不是这种情况。

任何人都可以看到这个意图过滤器的问题吗？

此外，这是我从重定向返回的确切 url，它应该会触发意图过滤器。

`http://web1.tunnlr.com/androidapp`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:23:52.600

如果您没有更改意图过滤器，那么我猜您不小心将浏览器设置为一直处理此意图。

您可以通过设置 > 应用程序 > 浏览器 > 清除默认值来清除它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:01:41.347

尝试这个？

```
 <data android:host="web1.tunnlr.com"
                android:port="12257"
                android:pathPrefix="/androidapp/"
                android:pathPattern="\\*"
                android:scheme="http" /> 
```

# c# - 在 C# 中创建文件夹的快捷方式

> ID：13019189
> 
> 赞同：10
> 
> 时间：2012-10-22T20:20:29.400
> 
> 标签：c#, winforms

长话短说，我需要使用 C# 创建文件夹的快捷方式。我一直在阅读使用`IWshRuntimeLibrary`. 当我去尝试使用任何东西时，`IWshRuntimeLibrary`我会遇到各种歧义错误`System.IO.File`。我假设这是因为有一个`IWshRuntimeLibrary.File`接口以及`System.IO.File`. 我真正能找到的只是有关制作应用程序快捷方式的文章，而不是文件夹。

歧义错误除外：

*   这是用于文件夹快捷方式的正确工具吗？
*   如何使用此创建快捷方式
*   如何指定快捷方式的放置位置

此外，当我尝试创建文件夹的快捷方式时，请`C:\TEMP`使用以下命令：

```
IWshShortcut shortcut;
wshShell = new WshShellClass();
shortcut = (IWshShortcut)wshShell.CreateShortcut(@"C:\TEMP");

shortcut.TargetPath = @"C:\Documents and Settings"; 
```

我得到一个`COMException`. 根据我读过的内容，这应该创建一个到 C 驱动器临时文件夹的快捷方式，并将该快捷方式放在“文档和设置”中。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T20:53:08.227

不要忘记将 Embed Interop Types 设置为 False 以引用 Interop.IWshRuntimeLibrary。我测试并工作没有出错。

```
 // Make sure you use try/catch block because your App may has no permissions on the target path!
  try
  {
    CreateShortcut(@"C:\temp", @"C:\MyShortcutFile.lnk",
        "Custom Shortcut", "/param", "Ctrl+F", @"c:\");
  }
  catch (Exception ex)
  {
    Console.WriteLine(ex.Message);
  }

   /// <summary>
    /// Create Windows Shorcut
    /// </summary>
    /// <param name="SourceFile">A file you want to make shortcut to</param>
    /// <param name="ShortcutFile">Path and shorcut file name including file extension (.lnk)</param>
    public static void CreateShortcut(string SourceFile, string ShortcutFile)
    {
      CreateShortcut(SourceFile, ShortcutFile, null, null, null, null);
    }

    /// <summary>
    /// Create Windows Shorcut
    /// </summary>
    /// <param name="SourceFile">A file you want to make shortcut to</param>
    /// <param name="ShortcutFile">Path and shorcut file name including file extension (.lnk)</param>
    /// <param name="Description">Shortcut description</param>
    /// <param name="Arguments">Command line arguments</param>
    /// <param name="HotKey">Shortcut hot key as a string, for example "Ctrl+F"</param>
    /// <param name="WorkingDirectory">"Start in" shorcut parameter</param>
    public static void CreateShortcut(string TargetPath, string ShortcutFile, string Description,
       string Arguments, string HotKey, string WorkingDirectory)
    {
      // Check necessary parameters first:
      if (String.IsNullOrEmpty(TargetPath))
        throw new ArgumentNullException("TargetPath");
      if (String.IsNullOrEmpty(ShortcutFile))
        throw new ArgumentNullException("ShortcutFile");

      // Create WshShellClass instance:
      var wshShell = new WshShellClass();

      // Create shortcut object:
      IWshRuntimeLibrary.IWshShortcut shorcut = (IWshRuntimeLibrary.IWshShortcut)wshShell.CreateShortcut(ShortcutFile);

      // Assign shortcut properties:
      shorcut.TargetPath = TargetPath;
      shorcut.Description = Description;
      if (!String.IsNullOrEmpty(Arguments))
        shorcut.Arguments = Arguments;
      if (!String.IsNullOrEmpty(HotKey))
        shorcut.Hotkey = HotKey;
      if (!String.IsNullOrEmpty(WorkingDirectory))
        shorcut.WorkingDirectory = WorkingDirectory;

      // Save the shortcut:
      shorcut.Save();
    } 
```

来源：http: [//zayko.net/post/How-to-create-Windows-shortcut- (C).aspx](http://zayko.net/post/How-to-create-Windows-shortcut-%28C%29.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-22T21:00:10.820

你得到它的另一种方式：你正在尝试为你的文件夹创建`C:\Temp`一个快捷方式。`C:\Documents and Settings`

以下代码段将在您的桌面上创建一个网络文件夹的快捷方式：

```
var desktop = Environment.GetFolderPath(Environment.SpecialFolder.DesktopDirectory);
IWshShortcut shortcut;
var wshShell = new WshShellClass();
shortcut = (IWshShortcut)wshShell.CreateShortcut(Path.Combine(desktop, @"Temp.lnk"));
shortcut.TargetPath = @"\\computername\sharename";
shortcut.Save(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T20:42:52.760

`IShellLink`在专家交流中使用的解决方案：

[在 .NET 中创建快捷方式](http://www.experts-exchange.com/Programming/Languages/.NET/Visual_Basic.NET/A_3664-Creating-Shortcuts-in-NET.html)

为您提供托管层以创建文件和文件夹快捷方式。

它是 VB.NET，但您可以使用免费转换器将其转换为 C#。

# android - aChart 主屏幕小部件

> ID：13019193
> 
> 赞同：0
> 
> 时间：2012-10-22T20:20:34.007
> 
> 标签：android, bitmap, android-appwidget, achartengine, graphing

我一直在尝试使用 aChartEngine 作为图形库创建一个简单的主屏幕小部件，但我似乎根本无法渲染图表。似乎也没有任何错误消息，所以我不确定我是否做错了什么。

我有机会看到这篇文章（https://groups.google.com/forum/?fromgroups=#!topic/achartengine/ovAU5v39ViE），但我似乎找不到这个 saveToBitmap 方法。过去，我见过在 AndroidPlot 中使用 getDrawingCache 方法来做同样的事情，但它似乎不起作用。

这是我用来获取图表图像的代码：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager,
        int[] appWidgetIds)
{
    for (int appWidgetId : appWidgetIds)
    {
        RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.main);

        views.setImageViewBitmap(R.id.myChartView, getChartImage(context));

        appWidgetManager.updateAppWidget(appWidgetId, views);
    }

    super.onUpdate(context, appWidgetManager, appWidgetIds);
}

private Bitmap getChartImage(Context context)
{
mChartView.setDrawingCacheEnabled(true);

        String[] titles = new String[] { "2007", "2008" };
        List<double[]> values = new ArrayList<double[]>();
        values.add(new double[] { 5230, 7300, 9240, 10540, 7900, 9200, 12030, 11200, 9500, 10500,
            11600, 13500 });
        values.add(new double[] { 14230, 12300, 14240, 15244, 15900, 19200, 22030, 21200, 19500, 15500,
            12600, 14000 });
        int[] colors = new int[] { Color.CYAN, Color.BLUE };
        XYMultipleSeriesRenderer renderer = buildBarRenderer(colors);
        renderer.setOrientation(Orientation.VERTICAL);
        setChartSettings(renderer, "Monthly sales in the last 2 years", "Month", "Units sold", 0.5,
            12.5, 0, 24000, Color.GRAY, Color.LTGRAY);
        renderer.setXLabels(1);
        renderer.setYLabels(10);
        renderer.addXTextLabel(1, "Jan");
        renderer.addXTextLabel(3, "Mar");
        renderer.addXTextLabel(5, "May");
        renderer.addXTextLabel(7, "Jul");
        renderer.addXTextLabel(10, "Oct");
        renderer.addXTextLabel(12, "Dec");
        int length = renderer.getSeriesRendererCount();
        for (int i = 0; i < length; i++) {
          SimpleSeriesRenderer seriesRenderer = renderer.getSeriesRendererAt(i);
          seriesRenderer.setDisplayChartValues(true);
        }

        mChartView = ChartFactory.getBarChartView(context, buildBarDataset(titles, values), renderer,
                Type.DEFAULT);
        Bitmap bmp = mChartView.getDrawingCache();
        return bmp;
} 
```

有人能告诉我哪里出错了吗？

谢谢！

# java - ora 12505 错误侦听器拒绝连接

> ID：13019194
> 
> 赞同：1
> 
> 时间：2012-10-22T20:20:36.503
> 
> 标签：java, oracle, jdbc, oracle10g, odbc

```
import java.util.*;
import java.io.*;
import java.sql.*;
public class Stud
{
    public static void main(String args[])
    {
        try
        {
            Class.forName("oracle.jdbc.driver.OracleDriver");
            System.out.println("Driver Registered");
            Connection connection =DriverManager.getConnection("jdbc:oracle:thin:@localhost:1521:XE","bh","1234");
            System.out.println("Connection created");
            PreparedStatement ps=connection.prepareStatement("insert into Student(StudName,dob,math,phy,chem,agg) values(?,?,?,?,?,?)");
            System.out.println("prepare stmt ");
            ps.setString(1,"name");

            ps.setString(2,"dob");
            ps.setInt(3,96);
            ps.setInt(4,96);
            ps.setInt(5,94);
            ps.setDouble(6,96);
            int a=ps.executeUpdate();
            ps.close();
            connection.close();
        }
        catch(Exception ex)
        {
            ex.printStackTrace();
        }
    }
} 
```

## 错误

```
java.sql.sql exception listner refused to connect with the following error
  ora 12505 the listner currently does not know of sid in give connectoin descriptor
  local host 1521 
```

我正在使用 oracle 10 g，并且在我的类路径中设置了 ojdbc14.jar。我正在使用 Java 7，我的 tnsname.ora 也包含 (PORT = 1521)) 所以我无法理解给定的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:36:06.147

您的数据库 URL 错误。它应该是：jdbc:oracle:thin:@localhost:1521/XE <- 注意 SID 值的斜杠而不是冒号（在您的情况下为“XE”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T06:02:07.770

从[oracle 文档](http://docs.oracle.com/cd/B28359_01/java.111/b31224/urls.htm#BEIDHCBA)中，您的连接字符串应具有以下格式：

```
jdbc:oracle:thin:scott/tiger@//myhost:1521/myservicename 
```

# java - 如何使用 JDK 7 在 Mac OS X 上运行 IDEA IntelliJ？

> ID：13019199
> 
> 赞同：86
> 
> 时间：2012-10-22T20:20:46.620
> 
> 标签：java, macos, intellij-idea

我使用Mac OS X 10.8.2，使用JDK 7。现在我下载了最新版本的IDEA IntelliJ，11。但是如果没有JDK 6，它似乎无法启动。有什么解决方法吗？

如何使用 JDK 7 在 Mac OS X 上运行 IDEA IntelliJ？

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-10-22T20:34:53.297

**更新：**

在 JDK 1.7 上运行 IDEA 12 时（更改`JVMVersion`为`1.7*`in之后`Info.plist`），请确保您`LANG=en_US.UTF-8`的环境中有，请参阅相关的 Java 问题：

*   [http://java.net/jira/browse/MACOSX_PORT-165](http://java.net/jira/browse/MACOSX_PORT-165)
*   [http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7187821](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=7187821)

[请参阅此线程](http://devnet.jetbrains.com/message/5472745#5472745)以调试启动器问题。

另请注意，Mac 上的 GUI 应用程序无法访问您的终端环境。如果您已经定义了一些可以在终端中正常工作的环境变量，那么您不是从终端运行的其他应用程序将看不到这些变量。此问题的解决方法是直接从终端启动应用程序，对于 IDEA，可以使用以下命令：

```
open -a /Applications/IntelliJ\ IDEA\ 12.app/ 
```

目前 Mac 上的 JDK 1.7 支持存在已知问题，例如缺少 Retina 支持、可能闪烁、[某些 API 未实现](http://youtrack.jetbrains.com/issue/IDEA-93710)。强烈建议在 JDK 1.6 下运行 IDEA，以获得在 Mac 上的最佳体验。它不会阻止您使用 JDK 1.7 作为构建和运行项目的目标。

* * *

IntelliJ IDEA 11 启动器不适用于 Mac 上的 JDK 1.7。目前您必须安装 JDK 1.6 才能运行 IDEA 11 及更早的版本。

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2014-11-11T17:51:08.280

### Mac OSX Yosemite / El Capitan 更新

我安装了 IntelliJ 15 Ultimate，我收到了同样的消息。我还安装了 Java 1.7 和 1.8。

我在终端中使用以下步骤解决了它：

```
$ cd /Applications/IntelliJ\ IDEA\ 14.app/Contents 
```

编辑`Info.plist`文件，并更改了这一点：

```
<key>JVMVersion</key>
<string>1.6*</string> 
```

至：

```
<key>JVMVersion</key>
<string>1.8*</string> 
```

启动后，一切都是金色的。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-01-21T22:27:39.880

使用 IntelliJ 13 和 OS X 10.9，我只需将 plist 更改为 1.7*，它就可以在 Java 7 上运行，而不会提示安装 Java 6。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-11-24T07:14:17.167

对于那些仍然收到必须安装 Java 6 的错误消息的人。这样做有两个问题：

1.  每当应用程序 Info.plist 文件包含 Java 部分时，Mac OS 都希望安装 jdk 1.6
2.  IntelliJ 附带的 Java 启动器也非常需要 jdk 1.6

所有你需要的是：

1.  用带有显式 java 调用的 shell 脚本替换原始启动器（Contents/MacOS/idea）（参数和类路径可以从 Info.plist 的 Java 部分获取）。
2.  从 Info.plist 中删除“Java”部分

或者你可以使用这个[https://github.com/wonder-mice/mac-java-launcher](https://github.com/wonder-mice/mac-java-launcher)来实现自动化，我相信它不仅适用于 IntelliJ。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-10T04:51:19.087

其他人提出了非常好的解决方案，但您必须手动执行 vi 编辑器等。相反，您可以通过 Mac 终端运行此命令，您会很高兴：

```
find /Applications/IntelliJ*/*Contents/*Info.plist  -exec sed -i -e 's/string>1.6/string>1.7/' {} \; 
```

![在此处输入图像描述](../Images/882a33b4d125305e1864132177042c33.png)

一些可选的提示：

1.  如果您安装了 JDK 1.8，则只需在上述命令中将 1.7 替换为 1.8。
2.  与往常一样，在文件夹中复制 Info.plist 以防万一您想比较结果或出于某种原因将其还原。
3.  要验证更改是否发生，请运行以下命令：

    *   `grep "string>1.7" /Applications/IntelliJ*/*Contents/*Info.plist`

# html - iframe 跨度页面宽度

> ID：13019201
> 
> 赞同：1
> 
> 时间：2012-10-22T20:20:54.520
> 
> 标签：html, iframe

我希望我`iframe`跨越页面的宽度，并向下到页面的底部。在[这个 w3 页面](http://www.w3schools.com/tags/tag_iframe.asp)中，我看到了宽度和高度选项，但它们必须以像素为单位指定。如何设置它以跨越我想要的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T13:16:33.780

这是一个将显示你想要的代码，但如果你不想使用 px ......

```
<iframe src="http://www.google.com" width="180px" height="180px"> 
```

比您可以使用 % 指定框架的高度和宽度...它将占主框架大小的百分比，即 1080px ..

```
<iframe src="http://www.google.com" width="30%" height="20%"> 
```

# python - 如何在 python 中计算 AWS API 签名 (v4)？

> ID：13019203
> 
> 赞同：9
> 
> 时间：2012-10-22T20:21:03.803
> 
> 标签：python, amazon-web-services, hmac, amazon-glacier

我正在尝试使用 AWS 文档提供的[示例请求](http://docs.amazonwebservices.com/amazonglacier/latest/dev/amazon-glacier-signing-requests.html#example-signature-calculation)和[示例函数](http://docs.amazonwebservices.com/general/latest/gr/signature-v4-examples.html#signature-v4-examples-python)为 Amazon Glacier 上传请求生成签名，但我无法使其工作。在这一点上，我确定我错过了一些非常明显的东西：

```
#!/bin/env python

import hmac
import hashlib

# This string to sign taken from: http://docs.amazonwebservices.com/amazonglacier/latest/dev/amazon-glacier-signing-requests.html#example-signature-calculation
sts = """AWS4-HMAC-SHA256
20120525T002453Z
20120525/us-east-1/glacier/aws4_request
5f1da1a2d0feb614dd03d71e87928b8e449ac87614479332aced3a701f916743"""

# These two functions taken from: http://docs.amazonwebservices.com/general/latest/gr/signature-v4-examples.html#signature-v4-examples-python
def sign(key, msg):
    return hmac.new(key, msg.encode('utf-8'), hashlib.sha256).hexdigest()

# The fake secret key is provided by the referenced docs
def getSignatureKey():
    kDate = sign(("AWS4" + "wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY").encode('utf-8'), "20120525")
    kRegion = sign(kDate, "us-east-1")
    kService = sign(kRegion, "glacier")
    kSigning = sign(kService, "aws4_request")
    return kSigning

signature = sign(getSignatureKey(), sts)
print signature 
```

如果我运行我的程序，我会得到以下哈希：

```
$ python test.py
3431315da57da4df28f92895c75364d94b36c745896ad3e580c0a6ae403b1e05 
```

然而，文档明确指出：

> 如果使用秘密访问密钥 wJalrXUtnFEMI/K7MDENG/bPxRfiCYEXAMPLEKEY，则计算出的签名为：
> 
> 3ce5b2f2fffac9262b4da9256f8d086b4aaf42eba5f111c21681a65a127b7c2a

我错过了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T22:35:05.597

你的功能在一个方面与他们的不同。你正在做的

```
def sign(key, msg):
  return hmac.new(key, msg.encode('utf-8'), hashlib.sha256).hexdigest() 
```

但他们在做

```
def sign(key, msg):
  return hmac.new(key, msg.encode('utf-8'), hashlib.sha256).digest() 
```

所以你的派生密钥是错误的。您只想在过程的最后一步使用 hexdigest，而不是在计算签名密钥时使用。

# python - 带参数的 SQLAlchemy NOT IN 子句

> ID：13019205
> 
> 赞同：4
> 
> 时间：2012-10-22T20:21:07.577
> 
> 标签：python, postgresql, sqlalchemy

在使用 Python 连接到 PostgreSQL 数据库时，我们使用的是 SQLAlchemy，而不是 ORM。我们有一个表，其中一列是字符串数组，我们想要检索数组列中不存在输入参数的所有行。请注意，我们可以检索 SQLAlchemy 的其他查询的结果，因此问题必须出在查询创建中。

我们需要实现的 SQL 如下所示：

```
select pk from table where 'paramstring' NOT IN(array_column);
-- returns several rows 
```

我们在 Python 中想出的函数是这样的：

```
def get_not_matching(param):

    select_statement = select([the_table.c.pk]).where(
        ~data_table.c.array_column.in_([param])
    )

    #... execute and retrieve ResultProxy
    # the result_set comes back empty 
```

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:37:34.680

您的问题是您正在`in`向后使用该语句。它用于查找具有在列表中的字段的行，而不是查找具有包含字符串的列表的行。

换句话说，你所拥有的是生成：

```
select pk from table where array_column NOT IN(paramstring); 
```

根据[https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/QAfTDrNYaFI](https://groups.google.com/forum/?fromgroups=#!topic/sqlalchemy/QAfTDrNYaFI) SQLAlchemy 尚不支持查询 Postgres 数组列中的项目。

他们建议使用原始过滤器来完成您想要的：

```
select([the_table.c.pk]).where(text("array_column @> ARRAY[:element_value]"))).params(element_value='paramstring') 
```

# java - 无法使用相同的端口和不同的 IP 迭代和绑定套接字

> ID：13019206
> 
> 赞同：0
> 
> 时间：2012-10-22T20:21:09.443
> 
> 标签：java, android, sockets

我试图检查本地网络上的 IP 是否打开了给定的 PORT。为此，我遍历子网中的所有 IP。这就是我的代码的样子：

```
 for(int i = 0; i<256; i++){
        Socket kkSocket = new Socket();
        try{
            kkSocket.bind(null);
            InetSocketAddress temp = new InetSocketAddress("10.0.0.", PORT);
            kkSocket.connect(temp, 10);

            Log.i("Scan", "found " + temp.getHostName());

        }catch(Exception e){ }
    } 
```

这在我的计算机上完美运行，但是当我尝试在我的 Android 设备上运行它时，它无法运行。我尝试使用 Thread.sleep(100)、kkSocket.close() 和 kkSocket.keepAlive(false) 来延迟它，但似乎没有任何效果。如果我不迭代并且只是尝试连接到 10.0.0.45（这是正确的 IP）但那是黑客攻击（我不应该知道要测试哪个 IP），它会起作用。有谁知道是什么导致我的问题或如何解决它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:28:50.827

这行不应该：

```
InetSocketAddress temp = new InetSocketAddress("10.0.0.", PORT); 
```

是：

```
InetSocketAddress temp = new InetSocketAddress("10.0.0." + i, PORT); 
```

# c# - 按下按钮后执行 KeyDown 方法

> ID：13019207
> 
> 赞同：0
> 
> 时间：2012-10-22T20:21:16.360
> 
> 标签：c#, button, keydown

好的，我的最后一个问题并不是很清楚，所以我删除了它并提出了这个问题。我正在制作游戏“蛇”。我想要的是，在我选择了一个难度之后，表单上的按键需要起作用（你选择了一个难度，蛇被画出来并开始移动，为了让它移动到你喜欢的方向，你按下箭头键）在我添加困难之前，它工作得很好。现在我选择了难度并想玩游戏后，蛇不动，我的按键在程序中没有反应。

所以我的问题=选择难度后keyDown不起作用。

```
private void btnNormal_Click(object sender, EventArgs e)
{
  timer1.Interval = 250;
  btnNormal.Visible = false;
  btnEasy.Visible = false;
  btnHard.Visible = false;
  diffLabel.Visible = false;
  timer1.Enabled = true;
  down = false;
  up = false;
  right = true;
  left = false;

}

private void btnHard_Click(object sender, EventArgs e)
{
  timer1.Interval = 10;
  btnNormal.Visible = false;
  btnEasy.Visible = false;
  btnHard.Visible = false;
  diffLabel.Visible = false;
  timer1.Enabled = true;
  down = false;
  up = false;
  right = true;
  left = false;
}

private void btnEasy_Click(object sender, EventArgs e)
{
  timer1.Interval = 500;
  btnNormal.Visible = false;
  btnEasy.Visible = false;
  btnHard.Visible = false;
  diffLabel.Visible = false;
  timer1.Enabled = true;
  down = false;
  up = false;
  right = true;
  left = false;
}

private void Form1_KeyDown(object sender, KeyEventArgs e)
{

  if (e.KeyData == Keys.Down && up == false)
  {
    down = true;
    right = false;
    up = false;
    left = false;
  }

  if (e.KeyData == Keys.Up && down == false)
  {
    down = false;
    right = false;
    up = true;
    left = false;
  }

  if (e.KeyData == Keys.Right && left == false)
  {
    down = false;
    right = true;
    up = false;
    left = false;
  }

  if (e.KeyData == Keys.Left && right == false)
  {
    down = false;
    right = false;
    up = false;
    left = true;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:25:56.450

尝试将属性设置[`From.KeyPreview`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.keypreview.aspx#Y0)为`true`.

从上面的链接中，msdn 谈到了这一点：

> 如果表单将接收所有关键事件，则为 true；如果窗体上当前选定的控件接收到键事件，则返回 false。默认值为假。
> 
> 当此属性设置为 true 时，表单将接收所有 KeyPress、KeyDown 和 KeyUp 事件。在窗体的事件处理程序完成对击键的处理之后，击键被分配给具有焦点的控件。例如，如果 KeyPreview 属性设置为 true，并且当前选定的控件是 TextBox，则在表单的事件处理程序处理击键后，TextBox 控件将接收被按下的键。

总之你的问题是焦点。接收 KeyDown 事件的控件可能没有焦点。所以我们强制表单总是接收 KeyDown 事件，不管接收事件的控件是否获得焦点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:27:07.767

没有所有代码来测试它，很难通过判断......

但是，我的猜测是您在表单中添加了按钮。在这种情况下，如果按钮仍然具有焦点，则 KeyDown 事件不会发送到表单，而是发送到按钮。

我会将 Form1_KeyDown 方法转换为 OnKeyDown 基本方法的覆盖，并在构造函数中将 PreviewKeys 设置为 true。

```
public MyForm()
{
    InitializeComponent();
    KeyPreview = true;
}

protected override void OnKeyDown(KeyEventArgs e)
{
    // Insert key presses logic
    base.OnKeyDown(e);
} 
```

# css - 如何根据媒体查询更改浮动 div 的顺序？

> ID：13019209
> 
> 赞同：4
> 
> 时间：2012-10-22T20:21:24.080
> 
> 标签：css, responsive-design, media-queries

我正在研究一个包含三列的响应式设计。对于 700 像素以下的屏幕尺寸，通过将所有列宽设置为 100%，这些列会按照它们在 HTML 中出现的顺序跳到彼此之上：div1、div2 然后 div3。

我将如何设置 div 在媒体查询中以不同的顺序显示？

div 基于流体十二列网格，具有窄的左右列和宽的中央列。它们都向左浮动，因此按标记顺序显示。但中间栏包含主要内容，左右栏包含辅助信息。因此，一旦我的布局移动到单列，我希望左右 div 显示在中央 div 下方。我接近这个错误吗？

这是标记...

```
<div class="container">
  <div class="row">
    <div class="threecol">
      <p>Column 1</p>
    </div>
    <div class="sixcol">
      <p>Column 3</p>
    </div>
    <div class="threecol last">
      <p>Column 3</p>
    </div>
  /div>
</div>

.row {
width: 100%;
max-width: 1140px;
min-width: 701px;
margin: 0 auto;
overflow: hidden;
}

.threecol, .fourcol {
margin-right: 3.8%;
float: left;
min-height: 1px;
}

.row .threecol {
width: 22.05%;
}

.row .fourcol {
width: 30.75%;
}

.last {
margin-right: 0px;
}

@media handheld, only screen and (max-width: 700px) {

.row, body, .container {
width: 100%;
min-width: 0;
}

.row .threecol, .row .fourcol {
width: auto;
float: none;
}

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T14:20:55.933

我现在找到了解决方案。

我使用[enquire.js](http://wickynilliams.github.com/enquire.js)在 javascript 中模拟媒体查询，然后使用 jQuery .insertBefore( [)](http://api.jquery.com/insertBefore/)和[.insertAfter()](http://api.jquery.com/insertAfter/)来切换 div 的顺序。

这是一种享受。

这是代码：

```
<div class="container">
    <div class="row">
        <div class="threecol" id="tertiary-col">
            <p>Column 1</p>
        </div>
        <div class="sixcol" id="main-col">
            <p>Column 3</p>
        </div>
        <div class="threecol last" id="secondary-col">
            <p>Column 3</p>
        </div>
    </div>
</div>

<script type="text/javascript">
    enquire.register("screen and (max-width:850px)", {
        match : function() { 
                $('#tertiary-col').insertAfter('#secondary-col');
        },
        unmatch : function() {
                $('#tertiary-col').insertBefore('#main-col');
        }
    }).listen();
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T23:17:44.043

将来，您会想要使用[Flexbox](http://zomigi.com/blog/future-css-layout-fowd/)，这非常适合。但是，它没有得到可靠的支持，所以我知道的最佳选择是使用[appendAround](https://github.com/filamentgroup/AppendAround) jQuery 插件将左列移动到基于媒体查询的不同容器 div。

# ruby - 具有名为“类型”的方法的 Web 服务。如何使用红宝石消费它？

> ID：13019210
> 
> 赞同：2
> 
> 时间：2012-10-22T20:21:24.380
> 
> 标签：ruby, soap4r

我正在使用 ruby​​ (1.8.7) 和 soap4r (1.5.8) 使用 Web 服务。Web 服务有一个名为“type”的方法，我无法获取该值。

```
@driver=SOAP::WSDLDriverFactory.new(WSDL_URL).create_rpc_driver
result = @driver.GetJob(:jobid => "123")
puts "jobname is #{result.name}"
puts "jobtype is #{result.type}" 
```

第四行给了我“警告：不推荐使用 Object#type；使用 Object#class”。我知道 Object.type 已被弃用。我想调用从 Web 服务获得的结果的“类型”方法。我不拥有网络服务，所以我无法更改它。

任何帮助表示赞赏。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:38:19.593

类型方法可能是使用 method_missing 调用的，当该方法存在于 Object 时，此机制不起作用。如果是这样，这个小猴子修补程序摆脱了 Object.type：

```
class Object
  undef_method :type
end 
```

将此代码放在调用 Web 服务之前的某个位置，它应该可以工作。

解决它的另一种方法是升级到 ruby​​ 1.9。类型方法没了！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T22:48:44.987

只是猜测，但怎么样`result['type']`？或者`result[:type]`？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T22:17:39.313

我会寻找一种方法，允许您传入代表所需属性的符号。会是这样的

```
puts "jobtype is #{result.some_method(:type)}" 
```

或（不太可能）

```
puts "jobtype is #{result.some_method("type")}" 
```

@froderik 的回答可能会在一种特定情况下对您有所帮助，但是如果您想要的属性被称为“类”、“发送”或“初始化”怎么办？除非设计不当，soap 库必须以某种方式处理这种情况。

# unit-testing - 将 html 与 testacularjs 集成时出错

> ID：13019215
> 
> 赞同：8
> 
> 时间：2012-10-22T20:21:43.710
> 
> 标签：unit-testing, continuous-integration, jasmine, fixtures

如何将 (html) 固定装置与 testacular 集成？是否有执行基于 DOM 的测试的建议或者它是一种反模式？

目标：我正在尝试测试一个自定义模块，它解析 DOM 树并创建一个新的数据结构。DOM 树可以是动态的（类似于 html/markdown 编辑器的内容），因此不适合端到端测试

问题：我正在尝试使用 jasmine-jquery 进行此 DOM 测试，在我的 testacular.conf.js 中，我有允许将 html 文件加载到浏览器中的部分。

```
 // list of files / patterns to load in the browser
files = [
  JASMINE,
  JASMINE_ADAPTER,
  'test/spec/**/*.js',
  'test/fixtures/*.html' **/* Needs to be included here to be served */**
]; 

```

但是，在命令行上的测试运行程序中，当我删除 html 夹具时，我收到以下错误消息（甚至在我编写任何 jasmine-jquery 代码来加载夹具之前）：

```
 Chrome 22.0 **ERROR**
    Uncaught SyntaxError: Unexpected token < at /Users/myUser/myProject/test/fixtures/fixture_template.html:1 Chrome 22.0: Executed 0 of 0 ERROR (0.143 secs / 0 secs) 

```

***编辑***：问同样问题的另一种方式：我如何让 testacular 服务于 html 而不会炸毁测试运行器？

正如我上面提到的，我需要在配置中包含“test/fixtures/*.html”，但测试运行器会爆炸。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-26T05:24:54.007

当前版本的 testacularjs 不能支持这个。但是，testacularjs(Vojta Jina) 的作者建议我使用代理解决方案通过不同的 Web 服务器提供 html 来解决此问题。对于那些好奇的人，这里是完成这项工作的端到端步骤。

*   首先通过运行如下命令来运行网络服务器

    > python -m SimpleHTTPServer 3502 &

*   将您的夹具文件放在适当的位置。我的是 test/fixtures/first.html

    > 现在您应该能够访问 [http://localhost:3502/test/fixtures/first.html] 并在检查页面源代码时看到标记

*   编辑 testacular.conf.js 以添加配置块

    ```
     proxies = {
    '/fixtures' : 'http://localhost:3502/'
    }; 
    ```

*   编辑您的 jasmine 单元测试，使其具有如下所示的块

    ```
     beforeEach(function(){
            jasmine.getFixtures().fixturesPath = '/fixtures/test/fixtures';
        }); 
    ```

现在您应该可以加载夹具/读取夹具了

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-07T16:13:42.503

如[http://testacular.github.com/0.6.0/config/files.html](http://testacular.github.com/0.6.0/config/files.html)所述，从 0.5.2 版开始，您可以使用新的配置语法：

```
files = [
  JASMINE,
  JASMINE_ADAPTER,
  'test/spec/**/*.js',
  {
    pattern: 'test/fixtures/*.html',
    watched: true,
    included: false,
    served: true
  }
]; 
```

我刚试过，对我来说效果很好。

# networking - 手动使用 TUN\TAP 虚拟接口

> ID：13019217
> 
> 赞同：0
> 
> 时间：2012-10-22T20:21:49.653
> 
> 标签：networking, protocols, vpn, tunnel

我找不到任何关于 TUN/TAP 如何工作的信息。我想在两台主机之间创建一个简单的隧道，并在它们之间建立一个虚拟地址空间（类似于 GRE 隧道）。我不想要任何加密或任何 VPN。

我的问题是我什至不知道 TUN 说什么协议。当创建隧道接口并将数据发送到另一端时，侦听“tun server”（隧道端点）在说什么协议，您连接到哪个端口？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T04:20:04.350

您可以参考[tun/tap 的内核文档](http://www.kernel.org/doc/Documentation/networking/tuntap.txt)的介绍和使用 tun/tap 创建隧道的工作示例的[vtun 项目](http://vtun.sourceforge.net/)。

# arrays - Powershell - 像数组一样

> ID：13019218
> 
> 赞同：8
> 
> 时间：2012-10-22T20:22:00.900
> 
> 标签：arrays, powershell, sql-like

对于每个正在处理的文件，都会检查其名称是否满足条件。例如，给定以下过滤器列表：

```
$excludeFiles = @"
aaa.bbb
ccccc.*
ddddd???.exe
"@ | SplitAndTrim; 
```

如果文件与任何行匹配，它应该从处理中排除文件。尽量避免`match/regex`，因为这个脚本需要被不知道它的人修改，并且有几个地方需要实现它。

`$excludedFiles`和类似的被故意定义为here-string。它允许最终用户/操作员直接从 CMD/Powershell 窗口粘贴一堆文件名。

看来Powershell不接受`-like`数组，所以我不能这样写：

```
"ddddd000.exe" -like @("aaa.bbb", "ccccc.*", "ddddd???.exe") 
```

我错过了一个选项吗？如果 Powershell 本身不支持它，那么实现它的最简单方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2016-08-12T10:59:50.370

这是已接受答案中模式的简短版本：

```
($your_array | %{"your_string" -like $_}) -contains $true 
```

应用于OP中的案例获得

```
PS C:\> ("aaa.bbb", "ccccc.*", "ddddd???.exe" | %{"ddddd000.exe" -like $_}) -contains $true
True 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-22T20:56:25.230

您可以针对名称集合执行模式匹配，但不能针对模式列表执行模式匹配。尝试这个：

```
foreach($pattern in $excludeFiles)
{
    if($fileName -like $pattern) {break}
} 
```

以下是如何将其包装到函数中：

```
function like($str,$patterns){
    foreach($pattern in $patterns) { if($str -like $pattern) { return $true; } }
    return $false;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T22:38:08.143

我想你可以使用`Get-ChildItem` `-Exclude`参数：

```
Get-ChildItem $theFileToCheck -exclude $excludeFiles 
```

如果您有要检查的文件数组，则`Get-ChildItem`接受路径数组：

```
Get-ChildItem $filesToCheck -exclude $excludeFiles 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-04T18:23:43.560

$excludeFiles.Where{$stringToTest -like $_}

Powershell 数组有一个 Where 方法可以接受表达式输入，因此使用 {} 而不是 ()。输入一个字符串进行测试，它将使用标准管道遍历数组，因此 $_ 表示数组的元素。

输出匹配元素的列表。

```
PS H:\> $excludeFiles = @("aaa.bbb", "ccccc.*", "ddddd???.exe")
PS H:\> $stringToTest = "ddddd000.exe"
PS H:\> $excludeFiles.Where{$stringToTest -like $_}
ddddd???.exe 
```

# jquery - 需要选择列表来显示值，而不是文本

> ID：13019220
> 
> 赞同：0
> 
> 时间：2012-10-22T20:22:04.320
> 
> 标签：jquery, select

[http://jsbin.com/uluwum/3/edit](http://jsbin.com/uluwum/3/edit)

我有一个美国州的选择列表，我只希望在默认情况下和选择不同的州后显示两个字母缩写版本。So it needs to display the selected value instead of the selected text when a select list is in its default state, but still display the option text when clicked on, but I can't figure out how to do that. 我不认为这会是一件困难的事情，但要么我尝试的搜索太离谱以至于没有返回相关结果，要么这是一个不寻常的请求。

我把我极其蹩脚的尝试在上面的 JSBin 示例中都注释掉了。

提前致谢！

保罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:36:10.753

```
$(function(){
        $('#states option').each(function(){
            $(this).attr('data-text', $(this).text());
            if($(this).is(':selected') == false)
            {
               $(this).text($(this).val());
            }        
        });

        $('select').on('change', function(){
            reset();
            var selected = $('option:selected');
            selected.text(selected.attr('data-text'));
        });

        function reset()
        {
          $('#states option').each(function(){
            $(this).text($(this).val());
          });  
        }
    }); 
```

[http://jsfiddle.net/UMs98/2/](http://jsfiddle.net/UMs98/2/)

这应该做你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:42:57.353

这是我能得到的最接近的结果：**[jsFiddle example](http://jsfiddle.net/j08691/YbTgM/)**

```
$('select option').each(function() {
    $(this).data('abbr', $(this).val());
    $(this).data('full', $(this).text());
    $(this).text($(this).val());
});
$('select').change(function() {
    $('option:selected', this).text($('option:selected', this).data('full'));
    $('option:not(":selected")', this).each(function(){
        $(this).text($(this).data('abbr'));
    });
});​ 
```

# cloudbees - 是否有特定于分支的徽章图标？

> ID：13019222
> 
> 赞同：1
> 
> 时间：2012-10-22T20:22:07.870
> 
> 标签：cloudbees, buildhive

我目前正在使用 BuildHive，并在我的自述文件中显示*可嵌入的构建状态图标。*通常情况下，拉取请求无法构建并且状态图标变为红色，而主服务器仍然正常。

Travis-CI 有[每个分支的构建状态图像](http://about.travis-ci.org/docs/user/status-images/)，所以我想知道 BuildHive 是否有类似的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T13:38:07.140

我认为没有。这个问题可能比状态徽章图标插件更广泛。Jenkins 具有线性构建历史，因此支持从多个分支（`**`在本例中为分支规范）构建的 SCM 插件（如 Git）可以开始新构建，但不能真正告诉核心它们所指的内容。例如，一个常用的核心选项是丢弃除最后一个稳定构建之外的所有构建，但如果一个分支是稳定的，而 master 不是，这将是不合理的！

可能需要 Jenkins 中的一个新 API，以便构建历史可以形成一个镜像 VCS 图的树 - 假设已经保留了足够的历史构建以显示共同的祖先 - 或者更简单地根据分支分组到桶中名称（和/或存储库），通过某种方式自动清理过时的存储桶，例如合并的拉取请求。

矩阵项目类型实际上已经接近此功能，但它是为并行运行构建的许多预定义变体而设计的，这并不完全正确。（事实上​​，您可能很想构建矩阵项目的所有分支。）

BuildHive 的结果是，Jenkins 中似乎没有任何东西可以支持您所要求的那种功能。它也许可以在没有一般支持的情况下实现特定于分支的徽章，通过状态徽章图标插件的自定义变体，该插件还执行分支敏感的构建和工件历史修剪。

# iphone - 从 HomeDirectory 中删除多个项目

> ID：13019224
> 
> 赞同：2
> 
> 时间：2012-10-22T20:22:15.140
> 
> 标签：iphone, ios, uicollectionview

我想从我的 HomeDirectory 中删除多个项目。

我正在`UICollectionView`使用`allowsMultipleSeletion = YES;`

之后，我将`NSIndexPath`所选项目保存在`NSMutableArray`.

我正在尝试使用此代码

```
NSString *path = [NSHomeDirectory() stringByAppendingString:@"/Documents/Photos/"]

NSFileManager *manager = [NSFileManager defaulManager]

NSString *result = [path stringByAppendingFormat:@"%@"[manager contentsOfDirectoryAtPath:path error:nil] objectAtIndex:0];

[manager removeItemsAtPath:result]; 
```

问题是我如何传递`NSIndexPath`Array on `objectAtIndex`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:50:31.497

您好，这是您的代码

```
NSString *path = [NSHomeDirectory() stringByAppendingString:@"/Documents/Photos/"]

NSFileManager *manager = [NSFileManager defaulManager]

for(NSIndexPath *indexPath in array)
{

       NSString *result = [path stringByAppendingFormat:@"%@"[manager  contentsOfDirectoryAtPath:path error:nil] objectAtIndex:indexPath.row];        

    [manager removeItensAtPath:result];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:40:31.360

使用该`item`属性从`NSIndexPath`.

# python - 变量中的 Python 正则表达式

> ID：13019225
> 
> 赞同：2
> 
> 时间：2012-10-22T20:22:17.217
> 
> 标签：python, regex, exception

**代码迭代 #2**

`stringVar = r'string'`通过使用效果很好将 var1 更改为原始字符串。使用下面的代码，我现在得到了一个例外：

```
Traceback (most recent call last):
  File "regex_test.py", line 8, in <module>
    pattern = re.compile(var2 + "(.*)")
  File "/usr/lib/python2.7/re.py", line 190, in compile
    return _compile(pattern, flags)
  File "/usr/lib/python2.7/re.py", line 242, in _compile
    raise error, v # invalid expression
sre_constants.error: unbalanced parenthesis 
```

--

```
#!/usr/bin/python

import re

var1 = r'\\some\String\to\Match'
var2 = '\\\\some\\String\\'

pattern = re.compile(var2 + "(.*)")
found = pattern.match(var1, re.IGNORECASE)

if found:
    print "YES"
else:
    print "NO" 
```

* * *

我试图在我的正则表达式中包含一个变量。这个问题与[另一个问题有关](https://stackoverflow.com/questions/6930982/variable-inside-python-regex)，但通过使用编译模式与匹配中的变量略有不同。根据我读过的所有内容，下面的示例代码应该可以工作。

```
#!/usr/bin/python

import re

var1 = re.escape('\\some\String\to\Match') # A windows network share
var2 = "\\\\some\\String\\"

print var1 # Prints \\some\\String\ o\\Match
print var2 # Prints \\some\String\

pattern = re.compile(var2)
found = pattern.match(var1 + "(.*)", re.IGNORECASE)

if found:
    print "YES"
else:
    print "NO" 
```

当我打印出我的变量时，我看到了一些奇怪的行为。我认为 re.escape 会在字符串中转义所有需要的字符。

当我在 Ubuntu 12.4.1 上执行 Python 2.7 中的代码时，出现以下异常

```
Traceback (most recent call last):
  File "regex_test.py", line 11, in <module>
    pattern = re.compile(var2)
  File "/usr/lib/python2.7/re.py", line 190, in compile
    return _compile(pattern, flags)
  File "/usr/lib/python2.7/re.py", line 242, in _compile
    raise error, v # invalid expression
sre_constants.error: bogus escape (end of line) 
```

我错过了什么导致异常被抛出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:26:30.693

Python`\t`是*单个*字符。您可能想使用`r''`（您可以谷歌“原始字符串”以了解更多信息）来避免该问题。

角色也是如此`\`。

为了证明这一点，`re.escape`请在输入字符串之前尝试在其中打印字符串。这应该是有道理的。

这就是你要找的：

```
var1 = re.escape(r'\\some\String\to\Match') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:30:26.340

`re.escape`用于转义字符串以用作正则表达式，但您转义`var1`然后`var2`用作正则表达式。

我认为以下是您要完成的工作：

```
var1 = r'\\some\String\to\Match'
var2 = re.escape('\\\\some\\String\\')
pattern = re.compile(var2 + '(.*)', re.IGNORECASE)
found = pattern.match(var1) 
```

请注意，这`r'\\some\String\to\Match'`是一个[原始字符串文字](http://docs.python.org/reference/lexical_analysis.html#string-literals)，但您不能使用它，`var2`因为它需要以反斜杠结尾。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:34:05.480

`re.escape`在这种情况下不会让你的生活更轻松：

```
In [68]: re.escape('\\\\some\\String\\')
Out[68]: '\\\\\\\\some\\\\String\\\\'

In [71]: re.escape(r'\\some\String\to\Match')

Out[71]: '\\\\\\\\some\\\\String\\\\to\\\\Match' 
```

显然，那里有太多的反斜杠。

可以仅使用原始字符串来执行此操作：

```
In [62]: import re

In [63]: re.match(r'\\\\some\\String\\(.*)', r'\\some\String\to\Match').group(1)
Out[63]: 'to\\Match' 
```

# jquery - 要显示的数组中的 jquery div

> ID：13019229
> 
> 赞同：-1
> 
> 时间：2012-10-22T20:22:28.910
> 
> 标签：jquery

`DIV`我有一个如下的 id数组，`CSS`它们都在下面的一个类中`display:none`。

```
var paintDivs = ["div_2ndSubCategoryID","div_3rdSubCategoryID","div_4thSubCategoryID","div_ColorNameID","div_ColorNoID","div_PaintSizeID"]; 
```

长话短说，我现在想要的是显示所有`DIV`s in `paintDivs`。

下面是我所拥有的。循环迭代工作正常，但是其中的各个`DIV`s`paintDivs`仍未显示。

```
jQuery.each(paintDivs, function(idx, valIs){
  $('#' + valIs).css('display');
}); 
```

我什至尝试通过在 CSS 中创建另一个名为的类，`showThis`然后在下面设置`display:block`并尝试，但仍然没有成功。

```
jQuery.each(paintDivs, function(idx, valIs){
  $('#' + valIs).attr('class','showThis');
}); 
```

我究竟做错了什么？任何见解将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:24:31.037

您正在使用`.css`. 使用如下设置器，

```
jQuery.each(paintDivs, function(idx, valIs){
  $('#' + valIs).css('display', 'block');
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T20:23:45.127

您可以简单地使用[`show()`](http://api.jquery.com/show/)：

```
$.each(paintDivs, function(idx, valIs) {
    $("#" + valIs).show();
}); 
```

否则，要更改 CSS 样式，请[`css()`](http://api.jquery.com/css/)正确使用：

```
$.each(paintDivs, function(idx, valIs) {
    $("#" + valIs).css("display", "block");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-22T20:26:00.200

这一行：

```
 $('#' + valIs).css('display'); 
```

获取显示属性的值，你想设置它，这意味着你应该这样做来实际设置它：

```
 $('#' + valIs).css('display','block'); 
```

或者更简单地说，只需使用：

```
 $('#' + valIs).show(); 
```

或者，如果你想变得花哨，你可以：

```
$("#" + valIs).fadeIn(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T20:27:20.757

假设 '# + ValIs' 是您想要的 id，将显示从 none 更改为 normal 就像这样简单：

```
jQuery.each(paintDivs, function(idx, valIs){
  $('#' + valIs).css('display','normal');
}); 
```

从[文档](http://api.jquery.com/css/)

```
$('#example').css(propertyName) 
```

返回 propertyName 的值

```
$('#example').css(propertyName, value) 
```

将 propertyName 设置为 value

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-22T21:03:57.767

无需迭代，您可以在选择器中使用数组连接

```
var divs = ['test1','test3','test5'];
$('#' + divs.join(',#')).show();​ 
```

这将构建您的选择器

```
$('#test1,#test3,#test5') 
```

[http://jsfiddle.net/wirey00/JrZBJ/](http://jsfiddle.net/wirey00/JrZBJ/)

# javascript - 骨干显示集合（集合的集合可能？）

> ID：13019231
> 
> 赞同：1
> 
> 时间：2012-10-22T20:22:32.010
> 
> 标签：javascript, collections, backbone.js

.js 文件；

```
var dataModel = Backbone.Model.extend({
            defaults : {
                dataID : 'unknown',
                text : 'unknown'
            }
        });
        var LinkCollection = Backbone.Collection.extend({
            model : dataModel
        }); 
```

假设集合大小为 8。我想一次显示 3 个。由于脚本的结构，我需要将集合项划分为单独的 div。

.html 文件；

```
<div class="item">
<div class="carousel-subItem">  <-- Collection item #1
   <span>{{dataID}}</span> <br /> <span>{{text}}</span>
</div>
<div class="carousel-subItem">  <-- Collection item #2
   <span>{{dataID}}</span> <br /> <span>{{text}}</span>
</div>
<div class="carousel-subItem">  <-- Collection item #3
   <span>{{dataID}}</span> <br /> <span>{{text}}</span>
</div>
</div>

<div class="item">
<div class="carousel-subItem">  <-- Collection item #4
   <span>{{dataID}}</span> <br /> <span>{{text}}</span>
</div>
<div class="carousel-subItem">  <-- Collection item #5
   <span>{{dataID}}</span> <br /> <span>{{text}}</span>
</div>
<div class="carousel-subItem">  <-- Collection item #6
   <span>{{dataID}}</span> <br /> <span>{{text}}</span>
</div>
</div>

<div class="item">
<div class="carousel-subItem">  <-- Collection item #7
   <span>{{dataID}}</span> <br /> <span>{{text}}</span>
</div>
<div class="carousel-subItem">  <-- Collection item #8
   <span>{{dataID}}</span> <br /> <span>{{text}}</span>
</div>
</div> 
```

我很难动态地创建这个 html 结构。（因为集合大小可以变化......结构应该是完全动态的等；

```
 {{#each dataModel}}
    // code goes here, to create the above structure.. 
 {{/each}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:31:47.570

也许这样的事情可以帮助你：

```
<script type="text/tempalte" id="template">

<% var len = items.length, group = 3, i; %>
<% for (i = 0; i <len; i += 1) { %>
    <% if (i % group === 0) { %>
        <div class="item">
    <% } %>
        <div class="carousel-subItem"> 
            <span><%= items[i].dataID %></span> <br /> <span><%= items[i].text %></span>
        </div>
    <% if ((i % group === group-1) || (i === len -1)) { %>  
        </div>
    <% } %>
<% } %>
</script> 
```

我假设您想在使用 Backbone 时使用 Underscore。items 集合看起来像这样，应该接近 Backbones 的观点：

```
var items = [
    { dataID : '1', text : 'bla' },
    { dataID : '2', text : 'blab' },
    { dataID : '3', text : 'gulp' },
    { dataID : '4', text : 'golp' },
    { dataID : '5', text : 'bla' }
];

// compiling the template
var template = _.template($('#template').html());
console.log(template(items)); 
```

输出如下所示：

```
<div class="item">

        <div class="carousel-subItem"> 
            <span>1</span> <br /> <span>bla</span>
        </div>

        <div class="carousel-subItem"> 
            <span>2</span> <br /> <span>blab</span>
        </div>

        <div class="carousel-subItem"> 
            <span>3</span> <br /> <span>gulp</span>
        </div>

        </div>

        <div class="item">

        <div class="carousel-subItem"> 
            <span>4</span> <br /> <span>golp</span>
        </div>

        <div class="carousel-subItem"> 
            <span>5</span> <br /> <span>bla</span>
        </div>

        </div> 
```

我可以补充一点，一个更好的方法是拥有一个渲染“carousel-subItem”-div 的 ItemView 和一个负责将渲染的 ItemView 组合到容器中的 CollectionView。我认为 Backbone.Marionette 就是这样。也许你想检查一下。当然，您也可以自己构建类似的东西。

# sql-server - DateDiff 函数 SQL Server

> ID：13019233
> 
> 赞同：2
> 
> 时间：2012-10-22T20:22:35.377
> 
> 标签：sql-server, tsql, datediff

如何从`GETDATE()`函数中减去 3 个月？

我正在尝试做的是在本月前 3 个月获取该月的最后一天。因此，如果今天是 10.22.2012 我如何从当前日期减去 3 个月并打印该月的最后一天，所以我希望得到这个日期：07.31.2012？

这是我到目前为止的内容，但它只打印上个月的最后一天：

```
DATEADD(MILLISECOND, -3,
DATEADD(MONTH, DATEDIFF(MONTH, -4, GETDATE()), 0)) 
```

不打印我需要的东西。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T20:25:38.353

当月前 3 个月的最后一天

```
DATEADD(M,DATEDIFF(M,0,GETDATE())-2,0)-1 
```

# mysql - 在数据来自文件的远程服务器上插入 mysql 表

> ID：13019244
> 
> 赞同：0
> 
> 时间：2012-10-22T20:23:11.927
> 
> 标签：mysql, insert

我正在尝试将数据插入 MySQL 表。该表只有两列：id 和 name。我的文本文件包含我要加载的所有名称，以换行符分隔。MySQL 表基于 Amazon 云。

有没有比为每一行编写插入语句更简单的方法将数据加载到表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T06:58:01.813

好吧，如果您有一个文本文件，那么我将使用简单的方法。我用 StreamReader 读取了那个文件：

```
string row = null;
                using (StreamReader sr = new StreamReader(path))
                {
                    while ((row = sr.ReadLine()) != null)
                    {
                        string[] words = row.Split(' ');

                        foreach (string word in words)
                        {
                        //do what ever you want
                        //you have word[0] as ID and word[1] as name                              
                        }
                    }
                } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:30:50.490

试试 MySQL [LOAD DATA INFILE](http://dev.mysql.com/doc/refman/5.1/en/load-data.html)

```
LOAD DATA INFILE users.txt INTO TABLE users LINES TERMINATED BY '\n'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:51:04.043

选项：

1.  获取像 HeidiSQL 这样的应用程序可以为您执行此操作。
2.  我最喜欢的 kludge 是编写一个 bash 脚本将输入转换为一系列 INSERT 语句，然后使用 mysql CLI 运行它。

# jquery - 将助手拖动到 iframe 之外时，不会触发 jQuery-ui 可拖动拖动事件

> ID：13019245
> 
> 赞同：0
> 
> 时间：2012-10-22T20:23:12.883
> 
> 标签：jquery, jquery-ui, jquery-ui-draggable

[https://www.facebook.com/anuary/app_295048007277420](https://www.facebook.com/anuary/app_295048007277420) “Watch Trailer & Clips”是可拖动对象的助手。

如果鼠标光标移动（同时拖动）到 iframe 之外，则不再更新事件。

它在无 iframe 的环境中运行良好，[https://dev.anuary.com/c5e22f1a-e772-5ad6-afff-9202af28e644/](https://dev.anuary.com/c5e22f1a-e772-5ad6-afff-9202af28e644/)。

是否有可以解决此行为的设置？我怀疑 jQuery-ui 鼠标移动事件绑定到`document`而不是`window`导致问题的 .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T07:37:53.167

您可以尝试在 iframe 鼠标按下中使用文档鼠标移动和鼠标向上事件，如下所示。

```
element.bind('mousedown.' + this.widgetName, function(event){
                        _mouseMoveDelegate = function(e){
                            return _mouseMove();
                        };
                        _mouseUpDelegate = function(e){
                            return _mouseUp();
                        };
                      $(document).bind('mousemove.' + this.widgetName, _mouseMoveDelegate).bind('mouseup.' + this.widgetName, _mouseUpDelegate);
}); 
```

# asp.net - Asp.net SQL Server 用户模拟

> ID：13019248
> 
> 赞同：0
> 
> 时间：2012-10-22T20:23:22.290
> 
> 标签：asp.net, sql-server, sql-server-2005

我想知道是否有人可以指出我正确的方向。我们目前正在寻求更新一个使用 SQL Server 2005 作为其数据库的 ASP.NET 应用程序。我们需要提供强大且一致的功能，以防止某些用户从数据库中创建、更新、删除某些记录。

不幸的是，该应用程序不是使用 OO 概念编写的，而是支持直接从文件后面的网页代码调用的许多数据访问存储过程。由于存储过程的数量庞大，我们更愿意研究数据库触发器来实现我们的安全性。

问题是; db 触发器是否有可能知道执行 sp 的特定应用程序用户（使用 db 中的自定义用户帐户表进行管理）？我们只需要一个id。用于连接到数据库的连接字符串对于所有用户都是相同的（取自 web.config），有没有办法连接到一些如何模拟用户或设置触发器可访问的特定变量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:01:27.897

如果应用程序使用 SqlConnection 来“登录”用户，然后使用相同的 SqlConnection 执行数据访问/更新，那么您可以使用 [`CONTEXT_INFO()`](http://msdn.microsoft.com/en-us/library/ms180125%28v=sql.105%29.aspx). 在“登录”过程中设置上下文，然后在数据访问/更新过程中检查它。请参阅[使用会话上下文信息](http://msdn.microsoft.com/en-us/library/ms189252%28v=sql.105%29.aspx)。

但是，如果应用程序使用 SqlConnection 来“登录”，缓存结果（可能在 cookie 中或在 ASP 会话状态中），然后使用不同的 SqlConnection 访问数据，那么就无法访问所需的登录信息 w/o应用支持。如果您可以找到创建 SqlConnection 对象的所有位置并将其重构为使用[工厂模式](http://en.wikipedia.org/wiki/Factory_method_pattern)，那么您可以通过调用来增加每个打开的连接以[设置上下文信息](http://msdn.microsoft.com/en-us/library/ms187768%28v=sql.105%29.aspx)，然后再将其返回给调用者以供使用，这也可以使用最小的应用程序更改。

# xml - 在 XML 配置文件不同的不同操作系统上运行 PHPUnit

> ID：13019249
> 
> 赞同：2
> 
> 时间：2012-10-22T20:23:27.400
> 
> 标签：xml, configuration, phpunit

是否可以在运行时处理的 PHPUnit XML 文件中存在配置差异，以便根据执行平台配置设置？例如，在 Ubuntu 上使用 Color，而不是在 Windows 中。

解释：

我正在使用不同的开发平台，并希望确保我们的代码适用于任一平台上的 Web 服务器。此外，我们使用的工具位于不同的平台上。例如，开发人员的内部后端服务器（PHPUnit、PHPDocs、Wiki、其他工具）位于 Ubuntu 计算机上。开发人员积极使用基于 Windows 的 PC。

当开发人员更改代码时，我们希望他们能够在将代码签入我们的存储库之前测试其代码是否有效。因此，他们在本地机器上运行 PHPUnit、PHP_CodeSniffer、PHPMD 和 PHPDocs 以查看是否可以提交。

然后，主系统将看到提交的代码，并将重新运行这些测试以及其他所有人在 Ubuntu 机器上的代码更改，用测试结果、代码覆盖率等更新公司范围的页面......这些测试甚至可能可以在具有不同操作系统/语言配置的不同计算机上运行。通过 Selenium 进行的 Web 浏览器测试也从此时开始，同样，跨许多不同的 Web 服务器/操作系统/浏览器版本。

随着我们引入新工具、不同项目等...，XML 文件随着排除文件、测试套件配置等而变化...因此，我们将此文件保留在源代码树中，以确保开发人员在使用时拥有最新的设置运行他们的测试。

我希望能够通过平台以不同的方式配置一些设置（这将适用于我们所有的组合，因为我可以设置正在使用的任何变量），而不必在源之后复制不同的文件以确保收到更改。

这是合理的，还是会使用像 Jenkins 这样的东西来帮助我避免这个问题？但是，我试图让 Windows PC 上的工具尽可能基本，以方便开发人员快速运行它们，否则他们将忽略该步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-18T07:05:08.140

这个答案比预期的要长，但它是合适的。快速的答案是只构建不同的配置文件。phpunitwindows7.xml

phpunitubuntu.xml

phpunitmacosx.xml

ETC...

但我认为你的问题是有这么多不同的配置，这样做会需要大量的维护，所以我首先要做的是用我想要的设置构建一个对象。将基础 phpunit.xml 加载到[SimpleXML](http://php.net/manual/en/simplexmlelement.attributes.php)对象中

```
$sxe = simplexml_load_file('phpunit.xml);
// Modify a node
$sxe->phpunit = '<tessuites....>';

// You can access an element's attribute just like this :
$attribute = $sxe->phpunit->attributes()->$att;

$sxe->phpunit->attributes()->$verbose = $phpunitSettings->verbose;

// Saving the whole modified XML to a new filename
$sxe->asXml('windows7-cookie-cutter-phpunit.xml'); 
```

每个开发人员都会根据他们的操作系统/项目等将他们的构建配置设置为适当的任何 phpunit 配置文件。

Jenkins 当然会帮助你做到这一点，因为你可以在你的 Ant 构建文件中运行这个脚本来在 phpunit 运行之前更新这些 phpunit 配置文件，而不是手动运行它。

您可能会做的另一件事是使用

```
<?php 
    header ("Content-Type:text/xml");
?> 
```

显示这样的动态文件

```
<phpunit setting="<?php echo $setting; ?>"

><!-- yada yada-->
</phpunit> 
```

动态文件仍然必须由 php 脚本访问，但可以使用 cUrl 轻松完成以获取内容 exe：

[http://yoursite.com/apps/phpunit-config.php?os=windows7&project=cookiecutterblog](http://yoursite.com/apps/phpunit-config.php?os=windows7&project=cookiecutterblog)

此外，如果您在开发人员机器上安装了 jenkins，则可以使用 Poll SCM 将其设置为每小时/每天运行一次，因此无论他们是否想使用它都没有关系，即使他们不知道，它仍然会被使用！

![在此处输入图像描述](../Images/b9ceca4e7585598370a939672ee72d7c.png)

如果您在 Eclipse 中使用 MakeGood 扩展，您可以预加载脚本来更新 phpunit 配置文件。

![补偿](../Images/aa3c2029a058d79b14bd7e7422d92ac3.png)

每次编辑然后保存文件时，它都可以在 IDE 中加载并轻松运行 ![在此处输入图像描述](../Images/41859865e6dab92161ae187dc7f8eb41.png)

这是我整理的[MakeGood IDE 设置教程。](http://www.youtube.com/watch?v=1qnWL52wt58)

我不确定开发人员是否会更容易，因为他们根本不会做任何事情......

# jsf - 检索已编辑单元格的行索引 和

> ID：13019250
> 
> 赞同：1
> 
> 时间：2012-10-22T20:23:27.957
> 
> 标签：jsf, primefaces

使用时`<p:rowEditor>`，如何检索已编辑单元格的行索引？

以下是相关代码：

```
<p:dataTable id="datasetParamDt" var="datasetParam" value="#{projectCampaignManagementMB.allParametersList}" editable="true" rowIndexVar="rowIndex">  
    <p:ajax event="rowEdit"  listener="#{projectCampaignManagementMB.onParameterValueEdit}" update=":campaignForm:growl" />  
    <p:ajax event="rowEditCancel" listener="#{projectCampaignManagementMB.onParameterValueCancel}" update=":campaignForm:growl"/>  

    <p:column headerText="Value">  
        <p:cellEditor>
            <f:facet name="output"> 
                <h:outputText value="#{projectCampaignManagementMB.paramValue}" />
            </f:facet> 
            <f:facet name="input"> 
                <p:inputText value="#{projectCampaignManagementMB.paramValue}" /> 
            </f:facet>     
        </p:cellEditor>
    </p:column> 

    <p:column headerText="Options" style="width:50px">  
        <p:rowEditor />
    </p:column>  
</p:dataTable> 
```

在简单的数据表中，我曾经使用`<f:param>`in a`<p:commandLink>`如下：

```
<f:param name="index" value="#{rowIndex}" /> 
```

但是，在我的情况下`<p:rowEditor>`，当用户验证方法中的编辑值时，如何获取行索引`onParameterValueEdit()`？

```
public void onParameterValueEdit(RowEditEvent event) {  
    int index = ... // index of the row to which the edited cell belongs    
    parametersValue.set(Integer.parseInt(index),paramValue);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:48:54.627

这种设计毫无意义。只需将组件值直接绑定到`parametersValue`列表即可。

```
<h:outputText value="#{projectCampaignManagementMB.parametersValue[rowIndex]}" />
...
<p:inputText value="#{projectCampaignManagementMB.parametersValue[rowIndex]}" /> 
```

这样，您也不再需要了解行索引，并且您可能也不再需要那些动作侦听器方法。我只会重命名属性名称`parameterValues`来修复不正确的英语。

* * *

**与具体问题无关**，即使您在这里没有使用任何验证，但是由于您提到了“验证”一词，我想补充一点，该验证应该由普通验证器执行，而不是由 action(listener) 方法执行. 使用`required`or`validator`属性或`<f:validator>`or`<f:validateXxx>`标签。

# c# - FFMPEG avcodec_find_decoder(2) (CODEC_ID_MPEG2VIDEO) 总是返回不完整的 AVCodec？

> ID：13019254
> 
> 赞同：2
> 
> 时间：2012-10-22T20:23:47.697
> 
> 标签：c#, c++, ffmpeg, libavcodec

我遇到了 FFMPEG (avcodec-54.dll) 的问题 1) 我写了一个 .NET 包装器。据我所知，它运作良好。2）我尝试解码一些东西......这就是问题所在：

```
...
  FFmpeg.avcodec_register_all();

  pAVCodec = FFmpeg.avcodec_find_decoder(CodecID.CODEC_ID_MPEG2VIDEO); //which is in int 2
  Console.WriteLine("CodecID " + (*pAVCodec).id);
  Console.WriteLine("CodecType " + (*pAVCodec).type);
  Console.WriteLine("CodecName " + (*pAVCodec).name);
.... 
```

* * *

没有抛出 EXC 并出现以下输出：

```
CodecID CODEC_ID_NONE
CodecType 1790854254
CodecName mpeg2video 
```

* * *

最让我困惑的是名字是正确的，但是id和type是错误的。在以前的版本中，如果 DLL 一切正常。这种行为是在新版本中提出的。任何猜测或调试提示？

# ruby-on-rails - 当 Rails 开发服务器启动时，MongoDB 错误“主机不是 Mongo::Connection 的有效选项”

> ID：13019255
> 
> 赞同：1
> 
> 时间：2012-10-22T20:23:47.187
> 
> 标签：ruby-on-rails, ruby-on-rails-3, mongodb, mongoid

启动 Rails 开发服务器时出现错误。我运行 rails 3.0.6 和 ruby​​ 1.8.7 (2012-06-29 patchlevel 370) [i686-linux]

我执行 rails 时控制台输出是这样的

```
=> Booting Mongrel
=> Rails 3.0.6 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
host is not a valid option for Mongo::Connection 
```

我主要关心的是这个错误“主机不是 Mongo::Connection 的有效选项”。我集成了 devise 1.5.2 以通过 Omniauth 运行 Facebook、Twitter 和 LinkedIn 登录，现在出现了这个 mongoDB 错误。

我在这个 Rails 应用程序中使用的 GemFile。

```
source 'http://rubygems.org'

gem 'rails', '3.0.6'
gem 'rake', '0.8.7'

gem 'mysql'
gem 'mysql2', "0.2.11"

gem 'mongrel'
gem 'jquery-rails', '>= 0.2.7' 
gem 'active_scaffold_vho' 
gem 'inherited_resources', '~> 1.2.1' 
gem 'has_scope', '~> 0.5.0' 
gem 'json_pure' 
gem 'formtastic', '~> 1.2.3' 
gem "devise", "1.5.2"
gem 'omniauth'
gem 'omniauth-twitter'
gem 'omniauth-facebook'
gem 'omniauth-linkedin'
gem 'omniauth-openid'
gem 'recaptcha', :require => 'recaptcha/rails' 

gem 'uuidtools', '~> 2.1.2'

gem 'capistrano', '~> 2.6.0' 

gem 'cgi_multipart_eof_fix'
gem 'fastthread'

gem 'mongoid', "~>2.0" #Mongoid
gem 'bson_ext', "~>1.3" #Mongoid

gem 'redis', "~> 2.2.0"
gem 'resque'
gem 'resque-scheduler'

gem 'SystemTimer', "~> 1.2.3" 

gem 'ar_mailer_rails3' 
gem 'lazy_high_charts', "~> 1.1.1" 

gem 'rails-breadcrumbs', "~> 1.0.0"

gem 'curb' 

gem 'geonames', "~> 0.2.2" 

gem 'activemerchant'

gem 'savon', "~> 0.9.7"

gem 'rack-ssl'
gem 'state_machine'

gem "http_accept_language", '~> 1.0.2'

gem 'recurly', '~> 2.1.0'
gem 'newrelic_rpm'

group :test, :development do
  gem 'rspec-rails', "~> 2.8"
  gem 'rspec-mocks', "~> 2.8"
  gem 'capybara', "~> 0.4.1.2"
  gem 'database_cleaner', "~> 0.6.7 "
  gem 'cucumber', "~> 0.10.2"
  gem 'spork', "~> 0.9.0"
  gem 'launchy', "~> 0.4.0"
  gem 'machinist', "~> 1.0.6"
  gem 'factory_girl_rails', "1.3.0"
  gem 'faker', "~> 0.9.5"
  gem 'email_spec'  
  gem 'rails-erd'  
  gem 'ruby-debug'
end

group :development do
  gem "hirb"
  gem "awesome_print"
end 
```

mongoid.yml 文件如下：

```
defaults: &defaults
  host: localhost
  database: teenscrio

development:
  <<: *defaults
  database: teenscrio_dev

staging:
  <<: *defaults
  database: teenscrio_stg

test:
  <<: *defaults
  database: teenscrio_tst

# set these environment variables on your prod server
production:
  host: <%= ENV['MONGOID_HOST'] %>
  port: <%= ENV['MONGOID_PORT'] %>
  username: <%= ENV['MONGOID_USERNAME'] %>
  password: <%= ENV['MONGOID_PASSWORD'] %>
  database: <%= ENV['MONGOID_DATABASE'] %> 
```

为什么现在出现这个错误？devise和mongoid有什么关系？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T06:33:59.557

它必须从 mongoid.yml 中删除

```
host: localhost 
```

然后它不显示错误并且工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:41:20.940

您需要重新考虑如何初始化`Mongo::Connection`. 您似乎[在选项中错误](https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/connection.rb#L534)地提供了主机，而它必须直接传递给[初始化程序或在环境中指定](https://github.com/mongodb/mongo-ruby-driver/blob/master/lib/mongo/connection.rb#L47)。

我假设您的开发和生产环境在构建 MongoDB 连接的方式方面存在一些差异，这会导致您遇到异常。

# objective-c - 自定义表格视图单元格上无法识别的选择器错误

> ID：13019257
> 
> 赞同：0
> 
> 时间：2012-10-22T20:23:54.190
> 
> 标签：objective-c, ios

我正在使用自定义单元格来显示信息。当我使用 NSString 将信息传递给 UILabel 时，出现以下错误。

错误：

> [HITEstimationCustomViewCell isEqualToString:]：无法识别的选择器发送到实例 0x6892f80
> 
> 2012-10-23 01:38:04.821 MyApp [13298:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[HITEstimationCustomViewCell isEqualToString:]：无法识别的选择器发送到实例 0x6892f80

单元格详细信息：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"EstimationCellIdentifier";

    static BOOL nibsRegistered = NO;

    if(!nibsRegistered)
    {
        UINib *nib = [UINib nibWithNibName:@"HITEstimationCustomViewCell" bundle:nil];

        [tableView registerNib:nib forCellReuseIdentifier:CellIdentifier];

        nibsRegistered = YES;
    }

    HITEstimationCustomViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    NSUInteger row = [indexPath row];
    NSString *rowData =[estimationListArray objectAtIndex:row];

    cell.nameTextField = rowData;
    cell.emailIdTextField = [estimationListArray objectAtIndex:row];

return cell;
' 
```

实例：

```
HITEstimationCustomViewCell *newCell = [[HITEstimationCustomViewCell alloc] initWithNameField:@"Michael" emailId:@"mike@mike.com" skypeId:@"mrmike" hourlyRate:@"$25" numberOfHours:@"20" totalCost:@"$1000"];

    NSMutableArray *myArray = [[NSMutableArray alloc] initWithObjects:newCell, nil];

self.estimationListArray = myArray; 
```

界面：

```
@interface HITEstimationCustomViewCell : UITableViewCell

@property (weak, nonatomic) IBOutlet UILabel *nameField;
@property (weak, nonatomic) IBOutlet UILabel *totalCost;
@property (weak, nonatomic) IBOutlet UILabel *hourlyRate;
@property (weak, nonatomic) IBOutlet UILabel *emailId;
@property (weak, nonatomic) IBOutlet UILabel *skypeId;
@property (weak, nonatomic) IBOutlet UILabel *numberOfHours;

@property (copy, nonatomic) NSString *nameTextField;
@property (copy, nonatomic) NSString *totalCostTextField;
@property (copy, nonatomic) NSString *hourRateTextField;
@property (copy, nonatomic) NSString *emailIdTextField;
@property (copy, nonatomic) NSString *skypeIdTextField;
@property (copy, nonatomic) NSString *numberOfHoursTextField;

-(id)initWithNameField:(NSString *)name emailId:(NSString *)email skypeId:(NSString *)skype hourlyRate:(NSString *)hourlyPrice numberOfHours:(NSString *)Hours totalCost:(NSString *)total;

@end 
```

执行：

```
@implementation HITEstimationCustomViewCell

@synthesize nameField;
@synthesize totalCost;
@synthesize hourlyRate;
@synthesize emailId;
@synthesize skypeId;
@synthesize numberOfHours;

@synthesize nameTextField;
@synthesize totalCostTextField;
@synthesize hourRateTextField;
@synthesize emailIdTextField;
@synthesize skypeIdTextField;
@synthesize numberOfHoursTextField;

-(void)setNameTextField:(NSString *)n
{
    if(![n isEqualToString:nameTextField])
    {
        nameTextField = [n copy];

        nameField.text = nameTextField;
    }
}

-(id)initWithNameField:(NSString *)name emailId:(NSString *)email skypeId:(NSString *)skype hourlyRate:(NSString *)hourlyPrice numberOfHours:(NSString *)Hours totalCost:(NSString *)total
{

    self = [super init];
    if(self)
    {

        self.nameTextField = name;
        self.emailIdTextField = email;
        self.skypeIdTextField =skype;
        self.hourRateTextField = hourlyPrice;
        self.numberOfHoursTextField = Hours;
        self.totalCostTextField = total;

    }

    return self;
} 
```

我对 IOS 和 XCode 非常陌生，并且一直在尝试在论坛上找到的很多东西，但无法解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:59:21.270

错误消息告诉你你需要知道的一切：

```
[HITEstimationCustomViewCell isEqualToString:]: unrecognized selector sent to instance
       ^                              ^
       Class Name                     Method Name 
```

您正在`isEqualToString:`调用`HITEstimationCustomViewCell`.

看看你在哪里打电话`isEqualToString:`并向后工作。您会看到您正在`HITEstimationCustomViewCell`为该属性分配一个实例`nameTextField`，而不是一个`NSString`.

# java - 如何在 Android 上获取联系人的名字和姓氏列表？

> ID：13019258
> 
> 赞同：0
> 
> 时间：2012-10-22T20:23:59.400
> 
> 标签：java, android, eclipse, android-contacts

> **可能重复：**
> [如何在 Android 2.0 上读取联系人](https://stackoverflow.com/questions/1721279/how-to-read-contacts-on-android-2-0)

我只想要`List<String>`Android 设备联系人列表中的名字 + 姓氏。应该很简单，但我找不到任何基本代码。

只是在寻找：

```
Steve Smith
Joe Shmo
Blah Davis 
```

等等都来自用户手机上的联系人。我已经添加了：

```
<uses-permission android:name="android.permission.READ_CONTACTS" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:39:50.603

```
 public List<String> getFullContactName(){

    List<String> name = new List<String>();

    String[] projection = new String[] {Data.DATA2, Data.DATA3};
    String where = Data.MIMETYPE + "='" + StructuredName.CONTENT_ITEM_TYPE + "'";
    Uri uri = Data.CONTENT_URI;

    ContentResolver contentResolver = context.getContentResolver();
    // Make the query. 
    Cursor cursor = contentResolver.query(uri,
                             projection, // Which columns to return 
                             where,       // Which rows to return
                             null,       // Selection arguments (none)
                             // Put the results in ascending order by name
                             null);

    String firstName, LastName;
    while (cursor.moveToNext()) {

        firstName = cursor.getString(cursor.getColumnIndex(Data.DATA2));
        lastName = cursor.getString(cursor.getColumnIndex(Data.DATA3));
name.add(firstName + " " + lastName);           
    }

    cursor.close();
    cursor = null;
    return name;
} 
```

# sql - 在两个表的三个字段之间进行 1:1 匹配

> ID：13019263
> 
> 赞同：2
> 
> 时间：2012-10-22T20:24:21.387
> 
> 标签：sql, tsql

给定两个这样的表：

```
Date | Client | Category | Amount1 | x
A      B        C          234
X      Y        Z          456

MonthDate | Client | Category | Amount2 | y
B           C        D          567
A           B        C          123 
```

如何找到 x.Month(Date) = y.MonthDate、x.Client = y.Client 和 x.Category = y.Category 的记录？

我需要能够为某些客户显示 Amount1 - Amount 2 = Net。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:27:56.420

直接的解释

```
SELECT x.Date, y.MonthDate, X.Client, Y.Category, X.Amount1 - Y.Amount2 Nett
FROM TBL1 X
JOIN TBL2 Y ON Month(x.Date) = y.MonthDate
           AND x.Client = y.Client
           AND x.Category = y.Category 
```

但是，如果其中一个是月度发票和其他原始记录，那么您可能需要汇总：

```
SELECT y.MonthDate, Y.Client, Y.Category, ISNULL(SUM(X.Amount1),0) - Y.Amount2 Nett
FROM TBL1 X
RIGHT JOIN TBL2 Y ON Month(x.Date) = y.MonthDate
           AND x.Client = y.Client
           AND x.Category = y.Category
GROUP BY y.MonthDate, Y.Client, Y.Category, Y.Amount2 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:28:45.467

尝试使用`join`：

```
select x.Client, x.Amount1 - y.Amount2 as NET
from tableX x
join tableY y on x.Date = y.MonthDate
              and x.Client = y.Client
              and x.Category = y.Category 
```

# c++ - WinAPI C++ - 子类控件是否仍向其父级发送通知？

> ID：13019264
> 
> 赞同：0
> 
> 时间：2012-10-22T20:24:26.897
> 
> 标签：c++, winapi, notifications, controls, subclass

我正在制作一个编辑控制包装类。`virtual void OnChange()`类包装的编辑控件是子类的，因此可以覆盖虚拟方法（或“事件”，例如）。我唯一的问题是，如果我`EN_CHANGE`在控件子类过程中处理通知，用户仍然可以`EN_UPDATE`在父窗口过程中处理通知吗？或者子类化控件是否意味着所有通知都由控件新窗口过程处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:34:19.420

您的子类不处理的消息应该被给予，`CallWindowProc(original window procedure)`以便控件的默认值将发生。

也就是说，`EN_`通知不会发送到控件，而是直接发送到父级。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:33:51.207

您无法在控件的窗口过程中处理 EN_CHANGE 通知。此通知直接发送到父窗口。

对于其他窗口消息，由您决定处理它们的位置。通常，窗口管理器只向单个窗口发送消息。如果您在窗口过程中处理该消息，那么其他人将不会看到它。

# google-maps - 谷歌静态地图和行车路线

> ID：13019267
> 
> 赞同：3
> 
> 时间：2012-10-22T20:24:33.633
> 
> 标签：google-maps, mobile, google-maps-api-3, java-me

我制作了一个移动应用程序，使用谷歌静态地图来获取从 A 位置到 B 位置的地图，我还使用谷歌方向 API 来获取从 A 位置到 B 位置的所有路径方向

当我尝试使用 URL 将这些方向发送到 Google 静态地图时，它不能完全工作，因为我无法使用 URL 发送大量信息。

有什么方法可以让我发送任意数量的点以在 Google 静态地图上绘图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:32:06.323

我建议阅读[Google Maps API - Encoded Polyline Algorithm Format](https://developers.google.com/maps/documentation/utilities/polylinealgorithm)，它允许您通过编码点传递较短的 url。

您可以使用[Google Maps API - Interactive Polyline Encoder Utility测试您的编码值](https://developers.google.com/maps/documentation/utilities/polylineutility)

# ruby-on-rails - ActiveRecord：同一个表的多个外键

> ID：13019269
> 
> 赞同：0
> 
> 时间：2012-10-22T20:24:56.857
> 
> 标签：ruby-on-rails, activerecord

所以我在如何在 Rails 3 中构造一些数据方面有点挣扎。

我有一个名为的表`Tasks`和一个名为 的表`Todos`。一个 Todo 最多可以有 4 个任务，这些任务被组织到表格中，如下所示：

待办事项表：

*   ID
*   人名
*   插槽 1
*   插槽2
*   插槽 3
*   插槽4

任务表：

*   ID
*   姓名
*   描述
*   按钮文本
*   button_url

在 Todos 表中，slot1 到 slot4 将具有关联任务的 ID。我不确定如何构建模型中的关联。

简单旧`has_many :tasks`，`belongs_to :todos`不太好用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:31:55.823

我会这样做

```
class Todo < ActiveRecord::Base
  has_many :tasks, :limit => 4
end

class Task < ActiveRecord::Base
  belongs_to :todo
end

resources :todos do
  resources :tasks
end 
```

要获得 a 的 4 个任务`@todo`，你会做`@todo.tasks`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:32:58.390

```
class Todo < ActiveRecord::Base
  has_many :tasks through :slots, :limit=>4
end
class Slot < ActiveRecord::Base
  belongs_to :todos
  belongs_to :tasks
end 
```

# api - 没有访问令牌的 Facebook 搜索 API

> ID：13019270
> 
> 赞同：0
> 
> 时间：2012-10-22T20:25:01.317
> 
> 标签：api, facebook-graph-api

在许多帖子中，我看到需要 access_token 才能搜索特定关键字。没有它是不是不可能。当我通过网络浏览器请求它时，我会收到结果。那为什么我通过浏览器接收它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T12:41:39.697

伊吉完美地解释了它。您在使用您的帐户时已登录 Facebook，因此您可以根据您的用户视角进行访问。这些搜索是为您的帐户量身定制的

应用程序不代表您，除非您授予它查看搜索的权限。

# jquery - 选择 onchange 返回错误的值

> ID：13019274
> 
> 赞同：0
> 
> 时间：2012-10-22T20:25:22.523
> 
> 标签：jquery, jquery-mobile, knockout.js

我有一个看起来像这样的模型视图：

```
var teamViewModel = {
        teams: ko.observableArray([]),
        selectedTeam: ko.observable({id: 1}),
        clearTeams: function(){
            this.teams.removeAll();
        },
        addTeam: function (id, name, isChecked) {
            t = new team(id, name, isChecked);
            this.teams.push(t);
        }
    }; 
```

我在这里引用它：

```
<select id="teamNameLabel" date-theme="f" data-bind="options: teams, optionsText: 'id', value: selectedTeam"></select> 
```

当我选择其中一个团队时，我可以点击一个按钮：

`<input id="TestButton" type="button" onclick="GetAllUsersByTeam()" value="Show Selected Team" />`

它会这样称呼：

```
function GetAllUsersByTeam(){

        var url = 'http://localhost/Service.svc/GetUsersByTeam/'+teamViewModel.selectedTeam().id;

        var jqxhr =
        $.getJSON(url,
        function (data) 
        { 
            colleagueViewModel.clearColleagues();
            $.each(data.GetUsersByTeamResult, function (key, val) {
                colleagueViewModel.addColleague(val.FirstName, val.LastName, val.EmailAddress, val.PhoneNumber, val.LocationName, val.CapabilityId, val.CoeId);
            });
            ko.applyBindings(colleagueViewModel, document.getElementById("colleaguesListView"));
        })
    } 
```

这就像我想要的一样。但我想更改，以便将 GetAllUsersByTeam() 称为 onchange。然而：

```
<select id="teamNameLabel" date-theme="f" onchange="GetAllUsersByTeam()" data-bind="options: teams, optionsText: 'id', value: selectedTeam"></select> 
```

总是迟到 1 个 ID。例如，当我选择 1 时，它的 id 是 1，2 id 是 1，3 id 是 2 ......我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:56:56.437

`selectedTeam`为什么不在你的模型中订阅呢？

```
this.selectedTeam.subscribe(function(newValue) {
    GetAllUsersByTeam();
}); 
```

# c# - 从 C# 中的 LoadControl(string path) 获取和设置参数

> ID：13019286
> 
> 赞同：0
> 
> 时间：2012-10-22T20:26:03.983
> 
> 标签：c#, asp.net, reflection, user-controls, loadcontrol

我想基于 XML 将用户控件添加到我的页面：

```
<?xml version="1.0" encoding="utf-8" ?>
<Fields>
<Group name="Main" text="Innhold">
<Field type="TextBox" name="Name" text="Navn"></Field>
</Group>
</Fields> 
```

用户控件看起来像这样的 TextBox.ascx：

```
<div class="fieldWrapper">
<asp:Label runat="server"><%=Label %></asp:Label>
<asp:TextBox ID="TextBox1" runat="server" />
</div> 
```

我根据 xml 中的 type 属性执行 LoadControl。喜欢：LoadControl（类型+“.ascx”）：

```
var fields = from x in element.Elements("Field") select new
{
type = x.Attribute("type").Value,
name = x.Attribute("name").Value,
text = x.Attribute("text").Value,
                                    };
foreach (var field in fields)
{
var control = LoadControl("~/UserControls/FieldControls/" + field.type + ".ascx");
pnl.Controls.Add(control);
}
FieldsHolder.Controls.Add(pnl); 
```

我想将 xml 中的文本属性传递给 TextBox.ascx 中的标签。像这样： ctrl.Label = field.text 我知道如果我将控件转换为正确的类型，我可以这样做，但我不知道类型。我可以以某种方式使用反射吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:51:30.833

我假设您所有的用户控件都共享相同的属性，例如“标签”。我会创建一个如下所示的界面

```
public interface IUserControl
{
    string Label { get; set; }
} 
```

这是UserControl的实现

**代码**

```
public partial class TextBox : System.Web.UI.UserControl, IUserControl
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    private string _label;
    public string Label
    {
        get { return _label; }
        set { _label = value; }
    }
} 
```

您现在可以加载控件并设置属性，如下所示

```
foreach (var field in fields)
{
   var control = LoadControl("~/UserControls/FieldControls/" + field.type + ".ascx");
   (control as IUserControl).Label = field.text;
   pnl.Controls.Add(control);
} 
```

我希望它可以帮助你实现你想要的..

# android - 将多个链表合并为一个

> ID：13019295
> 
> 赞同：1
> 
> 时间：2012-10-22T20:26:29.327
> 
> 标签：android, linked-list

是否可以将linkLst1、linkLst2、linkLst3 放在一个LinkedList 中，比如linkLst？之后我只需要调用 linkLst.get(i) 来添加或删除对象？

提前致谢！

```
 private LinkedList<Number> linkLst1;
    private LinkedList<Number> linkLst2;
    private LinkedList<Number> linkLst3;

   {
    linkLst1= new LinkedList<Number>();
    linkLst2= new LinkedList<Number>();
    linkLst3= new LinkedList<Number>();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:13:15.110

当然，您可以使用`addAll`.

```
private LinkedList<Number> linkList = new LinkedList<Number>();
linkList.addAll(linkLst1);
linkList.addAll(linkLst2);
linkList.addAll(linkLst3); 
```

现在`linkList`包含与前三个组合相同的所有项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:34:59.503

是的，您只需像在 java 中一样将 Linklist linkLast 设为linkedlist 类型

```
LinkedList <ArrayList>list = new LinkedList<ArrayList>(); 
```

这就是我制作arraylist类型的链接列表的方式我认为这会做你想要的

# algorithm - 用两个字符串做一个唯一的散列

> ID：13019307
> 
> 赞同：10
> 
> 时间：2012-10-22T20:27:24.093
> 
> 标签：algorithm, scala

谁能想到用两个字符串制作唯一哈希的方法？确保：

`hash(string1,string2) = hash(string2,string1).`

我总是可以在我的地图中将相同的引用存储在两个不同的值下，但我想：一定有更好的方法......

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-22T20:31:27.483

另一种方法是对字符串和结果进行异或运算。由于 xor 是可交换的，因此顺序无关紧要。如果哈希值相等，请不要对它们进行异或运算，以避免与其他相同字符串对发生冲突。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-22T22:15:00.880

你想快点，还是想变好？对单个哈希码的任何对称操作都会产生你想要的；`+`, `*`, 和`^`都是不错的选择；`^`如果两者相同，则产生 0，因此您通常需要 an`if`来捕捉它；`+`更容易产生碰撞，`*`但两者都不是很好，因为内在`hashCode`方法`String`非常糟糕：

```
scala> "BB".hashCode == "Aa".hashCode  // Seriously?!
res40: Boolean = true 
```

如果您希望您的字符串不会发生太多碰撞，请`scala.util.MurmurHash.stringHash`在字符串上使用（2.9；`scala.util.hashing.MurmurHash.stringHash`在 2.10 中），然后使用上述方法之一。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-22T20:30:16.133

好吧，您可以在散列它们之前尝试“排序”两个字符串，这样任何一对字符串都将始终以相同的顺序处理。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-22T20:29:35.770

检查它们是否按字母顺序排列，如果不是，则在连接它们并对结果进行散列处理之前交换它们。

# c# - 在PHP中，解压后的gz字符串中的每个字符后面都有^@，为什么？

> ID：13019310
> 
> 赞同：5
> 
> 时间：2012-10-22T20:27:45.390
> 
> 标签：c#, php, string, gzip, sharpziplib

我正在从 C#（使用 SharpZipLib）向 PHP 发送一个 gzip 压缩的字符串，并在其中使用 readgzfile 解压缩。这可行，但是字符串中的每个字符后跟两个奇怪的字符（在控制台中使用 vim，这些字符显示为`^@`）。我也尝试使用 gzopen/gzread，但结果相同。

当我从字符串中清除非 ASCII 字符时`$clean= preg_replace('/[^(\x20-\x7F)]*/','', $string);`，$clean 字符串与 C# 中的字符串相同。

虽然这可行，但我想知道发生了什么以及为什么这样我可以确保这将始终有效或提出更好的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T05:40:56.667

鉴于字符串是在 Windows 上创建的，很可能正在使用一些多字节编码。

您可以自己验证这一点，方法是使用`bin2hex($string)`并检查十六进制表示，而不是依赖 vim。

如果其中一个`UTF-16`或`UCS2`正在使用，您可以像这样转换它们：

```
// iconv($from, $to, $str)
$clean = iconv('UTF-16', 'UTF-8', $string); 
```

# sql - SQL Server XML 查询格式

> ID：13019314
> 
> 赞同：5
> 
> 时间：2012-10-22T20:28:00.710
> 
> 标签：sql, sql-server, xml, formatting, xml-formatting

当我使用 FOR XML 语句查询 SQL Server 时，我得到以下格式的预期结果......即没有适当的缩进 ---

```
<ROOT><SUBROOT><A>1111</A></SUBROOT><SUBROOT><B>2222</B></SUBROOT><ROOT> 
```

如何格式化此结果或查询它以获得以下格式？

```
<ROOT>
 <SUBROOT>
  <A>1111</A>
 </SUBROOT>
 <SUBROOT>
  <B>2222</B>
 </SUBROOT>
<ROOT> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:34:28.727

![点击这里](../Images/7420fcf481894dd6fc7a879c632f00f7.png)

在 GRID 模式下运行查询时，XML 列是超链接的。
将鼠标悬停在提示上时会出现提示。
如图所示单击它以显示格式化的 XML 选项卡。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:35:30.083

SQL Server 没有任何方法可以“整理”XML 结果。您需要使用第三方工具来执行此操作。[NotePad++](http://notepad-plus-plus.org)有一些表现良好的 XML 格式化工具，只要您不使用大得离谱的 XML（又名 100MB）文件。

如果你只想要一个非常基本的格式，你可以用你的前端做一个字符串替换或类似的东西`><`。`>\n<`尝试在 SQL Server 中对 XML 进行任何类型的格式化时，您的表现将非常糟糕。不要尝试在 SQL Server 上格式化您的 XML。曾经。

如果您正在运行 .Net 前端，则可以尝试插入[TidyForNet](http://tidyfornet.sourceforge.net/)之类的东西来美化 XML，或者您可以通过 XSLT 转换运行它（恕我直言，不是首选）。

^(**注意：如果您只需要运行一次查询并以“整洁”的格式查看生成的 XML，请查看[RichardTheKiwi 的答案](https://stackoverflow.com/a/13019400/193939)。**)

# pdf - 在 illustrator 中，我可以只保存 .pdf 文件（并保留编辑功能）吗？

> ID：13019316
> 
> 赞同：2
> 
> 时间：2012-10-22T20:28:11.693
> 
> 标签：pdf, file-handling, adobe-illustrator

在处理 Illustrator 文档时，我经常发现自己保存了两次文件。一个 .ai 文件和一个 .pdf 文件。

由于 .pdf 文件可以在 Illustrator 中重新打开和编辑，我想知道我是否应该只保存为 .pdf 格式。

保留这两个文件有什么意义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:38:51.237

我一直这么认为，但主要还是用 AI/PSD，因为我担心不兼容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:54:15.627

就编辑能力而言，这实际上取决于您想要保持/保留多少灵活性。PDF 和 AI 是两种文件格式，旨在实现两个不同的目标。根据经验，您始终希望保留原始设计源文件，因为在转换为 PDF 时可能会丢失某些设计元素细节。您的起点是您的 AI 文件。PDF 只是您在 Illustrator 中设计的众多可能输出（如 JPEG、PNG、BMP、PSD、SVG、打印等）之一。保留 AI 文件的目的是为了将来参考和重新设计。

最终取决于您以及您打算如何使用和审查这些文档/设计。

干杯

# android - Google Maps Elevation Api 值错误

> ID：13019319
> 
> 赞同：4
> 
> 时间：2012-10-22T20:28:33.640
> 
> 标签：android, google-maps-api-3, elevation

我已经尝试过这种方法来获取海拔高度，使用经度和纬度

```
private double lookingForAltitude(double latitude, double longitude) {
        double result = Double.NaN;
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        String url = "http://maps.googleapis.com/maps/api/elevation/"
                + "xml?locations=" + String.valueOf(longitude)
                + "," + String.valueOf(latitude)
                + "&sensor=true";
        HttpGet httpGet = new HttpGet(url);
        try {
            HttpResponse response = httpClient.execute(httpGet, localContext);
            HttpEntity entity = response.getEntity();
            if (entity != null) {
                InputStream instream = entity.getContent();
                int r = -1;
                while ((r = instream.read()) != -1)
                    respStr.append((char) r);
                String tagOpen = "<elevation>";
                String tagClose = "</elevation>";
                if (respStr.indexOf(tagOpen) != -1) {
                    int start = respStr.indexOf(tagOpen) + tagOpen.length();
                    int end = respStr.indexOf(tagClose);
                    String value = respStr.substring(start, end);
                    result = (double)(Double.parseDouble(value));
                }
                instream.close();
            }
        } catch (ClientProtocolException e) {} 
        catch (IOException e) {}

        return result;
    } 
```

不幸的是不起作用

以通过为例

```
double latitude = 48.856908
double longitude = 2.352426 
```

*法国巴黎蒂沃利街*

得到**-3997.6191406**

怎么了？？

我在其他地方也得到了错误的价值。

附言

我听说这个功能的请求限制是2500。这个是和每个IP有关还是所有使用我的证书的应用程序的最大数量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:49:33.977

您正在交换纬度和经度的值。

[http://maps.googleapis.com/maps/api/elevation/xml?locations=2.352426,48.856908&sensor=true](http://maps.googleapis.com/maps/api/elevation/xml?locations=2.352426,48.856908&sensor=true)返回：

```
<result>
<location>
<lat>2.3524260</lat>
<lng>48.8569080</lng>
</location>
<elevation>-3997.6191406</elevation>
<resolution>610.8129272</resolution>
</result> 
```

虽然[http://maps.googleapis.com/maps/api/elevation/xml?locations=48.856908,2.352426&sensor=true](http://maps.googleapis.com/maps/api/elevation/xml?locations=48.856908,2.352426&sensor=true)返回：

```
<result>
<location>
<lat>48.8569080</lat>
<lng>2.3524260</lng>
</location>
<elevation>32.0345688</elevation>
<resolution>9.5439520</resolution>
</result> 
```

您必须使用`lookingForAltitude`交换的值进行调用。

# ejb-3.1 - 捕获 EJB 回滚异常

> ID：13019320
> 
> 赞同：2
> 
> 时间：2012-10-22T20:28:36.033
> 
> 标签：ejb-3.1

我有一个使用 CMT 的 EJB。此 EJB 是 JSON JERSEY REST Web 服务。此 Web 服务由独立的 GSON REST 客户端调用。
此 EJB 按以下顺序在单个事务中调用以下类： 1) 执行 DB 插入操作的 DB DAO 类。2) 将用户插入 Active Directory 的 LDAP 客户端类。

当任何异常发生时，EJB/web 服务会抛出 500 内部服务器错误并且容器回滚事务。我想捕获此错误，转换为有意义的消息并作为我的响应对象的一部分发送给消费者。如何捕获此 EJB 回滚异常？我发现如果我在 EJB 中捕获它，那么事务就不会回滚。是否有任何拦截器可以拦截 EJB 回滚异常并捕获它？

下面是我的 EJB 代码：

```
@Interceptors(SpringBeanAutowiringInterceptor.class)
@Stateless(name = "RegistrationServiceImpl", mappedName = "EJB-model-RegistrationServiceImpl")
@Path("registration")
public class RegistrationServiceImpl implements IRegistrationService {
    @TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
    public RegistrationResponse validateMemberRegInfo(RegistrationRequest request){
        // CALL DB DAO throws DB exception
        // CALL LDAP client throws LDAP exception
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T02:48:17.973

您无法从容器管理的事务方法中捕获事务提交失败，因为在方法结束之前不会发生事务提交。您要么需要在调用者（例如 servlet）中捕获异常，要么需要使用 bean 管理的事务。例如：

```
@TransactionManagement(BEAN)
public class RegistrationServiceImpl implements IRegistrationService {
    @Resource UserTransaction userTran;
    public RegistrationResponse validateMemberRegInfo(RegistrationRequest request){
        try {
            userTran.begin();
            // CALL DB DAO throws DB exception
            // CALL LDAP client throws LDAP exception
            userTran.commit();
        } catch (...) {
            ...
        } catch (TransactionRolledbackException e) {
            ...
        }
    }
} 
```

# c - 从 C 中的 DLL 函数返回字符缓冲区而不产生内存泄漏

> ID：13019325
> 
> 赞同：3
> 
> 时间：2012-10-22T20:29:28.010
> 
> 标签：c, memory-management, dll, memory-leaks

我必须在 C 中编写一个 DLL，其中包含一个返回特定字符串的函数（作为指向表示字符串的 char 缓冲区的指针）。DLL 中的函数将被重复调用，并在不同的线程中执行。

正确的做法是在函数中分配 char 缓冲区，并在使用返回缓冲区后在调用者环境中释放分配的缓冲区。

```
// DLL function

char *getString() {
    char *buffer = (char *)malloc(STRING_LEN);
    // fill buffer with some string
    return buffer;
} 
```

不幸的是，将在我的 dll 中调用该函数的编程环境没有释放返回缓冲区的机制，因此导致内存泄漏。

如何在这种情况下返回字符串而不产生内存泄漏？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:03:23.000

DLL 使用单独的堆，因此在 dll 中分配的内容必须由同一个 dll 释放。

正如 hmjd 所说，一种选择是将缓冲区返回给将它提供给您的 DLL，以便它删除它。所以dll提供了一个释放功能。

我更喜欢的另一个选择是让调用程序自己提供内存。例如，您在调用程序中分配缓冲区并将其传入，包括缓冲区的长度，如果缓冲区不够大，则 dll 函数以所需的长度失败。像这样：

```
bool doStuff( char* buffer, int& len )
{
    if ( len < tooSmall() )
    {
       len = requiredLength();
       return false;
    }

    // fill the buffer here somehow

    return true;
} 
```

然后您可以照常管理调用程序中的缓冲区。这样做的一个优点是调用程序很容易在有意义的情况下重用缓冲区。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:02:53.260

是否可以修改 API 以便调用者提供缓冲区？`maxStringLength`为（或标题或函数中的宏）添加一个常量，以便调用者始终可以为返回字符串分配足够的空间。

```
// DLL
const size_t maxStringLength = STRING_LEN;
char *getString( char *buffer, size_t buffer_size) {
    // fill buffer with some string
    return buffer;
}

// calling code
char *my_buffer = malloc( maxStringLength);
if (my_buffer != NULL)
{
    getString( my_buffer, maxStringLength);
    // use string
    free( my_buffer);
} 
```

# styles - 谷歌地图：动态隐藏标签 + infoBubble 大量使用 + 街景全景背景，

> ID：13019327
> 
> 赞同：2
> 
> 时间：2012-10-22T20:29:35.217
> 
> 标签：styles, maps, infowindow, google-street-view

我正在使用谷歌地图并从数据库中放置大约 800 个标记......

现在我对那张地图的微调有几个问题......

[http://camodesign.de/stickermap/geomap.php](http://camodesign.de/stickermap/geomap.php)

1.  我正在使用样式地图 - 现在我想应用一个按钮来隐藏/显示街道等的标签......但是当我设置一个样式时，`"map.setOptions({styles: MyStylesArrayShowLabel});"`它会杀死我所有已经放置的标记。有没有办法在不破坏标记的情况下即时设置样式？

2.  我已经通过“mapOptions”为地图设置了背景，以避免那些丑陋的灰色瓷砖。有没有办法为街景全景图做到这一点？

3.  我设置了 100% 宽度和高度的全屏全景图，但即使屏幕的其余部分显示为灰色，街景似乎也只使用 60%。在这里我真的不知道 - 它只是我的浏览器上的一个错误吗？

(+) 试图使用信息气泡而不是信息窗口来获得更多样式可能性，但脚本挂起并且工作时间过长.. 几分钟后，结果正确...似乎气泡在大量标记上有一些问题利用？有没有人有类似的经历呢？

很高兴有其他建议吗？

（所有标记 [不包括主标记/信息窗口] 都是通过 SQL 和 PHP 从数据库生成的）

# html - 在没有容器 div/包装器的情况下将多个 div 放置在两列中

> ID：13019328
> 
> 赞同：5
> 
> 时间：2012-10-22T20:29:36.847
> 
> 标签：html, css

我希望你能帮助我解决我正在尝试解决的 CSS 问题。

我有一组 div，比如这个例子中的 4 个。我想在页面上的两个垂直列中构造它们，*而不*在每个列周围使用容器 div。

但是（这是棘手的部分），我希望它们被排列，以便每个 div 正好低于它上面的那个。目前，我已经做到了，这样它们就可以在顶部相互对齐了。

**[在这里查看代码和示例](http://cssdesk.com/UDQVd)**。

*除非*左侧的 div 之一比右侧的 div 长，否则它可以正常工作，如示例中所示。

所以......我的问题是。我如何获得它以使绿色框直接位于蓝色框下方，而不是与黄色框的顶部对齐。

*我不想使用`margin-top: -60px`或类似*的 .

如有必要，使用 JavaScript/jQuery 很好，但纯 CSS 解决方案将是理想的。

要记住的重要一点是，**我不能在列周围使用容器 div**。

我什至不确定这是可能的，并且浪费了一天的时间试图让它工作......如果你能提供帮助，我将非常感激 - 即使你只是确认这是不可能的！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:01:11.143

有 2 个解决方案，**CSS3**和不支持旧浏览器，或者**jQuery 插件**。

## 使用[CSS3 列](http://www.quirksmode.org/css/columns2.html)

```
#wrapper{
    column-count: 2;
    column-gap: 10px;
} 
```

或者为了更好的兼容性，使用供应商前缀：

```
#wrapper{
    -webkit-column-count: 2;
    -moz-column-count: 2;
    column-count: 2;
    -webkit-column-gap: 10px;
    -moz-column-gap: 10px;
    column-gap: 10px;
} 
```

[**在 CSSDesk 上查看示例**](http://cssdesk.com/vASvk)

## 使用 jQuery 插件

1.  正如@allaire 所说，[Masonry](http://masonry.desandro.com/)在一个优秀的图书馆中。

2.  然后是[Wookmark](http://www.wookmark.com/jquery-plugin)，没有测试过，但看起来很干净。

3.  或者这个模仿 CSS3 列行为的[jQuery.column插件。](http://www.vanderlee.com/martijn/?page_id=229)（还没有尝试过这个）

还有更多的插件可以进行分栏，搜索[砌体替代品](https://www.google.nl/search?q=masonry%20alternatives)以找到您的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:32:54.543

我曾经做过类似的事情并得出使用jQuery的结论，这是我使用的插件，效果很好：

[http://masonry.desandro.com/](http://masonry.desandro.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T15:47:44.717

这是一种纯粹的 html/css 方法。

```
<div class="container">
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
  <div class="box"></div>
</div>

.container {
  position: relative;
}
div.box {
  float: left;
  width: 50%;
}
div.box:nth-child(odd) {
  margin-right: 1px;
}
div.box:nth-child(even) {
  margin-left: -1px;
} 
```

框上的 margin-left 和 margin-right 确保左框不能浮动在左框旁边。

# c++ - 临时对象创建

> ID：13019330
> 
> 赞同：4
> 
> 时间：2012-10-22T20:29:39.187
> 
> 标签：c++, logging, g++, rvalue-reference, temporary-objects

有谁知道是否可以在任何符合 C++ 的编译器（Visual Studios、g++ 等）上启用任何类型的日志记录，以便我可以发现何时创建临时对象？

例如：

假设我有一个函数`f(char x)`，但我称之为`f(46)`

我会在日志中看到——

`temporary char created promoting int @ function param f(46)`（或类似的东西）

我已通读 VS 编译器开关选项，看来这不是一个选项。

我知道在新标准中有一个`rvalue reference`(&&) 的概念，可用于检测大多数临时移动语义，但这涉及添加新代码/兼容编译器。

那么这可以做到吗？或者这是编译器的特权知识？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:48:58.317

IDE中的内联注释会更有用（因为我假设您想通过最小化其中一些临时来进行优化？）。在实践中，最简单的方法是修改 GCC 或 g++ 并让它们与 Visual Studio 插件或其他东西对话。他们可以用寄存器分配和所有东西来注释。哇，那真的很有帮助。

除非有这样的努力，而且我不知道，最好的方法就是学习阅读程序集。在 Visual Studio 中，您可以让编译后的程序集与源代码内联显示，这非常有用。

# ios - 应用程序进入后台时显示启动画面

> ID：13019332
> 
> 赞同：3
> 
> 时间：2012-10-22T20:29:41.610
> 
> 标签：ios, cordova, background, splash-screen

我正在为 iOS 使用 phonegap 编写应用程序。当应用程序进入后台时，我试图显示启动画面。

`(void)applicationWillResignActive:(UIApplication *)application`[...]

在 `applicationWillResignActive:`我调用一个 JavaScript 函数并使用科尔多瓦的方法`cordova.exec(null,null, "SplashScreen, "show", [])`来显示启动画面。但似乎，这是行不通的。

当我恢复应用程序时，应用程序首先进入以前的状态，然后切换到启动画面，但我想在应用程序恢复时显示启动画面。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T06:26:49.180

得到这个工作：

```
- (void) applicationWillResignActive:(UIApplication *)application {
  //Call to JS to change to splash
 [[NSRunLoop currentRunLoop] runMode:NSDefaultRunLoopMode beforeDate:[NSDate dateWithTimeIntervalSinceNow:0.02
} 
```

让当前的 runloop 运行片刻

有关答案的更多信息，请查看以下链接：

[iOS 在进入后台时拍摄视图快照的确切时间？](https://stackoverflow.com/questions/7937998/the-exact-moment-ios-takes-the-view-snapshot-when-entering-background)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:35:27.257

正如您所经历的，在应用程序恢复活动之前，不会修改实际的视图层次结构。尝试在 -applicationWillResignActive: 中设置一个属性/变量，这表明您应该在应用再次激活时显示启动屏幕，然后在 -applicationDidBecomeActive 中立即实际显示它：

# django - Django 表单插入记录而不是更新

> ID：13019333
> 
> 赞同：0
> 
> 时间：2012-10-22T20:29:42.710
> 
> 标签：django, django-forms

当我使用 url 中的 id 参数编辑记录，并且正在使用“elif 'id' in request.GET:”时，它不会更新记录，但会创建一个新行

```
@login_required
def login_save_page(request):
    if request.method == 'POST':
        form = LoginSaveForm(request.POST)
        if form.is_valid():
            # Create or get login.
            login1 = _login_save(request, form)
            return HttpResponseRedirect(
                                        '/user/%s/' % request.user.username
                                       )
    elif 'id' in request.GET:
     id2 = request.GET['id']
     name=''
     url=''
     Login_username =''
     notes= ''
     password=''
     try:
        login1 = login.objects.get(
                                   id = id2,
                                   username=request.user
                                  )
        name = login1.name
        url = login1.loginUrl
        Login_username = login1.login_username
        notes = login1.notes
        password = login1.password
     except (login.DoesNotExist):
      pass
     form = LoginSaveForm({
        'id': id2,
        'name': name,
        'url': url,
        'Login_username': Login_username,
        'notes': notes,
        'password': password
     })
    else:
        form = LoginSaveForm()
    variables = RequestContext(request, {
                                   'form': form
                                             })
    return render_to_response('login_save_page.html', variables) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:38:52.873

我假设您的表单是通过提交的，`POST`因此当您需要时（当用户提交表单时），elif“get”将永远不会触发。

您需要将该逻辑放在`if request.method == 'POST'`块内。

想想那个“elif”块什么时候触发。仅当请求方法不是`POST`时，这意味着仅在页面加载时。

# c# - Html.BeginForm 中的哈希

> ID：13019336
> 
> 赞同：1
> 
> 时间：2012-10-22T20:29:53.440
> 
> 标签：c#, asp.net-mvc

这是我遇到问题的行：

```
<% using(Html.BeginForm("Create#result", "Report", FormMethod.Post)) { %> 
```

使用 C# 3.5 和 MVC2，表单呈现如下：

```
<form action="/Report.aspx/Create#result" method="post"> 
```

现在使用 C# 4.0 和 MVC2，表单呈现如下：

```
<form action="/Report.aspx/Create%23result" method="post"> 
```

这会导致问题：

```
System.Web.HttpException (0x80004005): A public action method 'Create#result' was not found 
```

我认为新行为是有问题的，我不希望散列逃逸。它发生在哪里？我可以改变行为吗？

MVC 版本应该在某个时候更新，但是当这种行为开始导致问题时，我正在处理另一部分。

## 更新

我通过在客户端使用 jquery 更新表单操作来解决它。

**表格**

```
<% using(Html.BeginForm("Create", "Report", FormMethod.Post, new { id = "frmReport" })) { %> 
```

**Javascript**

```
var frmReport = $("#frmReport");
if (0 < frmReport.length) {
    var action = frmReport.attr("action");
    action = action + "#result";
    frmReport.attr("action", action);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:26:21.733

这发生在 MVC 类的深处，这`System.Web.Mvc.TagBuilder`意味着您可能无能为力。如果这段代码没有改变，我不会感到惊讶，但是底层的 html 编码函数是用 .NET 4 修改的。

```
private void AppendAttributes(StringBuilder sb)
{
    foreach (KeyValuePair<string, string> current in this.Attributes)
    {
        string key = current.Key;
        if (!string.Equals(key, "id", StringComparison.Ordinal) || !string.IsNullOrEmpty(current.Value))
        {
            string value = HttpUtility.HtmlAttributeEncode(current.Value);
            sb.Append(' ').Append(key).Append("=\"").Append(value).Append('"');
        }
    }
} 
```

也就是说，我很惊讶这首先对您有用，我相信某些浏览器 (IE) 不支持表单回发中的主题标签。

# php - Magento：无法获取购物车中最后一项的属性值

> ID：13019341
> 
> 赞同：3
> 
> 时间：2012-10-22T20:30:23.867
> 
> 标签：php, magento, shopping-cart

我在获取已放置在用户购物车中的产品的属性值时遇到了问题。

我有以下代码：

```
umask(0);
Mage::app();

Mage::getSingleton('core/session', array('name'=>'frontend'));
$session = Mage::getSingleton('checkout/session');
$cart = Mage::helper('checkout/cart')->getCart()->getItemsCount();

foreach ($session->getQuote()->getAllItems() as $item) {

$_product = Mage::getModel('catalog/product')->load($item->getId());

$attributeValue = $_product->getAttributeText('availability');

echo $attributeValue;

} 
```

它适用于购物车中的所有产品，除了最后一个产品。例如，我正在尝试获取我创建的“可用性”属性的值，该属性只能具有以下值“缺货”、“预购”、“缺货”之一。如果我的购物车中有 3 件商品，我可以获得前 2 件的正确值，但是对于最后一件商品，它只显示“否”。

我已经仔细检查了每个项目，以确保所有属性都设置正确，并且购物车中的任何数量的项目都会发生这种情况。

希望这只是我的一个愚蠢的错误。

任何帮助，将不胜感激。

谢谢。

解决了：

改变：

```
$_product = Mage::getModel('catalog/product')->load($item->getId()); 
```

到

```
$_product = Mage::getModel('catalog/product')->load($item->getProductId()); 
```

修复问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:18:14.870

问题出在这一行：

```
$_product = Mage::getModel('catalog/product')->load($item->getId()); 
```

与`$item->getId()`您一起获得 ID`Mage_Sales_Model_Quote_Item`而不是 `Mage_Catalog_Model_Product`. 您必须改为使用`$item->getProductId()`获取与当前报价项目关联的实际产品的 ID。

# ios - Safari 检测视频何时播放完毕

> ID：13019343
> 
> 赞同：1
> 
> 时间：2012-10-22T20:30:28.343
> 
> 标签：ios, video, mobile-safari

我有一个网站，其中包含要使用 IOS 设备播放的视频列表。当用户单击要观看的视频的直接链接时，视频会在视频播放器中打开。当视频播放完毕或用户点击确定按钮时，它会将用户带回视频列表。

视频播放完毕后，我需要能够在 js 中触发事件。移动 safari 似乎并没有真正刷新页面，只是重新显示它。是否有任何事件可以挂钩以检测视频的结尾？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:39:14.020

它应该是这样的（未经测试）：

```
video = document.getElementById('yourid');
video.addEventListener("ended", function(e) { 
  video.webkitExitFullScreen()
}); 
```

# visual-studio-2010 - 测试失败时如何忽略用户代码？

> ID：13019344
> 
> 赞同：1
> 
> 时间：2012-10-22T19:48:49.567
> 
> 标签：visual-studio-2010

我创建了大量方法来帮助我在 Visual Studio 2010 中执行单元测试断言。我还在测试中启用了“双击失败或不确定的单元测试结果显示测试中的失败点”选项执行选项。我的问题是，对于这些辅助方法，我希望失败点是调用我的辅助方法的堆栈框架，而不是辅助方法中抛出的异常。

显然，我可以执行“ShowDetails”并在堆栈中单击更高的位置，但这几乎可以抵消使用辅助方法节省的任何时间。

我尝试`[Debugger*]` 在我的方法中使用各种属性但没有成功。

这是一些示例代码来说明我的问题。

```
public void MyTest()
{
    // ACT
    var res = DoSomething();

    // ASSERT
    AssertDateRange(res, TimeSpan.FromDays(7));
}

public static void AssertDateRange(DateTime value, TimeSpan range)
{
    var difference = DateTime.Now.Subtract(value);
    if (Math.Abs(range.TotalMilliseconds) - Math.Abs(difference.TotalMilliseconds) < 0)
    {
        throw new AssertFailedException("DateTime was not within the expected range from now.");
    }        
} 
```

我希望双击将我置于 MyTest 方法中的方法调用上，而现在它将我置于 AssertDateRange 方法中的抛出位置。

# asp.net-mvc - 从 mvc4 视图调用后台方法

> ID：13019347
> 
> 赞同：0
> 
> 时间：2012-10-22T20:30:51.047
> 
> 标签：asp.net-mvc, view, methods

我想调用将在后台执行某些操作的方法，但我不想更改当前视图。这是方法：

```
public ActionResult BayesTraining(string s,string path)
    {
        XmlParse xp = new XmlParse();
        using (StreamWriter sw = System.IO.File.AppendText(path)) 
    {
        sw.WriteLine("d:/xml/"+xp.stripS(s)+".xml");
        sw.Close();
    }

        return RedirectToAction("Index");
    } 
```

如您所见，我目前正在使用 RedirectToAction，它只是在方法完成后重新加载页面。考虑到该方法不会影响 UI，我不想每次使用它时都刷新网页。它的工作应该在后台完成。那么，我怎么称呼它，而不需要重定向视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:49:44.680

如果你想要一些东西，你可以触发并忘记使用 ajax 调用。例如，如果您将操作方法​​更改为

```
public JsonResult BayesTraining(string s,string path)
{
    XmlParse xp = new XmlParse();
    using (StreamWriter sw = System.IO.File.AppendText(path)) 
    {
        sw.WriteLine("d:/xml/"+xp.stripS(s)+".xml");
        sw.Close();
    }

    return Json("Success");
} 
```

然后在您的视图中绑定到您需要通过 jQuery 的 UI 事件，例如绑定到 ID 为 BayesTraining 的按钮执行以下操作

```
$("#BayesTraining").click(function(){
     $.post('@Url.Action( "BayesTraining" , "ControllerNameHere" , new { s = "stringcontent", path="//thepath//tothe//xmlfile//here//} )', function(data) {
     //swallow success here.
   });
} 
```

免责声明：以上代码未经测试。

希望它会为您指明正确的方向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:56:33.190

如果方法不影响UI，是否需要返回ActionResult？它不能返回 void 吗？

```
public void BayesTraining(string s,string path)
{
    XmlParse xp = new XmlParse();
    using (StreamWriter sw = System.IO.File.AppendText(path)) 
    {
        sw.WriteLine("d:/xml/"+xp.stripS(s)+".xml");
        sw.Close();
    }

} 
```

# php - 保存到文件时将标头与 curl 分开

> ID：13019349
> 
> 赞同：-1
> 
> 时间：2012-10-22T20:31:01.647
> 
> 标签：php, wordpress, curl, header

我使用 curl 下载了一个 json 文件，并且这个脚本工作正常。但是我需要 CURLOPT_HEADER 的标头将其保存到单独的文件中或添加到输出数组而不是同一个文件中，这可能吗？现在一切都保存到这个文件中，我需要将文件头与文件分开，这是一个不必要的过程。

```
 /** 
 * Send a GET requst
 * @param string $get 
 * @return string 
 */ 
public function curl_get(array $get = NULL) 
{  

    $url = $get['host'] .'/'. $get['service'];
    $filename = PLUGIN_BASE . 'logs/'. $get['service'] .'_'. $this->nice_filename();
    $fp = fopen($filename, 'w');

    unset($get['host']);
    unset($get['service']);

    $defaults = array( 
        CURLOPT_URL => $url. (strpos($url, '?') === FALSE ? '?' : ''). http_build_query($get), 
        CURLOPT_HEADER => 1, 
        CURLOPT_RETURNTRANSFER => TRUE, 
        CURLOPT_TIMEOUT => 30,
        CURLOPT_FILE => $fp
    ); 

    $ch = curl_init(); 
    curl_setopt_array($ch, ($defaults)); 
    if( ! $result = curl_exec($ch)) 
    { 
        //$result = curl_error($ch); 
        $filename = trigger_error(curl_error($ch)); 
    } 

    curl_close($ch); 
    fclose($fp);

    $arg = array(
        'file'=>$filename,
        'curl_id'=>$fp
    );

    return $arg;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:08:17.720

您可以使用`CURLOPT_HEADERFUNCTION`为每个收到的标头指定一个调用的函数：

```
function readHeader($ch, $header)
{
    // do something with the value of `$header`

    // you must return the length of the header that you received
    return strlen($header);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:11:52.240

标头与数据用仅包含 \r\n 的行分开，因此您可以使用explode 来获取数据。从 curl 选项中取出 CURLOPT_FILE，将返回的字符串分解为单独的部分，然后自己将其保存到文件中。

```
list($header , $data) = explode("\r\n\r\n" , $result , 2); 
```

或者您可以使用打开另一个文件并使用 CURLOPT_WRITEHEADER 选项将标题写入单独的文件

# jquery - 选择属性未设置

> ID：13019351
> 
> 赞同：2
> 
> 时间：2012-10-22T20:31:19.647
> 
> 标签：jquery, select, option

这些都没有将值设置为包含所选单词。This means that when the select list gets passed back to php the selection become 'undone':

```
 jQuery("#tag_photo2").val("<?php echo $pg->m2; ?>").attr("selected",true);
    jQuery("#tag_photo2").val("<?php echo $pg->m2; ?>").attr('selected','selected');
    jQuery("#tag_photo2").val("<?php echo $pg->m2; ?>").prop("selected",true); 
```

下图表明选择实际上是已知的：

```
jQuery("#value2").html($("#tag_photo2 :selected").text() + " (VALUE: " + $("#tag_photo2").val() + ")"); 
```

当我显示“当前选择：test123（值：2）”时。

这里的选择是正确的，但是如果发送到 php 就会丢失。

尝试使用 jQuery 1.8.2 和 1.7.1、Firefox 15.0.1 和 Chrome 22.0.1229.94。

已经四处搜索，找不到任何其他方法来在选项的值字段中设置“选定”字样。

任何想法如何使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T20:21:43.280

尝试 .prop 而不是 .attr

```
$("#selectIDGoesHere > option[value='valueOfTheOptionHere']").prop("selected", true);
jQuery('#tag_photo1 > option[value="2"]').prop('selected',true) 
```

此外，如果您使用任何为选择设置皮肤的插件，例如 Chosen 或 Select2，则必须刷新它们。

# c# - 将 XML 节点添加到多个父节点（具有相同名称）

> ID：13019355
> 
> 赞同：4
> 
> 时间：2012-10-22T20:31:30.793
> 
> 标签：c#, .net, xml

我正在尝试将 XML 节点添加到多个父节点（具有相同的名称）。但它只是添加到 XML 的 Last 节点，而不是全部。

输入 XML

```
<Record>
 <Emp>
  <ID>12</ID>
  <Name>ABC</Name>
 </Emp>
 <Emp>
  <ID>12</ID>
  <Name>ABC</Name>
 </Emp>
</Record> 
```

我想将 Location 元素添加到每个 Emp 节点。我的代码如下：

```
XmlNodeList xNodeList = doc.SelectNodes("/Record/Emp");
XmlElement xNewChild = doc.CreateElement("Location");
        xNewChild.InnerText = "USA";
        foreach (XmlNode item in xNodeList)
        {
            item.AppendChild(xNewChild);
        }
doc.Save(path); 
```

但我得到这样的输出：

```
 <Record>
 <Emp>
  <ID>12</ID>
  <Name>ABC</Name>
 </Emp>
 <Emp>
  <ID>12</ID>
  <Name>ABC</Name>
  <Location>USA</Location>
 </Emp>
</Record> 
```

Location 元素尚未添加到第一个 Emp 节点。

注意：经过调试，我发现即使是第一个 Emp 节点也添加了元素。但是，在保存的 XML 文件中，我看到了这种奇怪的行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:35:56.120

你`xNewChild`是一个单一的新元素。简单地将其添加到多个节点只会序列化到最后一个节点。像这样的改变应该有效：

```
XmlNodeList xNodeList = doc.SelectNodes("/Record/Emp");
foreach (XmlNode item in xNodeList)
{
  XmlElement xNewChild = doc.CreateElement("Location");
  xNewChild.InnerText = "USA";
  item.AppendChild(xNewChild);
}
doc.Save(path); 
```

# tsql - 如何在同一操作中同时更新和选择

> ID：13019358
> 
> 赞同：2
> 
> 时间：2012-10-22T20:31:43.157
> 
> 标签：tsql

我如何在 TSQL 中做到这一点？:[如何同时 UPDATE 和 SELECT](https://stackoverflow.com/questions/2934369/how-update-and-select-at-the-same-time)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:35:35.223

链接问题中答案的 TSQL 等效项类似于

```
UPDATE [table]
SET foo=1
OUTPUT INSERTED.*, DELETED.*
WHERE boo=2 
```

在更新语句中，您可以使用`INSERTED`获取“之后”值和`DELETED`“之前”值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:34:17.650

您正在寻找该[`OUTPUT`子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)。

# .net - 如何让附加文本从 TextBox 的底部开始？

> ID：13019363
> 
> 赞同：0
> 
> 时间：2012-10-22T20:32:15.217
> 
> 标签：.net, wpf, textbox, chat

我希望第一行文本显示在 TextBox 的底部而不是顶部，这可能吗？我不想在附加第一行之前先用回车填充，我希望有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:59:32.723

添加

```
VerticalAlignment= "bottom" 
```

这应该使文本从文本框的底部开始对齐。我不知道当您的输入超过框的长度时会发生什么。

# java - 使用罐子中包含的罐子

> ID：13019367
> 
> 赞同：0
> 
> 时间：2012-10-22T20:32:21.707
> 
> 标签：java, jar, include, classpath

我正在开发一个依赖于库（jar 文件）的小框架。我设法将该依赖项包含在最终的框架 jar 文件中。但是当我包含这个框架 jar（包括其他库）时，我*可以*使用框架的类，但我*不能*使用框架 jar 中包含的依赖库的类。

我该如何解决这个问题？在我的框架中包含第三方库（即使它是在 GPL 许可下）是一种好习惯吗？我只是想减少框架用户（开发人员）必须做的工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:40:34.187

> 我该如何解决这个问题？

如果您使用[OneJar](http://one-jar.sourceforge.net/)提供的特殊类加载器，则可以嵌套 JAR ，但它会导致相当长的启动时间，当然还会增加另一个依赖项和复杂性。

在 JAR 文件中管理具有多个依赖项的类路径是所有 Java 开发人员都熟悉的事情。我认为试图避免它没有任何价值。

> 在我的框架中包含第三方库（即使它是在 GPL 许可下）是一种好习惯吗？

这取决于 - 如果您的框架也不是 GPL，那么您违反了许可并且可能会被起诉。无论您是否实际包含 GPL jar 都无关紧要。

# sql - 函数中的临时表和循环

> ID：13019369
> 
> 赞同：0
> 
> 时间：2012-10-22T20:32:27.453
> 
> 标签：sql, postgresql, plpgsql

我在 plpgsql 中有一个函数，它创建一个临时表，然后它有一个循环。问题是，每次循环时，它都会执行创建临时表的部分，因此会弹出一个错误说；

> ```
> ERROR:  relation "tmpr" already exists
> CONTEXT:  SQL statement "CREATE TEMPORARY TABLE tmpr (
>                 id int,
>                 source geometry,
>                 target geometry,
>                 dist_ft character varying
>         )" 
> ```

有什么办法可以防止部分代码执行多次？
您可以在下面找到代码：

```
DECLARE
    _r record;
    t record;
    i int := 0;
    j int := 1;
    count int := 0;
    source_geom character varying;
    target_geom character varying;
BEGIN
    BEGIN 
        CREATE TEMPORARY TABLE tmpr (
                id int,
                source geometry,
                target geometry,
                dist_ft character varying
        );
    END;

    BEGIN
        CREATE TEMPORARY TABLE tmp (
                ogc_fid int,
                wkb_geometry character varying,
                track_fid int
        );
    END;
-- END IF;
WHILE i < 3 --DEPENDS ON THE NUMBER OF TRACKS
LOOP

--j := 1;

--WHILE j < 29 --DEPENDS ON THE NUMBER OF TRACK POINTS
--LOOP

EXECUTE 'INSERT INTO tmp (ogc_fid, wkb_geometry, track_fid)
SELECT '|| quote_ident(gid_cname) ||' , ' ||quote_ident(geo_cname)||' , ' || quote_ident(tid_cname) ||'
FROM ' ||quote_ident(geom_table)|| '
WHERE ' ||quote_ident(tid_cname)|| ' = ' || i;

FOR _r IN EXECUTE 
  ' SELECT *' 
||' FROM  tmp' 

LOOP

EXECUTE 'INSERT INTO tmpr (id, source, target, dist_ft)
SELECT a.'|| quote_ident(gid_cname) || ' AS id,'
|| ' st_astext( a.'||quote_ident(geo_cname)||') AS source,' 
|| ' st_astext(b.'||quote_ident(geo_cname)||') AS target, ' 
|| ' ST_Distance(a.'||quote_ident(geo_cname) || ' ,  b.'||quote_ident(geo_cname)||') As dist_ft '
|| ' FROM tmp AS a INNER JOIN tmp As b ON ST_DWithin(a.'||quote_ident(geo_cname)|| ', b.'||quote_ident(geo_cname)|| ',1000)'
|| ' WHERE b.'||quote_ident(gid_cname)|| ' > a.'||quote_ident(gid_cname)|| ' AND b.'||quote_ident(tid_cname)|| ' = '||i|| 'AND a.'||quote_ident(tid_cname)|| ' = '||i|| 
   ' ORDER BY  dist_ft '
|| ' Limit 1 ';

--source_geom := temp.source;
--target_geom := temp.target;

EXECUTE 'update ' || quote_ident(geom_table) || 
    ' SET source = tmpr.source
    , target = tmpr.target
    FROM tmpr
    WHERE ' || quote_ident(gid_cname) || ' =  tmpr.id';

EXECUTE 'delete from tmpr';

END LOOP;

--j = j + 1;

--END LOOP;
EXECUTE 'delete from tmp';

i = i + 1;

END LOOP;

RETURN 'OK';
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:51:27.040

您可以使用该[`IF NOT EXISTS`](http://www.postgresql.org/docs/current/interactive/sql-createtable.html)子句来避免异常（在 pg 9.1 中引入）：

```
CREATE TEMPORARY TABLE **IF NOT EXISTS** tmpr (...);
```

在这种情况下，您最好检查表中是否有行：

```
IF EXISTS (SELECT 1 FROM tmpr) THEN  -- table itself exists after above command
   DELETE FROM tmpr;
END IF; 
```

为了避免函数的后续调用发生冲突，或者通常，如果在函数完成后不再需要临时表，请添加`ON COMMIT DROP`：

```
CREATE TEMPORARY TABLE IF NOT EXISTS tmpr (...) **ON COMMIT DROP;**
```

*如果您在单个事务*中重复调用该函数，这仍然会失败。在这种情况下，您可以将显式`DROP TABLE`语句添加到函数的末尾。

# jquery - 我在哪里以及如何在 BackboneJS 应用程序中实现 SlidesJS？

> ID：13019371
> 
> 赞同：0
> 
> 时间：2012-10-22T20:32:29.787
> 
> 标签：jquery, backbone.js

我是 BackboneJS 的新手，我正在开发一个在其中一个视图中有幻灯片的小应用程序。我不确定将在视图中启动幻灯片的代码放在哪里。

我正在使用**[SlidesJS](http://slidesjs.com)**，我想知道在哪里抛出这个代码：

```
$("#slides").slides(); 
```

如果我把它放在 jQuery 就绪处理程序中（BackboneJS 应用程序之外），它只会让幻灯片放映一次，并且它自然不会继续工作，因为视图被重新渲染。

无论出于何种原因，如果我将代码放入视图的渲染函数中，我也不会让它工作（我想知道这是否是个好主意）：

```
render: function() {
    this.$el.html(this.template());
    this.$("#slides").slides();
    return this;
} 
```

在 BackboneJS 中实现 SlidesJS 或类似 jQuery 工具的最佳位置在哪里？

**谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:50:31.200

看起来 SlidesJS 需要渲染所有内容并在 DOM 中执行它的操作，这可能是因为它需要大小和位置信息来排列幻灯片；我在 Google Maps 上遇到过类似的问题，解决方案是将绑定推迟到将视图添加到 DOM*之后：*`el`

```
var $slides = this.$(...);
setTimeout(function() {
    $slides.slides()
}, 0); 
```

然后调用者将：

```
$something.append(v.render().el); 
```

使用`setTimeout`零超时是在浏览器控制并更新 DOM 之后运行某些东西的技巧。你也可以使用[`_.defer`](http://underscorejs.org/#defer)：

```
_(function() { $slides.slides() }).defer(); 
```

但这只是一种奇特的调用方式`setTimeout`。

这种方法的缺点是您假设调用者将调用您的视图`render`，然后立即将您添加`el`到 DOM。不过，这并没有太大的缺点，这`x.append(v.render().el)`是标准的 Backbone 用法。

这种东西闻起来有点笨拙，但它很安全，有时您必须笨拙地解决问题。

# php - 如何在 php 中使用正则表达式从字符串中提取某个数字？

> ID：13019373
> 
> 赞同：-2
> 
> 时间：2012-10-22T20:32:42.533
> 
> 标签：php, regex

我有一个字符串（文件名）：`s_113_2.3gp`

如何提取出现在第二个下划线之后的数字？在这种情况下，它是 ' `2`'，但在某些情况下，它可以是几位数字。

此外，出现在第一个下划线之后的位数可能会有所不同，因此此字符串的长度不是恒定的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T20:34:21.557

您可以使用捕获组：

```
preg_match('/_(\d+)\.\w+$/', $str, $matches);
$number = $matches[1]; 
```

`\d+`代表 1 个或多个数字。它周围的括号捕获它，因此您以后可以使用`$matches[1]`. `.`需要转义，否则它将匹配除换行符之外的任何字符。`\w+`匹配 1 个或多个单词字符（数字、字母、下划线）。最后`$`代表字符串的结尾并“锚定”正则表达式（否则你会遇到包含多个字符串的问题`.`）。

这也允许任意文件扩展名。

正如 Ωmega 在下面指出的那样，还有另一种可能性，即不使用捕获组。使用环视的概念，您可以避免`_`在开头和`\.\w+$`结尾匹配：

```
preg_match('/(?<=_)\d+(?=\.\w+$)/', $str, $matches);
$number = $matches[0]; 
```

但是，我建议在应用这个相当小的优化之前进行分析。但这是要记住的事情（或者更确切地说，要继续阅读！）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:46:44.067

使用正则表达式环视它是非常短的代码：

```
$n = preg_match('/(?<=_)\d+(?=\.)/', $str, $m) ? $m[0] : ""; 
```

...内容为：查找下划线和句`\d+`点之间的一位或多位数字`(?<=_)``(?=\.)`

# android - 检测默认启动器，android

> ID：13019374
> 
> 赞同：1
> 
> 时间：2012-10-22T20:32:45.777
> 
> 标签：android, android-package-managers

是否可以从您的应用程序中检测到设备上的默认启动器应用程序是什么？

我正在使用 PackageManager，但似乎看不到我在寻找什么，我希望我的启动器类型的应用程序在设置为默认启动器时表现不同，所以我试图以编程方式检测用户是否已将其设置为是否为默认启动器

无论我将什么设置为默认启动器，我在下面尝试的代码都会返回 Android 系统：

```
pm = getApplicationContext().getPackageManager();
        Intent i = (new Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_LAUNCHER));
        final ResolveInfo mInfo = pm.resolveActivity(i, 0);
        Log.v("curent default launcher",":::::::::"+ pm.getApplicationLabel(mInfo.activityInfo.applicationInfo)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:42:15.113

在 Google 提供的启动器替换示例中，活动在清单中具有以下定义：

```
 <activity android:name="Home"
                android:theme="@style/Theme"
                android:launchMode="singleInstance"
                android:stateNotNeeded="true">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.HOME"/>
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity> 
```

基于此，您应该添加以下类别以查询启动器

```
Intent i = new Intent(Intent.ACTION_MAIN);
i.addCategory(Intent.CATEGORY_HOME);
i.addCategory(Intent.CATEGORY_DEFAULT); 
```

# jstl - 要在 html 中使用的 JSTL 连接字符串

> ID：13019377
> 
> 赞同：0
> 
> 时间：2012-10-22T20:33:10.090
> 
> 标签：jstl

我将如何连接一个字符串，以便它可以正确地呈现在 HTML 中？

```
<c:set var="filter" value="${view}"/> 
```

例如，我在 JavaScript 中做了这样的事情：

```
var view;
var sors;
var filterCriteria = view + "<br>";
if  (sors != null)  
{
   filterCriteria = filter + "SORs: " + sors + ", ";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:45:42.410

如果你想输出`<br>`为 html 标签，你可以使用`c:out`as`<c:out escapeXml="false" value="${view} <br>"/>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:49:21.037

那么答案是

```
${view} <br> whatever 
```

或者

```
<c:out value="${view}"> <br> whatever 
```

第一个不会转义`view`( `<`, `>`, `&`, `'`, `"`) 中的 HTML 特殊字符，而第二个会（并将它们转换为`&lt;`, `&gt;`,`&amp;`等）

# css - 顽固的导航栏不居中？

> ID：13019382
> 
> 赞同：0
> 
> 时间：2012-10-22T20:33:34.693
> 
> 标签：css, vbulletin

几天来，我一直试图在我的 Vbulletin 网站上将导航栏居中。我尝试过更改父类、子类，在 html 元素中手动插入 CSS，但似乎有些东西在某处覆盖了样式。Firebug 似乎没有为我找出问题所在。

论坛链接：[http ://www.mobileassaultgroup.co.uk/forum/](http://www.mobileassaultgroup.co.uk/forum/)

导航栏就在横幅图像的下方。

我试过了

```
display: block-inline
margin-left: 50%;
margin-right: 50%;
horizontal-position: middle; 
```

两者都`<ul>`无济于事`<div>`；它只是稍微偏左一点。

它也不是右侧的搜索栏，因为我从页面中删除了它，它仍然停留在那个位置。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:39:20.847

你的这个 css 行不通。这反而。

[http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support](http://matthewjamestaylor.com/blog/beautiful-css-centered-menus-no-hacks-full-cross-browser-support)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:33:57.093

如果您删除搜索框，这样的事情将起作用。

CSS：

```
#navtabs_container {
    display: block;
    width: 600px;
    margin: auto;
}

#vbtab_forum ul {
    left: 50%;
    margin-left: -260px;
} 
```

# c++ - 在 Windows 7 上运行的 QCA（Qt C++ 加密库）问题

> ID：13019383
> 
> 赞同：3
> 
> 时间：2012-10-22T20:33:34.480
> 
> 标签：c++, qt, encryption

我在 Windows 7 上使用 Qt 4.8.1、MinGW 编译器和 Qt Creator。我想在我的项目中添加一个加密/解密库。在网上搜索了几天后，我找到了[QCA](http://delta.affinix.com/qca/)。幸运的是，我找到了一个使用我正在使用的相同 C++ 编译器的预构建版本，以及所需[插件](http://delta.affinix.com/download/qca/2.0/qca-2.0.1-mingw.zip)[的](http://delta.affinix.com/download/qca/2.0/qca-2.0-plugins-latest-mingw.zip)预构建版本。我按照[说明](http://www.essentialunix.org/index.php?option=com_content&view=article&id=48%3aqcatutorial&catid=34%3aqttutorials&Itemid=53)将 QCA 库添加到我的项目中。我使用这样的代码使用 AES 进行加密：

```
QCA::Initializer init = QCA::Initializer();

//Here where the execution stops
QCA::SymmetricKey key = QCA::SymmetricKey(16);

QCA::InitializationVector iv = QCA::InitializationVector(16);

QCA::Cipher cipher = QCA::Cipher(QString("aes128"), QCA::Cipher::CBC,
                                 QCA::Cipher::DefaultPadding, QCA::Encode,
                                 key, iv);

if (!QCA::isSupported("aes128-cbc-pkcs7"))
{
    qDebug() << "AES128 is not supported";
    return;
} 
```

代码编译得很好，但是当我运行应用程序时，由于未知原因而停止。

我真的厌倦了这个错误，如果有人可以提供帮助，将非常非常非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-18T09:12:15.497

## 对于可能会陷入困境的未来程序员

QCA 在运行时加载插件，所以即使它编译得很好，如果插件不在可搜索的文件夹中，它也不会加载。

您可以通过调用来检查是否是问题所在`qDebug() << QCA::supportedFeatures();`。如果插件**没有**被加载，你会得到类似的东西：

```
("random", "md5", "sha1", "keystorelist") 
```

您应该能够通过调用以下命令查看 QCA 正在查找的文件夹：

```
qDebug("%s", QCA::pluginDiagnosticText().toUtf8().constData()); 
```

显然，插件必须放在`crypto`libs 根目录中的一个子目录中。

您可以使用以下命令检查 Qt 查找库的所有路径：

```
qDebug() << QCoreApplication::instance()->libraryPaths(); 
```

该文档可能有一些有用的信息：[http ://doc.qt.io/qt-4.8/qpluginloader.html](http://doc.qt.io/qt-4.8/qpluginloader.html)

# c# - 处理 IAsyncOperationWithProgress 的最简洁方法？

> ID：13019384
> 
> 赞同：0
> 
> 时间：2012-10-22T20:33:40.537
> 
> 标签：c#, .net, asynchronous, windows-runtime, async-await

我使用 C# 已经有一段时间了，但不知何故还没有享受到使用`await/async`.Net 4 中的全部新功能的乐趣。好吧，现在我正在制作一个链接到 WinRT 库的控制台应用程序，而 WinRT 真的..好吧，异步的。

我现在需要做的一件事是安装一个包。所以，我使用`PackageManager.AddPackageAsync`This is course is asynchonous 并返回一个`IAsyncOperationWithProgress`

我知道我可以做类似的事情

```
bool Done=false;
void Foo()
{
    var tmp=new PackageManager.AddPackageAsync(...);
    tmp.Completed= ... FooBar;
    while(!Done){}
}
void FooBar(...)
{
    Done=true;
} 
```

但我很确定整个 async 和 await 东西就是为这种情况而设计的。但是，我不明白如何在这种情况下使用它`IAsyncOperationWithProgress`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:35:29.693

.Net 包含一个`GetAwaiter()`可等待的扩展方法`IAsyncOperationWithProgress`。你可以只写`await tmp;`一个`async`方法。

您的`async`方法将返回一个`Task`（或`Task<T>`），您可以`await`从另一个异步方法或调用`Wait()`同步阻塞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:50:32.313

Async and Await 允许您对 Async 操作进行编程，就好像它发生在调用线程上一样。首先，您必须将您的操作声明为异步，然后等待其他人的异步操作。最后，您可以在该操作完成后执行您想做的任何工作。

```
async void Foo()
{
  var tmp=await new PackageManager().AddPackageAsync(...);
  //do something else;
} 
```

调用 Foo 会使其在后台运行，但是当 AddPackageAsync 完成时，Foo 会重新加入调用线程（例如 UI 线程）以完成其工作。

另一种选择是调用 GetAwaiter 扩展方法并在其上调用 Wait() 以手动阻止，直到操作完成。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T09:04:05.670

您可以通过使用 AsTask 方法的重载来订阅该进度，如下所示

`...= await new PackageManager().AddPackageAsync(...).AsTask(new Progress<DeploymentProgress>(...))`;

# haskell - 有没有一种简单的方法可以将派生 Enum 的数据类型转换为列表？

> ID：13019386
> 
> 赞同：3
> 
> 时间：2012-10-22T20:33:46.017
> 
> 标签：haskell, enums, algebraic-data-types

我有一段看起来像这样的代码：

```
data SomeData = A | B | C | D | E deriving (Show, Enum) 
```

我希望能够轻松地将某些值映射到这些类型。假设我想将`char`s 映射到一个`SomeData`类型，我可能会这样做：

```
mappings = zip "abcde" [A, B, C, D, E] 
```

这会产生`[('a',A),('b',B)...]`等等。我希望`Enum`类型类可以让我能够`[A, B, C, D, E]`通过使用一些便利函数将数据类型转换为我上面描述的列表（）轻松地做到这一点。

标准库中有这样的功能吗？或者如果我想使用这样的东西，我需要自己定义它吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T20:53:09.263

你可以更通用：

```
-- added deriving Bounded
data SomeData = A | B | C | D | E deriving (Show, Enum, Bounded)

fullRange :: (Bounded a, Enum a) => [a]
fullRange = enumFromTo minBound maxBound 
```

然后只需调用`fullRange`（如果需要，使用显式类型注释：）`fullRange :: [SomeData]`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T20:51:53.733

如果您另外派生`Bounded`，那么您甚至可以在不明确知道“最小”构造函数名称是什么的情况下执行此操作：

```
Prelude> data SomeData = A | B | C | D | E deriving (Show, Enum, Bounded)
Prelude> [minBound :: SomeData ..]
[A,B,C,D,E] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-22T20:53:59.613

一般来说，我会做

```
mappings = zip "abcde" [A..] 
```

但我很想去

```
mappings = zip ['a' ..] [A ..] 
```

这样如果我稍后添加其他字母，代码就会更新。

进行我定义的最大限度地面向未来的工作

```
import Data.Char

data SomeData = A | B | C | D | E deriving (Show, Enum, Bounded)

allData :: SomeData
allData = enumFrom minBound

mapppings = zip (map (toLower.head.show) allData) allData 
```

我对未来的唯一假设是它由单个字母组成。

但是，这是在播放，实际上并没有那么清楚。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-22T20:52:19.323

添加`Bounded`到您的推导中，您`[minBound ..]`可以获得完整的列表。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-22T20:36:41.700

如果您查看[http://hackage.haskell.org/packages/archive/base/3.0.3.2/doc/html/GHC-Enum.html](http://hackage.haskell.org/packages/archive/base/3.0.3.2/doc/html/GHC-Enum.html)您可以看到您需要的功能是类型类的一部分`Enum`，如果我正确理解你的问题。

```
>enumFrom A
[A, B, C, D, E]
it :: [SomeData] 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-10-22T20:40:24.010

实际上，您可以只使用一个范围。

```
[A .. E] 
```

如宝贵的[Learn You A Haskell](http://learnyouahaskell.com/making-our-own-types-and-typeclasses)中所述。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-22T20:41:02.007

在 ghci 中试试这个

```
> [A ..]
[A,B,C,D,E] 
```

# mysql - mysql替换字符串+下一个字符

> ID：13019387
> 
> 赞同：0
> 
> 时间：2012-10-22T20:33:48.740
> 
> 标签：mysql, sql, replace

MySQL中是否可以`REPLACE`使用字符串+下一个字符？类似`LIKE`下划线的东西。

例如，如果`text`column 是 this: `12 13 14 14_B 15 14_A`，则`REPLACE`全部`14_*`为空字符，替换后的文本应为： `12 13 14 15`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:50:40.050

您将希望在 MySQL 中使用正则表达式 UDF 来执行此操作。关键成分是

1.  正则表达式 UDF -[在这里检查](https://stackoverflow.com/questions/986826/how-to-do-a-regular-expression-replace-in-mysql)
2.  正则表达式本身

如果您**只**看到需要更换的其中 2 到 4 个，那么穷人的工作方法（[SQL Fiddle](http://www.sqlfiddle.com/#!2/8c5b6/7/0)）：

```
SELECT *,IF(LOCATE('14_',B)+3<=Length(B),
         INSERT(B,LOCATE('14_',B),4,''),B) C
FROM
(
  SELECT *,IF(LOCATE('14_',A)+3<=Length(A),
           INSERT(A,LOCATE('14_',A),4,''),A) B
  FROM (
    SELECT *,IF(LOCATE('14_',x)+3<=Length(X),
             INSERT(X,LOCATE('14_',x),4,''),X) A
    FROM X
  ) Q1
) Q2 
```

我只提供了 3 次替换，但您可以轻松扩展模式。仅包括最外层查询所需的基表中的列。

# c++ - 在条件变量上调用通知时，互斥锁是否会解锁？

> ID：13019389
> 
> 赞同：11
> 
> 时间：2012-10-22T20:33:52.660
> 
> 标签：c++, c++11, condition-variable

我试图了解在条件变量中使用互斥锁时会发生什么。

在以下示例中，取自[cppreference](http://en.cppreference.com/w/cpp/thread/condition_variable)

```
int main()
{
    std::queue<int> produced_nums;
    std::mutex m;
    std::condition_variable cond_var;
    bool done = false;
    bool notified = false;

    std::thread producer([&]() {
        for (int i = 0; i < 5; ++i) {
            std::this_thread::sleep_for(std::chrono::seconds(1));
            std::unique_lock<std::mutex> lock(m);
            std::cout << "producing " << i << '\n';
            produced_nums.push(i);
            notified = true;
            cond_var.notify_one();
        }   

        done = true;
        cond_var.notify_one();
    }); 

    std::thread consumer([&]() {
        std::unique_lock<std::mutex> lock(m);
        while (!done) {
            while (!notified) {  // loop to avoid spurious wakeups
                cond_var.wait(lock);
            }   
            while (!produced_nums.empty()) {
                std::cout << "consuming " << produced_nums.front() << '\n';
                produced_nums.pop();
            }   
            notified = false;
        }   
    }); 

    producer.join();
    consumer.join();
} 
```

生产者线程`cond_var.notify_one()`在互斥锁解锁之前调用。调用 notify 时互斥锁是否`m`解锁，还是仅在互斥锁解锁时才出现通知？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-22T20:38:23.793

通知不会解锁互斥锁。您可以（间接地）告诉您，因为您没有`notify_one()`像您那样将锁传递给`wait()`，这确实在等待时释放了互斥锁。

另一方面，被通知的线程*被*“立即”通知。但他们不一定会`wait()`立即返回。在他们可以从那里返回之前，`wait()`他们必须首先重新获取互斥锁，因此他们将在那里阻塞，直到通知线程释放它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-24T20:14:26.350

锁在构造函数中被获取并在析构函数中释放`std::unique_lock`。从这些信息中，您可以推断生产者在调用`notify_one()`完成后释放了锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-03T16:42:03.193

出于性能原因，我建议在通知其他线程之前解锁互斥锁。

# php - 将编码字符转换为普通 [AZ] 字符

> ID：13019395
> 
> 赞同：-3
> 
> 时间：2012-10-22T20:34:14.043
> 
> 标签：php, xml, encoding, character-encoding

> **可能重复：**
> [如何将重音字符转译为纯 ASCII 字符？](https://stackoverflow.com/questions/3542717/how-to-transliterate-accented-characters-into-plain-ascii-characters)

我在 PHP 中的编码有问题，例如我想要

`Orléans`被转化为`Orleans`

`Angoulême`至`Angouleme`

`Ň`至`N`

...等等看这里的表格

`http://www.thesauruslex.com/typo/eng/enghtml.htm`

有针对这个的解决方法吗？并且当脚本遇到非 [AZ] 字符以使其成为 XML ENTITY 时。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:37:16.100

可能使用：`iconv('utf-8', 'ascii//TRANSLIT', $text);`

更多信息在这里： http: [//php.net/manual/en/function.iconv.php](http://php.net/manual/en/function.iconv.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:40:02.163

```
 $str1 = 'Orléans'
  $str2 = 'Angoulême'
  $rule = 'NFD; [:Nonspacing Mark:] Remove; NFC';

  $transliter = Transliterator::create($rule); 
  echo $transliter->transliterate($str1);
  echo $transliter->transliterate($str2); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-10-22T21:25:58.637

```
$unwanted_array = array('Š'=>'S', 'š'=>'s', 'Ž'=>'Z', 'ž'=>'z', 'À'=>'A', 'Á'=>'A', 'Â'=>'A', 'Ã'=>'A', 'Ä'=>'A', 'Å'=>'A', 'Æ'=>'A', 'Ç'=>'C', 'È'=>'E', 'É'=>'E',
'Ê'=>'E', 'Ë'=>'E', 'Ì'=>'I', 'Í'=>'I', 'Î'=>'I', 'Ï'=>'I', 'Ñ'=>'N', 'Ò'=>'O', 'Ó'=>'O', 'Ô'=>'O', 'Õ'=>'O', 'Ö'=>'O', 'Ø'=>'O', 'Ù'=>'U',
'Ú'=>'U', 'Û'=>'U', 'Ü'=>'U','Ü'=>'U', 'Ý'=>'Y', 'Þ'=>'B', 'ß'=>'Ss', 'à'=>'a', 'á'=>'a', 'â'=>'a', 'ã'=>'a', 'ä'=>'a', 'å'=>'a', 'æ'=>'a', 'ç'=>'c',
'è'=>'e', 'é'=>'e', 'ê'=>'e', 'ë'=>'e', 'ì'=>'i', 'í'=>'i', 'î'=>'i', 'ï'=>'i', 'ð'=>'o', 'ñ'=>'n', 'ò'=>'o', 'ó'=>'o', 'ô'=>'o', 'õ'=>'o',
'ö'=>'o', 'ø'=>'o', 'ù'=>'u', 'ú'=>'u', 'û'=>'u','ü'=>'u', 'ý'=>'y', 'ý'=>'y', 'þ'=>'b', 'ÿ'=>'y' );

// TESTING
$str1 = 'Orléans';
$str2 = 'Angoulême';
echo strtr($str1,$unwanted_array); 
```

这就是我所需要的，为什么工作得这么好，却这么简单？

# c# - 将绝对路径转换为相对路径C#

> ID：13019402
> 
> 赞同：9
> 
> 时间：2012-10-22T20:34:47.230
> 
> 标签：c#, .net

> **可能重复：**
> [获取相对于当前工作目录的路径？](https://stackoverflow.com/questions/703281/getting-path-relative-to-the-current-working-directory)

我在 C# 中有代码，其中包含一些从绝对路径到相对路径的图像，因此无论应用程序折叠位于何处，都可以找到该图像。

例如，我的代码（以及我的笔记本电脑中的图像）中的路径是

```
C:/something/res/images/image1.jpeg 
```

我希望我的代码中的路径是

```
..../images/image1.jpeg 
```

所以它可以在文件夹所在的任何地方运行，无论`C:`分区的名称是什么等。

我想在我的代码中有一个独立于应用程序文件夹位置的路径，或者它是否在另一个分区中，只要它与解决方案的其余部分位于同一文件夹中。

我有这个代码：

```
 try 
 { 
     File.Delete("C:/JPD/SCRAT/Desktop/Project/Resources/images/image1.jpeg");
 } 
 catch (Exception) 
 { 
      MessageBox.Show("File not found:C:/Users/JPD/Desktop/Project/images/image1.jpeg");
  } 
```

仅当文件和文件夹位于该特定路径中时，此代码才会运行（这也是代码的位置）我希望该路径是相对的，因此无论我放置整个文件夹（代码、文件等），程序仍将只要代码（位于项目文件夹下）与文件夹图像位于同一位置，就可以工作......我该怎么办？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-22T21:26:54.087

相对路径基于运行应用程序的二进制文件。默认情况下，您的二进制文件将输出到`[directory of your .csproj]`/bin/debug. 因此，假设您想创建与 .csproj 相同级别的图像文件夹。然后您可以使用相对路径“../../images/someImage.jpg”访问您的图像。

为了更好地了解这一点，请尝试以下测试：

1）创建一个新的visual studio示例项目，

2) 创建与 .csproj 相同级别的图像文件夹

3）将一些文件放在图像文件夹中

4）将此示例代码放入您的主要方法中 -

```
 static void Main(string[] args)
    {
        Console.WriteLine(Directory.GetCurrentDirectory());
        foreach (string s in Directory.EnumerateFiles("../../images/"))
        {
            Console.WriteLine(s); 
        }
        Console.ReadLine(); // Just to keep the console from disappearing.
    } 
```

您应该会看到您在步骤 (3) 中放置的所有文件的相对路径。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-22T20:38:44.833

请参阅：[获取相对于当前工作目录的路径？](https://stackoverflow.com/questions/703281/getting-path-relative-to-the-current-working-directory)

```
Uri uri1 = new Uri(@"c:\foo\bar\blop\blap");
Uri uri2 = new Uri(@"c:\foo\bar\");
string relativePath = uri2.MakeRelativeUri(uri1).ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:11:12.473

根据程序的设置，您可以通过跳过完整路径字符串的一部分来简单地使用相对路径。这不是吹牛的，所以 J.Skit 可能是我的闪亮之处，但我得到的印象是你只是想让它工作。美丽是后来的问题。

```
String absolutePath = @"c:\beep\boop\HereWeStart\hopp.gif";
String relativePath = absolutePath.Substring(13); 
```

然后，如果您需要/希望，您可以将数字 13（这是一种丑陋且不受欢迎的方法，但仍然有效）交换为动态计算的数字。例如（假设您的相对路径开始的目录“HereWeStart”是该字符串在 中的第一次出现`absolutePath`）您可以按如下方式进行。

```
String absolutePath = @"c:\beep\boop\HereWeStart\hopp.gif";
int relativePathStartIndex = absolutePath.IndexOf("HereWeStart");
String relativePath = absolutePath.Substring(relativePathStartIndex); 
```

另外，你的问题引出了另一个问题。我想知道你是如何获得绝对路径的。也许有一种更聪明的方法可以一起避免喧嚣？

编辑

您也可以尝试以下方法。忘记`Directory`给你一个绝对路径的类。直接走相对路径。我假设您尝试删除的所有文件都在同一个目录中。如果没有，您将需要添加更多线路，但当我们到达那里时，我们会越过那座桥。

不要忘记将答案标记为绿色检查（或解释仍然缺少或可改进的内容）。

```
String
  deletableTarget = @"\images\image1.jpeg", 
  hereWeAre = Environment.CurrentDirectory;
MessageBox.Show("The taget path is:\n" + hereWeAre + deletableTarget);

try
{ File.Delete(hereWeAre + deletableTarget); }
catch (Exception exception)
{ MessageBox.Show(exception.Message); } 
```

另外，请注意我冒昧地更改了您的异常处理。当您**的**工作正常时，依靠内置消息传递系统是一种更好的方式。这样，您将获得更专业的错误消息。并不是说我们在运行时会遇到任何错误，对吧？;)

# sorting - 使用多个订购条件重新订购商品

> ID：13019409
> 
> 赞同：2
> 
> 时间：2012-10-22T20:35:18.010
> 
> 标签：sorting

**场景**：

*   照片清单
*   每张照片都有以下属性
    *   `id`
    *   `sequence_number`
    *   `main_photo_bit`
*   第一张照片`main_photo_bit`设置为`1`（所有其他照片都是`0`）
*   照片按`sequence_number`（*任意*）排序
*   主图不一定最低`sequence_number`（排序前）

见下表：

```
id, sequence_number, main_photo_bit
1   10               1             
2    5               0             
3   20               0 
```

现在您想通过更改序列号和主照片位来更改顺序。

**排序后的要求：**

*   第一`sequence_number`张照片的没有改变
*   第一`sequence_number`张照片的最低
*   尽可能少的变化

**例子：**

示例 #1（第二张照片放在第一个位置）：

```
id, sequence_number, main_photo_bit
2   10               1             
1   15               0             
3   20               0 
```

*这就是发生的事情：*

*   *id 1：新建`sequence_number`并`main_photo_bit`设置为`0`*
*   *id 2：旧的第一张照片（id 2）`sequence_number`并`main_photo_bit`设置为`1`*
*   *id 3：什么都没发生*

示例#2（第三张照片到第一位置）：

```
id, sequence_number, main_photo_bit
3   10               1             
1   20               0             
2   30               0 
```

*这就是发生的事情：*

*   *id 1：新`sequence_number`的比第一张照片大并且`main_photo_bit`到`0`*
*   *id 2：新`sequence_number`的大于新生成的第二个`sequence_number`*
*   *id 3：旧的第一张照片`sequence_number`并`main_photo_bit`设置为`1`*

**计算保存新订单所需步骤的最佳方法是什么？**

*编辑：*
我想要尽可能少的更新的原因是因为我想将它同步到外部服务，这是一个非常昂贵的操作。
我已经得到了该算法的工作原型，但在某些极端情况下它会失败。因此，与其修补它（这可能有效——但它会变得比现在更复杂），我想知道是否有其他（更好的）方法可以做到这一点。
在我的版本中（简而言之），它对照片进行排序（更改`sequence_number`'s），并交换 's `main_photo_bit`，但这不足以解决所有场景。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:09:33.160

据我了解，一个好的解决方案不仅会尽量减少更改（因为**更新** 是一项昂贵的操作），而且还会尽量减少**未来的更改**，因为越来越多的照片被重新排序。我首先添加一个临时字段`dirty`，以指示该行是否**必须**更改：

```
id, sequence_number, main_photo_bit, dirty
 1         10               1        false
 2          5               0        false
 3         20               0        false
 4         30               0        false
 5         31               0        false
 6         33               0        false 
```

如果有`sequence_number`比第一个小的行，它们肯定会改变（要么获得更大的数字，要么成为第一个）。让我们将它们标记为`dirty`：

```
id, sequence_number, main_photo_bit, dirty
 2          5               0        true 
```

（如果第一个有最低的不是很重要，请跳过这一步`sequence_number`）

现在让我们看看照片列表，因为它们应该在结果中（根据问题，只有**一张**照片改变了位置，从任何地方到任何地方）。粗体字：

> [1, **2** , 3, 4, 5, 6] # 原始排序
> 
> [ **2** , **1** , 3, 4, 5, 6] # 示例 1：第 2 到第 1 名
> 
> [ **3** , **1** , **2** , 4, 5, 6] # 示例 2：第 3 到第 1 名
> 
> [1, **2** , 4, **3** , 5, 6] # 例子3：第3到第4名
> 
> [1, **3** , **2** , 4, 5, 6] # 示例 4：第 3 到第 2 名

首先要做的是确保第一个元素具有最低的`sequence_number`. 如果它没有改变位置，那么根据定义它已经改变了，否则旧的第一个应该被标记为脏，`main_photo_bit`清除它，新的应该接收这些值给它自己。

此时，第一个元素应该有一个固定的`sequence_number`，并且每个脏元素都可以随意更改其值（因为无论如何它都必须更改，因此最好更改为有用的值）。在继续之前，我们必须确保**可以**通过仅更改脏行来解决它，或者如果更多的行也必须被弄脏。这只是确定每对干净行之间的间隔是否足够大以适应它们之间的脏行数：

```
[10, D, 20, 30, 31, 33]   # Original ordering (the first is dirty, but fixed)

[10, D, 20, 30, 31, 33]   # Example 1: 2nd to 1st place (ok: 10 < ? < 20)
[10, D, D, 30, 31, 33]    # Example 2: 3rd to 1st place (ok: 10 < ? < ? < 30)
[10, D, 30, D, 31, 33]    # Example 3: 3rd to 4th place (NOT OK: 30 < ? < 31)
  [10, D, 30, D, D, 33]   #   must mark 5th as dirty too (ok: 30 < ? < ? < 33)
[10, D, D, 30, 31, 33]    # Example 4: 3rd to 2nd place (ok) 
```

现在只需将 new 分配给`sequence_number`脏行即可。一个简单的解决方案是只增加前一个，但更好的方法是将它们设置为尽可能**等距**。这样，未来的重新排序需要更少更改的可能性更大（换句话说，为了避免像示例 3 这样的问题，其中由于某些`sequence_number`s 彼此太接近而必须更新比必要更多的行）：

> [ **10** , **15** , 20, 30, 31, 33] # 示例 1：第 2 名到第 1 名
> 
> [ **10** , **16** , **23** , 30, 31, 33] # 示例 2：第 3 到第 1 名
> 
> [10, **20** , 30, **31** , **32** , 33] # 示例 3：第 3 到第 4 名
> 
> [10, **16** , **23** , 30, 31, 33] # 示例 4：第 3 到第 2 名

* * *

奖励：如果您**真的**想将解决方案推向极限，请进行两次计算 - 一次移动照片，另一次固定并移动周围的照片 - 看看哪一次导致较少的变化。以示例 3A 为例，我们将其视为“第 4 到第 3 位”而不是“第 3 到第 4 位”（排序结果相同，但变化不同）：

> [1, **2** , **4** , 3, 5, 6] # 示例 3A：第 4 到第 3 名
> 
> [10, D, D, 20, 31, 33] # (ok: 10 < ? < ? < 20)
> 
> [10, **13** , **16** , 20, 31, 33] # 少变化

在大多数情况下，它可以做到（例如：第 2 到第 4 位置 == 第 3/4 到第 2/第 3 位置），增加的复杂性是否值得小小的收益，由您决定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-01T10:13:44.757

使用链表而不是序列号。然后您可以从列表中的任何位置删除图片并重新插入列表中的任何位置，您只需要更改数据库文件中的 3 行。主照片位应该是不必要的，第一张照片是通过没有任何指向它的指针来隐式定义的。

```
id      next
1       3
2       1
3 
```

顺序是：2、1、3

用户将图片 3 移动到位置 1：

```
id      next
1       
2       1
3       2 
```

新顺序是：3、2、1

# installation - 使用 Wix 安装 BHO

> ID：13019410
> 
> 赞同：1
> 
> 时间：2012-10-22T20:35:19.133
> 
> 标签：installation, wix, bho

我刚刚完成了我的浏览器助手对象，我目前正在为它编写一个安装程序。到目前为止，我设法获得了一个将 .dll 复制到所需位置的 MSI，但我不确定如何手动注册该对象。我需要设置哪些键以便 Internet Explorer 自动加载 BHO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:53:34.733

用于`regsrv32`注册 DLL 时，它会调用[`DllRegisterServer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682162%28v=vs.85%29.aspx)您的 DLL 进行注册。因此，您必须将此函数 ( ) 写入注册表的所有键和值添加`DllRegisterServer`到您的 MSI，以便 MSI 在安装期间为您写入它们。

要注销 DLL，请使用`regsrv32 /u`, 在这种情况下[`DllUnregisterServer`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms691457%28v=vs.85%29.aspx)在 DLL 中调用。通常它只是删除添加的条目`DllRegisterServer`。

Windows Installer 将在卸载时自动删除所有添加的注册表项。只是检查`DllUnregisterServer`不执行任何其他操作。如果是这样，请在 WiX 中实现它。

# notepad++ - 将 Notepad++ 配置为使用处理执行并显示处理中的错误

> ID：13019411
> 
> 赞同：3
> 
> 时间：2012-10-22T20:35:26.307
> 
> 标签：notepad++, processing

这是我们在我的课程中使用的 IDE [http://processing.org/](http://processing.org/) 但是它对我的电脑非常有问题，我喜欢使用 Notepad++

我怎样才能做到这一点，当我在 Notepad++ 中按下执行时，它会自动编译正在处理的文件，如果有任何错误，它将被移植到 Notepad++ 中，显示带有错误和错误消息的行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T17:07:58.913

使用notepad++的nppExec插件，从[notepad++：插件->插件管理器->显示插件管理器]安装

[notepad++：插件 -> nppexec -> 控制台输出]，将两者都设置为 utf-8（可选 tbh，但我将它用于 python）

[notepad++: plugins -> nppexec -> execute ] 准确粘贴以下内容，但将行首的路径更改为指向您的处理目录

"D:\processing-2.0\processing-java.exe" --run --force --sketch="$(CURRENT_DIRECTORY)" --output="$(CURRENT_DIRECTORY)/输出"

然后将其保存为宏

[notepad++: plugins -> nppexec -> advanced options]，使用关联脚本下拉菜单添加菜单项，带有“添加/修改”按钮

单击顶部的复选框，上面写着“放置到宏子菜单”（可能是可选的）

[记事本++：设置->快捷方式映射器]

查看“插件”部分

您将找到刚刚创建的菜单项的条目，将键映射到它（例如 alt-f5）

[http://intuitionlogic.com/post/2011/03/15/A-Notepad++-language-definition-file-for-ProcessingProcessingjs.aspx](http://intuitionlogic.com/post/2011/03/15/A-Notepad++-language-definition-file-for-ProcessingProcessingjs.aspx)上有一个很好的语法高亮处理语言 定义

将其保存为 .xml 然后使用 [语言 -> 定义]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T10:28:58.937

感谢您的回答 FLong，它适用于 Notepad++ 6.6.8 和 Processing 2.2.1 但宏的另一行会有所帮助。添加`npp_saveall`到宏中，然后您正在处理的文件将在通过处理编译之前保存。

像这样：

```
npp_saveall

"D:\Programmering\processing-2.2.1\processing-java.exe" --run --force --sketch="$(CURRENT_DIRECTORY)" --output="$(CURRENT_DIRECTORY)/ouput" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:47:08.247

您需要为 Notepad++ 编写一个插件，将代码发送到处理编译器并进行正确的语法突出显示等。如果您只想使用 Notepad++，因为处理正在为您崩溃，您应该尝试更新您的 Java 安装Redist 作为 IDE 完全依赖于 Java。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-17T23:05:15.323

很抱歉这么久才回复这个帖子，但是 Flong 给出的脚本在 Processing 3.* 上不再起作用。

基本上，它不会在`--run`被调用后运行指定输出路径的草图......

因此，只需 NppExec 的代码就是`"C:\Folder where you have processing\processing-3.0.1\processing-java.exe" --sketch="$(CURRENT_DIRECTORY)" --output="$(CURRENT_DIRECTORY)/output" --force --run`.

请注意：a) 使用`--force`它将删除和重写`output`文件夹及其所有内容，b) 使用输出文件夹是可选的！

希望它会有所帮助[：

# jquery - Jquery Ajax - 在 ajax 响应中设置变量

> ID：13019419
> 
> 赞同：0
> 
> 时间：2012-10-22T20:35:47.790
> 
> 标签：jquery

我试图设置一个名为 success_var 的变量来响应 ajax 调用，但它确实设置并返回零。另一个问题是 ajax 被调用了两次。Iy 返回成功调用 bacl 两次。我的 php 脚本是 checkdate，响应发送的文本成功或失败。代码是

```
var $jq = jQuery.noConflict();

$jq('#updateprogress').submit(function() {

var day = $jq('#d_<?php echo $goalsnow->type; ?>').val();

// alert(input_data);

var month = $jq('#m_<?php echo $goalsnow->type; ?>').val();

var year = $jq('#y_<?php echo $goalsnow->type; ?>').val();
var email_dp = '<?php echo $email_dp; ?>';
var success_var = 0;
$jq.ajax({
type: "POST",
url:  "<?php bloginfo('template_url'); ?>/checkdate.php",
data: {day:day,month:month,year:year,email_dp:email_dp},
dataType:"html",
success: function(msg){
$jq('<div>').html(msg).appendTo('div#error_msg').hide().fadeIn('slow');
success_var=1;
}
});
alert(success_var);

return false;

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:58:02.303

请注意，Ajax 调用是一个异步请求。所以你在 success_var 的值设置为 1 之前调用 alert 方法。

尝试这个：

```
success: function(msg){
$jq('<div>').html(msg).appendTo('div#error_msg').hide().fadeIn('slow');
   success_var=1;
   alert(success_var);
}
}); 
```

# c++ - 是否有可能将 double 数组转换为 char *？

> ID：13019424
> 
> 赞同：0
> 
> 时间：2012-10-22T20:35:58.803
> 
> 标签：c++, c, casting

我正在编写一个程序，它必须创建一个文件，将其映射到内存，然后将二维数组写入它。我在查看文件时遇到问题。它充满了非预期值。我想，这个问题与铸造有关，但无法提出解决方案。所以，问题是，如何将双精度数组转换为 char *？希望有人能给我一个解决这个问题的线索。

```
int main(int argc, char **argv)
{
    HANDLE plik, mappedFile;
    char  *poi;
    LPCWSTR fileName = L"plik.txt";
    double tab[8][12];
    createMatrix(tab); // here I fill the array with values

    // creating file
     // mapping the file

   poi = (char *)MapViewOfFile(
    mappedFile,
    FILE_MAP_ALL_ACCESS,
    0,
    0,
    0);

if (!poi)
{
    puts("Can't allocate Memory!");
    abort();
}

memcpy(poi,tab,96*sizeof(double));

UnmapViewOfFile((void*)poi);
CloseHandle(mappedFile);
CloseHandle(plik);
getchar();
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:43:05.337

我认为您的代码正在运行，该文件包含双数字，但请记住，它是浮点格式的二进制格式，因此文本编辑器只会将其显示为一些垃圾。尝试使用十六进制编辑器，并检查双重格式。或者试着读回来。

您的方法的主要问题是它不是跨平台的，具有不同[字节顺序](http://en.wikipedia.org/wiki/Endianness#Floating-point_and_endianness)的机器将无法正确读取它（这对您来说可能是也可能不是问题）。

你想要的是[序列化](http://en.wikipedia.org/wiki/Serialization)。最简单的版本只打印文件中的数字（具有一些用户定义的有限精度） - 例如使用`sprintf`..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:51:49.760

您是否正在寻找这样的东西：

```
char* poi = new char[8*12*sizeof(double)];
int index = 0;

for(int i = 0; i < 8; i++)
{
    for(int j = 0; j < 12; j++)
    {
        *(double*)(poi + index) = tab[i][j];
        index+=sizeof(double);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-23T11:02:59.107

我建议你用简单的 WriteFile 函数替换文件映射。对于许多应用程序来说，它可以更快。

```
WriteFile(plic, tab, sizeof(tab), 0, 0); 
```

将准确快速地序列化您的数据。

# c# - 创建螺旋星系需要数学指导

> ID：13019431
> 
> 赞同：3
> 
> 时间：2012-10-22T20:36:15.117
> 
> 标签：c#, math

我正在为恒星/系统创建一个由块组成的旋转星系。

我一直在摆弄这个几天，到目前为止：

```
public int numberArms = 6;
public int numberStars = 1000;
public float galaxyRadius = 500f;
public int spread = 100;

float fHatRandom (float fRange)
{
   float fArea = 4 * Mathf.Atan (6.0f);
   float fP = fArea * Random.value;
   return Mathf.Tan (fP / 4) * fRange / 6.0f;
}

float fLineRandom (float fRange)
{
   float fArea = fRange * fRange / 2;
   float fP = fArea * Random.value;
   return fRange - Mathf.Sqrt (fRange * fRange - 2 * fP);
}
// Use this for initialization
void Start ()
{
   Random.seed = 100;

   int starsPerArm = numberStars / numberArms;
   float fAngularSpread = spread / numberArms;
   float fArmAngle = (360 / numberArms);
   for (int arm = 0; arm < numberArms; arm++)
   {
     for (int i = 0; i < starsPerArm; i++)
     {
      float fR = fHatRandom (galaxyRadius);      
      float fQ = fLineRandom (fAngularSpread);
      float fK = 1;

      float fA = numberArms * (fArmAngle);

      float fX = fR * Mathf.Cos (Mathf.Deg2Rad * (fA + fR * fK + fQ));
      float fY = fR * Mathf.Sin (Mathf.Deg2Rad * (fA + fR * fK + fQ));

      Vector3 starPos = new Vector3 (fX, fY, arm*4);
      Collider[] colliders = Physics.OverlapSphere (starPos, 1);

      if (colliders.Length == 0)
      {
          GameObject star = GameObject.CreatePrimitive (PrimitiveType.Cube);
          star.transform.position = starPos;
          star.transform.parent = transform;
      } else
      { 
          i--;//because they overlapped, we try again.
      }
     }    
   }
} 
```

}

由于它现在可以正常工作，它可以很好地创建银河系的旋臂。但正如你所看到的，我只是将手臂的位置设置为堆叠在其他手臂上，因为我一生无法弄清楚如何让它们围绕中心旋转，因为我的中心似乎不在.

诚然，我拥有 gnat 的数学技能，并且一直在摸索，有人可以帮助纠正数学并将手臂/中心放在他们所属的位置吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:51:52.757

不应该这样：

```
float fA = numberArms * (fArmAngle); 
```

是

```
float fA = arm * (fArmAngle); 
```

只是说...

# c# - 每 x 分钟调用一次方法

> ID：13019433
> 
> 赞同：132
> 
> 时间：2012-10-22T20:36:21.147
> 
> 标签：c#

我想每 5 分钟调用一次方法。我怎样才能做到这一点？

```
public class Program
{
    static void Main(string[] args)
    {
        Console.WriteLine("*** calling MyMethod *** ");
        Console.ReadLine();
    }

    private MyMethod()
    {
        Console.WriteLine("*** Method is executed at {0} ***", DateTime.Now);
        Console.ReadLine();
    }
} 
```

* * *

## 回答 #1

> 赞同：212
> 
> 时间：2012-10-22T20:39:09.433

```
var startTimeSpan = TimeSpan.Zero;
var periodTimeSpan = TimeSpan.FromMinutes(5);

var timer = new System.Threading.Timer((e) =>
{
    MyMethod();   
}, null, startTimeSpan, periodTimeSpan); 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2014-02-05T23:14:42.797

我基于@asawyer 的回答。他似乎没有遇到编译错误，但我们中的一些人会。这是 Visual Studio 2010 中的 C# 编译器将接受的版本。

```
var timer = new System.Threading.Timer(
    e => MyMethod(),  
    null, 
    TimeSpan.Zero, 
    TimeSpan.FromMinutes(5)); 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2015-12-10T14:40:05.260

在类的构造函数中启动一个计时器。间隔以毫秒为单位，因此 5*60 秒 = 300 秒 = 300000 毫秒。

```
static void Main(string[] args)
{
    System.Timers.Timer timer = new System.Timers.Timer();
    timer.Interval = 300000;
    timer.Elapsed += timer_Elapsed;
    timer.Start();
} 
```

然后像这样调用`GetData()`事件`timer_Elapsed`：

```
static void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    //YourCode
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-04-27T12:51:29.473

使用示例`Timer`：

```
using System;
using System.Timers;

static void Main(string[] args)
{
    Timer t = new Timer(TimeSpan.FromMinutes(5).TotalMilliseconds); // Set the time (5 mins in this case)
    t.AutoReset = true;
    t.Elapsed += new System.Timers.ElapsedEventHandler(your_method);
    t.Start();
}

// This method is called every 5 mins
private static void your_method(object sender, ElapsedEventArgs e)
{
    Console.WriteLine("..."); 
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2017-12-05T08:40:19.263

我已经上传了一个 Nuget 包，它可以让它变得如此简单，你可以从这里[ActionScheduler](https://www.nuget.org/packages/ActionScheduler/)

*它支持 .NET 标准 2.0*

在这里如何开始使用它

```
using ActionScheduler;

var jobScheduler = new JobScheduler(TimeSpan.FromMinutes(8), new Action(() => {
  //What you want to execute
}));

jobScheduler.Start(); // To Start up the Scheduler

jobScheduler.Stop(); // To Stop Scheduler from Running. 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-22T20:38:56.497

使用`Timer`. [计时器文档](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2022-01-28T01:47:45.663

## 更新 .NET 6

对于 dotnet 6+ 中的大多数用例，您应该使用[`PeriodicTimer`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.periodictimer)：

```
var timer = new PeriodicTimer(TimeSpan.FromSeconds(10));

while (await timer.WaitForNextTickAsync())
{
    //Business logic
} 
```

这有几个优点，包括异步/等待支持，避免回调的内存泄漏，以及[`CancelationToken`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.cancellationtoken)支持

### 延伸阅读

*   [API 提案：现代计时器 API](https://github.com/dotnet/runtime/issues/31525)
*   [每 X 秒执行一次指定函数](https://stackoverflow.com/q/6169288/1366033)
*   [为什么 .NET 中有 5 个版本的计时器类？](https://stackoverflow.com/q/10317088/1366033)
*   [.NET 6 中的新现代计时器 API - PeriodicTimer](https://www.ilkayilknur.com/a-new-modern-timer-api-in-dotnet-6-periodictimer)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-11-22T18:12:45.980

使用 DispatcherTimer：

```
 var _activeTimer = new DispatcherTimer {
   Interval = TimeSpan.FromMinutes(5)
 };
 _activeTimer.Tick += delegate (object sender, EventArgs e) { 
   YourMethod(); 
 };
 _activeTimer.Start(); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-22T13:59:37.243

如果您需要更复杂的时间执行，例如 linux cron，可以使用 NCrontab。

我在生产中使用 NCrontab 很长时间了，效果很好！

[努吉特](https://www.nuget.org/packages/ncrontab/)

如何使用：

```
* * * * *
- - - - -
| | | | |
| | | | +----- day of week (0 - 6) (Sunday=0)
| | | +------- month (1 - 12)
| | +--------- day of month (1 - 31)
| +----------- hour (0 - 23)
+------------- min (0 - 59) 
```

```
using NCrontab;
//...

protected override async Task ExecuteAsync(CancellationToken stoppingToken)
{
  // run every 5 minutes
  var schedule = CrontabSchedule.Parse("*/5 * * * *");
  var nextRun = schedule.GetNextOccurrence(DateTime.Now);
  logger.LogInformation("Worker running at: {time}", DateTimeOffset.Now);    
  do
  {
    if (DateTime.Now > nextRun)
    {
      logger.LogInformation("Sending notifications at: {time}", DateTimeOffset.Now);
      await DoSomethingAsync();
      nextRun = schedule.GetNextOccurrence(DateTime.Now);
    }
    await Task.Delay(1000, stoppingToken);
  } while (!stoppingToken.IsCancellationRequested);
} 
```

如果需要，请添加秒数：

```
// run every 10 secs
var schedule = CrontabSchedule.Parse("0/10 * * * * *", new CrontabSchedule.ParseOptions { IncludingSeconds = true }); 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2012-10-22T20:39:04.840

```
while (true)
{
    Thread.Sleep(60 * 5 * 1000);
    Console.WriteLine("*** calling MyMethod *** ");
    MyMethod();
} 
```

# javascript - 在同一屏幕上打开窗口并居中

> ID：13019434
> 
> 赞同：2
> 
> 时间：2012-10-22T20:36:25.060
> 
> 标签：javascript, popup, window, prototypejs

使用以下代码，窗口在不同的位置打开，从不居中，具体取决于您在哪个屏幕上打开它。我在使用 Internet Explorer 9 时遇到了这个问题，我的屏幕分辨率为 1920x1080。

我需要的是在我打开它的屏幕上打开窗口，居中。我已经搜索了 stackoverflow 并没有找到任何适合我的东西。

```
self.window.open(
    '/form.php?id=' + $iFormID +
    '&cboActivePatient=' + $iSkey +
    '&sForm=' + $sForm +
    '&iFormNum=' + $iFormNum,
    $sForm,
    'channelmode=yes, toolbar=yes, ' +
    'location=no, menubar=no, scrollbars=yes, resizable=yes, fullscreen=no, status=yes'); 
```

我已经尝试过使用：

```
var tempX = event.clientX + document.body.scrollLeft;
var tempY = event.clientY + document.body.scrollTop;

'location=no, menubar=no, scrollbars=yes, resizable=yes, fullscreen=no, ' +
                'status=yes, left='+tempX+', top='+tempY+''); 
```

但这对我不起作用。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T02:14:07.803

如何使用 screen.width 和 screen.height 来获取客户端计算机的屏幕尺寸，并使用它来计算顶部和左侧[规格](http://www.w3schools.com/jsref/met_win_open.asp)的适当值，如下所示：

```
URL = 'http://nickbriz.com'
w = 500;
h = 200;
t = (screen.height/2) - h/2;
l = (screen.width/2) - w/2;  

window.open(URL,'someName','width='+w+',height='+h+',top='+t+',left='+l+'')​;​ 
```

这是一个工作示例：http: [//jsfiddle.net/pRA9B/](http://jsfiddle.net/pRA9B/)

# log4j - 配置 log4j axis1 找不到记录器的附加程序

> ID：13019435
> 
> 赞同：1
> 
> 时间：2012-10-22T20:36:26.573
> 
> 标签：log4j, axis

我尝试使用axis1部署Web服务并在我的Web服务类log4j记录器中使用

```
private static final Logger logger = Logger.getLogger(MobileService.class
            .getName());

logger.debug("Count nodes" + nodes.getLength()); 
```

我的班级有默认包。我使用下一个 log4j.xml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE log4j:configuration SYSTEM "log4j.dtd">
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">

    <appender name="HTML-APPENDER" class="org.apache.log4j.DailyRollingFileAppender">
        <param name="File" value="${catalina.home}/webapps/axis/WEB-INF/classes/log.html" />
        <param name="DatePattern" value="'.'yyyy-MM-dd-HH'.html'" />
        <layout class="org.apache.log4j.HTMLLayout" />
        <filter class="org.apache.log4j.varia.LevelRangeFilter">
            <param name="LevelMin" value="ALL"/>
            <param name="LevelMax" value="INFO"/>
        </filter>
    </appender>

</log4j:configuration> 
```

我还添加了类路径以部署我的应用程序

```
set CATALINA_HOME=C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0
set PATH_TO_LOG4J=C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0\webapps\axis\WEB-INF\classes\log4j.xml
java -Dlog4j.info -Dlog4j.configuration="file:C:\Program Files (x86)\Apache Software Foundation\Tomcat 7.0\webapps\axis\WEB-INF\classes\log4j.xml" -cp "%CATALINA_HOME%\webapps\axis\WEB-INF\lib\axis.jar;%CATALINA_HOME%\webapps\axis\WEB-INF\lib\jaxrpc.jar;%CATALINA_HOME%\webapps\axis\WEB-INF\lib\commons-logging-1.0.4.jar;%CATALINA_HOME%\webapps\axis\WEB-INF\lib\wsdl4j-1.5.1.jar;%CATALINA_HOME%\webapps\axis\WEB-INF\lib\commons-discovery-0.2.jar;%CATALINA_HOME%\webapps\axis\WEB-INF\lib\saaj.jar;%CATALINA_HOME%\common\lib\activation.jar;%CATALINA_HOME%\common\lib\mail.jar;%CATALINA_HOME%\webapps\axis\log4j-1.2.8.jar" org.apache.axis.client.AdminClient -lhttp://localhost:8080/axis/services/AdminService MobileService.wsdd
pause 
```

但甚至`-Dlog4j.info -Dlog4j.configuration=`对我没有帮助。我得到错误`no appenders could be found for logger (org.apache.axis.i18n.projectresourcebundle)`。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T08:16:40.417

我想，你忘了配置记录器。例如，要配置根记录器，请将以下行放在 log4j.xml 文件的末尾（之前`</log4j:configuration>`）：

```
<root> 
    <priority value ="debug" /> 
    <appender-ref ref="HTML-APPENDER" /> 
</root> 
```

# c++ - 从文件中读取错误（读取了 0 或 "" 值）

> ID：13019437
> 
> 赞同：0
> 
> 时间：2012-10-22T20:36:29.450
> 
> 标签：c++, string, file, constructor, stream

这是我的班级的定义：

```
class BPP
{
    unsigned            n;                  /* nº de instancias */
    vector<string>      nombre_instancia;   /* nombre de la instancia*/
    vector<unsigned>    n_objetos;          /* nº de objetos a almacenar en cada instancia */
    vector<unsigned>    C;          /* capacidad máxima de cada contenedor */
    vector<unsigned>    mejor;              /* mejor nº mínimo de contenedores usados (m*) */
    vector< vector<unsigned> > tam_objeto; 
```

这是我完整的构造函数：

```
BPP :: BPP(char fich1[])
{
    ifstream file1; string str; unsigned a, b, c, d;
    file1.open(fich1);
    if (file1.is_open()){ 
        file1 >> (unsigned &) n;
        for (unsigned k = 0 ; k < n ; ++k){
            getline(file1, str); nombre_instancia.push_back(str);
            file1 >> a; n_objetos.push_back(a);
            file1 >> b; C.push_back(b);
            file1 >> c; mejor.push_back(c);
            for (unsigned h = 0 ; h < a ; ++h){
                file1 >> d; tam_objeto[k].push_back(d);
            }
        }
    }
    file1.close();
} 
```

fich1 中的前 5 行是：

```
10
 P_0 /*Notice the space in the beginning of the line, and in the end*/
150 120 52
30
34 
```

并且输出是读取的所有值都是 0（如果无符号）或“”（如果是字符串）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:55:20.190

`10`问题是后面的换行符*不*被消耗：

```
file1 >> (unsigned &) n; // Why the cast here? 
```

这意味着该`getline(file1, str)`调用仅读取换行符，即空行。接下来的输入操作是：

```
file1 >> a; 
```

失败是因为`P_0`不是有效的`unsigned int`. 此故障会阻止从`file1`流中进行任何进一步的读取（其故障[位](http://en.cppreference.com/w/cpp/io/basic_ios/fail)已设置）。要解决这个问题，您可以简单地调用`getline()`两次，忽略第一次调用的结果。

检查所有读取的结果以检测失败。这样做会提醒您读取失败。

# java - SoundPool 只停止一次

> ID：13019438
> 
> 赞同：1
> 
> 时间：2012-10-22T20:36:33.190
> 
> 标签：java, android, audio, soundpool, soundplayer

第一次按下按钮停止声音。但在那之后按下它没有任何效果。这是我的java代码：

```
public class App extends MultiTouchActivity {

SoundPool sp;
    int  dub1s;

@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub

    sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
     dub1s = sp.load(this, R.raw.dub1, 1);

}

public void dubstep1(View view) {

    sp.stop(dub1s);
    sp.play(dub1s, 1, 1, 1, 0, 1f);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:41:08.473

`SoundPool.stop()`获取**流 id**（来自 的返回值`play`），而不是**声音 id**（来自 的返回值`load`）。

他们不是一回事。

```
public class App extends MultiTouchActivity {

    SoundPool sp;
    int  mSoundId;
    int  mStreamId = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    sp = new SoundPool(5, AudioManager.STREAM_MUSIC, 0);
    mSoundId = sp.load(this, R.raw.dub1, 1);
}

public void dubstep1(View view) {
    if(mStreamId != 0) {
        sp.stop(mStreamId);
    }
    mStreamId = sp.play(mSoundId, 1, 1, 1, 0, 1f);
} 
```

# ios - “更多”选项卡中的视图控制器不会旋转，但如果它在主行上则会旋转。

> ID：13019444
> 
> 赞同：1
> 
> 时间：2012-10-22T20:37:02.103
> 
> 标签：ios, uinavigationcontroller, uitabbarcontroller, storyboard, orientation

我有一个内置故事板的应用程序，需要在一个视图控制器中支持横向模式。在支持 iOS 5 和在手机上运行 iOS 6 出现问题后，我决定支持 iOS 6。我使用了这个 Stack Overflow 答案：[https](https://stackoverflow.com/a/12505461/1050388) ://stackoverflow.com/a/12505461/1050388但我仍然看到一个奇怪的怪癖。（对于那些感兴趣的人，我的控制器方案是 Tab Controller -> Navigation Controller -> TableViewController -> UIWebView。UIWebView 是我需要旋转的唯一 VC。）

我阻止了除了一个 VC 之外的所有 VC，但该 VC 在“更多”选项卡中。我最初有一个怪癖，这个“更多”VC 会在旋转时将方向更改为横向，然后任何后续 VC 都会处于横向，但我发现了这个（[https://stackoverflow.com/a/12526152/1050388](https://stackoverflow.com/a/12526152/1050388)）并创建了一个UINavigationController 的类别有助于解决该问题。

但是，当我导航到“更多”列表中的该选项卡并转动 VC 时，它不会旋转。但是当我单击“编辑”并将该选项卡移动到最初 4 个选项卡的主行时，它旋转得很好。如果我把它移回来，它就不会旋转。任何人都知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:42:58.780

我认为问题源于更多导航控制器是由 iOS 动态生成的并且是只读的。

[http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBarController/moreNavigationController](http://developer.apple.com/library/ios/#documentation/UIKit/Reference/UITabBarController_Class/Reference/Reference.html#//apple_ref/occ/instp/UITabBarController/moreNavigationController)

如果使用自定义类别的技术可以在这里工作，那就太好了，但根据您的经验，我猜它不会。

我还需要更好地控制更多选项卡视图的方向。请张贴你想出的任何东西。谢谢。

# pdf - 如何从多个 PDF 中删除第一页

> ID：13019447
> 
> 赞同：2
> 
> 时间：2012-10-22T20:37:11.697
> 
> 标签：pdf

我有一个 PDF 集合，有时我想要删除的文档的第一页有一个信息页面。

如果有一种快速的方法可以从我的所有 pdf 中删除此信息页面，或者至少有一种方法可以显示所有超过一页的 pdf，以便我可以更好地找到需要修复的页面？

你知道任何可以做到这一点的程序吗？或者用python做到这一点的方法？

注意：信息页面上的文字始终保持相同的“土地所有权办公室”

使用 Windows 7 操作系统

谢谢

一些研究发现了以下内容：

[http://www.python.org/workshops/2002-02/papers/17/index.htm](http://www.python.org/workshops/2002-02/papers/17/index.htm)

[http://www.unixuser.org/~euske/python/pdfminer/index.html](http://www.unixuser.org/~euske/python/pdfminer/index.html)

[http://pybrary.net/pyPdf/pythondoc-pyPdf.pdf.html#pyPdf.pdf.PdfFileWriter-class](http://pybrary.net/pyPdf/pythondoc-pyPdf.pdf.html#pyPdf.pdf.PdfFileWriter-class)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:20:58.483

你可以试试这两种方法：

*   [PdfTK](http://www.pdflabs.com/docs/install-pdftk/ "pdf")是一个操作 PDF 的实用程序。检查此[链接](http://commonsenseatheism.com/?p=8335)，他们正在做类似于您需要的事情（在评论中，有人还发布了 Windows 脚本）

*   [PDFsam](http://www.pdfsam.org "PDFsam")是一个强大的图形化工具，可以批量处理 PDF。拆分+合并部分应该可以解决问题。

两者都是免费的，如果你想写一个你可以经常使用的“食谱”，我建议你先学习，但如果你必须这样做一次，我建议你先学习。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T21:08:16.480

您可以使用开源 PDFBox 作为命令行实用程序来拆分 PDF。

PDFBox 的链接在这里：[link](http://pdfbox.apache.org/index.html)

使用 PDFBox 拆分 PDF 的文档在这里：[链接](http://pdfbox.apache.org/commandlineutilities/PDFSplit.html)

您可以使用 PDFBox 从批处理脚本中提取文本功能并结合 grep 来识别包含您要查找的文本的页面。提取文本文档在这里：[链接](http://pdfbox.apache.org/commandlineutilities/ExtractText.html)

# objective-c - 每三位数字的空格

> ID：13019449
> 
> 赞同：1
> 
> 时间：2012-10-22T20:37:17.050
> 
> 标签：objective-c, ios

如何在结果字符串中每 3 位得到一个简单的逗号？

代码如下：

```
float convertFrom = [[_convertRates objectAtIndex:[picker selectedRowInComponent:0]]     floatValue];

float convertTo = [[_convertRates objectAtIndex:[picker selectedRowInComponent:1]] floatValue];

float input = [inputText.text floatValue];
float to = convertTo;
float from = convertFrom;

float convertValue = input;
float relative = to / from;
float result = relative * convertValue;

NSString *convertFromName = [_convertFrom objectAtIndex:[picker selectedRowInComponent:0]];
NSString *convertToName = [_convertFrom objectAtIndex:[picker selectedRowInComponent:1]];

NSString *resultString = [[NSString alloc]initWithFormat:
                          @" %.4f %@",result, convertToName];

resultLabel.text = resultString;

NSString *formelString = [[NSString alloc]initWithFormat:
                          @" %.4f %@=", convertValue, convertFromName];
formelLabel.text = formelString; 
```

这段代码产生了很多数字，显示在一个文本块中，这不是最实用的数据使用方式。如何在此代码中实现逗号？

例如，`1234567`将是`1 234 567`或`1'234'567`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:40:45.570

使用 NSNumberFormatter。

```
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
formatter.numberStyle = NSNumberFormatterDecimalStyle;

NSString *formattedString = [formatter stringFromNumber:someNumberValue]; 
```

其中`someNumberValue`是一个带有数字的 NSNumber 对象。

这将为用户选择的区域格式正确格式化数字。

如果您愿意，您可以控制小数点后的位数。有关更多详细信息，请参阅文档`NSNumberFormatter`。

# c++ - 在集合中找到最大和最小的整数-基本

> ID：13019451
> 
> 赞同：-1
> 
> 时间：2012-10-22T20:37:19.077
> 
> 标签：c++, integer

我有点走在正确的轨道上，但是我的输出不太正确。该程序询问您拥有的整数数量，然后询问这些数字。例如说请输入整数的个数，你可以输入 3。然后你输入 3 个数字。我不能使用数组，因为我是初学者，我们还没有学过这些。使用 count 是允许我输入整数的唯一方法。我需要在我的程序中添加什么？同样，我是一名普通的计算机科学专业的学生，​​所以我不能使用任何高级的东西。我使用了 include iostream、namespace int main 和所有你看不到的东西

```
int data;
int num;
int count=0;
int max=0;

do
{
cout<<"Enter the number of intergers"<<endl;
cin>>num;

while (count<num) 
{ 
    cout<<"Please enter a number"<<endl;
    cin>>data;
    count++;

    if (data<min)
    { 
        min=data;
    }

    if (data>max)
    {
        max=data;
    }
}

cout<<"Smallest integer:"<<min<<endl;
cout<<"Largest integer:"<<max<<endl;

cout<<"Would you like to continue?"<<endl;
cin>>ans;

} while ((ans=='y')||(ans=='Y')); 
```

返回0；}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:51:30.200

尝试这样的事情：

```
int data;
int num;
int max=0, min = 1000000;

cout<<"Enter the number of intergers"<<endl;
cin>>num;

for (int count = 0; count < num; ++count)
{ 
    cout<<"Please enter number #" << count <<endl;
    cin>>data;

    if (data<min)
    { 
        min = data;
    }
    if (data>max)
    {
        max = data;
    }
}

cout<<"The smallest number:"<<min<<endl;
cout<<"The largest number:"<<max<<endl; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:52:54.440

上面的答案是正确执行此操作的方法，但更明确地说，您可能必须更新最小或最大的数字。例如; 给计算机 5 然后 4.. 你的程序打印 4 作为最大数字。但是，如果您使用任何其他临时 int 更新“max”，它将给出正确的 number 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:39:53.310

您可以使用两个时间变量来存储迄今为止最小和最大的数字。在每次循环迭代中，您检查是否需要更新它们。我不想放任何代码......这是你的任务;-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:55:00.540

首先，您的条件是错误的，它应该是`while( count < num)`，因为从 0 开始。现在，如果您想要快速的 n'dirty 方式，只需将两个变量 min 和 max 初始化为可以容纳`count`的最小值和最大值。`int`通过比较每个变量检查​​输入并根据需要进行更新。

# php - 使用 PHP/HTML 文件作为模板的 Javascript

> ID：13019456
> 
> 赞同：0
> 
> 时间：2012-10-22T20:37:56.153
> 
> 标签：php, javascript, html, variables, google-maps-api-3

我正在使用 Google Maps API v3 创建地图应用程序，其中一个部分是呈现的 InfoWindow 的 HTML 布局。目前，我必须在主 map.js 文件中创建一个长变量，并且在不破坏主应用程序的情况下很难编辑它，对于没有编写它的人来说，这是一个普遍的噩梦。

这是它目前的样子：

```
var html = "<div class=loc-one><div class=loc-name>" + name + "</div><hr class=loc-name-hr></div> <br/><div class=loc-two><div class=loc-two-l><div class=loc-add>" + address1 + "<br/>" + address2 + "<br/>" + address3 +"</div></div><div class=loc-two-r><div class=loc-type><strong>" + type + "</strong></div><div class=loc-price>Price Rating: " + price + "</div></div></div><hr class=loc-name-hr><div class=loc-three><div class=loc-three-times-head><img src=http://sandbox.tristanbacon.me/citymap/img/ui/ui_times.png /><span class=times-head-title>Opening Times</span></div><div class=loc-three-times>" + times + "</div></div><hr class=loc-name-hr><div class=loc-four><li><div class=loc-sec-img><a href=# onclick=TINY.box.show({image:'http://sandbox.tristanbacon.me/citymap/img/" + img_day + "',boxid:'frameless',animate:true,openjs:function(){openJS()}})><img src=http://sandbox.tristanbacon.me/citymap/img/ui/ui_img.png /><span class=loc-four-view>View Image</span></a></div></li></div>"; 
```

正如您将看到的，我什至无法将其散布在 JS 文件中，因为它会破坏代码。理想情况下，我希望它看起来像这样：

```
<html>
<div class=loc-one>
<div class=loc-name>
"+ name +"
</div>
<hr class=loc-name-hr>
</div> 
<br/>
<div class=loc-two>
<div class=loc-two-l>
    <div class=loc-add>
    " + address1 + "
    <br/>
    " + address2 + "
    <br/>
    " + address3 + "
    </div>
</div>
<div class=loc-two-r>
    <div class=loc-type>
        <strong>" + type + "</strong>
    </div>
    <div class=loc-price>
        Price Rating: " + price + "
    </div>
</div>
</div>
<hr class=loc-name-hr>
<div class=loc-three>
<div class=loc-three-times-head>
    <img src=http://sandbox.tristanbacon.me/citymap/img/ui/ui_times.png />
    <span class=times-head-title>Opening Times</span>
</div>
<div class=loc-three-times>
    " + times + "
</div>
</div>
<hr class=loc-name-hr>
<div class=loc-four>
<li>
<div class=loc-sec-img>
    <a href=# onclick=TINY.box.show({image:'http://sandbox.tristanbacon.me/citymap/img/" + img_day + "',boxid:'frameless',animate:true,openjs:function(){openJS()}})><img src=http://sandbox.tristanbacon.me/citymap/img/ui/ui_img.png />
    <span class=loc-four-view>View Image</span>
    </a>
</div>
</li>
</div>
</html> 
```

它在实际文件中看起来会更干净，因为我必须为 Stackoverflow 编码布局格式化它。我相信你明白了它的要点。

我想要一个看起来像上面的 template.html（或 .php？）文件。是否可以通过这个 HTML 文件传递​​变量，从 map.js 文件链接到 HTML 文件（如第一次预览中一样），然后让它在实际网站上正常显示？

我希望我已经正确解释了！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:58:35.347

我认为您最好使用适当（但简单）的模板框架。看看[车把](http://handlebarsjs.com/)。使用它，您将在 20 分钟内启动并运行。他们使用的技巧是不在 javascript 变量中定义模板，而是在具有特殊类型属性的脚本块中定义模板，并让模板机制解析脚本块。不要试图自己构建模板，你很快就会把自己画到一个角落里。（至少我有:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T08:49:33.100

你当然可以在 JS 中“展开”一个字符串：

```
var html = "<html>" + 
"<div class=loc-one>" + 
"<div class=loc-name>" +
name +
"</div>" + 
"<hr class=loc-name-hr>" + 
... etc 
```

您也可以尝试这种方法，但这种方法并未得到普遍支持：

```
var html = "<html> \
<div class=loc-one>\
<div class=loc-name>\
"+ name +"
</div>\ 
<hr class=loc-name-hr>\
... etc 
```

请参阅上一个问题：[在 JavaScript 中创建多行字符串](https://stackoverflow.com/questions/805107/how-to-create-multiline-strings)

# java - Java InputStream 读取多部分消息

> ID：13019460
> 
> 赞同：1
> 
> 时间：2012-10-22T20:38:10.667
> 
> 标签：java, inputstream

我有一个任务。从 InputStream 我应该收到多部分消息。前四个字节是消息长度，其他字节是消息体。同时可以接收多条消息。例如：1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16

有

```
1,2,3,4 - length(in this case 4), 3,4,5,6 - body
7,8,9,10 - length (6), 11,12,13,14,15,16 - body 
```

等等

我用这种方法计算的长度：

```
public static int byteArrayToInt(byte[] paRawBytes, int piOffset, boolean pbBigEndian) {

    int iRetVal = -1;

    if(paRawBytes.length < piOffset + 4)
        return iRetVal;

    int iLowest;
    int iLow;
    int iMid;
    int iHigh;

    if(pbBigEndian)
    {
        iLowest = paRawBytes[piOffset + 3];
        iLow    = paRawBytes[piOffset + 2];
        iMid    = paRawBytes[piOffset + 1];
        iHigh   = paRawBytes[piOffset];
    }
    else
    {
        iLowest = paRawBytes[piOffset];
        iLow    = paRawBytes[piOffset + 1];
        iMid    = paRawBytes[piOffset + 2];
        iHigh   = paRawBytes[piOffset + 3];
    }

    // Merge four bytes to form a 32-bit int value.
    iRetVal = (iHigh << 24) | (iMid << 16) | (iLow << 8) | (0xFF & iLowest);

    return iRetVal;
} 
```

和更多：

```
private static void getEventsList(byte[] bytesFromInputStream) {

    int start = 4;

    int end = getLength(bytesFromInputStream) + 4;

    byte[] tmp;

    tmp = Arrays.copyOfRange(bytesFromInputStream, start, end);

    eventsArrayList.add(tmp);

    if (bytesFromInputStream.length > end) {

        byte[] newArray = Arrays.copyOfRange(bytesFromInputStream, end, bytesFromInputStream.length);

        getEventsList(newArray);
    }

}

private static short getLength(byte[] bytes) {
    return ByteUtils.byteArrayToInt(Arrays.copyOfRange(bytes, 0, 4), 0, true);
} 
```

但它不起作用，我没有更多的想法。请帮帮我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:03:31.660

您最初提供的代码似乎无法编译（也许这是您遇到的问题，但您并没有真正指定）？

为了解决这个问题，我必须通过将结果转换为to`getLength()`来返回 a 。或者你可以只返回一个。我删除了对的静态引用，因为我将所有方法都放在了一个类中。`short``byteArrayToInt``short``int``ByteUtils`

`0`我还在调用中 添加了一个偏移量，`byteArrayToInt`以便方法签名匹配。

之后，您的代码似乎可以工作，至少在一些简单的情况下，例如：

```
byte[] message = new byte[]{0,0,0,1, 1, 0,0,0,2, 2,3};
getEventsList(message); 
```

产生：

```
Got a message of length: 1
Content 1
Got a message of length: 2
Content 2
Content 3 
```

（我也添加了一些`println`语句）

您的`byteArrayToInt`方法似乎不适用于较大的值（超过 16 位）。[这个问题](https://stackoverflow.com/questions/7619058/convert-a-byte-array-to-integer-in-java-and-vise-versa)的答案中有一些示例实现（包括一些单行）。

# c# - 如何使用 C# 删除 Excel 复制焦点

> ID：13019461
> 
> 赞同：2
> 
> 时间：2012-10-22T20:38:14.687
> 
> 标签：c#, excel, .net-4.0, clipboard

我使用 .NET 框架 4 创建了一个小应用程序，它处理从 Excel 电子表格复制的信息并将处理后的数据保存到剪贴板。问题是当应用程序完成时，Excel 的焦点仍然在从中复制数据的单元格上。

我的信息在 Office 剪贴板中，但我必须先手动移除焦点，然后才能粘贴它。我希望我的应用程序为我移除焦点，以简化流程。如何才能做到这一点？

```
 try
        {
            Clipboard.Clear();
        }
        catch (Exception)
        {
            MessageBox.Show("Clipbour Clear Error");
        }                       
        try
        {
            Clipboard.SetText(clipbourholder.ToString(), TextDataFormat.UnicodeText);

        }
        catch (Exception)
        {
            MessageBox.Show("Clipbour Paste Error");
        } 
```

当信息在剪贴板中时，excel 在单元格周围有这个边框，我不喜欢它，因为它是活动的剪贴板。我需要活动办公室剪贴板中的我的信息。 [活动剪贴板示例](http://s18.postimage.org/knwhuieit/clp_Err.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-16T20:08:49.027

我找到了解决方法。我生成了 64k 数字并放入剪贴板，然后我可以传递我的真实价值。看起来只有我的 excel 有这个问题。

# windows - 使用 /R 标志将批处理脚本的输出获取到正确的子目录中

> ID：13019464
> 
> 赞同：2
> 
> 时间：2012-10-22T20:38:38.867
> 
> 标签：windows, windows-7, batch-file

我目前面临的问题是我需要在每个子目录中处理文件，我正在使用这样的 for 循环：

```
for /R %%x in (*.dat) do tool.exe -c -f -e "%%x" 
```

现在它会处理所有内容，但该工具会输出一个文件，并且该文件始终位于启动批处理脚本的目录中，而不是位于原始文件所在的目录中。我尝试了很多方法，例如使用 %CD% 作为该工具的输出目录选项，但看起来该工具不太喜欢那样，只是给出了错误。

我正在寻找一个通用的解决方案，因为我现在使用很多 CLI 工具都遇到了这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T10:01:16.553

I'm late on this but, complementing Andriy answer, you can streamline the BAT by combining two FOR loops, which might be slightly more efficient, and more clear.

```
for /D /R %%d in (*) do (
  pushd %%d
  for %%x in (*.dat) do tool.exe -c -f -e "%%x"
  popd
) 
```

As an added bonus, this version will solve the case when the main loop refers to a different drive (which is not the case on this particular OP question) and has the relative side value of restoring the current directory on each iteration, which might also be of slight importance in case other commands are incorporated in the loop.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T21:06:13.270

您可以在调用之前访问`CD`当前所在的目录：`.dat``tool.exe`

```
for /R %%x in (*.dat) do (**cd "%%~dpx" &** tool.exe -c -f -e "%%x") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:56:36.557

你可以使用`forfiles`...

```
forfiles /s /C /m *.dat "cmd /c tools.exe @file" 
```

有关详细信息，请参阅[http://ss64.com/nt/forfiles.html](http://ss64.com/nt/forfiles.html)

# google-maps - 有没有办法将自定义谷歌地图加载到我的网站中？

> ID：13019478
> 
> 赞同：-2
> 
> 时间：2012-10-22T20:39:24.177
> 
> 标签：google-maps, google-maps-api-3, google-maps-markers

我已经创建了一个自定义地图并放置了一些标记，但嵌入的代码在我的网站中不起作用，我想要将我的自定义地图加载到我的网站并在用户单击某些标记时跟踪事件。有没有一种“简单”的方法可以做到这一点，还是我必须通过添加所有标记和东西的代码来构建地图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:42:15.937

这是一个关于如何向谷歌地图添加标记的好教程：http: [//duncan99.wordpress.com/2011/09/25/google-maps-api-adding-markers/](http://duncan99.wordpress.com/2011/09/25/google-maps-api-adding-markers/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:42:13.390

很多问题的方式。您可能应该看看[Google Maps API](https://developers.google.com/maps/)。有一些例子展示了你正在尝试做的一切。

# php - mysql - 在 sql 中选择 UNTIL

> ID：13019482
> 
> 赞同：2
> 
> 时间：2012-10-22T20:39:35.543
> 
> 标签：php, mysql, sql-server, database

我想选择行，直到找到某个值并且它不是数字，所以我不能使用 > 或 <。我怎样才能做到这一点 ？

例子 ：

```
-----
Value
-----
45
434
348
213
543
3445
343
123
34345 
```

我想选择 543 之前的所有记录（不按任何顺序排序）

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:11:56.367

解决了“没有顺序”的问题，也就是说，您将不得不选择某种顺序（例如主键的顺序，或者记录分配 OID 的顺序），您的问题就变成了：

```
"I want all the records whose ordering field is less than the value
 of the row for which ordering field is minimum, and VALUE is 543". 
```

因此，您选择值为 543 的最小行

```
SELECT MIN(id) AS id FROM yourtable WHERE value = 543 
```

或者，出于其他目的，可能类似于

```
SELECT MIN(id) AS id FROM yourtable WHERE value >= 543 
```

然后选择该记录之前的所有记录：

```
SELECT value FROM yourtable WHERE id < ( SELECT MIN(id) AS id FROM yourtable WHERE value = 543 ); 
```

所以你的桌子可能是：

```
ID    Value
-----------
1     45
2     434
3     348
4     213
5     543
6     3445
7     343
8     123
9     34345 
```

你会得到：

```
45
434
348
213
543 
```

您看不到订单，但*必须*有一个。这是上的订单`id`。

根据您的要求，`value`可以是任何内容 - 文本，甚至是图像 BLOB - 并且“排序”保持隐藏状态。

在其他一些语言中，您会执行以下操作：

```
qry = SQL.exec('SELECT * FROM yourtable;');
while ((value = qry.next().value) != '543':
    write value '\n'
qry.close() 
```

但是要么`SELECT`没有指定 ' 的顺序，你可能每次都会得到不同的结果，或者它是表中元组插入的顺序。这与显式使用相同`id`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-07-11T08:55:11.937

这个答案可能会迟到，但因为它是谷歌上的第一个结果，术语为“mysql select until”，希望这可能对某人有所帮助。

您可以做的是声明一个标记，如果您找到所需的值，请将标记设置为除`NULL`. 然后我们可以`ISNULL`用来检查我们是否已经到达该行。

```
SET @marker = NULL;
SELECT value FROM table1 WHERE ISNULL(@marker:=IF(value=543,value,@marker)); 
```

[这是一个演示](http://sqlfiddle.com/#!9/ccbe58e/1 "这是一个演示")

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2012-10-22T20:44:41.410

您可以在查询中使用相等比较器，直接搜索您要查找的值。

当您可以指定要搜索的内容时，为什么要遍历数据库直到找到它？

您没有举例说明您要搜索的值是什么，所以如果它是一个字符串

```
Select x.* from table x WHERE x.Column = 'String Value' 
```

但是，如果您确实想在数据库上增加一些额外的负载（在这种未定义的情况下），您将拥有一个存储过程，循环访问存储在数据库中的 ID。

为此，请查看以下帖子，它可能会给您一些启发：[基于 ID 列表的 SQL LOOP INSERT](https://stackoverflow.com/questions/5555841/sql-loop-insert-based-on-list-of-ids)

# css - 无法将项目文件夹拖放到 SimpleLESS Windows 7 64

> ID：13019483
> 
> 赞同：5
> 
> 时间：2012-10-22T20:39:39.267
> 
> 标签：css, less

我已经下载了 SimpleLESS 来轻松编译和管理我的项目的 LESS CSS 文件。但是，安装后，我无法将任何文件夹拖放到拖放窗口中。有没有人在 Windows 7 64 位上成功使用过 SimpleLESS？我使用的 LESS 版本是 1.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T07:37:33.733

我刚刚在 Windows 8 上遇到了同样的问题。
尝试在文件夹中创建一个`.less`文件，然后再尝试将其拖放到`SimpleLESS`.
希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T19:41:24.280

我使用 PHPStorm，事实证明有一个可用的插件可以处理这个问题，因此不需要外部软件。

# javascript - 使 dojo.dnd.Source 脱离拖动/复制的项目

> ID：13019484
> 
> 赞同：0
> 
> 时间：2012-10-22T20:39:39.893
> 
> 标签：javascript, dojo, drag-and-drop

我已经设置了一个带有左面板（源）和右面板（源和目标）的小界面。

从左侧面板拖动/复制到右侧面板可以工作，并且在放置时会创建一个新的 div。

我现在希望能够将项目放入新的 div 中，即新的 div 也应该是一个源。

但是我不确定如何做到这一点，你能帮忙吗？

HTML

```
<div id="left-panel"> 
    <div class="dojoDndItem">Div</div>
</div>

<div id="right-panel">
</div> 
```

JS

```
//This is a creator to be run when an item is dropped onto the right panel

function myCreator(item, hint) {
if (item == 'Div') {
var myNode = dojo.create('div');
}

//This is how I create the sources

var leftPanel = new Source("left-panel", { copyOnly:true });

var rightPanel = new Source("right-panel", { accept:[ "div", "button", "image" ], creator:myCreator });

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-09T23:39:08.990

见[http://jsfiddle.net/n8UxB/](http://jsfiddle.net/n8UxB/)

```
<div id="left-panel" class="container"> 
    <div class="dojoDndItem" dndType="foo">Div</div>
    <div class="dojoDndItem" dndType="foo">Div2</div>
</div> 
```

您不需要创建者功能。并且 accept 用于 dndType DOM 属性。

# django - Django 和 JEditable：CSRF 错误

> ID：13019488
> 
> 赞同：0
> 
> 时间：2012-10-22T20:39:56.360
> 
> 标签：django, csrf, jeditable

我开始在 Django 中使用[Jeditable](http://www.appelsiini.net/projects/jeditable)插件并很快遇到了 CSRF 错误：“CSRF 验证失败。请求中止。”、“CSRF 令牌丢失或不正确”

在撰写本文时，Jeditable 插件似乎最后一次更新是在 2008 年——在这个 Django 开始要求[CSRF 令牌](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/)用于 POST 请求之后的某个时间。

如何将 Django CSRF 数据添加到 Jeditable？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T20:45:03.693

这个问题的答案来自[CSRF 上类似的可编辑帖子](http://codeigniter.com/forums/viewthread/155981/#754096)。CSRF 令牌可以添加到“submitdata”变量中。

扩展Django 帖子的[第一个 jeditable 示例如下所示：](http://www.appelsiini.net/projects/jeditable)

```
$(document).ready(function() {
   $('.edit').editable('http://www.example.com/save.php', { 
        submitdata : { csrfmiddlewaretoken : "{{ csrf_token }}"}
    });
}); 
```

请注意，为了显示“csrf_token”值而不是整个表单字段，“csrf_token”被包裹在 {{..}} 而不是 {% .. %} 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:54:20.393

通过 AJAX 请求提供 CSRF 令牌的首选方法是将[`X-CSRFToken`](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)标头设置为 CSRF 令牌的值。您需要修改构造的请求对象以设置标头值。

还提供了一个辅助函数来从 cookie 中获取 CSRF 令牌，而不是依赖于在模板中提供它，这大大简化了事情，即您不必内联发送 JS 代码或将令牌设置为变量JS 在模板本身。

# python - 从 PyXML-0.8.4 使用 XPath 时导入错误

> ID：13019495
> 
> 赞同：0
> 
> 时间：2012-10-22T20:40:20.590
> 
> 标签：python, xpath, pyxml

我正在我的 unix 工作站上使用 Python 2.6.6-64bit 学习 Xpath 和 XSLT。对于 Xpath，我使用的是 PyXml-0.8.4 中提供的 xpath 模块。

但是，导入行本身会引发以下错误：

```
Traceback (most recent call last):
  File "xp.py", line 7, in <module>
    from xml.xpath          import Evaluate
  File "/usr/local/python-2.6.6-64bit/lib/python2.6/site-packages/_xmlplus/xpath/__init__.py", line 112, in <module>
    from pyxpath import ExprParserFactory
  File "/usr/local/python-2.6.6-64bit/lib/python2.6/site-packages/_xmlplus/xpath/pyxpath.py", line 59, in <module>
    from xml.xpath.ParsedAbbreviatedRelativeLocationPath import ParsedAbbreviatedRelativeLocationPath
  File "/usr/local/python-2.6.6-64bit/lib/python2.6/site-packages/_xmlplus/xpath/ParsedAbbreviatedRelativeLocationPath.py", line 31
    as = ParsedAxisSpecifier.ParsedAxisSpecifier('descendant-or-self')
     ^
SyntaxError: invalid syntax 
```

查找它使我明白这是因为“as”是 python-2.6 中的保留名称，而 PyXML-0.8.4 试图重新定义它。但是，没有关于如何解决此问题的说明。

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:47:01.627

PyXML 已过时，不应使用（请参阅[此处](http://sourceforge.net/projects/pyxml/files/)）。这就是为什么它没有更新。其中包含的许多功能都被添加到 Python 的标准库中。还有完全支持 Python XML 处理的第三方包，如[lxml](http://pypi.python.org/pypi/lxml/)。

# java - Java httpPost 没有正确发布数据（Apache 库）？

> ID：13019497
> 
> 赞同：1
> 
> 时间：2012-10-22T20:40:24.343
> 
> 标签：java, apache, entity, http-post

快速提问，因为我尝试了许多调试选项，但都没有帮助确定问题。我正在使用 Java 和 Apache HttpPost 库。

我目前的 httpGet 和 httpHead 工作正常，但是我无法让 httpPost 正确发送变量。我在我的服务器上设置了一个调试 PHP 脚本来简单地转储`$_POST`. 如果我在终端中执行 curl 请求，则可以正常工作。

代码片段：

```
 // create new HttpPost object
    postRequest = new HttpPost(url);

    // add post variables
    postRequest.setEntity(new StringEntity(body, ContentType.TEXT_HTML));

    // execute request
    response = executeRequest(postRequest); 
```

字符串变量“body”只是一个字符串，当前包含“test=testing”。此 PHP 调试脚本的输出：

```
<?php 

  echo "Input Stream: ";

  var_dump(file_get_contents('php://input'));

  echo "POST Variables: ";

  var_dump($_POST);

?> 
```

是 ：

```
Input Stream: string(12) "test=testing"
POST Variables: array(0) {
} 
```

有谁知道为什么它没有被拾取并转储到`$_POST`变量中？非常烦人，因为我花了几个小时在这上面！

任何帮助将不胜感激:)谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T10:17:07.007

请参阅[访问 HttpParams 的所有条目](https://stackoverflow.com/questions/9379768/access-all-entries-of-httpparams?lq=1)

要构建包含参数的 URI，请使用：

```
NameValuePair nvp = new BasicNameValuePair("test", "testing");
String query = URLEncodedUtils.format(nvp, "utf-8"); // use your favourite charset here
URI uri = new URI("http://localhost/app?" + query;
HttpPost postReq = new HttpPost(uri);
httpClient.execute(postReq); 
```

这将导致：`http://localhost/app?test=testing`被请求。

# msbuild - 如何配置发布配置文件以使用 NTLM 身份验证

> ID：13019505
> 
> 赞同：8
> 
> 时间：2012-10-22T20:40:53.007
> 
> 标签：msbuild, visual-studio-2012, msdeploy

在 Visual Studio 2012 中，使用发布配置文件和 Web 部署可以大大简化部署。但是它仍然缺少一些东西，或者我可能还不知道如何使用它。

*   我更喜欢使用 NTLM 身份验证，而不将用户名和密码（尤其是）存储在发布配置文件中。如何才能做到这一点？如果我将用户名和密码留空，系统会提示我输入。有没有像手动修改 .pubxml 文件的方法？
*   为什么用户名/密码存储在`PublishProfileName.pubxml`我已在源代码管理中签入的文件中，而不是`PublishProfileName.pubxml.user`每个用户本地的？我至少可以保存用户名，但显然不希望签入。
*   配置本身不是其中的一部分，`PublishProfileName.pubxml`而是存储`PublishProfileName.pubxml.user`在`LastUsedBuildConfiguration`.
*   平台与最后一点相同。
*   我也缺少对多服务器部署的支持。除了发布配置文件之外，我目前还被迫使用批处理文件。

**编辑**

适合发布的命令行是

```
MSBuild.Exe MyProject.sln /p:Configuration=QA /p:DeployOnBuild=true;PublishProfile=PublishToQA;AllowUntrustedCertificate=true /p:authType=NTLM /p:UserName= 
```

在此我想省略`/p:Configuration=QA`配置是否成为发布配置文件本身的一部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T06:45:34.430

你的问题的一些答案。

> *   我更喜欢使用 NTLM 身份验证，而不将用户名和密码（尤其是）存储在发布配置文件中。如何才能做到这一点？如果我将用户名和密码留空，系统会提示我输入。有没有像手动修改 .pubxml 文件的方法？

您的身份验证通常由托管 Web Deploy 的方式驱动。默认情况下，如果您使用 Web 管理服务，那么您将使用 IIS 用户进行身份验证。使用 IIS 用户，您可以控制哪些用户有权访问特定站点/应用程序。不过，您也可以将 WMSVC 配置为使用 Windows 身份验证。如果您在这些场景中使用 VS 时遇到问题，请告诉我。如果您使用远程代理服务来托管 Web 部署，那么在这种情况下，您将使用 Windows 身份验证。

> *   为什么用户名/密码存储在`PublishProfileName.pubxml`我已在源代码管理中签入的文件中，而不是 `PublishProfileName.pubxml.user`每个用户本地的？我至少可以保存用户名，但显然不希望签入。

我们有另一种机制供您确定哪些信息是私有/共享的。除密码外，所有发布信息都是共享的（*并且默认签入*）。为了简化设计，您可以拥有一个共享的发布配置文件，或者一个根本不共享的发布配置文件。在您的个人资料中，不存在共享某些字段而其他字段不共享的配置文件。密码在此处是特殊情况，并在 .pubxml.user 文件中基于每个用户/每台机器进行加密。

如果您想要一个私人发布配置文件，那么您可以简单地不签入与发布配置文件对应的 .pubxml 文件。这些存储在 Properties\PublishProfiles（或 My Project\PublishProfiles for VB）中，只是将它们从项目中排除，而不是将文件签入。发布对话框在磁盘上查找配置文件，而不仅仅是在该项目。一切都应该继续工作。

我们不支持在 .pubxml.user 文件中选择性地存储值的概念。发布对话框只会在该文件中存储一定数量的值。代替

> *   配置本身不是其中的一部分，`PublishProfileName.pubxml`而是存储 `PublishProfileName.pubxml.user`在`LastUsedBuildConfiguration`.
> *   平台与最后一点相同。

这是一个错误，它应该存储在 .pubxml 文件中，而不是 .pubxml.user 文件中。我们已经修复了这个问题，但还没有机会发布更新。

无法在发布配置文件中设置配置属性。Configuration 属性是构建过程的核心部分。更具体地说，我们之所以没有调用此属性 Configuration 是因为 .pubxml 文件在构建和发布期间被导入到 .csproj/.vbproj 的定义中。由于其他属性是基于配置定义的，因此一旦设置该值，您将无法更改该值。[我刚刚在http://sedodream.com/2012/10/27/MSBuildHowToSetTheConfigurationProperty.aspx](http://sedodream.com/2012/10/27/MSBuildHowToSetTheConfigurationProperty.aspx)上写了太多关于这个主题的详细信息。此限制是 MSBuild 的事情，而不是发布限制。对于命令行，您应该通过以下方式指定配置： msbuild.exe myproj.csproj /p:...(other properties)... /p:Configuration=

> *   我也缺少对多服务器部署的支持。除了发布配置文件之外，我目前还被迫使用批处理文件。

我们对此没有直接支持，但如果您扩展您的需求，我可能会提供帮助。仅供参考，我有一个您可能感兴趣的扩展程序。我已将 5 分钟的视频发布到[http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx](http://sedodream.com/2012/03/14/PackageWebUpdatedAndVideoBelow.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T05:47:29.383

您可以自由（并鼓励）手动编辑您的`pubxml`文件，因此请随时删除密码。

要切换到 NTLM，`AuthType`请`NTLM`在第一个`PropertyGroup`.

`Platform`并`Configuration`保持构建配置，该`user`文件只存储它们，以便 Visual Studio 知道您部署的最后一个配置是什么。

多服务器是指网络农场吗？如果是这样，您可以尝试查看基本上执行从主服务器到其他服务器的 MSDeploy 同步的[Web Farm Framework 。](http://www.iis.net/downloads/microsoft/web-farm-framework)

或者，您可以切换到命令行并使用[`postSync`](http://technet.microsoft.com/en-us/library/dd569089%28v=WS.10%29.aspx)在远程服务器上上传和执行批处理文件，从那里触发其他部署。

# java - Java while循环在一次迭代后停止

> ID：13019513
> 
> 赞同：1
> 
> 时间：2012-10-22T20:41:09.323
> 
> 标签：java, loops, while-loop

我正在尝试创建一个石头、纸、剪刀、蜥蜴、spock 程序，该程序会不断重复，直到用户选择退出。但是，我无法弄清楚如何使程序循环。它在一场比赛后一直退出。我认为这可能与我的 while 语句的设置方式有关，但我不完全确定如何解决它。谢谢。

```
import java.util.Scanner;
import java.util.Random;

public class project2_rpsls {

public static void main(String[] args) 
{
    int round=0;
    String uMove = null, cMove = null/*, loop*/;
    Scanner scan=new Scanner(System.in);
    /*System.out.println("Would you like to play?");
    loop=scan.next();
    loop=loop.toUpperCase();
    while (loop.equals("Y"))*/

        while (round>=0) 
        {
            round++;
        }
        //get the moves
        {
        uMove = getuMove();
        cMove = getcMove();
        }
        //Determining the winner
        {
            String winner;
                if (cMove.equals(uMove))
                        {
                        winner="It was a tie!";
                        }
                else if (uMove.equals("ROCK") && cMove.equals("LIZARD") ||
                        uMove.equals ("ROCK") && cMove.equals("SCISSORS"))
                        {
                        winner="You Win!";
                        }
                else if (uMove.equals("PAPER") && cMove.equals("ROCK") ||
                        uMove.equals ("PAPER") && cMove.equals("SPOCK"))
                        {
                        winner="You Win!";
                        }
                else if (uMove.equals("SCISSORS") && cMove.equals("PAPER") ||
                         uMove.equals ("SCISSORS") && cMove.equals("LIZARD"))
                        {
                        winner="You Win!";
                        }
                else if (uMove.equals("LIZARD") && cMove.equals("SPOCK") ||
                         uMove.equals ("LIZARD") && cMove.equals("PAPER"))
                        {
                        winner="You Win!";
                        }
                else if (uMove.equals("SPOCK") && cMove.equals("SCISSORS") ||
                         uMove.equals ("SPOCK") && cMove.equals("ROCK"))
                        {
                        winner="You Win!";
                        }
                else 
                        {
                        winner="You Lose!";
                        }
            System.out.println("The computer picked " + cMove + " -- " + winner);
            }

            scan.close();
}

//Get user's move
private static String getuMove() 

{
Scanner scan=new Scanner(System.in);
    String uMove="test";
    while (!uMove.equals("ROCK") &&
            !uMove.equals ("PAPER")&&
            !uMove.equals("SCISSORS")&&
            !uMove.equals("LIZARD")&&
            !uMove.equals("SPOCK"))
    {
        System.out.println("Please enter your move: ");
        uMove=scan.next();
        uMove=uMove.toUpperCase();  
    }
    scan.close();
    return uMove;

    }

//Get computer's move
private static String getcMove() {
String cMove;
Random cMoveInt = new Random();
int rnum;
rnum=cMoveInt.nextInt(5);

    {
        if (rnum == 1) {
            cMove = "ROCK";
        }
        else if (rnum == 2) {
            cMove = "PAPER";
        }
        else if (rnum == 3){
            cMove = "SCISSORS";
        }
        else if (rnum == 4){
            cMove = "LIZARD";
        }
        else {
            cMove = "SPOCK";
        }

    }

        return cMove;
}

} 
```

感谢您的指点。在我将我的 while 循环更改为

```
 while (round>=0) 
        {
            round++;

        //get the moves
        uMove = getuMove();
        cMove = getcMove();

        //Determining the winner
        {
            String winner;
             ...etc. 
```

我收到以下错误。

```
 Exception in thread "main" java.util.NoSuchElementException
at java.util.Scanner.throwFor(Unknown Source)
at java.util.Scanner.next(Unknown Source)
at project2_rpsls.getuMove(project2_rpsls.java:82)
at project2_rpsls.main(project2_rpsls.java:22) 
```

根据我的研究，我的扫描仪似乎没有找到任何要阅读的内容，但我不知道如何阅读，因为它应该是在阅读用户输入。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T20:44:17.493

您的

```
while (round >= 0)
{
    round++;
} 
```

...除了增加变量**之外什么都不**`round`做，直到它回绕回零（大约 40 亿次循环之后）。然后你的其余代码运行。将其余代码*移到*循环中。

例如：

```
while (round >= 0)
{
    round++;

    uMove = getuMove();
    cMove = getcMove();

    String winner;

    // ...etc.
} 
```

另请注意，以下大括号是多余的：

```
 {
     uMove = getuMove();
     cMove = getcMove();
   } 
```

这可以写成：

```
 uMove = getuMove();
   cMove = getcMove(); 
```

# jquery - 灯箱不调用 html 表单

> ID：13019514
> 
> 赞同：0
> 
> 时间：2012-10-22T20:41:14.920
> 
> 标签：jquery, fancybox, fancybox-2

我有一个简单的例子，我使用 FancyBox 作为灯箱。我有一个配置为使用 FancyBox 的表单。一个链接是当我单击它时显示在灯箱中的图片，这对我来说非常适合。我也有一个简单的 .html 表单，但是当我单击它时，它不会显示在灯箱中，也不会重定向到表单。下面是我的代码：

**菜单表格.html**

```
<!DOCTYPE html>
<html>
<head>
    <title>fancyBox - Fancy jQuery Lightbox Alternative | Demonstration</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />

    <!-- Add jQuery library -->
    <script type="text/javascript" src="../lib/jquery-1.8.2.min.js"></script>

    <!-- Add mousewheel plugin (this is optional) -->
    <script type="text/javascript" src="../lib/jquery.mousewheel-3.0.6.pack.js"></script>

    <!-- Add fancyBox main JS and CSS files -->
    <script type="text/javascript" src="../source/jquery.fancybox.js?v=2.1.2"></script>
    <link rel="stylesheet" type="text/css" href="../source/jquery.fancybox.css?v=2.1.2" media="screen" />

    <!-- Add Button helper (this is optional) -->
    <link rel="stylesheet" type="text/css" href="../source/helpers/jquery.fancybox-buttons.css?v=1.0.5" />
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-buttons.js?v=1.0.5"></script>

    <!-- Add Thumbnail helper (this is optional) -->
    <link rel="stylesheet" type="text/css" href="../source/helpers/jquery.fancybox-thumbs.css?v=1.0.7" />
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-thumbs.js?v=1.0.7"></script>

    <!-- Add Media helper (this is optional) -->
    <script type="text/javascript" src="../source/helpers/jquery.fancybox-media.js?v=1.0.4"></script>

    <script type="text/javascript">

    $(document).ready(function() {

            $('#regForm').click(function() {
                $.fancybox({
                        'href' : 'form.html'
                    });

                return false;
            });

            $('#pic').click(function() {
                $.fancybox({
                        'href' : 'http://en.gtwallpaper.com/fondecran/chiens/chiens_01.jpg'
                    });

                return false;
            });

        });

    </script>
    <style type="text/css">
        .fancybox-custom .fancybox-skin {
            box-shadow: 0 0 50px #222;
        }
    </style>
</head>
<body>

    <a id ="regForm" href="form.html" >form</a>

    <a id ="pic" href="http://4.bp.blogspot.com/-ZdjEZ8qqBq0/UA2dNK8JYDI/AAAAAAAAAJ8/31bh4BzcA6E/s400/Dog-1.jpg" >dog</a>

</body>
</html> 
```

**表单.html**

```
<!DOCTYPE html>
<html>
<head>

</head>
<body>
    <label>Name</label><input type="text" />
    <label>Password</label><input type="text" />
    <input type="submit"/>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:18:38.730

你有什么理由必须使用这种`click()`方法吗？

如果不是，这个简单的脚本适用于`image`和`form`：

```
$(document).ready(function(){
  $(".fancybox").fancybox();
}); 
```

现在，在特定情况下`form`，由于这是一个外部 html 文档，因此您必须告诉 fancybox`type`必须打开的内容，因此，在您的 html 中您可以这样做

```
 <a class="fancybox fancybox.ajax" href="form.html" >open form</a>
 <a class="fancybox" href="http://4.bp.blogspot.com/-ZdjEZ8qqBq0/UA2dNK8JYDI/AAAAAAAAAJ8/31bh4BzcA6E/s400/Dog-1.jpg" >open dog image</a> 
```

**注意**`fancybox.ajax`我们让 fancybox 知道内容的附加类`type`。另请注意，`ajax`如果 html 文档在同一个域中或`iframe`在另一个域中（您也应该有权访问），您可以使用

```
 <a class="fancybox fancybox.iframe" href="form.html" >open form</a> 
```

最后注意：`ajax`不会在本地工作，你必须在服务器上测试它。

# java - Java 类实例化

> ID：13019515
> 
> 赞同：0
> 
> 时间：2012-10-22T20:41:15.693
> 
> 标签：java

我在同一个包中有一个文件 main.java 和其他几个文件。每个文件都是 something.class，我想执行它们，但是我在定位如何从 something.java 文件实例化类然后执行它时遇到问题。我是java新手，这只是我写的第二个程序，所以请温柔。

我正在使用的文件之一是 startmessage.java，这是我尝试过的：

`Object StartMessage = new StartMessage();`

我什至不知道这是否正确。非常感谢任何和所有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:47:06.330

类文件是编译的类。Java 类的源代码通常放在一个以它们自己命名的文件中。例如，对于您的 startmessage 类，您将使用 StartMessage.java。

从另一个文件中，您可以导入该类，然后您可以将其实例化为该类型的对象。

例如：

```
package example;
import StartMessage;
public class Example {

    public static void main (String args[]) {
        StartMessage startMessage = new StartMessage();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:46:10.560

案例很重要。

如果您的文件确实被称为 startmessage.java，并且您已经编译了它，并且想要创建它的实例，那么请尝试：

```
startmessage sm = new startmessage(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:46:14.357

您必须导入要在整个代码中使用的 Java 类：

```
package <package_name>

import <location_of_class> 
```

像这样：

```
package michael;

import parent.child.*; //use any method with * 
```

关于导入和包的有用链接：http: [//www.leepoint.net/notes-java/language/10basics/import.html](http://www.leepoint.net/notes-java/language/10basics/import.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:46:27.923

在 Java 中，文件必须完全按照它们包含的类命名。在大多数情况下，这是一个区分大小写的规则。一探究竟。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T20:46:33.427

该代码段可以编译（假设您有一个带有默认构造函数的 StartMessage 类），但它不一定正确。通常，您将希望以下列方式声明对象：

```
<type> <name> = new <type>(<args>); 
```

通过这种设计，您的代码段在以下形式中会更正确：

```
StartMessage message = new StartMessage(); 
```

但是，因为 StartMessage 是 Object 的子类，并且变量几乎可以命名为任何名称，所以您的原始代码编译得很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T20:47:31.197

*   要执行预编译的 java 类 (.class)，它应该有一个要执行的 main 方法，并且可以使用命令 java [http://www2.cs.uic.edu/~sloan/CLASSES/java/运行](http://www2.cs.uic.edu/~sloan/CLASSES/java/)

*   关于第二期，请看以下教程： [http ://docs.oracle.com/javase/tutorial/java/javaOO/index.html](http://docs.oracle.com/javase/tutorial/java/javaOO/index.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-22T20:49:04.997

好吧，首先您的文件名必须与类名完全相同。例如：如果你命名了文件`startmessage.java`，那么你的类应该是这样的：

```
public class startmessage { } 
```

但这不是命名java类的方法。正确的方法是：

```
public class StartMessage {} 
```

要实例化一个类，你应该这样做：

```
StartMessage message = new StartMessage(); 
```

如果你这样做：

```
Object message = new StartMessage(); 
```

您将无法访问`StartMessage`类的方法。唯一的方法将在`Object`类中可用。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-22T20:50:36.270

您可以通过创建实例（构造它）来实例化您的类。例如：

```
public class MyClass
{
  public void myMethod1() {System.out.println("Hello from method 1");}
  public void myMethod2() {System.out.println("Hello from method 2");}
}

public class Runner
{
  public static void main(String[] args)
  {
    // declare variable of type MyClass
    MyClass myInstance = new MyClass();

    // now execute its methods
    myInstance.myMethod1();

    myInstance.myMethod2();
  }
} 
```

这将在控制台中产生输出：

```
Hello from method 1
Hello from method 2 
```

根据您在问题中的示例，您应该使用 StartMessage 而不是 Object，例如

```
StartMessage myVariable = new StartMessage(); 
```

# objective-c - 使用 NSPredicate 访问 self.items

> ID：13019518
> 
> 赞同：0
> 
> 时间：2012-10-22T20:41:28.233
> 
> 标签：objective-c, ios, core-data, nspredicate, nsfetchedresultscontroller

由于各种原因（最后总结），我正在尝试使用 an`NSFetchedResultsController`返回一些`NSManagedObjects`.

具体来说，a`Person`有很多`Cars`，使用核心数据关系汽车建模。我想添加另一种方法`Person`来返回与 self.cars 相同的汽车，但使用 FRC。

我想我犯了一个基本错误`NSPredicate`，该错误旨在仅找到以下汽车`car.person == self`：

```
NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Car"];
NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"dateAdded" ascending:YES];

 NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];
   [fetchRequest setSortDescriptors:sortDescriptors];

   NSPredicate *predicate = [NSPredicate predicateWithFormat:@"person == '%@'", self];
   [fetchRequest setPredicate:predicate];

   NSFetchedResultsController *controller = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                  managedObjectContext:self.managedObjectContext
                                                  sectionNameKeyPath:nil
                                                  cacheName:nil];
   NSError *error;
   BOOL success = [controller performFetch:&error]; 
```

根本没有汽车被退回。我的谓词不正确吗？

*旁注 - 为什么不直接使用 self.cars？* 就像我说的，这是一个实验。我希望从`NSFetchedResultsController`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:52:38.240

在示例中，您正在获取`"Person"`对象。也许您想`"Car"`取而代之的是获取对象？

```
 NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] initWithEntityName:@"Car"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:41:15.617

谓词中的单引号是错误的，应该是

```
[NSPredicate predicateWithFormat:@"person == %@", self]; 
```

# c# - 如何实现 SharpSerializer 的 ITypeNameConverter

> ID：13019519
> 
> 赞同：0
> 
> 时间：2012-10-22T20:41:46.337
> 
> 标签：c#

该接口只有2个方法

```
string ConvertToTypeName(Type type);
Type ConvertToType(string typeName); 
```

但是 SharpSerializer 使用 type 和 typeName = null 调用我的实现，这对我来说没有任何意义

我正在尝试使用简单的 namespace.type 名称（由于 ILMerge，我无法在我的应用程序中使用程序集名称）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T08:56:58.400

这是一条红鲱鱼

这是 SharpSerializer 的正常行为：

```
ConvertToTypeName(null) returns String.Empty 
```

和

```
ConvertToType(String.Empty) returns null 
```

（您可以在 TypeNameConverter 类中看到这一点）

我的问题是我的 ConvertToType("something valid") 实现返回 null

# objective-c - 加法和减法在iOS应用程序中不起作用

> ID：13019521
> 
> 赞同：-1
> 
> 时间：2012-10-22T20:42:02.210
> 
> 标签：objective-c, ios

如果在文本字段中输入的文本与数组中的对象匹配，我正在尝试制作一个应用程序，该应用程序可以将整数带走或加 1。

我的 .m 文件中的代码

```
NSString *inputtwo =EnterNameText.text;
BOOL isItright = NO;
for(NSString *possible in scoreArray1)
{
    if([inputtwo isEqual:possible] )
    {
        isItright = YES;
        break;
    }
}

NSString *wronginput = EnterNameText.text;
BOOL isWrong = NO;
for(NSString *wrong in scoreArray1)
{
    if(![wronginput isEqual:wrong ] )
    {
        isWrong = YES;
        break;
    }
}

static int myInt;

if(isItright)
{
    myInt++;

    NSString *score = [NSString stringWithFormat:@"%d", myInt];
    [scorelabel setText:score];
}

if (isWrong)
{
    myInt--;

    NSString *score = [NSString stringWithFormat:@"%d", myInt];
    [scorelabel setText:score];
} 
```

因此程序会检查名为 scoreArray1 的数组中是否存在匹配项，如果存在则将 myInt 加 1，否则将带走一个。

问题是它只是拿走一个，不管它是对还是错。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:50:21.400

`isEqualToString`如果您正在比较字符串值，则应该使用。该`isEqual`方法通常比较指针值，因此您从文本字段中获取的内容与输入到数组中的内容总是会返回不同的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:05:59.760

您的程序中有逻辑错误。首先，您检查文本字段的内容是否与您的任何元素匹配`scorearray1`，如果匹配`isItright`为真。到此为止，一切都是正确的（除了相等性检查最好用 来完成`isEqualToString`）。但是现在您检查是否`scorearray1`不包含您的文本字段的内容，并且如果只有一个元素`scorearray1`不匹配，则文本字段`isWrong`将为真。

您应该只使用第一个循环和以下`if else`. 如果 textfield 的内容等于`scorearray1`add 1 to中的任何字符串`myInt`，否则（数组中没有匹配项）减去 1。

使用以下代码：

```
NSString *inputtwo =EnterNameText.text;
BOOL isItright = NO;
for(NSString *possible in scoreArray1)
{
    if([inputtwo isEqualToString:possible] )
    {
        isItright = YES;
        break;
    }
}

static int myInt;

if(isItright)
{
    myInt++;
}
else
{
    myInt--;
}
NSString *score = [NSString stringWithFormat:@"%d", myInt];
[scorelabel setText:score]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:35:49.653

```
NSString *input = EnterNameText.text;
BOOL matchFound = NO;
static in myInt;

for (NSString *score in scoreArray1)
    if ([input isEqualToString:score])
    {
        matchFound = YES;
        break;
    }

if (matchFound)
    myInt++;
else
    myInt--; 
```

# java - 带有动态信息的工具提示弹出窗口

> ID：13019522
> 
> 赞同：3
> 
> 时间：2012-10-22T20:42:05.477
> 
> 标签：java, css, html, jsp, tooltip

我要做的是，当您将鼠标悬停在名称上时，会显示一个包含该名称详细信息的工具提示弹出窗口。

我做了以下但由于某种原因，它似乎不起作用。没有工具提示出现。当您将鼠标悬停在名称上时，它会调用一个函数并执行 AJAX 请求，我们会以字符串形式返回详细信息。我已经验证该函数工作正常并返回字符串。

我似乎无法将返回的字符串放入工具提示弹出窗口中。我在 IE8 上测试这个

Javascript函数：

```
function showDetails(name){
    var xmlHttpRequest; 
    if(window.XMLHttpRequest){
        xmlHttpRequest = new XMLHttpRequest();
    }else{
        xmlHttpRequest = new ActiveXObject("Microsoft.XMLHTTP>");
    }
    xmlHttpRequest.onreadystatechange=function(){
        if(xmlHttpRequest.readyState == 4 && xmlHttpRequest.status == 200){
            document.getElementById("details").innerHTML = xmlHttpRequest.responseText;
        }
    }
    xmlHttpRequest.open("GET", "showStopsInfoPopup.do?name="+name, true);
    xmlHttpRequest.send();
} 
```

CSS

```
#tooltip { position: relative; }
    #tooltip a{text-decoration: none;}
    #tooltip a span { display: none; color: #FFFFFF; }
    #tooltip a:HOVER span { display: block; position: absolute; 
                             width: 200px; background-color: #aaa; 
                             height: 50px; color: #FFFFFF; padding: 5px; } 
```

JSP 页面：

```
<tr id="tooltip">
    <td onmouseover="showDetails('${name}')">
        <a href="#"><c:out value="${name}"><span id="details"></span></c:out></a> 
    </td>
</tr> 
```

只有我的视图源页面的相关部分（生成的 html）：“a”标签内的“span”标签丢失了！！

```
<tr id="tooltip">               
    <td onmouseover ="showDetails('NRT')"><a href="#">NRT</a> </td> 
</tr>    
.
.
.
...  
<span id="details">*****************</span> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:05:15.380

我假设您正在生成动态显示的数据并且您有不止一行。

如果是这样，那么表中的所有跨度标记都将具有相同的 id("details")。您必须能够区分两行。

您可以做的是在 id 中添加一个数字，并在进入下一行时增加数字，以便每个 span 标签都有唯一的 id。

```
<a href="#"><c:out value="${name}"><span id="details${index}"></span></c:out></a> 
```

请务必将索引作为参数传递给您的 javascript 函数并进行以下更改。

```
function showDetails(name, index){
..
...
document.getElementById("stopsInfo"+index).innerHTML = xmlHttpRequest.responseText;
.
...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:05:25.853

您能否查看源代码并向我们展示生成的 HTML。我试过这个，在做一个快速测试时它似乎工作正常。

# meteor - 如何向 Meteor.users 集合添加字段

> ID：13019529
> 
> 赞同：5
> 
> 时间：2012-10-22T20:42:33.343
> 
> 标签：meteor

我想要存储在客户端用户文档中的 Facebook accessToken。在[流星文档](http://docs.meteor.com/#meteor_users)之后，我应该添加一个新的发布调用。

**在 server.js 中：**

```
Meteor.publish("access_token", function () {
  return Meteor.users().find(
    { _id : Meteor.userId() }, 
    {'services.facebook.accessToken': 1}
  );
}); 
```

**在 client.js 中：**

```
Meteor.subscribe("access_token"); 
```

好吧，这就是我迷路的地方。accessToken 现在应该只显示在 Meteor.users 集合中以供登录用户使用吗？像：

```
var user = Meteor.users.findOne({ _id : Meteor.userId() }); 
console.log(user); // includes services.facebook.accessToken now 
```

显然，我已经尝试了上述方法并且 accessToken 没有出现。是的，我已经确认 mongo 文档包含 services.facebook。

那么......我是否要创建一个新的客户端集合并以某种方式将其连接到新的发布？如何获取 accessToken？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-23T04:36:40.320

你应该使用“字段”关键字

```
Meteor.users.find({ _id: this.userId },
    { fields: { the-extra-fields-that-you-want-go-here: 1 } }
); 
```

[http://docs.meteor.com/#fieldspecifiers](http://docs.meteor.com/#fieldspecifiers)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-23T04:52:02.953

您可以发布您想要的字段：

```
Meteor.publish( null, function() {
  Meteor.users.find({}, {fields: {profile: 1, username: 1, ...}})
} 
```

# c++ - pthreads：触发其他线程的线程

> ID：13019532
> 
> 赞同：5
> 
> 时间：2012-10-22T20:42:41.020
> 
> 标签：c++, multithreading, synchronization, pthreads

您好，我是多线程编程的新手。我正在尝试创建一个创建线程 THREAD1 的代码，在它完成某些操作后，它会触发另外两个线程，比如 THREAD2 和 THREAD3，然后退出。

我写了两个可能的解决方案。

1）使用条件变量（不工作：在某些情况下我遇到了死锁）：

```
pthread_mutex_t ready_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t  ready_cond  = PTHREAD_COND_INITIALIZER;
bool ready = false;

void* trigger(void*);
void* func1(void*);
void* func2(void*);

int main()
{
    pthread_t thread1;
    pthread_t thread2;
    pthread_t thread3;  
    pthread_create(&thread1, 0, &trigger, 0);
    pthread_create(&thread2, 0, &func1, 0);
    pthread_create(&thread3, 0, &func2, 0);
    pthread_join(thread1, 0);
    pthread_join(thread2, 0);
    pthread_join(thread3, 0);
}

void *trigger(void*)
{
    pthread_mutex_lock(&ready_mutex);
    ready = true;
    pthread_cond_broadcast(&ready_cond);
    pthread_mutex_unlock(&ready_mutex);
    return 0;
}

void *func1(void*)
{
    while (!ready) // Needed to avoid spuriuos wake-up
    {
        pthread_mutex_lock(&ready_mutex);
        pthread_cond_wait(&ready_cond, &ready_mutex);
        pthread_mutex_unlock(&ready_mutex);
    }
    std::cout << "In 'func1'>> Do something" << std::endl;
    return 0;
}

void *func2(void*)
{
    while (!ready) // Needed to avoid spuriuos wake-up
    {
        pthread_mutex_lock(&ready_mutex);
        pthread_cond_wait(&ready_cond, &ready_mutex);
        pthread_mutex_unlock(&ready_mutex);
    }
    std::cout << "In 'func2'>> Do something" << std::endl;
    return 0;
} 
```

2) THREAD1 直接创建另外两个线程。

```
pthread_mutex_t ready_mutex = PTHREAD_MUTEX_INITIALIZER;
pthread_cond_t  ready_cond  = PTHREAD_COND_INITIALIZER;

pthread_t thread1;
pthread_t thread2;
pthread_t thread3;

void* trigger(void*);
void* func1(void*);
void* func2(void*);

int main()
{
    pthread_create(&thread1, 0, &trigger, 0);

    pthread_join(thread1, 0);
    pthread_join(thread2, 0);
    pthread_join(thread3, 0);
}

void *trigger(void*)
{
    std::cout << "In 'trigger'>> Do something" << std::endl;

    pthread_create(&thread2, 0, &func1, 0);
    pthread_create(&thread3, 0, &func2, 0);

    return 0;
}

void *func1(void*)
{
    std::cout << "In 'func1'>> Do something" << std::endl;

    return 0;
}

void *func2(void*)
{
    std::cout << "In 'func2'>> Do something" << std::endl;

    return 0;
} 
```

我想知道你的意见。非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T20:51:35.970

> 使用条件变量（不起作用：在某些情况下我遇到了死锁）：

检查共享变量的状态时，代码不会锁定互斥锁`ready`。当它确实锁定互斥锁`ready`时，到那时可能已经发生了很好的变化，这就是您看到死锁的原因。

使用条件变量等待状态更改的正确版本是（省略错误检查）：

```
pthread_mutex_lock(&ready_mutex);
while(!ready) // Needed to avoid spuriuos wake-up
    pthread_cond_wait(&ready_cond, &ready_mutex);
// ready == true here
pthread_mutex_unlock(&ready_mutex); 
```

以上假设`ready`只有在持有相同的互斥锁时才会更改。

# java - 将 Tomcat 7 升级到 64 位 JVM

> ID：13019534
> 
> 赞同：2
> 
> 时间：2012-10-22T20:42:47.050
> 
> 标签：java, linux, tomcat

我在 64 位 CentOS 系统上安装了 Tomcat 7（我通过从“核心”下的 Apache Tomcat 下载站点下载 apache-tomcat-7.0.xx.tar.gz 文件安装 Tomcat 7，然后在我的 CentOS 盒子上简单地解压缩，不像[这里](http://tomcat.apache.org/tomcat-7.0-doc/setup.html "这里")的 Tomcat 设置文档中描述的那样作为 Unix 守护进程。）在安装 Tomcat 之前，机器上安装了 32 位 JVM。

我的问题是：我想在这台机器上安装和使用 64 位 JVM 以供 Tomcat 使用，而不是 32 位 JVM。除了将 JAVA_HOME 设置为指向新的 JVM 之外，我还需要做任何事情吗？我是否需要考虑与 JVM 更改相关的其他 Tomcat 考虑因素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:41:30.350

您可能需要调整一些内存设置以增加`-Xmx`和/或`-XX:MaxPermSize`但除此之外它应该只是工作（TM）。

# jquery - jquery Orgchart 多棵树或 orgchart

> ID：13019538
> 
> 赞同：0
> 
> 时间：2012-10-22T20:42:53.770
> 
> 标签：jquery, jquery-plugins, orgchart

我正在使用来自[https://github.com/wesnolte/jOrgChart](https://github.com/wesnolte/jOrgChart)的插件。它在显示单个组织结构图或层次结构方面做得很好。

我希望能够在两棵树之间“共享”节点。例如，我希望组织结构图 1 中的节点 A 移动到组织结构图 2。

我的实例化代码（CoffeeScript 如下：

```
$ ->
  $(".org1").jOrgChart
    dragAndDrop: true
    chartElement: "#chartArea1"

  $(".org2").jOrgChart
    dragAndDrop: true
    chartElement: "#chartArea2" 
```

但是，将元素从 org1 拖动到 org 2 不会更新任一树。注意：如果我将两棵树放在同一个chartElement（即div id="chartArea1"）下，则只显示一棵树，这就是它们位于不同chartElements 中的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-02T19:26:10.940

使用以下过程：

*   三个图表（parentChart、chartArea1、chartArea2）
*   在 parentChart 上使用 dragAndDrop: true
*   使用 chartArea1 和 chartArea2 作为 parentChart 的孩子

# matlab - Octave fminsearch：最小化和选项的问题

> ID：13019540
> 
> 赞同：2
> 
> 时间：2012-10-22T20:42:57.427
> 
> 标签：matlab, octave

我正在尝试使用 Octave 的 fminsearch 函数，我以前在 MATLAB 中使用过该函数。该功能似乎没有充分记录（至少对我而言），而且我不知道如何设置选项以使其实际上最小化。

我尝试使用此消息末尾的代码拟合一个非常简单的指数函数。我想要以下内容：
我希望函数将 x 和 y 值作为输入，就像 MATLAB 所做的那样。此外，我希望对选项进行一些控制，以确保它实际上最小化（即最小化！）。
当然，最后我想拟合比指数更复杂的函数，但我希望至少能够拟合指数。

我对 fminsearch 有几个问题：

1.  我尝试将 x 值和 y 值交给函数，但是像这样的 matlab 风格的东西：

    ```
    [xx,fval]=fminsearch(@exponential,[1000 1],x,y); 
    ```

    或者

    ```
    [xx,fval]=fminsearch(@exponential,[33000 1],options,x,y) 
    ```

    产生错误：

    > 错误：options(6) 不对应于已知算法
    > 错误：调用自：
    > 错误：/opt/local/share/octave/packages/optim-1.0.6/fmins.m 第 72 行第 16 列
    > 错误：/opt/ local/share/octave/packages/optim-1.0.6/fminsearch.m 第 29 行第 4 列

    或者，分别（对于上面的第二种情况）：

    > 错误：第 4 行第 3 列附近的“x”未定义
    > 错误：调用自：
    > 错误：/Users/paul/exponential.m 第 4 行第 2 列
    > 错误：/opt/local/share/octave/packages/optim-1.0.6 /nmsmax.m 第 63 行第 6 列
    > 错误：/opt/local/share/octave/packages/optim-1.0.6/fmins.m 第 77 行第 9 列
    > 错误：/opt/local/share/octave/packages /optim-1.0.6/fminsearch.m 第 29 行第 4 列

    显然，参数的顺序与`fminsearch`MATLAB 中的不同。那么，这个顺序如何？？
    我怎样才能使`fminsearch`取值和选项？

2.  我找到了解决函数不接受值问题的解决方法：我将 x 和 y 值定义为全局值。不优雅，但至少函数中的值可用。
    尽管如此，`fminsearch`并没有正确地最小化。
    如下所示：

    这是功能：

    ```
    function f=exponential(coeff)
    global x
    global y
    X=x;
    Y=y;
    a= coeff(1);
    b= coeff(2);
    Y_fun = a .* exp(-X.*b);
    DIFF = Y_fun - Y; 
    SQ_DIFF = DIFF.^2;

    f=sum(SQ_DIFF);
    end 
    ```

    这是代码：

    ```
    global x
    global y
    x=[0:1:200];
    y=4930*exp(-0.0454*x);
    options(10)=10000000;
    [cc,fval]=fminsearch(@exponential,[5000 0.01]) 
    ```

    这是输出：

    > 抄送 =
    > 
    > 4930.0 5184.6
    > 
    > fval = 2.5571e+08

    为什么`fminsearch`找不到解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T09:55:00.953

octave-forge 包“optim”中有一个 fminsearch 实现。您可以在其实现文件中看到第三个参数始终是选项向量，第四个参数始终是 grad 向量，因此您的 ,x,y 调用将不起作用。

您还可以在实现中看到它调用了 fmins 实现。

该 fmins 实现的文档指出：

```
 if options(6)==0 && options(5)==0 - regular simplex
         if options(6)==0 && options(5)==1 - right-angled simplex
            Comment: the default is set to "right-angled simplex".
              this works better for me on a broad range of problems,
              although the default in nmsmax is "regular simplex" 
```

我最近的一个问题可以用 matlab 的 fminsearch 很好地解决，但不能用这个 octave-forge 实现。我必须指定一个选项向量 [0 1e-3 0 0 0 0] 让它使用常规单纯形而不是“直角单纯形”。如果您的系数在比例上差异很大，则默认八度音程毫无意义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T04:17:40.107

不管选项是什么，*优化*函数`fminsearch`总是试图找到一个最小值。因此，如果您发现它没有找到最小值，那是因为它没有这样做。

 *从您提供的代码中，我无法确定出了什么问题。使用全局变量的解决方案应该有效，并且确实*在*这里有效，所以您身边的其他事情一定会出错。（注意：我使用的是 MATLAB，而不是 Octave，所以这两个函数可能略有不同......）

无论如何，为什么不这样做呢？

```
function f = exponential(coeff)

    x = 0:1:200;
    y = 4930*exp(-0.0454*x);

    a = coeff(1);
    b = coeff(2);

    Y_fun = a .* exp(-x.*b);     

    f = sum((Y_fun-y).^2);
end 
```

或者，如果您必须传递`x`和`y`作为外部参数，

```
x = [0:1:200];
y = 4930*exp(-0.0454*x);
[cc,fval] = fminsearch(@(c)exponential(c,x,y),[5000 0.01])

function f = exponential(coeff,x,y)

    a = coeff(1);
    b = coeff(2);

    Y_fun = a .* exp(-x.*b);     

    f = sum((Y_fun-y).^2);

end 
```*

# cuda - 合并一组奇数

> ID：13019541
> 
> 赞同：1
> 
> 时间：2012-10-22T20:42:57.893
> 
> 标签：cuda

我试图了解合并全局内存。
假设我想将一组奇数的浮点数加载到全局内存中。每个线程将处理一组 3 个浮点数。假设这些浮点数是 A、B 和 C。

```
A0,  B0,  C0
A1,  B1,  C1
A2,  B2,  C2
..          
A19, B19, C19 
```

所以线程会像这样抓取数据：

```
Thread 0:  A0,  B0,  C0  
Thread 1:  A1,  B1,  C1  
Thread 2:  A2,  B2,  C2
..
Thread 19:  A19, B19, C19 
```

第一种方法：
我可以加载 3 个数组：`float A[20]; float B[20]; floatC[20];`我必须 cudaMemcpy() 三个不同的时间才能将数据加载到全局内存中。这种方法可能不会很好地结合起来。

第二种方法：
更好的方法是：

```
struct {float A, float B, float C} dataPt;
dataPt data[20]; 
```

我可以用一个 cudaMemcpy() 加载数据，但我不确定内存访问是否会很好地合并。

第三种方法：

```
struct {float A, float B, float C, float padding} dataPt2;
dataPt2 data2[20]; 
```

或者

```
struct __align__(16){float A, float B, float C} dataPt3;
dataPt3 data3[20]; 
```

我可以使用单个 cudaMemcpy() 将数据加载到全局内存，并且线程对数据的访问将被合并。（以浪费全局内存为代价。）

1）第一种方法不会合并，因为每个线程可能需要 3 个总线周期来加载输入数据。
2) 第二种方法将合并许多线程，但会有一些线程需要两个总线周期来获取输入数据。
3）第三种方法将合并所有线程。

这是准确的吗？第二种和第三种方法之间有显着差异吗？是否有使用 3 个线程维度（threadIdx.x、threadIdx.y、threadIdx.z）的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:33:19.937

只是放大@talonmies 的答案。假设我们的内核如下所示：

```
__global__ void kern(float *a, float *b, float *c){

  float local_a, local_b, local_c;
  int idx = threadIdx.x + (blockDim.x * blockIdx.x);

  local_a = a[idx];
  local_b = b[idx];
  local_c = c[idx];
} 
```

忽略优化（这将导致空内核），并假设我们启动 1 个 32 个线程块：

```
 kern<<<1, 32>>>(d_a, d_b, d_c); 
```

然后我们有 32 个线程（1 个 warp）在锁步中执行。这意味着每个线程将处理以下内核代码行：

```
 local_a = a[idx]; 
```

在同一时间。合并加载（来自全局内存）的定义是当一个扭曲加载一系列数据项时，这些数据项都在全局内存中的单个 128 字节对齐边界内（对于 CC 2.0 设备）。具有 100% 带宽利用率的完美合并负载意味着每个线程在该 128 字节对齐区域内使用一个唯一的 32 位数量。如果线程 0 加载 a[0]，线程 1 加载 a[1]，等等，这可能是合并加载的典型示例。

因此，在您的第一种情况下，由于 a[] 数组都是连续且对齐的，并且 a[0..31] 适合全局内存中的 128 字节对齐区域，因此我们得到了合并负载。线程 0 读取 a[0]，线程 1 读取 a[1] 等等。

在第二种情况下，a[0] 与 a[1] 不连续，而且元素 a[0..31]（它们都在同一代码行中加载）不适合 128 字节对齐的序列全局内存。我将让您解析在第三种情况下发生的情况，但只要说像第二种情况一样，元素 a[0..31] 既不连续也不包含在全局内存中的单个 128 字节对齐区域中. 虽然不需要有连续的数据项来实现某种程度的合并，但 100% 的带宽利用率（“完美”）来自 32 个线程扭曲的合并负载意味着每个线程都使用一个唯一的 32 位项，所有这些都是连续并包含在全局内存中的单个 128 字节对齐序列中。

一个方便的心智模型是对比结构阵列 (AoS)（对应于您的案例 2 和 3）和阵列结构 (SoA)，这基本上是您的第一个案例。SoA 通常比 AoS 提供更好的合并可能性。在[nvidia 网络研讨会页面上](http://developer.nvidia.com/gpu-computing-webinars) ，您可能会发现[此演示文稿](http://developer.download.nvidia.com/CUDA/training/cuda_webinars_GlobalMemory.pdf)很有趣，尤其是幻灯片 11-22 左右。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T21:05:50.900

最佳实践指南中的其他一些相关信息：

> 对于计算能力为 2.x 的设备，可以很容易地总结出要求：warp 线程的并发访问将合并成多个事务，这些事务等于为 warp 的所有线程提供服务所需的缓存行数. 默认情况下，所有访问都通过 L1 进行缓存，L1 为 128 字节行。对于分散的访问模式，为了减少过度读取，有时只在 L2 中缓存会很有用，它缓存较短的 32 字节段（请参阅 CUDA C 编程指南）。

编译器标志：`-Xptxas -dlcm=cg` 将禁用 L1 缓存。即仅使用 L2，用于合并不良的数据。

# iphone - 将 SoundTouch 添加到 Xcode/iPhone

> ID：13019546
> 
> 赞同：2
> 
> 时间：2012-10-22T20:43:11.817
> 
> 标签：iphone, objective-c, ios

我已经从他们的网站下载了[SoundTouch](http://www.surina.net/soundtouch/) 文件夹，现在我不知道如何处理它。我正在尝试将音高操纵功能集成到一个 iOS 应用程序中，该应用程序允许用户从他们的库中选择一首歌曲并更改音高。

我需要在 SoundTouch 文件夹中的 Xcode 项目中包含什么，我应该从那里去哪里？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-09-05T15:00:11.560

如果您仍然需要它在您的 iOS 项目中使用 SoundTouch，我已与为`armv7`、`armv7s`、`arm64`和编译的库共享一个 GitHub 存储库`i386``x86_64`

[https://github.com/enrimr/soundtouch-ios-library](https://github.com/enrimr/soundtouch-ios-library)

要在您的项目中实现该编译库，您必须在您的 Xcode 项目中添加 SoundTouch 目录（包括 libSoundTouch.a 和带有头文件的目录），然后包括

```
#include "SoundTouch.h" 
```

在您的控制器文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-11T21:33:30.443

我发现这个问题在谷歌上搜索“在 Xcode 中构建 soundtouch”

好像github上有一个项目已经成功完成了，[https://github.com/mwhagedorn/SoundTouch](https://github.com/mwhagedorn/SoundTouch)

我能够克隆存储库、构建项目并将 libSoundTouch.a 文件包含在我的项目中。

因此，您需要将 soundtouch.h 包含在要从中访问的目标 c 文件中。从那里创建一个 soundtouch 实例，即 SoundTouch audioEngine = SoundTouch.createInstance();，然后从那里开始。

# c++ - 如何在 Qt 中捕捉到子 Widget 的变化？

> ID：13019550
> 
> 赞同：0
> 
> 时间：2012-10-22T20:43:40.940
> 
> 标签：c++, qt, event-handling, qwidget

我有一些动态添加的 QWidgets，我想在它们更改时执行一些任务。
我想我不能使用 connect() 因为我还需要触发更改的 QWidget 的名称。
我如何才能看到哪个 QWidget 已更改，并且仍然使用通用处理程序捕获值更改事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:51:35.213

在事件传递给 QObject 子类实例之前使用它来捕获事件：http: [//qt-project.org/doc/qt-4.8/qobject.html#installEventFilter](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:43:20.080

快速而简单的方法是像往常一样使用 connect()，然后在你的 slot 方法中，调用 sender() 来找出哪个对象发送了信号。例如：

```
// slot method that you've connected all of your widgets' stateChanged(int) signals to
void MyClass :: someWidgetsStateChanged(int newState) 
{
   const QObject * s = sender();

        if (dynamic_cast<const QCheckBox *>(s) == _myFirstCheckbox) printf("First checkbox is now %s\n", newState?"Checked":"unchecked");
   else if (dynamic_cast<const QCheckBox *>(s) == _mySecondCheckbox) printf("Second checkbox is now %s\n", newState?"Checked":"unchecked");

   [... and so on...]
} 
```

请注意，这被认为是“脏”的原因是它破坏了封装。特别是，上面的 someWidgetsStateChanged() 方法现在的行为会有所不同，具体取决于生成信号的对象，因此，例如，如果将来某个时候您将 QPushButton::clicked() （或其他）连接到同一个插槽，您' d 可能必须更新 someWidgetsStateChanged() 实现以适当地处理它。尽管如此，这仍然有效，并且不需要付出很多努力来实施。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-27T19:48:14.320

经过一些额外的思考后，我想说为什么不扩展这些控制器呢？这样我就可以使用 parent() 或使用自定义构造函数将它们挂钩到父对象。

尽管我将它们定义为朋友类，但它可能需要...

# html - 是否可以将 html 表单字段值发送到 Flex 3 应用程序，即使它们已更改？

> ID：13019552
> 
> 赞同：0
> 
> 时间：2012-10-22T20:43:52.357
> 
> 标签：html, apache-flex, variables

我有一个项目，用户将访问 username.website.com。

页面加载后，将有一个 HTML 表单，以 HTML 表单显示我们对用户的所有信息。如果缺少有关用户的信息，他们将对其进行更新。

还有一个包含 flex 3 应用程序的侧面区域。在 flex 应用程序的底部，有一个提交按钮。

我需要这样做，以便当用户从 flex 应用程序中点击提交按钮时，html 字段的当前值被发送到 flex 应用程序，以便 html 数据以及 flex 应用程序中的数据可以是通过 URL 请求传输。

所以基本上，当用户点击 flex 应用程序中的提交按钮时，我希望将来自 html 字段的数据以及 flex 字段合并并发送。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T14:02:48.623

这是我最终的做法（对于该线程的任何未来观众）：

动作脚本代码：

导入正确的类：

```
import flash.external.ExternalInterface; 
```

创建函数调用JS函数

```
private function getFormValues():void
{
    firstName = ExternalInterface.call("getJSVar", "firstName");
    lastName = ExternalInterface.call("getJSVar", "lastName");
    address = ExternalInterface.call("getJSVar", "address");
    phone = ExternalInterface.call("getJSVar", "phone");
    email = ExternalInterface.call("getJSVar", "email");
} 
```

（我的变量 [firstName、lastname、address、phone 和 email] 被定义为可绑定字符串）

创建 javascript 函数以获取最新值并返回它们：

```
<script type="text/javascript">
    function getJSVar(varName)
    {
        var toReturn = "Nothing Sent";
        if (varName == "firstName")
            toReturn = document.forms["userInfo"].firstName.value;
        else if (varName == "lastName")
            toReturn = document.forms["userInfo"].lastName.value;
        else if (varName == "address")
            toReturn = document.forms["userInfo"].address.value;
        else if (varName == "phone")
            toReturn = document.forms["userInfo"].phone.value;
        else if (varName == "email")
            toReturn = document.forms["userInfo"].email.value;

        return toReturn;
    }
</script> 
```

这也是我的html表单：

```
<form action='#' method='post' name="userInfo">
    <table width='100%'>
        <tr>
            <td align='center'><input type='text' id="firstName" name="firstName" value='First Name' style='width:250px;' /></td>
            <td align='center'><input type='text' id="ymm" name='ymm' value='Year Make Model' style='width:250px;' /></td>
        </tr>
        <tr>
            <td align='center'><input type='text' id="lastName" name='lastName' value='Last Name' style='width:250px;' /></td>
            <td align='center'><input type='text' id="address" name='address' value='Address' style='width:250px;' /></td>
        </tr>
        <tr>
            <td align='center'><input type='text' id="phone" name='phone' value='Phone Number' style='width:250px;' /></td>
            <td align='center'><input type='text' id="email" name='email' value='Email Address' style='width:250px;' /></td>
        </tr>
    </table>
</form> 
```

# asp.net-mvc-3 - 如何让智能感知在我的剃刀视图中重新开始工作？

> ID：13019553
> 
> 赞同：3
> 
> 时间：2012-10-22T20:44:06.053
> 
> 标签：asp.net-mvc-3

因此，我安装了 Windows 8 的试用版并开始遇到 Visual Web Developer 2010 Express 的问题，因此我卸载了 Visual Web Developer 2010 Express。重新安装 Web Developer 后，我注意到视图中的代码不再允许智能感知发生。我需要下载一些额外的组件吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T19:05:10.413

您是否安装了另一个 Visual Studio 产品，例如另一个 Express SKU？如果您安装了多个预发布版本的 Visual Studio 产品并且它们的内部版本号不同，您所看到的行为偶尔会发生。

因为这些产品共享一些组件，所以您使用的某些程序集会有错误的版本，并且在某些情况下缺少代码着色或智能感知是您将看到的第一个问题迹象。

如果是这种情况，修复很简单；只需将您拥有的所有 Visual Studio 产品更新到出厂版本即可。

HTH，粘土

# html - 加载 GIF（预加载器）仅在 Chrome 上卡住 - 另一种观点

> ID：13019562
> 
> 赞同：0
> 
> 时间：2012-10-22T20:45:00.933
> 
> 标签：html, css, image, gif, preloader

**我希望访问者在进入网站后立即看到加载的 GIF，直到网站完全加载并准备就绪。**

HTML：

```
<img id = "firstLoadedImage" border="0" alt="title" src="Pictures/loading.gif" /> 
```

没有与此相关的 CSS。

我通过我的 javascript document.ready 调用加载了所有其他图像。这是在 HTML 或 CSS 中声明图像的唯一情况，因为我知道如果这样做，所有图像都会一起加载，但我只想先加载这个 gif。

但是问题仍然存在，仅在 CHROME 中，在我的 gif 图像实际加载并开始动画之前有一个非常明显的延迟。我对此进行了广泛的研究并找到了最佳匹配解决方案，但我尝试了他们的方法发现它与我的情况略有不同。- [加载 GIF（预加载器）仅在 Chrome 上卡住](https://stackoverflow.com/questions/11982733/loading-gif-preloader-gets-stuck-only-on-chrome)-

不同之处在于我在整个网页加载完成之前使用了 GIF。我已经尝试过使用 base64 的 dataURI。它对我不起作用，正如@amiregelz OP 在他的评论中所说的相同原因。所以唯一的其他解决方案是删除声明：

```
background-attachment: fixed; 
```

但唯一的问题是我什至从未在任何地方使用过该代码。所以我想问题是现在，接下来我应该尝试什么。

Guru 的任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-11T22:20:44.760

现在应该在较新版本的 chrome 中修复此问题。

# multithreading - XG 事务隔离在生成唯一序列号的测试期间失败 (Objectify4)

> ID：13019565
> 
> 赞同：0
> 
> 时间：2012-10-22T20:45:07.467
> 
> 标签：multithreading, google-app-engine, transactions, google-cloud-datastore, objectify

我必须在 XG 交易中生成一个唯一的发票编号，该交易在我的数据模型中包含以下**3 个实体组：**

*   (toplevel) ContactRoot <-- (ancestor) <--- **Contact** : 在交易过程中联系人必须更新为状态 Client

*   (toplevel) **CustomerSettings** : 保存下一个要使用的序列号；有一个且只有一个具有固定静态 ID 的 CustomerSettings 实例；交易过程中序号必须加1

*   (toplevel) InvoiceRoot <-- (ancestor) <--- **Invoice** : 根据 CustomerSettings 中的序列号分配新的唯一发票号；

这是 DAO 实现的重要部分（不相关的业务规则检查等已删除）：

```
public void saveInvoice(final Invoice invoice) throws BusinessRuleException {

    final Objectify ofy = ObjectifyService.factory().begin().cache(true);
    ofy.transact(new Work<Void>() {

        @Override
        public Void run() {
            CustomerSettings customerSettings = ofy.load()
                    .key(Key.create(CustomerSettings.class, CustomerSettings.ID)).safeGet();
            Contact contact = ofy.load().key(createContactKey(invoice.getContactId()).safeGet();
            contact.setContactType(ContactType.CLIENT);
            ofy.save().entity(contact).now();
            String invoiceNumber = generateSequence(ofy, customerSettings);
            invoice.setInvoiceNumber(invoiceNumber);
            ofy.save().entity(invoice).now();
            return null;
        }
    });
} 
```

以及生成下一个序列号的简化版本，其中下一个序列号为下一次调用而增加，并且必须以事务方式更新 CustomerSettings（我有这个同步但我想这不是真的有用）：

```
private synchronized String generateSequence(Objectify ofy, CustomerSettings settings) {
    String ret = "";
    int sequence = settings.getNextSequence();
    settings.setNextSequence(sequence + 1);
    ofy.save().entity(settings).now();
    ret = "" + sequence;
    return ret;
} 
```

**这是我的单元测试对于可变线程数**的样子：

```
private void test(final int threadCount) throws InterruptedException, ExecutionException {
    final Environment currentEnvironment = ApiProxy.getCurrentEnvironment();
    Callable<String> task = new Callable<String>() {
        @Override
        public String call() {
            ApiProxy.setEnvironmentForCurrentThread(currentEnvironment);
            return generateInvoiceNumber();
        }
    };
    List<Callable<String>> tasks = Collections.nCopies(threadCount, task);
    ExecutorService executorService = Executors.newFixedThreadPool(threadCount);
    List<Future<String>> futures = executorService.invokeAll(tasks);
    List<String> resultList = new ArrayList<String>(futures.size());
    // Check for exceptions
    for (Future<String> future : futures) {
        // Throws an exception if an exception was thrown by the task.
        resultList.add(future.get());
    }
    // Validate the IDs
    Assert.assertEquals(futures.size(), threadCount);
    List<String> expectedList = new ArrayList<String>(threadCount);
    for (long i = 1; i <= threadCount; i++) {
        expectedList.add("" + i);
    }
    Collections.sort(resultList);
    Assert.assertEquals(expectedList, resultList);
}

@SuppressWarnings("unchecked")
private String generateInvoiceNumber() {
    InvoiceDAO invoiceDAO = new InvoiceDAO();
    Invoice invoice = ... create a valid invoice
    invoiceDAO.saveInvoice(invoice);
    log.info("generated invoice number : " + invoice.getInvoiceNumber());
    return invoice.getInvoiceNumber();
} 
```

例如，当我同时运行 32 个线程时：

```
@Test
public void test32() throws InterruptedException, ExecutionException {
    test(32);
} 
```

**但是后续线程看不到先前的交易增加了发票编号序列。**

这是结果：

> junit.framework.AssertionFailedError: 预期:<[1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32]> 但为：<[1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 3, 3, 3, 3, 3]>

我已经浏览了几次文档，无法弄清楚为什么这不起作用？

> 如果您在一个事务中访问多个实体组，则该事务为 XG 事务。如果您只访问一个，则不是。5 个 EG 的标准限制适用于所有交易。 [客观化交易文件](http://code.google.com/p/objectify-appengine/wiki/Transactions)

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T18:38:07.040

这段代码使代码不是事务性的：

> final Objectify ofy = ObjectifyService.factory().begin().cache(true);
> 
> ```
> ofy.transact(new Work<Void>() {
> 
>        ....
>        ofy.save().entity(settings).now();   
>        .... 
> ```
> 
> }

因为我重用了非事务性的 objectify 实例。要在事务 Work 中获取实例，您必须始终像这样询问实例：

> ObjectifyService.ofy()

更多信息在[这里](https://groups.google.com/forum/?fromgroups=#!topic/objectify-appengine/7RWkC4DX6E0)的小组讨论中。

查看 的实现`ObjectifyService`，您可以看到新实例被推入/弹出堆栈/从堆栈中弹出；

除此之外，测试用例仍然没有运行.. 最好的测试方法大概是同时触发 http 请求；

# r - 什么样的文件适合在R中读取

> ID：13019567
> 
> 赞同：0
> 
> 时间：2012-10-22T20:45:15.747
> 
> 标签：r, excel

> **可能重复：**
> [直接从 R 脚本读取 Excel 文件](https://stackoverflow.com/questions/6099243/read-an-excel-file-directly-from-a-r-script)

我制作了一个 Excel 文件，我将其命名为`test.xlsx`. 我想在 R 中读取文件。

```
date    price  
1        34  
2        34.5  
3        34  
4        34  
5        35  
6        34.5  
7        36 
```

现在，当我使用

```
x = read.csv("test.xlsx") 
```

没用。我也用过

```
x = read.table("test.xlsx") 
```

我收到了警告

```
Warning message:
In read.table("test.xlsx") :
  incomplete final line found by readTableHeader on 'test.xlsx' 
```

结果：

```
 V1
1                         PK\003\004\024
2 PˆTز\005›DQ4ï½ùfىé|[™d\003\001µ³9\033g 
```

那么，我是否需要制作一个特殊文件才能在 R 中读取它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:46:52.337

尝试使用简单的 CSV 文件。您可以使用另存为选项将其保存在 Excel 中

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:03:52.733

您可能想查看用于处理 R 中的 Excel 文件的 XLConnect 包：[http ://cran.r-project.org/web/packages/XLConnect/index.html](http://cran.r-project.org/web/packages/XLConnect/index.html)

# javascript - 查找某些/特定的换行符，同时忽略其他换行符

> ID：13019572
> 
> 赞同：0
> 
> 时间：2012-10-22T20:45:38.030
> 
> 标签：javascript, regex

我有一些 SRT 数据以 \r 和 \n 标记作为每个句子中间的换行符返回。如何仅在文本/句子中间找到那些 \r 和 \n 标记，而不是表示其他换行符的其他标记。

示例来源：

```
18
00:00:50,040 --> 00:00:51,890
All the women gather
at the hair salon,

19
00:00:52,080 --> 00:00:56,210
all the mothers and daughters
and they dye their hair orange. 
```

期望的输出：

```
18
00:00:50,040 --> 00:00:51,890
All the women gather at the hair salon,

19
00:00:52,080 --> 00:00:56,210
all the mothers and daughters and they dye their hair orange. 
```

我对正则表达式绝对是垃圾，但我最好的猜测（无济于事）是这样的

> var reg = /[\d\r][a-zA-z0-9\s+]+[\r]/

然后对其进行 split() 以删除其中一个值中间的任何 \r 。我敢肯定这甚至不接近正确的方式，所以...stackoverflow！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:13:44.637

This regex should do the trick:

`/(\d+\r\d{2}:\d{2}:\d{2},\d{3} --> \d{2}:\d{2}:\d{2},\d{3}\r)([^\r]+)\r([^\r]+)(\r|$)/g`

To make this work with more lines (has to be a set number) then just add more `([^\r]+)\r`'s. (Remember to also add `$`'s to the match replace as so (with 3 lines): `'$1$2 $3 $4\r'`).

# Usage

```
mystring = mystring.replace(/(\d+\r\d{2}:\d{2}:\d{2},\d{3} --> \d{2}:\d{2}:\d{2},\d{3}\r)([^\r]+)\r([^\r]+)(\r|$)/g, '$1$2 $3\r'); 
```

* * *

# Limitations

*   If there is more than 2 lines of text this won't work.

* * *

# Example 1

*Works fine!*

**Input:**

```
18
00:00:50,040 --> 00:00:51,890
All the women gather
at the hair salon,

19
00:00:52,080 --> 00:00:56,210
all the mothers and daughters
and they dye their hair orange. 
```

**Output:**

```
18
00:00:50,040 --> 00:00:51,890
All the women gather at the hair salon,

19
00:00:52,080 --> 00:00:56,210
all the mothers and daughters and they dye their hair orange 
```

* * *

# Example 2

*Doesn't work; more than 2 lines*

**Input:**

```
18
00:00:50,040 --> 00:00:51,890
All the women gather
at the hair salon,
and they just talk

19
00:00:52,080 --> 00:00:56,210
all the mothers and daughters
and they dye their hair orange.
Except for Maria who dyes it pink. 
```

**Output:**

```
18
00:00:50,040 --> 00:00:51,890
All the women gather at the hair salon,
and they just talk

19
00:00:52,080 --> 00:00:56,210
all the mothers and daughters and they dye their hair orange.
Except for Maria who dyes it pink. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:57:05.397

这将匹配您想要摆脱的换行符，捕获它之前和之后的字符，将这两个放回空格周围：

```
var regex = /([a-z,.;:'"])(?:\r\n?|\n)([a-z])/gi;
str = str.replace(regex, '$1 $2'); 
```

关于正则表达式的一些事情。我使用了修饰符`i`并`g`使其不区分大小写并查找字符串中的所有换行符，而不是在第一个换行符之后停止。此外，它假定可移动换行符可以出现**在**字母、逗号、句点、分号、冒号或单引号或双引号之后以及另一个字母**之前。**正如@nnnnnn 在上面的评论中提到的那样，这不会涵盖所有可能的句子，但它至少不应该被大多数标点符号窒息。换行符必须是单个换行符，但它与平台无关（可以是`\r`,`\n`或`\r\b`）。我捕获了换行符之前的字符和换行符之后的字母（带括号），因此我可以在替换字符串中使用`$1`and访问它们`$2`。这基本上就是它的全部内容。

# actionscript-3 - addchild 在一个movieclip 在一个movieclip 在一个movieclip

> ID：13019581
> 
> 赞同：2
> 
> 时间：2012-10-22T20:46:29.107
> 
> 标签：actionscript-3, this, movieclip, addchild

我会将child添加到另一个movieclip中的movieclip中。

我尝试：

```
this.profil.bonome0.bonome.addChild(conteneurImage); 
```

它不起作用，但这确实：

```
this.profil.bonome0.addChild(conteneurImage); 
```

我怎样才能访问第三个movieclip（bonome）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T23:28:55.607

您的语法非常好，并且您的代码应该可以工作，假设如下：

1.  `profil`当前上下文中存在一个名为 MovieClip 。
2.  一个名为 MovieClip 的文件`bonome0`存在于`profil`.
3.  一个名为 MovieClip 的文件`bonome`存在于`bonome0`.

第 3 点是您似乎遇到问题的地方，因此请检查以确保您有一个嵌套在`bonome0`实例名称中的 MovieClip `bonome`。

要进行调试，您可以跟踪每个 MovieClip，直到您点击`undefined`，这意味着您*没有*嵌套了您尝试访问它的实例名称的 MovieClip。例如

```
trace(
    profil,
    profil.bonome0,
    profil.bonome0.bonome
); 
```

# php - 让图像从数据库中出现

> ID：13019590
> 
> 赞同：0
> 
> 时间：2012-10-22T20:46:56.660
> 
> 标签：php, mysql, prettyphoto

所以我的`images`数据库中有一个表，包含以下 4 列：

```
pgname | id | imageurl | username 
```

用户可以将图像保存到表中，将用户页面名添加为 pgname、自动递增的 id、图像的 url 作为 imageurl，以及个人用户名。

我使用[prettyphoto](http://www.no-margin-for-errors.com/projects/prettyphoto-jquery-lightbox-clone/) jquery 库返回图像。

我试图让与用户 pgname 关联的图像的 url 出现在我的 div 的超链接中，使用以下代码：

```
$imagesquery = mysql_query("SELECT * FROM `images` WHERE `pgname` = '$pgname'") or die(mysqli_error());
        while ($returnImages = mysql_fetch_assoc($imagesquery))  {
        $img = array($returnImages['imageurl']);
        }

        foreach ($img as $imageData) {
        echo'<div id="imageslide"><a href="'.$imageData.'" rel="prettyPhoto[pp_gal]"><img style="width: 100px; height: 100px;" src="'.$imageData.'" alt=""/></a></div>';
        } 
```

我得到的是表格中每个 imageurl 的空框。有什么办法可以让图片出现吗？因为我想做的是在一个漂亮的照片库中制作多张图片。

欢迎任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T20:56:07.097

正如 Marc 所说，您必须构建数据数组或将 echo 移动到 fetch 循环中，请尝试以下操作

```
$imagesquery = mysql_query("SELECT * FROM `images` WHERE `pgname` = '$pgname'") or die(mysqli_error());
while ($returnImages = mysql_fetch_assoc($imagesquery))  {
       echo'<div id="imageslide"><a href="'.$returnImages['imageurl'].'" rel="prettyPhoto[pp_gal]"><img style="width: 100px; height: 100px;" src="'.$returnImages['imageurl'].'" alt=""/>'.$returnImages['pgname'].'</a></div>';
} 
```

请不要使用 mysql_* 函数，因为它已被 php.net 弃用，您可以使用 mysqli_* 或 PDO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:57:21.160

我可能会尝试更多类似的东西：

```
$imagesQuery = mysql_query("SELECT * FROM `images` WHERE `pgname` = '$pgname'") or die(mysqli_error());

while ($row = mysql_fetch_assoc($imagesQuery))  {
    echo '<div id="imageslide"><a href="'.$row['imageurl'].'" rel="prettyPhoto[pp_gal]"><img style="width: 100px; height: 100px;" src="'.$row['imageurl'].'" alt=""/></a></div>';
} 
```

另外，我认为重要的是要考虑一下您命名事物的方式。为什么要`$imageData`为真正是 URL 的东西使用名称？为什么要给`$img`真正是数组的东西命名？如果您要使用 camelCase，请在任何地方使用 camelCase，即`imagesQuery`and `imageUrl`(or `imageURL`) 而不是`imagesquery`and `imageurl`。如果您尽可能清楚地命名事物，那么其他一切都会变得更容易和更快。

抱歉，如果这听起来像是批评。我不是要严厉；我的意思是我所说的友好提示。

# ruby-on-rails - Rails 通过控制器添加文件

> ID：13019592
> 
> 赞同：1
> 
> 时间：2012-10-22T20:47:04.880
> 
> 标签：ruby-on-rails, ruby-on-rails-3, file

在我的 Rails 项目的控制器中，我想创建一个`/public/my_files/welcome.txt`包含内容的新文件

```
Welcome to my website! 
```

（该文件夹`my_files`尚不存在。）

我怎样才能做到这一点？

（编辑：我知道要制作静态页面，我不需要通过控制器来完成。我实际上是在制作动态页面，但我只是在简化示例。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:55:38.997

我不太确定你在问什么，但如果你只想要一个静态页面，你可以在不使用控制器的情况下这样做

只需在公共目录中创建一个文件夹（右键单击 >> 新建 >> 文件夹）并在其中创建一个 html 文件。

然后启动 rails 服务器并将浏览器指向

本地主机：3000/my_files/welcome.html

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:02:06.103

> File.open(Rails.root + '/public/my_files/welcome.txt', 'w') {|f| f.write("你的动态数据") }

这是创建文件的最简单方法。如果文件不存在，Ruby 会自动创建。让我知道这是否符合您的要求。

# python - 从 python 中的 H mn s 格式时间中提取值

> ID：13019596
> 
> 赞同：0
> 
> 时间：2012-10-22T20:47:12.843
> 
> 标签：python, regex, time

我想用一些正则表达式从时间值中提取这种数据：

```
1h 34mn 2s     >>> [1,34,2]
1h 4mn         >>> [1,4]
34mn 2s        >>> [34,2]
34s            >>> [34] 
```

我试过了：

```
re.match(r'((.*)h)?((.*)mn)?((.*)s)?', '1h 34mn').groups()
('1h', '1', ' 34mn', ' 34', None, None) 
```

几乎完成了，但仍然不是我想要的。

编辑：

我需要在几秒钟内提取总值`1h 34mn 2s >>> 1*3600+34*60+2`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:14:45.967

好吧，如果您只想要秒，并且不太担心小时在分钟之前，分钟在秒之前，只要它们是合格的（即 '1s 9h 32m' 是有效的），您可以使用：

```
import re

mult = {'h': 60*60, 'mn': 60}
res = sum(int(num) * mult.get(val, 1) for num, val in re.findall('(\d+)(\w+)', '1h 34mn 2s'))
# 5642 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T20:58:31.783

如果数据与您的示例中一样，您可以简单地执行以下操作：

```
In [171]: import re

In [172]: s='1h 34mn 2s'

In [173]: re.findall('\d+',s)
Out[173]: ['1', '34', '2'] 
```

或者如果你想要`int`：

```
In [175]: [int(i)for i in re.findall('\d+',s)]
Out[175]: [1, 34, 2] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T20:59:11.267

试试这个：

```
[in] regex = re.compile(r'^(?:(\d+)h)?(?: *)(?:(\d+)mn)?(?: *)(?:(\d+)s)?$')
[in] for x in ("1h 34mn 2s", "1h 4mn", "34mn 2s", "34s"):
[in]     hours, minutes, seconds = regex.match(x).groups()
[in]     total = 0
[in]     if hours:
[in]         total += int(hours) * 3600
[in]     if minutes:
[in]         total += int(minutes) * 60
[in]     if seconds:
[in]         total += int(seconds)
[in]     print total

[out] 5642
[out] 3840
[out] 2042
[out] 34 
```

刚刚意识到您并不是在每个输入上都在寻找三倍。现在修好了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T21:30:17.073

吻

```
import re

a = ['1h 34mn 2s','1h 4mn','34mn 2s','34s']

def convert(s):
    if s:
        return int(s[0])
    else:
        return 0

def get_time(a):
    h = convert(re.findall('(\d*)h',a))
    m = convert(re.findall('(\d*)m',a))
    s = convert(re.findall('(\d*)s',a))
    return h,m,s

for i in a:
    print get_time(i) 
```

输出：

```
(1, 34, 2)
(1, 4, 0)
(0, 34, 2)
(0, 0, 34) 
```

编辑。我刚刚看到，你想在几秒钟内约会。您只需将**get_time**函数中的**返回**行编辑为：

 **```
return h*3600+m*60+s 
```

输出：

```
5642
3840
2042
34 
```**

# ruby-on-rails - 在 rails 中对嵌套的属性列进行排序

> ID：13019597
> 
> 赞同：1
> 
> 时间：2012-10-22T20:47:14.257
> 
> 标签：ruby-on-rails, sorting

我有一个包含 4 个模型、客户、项目、冲刺和任务的应用程序。我在数据库中显示所有任务的任务索引，我试图设置可排序的列，我实际上做到了，这是代码，我正在使用元搜索 gem。

```
<%- model_class = Task.new.class -%>
<h1><%=t '.title', :default => model_class.model_name.human.pluralize %></h1>
<table class="table">
 <thead>
   <tr>
     <th><%= sort_link @search, :id %></th>
     <th><%= sort_link @search, :client_id%></th>
     <th><%= sort_link @search, :name %></th>
     <th><%= sort_link @search, :description %></th>
     <th><%= sort_link @search, :status %></th>
     <th><%= sort_link @search, :created_at %></th>
   </tr>
  </thead>
 <tbody>
   <% @tasks.each do |task| %>
     <tr onclick="location.href='<%= sprint_task_path(task.sprint_id,task) %>'">
       <td><%= task.id %></td>
       <td><%= task.sprint.project.client.name %></td>
       <td><%= link_to task.name, sprint_task_path(task.sprint_id,task) %></td>
       <td><%= task.description %></td>
       <% if task.status == nil %>
       <td> Incompleta</td>
       <%else%>
       <td> Completa</td>
       <%end%>
       <td><%= task.created_at %></td>
     </tr>
   <% end %>
 </tbody> 
```

这是有效的，但是在第二列中，client_id 不是，我想通过客户端名称对其进行排序。先谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T22:06:22.773

根据[此处](https://github.com/ernie/meta_search/blob/master/README.rdoc#sorting-columns)的文档，您应该创建 2 个处理排序逻辑的新范围：

```
scope :sort_by_client_name_asc, joins(:client).order('clients.name ASC')
scope :sort_by_client_name_desc, joins(:client).order('clients.name DESC') 
```

然后你可以使用这个排序链接代码：

```
<th><%= sort_link @search, :client_name %></th> 
```

如果您已经在其他地方定义了连接并将它们包含在创建搜索的范围内，您可能会跳过自定义排序范围并使用如上所示的链接。

# java - Python HMAC-SHA1 与 Java HMAC-SHA1 不同的结果

> ID：13019598
> 
> 赞同：5
> 
> 时间：2012-10-22T20:47:17.483
> 
> 标签：java, python, sha1, hmac

[我从https://www.rfc-editor.org/rfc/rfc6238](https://www.rfc-editor.org/rfc/rfc6238)借用了 HMAC-SHA1 Java 代码，并稍微对其进行了硬编码，以使用一个已知的密钥/消息对和已知的输出。

然后我尝试在 Python 中编写相同的代码来验证结果，但是我在 Python 和 Java 中得到了不同的值。

众所周知，Java 值很好。

Java代码：

```
 import java.lang.reflect.UndeclaredThrowableException;
 import java.security.GeneralSecurityException;
 import java.text.DateFormat;
 import java.text.SimpleDateFormat;
 import java.util.Date;
 import javax.crypto.Mac;
 import javax.crypto.spec.SecretKeySpec;
 import java.math.BigInteger;
 import java.util.TimeZone;
 import java.util.Arrays;

 public class make_hmac {

     private make_hmac() {}

     private static byte[] hmac_sha(String crypto, byte[] keyBytes,
             byte[] text){
         try {
          System.out.println("Key is..." + bytesToHex(keyBytes) + "\n");
             Mac hmac;
             hmac = Mac.getInstance(crypto);
             SecretKeySpec macKey =
                 new SecretKeySpec(keyBytes, "RAW");
             hmac.init(macKey);
             return hmac.doFinal(text);
         } catch (GeneralSecurityException gse) {
             throw new UndeclaredThrowableException(gse);
         }
     }

     private static byte[] hexStr2Bytes(String hex){
         // Adding one byte to get the right conversion
         // Values starting with "0" can be converted
         byte[] bArray = new BigInteger("10" + hex,16).toByteArray();

         // Copy all the REAL bytes, not the "first"
         byte[] ret = new byte[bArray.length - 1];
         for (int i = 0; i < ret.length; i++)
             ret[i] = bArray[i+1];
         return ret;
     }

     private static final int[] DIGITS_POWER
     // 0 1  2   3    4     5      6       7        8
     = {1,10,100,1000,10000,100000,1000000,10000000,100000000 };

     public static String generateTOTP(String key,
             String time,
             String returnDigits,
             String crypto){
         int codeDigits = Integer.decode(returnDigits).intValue();
         String result = null;

         // Using the counter
         // First 8 bytes are for the movingFactor
         // Compliant with base RFC 4226 (HOTP)
         while (time.length() < 16 )
             time = "0" + time;

         // Get the HEX in a Byte[]
         byte[] msg = hexStr2Bytes(time);
         byte[] k = hexStr2Bytes(key);
         byte[] hash = hmac_sha(crypto, k, msg);
         System.out.println("I hashed key " + bytesToHex(k) + " against message " + bytesToHex(msg) + " and got...\n");
         System.out.println("HASHED: " + bytesToHex(hash) + "\n");

         // put selected bytes into result int
         int offset = hash[hash.length - 1] & 0xf;

         int binary =
             ((hash[offset] & 0x7f) << 24) |
             ((hash[offset + 1] & 0xff) << 16) |
             ((hash[offset + 2] & 0xff) << 8) |
             (hash[offset + 3] & 0xff);

         int otp = binary % DIGITS_POWER[codeDigits];

         result = Integer.toString(otp);
         while (result.length() < codeDigits) {
             result = "0" + result;
         }
         return result;
     }

  public static String bytesToHex(byte[] bytes) {
      final char[] hexArray = {'0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F'};
      char[] hexChars = new char[bytes.length * 2];
      int v;
      for ( int j = 0; j < bytes.length; j++ ) {
          v = bytes[j] & 0xFF;
          hexChars[j * 2] = hexArray[v >>> 4];
          hexChars[j * 2 + 1] = hexArray[v & 0x0F];
      }
      return new String(hexChars);
  }

     public static void main(String[] args) {
         // Seed for HMAC-SHA1 - 20 bytes
         String seed = "3132333435363738393031323334353637383930";
         long T0 = 0;
         long X = 30;
            long testTime = 1111111109L;

         String steps = "0";

         long T = (testTime - T0)/X;
         steps = Long.toHexString(T).toUpperCase();
         while (steps.length() < 16) steps = "0" + steps;
         System.out.println(generateTOTP(seed, steps, "8",
         "HmacSHA1"));
     }
 } 
```

Python代码：

```
import hmac
from hashlib import sha1
k = "3132333435363738393031323334353637383930"
msg = "00000000023523EC"
print "I hashed key", k, "against msg", msg, "and got...\n"
a = hmac.new(k, msg, sha1)
print a.digest().encode('hex') 
```

运行 Java 的结果：

```
Key is...3132333435363738393031323334353637383930

I hashed key 3132333435363738393031323334353637383930 against message 00000000023523EC and got...

HASHED: 278C02E53610F84C40BD9135ACD4101012410A14

07081804 
```

运行 Python 的结果：

```
I hashed key 3132333435363738393031323334353637383930 against msg 00000000023523EC and got...

fa9362e87c80a1ac61f705b5f9d5095adaec9525 
```

“密钥”和“消息”是相同的，但 Java 版本获得的 HMAC 与 Python 实现不同。

我怀疑 Python 代码中的某处存在细微错误（因为 Java 版本与 RFC 的预期结果匹配），但我不确定在哪里。它看起来如此简单。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-22T20:53:41.710

我认为问题在于，在 Java 中，您使用原始字节作为键（仅将它们转换为十六进制字符串以供输出）：

```
System.out.println("Key is..." + bytesToHex(keyBytes) + "\n");
// ...
SecretKeySpec macKey = new SecretKeySpec(keyBytes, "RAW"); 
```

但在 Python 中，您使用的是十六进制字符串：

```
k = "3132333435363738393031323334353637383930" 
```

看起来您可以使用以下[命令解码十六进制字符串](https://stackoverflow.com/questions/443967/how-to-create-python-bytes-object-from-long-hex-string)：

```
raw_key = k.decode('hex') 
```

# c# - bool doesExist = command.ExecuteScalar() != null 出于某种原因不断评估为 true

> ID：13019600
> 
> 赞同：2
> 
> 时间：2012-10-22T20:47:33.017
> 
> 标签：c#, asp.net, stored-procedures

> **可能重复：**
> [ExecuteScalar 返回 null 或 DBNull（开发或生产服务器）](https://stackoverflow.com/questions/7927211/executescalar-returns-null-or-dbnull-development-or-production-server)

我有一个存储过程，用于检查预先存在的文件 ID 是否与项目相关联。如果 select 语句返回值，它应该是 true 并将“true”分配给 bool。但是，当 select 语句因为不存在而返回 null 时，我后面的代码仍然使 .Execute 返回“true”

这是我的存储过程：

```
ALTER PROCEDURE [dbo].[Events_TaskIDExists] 
@EventID int
AS
BEGIN
    select TaskID from Events where EventID = @EventID
END 
```

这是我的代码：

```
public void hasTaskAssociatedToNote()
{
    String[] Notes = hidSelectedEventIDs.Value.Split(',');
    bool exists = false;
    foreach (var note in Notes)
    {
        var connection = new SqlConnection(ConfigurationManager.ConnectionStrings["OSCIDConnectionString"].ToString());
        var command = new SqlCommand("Events_TaskIDExists", connection);
        command.Parameters.Add(new SqlParameter("@EventID", SqlDbType.Int));
        command.Parameters["@EventID"].Value = Convert.ToInt32(note.Trim());
        command.CommandType = CommandType.StoredProcedure;
        try
        {
            connection.Open();
            exists = command.ExecuteScalar() != null;//causes true when it returns null......
            var temp = command.ExecuteScalar();//this was just to check something else
            if (exists)
            {
                exhibitWarning.Visible = true;
                Warning1.Text = "There is an existing Task associated 0.";
            }
        }
        catch (SqlException sql)
        {
            lblStatus.Text = "Couldn't connect to the Database - Error";
            lblStatus.ForeColor = System.Drawing.Color.Red;
        }
        catch (Exception ex)
        {
            lblStatus.Text = "An error occured";
            lblStatus.ForeColor = System.Drawing.Color.Red;
        }
        finally
        {
            if (connection.State == ConnectionState.Open)
                connection.Close();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:07:10.550

您的`exists`变量应设置为：

```
object result = command.ExecuteScalar();
exists = result != DBNull.Value && result != null; 
```

来自的 null 结果`SqlCommand.ExecuteScalar()`返回 a `DBNull.Value`，而不是`null`。只有一个空的结果集会返回一个`null`.

由于您是根据 EventID 选择 TaskID，我猜您的数据库并没有被限制为每个事件都需要一个 TaskID，因此您有空的 TaskID 字段。换句话说，您有包含 的事件记录`@EventID`，但没有关联的任务记录（基于`TaskID`）。此条件将返回 a`DBNull.Value`而不是 a `null`。

> "**返回值** *类型：System.Object*结果集中第一行的第一列，如果结果集为空，则为空引用（在 Visual Basic 中为 Nothing）。最多返回 2033 个字符。- [MSDN - SqlCommand.ExecuteScalar()](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:11:15.883

我可能会枪杀这个，只是

```
exists = (command.ExecuteScalar() ?? DBNull.Value) != DBNull.Value; 
```

这假设由于某种原因，您的存储过程实际上返回了第一列等于 DBNull 的行，并且在这种情况下您希望存在 == false。一个简短的调试应该证明或反驳这一点。

# ios - MQMapView setRegion：导致应用程序崩溃

> ID：13019604
> 
> 赞同：2
> 
> 时间：2012-10-22T20:47:44.917
> 
> 标签：ios, objective-c, dictionary, exception, mapquest

`AppDelegate`我试图将我的 mapView 集中在用户的位置上，但是在 mapView 或视图控制器加载之前引发了一个异常。

`mapView`是`MQMapView` 较早分配的 userLocation`mapView.userLocation.location.coordinate`

```
MQCoordinateSpan userSpan = MQCoordinateSpanMake(1000, 1000);

MQCoordinateRegion userRegion = MQCoordinateRegionMake(userLocation, userSpan);

[mapView setRegion:userRegion animated:true]; 
```

据我从 MapQuest 开发人员指南中可以看出，我正确地调用了 setRegion。知道什么可能导致异常吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T03:53:46.833

我的 iPhone4S 崩溃了，控制台显示了区域的 nan 值。在尝试了来自 SO 的大约 7 种不同的解决方案以及来自 Apple DTS 的各种建议后，我通过消除 regionThatFits 调用来解决它。我只是使用：

```
CLLocationDistance visibleDistance = 100000; // 100 kilometers
MKCoordinateRegion adjustedRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, visibleDistance, visibleDistance);

[_mapView setRegion:adjustedRegion animated:YES]; 
```

显然，该 regionThatFits 方法存在问题。

# regex - 视觉工作室宏或正则表达式删除 try-catch 块？

> ID：13019605
> 
> 赞同：2
> 
> 时间：2012-10-22T20:47:48.930
> 
> 标签：regex, visual-studio-2010

有谁知道用于删除 try-catch 块的 Visual Studio 宏？或者查找替换这些 try catch 块的正则表达式？

或者，如果您可以展示如何创建一个，那也很棒。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-22T20:57:44.450

它将删除 try-catch 块，然后呢？异常用于错误处理，因此仅删除它们就会从代码中删除错误处理。

我从未听说过这样的工具（尽管我曾经听说过将返回码变成异常的工具）。这不是微不足道的，因为错误处理不是微不足道的。将异常转换为返回码或其他东西肯定会更加困难（如果不是不可能的话）。

# crystal-reports - 在水晶报表中设置默认设置 og 纸张大小

> ID：13019606
> 
> 赞同：0
> 
> 时间：2012-10-22T20:47:54.207
> 
> 标签：crystal-reports, sql-server-2008-r2, crystal-reports-2008, crystal-reports-2010

如何将法律的纸张尺寸设置为默认值。即当用户打印报告时，默认使用legal 大小的纸张打印。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T09:59:06.820

您可以通过控制面板设置打印机属性（默认边距和纸张尺寸）。您一次只能设置 1 个纸张尺寸，例如 A4、Legal 等……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T06:49:00.643

您可以在水晶报表本身中指定报表的纸张类型。从文件菜单中选择页面设置，您可以在那里指定纸张大小。这将仅影响当前报告。还有一些方法可以在运行时设置纸张尺寸，请参考下面的链接

[为 Crystal Report 设置 PageSize](http://social.msdn.microsoft.com/Forums/en-US/vscrystalreports/thread/9e647fac-d5cd-42b7-a1e6-db6d6cf97c57/)

# python - exec 语句 python 和导入模块

> ID：13019609
> 
> 赞同：2
> 
> 时间：2012-10-22T20:48:09.077
> 
> 标签：python

我试图使用 exec 语句导入模块但它失败了，

代码.py

```
def test(jobname):
    print jobname
    exec ('import ' + jobname)

if __name__ = '__main__':
  test('c:/python27/test1.py') 
```

错误：语法错误：

导入：c:\python27 est1.py

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:57:32.240

你可能的意思是`execfile(jobname)`。并且导入不适用于文件名。它适用于包名称。任何好的教程都会涵盖这一点。另一个问题是 \t 被解释为制表符，但在这里情况并非如此，因为您使用的是正斜杠而不是 baclslash ...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T20:49:49.453

不知何故，我想你一定是在打电话

```
test('c:\python27\test1.py') 
```

代替

```
test('c:/python27/test1.py') 
```

前面的反斜杠`t`被解释为制表符。因此错误

```
import:c:\python27 est1.py 
```

注意丢失的`t`.

其次，该`import`命令需要一个模块名称，而不是路径。对于导入，请使用`__import__`not`exec`或`execfile`. `execfile`已从 Python3 中删除，因此为了将来的兼容性，您可能不想在 Python2 中使用它。`exec`可以改用，但是[使用有问题`exec`。](http://lucumr.pocoo.org/2011/2/1/exec-in-python/)

假设`c:\python27`在您的 PYTHONPATH 中，您可以执行以下操作：

```
def test(jobname):
    print jobname
    __import__(jobname)

if __name__ == '__main__':
    test('test1') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T23:04:01.443

> 我正在尝试使用 exec 语句导入模块

不要那样做。

首先，您真的需要以编程方式导入模块吗？如果你告诉我们你实际上想要完成什么，我愿意打赌我们可以为你的方形页面找到方孔，而不是教你如何将它强行放入一个圆孔中。

如果您确实需要这样做，请[使用`imp`模块](http://docs.python.org/library/imp.html)；这就是它的用途。

特别是如果您想通过路径而不是模块名称导入模块，这是不可能的`import`语句（并且`exec`不会帮助您）。

这是一个例子：

```
import imp

def test(jobname):
    print jobname
    while open(jobname, 'r') as f:
        job = imp.load_module('test', f, jobname, ('.py', 'U', 1)) 
```

当然，`import test1`如果它在您的`sys.path`. 该模块将在`sys.modules['test']`而不是`sys.modules['test1']`，并且在局部变量`job`而不是全局变量`test1`中，并且如果您已经加载它，它将重新加载而不是什么都不做。但是任何有充分理由做这种事情的人最好知道如何处理所有这些问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:59:52.617

```
def test(jobname):
    print jobname
    a = jobname.split('/')
    b = "/".join(a[0:-1])
    c = a[-1][0:-3]
    sys.path.append(b)
    exec ('import ' + c)

if __name__ = '__main__':
  test('c:/python27/test1.py') 
```

试试这个代码。您的路径必须添加到 sys.path() 变量中。

# ruby - ruby 正则表达式无法从 sql 中删除类名

> ID：13019610
> 
> 赞同：2
> 
> 时间：2012-10-22T20:48:23.180
> 
> 标签：ruby, regex

我有：

```
BEFORE Gsub sql :::: 

    SELECT record_type.* FROM record_type WHERE (name = 'Registrars')

    sql = sql.gsub(/SELECT\s+[^\(][A-Z]+\./mi,"SELECT ")

AFTER GSUB SQL :::: 

    SELECT record_type.* FROM record_type WHERE (name = 'Registrars') 
```

期望的结果是删除“record_type”。从声明中：

所以应该是：

```
 SELECT * FROM record_type WHERE (name = 'Registrars') 
```

运行正则表达式后。

这不是我写的，它在 asf-soap-adaptor gem 中。谁能告诉我为什么它不起作用，以及如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:53:38.333

我想应该是这样写的...

```
sql = sql.gsub(/SELECT\s+[^\(][A-Z_]+\./mi,"SELECT ") 
```

`_`...因为如果字段名称包含（下划线）符号，问题中的代码将不匹配。我想这就是为什么这段代码在 gem 中的原因：它*可以*在某些条件下工作（即，使用无下划线的字段名称）。

尽管如此，我承认我不明白为什么应该进行这种替换 - 并且它不应该包括`0-9`检查（例如，`'record_id1'`字段仍然不会匹配 - 并且替换 - 由常规中的字符类表达式；您可能必须扩展它，例如`[0-9A-Z_]`，或者完全替换为`\w`)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:50:45.033

所以你之前和之后的gsubs是一样的吗？如果您不告诉我您的预期结果，我无法告诉您为什么它不起作用。还可以查看 rubular.com，以获取解释 ruby​​ 正则表达式的帮助

# file - Internet Explorer 无法显示本地图像

> ID：13019611
> 
> 赞同：2
> 
> 时间：2012-10-22T20:48:32.360
> 
> 标签：file, internet-explorer, local

我在 C# 中创建了一个位图图像，并希望在本地机器上的网页上显示它（这样我就可以轻松地打印它）。问题是，Internet Explorer 9 不显示图像，而是显示“损坏的图像”图标。Firefox 的图像没有问题。我正在使用Win7，64位。

为了缩小问题范围，我尝试将图像文件（从文件资源管理器）拖放到一个空的浏览器窗口中。同样的事情：Firefox 显示它，IE9 没有。它变得更加奇怪：如果我将文件上传到某个地方（请参阅[http://www.diebreuerei.de/Barcode.bmp](http://www.diebreuerei.de/Barcode.bmp)），IE9 会显示它，只有当文件存储在本地时才会显示。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T15:21:49.543

Thanks for the answers, guys. @Shannon: Nope, the console showed no errors. @Michael: The Bitmap was directly created in C#, I dunno how to encode it in UTF-8.

But I got a solution: I just save my bitmap in PNG format and the IE9 is happy to display it. So I kinda lost interest in BMP :)

See ya, Hannes

# symfony - Symfony 2.1 表单单元测试绑定事件

> ID：13019612
> 
> 赞同：3
> 
> 时间：2012-10-22T20:48:38.690
> 
> 标签：symfony, phpunit, symfony-forms, symfony-2.1

我正在尝试测试自定义表单类型的绑定事件的方法。

这是代码

```
public function bind(DataEvent $event)
{
    $form = $event->getForm();

    if($form->getNormData() instanceof BaseFileInterface && !$event->getData() instanceof UploadedFile) {
        $event->setData($form->getNormData());
    }

    if($event->getData() instanceof UploadedFile) {
        $hander = $this->handlerManager->getHandler(
            $form->getParent()->getConfig()->getDataClass(), 
            $form->getName()
        );

        $datas = $hander->createBaseFile($event->getData());
        $event->setData($datas);
    }

    if(is_string($event->getData())) {
        $event->setData(null);
    }
} 
```

和类型的表单生成器：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder
        ->addEventSubscriber(new BaseFileListener($this->handlerManager))
        ->addViewTransformer(new BaseFileToStringTransformer())
    ;
} 
```

我的测试类继承自 Symfony\Component\Form\Tests\FormIntegrationTestCase 并且正在这样做：

```
protected function setUp()
{
    parent::setUp();

    $this->handlerManager = $this->getHandlerManagerMock();

    $this->dispatcher = $this->getMock('Symfony\Component\EventDispatcher\EventDispatcherInterface');
    $this->builder = new FormBuilder(null, null, $this->dispatcher, $this->factory);

    $this->form =  $this->factory->create('my_file');
    $this->form->setParent($this->getFormMock())->setData(new DummyEntity());
}

protected function getFormMock()
{

    $mock = $this
        ->getMockBuilder('Symfony\Component\Form\Tests\FormInterface')
        ->disableOriginalConstructor()
        ->getMock()
    ;

    return $mock;
}

public function testBindHandleNewFileWithNonEmptyField()
{
    $data = $file = new UploadedFile(
        __DIR__.'/../Fixtures/test.gif',
        'original.gif',
        'image/gif',
        filesize(__DIR__.'/../Fixtures/test.gif'),
        null
    );

    $event = new FormEvent($this->form, $data);

    $listener = new BaseFileListener($this->handlerManager);
    $listener->bind($event);

    $this->assertInstanceOf('My\FooBundle\Entity\BaseFileInterface', $event->getData());
    $this->assertNotEquals($event->getData(), $this->form->getNormData());
} 
```

问题是 $form->getParent()->getConfig()->getDataClass() 在 getDataClass() 上抛出异常。

问题是如何正确构建表单以执行绑定测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T17:24:17.650

好的，回答我自己:)

这是 phpunit 中很好的模拟：

```
protected function setUp()
{
    parent::setUp();

    $this->handlerManager = $this->getHandlerManagerMock();

    $this->dispatcher = $this->getMock('Symfony\Component\EventDispatcher\EventDispatcherInterface');
    $this->builder = new FormBuilder(null, null, $this->dispatcher, $this->factory);

    $this->form =  $this->factory->create('my_file');
    $this->form->setParent($this->getFormMock());
}

protected function getFormMock()
{
    $mock = $this->getMock('Symfony\Component\Form\Tests\FormInterface');

    $mock
        ->expects($this->any())
        ->method('getConfig')
        ->will($this->returnValue($this->getFormConfigMock()))
    ;

    return $mock;
}

protected function getFormConfigMock()
{
    $mock = $this->getMockBuilder('Symfony\Component\Form\FormConfigInterface')
        ->disableOriginalConstructor()
        ->getMock();

    $mock
        ->expects($this->any())
        ->method('getDataClass')
        ->will($this->returnValue('My\FooBundle\Tests\DummyEntity'))
    ;

    return $mock;
} 
```

我以为我可以在不使用 mock 的情况下重建整个表单，但这似乎是不可能的。

如果有人有更好的解决方案，我很感兴趣。

# python - 多程序大音频采集连续处理优化

> ID：13019617
> 
> 赞同：2
> 
> 时间：2012-10-22T20:48:58.170
> 
> 标签：python, corpus, large-data

我的任务是处理大量的音频文件。每个文件必须分四步处理：

1.  从 .wav 转换为原始 pcm，
2.  重采样，
3.  量化
4.  使用三个语音编解码器之一进行编码。

每个步骤对应一个程序，将文件作为输入并返回文件作为输出。逐个文件处理似乎需要很长时间。如何优化程序？例如并行编程之类的？我试图利用 ramdisk 来减少文件读取/写入所花费的时间，但它并没有改善。（为什么？）我在 Ubuntu Linux 下用 Python 编写。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:08:21.577

读写磁盘非常慢。如果每个程序结果都被写入磁盘，那么最好阻止这种情况发生。插座对我来说似乎很合适。在这里阅读更多：http: [//docs.python.org/library/ipc.html](http://docs.python.org/library/ipc.html)

并行程序很好......需要更多信息才能在这个话题上说更多。我记得前段时间读过关于 python 处理线程的效率不高的文章，所以这可能不是最好的选择。据我记得，它只是通过在任务之间切换来模拟并行处理，这真是太快了。所以这无济于事。自从我使用线程以来，这可能已经改变了……另一方面，额外的进程听起来是个好主意。

如果您需要一个不那么模糊的答案，请在您的问题中提供具体信息。

**编辑**

我不久前读到的关于线程的内容如下所示：[http ://docs.python.org/2/glossary.html#term-global-interpreter-lock](http://docs.python.org/2/glossary.html#term-global-interpreter-lock)

# c# - 使用 SUM() 将 SQL 语句转换为 Linq/Entity Framework

> ID：13019618
> 
> 赞同：1
> 
> 时间：2012-10-22T20:48:58.160
> 
> 标签：c#, sql, linq, entity-framework-4

我试图弄清楚如何使用 Linq 将以下 SQL 语句转换为实体框架：

```
SELECT SUM(Column1) AS Correct
     , SUM(Column2) AS Incorrect
     , UserName
FROM   Stats 
WHERE (StatType = 0)
GROUP BY UserName
ORDER BY UserName 
```

对于这个问题，数据库中的所有列类型都是 INT 类型，每个用户有多行数据。我基本上想要输出中的 3 列，每个用户的正确和错误选择总数。

这似乎是一个如此简单的 SQL 语句，但无论我在 LinqPad 之类的东西中尝试什么，我总是会出错。我一定错过了一些相对简单的东西。一旦我开始添加一个“.Sum”子句，我就会得到编译错误等。

```
Stats.Where(s => s.StatType == 0)
     .GroupBy(s => s.UserName)
     .Select(x => new {  Correct = x.Column1
                       , Incorrect = x.Column2
                       , User=x.UserName})
     .ToList() 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-22T20:53:51.243

以下应该可以解决问题：

```
Stats.Where(s => s.StatType == 0)
     .GroupBy(s => s.UserName)
     .Select(x => new { Correct = x.Sum(y => y.Column1),
                        Incorrect = x.Sum(y => y.Column2),
                        User = x.Key})
     .ToList(); 
```

请注意，`GroupBy`返回一个`IEnumerable<IGrouping<TKey, TValues>>`.
这意味着`x`内部`Select`是一个`IGrouping<TKey, TValues>`. 这反过来基本上只是一个`IEnumerable<T>`包含该组的所有行以及该组的键。
因此，要获取组中所有项目的总和，您需要`Sum`在分组上使用并指定要求和的列作为`Sum`方法的参数。

# excel - 如何使用 UTF-16 格式将 Excel 文件另存为 csv

> ID：13019620
> 
> 赞同：5
> 
> 时间：2012-10-22T20:48:59.027
> 
> 标签：excel, csv, utf-16, comma

我遇到 Excel 无法正确保存文件的问题。我有一个数据列表，分为三列：String String INt。

我想将此文件读入 Java 程序以执行一些计算。由于原生 UTF-8 编码，Excel 导出为 .csv 文件会导致我丢失大量数据。我可以将它保存为 UTF-16 .txt 文件，但是，我得到了另一个烦人的结果。如果我在每个字段字段之间插入逗号列，它会保存带有引号的逗号！我已经看到了一些解决这个问题的方法，但它们不保留 UTF-16 编码。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-01-07T08:42:32.123

1.  在 Excel 中将文件另存为 CSV（逗号分隔）
2.  在记事本++中打开保存的CSV文件
3.  编码 -> 转换为 UCS-2 大端

完毕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-12T10:48:29.833

如何*在 python 中*使用 UTF-16 格式将 Excel 文件保存为 csv ：

```
file = open("filename", 'a+', encoding='utf-16')
file.write(f"1,2,3,4,5,6,7")
file.close() 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-22T22:00:28.460

这是一次性的事情还是您将其作为更大计划的一部分？如果这是一次性的事情，您可以在任何文本编辑器中对“，”进行查找和替换。

# oracle - 使用 SQL-LOADER 从不同数据库加载两个表

> ID：13019622
> 
> 赞同：0
> 
> 时间：2012-10-22T20:49:03.333
> 
> 标签：oracle, blob, etl, sql-loader

在我的工作中，我们使用 Python 来制作 ETL。

所以一切都很好，直到我不得不插入`BLOB`值。

我们的逻辑是这样的。我们从数据库来源（也是 Oracle）中进行选择，并将这些数据保存到一个`.csv`文件中，然后我们读取这个文件并在 SQLLoader 的帮助下将表填充到另一个数据库中。

我不能对`BLOB`文件执行此操作，因为当我尝试制作

```
select <column1> || ',' || <column2> || ',' || <blob> 
from <table> 
```

此语句失败，因为我无法连接该`BLOB`值。所以我尝试每行插入一行，但它太慢了。

还有其他方法可以做到这一点吗？不知道能不能发

```
insert into <table>
select <columns>
from <table_origin> 
```

当我有两个不同的数据库时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:19:18.307

在 python 中连接，而不是在 SQL 中，那么你可以：

```
select <column1>, <column2>, <blob> from <table> 
```

# sql - 为什么我会从两个 SQL 查询中得到这些不同的结果？

> ID：13019624
> 
> 赞同：1
> 
> 时间：2012-10-22T20:49:23.177
> 
> 标签：sql, sql-server, sql-server-2008

这让我一整天都死了=D。请帮忙！

场景 1：同一台服务器上的两个数据库（A，B）和 A 有三个表。从 B 执行查询。

场景 2：两个 DB 的一个服务器链接到另一个。（B 有链接 A）和 A 有三个表。从 B 执行查询。

在场景 1（非链接服务器）中：

```
SET @val = ''
SELECT @val = @val + 'Hello, my name is ' + [name] + '!' + CHAR(10) + CHAR(13)
FROM A.sys.tables 
```

返回：您好，我叫Table1！你好，我的名字是Table2！大家好，我叫Table3！

在场景 2（链接服务器）中：

```
SET @val = ''
SELECT @val = @val + 'Hello, my name is ' + [name] + '!' + CHAR(10) + CHAR(13)
FROM LINKED.A.sys.tables 
```

返回：您好，我叫Table3！

为什么这些不同？如果我在链接服务器上使用 openquery()，结果与场景 1 相同。如果可能，我会尽量避免使用 openquery()。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T21:17:32.023

Unfortunately, this is an unreliable method of string concatenation in SQL Server. I would avoid it in all but the most trivial of cases. There is some more information in this KB: [Execution Plan and Results of Aggregate Concatenation Queries Depend Upon Expression Location](http://support.microsoft.com/kb/287515/en-us).

That said, I was able to both duplicate your problem and provide a workaround in my environment:

```
SET @val = ''
SELECT @val = @val + 'Hello, my name is ' + replace([name], '', '') + '!' + CHAR(10) + CHAR(13)
FROM LINKED.A.sys.tables 
```

Notice that I've added an empty replace function to the expression. Though it should do nothing to the output, it does add a *local* "compute scalar" step to the query plan. This seems to pull back all of the data from the name column to then be processed locally rather than just letting the remote query return what it thinks is needed.

I'm not sure if there's a better function to use other than a [`replace`](http://msdn.microsoft.com/en-us/library/ms186862.aspx) with empty arguments. Perhaps a double `reverse` or something. Just be sure to cast to a max datatype if necessary as the documentation states.

**UPDATE**

Simply declaring `@var` as `varchar(max)` rather than `nvarchar(max)` clears up the problem, as it then brings back the entire name column (type sysname -- or nvarchar(128) -- I believe) for local processing just like the replace function did. I cannot pretend to know which combination of [linked server settings](http://msdn.microsoft.com/en-us/library/ms178532.aspx) and implicit casting causes this to come up. Hopefully someone with more knowledge in this area can chime-in!

# c# - 如何使用 Npoco FetchOneToMany？

> ID：13019625
> 
> 赞同：3
> 
> 时间：2012-10-22T20:49:25.487
> 
> 标签：c#, .net, petapoco, npoco

我正在尝试使用[Npoco](https://github.com/schotime/NPoco)，但在使用 FetchOneToMany 时遇到了一些问题

我有一个将 2 个表连接在一起的 sql 语句，并输出所有列。

```
 [TableName("TableA")]
    [PrimaryKey("Id")]
    public class TableA
    {
        public int Id { get; set; }
        public DateTime EffectiveDate { get; set; }
         public IList<TableB> TableBs { get; set; }
    }

    [TableName("TableB")]
    [PrimaryKey("TableBId")]
    public class TableB
    {
        public int TableBId { get; set; }
        public int SomeNumber { get; set; }
          public int Id { get; set; } // TableA id
    }

Func<TableA, object> func1 = (x) => x.Id;
            Func<TableB, object> func2 = (x) => x.Id;
  var test = RelationExtensions.FetchOneToMany<AdminFeeBandGroup, AdminFeeBand>(unitOfWork.Db, func1,func2,sql, 1,1,"10-18-2012","10-22-2012"); 
```

我在我的真实查询中传递了 4 个参数。我得到了一个结果，并且`TableBs property`被填满并且看起来不错。然而，EffectiveDate 出于某种原因未填写，它是默认的 C# 时间。

我错过了什么？

**编辑**

这就是我的查询

```
SELECT     TableA.Id, TableA.EffectiveDate, TableB.TableBId, TableB.SomeNumber
FROM         TableA INNER JOIN
                      TableB ON TableA.Id = TableB.Id
WHERE     (TableA.EffectiveDate = @0)

Func<TableA, object> func1 = (x) => x.Id;
            Func<TableB, object> func2 = (x) => x.Id;
  var test = RelationExtensions.FetchOneToMany<AdminFeeBandGroup, AdminFeeBand>(unitOfWork.Db, func1,func2,sql, "10-18-2012"); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T00:23:01.233

这就是它应该如何工作的方式。

```
var sql = "select a.*, b.* from tablea a 
    inner join tableb b on a.id = b.id 
    where EffectiveDate = @0"

List<TableA> results = 
    db.FetchOneToMany<TableA,TableB>(x=>x.Id, sql, new DateTime(2012,10,18)) 
```

您必须确保以与列出通用参数相同的顺序选择列。

# python - 方程构建中的递归嵌套

> ID：13019626
> 
> 赞同：3
> 
> 时间：2012-10-22T20:49:28.293
> 
> 标签：python, recursion, nested

我想编写一个“应用程序”，它将绘制第 n 个试剂的浓度随时间的连锁反应函数：A->B->C->D->...

问题是，c_n(t) 包含 2^n - 1 个指数函数 - 根据我发现的模式嵌套：

```
c_1(t) = c_0_1 * exp(-k_1 * t)

c_2(t) = c_0_2 * exp(-k_2 * t) + c_0_1 * k_1 * {[exp(-k_1 * t) - exp(-k_2 * t)]/[k_2 - k_1]}

c_3(t) = c_0_3 * exp(-k_3 * t) + c_0_2 * k_2 * {[exp(-k_2 * t) - exp(-k_3 * t)]/[k_3 - k_2]} + c_0_1 * k_1 * k_2 * [1/(k_2-k_1)] * <{[exp(-k_1 * t) - exp(-k_3 * t)]/[k_3 - k_1]} - {[exp(-k_2 * t) - exp(-k_3 * t)]/[k_3 - k_2]}> 
```

如您所见，每个方程都是重复出现的元素的总和。嵌套的数量取决于关系的程度：0 次（A 到 A）- 简单指数函数，1 次（A 到 B，B 到 C 等）- 1 次嵌套，2 次（A 到 C） , B 到 D 等） - 2 个嵌套等。

每个方程可以分为重复出现的部分：

*   “独立”单位：c_0_n * exp(-k_n * t)，

*   基本单位：f(a,b) = (exp(- k_n[b - 1] * t) - exp(- k_n[a - 1] * t)) / (k_n[a - 1] - k_n[b - 1]),

*   基于基本单元的嵌套单元，

*   每个嵌套单元之前常数（参数）的乘积。

第 n 个方程的每个嵌套单元都源自第 (n-1) 个方程的嵌套单元。方程本身可以通过迭代积分得到。第 n 个试剂的可能方程的数量（基于独立动力学常数 k 的数量）由贝尔数 B(n) 给出。

每个这样的方程都可以从具有第 n 个试剂的 n 个独立动力学常数的方程中获得（都相互独立）。人们只需要找到这样的方程的石灰。例如，如果 k_3 = k_4 和 k_7 = k_2，那么我们正在寻找 lim k_4->k_3 [lim k_7->k_2 (f(t))]。

工作代码：

```
print
print ("Commands: komendy() - list of commands, test() - sets initial parameters, zakres() - asks for the number of reagents, tabela() - displays the table, stez() - asks for the initial concentrations, kin() - asks for the kinetic constants.")
print

n = 0

import matplotlib.pyplot as plt

import numpy as np

def komendy(): # displays the list of commands
    print
    print ("Commands: komendy() - list of commands, test() - sets initial parameters, zakres() - asks for the number of reagents, tabela() - displays the table, stez() - asks for the initial concentrations, kin() - asks for the kinetic constants.")
    print
    return

def zakres(): # number of reagents query
    global n, zakres_n, c_0_n, k_n
    n = int(raw_input("Define the number of n reagents: "))
    zakres_n = range(1, n + 1)
    c_0_n = [int(0)] * n
    k_n = [int(0)] * n
    return

def stez(): # initial concentrations query
    while True:
        y = int(raw_input("Define the value of c_0_n for n equal to (press 0 to break): "))
        if y == 0:
            break
        x = raw_input("Define the value of c_0_" + str(y) + ": ")
        if "." in x:
            c_0_n[y - 1] = float(x)
        else:
            c_0_n[y - 1] = int(x)
    return

def kin(): # kinetic constants query
    while True:
        q = int(raw_input("Define the value of k_n for n equal to (press 0 to break): "))
        if q == 0:
            break
        p = raw_input("Define the value of k_" + str(q) + ": ")
        if "." in p:
            k_n[q - 1] = float(p)
        else:
            k_n[q - 1] = int(p)
    return

def tabela(): # displays the table with the initial data
    if n == 0:
        zakres()
        print
        print "n:     ", zakres_n
        print "c_0_n: ", c_0_n
        print "k_n:   ", k_n
        print
    else:
        print
        print "n:     ", zakres_n
        print "c_0_n: ", c_0_n
        print "k_n:   ", k_n
        print
    return

def wykres(): # plots the basic unit
    global f_t, t_k, t, t_d
    a = int(raw_input("a = "))
    b = int(raw_input("b = "))
    reag = map(int, raw_input("Provide the reagents to plot (separate with spacebar): ").split(" "))
    t_k = float(raw_input("Define time range from 0 to: "))
    t_d = float(raw_input("Set the precision of the time axis: "))
    t = np.arange(0,t_k,t_d)
    p = []
    def f_t(t):
        return (np.exp(- k_n[b - 1] * t) - np.exp(- k_n[a - 1] * t)) / (k_n[a - 1] - k_n[b - 1])
    f_t = f_t(t)
    for i in reag:
        p += plt.plot(t,i*f_t) 
```

并且 [还] 不起作用的代码（唯一的区别是我正在尝试构建的新 wykres() 函数）：

```
print
print ("Commands: komendy() - list of commands, test() - sets initial parameters, zakres() - asks for the number of reagents, tabela() - displays the table, stez() - asks for the initial concentrations, kin() - asks for the kinetic constants.")
print

n = 0

import matplotlib.pyplot as plt

import numpy as np

def komendy(): # displays the list of commands
    print
    print ("Commands: komendy() - list of commands, test() - sets initial parameters, zakres() - asks for the number of reagents, tabela() - displays the table, stez() - asks for the initial concentrations, kin() - asks for the kinetic constants.")
    print
    return

def zakres(): # number of reagents query
    global n, zakres_n, c_0_n, k_n
    n = int(raw_input("Define the number of n reagents: "))
    zakres_n = range(1, n + 1)
    c_0_n = [int(0)] * n
    k_n = [int(0)] * n
    return

def stez(): # initial concentrations query
    while True:
        y = int(raw_input("Define the value of c_0_n for n equal to (press 0 to break): "))
        if y == 0:
            break
        x = raw_input("Define the value of c_0_" + str(y) + ": ")
        if "." in x:
            c_0_n[y - 1] = float(x)
        else:
            c_0_n[y - 1] = int(x)
    return

def kin(): # kinetic constants query
    while True:
        q = int(raw_input("Define the value of k_n for n equal to (press 0 to break): "))
        if q == 0:
            break
        p = raw_input("Define the value of k_" + str(q) + ": ")
        if "." in p:
            k_n[q - 1] = float(p)
        else:
            k_n[q - 1] = int(p)
    return

def tabela(): # displays the table with the initial data
    if n == 0:
        zakres()
        print
        print "n:     ", zakres_n
        print "c_0_n: ", c_0_n
        print "k_n:   ", k_n
        print
    else:
        print
        print "n:     ", zakres_n
        print "c_0_n: ", c_0_n
        print "k_n:   ", k_n
        print
    return

def wykres(): # plots the requested functions
    global t_k, t, t_d, f, constans
    reag = map(int, raw_input("Provide the reagents to plot (separate with spacebar): ").split(" "))
    t_k = float(raw_input("Define the time range from 0 to: "))
    t_d = float(raw_input("Define the precision of the time axis: "))
    t = np.arange(0,t_k,t_d)
    p = []

    def f(a,b): # basic unit
        return  (np.exp(- k_n[b - 1] * t) - np.exp(- k_n[a - 1] * t)) / (k_n[a - 1] - k_n[b - 1])

    def const(l,r): # products appearing before the nested parts
        const = 1
        constans = 1
        for h in range(l,r):
            const = const * k_n[h]
        constans = c_0_n[l] * const
        return

    def czlonF(g): # nested part
        czlonF = 0
        for u in range(g):
            czlonF = czlonF + npoch(f(a,b),g)

        if g == 1:
            czlonF(g) = 0
        return

    def npoch(f(a,b),n):
        f = f(a,b)
        for x in range(b+1, n+1):
            f = npoch(f(a,b),x)
        return

    def c(j): # final result, concentration in time function
        return

    def czlon0(m): # 'independent' part
        return (c_0_n[m - 1] * np.exp(- k_n[m - 1] * t))

    for i in reag: # the actual plot command
        p += plt.plot(t,c(i))
    plt.show()
    return

def test():
    global n, zakres_n, k_n, c_0_n
    n = 5
    zakres_n = range(1, n + 1)
    k_n = [1,2,3,4,5]
    c_0_n = [2,3,4,5,6]
    return
    plt.show()
    return

def test():
    global n, zakres_n, k_n, c_0_n
    n = 5
    zakres_n = range(1, n + 1)
    k_n = [1,2,3,4,5]
    c_0_n = [2,3,4,5,6]
    return 
```

如何修复 wykres() 函数以绘制 c(n)？我如何构建它以便可以绘制它？我希望 Python 自动为我想要的任何 n 构建 c_n(t) 并绘制所有这些。

# python - 如何正确解码 Django HTML 模板中的引用可打印编码

> ID：13019629
> 
> 赞同：2
> 
> 时间：2012-10-22T20:49:39.763
> 
> 标签：python, google-app-engine, quoted-printable

我有一个 Python 形式的 Google 应用引擎，将 POSTS 文本提交到服务器，然后文本使用 Quoted Printables 编码进行编码。我的 POST 代码是这样的：

```
<form action={{ upload_url }} method="post" enctype="multipart/form-data">
<div class="sigle-form"><textarea name="body" rows="5"></textarea></div>
<div class="sigle-form"><input name="file" type="file" /></div>
</form> 
```

然后获取的结果 `self.request.get('body')`将使用编码 Quoted Printables 进行编码。我将它存储在文本 DB.textProperty() 中，然后使用 Django 将文本发送到 HTML 模板。当我使用 写出变量`{{ body }}`时，结果是使用 Quoted 可打印编码编写的，并且似乎没有办法在 Django HTML 模板中对此进行解码。是否有任何方法可以对以另一种方式发送的正文中的文本进行编码，而不是使用 Quoted Printables？如果没有，如何在 Django HTML 模板中解码这种编码？

提交文本“ÅØÆ”的结果被编码为“xdjG”，因此引用的 Prinables 的总和也以某种方式加在一起。当编码文本中存在多个特殊字符时，就会发生这种情况。一个普通的“ø”被编码为=F8。

编辑：我只在生产中遇到这个问题，[这个线程](https://groups.google.com/forum/?fromgroups=#!topic/google-appengine-java/-NWqbsdsSKc)似乎在谈论同样的问题。

如果 Stack Overflow 上的其他人正在使用 blob 和 åæøè 字符进行表单提交，请回复此线程以说明您是如何解决的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T07:46:06.293

好的，在处理这个问题两天后，我终于解决了。它似乎是 Google App Engine 的一个错误，它使编码在生产中得到了改进。在生产中，文本有时使用 Quoted Printable 编码，有时使用 base64 编码。诡异的。这是我的解决方案：

```
postBody = self.request.get('body')    
postBody = postBody.encode('iso-8859-1')
DEBUG = os.environ['SERVER_SOFTWARE'].startswith('Dev')
if DEBUG:
    r.body = postBody
else:
    postBody += "=" * ((4 - len(postBody) % 4) % 4)
    b64 = base64.urlsafe_b64decode(postBody) 
```

虽然生成的 b64 不能存储在数据存储中，因为它不是 ascii 编码的

```
'ascii' codec can't decode byte 0xe5 in position 5: ordinal not in range(128) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-26T08:57:54.717

我通过使用 Python quopri 模块在将字符串传递给 HTML 模板之前对字符串进行解码，从而解决了类似的问题。

```
import quopri
body = quopri.decodestring(body) 
```

这似乎与 multipart/form-data 编码类型有关。可引用的可打印编码应用于 textarea 输入，然后在我的情况下，通过 blobstore 上传链接提交。Blobstore 仍以编码形式将文本返回给我的上传处理程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T22:45:33.270

不确定引用的印刷品是什么，但你试过安全吗？

```
{{ body|safe }} 
```

[https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#safe](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#safe)

# javascript - 如何测试是否为函数提供了参数？

> ID：13019640
> 
> 赞同：76
> 
> 时间：2012-10-22T20:50:17.377
> 
> 标签：javascript, function

我想知道，你能创建一个带有可选参数的函数吗？

例子：

```
function parameterTest(test)
{
   if exists(test)
   {
     alert('the parameter exists...');
   }
   else
   {
     alert('The parameter doesn\'t exist...');
   }
} 
```

因此，如果您调用`parameterTest()`，结果将是一条消息“参数不存在...”。如果你打电话`parameterTest(true)`，那么它会返回“参数存在......”。

这可能吗？

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-10-22T20:53:09.463

这是一个非常常见的模式。

您可以使用

```
function parameterTest(bool) {
  if (bool !== undefined) { 
```

然后，您可以使用其中一种形式调用您的函数：

```
 parameterTest();
 parameterTest(someValue); 
```

注意不要犯测试的频繁错误

```
if (!bool) { 
```

因为您无法将未提供的值与`false`,`0`或区分开来`""`。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-22T20:53:21.010

```
function parameterTest(bool)
{
   if(typeof bool !== 'undefined')
   {
     alert('the parameter exists...');
   }
   else
   {
     alert('The parameter doesn\'t exist...');
   }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-22T20:51:46.000

在 JavaScript 中，如果您忽略提供参数，它将默认为`undefined`.

您可以在浏览器控制台或使用[JSFiddle](http://jsfiddle.net/)中轻松地自己尝试一下。

正如您所说，您可以检查参数是否存在，然后编写一个可以使用参数的函数。但是，[JavaScript Garden](http://bonsaiden.github.com/JavaScript-Garden/)（一个很好的资源）建议在大多数其他情况下远离`typeof`，因为它的输出几乎没有用（查看[typeof 的结果](http://bonsaiden.github.com/JavaScript-Garden/#types.typeof)表）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-10-22T20:55:24.127

```
function parameterTest(p) {
    if ( p === undefined)
        alert('The parameter doesn\'t exist...');
    else
        alert('the parameter exists...');
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-01-16T13:43:56.457

最好的检查方法：如果**参数**不是**未定义的**

```
function parameterTest(param) {
    if (param !== undefined)
    ... 
```

**参数**也可以是变量或函数名

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-07-12T08:16:17.193

如果不存在，则初始化默认值：

```
function loadDialog(fn, f, local, anim) {
  switch (arguments.length) {  
    case 1: f=null;
    case 2: local=false;
    case 3: anim=false;
  }
  ...
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-06-04T09:14:47.950

这些答案都不是为我做的。我需要*知道*是否有人使用过该参数。如果有人调用传递的函数，`undefined`我想将其视为他们使用该值作为参数。无论如何，使用一些现代 JS 的解决方案非常简单：

```
function parameterTest(...test) {
  if (test.length) {
    return `exists`;
  } else {
    return `not exists`;
  }
}

parameterTest(123);         // exists
parameterTest(undefined);   // exists
parameterTest();            // not exists
parameterTest(window.blah); // exists 
```

对于较旧的浏览器，您可以使用参数：

```
function parameterTest() {
  if (arguments.length) {
    return "exists";
  } else {
    return "not exists";
  }
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-08-15T20:31:58.163

`null == undefined`是真的

```
if (arg == null){
    // arg was not passed.
} 
```

代码示例：

```
var button = document.querySelector("button");

function myFunction(arg){
  if(arg == null){
    alert("argument was not passed.");
  } else {
    alert("argument " + arg + " was passed.");
  }
}
```

```
<button onclick="myFunction('foo');">click to fire function w arg</button>
<br><br>
<button onclick="myFunction();">click to fire function w/o arg</button>
```

* * *

## 回答 #9

> 赞同：-2
> 
> 时间：2016-04-12T00:43:47.407

我知道这是旧的，但这是我检查的首选方法，并为函数分配默认值：

```
function testParamFunction(param1, param2) {
    param1 = typeof param1 === 'undefined' ? null : param1;
    param2 = typeof param2 === 'undefined' ? 'default' : param2;

    // exit if the required parameter is not passed
    if (param1 === null) {
        console.error('Required parameter was not passed');
        return;
    }

    // param2 is not mandatory and is assigned a default value so 
    // things continue as long as param1 has a value
} 
```

# spring-mvc - 如何自动装配一些 bean 以使用 Spring MVC 3 自动注入？

> ID：13019649
> 
> 赞同：0
> 
> 时间：2012-10-22T20:50:54.130
> 
> 标签：spring-mvc, dependency-injection, autowired

好的，所以我们正在学习 Spring MVC 3。而且我们对 IoC、DI 等有点陌生。我们想清理很多旧的遗留错误。:-)

我们真的很喜欢`@Autowired`我们的用户服务等。

然而，我们现在有一个问题，我们想用自动装配来解决。

假设我们有一个`Login`bean：

```
public class Login {
    private String username;
    private String email;

    // getters/setters....
} 
```

这个 bean 应该在会话范围内使用。我们希望每个控制器都能够访问这个单一对象。

我假设我们在 application-config.xml 中需要它

```
<bean id="login" class="com.example.models.Login" scope="session" /> 
```

另外，假设我们有另一个类：

```
public class Employee {
    private String firstName;
    private String lastName;

    private Login login;

    public Employee(Login paLogin) {
        this.login = paLogin;
    }
} 
```

并把它放在会话中：

```
<bean id="employee" class="com.example.models.Employee" scope="session" /> 
```

好的，稍后在我们的应用程序中，我们有一个电子邮件通知服务。该服务需要从 Login bean 访问`username`和 以及`email`来自 Employee bean 的信息。当然，我可以从会话内存访问登录 bean，但这只是一个示例。

```
@Controller
public class EmailController {

    @Autowired
    Login login;    // this should come from session memory automatically right??

    @Autowired
    Employee employee;    // OK, this should also come from session memory.  Which contains a reference of the login too.  Correct?

    // getters/setters....

    public void sendEmails() {
        // ....
        String email = login.getEmail();
        String firstName = employee.getFirstName();
        // ....
    }
} 
```

我希望这是有道理的。我们**真正**想要完成的是减少 XML 配置、减少常量参数传递、最少注释等。

任何可以为我指明正确方向的帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T16:17:22.643

关于您已安装的控制器的几件事。

```
@Controller
public class EmailController {

@Autowired
Login login;    // The container has to create a bean of type Login to autowire into EmailController

@Autowired
Employee employee;    //same as above

// getters/setters....
} 
```

如果容器必须在应用程序启动时创建单例 bean，则必须使用注解[@Component](http://static.springsource.org/spring/docs/2.5.x/api/org/springframework/stereotype/Component.html)标记 Login 和 Employee 类。甚至像@Repository、@Service 这样的注解也能做到这一点。您可以查看此[答案](https://stackoverflow.com/questions/6827752/whats-the-difference-between-component-repository-service-annotations-in)以了解这些注释之间的区别。

因此，一旦您使用这些注释中的任何一个标记您的类，就会在应用程序启动时创建相应类型的单例 bean。您将在日志中看到类似的内容

```
Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@6c811e18 
```

然后是它创建的 bean 列表。您可以将这些 bean 注入其他 bean。并且这些 bean 不存储在会话中。但它们是由容器本身管理的。

如果您使用@Controller、@Component 等注释，则可以取消 xml bean 定义。您也可以使用 @Configuration 避免大多数 xml 配置文件。您可以[在此处](http://nurkiewicz.blogspot.in/2011/01/spring-framework-without-xml-at-all.html)和[此处](http://blog.springsource.org/2009/12/22/configuration-simplifications-in-spring-3-0/)查看示例。

# asp.net - 如何在代码隐藏中更改 HTML 标签的 onclick 属性

> ID：13019650
> 
> 赞同：1
> 
> 时间：2012-10-22T20:50:57.000
> 
> 标签：asp.net, vb.net, onclick, htmlcontrols

好的，我有这个：

```
<div class="radio-toolbar">  
    <input type="checkbox" id="check1" name="checks" value="1">
    <label for="check1">1</label>

    <input type="checkbox" id="check2" name="checks" value="2">
    <label for="check2">2</label>

    <input type="checkbox" id="check3" name="checks" value="3">
    <label for="check3">3</label>
</div> 
```

我正在寻找一种方法来使用**ASP.NET VB Codebehind设置这些标签的***“onclick”*属性，使标签看起来像：

 **```
<div class="radio-toolbar">  
    <input type="checkbox" id="check1" name="checks" value="1">
    <label for="check1" onclick="some javascript">1</label>

    <input type="checkbox" id="check2" name="checks" value="2">
    <label for="check2" onclick="some javascript">2</label>

    <input type="checkbox" id="check3" name="checks" value="3">
    <label for="check3" onclick="some javascript">3</label>
</div> 
```

那么，这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:56:01.110

使用`asp:Label`.

```
<asp:Label ID="lblChk1" runat="server" AssociatedControlID="check1" Text="1">
</asp:Label> 
```

然后在你的代码后面：

```
lblChk1.Attributes.Add("onclick","some javascript"); 
```

编辑：您可以简单地使用`asp:CheckBox`和使用它的`Text`属性。单击文本将触发您的`CheckBox`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:56:35.137

设置`ID`属性并添加`runat=server`标签。然后您可以从您的代码隐藏中访问标签：

```
<div class="radio-toolbar">  
    <input type="checkbox" id="check1" name="checks" value="1">
    <label ID="label1" runat="server" for="check1">1</label>

    <input type="checkbox" id="check2" name="checks" value="2">
    <label ID="label2" runat="server" for="check2">2</label>

    <input type="checkbox" id="check3" name="checks" value="3">
    <label ID="label2" runat="server" for="check3">3</label>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:58:20.337

`Label`我将使用带有属性的 ASP.NET 控件而不是 html 标签，该[`AssociatedControlID`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.label.associatedcontrolid.aspx)属性呈现为`label for`.

```
<asp:Label ID="Label1" 
   AssociatedControlID="check1" 
   onclick="somejavascript" 
   runat="server" 
   Text="1"></asp:Label> 
```

您还可以从代码隐藏中添加 javascript：

```
Label1.Attributes.Add("onclick","somejavascript"); 
```

来自 MSDN：

> ... **设置 AssociatedControlID 属性后，Label 控件呈现为 HTML 标签元素，其中 for 属性设置为关联控件的 ID 属性。**您可以使用标签属性设置标签元素的其他属性。例如，您可以使用 Text 和 AccessKey 属性为关联控件提供标题和热键。

`**

# ms-access - 自动生成电子邮件无法解析多个收件人

> ID：13019651
> 
> 赞同：1
> 
> 时间：2012-10-22T20:51:15.510
> 
> 标签：ms-access, outlook, vba, outlook-2007

我有一个创建和保存草稿电子邮件的 VBA 脚本。要添加收件人，它会从链接的 Excel 表中提取一个字符串并将其添加到 Recipients 对象。

对于具有单个收件人的电子邮件，这就像一个魅力。用户需要做的就是打开草稿，花 5 秒钟查看它，然后点击发送。

多个联系人同时出现此问题（例如“a@aol.com; b@aol.com; c@aol.com”）。当用户点击发送时，Outlook 将弹出一个没有任何建议的检查名称对话框。用户可以通过单击 To 字段并输入虚拟分号来触发自动解析来解决此问题。我想避免这种情况，因为这个过程一次会创建超过一百封电子邮件，需要单独审查。

在网上环顾四周，我找到并尝试了返回 false 的 Recipients.ResolveAll。我怀疑原因是 Outlook 试图一次解析整个收件人字符串，而不是单独解析。所以我的问题是：如何让 Outlook 停止显示此检查名称对话框？我是否需要遍历我的电子邮件字符串并解析出各个电子邮件？

```
Sub CreateEmail(id as Integer)
    Dim OlApp As Outlook.Application
    Dim ObjMail As Outlook.MailItem
    Dim Recipients As Outlook.Recipients
    Dim CurrentRecipient As Outlook.Recipient

    Set OlApp = CreateObject("Outlook.Application")
    Set ObjMail = OlApp.CreateItem(olMailItem)
    Set Recipients = ObjMail.Recipients

    Dim StrEmailTo As String
    StrEmailTo = CurrentDb.OpenRecordset( _
        "Select [Emails] from LU_Contacts where id=" & id & ";").Fields(0)

    Set CurrentRecipient = Recipients.Add(StrConv(StrEmailTo, 3))
    CurrentRecipient.Type = olTo
    ...

    Objmail.Save 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:12:44.500

`Recipients.Add`需要一个电子邮件地址。

如果您希望有多个收件人，请`Recipients.Add`分别致电。

如果您的字符串以`;`分隔格式返回，则类似于：

```
dim EmailList as variant
dim NumEmails as long
dim AddEmailLoop as long

EmailList=split(StrEmailTo,";")
NumEmails=UBound(EmailList)

For AddEmailLoop=0 to NumEmails
    Recipients.add(EmailList(AddEmailLoop))
next 
```

应该允许您添加整个列表

# python - 将 YAML 文件转换为 python dict

> ID：13019653
> 
> 赞同：59
> 
> 时间：2012-10-22T20:51:28.013
> 
> 标签：python, data-structures, dictionary, yaml

我在将 YAML 文件中的文档映射到 a`dict`并正确映射它们时遇到以下问题。

我有以下 YAML 文件，它代表服务器（`db.yml`）：

```
instanceId: i-aaaaaaaa
     environment:us-east
     serverId:someServer
     awsHostname:ip-someip
     serverName:somewebsite.com
     ipAddr:192.168.0.1
     roles:[webserver,php] 
```

我加载了这个 YAML 文件，我可以毫无问题地做到这一点，我想我明白了。

```
instanceId = getInstanceId()
stream = file('db.yml', 'r')
dict = yaml.load_all(stream)

for key in dict:
    if key in dict == "instanceId":
        print key, dict[key] 
```

我希望逻辑如下所示：

*   加载 yaml，映射到 dict
*   查看文档中的每个 dict，如果`instanceId`与 设置的匹配`getInstanceId()`，则打印出该文档的所有键和值。

如果我从命令行查看地图数据结构，我会得到：

```
{'instanceId': 'i-aaaaaaaa environment:us-east serverId:someServer awsHostname:ip-someip serverName:someserver ipAddr:192.168.0.1 roles:[webserver,php]'} 
```

我想我可能不正确地为 YAML 文件创建数据结构，并且在匹配 上的内容时`dict`，我有点迷失了。

旁注：我无法使用`yaml.load()`, 我尝试加载此文件中的所有文档`yaml.load_all()`，这似乎可行，但我的主要问题仍然存在。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2012-10-22T21:40:30.037

我认为你的 yaml 文件应该看起来像（或者至少是类似的，所以它的结构是正确的）：

```
instance:
     Id: i-aaaaaaaa
     environment: us-east
     serverId: someServer
     awsHostname: ip-someip
     serverName: somewebsite.com
     ipAddr: 192.168.0.1
     roles: [webserver,php] 
```

然后，`yaml.load(...)`返回：

```
{'instance': {'environment': 'us-east', 'roles': ['webserver', 'php'], 'awsHostname': 'ip-someip', 'serverName': 'somewebsite.com', 'ipAddr': '192.168.0.1', 'serverId': 'someServer', 'Id': 'i-aaaaaaaa'}} 
```

你可以从那里去...

* * *

所以像这样使用：

```
>>> for key, value in yaml.load(open('test.txt'))['instance'].iteritems():
    print key, value

environment us-east
roles ['webserver', 'php']
awsHostname ip-someip
serverName somewebsite.com
ipAddr 192.168.0.1
serverId someServer
Id i-aaaaaaaa 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2017-03-07T16:35:01.657

您的代码中的另一个错误，与 YAML 无关：

```
for key in dict:
    if key in dict == "instanceId": # This doesn't do what you want
        print key, dict[key] 
```

`in`是一个适用于[序列类型](https://docs.python.org/2/library/stdtypes.html#sequence-types-str-unicode-list-tuple-bytearray-buffer-xrange)和地图的运算符。这就是为什么这不是语法错误......但它没有做你想要的。

`key in dict`将始终评估为`True`，因为您正在迭代的所有键都在字典中。因此，您的代码归结为`True == "instanceId"`，它将始终评估为`False`，因为布尔值`True`永远不会等于该字符串。

您可能已经注意到该`print`语句不会产生任何输出。这是因为它永远不会被调用。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-09-20T16:40:13.600

只需使用`python-benedict`，它是一个 dict 子类，为大多数常见格式提供 I/O 支持，包括`yaml`.

```
from benedict import benedict

# path can be a yaml string, a filepath or a remote url
path = 'path/to/data.yml'

d = benedict.from_yaml(path)

# do stuff with your dict
# ...

# write it back to disk
d.to_yaml(filepath=path) 
```

它经过了很好的测试和记录，请查看 README 以查看所有功能： [https ://github.com/fabiocaccamo/python-benedict](https://github.com/fabiocaccamo/python-benedict)

使用 pip 安装：`pip install python-benedict`

注意：我是这个项目的作者

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2019-10-02T13:46:07.363

您可以使用`bios`Python3 的包，如下所示：

```
import bios

my_dict = bios.read('data.yml') 
```

`bios`正在从文件中读取原始数据并转换 python dict 对象。根据文件的扩展名，可以判断出文件的类型。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2021-12-26T18:18:21.797

我喜欢用 Path，做一个漂亮的单线

```
import yaml
from pathlib import Path
conf = yaml.safe_load(Path('data.yml').read_text()) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-12-17T13:19:17.140

如果您遇到了这个问题，试图弄清楚如何使用 pyyaml 库从 yaml 文件中获取 python 字典，请尝试`safe_load`如下所示的选项。

```
import yaml
yaml_dict = yaml.safe_load("data.yml") 
```

# graph-algorithm - 如果在邻居节点中找到目标，我们是否停止深度优先搜索？

> ID：13019656
> 
> 赞同：0
> 
> 时间：2012-10-22T20:51:34.130
> 
> 标签：graph-algorithm, depth-first-search

只是想弄清楚这个算法。考虑一棵具有根节点和 3 个子节点的小树。A是根，BCD是它的孩子，然后根B有孩子E。如果目标是D，我们是在根扩展后立即停止还是继续向下遍历到E，回来，然后尝试扩展C 在我们去 D 之前？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:57:09.383

您检查树中的每一片叶子，尽可能深入地走所有路径。因此，如果您在**BCD**上有一个订单（即您通过枚举 A 的叶子按此顺序获得它们），您将首先进入**ABE**，然后是**C**，最后一个是**D。**

这通常是通过有一个特殊的结构来存储无人看管的叶子来完成的。

# c++ - 当字符串匹配某些内容时，如何在 qtextedit 中发出信号？

> ID：13019658
> 
> 赞同：0
> 
> 时间：2012-10-22T20:51:33.943
> 
> 标签：c++, regex, qt, qt4, syntax-highlighting

我正在开发一个简单的编辑器，并且在我的编辑器中我正在尝试实现某事。像这样：例如，用户键入“void”然后我发出一个信号，gui 中的某个地方会捕捉到它，它会自行改变。我在代码中使用了[语法高亮](http://doc.qt.digia.com/latest/richtext-syntaxhighlighter.html)示例，并在 highlightBlock 函数中发出了一个信号：

```
void Highlighter::highlightBlock(const QString &text)
 {
     foreach (const HighlightingRule &rule, highlightingRules) {
         QRegExp expression(rule.pattern);
         if (expression.exactMatch("void")==true) {
             emit voidPrinted(2);

         }
         int index = expression.indexIn(text);
         while (index >= 0) {
             int length = expression.matchedLength();
         ...
     } 
```

但是当我运行程序时，信号总是在不输入 void 的情况下发出。文档说“只要富文本引擎需要，即当文本块发生更改时，就会自动调用 highlightBlock() 函数。” 而且我认为我只在表达式无效时才发出，但显然，我错了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:10:09.597

您在字符串文字“void”上运行正则表达式，而不是在用户输入的文本上运行。替换`expression.exactMatch("void")`为`expression.exactMatch(text)`. 如果您还没有，您还需要添加“void”字符串作为 highlightingRules 的模式。

还要考虑为这个方法添加一个“无效规则”的特殊信号会导致它做很多事情。规则被定义为具有匹配器和指定突出显示以在匹配时应用的数据，但您正在为其中一个匹配项硬编码一种特殊的、不相关的行为。这对我来说表明你做错了，尽管没有进一步研究你正在使用的代码，我无法告诉你如何做得更好。

# objective-c - @synthesize 中的 = 运算符是什么意思？

> ID：13019660
> 
> 赞同：0
> 
> 时间：2012-10-22T20:51:35.907
> 
> 标签：objective-c, synthesize

> **可能重复：**
> [可可objective-c 类中变量前面的下划线如何工作？](https://stackoverflow.com/questions/822487/how-does-an-underscore-in-front-of-a-variable-in-a-cocoa-objective-c-class-work)
> [属性名称的下划线前缀？](https://stackoverflow.com/questions/5582448/underscore-prefix-on-property-name)

我是 XCode 的新手。我看到有人在哪里：@synthesize msgTextField = _msgTextField;

后来他们引用了_msgTextField。

问：@synthesize 语句是否创建了一个名为 _msgTextField 的变量？

问：为什么它会从赋值运算符倒退？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-22T20:53:55.830

1.  是的，@synthesize 将在 _msgTextField 的情况下生成一个实例变量；

2.  它不是一个任务，它专门告诉@synthesize 要生成的 ivar 的名称。

# ffmpeg - ffmpeg - 转置然后应用水印

> ID：13019661
> 
> 赞同：2
> 
> 时间：2012-10-22T20:51:43.613
> 
> 标签：ffmpeg

我正在尝试使用 -vf / -filter_complex 选项链接两个过滤器 - 视频旋转然后应用水印。

我有一个现有的水印命令：

> -vf "电影=wm.png [水印]; [输入][水印] 叠加层=main_w/2-overlay_w/2:main_h-overlay_h [输出]"

我有一个轮换：

> -vf“转置=1”

如何将两者结合起来，进行旋转，然后应用水印？我似乎无法让 -filter_complex 工作：

> -i wm.png -filter_complex "transpose=1,transpose=1,overlay=main_w/2-overlay_w/2:main_h-overlay_h"

它可以工作，但视频没有旋转。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T01:57:18.767

我想出了这一点-您需要将倍数链接在一起。

> -vf "movie=wm.png [wm]; [in] transpose=1 [rotate]; [rotate][wm] overlay=(main_w-overlay_w)/2:main_h-overlay_h-3 [out]"

将水印文件名设置为 [wm]，但使用分号将开头与 [in] 分开。然后在 [rotate] 下添加另一个操作，然后将其链接到 [wm] 以执行转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-16T07:59:12.297

您可以使用 -filter_complex 选项

例子：

```
ffmpeg -i input.mp4 -i input.png -filter_complex "transpose=1,overlay=10:10" -y out.mp4 
```

# java - 数据存储类？

> ID：13019668
> 
> 赞同：0
> 
> 时间：2012-10-22T20:52:00.603
> 
> 标签：java, arrays, class, object

我只需要一个基本的解释。我将创建一些示例代码，也许有人可以帮助我在这方面工作了几个小时，但我只是不明白如何正确使用类与数组之类的东西。我已经阅读了 javadocs 的东西，但我仍然感到困惑。如果有人能告诉我如何解决这个问题，我将不胜感激，因为这意味着我可以应用于我试图解决的更大的问题。

```
public class main{
    int id =0;
    double data1 = 0;
    double data2 = 0;
    double data3 = 0;    

    public static void main(String[] args){
            id++;  // do some stuff to the data. 
    }

    public class datastorage{ 

    /*I want to create an array of arrays in this class to store the
    hanging values from the main class 
    e.g. {{1,34.2,34.6,23.1}{2,38.2,33.6,22.6}}
    I then want to be able to call each array back to the main to display depending on
     which ID I choose. */
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T20:57:29.697

为什么不定义一个单独的类来保存这些数据 - 然后维护这个类的实例列表？

例如，

```
public class MyClass { 
    int id =0; 
    double data1 = 0; 
    double data2 = 0;
    double data3 = 0;

    ...
} 
```

然后在您的主要方法中，您也许可以使用[`ArrayList`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html)：

```
ArrayList<MyClass> list = new ArrayList<MyClass>();
... 
```

* * *

如果由于某种原因无法做到这一点，您仍然可以选择创建一个`double[]`s 数组来保存数据（就像您提到的那样）。

```
double[][] data = new double[4][MAX_ENTERIES];
data[0] = new double[]{1,34.2,34.6,23.1};
data[1] = new double[]{2,38.2,33.6,22.6};
... 
```

要在 中查找特定 id `data`，您可以简单地遍历其数组：

```
for (double[] arr : data)
    if (arr[0] == someId)
        // do something 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T20:57:59.630

首先要牢记[Java 编码标准](http://www.oracle.com/technetwork/java/codeconv-138413.html)。

您的命名约定令人困惑。类名“主要”？你可以做得更好。

您发布的代码非常混乱。我不知道从哪里开始。

# plugins - js_init_call 给出了不能调用 Moodle 块插件中未定义的方法 'init'

> ID：13019669
> 
> 赞同：2
> 
> 时间：2012-10-22T20:52:05.323
> 
> 标签：plugins, block, moodle

我有一个 moodle 块插件，我试图在页面中包含 javascript。

无论我如何尝试，js_init_call 调用的 javascript 总是抛出错误而不是运行我尝试将完整数组传递给 js_init_call，并且我尝试了假定文件名为 module.js

如果 javascript 文件*不*存在，我会收到一个 Moodle 错误，抱怨文件丢失。如果它*确实*存在，我会收到上面的 javascript 错误。我究竟做错了什么？

block_foo.php：

```
<?php
class block_foo extends block_base {
    public function init() {
    $this->title = get_string('foo', 'block_foo');
    }

    public function applicable_formats(){
        return array('course-view' => true);
    }

    public function get_content() {
        global $PAGE;
        if ($this->content !== null) {
          return $this->content;
        }

        if(!isloggedin()){
        //if(!is_enrolled()){
            return false;
        }
        $this->content         =  new stdClass;
        $this->content->text = 'asdf';
        $this->content->footer = '';

        $jsmodule = array(
            'name'     => 'block_foo',
            'fullpath' => '/blocks/foo/foo.js',
            'requires' => array(),
            'strings' => array()
        );
        $PAGE->requires->js_init_call('M.block_foo.init', null, false, $jsmodule);

        //This style of call doesn't work either... (if the js is named module.js)
        //$PAGE->requires->js_init_call('M.block_foo.init', null);

        return $this->content;
    }

    function hide_header(){
        return true;
    }
} 
```

module.js 或 foo.js：

```
M.block_foo = {};
M.block_foo.init = function(){
    alert("I was called, yay");
    $var = 1234;
    $var = $var + 3;
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T22:15:52.203

这个问题最终是由 Moodle 以大小为 0 的 HTTP/200 响应响应对 javascript 文件的请求引起的。

该响应似乎是由于模块只是到我的开发目录的符号链接而不是文件的实际副本引起的。为什么这只发生在 javascript 文件，而不是 php 文件，我不知道。

所以不要开发moodle模块然后将它们符号链接到适当的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T00:55:28.003

我知道这是一个老问题，但为了将来参考，使用`'fullpath' => new moodle_url($CFG->wwwroot.'/blocks/foo/foo.js'),`符号链接不会有任何问题。

# maven-3 - 我可以使用哪些工具来找出为什么 maven3 会搜索真正旧的内部快照？

> ID：13019675
> 
> 赞同：1
> 
> 时间：2012-10-22T20:52:48.437
> 
> 标签：maven-3

我正在尝试将我的公司从 maven2 升级到 maven3，一个阻塞器是一种奇怪的现象，当我激活某个配置文件时，maven reactor 开始搜索大量旧的依赖信息（10 多分钟直到内存耗尽）。

如果存在具有范围的依赖项（例如“[3.0,)”），我已经看到了这种行为，但我很确定我已经清除了所有这些。

使用 mvn dependency:tree 和 mvn help:effective-pom 不会告诉我是否有任何范围依赖，并且在 pom.xml 文件中对*[, ], (*或*)*的 grepping 没有任何结果，所以我有点难过关于下一步戳哪里的那一刻。

例如，在我的 pom 中，我有这个配置文件激活部分：

```
 <profile>
       <id>demo</id>
       <activation>
           <property>
               <name>client</name>
               <value>demo</value>
           </property>
       </activation>
       <dependencies>
           <dependency>
               <groupId>com.mycompany</groupId>
               <artifactId>client-demo</artifactId>
               <version>3.32.0-SNAPSHOT</version>
           </dependency>
       </dependencies>
   </profile> 
```

然后当我在命令行上运行它时：

> mvn -Dclient=演示码头：运行

输出是对我的客户端演示工件的每个历史快照的成千上万次 pom 数据搜索：

```
 ....snip.....
    Downloading:https://nexus.mycompany.com/nexus/content/groups/public/com/mycompany/client-demo/2.16.7-SNAPSHOT/client-demo-2.16.7-SNAPSHOT.pom 
    [WARNING] The POM for com.mycompany:client-demo:jar:2.16.7-SNAPSHOT is missing, no dependency information available 
    Downloading: https://nexus.mycompany.com/nexus/content/groups/public/com/mycompany/client-demo/2.16.8-SNAPSHOT/maven-metadata.xml 
    Downloading: https://nexus.mycompany.com/nexus/content/groups/public/com/mycompany/client-demo/2.16.8-SNAPSHOT/client-demo-2.16.8-SNAPSHOT.pom 
    [WARNING] The POM for com.mycompany:client-demo:jar:2.16.8-SNAPSHOT is missing, no dependency information available 
    Downloading: https://nexus.mycompany.com/nexus/content/groups/public/com/mycompany/client-demo/2.16.9-SNAPSHOT/maven-metadata.xml 
    Downloading: https://nexus.mycompany.com/nexus/content/groups/public/com/mycompany/client-demo/2.16.9-SNAPSHOT/client-demo-2.16.9-SNAPSHOT.pom 
    [WARNING] The POM for com.mycompany:client-demo:jar:2.16.9-SNAPSHOT is missing, no dependency information available 
    Downloading: https://nexus.mycompany.com/nexus/content/groups/public/com/mycompany/client-demo/2.16.10-SNAPSHOT/maven-metadata.xml 
    Downloading: https://nexus.mycompany.com/nexus/content/groups/public/com/mycompany/client-demo/2.16.10-SNAPSHOT/client-demo-2.16.10-SNAPSHOT.pom
    ....snip..... 
```

编辑:: 更多信息。

此问题似乎纯粹与通过配置文件激活包含附加依赖项有关，而不与依赖项本身有关。例如，如果我摆脱配置文件并直接依赖 com.mycompany.client-demo-3.32.0-SNAPSHOT，则不会出现不良行为。所以这与反应堆处理配置文件激活依赖项的方式有关......我认为

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T01:01:05.970

在你的情况下，我会尝试一些事情，比如`help:effective-pom`，看看是否有什么让我感到惊讶的事情。此外，`mvn -X -Dclient=demo clean install`然后查看日志以查看是否可以找出不良行为的来源。

我唯一的另一个想法是，某处可能存在循环依赖... client-demo:X-SHAPSHOT 取决于 other-lib:Y-SNAPSHOT，取决于 client-demo:(X-1)-SNAPSHOT ...但是我怀疑在这种情况下输出会有所不同。

构建客户端演示时会发生什么？

# android - Android:achartengine - 缩放时 XYChart 重叠轴

> ID：13019676
> 
> 赞同：3
> 
> 时间：2012-10-22T20:52:51.070
> 
> 标签：android, achartengine

我在线性布局中使用 AChartEngine 绘制图表。我有图表的边距

```
 mRenderer.setMargins(new int[] {20, 50, 20, 20}); 
```

问题是当我缩放图表时，它与轴重叠。如何解决？为什么缩放图表时边距不起作用？

![在此处输入图像描述](../Images/6b473292a861ba87f50da458c5a5044f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:23:23.403

发现了问题。问题出在这段代码中

```
mRenderer.setMarginsColor(Color.argb(0x00, 0x01, 0x01, 0x01)); 
```

我将边距颜色设置为透明，因为我希望我的背景视图可见。所以解决方案是绘制边距。解决方案并不完美，但它对我有用。

# objective-c - Objective-C：具有拆分视图的 UITabBarController

> ID：13019682
> 
> 赞同：4
> 
> 时间：2012-10-22T20:53:12.023
> 
> 标签：objective-c, ios, cocoa-touch

我对 Objective-C 很陌生，我正在尝试为 iOS 编写我的第一个应用程序。这个想法很简单，但我在开始架构构建时已经失败了。

我想创建显示在多个选项卡上的不同视图，这些视图应该在加载视图时动态创建。此外，应用程序必须能够在运行时动态添加选项卡。选项卡视图不应覆盖整个屏幕，而应占顶视图的 2/3。底部剩余的 1/3 再次分为两个子视图，不打算用选项卡开关进行更改。

我所做的是创建一个 UIWindow、UITabBarController 和两个 UIViewController（用于两个选项卡）和一个（或如图中的两个）应该在底部。

到目前为止，我已经设法在不同的选项卡视图之间切换，但是一旦我尝试使用 CGMakeRect 将两个选项卡的 UIViewControllers 调整为任何大小，它总是保持不变并覆盖整个屏幕。

在底部创建的子视图包含一个不可点击的按钮。也许是因为它被标签视图覆盖了。

谁能给我一点帮助我如何建立这些观点？

非常感谢！

这是我的代码：

```
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

UIViewController *test = [[UIViewController alloc] init];
test.view.backgroundColor = [UIColor grayColor];
test.view.frame = CGRectMake(0, 0, 320, 200);

UIButton *button3 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button3 setTitle:@"View 3" forState:UIControlStateNormal];
button3.frame = CGRectMake(30.0, 30.0, 120.0, 50.0);
[test.view addSubview:button3];

UITabBarController *tabBarController = [[UITabBarController alloc] init];

UIViewController *viewController1 = [[UIViewController alloc] init];
UITabBarItem *tab1 = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemBookmarks tag:1];
[viewController1 setTabBarItem:tab1];

UIViewController *viewController2 = [[UIViewController alloc] init];
UITabBarItem *tab2 = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemContacts tag:2];
[viewController2 setTabBarItem:tab2];

UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button setTitle:@"View from Tab 1" forState:UIControlStateNormal];
button.frame = CGRectMake(100.0, 100.0, 120.0, 50.0);
[viewController1.view addSubview:button];

UIButton *button2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
[button2 setTitle:@"View from Tab 2" forState:UIControlStateNormal];
button2.frame = CGRectMake(100.0, 100.0, 120.0, 50.0);
[viewController2.view addSubview:button2];

tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];

self.window.rootViewController = tabBarController;
[self.window addSubview:test.view];

[self.window makeKeyAndVisible]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T18:21:14.860

实际上有一种方法可以实现这一点，这要归功于自定义容器视图控制器：

将 替换为窗口的 rootViewController 的`UITabBarController`自定义子类。`UIViewController`然后在它的`viewDidLoad`方法中（或根据您的需要在其他地方）您从上面添加几乎您的确切代码，并进行一些小的修改。这是该`viewDidLoad`方法的完整代码（我在修改后的行上方添加了注释）：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UITabBarController *tabBarController = [[UITabBarController alloc] init];

    UIViewController *viewController1 = [[UIViewController alloc] init];

    //Mod1: Set an autoresizingMask 
    //so that the view always fills the tabBarController's view
    //if needed you can also set it's frame here
    viewController1.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    UITabBarItem *tab1 = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemBookmarks tag:1];
    [viewController1 setTabBarItem:tab1];

    UIViewController *viewController2 = [[UIViewController alloc] init];

    //Mod2: Same here
    viewController2.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;
    UITabBarItem *tab2 = [[UITabBarItem alloc] initWithTabBarSystemItem:UITabBarSystemItemContacts tag:2];
    [viewController2 setTabBarItem:tab2];

    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button setTitle:@"View from Tab 1" forState:UIControlStateNormal];
    button.frame = CGRectMake(100.0, 100.0, 120.0, 50.0);
    [viewController1.view addSubview:button];

    UIButton *button2 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button2 setTitle:@"View from Tab 2" forState:UIControlStateNormal];
    button2.frame = CGRectMake(100.0, 100.0, 120.0, 50.0);
    [viewController2.view addSubview:button2];

    tabBarController.viewControllers = [NSArray arrayWithObjects:viewController1, viewController2, nil];

    //Mod3: Set the frame and autoresizingMask of the tabBarController 
    //to fill the rootVC's view
    tabBarController.view.frame = self.view.bounds;
    tabBarController.view.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleWidth;

    //Mod4: This is the important part:
    //add the tabBarController as childVC of the rootVC
    [self addChildViewController:tabBarController];
    [self.view addSubview:tabBarController.view];
    [tabBarController didMoveToParentViewController:self];

    //Mod5: calculate the frame for the 'static' vc on the bottom
    float heightForStaticVC = 200.0f;

    float yPosForStaticVC = tabBarController.view.frame.size.height - tabBarController.tabBar.frame.size.height - heightForStaticVC;

    UIViewController *test = [[UIViewController alloc] init];

    //Mod6: again setting the autoresizingMask
    test.view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleTopMargin;
    test.view.backgroundColor = [UIColor grayColor];
    test.view.frame = CGRectMake(0, yPosForStaticVC, 320, heightForStaticVC);

    UIButton *button3 = [UIButton buttonWithType:UIButtonTypeRoundedRect];
    [button3 setTitle:@"View 3" forState:UIControlStateNormal];
    button3.frame = CGRectMake(30.0, 30.0, 120.0, 50.0);
    [test.view addSubview:button3];

    //Mod7: and again adding it as childVC of the rootVC
    [self addChildViewController:test];
    [self.view addSubview:test.view];
    [test didMoveToParentViewController:self];

} 
```

当然，您可以根据需要修改大小、定位和自动调整大小的行为。

结果如下所示：

![Tab1 纵向](../Images/e4444832315cb71fed484aad1eec3d62.png) ![Tab2 纵向](../Images/8fd51a9372ab0f4149d0f7758b88d895.png)

![Tab1 横向](../Images/fdbb8000c5eab451c24d07e967df2806.png)

![Tab2 横向](../Images/c7a2fc299a2c51851b1efcc07bf5a153.png)

# php - 解析 Windows CSV 与常规 CSV

> ID：13019691
> 
> 赞同：2
> 
> 时间：2012-10-22T20:53:56.167
> 
> 标签：php, csv

我构建了一个将 CSV 作为批量提要接收的应用程序，当在 Mac 上的 Excel 中保存为“Windows 逗号分隔”与“逗号分隔”时，我注意到 CSV 存在差异。我的脚本只能解析 Windows 版本，我看不到如何在我的代码中克服这个问题。

我发现它们在返回的行中有所不同：http: [//cl.ly/image/3x463O3b0A1s](http://cl.ly/image/3x463O3b0A1s)

这是 Mac Excel 中的文件类型列表：http: [//cl.ly/image/2F110Q1X0V0i](http://cl.ly/image/2F110Q1X0V0i)

我将它分解成这样的行：

```
$lines = explode("\n", $content); 
```

使用常规 CSV，它无法识别任何行，但使用 Windows 版本，它可以按预期工作（看图！）。我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:01:06.307

如前所述，您应该使用`fgetcsv()`...但是，使用该功能在 Mac 上生成的 CSV 仍然存在问题。

PHP 没有正确检测行尾。为了解决这个问题，我不得不添加`ini_set("auto_detect_line_endings", true);`到处理 CSV 文件的函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:57:20.290

如评论中所述，使用原生 PHP 函数[`fgetcsv()`](http://php.net/fgetcsv)：[`str_getcsv()`](http://php.net/str_getcsv)

# java - 带有 Velocity 和 Tiles 的 Struts2

> ID：13019692
> 
> 赞同：1
> 
> 时间：2012-10-22T20:53:56.900
> 
> 标签：java, jakarta-ee, struts2, velocity, tiles

我正在 Struts2 上开发一个 Web 应用程序。对于前端开发，我决定将 Velocity 与 Tiles 一起使用。我找到了 Struts2 的[Velocity](http://struts.apache.org/2.x/docs/velocity.html)和[Tiles](http://struts.apache.org/2.3.4.1/docs/plugins.html)插件，但没有找到任何关于一起使用这三种技术的相关文章。

任何人都可以分享一起使用它们的经验。

# css - Wordpress 浮动框问题 IE

> ID：13019694
> 
> 赞同：1
> 
> 时间：2012-10-22T20:54:04.823
> 
> 标签：css, internet-explorer

我在[http://inauguralseason.com/](http://inauguralseason.com/)获得了这个网站，如果您在 IE 8 中单击“联系我们”，页面会在浮动框中打开，问题是浮动框占据了整个屏幕，并且联系表格应该居中。 ..任何人有任何想法为什么它这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T10:48:32.463

我想你的问题是“为什么联系表格没有居中”，而不是“为什么浮动框占据了整个屏幕”。
您的浮动框内容是一个`iframe`来源为[http://inauguralseason.com/?page_id=12](http://inauguralseason.com/?page_id=12)
的表单包含在一个`div`with 类中`contactBackground`；此类在`style.css`文件中定义，并具有`margin: auto`应使其居中的属性。
不幸的是，正如您[在此处](https://stackoverflow.com/questions/662341/using-margin-0-auto-in-internet-explorer-8)阅读的那样，此方法在 IE8 怪癖模式下不起作用；[如说明](http://floatboxjs.com/instructions#doctype)中所述，floatbox 不支持此模式。
解决方案只是`DOCTYPE`在页面开头添加一个声明。
查看 floatbox iframe 的源代码，我还注意到缺少`<html>`and标签，因此您还应该添加这些标签。 生成的 HTML 代码应该是这样的：`<body>`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
    <style>
    body{
        background-image: url('http://inauguralseason.com/wp-content/themes/twentyeleven/images/repeating_bq_pink.gif') !important;
    }
    </style>
    <link rel="stylesheet" type="text/css" media="all" href="http://inauguralseason.com/wp-content/themes/twentyeleven/style.css" />
</head> 
<body>  
    <div id="main" style="padding-top:11px;">
        <article id="post-12" style="padding:0!mportant; margin:0!important; width:595px; height:600px;" class="post-12 page type-page status-publish hentry">
            <header class="entry-header">
                <!--<h1 class="entry-title"></h1>-->
            </header><!-- .entry-header -->
            <div class="contactBackground">
                <div class="wpcf7" id="wpcf7-f17-p12-o1">
                    <form action="/?page_id=12#wpcf7-f17-p12-o1" method="post" class="wpcf7-form">
                        <div style="display: none;">
                            <input type="hidden" name="_wpcf7" value="17" />
                            <input type="hidden" name="_wpcf7_version" value="3.2.1" />
                            <input type="hidden" name="_wpcf7_unit_tag" value="wpcf7-f17-p12-o1" />
                            <input type="hidden" name="_wpnonce" value="1050e77acd" />
                        </div>
                        <p>
                            Your Name (required)<br />
                            <span class="wpcf7-form-control-wrap your-name">
                                <input type="text" name="your-name" value="" class="wpcf7-form-control wpcf7-text wpcf7-validates-as-required" size="40" />
                            </span>
                        </p>
                        <p>
                            Your Email (required)<br />
                            <span class="wpcf7-form-control-wrap your-email">
                                <input type="text" name="your-email" value="" class="wpcf7-form-control wpcf7-text wpcf7-email wpcf7-validates-as-required wpcf7-validates-as-email" size="40" />
                            </span> 
                        </p>
                        <p>
                            Subject<br />
                            <span class="wpcf7-form-control-wrap your-subject">
                                <input type="text" name="your-subject" value="" class="wpcf7-form-control wpcf7-text" size="40" />
                            </span> 
                        </p>
                        <p>
                            Your Message<br />
                            <span class="wpcf7-form-control-wrap your-message">
                                <textarea name="your-message" class="wpcf7-form-control  wpcf7-textarea" cols="40" rows="10"></textarea>
                            </span> 
                        </p>
                        <p>
                            Please Enter The Text Below<br />
                            <span class="wpcf7-form-control-wrap captcha-715">
                                <input type="text" name="captcha-715" value="" class="wpcf7-form-control  wpcf7-captchar" size="40" />
                            </span>
                        </p>
                        <p>
                            <input type="hidden" name="_wpcf7_captcha_challenge_captcha-715" value="1614713562" /><img alt="captcha" src="http://inauguralseason.com/wp-content/uploads/wpcf7_captcha/1614713562.png" class="wpcf7-form-control  wpcf7-captchac wpcf7-captcha-captcha-715" width="84" height="28" />
                        </p>
                        <p>
                            <input type="submit" value="Send" class="wpcf7-form-control  wpcf7-submit" />
                        </p>
                        <div class="wpcf7-response-output wpcf7-display-none"></div>
                    </form>
                </div>
            </div>
            <footer class="entry-meta"></footer><!-- .entry-meta -->
        </article><!-- #post-12 -->
    </div>
</body>
</html> 
```

**更新：**

浮动框宽度问题取决于 iframe 样式，定义在“ [style.css](http://inauguralseason.com/wp-content/themes/twentyeleven/style.css) ”文件的第 1535 行：

```
/* Make sure embeds and iframes fit their containers */
embed,
iframe,
object {
    max-width: 100%;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T13:54:21.573

我以前没有真正使用过 floatbox，但我认为它会有额外的选项，例如设置联系表单出现的模式的高度和/或宽度。

[http://floatboxjs.com/options](http://floatboxjs.com/options)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-31T18:02:57.597

页面源代码有多个 HTML 元素：S 浮动框本身实际上是这些实例之一的主体。嗯，有你的问题。我会冒险猜测您正在使用某种插件，该插件应该只是拉动浮动框容器，而是抓取整个文档。

在解决 HTML 标记问题之前，您可以做（或想做）的事情并不多。之后，定位容器并调整大小/间距应该非常简单：#container { width: Xpx; 高度：Ypx；填充：Zpx；（等等，等等}，假设您知道所需的尺寸，您可以通过用户样式覆盖在 WordPress 中执行此操作。

希望这可以帮助。

# html - LI 元素内的填充

> ID：13019695
> 
> 赞同：4
> 
> 时间：2012-10-22T20:54:11.530
> 
> 标签：html, css, padding

我无法让 padding 属性在我的`<li>`标签内工作。

**这是我的 CSS：**

```
.menu li{
   height:50px;
   display: inline;
   padding:10px 15px 18px 15px;
   border-style: solid;
   border-width: 0px 2px;
   -moz-border-image: url(../img/menuborder.png) 0 2 stretch repeat;
   -webkit-border-image: url(../img/menuborder.png) 0 2 stretch repeat;
   -o-border-image: url(../img/menuborder.png) 0 2 stretch repeat;
   border-image: url(../img/menuborder.png) 0 2 stretch repeat;
   border-right:0;
}

.menu a{
   color:#fff;
   text-decoration: none;
   padding-top:10px;
} 
```

**这是我的 .HTML：**

```
 <ul class="menu">
        <li><a href="#">Dashboard</a></li>
        <li><a href="#">Incentives</a></li>
        <li><a href="#">Forum</a></li>
        <li><a href="#">Forum</a></li>
        <li class="last"><a href="#">Help</a></li>
    </ul> 
```

然而， padding-top 似乎不会影响 a 和 li 标签内的文本。

我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-22T20:57:20.827

您可能需要将填充应用于`a`元素。您需要将其设置为块级元素，以便顶部/底部填充起作用：

```
.menu a { 
    color: #fff;
    display: inline-block;
    text-decoration: none;
    padding: 10px 15px 18px 15px;
} 
```

注意：`inline-block`在 IE7 及以下版本中仅部分支持。如果上述操作没有按预期工作，`display: block;`您可以使用。`float:left`

同样重要的是要提到这里的基本问题是CSS 中的`display:inline`你的 s ，以及标签默认情况下`li`的事实。您不能将顶部/底部填充应用于元素。`a``inline``inline`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T20:56:34.117

填充不起作用

```
display: inline; 
```

尝试

```
display: block; 
```

相反，并且可选地

```
float: left; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:01:10.143

您也可以尝试设置`line-height`以`a`匹配类似的高度`li`：

```
.menu a{
    color: #000;
    text-decoration: none;
    line-height: 50px;
} 
```

在这里演示：http: [//jsfiddle.net/9TcRP/](http://jsfiddle.net/9TcRP/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T20:56:38.820

```
.menu li a{color:#fff;text-decoration: none;padding-top:10px;} 
```

这将为列表项本身添加填充。您需要为

```
.menu 
```

本身，以便将所有其他填充（左右）添加到列表项块中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T21:02:55.703

您也许可以给您 li 一个类名并尝试为该类设置样式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T21:03:15.140

您想要菜单本身的顶部填充。不是锚点或列表元素。

```
.menu {padding-top: 10px;} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-12-09T17:15:02.407

这对我有用：

**CSS**

```
.menu li{
  padding:7px;
} 
```

**HTML**

```
<div class="menu">
  <ul>
    <li>first element
    <li>second element
    <li>third element
    <li>fourth element
  </ul>
</div> 
```

# c - 使用结构时收到“之前的预期表达式”错误

> ID：13019699
> 
> 赞同：-1
> 
> 时间：2012-10-22T20:54:18.590
> 
> 标签：c

我正在和一群学校的朋友一起用 C 语言创建一个简单的 2D 游戏引擎。我想以面向对象的方式编写这个引擎，使用`structs`类、函数指针作为方法等。为了模拟标准的 OOP 语法，我创建了一个`create()`函数，它为对象分配内存空间。我正在测试它，我收到一个错误。这是我用来测试的两个文件的代码：

**测试.c：**

```
#include <stdio.h>

int main()
{
        typedef struct
        {
                int i;
        } Class;

        Class *test = (Class*) create(Class);
        test->i = 1;

        printf("The value of \"test\" is: %i\n", test->i);

        return 0;
} 
```

**实用程序.c：**

```
#include <stdio.h>
#include <stdlib.h>
#include "utils.h"

void* create(const void* class)
{
        void *obj = (void*) malloc(sizeof(class));
        if (obj == 0)
        {
                printf("Error allocating memory.\n");
                return (int*) -1;
        }
        else {
                return obj;
        }
}

void destroy(void* object)
{
        free(object);
} 
```

该`utils.h`文件仅包含`create()`和`destroy()`函数的原型。

当我执行`gcc test.c utils.c -o test`时，我收到此错误消息：

```
test.c: In function 'main':
test.c:10:32: error: expected expression before 'Class' 
```

我知道这与我`typedef`的一开始有关，以及我可能没有使用正确的语法。但我不知道正确的语法是什么。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T20:57:40.403

您的代码在这方面毫无意义

```
Class *test = (Class*) create(Class); 
```

`Class`是一个类型名称。你为什么试图将它作为参数传递给`create`？您不能在 C 中使用类型名称作为函数参数。

您的`create`函数似乎期望某种指针作为参数。我完全不清楚该指针的用途，但这里的底线是类型名称`Class`不能用作此处的参数。

在您的内部，您`create`将`sizeof(class)`其用作要分配的内存量。这`sizeof(class)`将简单地评估为指针大小，这绝对不是您需要的。

基本上，您需要重新考虑您正在尝试做的事情并从头开始做。我建议先阅读有关 C 的书。你现在拥有的只是……随机的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T20:56:45.483

这一行：

```
Class *test = (Class*) create(Class); 
```

难道不应该

```
Class *test = (Class*) create(sizeof(Class)); 
```

反而？

请注意，这`class`是一个反向的 C++ 关键字：

```
void* create(const void* class) 
```

**编辑** 你应该是：

```
void* create(unsigned sz)
{
        void *obj = (void*) malloc(sz);
        if (obj == 0)
        {
                printf("Error allocating memory.\n");
        }
        return obj;
}

void destroy(void* obj)
{
        free(obj);
} 
```

用法：

```
 Class *test = (Class*) create(sizeof(Class)); 
```

# java - 使用 Eclipselink DescriptorCustomizer 软删除级联

> ID：13019702
> 
> 赞同：4
> 
> 时间：2012-10-22T20:54:20.457
> 
> 标签：java, jpa, eclipselink

亲爱的程序员，我向您寻求以下帮助：

我正在使用 EclipseLink 作为我的应用程序的 ORM，并尝试在我的一个实体（文章）上实现软删除，并在删除具有 OneToMany 关系的类别时级联删除这些文章。

当我删除一篇文章时，一切都按预期工作，但是当我删除一个包含 n 篇文章的类别时，我得到一个例外。我正在使用 DescriptorCustomizer 来完成软删除。

具有以下实现的 DescriptorCustomizer（请参阅*org.eclipse.persistence.config.DescriptorCustomizer ）：*

```
public class ArticleCustomizer implements DescriptorCustomizer {

    @Override
    public void customize(ClassDescriptor classDescriptor) throws Exception {
       classDescriptor.getQueryManager().setDeleteSQLString("UPDATE article SET ACTIVE = '0' WHERE id = #id");
    }
} 
```

我要保存的实体：

抽象项目

```
@Entity
@Table(name = "item")
@Inheritance(strategy = InheritanceType.JOINED)
public abstract class AbstractItem extends BaseEntity {
    @ManyToOne
protected Category category;
} 
```

文章

```
@Entity
@DiscriminatorValue("article")
@Customizer(value=ArticleCustomizer.class)
public class Article extends AbstractItem {

} 
```

类别

```
@Entity
@Customizer(value=CategoryCustomizer.class)
public class Category extends BaseEntity {

    @OneToMany(cascade = CascadeType.REMOVE)
    @JoinTable(name = "category_items", joinColumns = @JoinColumn(name = "category_id"), inverseJoinColumns = @JoinColumn(name = "item_id"))
    protected List<AbstractItem> items = new ArrayList<AbstractItem>();

    @OneToMany(cascade = CascadeType.REMOVE)
    @JoinTable(name = "category_subcategories", joinColumns = @JoinColumn(name = "category_id"), inverseJoinColumns = @JoinColumn(name = "parent_category_id"))
    protected List<Category> categories = new ArrayList<Category>();
} 
```

当我尝试级联删除具有 n 篇文章的类别时的错误：

```
Internal Exception: com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: Unknown column 'ACTIVE' in 'field list'
Error Code: 1054
Call: UPDATE article SET ACTIVE = '0' WHERE id = ?
bind => [null] 
```

我可以看到 id 被绑定为 null，但是我不明白为什么。有人可以指导我正确的方向吗？

1.  Eclipselink 版本：2.4.0
2.  春天：3.1.2发布

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-23T19:34:59.037

很抱歉耽误了你的时间。解决方案就在我面前：

```
classDescriptor.getQueryManager().setDeleteSQLString("UPDATE item SET ACTIVE = '0' WHERE id = #ID"); 
```

定制器的正确表应该是*ITEM*而不是*ARTICLE*。奇怪的是，它适用于单个文章的删除，但不适用于级联。

第二个问题是：

```
#id instead of #ID 
```

它区分大小写。

谢谢你帮助我！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-18T15:36:22.423

每当一个类实现时`DescriptorCustomizer`，我建议将其编码包装为：

```
public static class MyCustomizer implements DescriptorCustomizer {
    @Override
    public void customize(ClassDescriptor descriptor) throws Exception {
        try {
           ...
           ... your functionality 
           ...
        } catch (Exception e) {
            e.printStackTrace();
            throw e;
        }
    }
} 
```

原因是`DescriptorCustomizer`当日志记录设置低于`FINER`（这非常冗长）时，会产生静默失败。然后异常不会传播到“外部”，您不会收到它们的通知，也无法找出失败的原因。

或者，您可以将 EMF 属性`PersistenceUnitProperties.LOGGING_LEVEL`级别设置为`SessionLog.FINER_LABEL`.

# android - android，xhdpi - 堆

> ID：13019706
> 
> 赞同：2
> 
> 时间：2012-10-22T20:55:00.690
> 
> 标签：android, image, memory, memory-management, drawable

我在drawable-xhdpi中有15个图像，每个都是800x800，在drawable-hdpi中我有相同的图像但600x600，当我在设备上以hdpi分辨率运行应用程序时，堆大小约为3mb，但是当我在设备上运行它时使用 xhdpi 分辨率，堆大小超过 40mb 并且内存不足？怎么了？图像是否太大？

堆大小：ldpi：~3mb mdpi：~3mb hdpi：~3mb xhdpi：~40mb

以这种方式加载图像：

```
 b1 = BitmapFactory.decodeResource(getResources(), R.drawable.image);
 imageview.setImageBitmap(b1);

then in OnBackPressed() b1.recycle() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:12:37.187

这已经被问过很多次了......加载时用于位图的真实内存是`H x W x 4`. 800 * 800 * 4 * 15 = 38 MB。您不应该同时加载所有 15 张图像。由于它们大约是屏幕大小，因此在这种情况下重新采样没有意义，您只需要弄清楚如何避免同时加载所有它们。

# c# - 在 xp 上找不到文件

> ID：13019715
> 
> 赞同：6
> 
> 时间：2012-10-22T20:55:54.613
> 
> 标签：c#, winforms, file, text, text-files

我的应用程序附带的文本文件有一个奇怪的问题。

该文件包含一堆站点，当程序启动时，它将站点加载到一个数组中。

在 Windows 7 上，当我启动应用程序时，我没有收到任何错误。然而，在 XP 上我得到`c:\Document and setting\I\Application Data\fourmlinks.txt file not found.` 了奇怪的部分是我用它制作了一个包含内容的文本文件，并将它放在应用程序文件夹中。

这就是我在代码中调用的方式：

```
string path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\fourmlinks.txt"; 
```

我的问题是我无法创建新文件，因为它包含应用程序需要和正在使用的基本数据。

首次启动后，用户可以根据需要编辑文件。

我不确定为什么会发生这种情况，但这只发生在 Windows XP 上。

我怎么解决这个问题？

# 编辑

* * *

keyboardP 建议检查正在运行的窗口，然后通过它更改路径。所以我想出了这个代码：

```
 System.OperatingSystem osInfo = System.Environment.OSVersion;
            if (osInfo.Platform == PlatformID.Win32NT)
                path = Environment.SpecialFolder.LocalApplicationData + "\\fourmlinks.txt";
            else
                path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\fourmlinks.txt"; 
```

问题是即使在 Windows 7 上我也得到了真实，当我需要得到错误时。有没有办法确保我在 XP 或 Windows 7 上以不同的方式运行？

* * *

# 编辑 2

* * *

使用操作系统的检查，我现在可以确定我是 Windows 7 或 Windows XP。因此，代码在 Windows 7 上再次运行 find 但在 Windows XP 上我收到不同的错误消息：

![在此处输入图像描述](../Images/a43773f5687f5ebc42dd0f5992d8ffd1.png)

我真的不知道我在程序中添加的路径如何成为错误所说的我正在请求的路径。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:48:12.120

要检测用户正在运行的当前操作系统，您可以使用`System.OperatingSystem`由映射到以下 Windows 版本的三个组件组成的操作系统：

```
+-----------------------------------------------------------------------------------------------------------------------------------------+
|           |   Windows    |   Windows    |   Windows    |Windows NT| Windows | Windows | Windows | Windows | Windows | Windows | Windows |
|           |     95       |      98      |     Me       |    4.0   |  2000   |   XP    |  2003   |  Vista  |  2008   |    7    | 2008 R2 |
+-----------------------------------------------------------------------------------------------------------------------------------------+
|PlatformID | Win32Windows | Win32Windows | Win32Windows | Win32NT  | Win32NT | Win32NT | Win32NT | Win32NT | Win32NT | Win32NT | Win32NT |
+-----------------------------------------------------------------------------------------------------------------------------------------+
|Major      |              |              |              |          |         |         |         |         |         |         |         |
| version   |      4       |      4       |      4       |    4     |    5    |    5    |    5    |    6    |    6    |    6    |    6    |
+-----------------------------------------------------------------------------------------------------------------------------------------+
|Minor      |              |              |              |          |         |         |         |         |         |         |         |
| version   |      0       |     10       |     90       |    0     |    0    |    1    |    2    |    0    |    0    |    1    |    1    |
+-----------------------------------------------------------------------------------------------------------------------------------------+ 
```

知道`Major`and`Minor`版本就足够了，因为`PlatFormID`is `Win32Windows`or`Win32NT`

下面的例子展示了如何使用`OperatingSystem`来检测用户当前的操作系统。

```
int getOSArchitecture() 
{
    //Only required if you would like to show the user's processor architecture (32-bit / 64-bit)
    string pa = Environment.GetEnvironmentVariable("PROCESSOR_ARCHITECTURE");
    return ((String.IsNullOrEmpty(pa) || String.Compare(pa, 0, "x86", 0, 3, true) == 0) ? 32 : 64);
}

string getOSInfo()
{
    //Get Operating system information.
    OperatingSystem os = Environment.OSVersion;
    //Get version information about the os.
    Version vs = os.Version;

    //Variable to hold our return value
    string operatingSystem = "";

    if (os.Platform == PlatformID.Win32Windows)
    {
        //This is a pre-NT version of Windows
        switch (vs.Minor)
        {
            case 0:
                operatingSystem = "95";
                break;
            case 10:
                if (vs.Revision.ToString() == "2222A")
                    operatingSystem = "98SE";
                else
                    operatingSystem = "98";
                break;
            case 90:
                operatingSystem = "Me";
                break;
            default:
                break;
        }
    }
    else if (os.Platform == PlatformID.Win32NT)
    {
        switch (vs.Major)
        {
            case 3:
                operatingSystem = "NT 3.51";
                break;
            case 4:
                operatingSystem = "NT 4.0";
                break;
            case 5:
                if (vs.Minor == 0)
                    operatingSystem = "2000";
                else
                    operatingSystem = "XP";
                break;
            case 6:
                if (vs.Minor == 0)
                    operatingSystem = "Vista";
                else
                    operatingSystem = "7";
                break;
            default:
                break;
        }
    }
    //Make sure we actually got something in our OS check
    //We don't want to just return " Service Pack 2" or " 32-bit"
    //That information is useless without the OS version.
    if (operatingSystem != "")
    {
        //Got something.  Let's prepend "Windows" and get more info.
        operatingSystem = "Windows " + operatingSystem;
        //See if there's a service pack installed.
        if (os.ServicePack != "")
        {
            //Append it to the OS name.  i.e. "Windows XP Service Pack 3"
            operatingSystem += " " + os.ServicePack;
        }
        //Append the OS architecture.  i.e. "Windows XP Service Pack 3 32-bit"
        operatingSystem += " " + getOSArchitecture().ToString() + "-bit"; //Remove this if you do not want to show the processor architecture
    }
    //Return the information we've gathered.
    return operatingSystem;
} 
```

使用上面发布的示例，例如，`Windows XP Service Pack 3`如果用户正在运行 Windows XP Service Pack 3，如果您调用`getOSInfo();`

* * *

![运行 Windows 7 Service Pack 1 32 位](../Images/6d4a0c30a775551d2d5e661e30fe869e.png)

* * *

谢谢
我希望这会有所帮助:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:03:23.060

在 XP 上，尝试使用`Environment.SpecialFolder.LocalApplicationData`.

从评论编辑

```
path = Environment.GetFolderPath(Environment.SpecialFolder.ApplicationData) + "\\fourmlinks.txt";
System.OperatingSystem osInfo = System.Environment.OSVersion;
if (osInfo.Platform == PlatformID.Win32NT)
{
   if(osInfo.Version.Major == 5 && osInfo.Version.Minor != 0) 
   {
      //running XP
      path = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData) + "\\fourmlinks.txt"; 
   } 
} 
```

# python - 使用 pandas 获取开始日期和结束日期之间的工作日

> ID：13019719
> 
> 赞同：43
> 
> 时间：2012-10-22T20:56:13.003
> 
> 标签：python, pandas

我正在使用熊猫，我想知道使用熊猫在开始日期和结束日期之间获取工作日的最简单方法是什么？

有很多关于在 Python 中执行此操作的帖子（[例如](https://stackoverflow.com/questions/2224742/business-days-in-python)），但我有兴趣直接使用 pandas，因为我认为 pandas 可能很容易处理这个问题。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2015-08-09T18:55:16.710

您也可以`date_range`用于此目的。

```
In [3]: pd.date_range('2011-01-05', '2011-01-09', freq=BDay())

Out[3]: DatetimeIndex(['2011-01-05', '2011-01-06', '2011-01-07'], dtype='datetime64[ns]', freq='B', tz=None) 
```

**编辑**

或者更简单

```
In [7]: pd.bdate_range('2011-01-05', '2011-01-09')

Out[7]: DatetimeIndex(['2011-01-05', '2011-01-06', '2011-01-07'], dtype='datetime64[ns]', freq='B', tz=None) 
```

请注意，开始日期和结束日期都包含在内。来源： http: [//pandas.pydata.org/pandas-docs/stable/generated/pandas.bdate_range.html](http://pandas.pydata.org/pandas-docs/stable/generated/pandas.bdate_range.html)

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-11-02T15:08:18.013

从 v0.14 开始，您可以使用假日日历。

```
从 pandas.tseries.holiday 导入 USFederalHolidayCalendar
从 pandas.tseries.offsets 导入 CustomBusinessDay

us_bd = CustomBusinessDay(日历=USFederalHolidayCalendar())
打印 pd.DatetimeIndex(start='2010-01-01',end='2010-01-15', freq=us_bd)

```

返回：

```
DatetimeIndex(['2010-01-04', '2010-01-05', '2010-01-06', '2010-01-07',
               '2010-01-08', '2010-01-11', '2010-01-12', '2010-01-13',
               '2010-01-14', '2010-01-15'],
              dtype='datetime64[ns]'，频率='C')

```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2015-10-08T09:23:03.253

使用 bdate_range 或 BDay() 时要小心 - 名称可能会误导您认为这是一个工作日范围，而实际上它只是日历日，去掉了周末（即它不考虑假期） .

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-10-22T21:16:33.590

用于`BDay()`获取范围内的工作日。

```
from pandas.tseries.offsets import *

In [185]: s
Out[185]: 
2011-01-01   -0.011629
2011-01-02   -0.089666
2011-01-03   -1.314430
2011-01-04   -1.867307
2011-01-05    0.779609
2011-01-06    0.588950
2011-01-07   -2.505803
2011-01-08    0.800262
2011-01-09    0.376406
2011-01-10   -0.469988
Freq: D

In [186]: s.asfreq(BDay())
Out[186]: 
2011-01-03   -1.314430
2011-01-04   -1.867307
2011-01-05    0.779609
2011-01-06    0.588950
2011-01-07   -2.505803
2011-01-10   -0.469988
Freq: B 
```

切片：

```
In [187]: x=datetime(2011, 1, 5)

In [188]: y=datetime(2011, 1, 9)

In [189]: s.ix[x:y]
Out[189]: 
2011-01-05    0.779609
2011-01-06    0.588950
2011-01-07   -2.505803
2011-01-08    0.800262
2011-01-09    0.376406
Freq: D

In [190]: s.ix[x:y].asfreq(BDay())
Out[190]: 
2011-01-05    0.779609
2011-01-06    0.588950
2011-01-07   -2.505803
Freq: B 
```

和`count()`

```
In [191]: s.ix[x:y].asfreq(BDay()).count()
Out[191]: 3 
```

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2018-06-21T18:06:05.907

在[这个答案](https://stackoverflow.com/a/36525605/1332656)和[xone 之上](https://github.com/alpha-xone/xone)，我们可以编写一个简短的函数来返回[美国交易所的交易日](https://www.nyse.com/markets/hours-calendars)：

```
from xone import calendar

def business_dates(start, end):
    us_cal = calendar.USTradingCalendar()
    kw = dict(start=start, end=end)
    return pd.bdate_range(**kw).drop(us_cal.holidays(**kw))

In [1]: business_dates(start='2018-12-20', end='2018-12-31')
Out[1]: DatetimeIndex(['2018-12-20', '2018-12-21', '2018-12-24', '2018-12-26',
                       '2018-12-27', '2018-12-28', '2018-12-31'],
                      dtype='datetime64[ns]', freq=None) 
```

*2019 年 3 月编辑：*

替换`DatetimeIndex`为`bdate_range`0.24.0[`pandas`更新](https://pandas.pydata.org/pandas-docs/stable/whatsnew/v0.24.0.html)：

*   通过传递范围参数 start、end 和 period 创建 TimedeltaIndex、DatetimeIndex 或 PeriodIndex 已弃用，取而代之的是 timedelta_range()、date_range() 或 period_range()

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-01-06T05:23:17.730

我们可以使用[`pd.bdate_range`](https://pandas.pydata.org/pandas-docs/stable/reference/api/pandas.bdate_range.html).

例子：

```
In [1]: pd.bdate_range("2020-01-01", "2020-01-06")
Out[1]: DatetimeIndex(['2020-01-01', '2020-01-02', '2020-01-03', '2020-01-06'], dtype='datetime64[ns]', freq='B') 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-16T05:58:25.410

如果您也在周六工作或有一个不寻常的工作周，您还希望排除您所在国家/地区的公共假期。

```
import pandas as pd  
from datetime import datetime

weekmask = 'Sun Mon Tue Wed Thu'
exclude = [pd.datetime(2020, 5, 1),
           pd.datetime(2020, 5, 2),
           pd.datetime(2020, 5, 3)]

pd.bdate_range('2020/4/30','2020/5/26',
               freq='C',
               weekmask = weekmask,
               holidays=exclude ) 
```

# c# - 模型传递问题

> ID：13019728
> 
> 赞同：0
> 
> 时间：2012-10-22T20:56:34.747
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-2

所以我有一个带有默认 MembershipUser 作为属性的 UserDisplayModel，我试图将整个视图模型传递给控制器​​，但由于某种原因，MembershipUser 属性和整个模型可能会丢失。

我发现了这一点，因为`No parameterless constructor defined for this object`除非我在显示模型构造函数中手动实例化 MembershipUser，否则会出现错误）。这意味着第二个操作（发布在下面）试图创建一个新的 UserDisplayModel 和错误，因为 MembershipUser 没有默认构造函数。

这是我的代码：

模型

```
public class UserDisplayModel
{
    public MembershipUser User { get; set; }

    public UserDisplayModel(string id)
    {
        this.User = Membership.GetUser(id);
    }
} 
```

行动

```
public ActionResult Delete(string id)
{
    UserDisplayModel model = new UserDisplayModel(id);

    return PartialView("Delete", model);
} 
```

```
[HttpPost]
public ActionResult Delete(UserDisplayModel model)
{
    Membership.DeleteUser(model.User.UserName);
} 
```

看法

```
<%@ Control Language="C#" Inherits="System.Web.Mvc.ViewUserControl<MvcWebRole1.Models.UserDisplayModel>" %>

<p>Are you sure you want to delete the following user?</p>

<h2><%: Model.User.UserName%></h2>

<% using (Html.BeginForm()) { %>
    <p>
        <%: Html.HiddenFor(model => model.User.UserName)%>
        <input type="submit" value="Delete" class="small alert button" />
        <input type="button" value="Cancel" class="small secondary button cancel-action" />
    </p>
<% } %> 
```

是否有可能进行这项工作，或者 asp.net 只是不喜欢在模型中包含模型？还是我只是错过了一些愚蠢的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:01:28.353

看起来您真正需要的只是用户名。所以我会将模型更改为

```
public class UserDisplayModel
{
    public string Username { get; set; }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:08:01.470

错误：

> 没有为此对象定义无参数构造函数

是由

```
[HttpPost]
public ActionResult Delete(UserDisplayModel model)
{
    Membership.DeleteUser(model.User.UserName);
} 
```

因为`UserDisplayModel`没有用于 MVC 实例化的无参数构造函数。它只有构造函数：

```
public UserDisplayModel(string id)
{
    this.User = Membership.GetUser(id);
} 
```

我可能也会改变方法看起来像：

```
[HttpPost]
public ActionResult Delete(string userName)
{
    Membership.DeleteUser(userName);
} 
```

或者是更多的 MVC

```
public class DeleteUserModel
{
    public DeleteUser User { get; set; }

    public class DeleteUser
    {
        public string Username { get; set; }
    }
}

[HttpPost]
public ActionResult Delete(DeleteUserModel model)
{
    Membership.DeleteUser(model.User.UserName);
} 
```

# icalendar - 打印重复事件的 iCal 格式

> ID：13019740
> 
> 赞同：3
> 
> 时间：2012-10-22T20:57:29.380
> 
> 标签：icalendar, rfc2445, rfc5545

我在这里阅读了这个答案，它解释了如何输出计划项目的 ical 文件：

[如何使用 PHP 动态发布 ical 文件以供 Google 日历读取？](https://stackoverflow.com/questions/1463480/how-can-i-use-php-to-dynamically-publish-an-ical-file-to-be-read-by-google-calen)

我的问题是重复事件的 ical 格式是什么？假设我想在每周一上午 10 点安排一次团队会议。重复时间表的 ical 格式是什么？还是我需要在未来打印 X 个事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T04:31:58.880

ical 格式由 RFC5545 定义：[https ://www.rfc-editor.org/rfc/rfc5545](https://www.rfc-editor.org/rfc/rfc5545)

在您的情况下，您只需要定义一个事件并使用 FREQ 属性（FREQ=WEEKLY）和 COUNT 属性（COUNT=X）

RRULE:FREQ=每周;BYDAY=MO;COUNT=X

有关详细信息，请参阅[https://www.rfc-editor.org/rfc/rfc5545#section-3.3.10 。](https://www.rfc-editor.org/rfc/rfc5545#section-3.3.10)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-23T19:21:00.743

> 假设我想在每周一上午 10 点安排一次团队会议。重复时间表的 ical 格式是什么？

```
 DTSTART:20121022T100000
 RRULE:FREQ=WEEKLY;BYDAY=MO 
```

指定星期一上午 10 点的开始日期，并且 RRULE 部分指定它每周重复一次。

您需要将其放入 RFC 2445 中指定的 VEVENT 中。

由于未指定时区，Google 将假定您上传此活动的日历的主要时区。

您无需指定计数或终止日期。Google 日历对您可以专门处理的重复事件的实例数量有一些内部限制，但除非您的团队几个世纪以来定期开会，否则您永远不应该遇到它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-23T04:44:52.077

您可以使用`RRULE`和`FREQ`属性来完成此操作，如[RFC5545](https://www.rfc-editor.org/rfc/rfc5545#section-3.8.5.3)中所述。在您的情况下，它看起来像这样：

```
DTSTART:20121029T100000Z
RRULE:FREQ=WEEKLY;BYDAY=MO;UNTIL=20131028T110000Z 
```

您还可以设置其他方式来限制发生次数（如重复事件的数量）或让它永远重复。然而，如果你问我，设置一个合理的限制而不是无限重复对你的用户来说更礼貌。

# apache - 三级域

> ID：13019743
> 
> 赞同：2
> 
> 时间：2012-10-22T20:57:36.723
> 
> 标签：apache, dns, apache2.2

我正在使用 Virtualmin API 使用 php 创建一系列第三级域（直到这里一切正常）。我需要一个解决方案来为每个子域提供相应的子目录，即
sub1.domain.com 位于 C:\xampp\htdocs\domain_com\subsites\sub1;
sub2.domain.com => C:\xampp\htdocs\domain_com\subsites\sub2。
我也应该使用 Virtualmin API 来执行此操作，但是用户可以看到他被重定向到的子目录，这很糟糕。子域应该在子目录中转换，在 httpd.conf 中有一个通用的解决方案，以不连续修改和重新启动 Apache。同时，显示给用户的 URL 必须保持为“sub1.domain.com/whatever_dir/user_file.php”。我尝试使用 RewriteRule 来获取它，如下所示：

```
<VirtualHost *:80>
    ServerName www.domain.com
    ServeAlias *.domain.com
    DocumentRoot C:/xampp/htdoc/domain_com/
    Option +FollowSymLinks
    RewriteEngine On
    RewriteCond %{HTTP_HOST} !^www.domain.com
    RewriteCond %{HTTP_HOST} ^(w*).domain.com
    RewriteRule ^$ subsites/%1%{REQUEST_URI}
</VirtualHost> 
```

使用此规则，我成功调用了“%1”目录中的所有文件。但是，如果这些文件中的任何一个调用图片或任何其他资源，则该资源的路径始终指向文档根目录，而不是调用文件。所以文件被正确调用但资源路径错误！！！

Alias、AliasMatch 也是如此。我开始意识到 Alias 和 RewriteRules 不是实现此目标的正确方法，但我不知道其他任何方法。

感谢关注。我希望有人有一个建议。伊曼纽尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:06:17.793

凯文，

您应该查看[http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html](http://httpd.apache.org/docs/2.2/mod/mod_vhost_alias.html)为您执行此操作。只要目录结构保持不变，您以后就不必对配置进行任何更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:10:30.940

J已经随便解决了自己的问题。RewriteRule 具有将请求重定向到其他地方的效果。每次执行此操作时，Apache 都会为它的新设备自动召回，这会导致内部服务器错误！– 对不起，我不知道如何使用这个博客。这是修复。

```
<VirtualHost :80>
  ServerName www.domain.it
  ServerAlias *.domain.it
  DocumentRoot "C:/xampp/htdocs/domain_com"
  <Directory "C:/xampp/htdocs/domain_com">
   Options FollowSymlinks
   RewriteEngine On
   RewriteCond %{HTTP_HOST} !^www.
   RewriteCond %{HTTP_HOST}%{REQUEST_URI} ^([0-9A-Za-z_-]+).domain.com(.*/?)([0-9A-Za-z-_.?&=%])$
   RewriteRule !^siti siti/%1/%2%3
  </Directory> 
```

通过这种方式，规则首先将前缀“siti/”添加到请求中，以及我需要的其他内容。当 Apache 再次打开路径时，它将新路径与 not "!" 匹配，以 "siti" 开头的 "^" 并停止它。事实上，它功能完美。

# javascript - indexedDB 读取不一致

> ID：13019745
> 
> 赞同：0
> 
> 时间：2012-10-22T20:57:43.980
> 
> 标签：javascript, html, indexeddb

我是第一次尝试 indexedDB，尝试按照我在 Internet 上找到的各种示例进行操作。它在某种程度上有效，但是当我读取数据库时，我得到的结果不一致。

数据库创建如下：

```
myapp.indexedDB.open = function() {
    var request = indexedDB.open('todos', "2");

    request.onblocked = function(e) {
        alert('Please close all other tabs with this site open so the database can be updated.');
    };

    request.onsuccess = function(e) {
        myapp.indexedDB.db = e.target.result;
        myapp.indexedDB.db.onversionchange = function(e) {
            myapp.indexedDB.db.close();
            alert('The database is being upgraded. Please reload.');
        };
        myapp.indexedDB.getAllTodoItems();
    };

    request.onupgradeneeded = function(e) {
        var db = e.target.result;

        if(!db.objectStoreNames.contains('todo')) {
            var store = e.currentTarget.result.createObjectStore(
                'todo',
                {keyPath: "timeStamp"}
            );
        }

        if(!db.objectStoreNames.contains('sites')) {
            var site_store = e.currentTarget.result.createObjectStore(
                'sites',
                {keyPath: 'id'}
            );
        }
    };
    request.onfailure = myapp.indexedDB.onerror;
}; 
```

待办事项商店来自我找到的一个示例。这是我遇到困难的网站商店。

我像这样阅读网站商店：

```
function update_sites() {
    $('#sites_table').ig_grid('delete_all_rows');
    var db = myapp.indexedDB.db;
    var trans = db.transaction(["sites"], "readwrite");
    var store = trans.objectStore('sites');

    var cursorRequest = store.openCursor();

    cursorRequest.onsuccess = function(e) {
        var result = e.target.result;
        if(!!result == false) return;

        render_site(result.value);
        console.log('rendered a site');
        result.continue();
    };

    cursorRequest.onerror = myapp.indexedDB.onerror;
}

function render_site(site) {
    $('#sites_table').ig_grid('add_row', [site.id,site.id,site.flag,site.site_code,site.site_name,site.owner_name,site.address,site.hive_capacity,site.hive_count,render_status(site.status_id)]);
} 
```

到目前为止，一切都很好。写入数据库的数据被正确读取和呈现。

当我更新数据库时出现问题。更新是这样完成的：

```
function sync_sites() {
    display_status('');
    var jqxhr = $.ajax({
        type:   "GET",
        url:    '/myapp.pl/REST/sites'
    })
    .fail(function(jqXHR, textStatus) {
        display_status(jqXHR.responseText);
    })
    .done(function(data, textStatus, jqXHR) {
        var sites = jQuery.parseJSON(data.data);
        for (var i = 0; i < sites.length; i++) {
            myapp.indexedDB.add_site(sites[i]);
        }
        alert('sync done');
    });
}

myapp.indexedDB.add_site = function(site) {
    var db = myapp.indexedDB.db;
    var trans = db.transaction(["sites"], "readwrite");
    var store = trans.objectStore('sites');
    var request = store.put(site);

    request.onsuccess = function(e) {
        // TODO: whatever is appropriate if the site is added successfully
    };

    request.onerror = function(e) {
        console.log(e.value);
    };
}; 
```

数据库的更新也成功了。

问题是在数据库更新开始后不久 - 就在显示“同步完成”警报之后，update_sites 函数清空显示的站点表并且不添加任何站点：就好像数据库是空的一样。然后，如果我继续重新加载站点显示，再过几秒钟（几次重新加载）后，几百到几千行将添加到站点表中，每行重复几次。通常，站点存储/表中实际上有 216 条记录。最终，大约在最后一次数据库更新（放置）完成（我认为）显示更新再次正常工作的时候。

显示更新 (update_sites) 大部分时间都能正常工作 - 如果我在 sync_sites 运行后的几秒钟内运行它，它只会给出不正确的结果。

有两种错误模式：第一种，没有从存储中读取数据，好像它是空的或游标匹配没有记录（从未成功）；并且在第二个中，在返回存储中的所有记录后，游标不会停止，它会一遍又一遍地循环遍历所有记录，直到最终在某个看似任意的点停止。

我在错误控制台中看不到任何错误，无论是 update_sites 正确运行还是给出不正确的结果，还是来自 sync_sites。事实上，当它运行时，错误控制台中根本没有错误或警告。

我已经用 sqlite3 检查了底层数据库，并且我可以看到数据库中没有重复的记录。object_data 中有 219 条记录：3 条与 todo 存储相关，216 条与站点存储相关。

FWIW，这是使用 Firefox 16.0.1。

难道我做错了什么？

是否有我可以启用的其他错误、警告、跟踪或诊断可能有助于查明错误原因？

有没有其他人看到过这种行为？

谢谢，伊恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T23:18:51.743

由于 IndexedAPI 的异步性质`alert('sync done');`不正确，因为 IDBRequest`onsuccess`处理程序并不意味着它已成功添加。只有`oncompeleted`IDBTransaction 的处理程序确保它已被添加并准备好查询记录。

此外，您应该使用单个事务来存储记录。`myapp.indexedDB.add_site`应该`myapp.indexedDB.add_sites(sites, callback)`让它循环并一次性放入记录。当`oncompeleted`它调用回调时。

编辑：添加 add_sites 功能。

```
myapp.indexedDB.add_sites = function(sites, callback) {
  var db = myapp.indexedDB.db;
  var trans = db.transaction(["sites"], "readwrite");
  trans.oncompleted = callback;
  var store = trans.objectStore('sites');

  var put = function(i) {
    var request = store.put(sites[i]);

    request.onsuccess = function(e) {
      i--;
      if (i >= 0) put(i);    
    };

    request.onerror = function(e) {
      console.log(e.value);
    };
  };

  put(sites.length - 1);
}; 
```

# c++ - 防病毒软件一直阻止我编译代码

> ID：13019750
> 
> 赞同：2
> 
> 时间：2012-10-22T20:58:08.443
> 
> 标签：c++, visual-c++

只是想知道，c++中什么样的编程错误会导致杀毒软件认为编译的exe文件是病毒？当我玩指针时似乎会发生这种情况。我真的在制造对我的计算机有害的东西，还是只是防病毒软件提供了误报并且可以安全地忽略？

主要的

```
#include "node.h"
#include <conio.h>

int main(){
    Node a(5);
    Node b(3);
    Node c(2);
    addSuccessor(&a,&b);
    addSuccessor(&a,&c);

    _getch();
return 0;
 } 
```

节点.h

```
 #include <ostream>
 #include <string>
 #include <sstream>
 #include <iostream>
 #include <vector>
 using namespace std;
 class Node{
     public:
         Node();
         Node(short s);
         ~Node();
         void setValue(short s);
         short getValue();
         vector<Node*> getSuccessors();
         friend ostream & operator <<(ostream &os, Node &n);
     private:
         short value;
         vector<Node*> successors;
 };
 void addSuccessor(Node* initial, Node* successor) 
```

节点.cpp

```
#include "node.h"
#include <string>

Node:: Node(){
    value = 0;
}
Node::~Node(){
}
Node:: Node(short s){
    value = s; 
}
void Node::setValue(short n){
    value = n;
}
short Node::getValue(){
    return value;
}
vector<Node*> Node::getSuccessors(){
    return successors;
}

void addSuccessor(Node* initial, Node* successor){
    initial->getSuccessors().push_back(successor);
}

ostream & operator <<(ostream &os, Node &n){
    os << "N:"<< n.getValue() << "\n";
    return os;
} 
```

# zeromq - ZeroMQ PUB/SUB - 为什么多个订阅者不能工作？

> ID：13019752
> 
> 赞同：8
> 
> 时间：2012-10-22T20:58:14.953
> 
> 标签：zeromq

我正在使用 ZeroMQ 来促进我需要的发布/订阅环境。我正在使用 Python（使用 EventLoop）在机器 A 上运行发布服务器，现在我有一个在机器 B 上以 C++ 运行的订阅者和在机器 C 上以 Python（使用 EventLoop）运行的第二个订阅者。

如果机器 B 在机器 C 之前订阅了机器 A，那么 B 会收到订阅的消息，而 C 不会。此外，如果我查看机器 A 上已建立的连接，则只存在机器 B 的连接，而不存在机器 C 的连接。如果机器 C 在 B 之前订阅了 A，那么情况正好相反。

这是我的发布者代码：

```
import zmq
from zmq.eventloop import ioloop, zmqstream

ioloop.install()

context   = zmq.Context(1)
socket    = context.socket(zmq.PUB)
publisher = zmqstream.ZMQStream(socket)
socket.bind("tcp://*:1337")

def publish():
  publisher.send_multipart(("heartbeat", "OHAI"))

ioloop.PeriodicCallback(publish, 5000).start()
ioloop.IOLoop.instance().start() 
```

这是我的 Python 订阅者代码：

```
import zmq
from zmq.eventloop import ioloop, zmqstream

ioloop.install()

context    = zmq.Context(1)
socket     = context.socket(zmq.SUB)
subscriber = zmqstream.ZMQStream(socket)
socket.setsockopt(zmq.SUBSCRIBE, "heartbeat")
socket.connect("tcp://pub.local:1337")

def subscription(message):
  print "Message Received: %s" % (message[1])

subscriber.on_recv(subscription)
ioloop.IOLoop.instance().start() 
```

为什么我的发布者不接受多个传入订阅者套接字？可能值得注意的是，多个订阅者在机器 A 上运行它们时工作正常，但我认为这不是防火墙问题，因为我在禁用防火墙的情况下测试了从 B 和 C 到 A 的订阅者连接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T17:16:51.373

感谢大家在原始帖子中提供的所有有用的评论。事实证明，这种行为是由于所使用的 ZeroMQ 版本不匹配造成的……这是我的疏忽。

# regex - PHP：使用正则表达式提取 preg_match() 函数

> ID：13019758
> 
> 赞同：0
> 
> 时间：2012-10-22T20:58:25.433
> 
> 标签：regex, preg-match

我想提取数字`3`并`2`使用`preg_match()`

```
[{"id":"3","value":"2"}] 
```

这些数字不会每次都相同，它会根据用户正在查看的女巫页面生成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T20:59:48.450

数据似乎是 JSON。因此，不要使用正则表达式，使用[`json_decode()`](http://php.net/json_decode).

```
print_r(json_decode($yourdata, true)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:56:34.203

您尝试提取的代码是 JSON。如果你想使用 preg_match，你可以使用 Ωmega- 的解决方案（我更正了一点'/'-我们不包括在内的斜线）：

```
$str = '[{"id":"3","value":"2"}]';
preg_match('/(\d+)\D+(\d+)/', $str, $json_object);
$id = $json_object[1];
$value = $json_object[2];
echo $id;
echo $value; 
```

如果解析 JSON 是您所追求的：

```
$string = '{"id":"3","value":"2"}';
$json_dec = json_decode($string, true);
$id = $json_dec['id'];
$value = $json_dec['value'];
echo $id;
echo $value; 
```

希望这可以帮助。

# jquery - 如何使用 jQuery/AJAX 重定向到另一个 php 脚本

> ID：13019763
> 
> 赞同：0
> 
> 时间：2012-10-22T20:58:48.077
> 
> 标签：jquery, ajax

我想使用 Ajax/jquery 能够重定向到另一个 php 脚本以在脚本中执行命令。

我在下面有一个 jquery/ajax 代码函数，我的问题是 jquery.ajax 函数是否正确以便重定向到“cancelimage.php”脚本？

```
$(imageuploadform).find(".imageCancel").on("click", function(event) {
    $('.upload_target_image').get(0).contentwindow
    $("iframe[name='upload_target_image']").attr("src", "javascript:'<html></html>'");
    jQuery.ajax("cancelimage.php");
    return stopImageUpload(2);
});​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T00:05:31.703

我不确定这是您想要的，但是对于完整的重定向

```
 Window.location.href='cancelimage.php' 
```

但是，如果您从代码中寻找 ajax 成功/失败类型响应

```
 $.ajax{(
 url:'cancelimage.php',
 data: 'yourData', //either serialized from form submit or created on the fly
 Success: function(yourResponse){ //if Conditions met
 },
 Error: function(request){ alert(request.responseText);}
 )}; 
```

然后更新您的 cancelimage.php 脚本以返回布尔值 true/false、使用 json_encode 的 JSON 对象或任何你喜欢的东西

# forms - 在 Symfony2 中一次验证多个复选框的正确方法是什么（需要一个）？

> ID：13019764
> 
> 赞同：1
> 
> 时间：2012-10-22T20:59:05.143
> 
> 标签：forms, symfony, checkbox, required

假设我们有一个 Symfony2 表单，其中包含 3 个复选框（A、B、C），我们希望用户至少勾选一个复选框以验证表单，所以任何组合（[A]、[B]、[C] , [A,B], [A,C], [B,C] ,[A,B,C]) 将返回 true，并且没有选择 [] 返回 false。

在 Doctrine 对象上使用 Symfony 验证器来实现这一目标的正确方法是什么？

**编辑**：
每个复选框都使用 Doctrine 映射到数据库中它自己的列`@ORM\Column(type="boolean")`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T22:34:09.840

如果您正确使用选项列表的选择字段类型，则可以使用`ChoiceValidator`：

```
@Assert\Choice(min=1, minMessage = "You must choose at least one option.") 
```

从[文档](http://symfony.com/doc/2.0/reference/constraints/Choice.html#min)：

> 如果 multiple 选项为真，那么您可以使用 min 选项强制选择至少 XX 个值。例如，如果 min 为 3，但输入数组仅包含 2 个有效项，则验证将失败。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T23:45:55.170

问题解决了。

基于[Symfony2 类约束验证器文档](http://symfony.com/doc/2.0/cookbook/validation/custom_constraint.html#class-constraint-validator)和关于[将验证子路径设置为 UPGRADE-2.1.md 的更改的添加信息](https://github.com/richardmiller/symfony/commit/60d9aff29aa2490121e6c75e3bd9a9aec02a8b77#L0R289)

在我的实体类中，我添加了：

```
class Message
{

  // ...

  // check if user selected at least one network to publish the message
  public function isNetworkSelected(ExecutionContext $context)
  {
    if (!$this->network_twitter && !$this->network_facebook && !$this->network_googleplus)
    {
      $context->addViolationAtSubPath('network_facebook', 'Please select at least one network', array(), null);
    }
  }

  // ...

} 
```

在`validation.yml`：

```
MY\MessageBundle\Entity\Message
    constraints:
        - Callback:
            methods:   [isNetworkSelected] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:11:55.587

你有按钮控制吗？如果是，则在单击事件上，检查是否有选择，如果是，则返回 true，否则返回 false。

# svn - SVN 分支合并

> ID：13019765
> 
> 赞同：0
> 
> 时间：2012-10-22T20:59:11.017
> 
> 标签：svn, merge, tree, branch, conflict

我有一个关于在 Subversion 中合并的问题。所以我有一个树干，然后是来自树干的两个分支。所以假设我有一个主干，然后是从主干创建的分支 A，然后是从主干创建的分支 B。

假设我对 B 进行了更改，然后对主干进行了更改，然后将主干更改合并到 B 并检查到分支 B。我现在想合并到分支 A，而不是主干。是否可以将分支 B 合并到分支 A 中？还是我必须先将分支 B 合并到主干，然后再合并到分支 A？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:04:57.367

你可以合并任何你想要的分支

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:05:21.180

您可以在 SVN 中单独合并修订。所以是的，只需选择您想从 B 合并到 A 的修订，它应该可以正常工作。如果 A 中缺少 B 中存在的文件并且您尚未合并它们的添加，那么您可能会遇到树冲突。您可以通过在最初添加到 B 的位置合并丢失的文件来清除这些文件。

# java - 在需要参数的新线程中调用 class.method

> ID：13019773
> 
> 赞同：0
> 
> 时间：2012-10-22T20:59:44.547
> 
> 标签：java, multithreading

好的，现在我基本上有这段代码：

```
class a {

public void ab() {
    b thread = new b();
     thread.bb(this);
    }
}

class b {

    public void bb(a _a) {
     //execute code here in new thread so ab can continue running
    }
} 
```

但是，这不会在新线程中打开它，是的，我确实对此进行了研究，我发现的所有解决方案都没有留下任何选项将参数（this）发送到 bb 方法

如何在需要参数的新线程中调用 class.method？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:06:32.630

问题是“如何在需要参数的新线程中调用 class.method？”

答案是“你不能”......但是，这是一种解决方法：使用带有构造函数的实例来定义执行的“上下文”。

```
class MyThread extends Thread {
   MyThread( A a ){
      this.a = a;
   }
   @Override public void run() {
      ... use this.a; // a was the "parameter"
   }
   private A a;
}

MyThread myThread = new MyThread( aValue );
myThread.start(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:06:51.570

要启动一个线程，你必须有一个 的实例`java.lang.Thread`，但它`b`不是。您可以扩展线程来实现这一点。

```
class b extends Thread { 
```

无论您在其`run()`方法中放置什么，线程都会异步运行，您可以从其原始（空）实现中覆盖它。

```
class b extends Thread {

    @Override
    public void run() {
    }
} 
```

但是，这不允许您传递`a`. 您最好的选择是`a`在 的构造函数中将 的实例作为实例变量`b`。

```
class b extends Thread {

    private final a _a;

    public b(a _a) {
        this._a = _a;
    }

    @Override
    public void run() {
        //now you can use _a here
    }
} 
```

最后，要异步运行线程，您不会调用新实现的`run()`方法，而是调用`Thread#start()`，它会`run()`在新线程中调用该方法。

```
class a {

    public void ab() {
        b thread = new b(this);
        thread.start();
    }
} 
```

作为旁注，标准 Java 约定是以大写字母开头的类名，因此您应该重命名`a`为`A`等等。然而，就编译或执行而言，这不会产生任何影响。

# c++ - 如何通过引用将存储在列表中的结构成员传递给函数？

> ID：13019774
> 
> 赞同：0
> 
> 时间：2012-10-22T20:59:45.247
> 
> 标签：c++, list, function, struct

我有一个用结构填充 STL 链表的程序，我试图从列表上的一个节点（我目前通过迭代器使用的节点）传递结构成员。我想要完成的一件事是计算运行平均值的函数。我不想将计数和总数存储在结构中，然后在输出时计算平均值，而是将计数和平均值存储在结构中，从而在重新计算平均值后丢弃我的数量值。我的结构如下所示：

```
struct mystruct 
{
    string item;
    long avg;
    short count;
} data; 
```

这些结构存储在一个带有迭代器的列表中`it`，它允许我在列表中移动。如果我遍历了列表并且`it`等于我想要计算平均值的数据的节点，这是否是调用我的平均函数的正确方法？

```
// prior to running the code below, the `count` and `avg` members for the 
// struct at iterator location `it` are both 1 and 100 respectively

long qty = 50;
calc_average(it->count, it->avg, qty);

cout << "The current count is " << it->count << endl; 
  // Outputs 'The current count is 2'
cout << "The current average is " << it->avg << endl; 
  // Outputs 'The current average is 75'

void calc_average(short &count, long &avg, long quant)
{
    avg = ( (avg * count) + quant ) / (count + 1);
    count++;
} 
```

这看起来正确吗？我正在尝试使用 STL 列表来实现这一点，但它似乎比仅仅实现我自己的链表类更令人困惑。我想我只是对结构以及迭代器的实际工作方式以及实际传递的内容/方式感到困惑。编码对我来说仍然相当新，所以这是一个学习过程......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:05:45.120

假设这`X`是列表中对象的类型，那么您可以执行以下操作：

```
void DoSomething(X& object) {
  object.count, object.avg;
}
void DoSomethingElse(int& count, int& average) {
  ...
}

int main() {
   ...
   for(std::list<X>::iterator it=myList.begin(), end=myList.end(); it != end; ++it) {
     DoSomething(*it); // how I'd do it
     DoSomethingElse(it->count, it->avg); // Equally valid way that you did it
   }
   ...
} 
```

只记得：

*   `container.begin()`是指向第一个元素的指针
*   `container.end()`是指向最后一个元素的指针
*   `*it`是对指向元素的引用
*   `it != container.end()`是你如何判断你是否在最后
*   `it->x`是指向元素的成员
*   从容器中移除一个对象可能会使未完成的迭代器失效，这取决于几个因素。
*   `++it`可能比`it++`

* * *

**编辑**：OP问：

> > 我不是遍历列表并在每个节点上运行 calc_average，而是遍历列表以查找特定的项目值。一旦找到感兴趣的节点，我就会在该特定节点上调用 calc_average 函数。我只是不需要for循环。相反，我会到达我想要的迭代器，并通过 *it 将其传递给 void DoSomething ？

我想你现在明白它是如何工作的了。您将有一些代码来搜索指示的节点，然后有一些其他代码来调用您的函数：

```
 std::list<X>::iterator it, end;
   for(it=myList.begin(), end=myList.end(); it != end; ++it) {
     // Look for the special node:
     if( it->magicValue == 42 ) {
       // We found it!
       break;
     }
   }

    // Either it is equal to end (boo!) or it points to the special node (yay!)
   if( it == end ) {
      std::cerr << "Could not find special node!\n";
   }
   if( it != end ) {
      DoSomething(*it);
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:10:24.993

将迭代器视为指向列表中元素的指针。因此，与其让`calc_average`函数作用于个人成员，`mystruct`不如让它引用一个`mystruct`对象并用它做一些事情。

例如：

```
void do_work( mystruct& s )
{
  ++s.count;
}

std::list<mystruct> mylist;

// populate list

std::for_each( mylist.begin(), mylist.end(), do_work ); 
```

您还可以使用基于范围的`for`循环来实现相同的效果

```
for( auto& elem : mylist ) {
  do_work( elem );
} 
```

我会将`calc_average`函数重写为

```
void calc_average( mystruct& s, long quant )
{
    s.avg = ( (s.avg * s.count) + quant ) / (s.count + 1);
    s.count++;
} 
```

将它与基于范围的`for`循环一起使用是微不足道的，但要与它一起使用，`std::for_each`您必须使用`std::bind`绑定`quant`参数。

```
std::for_each( mylist.begin(), mylist.end(), 
  std::bind( calc_average, std::placeholders::_1, qty ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:13:38.223

Yes, it all seems correct to me. You can think of iterators (especially iterators of standard containers) as just pointers, though in practice they're actually classes that look like pointers. Still, you can think of them as pointers.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-14T23:03:43.527

我目前正在处理动态内容，我发现我有一个 SPRITE 结构 std::list characters_spr; 我通过 SPRITE 字符声明一个字符，然后我使用

```
characters_spr.push_back(character) 
```

然后我使用 for 循环遍历列表

```
for(SPRITE &character : characters_spr){
   somefunction(character, ....);
} 
```

在 somefunction 我有 somefunction(SPRITE &spr, ....................)

当调用 somefunction 时，它会更新列表中字符的字符数据。

# ajax - 在 MVC 4 中使用 $.ajax 发出 AJAX 请求

> ID：13019778
> 
> 赞同：15
> 
> 时间：2012-10-22T20:59:58.450
> 
> 标签：ajax, asp.net-mvc, asp.net-mvc-4, razor

我正在尝试在带有 Razor 的 MVC 4 中使用 $.ajax 发出 AJAX 请求。我不确定如何实现它。

使用[这个视频](http://www.youtube.com/watch?v=gLiWQkqUoVM)，我能够成功地进行返回数据的链接驱动调用，但我似乎无法从 jquery 函数内部做同样的事情。我似乎找不到任何有关如何执行此操作的基本示例。这就是我正在使用的：

**家庭控制器.cs**

```
 public string test(){
             return "It works";
        } 
```

**查看.cshtml**

```
function inventory(dealerID) {
    $.ajax({
        url: '@Url.Action("HomeController","test")',
        data: {dealerID: dealerID},
        type: 'POST',
        success: function(data) {
            process(data);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-10-22T21:01:52.943

你只需要把它变成一个`ActionResult`. 此外，如果您使用的是 Ajax POST，则需要使用该`HttpPost`属性标记该操作。试试这个：

```
[HttpPost]
public ActionResult test(string dealerID)
{
    return Content("It works");
} 
```

**编辑**实际上，语法还有一些其他问题。

1.  `Url.Action`控制器/动作参数的顺序错误——应该首先是“ActionName”，然后是“ControllerName”
2.  对于`Url.Action`，如果控制器类是“HomeController”，那么你只需要“Home”
3.  JQuery 选项语法错误——应该是`success: function(data) {}`.

* * *

```
$.ajax({
    url: '@Url.Action("test", "Home")',
    data: {dealerID: dealerID},
    type: 'POST',
    success: function(data) {
        alert(data);
    }
}); 
```

# java - WebFilter urlPatterns 被忽略

> ID：13019779
> 
> 赞同：2
> 
> 时间：2012-10-22T21:00:00.707
> 
> 标签：java, jsf, servlet-filters, url-pattern

尽管我似乎有它们的“确切”副本，但我已经阅读了许多示例，因此我无法弄清楚为什么当我导航到`/login`而不是`/restricted/*`. 我已经尝试过注释（如下例所示）和 XML 来定义 WebFilter。

**网络过滤器**

```
@WebFilter(filterName = "AuthenticationFilter", servletNames = { "Faces Servlet" }, urlPatterns = { "/restricted/*" } )
public class AuthenticationFilter implements Filter {
    @Inject
    private SessionManager sessionManager;

    @Override
    public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {
        System.out.println("Active AuthenticationFilter");
        if (sessionManager.getUser() == null) {
            ((HttpServletResponse) response).sendRedirect("/login");
        }
        else {
            chain.doFilter(request, response);
        }
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void destroy() {
    }
} 
```

**web.xml**

```
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>*.xhtml</url-pattern>
</servlet-mapping>   
<filter>
    <filter-name>Pretty Filter</filter-name>
    <filter-class>com.ocpsoft.pretty.PrettyFilter</filter-class>
    <async-supported>true</async-supported>
</filter>
<filter-mapping> 
    <filter-name>Pretty Filter</filter-name> 
    <url-pattern>/*</url-pattern> 
    <dispatcher>FORWARD</dispatcher> 
    <dispatcher>REQUEST</dispatcher> 
    <dispatcher>ERROR</dispatcher>
    <dispatcher>ASYNC</dispatcher>
</filter-mapping>
<filter>
    <filter-name>NoCacheFilter</filter-name>
    <filter-class>filter.NoCacheFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>NoCacheFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>
<filter>
    <filter-name>AuthenticationFilter</filter-name>
    <filter-class>filter.AuthenticationFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>AuthenticationFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/restricted/*</url-pattern>
</filter-mapping> 
```

**笔记**

即使在两个文件中都定义了过滤器，我可以保证我不会同时使用这两种表示法。但是，为了测试和审查，我确实将它们都发布了。

我是使用网络过滤器的新手，并且找不到太多关于使用多个过滤器的信息。但是我读过的内容，您可以使用多个，它们将按照您在`web.xml`.

**问题**

有没有人知道为什么我的过滤器也会在页面上执行`/login`？该应用程序在 Glassfish 3.1.2 上运行。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-22T21:08:07.857

`<filter-mapping>`匹配条件不包括在内，它们是排他性的。

使用以下映射

```
<filter-mapping>
    <filter-name>AuthenticationFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/restricted/*</url-pattern>
</filter-mapping> 
```

您基本上是在指示每当`FacesServlet`要调用**或**URL 模式匹配时都应调用过滤器`/restricted/*`。

这不是您似乎期望的“和”条件。只需删除`<servlet-name>`条目。

正确的`@WebFilter`声明将是

```
@WebFilter("/restricted/*") 
```

假设您不需要 a `<filter-mapping>`（例如，如果订单无关紧要）。

# objective-c - 如何将获取的对象保存到核心数据

> ID：13019783
> 
> 赞同：2
> 
> 时间：2012-10-22T21:00:25.470
> 
> 标签：objective-c, ios, core-data

我对一般编程和特别是客观的 c 核心数据非常陌生。我正在尝试从电子表格中读取数据并将其显示在表格视图中。我为保存对象而创建的数组是空的。我不确定如何将数据保存到数组中。另外，我收到警告说存储的值永远不会被读取。我将非常感谢您对此提供的任何帮助——在我无能为力的情况下。

这是我的代码：

```
DataStorage *parentTab;
parentTab = (DataStorage *)self.parentViewController;
_context = [parentTab context];

[self populateCollegeObjects];

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
NSEntityDescription *dataEntity = [NSEntityDescription entityForName:@"CollegeList"     inManagedObjectContext:_context];
[fetchRequest setEntity:dataEntity];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"collegeName" ascending:YES];

NSArray *sortDescriptors = [[NSArray alloc] initWithObjects:sortDescriptor, nil];

[fetchRequest setSortDescriptors:sortDescriptors ];
[sortDescriptors release];
[sortDescriptor release];

NSFetchedResultsController *controller = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:_context sectionNameKeyPath:nil cacheName:nil];
[fetchRequest release];

NSError *error;
[controller performFetch:&error];

for (int counter = 0; counter< [sortDescriptors count]; counter ++)
{
   if ([_collegeObjects count] == 0)
    {
        _collegeObjects = [[NSArray alloc] init];

        CollegeList *addCollege;

        //addCollege = [CollegeList initWithName:<#(NSString *)#> andURL:<#(NSString *)#> andDetail:<#(NSString *)#> forContext:<#(NSManagedObjectContext *)#>_context];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T22:34:29.527

我不太确定你的问题是什么。数组是否假设填充了核心数据中的实体？

也许你可以试试这个看看是否有帮助：

```
[fetchRequest setEntity:dataEntity];
NSArray *fetchedObjects = [_context executeFetchRequest: fetchRequest error: nil];

NSSortDescriptor *sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"collegeName" ascending:YES];

NSArray *sortDescriptors = @[sortDescriptor];
NSArray *sortedFetchedObjects = [fetchedObjects sortedArrayUsingDescriptors:sortDescriptors]; 
```

sortedFetchedObjects 应包含您要查找的已排序对象的数组。

# visual-studio-2010 - 如何在 Visual Studio 2010 中激活正则表达式搜索？

> ID：13019786
> 
> 赞同：0
> 
> 时间：2012-10-22T21:01:04.903
> 
> 标签：visual-studio-2010

This could be an embarassingly easy quesiton but If I search the following using the **find dialogue** of VS2010 with `\{.*?\}` I don't find anything even though it should find `{ return Stock ==5;}`

```
 internal bool IsUnableToBeSet //{}
    {
        get { return Stock == 5; }
    } 
```

if I search this in NotePad++ it works. What am I doing wrong in the VS2010 environment? (I've unchecked all options except for "Use Regular expressions" )

[EDIT]

I've just read the [coding horror site](http://www.codinghorror.com/blog/2006/07/the-visual-studio-ide-and-regular-expressions.html) for VS2005 but is this still the case and can I convert the expressions easily?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:09:16.353

VS2010 仍然有自定义的正则表达式语法，但是 VS2012 已经切换到标准语法。对于 VS2010，您想要的查询是

```
\{.@\} 
```

# sql - Using Oracle and C#, how can I pass in an array of numbers?

> ID：13019792
> 
> 赞同：1
> 
> 时间：2012-10-22T21:01:18.580
> 
> 标签：sql, oracle

This was my attempt:

`cmd.CommandType = CommandType.StoredProcedure;`

`cmd.Parameters.Add("i_num_array_price_list", OracleDbType.Decimal, myItems.Select(c => c.Price).ToArray(), ParameterDirection.Input);`

In oracle, the type is declared as:

`i_num_array_price_list IN num_array,`

and that is defined as:

`TYPE Num_Array IS VARRAY(10) OF NUMBER;`

I've tried it as OracleDbType decimal and array, neither worked. Decimal produces this error:

`Unable to cast object of type 'System.Decimal[]' to type 'System.IConvertible'.`

Any idea how I can get it to accept my array of decimal values?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:38:48.660

我找不到使用上述数组定义来完成这项工作的任何方法，因此我将其更改为关联数组并使用以下代码：

要定义我的数组： `TYPE assoc_array_number_t IS TABLE OF NUMBER INDEX BY BINARY_INTEGER;`

要定义我的变量： `i_num_array_price_list IN assoc_array_number_t`

和我的 C# 代码：

`cmd.Parameters.Add("i_num_array_price_list", OracleDbType.Decimal, myItems.Select(c => c.Price).ToArray(), ParameterDirection.Input).CollectionType = OracleCollectionType.PLSQLAssociativeArray;`

# jquery - 两个异步事件，第二个取决于第一个

> ID：13019793
> 
> 赞同：0
> 
> 时间：2012-10-22T21:01:20.640
> 
> 标签：jquery, ajax, events, asynchronous, event-handling

我正在`.on()`像这样的 jquery 处理程序上创建一些东西

```
$('#idhere').on('click', function(){
   //create a couple of divs with a class
   }); 
```

现在我还想在创建的 div 上添加一个事件，我尝试过：

```
$('.divcreated').bind('mouseover', function(){
   //do some magic
   }); 
```

由于某种原因，第二个事件永远不会被触发，可能是因为它们都是异步的。有什么想法可以触发第二个事件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:05:52.437

正如已经说过的，当您尝试注册 mouseover 事件时，不会创建新的 div。因此，您可以为一个 div 尝试这样的操作：

```
$('#idhere').on('click', function(){

   // creates the new div and assigns it to the $myNewDiv var
   var $myNewDiv = $( "<div></div>" );

   // register the event...
   $myNewDiv.on( "mouseover", function( event ) { ... }); 

   // add $myNewDiv to a container

}); 
```

我认为现在您将能够编写您的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:10:22.143

绑定时元素必须存在，因此您必须在创建元素后绑定它或使用委托 -

使用委托 jQuery 1.7+

```
$('body').on('mouseover', '.divcreated', function(){
       //do some magic
}); 
```

这会将事件处理程序绑定到`body`- 在您绑定事件时存在 - 已准备好 dom。不过，它更有效地绑定到更接近的静态父元素。

# jquery - Jquery UI 空白自动完成

> ID：13019797
> 
> 赞同：0
> 
> 时间：2012-10-22T21:01:32.950
> 
> 标签：jquery, jquery-ui

**内容：** 我想创建一个自动完成功能，管理员可以在其中从下拉列表中选择一个用户。
另外，我想在我的页面上显示所选用户的 ID。

**问题：**我遇到的问题是空白下拉自动完成字段，我不知道如何解决这个问题。ID也没有更新。

**编码**

Javascript：

```
// Values
var names = [
    {
    id: 1,
    name: 'Max'},
{
    id: 2,
    name: 'John'},
{
    id: 3,
    name: 'Gray'},
{
    id: 4,
    name: 'Bob'},
{
    id: 5,
    name: 'Terminator'}
];

// Autocomplete start..
$('#suggested-users').autocomplete({
    source: names,
    select: function() {
        $('#user-id').html(ui.item.id);
    }
});​ 
```

HTML：

```
<html>

    <head>
    <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.0/jquery-ui.js"></script>
    <link rel="stylesheet" type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery.ui.all.css">
    </head>

    <body>
        <input type="text" id="suggested-users">
        <hr>
        <p><strong>ID:</strong><span id="user-id"></span></p>
    </body>

</html>​ 
```

**JSFiddle：** [JSFiddle](http://jsfiddle.net/ZBfL2/)

感谢您的回答！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:12:39.970

您需要使用具有属性`label`和`value`. [来源](http://api.jqueryui.com/autocomplete/#option-source)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:26:15.463

试试这个**[jsFiddle 例子](http://jsfiddle.net/j08691/ZBfL2/1/)**

```
var opt;
// Values
var names = [
    {
    label: 'Max',
    value: 1},
{
    label: 'John',
    value: 2},
{
    label: 'Gray',
    value: 3},
{
    label: 'Bob',
    value: 4},
{
    label: 'Terminator',
    value: 5}
];

// Autocomplete start..
$('#suggested-users').autocomplete({
    source: names,
    select: function(e, ui) {
        $('#user-id').html(ui.item.value);
        opt = ui.item.label;
    },
    close: function() {
        $('#suggested-users').val(opt);
    }
});​ 
```

# sql-server - SSIS 包 web 服务任务非常慢

> ID：13019800
> 
> 赞同：1
> 
> 时间：2012-10-22T21:01:41.590
> 
> 标签：sql-server, wcf, ssis

我有一个 SSIS 包，它使用 Web 服务任务来调用 WCF 服务。直接运行服务调用（C#、SoapUI 等）时，服务调用需要 200 毫秒到 900 毫秒，但是当从 SSIS 包调用它时，它始终需要 6 到 7 秒。这是一个大问题，因为调用已被打了数千次，并且包需要大约 8 小时才能运行。

我已验证呼叫返回正确的结果。并已验证使用 ac# 程序从数据库服务器调用服务速度很快。

# android - 在 android 4.0 中为自定义 Web 浏览器创建白名单

> ID：13019808
> 
> 赞同：1
> 
> 时间：2012-10-22T21:02:14.343
> 
> 标签：android, webview, browser, android-4.0-ice-cream-sandwich, whitelist

我正在使用 webview 为 android 创建一个 web 浏览器。我将我的白名单（生成 xml 文件的 php 文件）保存在我的服务器中，因此我可以在需要时对其进行修改。我的应用程序会验证尝试访问的 url 是否在白名单中，如果不在，则显示对话框消息。首先，我为 android 2.3 实现了它，一切正常。现在我需要在 android 4.0 中实现它，但是当我尝试读取白名单时，它失败了。

这是我的 WebView 声明

```
final WebView TBrowser = (WebView) findViewById(R.id.webView);
    TBrowser.getSettings().setJavaScriptEnabled(true);
    TBrowser.getSettings().setLoadWithOverviewMode(true);
    TBrowser.getSettings().setUseWideViewPort(true);
    TBrowser.setWebViewClient(new webViewClient(){
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            String host = Uri.parse(url).getHost();
            boolean validUrl = false;

            try{
                URL website = new URL("http://www.mysite.com/whitelist.php);
                SAXParserFactory spf = SAXParserFactory.newInstance();
                SAXParser sp = spf.newSAXParser();
                XMLReader xr = sp.getXMLReader();
                HandlingXML whiteListHandler = new HandlingXML(host);
                xr.setContentHandler(whiteListHandler);

                xr.parse(new InputSource(website.openStream()));

                validUrl = whiteListHandler.isValid();

            }catch (Exception e){
                e.printStackTrace();
            }

            if (validUrl) {
                // This is my web site, so do not override; let my WebView load the page
                return false;
            }else{

            new AlertDialog.Builder(view.getContext())  
            .setTitle("ERROR")  
            .setMessage("URL not supported. Click on START OVER")   
            .setCancelable(true)  
            .create()  
            .show();  

            return true;
            }
        }
    }); 
```

这是 xml 处理程序的代码：

```
public class HandlingXML extends DefaultHandler{

boolean validationResult = false;
String hostName;

public HandlingXML(String hn){
    hostName = hn;
}

public boolean isValid(){
    return validationResult;
}

@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {

    if (localName.equals("item") && !validationResult){
        if (attributes.getValue("data").equals(hostName)){
            validationResult = true;
        } else {
            validationResult = false;
        }
    }
} 
```

}

这是生成 xml 的 php：

```
header("content-type: text/xml");
echo "<?xml version=\"1.0\" ?>\n";
echo "<whiteList>\n";

echo "<item data=\"www.facebook.com\"/>\n";
echo "<item data=\"m.facebook.com\"/>\n";
echo "<item data=\"api.twitter.com\"/>\n";
echo "<item data=\"plus.google.com\"/>\n";
echo "<item data=\"accounts.google.com\"/>\n";
echo "</whiteList>\n"; 
```

因此，这在 android 2.3 中运行良好，但在 4.0 中跳过了 try 部分（在读取和处理白名单时）。

我发现“......您的应用程序在 Android 3.0 及更高版本上崩溃，但在 Android 2.x 上运行良好的原因是因为 HoneyComb 和 Ice Cream Sandwich 对 UI 线程的滥用更加严格......”

[http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)

现在，有人可以帮我弄清楚如何解决这个问题吗？？？

在有关使用 AsyncTask 的文章中提到...我曾经解决过类似的问题：

从改变：

```
Thread timer = new Thread() {
        public void run() {
            try {
                sleep(3000);
            } catch (InterruptedException e) {
                e.printStackTrace();
            } finally {
                Intent QuickRateIntent = new Intent(
                        "com.terillion.TERILLIONBROWSERACTIVITY");
                startActivity(QuickRateIntent);
            }
        }
    };
    timer.start(); 
```

至：

```
new timerAsync().execute(); 
```

和：

```
public class timerAsync extends AsyncTask<Void,Void,Void>{

    @Override
    protected Void doInBackground(Void... arg0) {
        // TODO Auto-generated method stub
        Thread timer = new Thread() {
            public void run() {
                try {
                    sleep(3000);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                } finally {
                    Intent QuickRateIntent = new Intent(
                            "com.terillion.TERILLIONBROWSERACTIVITY");
                    startActivity(QuickRateIntent);
                }
            }
        };
        timer.start();
        return null;
    }

} 
```

但我不知道如何让它在这里工作。我需要做什么改变？？？在哪里？？？

# c# - 这是一个有效的设置属性块吗？

> ID：13019810
> 
> 赞同：1
> 
> 时间：2012-10-22T21:02:29.693
> 
> 标签：c#, properties

我在一个属性中有一个设置器，有点像这样：

```
set
{
string whatever = regex.replace();

_fieldStub = whatever;

} 
```

如您所见，没有使用 value 关键字。这仍然是一个完全有效的设置块吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:05:43.233

> 这仍然是一个完全有效的设置块吗？

是的，从技术上讲，它是一个有效的属性设置器。没有什么*要求*您使用传入的值。

但是，此属性可能非常不寻常，并违反所有预期行为。因此，我建议改为使用此方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:07:40.893

它编译？
如果是 - 它是有效的
如果不是 - 它是无效的。
在验证代码时，最后一个词属于编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:18:20.947

它对编译器有效，但在 .Net 语言范围内没有意义。它的行为类似于方法，而不是 .Net 属性

```
public string MyProperty
{
  set
  {
   string whatever = regex.replace();

   _fieldStub = whatever;

  }
} 
```

这不会对我的财产产生任何影响

```
myClass.MyProperty = "Hello"; //has no effect and makes no sense 
```

# c# - 计算字符串中的文本

> ID：13019811
> 
> 赞同：0
> 
> 时间：2012-10-22T21:02:30.507
> 
> 标签：c#

我在.NET中有一个字符串，如下所示：

```
string str = "Lorem ipsum is great. lorem ipsum Lorem..."; 
```

我还需要计算所有匹配大小写的“Lorem”。所以 Lorem 应该出现两次并忽略 lorem。

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T21:09:08.923

```
string str = "Lorem ipsum is great. lorem ipsum Lorem...";
string word = "Lorem";
Console.WriteLine(Regex.Matches(str,word).Count); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-22T21:06:44.903

您可以使用 Linq。

```
String searchWhat = "Lorem";
int count = str.Split(new[]{' ','.'}, StringSplitOptions.None)
               .Count(w => w == searchWhat); 
```

演示：http: [//ideone.com/a9XHln](http://ideone.com/a9XHln)

**编辑**：您评论说“Lorem Loremo”将计为两个，因此您想要计算给定单词（区分大小写）的所有出现，即使该单词是另一个单词的一部分。然后你可以使用`String.Contains`：

```
int count = str.Split(new[]{' ','.'}, StringSplitOptions.None)
               .Count(w => w.Contains(searchWhat)); 
```

演示：http: [//ideone.com/fxDGuf](http://ideone.com/fxDGuf)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:14:45.303

Here's my 2 cents. It will find all instances of "Lorem" case sensative, but it will return a count for things that have "Lorem" in it, like "Loremo" or "thismightnotLorembewhatyouwant".

The question was a bit vague so this answer is a quick solution that conforms to what you requested.

```
string test = "Lorem ipsum is great. lorem ipsum Lorem...";

int pos = -1;
int count = 0;
while ((pos = test.IndexOf("Lorem", pos+1)) != -1)
    count++; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T21:16:43.867

If you want this to be able to perform other operations, you can dump the entire string into a List and then you could run Linq queries off off that list.

```
var phrase = "Lorem ipsum...";
var wordList = phrase.Split(' ').ToList();
var loremCount = wordList.Where(x => x.ToLower() == "lorem").Count(); 
```

This way wordList is reusable.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-22T21:31:00.677

使用以下代码：

```
using System.Text.RegularExpressions;

string text = "Lorem ipsum is great. lorem ipsum Lorem...";
int count = new Regex("Lorem").Matches(text).Count; 
```

希望它会帮助你。如果没有，请告诉我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-22T21:06:37.693

可以使用`Linq`：

```
string str = "Lorem ipsum is great. lorem ipsum Lorem...";
int loremCount = str.Split(new[]{' ','.',','}, StringSplitOptions.None).Count(s => s.Equals("Lorem")); 
```

如果你想考虑“Loremo”：

```
int loremCount = str.Count(s => s.Equals("Lorem")); 
```

# java - Java ImageIO 异常

> ID：13019812
> 
> 赞同：1
> 
> 时间：2012-10-22T21:02:34.980
> 
> 标签：java, embedded-resource, javax.imageio

在运行代码以显示 pacman 级别背景时，我遇到了图像和 pacman sprite 未加载的问题。

例外：

```
Exception in thread "Thread-2" java.lang.IllegalArgumentException: input == null!
    at javax.imageio.ImageIO.read(ImageIO.java:1388)
    at org.pacman.Pacman.init(Pacman.java:51)
    at org.game.engine.GameLoop.run(GameLoop.java:26) 
```

GameLoop 的第 26 行很简单`game.init();`。

这是课程：

```
public class Pacman extends Game {

    public static void main(String[] args) {
        GameApplication.start(new Pacman());
    }

    private BufferedImage sheet;
    private int frame;

    public Pacman() {
        title = "Pacman";
        width = 176;
        height = 258;
        frame = 0;
    }

    @Override
    public void draw(Graphics g) {
        if (sheet != null) {
            g.drawImage(sheet, -2, 0, null);
            //draw ms pacman
            g.drawImage(sheet.getSubimage(628+(frame/3)*(15+2), 33, 15, 15), 80, 105, null);
        }
    }

    @Override
    public void init() {
        try {
            sheet = ImageIO.read(Pacman.class.getResource("/images/pacman.png"));
        } catch (IOException ex) {
            Logger.getLogger(Pacman.class.getName()).log(Level.SEVERE, null, ex);
        }
    }

    @Override
    public void update() {
        frame++;
        if (frame > 3*2) {
            frame = 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:06:40.307

> 在 org.pacman.Pacman.init(Pacman.java:51)

所以看第 51 行：

```
sheet = ImageIO.read(Pacman.class.getResource("/images/pacman.png")); 
```

`Pacman.class.getResource("/images/pacman.png")`也是，所以`null`看起来它没有加载图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T21:06:10.563

尝试使用 调用`ImageIO.read`，`getResourceAsStream`但`InputStream`要`null`事先检查。你会发现确实如此`null`。这意味着无法在该 URI 上检索图像。

# installation - phpUnit-pear 安装问题

> ID：13019813
> 
> 赞同：2
> 
> 时间：2012-10-22T21:02:43.143
> 
> 标签：installation, phpunit, pear

我正在从 github 安装一个名为 gitlist 的项目，你可以在[这里](https://github.com/klaussilveira/gitlist)找到它。我安装了 composer 来管理所有依赖项。但是当用 ant 构建时，我总是有一条消息告诉我构建失败试图执行 phpUnit

```
 [exec] PHPUnit 3.7.8 by Sebastian Bergmann.
     [exec] 
     [exec] Configuration read from /myroot/Sites/gitproject/gitlist/phpunit.xml.dist
     [exec] 
     [exec] .....F
     [exec] 
     [exec] Time: 3 seconds, Memory: 22.50Mb
     [exec] 
     [exec] There was 1 failure:
     [exec] 
     [exec] 1) InterfaceTest::testHistoryPage
     [exec] Failed asserting that false is true.
     [exec] 
     [exec] /myroot/Sites/gitproject/gitlist/tests/InterfaceTest.php:154
     [exec] 
            FAILURES!
            Tests: 6, Assertions: 42, Failures: 1.

     [exec] Generating code coverage report in Clover XML format ...
     [exec]  done

BUILD FAILED
/myroot/Sites/gitlist/build.xml:74: exec returned: 1

and the 74 line corresponds to `<exec executable="phpunit" failonerror="true"/>` 
```

事实上，我已经用 pear 安装了 phpUnit，它似乎可以工作。认为这可能是 phpUnit 的安装问题，我尝试从 pear 再次安装它，但现在我收到了这条消息：

```
phpunit/PHPUnit is already installed and is the same as the released version 3.7.8
install failed 
```

顺便说一句，运行此命令：phpunit，我收到此消息

```
Generating code coverage report in Clover XML format ...PHP Warning:  DOMDocument::save(/Users/mehdibenchoufi/Desktop/Sites/gitproject/gitlist/build/logs/clover.xml): failed to open stream: Permission denied in /usr/local/share/pear/PHP/CodeCoverage/Report/Clover.php on line 341
PHP Stack trace:
PHP   1\. {main}() /usr/local/bin/phpunit:0
PHP   2\. PHPUnit_TextUI_Command::main() /usr/local/bin/phpunit:46
PHP   3\. PHPUnit_TextUI_Command->run() /usr/local/share/pear/PHPUnit/TextUI/Command.php:129
PHP   4\. PHPUnit_TextUI_TestRunner->doRun() /usr/local/share/pear/PHPUnit/TextUI/Command.php:176
PHP   5\. PHP_CodeCoverage_Report_Clover->process() /usr/local/share/pear/PHPUnit/TextUI/TestRunner.php:362
PHP   6\. DOMDocument->save() /usr/local/share/pear/PHP/CodeCoverage/Report/Clover.php:341 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T08:25:13.423

这没有错误。

PHPUnit 工作并运行测试。一项测试失败：`Tests: 6, Assertions: 42, Failures: 1.`

这不是 PHPUnit 的错；它工作正常。

# linux - 字典 - Fedora Linux

> ID：13019817
> 
> 赞同：-4
> 
> 时间：2012-10-22T21:02:56.763
> 
> 标签：linux, dictionary, terminal, fedora

我是 Linux 的新手，听说过所谓的`dictionary`. 那是什么？我该如何导航到它`Terminal`？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:08:12.997

[字典](http://en.wikipedia.org/wiki/Dictionary)是给定语言的单词的集合，带有定义或翻译，以促进学习语言或扩大词汇量。

**编辑：**正如@Paul Tomblin 指出的那样，您可以通过从办公桌上站起来走到书架上来导航到它。

# jquery - 初始化后禁用可选择的孩子

> ID：13019819
> 
> 赞同：0
> 
> 时间：2012-10-22T21:03:00.163
> 
> 标签：jquery, jquery-ui, jquery-ui-selectable

我看不出这怎么行不通，但这是我的问题...

我在页面上有一系列可选组 - 每个组都是表格中的一行，td 中的 div 是可选组。并非所有的 td 都包含一个可选择项 - 这由“忽略”类的存在表示。灯箱打开，然后需要针对其中一个可选组中的几个孩子，并在灯箱关闭时禁止它们在其组中可选。

我有这个 html（它是一个片段，但准确）：

```
<tr id='row_17' data-booking_row='a room' data-booking_row_id='17'>
    <td class='booking_cell green'>
        <div data-date='2012-10-22' class='room_cell  selectable'>
            <div class='price ignore' style='display:block;'>&pound;5</div>
        </div>
    </td>
    <td class='booking_cell amber ignore'>
        <div data-date='2012-10-23' class='room_cell  ignore'>
            <div class='price ignore' style='display:block;'>&pound;5</div>
        </div>
    </td>
    <td class='booking_cell amber ignore'>
        <div data-date='2012-10-24' class='room_cell  ignore'>
            <div class='price ignore' style='display:block;'>&pound;2</div>
        </div>
    </td>
</tr> 
```

可选择由包含上述 html 的页面底部的这段代码启动：

```
$(function() {
    $('#row_17').selectable({
        filter: 'div:not(.ignore)'
    });
}); 
```

然后，从灯箱中，我正在执行以下操作以尝试禁用相关的可选择项选择子项：

```
parent.$('#row_17 td div[data-date=2012-10-22]').removeClass('selectable');
parent.$('#row_17 td div[data-date=2012-10-22]').addClass('ignore');
parent.$('#row_17 td div[data-date=2012-10-22]').removeClass('green');
parent.$('#row_17 td div[data-date=2012-10-22]').addClass('amber');
parent.$('#row_17 td div[data-date=2012-10-22]').removeClass('ui-selected');
parent.$('#row_17 td div[data-date=2012-10-22]').removeClass('ui-selectee'); 
```

（“琥珀”类的添加和“绿色”的删除纯粹改变了颜色）

无论如何，它们仍然是可选的，颜色确实会发生变化，并且如果我检查它，这些类都已按应有的方式添加和删除，但您仍然可以选择它。

我试过在最后一个块的末尾添加这个：

```
parent.$('#row_17 td div[data-date=2012-10-22]').selectable('disable'); 
```

但这个错误并告诉我“无法在初始化之前调用可选择的方法；试图调用方法‘禁用’”

有没有人有任何想法？我真的为新的 JQuery UI 站点中缺少上下文和示例而苦苦挣扎。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:48:08.120

```
$(document).ready(function() {
  parent.$('#row_17 td [div*="2012-10-22"').selectable('disable');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:20:00.607

尝试这个

```
parent.$('#row_17').selectable('option','cancel','td div[data-date=2012-10-22]'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:08:34.113

尝试使用 .ready() 这将等待文档准备好并且 DOM 已加载并可被操作。

```
$(document).ready(function() {
  parent.$('#row_17 td div[data-date=2012-10-22]').selectable('disable');
}); 
```

# asp.net - 如何维护具有大量分支的 SQL Server DB

> ID：13019821
> 
> 赞同：5
> 
> 时间：2012-10-22T21:03:06.730
> 
> 标签：asp.net, sql-server

我在 git 下有一个 ASP.NET 项目，我们在其中遵循使用分支作为功能的约定。我们刚刚开始使用 SQL Server Data Tools 来管理架构更改（对它来说很新，所以我怀疑它可能具有让我满足我需要的功能）。

我正在寻找一些适用于其他团队的策略，这些团队管理具有不同数据库模式的分支之间的切换，然后成功地将分支合并在一起。理想情况下，在合并所有功能后，我会隐式创建一个更改脚本来部署以发布到生产环境。

注意我使用的是 SQL Server 2008 R2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T14:33:14.803

这个策略有多个部分。一方面是处理不同分支的*存储*，而对我的团队来说效果很好的是为每个分支使用不同的 SQL Server 实例（而不是使用特定于分支的前缀或后缀命名单个数据库，例如 MyDatabase_FeatureBranchX，这可能会失控）。这使得每个分支中的相应数据库具有相同的名称（为了清楚起见），但也允许给定分支的 SQL 资源（数据文件、访问权限等）的物理和逻辑隔离。

至于第二个更有趣的方面（我认为这是您问题的主要意图），您可以考虑使用基于代码的“迁移”方法——例如，使用[FluentMigrator](https://github.com/schambers/fluentmigrator)等。假设您有一个标准基线模式，每个分支最初都是从中创建的，那么您可以在代码中创建适当的迁移，作为每个分支中功能开发的一部分（并将它们应用到该分支的 SQL 实例）。当需要将分支合并到主干时，您还将合并然后应用该分支的迁移。

充其量，这意味着您可以在合并后简单地对您的主干实例运行迁移工具，以便应用所有分支的迁移，因为这样的工具会自动跟踪已应用的迁移（通过自定义数据库表）并且不要重新应用它们。如果您还在整个开发过程中定期将主干代码（包括其迁移）合并到您的功能分支中，并且您正在应用这些迁移，您还将确保您的功能分支的架构保持最新，这最大限度地减少了合并时令人讨厌的意外。

当需要将主干部署到生产环境时，将再次应用这些相同的迁移。FluentMigrator 提供各种运行程序：控制台应用程序、 [NAnt](https://github.com/schambers/fluentmigrator/wiki/Migration-Runners)、MSBuild 和 Rake。

我强烈建议使用基于时间戳（例如 201210241033）的迁移 ID 策略，而不是简单的连续整数（1、2、...），以最大程度地减少冲突和更改应用超出预期顺序的可能性。

# grails - grails 2.1 - 太慢了，如何加快速度？

> ID：13019829
> 
> 赞同：1
> 
> 时间：2012-10-22T21:03:33.280
> 
> 标签：grails

我刚刚从 Grails 1.3.7 更新到 Grails 2.1。到目前为止，一切正常。唯一让我担心的是开发速度。

直到现在在 1.3.7 中运行它真的很快（渲染一个页面需要 6 秒），现在同一个页面需要 30 秒来渲染。

我已经停用了所有插件（仅使用了 hibernate、jquery 和 tomcat）并使用了以下 jvm 选项：

```
-Xms256m -Xmx1024m -XX:MaxPermSize=1024m -XX:PermSize=510m 
```

以及 Grails 选项

```
-Ddisable.auto.recompile=true 
```

还有一些 profiling 显示页面本身的渲染只需要大约 10 秒，但奇怪的是，在 profiling 显示渲染完成后，仍然需要大约 20 秒才能将页面加载到浏览器中。

知道这可能是什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:47:22.020

所以，问题发现了。

事实证明，分析仅包括对视图和控制器的调用，但不包括在布局中完成的任何操作。

布局渲染中缺少的 20 秒。

# javascript - 仅 IE7 中的 jQuery 问题

> ID：13019834
> 
> 赞同：2
> 
> 时间：2012-10-22T21:04:06.220
> 
> 标签：javascript, jquery, internet-explorer-7

我只有在 IE7 中弹出一个问题，`"Object doesn't support the property or method"`当`onChange`任何带有`VariationSelect`. 因此，我将其范围缩小到以下内容：

```
$(".VariationSelect").change(function() {
    // a bunch of irrelevant code
    // get the index of this select
    var index = $('.VariationSelect').index($(this)); //this is the line throwing the error in IE7
           //some code that returns a block of data in json formatting

}); 
```

我的第一个想法是一段代码，`attr('disabled', 'disabled')`因为我以前在 IE7 中也使用 removeAttr 时遇到过问题，但即使我删除了这些行，错误仍然保持不变，并且 JS 错误中的行/字符引用（当然，这是没有意义的）不会改变。那么，您在该代码块中是否看到 IE7 不接受的其他内容？

编辑：更改选择框后代码正在运行。选择框 HTML 如下所示：

```
<div class="DetailRow">
<div class="Label">Some Label:</div>
<div class="Value">
    <select name="variation[aNumberStartingAtOneAndIncrementingUpwards]" class="VariationSelect" id="VariationSelect" style="width: 180px;">
        <option value="">-- Choose an option --</option>
        {A bunch of options for this choice loaded by PHP}
    </select>
</div>
</div> 
```

快速而肮脏的方法是，因为我知道名称元素中总是有一个比索引大一的数字，所以从更改的元素中获取名称，如下所示：

```
 var index = $(this).attr('name');
index = index.replace('variation[','');
index = index.replace(']','');
index = (index*1)-1; 
```

有没有更快/更好的方法来获取索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-27T21:27:42.880

在 jQuery 中使用该 attr 函数时，它必须是您在线运行的唯一函数。

为了解决这个问题，我将代码更改为：

```
 $('.VariationSelect:eq(' + (index + 1) + ')').append(data.options).attr('disabled', '').focus(); 
```

到：

```
 $('.VariationSelect:eq(' + (index + 1) + ')').append(data.options); $('.VariationSelect:eq(' + (index + 1) + ')').attr('disabled', ''); 
    $('.VariationSelect:eq(' + (index + 1) + ')').focus(); 
```

它现在可以在 IE7 中运行，并且可以继续在其他所有浏览器中运行。我猜我可能会结合 append 和 focus 功能，但是嗯，它正在工作。

# scala - 案例类等于字节数组列表

> ID：13019835
> 
> 赞同：4
> 
> 时间：2012-10-22T21:04:08.977
> 
> 标签：scala

我正在尝试在案例类上使用应该匹配器

```
case class ListOfByteArrayCaseConfig(

  @BeanProperty 
  permissions: java.util.List[Array[Byte]]

) 
```

使用以下测试用例

```
val orig = ListOfByteArrayCaseConfig(List(Array[Byte](10, 20, 30)))
val orig2 = ListOfByteArrayCaseConfig(List(Array[Byte](10, 20, 30)))

orig2 should be === orig 
```

显然这会失败，因为两个字节数组在引用方面并不相等。我想要做的是在不更改测试用例代码并仍然保留案例类的情况下以某种方式完成这项工作。

甚至可能吗？（比如在案例类中添加一个自定义的 equals 方法？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:21:47.877

我找到了解决方案。显然我可以覆盖案例类中的equals方法

[Scala：忽略equals/hascode的案例类字段？](https://stackoverflow.com/questions/10373715/scala-ignore-case-class-field-for-equals-hascode)

尽管它首先摆脱了使用案例类的原因，即简化数据对象。

```
case class ListOfByteArrayCaseConfig(

  @BeanProperty 
  permissions: java.util.List[Array[Byte]]

) {

  override def equals(arg: Any): Boolean = {

    val obj = arg.asInstanceOf[ListOfByteArrayCaseConfig]
    var i: Int = 0
    for (i <- 0 until permissions.size()) {
      if (!util.Arrays.equals(permissions.get(i), obj.permissions.get(i))) {
        return false
      }
    }
    return true
  }
} 
```

# php - PHP 打印出 HTML 而不是处理 HTML

> ID：13019836
> 
> 赞同：0
> 
> 时间：2012-10-22T21:04:26.853
> 
> 标签：php, wordpress

我希望有人可以帮助我。下面的代码来自一个 WordPress 插件。从插件选项页面，我输入了一些简单的 html -

```
<h3>Showname</h3><p>with DJ Top</p> 
```

下面的代码 ($showname) 用于（一个 WordPress 短代码）显示我输入的内容，但它实际上显示 HTML 而不是处理它，即显示 HTML 标题和段落。

谁能指出我的方向，以便 $showname 处理 HTML，而不仅仅是将其逐字打印出来。

非常感谢

抢

```
function showtime_schedule_handler($atts, $content=null, $code=""){

global $wpdb;
global $showtimeTable;

//Get the current schedule, divided into days
$daysOfTheWeek = array("Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday");

$schedule = array();

$output = '';

foreach ($daysOfTheWeek as $day) {
    //Add this day's shows HTML to the $output array
    $showsForThisDay =  $wpdb->get_results( $wpdb->prepare ( "SELECT * FROM $showtimeTable WHERE dayOfTheWeek = '$day' ORDER BY startTime" ));

    //Check to make sure this day has shows before saving the header
    if ($showsForThisDay){
        $output .= '<h2>'.$day.'</h2>';
        $output .= '<ul class="showtime-schedule">';
        foreach ($showsForThisDay as $show){
            $showName = $show->showName;
            $startClock = $show->startClock;
            $endClock = $show->endClock;
            $linkURL = $show->linkURL;

            if ($linkURL){
                $showName = '<a href="'.$linkURL.'">'.$showName.'</a>';
            }
            $output .= '<li><strong>'.$startClock.'</strong> - <strong>'.$endClock.'</strong>: '.$showName.'</li>';

        }
        $output .= '</ul>';
    }
}
return $output;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:07:01.017

您正在输出`text/plain`MIME 类型的变体。您需要使用默认标头 ( `text/html`) 将其发送出去，以便浏览器正确解析它。

例如：

```
<?php
    header('Content-Type: text/html', true);
    echo showtime_schedule_handler($atts, $content);
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T01:43:22.540

代替

```
return $output; 
```

尝试

```
return html_entity_decode($output); 
```

# java - 使用 java 注入 sql 查询时，出现错误

> ID：13019838
> 
> 赞同：0
> 
> 时间：2012-10-22T21:04:33.457
> 
> 标签：java, mysql

```
public ArrayList<Message> searchMessages(String word) throws DaoException{
    ArrayList<Message> messages = new ArrayList<>();
            Connection con = null;
    PreparedStatement ps = null;
    ResultSet rs = null;

    try {
        con = getConnection();

        //String query = "SELECT * FROM messages WHERE text LIKE %?% order by date";
        String query = "SELECT * FROM messages WHERE text LIKE '%?%'";
        ps = con.prepareStatement(query);
        ps.setString(1,word);
        rs = ps.executeQuery();

        while (rs.next()) {
            int messageId = rs.getInt("messageId");
            String text = rs.getString("text");

            String date = rs.getString("date");
            int memberId2 = rs.getInt("memberId");
            Message m = new Message(messageId,text,date,memberId2);
            messages.add(m);

            //Company c = new Company(companyId, symbol, companyName, sharePrice, high, low);
            //companies.add(c);
        }
    } catch (SQLException e) {
        throw new DaoException("searchMessages(): " + e.getMessage());
    } finally {
        try {
            if (rs != null) {
                rs.close();
            }
            if (ps != null) {
                ps.close();
            }
            if (con != null) {
                freeConnection(con);
            }
        } catch (SQLException e) {
            throw new DaoException("searchMessages(): " + e.getMessage());
        }
    }

    return messages;

} 
```

只需先解释一下代码。它只是在消息表及其文本字段中搜索提供的任何内容。我使用准备好的语句将其插入查询并运行它。无论我提供什么字符串，它都会出现此错误

```
oow_package.DaoException: searchMessages(): Parameter index out of range (1 > number of parameters, which is 0). 
```

不知道为什么它一点也不工作。将不胜感激任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:09:49.280

您不能在准备好的语句中使用这样的参数。查询应该是

```
SELECT * FROM messages WHERE text LIKE ? 
```

你应该使用

```
ps.setString(1, "%" + word + "%"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:10:15.410

我不是专家，但我会说你准备好的语句没有参数被识别，你仍然插入一个（单词）......也许问题来自 % 符号？

编辑：同意上面的人......似乎是合法的。

# file - Unix - 将一个目录的内容复制到另一个

> ID：13019839
> 
> 赞同：92
> 
> 时间：2012-10-22T21:04:38.467
> 
> 标签：file, unix, copy, directory

```
Folder1/
    -fileA.txt
    -fileB.txt
    -fileC.txt

> mkdir Folder2/

> [copy command] 
```

现在`Folder2/`看起来像：

```
Folder2/
    -fileA.txt
    -fileB.txt
    -fileC.txt 
```

如何做到这一点？我已经尝试过`cp -r Folder1/ Folder2/`，但我最终得到：

```
Folder2/
    Folder1/
        -fileA.txt
        -fileB.txt
        -fileC.txt 
```

这很接近但不完全是我想要的。

谢谢！

* * *

## 回答 #1

> 赞同：127
> 
> 时间：2012-10-22T21:07:15.290

试试这个：

```
cp Folder1/* Folder2/ 
```

* * *

## 回答 #2

> 赞同：50
> 
> 时间：2012-10-22T21:07:11.437

很简单，带`*`通配符。

```
cp -r Folder1/* Folder2/ 
```

但是根据您的示例，不需要递归，因此以下内容就足够了：

```
cp Folder1/* Folder2/ 
```

**编辑：**

或跳过该`mkdir Folder2`部分并运行：

```
cp -r Folder1 Folder2 
```

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-10-22T21:23:15.747

要制作精确的副本、权限、所有权和所有使用“-a”和“cp”。“-r”将复制文件的内容，但不一定保持其他内容相同。

> cp -av 源/* 目标/

（确保 Dest/ 首先存在）

如果您想从一个重复更新到另一个或确保您还复制所有点文件，`rsync`这是一个很大的帮助：

> rsync -av --delete Source/ Dest/

This is also "recoverable" in that you can restart it if you abort it while copying. I like "-v" because it lets you watch what is going on but you can omit it.

# entity-framework - 实体框架表上没有 PK

> ID：13019840
> 
> 赞同：0
> 
> 时间：2012-10-22T21:04:39.770
> 
> 标签：entity-framework

我正在使用 VS2012 并创建一个示例实体框架项目，该项目读取和写入一些用于导入目的的表。并且其中没有 PK 或 FK - 列上只有 null/notnull。

可以/应该使 EF 在这些表上插入记录而没有那个神秘的错误：

> *无法更新 EntitySet，因为它有一个 DefiningQuery 并且元素中不存在支持当前操作的元素。*

还是我应该在别处寻找数据库 I/O？

谢谢！科里。

# sql - tbl1.col IN tbl2.col 上的左连接表

> ID：13019841
> 
> 赞同：0
> 
> 时间：2012-10-22T21:04:41.087
> 
> 标签：sql

是否可以在左连接子句中有“IN”语句？我有两个包含两列的表：

```
Table 1:                  Table 2:

Column1:                  Column2:

192192,                   192192
119202                    119202
810395                    810395
975643,                   975643
908574,,                  908574 
```

如您所见， tbl1.col1 有条目可以有逗号结尾的条目或根本没有条目。我需要加入第 1 列包含第 2 列或它们相等的两个表。在 column1 包含第 2 列的地方加入是有意义的。也许有更好的方法来完成加入？

我需要将两者连接起来以访问表 2 中的数据。因此，这些列只需要对齐，同时允许在第 1 列中使用一个或两个逗号。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:08:42.047

如果这只是某种一次性交易或临时表而不是您真正的产品表：（无论逗号在哪里，这个都有效）

```
select <column list>
from table1 t1
join table2 t2 on replace(t1.col1, ',','') = t2.col2 
```

或者

```
select <column list>
from table1 t1
join table2 t2 on  cast(t2.col2 as varchar (10)) like t1.col1+'%' 
```

（根据拖曳列的数据类型，您可能需要也可能不需要强制转换，我假设一个是 varchar，另一个是整数）

或（仅当值始终为相同长度时才有效

```
select <column list>
from table1 t1
join table2 t2 on left(t1.col1,6) = t2.col2 
```

如果这是一个真正的 prod 表，那么在加入函数时可能会遇到性能问题，因此请修复数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:11:10.293

我认为[`rtrim()`](http://www.techonthenet.com/oracle/functions/rtrim.php)这是完美的：

```
SELECT *
FROM   table1 t1
JOIN   table2 t2 ON trim(t1.col1, ',') = t2.col2; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:33:50.567

此外，您可能只想`substr`修剪第一个表列并将左外连接用作：

使用`substr`：

```
 select t1.col1, t2.col2
 from table1 t1 left join table2 t2
 on substr(t1.col1, 0, length(t1.col1)-1) = t2.col2; 
```

使用`replace`：

```
 select t1.col1, t2.col2
 from table1 t1 left join table2 t2
 on replace(t1.col1, ',' , '')= t2.col2; 
```

上述两个查询都应该在 MySQL 和 Oracle 中工作。

# listview - ActionBar、标签视图和列表视图

> ID：13019850
> 
> 赞同：1
> 
> 时间：2012-10-22T21:05:21.597
> 
> 标签：listview, android-actionbar, tabview, sliding

我一直在做一个项目，我将在其中使用 a `ActionBar`、 a`Sliding TabView`和`SectionListView`.

我在 Android SDK 中实现了默认的 TabView，它生成三个选项卡，每个选项卡都有一个`TextView`生成的选项卡，包括选项卡的数量（即 1、2 和 3）。

但是我面临一个问题，我无法将 a 集成`SectionListView`到我的应用程序中。

以下是我创建滑动选项卡项目时 Android SDK 自动生成的代码：

```
package my.project.sectionlisttab;

import android.app.ActionBar;
import android.app.FragmentTransaction;
import android.content.Context;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentActivity;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.NavUtils;
import android.support.v4.view.ViewPager;
import android.view.Gravity;
import android.view.LayoutInflater;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.view.ViewGroup;
import android.widget.TextView;

public class MainActivity extends FragmentActivity implements ActionBar.TabListener {

    /**
     * The {@link android.support.v4.view.PagerAdapter} that will provide fragments for each of the
     * sections. We use a {@link android.support.v4.app.FragmentPagerAdapter} derivative, which will
     * keep every loaded fragment in memory. If this becomes too memory intensive, it may be best
     * to switch to a {@link android.support.v4.app.FragmentStatePagerAdapter}.
     */
    SectionsPagerAdapter mSectionsPagerAdapter;

    /**
     * The {@link ViewPager} that will host the section contents.
     */
    ViewPager mViewPager;

    //Section list identifiers
    SectionListAdapter adapter;
    LayoutInflater inflater;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        // Create the adapter that will return a fragment for each of the three primary sections
        // of the app.
        mSectionsPagerAdapter = new SectionsPagerAdapter(getSupportFragmentManager());

        // Set up the action bar.
        final ActionBar actionBar = getActionBar();
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);        

        // Set up the ViewPager with the sections adapter.
        mViewPager = (ViewPager) findViewById(R.id.pager);
        mViewPager.setAdapter(mSectionsPagerAdapter);

        // When swiping between different sections, select the corresponding tab.
        // We can also use ActionBar.Tab#select() to do this if we have a reference to the
        // Tab.
        mViewPager.setOnPageChangeListener(new ViewPager.SimpleOnPageChangeListener() {
            @Override
            public void onPageSelected(int position) {
                actionBar.setSelectedNavigationItem(position);
            }
        });

        // For each of the sections in the app, add a tab to the action bar.
        for (int i = 0; i < mSectionsPagerAdapter.getCount(); i++) {
            // Create a tab with text corresponding to the page title defined by the adapter.
            // Also specify this Activity object, which implements the TabListener interface, as the
            // listener for when this tab is selected.
            actionBar.addTab(
                    actionBar.newTab()
                            .setText(mSectionsPagerAdapter.getPageTitle(i))
                            .setTabListener(this));
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onTabUnselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    public void onTabSelected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
        // When the given tab is selected, switch to the corresponding page in the ViewPager.
        mViewPager.setCurrentItem(tab.getPosition());
    }

    public void onTabReselected(ActionBar.Tab tab, FragmentTransaction fragmentTransaction) {
    }

    /**
     * A {@link FragmentPagerAdapter} that returns a fragment corresponding to one of the primary
     * sections of the app.
     */
    public class SectionsPagerAdapter extends FragmentPagerAdapter {

        public SectionsPagerAdapter(FragmentManager fm) {
            super(fm);
        }

        @Override
        public Fragment getItem(int i) {

            Fragment fragment = new DummySectionFragment();
            Bundle args = new Bundle();
            args.putInt(DummySectionFragment.ARG_SECTION_NUMBER, i + 1);
            fragment.setArguments(args);
            return fragment;
        }

        @Override
        public int getCount() {
            return 3;
        }

        @Override
        public CharSequence getPageTitle(int position) {
            switch (position) {
                case 0: return getString(R.string.title_section1).toUpperCase();
                case 1: return getString(R.string.title_section2).toUpperCase();
                case 2: return getString(R.string.title_section3).toUpperCase();
            }
            return null;
        }
    }

    /**
     * A dummy fragment representing a section of the app, but that simply displays dummy text.
     */
    public static class DummySectionFragment extends Fragment {
        public DummySectionFragment() {
        }

        public static final String ARG_SECTION_NUMBER = "section_number";

        @Override
        public View onCreateView(LayoutInflater inflater, ViewGroup container,
                Bundle savedInstanceState) {

            TextView textView = new TextView(getActivity());
            textView.setGravity(Gravity.CENTER);
            Bundle args = getArguments();
            textView.setText(Integer.toString(args.getInt(ARG_SECTION_NUMBER)));
            return textView;
        }
    }
} 
```

现在如您所见，代码不允许我扩展 ListActivity。

所以，我想集成以下分段列表代码：

```
package my.project.sectionlisttab;

import my.project.sectionlisttab.SectionListAdapter.IndexPath;
import my.project.sectionlisttab.SectionListAdapter.SectionListAdapterAdapterDelegate;

import android.app.Activity;
import android.app.ListActivity;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;

public class SectionListActivity extends ListActivity implements SectionListAdapterAdapterDelegate {

    SectionListAdapter adapter;
    LayoutInflater inflater;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.list_main);

        inflater = LayoutInflater.from(this);

        adapter = new SectionListAdapter();
        adapter.delegate = this;
        getListView().setAdapter(adapter);
        getListView().setOnItemClickListener(adapter.itemClickListener);

    }

    public int sectionCount() {

        return 3;
    }

    public int rowsInSection(int section) {
        return 4;
    }

    public View viewForRowAtIndexPath(IndexPath path) {

        View view = inflater.inflate(R.layout.list_row, null);
        TextView text = (TextView)view.findViewById(R.id.text);
        text.setText("Row " +  path.row);

        return view;
    }

    public View viewForHeaderInSection(int section) {

        View view = inflater.inflate(R.layout.list_header, null);
        TextView text = (TextView)view.findViewById(R.id.text);

        text.setText("Section " +  section);

        return view;
    }

    public void itemSelectedAtIndexPath(IndexPath path) {

        int duration = Toast.LENGTH_SHORT;
        Toast toast = Toast.makeText(this, "Row " + path.row + " in section " + path.section + " selected", duration);
        toast.show();

    }
} 
```

这是 SectionListAdapter：

```
package my.project.sectionlisttab;

import android.view.View;
import android.view.ViewGroup;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.BaseAdapter;

public class SectionListAdapter extends BaseAdapter {

    public class IndexPath {

        public int section;
        public int row;

    }

    public interface SectionListAdapterAdapterDelegate {
        public int sectionCount();
        public int rowsInSection(int section);
        public View viewForRowAtIndexPath(IndexPath path);
        public View viewForHeaderInSection(int section);
        public void itemSelectedAtIndexPath(IndexPath path);

    }

    public SectionListAdapterAdapterDelegate delegate;

    public OnItemClickListener itemClickListener = new OnItemClickListener() {

        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {

            IndexPath path = SectionListAdapter.this.indexPathForPosition(position);

            if(path.row >= 0)
            {
                delegate.itemSelectedAtIndexPath(path);
            }

        }

    };

    public int getCount() {

        int count = 0;
        int sections = delegate.sectionCount();

        for(int i = 0; i < sections; i++)
        {
            count += delegate.rowsInSection(i);
        }

        return count + sections;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    public IndexPath indexPathForPosition(int position)
    {
        IndexPath path = new IndexPath();

        for(int i = 0; i < delegate.sectionCount(); i++)
        {
            int rows = delegate.rowsInSection(i);

            if(position - rows - 1 >= 0)
            {
                position -= (rows + 1);
            }
            else
            {
                path.section = i;
                path.row = position - 1;
                return path;
            }
        }

        return path;
    }

    public View getView(int position, View convertView, ViewGroup parent) {

        IndexPath path = indexPathForPosition(position);

        if(path.row == -1)
        {
            return delegate.viewForHeaderInSection(path.section);
        }
        else
        {
            return delegate.viewForRowAtIndexPath(path);
        }

    }
} 
```

有帮助吗？我只想了解如何将两个适配器或活动集成在一起：S

# objective-c - 带有 UITableViewController 和 Storyboard-Pop 的 NSInternalInconsistencyException

> ID：13019853
> 
> 赞同：0
> 
> 时间：2012-10-22T21:05:28.263
> 
> 标签：objective-c, ios, storyboard, uitableview, popviewcontroller

我在我的 iPhone-App 中集成了 GrabKit，这是一个从社交网络抓取照片的库。现在我有以下情况/问题：

我有一个 UITableViewController - AlbumListViewController。然后是一个 UITableViewCell - AlbumCellViewController。当您点击其中一个单元格 - 带有照片的相册时，会有一个 UITableViewController - PhotoListViewController 和一个 UITableViewCell - PhotoCellViewController。

这里的一切都正常工作，我可以浏览相册，选择一张，浏览其中的照片，然后当我选择一张单张照片时，我的 SetPhotoViewController 有一个 PushViewController，它以全屏显示选定的图像。

现在，当我想在 SetPhotoViewController 中使用导航栏的后退按钮时，崩溃并显示以下消息：

```
*** Assertion failure in -[UISectionRowData refreshWithSection:tableView:tableViewRowData:], /SourceCache/UIKit_Sim/UIKit-2372/UITableViewRowData.m:400
2012-10-22 22:49:32.814 Amis[1820:c07] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Failed to allocate data stores for 1073741821 rows in section 1\. Consider using fewer rows'
*** First throw call stack:
(0x23de012 0x1b63e7e 0x23dde78 0x15f9f35 0xc8f83b 0xc923c4 0xb56fa2 0xb5692c 0x1690f 0x1cd653f 0x1ce8014 0x1cd87d5 0x2384af5 0x2383f44 0x2383e1b 0x2a9a7e3 0x2a9a668 0xaab65c 0x42fd 0x2b75)
libc++abi.dylib: terminate called throwing an exception 
```

我的两个 UITableViewController 的 DataSource 和 Delegate 都设置为 File's Owner。

我通过代码调试的时候，没有发现什么特别的东西，所有的照片都可以加载，所有的数组都填满了数据，没什么奇怪的。

这是 PhotoListViewController 的两个函数，只要我按下 NavigationController 上的后退按钮，它们就会被调用：

```
(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    UITableViewCell *cell = nil;
    NSLog(@"%i", indexPath.row);
    NSLog(@"%ii", indexPath.section);
    // Extra Cell
    if ( indexPath.section > _lastLoadedPageIndex ){    

        static NSString *extraCellIdentifier = @"ExtraCell";

        cell = [tableView dequeueReusableCellWithIdentifier:extraCellIdentifier];
        if (cell == nil) {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:extraCellIdentifier];
        }

        cell.textLabel.text = @"load more";
        cell.textLabel.font = [UIFont fontWithName:@"System" size:8];

    } else {

        static NSString *photoCellIdentifier = @"photoCell";

        cell = [tableView dequeueReusableCellWithIdentifier:photoCellIdentifier];
        if (cell == nil) {

            cell = [[[NSBundle mainBundle] loadNibNamed:@"PhotoRowViewController" owner:self options:nil] objectAtIndex:0];
        }

    }    

    // setting of the cell is done in method [tableView:willDisplayCell:forRowAtIndexPath:]

    return cell;
} 
```

和..

```
- (void)tableView:(UITableView *)tableView willDisplayCell:(UITableViewCell *)cell forRowAtIndexPath:(NSIndexPath *)indexPath
{
    // extra cell
    if ( [cell.reuseIdentifier isEqualToString:@"ExtraCell"] ){ 

        if ( state == GRKDemoPhotosListStateAllPhotosGrabbed ) {

            cell.textLabel.text = [NSString stringWithFormat:@" %d photos", [[_album photos] count] ];

        }else {
            cell.textLabel.text = [NSString stringWithFormat:@"Loading page %d", _lastLoadedPageIndex+1];
            [self fillAlbumWithMorePhotos];
        }

    } else  // Photo cell
    {
        NSArray * photosAtIndexPath = [self photosForCellAtIndexPath:indexPath];

       [(PhotoRowViewController*)cell setPhotos:photosAtIndexPath];

    }

} 
```

我错过了什么？

编辑： numberOfRowsInSection-Method 的代码：如果我调试它，第一次 res 等于 0，第二次调用该方法， res 等于**322121535**。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    NSUInteger res = 0;

    if ( state == GRKDemoPhotosListStateAllPhotosGrabbed && section == _lastLoadedPageIndex ) {

        NSUInteger photosCount = [_album count];

        // Number of cells with kNumberOfPhotosPerCell photos 
        NSUInteger numberOfCompleteCell = (photosCount - section*kNumberOfRowsPerSection*kNumberOfPhotosPerCell) / kNumberOfPhotosPerCell;

        // The last cell can contain less than kNumberOfPhotosPerCell photos
        NSUInteger thereIsALastCellWithLessThenFourPhotos = (photosCount % kNumberOfPhotosPerCell)?1:0;

        // always add an extra cell
        res =  numberOfCompleteCell + thereIsALastCellWithLessThenFourPhotos  +1 ;

    } else if ( section > _lastLoadedPageIndex) {

        // extra cell
        res = 1;

    } else res = kNumberOfRowsPerSection;

    return res;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-23T11:06:47.000

我是 GrabKit 的开发者。感谢您使用它:)

实际上，GrabKit 中的控制器仅用于演示目的，它们并非设计为在项目中“按原样”使用，更具体地说：GRKDemoPhotosList 控制器不是为了在控制器层次结构中推送另一个控制器。

所以你需要做的只是让grabKit demo的控制器适合你的项目：）

我想问题如下：

_ 在 [GRKDemoPhotosList viewWillAppear] 中，调用了方法 fillAlbumWithMorePhotos。

_ 当你从你的控制器弹回 GRKDemoPhotosList 时，这个方法会被再次调用一次，它会产生这个错误。

尝试在 viewWillAppear 方法中添加一个标志，以避免两次调用 fillAlbumWithMorePhotos，我想它会正常工作。

如果您需要更多信息或帮助，请随时通过邮件（pierre.olivier.simonard at gmail.com）或推特（@pierrotsmnrd）与我联系：）

# c++ - 如何使用多态性填充链表？

> ID：13019854
> 
> 赞同：1
> 
> 时间：2012-10-22T21:05:30.160
> 
> 标签：c++, class, polymorphism

我已经建立了一个由列表类和节点类组成的链表，如何用不同类的节点填充列表类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:07:43.090

元素必须是指针（最好是智能的）以避免切片。这是我看到的唯一限制。

```
YourList<std::unique_ptr<BaseClass> > myList;

myList.add(new DerivedClassA);
myList.add(new DerivedClassB); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-23T04:13:17.753

> > 如何用不同类的节点填充列表类？（现在编译时多态性，不同的对象将被放入不同的列表中）

我假设你目前有类似的东西：

```
class Node {
public:
  Node* next;
  int datum;
  int& GetDatum() { return datum; }
};
class List {
public:
  Node* head;
  int Count();
};
int List::Count() { /* compute length */; return length; }

int main () { List a; List b; } 
```

我想您还有其他更有用的成员函数，但这些足以说明这一点。

您可以通过模板将上述代码转换为使用编译时多态性：

```
#include <string>

template<class T>
class Node {
public:
  Node* next;
  T datum;
  T& GetDatum() { return datum; }
  };
  template<class T>
  class List {
  public:
    Node<T>* head;
    int Count();
  };
  template<class T>
  int List<T>::Count() { /*...*/; return length; }
  int main () { List<int> a; List<std::string> b; return a.Count(); } 
```

# java - node.js 准备好替换服务器任务了吗？

> ID：13019855
> 
> 赞同：3
> 
> 时间：2012-10-22T21:05:39.020
> 
> 标签：java, javascript, node.js

我已经关注 node.js 及其应用程序一年了，我很想用 node.js 替换我好的旧 Java 代码的大部分。

我注意到 node.js 的问题是

*   看起来很混乱，从一个版本到另一个版本的东西都不再起作用了
*   糟糕的文档，真的很糟糕
*   不知道哪些库已被移植或将很快被移植
*   多核管理，是吗？
*   无论它实际做什么（即：循环中的暂停），都使用 100% 的 CPU 功率。那不是绿色的，这对我们很重要。

关于安全问题，我会将它放在反向代理后面，只有我的旧的和真正的 Java 服务器才能使用它。

更新：有趣的是，这个问题被关闭了，因为它没有建设性。当我没有胶水时，这个问题怎么能有建设性？这就是为什么我也在这里问的原因！你们这里的版主有时真的很糟糕。

但是，您是否建议在移至 node 之前等待？或者你认为是时候搬家了？

我正在编写大量 Java 服务器端代码，我将开始构建自己的基础框架，然后逐个移植！？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-22T21:12:05.993

即使问题被关闭：

*   实际上，到目前为止它工作得非常稳定并且向后兼容
*   你是真的吗？--> [http://nodejs.org/api/](http://nodejs.org/api/)
*   再次：[http ://www.nodejs.org](http://www.nodejs.org)
*   节点没有随着 CPU 或核心数量而扩展，您应该让操作系统通过启动多个实例来扩展节点进程
*   那是错误的。

即使与其他“服务器端考虑的语言”相比， *Node*仍然“年轻”，它已经在很多地方找到了自己的位置。它可以轻松处理大量用户，它是一个优秀的*web-socket*服务器对应物，它在将网络流量分配给大量活动连接时闪电般快速，它的 ECMAscript 是有史以来最甜美的糖语言（最后一句话是个人观点）。

Node.js 可能有数百个有效的用例，显然没有特定的任务是“必须使用”，但对于任何语言来说，这很可能是相同的规则。它的乐趣，它的快速，深入研究它。

# mysql - 除了 MySQL 中的所有等价物

> ID：13019865
> 
> 赞同：1
> 
> 时间：2012-10-22T21:06:09.223
> 
> 标签：mysql

所以我有一个叫做 members 的表和另一个叫做 group 的表。组的领导也是成员

要检索不是领导者的成员，我执行了以下代码：

```
SELECT first_name, last_name, rank
FROM members
EXCEPT ALL
SELECT first_name, last_name, rank
FROM members INNER JOIN groups ON mid=leader;  --edited gid as mid 
```

在 MySQL 中执行此操作会给我一个语法错误。我应该在 MySQL 中使用什么 EXCEPT ALL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:11:48.410

```
SELECT first_name, last_name, rank
FROM members 
LEFT OUTER JOIN groups ON gid=leader
WHERE leader is null 
```

不确定是否`leader`或`gid`是否在`groups`表中。表中的列`groups`必须在子句中进行`null`检查。`where`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:26:01.847

子查询可能会这样做，例如：

```
SELECT first_name, last_name, rank
FROM members
WHERE id NOT IN (
  SELECT leader
  FROM groups 
  WHERE leader = members.id
) 
```

我们需要了解您的表结构以进一步帮助您

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-01-18T07:21:28.203

您可以尝试这种情况。

```
SELECT 
        r.col1,r.col2 
FROM    tabel1 r 
WHERE ROW ( r.col1,r.col2 ) NOT IN( 
                              SELECT 
                                  col1,col2 
                              FROM tabel2 
                              ); 
```

# c# - 使用 AForge.Net 识别另一个形状内的形状

> ID：13019870
> 
> 赞同：0
> 
> 时间：2012-10-22T21:06:24.947
> 
> 标签：c#, image-processing

作为项目的一部分，我正在使用 AForge.Net 库来做一些基本的图像处理工作。我发现识别图像中的单个几何形状（如正方形、圆形等）很简单。但是，当我有类似的图像时 ![图片](../Images/aa4cd5300311a4cd27059034d2e73610.png) ，程序只能识别外圈。我希望它被识别为一个圆圈和一条线。

类似地，另一个例子是， ![图像1](../Images/2afe4004f67004cd07d7bd0db66e97f9.png) 程序只识别一个正方形，但我需要它来识别它是一个正方形和一个圆形。

我猜这个库本身已经过时并且不再受支持，但我将非常感谢一些帮助！我发现这是一个非常容易使用的库，但是如果我的要求不能满足它，我也对其他库开放。（在 Java、C# 或 Python 中）。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T19:57:07.617

这是一项简单的任务，`Python`
您需要安装 和 之类的库`numpy`，`scipy.ndimage`并且只有`scipy.ndimage`您可以提取黑色背景上的任何形状。
因此，如果您的图像是白色背景，您需要先将其反转，这很容易。

```
import scipy.ndimage  
from scipy.misc import imread           # so I can read the image as a numpy array

img=imread('image.png')        # I assume your image is a grayscale image with a black bg.  
labeled,y=scipy.ndimage.label(img)   # this will label all connected areas(shapes).  
                                         #y returns how many shapes??  

shapes=scipy.ndimage.find_objects(labeled)         
# shapes returns indexing slices for ever shape  
# So if you have 2 shapes in your image,then y=2.
# to extract the 1st shape you do like this.  
first_shape=img[shapes[0]]          # that's is a numpy feature if you are familiar with numpy .
second_shape=img[shapes[1]] 
```

提取出您的个人形状后，您实际上可以做一些数学工作来确定**它是什么？**（例如循环比>>你可以谷歌它，它对你的情况有帮助）

# c# - 为什么我的 GeoCoordinateWatcher.PositionChanged 事件不经常触发？

> ID：13019875
> 
> 赞同：0
> 
> 时间：2012-10-22T21:06:41.290
> 
> 标签：c#, xna, geolocation

我有一个包装类，它启动和停止一个`GeoCoordinateWatcher`对象并将其设置`MovementThreshold`为 0，因为我正在使用 XNA 在 Windows Phone 7 上实现一种导航类型的应用程序/游戏。但是，该`PositionChanged`事件未正确触发。大多数时候它会触发 3 或 4 次然后卡住，但有时它也能完美运行，我不知道为什么。在`GameScreen.Update()`我正在检查观察者是否已启动，如果没有则启动它。当玩家通过主页按钮退出游戏或按下后退按钮时，我会停止观察。

PS：在模拟器上它一直完美无缺，所以我倾向于认为这与设备有关。GPS信号很好，因为我也在街上试过。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:37:07.423

原来我住的地方 GPS 信号很弱，所以问题解决了。

# javascript - 带有 if 语句的正则表达式

> ID：13019879
> 
> 赞同：1
> 
> 时间：2012-10-22T21:06:56.280
> 
> 标签：javascript, jquery, regex, if-statement, validation

我有这个作为我的正则表达式：

```
var email = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/; 
```

这是我的 if 语句：

```
if($('#email').val() ==""){  
    $('#emailErrorMsg').text("Please enter a valid email address.");
}  
else if(!email.test('#email')) {   
    $('#emailErrorMsg').text("OK");   
}  
else($('#emailErrorMsg').text("Please enter a valid email address."));  
}); 
```

当我输入有效的电子邮件地址时，它会显示“OK”。但是，例如，如果我只输入一些文本，当我希望它说“请输入有效的电子邮件地址”时，它仍然会说“确定”。任何人都有任何想法。顺便说一句，我仍然是这方面的业余爱好者！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:30:03.353

主要问题是您`?`在正则表达式的末尾有一个 a ，后面是括住整个模式的括号。这有效地使整个匹配成为可选的，因此正则表达式将匹配任何内容。

另请注意，您正在测试文字 string `#email`，而不是`#email`元素的值。确保将适当的字符串传递给`test()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-22T21:15:26.003

I see that you have [jquery](/questions/tagged/jquery "show questions tagged 'jquery'") tag, so take a look to [`JQuery` validate plugin](http://docs.jquery.com/Plugins/Validation), it will be better than a simple regex.

But if you still want regex, see [Validate email address in JavaScript?](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:29:50.627

验证电子邮件很*困难*。[完全正确的正则表达式是一个真正的怪物，你可以在http://www.ex-parrot.com/~pdw/Mail-RFC822-Address.html](http://www.ex-parrot.com/~pdw/Mail-RFC822-Address.html)看到（如果你敢的话），这*可能*不是你想要的。

相反，您有几个选择。使用匹配 99% 的电子邮件的正则表达式，在服务器端使用电子邮件验证库，或者实现一个有限状态机来正确解析它。状态机可能太笨重了（尽管允许一些简洁的东西，比如对可能的拼写错误的建议）并且在服务器端进行 - 你最好还是这样做（如果有人禁用了 JavaScript 怎么办？） - 失去了 as-you 的好处-类型检查。

这留下了一个更简单的正则表达式，它不匹配所有合法的电子邮件，但匹配的足够多，以至于有人注册的机会并不大。[JavaScript中验证电子邮件地址](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)的正则表达式？应该做得很好：

```
/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\
".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA
-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/ 
```

另外，你犯了一个小错字：

```
else if(!email.test('#email')) {   
    $('#emailErrorMsg').text("OK");   
} 
```

正在测试字符串“#email”——而不是 ID 为“email”的元素。将其更改为：

```
else if(!email.test($('#email').val())) {   
    $('#emailErrorMsg').text("OK");   
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T21:27:14.743

您的正则表达式中有一个小错字。尝试这个：

```
var email = /^([\w-\.]+)@([\w-]+\.)+[\w-]{2,6}?$/; 
```

那也应该处理 .museum 案

# c# - 如何用三角形覆盖多边形

> ID：13019881
> 
> 赞同：3
> 
> 时间：2012-10-22T21:07:00.207
> 
> 标签：c#, directx, slimdx

我在c#中使用slimdx，我的问题如下：
我有一个形成多边形的顶点列表，采用线条格式，我需要将其转换为覆盖多边形的三角形。
我从质心计算开始，但它只涵盖凸面计算，我需要一个通用解决方案。
最终结果应该是这样的：
![](../Images/d91350add6ed84e4e861176b259f1c10.png)

有没有人碰巧知道这个问题的任何算法？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T07:51:52.150

有一个非常适合您的用例的剪耳算法，可以在此处找到一个示例：

[剪耳 c#](http://www.codeproject.com/Articles/8238/Polygon-Triangulation-in-C)

# asp.net - Web.config 500 阻止 ipaddress - 内部服务器错误

> ID：13019887
> 
> 赞同：1
> 
> 时间：2012-10-22T21:07:12.740
> 
> 标签：asp.net

这是我的 web.config，其中有一些用于阻止 Ipaddress 的标签

```
<system.webServer>
<defaultDocument enabled="true">
  <files>
    <clear/>

    <add value="Default.aspx"/>
  </files>
</defaultDocument>
<modules runAllManagedModulesForAllRequests="true"/>
<security>

  <ipSecurity allowUnlisted="false">

    <clear/>

    <add ipAddress="21.2.22.2" allowed="true"/>

  </ipSecurity>
    </security> 
```

所以我的意图是阻止除上述之外的任何其他 IP。以上是我希望网站可以访问的唯一 IP 地址。但这是我收到的错误

500内部服务器错误。您要查找的资源有问题，无法显示。

我的网站托管在月球页面上。因此，根据我所指的[http://www.stokia.com/support/misc/web-config-ip-address-restriction.aspx，IP地址是客户端地址。](http://www.stokia.com/support/misc/web-config-ip-address-restriction.aspx)所以它不应该与托管服务提供商有任何关系。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T03:58:13.460

我怀疑您是否可以在 web.config 级别执行此操作，除非在服务器本身上安装了“IP 和域限制”角色。在此处查看文章[http://www.iis.net/configreference/system.webserver/security/ipsecurity](http://www.iis.net/configreference/system.webserver/security/ipsecurity)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-21T06:23:37.197

这可能会有所帮助。我在无法访问 IIS 的站点上使用它。它成功地阻止了单个 IP 地址。它可能可以修改为只允许某些 IP 地址。

[http://www.hanselman.com/blog/AnIPAddressBlockingHttpModuleForASPNETIn9Minutes.aspx](http://www.hanselman.com/blog/AnIPAddressBlockingHttpModuleForASPNETIn9Minutes.aspx)

# actionscript-3 - as3 从 url 获取变量

> ID：13019895
> 
> 赞同：0
> 
> 时间：2012-10-22T21:07:44.673
> 
> 标签：actionscript-3, flash, variables

我找到了这篇文章，并且几乎完全按照他们的建议使用了代码。它不起作用。我需要在php中添加一些东西吗？我究竟做错了什么？我错过了进口吗？

谢谢

这是我的代码：

**我的 php 链接是：www.mySite.com/example.php?id=true**

```
var search:String = ExternalInterface.call("window.location.search");
var vars:URLVariables = new URLVariables(search);

if(vars.id)
{
    /// Do something
} 
```

在这里找到答案，但对我不起作用。 [如何在 Flash AS3 中从 URL 获取/获取变量](https://stackoverflow.com/questions/2725231/how-to-get-obtain-variables-from-url-in-flash-as3)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:26:06.407

你忘了去掉页面地址：

```
var search:String = "www.mySite.com/example.php?id=true";
var vars:URLVariables = new URLVariables(search.substr(search.indexOf("?")+1));

if(vars.id) trace(vars.id); 
```

前提是您确定地址包含*?* 和您正在寻找的实际变量。

# c# - 从另一个类访问和设置一个类中的变量

> ID：13019896
> 
> 赞同：0
> 
> 时间：2012-10-22T21:07:51.173
> 
> 标签：c#, asp.net, class, variables, partial-classes

我有一个 shopping_cart.aspx.cs 文件，还有一个类文件 spcart.cs，

**购物车.aspx.cs**

```
public partial class Ui_ShoppingCart : System.Web.UI.Page
{
    public int tax = 0;   
    public int subtotal = 0;
    public int granttotal = 0;  

    protected void Page_Load(object sender, EventArgs e)
         {
             -------------------------/////some code
         }
   --------------------------------/////some code
} 
```

**spcart.cs**

```
public class Spcart
    {     
        public void updatecart(int pid,int qty)
         {
             ---------/////some code
         }
    } 
```

现在我想在`class Ui_ShoppingCart`类 Spcart 的变量 tax、subtoal 和 granttotals 中设置一些值，所以我尝试过-->

```
Ui_ShoppingCart.tax 
```

但它没有工作............
有没有其他方法来设置这些变量？？？
谁能帮我解决这个问题？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-22T21:23:46.650

我觉得应该反过来

```
protected void Page_Load(object sender, EventArgs e)
{
   SpCart cart = new SpCart();
   cart.updateCart(124, 4);

   tax = cart.getComputedTax();
   subTotal = cart.getSubTotal();
   ...
} 
```

这个想法是这些变量应该独立于您的 SpCart 代码。

```
public class Spcart
{     
     public void updatecart(int pid,int qty)
     {
         ---------/////some code
     }

     public int getComputedTax()
     {
       //can compute tax here
       int tax = whatever;
       return tax;
     }
} 
```

计算逻辑仍然可以分成其他类

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:24:21.930

我认为您正在尝试从“Spcart”类访问“Ui_ShoppingCart”中声明的“税”属性。这是不可能的。相反，您必须将它们作为附加参数传递给 updatecart 方法。

```
Spcart cart = new Spcart();
cart.updatecart(pid,qty,tax); 
```

或者如果在“spcart”类的其他方法中使用了tax，则在构造函数中对其进行初始化。

```
public class Spcart
{     
 private int _tax = 0;
 public Spcart(int tax)
 {
   _tax = tax;
 }
 public void updatecart(int pid,int qty)
 {
    int amount = qty + _tax;
 }
} 
```

并调用使用

```
Spcart cart = new Spcart(tax);
cart.updatecart(pid,qty); 
```

# heroku - heroku：bash：bundle：找不到命令

> ID：13019906
> 
> 赞同：6
> 
> 时间：2012-10-22T21:08:27.070
> 
> 标签：heroku, bundler, cedar

我正在按照他们的说明将 Heroku 应用程序从 Aspen 移植到 Heroku 的 Cedar 堆栈。

我在最后一个部署步骤。我收到此错误：

```
 2012-10-22T11:23:53+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -p 40310 -e production`
2012-10-22T11:23:54+00:00 app[web.1]: bash: bundle: command not found 
```

我看不出我如何负责告诉 Heroku 堆栈 bundle 在哪里或提供它，因为它正是使用 bundler 来完成这项工作的。此命令在应用程序的 Procfile 中指定：

```
web: bundle exec thin start -p $PORT -e $RACK_ENV 
```

stackoverflow 上的另一个类似问题表明，如果应用程序在最初没有 Procfile 的情况下被推送到 Heroku，就会发生这种情况，因此 Heroku 对它是什么类型的应用程序有错误的认识。那张海报删除了他的应用程序并创建了一个新应用程序并报告成功。但是，删除和重新创建我移植的应用程序所涉及的工作量很大。有什么方法可以解决这个问题而不是重新开始吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T19:12:01.020

Heroku 的 slug 构建过程必须在 ruby​​ 1.8.7 应用程序方面发生变化。我猜他们开始捆绑到 1.8 路径而不是 1.8 应用程序的 1.9.1。在我尝试推送新版本后，我以前工作的应用程序停止工作。

这是让它再次工作的原因：

```
heroku config:add PATH=bin:vendor/bundle/1.8/bin:/usr/local/bin:/usr/bin:/bin GEM_PATH=vendor/bundle/1.8 
```

我使用与以前相同的 git 存储库从新创建的应用程序中获取这些路径。

编辑：原来 heroku 发表了一篇开发中心文章[更改 Ruby 版本中断路径](https://devcenter.heroku.com/articles/changing-ruby-version-breaks-path)，其中指定了各种 ruby​​ 版本的路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-26T17:45:34.923

我有同样的问题，我通过设置正确的 heroku 配置变量来解决它

```
$ heroku config
=== xxxx Config Vars
DATABASE_URL:                  postgres://(...)
GEM_PATH:                      vendor/bundle/ruby/1.9.1
HEROKU_POSTGRESQL_CRIMSON_URL: postgres://(...)
LANG:                          en_US.UTF-8
PATH:                          bin:vendor/bundle/ruby/1.9.1/bin:/usr/local/bin:/usr/bin:/bin
PGBACKUPS_URL:                 https://(...)
RACK_ENV:                      production
RAILS_ENV:                     production 
```

您可以创建一个空的 rails 应用程序，将其推送到 heroku 并检查它自动设置的变量，然后将它们复制（并调整）到您的应用程序

# wso2 - WSO2 XML 声明

> ID：13019908
> 
> 赞同：2
> 
> 时间：2012-10-22T21:08:32.657
> 
> 标签：wso2, wso2esb

我正在使用 WSO2 ESB 4.0.3 来部署一个简单的服务。我有一项服务返回以下 XML：

```
<Employees>
    <Employee>
        <EmployeeID>JOHNDOE1</EmployeeID>
        <FirstName>JOHN</FirstName>
        <LastName>DOE</LastName>
    </Employee>
    <Status>1</Status>
</Employees> 
```

我遇到的问题是没有 XML 声明。是否有一个设置会返回包含 XML 声明的响应，还是我需要使用 ESB 响应来添加它？我希望有类似的东西：

```
<?xml version="1.0" encoding="utf-8"?>
<Employees>
    <Employee>
        <EmployeeID>JOHNDOE1</EmployeeID>
        <FirstName>JOHN</FirstName>
        <LastName>DOE</LastName>
    </Employee>
    <Status>1</Status>
</Employees> 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-01-28T11:45:09.063

这是一个老问题，但是看到我刚才遇到了同样的事情，我会发布我的解决方案。

我需要有一个代理服务返回一个没有封闭肥皂信封的纯 XML 消息。我尝试使用`application/xml`和`text/xml`（`org.apache.axis2.transport.http.ApplicationXMLFormatter`和`org.wso2.carbon.relay.ExpandingMessageFormatter`分别）内容类型无济于事。这些内容类型都没有返回带有 XML 声明的消息。

解决方案是编写自定义消息格式化程序。这是我的实现，其行为类似于`org.apache.axis2.transport.http.ApplicationXMLFormatter`但正确地将 XML 声明写入消息。

```
package com.example.axis2.messageformatter;

import java.io.IOException;
import java.io.OutputStream;

import org.apache.axiom.om.OMOutputFormat;
import org.apache.axis2.AxisFault;
import org.apache.axis2.context.MessageContext;
import org.apache.axis2.transport.http.ApplicationXMLFormatter;

public class CustomApplicationXmlFormatter extends ApplicationXMLFormatter {

  @Override
  public void writeTo(MessageContext context, OMOutputFormat format, OutputStream out, boolean preserve) throws AxisFault {
    String xmlHeader = "<?xml version=\"1.0\" encoding=\"" + format.getCharSetEncoding() + "\"?>";
    try {
      out.write(xmlHeader.getBytes());
    } catch (IOException e) {
      throw new AxisFault("Unable to write XML declaration to output stream.", e);
    }
    super.writeTo(context, format, out, preserve);
  }
} 
```

您可以将 jar 文件中的类拖放到`<ESB_ROOT>/repository/components/lib`. 此外，您需要`<ESB_ROOT>/repository/conf/axis2/axis2.xml`通过将以下内容添加到文件的消息格式化程序部分来引用来自 axis2 配置 ( ) 的类：

```
<messageFormatter contentType="application/xml" class="com.example.axis2.messageformatter.CustomApplicationXmlFormatter"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-03-18T20:07:07.377

正如 Kallja 之前回答的那样 - messageFormatter 应该是固定的。

我已经将他的修复实现为基于 maven 的项目 - 可在此处获得：[https ://github.com/akakunin/custom-appxml-message-formatter](https://github.com/akakunin/custom-appxml-message-formatter)

我已经用 WSO2 EI 6.0.0 对其进行了测试——它对我来说很好用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-23T02:42:11.940

您是如何捕获 SOAP 消息的？您可以使用[Tcpmon](http://ws.apache.org/commons/tcpmon/)或仅添加日志级别为 full 的[日志中介](http://docs.wso2.org/wiki/display/ESB450/Log+Mediator)来观察完整的完整消息。我假设您观察到的是 SOAP 主体。您不需要手动添加 xml 声明等。

```
<?xml version="1.0"?>
<soap:Envelope
xmlns:soap="http://www.w3.org/2001/12/soap-envelope"
soap:encodingStyle="http://www.w3.org/2001/12/soap-encoding">

<soap:Body xmlns:m="http://www.example.org/stock">
  <m:GetStockPriceResponse>
    <m:Price>34.5</m:Price>
  </m:GetStockPriceResponse>
</soap:Body>

</soap:Envelope> 
```

# shopify - 通过 API 创建的履行未保存跟踪号

> ID：13019913
> 
> 赞同：1
> 
> 时间：2012-10-22T21:08:43.800
> 
> 标签：shopify, profound-grid

我正在尝试使用 API 为订单创建履行，并且此履行应包括跟踪号。我将跟踪号与请求一起传递，并且请求似乎成功（订单在管理员中正确履行）。但是，我传递的跟踪号永远不会出现。

我不包括订单项（以履行订单中的所有项目），尽管我已经尝试过两种方式（一次履行一项）

```
//$id, $key and $password are set previously
$endpoint = "https://{$key}:{$password}@mystore.shopify.com/admin/orders/{$id}/fulfillments.json";
$fulfillment = array(
   'fulfillment' => array(
       'tracking_number' => '12345'
    )
);
$ch = curl_init($endpoint);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, false);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($fulfillment));
res = curl_exec($ch); 
```

运行上述代码后，$res 包含类似以下内容：

```
{"fulfillment":{"created_at":"2012-10-22T16:57:53-04:00","id":69428396,"order_id":143675378,"service":"manual","status":"success","tracking_company":null,"tracking_number":null,"tracking_url":"http://www.google.com/search?q=","updated_at":"2012-10-22T16:57:53-04:00","receipt":{},"line_items":[{"fulfillment_service":"manual","fulfillment_status":"fulfilled","grams":0,"id":233975006,"price":"19.00","product_id":108718266,"quantity":1,"requires_shipping":true,"sku":"","title":"Profound grid-enabled intranet","variant_id":248446746,"variant_title":null,"vendor":"Shopify","name":"Profound grid-enabled intranet","variant_inventory_management":null,"properties":[]},{"fulfillment_service":"manual","fulfillment_status":"fulfilled","grams":0,"id":233975008,"price":"19.00","product_id":108718276,"quantity":2,"requires_shipping":true,"sku":"","title":"Operative multi-tasking task-force","variant_id":248446754,"variant_title":null,"vendor":"Shopify","name":"Operative multi-tasking task-force","variant_inventory_management":null,"properties":[]}]}} 
```

您可以在该响应中看到，订单项的履行状态设置为已履行（正确），但 tracking_number 为空（不正确）。

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T22:10:30.390

需要为请求指定内容类型。

```
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Content-Type: application/json'); 
```

# bit-manipulation - 这个与位相关的表达有一个流行的名字吗？

> ID：13019922
> 
> 赞同：0
> 
> 时间：2012-10-22T21:09:44.527
> 
> 标签：bit-manipulation

这有一个流行的名字吗？：

```
#define ALL_BITS_SET(value, mask) ((value & mask) == mask) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T21:02:14.177

在 Smalltalk 中，我们早就有这个 Integer 方法

```
allMask: mask 
    "Treat the argument as a bit mask. Answer whether all of the bits that 
    are 1 in the argument are 1 in the receiver."

    ^mask = (self bitAnd: mask) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-24T10:27:12.743

是的，在对集合进行等效操作之后，它被称为“包含”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T21:14:47.607

信号掩蔽 | 位掩蔽 | 掩蔽

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-22T21:17:18.217

是的，`ALL_BITS_SET`。它只是一个简单的测试，检查是否`value`等于 . 表示的位组合`mask`。

# wpf - 转到 XAML 中的定义

> ID：13019923
> 
> 赞同：5
> 
> 时间：2012-10-22T21:09:46.480
> 
> 标签：wpf, xaml

在 VS 中查找对象的定义或根，我们有 F12 或 Go to Definition 选项。XAML 怎么样？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:22:51.947

我认为默认情况下您不会在 VS2012 中获得此功能。

但是有很多插件可以做到这一点

Resharper就是其中之一。`Binding`它使您能够在或`StaticResource`数据绑定属性中按 F12 。

编辑 2013 年 9 月：

VS 2013 现在标配了这个功能

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-22T21:15:26.007

一样。您可以右键单击名称或在名称中说“转到定义”我正在使用 VS2010

# ruby - Chef 传递修订变量以部署资源

> ID：13019925
> 
> 赞同：5
> 
> 时间：2012-10-22T21:09:48.927
> 
> 标签：ruby, git, deployment, chef-infra

我正在尝试将要部署的 git 分支传递给 Chef 部署资源，但它不起作用，我猜这是因为资源是单独编译然后才执行的？但我可能错了，因为我对 Ruby 的理解有限。

所以我正在尝试这样做：

```
ruby_block 'revision' do
  block do
    # Some code determines the branch to be deployed
    branch = 'master'

    node.run_state['branch'] = branch

  end
end

deploy "#{node['path']['web']}" do
  action :deploy
  repository "#{node['git']['repository']}"
  revision "#{node.run_state['branch']}"
end 
```

但是，部署资源没有通过该变量。

这是解决这个问题的正确方法吗？有没有更好的方法或其他方法？

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-24T08:18:15.700

目前，厨师编译您的**部署**资源**ruby​​_block**资源尚未运行，因此未设置 node.run_state['branch']。您必须将**部署**资源移动到**ruby​​_block**并动态定义它。

```
ruby_block 'revision' do
  block do
    # Some code determines the branch to be deployed
    branch = 'master'

    node.run_state['branch'] = branch

    depl = Chef::Resource::Deploy.new node['path']['web'], run_context
    depl.repository node['git']['repository']
    depl.revision node.run_state['branch']
    depl.run_action :deploy
  end
end 
```

# javascript - TypeError：GMaps 不是构造函数

> ID：13019927
> 
> 赞同：0
> 
> 时间：2012-10-22T21:09:53.340
> 
> 标签：javascript, jquery, google-maps

我正在尝试使用[gmaps.js](http://hpneo.github.com/gmaps/examples/basic.html)在我的网站上显示谷歌地图。

```
<div id="map">
    <!-- GMaps.js injection here. -->
</div>

<script language="javascript" type="text/javascript">
    $(document).ready(function () {
        var map = new GMaps({
            div: '#map',
            lat: -12.043333,
            lng: -77.028333
        });
    });
</script> 
```

我在 Firebugs 控制台上收到以下错误：

```
TypeError: GMaps is not a constructor
    lng: -77.028333 
```

在我的 _Layout.cshtml 文件中，这里是对 jQuery 和其他 Javascript 库的引用：

```
<head>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js">
<script src="//ajax.googleapis.com/ajax/libs/jqueryui/1.8.23/jquery-ui.min.js">
<link href="http://ajax.aspnetcdn.com/ajax/jquery.ui/1.8.10/themes/blitzer/jquery-ui.css" rel="Stylesheet">
<link rel="stylesheet" type="text/css" href="/cassette.axd/asset/Public/assets/stylesheets/main.less?zrfwD7IeGX87BD2hXeX_19D7PM4=">
<link rel="stylesheet" type="text/css" href="/cassette.axd/asset/Public/assets/stylesheets/bootstrap.css?Fr-zb2zZgNbHEFtP2LHSlWzPcTc=">
<script type="text/javascript" src="/cassette.axd/asset/Public/assets/javascripts/gmaps.js?l4YO_kYaJ82XSUboAjqvgNOTSog=">
<script type="text/javascript" src="/cassette.axd/asset/Public/assets/javascripts/jquery.unobtrusive-ajax.js?1e4_Y6C_dosNDw5vnP_HMJnJOaI=">
<script type="text/javascript" src="/cassette.axd/asset/Public/assets/javascripts/jquery.validate.js?N48SH-DQLi1ZxkCU5H4QfkU_Vqk=">
<script type="text/javascript" src="/cassette.axd/asset/Public/assets/javascripts/jquery.validate.unobtrusive.js?H9QpwLXle-pJHFboqVks8SmWPD8=">
<script type="text/javascript" src="/cassette.axd/asset/Public/assets/javascripts/MicrosoftAjax.debug.js?5os4UsHTQvdRWuk_dD_ZJbhKv2o=">
<script type="text/javascript" src="/cassette.axd/asset/Public/assets/javascripts/MicrosoftMvcAjax.debug.js?VuXJYhbnFpRWN4gr3pwlAyCdWUg=">
<script type="text/javascript" src="/cassette.axd/asset/Public/assets/javascripts/MicrosoftMvcValidation.debug.js?HcBKh9uDD_B8LpYqpQW1dYU6woI=">
</head> 
```

任何想法为什么会被解雇？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T01:15:00.170

你不见了

```
 <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script> 
```

从你的标题。如果你查看 gmaps.js 的第一行，你会看到

```
if(window.google && window.google.maps){ 
```

因此，它依赖于 Google Maps API，即使它简化了它。

# jquery - 为什么我的 Jquery 命令不停止表单提交过程？

> ID：13019928
> 
> 赞同：-1
> 
> 时间：2012-10-22T21:10:06.133
> 
> 标签：jquery

我收到确认密码不匹配的错误消息，但我的数据库仍然添加了新列表！为了使脚本停止提交表单，我需要做什么？我对编码的理解很薄弱！

```
<script src="scripts/jquery.js" type="text/javascript">
jQuery(function(){
  $("#submit").click(function(){
    $(".error").hide();
    var hasError = false;
    var passwordVal = $("#password").val();
    var checkVal = $("#repeatpassword").val();
    if (passwordVal == '') {
      $("#password").after('<span class="error">Please enter a password.</span>');
      hasError = true;
    } else if (checkVal == '') {
      $("#repeatpassword").after('<span class="error">Please re-enter your password.</span>');
      hasError = true;
    } else if (passwordVal != checkVal ) {
      $("#repeatpassword").after('<span class="error">Passwords do not match.</span>');
      hasError = true;
    }
    if(hasError == true) {return false;}
  });
});
</script>
<form method="post" name="form1" action="<?php echo $editFormAction; ?>">
  <table align="center">
    <tr valign="baseline">
      <td nowrap align="right">First name:</td>
      <td><input type="text" name="firstname" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Last name:</td>
      <td><input type="text" name="lastname" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Email:*</td>
      <td><input type="text" name="email" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Password:*</td>
      <td><input type="password" name="password" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Repeat Password:*</td>
      <td><input type="password" name="repeatpassword" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right" valign="top">Channel url:*</td>
      <td><textarea name="channelurl" cols="50" rows="1"></textarea></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Channel name:*</td>
      <td><input type="text" name="chanelname" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Description:</td>
      <td><textarea name="description" cols="32" rows="6"></textarea></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Video 1:* </td>
      <td><input type="text" name="embedd1" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">What game is it?</td>
      <td><input type="text" name="game1" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Video 2:</td>
      <td><input type="text" name="Embedd2" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">What game is it?</td>
      <td><input type="text" name="game2" value="" size="32"></td>
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">Keywords to describe and find your channel*</td>
      <td><input type="text" name="keywords" value="" size="32"></td>  
    </tr>
    <tr valign="baseline">
      <td nowrap align="right">&nbsp;</td>
      <td><input type="submit" value="Channel Create"></td>
    </tr>
  </table>
  <input type="hidden" name="chanelID" value="">
  <input type="hidden" name="MM_insert" value="form1">
</form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:12:55.417

我建议绑定到表单的提交事件，然后完全阻止默认操作，仅在您希望提交时才提交。

```
$("#formid").submit(function(event){
   event.preventDefault();

   // validate form
   var valid = true;

   if (valid) {
       this.submit();
   }
}); 
```

这可以防止您的表单由于错误或逻辑问题而意外提交（*除非逻辑问题涉及 的值`valid`*）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T21:16:52.543

Try binding to the form's **submit()** event instead of the button's **click()** event.

So, on the third line, instead of

```
$("#submit").click(function(){ 
```

Use

```
$("form").submit(function(){ 
```

# css - 引导程序中的标签和徽章

> ID：13019929
> 
> 赞同：5
> 
> 时间：2012-10-22T21:10:14.590
> 
> 标签：css, twitter-bootstrap

通过使用引导程序，我想显示上下文类似于 av 或 a x 的绿色和红色标签。

v 应该是绿色的，x 应该是红色的。

我写了以下代码，但我希望有更好的效果。

```
<span class="badge badge-success">V</span>
<span class="badge badge-important">X</span> 
```

任何想法我应该如何使用引导程序来获得它？

这是我使用引导标签和徽章获得的示例。

![在此处输入图像描述](../Images/8b7e7d3af71422c64d35a490c8416764.png)

![在此处输入图像描述](../Images/b456df023f52c9210ee34cb86d9d3e2f.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-22T21:19:10.337

如果您将 font-awesome ( [http://fortawesome.github.com/Font-Awesome/](http://fortawesome.github.com/Font-Awesome/) ) 与 Twitter bootstrap （它的设计目的）结合使用，您将能够执行以下操作：

```
<i class="icon-ok-sign" style="color: green; font-size: 18pt;"></i>
<i class="icon-remove-sign" style="color: red; font-size: 18pt;"></i>
<br/><br/>

<i class="icon-ok-circle" style="color: green; font-size: 18pt;"></i>
<i class="icon-remove-circle" style="color: red; font-size: 18pt;"></i>
<br/><br/>

<i class="icon-ok" style="color: green; font-size: 14pt;"></i>
<i class="icon-remove" style="color: red; font-size: 14pt;"></i> 
```

这将输出：

![在此处输入图像描述](../Images/4a8fb5f04677b824f4d5b10d895ce15e.png)

或者您可以使用其他地方定义的 CSS 类来适当地设置它们的样式。

Font-awesome 基于 SVG 图像，它们可以缩放到任何大小（在合理和使用范围内）。
您现在还可以使用[icnfnt](https://github.com/johnsmclay/icnfnt)对您需要的图标进行子集化，而不是默认包含它们。

# extjs - 如何使 extjs 网格成为表单字段？

> ID：13019934
> 
> 赞同：1
> 
> 时间：2012-10-22T21:10:34.580
> 
> 标签：extjs, extjs4

我需要创建一个基本上是 extjs 网格的自定义表单字段。用户应该能够单击网格中的结果。这个点击的结果应该成为字段值。此外，该字段需要扩展 Ext.form.field。这是我得到的：

```
Ext.define('MyApp.field.Grid', {
    alias: 'widget.GriedField',
    extend: 'Ext.form.field.Base', 
```

我对如何添加网格以形成字段库感到很困惑。看起来表单字段库的模板需要 HTML。我如何让它接受一个组件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T01:58:07.323

如果您只需要从项目列表中选择一个值。为什么不使用组合框？

如果您需要选择多个项目。文档示例中有一个如何使用 MultiSelect ux 组件的示例。

[http://docs.sencha.com/ext-js/4-1/#!/example/multiselect/multiselect-demo.html](http://docs.sencha.com/ext-js/4-1/#!/example/multiselect/multiselect-demo.html)

如果你真的必须使用网格。然后我就不会费心尝试创建一个字段类型并让自己感到悲伤。

[为您的网格selectionchange](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.grid.Panel-event-selectionchange)事件添加一个侦听器，并使用您希望从网格中获取的值更新表单中的[隐藏](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.Hidden)字段。任务完成。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-02T22:06:58.263

我最终通过创建对我的模型的依赖项间接地将网格放在表单上。

我的模型有主细节，细节只是商店参考。我发现使用关联对我不起作用。

因此，在向表单添加字段时，我有一些东西可以管理模型（主记录）和详细信息存储的更改事件。

# simplepie - 更改 get_description() 上的字符限制

> ID：13019935
> 
> 赞同：1
> 
> 时间：2012-10-22T21:10:35.930
> 
> 标签：simplepie

刚刚设置了 simplepie 并且工作得很好，我想改变 get_description() 输出上的字符数限制，我找不到任何使用最新版本 1.3 可以在任何地方改变它的方法

我似乎得到了大约 240 个字符的帖子内容用于输出，然后是“...继续阅读”链接，我想删除此链接并将字符输出增加到 400。

任何想法我如何去做这件事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:23:56.737

设法（最终）在 Wordpress 中找到了问题（来自博客的 RSS 提要）并安装了一个插件来增加标准摘录长度，嘿嘿！

# python - 为什么我不能让 `pip install lxml` 在 vi rtualenv 中工作？

> ID：13019942
> 
> 赞同：70
> 
> 时间：2012-10-22T21:11:10.197
> 
> 标签：python, virtualenv, virtualenvwrapper

注意：我正在使用 virtualenvwrapper。

在激活虚拟环境之前：

```
$ pip install lxml
Requirement already satisfied (use --upgrade to upgrade): lxml in /usr/lib/python2.7/dist-packages  
Cleaning up... 
```

激活虚拟环境后：

```
(test-env)$ pip install lxml
force/build/lxml/src/lxml/includes/etree_defs.h:9:31: fatal error: 
libxml/xmlversion.h: No such file or directory

compilation terminated.

error: command 'gcc' failed with exit status 1

----------------------------------------
Command /home/chaz/dev/envs/test-with-system-python-force/bin/python2
.7 -c "import setuptools;__file__='/home/chaz/dev/envs/test-with-
system-python-force/build/lxml/setup.py';exec(compile(open(__file__).
read().replace('\r\n', '\n'), __file__, 'exec'))" install --record 
/tmp/pip-bJ6Q_B-record/install-record.txt --single-version-externally
-managed --install-headers /home/chaz/dev/envs/test-env/include/site/python2.7 failed with error code 1 in 
/home/chaz/dev/envs/test-env/build/lxml
Storing complete log in /home/chaz/.pip/pip.log 
```

* * *

## 回答 #1

> 赞同：133
> 
> 时间：2012-10-22T21:14:46.343

您可能已经在系统上安装了 lxml，可能是由于系统软件包而安装的。因此，第一次尝试（`pip install lxml`没有活动的 virtualenv）不会失败，但也不会安装它；它真的什么也没做。

在 virtualenv 中，默认情况下，系统包被忽略。因此，pip认为没有安装lxml。因此，它会尝试将其安装到您的虚拟环境中。

lxml 包含需要编译才能正确安装的 C 模块。但是，这些 C 模块的编译依赖于您已经安装了一些“开发库”。这些开发库是 C 库，而不是 Python，因此 pip 将无法自动从 Internet 获取它们并为您安装它们。

因此，您需要自己安装这些开发库，很可能使用您的包管理器。在 Debian 系统（如 Ubuntu）中，这是...

```
apt-get install libxml2-dev libxslt-dev 
```

这会将 libxml2 和 libxslt 开发库安装到您的本地系统。如果您再次尝试安装 lxml，C 模块编译步骤应该可以工作，因为现在这些开发库已在您的系统上。

您收到的错误消息是由于缺少这些库（`libxml/xmlversion.h: No such file or directory`错误消息的一部分）。

另请参阅：[如何在 Ubuntu 上安装 lxml](https://stackoverflow.com/questions/6504810/how-to-install-lxml-with-easy-install)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2014-01-14T09:32:53.540

**对于 centos 用户：** 获取时：

> 错误：命令“gcc”失败，退出状态为 1

做：

```
sudo yum install libxslt-devel libxml2-devel 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-01-25T20:19:01.103

如果您已在系统级别安装`lxml`，并且想要将其迁移到您`virtualenv`没有使用.`--system-site-packages``virtualenv``dist-packages`

在您的`virtualenv`, 在 python shell 中：

```
import lxml
print lxml.__file__ 
```

就我而言，它位于`/usr/lib/python2.7/dist-packages`. 会有一个 lxml 文件夹和 egg-info 文件。无论您的 virtualenv 在哪里，进入它的`/lib/python-x.y/dist-packages`文件夹（您可能需要创建`dist-packages`），并将库文件夹和 egg 符号链接到其中。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-07-18T17:24:07.773

您最有可能在寻找这个： [Microsoft Visual C++ 14.0 is required (Unable to find vcvarsall.bat)](https://stackoverflow.com/questions/29846087/microsoft-visual-c-14-0-is-required-unable-to-find-vcvarsall-bat)

查找 Visual Studio 网站并进入：底部的“Visual Studio 工具”，单击展开。选择顶部“Build Tools for Visual Studio 2017”旁边的下载。

# ruby-on-rails - 将 Rails 应用程序部署到 heroku 错误（sqlite3-> Postgresql）？

> ID：13019956
> 
> 赞同：1
> 
> 时间：2012-10-22T21:11:58.817
> 
> 标签：ruby-on-rails, sqlite, postgresql, deployment, heroku

当我在 heroku 上对我的 rails 应用程序进行一些更改时，我突然收到“应用程序错误”。而且不确定为什么，我找不到合适的解决方案。

以下是日志：

```
 2012-10-22T20:05:26+00:00 heroku[slugc]: Slug compilation started
   2012-10-22T20:06:54+00:00 heroku[web.1]: State changed from up to starting
   2012-10-22T20:06:54+00:00 heroku[slugc]: Slug compilation finished
   2012-10-22T20:06:56+00:00 heroku[web.1]: Starting process with command `bundle e
   xec rails server -p 28612`
   2012-10-22T20:06:56+00:00 heroku[web.1]: Stopping all processes with SIGTERM
   2012-10-22T20:06:57+00:00 app[web.1]:   /usr/local/lib/ruby/1.9.1/webrick/server
   .rb:90:in `select'
   2012-10-22T20:06:57+00:00 app[web.1]: [2012-10-22 20:06:57] ERROR SignalExceptio
   n: SIGTERM
   2012-10-22T20:07:06+00:00 heroku[web.1]: Stopping remaining processes with SIGKI
   LL
   2012-10-22T20:07:06+00:00 heroku[web.1]: Error R12 (Exit timeout) -> At least on
   e process failed to exit within 10 seconds of SIGTERM
   2012-10-22T20:07:08+00:00 heroku[web.1]: Process exited with status 137
   2012-10-22T20:07:57+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process
   failed to bind to $PORT within 60 seconds of launch
   2012-10-22T20:07:57+00:00 heroku[web.1]: Stopping process with SIGKILL
   2012-10-22T20:07:58+00:00 heroku[web.1]: State changed from starting to crashed
   2012-10-22T20:07:58+00:00 heroku[web.1]: State changed from crashed to starting
   2012-10-22T20:07:58+00:00 heroku[web.1]: Process exited with status 137
   2012-10-22T20:08:01+00:00 heroku[web.1]: Starting process with command `bundle e
   xec rails server -p 26859`
   2012-10-22T20:09:01+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process
   failed to bind to $PORT within 60 seconds of launch
   2012-10-22T20:09:01+00:00 heroku[web.1]: Stopping process with SIGKILL
   2012-10-22T20:09:02+00:00 heroku[web.1]: Process exited with status 137
   2012-10-22T20:09:02+00:00 heroku[web.1]: State changed from starting to crashed
   2012-10-22T20:09:27+00:00 heroku[router]: Error H10 (App crashed) -> GET www.thr
   illengine.com/ dyno= queue= wait= service= status=503 bytes=` 
```

在开发中它工作正常。

**更新：**

40 分钟后，一切恢复正常并正常工作。奇怪，考虑到我真的什么都没做。还有其他人遇到类似的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:32:10.857

1.  gem 文件是否有 pg gem？

2.  您是否在生产数据库上迁移了您的数据库？

3.  部署是否有任何错误？

# extjs - extjs 日期字段浏览器未显示

> ID：13019957
> 
> 赞同：1
> 
> 时间：2012-10-22T21:12:01.453
> 
> 标签：extjs, cross-browser, extjs4.1, datefield

所以我似乎在这方面找不到任何东西，但我遇到了一个奇怪的跨浏览器问题，我似乎无法找出它发生的原因。我有一个应该拉回某个日期的日期字段。在 Chrome 中显示日期，而在 FF 和 IE 中则不显示。

奇怪的是，我查看了从后端返回的数据并且日期在那里，它只是设置输入的值（也不是我们要求提取数据的任何位置。甚至在网格中）

有什么我遗漏的东西可以让它在 Chrome 中正确显示，但在 FF 和 IE 中没有？也许商店或模型中有什么东西？

我在 ExtJS 4.1.2 上，以防万一有助于回答问题

视图（网格）

```
Ext.define('MyApp.view.ContractGrid', {
extend: 'Ext.grid.Panel',
alias: 'widget.ContractGrid',

height: 443,
id: 'contractgrid',
itemId: '',
width: 667,
title: 'Contract Search',
store: 'ContractStore',

initComponent: function() {
    var me = this;

    Ext.applyIf(me, {
        columns: [
            {
                xtype: 'gridcolumn',
                dataIndex: 'ContractNumber',
                text: 'Contract #'
            },
            {
                xtype: 'datecolumn',
                hidden: false,
                dataIndex: 'LicenseDate',
                text: 'License Date'
            },
        ],
        viewConfig: {

        },
        selModel: Ext.create('Ext.selection.RowModel', {

        }),
        dockedItems: [
            {
                xtype: 'toolbar',
                dock: 'top',
                items: [
                    {
                        xtype: 'button',
                        text: '+ New Contract',
                        listeners: {
                            click: {
                                fn: me.onButtonClick,
                                scope: me
                            }
                        }
                    }
                ]
            }
        ]
    });

    me.callParent(arguments);
},
}); 
```

查看（面板）

```
Ext.define('MyApp.view.ContractPanel', {
extend: 'Ext.panel.Panel',
alias: 'widget.ContractPanel',

requires: [
    'MyApp.view.ModuleTabs'
],

draggable: false,
height: 804,
id: 'contractpanel',
autoScroll: true,
layout: {
    type: 'absolute'
},
manageHeight: false,

initComponent: function() {
    var me = this;

    Ext.applyIf(me, {
        items: [
            {
                xtype: 'form',
                border: 0,
                height: 350,
                itemId: 'ContractForm',
                maxHeight: 400,
                width: 1060,
                layout: {
                    type: 'absolute'
                },
                bodyPadding: 10,
                manageHeight: false,
                items: [
                    {
                        xtype: 'panel',
                        border: 0,
                        height: 310,
                        margin: '',
                        minWidth: 450,
                        padding: '',
                        width: 480,
                        layout: {
                            type: 'absolute'
                        },
                        manageHeight: false,
                        items: [
                            {
                                xtype: 'textfield',
                                x: 0,
                                y: 0,
                                disabled: true,
                                margin: '',
                                padding: 5,
                                width: 236,
                                name: 'id',
                                fieldLabel: 'Contract ID',
                                labelWidth: 110
                            },
                            {
                                xtype: 'textfield',
                                x: 0,
                                y: 30,
                                margin: '',
                                padding: 5,
                                width: 236,
                                inputId: '',
                                name: 'ContractNumber',
                                fieldLabel: 'Contract Number',
                                labelWidth: 110
                            },
                            {
                                xtype: 'datefield',
                                x: 0,
                                y: 190,
                                padding: 5,
                                width: 210,
                                name: 'LicenseDate',
                                fieldLabel: 'License Date',
                                labelWidth: 110,
                                submitFormat: 'Y-d-m'
                            },
                        ]
                    }
                ]
            },
            {
                xtype: 'ModuleTabs',
                id: 'ModuleTabs',
                x: 0,
                y: 360
            }
        ]
    });

    me.callParent(arguments);
}); 
```

店铺

```
Ext.define('MyApp.store.ContractStore', {
extend: 'Ext.data.Store',
alias: 'store.ContractStore',

requires: [
    'MyApp.model.ContractModel'
],

constructor: function(cfg) {
    var me = this;
    cfg = cfg || {};
    me.callParent([Ext.apply({
        autoLoad: true,
        autoSync: true,
        remoteFilter: true,
        remoteSort: true,
        storeId: 'contract',
        model: 'MyApp.model.ContractModel',
        buffered: true,
        pageSize: 200,
        listeners: {
            write: {
                fn: me.onStoreWrite,
                scope: me
            }
        }
    }, cfg)]);
}

}); 
```

模型

```
Ext.define('MyApp.model.ContractModel', {
extend: 'Ext.data.Model',
alias: 'model.ContractModel',

uses: [
    'MyApp.model.ModuleModel'
],

idProperty: 'id',

fields: [
    {
        name: 'id',
        type: 'int'
    },
    {
        name: 'ContractNumber',
        type: 'string'
    },
    {
        name: 'LicenseDate',
        type: 'date'
    }
],

hasMany: {
    model: 'MyApp.model.ModuleModel',
    foreignKey: 'contract_id',
    name: 'modules'
},

proxy: {
    type: 'direct',
    api: {
        create: contract.createRecord,
        read: contract.getResults,
        update: contract.updateRecords,
        destroy: contract.destroyRecord
},
    reader: {
        type: 'json',
        root: 'data'
    }
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T22:55:14.407

您的问题是您没有在模型上指定 dateFormat 。由于您不这样做，它会转到本机 JS Date.parse 方法来创建日期。一些浏览器比其他浏览器对它们接受的格式更宽松。

例如，在 FF 中比较这些：

```
console.log(Date.parse('2012-01-01'));
console.log(Ext.Date.parse('2012-01-01', 'Y-m-d')); 
```

长话短说，在模型上指定一个 dateFormat，这样您就不会让浏览器随心所欲地决定如何解析日期。

从文档：

> 当类型指定为“日期”时，将接收到的数据转换为日期时使用。
> 
> 序列化日期字段以供 Writers 使用时，也会使用格式字符串。
> 
> Ext.Date.parse 函数的格式字符串，如果 Reader 提供的值为 UNIX 时间戳，则为“timestamp”，如果 Reader 提供的值为 javascript 毫秒时间戳，则为“time”。请参阅 Ext.Date。
> 
> 值得注意的是，虽然此配置是可选的，但如果未指定，它将默认使用基本 JavaScript Date 对象的解析函数，而不是 Ext.Date.parse。这可能会导致意外问题，尤其是在时区之间转换时，或者在转换没有指定时区的日期时。本机 Date.parse 的行为是特定于实现的，并且根据日期字符串的值，它可能会返回 UTC 日期或本地日期。**因此，强烈建议您在解析日期时始终指定明确的日期格式。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T22:42:17.427

尝试使用日期格式来塑造模型中的日期字段，如下所示：

```
{name:'expectedCompleteBy', type:'date', mapping:'expectedCompleteBy', dateFormat:'Y-m-d'}, 
```

同样在您的网格中，您可以使用格式来显示日期字段，如下所示：

```
xtype:'datecolumn', format:'Y-m-d', dataIndex:'expectedCompleteBy' 
```

XTemplate 也有特殊的日期功能：

```
{expectedCompleteBy:date("Y-m-d")} 
```

并以以下形式：

```
{  xtype:'datefield',
   fieldLabel:'Need By Date',
   name:'needByDate',
   //submitFormat:'Y-m-d', defaults to format
   format:'Y-m-d'
 } 
```

日期格式 API：[http ://docs.sencha.com/ext-js/4-1/#!/api/Ext.Date](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Date)

# c# - 选择项目时，将 PropertyGrid 滚动条默认返回顶部

> ID：13019958
> 
> 赞同：0
> 
> 时间：2012-10-22T21:12:02.350
> 
> 标签：c#, .net, infragistics, propertygrid

在我的 C# .Net 程序中，项目列表显示在左侧，PropertyGrid 显示在右侧，其中包含有关所选项目的信息。当我移动 PropertyGrid 的滚动条然后从列表中选择另一个项目时，滚动条保持在以前的位置。每次选择新项目时，我都希望能够将滚动条重置到顶部。

我已经能够看到滚动条的 .value 存储在哪里，但我无法访问它（System.Windows.Forms.PropertyGridInternal.PropertyGridView.ScrollBar）。有什么方法可以访问这些值来更改它们？

这是我在其他问题中发现的唯一内容，但我不确定如何使此解决方案适应我的问题： [How can I catch scroll events in windows forms PropertyGrid](https://stackoverflow.com/questions/1596100/how-can-i-catch-scroll-events-in-windows-forms-propertygrid?answertab=active#tab-top)

**编辑：我链接到的问题是我最终是如何解决这个问题的。我使用反射来获取内部滚动条控件和 SetScrollOffset 方法，然后在左侧项目更改时使用它们将滚动条值设置为 0。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T01:48:26.363

您可以将 PropertyGrid 的 SelectedObject 设置为 null，然后再将其设置为新值。

# ruby-on-rails - 在安全警告之前使用 SSL 通配符将 mysite.com 重定向到 www.mysite.com

> ID：13019962
> 
> 赞同：0
> 
> 时间：2012-10-22T21:12:26.647
> 
> 标签：ruby-on-rails, ssl

我通过 DNSimple 为我的 Rails 站点提供了 SSL 通配符，并已部署到 Heroku。我的站点的所有子域都可以顺利运行全站点 SSL，除非我第一次在浏览器中输入没有子域的站点名称。

虽然我的 Heroku 设置重定向`http://mysite.com`到`https://www.mysite.com`，但浏览器首先会弹出一个安全警告，因为 SSL 证书`*mysite.com`需要一个子域。

在检查安全证书之前，有没有办法从没有子域重定向到有子域？

这是一个重大问题，因为要求/期望首次访问者在`www`站点名称之前输入是不合理的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-22T21:36:15.403

您可以使用子域重定向：[https ://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords#subdomain-redirection](https://devcenter.heroku.com/articles/avoiding-naked-domains-dns-arecords#subdomain-redirection)

但我认为只有 www 形式，因为它警告：

> [通过 SSL（即https://mydomain.com](https://mydomain.com) ）直接向裸域发出的请求 在使用子域重定向时会遇到警告。这是意料之中的，并且可以通过仅传播和公开您的安全 URL 的子域格式来避免。

# vim - 遍历正则表达式结果 vimscript

> ID：13019971
> 
> 赞同：5
> 
> 时间：2012-10-22T21:12:40.487
> 
> 标签：vim

在 vimscript 中，如何遍历当前文件中正则表达式的所有匹配项，然后为每个结果运行 shell 命令？

我认为这是一个开始，但我不知道如何将整个文件提供给它并获得每场比赛。

```
while search(ENTIRE_FILE, ".*{{\zs.*\ze}}", 'nw') > 0
    system(do something with THIS_MATCH)
endwhile 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T08:35:48.563

假设我们有一个包含内容的文件：

```
123 a shouldmatch
456 b shouldmatch
111 c notmatch 
```

我们喜欢匹配

```
123 a shouldmatch
456 b shouldmatch 
```

使用正则表达式

```
.*shouldmatch 
```

如果每行只有一个匹配项，则可以使用`readfile()`，然后循环遍历这些行并使用 . 检查每一行`matchstr()`。[1]

```
function! Test001()
  let file = readfile(expand("%:p")) " read current file
  for line in file
    let match = matchstr(line, '.*shouldmatch') " regex match
    if(!empty(match))
      echo match
      " your command with match
    endif
  endfor
endfunction 
```

你可以把这个函数放在你的`~/.vimrc`里面，然后用`call Test001()`.

[1] [http://vimdoc.sourceforge.net/htmldoc/eval.html#matchstr%28%29](http://vimdoc.sourceforge.net/htmldoc/eval.html#matchstr%28%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-22T23:25:01.330

你可以`subtitute()`改用。例如...

```
call substitute(readfile(expand('%')), '.*{{\zs.*\ze}}', 
    \ '\=system("!dosomething ".submatch(1))', 'g') 
```

# php - 以合适的方式存储 aa 列出新订单

> ID：13019974
> 
> 赞同：1
> 
> 时间：2012-10-22T21:12:57.013
> 
> 标签：php, jquery, jquery-ui, local-storage, jquery-ui-sortable

我正在使用 jQuery ui 的可排序。从数据库中检索对象列表并动态放入列表中，用户拖放列表对象，列表的新顺序应保存。

下面是可排序的 jQuery 代码，其中包括创建一个新列表顺序的数组。但是，下一步是做一些事情，以便我能够在我的 php 代码中使用这个数组。

问题是用户，除了对列表对象进行排序之外，还应该能够添加一些评论并做一些其他事情，然后全部提交。也就是说，我为此使用了一个表格。因此，我必须能够以某种方式将具有列表顺序的数组放入表单中，这就是我需要帮助的地方。

我应该使用什么方法？阿贾克斯？本地存储？这怎么可能实现？

```
 $('#listElements').sortable({

        update: function(event, ui) {
            var order = []; 
            $('.listObject li').each( function(e) {
                order.push($(this).attr('id'));
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T21:15:20.593

您需要使用 AJAX 将订单数组发送到 PHP，如下所示：

```
$('#listElements').sortable({
    update: function (event, ui) {
        var order = [];
        $('.listObject li').each(function (e) {
            order.push($(this).attr('id'));
        });
        $.ajax({
            url: "/save_order_to_db",
            type: "post",
            data: {
                order_data: order
            }
        }).success(function (data) {
            console.log(data);
        });
    }
}); 
```

# javascript - 如何将 AngularJS 与 Google API JavaScript 客户端一起使用？

> ID：13019980
> 
> 赞同：3
> 
> 时间：2012-10-22T21:13:14.557
> 
> 标签：javascript, oauth-2.0, angularjs

我想知道如何将此[Google API JavaScript 示例代码](https://code.google.com/p/google-api-javascript-client/wiki/Samples)转换为 AngularJS 应用程序。我以为它会很整洁。

作为后续，它将如何与 Oauth 2.0 一起使用？

谢谢。

我尝试使用 angularjs 种子应用程序并像这样修改它 -

```
// controller.js

function SampleListCtrl ( $scope, $http ){
  $http.
  jsonp( 'https://apis.google.com/js/client.js?onload=JSON_CALLBACK' ).
  success( function () {
    alert( 'go go GO' );
    function makeRequest () {
    var request = gapi.client.urlshortener.url.get({
      'shortUrl': 'http://goo.gl/fbsS'
    });

   request.execute( function(response) {
       $scope.longUrl = response.longUrl;
     });
   }

    gapi.client.setApiKey( 'XXXX' );
    gapi.client.load( 'urlshortener', 'v1', makeRequest );

    $scope.samples = data.feed.entry;
  });
}; 
```

在 index.html 中

```
<div ng-controller="SampleListCtrl">
    <h4>{{ longUrl }}</h4>
</div> 
```

RE：Roy Truelove 的提示我尝试添加一个正在触发的错误回调

```
error( function () {
  console.log( JSON.stringify( arguments ) );
}); 
```

我不确定会返回什么，所以我检查了 arguments 对象，因此控制台中的输出是 -

```
{"1":0,"3":{"method":"JSONP","url":"https://apis.google.com/js/client.js?onload=JSON_CALLBACK"}} 
```

警报不会触发，这意味着回调不起作用。我怎样才能让它发挥作用？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T20:37:30.077

您正在请求 JSON 但加载了一个 javascript 库，对吗？我不认为 http 服务是为此而设计的。您需要在引导 Angular 之前加载脚本，或者集成一个脚本加载器来动态加载它。

如果您仍然使用 Angular Seed 模板，那么您可以将 google API 添加到 index.html 中的脚本或使用异步加载器。

# vba - Workbooks.Open 返回与 Filename 不同的文件

> ID：13019981
> 
> 赞同：6
> 
> 时间：2012-10-22T21:13:20.500
> 
> 标签：vba, excel, excel-2010

我遇到了最奇怪的问题。前几天我在笔记本电脑上写了下面的代码，效果很好。现在，我正在我的桌面上对其进行测试，但它已停止工作。

首先，这是我的代码

```
Dim oApp As Application
Dim oWb As Workbook

Set oApp = New Application
oApp.Visible = True
Set oWb = oApp.Workbooks.Open(Filename:="C:\myFile.xlsx", ReadOnly:=True)

debug.print oWb.name
'returns "SOLVER.XLAM"
' "SOLVER.XLAM" is not "myFile.xlsx'

debug.print oApp.Workbooks.Count
'returns 1

debug.print oApp.Workbooks(1).name
'returns "myFile.xlsx" 
```

现在，我知道求解器是一个插件，它会在创建它时加载到新应用程序中......但是它是如何执行这个切换的呢？我仍然可以找到正确的文件，但我不想冒险碰巧我的 Application 对象中只有一个文件（或者第一个文件是我加载的文件）

### 附加信息

我正在调用从 excel 实例中执行此宏，并且我希望打开一个单独的 excel 实例，然后`"C:\myFile.xlsx"`在该其他实例中打开特定的工作簿 ()。

我遇到的关键问题是，当我打开另一个实例然后添加工作簿并将其设置为我的 oWb 变量时......不知何故，当我后来调用该 oWb 变量时，它指的是与我设置的不同的东西至。

```
'This is how it makes me feel:
Dim x As Integer
x = 5

Debug.Print x
' 12 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:27:14.113

我认为如果你只是稍微改进你的代码以确保你正在做你想要的，你会没事的。由于不清楚您是从 Excel 还是其他 MS Office 应用程序中调用代码，所以我将其放在下面的 subs 中。

如果在 Excel 中运行它，请运行它：

```
Option Explicit

Sub insideXL()

Dim oWb As Workbook
Set oWb = Workbooks.Open("C:\myFile.xlsx", ReadOnly:=True)

Debug.Print oWb.Name
Debug.Print Workbooks.Count
Debug.Print Workbooks(1).Name

oWb.Close false

Set oWb = Nothing    

End Sub 
```

如果在另一个程序中运行，请运行它。我使用早期绑定，但如果您愿意，您也可以使用后期绑定：

```
Sub outsideXL()
'make sure Microsoft Excel X.X Object Library is checked in Tools > References

Dim oApp As Excel.Application
Set oApp = New Excel.Application

Dim oWb As Excel.Workbook
Set oWb = oApp.Workbooks.Open("C:\myFile.xlsx", ReadOnly:=True)

oApp.Visible = True

Debug.Print oWb.Name
Debug.Print Workbooks.Count
Debug.Print Workbooks(1).Name

oWb.Close = True
Set oWb = Nothing
Set oApp = Nothing    

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-03T11:28:43.257

我发现这个（在 2007 年有效）：

```
wb = excel.Workbooks.Open(filename, False, True) 
```

需要写

```
excel.Workbooks.Open(filename, False, True)
wb = excel.ActiveWorkbook 
```

2010 年

# node.js - Node.JS + HTTPS + 客户端证书 = 问题

> ID：13019982
> 
> 赞同：4
> 
> 时间：2012-10-22T21:13:23.277
> 
> 标签：node.js, ssl, https, client, certificate

我一直在尝试让 Node.JS 使用 SSL 和客户端证书。最初，我曾试图让它与 restify 一起工作（请参阅我的问题[here](https://stackoverflow.com/questions/12826711/node-js-restify-requiring-client-certificate)）。当我无法让它发挥作用时，我备份并尝试找到一个示例来说明我正在尝试完成的工作。我试过[这个](http://vanjakom.wordpress.com/2011/08/11/client-and-server-side-ssl-with-nodejs/)，我收到一个奇怪的错误。

代码如下：

服务器：

```
var sys = require("sys");
var fs = require("fs");
var https = require("https");

var options = {
  key: fs.readFileSync("../certs/server.key"),
  cert: fs.readFileSync("../certs/server.crt"),
  ca: fs.readFileSync("../certs/ca.crt"),
  requestCert: true,
  rejectUnauthorized: true
};

https.createServer(options, function (req, res) {
  console.log(req);
  res.writeHead(200);
  sys.puts("request from: " + req.connection.getPeerCertificate().subject.CN);
  res.end("Hello World, " + req.connection.getPeerCertificate().subject.CN + "\n");
}).listen(8080);

sys.puts("server started"); 
```

客户：

```
var https = require('https');
var fs = require("fs");

var options = {
    host: 'localhost',
    port: 8080,
    path: '/hello',
    method: 'GET',
    key: fs.readFileSync("../certs/user.key"),
    cert: fs.readFileSync("../certs/user.crt"),
    ca: fs.readFileSync("../certs/ca.crt"),
    passphrase: 'thepassphrase'
};

var req = https.request(options, function(res) {
    console.log("statusCode: ", res.statusCode);
    console.log("headers: ", res.headers);

    res.on('data', function(d) {
        process.stdout.write(d);
    });
});

req.end();

req.on('error', function(e) {
    console.error(e);
}); 
```

运行 test-client.js 会产生以下结果：

```
{ [Error: socket hang up] code: 'ECONNRESET' } 
```

尝试用 curl 做同样的事情：

```
curl -k -v --key user.key --cert user.crt:thepassphrase --cacert ca.crt https://localhost:8080/hello 
```

产量：

```
* About to connect() to localhost port 8080 (#0)
*   Trying 127.0.0.1... connected
* successfully set certificate verify locations:
*   CAfile: ca.crt
  CApath: /etc/ssl/certs
* SSLv3, TLS handshake, Client hello (1):
* SSLv3, TLS handshake, Server hello (2):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Request CERT (13):
* SSLv3, TLS handshake, Server finished (14):
* SSLv3, TLS handshake, CERT (11):
* SSLv3, TLS handshake, Client key exchange (16):
* SSLv3, TLS handshake, CERT verify (15):
* SSLv3, TLS change cipher, Client hello (1):
* SSLv3, TLS handshake, Finished (20):
* Unknown SSL protocol error in connection to localhost:8080 
* Closing connection #0
curl: (35) Unknown SSL protocol error in connection to localhost:8080 
```

如果我想采取额外的步骤来要求客户证书，我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-23T10:51:51.813

把这个服务器放在 nginx 后面怎么样？

这听起来可能很复杂，或者会增加很多开销，但我向你保证这真的很简单，而且 nginx 的 SSL 处理很容易。

寻找**使用 nginx 的代理**（[示例](http://wiki.nginx.org/HttpProxyModule)）。

PS
这两个应用程序可以并且可能驻留在同一台服务器计算机中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-03-09T16:10:55.703

添加`rejectUnauthorized: false`服务器选项和客户端选项。

这告诉 nodejs 接受自签名证书。另请参阅[https://github.com/vanjakom/JavaScriptPlayground/pull/3](https://github.com/vanjakom/JavaScriptPlayground/pull/3)。

# r - 在 miRNA 表达数据上使用genefilter

> ID：13019984
> 
> 赞同：1
> 
> 时间：2012-10-22T21:13:23.137
> 
> 标签：r, bioinformatics

我使用genefilter作为步骤1对R进行差异表达分析。

我正在使用该`pOverA`功能以及在使用之前设置过滤器功能`genefilter()`（我已经查看了有关 Bioconductor 的教程）。

我的 miRNA Expression 数据没有`NA`s 或`NaN`s。它由规范化的日志数据组成，并`0`在其间散布有值。

我创建了一个表达式数据的 eset，然后：

```
ff1<-pOverA(0.2,-3.2,na.rm=TRUE)
ff2<-function(x) IQR(x) > 0.2
ff<-filterfun(ff1,ff2) 
```

我现在运行`genefilter( exprs(miREset), ff)`并收到一条错误消息：

> quantile.default(as.numeric(x), c(0.25, 0.75), na.rm = na.rm, 错误：如果 'na.rm' 为 FALSE，则不允许缺失值和 NaN 另外：警告消息：在quantile(as.numeric(x), c(0.25, 0.75), na.rm = na.rm, names = FALSE, : 强制引入的 NA

我花了很多时间试图理解为什么会这样。我对R相当陌生。

# html - 可以在带有标签的链接上使用空href吗

> ID：13019985
> 
> 赞同：3
> 
> 时间：2012-10-22T21:13:24.113
> 
> 标签：html, url, hyperlink

我将基本标签设置为：

```
<base href="http://mnapoli.github.com/PHP-DI/"> 
```

然后我想在相对路径中创建一个指向[http://mnapoli.github.com/PHP-DI/的链接。](http://mnapoli.github.com/PHP-DI/)

我试过：

```
<a href="">link</a> 
```

它适用于 Chrome，但这种方法是否标准并且应该适用于每个浏览器？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T21:47:57.080

我会做这样的事情：

```
<base href="http://mnapoli.github.com/PHP-DI/">

<a href="./">Home</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T21:55:10.510

尽管`href="./"`正如 Mike 的回答所建议的更好（阅读代码的人更容易理解），但对所提出问题的回答是，使用空 URL 是标准的，并且应该适用于所有浏览器。根据[STD 66](http://tools.ietf.org/html/std66)，允许使用没有字符（路径为空）的相对 URL，并且根据相对 URL 的规则，它被解析为基本 URL。

这与文件夹或文件无关；URL 是字符串，它们是否映射到服务器上的文件夹或文件由服务器自行决定。

# solr - Proper use of SolrResponse.getStatus()

> ID：13019986
> 
> 赞同：6
> 
> 时间：2012-10-22T21:13:25.423
> 
> 标签：solr, solrj

Looking around at examples on the web, I am guessing that [getStatus()](http://lucene.apache.org/solr/api-4_0_0-BETA/org/apache/solr/client/solrj/response/SolrResponseBase.html#getStatus%28%29) returns a zero for success, and that most failures will manifest as an exception, rather than a non-zero error code.

Is that true? Is it safe/correct to throw an error when getStatus() returns non-zero? What non-zero values might getStatus() return, and what would those values signify?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-12-13T06:45:48.153

我不确定，如果您在 solrj 中看到一个非零代码，因为`org.apache.solr.client.solrj.impl.HttpSolrClient.executeMethod(HttpRequestBase, ResponseParser):491`对于每个非 ok 状态代码，都会抛出一个 SolrException (sorlj 5.3.0) 。

可能的值是（根据[this](http://lucene.472066.n3.nabble.com/Response-status-td490876.html)，Solr 1.x）在`org.apache.solr.core.SolrCore`Method 中设置`postDecorateResponse`（Solr 5.2.1，在此之前它曾经是 Method `setResponseHeaderValues`），它将`500`用于一般 Exceptions 或`code`of `SolrException`（参见 Enum `SolrException.ErrorCode`） ：

```
400 - BAD_REQUEST
401 - UNAUTHORIZED
403 - FORBIDDEN
404 - NOT_FOUND
409 - CONFLICT
415 - UNSUPPORTED_MEDIA_TYPE
500 - SERVER_ERROR
503 - SERVICE_UNAVAILABLE
510 - INVALID_STATE
  0 - UNKNOWN 
```

我最终将每个响应传递给一个检查方法，这将引发一个异常：

```
private void checkResponse(SolrResponseBase response){
    if(response.getStatus() != 0){
        throw new RuntimeException(String.format("Solr-Response has error code %s",response.getStatus()));
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-23T01:29:56.540

根据文章[Indexing with SolrJ](http://searchhub.org/dev/2012/02/14/indexing-with-solrj/)中 getStatus 的示例用法，我同意您可以假设当 getStatus() 返回非零时抛出和出错是安全/正确的。不幸的是，我无法找到任何指示可能从 getStatus() 返回的非零值的引用。

# c - 从 C 中的文本文件中读取 CSV

> ID：13019993
> 
> 赞同：3
> 
> 时间：2012-10-22T21:13:44.823
> 
> 标签：c

我正在尝试从 C 中的文本文件中读取 CSV。文本文件格式是

```
1,Bob,bob@gmail.com
2,Daniel,daniel@gmail.com
3,John,john@gmail.com 
```

当我运行程序时，数字显示正常，但名称和电子邮件显示为垃圾。这是我的程序...

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct {
    int number;
    char* name;
    char* email;
} Owner;

Owner owners[100];

int load(char* filename)
{
    char buffer[200];
    char token[50];
    Owner* owner;
    int owners_size = 0;
    FILE* file = fopen(filename, "r");

    while(fgets(buffer, 200, file) != NULL)
    {
        owner = (Owner*)malloc(sizeof(Owner));
        owner->number = atoi(strtok(buffer, ","));
        owner->name = strtok(NULL, ",");
        owner->email = strtok(NULL, ",");
        owners[owners_size++] = *owner;
    }

    fclose(file);
    return owners_size;
}

int main()
{
    int choise, owners_size, index;
    char* owners_filename = "owners2.txt";

    owners_size = load(owners_filename);

    if(owners_size)
    {
        printf("owners size: %d\n\n", owners_size);

        for(index = 0; index < owners_size; index++)
            printf("%d, %s %s\n", owners[index].number, owners[index].name, owners[index].email);
    }
} 
```

谁能告诉我是什么原因。我感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-22T21:20:03.033

两个问题：

1.  您没有为结构中的字符串分配空间：

    ```
    typedef struct
    {
        int   number;
        char *name;
        char *email;
    } Owner; 
    ```

    您需要为这些指针提供空间来指向以保存名称。

2.  您继续为每行输入重复使用的缓冲区提供指针：

    ```
    while(fgets(buffer, 200, file) != NULL)
    {
        owner = (Owner*)malloc(sizeof(Owner));
        owner->number = atoi(strtok(buffer, ","));
        owner->name = strtok(NULL, ",");
        owner->email = strtok(NULL, ",");
        owners[owners_size++] = *owner;
    } 
    ```

    第一行作为一些指针存储到缓冲区中。下一行然后覆盖缓冲区并再次切断该行，践踏原始输入。

考虑使用`strdup()`：

```
while (fgets(buffer, 200, file) != NULL)
{
    owner = (Owner *)malloc(sizeof(Owner));
    owner->number = atoi(strtok(buffer, ","));
    owner->name = strdup(strtok(NULL, ","));
    owner->email = strdup(strtok(NULL, ","));
    owners[owners_size++] = *owner;
} 
```

这是一个有点危险的代码（我不会在生产代码中使用它），因为它不会检查是否`strtok()`在预期的时候找到了一个令牌（或者`strdup()`是成功的）。再说一次，我也不会[`strtok()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok.html)在生产代码中使用；如果可用，我会使用 POSIX[`strtok_r()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/strtok_r.html)或 Microsoft 的，或者一些替代技术，可能使用and 。如果不可用，您可以使用相同或不同的名称编写自己的名称：[`strtok_s()`](https://msdn.microsoft.com/en-us/library/ftsafwz3.aspx)`strspn()``strcspn()``strdup()`

```
char *strdup(const char *str)
{
    size_t len = strlen(str) + 1;
    char *dup = malloc(len);
    if (dup != 0)
        memmove(dup, str, len);  // Or memcpy() - that is safe in this context
    return(dup);
} 
```

* * *

您可能会注意到您的代码仅适用于简单的 CSV 文件。如果您遇到这样的一行（这是合法的 CSV），您就会遇到问题（值中有引号，并且由于引号字符串中的逗号而导致错误拆分）：

```
1,"Bob ""The King"" King","Bob King, Itinerant Programmer <bob@gmail.com>" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-22T21:19:03.403

返回的指针指向`strtok()`它正在解析的缓冲区中的地址，在本例中为局部变量`buffer`。当`load()`返回变量时，它超出了范围（即使不是所有的实例`owners`都指向同一个地址）。您需要复制返回的字符串`strtok()`。如果可用，您可以使用`strdup()`或使用`malloc()`and `strcpy()`。

不需要`malloc()`新的实例，`Owner`因为它们的数组已经存在（代码原样存在内存泄漏）。

请注意，没有针对超出`owners`数组范围的保护措施。如果文件有多个`100`条目，则循环将超出数组的范围。扩展 的终止条件`while`以防止这种情况：

```
while(owners_size < sizeof(owners) / sizeof(owners[0]) &&
      fgets(buffer, 200, file) != NULL)
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-22T21:18:21.460

您只是将指针存储到本地缓冲区中。当你离开时，`load()`它就`buffer`消失了，再也无法访问了。

您必须先分配内存，`name`然后`email`才能将其复制到`Owner`结构中。

```
char *tok;
tok = strtok(NULL, ",");
len = strlen(tok);
owner->name = malloc(len + 1);
strcpy(owner->name, tok);
... 
```

**[编辑：**您需要分配`len+1`字节，以便为终止`NUL`字符留出空间。 **-扎克]**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-22T21:21:51.703

你只有一个行缓冲区。循环中的每个循环`load`都会破坏前一个循环中的文本。如果这还不够糟糕，缓冲区会在`load`返回时被销毁。

快速解决方法是改变

```
owner->name = strtok(NULL, ",");
owner->email = strtok(NULL, ","); 
```

到

```
owner->name = strdup(strtok(NULL, ","));
owner->email = strdup(strtok(NULL, ",")); 
```

（如果你没有`strdup`，~~得到一台真正的电脑~~写起来很简单。）

但是，如果我正在查看您的代码，我会为您提供固定大小的行缓冲区、固定大小的所有者数组、内存泄漏、使用`atoi`而不是`strtol`、使用`strtok`而不是`strsep`以及没有引用处理和解析错误恢复，并指出将每行作为一个单元分配然后将指针保存到其中会更有效。

# amazon-s3 - 在 AWS EMR 上的 Hadoop 输出上使用 LZO 时，它是否会索引文件（存储在 S3 上）以供将来自动拆分？

> ID：13019996
> 
> 赞同：4
> 
> 时间：2012-10-22T21:13:54.377
> 
> 标签：amazon-s3, amazon-web-services, elastic-map-reduce, lzo

我想对存储在 S3 上的 Elastic Map Reduce 作业的输出使用 LZO 压缩，但不清楚这些文件是否会自动编制索引，以便将来在此数据上运行的作业会将文件拆分为多个任务。

例如，如果我的输出是一堆 TSV 数据行，在 1GB LZO 文件中，未来的地图作业是否只会创建 1 个任务，或者类似 (1GB/blockSize) 的任务（即文件未压缩时的行为，或者目录中是否有 LZO 索引文件）？

**编辑：**如果这不是自动完成的，推荐什么让我的输出被 LZO 索引？在将文件上传到 S3*之前*进行索引吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-23T05:39:57.267

**对我的第一个问题的简短回答：** AWS 不*进行*自动索引。我已经用我自己的工作证实了这一点，并且还在[他们的论坛上从 Andrew@AWS](https://forums.aws.amazon.com/message.jspa?messageID=186357#186357)那里读到了同样的内容。

**以下是如何进行索引：**

要索引一些 LZO 文件，您需要使用我自己从[Twitter hadoop-lzo](https://github.com/twitter/hadoop-lzo)项目构建的 Jar。如果您想直接使用 EMR 建立索引，您需要在某处构建 Jar，然后上传到 Amazon S3。

[附带说明，Cloudera 对在您自己的集群上进行设置](http://www.cloudera.com/blog/2009/11/hadoop-at-twitter-part-1-splittable-lzo-compression/)的所有步骤都有很好的说明。我在我的本地集群上做了这个，它允许我构建 Jar 并上传到 S3。如果您不想自己构建它，您可能可以在网上找到一个预先构建的 Jar。

从 Hadoop 作业输出数据时，请确保使用 LzopCodec 而不是 LzoCodec，否则文件不可索引（至少根据我的经验）。示例 Java 代码（同样的想法延续到 Streaming API）：

```
import com.hadoop.compression.lzo.LzopCodec;
TextOutputFormat.setCompressOutput(job, true); 
TextOutputFormat.setOutputCompressorClass(job, LzopCodec.class) 
```

一旦您的 hadoop-lzo Jar 在 S3 上，并且您的 Hadoop 作业已输出 .lzo 文件，请在输出目录上运行您的索引器（以下说明您已运行 EMR 作业/集群）：

```
elastic-mapreduce -j <existingJobId> \
  --jar s3n://<yourBucketName>/hadoop-lzo-0.4.17-SNAPSHOT.jar \
    --args com.hadoop.compression.lzo.DistributedLzoIndexer \
    --args s3://<yourBucketName>/output/myLzoJobResults \
    --step-name "Lzo file indexer Jar" 
```

然后在以后的工作中使用数据时，一定要指定输入为LZO格式，否则不会发生拆分。示例 Java 代码：

```
import com.hadoop.mapreduce.LzoTextInputFormat;
job.setInputFormatClass(LzoTextInputFormat.class); 
```