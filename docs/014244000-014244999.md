# StackOverflow 问答 14244000-14244999

# magento - 缺货消息出现两次

> ID：14244003
> 
> 赞同：0
> 
> 时间：2013-01-09T18:30:11.490
> 
> 标签：magento, cart

出于某种原因，我的可配置产品在购物车页面上出现了两次“延期交货”消息。我追查到这个法师代码的错误信息：

```
if ($this->getBackorders() == Mage_CatalogInventory_Model_Stock::BACKORDERS_YES_NOTIFY) {
    if (!$this->getIsChildItem()) {
        $result->setMessage(
            Mage::helper('cataloginventory')->__('This product is not available in the requested quantity. %s of the items will be backordered.', ($backorderQty * 1))
        );
    } else {
        $result->setMessage(
           Mage::helper('cataloginventory')->__('"%s" is not available in the requested quantity. %s of the items will be backordered.', $this->getProductName(), ($backorderQty * 1))
        );
    }
} 
```

我收到了每一条消息。这就像它对同一个产品检查两次，一次用于可配置产品，一次用于简单产品。

我认为这是一个配置问题，而不是我需要更改的代码中的内容。什么会导致这种奇怪的行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-29T15:50:46.480

我是这样做的。`preg_match`延期交货并`message['text']`控制它。这是给你的代码

```
 $i=0;
    foreach ($messages as $message):

      $txt= $message['text'] ;
      $re='(backordered)';  # Word 3

    if (preg_match_all ("/".$re."/is", $txt, $matches))
      { if($i == 0){?>
            <p class="item-msg <?php echo $message['type'] ?>">* <?php echo $this->escapeHtml($message['text']); ?></p>
     <?php }
     }
     else
     { ?>
      <p class="item-msg <?php echo $message['type'] ?>">* <?php echo $this->escapeHtml($message['text']) ?></p>
    <?php }
     $i++;
    endforeach; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-18T01:57:55.693

你重写了 Mage_Model_CatalogInventory_Observer 类吗？你用的是什么版本？

# c# - 通过 GDI+ 在指定点精确绘制字符串

> ID：14244004
> 
> 赞同：0
> 
> 时间：2013-01-09T18:30:11.097
> 
> 标签：c#, graphics, drawing, gdi+

我在 C# 中绘制字符串时遇到问题

这是我的代码：

```
Graphic.TextRenderingHint = System.Drawing.Text.TextRenderingHint.AntiAliasGridFit;
Pen pen = new Pen(brush, 2f);
Font font = new Font("Segoue UI", 15);
graphic.DrawString("2", font, brush, new PointF(0f, 0f)); 
```

以前我创建了图片框，并从中做了图形对象。问题是“2”不是在 (0;0) 中绘制，而是在 (4;5) 中绘制。如果我关闭 AntiAlias 的事件仍在 (4;5) 中。

我通过从 (0;0) 到 (200;0) 和从 (0;0) 到 (0;200) 绘制两条线来检查它，并根据它们计算出绘制字符串中的错误。

任何想法为什么？我需要在准确的点上绘制字符串。

//编辑我也在尝试以这种方式设置字体：

```
Font font = new Font("Microsoft Sans Serif", 10); 
```

并在（0,0）中绘制“2”，“2”的真实位置是（3,3）。与绘图“1”错误相同（3;3）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:45:50.003

`Graphics.DrawString`自动填充用于绘制字符串的框。原因是它的目的是为控件绘制标签文本等，因此是“现成的”，因此文本周围有填充。

微软最终意识到，这种方法对于需要更准确的文本绘制（即文本编辑器等）的情况并不是最好的，因此开发了`TextRendered`一个包装 GDI 而不是 GDI+ 并回馈“旧”的类。准确的字符串绘制。

尝试：

```
TextRenderer.DrawText(e.Graphics, "2", font, new Point(0, 0), brush); 
```

即使这样，您也可能会遇到填充，但在这里您可以更可靠地弥补这一点。检查下面的链接以查看您可以在该方法中使用哪些标志。

注意：如果您需要测量文本，请务必使用`TextRenderer.MeasureText()`。

有关更多详细信息，请访问：http:
[//msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.textrenderer.aspx)

标志：http:
[//msdn.microsoft.com/en-us/library/w3cdh3zw.aspx](http://msdn.microsoft.com/en-us/library/w3cdh3zw.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:23:06.860

如果你的“字符串”有一个降序字母，比如 ag 或 aj，会发生什么？每种字体都允许字母的降序部分，因此您可能需要通过查看字体的指标来考虑这一点

[http://msdn.microsoft.com/en-us/library/xwf9s90b.aspx](http://msdn.microsoft.com/en-us/library/xwf9s90b.aspx)

# php - 编写基于动态 PHP css 的进度条 - 数学百分比问题

> ID：14244021
> 
> 赞同：0
> 
> 时间：2013-01-09T18:31:14.610
> 
> 标签：php, math, equation

我正在编写一个 PHP 进度条，该进度条将通过提供给它的百分比数字进行自我更新，但我在计算百分比时遇到了问题。

我的代码目前如下：

**PHP**

```
$percent = $_GET['percent'];

if($percent < 5)
    //low-image.jpg

elseif($percent > 95)
   //high-image.jpg

else{
$lowpercent = 100 - $percent;

$highwidth = 270 / 100 * $percent;
$lowwidth = 270 / 100 * $lowpercent; 
```

**HTML**

```
<div class="first"></div>
<div class="mid-first" style="width:<?=$highwidth?>px;"></div>
<div class="mid-second" style="width:<?=$lowwidth?>px;"></div>
<div class="last"></div> 
```

**CSS**

```
.first. mid-first, .mid-second, .last{
    display:block;
    float:left;
    height:62px;
    }
.first{
    background:url(low.png);
    width:31px;
}
.mid-first{
    background:url(mid-first.png) repeat-x;
}
.mid-second{
    background:url(mid-second.png);
}
.last{
    background:url(high.png);
    width:32px;
} 
```

**问题**

目前百分比计算得有点不正确，我的数学大脑今天似乎放错了位置......

有 4 个 div，第一个和最后一个 div 各占 5%，所以 10%，中间的 div 等于其他 90%。

这意味着当数字 50 通过传入时，`$_GET`它将计算出 50% 的中间柱，不包括 5% 的第一个柱，这是错误的，它应该考虑前 5%，然后计算出 50%像素宽度？

如何更改百分比背后的数学以修复两个中间条，以便在应用 50% 时两个中间条的像素相等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:46:41.860

根本没有充分的理由使用像素。将你的 div 包裹在一个包含的 div 中，并在你的 CSS 中使用百分比。

PHP：

```
$lowpercent = 100 - $percent; 
```

HTML：

```
<div class="barwrapper">
    <div class="first"></div>
    <div class="mid-first" style="width:<?=($percent-5)?>px;"></div>
    <div class="mid-second" style="width:<?=($lowpercent-5)?>px;"></div>
    <div class="last"></div>
</div> 
```

CSS：

```
.first{
    background:url(low.png);
    width:5%;
}
.last{
    background:url(high.png);
    width:5%;
} 
```

**或者**`first`，如果你不想`last`被带离 100%：

```
<div class="first"></div>
<div class="barwrapper">
    <div class="mid-first" style="width:<?=($percent)?>px;"></div>
    <div class="mid-second" style="width:<?=($lowpercent)?>px;"></div>
</div>
<div class="last"></div> 
```

CSS：

```
.first{
    background:url(low.png);
    width:30px;
}
.last{
    background:url(high.png);
    width:30px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:41:37.947

您应该将宽度转换为整数，因为它也可以是浮点数，您可以通过简单地从总宽度中减去第一个条的宽度来计算第二个条的宽度。

```
// We have already used 10 percents, so let's substract them
$percent = $percent - 10;

// We can't have negative percents, right?
if ($percent < 0) $percent = 0;

// Calculate 1st bar
$highwidth = (int) 270 / 100 * $percent;

// 100% - 1st bar = 2nd bar
$lowwidth = 270 - $highwidth; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T18:35:48.257

您应该将 $highwidth 和 $lowwidth 转换为整数，然后再将它们写入 css 或 html。因为它们是浮点数。

我认为这可能有效：

```
$percent = $_GET['percent'];

if($percent < 5)
    //low-image.jpg

elseif($percent > 95)
   //high-image.jpg

else{
    $highwidth = intval(270 / 90 * ($percent-5));
    $lowwidth = 270 - $highwidth;
} 
```

# asp.net - WCF 配置：为所有绑定设置 maxReceivedMessageSize？

> ID：14244022
> 
> 赞同：2
> 
> 时间：2013-01-09T18:31:14.887
> 
> 标签：asp.net, wcf, web-services

目前我在每个绑定上设置**maxReceivedMessageSize**，有没有办法一次简单地设置它？

```
 <wsHttpBinding>
    <binding name="WSHttpBinding_IQQQService" maxReceivedMessageSize="250000"  />
    <binding name="WSHttpBinding_ISSSService" maxReceivedMessageSize="250000"  />
    <binding name="WSHttpBinding_IDDDService" maxReceivedMessageSize="250000"  />
    <binding name="WSHttpBinding_IFFFService" maxReceivedMessageSize="250000"  />
  ..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:33:27.913

如果您不提供名称，则应将其视为默认名称。

```
<wsHttpBinding>
  <binding maxReceivedMessageSize="250000">
</wsHttpBinding> 
```

这是针对 WCF4 的，更多信息可以[在 msdn](http://msdn.microsoft.com/en-us/library/ee354381.aspx)上找到。

# tinymce - Tinymce - 使用 html 标签重新加载数据

> ID：14244024
> 
> 赞同：2
> 
> 时间：2013-01-09T18:31:23.950
> 
> 标签：tinymce

我正在尝试重新加载由 tinymce 保存的数据。当我这样做时，所有的 html 标签都可以在控件内查看。

如何将 html 加载回控件，就像之前保存的一样（没有可见的标签）？

这是我的初始化：

```
 $('textarea.tinymce').tinymce({
        // Location of TinyMCE script
        script_url : '/Scripts/tinymce/tiny_mce.js',

        encoding: "xml",

        // General options
        theme : "advanced",
        plugins : "pagebreak,style,layer,table,save,advhr,advimage,advlink,emotions,iespell,inlinepopups,insertdatetime,preview,media,searchreplace,print,contextmenu,paste,directionality,fullscreen,noneditable,visualchars,nonbreaking,xhtmlxtras,template",

        // Theme options
        theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,styleselect,formatselect,fontselect,fontsizeselect,|,forecolor,backcolor",
        theme_advanced_buttons2 : "cut,copy,paste,pastetext,pasteword,|,search,replace,|,bullist,numlist,|,undo,redo,|,image,",
        theme_advanced_buttons3 : "tablecontrols,|,hr,removeformat,visualaid,|,sub,sup,ltr,rtl,|,fullscreen",
        theme_advanced_toolbar_location : "top",
        theme_advanced_toolbar_align : "left",
        theme_advanced_statusbar_location : "bottom",
        theme_advanced_resizing : false,

        // Example content CSS (should be your site CSS)
        //content_css : "/Content/content.css",

        // Drop lists for link/image/media/template dialogs
        template_external_list_url: "/Scripts/tinymce/lists/template_list.js",
        external_link_list_url: "/Scripts/tinymce/lists/link_list.js",
        external_image_list_url: "/Scripts/tinymce/lists/image_list.js",
        media_external_list_url: "/Scripts/tinymce/lists/media_list.js"
    });//end tinymce 
```

和我的文本区域：

```
<%: Html.TextArea("Blog", Model.Blog, new { @class = "tinymce", rows = "25", cols = "40"  })%> 
```

感谢您的时间。比利

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:17:03.760

使用 MVC 2 -

对我来说，解决这个问题的方法是存储使用 HttpUtility.HtmlDecode 解码的数据。

然后，当将其拉回并分配给我的模型的显示（字符串）属性时，我使用 HttpUtility.HtmlEncode 对字符串进行了编码。

最后，在视图页面上，我再次使用 HttpUtility.HtmlDecode 解码了相同的显示属性。

希望这可以帮助其他有类似问题的人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:46:35.497

见[http://www.tinymce.com/wiki.php/Configuration:encoding](http://www.tinymce.com/wiki.php/Configuration:encoding)

好像你需要设置`encoding: 'xml'`你的配置。

# c# - 将 TextBlock 绑定到 ListView 更改的属性

> ID：14244026
> 
> 赞同：0
> 
> 时间：2013-01-09T18:31:30.520
> 
> 标签：c#, wpf, binding, properties, observer-pattern

我就是想不通。我缺少什么来绑定`Textblock`？`TextBlock`每次我在`ListView`.

这是我制作的一个样本。我是我的真实应用程序，我使用 ListView1 中的 id 从我的数据库中获取我想在我的 textBlock 中显示的内容。

我知道 WPF 绑定到属性，我需要实现`INotifyPropertyChanged`，但我无法正确绑定，或者我可能缺少其他东西？

我添加`DateTime.Now.TosString()`只是为了更清楚地了解`TextBlock`更改。

XAML：

```
<Window x:Class="WpfSO.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="30"/>
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <TextBlock Grid.Row="0" x:Name="txtBlockPerson" 
                                Text="{Binding MyPerson}" />

        <ListView Grid.Row="1" Grid.Column="0" x:Name="ListView1" 
                  ItemsSource="{Binding ListData}" 
                  IsSynchronizedWithCurrentItem="True" 
                  SelectionChanged="ListView1_SelectionChanged">

            <ListView.ItemContainerStyle>
                <Style TargetType="ListViewItem">
                    <Setter Property="HorizontalContentAlignment" Value="Left" />
                </Style>
            </ListView.ItemContainerStyle>

            <ListView.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Horizontal">
                        <TextBlock Text="{Binding Name}"></TextBlock>
                    </StackPanel>
                </DataTemplate>
            </ListView.ItemTemplate>
        </ListView>
    </Grid>
</Window> 
```

C＃

```
using System;
using System.ComponentModel;
using System.Windows;
using System.Collections.ObjectModel;

namespace WpfSO
{
    public partial class MainWindow : Window
    {
        private ObservableCollection<Person> ListData { get; set; }
        private const string _myName = "You clicked on: ";
        public Person MyPerson { get; set; }

        public MainWindow()
        {
            InitializeComponent();

            // TextBlock
            MyPerson = new Person(_myName);
            txtBlockPerson.DataContext = MyPerson;

            // ListView
            ListData = new ObservableCollection<Person>();
            var p1 = new Person("p1");
            var p2 = new Person("p2");
            ListData.Add(p1);
            ListData.Add(p2);

            ListView1.ItemsSource = ListData;
        }

        private void ListView1_SelectionChanged(object sender, System.Windows.Controls.SelectionChangedEventArgs e)
        {
            MyPerson.Name = _myName + ListView1.SelectedItem + ". Time: " +DateTime.Now.ToString(); 
        }
    }

    public class Person : INotifyPropertyChanged
    {
        private string _name;
        public event PropertyChangedEventHandler PropertyChanged;

        public string Name
        {
            get { return _name; }
            set
            {
                if (value != _name)
                {
                    _name = value;
                    OnPropertyChanged("PersonName");
                }
            }
        }

        public Person(string name)
        {
            Name = name;
        }

        // Create the OnPropertyChanged method to raise the event 
        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:39:58.227

OnPropertyChanged 需要具有正确的属性名称..

而不是`OnPropertyChanged("PersonName");`使用

```
OnPropertyChanged("Name"); 
```

# lua - CoronaSDK 中 package.path 的问题

> ID：14244027
> 
> 赞同：1
> 
> 时间：2013-01-09T18:31:34.243
> 
> 标签：lua, coronasdk

我们想将第三方 Lua 模块（比如）`foo`集成到我们的 CoronaSDK 应用程序中。

该模块模块的主要代码在`foo/init.lua`，需要为`require 'foo'`。

我们将此模块放入`corona/foo`：

```
corona/foo$ ls
  init.lua 
```

在`corona/main.lua`我们有：

```
package.path = package.path .. ";"
  .. package.path:gsub("?.lua", "?/init.lua") 
```

`require 'foo'`在模拟器中工作。但是，它不适用于设备：

```
Lua Runtime Error: lua_pcall failed with status: 2, error message is:
module 'foo' not found:resource (foo.lua) does not exist in
archive
  no field package.preload['foo']
  no file '/var/mobile/Applications/0B609A43-54E8-40E5-9D44-F3C93CC4031E/Appname.app/foo.lua'
  no file '/var/mobile/Applications/0B609A43-54E8-40E5-9D44-F3C93CC4031E/Appname.app/foo.lua'
  no file '/var/mobile/Applications/0B609A43-54E8-40E5-9D44-F3C93CC4031E/Appname.app/foo/init.lua'
  no file '/var/mobile/Applications/0B609A43-54E8-40E5-9D44-F3C93CC4031E/Appname.app/foo/init.lua'
  no file './foo.so' 
```

奇怪的是，`require 'foo.init'`确实有效。

有什么线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-24T02:50:22.050

是你的文件名

foo.lua 还是 Foo.lua？

它适用于两种情况的模拟器，但在设备中，资本很重要。

我做了这个噩梦（我想知道为什么我的 SVN 客户端更改了我的一个文件的大写...我花了一个多小时才发现出了什么问题，因为我的模块突然无法在设备中找到）

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-10T04:01:07.520

尝试这个

package.path = package.path .. ";" .. package.path:gsub("?.lua", "?.init.lua")

包中调用的 lua 文件的路径名应该是这样的：

目录.luafile.lua

而不是 dir/luafile.lua

希望有帮助

# sql - 如何通过另一个计算列使用计算列

> ID：14244029
> 
> 赞同：5
> 
> 时间：2013-01-09T18:31:36.833
> 
> 标签：sql, sqlite

我在 Sqlite 中有一个涉及复杂列计算的查询，比如说：

```
SELECT 1+1 AS a; 
```

我想将此计算选为`a`，但我还需要将其用作另一个计算的组成部分：

```
SELECT 1+1 AS a, a+2 AS b; 
```

不幸的是，这会产生错误：

```
Error: no such column: a 
```

我知道我可以简单地再次重复计算`b`：

```
SELECT 1+1 AS a, 1+1+2 AS b; 
```

但是假设`1+1`是一些复杂且昂贵的操作，有什么方法可以在以后引用它`SELECT`而无需重新计算？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:32:55.837

您需要使用子查询。

```
SELECT c.d AS a, c.d + 2 AS b
FROM
  (SELECT 1+1 AS d) c 
```

**结果**

```
| 一个 | 乙 |
---------
| 2 | 4 |
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:34:51.080

看看你是否可以这样做（使用表的子查询）

```
Select t.a+2 as b
    FROM (Select 1+1 as a from xyz) t 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T18:46:42.517

除了其他人的所有好例子 - 这在 Oracle 中有效：

```
SELECT a, a+2 b From
(
 SELECT 1+1 a From dual
)
/

Output:

A | B
-----
2 | 4 
```

# delphi - 将图像从 3d 透视图重绘为 2d

> ID：14244032
> 
> 赞同：20
> 
> 时间：2013-01-09T18:31:47.520
> 
> 标签：delphi, math, geometry, pascal, lazarus

我需要用 Pascal/Delphi/Lazarus 编写的逆透视变换。见下图：

![图像处理](../Images/cdbc857e7cf549b0aa3537a3cf621d83.png)

我想我需要遍历目标像素，然后计算源图像中的相应位置（以避免舍入误差等问题）。

```
function redraw_3d_to_2d(sourcebitmap:tbitmap, sourceaspect:extended, point_a, point_b, point_c, point_d:tpoint, megapixelcount:integer):tbitmap;
var
   destinationbitmap:tbitmap;
   x,y,sx,sy:integer;
begin
  destinationbitmap:=tbitmap.create;
  destinationbitmap.width=megapixelcount*sourceaspect*???; // I dont how to calculate this
  destinationbitmap.height=megapixelcount*sourceaspect*???; // I dont how to calculate this
  for x:=0 to destinationbitmap.width-1 do
    for y:=0 to destinationbitmap.height-1 do
    begin
        sx:=??;
        sy:=??;
        destinationbitmap.canvas.pixels[x,y]=sourcebitmap.canvas.pixels[sx,sy];
    end;
  result:=destinationbitmap;
end; 
```

我需要真正的公式……所以 OpenGL 解决方案并不理想……

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-09T19:08:04.187

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T20:06:33.057

使用[Graphics32](https://github.com/graphics32)，特别是[TProjectiveTransformation](https://graphics32.github.io/Docs/Units/GR32_Transforms/Classes/TProjectiveTransformation/_Body.htm)（与[Transform](https://graphics32.github.io/Docs/Units/GR32_Transforms/Routines/Transform.htm)方法一起使用）。不要忘记在源图像中留下一些透明边距，以免出现锯齿状边缘。

# java - 获取 Cookie 格式的 Cookie 并将其传递给 CookieStore？

> ID：14244037
> 
> 赞同：0
> 
> 时间：2013-01-09T18:32:14.183
> 
> 标签：java, android

我有一个 webview，我已经成功（我认为？）设法将 cookie 取出，但是我需要将这些 cookie 放入 CookieStore 中，以便将它们添加到 HttpGet 请求中。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:12:19.970

[将此答案](https://stackoverflow.com/questions/5690637/android-http-login-questions/5692496#5692496)的第二个选项的第二部分与您已有的 cookie 值结合起来。剩下要做的工作是确定（并最终解析）cookie 值并将它们插入到您的`HttpURLConnection`对象中，然后向 Web 服务器发出请求。

如果您不确定是否获取了正确的 cookie，您可以通过[Wireshark](http://www.wireshark.org/)或[HTTP Debugger](http://www.httpdebugger.com/)检查它们是否以类似的方式对应。

或者，查看Android 开发者网站上的[带有 Cookie 的会话](http://developer.android.com/reference/java/net/HttpURLConnection.html)部分。

# regex - 正则表达式：如何捕获可能包含子字符串的模式而不捕获相同子字符串的后续出现

> ID：14244039
> 
> 赞同：0
> 
> 时间：2013-01-09T18:32:20.167
> 
> 标签：regex

在以下文本行中：

```
start - before capture text - tocapture - maybe after capture 
```

我必须可靠地捕获值“text - tocapture”，而不需要拖拽可选`- maybe after capture`部分。

*   空格-破折号-空格模式`text - tocapture`可能存在也可能不存在。`text - tocapture`也可以是单个单词或有空格。
*   如果`- maybe after capture`存在，它将始终以空格破折号空格开头，然后是随机文本。

无论是否存在，我都需要`text - tocapture`完全匹配。`- maybe after capture`

我想出的最好的是：

```
^start - before capture (.*)( - .*)?$ 
```

问题是，它捕获了“text - tocapture”之后的所有内容，大概是因为它还包含“-”。我尝试了一些负面的前瞻性东西，但没有运气。请参阅下面的 Rubular 输出。

![第一次尝试](../Images/1f0e3c94c156a6d3cebd30581eedc697.png)

![第二次尝试](../Images/a46ac96dc0b8db8d16e59a960304714c.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:34:18.037

这是正常的：`.*`捕获所有内容，您的第二部分是可选的。

因此，您的`.*`意志会为第二组捕获`text - tocapture - maybe after capture`并留下任何东西。由于量词`?`使它成为可选的，它对空字符串非常满意......

为了可靠地捕获你想要的东西，你可以使用这个：

```
^start - before capture ([^-]+-[^-\s]+).* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:38:27.110

如果我正确理解您的需求，我认为应该这样做：

```
^start - before capture (.*? - .*?)( - .*)?$ 
```

在其中`$1`应该捕获您需要的内容。在您的示例中，它捕获：

```
1\.  text - tocapture
2\.  - maybe after capture 
```

# ios - 如果一个 UIView 没有父视图，它的 frame 属性会变成什么？

> ID：14244040
> 
> 赞同：2
> 
> 时间：2013-01-09T18:32:22.197
> 
> 标签：ios, uiview

假设您的屏幕上有一个 UIView，仅此而已。它没有嵌套在其他一些 UIView 中，没有超级视图，它孤独地存在。

那么它的 frame 属性变成了什么？

我在这里找到的框架定义：“视图的框架是其矩形在父视图坐标系中的位置。”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T18:34:18.427

> 假设您的屏幕上有一个 UIView，仅此而已。它没有嵌套在其他一些 UIView 中，没有超级视图，它孤独地存在。

如果一个视图是可见的，它必须有一个超级视图。`UIWindow`也是一个`UIView`（它派生自`UIView），所以如果你将它添加到你的主窗口，它仍然是一个超级视图的子视图。

现在，如果您阅读`UIWindow`参考：

> UIWindow 类定义了一个称为窗口的对象，它管理和协调应用程序在设备屏幕上显示的视图。

或[在这里](http://developer.apple.com/library/ios/#DOCUMENTATION/WindowsViews/Conceptual/WindowAndScreenGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40012555)：

> 在 iOS 中，window 对象包含应用程序的视图并管理它们在设备显示屏上的呈现。窗口的关联屏幕对象代表当前使用的特定设备显示。如果

因此，`UIWindow`框架是根据显示坐标系定义的。

并来自[`UIScreen`参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIScreen_Class/Reference/UIScreen.html)：

> UIScreen 对象包含设备整个屏幕的边界矩形。在设置应用程序的用户界面时，您应该使用该对象的属性来为应用程序的窗口获取推荐的框架矩形。

一般来说，什么是视图的框架取决于视图及其创建方式。创建视图时，通常使用：

```
[[UIView alloc] initWithFrame:...]; 
```

因此，视图的框架是传递的`CGRect`参数，即使视图没有添加到任何父视图。

当您`addSubview`将该视图添加到其他视图时，您在实例化它时指定的信息将用于确定添加的视图在父视图坐标系中的位置。

换句话说，UIView 的框架只是视图的一个属性；当必须显示视图时，此属性被解释为视图在其父视图内的几何位置。

此外，视图的框架不会仅仅通过将其从其父视图中移除而改变。它保持不变，以防您再次将其添加到视图中。（感谢H2CO3的评论）

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:38:28.517

如果您在屏幕上有一个 UIView，它至少会在您的应用程序的主 UIWindow 中。所以你的第一个视图控制器的 UIVIew 将在主 UIWindow 的框架内。

# php - PHPExcel：下载电子表格

> ID：14244041
> 
> 赞同：3
> 
> 时间：2013-01-09T18:32:37.273
> 
> 标签：php, phpexcel

很长一段时间以来，我一直试图让用户能够使用对话框“另存为”或“打开”创建的电子表格。

这是我尝试过的，我没有收到任何错误，只是屏幕上出现乱码：

```
//CREATE SPEADSHEET

$objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007');

// We'll be outputting an excel file
header('Content-type: application/vnd.ms-excel');

// It will be called file.xls
header('Content-Disposition: attachment; filename="file.xls"');

// Write file to the browser
$objWriter->save('php://output'); 
```

我将不胜感激任何帮助解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-18T06:35:34.273

我刚刚尝试了你的代码部分，它工作得很好，如果你只是胡言乱语，问题实际上可能出在你生成表格的部分，检查那部分看是否有任何错误，下面是我用来测试它的代码：

```
 define('EOL',(PHP_SAPI == 'cli') ? PHP_EOL : '<br />');

    /** Include PHPExcel */
    require_once '../../PHPExcel/Classes/PHPExcel.php';

    // Create new PHPExcel object
    $objPHPExcel = new PHPExcel();

    // Set document properties
    $objPHPExcel->getProperties()->setCreator("Lumina")
                         ->setLastModifiedBy("Lumina")
                         ->setTitle("Entry members")
                         ->setSubject("Entry members")
                         ->setDescription("List of members participting.")
                         ->setKeywords("office PHPExcel php")
                         ->setCategory("Entry members");

        // Add some data                 
        $objPHPExcel->setActiveSheetIndex(0)
        ->setCellValue('A1', $row_titles['TITLE01'])
        ->setCellValue('B1', $row_titles['TITLE02'])
        ->setCellValue('C1', $row_titles['TITLE03'])
        ->setCellValue('D1', $row_titles['TITLE04'])
        ->setCellValue('E1', $row_titles['TITLE05'])
        ->setCellValue('F1', $row_titles['TITLE06'])
        ->setCellValue('G1', $row_titles['TITLE07'])
        ->setCellValue('H1', $row_titles['TITLE08'])
        ->setCellValue('I1', $row_titles['TITLE09'])
        ->setCellValue('J1', $row_titles['TITLE10'])
        ->setCellValue('K1', $row_titles['TITLE11'])
        ->setCellValue('L1', $row_titles['TITLE12'])
        ->setCellValue('M1', $row_titles['TITLE13'])
        ->setCellValue('N1', $row_titles['TITLE14'])
        ->setCellValue('O1', $row_titles['TITLE15'])
        ->setCellValue('P1', $row_titles['TITLE16'])
        ->setCellValue('Q1', $row_titles['TITLE17'])
        ->setCellValue('R1', $row_titles['TITLE18'])
        ->setCellValue('S1', $row_titles['TITLE19'])
        ->setCellValue('T1', $row_titles['TITLE20'])
        ->setCellValue('U1', $row_titles['TEAM_TX'])
        ->setCellValue('V1', $row_titles['T_SHIRT_SIZE'])
        ->setCellValue('W1', $row_titles['INPUT1_TX'])
        ->setCellValue('X1', $row_titles['INPUT2_TX'])
        ->setCellValue('Y1', $row_titles['INPUT3_TX'])
        ->setCellValue('Z1', $row_titles['INPUT4_TX']);

        // Rename worksheet
        $objPHPExcel->getActiveSheet()->setTitle('Participants');

        // Set active sheet index to the first sheet, so Excel opens this as the first sheet
        $objPHPExcel->setActiveSheetIndex(0);

        // Save Excel5 file
        //echo date('H:i:s') , " Write to Excel5 format" , EOL;
        $objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel5');
        $objWriter->save(str_replace('.html', '.xls', __FILE__));

        // We'll be outputting an excel file
        header('Content-type: application/vnd.ms-excel');

        // It will be called file.xls
        header('Content-Disposition: attachment; filename="file.xls"');

        // Write file to the browser
        $objWriter->save('php://output'); 
```

我希望这能有所帮助，因为我也是 PHP 新手。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-02T20:37:01.360

我有同样的问题，我在回复中变得胡言乱语。并且excel无法打开。解决方法是不使用表单提交或者ajax调用，只使用document.location来转发excel生成器的流程。例如：

```
document.location="/php/Controller/YnrAPICall.php?is_string=1&params="+ JSON.stringify(params); 
```

# bash - Bash Help >&3 变成一个变量？

> ID：14244052
> 
> 赞同：1
> 
> 时间：2013-01-09T18:33:09.637
> 
> 标签：bash

我正在为我要问的另一个问题编写 bash 脚本。这是我所拥有的：

```
exec 3<>/dev/tcp/m.m.0001.u.cache.amazonaws.com/11211
echo -e "get CacheCleaner\nquit" >&3
cat <&3 
```

它几乎可以工作。它返回这个：

```
VALUE CacheCleaner 0 1
1
END 
```

我没有剧照要做，就是取中间线上的 1，并将其放入变量中。

我尝试编辑 >&3，我知道它是做什么的，但我有点迷茫。

* * *

基于[如何在 Bash 脚本中的变量中存储标准错误](https://stackoverflow.com/questions/962255/how-to-store-standard-error-in-a-variable-in-a-bash-script)

看起来我可以这样做：

```
exec 3<>/dev/tcp/m.m.0001.u.cache.amazonaws.com/11211
echo -e "get CacheCleaner\nquit" >&3
CC=`cat <&3` 
echo $CC 
```

这将返回：

```
ENDE CacheCleaner 0 1 
```

所以不是我真正需要的，但更接近。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:39:53.373

```
dos2unix <&3 | sed -n 2p 
```

输出似乎具有`\r\n`行尾序列。dos2unix 命令转换`\r\n`为`\n`UNIX 风格的行尾。

sed 命令打印输出的第二行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:41:57.633

那这个呢？

`CC=$(cat <&3 | sed -n 2p)`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T18:43:05.403

```
# instead of cat, do this
read a a a a result a <&3
echo $result 
```

# mongodb - 如何在 mongodb 中更新 $inc mutil 值？

> ID：14244055
> 
> 赞同：0
> 
> 时间：2013-01-09T18:33:18.543
> 
> 标签：mongodb

我有

*   产品
*   天

目前有两个系列

我尝试更新的数据有点像

```
{
    _id: "85a2c512-e670-4bac-a024-c46768e91839"
    day: "2013-01-10"
    id: "E666A9erpx"
    month: "2013-01"
    products: [
        {
            amount: 0
            id: "LRRRBKRgBj"
            price: 2
        },
        {
            amount: 0
            id: "qeeeXGe5G7"
            price: 8.9
        }
    ]
    year: "2013"
} 
```

我想 $inc 这些值

```
db.products.update(
  { id: E666A9erpx, 'products.id': [ LRRRBKRgBj, qeeeXGe5G7  ]  } ,
  { $inc: { 'products.$.amount': [ 200, 104 ] } }
) 
```

我如何 $inc ？

# mysql - 从 Mysql 数据库登录 jsp 的问题

> ID：14244056
> 
> 赞同：0
> 
> 时间：2013-01-09T18:33:20.317
> 
> 标签：mysql, jsp, login

几周来一直在玩我发现的东西，我决定将一个小的 Java Web 应用程序放在一起，您需要在其中登录。登录详细信息取自 mysql 数据库。这一切都是通过netbeans完成的。我已将 mysql 驱动程序添加到我的应用程序中，并且在我的 Web 服务器（glassfish）中，我已经连接到我的数据库。但是我一直遇到的问题是，一旦我点击登录，它就会转到我的“ReadLogin.jsp”并且不会从那里移动。用户名和密码是正确的，所以我不知道问题所在。

我的三个页面的代码如下

**登录.jsp**

```
 <%
      String error = request.getParameter("error");
      if (error == null || error == "null") {
          error = "";
      }
    %>
    <html>
    <head>
    <script>
        function trim(s) {
            return s.replace( /^\s*/, "" ).replace( /\s*$/, "" );
        }

        function validate() {
            if (trim(document.frmLogin.UserName.value) == "") {
              alert("Login empty");
              document.frmLogin.UserName.focus();
              return false;
            } else if(trim(document.frmLogin.Pwd.value)=="") {
              alert("password empty");
              document.frmLogin.Pwd.focus();
              return false;
            }
        }
    </script>
    </head>

    <body>
    <div><%=error%></div>
    <form name="frmLogin" onSubmit="return validate();" action="ReadLogin.jsp" method="post"> <%--return validate prompts script above to check if any text boxes are left empty--%>
    User Name <input type="text" name="UserName" /><br />
    Password <input type="password" name="Pwd" /><br />
    <input type="submit" name="Submit" value="Submit" />
    </form>
    </body>
    </html> 
```

**下一页是“ReadLogin.jsp”**

```
<%
    Connection conn = null;
    Class.forName("com.mysql.jdbc.Driver");
    conn = DriverManager.getConnection("jdbc:mysql://localhost:3306/project","root", "nbuser");

    ResultSet rsdoLogin = null;
    PreparedStatement psReadLogin = null;

    String sUserID = request.getParameter("UserName");
    String sPassword = request.getParameter("Pwd");
    String message = "User login successfully ";

    try {
   String sqlOption="SELECT * FROM USERS where"
                +" user_id='"+sUserID+"' and password'"+sPassword+"'";

    psReadLogin = conn.prepareStatement(sqlOption);
    psReadLogin.setString(1, sUserID);
    psReadLogin.setString(2, sPassword);

    rsdoLogin=psReadLogin.executeQuery();

    if(rsdoLogin.next()) {
      response.sendRedirect("success.jsp?error="+message);
    } else {
      message="No user or password matched" ;
      response.sendRedirect("login.jsp?error="+message);
    }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

    /// close object and connection
    try{
         if(psReadLogin!=null){
             psReadLogin.close();
         }
         if(rsdoLogin!=null){
             rsdoLogin.close();
         }

         if(conn!=null){
          conn.close();
         }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }

%> 
```

那么输出页面应该只是一个简单的“success.jsp”

```
<html>
    <body>
        <h1>Hello World!</h1>
    </body>
</html> 
```

我的 readlogig 文件一定有问题，因为我玩过另一个版本，我可以从 jsp 表单将数据放入数据库，但我无法让它执行登录功能，这将是主要功能到我正在尝试开发的小工具

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T02:29:00.610

```
String sqlOption="SELECT * FROM USERS where"
            +" user_id='"+sUserID+"' and password'"+sPassword+"'";

psReadLogin = conn.prepareStatement(sqlOption);
psReadLogin.setString(1, sUserID);
psReadLogin.setString(2, sPassword); 
```

您可以使用丑陋的字符串连接创建请求，也可以使用`PreparedStatement`. 但不要两者都做！这是它的样子：

```
String sqlOption="SELECT * FROM USERS where user_id = ? and password = ?";

psReadLogin = conn.prepareStatement(sqlOption);
psReadLogin.setString(1, sUserID);
psReadLogin.setString(2, sPassword); 
```

除此之外，由于您似乎是从头开始创建的，因此我强烈建议您停止使用这些 scriptlet 并开始阅读有关 bean、servlet、JSP 和 JSTL 的内容。

也可以看看 ：

*   [如何避免 JSP 页面中的 Java 代码](https://stackoverflow.com/questions/3177733/how-to-avoid-java-code-in-jsp-files)

# jquery - jQuery 验证仅适用于页面刷新

> ID：14244061
> 
> 赞同：1
> 
> 时间：2013-01-09T18:33:36.493
> 
> 标签：jquery, jquery-mobile, jquery-validate

我在我的网站上有[这个 jsFiddle中的代码。](http://jsfiddle.net/Dqk8Y/1/)那里的代码正是在我的网站上实现的，除了我的网站`<script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>`在标记之后也有`<meta>`（因为 jsFiddle 自动调用它；这存在于下面的代码中）。该代码在 jsFiddle 上按预期工作，但在我的网站上，除非刷新页面或在第一次提交后单击后退按钮，否则验证不起作用。表单重定向到`logins.php`脚本（现在为空白），按下后退按钮后验证工作正常。我`data-ajax="false"`在表格上。我该怎么做才能使表单验证始终有效，而不仅仅是在刷新或返回之后？

这是代码：

```
<!DOCTYPE html>
<html>
<head> 
    <title>Welcome</title> 

    <meta name="viewport" content="width=device-width, initial-scale=1"> 

    <script type="text/javascript" src="http://code.jquery.com/jquery-1.8.3.min.js"></script>
    <script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.validate/1.10.0/jquery.validate.js"></script>
    <script type="text/javascript">
        $(document).ready(function(){
            $("#loginForm").validate();
        });
    </script>
    <style type="text/css">
        label.error {
            font-weight:bold;
            color:red;
        }
    </style>
    <script type="text/javascript" src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />

</head> 
<body>
    <div data-role="page" id="login">
        <div data-role="header"><h1>Log In</h1></div>
        <div data-role="content">You can use the fields below to log in to your account.<br>
        <br>
        <form action="logins.php" method="POST" id="loginForm" name="loginForm" data-ajax="false">
            <label for="email" class="ui-hidden-accessible">Email Address:</label>
            <input type="text" id="email" name="email" value="" class="required email" minlength="5" placeholder="Email Address" />
            <label for="pass" class="ui-hidden-accessible">Password:</label>
            <input type="password" id="pass" name="pass" value="" class="required" minlength="5" placeholder="Password" />
            <input class="submit" data-role="submit" type="submit" value="Submit" />
        </form><br>
        <br>
        <a href="index.php" data-role="button" data-transition="slide" data-direction="reverse">Return to home page</a>
        </div>
        <div data-role="footer"><h4>&copy; Me 2013</h4></div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:01:21.350

[http://jquerymobile.com/demos/1.2.0/docs/api/events.html](http://jquerymobile.com/demos/1.2.0/docs/api/events.html)

`$(document).ready()`不应与 jQuery Mobile 一起使用。改为使用`$(document).bind("pageinit")`。

此外，jQuery Mobile 1.2 支持 jQuery Core 1.8.2（不是 1.8.3）。

# python - Python多态对象调用基类方法而不是子类方法

> ID：14244067
> 
> 赞同：2
> 
> 时间：2013-01-09T18:33:54.603
> 
> 标签：python, django, polymorphism

我在 Django 中有以下模型。我有理由不创建`Animal`抽象基类。

```
class Animal(models.Model):
    sound = "none"
    def ClassType(self):
        return 'animal'

class Cat(Animal):
    animal_id = models.OneToOneField(Animal,parent_link=True)
    sound = "meow"
    def ClassType(self):
        return 'cat'

class Dog(Animal):
    animal_id = models.OneToOneField(Animal,parent_link=True)
    sound = "bow"
    def ClassType(self):
        return 'dog' 
```

我查询一组动物为

`query = Animal.objects.all()`

结果是必然只有 Dogs 和 Cats 的列表。但是，在调用

`query[0].ClassType`

我只得到`animal`. “查询”中的所有对象都会在`animal`我想要获取`dog`或`cat`取决于实例时给我。在 Python 多态世界中我不了解什么以及如何解决它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:11:24.113

您可以使用点表示法（如属性）访问 dog 和 cat 对象。该查询`Animal.objects.all()`将返回所有动物，其中包括所有猫和狗。

```
qs = Animal.objects.all()
for animal in qs:
    try:
        obj = animal.cat
        # its a cat
    except AttrbuteError:
        # its a dog
        obj = animal.dog 
```

如您所见，在识别哪一只是狗和哪一只是猫时有一个小故障，一个好的方法是在您的动物模型中设置一个临时属性：

```
class Animal(models.Model):
    sound = "none"

    def is_cat(self):
        if not hasattr(self, '_is_cat'):
            self._is_cat = Cat.objects.filter(animal_id=self).exists()
        return self._is_cat 
```

现在你可以简单地做：

```
qs = Animal.objects.all()
for animal in qs:
    if animal.is_cat():
        # this is a cat
    else:
        # dog 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:53:54.110

与其创建`ClassType`方法，不如将其设置为实际字段，并在保存时存储对象的类型。否则，正如您所发现的，当您查询 Animals 时，您只会得到 Animals，而不是子类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-07T15:17:08.550

这个问题很老，但我遇到了同样的问题，所以这是我的解决方案：

我使用了[django_polymorphic](https://pypi.python.org/pypi/django_polymorphic)应用程序，它非常有用，原因有很多，但它提供了相应模型实例的属性及其名称，您可以使用它来解决您的问题。

因此，您可以将基类更改为如下所示：

```
class Animal(PolymorphicModel):
    sound = "none"

    def ClassType(self):
        polymorphic_attr_name = self.name.lower().replace(" ", "")  # Get the name of the attribute that points to the instance
        if polymorphic_attr_name == 'animal':
            return 'animal'
        instance = getattr(self, polymorphic_attr_name)
        return instance.ClassType() 
```

然后你可以忘记任何动物子类。它对我有用，希望这会有所帮助。

# ireport - iReport：可以更改默认表达语言吗？

> ID：14244068
> 
> 赞同：1
> 
> 时间：2013-01-09T18:34:00.360
> 
> 标签：ireport

我正在使用 4.7.1 并且在开始新报告时它设置为 Groovy。我希望它默认为Java。我们停止将 groovy 作为依赖项发布，如果我不必记得每次都将其更改为 Java，那就太好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:55:51.377

我正在使用 iReport 5.0。我可以通过单击工具 > 选项来更改它。在选项框中，单击顶部的 iReport 按钮，然后单击常规选项卡。在常规选项卡上，单击报告默认值选项卡。有一个语言下拉框，您可以在那里更改默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T11:12:32.563

您可以在选项中将其更改为默认为 Java。请注意，如果您的子报表的元素设置为 Groovy（如[本例所示](http://community.jaspersoft.com/questions/802566/groovy-error-java-project-ireport)），您可能会遇到错误。只是检查您是否遇到问题。

# c# - Windows 窗体、元素宿主和样式继承

> ID：14244073
> 
> 赞同：0
> 
> 时间：2013-01-09T18:34:07.133
> 
> 标签：c#, wpf, winforms, styles, elementhost

我有一个 Windows 窗体应用程序，在其中托管了一个使用 WPF 创建的用户控件。这是使用 Element Host 类完成的。元素宿主容器中的所有 WPF 元素都继承了 windows 窗体样式，包括字体等。

我想防止这种情况发生。所有元素都应该继承默认的 WPF 样式，因此字体（和其他样式）是相同的。我怎样才能做到这一点？

我不想自己设置所有默认值。

![示例窗口](../Images/118940bbf1886b84cde591374b80d91f.png) [示例窗口](https://dl.dropbox.com/u/40912731/test.png)，注意 'segeo' 中的 'g' 和 'MS Sans Serif' 中的 'S' 之间的区别

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:13:56.427

找到了：

只需添加：

```
this.InheritanceBehavior = InheritanceBehavior.SkipToAppNext; 
```

到您的 UserControl 的构造函数。

# silverlight - Silverlight 中的自定义错误页面

> ID：14244079
> 
> 赞同：0
> 
> 时间：2013-01-09T18:34:28.420
> 
> 标签：silverlight

当 Silverlight 应用程序（如 asp.net）出现问题时，我想显示自定义错误页面。知道我该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:39:50.913

一种选择是在 silverlight 应用程序的主页中订阅未处理的异常，然后将调用路由到自定义错误页面，您可以在其中显示适当的错误消息。

# jquery - 返回false后Jquery调用下一步？

> ID：14244081
> 
> 赞同：0
> 
> 时间：2013-01-09T18:34:34.620
> 
> 标签：jquery, asp.net

我正在对自定义下拉列表 DD1 和 DD2 进行验证，但是当它检查 DD1 并返回 false 时，它​​不检查 DD2。你能建议我吗？

在下面的脚本中，我正在调用 Validatechecked 函数，它检查下拉菜单是否具有选定的值，它仅适用于一个下拉菜单。如何使其适用于 2 个以上的下拉菜单？

```
<script type="text/javascript" language="javascript">
        function Validatechecked(val) {
            var selectedItems = "";

            $('[id*='+val+']'+"  "+ "input:checked").each(function () {
                if (selectedItems == "") {
                    selectedItems = "Selected Items:\r\n\r\n";
                }
                selectedItems += $(this).next().html() + "\r\n";
            });
            if (selectedItems == "") {
                selectedItems = "";
                return false;

            }
            else {
                selectedItems = "";
                return true;
            }
        }
        $(document).ready(function () {

            $('[id*="InsertNSTBtn"]').click(function () {

                if (!Validatechecked("DD1")) {
                    $('#<%=valid1.ClientID%>').html("*");
                    return false;
                }

                if (!Validatechecked("DD2")) {
                    $('#<%=Valid1.ClientID%>').html("*");
                     return false;
                }
                });

            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:37:11.640

不要立即返回 false，而是将布尔变量设置为 false 并返回：

```
$('[id*="InsertNSTBtn"]').click(function () {
    var passtest = true;
    if (!Validatechecked("DD1")) {
        $('#<%=RMktallocvalid.ClientID%>').html("*");
        passtest = false;
    }

    if (!Validatechecked("DD2")) {
        $('#<%=SrvRgnMDDValid.ClientID%>').html("*");
        passtest = false;
    }

    /* add more tests if you like */

    return passtest;
}); 
```

# c++ - 用于检测模板特化的模板元函数

> ID：14244082
> 
> 赞同：8
> 
> 时间：2013-01-09T18:34:37.943
> 
> 标签：c++, template-specialization, template-meta-programming, compile-time, static-assert

受[这个问题](https://stackoverflow.com/q/14227983/170521)的启发，我想知道是否可以引入一些编译时检查来检测两个给定的模板实例：

```
template <typename T>
class Templ...

typedef Templ<std::string> stringInstance;
typedef Templ<double> doubleInstance; 
```

是从相同的定义构造的，或者如果它们是从`Templ`模板的不同特化构造的

所以基本上假设的模板函数的行为是这样的：

```
template <typename T>
class Templ
{}

template <>
class Templ<std::string>
{}

template <>
class Templ<double>
{}

template <typename T1,typename T2>
class Belong_To_Same_Templ_Definition
{}

//tests
typedef Templ<std::string> stringInstance;
typedef Templ<double> doubleInstance;
typedef Templ<int> intInstance;
typedef Templ<char> charInstance;

assert( Belong_To_Same_Templ_Definition< intInstance , charInstance >::value == true);
assert( Belong_To_Same_Templ_Definition< intInstance , doubleInstance >::value == false);
assert( Belong_To_Same_Templ_Definition< stringInstance , doubleInstance >::value == false); 
```

有可能创建这种元功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:59:08.677

老实说，这似乎不太可能（尽管我不能明确排除狡猾的把戏）。

对于给定的专业化（在选择它的类型参数之外），没有一等身份可以比较。

因此，如果您愿意，您可以使其与您自己的模板一起使用，但您不能为现有模板编写临时推理。

还要考虑它*无论如何都不起作用*，因为它无法判断两个实例化是否具有兼容的布局：即使`Templ<int>`和`Templ<char>`是从相同的模板代码实例化的，没有专门化，该代码也可以使用特征类，它们*是*专业的。

# asp.net - 关于我在代码中遇到的异常，我需要解决方案

> ID：14244090
> 
> 赞同：0
> 
> 时间：2013-01-09T18:34:59.890
> 
> 标签：asp.net, .net, asp.net-mvc

这是我试图将数据插入数据库的一段代码。我没有收到任何语法错误，但它没有提交数据。

```
 Sub submit(ByVal sender As Object, ByVal e As EventArgs)
    Dim objConn As New OleDbConnection
    Dim objCmd As New OleDbCommand
    Dim strConnString, strSQL As String

    strConnString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source= " & Server.MapPath("Mydatabase.mdb") & ""

    strSQL = "INSERT INTO tblRecord (CNIC,Names,City,Address,Number) " & " VALUES " & " ('" & cnic.Text & "','" & name.Text & "','" & city.Text & "','" & postal.Text & "','" & phone.Text & "')"
    objConn.ConnectionString = strConnString
    objConn.Open()

    With objCmd
        .Connection = objConn
        .CommandText = strSQL
        .CommandType = CommandType.Text
    End With

    Try
        objCmd.ExecuteNonQuery()
        Label1.Text = "Record Inserted Sucessfully."
        Label1.Visible = True
    Catch ex As Exception
        Label1.Visible = True
        Label1.Text = "Record Cannot Insert" & ex.ToString()
    End Try

    objConn.Close()

End Sub 
```

这是我得到的例外：

> *System.Data.OleDb.OleDbException：INSERT INTO 语句中的语法错误。*
> 
> 在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextErrorHandling(OleDbHResult hr)
> 在 System.Data.OleDb.OleDbCommand.ExecuteCommandTextForSingleResult(tagDBPARAMS dbParams, Object& executeResult) 在 System.Data.OleDb.OleDbCommand.ExecuteCommandText(Object& executeResult)
> 在 System.Data。 OleDb.OleDbCommand.ExecuteCommand(CommandBehavior behavior, Object& executeResult)
> at System.Data.OleDb.OleDbCommand.ExecuteReaderInternal(CommandBehavior behavior, String method)
> at System.Data.OleDb.OleDbCommand.ExecuteNonQuery()
> at ASP.registration_aspx.submit(Object sender , EventArgs e) 在 C:\Documents and Settings\Maira Alvi\My Documents\Visual Studio 2005\WebSites\WebSite3\Registration.aspx:line 32

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:52:19.010

我的猜测是您的输入字段之一包含未转义的字符（例如，`'`）。切换到参数化查询不仅可以解决该问题，还有助于防御其他问题（如 SQL 注入）。

```
//change query to use parameters
strSQL = "INSERT INTO tblRecord (CNIC,Names,City,Address,Number) VALUES (?,?,?,?,?);"

...

With objCmd
    .Connection = objConn
    .CommandText = strSQL
    .CommandType = CommandType.Text
    //add parameters using inputs for values
    .Parameters.Add("?", OleDbType.VarChar, 50).Value = cnic.Text; //assumes varchar(50)
    .Parameters.Add("?", OleDbType.VarChar, 50).Value = name.Text; //assumes varchar(50)
    .Parameters.Add("?", OleDbType.VarChar, 50).Value = city.Text; //assumes varchar(50)
    .Parameters.Add("?", OleDbType.VarChar, 50).Value = postal.Text; //assumes varchar(50)
    .Parameters.Add("?", OleDbType.VarChar, 50).Value = phone.Text; //assumes varchar(50)
End With 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:45:04.240

您确实有语法错误，它在您的异常中说得对！查看您正在为 SQL Insert 语句构建的字符串。我很确定`'`最后某处有遗漏。

但基本上，这是构建 SQL 语句的一种非常糟糕的方式。可以通过使用 string.Format 来改进它，但即便如此，您也会对 SQL 注入攻击持开放态度。

使用参数添加值要好得多。 [这是如何正确执行此操作的示例。](http://derekreynolds.wordpress.com/2011/05/16/using-sqlcommand-and-addwithvalue-parameters-to-execute-sql-insert/)

# c# - 在asp.net mvc中context.User.Identity.Name有什么用？

> ID：14244093
> 
> 赞同：1
> 
> 时间：2013-01-09T18:35:08.130
> 
> 标签：c#, asp.net, asp.net-mvc-3, visual-studio

我目前正在学习 asp.net mvc，我刚开始，我决定从 web 表单转移到 mvc。

我正在从 codeplex the mvc 音乐商店学习本教程，并且有这行代码我不明白它是如何使用的以及为什么使用它。

这是代码行：

```
if(!string.IsNullOrWhiteSpace(context.User.Identity.Name))
                {
                    context.Session[CartSessionKey] = context.User.Identity.Name;

                } 
```

我想知道 context.User.Identity.Name 做了什么，因为我尝试删除它包含的 if 块并且该应用程序仍然有效。

这是该函数的完整代码：

```
 public string GetCartId(HttpContextBase context)
        {
            if (context.Session[CartSessionKey] == null)
            {
                if(!string.IsNullOrWhiteSpace(context.User.Identity.Name))
                {
                    context.Session[CartSessionKey] = context.User.Identity.Name;

                }
                else
                {
                    // Generate a new random GUID using System.Guid class
                    Guid tempCartId = Guid.NewGuid();
                    // Send tempCartId back to client as a cookie
                    context.Session[CartSessionKey] = tempCartId.ToString();
                }
            }
            return context.Session[CartSessionKey].ToString();
        } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T18:41:34.933

当您需要身份验证时，它的作用与在 Web 窗体中所做的完全相同。一旦用户成功通过身份验证，就会`context.User.Identity.Name`包含登录人的用户名。

在您的特定示例中，它只是检查用户是否经过身份验证-尽管您应该检查`Request.IsAuthenticated`而不是检查用户名是否为空或空白-并将该人的用户名放入`Session[CartSessionKey]`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:50:59.280

我建议你看看下面的链接：http: [//support.microsoft.com/kb/301240](http://support.microsoft.com/kb/301240)

在应用程序中实施安全性并学习成员资格提供程序，它将让您了解角色和其他对保持应用程序安全非常有用的东西。

# mysql - 在查询中加入表时遇到问题

> ID：14244097
> 
> 赞同：1
> 
> 时间：2013-01-09T18:35:45.677
> 
> 标签：mysql, sql

**数据库表结构：**

会话表（又名考试表）

```
SessionId(auto)  SessionName
137              XULWQ 
```

问题表：

```
SessionId  QuestionId QuestionContent  QuestionNo QuestionMarks  OptionId
137        1          Name 2 Things     1         5               5
137        2          Name 3 Things     2         5               2 
```

Option_Table 表：

```
OptionId  OptionType
1         A-C
2         A-D
3         A-E
4         A-F
5         A-G
6         A-H 
```

答案表：

```
 AnswerId(auto) SessionId  QuestionId  Answer
   200            137        1           B
   201            137        1           F
   202            137        2           D
   203            137        2           A
   204            137        2           C 
```

我在编译下面的查询时遇到问题。我想在查询中选择以下字段，但我遇到的问题是我的联接。如果您查看我试图`OptionID`从`Option_Table`表中检索的最后一个连接，但我必须通过`Answer`没有该字段的表。我的问题是我有 3 个字段实际上依赖于加入问题表。

我的问题是加入下表的正确方法是什么，以便它显示每个问题的答案以及我要选择的字段？

```
SELECT q.SessionId, s.SessionName, q.QuestionId, q.QuestionNo, q.QuestionContent, an.Answer, an.AnswerId, q.QuestionMarks, q.OptionId, o.OptionType
       FROM Session s 
       INNER JOIN Question q ON s.SessionId = q.SessionId
       JOIN Answer an ON q.QuestionId = an.QuestionId
       JOIN Option_Table o ON an.OptionId = o.OptionId
       WHERE s.SessionName = ?
       ORDER BY q.QuestionId, an.Answer 
```

需要输出：

![在此处输入图像描述](../Images/8b8c776c186970c345d7a7af0ef46050.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T18:42:04.977

只需更改该`JOIN`条件以使用表中的列`Question`：

```
SELECT  q.SessionId, s.SessionName, q.QuestionId, q.QuestionNo, 
        q.QuestionContent, an.Answer, an.AnswerId, q.QuestionMarks, 
        q.OptionId, o.OptionType
FROM `Session` s 
INNER JOIN `Question` q 
    ON s.SessionId = q.SessionId
INNER JOIN `Answer` an 
    ON q.QuestionId = an.QuestionId
INNER JOIN `Option` o 
    ON q.OptionId = o.OptionId
WHERE s.SessionName = ?
ORDER BY q.QuestionId, an.Answer 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T18:44:00.903

```
SELECT * 
FROM Question q 
    INNER JOIN Answer a ON q.QuestionID = a.QuestionID
    INNER JOIN Option_Table ot ON ot.optionID = q.optionID
    INNER JOIN session s ON s.sessionid = q.sessionid 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T18:43:23.233

```
SELECT
    s.SessionId ,
    s.SessionName,
    q.QuestionId,
    q.QuestionNo,
    q.QuestionContent,
    a.Answer,
    a.AnswerId,
    q.QuestionMarks,
    ot.OptionId,
    ot.OptionType  
FROM    Session as s
LEFT JOIN Question as q ON s.SessionId = q.SessionId
LEFT JOIN Option_Table as ot ON ot.OptionId = q.OptionId 
LEFT JOIN Answer as a ON a.QuestionId = q.QuestionId 
```

# javascript - 主干同步后集合视图中的触发功能

> ID：14244102
> 
> 赞同：0
> 
> 时间：2013-01-09T18:36:00.773
> 
> 标签：javascript, jquery, ajax, backbone.js

我正在 Backbone 中构建一个应用程序。在我的集合模型中，我有一个同步功能，当用户单击按钮时会触发该功能。它向服务器提交一些表单数据，服务器返回一个包含成功或错误消息的 JSON 对象。

问题是当集合模型同步时，我似乎无法在集合视图中触发事件：

这是完整的脚本：

```
 var RegisterModel = Backbone.Model.extend({url: 'api/process.php', defaults: { contentType: 'input', value: '', inputType: 'text', inputClass: 'required', serverResponseClass: 'alert alert-error', message: ' ', responseType: ' '} });

var RegisterView = Backbone.View.extend({

    template: _.template('<p><% if (contentType == "input") { %><input placeholder="<%= label %>" name="<%= inputName %>" id="<%= inputName %>" value="<%= value %>" type="<%= inputType %>" class="<%= inputClass %>"/><% } %><% if (contentType == "button") {%> <input type="<%= inputName %>" class="<%= btnClass %>" id="<%= inputName %>"<% } %></p>'),

    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    }
});

var RegisterCollection = Backbone.Collection.extend({ 
    model: RegisterModel,

    url: 'api/process.php',

    updateModels: function (){
        this.forEach(this.updateModel, this);
    },

    updateModel: function(registerModel) {
        var inputName = '#'+registerModel.get('inputName');
        var userInput = $(inputName).val();
        registerModel.set({value: userInput});
    },
    clearErrors: function() {
        var musketeers = this.where({contentType: "serverResponse"});
        this.remove(musketeers);
    },
    syncCollection: function() {
        Backbone.sync.call(this, 'create', this);
    }
});

var RegisterCollectionView = Backbone.View.extend({
    initialize: function(){
        this.collection.on('reset', this.addAll, this);
        this.collection.on('add', this.addAll, this);
        this.collection.on('sync', this.onModelSaved);

        /* this.collection.on('remove', function(){registerCollection.fetch(); }, this); */
    },
    el: "#backboneContainer",

    events: {
        "click #submit" : "validate",
    },

    validate: function(e) {
        e.preventDefault();
        if ($("#register").valid() === true) {      
            this.collection.clearErrors();
            this.collection.updateModels();
            this.collection.syncCollection();
        }
    },

    errorOverlay: function(errorTitle, errorContent) {  
        $.notification({
            title: errorTitle,
            content: errorContent,
            timeout:    5000,
            icon: "!",
            error: true,
            border: false
        });
    },

    onModelSaved: function () {
        console.log('hello world!');
        alert('hello world!');  
    },

    successMessage: function(message) {
        $.fn.modal({
            layout:     "elastic",
            url:        undefined,
            content:    message,
            padding:    "50px",
            animation:  "fadeInDown"
        });
        this.$el.append('<span class="icon">=</span>');
    },

    addOne: function(registerModel){
        var registerView = new RegisterView({model: registerModel});
        this.$el.append(registerView.render().el);  
    },

    buildForm: function(registerModel) {
        var registerView = new RegisterView({model: registerModel});
        $('#register').append(registerView.render().el);
    },

    addAll: function(){
        this.$el.empty();
        this.$el.append('<div class="con"><div class="section current" title="Our First Section" ><div class="col_12"><h1>Piecharter.com</h1></div><div class="carton col_4"><h2>Registration</h2><div class="content"><form id="register" method="post"></form></div></div></div></div>');
        this.collection.forEach(this.buildForm, this);
        $("#register").validate();
    /*  this.$el.append('); */
    },

    render: function(){
        this.addAll();
        return this;
    }
});

$('.modal').live("click", function () {
    this.remove();
    $('#overlays').hide();
});

/*VALIDATION HERE ~*/

jQuery.validator.addClassRules("username", {
   minlength: 7,
   maxlength: 21
});

jQuery.validator.addMethod("password", function( value, element ) {
    var result = this.optional(element) || value.length >= 1 && /\d/.test(value) && /[a-z]/i.test(value);
    if (!result) {
        var validator = this;
        setTimeout(function() {
            validator.blockFocusCleanup = true;
            element.focus();
            validator.blockFocusCleanup = false;
        }, 1);
    }
    return result;
}, "Your password must be at least 7 characters long and contain at least one number and one character."); 
```

我知道集合已成功同步，因此问题一定出在我在集合视图中收听同步事件的方式上。任何想法这里有什么问题？我查看了文档，我发现我的结构方式没有任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:00:21.143

当您尝试绑定“onModelSaved”时，您忽略了`this`，因此您没有引用对象的“onModelSaved”方法，而是引用了全局“onModelSaved”变量（几乎可以肯定它不存在）。

尝试：

```
this.collection.on('sync', this.onModelSaved); 
```

# iphone - 当我到达 ios5 中的最后一个声音剪辑时，应用程序挂起

> ID：14244104
> 
> 赞同：0
> 
> 时间：2013-01-09T18:36:07.777
> 
> 标签：iphone, ios5, ios4

我有一个带有图像的应用程序，一旦用户按下图像，就会播放声音剪辑。一旦我到达最后一张没有声音剪辑的图像（25），如果我按下应用程序自动关闭，我该如何防止这种情况发生。

例如，一旦用户单击 01.Png，我需要播放 C01.mp3 （注意我的所有图像也保存在图像数组中）基本上我有 25.png 这只是我网站的广告，所以它不会有声音剪辑，但是一旦我单击该图像，应用程序就会自动关闭。需要帮助来解决这个问题。

```
//

#import "SoundsGenerator.h"

@implementation SoundsGenerator

- (id) init
{
    CFBundleRef mainBundle;
    mainBundle = CFBundleGetMainBundle ();

    soundObjects=[[NSMutableArray alloc] init];

    NSMutableArray *soundNames = [[NSMutableArray alloc] initWithObjects:@"c1",
                                @"c2", 
                                @"c3", 
                                @"c4", 
                                @"c5", 
                                @"c6", 
                                @"c7", 
                                @"c8", 
                                @"c9", 
                                @"c10", 
                                @"c11", 
                                @"c12", 
                                @"c13", 
                                @"c14", 
                                @"c15", 
                                @"c16", 
                                @"c17", 
                                @"c18", 
                                @"c19", 
                                @"c20", 
                                @"c21", 
                                @"c22", 
                                @"c23", 
                                @"c24",nil];    

    for(NSString *soundName in soundNames)
    {
        CFBundleRef mainBundle = CFBundleGetMainBundle();
        CFURLRef soundFileURLRef;
        soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (__bridge CFStringRef)soundName, CFSTR ("mp3"), NULL);

        SystemSoundID soundFileObject;
        // Create a system sound object representing the sound file
        AudioServicesCreateSystemSoundID (soundFileURLRef, &soundFileObject);

        SoundObject *objSound=[[SoundObject alloc] init];
        objSound.soundFileObject=soundFileObject;
        objSound.soundFileURLRef=soundFileURLRef;
        [soundObjects addObject:objSound];
    }

    return self;
}

// Respond to a tap on the System Sound button
- (void) playSound:(int)index 
{
    SoundObject *soundObject=[soundObjects objectAtIndex:index];
    AudioServicesPlaySystemSound ((SystemSoundID)soundObject.soundFileObject);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T05:26:20.343

代替

```
for(NSString *soundName in soundNames)
{ 
```

和

```
for(int i = 0 ; i < soundNames.count-1 ; i++)
{
   NSString *soundName = [soundNames objectAtIndex:i];
   //rest of the code same 
```

**这将运行循环直到 24 个索引数组的 23 个索引。**

# json - Groovy JsonSlurper 日期反序列化

> ID：14244112
> 
> 赞同：4
> 
> 时间：2013-01-09T18:36:45.823
> 
> 标签：json, groovy

有没有一种体面的方法来反序列化由 JsonBuilder 序列化的来自 JSON 的日期？JsonBuilder 像这样序列化 java.util.Date：

```
{"hour":"2013-01-07T04:00:00+0000"} 
```

JsonSlurper 将其吸入并将其视为字符串。我真的需要对此做一个简单的日期格式吗？我真的只想从 JsonSluper parseText 中自动生成一个 java.util.Date。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T05:07:13.347

也许稍微不那么冗长：

```
Date.parse("yyyy-MM-dd'T'HH:mm:ssZ", json.hour) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-06T09:53:28.580

JsonSlurper 可以根据需要配置不同类型的解析器。

要将日期字符串自动解析为 Date 对象，您可以使用 **JsonParserType.INDEX_OVERLAY**解析器（如果将解析的地图放入长期缓存中，则必须小心）- [https://docs.groovy-lang.org/latest/html /api/groovy/json/JsonSlurper.html](https://docs.groovy-lang.org/latest/html/api/groovy/json/JsonSlurper.html)

```
def json = groovy.json.JsonOutput.toJson(["date":new Date()])
println json //  {"date":"2020-11-06T09:27:22+0000"}

def map = new groovy.json.JsonSlurper()
    .setType(groovy.json.JsonParserType.INDEX_OVERLAY)
    .parseText(json)

assert map.date instanceof Date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T18:36:45.823

在从 JsonSlurper parseText 中获取字符串后可以执行此操作

```
def jutilDate = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ssZ").parse(dateStr); 
```

希望有更好的方法

# c# - 创建一个已完成的任务

> ID：14244114
> 
> 赞同：220
> 
> 时间：2013-01-09T18:36:48.903
> 
> 标签：c#, .net, async-await, task-parallel-library

我想创建一个完整的`Task`（不是`Task<T>`）。.NET 中有内置的东西来做到这一点吗？

一个相关问题： [创建一个已完成的 Task<T>](https://stackoverflow.com/questions/4245968/create-a-completed-taskt)

* * *

## 回答 #1

> 赞同：264
> 
> 时间：2014-10-06T23:04:20.873

[.Net (v4.6)](https://msdn.microsoft.com/library/ms171868.aspx#v46)的最新版本只是添加了一个内置的[Task.CompletedTask](https://msdn.microsoft.com/en-us/library/system.threading.tasks.task.completedtask(v=vs.110).aspx)：

```
Task completedTask = Task.CompletedTask; 
```

该属性被实现为无锁单例，因此您*几乎*总是使用相同的已完成任务。

* * *

## 回答 #2

> 赞同：169
> 
> 时间：2013-01-09T18:44:07.393

`Task<T>`可以隐式转换为`Task`，因此只需获得一个已完成的`Task<T>`（具有任何`T`和任何值）并使用它。您可以使用类似的东西来隐藏实际结果在某处的事实。

```
private static Task completedTask = Task.FromResult(false);
public static Task CompletedTask()
{
    return completedTask;
} 
```

请注意，由于我们没有公开结果，并且任务始终完成，我们可以缓存单个任务并重用它。

如果您使用的是 .NET 4.0 并且没有，`FromResult`那么您可以使用以下方法创建自己的`TaskCompletionSource`：

```
public static Task<T> FromResult<T>(T value)
{
    var tcs = new TaskCompletionSource<T>();
    tcs.SetResult(value);
    return tcs.Task;
} 
```

* * *

## 回答 #3

> 赞同：69
> 
> 时间：2014-11-04T14:32:18.127

我首选的方法是`Task.WhenAll()`不带参数调用。[MSDN 文档](http://msdn.microsoft.com/en-us/library/hh160374(v=vs.110).aspx)指出“如果提供的数组/可枚举不包含任务，则返回的任务将在返回给调用者之前立即转换为 RanToCompletion 状态。” 。这听起来像你想要的。

更新：我在[Microsoft's Reference Source](http://referencesource.microsoft.com/mscorlib/system/threading/Tasks/Task.cs.html)找到了源代码；在那里你可以看到 Task.WhenAll 包含以下内容：

```
return (tasks.Length == 0) ? // take shortcut if there are no tasks upon which to wait
            Task.CompletedTask :
            new WhenAllPromise(tasks); 
```

所以 Task.CompletedTask 确实是内部的，但它是通过调用不带参数的 WhenAll() 来暴露的。

* * *

## 回答 #4

> 赞同：38
> 
> 时间：2014-03-15T22:42:39.327

我会用`Task.Delay(0)`. 在内部，它返回一个已完成的缓存实例`Task<T>`。无论如何，这正是当前答案建议做的事情，只是现在您不必自己缓存实例，代码中也没有任何不雅的垃圾值。

您可能认为您可以`Task.Yield()`改用，但事实证明 of 的结果`Task.Yield()`不是*的*子类型`Task`，而 的结果`Task.Delay(0)`是。这是两者之间的细微差别之一。

* * *

## 回答 #5

> 赞同：34
> 
> 时间：2013-01-09T18:42:06.933

您可以使用[Task.FromResult](http://msdn.microsoft.com/en-us/library/hh194922.aspx)（在 .NET 4.5 中）返回已完成的`Task<T>`.

如果你需要一个非泛型`Task`，你总是可以使用`Task.FromResult(0)`或类似的，因为`Task<T>`它是`Task`.

* * *

## 回答 #6

> 赞同：13
> 
> 时间：2017-03-08T11:47:42.883

对于 .Net 4.6 及更高版本使用

```
return Task.CompletedTask; 
```

对于较低版本，您可以使用

```
return new Task(() => { }); 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2014-10-29T16:05:24.567

您可以使用来自[Stephen Cleary](https://github.com/StephenCleary)的优秀库[AsyncEx中的](https://github.com/StephenCleary/AsyncEx/blob/master/src/Nito.AsyncEx.Tasks/TaskConstants.cs#L61)[Nito.AsyncEx.TaskConstants.Completed](https://github.com/StephenCleary/AsyncEx)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-04-29T15:32:36.760

怎么样：

```
#pragma warning disable 1998
    public async Task emptyTask() {
    }
#pragma warning restore 1998 
```

如果您不介意，可以忽略警告抑制。

# python - Python BeautifulSoup HTML解析获取文本

> ID：14244117
> 
> 赞同：1
> 
> 时间：2013-01-09T18:36:52.043
> 
> 标签：python, html-parsing, beautifulsoup

我有一个 HTML 页面，其格式如下

```
<section class="entry-content">
    <p>...</p>
    <p>...</p>
    <p>...</p>
</section> 
```

我正在尝试`<p>`使用 BeautifulSoup/Python 提取标签中包含的文本。这是我到目前为止所拥有的，但我不确定如何“挖掘”`<p>`标签并获取文本。任何建议将不胜感激。

```
import urllib2
from BeautifulSoup import BeautifulSoup

def main():
    url = 'URL'
    data = urllib2.urlopen(url).read()
    bs = BeautifulSoup(data)

    ingreds = bs.find('section', {'class': 'entry-content'})

    fname = 'most.txt'
    with open(fname, 'w') as outf:
    outf.write('\n'.join(ingreds))

if __name__=="__main__":
  main() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:39:30.170

您可以“挖掘”并使用`.stripped_strings`可迭代的标签从标签中获取文本：

```
section = bs.find('section', {'class': 'entry-content'})
ingreds = [' '.join(ch.stripped_strings) for ch in section.find_all(True)] 
```

我们`.find_all(True)`只循环遍历包含在 中的标签`section`，而不是直接的文本内容（例如换行符）。

请注意，这`.find_all(True)`将遍历任何嵌套标签，这可能导致字符串重复。以下将仅循环直接标记`section`：

```
ingreds = [' '.join(ch.stripped_strings) for ch in section if hasattr(ch, 'stripped_strings')] 
```

# android - Android 选项菜单标题截止

> ID：14244118
> 
> 赞同：0
> 
> 时间：2013-01-09T18:36:54.823
> 
> 标签：android, android-4.2-jelly-bean, android-menu

我有一个简单的选项菜单，只定义了标题，没有图标，文本被截断： ![Nexus 7 选项菜单被切断](../Images/6c0114f44ded6774d20f512d30cf29a7.png)

我能做些什么来避免这种情况？我正在使用 Jelly Bean 4.2 并在 Nexus 7 上进行测试。我在文档中或通过 Google 找不到对齐或菜单定位的任何内容。

菜单定义的 XML 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >

    <item
        android:id="@+id/menu_create_user"
        android:title="Create">
    </item>
    <item
        android:id="@+id/menu_refresh"
        android:title="Refresh">
    </item>
    <item
        android:id="@+id/menu_remote"
        android:title="View Remote">
    </item>
</menu> 
```

有什么想法或想法吗？

*编辑* 进一步看，我的问题似乎是它看起来是以“手机尺寸”而不是“平板电脑”尺寸显示的。将我的操作栏的大小与 Google Maps 或 Drive 的大小进行比较，它要大得多，而且像素化程度更高（请参阅菜单图标上的模糊性？）

所以我想部分问题是我如何告诉我的应用程序我在平板电脑上？我在应用程序配置中使用标准 Theme.Holo.*，但这是我设置的唯一 L&F。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T15:43:52.463

我用清单中的这个简单行解决了这个问题

`supports-screens android:anyDensity="true"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:24:47.417

好的，这是一个布局问题，但并不是很明显。我所要做的就是“解决”这个问题：

```
<uses-sdk android:minSdkVersion="11"  android:targetSdkVersion="17" /> 
```

到我的清单文件。我认为**minSdkVersion**可以高于 3，其中添加了明显不同的屏幕尺寸支持。我猜手机布局根本没有空间用于操作栏中的文本视图。

[从这里](https://stackoverflow.com/questions/3438926/android-layout-large-folder-is-been-ignored)的另一个 StackOverflow 问题中发现了这一点。到目前为止，我还没有阅读任何关于不同屏幕尺寸需要做什么以及桌子和手机之间的差异的内容。

# .net - 在云环境中记录 .NET 异常和消息有哪些选项？

> ID：14244120
> 
> 赞同：1
> 
> 时间：2013-01-09T18:37:08.700
> 
> 标签：.net, exception, logging, azure, cloud

我目前有一个在 Microsoft 的 Azure 平台上运行的 Web 应用程序，具有多个 Web 和辅助角色。我希望能够将所有异常和消息记录到 SAAS 产品中，以便我团队中的所有开发人员都可以轻松搜索并响应问题。

你们有没有人使用或知道可以与基于云的 Web 应用程序一起使用的良好日志记录工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:24:41.087

标准`Trace.WriteLine`和`Trace.Error`功能是一个非常简单的解决方案。Azure 诊断支持将此输出写入表存储。

然后，您可以使用[Azure 诊断管理器之类的工具查看日志数据](http://www.cerebrata.com/products/AzureDiagnosticsManager/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-10T11:35:22.247

*   Log4Net/NLog + Loggly/(ElasticSearch + Kibana) + Pager Duty 可以很好的一套
*   Raygun 可能是另一种选择

# ios - 如何定义一个 NSPredicate，它使用 group by 指定具有 max(x) 子句？

> ID：14244125
> 
> 赞同：1
> 
> 时间：2013-01-09T18:37:14.760
> 
> 标签：ios, objective-c, core-data, nspredicate

我在 iOS-CoreData 上下文中创建有效的 NSPredicate 时遇到问题。该表包含所有好友的所有消息。我需要得到每个好友的最新消息：

我尝试过使用 DBVisualizer，我需要以下 SQL（工作正常）

```
 /* for testing with a db tool like DbVisualizer
     select ZBAREJIDSTR,ZBODY, ZTIMESTAMP
     from ZXMPPMESSAGEARCHIVING_MESSAGE_COREDATAOBJECT
     group by ZBAREJIDSTR
     having max(ZTIMESTAMP)
     order by ZTIMESTAMP desc;
     */ 
```

以下代码因“无法解析格式字符串”而失败，我找不到适合我的示例。

```
 - (NSFetchedResultsController *)fetchedResultsController {
if (fetchedResultsController == nil)    {

    NSManagedObjectContext *moc = [[Utilities chatManagerFromAppDelegate] managedObjectContext_messageArchiving];

    NSEntityDescription *entity = [NSEntityDescription entityForName:@"XMPPMessageArchiving_Message_CoreDataObject"
                                              inManagedObjectContext:moc];

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    NSAttributeDescription* bodyDesc = [entity.attributesByName objectForKey:@"body"];
    NSAttributeDescription* barJidStrDesc = [entity.attributesByName objectForKey:@"barJidStr"];
    NSAttributeDescription* timestampDesc = [entity.attributesByName objectForKey:@"timestamp"];

    NSPredicate *predicateMaxTimestamp = [NSPredicate predicateWithFormat:@"@max.timestamp"];

    NSSortDescriptor *sortDescriptorTimestampDesc = [[NSSortDescriptor alloc] initWithKey:@"timestamp" ascending:NO];
    NSArray *sortDescriptors = [NSArray arrayWithObjects:sortDescriptorTimestampDesc, nil];

    [fetchRequest setEntity:entity];
    [fetchRequest setPropertiesToFetch:[NSArray arrayWithObjects:barJidStrDesc, bodyDesc, timestampDesc, nil]];
    [fetchRequest setPropertiesToGroupBy:[NSArray arrayWithObject:bodyDesc]];
    [fetchRequest setHavingPredicate: predicateMaxTimestamp];
    [fetchRequest setSortDescriptors:sortDescriptors];
    [fetchRequest setResultType:NSDictionaryResultType];
    [fetchRequest setFetchBatchSize:10];
    fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest
                                                                   managedObjectContext:moc
                                                                     sectionNameKeyPath:nil
                                                                              cacheName:nil];
    .... 
```

实际上我也很欣赏其他替代方案，因为我需要更新底层模型（[fetchedResultsController setDelegate:self];），它不适用于 NSDictionaryResultType（但 NSDictionaryResultType 对于 group by 是必需的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:16:14.647

首先，如果你想“分组”，你需要指定获取的结果控制器`sectionNameKeyPath`应该是“barJidStr”。

其次，最大时间戳谓词格式字符串的正确语法是
`@"ANY @max.timestamp"`.

第三，您的 SQL 和属性名称之间存在差异。如果您的属性定义为“barJidStr”，则原始 SQL 应该是“ZBARJIDSTR”，而不是“ZBAREJIDSTR”。

# c++ - 支持 C++ 的 Diff 实用程序

> ID：14244126
> 
> 赞同：6
> 
> 时间：2013-01-09T18:37:25.817
> 
> 标签：c++, g++, diff, clang, abstract-syntax-tree

是否有免费的 diff 实用程序可以使用它们的 AST 而不是文本来比较两个 C++ 文件？

我在想的是这样的：

*   将两个文件都转换为 AST
*   将 AST 渲染为 C++ 代码（这将缩进规范化）
*   在这两者之间做正常的差异
*   还尝试检测已完成的简单重构（例如添加/删除/重命名成员）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T15:28:10.063

[其他回答者之一要求发布商业工具的名称。]

Semantic Designs 的 SmartDifferencer 工具将解析 C++，并根据 AST 计算差异；布局格式根本不重要。解析器是一个完整的 C++11 解析器。它可以解析大多数源文件，而无需扩展大多数预处理器指令，只要它们是“结构化的”；C++ 预处理器的使用通常不像在 C 中那样滥用。

有其他语言的 SmartDifferencer 版本。

[披露：我是 Semantic Designs 的 CTO]

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T19:21:30.587

对于您的问题，我可以想到两种替代解决方案：

1.  讨论将作为一个小组使用的编码风格并坚持下去。您可能必须在团队成员不同的个人编码风格之间找到折衷方案。

2.  如果您正在使用源代码管理，请添加挂钩以删除提交时的所有格式并在结帐时自定义代码格式。这需要一些工作，但允许团队成员使用自己的格式样式。当然，这并不能解决变量命名和其他非格式化代码样式元素的不同意见。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-30T12:49:40.737

有像 MOSS ( [http://theory.stanford.edu/~aiken/moss/](http://theory.stanford.edu/~aiken/moss/) ) 这样的工具可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T19:13:12.647

您可以通过 AStyle 传递代码以在执行差异之前规范化缩进/间距/格式。这不会对重构做任何事情，但老实说，您需要完整的预处理/编译通过才能正确执行此 AFAICS。

[http://astyle.sourceforge.net/](http://astyle.sourceforge.net/)

# .net - WndProc 重载时抛出异常

> ID：14244130
> 
> 赞同：5
> 
> 时间：2013-01-09T18:37:53.207
> 
> 标签：.net, winforms, exception, f#, wndproc

我正在尝试处理 .NET WebBrowser 类型的 Close 事件，这似乎无法开箱即用。（**编辑：**`window.close()`在浏览器中运行的脚本中发出调用时会发出此事件。）

我见过的一种解决方案是[扩展](http://blogs.artinsoft.net/Mrojas/archive/2009/05/21/Extended-WebBrowser-Control-Series-WebBrowser-Control-and-windowClose%28%29.aspx)[类`WebBrowser`和方法`override``WndProc`](http://blogs.artinsoft.net/Mrojas/archive/2009/05/21/Extended-WebBrowser-Control-Series-WebBrowser-Control-and-windowClose%28%29.aspx)。

我的扩展代码如下：

```
type internal ExtendedBrowser () = class
    inherit System.Windows.Forms.WebBrowser()

    let WM_PARENTNOTIFY : int = 0x0210
    let WM_DESTROY      : int = 0x0002

    let closed : Event<unit> = new Event<unit>()

    do ()

    [<System.Security.Permissions.PermissionSet(System.Security.Permissions.SecurityAction.Demand, Name = "FullTrust")>]
    override this.WndProc (msg : Message byref) =
        match msg.Msg with
        | wm when wm = WM_PARENTNOTIFY ->
            if (not base.DesignMode) && (msg.WParam.ToInt32() = WM_DESTROY)
            then closed.Trigger()
            base.DefWndProc(ref msg)
        | _ ->
            base.WndProc(ref msg)

    member this.Closed = closed.Publish
end 
```

这最终导致在访问该类型的实例时引发异常：

```
Unhandled Exception: System.Reflection.TargetInvocationException: Unable to get the window handle for the 'ExtendedBrowser' control. Windowless ActiveX controls are not supported. ---> System.ComponentModel.Win32Exception: Error creating window handle.
   at System.Windows.Forms.NativeWindow.CreateHandle(CreateParams cp)
   at System.Windows.Forms.Control.CreateHandle()
   at System.Windows.Forms.Control.get_Handle()
   at System.Windows.Forms.WebBrowserBase.DoVerb(Int32 verb)
   at System.Windows.Forms.WebBrowserBase.TransitionFromRunningToInPlaceActive()

   --- End of inner exception stack trace ---
   at System.Windows.Forms.WebBrowserBase.TransitionFromRunningToInPlaceActive()

   at System.Windows.Forms.WebBrowserBase.TransitionUpTo(AXState state)
   at System.Windows.Forms.WebBrowser.get_AxIWebBrowser2()
   at System.Windows.Forms.WebBrowser.PerformNavigate2(Object& URL, Object& flag
s, Object& targetFrameName, Object& postData, Object& headers)
   at System.Windows.Forms.WebBrowser.Navigate(String urlString)
   at [PRODUCT].Application.WebBrowser..ctor() in C:\[PATH]\WebBrowser.fs:line 107
   at Program.Main.main(String[] args) in C:\[PATH]\Program.fs:line 79
Press any key to continue . . . 
```

目前它在调用`Navigate("about:blank")`（实例构造后的第一次访问）时出错。我可以注释掉`WndProc`覆盖并且一切正常（除了错过关闭事件）。

有人说您必须[将安全属性放在`WndProc`覆盖](https://stackoverflow.com/questions/12010296/net-4-0-accessviolationexception-and-wndproc)上，所以我这样做了，但它并没有解决问题。

有人说你可以[禁用 DEP](https://stackoverflow.com/a/12000538/225292)，但我试过了，它并没有让我免除 EXE。

在浏览器（也称为 WebBrowser）的包装器中创建了一个扩展实例，并在 my 中创建了一个实例，该实例`main`在 [STAThread] 中运行（这似乎也是必需的）。

有谁知道可能出了什么问题？

（我真正追求的是一种获取关闭事件通知的方法，所以如果有人知道替代路线，我会很高兴听到它。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:01:32.800

如果您想在`WebBrowser`控件关闭时收到通知，您可以创建普通`WebBrowser`类的实例并向事件添加事件处理程序——它在包含您的实例的表单/控件关闭`HandleDestroyed`时触发。`WebBrowser`

如果这不起作用，您可以尝试将`Parent`属性转换为`Form`并挂钩`FormClosing`事件；有关这两种技术的示例，请参见此处：[HandleDestroyed event in userControl](https://stackoverflow.com/questions/8657862/handledestroyed-event-in-usercontrol)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T17:08:56.313

[我发现了一个帖子，其他人在覆盖 F# 中的 WndProc 方法时](http://cs.hubfs.net/topic/None/57539)遇到了同样的问题，那里的解决方案对我有用；工作代码如下：

```
type ExtendedWebBrowser () = class
    inherit System.Windows.Forms.WebBrowser()

    let WM_PARENTNOTIFY : int = 0x0210
    let WM_DESTROY      : int = 0x0002

    let closed : Event<unit> = new Event<unit>()

    do ()

    override this.WndProc (msg : Message byref) =
        match msg.Msg with
        | wm when wm = WM_PARENTNOTIFY ->
            if (not base.DesignMode) && (msg.WParam.ToInt32() = WM_DESTROY)
            then closed.Trigger()
            base.DefWndProc(&msg)
        | _ ->
            base.WndProc(&msg)

    member this.Closed = closed.Publish
end 
```

似乎 F# 的处理`ref`方式与 C# 有点不同：Doing some reading on [Parameters and Arguments in F#](http://msdn.microsoft.com/en-us/library/dd233213.aspx) -- 请参阅*Passing by Reference*部分 -- 似乎`ref`调用复制了它的参数并将该副本用作引用单元格的值；所以，我传递的是一个包含内容副本的参考单元格，`msg`而不是对原始内容的引用。address-of 运算符 ( ) 获取值的地址，因此这就是and方法`&`的参数所需要的，而不是将它们包装在s 中。`DefWndProc``WndProc``ref`

# jquery - jQuery按钮集不反映更新

> ID：14244133
> 
> 赞同：2
> 
> 时间：2013-01-09T18:38:00.863
> 
> 标签：jquery, user-interface

我有一些使用 jQuery UI 和 jQuery 1.6+ 的单选按钮集

当某个收音机被选中“是”时，另一个收音机也被强制检查。

```
<input type="radio" name="111" class="set111a" id="111a" value="1" />
<input type="radio" name="111" class="set111b" id="111b" value="0" checked="checked" />

<input type="radio" name="112" class="set112a" id="112a" value="1" />
<input type="radio" name="112" class="set112b" id="112b" value="0" checked="checked" /> 
```

这是我用来尝试强制其他收音机检查的 jQuery 代码。

```
$("#112a").change(function() {
    if ($("#112a").is(":checked")) {
        $('#111a').prop("checked",true);
        $("#111b").prop("checked",false);
    }
}); 
```

它确实有效，但仅在检查数据时（通过提交表单）。它表明如果 112 为 1，则 111 为 1。但是，问题在于：“111”按钮的实际可视部分仍然显示它设置为“NO”（或值为 0）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:41:24.827

你的代码对我有用。`#111b`如果需要，我可能会建议禁用无效的单选按钮`#111a`，否则它们可能会覆盖您的手动强制。此外，当单选按钮实际打开时，您只会在单选按钮上触发更改事件，因此您可能需要更广泛的选择器。

```
$("input").change(function()
{
  if ($("#112a").is(":checked"))
  {
      $('#111a').prop("checked",true);
      $('#111b').attr('disabled', 'disabled');
      $("#111b").prop("checked",false);
  }
  else
  {
      $('#111b').attr('disabled', null);
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:46:58.163

试试，这是你想做的吗

**HTML**

```
<input type="radio" name="111" class="set111a" id="111a" value="1" />
<input type="radio" name="111" class="set111b" id="111b" value="0" checked="checked" />

<input type="radio" name="112" class="set112a" id="112a" value="1" />
<input type="radio" name="112" class="set112b" id="112b" value="0" checked="checked" />

<input id="btn" type="button" value="Click after change"/> 
```

**JS**

```
$("#112a").change(function() {
    if ($("#112a").is(":checked")) {
        $('#111a').click();
    }
});

$("#btn").click(function() {
    alert($("#111a").is(":checked"));
}); 
```

[演示在这里](http://jsfiddle.net/4f2FY/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:31:24.480

您需要在按钮集上调用刷新，以便 ui 更新

```
$("#radio").buttonset(); // <-- whatever element you are wrapping the radio buttons in
$("#112a").change(function() {
    if ($("#112a").is(":checked")) {
        $('#111a').prop("checked",true);
        $("#111b").prop("checked",false);
    }
  $("#radio").buttonset('refresh'); // <-- refresh the buttonset
}); 
```

[小提琴](http://jsfiddle.net/kBKUB/)

这是[按钮api的链接](http://api.jqueryui.com/button/)

# jquery - 在选择列表下拉 onChange 之外交换图像

> ID：14244142
> 
> 赞同：0
> 
> 时间：2013-01-09T18:38:32.280
> 
> 标签：jquery, wordpress, select, onchange

我有一个从列表创建的下拉选择。在选择并单击 go 时，表单将以跳转菜单方式重定向。有问题的下拉菜单实际上是一个 WordPress 主菜单，但出于这些目的，这可能并不重要。

```
<nav class="widget">
   <ul id="odm-13-widget" class="menu">
      <li id="menu-item-122" class="menu-item-122"><a href="http://www.ex1.com">English</a></li>
      <li id="menu-item-120" class="menu-item-120"><a href="http://www.ex2.com/">United Kingdom</a></li>
      <li id="menu-item-123" class="menu-item-123"><a href="http://www.ex3.com/">France</a></li>
   </ul>
</nav> 
```

jumpto 有效。我需要的是下拉左侧的相应图像以在 onChange 上进行更改。

```
<div id="langflagcontainer"><img id="langflag" class="flags" src="flag_us.gif" /></div> 
```

该标志以 flag_us.gif 开头，但是当您选择 United Kingdom 或 menu-item-120 onChange 时，它​​将更改为 flag_uk.gif。法国的下一个选项是 flag_fr.gif。

我在 SO 上找到了使用带有值和选项的选择列表而不是带有 ul 和 li 元素的列表的示例。

如前所述，我正在使用 WordPress 小部件。它是优化的下拉菜单，我不确定是否可以向 li 添加值属性。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:44:54.317

您可以使用[`jQuery`](http://jquery.com/)来完成此操作

[下载](http://jquery.com/download/)或链接：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script> 
```

将[`jQuery`](http://jquery.com/)库添加到您的页面中，然后在您的标签之前添加此代码`</body>`：

```
<script type="text/javascript">
    $("#odm-13-widget").parent("nav").onChange(function(){
        var country = $(this).val();
        switch(country){
            case 'English': country = "us"; break;
            case 'United Kingdom': country = "uk"; break;
            case 'France': country = "fr"; break;
        }
        $("#langflag").attr("src","flag_"+country+".gif");
    });
</script> 
```

# ajax - 搜索本地日期范围 Elastic Search

> ID：14244146
> 
> 赞同：0
> 
> 时间：2013-01-09T18:38:42.383
> 
> 标签：ajax, json, curl, elasticsearch

我正在使用弹性搜索来搜索一组人，每个人都有一个数组（localdate）中的日期

但是我不知道如何按完整日期搜索。我尝试将“日期：'1999,4'”作为日期，但它返回错误。我也尝试在 cURL 中执行此操作，但它也返回了错误。

```
self.searchCriteria = "date:1999"

"http://leServer:9200/people/person/_search?q=" + self.searchCriteria 
```

返回以下内容

```
 {
            "_index": "people",
            "_type": "person",
            "_id": "YRM33o5NSYa0ljHythDHrg",
            "_score": 1,
            "_source": {
                "date": [
                    1999,
                    4,
                    23
                ]
            }
        }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:49:20.450

我想不出任何合理的方式来搜索这样的数组。我只能建议以下替代解决方案之一：

1.  将其索引为数字`19990423`并使用范围进行搜索
2.  将其索引为字符串`1999-04-23`并使用通配符进行搜索
3.  使用 elasticsearch`date`类型和使用范围进行搜索
4.  将年、月和日期索引为 3 个不同的字段

# r - R将数据框中的变量解释为因子；它不是

> ID：14244147
> 
> 赞同：2
> 
> 时间：2013-01-09T18:38:42.837
> 
> 标签：r

我将 csv 导入到 R 中，它认为我的变量 FERNH 是一个因素；不是。我不知道为什么或如何解决它。我查看了 FERNH 中的值，它们似乎是正确的，并且与其他 8 个变量一致。请指教。

```
str(height)
'data.frame':   512 obs. of  9 variables:
 $ DSH   : int  50 4 35 10 12 0 0 30 0 0 ...
 $ ESH   : int  0 0 0 0 0 30 80 10 8 15 ...
 $ ETH   : int  0 0 0 0 0 0 0 0 0 0 ...
 $ CANEH : int  0 0 40 15 0 0 0 0 0 0 ...
 $ HERBH : int  0 0 0 0 0 0 5 15 25 10 ...
 $ FERNH : Factor w/ 32 levels "0","10","100",..: 1 1 1 13 1 1 26 1 14 1 ...
 $ C4H   : int  0 0 0 0 0 0 0 0 0 13 ...
 $ GRASSH: int  40 0 0 0 0 0 0 0 0 0 ...
 $ DTH   : int  0 0 0 0 0 0 0 0 0 0 ... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T18:51:56.107

@Justin 指出了问题所在。`levels`不过，您可以提供`colClasses='integer'`给.而不是试图用`read.csv`. 那么R在读取过程中遇到该值会报错，并报告它是什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T18:45:19.777

那里有一个`character`值，所以 R 按预期运行。看看有`levels(height$FERNH)`问题的值。您可以设置`stringsAsFactors=FALSE`您的阅读步骤或通过`options`，但随后该列将是 a`character`而不是`integer`。

虽然一开始这看起来很烦人，但如果字符列包含长字符串，它是一种出色的数据质量检查以及显着的内存节省。

# jmeter - JMeter web 登录测试返回 401 未授权

> ID：14244150
> 
> 赞同：2
> 
> 时间：2013-01-09T18:39:00.683
> 
> 标签：jmeter

我正在尝试使用 JMeter 对在本地 VM 上运行的 Web 登录表单进行负载测试，但我不断收到 401 Unauthorized 响应。我设置了一个 JMeter 代理来记录这些步骤，然后添加了 HTTP Cookie 管理器，但它仍然无法进行身份验证。

![HTTP 请求](../Images/9440faf5f32012d10c62727cd538f41b.png)

![请求重定向](../Images/7705c0a535e41a1f5543b2d8520e5429.png)

![请求第二次重定向](../Images/4e68e215fa4a9e7cff87ecbcc0acf67f.png)

![该页面应该是用户登录成功后的个人资料页面](../Images/9cf61e44808aea55a4ccb03238414233.png)

Cookie 管理器被使用并将 _auth_session 添加到请求中，但登录仍然失败。初始请求是传递用户名/密码信息的 POST 方法。我似乎无法弄清楚为什么它实际上没有进行身份验证。当我记录步骤时，它工作正常，但播放失败。这似乎是一个无头浏览器问题，因为在 Selenium IDE 中记录相同的步骤可以完美地播放它并且没有 401 响应。任何想法将不胜感激！

运行 Windows 7/64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:32:49.820

如果不看脚本，真的很难告诉你出了什么问题。所以我只是猜测并给你几个指示。

1.  您可能希望将 cookie 管理器保持在块的其余部分之上。那是在线程控制器之下（*即线程组级别*）。这可能不是问题，因为我可以在您的失败步骤中看到 _auth_session cookie，但这仍然是一个好习惯。

2.  如果您认为这可能是由于服务器未识别浏览器，您可以使用标头管理器并通过它发送浏览器（user_agent）信息。看[**例子**](http://jmeter.apache.org/usermanual/component_reference.html#header_manager_example)

3.  尝试摆弄 cookie 管理器中的 Cookie 政策和实施选项。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T18:29:33.317

我终于找到了我的问题的答案，所以如果其他人遇到同样的困难，请查看这个网站。

[http://ertw.com/blog/2010/06/29/load-testing-a-rails-app-and-the-authenticity_token/](http://ertw.com/blog/2010/06/29/load-testing-a-rails-app-and-the-authenticity_token/)

我遇到的问题是针对具有隐藏的authenticity_token 元素的Rails Web 应用程序进行身份验证。需要一个正则表达式来提取动态值，然后将其包含在 JMeter 的表单中。

# php - mysql快速命令和内存不足错误以及如何使用EXPLAIN

> ID：14244154
> 
> 赞同：0
> 
> 时间：2013-01-09T18:39:07.920
> 
> 标签：php, mysql, database, optimization

我有两个问题，我是 PHP 和 MySQL 的新手

首先我想知道如何在查询中运行 EXPLAIN 并查看它的结果，当我使用

```
$SQL = mysql_query("EXPLAIN SELECT id,name FROM table_name") 
```

我用

```
print_r($SQL) 
```

它只给了我资源 id 数值。我想知道它如何解释我的查询

我需要一个工作示例，向我展示如何查看解释或如何在页面上打印解释结果以阅读。

第二个问题是，

我的单个 PHP 页面有超过 25 个查询和来自不同表的所有查询，在一些查询中我使用了内部联接，主页设置为显示来自许多表的信息，有些表不用作联接，

此页面上的问题是它显示“MySQL 客户端内存不足”的错误消息。

所以这个问题是因为s​​ql查询太多或者只是我的查询没有优化好。

有什么建议么..？

## 编辑

对不起，我忘了提，mysql客户端内存不足的解决方案很快。比我如何在 PHP/MySQL 查询中使用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:44:55.557

对于`Explain`语句，请尝试从查询窗口或命令行运行它。

至于您遇到的错误，则表示mysql没有足够的内存来存储整个查询结果。[这里](http://dev.mysql.com/doc/refman/5.0/en/out-of-memory.html)有更多信息。

# wordpress - Wordpress 3.5 和画廊

> ID：14244155
> 
> 赞同：1
> 
> 时间：2013-01-09T18:39:17.470
> 
> 标签：wordpress, mobile, sliders

我在使用 WordPress 3.5 中的新画廊时遇到了一些困难。这是我们遇到的问题的简要说明。

**项目详情**

从同一 WP 安装生成的桌面和移动站点

当前使用 swipe [http://swipejs.com/](http://swipejs.com/)的修改版本作为移动滑块，该滑块支持获取更多带有偏移的帖子附件

**我们需要什么**

一种在多个页面上嵌入同一个图库的方法

桌面站点的图片列表类型库

支持滑动的移动滑块图库，一次显示一个图像，滑动时会得到另一个带有ajax的图像并显示它

**问题**

Wordress 3.5 不再为画廊附加图像，无法使用获取帖子附件来获取画廊中使用的图像

尝试过 nextgen 画廊，但找不到为画廊提供超过 2 个图像尺寸的方法，我们需要一个桌面缩略图、原始图像和一个移动大小的图像

任何建议如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:04:56.227

如果您上传到帖子，它仍然会设置该关系。有一个选项可以在图库中显示“上传到此帖子的图像”。在媒体管理器中。所以我不知道你的意思是：

> 无法使用获取帖子附件

您使用什么代码/在哪里显示画廊？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T22:16:03.940

直到 3.5，您可以获得所有附件图像 ID：

```
$attachments = get_children( array('post_parent' => $post_id, 'post_status' => 'inherit', 'post_type' => 'attachment', 'post_mime_type' => 'image', 'order' => $order, 'orderby' => $orderby) ); 
```

其中 $post_id 是当前帖子的 id，$order 和 $order_by 是标准查询变量（ASC，标准中的 menu_order）

然后使用图像 ID，您可以使用 foreach 和调用来获取它们：

```
wp_get_attachment_link 
```

获取图像链接，或获取带有 alt、宽度等的完整 html img 代码：

```
 wp_get_attachment_image 
```

应该在 3.5 中运行良好，因此您可以将所有图像上传到一个帖子并将其用作在任何地方显示整个画廊的占位符。

# c# - 通过同级分隔符元素对相邻元素进行分组

> ID：14244161
> 
> 赞同：2
> 
> 时间：2013-01-09T18:39:30.370
> 
> 标签：c#, linq

在将“人类可读”数据解析为一些更方便的数据结构时，我遇到的一个普遍问题如下：

假设我有一个兄弟元素列表：

```
var input = new[] {"moo", "*", "foo", "bar", "baz", "*", "roo", 
                   "moo", "*", "*", "hoot", "*", "boot"}; 
```

我知道这`*`是一个分隔符，它将所有相邻元素分组，直到下一个分隔符。所以与这个输入相关的“更方便”的数据结构是：

```
var expectedOutput = new List<List<string>>
  {
    new List<string> {"moo"},
    new List<string> {"*", "foo", "bar", "baz"},
    new List<string> {"*", "roo", "moo"},
    new List<string> {"*"},
    new List<string> {"*", "hoot"},
    new List<string> {"*", "boot"}
  }; 
```

过去，我将解析器编写为扩展方法，其语法与 LINQ 类似：

```
public static IEnumerable<IEnumerable<T>> GroupByDelimiter<T>(this IEnumerable<T> input, T delimiter)
{
    var currentList = new List<T>();
    foreach (T item in input)
    {
        if (!item.Equals(delimiter))
        {
            currentList.Add(item);
        }
        else
        {
            yield return currentList;
            currentList = new List<T> {item};
        }
    }

    // return the last list
    yield return currentList;
} 
```

这很好用，但我想知道是否**可以使用现有的 LINQ 扩展方法重写****此`GroupByDelimiter`**方法。更好的是，是否有一些我不知道的 LINQ 方法已经这样做了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:50:07.977

有一种使用条件作为分组分隔符的古怪方法。

```
var input = new[] {"moo", "*", "foo", "bar", "baz", "*", "roo", 
                   "moo", "*", "*", "hoot", "*", "boot"};
    int index = 0;
    var output = input.Select( x => new
                 {
                   Item=x, 
                   GroupCondition = x =="*" ? ++index:index     // Introduce GroupCondition, Increase it if delimiter is found      
                 })
          .GroupBy((x)=>x.GroupCondition)                      // Group by GroupCondition
          .Select( x => x.Select( y => y.Item));                // Get rid of GroupCondition 
```

演示[在这里](http://ideone.com/1urN8N)

演示输出

```
moo
* foo bar baz
* roo moo
*
* hoot
* boot 
```

# python - python locals() 和循环

> ID：14244162
> 
> 赞同：1
> 
> 时间：2013-01-09T18:39:32.797
> 
> 标签：python

我正在尝试做一些非常简单的事情，我不知道为什么我不能解决这个问题......

我有 2 个参数，我只想通过使用循环将它们都放入一个列表中，我使用循环的原因是因为有一天该函数可能需要许多 sys.argv 而不是本地变量，这就是我的意思：

```
def function(arg1, arg2):
    list = []
    for i in range(len(locals())):
        list.append(locals()[i])
function(1,2) 
```

如果你明白我的意思，你能告诉我这个问题的解决方案吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T18:42:21.287

`locals()`是一个字典，只是`.values()`用来获取所有包含的值：

```
list = locals().values() 
```

但是，如果您的函数将来会使用`sys.argv`，请让您的函数使用位置参数：

```
def func(*args):
    # args is a list of arguments
    print args

func(1, 2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:44:16.173

是否有理由需要`locals()`用于从中获取值的目的`sys.argv`？如果您正在解析命令行参数，也许看看`argparse`？ [http://docs.python.org/dev/library/argparse.html](http://docs.python.org/dev/library/argparse.html)

# java - 使用 maven-tomcat-plugin 启动多个 tomcat 实例

> ID：14244163
> 
> 赞同：1
> 
> 时间：2013-01-09T18:39:38.060
> 
> 标签：java, maven, tomcat, maven-tomcat-plugin

我们需要启动 3 个具有相同 web 应用程序但配置不同（通过 spring + 系统属性注入）的 tomcat，以便执行摆动应用程序的一些集成测试。

我们有一个专门用于此测试的 maven 项目，它获取服务器端应用程序的 WAR 和 Swing 应用程序的 JAR，在 3 个不同的端口集上启动 3 个 tomcat 实例，在这些 tomcat 中部署 WAR 并运行测试。

这是我们的 Maven 配置：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>xxx</groupId>
    <artifactId>XXX-SwingTests</artifactId>
    <version>3.1.2-SNAPSHOT</version>
    <name>XXX Swing Tests</name>
    <packaging>jar</packaging>

    <properties>
        <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
        <source.encoding>UTF-8</source.encoding>
        <java.compiler.version>1.6</java.compiler.version>
        <XXX.version>${project.version}</XXX.version>
        <swing-test.include>**/ *SwingTest*</swing-test.include>
    </properties>

    <dependencies>
        <dependency>
            <groupId>xxx</groupId>
            <artifactId>XXX-Client-Base</artifactId>
            <version>${XXX.version}</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>xxx</groupId>
            <artifactId>XXX-Client-Base</artifactId>
            <version>${XXX.version}</version>
            <type>test-jar</type>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>junit</groupId>
            <artifactId>junit</artifactId>
            <version>4.8.2</version>
            <scope>test</scope>
        </dependency>

        <dependency>
            <groupId>abbot</groupId>
            <artifactId>abbot</artifactId>
            <version>1.2.0</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <pluginManagement>
            <plugins>

                <plugin>
                    <groupId>org.apache.tomcat.maven</groupId>
                    <artifactId>tomcat7-maven-plugin</artifactId>
                    <version>2.0</version>

                    <!-- External Libraries included in Tomcat -->
                    <dependencies>

                        <!-- Active MQ dependencies -->
                        <dependency>
                            <groupId>org.apache.activemq</groupId>
                            <artifactId>activemq-all</artifactId>
                            <version>5.6.0</version>
                        </dependency>
                        <dependency>
                            <groupId>commons-logging</groupId>
                            <artifactId>commons-logging</artifactId>
                            <version>1.1.1</version>
                        </dependency>
                        <dependency>
                            <groupId>commons-collections</groupId>
                            <artifactId>commons-collections</artifactId>
                            <version>3.2.1</version>
                        </dependency>
                        <dependency>
                            <groupId>log4j</groupId>
                            <artifactId>log4j</artifactId>
                            <version>1.2.16</version>
                        </dependency>
                        <dependency>
                            <groupId>org.springframework</groupId>
                            <artifactId>spring-context</artifactId>
                            <version>3.0.6.RELEASE</version>
                        </dependency>
                        <dependency>
                            <groupId>org.springframework</groupId>
                            <artifactId>spring-asm</artifactId>
                            <version>3.0.6.RELEASE</version>
                        </dependency>
                        <dependency>
                            <groupId>org.springframework</groupId>
                            <artifactId>spring-beans</artifactId>
                            <version>3.0.6.RELEASE</version>
                        </dependency>
                        <dependency>
                            <groupId>org.springframework</groupId>
                            <artifactId>spring-core</artifactId>
                            <version>3.0.6.RELEASE</version>
                        </dependency>
                        <dependency>
                            <groupId>org.springframework</groupId>
                            <artifactId>spring-expression</artifactId>
                            <version>3.0.6.RELEASE</version>
                        </dependency>
                        <dependency>
                            <groupId>org.apache.xbean</groupId>
                            <artifactId>xbean-spring</artifactId>
                            <version>3.9</version>
                        </dependency>
                    </dependencies>
                    <configuration>
                        <ignorePackaging>true</ignorePackaging>
                        <webapps>
                            <webapp>
                                <groupId>xxx</groupId>
                                <artifactId>XXX-Web</artifactId>
                                <version>${XXX.version}</version>
                                <type>war</type>
                                <asWebapp>true</asWebapp>
                                <contextPath>XXX</contextPath>
                            </webapp>
                        </webapps>
                        <systemProperties>
                            <!-- Allow Slashes and backslashes encoding -->
                            <org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH>true</org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH>
                            <org.apache.catalina.connector.CoyoteAdapter.ALLOW_BACKSLASH>true</org.apache.catalina.connector.CoyoteAdapter.ALLOW_BACKSLASH>
                        </systemProperties>
                    </configuration>

                </plugin>
            </plugins>
        </pluginManagement>

        <resources>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
                <includes>
                    <include>*</include>
                </includes>
            </resource>
            <resource>
                <directory>src/main/resources</directory>
                <filtering>false</filtering>
                <excludes>
                    <exclude>*</exclude>
                </excludes>
            </resource>
            <resource>
                <directory>src/main/conf</directory>
                <filtering>true</filtering>
            </resource>
        </resources>

        <testResources>
            <testResource>
                <filtering>false</filtering>
                <directory>src/test/resources</directory>
                <includes>
                    <include>**/*</include>
                </includes>
                <excludes>
                    <exclude>**/*.xml</exclude>
                </excludes>
            </testResource>
            <testResource>
                <filtering>true</filtering>
                <directory>src/test/resources</directory>
                <includes>
                    <include>**/*.xml</include>
                </includes>
            </testResource>
        </testResources>
    </build>

    <profiles>

        <!-- Profile that starts the tomcat servers -->
        <profile>
            <id>start-servers</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <!-- Run CL server -->
                    <plugin>
                        <groupId>org.apache.tomcat.maven</groupId>
                        <artifactId>tomcat7-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>tomcat-run-CL</id>
                                <goals>
                                    <goal>run-war-only</goal>
                                </goals>
                                <phase>pre-integration-test</phase>
                                <configuration>
                                    <port>8180</port>
                                    <ajpPort>8109</ajpPort>
                                    <fork>true</fork>
                                    <systemProperties>
                                        <config_XXX_application>${project.build.directory}/test-classes/central/application.properties</config_XXX_application>
                                        <config_XXX_cron_application>${project.build.directory}/test-classes/central/cron.properties</config_XXX_cron_application>
                                        <config_XXX_external>${project.build.directory}/test-classes/central/external-providers.properties</config_XXX_external>
                                    </systemProperties>
                                    <contextFile>${project.build.directory}/classes/CL/context.xml</contextFile>
                                    <configurationDir>${project.build.directory}/tomcat-cl</configurationDir>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Run LL server -->
                    <plugin>
                        <groupId>org.apache.tomcat.maven</groupId>
                        <artifactId>tomcat7-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>tomcat-run-LL</id>
                                <goals>
                                    <goal>run-war-only</goal>
                                </goals>
                                <phase>pre-integration-test</phase>
                                <configuration>
                                    <port>8280</port>
                                    <ajpPort>8209</ajpPort>
                                    <fork>true</fork>
                                    <systemProperties>
                                        <config_XXX_application>${project.build.directory}/test-classes/local/application.properties</config_XXX_application>
                                        <config_XXX_cron_application>${project.build.directory}/test-classes/local/cron.properties</config_XXX_cron_application>
                                        <config_XXX_external>${project.build.directory}/test-classes/local/external-providers.properties</config_XXX_external>
                                    </systemProperties>
                                    <contextFile>${project.build.directory}/classes/LL/context.xml</contextFile>
                                    <configurationDir>${project.build.directory}/tomcat-ll</configurationDir>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Run OL server -->
                    <plugin>
                        <groupId>org.apache.tomcat.maven</groupId>
                        <artifactId>tomcat7-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>tomcat-run-OL</id>
                                <goals>
                                    <goal>run-war-only</goal>
                                </goals>
                                <phase>pre-integration-test</phase>
                                <configuration>
                                    <port>8380</port>
                                    <ajpPort>8309</ajpPort>
                                    <fork>true</fork>
                                    <systemProperties>
                                        <config_XXX_application>${project.build.directory}/test-classes/operational/application.properties</config_XXX_application>
                                        <config_XXX_cron_application>${project.build.directory}/test-classes/operational/cron.properties</config_XXX_cron_application>
                                        <config_XXX_external>${project.build.directory}/test-classes/operational/external-providers.properties</config_XXX_external>
                                    </systemProperties>
                                    <contextFile>${project.build.directory}/classes/OL/context.xml</contextFile>
                                    <configurationDir>${project.build.directory}/tomcat-ol</configurationDir>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>

                    <!-- Stop all servers -->
                    <plugin>
                        <groupId>org.apache.tomcat.maven</groupId>
                        <artifactId>tomcat7-maven-plugin</artifactId>
                        <executions>
                            <execution>
                                <id>tomcat-shutdown</id>
                                <goals>
                                    <goal>shutdown</goal>
                                </goals>
                                <phase>post-integration-test</phase>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>

        <!-- Profile that runs the swing tests in the integration-test phase -->
        <profile>
            <id>swing-tests</id>
            <activation>
                <activeByDefault>true</activeByDefault>
            </activation>
            <build>
                <plugins>
                    <!-- Execute swing tests in the 'integration-test' phase -->
                    <plugin>
                        <groupId>org.apache.maven.plugins</groupId>
                        <artifactId>maven-failsafe-plugin</artifactId>
                        <version>2.13</version>
                        <executions>
                            <execution>
                                <id>integration-test</id>
                                <phase>integration-test</phase>
                                <goals>
                                    <goal>integration-test</goal>
                                    <goal>verify</goal>
                                </goals>
                                <configuration>
                                    <argLine>-Xms512m -Xmx1024m -XX:MaxPermSize=512m</argLine>
                                    <includes>
                                        <include>${swing-test.include}</include>
                                    </includes>
                                </configuration>
                            </execution>
                        </executions>
                    </plugin>
                </plugins>
            </build>
        </profile>
    </profiles>

</project> 
```

即使日志没有显示任何特别的内容，只有针对服务器的测试首先启动成功，其他测试失败，我无法看到原因（我怀疑 spring 上下文启动不正确，但我不能确定）。如果我注释掉第一个插件执行，那么所有针对该服务器的测试现在都会失败（显然），但是针对列表中下一个的测试现在通过了。

你知道这个配置有什么问题吗？实现我们在这里尝试的正确方法是什么？

编辑：实际上，日志中有错误，但我不确定如何理解：

```
[INFO] [tomcat7:run-war-only {execution: tomcat-run-CL}]
[INFO] Running war on http://localhost:8180/xxx-SwingTests
[INFO] Creating Tomcat server configuration at C:\projects\xxx\workspace\xxx-SwingTests\target\tomcat-cl
[INFO] setting SystemProperties:
[INFO]  config_xxx_application=C:\projects\xxx\workspace\xxx-SwingTests\target/test-classes/central/application.properties
[INFO]  config_xxx_cron_application=C:\projects\xxx\workspace\xxx-SwingTests\target/test-classes/central/cron.properties
[INFO]  config_xxx_external=C:\projects\xxx\workspace\xxx-SwingTests\target/test-classes/central/external-providers.properties
[INFO]  org.apache.catalina.connector.CoyoteAdapter.ALLOW_BACKSLASH=true
[INFO]  org.apache.tomcat.util.buf.UDecoder.ALLOW_ENCODED_SLASH=true
[INFO] create webapp with contextPath: /xxx-SwingTests
[INFO] Deploying dependency wars
[INFO] Deploy warfile: C:\Users\Administrator\.m2\repository\xxx\xxx-Web\3.1.2-SNAPSHOT\xxx-Web-3.1.2-SNAPSHOT.war to contextPath: /xxx
Jan 9, 2013 7:44:27 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["http-bio-8180"]
Jan 9, 2013 7:44:27 PM org.apache.coyote.AbstractProtocol init
INFO: Initializing ProtocolHandler ["ajp-bio-8109"]
Jan 9, 2013 7:44:27 PM org.apache.catalina.core.StandardService startInternal
INFO: Starting service Tomcat
Jan 9, 2013 7:44:27 PM org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.30
Jan 9, 2013 7:44:27 PM org.apache.catalina.core.StandardContext resourcesStart
SEVERE: Error starting static Resources
java.lang.IllegalArgumentException: Document base C:\projects\xxx\workspace\xxx-SwingTests\target\xxx-SwingTests-3.1.2-SNAPSHOT does not exist or is not a readable directory
        at org.apache.naming.resources.FileDirContext.setDocBase(FileDirContext.java:140)
        at org.apache.catalina.core.StandardContext.resourcesStart(StandardContext.java:4906)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5086)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
Jan 9, 2013 7:44:27 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error in resourceStart()
Jan 9, 2013 7:44:27 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Error getConfigured
Jan 9, 2013 7:44:27 PM org.apache.catalina.core.StandardContext startInternal
SEVERE: Context [/xxx-SwingTests] startup failed due to previous errors
Jan 9, 2013 7:44:27 PM org.apache.catalina.deploy.NamingResources cleanUp
WARNING: Failed to retrieve JNDI naming context for container [StandardEngine[Tomcat].StandardHost[localhost].StandardContext[/xxx-SwingTests]] so no cleanup was performed for that container
javax.naming.NameNotFoundException: Name [comp/env] is not bound in this Context. Unable to find [comp].
        at org.apache.naming.NamingContext.lookup(NamingContext.java:820)
        at org.apache.naming.NamingContext.lookup(NamingContext.java:168)
        at org.apache.catalina.deploy.NamingResources.cleanUp(NamingResources.java:988)
        at org.apache.catalina.deploy.NamingResources.stopInternal(NamingResources.java:970)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.core.StandardContext.stopInternal(StandardContext.java:5495)
        at org.apache.catalina.util.LifecycleBase.stop(LifecycleBase.java:232)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:160)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
        at java.util.concurrent.FutureTask.run(FutureTask.java:138)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:52:06.500

问题是在同一个类加载器中启动两次 jndi 上下文，这在 tomcat 中目前是不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-16T12:43:50.860

只使用 Jetty + Tomcat 怎么样？

您无法通过插件将 Tomcat 用于尽可能多的实例。但是，您可以使用 maven-jetty-plugin 同时启动至少 2 个应用程序。

# css - 为什么 Firefox 18 使用 -moz-transform 渲染元素的方式与 Firefox 17 不同？

> ID：14244164
> 
> 赞同：3
> 
> 时间：2013-01-09T18:39:42.053
> 
> 标签：css, firefox, css-transforms

我有一些在 Firefox 17 中可以正常工作的 HTML/CSS，但在升级到 Firefox 18 后，它的行为不再符合我的预期。我不确定我的 CSS 是否做错了（这完全有可能，因为我是新手），或者 Firefox 18 中是否引入了错误。

以下 HTML 文件重现了该问题：

```
<html><head>
    <title>Transform test</title>

    <style>
        div.overlay {
            background-color: rgba(230, 230, 230, 0.8);
            bottom: 0;
            left: 0;
            position: fixed;
            right: 0;
            top: 0;
        }
        div.overlay.transparent {
            background-color: transparent;
        }
        div.overlayFrame {
            background-color: white;
            border: 1px solid gray;
            overflow: hidden;
            position: absolute;
        }
        div.overlayFrame0 {
            bottom: 50px;
            left: 50px;
            right: 50px;
            top: 50px;
        }
        div.overlayFrame1 {
            bottom: 45px;
            left: 55px;
            right: 45px;
            top: 55px;
        }
    </style>       
</head>

<body>
    <div class="overlay">
        <div style="-moz-transform: scale(1, 1);" class="overlayFrame overlayFrame1">
            <div class="overlay transparent">
                <div style="-moz-transform: scale(1, 1);" class="overlayFrame overlayFrame0">
                </div>
            </div>
        </div>
    </div>
</body></html> 
```

在 Firefox 17 中，这会产生相互堆叠的 div 偏移 5px，但在 Firefox 18 中，顶部 div 偏移更多。不过，奇怪的是，Firebug 认为放错位置的顶部 div 仍然在正确的位置，因为如果您在其 HTML 树查看器中选择该 div，它会在 Firefox 17 显示它的同一位置为该 div 绘制一个突出显示。

我已经对此进行了调试，直到确定如果我从外部 overlayFrame div 中删除“style”属性，则顶部 overlayFrame div 将显示在“正确”位置。

这是 Firefox 18 中的错误还是我正在做的事情？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:56:16.437

这个问题与定位上下文有关。它似乎是由在 div 中嵌套`position: fixed`div引起的`position: absolute`，反之亦然。当您这样做并`overflow: hidden;`设置时，`fixed`div 定位基于整个窗口（理论上应该如此）。但是，当`overflow: visible;`设置时，它的定位将基于绝对定位的父级。请注意设置溢出值时 Firefox 中的行为如何变化。

解决方案是不要嵌套“纸”背景 div；让第二个跟随第一个并自己放置。示例 [ [JSBin](http://jsbin.com/akudaj/1/edit) ]：

```
<html><head>
    <title>Transform test</title>

    <style>
        div.overlay {
            background-color: rgba(230, 230, 230, 0.8);
            bottom: 0;
            left: 0;
            position: fixed;
            right: 0;
            top: 0;
        }
        div.overlayFrame {
            background-color: white;
            border: 1px solid gray;
            overflow: hidden;
            position: absolute;
        }
        div.overlayFrame0 {
            bottom: 50px;
            left: 50px;
            right: 50px;
            top: 50px;
        }
        div.overlayFrame1 {
            bottom: 45px;
            left: 55px;
            right: 45px;
            top: 55px;
        }
    </style>       
</head>

<body>
  <div class="overlay"></div>
  <div style="-moz-transform: scale(1, 1);" class="overlayFrame overlayFrame1"></div>
  <div style="-moz-transform: scale(1, 1);" class="overlayFrame overlayFrame0">
    Paper!
  </div>
</body></html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:22:37.750

鉴于该测试用例，这很有可能是[https://bugzilla.mozilla.org/show_bug.cgi?id=827577](https://bugzilla.mozilla.org/show_bug.cgi?id=827577)。

# javascript - 将字符串转换为数字和 +、-、* 和 / - Javascript 方程计算器

> ID：14244170
> 
> 赞同：2
> 
> 时间：2013-01-09T18:39:56.137
> 
> 标签：javascript, converter, calculator, equation

我正在研究“方程式计算器”，但有一些问题。我现在可以插入我的等式，但我希望它是数字，而不仅仅是数字：我希望所有的 '+' 、 '-' 、 '*' 和 '/' '做正确的事。

所以这是我到目前为止的代码：

* * *

```
var ligning = prompt("Insert your equation here:");
var newLigning = ligning.split("=");
var sideOne = parseInt(newLigning[0],10);
var sideTwo = parseInt(newLigning[1],10);
var calculator = function() {

};
alert(sideOne);
alert(sideTwo); 
```

* * *

具体来说，这里举个例子：

'1 + 2 = 3' 应该提醒 3，然后再次提醒 3（因为底部有两个警报） - 我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:46:09.480

代替 ：

```
var sideOne = parseInt(newLigning[0],10); 
```

你可能想要这样的东西：

```
var sideOne = performMath(newLining[0],10); 
```

在哪里 ：

```
function performMath(equation) {
    //CODE HERE
} 
```

`performMath`可以通过几种方式完成。您需要拆分方程并获得 2 之间的数字和方程。这可以递归完成！

我认为这可能是一个很好的起点。

### 编辑

对于这个问题，如果您开始考虑操作优先级 (PEDMAS)，这将是一项稍微困难的任务。方法是相同的，`performMath`需要稍微复杂一些。在这种情况下，我会为数字推荐某种数组结构，为方程推荐另一种数组结构。

### 编辑 2

`Paul S`在开始之前对字符串进行消毒也是一个很好的点。您不能假设有人会输入方程式。Rich Cook 在编程时说：

> “今天的编程是软件工程师努力构建更大更好的防白痴程序与宇宙试图产生更大更好的白痴之间的竞赛。到目前为止，宇宙正在获胜。”

### 编辑 3

这个小代码片段应该有点帮助......无论如何这可能不是最有效的代码......

```
var equation = "1+22-3";
var operators = "+-*\/"

var currentNumber = "";
var numbers = new Array();
var operatorArray = new Array();
for(var i=0; i<equation.length; i++) {
  var currentChar = equation.charAt(i);
  if(operators.indexOf(currentChar) != -1) {
    operatorArray[operatorArray.length] = (currentChar);
    numbers[numbers.length] = (currentNumber);
    currentNumber = "";
  } else {
    currentNumber = currentNumber + currentChar;
    alert(currentNumber);
  }
}
numbers[numbers.length] = currentNumber;
alert("numbers : " + numbers);
alert("operators : " + operatorArray); 
```

现在您所要做的就是遍历数组并执行正确的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:50:43.980

`eval`真的很糟糕而且很容易被滥用，但是如果你知道你只接受数字和特定的运算符，那么你也可以做一些字符串清理，让它更安全一些

```
var ligning = prompt("Insert your equation here:"),
    newLigning = ligning.split("="),
    lhs = newLigning[0],
    rhs = newLigning[1];

function calculate(expr) {
    var s;
    expr = expr.replace(/[^\d*/()+-]/g, ''); // remove everything except permitted
    if (expr !== (s = expr.replace(/^[*/]*|[*/+-]*$/g, ''))) {
        expr = s; // don't allow * or / at the ends
        console.warn('Removing invalid operators');
    };
    return +eval(expr || 0); // + implicit converts to number
};

console.log(lhs = calculate(lhs), rhs = calculate(rhs), lhs === rhs); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T18:45:02.460

```
alert ( eval(newLigning[0]) );
alert ( eval(newLigning[1]) ); 
```

# android - 实现 Fragment 和 ViewPager 后无法编辑某些视图

> ID：14244172
> 
> 赞同：1
> 
> 时间：2013-01-09T18:39:58.923
> 
> 标签：android, android-fragments, android-viewpager, layout-inflater

**编辑：**

通过更多的探索，我几乎可以肯定问题在于，当我在我`FragmentActivity`的 onCreate() 方法中膨胀布局时，ViewPager 中会膨胀不同的视图。因此，当我尝试使用`xml1.findViewById()`它查看不同的视图来访问它们时。如何访问正在使用的视图`ViewPager`？看着我`FragmentPagerAdapter`，看起来片段每次超过 1 次滑动时都会被创建为新对象。我希望所有 4 个视图都初始化一次。然后每次我调用`updateUI`四个视图都会立即更改。所以我可以在新更新的所有四个视图之间滑动。

我尝试使用`pagerAdapter.getItem(index).getView().findViewById( )`，但它返回一个`NullPointerException`. 在我得到异常之后，我尝试在我的类中覆盖该`getView()`方法。`Fragment`我在方法中输入的只是`return view;`，其中 view 是方法中返回的 View 的保存实例`onCreateView`。这导致我的 ViewPager 显示 4 个空白屏幕可以在它们之间滑动。

我将我的`FragmentPagerAdapter`实现添加到问题的底部。

**结束编辑**

我尝试[`ViewPager`](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)使用`Fragments`. 我得到了非常奇怪的结果。

```
private TextView view1a, view1b;
private TextView view2a, view2b;
private TextView view3a, view3b;
private TextView view4a, view4b;
private Spinner spinner1, spinner2, spinner3, spinner4;
private Checkbox check1, check2, check3, check4;

private ViewPager mViewPager;
private View xml1, xml2, xml3, xml4;

public void onCreate( Bundle savedInstanceState ) {
    super.onCreate( savedInstanceState );
    setContentView( R.layout.main_page );

    mViewPager = (ViewPager) findViewById( R.id.pager );
    FragmentManager fm = getSupportFragmentManager();
    MoreParmsFragmentPagerAdapter pagerAdapter = new MoreParmsFragmentPagerAdapter(fm);

    xml1 = LayoutInflater.from( getBaseContext()).inflate( R.layout.xml1, null );
    xml2 = LayoutInflater.from( getBaseContext()).inflate( R.layout.xml2, null );
    xml3 = LayoutInflater.from( getBaseContext()).inflate( R.layout.xml3, null );
    xml4 = LayoutInflater.from( getBaseContext()).inflate( R.layout.xml4, null );
    populateSpinners();
    updateUI();
}

public void populateSpinners() {
    array1Adapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, res.getStringArray( R.array.array1 )  );
    array1Adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner1 = (Spinner) xml1.findViewById(R.id.spinner1);
    spinner1.setAdapter(array1Adapter);

    array2Adapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, res.getStringArray( R.array.array2 )  );
    array2Adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner2 = (Spinner) xml2.findViewById(R.id.spinner2);
    spinner2.setAdapter(array2Adapter);

    array3Adapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, res.getStringArray( R.array.array3 )  );
    array3Adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner3 = (Spinner) xml3.findViewById(R.id.spinner3);
    spinner3.setAdapter(array3Adapter);

    array4Adapter = new ArrayAdapter<String>( this, android.R.layout.simple_spinner_item, res.getStringArray( R.array.array4 )  );
    array4Adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    spinner4 = (Spinner) xml4.findViewById(R.id.spinner4);
    spinner4.setAdapter(array4Adapter);
}

public void updateUI() {
    view1a = (TextView) xml1.findViewById( R.id.view_one_a );
    view1b = (TextView) xml1.findViewById( R.id.view_one_b );
    view2a = (TextView) xml2.findViewById( R.id.view_two_a );
    view2b = (TextView) xml2.findViewById( R.id.view_two_b );
    view3a = (TextView) xml3.findViewById( R.id.view_three_a );
    view3b = (TextView) xml3.findViewById( R.id.view_three_b );
    view4a = (TextView) xml4.findViewById( R.id.view_four_a );
    view4b = (TextView) xml4.findViewById( R.id.view_four_b );
    // There is work done here to determine what to set
    // the different TextViews' text to.
    //
    // `view**.setText()` is called for all views above with their respective values.

    spinner1 = (Spinner) xml1.findViewById( R.id.spinner1 );
    spinner2 = (Spinner) xml2.findViewById( R.id.spinner2 );
    spinner3 = (Spinner) xml3.findViewById( R.id.spinner3 );
    spinner4 = (Spinner) xml4.findViewById( R.id.spinner4 );
    // There is work done here to determine what index the Spinners
    // should have selected.
    //
    // `Spinner.setSelection( index ) is called on all spinners.

    check1 = (CheckBox) xml1.findViewById( R.id.check1 );
    check2 = (CheckBox) xml2.findViewById( R.id.check2 );
    check3 = (CheckBox) xml3.findViewById( R.id.check3 );
    check4 = (CheckBox) xml4.findViewById( R.id.check4 );
    // There is work done here to determine whether or not
    // to check the CheckBoxes.
    //
    // CheckBox.setChecked() is called for all checkboxes.
}
} 
```

这是我的`Fragment`课程的一个例子：

```
public class xmlOneFragment extends Fragment {
    int mCurrentPage;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        /** Getting the arguments to the Bundle object */
        Bundle data = getArguments();

        /** Getting integer data of the key current_page from the bundle */
        mCurrentPage = data.getInt("current_page", 0);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
       View v = inflater.inflate(R.layout.xml1, container,false);
       return v;
    }
} 
```

第**一个**问题是`Spinners`它们永远不会被相应的数组填充。在我的方法中，有一些`LogCat`调用`populateSpinners()`向我展示了我的期望，但`Spinners`它们本身并没有被填充。

第二**个**问题出现在该`updateUI()`方法中。所有调用下方的注释`findViewById()`是我进行某些计算以确定要放入的文本、`TextViews`设置的索引`Spinners`以及是否检查`CheckBoxes`. 我有`LogCat`电话显示找到的值，它们都是预期的。调用方法时`.setText(), .setSelection(), and .setChecked()`，不会显示任何错误，但根本没有设置任何项目。一切都保持空白。

第三**个**问题是最让我困惑的。现在`TextViews`都有唯一的ID。当我第一次尝试实现这个`ViewPager`时，我让`updateUI()`方法处理没有调用`xml*.`前缀的TextViews。`findViewById()`

```
view1a = (TextView) findViewById( R.id.view_one_a );
view1b = (TextView) findViewById( R.id.view_one_b );
view2a = (TextView) findViewById( R.id.view_two_a );
view2b = (TextView) findViewById( R.id.view_two_b );
view3a = (TextView) findViewById( R.id.view_three_a );
view3b = (TextView) findViewById( R.id.view_three_b );
view4a = (TextView) findViewById( R.id.view_four_a );
view4b = (TextView) findViewById( R.id.view_four_b );
// There is work done here to determine what to set
// the different TextViews' text to.
view**.setText( whatever ); 
```

此方法导致`NullPointerException`, 但仅在使用第三页和第四页上的调用`.setText()`时。`TextViews`前两页没有抛出任何异常。所以我把第三页和第四页注释掉了。程序运行，前两页在正确的 TextView 中显示了正确的值。然后我尝试添加`xml*.`方法`findViewById()`，现在没有抛出异常，但根本没有更新视图。

**最后说明：**功能`ViewPager`正确，我可以很好地在正确的布局之间滑动。当我尝试使用我想要的值更新视图时会出现问题。我假设这个问题与我如何膨胀布局有关，或者我如何做太多次。第三个问题真的让我很困惑。我找不到第一页/第二页和第三/第四页之间的任何区别，但它们显然表现不同。此外，显示的第一个代码块表示为`Activity`，第二个代码块我切换为`FragmentActivity`。

**编辑添加 FragmentPagerAdapter**

```
public class MoreParmsFragmentPagerAdapter extends FragmentPagerAdapter {
    final int PAGE_COUNT = 4;

    public MoreParmsFragmentPagerAdapter( FragmentManager fm ) {
        super(fm);
    }

    public Fragment getItem( int arg0 ) {
        if( arg0 == 0 ) {
            xmlOneFragment xml1Frag = new xmlOneFragment();
            Bundle data = new Bundle();
            data.putInt( "current_page", arg0 );
            xmlOneFrag.setArguments( data );
            return xmlOneFrag;
        } else if( arg0 == 1 ) {
            xmlTwoFragment xml2Frag = new xmlTwoFragment();
            Bundle data = new Bundle();
            data.putInt( "current_page", arg0 );
            xmlTwoFrag.setArguments( data );
            return xmlTwoFrag;
        } else if( arg0 == 2 ) {
            xmlThreeFragment xml3Frag = new xmlThreeFragment();
            Bundle data = new Bundle();
            data.putInt( "current_page", arg0 );
            xmlThreeFrag.setArguments( data );
            return xmlThreeFrag;
        } else {
            xmlFourFragment xml4Frag = new xmlFourFragment();
            Bundle data = new Bundle();
            data.putInt( "current_page",  arg0 );
            xmlFourFrag.setArguments( data );
            return xmlFourFrag;
        }
    }

    @Override
    public CharSequence getPageTitle(int position) {
        if( position == 0 ) {
            return "xml1";
        } else if( position == 1 ){
            return "xml2";
        } else if( position == 2 ) {
            return "xml3";
        } else {
            return "xml4";
        }
    }

    @Override
    public int getCount() {
        // TODO Auto-generated method stub
        return PAGE_COUNT;
}
} 
```

**编辑2：**

```
private ViewPager mViewPager;
private MoreParmsFragmentPagerAdapter pagerAdapter;
private FragmentManager fm;
private AntiPumpFragment apFrag;
private RelaxedCloseFragment relFrag;
private MiscParmsFragment miscFrag;
private DNP3Fragment dnpFrag;

public void onCreate( Bundle savedInstanceState ) {
    super.onCreate( savedInstanceState );
    mViewPager = (ViewPager) findViewById( R.id.pager );
    fm = getSupportFragmentManager();
    pagerAdapter = new MoreParmsFragmentPagerAdapter(fm);
    mViewPager.setAdapter( pagerAdapter );

    apFrag = (AntiPumpFragment) fm.findFragmentByTag( "android:switcher:" + R.id.pager + ":0" );
    relFrag = (RelaxedCloseFragment) fm.findFragmentByTag( "android:switcher:" + R.id.pager + ":1" );
    miscFrag = (MiscParmsFragment) fm.findFragmentByTag( "android:switcher:" + R.id.pager + ":2" );
    dnpFrag = (DNP3Fragment) fm.findFragmentByTag( "android:switcher:" + R.id.pager + ":3" ); 
```

在我的代码中，所有这些片段都返回 null。在我的`ViewPager`屏幕上正确显示，我可以干净地在所有四个视图之间滑动。但是，我的所有`if( apFrag != null )`陈述总是被跳过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T08:50:38.627

> 第一个问题是 Spinner 永远不会被其对应的数组填充。在我的 populateSpinners() 方法中有 LogCat 调用向我展示了我的期望，但 Spinners 本身没有填充。

正如您后来发现的那样，您看不到`Spinners`初始化，因为您无需连接到来自 的视图，而是`Fragments`简单**地**`ViewPager`使用 a从. 初始化这个新视图的子视图不会显示任何视觉结果，因为它不存在/显示在 UI 的 UI 中，它“浮动”在等待您将其附加到 a中，因此它可以显示它具有的视图。`LayoutInflater`**`Fragments``Activity``ViewGroup``Activity`**

 **> 第二个问题出现在 updateUI() 方法中。所有 findViewById() 调用下方的注释是我进行某些计算以确定要放入 TextViews 中的文本、将 Spinners 设置为什么索引以及是否检查 CheckBoxes 的地方。我有 LogCat 调用显示找到的值，它们都是预期的。调用 .setText()、.setSelection() 和 .setChecked() 方法时，不会显示任何错误，但根本没有设置任何项目。一切都保持空白。

这与一个相同点，您不初始化显示的视图，而是更新未附加的`View`层次结构。

> 第三个问题是最让我困惑的。TextViews 现在都有唯一的 ID。当我第一次尝试实现这个 ViewPager 时，我让 updateUI() 方法处理没有 xml* 的 TextViews。findViewById() 调用的前缀。[...]此方法导致 NullPointerException，但仅在使用第三页和第四页上的 TextViews 调用 .setText() 时。前两页没有抛出任何异常

也许这会澄清一些事情：`ViewPager`除了允许左右滑动之外，还设计了（通过适配器）以允许使用尽可能少的视图（`ListView`例如，它只为可见行膨胀行）。为此，它只构建一定数量的页面。默认情况下，此页数为 3（可见的一页 + 每侧一页，因此滑动会顺畅），并且在`ViewPager`您向前或向后滑动时将开始加载其他页面。当您启动`ViewPager`它时，它将加载第一页（可见页）+ 下一页（在右侧），以便用户可以立即滑动。其他两个页面没有加载以提高效率，尝试从它们访问小部件会抛出一个`NullPointerException`因为他们找不到。而且，如果用户可能根本看不到这些页面，您最终不应该做不必要的工作。现在，您可以修改`ViewPager`创建并保留在内存中的页面数（使用`setOffscreenPageLimit()`并提供一个数字），但您应该尽量避免它以提高效率，因为这会一次加载内存中的所有小部件（在您的情况可能不会那么糟糕，但我不知道你想做什么）。

> 我尝试使用 pagerAdapter.getItem(index).getView().findViewById()，但它返回 NullPointerException。得到异常后，我尝试在 Fragment 类中覆盖 getView() 方法。我在方法中放入的只是返回视图；其中视图是 onCreateView 方法中返回的视图的保存实例。这导致我的 ViewPager 显示 4 个空白屏幕可以在它们之间滑动。

您不能使用`geItem()`适配器的方法，因为这不会返回`Fragment`' 当前使用的实例`ViewPager`，它将返回一个刚刚实例化的**新** `Fragment`实例。由于它只是实例化并且没有附加到`Activity`，它的`getView()`方法不会返回视图。

> 如何访问 ViewPager 中使用的视图？

这取决于您何时想要访问它们。如果在您设置适配器时数据可用，`ViewPager`则只需将初始化移动到`Fragments`or`onCreateView`方法`onActivityCreated`中。

如果您想稍后从 访问`Fragment`'s，您可以使用一个`ViewPager`小技巧，知道`ViewPager`添加（现在）`Fragments`在. 例如，要访问第一个：`FragmentManager``android:switcher:theIdOfTheViewPager:thePositionInTheViewPager``Fragment``ViewPager`

```
xmlOneFragment first = (xmlOneFragment)getSupportFragmentManager().findFragmentByTag("android:switcher:" + R.id.pager + ":0");
// if the fragment is found and its view is available do stuff
if (first != null && first.getView() != null) {
     // do stuff   
} 
```

不是最佳解决方案，但它会为您工作，直到您对`ViewPager`.**

# c# - WP7 Application.getResourceStream 每次都返回 null

> ID：14244179
> 
> 赞同：0
> 
> 时间：2013-01-09T18:40:27.837
> 
> 标签：c#, windows-phone-7, windows-phone, xna-4.0

我试图将 .txt 文件加载到 2D 数组中，我可以从独立存储中的临时文件中执行此操作，但我们的关卡构建器写入 .txt 文件并将它们移动到每个文件的独立存储中是不可能的。

这是一个windows手机游戏。

文本文件构建操作设置为内容。

复制到输出设置为不复制。

该文件位于基本内容文件夹中。

```
 var ResrouceStream = Application.GetResourceStream(new Uri("grid_map;component/Data.txt", UriKind.Relative));
        if (ResrouceStream != null)
        {
          //do reading here
        } 
```

我在它之后的 if 语句上有一个断点，当我检查 var 时，它仍然为空，后来它通过一个空错误`using (StreamReader Reader = new StreamReader(ResrouceStream .Stream))`

因为 ResrouceStream 为空。

我尝试了大多数方法或阅读 .txt 文件，但这是最好的方法

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T18:50:49.080

如果要使用 加载文件`Application.GetResourceStream`，则必须将其构建操作设置为`Resource`，而不是`Content`。

# c# - 将参数传递给匿名方法？

> ID：14244181
> 
> 赞同：-2
> 
> 时间：2013-01-09T18:40:38.397
> 
> 标签：c#, .net, anonymous-methods

我有以下方法：

```
while (TryCount < 2)
{
    Lock.Try<object>(inCommandObj.Connection, _timeout, delegate(DataSet ds)
    {
        dataAdapter = new OdbcDataAdapter(inCommandObj);
        returningObj = dataAdapter.Fill(ds);
        done = true;
        return returningObj;
    });

    if (done)
        break;

    inCommandObj.Cancel();
} 
```

您可以看到我试图将一个 DataSet 传递给这个匿名方法，但它不喜欢它？我怎样才能做到这一点？

最好的祝福

编辑 1：现在的异常消息是：Delegate 'System.Func' 不接受 1 个参数

编辑 2：在这种情况下，我需要使用 dataAdapter.Fill 方法填充现有数据集。这必须使用锁（带 timout）来完成，因为会有很多线程运行此方法。如果锁定超时，我需要取消当前已冻结的 MySQL 命令，然后尝试发送新命令（1 次）。

编辑 3：这就是锁类的样子：

```
public static class Lock
    {
        public static T Try<T>(object objLock, int timeout, Func<T> f)
        {
            if (System.Threading.Monitor.TryEnter(objLock, timeout))
            {
                try
                {
                    return f.Invoke();
                }
                finally
                {
                    System.Threading.Monitor.Exit(objLock);
                }
            }
            return default(T);
        }

        public static void Try(object objLock, int timeout, Action f)
        {
            if (System.Threading.Monitor.TryEnter(objLock, timeout))
            {
                try
                {
                    f.Invoke();
                }
                finally
                {
                    System.Threading.Monitor.Exit(objLock);
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:07:09.487

在这一行：

```
public static T Try<T>(object objLock, int timeout, Func<T> f) 
```

`Func<T>`正在寻找一个不带参数并返回 a 的函数`T`。您正在向它发送一个接受 a`DataSet`并返回一个对象的委托。

既然您`DataSet`无论如何都要在您的委托中创建一个新的，只需从委托中删除它`DataSet ds`，您就应该一切就绪。

实际上，您可以将其简化为：

```
Lock.Try<object>(inCommandObj.Connection, _timeout, () =>
{
    var ds = new DataSet();
    dataAdapter = new OdbcDataAdapter(inCommandObj);
    returningObj = dataAdapter.Fill(ds);
    done = true;
    return returningObj;
}); 
```

如果这不符合您的预期，那么您需要重构`Try`以采用不同的`Func`论点，或者考虑完全不同的解决方案。

# dynamics-ax-2009 - 为什么我的 AX SQL 不能正常工作

> ID：14244182
> 
> 赞同：0
> 
> 时间：2013-01-09T18:40:51.047
> 
> 标签：dynamics-ax-2009, x++, axapta

我们合并了数百个有交易的重复客户账户。例如，客户“Alexander Smith”和“Alex Smith”被合并为“Alexander Smith”。在我们的`custTableMergeLog`中，我插入了与旧/新客户帐户合并的记录。

此查询应仅识别具有无效客户的 ledgerJournalTrans 记录，但我们有一条记录表明它已被合并。

当我取消注释这两行时它不起作用......有什么想法吗？

```
while select ledgerJournalTrans
    where ledgerJournalTrans.AccountType    == LedgerJournalACType::Cust
    notexists join custTable
        where custTable.AccountNum          == ledgerJournalTrans.AccountNum
    //exists join custTableMergeLog
    //    where custTableMergeLog.CustAccountOld  == ledgerJournalTrans.AccountNum
{
    select firstonly custTableMergeLog2
        where custTableMergeLog2.CustAccountOld == ledgerJournalTrans.AccountNum;

    info(strfmt("Account# %1, CustTable Name: %2, CustMergeLog %3", ledgerJournalTrans.AccountNum, CustTable::find(ledgerJournalTrans.AccountNum).Name, custTableMergeLog2.CustAccountOld));

    i++;

    if (i>10)
        break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T10:37:05.427

从 X++ 查询到真实 SQL 的转换并不总是按预期工作，我敢打赌，你有其中一个不起作用的例子。

如果您在 custTableMergeLog 中开始查询，然后加入 ledgerJournalTrans，最后加入 custTable，该怎么办？

有点像这样：

```
while select custTableMergeLog
     join ledgerJournalTrans
         where custTableMergeLog.CustAccountOld == ledgerJournalTrans.AccountNum
     notexists join custTable
         where custTable.AccountNum == ledgerJournalTrans.AccountNum 
```

这对你有用吗？

# android - 将自定义视图添加到相对布局

> ID：14244183
> 
> 赞同：0
> 
> 时间：2013-01-09T18:40:53.767
> 
> 标签：android

我正在将图像动态添加到这样的相对布局中：

```
RelativeLayout relUsers= (RelativeLayout) findViewById(R.id.RelativeLayoutUsers);

            lpIm = new RelativeLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT,ViewGroup.LayoutParams.WRAP_CONTENT);
            lpIm.leftMargin = x;
            lpIm.topMargin = y;

            ImageView imageView = new ImageView(this);
            imageView.setImageResource(R.drawable.dot_red);

            relUsers.addView(imageView, lpIm); 
```

但我需要在图像下方有一些文本视图，以便我可以更改。我是否需要创建扩展班轮布局（或相对）的自定义类？如何创建自定义类或视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:43:15.027

您可以创建一个 TextView 实例，然后为其设置属性“layout_below”。记得给 ImageView 设置一个 ID，因为如果你不这样做，layout_below 将无用，它与视图的 ID 一起工作。

```
lpIm.addRule(RelativeLayout.BELOW, R.id.image_view) 
```

您必须为 ImageView 设置相同的 ID，否则将无法正常工作。谢谢评论，复制粘贴

# postgresql - Postgres-必须 to_timestamp() 忽略/不读取日期/时间字符串中间的特定字符

> ID：14244185
> 
> 赞同：2
> 
> 时间：2013-01-09T18:41:07.837
> 
> 标签：postgresql

我有原始文本列，其值如“2012-07-26T10:33:34”和“2012-07-26T10:56:16”。在使用 Joda-Time 的 Java 中，我可以通过调用轻松地将其转换为日期/日期

`new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss")`.

在 Postgres 中，我如何忽略中间的这个“T”字符？

我试过`'YYYY-MM-DD\THH:mm:ss'`但得到错误

*> 错误：找不到从未知到文本的转换函数*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:47:00.240

如果我没记错的话，ANSI ANSI 时间戳文字中允许使用 T，因此以下内容应该有效。

```
select timestamp '2012-07-26T10:33:34'; 
```

你说你有一个文本列，所以你可能需要这样的东西：

```
create table foo (ts text);
insert into foo values ('2012-07-26T10:33:34')
select cast(ts as timestamp)
from foo; 
```

这也有效：

```
select to_timestamp(ts, 'yyyy-mm-dd hh24:mi:ss')
from foo; 
```

SQLFiddle 示例：[http ://sqlfiddle.com/#!12/0b369/1](http://sqlfiddle.com/#!12/0b369/1)

# java - 创建一个jEdit宏，找出有多少实例SearchAndReplace写入缓冲区的正确方法是什么

> ID：14244186
> 
> 赞同：1
> 
> 时间：2013-01-09T18:41:07.803
> 
> 标签：java, macros, jedit

我正在尝试在 jEdit 中创建一个宏。我试图从缓冲区**中每一行的开头删除所有空白。**这是我试图这样做的 jEdit 宏（即 Java）代码：

```
textArea.goToBufferStart(false);
//Set up SearchAndReplace defaults
SearchAndReplace.setBeanShellReplace(false);
SearchAndReplace.setWholeWord(false);
SearchAndReplace.setIgnoreCase(false);
SearchAndReplace.setRegexp(true);
SearchAndReplace.setSearchFileSet(new CurrentBufferSet());

public int replace(String from, String to) {
  //must be reg-ex escaped prior to call
  SearchAndReplace.setSearchString(from);
  SearchAndReplace.setReplaceString(to);
  return SearchAndReplace.replaceAll(view);
}

boolean done = false;
while (!done) {
  int count = replaced("\\n ", "\\n");
  found = (count > 0);
} 
```

jEdit 5.0 附带的文档表明该调用`SearchAndReplace.replaceAll(view)`返回发生替换的缓冲区的数量。但是当我执行它时，我得到一个错误，表明它没有返回一个 int，而是一个布尔值。

虽然如果它确实返回一个 int 会很好，但我希望能够知道在特定缓冲区（我正在执行宏的唯一一个缓冲区）中发生的替换的具体计数。

所以，我一定是在接近这个错误。关于如何实现预期效果的任何建议，从每一行的开头删除所有空格？顺便说一句，宏目前有意忽略第一行。我知道这是一个缺陷，稍后会更正。

谢谢你能给我的任何方向。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T00:05:56.590

如果要从每一行的开头去除空格，只需

*   `search and replace`用`ctrl`+打开`f`
*   `^[ \t]+`在框中输入`Search for`：
*   查看`regular expressions`
*   点击`replace all`

# php - 带字符串长度的范围条件

> ID：14244191
> 
> 赞同：1
> 
> 时间：2013-01-09T18:41:33.783
> 
> 标签：php, strlen

我目前有这个代码：

```
if (strlen(trim($username) < 4)) {
$error='Username should be between 4 and 10 characters.';
}

if (strlen(trim($username) > 10)) {
$error='Username should be between 4 and 10 characters.';
} 
```

我希望将其简化为一个更简单的语句，如下所示（但这显然行不通）：

```
if (strlen(trim($username) < 4 >10))... // parse error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:45:55.657

此语法不正确，您应该使用`||`运算符：

```
if (strlen(trim($username)) < 4 || strlen(trim($username)) > 10) {
    $error='Username should be between 4 and 10 characters.';
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T18:52:58.707

您实际上只是在检查一个数字是否在指定范围内，所以另一个选项是`filter_var()`，虽然有点吓人：

```
if(!filter_var(strlen(trim($username)), FILTER_VALIDATE_INT, array('options' => array('min_range' => 4, 'max_range' => 10))))
{
    $error='Username should be between 4 and 10 characters.';
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T18:50:41.993

在这里，使用[`||`](http://us2.php.net/manual/en/language.operators.logical.php)（或）运算符会有所帮助。

另请注意我如何将用户名分配给变量，以防止多次调用您的`trim()`和函数。`strlen()`那只是浪费。

**代码**

```
$username = trim('bob');
$username_length = strlen($username);
if ($username_length < 4 || $username_length > 10)
{
    echo 'Username should be between 4 and 10 characters.';
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-09T18:45:27.627

那么你可以这样做：

```
(strlen(trim($username)) < 4 || strlen(trim($username)) > 10) && $error='Username should be between 4 and 10 characters.'; 
```

但是首先定义修剪后的用户名长度会更有效：

```
$len = strlen(trim($usename));
($len < 4 || $len > 10) && $error = "Bad username"; 
```

# css - 制作一个 SVG 路径减半圆

> ID：14244194
> 
> 赞同：1
> 
> 时间：2013-01-09T18:41:35.120
> 
> 标签：css, svg, path

我是 SVG 的新手。我想做这个弯曲的笔画： ![中风的图片](../Images/8ace6d0a1874e01a952e7ade80e8846d.png) [这张笔画的图片](http://mikevierwind.nl/dump/afbeelding.jpg)

我怎样才能用 SVG 做到这一点？我已经完成了 SVG。但不要出去。谁能帮我解决这个中风？感谢帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T18:52:26.593

它并不完美，但这样的事情会给你一个好的开始。

```
 <svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='200' height='200'>
                <path fill='none' stroke="black" stroke-width='4' d='M 90,80 A60,60 0 0,1 90,5'/>
</svg> 
```

你可以[在这里](http://jsbin.com/ibivad/1/edit)看到它的实际效果。

调整*60,60*值将使其或多或少是圆形的。90,80和*90,5值是**起点*和终点。其余的应该是自我解释的，但如果您有任何问题，请告诉我。

# python - 使用 wxpython 的带有滑块的颜色条

> ID：14244195
> 
> 赞同：0
> 
> 时间：2013-01-09T18:41:35.587
> 
> 标签：python, slider, wxpython, color-mapping

我还没有看到这样的例子，但我想知道是否有人知道如何使用 wxpython 实现带有可调节滑块的颜色条。基本上，滑块应该改变颜色条的级别，从而调整颜色图。如果有人知道如何做以及可能的一些示例代码，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T14:37:12.067

我认为您正在寻找以下小部件之一：

ColourDialog、ColourSelect、PyColourChooser 或 CubeColourDialog

它们都可以让您以不同的方式选择颜色，并且它们还有一个滑块来帮助调整颜色。

您可以在 wxPython 演示中看到它们中的每一个（可从 wxPython 网页下载）

# java - 在java中拆分两个字母的字符串

> ID：14244197
> 
> 赞同：2
> 
> 时间：2013-01-09T18:41:42.613
> 
> 标签：java, string, split

我只是想将一个字符串分成两个较小的字符串。看起来这很容易，但由于某种原因我无法弄清楚。我试图拆分的一个例子是：

```
AA
BB
DD
FF
TT
EE
SE
GR 
```

这些值当前位于 ArrayList 中，我希望将它们拆分为两个数组列表

```
A                A
B                B
D                D 
```

我试过这个

```
prse = calls.get(t).split(""); //also tried prse = calls.get(t).split("", -1);
            call1.add(prse[0]);
            call2.add(prse[1]); 
```

但它用空字符填充了我的数组列表。（打印 [] [， ] [， ， ] [， ， ， ] [， ， ， ， ]）

所以我尝试了

```
 String split = calls.get(t).substring(0,1); //This is 285 that is puking
    String split2 = calls.get(t).substring(1,2);
                System.out.println(split);
                call1.add(split);
                System.out.println("1: " + call1);
                call2.add(split2);
                System.out.println("2: " + call2); 
```

这在一定程度上起作用，但随后死于可怕的死亡：

```
1: [F, P, T, B, F, D, S, G, G, G, Z, S, Q, E, F, H, L, P, O, L, G, B, V, F, W, Q, T, H, G, E, R, T, Y, C, G, D, C, H, C, A]
2: [o, G, U, U, Y, Y, T, T, T, T, T, R, E, S, G, J, H, C, H, H, H, G, C, J, H, D, G, J, H, D, R, G, V, C, G, V, V, D, V, V]

Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 1
        at java.lang.String.substring(String.java:1946)
        at print.Reader.ffy(Reader.java:285)
        at print2.Print2.main(Print2.java:48) 
```

谁能建议一个更好的方法来做到这一点（或者向我解释我做错了什么）？注意：我想将拆分的字母放入自己的，单独的 ArrayList 字符串中（由于以后使用。）所以我宁愿不使用 charArray。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:49:42.483

你可以这样做：

```
String inData = prse = calls.get(t);
call1.add("" + inData.charAt(0));
call2.add("" + inData.charAt(1)); 
```

这直接抓取第一个和第二个字符并将它们转换为字符串。

如果您想要一个 char 数组列表，则不必转换为字符串，这取决于您要对输出做什么。

StringBuilder 可以 .append 一个字符，并 toString 结果。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:02:22.477

```
 prse = calls.get(t).split("");
        call1.add(prse[0]);
        call2.add(prse[1]); 
```

当你用空白字符串=>“”分割时，你得到的第一个字符串是空白（“”）。例如："AB" prse[0] = "", prse[1]="A" ,prse[2]="B"

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:09:55.003

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 1 
```

^^ 表示传递给 substring 方法的索引 1 超出范围，即您的数组中有一个字符串（可能就在“AV”之后），它只有零个或一个字符。

此外，“substring(int beginIndex, int endIndex)”是一个很好的方法，但为什么不使用“charAt(int index)”呢？

# batch-file - 如何批量删除所有符号？

> ID：14244199
> 
> 赞同：1
> 
> 时间：2013-01-09T18:41:48.680
> 
> 标签：batch-file

所以假设我有这个变量 %s% 并且我必须取出所有符号，因为它们会干扰代码。这些符号包括：

~`!@#$%^&*()_-+={[}]|\:;"'<,>.?/

所以基本上我能想到的每个符号都可以输入，我应该怎么做呢？以下代码是一个巨大的失败

```
SET s=!s:"^~"=""!
SET s=!s:"`"=""!
SET s=!s:"^!"=""!
SET s=!s:"@"=""!
SET s=!s:"#"=""!
SET s=!s:"^$"=""!
SET s=!s:"^%"=""!
SET s=!s:"^^"=""!
SET s=!s:"&"=""!
SET s=!s:"*"=""!
SET s=!s:"("=""!
SET s=!s:")"=""!
SET s=!s:"-"=""!
SET s=!s:"_"=""!
SET s=!s:"+"=""!
SET s=!s:"="=""!
SET s=!s:"{"=""!
SET s=!s:"}"=""!
SET s=!s:"["=""!
SET s=!s:"]"=""!
SET s=!s:"^|"=""!
SET s=!s:"\"=""!
SET s=!s:":"=""!
SET s=!s:";"=""!
SET s=!s:"'"=""!
SET s=!s:'"'=""!
SET s=!s:"<"=""!
SET s=!s:","=""!
SET s=!s:">"=""!
SET s=!s:"."=""!
SET s=!s:"?"=""!
SET s=!s:"/"=""! 
```

我已经在互联网上搜索并没有发现任何想法，有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:52:11.530

第一步可以是这样，它从 badChars 列表中删除所有字符以及感叹号。
但是字符`~*=`不能这样替换。

```
set "str=Hello,;:$%%!&<>x"
setlocal EnableDelayedExpansion

set "badChars=`@#$%%^&()_-+{[}]|\:;'<,>.?/""
for /L %%n in (0,1,30) do (
  for /f "eol=A delims=" %%C in ("!badChars:~%%n,1!") DO (
    if defined str set "str=!str:%%C=!"
  )
)
set "str=%str:!=%"
echo(!str! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T21:22:31.970

我自己没有测试过这段代码，但已经把它作为书签有一段时间了。

请参阅此线程中的[帖子 #7](http://forums.techguy.org/6677926-post7.html) [http://forums.techguy.org/dos-other/823979-solved-removing-special-characters-loop.html](http://forums.techguy.org/dos-other/823979-solved-removing-special-characters-loop.html)

```
:_GetName
SET /P folder=Folder Name:
Set folder="%folder:"=%"
Setlocal EnableDelayedExpansion
For %%I In (^| ^& ^< ^> ^^ + ^( ^) \ / . @ # $ { } [ ] ' : ` ^%% ^") Do Set folder=!folder:%%I=!
:: Now remove any !
SetLocal DisableDelayedExpansion
Set folder="%folder:!=%"
EndLocal&Set folder=%folder:~1,-1%
:_parse
Set _Flag1=
For /F "Tokens=1* Delims=~=*;,?" %%J In ('Echo !folder!') Do (
    Set folder=%%J%%K
    Set _Flag1=%%J
    Set _Flag2=%%K
)
If NOT "%_Flag2%"=="" Goto _parse
If Not Defined _Flag1 Echo None of the characters you entered are valid. Please try again&Goto _GetName
:: Now revert to previous settings. The Set is needed to pass the
:: Folder variable back to the previous environment
EndLocal&Set folder=%folder%
Echo You said your folder name will be %folder%.
@pause 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T23:19:44.353

***编辑***
如果以下所有条件都为真，我的第一次尝试将失败：

*   `:StripSymbols`在启用延迟扩展时调用
*   字符串很长，需要多次迭代
*   第一次迭代后，字符串至少有 2 个`!`剩余，中间有非符号

第一次尝试通常很快，但对于需要多次迭代的病态病例可能会大大减慢。

```
@echo off
setlocal disableDelayedExpansion

set "test1=!Hello`@#$%%^&()_-+{[}]|\:;'<,>.?/"~*= World!"
call :test test1

set "test2="
call :test test2

set "test3=`@#$%%^&()_-+{[}]|\:;'<,>.?/"~*=!"
call :test test3

set "test4=,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,0,1,2,3,4,5,6,7,8,9,"
call :test test4

exit /b

:test StrVar
setlocal enableDelayedExpansion
echo Before: %~1=!%~1!
call :stripSymbols %1
echo  After: %~1=!%~1!
echo(
exit /b

:stripSymbols  StrVar
setlocal enableDelayedExpansion
for /f tokens^=1-25*^ delims^=`@#$%%^^^&()_-+{[}]^|\:^;'^<^,^>.?/~*^=!^" %%A in ("a,!%~1!") do (
  endlocal
  set "%~1=%%B%%C%%D%%E%%F%%G%%H%%I%%J%%K%%L%%M%%N%%O%%P%%Q%%R%%S%%T%%U%%V%%W%%X%%Y%%Z"
  if "%%Z" neq "" goto :stripSymbols
)
exit /b 
```

以下是测试结果。注意 test5 是如何失败的。

```
Before: test1=!Hello`@#$%^&()_-+{[}]|\:;'<,>.?/"~*= World!
 After: test1=Hello World

Before: test2=
 After: test2=

Before: test3=`@#$%^&()_-+{[}]|\:;'<,>.?/"~*=!
 After: test3=

Before: test4=,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,0,1,2,3,4,5,6,7,8,9,
 After: test4=ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789

Before: test5=,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z!0,1,2,3,4,5,6,7,8,9!
 After: test5=ABCDEFGHIJKLMNOPQRSTUVWXYZ 
```

**这是我的防弹第二次尝试**

这第二次尝试应该总是很快，也应该是防弹的

```
@echo off
setlocal disableDelayedExpansion

set "test1=!Hello`@#$%%^&()_-+{[}]|\:;'<,>.?/"~*= World!"
call :test test1

set "test2="
call :test test2

set "test3=`@#$%%^&()_-+{[}]|\:;'<,>.?/"~*=!"
call :test test3

set "test4=,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,0,1,2,3,4,5,6,7,8,9,"
call :test test4

set "test5=,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z!0,1,2,3,4,5,6,7,8,9!"
call :test test5

exit /b

:test StrVar
setlocal enableDelayedExpansion
echo Before: %~1=!%~1!
call :stripSymbols %1
echo  After: %~1=!%~1!
echo(
exit /b

:stripSymbols  StrVar
setlocal enableDelayedExpansion
set "str=!%~1!"
setlocal disableDelayedExpansion
for /l %%N in (1 1 171) do (
  setlocal enableDelayedExpansion
  for /f tokens^=1-25*^ delims^=`@#$%%^^^&(^)_-+{[}]^|\:^;'^<^,^>.?/~*^=!^" %%A in ("a,!str!") do (
    endlocal
    set "str=%%B%%C%%D%%E%%F%%G%%H%%I%%J%%K%%L%%M%%N%%O%%P%%Q%%R%%S%%T%%U%%V%%W%%X%%Y%%Z"
    if "%%Z" equ "" goto :break
  )
)
:break
endlocal & endlocal & set "%~1=%str%"
exit /b 
```

这是修正后的结果

```
Before: test1=!Hello`@#$%^&()_-+{[}]|\:;'<,>.?/"~*= World!
 After: test1=Hello World

Before: test2=
 After: test2=

Before: test3=`@#$%^&()_-+{[}]|\:;'<,>.?/"~*=!
 After: test3=

Before: test4=,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,0,1,2,3,4,5,6,7,8,9,
 After: test4=ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789

Before: test5=,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z!0,1,2,3,4,5,6,7,8,9!
 After: test5=ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 
```

# c# - WCF 响应始终以“GetResult”开头

> ID：14244200
> 
> 赞同：1
> 
> 时间：2013-01-09T18:41:53.230
> 
> 标签：c#, json, wcf, rest

我正在使用 WCF 创建一个 Rest-JSON API。

问题是我的结果总是以`{"GetResult": HERE_MY_RESULT }`（注意“GetResult”）开头

例如：

```
public string GetString()
{
    return "Hello World!";
} 
```

返回`{"GetResult": "Hello World!"}`

这是我用于服务的相关代码：服务：

```
[ServiceContract]
public interface IPlaceService
{
    [OperationContract]
    [WebInvoke(Method = "GET",
                ResponseFormat = WebMessageFormat.Json,
                BodyStyle = WebMessageBodyStyle.Wrapped,
                UriTemplate = "places")]
    PlaceModel Get();
}

public class PlaceService : IPlaceService
{
    public PlaceModel Get()
    {
        return new PlaceModel
        {
            Count = 123,
            Title = "Title",
            Description = "Desc",
        };
    }
} 
```

合同：

```
[DataContract]
public class PlaceModel
{
    [DataMember(Name="count")]
    public int Count { get; set; }

    [DataMember(Name = "title")]
    public string Title { get; set; }

    [DataMember(Name = "description")]
    public string Description { get; set; }
} 
```

结果：

`{"GetResult":{"count":123,"description":"Desc","title":"Title"}}`

有人知道如何`"GetResult"`从我的 JSON 结果中删除它吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:28:30.627

好吧，我在[这篇文章](https://stackoverflow.com/questions/8105912/strange-response-from-wcf-service-how-to-return-json-easily)中找到了解决方案。

只需更改`BodyStyle`to`[OperationContract]`

```
BodyStyle = WebMessageBodyStyle.Bare, 
```

修复它，现在我收到：

`{"count":123,"data":[],"description":"Desc","title":"Title"}`

# python - python中有序集合的交集

> ID：14244202
> 
> 赞同：1
> 
> 时间：2013-01-09T18:41:57.383
> 
> 标签：python, python-3.x

我是 python 新手，这就是为什么我在努力解决我认为的非常基本的问题。我有两个清单：

```
a = [0, 1, 2, 3, 4, 5, 6, 7]
b = [1, 2, 5, 6] 
```

在输出中，我需要获取它们之间的所有交集：

```
c = [[1, 2], [5, 6]] 
```

它的算法是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-09T18:46:42.937

您可以为此目的使用[difflib.SequenceMatcher](http://docs.python.org/2/library/difflib.html#difflib.SequenceMatcher)

```
#Returns a set of matches from the given list. Its a tuple, containing
#the match location of both the Sequence followed by the size
matches = SequenceMatcher(None, a , b).get_matching_blocks()[:-1]
#Now its straight forward, just extract the info and represent in the manner
#that suits you
[a[e.a: e.a + e.size] for e in matches]
[[1, 2], [5, 6]] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:43:45.963

您可以使用在 python 中支持交叉点的[集合](http://docs.python.org/2/library/sets.html#set-objects)

`s.intersection(t) s & t new set with elements common to s and t`

```
a = {0, 1, 2, 3, 4, 5, 6, 7}
b = {1, 2, 5, 6}
a.intersection(b)
set([1, 2, 5, 6]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T18:44:38.190

使用集：

```
In [1]: a = [0, 1, 2, 3, 4, 5, 6, 7]

In [2]: b = [1, 2, 5, 6]

In [4]: set(a) & set(b)

Out[4]: set([1, 2, 5, 6]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T18:47:11.347

您也可以为此使用 lambda 表达式：

```
>>> a = [0, 1, 2, 3, 4, 5, 6, 7]
>>> b = [1, 2, 5, 6]
>>> intersect = filter(lambda x: x in a, b)
>>> intersect
[[1, 2, 5, 6]] 
```

# svn - 尝试提交时出错

> ID：14244212
> 
> 赞同：0
> 
> 时间：2013-01-09T18:42:28.673
> 
> 标签：svn, tortoisesvn

我在一个项目中工作，我们正在使用 TortoiseSVN 作为控制版本。我们是一个小团队（五人），当我使用“显示日志”或尝试提交时，我遇到了一种奇怪的行为。

**这个问题只发生在我的电脑上**，“**显示日志**”功能没有显示最近的提交。我检查了日期范围并且错误，但我无法将其更改为最近的日期。

另外，当我尝试提交某些内容时，会出现此错误：

```
Commit failed (details follow):
Commit blocked by pre-commit hook (exit code 255) with output:
open_root:
SVN::Delta::Editor=HASH(0x3710a48),17882,_p_apr_pool_t=SCALAR(0x3c13c40)
open_directory:
SVN::Delta::Editor=HASH(0x3710a48),Android,_p_void=SCALAR(0x3c52af8),17882,_p_apr_pool_t=SCALAR(0x3c13c58)

open_directory:
SVN::Delta::Editor=HASH(0x3710a48),Android/trunk,_p_void=SCALAR(0x3c52bd0),17882,_p_apr_pool_t=SCALAR(0x3c13c58)

open_file:
SVN::Delta::Editor=HASH(0x3710a48),Android/trunk/ReadMe.txt,_p_void=SCALAR(0x3c52ba0),17882,_p_apr_pool_t=SCALAR(0x3c13c58)

No user associated with filesystem: Cannot verify lock on path
'/Project/trunk/master/gfx/Spr.spt'; no
username available at /usr/share/perl5/SVK/Editor/ByPass.pm line 87
DESTROY: SVN::Delta::Editor=HASH(0x3710a48) 
```

我试过这个没有成功：

*   重新安装 TortoiseSVN
*   安装最新的 TortoiseSVN
*   重新下载分支

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:18:23.347

这是你的问题：

> ***提交被 pre-commit 钩子（退出代码 255）阻止，输出：***

在您的公司中负责设置 Subversion 的人员创建了一个预提交挂钩，该挂钩在 Subversion 允许您的提交通过之前执行。如果该预提交挂钩以`0`错误代码退出，则您的提交将通过。否则，它不会。

此退出代码 (255) 通常与一个失控的坏预提交挂钩相关联。你个人无能为力。而是联系 Subversion 管理员并向他们显示此输出。他们需要修复他们的预提交钩子，或者完全删除它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-21T17:54:23.797

我今天遇到了同样的错误。

> 提交被 pre-commit 钩子（退出代码 255）阻止，输出：

发现我的问题是由于我输入的评论。从评论中删除括号和引号清除了错误。

# asp.net - MDF 无法从 Visual Studio 连接

> ID：14244216
> 
> 赞同：0
> 
> 时间：2013-01-09T18:42:41.270
> 
> 标签：asp.net, .net, sql, visual-studio-2010

我收到此错误，我安装了 SQL Server 2012 有人知道出了什么问题吗？我正在尝试将数据库文件附加到我的 Visual Studio 2010 中。

> *无法打开数据库“X”，因为它是版本 661。此服务器支持版本 655 和更早版本。不支持降级路径。*
> 
> *无法打开新数据库“X”。CREATE DATABASE 已中止。*
> 
> *尝试为文件 X 附加自动命名的数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:05:30.387

数据库文件是在比您拥有的版本更新的 SQL Server 实例上创建和/或附加的。如果您将本地实例更新到较新的版本，那么您应该没问题。

更具体地说 - 版本 661 是 SQL Server 2008 R2。您要附加 (651) 的实例是 SQL Server 2008 RTM 或 SP1。确保它使用的是 SQL Server 2012 实例，而不是本地 SQL Express 实例。

见这里： [http ://www.sqlskills.com/blogs/paul/sql-server-2008-r2-bumps-the-database-version/](http://www.sqlskills.com/blogs/paul/sql-server-2008-r2-bumps-the-database-version/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T21:48:38.267

原来问题出在速成版上。我无法使用完整版，因为我绑定的 mdf 文件需要`user instance`只有 Express Editions 支持。[我从这个https://www.microsoft.com/betaexperience/pd/SQLEXPWT/enus/default.aspx](https://www.microsoft.com/betaexperience/pd/SQLEXPWT/enus/default.aspx)下载了 SQL 2012 Express，它允许`LocalDB`并且所有问题都消失了。

# php - 使用表单助手显示标签名称而不是 ID

> ID：14244220
> 
> 赞同：0
> 
> 时间：2013-01-09T18:43:11.827
> 
> 标签：php, cakephp, tags, posts, has-and-belongs-to-many

在我的一种形式中，我有一个帖子标签的文本输入。目前，Cake 正在将标签 id 返回到此字段中，而不是标签的名称。我想更改它以显示标签的名称。

帖子控制器得到如下结果：

```
array(
    'Post' => array(
        'id' => '7',
        'title' => 'Testing again',
        'body' => 'wooooooo',
        'created' => '2013-01-09 19:20:53',
        'slug' => 'testing-again'
    ),
    'Tag' => array(
        (int) 0 => array(
            'id' => '4',
            'name' => 'tag1'
        ),
        (int) 1 => array(
            'id' => '3',
            'name' => 'tag2'
        ),
        (int) 2 => array(
            'id' => '5',
            'name' => 'tag3'
        )
    )
) 
```

表格的布局如下：

```
<?php echo $this->Form->create('Post'); ?>
<?php echo $this->Form->input('Post.title'); ?>
<?php echo $this->Form->input('Post.body'); ?>
<?php echo $this->Form->input('Tag.Tag', array('type' => 'text', 'label' => 'Tags (seperated by space)')); ?>
<?php echo $this->Form->input('Post.slug'); ?>
<?php echo $this->Form->end('Save Changes'); ?> 
```

有没有办法告诉 CakePHP 输出`name`标签的字段而不是`id`? 谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:31:25.570

好的，所以根据我从我们的评论讨论中收集到的内容，这就是您要寻找的内容。在您的控制器中，只需遍历帖子的所有设置标签。假设您的查找结果设置在`$post`变量中，您可以使用以下代码并将它们全部保存在“普通”非递归数组中：

```
$tags = array(); // This will hold all the tags
foreach($post['Tag'] as $tag) {
    $tags[] = $tag['name'];
}

// Set the tags as view variable
$this->set(compact('tags')); 
```

然后在您的视图中，您可以只`implode`使用带有空格的数组并将其设置为文本字段的值：

```
echo $this->Form->input('Tag.Tag', array('type' => 'text', 'label' => 'Tags (seperated by space)', 'value' => implode(' ', $tags))); 
```

然后，您的 OP 中的 find 示例将返回`tag1 tag2 tag3`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-12T14:08:32.980

您是否在标签模型中设置了 $displayField ？

例如。

```
public $displayField = "name"; 
```

# javascript - JavaScript 策略/最佳实践

> ID：14244223
> 
> 赞同：0
> 
> 时间：2013-01-09T18:43:15.900
> 
> 标签：javascript, jquery

我正在编写一些更复杂的 javascript 应用程序，并且遇到了我自己知识的局限性——请原谅任何命名错误或明显的菜鸟，我不是 js 专业人士！

我有大约 4 或 5 个脚本放在他们自己的文件中，只是为了让事情更容易维护。因此，也许有一个脚本处理构建页面元素（如复杂表单），另一个只处理数据，创建通用 ajax 请求对象，为返回的数据定义解析器和错误函数，另一个纯粹面向显示。

我在页面中设置了全局变量，然后由在运行时加载的各种脚本填充。例如，我`var myapp = { };`在主 HTML 页面中定义，然后在脚本中各种函数填充这个“命名空间”，如：

```
myapp.myfunction = function(){
    // do stuff
} 
```

问题是，尽管所有脚本都包含一个`$(document).ready(function()`包含所有函数定义的块，但当从一个引用另一个脚本的脚本调用函数时（也就是说，如果我的`data.js`文件调用文件`myapp.myDisplayFunction`中的函数，`display.js`我有时会得到一个`Object has no method 'myDisplayFunction'`

除了将所有功能都塞进一个庞大的脚本之外，您如何处理这个问题？有没有我错过的最佳实践？或者这只是指定调用脚本的不同顺序的问题？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:59:35.253

Just check for the function before using:

```
if(typeof(myapp.myDisplayFunction) !== undefined) {
    // do your stuff
} else {
    // wait for a while
} 
```

And check whether you have `async` attribute set while loading the `.js` files.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:55:08.223

当您不确定要调用的方法是否存在（已加载）时，您可以进行检查：

```
if (myapp) //my app namespace is defined
{
    if (myapp.myFunction) //myFunction is defined
    {
        myapp.myFunction();
    }
    else
        alert('You have to load myFile.js first!');    
} 
```

# three.js - Three.js + Blender: grouping objects to be loaded by SceneLoader

> ID：14244224
> 
> 赞同：1
> 
> 时间：2013-01-09T18:43:16.667
> 
> 标签：three.js

Is there a way to somehow group objects in Blender that works with SceneLoader?

I am using Blender to draw a scene with relatively large number of objects. Then I'm using SceneLoader to load that scene and dynamically pick out objects by name and dynamically re-position them. So far so good.

Now, I want to group some objects in Blender so that I can later find those objects by "group name". There are different ways of doing this in Blender, but I'm having hard time finding a way that works with SceneLoader.

I tried assigning objects into a group. Looking at the exported JSON file I see "groups" object property being exported, but SceneLoader completely ignores that property when it parses the JSON.

Going through the SceneLoader source code I noticed that it supports parent-child object relationship, so in Blender I tried [moving all objects that I want to group under a single parent](http://wiki.blender.org/index.php/Doc:2.6/Manual/Modeling/Objects/Groups_and_Parenting) but it looks like three.js exporter doesn't export parent-child relationships, but instead exports objects as a flat list.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T19:37:09.880

Support for groups was [submitted into dev](https://github.com/mrdoob/three.js/commit/7c4624e0d11b8a92aa128613ddae3dc051c5dedc).

# html - 3d立方体旋转jquery mobile

> ID：14244226
> 
> 赞同：0
> 
> 时间：2013-01-09T18:43:21.887
> 
> 标签：html, jquery-ui, css, jquery-mobile, jquery-animate

[http://www.melonhtml5.com/#gallery.js](http://www.melonhtml5.com/#gallery.js)

我计划为我当前的桌面和移动版本项目实施这个网站是否可以使用 jquery mobile 为 iphone 和 ipad 设备使用 jquery mobile 实现相同的 3d 动画

从实际站点提供代码

```
@media screen and (min-height: 450px) and (max-height: 720px) {
    #widget_scroll_container {
        width: 1660px;
    }
    div.widget_container {
        margin-right: 50px;
        width: 900px;
    }
    div.widget_container.half {
        width: 300px;
    }
    div.widget1x1 {
        width: 65px;
        height: 65px;
    }
    div.widget2x2 {
        width: 140px;
        height: 140px;
    }
    div.widget4x2 {
        width: 290px;
        height: 140px;
    }
    div.widget1x1:hover {
        width: 59px;
        height: 59px;
    }
    div.widget2x2:hover {
        width: 134px;
        height: 134px;
    }
    div.widget4x2:hover {
        width: 284px;
        height: 134px;
    }
} 
```

# java - 数组的频率分布

> ID：14244234
> 
> 赞同：0
> 
> 时间：2013-01-09T18:43:40.360
> 
> 标签：java

嗨，我正在尝试获取文本字体大小和颜色的数组的频率，当我有字符串并且我计算频率时，我想根据它们的总体值更改单词和颜色的大小，我有试图划分`frequency/average *10` 但给我null，但在我的计算器上它给了我即80/100 * 10 = 8，这将采用8的索引并具有180字体大小

谁能帮我这个？

```
private static int[] fontWeight = { 40, 60, 80, 100, 120, 140, 160,180 };
private static Color[] Colors = { Color.blue, Color.cyan, Color.yellow, Color.green, Color.red,
        Color.orange, Color.pink,Color.pink  }; 
```

//主要的

```
 for (String str: wordList) {

            int wordFreq = randWord.getFrequency();//assume 80 comes here
            int fontSize = getFontSize(wordFreq);
            Font font = new Font(Font.SANS_SERIF, Font.ITALIC, fontWeight [fontSize ]);
            graphics.setFont(font);
            graphics.setColor(Colors[fontSize]);
            FontMetrics fm = graphics.getFontMetrics();

            graphics.drawString(randWord.getWord() + "", x, y);
            } 
```

//方法

```
 private static int getFontSize(int freq) {

    int newFont = (int) (freq/100)*10;

    if (newFont >= 5) newFont = 6;
    // if(newFont<2)
    // newFont = 1;
    System.out.println("freq " + freq + " font index" + newFont + "  font size "
            + fontWeight[newFont]);

    return newFont;
} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:47:17.473

整数除法的行为不同，如果分子小于分母，则结果为 0。例如 80/100 返回 0。您要做的是将分子乘以该 10，然后除以它。

```
int newFont = (int) (freq/100)*10; 
```

应该改为

```
int newFont = (int) (freq*10 / 100); 
```

# c# - 投射或复制 IEnumerable 的最佳性能解决方案是什么 到 C# 中的 int[]？

> ID：14244236
> 
> 赞同：0
> 
> 时间：2013-01-09T18:43:53.840
> 
> 标签：c#, generics, enums

将枚举从 int 继承的枚举列表转换或复制到整数数组的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T18:46:16.217

由于您没有指定您使用的语言，我猜您使用的是 C#。我还假设您在谈论枚举而不是枚举：

```
var array = enums.Select(e => (int)e).ToArray(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T19:03:14.593

通常不可能将 an “转换”`List<anything>`为数组。可以生成一个新数组，其内容使用基于列表内容的值进行初始化。这与例如将 a 转换`List<T>`为 a不同`ReadOnlyCollection<T>`，后者会产生原始数据的只读“实时”视图。这种区别很重要，因为在后一种情况下，结果数组将保持“附加”到提供初始化数据的对象，而在前一种情况下，它将被分离。

可以使用该方法将数据从枚举类型的数组复制到底层整数类型的数组`Array.Copy`。您最好的选择可能是使用`ToArray`将 转换`List<someEnum>`为 a `someEnum[]`，然后使用`Array.Copy`将数据从其中复制到`int[]`( 或`long[]`，或任何合适的类型)。虽然这需要复制数组两次，但通常批量复制数组元素所需的时间将远少于单独处理元素的时间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-30T06:36:40.293

最好的方法是自己运行一个`for`循环。

```
static int[] Array(List<MyEnum> list)
{
    var array = new int[list.Count];
    for (int i = 0; i < array.Length; i++)
        array[i] = (int)list[i];

    return array;
} 
```

* * *

您可以`Cast<T>`使用`System.Linq`. 它会导致拳击并且不会是最高效的。

```
var array = list.Cast<int>().ToArray(); 
```

* * *

Justin's 是考虑到可读性/速度权衡的最佳解决方案。

# postgresql - 按周向 date_trunc 添加月份约束

> ID：14244237
> 
> 赞同：2
> 
> 时间：2013-01-09T18:43:58.483
> 
> 标签：postgresql, time

我试图将某个月份的几个日期截断到一周的开始，除了上个月开始的日期。

**例子：**

2012 年 12 月 5 日星期三**应**截断为 2012 年 12 月 3 日星期一

2012 年 12 月 1 日星期六**不应**截断至 2012 年 11 月 26 日星期一

为了截断我正在使用的日期：

```
date_trunc('week', dates.d) 
```

问题是**2012 年 12 月 1 日星期六**仍然被截断为**2012 年 11 月 26 日星期一**

我可以为其添加一个约束，以便将月份考虑在内吗？

提前致谢 ：）

注意：我使用的是 9.2 版

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:24:21.910

```
GREATEST(date_trunc('week', dates.d), date_trunc('month', dates.d)) 
```

# visual-studio-2012 - VS 2012 Intellisense 因外部 DLL 而损坏

> ID：14244240
> 
> 赞同：0
> 
> 时间：2013-01-09T18:44:07.617
> 
> 标签：visual-studio-2012, intellisense, sitecore

我有一个引用 Sitecore DLL 的 Visual Studio 2012 项目。（Sitecore 是供应商。）

几个星期以来，Intellisense 运行良好。昨天，在安装 Patch Tuesday 更新并重新启动后，Intellisense 不再适用于 Sitecore DLL 中的内容。不知道有没有来信。

Intellisense 仍然适用于 .NET Framework 的东西。例如，如果我输入**字符串。**在一个方法中，我得到了 Intellisense。

该项目具有对在解决方案资源管理器中的引用下定义的 Sitecore 命名空间的**引用**。具体来说，引用是**Sitecore.Kernel**，它来自**Sitecore.Kernel.dll**。

如果我右键单击**References**下的**Sitecore.Kernel**并选择**View in Object Browser**，我可以很好地浏览 DLL。此外，我的项目构建良好；该项目有一些引用 Sitecore.* 命名空间部分的**using**语句，并且它使用这些命名空间中的对象。

 ******如果我键入`using Site`并按 Ctrl-空格键，我应该会看到 Intellisense 建议**{} Sitecore**，但它显示的只是：

![输入“使用站点”后的智能感知，显示与 Sitecore 内容不匹配](../Images/e433abab0fb224c5b3f0c2bd62456a17.png)

如果我尝试在 Sitecore 命名空间中的任何对象上使用 Intellisense，我不会收到 Intellisense 建议。

其他领域的建议不起作用。例如：

*   **编辑 > IntelliSense > 刷新本地缓存**：没有**刷新本地缓存**选项。是的，我确实打开了一个 CS 文件，然后正在编辑它。
*   **删除 %AppData%\Roaming\Microsoft\VisualStudio\11.0\ReflectedSchemas**：那里没有**ReflectedSchemas**文件夹。
*   **工具 > 导入和导出设置 > 重置所有设置**：没有为外部内容带回 Intellisense。
*   **在 Visual Studio 命令提示符中，运行 devenv /resetuserdata**：似乎已经完成了与先前技术类似的操作。对 Intellisense 没有影响。
*   **检查工具 > 选项 > 文本编辑器 > C#**：检查**自动列表成员**和**参数信息**。我认为无论如何这些都会被前两个步骤重置。
*   **通过VS 2012安装程序（控制面板>卸载程序），修复整个VS安装。**没有效果。
*   **在 References 下删除并重新添加 Sitecore.Kernel。**没有效果。

这就是*真正*奇怪的地方：如果我从另一个工作站远程打开这个项目——它也安装了昨天的补丁星期二的东西并重新启动——Intellisense 工作正常！我指的是使用**\computername\c$...**。

我不确定还能尝试什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:14:13.863

由于我不明白的原因，我能够通过创建一个新项目并将其设置与旧项目非常相似来恢复 Intellisense。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-01T15:01:22.337

您的 Web 项目还需要在项目目录的 App_Config 文件夹中包含一些 Sitecore 配置文件。（不一定包含在项目中）。

我在这里写过博客：-

[http://www.seanholmesby.com/fixing-visual-studio-intellisense-in-sitecore-mvc-views/](http://www.seanholmesby.com/fixing-visual-studio-intellisense-in-sitecore-mvc-views/)******

# jquery - 多个复选框的自定义 DataAnnotation

> ID：14244241
> 
> 赞同：3
> 
> 时间：2013-01-09T18:44:11.580
> 
> 标签：jquery, asp.net-mvc-3, checkbox, asp.net-mvc-4, data-annotations

好的，所以我有这些产品复选框，我想确保至少选择了一个产品。

为此，我的 ViewModel 包含：

```
[DisplayName(@"Product Line")]
[MinChecked(1)]
public List<CheckboxInfo> ActiveProducts { get; set; } 
```

视图仅包含：

```
@Html.EditorFor(x => x.ActiveProducts) 
```

该 EditorTemplate 包含：

```
@model Rad.Models.CheckboxInfo

@Html.HiddenFor(x => x.Value)
@Html.HiddenFor(x => x.Name)
@Html.CheckBoxFor(x => x.Selected)
@Html.LabelFor(x => x.Selected, Model.Name) 
```

自定义数据注解为：

```
[AttributeUsage(AttributeTargets.Property, AllowMultiple = true)]
public class MinCheckedAttribute : ValidationAttribute, IClientValidatable
{
    public int MinValue { get; set; }

    public MinCheckedAttribute(int minValue)
    {
        MinValue = minValue;
        ErrorMessage = "At least " + MinValue + " {0} needs to be checked.";
    }

    public override string FormatErrorMessage(string propName)
    {
        return string.Format(ErrorMessage, propName);
    }

    protected override ValidationResult IsValid(object value, ValidationContext validationContext)
    {
        try
        {
            List<CheckboxInfo> valueList = (List<CheckboxInfo>)value;
            foreach (var valueItem in valueList)
            {
                if (valueItem.Selected)
                {
                    return ValidationResult.Success;
                }
            }
            return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
        }
        catch (Exception x)
        {
            return new ValidationResult(FormatErrorMessage(validationContext.DisplayName));
        }
    }

    public IEnumerable<ModelClientValidationRule> GetClientValidationRules(ModelMetadata metadata, ControllerContext context)
    {
        var rule = new ModelClientValidationRule
        {
            ErrorMessage = FormatErrorMessage(metadata.GetDisplayName()),
            ValidationType = "minchecked",
        };

        rule.ValidationParameters["minvalue"] = MinValue;

        yield return rule;
    } 
} 
```

jQuery部分是：

```
$.validator.addMethod('minchecked', function (value, element, params) {
    var minValue = params['minvalue'];
    alert(minValue);
    $(element).each(function () {
        if ($(this).is(':checked')) {
            return true;
        }
    });
    return false;
});
$.validator.unobtrusive.adapters.add('minchecked', ['minvalue'], function (options) {
    options.messages['minchecked'] = options.message;
    options.rules['minchecked'] = options.params;
}); 
```

因此，验证工作在服务器端。

但是，我如何让不显眼的验证工作？出于某种原因，

`GetClientValidationRules`没有将 HTML5 附加到复选框。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T18:50:23.277

我有一个与上面非常相似的实现，这个客户端 jquery 代码确实适用于作为模型一部分的一组复选框（附加到 HTML5）。它将从数据注释中传输 ErrorMessage。

```
 [Display(Name = "Location1")]
    [CheckAtLeastOne(ErrorMessage = "Must check at least one Location")]
    public DateTime Location1 { get; set; }

    [Display(Name = "Location2")]
    public DateTime Location2 { get; set; }

    [Display(Name = "Location3")]
    public DateTime Location3 { get; set; }

    [Display(Name = "Location4")]
    public DateTime Location4 { get; set; }

    $(function () {
    $.validator.addMethod("checkatleastone", function (value, element) {
        var tag = $("#editform-locations").find(":checkbox");
        return tag.filter(':checked').length;
    });
});
$.validator.unobtrusive.adapters.addBool("checkatleastone"); 
```

但是，就我而言，我还有另一个不属于模型的复选框集合。它是一个单独的表，因此它填充在用于生成复选框列表的 Viewbag 中。服务器端将不起作用，但客户端验证通过使用此 jquery 并将匹配的类名添加到复选框的 html 中起作用。

```
 $(function () {
    $.validator.addMethod("CheckOneCategory", function (value, element) {
        var tag = $("#editform-categories").find(":checkbox");
        return tag.filter(':checked').length;
    }, "Select at least one Product/Service Category");
    $.validator.addClassRules("require-one-category", { CheckOneCategory: true });
}); 
```

# ios - MPMusicPlayerController 不工作

> ID：14244243
> 
> 赞同：1
> 
> 时间：2013-01-09T18:44:17.460
> 
> 标签：ios, objective-c

我正在尝试从我的应用程序中开始播放音乐。我有 iOs 6，但我需要它在 5.1 中运行，因为我需要支持升级到该版本的 iPad 1。

我导入了 CoreMedia 和 MediaPlayer 框架，并通过 MPMusicPlayerController 播放。我能够获得歌曲列表，但播放不起作用。我正在真实设备中进行测试，而不是模拟器。

有什么想法是错的吗？

```
__strong NSArray * _myMusic;
__strong MPMusicPlayerController * _player;
// Specify a media query
MPMediaQuery *query = [MPMediaQuery songsQuery];
// Obtain the media item collections from the query
_myMusic = [query collections];
_player = [MPMusicPlayerController applicationMusicPlayer]; //also tried iPodMusicPlayer
MPMediaItemCollection *currentQueue = [[MPMediaItemCollection alloc] initWithItems:_myMusic];
[_player setQueueWithItemCollection:currentQueue];
[_player setShuffleMode: MPMusicShuffleModeOff];
[_player setRepeatMode: MPMusicRepeatModeNone];
[_player setVolume:1];
[_player play]; 
```

# performance - Scala Futures 很慢，有很多内核

> ID：14244248
> 
> 赞同：11
> 
> 时间：2013-01-09T18:44:34.287
> 
> 标签：performance, scala, future

对于一个研究项目，我编写了一个 Scala 应用程序，它使用一堆期货来进行并行计算。我注意到在我的本地机器（4 核）上，代码运行速度比在我们计算机科学研究所的多核服务器（64 核）上运行得更快。现在我想知道为什么会这样。

## 任务详解

任务是创建随机布尔 k-CNF 公式，其中 n 个不同变量随机分布在 m 个子句中，然后查看在哪个 m/n 组合下，对于不同的随机分布，公式可解的概率下降到 50% 以下。为此，我实现了一个概率 k-SAT 算法、一个子句生成器和一些其他代码。核心是一个函数，它接受 n 和 m es 以及生成器函数，运行 100 个期货并等待结果。该函数如下所示：

## 有问题的代码

```
def avgNonvalidClauses(n: Int, m: Int)(implicit clauseGenerator: ClauseGenerator) = {

    val startTime = System.nanoTime

    /** how man iteration to build the average **/
    val TRIES = 100

    // do TRIES iterations in parallel 
    val tasks = for (i <- 0 until TRIES) yield future[Option[Config]] {
        val clause = clauseGenerator(m, n)
        val solution = CNFSolver.probKSat(clause)
        solution
    }

    /* wait for all threads to finish and collect the results. we will only wait
     * at most TRIES * 100ms (note: flatten filters out all
     * None's) */
    val results = awaitAll(100 * TRIES, tasks: _*).asInstanceOf[List[Option[Option[Config]]]].flatten

    val millis = Duration(System.nanoTime - startTime, NANOSECONDS).toMillis
    val avg = (results count (_.isDefined)) /  results.length.toFloat

    println(s"n=$n, m=$m => $avg ($millis ms)")

    avg
  } 
```

## 问题

在我的本地机器上，我得到了这些结果

```
[info] Running Main 
n=20, m=120 => 0.0 (8885 ms)
n=21, m=121 => 0.0 (9115 ms)
n=22, m=122 => 0.0 (8724 ms)
n=23, m=123 => 0.0 (8433 ms)
n=24, m=124 => 0.0 (8544 ms)
n=25, m=125 => 0.0 (8858 ms)
[success] Total time: 53 s, completed Jan 9, 2013 8:21:30 PM 
```

在 64 核服务器上，我得到：

```
[info] Running Main 
n=20, m=120 => 0.0 (43200 ms)
n=21, m=121 => 0.0 (38826 ms)
n=22, m=122 => 0.0 (38728 ms)
n=23, m=123 => 0.0 (32737 ms)
n=24, m=124 => 0.0 (41196 ms)
n=25, m=125 => 0.0 (42323 ms)
[success] Total time: 245 s, completed 09.01.2013 20:28:22 
```

但是，我在两台机器上都满载（服务器平均负载在 60 到 65 左右），因此*运行*了足够多的线程。为什么是这样？我做错了什么吗？

我的本地机器有一个“AMD Phenom(tm) II X4 955 Processor”CPU，服务器使用的是“AMD Opteron(TM) Processor 6272”。本地 CPU 有 6800 bogomips，服务器有 4200。因此，虽然本地 CPU 快 1/3，但服务器上的 cors 是 12 倍。

### 额外的

如果将我的代码的精简示例推送到 github，如果您有兴趣可以自己尝试：[https](https://github.com/Blattlaus/algodemo) ://github.com/Blattlaus/algodemo （这是一个使用 Scala 2.10 的 sbt 项目）。

### 更新

1.  我通过用 42 播种随机数生成器来消除任何随机性。这没有任何改变
2.  我已经更改了测试集。现在结果更加惊人（服务器慢了 5 倍！） 注意：由于输入，所有不可解决子句的平均百分比的输出都是零。这是正常的，也是意料之中的。
3.  添加了有关 CPU 的信息
4.  我注意到对 Random.nextInt() 的调用在服务器上慢了 10 倍。我已经将所有调用包装在一个帮助程序中，该帮助程序测量打印到控制台的运行时间（如果它们慢于 10 毫秒）。在我的本地机器上，我得到了一些，通常在 10-20 毫秒左右。在服务器上，我接到了很多电话，它们往往超过 100 毫秒。会不会是这个问题？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-05-19T13:58:33.140

您已经找到了答案，因为问题是使用 AtomicLong() 的 Random.nextInt()。如果从不同的线程频繁访问它，那么您将遇到缓存抖动，这在您的 64 核计算机上会更糟，因为缓存将更远（电气上），因此获得必要的缓存行锁定需要更长的时间。

有关更多详细信息，请参阅此 stackoverflow 答案，以及如何避免此问题的解决方案（基本上是使用线程本地随机数生成器）：[Contention in concurrent use of java.util.Random](https://stackoverflow.com/questions/22313552/contention-in-concurrent-use-of-java-util-random "并发使用 java.util.Random 的争用")

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:09:27.077

Operations on denormalized floating numbers, could take an order of magnitude longer on x86 architecture. See:

[Why does changing 0.1f to 0 slow down performance by 10x?](https://stackoverflow.com/questions/9314534/why-does-changing-0-1f-to-0-slow-down-performance-by-10x)

Haven't examined your code, but given that you return `NaN` that might be the case. Try removing randomness from your test to verify that hypothesis.

# visual-studio-2010 - 调试时如何查看转换后的 web.config (SlowCheetah)

> ID：14244251
> 
> 赞同：2
> 
> 时间：2013-01-09T18:44:38.147
> 
> 标签：visual-studio-2010, web-config, visual-studio-debugging, web-config-transform, slowcheetah

我已经安装了`SlowCheetah plugin in VS 2010`. 我可以*预览变换*，`web.debug.config`它看起来是正确的。但是我认为调试时不会发生转换。

`web.config`调试时如何查看转换后的内容？

抱歉，如果这已经被问过，但我找不到专门查看文件的说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T07:43:29.253

目前，Web.config 转换仅在 Publish 上的 Web Publish Pipeline (WPP) 期间应用，而不是在调试期间应用，以便在调试期间启用它们，请检查以下链接：[http ://sedodream.com/2010/10/21/ ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx](http://sedodream.com/2010/10/21/ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-27T00:03:05.807

SlowCheetah 还不支持它，但它在积压[http://slowcheetah.uservoice.com/forums/185106-general/suggestions/3385389-support-for-transforming-web-config-on-f5](http://slowcheetah.uservoice.com/forums/185106-general/suggestions/3385389-support-for-transforming-web-config-on-f5)上。它是我将要开发的下一个功能。

# python - 如何启动 python shell 并使用一些命令自动初始化它？

> ID：14244253
> 
> 赞同：6
> 
> 时间：2013-01-09T18:44:44.060
> 
> 标签：python

我发现当我启动 python shell 时，我总是输入一堆命令来进入我想要的状态。不断重复输入这些命令很烦人，所以我将它们捆绑到一个脚本中。现在我只需输入：

```
execfile('script.py') 
```

一旦我进入 shell，它就会通过所有步骤让我进入我需要的状态。

现在我想更进一步。每次我启动 shell 时，如何让 python shell 自动运行`script.py`，这样我就不必继续重新输入那一行了？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-09T18:49:40.723

这是一种不必弄乱环境变量的方法：

例如，如果我有一个脚本，其中包含以下内容`script.py`：

```
#!/usr/bin/env python
print("example") 
```

`python`在将我带到带有`-i`标志的解释器之前，我可以告诉运行它。

```
$ python -i script.py
example
>>> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-09T18:47:30.847

我认为您正在寻找[PYTHONSTARTUP](http://docs.python.org/2/using/cmdline.html#envvar-PYTHONSTARTUP)环境变量

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T18:49:17.037

如果可能的话，我建议你使用[IPython](http://ipython.org/)。它提供了强大的功能，而 autoexec 只是其中之一。但当然，@mgilston 提到了正确的答案

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T18:54:01.733

创建一个名为 的文件`usercustomize.py`，并将其放在您的`USER_SITE`目录中（您可以在该目录中找到`import site; site._script()`。每次启动解释器时都会执行此文件。

有一个类似的文件被称为任何*人*启动 Python 时`sitecustomize.py`都会执行。

 ** * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-18T16:34:34.423

这是一个 Windows 解决方案，但我确信可以完成一个 Unix 等价物。我创建了一个文件`\MyPythonCode\autoexec.py`（最后一行是 a `print("Autoexec Complete")`）和一个 BAT 文件`MyPython.Bat`，其中包含：

```
cd \myPythonCode
python -i autoexec.py 
```

我只是使用命令：`mypython`

现在每次都启动 Python 环境。*

# mod-rewrite - 带有 -f 条件的 RewriteCond 错误

> ID：14244257
> 
> 赞同：0
> 
> 时间：2013-01-09T18:44:59.567
> 
> 标签：mod-rewrite

如果该文件夹中存在该文件，我想将所有对我网站的请求重定向到文件夹“站点”。

例如：如果我的网站包含文件 /foo/foo.html、/bar/bar.html 和 /site/site.html 我想要以下重定向：

```
/foo/foo.html -> /foo/foo.html
/bar/bar.html -> /bar/bar.html
/site/site.html -> /site/site.html
/site.html -> /site/site.html 
```

我认为这样的事情应该可以解决问题：

```
Options +FollowSymLinks
RewriteEngine On
# Check if the requested path is not a real file or folder
RewriteCond %{DOCUMENT_ROOT}/site/%{REQUEST_URI} -f
# if not a real file/folder: myhost.com/blabla -> myhost.com/site/blabla
RewriteRule ^(.*)$ %{DOCUMENT_ROOT}/site/$1 [R=301,L] 
```

但我在日志中收到这些错误：

```
[warn] RewriteCond: NoCase option for non-regex pattern '-f' is not supported and will be ignored. 
```

知道有什么问题吗？我没有从谷歌那里得到太多关于这个错误的信息......

Ps：我使用的是 bluehost 网站，并且 mod_rewrite 处于活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:50:07.760

我认为这应该可以解决问题：

```
RewriteEngine On
RewriteCond %{REQUEST_URI} !-f
RewriteRule ^(.*)$ /site/$1 [R=301,L] 
```

如果您需要对 goto site.html 的所有未知请求，您应该使用：

```
RewriteRule ^(.*)$ /site/site.html [R=301,L] 
```

# scala - Scala将递归有界类型参数（F有界）转换为类型成员

> ID：14244260
> 
> 赞同：11
> 
> 时间：2013-01-09T18:45:10.330
> 
> 标签：scala, types, parametric-polymorphism, type-members, bounded-quantification

我将如何转换：

```
trait Foo[A <: Foo[A]] 
```

类型成员？

即，我想要以下内容：

```
trait Foo {
  type A <: Foo {type A = ???}
} 
```

但我遇到了困难，因为名称 A 已经在类型细化中采用。这个问题是相似的（并且产生自）：[F-bounded quantification through type member instead of type parameter?](https://stackoverflow.com/questions/14225582/f-bounded-quantification-through-type-member-instead-of-type-parameter/14232069)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T19:56:43.107

使用自我类型：

```
scala> trait Foo { self => type A <: Foo {type A = self.A}}
defined trait Foo

scala> class Bar extends Foo { type A = Bar }
defined class Bar

scala> class Bar extends Foo { type A = Int }
<console>:10: error: overriding type A in trait Foo with bounds <: Foo{type A = Bar.this.A};
 type A has incompatible type
       class Bar extends Foo { type A = Int }
                                    ^ 
```

# java - 使用 fork-join 进行 Java 多路树搜索

> ID：14244263
> 
> 赞同：0
> 
> 时间：2013-01-09T18:45:17.570
> 
> 标签：java, algorithm, java-7

我有多路树结构，我必须遍历它才能确定状态。我正在研究首先处理叶节点的“后序”类型遍历。并且搜索结束条件取决于任何状态为非活动的子节点。另外，从性能的角度来看，我会使用 JDK7 的 fork-join 机制。

![在此处输入图像描述](../Images/47246ced183e2573f85a365ce0a44fc7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:04:48.473

这是您如何做到这一点的（非常）粗略的草图。

```
final class TreeNode {
    private final Iterable<TreeNode> children;

    TreeNode(Iterable<TreeNode> aChildren) {
        children = aChildren;
    }

    Iterable<TreeNode> getChildren() {
        return children;
    }

    void postorder(TreeNodeIterator iterator) {
        postorderTraverse(this, iterator);
    }

    private void postorderTraverse(TreeNode node, TreeNodeIterator iterator) {
        for (TreeNode child : children) {
            postorderTraverse(child, iterator);
        }
        iterator.visit(node);
    }

    void postorderParallel(TreeNodeIterator iterator) {
        new ForkJoinPool().invoke(new VisitNodeAction(iterator, this));
    }

    interface TreeNodeIterator {
        void visit(TreeNode child);
    }

    private class VisitNodeAction extends RecursiveAction {
        private final TreeNodeIterator iterator;
        private final TreeNode node;

        private VisitNodeAction(TreeNodeIterator iterator, TreeNode node) {
            this.iterator = iterator;
            this.node = node;
        }

        @Override
        protected void compute() {
            List<RecursiveAction> tasks = new LinkedList<RecursiveAction>();
            for (TreeNode child : children) {
                tasks.add(new VisitNodeAction(iterator, child));
            }
            invokeAll(tasks);
            iterator.visit(node);
        }
    }
} 
```

一些需要修改的东西：

*   添加您对处于非活动状态的检查。最简单的方法是在每个节点中保留一个原子布尔值，`RecursiveAction`在处理节点之前检查并在节点处于非活动状态时更新，尽管这不是一个非常干净或功能性的路由。
*   添加一种方法来决定何时应该使用新线程，上面为每个节点使用一个线程。此外，您可以通过不在`ForkJoinPool`每次调用`postorderParallel`.

# c - 在 C89 中如何设法创建和访问行为类似于数组的结构？

> ID：14244266
> 
> 赞同：3
> 
> 时间：2013-01-09T18:45:19.660
> 
> 标签：c

在 C99 程序员必须定义所有在编译时已知的具有固定大小的数组之前。人们是如何设法创建和访问行为类似于数组但直到运行时才知道其大小的结构的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T18:46:01.820

使用[`malloc(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/malloc.3.html)和[`free(3)`](http://www.kernel.org/doc/man-pages/online/pages/man3/free.3.html)做动态内存管理。今天仍然完成。

```
void f(int n)
{
  int *nInts = malloc(n * sizeof(int));

  /* do stuff with 'nInts' */

  free(nInts);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:53:49.747

我想你指的是[这个](http://c-faq.com/struct/structhack.html)。

如那里所说，不确定它是合法的还是可移植的。那就是说我见过这样的代码，但我自己从来没有写过。

# ios - 为动画 3D 游戏角色实现多种服装的方法？

> ID：14244267
> 
> 赞同：2
> 
> 时间：2013-01-09T18:45:22.870
> 
> 标签：ios, animation, unity3d, modeling

我们想在我们的手机游戏中加入可解锁的服装，但如何做到这一点呢？现在，我的建模师将动画导出到角色模型的 .FBX 文件中。但是现在我们想要创建一些额外的服装，我们不知道如何进行。

流行游戏是如何做到这一点的——例如：《古墓丽影》如何处理所有劳拉·克罗夫特的附加服装，而无需重新制作每一件的动画？

是否所有服装都被视为适用于单个裸体动画模型并相应启用/禁用的“衣服”？还是每件衣服都有一个完整的、个性化的模型？（在这种情况下，我们将如何关联动画？）

我想知道的另一件事是如何处理所有这些纹理？

最后，作为一款手机游戏，我们是否应该考虑其他任何因素？（即，我们应该 [可以吗？] 将内容拆分为单独的文件，还是需要将所有服装和所有动画保存在一个大文件中？

# unix - CVS 更新 - 移走文件

> ID：14244270
> 
> 赞同：3
> 
> 时间：2013-01-09T18:45:31.530
> 
> 标签：unix, cvs

我正在更新 CVS 中的文件。我将需要更新的文件放在我的 unix 文件夹中。使用 cvs add、cvs commit - 我能够将新文件添加到目录中。我还能够使用 cvs update 将一些从 1.1 更新到 1.2。但是我无法更新一个文件的版本，出现此错误：

```
cvs update filename.scr
cvs server: move away filename.scr; it is in the way 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-12T20:13:51.207

完全按照它所说的去做 - 删除 filename.scr。CVS 更新不会覆盖 filename.scr 的现有非受控副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-20T12:22:55.957

在 cvs 隐藏子文件夹中检查该文件的文件夹是否在条目列表中，如果是，则必须添加它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-21T20:58:24.790

具体来说，这意味着存储库中有一个文件，并且您的树中有一个匹配的文件，但文件 CVS/Entries 没有提及它。对于与它所抱怨的文件处于同一级别的 CVS/Entries 文件，这可能会失败，或者如果您进行递归更新，它可能会由于目录未在更高级别的 CVS/Entries 中列出而失败。

这经常发生在我身上，我不知道为什么；一个完美的结帐开始出现这些错误。如果是缺少目录，最简单的修复方法是直接编辑 CVS/Entries，例如添加

D/Foo////

到 Bar/CVS/Entries 以便 CVS 知道它已经拥有 Bar/Foo。

如果它丢失了一个文件，那么很难重新生成 CVS/Entries 行，所以最简单的方法就是按照它说的来删除文件。

# java - java类编写和对象构造

> ID：14244273
> 
> 赞同：3
> 
> 时间：2013-01-09T18:45:41.123
> 
> 标签：java, bytearray

这是关于编写 java 类以及如何实例化它们的一般问题。

```
public class transaction
{
    int amount;
    char ref;
} 
```

如果一个类是这样写的，那么它可以像结构一样使用。然后，当数据作为数据报中的 byte[] 通过网络传输时，它被转换为事务对象。这样做的一个地方是在一个单独的类中，这样说：

```
public class doStuff
{
    static transaction t; // the int and the char are alloc'd onto the DataSegment

    public static transaction fromByte(byte[] buf)
    {
        t = new transaction(); // make sure t is null to begin with (on the heap)
        t.ref = ''; // initialise char (to avoid null bytes)

        t.amount = ByteBuffer.wrap(buf).getInt();
        t.ref = ByteBuffer.wrap(buf).getChar();

        return t;
    }
} 
```

然后另一个类像这样调用 doStuff：

```
import doStuff;    

class otherClass extends Thread
{
    static transaction x = new transaction();

    ... in the run method
    x = doStuff.fromByte(buf);
    ...
} 
```

但是现在我想将类数据和方法一起保存在一个地方（应该是这样的？）所以不是在 doStuff 类中使用 fromByte(byte[] buf) 方法，而是将其移至事务类。所以事务类现在看起来像这样：

```
public class transaction
{
    int amount;
    char ref;

    static transaction t;

    public static transaction fromByte(byte[] buf)
    {
        t = new transaction(); // make sure t is null to begin with
        t.ref = ''; // initialise char (to avoid null bytes)

        t.amount = ByteBuffer.wrap(buf).getInt();
        t.ref = ByteBuffer.wrap(buf).getChar();

        return t;
    }
} 
```

然后在 otherClass 我使用：

```
import transaction;

class otherClass extends Thread
{
    static transaction x = new transaction();

    ... in the run method
    x = fromByte(buf);
    ...
} 
```

从表面上看，这一切都和以前一样。

我的问题是：`fromByte(byte[] buf)`将交易数据（金额和参考）的操作添加到`transaction`类中，然后实例化对象的开销`transaction`发生变化。如果每秒有数百个事务来自网络，那么将`fromByte(byte[] buf)`方法添加到`transaction`类意味着当它在`doStuff`类中实例化时，将使用比以前更多的开销。换句话说，不是每次生成类时简单地生成一个`int`和一个（作为数据段上的静态变量） ，而是在堆上生成它（我认为，而不是数据段），然后将方法推入堆栈然后`char``doStuff``foo``fromByte(buf)``transaction`类再次在数据段上递归调用自身（静态变量）......

好吧，这似乎有点乱。有没有更好的方法将数据和方法放在同一个类中并保持最大速度？它能否克服递归变量调用（fromByte 方法返回一个事务对象，在“int/char”形式中没问题）有什么意见吗？:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:51:48.443

这将从 buf 的开头读取两次。

```
 t.amount = ByteBuffer.wrap(buf).getInt();
    t.ref = ByteBuffer.wrap(buf).getChar(); 
```

我怀疑你的意思是

```
 ByteBuffer bb = ByteBuffer.wrap(buf);
    t.amount = bb.getInt();
    t.ref = bb.getChar(); 
```

> 将交易数据（数量和参考）上的操作 fromByte(byte[] buf) 添加到交易类之后，实例化交易对象的开销就会发生变化。

每次创建一个`byte[]`and也是一种开销。`ByteBuffer`

> 换句话说，每次 doStuff 类生成 foo 时，不是简单地生成一个 int 和一个 char （作为数据段上的静态变量），而是在堆上生成它（我认为，而不是数据段），然后是 fromByte( buf) 方法被推入堆栈，然后事务类再次在数据段上递归调用自身（静态变量）...

如前所述，创建`transaction`对象可能只是您开销的一小部分。例如，从 Socket 读取最多需要 100 倍的时间。

> 好吧，这似乎有点乱。有没有更好的方法将数据和方法放在同一个类中并保持最大速度？

不要使用`byte[]`，不要`ByteBuffer`每次都创建一个新`transaction`对象，也不要每次都创建一个新对象。您可以提前或根本不创建这些对象并重新使用它们。

例如，考虑在建立连接（或回收一个）时创建一个*直接*ByteBuffer 并解码消息并调用一个监听器，如

```
interface TransactionListener {
    public void onTransaction(int num, char status);
} 
```

这样就不会在堆栈上或其他地方创建任何对象。

在这种情况下，您的性​​能瓶颈将是从 Socket 读取，这取决于您如何处理这些信息。;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:53:53.870

在性能方面，这两种方法的唯一区别是调用静态方法的成本。这是一个非常微不足道的成本，并且通过 JIT 编译器进一步降低。

在封装方面，问题是你是想把类的知识放在`transaction`类中，`doStuff`还是把字节流结构的知识放在`transaction`类中。无论哪种方式都有一个论据。

# mysql - MySQL在一列中返回具有多个值的行？

> ID：14244274
> 
> 赞同：1
> 
> 时间：2013-01-09T18:45:41.767
> 
> 标签：mysql

这是我的场景：我有一个包含食谱的表，另一个包含与食谱相关的成分（recipe_ingredients）。

表配方成分：

```
ID      RECIPE_ID     INGREDIENT_ID
1           1              6
2           2              3
3           2              4 
```

就我而言，我想返回包含用户介绍的某些成分的所有食谱（可能是一种或多种），在此示例中，假设所有包含成分 3 和 4 的食谱。显然，当我只查询一种成分时没有问题，但是我不知道如何通过不止一个来实现这一目标......在此先感谢大家！欢迎任何建议！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T18:47:28.953

听起来你想要这个：

```
select RECIPE_ID
from RECIPE_INGREDIENTS
where INGREDIENT_ID in (3, 4)
group by RECIPE_ID
having count(distinct INGREDIENT_ID ) >=2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/b6672/1)

然后，如果您想将此加入您的食谱表：

```
select r.*
from recipes r
inner join
(
  select RECIPE_ID
  from RECIPE_INGREDIENTS
  where INGREDIENT_ID in (3, 4)
  group by RECIPE_ID
  having count(distinct INGREDIENT_ID ) >=2
) ri
  on r.RECIPE_ID = ri.RECIPE_ID 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T18:48:44.357

假设你有 3 个表 recipes ， ingradients 和 recipe_ingrediants

```
SELECT 
    r.*,
    GROUP_CONCAT(i.ingradients)
FROM recipes as r
LEFT JOIN recipe_ingrediants as ri ON ri.recipe_id = r.id
LEFT JOIN ingrediants as i ON r.id = ri.ingrediant_id
GROUP BY r.id 
```

# asp.net - Windows 2008 中的 Informix ODBC 驱动程序异常

> ID：14244275
> 
> 赞同：0
> 
> 时间：2013-01-09T18:45:42.277
> 
> 标签：asp.net

我有带有 Informix 64 ODBC 驱动程序连接的 .NET 4.0 项目在我的本地（即 Windows 7）上运行良好，但是当我将项目部署在带有 Informix ODBC 驱动程序（64 位版本）的 Windows 2008（64 位版本）的服务器上时应用程序引发异常 ***无法在 DLL 'kernel32.dll' 中找到名为 'InterlockedIncrement' 的入口点。*** 我已经阅读过关于相同错误的线程，但没有帮助。

我会很感激这方面的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:32:07.703

我实际上使用的是 32 位版本而不是 64 位版本，它可以正常工作，因为我在项目设置中将平台目标设置为任何 CPU，因此它的目标是 32 位版本。当我更改为 64 时，服务器上的异常得到解决。我还添加了 PATH 环境变量为 %INFORMIXDIR%\bin 和 %INFORMIXDIR%\bin\netf20。

# tfs - TFS 子区域名称更改

> ID：14244281
> 
> 赞同：1
> 
> 时间：2013-01-09T18:46:05.590
> 
> 标签：tfs

我想知道是否可以在 TFS 中编辑子区域的名称。我知道我可以创建新区域并删除，但我似乎找不到重命名的方法。这可能会导致某人无法执行此任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:57:01.907

在 TFS 2012 中，您应该能够进入创建区域的同一屏幕并双击（或右键单击选择编辑）要重命名的区域。此时，您应该能够相应地修改名称。

# javascript - 需要帮助以 HTML 表单中的项目符号显示不同的字段

> ID：14244287
> 
> 赞同：0
> 
> 时间：2013-01-09T18:46:27.243
> 
> 标签：javascript, jquery, html, forms, radio-button

我正在尝试模仿此链接上的 HTML 表单：http: [//maati.tv/uploads/](http://maati.tv/uploads/) 我正在将其放在公司的 Facebook 页面上。

现在，我遇到的问题是我无法根据选择单选按钮显示不同的字段。我知道它需要 JavaScript。我从这个链接得到了相关的脚本：[https ://stackoverflow.com/a/14127709/1315163](https://stackoverflow.com/a/14127709/1315163)

```
$(".radioSelect").each(function () {
  showSpecificFields(this);
});

$(".radioSelect").click(function () {
  showSpecificFields(this);
});

function showSpecificFields(obj) {
  if ($(obj).is(":checked")) {
    var radioVal = $(obj).val();
    $(".fieldsSpecific").each(function () {
      if ($(this).attr('id') == radioVal) {
        $(this).show();
      } else {
        $(this).hide();
      }
    });
  }
} 
```

任何人都可以帮我吗？其余代码在这个 jsFiddle 中：http: [//jsfiddle.net/DDJNc/2/](http://jsfiddle.net/DDJNc/2/)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:26:37.440

您的答案：

```
$(".radioSelect").each(function(){
    showSpecificFields(this);
});

$(".radioSelect").click(function(){
   showSpecificFields(this);
});

function showSpecificFields(obj){
    if($(obj).is(":checked")){
    var radioVal = $(obj).val();
     $(".fieldsSpecific").not('.'+radioVal).each(function(){
         $(this).hide(); 
     });
     $(".fieldsSpecific."+radioVal).each(function(){
         $(this).show(); 
     }); 
    }
} 
```

**还要检查 HTML**

[http://jsfiddle.net/DDJNc/4/](http://jsfiddle.net/DDJNc/4/)

. （点）css 选择器选择包含给定类的元素。那个类应该出现在你的 HTML 中才能正常工作！

Don't use the **id** attribute for that because you are trying to match a set of elements that belong to a class and not a single element.

# windows - 如何杀死 Rails webrick 服务器？

> ID：14244288
> 
> 赞同：8
> 
> 时间：2013-01-09T18:46:27.627
> 
> 标签：windows, ruby-on-rails-3, webrick

当我尝试通过 启动服务器时`rails s`，我收到以下错误消息：

```
C:\Users\Frankie\Documents\stocktracker>rails s
=> Booting WEBrick
=> Rails 3.2.8 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
A server is already running. Check C:/Users/Frankie/Documents/stocktracker/tmp/p
ids/server.pid.
Exiting 
```

中列出的数字`server.pid`是 8436。

如何手动终止此进程？如何轻松杀死当前正在运行的所有 webrick 服务器？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-09T18:58:21.007

您可以使用 taskkill 实用程序。

```
taskkill /PID 8436 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-11T04:15:47.340

如果您在 OSX 上使用 iTerm2，您可以打开 Toolbelt => ShowToolbelt，选择 ruby​​ pid 8436 然后单击发送信号将其终止。有时任务杀死对我不起作用。

此外，您可以`ps -aux | grep rails`找到 pid。然后像其他答案推荐的那样杀死。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-10T22:52:41.843

以下任务定义适用于我（将其放在 lib\tasks 文件夹中的 *.rake 文件中）：

```
namespace :server do

  # ---------------------------------------------------------------------------
  desc "Clear the previous server instance clutter."
  task :cleanup => :environment do      
    pidfile = 'tmp/pids/server.pid'
    if File.exists? pidfile
      pid = File.read(pidfile).to_i
      if RbConfig::CONFIG['host_os'] =~ /mswin32/
        sh "taskkill /f /pid #{pid}"
        sh "del tmp\\pids\\server.pid"
      else
        sh "kill #{pid}"
        sh "rm #{pidfile}"
      end
      puts "All cleaned up. Yay!"
    else
      puts "Already clean. Whew!"
    end
  end
  # ---------------------------------------------------------------------------
  desc "Start an instance of the server cleanly."
  task :startup => :cleanup do
    sh "rails server"
  end
  # ---------------------------------------------------------------------------
end 
```

现在只需运行

```
rake server:startup 
```

在尝试再次运行 rails 服务器之前，它会清理 Windoze 上的所有剩余进程和 pid 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-03T12:47:23.463

对于`Linux/Ubuntu`用户，`ubuntu`有 kill 命令。在运行`webrick`服务器时，在该位置的项目目录中`APP_DIR/tmp/pids/server.pid`，将保存所有进程 ID。
您只需要打开文件，您就会找到当前运行的服务器的进程 ID。现在您可以使用以下命令终止该进程

```
$ kill [pid] # Example kill 8123 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-08-19T07:10:54.197

跟着这些步骤：

1.通过以下方式查找'rails s'进程ID： **ps -aux | grep 导轨**

2.使用带有-9选项的kill命令： **kill -p [PID]**

**你不会失望的！！**

# python - scipy：插值轨迹

> ID：14244289
> 
> 赞同：12
> 
> 时间：2013-01-09T18:46:34.590
> 
> 标签：python, interpolation, spline

我有一个由一系列*（x，y）*对形成的轨迹。我想使用样条线在这条轨迹上插入点。

我该怎么做呢？使用`scipy.interpolate.UnivariateSpline`不起作用，因为*x*和*y*都不是单调的。我可以引入一个参数化（例如沿轨迹的长度*d*），但是我有两个因变量*x(d)*和*y(d)*。

例子：

```
import numpy as np
import matplotlib.pyplot as plt
import math

error = 0.1
x0 = 1
y0 = 1
r0 = 0.5

alpha = np.linspace(0, 2*math.pi, 40, endpoint=False)
r = r0 + error * np.random.random(len(alpha))
x = x0 + r * np.cos(alpha)
y = x0 + r * np.sin(alpha)
plt.scatter(x, y, color='blue', label='given')

# For this special case, the following code produces the
# desired results. However, I need something that depends
# only on x and y:
from scipy.interpolate import interp1d
alpha_i = np.linspace(alpha[0], alpha[-1], 100)
r_i = interp1d(alpha, r, kind=3)(alpha_i)
x_i = x0 + r_i * np.cos(alpha_i)
y_i = x0 + r_i * np.sin(alpha_i)
plt.plot(x_i, y_i, color='green', label='desired')

plt.legend()
plt.show() 
```

![示例数据](../Images/848d245751ccd876829c72828e79b411.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T19:51:01.593

使用 splprep，您可以在任何几何图形的曲线上进行插值。

```
from scipy import interpolate
tck,u=interpolate.splprep([x,y],s=0.0)
x_i,y_i= interpolate.splev(np.linspace(0,1,100),tck) 
```

这会产生一个像给定的图，但只使用 x 和 y 点而不是 alpha 和 r 参数。 ![与您的相同，仅使用 x 和 y 点。](../Images/c3df6e3fef1c60844f67fe5e0e770ece.png)

对不起我的原始答案，我误读了这个问题。

# iis - 拒绝所有人访问任何目录 web.config

> ID：14244290
> 
> 赞同：0
> 
> 时间：2013-01-09T18:46:36.670
> 
> 标签：iis, web-config, directory

我不想拒绝 web.config 中每个人对目录的访问。这可能吗？或者应该足够拒绝？我将它托管在 IIS 服务器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:51:04.683

```
<location path="folder">
    <system.web>
        <authorization>
            <deny users="*"/>
        </authorization>
    </system.web>
</location> 
```

# ruby-on-rails - 在 Rails 中添加表单字段的最佳方法生成 simple_form

> ID：14244297
> 
> 赞同：0
> 
> 时间：2013-01-09T18:46:55.700
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, simple-form

忘记一个字段后，当我生成表单时，我尝试添加一个字段。我在模型、视图、控制器、schema.rb 和 activerecord 迁移中手动更改了它。但后来它给了我一个 NoMethod 'email_address'。有什么建议我可以生成应用于所有文件的字段，就像最初生成时一样？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:00:33.170

我认为您需要对 timestamp_xxx 文件进行更改，但是当您 rake db:migrate 时，由于表已经创建，它可能会导致一些错误。

您可以做的是手动添加新列。

```
$ rails db 
```

rails db 会计算出您正在使用的数据库，并将您放入您将使用的任何命令行界面。在这里，您可以更改表格并将新列添加到表格中。

例如，在 db2 中，您将执行以下操作：

```
$ alter table <table name> add column <column name> <type> 
```

添加新列后，您不应该得到 no method 错误

# java - 创建的对象粘在屏幕上，不随地图移动

> ID：14244311
> 
> 赞同：3
> 
> 时间：2013-01-09T18:47:32.117
> 
> 标签：java, slick2d

问题在于在地图上创建对象。一切都会好的，但突然间我只能在屏幕上创建对象（即图像）。每当我给一个对象一些坐标时，它会占用屏幕的 (0,0) 点，而不是地图。所以我可以在地图上移动我的人（相机工作正常），但例如蜘蛛停留在屏幕上，而不是在地图上。这里初始化对象：

```
static float PlayerPositionX = 0;
static float PlayerPositionY = 0;
static GameContainer gc; 
static StateBasedGame sbg;

//Spider
Monster monster = new Monster();

float shiftXSpider;
float shiftYSpider;

//Player position at the middle of the screen *half of the screen
static float shiftX = PlayerPositionY + (Game.screenWidth/2);
static float shiftY = PlayerPositionX + (Game.screenHeight/2);
static float shiftXMap = PlayerPositionX;
static float shiftYMap = PlayerPositionY; 
```

这是我的地图、蜘蛛和播放器的渲染方法。（当然只是一部分）

```
worldMap.draw(PlayerPositionX,PlayerPositionY);
player.draw(shiftX,shiftY);
spider.draw(spiderPoint.x, spiderPoint.y); 
```

更新方法：

```
public void update(GameContainer gc, StateBasedGame sbg, int delta) throws SlickException {
    System.out.println(playerPoint.getX() + " " + playerPoint.getY());
    playerPoint.x=PlayerPositionX;
    playerPoint.y=PlayerPositionY;
    Input input = gc.getInput();
    monster.Chase(playerPoint.x, playerPoint.y,delta);
    // monster.Chase(PlayerPositionX, PlayerPositionY,delta);
    // shiftXSpider=monster.getMonsterPositionX();
    // shiftYSpider=monster.getMonsterPositionY();
    spiderPoint.x=monster.getMonsterPositionX();
    spiderPoint.y=monster.getMonsterPositionY();

    if(input.isKeyDown(input.KEY_DOWN)) {
        player=movingDown;
        PlayerPositionY-=delta * .1f;
        if(PlayerPositionY<-600) {
            PlayerPositionY+=delta * .1f;
        }
    }
    //move up
    if(input.isKeyDown(input.KEY_UP)) {
        player=movingUp;
        PlayerPositionY+=delta * .1f;
        if(PlayerPositionY>162) {
            PlayerPositionY-=delta * .1f;
        }
    }
    //move right
    if(input.isKeyDown(input.KEY_RIGHT)) {
        player=movingRight;
        PlayerPositionX-=delta * .1f;
        if(PlayerPositionX<-840) {
            PlayerPositionX+=delta * .1f;
        }
    }
    //move left
    if(input.isKeyDown(input.KEY_LEFT)) {
        player=movingLeft;
        PlayerPositionX+=delta * .1f;
        if(PlayerPositionX>324) {
            PlayerPositionX-=delta * .1f;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:15:51.303

我在相机课上做到了这一点。
在这里你可以找到我所有的课程： http: [//pastebin.com/u/huneater](http://pastebin.com/u/huneater)
我的小游戏（*未完成*）：[https ://www.dropbox.com/s/dhvf5vbqj25sgyw/game.jar](https://www.dropbox.com/s/dhvf5vbqj25sgyw/game.jar)

**我对示例矩形的渲染：**

```
@Override
    public void render(GameContainer gc, Graphics g, Camera camera) {
        g.setColor(color);
        g.fillRect(x - camera.getX(), y - camera.getY(), width, height);
    } 
```

**对于这个相机类，您应该在玩家更新方法中设置 targetX 和 targetY 位置：**

```
float targetX = x - (gc.getWidth() / 2);
camera.setTargetX(targetX);

float targetY = y - (gc.getHeight() / 2);
camera.setTargetY(targetY); 
```

然后在您的世界更新循环中，您必须调用相机的更新循环。所以有了这个，我在我的屏幕中间找到了一个玩家，地图上有一些块。而且它们的位置非常完美。

# java - 用于重新调整面板大小的 Lout Manager

> ID：14244312
> 
> 赞同：0
> 
> 时间：2013-01-09T18:47:33.023
> 
> 标签：java, user-interface, layout, panel, frame

我正在制作一个 gui 应用程序，我需要在框架的一侧有一个宽面板，而在另一侧有一个更薄的面板。面板的高度相同，但是当我重新调整它们的大小时，我希望它们保持一致的宽度差异，同时仍然改变大小。

这是恢复到较小尺寸后的样子： ![更小](../Images/40b54a40c05a6dbc8ee12ad19a06994a.png)

这是最大化或变大时的样子： ![在此处输入图像描述](../Images/ec2f9cca088eec598e81d688b08ff408.png)

我试图为此使用网格布局，但是当您使窗口更大时，我无法弄清楚如何使窗口变小并以较小的速度进行更改。我的问题是哪种布局可以让我得到我想要的，布局管理器中的哪些功能会引导我得到结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:52:11.070

您可以使用`GridBagLayout`，但这似乎总是比它的价值更麻烦。

相反，看看[JGoodies](http://www.jgoodies.com/)，尤其是他们的[FormLayout](http://www.jgoodies.com/freeware/libraries/forms/)。自从我完成 Swing 编程以来已经有好几年了，但请记住 JGoodies 布局让生活变得更轻松。

# android - Toast 背景颜色正在更改

> ID：14244317
> 
> 赞同：14
> 
> 时间：2013-01-09T18:48:06.313
> 
> 标签：android, xml, styles, toast

我正在开发一个项目，并通过执行以下操作将应用程序的背景设置为白色：

```
<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
    <!-- All customizations that are NOT specific to a particular API-level can go here. -->
    <item name="android:actionBarStyle">@style/MyActionBar</item>
    <item name="android:actionBarSize">140dp</item>
    <item name="android:background">#ffffff</item>
</style> 
```

这很有效，但问题是 toast 消息现在以白色背景显示。奇怪的是我在项目中集成了一个启动画面，当用户登录时，吐司消息正常显示。

这真的很奇怪，希望能在这个问题上提供任何帮助。

编辑：添加屏幕截图显示问题。屏幕截图是在最初的 toast（具有不需要的效果）淡出和新的 toast（默认）淡入时拍摄的。

![在此处输入图像描述](../Images/afec01d62e950fe1dcae80b807fbde5c.png)

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-09T19:34:22.760

我解决了这个问题。Toast 背景颜色发生变化的原因是我在 View 对象的上下文中传递的方式，它包含在其中。

以下代码行将导致背景颜色更改为不需要的白色：

```
Toast.makeText(v.getContext(), "Checking login details...", Toast.LENGTH_SHORT).show(); 
```

这行代码会将 Toast 返回到默认系统样式：

```
Toast.makeText(getApplicationContext(), "Checking login details...", Toast.LENGTH_SHORT).show(); 
```

我不确定像这样修复它是否存在很大问题，因为我只是在学习。如果有人可以看到问题，请分享。它似乎工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-15T19:30:50.823

对我来说使用`getApplicationContext()`不是一个选项，对于其他有同样问题的人，您可以将 Toast 设置回默认设置，如下所示：

```
//Create your Toast with whatever params you need
Toast toast = Toast.makeText(getActivity(), "Refreshing...", Toast.LENGTH_SHORT);  

//Set the background for the toast using android's default toast_frame.
//Optionally you can set the background color to #646464 which is the
//color of the frame
View view = toast.getView();
view.setBackgroundResource(android.R.drawable.toast_frame); 

//Get the TextView for the toast message so you can customize
TextView toastMessage = (TextView) view.findViewById(android.R.id.message); 

//Set background color for the text.
toastMessage.setBackgroundColor((Color.parseColor("#646464"))); 
toast.show(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-07-04T16:00:19.570

WInthrop 答案的补充。除了将文本框的背景颜色设置为#646464，还可以将其设置为透明，使吐司看起来像原来的半透明吐司

```
private void showToast(Context context,String msg,int duration){
        Toast toast = Toast.makeText(context,msg,duration);

        View view = toast.getView();
        view.setBackgroundResource(android.R.drawable.toast_frame);

        TextView toastMessage = (TextView) view.findViewById(android.R.id.message);

        toastMessage.setBackgroundColor(Color.TRANSPARENT);

        toast.show();
    } 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2019-02-15T14:56:54.040

这对我有用。我拿了[Sachin Murali G 的](https://stackoverflow.com/a/38188656/7342155)密码

```
 private void showToast(Context context, String msg, int duration) {
        Toast toast = Toast.makeText(context, msg, duration);
        View view = toast.getView();
        view.setBackgroundResource(android.R.drawable.toast_frame);
        view.setBackgroundColor(Color.TRANSPARENT);
        TextView text = view.findViewById(android.R.id.message);
        text.setBackground(context.getResources().getDrawable(R.drawable.custom_toast));
        text.setTextColor(context.getResources().getColor(R.color.colorPrimaryLight));
        toast.show();
    } 
```

并`custom_toast.xml`在`drawable`文件夹中添加：

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="rectangle">

    <corners android:radius="22dp"/>
    <solid android:color="@color/colorPrimary"/>
    <padding
        android:bottom="12dp"
        android:left="20dp"
        android:right="20dp"
        android:top="12dp"/>
</shape> 
```

非常感谢！

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2019-05-04T10:56:52.220

试试这个：

```
toast.getView().setBackgroundColor(0xFF00ddff); 
```

# php - Symfony 图片上传

> ID：14244318
> 
> 赞同：2
> 
> 时间：2013-01-09T18:48:16.837
> 
> 标签：php, symfony-1.4

我找不到我的代码无法正常工作的原因。我尝试通过表单上传图像并将其保存在目录中，但它不存在。对于测试，我从表单中对文件对象进行了回显，以显示文件名和扩展名及其正确，但不保存。

这是我的代码：

形式：

```
class WgrajForm extends sfForm
{
  public function configure()
  {
    $this->setWidgets(array(
      'zdjęcie' => new sfWidgetFormInputFile(),
      'nazwa'   => new sfWidgetFormInput(),
    ));

     $this->setValidators(array(
        'zdjęcie'    =>  new sfValidatorFile(array(
          'mime_types' => 'web_images',
          'path'       => '/projektSymfony/web/images',
        ),array(
          'mime_types' => 'Plik może być tylko zdjęciem'
        )
      ),
      'nazwa' => new sfValidatorString(array(), array('required' => 'pole wymagane')),
    ));

    $this->getWidgetSchema()->setNameFormat('wgraj[%s]');
  }
} 
```

行动：

```
public function executeDodaj(sfWebRequest $request)
{
  $this->form= new WgrajForm();

  if ($request->isMethod('post'))
  {
    $this->form->bind(
    $request->getParameter('wgraj'),
    $request->getFiles('wgraj'));

    if ($this->form->isValid())
    {
      $wgrane       = $this->form->getValues();
      $plik         = $wgrane['zdjęcie'];
      $pliknazwa    = $wgrane['nazwa'];
      $rozszerzenie = $plik->getExtension($plik->getOriginalExtension());
      $plik->save('/projektSymfony/web/images/'.$pliknazwa.$rozszerzenie);
      //$this->redirect('galeria/index');
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T08:34:15.150

当您使用或在您的情况下，该`path`参数会更好。`sfConfig::get('sf_upload_dir')``sfConfig::get('sf_web_dir')`

您不需要操作中`save()`的小部件。您只需要保存表单，然后它将保存您的图像。

```
if ($this->form->isValid())
{
  $this->form->save();

  $this->redirect('galeria/index');
} 
```

看一下文档，你会发现很多信息，特别[是 Jobeet 教程中关于 Form 的部分](http://symfony.com/legacy/doc/jobeet/1_4/en/10?orm=Doctrine)。

# ios - 1个视图中的多个uisegmentedcontrol不起作用

> ID：14244321
> 
> 赞同：0
> 
> 时间：2013-01-09T18:48:37.150
> 
> 标签：ios, objective-c, uisegmentedcontrol

我有 2 个 uisegmentedcontrols 的视图，一个在底部，一个在导航栏中。底部的工作正常，导航栏中的那个出现，但没有拾取任何触摸事件。底部段（工作）的代码是：

```
 footerSegment = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"1", @"2", nil]];
[footerSegment setFrame:CGRectMake(5, 6, 310, 30)];
[footerSegment setSegmentedControlStyle:UISegmentedControlStyleBar];
footerSegment.selectedSegmentIndex = 0;
//segmentFiltering.tintColor = [UIColor colorWithWhite:80.0/255.0 alpha:1.0];
[footerSegment addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];
[footerSegment setTag:0];
[footerSegment setBackgroundColor:[UIColor clearColor]];
UIImage *segSelected = [[UIImage imageNamed:@"segment_sel.png"] stretchableImageWithLeftCapWidth:5.0 topCapHeight:0];
UIImage* menuRightImage = [[UIImage imageNamed:@"button.png"] stretchableImageWithLeftCapWidth:5.0 topCapHeight:0.0];
[footerSegment setBackgroundImage:menuRightImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[footerSegment setBackgroundImage:segSelected 
                            forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

UIImage *segmentDividerImg = [[UIImage imageNamed:@"div.png"] stretchableImageWithLeftCapWidth:0 topCapHeight:0];
// Image between two unselected segments.
[footerSegment setDividerImage:segmentDividerImg forLeftSegmentState:UIControlStateNormal
                rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
// Image between segment selected on the left and unselected on the right.
[footerSegment setDividerImage:segmentDividerImg forLeftSegmentState:UIControlStateSelected
                rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
// Image between segment selected on the right and unselected on the right.
[footerSegment setDividerImage:segmentDividerImg forLeftSegmentState:UIControlStateNormal
                rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

[footerToolBar addSubview:footerSegment]; 
```

导航栏的代码如下（可见但不起作用）：

```
 headSegment = [[UISegmentedControl alloc]
               initWithItems:[NSArray arrayWithObjects:@"A", @"B", nil]];
[headSegment setFrame:CGRectMake(50, 7, 200, 29)];
[headSegment setSegmentedControlStyle:UISegmentedControlStyleBar];
headSegment.selectedSegmentIndex = 0;
[headSegment addTarget:self action:@selector(segmentAction:) forControlEvents:UIControlEventValueChanged];

[headSegment setBackgroundColor:[UIColor clearColor]];
[headSegment setBackgroundImage:menuRightImage forState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[headSegment setBackgroundImage:segSelected forState:UIControlStateSelected barMetrics:UIBarMetricsDefault];

[headSegment setDividerImage:segmentDividerImg forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[headSegment setDividerImage:segmentDividerImg forLeftSegmentState:UIControlStateSelected rightSegmentState:UIControlStateNormal barMetrics:UIBarMetricsDefault];
[headSegment setDividerImage:segmentDividerImg forLeftSegmentState:UIControlStateNormal rightSegmentState:UIControlStateSelected barMetrics:UIBarMetricsDefault];
[headSegment setTag:1];
[self.navigationController.navigationBar addSubview:headSegment]; 
```

动作代码：

```
 -(void)segmentAction:(UISegmentedControl*)sender
{
    if(sender.tag == 0){
    NSLog(@"Selected index: %d", sender.selectedSegmentIndex);
    }
    else{
        if (sender.selectedSegmentIndex = 1) {
            NSLog(@"Selected HEAD index: %d", sender.selectedSegmentIndex);
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:08:19.947

```
[self.navigationController.navigationBar addSubview:headSegment]; 
```

这不是您向导航栏添加内容的方式。您必须通过导航控制器的`navigationItem`. 您可以将分段控件设为其`titleView`，也可以将其包装在条形按钮项中并将其设为右侧或左侧按钮之一。

# delphi - 将文件拖放到 Delphi 表单不起作用

> ID：14244325
> 
> 赞同：7
> 
> 时间：2013-01-09T18:49:00.267
> 
> 标签：delphi, delphi-2010

我尝试接受从文件资源管理器拖放到表单的文件，但它不起作用。我的 WM_DROPFILES 处理程序永远不会被调用。如果这有什么不同，我正在运行 Windows 8。

这是我所做的一个简单示例（我在表单上只有一个 TMemo）：

```
type
  TForm1 = class(TForm)
    Memo1: TMemo;
  private
    { Private declarations }
    procedure WMDROPFILES(var msg : TWMDropFiles) ; message WM_DROPFILES;
    procedure CreateWnd; override;
    procedure DestroyWnd; override;
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

{ TForm1 }

procedure TForm1.CreateWnd;
begin
  inherited;
  DragAcceptFiles(Handle, True);

end;

procedure TForm1.DestroyWnd;
begin
  inherited;
  DragAcceptFiles(Handle, false);

end;

procedure TForm1.WMDROPFILES(var msg: TWMDropFiles);
var
  i, fileCount: integer;
  fileName: array[0..MAX_PATH] of char;
begin
  fileCount:=DragQueryFile(msg.Drop, $FFFFFFFF, fileName, MAX_PATH);
  for i := 0 to fileCount - 1 do
  begin
    DragQueryFile(msg.Drop, i, fileName, MAX_PATH);
    Memo1.Lines.Add(fileName);
  end;
  DragFinish(msg.Drop);
end; 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T19:32:03.860

很可能您正在运行提升的应用程序。可能是因为您正在运行 Delphi 提升。在 Vista 及更高版本中，低特权进程无法将消息发送到更高特权进程。这个[MSDN 博客](http://blogs.msdn.com/b/patricka/archive/2010/01/28/q-why-doesn-t-drag-and-drop-work-when-my-application-is-running-elevated-a-mandatory-integrity-control-and-uipi.aspx)解释了更多。

如果您正在运行提升的 Delphi IDE，我敦促您停止这样做。标准桌面应用程序开发很少需要这样做。

* * *

正如雷米指出的那样，你`DestroyWnd`是不正确的。您在调用之前破坏了窗口句柄`DragAcceptFiles`。只需颠倒顺序。就我个人而言，我会`WindowHandle`同时使用`CreateWnd`和`DestroyWnd`。`Handle`如果未分配该属性，则会创建窗口句柄，因此会屏蔽此类错误。

```
procedure TForm1.CreateWnd;
begin
  inherited;
  DragAcceptFiles(WindowHandle, True);
end;

procedure TForm1.DestroyWnd;
begin
  DragAcceptFiles(WindowHandle, false);
  inherited;
end; 
```

# java - 未找到 Java AppletLoader

> ID：14244327
> 
> 赞同：0
> 
> 时间：2013-01-09T18:49:02.400
> 
> 标签：java, html, slick2d

> **可能重复：**
> [Java slick、html 找不到 AppletLoader](https://stackoverflow.com/questions/14238568/java-slick-html-cant-find-appletloader)

我已经使用基于光滑状态的游戏制作了一个 java 游戏，因为我的游戏扩展了 StatBasedGame 它不是一个真正的小程序，因为它没有扩展 JApplet，所以为了解决这个问题，有一个内置的方法可以在 html 中使用。

我找到了这个链接，它向我展示了如何做到这一点：http: [//ninjacave.com/slickapplet](http://ninjacave.com/slickapplet)并做了它要求我做的一切，我使用 eclipse（我的编译器）制作了我的游戏的 jar 文件，下载了最新版本lwjgl 并修改了上面显示的网站上的代码以与我的游戏一起使用：

```
 <applet code="org.lwjgl.util.applet.AppletLoader" 
        archive="lwjgl_util_applet.jar" 
        codebase="." 
        width="640" height="480">

  <param name="al_title" value="Ham Blaster"> 
  <param name="al_main" value="org.newdawn.slick.AppletGameContainer"> 
  <param name="game" value="org.javagame.Game">

  <param name="al_jars" value="racegame.jar, lwjgl.jar, slick.jar"> 

  <param name="al_windows" value="windows_natives.jar"> 
  <param name="al_linux" value="linux_natives.jar"> 
  <param name="al_mac" value="macosx_natives.jar"> 

  <param name="separate_jvm" value="true"> 
</applet> 
```

我检查了我的 lwjgl 里面是否有一个使用 winrar 的 AppletLoader 类，因为错误说它找不到它，我进入 lwjgl_util_applet.jar 并找到以下内容：AppletLoader$1.class,AppletLoader$2.clas... to.. .AppletLoader$6.class 和 AppletLoader，这意味着 AppletLoader 在那里，那为什么我会收到错误消息？

# cygwin - ZSH 历史增量搜索向后缩进光标

> ID：14244335
> 
> 赞同：0
> 
> 时间：2013-01-09T18:49:12.810
> 
> 标签：cygwin, zsh, rxvt

我今天刚刚开始将 ZSH 与 Cygwin/rxvt 一起使用（以及默认安装的 oh-my-zsh），我注意到反向历史搜索有一个小怪癖，这让我很困扰。搜索功能工作正常，但输入搜索会使光标缩进一点：

![jmullin-win7 > {underlined}mkdir blah{/underlined}](../Images/789dcd773408be89feef36215d120e89.png)

这本身并没有真正的问题，但是如果我执行该命令，它将保持缩进。此外，如果我取消搜索，光标在之后保持缩进：

![jmullin-win7 > {空白}{光标}](../Images/b8b5567585a6c465435ac0fe53624a3a.png)

如果必须，我可以忍受这个，但我想知道是否有人知道可能导致这种情况的原因？考虑到所涉及的变量数量（Cygwin、rxvt、zsh、oh-my-zsh 等），以及我对 zsh 的总体了解程度，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:17:00.503

它看起来很像[这里](https://stackoverflow.com/questions/14049870/zsh-rprompt-weird-space)或[这里](https://stackoverflow.com/questions/11916064/zsh-tab-completion-duplicating-command-name)的问题：您在提示中添加了颜色，但忘记告诉 zsh 这些序列没有宽度。

# c# - 有没有办法通过反射找到方法中调用了哪些方法？

> ID：14244341
> 
> 赞同：1
> 
> 时间：2013-01-09T18:49:39.957
> 
> 标签：c#, .net

我正在构建一个 v4.5 C#/.NET 应用程序，并且必须找到哪些方法依赖于某个方法。我想列出这些方法。

例如，如果我在一个类中有一个方法，并且该方法使用另一种方法：

```
public void Test()
{
    CallMethodA();
    CallMethodB();
} 
```

当我将方法传递`Test`给我的应用程序时，我希望它通过反射打印出 CallMethodA 和 CallMethodB。

到目前为止，我已经创建了这个：

```
MethodBase methodBase = typeof(TestClass).GetMethod("Test");
var instructions = MethodBodyReader.GetInstructions(methodBase);

foreach (Instruction instruction in instructions)
{
    MethodInfo methodInfo = instruction.Operand as MethodInfo;

    if(methodInfo != null)
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:15:26.710

[Mono.Cecil](http://www.mono-project.com/Cecil)将是一个很好的起点。[这个](https://stackoverflow.com/questions/1513319/mono-cecil-documentation-and-tutorials)问题有很多答案链接的教程。

但是，这只会给您静态分析，即编译时的方法调用。如果您有对接口或虚拟方法的方法调用，那么您将不知道在运行时实际调用了哪些其他方法。如果您想知道在运行时实际调用了哪些代码，您需要通过检测收集覆盖率信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:05:17.130

这非常类似于创建您自己的应用程序，例如[.NET Reflector](http://en.wikipedia.org/wiki/.NET_Reflector)或[dotPeek](http://www.jetbrains.com/decompiler/)。如果您想知道在类的方法中进行了哪些调用，则必须创建诸如 Reflector 之类的东西。另外，请查看[ILSpy](http://ilspy.net/)；它可能会有所帮助。

### 关于 ILSpy

> ILSpy 是开源的 .NET 程序集浏览器和反编译器。
> 
> 在 Red Gate 宣布 .NET Reflector 的免费版本将在 2011 年 2 月底停止存在之后，开发开始了。

# c# - SELECT * 不返回所有行，除非我 ORDER BY id DESC

> ID：14244344
> 
> 赞同：5
> 
> 时间：2013-01-09T18:49:50.257
> 
> 标签：c#, sql, linq, sql-server-2008-r2

应用程序出现“序列包含多个实体”错误。知道这通常是 Linq 中 .SingleOrDefault() 命令的结果，我开始调查。我可以验证生产服务器是否有许多重复关键字的实例，这就是我开始的地方。

我有以下关键字表：

*   id INT（非空，主键）
*   文本 NVARCHAR(512)
*   主动INT

如果需要，active 只是一种“启用/禁用”数据的方法。我正在使用 LINQ to SQL 并实现了以下方法：

```
public Keyword GetKeyword(String keywordText)
{
    return db.Keywords.SingleOrDefault(k => (k.text.ToUpper() == keywordText.ToUpper()));
} 
```

这个想法是我通过关联表附加关键字，以便多个对象可以引用相同的关键字。关键字表中不应有重复的文本条目。这不是在数据库上强制执行的，而是通过代码强制执行的。这可能不是最佳实践，但这是我目前最少的问题。所以当我创建我的对象时，我会这样做：

```
Keyword keyword = GetKeyword(keywordText)
if(keyword == null)
{
    keyword = new Keyword();
    keyword.text = keywordText;
    keyword.active = Globals.ACTIVE;
    db.Keywords.InsertOnSubmit(keyword);
}
KeywordReference reference = new KeywordReference();
reference.keywordId = keyword.id;
myObject.KeywordReferences.Add(reference);
db.SubmitChanges(); 
```

这段代码实际上是改写的，我使用存储库模式，所以所有相关代码都会更长。但是，我可以向您保证，代码按预期工作，因为我已经对其进行了广泛的测试。问题似乎发生在数据库级别。

所以我在我的测试数据库上运行了一些测试和手动查询，发现我在测试中传递的关键字不在数据库中，但是如果我执行 JOIN，我看到它是。所以我更深入地挖掘并选择手动扫描整个列表：

```
SELECT * FROM Keyword 
```

返回 737 个结果。我决定不想全部查看，所以我按文本订购并获得 737 个结果。我寻找我最近添加的词，它没有出现在列表中。

感到困惑的是，我查找了与我最近处理的对象相关联的所有关键字 ID，并看到一些 ID 超过 1,000（ID 设置为自动递增 1）。知道我从来没有真正删除过一个关键字（因此是“活动”列），所以从 1 到至少超过 1,000 的所有 id 都应该存在，我做了另一个查询：

```
SELECT * FROM Keyword ORDER BY id 
```

返回 737 个结果，最大 ID 停止在 737。所以我尝试：

```
SELECT * FROM Keyword ORDER BY id DESC 
```

返回 1308 行

如果没有主键或唯一标识符，我以前见过这样的差异，但我已经确认 id 列实际上是两者。我真的不知道从哪里开始，我现在还有一个额外的问题，即生产中的大约 4,000 多个重复的关键字，以及引用每个不同实例的更多对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T14:19:20.050

如果您以某种方式可以获取所有数据，那么您的表很好，但索引已损坏。

尝试在您的表上重建索引：

```
ALTER INDEX ALL ON Your.Table
REBUILD WITH (FILLFACTOR = 80, SORT_IN_TEMPDB = ON, STATISTICS_NORECOMPUTE = ON); 
```

在极少数情况下，如果您的硬盘由于断电而无法写入数据，您可能会看到此类错误。Chkdsk 应该有帮助

# javascript - 如何将我的 javascript 函数的更新存储在 cookie 中？

> ID：14244353
> 
> 赞同：-1
> 
> 时间：2013-01-09T18:50:15.930
> 
> 标签：javascript, html, cookies

我已经制作了一个用于在表格中添加行并将信息存储在单元格中的功能。但是当我刷新页面时，所有更新都消失了。我知道这可以用 php 解决，但我不能使用 php，因为这是一个学校项目，我只能使用 javascript 和 cookie。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:53:56.763

试试[jquery.cookie](https://github.com/carhartl/jquery-cookie)插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:55:49.427

你应该使用这个：

```
document.cookie = "cookie_name=cookie_value"; 
```

例子：

```
document.cookie = "cell_1_1=hello"; 
```

# css - 在 CSS 中，如何根据同一 div 的级别为同一 div 赋予两种样式 列表？

> ID：14244355
> 
> 赞同：1
> 
> 时间：2013-01-09T18:50:30.893
> 
> 标签：css, html

我正在使用嵌套菜单，并且相同的类出现在树的两个级别上，但我需要在较低级别中以不同的方式表示。任何想法我怎么能做到这一点？我已经搜索了一段时间并尝试了许多不同的解决方案，但均无济于事。这是我的 HTML 和最近的尝试：

```
<ul class="topnav">
  <li><h3 class="toggle_action"> Meetings</h3>
    <ul class="div_toggle">
      <li><h3><a href="/index">Home</a></h3></li>
      <li><h3 class="toggle_action"> Attend</h3> // <-- same div as line 2 but needs different formatting
        <ul class="div_toggle"> etc... 
```

并尝试修复 CSS：

```
.toggle_action {               /// the top-level format for the div with blue text
color:#5376c5;
}
ul.topnav ul li {             /// the general <ul> formatting for the secondary level
color: #999;
}
.toggle_action ul ul li {     /// my attempt to make the div appear in gray on second level
color:#999; 
} 
```

任何提示将非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:56:46.443

您的最后一个 CSS 样式永远不会存在于 HTML 中；没有`<h3 class="toggle_action">`孩子。

我想你的意思是：

```
.toggle_action {             
   color:#5376c5;
}
ul.topnav ul li {            
   color: #999;
}
ul ul li .toggle_action {   
   color: #999; 
} 
```

# javascript - Twitter Bootstrap (v2.2.1) 下拉链接在移动设备上不起作用

> ID：14244357
> 
> 赞同：5
> 
> 时间：2013-01-09T18:50:42.770
> 
> 标签：javascript, jquery, mobile, twitter-bootstrap

我有一个 Twitter Bootstrap (v2.2.1) 可折叠导航栏和下拉按钮。它们在我的桌面浏览器中工作得非常愉快和快乐，而且如果我将桌面浏览器窗口的大小调整到移动大小，它们也能愉快地工作。

但是在移动设备上，当您单击下拉菜单时会打开下拉菜单，但单击下拉菜单中的任何链接只会导致下拉菜单关闭而无需点击链接。

这似乎与[其他 SO question](https://stackoverflow.com/questions/9213473/twitter-bootstrap-2-navbar-submenu-links-do-not-work)类似，但解决方案是将它们移到`data-toggle="dropdown"`我已经拥有它们的地方。

这是下拉按钮页面上的 html：

```
<html>
<head>
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" />
</head>
<body>
<div class="btn-group">
    <a class="btn btn-primary" href="link1.php">
        Dropdown button
    </a>
    <a class="btn btn-primary dropdown-toggle" href="#" data-toggle="dropdown">
        <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li class="nav-header">Recent</li>
        <li><a href="http://google.com">Google</a></li>
        <li><a href="http://bing.com">Bing</a></li>
    </ul>
</div>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap.js"></script>
<script type="text/javascript">
    /**
     * Twitter Bootstrap JQuery
     */
    //!function ($) {
        $(function () {
            $('.dropdown-toggle').dropdown();
        });
    //}
</script>
</body>
</html> 
```

我在 Mobile Opera、Mobile Firefox 和默认的 android 浏览器中的 android 手机上对其进行了测试。

![在此处输入图像描述](../Images/d18db66bf7ee08f382b0aaf237e2e0fe.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-26T17:44:59.227

我已将其追踪到 Bootstrap 2.2.1 中的一个错误，即[2.2.2](https://github.com/twitter/bootstrap/wiki/Changelog)状态的更改日志：

> **下拉**菜单：为移动设备上的下拉菜单添加了临时修复，以防止它们提前关闭。

如果我将我网站上的 bootstrap.js 从 v2.2.1 交换到 v2.2.2，那么按钮就会开始工作。

所以现在，如果我使用最新的 v2.2.2 Bootstrap在[jsFiddle上查看此代码，那么它可以工作。](http://jsfiddle.net/icc97/eyv9v/)

```
<html>
<head>
<link rel="stylesheet" href="http://twitter.github.com/bootstrap/assets/css/bootstrap.css" />
</head>
<body>
<div class="container">
<div class="btn-group">
    <a class="btn btn-primary" href="link1.php">
        Dropdown button
    </a>
    <a class="btn btn-primary dropdown-toggle" href="#" data-toggle="dropdown">
        <span class="caret"></span>
    </a>
    <ul class="dropdown-menu">
        <li class="nav-header">Recent</li>
        <li><a href="http://google.com">Google</a></li>
        <li><a href="http://bing.com">Bing</a></li>
    </ul>
</div>
</div>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/jquery.js"></script>
<script type="text/javascript" src="http://twitter.github.com/bootstrap/assets/js/bootstrap.js"></script>
<script type="text/javascript">
        $(function () {
            $('.dropdown-toggle').dropdown();
        });
</script>   
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T19:08:41.940

我花了很多时间研究 BS 3.0.2 上的这个错误，甚至最初的开发人员似乎也将这个问题作为 iOS 6.1.3 问题关闭了。至于显示在下一个对象后面的下拉导航，iOS 6.1.3 z-index 出于某种原因被覆盖。因为我非常接近启动我的新网站，所以我不想重新设计它。我通过在

`<nav class="navbar navbar-default" role="navigation" style="z-index:1000;">`.

这似乎也解决了其他一些问题。由于它已关闭，我无法在此处发布我的解决方案[https://github.com/twbs/bootstrap/issues/10027](https://github.com/twbs/bootstrap/issues/10027)

希望这可以帮助其他人节省一些时间，头痛和头发。

# mysql - MySQL DEFAULT CURRENT_TIMESTAMP 不适用于时区？

> ID：14244359
> 
> 赞同：0
> 
> 时间：2013-01-09T18:50:44.010
> 
> 标签：mysql, timezone, timestamp

我的本地 MySQL 服务器有一个奇怪的问题。我有一个表，其 created_at 时间戳列默认设置为 CURRENT_TIMESTAMP。我读过的所有内容都表明这应该以 UTC 存储时间，然后将其转换回本地时间以进行显示。但是，它无法正常工作。我不确定它是否在显示屏上搞砸了或什么，但是当我读出时间戳时，它给了我 GMT 时间，而不是调整我当地的时区。这不是什么大问题，只是 NOW()*给*了我当地时间，所以我无法正确比较它们。我觉得我可能错过了一些愚蠢的东西，但是这里发生了什么？

如果重要的话，我在 64 位 Windows 8 下运行 MySQL 5.5.24（不幸的是）。

编辑：

更多地戳它显示，当我手动添加行时，时间戳工作正常；只是来自我的 PHP 的行很糟糕。我猜 PHP 连接出于某种原因必须覆盖默认时区。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:53:54.500

您是否加载了时区数据？

[http://www.geeksengine.com/article/populate-time-zone-data-for-mysql.html](http://www.geeksengine.com/article/populate-time-zone-data-for-mysql.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:49:20.730

啊哈！我的 PHP 服务器和我的 MySQL 服务器使用不同的时区。需要将 date.timezone = America/New_York 添加到我的 php.ini 文件中。

# php - 在不刷新页面的情况下将 javascript 变量转换为 php 变量

> ID：14244363
> 
> 赞同：0
> 
> 时间：2013-01-09T18:50:55.560
> 
> 标签：php, javascript, html

使用我拥有的代码，我可以回显：`<a id='test'>` 它显示输入的内容，但是我需要将其`<a id='test'>`转换为变量，以便可以将其用于 mysql 查询等。这可能吗？

```
<script type="text/javascript">

   function email(){
   var input = document.getElementById('input').value;
   document.getElementById('text').innerHTML = input;
 }
</script>

<html>
  <p><input type='text' id='input' value='' />
    <input type='button' onclick='email()' value='submit'/></p>
</html>

<?php
    $info="<a id='text'>"//make this a variable;
    echo $info;
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T18:57:59.130

[将 AJAX 与 jQuery 结合使用](http://api.jquery.com/jQuery.ajax/)将帮助您对服务器进行简单的调用，而无需重新加载页面。然后，您可以将任何变量发送到 PHP 文件，该文件将它们存储在您的数据库中。

# sql - 用于查找不同子字符串的 SQL 查询

> ID：14244367
> 
> 赞同：0
> 
> 时间：2013-01-09T18:51:13.163
> 
> 标签：sql, regex, mysqli

我有一个表，其中有一列包含字符串，其中前两个字母是国家标识符（US、CN、RU 等），接下来的 3 个字符是我要捕获的标识符。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T18:54:23.507

你试过这个吗？

```
SELECT SUBSTRING(column, 3, 3) ... 
```

这是[SQLFiddle](http://sqlfiddle.com/#!2/08c34/1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T18:55:05.940

```
SELECT SUBSTRING(column, 1, 2) [country]
     , SUBSTRING(column, 3, 3) [identifier]
FROM table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T18:55:23.717

```
SELECT SUBSTRING(field, 3, 3) from table; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T18:55:31.560

从表中选择子字符串（列，3,3）

# sql-server - SSRS 计数不同字段！B.value 其中字段！A.value =

> ID：14244368
> 
> 赞同：17
> 
> 时间：2013-01-09T18:51:17.020
> 
> 标签：sql-server, reporting-services

我有两个表格的报告。第一个表是客户列表，详细说明了属于三个类别的每个客户，每个客户都有不同的项目。SQL 将 client_table 与 client_items 表连接起来（每个客户端可以有多个项目），SQL 结果如下所示：

```
Type    ClientID    ItemID
A       1           1
A       3           1
A       3           2
B       2           1
B       4           3
C       5           2 
```

我的第二个表将返回来自各种类型组合的不同 ClientID 的计数：

*   总计 (A+B+C) - 我已经弄清楚了`=CountDistinct(Fields!ClientID.Value,"datasource1")`

*   类型 B+C - 类型为 B 或 C 的不同 ClientID

*   类型 C - 类型为 C 的不同 ClientID

我希望这很清楚，如果不让我知道我需要添加什么来清除它。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-09T19:21:21.997

`CountDistinct()`计算非空值，因此您可以使用表达式将那些您不想计算的值清空，并执行类似于您的第一个值的操作。

B+C 型：

```
=CountDistinct
(
  IIf
  (
    Fields!Type.Value = "B" or Fields!Type.Value = "C"
    , Fields!ClientId.Value
    , Nothing
  )
  , "datasource1"
) 
```

C型：

```
=CountDistinct
(
  IIf
  (
    Fields!Type.Value = "C"
    , Fields!ClientId.Value
    , Nothing
  )
  , "datasource1"
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-24T06:19:57.567

```
=Sum(CountDistinct(Fields!UserName.Value,"IssueDate7")) 
```

这里 Username 是行组， Issuedate7 是列组

问候

怜悯小号

# actionscript-3 - AS3 多点触控结束触控错误

> ID：14244372
> 
> 赞同：0
> 
> 时间：2013-01-09T18:51:44.933
> 
> 标签：actionscript-3, flash, air

我有一些适用于多点触控的 AS3 代码，但我有一个小问题，这是我的 eventListners

```
 private function onTouchBegin( e:TouchEvent ):void
    {
        //Move the touch locations
        //touchX = e.stageX;
        //touchY = e.stageY;
        m_oTouchIDs[e.touchPointID] = new Point(e.stageX, e.stageY);
    }

    private function onTouchMove( e:TouchEvent ):void
    {
        //touchX = e.stageX;
        //touchY = e.stageY;
        var p:Point = m_oTouchIDs[e.touchPointID] as Point;
        p.x = e.stageX;
        p.y = e.stageY;
        //removeEventListener( TouchEvent.TOUCH_MOVE, onTouchMove );
    }

    private function onTouchEnd( e:TouchEvent ):void
    {
        //touchX = -100;
        //touchY = -100;

        delete m_oTouchIDs[e.touchPointID]; // release
    } 
```

现在如果我将手指放在按钮上，它会起作用，但是如果我松开手指，它仍然认为我的手指正在触摸那个按钮，知道为什么我的删除功能不起作用吗？如果您想要更多代码，请询问

帆布

# jenkins - cloudbees jenkins 和 soasta cloudtest 上的移动 ci

> ID：14244373
> 
> 赞同：1
> 
> 时间：2013-01-09T18:51:46.423
> 
> 标签：jenkins, xcodebuild, cloudbees

我正在遵循[此博客文章](http://blog.cloudbees.com/2012/12/mobile-builds-with-jenkins-in-cloud.html)中概述的做法，其中我的 xcode 项目的 .ipa 存档由 CloudBees Jenkins 作业在从属设备上构建。

从站现在在我的 Jenkins 配置中显示为一个节点，并且当作业运行时，xcode 项目会从 CloudBees 正确下载。但是，该作业在 /Applications/xcode.app 中创建文件夹时遇到问题。我可以使用一些帮助来排除以下堆栈跟踪：

```
Started by user Wil Pannell
Building remotely on mobile-slave in workspace /Users/WPANNELL/jenkins/workspace/ios-mobile-image-browser
Copied 275 artifacts from "gwt-mobile-image-browser" build number 3
Unable to access upstream artifacts area /home/ventana/hudson_home/jobs/gwt-mobile-image-browser/modules/com.ventana.gwt$mobilebrowser/builds/2013-01-07_20-08-56/archive. Does source project archive artifacts?
Working directory is /Users/WPANNELL/jenkins/workspace/ios-mobile-image-browser/ios/VentanaMobileBrowser.xcodeproj.
[VentanaMobileBrowser.xcodeproj] $ /usr/bin/xcodebuild -version
Xcode 4.5.2
Build version 4G2008a
Fetching marketing version number (CFBundleShortVersionString) from project.
[VentanaMobileBrowser.xcodeproj] $ /usr/bin/agvtool mvers -terse1
No marketing version found (CFBundleShortVersionString).
Marketing version (CFBundleShortVersionString) found in project configuration: .
Fetching technical version number (CFBundleVersion) from project.
[VentanaMobileBrowser.xcodeproj] $ /usr/bin/agvtool vers -terse
No marketing version found (CFBundleVersion)
Technical version (CFBundleVersion) found in project configuration: .
Updating marketing version (CFBundleShortVersionString) to: 2.2.4
[VentanaMobileBrowser.xcodeproj] $ /usr/bin/agvtool new-marketing-version 2.2.4
Setting CFBundleShortVersionString of project project to: 
    2.2.4.

/Applications/Xcode.app/Contents/Developer/usr/bin/agvtool: line 319: project.pbxproj/project.pbxproj.new1: Not a directory
mv: rename project.pbxproj/project.pbxproj.new1 to project.pbxproj/project.pbxproj: Not a directory
Updating technical version (CFBundleVersion) to: 2.2.4
[VentanaMobileBrowser.xcodeproj] $ /usr/bin/agvtool new-version -all 2.2.4
Setting version of project project to: 
    2.2.4.

/Applications/Xcode.app/Contents/Developer/usr/bin/agvtool: line 139: project.pbxproj/project.pbxproj.new1: Not a directory
/Applications/Xcode.app/Contents/Developer/usr/bin/agvtool: line 140: project.pbxproj/project.pbxproj.new2: Not a directory
/Applications/Xcode.app/Contents/Developer/usr/bin/agvtool: line 141: project.pbxproj/project.pbxproj.new3: Not a directory
Also setting CFBundleVersion key (assuming it exists)

/Applications/Xcode.app/Contents/Developer/usr/bin/agvtool: line 145: project.pbxproj/project.pbxproj.new4: Not a directory
mv: rename project.pbxproj/project.pbxproj.new4 to project.pbxproj/project.pbxproj: Not a directory
rm: project.pbxproj/project.pbxproj.new1: Not a directory
rm: project.pbxproj/project.pbxproj.new2: Not a directory
rm: project.pbxproj/project.pbxproj.new3: Not a directory

Marketing version (CFBundleShortVersionString) used by Jenkins to produce the IPA: 2.2.4
Technical version (CFBundleVersion) used by Jenkins to produce the IPA: 2.2.4
Going to invoke xcodebuild:target: VentanaMobileBrowser, sdk: iphoneos, project: DEFAULT, configuration: Debug, clean: NO, symRoot: DEFAULT, configurationBuildDir: DEFAULT
[VentanaMobileBrowser.xcodeproj] $ /usr/bin/xcodebuild -target VentanaMobileBrowser -sdk iphoneos -configuration Debug build DSTROOT=. clean install
Build settings from command line:
    DSTROOT = .
    SDKROOT = iphoneos6.0

xcodebuild: error: 'project.pbxproj' is not a project file.
Build step 'XCode' marked build as failure
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T23:34:17.337

我的 jenkins xcode 配置不正确。我在为 Xcode 项目目录保留的字段中指定了 Xcode 项目文件。如果我遇到更多问题，我会在这里发帖。

# android - 没有互联网连接的 webView loadData

> ID：14244386
> 
> 赞同：0
> 
> 时间：2013-01-09T18:52:35.457
> 
> 标签：android, webview

还有更多这样的问题，但没有人解决我的问题：

我正在尝试将字符串加载到 webView 中。当我有互联网连接时，一切正常。当没有互联网连接时，内容不会显示。我这样做：

```
WebView wb = (WebView) findViewById(R.id.webView1);
wb.loadData("Lorem ipsum dolor sit amet",  "text/html", "utf-8"); 
```

这些是我在 Manifest.xml 文件中请求的权限：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>
<uses-permission android:name="android.permisson.ACCESS_WIFI_STATE"/> 
```

正如我所说，它适用于互联网连接，并且在没有互联网连接时不会加载内容。我需要做什么才能让 webView 在没有互联网连接的情况下工作。我的目标是 Android 3.2，最低版本为 2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:58:20.140

Edit:

You could create your html or txt file in your assets directory and load that file:

```
webView.loadUrl("file:///android_asset/filename.html"); 
```

[Source](https://stackoverflow.com/a/5749641/480415)

Try loadDataWithBaseURL:

> ```
> String html = "<html><body>Hello, World!</body></html>";
> String mime = "text/html";
> String encoding = "utf-8";
> 
> WebView myWebView = (WebView)this.findViewById(R.id.myWebView);
> myWebView.getSettings().setJavaScriptEnabled(true);
> myWebView.loadDataWithBaseURL(null, html, mime, encoding, null); 
> ```

Code from: [https://stackoverflow.com/a/4543485/480415](https://stackoverflow.com/a/4543485/480415)

# asp.net - 从类后面的代码访问 asp.net 页面

> ID：14244390
> 
> 赞同：0
> 
> 时间：2013-01-09T18:52:53.117
> 
> 标签：asp.net, code-behind, page-lifecycle

这是出于学术目的，请不要回答“你为什么要这样做”

如果我有一个名为 Home.aspx 的页面，并且它在 Home.aspx.cs 后面有一个代码。

在 Home.aspx.cs 我有一些公共属性，例如

```
public string Name { get; set; } 
```

我有另一个页面叫做 Error.aspx

我可以从 Error.aspx.cs 中创建 Home.aspx.cs 的实例并访问 Name 属性吗？如果没有，为什么不呢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:58:52.480

> 我可以从 Error.aspx.cs 中创建 Home.aspx.cs 的实例并访问 Name 属性吗？如果没有，为什么不呢。

是的你可以...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T18:59:03.560

> 我可以从 Error.aspx.cs 中创建 Home.aspx.cs 的实例并访问 Name 属性吗？

是的，您可以*创建一个实例*，就像任何其他对象一样。你可以做：

```
Home h = new Home();
h.Name = "Hello; 
```

但它是一个***新实例***，里面没有用户特定的数据......换句话说：它不是用户看到的“真实”页面的实例

我猜你的下一个问题是 -*如果我`Error`从页面进入该`Home`页面，我可以访问这些属性吗？*简单的答案是否定的。

如果要在页面之间传递数据，则应使用**[Session](http://msdn.microsoft.com/en-us/library/ms178581%28v=vs.100%29.aspx)**对象、**[Cache](http://msdn.microsoft.com/en-us/library/system.web.caching.cache%28v=vs.71%29.aspx)**或其他类似概念。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T03:40:51.933

如果您在用户被重定向到错误页面后尝试从主页上的控件获取值，您也可以尝试使用 PreviousPage.FindControl() 方法...

```
TextBox txt = (TextBox)Page.PreviousPage.FindControl("SomeText"); 
```

或者

```
string str = (TextBox)Page.PreviousPage.FindControl("SomeText").Text; 
```

其中“SomeText”是您要从中读取的控件的 ID 值。

# jquery - 我无法解析 Jquery ajax JSON 响应

> ID：14244392
> 
> 赞同：0
> 
> 时间：2013-01-09T18:52:59.140
> 
> 标签：jquery, ajax, json, parsing, response

我正在尝试解析来自 AJAX 调用的 JSON 结果，但是由于服务器的限制，我只能获得一个大字符串。返回了几个元素，但是我需要消费的数据都被扔到了一个元素中。现在这是棘手的事情......如果我使用firebug，响应有一个JSON标签，一切看起来都像一个正确的JSON对象，但是当我尝试使用警报映射或查看结果时，我注意到它们是单引号而不是双引号引号。我也试过替换引号也无济于事。在这一点上，我非常难过。

```
the alert would print out something simular to this: [{'id':'2663','parent':'2663'},{'id':'2664','parent':'2664'},]

        $.ajax({
            url: myURL,
            type: 'GET',
            dataType: "json",
            complete: function(docData) {
                var docResults = docData.responseText;
                alert(docResults);
                $(docResults).each(function(i,val){
                    $.each(val,function(k,v){
                          console.log(k+" : "+ v);     
                    });
                });                
            }
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:13:10.220

解决这个问题的正确方法是在服务器上修复它，但是，有一种方法可以使用 dataFilter 回调在客户端修复它。

```
$.ajax({
  url: myURL,
  type: 'GET',
  dataType: "json",
  dataFilter: function(response) {

    // *** Note: this will have to be modified if quotes 
    // *** can be contained within the data. It doesn't appear as though
    // *** that is the case with the data you have provided. 

    return response
      // fix trailing comma
      .replace("},]","}]")
      // fix quotes
      .replace(/'/g,'"'));
  },
  success: function (response) {
    $.each(response,function(){
      console.log(this);
    });
  }
}); 
```

# xcode - 由于 UIBackgroundModes 关键问题，验证失败

> ID：14244395
> 
> 赞同：0
> 
> 时间：2013-01-09T18:53:16.793
> 
> 标签：xcode

在向应用商店提交应用时，验证失败并显示以下消息：“UIBackgroundModes 键包含无效值：”。我没有尝试在后台运行任何东西。我正在使用 AudioSoundServices 在应用程序中播放非常短的音频文件。我什至从 info.plist 中删除了密钥，但无济于事。

典型编码如下所示：

```
NSString *soundFileX = [[NSBundle mainBundle] pathForResource:@"sample" ofType:@"wav"];
AudioServicesCreateSystemSoundID((__bridge CFURLRef) [NSURL fileURLWithPath:soundFileX], &soundIDX);
AudioServicesPlaySystemSound(soundIDX); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T18:55:46.753

问题不是你的代码；它是 UIBackgroundModes 键的*Info.plist*设置（大概）。

我想 Apple 可能错误地描述了这个问题，他们真正想要的是让您使用例如 AVAudioSession 和 AVAudioPlayer 正确播放声音。

# database - 通过存储过程将值插入表中

> ID：14244396
> 
> 赞同：0
> 
> 时间：2013-01-09T18:53:20.463
> 
> 标签：database, stored-procedures, db2

我正在尝试创建一个存储过程，当第一个表得到更新时将一些数据插入到表中。

解释：

我有两个相同的表，`Table1`并且`Table2`. 我希望当`table 1`获取一行更新时，该行的信息也被插入`Table2`。

我在想一个存储过程，但我不确定会怎样。

非常感谢。

顺便说一句，我正在使用 IBM DB2 for iSeries。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:20:23.773

您应该使用如下触发器：

```
CREATE TRIGGER MYTRIGGER
 AFTER INSERT ON TABLE1
 REFERENCING NEW ROW AS N
 FOR EACH ROW
 INSERT INTO TABLE2 (COL1, COL2)
  VALUES (N.COL1, N.COL2 ) 
```

有关更多信息，请参阅[有关 CREATE TRIGGER](http://pic.dhe.ibm.com/infocenter/db2luw/v9r7/index.jsp?topic=/com.ibm.db2.luw.sql.ref.doc/doc/r0000931.html&resultof=%2522%2563%2572%2565%2561%2574%2565%2522%2520%2522%2563%2572%2565%2561%2574%2522%2520%2522%2574%2572%2569%2567%2567%2565%2572%2522%2520)的信息中心。根据您要完成的工作，您还必须涵盖 UPDATE 和 DELETE。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:40:22.307

在 LUW 中，您可以通过添加必要的列并激活系统周期数据来使用时间功能。在这种情况下，您不需要触发器，因为 DB2 会为您完成所有工作。

但是，您使用的是 iSeries，并且该平台没有 db2 for z/OS 和 db2 for LUW 的最新功能。

（我知道这不是那个问题的答案，但我想分享它）

# javascript - FullScreen 在点击时有效，但在加载时无效

> ID：14244397
> 
> 赞同：3
> 
> 时间：2013-01-09T18:53:23.273
> 
> 标签：javascript, html

我正在尝试使用[此处](http://www.paulund.co.uk/javascript-full-screen-api)的代码来启动全屏模式。如果执行`onclick`，它会起作用，但不是`onload`。（我还发现`alert`在它之前设置一个将禁用它，除非`alert`立即单击它。）所以问题可能是有时浏览器没有“准备好”全屏。

那么当页面完全准备好时，最后触发的事件是什么？还是解决方案不同？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T18:55:36.987

全屏需要用户交互才能启动。这是一项安全功能。

想象一下，如果某个弹出窗口会迫使您进入全屏模式、锁定鼠标指针并在未经您许可的情况下开始播放广告。

在文档“fullscreenchange”事件处理程序中切换可见性的“启用全屏”链接或按钮似乎是一种实用的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:04:56.707

好吧，这可能有助于[全屏脚本](http://en.kioskea.net/faq/7645-script-to-automatically-display-webpage-in-fullscreen)

但我同意[LastCoder](https://stackoverflow.com/users/884862/lastcoder)

> 全屏需要用户交互才能启动。这是一项安全功能。
> 
> 想象一下，如果某个弹出窗口会迫使您进入全屏模式、锁定鼠标指针并在未经您许可的情况下开始播放广告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T23:58:46.790

我自己试图这样做，然后我来到这个网站[Fullscreen API Phishing Attacks](http://feross.org/html5-fullscreen-api-attack/)

基本上，如果允许全屏模式加载，我们不知道网站是否是真实网站……假网站可以有锁标志说它是安全的，等等。

# python - 如何在django模板中实现列表迭代

> ID：14244399
> 
> 赞同：0
> 
> 时间：2013-01-09T18:53:27.860
> 
> 标签：python, django, for-loop, django-templates

> **可能重复：**
> [在 Django 模板中动态获取列表项](https://stackoverflow.com/questions/8948430/get-list-item-dynamically-in-django-templates)

如何使用可变计数器获取列表项。目的是获取so项目而不是列表

不像这样

```
{% for item in listModels %} 
 {{ item | safe }} 

{% endfor %} 
```

所以工作

```
{% for i in listModels|length|get_range %} // get size list 

 {{ listModels.i | safe }}

{% endfor %} 
```

不工作

```
{% for i in listModels|length|get_range %} // get size list 

 {{ listModels.i | safe }}

{% endfor %} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:02:21.087

Django 模板不允许你这样做。我不会教你如何将你的逻辑排除在模板之外，因为我认为这是一种风格选择。但要明白这是最简单的方法。如果需要使用索引，可以将其作为`forloop`属性访问，如[文档中所述](https://docs.djangoproject.com/en/1.4/ref/templates/builtins/#for)。

如果你真的想要变量索引，你可以制作自己的自定义模板标签来做到这一点。但是，在这种情况下，我建议你使用更强大的模板语言，比如[Jinja2](http://jinja.pocoo.org/docs/)，而不是折磨 Django 模板语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:05:15.877

Django 模板语言为您提供了一种方法来做到这一点......

```
{% for item in listModels %} 
 {{ forloop.counter }} 

{% endfor %} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:38:04.230

我像执行以下操作一样进行了修复：

```
{{ listModelsData|lookup:i|lookAttribute:"author" }} -// this equal listModelsData[i].author - this code in python 

@register.filter
def lookAttribute (d, token):
     return getattr (d, token) 
```

# c++ - OpenGL Tessellation 回调未执行

> ID：14244406
> 
> 赞同：5
> 
> 时间：2013-01-09T18:53:57.900
> 
> 标签：c++, opengl, callback, tessellation

我使用[此处](http://www.partow.net/programming/templatecallback/)的示例将我的镶嵌回调移动到不同的类。

代码编译，但回调代码永远不会执行。

回调类：

```
template <class Class, typename ReturnType, typename Parameter>
class SingularCallBack
{
public:

    typedef ReturnType (Class::*Method)(Parameter);

    SingularCallBack(Class* class_instance, Method method)
        : class_instance_(class_instance),
        method_(method)
    {}

    ReturnType operator()(Parameter parameter)
    {
        return (class_instance_->*method_)(parameter);
    }

    ReturnType execute(Parameter parameter)
    {
        return operator()(parameter);
    }

private:

    Class* class_instance_;
    Method method_;
}; 
```

回调：

```
void MyClass::tessBegin(GLenum which)
{
    glBegin(which);
    cout << "BEGIN CALLBACK IS WORKING";
}

void MyClass::tessVertex(const GLvoid *data)
{
    // cast back to double type
    const GLdouble *ptr = (const GLdouble*)data;

    glVertex3dv(ptr);
    cout << "VERTEX CALLBACK IS WORKING";
} 
```

我正在注册它们的镶嵌功能：

```
int MyClass::TessellatePolys()
{
    GLUtesselator *tess = gluNewTess(); // create a tessellator
    if(!tess) return 0;  // failed to create tessellation object, return 0

    // register callback functions
    SingularCallBack<GLOrtho, void, GLenum>*BeginCallback;
    BeginCallback = new SingularCallBack<GLOrtho, void, GLenum>(this,&GLOrtho::tessBegin);
    gluTessCallback(tess, GLU_TESS_BEGIN, (void (CALLBACK *)())BeginCallback);

    SingularCallBack<GLOrtho, void, const GLvoid*>*VertexCallback;
    VertexCallback = new SingularCallBack<GLOrtho, void, const GLvoid*>(this,&GLOrtho::tessVertex);
    gluTessCallback(tess, GLU_TESS_VERTEX, (void (CALLBACK *)())VertexCallback);

    ... (do tessellation) ...

    return id;
} 
```

注册回调的方式有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-13T20:55:23.317

您正在将指向对象类型的指针转​​换为指向函数类型的指针（例如，“BeginCallback”到“void (CALLBACK *)()”）。这些类型是不兼容且不相关的。代码编译为 c 样式转换，无需任何类型检查。更重要的是，从 C++ 编译器的角度来看，BeginCallback 和 VertexCallback 是不同且不兼容的类型，函数 gluTessCallback 无法调用它们的重载 operator() - 它们是不同的成员函数。

# internet-explorer - 在 Internet Explorer 和 Google Chrome 中禁用滚动会使页面闪烁...

> ID：14244408
> 
> 赞同：1
> 
> 时间：2013-01-09T18:54:14.650
> 
> 标签：internet-explorer, scroll

我为网页制作了一个侧边栏菜单，该菜单从右侧滑动并将整个页面推向左侧。因此，为了使其最接近具有类似侧边栏菜单的本地移动应用程序 - 我必须禁用主要内容的滚动。所以，我用这段代码做到了：

```
/* remember the current scroll position */
self.pageScrolledTo = $(window).scrollTop();

/* and build a listener for the scroll event */
$(document).on('scroll',function (e) {
  e.stopPropagation();
  e.preventDefault();
  window.scrollTo(0, self.pageScrolledTo);
}); 
```

问题是在 Internet Explorer 和 Google Chrome 中 - 当我显示侧边栏并尝试滚动页面时 - 整个页面都会闪烁。就像它滚动了片刻，然后又回到了同一个位置。在 Firefox 上没问题 - 页面静止不动。

你能帮我解决这个问题吗？...

最后一件事：如果我用溢出来制作html和/或body标签：隐藏；- 在 Internet Explorer 和 Firefox 上，滚动条消失了，但它计算元素与旧右边缘的正确距离......至于某些元素，滚动条仍然存在...... ?? ...

# sql - IBM DB2 - 无法设置模式

> ID：14244409
> 
> 赞同：1
> 
> 时间：2013-01-09T18:54:16.627
> 
> 标签：sql, db2

我正在尝试使用命令 SET SCHEMA。但是，它似乎不起作用，我收到一条错误消息。如果我使用 Schema.Tablename，我可以使用该模式，但这可能很乏味。我与数据库完美连接，所有架构属性都出现在我的架构文件夹中。

错误信息如下：

------------------------------ 输入的命令 ------------------ ------------

```
SET SCHEMA RSBALANCE;
------------------------------------------------------------------------------
SET SCHEMA RSBALANCE
DB21034E  The command was processed as an SQL statement because it was not a 
valid Command Line Processor command.  During SQL processing it returned:
SQL0805N  Package "NULLID.SQLC2H20 0X41414141415A425A" was not found.  
SQLSTATE=51002

SQL0805N  Package "NULLID.SQLC2H20 0X41414141415A425A 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:48:09.383

DB2 的语法是（[信息中心链接](http://publib.boulder.ibm.com/infocenter/db2luw/v9r7/topic/com.ibm.db2.luw.sql.ref.doc/doc/r0001016.html)）：

```
SET SCHEMA = 'YOUR_SCHEMA' 
```

如果您使用的是命令行处理器（通过错误消息显示您是），则必须使用双引号（这很重要！）：

```
SET SCHEMA = "YOUR_SCHEMA" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T12:34:48.613

信息中心有关于[SQL0805N 错误](http://publib.boulder.ibm.com/infocenter/db2luw/v9r5/index.jsp?topic=/com.ibm.db2.luw.messages.sql.doc/doc/msql00805n.html)的文档。

这是相关的行动方案：

> 如果 DB2 实用程序需要重新绑定到数据库，数据库管理员可以通过在连接到数据库时从实例的 bnd 子目录发出以下 CLP 命令之一来完成此操作：
> 
> 对于 DB2 实用程序：
> 
> ```
> db2 bind @db2ubind.lst blocking all grant public 
> ```
> 
> 对于 CLI::
> 
> ```
> db2 bind @db2cli.lst blocking all grant public 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T16:49:06.060

原来我的机器缺少 IBM 的更新。这使我可以使用 bhamby 的命令正常工作。

谢谢大家的意见。

# jquery - 遍历每个元素并通过 jQuery 执行操作的最佳方法

> ID：14244411
> 
> 赞同：0
> 
> 时间：2013-01-09T18:54:28.520
> 
> 标签：jquery, loops

我试图弄清楚如何根据类名遍历元素，如果它有这个类则执行一些操作，如果没有，则执行其他操作。

到目前为止，请查看我的代码：

```
<script type="text/javascript">
jQuery(document).ready(function($) {
     var container = $('.container');

     container.each(function() {
          // if all list item has class of hidden then hide parent container
          container.hide();

          // if not all list item has class of hidden then show parent container
          container.show();
     });
});
</script>

<div class="container container1">
     <ul>
          <li class="item">item 1</li>
          <li class="item hidden">item 2</li>
          <li class="item">item 3</li>
          <li class="item">item 4</li>
     </ul>
</div>

<div class="container container2">
     <ul>
          <li class="item hidden">item 1</li>
          <li class="item hidden">item 2</li>
          <li class="item hidden">item 3</li>
          <li class="item hidden">item 4</li>
     </ul>
</div> 
```

从上面的代码中，想要的结果是 container2 应该完全隐藏，因为其中的所有列表项都有一个“隐藏”类。虽然 container1 显示，因为并非所有列表项都具有“隐藏”类。

正如您所看到的，我已经使用“each”函数来遍历容器，但我被困在如何实现它将检查特定类的每个列表项的位置。我的想法是在其中执行另一个每个功能？但不确定...

感谢您的关注。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:03:15.867

打代码高尔夫：

```
$('.container').each(function() {
    $(this).toggle(!!$('li:not(.hidden)',this).length);
}); 
```

[http://jsfiddle.net/mblase75/Ajjkc/](http://jsfiddle.net/mblase75/Ajjkc/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:00:09.770

```
container.each(function() {
    var $this = $(this);
    if ( $this.find('li:not(.hidden)').length ) {
        $this.show();
    } else {
        $this.hide();
    }
}); 
```

这是小提琴：http: [//jsfiddle.net/5AHQZ/](http://jsfiddle.net/5AHQZ/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:05:58.860

当隐藏项的数量等于所有列表项时，您可以进一步选择 with `container`as [context并隐藏容器。](http://api.jquery.com/jQuery/)否则显示。

```
$('.container').each(function() {
  var li1 = $('li', $(this)).length;
  var li2 = $('li.hidden', $(this)).length;
  if (li1 == li2)
    $(this).hide();
  else
    $(this).show();
}); 
```

请参阅[JSFiddle](http://jsfiddle.net/2rGnL/1/)进行测试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:01:29.440

你缺少的是这样的东西是你循环：

```
jQuery(document).ready(function($) {
     var container = $('.container > ul > li');

     container.each(function(index, element) {
          if($(element).hasClass('hidden')){
            $(element).css({display: 'none'});
          }
     });
}); 
```

我也修改了选择器。

问候，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T19:01:58.363

```
$('.container').each(function() {
    if ($(this).find('.item.hidden').length == $(this).find('.item').length)
        $(this).hide();
    else
        $(this).show();        
}); 
```

# html - 向左浮动 div 但下方没有更多文字？

> ID：14244412
> 
> 赞同：0
> 
> 时间：2013-01-09T18:54:37.823
> 
> 标签：html, css-float

这是我的CSS：

```
<style type="text/css">
    .column_n {
        margin: 20px;
        float: left;
        width: 250px;
    }
</style> 
```

问题是我在页面左侧有一列。但是在左侧的元素完成后，另一个 div 上的文本开始填充它的下方。像这样的东西：

```
xxxxxx yyyyyy
xxxxxx yyyyyy
xxxxxx yyyyyy
xxxxxx yyyyyy  
yyyyyyyyyyyyy
yyyyyyyyyyyyy 
```

我想要的是：

```
xxxx yyyy
xxxx yyyy
xxxx yyyy
     yyyy
     yyyy 
```

我怎样才能做到这一点？

谢谢！

html代码：

```
<div class="column_n"> 
    xxxxxxxxxxxxxxxxxxxxxxxxxxx 
</div>
<div> 
    yyyyyyyyyyyyyyyyyyyyyyyy 
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:07:07.410

按照 Roy 的建议更新为使用 inline，但是您需要使用 display:inline，而不是 display:inline-block；

这里有一个演示：http: [//tinkerbin.com/VAEFGoBm](http://tinkerbin.com/VAEFGoBm)

试试这个 ：

```
<style type="text/css">
    .column_n {
        margin: 20px;
        display:inline;
        width: 250px;
    }
 .column_b {
        margin: 10px;
        display:inline;
        width: 250px;
    }
</style>

<div class="column_n"> 
    xxxxxxxxxxxxxxxxxxxxxxxxxxx 
</div>
<div class="column_b"> 
    yyyyyyyyyyyyyyyyyyyyyyyy 
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:08:16.100

设置这个 -

```
display: inline-block; 
```

对于**两**列。使用 float: left 可能没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:20:28.183

HTML：

```
<div class="column_b"> 
    yyyyy yyy yyyyyyyyyyyyyyyy    ssssssssss sssssssssssss
</div>
<div class="column_c"> 
    ddddddddddd dddddddddd dddddddda assssssssssss
</div> 
```

CSS：

```
<style type="text/css">
   .column_c {
     width:100px;
    background-color:red;
overflow:hidden;
   float:left;
    }
 .column_b {
   float:left;
          width:100px;
overflow:hidden;

    background-color:blue;
    }
</style> 
```

这是你想要的一个jsfiddle：

[http://jsfiddle.net/YDFLV/62/](http://jsfiddle.net/YDFLV/62/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:40:11.953

试试这个：

```
<style type="text/css">
    .column_n {
        margin: 20px;
        float: left;
    }
    div{
        width: 250px;
        display: inline-block;
    }
</style> 
```

[http://jsfiddle.net/TeMWS/1/](http://jsfiddle.net/TeMWS/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T19:53:46.940

我是这样做的：

.column_n { 边距：20px; 向左飘浮; 宽度：250px；}

.column_b { 左：290px; 位置：绝对；}

# ruby - 使用 Ruby 在网页中搜索 HREF 值

> ID：14244418
> 
> 赞同：0
> 
> 时间：2013-01-09T18:55:07.307
> 
> 标签：ruby

我正在开发 3rd 方应用程序，我只能查看网页源`href`内容。从那里我必须只收集一些具有类似`/aems/file/filegetrevision.do?fileEntityId`. 是否可以？

***HTML*** **（HTML 的一部分）* *

```
<td width="50%">
<a href="/aems/file/filegetrevision.do?fileEntityId=10597525&cs=9b7sjueBiWLBEMj2ZU4I6fyQoPv-g0NLY9ETqP0gWk4.xyz">
screenshot.doc
</a>
</td> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:00:49.417

容易地：

```
require 'nokogiri'

html = '
<td width="50%">
<a href="/aems/file/filegetrevision.do?fileEntityId=10597525&cs=9b7sjueBiWLBEMj2ZU4I6fyQoPv-g0NLY9ETqP0gWk4.xyz">
screenshot.doc
</a>
</td>
'

doc = Nokogiri::HTML(html)
doc.search('a[href]').map{ |a| a['href'] } 
```

返回：

```
[
    [0] "/aems/file/filegetrevision.do?fileEntityId=10597525&cs=9b7sjueBiWLBEMj2ZU4I6fyQoPv-g0NLY9ETqP0gWk4.xyz"
] 
```

如果要过滤路径匹配，请使用以下内容：

```
pattern = Regexp.escape('/aems/file/filegetrevision.do?fileEntityId')
doc.search('a[href]').map{ |a| a['href'] }.select{ |href| href[ %r[^#{ pattern }] ] } 
```

再次返回：

```
[
  [0] "/aems/file/filegetrevision.do?fileEntityId=10597525&cs=9b7sjueBiWLBEMj2ZU4I6fyQoPv-g0NLY9ETqP0gWk4.xyz"
] 
```

此代码将返回文档中`href`所有`<a>`标签的参数。`href`在第二个示例中，它将按路径过滤它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:27:36.187

```
require 'open-uri'
source='http://www.example.com'
page = open(source).read
URI.extract(page,/.*\/aems\/file\/filegetrevision.do?fileEntityId=.*/) 
```

# c++ - 快速向量查找 C++

> ID：14244423
> 
> 赞同：1
> 
> 时间：2013-01-09T18:55:30.670
> 
> 标签：c++, lookup

有没有比蛮力余弦相似度更快的方法在 C++ 中执行向量查找？

我试图在一组向量**A**（大小 100000x4）中找到最接近**v （大小 1x4）的向量。**我有兴趣找到一种更快的方法来进行查找/搜索。目前，我正在为每个新的**v对****A**进行所有余弦相似度计算。

 ******另外，向量是指数学向量，而不是`std::vector`.

我已经尝试过的一件事是将查找的维度从 4D 减少到 1D。为此，我首先计算了搜索集中所有向量与某个参考向量之间夹角的余弦值。然后，对于要查找的每个向量，我计算它与同一参考向量之间的角度的余弦，然后通过角度的所有余弦进行查找（通过二进制搜索）。这看起来应该很好用，但由于某种原因，它的性能比蛮力搜索差。******

# php - 在 Cakephp 2.2.4 中使用 Containable 行为过滤结果

> ID：14244425
> 
> 赞同：0
> 
> 时间：2013-01-09T18:55:36.347
> 
> 标签：php, cakephp, cakephp-2.0

我正在使用可包含的行为，我的 find('all') 的结果是：

```
array(
    (int) 0 => array(
        'User' => array(
            'id' => '106',
            'email' => 'daje@daje.it',
            'pwd' => '0433c024cb08be13000d59a347e640482843f46f177e95749dc6599c259617fd3491dcb940b47693cbbc7f65a2cc5ef62deca2e600c1be133ad54170f7d1fbd1',
            'role_id' => '3',
            'active' => '1'
        ),
        'Lead' => array(
            'id' => '6'
        ),
        'Estimate' => array(
            (int) 0 => array(
                'lead_id' => '6',
                'Estimate' => array(
                    (int) 0 => array(
                        'TOT_count' => '2'
                    )
                )
            )
        )
    )
) 
```

我需要计算领先的估计数。

总数（2）是正确的，但我看到嵌套的“估计”数组，为什么？

我想得到的结果是：

```
array(
    (int) 0 => array(
        'User' => array(
            'id' => '106',
            'email' => 'daje@daje.it',
            'pwd' => '0433c024cb08be13000d59a347e640482843f46f177e95749dc6599c259617fd3491dcb940b47693cbbc7f65a2cc5ef62deca2e600c1be133ad54170f7d1fbd1',
            'role_id' => '3',
            'active' => '1'
        ),
        'Lead' => array(
            'id' => '6'
        ),
        'Estimate' => array(
          'TOT_count' => '2'
        )
    )
) 
```

这是发现：

```
$options = array(
                    'contain' => array(
                        'User',
                        'Estimate' => array(
                            'fields' => 'COUNT(*) AS TOT_count'                             
                        )   
                    ),
                    'conditions' => array('Lead.id' => 6),
                    'fields' => 'User.*',                           
                    'limit' => 1

                );

    debug($this->Lead->find('all', $options)); 
```

我该怎么做？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:58:54.533

当您使用“自定义”`AS`语句时，在您的情况下`TOT_count`，Cake 将始终将其放在名为`0`. `TOT_count`您可以通过在模型中定义为[virtualField](http://book.cakephp.org/2.0/en/models/virtual-fields.html)来避免这种情况。这样，它将直接嵌套在结果集中的模型名称下。

其次，它`lead_id`被强制检索，因为它是“需要”与`Lead`模型进行连接的。如果没有那条信息，它就无法正确检索所有数据。

# python - 是使用 Tornado 通过secure_cookie 存储“会话”数据的首选方法吗？

> ID：14244428
> 
> 赞同：4
> 
> 时间：2013-01-09T18:55:36.527
> 
> 标签：python, cookies, tornado, web-frameworks

例如，我登录到我的服务器。我想存储用户名之类的东西。最好的方法是：

```
self.set_secure_cookie('username', "foobar70") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:08:45.773

只是我的意见。安全 cookie 通常可以很好地安全存储数据并且工作正常，如果您需要存储小数据块，但是使用更大的 cookie 来回传递大量数据很烦人 :) 所以答案取决于您的数据量。

我通常在 Tornado 中使用这种会话实现，基于 redis [https://gist.github.com/1735032](https://gist.github.com/1735032)

# c# - NInject ConstructorArgument 与 lambda 表达式

> ID：14244435
> 
> 赞同：0
> 
> 时间：2013-01-09T18:56:31.487
> 
> 标签：c#, lambda, ninject, ninject-2

有没有办法使用 lambda 表达式而不是硬编码字符串来创建 ConstructorArgument 的实例来定义属性的名称？

像这样的东西：

```
var validator = Ioc.Kernel.Get<Validators.Security.UserGroupValidator>(new ConstructorArgument( x => x.ValidationDictionary, new ValidationDictionary()) 
```

就我而言，ValidationDictionary 在很多地方都不相同，因此，我不能使用提供者。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T08:00:17.667

您可以使用 ToConstructor 绑定，例如

[http://www.planetgeek.ch/2011/05/28/ninject-constructor-selection-preview/](http://www.planetgeek.ch/2011/05/28/ninject-constructor-selection-preview/)

```
 Bind<UsergroupValidator>().ToConstructor(_ => new Usergroupvalidator(new ValidationDictionary()); 
```

甚至可以按照博文中的定义注入验证字典。

# mysql - Minimize database in order to export all products from Magento

> ID：14244436
> 
> 赞同：1
> 
> 时间：2013-01-09T18:56:36.460
> 
> 标签：mysql, magento, phpmyadmin, wamp, php

I have a Magento 1.4.0.1 site and I want to export all the products in a CSV format. I tried running an Import/Export profile, but the max_timeout limit in `php.ini` is too low for the time it needs to run the operation. Since my provider doesn't allow me to set a higher max_timeout I have to copy the site into my local machine and run the profile from there.

My local machine runs on Windows 7 and WAMP 2.2

I copied all the files, but I'm having real trouble importing the database as it has 300MB. I configured my php.ini to have:

```
max_execution_time=3600
post_max_size=999M
memory_limit=999M
upload_max_filesize=999M
max_input_time=5000 
```

I restarted the WAMP server and Imported the dump through PhpMyAdmin, but I still get errors. So my plan is to reduce the size of the database in order to have a functional backend and all the products, and empty all unimportant tables. The problem is I don't know which ones are vital and which ones aren't. Can you suggest a list of tables that I have to keep or the ones that I have to empty?

Please note that since I'm running WAMP on windows I don't have the possibility use any SSH command line stuff.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:19:22.500

我将分享一个简单的 php 脚本，我通常用它来获取占用空间较小的 Magento DB 转储。

例如，您可以在 Magento 根目录中创建一个名为 tiny-dump.php 的文件，并将脚本粘贴到该文件中。稍后，如果您点击 url，您可以运行脚本：http: [//mydomain.com/tiny-dump.php](http://mydomain.com/tiny-dump.php) ...如果一切正常，您将在 var/ 目录中找到一个带有 DB 转储的 sql 文件。文件名将包含 {DB name}-{current date}.sql

为了您的信息，我使用了这篇文章中的一些想法：[http ://www.crucialwebhost.com/kb/article/log-cache-maintenance-script/](http://www.crucialwebhost.com/kb/article/log-cache-maintenance-script/)

如果您的主机提供已安装“mysqldump”，该脚本将起作用

这是脚本的链接：[https ://gist.github.com/4495889](https://gist.github.com/4495889)

这是脚本：

```
<?php
$xml = simplexml_load_file('./app/etc/local.xml', NULL, LIBXML_NOCDATA);

$db['host'] = $xml->global->resources->default_setup->connection->host;
$db['name'] = $xml->global->resources->default_setup->connection->dbname;
$db['user'] = $xml->global->resources->default_setup->connection->username;
$db['pass'] = $xml->global->resources->default_setup->connection->password;
$db['pref'] = $xml->global->resources->db->table_prefix;

function export_tiny() {

global $db;

$sqlFileName =  'var/' . $db['name'] . '-' . date('j-m-y-h-i-s') . '.sql';

$tables = array(
    'dataflow_batch_export',
    'dataflow_batch_import',
    'log_customer',
    'log_quote',
    'log_summary',
    'log_summary_type',
    'log_url',
    'log_url_info',
    'log_visitor',
    'log_visitor_info',
    'log_visitor_online',
    'index_event',
    'report_event',
    'report_compared_product_index',
    'report_viewed_product_index',
    'catalog_compare_item',
    'catalogindex_aggregation',
    'catalogindex_aggregation_tag',
    'catalogindex_aggregation_to_tag'
);

$ignoreTables = ' ';
foreach($tables as $table) {
    $ignoreTables .= '--ignore-table=' . $db['name'] . '.' . $db['pref'] . $table . ' ';
}

$dumpSchema = 'mysqldump' . ' ';
$dumpSchema .= '--no-data' . ' ';
$dumpSchema .=  '-u ' . $db['user'] . ' ';
$dumpSchema .= '-p' . $db['pass'] . ' ';
$dumpSchema .= $db['name'] .' > ' . $sqlFileName;

exec($dumpSchema);

$dumpData = 'mysqldump' . ' ';
$dumpData .= $ignoreTables;
$dumpData .=  '-u ' . $db['user'] . ' ';
$dumpData .= '-p' . $db['pass'] . ' ';
$dumpData .= $db['name'] .' >> ' . $sqlFileName;

exec($dumpData);
}

export_tiny(); 
```

已知问题：如果数据库密码包含特殊字符，有时脚本无法创建数据库转储。

希望，它是有帮助的！

# regex - Regex with Non-capturing Group

> ID：14244437
> 
> 赞同：4
> 
> 时间：2013-01-09T18:56:38.663
> 
> 标签：regex

I am trying to understand Non-capturing groups in Regex.

If I have the following input:

```
He hit the ball.  Then he ran.  The crowd was cheering!  How did he feel?  I felt so energized! 
```

If I want to extract the first word in each sentence, I was trying to use the match pattern:

```
^(\w+\b.*?)|[\.!\?]\s+(\w+) 
```

That puts the desired output in the submatch.

```
Match   $1
He      He  
. Then  Then
. The   The
! How   How
? I     I 
```

But I was thinking that using non-capturing groups, I should be able to get them back in the match.

I tried:

```
^(?:\w+\b.*?)|(?:[\.!\?]\s+)(\w+) 
```

and that yielded:

```
Match   $1
He  
. Then  Then
. The   The
! How   How
? I     I 
```

and ^(?:\w+\b.*?)|(?:[.!\?]\s+)\w+

yielded:

```
Match
He
. Then
. The
! How
? I 
```

What am I missing?

(I am testing my regex using RegExLib.com, but will then transfer it to VBA).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T19:03:55.757

针对字符串“foo”的简单示例：

```
(f)(o+) 
```

将产生`$1`= 'f' 和`$2`= 'oo';

```
(?:f)(o+) 
```

在这里，`$1`= 'oo' 因为您已明确表示不要捕获第一个匹配组。并且没有第二个匹配组。

对于您的情况，这感觉是正确的：

```
(?:(\w+).*?[\.\?!] {2}?) 
```

请注意，最外面的组是非捕获组，而内部组（句子的第一个词）是捕获组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:14:47.927

下面为边界条件构造一个非捕获组，并用捕获组捕获它之后的单词。

```
(?:^|[.?!]\s*)(\w+) 
```

从您的问题中不清楚您如何将正则表达式应用于文本，但是您的常规“拉出另一个直到没有更多匹配项”循环应该可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-18T21:15:53.463

这很有效并且很简单：

```
([A-Z])\w* 
```

VBA 需要这些标志设置：

```
Global = True 'Match all occurrences not just first
IgnoreCase = False 'First word of each sentence starts with a capital letter 
```

这里有一些额外的来之不易的信息：由于您的正则表达式至少有一个括号集，您可以使用 Submatches 仅提取括号中的值并忽略其余的值 - 非常有用。这是我用来获取子匹配的函数的调试输出，在您的字符串上运行：

```
theMatches.Count=5
Match='He'
   Submatch Count=1
   Submatch='H'
Match='Then'
   Submatch Count=1
   Submatch='T'
Match='The'
   Submatch Count=1
   Submatch='T'
Match='How'
   Submatch Count=1
   Submatch='H'
Match='I'
   Submatch Count=1
   Submatch='I'

T 
```

这是对返回上述内容的函数的调用：

```
sText = "He hit the ball.  Then he ran.  The crowd was cheering!  How did he feel?  I felt so energized!"
sRegEx = "([A-Z])\w*"
Debug.Print ExecuteRegexCapture(sText, sRegEx, 2, 0) '3rd match, 1st Submatch 
```

这是功能：

```
'Returns Submatch specified by the passed zero-based indices:
'iMatch is which match you want,
'iSubmatch is the index within the match of the parenthesis
'containing the desired results.
Function ExecuteRegexCapture(sStringToSearch, sRegEx, iMatch, iSubmatch)
   Dim oRegex As Object
   Set oRegex = New RegExp
   oRegex.Pattern = sRegEx
   oRegex.Global = True 'True = find all matches, not just first
   oRegex.IgnoreCase = False
   oRegex.Multiline = True 'True = [\r\n] matches across line breaks, e.g. "([\r\n].*)" will match next line + anything on it
   bDebug = True

   ExecuteRegexCapture = ""

   Set theMatches = oRegex.Execute(sStringToSearch)
   If bDebug Then Debug.Print "theMatches.Count=" & theMatches.Count

   For i = 0 To theMatches.Count - 1
      If bDebug Then Debug.Print "Match='" & theMatches(i) & "'"
      If bDebug Then Debug.Print "   Submatch Count=" & theMatches(i).SubMatches.Count
      For j = 0 To theMatches(i).SubMatches.Count - 1
         If bDebug Then Debug.Print "   Submatch='" & theMatches(i).SubMatches(j) & "'"
      Next j
   Next i

   If bDebug Then Debug.Print ""

   If iMatch < theMatches.Count Then
      If iSubmatch < theMatches(iMatch).SubMatches.Count Then
         ExecuteRegexCapture = theMatches(iMatch).SubMatches(iSubmatch)
      End If
   End If
End Function 
```

# amazon-web-services - SQS URL 签名:: 我们真的需要在每次发出查询请求时都签名吗？

> ID：14244438
> 
> 赞同：1
> 
> 时间：2013-01-09T18:56:39.517
> 
> 标签：amazon-web-services, amazon-sqs

我正在使用这个暂存器来玩 SQS - [http://aws.amazon.com/code/developertools/1254](http://aws.amazon.com/code/developertools/1254)，我发现每次我发出像向我的队列发送消息这样的请求时，我都需要对其进行签名然后执行..真的是这样吗？

我以为您只需要计算您的签名，然后在每次发送请求时重用该签名..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T17:41:36.387

是的，您需要签署每个请求。如果不签署每个请求，如果攻击者能够获取您的一个请求，那么他们将获得您的签名，然后能够发送、接收和删除您队列中的消息。这就是为什么消息正文和过期时间是要签名的字符串的一部分。

# plone - 一次在多个站点上更新克隆插件

> ID：14244443
> 
> 赞同：1
> 
> 时间：2013-01-09T18:57:13.767
> 
> 标签：plone

我有一个包含多个克隆站点的克隆实例。每当我升级 plone（例如从 4.2.1 到 4.2.3）时，也有一些插件需要更新。我自己的本地产品也需要不时更新。

我通常进入zmi quickinstaller文件夹一一重新安装。然而，在这个特定的 plone 实例中拥有 18 个 plone 站点意味着现在我必须手动更新每个站点的插件。

是否有可以自动更新产品/插件的产品或脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:37:03.787

插件[ftw.upgrade](https://github.com/4teamwork/ftw.upgrade)提供了一个视图 (@@manage-upgrades)，其中列出了此 plone 站点的所有插件升级（按依赖关系的顺序），您只需单击即可升级一个 plone 站点的所有插件。脚本 API 和多个站点的升级正在开发中。不支持升级plone版本，这是plone迁移工具的工作。

插件[collective.upgrade](https://github.com/collective/collective.upgrade)做了类似的工作，并且已经支持脚本，我认为它还可以升级克隆站点，而不仅仅是插件。

# javascript - Javascript code is not created inside MVC3 Razor foreach loop !!?

> ID：14244444
> 
> 赞同：0
> 
> 时间：2013-01-09T18:57:20.843
> 
> 标签：javascript, asp.net-mvc-3, razor

Here is code fragment:

```
@foreach (var item in Model)
{
     <table>
       <thead>
         <tr>
           <th>Column1</th>
           <th>Column2</th>
         </tr>
       </thead>
       <tbody>
         <tr>
           <td>Value1</td>
           <td>Value2</td>
         </tr>
       </tbody>
     <table>

     <script type="text/javascript">
         $(function () { $("table").highchartTable(); });
     </script>
} 
```

Why javascript code is not created inside MVC3 Razor foreach loop ? There must be multiple javasctipt codes created.

However, the resulting HTML doesnt have javascript at all.

Any ideas ??

Thank you.

# visual-c++ - c++ 运行时错误与 if 和 else 语句一起使用

> ID：14244446
> 
> 赞同：1
> 
> 时间：2013-01-09T18:57:25.873
> 
> 标签：visual-c++

所以这个程序应该根据你输入的百分比告诉你你的成绩，我基本上只使用 if 和 else 语句来编码它。该程序一直运行到 59%，然后当我输入高于该百分比的任何内容时，它就不起作用了。因为在程序中只是不会告诉我 59% 后的成绩。谢谢任何事情都会有帮助！！！

ps 我知道可能有一种更简单的方法可以编写这个程序，但我想练习 if 和 else 语句......

```
//
//exercise 1.
//you will enter in your percent and it will anounce your grade.
//create a program so that it will notify the user of their letter grade
//0-59 F 60-69 D 70-79 C 80-89 B 90-100 A
//a=user input
//For whatever reason the program seems to only work up to 59% and after that it doesn't work.

int a;
#include <iostream>
using namespace std;
int main()
{
cout<< "Enter in the percent of your grade and \n I will tell you your grade"<<endl;
cin>>a;
if(a==100)
{
    cout<<"you scored a perfect A";
}
else 
    if(a<=59)
    {
        if(a<0)
        {
            cout<<"your really stupid";
        }
        else
            cout<<"you failed";
    }
    else
        if(a>=60)
        {
            if(a<=69)
            {
                cout<<"You got a D";
            }
        }
        else
            if(a>=70)
            {
                if(a<=79)
                {
                    cout<<"you got a C";
                }
            }
            else
                if(a>=80)
                {
                    if(a<=89)
                    {
                        cout<<"you got a B";
                    }
                }
                else
                    if(a>=90)
                    {

                            cout<<"you got an A";

                    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:03:28.620

问题是您正在检查 a >= 60... 它是什么（假设 a = 75）。但是，它不会被任何其他条件语句捕获。通过代码中的以下注释更好地解释。

```
#include <iostream>
using namespace std;

int a;
int main()
{
cout<< "Enter in the percent of your grade and \n I will tell you your grade"<<endl;
cin>>a;
if(a==100)
{
    cout<<"you scored a perfect A";
}
else 
    if(a<=59)
    {
        if(a<0)
        {
            cout<<"your really stupid";
        }
        else
            cout<<"you failed";
    }
    else
        if(a>=60) // 75 >= 60
        {
            if(a<=69) // But 75 is > 69
            {
                cout<<"You got a D";
            }
        }
        // ONLY REACHES THIS POINT IF a < 60
        else
            if(a>=70)
            {
                if(a<=79)
                {
                    cout<<"you got a C";
                }
            }
            else
                if(a>=80)
                {
                    if(a<=89)
                    {
                        cout<<"you got a B";
                    }
                }
                else
                    if(a>=90)
                    {
                            cout<<"you got an A";

                    }
} 
```

这可能是一个更好的方法：

```
int main()
{
    cout<< "Enter in the percent of your grade and \n I will tell you your grade"<<endl;
    cin>>a;
    if(a==100)
    {
        cout<<"you scored a perfect A";
    }
    else 
    {
        if(a<=59)
        {
            if(a<0)
            {
                cout<<"your really stupid";
            }
            else
                cout<<"you failed";
            }
        else
        {
            if (a >= 60 && a <= 69)
            {
                cout << "D";
            }
            else if (a >= 70 && a <= 79)
            {
                cout << "C";
            }
            else if (a >= 80 && a <= 89)
            {
                cout << "B";
            }
            else
            {
                cout << "A";
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:04:19.593

我认为您在第一个 else 之后缺少括号。

试试这个：

```
//
//exercise 1.
//you will enter in your percent and it will anounce your grade.
//create a program so that it will notify the user of their letter grade
//0-59 F 60-69 D 70-79 C 80-89 B 90-100 A
//a=user input
//For whatever reason the program seems to only work up to 59% and after that it doesn't work.

int a;
#include <iostream>
using namespace std;
int main()
{
cout<< "Enter in the percent of your grade and \n I will tell you your grade"<<endl;
cin>>a;
if(a==100)
{
    cout<<"you scored a perfect A";
}
else
{ 
    if(a<=59)
    {
        if(a<0)
        {
            cout<<"your really stupid";
        }
        else
            cout<<"you failed";
    }
    else
        if(a>=60)
        {
            if(a<=69)
            {
                cout<<"You got a D";
            }
        }
        else
            if(a>=70)
            {
                if(a<=79)
                {
                    cout<<"you got a C";
                }
            }
            else
                if(a>=80)
                {
                    if(a<=89)
                    {
                        cout<<"you got a B";
                    }
                }
                else
                    if(a>=90)
                    {

                            cout<<"you got an A";

                    }

}
} // end main 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:13:38.027

在您的代码中，一旦您到达`if(a>=60)`，如果 的值`a`不小于 70，则不输出任何内容，并且代码退出条件，因为它找到了一个真实的条件。至于为什么你不能让它在 59 以上做任何事情，我不知道，因为它看起来应该可以工作。但是，通过将您的内部 if 块与其父块组合，您可以获得要检查的代码是否`a`在 10 个百分点的组内，如果它不在该组中，则继续下一个。以下是您将如何执行此操作的示例。

```
//
//exercise 1.
//you will enter in your percent and it will anounce your grade.
//create a program so that it will notify the user of their letter grade
//0-59 F 60-69 D 70-79 C 80-89 B 90-100 A
//a=user input
//For whatever reason the program seems to only work up to 59% and after that it doesn't work.

int a;
#include <iostream>
using namespace std;
int main()
{
  cout<< "Enter in the percent of your grade and \n I will tell you your grade"<<endl;
  cin>>a;
  if(a==100)
  {
      cout<<"you scored a perfect A";
  }
  else if(a<=59)
  {
      if(a<0)
      {
          cout<<"your really stupid";
      }
      else
      {
          cout<<"you failed";
      }
  }
  else if(a>=60 && a<=69)
  {
      cout<<"You got a D";
  }
  else if(a>=70 && a<=79)
  {
      cout<<"you got a C";
  }
  else if(a>=80 && a<=89)
  {
      cout<<"you got a B";
  }
  else if(a>=90)
  {
      cout<<"you got an A";
  }
} 
```

# asp.net-mvc-4 - 了解实体框架启用迁移和上下文

> ID：14244451
> 
> 赞同：3
> 
> 时间：2013-01-09T18:57:46.460
> 
> 标签：asp.net-mvc-4, entity-framework-5

我遇到[了](https://stackoverflow.com/questions/14145104/is-there-a-plural-issue-for-models-database-context-y-to-ies-in-mvc4-ef)一个模型与 Entity Framework 认为的当前版本不同步的问题，所以我清除了所有迁移并按照[这篇文章](https://stackoverflow.com/questions/11679385/reset-entity-framework-migrations)重新开始。

复位后。我去启用实体框架，它给出了这个错误。

> 在程序集“Proj”中发现了一种以上的上下文类型。要为 Proj.Models.UsersContext 启用迁移，请使用 Enable-Migrations -ContextTypeName Proj.Models.UsersContext。要为 Proj.Models.InjuriesContext 启用迁移，请使用 Enable-Migrations -ContextTypeName PamperWeb.Models.InjuriesContext。...对于我所有的情况

我能够启用第一个上下文用户，但是当我尝试启用另一个上下文时，我收到一条错误消息

> 已在项目“Proj”中启用迁移。要覆盖现有的迁移配置，请使用 -Force 参数。

显然，我对 MVC 和实体框架的工作方式还有很长的路要走。我在每个模型类中都设置了上下文。我应该只有一个上下文和那个上下文中的所有数据库集吗？如果是这样，这个上下文与哪个模型类文件有关吗？我当前的所有上下文都指向同一个数据库。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T08:29:33.627

在正常的应用程序中，您应该为所有模型类提供带有数据库集的单一上下文。上下文类应该在它自己的文件中。上下文构成了您的整个模型，并让您可以访问数据库。它提供了许多开箱即用的功能，但该功能仅适用于在您的上下文中注册的模型类。如果将模型类划分为单独的上下文，则在处理从不同上下文加载的实体时会失去一些开箱即用的功能。

# android - Painfully slow make with IDEA 12.0

> ID：14244452
> 
> 赞同：6
> 
> 时间：2013-01-09T18:57:50.583
> 
> 标签：android, intellij-idea

I love the new incremental Java compile in IDEA 12.0 but there seems to be a price to pay. Making now takes about twice as long as in 11.x, most of the time appearing to be spent

> Executing DEX

(according to the status bar).

I can take a 12.0 project, revert to 11.x and making is back to "normal speed" (approx 4 minutes vs 30 seconds).

I don't get this. AFAIK, IDEA (or Eclipse or any other IDE) is just shelling out to dx.jar to compile the Dalvik executable. If there was a problem with the ADT, it would affect 11.x equally.

OS is Win 7 Ultimate. 3.2GHz quad core with 16GB but I suspect that the issue is not related to OS or PC since 11.x is OK.

Any ideas? I'll log a bug with Jetbrains but wanted to see if anyone has more concrete info or workarounds? There's nothing so far on the Jetbrains bug tracker or fora that I can find.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-27T20:23:55.720

过去我遇到过几次这个问题，这一直是由于包含了一个在构建过程中挂起的全局库。

有一次是由于在构建 Android 项目时尝试执行 Python 库，因为我的 Android 项目中有一个 Python 文件，而 IntelliJ 决定将 Python 运行时库添加到我的项目依赖项中。

最近，当我在 Android 项目中有一个 gradle 文件时，Groovy 也发生了同样的事情。

对我来说，我只是从项目中删除了这些依赖项，问题就自行解决了。

在我的情况下，我通过强制杀死（kill -9）正在运行 make 的 java 进程发现了这一点。这导致 intellij 将错误转储到 IDE 中的 Messages 视图，我可以看到 groovy 正在尝试执行。

# java - How is the Comparable interface is marker interface, with its compareTo() method?

> ID：14244453
> 
> 赞同：0
> 
> 时间：2013-01-09T18:57:50.583
> 
> 标签：java, oop, terminology, comparable, marker-interfaces

How is the `Comparable` interface is marker interface, even though it defines a `compareTo()` method? Please explain detail.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T19:02:51.577

*标记界面*只是一种设计模式。因此，即使您阅读“X 是一个标记接口”，除了“X 是一个没有声明方法的接口”之外，这并没有真正的意义。

由于`Comparable<T>`只有一种方法，因此它不用作标记接口。

当您希望将数据附加到类型以便能够在特定情况下使用此数据时，标记接口很有用`Comparable`，而 用于提供有效接口的情况并非如此。

我什至不认为 javadoc 中使用标记接口的定义来描述空接口，例如`Serializable`（虽然不确定）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:07:41.513

它不是一个标记界面。Java 中的标记接口，例如 Serializable、Clonnable 和 Remote 用于向编译器或 JVM 指示某些内容；向编译器指示标志。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:09:54.507

Quoting [Wikipedia on *Marker interface pattern*](http://en.wikipedia.org/wiki/Marker_interface_pattern) (emphasis mine):

> [...] class implements a marker interface, and methods that interact with instances of that class test for the existence of the interface. Whereas a **typical interface specifies functionality** (in the form of method declarations) that an implementing class must support, a **marker interface need not do so**. The **mere presence of such an interface indicates specific behavior** on the part of the implementing class. Hybrid interfaces, which both act as markers and specify required methods, are possible but may prove confusing if improperly used.

That being said `Comparable<T>` *can* be called a marker interface, but it's confusing and I've never heard this before.

I can't imagine a class testing whether some object implements `Comparable<T>` without actually down-casting and calling `compareTo()`.

# c# - 如何存储 Switch 语句中的案例列表？

> ID：14244455
> 
> 赞同：1
> 
> 时间：2013-01-09T18:58:08.550
> 
> 标签：c#, arrays, winforms, loops, switch-statement

在我的程序中，我有一个列表框，当用户双击一个对象时，它会查看 switch 语句以查看应该发生的事件。随着列表开始变大，我很好奇是否有办法避免必须在 2 个位置维护对象列表（一次在添加到列表框的列表中，一次在 switch 语句中。有没有办法索引/读取/存储我的 switch 语句的各种案例，然后将它们作为对象添加到我的列表框中？

示例：（不起作用，只是一个理论）

```
Switch (n)
ForEach (Case c in Cases)
{
   arrayCases.Add(c);
}
listbox.Items.AddRange(arrayCases); 
```

编辑：

继续我现在的字典建议：

```
public void SetDictionary()
    {
       //add entries to the dictionary
        dict["cat"] = new Action(Cat);
        dict["dog"] = new Action(Dog);

        //add each dictionary entry to the listbox.
        foreach (string key in dict.Keys)
        {
            listboxTest.Items.Add(key);
        }                            
    }

     //when an item in the listbox is double clicked
     private void listboxTest_DoubleClick(object sender, EventArgs e)
     {
         testrun(listboxCases.SelectedItem.ToString());             
     }

     public void testrun(string n)
     {
         //this is supposed to receive the item that was double clicked in the listbox, and run it's corresponding action as defined in the dictionary.
         var action = dict[n] as Action action();
     } 
```

我相信我上面的代码大部分是正确的并且我理解它，但是操作行： var action = dict[n] as Action action();

显示一个错误，指出“操作”需要一个“;”。我这里的逻辑准确吗？如果是这样，为什么动作调用不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:06:18.220

`Dictionary<string, Action>`是避免的方法。`Dictionary.Keys`变成`ListBox.Items`.

`switch(n)` 变成

```
var action = dict[n] as Action
action(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T19:27:20.980

我建议将您的操作移动到单独的类中。为您的操作创建一个基类，如下所示。我为表单添加了一个字段，因为您可能必须与表单进行交互。如果需要，您还可以传入其他对象。

```
internal abstract class Operation
{
    protected readonly MyForm form = null;

    protected Operation(MyForm form)
    {
        this.form = form;
    }

    public abstract String DisplayName { get; }

    internal abstract void Execute();
} 
```

然后为每个操作派生一个类。

```
internal sealed class DoThis : Operation
{
    internal DoThis(MyForm form) : base(form) { }

    public override String DisplayName
    {
        get { return "Do this!"; }
    }

    internal override void Execute()
    {
        // Code to do this. You can use this.form to interact with
        // your form from this operation.
    }
}

internal sealed class DoSomethingElse : Operation
{
    internal DoSomethingElse(MyForm form) : base(form) { }

    public override String DisplayName
    {
        get { return "Do something else!"; }
    }

    internal override void Execute()
    {
        // Code to do something else.
    }
} 
```

现在您可以将所有操作添加到列表框中

```
this.lsitBox.Items.Add(new DoThis(this));
this.lsitBox.Items.Add(new DoSomethingElse(this)); 
```

并设置显示成员属性。

```
this.listBox.DisplayMember = "DisplayName"; 
```

最后在事件处理程序中执行选中的操作。

```
((Operation)this.listBox.SelectedItem).Execute(); 
```

这种模式在所有操作之间提供了清晰的分离，并使未来的扩展变得简单而干净。例如，`CanExecute`如果您必须检查某个操作当前是否可用，您可以将一个属性添加到所有操作。或者，如果您必须支持本地化，则可以轻松添加逻辑以在当前 UI 语言中显示操作名称。

另一个容易支持的场景是，如果您有一些所有操作共有的代码，例如日志记录、安全检查、性能测量等。

```
internal abstract class Operation
{
    protected readonly MyForm form = null;

    protected Operation(MyForm form)
    {
        this.form = form;
    }

    public abstract String DisplayName { get; }

    protected abstract void ExecuteCore();

    internal void Execute()
    {
        Logger.Log("Executing operation " + this.DisplayName);

        try
        {
            this.ExecuteCore();

            Logger.Log("Executing operation " + this.DisplayName + " succeeded.");
        }
        catch (Exception exception)
        {
            Logger.Log("Executing operation " + this.DisplayName + " failed.", exception);

            throw;
        }
    }
} 
```

请注意，您现在必须覆盖`ExecuteCore()`而不是`Execute()`.

最后一个想法 - 使用接口`IOperation`代替或与抽象基类结合使用也可能会有所帮助。这消除了所有操作都从同一个基类继承的需要，因为这有时可能不方便。但我省略了这一点，以免过度设计。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T19:02:35.653

是的，有一种方法可以通过制作 lambda 字典来做到这一点。

```
void Main()
{
  // set up your dictionary
  Dictionary<string,Action> myList = new Dictionary<string,Action> {
     { "one", () => { Console.WriteLine("One function"); } },
     { "two",  () => { Console.WriteLine("Two function"); }},
     { "three", () => { Console.WriteLine("Three function"); }}
  };

  // do a "switch" (that is invoke a function that corresponds to a name)
  myList["one"]();

  // loop the list of keys (that is get a list of all the names)
  foreach (string key in myList.Keys)
    Console.WriteLine(key);
} 
```

该程序的输出：

```
One function
one
two
three 
```

* * *

还要注意——你可以像这样动态地添加到这个“开关”中（这很酷，而且你不能用经典的 switch 语句来做。）

```
myList.Add("four",() => { Console.WriteLine("Four function is dynamic"); }); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-01-09T19:03:26.730

你不能*用普通代码枚举`case`。`switch`

您可以做的是将“动作名称”映射替换`switch`为“动作处理程序”，然后您将能够将此映射重用于动作名称列表框列表。有关示例，请参阅 Tilak 的答案。

*) 如果你真的很好奇，你可以列举`switch`. C# 代码被转换为 IL 并且 IL 可以用代码读取。因此，您可以为方法获取 IL，为 IL 编写（或获取现有的 - [Parser for C#](https://stackoverflow.com/questions/81406/parser-for-c-sharp)）解析器并在方法内部找到实现`switch`，选择所有情况。您甚至可以在构建时直接访问 C# 源代码 - 但它比 IL 解析更复杂。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-09T19:06:59.110

在我看来，您的交换机中的案例数量将会发生很大变化。如果这是真的，那么您可能需要考虑使用 switch 语句以外的机制。也许您想做一些像 Alexi Levenkov 建议的事情，然后迭代存储的动作名称列表并执行关联的处理程序。这样，您将避免必须将动作名称添加到动作映射，然后将其添加到开关。

# python - Python unittest - how can I add debugging information to a TestResult object?

> ID：14244463
> 
> 赞同：2
> 
> 时间：2013-01-09T18:58:45.557
> 
> 标签：python, unit-testing

I have some unittest code that runs a bunch of tests. Previously, when each test was run some information would get printed to stdout. This information would greatly assist in debugging in case the test failed. Now I would like to to write a more sophisticated program that invokes unittest and captures the results of the testing programmatically. It appears that unittest provides an object called TestResult which is meant to contain the output of tests. It has a list of all the errors, a list of all the failures, etc. I would also like to add my debugging output to this object so that I can access it programmatically later. Is this possible?

EDIT: Here is an example:

```
import unittest2

class DemoTest(unittest2.TestCase):
    def test_one(self):
        print "'grimelsome' attribute of 'smoxy' was set to 'blimpy'"
        self.assertTrue(True)

    def test_two(self):
        print "'smithereen' attribute of 'brouhaha' was set to 'False'"
        self.assertTrue(True)

if __name__ == '__main__':
    suite = unittest2.TestLoader().loadTestsFromTestCase(DemoTest)
    result = unittest2.TextTestRunner(verbosity=2).run(suite)

    # this is what I'd like to be able to do:
    for fail in result.failures:
        print what_would_have_gone_to_stdout 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-02T02:10:33.037

您只需要使用 TextTestRunner 缓冲区选项：

```
import unittest2

class DemoTest(unittest2.TestCase):
    def test_one(self):
        print "'grimelsome' attribute of 'smoxy' was set to 'blimpy'"
        self.assertTrue(True)

    def test_two(self):
        print "'smithereen' attribute of 'brouhaha' was set to 'False'"
        self.assertTrue(False)

if __name__ == '__main__':
    suite = unittest2.TestLoader().loadTestsFromTestCase(DemoTest)
    result = unittest2.TextTestRunner(verbosity=2, buffer=True).run(suite) 
```

在每次测试之前`TextTestResult`，运行程序使用的 将替换`sys.stderr`和`sys.stdout`用它自己的流，并且只有在测试失败时才会将内容发送到原始流，否则会丢弃它。

请注意，因为假`sys.std*`流在每次测试后都会发生变化，如果您想对日志输出执行相同的操作，则必须在替换 sys.sdt* 流之后、在每次测试之前添加日志处理程序或实现您自己的处理程序。

这是一个示例子类化`logging.StreamHandler`：

```
import logging
import sys
import unittest2

class DemoTest(unittest2.TestCase):
    logger = logging.getLogger('DemoTest')

    def setUp(self):
        self.logger.debug("setting up stuff and logging it...")

    def teardown(self):
        self.logger.debug("You won't see me")
        print "me neither"

    def test_one(self):
        self.logger.debug("'grimelsome' attribute of 'smoxy' was set to 'blimpy'")
        self.assertTrue(True)

    def test_two(self):
        self.logger.debug("'smithereen' attribute of 'brouhaha' was set to 'False'")
        self.assertTrue(False)

class TestHandler(logging.StreamHandler):

    def __init__(self):
        logging.Handler.__init__(self)

    @property
    def stream(self):
        """Use which ever stream sys.stderr is referencing."""
        return sys.stderr

if __name__ == '__main__':
    formatter = logging.Formatter('%(name)s - %(levelname)s - %(message)s')
    logger_handler = TestHandler()
    logger_handler.setFormatter(formatter)
    logger = logging.getLogger()
    logger.setLevel(logging.DEBUG)
    logger.addHandler(logger_handler)

    suite = unittest2.TestLoader().loadTestsFromTestCase(DemoTest)
    result = unittest2.TextTestRunner(
        verbosity=2, buffer=True, resultclass=TestResult
    ).run(suite) 
```

# c - Evaluating Random Number Generator as per Knuth [2, 41-79]

> ID：14244471
> 
> 赞同：0
> 
> 时间：2013-01-09T18:59:10.450
> 
> 标签：c, random, gettimeofday, knuth

I have created a random number generator using gettimeofday() function, in C. Now,I need to evaluate this using statistical or empirical methods developed by Knuth. I searched exhaustively for the same, but could not find a workable solution. Or I may be wrong. Please help me in evaluating this RNG according to the above standards.

```
#include <sys/time.h>
#include <time.h>
#include <stdlib.h>
#include <stdio.h>

int* randgen(int num, int limit){
char buffer[30];
struct timeval tv;
time_t curtime;
gettimeofday(&tv, NULL); 
int* numbers = malloc(sizeof(int)*num);
int i = 0;
int j;
while(num != 0){
    gettimeofday(&tv, NULL); 
    for(j = 0; j < 1000; j++);
    numbers[i] = tv.tv_usec % (limit+1);
    num--;
    i++;

}
return numbers;
}

int main(void)
{

  FILE *fp;
  fp = fopen("random.txt","w+");
  printf("\nEnter the number of random integers needed\t:\t");
  int num;
  scanf("%d",&num);
  printf("\nEnter the MAX limit for the random numbers\t:\t");
  int limit;
  scanf("%d",&limit);

  int* result = randgen(num,limit);
  int i = 0;
  printf("\n");
  for( i = 0 ; i < num ; i++ ){
printf(" %d ",*(result+i));
fprintf(fp,"%d ",*(result+i));

  }
return 0;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:22:24.563

[George Marsaglia 的测试套件仍然是一个参考](http://en.wikipedia.org/wiki/Diehard_tests)。一般来说，你可以看看他的工作，有很多关于伪随机生成器和实现的所有实际方面的知识。

# html - 使用 inline-block 和 vertical-align: middle 和 top 将父级中的子级与动态高度垂直对齐？

> ID：14244483
> 
> 赞同：0
> 
> 时间：2013-01-09T18:59:49.037
> 
> 标签：html, css

我正在制作带有添加/删除按钮的列表视图控件穿梭

类似于我发现的这个 VB（总）图像示例的控件：

![基本视觉示例](../Images/91d719db2eebfe70dfb042a079df6aa4.png)

但只有添加`>`和删除`<`按钮在中间垂直对齐。

首先，我尝试浮动来完成并排的`ul`s 和按钮，但我无法将按钮垂直定位在容器的中心。

我研究了一个使用with的[解决方案](https://stackoverflow.com/questions/9430929/css-vertically-align-floating-divs/9431102#9431102)，如果我将它应用于所有容器，它就可以工作。但是，我希望s 与顶部对齐。`inline-block``vertical-align: middle``ul`

```
<div class="wrapper">
  <div class="inblock vert-top">
    <ul>
      <li>item list view</li>
      <li>...</li>
    </ul>
  </div>
  <div class="inblock vert-middle">
    <div>
      <button>&gt;</button>
    </div>
    <div>
      <button>&lt;</button>
    </div>
  </div>
  <div class="inblock vert-top">
    <ul>
      <li>item list view</li>
      <li>...</li>
    </ul>
  </div>
</div> 
```

```
.wrapper {
  vertical-align: middle;
}

.inblock {
  display: inline-block;  
  /* IE 7 hack */
  *zoom:1;
  *display: inline;
}

.inblock.vert-top {
  vertical-align: top;
}

.inblock.vert-middle {
  vertical-align: middle;
} 
```

[http://cssdesk.com/2ZCAe](http://cssdesk.com/2ZCAe)（类似于jsFiddle）

使用`.inblock.vert-middle`第二个不起作用`ul`，当它被应用时，它将按钮容器发送到顶部。但是，使用`.inblock.vert-middle`第二个`ul`显示我想要的方式，但这没有意义。

如何修复 CSS 使其对第二个有意义`ul`，或者如何正确垂直对齐这些按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:11:02.877

也许这不是最优雅的解决方案，但一张桌子就可以完成这项工作。`vertical-align: middle`应用于`display: table-cell`元素将导致内容垂直居中。

# magento - 隐藏没有图像的产品 magento

> ID：14244485
> 
> 赞同：2
> 
> 时间：2013-01-09T18:59:57.207
> 
> 标签：magento, php

我已按照[此答案](https://stackoverflow.com/a/11497620/1110880)在类别列表页面上隐藏没有图像的产品。它工作了一段时间。

现在，由于某种原因，似乎没有图像的产品仍然显示在列表页面上。关于为什么会发生这种情况的任何想法？

**注意：** 正在使用相同的 list.phtml 页面。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T03:02:36.240

将以下内容添加到 list.phtm：

```
//$_productCollection=$this->getLoadedProductCollection();
$_productCollection = clone $this->getLoadedProductCollection();
$_productCollection->clear()
                   ->addAttributeToFilter('small_image', array('neq' => 'no_selection'))
                   ->load(); 
```

[这个答案](https://stackoverflow.com/a/11497620/1110880)推荐了以下内容：

```
->addAttributeToFilter('image', array('neq' => 'no_selection')) 
```

而我已将其设置为：

```
->addAttributeToFilter('small_image', array('neq' => 'no_selection')) 
```

上一个答案不起作用的原因是因为产品集合没有加载常规图像，因此无法将常规图像添加​​为过滤的属性，所以我将small_image添加为过滤的属性。

您还可以尝试[RS 的答案](https://stackoverflow.com/a/14246108/1110880)，他将图像添加到页面并因此添加到集合中。您可能还必须使用以下方法添加所有属性：

```
->addAttributeToSelect('*') 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T19:31:28.093

有一些技巧可以让 Magento 保持一致。我了解到的一件事是，Magento 模型会因许多不同的原因而改变，而且很难弄清楚原因。有更好的方法来做到这一点（修改集合等），但有时它只是不起作用，你没有时间找出原因。

如果您想要确保图像存在的万无一失的方法，请使用以下代码......它可能不是“magento 方式”，但它可以工作，我在我的网站上对其进行了测试（Magento EE 1.12）。把它放在一个函数中，或者如果你想直接在你的 phtml 中使用它！

它基本上只是确保 URL 存在。

```
$exists = false;
$entity_id = 8800;
$product = Mage::getModel('catalog/product')->load($entity_id);
$mediaUrl= Mage::getBaseUrl('media');
$imageUrl = $mediaUrl . "catalog/product" . $product->getImage();

$file_headers = @get_headers($imageUrl);
if($file_headers[0] == 'HTTP/1.1 404 Not Found') {
    $exists = false;
}
else {
    $exists = true;
}

var_dump($exists);
var_dump($imageUrl);
echo '<img src="' . $imageUrl . '" />'; 
```

$exists 将是 true（图像确实存在）或 false（图像不存在）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T20:43:34.517

我认为问题在于您正在尝试获取 list.phtml 上的“图像”（基本图像）属性（默认情况下，我只能访问缩略图 small_image）。

在 list.phtml 上（不像 view.pthml 那样加载完整的产品资源）

```
echo $_product->getImage() //null
echo $_product->getThumbnail() // path/name.jpg
echo $_product->getSmallImage() // path/name.jpg 
```

我认为您可能需要添加类似这样的内容到 app/design/frontend/default/yourtheme/layout/catalog.xml

```
 <action method="addAttribute"><name>image</name></action> 
```

请参阅[如何在 Magento 的 list.phtml 中访问自定义图像属性](https://stackoverflow.com/questions/13390051/how-to-get-access-to-custom-image-attribute-in-list-phtml-in-magento)

# oracle - Sqoop 访问特定的 Oracle Schema

> ID：14244491
> 
> 赞同：0
> 
> 时间：2013-01-09T19:00:19.563
> 
> 标签：oracle, hadoop, schema, sqoop

我有一个 Oracle 数据库，其中包含许多模式、一个主模式和一堆子模式。我的主模式具有特权，因此它可以在任何子级中创建/销毁/访问表。

我的问题是，我正在 Sqoop 中的主模式上做一个列表表，我看到所有子表都包含在结果中。

有没有办法区分这些表属于哪个模式？我有一些重叠的名称，目前无法判断哪个表在哪里。

米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:46:18.847

听起来您正在从 ALL_TABLES 中进行选择。如果您以“主”模式用户身份登录，您希望从 USER_TABLES 中进行选择。如果您从 ALL_TABLES 中进行选择，则需要按 OWNER= 进行过滤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T06:52:19.910

我相信这个问题正在被 SQOOP-741 [1] 解决。

链接：

1：[https ://issues.apache.org/jira/browse/SQOOP-741](https://issues.apache.org/jira/browse/SQOOP-741)

# internet-explorer - 如何以编程方式禁用 Internet Explorer (8) 中的安全警告？

> ID：14244494
> 
> 赞同：0
> 
> 时间：2013-01-09T19:00:27.803
> 
> 标签：internet-explorer, security-warning

需要一种方法来以编程方式禁用 IE8 中的安全警告。它是在通过 httpS 浏览时询问“您是否只想查看安全传递的网页内容”的问题。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:01:51.113

确保页面上的所有链接都是 HTTPS，没有一个是 HTTP，它不会显示此对话框。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T19:05:51.430

此消息旨在保护用户免受恶意或其他欺骗性网站的侵害。你不能只是让消息消失。

# javascript - 网页源注释工具

> ID：14244498
> 
> 赞同：4
> 
> 时间：2013-01-09T19:00:40.073
> 
> 标签：javascript, jquery, html, google-chrome-extension, firefox-addon

```
<ul class="contact">
<li class="first">Carnegie Mellon University</li>
<li>5000 Forbes Avenue, Pittsburgh, PA 15213</li>
</ul> 
```

=>

```
<ul class="contact">
<li class="first">[univ]Carnegie Mellon University[/univ]</li>
<li>[address]5000 Forbes Avenue, Pittsburgh, PA 15213[/address]</li>
</ul> 
```

显示了我想为数千个网页进行的语义注释过程。为了说明我的意图，我想下载所有这些网页并用用户定义的标签（例如，、）对它们进行`univ`注释`address`。带注释的页面稍后将用于处理。

我一直使用的最天真的方法是下载页面，打开页面文件，使用文本编辑器编辑文件并保存。这太麻烦了。

我一直在使用的一种更好的方法是从浏览器中选择要注释的目标文本，使用 Firebug 等工具检查目标，在检查的视图中编辑目标文本并保存编辑后的页面。这有助于减轻一些负担，但仍有很大的改进空间。

我想要的理想工具是我可以在浏览器中从页面中选择目标文本，选择相应的注释标签（最好从显示所有可用标签的工具栏中选择），然后保存编辑后的页面用一个按钮。

如果有人知道这种工具，那就太好了。但我怀疑这样的工具是否存在。有可能我必须自己编写这样的工具。问题是，我应该如何开始？我几乎没有 Web 应用程序开发经验。

我应该写一个浏览器扩展吗？我应该编写一个独立的应用程序吗？用什么语言？

**编辑**： 可以在[此处](https://stackoverflow.com/questions/14271919/surrounding-selected-text-with-tags)找到该问题的更简单版本。首选完整的工作解决方案。我认为这个问题对于有经验的 web 开发人员来说没什么大不了的，但对我来说可能真的需要一段时间，我需要尽快实现这个功能。

**编辑**：另外，我更喜欢选择后的工具栏，而不是右键单击后的下拉列表。我认为 chrome 扩展的工具栏`Diigo Web Collector`很酷。 ![在此处输入图像描述](../Images/abc67a218ef91a140637bb52a938e62d.png)

更重要的是，工具栏上需要一个`save`按钮来将编辑的页面保存到计算机上的默认位置或用户指定的位置。工具栏上的按钮应按以下顺序排列：`univ` `address` `tag3` `tag4`... `tagn` `save`。保存按钮最后出现。

**编辑**：使用 Javascript 将编辑后的页面下载到本地文件系统似乎是不可能的。在 Chrome 或 Firefox 中，当我们在检查视图中编辑页面的源代码后，有一个保存按钮供我们将编辑的页面保存到本地文件系统。那是如何实施的？我不想要那个保存按钮是它总是提示目录下载页面。我想用我自己的保存按钮将其设为默认目录。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-12T09:23:10.937

chrome 扩展可以自动执行此功能，您可以进一步扩展此框架功能以实现所有可能性。

以下骨架为选择事件^(1添加了鼠标右键单击事件的)[上下文菜单](https://developer.mozilla.org/en-US/docs/Mozilla_event_reference/contextmenu)

将菜单添加到 chrome 浏览器，并在进行选择时激活，如此屏幕截图所示

## 选择文本后的上下文菜单外观

![在此处输入图像描述](../Images/e177729eb099f736fde222d9508aa606.png)

^(**1**) -**当通过鼠标单击完成文本选择时触发选择上下文事件**

# 示范

查看[jsfiddle](http://jsfiddle.net/_Sud/2m8Wx/)，安装 chrome 扩展后，它会使用用户定义的标签进行注释

### 之前的 HTML 代码

![在此处输入图像描述](../Images/d8381751ff983176053bedf1c040bf5c.png)

### 选择后的 HTML 代码

通过添加到chrome浏览器的上下文菜单从jsfiddle的输出控制台中选择一个`<li>`文本，你可以看到DOM也发生了变化！

![在此处输入图像描述](../Images/5d4fc40d17de29ebfe1b0b8a373ba1b3.png)

# 代码参考

### 清单.json

清单文件绑定`content script(s)`到`background page(s)`扩展名。

```
{
    "name": "Annotation Tool",
    "description": "http://stackoverflow.com/questions/14244498/web-page-source-annotation-tool",
    "version": "1",
    "manifest_version": 2,
    "content_scripts": [
        {
            "matches": [
                "<all_urls>"
            ],
            "js": [
                "myscript.js"
            ],
            "all_frames": true
        }
    ],
    "permissions": [
        "contextMenus",
        "<all_urls>",
        "tabs"
    ],
    "background": {
        "scripts": [
            "background.js"
        ]
    },
    "icons": {
        "16": "screen.png",
        "48": "screen.png",
        "128": "screen.png"
    }
} 
```

### 背景.js

创建上下文菜单并将其绑定到浏览器并通过消息传递激活上下文菜单执行。

```
var _selection_univ = chrome.contextMenus.create({
    "title": "Add <univ> tag for %s ",
    "id": "_selection_univ",
    "onclick": reportclick,
    "contexts": ["selection"]
}, function () {
    console.log("Context Menu 2 Created");
});
var _selection_address = chrome.contextMenus.create({
    "title": "Add <address> tag for %s ",
    "id": "_selection_address",
    "onclick": reportclick,
    "contexts": ["selection"]
}, function () {
    console.log("Context Menu 2 Created");
});
//Add number of variables here for your functionality
function reportclick(info, tab) {
    switch (info.menuItemId) {
        case "_selection_univ":
            chrome.tabs.sendMessage(tab.id, "univ");//Notify Content Script for univ
            break;
        case "_selection_address":
            chrome.tabs.sendMessage(tab.id, "address");//Notify Content Script for address
            break;
        default:
            console.log("Handle default case..");
    }
} 
```

### myscript.js

```
//Handle DOM Changes here
chrome.extension.onMessage.addListener(function (message, sender, response) {
    switch (message) {
        //Hanlde [univ] tag 
        case "univ":
            if (document.getSelection().baseNode != null) document.getSelection().baseNode.parentNode.innerHTML = "[univ]" + document.getSelection().baseNode.parentNode.innerHTML + "[/univ]";
            break;
        //Hanlde [address] tag  
        case "address":
            if (document.getSelection().baseNode != null) document.getSelection().baseNode.parentNode.innerHTML = "[address]" + document.getSelection().baseNode.parentNode.innerHTML + "[/address]";
            break;
        default:
            console.log("Handle default case..");
    }
}); 
```

# 进一步扩展

如果您想进一步添加更多上下文菜单

1) 为上下文菜单创建一个变量，如此处所示`background.js`

```
var _selection_Some_Tag = chrome.contextMenus.create({
    "title": "Add [SOME TAG] tag for %s ",
    "id": "_selection_univ",
    "onclick": reportclick,
    "contexts": ["selection"]
}, function () {
    console.log("Context Menu for Some Tag Created");//In Call Back
}); 
```

2）添加一个在后台页面切换的案例，如下所示

```
case "_selection_your_case":
    chrome.tabs.sendMessage(tab.id, "_your_tag_content"); //Notify Content Script for address
    break; 
```

3）通过添加代码来处理内容脚本中的自定义标签，如下所示

```
//Hanlde [your custom] tag 
case "univ":
    if (document.getSelection().baseNode != null) document.getSelection().baseNode.parentNode.innerHTML = "[your tag]" + document.getSelection().baseNode.parentNode.innerHTML + "[/your tag]";
    break; 
```

# 测试和加载扩展

检查[如何加载扩展](https://developer.chrome.com/extensions/getstarted.html)以测试和扩展此脚本。

# 参考

*   [铬扩展](https://developer.chrome.com/extensions/getstarted.html)。
*   [背景页面](https://developer.chrome.com/extensions/background_pages.html)
*   [内容脚本](https://developer.chrome.com/extensions/content_scripts.html)
*   [上下文菜单](https://developer.chrome.com/extensions/contextMenus.html)
*   [消息传递](https://developer.chrome.com/extensions/messaging.html)
*   [扩展 API](https://developer.chrome.com/extensions/extension.html)
*   [DOM 选择](https://developer.mozilla.org/en-US/docs/DOM/Selection)

# 编辑 1

您可以使用以下 chrome 扩展代码

*   **工具栏而不是上下文菜单**
*   **仅替换选定的文本**
*   **将文件保存到沙盒位置**

要使用此代码，请使用您喜欢的任何图标并将它们放在每个标签的 chrome 目录中，并在此处`[univ]`使用相应的名称`css file`

> 背景图片：url（chrome-extension：// **MSG_@@extension_id** /YOUR_ICON_NAME.png）；

### 清单.json

注册. `css and java script`_`annotation tool`

```
{
    "name": "Annotation Tool",
    "description": "http://stackoverflow.com/questions/14244498/web-page-source-annotation-tool",
    "version": "1",
    "manifest_version": 2,
    "content_scripts": [
        {
            "matches": [
                "<all_urls>"
            ],
            "css": [
                "myscript.css"
            ],
            "js": [
                "jquery.js",
                "myscript.js"
            ],
            "all_frames": true
        }
    ],
    "permissions": [
        "contextMenus",
        "<all_urls>",
        "tabs"
    ],
    "icons": {
        "16": "screen.png",
        "48": "screen.png",
        "128": "screen.png"
    },
    "web_accessible_resources": [
        "icon1.png",
        "icon2.png"
    ]
} 
```

### 我的脚本.css

绑定图标在这里。

```
#root #univ {
    display: inline-block;
    z-index: 100000;
    height: 22px;
    width: 26px;
    background-image: url(chrome-extension://__MSG_@@extension_id__/icon1.png);
}
#root #addr {
    display: inline-block;
    z-index: 100000;
    height: 22px;
    width: 26px;
    background-image: url(chrome-extension://__MSG_@@extension_id__/icon2.png);
} 
```

### myscript.js

用于使用自定义标签更新选定文本的代码。

```
//Intialize counters to default values
clicking = false;
selecting = false;

//Set the toolbar to some invalid position so it will not appear unless a selection is made
var currentMousePos = {
    x: -100,
    y: -100
};

$(document).mousedown(function () {
    //Click is started
    clicking = true;
});

//Tool bar to add
$('body').append("<div id='root' style='position: absolute; left:" + currentMousePos.x + "px; top:" + currentMousePos.y + "px; display: block;'><a id='univ' href='javascript:void(0);'>&nbsp;</a><a id='addr' href='javascript:void(0);' >&nbsp;</a></div>");

$(document).mouseup(function (event) {
    if (selecting) {
        //He is selecting text
        $("#root").attr("style", "position: absolute; left:" + currentMousePos.x + "px; top:" + currentMousePos.y + "px; display: block;");
    } else {
        //He just clicked
        $("#root").attr("style", "display: none;");
    }
    //Reset counters
    clicking = false;
    selecting = false;
});

$(document).mousemove(function () {
    if (clicking) {
        //He did not simply click , but he is selecting some text
        selecting = true;
        //Track current position to put toolbar
        currentMousePos.x = event.pageX;
        currentMousePos.y = event.pageY;
    }
});

$("div #addr").click(function () {
    //Get Selected text
    var selection = document.getSelection();
    //Add your tags and prepare replacing content
    var html = "[addr]" + selection + "[/addr]";
    if (selection.getRangeAt && selection.rangeCount) {
        //Chrome supports only one range fire fox supports multiple ranges
        range = document.getSelection().getRangeAt(0);
        //remove selection
        range.deleteContents();
        //Create a node
        node = range.createContextualFragment(html);
        //Add the custom node
        range.insertNode(node);
    }
});

$("div #univ").click(function () {
    //Get Selected text
    var selection = document.getSelection();
    //Add your tags and prepare replacing content
    var html = "[univ]" + selection + "[/univ]";
    if (selection.getRangeAt && selection.rangeCount) {
        //Chrome supports only one range fire fox supports multiple ranges
        range = document.getSelection().getRangeAt(0);
        //remove selection
        range.deleteContents();
        //Create a node
        node = range.createContextualFragment(html);
        //Add the custom node
        range.insertNode(node);
    }
}); 
```

# 输出1

现在您可以替换文本的任何部分

![在此处输入图像描述](../Images/30a32bb15c0c3a6c0a0ed9dc7ff08fb2.png)

# 输出 2

替换任何网页

![在此处输入图像描述](../Images/eb8a3225d86d2429d6ce3399826be304.png)

# 将文件保存到所选位置

可以使用[chrome.pageCapture API](http://developer.chrome.com/trunk/extensions/pageCapture.html)将页面下载到某个`sand boxed`位置。

## 使用 pageCapture API 的示例实现

### 清单.json

```
{
    "name": "Page Capture Demo",
    "description": "This demos Page Capture MHTML Functionality",
    "permissions": [
        "pageCapture"
    ],
    "browser_action": {
        "default_icon": "screen.png",
        "default_popup": "popup.html"
    },
    "manifest_version": 2,
    "version": "1"
} 
```

### popup.html

```
<html>

    <head>
        <script src="popup.js"></script>
    </head>

    <body>
        <div id="pushhere"></div>
    </body>

</html> 
```

### popup.js

```
function capture() {
    chrome.tabs.query({
        "active": true,
        "currentWindow": true,
        "status": "complete"
    }, function (tabs) {
        chrome.pageCapture.saveAsMHTML({
            "tabId": tabs[0].id
        }, function (data) {
            var reader = new FileReader();
            reader.onload = function (eventt) {
                console.log(eventt.target.result);
                document.getElementById('pushhere').innerHTML = eventt.target.result;
                //window.open(eventt.target.result);
            };
            reader.readAsText(data);
            //window.open(data);
        });
    });
}
window.onload = capture; 
```

通过选择您选择的图标，使用上述步骤测试此代码，希望这会有所帮助:)

# 编辑 2

*   访问 HTML File(s) 的内容`images`，`js`并且`css`可以通过 chrome 扩展名访问文件
*   chrome 扩展不支持访问本地磁盘系统（读取和存储数据）（出于安全原因）
*   您可以将文件保存到沙盒位置，但一般访问无法访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T07:29:05.253

浏览器扩展应该没问题。独立的应用程序需要使用成熟的浏览器，这很麻烦。

只有使用浏览器扩展程序（与小书签相反），您才有权将结果直接保存到文件系统。您也可以将“注释”按钮添加到浏览器 (G)UI。

但是，在硬盘上存储数以千计的 HTML 文件可能不是您的目标。相反，您可以设置一个简单的数据库服务器，将注释结果发布到该服务器。一个带有一些 ajax 代码的小书签在客户端就足够了。

# android - unfortunately camera has stopped

> ID：14244505
> 
> 赞同：3
> 
> 时间：2013-01-09T19:01:00.703
> 
> 标签：android, avd

I'm using AVD with Android 4.2 installed. The AVD has this configuration: ![screenchot](../Images/e6f8c7cc37f596b94ba9d665372ef9b3.png)

When I click on the Camera app, I get the following error message: `unfortunately camera has stopped.`

I tried to clear data from the camera but that did not work. Any suggestions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:47:19.247

您需要在模拟器启动时检查 logcat 以查看它是否正确检测到您的网络摄像头；您还可以尝试使用 -d camera 选项直接从命令行运行模拟器，以接收额外的相机调试消息。

为了简化问题，请尝试切换到假模拟器摄像头而不是网络摄像头；这将产生一个简单的棋盘测试图像。

# jsp - 调用的 servlet（新手）的 URL？

> ID：14244509
> 
> 赞同：0
> 
> 时间：2013-01-09T19:01:19.393
> 
> 标签：jsp, tomcat, servlets

> **可能重复：**
> [如何使用相对路径而不包括上下文根名称？](https://stackoverflow.com/questions/4764405/how-to-use-relative-paths-without-including-the-context-root-name)

在我的 Tomcat webapps 目录中，我有一个上下文 app，它在其 WEB-INFO/classes 目录中包含一个名为 test 的树，其下有一堆类文件。app 还包含一个 html 文件，其目的是收集用户输入，然后调用 classes/test 目录中的一个 servlet 以生成 HTML 输出。描述 servlet 的 web.xml 如下：

```
<servlet>
  <servlet-name>foo</servlet-name>
  <servlet-class>test.DoIt</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>foo</servlet-name>
  <url-pattern>/doit</url-pattern>
</servlet-mapping> 
```

html文件的主体是

```
<FORM ACTION="/app/doit">
  First Parameter: <INPUT TYPE="TEXT" NAME="param1">
  <CENTER><INPUT TYPE="SUBMIT"></CENTER>
</FORM> 
```

这一切都有效。但是，必须在 html 文件的表单操作中指定应用程序的名称似乎有些错误。有没有办法避免这种情况，或者有人可以向我解释为什么你应该这样做是有道理的？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:13:00.717

如果你有纪律，你不必这样做。想象一下拥有`/app/form.html`和`/app/doit`servlet。由于从浏览器的角度来看，它们位于同一个文件夹中，您可以简单地说：

```
<FORM ACTION="doit"> 
```

当然相对路径也可以，例如，`/app/pages/form.html`你`/app/servlets/doit`可以说：

```
<FORM ACTION="../servlets/doit"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T02:47:32.513

如果您使用 JSP 页面，`<c:url>`Core JSTL 的标记会自动将部署上下文添加到任何绝对 URL。所以你可以安全地写：

```
<FORM ACTION="<c:url value="/doit"/>"> 
```

属性中生成的 URL`action`将是**/app/doit**。

# vim - 在不使用方向键的情况下反向搜索完成 vim 的命令历史

> ID：14244513
> 
> 赞同：4
> 
> 时间：2013-01-09T19:01:25.683
> 
> 标签：vim, autocomplete

是否可以选择使用历史记录中的命令自动完成当前键入的命令，而不使用方向键？这是对这个问题的扩展：[如何搜索 vim 的命令历史记录？](https://stackoverflow.com/questions/741913/how-do-you-search-through-vims-command-history).

答案是，键入`:somecommand`后使用`<up>`密钥。我认为不必举手去方向键更像是 vim。

从`:help cmdline-completion`, 我尝试了, `Ctrl-N`, `Ctrl-P`, `Ctrl-D`, `Ctrl-`L 没有成功。这可能是我的 vimrc 的相关部分。

```
set completeopt=menu,longest,preview
set showcmd     
set wildchar=<Tab> wildmenu wildmode=longest,list,full
set wildcharm=<C-Z> 
```

我知道使用`q:`or`:Ctrl-F`和`Ctrl-N`and调用的命令行窗口`Ctrl-P`在键入 后线性地浏览历史记录`:`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:11:03.790

你总是可以把它映射到一些东西上。我曾经尝试过使用

```
cnoremap <C-p> <Up> 
```

，但这将禁用完成循环，因此您应该更好地推断出其他内容（无法`pumvisible()`确定完成是否在命令模式下处于活动状态）。

# c++ - Traversing a vector in pairs, triplets,

> ID：14244518
> 
> 赞同：1
> 
> 时间：2013-01-09T19:01:43.050
> 
> 标签：c++, boost, stl

> **Possible Duplicate:**
> [combination and permutation in C++](https://stackoverflow.com/questions/2211915/combination-and-permutation-in-c)

Let's say I have a vector with the following elements: {1,2,3}. How can I traverse the vector in a pair-wise fashion. So the first iteration would be {1,2}, the second {1,3} and finally the third is {2, 3}.

For triplets there would be only one iteration: {1,2,3} in this case.

Are there algorithms in STL or boost to accomplish that?

Thanks, Christian

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:05:28.907

```
for (int i = 0; i < vec.size() - 1; ++i)
    for (int j = i + 1; j < vec.size(); ++j)
        std::cout << '{' << vec[i] << ',' << vec[j] << '}'; 
```

# xcode - Xcode Code Signing Profile Names Don't Match

> ID：14244522
> 
> 赞同：0
> 
> 时间：2013-01-09T19:01:56.297
> 
> 标签：xcode, provisioning-profile, code-signing-entitlements

I'm confused about the names in the Code Signing section of Xcode.

![Code Sign Example](../Images/49c9b0165b666c3cf1652819089c934a.png)

Above I have a profile with my name and a number after it. Example: John Smith (HW1234D).

If I go to ~/Library/Mobile Device/Provisioning Profiles none of the profiles in there have "HW1234D" as the ApplicationIdentifierPrefix. Additionally, none of the profiles that have "iOS Team Provisioning Profile" as the name have "HW1234D" associated with it either. Lastly if I look for profiles that were created or modified on Jan 2, 2013 none of them have "HW1234D" associated with it.

I have been looking all day at documentation and forums and I can't find any explanation of how to tell which profile is associated with which entry in the Code Sign section of Xcode.

Any ideas? What am I missing?

Thanks!

# facebook - Facebook 活动提要在 1 分钟后消失

> ID：14244525
> 
> 赞同：0
> 
> 时间：2013-01-09T19:02:00.303
> 
> 标签：facebook, android-activity, feed

希望这很简单。在 MAC 上的每个浏览器中，新的活动源在我身上消失了，在 PC 上除了 IE 之外的所有浏览器中都消失了。看这里：

[http://www.montanafolkfestival.com](http://www.montanafolkfestival.com)

在“热门话题”下页面的一半（“获取社交”工作正常）。从字面上看 45 秒，它消失了。似乎这是来自 Facebook 的提要问题。还有人看到这个吗？关于如何修复的想法？

谢谢，凯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:58:39.950

看起来不像是用户的错。Facebook 提供的示例代码也发生在页面上：

[http://developers.facebook.com/docs/reference/plugins/activity/](http://developers.facebook.com/docs/reference/plugins/activity/)

# php - 使用 PHP 和 MySQL 进行搜索过滤

> ID：14244527
> 
> 赞同：0
> 
> 时间：2013-01-09T19:02:19.423
> 
> 标签：php, mysql

我正在编写一个搜索过滤器，它将获取条件列表、查询数据库并返回匹配的用户名数组。这基本上是我正在做的事情：

```
if (!empty($_GET['cat'])) {
    $category = urldecode($_GET['cat']);
    $category_query = "SELECT DISTINCT username FROM tutor_subjects_taught WHERE category = '{$category}'";
    $category_process = mysql_query($category_query);
    while ($row2 = mysql_fetch_assoc($category_process)) {
        $usernames[] = $row2['username'];
    }
} 
```

这从 URL 中获取设置的类别，并在数据库中查询与此匹配的用户名并将其放入数组中。

现在，我需要做的是使用额外的“过滤器”来缩小这些用户名的范围。我的问题是：如果 $usernames 数组已经设置，我如何创建一个循环查询来检查每个用户名，然后返回一个匹配的子集数组？

例如，假设前面的代码已经设置了 $usernames，因为我们已经设置了一个 $_GET['cat'] 变量。现在我们添加另一个 $_GET 变量“rev”：

```
if (!empty($_GET['rev']) && isset($usernames)) {
    //Need to create loop here that will take all usernames in array from the previous block of code, check them for rev matching specific number, and return those that match into the $usernames array.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:30:29.177

首先，你不应该使用 mysql。请改用[mysqli](http://php.net/manual/en/book.mysqli.php)。这提高了您网站的安全性。这将使黑客更难使用 SQL 注入。

对于过滤，您可以通过在开始时设置所有过滤器来完成所有操作。创建一个`$filter`变量来保存所有值。

例子：

```
$filters = array();

if (!empty($_GET['cat'])) {
    $category = urldecode($_GET['cat']);
    $filter[] = 'category = ' . $category;
}

if (!empty($_GET['rev'])) {
    $anotherFilter = urldecode($_GET['rev']);
    $filters[] = 'anotherFilter = ' . $anotherFilter;
}

$filter = implode(' AND ', $filters);
$filter = $mysqli->real_escape_string($filter);

$mysqli = new mysqli('localhost', 'username', 'password', 'database');
$stmt = $mysqli -> prepare("SELECT DISTINCT username FROM tutor_subjects_taught WHERE '$filter'");
$stmt -> execute();
$stmt -> bind_result($username);
/* fetch values */
    while ($stmt->fetch()) {
        printf ("%s\n", $username);
    }
$stmt -> close();
$mysqli -> close(); 
```

# c# - Adding controls defined in xml to asp.net panel

> ID：14244528
> 
> 赞同：1
> 
> 时间：2013-01-09T19:02:20.323
> 
> 标签：c#, asp.net, xml, xml-parsing

I am creating a dynamic form where a user selects an area then a topic, then based on the topic a set of controls will load. The options for the form are all defined in an XML file.

My issues is that when I am traversing the XML I am getting down to the defined controls which I have 2 in the text file I made it is creating each control twice. I think it would be better to show some code then explain so here is my code.

```
 <?xml version="1.0" encoding="utf-8" ?>
 <options>
  <option name="xerox">
   <sub_option name="Paper Jam">
    <input type="dropdown" name="location" />
    <input type="textbox" name="printername" />
   </sub_option>
   <sub_option name="New Printer Request" />
   <sub_option name="Supply Request" />
   <sub_option name="Hardware Failure" />
 </option>
</options> 
```

And the C# code below

```
 protected void loadControls(string parent, string parentNode)
    {
        XmlDocument itemList = new XmlDocument();
        itemList.Load(@"c:\inetpub\wwwroot\sp\css\itemList.xml");
        Panel controls = new Panel();
        XmlNodeList nodeList = itemList.SelectNodes("options/child::node()");
        test.Text = parent;
        foreach (XmlNode node in nodeList)
        {
            if (node.Attributes["name"].Value == parentNode && node.HasChildNodes)
            {
                test.Text = "for 2 coming";
                foreach (XmlNode subnode in node.ChildNodes)
                {
                    if (subnode.Attributes["name"].Value == parent && subnode.HasChildNodes)
                    {
                        foreach (XmlNode optionNode in subnode.ChildNodes)
                        {

                            string controlType = optionNode.Attributes["type"].Value;
                            string controlName = optionNode.Attributes["name"].Value;
                            switch(controlType)
                            {
                                case "dropdown":
                                    DropDownList ddl = new DropDownList();
                                    qna.Controls.Add(ddl);
                                    break;
                                case "textbox":
                                    TextBox tb = new TextBox();
                                    qna.Controls.Add(tb);
                                    break;       
                            }

                        }
                    }
                }
            }

        } 
```

Output below(this is after selecting Paper Jam) ![output](../Images/6b638094618e1448bfc3cd2c0d72f695.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T09:29:41.283

I guess the issue is in your below code lines:

```
test.Text = "for 2 coming";
foreach (XmlNode subnode in node.ChildNodes)
{ 
```

You should check the following instead of foreach loop here

```
if(node.ChildNodes.Count>0)
{
  ...
} 
```

# ruby-on-rails - 添加列的数据映射器迁移

> ID：14244531
> 
> 赞同：1
> 
> 时间：2013-01-09T19:02:27.463
> 
> 标签：ruby-on-rails, ruby, datamapper

如何编写迁移以将列添加到现有表？使用 ActiveRecord 很容易，但我对 DataMapper 感到困惑，请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T22:20:31.250

查看[auto_upgrade](http://datamapper.org/why.html)的数据映射器文档。您会发现对模型的最简单更新都可以轻松处理。如需更复杂的模型更改，请查看[dm-migrations](https://github.com/datamapper/dm-migrations)。

# nunit - 使用 NUnit 对 ServiceStack.OrmLite 进行单元测试时，如何将 Db 注入服务类？

> ID：14244545
> 
> 赞同：5
> 
> 时间：2013-01-09T19:03:24.753
> 
> 标签：nunit, inversion-of-control, ormlite-servicestack

我有兴趣使用“新 API”（从 ServiceStack.ServiceInterface.Service 继承）为使用 ServiceStack 创建的一些服务类编写单元测试（使用 NUnit）。在使用 AppHost 托管在 ASP.NET 应用程序中时，服务的 Db 属性已正确自动连接，但在该环境之外运行时，我似乎无法找出正确的技术。我在 ServiceStack 中看到了各种与测试相关的命名空间和类，但找不到一个明确的示例，其中服务的 Db 属性被注入，而不是简单地直接设置连接工厂，然后调用各种 IDbConnection 扩展方法（插入、选择等）。

我尝试让我的测试类从 ServiceStack.ServiceInterface.Testing.TestBase 继承并覆盖其 Configure 方法来注册一个 IDbConnectionFactory（使用“：memory：”），以及`OrmLiteConfig.DialectProvider = SqliteDialect.Provider;`在我的 TestFixtureSetUp 中进行设置，但是当我继续得到 NullReferenceException 时调用我的服务方法（在 ServiceStack.ServiceInterface.Service.get_Db() 处）。Funq 容器似乎没有自动连接任何东西。

SQLite 本身已正确设置，我可以通过绕过我的服务类并简单地执行直接 IDbConnection 调用的更简单的单元测试来确认这一点。

我错过了什么？

**编辑**

似乎对 ServiceStack 服务进行单元测试需要存在主机和客户端，尽管看起来有一些方法可以设置它以避免序列化成本（使用 DirectServiceClient，如此处所示[）](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.IntegrationTests/Tests/WebServicesTests.cs) ——尽管我没有成功地让它在我的情况下工作。我设法使用 AppHostHttpListenerBase 方法（请参见[此处](https://github.com/ServiceStack/ServiceStack/blob/master/tests/ServiceStack.WebHost.Endpoints.Tests/NewApiTodos.cs)）使其工作，尽管它更多的是集成测试而不是单元测试（因此速度较慢）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T18:54:49.503

测试[文档](https://github.com/ServiceStack/ServiceStack/wiki/Testing)展示了几种不同的注入依赖项的方法。

如果您查看基本[服务](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.ServiceInterface/Service.cs#L69)的实现，它只会从以下位置创建**Db**`IDbConnectionFactory`：

```
private IDbConnection db;
public virtual IDbConnection Db
{
    get { return db ?? (db = TryResolve<IDbConnectionFactory>().OpenDbConnection()); }
} 
```

它只是从本地或全球`IResolver`IOC 容器中解析：

```
public static IResolver GlobalResolver { get; set; }

private IResolver resolver;
public virtual IResolver GetResolver()
{
    return resolver ?? GlobalResolver;
}

public virtual T TryResolve<T>()
{
    return this.GetResolver() == null
        ? default(T)
        : this.GetResolver().TryResolve<T>();
} 
```

因此，要注入您自己的依赖项（使用 Service 基类时），您只需要`IAppHost`使用您的服务所需的依赖项配置一个，您可以使用它：

```
using (var appHost = new BasicAppHost {
    ConfigureContainer = c => {
        c.Register<IDbConnectionFactory>(new ...);
    }
}.Init())
{
  //...    
} 
```

然后您可以在您的服务上设置它以及您的服务需要的任何您自己的依赖项，例如：

```
var service = appHost.ResolveService<MyService>(); 
```

这将自动装配在您的 AppHost 中配置的所有依赖项，您还可以通过正常的属性访问添加自己的特定于测试的依赖项，例如：

```
var service.MyDependency = new Mock<IMyDependency>().Object; 
```

从那时起，您可以照常调用和测试您的 C# 类方法：

```
var response = service.Get(new RequestDto { ... });
Assert.That(response.Result, Is.Equal("Expected Result from DB")); 
```

# xml - 具有相同节点名称的 xsl 无序列表

> ID：14244549
> 
> 赞同：1
> 
> 时间：2013-01-09T19:03:45.273
> 
> 标签：xml, xslt

我想将每个“字符串”节点打印为来自以下 xml 的 li 项：

```
<soapenv:Envelope 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:xsd="http://www.w3.org/2001/XMLSchema"
    xmlns:soapenv="http://schemas.url.org/url/envelope/"
>
    <soapenv:Header>
        <MultiSpeakMsgHeader 
            Version="" UserID="" 
            Pwd="" AppName="xx" AppVersion="x" 
            Company="xxx" xmlns="http://www.url.org/Version_3.0"
        />
    </soapenv:Header>
    <soapenv:Body>
        <GetMethodsResponse xmlns="http://www.url.org/Version_3.0">
            <GetMethods>
                <string>GetDomainMembers</string>
                <string>GetDomainNames</string>
                <string>GetMethods</string>
                <string>pingURL</string>
                <string>GetAllMeters</string>
                <string>GetAllServiceLocations</string>
                <string>GetAllCustomers</string>
                <string>GetCustomerByCustId</string>
                <string>GetServiceLocationByAccountNo</string>
                <string>GetServiceLocationByMeterNo</string>
                <string>ReadingChangedNotification</string>
            </GetMethods>
        </GetMethodsResponse>
    </soapenv:Body>
</soapenv:Envelope> 
```

我目前有以下 xsl 代码 -

```
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:exslt="http://exslt.org/common"
>
    <xsl:output method="html" />

    <xsl:template match="/GetMethods">
        <ul>
            <xsl:for-each select="GetMethods/string">
                <li>
                    <xsl:value-of select="string"/><br/>
                </li>
            </xsl:for-each>    
        </ul>
    </xsl:template>
</xsl:stylesheet> 
```

但这所做的只是将每个字符串节点打印为没有列表格式的长行。任何帮助，将不胜感激。

我想要这个简单的输出：

```
 <ul>
        <li>GetDomainMembers</li>
        <li>GetDomainNames</li>
        <li>GetMethods</li>
        <li>pingURL</li>
        <li>GetAllMeters</li>
        <li>GetAllServiceLocations</li>
        <li>GetAllCustomers</li>
        <li>GetCustomerByCustId</li>
        <li>GetServiceLocationByAccountNo</li>
        <li>GetServiceLocationByMeterNo</li>
        <li>ReadingChangedNotification</li>
    </ul> 
```

我目前正在得到这个输出（没有格式）：

```
 GetDomainMembers            GetDomainNames            GetMethods            pingURL            GetAllMeters            GetAllServiceLocations            GetAllCustomers            GetCustomerByCustId            GetServiceLocationByAccountNo            GetServiceLocationByMeterNo            ReadingChangedNotification 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:07:28.463

```
<xsl:stylesheet version="1.0" 
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
    xmlns:exslt="http://exslt.org/common"
    xmlns:response="http://www.url.org/Version_3.0"
    exclude-result-prefixes="exslt response"
>
    <xsl:output method="html" />

    <xsl:template match="/">
        <xsl:apply-templates select="//response:GetMethods" />
    </xsl:template>

    <xsl:template match="response:GetMethods">
        <ul>
            <xsl:apply-templates select="response:string" />
        </ul>
    </xsl:template>

    <xsl:template match="response:string">
        <li>
            <xsl:value-of select="." />
        </li>
    </xsl:template>
</xsl:stylesheet> 
```

笔记：

*   首先，我们必须知道您的响应元素所在的名称空间。在您的情况下，名称空间 URI 是`http://www.url.org/Version_3.0`，我们需要将其分配给前缀以使其在 XSLT 中可用。我选择调用该前缀`response`。
*   接下来我们需要控制 XSLT 的输出。通过匹配根节点 ( ) 并通过直接选择进行处理`<xsl:template match="/">`来定义下一步要去哪里，这是最简单的。`//response:GetMethods`
*   `response:GetMethods`用于和`response:string`定义其余转换的模板。
*   最后，我们必须确保 XML 命名空间前缀不会出现在生成的 HTML 中。就是`exclude-result-prefixes`这样。
*   在这里看到它：[http ://www.xmlplayground.com/kS1Cul](http://www.xmlplayground.com/kS1Cul)
*   您还可以阅读[XSL 中的“调用模板”和“应用模板”有什么区别？](https://stackoverflow.com/q/4478045/18771)我解释`<xsl:apply-templates>`得更近一点。
*   一般来说，你应该避免写作`<xsl:for-each>`，而是选择`<xsl:apply-templates>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:26:15.423

您给定的输入中没有与 pattern 匹配的元素`"/GetMethods"`。因此，您的 XML 可能正在由默认模板处理（尽管我们不知道没有查看 XSLT 的其余部分）。默认模板输出每个元素的文本内容。

为了解决这个问题，

1.  您的匹配模式不应以 开头`/`，因为`GetMethods`它不是顶级元素。如果您的意思是`//GetMethods`，那将匹配`<GetMethods>`出现在任何地方的元素（在无命名空间中）。但模式也会如此`GetMethods`；`//`开头是多余的。
2.  您需要为`GetMethods`. 根据您输入的 XML，`GetMethods`它位于 URI 为的命名空间中`http://www.test.org/Version_3.0`。因此，您需要为该命名空间声明一个命名空间前缀（例如“test”）并在匹配模式中使用它：

_

```
 <xsl:template match="test:GetMethods"
      xmlns:test="http://www.test.org/Version_3.0">... 
```

实际上，将命名空间声明 ( `xmlns:test="..."`) 移动到顶级`<xsl:stylesheet>`元素（如果您还没有的话）可能更实际。然后`test`前缀将在您需要的样式表中的任何位置可用。

# c# - 如何更新我的 WAMS 表？

> ID：14244552
> 
> 赞同：0
> 
> 时间：2013-01-09T19:03:51.660
> 
> 标签：c#, sql-update, windows-phone-8, azure-sql-database, azure-mobile-services

认为更新 WAMS 记录需要做的是选择我想要的记录，然后修改我要更改的所选记录的成员，最后对该记录调用 Update，我得到了以下代码：

```
 public static async Task<bool> UpdateInvitation(string senderID, string readerName, string senderDeviceID)
 {
     try
     {
         IMobileServiceTable<WAMS_INVITATIONS> invitationsTable = App.MobileService.GetTable<WAMS_INVITATIONS>();
         MobileServiceTableQuery<WAMS_INVITATIONS> invitationRecordToUpdate =
               invitationsTable.Where(i => i.SenderID == senderID).
                                Where(i => i.ReaderName == readerName).
                                //Select(i => i.SenderDeviceID).
                                Take(1); // the query returns a List, but I only want 1 record (and it should only return 1)
         //invitationRecordToUpdate.SenderDeviceID = senderDeviceID; <-- "SenderDeviceID" not recognized
         await invitationsTable.UpdateAsync(invitationRecordToUpdate);
     }
     catch (Exception)
     {
         return false;
     }
     return true; // If no exception, assume record was inserted successfully
 } 
```

...但它甚至不会编译。我得到的错误消息是：

1) *“Microsoft.WindowsAzure.MobileServices.IMobileServiceTable.Upd ateAsync(PhoneApp.Data.WAMS_INVITATIONS)”的最佳重载方法匹配有一些无效参数*

...好的，但是无效的论点是什么？

2) *参数 1：无法从 'Microsoft.WindowsAzure.MobileServices.MobileServiceTableQuery 转换

> ' 到 'PhoneApp.Data.WAMS_INVITATIONS'"*

我希望invitationRecordToUpdate 包含 WAMS_INVITATIONS 的所有成员/列，包括 SenderDeviceID，但没有......为什么？更重要的是，更新 WAMS 记录的规范/首选方法（没有双关语）是什么？

## 更新

（没有双关语，虽然这个问题确实围绕更新）

尝试使用建议的答案，这不会'编译：

```
invitationsTable.Where(i => i.SenderID == senderID && i.ReaderName ==  readerName).SingleOrDefault
(); 
```

（在VS编辑器中，“SingleOrDefault”比毛主席的书还红）

...还有这个：

```
await invitationsTable.UpdateAsync(invitationRecordToUpdate[0]); 
```

...也不计算，与：“*无法使用 [] 将索引应用于“Microsoft.WindowsAzure.MobileServices.MobileServiceTableQuery”类型的表达式*”

## 更新 2

将其更改为：

```
IMobileServiceTable<TASLS_WAMS_INVITATIONS> invitationsTable = App.MobileService.GetTable<TASLS_WAMS_INVITATIONS>(); 
```

...对此：

```
var invitationsTable = App.MobileService.GetTable<TASLS_WAMS_INVITATIONS>(); 
```

...没有区别（它不应该 - 所做的只是根据类型的构造函数使显式数据类型隐式。

所以我的代码现在是：

```
public static async Task<bool> UpdateInvitation(string senderID, string readerName, string senderDeviceID)
{
    try
    {
        IMobileServiceTable<TASLS_WAMS_INVITATIONS> invitationsTable = App.MobileService.GetTable<TASLS_WAMS_INVITATIONS>();

        MobileServiceTableQuery<TASLS_WAMS_INVITATIONS> invitationRecordToUpdate =
            invitationsTable.Where(i => i.SenderID == senderID).
                             Where(i => i.ReaderName == readerName).
                             Take(1);

        if (null != invitationRecordToUpdate)
        {
            //await invitationsTable.UpdateAsync(invitationRecordToUpdate[0]); //both of these fail...
            //await invitationsTable.UpdateAsync(invitationRecordToUpdate);
        }
    }
    catch (Exception)
    {
        return false;
    }
    return true; // If no exception, assume record was inserted successfully
} 
```

...如您所见，我无法 UpdateAsync，因为这两种方法（已注释掉）都无法编译。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:52:12.390

当返回列表只使用第一个元素时：

```
 await invitationsTable.UpdateAsync(invitationRecordToUpdate[0]); 
```

您可以制作更好的 linq：

```
invitationsTable.Where(i => i.SenderID == senderID && i.ReaderName ==  readerName).SingleOrDefault(); 
```

记得检查项目是否存在：

```
if(invitationRecordToUpdate!=null)
{//UPDATE } 
```

**SingleOrDefault 方法：**

> 返回序列的唯一元素，如果序列为空，则返回默认值；如果序列中有多个元素，此方法将引发异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-11T11:06:50.993

像这样更新并显示错误：

```
public static async Task<bool> UpdateInvitation(string senderID, string readerName, string senderDeviceID)
    {
        try
        {
            IMobileServiceTable<TASLS_WAMS_INVITATIONS> invitationsTable = App.MobileService.GetTable<TASLS_WAMS_INVITATIONS>();

            var invitationRecordToUpdate =
                invitationsTable.Where(i => i.SenderID == senderID).
                                 Where(i => i.ReaderName == readerName).
                                 Take(1).ToListAsync();

                await invitationsTable.UpdateAsync(invitationRecordToUpdate[0]);
        }
        catch (Exception)
        {
            return false;
        }
        return true; // If no exception, assume record was inserted successfully
    } 
```

编辑我刚刚检查了我的 Windows str 应用程序。我用这个，一切正常：

```
private IMobileServiceTable<Rating> RatingTable =
         App.MobileService.GetTable<Rating>();

    var list = await RatingTable.Where(p => p.Id == sel_item.Id && p.User == user).ToListAsync();
    vat item=list[0]; 
```

# visual-studio - 保留我的解决方案的测试版本，但允许继续处理其他请求

> ID：14244554
> 
> 赞同：1
> 
> 时间：2013-01-09T19:03:55.593
> 
> 标签：visual-studio, tfs, visual-studio-2012, branching-and-merging

我在 TFS 下有一个 ASP.NET MVC 解决方案（VS2012）。假设我的硬盘上有最新版本（我们将其命名为 X 版）。我知道这个版本没问题（经过测试并准备好投入生产，但正在等待批准）。现在我想处理这个解决方案的另一个请求。

**我的问题**：我怎样才能保留我的解决方案的实际状态，但继续研究这个解决方案。在某些时候，当我获得批准时，我需要从 TFS 中检索版本 X 并将其移至生产环境，然后继续开发我的待处理请求。

我该如何进行？使用标签或分支？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:07:18.307

我们使用分支来做到这一点。

在我们的代码被切断后的第二天，我们从主干上切断了一个新分支。然后我们与测试一起工作以确保它是稳定的，所有错误都已修复并合并回 Trunk。

这个分支然后归测试团队所有，进入它的任何东西都必须得到他们的批准。

我们还为这个实时分支提供了单独的 Daily 和 Buddy 构建。测试可以随时使用它从该分支构建最新版本。

在部署日之前，测试团队然后构建这个实时分支以创建一个包。该软件包稳定且经过测试。完成此操作后，只有特殊情况才会允许其他任何内容进入此指定部署。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:33:10.570

分支是这个问题的答案。

我见过的最好的分支指南是“ [Visual Studio Team Foundation Server 分支和合并指南](http://vsarbranchingguide.codeplex.com/)”。

它包括您决定分支结构所需的一切，包括图片！

我建议您从基本或标准分支计划开始，然后看看您需要更复杂的东西有多严重。

# ios - 如何将此对象从 cocoa touch 转换为 cocos2d

> ID：14244555
> 
> 赞同：1
> 
> 时间：2013-01-09T19:03:57.730
> 
> 标签：ios, objective-c, uiscrollview, cocos2d-iphone, ccscrolllayer

我现在在我的游戏中有这样的东西：

它是 UIScrollView 中的 UIView。这个 UIView 可以是 480px 或 960 等宽度。

```
+-----------------+
+   UIScrollView  +
++---------------++                 
++    UIView     ++
++               ++
++ p             ++
++---------------++
+-----------------+ 
```

如果我移动玩家`p`（在屏幕上），他会向右移动。当他靠近右侧时，uiscrollview 更改偏移量并将 uiview 移动到左侧，并且播放器位于屏幕左侧。我怎样才能在 cocos2d 中实现这样的东西？如何在 cocos2d 中实现 UIScrollView？

谢谢你的帮助。我是 cocos2d 的新手。在 clear Cocoa Touch 中，我的游戏运行正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:20:10.393

你可能需要像 CCScrollLayer 这样的东西：

[https://github.com/cocos2d/cocos2d-iphone-extensions/tree/develop/Extensions/CCScrollLayer](https://github.com/cocos2d/cocos2d-iphone-extensions/tree/develop/Extensions/CCScrollLayer)

# c# - 在 SQL Compact Edition 中的事务中，@@IDENTITY 返回 NULL

> ID：14244563
> 
> 赞同：2
> 
> 时间：2013-01-09T19:04:44.093
> 
> 标签：c#, sql-server-ce

我有一个带有 3 列表的 SQL Server Compact Edition 数据库`Id`：`Field1`和`Field2`. `Id`是`IDENTITY(1,1) NOT NULL`。

```
const string SQL_INSERT = @"INSERT INTO Table(Field1, Field2) VALUES(@Param1, @Param2)";
const string SQL_SELECT_IDENTITY = @"SELECT @@IDENTITY AS ID";
SqlCeConnection cn = null;
SqlCeTransaction tr = null;
SqlCeCommand cm = null;

try
{
   cn = Utility.GetConnection();
   cn.Open();

   tr = cn.BeginTransaction();
   cm = new SqlCeCommand(SQL_INSERT, cn);
   cm.Transaction = tr;
   cm.Parameters.AddWithValue("@Param1", data.Data1);
   cm.Parameters.AddWithValue("@Param2", (int)data.Data2);
   cm.ExecuteNonQuery();

   cm = new SqlCeCommand(SQL_SELECT_IDENTITY, cn);
   object o = cm.ExecuteScalar();
   data.Id = Convert.ToInt32(o);
   // other operations
} 
```

问题是`cm.ExecuteScalar()`返回null。如果我删除交易，查询将返回适当的值。使用`SCOPE_IDENTITY()`只是失败，因为 SQL Server CE 不支持它。

如何检索插入的标识值？有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:25:31.523

我才意识到原因，身份选择也需要使用事务。

```
cm = new SqlCeCommand(SQL_SELECT_IDENTITY, cn);
// ADD THE TRANSACTION TO THE COMMAND
cm.Transaction = tr;
// ----------------------------------
object o = cm.ExecuteScalar();
data.Id = Convert.ToInt32(o); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T01:45:59.243

## 它对我有用的方式是替换：

```
cm = new SqlCeCommand(SQL_SELECT_IDENTITY, cn);
object o = cm.ExecuteScalar();
data.Id = Convert.ToInt32(o); 
```

* * *

有了这个：

```
cm.CommandText = "SELECT @@IDENTITY";
var id = cm.ExecuteScalar(); 
```

* * *

## 我也删除了（不需要）：

tr = cn.BeginTransaction();cm.Transaction = tr;

* * *

# sql - 使用 SQL 的累积剩余

> ID：14244565
> 
> 赞同：0
> 
> 时间：2013-01-09T19:04:54.730
> 
> 标签：sql, sybase

我使用的是旧版本的 sybase，它没有像 Lead 这样的关键字。

我想找到累积的剩余。

让我试着用一个例子来解释这一点。

开始数量 = 500

```
类别 剩余时间 数量
猫 1 10:01:01.000 100 400
猫 1 10:01.01.001 50 350
猫 1 10:01:01.002 0 350
猫 1 10:01.01.003 100 250
猫 1 10:01:03.001 100 150

```

类似的行在 cat2 中可用，并且每个类别的行数是可变的。

请注意，在上面我已经按时间升序排列了行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:12:52.553

我不知道 Sybase 是否支持这个，但是在 PostgreSQL、Oracle 和其他你可以做到

```
select category,
       time,
       quantity, 
       500 - sum(quantity) over (partition by category order by time) as leftover
from the_unknown_table;
order by category, time 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-14T12:30:07.327

SELECT Category, SUM(500-(Quantity)) FROM table_name group by Category

或者

SELECT Category,(count(1)*500)-sum(Quantity) FROM table_name group by Category

# android - 自定义视图的互斥样式属性？

> ID：14244567
> 
> 赞同：1
> 
> 时间：2013-01-09T19:04:56.897
> 
> 标签：android, attr, android-custom-view

我在 attrs.xml 的样式中有 2 个属性（以及许多其他属性）。

鉴于这两个：

```
 <attr name="enableScrolling" format="boolean"/>
 <attr name="showPadlock" format="boolean"/> 
```

有没有办法让它们相互排斥？该设计用于在图形旁边显示通用比例。通用秤实例的特定用例是，如果启用滚动，则秤会显示一个挂锁图标，该图标在锁定和解锁之间切换，并在运行时禁用/启用滚动。

如果 enableScrolling 为 false，则显示挂锁没有意义。我在代码中处理这个问题，但如果我能以某种方式在 XML 中传达语义，它会更清晰。

我猜答案是否定的，因为 IDE 中没有 UX 范式来处理它，但我欢迎任何想法。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:19:42.360

你有3种方式：

*   如果没有意义，请忽略 showPadlock
*   检查代码中的属性。如果您发现无效组合，则显示警告消息或引发异常。
*   创建枚举属性。例如：

    <attr name="scrollType">

    <enum name="simpleScroll" value="1" />

    <enum name="scrollWithPadlock" value="2" />

    <enum name="none" value="3" />

    </attr>

# java - 使用 Sax Parser 跳过 xml 中的元素的最简单方法是什么？

> ID：14244570
> 
> 赞同：0
> 
> 时间：2013-01-09T19:05:09.720
> 
> 标签：java, android, sax

我一直在寻找这个问题的答案，但是我在任何地方找到的所有 SAX 资源都比我希望的要少一些。我正在为一家餐厅编写一个 android 应用程序，它可以让客人通过应用程序访问很长的列表，而不是翻阅一本书。我的 xml 看起来像这样：

```
<bar>
    <liquor>
        <type>American Rye</type>
        <distillery>Sazerac<distillery>
        <bottling>18 Year</bottling>
        <place>Frankfort, KY</place>
        <proof>90</proof>
        <price>20<price>
    </liquor>

    <beer>
        <type>American Microbrew</type>
        <brewery>New Belgium</brewery>
        <bottling>La Folie Sour Brown 750ml</bottling>
        <place>Fort Collins, CO</place>
        <price>20</price>
    </beer>
</bar> 
```

当我只有几百杯酒时，它运作良好。但是，因为我两次使用某些元素名称，例如“类型”和“价格”，所以事情变得一团糟。这是我的解析器：

```
public class BeerParser extends DefaultHandler {

private ArrayList<Beer> BeerL;
private boolean pastTheLiquor = false;

public ArrayList<Beer> getItems(String ArrayType){
    ArrayList<Beer> tmpItem = new ArrayList<Beer>();
    for (Beer beer : BeerL){
        if (beer.getType().equals(ArrayType)){
        tmpItem.add(beer);
            }
        }
    return tmpItem;
}

InputStream barXmlInputStream;

String tmpValue;

Beer beerTmp;

public BeerParser(InputStream barXmlInputStream) {

    this.barXmlInputStream = barXmlInputStream;

    BeerL = new ArrayList<Beer>();

    parseDocument();

    printDatas();

}

private void parseDocument() {

    SAXParserFactory factory = SAXParserFactory.newInstance();

    try {

        SAXParser parser = factory.newSAXParser();

        parser.parse(barXmlInputStream, this);

    } catch (ParserConfigurationException e) {

        System.out.println("ParserConfig error");

    } catch (SAXException e) {

        System.out.println("SAXException : xml not well formed");

    } catch (IOException e) {

        System.out.println("IO error");

    }

}

private void printDatas() {

    for (Beer tmpB : BeerL) {

        System.out.println(tmpB.toString());

    }

}

@Override

public void startElement(String s, String s1, String elementName, Attributes attributes) throws SAXException {

    if (elementName.equalsIgnoreCase("beer")) {

        pastTheLiquor = true;
        beerTmp = new Beer();

    }

}

@Override

public void endElement(String s, String s1, String element) throws SAXException {

    if (element.equals("beer")) {

            BeerL.add(beerTmp);

        }
    if (pastTheLiquor){
        if (element.equalsIgnoreCase("type")) {

            beerTmp.setType(tmpValue);

        }
        if (element.equalsIgnoreCase("brewery")) {

            beerTmp.setBrewery(tmpValue);

        }
        if (element.equalsIgnoreCase("bottling")) {

            beerTmp.setBottling(tmpValue);
            beerTmp.hasBottling = true;

        }

        if (element.equalsIgnoreCase("price")) {

            beerTmp.setPrice(tmpValue);

        }

        if (element.equalsIgnoreCase("place")) {

            beerTmp.setPlace(tmpValue);

        }
    }

}

@Override

public void characters(char[] ac, int i, int j) throws SAXException {

    tmpValue = new String(ac, i, j);

} 
```

}

因此，酒先于啤酒出现，因此，由于解析器在看到“啤酒”之前先看到“类型”，它试图调用从未实例化的 Beer 对象 beerTmp 的“setType()”函数。我尝试使用布尔值，它会等到解析器看到“啤酒”的第一个实例，但我得到一个空列表，这真的让我很沮丧，因为制作一系列酒的几乎相同的解析器正在工作壮观。

有没有一种简单的方法可以跳过文件中的酒？我在布尔值的正确轨道上吗？我应该把 SAX 解析器扔出窗外并使用其他东西吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:11:42.377

sax 解析器为所有元素调用回调，如果您不想考虑其中的一些，只需快速执行“return;”。在解析之前无法将它们过滤掉。

> 有没有一种简单的方法可以跳过文件中的酒？我在布尔值的正确轨道上吗？

您可以使用[堆栈](http://docs.oracle.com/javase/7/docs/api/java/util/Stack.html)结构来存放稍后需要考虑的数据（推送）（弹出）。

SAX 绝对比其他 XML API 更难驯服，因为在某些情况下，它是唯一的选择。所以，不要放弃它；之前或之后你会需要它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:32:51.667

以下简化的视觉作品。注意

1）你的xml有错误，例如 `<type>American Rye</liquor>`

2) equalsIgnoreCase 无关紧要，因为 xml 区分大小写。

3) JAXB 最适合这项工作

```
public class BeerParser extends DefaultHandler {
    private List<Beer> list = new ArrayList<>();
    private Beer beer;
    private String element;

    public static void main(String[] args) throws Exception {
        SAXParserFactory factory = SAXParserFactory.newInstance();
        SAXParser parser = factory.newSAXParser();
        BeerParser bp = new BeerParser();
        parser.parse(new File("1.xml"), bp);
        System.out.println(bp.list);
    }

    @Override
    public void startElement(String s, String s1, String element, Attributes attributes) {
        if (element.equals("beer")) {
            beer = new Beer();
        }
        this.element = element;
    }

    @Override
    public void endElement(String s, String s1, String element) {
        if (element.equals("beer")) {
            list.add(beer);
            beer = null;
        }
    }

    @Override
    public void characters(char[] ac, int i, int j) {
        if (beer != null) {
            String value = new String(ac, i, j);
            if (element.equals("type")) {
                beer.setType(value);
            } else if (element.equals("brewery")) {
                beer.setBrewery(value);
            } else if (element.equals("bottling")) {
                beer.setBottling(value);
            } else if (element.equals("price")) {
                beer.setPrice(value);
            } else if (element.equals("place")) {
                beer.setPlace(value);
            }
        }
    }
} 
```

# php - WP插件的PHP脚本需要11秒才能加载

> ID：14244574
> 
> 赞同：1
> 
> 时间：2013-01-09T19:05:14.687
> 
> 标签：php, performance, wordpress, pingdom

我不是 .php 专家，所以我正在寻求一点帮助（或者至少是一个解释）

我在我的组织网站上使用的一个插件（称为 Coin Slider 4 WordPress）正在减慢网站的爬行速度。我对 pingdom 工具进行了整页测试，插件的 .php 文件 (coin-slider-4-wp.css.php) 需要超过**11 秒**才能加载。.php 文件本身只有 1kb，没有什么特别慢的。

这是一个屏幕截图：![截屏](../Images/2828e134e49b88128788aacc9b5c7f59.png)

这是有问题的 .php 文件的文本：

```
/*  Coin Slider jQuery plugin CSS styles
    http://workshop.rs/projects/coin-slider
*/

.coin-slider { overflow: hidden; zoom: 1; position: relative; }
.coin-slider a{ text-decoration: none; outline: none; border: none; }

.cs-buttons { font-size: 0px; padding: 10px; float: left; }
.cs-buttons a { margin-left: 5px; height: 10px; width: 10px; float: left; border: 1px solid #B8C4CF; color: #B8C4CF; text-indent: -1000px; }
.cs-active { background-color: #B8C4CF; color: #FFFFFF; }

.cs-title { width: 920px; padding: 10px; background-color: #000000; color: #FFFFFF; }

.cs-prev,  .cs-next { background-color: #000000; color: #FFFFFF; padding: 0px 10px; }

#coin-slider-coin-slider { width: 940px} 
```

不太确定发生了什么，但任何提示/建议都会很棒，因为这显然会使我们的网站无法使用：/谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:36:40.160

硬币滑块 4 WP 插件已经 2 年没有更新了。我建议采用更稳定和积极维护的东西，例如[Nivo Slider](http://nivo.dev7studios.com/features/#wordpress)

**更新**：您还可以告诉插件不要调用该 php 文件。

在插件侧栏中打开 WP 中的编辑器。在右侧，您将看到一个下拉列表，其中包含您可以编辑的不同插件。选择硬币滑块插件。现在在该下拉列表下方，您将看到一个文件列表。在您的**coinslider-content.php**文件中，有一个指向您的 CSS 文件的链接。

删除这一行：

```
<link rel=\"stylesheet\" href=\"".$path."css/coin-slider-4-wp.css.php\" type=\"text/css\" media=\"screen\" charset=\"utf-8\"/> 
```

从：

```
function cs_head(){

    $path =  get_bloginfo('wpurl')."/wp-content/plugins/coin-slider-4-wp/";

    $script = "
        <link rel=\"stylesheet\" href=\"".$path."css/coin-slider-4-wp.css.php\" type=\"text/css\" media=\"screen\" charset=\"utf-8\"/>
        <script type=\"text/javascript\" src=\"".$path."scripts/jquery-1.4.2.min.js\"></script>
        <script type=\"text/javascript\" src=\"".$path."scripts/coin-slider.min.js\"></script>
        ";

    echo $script;
} 
```

删除该行后，从**coin-slider-4-wp.css.php**文件中复制内容。单击左侧主题侧边栏上的编辑器。在右侧，您将看到一个文件列表，其中一个是**style.css**。**将coin-slider-wp.css.php**的内容粘贴到**style.css（样式表）**文件的底部。

一旦你完成了这一切。它应该删除请求文件所需的 11 秒。试试看，让我知道它是否有效。

# c++ - CPP包含头文件导致数千个错误

> ID：14244576
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:05:17.063
> 
> 标签：c++, header

当我包含这个头文件“pathfinding.h”时：

```
#pragma once

#include <BWAPI.h>
#include "BWAPI/TilePosition.h"
#include <vector>
#include "PathNode.h"
#include "Logger.h"
#include "ArgosMap.h"
#include "MapField.h"
#include "Utils.h"
#include "ComparePathNodePointer.h"

using namespace BWAPI;

class Pathfinding {

private:
std::vector<PathNode*> openList;
std::vector<PathNode*> closedList;
std::vector<Position*> buildpath(PathNode* targetNode);

void expandNode(PathNode* currentNode, MapField* targetField);
ArgosMap* argosMap;

public: 
Pathfinding();
~Pathfinding();
std::vector<Position*> getShortestPath(MapField* startField, MapField* targetField);
}; 
```

在此头文件“UnitAgent.h”中：

```
#pragma once

#include <BWAPI.h>
#include <vector>
#include "ArgosMap.h"
#include "Pathfinding.h"

using namespace BWAPI;

class UnitAgent {

protected:
Unit* unit;
UnitType unitType;
int unitID;
std::vector<Position*> trail;
Position target;

public:
UnitAgent(Unit* unit);
std::vector<Position*> getTrail();
Position getTarget();
Position* getPosition();

int getUnitID();
void setTarget(Position target);
void addPositionToTrail(Position* targetLocation);
void moveTo(TilePosition* targetPosition);

}; 
```

我得到了一百万个错误，主要是错误 C2143、C2065。但那不是真的，错误不存在。当我在另一个文件中包含头文件时，一切都很好（除了需要特定头文件的东西）。

我应该检查的任何想法。任何人都知道我如何检查我的 C++ 代码，就像 Eclipse 检查我的 Java 代码一样。我的意思是为什么 Visual Studio 不这样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:08:55.863

This kind of directive should not be in a header file

```
using namespace BWAPI; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:23:35.420

首先，你为什么需要这一切

```
#include <BWAPI.h>
#include "BWAPI/TilePosition.h"
#include <vector>
#include "PathNode.h"
#include "Logger.h"
#include "ArgosMap.h"
#include "MapField.h"
#include "Utils.h"
#include "ComparePathNodePointer.h"

using namespace BWAPI; 
```

在寻路.h? 只需转发声明 ArgosMap、MapField、PathNode 和 Position 即可

```
class ArgosMap;
class MapField;
class PathNode;
class Position; 
```

pathfinding.h 看 Pathfinding 类的声明就足够了，如果需要实现 Pathfinding 方法，上面的东西应该去 pathfinding.cpp。标题中的内容和依赖项越少，调试就越容易。

pathfinding.h 中的声明看起来不错，问题是某些方法没有实现/没有正确实现。要找出这些方法是什么，您需要缩小问题的范围——从一开始就删除不必要的依赖项。

在不使用其他头文件的方法/方法的文件中包含 pathfinding.h 总是可以正常工作...

# drools-guvnor - Guvnor 似乎跨外部 RDBMS 和文件系统复制资产

> ID：14244577
> 
> 赞同：1
> 
> 时间：2013-01-09T19:05:20.260
> 
> 标签：drools-guvnor, guvnor

我将 SQL Server 设置为外部存储库，并将 guvnor 和 jboss AS7 中的所有其他内容都按照默认配置进行了配置。

当我在 guvnor 中创建资产时，我看到 MSSQL 数据库中正在进行更改。但是，尽管对 db 进行了更改，但我仍然看到 Repository 和 Workspace 文件夹发生了更改。当我截断外部 guvnor db 中的表并重新启动 guvnor 时，它变得更加有趣，它似乎从这两个文件夹中取回了它的所有资产。

难道我做错了什么？它是从 lucene 索引中重建资产吗？如果 MSSQL 已经在索引事物，那么 lucene 索引是否仍然需要？这些基本的 JCR 概念是我没有掌握的吗？

谢谢，尤里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T21:49:46.810

这个问题在 Drools 论坛上得到了回答：http: [//drools.46999.n3.nabble.com/rules-users-Guvnor-seems-to-copy-assets-across-External-RDBMS-and-file-system-td4021447 .html](http://drools.46999.n3.nabble.com/rules-users-Guvnor-seems-to-copy-assets-across-External-RDBMS-and-file-system-td4021447.html)

# android - 函数只显示第一个数据库条目。安卓，sqlite

> ID：14244578
> 
> 赞同：0
> 
> 时间：2013-01-09T19:05:26.440
> 
> 标签：android, database, sqlite, show

我正在尝试使用我的数据库中的一些数据，但函数只使用第一个条目中的数据。我应该添加什么来浏览数据库中的所有条目？

```
public void drawdayplan(){

DatabaseConnector dbConnector = new DatabaseConnector(Clock.this);

       Intent a = getIntent();
        String d_m_y = a.getStringExtra("d_m_y");
       dbConnector.open();
       Cursor result =  dbConnector.gethour(d_m_y); 

       if(result.moveToFirst()){

               int hourfromIndex = result.getColumnIndex("inthourfrom");
               int hourtoIndex = result.getColumnIndex("inthourto");
               int colourIndex = result.getColumnIndex("colour");
              hourfrom = result.getInt(hourfromIndex);
              hourto = result.getInt(hourtoIndex);
              colour = result.getString(colourIndex);

            // here are some steps with painting which are using this variables 

            }

      }

       result.close();

       dbConnector.close();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:06:57.097

> 但是函数只使用第一个条目的数据。

你永远不会要求超过第一行。`moveToNext()`像这样循环调用：

```
while(result.moveToNext()){
    // Read each row
} 
```

# asp.net - 格式化 GridView 以显示十进制的整数

> ID：14244581
> 
> 赞同：1
> 
> 时间：2013-01-09T19:05:36.973
> 
> 标签：asp.net

下面的代码包含整个十进制 nuber 的表示，但是当我在 DB 中有 0.00 值时，我需要显示为 0，但在这种格式下，GridView 呈现空值。我只接受整数作为 DB 的输入（*decimalFromDB*）。为什么它是小数的原因是 b/c 将来我们可能有带小数的数据现在我只想显示为一个整数，而 0.00 何时显示 0。

```
 <asp:BoundField DataField="decimalFromDB" HeaderText="Number" 
        SortExpression="Number" DataFormatString="{0:####}" 
        NullDisplayText="0" /> 
```

当我从 Stack Track 中得到这个错误时，我会在 string DataFormatString="{0:d}" 或 {0:D}

```
[FormatException: Format specifier was invalid.]
   System.Number.FormatDecimal(Decimal value, String format, NumberFormatInfo info) +0
   System.Decimal.ToString(String format, IFormatProvider provider) +39
   System.Text.StringBuilder.AppendFormat(IFormatProvider provider, String format, Object[] args) +729
   System.String.Format(IFormatProvider provider, String format, Object[] args) +107
   System.Web.UI.WebControls.BoundField.FormatDataValue(Object dataValue, Boolean encode) +440
   System.Web.UI.WebControls.BoundField.OnDataBindField(Object sender, EventArgs e) +139
   System.Web.UI.Control.OnDataBinding(EventArgs e) +91
   System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding) +92
   System.Web.UI.Control.DataBind() +15
   System.Web.UI.Control.DataBindChildren() +201
   System.Web.UI.Control.DataBind(Boolean raiseOnDataBinding) +101
   System.Web.UI.Control.DataBind() +15
   System.Web.UI.WebControls.GridView.CreateRow(Int32 rowIndex, Int32 dataSourceIndex, DataControlRowType rowType, DataControlRowState rowState, Boolean dataBind, Object dataItem, DataControlField[] fields, TableRowCollection rows, PagedDataSource pagedDataSource) +166
   System.Web.UI.WebControls.GridView.CreateChildControls(IEnumerable dataSource, Boolean dataBinding) +3896
   System.Web.UI.WebControls.CompositeDataBoundControl.PerformDataBinding(IEnumerable data) +66
   System.Web.UI.WebControls.GridView.PerformDataBinding(IEnumerable data) +14
   System.Web.UI.WebControls.DataBoundControl.OnDataSourceViewSelectCallback(IEnumerable data) +128
   System.Web.UI.DataSourceView.Select(DataSourceSelectArguments arguments, DataSourceViewSelectCallback callback) +33
   System.Web.UI.WebControls.DataBoundControl.PerformSelect() +143
   System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74
   System.Web.UI.WebControls.GridView.DataBind() +4
   System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +66
   System.Web.UI.WebControls.CompositeDataBoundControl.CreateChildControls() +75
   System.Web.UI.Control.EnsureChildControls() +102
   System.Web.UI.Control.PreRenderRecursiveInternal() +42
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2496 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:12:21.750

来自：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.boundfield.dataformatstring.aspx)

尝试`DataFormatString="{0:D}"`

# groovy - 匹配字符串中的单词并使它们加粗

> ID：14244582
> 
> 赞同：2
> 
> 时间：2013-01-09T19:05:43.007
> 
> 标签：groovy

我正在尝试在字符串中查找特定单词并将这些单词用`<b>`. 以下是我所拥有的，但我想知道是否有更有效的常规方式来做到这一点？

```
void testSomething() {
    def myText = "The quick brown fox is very feisty today"
    def BOUNDS = /\b/
    def myWords = "quick very"
    def words =  myWords.tokenize(" ").join("|")
    def regex = /$BOUNDS($words)$BOUNDS/
    def found = ''
    myText.eachMatch(regex) { match ->
        found += match[0] + ' '
    }

    assert found == 'quick very '

    def foundList = found.tokenize(" ")
    def newList = []

    myText.tokenize(" ").each {word ->
        if (foundList.contains(word))
            word = "<b>${word}</b>"
        newList.add(word)
    }

    assert "The <b>quick</b> brown fox is <b>very</b> feisty today" ==    newList.join(" ")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:17:43.540

当然，只需使用[`String.replaceAll()`](http://groovy.codehaus.org/groovy-jdk/java/lang/String.html#replaceAll%28java.util.regex.Pattern,%20java.lang.String%29).

```
def myText = "The quick brown fox is very feisty today"
def myWords = ['quick', 'very']

myWords.each {
    myText = myText.replaceAll(it, "<b>$it</b>")
}

assert myText == "The <b>quick</b> brown fox is <b>very</b> feisty today" 
```

# c# - 对于这个具有选定值的静态列表，正确的 DropDownListFor HTML 帮助器语法是什么？

> ID：14244584
> 
> 赞同：0
> 
> 时间：2013-01-09T19:05:53.047
> 
> 标签：c#, asp.net-mvc, razor

有人可以帮助我使用正确的语法吗？

不确定如何编写 DropDownListFor HTML 帮助程序。我将如何使用基于 3 的 Value 属性选择的“鼠标”来编写这个？我没有使用模型，只是想在 razor 中快速创建一个列表。

谢谢

```
var AnimalList = new List<SelectListItem>();
AnimalList.Add(new SelectListItem { Text = "Dog", Value = "1" });
AnimalList.Add(new SelectListItem { Text = "Cat", Value = "2" });
AnimalList.Add(new SelectListItem { Text = "Mouse", Value = "3" });
AnimalList.Add(new SelectListItem { Text = "Squirrel", Value = "4" });
AnimalList.Add(new SelectListItem { Text = "Fox", Value = "5" });

@Html.DropDownListFor(? , ?, ?); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:21:41.147

`@Html.DropDownListFor`没有模型就不能使用。但是您可以`@Html.DropDownList`在没有模型的情况下使用。

**在控制器中**

```
var AnimalList = new List<SelectListItem>();
AnimalList.Add(new SelectListItem { Text = "Dog", Value = "1" });
AnimalList.Add(new SelectListItem { Text = "Cat", Value = "2" });
AnimalList.Add(new SelectListItem { Text = "Mouse", Value = "3" });
this.ViewBag.Animals = new SelectList(AnimalList, "Value", "Text", "3"); 
```

**在视图中**

```
@Html.DropDownList("myDropDown", ViewBag.Animals as SelectList) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:16:48.820

`DropDownListFor`没有模型就不能使用。看看它的重载：每个人都从一个模型属性开始。这就是帮助器用来为模型绑定器设置名称属性的方法。

但是，您可以使用`DropDownList`. 请注意，每个重载中的第一个参数是`string name`. 在这里，您自己设置名称属性。

```
@Html.DropDownList("myDropDownList", AnimalList) 
```

您没有在帮助程序中将项目设置为选中，而是在 SelectListItem 声明中执行此操作，如下所示

```
AnimalList.Add( new SelectListItem 
                    { 
                      Text = "Mouse", 
                      Value = "3", 
                      Selected = true 
                    } 
              ); 
```

# dropbox - 我是否需要 Dropbox 应用才能将文件上传到我自己的 Dropbox？

> ID：14244586
> 
> 赞同：5
> 
> 时间：2013-01-09T19:06:03.497
> 
> 标签：dropbox, dropbox-api

我想将文件从服务器推送到我自己的 Dropbox。我可以在服务器上存储 API 令牌甚至（尽管不情愿）帐户密码。我不想在服务器上安装 Dropbox。

我还需要在 Dropbox Developer Home 创建应用吗？我觉得我的应用程序命名空间很混乱——当然我可以只使用 UUID。此外，我不希望该应用程序在任何地方列出或让其他用户能够将该应用程序授权给他们的 Dropbox 帐户。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-10T17:32:49.800

您可以通过两种方式以编程方式与 Dropbox 进行交互：

1.  通过官方 API
2.  通过运行官方客户端的机器上的本地文件系统

对于 1，您确实需要注册一个 API 应用程序，但我不会担心应用程序名称空间混乱。无论如何，现在有很多应用程序使用 Dropbox。只需使用一个相对独特的名称，也许对您来说是不同的。

此外，Dropbox 本身不会在任何地方公开有关已注册应用程序的任何信息。你完全可以控制它。

并且使用 API，您不需要存储密码，只需要存储应用令牌和访问令牌。（您只需处理一次身份验证流程即可获取并存储访问令牌。）

此外，如果您只需要链接到自己的帐户，您甚至不需要申请“生产”状态。

对于 2，您不需要注册 API 应用程序，但您需要在机器上安装客户端。然后你可以直接与本地文件系统交互，让客户端处理剩下的事情。（此外，Dropbox 不能通过 FTP 工作，尽管您可以在机器通过 FTP 将文件推送到运行客户端的机器上的地方一起破解某些东西。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:21:38.560

由于 Dropbox 正在镜像一个真实的文件夹，因此您可以通过任何可以复制文件的方法将内容放入 Dropbox。你可以使用 ftp 从你的服务器到你的 Dropbox 文件夹的一个实例，或者只是下载一个文件。

# c# - 无法在多个位置添加或插入项目 MyFile

> ID：14244587
> 
> 赞同：4
> 
> 时间：2013-01-09T19:06:06.697
> 
> 标签：c#, winforms

我正在构建播放 Wireshark 文件并使用 pcapdot.net 将数据包发送到网卡的应用程序。

在我的应用程序中，我获取目录根目录并仅添加过去 24 小时内的新文件。首先，我将目录中的所有文件添加`List<string>`到我的`ListView`. 现在，在我的应用程序完成播放我的所有文件后，我想清除我的列表，清除我的 ListView 并再次搜索过去 24 小时内的 now 文件并添加到我的`ListView`. 我的问题是在将文件再次添加到我的列表并尝试将文件添加到我`ListView`的应用程序崩溃并出现错误**无法在多个地方添加或插入项目“file.pcap”之后。您必须首先将其从当前位置删除或克隆它。**

播放完我的文件后，我清理了 List、ListView 并再次添加文件并播放：

```
 lvFiles.Items.Clear();
            filesList.RemoveRange(0, filesList.Count - 1);
            addFiles();
            playFiles(); 
```

添加文件（）；- 将 List 中的所有文件添加到我的 ListView：

```
private void addFiles()
{
    BackgroundWorker backgroundWorker = new BackgroundWorker();
    backgroundWorker.WorkerReportsProgress = true;
    backgroundWorker.DoWork += new DoWorkEventHandler(
    (s3, e3) =>
    {
        filesList = SafeFileEnumerator.EnumerateFiles(pathToSearch, "*.pcap",
            SearchOption.AllDirectories).ToList();
    });

    backgroundWorker.RunWorkerCompleted += new RunWorkerCompletedEventHandler(
        (s3, e3) =>
        {
            if (filesList.Count != 0)
                AddFilesToListView(filesList);
        });

    backgroundWorker.RunWorkerAsync();
} 
```

playFiles() - 在我的 ListView 中播放我的所有文件：

```
private void playFiles()
{
    lockButtons();
    string filePath = string.Empty;
    BackgroundWorker backgroundWorker = new BackgroundWorker();
    backgroundWorker.WorkerReportsProgress = true;
    backgroundWorker.DoWork += new DoWorkEventHandler(
    (s3, e3) =>
    {
        for (int i = 0; i < lvFiles.Items.Count && shouldContinue; i++)
        {
            this.Invoke((MethodInvoker)delegate
            {
                lvFiles.EnsureVisible(i);
                lvFiles.Items[i].Selected = true;
                lvFiles.Select();
                filePath = lvFiles.Items[i].Tag.ToString();
                toolStripStatusLabel.Text = string.Format("Current file: {0}", lvFiles.Items[i].Text);
            });

            PcapFile pcapFile = new PcapFile();
            pcapFile.sendQueue(filePath, adapter);
            this.Invoke((MethodInvoker)delegate { lvFiles.Items[i].Selected = false; });
        }
    }); 
```

将文件添加到我的 ListView：

```
private void addFileToListBox(string filePath, string duration)
{
    item = new ListViewItem(new string[] { new FileInfo(filePath).Name, duration, "Waiting" });
    item.Tag = new FileInfo(filePath).FullName;
    this.Invoke((MethodInvoker)delegate { lvFiles.Items.Add(item); });
} 
```

也许“某人”仍然持有文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T22:56:25.407

我很确定这可能是你的问题：

```
item = new ListViewItem(new string[] { new FileInfo(filePath).Name, duration, "Waiting" }); 
```

这会创建一个新对象，但仍然指`item`的是在比您预期更大的范围内声明的事物，可能是整个表单。

您需要使对象的范围与您将其添加到 ListView 的方法相同：

```
 private void addFileToListBox(string filePath, string duration)
        {
            ListViewItem item = new ListViewItem(new string[] { new FileInfo(filePath).Name, duration, "Waiting" });
            item.Tag = new FileInfo(filePath).FullName;
            this.Invoke((MethodInvoker)delegate { lvFiles.Items.Add(item); });
        } 
```

如果您`item`在更大的范围内声明了变量，那么每次创建新的 ListViewItem 时，您实际上仍然在列表视图中使用与第一次相同的项目。

虽然您没有显示您声明的位置`item`，但您还需要删除在错误范围内声明它的行：

```
ListViewItem item; // <-- Delete me 
```

# eclipse - 在 Eclipse Juno SR1 的大纲视图中减少树视图节点的缩进

> ID：14244591
> 
> 赞同：2
> 
> 时间：2013-01-09T19:06:29.000
> 
> 标签：eclipse, eclipse-pdt

在 Eclipse (Juno SR1 Build id: 20120920-0800) Outline View 窗格中，它在树形视图控件中列出了我的 Account 类。节点展开，然后显示类的成员，包括常量、方法等。

在这个树形视图中从一层到下一层的缩进对于屏幕空间来说是非常浪费的。

我想知道是否有人知道减少这种缩进的方法，以便类节点下方的节点级别到目前为止没有缩进。首选项中是否有此设置？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:10:59.303

Eclipse has no control over this. The outline is a standard tree control whose appearance is controlled by your OS.

# python - 带有 imshow 的 AxesGrid：绘图必须具有相同的范围吗？

> ID：14244593
> 
> 赞同：2
> 
> 时间：2013-01-09T19:06:34.663
> 
> 标签：python, matplotlib

我正在使用 AxesGrid 类制作一个看起来像这样的图：![带有 imshow 和轮廓的 AxesGrid](../Images/3b69dea02526661b45d8d37874f98d26.png)

代码基本上是这样的：

```
 grid = AxesGrid(fig,
                111,
                nrows_ncols = (2,2),
                axes_pad = 0.50,
                label_mode = "all",
                cbar_location='right',
                cbar_mode='single',
                cbar_pad =0.3,
                cbar_size='5%'
                ) 
```

然后对于 4 个面板中的每一个，我将其称为 imshow 和轮廓，如下所示：

```
 # some definitions etc.

        im1 = grid[0].imshow(np.transpose(De[i1:i2,j1:j2]),
           aspect='equal',
           vmin=vmin, vmax = vmax,
           origin='lower',
           extent=extent)

    # some other stuff [...]

        grid[0].contour(np.transpose(F[i1:i2,j1:j2]),levels=levls,
                extent=extent,colors='k',cmap=None)

    # and so on for the 3 other panels 
```

唯一的区别是现在，我希望图像对 extent 关键字具有不同的值。假设我希望右上图像的范围为 (31.5,35.5,11,14)，右下面板的范围为 (29.5, 33.5, 11, 14)，我得到这个：

![新情节](../Images/8a6a90dac2509735141008b86a56065b.png)

似乎 matplotlib 调整了轴。有没有办法指定我想要的范围并且在我的数据和 ax 之间没有空白？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:03:42.927

添加参数：

```
share_x=False 
```

到您的 Grid 一代。然后您可以单独设置每个图的 xlim。

# php - php 会话数据已保存和存储，但不能用于下一页

> ID：14244599
> 
> 赞同：0
> 
> 时间：2013-01-09T19:06:58.483
> 
> 标签：php, session, sessionid

我真的在桌子上敲了敲头：

我正在第 1 页上保存会话数据。

这是初始代码：

```
<?php
session_start();

$SID = session_id();

$newToken = md5(uniqid(mt_rand(), true)); 
$_SESSION['donate-token'] = $newToken; 
```

我在 page1 的底部做了一个 var dump，所以我可以看到会话数据已保存。

然后，我检查了服务器文件系统并验证了会话文件是否到位并且数据存储在其中。

这是 page2 的开头（添加了一些调试代码）：

```
<?php
session_start();
echo '<pre>';
echo 'session id: ', session_id(), "\n";

$sessionfile = ini_get('session.save_path') . '/' . 'sess_'.session_id();
echo 'session file: ', $sessionfile, ' ';

var_dump($_SESSION);
echo "</pre>\n"; 
```

所以我在本页顶部看到的是一个非常不同的会话 ID，以及一个空会话数组。

我不明白为什么一页可以写会话但下一页不能读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:22:51.500

在第 2 页调用 session_start() 之前尝试添加异常。试试这个：

```
$a = session_id();
if(empty($a)) session_start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:09:54.503

查看脚本发送到浏览器的 cookie。（大多数浏览器都有内置工具来检查它们持有的 cookie。如果您在自己的系统上开发，通常可以按域搜索，例如 localhost。）

如果 cookie 未存储在您的浏览器中，请检查您浏览器的安全设置；如果 cookie 已存储，但路径对第二页不可用，则要么考虑将会话 cookie 配置为限制较少的路径，要么将两个脚本放入同一目录。

# php - PHP选择不工作

> ID：14244602
> 
> 赞同：0
> 
> 时间：2013-01-09T19:07:06.720
> 
> 标签：php, mysql

我正在尝试对用户通行证进行验证。更新代码：

```
$username="------";
$password="------";
$database="------";
$host = "------";

mysql_connect($host,$username,$password);
mysql_select_db($database) or die( "Unable to select database");

$username = $_POST['username'];
$password = $_POST['password'];

echo 'username: ' . $username . '<br>';  //myname
echo 'password: ' . $password . '<br>';  //mypass

function checkpass()
{
    //$result = mysql_query("SELECT * FROM REG_USERS where USERNAME='$_POST[username]' and PASSWORD='$_POST[password]' ") or die(mysql_error());  
    $result = mysql_query("SELECT * FROM REG_USERS where USERNAME='" . $username . "' and PASSWORD='" . $password . "'") or die(mysql_error());  
    return  mysql_num_rows($result);
}

checkpass();
echo 'checkpass:'. checkpass(); 
```

在第一个查询中，checkpass 返回 1。在第二个查询中，它返回 0。为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:48:06.030

好的，现在我们有了整个代码，这很明显。

`$username`并且`$password`不是全球性的。该函数不知道它们设置为什么。

```
$username = $_POST['username'];
$password = $_POST['password'];

echo 'username: ' . $username . '<br>';  //myname
echo 'password: ' . $password . '<br>';  //mypass

function checkpass()
{
    $username = mysql_real_escape_string($_POST['username']);
    $password = mysql_real_escape_string($_POST['password']);

    //$result = mysql_query("SELECT * FROM REG_USERS where USERNAME='$_POST[username]' and PASSWORD='$_POST[password]' ") or die(mysql_error());  
    $result = mysql_query("SELECT * FROM REG_USERS where USERNAME='" . $username . "' and PASSWORD='" . $password . "'") or die(mysql_error());  
    return  mysql_num_rows($result);
} 
```

**注意我知道mysqli。OP 没有询问它，我也没有对此着迷，**但我已经添加了 mysql_real_escape_string 以作为很好的衡量标准。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:29:23.953

让我们抛开 mysql 接口的问题（以后不好用）以及**您真的不想**将任何类型的用户影响变量直接放入您的 sql 字符串 [SQL 注入！！！！] 的事实，您在您的描述中说以下内容：

`$result = mysql_query("SELECT * FROM REG_USERS where
USERNAME='" . $username . "' and PASSWORD='" . $password . "'") or die(mysql_error());`

不起作用。

为什么会呢？`$username`并`$password`设置为空。在您的第一个示例中，您首先将它们设置为某个值，但随后您不使用它们（而是使用直接`$_POST`变量）。

在您的第二个示例中，您没有设置它们。

那么以下工作是否有效（请注意，您无需连接变量即可将它们放入此处的字符串中）？

```
 $username = $_POST['username'];  
   $password = $_POST['password'];  

   $result = mysql_query("SELECT * FROM REG_USERS where  
   USERNAME='$username' and PASSWORD='$password'") or die(mysql_error()); 
```

同样，确保您从未在实际代码中实际执行此操作（只是将变量直接放入 SQL 字符串中）。请改用准备好的语句。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-09T19:16:22.557

这是使用的解决方案`mysqli_`：

```
$link = mysqli_connect("localhost", "my_user", "my_password", "world");

/* check connection */
if (mysqli_connect_errno()) {
    printf("Connect failed: %s\n", mysqli_connect_error());
    exit();
}

$city = "Amersfoort";

/* create a prepared statement */
if ($stmt = mysqli_prepare($link, "SELECT USERNAME FROM REG_USERS WHERE USERNAME = ? AND PASSWORD = ?")) {

    /* bind parameters for markers */
    mysqli_stmt_bind_param($stmt, "ss", $_POST[username], $_POST[password]);

    /* execute query */
    mysqli_stmt_execute($stmt);

    /* bind result variables */
    mysqli_stmt_bind_result($stmt, $USERNAME);

    /* fetch value */
    mysqli_stmt_fetch($stmt);

    echo "The username is $USERNAME";

    /* close statement */
    mysqli_stmt_close($stmt);
}

/* close connection */
mysqli_close($link); 
```

# c++ - 立即执行 .then

> ID：14244606
> 
> 赞同：3
> 
> 时间：2013-01-09T19:07:14.320
> 
> 标签：c++, visual-studio-2012, task, future, ppl

由于 C++11 没有`future.then`我已经[`concurrency::task`](http://msdn.microsoft.com/en-us/library/hh750113.aspx)从 Microsoft`PPL`库开始使用。它大部分时间都很好用。

但是，现在我处于使用 GPGPU 的情况，因此在调度程序中`PPL`安排 .then 延续会导致 GPU 空闲时出现不必要的延迟。

我的问题是是否有任何可能的解决方法`concurrency::task`并`concurrency::task::then`让它们直接执行。

据我了解，由于缓存效率的原因，在大多数情况下，定期安排的任务会立即继续执行。但是，对于从显式线程（即 GPU 线程）使用`concurrency::task_completion_event`.

我正在做的一个例子：

```
template<typename F>
auto execute(F f) -> concurrency::task<decltype(f())>
{
    concurrency::task_completion_event<decltype(f())> e;

    gpu_execution_queue_.push([=]
    {
        try
        {
            e.set(copy(f())); // Skipped meta-template programming for void.
        }
        catch(...)
        {
            e.set_exception(std::current_exception());
        }
    });

     // Any continuation will be delayed since it will first be 
     // enqueued into the task-scheduler.
    return concurrency::task<decltype(f())>(std::move(e)); 
}

void foo()
{
    std::vector<char> data /* = ... */;

    execute([=]() -> texture
    {
        return copy(data)
    })
    .then(concurrency::task<texture> t)
    {
        return execute([=]
        {       
            render(t.get());
        });
    })
    .get();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:13:47.467

.then 的全部意义在于执行一个依赖于前一个块完成的代码块。如果不是这种情况，那么您首先不应该使用 .then，而应该只编写内联代码。另一方面，如果您确实依赖于前一个块的完成，则别无选择，只能等待它完成。我肯定错过了什么。

乔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-29T18:03:01.677

PPL 调度程序不保证 .then lambda 何时执行，或者它在哪个线程上执行。您可以将其视为一个单独的任务，仅在前一个任务完成后才开始。调度程序可以立即执行延续任务，它甚至可以使用同一个线程，但这并不确定。

有关调度程序实现的讨论，请参见：

[附录 A：任务计划程序和资源管理器](http://msdn.microsoft.com/en-us/library/gg663535.aspx)

最新的 MSDN 文档也有更多信息：

[任务计划程序（并发运行时）](http://msdn.microsoft.com/en-us/library/dd984036.aspx)

# java - 将外部自定义绑定应用到包含的架构

> ID：14244609
> 
> 赞同：1
> 
> 时间：2013-01-09T19:07:28.820
> 
> 标签：java, jakarta-ee, jaxb, jaxb2

我正在使用 binding.xjb 将自定义绑定应用到 main.xsd。工作正常。

我想分解 main.xsd 以包含“common.xsd”，但这样做会破坏我的 binding.xjb。

示例：下面是我的 binding.xjb（其中一个投标）

```
<jaxb:bindings node="/xsd:schema/xsd:complexType[@name='Job']/xsd:attribute[@name='stagingId']">
  <jaxb:property generateIsSetMethod="true"/>
</jaxb:bindings> 
```

如果我必须将元素 "Job" 移动到 common.xsd ，我应该如何更改此绑定？

我试过下面哪个不起作用

```
// Because noew "common.xsd" will have its own "xsd:schema" element 
node="/xsd:schema/xsd:schema/xsd:complexType[@name='Job']/xsd:attribute[@name='stagingId']"

node="//xsd:complexType[@name='Job']/xsd:attribute[@name='stagingId']" 
```

据我了解 - 诀窍是编写适当的 XPATH 以到达该节点。

任何指针将不胜感激。
卡勒菲尔

**更新：我发现这些自定义绑定可以内联移动到定义元素的位置。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:13:04.087

您可以为此利用剧集文件。当您从另一个 XML 模式生成类时，剧集文件允许您重用从一个 XML 模式生成的工件，该 XML 模式导入您之前从中生成的类。

以下是如何制作剧集文件的示例。

```
xjc -b binding1.xml -episode common.episode common.xsd 
```

以下是您如何使用和剧集文件的示例。

```
xjc -d out main.xsd -extension -b common.episode 
```

**完整示例**

*   [http://blog.bdoughan.com/2011/12/reusing-generated-jaxb-classes.html](http://blog.bdoughan.com/2011/12/reusing-generated-jaxb-classes.html)

# java - Java：如何创建通用 ENUM 类型

> ID：14244610
> 
> 赞同：1
> 
> 时间：2013-01-09T19:07:30.293
> 
> 标签：java, generics, enums

我正在设计一个添加变量的网页，变量的类型可以是 form `Double`, `String`, ... 用户必须选择其中一种类型。后端将根据用户定义的类型创建变量。

我正在考虑拥有可以解决此问题的通用枚举。喜欢;

```
public enum VariableType<Type> {
    Double("Double", Double);
    String("String", String);

    private String name;
    private Type type;
} 
```

这样页面加载 REST 调用`/variable/types`会从枚举返回类型列表并填充下拉列表。

当用户根据传递的字符串提交表单时，a`Type`是关联的。

似乎我正在做的事情是无效的，所以我正在寻找更好的方法来做到这一点，请指教

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T21:45:38.940

在开始我的回答之前，我想说一个枚举是一个枚举，即命名某物的有限集合。

那东西是静态的最终对象。所以

```
enum MyEnum {A,B,C;} 
```

引擎盖下是这样的：

```
static final Object A = new MyEnum();
static final Object B = new MyEnum();
static final Object C = new MyEnum(); 
```

因此，由于我认为您对枚举的所有可能类型不感兴趣（最后您有一个固定的组合），因此我建议您提供一个解决方案，该解决方案试图最大程度地减少工作量，并且一旦您选择了就可以非常简单地实现您想要支持的类型。在我的解决方案中，我选择了 Longs、Doubles、Points 和 Strings

我直接给你代码，如果你认为这个解决方案符合你的需求，我很乐意根据你的意见和要求进行改进。

```
// MyType.java
package stackoverflow.answers;

import java.awt.Point;

public enum MyType {
    LONG {
        @Override
        public Object validateValue(Object o) {
            return (o instanceof Long) ? o : null;
        }

        @Override
        public Object parse(String s) {
            try {
                return Long.valueOf(s);
            } catch (Exception e) {
                return null;
            }

        }
    },
    DOUBLE {
        @Override
        public Object validateValue(Object o) {
            return (o instanceof Double) ? o : null;
        }

        @Override
        public Object parse(String s) {
            try {
                return Double.valueOf(s);
            } catch (Exception e) {
                return null;
            }

        }
    },
    STRING {
        @Override
        public Object validateValue(Object o) {
            return (o instanceof String) ? o : null;
        }

        @Override
        public Object parse(String s) {
            // stupid method, but needed.
            return s;

        }
    },
    AWTPOINT {
        @Override
        public Object validateValue(Object o) {
            return (o instanceof Point) ? o : null;
        }

        @Override
        public Object parse(String s) {
            if (s == null)
                return null;
            String ss[] = s.split(",");
            if (ss.length != 2)
                return null;
            try {
                return new Point(Integer.valueOf(ss[0]), Integer.valueOf(ss[1]));
            } catch (Exception e) {
                return null;
            }

        }
    };

    public String toString(Object o) {
        return o.toString();
    }

    public abstract Object validateValue(Object o);

    public abstract Object parse(String s);
} 
```

然后：

```
// GenericObject.java
package stackoverflow.answers;

public class GenericObject {

    private MyType _type;
    private Object _obj;

    public GenericObject(MyType type) {
        _type = type;
    }

    public void setValue(Object obj) {
        _obj = _type.validateValue(obj);
    }

    public void valueOf(String s) {
        _obj = _type.parse(s);
    }

    public String toString() {
        return _type.toString(_obj);
    }

} 
```

和一个测试类：

```
package stackoverflow.answers;

public class EnumTest {

    public static void main(String[] args) {
        GenericObject o1 = new GenericObject(MyType.LONG);
        o1.setValue(new Long(42));

        GenericObject o2 = new GenericObject(MyType.DOUBLE);
        o2.valueOf("3.14");

        GenericObject o3 = new GenericObject(MyType.AWTPOINT);
        o3.valueOf("4,-30");

        System.out.println(o1);
        System.out.println(o2);
        System.out.println(o3);

    }

} 
```

这个想法很简单，每次需要支持新类型时，添加一个枚举元素。抽象方法将迫使您实现存储、验证和解析（保存在 db 上是下一个？）您的值所需的一切。每次您需要一个新功能（是的，例如保存在 db 上）时，添加一个新的抽象方法，您将被迫为您决定支持的每种类型实现它。

希望这可以帮助。

# php - $_POST 数据在双引号后被截断

> ID：14244611
> 
> 赞同：0
> 
> 时间：2013-01-09T19:07:35.467
> 
> 标签：php, post, simplexml

我们有一个运行 PHP 5.3 的服务器，带有魔术引号：

magic_quotes_gpc 开 开
magic_quotes_runtime 关 关

每当我们收到一个 POST (CONTENT_TYPE: application/x-www-form-urlencoded) ，其中包含未清理的 XML（在元素有效负载中有引号、&、<、>），SimpleXML 无法解析它。

当我查看原始 $_POST 转储时，XML 从第一个非法字符开始被截断。以前从未见过。

然后，我添加了 htmlspecialchars，一切都很好，XML 能够被 SimpleXML 解析。

```
$payload = htmlspecialchars(stripslashes(trim($postXMLPayload))); 
```

这表明完整的，尽管非法的 XML 确实在 $_POST 数组中，但是当我尝试查看它时，它被截断了。

我正在通过电子邮件发送 $_POST 中的值并对其进行数据库化，在这两种情况下，$_POST 中的值都被截断。

这是我获取 $_POST 值的方法

```
if(isset($_POST)){

foreach($_POST as $k=>$v){

    if(preg_match('/^\<\?xml/',trim($v))){

        $postXMLPayload = $v;
        break;
    }

} 
```

}

有人可以解释一下吗？

谢谢

# c# - Amazon FPS 与 ASP.NET 的集成

> ID：14244612
> 
> 赞同：0
> 
> 时间：2013-01-09T19:07:38.480
> 
> 标签：c#, asp.net, amazon-fps

显然，亚马逊灵活支付服务类似于 Google Checkout（我已经能够实现）。但是我迷失在亚马逊文档中。我什至已经下载了 C# SDK，但仍然不清楚我需要做什么。

我想知道是否有其他人可以分享他们是如何做到的。最好使用 WSDL。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T03:52:58.340

我仍在研究如何去做，因为他们的文档就像一只拿着画笔的猩猩一样有条理，但似乎通常需要执行两个操作：1）发起请求，包括金额等. 其结果将是用户确认购买意图的授权令牌 2) 使用此令牌，您可以完成转移，然后根据需要重定向您的应用程序。

# java - javax.faces.component.UpdateModelException：javax.el.PropertyNotFoundException：

> ID：14244615
> 
> 赞同：2
> 
> 时间：2013-01-09T19:08:00.697
> 
> 标签：java, jsf-2, propertynotfoundexception, icefaces-2

我正在开发一个 JSF2 Icefaces Web 应用程序。我有以下看法：

```
<h:dataTable value="#{myFormBB.userRolesBean.userRoleList}" var="row">
    <h:column>
        <ice:selectBooleanCheckbox value="#{row.teamUser}" /> 
```

保存上述内容时出现以下异常`<ice:selectBooleanCheckbox>`。

```
Application caught instance of: javax.faces.component.UpdateModelException
["http-bio-8081"-exec-9] ERROR com.abc.mp.em.common.ui.exception.handler.ExceptionHandler - error
javax.faces.component.UpdateModelException: javax.el.PropertyNotFoundException: /sections/response/myForm.xhtml @599,78 value="#{row.teamUser}": Property 'teamUser' not writable on type boolean
    at javax.faces.component.UIInput.updateModel(UIInput.java:849)
    at javax.faces.component.UIInput.processUpdates(UIInput.java:731)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1109)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1109)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1109)
    at javax.faces.component.UIComponentBase.processUpdates(UIComponentBase.java:1109) 
```

我已经在支持 bean 中正确定义了属性及其 getter 和设置。

```
protected boolean teamUser;

public boolean isTeamUser() {
    return teamUser;
}

public void setTeamUser(boolean teamUser) {
    this.teamUser = teamUser;
} 
```

这是如何引起的，我该如何解决？我需要使用转换器吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:55:10.800

> value="#{row.teamUser}"：属性“teamUser”在布尔类型上不可写

这个错误基本上是在告诉那`#{row}`是一个`boolean`（或`Boolean`），而它又确实没有一个`teamUser`属性。

这反过来表明`#{myFormBB.userRolesBean.userRoleList}`实际上返回了 a`List<Boolean>`而不是`List<SomeBeanWithTeamUserProperty>`。验证并修复您的模型。

# java - 从数组生成图像 .pgm

> ID：14244618
> 
> 赞同：0
> 
> 时间：2013-01-09T19:08:09.837
> 
> 标签：java, image, pgm

有很多关于读取 .pgm 图像的帖子，但没有或几乎没有关于从数组**生成图像的帖子。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T12:40:05.327

好的，所以我想出了如何将二维数组转换为 pgm 文件:)

```
 try{
     //specify the name of the output..
     FileWriter fstream = new FileWriter("output.pgm");
     //we create a new BufferedWriter
     BufferedWriter out = new BufferedWriter(fstream);
     //we add the header, 128 128 is the width-height and 63 is the max value-1 of ur data
     out.write("P2\n# CREATOR: XV Version 3.10a  Rev: 12/29/94\n128 128\n63\n");
     //2 loops to read the 2d array
     for(int i = 0 ; i<tabDecode.length;i++)
        for(int j = 0 ; j<tabDecode[0].length;j++)
            //we write in the output the value in the position ij of the array
            out.write(tabDecode[i][j]+" ");
     //we close the bufferedwritter
     out.close();
     }
catch (Exception e){
     System.err.println("Error : " + e.getMessage());
} 
```

# mule - 如何在 Mule 表达式求值器中使用三元运算符

> ID：14244621
> 
> 赞同：2
> 
> 时间：2013-01-09T19:08:21.340
> 
> 标签：mule

在我的 Mule 流程中，我想在消息丰富元素中使用三元运算。

例如，以下是当源为空时引发错误的现有行：

```
 <enricher doc:name="Add revision number" target="#[variable:rev]" source="#[json:_rev]"> 

```

这是尝试使用三元运算时的行：

```
 <enricher doc:name="Add revision number" target="#[variable:rev]" source="#[json:_rev == null ? '' : json:_rev]"> 

```

如果从扩充源返回 null，我想改为返回一个空字符串。当 Mule 尝试使用“setProperty()”函数分配空值时，我不希望引发错误。

目前三元示例有效，但它返回“假”（不是字符串）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:12:37.410

这不是 Mule 表达式语言 (MEL)，而是旧的评估器语法，它不支持三元表达式。

编辑：

我建议您获取[MEL 备忘](http://blogs.mulesoft.org/wp-content/uploads/2012/12/refcard-mel.pdf)单，看看 JSON 处理是如何完成的。

从您提供的部分信息来看，我认为您`json-to-object-transformer`在 HTTP 出站端点的响应阶段需要一个（获取 JSON 对吗？）。然后，您可以在浓缩器中使用 MEL 三元表达式。

# c# - 如何使用实体框架在内部从 WCF 将数据提取到客户端

> ID：14244622
> 
> 赞同：2
> 
> 时间：2013-01-09T19:08:23.303
> 
> 标签：c#, .net, wcf, entity-framework

我开发了 WCF 服务，它在内部使用实体框架进行数据库操作。虽然插入、更新和删除工作正常，但我在从该表中选择所有记录并将其公开给客户端时遇到问题。

我向客户公开数据的代码是：-

```
public IQueryable <Bank_Configuration>  SelectBankConfiguration()
        {
            using (EFEntities objEFEntities = new EFEntities())
            {                             
                var Result= from c in objEFEntities.Bank_Configuration 
                            select c;

                return Result;
            }            

        } 
```

但是在客户端，当我使用此方法获取数据时，客户端在接收对“http://localhost:8732/Design_Time_Addresses/WcfServiceLibrary1/Service1/”的 HTTP 响应时出现错误。这可能是由于服务端点绑定未使用 HTTP 协议。这也可能是由于服务器中止了 HTTP 请求上下文（可能是由于服务关闭）。有关更多详细信息，请参阅服务器日志。

为什么会出现此错误以及如何向客户端公开数据

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:11:07.483

您的 EFEntities 对象在 WCF 消息被序列化之前被释放，这就是导致 EF 查询实际执行的原因。通过调用 ToList() 或 ToArray() 在“使用”块内对结果集进行材料化。

```
public IEnumerable<Bank_Configuration>  SelectBankConfiguration()
{
    using (EFEntities objEFEntities = new EFEntities())
    {                             
        var Result= from c in objEFEntities.Bank_Configuration 
                    select c;

        return Result.ToArray();
    }            

} 
```

# r - 使用 R 2.15.2 使用的特定于 limma 的错误消息

> ID：14244625
> 
> 赞同：1
> 
> 时间：2013-01-09T19:08:51.820
> 
> 标签：r, bioconductor, limma

我最近更新了 R，之前使用 limma 包编写的代码现在返回错误。

代码是

```
classes = c(rep('Phenotype1',), rep('Phenotype 2',))
classes= as.factor(classes)
design=model.matrix(~classes-1)
colnames(design)=levels(classes) 
fit1= lmFit(exset, design)
cm=makeContrasts(Phenotype 1 - Phenotype 2, levels=design)
fit2= contrasts.fit(fit1,cm) 
fit3= eBayes(fit2) 
```

使用新版本的 R，以下命令

```
fit2= contrasts.fit(fit1,cm) 
```

返回此错误消息...

```
Error in .Call("La_chol", as.matrix(x), PACKAGE = "base") : 
Incorrect number of arguments (1), expecting 2 for 'La_chol' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:45:33.080

limma 是来自 BioConductor 项目的一个包，每个版本的 R 都有一个关联的 BioConductor 版本。如果您在没有更新 BioConductor 软件包（包括 limma）的情况下更新了 R，则可能存在一些不兼容性。您确定您使用的是最新版本的 limma 和 BioConductor 吗？

# c++ - 获取自 C++ 纪元以来的天数（跨平台）

> ID：14244627
> 
> 赞同：2
> 
> 时间：2013-01-09T19:09:05.190
> 
> 标签：c++, cross-platform, epoch, mktime

我如何计算 C++ 纪元以来的天数，我知道我应该使用`mktime`函数，但我不明白如何实现它

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:13:25.460

[从cplusplus.com](http://www.cplusplus.com/reference/ctime/time/)修改一些示例代码：

```
#include <stdio.h>
#include <time.h>

int main ()
{
  time_t seconds;

  seconds = time (NULL);
  int daysSinceEpoch = seconds/(60*60*24);
  printf ("%ld days since January 1, 1970", daysSinceEpoch);

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T20:04:24.017

日期不容易正确使用。今天的标准库不提供正确执行此操作的能力。您应该使用适当的日期库，例如 boost::date 或[Howard Hinnant 的`<date>`](http://home.roadrunner.com/~hinnant/bloomington/date.html)。

使用 Hinnant 的库，代码可能看起来像这样：

```
date epoch = year(1970)/jan/day(1); // Assuming you're referring to the traditional Unix epoch (some systems such as Cocoa on OS X use the first day of the millenium, Jan 1, 2001 as their epoch)
days d = date::today() - epoch; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:36:51.530

从获取当前时间开始，使用`time(NULL)`. 将该值传递给`gmtime`，它会返回一个`tm*`. 阅读`tm`.

# windows-8 - 如何将 Windows 8 Metro 中的图像（头像）保存到我选择的位置而不是用户？

> ID：14244629
> 
> 赞同：0
> 
> 时间：2013-01-09T19:09:11.497
> 
> 标签：windows-8, microsoft-metro

我可以找到大量使用文件选择器并让用户决定保存位置的示例。我想要做的是将图片的副本保存在 Metro 应用程序的私人存储文件夹中作为 png 文件。用户选择文件，但他们不需要选择存储它的位置......

我看到了这个答案：

[在 Windows 8 Metro App 中将图像从“我的图片”文件夹保存到本地应用程序文件夹](https://stackoverflow.com/questions/12569642/save-image-from-my-pictures-folder-to-local-app-folder-in-windows-8-metro-app)

我今晚回家后会尝试，希望我可以给文件选择器存储位置并绕过用户....有人有解决方案吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:44:43.133

您的应用程序始终可以将文件存储在其[LocalFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder.aspx)中（如您提到的链接所示）而无需请求许可，但其他位置将需要用户参与。 [LocalFolder](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.applicationdata.localfolder.aspx)几乎是“应用程序的私人存储文件夹”，因此应该可以满足您的需求。

有一些特殊的文件夹，比如图片库，你可以在你的应用清单中声明为功能，然后用户基本上是通过安装你的应用来授予访问权限的。这里的假设是用户选择了该访问权限，因为他们看到您的应用程序需要该功能并且他们可以接受。

最后，您可以使用第一次用户运行的场景，您要求他们使用[FolderPicker](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.pickers.folderpicker.aspx)来指示存储文件的位置。一旦他们授予对文件系统上某个位置的访问权限，该权限就可以通过[AccessCache](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.accesscache.aspx)持续存在，因此您不必再次询问

# javascript - Shadowbox 3.0.3 在 shadowboxed 窗口关闭时重新加载父级

> ID：14244631
> 
> 赞同：0
> 
> 时间：2013-01-09T19:09:16.890
> 
> 标签：javascript, shadowbox

我想知道当你关闭 shadowbox 时是否有办法重新加载父页面。基本上我有一个页面，其中列出了我所有的类别。我用shadowbox调用edit.php？页面来完成我的所有编辑，我想重新加载名为 shadowbox 的父页面，以便应用所做的任何更改，而无需用户刷新父页面。

我在谷歌搜索后找到了这个[ [http://shadowbox.1309102.n2.nabble.com/Reload-parent-page-on-close-td4190962.html](http://shadowbox.1309102.n2.nabble.com/Reload-parent-page-on-close-td4190962.html) ]，但是在shadowbox.js（免费版）中我找不到任何该帖子中提到的相关代码。

有任何想法吗 ？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:49:17.063

真的很简单，有一个onClose-event：

```
Shadowbox.init({onClose:function(){location.reload();}}); 
```

# iphone - 如何将单元格中的第三个值传递给另一个表视图控制器

> ID：14244632
> 
> 赞同：0
> 
> 时间：2013-01-09T19:09:17.783
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我有`UITableViewController`a`textLabel`和 a ，问题是我`detailTextLabel`想传递一个让我们说“隐藏”的第三个值，它`URL`有 一个做这个？`UITableViewController``didSelectRowAtIndexPath`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:31:59.173

您可以将字典发送到下一个 TableView。将 SecondTableView 控制器 .h 文件导入 FirstTableView 控制器，然后引用目标字典。您还需要实现 prepareForSegue 并在 didSelectRowAtIndexPath 中调用它。像这样的东西：

在 didSelectRowAtIndexPath: 中：（如果您正在使用它，请确保在 Storyboard 中设置 segue 标识符）。

```
[self performSegueWithIdentifier:@"toSecondTableViewController" sender:nil]; 
```

在 SecondTableViewController.h 创建你的字典

```
@property (nonatomic, retain)NSMutableDictionary *selectedDictionary; 
```

确保在 SecondTableViewController.m 文件中合成它。

然后在你的 FirstTableViewController

```
#import SecondTableViewController.h 
//prepareForSegue
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([segue.identifier isEqualToString:@"toSecondTableViewController"])
    {
        //create the dictionary to store the information from the array
        NSDictionary *dictionaryToPass;
//MainTable is your TableView in your TableViewController
        NSIndexPath *indexpath = [self.MainTable indexPathForSelectedRow];
        NSLog(@"IndexPath is: %@",indexpath);
        //load correct information based on indexpath selected

            dictionaryToPass = [array objectAtIndex:indexpath.row];

        //create the view for the segue
        SecondTableViewController *secondTable = segue.destinationViewController;

//pass the dictionary
        seriesTable.selectedDictionary = dictionaryToPass;
    }
} 
```

然后，您可以在 SecondTableViewController 中引用 selectedDictionary 中的键并获取该 URL。

# padding - 为什么在这个 C 程序中不进行字节填充？

> ID：14244638
> 
> 赞同：0
> 
> 时间：2013-01-09T19:09:31.487
> 
> 标签：padding

根据字节填充，在 32 位操作系统中，[当计算机的字大小为 4 字节（一个字节表示 8 位）时，CPU 可以按此处给出的 4 的倍数寻址内存，要读取的数据应该位于内存偏移量是 4 的某个倍数。如果不是这种情况，例如数据从第 14 个字节而不是第 16 个字节开始，则计算机必须读取两个 4 字节块并在读取请求的数据之前进行一些计算，否则可能会产生对齐错误。即使前一个数据结构在第 14 个字节结束，下一个数据结构也应该从第 16 个字节开始。在两个数据结构之间插入两个填充字节，以将下一个数据结构与第 16 个字节对齐。](http://en.wikipedia.org/wiki/Byte_padding#Data_structure_padding)

```
#include<stdio.h>
struct test {
        char a;
        char b;
        int c;
        int d;
};
void main() {
        int a,b;
        char c,d;
        printf("Address of a & b = %u & %u respectively\n",&a,&b);
        printf("Address of c & d = %u & %u respectively\n",&c,&d);      
        struct test t1;
        printf("The size of structure:::%d\n",sizeof(t1));
} 
```

输出是：

```
Address of a & b = 3216087804 & 3216087808 respectively
Address of c & d = 3216087802 & 3216087803 respectively
The size of structure:::12 
```

当我以这种方式声明结构时：

```
struct test {
        char a;
        int b;
        int c;
        char d;
}; 
```

在这种情况下输出：

```
The size of structure:::16 
```

为什么当我们尝试访问内存中奇数位置的 secord char 变量或地址为 4 的倍数时不存在的变量时不会发生对齐错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:20:25.350

在这两种情况下都进行了填充。在您提供的代码中，`char b`不需要填充，因此不需要填充。`int c`需要两个字节的填充（我假设典型的 x86 规则）并得到它。结构的总大小为 10 字节数据 + 2 字节填充，用于指示的 12 字节。

在单独的情况下，`int b`需要三个字节的填充，整个结构需要另外三个字节来放置`char a`一个 4 字节的边界地址。10 字节的数据 + 3 + 3 字节的填充得到 16 字节。

# c++ - 为什么用非常量声明静态变量不会在g ++中给出错误

> ID：14244644
> 
> 赞同：14
> 
> 时间：2013-01-09T19:10:05.073
> 
> 标签：c++, c

```
 int main ( )
 {
       int a = 1 ;
       static int b = a ;
 } 
```

这段代码在**gcc 4.3.2**中给出了错误

> 错误：初始化元素不是常量。

但它在**g++ 4.3.2**上运行良好。有人请解释为什么这在 g++ 4.3.2 中没有给出错误。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-09T19:10:54.343

因为它在 C++ 中有效（在 C 中无效）。

> （C++11, 6.7p4）“具有静态存储持续时间的块范围实体的常量初始化（3.6.2），如果适用，在其块首次进入之前执行。[...]否则这样的变量是在控件第一次通过其声明时初始化；这样的变量在其初始化完成时被认为已初始化。"

# c - Creating a frontend for vim

> ID：14244654
> 
> 赞同：0
> 
> 时间：2013-01-09T19:10:59.907
> 
> 标签：c, user-interface, vim

I am huge fan of vim and I use it daily for almost every editing task. I realize that vim is made to be used in terminal and that's great, because it makes it usable on servers without desktop environment etc. But I also like pretty applications with neat graphical interface and additional features like projects or ftp clients (I know there are vim plugins for almost anything, but I prefer comfort that for example IDEs provide), so I searched for vim-like alternatives with pretty GUI. Obviously, I ran into Sublime Text, which is almost perfect, but lacks some of the vim's power. That made me think, would it be possible to take vim's source code and build a nice frontend for it? Well.. of course it would be possible, but **my question is**, how hard and time-consuming would it be, and what would be the best approach? Or is there already such project that I haven't found?

Thanks for your answers!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T21:26:27.717

至少有[一个围绕 Vim 构建的 IDE](http://code.google.com/p/pida/)。它带有一个基于 GUI 的文件树和符号树以及其他一些细节，但是编辑器组件仍然是普通的 Vim，因此在外观部门没有太多“改进”。

在 Mac OS X 上，MacVim 很好地集成到了整个 Mac UX（本机快捷方式、.app 包……）中，但它仍然是 Vim。甚至还有一个提供“本机”文件抽屉的叉子。那里也没有“改进”可言。

据我所知，除了 Linux/Windows 上的 GVim 之外，这些是在 GUI 端完成的唯一工作示例。等待！最近还有一个基于 QT 的项目。

不管怎样，这些项目所做的是将各种 GUI 小部件“固定”到 Vim 核心并将它们绑定到内部东西。你的想法似乎是完全不同的事情。你没有准确地解释你想要什么，所以我不得不推断一下。我想你可能会喜欢：

*   圆角
*   阴影
*   渐变
*   动画
*   图形用户界面主题
*   鼠标友好
*   平滑滚动
*   …</li>

我不熟悉 Vim 的内部结构，但我很确定破解所有这些方面将代表大量工作。*Vim，无论是在 shell 中还是作为 GVim/MacVim，都使用文本绘制所有*内容，具有相当陈旧的学校输入系统或者甚至不是多线程的简单事实，这对 IMO 来说是一个*巨大*的挑战。

* * *

关于你的问题……</p>

你问如何或是否有可能为 Vim 构建一个“漂亮”的 GUI，你建议 ST2 作为基线。

首先，并不是每个人都对 ST2 本身或其外观有很高的评价。一方面，我认为这是 UX/视觉设计方面的噱头和不一致的东西，并且总体上是一个动力不足的编辑器。我很难想象为什么有人会认为它在任何方面都比 Vim “更好”。

此外，并不是每个人都认为 Vim 或 GVim 的设计/用户体验很糟糕。我敢打赌，大多数 vimers 实际上喜欢它。基于文本的 UI 对我们很多人来说都很有价值，而且我不认为我是唯一一个不认为向 Vim 添加渐变、圆角和阴影会以任何方式使它变得更好的人。当然，我可能是错的。正如您所写，vim 的一个优势在于您可以在终端中使用它。你的项目——或者我认为是你的项目——听起来很像向 GUI Vim 添加很多东西，这在终端 Vim 中毫无意义。对我来说，将两者脱钩听起来是一个非常糟糕和浪费的想法。

如果你*真的*想让 Vim 变得更好，我可以建议一堆其他方面吗？一个统一的插件 API、一个更好的外部语言 API、多线程、现代化输入系统……还有很多工作要做。而且我会说这比添加毫无价值的眼睛糖果要重要得多。

为了启动建设性的讨论，您应该*真正*提供：

*   你想在 vim 中看到的那些细节的评论列表，
*   为什么这些细节会被认为是“改进，
*   实施思路。

哦！SO 绝对*不是*讨论此类事情的合适场所。

# unix - 在 Unix 中提取具有重复字段的记录（不使用 uniq！）

> ID：14244660
> 
> 赞同：0
> 
> 时间：2013-01-09T19:11:13.563
> 
> 标签：unix, uniq

我有一个文本文件，其中包含字段 1 中的可变长度键字段和字段 2 中的其他数据。这些字段由制表符 ("\t") 分隔。关键字段包含空格。文件按关键字段排序。

我想对此进行过滤以创建一个文件，该文件仅包含具有重复键字段（即字段 1）的那些记录，另外还可以使用空行分隔记录组。

例如

```
01001|XYZ ZY|\tFOO MAN CHU\n
01001|XYZ ZY|\tBAR BAZ\n

01001|ZZZYYYXX|\tYACKETY YACK\n
01001|ZZZYYYXX|\tBOBBITY BOP\n
01001|ZZZYYYXX|\tTESTING TESTING\n 
```

...ETC。换句话说，`uniq -d -D`如果它为备用字段定界符或可变长度字段提供任何选项，那么它会做什么！

有没有办法在使用现成的 Unix 过滤器的命令中完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T22:11:26.073

按照 olivier 的建议尝试 awk，如果在 solaris 上使用 nawk 代替：

```
awk -F '    '  '{arr[$1]++; next} 
               END{for(i in arr)
                   {if(arr[i]>1) {print i}}  } ' infile > keyfile 

awk -F '    '  'FILENAME=="keyfile" {arr[$1]=1;next}
              FILENAME=="infile"  
                   {if( $1 in arr){print $0}} ' keyfile infile > newfile 
```

对于 awk 新手来说，这可以变得更短但更令人困惑。-F ' ' <- 在 '' 之间有一个制表符。

```
awk -F '    '  'NR==FNR {arr[$1]++; next}                                  
              (NR>FNR && arr[$1]>1) {print} '   infile infile > newfile 
```

更难理解的版本

# datatables - 单击下一个/上一个时将滚动条移动到第一行 - 数据表

> ID：14244661
> 
> 赞同：3
> 
> 时间：2013-01-09T19:11:21.757
> 
> 标签：datatables

我`datatable`用于在网格中显示数据，除了一个问题（化妆品问题）外，一切正常。

当用户转到第 1 页的末尾（现在滚动条位于网格的末尾）并且当他们单击任何分页按钮（下一个/上一个/第一个/最后一个）时，滚动条不会回到顶部相反，它保持与上一页相同的位置。有没有办法重置滚动条位置？

编辑：我在这里提到的滚动条是`datatable`滚动条（类：dataTables_scrollBody）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T23:02:37.290

我想出了一种将滚动条移动到数据表顶部的方法。只需要将它添加到 fndrawcallback 函数中.. 分享下面的代码.....

```
"fnDrawCallback": function(o) {
                    $('.dataTables_scrollBody').scrollTop(0);
                } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:15:23.060

您可以使用 Javascript 爬到顶部：[http ://www.w3schools.com/jsref/met_win_scrollto.asp](http://www.w3schools.com/jsref/met_win_scrollto.asp)

```
<a onclick="window.scrollTo(0,0)">next / previous / first / last</a> 
```

或者您可以在页面顶部创建一个 HTML-Anchor：[http ://www.hypergurl.com/anchors.html](http://www.hypergurl.com/anchors.html)

```
<a name="top">Put this to the top of your page</a>

<a href="#top">next / previous / first / last</a> 
```

# c# - 硬件有限的 Inide 3D 游戏开发

> ID：14244666
> 
> 赞同：-4
> 
> 时间：2013-01-09T19:11:44.420
> 
> 标签：c#, c++, opengl, tao-framework

我在 VB、C#/Java 方面有丰富的经验，而在学校和我自己的兴趣/家庭参与方面，我在 C 方面的经验略少。我已经创建了许多 2D 横向卷轴游戏，无论是使用库还是完全从头开始。我没有很多钱，所以自从大约 5 年前我拿到现在的电脑后，我就没有升级/购买新电脑（台式机或替换笔记本电脑）。它运行得相当慢（大约 1.4ghz，有 2gb 内存，没有死图。我运行 Windows（Vista））

我对游戏的想法是一个静态结构，例如塔楼或起重机，玩家（通过第一人称视角）将在其上四处走动并与对象互动以完成游戏 - 很像 Portal 风格的游戏，只是没有传送门或任何手中的物品。

我更喜欢将 C# 与 OpenGL 库上的 TAO 框架包装器一起使用，但我知道这不是每个人的首选。

那么：这种 C# + TAO 方法是一个好方法，还是我应该放弃它并使用 OpenGL 和 C/C++ 或其他可能更容易使用的语言+包装器/工具包？

第一人称视角是否比第三人称视角更难为游戏隐含？（我认为首先更容易，因为您不必使用播放器模型和动画以及它们背后的代码）

在我有限的硬件上，像 OpenGL 这样的图形/CPU 密集型游戏是否值得玩，还是对我当前（缺乏）的计算机来说更具挑战？如果不是 - 他们是否可以使用其他任何 3D 替代品 - 例如在我的计算机上（仅）运行的 Blender 游戏引擎？

我会更好地使用一些预先编写的引擎和/或图形扩展库，还是因为这更像是一次学习冒险，所以自己编写很多“引擎”之类的代码是个好主意吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:25:16.847

OpenGL 已经存在了很长时间，它应该可以按预期工作。

只需使用您当前的硬件创建您的游戏，利用这些限制来学习如何优化您的代码和图形，使其尽可能流畅地运行。

检查 OpenTK（它取代了 TAO）库并运行 demo/samples；这些应该可以很好地指示您的硬件可以用它们做什么。

请记住，这些天在手机上运行着很棒的游戏；那些资源真的很有限。

祝你好运。

# windows - 在 Windows 64 位上使用自定义堆栈实现沙箱

> ID：14244667
> 
> 赞同：19
> 
> 时间：2013-01-09T19:11:47.793
> 
> 标签：windows, assembly, exception-handling, sandbox, x86-64

我目前正在研究如何实现一个沙箱（类似于[Google 的 NaCl 项目](http://code.google.com/p/nativeclient)），我可以在其中运行不受信任的 x86 代码（受限指令集），这样它就不会损害我的其余进程。

与 NaCl 不同，不受信任的代码不会在单独的进程中运行，而是在与主机应用程序相同的进程中运行。因此，一个关键步骤是让 Windows 的结构化异常处理正确，以便在 Windows 杀死我的主机应用程序之前捕获错误（如无效的内存访问或 div 为 0）并优雅地终止沙箱。（NaCl 不会遇到这些问题。沙箱是一个单独的进程，如果出现错误，就会被杀死。）

此外，沙盒代码不应使用主机应用程序堆栈，而应在我分配的某个单独的“堆栈”上运行。

正是这种组合（在存在自定义分配堆栈的情况下进行异常处理）正在扭曲我的想法。我检查了[Go](http://golang.org)和[Factor](http://factorcode.org/)的语言实现，它们做类似的事情，并在这个帮助下运行了一些东西。

但仍有一些悬而未决的问题和不确定性。所以我想我会利用 Stack Overflow 的奇妙知识来获得一些意见:-)

以下是精简到核心问题的工作代码片段：

**代码.cpp**

```
#include <Windows.h>
extern "C" void Sandbox();

// just a low level helper to print "msg"
extern "C" void Write(const char* msg)
{
    WriteFile(GetStdHandle(STD_OUTPUT_HANDLE),
              msg, (DWORD)strlen(msg), NULL, NULL);
}

// should be called first on error and continue exception handling
LONG __stdcall GlobalExceptionHandler(_EXCEPTION_POINTERS*)
{
    Write("GEH ");
    return EXCEPTION_CONTINUE_SEARCH;
}

// should be called afterwards on error and terminate the process
// of course this is just a stub to simplify the issue
// in real world it would just terminate the sandbox
extern "C" EXCEPTION_DISPOSITION __stdcall FrameExceptionHandler(
        PEXCEPTION_RECORD, ULONG64, PCONTEXT, PVOID)
{
    Write("FEH ");
    ExitProcess(42);
}

void main()
{
    AddVectoredExceptionHandler(1, GlobalExceptionHandler);
    Sandbox();
    // never reach this...
    ExitProcess(23);
} 
```

**代码.asm**

```
EXTERN FrameExceptionHandler:PROC
EXTERN malloc:PROC

.code

Handler:
    jmp FrameExceptionHandler

Sandbox PROC FRAME : Handler
    ; function prologue compliant with Windows x86_64 calling conventions
    ; saves rsp to the "frame-pointer" r15
    push r15
    .PUSHREG r15
    sub rsp, 20h
    .ALLOCSTACK(20h)
    mov r15, rsp
    .SETFRAME r15, 0h
    .ENDPROLOG

    ; set rsp to the top of a "heap allocated stack" of size 0x10000 bytes
    mov rcx, 10000h
    call malloc
    lea rsp, [rax+10000h]

    ; got this from implementation of the Go language runtime:
    ; while unwinding the stack, Windows sanity checks the values of
    ; RSP to be within stack-bounds. Of course RSP is set to our
    ; "heap allocated stack" and not within the bounds of what Windows
    ; thinks should be the stack.
    ; Fix this by adjusting StackBase and StackEnd in the TIB (thread
    ; information block), so that basically the stack is unbounded:
    ; StackBase = 0xffffffffffffffff, StackEnd = 0x0000000000000000
    mov rcx, 0FFFFFFFFFFFFFFFFh
    mov gs:[008h], rcx
    mov rcx, 0
    mov gs:[010h], rcx

    ; trigger an access error by reading invalid memory
    mov rax, 0DEADBEEFh
    mov rax, [rax]

    ; function epilogue - will never get here
    mov rax, 0
    add rsp, 28h
    ret
Sandbox ENDP

end 
```

运行此程序将打印“GEH FEH”，然后以代码 42 优雅地退出。

有没有人对这套`StackBase & StackEnd`“黑客”有更多的了解？我试图将堆栈限制缩小为：

```
 mov gs:[008h], rsp
    mov gs:[010h], rax    ; rax is the address returned by malloc 
```

但它不起作用。它打印“GEH”，然后由于未处理的异常而崩溃。 `FrameExceptionHandler()`永远不会被执行。

我还尝试了更宽松的边界，包括“堆分配的堆栈”以及 Windows 分配的堆栈。但这无济于事。

另一个问题是，你是否知道我可能遇到的其他陷阱。例如，如果 RSP 不均匀，我注意到 Windows 不喜欢它（我猜是因为您永远无法通过在 16 字节对齐的堆栈指针上执行 2/4/8 字节的 PUSH 和 POP 来达到不均匀的 RSP）。

谢谢，乔纳斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T21:32:52.623

在同一进程中运行不受信任的第 3 方代码是自找麻烦。该代码可以以各种方式杀死您的进程。例如，它可以调用`exit()`失败、请求大量内存或写入线程分配的内存。

更安全但不那么难的解决方案是在不同的进程中运行此代码，类似于 Chrome 正在执行的操作。每个 Chrome 扩展程序都在不同的进程中运行，并且数据在进程之间传递。

您的应用程序可以启动一个单独的进程并通过管道、windows 消息、共享内存（内存映射文件）等方式与它通信以共享大数据。

插件（通常）实现了一个接口，因此您需要编写一个代理对象来抽象插件驻留在另一个进程中的事实并隐藏多进程应用程序附带的 IPC 复杂性。gSoap 就是这样一个框架，其他的也存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-03T04:02:10.670

您想要执行代码并检查其有效性。您可以使用自己的沙箱来完成。请参阅 x86 处理器的虚拟盒实现。它可以提供帮助。但是所有的虚拟机都是有代价的：模拟处理器运行底层代码比你的应用程序慢 5-10 倍。

如果您只需要错误检查并在核心 cpu 上运行应用程序，那么您需要在线程中运行它。当线程挂起时，应用程序保持不变。你可以向线程注入一些代码来寻找它的执行。但是这种情况不太安全，因为恶意代码可以破坏您的检查程序并利用它来后门/生根您的系统。

所以，我的回答是：为了安全 - 使用你自己的虚拟机，为了速度 - 在另一个线程中执行。

最好的问候，祝弗拉基米尔好运

# c# - 为什么 (int)double.NaN 和 (int)double.PositiveInfinity 为 0？

> ID：14244668
> 
> 赞同：23
> 
> 时间：2013-01-09T19:11:49.837
> 
> 标签：c#

在**C#**中，如果您`0/0`遇到异常。

但是，如果您`0.0/0`或`0.0/0.0`您分别得到`double.NaN`和`double.Infinity`。

但如果你将这些结果转换为`int`，你会得到 0。

```
> (int)double.PositiveInfinity
0
> (int)double.NaN
0 
```

为什么会这样？运行时不应该给出转换错误，因为无穷大显然不是零吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-09T19:16:13.867

这取决于你所处的上下文类型。如果你使用`checked`上下文，你会得到一个异常。规范的相关部分是第 6.2.1 节：

> 对于从 float 或 double 到整数类型的转换，处理取决于发生转换的溢出检查上下文（第 7.6.12 节）：
> 
> *   在检查的上下文中，转换过程如下：
>     *   如果操作数的值为 NaN 或无穷大，则抛出 System.OverflowException。
>     *   否则，源操作数向零舍入到最接近的整数值。如果这个整数值在目标类型的范围内，那么这个值就是转换的结果。
>     *   否则，将引发 System.OverflowException。
> *   在未经检查的上下文中，转换始终成功，并按如下方式进行。
>     *   如果操作数的值为 NaN 或无穷大，则转换的结果是目标类型的未指定值。
>     *   否则，源操作数向零舍入到最接近的整数值。如果这个整数值在目标类型的范围内，那么这个值就是转换的结果。
>     *   否则，转换的结果是目标类型的未指定值。

因此，在未经检查的上下文中，答案*不一定*是 0 - 它是一个未指定的`int`值。事实上，在我的测试中，它`int.MinValue`在未经检查的上下文中出现而不是 0。

但从根本上说，如果要进行检查，请使用已检查的上下文（至少对于该表达式）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:27:26.830

这主要是因为 double.NAN 和 double.PositiveInfity （或 double.Negative ）不是数字，而是用于识别概念的值。

当操作的结果**未定义**时，方法或运算符返回 NaN 。例如，零除以零的结果是 NaN，如下例所示。

试试这个来说明这个概念。

```
if ((0 / zero) == Double.NaN) 
     Console.WriteLine("0 / 0 can be tested with Double.NaN.");
  else 
     Console.WriteLine("0 / 0 cannot be tested with Double.NaN; use Double.IsNan() instead."); 
```

# java - 我如何利用 JTA 、 Persistence 和 TransactionManager

> ID：14244670
> 
> 赞同：0
> 
> 时间：2013-01-09T19:11:54.627
> 
> 标签：java, model-view-controller, persistence, jta

我正在创建一个 Web 应用程序，我想利用 JTA 来做到这一点，有人可以指导我阅读教程或引导我完成基本操作。

我想谈的主要话题是：

1.  设置持久性
2.  使用用户事务
3.  设置适当的 TransactionManagement

我认为完成这项工作所必需的（片段）

```
// My Model/Entity to be inserted into the database

@Entity
@XmlRootElement
public class Member implements Serializable {

    @Id
    @GeneratedValue
    private Long id;

    @NotNull
    @NotEmpty
    @Email
    private String email;

    public Long getId() {
        return id;
    }

    public void setId(Long id) {
        this.id = id;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }
} 
```

使用上面的实体和下面的特定数据库，我的 persistence.xml 会是什么样子？

*   数据库 URL：jdbc:mysql://localhost:3306/database
*   驱动程序：MySQL JDBC 驱动程序

现在，一旦我设置了 perisistence.xml，我将如何实现事务管理器以将实体提交到数据库。我在下面缺少什么？由于缺少更好的词，我的 TranactionManager 如何关联或连接到我的数据库？

```
public class UserRegistration{
        @Resource
        UserTransaction  transaction;

public void register(Member member) throws Exception {
          try{
                transaction = (UserTransaction)new InitialContext().lookup("java:comp/UserTransaction");
                transaction.begin();
                Member member = new Member();
                member.setEmail("test@hotmail.com");
                member.setId(23L);
                member.setName("tester1");      
                transaction.commit();
          }
          catch(Exception e){
          }
    }     
} 
```

# ruby - 使用数组作为键并生成值以产生哈希

> ID：14244673
> 
> 赞同：1
> 
> 时间：2013-01-09T19:12:20.973
> 
> 标签：ruby

我有一个数组。例如：

```
a = ["foo", "bar", "baz"] 
```

我想将其转换为哈希：

```
h = { "foo" => randomvalue1, "bar" => randomvalue2, "baz" => randomvalue3 } 
```

我想出了以下方法：

```
Hash[* a.map { |value| [value, randomvalue_generator] }.flatten] 
```

我对 Ruby 的经验非常有限，但感觉应该有更简单的方法来做到这一点。主要是，我对降低代码复杂性感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:22:34.213

你的方式很好，除非你不需要`flatten`或`splat`

```
a = ["foo", "bar","baz"]
Hash[a.map{ |k| [k, rand(5)] }]
# {"foo"=>1, "bar"=>0, "baz"=>2} 
```

还有很多其他方法可以做到这一点，但我喜欢你原来的解决方案。

```
a.each_with_object({}){ |k, h| h[k] = rand(5) }

a.inject({}){ |h, k| h[k] = rand(5); h }

a.inject({}){ |h, k| h.merge k => rand(5) }

Hash[a.zip a.map{ |_| rand(5) }] 
```

# python - 如何做一个特殊的时间cronjob？

> ID：14244678
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:12:41.690
> 
> 标签：python, python-2.7, cron

我怎样才能让一个 cronjob 从早上 7 点到下午 12 点每 5 分钟运行一次，然后每小时每 10 分钟运行一次？

*如果你想写一个短代码，请使用python！谢谢：-x

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:19:39.073

使用两个 cron 条目。

一种方法是使用一个 cron 条目在每天 10 点的每一小时运行。然后让另一个 cron 条目在 7 到 12 的 5 上运行。

```
*/10 * * * * *
5,15,25,35,45,55 7-23 * * * * 
```

另一种方式从 7 点到 12 点每 5 分钟运行一次，从 12 点到 7 点每 10 分钟运行一次。

```
*/5 7-23 * * * * *
*/10 0-6 * * * * * 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:16:04.570

如果你想操作 crontab 文件，[这里有一个不错的库](http://pypi.python.org/pypi/python-crontab/)。

如果您想编写能够安排周期性任务的python脚本（如cron那样），[APScheduler](http://packages.python.org/APScheduler/)将是一个不错的解决方案。

# mysql - 分离多个 CONCAT 列

> ID：14244679
> 
> 赞同：2
> 
> 时间：2013-01-09T19:12:42.900
> 
> 标签：mysql

我有这个查询

```
CONCAT_WS('<br>', GROUP_CONCAT(DISTINCT events.ID, events.EVENT_NAME, events.start_datetime SEPARATOR '<br><br>')) AS all_ids 
```

这会产生这样的东西：

```
1Some Event!2013-01-03 21:00:00<br><br>

14Another Event2012-12-31 19:00:00<br><br>

25Friday Event2013-01-10 21:00:00<br><br> 
```

但我也想用 a 分隔每一列，`<BR>`所以结果如下所示：

```
1<BR>
Some Event!<BR>
2013-01-03 21:00:00<br><br>

14<BR>
Another Event<BR>
2012-12-31 19:00:00<BR><BR>

25<BR>
Friday Event<BR>
2013-01-10 21:00:00<br><br> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:16:20.073

```
CONCAT_WS('<br>', GROUP_CONCAT(DISTINCT events.ID + '<br>', events.EVENT_NAME + '<br>', events.start_datetime + '<br>' SEPARATOR '<br><br>')) AS all_ids 
```

在将 BR 标记附加到值之前，您可能必须将列转换为 varchars

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:17:44.090

您应该能够[`CONCAT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat)在每个字段周围使用：

```
CONCAT_WS('<br>', 
    GROUP_CONCAT(DISTINCT 
            concat(events.ID, '<br>'), 
            concat(events.EVENT_NAME, '<br>'), events.start_datetime SEPARATOR '<br><br>')) AS all_ids 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:16:26.487

那你为什么要使用 GROUP_CONCAT 呢？查询列并根据需要输出/格式化它们会更简单。

# javascript - 为什么 Javascript 日期对象中的 1 月 0 日，而年、日、小时……开始为 1？

> ID：14244689
> 
> 赞同：10
> 
> 时间：2013-01-09T19:13:19.220
> 
> 标签：javascript, date

> **可能重复：**
> [从零开始的月份编号](https://stackoverflow.com/questions/1453043/zero-based-month-numbering)

为什么 JS 日期对象中的 1 月为 0 月？例如，我希望此代码段为 2013 年 2 月 8 日创建一个日期项目。相反，它是 3 月。所有其他领域都是直观的。年份和月份和时间一样自然。

```
test_date = New Date(2013, 2, 8); 
```

这背后有什么道理吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-09T19:16:07.090

因为那样你就可以拥有：

```
var monthnames = ["Jan","Feb","Mar"....]; 
```

并通过以下方式访问数组：

```
monthnames[myDate.getMonths()] 
```

同样适用于工作日，其中星期日为 0。

但是，年和日只是数值，而不是更大意义的索引。

旁注：小时、分钟和秒在“人类时间”中也是从零开始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:16:30.817

只有 12 个月，而可以有无数年。所以我认为使用十二个数组来存储月份值会更有效。

# java - 我有错误：找不到符号，但我认为我的变量都已声明和初始化

> ID：14244690
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:13:23.723
> 
> 标签：java

它应该是一个猜词游戏，在猜词之前有 5 次输入辅音的机会。它仍然不完整，但我必须知道这部分程序是否运行良好。我认为给我带来麻烦的变量是辅音，元音，数字这是我的代码： ps im very new to java

```
public class julia1 {

public static void main(String[] args) {

     System.out.print("enter text to guess: ");
     String w = Keyboard.readString();

     String asterix = "";

     for(int c = 0; c < w.length(); c++){
        if(w.charAt(c)==(' ')) asterix = asterix + " ";
        else asterix = asterix + "*";
        }
     System.out.println(asterix);

     for (int trys = 0; trys <=5; trys++){ 
        String temp=""; 
        System.out.print("enter a consonant: ");
        char c1 = Keyboard.readChar();
    for (int i = 0; i < w.length(); i++)
    {
        boolean character  = false, vowel = false, consonant =false,                   number= false;
        if (w.charAt(i) >= 'a' &&w.charAt(i)<='z')
        character = true;

        if (w.charAt(i) >= 'A' && w.charAt(i)<='Z')
        character = true;

        if (character == true){
            switch (w.charAt(i)){
                case 'a': case 'A': case 'o': case 'O':
                case 'e': case 'E':
                case 'i': case 'I':
                case 'u': case 'U': vowel = true; break;

        if (c1 >= '0' && c1 <='9')
            number=true;        
                default : consonant = true;

            }
        }
    }
      for(int c = 0; c < w.length(); c++){ 
          if((w.charAt(c)==c1) && (consonant == true ))
             temp = temp + c1;
             else if (vowel==true) 
                  {temp = temp + asterix.charAt(c);
                  System.out.println("this is a vowel not consonant");
                  }
                 else
                  temp = temp + asterix.charAt(c)&& number==true; 
                  System.out.println("this is not a valid letter");}

       asterix = temp; 
       System.out.println(asterix) ;
} 

  }
 } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-09T19:15:50.373

`boolean character = false, vowel = false, consonant = false, number = false;`您已在循环内声明变量`for`，并尝试在此循环外使用它们，但在其他`for`循环内使用它们。这是您的编译错误的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-09T19:15:53.147

这些变量：

```
boolean character = false, vowel = false, consonant = false, number = false; 
```

在 for 循环中声明，这意味着它们的范围仅限于该 for 循环。当您尝试在下一个 for 循环中重用它们时，它们不再存在。

要么您希望能够知道它们在前一个循环结束时的最终值是什么，在这种情况下，您需要通过在第一个 for 循环之前声明来增加它们的范围。或者你不这样做，你可以简单地在第二个 for 循环中重新声明它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:17:23.293

一个问题是您已经`consonant`在一个 for 循环中声明，然后尝试在另一个循环中使用它。这是不允许的，因为范围`consonant`在您声明它的 for 循环结束时结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:26:21.183

1)

```
 boolean character  = false, vowel = false, consonant =false, 
```

你结束了，但它应该是；

2) 在 for 循环之外定义你的字符、元音、辅音，否则它将只限于那个 for 循环。

如果将它们定义为类变量，则无需初始化为 false，其默认值为 false。

```
public class julia1 {

 boolean character, vowel , consonant ;

 public static void main(String[] args) { 
```

3） `temp = temp + asterix.charAt(c)&& number==true;`线路无效

# google-apps-marketplace - Google 应用清单范围问题

> ID：14244703
> 
> 赞同：2
> 
> 时间：2013-01-09T19:14:22.727
> 
> 标签：google-apps-marketplace, google-provisioning-api

我正在尝试获取 Google Marketplace 应用程序以获取运行 Provisioning API 的权限。在测试域上安装时，安装过程会跳过授予访问部分，并且似乎没有提供所需的权限。该[文档](https://developers.google.com/google-apps/marketplace/manifest)似乎表明添加具有正确 url 的范围标记足以让新安装授予对该域的访问权限。该应用程序尚未列出。

这是应用程序清单：

```
<?xml version="1.0" encoding="UTF-8" ?>
<ApplicationManifest xmlns="http://schemas.google.com/ApplicationManifest/2009">
  <Name>App</Name>
  <Description>My Cool App</Description>

  <Support>
    <Link rel="support" href="http://www.example.com/support" />
  </Support>

  <Extension id="navLink" type="link">
    <Name>App</Name>
    <Url>http://www.example.com/</Url>
    <Scope ref="userprovisioning" />
  </Extension>

  <!-- Declare our OpenID realm so our app is white listed -->
  <Extension id="realm" type="openIdRealm">
    <Url>http://www.example.com/</Url>
  </Extension>

  <Edition id="free">
    <Name>Free edition</Name>
  </Edition>

  <Scope id="userprovisioning">
    <Url>https://apps-apis.google.com/a/feeds/user/#readonly</Url>
    <Reason>This application lets you see people in your domain.</Reason>
  </Scope>
</ApplicationManifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:56:41.450

如果您明确定义一个版本，您还需要包含对扩展的引用，就像扩展引用范围一样。在您的情况下，将清单更新为：

```
<Edition id="free>
  <Name>Free edition</Name>
  <Extension ref="navLink"/>
  <Extension ref="realm"/>
</Edition> 
```

# symfony - 持久化实体时未触发 Symfony2 prePersist

> ID：14244707
> 
> 赞同：0
> 
> 时间：2013-01-09T19:14:44.473
> 
> 标签：symfony, orm, annotations, doctrine, symfony-2.1

我遵循了本教程：[http ://symfony.com/doc/current/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks](http://symfony.com/doc/current/cookbook/doctrine/file_uploads.html#using-lifecycle-callbacks)

但是**prePersist**没有被触发（但实体被持久化到数据库中）。

```
 $media = new Media();
   $form = $this->createFormBuilder($media)
            ->add('file')
            ->getForm();

        if ($request->isMethod("POST")) {
            $form->bindRequest($request);

            if ($form->isValid()) {
                $em = $this->getDoctrine()->getManager();

                $em->persist($media);
                $em->flush();
            }
    } 
```

**实体：** [http](http://dpaste.com/869771/) ://dpaste.com/869771/ （我刚刚复制并粘贴到课堂上的一些代码）

我添加了

```
die("test"); 
```

到上传功能，但它没有被调用。那么怎么了？有任何想法吗？我正在使用 sf 2.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-10T00:43:45.937

假设您在 pastebin 中粘贴的代码是准确的，那么问题是您正在尝试混合 xml 映射和注释映射。您需要使用一种或另一种方法。

此链接：[http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/events.html)

显示如何将生命周期映射添加到 xml 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:58:52.500

> 但是 prePersist 没有被触发......上传功能

它不会被触发，因为您在 upload() 方法上使用**PostPersist()**而不是**PrePersist()**

PostPersist 在保存后被触发，而 PrePersist 在保存之前被触发！所以你会在保存之后而不是之前看到“死亡”。

此外，当使用 PrePersist 时，您的实体还没有 id，而使用 PostPersist 时，它会分配一个 id。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:13:40.893

我不确定，但我认为因为您的**Media**实体没有任何映射字段，所以会忽略事件。
例如，尝试映射该`name`字段以查看它是否有效。
另外，请阅读有关[跟踪政策](http://docs.doctrine-project.org/projects/doctrine-orm/en/2.0.x/reference/change-tracking-policies.html)的信息。

# javascript - 如何让javascript替换函数匹配每个出现而不仅仅是外部出现

> ID：14244711
> 
> 赞同：2
> 
> 时间：2013-01-09T19:14:53.023
> 
> 标签：javascript, regex, replace

给定以下文本：

```
This <em>is</em> just <em>example</em> text. 
```

我想用这种方式替换`<em>...</em>`，`\i...\i`所以我尝试了替换方法。

```
replace( /<em>(.+)<\/em>/, "\\i$1\\i" ) 
```

但结果文本是：

```
This \iis</em> just <em>example\i text. 
```

如您所见，它取代了外部匹配，但`"</em> just <em>"`中间的匹配保持不变。我希望它替换匹配的每次出现，因此每个实例`<em>...</em>`都替换为`\i...\i`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:18:12.677

我们使用贪婪的方法是什么`?`：

```
str.replace(/<em>(.+?)<\/em>/g, "\\i$1\\i");

// >> "This \iis\i just \iexample\i text." 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:20:41.207

尝试这个：

```
"This <em>is</em> just <em>example</em> text.".replace(/<\/?em>/gi, "\\i"); 
```

解释：

```
/<\/?em>/gi 
```

`/gi`全局并忽略大小写（接受“​​em”、“Em”、“eM”、“EM”，你懂的）

`\/?`有还是没有 /

# matlab - 使用 NaN 的预分配矩阵的索引循环中的下标分配维度不匹配

> ID：14244714
> 
> 赞同：1
> 
> 时间：2013-01-09T19:15:22.320
> 
> 标签：matlab, loops, csv, indexing, nan

我正在使用气象数据集，需要从许多 csv 文件中提取一列并将结果编译到一个新文件中。我让它工作了一个月，但脚本在遇到更短的月份时卡住了（下标分配维度不匹配）。有道理，但是，我希望它简单地保留占位符矩阵 D 中最初存在的 NaN 值。

这是脚本的问题部分，

```
%Convert dates to matlab date numbers and get number of rows
Date = datenum(Date{1, 1}, 'dd-mm-yyyy');
T = size(Date, 1);    

%# Preallocate a matrix to hold all the data, and add the date column
D = [Date, NaN(T, NumFile)];

%# Loop over the csv files, get the eleventh column and add it to the data matrix
for k = 1:NumFile
FileList = dir('*.csv');
NumFile = size(FileList,1);
    filename = FileList(k).name;
    disp(filename);
    %# Get the current file name
    CurFilePath = filename;

    %# Open the current file for reading and scan in the second column using numerical format
    fid1 = fopen(CurFilePath, 'r');
    CurData = textscan(fid1, '%*s %*s %*s %*s %*s %*s %*s %*s %f %*[^\n]', 'Delimiter', ',"', 'HeaderLines', 17, 'MultipleDelimsAsOne',true);
    fclose(fid1);

    %Add the current data to the cell array
    D(:, k+1) = CurData{1, 1};
end 
```

那么，如何才能将较短的月份强制为 31 天月份的大小以适应占位符矩阵 D。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:55:36.287

当您`D`在一维中使用冒号运算符进行分配时，Matlab 必须假设您正在分配行中的所有元素。要解决此问题，只需将冒号与`1:numberOfDaysInMonth`.

`numberOfDaysInMonth`你可以计算为`size(CurData{1, 1},1)`

总之，将脚本中的倒数第二行替换为：

```
%Add the current data to the cell array
numberOfDaysInMonth = size(CurData{1, 1},1);
D(1:numberOfDaysInMonth, k+1) = CurData{1, 1}; 
```

# java - 如何识别 NAT 后面的服务器 Socket 端口

> ID：14244718
> 
> 赞同：2
> 
> 时间：2013-01-09T19:15:32.920
> 
> 标签：java, tcp, serversocket

我的 PC_1 中有一个服务器套接字等待接受。PC_2 想要连接该服务器套接字。但是 PC_1 和 PC_2 在 NAT 之后。所以PC_2不知道PC_1监听的真正端口是什么。我想要一种机制来识别这个服务器套接字外部端口。**我不想在 router(NAT) 上转发​​我的端口**。我知道这可以通过 TCP 打孔来完成。但是我没有找到从服务器套接字发送数据包的方法。那么我可以做到这一点的方法是什么。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-14T18:30:37.687

我看到没有转发，但我不知道您的意思是手动还是通过编程。如果你不介意用一点编程来做，那么你应该看看[Cling](http://4thline.org/projects/cling/)。

# node.js - 来自本地 httpd（节点）的 jQuery .load()

> ID：14244733
> 
> 赞同：0
> 
> 时间：2013-01-09T19:16:28.193
> 
> 标签：node.js, jquery

Node.js 服务器

```
var http = require("http");
http.createServer(function(request,response){
    console.log("client connected");
    response.writeHeader(200,{"Content-type": "text/html"}); 
    response.write("Hello ;-)");
    response.end();
}).listen(9090); 
```

我尝试将服务器输出加载到 ID 为“myDisplayField”的 div 中：

```
$("#myDisplayField").load("http://localhost:9090"); 
```

（HTML 文件位于我的本地 httpd 上）

我遇到的问题是节点服务器可能会显示他收到了来自 ajax 的请求（“客户端已连接”），但是“Hello ;-)”/站点内容没有按预期加载到 #myDisplayField .

如果我设置一个像 Apache 这样的网络服务器并在 htdocs 中放置一个带有“Hello ;-)”的 index.html，那么整个事情就很好了。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T20:33:53.343

我刚刚尝试了您的代码，然后导航到 localhost:9090 会按预期显示“hello”正文。

可能是 jquery 的 load() 方法查找其他数据 - 例如，标题中的内容类型 - 您非常简单的响应没有提供。您应该使用更高级别的服务器，例如 express，而不是单独构建每个 http 响应：

```
var express = require('express');
var app = express();

app.use(function(req, res, next) {
  res.send('Hello');
});

app.listen(9090); 
```

# spring - 从 ServiceActivator 与 Filter 抛出异常的行为不同

> ID：14244738
> 
> 赞同：0
> 
> 时间：2013-01-09T19:16:39.560
> 
> 标签：spring, spring-integration

在我们的应用程序中，我们有错误处理机制，我们在错误中抛出运行时异常。我注意到一个奇怪的行为，我想了解这个行为背后的机制

1）情况一：ServiceActivator抛出的异常转化为MessageHandlingException

当 ServiceActivator 发生错误时，我们会抛出异常。我们在 ErrorChannel 上收到的消息有 PayLoad`org.springframework.integration.MessageHandlingException`和实际抛出的异常 `cause`

2) 情况 2：Filter 抛出的异常没有被 MessageHandlingException 屏蔽

当 Filter 发生错误，我们抛出异常时，PayLoad 是实际异常，不会被`org.springframework.integration.MessageHandlingException`

我有几个问题：

*   为什么从 ServiceActivator 抛出的异常行为与在 Filter 中不同
*   在使用 errorChannel 和相关基础设施的同时，在 Spring 集成项目中是否有一些围绕错误处理的“最佳实践”

**更新1：**

过滤器扩展了作为过滤器链一部分的 AbstractFileListFilter - 实现 FileListFilter 的自定义 CompositeFileFilter

CompositeFileFilter 被 file:inbound-channel-adapter 使用，并将输出传递到下面声明的 Channel：

```
<int:channel
  id="channelForFilesComingIn"
  datatype="java.io.File"
>
   <int:dispatcher task-executor="dispatchExecutor" />
</int:channel> 
```

**更新 2：**

我们正在尝试做的是从文件系统读取文件并处理它们。在文件读取部分，使用`file:inbound-channel-adapter`CompositeFilter 过滤未完全上传或不符合命名标准的文件。

在所有过滤器都通过后，将文件移交给 ServiceActivator 进行处理

在上述任何一个（过滤器链或服务）中，如果出现错误情况，则必须将其报告给数据库并通过电子邮件报告。为了实现这一点，我们抛出了由 errorChannel 捕获的 ApplicationException，并传递给专门的通道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T23:59:04.673

为了清楚`MessageHandlingException`起见，当消息处理程序失败时抛出（包装用户异常） - 消息处理程序是处理消息的东西。

如果在 中引发异常`MessageSource`，则还没有消息，因此 a `MessageHandlingException`（或 any `MessagingException`）不适用。

相反，轮询失败，异常被抛回轮询器。

如果要处理轮询`MessageSource`端点（由.`ErrorHandlingTaskExecutor``ErrorHandler``MessageSource`

如果要将其发送到错误通道，则需要在 custom 中执行此操作`ErrorHandler`。

# css - 此导航上出现意外（不需要的）左边距

> ID：14244741
> 
> 赞同：1
> 
> 时间：2013-01-09T19:16:48.870
> 
> 标签：css, debugging, margin

我有这个简单的导航，我把它放在一起，出于某种原因，在第一个链接开始之前我得到了大约 40px 的左边距。我在 div 上没有左边距，所以不知道为什么会这样。当然，与屏幕左侧完全齐平看起来不太好，但我喜欢自己控制任何边距大小。

**我不能**为此使用 jsfiddle，因为在 jsfiddle 内部不存在错误。它渲染得很好。

话虽如此，这是html文件：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
body {
    background-color: #FFF;
    margin: 0;
    padding: 0;
}
#footer_enhanced {
    height: 50px;
    width: 100%;
    position: fixed;
    bottom: 0px;
    line-height: 50px;
    float: left;
    background-color: #121212;
    z-index: 999;
    margin: 0px;
    left: 0px;
}
#navigation_enhanced {
    color: #000;
    margin: 0px;
    padding: 0px;
    height: 50px;
    float: left;
    clear: both;
}
#navigation_enhanced ul {
    list-style: none;
    margin: 0;
}
#navigation_enhanced li {
    float: left;
    line-height: 50px;
}
#navigation_enhanced li a {
    display: block;
    text-decoration: none;
    font-size: 1.125em;
    color: #FFF;
    margin-right: 0.375em;
    padding-right: 0.375em;
    padding-left: 0.375em;
    letter-spacing: -1px;
}
#navigation_enhanced li a:hover {
    color: #000;
    background-color: #fff;
}
.current {
    display: block;
    text-decoration: none;
    font-size: 1.125em;
    color: #000;
    background-color: #fff;
    margin-right: 0.375em;
    padding-right: 0.375em;
    padding-left: 0.375em;
    letter-spacing: -1px;
    list-style: none;
    float: left;
}
</style>
</head>
<body>
<div id="footer_enhanced">
<div id="navigation_enhanced">
<ul>
<li class="current">home</li>
<li><a href="#">cat2</a></li>
<li><a href="#">cat3</a></li>
<li><a href="#">cat4</a></li>
<li><a href="#">cat5</a></li>
</ul>
</div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:19:26.753

默认情况下，小提琴中不存在“不需要的”空间，因为它们重置（错误地标记为*normalize*）css。默认情况下，`ul`有一个`padding-left`，但 jsfiddle 清除它。

```
ul {
    padding-left: 0;
} 
```

# jsf - rich:dataTable 从 filterBy 列中获取总数

> ID：14244743
> 
> 赞同：1
> 
> 时间：2013-01-09T19:16:57.647
> 
> 标签：jsf, richfaces, richdatatable

我有一个丰富的数据表，其中包含可以过滤的列。

```
<!-- Data table with filters -->
<h:form>
<rich:dataTable value="#{sessionScope.paymentsBean.payments}" var="payment"
   id="table">
   <rich:column filterBy="#{sessionScope.payment.invoice}" filterEvent="onkeyup">
      <f:facet name="header">Invoice</f:facet>
      <h:outputText value="#{sessionScope.payment.invoice}" />
   </rich:column>
   <rich:column filterBy="#{sessionScope.payment.description}" filterEvent="onkeyup">
      <f:facet name="header">Description</f:facet>
      <h:outputText value="#{sessionScope.payment.description}" />
   </rich:column>
   <rich:column filterBy="#{sessionScope.payment.amount}" filterEvent="onkeyup">
      <f:facet name="header">Amount</f:facet>
      <h:outputText value="#{sessionScope.payment.amount}" />
    </rich:column>
</rich:dataTable>
</h:form>

<!-- Total -->
<h:outputText id="total" value="#{sessionScope.paymentsBean.total}" >
    <f:convertNumber maxFractionDigits="2" type="currency" currencySymbol="$"/>
</h:outputText> 
```

对于总数，我可以将 sessionScope.paymentsBean.payments 中的所有金额相加得到总数。在以下示例中为 355.00 美元。

```
Invoice     Description     Amount
1           Cash            $5.00
2           Visa            $50.00
3           Visa            $100.00
4           MasterCard      $200.00 

Total: $355.00 
```

但是，如果我按“签证”过滤，表格和总数将如下所示：

```
Invoice     Description     Amount
2           Visa            $50.00
3           Visa            $100.00

Total: $355.00 
```

总额应该是 150 美元，但 getTotal() 不知道 filterBy 数据。有没有办法根据rich:datatable中的filterBy标准动态计算总数？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T07:09:19.650

There's a way to recover the filtered data. You need the table to be binded to a backing bean property and you need it to be a [`rich:extendedDataTable`](http://docs.jboss.org/richfaces/3.3.X/3.3.3.Final/en/tlddoc/rich/extendedDataTable.html).

`<rich:extendedDataTable value="#{sessionScope.paymentsBean.payments}" var="payment" id="table" binding="sessionScope.paymentsBean.table">`

Binded attribute will be [HTMLExtendedDataTable](http://docs.jboss.org/richfaces/3.3.X/3.3.2.GA/en/apidoc/org/richfaces/component/html/HtmlExtendedDataTable.html) type. After that you will need to create an *Ajax* call when user types something in the filter, to be called. See [`<a4j:support />`](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_support.html) component and use it when a key is pressed, as:

`<a4j:support event="onkeyup" reRender="countBox" action="#{sessionScope.paymentsBean.actionCalculateTotalValue}"/>`

Remember calling Ajax method on filterings [can be tricky](https://stackoverflow.com/a/2279874/1199132). I sincerely suggest to avoid the table's built-in filters and create your custom ones based in `h:inputText` and implement your ajax calls here. You can take a look into this [link](http://mkblog.exadel.com/2008/11/richfaces-filtering-with-custom-function/).

Once the method is called you just need to obtain the filtered rows, calculate the total amount and put in in a variable, over which JSF will update the box when the call is finished. What's the way to get the filtered rows? There you have:

```
public List<E> filteredList() {
    List<E> list = new java.util.ArrayList<E>();

    int i = 0;
    boolean loop = true;

    while (loop) {
        table.setRowKey(new Integer(i));
        if (table.isRowAvailable()) {
            list.add((E) table.getRowData());
            i += 1;
        } else {
            loop = false;
        }
    }

    table.setRowKey(null);
    return list;
} 
```

Basically it makes a loop until there are no more available rows in the table. Good luck.

# javascript - JavaScript 中的 .submit() 和表单验证

> ID：14244744
> 
> 赞同：2
> 
> 时间：2013-01-09T19:16:58.513
> 
> 标签：javascript

我正在尝试提高我的原生 JavaScript 技能。我正在开发一个表单验证器只是为了好玩。到目前为止，这是我的代码：

```
var getParent = document.getElementById("myForm");

document.getElementById("submit").onclick = function(e) {

e.preventDefault();

var cache = !cache ? "Nothing has been selected" : cache;

for(i = 0; i < getParent.elements.method.length; i++) {

    if(getParent.elements.method[i].checked) {
        cache = getParent.elements.method[i].value;
    }

}

getParent.submit();

} 
```

如您所见，这只是测试一些单选按钮以查看它们是否被选中。我正在尝试使用`.submit()`底部的功能来提交我的表单，但出现错误。为什么这段代码没有提交我的表单`.submit()`？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:25:47.637

您不能将按钮命名`submit`并使用`submit()`。

该按钮将覆盖该方法。因此，当您调用`getParent.submit()`它时，它实际上指向的是按钮，而不是实际的提交函数。

# java - 将 UTF-8 PDF 字体放入 JasperReports 3.7.* 报告中，用 Java / Spring 编译

> ID：14244747
> 
> 赞同：2
> 
> 时间：2013-01-09T19:17:20.227
> 
> 标签：java, spring, utf-8, jasper-reports

默认情况下，JasperReports 3.7.* 似乎没有任何支持 PDF 字体的“Identity-H”UTF-8 编码的 PDF 字体。

我找到了很多使用 iReports 导入字体并使用嵌入的 Pdf 字体编译报表的示例，但是在运行时使用 Java 编译报表时，我没有找到任何对我有用的解决方案。

我尝试了以下变化：

1.  在 Spring 应用程序的类路径上创建一个 jasperreports_extension.properties 文件并定义一个指向 UTF-8 TTF 文件的 xml 字体系列
2.  包括 jasperreports-fonts 的 maven 依赖项：net.sf.jasperreports jasperreports-fonts 4.0.0
3.  研究了使用 PdfFont/FontMap 方法插入 Jasper 参数对象映射，但示例中的类被标记为已弃用

在这些情况下编译时，引擎总是报告无法解析字体的错误。这里的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:57:43.130

一名团队成员能够找到解决方案：

为 Java 编译配置 JRProperties 时

```
JRProperties.setProperty("net.sf.jasperreports.default.pdf.font.name", "org/gnu/freefonts/FreeSans.ttf");
JRProperties.setProperty("net.sf.jasperreports.default.pdf.encoding", "Identity-H");
JRProperties.setProperty("net.sf.jasperreports.default.pdf.embedded", true); 
```

其中 org/gnu/freefonts/FreeSans.ttf 是应用程序类路径中的 UTF-8 字体

# c# - 找不到类型或命名空间，不是客户端配置文件问题

> ID：14244749
> 
> 赞同：1
> 
> 时间：2013-01-09T19:17:23.567
> 
> 标签：c#, asp.net, reference

我正在尝试创建一个 Web 应用程序。它在 localhost 上运行良好，但是当我在测试服务器上尝试时一直遇到此错误。我断断续续地查看了几天的其他问题并尝试了各种解决方案，但仍然没有解决错误

```
Compiler Error Message: CS0246: The type or namespace name 'courseDBLibrary' could not be found (are you missing a using directive or an assembly reference?)

Source Error:

Line 6:  using System.Diagnostics;
Line 7:  using System.Collections;
Line 8:  using courseDBLibrary;
Line 9:  
Line 10: public partial class Charts : System.Web.UI.Page 
```

courseDBLibrary 是引用的 dll 文件中的命名空间。该 dll 包含 2 个单独的 c# 文件，每个文件都有自己的类，位于同一命名空间下。dll 是通过添加引用对话框添加的。

最初 dll 被放置在项目根目录的 bin 中，但是当将它放在服务器上时，我已将 bin 文件夹移动到 wwwroot 文件夹。

最后，dll**没有**使用客户端配置文件框架（也就是使用 .NET Framework 3.5）

DLL 中的文件如下所示

```
namespace courseDBLibrary {
  public class class1 {
    .. 
```

和

```
namespace courseDBLibrary {
  public class class2 {
    .. 
```

引发错误的文件是一个相当复杂的 aspx 文件，后面带有 c# 代码，但是如您所见，编译器甚至没有到达类部分。

任何想法将不胜感激。

# mysql - 为什么这个陈述会失败？

> ID：14244751
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:17:30.257
> 
> 标签：mysql, create-table

为什么这个说法不起作用？

```
CREATE TABLE capacidad (
  cod_capacidad INTEGER UNSIGNED NOT NULL AUTO_INCREMENT,
  cod_area INTEGER UNSIGNED NOT NULL,
  capacidad VARCHAR(100) NOT NULL,
 PRIMARY KEY(cod_capacidad),
 INDEX capacidad_FKIndex1(cod_area),
 FOREIGN KEY(cod_area)
   REFERENCES AREA(cod_area)
     ON DELETE NO ACTION
     ON UPDATE NO ACTION
   )
 ENGINE=INNODB; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:40:57.777

为了不出现错误 150：您必须检查以下内容：

1.  这两个表必须是**ENGINE=InnoDB**。
2.  这两个表必须具有相同的字符集。
3.  父表中的 PK 列和 FK 列必须是相同的数据类型。
4.  父表中的 PK 列和 FK 列，如果它们具有定义排序规则类型，则必须具有相同的排序规则类型；
5.  如果外键表中已有数据，则 FK 列值必须与父表 PK 列中的值匹配。

希望这可以帮助。

ps：你也应该分享你的另一张桌子。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-09T19:24:00.067

尝试使用[CREATE INDEX](http://dev.mysql.com/doc/refman/5.0/en//create-index.html)语法在`CREATE TABLE`语句之外创建索引：

编辑：我的错，我想到了mssql。

PS。该语句在我的数据库中有效。

# ant - IllegalArgumentException：键不能为空——哪个键？

> ID：14244764
> 
> 赞同：5
> 
> 时间：2013-01-09T19:18:41.317
> 
> 标签：ant, wsdl, jetty, cxf, wsdl2java

尝试从示例 WSDL 构建演示合同优先服务（使用 CXF **2.7.1**）：

```
<?xml version='1.0' encoding='UTF-8'?>
<wsdl:definitions name="OrderProcessService" targetNamespace="http://order.demo/" xmlns:ns1="http://schemas.xmlsoap.org/soap/http" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://order.demo/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
    <wsdl:types>
        <xs:schema attributeFormDefault="unqualified" elementFormDefault="unqualified" targetNamespace="http://order.demo/" xmlns:tns="http://order.demo/" xmlns:xs="http://www.w3.org/2001/XMLSchema">
            <xs:element name="processOrder" type="tns:processOrder" />
            <xs:element name="processOrderResponse" type="tns:processOrderResponse" />
            <xs:complexType name="processOrder">
                <xs:sequence>
                    <xs:element minOccurs="0" name="arg0" type="tns:order" />
                </xs:sequence>
            </xs:complexType>
            <xs:complexType name="order">
                <xs:sequence>
                    <xs:element minOccurs="0" name="customerID" type="xs:string" />
                    <xs:element minOccurs="0" name="itemID" type="xs:string" />
                    <xs:element name="price" type="xs:double" />
                    <xs:element name="qty" type="xs:int" />
                </xs:sequence>
            </xs:complexType>
            <xs:complexType name="processOrderResponse">
                <xs:sequence>
                    <xs:element minOccurs="0" name="return" type="xs:string" />
                </xs:sequence>
            </xs:complexType>
        </xs:schema>
    </wsdl:types>
    <wsdl:message name="processOrderResponse">
        <wsdl:part element="tns:processOrderResponse" name="parameters">
        </wsdl:part>
    </wsdl:message>
    <wsdl:message name="processOrder">
        <wsdl:part element="tns:processOrder" name="parameters">
        </wsdl:part>
    </wsdl:message>
    <wsdl:portType name="OrderProcess">
        <wsdl:operation name="processOrder">
            <wsdl:input message="tns:processOrder" name="processOrder">
            </wsdl:input>
            <wsdl:output message="tns:processOrderResponse" name="processOrderResponse">
            </wsdl:output>
        </wsdl:operation>
    </wsdl:portType>
    <wsdl:binding name="OrderProcessServiceSoapBinding" type="tns:OrderProcess">
        <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http" />
        <wsdl:operation name="processOrder">
            <soap:operation soapAction="" style="document" />
            <wsdl:input name="processOrder">
                <soap:body use="literal" />
            </wsdl:input>
            <wsdl:output name="processOrderResponse">
                <soap:body use="literal" />
            </wsdl:output>
        </wsdl:operation>
    </wsdl:binding>
    <wsdl:service name="OrderProcessService">
        <wsdl:port binding="tns:OrderProcessServiceSoapBinding" name="OrderProcessPort">
            <soap:address location="http://localhost:8080/OrderProcess" />
        </wsdl:port>
    </wsdl:service>
</wsdl:definitions> 
```

我发布了以下内容：

```
wsdl2java -ant -impl -server -d src OrderProcess.wsdl 
```

源代码生成很好，但是当我尝试使用 构建服务器时`ant OrderProcessServer`，我收到以下异常：

```
OrderProcessServer:
     [java] Starting Server
     [java] Exception in thread "main" java.lang.ExceptionInInitializerError
     [java]     at org.eclipse.jetty.util.component.AbstractLifeCycle.<clinit>(AbstractLifeCycle.java:33)
     [java]     at org.apache.cxf.transport.http_jetty.JettyHTTPDestination.activate(JettyHTTPDestination.java:178)
     [java]     at org.apache.cxf.transport.AbstractObservable.setMessageObserver(AbstractObservable.java:48)
     [java]     at org.apache.cxf.binding.AbstractBaseBindingFactory.addListener(AbstractBaseBindingFactory.java:95)
     [java]     at org.apache.cxf.binding.soap.SoapBindingFactory.addListener(SoapBindingFactory.java:895)
     [java]     at org.apache.cxf.endpoint.ServerImpl.start(ServerImpl.java:131)
     [java]     at org.apache.cxf.jaxws.EndpointImpl.doPublish(EndpointImpl.java:360)
     [java]     at org.apache.cxf.jaxws.EndpointImpl.publish(EndpointImpl.java:251)
     [java]     at org.apache.cxf.jaxws.spi.ProviderImpl.createAndPublishEndpoint(ProviderImpl.java:152)
     [java]     at javax.xml.ws.Endpoint.publish(Endpoint.java:57)
     [java]     at demo.order.OrderProcess_OrderProcessPort_Server.<init>(OrderProcess_OrderProcessPort_Server.java:19)
     [java]     at demo.order.OrderProcess_OrderProcessPort_Server.main(OrderProcess_OrderProcessPort_Server.java:23)
     [java] Caused by: java.lang.IllegalArgumentException: key can't be empty
     [java]     at java.lang.System.checkKey(System.java:774)
     [java]     at java.lang.System.getProperty(System.java:647)
     [java]     at org.eclipse.jetty.util.log.Log$1.run(Log.java:122)
     [java]     at java.security.AccessController.doPrivileged(Native Method)
     [java]     at org.eclipse.jetty.util.log.Log.<clinit>(Log.java:85)
     [java]     ... 12 more
     [java] Java Result: 1

BUILD SUCCESSFUL
Total time: 2 seconds 
```

我的问题是：

1.  什么钥匙？
2.  如何提供它以便我不会得到异常？
3.  为什么`wsdl2java`生成的代码不完整？（即`.wsdl`文件不够？）

**更新：** wsdl2java 命令生成的 ANT`build.xml`文件有这 2 行看似相关的行：

```
<sysproperty key="java.util.logging.config.file" value="${cxf.etc.dir}/logging.properties"/>
<sysproperty key="log4j.configuration" value="file:///${cxf.etc.dir}/log4j.properties"/> 
```

1.  他们是问题的关键（不是双关语）吗？
2.  如果是这样，我应该放什么值来修复它？
3.  如何告诉 wsdl2java 生成不需要修复的代码？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-10T10:33:31.857

Jetty 的 Log 实现正在读取系统属性，如下所示：

```
Enumeration<String> systemKeyEnum = Enumeration<String>)System.getProperties().propertyNames();

while (systemKeyEnum.hasMoreElements())
{
    String key = systemKeyEnum.nextElement();
    String val = System.getProperty(key);
    // ... (process key/values)
} 
```

出于某种原因，您设法在系统属性中有一个空键：“”。因此，请检查您以编程方式设置系统属性 (System.setProperty) 的所有位置以及您的 java 命令行中的 -D 选项。如果这没有帮助，请尝试在此异常发生之前打印您的系统属性，或者执行 jpda 调试会话并在日志行 <122 或 System.checkKey() 处放置一个断点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-23T07:59:59.493

The empty keys come from the **cxfrun** macro in the generated ant script, build.xml.

Comment it out like so and you should be fine:

```
<arg value="@{param1}"/>
<arg value="@{param2}"/>
<arg value="@{param3}"/>
<arg value="@{param4}"/>
<arg value="@{param5}"/>
<jvmarg value="${cxf.endorsed.flag}"/>
<!-- Commented out to remove empty keys in system properties -->
<!-- jvmarg value="@{jvmarg1}"/>
<jvmarg value="@{jvmarg2}"/>
<jvmarg value="@{jvmarg3}"/>
<jvmarg value="@{jvmarg4}"/>
<jvmarg value="@{jvmarg5}"/ --> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-29T16:02:53.610

空键也可以来自这种类型的“评论”：

```
===================================== 
```

上面的这一行可能已被标记为注释，但系统会将等号视为键值标记。

# visual-studio - 防止命名空间扩展

> ID：14244766
> 
> 赞同：0
> 
> 时间：2013-01-09T19:18:42.817
> 
> 标签：visual-studio, visual-studio-2012

在开发设计器的同时不断扩展命名空间。在它应该简单地实例化的地方`Class1`，它正在将实例化扩展到`Namespace.Class1`.

有没有办法防止这种行为？ `Namespace`是多点默认值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:14:40.017

您的问题不够清楚，您的应用使用什么平台/UI？

如果您开发 ASP.NET，控件/组件是使用 register 标记注册的，但文件 Designer.vb 或 Designer.cs 仍将包含完整的命名空间。

如果您开发 Windows 窗体，控件/组件将始终在设计器.vb 和设计器.cs 中具有完整的命名空间。

如果你开发 WPF/Silverlight，XAML 文件会直接显示你使用的控件的类名，但是生成的 g.cs 或 g.vb 会显示完整/完整的命名空间。

这是 Visual Studio 设计器的默认行为，无论是 ASP.NET、WPF/Silverlight、Windows 窗体。

*除非您在没有设计器支持的情况下创建 UI，否则您无法更改此设置，例如在 WPF 中创建纯窗口或在 Windows 窗体中纯粹通过代码创建窗体。*

# node.js - 试图在 Mongoose 中删除子文档会给我一个内部 mongoose 错误

> ID：14244767
> 
> 赞同：1
> 
> 时间：2013-01-09T19:18:45.430
> 
> 标签：node.js, mongodb, express, mongoose

我有如下模式（简化）：

```
var Permission = new Schema({
  _id: String,  // email address
  role: String  // "admin" or "member"
});

var Org = new Schema({
  name: {type: String, index: {unique: true, dropDups: true}, trim: true},
  permissions: [Permission]
}); 
```

示例文档如下所示：

```
{
  "name": "My Org",
  "permissions" : [
    {"_id" : "joe@gmail.com", "role" : "admin"},
    {"_id" : "mary@gmail.com", "role" : "member"}
  ]
} 
```

我正在尝试使用命令删除其中一个权限行，`org.permissions.remove(req.params.email)`如下面的上下文所示：

```
exports.removePermissions = function(req, res) {
  var name = req.params.name;
  return Org
    .findOne({name: name})
    .select()
    .exec(function(err, org) {
      if (err) return Org.handleError(res, err);
      if (!org) return Org.handleError(res, new Error("#notfound " + name));
      org.permissions.remove(req.params.email);
      org.save(function(err, org) {
        if (err) return Org.handleError(res, err);
        else return res.send(org);
      });
    });
}; 
```

当我这样做时，我收到以下错误：

```
TypeError: Cannot use 'in' operator to search for '_id' in joe@gmail.com
    at EmbeddedDocument.Document._buildDoc (/../node_modules/mongoose/lib/document.js:162:27)
    at EmbeddedDocument.Document (/../node_modules/mongoose/lib/document.js:67:20)
    at EmbeddedDocument (/../node_modules/mongoose/lib/types/embedded.js:27:12)
    at new EmbeddedDocument (/../node_modules/mongoose/lib/schema/documentarray.js:26:17)
    at MongooseDocumentArray._cast (/../node_modules/mongoose/lib/types/documentarray.js:62:10)
    at Object.map (native)
    at MongooseDocumentArray.MongooseArray.remove (/../node_modules/mongoose/lib/types/array.js:360:21)
    at model.Org.methods.removePermissions (/../models/org.js:159:20) 
```

我唯一能想到的是 Mongoose 不支持不是 ObjectID 的 _id 字段？这很奇怪，因为我在我的代码中的其他地方使用了这些并且它工作正常（例如 org.permissions.id("joe@gmail.com") 工作）。

任何建议都非常感谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-09T19:58:28.610

我不确定为什么使用`remove`there 不起作用，但您可以使用[`findOneAndUpdate`](http://mongoosejs.com/docs/api.html#model_Model-findOneAndUpdate)和操作员原子地执行此[`$pull`](http://docs.mongodb.org/manual/reference/operators/#_S_pull)操作：

```
exports.removePermissions = function(req, res) {
  var name = req.params.name;
  return Org.findOneAndUpdate(
    {name: name}, 
    {$pull: {permissions: {_id: req.params.email}}},
    function(err, org) {
      // org contains the updated doc
      ...
    });
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-15T10:31:25.190

根据[这个答案](https://stackoverflow.com/a/23255415/1171775)，您需要调用`remove()`要删除的子文档，而不是整个子文档数组。

所以，改变：

```
org.permissions.remove(req.params.email); 
```

到：

```
org.permissions.id(req.params.email).remove(); 
```

[与@JohnnyHK 提供](https://stackoverflow.com/a/14245408/1171775)的答案相比，这种两步方法具有额外的优势，因为您可以在删除子文档之前验证子文档是否实际存在。如果您想发送指示子文档不存在的 404 响应，这将很有用 - 据我所知，使用 $pull 原子运算符是不可能的。

请注意，这也仅在您的子文档数组具有架构时才有效，如问题所示。如果不是，或者它的模式类型为`Mixed`，则从数据库返回的集合将是一个普通数组，而不是 Mongoose 增强数组。这意味着没有`.id()`功能。在这种情况下，我会使用[lodash#remove](http://lodash.com/docs#remove)代替：

```
_.remove(org.permissions, (function(permission) {
  return permission._id.toString() === req.params.email;
})); 
```

# jquery - jQuery插件CrossSlide实现

> ID：14244769
> 
> 赞同：1
> 
> 时间：2013-01-09T19:18:55.807
> 
> 标签：jquery, jquery-plugins

我有一个应该使用 crossSlide jquery 插件的站点，但它不起作用。我一直在努力解决这个问题。有谁知道为什么以下不起作用？

```
<script src='script/jquery-1.4.2.min.js'></script>
<SCRIPT LANGUAGE="JavaScript" SRC="script/jquery.cross-slide.min.js" TYPE="text/JavaScript"></SCRIPT>
<script language="javascript">
$(function() {
    $('#splash').crossSlide({
        sleep: 2,
        fade: 1
    }, [
        { src: 'images/hpmain2.JPG' },
        { src: 'images/hpmain1.jpg' }
    ]);
});
</script> 
```

有一个 id 为 splash 的 div。

谢谢

# string - 如何在图形名称中使用列表名称？

> ID：14244771
> 
> 赞同：1
> 
> 时间：2013-01-09T19:19:05.807
> 
> 标签：string, r, list, filenames

我创建了几个列表环境。然后我编写了一个函数来从存储的数据中绘制几个图形，我想使用列表名称作为图形名称的一部分。

```
list_xName <- list(aa = 1:10, bb = exp(-3:6), cc=-3:6)  
drawL<-function(list_xName){
plot(list_xName$aa,list_xName$bb)
savePlot(filename=paste("fig_",xxxxxxx,sep=""),type="eps")  
} 
```

而不是 savePlot 中的“xxxxxxx”，我想要一个列表的名称。

我希望我的问题是可以理解的。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T01:23:02.587

尝试`deparse(substitute(list_xName))`

# java - 远程 Selenium 2 Webdriver 实例如何接受不受信任的证书？

> ID：14244773
> 
> 赞同：2
> 
> 时间：2013-01-09T19:19:17.333
> 
> 标签：java, webdriver, selenium-webdriver

我正在尝试使用 JUnit 实现一些 Selenium 2 Webdriver 测试。SeleniumHQ.org 和网络上的文档让我感到困惑，因为它似乎在 Selenium RC 和 Webdriver 之间来回跳跃。另外，我的Java不是很强大。几年前我上过一些课程，但没有用太多。我想让 JUnit 测试从无头 CI 服务器运行，并使用 Webdriver 在远程客户端系统上运行 Firefox。

根据我收集到的信息，我可以使用以下代码在本地系统上打开 Webdriver 控制的 Firefox 实例。我正在测试的网站有一个不受信任的 SSL/TLS 证书，所以我需要告诉 Firefox 驱动程序接受不受信任的证书。这在本地效果很好：

```
FirefoxProfile profile = new FirefoxProfile();
profile.setAcceptUntrustedCertificates(true);  // NOTE: this is the default behavior
RemoteWebDriver driver = new FirefoxDriver(profile);
Selenium selenium = new WebDriverBackedSelenium(driver, baseurl); 
```

但我不知道如何使用 Webdriver 在远程系统上执行此操作。这两种方法似乎完全不相容。上面的代码在任何情况下都不适合我用来远程使用 Webdriver 的以下代码：

```
Selenium selenium = new DefaultSelenium(host, port, browser, baseurl);
selenium.start(); 
```

现在，我花了很多时间在远程测试系统上使用自定义 Firefox 配置文件。它在 2012 年夏天工作，但在最近的操作系统和浏览器更新后，它停止工作。创建 Firefox 驱动程序配置文件并调用 setAcceptUntrustedCertificates(true) 似乎要好得多。是否可以使用 Webdriver 在远程系统上的浏览器中运行测试并让浏览器忽略不受信任的 SSL/TLS 证书？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T04:24:06.457

正如您的问题中提到的，您不需要设置任何属性来明确接受不受信任的证书。默认情况下，webdriver 接受不受信任的证书。与其使用 webdriverbacked selenium，不如直接使用 remotewebdriver，如下所示：

```
Webdriver wd = new RemoteWebDriver(new URL("http://localhost:4444/wd/hub"), DesiredCapabilities.firefox()); 
```

这`http://localhost:4444/wd/hub`是测试应发送到执行的集线器的 URL。当您开始测试时，集线器将查找已注册 Firefox 功能的远程节点。

我个人建议阅读[http://code.google.com/p/selenium/wiki/Grid2](http://code.google.com/p/selenium/wiki/Grid2)而不是 seleniumhq.org 上的文档。据我所知，selenium 团队正在尝试更新 seleniumhq 文档。你也可以为它做贡献:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-10T07:03:30.313

首先，如果您仅将 webdriver 支持的 selenium 用于配置文件，我将建议您坚持使用 webdriver。您可以将要在本地计算机上使用的配置文件定义为

```
 File file = new File("firebug-1.8.1.xpi");
   FirefoxProfile firefoxProfile = new FirefoxProfile();
   firefoxProfile.addExtension(file);
   firefoxProfile.setPreference("extensions.firebug.currentVersion", "1.8.1"); 
   WebDriver driver = new FirefoxDriver(firefoxProfile); 
```

**回答您的问题：**我将从[这里](http://www.seleniumwebdriver.com/google-selenium-webdriver/how-to-setacceptuntrustedcertificates-for-grid-firefox-profile/)引用 Simon Stewart 的解决方案：

```
 FirefoxProfile profile = new FirefoxProfile(); 
 profile.setAcceptUntrustedCertificates(true); 
 DesiredCapabilities caps = DesiredCapabilities.firefox(); 
 caps.setCapability(FirefoxDriver.PROFILE, profile); 
```

使用此配置文件创建远程驱动程序。

现在，如果这不起作用，我们可以写一个错误（或至少是一个功能请求）。

***后编辑：***我无法真正测试此解决方案，因为我没有现成的证书问题站点。所以在某种程度上，我会期待你的反馈以获得真实的画面...... :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-11T17:36:37.063

当我问这个问题时，我不明白 Selenium 对象和 WebDriver 对象之间的区别。尽管我特别想了解 Selenium 2 的“WebDriver”功能，但我愚蠢地认为我可以使用 Selenium 2 对象编写一个“Selenium 2 Webdriver”项目。对于有使用这些工具经验的人来说，这听起来很明显，但是在阅读了“Selenium 2”书籍和项目文档之后，我仍然不清楚这种区别。

结果，我正在编写 Java 代码来实例化 Selenium 对象以检查网页，并尝试将 Selenium 对象传递给 WebDriver 对象，希望测试能够在远程服务器上运行。

现在看起来更清楚了：Selenium 和 WebDriver 项目合并为一个名为（令人困惑的）Selenium 2.0 的新伞形项目，但它们是 Selenium 2 中不同且独立的工具。如果我想使用 WebDriver API，似乎我必须转换任何现有的 Selenium 对象到 WebDriver 对象。这两个工具之间似乎没有有用的交互。

例如，在我的项目中，我有以下代码。它在我的本地桌面系统的网络浏览器上运行良好：

```
Selenium selenium = new DefaultSelenium(host, port, browser, baseurl);

selenium.get(urlPath);

selenium.type(username_field, username);
selenium.type(password_field, password);
selenium.click(login_button); 
```

但我希望能够在无头持续集成服务器上运行该测试，而不是我的桌面系统。我已将代码转换为使用 WebDriver 对象而不是 Selenium 对象。现在它在连接到 Selenium Grid 2 服务器的远程系统上运行：

```
WebDriver driver = new RemoteWebDriver(new URL("http://10.0.0.29:4444/wd/hub"), capability);

driver.get(urlPath);

driver.findElement(By.name(username_field)).sendKeys(username);
driver.findElement(By.name(password_field)).sendKeys(password);
driver.findElement(By.className(login_button)).submit(); 
```

我希望其他想学习如何在 Selenium 2 中使用 WebDriver 的人不会像我阅读 Selenium 对象那样浪费时间，认为 Selenium 对象是 WebDriver 的一部分。我目前的 [n00b] 建议是忽略任何提及 Selenium 对象的内容，而只专注于尽可能多地了解 WebDriver 对象。SeleniumHQ.org 上的 WebDriver 文档是一个很好的起点：

*   [http://seleniumhq.org/docs/03_webdriver.jsp#webdriver-and-the-selenium-server](http://seleniumhq.org/docs/03_webdriver.jsp#webdriver-and-the-selenium-server)

正如 AJ 在他的回答中建议的那样，还请查看 Selenium Grid 文档：

*   [http://code.google.com/p/selenium/wiki/Grid2](http://code.google.com/p/selenium/wiki/Grid2)

PS：远程 Selenium 2 Webdriver 实例默认自动接受不受信任的 SSL/TLS 证书。无需代码。

# javascript - 回调和承诺有什么区别

> ID：14244775
> 
> 赞同：23
> 
> 时间：2013-01-09T19:19:24.947
> 
> 标签：javascript

> **可能重复：**
> [Javascript 中的 Deferred、Promise 和 Future 有什么区别？](https://stackoverflow.com/questions/6801283/what-are-the-differences-between-deferred-promise-and-future-in-javascript)

有人能指出回调和承诺之间有什么区别吗？什么时候应该使用承诺等？

还将感谢有关如何创建和使用承诺的链接。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-01-09T19:31:05.273

Promise 提供了一种更简洁明了的方式来表示 javascript 中的顺序异步操作。它们实际上是实现与回调相同效果的不同语法。优点是增加了可读性。像这样的东西

```
aAsync()
  .then(bAsync)
  .then(cAsync)
  .done(finish); 
```

比将这些单独的函数中的每一个作为回调传递的等价物更具可读性，例如

```
Async(function(){
    return bAsync(function(){
        return cAsync(function(){
            finish()
        })
    })
}); 
```

# asp.net - 无法在 Mono 3 上的 xsp 上运行 asp.net 4.5 应用程序

> ID：14244779
> 
> 赞同：8
> 
> 时间：2013-01-09T19:19:36.337
> 
> 标签：asp.net, mono, xsp, owin, katana

我已经从源代码（tarball）构建了 Mono 3.0.2，并从最新的 tarball 和 Github 上的最新版本构建了 XSP，但是我无法使用 .net 4.5 运行相对简单的 asp.net 应用程序，因为它看到“ web.config 中的 targetFramework="4.5"' 无效。构建应用程序并运行控制台 .net 4.5 应用程序工作正常。

这是有问题的 web.config：

```
<?xml version="1.0"?>

<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>
  <appSettings>
    <add key="owin:HandleAllRequests" value="true" />
    <add key="owin:SetCurrentDirectory" value="true" />
  </appSettings>

  <system.web>
    <compilation debug="true" targetFramework="4.5" />
    <httpRuntime targetFramework="4.5" />
  </system.web>

</configuration> 
```

这是 xsp4 抛出的异常：

```
An exception has occurred while generating HttpException page:
System.NullReferenceException: Object reference not set to an instance of an object
  at System.Web.Util.HttpEncoder.GetCustomEncoderFromConfig () [0x00000] in <filename unknown>:0
  at System.Lazy`1[System.Web.Util.HttpEncoder].InitValue () [0x00000] in <filename unknown>:0

The actual exception which was being reported was:
System.Web.HttpException: Initial exception ---> System.Configuration.ConfigurationErrorsException: Error deserializing configuration section httpRuntime: Unrecognized attribute 'targetFramework'. (/home/srobbins/Projects/nancykatana/NancyKatana/Web.config line
1)
  at System.Configuration.ConfigurationSection.DeserializeSection (System.Xml.XmlReader reader) [0x00000] in <filename unknown>:0
  at System.Configuration.Configuration.GetSectionInstance (System.Configuration.SectionInfo config, Boolean createDefaultInstance) [0x00000] in <filename unknown>:0
  at System.Configuration.ConfigurationSectionCollection.get_Item (System.String name) [0x00000] in <filename unknown>:0
  at System.Configuration.Configuration.GetSection (System.String path) [0x00000] in <filename unknown>:0
  at System.Web.Configuration.WebConfigurationManager.GetSection (System.String sectionName, System.String path, System.Web.HttpContext context) [0x00000] in <filename unknown>:0
  at System.Web.Configuration.WebConfigurationManager.GetSection (System.String sectionName) [0x00000] in <filename unknown>:0
  at System.Web.HttpRuntime..cctor () [0x00000] in <filename unknown>:0
  --- End of inner exception stack trace --- 
```

以及有关版本/配置的一些信息：

```
xsp-2.11

  Build Environment
    Install prefix:          /usr/local
    Datadir:                 /usr/local/share
    Libdir:                  /usr/local/lib
    Build documentation:     yes
    Mono 2.0 compiler:       /usr/local/bin/gmcs
    Mono 4.0 compiler:       /usr/local/bin/dmcs
    Target frameworks:       .NET 2.0, .NET 4.0
    Build SQLite samples:    yes
srobbins@ubuntu-vm:~/Downloads/xsp$ /usr/local/bin/mono --version
Mono JIT compiler version 3.0.2 (tarball Tue Jan  8 08:23:06 GMT 2013)
Copyright (C) 2002-2012 Novell, Inc, Xamarin Inc and Contributors. www.mono-project.com
        TLS:           __thread
        SIGSEGV:       altstack
        Notifications: epoll
        Architecture:  x86
        Disabled:      none
        Misc:          softdebug
        LLVM:          supported, not enabled.
        GC:            Included Boehm (with typed GC and Parallel Mark)
srobbins@ubuntu-vm:~/Downloads/xsp$ 
```

如果我从 web.config 中删除 targetFramework 元素，那么错误就会消失，但我只会得到 404，因此没有一个 http 模块被连接。

有任何想法吗？有人告诉我 xsp4 应该可以正常工作，但据我所知，它似乎根本没有更新到可以处理 4.5。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T14:09:15.163

尝试编辑该文件：

```
 vi /opt/mono/bin/xsp4 
```

（您的位置可能不同，因为您自己编译了它，所以您应该知道文件的存储位置）

在其中更改行：

```
exec /opt/mono/bin/mono $MONO_OPTIONS "/opt/mono/lib/mono/4.0/xsp4.exe" "$@" 
```

有了这个：

```
exec /opt/mono/bin/mono $MONO_OPTIONS "/opt/mono/lib/mono/4.5/xsp4.exe" "$@" 
```

然后复制可执行文件：

```
cp /opt/mono/lib/mono/4.0/xsp4.exe /opt/mono/lib/mono/4.5/ 
```

我希望 Mono 的人将来让它变得更加流畅，所以我们不需要手动执行此操作，但对我来说，这个手动解决方法有效！

同样，我在 CentOS 下完成了这项工作，因此在 Ubuntu 上可能会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T17:02:14.427

我在 MVC 4 和 Mono 3 中遇到了同样的问题。最奇怪的是，这个错误突然出现了。还原我的更改没有帮助。最终我最终删除了我的解决方案文件夹并签出了一个新版本。那一定已经删除了一些创建的文件。在那之后，一切都像以前一样工作。

# c# - 在属性中使用 int 常量

> ID：14244784
> 
> 赞同：11
> 
> 时间：2013-01-09T19:19:54.340
> 
> 标签：c#, constants

任何人都可以解释为什么我不能在 C# 属性中使用 const Int32 吗？

例子：

```
private const Int32 testValue = 123;  
[Description("Test: " + testValue)]  
public string Test { get; set; } 
```

让编译器说：

> “属性参数必须是常量表达式，......”

为什么？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-01-09T19:24:05.470

如错误所述，属性参数必须是*常量*表达式。

连接字符串和整数不是常量表达式。

因此，如果你`"Test: " + 123`直接通过，它会给出同样的错误。另一方面，如果您更改`testValue`为字符串，它将编译。

* * *

## 解释

常量表达式的规则规定常量表达式可以包含算术运算符，前提是两个操作数本身都是常量表达式。

因此，`"A" + "B"`仍然是恒定的。

但是，`"A" + 1`使用`string operator +(string x, object y);`，其中整数操作数被装箱到一个对象。
常量表达式规则明确指出

> 常量表达式中不允许进行其他转换，包括装箱、拆箱和非空值的隐式引用转换。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T19:26:10.670

int 和 string 之间的“+”运算符导致调用 int 的 ToString 方法，该方法不是“编译时间常数”。是这样的

```
private const int x = 3;
private const string s = x.ToString(); // cannot be done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:24:37.273

您只能将编译时评估的常量（包括`typeof()`运算符的结果和不包括`decimal`s）传递给`Attribute`s 构造函数

# java - 将工厂设计模式与具有额外构造函数参数的子类一起使用

> ID：14244787
> 
> 赞同：2
> 
> 时间：2013-01-09T19:19:57.410
> 
> 标签：java, design-patterns, factory

假设我有以下案例父类和两个子类，每个子类向从父类继承的参数添加一个新参数。例子

```
public class Parent {

private int x;

public Parent(int x) {this.x = x;}

public int getX() {return x;}

public void setX(int x) {this.x = x;}
} 
```

第一个孩子

```
public class FirstChild extends Parent {

private int y;

public FirstChild(int x, int y) {
    super(x);
    this.y = y;
}

public int getY() {
    return y;
}

public void setY(int y) {
    this.y = y;
}
} 
```

第二个孩子

```
public class SecondChild extends Parent{
private int z;

public SecondChild(int x, int z) {
    super(x);
    this.z = z;
}

public int getZ() {
    return z;
}

public void setZ(int z) {
    this.z = z;
}
} 
```

那么我如何在这里使用工厂方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:28:06.683

您不能在这里使用“纯”工厂或工厂方法模式。当您想要创建相同基类（或接口）的不同子类的实例时，这些模式非常有用，以防创建实例的机制相似。例如，所有类都有具有相同原型的构造函数或工厂方法。

在这种情况下，您可以使用反射或省略：

```
class MyFactory {
    Parent createInstance(Class clazz, int ... args) {
        if (FirstChild.class.equals(clazz)) {
            return new FirstChild(args[0]);
        }
        if (SecondChild.class.equals(clazz)) {
            return new SecondChild(args[0], args[1]);
        }
        throw new IllegalArgumentException(clazz.getName());
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T19:25:54.447

```
interface Factory {
    Parent newParent();
} 

class FirstFactory implements Factory {
    Parent newParent() { return new FirstChild(); }
}

class SecondFactory implements Factory {
    Parent newParent() { return new SecondChild(); }
}

class Client {
    public void doSomething() {
        Factory f = ...; // get the factory you need 
        Parent p = f.newParent();
        use(p)
    } 

    // or more appropriately
    public void doSomethingElse(Factory f) {
        Parent p = f.newParent();
        use(p)
    }

}

// Or...

abstract class Client {
    public void doSomething() {
        Factory f = getFactory();
        Parent p = f.newParent();
        use(p)
    } 
    abstract Factory getFactory(); 
}

class FirstClient extends Client {
    Factory getFactory() {
        return new FirstFactory();
    } 
}

class SecondClient extends Client {
    Factory getFactory() {
        return new SecondFactory();
    } 
} 
```

或者（可能更适合您的需要）：

```
public class ChildrenFactory {
    FirstChild newFistChild() { return new FirstChild(); } 
    SecondChild newSecondChild() { return new SecondChild(); } 
    // or
    Parent newFistChild() { return new FirstChild(); } 
    Parent newSecondChild() { return new SecondChild(); } 
} 
```

可能您实际上并不需要使用该`Parent`界面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:25:34.547

您可能有一个工厂类，它生成第一个孩子或第二个孩子，如下所示

```
class Factory{
   Parent createChild(String child) {
      if(child.equals("first"))
         return new FirstChild();
      if(child.equals("second"))
         return new SecondChild();

   }
} 
```

下面的这个链接也将帮助您更好地理解工厂模式[http://www.hiteshagrawal.com/java/factory-design-pattern-in-java](http://www.hiteshagrawal.com/java/factory-design-pattern-in-java)

# objective-c - 在objective-c中解析xml的多个元素

> ID：14244788
> 
> 赞同：0
> 
> 时间：2013-01-09T19:20:01.860
> 
> 标签：objective-c, xml, xml-parsing

我需要在这种 xml 中解析多个元素（id1 和 id2）：

> ```
> <name>
>     <id1>104634449</id2>
>     <id2>22014870</id2>
> </name>
> <name>
>     <id1>104634433</id2>
>     <id2>220143210</id2>
> </name> 
> ```

我使用这样的代码：

```
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI: (NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    isName = [elementName isEqualToString:@"name"];
    isId1 = [elementName isEqualToString:@"id1"];
    isId2 = [elementName isEqualToString:@"id2"];    
    if(isName){
        name = [Name new];
    }
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
        if (isName){
            [names addObject:name];
        }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string {
    if (isId1){
        [name setId1:string];
    }
    if (isId2){
        [name setId2:string];
    }
} 
```

但是对象名称中只设置了一个元素（id1 或 id2）。我做错了什么？

在调试中我得到这个： id1 = @"\n" id2 = @"22014870"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:37:50.813

在深入了解 XML 解析之前，我强烈建议您使用[GDataXMLNode](http://code.google.com/p/gdata-objectivec-client/source/browse/#svn/trunk/Source/XMLSupport)（也可作为 CocoaPod 使用）

然后，要了解如何使用它，请查看本教程[How To Read and Write XML Documents with GDataXML](http://www.raywenderlich.com/725/how-to-read-and-write-xml-documents-with-gdataxml)

我知道这并不能直接回答您的问题，但是使用 Google 提供的这个库确实要简单得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:50:05.660

问题是当你读完 id2 isName 设置为 NO，所以你并没有真正将它添加到你的数组中。

这是操作的顺序：

1.  name 元素开始；
2.  id1 元素开始；
3.  id1 元素结束；
4.  id2 元素开始；
5.  id2 元素结束；
6.  名称元素结束。

在第 4 点发生了 isName 的最后一次赋值，设置为：

```
isName = [elementName isEqualToString:@"name"]; 
```

这将导致错误。

**更正后的代码**：

```
- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName {
        if ([elementName isEqualToString: @"name"){
            [names addObject:name];
        }
} 
```

# exception - 无法从 PL/SQL 中的过程中检索错误

> ID：14244789
> 
> 赞同：2
> 
> 时间：2013-01-09T19:20:04.000
> 
> 标签：exception, plsql, procedure

我开始使用 PL/SQL 并学习如何编写`procedures`，`exceptions`但我似乎无法掌握如何显示错误。该过程很简单，它只应该做简单的数学运算，如下所示：

```
create or replace
procedure get_simple_math
  (n_num1 in number,
   n_num2 in number,
   n_answer out number,
   n_err_code out number,
   n_err_msg out varchar2)
as
begin
  n_answer := (n_num1 / n_num2);
  dbms_output.put_line('Answer is '||n_answer);

  n_err_code := 0;
exception
  when others
  then
    n_err_code := SQLCODE;
    n_err_msg := 'Error in get_simple_math '||SQLERRM;
    raise_application_error (-20002,n_err_msg);
end get_simple_math; 
```

如您所见，它没有什么花哨的，但是我一生都无法`block`运行：

```
set serveroutput on
declare
  n_answer number := 0;
  n_err_code number;
  n_err_msg varchar2;
begin
  get_simple_math(10,5,n_answer);
end; 
```

我假设我需要声明设置为 的变量`out`，这就是它们存在的原因。我还尝试将它们添加到`procedure`执行中，例如：

```
get_simple_math(10,5,n_answer,n_err_code,n_err_msg); 
```

但这似乎并没有奏效，所以我只是在寻找一些帮助来解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T19:28:42.420

运行这个，你会得到答案：

```
declare
  n_answer number := 0;
  n_err_code number;
  --> n_err_msg varchar2; -- Incorrect
  n_err_msg varchar2(300);     -- Correct
begin
  --> get_simple_math(10,5,n_answer); -- Incorrect call to proc...
  get_simple_math(10,5,n_answer, n_err_code, n_err_msg); -- add out parameters
end;
/ 
```

程序部分的一般建议：使用 substr - 可选：

```
 n_err_msg := 'Error in get_simple_math '||substr(SQLERRM, 1, 250); 
```

# css - CSS 导航栏居中问题

> ID：14244794
> 
> 赞同：2
> 
> 时间：2013-01-09T19:20:16.627
> 
> 标签：css, html, alignment, html-lists

看看我正在开发的这个网站：[new.AudioManiacProductions.com](http://new.audiomaniacproductions.com)

可以在此处找到来自 Dreamweaver 的显示 div 的屏幕截图：[new.AudioManiacProductions.com/images/stack.png](http://new.audiomaniacproductions.com/images/stack.png)

请注意导航栏如何不居中，并且“主页”在左侧有一个意图。我希望导航栏拉伸其父容器的整个跨度并垂直和水平居中。

这是我的页面导航部分、导航列表项和链接的 CSS。

```
#nav {
    width: 100%;
    height: 40px;
    margin:  0 auto;
    padding: 0px;
    text-align: center;
    color: #FFF;
    list-style: none;
    line-height: auto;
    verticle-align: middle;
}
#nav li {
    padding: 0px;
    display: block;
    width: 20%;
    list-style-type: none;
    float: left;
    text-align: center;
    overflow: hidden;
    line-height: auto;
    verticle-align: middle;
}
#nav li a {
    font-size: 18px;
    font-weight: 600px;
    text-decoration: none;
    font-weight:800;
    color:#FFF;
}
#nav li a:hover, a:visited {
    color: #00F;
} 
```

这是我的 HTML：

```
<div id="nav">
  <ul>
<li><a href="index.php?home">Home</a></li>
    <li><a href="index.php?about">About Us</a></li>
    <li><a href="index.php?packages">Packages</a></li>
    <li><a href="index.php?quote">Quote</a></li>
    <li><a href="index.php?contact">Contact Us</a></li>
  </ul>
  </div> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:32:28.233

浏览器默认在 UL 标签上设置 padding-left。删除填充，这应该会有所帮助。

```
#nav ul {
    padding-left: 0;
} 
```

或者只是清除所有填充：

```
#nav ul {
    padding: 0;
} 
```

# ruby - Ruby：尝试从文件安装 ruby XL gem

> ID：14244795
> 
> 赞同：0
> 
> 时间：2013-01-09T19:20:21.887
> 
> 标签：ruby, gem, bundle, rubyxl

我刚开始使用 Ruby on Rails，需要使用 RubyXL gem (https://github.com/gilt/rubyXL)。其他开发人员之一告诉我使用捆绑安装。但是，如果我运行“bundle install ./rubyXL-1.2.10.gem”，我似乎无法获得正确的语法，我会得到“安装”被错误地调用。调用为“bundle install”。”。我如何使用外滩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:31:24.650

你想要`gem install ./rubyXL-1.2.10.gem`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:35:58.180

如果您需要捆绑器，您可以添加

`gem 'rubyXL', :path => '_path_to_file_'` 给你的`Gemfile`

# groovy - SoapUi AMF 请求登录

> ID：14244801
> 
> 赞同：0
> 
> 时间：2013-01-09T19:20:31.113
> 
> 标签：groovy, soapui, amf

我下载了 Soapui 并将其配置为执行 AMF 请求。我的服务器正在使用 Spring Security，所以我必须登录才能调用函数。

这是一个截图：[http ://hpics.li/a632c3e](http://hpics.li/a632c3e)

如何在 windows 的 groovy 脚本中设置，之前登录？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T19:32:12.333

SoapUI 文档描述了可以启用 AMF 会话。
打开您的 TestCase 并单击“选项”按钮。在 AMF 选项卡中，您可以设置是否需要对 TestCase 中的所有 AMF 请求使用会话并授权给 AMF 服务。

见： http: [//www.soapui.org/AMF/calling-amf-services.html](http://www.soapui.org/AMF/calling-amf-services.html)

# php - 如何在PHP中打印元素数量未知的数组

> ID：14244802
> 
> 赞同：2
> 
> 时间：2013-01-09T19:20:34.260
> 
> 标签：php, mysql

我在打印出数组元素时遇到了一个非常奇怪的问题。

我正在尝试在 php foreach 中打印出数组的一些元素 这正是数组的样子

```
 [2] => Array
        (
            [id] => 3
            [body] => dsfgdfgd
            [has_subquestion] => 1
            [is_subquestion] => 0
            [ordering] => 2
            [is_manditory] => 0
            [created] => 2013-01-09 12:06:47
            [parent_id] => 0
            [sub] => Array
                (
                    [0] => Array
                        (
                            [id] => 4
                            [body] => dfgdfg
                            [has_subquestion] => 1
                            [is_subquestion] => 1
                            [ordering] => 0
                            [is_manditory] => 0
                            [created] => 2013-01-09 11:24:20
                            [parent_id] => 3
                        )

                    [1] => Array
                        (
                            [id] => 23
                            [body] => gsdgdf
                            [has_subquestion] => 1
                            [is_subquestion] => 1
                            [ordering] => 14
                            [is_manditory] => 0
                            [created] => 2013-01-09 12:56:33
                            [parent_id] => 3
                        )

                )

        )
     [3] => Array
            (
                [id] => 5
                [body] => dfgdfg
                [has_subquestion] => 1
                [is_subquestion] => 0
                [ordering] => 3
                [is_manditory] => 0
                [created] => 2013-01-09 12:06:47
                [parent_id] => 0
                [sub] => Array
                    (
                        [id] => 6
                        [body] => dfgdfg
                        [has_subquestion] => 0
                        [is_subquestion] => 1
                        [ordering] => 3
                        [is_manditory] => 0
                        [created] => 2013-01-08 13:37:07
                        [parent_id] => 5
                    )

            ) 
```

请注意，第一个有 2 个 [sub]，而第二个只有一个。这是我打印它们的代码

```
echo count($question['sub']);
foreach($question['sub'] as $s):
    echo '<li>
    <input type="hidden" name="sub[id]" value="'. $s['id'] .'" />
    <input type="hidden" name="sub[parent]" value="'. $question['id'] .'" />
    '. $s['body'] .'</li>';
endforeach; 
```

这就是它正在打印的内容

2 dfgdfg gsdgdf

8 <--count (应该是 1 而不是 8) 6 <--以下每个都是子数组中的第一个字母/数字 d 0 1 3 0 2

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:00:46.720

运行 print_r($array)。

它还应该以递归方式为您提供答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:26:12.333

您需要更新代码以查看 [sub] 数组是否是多维的。我会通过检查 sub 是否有一个仅在只有一个数组时才匹配的键来做到这一点：

```
if (array_key_exists('id', $question['sub']) {
    // This is a single array so wrap it in an array so that the foreach logic works
    $question['sub'] = array($question['sub']);
}
... continue as normal with your foreach loop. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T19:37:33.110

使用 is_array() 并递归调用函数？

# sharepoint-2007 - Sharepoint 门户 2007 查看修改日期

> ID：14244803
> 
> 赞同：0
> 
> 时间：2013-01-09T19:20:36.710
> 
> 标签：sharepoint-2007

我正在使用 MS Sharepoint 门户 2007。我从已经存在的数据中创建了视图。我需要用户每天更新状态。我知道他们是否已经更新的任何方式，比如我可以获得修改日期的列或行吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:37:27.013

如果我正确理解了您的问题，那么您想在您的视图中获得 ROw 修改日期吗？如果我错了，请纠正我？

如果这是您的要求，那么您必须修改该视图并选择名为“已修改”的列，如果您想要用户名，则还要选择“修改者”列。

让我知道结果。

谢谢

# ruby - 是否可以使用 Ruby 从 Filetype 字段下载文件？

> ID：14244806
> 
> 赞同：0
> 
> 时间：2013-01-09T19:20:59.220
> 
> 标签：ruby, selenium, ruby-1.9.3

我正在寻找一种从不同页面下载文件并将它们存储在本地计算机的特定文件夹下的方法。我正在使用 Ruby 1.9.3

请参阅以下字段：

![文件类型字段](../Images/f7c92a5a52109679749ab0070a598363.png)

![文件提示下载](../Images/95b463b07cce6e7e738b1c6c798f2158.png)

**编辑**

*这是html内容：*

```
<input type="hidden" name="supplier.orgProfiles(1152444).location.locationPurposes().extendedAttributes(Upload_RFI_Form).value.filename" value="Screenshot.docx">

<a style="display:inline; position:relative;" href="

                                      /aems/file/filegetrevision.do?fileEntityId=8120070&cs=LU31NT9us5P9Pvkb1BrtdwaCrEraskiCJcY6E2ucP5s.xyz">
                                Screenshot.docx
                             </a> 
```

***我刚刚尝试过***的一种可能性：如果添加 html 内容`https://xyz.test.com`并构造如下所示的 URL

[https://xyz.test.com/aems/file/filegetrevision.do?fileEntityId=8120070&cs=LU31NT9us5P9Pvkb1BrtdwaCrEraskiCJcY6E2ucP5s.xyz](https://xyz.test.com/aems/file/filegetrevision.do?fileEntityId=8120070&cs=LU31NT9us5P9Pvkb1BrtdwaCrEraskiCJcY6E2ucP5s.xyz)

并将该 URL 放在浏览器上，然后点击`Enter`让我有机会下载文件，如屏幕截图所述。

现在可以通过脚本使用 Ruby 完成吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T21:31:53.527

由于您没有提供有效的 URL，因此很难为您测试解决方案。

通常，检索 URL 的内容是相同的，无论是页面还是文件。Ruby 的内置`OpenURI`是快速路径：

```
require 'open-uri'
file = open('http://example.com').read 
```

保存该文件很容易：

```
IO.binwrite('/path/to/file_to_save', file) 
```

使用`binwrite`避免了保存二进制数据时会发生的任何行尾转换。对于文本数据使用：

```
IO.write('/path/to/file_to_save', file) 
```

`IO.binwrite`和都`IO.write`记录在[IO 模块](http://www.ruby-doc.org/core-1.9.3/IO.html)中。

# bash - 在双引号中调用时，换行符正在从 echo 中删除

> ID：14244807
> 
> 赞同：0
> 
> 时间：2013-01-09T19:21:08.340
> 
> 标签：bash, echo, sh

我正在尝试填充一个名为的 shell 变量`$recipient`，该变量应包含一个值，后跟一个换行符。

```
$ set -x # force bash to show commands as it executes them 
```

我首先填充`$user`，这是我希望换行符跟随的值。

```
$ user=user@xxx.com
+ user=user@xxx.com 
```

`echo $user`然后我在双引号命令替换中调用。该`echo`语句应在 之后创建一个换行符`$user`，并且双引号应保留换行符。

```
$ recipient="$(echo $user)"
++ echo user@xxx.com
+ recipient=user@xxx.com 
```

但是，当我打印时`$recipient`，我可以看到换行符已被丢弃。

```
$ echo "'recipient'"
+ echo ''\''recipient'\'''
'recipient' 
```

我在 bash 版本 4.1.5 和 3.1.17 下发现了相同的行为，并且还在破折号下复制了该问题。

我尝试使用“printf”而不是 echo；这并没有改变任何东西。

这是预期的行为吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:26:10.543

命令替换删除尾随换行符。从[标准](http://pubs.opengroup.org/onlinepubs/9699919799/utilities/V3_chap02.html#tag_18_06_03)：

shell 应通过在子 shell 环境中执行命令来扩展命令替换（请参阅 Shell 执行环境）并用命令的标准输出替换命令替换（命令文本加上封闭的“$（）”或反引号），删除替换结束时的一个或多个字符的序列。输出结束前的嵌入字符不得删除；但是，它们可能被视为字段分隔符并在字段拆分期间被消除，具体取决于 IFS 的值和有效的引用。如果输出包含任何空字节，则行为未指定。

您将必须明确添加换行符。也许：

```
recipient="$user
" 
```

真的没有理由在这里使用命令替换。（也就是说，这`$(echo ...)`几乎总是一件愚蠢的事情。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:28:24.123

所有的 shell 版本都会以同样的方式做出反应，这在脚本中并不是什么新鲜事。

原始赋值末尾的换行符不包含在变量的值中。它只会“终止”当前的 cmd 并向 shell 发出信号以进行处理。

也许 user="user@xxx.com\n" 会起作用，但没有关于你为什么想要这个的上下文，只知道人们通常将变量值与换行符等格式化“工具”分开。

IHTH。

# contiki - 来自本地驱动器的 Contiki-os 文件处理

> ID：14244808
> 
> 赞同：2
> 
> 时间：2013-01-09T19:21:13.640
> 
> 标签：contiki

请看下面的代码。我正在编写一个应用程序来处理来自本地主机的文件以及其他不同的天空节点进程。Contiki cfs_open 无法从本地驱动器打开文件。目标是从本地驱动器打开文件并存储在闪存（天空）中以进行实时流式传输；流媒体部分正在工作。使用 CFS 上传文件的任何建议。

```
 PROCESS(coffee_file_process, "Coffee file process");
 AUTOSTART_PROCESSES(&coffee_file_process);
 PROCESS_THREAD(coffee_file_process, ev, data)
 {
      PROCESS_BEGIN();    

      char buf[100];
      int fd;
      fd=cfs_open("cate.txt", CFS_READ);
      if(fd >= 0) {
          cfs_write(fd, buf, sizeof(buf));
          cfs_seek(fd, 0, CFS_SEEK_SET);  //compute the offset from the beginning of the  file. 
          cfs_read(fd, buf, sizeof(buf));
          printf("Read message: %s\n", buf);
          cfs_close(fd);
      }

      PROCESS_END();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-05T09:40:32.097

如果您使用 Cooja 进行模拟，您可以[编写脚本](https://github.com/contiki-os/contiki/wiki/Using-Cooja-Test-Scripts-to-Automate-Simulations#writing-to-flash-sky-c)。在真实节点上，无法通过串行。要么按照 Sarwarul 的建议使用 shell，要么将自己的序列写入 cfs dumper。

# c# - 创建数据库查询服务

> ID：14244811
> 
> 赞同：0
> 
> 时间：2013-01-09T19:21:27.367
> 
> 标签：c#, web-services, tsql, windows-services

我被要求为我们的母公司创建**一项服务。**他们不在乎我是怎么做的，只要将数据发送给他们。

*   [我们有一个通过数据转换服务](http://msdn.microsoft.com/en-us/library/aa933484%28v=sql.80%29.aspx)(DTS)接收机器数据的 SQL 2000 服务器。

*   我们的母公司希望我创建**一个每 5 分钟左右运行一次的服务**，以收集新数据、汇总数据并将其转发给他们。

*   以我在 Windows 窗体开发方面的背景，我自然认为我应该使用某种类型的[Windows 服务](http://msdn.microsoft.com/en-us/library/windows/desktop/dd430435%28v=vs.85%29.aspx)每 5 分钟轮询一次数据库，然后将这些数据发送给我们的母公司。

*   存放此数据的机器是一台旧的 Windows 2000 机器，我们的网络管理员建议我将其作为[Web 服务](http://msdn.microsoft.com/en-us/magazine/ee335693.aspx)编写在我们较新的 Web 服务器上。

*   几个月前，我为 Web 服务器创建了一个[Web 服务，用于从我们的母公司提取工作订单信息，但我不知道如何使该服务每 5 分钟执行一次流程。](http://msdn.microsoft.com/en-us/magazine/ee335693.aspx)

昨天，我学习了如何在向表中添加记录时创建[Insert After Trigger 。](http://msdn.microsoft.com/en-us/library/aa258254%28v=sql.80%29.aspx)不幸的是，没有调用触发器，因为这个旧服务器使用 DTS 作业。我能够了解[批量导入数据时控制触发器执行](http://msdn.microsoft.com/en-us/library/ms187640.aspx)，但似乎没有办法修改我们的旧 DTS 作业以启用该`BULK INSERT`命令。它可能不适用于 SQL Server 2000。

那么，有了这样的背景，我应该创建一个 Windows 服务还是一个 Web 服务？

我应该如何进行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:34:10.647

我不会为重复性任务创建 Web 服务。Web 服务与 Windows 服务的可比性不大。
顺便说一句：一个更简单的替代方法可能是创建一个命令行应用程序，该应用程序通过计划任务定期运行（阅读“服务器 2000 中的 AT 计划程序”）。I 只是更容易安装和进行更新，因为每次进行更新时都不需要重新启动服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:34:59.893

如果 web 服务有一个您可以调用的方法来执行数据导入/转换一次，您可以使用 windows 任务或 cron 作业向该方法发出请求。您可以将此任务添加到托管服务的服务器，也可以添加到其他服务器，只要它可以访问 Web 服务。

# osx-lion - NV-GLX 在 OS X Lion 中缺少扩展

> ID：14244812
> 
> 赞同：4
> 
> 时间：2013-01-09T19:21:29.780
> 
> 标签：osx-lion, remote-access, xlib, glx

我使用“ssh -X machine”连接到远程 linux 机器，然后运行图形应用程序，因此它的窗口使用 X Window 显示在我的本地 OS X Lion 机器上。我得到错误

“Xlib：显示“localhost:11.0”上缺少扩展名“NV-GLX”。”

应用程序移动非常缓慢。有没有办法在 OS X 上使用 NV-GLX 或解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T07:49:36.040

我在尝试从带有 AMD 图形卡的笔记本电脑连接到安装了 NVIDIA 卡和驱动程序的 linux 服务器时遇到了类似的问题。

如果您对远程 linux 机器具有 root 访问权限，则可以尝试使用 default 重新启动 X 服务器`libglx.so`，而不是 NVIDIA 驱动程序包中的那个。似乎 NVIDIA 安装程序不支持部分安装（只有驱动程序，没有 GLX 库），所以需要`libglx.so`从 xorg 模块路径中删除 NVIDIA，但离开`nvidia_drv.so`. 在 Debian 上你可以做

```
# update-alternatives --config glx # select mesa-diverted
# ln -s /usr/lib/nvidia/current/nvidia_drv.so /usr/lib/xorg/modules/drivers/ 
```

确保您的远程 /etc/Xorg.0.log 具有以下部分

```
...
[  1111.390] (II) LoadModule: "glx"
[  1111.390] (II) Loading /usr/lib/xorg/modules/extensions/libglx.so
[  1111.390] (II) Module glx: vendor="X.Org Foundation"
...
[  1111.391] (II) LoadModule: "nvidia"
[  1111.391] (II) Loading /usr/lib/xorg/modules/drivers/nvidia_drv.so
[  1111.392] (II) Module nvidia: vendor="NVIDIA Corporation"
... 
```

在该`Xlib: extension "NV-GLX" missing on display "localhost:11.0"`消息应该消失之后

# ios - 如何使视图控制器从左侧出现而不填满整个视图？

> ID：14244815
> 
> 赞同：0
> 
> 时间：2013-01-09T19:21:38.823
> 
> 标签：ios, ipad, uiview, uiviewcontroller, custom-controls

如何使 UiViewController 从屏幕右侧出现，就像这个应用程序（Break）在 iPad 上所做的一样。

[https://itunes.apple.com/us/app/funny-videos-pics-by-break.com/id342257973?mt=8](https://itunes.apple.com/us/app/funny-videos-pics-by-break.com/id342257973?mt=8)

事实上，我希望我的 UIViewController 从侧面出现在屏幕上，而不是填充我的主 UI 视图控制器的整个 UIView。背景视图也应该变暗。

总而言之，我想模仿同样的 Break 的行为。

如果需要，这是一张图片

![在此处输入图像描述](../Images/8c5a22d9a50944f967d2502abc77445e.png)

任何的想法 ？谢谢你的时间 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:01:25.510

您可能只需要对 UIViews 进行一些手动操作。因此，与其将视图控制器推送到堆栈上，不如在背景视图上覆盖一个半透明的黑色视图以使其变暗，然后简单地对要显示在顶部的视图执行 addSubView。

# python - 运行过程中的画布更新

> ID：14244819
> 
> 赞同：0
> 
> 时间：2013-01-09T19:22:00.390
> 
> 标签：python, canvas, tkinter

```
master = Tk()

canvas_width = 100
canvas_height = 250
w = Canvas(master, 
           width=canvas_width,
           height=canvas_height)
w.pack()

class Tetriminos(object):

    def __init__(self, position, pivot, color):
        self.position = position
        self.pivot = pivot
        self.color = color

    def left_shift(self):
        backup = copy.copy(self.position) 
        for i in range(len(self.position)):
            change = str(int(self.position[i][0]) - 1) + self.position[i][1:]
            if "-" in change:
                self.position = backup
                return False
            for j in self.position:
                if "0" in self.position:
                    self.position = backup
                    return False
            self.position[i] = change
        self.pivot[0] -=1

    def right_shift(self):
        backup = copy.copy(self.position)
        for i in range(len(self.position)):
            change = str(int(self.position[i][0]) + 1) + self.position[i][1:]
            if "0" in change:
                self.position = backup
                return False
            self.position[i] = change
        self.pivot[0] += 1

    def rotate(self): #direction?
        for i in range(len(self.position)):
            a = int(self.position[i][0]) - self.pivot[0]
            b = int(self.position[i][1:]) - self.pivot[1]
            a, b = a*0 + b*(-1), a*1 + b*0
            a += self.pivot[0]
            b += self.pivot[1]
            if a >= 0 and b >= 0:
                self.position[i] = str(a) + str(b)
            else:
                pass

    def drop(self):
        pass

    def slow_drop(self):
        for i in range(len(self.position)):
            change = self.position[i][0] + str(int(self.position[i][1:]) + 1)
            if int(change[1:]) < 26: #and no other tetrimino is in the way...
                self.position[i] = change
            else:
                return False
        self.pivot[1] += 1

    def draw(self):
        for i in range(len(self.position)):
            a = int(self.position[i][0])*10
            b = (int(self.position[i][1:])-1)*10 #Das Koordinatensystem ist gedreht!!
            c = (int(self.position[i][0])+1)*10
            d = (int(self.position[i][1:]))*10

            w.create_rectangle(a, b, c, d, fill=self.color)
            w.create_rectangle(a, b, c, d, fill=self.color)
            w.create_rectangle(a, b, c, d, fill=self.color)
            w.create_rectangle(a, b, c, d, fill=self.color)

tetrimino1 = Tetriminos(["302", "402", "502", "602"], [4, 2], "green")

tetrimino2 = Tetriminos(["402", "502", "401", "501"], [5, 1], "grey")

tetrimino3 = Tetriminos(["302", "402", "502", "401"], [4.5, 1.5], "yellow")

tetrimino4 = Tetriminos(["302", "402", "502", "301"], [4.5, 1.5], "blue")

tetrimino5 = Tetriminos(["302", "402", "502", "501"], [4.5, 1.5], "red")

tetrimino6 = Tetriminos(["302", "402", "401", "501"], [4, 1], "white")

tetrimino7 = Tetriminos(["402", "502", "301", "401"], [5, 1], "orange")

tetrimino_list = [tetrimino1, tetrimino2, tetrimino3, tetrimino4,tetrimino5,
              tetrimino6, tetrimino7]

settled_tetriminos = []

def draw():
    w.delete(ALL)
    current.draw()
    for t in settled_tetriminos:
        t.draw
        w.update_idletasks()
    time.sleep(0.1)
    current.slow_drop()
    print(current.position)
    if int(current.position[1][1:]) == 25:
        w.delete(ALL)
        current.draw()
        w.update_idletasks()
        settled_tetriminos.append(current)
        return False
    w.delete(ALL)
    current.draw()
    for t in settled_tetriminos:
        t.draw
    w.update_idletasks() 
    w.after(100, draw)

current = random.choice(tetrimino_list)
draw()

class App:
    def __init__(self, master):
        frame = Frame(master)
        frame.pack()
        self.button = Button(frame, 
                         text="Left", fg="red",
                         command=self.left())
        self.button.pack(side=LEFT)
        self.button2 = Button(frame,
                         text="Right", fg="red",
                         command=self.right())
        self.button2.pack(side=RIGHT)
    def left(self):
        print("dsdsd")
        current.left_shift()
        current.draw()
    def right(self):
        print("ffff")
        current.right_shift()
        current.draw()

mainloop() 
```

好的，它现在有点工作。但仅限于一件。如果我使用任何while循环或递归函数，它不会像你说的那样。但是我怎么能避免循环，如果我想每次都得到新的tetriminos，最近的一个解决了？如果我使用递归，否则它会在内部工作，但不会出现在画布上。

或者你可以告诉我为什么这个按钮不起作用。它只是自动执行这两种方法一次，然后我就不能再交互了。按钮已经死了。你认为有可能以这种方式编写俄罗斯方块，还是我需要彻底改变一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:29:29.527

很难确定发生了什么，因为您发布的代码缺少一些重要的代码。

然而，话虽如此，逻辑看起来非常古怪。例如，`drawdraw`有一个你不应该在 GUI 中拥有的无限循环。`drawdraw`call`draw`和`draw`calls `drawdraw`，这意味着可以在无限循环中运行无限循环。

您似乎设置了一个系统永远没有机会绘制自己的情况。

最好的解决方案是删除你的无限循环，并删除递归。这些都不是在 Tkinter 中制作动画所必需的。

# c# - 两个ajax同时调用导致两个内部服务器错误

> ID：14244821
> 
> 赞同：0
> 
> 时间：2013-01-09T19:22:11.780
> 
> 标签：c#, ajax, asp.net-mvc, asp.net-mvc-3, jquery

我有两个执行两个 ajax 调用的函数。如果我调用一个函数而不是另一个函数，则代码将正常执行。但是，如果我同时调用它们，我会收到两条内部服务器错误消息。我假设的每个功能都有一个。

这是我的代码：

```
 $(document).ready(function(){
         CategoryChangeState(@Model.CatId , subcategoryId);
         SubategoryChangeState(@Model.SubcatId);
    })
    public ActionResult ReturnListOfSubcategories( FormCollection collection ) {
            string categoryId = collection["result"];

            var subcategories = ProductManagerHelperClass.ReturnSubcategories(categoryId);
            return Json(subcategories);
    }
    public ActionResult ReturnListOfBrands() {

          var brands = ProductManagerHelperClass.ReturnBrands();
          return Json(brands);
    }
function CategoryChangeState(value ,  editPage) {
        .....
        $.ajax({
            type: "POST",
            url: "/ProductManager/ReturnListOfSubcategories",
            data: { result: value },
            datatype: "json",
            error: function (jqXHR, textStatus, errorThrown) {
                alert(errorThrown);
            }
        });
        ...
}

function SubategoryChangeState(value) {
         ....
         $.ajax({
            type: "POST",
            url: "/ProductManager/ReturnListOfBrands",
            datatype: "json",
            error: function (jqXHR, textStatus, errorThrown) {
                alert(errorThrown);
            }
        });
       ....
} 
```

为什么我会收到这些错误，我该如何解决？

**编辑**

在调试时我发现在这部分代码中：

```
 public static Dictionary<string , string> ReturnSubcategories(string categoryId)
    {
        int catId = int.Parse(categoryId);

        var subcategories = (from s in dataContext.SubCategories
                             where s.CatId == catId
                             select new
                                        {
                                            s.SubCatId,
                                            s.SubCatName
                                        }).ToDictionary(x => x.SubCatId.ToString(), x => x.SubCatName);

        return subcategories;
    } 
```

linq 查询抛出异常：

```
InvalidOperationException ExecuteReader requires an open and available Connection. The connection's current state is closed. 
```

同样，仅当我同时调用两个函数时才会引发此异常

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:32:00.027

那是因为您使用了一个静态类，您（可能）在其中建立了与数据库的连接。会发生以下情况：

1.  线程一进入您的静态类，打开一个连接。
2.  同时线程二进入同一个类，使用同一个打开的连接。
3.  当线程一完成时，它会关闭打开的连接。
4.  线程二抛出错误，因为没有打开的连接。

如果您不使用静态类来实例化数据库连接，则不会发生这种情况。

# liferay - 使用 CMIS(AtomPub) 在 liferay 6.1 中添加 alfresco 4.2 作为存储库

> ID：14244828
> 
> 赞同：1
> 
> 时间：2013-01-09T19:22:36.213
> 
> 标签：liferay, alfresco, liferay-6, cmis, opencmis

我从网站下载了带有捆绑 tomcat 的 liferay 6.1，我目前正在尝试使用[此处](http://www.liferay.com/community/wiki/-/wiki/Main/CMIS+Repository)描述的过程在文档和媒体 portlet 中添加一个新存储库。

尽管集成成功，但在存储库列表中，新创建的 cmis 存储库 (alfresco) 显示以下警告：“连接到存储库时发生意外错误”。但是 catalina.out 和 liferay 日志上没有任何内容。然后，当我尝试创建子文件夹时，出现以下异常：在 apache chemistry CmisRuntimeException: Length Required。

我检查了wireshark，实际上从liferay 到alfresco 的POST 请求确实错过了内容长度。我该如何启用它？有没有人有类似的问题？

任何帮助都感激不尽。

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T14:30:26.650

1.  门户设置 - 身份验证 -*使用屏幕名称。帐户创建存储库的昵称和密码应与 alfresco 相同。*
2.  将参数添加到 portal-ext.properties **session.store.password=true**和**company.security.auth.type=screenName**
3.  创建存储库。使用 URL 路径**/alfresco/service/cmis**（不是 /alfresco/cmisatom）。实时存储库 ID 为空白。

阅读 在 Liferay 6.1和[CMIS 存储](http://www.liferay.com/community/wiki/-/wiki/Main/CMIS+Repository#section-CMIS+%C2%ADRepository-FAQ)[库上安装多个 CMIS 存储](http://www.liferay.com/de/web/alexander.chow/blog/-/blogs/7670631)库的更多信息。

# c - 在 C 中初始化结构数组，然后在稍后取消引用

> ID：14244833
> 
> 赞同：0
> 
> 时间：2013-01-09T19:23:11.403
> 
> 标签：c, arrays, struct, function-pointers, dereference

我正在尝试构建一个串行命令解释器，所以我想将我的命令存储在一个数组中。我希望每个命令都有一个名称和一个函数指针，以便我可以将命令名称与我输入的内容进行比较，然后调用该函数。我对C不太好，所以请帮忙！这是我到目前为止所拥有的。

命令数组将是一个结构数组。每个结构都有一个字符串和一个函数指针。这里有错误，但我不知道如何修复它们。这些都是在 main 之前完成的。

```
typedef struct cmdStruct {
    char cmd[16];
    void (*cmdFuncPtr)(void);
}CmdStruct;

void (*ledFuncPtr)(void);
void (*cmd2FuncPtr)(void);

// assign pointers to functions
ledFuncPtr = &LedFunction;
cmd2FuncPtr = &Cmd2Function;

//build array of structs
CmdStruct cmdStructArray[] = cmdStructArray = { {"led",   ledFuncPtr   },
                                                {"cmd2",  cmd2FuncPtr  },  }; 
```

稍后，我将通过结构数组将其与接收到的命令进行比较。

```
// go through the struct array to do string comparison on each struct's string member
for (int i = 0; i < sizeof(cmdStructArray); i++) {
    // string comparison of received command and string of struct
    if(strcmp(cmdStructArray[i].cmd, receivedCmd)==0) {
        // dereference function pointer
        (*cmdStructArray[i].cmdFuncPtr)(void);
    }
} 
```

我做错了什么部分，我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:25:09.690

`sizeof(cmdStructArray)`不是在元素中，而是在字节中。

使用`sizeof(cmdStructArray)/sizeof(cmdStructArray[0])`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-09T19:36:10.923

正如已经指出的那样，您的循环进行了错误的迭代次数。`sizeof array`确实为您提供了数组中的元素数，而是数组中的字节数。您必须计算`sizeof array / sizeof *array`才能获得元素的数量。

此外，您的函数调用语法无效

```
 (*cmdStructArray[i].cmdFuncPtr)(void); 
```

以上将无法编译。您不能`void`在函数调用中指定为参数。`(void)`语法只能在函数声明中使用。如果函数不接受任何参数，则调用应如下所示

```
 (*cmdStructArray[i].cmdFuncPtr)(); 
```

此外，这也不会编译

```
CmdStruct cmdStructArray[] = cmdStructArray = { {"led",   ledFuncPtr   },
                                                {"cmd2",  cmd2FuncPtr  },  }; 
```

你为什么`cmdStructArray`在这份声明中提到两次？

* * *

一些额外的，本质上是装饰性的评论：

首先，由于您的命令可能是编译时已知的字符串文字，您可以将结构的第一个成员声明为`const char *`指针而不是 char 数组

```
typedef struct cmdStruct {
  const char *cmd;
  void (*cmdFuncPtr)(void);
} CmdStruct; 
```

初始化语法不会改变。这将使您不必担心数组的大小（`16`您目前在那里）。

其次，不清楚为什么必须声明指向函数的中间指针`ledFuncPtr`而`cmd2FuncPtr`不是直接初始化数组。这样做的目的是什么

```
void (*ledFuncPtr)(void);
void (*cmd2FuncPtr)(void);

// assign pointers to functions
ledFuncPtr = &LedFunction;
cmd2FuncPtr = &Cmd2Function;

CmdStruct cmdStructArray[] = { {"led",   ledFuncPtr  },
                               {"cmd2",  cmd2FuncPtr }, }; 
```

当你可以简单地做到这一点

```
CmdStruct cmdStructArray[] = { {"led",   &LedFunction  },
                               {"cmd2",  &Cmd2Function }, }; 
```

`ledFuncPtr`（完全没有介绍`cmd2FuncPtr`）？

第三，您不必将`*`和`&`运算符与函数指针一起使用。这也可以

```
CmdStruct cmdStructArray[] = { {"led",   LedFunction   },
                               {"cmd2",  Cmd2Function  }, }; 
```

和

```
cmdStructArray[i].cmdFuncPtr(); 
```

无论如何，这纯粹是一个表面问题，个人喜好问题。

# iphone - UIButton touchUpInside 事件未正确触发

> ID：14244834
> 
> 赞同：0
> 
> 时间：2013-01-09T19:23:13.473
> 
> 标签：iphone, cocoa, uibutton

我有一个表格视图，其中包含一行，其中包含一个自定义单元格`UIButton`。但是，按钮并不总是触发动作。这是我的代码：

```
 submitButton = [[UIButton alloc] init];

    [[submitButton layer] setBorderColor:[[UIColor whiteColor] CGColor]];
    [submitButton setClipsToBounds: YES];
    submitButton.backgroundColor = [UIColor grayColor];
    [submitButton setTitle:@"Send" forState:UIControlStateNormal];
    [self.contentView addSubview:submitButton];
    [submitButton addTarget:self action:@selector(buttonAction) forControlEvents:UIControlEventTouchUpInside];
    [submitButton release]; 
```

这在自定义单元格中调用`-(id)initWithStyle:`

该`buttonAction`方法如下所示：

```
 -(void)buttonAction
 {
     NSLog(@"Button Clicked!");
 } 
```

似乎我可以`buttonAction`触发的唯一方法是按下按钮并在单元格框架内的某个位置释放，而不是在按钮本身内部。为什么会这样？

****更新**** 问题仍然存在，但我发现让按钮触发的更一致的方法是单击并向左或向右拖动然后松开，只要我在单元格/行的范围内松开.

**更新#2** 看起来如果我使用 iOS 6.0，它会按预期工作。但在 5.0 或 5.1 上却没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:09:31.953

尝试分配相同的方法调用`TouchUpOutside`- 然后您应该每次都看到它工作。只有当您在按钮范围内抬起手指时才会触发 TouchUpInside。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:27:07.147

试试`[submitButton sizeToFit]`。我想知道你的按钮是否有任何尺寸（因为我没有看到你给它任何尺寸）。

`[UIButton buttonWithType: UIButtonTypeCustom]`另外：使用而不是 alloc-init创建您的按钮。

# css - XML 到 XSL 的转换

> ID：14244838
> 
> 赞同：1
> 
> 时间：2013-01-09T19:23:44.560
> 
> 标签：css, xml, xslt, xsd

我是 XSL / XML 的新手。我想为下面的 XML 代码制作一个简单的 XSL，它只显示属性名称和地址？我拥有大部分 XSL，但我无法编写显示结果（客户）的部分。

这是 XML 代码：

```
<?xml version="1.0"?>
<?xml-stylesheet type="text/xsl" href="customer.xsl"?>
<customers xmlns:xs="http://www.w3.org/2001/XMLSchema" 
           xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
           xsi:noNamespaceSchemaLocation="customer.xsd">
    <customer name="Jay Z" address="New York, trinity st. 300, USA"/>
    <customer name="Vladimir Putin" address="St. Petersburg, wadim street 23, Russia"/>
    <customer name="Hiro Nakamura" address="Kyoto, Natsukawa street 49, Japan"/>
</customers> 
```

像这样？

```
<xsl:value-of select="customers/customer"/> 
```

任何帮助都感激不尽！谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:31:03.813

XSL 本身如下所示：

```
<xsl:for-each select="customers/customer">
   <xsl:value-of select="@name"/>
   <xsl:value-of select="@address"/>
</xsl:for-each> 
```

[此代码作为工作示例](http://www.xsltcake.com/slices/LnwyBT/2)

有关更详细的示例，请查看[此](http://www.w3schools.com/xsl/tryxslt.asp?xmlfile=cdcatalog&xsltfile=cdcatalog_ex3)

# c++ - 合并没有空间的文件比有空间快

> ID：14244842
> 
> 赞同：5
> 
> 时间：2013-01-09T19:23:50.993
> 
> 标签：c++, file, visual-c++, merge

因此，我创建了一个用于合并文件的 c++ 可执行文件。我有 43 个文件，每个文件大小为 100MB。所以总共大约4.3GB。

两种情况：

一：如果文件名是1、2、3、4、5、6、...、43，大约需要2分钟完成合并。

二：如果文件名是This File.ova0, This File.ova1, ..., This File.ova42 大约需要7分钟才能完成合并。

这是同一个文件，我只是重命名了文件。知道有什么问题吗？

这是c++代码

```
#include <iostream>
#include <fstream>

#include <vector>
#include <string>

#include "boost/filesystem.hpp"

namespace bfs = boost::filesystem;

#pragma warning(disable : 4244)

typedef std::vector<std::string> FileVector;
int main(int argc, char **argv)
{

    int bucketSize = 3024 * 3024;

    FileVector Files;

    //Check all command-line params to see if they exist..
    for(int i = 1; i < argc; i++)
    {
        if(!bfs::exists(argv[i]))
        {
            std::cerr << "Failed to locate required part file: " << argv[i] << std::endl;
            return 1;
        }

        //Store this file and continue on..
        std::cout << "ADDING " << argv[i] << std::endl;
        Files.push_back(argv[i]);
    }

    //Prepare to combine all the files..
    FILE *FinalFile = fopen("abc def.ova", "ab");

    for(int i = 0; i < Files.size(); i++)
    {
        FILE *ThisFile = fopen(Files[i].c_str(), "rb");     

        char *dataBucket = new char[bucketSize];

        std::cout << "Combining " << Files[i].c_str() << "..." << std::endl;

        //Read the file in chucks so we do not chew up all the memory..
        while(long read_size = (fread(dataBucket, 1, bucketSize, ThisFile)))
        {
            //FILE *FinalFile = fopen("abc def.ova", "ab");
            //::fseek(FinalFile, 0, SEEK_END);
            fwrite(dataBucket, 1, read_size, FinalFile);
            //fclose(FinalFile);
        }

        delete [] dataBucket;
        fclose(ThisFile);
    }
    fclose(FinalFile);

    return 0;
} 
```

我通过 .bat 文件运行它，如下所示：

```
@ECHO OFF

Combiner.exe "This File.ova0" "This File.ova1" "This File.ova2" 

PAUSE 
```

或者

```
@ECHO OFF

Combiner.exe 1 2 3

PAUSE 
```

两个.bat文件都到文件名末尾，我这里只写了3个文件，否则会太长

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-26T22:11:43.970

默认情况下，Windows 缓存从磁盘读取并写入磁盘的文件数据。这意味着读取操作从系统内存中称为系统文件缓存的区域读取文件数据，而不是从物理磁盘读取文件数据。相应地，写操作将文件数据写入系统文件缓存而不是磁盘，这种缓存称为回写缓存。缓存是按文件对象管理的：更多信息：[文件缓存](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364218%28v=vs.85%29.aspx)

# google-groups - 获取 Google Group 成员的电子邮件发送状态

> ID：14244843
> 
> 赞同：3
> 
> 时间：2013-01-09T19:23:54.250
> 
> 标签：google-groups, google-groups-api

在一个组内（使用 web/gui），您可以在用户旁边看到“弹跳”、“未验证”等。有没有办法通过 API 获取这些信息？

使用 python，我可以使用 RetrieveAllMembers 来……检索所有成员。返回的 GroupMemberEntry 对象没有用户的“状态”（因为没有更好的词）。

我的目标是：1) 转储我域中的所有组 2) 检查组的弹跳地址 3) 向组所有者发送有关错误地址/用户的电子邮件。

我可以做#1 和#3。这是我需要帮助的#2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-12T21:54:13.297

抱歉，Google Apps Provisioning API 和 Google Groups Settings API 都不支持检索或设置成员传递状态。

# database - 将数据从 DDBB 保存到 AS 类

> ID：14244848
> 
> 赞同：0
> 
> 时间：2013-01-09T19:24:10.803
> 
> 标签：database, apache-flex, data-binding, actionscript

我正在尝试在 Flex 中制作类似于 Shake&Fidget 的“游戏”。我将所有用户数据保存在 mysql 数据库中，并使用 ZendFramework (PHP) 检索数据。我想将我需要的所有用户和角色信息保存到 AS 类中，这样我就可以在每个视图中使用这些数据。

从数据库接收的数据是正确的。我能够将它加载到我的应用程序标签中，但每次我更改视图时，它都必须再次询问，所以我想制作这个课程以便只询问一次信息。

我会把文件贴在这里，这样就更清楚了。

ViewNavigatorAplication.mxml

```
<s:ViewNavigatorApplication xmlns:fx="http://ns.adobe.com/mxml/2009"
                        xmlns:s="library://ns.adobe.com/flex/spark"
                        firstView="views.RotrHomeView"
                        persistNavigatorState="true">
<fx:Script>
    <![CDATA[
        import flash.net.registerClassAlias;

        import valueObjects.Character;

        registerClassAlias("Character", valueObjects.Character);
    ]]>
</fx:Script> 
```

第一个视图进入登录屏幕，它工作正常。因此，我将转到加载并“尝试”显示字符数据的视图。

char_panel.mxml

```
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
    xmlns:s="library://ns.adobe.com/flex/spark"
    xmlns:usersservice1="services.usersservice1.*"
    title="Character Sheet" 
    viewActivate="char_panel_viewActivateHandler()">
<fx:Script>
    <![CDATA[
        import mx.binding.utils.*;
        import mx.events.FlexEvent;
        import mx.rpc.events.ResultEvent;

        import valueObjects.Character;

        //[Bindable]protected var character:Character = new Character();

        public function updateStats():void{
            var str:int = parseInt(getGlobalStatsResult.lastResult.globalSTR) + parseInt(getCharacterStatsResult.lastResult.str);
            var dex:int = parseInt(getGlobalStatsResult.lastResult.globalDEX) + parseInt(getCharacterStatsResult.lastResult.dex);
            var intel:int = parseInt(getGlobalStatsResult.lastResult.globalINT) + parseInt(getCharacterStatsResult.lastResult.intel);
            var cha:int = parseInt(getGlobalStatsResult.lastResult.globalCHA) + parseInt(getCharacterStatsResult.lastResult.cha);
            var sta:int = parseInt(getGlobalStatsResult.lastResult.global_VIT) + parseInt(getCharacterStatsResult.lastResult.vit);              
            data.modStats(str,intel,cha,sta,dex)
            data.showStats(lb_show_str,lb_show_dex,lb_show_int,lb_show_cha,lb_show_vit);
            //character.showStats(lb_show_str,lb_show_dex,lb_show_int,lb_show_cha,lb_show_vit);

        }

        public function char_panel_viewActivateHandler():void{
            if(!data){
                data = new Character();
            }
            getCharacterStatsResult.token = usersService1.getCharacterStats("user01");
            getGearListResult.addEventListener(ResultEvent.RESULT,onResult);
            getGearListResult.token = usersService1.getGearList();
        }
        public function onStatsResult(event:ResultEvent):void{
            if(getGlobalStatsResult.lastResult.globalSTR != null){
                updateStats();
            }
        }

        public function onResult(event:ResultEvent):void{
            if(getGearListResult.lastResult[0].itemName != null){
                getGlobalStatsResult.addEventListener(ResultEvent.RESULT, onStatsResult);
                getGlobalStatsResult.token = usersService1.getGlobalStats("user01");

                currentState = "Character";

            }
        }
    ]]>
</fx:Script>
<s:states>
    <s:State name="Loading"/>
    <s:State name="Character"/>
</s:states>
<fx:Declarations>
    <s:CallResponder id="getCharacterStatsResult"/>
    <s:CallResponder id="getGearListResult"/>
    <s:CallResponder id="getGlobalStatsResult"/>
    <usersservice1:UsersService1 id="usersService1"/>
    <!-- Place non-visual elements (e.g., services, value objects) here -->
</fx:Declarations>
<s:Label id="lb_show_str" includeIn="Character" x="119" y="46" text=""/>
<s:BusyIndicator includeIn="Loading" left="172" right="171" top="148" bottom="424"
                 horizontalCenter="0" verticalCenter="-138"/>
<s:Label id="lb_show_int" includeIn="Character" x="119" y="90"/>
<s:Label id="lb_show_cha" includeIn="Character" x="119" y="139"/>
<s:Label id="lb_show_vit" includeIn="Character" x="119" y="191"/>
<s:Label id="lb_show_dex" includeIn="Character" x="119" y="243"/> 
```

至于 AS 类：

字符.as

```
package valueObjects{
import mx.data.ChangedItems;
import mx.messaging.channels.StreamingAMFChannel;

import spark.components.Label;
import spark.skins.spark.StackedFormHeadingSkin;

[Bindable]
public class  Character
{
    private var _name:String;
    private var _stats:FinalStats;
    private var _gear:GearList;

    public function Character()
    {
        this._stats = new FinalStats();
        this._gear = new GearList();
    }
    public function modStats(str:int,intel:int,cha:int,sta:int,dex:int):void{
        this._stats.modStr(str);
        this._stats.modInt(intel);
        this._stats.modCha(cha);
        this._stats.modVit(sta);
        this._stats.modDex(dex);
    }
    public function getStats():Array{
        var aStats:Array;
        aStats["str"]=this._stats.getStr();
        aStats["int"]=this._stats.getInt();
        aStats["cha"]=this._stats.getCha();
        aStats["sta"]=this._stats.getVit();
        aStats["dex"]=this._stats.getDex();
        return aStats;
    }
    public function setName(charName:String):void{
        this._name = charName;
    }
    public function getName():String{
        return this._name;
    }
    public function showStats(lbSTR:Label, lbDEX:Label, lbINT:Label, lbCHA:Label, lbVIT:Label):void{
        lbSTR.text = "" + this._stats.getStr();
        lbDEX.text = "" + this._stats.getDex();
        lbINT.text = "" + this._stats.getInt();
        lbCHA.text = "" + this._stats.getCha();
        lbVIT.text = "" + this._stats.getVit();
    }
}} 
```

FinalStats.as

```
package valueObjects{

public class FinalStats
{
    private var str:int = 0;
    private var intel:int = 0;
    private var cha:int = 0;
    private var sta:int = 0;
    private var dex:int = 0;
    public function FinalStats()
    {
    }

    public function getStr():int{
        return this.str;
    }
    public function modStr(x:int):void{
        this.str+=x;
    }
    public function getDex():int{
        return this.dex;
    }
    public function modDex(x:int):void{
        this.dex+=x;
    }
    public function getInt():int{
        return this.intel;
    }
    public function modInt(x:int):void{
        this.intel+=x;
    }
    public function getCha():int{
        return this.cha;
    }
    public function modCha(x:int):void{
        this.cha+=x;
    }
    public function getVit():int{
        return this.sta;
    }
    public function modVit(x:int):void{
        this.sta+=x;
    }
} 
```

}

最后一个 GearList.as

```
package valueObjects{
import mx.data.ChangedItems;
import mx.messaging.channels.StreamingAMFChannel;

import spark.components.Label;
import spark.skins.spark.StackedFormHeadingSkin;

public class GearList
{
    private var _headID:String;
    private var _shoulderID:String;
    private var _chestID:String;
    private var _bracersID:String;
    private var _glovesID:String;
    private var _pantsID:String;
    private var _bootsID:String;
    private var _main_handID:String;
    private var _off_handID:String;

    public function GearList()
    {
    }

    public function showStats(lbHead:Label, lbShoulder:Label, lbChest:Label, lbBracer:Label, lbGlove:Label, lbPants:Label, lbBoots:Label, lbMainHand:Label, lbOffHand:Label):void{
        lbHead.text = ""+this._headID;
        lbShoulder.text = ""+this._shoulderID;
        lbChest.text = ""+this._chestID;
        lbBracer.text = ""+this._bracersID;
        lbGlove.text = ""+this._glovesID;
        lbPants.text = ""+this._pantsID;
        lbBoots.text = ""+this._bootsID;
        lbMainHand.text = ""+this._main_handID;
        lbOffHand.text = ""+this._off_handID;
    }

    public function getOff_handID():String
    {
        return _off_handID;
    }

    public function setOff_handID(value:String):void
    {
        _off_handID = value;
    }

    public function getMain_handID():String
    {
        return _main_handID;
    }

    public function setMain_handID(value:String):void
    {
        _main_handID = value;
    }

    public function getBootsID():String
    {
        return _bootsID;
    }

    public function setBootsID(value:String):void
    {
        _bootsID = value;
    }

    public function getPantsID():String
    {
        return _pantsID;
    }

    public function setPantsID(value:String):void
    {
        _pantsID = value;
    }

    public function getGlovesID():String
    {
        return _glovesID;
    }

    public function setGlovesID(value:String):void
    {
        _glovesID = value;
    }

    public function getBracersID():String
    {
        return _bracersID;
    }

    public function setBracersID(value:String):void
    {
        _bracersID = value;
    }

    public function getChestID():String
    {
        return _chestID;
    }

    public function setChestID(value:String):void
    {
        _chestID = value;
    }

    public function getShoulderID():String
    {
        return _shoulderID;
    }

    public function setShoulderID(value:String):void
    {
        _shoulderID = value;
    }

    public function getHeadID():String
    {
        return _headID;
    }

    public function setHeadID(value:String):void
    {
        _headID = value;
    }

}} 
```

如果您还在这里，您将受到我的尊重：D 当我尝试时，我收到以下错误。我已经尝试在 char_panel.mxml 中使用 Character::modStats(...) 而不是 data.modStats 我将把错误日志放在这个日志下面。

使用 data.modStats(...) 时的错误日志

TypeError：错误 #1006：modStats 不是函数。在意见::char_panel/updateStats()[C:\Users\Zebrah\Rotr\Rotr\src\views\char_panel.mxml:23] 在意见::char_panel/onStatsResult()[C:\Users\Zebrah\Rotr\ Rotr\src\views\char_panel.mxml:39] 在 flash.events::EventDispatcher/dispatchEventFunction() 在 flash.events::EventDispatcher/dispatchEvent() 在 mx.rpc::CallResponder/result()[E:\dev \4.5.1\frameworks\projects\rpc\src\mx\rpc\CallResponder.as:122] 在 mx.rpc::AsyncToken/http://www.adobe.com/2006/flex/mx/internal:: applyResult()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AsyncToken.as:239] 在 mx.rpc.events::ResultEvent/http://www.adobe.com /2006/flex/mx/internal::callTokenResponders()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\events\ResultEvent.as:207] 在 mx.rpc::AbstractOperation /http://www.adobe。

使用 Character::modStats(...) 的错误日志

错误：错误 #1034：类型强制失败：无法将 valueObjects::Character$ 转换为命名空间。在意见::char_panel/updateStats()[C:\Users\Zebrah\Rotr\Rotr\src\views\char_panel.mxml:23] 在意见::char_panel/onStatsResult()[C:\Users\Zebrah\Rotr\ Rotr\src\views\char_panel.mxml:39] 在 flash.events::EventDispatcher/dispatchEventFunction() 在 flash.events::EventDispatcher/dispatchEvent() 在 mx.rpc::CallResponder/result()[E:\dev \4.5.1\frameworks\projects\rpc\src\mx\rpc\CallResponder.as:122] 在 mx.rpc::AsyncToken/http://www.adobe.com/2006/flex/mx/internal:: applyResult()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\AsyncToken.as:239] 在 mx.rpc.events::ResultEvent/http://www.adobe.com /2006/flex/mx/internal::callTokenResponders()[E:\dev\4.5.1\frameworks\projects\rpc\src\mx\rpc\events\ResultEvent.as:207] 在 mx.rpc::

在此先感谢任何到目前为止在此帮助中哭泣的人：D 我会感谢您提出的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T21:35:39.287

好的，所以它不适用于数据的原因是那个事件，尽管你说

```
data = new Character(); 
```

data 实际上仍然是一个对象（现在看起来像一个字符）。让它发挥作用

```
var myChar:Character = Character(data); // cast it to a Character and it now knows the method
myChar.modStats() 
```

另一个调用不起作用的原因是您调用它的方式：

```
Character::modStats(...) 
```

这就是说在命名空间 Character 中寻找一个名为 modStats 的方法。而是调用这个

```
character.modStats() 
```

它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T08:01:18.063

先生，您是我的个人英雄：D，我刚刚尝试过，它显示了数据。

我更改了 Character.AS 中角色的构造函数，如下所示：

```
public function Character(obj:Object)
    {
        this._stats = new FinalStats();
        this._gear = new GearList();
    } 
```

我不完全确定这是否正确，但正如您在回答中提到的那样：

```
var myChar:Character = Character(data); 
```

我想我将不得不使用该数据对象来初始化 myChar ......我对吗？好吧，稍后当我有时间时，我会尝试添加新的视图和按钮来浏览视图并查看数据是否存在：D

# parsing - 树构造：将子树传播给子树

> ID：14244849
> 
> 赞同：3
> 
> 时间：2013-01-09T19:24:15.780
> 
> 标签：parsing, antlr, antlr3, abstract-syntax-tree

假设我有这个简单而无意义的语法：

```
propagate     :   what^ where*;
what          :   CHAR^;
where         :   NUMBER -> ^(PLUS NUMBER);

NUMBER        :   '0'..'9';
CHAR          :   'a'..'z';
PLUS          :   '+'; 
```

如果它解析一个类似 的字符串`a123456789`，它会生成一个类似的 AST： ![AST](../Images/7a4d1c77e48c05895da4601d5c5e5575.png)

我要做的是将解析的令牌传递`what`给`where`并创建一个AST（对于相同的输入），例如： ![AST2](../Images/a8fb75f9227b6de5561d8381110a117b.png)

我尝试了以下方式：

```
propagate       :   w=what^ where[$w.text]*;
what            :   CHAR^;
where[String s] :   NUMBER -> ^(PLUS CHAR[s] NUMBER);

NUMBER          :   '0'..'9';
CHAR            :   'a'..'z';
PLUS            :   '+'; 
```

如果`what`它是单个令牌，它可以工作，但如果它是一棵树呢？这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:43:39.363

就是这样：

```
grammar T;

options {
  output=AST;
  ASTLabelType=CommonTree;
}

parse
 : propagate EOF!
 ;

propagate
 : what^ where[$what.tree]*
 ;

what
 : CHAR
 ;

where[CommonTree lhs]
 : NUMBER -> ^(PLUS {new CommonTree($lhs)} NUMBER)
 ;

NUMBER : '0'..'9';
CHAR   : 'a'..'z';
PLUS   : '+'; 
```

ANTLRWorks 的调试器可能无法显示正确的 AST：自己创建一个小型驱动程序类：

```
import org.antlr.runtime.*;
import org.antlr.runtime.tree.*;
import org.antlr.stringtemplate.*;

public class Main {
  public static void main(String[] args) throws Exception {
    TLexer lexer = new TLexer(new ANTLRStringStream("a123"));
    TParser parser = new TParser(new CommonTokenStream(lexer));
    CommonTree tree = (CommonTree)parser.parse().getTree();  
    DOTTreeGenerator gen = new DOTTreeGenerator();
    StringTemplate st = gen.toDOT(tree);
    System.out.println(st);
  }
} 
```

要运行它，请执行以下操作：

```
java -cp antlr-3.3.jar org.antlr.Tool Tg
javac -cp antlr-3.3.jar *.java
java -cp .:antlr-3.3.jar Main > ast.dot
```

这将产生一个表示以下 AST 的 DOT 文件：

![在此处输入图像描述](../Images/f45885ae231be8a00267370e12965ab4.png)

# android - 在 Google 地图导航正在运行时请求位置更新

> ID：14244852
> 
> 赞同：0
> 
> 时间：2013-01-09T19:24:31.803
> 
> 标签：android, geolocation

我想仅使用 GPS 提供程序从 LocationManager 请求位置更新。我知道这样做不会立即返回位置结果。

但是，让我们假设用户当前正在运行 Google Maps Navigation 应用程序（即，有一条活动路线）并且他们的 GPS 信号很强。由于 GPS 位置不断被固定，请求 GPS 位置会很快产生结果吗？还是我做了一个无效的假设？

此外，如果我在导航应用程序运行时调用 getLastKnownLocation(LocationProvider)，我可以假设最后一个已知位置将非常接近当前位置吗？当导航应用程序主动导航时，最后一次已知位置的更新频率是多少？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:32:48.760

> 由于 GPS 位置不断被固定，请求 GPS 位置会很快产生结果吗？还是我做了一个无效的假设？
> 
> 此外，如果我在导航应用程序运行时打电话`getLastKnownLocation(LocationProvider)`，我可以假设最后一个已知位置将非常接近当前位置吗？

如果您有侦听 GPS 更新的服务，您将可以访问为任何应用程序返回的最新数据。我建议使用[`PASSIVE_PROVIDER`](http://developer.android.com/reference/android/location/LocationManager.html#PASSIVE_PROVIDER)which 将在任何提供商到达时接收更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:41:57.867

我在 30 秒内在我的 HTC Incredible 中获得了 GPS 修复，关于您的问题，我尝试打开导航应用程序和我的应用程序，如果我只运行我的应用程序，我看不出有任何区别。

由于 GPS 位置不断被固定，请求 GPS 位置会很快产生结果吗？GPS 会根据卫星产生快速修复。

# elasticsearch - Elasticsearch、Tire 和嵌套查询/与 mongoid 的关联

> ID：14244855
> 
> 赞同：3
> 
> 时间：2013-01-09T19:24:38.823
> 
> 标签：elasticsearch, tire

我正在使用 ElasticSearch 和 Tire 来索引和搜索 mongoid 模型，并且我一直在寻找索引和搜索嵌入式关联的“正确”方法。我为此模型设置了一个功能齐全的设置，但由于某种原因，我可以搜索除嵌入式模型（ResourceTag）中的字段之外的所有内容

## 删除了不必要的代码

```
class Resource
  include Mongoid::Document
  include Tire::Model::Search
  include Tire::Model::Callbacks
  include Mongoid::Timestamps

  embeds_many :tags, :class_name => "ResourceTag"

  accepts_nested_attributes_for :tags, :allow_destroy => true

  # Tire
  mapping do
    indexes :_id
    indexes :version,             analyzer: 'snowball', boost: 100
    indexes :created_at,          type: 'date', index: :not_analyzed
    indexes :updated_at,          type: 'date', index: :not_analyzed    
    indexes :assignment do
      indexes :_id
      indexes :name,                analyzer: 'snowball', boost: 100
      indexes :current_state,                analyzer: 'snowball', boost: 100
    do
    indexes :resource_files do
      indexes :_id
      indexes :name,                analyzer: 'snowball', boost: 100
    end
    indexes :tags do
      indexes :_id
      indexes :name,                analyzer: 'snowball', boost: 100
    end
  end

  def to_indexed_json
    self.to_json(
      :include => {
        :assignment => {
          :methods => :formatted_current_state
        }, 
        :resource_files => {
          :methods => [:is_video, :is_image]
        },
        :tags => nil
      }
    )
  end
end

class ResourceTag
  include Mongoid::Document

  # Attributes
  attr_accessible :name

  # Fields
  field :name, :type => String

  # Validations
  validates_presence_of :name
  validates_uniqueness_of :name, :case_sensitive => false

  # Relations
  embedded_in :resource

 end 
```

我不太确定我的代码有什么问题，但我确定我以前可以正常工作，现在它搞砸了：s

我正在寻找一个带有 mongoid 和嵌入式文档的轮胎示例，但没有运气，而且我已经没有想法了。

感谢您的任何想法和贡献。

# python - MySQLdb 安装错误 - _mysql.c:44:23: error: my_config.h: No such file or directory

> ID：14244866
> 
> 赞同：24
> 
> 时间：2013-01-09T19:25:23.620
> 
> 标签：python, django, mysql-python

我正在尝试安装 MySQLdb 扩展，但我得到这个错误知道可能是什么原因吗？可能是有权限的东西？我正在使用 Mac OX Lion....

这是错误的一部分。Django 安装得很好，但我需要安装这个扩展。谢谢你的帮助。

```
ppp-071ca:MySQL-python-1.2.4b4 miguel_e$ sudo python setup.py install
running install
running bdist_egg
running egg_info
writing MySQL_python.egg-info/PKG-INFO
writing top-level names to MySQL_python.egg-info/top_level.txt
writing dependency_links to MySQL_python.egg-info/dependency_links.txt
writing MySQL_python.egg-info/PKG-INFO
writing top-level names to MySQL_python.egg-info/top_level.txt
writing dependency_links to MySQL_python.egg-info/dependency_links.txt
reading manifest file 'MySQL_python.egg-info/SOURCES.txt'
reading manifest template 'MANIFEST.in'
writing manifest file 'MySQL_python.egg-info/SOURCES.txt'
installing library code to build/bdist.macosx-10.7-intel/egg
running install_lib
running build_py
copying MySQLdb/release.py -> build/lib.macosx-10.7-intel-2.7/MySQLdb
running build_ext
building '_mysql' extension
llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-       
strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-  
prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -
DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -Dversion_info=(1,2,4,'beta',4) -
D__version__=1.2.4b4 -I/Applications/MAMP/Library/include -
I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c _mysql.c -o 
build/temp.macosx-10.7-intel-2.7/_mysql.o -fno-omit-frame-pointer -g
_mysql.c:44:23: error: my_config.h: No such file or directory
_mysql.c:46:19: error: mysql.h: No such file or directory
_mysql.c:47:26: error: mysqld_error.h: No such file or directory
_mysql.c:48:20: error: errmsg.h: No such file or directory
_mysql.c:88: error: expected specifier-qualifier-list before ‘MYSQL’
_mysql.c:102: error: expected specifier-qualifier-list before ‘MYSQL_RES’
_mysql.c: In function ‘_mysql_Exception’:
_mysql.c:146: warning: implicit declaration of function ‘mysql_errno’
_mysql.c:146: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:149: error: ‘CR_MAX_ERROR’ undeclared (first use in this function)
_mysql.c:149: error: (Each undeclared identifier is reported only once
_mysql.c:149: error: for each function it appears in.)
_mysql.c:161: error: ‘CR_COMMANDS_OUT_OF_SYNC’ undeclared (first use in this function)
_mysql.c:162: error: ‘ER_DB_CREATE_EXISTS’ undeclared (first use in this function)
_mysql.c:163: error: ‘ER_SYNTAX_ERROR’ undeclared (first use in this function)
_mysql.c:164: error: ‘ER_PARSE_ERROR’ undeclared (first use in this function)
_mysql.c:165: error: ‘ER_NO_SUCH_TABLE’ undeclared (first use in this function)
_mysql.c:166: error: ‘ER_WRONG_DB_NAME’ undeclared (first use in this function)
_mysql.c:167: error: ‘ER_WRONG_TABLE_NAME’ undeclared (first use in this function)
_mysql.c:168: error: ‘ER_FIELD_SPECIFIED_TWICE’ undeclared (first use in this function)
_mysql.c:169: error: ‘ER_INVALID_GROUP_FUNC_USE’ undeclared (first use in this function)
_mysql.c:170: error: ‘ER_UNSUPPORTED_EXTENSION’ undeclared (first use in this function)
_mysql.c:171: error: ‘ER_TABLE_MUST_HAVE_COLUMNS’ undeclared (first use in this function)
_mysql.c:200: error: ‘ER_DUP_ENTRY’ undeclared (first use in this function)
_mysql.c:246: warning: implicit declaration of function ‘mysql_error’
_mysql.c:246: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:246: warning: passing argument 1 of ‘PyString_FromString’ makes pointer from    
integer without a cast
_mysql.c: In function ‘_mysql_server_init’:
_mysql.c:351: warning: label ‘finish’ defined but not used
_mysql.c:268: warning: unused variable ‘item’
_mysql.c:267: warning: unused variable ‘groupc’
_mysql.c:267: warning: unused variable ‘i’
_mysql.c:267: warning: unused variable ‘cmd_argc’
_mysql.c:266: warning: unused variable ‘s’
_mysql.c: In function ‘_mysql_ResultObject_Initialize’:
_mysql.c:406: error: ‘MYSQL_RES’ undeclared (first use in this function)
_mysql.c:406: error: ‘result’ undeclared (first use in this function)
_mysql.c:411: error: ‘MYSQL_FIELD’ undeclared (first use in this function)
_mysql.c:411: error: ‘fields’ undeclared (first use in this function)
_mysql.c:425: error: ‘_mysql_ResultObject’ has no member named ‘use’
_mysql.c:428: warning: implicit declaration of function ‘mysql_use_result’
_mysql.c:428: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:430: warning: implicit declaration of function ‘mysql_store_result’
_mysql.c:430: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:431: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:434: warning: implicit declaration of function ‘mysql_field_count’
_mysql.c:434: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:438: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:442: warning: implicit declaration of function ‘mysql_num_fields’
_mysql.c:443: error: ‘_mysql_ResultObject’ has no member named ‘nfields’
_mysql.c:444: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:448: warning: implicit declaration of function ‘mysql_fetch_fields’
_mysql.c:488: error: ‘BINARY_FLAG’ undeclared (first use in this function)
_mysql.c:509: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c: In function ‘_mysql_ResultObject_traverse’:
_mysql.c:523: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:524: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c: In function ‘_mysql_ResultObject_clear’:
_mysql.c:535: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:535: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:535: error: ‘_mysql_ResultObject’ has no member named ‘converger’  
_mysql.c:535: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:536: error: ‘_mysql_ResultObject’ has no member named ‘converger’ 
_mysql.c: In function ‘_mysql_ConnectionObject_Initialize’:
_mysql.c:548: error: ‘MYSQL’ undeclared (first use in this function)
_mysql.c:548: error: ‘conn’ undeclared (first use in this function)
_mysql.c:579: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:580: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:602: error: expected expression before ‘)’ token
_mysql.c:631: warning: implicit declaration of function ‘mysql_init’
_mysql.c:631: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:634: warning: implicit declaration of function ‘mysql_options’
_mysql.c:634: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:634: error: ‘MYSQL_OPT_CONNECT_TIMEOUT’ undeclared (first use in this function)
_mysql.c:645: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:645: error: ‘MYSQL_OPT_COMPRESS’ undeclared (first use in this function)
_mysql.c:646: error: ‘CLIENT_COMPRESS’ undeclared (first use in this function)
_mysql.c:649: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:649: error: ‘MYSQL_OPT_NAMED_PIPE’ undeclared (first use in this function)
_mysql.c:651: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:651: error: ‘MYSQL_INIT_COMMAND’ undeclared (first use in this function)
_mysql.c:653: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:653: error: ‘MYSQL_READ_DEFAULT_FILE’ undeclared (first use in this function)
_mysql.c:655: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:655: error: ‘MYSQL_READ_DEFAULT_GROUP’ undeclared (first use in this function)
_mysql.c:658: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’  
_mysql.c:658: error: ‘MYSQL_OPT_LOCAL_INFILE’ undeclared (first use in this function)
_mysql.c:666: warning: implicit declaration of function ‘mysql_real_connect’
_mysql.c:666: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:684: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:692: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c: In function ‘_mysql_ConnectionObject_traverse’:
_mysql.c:773: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:774: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c: In function ‘_mysql_ConnectionObject_clear’:
_mysql.c:782: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:782: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:782: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:782: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:783: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c: In function ‘_mysql_ConnectionObject_close’:
_mysql.c:798: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:800: warning: implicit declaration of function ‘mysql_close’
_mysql.c:800: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:802: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c: In function ‘_mysql_ConnectionObject_affected_rows’:
_mysql.c:824: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:825: warning: implicit declaration of function ‘mysql_affected_rows’
_mysql.c:825: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_debug’:
_mysql.c:841: warning: implicit declaration of function ‘mysql_debug’
_mysql.c: In function ‘_mysql_ConnectionObject_dump_debug_info’:
_mysql.c:859: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:861: warning: implicit declaration of function ‘mysql_dump_debug_info’
_mysql.c:861: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_autocommit’:
_mysql.c:885: warning: implicit declaration of function ‘mysql_query’
_mysql.c:885: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_commit’:
_mysql.c:908: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_rollback’:
_mysql.c:930: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_errno’:
_mysql.c:1046: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1047: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_error’:
_mysql.c:1062: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1066: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:1066: warning: passing argument 1 of ‘PyString_FromString’ makes pointer from  
integer without a cast
_mysql.c: In function ‘_mysql_escape_string’:
_mysql.c:1099: warning: implicit declaration of function ‘mysql_escape_string’
_mysql.c: In function ‘_mysql_escape’:
_mysql.c:1226: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c: In function ‘_mysql_ResultObject_describe’:
_mysql.c:1306: error: ‘MYSQL_FIELD’ undeclared (first use in this function)
_mysql.c:1306: error: ‘fields’ undeclared (first use in this function)
_mysql.c:1309: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1310: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1311: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1322: warning: implicit declaration of function ‘IS_NOT_NULL’
_mysql.c: In function ‘_mysql_ResultObject_field_flags’:
_mysql.c:1342: error: ‘MYSQL_FIELD’ undeclared (first use in this function)
_mysql.c:1342: error: ‘fields’ undeclared (first use in this function)
_mysql.c:1345: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1346: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1347: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c: At top level:
_mysql.c:1393: error: expected declaration specifiers or ‘...’ before ‘MYSQL_ROW’
_mysql.c: In function ‘_mysql_row_to_tuple’:
_mysql.c:1399: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1401: warning: implicit declaration of function ‘mysql_fetch_lengths’
_mysql.c:1401: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1401: warning: assignment makes pointer from integer without a cast
_mysql.c:1404: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:1405: error: ‘row’ undeclared (first use in this function)
_mysql.c: At top level:
_mysql.c:1418: error: expected declaration specifiers or ‘...’ before ‘MYSQL_ROW’
_mysql.c: In function ‘_mysql_row_to_dict’:
_mysql.c:1423: error: ‘MYSQL_FIELD’ undeclared (first use in this function)
_mysql.c:1423: error: ‘fields’ undeclared (first use in this function)
_mysql.c:1425: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1427: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1427: warning: assignment makes pointer from integer without a cast
_mysql.c:1428: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1431: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:1432: error: ‘row’ undeclared (first use in this function)
_mysql.c: At top level:
_mysql.c:1457: error: expected declaration specifiers or ‘...’ before ‘MYSQL_ROW’
_mysql.c: In function ‘_mysql_row_to_dict_old’:
_mysql.c:1462: error: ‘MYSQL_FIELD’ undeclared (first use in this function)
_mysql.c:1462: error: ‘fields’ undeclared (first use in this function)
_mysql.c:1464: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1466: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1466: warning: assignment makes pointer from integer without a cast
_mysql.c:1467: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1470: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:1471: error: ‘row’ undeclared (first use in this function)
_mysql.c: At top level:
_mysql.c:1493: error: expected declaration specifiers or ‘...’ before ‘MYSQL_ROW’
_mysql.c: In function ‘_mysql__fetch_row’:
_mysql.c:1504: error: ‘MYSQL_ROW’ undeclared (first use in this function)
_mysql.c:1504: error: expected ‘;’ before ‘row’
_mysql.c:1508: error: ‘_mysql_ResultObject’ has no member named ‘use’
_mysql.c:1509: error: ‘row’ undeclared (first use in this function)
_mysql.c:1509: warning: implicit declaration of function ‘mysql_fetch_row’
_mysql.c:1509: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1512: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c:1515: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:1523: error: too many arguments to function ‘convert_row’
_mysql.c: In function ‘_mysql_ResultObject_fetch_row’:
_mysql.c:1547: error: expected declaration specifiers or ‘...’ before ‘MYSQL_ROW’
_mysql.c:1562: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1574: error: ‘_mysql_ResultObject’ has no member named ‘use’
_mysql.c:1588: warning: implicit declaration of function ‘mysql_num_rows’
_mysql.c:1588: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c: In function ‘_mysql_ConnectionObject_character_set_name’:
_mysql.c:1655: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c: In function ‘_mysql_get_client_info’:
_mysql.c:1766: warning: implicit declaration of function ‘mysql_get_client_info’
_mysql.c:1766: warning: passing argument 1 of ‘PyString_FromString’ makes pointer from 
integer without a cast
_mysql.c: In function ‘_mysql_ConnectionObject_get_host_info’:
_mysql.c:1781: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1785: warning: implicit declaration of function ‘mysql_get_host_info’
_mysql.c:1785: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:1785: warning: passing argument 1 of ‘PyString_FromString’ makes pointer from 
integer without a cast
_mysql.c: In function ‘_mysql_ConnectionObject_get_proto_info’:
_mysql.c:1800: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1801: warning: implicit declaration of function ‘mysql_get_proto_info’
_mysql.c:1801: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_get_server_info’:
_mysql.c:1815: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1819: warning: implicit declaration of function ‘mysql_get_server_info’
_mysql.c:1819: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:1819: warning: passing argument 1 of ‘PyString_FromString’ makes pointer from 
integer without a cast
_mysql.c: In function ‘_mysql_ConnectionObject_info’:
_mysql.c:1836: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1837: warning: implicit declaration of function ‘mysql_info’
_mysql.c:1837: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:1837: warning: assignment makes pointer from integer without a cast
_mysql.c: In function ‘_mysql_ConnectionObject_insert_id’:
_mysql.c:1873: error: ‘my_ulonglong’ undeclared (first use in this function)
_mysql.c:1873: error: expected ‘;’ before ‘r’
_mysql.c:1875: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1877: error: ‘r’ undeclared (first use in this function)
_mysql.c:1877: warning: implicit declaration of function ‘mysql_insert_id’
_mysql.c:1877: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_kill’:
_mysql.c:1894: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1896: warning: implicit declaration of function ‘mysql_kill’
_mysql.c:1896: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_field_count’:
_mysql.c:1915: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1917: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ResultObject_num_fields’:
_mysql.c:1932: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1933: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c: In function ‘_mysql_ResultObject_num_rows’:
_mysql.c:1948: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1949: error: ‘_mysql_ResultObject’ has no member named ‘result’
_mysql.c: In function ‘_mysql_ConnectionObject_ping’:
_mysql.c:1978: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:1979: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:1981: warning: implicit declaration of function ‘mysql_ping’
_mysql.c:1981: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_query’:
_mysql.c:2002: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:2004: warning: implicit declaration of function ‘mysql_real_query’
_mysql.c:2004: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_select_db’:
_mysql.c:2032: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:2034: warning: implicit declaration of function ‘mysql_select_db’
_mysql.c:2034: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_shutdown’:
_mysql.c:2053: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:2055: warning: implicit declaration of function ‘mysql_shutdown’
_mysql.c:2055: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c: In function ‘_mysql_ConnectionObject_stat’:
_mysql.c:2080: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:2082: warning: implicit declaration of function ‘mysql_stat’
_mysql.c:2082: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’  
...
...  
_mysql.c: At top level:
_mysql.c:2519: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
_mysql.c:2526: error: ‘_mysql_ConnectionObject’ has no member named ‘converter’
_mysql.c:2533: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:2540: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:2547: error: ‘_mysql_ConnectionObject’ has no member named ‘connection’
_mysql.c:2610: error: ‘_mysql_ResultObject’ has no member named ‘converter’
_mysql.c:2610: error: initializer element is not constant
_mysql.c:2610: error: (near initialization for ‘_mysql_ResultObject_memberlist[0].offset’)
_mysql.c: In function ‘_mysql_ConnectionObject_getattr’:
_mysql.c:2634: error: ‘_mysql_ConnectionObject’ has no member named ‘open’
lipo: can't open input file: /var/tmp//ccVstRBM.out (No such file or director y)  
error: command 'llvm-gcc-4.2' failed with exit status 1 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2020-04-22T01:23:26.083

您可以手动将头文件添加到 mysql 包含目录（从 gi​​thub repo 下载）：

```
sudo wget https://raw.githubusercontent.com/paulfitz/mysql-connector-c/master/include/my_config.h -O /usr/include/mysql/my_config.h 
```

重试 pip 安装

```
sudo pip install MySQL-python 
```

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2014-11-21T09:32:09.253

如果 ubuntu :`apt-get install mysql-devel` 如果 centos/rhel :`yum install mysql-devel` 然后安装 MySQL-python

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2020-03-24T09:46:30.933

如发现[here，](https://cnasolution.com/questions/28560/ubuntu-19-10-when-installing-mysql-python-i-get-the-error-my-config-h-no-such-file-or-directory)您需要将[my_config.h](https://raw.githubusercontent.com/paulfitz/mysql-connector-c/master/include/my_config.h)复制到`/usr/include/mysql`，然后`pip install MySQL-python`。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-09T19:30:49.243

通常当你遇到这些类型的错误时，你缺少开发包——你需要安装头文件，因为它们没有随 mysqldb 一起提供。

我个人没有在苹果上做过这个，但这里有一个链接到他们关于如何去做这样的事情的文章。

[http://support.apple.com/kb/ht4006](http://support.apple.com/kb/ht4006)

安装源代码后，mysqldb 应该能够毫无问题地编译和安装。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-17T13:04:26.783

我刚遇到这个问题。我尝试使用

> VCForPython27.msi

解决它。但它不起作用..

我在[Github 中找到了答案： PyMySQL/mysqlclient-python](https://github.com/PyMySQL/mysqlclient-python)，

> 注意：Windows 的 Wheels 可能不会与源包一起发布。您应该在 requirements.txt 中固定版本以避免尝试安装最新的源包。

所以，答案是：**分配 mysqlclient 的版本**，使用 pip install mysqlclient==1.xx insdead 的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-03T15:50:59.403

我有一个类似的问题并修复它：

```
brew install mysql-client
echo 'export PATH="/usr/local/opt/mysql-client/bin:$PATH"' >> ~/.bash_profile
source ~/.bash_profile
pip install MySQL-python 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-07-05T07:26:18.907

请检查这些：

1)`libmysqlclient-dev`已安装

2)`my_config.h`在`/usr/include/mysql`

如果不存在，请在此处找到：

> https://dev.mysql.com/doc/dev/mysql-server/8.0.11/my__config_8h_source.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-17T14:45:10.917

[使用来自https://packages.debian.org/buster/python-mysqldb](https://packages.debian.org/buster/python-mysqldb)的 deb 包安装

依赖项`apt install libmariadb3 mariadb-common`适用于上述包。

# blackberry - 等待 BlackBerry App World 供应商注册的时间

> ID：14244871
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:25:39.610
> 
> 标签：blackberry, vendor

我在 BlackBerry App World 上注册为供应商。我收到了一封邮件，该邮件告诉我，我必须将另一封邮件发送到另一个带有国民身份证件的地址。我是 24 小时前发送的。我仍然没有答案。

需要多少时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T14:53:08.730

**BlackBerry App World**注册的典型等待时间**不到 48 小时。**这可能需要一周左右的时间，但这取决于他们的忙碌程度或您的应用程序的准确性。

特别是黑莓状态：

> 提交文件后，**请等待 24-48 小时** 处理。您将收到一封来自 BlackBerry App World 的电子邮件，确认您的供应商帐户已获批准。

# javascript - 从 jQuery 变量中的 ul li 中选择值

> ID：14244873
> 
> 赞同：0
> 
> 时间：2013-01-09T19:25:42.847
> 
> 标签：javascript, jquery, html

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:27:33.033

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T19:27:40.070

您可以使用[`.map()`](http://api.jquery.com/map/)：

```
var values = $("a[href='#']", $data).map(function() {
    return this.innerHTML;
}).get(); 
```

**演示：http:** [//jsfiddle.net/Vp7tN/](http://jsfiddle.net/Vp7tN/)

# actionscript-3 - ADDED_TO_STAGE 事件似乎不像我想的那样工作

> ID：14244874
> 
> 赞同：0
> 
> 时间：2013-01-09T19:25:46.183
> 
> 标签：actionscript-3

在 CPU 饥饿功能启动之前，我需要为用户显示一条消息。我在 ADDED_TO_STAGE 事件被触发后启动该函数，但有一半的时间，消息框没有足够的时间在该繁重的函数启动时显示。有没有其他方法可以确保在繁重的功能开始处理之前显示消息框？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:29:20.490

在弹出窗口后的下一帧启动重功能，为此使用 Event.ENTER_FRAME 事件。AVM 在帧的开头执行 as3 代码并在最后渲染图形，因此显示窗口的代码已执行，但图形仅在执行繁重的功能后才呈现，例如：

```
protected function init():void
{
    showPopup();
    addEventListener(Event.ENTER_FRAME, onEnterFrame);
}

private function onEnterFrame(event:Event):void
{
    removeEventListener(event.type, arguments.callee);
    startHeavyFunction()
} 
```

# jmeter - 如何使用 jmeter 的“保存对文件的响应”节点写入 jmeter 测试的父目录

> ID：14244877
> 
> 赞同：1
> 
> 时间：2013-01-09T19:25:48.197
> 
> 标签：jmeter

赫罗，

我知道如果您在文件名前缀中使用“~/”，那么您将到达 jmeter 测试的位置。我想要的是将文件写入测试文件的父目录。有没有办法做到这一点。基本上目标是让测试能够动态地将文件写入测试文件的父目录（无论它发生在哪里）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:44:26.277

弄清楚了。你使用 '..' 去一个目录（duh）所以如果你想命名你的文件tendervittles并将它放在测试文件的父目录中，它会是

~/../tendervittles

# javascript - jPages 插件和 IE8 不显示内容

> ID：14244885
> 
> 赞同：1
> 
> 时间：2013-01-09T19:26:15.783
> 
> 标签：javascript, jquery, jquery-plugins, internet-explorer-8, jpage

我在使用这个插件时遇到了一些问题，我想知道之前是否有人遇到过这个问题以及如何解决的一些提示/帮助。

我有一个使用 jPages jQuery 插件的页面。[http://luis-almeida.github.com/jPages/](http://luis-almeida.github.com/jPages/)

在所有浏览器（Safari、IE9、Firefox、Chrome、..）中一切正常，但在 IE8 中仅显示分页的第一项而不显示其他项。

如果我禁用插件，IE8 会显示所有内容。如果我尝试分页，只显示第一项。

我正在使用插件的默认配置。

以前有人有这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T15:26:27.050

在 ie8/ie7 中也有这个问题。通过将当前项目的不透明度设置为 1 的回调函数修复。根据容器的结构（我在此示例中使用 a），您可能需要更改 jQuery 行 var onFocus = $("#coverflow_section li:eq(" + (i) + ")");.

```
$("div.pagination").jPages({
    containerID : "coverflow_section",
    callback    : ieFix,

});

function ieFix(pages, items)
{
    for(i = items.range.start - 1; i < items.range.end; i++)
    {               
        var onFocus = $("#coverflow_section li:eq(" + (i) + ")");
        onFocus.css({'opacity':1});
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T13:34:46.077

IE8 似乎也有 eq() 的问题。我已经解决了这个回调的问题：

```
$("div.pagination").jPages({
    containerID : "coverflow_section",
    callback    : ieFix,
});

function ieFix(pages, items)
{
    for(i = items.range.start; i <= items.range.end; i++)
    {               
        var onFocus = $("#coverflow_section li:nth-child("+i+")");
        onFocus.css({'opacity':1});
    }
} 
```

# excel - 使用 EditMode 线导出 Telerik RadGrid

> ID：14244887
> 
> 赞同：0
> 
> 时间：2013-01-09T19:26:27.577
> 
> 标签：excel, telerik, export, telerik-grid, radgrid

我需要导出一个 RadGrid 表，它包含几个 EditMode 行。我想选择要导出的内容，或者如果可能的话，最好将这些行更改为

```
EditMode = false 
```

在导出之前，所以它看起来是我需要的。

* * *

代码详细信息：我有几个 GridTemplateColumn，这里是其中之一：

```
<telerik:GridTemplateColumn
     ItemStyle-Wrap="false" UniqueName="DataInicioAtividade"
     DataField="DataInicioAtividade" HeaderText="*Data Inicio">
    <ItemTemplate>
        <telerik:RadDatePicker runat="server" ID="data_inicio" MinDate="1900/1/1">
            <DateInput runat="server"
                       CssClass="date-picker" ID="rad_dateInput_data_inicio"
                       MaxLength="10" CausesValidation="true" />
        </telerik:RadDatePicker>
    </ItemTemplate>
</telerik:GridTemplateColumn> 
```

还有一个简单地执行代码的按钮：

```
rgd_grid_naoiniciada.ExportExcel(); 
```

问题是，看起来，telerik RadGrid 导出只是将结果表的 HTML 代码转储到 Excel 文件中。组件的行为就像它应该的那样，但生成的文件应该有字段值，而不是包含输入字段、链接、RadCalendar 图像等的 HTML 代码......

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:29:57.227

导出时将 Templatecolumn 值设置为 Template 列的 text 属性，然后给 ExportOnlyData="true";

这现在也适用于模板列。

在 ItemBoundEvent 中，给出以下代码。

```
protected void RadGrid1_ItemDataBound(object sender, GridItemEventArgs e)
{
 if ((isExport) && (e.Item is GridDataItem))
 {
   GridDataItem item = e.Item as GridDataItem;
    item["DataInicioAtividade"].Text = ((RadDatePicker)item["DataInicioAtividade"].FindControl("data_inicio")).SelectedDate.ToString();               
 }
} 
```

# git - 删除虚假提交父指针

> ID：14244888
> 
> 赞同：16
> 
> 时间：2013-01-09T19:26:33.190
> 
> 标签：git, merge, git-rebase

我将 Bazaar 存储库导入 Git（使用`git bzr`），但生成的存储库包含一个虚假的提交父链接：

![虚假父链接](../Images/8d6f052cbe6ecd2bc52250381279e8a6.png)

请注意，标记的提交`1.02-6`基于`1.02-3`提交，但`1.02-1`也不必要地标记为父级。（注意：这部分 repo 中的所有提交都被标记；显示的提交之间没有提交。）

我尝试过以多种方式（在`master`分支上：`git rebase 1.02-3`, `git rebase -i upstream-1.02`, `git rebase --onto 1.02-1 1.02-3`, `git rebase --root upstream-1.02 --onto=other_branch`）进行变基，但在每种情况下，它都会因合并冲突而失败。这些似乎超出了必要的尝试；历史是正确的，*除了*一个额外的父指针被记录在提交标记`1.02-6`中。

您如何删除链接以使历史线性化？有没有比手动按顺序挑选所有提交更好的方法？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2016-05-03T10:14:42.263

最简单的方法（在 git >= 1.6.5 中）是使用：

```
git replace --edit <sha> 
```

并删除/添加/更改 Parent: 行。

一旦您对更改正确感到满意，您就可以重写提交以使更改永久化：

```
git filter-branch --tag-name-filter cat -- --all 
```

在某些情况下，只重写所涉及的提交而不是完整的历史记录会明显更快（感谢[Michael](https://stackoverflow.com/users/222748/michael)在评论中提到这一点）；例如仅重写当前分支上的提交：

```
git filter-branch --tag-name-filter cat -- <new parent sha>..head 
```

如果您不确定，请使用`--all`，否则您可能会遇到仍然引用临时替换对象的其他分支/标签。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-11T23:26:38.497

您可以使用[`git commit-tree`](http://git-scm.com/docs/git-commit-tree)内部命令手动执行此操作。

我们要编辑标记的提交`1.02-6`以删除虚假的父指针 (to `56a2f3b5948ab54c9239c2b384a6ea9eb1f410c4`)。

首先，从现有的提交对象中读取信息：

```
user@host:/path/repo.git$ git cat-file -p 1.02-6 
tree c658aa1ebcf2bf2a607696c7868b875be72fb01f
parent 56a2f3b5948ab54c9239c2b384a6ea9eb1f410c4
parent 4e671bf1d2298729c9e5cfd8229051cfe2c40831
author James Damour (Suvarov454) <suvarov454@users.sourceforge.net> 1146319620 -0400
committer Bazaar Package Importer <james.westby@ubuntu.com> 1146319620 -0400

The "main/" in the Section line of debian/control should be assumed. 
```

[使用 提取提交消息`git log --format=%B -n 1 1.02-6`。](https://stackoverflow.com/questions/3357280/print-commit-message-of-a-given-commit-in-git)

现在创建一个具有相同内容的新提交（不包括虚假的父链接和提交者信息）：

```
git log --format=%B -n 1 1.02-6 | \
    GIT_AUTHOR_NAME="James Damour (Suvarov454)" \
    GIT_AUTHOR_EMAIL="suvarov454@users.sourceforge.net" \
    GIT_AUTHOR_DATE="1146319620 -0400" \
    git commit-tree c658aa1ebcf2bf2a607696c7868b875be72fb01f \
        -p 4e671bf1d2298729c9e5cfd8229051cfe2c40831 
```

这创建了一个新的提交，并打印了它的哈希（`cc32e66`...）。现在把它变成一个新的分支：

```
git checkout -b fixed_commit cc32e66 
```

并重新定位`master`到新分支：

```
git checkout master
git rebase fixed_commit 
```

我们完成了：

![完成的](../Images/762eb21c55c56d05efbb3716133d7aca.png)

您可能想要删除旧分支并重新标记适当的提交。

* * *

实际上它可能更容易使用[`git filter-branch --parent-filter`](http://www.git-scm.com/docs/git-filter-branch)。我没试过。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-29T01:55:23.277

这将在不更改任何其他内容的情况下纠正父母（例如提交者日期）：

`git filter-branch --tag-name-filter cat --parent-filter 'test $GIT_COMMIT = [sha of 1.02-6] && echo "-p [sha of 1.02-3]" || cat' -- 1.02-1..master`

您必须用适当的提交 ID 替换括号中的文本。如果您有更多的下游分支需要重写，请更改`1.02-1..master`并`--all`准备等待。

当然，如果其他人从您要编辑的提交之后的任何提交分支，请不要使用此解决方案或任何其他解决方案。他们会恨你的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T20:06:30.787

你可以试试[rebase](http://www.kernel.org/pub/software/scm/git/docs/git-rebase.html)。有一个示例（搜索--onto）我认为与您的情况类似。

我*认为*你需要做

```
git rebase --onto 1.02-1 1.02-3 
```

这应该将 1.02-3 之后的所有内容放到 1.02-1 上，这可能就是您想要的。

请记住，与第一次更改的提交相比，所有内容的哈希值都会有所不同，但我假设您这样做是从 bzr 迁移的第一步，因此没有其他人应该克隆它。

# jboss - JBossMQ 消息重发 + DLQ

> ID：14244891
> 
> 赞同：1
> 
> 时间：2013-01-09T19:26:48.393
> 
> 标签：jboss, jboss-4.2.x, jbossmq

我正在尝试使用 JMS 和 JBoss 4.2.2 的一些场景，但我遇到的问题很少。

我有一个队列

```
<mbean code="org.jboss.mq.server.jmx.Queue" name="jboss.mq.destination:service=Queue,name=notificationQueue">
  <attribute name="JNDIName">jms.queue.testQueue</attribute>
  <depends optional-attribute-name="DestinationManager">jboss.mq:service=DestinationManager</depends>
  <depends optional-attribute-name="SecurityManager">jboss.mq:service=SecurityManager</depends>
  <attribute name="SecurityConf">
    <security>
      <role name="testUser" read="true" write="true" />
    </security>
  </attribute>
</mbean> 
```

和

```
<invoker-proxy-binding>
  <name>message-driven-bean</name>
  <invoker-mbean>default</invoker-mbean>
  <proxy-factory>org.jboss.ejb.plugins.jms.JMSContainerInvoker</proxy-factory>
  <proxy-factory-config>
    <JMSProviderAdapterJNDI>DefaultJMSProvider</JMSProviderAdapterJNDI>
    <ServerSessionPoolFactoryJNDI>StdJMSPool</ServerSessionPoolFactoryJNDI>
    <CreateJBossMQDestination>true</CreateJBossMQDestination>
    <MinimumSize>1</MinimumSize>
    <MaximumSize>15</MaximumSize>
    <MaxMessages>16</MaxMessages>
    <MDBConfig>
      <ReconnectIntervalSec>10</ReconnectIntervalSec>
      <DLQConfig>
        <DestinationQueue>queue/DLQ</DestinationQueue>
        <MaxTimesRedelivered>3</MaxTimesRedelivered>
        <TimeToLive>0</TimeToLive>
        <DLQUser>jbossmquser</DLQUser>
        <DLQPassword>letmein</DLQPassword>
      </DLQConfig>
    </MDBConfig>
  </proxy-factory-config>
</invoker-proxy-binding> 
```

为了测试重新发送，我写了 MessageListener

```
import java.util.*;
import javax.jms.*;
import javax.naming.*;

public class NotifyQueueMessageListener {

    public static void main(String[] args) throws NamingException, JMSException {
        Hashtable<String, String> contextProperties = new Hashtable<String, String>();
        contextProperties.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
        contextProperties.put(Context.PROVIDER_URL, "jnp://localhost:7099");

        InitialContext initContext = new InitialContext(contextProperties);

        Queue queue = (Queue) initContext.lookup("jms.queue.testQueue");
        QueueConnection queueConnection = null;
        try {
            QueueConnectionFactory connFactory = (QueueConnectionFactory) initContext.lookup("ConnectionFactory");
            queueConnection = connFactory.createQueueConnection("jbossmquser", "letmein");
            Session queueSession = queueConnection.createSession(false, Session.CLIENT_ACKNOWLEDGE);
            queueConnection.setExceptionListener(new MyExceptionListener());
            MessageConsumer consumer = queueSession.createConsumer(queue);
            MyMessageListener messageListener = new MyMessageListener();
            consumer.setMessageListener(messageListener);
            queueConnection.start();

            Object o = new Object();
            synchronized (o) {
                o.wait();
            }
        } catch (InterruptedException e) {
            Thread.currentThread().interrupt();
        } finally {
            System.out.println("closing connection");
            if (queueConnection != null) {
                queueConnection.close();
            }
        }
    }

    static class MyMessageListener implements MessageListener {

        @Override
        public void onMessage(Message message) {
            if (message instanceof ObjectMessage) {
                ObjectMessage om = (ObjectMessage) message;
                try {
                    System.out.printf("MyMessageListener.onMessage( %s ), %s\n\n", om, om.getObject());
                    boolean throwException = om.getBooleanProperty("throw");
                    if (throwException) {
                        System.out.println("throwing exception");
                        throw new NullPointerException("just for testing");
                    }
                    message.acknowledge();
                } catch (JMSException jmse) {
                    jmse.printStackTrace();
                }
            }
        }

    }

    static class MyExceptionListener implements ExceptionListener {

        @Override
        public void onException(JMSException jmse) {
            jmse.printStackTrace();
        }

    }

} 
```

和消息发送者

```
import java.text.*;
import java.util.*;
import javax.jms.*;
import javax.naming.*;

public class MessageSender {

    public static void main(String[] args) throws NamingException, JMSException {
        Hashtable<String, String> contextProperties = new Hashtable<String, String>();
        contextProperties.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
        contextProperties.put(Context.PROVIDER_URL, "jnp://localhost:7099");

        InitialContext initContext = new InitialContext(contextProperties);

        Queue queue = (Queue) initContext.lookup("notificationQueue");

        QueueConnection queueConnection = null;
        try {
            QueueConnectionFactory connFactory = (QueueConnectionFactory) initContext.lookup("ConnectionFactory");
            queueConnection = connFactory.createQueueConnection("jbossmquser", "letmein");
            // QueueSession queueSession = queueConnection.createQueueSession(false, Session.AUTO_ACKNOWLEDGE);
            // QueueSession queueSession = queueConnection.createQueueSession(true, Session.SESSION_TRANSACTED);
            QueueSession queueSession = queueConnection.createQueueSession(false, Session.CLIENT_ACKNOWLEDGE);
            // QueueSession queueSession = queueConnection.createQueueSession(false, Session.DUPS_OK_ACKNOWLEDGE);

            QueueSender sender = queueSession.createSender(queue);
            ObjectMessage message = queueSession.createObjectMessage();
            message.setBooleanProperty("throw", true); // to throw exception in listener
            message.setJMSDeliveryMode(DeliveryMode.NON_PERSISTENT);
            message.setIntProperty("JMS_JBOSS_REDELIVERY_LIMIT", 3);

            sender.send(message);
        } finally {
            System.out.println("closing connection");
            if (queueConnection != null) {
                queueConnection.close();
            }
        }
    }
} 
```

## 预期行为

因为我正在抛出异常，`onMessage()`所以我希望该消息会再次尝试多次（`<MaxTimesRedelivered>3</MaxTimesRedelivered>`），然后它将被移至 DLQ，但事实并非如此。

## 我试过的

我尝试了所有确认模式（AUTO、CLIENT、DUPS_OK）以及提交、确认但没有任何效果，甚至没有再次发送消息。

我不知道出了什么问题。JBoss 日志中没有任何相关内容。

当我尝试停止并再次运行 MessageListener 时，我得到：

```
MyMessageListener.onMessage( org.jboss.mq.SpyObjectMessage {
Header { 
   jmsDestination  : QUEUE.notificationQueue
   jmsDeliveryMode : 2
   jmsExpiration   : 0
   jmsPriority     : 4
   jmsMessageID    : ID:13-13577584629501
   jmsTimeStamp    : 1357758462950
   jmsCorrelationID: 20130109200742
   jmsReplyTo      : null
   jmsType         : null
   jmsRedelivered  : true
   jmsProperties   : {JMSXDeliveryCount=7, throw=true, JMS_JBOSS_REDELIVERY_LIMIT=3, JMS_JBOSS_REDELIVERY_COUNT=6}
   jmsPropReadWrite: false
   msgReadOnly     : true
   producerClientId: ID:13
}
} ), my message (2013-01-09 20:07:42)

MyMessageListener.onMessage( org.jboss.mq.SpyObjectMessage {
Header { 
   jmsDestination  : QUEUE.notificationQueue
   jmsDeliveryMode : 2
   jmsExpiration   : 0
   jmsPriority     : 4
   jmsMessageID    : ID:15-13577584942741
   jmsTimeStamp    : 1357758494274
   jmsCorrelationID: 20130109200814
   jmsReplyTo      : null
   jmsType         : null
   jmsRedelivered  : true
   jmsProperties   : {JMSXDeliveryCount=6, throw=true, JMS_JBOSS_REDELIVERY_LIMIT=3, JMS_JBOSS_REDELIVERY_COUNT=5}
   jmsPropReadWrite: false
   msgReadOnly     : true
   producerClientId: ID:15
}
} ), my message (2013-01-09 20:08:14)

MyMessageListener.onMessage( org.jboss.mq.SpyObjectMessage {
Header { 
   jmsDestination  : QUEUE.notificationQueue
   jmsDeliveryMode : 2
   jmsExpiration   : 0
   jmsPriority     : 4
   jmsMessageID    : ID:20-13577586971991
   jmsTimeStamp    : 1357758697199
   jmsCorrelationID: 20130109201137
   jmsReplyTo      : null
   jmsType         : null
   jmsRedelivered  : true
   jmsProperties   : {JMSXDeliveryCount=2, throw=true, JMS_JBOSS_REDELIVERY_LIMIT=3, JMS_JBOSS_REDELIVERY_COUNT=1}
   jmsPropReadWrite: false
   msgReadOnly     : true
   producerClientId: ID:20
}
} ), my message (2013-01-09 20:11:37)

MyMessageListener.onMessage( org.jboss.mq.SpyObjectMessage {
Header { 
   jmsDestination  : QUEUE.notificationQueue
   jmsDeliveryMode : 2
   jmsExpiration   : 0
   jmsPriority     : 4
   jmsMessageID    : ID:21-13577587683201
   jmsTimeStamp    : 1357758768320
   jmsCorrelationID: 20130109201248
   jmsReplyTo      : null
   jmsType         : null
   jmsRedelivered  : true
   jmsProperties   : {JMSXDeliveryCount=2, throw=true, JMS_JBOSS_REDELIVERY_LIMIT=3, JMS_JBOSS_REDELIVERY_COUNT=1}
   jmsPropReadWrite: false
   msgReadOnly     : true
   producerClientId: ID:21
}
} ), my message (2013-01-09 20:12:48) 
```

如您所见，我也尝试了 JMS_JBOSS_REDELIVERY_LIMIT。

任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:45:12.040

我发现很有帮助的帖子

[https://community.jboss.org/wiki/ThrowingExceptionsFromAnMDB](https://community.jboss.org/wiki/ThrowingExceptionsFromAnMDB)

内容如下：

> **MDB 应该抛出什么类型的异常？**
> 
> 快速的答案是没有。

当我使用事务并且`createQueueSession(true, Session.SESSION_TRANSACTED)`它工作得很好（重新交付和DLQ）。

# javascript - 从 localStorage 存储/加载修改后的 HTML5 页面

> ID：14244895
> 
> 赞同：0
> 
> 时间：2013-01-09T19:27:02.620
> 
> 标签：javascript, html, google-chrome-extension

是否可以将（使用 JS）修改后的 HTML5 页面存储到 localStorage 并在下次访问此页面时加载它？

我尝试通过我的 Chrome 扩展程序在页面上的某个位置设置标签并再次加载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T20:22:39.590

是的。

你甚至可以在这个页面上运行它。

1) 修改页面。

```
document.querySelector('#hlogo').innerHTML = '<img src="http://upload.wikimedia.org/wikipedia/commons/thumb/a/a7/Siamese_Cat_Cross-Eyed.jpg/1280px-Siamese_Cat_Cross-Eyed.jpg">'; 
```

2) 保存页面。

```
localStorage['thispage'] = document.querySelector('html').innerHTML; 
```

3) 刷新页面。

4）从本地存储恢复它

```
document.querySelector('html').innerHTML = localStorage['thispage']; 
```

# javascript - IE8 有问题 - 脚本可以在其他浏览器上完美运行

> ID：14244897
> 
> 赞同：0
> 
> 时间：2013-01-09T19:27:06.057
> 
> 标签：javascript, internet-explorer

所以我有以下脚本，基本上可以调整屏幕上元素的位置。

它在其他浏览器上完美运行，但在 IE8 上导致错误

这是导致问题的整个函数调用

```
function ajax_load(){
    var screenwidth = window.innerWidth
    var screenheight = window.innerHeight;
    var current_width = 250;
    var current_height = 70;
    var left = (screenwidth - current_width)/2;
    var bottom = (screenheight - current_height)/2;

    var secondajaxloaderElement = document.getElementById('ajax_loader');
    secondajaxloaderElement.style.bottom = bottom + 'px'; // Line 308 - problematic line 
    secondajaxloaderElement.style.left = left + 'px';
} 
```

知道为什么这会在 IE 上失败吗？

我从开发人员工具得到的错误是：参数无效。和指向的行号（308） `secondajaxloaderElement.style.bottom = bottom + 'px';`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:46:55.500

IE8 不支持这些：

```
var screenwidth = window.innerWidth
var screenheight = window.innerHeight; 
```

[http://www.w3schools.com/jsref/prop_win_innerheight.asp](http://www.w3schools.com/jsref/prop_win_innerheight.asp)

看到这个帖子：

[window.innerHeight ie8 替代方案](https://stackoverflow.com/questions/10173236/window-innerheight-ie8-alternative)

这应该在 IE8 中工作：

```
var screenwidth = document.body.clientWidth;
var screenheight = document.body.clientHeight; 
```

或者你也可以使用 jQuery：

```
var screenwidth = $(window).width;
var screenheight = $(window).height; 
```

# macos - Mountain Lion 听写应用程序的命令行界面/工具？

> ID：14244904
> 
> 赞同：3
> 
> 时间：2013-01-09T19:27:41.873
> 
> 标签：macos, applescript, speech-recognition, osx-mountain-lion, text-to-speech

很多人都知道 Mac OS X 命令行工具`say`，它在 Mac 上从终端执行文本到语音转换：

`sh $ say Hello World!`

是否有可用于 Mountain Lion 听写应用程序的命令行工具 - 可以将语音转换为文本的工具？

Apple 文档似乎没有提及任何内容，但如果在 OS X 中的某处隐藏了用于听写服务的未记录 CLI，我也不会感到惊讶。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-14T14:35:48.127

您需要调用`SpeechApplicationServer.app`, 使用 AppleScript。更多细节在这里： [https ://apple.stackexchange.com/questions/127366/speechrecognitionserver-not-found-in-mavericks-with-applescript](https://apple.stackexchange.com/questions/127366/speechrecognitionserver-not-found-in-mavericks-with-applescript)

# jakarta-ee - 如何在需要运行应用服务器的遗留代码上有效地使用 ApprovalTests？

> ID：14244905
> 
> 赞同：0
> 
> 时间：2013-01-09T19:27:43.310
> 
> 标签：jakarta-ee, testing, integration-testing, approval-tests

[ApprovalTests](http://approvaltests.sourceforge.net/)看起来非常适合遗留代码，但问题是我的遗留代码在应用服务器中运行，重新部署应用程序需要 2 分钟以上的时间。因此，我担心运行批准测试的反馈循环会让我不想经常运行它。我可能最终会更改更多代码而无需经常进行测试，并且可能会进入“更改->测试->失败->恢复”的重复模式。

谁能给我关于如何将 ApprovalTests 与需要很长时间部署的遗留代码一起使用的建议？这正是我应该期望处理的，还是我以错误的方式编写这个测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T17:07:58.430

你想在你的项目中测试什么？

如果你想用 Approval Tests 测试表单，你应该想办法将依赖项与应用程序分开，并允许测试只针对代码运行。解决此问题的最佳方法是开始将较小的代码块重构为可单元测试的块，然后将显示与数据源和依赖项分开的路径将自行显现。

该视频非常适合旧版重构： [http](http://www.youtube.com/watch?v=aWiwDdx_rdo) ://www.youtube.com/watch?v=aWiwDdx_rdo （观看整件事，值得一试）

该视频展示了一种将数据加载与项目分开的好方法： [http ://www.youtube.com/watch?v=5gIeJ6z82Pk](http://www.youtube.com/watch?v=5gIeJ6z82Pk)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:07:01.763

我从产品的创建者那里得到了答案：

> 所以你关心的是“change->test->fail->revert”并且会发生这种情况，但是通过更小和更仔细的更改，你应该能够取得良好的进展，失败不应该是规则，而是例外。另外，请记住，在遗产中，座右铭是更好的，而不是好的。使用此测试，直到您重构到足以获得不需要应用服务器的测试为止。然后你移动得更快。批准测试本身不需要很大或很慢，它只是验证。测试的大小是大的还是慢的，虽然approvaltests 可以很好地解决这个问题，但这绝不是你想要的测试类型的建议或建议。

然后我问：

> 您是说“approvaltests 让您以这种方式进行测试，但这不是使用approvaltests 的好方法”吗？如果我正确地解释了这一点，那么更好的方法是什么？

他回答说：

> 是的。批准测试让您以这种方式进行测试。这不是单元测试的好方法。这很可能是您目前拥有的单元测试的最佳方式。使用它，直到您重构为更好的单元测试方式（不需要服务器的方式）

希望这可以帮助其他有同样问题的人。

# python - 我们如何配置 scrapyd 以在项目中使用 virtualenv？

> ID：14244908
> 
> 赞同：5
> 
> 时间：2013-01-09T19:27:55.733
> 
> 标签：python, virtualenv, scrapy

我正在尝试将 scrapyd 配置为在 Ubuntu Server 12.04 机器上运行。我无法将我的项目部署到它，因为它找不到一些库。我可以在主要或默认 python 环境（由操作系统维护的环境）中安装所有依赖项，但我不想这样做。

有没有办法`scrapyd`配置为使用 python `virtualenv`？如果是，如何？如果不是，为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-31T09:18:13.267

我设法在 Ubuntu 服务器上使用 virtualenv 安装了 scrapyd。要安装 virtualenv，只需键入：

```
virtualenv environment_name 
```

然后，您必须使用以下方法激活环境：

```
source [PATH_TO_YOUR_ENVIRONMENT]/bin/activate 
```

之后，你只需要安装scrapyd：

```
pip install scrapyd 
```

如果缺少任何依赖项，只需获取其名称并使用相同的命令安装它：

```
pip install [DEPENDENCY_NAME] 
```

之后，您应该能够使用它的命令运行 scrapyd：

```
scrapyd 
```

# php - 从链接传递 PHP 值

> ID：14244909
> 
> 赞同：0
> 
> 时间：2013-01-09T19:27:58.343
> 
> 标签：php

我是 PHP 和学习的新手。我正在尝试通过 url 链接传递一个值，但它似乎不起作用。

我传递的链接值是[http://www.mysite.com/index.php?id=f](http://www.mysite.com/index.php?id=f)

如果下面看到的 ID 不是 F，我想运行一个 js 脚本，但现在当我运行它时。它什么也没做：

```
<?php
$ShowDeskTop = $_GET['id'];
if (isset($ShowDeskTop)){
    echo $ShowDeskTop;

    if ($ShowDeskTop != "f"){
       echo "ShowDeskTop Value is not F";
               echo "<script type=\"text/javascript\">";
       echo "if (screen.width<800)";
       echo "{";
       echo "window.location=\"../mobile/index.php\"";
       echo "}";
       echo "</script>";  
    };
};
?> 
```

我知道这很容易 PHP 101，但我想不通。我已经尝试了从 w3schools 到 Google 上其他网站的所有方法来寻找答案，但没有运气。有人可以告诉我我做错了什么吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:30:47.860

`$ShowDeskTop`不一样，`$ShowDesktop` 变量名区分大小写！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:30:44.513

我想写`!=`而不是`<>`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:32:18.283

这永远不会起作用，因为您在检查变量是否存在之后设置了变量。最简单的方法：

```
<?php
if (isset($_GET['id'])) {
    echo $_GET['id'];

    if ($_GET['id'] != 'f') {
?>
<script type="text/javascript">
    if (screen.width < 800) {
        window.location = "../mobile/index.php";
    }
</script>
<?php
    }
}
?> 
```

我认为 <> 在 PHP 中无效（它在 VB.NET 中 ..） is not 运算符是 != 或 !== （严格/松散比较）。

此外，您不必使用 ; 来关闭 if 语句。

这：

```
if (expr) {

} 
```

是有效的，而不是这个：

```
if (expr) {

}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T19:39:25.487

您有许多问题，包括错误的变量大小写（即变量不匹配）、在变量存在之前检查变量等。您可以简单地执行以下操作：

```
if (!empty($_GET['id'])) { // note I check for $_GET['id'] value here not $ShowDeskTop
    $ShowDeskTop = $_GET['id']; 
    echo $ShowDeskTop; // note I change case here

    if ($ShowDeskTop !== "f"){  // note the use of strict comparison operator here
       echo "YES, the id doesn't = f";
       echo "<script type=\"text/javascript\">";
            echo "if (screen.width<800)";
            echo "{";
            echo "window.location=\"../mobile/index.php\"";
            echo "}";
       echo "</script>";
    } // note the removal of semicolon here it is not needed and is bad coding practice in PHP - this is basically just an empty line of code
} // removed semicolon here as well 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-09T19:31:53.463

拳头的东西，你需要`;`在最后`echo $ShowDesktop`

而且，什么`f`意思`if ($ShowDeskTop <> "f"){`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-09T19:32:34.860

使用 strcmp() 而不是 <> 运算符。

尝试

```
if(!strcmp($ShowDeskTop, "f")){
   echo "YES, the id doesn't = f";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-01-09T19:40:46.230

```
<?php

   $ShowDeskTop = $_GET['id'];     // assign before checking

   if (isset($ShowDeskTop)){

    //echo $ShowDeskTop;             

    if ($ShowDeskTop !== "f"){
       echo "YES, the id doesn't = f";
       echo "<script type='text/javascript'>";
            echo "if (screen.width<800)";
            echo "{";
            echo "window.location.replace('../mobile/index.php');"; // assuming your path is correct
            echo "}";
       echo "</script>";
    }
   }
 ?> 
```

# powershell - 脚本似乎只处理管道中的最后一个对象

> ID：14244910
> 
> 赞同：12
> 
> 时间：2013-01-09T19:28:05.463
> 
> 标签：powershell, pipeline

我有一个脚本，我正在尝试向其中添加管道功能。不过，我看到了奇怪的行为，脚本似乎只针对管道中的最终对象运行。例如

```
param(
  [parameter(ValueFromPipeline=$true)]
  [string]$pipe
)

foreach ($n in $pipe) {
  Write-Host "Read in " $n
} 
```

很简单，不是吗？然后我运行`1..10 | .\test.ps1`它只输出一行`Read in 10`。更复杂的是，我想在其中使用的实际脚本具有更多参数：

```
[CmdletBinding(DefaultParameterSetName="Alias")]
param (
  [parameter(Position=0,ParameterSetName="Alias")]
  [string]$Alias,

  [parameter(ParameterSetName="File")]
  [ValidateNotNullOrEmpty()]
  [string]$File

  <and so on>
) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-09T19:39:25.210

您需要使用 process{} 包装脚本的主体，这将允许您处理管道上的每个项目。由于将为每个项目调用进程，您甚至可以取消 for 循环。

因此，您的脚本将如下所示：

```
param(
  [parameter(ValueFromPipeline=$true)]
  [string]$pipe
)
process
{
      Write-Host "Read in " $pipe
} 
```

您可以在此处阅读有关输入处理的信息：[函数输入处理方法](http://ss64.com/ps/syntax-function-input.html)

# javascript - 如何每分钟更新javascript函数并更新图表？

> ID：14244912
> 
> 赞同：2
> 
> 时间：2013-01-09T19:28:06.877
> 
> 标签：javascript, ajax

我试图每分钟更新一次图表并调用图表函数。不知道我做错了什么。任何人都可以帮忙。

页面在这里：-

[http://www.api.jonathanlyon.com/m.html](http://www.api.jonathanlyon.com/m.html)

这是代码： -

```
 <!DOCTYPE html>
<html>
<head>
<script src="http://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
<script src="http://code.jquery.com/jquery-1.8.2.min.js"></script>
  <script src="https://raw.github.com/oesmith/morris.js/0.3.2/morris.js"></script>
<meta charset=utf-8 />
<title>Morris.js Line Chart Example</title>
</head>
<script>
window.setInterval(function(){

  chart()

}, 5000);
</script>

<script>
 morrisTemplate = {
      element: 'line-example',
      data: [
      ],
      xkey: 'x',
      xLabels: "hour",
      ykeys: ['volvo'],
      ymin: '0',
      labels: ['Volvo Fan Numbers']
    }

$(function chart(){

    $.ajax({
        url: "http://www.api.jonathanlyon.com/api_fanpage2.php?pagename=volvo&format=json&hourly=true",
        success: function (data){
            toPlot = []
            $.each(data[0]['pagename']['volvo']['data'], function(i, item){
                toPlot.push({x: item['date'] , volvo: item['newfans']   });
            });
            console.log("length:" + toPlot.length)
             toPlot.reverse()
            morrisTemplate.data = toPlot.slice(toPlot.length - 24, toPlot.length)
            Morris.Line(morrisTemplate);
         },
    });

})

</script>

<body>
  <div id="line-example"></div>
</body>
</html> 
```

任何帮助将非常感激。

谢谢

乔纳森

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:47:53.273

外部的目的`$()`是`$(document).ready()`. 继续，将所有代码放入 jQuery 包装器中以延迟执行，直到 DOM 准备好。

```
<script> 

$(function () {
    window.setInterval(chart, 5000);

    morrisTemplate = {
      element: 'line-example',
      data: [
      ],
      xkey: 'x',
      xLabels: "hour",
      ykeys: ['volvo'],
      ymin: '0',
      labels: ['Volvo Fan Numbers']
    }

    function chart(){
        $.ajax({
            url: "http://www.api.jonathanlyon.com/api_fanpage2.php?pagename=volvo&format=json&hourly=true",
            success: function (data){
                toPlot = []
                $.each(data[0]['pagename']['volvo']['data'], function(i, item){
                    toPlot.push({x: item['date'] , volvo: item['newfans']   });
                });
                console.log("length:" + toPlot.length)
                 toPlot.reverse()
                morrisTemplate.data = toPlot.slice(toPlot.length - 24, toPlot.length)
                Morris.Line(morrisTemplate);
             },
        });

    }
});

</script> 
```

此外，您需要将脚本包含在标记`head`的末尾或（更好）末尾。`body`包括这些元素之外的元素不是有效的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:39:56.610

另外你可以像这样拆分它

```
function chart(){
    $.ajax({
        url: "http://www.api.jonathanlyon.com/api_fanpage2.php?pagename=volvo&format=json&hourly=true",
            success: function (data){
            toPlot = []
            $.each(data[0]['pagename']['volvo']['data'], function(i, item){
                toPlot.push({x: item['date'] , volvo: item['newfans']   });
            });
            console.log("length:" + toPlot.length)
            toPlot.reverse()
            morrisTemplate.data = toPlot.slice(toPlot.length - 24, toPlot.length)
            Morris.Line(morrisTemplate);
        }
    });
}

$(function () {
    chart();
}); 
```

这不是最漂亮的解决方案，因为它会在全球范围内产生污垢，但很快

# ruby - 如何使用 ruby mechanize 获取页面描述？

> ID：14244914
> 
> 赞同：0
> 
> 时间：2013-01-09T19:28:18.503
> 
> 标签：ruby, mechanize, mechanize-ruby

如何使用 Mechanize 获取页面描述？

[Pismo gem](https://github.com/peterc/pismo)具有此功能，但比[Mechanize gem](https://github.com/sparklemotion/mechanize)差。例如，机械化查找图像标签。

我没有在[Mechanize 文档](http://mechanize.rubyforge.org/Mechanize.html)中找到如何获取描述。

有谁知道更好的插件或我怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:38:09.283

试试这个：

```
node = page.at("head meta[name='description']")
description = node["content"] 
```

（`node`是一个`Nokogiri::XML::Node`。）

# ruby-on-rails - 更改通知消息取决于更新的属性

> ID：14244917
> 
> 赞同：1
> 
> 时间：2013-01-09T19:28:34.370
> 
> 标签：ruby-on-rails, ruby-on-rails-3, alerts

我想知道在rails中是否可以执行以下操作。

当我在我的应用程序中更新参数 [:book] 时，我收到通知“书已签出”，它像这样在控制器中传递

```
def update
@book = Book.find(params[:id])
  if @book.update_attributes(params[:book]) 
   redirect_to books_path, :notice => "You have checked out this book"
  else
   render :action => 'show'
  end
end 
```

我目前有时会更新参数，当有人签出和签入一本书时（我有一个图书馆应用程序）。无论是真还是假都通过了..此刻我得到了同样的信息。

我可以创建一种方法来显示不同的通知，具体取决于传递的是真还是假，所以像

```
def check_message
if book.check_out == true
 :notice => 'You have checked out the book'
else
 :notice => 'you have checked the book back in' 
end 
```

然后在控制器中

```
def update
@book = Book.find(params[:id])
  if @book.update_attributes(params[:book])
   redirect_to books_path, check_book
  else
   render :action => 'show'
  end
end 
```

我确定那是错误的，但我的下一个问题是我将如何在控制器中使用该方法，有没有更好的方法呢？

任何建议/帮助表示赞赏

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:34:18.377

我建议你使用这样的东西：

```
@book = Book.find(params[:id])
  if @book.update_attributes(params[:book])
   redirect_to books_path, :notice => "You have checked #{@book.checked_out ? 'out the book' : 'the book back in'}"
  else
   render :action => 'show'
  end
end 
```

或者，如果您仍想使用模型中的方法：

```
@book = Book.find(params[:id])
  if @book.update_attributes(params[:book])
   redirect_to books_path, :notice => @book.checek_message
  else
   render :action => 'show'
  end
end

# book model
def check_message
  book.check_out ? 'You have checked out the book' : 'you have checked the book back in' 
end 
```

# c# - 将 html 文件拖放到 C# 表单中

> ID：14244922
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:29:00.530
> 
> 标签：c#, html, drag-and-drop

我想知道是否有办法将 html 文件拖放到 C# 表单并保持格式。我可以拖动一个 html 文件并让它在富文本框中创建一个链接，但这不是我需要的。理想情况下，我正在尝试制作它，以便我可以将网页拖到 C# 应用程序中的某种文本框中，这样我就可以解析信息并对其进行排序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:41:07.220

您可以使用网络浏览器控制，这是链接：

```
http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx 
```

有一个例子：

```
string html  = "<html><body>hi</body></html>";
webBrowser.DocumentText = html; 
```

在拖放事件中，您应该捕获文件名及其内容，然后您可以在 webBrowser 控件上显示它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:35:58.567

当您像您说的那样使用拖放时，您有文件名。您可以做的是打开该 html 文件，获取文件内容并将其放在您的文本框中。

如果您的 html 文件是某个网页，您可以通过以下方式获取它的内容：

```
var webClient = new WebClient();
myTextBox.Text = webClient.DownloadString("YourHTMLFilePath"); 
```

# javascript - 做ajax时的localStorage问题

> ID：14244924
> 
> 赞同：1
> 
> 时间：2013-01-09T19:29:15.197
> 
> 标签：javascript, jquery, ajax, local-storage

我有一些简单的代码可以运行以检查 Internet 连接，并且我正在使用`localStorage`它来保存变量值，但是当我运行它时，该变量的值没有受到影响。那么，我能做些什么来解决它。请帮忙。如果状态更改为`true`提交将发生，否则将被阻止。

```
localStorage.setItem("state","");

function checkConnection(){             
   $.ajax({
       url:"assets/ping.js",
       success:function(res){
            localStorage.setItem("state","true");
       },
       onerror:function(){
            localStorage.setItem("state","false");
       } 
   });
 }

$("form").submit(function(e){

   checkConnection();

   if(localStorage.getItem("state") == "false"){
        return false;
   } else if(localStorage.getItem("state") == "true") {
        return true;
   }

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:43:32.340

这是一个同步问题。在提交表单之前，您用于检查连接的 API 调用未完成。您希望 AJAX 调用阻塞，直到它得到响应。（实际上我猜它应该被称为 SJAX 进行同步）。

您必须添加`async`is`false`到设置参数。阅读：[http ://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings](http://api.jquery.com/jQuery.ajax/#jQuery-ajax-settings)

以下是使用 jQuery 执行此操作的方法：

```
$.ajax({
   url:"assets/ping.js",
   async: false
   success:function(res){
       localStorage.setItem("state", "true");
   },
   error: function(){
        localStorage.setItem("state","false");
   }           
}); 
```

另请注意，错误处理程序应位于`error`not下`onerror`。

最后，如果您要做的只是检测 Internet 连接是否丢失，您可以在大多数浏览器上通过检查 window.navigator.onLine 的值来检测。见： http: [//www.whatwg.org/specs/web-apps/current-work/#browser-state](http://www.whatwg.org/specs/web-apps/current-work/#browser-state)

# c# - 从 aspx 页面调用绑定到用户控件的 Javascript 方法

> ID：14244926
> 
> 赞同：0
> 
> 时间：2013-01-09T19:29:22.297
> 
> 标签：c#, javascript, jquery, asp.net, custom-controls

所以我有一个自定义的带有 javascript 的 asp.net 控件。我希望能够从自定义控件所在的页面调用自定义控件上的控件的 ResetTimeout 方法。

这是我的代码的示例

```
 **TestControl.CS** 
```

* * *

```
 [CLSCompliant(true)]
    [ToolboxData("<{0}:TestControl runat=server></{0}:TestControl >")]
    public class TestControl : WebControl, INamingContainer, IScriptControl, ICallbackEventHandler
    {

    } 
```

* * *

```
 **TestControl.JS**

 // Timout Handler -- builds or resets the timeouts
 ResetTimeout: function () {
    this.HideControl();
    this.StartTimers();
}, 
```

* * *

```
 **TestPage.ASPX**

<asp:Content runat="server" ID="BodyContent" ContentPlaceHolderID="MainContent">
      <script type="text/javascript">
        function test() {
            ($("#<%=Test.ClientID%>").ResetTimeout());
        }
    </script>

 <cc1:TestControl id="Test" runat="server"> </TestControl>

</asp:Content> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:46:19.097

改变这个`($("#<%=Test.ClientID%>").ResetTimeout());`：`$find("<%= Test.ClientID %>").ResetTimeout();`

# iphone - UITextField 用 NSUndoManager 支持替换文本

> ID：14244928
> 
> 赞同：4
> 
> 时间：2013-01-09T19:29:23.620
> 
> 标签：iphone, ios, ipad, uitextfield, nsundomanager

我只是使用一个简单的

```
self.customerTextField.text = @"text"; 
```

但我希望有撤消支持，如果他们摇晃手机，他们可以撤消更改。

我对如何做到这一点有点不知所措。我找到的所有示例都是针对`UITextView`.

======================== 当前代码迭代 ======================

```
-(void)getUniqueItemID {

    [self.inventoryLibrarian generateUniqueItemIDwithCompletionBlock:^(NSString *string) {

        [self undoTextFieldEdit:string];
        //self.customTextField.text = string;

    }];

}

- (void)undoTextFieldEdit: (NSString*)string
{
    [self.undoManager registerUndoWithTarget:self
                                    selector:@selector(undoTextFieldEdit:)
                                      object:self.customTextField.text];
    self.customTextField.text = string;
}

-(BOOL)canBecomeFirstResponder {
    return YES;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-12T16:15:13.933

**Shake-to-undo**
将此行放入您的 appDelegate 的`application:didFinishLaunchingWithOptions:`方法中：

```
 application.applicationSupportsShakeToEdit = YES; 
```

并在相关的 viewController.m

```
 -(BOOL)canBecomeFirstResponder {
        return YES;
    } 
```

此代码的其余部分位于 viewController.m

**属性**
把它放在类扩展中......

```
 @interface myViewController()
    @property (weak, nonatomic) IBOutlet UITextField *inputTextField;
    @end 
```

将其链接到 Interface Builder 中的文本字段。

**Undo 方法**
将自身的调用添加到重做堆栈

```
 - (void)undoTextFieldEdit: (NSString*)string
    {
        [self.undoManager registerUndoWithTarget:self
                                        selector:@selector(undoTextFieldEdit:)
                                          object:self.inputTextField.text];
        self.inputTextField.text = string;
    } 
```

（我们不需要创建 NSUndoManager 实例，我们从 UIResponder 超类继承一个）

**撤消操作**
摇动撤消不需要，但可能有用...

```
 - (IBAction)undo:(id)sender {
        [self.undoManager undo];
    }
    - (IBAction)redo:(id)sender {
        [self.undoManager redo];
    } 
```

**undo 方法的调用**
这里有两个不同的例子来改变 textField 的内容……</p>

*示例 1*
通过按钮操作设置 textField 的内容

```
 - (IBAction)addLabelText:(UIButton*)sender {
        [self.undoManager registerUndoWithTarget:self
                                        selector:@selector(undoTextFieldEdit:)
                                          object:self.inputTextField.text];
        self.inputTextField.text = @"text";
    } 
```

冒着失去清晰度的风险，我们可以将其缩短为：

```
 - (IBAction)addLabelText:(UIButton*)sender {
        [self undoTextFieldEdit: @"text"];
    } 
```

因为 undoManager 调用在两种方法中是相同的

*示例 2*
直接键盘输入编辑

```
 #pragma mark - textField delegate methods

    - (BOOL)textFieldShouldBeginEditing:(UITextField *)textField
    {
        [self.undoManager registerUndoWithTarget:self
                                        selector:@selector(undoTextFieldEdit:)
                                          object:textField.text];
        return YES;
    }

    - (BOOL)textFieldShouldReturn:(UITextField *)textField
    {
        //to dismiss the keyboard
        [textField resignFirstResponder];
        return YES;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T00:50:36.750

您无需执行任何操作，除非您禁用它，否则它会正常工作。例如，请参阅[此问题](https://stackoverflow.com/questions/3663160/how-to-stop-the-uitextfield-from-responding-to-the-shake-gesture)。

# android - Android 在应用程序运行时改变样式

> ID：14244929
> 
> 赞同：1
> 
> 时间：2013-01-09T19:29:23.410
> 
> 标签：android, onclick, styles

我想在我的应用程序中使用两种样式：android:Theme.Black 和 android:Theme.Light。在我的应用程序中，用户可以在安装和运行应用程序时选择样式。

我的问题：**如何在运行时更改应用程序的样式？**这对我来说非常重要。非常非常感谢

PS Style 定义在 res/values/styles.xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T19:22:46.807

我解决了：

`getApplication().setTheme(R.style.BlackTheme);`

/res/values/styles.xml

```
<resources>
    <style name="BlackTheme" parent="@android:style/Theme.Black">
    </style>    
</resources> 
```

# sql - 查询以列出父列中的每个子记录

> ID：14244930
> 
> 赞同：2
> 
> 时间：2013-01-09T19:29:25.637
> 
> 标签：sql, sql-server, tsql, pivot, unpivot

我需要专家帮助。我认为我非常了解 SQL，至少到目前为止。我正在使用 SQL Server，需要构建一个查询来列出每个注册成员，并在单独的列而不是行中显示他们的来宾的每个名称。每个成员可以有 0:N 个客人与每个成员相关联。所以，这是我的表：

成员表：memberID (PK), FName, LName, ...

来宾表：GuestID (PK)、FName、LastName、...

事件表：GuestID (PK)、MemberID (PK)、...

我正在尝试构建这样的查询输出：

会员ID | Member_FName | Member_LName | 来宾1ID | 来宾1_Fname | 来宾2ID | 来宾2_FName ...

**样本：**

```
Member Table
MemberID | FName | LName
001        Frank   Smith   
002        Mary    Jane
003        John    Henry

Guest Table
GuestID | FName | LName
101       Steve   Smith
102       Peter   Smith
103       Mike    Jane

Event Table
MemberID | GuestID
001        101
001        102
002        103 
```

**输出：**

```
MemberID | FName | LName| GuestID1 | FName1 | LName1 |GuestID2 | FName2 | LName2
001        Frank   Smith  101        Steve    Smith   102        Peter    Smith
002        Mary    Jane   103        Mike     Jane
003        John    Henry 
```

如果我需要包含其他信息，请告诉我。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:46:22.813

您可以同时实现 the`UNPIVOT`和 then`PIVOT`函数来获得结果。获取您的`UNPIVOT`列并将数据转换为行，而数据透视表获取最终结果并将其转换回列：

```
select MemberID,
  memberfirst,
  memberlast,
  isNull(GuestId_1, '') GuestId_1, 
  isNull(fname_1, '') fname_1, 
  isNull(lname_1, '') lname_1,
  isNull(GuestId_2, '') GuestId_2, 
  isNull(fname_2, '') fname_2, 
  isNull(lname_2, '') lname_2
from
(
  select MemberID,
    memberfirst,
    memberlast,
    col+'_'+cast(rn as varchar(10)) col,
    value
  from
  (
    select m.MemberID,
      m.fname MemberFirst,
      m.lname MemberLast,
      isNull(cast(g.GuestID as varchar(5)), '') GuestId,
      isNull(g.fname, '') fname,
      isNull(g.lname, '') lname,
      row_number() over(partition by m.parentid order by g.guestid) rn
    from member m
    left join Event r
      on m.parentid = r.memberid
    left join guest g
      on r.guestid = g.guestid
  ) src
  unpivot
  (
    value
    for col in (GuestId, fname, lname)
  ) unpiv
) src1
pivot
(
  max(value)
  for col in (GuestId_1, fname_1, lname_1,
              GuestId_2, fname_2, lname_2)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1f592/24)

如果您提前知道记录的数量，上述方法非常有用，但如果不知道，那么您将需要使用动态 sql：

```
DECLARE  @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX),
    @colsPivotNull as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT  ',' 
                      + quotename(c.name +'_'+ cast(t.rn as varchar(10)))
                    from
                    (
                      select cast(row_number() over(partition by m.MemberID order by g.guestid) as varchar(50)) rn
                      from member m
                      left join Event r
                        on m.parentid = r.memberid
                      left join guest g
                        on r.guestid = g.guestid
                    ) t
                    cross apply sys.columns as C
                   where C.object_id = object_id('guest')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

select @colsPivotNull = STUFF((SELECT  ', IsNull(' 
                      + quotename(c.name +'_'+ cast(t.rn as varchar(10)))+', '''') as '+c.name +'_'+ cast(t.rn as varchar(10))
                    from
                    (
                      select cast(row_number() over(partition by m.MemberID order by g.guestid) as varchar(50)) rn
                      from member m
                      left join Event r
                        on m.parentid = r.memberid
                      left join guest g
                        on r.guestid = g.guestid
                    ) t
                    cross apply sys.columns as C
                   where C.object_id = object_id('guest')
                   group by c.name, t.rn
                   order by t.rn
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select 
          MemberID,
          memberfirst,
          memberlast, '+@colsPivotNull+'
      from
      (
        select MemberID,
          memberfirst,
          memberlast,
          col+''_''+cast(rn as varchar(10)) col,
          value
        from 
        (
          select m.MemberID,
            m.fname MemberFirst,
            m.lname MemberLast,
            isNull(cast(g.GuestID as varchar(5)), '''') GuestId,
            isNull(g.fname, '''') fname,
            isNull(g.lname, '''') lname,
            row_number() over(partition by m.parentid order by g.guestid) rn
          from member m
          left join Event r
            on m.parentid = r.memberid
          left join guest g
            on r.guestid = g.guestid
        ) x
        unpivot
        (
         value
          for col in (GuestId, fname, lname)
        ) u
      ) x1
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

exec(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1f592/21)

两个版本产生相同的结果：

```
| MemberID | MEMBERFIRST | MEMBERLAST | GUESTID_1 | FNAME_1 | LNAME_1 | GUESTID_2 | FNAME_2 | LNAME_2 |
-------------------------------------------------------------------------------------------------------
|        1 |       Frank |      Smith |       101 |   Steve |   Smith |       102 |   Peter |   Smith |
|        2 |        Mary |       Jane |       103 |    Mike |    Jane |           |         |         |
|        3 |        John |      Henry |           |         |         |           |         |         | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:35:41.137

实际上，为客人制作一列并用逗号分隔列表更容易。

你可以这样做：

```
SELECT DISTINCT memberID, FName, LName, 
 STUFF((SELECT ', ' + FName + ' ' + LName + ' ('+GuestID+')'
  FROM Relationship R 
  JOIN Guest G ON R.GuestID = G.GuestID
  WHERE R.MemberID = Memeber.MemberID
  FOR XML PATH ('')),1,2,'') AS GuestList
FROM Member 
```

看起来像这样：

```
MemberID | FName | LName| GuestList
001        Frank   Smith  Steve Smith (101), Peter Smith (102)
002        Mary    Jane   Mike Jane (103)
003        John    Henry 
```

# jquery - 为图库自定义超大插件

> ID：14244932
> 
> 赞同：0
> 
> 时间：2013-01-09T19:29:30.483
> 
> 标签：jquery, variables, supersized

我对照片库有疑问。

我需要更新一个全局变量......这似乎很容易，但它不起作用......知道这里有什么问题吗？难道是超大型作品onload并且一旦页面加载就无法更新..？

*   我的初始全局变量在页面顶部声明
*   每个缩略图都有一类全屏供选择
*   我的点击函数抓取锚的 href 并更新变量
*   在幻灯片图像数组中调用该变量

这是我的代码：

```
$path = '../images/bg-gallery.jpg'; //set initial image

<div><a class="full-screen" href="../images/gallery-imgs/photo-gallery/01.jpg"><img src="../images/gallery-imgs/photo-gallery/01.jpg" /></a></div>

$('.full-screen').click(function(e){
    e.preventDefault();
    $path = $(this).attr('href');
        return $path;   //update image path variable based on which thumbnail clicked
}); 
```

这是声明图像路径的地方：

```
 jQuery(function($){

            $.supersized({

                // Functionality
                slide_interval          :   10000,      // Length between transitions
                transition              :   1,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                transition_speed        :   700,        // Speed of transition

                // Components                           
                slide_links             :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                slides                  :   [{image : $path}]

            });
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T21:03:37.050

我没有尝试更新变量，而是进入文档并看到他们有一个 API 可以使用 ( `api.goTo($slide);`)。

*   我为每个缩略图链接添加了 rel="number of slide"
*   我更新了超大功能选项中的幻灯片以与拇指一致
*   编写了一个快速函数来停止链接上的默认操作，获取幻灯片编号并将其放置在 goto api 中。

奇迹般有效！:)

这是我的最终代码：

```
<div><a class="full-screen" rel="1" href="../images/bg-gallery.jpg"><img src="../images/bg-gallery.jpg" /></a></div>

$('.full-screen').click(function(e){
    e.preventDefault();
    var $slide = $(this).attr('rel');
        api.goTo($slide);
});

slides                  :   [
                                                {image : '../images/bg-gallery.jpg'}, 
                                                {image : '../images/gallery-imgs/photo-gallery/01.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/02.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/03.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/04.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/05.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/06.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/07.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/08.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/09.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/10.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/11.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/12.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/13.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/14.jpg'},
                                                {image : '../images/gallery-imgs/photo-gallery/15.jpg'},
                                                ] 
```

# sql-server - ssis 表达式：你如何修剪一个值然后检查 vale 是否为空然后添加一个空值？

> ID：14244933
> 
> 赞同：1
> 
> 时间：2013-01-09T19:29:35.853
> 
> 标签：sql-server, ssis

我目前的表达任何帮助都会非常感谢您！

```
TRIM(Unit) == "N/A" ? (DT_STR,255,1252)NULL(DT_STR,255,1252) : 
TRIM(Unit) == "" ? (DT_STR,255,1252)NULL(DT_STR,255,1252) :  [Unit] 
```

它会将 null 添加到空值但是我如何修剪它？

例如，如果该值为空，那么它将添加一个空值，但如果该值为空格 HGDS，则不会对其进行修剪。

解决方法如下

```
 TRIM(Unit) == "N/A" ? (DT_STR,255,1252)NULL(DT_STR,255,1252) : 
 TRIM(Unit) == "" ? (DT_STR,255,1252)NULL(DT_STR,255,1252) :  TRIM([Unit]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-29T14:04:18.827

只需在评论中重新发布@Neo 的答案......这样人们就不会忽视这个问题，认为它没有得到回答。

修剪（单位）==“不适用”？(DT_STR,255,1252)NULL(DT_STR,255,1252)：TRIM（单位）==“”？(DT_STR,255,1252)NULL(DT_STR,255,1252) : TRIM([单位])

注意：@Neo：随时删除我的答案并在您看到此内容时重新发布您的答案。

# mysql - Mysql存储过程：计算给定父级的所有子级树的错误

> ID：14244934
> 
> 赞同：2
> 
> 时间：2013-01-09T19:29:37.497
> 
> 标签：mysql, stored-procedures

我被困在这个问题上。

我有 2 个表格错误和配置文件

```
profiles table

id name parentid
1  A     0
2  B     1
3  C     1
4  D     2
5  E     2
6  F     3
7  G     5 
```

等等

错误

```
id  assigned_to
1    1
2    3
4    7 
```

等等

assign_to 是配置文件表中 ID 的外键

在单个存储过程中，我需要显示包含给定父级的子级和这些子级子树的错误计数的表

我能够指出当我传递父母姓名时，我可以创建直接孩子的表，但错误的计数仅适用于孩子而不是那个孩子的树

请帮忙

这是我的代码

```
DELIMITER $$

CREATE DEFINER=`bugs`@`localhost` PROCEDURE `User_hier`(
in loginname varchar(255)
)
BEGIN

declare v_done tinyint unsigned default 0;
declare v_depth smallint unsigned default 0;

create temporary table ProfileSum(
owner varchar(255),
ownerID smallint unsigned,
P0 smallint unsigned,
P1 smallint unsigned,
P2 smallint unsigned,
P3 smallint unsigned,
P4 smallint unsigned,
P5 smallint unsigned,
SP smallint unsigned,
Total smallint unsigned
)engine = memory;

create temporary table TotalBugByOwner(
owner varchar(255),
ownerID smallint unsigned,
P0 smallint unsigned,
P1 smallint unsigned,
P2 smallint unsigned,
P3 smallint unsigned,
P4 smallint unsigned,
P5 smallint unsigned,
SP smallint unsigned,
Total smallint unsigned,
depth smallint unsigned default 0
)engine = memory;

create temporary table hier(
parent_cat_id smallint unsigned, 
cat_id smallint unsigned,
loginemail varchar(255), 
depth smallint unsigned default 0
)engine = memory;

insert into ProfileSum
select
p.login_name ,
p.userid ,
count(case when b.priority = 'P0' then b.bug_id else NULL end) AS P0 ,
count(case when b.priority = 'P1' then b.bug_id else NULL end) AS P1 ,
count(case when b.priority = 'P2' then b.bug_id else NULL end) AS P2 ,
count(case when b.priority = 'P3' then b.bug_id else NULL end) AS P3 ,
count(case when b.priority = 'P4' then b.bug_id else NULL end) AS P4 ,
count(case when b.priority = 'P5' then b.bug_id else NULL end) AS P5 ,
count(case when b.priority = 'Set Priority' then b.bug_id else NULL end) AS SetPriority ,
sum(case when b.priority in ('P0' , 'P1' , 'P2' , 'P3' , 'P4' , 'P5' , 'Set Priority') then 1 else NULL end) AS Total
from bugs b
right outer join profiles p on b.assigned_to = p.userid 
group by p.login_name ;

insert into hier select MgrID, userid, login_name, v_depth from profiles where login_name = loginname;
create temporary table tmp engine=memory select * from hier;

while not v_done do

if exists( select 1 from profiles p
    inner join tmp on p.MgrID = tmp.cat_id and tmp.depth = v_depth) then

    insert into hier select p.MgrID, p.userid, p.login_name, v_depth + 1 from profiles p
        inner join tmp on p.MgrID = tmp.cat_id and tmp.depth = v_depth;

    set v_depth = v_depth + 1;          

    truncate table tmp;
    insert into tmp select * from hier where depth = v_depth;

else
    set v_done = 1;
end if;

end while;

insert into TotalBugByOwner
select
PS.owner,
PS.ownerID ,
sum(PS.P0) As P0,
sum(PS.P1) As P1,
sum(PS.P2) As P2,
sum(PS.P3) As P3,
sum(PS.P4) As P4,
sum(PS.P5) As P5,
sum(PS.SP) As SetPriority,
sum(PS.Total) As Total,
h.depth
from ProfileSum PS
JOIN hier h on PS.ownerID = h.cat_id
group by PS.owner;

select * from TotalBugByOwner;

drop temporary table if exists hier;
drop temporary table if exists ProfileSum;
drop temporary table if exists tmp;
drop temporary table if exists totalbugbyowner;

END 
```

# php - 如何使用 mysqli_stmt 进行 2 个查询

> ID：14244935
> 
> 赞同：1
> 
> 时间：2013-01-09T19:29:53.667
> 
> 标签：php, mysql, mysqli

如何使用 mysqli_stmt 进行 2 个查询？
如果我用一个查询进行它是否有效，但有两个给我这个错误：
*“致命错误：在非对象中调用成员函数 execute()。”*

```
<?
$oConni=new mysqli('localhost', 'user', 'password', 'database');

$cQuery = "SELECT email, firstname, profile_image FROM usersg";
$stmt = $oConni->prepare($cQuery);
$stmt->execute();
$stmt->bind_result($email, $name, $imagen);

$cQuery2 = "SELECT oauth_uid, oauth_token, username, imagen FROM users";
$resul = $oConni->prepare($cQuery2);
$resul->execute();
$resul->bind_result($id, $fich, $nameTwi, $imagenTwi);

echo "<table border='1'>";
while ($stmt->fetch()) {
echo "<tr>
<td>" . $email. "</td>
<td>" . $name. "</td>
<td><img src='".$imagen."' width=40px height=40px></td>
</tr>";
}
echo "</table><p>";
echo "<table border='1'>";
while ($resul->fetch()) {
echo "<tr>
<td>" . $id. "</td>
<td>" . $fich. "</td>
<td>" . $nameTwi. "</td>
<td><img src='".$imagenTwi."' width=40px height=40px></td>
</tr>";
}
echo "</table>";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:34:20.760

显然，当您调用 prepare 时，其中一个查询（第二个）不会返回对象。这可能是由于查询中的错误。您确定该列已命名`imagen`吗？

您可以检查结果。如果准备失败，`$resul`将是错误的。在这种情况下，您可以检查发生了哪个错误。

```
$resul = $oConni->prepare($cQuery2);
if ($result === false)
{
  echo $oConni->error;
  exit;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T19:53:55.647

试试吧，肯定会奏效的！

```
//First Query
$cQuery = "SELECT email, firstname, profile_image FROM usersg";
$stmt = $oConni->prepare($cQuery);
$stmt->execute();
$stmt->bind_result($email, $nombre, $imagen);
echo "<table border='1'>";
 while ($stmt->fetch()) {
echo "<tr>
<td>" . $email. "</td>
<td>" . $nombre. "</td>
<td><img src='".$imagen."' width=50px height=50px></td>
</tr>";
}
echo "</table>";

//Second Query
$cQuery2 = "SELECT oauth_uid, oauth_token, username, imagen FROM users";
$resul = $oConni->prepare($cQuery2);
$resul->execute();
$resul->bind_result($id, $fichero, $nombreTwitter, $imagenTwitter);
echo "<table border='1'>";
while ($resul->fetch()) {
echo "<tr>
<td>" . $id. "</td>
<td>" . $fichero. "</td>
<td>" . $nombreTwitter. "</td>
<td><img src='".$imagenTwitter."' width=50px height=50px></td>
</tr>";
}
echo "</table>"; 
```

# ruby - activerecord :include count 进行另一个查询？

> ID：14244937
> 
> 赞同：1
> 
> 时间：2013-01-09T19:29:57.237
> 
> 标签：ruby, activerecord

我有`Show`一个`has_many` `Artists`。当我查询一个节目时，我`:include` `:artists`在里面。但是，当我这样做时`shows.first.artists.count`，这会导致一个新的查询 - 这不是很有效。

我的问题是

a) 为什么再次查询我：在查询中包含艺术家？

b）我能做些什么来阻止这种情况并避免每次调用 count 时都进行查询

c）shows.first.artists.class 是一个数组 - ActiveRecord 是否在数组上覆盖此方法？

**更新** 这里的代码和查询：

```
shows = Show.all :include => [:artists, :users], :limit => 12, :offset => 0
D, [2013-01-09T13:32:21.453346 #4659] DEBUG -- :   Show Load (0.5ms)  SELECT `shows`.* FROM `shows` WHERE `shows`.`deleted` = 0 LIMIT 12 OFFSET 0
D, [2013-01-09T13:32:21.497766 #4659] DEBUG -- :   Artist Load (0.4ms)  SELECT `artists`.* FROM `artists` WHERE `artists`.`id` IN (2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)
D, [2013-01-09T13:32:21.513886 #4659] DEBUG -- :   User Load (0.4ms)  SELECT `users`.* FROM `users` WHERE `users`.`show_id` IN (2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13) 
```

然后我通过 artits 对 count 进行交互，它为艺术家生成这个查询：

```
 (0.4ms)  SELECT COUNT(*) FROM `artists` WHERE `artists`.`show_id` = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T21:06:04.237

虽然关联和数组的行为通常相同，但存在一些差异。

在一个数组`length`, `count`,`size`都是同一个方法的别名。

在一个协会上：

*   `count`总是做一个`select count(*) from ...`查询
*   `length`总是加载整个关联然后返回加载数组的长度
*   `size``length`如果关联已经加载，将调用，`count`如果没有

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T20:08:52.670

您可以改用它`shows.first.artists.size`来避免额外的查询。

# c++ - 连接函数错误 10047 (winsock2)

> ID：14244939
> 
> 赞同：2
> 
> 时间：2013-01-09T19:30:19.793
> 
> 标签：c++, winapi, winsock2

所以我从 MSDN 站点复制了一些使用基本 Windows 套接字功能的测试代码。这是代码：

```
#include "stdafx.h"

#ifndef UNICODE
#define UNICODE
#endif

#include <stdio.h>
#include <winsock2.h>
#include <ws2tcipip.h>
#include <wchar.h>

int main()
{

    int iResult = 0;

    //----------------------
    // Initialize Winsock
    WSADATA wsaData;
    iResult = WSAStartup(MAKEWORD(2, 2), &wsaData);
    if (iResult != 0) {
        wprintf(L"WSAStartup function failed with error: %d\n", iResult);
        return 1;
    }
    //----------------------
    // Create a SOCKET for connecting to server
    SOCKET ConnectSocket;
    ConnectSocket = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);
    if (ConnectSocket == INVALID_SOCKET) {
        wprintf(L"socket function failed with error: %ld\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }
    //----------------------
    // The sockaddr_in structure specifies the address family,
    // IP address, and port of the server to be connected to.

    int I = sizeof(sockaddr_in);
        sockaddr_in clientService;
    clientService.sin_family = AF_INET;     
        clientService.sin_port = htons(5000);
    in_addr *s = (in_addr*)malloc(sizeof(in_addr));
    s->s_addr = inet_addr("127.0.0.1");
    clientService.sin_addr = (in_addr_t)s;

    iResult = connect(ConnectSocket, (sockaddr*)&clientService,I);
    if (iResult == SOCKET_ERROR) {
        wprintf(L"connect function failed with error: %ld\n", WSAGetLastError());
        iResult = closesocket(ConnectSocket);
        if (iResult == SOCKET_ERROR)
            wprintf(L"closesocket function failed with error: %ld\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }

    wprintf(L"Connected to server.\n");

    iResult = closesocket(ConnectSocket);
    if (iResult == SOCKET_ERROR) {
        wprintf(L"closesocket function failed with error: %ld\n", WSAGetLastError());
        WSACleanup();
        return 1;
    }

    WSACleanup();
    return 0;
} 
```

代码编译得很好。但是当我运行程序时，命令提示符屏幕显示以下错误消息：

> 连接失败并出现错误：10047

现在我知道错误 10047 表示地址结构中的错误。我尝试使用`inet_pto`n 但这会导致`inet_pton`使用该`memcpy`函数时出现段错误（内存访问冲突）。那么这里发生了什么？功能是否`connect`执行不当？也许还有另一种方法来指定地址结构。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:47:04.470

来自 MSDN：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms737625%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms737625%28v=vs.85%29.aspx)

```
sockaddr_in clientService;
clientService.sin_family = AF_INET;
clientService.sin_addr.s_addr = inet_addr("127.0.0.1");
clientService.sin_port = htons(27015); 
```

似乎您以模棱两可的方式设置 .sin_addr.s_addr 。

如果事实证明上述情况不是问题，那么也许您启用了 IP6 协议但没有 IP4，这就是 AF_NET 失败并需要 AF_NET6 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T23:18:43.100

在您的情况下，问题是这里的这一行：

```
clientService.sin_addr = (in_addr_t)s; 
```

您正在将 in_addr 指针分配给 in_addr 对象。像这样取消引用指针（另请注意，如果您删除强制转换，编译器会发现问题：

```
clientService.sin_addr = *s; 
```

不过，LastCoder 的方法会更容易。没有理由`malloc()`只复制一个单独的 in_addr 结构。

# c# - Web服务C# System.Data.SqlClient.SqlClientPermission对SQL访问的权限错误

> ID：14244952
> 
> 赞同：1
> 
> 时间：2013-01-09T19:31:10.917
> 
> 标签：c#, sql, sql-server, web-services, permissions

当我尝试通过在 C# .Net 中开发的 Web 服务访问 SQL 命令时，出现此错误。

Web 服务也由 C# 中的 Windows 窗体应用程序调用。

这是错误：

```
"Falha na solicitação da permissão de tipo 'System.Data.SqlClient.SqlClientPermission, System.Data, Version=2.0.0.0, Culture=neutral," 
```

这是我的代码：

```
Sql query = new Sql();
StringBuilder comando = new StringBuilder();
comando.Append("SELECT EntCod FROM ENT001 T1 (NOLOCK) " +
               "WHERE T1.EntCpfCgc = @ENTCPFCGC ");
query.addParametro("ENTCPFCGC", CPFCGC);

DataTable resultado = query.Select(comando.ToString()).Tables[0]; 
```

“SQL”类是连接 SQL 服务器 DB 的控制类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T11:56:16.153

我已经用这个 DOS 命令解决了我的问题：

```
C:\windows\microsoft.net\framework\v2.0.50727\caspol.exe -machine -chggroup 1 FullTrust
C:\windows\microsoft.net\framework\v2.0.50727\caspol.exe -user -chggroup 1 FullTrust
C:\windows\microsoft.net\framework\v2.0.50727\caspol.exe -enterprise -chggroup 1 FullTrust 
```

授予对此文件的“FullTrust”权限。

谢谢大家的回复！

# c# - 可以接受各种类型的方法

> ID：14244953
> 
> 赞同：0
> 
> 时间：2013-01-09T19:31:12.310
> 
> 标签：c#

我想知道是否有一种方法可以创建一种可以接受可变数据类型的方法。有时我需要将对象传递给该方法，有时是原始类型，例如

```
SomeMethod(object);
SomeMEthod(r,p,q); //Where r,p,q are integers 
```

这种方法的签名是什么样的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T19:34:00.707

如果您不关心方法中参数的类型，您可以简单地使用：

```
public void SomeMethod(params object[] list) 
```

如果您需要以不同的方式处理参数类型，则必须更具体并创建强类型方法的多个重载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T19:34:44.963

如果您事先不知道类型，并且它实际上可以是 ANY 类型，那么`object`参数将适用于引用类型和值类型。

例子：

```
public static void Method(params object[] list) 
{
  for ( int i = 0 ; i < list.Length ; i++ )
      Console.WriteLine(list[i]);
}

Method(1, 'a', "test"); 
```

[MSDN 文档](http://msdn.microsoft.com/en-us/library/w5zay9db%28v=vs.71%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:35:53.497

还有方法重载，您可以传递多个名称相同但签名不同的方法。

```
public void SomeMethod(object o)
{
}

public void SomeMethod(int r, int p, int q)
{
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:34:34.387

如果您想要一个方法接受任意数量的任何类型，即使可能非常缓慢且不可维护：

```
void Foo(params object[] arguments)
{
    //Operate
} 
```

上述方法几乎适用于任何类型，但如果是值类型，则必须将它们装箱，这需要处理。如果你想让你的代码更有性能，我建议你创建重载来满足你的需要。

# c# - 2 个 Windows 窗体应用程序之间的通信

> ID：14244962
> 
> 赞同：3
> 
> 时间：2013-01-09T19:31:47.120
> 
> 标签：c#, windows, winforms

我有 2 个窗体应用程序。第一个应用程序与数据库交互，而另一个应用程序旨在与第一个应用程序通信以与数据库交互。那么我如何才能使两个应用程序相互交互。我应该使用哪个工具？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:41:43.957

这是一个使用 WCF 通信两个进程的好示例：

[http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication](http://www.switchonthecode.com/tutorials/wcf-tutorial-basic-interprocess-communication)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-11T13:56:07.943

另一种选择是 ZeroMQ C# 绑定：

[http://www.zeromq.org/bindings:clr](http://www.zeromq.org/bindings:clr)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-09T19:48:17.890

一种选择是使用 WCF 命名管道 (net.pipe)，另一种选择是[用于本地进程间通信的匿名管道](http://msdn.microsoft.com/en-us/library/bb546102.aspx)

摘抄：

> 匿名管道提供的功能比命名管道少，但也需要较少的开销。您可以使用匿名管道使本地计算机上的进程间通信更容易。您不能使用匿名管道通过网络进行通信。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T19:41:56.583

按照@I4V 的建议，将 WCF 与 netnamedpipe 绑定一起使用。其他替代方法是使用管道、远程处理或文件共享。

# opengl - 立方体映射中的法线变换

> ID：14244964
> 
> 赞同：0
> 
> 时间：2013-01-09T19:31:54.757
> 
> 标签：opengl

我目前正在学习立方体映射，我找到了这个教程：[http](http://www.keithlantz.net/2011/10/lighting-and-environment-mapping-with-glsl/) ://www.keithlantz.net/2011/10/lighting-and-environment-mapping-with-glsl/他通过与转置的倒数相乘来变换法线向量`Model`矩阵。我想知道为什么他不乘以转置矩阵的逆`ModelView`矩阵而是`Model`矩阵？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:52:14.733

立方体贴图是在字空间中定义的，看来作者也希望在字空间中具有纹理坐标。

请注意，一个法线被转换为视图空间 - 用于照明，第二个仅用于在立方体贴图中查找。

两个链接供参考：

*   [http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Reflecting_Surfaces](http://en.wikibooks.org/wiki/GLSL_Programming/Unity/Reflecting_Surfaces)
*   [http://www.ozone3d.net/tutorials/glsl_texturing_p04.php#part_4](http://www.ozone3d.net/tutorials/glsl_texturing_p04.php#part_4)

# oracle - Oracle 批量插入缺少的审计条目

> ID：14244965
> 
> 赞同：1
> 
> 时间：2013-01-09T19:31:57.640
> 
> 标签：oracle, insert, audit, bulk

我有一个启用了 oracle 审计（11g 非集群）的 Java/Hibernate/Spring 应用程序，它似乎配置正确。

但是，某些条目并未写入 SYS.AUD$。

这是我的场景：

我有一个在 Oracle 上执行 8 次插入的事务，由 hibernate 的 showsql 显示，实际上已写入数据库。

我对给定的表有一个 AUDIT INSERT RULE BY ACCESS，并且，我希望在 Oracle 的 AUDIT 中看到给定事务的 8 个审计条目，但我只记录了 4 个插入。有时会记录 5 个条目，有时会记录 3 个条目。

我设法追查到此行为与 hibernate.jdbc.batch_size 属性值有关。

在所描述的场景中，该值设置为 10。

但是，如果我将值更改为 0，这会禁用 jdbc 批处理，那么一切都会按预期工作，并且我总是会得到 8 个插入审计日志。

我认为这可能是 ojdbc 驱动程序上的一个错误，但即使我升级到最新版本，该错误仍然存​​在。

禁用 jdbc 批处理对我来说不是一个选项。这是一个错误吗？关于如何克服这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:11:31.567

我认为它与 Direct-Path INSERT 有关。如果您使用 FGA，（我认为）Direct-Path INSERT 将不会发生，因此审核始终有效。我认为您将不得不选择一个 - Direct-Path INSERT 或审计。

为什么需要 jdbc 批处理？这是什么类型的应用程序？您是否在开启和关闭的情况下进行了性能测试？

# c# - 在 Each 块内进行更改持久化

> ID：14244967
> 
> 赞同：4
> 
> 时间：2013-01-09T19:31:59.123
> 
> 标签：c#, .net, html-parsing, csquery

我一直在尝试奇妙的[CsQuery](https://github.com/jamietre/CsQuery)库，它基本上是 jQuery 的 .NET 端口，允许使用 os CSS 选择器和 jQuery 的大部分功能。

我正在使用它来解析和编辑一批 HTML 文件（特别是编辑不同 DOM 元素的一些属性）。

下面的 C# 片段显示了我正在做的事情，注释中包含 JavaScript/jQuery 等效代码。

```
FileStream doc = File.Open(/*some html file*/);    

CQ dom = CQ.Create(doc);        // $dom = $(document);
CQ images = dom.Select("img");  // $images = $('img');
images.Attr("src","#");         // $images.attr('src','#');

dom.Save(/*Output path*/); // No jQuery equivalent, this just saves the file. 
```

这**非常**有效：如果我检查输出文件，所有图像的`src`值现在都是`#`.

无论如何，如果我使用该`Each`块（这似乎可以很好地使用[C# lambda 表达式](http://msdn.microsoft.com/en-us/library/bb397687.aspx)来模拟 javascript 的函数传递），则更改将不适用于输出文件：

```
FileStream doc = File.Open(/*same html file*/);

CQ dom = CQ.Create(doc);                  // $dom = $(document);
CQ images = dom.Select("img");            // $images = $('img');
images.Each( (element) => {               // $images.each( function(){
  CQ cqElement = CQ.Create(element);      //   $element = $(this);
  cqElement.Attr("src","#");              //   $element.attr('src','#');
  Messagebox.Show(cqElement.Attr("src")); //   alert($element.attr('src'));
});                                       // });

dom.Save(/*Output path*/); // No jQuery equivalent, this just saves the file. 
```

尽管 Messabox 为我的 DOM 中的每个图像都显示了“#”（这意味着`cqElement`得到了更改），但输出文件没有得到更改。

我认为导致问题的关键在于`CQ cqElement = CQ.Create(element);`它创建了一个全新的 CsQuery 对象。事实上，如果在第一个 Messagebox 之后我弹出另一个像下面这样的，它**不会**对`cqElement`

```
Messagebox.Show(dom.Html()); // alert($dom.html()); 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-09T19:45:50.547

你是绝对正确的：`CQ cqElement = CQ.Create(element)`是问题所在。这是 CsQuery 和 jQuery 之间最显着区别的核心。使用 jQuery，只有一个 DOM。使用 CsQuery，没有浏览器，因此可以有任意数量的不同 DOM。每次使用`Create`它都是一个全新的 DOM；而 jQuery 方法/选择器返回一个`CQ`绑定到同一个 DOM 的新对象。

将 DOM 元素“包装”为`CQ`对象 的正确方法`$(element)`是 with`new`和 not `Create`，例如

```
CQ cqElement = new CQ(element); 
```

还有一个快捷方式是一种方法`IDomObject`：

```
CQ cqElement = element.Cq(); 
```

这些将元素保持在同一个 DOM 中。这些`Create`方法总是产生一个新的 DOM，当从元素创建时，实际上是*克隆*它们，因此原始 DOM 不受影响。（元素只能属于一个 DOM；如果您要创建两个不同的 DOM 并使用类似的方法将元素从一个添加到另一个`Append`，它们将从源中删除。`Create`自动克隆它们。）。

我相信这可以在文档中更清楚地说明:)

# javascript - 如何检查值是否在对象列表中？

> ID：14244969
> 
> 赞同：-1
> 
> 时间：2013-01-09T19:32:00.370
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 Javascript 中的多维对象/数组中查找值？](https://stackoverflow.com/questions/5181493/how-to-find-a-value-in-a-multidimensional-object-array-in-javascript)

我在一个数组中有这些 JavaScript 对象：

```
[{"id": 3}, {"id": 32}, {"id": 33}, {"id": 34}] 
```

如何执行这样的 IF 语句：

```
list = [3,32,33,34]
if x in list:
    "in the list!"
else:
    "not in the list" 
```

如何使用 jQuery/Javascript 做到这一点？

有什么线索吗？

* * *

编辑：

这是一个 JSON 输出：

```
[{"id": 3}, {"id": 32}, {"id": 33}, {"id": 34}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:36:46.257

**注意：**没有诸如 JSON 对象之类的东西。这些是 JavaScript 对象。JSON 是 JavaScript 的子集。

如果对象的布局是您举例说明的方式：

```
function hasVal(obj, val) {
    for(var i = 0, len = obj.length; i < len; i ++) {
        for(var key in obj[i]) {
             if(obj[i][key] == val) return true;
        }
    }
    return false;
} 
```

然后这样称呼它：

```
var obj = [{"id": 3}, {"id": 32}, {"id": 33}, {"id": 34}];
hasVal(obj, 32); //returns true
hasVal(obj, 10); //returns false 
```

# c++ - Ubuntu下没有libmongoclient.a

> ID：14244974
> 
> 赞同：1
> 
> 时间：2013-01-09T19:32:18.413
> 
> 标签：c++, mongodb, ubuntu, scons

我正在尝试使用 C++ 在 Ubuntu 下连接到 mongodb。

我已经下载了 2.2.0 版本的 mongodb 源代码，并按照文档中的说明使用 scons 构建。但是在构建之后我看不到 libmongoclient.a。看起来它没有构建或类似的东西。在构建 mongoclient.lib 可用后，我在 windows 7 下做了同样的事情，一切正常，但在 Ubuntu 下的相同步骤似乎不起作用。

仅构建 CXX 驱动程序也不起作用，在运行 scons 命令后，它会询问不存在的 boost 线程文件，但我提供了带有 --extrapath 的路径。

有人可以帮我在 Ubuntu 下构建 libmongoclient.a 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T19:51:01.723

scons mongoclient 应该构建“libmongoclient.a”。

非常感谢斯坦尼的帮助

# regex - 正则表达式 NOT 或排除匹配

> ID：14244979
> 
> 赞同：0
> 
> 时间：2013-01-09T19:32:38.127
> 
> 标签：regex, regex-negation

如何使正则表达式匹配并排除某些字符。例如，我正在为所有国家的 TDL 匹配做一个正则表达式。

```
[a-z]{1,}((?!.ru)|.kr|.lt|.cn|.uk|.id|) 
```

或者

```
[a-z]{1,}.([a-z]{1,}) 
```

gsdfg.ru <- 这应该匹配

sgkjsr.us <- 只有 .us 不应匹配或应排除

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-09T20:17:40.253

这应该有效（黑名单）：

```
\.(?!us|eu)[a-z]{2}$ 
```

它搜索一个点 ( `\.`)，它后面没有`us`或`eu`( `(?!us|eu)`)，后面跟着两个小写字母 ( `[a-z]{2}`)，就在字符串 ( `$`) 的末尾。

这也应该有效（白名单）：

```
\.(?:ru|kr|cn|uk|id)$ 
```

它搜索一个点 ( )，然后在字符串 ( )的末尾`\.`紧跟一个`ru`, `kr`... 或, 。我使用而不是简单的，这样该组就不会创建捕获。如果您确实需要为以后的用户捕获国家代码，请随意删除该部分。`id``$``(?:...)``(...)``?:`

# android - 确定主屏幕的 appwidgets 空间网格大小

> ID：14244984
> 
> 赞同：3
> 
> 时间：2013-01-09T19:32:53.477
> 
> 标签：android, android-appwidget

我为平板电脑开发了一个可调整大小的应用程序小部件。应用程序小部件在大多数带有大多数启动器的设备上运行良好，但是方向存在一些问题，尤其是在纵向模式下的 GO-HD 启动器上。app-widget 的高度太大，看起来不太好。

为了解决这个问题，我创建了一个方法，允许用户在应用程序小部件空间中设置任何额外的边距，他想让它看起来不错。例如，当设备处于纵向模式时，他可以设置额外的 20 像素上边距，而在横向模式下，他只能设置 5 像素等。

现在我正在创建一个活动以允许用户设置边距。我想制作一个小的预览区域（它将是一个线性布局，具有相同的背景可绘制应用小部件），以便用户了解应用小部件在具有这些边距的主屏幕上的外观. 实际上我已经做到了，但结果与现实相去甚远。

所以我的问题是：

有没有办法获得启动器应用程序用于将应用程序小部件放置在主屏幕上的网格单元的大小（或接近它）？请注意，我知道并非所有启动器都遵循 Android 公式，但我想要的是获得一种方法来计算它的近似值。

**- - 编辑 - -**

为了更好地理解我的问题，我创建了一个屏幕截图：

![射击](../Images/2f6238c669a492bd6cf050cb0a37268a.png)

首先，app-widget 的背景是一个形状 xml 文件，根本没有图形或尺寸。在可用空间中绘制它取决于 Android。在我看来，这是最好的 GUI 设计（至少有背景）。现在在屏幕 1 中，您可以在默认的 Android 启动器中看到纵向模式的小部件，它看起来非常漂亮，并且可以重新调整大小。在屏幕 2 和 3 中，您可以在 GO-HD 启动器（横向和纵向模式）中看到它，在此启动器中，它在横向模式下看起来非常小，在纵向模式下看起来非常大。我可以通过让用户调整页边距来解决这个问题，如屏幕 4 所示。

如果您将预览（屏幕 4 中央的黑暗区域）与 android 默认启动器中的原始 app-widget 进行比较，您会发现没有很好的匹配。我要问的是如何向用户呈现更好的预览（最接近实际的应用程序小部件）。

谢谢，请原谅我的英语

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-01T06:40:11.487

你实施了`AppWidgetProvider.onAppWidgetOptionsChanged(Context, AppWidgetManager, int, Bundle)`吗？所有表现良好的启动器都应报告有关您放置的小部件的一些指标，您可以使用以下代码从包中检索这些指标：

```
int minwidth_dp = bundle.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_WIDTH);
int maxwidth_dp = bundle.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_WIDTH);
int minheight_dp = bundle.getInt(AppWidgetManager.OPTION_APPWIDGET_MIN_HEIGHT);
int maxheight_dp = bundle.getInt(AppWidgetManager.OPTION_APPWIDGET_MAX_HEIGHT); 
```

请注意，这里没有单元格的概念 - 这些指标对应于小部件的实际大小，无论它占用多少单元格。

库存启动器将这些映射到不同的方向，如下所示：

> minwidth -> 纵向宽度
> minheight -> 横向高度
> maxwidth -> 横向宽度
> maxheight -> 纵向高度

任何在两个方向上保持相同数量的行和列并且调整单元格大小以适应屏幕的启动器都应该以相同的方式映射它们。请注意，假设这些关系始终成立，如果您嵌入的启动器对其小部件做了一些不寻常的事情 - 仅将它们放置在屏幕的一部分，或者在不同方向使用不同数量的行或列，则可能会产生不希望的结果。

或者，一些启动器可能会以最小值和最大值报告当前方向的指标，并在方向改变时再次调用新指标。但是，如果您只对当前方向感兴趣，这些发射器的行为与股票发射器的行为兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-04T15:32:17.103

我知道已经有一段时间了，但我刚刚对我的另一个答案投了赞成票，所以我有机会用新的眼光来看看这个。

我认为原始问题的真正答案可能是自己设置小部件的大小，或者可能只是高度，因为这似乎是屏幕截图中的问题。在您的布局集中`layout_height="@dimen/my_perfect_height"`，启动器会将其置于单元格中。如果您需要一点灵活性，您可以使用一些具有不同指标的不同布局，并让用户在它们之间进行选择。当然，您可以毫无问题地预览该高度，因为您是设置它的人。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-11T01:12:10.060

> 有没有办法获得启动器应用程序用于将应用程序小部件放置在主屏幕上的网格单元的大小（或接近它）？

不可以。欢迎每个主屏幕开发人员做他们想做的事情。

> 在这个启动器中，它在横向模式下看起来很小，在纵向模式下看起来很大

然后想出一个适合这些尺寸的设计。例如，您可能会查看其他应用小部件在该主屏幕上运行时的作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-12T02:32:21.510

我不知道如何进行可靠的预览，但根据方向使用不同的边距可能会有所帮助。您可以使用 layout-land 和 layout-port 来指定具有不同边距的不同布局。

# django - 与 Django 一起使用时无法加载 require.config 依赖项

> ID：14244985
> 
> 赞同：1
> 
> 时间：2013-01-09T19:32:57.137
> 
> 标签：django, requirejs

我在一个项目中使用 Backbone 和 Django。最初我想在整个站点中使用 Backbone 视图来呈现我的 HTML 内容，但是，有一个 CRUD 页面需要文件上传和其他东西，所以我决定使用 Django 来呈现站点。

现在，由于表单位于 url /item/article/new (http://localhost/item/article/new/)，当我加载页面时，无法找到配置中所述的 requirejs 依赖项.js 文件。为了清楚起见，require.js 脚本标签是这样的：

```
<script src="{{ STATIC_URL }}js/libs/require/require-jquery.min.js" data-main="{{ STATIC_URL }}js/config"></script> 
```

我的 config.js 文件：

```
require.config({

  // Set base url for paths to reference
  baseUrl: 'static/js',

  // Initialize the application with the main application file.
  deps: ['main'],
  paths: {
    jquery: 'libs/require/require-jquery.min',
    ...
    ...
  }
}) 
```

现在，由于我的 baseUrl 设置为 static/js，当我导航到 /item/article/new 时，它抱怨它找不到`http://localhost/item/article/new/static/js/main.js`.

我需要做什么来解决这个问题？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-10T15:30:30.933

尝试在您的 baseUrl 开头添加正斜杠`/static/js`

# sql - Rails update_attributes 尝试插入 id 列

> ID：14244988
> 
> 赞同：1
> 
> 时间：2013-01-09T19:33:03.520
> 
> 标签：sql, ruby-on-rails, insert, primary-key, rails-activerecord

我有一个模型：

```
class MyModel < ActiveRecord::Base
  has_many :other_things
  accepts_nested_attributes_for :other_things
  attr_accessible :other_things_attributes
end

class OtherThing < ActiveRecord::Base
  belongs_to :my_model
  attr_accessible :foo
end 
```

当尝试在 MyModel 实例上更新属性时，Rails/ActiveRecord 尝试将 null 插入 id 列：

```
my_instance = MyModel.first
my_instance.update_attributes({
  "other_things_attributes"=> {
    "1357758179583" => {"foo"=>"bar", "_destroy"=>"false"},
    "1357758184445" => {"foo"=>"thing", "_destroy"=>"false"}
  }
}) 
```

那失败了，有：

```
 SQL (0.5ms)  INSERT INTO "other_things" ("created_at", "my_model_id", "id", "updated_at", "foo") VALUES ($1, $2, $3, $4, $5)  [["created_at", Wed, 09 Jan 2013 14:30:33 EST -05:00], ["my_model_id", 8761], ["id", nil], ["updated_at", Wed, 09 Jan 2013 14:30:33 EST -05:00], ["foo", "bar"]]
   (0.1ms)  ROLLBACK 
ActiveRecord::StatementInvalid: PGError: ERROR:  null value in column "id" violates not-null constraint
: INSERT INTO "other_things" ("created_at", "my_model_id", "id", "updated_at", "foo") VALUES ($1, $2, $3, $4, $5) 
```

显示 other_things 的架构：

```
 create_table "other_things", :force => true do |t|
    t.string   "foo"
    t.integer  "my_model_id"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end 
```

这没有显示主键约束（或缺少主键约束），这是根本问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T20:17:38.463

这是由于不知何故丢失了 other_things 表上的主键规范。我之所以确定这一点，是因为我必须将实例（暂存和生产）分开，其中一个工作但不能工作另一个；在比较了代码和 Rails 相关问题之后，我决定比较 DB 模式，这表明我缺少主键约束。显然，Rails 使用主键来识别正确的列；直观上是显而易见的，但在我看来，如果你还不知道的话。感谢您的评论！

```
ALTER TABLE ONLY other_things ADD CONSTRAINT other_things_pkey PRIMARY KEY (id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T13:42:36.583

有类似的问题，我通过使用 update_columns 而不是 update_attributes 解决了。希望它会帮助某人。:)

# php - 每个查询都需要准备好的语句吗？

> ID：14244989
> 
> 赞同：0
> 
> 时间：2013-01-09T19:33:05.857
> 
> 标签：php, pdo

```
$query = "SELECT 1 FROM users WHERE username = :username";
$query_params = array(':username' => $_POST['username']);
try
{
$stmt = $db->prepare($query);
$result = $stmt->execute($query_params);
}
catch(PDOException $ex)
{
die("Failed to run query: " . $ex->getMessage());
}

$row = $stmt->fetch();
if($row)
{
die("This username is already in use");
} 
```

这一切都有效，但是：

1.  如果查询只是`SELECT`or ，我真的需要准备好的语句`SELECT COUNT`吗？
    因为，如果`INSERT / UPDATE / DELETE`表上没有任何操作 - 我想没有 sql 注入或垃圾邮件的危险？

2.  `try/catch`每次去数据库时我真的需要声明吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-09T19:36:17.680

如果您在查询中放入了用户可以以任何方式更改的任何变量，则您应该（必须）使用准备好的语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-09T19:36:40.707

即使在 SELECT 语句上也总是存在 SQL 注入的危险，因为有人可以终止 SELECT 并在用户名中附加 INSERT 语句。但是，如果您使用 mysql_real_escape_string() 或者您的数据库类为您转义了您的值，那么您不必担心 SELECT 语句上的 try/catch。如果你已经转义了你的值，这对你的 SQL 来说就足够了：

```
$username = mysql_real_escape_string($username); // escape the string first.
$query = "SELECT 1 FROM users WHERE username = '$username'"; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-09T19:37:16.870

1）不，您不必使用准备好的语句；您可以使用例如 PDO::query 和 PDO::quote 来构建使用字符串连接的查询。但是——是的，任何时候你使用外部提供的字符串，都存在 SQL 注入造成损坏的风险，即使你只是在做一个 SELECT。例如，攻击者可以尝试使用“;”在一个语句中运行两个语句。在提供的字符串中。PDO::quote 是防止这种情况的另一种方法。

2）您可以从调用代码中抛出错误，但在某些地方您必须考虑错误处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-09T19:38:37.900

就与数据库的连接而言，这是您需要的唯一方法。尝试并抓住：（如果您使用的是 MySql 数据库）

```
try {
    $conn = new PDO('mysql:host=localhost;dbname=DBNAME', 'USER', 'PASS', array(PDO::ATTR_EMULATE_PREPARES => false, PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION));
} catch(PDOException $e) {
    echo 'ERROR: ' . $e->getMessage();
} 
```

另外，还有一个内置的计数查询：

`$affected_rows = $stmt->rowCount();`

这是一个很好的教程，如果你不知道的话

[http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)

# .net - 无法通过 TCP 网络流写入

> ID：14244993
> 
> 赞同：0
> 
> 时间：2013-01-09T19:33:28.590
> 
> 标签：.net, vb.net, tcpclient, networkstream

当我尝试通过网络流写入时遇到问题。

当我在这里按下这个按钮时，我可以成功写入 tcp 流并且程序的另一部分成功接收数据。

```
Dim ClientSocket As TcpClient

Private Sub btnConnect_MouseClick(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles btnConnect.MouseClick

          ClientSocket = New TcpClient

          ClientSocket.Connect(frmNetworkSettings.txtServerIPAddress.Text, CInt(frmNetworkSettings.txtFileSharingPort.Text))

          Dim NetworkStream As NetworkStream = ClientSocket.GetStream()

          If NetworkStream.CanRead And NetworkStream.CanWrite Then

                 Dim SentData As Byte()

                 SentData = Encoding.ASCII.GetBytes(Username & Chr(32) & "is connected." & Environment.NewLine)

                 NetworkStream.Write(SentData, 0, SentData.Length())

                 NetworkStream.Flush()

          End If

End Sub 
```

但是当我按下下面这个按钮时，按下上面的按钮后，我无法在tcp网络流上写入，并且网络上的其他程序没有接收到数据。

```
Private Sub btnDisconnect_MouseClick(sender As Object, e As System.Windows.Forms.MouseEventArgs) Handles btnDisconnect.MouseClick

         Dim NetworkStream As NetworkStream = ClientSocket.GetStream()

         If NetworkStream.CanRead And NetworkStream.CanWrite Then

                Dim SentData As Byte()

                SentData = Encoding.ASCII.GetBytes(Username & Chr(32) & "is disconnected." & Environment.NewLine)

                NetworkStream.Write(SentData, 0, SentData.Length())

                NetworkStream.Flush()

         End If

End Sub 
```

**额外细节：**

这是在其他程序上接收数据的部分。

```
Private Sub ConnectionTimer_Tick(sender As Object, e As System.EventArgs) Handles ConnectionTimer.Tick

    Try

        If Listener.Pending Then

            ClientSocket = Listener.AcceptTcpClient

            Dim ByteData(ClientSocket.ReceiveBufferSize) As Byte

            Dim NetworkStream As NetworkStream = ClientSocket.GetStream

            Dim LogMessage As String = String.Empty

            NetworkStream.Read(ByteData, 0, CInt(ClientSocket.ReceiveBufferSize))

            LogMessage = Encoding.ASCII.GetString(ByteData)

            DisplayLogMessage(LogMessage)

        End If

    Catch ex As Exception

        MessageBox.Show(ex.Message, "Message", MessageBoxButtons.OK, MessageBoxIcon.Information)

    End Try

End Sub 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T04:24:13.123

我解决了这个问题。这是因为我仅在建立连接期间才读取网络流。建立连接后，我应该修改我的代码以读取网络流。

# java - 后期绑定？场与财产。自我与静态

> ID：14244995
> 
> 赞同：3
> 
> 时间：2013-01-09T19:33:38.907
> 
> 标签：java

这件事困扰了我很长时间，所以我想我会继续问。

如果我写

```
import java.util.*;
import java.lang.*;

class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
            new Shape();
            new Triangle();
    }

    public static class Shape
    {
            static String name = "shape";

            Shape()
            {
                    printName();
            }

            public void printName()
            {
                    System.out.println( name() );
            }

            public String name()
            {
                    return name;
            }
    }

    public static class Triangle extends Shape
    {
            static String name = "triangle";

            public String name()
            {
                    return name;
            }
    }
} 
```

那么输出是

```
shape
triangle 
```

但如果我写

```
import java.util.*;
import java.lang.*;

class Main
{
    public static void main (String[] args) throws java.lang.Exception
    {
            new Shape();
            new Triangle();
    }

    public static class Shape
    {
            static String name = "shape";

            Shape()
            {
                    printName();
            }

            public void printName()
            {
                    System.out.println( name );
            }

    }

    public static class Triangle extends Shape
    {
            static String name = "triangle";
    }
} 
```

那么输出是

```
shape
shape 
```

在第一个版本中，我必须将相同的函数 getName() 一遍又一遍地复制/粘贴到每个子类中。必须有更好的方法。在第二个示例中我需要更改什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-09T19:35:33.933

父类无法访问静态字段。该类`Shape`没有“看到”`name`该类的静态字段`Triangle`并使用他自己的静态字段`name`。

**UPD：**你问：在第二个例子中你需要改变什么？更具体地说，您的第一个示例是对第二个示例的正确“修复”。唯一正确的方法是使用一些 getter 方法，比如你的`name()`方法。

**UPD2：（**来自我的评论）：嗯，另一种方式：原谅任何类型的领域`name`。改用一个名为`name()`（不是静态的！）的方法，它将在每个类中返回所需的名称。只是`return "shape";`或`return "triangle"`在他们之中；

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-09T20:10:34.567

好吧，我已经以否定的方式回答了这个问题。但作为一种笑话和有趣的解决方案（**这将起作用！！！**），您可以将您的`printName()`方法更改为这个：

```
public void printName() throws NoSuchFieldException, IllegalAccessException {
    System.out.println((String)(this.getClass().getDeclaredField("name").get(this)));
} 
```

这只是一个更改，您必须在**第二个**示例中执行此更改才能获得输出

```
shape
triangle 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T20:03:19.297

这很好地说明了 Java 如何将名称解析为值。您有两个变量称为`name`，一个 in`Shape`和一个 in `Triangle`。即使`Triangle`是`Shape` *这些完全不相关的变量*的子类。这是因为它们是静态的。静态事物永远不会覆盖，因为它们属于类，而不是对象。在`Shape`中，当您提到 时`name`，这实际上是 的简写`Shape.name`。同样，在 中`Triangle`，`name`表示`Triangle.name`。同*一个符号代表**不同作用域*的不同*变量*。

 *在这段代码中：

```
public class Shape {
    static String name = "shape";

    public static void main(String[] args) {
        System.out.println(name);
    }
}

class Colour {
    static String name = "colour";
} 
```

你不会想到输出会是“颜色”，对吗？这正是您显示的代码中的情况。两个类之间的继承关系简直就是一条红鲱鱼。

如果您希望名称是多态的，那么您唯一的选择是使用实例方法，因为实例方法是唯一可以多态的东西。最简洁的方法是将常量内联到方法中：

```
class Main {

    public static void main(String[] args) {
        new Shape();
        new Triangle();
    }

    public static class Shape {
        Shape() {
            printName();
        }

        public void printName() {
            System.out.println(name());
        }

        public String name() {
            return "shape";
        }
    }

    public static class Triangle extends Shape {
        @Override
        public String name() {
            return "triangle";
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-09T20:14:53.323

您可以使用 final 字段并将其设置在构造函数中，但恕我直言，最好覆盖 getter。

```
public static class Shape
{
        protected final String name;

        public Shape()
        {
                this("shape");
        }

        protected Shape(String name)
        {
                this.name = name;
        }

        public void printName()
        {
                System.out.println( name() );
        }

        public String name()
        {
                return name;
        }
}

public static class Triangle extends Shape
{
        public Triangle()
        {
               super("triangle");
        }
} 
```*

# python - Python - 将空格写入导入的 CSV 数据

> ID：14244996
> 
> 赞同：0
> 
> 时间：2013-01-09T19:33:50.700
> 
> 标签：python, csv, whitespace, human-readable

我想要：

1.  将 CSV 格式的数据导入 python 列表/数组

2.  右对齐字符串的 8 个空格字段

3.  将输出写入文本文件

比如我想转csv数据如：

```
11111, 22,

333, 4444 
```

进入：

```
 11111      22

     333    4444 
```

我的代码目前看起来像：

```
import csv

input_file = "csv_file.csv"
my_data = csv.reader(open(input_file, "rb"), delimiter=',')

for i,j in my_data:
    x = ('%-15s %s\n' % (i,j))

with open('my_output.txt', 'w') as file:
    file.writelines(x) 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:37:47.627

我会`rjust`单独每个元素和`''.join`它们：

```
''.join(elem.rjust(8) for elem in (i,j)) 
```

或者把它全部写出来：

```
def join_line(line_iter):
    """
    Take a iterable containing strings and right justify each 
    at 8 spaces before joining
    """
    return ''.join(elem.rjust(8) for elem in line_iter)

with open('output','w') as f:
    f.writelines((join_line(row)+'\n') for row in csv_file) 
```

# android - 在 Android 上与 Facebook 共享图像和文本

> ID：14244998
> 
> 赞同：38
> 
> 时间：2013-01-09T19:33:58.143
> 
> 标签：android, facebook, android-intent, sharing

Facebook，为什么你不在分享意图中拍摄图像和文字？

![在此处输入图像描述](../Images/d889625350607313315d06a1fdfd470f.png)

我正在尝试使用标准的 Android 共享意图来共享图像和一些文本。我的分享意图设置正确，我已经在其中获得了图像，并且我已经完成了交易。我的代码，让我给你看：

```
public void doShare() {
    File image = getShareFile();
    Intent shareIntent = new Intent();
    shareIntent.setAction(Intent.ACTION_SEND);
    shareIntent.setType("*/*");
    shareIntent.putExtra(Intent.EXTRA_SUBJECT, resultObject.getShareSubject());
    shareIntent.putExtra(Intent.EXTRA_TEXT, resultObject.getShareText());
    shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(image));
    shareActionProvider.setShareIntent(shareIntent);
} 
```

Facebook 出现在将处理我的 Intent 的应用程序列表中，但它存在！！！当点击 Facebook 进行实际分享时，它会说：

> 请仅附上照片或单个视频。

为什么是 Facebook，为什么？为什么你显示为一个可以处理我的 Intent 的应用程序，然后通过不处理 Intent 让我在我的用户看来很愚蠢？你答应脸书。

我在这个网站和网络上看到了很多关于这个的主题。有没有人在不使用他们的 API 的情况下让它工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T10:07:30.820

为什么？因为他们是 Facebook 并且可以允许自己出现这样的错误。因此，他们希望类型上的图像只有“image/ *”。如果类型是“text/plain”，那么消息中应该包含一个 URL。不要使用 .setType("* /*"); 否则使用他们的 SDK。但在这种情况下，您将牺牲应用程序的简单性和灵活性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-17T08:56:51.427

解决以下突出问题。

> `Please attach only photos or a single video.`
> 
> `Facebook isn't in the Share option Dialog`
> 
> `even if Facebook wall appears, then it won't let you open your image on the front page.`
> 
> `Share an image on Facebook without using Facebook SDK`

经过三天的不断寻找，我很幸运。抱歉，答案可能很长，因为我在 StackOverflow 上找不到可以**在不使用 Facebook SDK 的情况下在 Facebook 上共享图像的解决方案。**

这是完整而完美的解决方案：

```
Bitmap bitmap = viewToBitmap(load your image OR layout background for your imageView);
shareImage(bitmap, "com.facebook.katana"); 
```

第一个参数是加载到位图中的图像的 imageView/layout。第二个参数是 facebook 的包名。

然后编码以下方法，如图所示。

```
public void shareImage(Bitmap bitmap, String packageName) {
        try {
            File file = new File(this.getExternalCacheDir(), "temp.png");
            FileOutputStream fileOutputStream = new FileOutputStream(file);
            bitmap.compress(Bitmap.CompressFormat.PNG, 95, fileOutputStream);
            fileOutputStream.flush();
            fileOutputStream.close();
            file.setReadable(true, false);
            final Intent intent = new Intent(android.content.Intent.ACTION_SEND);
            intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
            intent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(file));
            intent.setType("image/*");
            intent.setPackage(packageName);
            startActivity(Intent.createChooser(intent, "Share image on facebook"));
        } catch (Exception e) {
            Log.e(TAG, e.toString());
            Toast.makeText(this, "Error while sharing Image on Facebook", Toast.LENGTH_SHORT).show();
        }
    } 
```

这是我的应用截图：

[1](https://i.stack.imgur.com/bmCBU.png) . “Quote book App”正在加载带有报价的图片。

[2](https://i.stack.imgur.com/MfRCb.png) . 单击共享按钮，然后从对话框中单击 Facebook。

[3](https://i.stack.imgur.com/6Me64.png) . 出现 Facebook 共享选项对话框。

[4](https://i.stack.imgur.com/EZC4A.png) . 图片加载到 Facebook 首页。

[5](https://i.stack.imgur.com/1f7ve.png) . 最后，图像在 Facebook 上共享，并且该方法按我们预期的方式正常工作。

PS：您可以在我的应用程序中查看此功能，这是从 google play 商店下载[的链接。](https://l.facebook.com/l.php?u=https%3A%2F%2Fplay.google.com%2Fstore%2Fapps%2Fdetails%3Fid%3Dcom.quotebook.android&h=AT088H_GrB-8-AGb9d3mlimSpenqxT8UvB2tSSfM8_rOkCGYbQEAzRFe-AuPtuddtNrh3LRZgK0AAd_6AdkM1L5oeCOcH1bKscMfUPN0olHhwNLvxu5XcR6VMYwDqVS0fpNbXw)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-12T12:17:45.033

只有一种解决方案可以使用画布创建文本和图像的位图并在 facebook 上共享。（[在这里下载源代码](https://deepshikhapuri.wordpress.com/2016/12/12/share-image-and-text-on-facebook-using-intent-in-android/)）

**这是我的代码：**

**活动主**

```
 <RelativeLayout android:layout_width="match_parent"
 android:layout_height="match_parent"
 android:background="#ffffff"
xmlns:android="http://schemas.android.com/apk/res/android">

<EditText
    android:id="@+id/et_text"
    android:layout_width="match_parent"
    android:textSize="15dp"
    android:layout_height="45dp"
    android:layout_marginTop="10dp"
    android:background="@drawable/edittext_drawable"
    android:hint="Enter your text"
    android:layout_marginLeft="10dp"
    android:layout_marginRight="10dp"
    android:paddingRight="10dp"
    android:inputType="text"
    android:imeOptions="actionDone"
    android:paddingLeft="10dp"
    android:singleLine="true"
    android:textColorHint="#979797" />

<RelativeLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:id="@+id/rl_main"
    android:background="#ffffff"
    android:layout_below="@+id/et_text"
    android:layout_above="@+id/tv_share">

    <ImageView
        android:layout_width="match_parent"
        android:layout_height="250dp"
        android:src="@drawable/index"
        android:scaleType="fitXY"
        android:id="@+id/iv_image"
        android:layout_marginTop="10dp"
        />

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textSize="15dp"
        android:id="@+id/tv_text"
        android:layout_below="@+id/iv_image"
        android:layout_margin="10dp"
        android:textColor="#000000"
        android:maxLines="5"
        />

</RelativeLayout>

<TextView
    android:id="@+id/tv_share"
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:background="#F38D0A"
    android:gravity="center"
    android:padding="10dp"
    android:layout_margin="10dp"
    android:text="Share"
    android:textColor="#ffffff"
    android:textSize="15dp"
    android:layout_alignParentBottom="true"/>

</RelativeLayout> 
```

**MainActivity.java**

```
package com.shareimage;

import android.content.Intent;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.net.Uri;
import android.support.v7.app.AppCompatActivity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.RelativeLayout;
import android.widget.TextView;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;

public class MainActivity extends AppCompatActivity implements View.OnClickListener {
EditText et_text;
ImageView iv_image;
TextView tv_share,tv_text;
RelativeLayout rl_main;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    init();

}

private void init(){
    et_text = (EditText)findViewById(R.id.et_text);
    iv_image = (ImageView)findViewById(R.id.iv_image);
    tv_share = (TextView)findViewById(R.id.tv_share);
    rl_main = (RelativeLayout)findViewById(R.id.rl_main);
    tv_text= (TextView) findViewById(R.id.tv_text);

    File dir = new File("/sdcard/Testing/");
    try {
        if (dir.mkdir()) {
            System.out.println("Directory created");
        } else {
            System.out.println("Directory is not created");
        }
    } catch (Exception e) {
        e.printStackTrace();
    }

    tv_share.setOnClickListener(this);

    et_text.addTextChangedListener(new TextWatcher() {
        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {

        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {

        }

        @Override
        public void afterTextChanged(Editable s) {
            tv_text.setText(et_text.getText().toString());

        }
    });

}

@Override
public void onClick(View v) {

    switch (v.getId()){
        case R.id.tv_share:
            Bitmap bitmap1 = loadBitmapFromView(rl_main, rl_main.getWidth(), rl_main.getHeight());
            saveBitmap(bitmap1);
            String str_screenshot = "/sdcard/Testing/"+"testing" + ".jpg";

            fn_share(str_screenshot);
            break;
    }

}

public void saveBitmap(Bitmap bitmap) {
    File imagePath = new File("/sdcard/Testing/"+"testing" + ".jpg");
    FileOutputStream fos;
    try {
        fos = new FileOutputStream(imagePath);
        bitmap.compress(Bitmap.CompressFormat.PNG, 100, fos);
        fos.flush();
        fos.close();

        Log.e("ImageSave", "Saveimage");
    } catch (FileNotFoundException e) {
        Log.e("GREC", e.getMessage(), e);
    } catch (IOException e) {
        Log.e("GREC", e.getMessage(), e);
    }
}

public static Bitmap loadBitmapFromView(View v, int width, int height) {
    Bitmap b = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(b);
    v.draw(c);

    return b;
}

public void fn_share(String path) {

    File file = new File("/mnt/" + path);

    Bitmap bmp = BitmapFactory.decodeFile(file.getAbsolutePath());
    Uri uri = Uri.fromFile(file);
    Intent intent = new Intent(Intent.ACTION_SEND);
    intent.setType("image/*");
    intent.putExtra(Intent.EXTRA_STREAM, uri);

    startActivity(Intent.createChooser(intent, "Share Image"));

}
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-07-07T10:30:56.590

```
File image = getShareFile(); // name of files

Intent shareIntent = new Intent();

shareIntent.setAction(Intent.ACTION_SEND);

shareIntent.setType("*/*");

shareIntent.putExtra(Intent.EXTRA_SUBJECT, resultObject.getShareSubject());

shareIntent.putExtra(Intent.EXTRA_TEXT, resultObject.getShareText()); // sharing text 

shareIntent.putExtra(Intent.EXTRA_STREAM, Uri.fromFile(image)); // sharing image 

shareActionProvider.setShareIntent(shareIntent); 
```