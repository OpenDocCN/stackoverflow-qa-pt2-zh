# StackOverflow 问答 13208000-13208999

# apache-flex - Adobe Flex ToggleSwitch 桌面应用程序的替代品

> ID：13208004
> 
> 赞同：1
> 
> 时间：2012-11-03T09:54:30.250
> 
> 标签：apache-flex, air

我正在为我正在开发的 Adob​​e Flex 桌面应用程序寻找 ToggleSwitch 替代方案。

参考：- [http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb70-30e3f7e3131b54bf0ee-8000.html](http://help.adobe.com/en_US/flex/mobileapps/WS7dd5c1363434bb70-30e3f7e3131b54bf0ee-8000.html)

此功能已针对移动开发发布，但我找不到为桌面环境构建/拥有此类功能的替代方法。最接近的替代品是 ToggleButton（它在功能上是相同的，但它看起来与 ToggleSwitch 没有任何相似之处。

非常感谢您对此的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T19:00:54.757

找到了解决方案：-

[http://yonaskolb.com/blog/2012/1/18/flex-toggle-switch-spark-skin.html](http://yonaskolb.com/blog/2012/1/18/flex-toggle-switch-spark-skin.html)

Adobe 还没有为桌面主题发布这个，所以需要使用移动组件（通过将它们包含在构建路径中）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:37:16.127

我没有看到用于非空中应用程序的 ToggleSwitch，但您可以通过使用两个按钮状态作为图像进行所有者绘制来轻松模拟它：http: [//blog.flexexamples.com/2009/02/11/styling -特定状态在-一个-fxtogglebutton-control-in-flex-gumbo/](http://blog.flexexamples.com/2009/02/11/styling-specific-states-in-an-fxtogglebutton-control-in-flex-gumbo/)

# mysql - 如何从多个表中选择值

> ID：13208014
> 
> 赞同：-1
> 
> 时间：2012-11-03T09:55:36.010
> 
> 标签：mysql, sql

我正在尝试获取所有用户输入都相同的行，但我正在尝试从多个表中获取值。

```
$query=
"SELECT * 
 FROM (client OR agent OR admin) 
 WHERE (first='".$mysqli->real_escape_string($_SESSION['first'])."' 
    AND last='".$mysqli->real_escape_string($_SESSION['last'])."' 
    AND password='".$mysqli->real_escape_string($_SESSION['pass'])."')"; 
```

有什么办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:17:45.270

```
<?php
$first = $mysqli->real_escape_string($_SESSION['first']);
$last = $mysqli->real_escape_string($_SESSION['last']);
$password = $mysqli->real_escape_string($_SESSION['pass']);

$query=
"SELECT *
 FROM client, agent, admin
 WHERE (client.first = '$fist' AND client.last = '$last' AND client.password = '$password')
 OR (agent.first = '$fist' AND agent.last = '$last' AND agent.password = '$password')
 OR (admin.first = '$fist' AND admin.last = '$last' AND admin.password = '$password')"; 
```

这是您获取数据的方式，但现在您必须检查存在哪些表数据，为此您可以使用[mysqli_fetch_field](http://www.php.net/manual/en/mysqli-result.fetch-field.php)。

顺便说一句，考虑重新组织数据库表的选项，因为客户端、代理和管理员可以存储在一个`users`带有列的表中，`type`或者`role`代表客户端、代理或管理员。这种方法称为[数据库规范化](http://en.wikipedia.org/wiki/Database_normalization)。之后，您的查询和数据获取将更加简单和快捷。

# html - HTML：td 标签中的“title”属性样式

> ID：13208018
> 
> 赞同：0
> 
> 时间：2012-11-03T09:56:11.793
> 
> 标签：html

有人能告诉我如何在 td 标签中设置“title”属性的样式吗？

我的代码如下：

```
 <td align="center" class="chaos" width="80%" >
  <a class="chaos" title="<%=trimtext%>">
<span class="chaos"><%=len(trimtext,50)%></span>
</td> 
```

我不能使用jquery。建议一些答案。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:01:14.580

你不能。小弹出窗口是操作系统原生的。

您可以使用javascript删除标题attr，然后构建一个新的div，根据标签的坐标绝对定位它并复制效果。

您不必使用 jQuery 来执行此操作，纯 JS 就可以了，但您可能会发现在 jQuery 中它更快。（即我想用 2-5 行 jQuery 来做到这一点）。

如果当您说“不能”时，您的意思是因为您不知道如何做，请投入一些时间——您将很快获得收益！

如果您说“不能”是因为您的公司不允许这样做，那么请高兴您按小时/天/月或其他方式获得报酬——您的公司希望资助开发通用库的替代方案，这很好。确保您能够使用自己开发的库，或者将其开源以确保它在许多浏览器中经过测试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T10:26:41.710

正如其他人所说，您无法设置浏览器本机提供的标题弹出窗口的样式。但是，可以使用 .css 来引用 css 中的标题内容`attr`。例如：

```
td.chaos:hover::before {
  content: attr(title);
  position: absolute;
  border: 1px solid black;
  background: yellow;
} 
```

这不会给您带来原生弹出窗口免费提供的延迟外观，但根据您的具体用例，您可能会想出一些有用的东西（也许通过使用过渡？）。

另外，请注意，这种样式不会消除本机弹出窗口，因此您最终会得到两个弹出窗口。

# java - 绝对布局——按钮居中

> ID：13208021
> 
> 赞同：4
> 
> 时间：2012-11-03T09:56:39.747
> 
> 标签：java, layout, javafx-2

我正在做一个项目，我需要让两个按钮绝对集中在场景中。我还没有找到任何内置窗格选项来完成这项工作，所以我不得不使用很多绑定。代码真的很长，我很确定有一种更简单的方法来完成这项工作。这是一个演示：[http ://screencast.com/t/pvi5WLko](http://screencast.com/t/pvi5WLko)

所以我想知道的是，是否有一种简单的方法可以做同样的事情，最好是使用内置窗格或其他东西。

无论窗口大小如何调整，我都希望按钮居中。例子：

![在此处输入图像描述](../Images/46e8a19cb3efd91a3f06b11443b6ffa4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:27:53.633

可能最简单的方法是使用 VBox：

```
public void start(final Stage stage) throws Exception {
    final Button button0 = new Button("Start learning");
    final Button button1 = new Button("Customize");

    final VBox box = new VBox();
    box.setFillWidth(true);

    box.getChildren().setAll(button0, button1);
    box.setAlignment(Pos.CENTER);

    stage.setScene(new Scene(box));
    stage.setWidth(200);
    stage.setHeight(100);
    stage.show();
} 
```

另一种可能的方法是使用 GridPane：

```
public void start(final Stage stage) throws Exception {
  final Button button0 = new Button("Start learning");
  final Button button1 = new Button("Customize");

  final GridPane cPane = new GridPane();
  cPane.getChildren().addAll(button0, button1);
  GridPane.setConstraints(button0, 0, 0, 1, 1, HPos.CENTER, VPos.CENTER);
  GridPane.setConstraints(button1, 0, 1, 1, 1, HPos.CENTER, VPos.CENTER);

  final ColumnConstraints columnn0 = new ColumnConstraints();
  columnn0.setPercentWidth(100);
  cPane.getColumnConstraints().addAll(columnn0);

  final RowConstraints row0 = new RowConstraints(1);
  row0.setPercentHeight(50);

  final RowConstraints row1 = new RowConstraints(1);
  row1.setPercentHeight(50);

  cPane.getRowConstraints().addAll(row0, row1);

  stage.setScene(new Scene(cPane));
  stage.setWidth(200);
  stage.setHeight(100);
  stage.show();
} 
```

这里的想法是配置网格中的行和列以使用相应的约束对象填充您的场景。上面定义了一列和两行。然后，您可以使用 GridPane.setConstraints(...) 在 Grid 的单元格中对齐组件。

您可能需要稍微更改代码以使顶部按钮与 VPos.BOTTOM 对齐，而下部按钮与 VPos.TOP 对齐，具体取决于您是否希望按钮粘在一起（然后您必须为两者定义一个边距，当然）。

# cuda - 使用 NVIDIA Compute Visual Profiler 时出错

> ID：13208025
> 
> 赞同：0
> 
> 时间：2012-11-03T09:57:12.617
> 
> 标签：cuda, profiler

我设法使用视觉分析器并获得了一些结果。虽然有一个应用程序我无法使用 Visual profiler 获得任何结果并得到如下错误：

```
Application ".......Release/ProjectName.exe".
Profiler data file ' 'Realease/temp_compute_profiler_0_0.csv for application run 0 not found. 
```

我这样做的方式是打开 Compute Visual Profiler，单击会话，在那里我选择 .exe 文件并将工作目录指示到`Release`文件夹。一切似乎都很好，应用程序运行了 18 次，获得了很好的结果，但在那之后我得到了我写的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T03:15:18.767

我认为您的程序中可能有诸如`getchar()`和之类的行。`system("pause")`

使用分析器时应删除这些类型的线。

# objective-c - iOS在重新加载数据后将选定背景设置为表格行？

> ID：13208038
> 
> 赞同：0
> 
> 时间：2012-11-03T09:58:51.633
> 
> 标签：objective-c, ios, uitableview

我有以下问题：我有一个 UITableView。如果单击一个单元格，则会在单元格上添加一个按钮。到目前为止没问题...但是：添加按钮后，我希望 TableView（重新加载后）选择刚刚编辑（或添加）的 TableCell。我已经尝试过这个`cellForRowAtIndexPath`方法

```
if (bool) {
[cell setSelected:YES animated:YES];
 }
    UIView *bgColorView = [[UIView alloc] init];
        [bgColorView setBackgroundColor:[UIColor colorWithRed:34/255.0 green:139/255.0 blue:34/255.0 alpha:1.0]];
        [cell setSelectedBackgroundView:bgColorView];
        [bgColorView release];
        return cell; 
```

但它没有用。任何建议或示例代码将不胜感激。谢谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:11:27.483

你为什么使用

```
[tableView reloadData]; 
```

您可以使用以下方法访问选定的单元格属性和控件，而无需重新加载数据：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

以下是一些可以帮助您的代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
     CustomTableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
     [cell.myButton setHidden:false];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T13:56:59.457

对于标准选择，您使用以下方法，在 UITableView[参考文档中描述](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html) `- (void)selectRowAtIndexPath:(NSIndexPath *)indexPath animated:(BOOL)animated scrollPosition:(UITableViewScrollPosition)scrollPosition`

如果您使用自定义单元格存储选择计数信息，您的设计可能会得到改进，这比重新加载表格并在单元格外部添加大量单元格逻辑要好得多。

# c# - 桌面应用程序gridview单元格值根据单元格值锁定交替

> ID：13208041
> 
> 赞同：0
> 
> 时间：2012-11-03T09:59:01.333
> 
> 标签：c#, sql, winforms

我有一个网格，它有 6 列（项目名称、最小数量、最大数量、最大数量、最大数量、折扣）。

**要求**

当我选择**min Quantity**时，**max Quantity 列**将禁用并且其值变为零，当我选择**min amount 时，max amout 列**将禁用，反之亦然。当我输入数量的最小值时，网格行包含第一行的最大值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:53:20.067

```
/* You can use grid's cell validating event.  
 ColMinimumQuantity, ColMaximumQuantity, ColMinimumAmount, ColMaximumAmount are grid's column name
 you can set them in Grid Properties. */

private void dataGridView1_CellValidating(object sender, DataGridViewCellValidatingEventArgs e)
{
    if (dataGridView1.CurrentCell.OwningColumn.Name.ToUpper().ToString() == "ColMaximumQuantity")
    {
        dataGridView1.CurrentRow.Cells["ColMinimumQuantity"].Value = "0";
        dataGridView1.CurrentRow.Cells["ColMaximummQuantity"].ReadOnly = false;
        dataGridView1.CurrentRow.Cells["ColMinimummQuantity"].ReadOnly = true;
    }

    if (dataGridView1.CurrentCell.OwningColumn.Name.ToUpper().ToString() == "ColMaximumAmount")
    {
        dataGridView1.CurrentRow.Cells["ColMinimumAmount"].Value = "0";
        dataGridView1.CurrentRow.Cells["ColMaximummQuantity"].ReadOnly = false;
        dataGridView1.CurrentRow.Cells["ColMinimummQuantity"].ReadOnly = true;
    }

    if (dataGridView1.CurrentCell.OwningColumn.Name.ToUpper().ToString() == "ColMinimumAmount")
    {
        dataGridView1.CurrentRow.Cells["ColMaximumAmount"].Value = "0";
        dataGridView1.CurrentRow.Cells["ColMiniimumAmount"].ReadOnly = false;
        dataGridView1.CurrentRow.Cells["ColMaximumAmount"].ReadOnly = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:00:53.697

您可以使用网格的单元格验证事件。
ColMinimumQuantity, ColMaximumQuantity, ColMinimumAmount, ColMaximumAmount 是网格的列名，您可以在网格属性中设置它们。

# c# - 如何从 .Net Window 应用程序中读取 web.config

> ID：13208042
> 
> 赞同：3
> 
> 时间：2012-11-03T09:59:02.360
> 
> 标签：c#, asp.net, winforms

我正在开发一个基于 .NET Framework 4.0 的 Windows 应用程序。
我需要将此窗口应用程序以及源代码分发给客户端。

当我测试时，我使用的是我自己的数据库凭据。
所以我想要一种方法来隐藏 app.config 细节。

为此，我尝试在 app.config 中加密值，但遇到了令牌密钥问题。
在研究它时，我发现我可以使用：

```
System.Web.Configuration.WebConfigurationManager.OpenWebConfiguration. 
```

但这又需要用户名和密码才能访问远程服务器，并且不想将它们显示给客户端。

因此，为此我计划阅读托管在 IIS 7.5 服务器上的 web.config。

你能在这种情况下帮助我吗？
或者，如果您有更好的想法来实现目标，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:03:04.737

`web.config`该代码的设计与用于从 Web 应用程序访问的常用方法在语法上非常接近。将要解析的 web.config 文件的位置传递给构造函数，然后使用 AppSettings 方法获取所需的值；

```
string filename = @"c:\temp\Web.Config"; 
UK.Org.Webman.ConfigurationSettings ConfigurationSettings = 
    new UK.Org.Webman.ConfigurationSettings(filename); 
string PrimaryDatabase = ConfigurationSettings.AppSettings["PrimaryDatabase"]; 
```

# php - 计数记录

> ID：13208046
> 
> 赞同：-1
> 
> 时间：2012-11-03T09:59:33.963
> 
> 标签：php, mysql

我如何**计算**此查询中满足条件距离的记录。请帮助:)

```
"SELECT
    ( 6371 * acos( cos( radians({$dane['lat']}) ) * cos( radians(o.lat ) ) * cos( radians(o.lng ) - radians({$dane['lng']}) ) + sin( radians({$dane['lat']}) ) * sin( radians(o.lat ) ) ) ) AS distance
,COUNT(*)
FROM ogloszenia o
$where
GROUP BY o.id
HAVING distance<$promien" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:01:30.530

```
"SELECT
        ( 6371 * acos( cos( radians({$dane['lat']}) ) * cos( radians(o.lat ) ) * cos( radians(o.lng ) - radians({$dane['lng']}) ) + sin( radians({$dane['lat']}) ) * sin( radians(o.lat ) ) ) ) AS distance
,COUNT(*)
FROM ogloszeniao
where
GROUP BY o.id
HAVING distance<" . $promien . " " 
```

# cron - Cronjob 优先级 - 执行时间和退出

> ID：13208054
> 
> 赞同：2
> 
> 时间：2012-11-03T10:00:29.123
> 
> 标签：cron, crontab, execution

我在 crontab 中有以下内容，其中有 7 个......在一个和另一个之间的 15 分钟范围内：

```
50 8 * * * wget -q -O - http://domain.com/path/to/script.php?xxx=3 
```

该脚本调用mysql，从表中选择每条记录，执行某些操作并更新某个值...而通常此脚本需要大约+ 5分钟才能结束...并且2或3从正在运行的进程中消失...其他3或4不要...似乎它们重叠

```
7020    root    0.0 %   wget -q -O - http://domain.com/path/to/script.php?xxx=3 
```

现在，可以成为优先问题吗？如何为 crontab 设置优先级（很好？）？优先级如何管理执行时间？进程以最高优先级退出？

如果我这样做`mysql > SHOW FULL PROCESSLIST\G` 了，它们似乎在 3 小时后仍在运行！而且......在这些sql进程中，表是可读的，如果不是，如何避免？页面的服务速度像往常一样慢

# css - 为什么 webkit 浏览器中的“内容”有问题？

> ID：13208057
> 
> 赞同：0
> 
> 时间：2012-11-03T10:00:47.723
> 
> 标签：css, webkit

我想用 css 替换悬停时的文本，虽然它不起作用，但 Google chrome 忽略了整个`:hover`伪类，而 Mozilla firefox 安全地忽略`content`并继续运行其余事件

html:

```
<li id="menuDebating"><a href="xc_debating.htm">Debating</a></li>​ 
```

CSS：

```
#menuDebating a:hover{
content: "Public Speaking" !important;
color:red;
}​ 
```

小提琴：http: [//jsfiddle.net/FSyAv/](http://jsfiddle.net/FSyAv/)

但是我已经阅读了[css3 声明](http://www.w3.org/TR/CSS21/generate.html#before-after-content)，并且我知道它`content`不应该适用于`:hover`，这没什么大不了的，因为使用 javascript 实现很容易。

但是，然后我进一步研究并尝试使用`a:hover::before`伪类，这就是它变得非常奇怪的地方

html:

```
<li id="menuDebating"><a href="xc_debating.htm">Debating</a></li> 
```

CSS：

```
#menuDebating a:hover::before{
content: "Public Speaking" !important;
color:red;
} 
```

小提琴：http: [//jsfiddle.net/FSyAv/1/](http://jsfiddle.net/FSyAv/1/)

在 Chrome 中，它不停地闪烁，Safari 闪烁，然后停止一段时间并继续闪烁，而 Mozilla 和 Opera 则按预期运行事件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:13:31.253

`content` [只能与伪元素](http://www.w3schools.com/cssref/pr_gen_content.asp)（`before`和`after`）一起使用。

您可以通过将其位置设置为绝对来强制它“覆盖”原始单词：

[**演示**](http://jsfiddle.net/gionaf/fBr2u/)

```
ul li {
    position:relative;
}
#menuDebating a:hover:before{
    position:absolute;
    top:0; left:0; right:0; bottom:0;
    content: "Public Speaking";
    color:red;
    background:#FFF;
}​ 
```

# php - 在 PHP 中，什么是 C# 的 RNGCryptoServiceProvider 的等价物？

> ID：13208062
> 
> 赞同：1
> 
> 时间：2012-11-03T10:01:21.117
> 
> 标签：php, cryptography, rngcryptoserviceprovider

我正在研究 asp.net 和 php 的基本安全性，我已经能够在 asp.net 上实现该应用程序，现在我想做的是使用 php 想出同样的事情

这是我用于我的 asp.net 应用程序的代码，如果可能的话，我想将其转换为 php：

```
public static byte[] GenerateSalt()
    {
        const int MinSaltSize = 4;
        const int MaxSaltSize = 8;

        // Generate a random number to determine the salt size.
        Random random = new Random();
        int saltSize = random.Next(MinSaltSize, MaxSaltSize);

        // Allocate a byte array, to hold the salt.
        byte[] saltBytes = new byte[saltSize];

        // Initialize the cryptographically secure random number generator.
        RNGCryptoServiceProvider rng = new RNGCryptoServiceProvider();

        // Fill the salt with cryptographically strong byte values.
        rng.GetNonZeroBytes(saltBytes);

        return saltBytes;
    } 
```

我也想知道 rng.GetNonZeroBytes() 在 php 中使用什么函数

然后我会使用 base64_encode/base64_decode 作为数据。先生/女士，您的回答会很有帮助。谢谢++ :D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:05:53.713

[`mcrypt_create_iv(size, MCRYPT_DEV_URANDOM)`](http://php.net/manual/en/function.mcrypt-create-iv.php)应该没问题，尽管名字很奇怪。它几乎等同于`rng.GetBytes`.

使用`DEV_URANDOM`是必不可少的，对于可以忽略不计的安全性增加`DEV_RANDOM`来说*非常缓慢*，并且`RAND`是不安全的。

不知道为什么你想要非零字节。在 Base64 编码之后，零字节将是正常的可打印字符。

我建议使用类似的东西`base64_encode(mcrypt_create_iv(9, MCRYPT_DEV_URANDOM))`

# android - 用于复杂查询和舒适工程的 Android 数据库框架

> ID：13208068
> 
> 赞同：0
> 
> 时间：2012-11-03T10:02:12.360
> 
> 标签：android, database, sqlite, android-sqlite

上次我一直在使用原生的 Android SQLite 库，但我对它的可重用性和可读性并不满意。我找到了一些适用于 Android 的 ORM 数据库库，但我想知道这些库是否有用，因为我必须能够运行一大堆复杂的选择和删除操作。

你能推荐我任何合适的图书馆吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:20:04.310

这个试过一次。我必须说相当不错。

[http://ormlite.com/](http://ormlite.com/)

# maven - 在 Ivy 存储库中声明 Maven 项目依赖于人工制品

> ID：13208069
> 
> 赞同：0
> 
> 时间：2012-11-03T10:02:29.623
> 
> 标签：maven, maven-2, ivy

我有一个 Maven 2 项目，现在需要声明对保存在 Ivy 存储库中的人工制品的依赖关系。

这可能吗？如果可以，怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:17:01.230

Maven 是一个相当固执己见的框架，因此只支持 Maven 存储库。

您对 ivy 存储库有任何控制权吗？最好的解决方案是将其内容迁移到像 Nexus 这样的 Maven 存储库管理器（Artifactory、Apache Archiva 是其他选项）。

拥有存储库管理器有很多优点：

*   支持所有构建客户端、Maven、Ivy、Gradle 等
*   能够搜索工件
*   ..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-03T10:07:41.757

试试 Ivy Maven 插件：

[https://github.com/remis-thoughts/ivy-maven-plugin](https://github.com/remis-thoughts/ivy-maven-plugin)

“一个将 apache Ivy 依赖项添加到 Maven 项目的插件。这是 Evgeny Goldin 的 Ivy Maven 插件的一个分支，它修复了对传递依赖项的支持。”

（请注意，下面的早期评论指的是 Evgeny Goldin 的 Ivy Maven 插件 - 看起来这个 fork 解决了我遇到的问题）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T10:15:44.550

我最终将这个项目迁移到[Gradle](http://www.gradle.org/)。默认情况下，Gradle 使用与 Maven 相同的项目布局，因此迁移非常简单。

Gradle 允许您[声明跨多种类型的存储库的依赖关系](http://www.gradle.org/docs/current/userguide/dependency_management.html#sec%3arepositories)：

*   马文
*   常春藤
*   平面文件

因此，您可以在 Maven 存储库中拥有一些依赖项，在 Ivy 存储库中拥有其他依赖项，在项目 lib 目录中拥有其他依赖项（震惊，恐怖！）。

强烈推荐。

# java - 用于 DMG 背景的自定义插入式图标，用于 MacOSX 上的应用程序打包

> ID：13208070
> 
> 赞同：18
> 
> 时间：2012-11-03T10:02:29.493
> 
> 标签：java, macos, javafx-2, packaging, app-bundle

我无法在 MacOSX 上构建的独立包中为 DMG 背景添加自定义图标。我在项目的根目录中添加了一个包。正在从中加载自定义图标，但没有加载 DMG 背景图标。我正在使用 Java fx 2.2.3 和 jdk1.7.0_09。这是为此生成的详细输出。

```
Detected JavaFX Ant API version 1.2 Launching <fx:jar> task from
/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/lib/ant-javafx.jar
Launching <fx:deploy> task from
/Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk/Contents/Home/lib/ant-javafx.jar
Copying 102 files to
/Users/apple/NetBeansProjects/JavaFXApplication2/dist Using base JDK
at: /Library/Java/JavaVirtualMachines/jdk1.7.0_09.jdk Using default
package resource [Bundle config file] (add package/macosx/Info.plist
to the class path to customize) Using custom package resource [icon]
(loaded from file
/Users/apple/NetBeansProjects/JavaFXApplication2/package/macosx/javaFXApplication2.icns)
Creating app bundle:
/Users/apple/NetBeansProjects/JavaFXApplication2/dist/bundles/JavaFXApplication2.app
Config files are saved to
/var/folders/vd/nyxf14z53tx56g2_lbqcnfrr0000gn/T/build1722966263281326253.fxbundler/macosx.
Use them to customize package. Building DMG package for
JavaFXApplication2 Using default package resource [Bundle config
file] (add package/macosx/Info.plist to the class path to customize)
Using custom package resource [icon] (loaded from file
/Users/apple/NetBeansProjects/JavaFXApplication2/package/macosx/javaFXApplication2.icns)
Config files are saved to
/var/folders/vd/nyxf14z53tx56g2_lbqcnfrr0000gn/T/build1722966263281326253.fxbundler/macosx.
Use them to customize package. Using default package resource [dmg
background] (add package/macosx/JavaFXApplication2-background.png to
the class path to customize) Using custom package resource [volume
icon] (loaded from file
/Users/apple/NetBeansProjects/JavaFXApplication2/package/macosx/javaFXApplication2.icns)
Using default package resource [script to run after application
image is populated] (add
package/macosx/JavaFXApplication2-post-image.sh to the class path to
customize) Using default package resource [DMG setup script] (add
package/macosx/JavaFXApplication2-dmg-setup.scpt to the class path
to customize) Result DMG installer for JavaFXApplication2:
/Users/apple/NetBeansProjects/JavaFXApplication2/dist/bundles/JavaFXApplication2.dmg
Config files are saved to
/var/folders/vd/nyxf14z53tx56g2_lbqcnfrr0000gn/T/build1722966263281326253.fxbundler/macosx.
Use them to customize package. 
```

这是列出我的所有图标文件的目录：-

```
Apples-MacBook-Pro-2:~ apple$ ls -l /Users/apple/NetBeansProjects/JavaFXApplication2/package/macosx/
total 136
-rw-r--r--@ 1 apple staff 1251 Nov 1 19:02 Info.plist
-rw-r--r-- 1 apple staff 18017 Nov 1 18:22 JavaFXApplication2-background.png
-rw-r--r--@ 1 apple staff 902 Nov 2 13:55 JavaFXApplication2-dmg-setup.scpt
-rw-r--r-- 1 apple staff 38115 Jan 19 2006 JavaFXApplication2.icns 
```

正如您所看到的，图标是从包中加载的，但 DMG 背景文件不是，即使我也在同一目录中添加了该文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-12T03:30:12.547

OS X 中文件夹的背景由 Finder 在 .DS_Store 文件中设置。如果您注意不要更改背景文件的文件夹路径和名称，则可以使用 Finder 设置背景图像，然后复制 .DS_Store 文件并在构建过程中将其复制过来。如果你想要更好的东西，我们使用这个 Perl 脚本来设置文件夹的背景（它依赖于其他一些 Perl 库，你应该能够找到它们）。

```
#!/usr/bin/perl
use Mac::Finder::DSStore::BuddyAllocator;
use Mac::Finder::DSStore;
use IO::File;
use Data::Dumper;
use Config;
use Mac::Files;
use Mac::Memory;
use Mac::Finder::DSStore qw( writeDSDBEntries makeEntries );
use Sys::Filesystem::ID;
use File::Basename;

die "Usage: $0 <Folder path> <bg path relative to folder>\n"
    unless @ARGV == 2;

$folderPath=$ARGV[0];
while ($folderPath =~ /\/$/)
{
    chop($folderPath);
}

die "$folderPath is not a directory" unless -d $folderPath;
$bgPath=$folderPath."/".$ARGV[1];
die "$bgPath is not a file" unless -f $bgPath;

# When we're setting the background for the root, the info lives
# in the .DS_Store file in the directory, otherwise it lives in
# the parent directory
if (Sys::Filesystem::ID::_arg_to_mount_point($folderPath) eq $folderPath)
{
    $dsStoreFile=$folderPath."/.DS_Store";
    $ourName=".";
}
else
{
    $dsStoreFile=$folderPath."/../.DS_Store";
    ($ourName, $path, $suffix) = fileparse($folderPath);
}

#print "Setting bg for $folderPath to $bgPath, .DS_Store file = $dsStoreFile ourName=$ourName\n";
#We use byFilename to keep track of the records for everybody
# we will pull out the records for . and remove any BKGD records
@otherRecs=();
@ourRecs=();
if (-f $dsStoreFile)
{
    $store = Mac::Finder::DSStore::BuddyAllocator->open(new IO::File $dsStoreFile, '<');
    @records=&Mac::Finder::DSStore::getDSDBEntries($store);
    foreach my $curRec (@records)
    {
        if ($curRec->filename ne $ourName)
        {
            push(@otherRecs, $curRec);
        }
        else
        {
            push(@oldRecs, $curRec);
        }
    }
    if ( @oldRecs != 0)
    {
        foreach $curRec(@oldRecs)
        {
            if ($curRec->strucId ne "BKGD" && $curRec->strucId ne "pict" && $curRec->strucId ne "bwsp" && $curRec->strucId ne "icvp")
            {
                push(@ourRecs, $curRec);
            }
        }
    }

}
undef $store;
if ($ourRec == 0)
{
    push(@ourRecs, &makeEntries($ourName, ICVO => 1,
            icvo => pack('A4 n A4 A4 n*', "icv4", 48, "none", "botm", 0, 0, 0, 0, 0, 1, 0, 100, 1)));
}
@bgRecs=&makeEntries($ourName, BKGD_alias => NewAliasMinimal($bgPath));
@ourRecs=(@ourRecs,@bgRecs);
&writeDSDBEntries($dsStoreFile, @ourRecs, @otherRecs); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-18T01:14:04.400

你试过CHMODing吗？我发现这是类似经历的问题。

```
chmod 777 backgroundpathhere 
```

在终端。（以防你不知道）

# eclipse-rcp - 通过动态在顶部编辑器添加视图

> ID：13208082
> 
> 赞同：1
> 
> 时间：2012-11-03T10:04:22.980
> 
> 标签：eclipse-rcp

在 Eclipse RCP 应用程序中

我们使用下面的代码以编程方式添加视图

```
PlatformUI.getWorkbench().getActiveWorkbenchWindow().getActivePage().showView("browser.scview",Integer.toString(++instanceNum), IWorkbenchPage.VIEW_ACTIVATE);
```

但默认情况下，此代码在底部添加视图。但我需要在顶部添加视图如何通过代码实现这一点请帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T04:06:14.787

默认视图放置在 IPerspectiveFactory 中定义，如果使用您创建的透视图，您可以添加所谓的占位符，用于显示要在透视图中定义的特定 IFolderLayout 上显示的视图 ID，如下所示：

```
// Top left: Project Explorer view and Bookmarks view placeholder
IFolderLayout topLeft = layout.createFolder("topLeft", IPageLayout.LEFT, 0.25f,
editorArea);
topLeft.addView(IPageLayout.ID_PROJECT_EXPLORER);
topLeft.addPlaceholder(IPageLayout.ID_BOOKMARKS); 
```

然后，使用要在代码中显示的视图的相同 ID 的占位符，它将显示在该文件夹中。如果您感到困惑，请查找 IPageLayout 和 IFolderLayout 的 API。如果这是一个你没有定义自己的观点

# sql - SQL - 与 HAVING 和 COUNT() 匹配

> ID：13208085
> 
> 赞同：1
> 
> 时间：2012-11-03T10:04:42.030
> 
> 标签：sql, count, having-clause, match-against

有人知道为什么第一个查询有效而第二个查询无效吗？

第一个查询（有效）：

```
SELECT *, 
       MATCH(username) AGAINST ('ergergergergergerg' IN BOOLEAN MODE) AS _score
FROM (ci_users) HAVING _score > '0'; 
```

第二个查询（不工作）：

```
SELECT COUNT(id), 
       MATCH(username) AGAINST ('ergergergergergerg' IN BOOLEAN MODE) AS _score 
FROM (ci_users) HAVING _score > '0'; 
```

第一个查询正好返回 24 行，第二个查询返回 0 行，而我刚刚更改`*`为`COUNT(id)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:38:18.657

第一个返回匹配的每一行。

第二个包含关于 id 的聚合。

聚合时，MySQL 足够聪明（或者我应该说，足够愚蠢），可以从所有被查询但未聚合的字段中隐式选择任何值。因此，由于您不分组`score`也不聚合`score`，MySQL 将只返回所有记录的任何分数，中间结果（在应用`having`子句之前）包括值为 0 的那些。所以，这个中间结果很可能只包含一个计数，例如 900 和一个 _score 0。使用 过滤后`having`，没有记录保留。

现在，我很乐意提出建议，但我不知道您实际上希望从该查询中返回什么。

```
SELECT COUNT(id)
FROM
  (SELECT 
    id,
    MATCH(username) AGAINST ('ergergergergergerg' IN BOOLEAN MODE) AS _score 
  FROM (ci_users) HAVING _score > '0') x; 
```

甚至更好：

```
SELECT COUNT(id)
FROM (ci_users) 
WHERE MATCH(username) AGAINST ('ergergergergergerg' IN BOOLEAN MODE) > '0' 
```

# jquery - 如何从字符串运行 jQuery 方法

> ID：13208086
> 
> 赞同：4
> 
> 时间：2012-11-03T10:04:54.610
> 
> 标签：jquery, jquery-plugins

假设我们有以下 jQuery 插件

```
$.accordion();
$.button(); 
```

在脚本中，我们有以下代码：

```
var plg = "accordion";

$('selector').plg();

plg = 'button';

$('selector').plg(); 
```

上面的例子，ofcource 不起作用。但是有没有办法在不使用 eval() 的情况下做类似的事情？

我可以从变量执行 jQuery 插件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T10:07:24.150

你当然可以！

```
var plg = "accordion";

$('selector')[plg](); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T10:07:12.963

如果您想要为该函数创建别名，您可以分配它，不需要字符串或`eval`：

```
var plg = $.accordion;

$('selector').plg(); 
```

# sql - 语句句柄（hstmt）到底是做什么的？在 ODBC 中

> ID：13208087
> 
> 赞同：1
> 
> 时间：2012-11-03T10:04:54.797
> 
> 标签：sql, c, odbc

我是为 ODBC 编写 c 代码的新手，但在这里我有疑问......在搜索了 C 的 odbc 函数教程的教程后，我仍然无法准确了解它们是如何协作工作的......

该语句处理 hstmt 对数据库数据到底做了什么？我知道它控制着我作为参数提供的 SQL 查询语句。但是，那么我作为查询提供的每个 SQL 语句都应该有每个语句句柄（hstmt）？还是多个 SQL 查询语句的一个语句句柄？

例如，

```
lstrcpy((LPTSTR)update, L"insert into employee values  ('Dshong','summer','LosAngeles');");
SQLExecDirect(hstmt1, update, SQL_NTS);

lstrcpy((LPTSTR)update, L"insert into works values ('Dshong','Small Bank',    2500);");
SQLExecDirect(hstmt3, update1, SQL_NTS);

lstrcpy((LPTSTR)select, L"select * from works;");
if (SQLExecDirect(hstmt, select, SQL_NTS) != SQL_SUCCESS)
    return printf("can’t exec direct");

lstrcpy((LPTSTR)select1, L"select * from employee;");
if (SQLExecDirect(hstmt2, select1, SQL_NTS) != SQL_SUCCESS)
    return printf("can’t exec direct"); 
```

对于两个插入语句和两个带有四个 hstmt 的 select 语句，我应该这样给出吗？

如果我这样给予，

```
lstrcpy((LPTSTR)insert, L"insert into employee values ('Dshong','summer','LosAngeles');");
SQLExecDirect(hstmt1, insert, SQL_NTS); 
```

SQLExecDirect 有 hstmt1 作为参数，但我不知道 SQLExecDirect 如何使用它。

而且我认为，结果应该是插入一行，不是吗？

但是当我运行代码时，它会插入多个相同的行`('Dshong','summer','LosAngeles')`...当我打印出结果时，`('Dshong','summer','LosAngeles')`即使插入行不在for循环中也被多次插入...

以及它们如何与以下功能一起工作？

*   `SQLBindCol(hstmt, 1, SQL_C_CHAR, id, (SDWORD)sizeof(id), &idlen);`
*   `SQLFetch(hstmt)`

我知道他们只是在做什么，但是.. 在这里我想确切地知道 hstmt（语句句柄）以哪种方式与他们一起工作..

谢谢你.. ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:49:28.257

C 中的句柄只是一个指向 ODBC 分配的内存块的指针。通常是一个跟踪 SQL 查询状态的结构。INSERT 语句中的句柄没有太多用处，只使用一次。除非它失败，否则您需要将*完全相同的*句柄传递给 SQLError() 以找出问题所在。然后 ODBC 使用哪个来访问该内部结构并检索错误代码。句柄相对于结构指针的优势在于它隐藏了内部实现。

由于您要检索查询结果，因此您当然需要重复使用它进行 SELECT 查询。您必须将*完全相同的*句柄传递给 SQLBindCol() 以将查询结果中的列映射到内存位置。并到 SQLFetch() 检索一行。

如果您了解 C++，那么将句柄视为*this*对象指针会很有帮助。而 SQLAllocStmt() 作为构造函数。而 SQLFetch() 作为类的实例方法。最后 SQLFreeHandle() 作为析构函数。这正是 C++ ODBC 包装类所做的，例如 MFC 的 CRecordSet、CDatabase 来包装 SQLHDBC 句柄。

在大多数情况下，您只使用一个 SQLHSTMT 句柄。除非您同时运行多个 SQL 语句。假设从 SELECT 查询生成 UPDATE 语句，这需要两个句柄。

# facebook - 从 facebook api 捕获错误 json 字符串

> ID：13208088
> 
> 赞同：0
> 
> 时间：2012-11-03T10:04:58.540
> 
> 标签：facebook, json, api, debugging, parsing

我正在尝试捕获错误消息，这些错误消息是在尝试发布到墙上时从 facebook api 发送的。

这是返回的 json 字符串。{"error":{"message":"(#506) 重复状态消息","type":"OAuthException","code":506,"error_data":{"kError":1455006}}}

我将如何使用 JavaScriptSerializer 解析这个字符串，就好像我尝试在一个类中使用“错误”这个词作为我的属性一样，它不会允许它作为 c# 中的关键字。代码如下。

```
Dim dbg As StreamReader = New StreamReader(e.Response.GetResponseStream)
Dim jss = New JavaScriptSerializer()
Dim fbdebug As fbDebuger = jss.Deserialize(Of fbDebuger)(dbg.ReadToEnd)
Response.Write(fbdebug.error) 
```

公共类 fbDebuger 公共属性错误作为字符串

```
End Class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T15:02:50.460

可以通过在变量名周围添加括号来使用关键字。

# c# - Windows Phone 8 操作系统是否支持 aacp？

> ID：13208089
> 
> 赞同：1
> 
> 时间：2012-11-03T10:05:01.880
> 
> 标签：c#, windows-phone-8

我无法在模拟器上播放 aac plus 音频。这是仅与模拟器相关的许可问题还是普遍现象？

它可以在每台安装了 Windows Phone 8 的设备上运行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:15:42.273

似乎它只是在模拟器上不受支持，真实设备会播放它......

在这里查看有关所有编解码器信息的更多信息。

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087(v=vs.92).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff462087(v=vs.92).aspx)

# c# - 网络服务器通过 HTTP 发送图片

> ID：13208099
> 
> 赞同：3
> 
> 时间：2012-11-03T10:07:17.970
> 
> 标签：c#, http, webserver, image

所以，我写了一个小Webserver。首先，我尝试只发送文本，但现在我也在尝试发送图片。（或包含图片的 html 页面）

这是我尝试过的：

```
if ((Path.GetExtension(filename).ToLower() == "jpg") || (Path.GetExtension(filename).ToLower() == "png") || (Path.GetExtension(filename).ToLower() == "gif"))
{
    Image image = Image.FromFile(filename);
    MemoryStream ms = new MemoryStream();
    image.Save(ms, image.RawFormat);
    responseContent = Encoding.Default.GetString(ms.ToArray());
    responseheader = "HTTP/1.1 200 OK\r\n" +
                     "Server: MiniWebServer\r\n" +
                     "Content-Length: " + responseContent.Length + "\r\n" +
                     "Content-Language: de\r\n" +
                     "Connection: close\r\n\r\n"; 
}

finalResponse = responseheader + responseContent;
return Encoding.ASCII.GetBytes(finalResponse); 
```

因此，我尝试在浏览器中打开 html 文件（其中包含图片），但它没有显示出来。然后，我尝试只在浏览器中打开图片，但随后出现一个错误，表示无法显示图形，因为它包含错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-04T03:22:59.867

您将所有内容编码为字符串。

对于 HTTP 标头，这很好，因为所有浏览器都希望以这种方式读取标头，并且必须像现在一样使用 ASCII 对其进行编码。

如果您发送文本，也可以，因为当您不指定内容类型时，大多数浏览器默认为 ASCII 模式。

但是对于图像和其他数据，您的响应中必须发生以下情况。

设置**Content Type**标头，指定您要发送的内容的类型。例子是

> 内容类型：图片/gif

或者

> 内容类型：图片/png

现在浏览器（或接收内容的任何东西）知道会发生什么。除了，您以 ASCII 编码对图像进行了编码。

ASCII 仅用于将简单测试编码为字节。（我说很简单，因为 ASCII 只支持很少的字符集。它不支持多语言等。Unicode、UTF 和其他一些编码支持。）

这会导致 ASCII 将您的图像作为文本读取，并删除或损坏它不理解的字母。（这是您的大部分图像数据。）

您要做的是，以您在标头中指定的格式发送其余的响应（图像，在标头之后）`Content-Type`。只需发送`ms.ToArray`调用的结果。

理想情况下，您将确保图像采用您指定的正确格式，并且不依赖于文件扩展名，但实际上，许多服务器会谎报内容类型并指定`image/*`并让浏览器弄清楚。

[这是一个关于如何在 C# 中构建 Web 服务器的好例子。](http://www.codeproject.com/Articles/1505/Create-your-own-Web-Server-using-C)

希望这可以帮助。

* * *

附带说明一下，您的实现不擅长的是内存消耗。您正在使用内存流将整个图像加载到内存中，然后将其复制到数组中。这是每个请求在内存中的 2 个图像副本。我不确定你想要多少可扩展性。但是，如果您同时收到 10 个高分辨率图像的请求（比如 5 MB，对于 8MP 相机拍摄的典型照片？），现在您的服务器突然将 100 MB 的数据加载到内存中。

如果您从用户接受文件并在写入文件之前将它们加载到内存中，这可能会成为一个更大的问题。如果用户决定上传 1 GB 的文件，它将关闭您的服务器。（我在一些用 ASP.NET 编写的站点中看到了这种情况，它非常糟糕。故障部分是 ASP.NET 的优化。）

您可以做的是打开一个文件流，并将字节复制到响应中而不加载整个图像。上面的链接显示了此代码。

# jquery - CSS3 Bounce 然后转到链接

> ID：13208103
> 
> 赞同：1
> 
> 时间：2012-11-03T10:07:29.293
> 
> 标签：jquery

我想制作一个 img 反弹，然后在动画准备好后，它将导航到我正在使用的 href :target with -webkit-animation:bounce .6s 6 alternate ease-out;

并且在使用动画后延迟链接（但它也延迟了 :target）

```
$('.footer a').click(function(e) {
            var href = $(this).attr('href');
            e.preventDefault();
            setTimeout(function() { window.location.href = href; }, 3000 );  {   
            };
        }); 
```

任何想法如何播放动画然后转到页面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:21:59.673

既然你提到`-webkit-animation`了，你可以使用这个`webkitAnimationEnd`事件：

```
$('.footer a').bind('webkitTransitionEnd', function(e) {
    var href = $(this).attr('href');
    setTimeout(function() { window.location.href = href; }, 3000 );
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:22:37.830

单击添加类女巫后将使图像反弹。

```
$('#item').on('click', function(e){
    e.preventDefault();
    $(this).addClass('bounce');
    //other stuff
    //timeout as you do. Becouse you know how long animation is
}) 
```

# cakephp - Cake 2.x 有聊天/消息插件吗？

> ID：13208104
> 
> 赞同：3
> 
> 时间：2012-11-03T10:07:50.717
> 
> 标签：cakephp, chat, cakephp-2.0, messaging

我正在寻找 cakephp 的消息传递插件。到目前为止，我已经找到了几个插件（例如这里 [http://plugins.cakephp.org/packages?query=chat](http://plugins.cakephp.org/packages?query=chat)），但它们都已经过时并且适用于 cake 1.2。

Cake 2.x 有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T21:11:11.187

请参阅以下链接，我认为它们很有帮助：
1\. [https://github.com/zuha/Messages-Zuha-Cakephp-Plugin](https://github.com/zuha/Messages-Zuha-Cakephp-Plugin)
2\. [https://github.com/skitle/CakePHP-Messaging-Plugin](https://github.com/skitle/CakePHP-Messaging-Plugin)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T09:29:13.120

那这个呢 ？[http://www.cometchat.com/cakephp-chat](http://www.cometchat.com/cakephp-chat)

它不是免费的，但这是我发现的......

否则，您可以在 CakePHP 中将 Node.JS 和 Socket.IO 集成为 JS 库，并与之一起构建聊天应用程序......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-16T19:11:42.763

也许你应该试试这个插件：

[https://github.com/angelxmoreno/CakePHP-PrivateMessages](https://github.com/angelxmoreno/CakePHP-PrivateMessages)

# java - Java中的散列键

> ID：13208108
> 
> 赞同：5
> 
> 时间：2012-11-03T10:08:31.803
> 
> 标签：java, hashmap, hashtable, string-hashing

在 java 中，当我使用字符串作为 Hashmap 的键时，我得到的结果与我使用字符串哈希码作为 HashMap 中的键时的结果略有不同。

有什么见解吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T10:11:04.250

> 当我使用字符串哈希码作为 HashMap 中的键时。

您*不能*使用哈希码本身作为密钥。哈希码并不是唯一的——完全允许两个不相等的值具有相同的哈希码。您应该使用字符串*本身*作为键。然后，该映射将首先比较哈希码（以快速缩小候选匹配范围），然后与*真正的*字符串相等性`equals`进行比较。

 *当然，这是假设您的代码确实与您的问题一样，例如

```
HashMap<String, String> goodMap = new HashMap<String, String>();
goodMap.put("foo", "bar");

HashMap<Integer, String> badMap = new HashMap<Integer, String>();
badMap.put("foo".hashCode(), "bar"); 
```

如果这确实是您的代码的样子，请`HashMap<String, String>`改用。

[`Object.hashCode()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)来自（强调我的）的文档：

> hashCode 的一般合约是：
> 
> *   每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，前提是没有修改对象上的 equals 比较中使用的信息。该整数不需要从应用程序的一次执行到同一应用程序的另一次执行保持一致。
> *   如果两个对象根据 equals(Object) 方法相等，则对两个对象中的每一个调用 hashCode 方法必须产生相同的整数结果。
> *   **如果根据 equals(java.lang.Object) 方法，如果两个对象不相等，则不需要对两个对象中的每一个调用 hashCode 方法都必须产生不同的整数结果。**但是，程序员应该意识到，为不相等的对象生成不同的整数结果可能会提高哈希表的性能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T10:11:53.100

当然。不同的字符串可以具有相同的 hashCode，因此如果您将两个这样的字符串作为键存储在映射中，您将有两个条目（因为字符串不同）。Whareas 如果您使用他们的 hashCode 作为键，您将只有一个条目（因为他们的 hashCode 是相同的）。

hashCode 不用于判断两个键是否相等。它仅用于将存储桶分配给密钥。一旦找到bucket，bucket中包含的每个key都会与新的key进行equals比较，如果找不到equal key，则将该key添加到bucket中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T10:12:41.640

问题是，即使两个对象不同，并不意味着它们的哈希码也不同。

两个不同的对象可以共享相同的哈希码。因此，您不应该将它们作为 HashMap 键。

`Object.hashCode()`另外，因为从方法返回的哈希码是 type `int`，你只能有`2^32`不同的值。这就是为什么对于不同的对象，您将根据散列算法产生“冲突”。

**简而言之： -**

`!obj.equals(obj1)`不能确保`obj.hashCode() != obj1.hashCode()`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T10:14:06.027

`HashCodes`同一个字符串可以相同或不同，所以要小心。可能这就是你得到不同结果的原因。

这是[另一个](https://stackoverflow.com/questions/785091/consistency-of-hashcode-on-a-java-string)关于它的问题。请参阅 Jon Skeet 接受的答案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-01T20:03:47.343

只有当散列函数是完美散列时，*才能使用散列码作为键（参见**例如* [GPERF](http://www.gnu.org/software/gperf)）。只要您的关键对象不驻留在内存中，您就可以节省内存。*

# jquery - 在 Joomla 模块中使用 jQuery Cycle

> ID：13208111
> 
> 赞同：3
> 
> 时间：2012-11-03T10:08:39.447
> 
> 标签：jquery, joomla, joomla2.5

我正在`jQuery`为客户开发一个内容滑块模块。内容滑块应该在不同的内容元素之间滑动。滑块在普通的情况下工作得很好，`html/javascript`但我在将其转换为 Joomla 模块时遇到了麻烦。

这是代码：

```
<?php
// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );
$doc =& JFactory::getDocument();
$doc->addStyleSheet( 'modules/mod_slider40secs/css/jquery-ui-1.8.17.custom.css' );
$doc->addStyleSheet( 'modules/mod_slider40secs/css/style.css' );
$doc->addScript( 'modules/mod_slider40secs/js/jquery-1.7.1.min.js' );
$doc->addScript( 'modules/mod_slider40secs/js/jquery-ui-1.8.17.custom.min.js' );
$doc->addScript( 'modules/mod_slider40secs/js/jquery.cycle.all.js' );
$doc->addScript( 'modules/mod_slider40secs/js/noconflict.js' );
?>

<script type="text/javascript">
var prevValue, totalImages;
prevValue=0;

function moveNext(step){

}

totalImages = (jQuery("#gallery li").length) - 1;
jQuery('#gallery').cycle({ 
    fx:     'none', 
    speed:  'fast', 
    timeout: 2000, 
    next:   '#next', 
    prev:   '#prev',
    skipInitializationCallbacks: true,
    before: function(currSlideElement, nextSlideElement, options, forwardFlag){
        jQuery( ".slider" ).slider({
            value : totalImages * options.nextSlide
        });
    }
});

jQuery( ".slider" ).slider({
    value:0,
    min: 0,
    max: totalImages * totalImages,
    step: totalImages,
    slide: function( event, ui ) {
        if(ui.value > prevValue){
            jQuery("#next").click();

        }
        else if(ui.value<prevValue){
            jQuery("#prev").click();
        }
        prevValue=ui.value;
    }
});

jQuery(".slider a").focusin("click", function(){
    jQuery('#gallery').cycle("pause");
});

</script>

<div class="main">
    <div class="wrapper">
        <div class="sliderGallery">
            <div class="gallery">
                <ul class="clearfix" id="gallery">
                    <?php
                    foreach($articleArray as $arti)
                    {
                        ?>
                        <li>
                            <div>
                                <?php echo($arti['title']); ?>
                                <?php echo($arti['text']); ?>
                            </div>

                        </li>
                        <?php
                    }
                    ?>
                </ul>
                <div class="navigation">
                    <a id="prev" href="javascript:void(0)">Prev</a>
                    <a id="next" href="javascript:void(0)">Next</a>
                </div><!--End of navigation -->
            </div><!--End  of gallery -->
            <div class="slider">
            </div><!--End of slider -->
        </div><!--End of slider gallery -->
    </div><!--End of wrapper -->
</div><!--End of main --> 
```

谁能帮我找出错误？

该脚本以前在一个`jQuery(document).ready()`函数中被调用，但它也不是这样工作的。

我目前看到的是单篇文章，但没有滑块/等。使用 Firebug 我可以看到正在加载脚本，所以那里没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:34:23.227

在执行脚本时，尚未创建 HTML 元素。解决它的一种简单方法是将脚本标签移动到 HTML 元素下方。

以下将**不起作用**：

```
<script>
document.getElementById('asd').innerText = 'asd';
</script>
<div id="asd"></div> 
```

但是，如果您将脚本标签移动到底部，它将：

```
<div id="asd"></div>
<script>
document.getElementById('asd').innerText = 'asd';
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:43:38.547

正如@Fnatte 所说，尚未创建 HTML。

编辑：我错过了你说这是在一个模块中的部分。

解决方案是使用`jQuery(window).load(function()`

```
<script language="javascript" type="text/javascript">
// -->
/* <![CDATA[ */

var prevValue, totalImages;
prevValue=0;

jQuery(window).load(function() {

totalImages = (jQuery("#gallery li").length) - 1;
jQuery('#gallery').cycle({ 
    fx:     'none', 
    speed:  'fast', 
    timeout: 2000, 
    next:   '#next', 
    prev:   '#prev',
    skipInitializationCallbacks: true,
    before: function(currSlideElement, nextSlideElement, options, forwardFlag){
        jQuery( ".slider" ).slider({
            value : totalImages * options.nextSlide
        });
    }
});

jQuery( ".slider" ).slider({
    value:0,
    min: 0,
    max: totalImages * totalImages,
    step: totalImages,
    slide: function( event, ui ) {
        if(ui.value > prevValue){
            jQuery("#next").click();

        }
        else if(ui.value<prevValue){
            jQuery("#prev").click();
        }
        prevValue=ui.value;
    }
});

jQuery(".slider a").focusin("click", function(){
    jQuery('#gallery').cycle("pause");
});

});
/* ]]> */
//-->
</script> 
```

# php - Smarty concat 并用作变量

> ID：13208120
> 
> 赞同：0
> 
> 时间：2012-11-03T10:09:54.380
> 
> 标签：php, smarty, concatenation

在 PHP 文件中，我正在运行一个循环，并在其中为 smarty 分配一个变量。

PHP代码：

```
foreach($pindata as $Idx => $Val)
{
    $pinId = $Val['id'];
    $sql = mysql_query("select count(userID) as users from pinrest_supporters where pin_id = $pinId;");
    $contributorsSql = mysql_fetch_assoc($sql);
    $contributors = $contributorsSql['users'];
    $smarty->assign("contributors$pinId", $contributors);

} 
```

所以 smarty 中分配的值是`contributors1038`,`contributors1039`等等。

现在我的问题是我想在 smarty 中动态使用这些分配的变量。

如果我在 smarty 模板文件中编写`{$contributors1038}`，那么我会得到正确的输出为 9。但我想动态使用它。1038 是 ID，我的模板中有它。如果我尝试连接两个不同的变量并期待结果，我就失败了：P

我试过这个：

`{assign var='contri' value="contributors"|cat:$results[res].id}`

但是上面的变量`{$contri}`给了我作为*contributors1038的结果*

我想通过连接两个不同的变量来创建一个新变量，但这使它成为字符串。那么任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:32:02.467

如果您的唯一目的是输出数据，您可以尝试这种方式

```
{$contributors}{$results[res].id} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:35:49.580

好的，我厌倦了尝试不同的解决方案，所以最后我这样做是为了实现我的目标。

而不是下面的代码PHP

```
$contributors = $contributorsSql['users'];
$smarty->assign("contributors$pinId", $contributors); 
```

我将 smarty 变量设为数组

PHP

```
$contributors[$pinId] = $contributorsSql['users'];
$smarty->assign("contributors", $contributors); 
```

在smarty中，我将其称为

聪明：

```
{$contributed[$results[res].id]} 
```

# javascript - Javascript：制作一个随机数组

> ID：13208121
> 
> 赞同：0
> 
> 时间：2012-11-03T10:09:58.093
> 
> 标签：javascript, random

> **可能重复：**
> [在 (0 - X) 范围内生成唯一编号，保留历史记录以防止重复](https://stackoverflow.com/questions/11808804/generate-unique-number-within-range-0-x-keeping-a-history-to-prevent-duplic)

编写一个生成随机数组的函数，如下所示：

随机数组(10)

=> [0,2,3,9,6,5,4,7,8,1]

:(

我在上学时没有学习编程，所以我写了一个丑陋的。这是我的程序。

```
var min = 0,
    max = 15,  //Here generate an random array from 0-14
    i,
    j,
    arr = [],
    temp = [];

for (i = min;i<max; i++){
    arr.push(i);
}

for(j=min;j<1000;j++){
   temp.push(arr[Math.floor(Math.random() * arr.length)]);  
}
function unique(array){
      var b = [];
      for(var i=0; i<array.length; i++){
         if(b.indexOf(array[i]) == -1) b.push(array[i]);
      }
      return b;
}
alert(unique(temp)); 
```

我通过搜索互联网编写了这个程序，我认为它并不完美，其中没有算术......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:26:30.167

这是一种方法：

```
var RandomArray = function RandomArray(elements) {
    var min = 0,        //min random number
        max = 15,       //max random number
        i,              //incrementer
        arr = [];       //output
    //generate an array of length (elements) containing random number from min to max
    for (i = 0; i < elements; i += 1) {
        arr.push(Math.floor(Math.random() * (max + 1)) + min);
    }
    //return the array
    return arr;
}; 
```

这是一个小提琴：http: [//jsfiddle.net/mKFk9/](http://jsfiddle.net/mKFk9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:39:12.793

这可能是您需要的：

```
/**
* range Get an array of numbers within a range
* @param min {number} Lowest number in array
* @param max {number} Highest number in array
* @param rand {bool} Shuffle array
* @return {array}
*/
function range( min, max, rand ) {
  var arr = ( new Array( ++max - min ) )
    .join('.').split('.')
    .map(function( v,i ){ return min + i })
  return rand
    ? arr.map(function( v ) { return [ Math.random(), v ] })
       .sort().map(function( v ) { return v[ 1 ] })
    : arr
} 
```

**演示：http:** [//jsfiddle.net/elclanrs/QBVbr/](http://jsfiddle.net/elclanrs/QBVbr/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T14:16:27.757

```
function randomArray(n) {

  var array = [];
  for (i = 0; i < n; i++) {
    array[i] = i;
  }
  var newArray = [];
  for (i = 0; i < n; i++) {
    var num = Math.round(Math.random() * (n - i - 1));
    newArray[i] = array[num];
    array.splice(num, 1);
  }
  alert(newArray);
}
randomArray(100); 
```

# sql-server-2008 - 声纳 + MS SQL 数据库

> ID：13208124
> 
> 赞同：0
> 
> 时间：2012-11-03T10:10:06.030
> 
> 标签：sql-server-2008, jdbc, sonarqube, sonar-runner

我正在尝试使用 mssql 服务器数据库初始化声纳，但我不能。使用 Microsoft SQL Server Management Studio，我使用用户名“sonar”和密码“sonar”创建了用户，并授予了同样创建的“sonar”数据库的所有正确权限。还将“服务器身份验证”配置为“SQL Server 和 Windows 身份验证模式”。它运行良好，但我无法使用声纳连接到数据库。谢谢，

声纳属性；

```
#----- Credentials
# Permissions to create tables and indexes must be granted to JDBC user.
# The schema must be created first.
sonar.jdbc.username:                       sonar
sonar.jdbc.password:                       sonar

#----- Microsoft SQLServer
# The Jtds open source driver is available in extensions/jdbc-driver/mssql. More details on     http://jtds.sourceforge.net
sonar.jdbc.url:jdbc:sqlserver://localhost:1433;databaseName=SONAR;instanceName=r2;selectMethod=cursor
sonar.jdbc.driverClassName: com.microsoft.sqlserver.jdbc.SQLServerDriver
sonar.jdbc.validationQuery: select 1
sonar.jdbc.dialect: mssql

# Optional properties
#sonar.jdbc.driverClassName:                net.sourceforge.jtds.jdbc.Driver

#----- Connection pool settings
sonar.jdbc.maxActive:                      20
sonar.jdbc.maxIdle:                        5
sonar.jdbc.minIdle:                        2
sonar.jdbc.maxWait:                        5000
sonar.jdbc.minEvictableIdleTimeMillis:     600000
sonar.jdbc.timeBetweenEvictionRunsMillis:  30000
... 
```

日志；

```
INFO   | jvm 1    | 2012/11/02 15:45:31 | JRuby limited openssl loaded. http://jruby.org/openssl
INFO   | jvm 1    | 2012/11/02 15:45:31 | gem install jruby-openssl for full support.
INFO   | jvm 1    | 2012/11/02 15:46:31 | 2012-11-02 15:46:31.368:WARN:/:unable to create shared     application instance
INFO   | jvm 1    | 2012/11/02 15:46:31 | org.jruby.rack.RackInitializationException: no connection available|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-    INF/vendor/gems/activerecord-jdbc-adapter-1.1.3/lib/arjdbc/jdbc/connection.rb:61:in `initialize'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/gems/activerecord-jdbc-adapter-1.1.3/lib/arjdbc/jdbc/adapter.rb:31:in `initialize'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/gems/activerecord-jdbc-adapter-1.1.3/lib/arjdbc/jdbc/connection_methods.rb:6:in `jdbc_connection'|?from org/jruby/RubyKernel.java:2056:in `send'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:223:in `new_connection'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:245:in `checkout_new_connection'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:188:in `checkout'|?from org/jruby/RubyKernel.java:1418:in `loop'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:184:in `checkout'|?from file:/C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/lib/jruby-complete-1.6.1.jar!/META-INF/jruby.home/lib/ruby/1.8/monitor.rb:191:in `mon_synchronize'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:183:in `checkout'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:98:in `connection'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_pool.rb:326:in `retrieve_connection'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:123:in `retrieve_connection'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/connection_adapters/abstract/connection_specification.rb:115:in `connection'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/migration.rb:435:in `initialize'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/migration.rb:400:in `up'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/vendor/rails/activerecord/lib/active_record/migration.rb:383:in `migrate'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/config/../lib/database_version.rb:63:in `upgrade_and_start'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/config/../lib/database_version.rb:75:in `automatic_setup'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/config/environment.rb:131:in `(root)'|?from org/jruby/RubyKernel.java:1063:in `load'|?from C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/config/environment.rb:53:in `load_environment'|?from file:/C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/lib/jruby-rack-1.0.0.1.jar!/jruby/rack/rails.rb:46:in `to_app'|?from file:/C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/lib/jruby-rack-1.0.0.1.jar!/jruby/rack/rails.rb:191:in `new'|?from <script>:2:in `(root)'|?from org/jruby/RubyKernel.java:2021:in `instance_eval'|?from file:/C:/Users/eazakli/Desktop/sonar-3.2/sonar-3.2/war/sonar-server/WEB-INF/lib/jruby-rack-1.0.0.1.jar!/vendor/rack-1.2.1/rack/builder.rb:46:in `initialize'|?from <script>:2:in `(root)'|
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.jruby.rack.DefaultRackApplicationFactory$4.init(DefaultRackApplicationFactory.java:184)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.jruby.rack.DefaultRackApplicationFactory.getApplication(DefaultRackApplicationFactory.java:59)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.jruby.rack.SharedRackApplicationFactory.init(SharedRackApplicationFactory.java:27)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.jruby.rack.RackServletContextListener.contextInitialized(RackServletContextListener.java:40)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.Server.doStart(Server.java:224)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:72)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.sonar.application.StartServer.main(StartServer.java:48)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at java.lang.reflect.Method.invoke(Unknown Source)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.tanukisoftware.wrapper.WrapperSimpleApp.run    (WrapperSimpleApp.java:240)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at java.lang.Thread.run(Unknown Source)
INFO   | jvm 1    | 2012/11/02 15:46:31 | 2012-11-02 15:46:31.381:WARN:/:Error: application initialization failed
INFO   | jvm 1    | 2012/11/02 15:46:31 | org.jruby.rack.RackInitializationException: unable to create shared application instance
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.jruby.rack.SharedRackApplicationFactory.init(SharedRackApplicationFactory.java:39)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.jruby.rack.RackServletContextListener.contextInitialized(RackServletContextListener.java:40)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.jetty.Server.doStart(Server.java:224)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:72)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.sonar.application.StartServer.main(StartServer.java:48)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at java.lang.reflect.Method.invoke(Unknown Source)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
INFO   | jvm 1    | 2012/11/02 15:46:31 |   at java.lang.Thread.run(Unknown Source)
INFO   | jvm 1    | 2012/11/02 15:46:31 | 2012-11-02 15:46:31.434:INFO::Started     SelectChannelConnector@127.0.0.1:9000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:18:16.123

很明显sonar无法连接到SQL Server

发生这种情况的原因可能有很多

*   服务器名称拼写错误或端口号不正确。
*   SQL Server 未配置为使用 TCP/IP。从 SQL Server 的网络实用程序应用程序启用 TCP/IP 或让 jTDS 通过命名管道连接（有关如何执行此操作的信息，请参阅 URL 格式）。
*   服务器上有防火墙阻止了 1433 端口。

要检查是否启用了 TCP/IP 并且端口没有被阻止，您可以使用“telnet 1433”。在 telnet 没有连接之前，jTDS 也不会。如果您不知道原因，请向您的网络管理员寻求帮助

总结：在使用 SQL Server 设置 Sonar 时，使用 Java SQL 客户端（如 Squirrel SQL）测试连接并尝试各种连接方式非常有帮助。这样，您就知道是否有问题要怪 Sonar .

# python - 一次遍历两个字符串python

> ID：13208126
> 
> 赞同：1
> 
> 时间：2012-11-03T10:10:26.193
> 
> 标签：python

我有两个字符串，我想一次打印一个字符。就像说

```
s1 = "Hi"
s2 = "Giy"

for c,d in s1,s2:
    print c
    print d 
```

我预计输出是`HGiiy`. 但是，我得到了输出`Hi`。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:15:08.233

你需要使用[`itertools.izip_longest()`](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)：

```
In [7]: from itertools import izip_longest

In [8]: s1="Hi"

In [9]: s2="Giy"

In [10]: "".join("".join(x) for x in izip_longest(s1,s2,fillvalue=""))
Out[10]: 'HGiiy' 
```

或使用一个简单的`for`循环：

```
s1="Hi"
s2="Giy"
ans=""
for i in range(min(len(s1),len(s2))):
    ans+=s1[i]+s2[i]
ans += s1[i+1:]+s2[i+1:]    
print ans                 #prints HGiiy 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T10:11:03.413

使用`zip()`：

```
for c, d in zip(s1, s2):
    print c, d, 
```

请注意，这确实将循环限制为*最短*的字符串。

如果您需要*所有*字符，请[`itertools.izip_longest()`](http://docs.python.org/2/library/itertools.html#itertools.izip_longest)改用：

```
from itertools import izip_longest

for c, d in izip_longest(s1, s2, fillvalue=''):
    print c, d, 
```

您的版本在 tuple 上循环`(s1, s2)`，所以它会`s1`先打印，然后`s2`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T10:14:21.443

### 这是为什么不起作用的解释：

当你写：

```
for c, d in s1, s2:
    # ... 
```

它的意思是：

```
for c, d in [s1, s2]:
    # ... 
```

这与以下内容相同：

```
for s in [s1, s2]:
    c, d = s
    # ../ 
```

`s`什么时候，`Hi`字母被解压成`c`- `d`, . 当你尝试用 做同样的事情时，python 无法解压它，因为有三个字母但只有两个变量。`c == 'H'``d == 'i'``Giy`

* * *

如前所述，您想使用`zip_longest`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-15T20:40:36.327

使用这个功能，

```
 def  mergeStrings(a, b):
        s = ''
        count = 0
        for i in range(min(len(a),len(b))):
            s+=a[i]
            s+=b[i]
            count+=1
        s+= a[count:] if len(a) > len(b) else b[count:]
        return s 
```

# hashtable - 球拍：在 hasheq 错误中找不到键的值

> ID：13208127
> 
> 赞同：2
> 
> 时间：2012-11-03T10:10:33.643
> 
> 标签：hashtable, racket

作为用 Racket 编写的 servlet 的一部分，我想创建一个函数，将请求绑定（以字符串作为键和值的 hasheq 表的形式）转换为 SQL 表行（再次编写为带字符串的 hasheq 表作为键和 sql 类型作为值）。当相关函数收到两个哈希表时，这一切似乎都按预期工作，此时它失败并出现以下错误：

请求绑定是：

```
'#hasheq(("lastname" . "Smith")
         ("firstname" . "John")
          ("birthdate" . "1900-10-25")) 
```

列类型是

```
'#hasheq(("lastname" . "character varying")
         ("firstname" . "character varying")
         ("birthdate" . "date")) 
```

错误信息是：

```
Servlet (@ /<... servlet URL ...>) exception:
hash-ref: no value found for key
  key: "lastname" 
```

奇怪的是，如果将这些哈希表与相关代码片段一起粘贴到 DrRacket 提示符，它运行时不会产生错误

```
The value "Smith" needs to be converted to type "character varying"
The value "John" needs to be converted to type "character varying"
The value "1900-10-25" needs to be converted to type "date" 
```

我做错了什么？任何帮助是极大的赞赏！这是代码：

```
#lang racket

(define bindings-hash
  '#hasheq(("lastname" . "Smith")
           ("firstname" . "John")
           ("birthdate" . "1900-10-25")))

(define types-hash
  '#hasheq(("lastname" . "character varying")
           ("firstname" . "character varying")
           ("birthdate" . "date")))

(define (test)
  (eprintf "The request bindings are \n~v\n" bindings-hash)
  (eprintf "The column types are \n~v\n" types-hash)
  (for ([(this-key this-value) (in-hash bindings-hash)])
    (eprintf "The value ~v needs to be converted to type ~v\n"
             this-value
         (hash-ref types-hash this-key))))

(test) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:20:36.767

使用`hash-equal`字符串时使用。符号保证可以与 . 一起使用`eq?`，但字符串必须与 . 进行比较`equal?`。

问题是结果`(eq? "foo" "foo")`是未定义的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T13:48:46.947

这是一个实际的答案 - 对您问题的另一部分：为什么将代码粘贴到 DrRacket 中的 REPL？

字符串文字的多种用途`"lastname"`正在“实习”成为内存中的同一个 Racket 对象。结果，它们是`eq?`：

```
(eq? "lastname" "lastname")
=> #t 
```

但是在你真正的 servlet 程序中，哈希中的字符串值来自内存中的两个不同的 Racket 对象，即使它们碰巧具有相同的值。例如，让我们构造一个字符串，其`"lastname"`值为`(string-append "last" "name")`. 如果我们将*其*与字符串文字进行比较，`"lastname"`它们*不是* `eq?`

```
(eq? "lastname" (string-append "last" "name"))
=> #f 
```

它们在内存中不是同一个对象，所以它们*不是* `eq?`. 这两个不同的对象确实具有相同的值，所以它们*是* `equal?`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T13:35:24.520

*[这实际上只是对@soegaard 发布的出色答案的评论。我将其发布为“答案”只是为了获得体面的多行代码格式。]*

要使用 比较键的哈希值`equal?`，您可以使用

```
#hash([key0 . value0]
      [key1 . value1]) 
```

你也可以通过说创建完全相同的东西

```
(hash key0 value0
      key1 value1) 
```

如果你把它分成几行，成对的分组同样清晰，但没有所有额外的括号和点。

第一种方式比较传统，看起来像一个经典的关联列表。我发现自己更喜欢第二种风格。

# javascript - HTML5 postMessage 返回未定义

> ID：13208128
> 
> 赞同：2
> 
> 时间：2012-11-03T10:10:34.420
> 
> 标签：javascript, html, iframe, postmessage

我正在尝试使用 postMessage 在页面（在 example1.com 上）和在 example2.com 上的同一页面上的 iframe 之间进行跨域通信

当 iframe 完成加载后，它会使用以下命令向父页面发送 postMessage：

**parent.postMessage('你好父母', 'http://example1.com'); //这个命令有效**

在父页面（example1.com）中 postMessage 的事件处理程序中，我使用以下函数将响应发送回子页面（example2.com）：

```
//this function is defined in example1.com:

function receiveMessage(event){

    if (event.origin == "http://example2.com"){

        console.log('Message Received from iframe'); //this line works

        event.source.postMessage('hello to you too', event.origin); //this line does not work

    }

} 
```

由于某种原因，未触发 iframe 中 postMessage 的事件处理程序。

```
//this function is defined in example2.com

function receiveMessage(event){

    if (event.origin == "http://example1.com"){ // I even tried removing this check to no avail

        console.log('Message Received from parent'); //this line works

    }

} 
```

当父级尝试向 iframe 发送消息时，它只会返回 undefined。

任何帮助表示赞赏！

编辑：

我尝试在 example1.com 的 receiveMessage 事件中更改以下行：

**event.source.postMessage('你也好', event.origin);**

对此：

**event.source.postMessage('你也好', 'http://example2.com');**

但我收到以下错误：

**无法将消息发布到[http://example2.com](http://example2.com)。收件人来源[http://example1.com](http://example1.com)**

为什么 event.origin在收到来自 example2.com 的消息时评估为[http://example1.com ？](http://example1.com)

example1.com 正在尝试向自己发送 postMessage。这应该是错误的根源

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-05-11T21:36:31.700

有时 postMessage 可能非常不清楚在哪一帧发送和哪一帧接收。出于这个原因，我创建了一个小脚本来帮助解开帧之间的通信。

将以下代码段添加到您的页面并观察您的控制台以查看会发生什么。确保在与 postMessage 的帧间通信开始之前将其添加到您的页面。

```
 var listener = function (e) {
    console.log('Caught ', e.type, ' event from ', e.source.self, ' to ', e.target, ' origin ', e.origin, ' with data ', e.data, '. Full details: ', e);
  };

  function addToFrame(el) {
    var frames = el.querySelectorAll('iframe'), ifrm = 0;
    for (var i = 0; i < frames.length; i++) {
      frames[i].contentWindow.addEventListener("message", listener, true);
      ifrm += addToFrame(frames[i].contentWindow.document);
    }
    return i + ifrm;
  }

  window.addEventListener("message", listener, true);
  var c = addToFrame(document);
  console.log('Recursively added listener to main window and', c, 'frames'); 
```

在您的控制台中，它清楚地说明了哪个框架将什么发送到哪个其他框架。[有关详细信息，请参阅我在我的网站](http://elgervanboxtel.nl/site/blog/inspect-postmessage-events)上为您准备的博文。

我希望这将有助于弄清楚 iframe 通信 ;-)

ps 如果这没有帮助，请为您的问题创建一个[jsfiddle](https://jsfiddle.net/)。这将使我们更容易理解您遇到的问题...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-09T19:29:14.630

在我的**Vue**项目中，我得到了和你一样的结果，最后我把我的起源改成了另一个主机，比如`127.0.0.10`然后我得到了数据对象

这是我的代码

**第一个来源：127.0.0.10:8000**

```
function sendMessage() {
  document
    .getElementById('frame')
    .contentWindow
    .postMessage('Hello world!', '*');
}
```

```
<iframe class="d-none" src="http://127.0.0.20:8080/login" onload="sendMessage()" id="frame"></iframe>
```

**第二个来源：127.0.0.10:8000**

```
window.addEventListener(
  "message",
  function (event) {
      if (event.origin.indexOf('127.0.0.10:8000') > 0)
      {
          console.log(event.data);
      }
  }
);
```

# visual-studio-2008 - 如何将 MFC 应用程序移植到 Windows Embedded Compact 7？

> ID：13208130
> 
> 赞同：3
> 
> 时间：2012-11-03T10:10:41.913
> 
> 标签：visual-studio-2008, mfc, windows-embedded-compact

我正在尝试将 MFC 应用程序移植到 windows Embedded Embedded 7。我将 MFC 应用程序作为子项目添加到我使用 Visual Studio 2008 中的平台构建器创建的操作系统设计中。但我得到了以下错误。

致命错误：C:\Program Files\Microsoft Visual Studio 9.0\VC\ce\atlmfc\include\atlconv.h(695)：错误 C2039：“lstrlenW”：不是“ATL”的成员 NMAKE：致命错误 U1077： '"C:\Program Files\Microsoft Visual Studio 9.0\VC\VCPackages\VcBuild.exe"'：返回代码 '0x1'

有没有办法解决这个问题？？

经过进一步搜索，我发现一个博客说......

支持 MFC 和 ATL。但是，目前存在一个 Microsoft 错误，它会导致在 Windows CE 7 多核系统上运行此类使用 MFC 或 ATL 的应用程序时出现问题。为避免出现问题，您需要为 Windows CE 6 配置链接器。转到“项目 -> 属性” 现在选择： 配置 “属性 -> 链接器 -> 命令行” 如果已经有“/子系统”参数，请将其删除 添加以下字符串：/subsystem:windowsce,6.00

但是即使在遵循之后错误仍然存​​在......

请提出解决此问题的建议..

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-07-09T06:55:45.420

您需要为 Visual Studio 2008 SP1 安装 Windows Embedded Compact 7 ATL 更新。
它来自 Microsoft 作为 .MSI 安装程序。

```
http://www.microsoft.com/download/en/details.aspx?id=27729 
```

并修改您的项目以包括“其他包含目录” -

```
X:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\ce7\atlmfc\include
X:\Program Files (x86)\Microsoft Visual Studio 9.0\VC\ce7\include 
```

这为我解决了问题；我正在为 AMC_MkII (ARMv4I) 构建

# c++ - 这个简单的例子是否被视为 RAII

> ID：13208131
> 
> 赞同：1
> 
> 时间：2012-11-03T10:11:03.077
> 
> 标签：c++, raii

在性能方面，有没有更好的方法来做到这一点？

例如，创建一个名为 arraydata 的类/结构，它会分配一些对齐的内存供使用（尽管 .dataPtr 提供了一个指针）：

```
class arraydata//to allocate some memory, 
               //and return a pointer to that block of memory
{
    void *dataPtrV;

  public:

    double *dataPtr;

    arraydata(int a, int b)
    {
        dataPtrV=_aligned_malloc(a*b*sizeof(double),32);
        dataPtr=(double *)dataPtrV;
    }

    ~arraydata()
    {
        _aligned_free(dataPtrV);
        dataPtrV=NULL;
        dataPtr=NULL;
    }   
}; 
```

然后通过以下方式调用它：

```
 arraydata X(30,20); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T10:16:56.360

是的，这将被视为 RAII - 资源在构造函数中获取并在析构函数中释放。

我不确定你为什么要同时存储 a`void*`和 a`double*`虽然 - 只有 a`double*`就足够了。

另外，在复制你的类时要非常小心，因为这很容易导致泄漏并释放已经释放的数据。

无论如何，这也可以使用`std::unique_ptr`更惯用的方式来完成，并且不会影响您的班级：

```
struct aligned_free {
  void operator()(void* p) {
     _aligned_free(p);
  }
};

template<typename T>
T* aligned_malloc(std::size_t size, std::size_t alignment) {
  return static_cast<T*>(_aligned_malloc(size * sizeof(T), alignment));
}

std::unique_ptr<double, aligned_free> make_array_data(int a, int b) {
    return std::unique_ptr<double, aligned_free>(aligned_malloc<double>(a*b, 32));
}

auto arraydata = make_array_data(30, 20); 
```

* * *

这是您的课程，没有`void*`：

```
class arraydata//to allocate some memory, 
               //and return a pointer to that block of memory
{

  public:

    double *dataPtr;

    arraydata(int a, int b)
    {
        dataPtr=static_cast<double*>(_aligned_malloc(a*b*sizeof(double),32));
    }

    ~arraydata()
    {
        _aligned_free(dataPtr);
    }   
}; 
```

# google-chrome - 是否需要从 Meteor for Chrome 显式设置内容类型？

> ID：13208133
> 
> 赞同：0
> 
> 时间：2012-11-03T10:11:02.710
> 
> 标签：google-chrome, meteor

我试图使用 twitter bootstrap datepicker，如下所述：[如何让 twitter bootstrap datepicker 与 Meteor 一起使用？](https://stackoverflow.com/questions/11932485/how-can-i-get-a-twitter-bootstrap-datepicker-to-work-with-meteor/12041281#12041281)

我在 Meteor 客户端目录中包含客户端库，而不是创建一个包。

我注意到，在 Chrome Canary 下，我在包含的内容中得到以下信息`datepicker.js`：“资源解释为脚本，但使用 MIME 类型文本/html 传输”，但是，Safari 将其识别为应用程序/javascript 文件。尽管 Safari 似乎也无法正确识别它，但我收到了 SyntaxError：

> bootstrap-datepicker.js 上出现意外的令牌“<”控制台消息。

有没有办法在 Meteor 服务器端显式设置内容类型？或者，我做错了什么？

*** 编辑 *** 我是个白痴。我在应用程序的 HTML 文件中包含了 bootstrap-datepicker.js。没有意识到 Meteor 会为你解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-20T14:03:45.090

从已编辑的问题正文中复制的答案，以便可以接受：

> 我在应用程序的 HTML 文件中包含了 bootstrap-datepicker.js。没有意识到 Meteor 会为你解决这个问题。

# c# - 是否需要安装 .NET Framework？

> ID：13208140
> 
> 赞同：0
> 
> 时间：2012-11-03T10:12:34.823
> 
> 标签：c#, .net

我用 C# 制作了一个 Windows 应用程序。现在，我有这个问题：

在其他计算机上安装 Windows 应用程序是否需要安装 .NET Framework？因为安装 .NET Framework 需要一些时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:16:48.873

是的。必须安装 .NET Framework 才能运行您的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:34:33.623

对于使用 .Net Framework 制作的应用程序，是的，需要 .Net Framework。

如果它是从文件系统上的文件安装的，那么它是安装 .Net Framework 的最快位置。那么安装速度取决于系统速度。是的，这需要一些时间。.Net Framework 4.0 msi 约为 40 MB

对于 Web-Installer，安装速度取决于互联网连接速度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-04T10:13:25.367

通常是的，但是[这个链接器项目](http://www.remotesoft.com/linker/)可能能够绕过这个要求。
我从来没有使用过，所以不知道它的效果如何，不过可能值得一试。

# gwt - 如何使用 getSelecteditem 方法

> ID：13208142
> 
> 赞同：0
> 
> 时间：2012-11-03T10:12:36.740
> 
> 标签：gwt

如何对菜单栏对象使用 getSelecteditem 方法？

我的代码在这里：

```
 final MenuBar f2=new MenuBar(true);

    Command cm=new Command(){
    @Override
    public void execute() {
        // TODO Auto-generated method stub
        Window.alert("hello");
    }
};
f2.addItem(prop.getProperty("Submenu1"),cm);
f2.addItem(prop.getProperty("Submenu2"),cm); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T08:58:48.573

```
MenuBar menuList = new MenuBar(true);
menuList.setAutoOpen(true);

/**
 * First Menu Item
 */
MenuItem firstMenu = new MenuItem("First Menu", new Command() {
    @Override
    public void execute() {
       // write code for First Menu Click.
           doForFirstMenu();
    }
});
menuList.addItem(firstMenu );

/**
 * For Second Menu Item
 */
MenuItem secondMenu= new MenuItem("Second Menu", new Command() {
    @Override
    public void execute() {
       // Write code for second menu click.
       doForSecondMenu();
    }
});
menuList.addItem(secondMenu); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T15:24:48.007

为每个 MenuItem 添加单独的命令！

```
final MenuBar f2 = new MenuBar(true);

Command cm = new Command() {
    @Override
    public void execute() {
    Window.alert("sub1");
    }
};
Command cm2 = new Command() {
    @Override
    public void execute() {
    Window.alert("sub2");
    }
};

f2.addItem("Submenu1", cm);
f2.addItem("Submenu2", cm2); 
```

# android - 将视图添加为第一个孩子

> ID：13208144
> 
> 赞同：2
> 
> 时间：2012-11-03T10:12:38.757
> 
> 标签：android, android-layout, scrollview, android-relativelayout

我正在开发一个带有 ScrollView 的应用程序，其中的大部分视图都添加到 onCreate 的 RelativeLayout。像这样： ![在此处输入图像描述](../Images/44d889019d01391f58ece119e4d06752.png)

我还想在运行时添加视图。这些被添加到上图中的当前位置。我想要做的是在运行时在想要的位置添加视图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:49:04.557

按照建议将其中的布局转换`ScrollView`为 a `LinearLayout`，然后使用：

[`addView(child, index, layoutParams)`](http://developer.android.com/reference/android/view/ViewGroup)

在你的`LinearLayout`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:24:54.510

您可以将 RelativeLayout 转换为 LinearLayout 并设置`android:orientation="vertical"`.

在此 LinearLayout 中，您可以为水平视图嵌套另一个 LinearLayout，使用`android:orientation="horizontal"`.

这样，对于每个水平视图部分，您可以将子 LinearLayout 添加到您的父 LinearLayout，并且这些子元素中的每一个都将根据您的需要垂直排列在另一个下方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:17:58.910

将此设置为滚动视图 `android:orientation="vertical"`和`android:scrollbars="vertical"`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-11T15:00:57.593

我认为答案包含在最后一行（parent.addView(brick, **0** );)，但为了排除误解，我已经发布了所有代码。现在我也在做同样的事情

**xml**
`activity_view.xml`

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
>
    <ScrollView
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
    >
        <LinearLayout android:id="@+id/parent"
            android:layout_height="wrap_content"
            android:layout_width="wrap_content"
            android:orientation="horizontal"
        >
        </LinearLayout>
    </ScrollView>
</RelativeLayout> 
```

`tpl_yellow_brick.xml`

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_height="42dp"
    android:layout_width="42p"
>
    <TextView
        android:layout_height="wrap_content"
        android:layout_width="wrap_content"
        android:text="I'm square yellow brick"            
    />
</LinearLayout> 
```

**爪哇**

```
View brick = getLayoutInflater().inflate(R.layout.tpl_yellow_brick, null);
ViewGroup parent = findViewById(R.id.parent);
parent.addView(brick, 0); 
```

# node.js - nodejs中的子域

> ID：13208145
> 
> 赞同：8
> 
> 时间：2012-11-03T10:12:40.597
> 
> 标签：node.js, subdomain

如何处理 nodejs 的子域请求？

例如以下代码在控制台中对**[http://localhost:9876/[anything]](http://localhost:9876/[anything])**上的任何请求进行回显**测试**：

```
var http = require('http');

http.createServer(function(req, res){
    console.log("test");
}).listen(9876); 
```

现在我想回答**[http://[anything].localhost:9876/[anything]](http://[anything].localhost:9876/[anything])**上的任何请求， 它可以通过 apache 中的 **htaccess**来完成，NodeJS 中有什么替代方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T11:04:20.793

您的应用程序已经能够处理多个主机的请求。

由于您尚未指定 a [`hostname`](http://nodejs.org/api/http.html#http_server_listen_port_hostname_backlog_callback)：

> [...] 服务器将接受定向到任何 IPv4 地址 ( `INADDR_ANY`) 的连接。

并且，您可以确定哪个`host`用于从以下位置发出请求[`headers`](http://nodejs.org/api/http.html#http_request_headers)：

```
var host = req.headers.host; // "sub.domain:9876", etc. 
```

不过，您还需要为 DNS 或[`hosts`](http://en.wikipedia.org/wiki/Hosts_(file)).

或者，使用诸如[xip.io 之](http://xip.io/)类的服务——使用 IP 地址而不是`localhost`：

```
http://127.0.0.1.xip.io:9876/
http://foo.127.0.0.1.xip.io:9876/
http://anything.127.0.0.1.xip.io:9876/ 
```

# sql - 多值属性

> ID：13208147
> 
> 赞同：0
> 
> 时间：2012-11-03T10:13:03.490
> 
> 标签：sql, database

假设这里我们有一列来描述产品的描述。

我想我必须使用多值来填写表格。

这种错误违反了1NF原则吗？

我是数据库设计的初学者，最近我对此感到很困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:19:10.687

1NF 特别禁止多值属性，所以是的，在一个字段中有多个不同的值会违反它。

但是，包含许多单词的**单个**字段，只要它们是**单个**概念值（例如由许多单词组成的描述），就可以了。

一般来说，这是一个坏主意 - 它使查询变得更加困难（连接非常困难），您不会从索引中受益，这些只是最明显的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:22:49.690

空格并不总是定义单独的值。

您的示例显示了一个句子，这是一个值。

但是，如果这些是关键字，其顺序无关紧要，那么您可以说它违反了 1NF。

# php - 带有特殊字符的php，如ñ

> ID：13208149
> 
> 赞同：6
> 
> 时间：2012-11-03T10:13:04.217
> 
> 标签：php, utf-8, header, special-characters, json

起初我认为问题在于当我从 ajax 调用返回 echo json_encode($row) 时，ñ 的结果更改为 NULL。但是经过测试，我发现问题在此之前就存在。

在一个示例 php 文件中：

```
$test = "Nuñez"
echo $test 
```

结果只是 Nu�ez

我四处搜索，但建议的解决方案都不起作用。像：

```
mb_internal_encoding('UTF-8');
mb_http_output('UTF-8');
mb_http_input('UTF-8');
mb_language('uni');
mb_regex_encoding('UTF-8');
ob_start('mb_output_handler'); 
```

或`<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />`, 或`header('content-type: text/html; charset: utf-8');`. 还有一些我已经忘记的解决方案，相信我我尝试了很多。

这只是开始，我希望 mysql 不会有问题，因为我的数据库是 utf-8 格式，我的 $mysqli 字符集也是如此。但我想我不能对 ajax json_encode 说同样的话。但没关系，一次一个问题。任何人都可以帮助我。非常感谢！

***问题解决***了我只需要在 Notepad++ 中设置“UTF-8 编码”，就像之前在“ANSI 编码”中一样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T10:25:19.467

为了我

```
$test = "Nuñez";
echo $test; 
```

显示*努涅斯*

你可以试试

```
$test = "Nuñez";
echo utf8_decode($test); 
```

或者

```
$test = utf8_encode("Nuñez");
echo utf8_decode($test); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T10:27:52.923

试试这个

它对我有用。

```
$test = "Nuñez";

echo html_entity_decode(htmlentities($test)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-01-17T20:22:05.200

要在浏览器中正确显示 ñ Ñ á é í ó ú 等拉丁字符，您必须使用 iso-8859-1 而不是 UTF-8 编码 [http://www.w3schools.com/tags/ref_entities.asp](http://www.w3schools.com/tags/ref_entities.asp)

最好的祝福！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T10:29:19.723

当你连接到你的 mysql 数据库时，将 charset 设置为 utf-8，比如 ->

```
$sql_con = mysql_connect($sql_host, $sql_user, $sql_pass);
mysql_query('SET NAMES utf8'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-24T07:22:38.650

考虑设置default_charset，这对我有用

ini_set('default_charset', 'utf-8');

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-09-12T22:54:45.597

字符串“CASTAÑO”面临同样的问题。

我已经尝试过发布的解决方案。

我使用了`ini_set('default_charset', 'utf-8');`指令。

*   所选记录显示“CASTA�O”
*   使用*utf8-decode*显示“CASTA?O”
*   使用*utf8_encode*显示正确的字符串“CASTAÑO”

# sql - 如果 object_id 不为空，则无法删除过程

> ID：13208158
> 
> 赞同：3
> 
> 时间：2012-11-03T10:15:03.017
> 
> 标签：sql, tsql

我有一个奇怪的问题。我试图仅在程序存在时才删除它，并拥有以下代码：

```
IF OBJECT_ID(N'dbo.CreateBlogUser', N'U') IS NOT NULL
    DROP PROCEDURE CreateBlogUser;
    PRINT 'IS NOT NULL'
GO 
```

（印刷品仅用于尝试是否真实）。当我运行它时，会打印“IS NOT NULL”，但不会删除该过程！它仍然存在于数据库中，所以当我运行我的 Create 过程时，它失败了。

然而！当我试图从代码中删除 NOT 时，它起作用了！该过程被删除并且仍然打印“IS NOT NULL”。这似乎完全倒退了，我不知道为什么会这样。是否与 OBJECT_ID 中额外的 N:s 和 U:s 有关？[在这里](http://msdn.microsoft.com/en-us/library/ms190328.aspx)找到代码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:19:45.773

在“P”上替换“U”

```
IF OBJECT_ID(N'dbo.CreateBlogUser', N'P') IS NOT NULL
  DROP PROCEDURE CreateBlogUser;
PRINT 'IS NOT NULL'
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T10:20:20.343

在 SQL 中，你可以试试这个：-

```
IF NOT EXISTS (SELECT * FROM sys.objects WHERE type = 'P' AND name = 'CreateBlogUser')
    exec('CREATE PROCEDURE [dbo].[CreateBlogUser] AS BEGIN SET NOCOUNT ON; END')
    PRINT 'IS NOT NULL'
 GO 
```

在 TSQL 中你可以试试这个：-

```
 IF OBJECT_ID (N'dbo.CreateBlogUser', N'P') IS NOT NULL
  DROP TABLE dbo.CreateBlogUser;
  PRINT 'IS NOT NULL'
 GO 
```

请参阅此[文档](http://msdn.microsoft.com/en-us/library/ms190328.aspx)

# android - 无法通过 android 上的访问令牌获取 Facebook Graph API 信息

> ID：13208161
> 
> 赞同：1
> 
> 时间：2012-11-03T10:15:31.150
> 
> 标签：android, facebook-graph-api, access-token

我正在 android 上编写一个简单的应用程序来获取通过 Facebook 登录该应用程序的用户的信息。这是我的代码：

```
public class example extends Activity {

Facebook facebook = new Facebook("id");
AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);

private static final String TAG ="Debug";
private SharedPreferences mPrefs;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_example);
    /*
     * Get existing access_token if any
     */
    mPrefs = getPreferences(MODE_PRIVATE);
    String access_token = mPrefs.getString("access_token", null);
    long expires = mPrefs.getLong("access_expires", 0);
    if(access_token != null) {
        facebook.setAccessToken(access_token);
    }
    if(expires != 0) {
        facebook.setAccessExpires(expires);
    }

    /*
     * Only call authorize if the access_token has expired.
     */
    if(!facebook.isSessionValid()) {

        facebook.authorize(this, new String[] {"publish_stream","email","user_groups","read_stream","user_about_me","offline_access"}, new DialogListener() {
            @Override
            public void onComplete(Bundle values) {
                SharedPreferences.Editor editor = mPrefs.edit();
                editor.putString("access_token", facebook.getAccessToken());
                editor.putLong("access_expires", facebook.getAccessExpires());
                editor.commit();
            }

            @Override
            public void onFacebookError(FacebookError error) {}

            @Override
            public void onError(DialogError e) {}

            @Override
            public void onCancel() {}
        });
    }        
    Log.d(TAG, access_token);
    getInformation();
}

private void getInformation(){

    JSONObject json = null;

    try
    {
        Log.d("testing", "point1");
        String response = facebook.request("me");
        Log.d("testing", "point2");
        json = Util.parseJson(response);
        String id = json.getString("id");
        Log.d("testing", id);
    }
    catch (MalformedURLException e)
    {
        e.printStackTrace();
    }
    catch (JSONException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    catch (FacebookError e)
    {
        e.printStackTrace();
    }

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}

@Override
public void onResume() {    
    super.onResume();
    facebook.extendAccessTokenIfNeeded(this, null);
}
} 
```

我在这里关注[https://developers.facebook.com/docs/mobile/android/build/#sdk](https://developers.facebook.com/docs/mobile/android/build/#sdk)并使用相同的 facebook SDK。所以如代码所示，在 logcat 中只有 point1 而不是 point2，这意味着 facebook.request("me") 不成功。模拟器显示应用程序关闭并说“不幸的是，示例已停止”。

那么有人可以帮我指出这个问题吗？我想知道访问令牌中是否有问题，但我不知道。非常感谢。

日志猫：

```
11-03 10:13:55.986: D/Debug(893): AAAFi20EvlJEBACwBLIR4buSOaZB1emxACFPZCZAKums6ZCNwZB0wZCvQnI3grshT0YNl8ZC427BSkrNye6akdCZBjvp4KL24Oyx......
11-03 10:13:55.986: D/testing(893): point1
11-03 10:13:56.106: D/AndroidRuntime(893): Shutting down VM
11-03 10:13:56.106: W/dalvikvm(893): threadid=1: thread exiting with uncaught exception (group=0x409c01f8)
11-03 10:13:56.136: E/AndroidRuntime(893): FATAL EXCEPTION: main
11-03 10:13:56.136: E/AndroidRuntime(893): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.crush/com.example.crush.Crush}: android.os.NetworkOnMainThreadException
11-03 10:13:56.136: E/AndroidRuntime(893):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1956) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:41:12.213

您正在主线程上运行网络操作。使用异步任务在后台线程中运行网络操作（在后台线程中执行您的 http 请求）。这就是你得到 android.os.NetworkOnMainThreadException 的原因。

在这样的异步任务中建立网络：

```
class FacebookRequestTask extends AsyncTask{

    protected void onPreExecute() {
    //show a progress dialog to the user or something
    }

    protected void doInBackground() {
        //Do your networking here
    }

    protected void onPostExecute() {
        //do something with your parsed 
        //response (JSON data in case of facebook API's) here 
        // and dismiss the progress dialog
    }
  }

  new facebookRequestTask().execute(); 
```

如果您不知道如何使用异步任务，这里有一些教程供您参考：

[http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/](http://mobileorchard.com/android-app-developmentthreading-part-2-async-tasks/)

[http://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

以下是来自 Google 的官方文档：

[https://developer.android.com/reference/android/os/AsyncTask.html](https://developer.android.com/reference/android/os/AsyncTask.html)

# java - 像 onchildclick 这样的单击侦听器，onitemlongclick 不能在可扩展列表视图中工作，除了 GroupClickListener？

> ID：13208164
> 
> 赞同：2
> 
> 时间：2012-11-03T10:15:42.473
> 
> 标签：java, android

嗨朋友们，我正在使用可扩展的列表视图...

我从数据库中获取值，它显示得很好，但是没有听众在下面工作是我的来源......

MainActivity.java

```
package shenhengbin.practice;

import java.util.ArrayList;
import java.util.List;

import shenhengbin.practice.entity.Constants;
import shenhengbin.practice.entity.DBSQLite;
import shenhengbin.practice.entity.GroupEntity;
import shenhengbin.practice.entity.GroupEntity.GroupItemEntity;
import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemLongClickListener;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.SimpleCursorTreeAdapter;
import android.widget.ExpandableListView.OnChildClickListener;
import android.widget.ListView;

public class MainActivity extends Activity {

    private ExpandableListView  mExpandableListView;
    private ListView            listView;
    private List<GroupEntity>   mGroupCollection;
    private BaseExpandableListAdapter adapter ;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        init();
        setupDefaults();
        setupEvents();

    }

    private void init() {
        listView=(ListView) findViewById(R.id.listView);
        mExpandableListView=(ExpandableListView) findViewById(R.id.expandableListView);
    }

    private void setupDefaults() {
        prepareResource();
    }

    private void setupEvents() {
        adapter =new ExpandableListAdapter  (this,mExpandableListView, mGroupCollection);
        mExpandableListView.setAdapter(adapter);
        mExpandableListView.setOnChildClickListener(new OnChildClickListener() {

            @Override
            public boolean onChildClick(ExpandableListView parent, View v,
                    int groupPosition, int childPosition, long id) {
                Log.e("child","clicked");
                return false;
            }
        });
        mExpandableListView.setOnItemLongClickListener(new OnItemLongClickListener() {

            @Override
            public boolean onItemLongClick(AdapterView<?> arg0, View arg1,
                    int arg2, long arg3) {
                Log.e("Long","Click ENabled");
                return false;
            }
        });
    }

    private void prepareResource() {
        mGroupCollection = new ArrayList<GroupEntity>();
        DBSQLite.openDatabase(getApplicationContext());
        Cursor favoriteResultSet=Constants.SQLITE_CONNECTION.select("select * from names");
        if(favoriteResultSet.getCount()>0)
        {while(favoriteResultSet.moveToNext()){
            String name     =favoriteResultSet.getString(favoriteResultSet.getColumnIndex("names"));
            Log.e("google_",""+name);
            GroupEntity ge = new GroupEntity();
            ge.Name = name;
            Cursor favoriteResultSetChild=Constants.SQLITE_CONNECTION.select("select friends from friends where names ='"+name+"';");
            if(favoriteResultSetChild.getCount()>0)
            {while(favoriteResultSetChild.moveToNext()){
                String childName        =favoriteResultSetChild.getString(favoriteResultSetChild.getColumnIndex("friends"));
                Log.e("google_child",""+childName);
                GroupItemEntity gi = ge.new GroupItemEntity();
                gi.Name = childName;
                ge.GroupItemCollection.add(gi);
            }}
            favoriteResultSetChild.close();
            mGroupCollection.add(ge);
        }}
        favoriteResultSet.close();
    }

    @Override
    protected void onDestroy() {
        super.onDestroy();
        DBSQLite.closeDatabase();
    }
} 
```

ExpandableListAdapter.java

```
package shenhengbin.practice;

import java.util.List;

import shenhengbin.practice.entity.GroupEntity;
import android.content.Context;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseExpandableListAdapter;
import android.widget.ExpandableListView;
import android.widget.ExpandableListView.OnGroupClickListener;
import android.widget.ExpandableListView.OnGroupCollapseListener;
import android.widget.ExpandableListView.OnGroupExpandListener;
import android.widget.ImageView;
import android.widget.TextView;

public class ExpandableListAdapter extends BaseExpandableListAdapter {

    private Context                 mContext;
    private ExpandableListView      mExpandableListView;
    private List<GroupEntity>       mGroupCollection;
    private int[]                   groupStatus;

    public ExpandableListAdapter(Context pContext,ExpandableListView pExpandableListView,List<GroupEntity> pGroupCollection) {
        mContext                =   pContext;
        mGroupCollection        =   pGroupCollection;
        mExpandableListView     =   pExpandableListView;
        groupStatus             =   new int[mGroupCollection.size()];

        setListEvent();
    }

    private void setListEvent() {

        mExpandableListView.setOnGroupExpandListener(new OnGroupExpandListener() {

            @Override
            public void onGroupExpand(int arg0) {
                groupStatus[arg0] = 1;
            }});

        mExpandableListView.setOnGroupCollapseListener(new OnGroupCollapseListener() {

            @Override
            public void onGroupCollapse(int arg0) {
                groupStatus[arg0] = 0;
            }});
    }

    @Override
    public String getChild(int arg0, int arg1) {
        return mGroupCollection.get(arg0).GroupItemCollection.get(arg1).Name;
    }

    @Override
    public long getChildId(int groupPosition, int childPosition) {
        return 0;
    }

    @Override
    public int getChildType(int groupPosition, int childPosition) {
        return super.getChildType(groupPosition, childPosition);
    }

    @Override
    public long getCombinedChildId(long groupId, long childId) {
        return super.getCombinedChildId(groupId, childId);
    }

    @Override
    public long getCombinedGroupId(long groupId) {
        return super.getCombinedGroupId(groupId);
    }

    @Override
    public View getChildView(int arg0, int arg1, boolean arg2, View arg3,
            ViewGroup arg4) {
        ChildHolder childHolder;
        if (arg3 == null) {
            arg3 = LayoutInflater.from(mContext).inflate(R.layout.list_group_item, null);
            childHolder = new ChildHolder();
            childHolder.title = (TextView) arg3.findViewById(R.id.item_title);
            arg3.setTag(childHolder);
        }
        else {childHolder = (ChildHolder) arg3.getTag();}

        childHolder.title.setText(mGroupCollection.get(arg0).GroupItemCollection.get(arg1).Name);
        return arg3;
    }

    @Override
    public int getChildrenCount(int arg0) {

        return mGroupCollection.get(arg0).GroupItemCollection.size();
    }

    @Override
    public Object getGroup(int arg0) {

        return mGroupCollection.get(arg0);
    }

    @Override
    public int getGroupCount() {
        return mGroupCollection.size();
    }

    @Override
    public long getGroupId(int arg0) {
        return arg0;
    }

    @Override
    public View getGroupView(int arg0, boolean arg1, View arg2, ViewGroup arg3) {
        GroupHolder groupHolder;
        if (arg2 == null) {

            arg2 = LayoutInflater.from(mContext).inflate(R.layout.list_group,null);
            groupHolder = new GroupHolder();
            groupHolder.img = (ImageView) arg2.findViewById(R.id.tag_img);
            groupHolder.title = (TextView) arg2.findViewById(R.id.group_title);
            arg2.setTag(groupHolder);

        } 

        else {
            groupHolder = (GroupHolder) arg2.getTag();
        }

        if (groupStatus[arg0] == 0) {
            groupHolder.img.setImageResource(R.drawable.group_down);
        } 
        else
        {
            groupHolder.img.setImageResource(R.drawable.group_up);
        }
        groupHolder.title.setText(mGroupCollection.get(arg0).Name);
        return arg2;
    }

    class GroupHolder {
        ImageView img;
        TextView title;
    }

    class ChildHolder {
        TextView title;
    }

    @Override
    public boolean hasStableIds() {
        return true;
    }

    @Override
    public boolean isChildSelectable(int arg0, int arg1) {
        return false;
    }

} 
```

帮我。如何在可展开列表视图中启用所有点击侦听器。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T23:50:10.677

如果你说的监听器是 OnChildClickListener，那么问题就出在这里：

```
@Override
    public boolean isChildSelectable(int arg0, int arg1) {
        return false;
    } 
```

它需要是

```
@Override
        public boolean isChildSelectable(int arg0, int arg1) {
            return true;
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T15:14:55.997

我有一个类似的问题。尝试检查描述子元素（R.layout.list_group_item）的 xml 文件并设置：`android:clickable="false"` 它对我有用。

# .net - asp,net中的GTalk API

> ID：13208168
> 
> 赞同：1
> 
> 时间：2012-11-03T10:16:43.683
> 
> 标签：.net, api, google-talk, messenger

我想构建一个使用 GTalk / Yahoo messenger api 的 asp.net Web 应用程序，它将预定义的消息发送到服务器并从另一端接收回确认消息。我想在不使用任何 gui(messenger/gtalk) 的情况下实现它，但只想通过 api 调用来实现它。

非常感谢您的帮助

# objective-c - iOS - 在 Objective-C 中从媒体中获取 [Explicit] 和 [Clean] 标签

> ID：13208169
> 
> 赞同：7
> 
> 时间：2012-11-03T10:16:43.897
> 
> 标签：objective-c, ios, avfoundation, explicit, mpmediaquery

当我在 iTunes 中查看我购买的音乐时，明确的歌曲在歌曲列表中旁边会显示一个红色的明确框。即，您在购买歌曲时看到的显式标签会传递到 iTunes 库。对于标记为干净的歌曲 itunes 也是如此。我真的很希望能够识别我的 ios 应用程序中明确的任何歌曲，但我找不到任何关于标签是否与其他歌曲信息 (MPMediaItemProperty) 一起传递到 ios 设备的资源，如果是的话如何得到它（我已经无休止地搜索了！）有些歌曲在标题末尾包含“[Explicit]，但这只是一些歌曲的情况，而不是全部。有谁知道标签是否存在并且可以从Objective读取-C 代码？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T16:59:24.990

好吧，这花了我好几个小时才找到！做好准备，它并不像使用`MPMediaQuery`.

## 概述

您需要的数据无法通过标准渠道轻松访问（即 MediaPlayer 或 AVFoundation 框架中没有预定义的密钥来访问此元数据）。它可以通过大多数 ID3 标签编辑器使用，名称为`ITUNESADVISORY`. 这个标签可以取 3 个值：

> 0 - 没有咨询信息
> 
> 1 - 显式
> 
> 2 - 清洁

这是我们正在寻找的，但是我们如何访问它。该`MediaPlayer`框架相当高级，这意味着我们可以访问/使用的数据受到限制。为了更深入地查看媒体文件，我们还需要使用`AVFoundation`框架。

## 如何

我不知道您使用的是什么确切的工作流程，但我希望您可以根据自己的需要进行调整。为了确定媒体文件是否是显式/干净的，我做了如下操作：

1.  我需要获取一个`MPMediaItem`包含我要检查的文件的文件。我使用`MPMediaPickerController`、呈现它并通过它的委托方法检索选定的媒体项目：

    ```
    - (void)mediaPicker:(MPMediaPickerController *)mediaPicker didPickMediaItems:(MPMediaItemCollection *)mediaItemCollection {
        // Do whatever is appropriate in your case to extract the media items
        MPMediaItem* item = [mediaItemCollection.items objectAtIndex:...];
        ....
    } 
    ```

2.  一旦我有了我的`MPMediaItem`，我需要得到等价的`AVAsset`，这样我就可以使用`AVFoundation`框架。为此，我可以使用媒体项中的 URL 路径来创建资产。

    ```
    MPMediaItem* item = ...;
    NSURL* path = [item valueForProperty:MPMediaItemPropertyAssetURL];

    // We have to check if a path exists, because a media item may not be present on the device. Blame iTunes Match.
    if (path) {
        AVAsset* asset = [AVAsset assetWithURL:path];
        .... 
    ```

3.  拥有资产后，我们需要从中获取元数据。根据实验，这是 iTunes 元数据。因此，让我们从我们的资产中提取它。

    ```
    NSArray* metadata = [asset metadataForFormat:AVMetadataFormatiTunesMetadata]; 
    ```

4.  这是有趣的、无证工作的开始。我们现在必须为我们想要的找到正确的元数据项。由于在 Apple 的任何文档中都没有将咨询键声明为常量，因此经过大量试验和错误，我发现它是`1920233063`.

    为了得到正确的元数据项，我们需要对元数据数组进行过滤，如下所示：

    ```
    NSUInteger advisoryIndex = [metadata indexOfObjectPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
        if ([obj isKindOfClass:[AVMetadataItem class]]) {
            AVMetadataItem* metaItem = (AVMetadataItem*)obj;
            NSNumber* advisoryKeyTest = @(1920233063);

            if ([metaItem.key isEqual:advisoryKeyTest]) {
                *stop = YES;
                return YES;
            }
            return NO;
        }
        return NO;
    }]; 
    ```

5.  一旦我们这样做了，那么我们需要确定它是什么。这个比较简单，可以根据自己的需要进行调整。我刚刚写了一个简单的 switch 语句，说明歌曲/媒体的类型。（**记住：**媒体文件完全有可能不包含advisory标签，所以我们必须检查索引是否存在）

    ```
    if (advisoryIndex != NSNotFound) {
        AVMetadataItem* metaItem = [metadata objectAtIndex:advisoryIndex];

        NSInteger advisoryValue = [metaItem.numberValue integerValue];
        switch (advisoryValue) {
            case 0:
                NSLog(@"%@", @"Unspecified");
                break;
            case 1:
                NSLog(@"%@", @"Explicit");
                break;
            case 2:
                NSLog(@"%@", @"Clean");
                break;
            default:
                NSLog(@"%@", @"Unexpected Value");
                break;
        }
    } 
    ```

## 结论

你有它，一种方法来确定一首歌是干净的还是明确的，或者两者都不是。因为这是使用静态数字来查找咨询数据，并且没有链接到 Apple 标头中定义的任何常量，所以我不能保证这将适用于过去、现在和将来的所有 iOS 版本。我已经在 iOS 6 上对此进行了测试，它似乎没问题。您的里程可能会有所不同。

遗憾的是，Apple 没有开箱即用地提供此功能（即使他们只是提供了咨询密钥）。如果您愿意，可以将此功能放置在一个类别中。

# c# - Mono for Android WebClient 特殊字符

> ID：13208171
> 
> 赞同：1
> 
> 时间：2012-11-03T10:16:49.383
> 
> 标签：c#, android

我正在使用 Mono for Android (C#) 和 WebClient DownloadString 来获取 HTML 网站的源代码，该网站使用特殊字符（č、š、ž）。但是在显示代码时，它会显示 � 而不是字符。有没有办法显示正确的字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:22:08.727

此代码删除或替换字符串中的特殊字符 ....

C# 中的 System.Net.WebUtility.HtmlDecode(..)

# php - 用户在线离线状态 - 离线状态问题

> ID：13208172
> 
> 赞同：1
> 
> 时间：2012-11-03T10:16:49.507
> 
> 标签：php, mysql, status

首先，这是[PHP 的相关问题：在线离线状态](https://stackoverflow.com/questions/13201579/php-online-offline-status/13201617#comment17974371_13201617) 但由于我的方法略有不同并且问题也很大，所以我认为新问题会更好。

现在我在 qa_users 表中添加了一个名为“online”的列，它插入/更新记录时间并在用户交互时保持更新（我不确定它是否正确）

现在它会在用户登录后立即在线显示用户，但问题是在注销后他们保持显示状态为在线并且永远不会进入离线状态。

我认为我的时间比较条件代码有问题，但我不知道。

请在下面找到我正在使用的代码。

```
$loggedtime = date('Y-m-d h:i:s', time()-300); // 5 minutes

$query = 'SELECT userid, handle, online FROM ^users ORDER BY userid ASC';           
$result = qa_db_query_sub($query);  

while($ids = mysql_fetch_array($result)){

    $online = $ids['online'];
    $userid = qa_get_logged_in_userid();

    if(qa_is_logged_in()){
        $update = 'UPDATE ^users SET online = NOW() WHERE userid = '.$userid.'';

        qa_db_query_sub($update);
    }

    $time = $ids['online'];

    if ($time >= $loggedtime){ // i have tried with $loggedtime > $time too
        echo '<li>'.$ids['handle'].' online</li>';
    } else {
        echo '<li>'.$ids['handle'].' offline</li>';
    }               

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:23:35.233

在不知道您的数据库结构的情况下，这是一种猜测。

```
if ($time >= $loggedtime) 
```

您正在将“2012-11-01 10:10:10”之类的字符串与`$time`数据库中的任何内容进行比较。这似乎是这里的问题。您可以/应该使用 UNIX 时间戳。它们可以很容易地进行比较。

如果`$time`是 UNIX 时间戳，您可以这样做：

```
if ($time >= time()-300) 
```

**编辑：**

更改查询以获取 UNIX 时间戳`online`

```
$query = 'SELECT userid, handle, UNIX_TIMESTAMP(online) as online FROM ^users ORDER BY userid ASC'; 
```

**EDIT2：** 为了更清楚：在您的第一个版本中，您以“2012-11-01 10:10:10”的形式比较两个日期

```
if ('2012-11-01 10:10:10' < '2012-11-02 10:10:10') 
```

这在 PHP 中是行不通的——就像这样做：

```
if ('apples' < 'bananas') 
```

你必须比较数字。因此，我建议使用可以轻松比较的 unix 时间戳。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:26:10.350

让我从这个开始：

> [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护，并且已经开始[弃用过程。](http://news.php.net/php.internals/53799)看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

我用于此类事情的方法是不仅保存用户的登录状态，还保存他的**最后活动时间**。

活动可能意味着：

*   浏览了一页。
*   提交了表格。
*   在您的网站上做过任何事情

如果以下情况之一适用，则认为用户已注销：

*   用户已通过“注销”链接注销。
*   用户已 N 秒未处于活动状态。

要检查活动，请将上次活动时间与当前时间进行比较。如果差 ( `$currentTime - $lastActiveTime`) 大于`N`，则认为用户已注销。

登录用户列表将每隔几秒钟刷新一次（使用某种缓存机制），其中非活动用户将`UPDATE`在数据库中“注销”，从而为您节省一些查询时间和以后的处理时间。

# delphi - Delphi2009、IBX 和带有 utf8 的 firebird 给出除以零错误

> ID：13208175
> 
> 赞同：1
> 
> 时间：2012-11-03T10:17:07.653
> 
> 标签：delphi, firebird, delphi-2009, firebird2.5

我将 Delphi 2009 与 firebird 2.5 和 IBXpres 一起使用，我得到“除以零”错误。

firebird 的数据库是用 charset`UTF8`和collat​​ion 创建的`UNICODE_CI`。

我已经修改了 IBSQL.pas，重新编译了 ibxpress120.bpl，并且在设计时一切正常。[这是修复的链接](http://qc.embarcadero.com/wc/qcmain.aspx?d=69856)

问题是当我打开我的数据集时，我仍然在运行时收到错误：

```
MyIBDataSet.Open; 
```

如果我使用`UNICODE_FSS`字符集，一切正常，但我不能将排序规则设置为“不区分大小写”

任何我不知道的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:02:27.583

正如 Jeff Overcash 在您链接的 QC 报告中所述，IBX 不支持 Firebird。所以最好的解决方案不是尝试为它寻找解决方法，而是切换到其他一些官方支持 FB 的组件集。我一直在使用[UIB（Unified Interbase）](http://www.progdigy.com/)，但也有其他可用的解决方案。

# javascript - 如何处理事件冒泡？

> ID：13208182
> 
> 赞同：1
> 
> 时间：2012-11-03T10:17:54.687
> 
> 标签：javascript, events, backbone.js, publish-subscribe, event-bubbling

我正在开发一个小型骨干应用程序。

我目前遇到的问题是我想显示特定项目的配置文件。

当我单击列表项时会触发此 showProfile 事件。不是 showProfile 事件需要通知父 listView 通知上面的 sidebarView 通知 mainView 现在可以实例化 profileView。

这将涉及事件链中的三到四个视图。这个问题有可能的解决方法吗？

问候， 博多

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:37:10.207

我不知道这是否是最好的方法，但是对于这种情况，我通过创建一个具有扩展 Backbone.Events 的事件属性的对象来使用应用程序级事件聚合器。

我也倾向于使用相同的对象来存储应用程序范围的设置：

```
var app = {
    settings: {},
    events: _.extend({}, Backbone.Events),
}; 
```

然后，您可以从您的视图中触发一个 showProfile 事件并绑定到您的 mainView 中的 app.event，而无需在所有父视图中冒泡。

使用 RequireJS 时，我创建了一个应用程序模块，它是我的视图的依赖项：

```
define([
    "jquery",
    "underscore",
    "backbone"
],

function($, _, Backbone) {
   var app = {
       root: "/",
       settings: {},
       events: _.extend({}, Backbone.Events),
   };

 return app;

}); 
```

我也倾向于将我的路由器放在 app 对象上，以防我需要在视图中访问它，所以在我的 main.js 中（如在[主干样板](https://github.com/tbranyen/backbone-boilerplate)中）：

```
require([
   "app",
   "router",
],

function(app, Router) {
    app.router = new Router();
    Backbone.history.start({ pushState: true, root: app.root });
}); 
```

您可能想阅读 Derick Bailey 关于事件聚合器的博客文章：

[http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/](http://lostechies.com/derickbailey/2011/07/19/references-routing-and-the-event-aggregator-coordinating-views-in-backbone-js/)

[http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/](http://lostechies.com/derickbailey/2012/04/03/revisiting-the-backbone-event-aggregator-lessons-learned/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T02:18:34.323

同意，这类事情涉及很多样板。我尝试过的一种方法是通过使用（视图）方法来最小化这种情况，例如下面定义的方法：

```
/**
 * Helper to facilitate event-bubbling, that is to say, the scenario where a view
 * binds a callback to a child-View event only to retrigger it, mimicking the
 * inherent event bubbling mechanism of the DOM. Allows renaming of the bubbled
 * event as well as modification of the bubbled arguments
 *
 * @param view The View-dispatcher of the event
 * @param ev Name of the event to bubble
 * @param opts A hash of options where:
 *   bubbleName: New name of the event to bubble in case the event should be
 *   renamed. Optional
 *   args: The arguments to bubble:
 *    - When absent, the original arguments will be bubbled.
 *    - When set to a non-function value or an array-of-values, this value or
 *      values will be bubbled
 *    - When set to a function, it will be invoked on the incoming arguments and
 *      its returned value will be treated as in the previous case.
 */
bubbleEvent: function (view, ev, opts) {
  if (!opts) { opts = {}; }
  view.bind(ev, function () {
    var inArgs = _.toArray(arguments),
        bubbleArgs = _.isFunction(opts.args) ? 
          opts.args.apply(this, inArgs) : (opts.args || inArgs),
        bubbleName = opts.bubbleName || ev;
    this.trigger.apply(this, [bubbleName].concat(bubbleArgs));
  }, this);
} 
```

这将是 BaseView 的成员函数，您的所有其他视图都将扩展它。因此，它将在应用程序的每个视图中都可用。因此，为了让 ParentView 简单地冒泡由拥有的 childView 触发的事件，您只需要

```
bubbleEvent(childView, "event"); 
```

不过，这引入*了一些*样板，所以我也有兴趣看到这个问题的其他解决方案。

# prolog - Prolog 中的平凡否返回是

> ID：13208184
> 
> 赞同：0
> 
> 时间：2012-11-03T10:18:00.673
> 
> 标签：prolog

我在序言中有一个简单的谓词，当 MaxScore > 0 时，它给出是，否则为否。因此，如果 MaxScore 为 0，那么显然结果为否。但这不会发生。仔细看看这个：![https://dl.dropbox.com/u/18710637/prologIsInsane.png](../Images/b0b67d65beebf25a363c8fc1462324b1.png)

或对应代码：

```
aiPlay(PlayerNum, Board, Pos, BotType) :-
    aiTryAll(Board, PlayerNum, ScoreList, 0),
    scoreListGetPos(ScoreList, 1, Pos, MaxScore),
    write('MaxScore: '), write(MaxScore), nl,
    MaxScore > 0. 
```

以及相应的输出：

```
| ? myQuery(Pos).
MaxScore: 0
MaxScore: 0
MaxScore: 1
Pos = 6 ?
yes
| ? 
```

我快疯了。有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:32:19.790

真的没有问题；考虑这段代码：

```
foo(0).
foo(0).
foo(1).

bar:-
    foo(X),
    write(X), nl,
    X > 0. 
```

Prolog 将首先`X`与`0`（从第一个`foo(0)`）统一，将打印输出然后失败，因为`0 > 0`它是错误的。然后 prolog 将回溯并选择第二个`foo(0)`；再次相同。最后，`X`将统一`1`并`bar`返回`true`。

自然，打印等副作用无法逆转/回溯，因此在终端中您将看到：

```
0
0
1
true 
```

你如何解决它取决于你想做什么；如果你想打印，`Max Core = 1`那么你可以在检查 if 后进行打印`MaxScore>0`。一般来说，最好在最后进行打印（如果需要），而不是在程序深处的谓词中。

哦，对了，最好贴出实际代码和输出，而不是截图；它使复制粘贴调试代码变得更加容易。此外，建议给出一个可运行的示例：您使用的一半谓词`aiPlay/4`是未定义的，所以我只是猜测问题是我上面提到的：p

# java - 责任链模式

> ID：13208185
> 
> 赞同：1
> 
> 时间：2012-11-03T10:18:08.823
> 
> 标签：java, unit-testing, design-patterns, chain-of-responsibility

我正在尝试实现责任链模式，但似乎我遗漏了一些东西，因为在具体的类中，setnexthandler 没有设置下一个但总是相同的。我想我的错误出在 else statems next.setNextHandler(next); 中 processMalfunction() 方法中的具体类中。我认为第一个应该是 next.setNextHandler(Severity.Medium) 。如果您可以看一下，这里是代码。这是代码。

```
public interface MalfunctionHandler 
{
    public void processMalfunction(Malfunction malfunciton);
    public void setNextHandler(MalfunctionHandler handler);
}

public enum Severity 
{
    TRIVIAL, LOW, MEDIUM, HIGH
}

public class Malfunction
{
    /**
     * severity is a type of Severity 
     */
    Severity severity;

    /**
     * @param description describes the severity of the problem
     */
    String description;

    Malfunction(Severity severity, String description)
    {
        if(description == null)
        {
            description = "No description available. Probably serious.";
        }

        if(description.isEmpty())
        {
            description = "No description available. Probably serious.";
        }

        this.severity = severity;
        this.description = description;
    }

    public Severity getSeverity() 
    {
        return severity;
    }

    public String getDescription()
    {
        return description;
    }

    public void setSeverity(Severity severity)
    {
        this.severity = severity;
    }

    public void setDescription(String description)
    {
        this.description = description;
    }
}

public class SpaceMonkey implements MalfunctionHandler 
{

    Severity severity;
    MalfunctionHandler next;
    File read = new File("expected-bronze.txt");
    File f = new File("log-bronze.txt");

    SpaceMonkey(Severity severity)
    {
        this.severity = severity;
        System.out.println(FileUtility.readFile(read));
    }

    @Override
    public void processMalfunction(Malfunction malfunction)
    {
        if (malfunction.getSeverity() == Severity.LOW)
        {
           final String[] splits = FileUtility.readFile(read).split("problem.");
            for (String asset : splits)
            {
                if (asset.contains("Space monkey"))
                {
                     FileUtility.writeFile(f, asset + "problem."); 
                     System.out.println(asset + "problem.");
                }
            }
        }
        else
        {
            next.setNextHandler(next);
        }
    }

    @Override
    public void setNextHandler(MalfunctionHandler next)
    {
        this.next = next;
    }
}

public class ServiceRobot implements MalfunctionHandler
{

    Severity severity;
    MalfunctionHandler next;
     File read = new File("expected-bronze.txt");
      File f = new File("log-bronze.txt");

    ServiceRobot(Severity severity)
    {
        this.severity = severity;
    }

    @Override
    public void processMalfunction(Malfunction malfuntion) 
    {

        if (this.severity == severity)
        {
            String[] splits = FileUtility.readFile(read).split("problem.");
         for(String asset : splits)
        {
            if(asset.contains("Service robot"))
            {                  
                 FileUtility.writeFile(f, asset + "problem."); 
                 System.out.println(asset + "problem.");

            }
        }
        }
        else
        {
            next.setNextHandler(next);
        }
    }

    @Override
    public void setNextHandler(MalfunctionHandler next)
    {
        this.next = next;
    }

}

public class Engineer implements MalfunctionHandler
{

    Severity severity;
    MalfunctionHandler next;
    File read = new File("expected-bronze.txt");

    Engineer(Severity severity)
    {
        this.severity = severity;
    }

    @Override
    public void processMalfunction(Malfunction malfuntion)
    {
        File f = new File("log-bronze.txt");

        if (this.severity == severity)
        {
            String[] splits = FileUtility.readFile(read).split("problem.");
         for(String asset : splits)
        {
            if(asset.contains("Engineer"))
            {
                 FileUtility.writeFile(f, asset + "problem."); 
                 System.out.println(asset + "problem.");

            }
        }
        }
        else
        {
            next.setNextHandler(next);
        }
    }

    @Override
    public void setNextHandler(MalfunctionHandler next)
    {
        this.next = next;
    }

}

public class Captain implements MalfunctionHandler
{
    Severity severity;
    MalfunctionHandler next;
    File read = new File("expected-bronze.txt");

    Captain(Severity severity)
    {
        this.severity = severity;
    }
    @Override
    public void processMalfunction(Malfunction malfuntion)
    {
        File f = new File("log-bronze.txt");

        if (this.severity == severity)
        {
            String[] splits = FileUtility.readFile(read).split("problem.");
         for(String asset : splits)
        {
            if(asset.contains("Captain"))
            {
                 FileUtility.writeFile(f, asset + "problem."); 
                 System.out.println(asset + "problem.");

            }
        }
        }
        else
        {
            next.setNextHandler(next);
        }
    }

    @Override
    public void setNextHandler(MalfunctionHandler next)
    {
        this.next = next;
    }

}

public class FileUtility 
{

    /** This method appends a single string to a text file.
     * 
     * @param f The file to write to
     * @param entry The string to append
     */
    public static void writeFile(File f, String entry) 
    {
        try 
        {
            final BufferedWriter out = new BufferedWriter(new FileWriter(f, true));
            out.write(entry);
            out.close();
        } catch (IOException e) 
        {
            System.err.println("Problem writing to the file");
        }
    }

    /** This method resets the named text file.
     * 
     * @param f The file to reset
     */
    public static void resetFile(File f) {
        try {
            final BufferedWriter out = new BufferedWriter(new FileWriter(f, false));
            out.write("");
            out.close();
        } catch (IOException e) {
            System.err.println("Problem reset the file");
        }
    }

    /** This method reads the contents of a text file.
     * 
     * @param f The file to read from
     * @return the contents of the text file as a single string
     */
    public static String readFile(File f) {
        final StringBuilder sb = new StringBuilder();
        try {
            final Scanner scanner = new Scanner(f);
            while (scanner.hasNextLine()) {
                sb.append(scanner.nextLine());
            }
            scanner.close();
        } catch (FileNotFoundException e) {
            System.err.println("Problem reading from file");
        }
        return sb.toString();
    }
}

public class MalfunctionHandlerTest {

    /**
     * No-args constructor.
     */
    public MalfunctionHandlerTest() {
    }

    /**
     * Test of processMalfunction method.
     */
    @Test
    public void testProcessMalfunction() {

        // Instanciate malfunction handlers
        final SpaceMonkey sm = new SpaceMonkey(Severity.TRIVIAL);
        final ServiceRobot sr = new ServiceRobot(Severity.LOW);
        final Engineer e = new Engineer(Severity.MEDIUM);
        final Captain c = new Captain(Severity.HIGH);

        // Construct chain of responsbility
        sm.setNextHandler(sr); 
        sr.setNextHandler(e);
        e.setNextHandler(c);

        // Create malfunctions
        final Malfunction m1 = new Malfunction(Severity.HIGH, "Life support error. Oxygen "
                 + "Recycling unit damaged, running at half efficiency");      
        final Malfunction m2  = new Malfunction(Severity.LOW, "Communications error. Cannot "
                + "find Jazz FM");
        final Malfunction m3 = new Malfunction(Severity.MEDIUM, "Power supply error. Solar Panel "
                + "2 damaged, running at 31.3333% efficiency");
        final Malfunction m4 = new Malfunction(Severity.MEDIUM, "Thermal regulation error. Sensor "
                + "damaged, manual temperature regulation needed");
        final Malfunction m5 = new Malfunction(Severity.TRIVIAL, "Trash can full on C-Desk.");
        final Malfunction m6 = new Malfunction(Severity.LOW, "Shower plug hole full of monkey hair");
        final Malfunction m7 = new Malfunction(Severity.HIGH, "Proximity alert. Collision imminent");

        // Clean log file
        FileUtility.resetFile(new File("log-bronze.txt"));

        // Process malfunctions
        sm.processMalfunction(m1);
        sm.processMalfunction(m2);
        sm.processMalfunction(m3);
        sm.processMalfunction(m4);
        sm.processMalfunction(m5);
        sm.processMalfunction(m6);
        sm.processMalfunction(m7);

        // Check log file
        final String actualOutput = FileUtility.readFile(new File("log-bronze.txt"));
        final String expectedOutput = FileUtility.readFile(new File("expected-bronze.txt"));
        assertEquals(actualOutput, expectedOutput);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T10:29:58.520

我在这里看不到任何链设置。该模式的原理是让链中的每个环节都各司其职，然后以某种方式调用下一个环节。

所以一个方法应该如下所示：

```
public void processMalfunction(Malfunction malfunction) {
    doSomething();
    this.next.processMalfunction(malfunction);
} 
```

当然，应该先设置链，使用类似的东西

```
Link1 start = new Link1();
Link2 link2 = new Link2();
start.setNextHandler(link2);
Link3 link3 = new Link3();
link2.setNextHandler(link3);
... 
```

您当前的代码包括在某些条件为真时执行某些操作，否则将下一个处理程序的下一个处理程序分配给自身：

```
next.setNextHandler(next); 
```

# php - jQuery onClick 事件“覆盖”提交表单

> ID：13208187
> 
> 赞同：2
> 
> 时间：2012-11-03T10:18:40.347
> 
> 标签：php, jquery

我有一个问题，我知道这是一个基本问题。

我有一个html表单：

```
<form id="form-contact" name="htmlform" class="styled"  accept-charset="windows-1255,utf-8,iso-8859-1,us-ascii" action= "html_form_send.php" method="post"> 
```

和验证表单字段的 jquery onClick 事件，与将表单提交到 php 文件的相同提交按钮相关：

```
 <input id="btn-submit" class="btn-submit" type="image" width="60" height="34" src="images/Site_Images/btn_contact.jpg"  name="submit_btn" 
```

我的jQuery代码如下：

```
$('.btn-submit').click(function(e){

    var $formId = $(this).parents('form');
    var formAction = $formId.attr('action');
    defaulttextRemove();
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

    $('li',$formId).removeClass('error');
    $('span.error').remove();
    $('.required',$formId).each(function(){
        var inputVal = $(this).val();
        var $parentTag = $(this).parent();
        if(inputVal == ''){ 
            $parentTag.addClass('error').append('<span class="error">no data in the field</span>');
        }
        if($(this).hasClass('email') == true){
            if(!emailReg.test(inputVal)){
                $parentTag.addClass('error').append('<span class="error">email not accurate</span>');
            }
        }
    });

e.preventDefault();
}); 
```

* * *

我想要的行为是经过 jquery 验证后，如果一切正常，则将表单提交给 php。我希望我说得通。你能告诉我这种情况的正确方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:24:21.937

只需`$('#form-contact').submit();`在所有验证都通过的情况下使用。它很简单。您可以将 js 变量设置为 0 并将其设置为 1，以防任何验证失败。最后您可以检查该变量是否仍为 0 并且在该条件内放置`$('#form-contact').submit();`

出于验证目的，我建议您使用 jQuery Validate [http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) 它可以非常准确地验证数据。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T10:24:41.240

而不是绑定到`click`提交按钮的，绑定到`submit`表单的。试试这个：

```
$('#form-contact').submit(function(e) {
    var $form = $(this);
    var formAction = $form.attr('action');
    defaulttextRemove();
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

    $('li', $form).removeClass('error');
    $('span.error').remove();
    $('.required', $form).each(function(){
        var $field = $(this);
        var inputVal = $field.val();
        var $parentTag = $field.parent();
        if (inputVal == ''){ 
            $parentTag.addClass('error').append('<span class="error">no data in the field</span>');
            e.preventDefault();
        }
        if ($field.hasClass('email')) {
            if (!emailReg.test(inputVal)){
                $parentTag.addClass('error').append('<span class="error">email not accurate</span>');
                e.preventDefault();
            }
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:23:44.110

对于一般想法：

```
$('.btn-submit').click(function(e){
        e.preventDefault();
        var $formId = $(this).parents('form');
        var formAction = $formId.attr('action');
        defaulttextRemove();
        var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

        $('li',$formId).removeClass('error');
        $('span.error').remove();
        $('.required',$formId).each(function(){
            var inputVal = $(this).val();
            var $parentTag = $(this).parent();
            if(inputVal == ''){ 
                $parentTag.addClass('error').append('<span class="error">no data in the field</span>');
            }
            if($(this).hasClass('email') == true){
                if(!emailReg.test(inputVal)){
                    $parentTag.addClass('error').append('<span class="error">email not accurate</span>');
                }
            }
        });

        if($('*.error',$formId).length) return false;
        else $formId.trigger('submit');
    }); 
```

# python - 在尝试使用 GSettings 架构之前，如何确定它是否存在？

> ID：13208188
> 
> 赞同：9
> 
> 时间：2012-11-03T10:18:41.273
> 
> 标签：python, pygobject, gio

如果 GSettings 模式存在并且已经编译，那么读取它通常没有问题。但是，如果它不存在，通常会抛出无法处理的错误。在 Python 文件或控制台中试试这个：

```
from gi.repository import Gio
try:
    settings = Gio.Settings("com.example.doesnotexist")
except:
    print "Couldn't load those settings!" 
```

我尽可能广泛地使用`except`，但这是引发的错误。

> （进程：10248）：GLib-GIO-ERROR **：未安装设置架构“com.example.doesnotexist”

我基本上想要做的是找出`com.example.doesnotexist`模式是否存在；如果没有，那么告诉用户在使用我的应用程序之前运行我的设置脚本。任何其他关于这样做的建议都将受到欢迎。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-17T03:55:38.843

您可以使用[GSettingsSchemaSource](http://developer.gnome.org/gio/2.32/gio-GSettingsSchema-GSettingsSchemaSource.html)。例如：

```
> from gi.repository import Gio
> source = Gio.SettingsSchemaSource.get_default()
> source.lookup("org.gnome.Epiphany", True)
<GSettingsSchema at 0xa462800>
> source.lookup("com.example.doesnotexist", True)

> 
```

根据文档，如果模式不存在，查找应该返回`NULL`( )，但是在 PyGObject 中返回 NoneType。`None`无论如何，您可以使用它来检查模式是否存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-21T05:43:09.263

我知道是针对 Python 的。但这里为使用 C 的人提供了一个解决方案：

```
gboolean g_settings_schema_exist (const char * id)
{ 
  gboolean ret = FALSE;
  GSettingsSchema * res = g_settings_schema_source_lookup (
                                 g_settings_schema_source_get_default(), 
                                 id, FALSE);                                 
  if (res != NULL)
  {
    ret = TRUE;
    g_object_unref (res);
  }

  return ret;
} 
```

# java - Java Swing 中的行不重叠

> ID：13208190
> 
> 赞同：0
> 
> 时间：2012-11-03T10:18:59.720
> 
> 标签：java, swing, line, graphic

我在自制的 gridPanel 上的 JFrame 中画线。

问题是，我在两点之间画线。当我在点 1 和点 2 之间有一条线以及在点 2 和点 3 之间有一条线时，这些线应该连接起来。然而事实并非如此，两者之间有一个小的差距，不知道为什么。但它直到指定点结束时才绘制。（起点是正确的。）

这是JFrame的代码：

```
public void initialize(){
     this.setLayout(new BorderLayout());

    this.setPreferredSize(new Dimension(500, 400));
    gridPane = new GridPane();
    gridPane.setBackground(Color.WHITE);
    gridPane.setSize(this.getPreferredSize());
    gridPane.setLocation(0, 0);
    this.add(gridPane,BorderLayout.CENTER);

    //createSampleLabyrinth();
    drawWall(0,5,40,5);  //These are the 2 lines that don't connect.
    drawWall(40,5,80,5);
    this.pack();
} 
```

drawWall 调用的方法调用 GridPane 中的方法。gridPane 中的相关代码：

```
/**
 * Draws a wall on this pane. With the starting point being x1, y1 and its end x2,y2.
 * @param x1
 * @param y1
 * @param x2
 * @param y2
 */
public void drawWall(int x1, int y1, int x2, int y2) {
    Wall wall = new Wall(x1,y1,x2,y2, true);
    wall.drawGraphic();
    wall.setLocation(x1, y1);
    wall.setSize(10000,10000);
    this.add(wall, JLayeredPane.DEFAULT_LAYER);
    this.repaint();
} 
```

此方法创建一堵墙并将其放入 Jframe。墙的相关代码：

```
public class Wall extends JPanel {
private int x1;
private int x2;
private int y1;
private int y2;
private boolean black;

/**
 * x1,y1 is the start point of the wall (line) end is x2,y2
 * 
 * @param x1
 * @param y1
 * @param x2
 * @param y2
 */
public Wall(int x1, int y1, int x2, int y2, boolean black) {
    this.x1 = x1;
    this.x2 = x2;
    this.y1 = y1;
    this.y2 = y2;
    this.black = black;
    setOpaque(false);
}

private static final long serialVersionUID = 1L;

public void drawGraphic() {
    repaint();
}

public void paintComponent(Graphics g) {
    super.paintComponent(g);
    Graphics2D g2 = (Graphics2D) g;
    if(black){
        g2.setColor(Color.BLACK);
        g2.setStroke(new BasicStroke(8));
    } else {
        g2.setColor(Color.YELLOW);
        g2.setStroke(new BasicStroke(3));
    }
    g2.drawLine(x1, y1, x2, y2);
} 
```

}

那么，我哪里错了？真假是判断墙是黑还是黄，没什么好担心的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:40:33.890

您已将主布局设置为`BorderLayout`使用`this.setLayout(new BorderLayout());`

然后，您将其添加`GridPane`到中心位置`this.add(gridPane,BorderLayout.CENTER);`

然后，您尝试使用...将墙壁添加到主布局中`this.add(wall, JLayeredPane.DEFAULT_LAYER);`，但主布局是`BorderLayout`

这会给你带来一些问题

**更新**

您遇到的另一个问题是`Wall#paintComponent`方法。

您正在绘制偏离`x1`和`y1`位置的线，但组件已经定位在该点。

任何组件的左上角始终为 0x0

该行`g2.drawLine(x1, y1, x2, y2);`应该更像...

```
int x = x2 - x1;
int y = y2 - y1;
g2.drawLine(0, 0, x, y); 
```

**更新**

您还应该避免将组件的大小设置为任意值（例如 1000x1000），并更多地依赖组件向您提供反馈的能力......

```
public Dimension getPreferredSize() {
    int width = Math.max(x1, x2) - Math.min(x1, x2);
    int height = Math.max(y1, y2) - Math.min(y1, y2);

    if (black) {
        width += 8;
        height += 8;
    } else {
        width += 3;
        height += 3;
    }

    return new Dimension(width, height);
} 
```

然后在添加时`Wall`，您可以使用`wall.setSize(wall.getPreferredSize())`...

# javascript - JSLint 中出现意外的“\d”

> ID：13208195
> 
> 赞同：0
> 
> 时间：2012-11-03T10:19:34.360
> 
> 标签：javascript, regex, jslint

只是一个小问题：我试图让我的代码 JSLint 没有错误，但遇到了这个问题：

意外的“\d”。（在两个正则表达式中）

```
hourduration = parseInt(activity.endTime.replace(":\d\d", ""), 10) - parseInt(activity.startTime.replace(":00", ""), 10);

minuteduration = (parseInt(activity.endTime.replace("(\d)?\d:", ""), 10) - parseInt(activity.startTime.replace(":00", ""), 10)) / 60; 
```

我可以做些什么来改进我的正则表达式，以便 jslint 对其进行验证？

谢谢！

解决方案：

```
hourduration = parseInt(activity.endTime.replace(/:\d\d/, ""), 10) - parseInt(activity.startTime.replace(":00", ""), 10);

minuteduration = (parseInt(activity.endTime.replace(/(\d)?\d:/, ""), 10) - parseInt(activity.startTime.replace(":00", ""), 10)) / 60; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:23:33.750

JSLint 希望您使用 RegExp 对象或`/regex/`“字符串”，而不是普通字符串：

```
// JSLint error
foo.match(':\d\d');
foo.match(RegExp(':\\d\\d'));

// no error
foo.match(/:\d\d/);
foo.match(new RegExp(':\\d\\d')); 
```

编辑：所有示例都是有效的，但最后两个是使用正则表达式的官方方式。

# php - 防止人们访问您的课程并直接包含文件

> ID：13208199
> 
> 赞同：0
> 
> 时间：2012-11-03T10:19:52.080
> 
> 标签：php, security

我正在制作自己的 MVC 框架，我记得在 phpBB 论坛索引页面代码中看到过类似的内容：

```
define('IN_PHPBB', true); 
```

然后在只包含而不是直接访问的文件中，它在顶部有这个：

```
if(!defined('IN_PHPBB')) {
    die();
} 
```

我想知道这是否是必要的，尤其是对于类文件，因为如果直接访问它们，它们将不会运行，因为它们没有被实例化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:26:58.203

我建议您将文件 .htaccess 与指令**拒绝从所有**文件夹中放入您的 php 类文件。官方文档在[这里](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

# iphone - 使用 Cocoapods 时忽略 Xcode 警告

> ID：13208202
> 
> 赞同：467
> 
> 时间：2012-11-03T10:19:56.503
> 
> 标签：iphone, xcode, warnings, cocoapods

在最新的 Xcode 更新之后，我使用了很多第三方库，其中包含许多警告。（例如 Facebook SDK pod）现在所有这些警告都显示在我的 Xcode 中，我想查看自己的警告或错误。

有什么办法可以忽略这些错误？修复它们无济于事，因为在每次“pod install”之后，更改都会被丢弃。

* * *

## 回答 #1

> 赞同：1073
> 
> 时间：2012-11-03T12:11:57.873

添加到您的 Podfile：

```
platform :ios

# ignore all warnings from all pods
inhibit_all_warnings!

# ignore warnings from a specific pod
pod 'FBSDKCoreKit', :inhibit_warnings => true 
```

然后执行：`pod install`

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-06-02T17:14:25.950

您可以在项目工作区中 PodBundle 的 Xcode 构建设置中搜索“inhibit_all_warnings”。将值设置为“YES”，它将隐藏所有 Pod 文件警告。

如果您对工作区执行此操作，它也会隐藏您的所有项目警告。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2019-05-22T05:41:52.660

步骤： 1 将以下脚本放入您的 Podfile。

```
post_install do |installer|
    installer.pods_project.targets.each do |target|
        target.build_configurations.each do |config|
            config.build_settings['GCC_WARN_INHIBIT_ALL_WARNINGS'] = "YES"
        end
    end
end 
```

第 2 步`pod install`。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-05-14T15:01:42.497

尽管[这个其他答案](https://stackoverflow.com/a/13209057/9913)将在构建阶段删除警告，但它似乎并没有完全修复该`Analyze`阶段（这导致我们的 CI 构建仍然存在问题）。

对我有用的（除了接受的答案）是：

*   `Pods`从项目导航器中单击项目

*   选择实际`Pod-`目标并单击`Build Settings`

*   用短语过滤`compiler flags`

*   添加一个新`Other C Flags`的值`-w -Xanalyzer -analyzer-disable-checker -Xanalyzer core`（或您需要禁用的任何分析器）-[此答案](https://stackoverflow.com/a/20389434/9913)提供了要尝试的标志的完整列表-请投票！

    不过，Xcode 6.3.1 中的版本`clang`似乎不包括在内`insecureAPI`，因此您可以将其从该列表中删除。“当前”完整列表是`-w -Xanalyzer -analyzer-disable-checker -Xanalyzer alpha -Xanalyzer -analyzer-disable-checker -Xanalyzer core -Xanalyzer -analyzer-disable-checker -Xanalyzer cplusplus -Xanalyzer -analyzer-disable-checker -Xanalyzer deadcode -Xanalyzer -analyzer-disable-checker -Xanalyzer debug -Xanalyzer -analyzer-disable-checker -Xanalyzer llvm -Xanalyzer -analyzer-disable-checker -Xanalyzer osx -Xanalyzer -analyzer-disable-checker -Xanalyzer security -Xanalyzer -analyzer-disable-checker -Xanalyzer unix`

请注意，在`Pods`项目或`Pods`目标上设置此项*将不起作用*。我不知道为什么，但你必须为每个实际`Pod-`目标设置它。

您还可以在[每个文件的基础](https://developer.apple.com/library/prerelease/ios/recipes/xcode_help-project_editor/Articles/Adding%20a%20Compiler%20Flag%20to%20a%20File.html)`-w -Xanalyzer -analyzer-disable-checker -Xanalyzer core`上设置编译器标志（等）。

我还尝试了其他几种方法（除了上述方法之外，可能需要也可能不需要）。它们是在`Pods`项目本身上进行的。

* * *

[1]

*   用短语过滤`analyzer`
*   确保`Analyze During 'Build'`设置为`NO`.
*   将所有设置更改为`NO`（包括`Improper Memory Management`）

* * *

[2]

*   用短语过滤`warnings`
*   更改`inhibit all warnings`为`YES`

~~出于某种原因，即使禁用`Analyze`方案中的步骤似乎也不起作用。~~

~~转到`Product > Scheme > Manage Schemes`窗口，单击`Pod-*`列表中的每个，然后单击`Edit`按钮。单击`Build`左侧列表，然后*取消选中* `Analyze`右侧的`Pod`目标。~~

我仍然对为什么我不能完全禁用 Pod 进行分析感到困惑，尽管我认为这可能与在方案的构建设置中选中的“查找隐式依赖项”有关。但是，如果未选中此选项，则应用程序似乎需要发生其他事情才能链接到 pod。

# mysql - 将 satchmo 存储从 sqlite3 迁移到 mysql

> ID：13208205
> 
> 赞同：0
> 
> 时间：2012-11-03T10:20:26.627
> 
> 标签：mysql, django, satchmo

我有一个在 sqlite3 上运行的功能齐全的 satchmo 商店。我需要更改为mysql。无论是创建新数据库还是移植旧数据库，我都会在各种地方收到 http 错误 500。例如，如果我有一个新的数据库，并且我创建了一个用户帐户，一切似乎都很好。如果我随后尝试更新用户的配置文件（实际上是扩展的用户配置文件），我会立即收到服务器 500 错误。就像它不再对该 URL 感兴趣 (http://127.0.0.1:8000/accounts/update/)

奇怪的是，如果我以管理员身份登录并转到管理页面，那么我可以毫无问题地更新该用户的（扩展）个人资料。事实上，我从未在管理页面上看到任何错误。

这是我为mysql设置它的方法：

```
apt-get install mysql-client  
apt-get install mysql-server  
apt-get install python-mysqldb  
mysql -u root -p  
    mysql> USE mysql;  
    mysql> CREATE DATABASE mystore CHARACTER SET utf8;  
    mysql> GRANT ALL PRIVILEGES ON mystore.* TO storeuser@localhost IDENTIFIED BY 'secret';  
    mysql> FLUSH PRIVILEGES; 
```

设置.py：

```
DATABASE_ENGINE = 'mysql'       
DATABASE_NAME = 'mystore'
DATABASE_USER = 'storeuser'
DATABASE_PASSWORD = 'secret'
DATABASE_HOST = ''         
DATABASE_PORT = ''         
DATABASE_OPTIONS = { "init_command": 'SET NAMES "utf8"' , "init_command":'SET storage_engine=INNODB' , } 
```

然后创建一个新的数据库，我只是这样做了：

python manage.py syncdb
python manage.py runserver

**编辑 1**

这是它爆炸的代码：

```
class myExtendedContactInfoForm(ExtendedContactInfoForm):
def __init__(self, *args, **kwargs):
     # The following line is where it produces the error
    super(myExtendedContactInfoForm, self).__init__(*args, **kwargs) 
```

**编辑 2**

似乎数据库中缺少一些东西，因为如果我回到使用 sqlite 后端，然后删除 sqlite db（然后运行'python manage.py syncdb'），我会得到完全相同的症状。似乎我需要做的不仅仅是syncdb。

我在这里想念什么？

# python - Python 中 HTML 电子邮件中的 Python 变量

> ID：13208212
> 
> 赞同：16
> 
> 时间：2012-11-03T10:21:08.370
> 
> 标签：python, email, html-email, smtplib

如何将变量插入到我使用 python 发送的 html 电子邮件中？我要发送的变量是`code`. 以下是我到目前为止所拥有的。

```
text = "We Says Thanks!"
html = """\
<html>
  <head></head>
  <body>
    <p>Thank you for being a loyal customer.<br>
       Here is your unique code to unlock exclusive content:<br>
       <br><br><h1><% print code %></h1><br>
       <img src="http://domain.com/footer.jpg">
    </p>
  </body>
</html>
""" 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-11-03T10:23:38.647

使用[`"formatstring".format`](http://docs.python.org/2/library/string.html#string-formatting)：

```
code = "We Says Thanks!"
html = """\
<html>
  <head></head>
  <body>
    <p>Thank you for being a loyal customer.<br>
       Here is your unique code to unlock exclusive content:<br>
       <br><br><h1>{code}</h1><br>
       <img src="http://domain.com/footer.jpg">
    </p>
  </body>
</html>
""".format(code=code) 
```

如果您发现自己替换了大量变量，则可以使用

```
.format(**locals()) 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-03T10:28:58.270

另一种方法是使用[模板](http://docs.python.org/2/library/string.html#template-strings)：

```
>>> from string import Template
>>> html = '''\
<html>
  <head></head>
  <body>
    <p>Thank you for being a loyal customer.<br>
       Here is your unique code to unlock exclusive content:<br>
       <br><br><h1>$code</h1><br>
       <img src="http://domain.com/footer.jpg">
    </p>
  </body>
</html>
'''
>>> s = Template(html).safe_substitute(code="We Says Thanks!")
>>> print(s)
<html>
  <head></head>
  <body>
    <p>Thank you for being a loyal customer.<br>
       Here is your unique code to unlock exclusive content:<br>
       <br><br><h1>We Says Thanks!</h1><br>
       <img src="http://domain.com/footer.jpg">
    </p>
  </body>
</html> 
```

请注意，我使用了`safe_substitute`, not `substitute`，好像有一个不在提供的字典中的占位符，`substitute`将引发`ValueError: Invalid placeholder in string`. 同样的问题是[`string formatting`](http://docs.python.org/2/library/string.html#string-formatting)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T10:46:33.000

使用 pythons 字符串操作： [http ://docs.python.org/2/library/stdtypes.html#string-formatting](http://docs.python.org/2/library/stdtypes.html#string-formatting)

通常 % 运算符用于将变量放入字符串中，%i 表示整数，%s 表示字符串，%f 表示浮点数，注意：还有另一种格式类型（.format），在上面的链接中也有描述，这允许您传入一个比我在下面显示的更优雅的字典或列表，从长远来看，这可能是您应该做的，因为如果您想将 100 个变量放入字符串中，% 运算符会变得混乱，虽然使用 dicts（我的最后一个例子）有点否定这一点。

```
code_str = "super duper heading"
html = "<h1>%s</h1>" % code_str
# <h1>super duper heading</h1>
code_nr = 42
html = "<h1>%i</h1>" % code_nr
# <h1>42</h1>

html = "<h1>%s %i</h1>" % (code_str, code_nr)
# <h1>super duper heading 42</h1>

html = "%(my_str)s %(my_nr)d" %  {"my_str": code_str, "my_nr": code_nr}
# <h1>super duper heading 42</h1> 
```

这是非常基本的，仅适用于原始类型，如果您希望能够存储字典、列表和可能的对象，我建议您使用将它们转换为 jsons [http://docs.python.org/2/library/json.html](http://docs.python.org/2/library/json.html)和[https://stackoverflow.com/questions/4759634/python-json-tutorial](https://stackoverflow.com/questions/4759634/python-json-tutorial)是很好的灵感来源

希望这可以帮助

# sorting - Hadoop MapReduce：返回文本文件中单词的排序列表

> ID：13208216
> 
> 赞同：0
> 
> 时间：2012-11-03T10:21:44.453
> 
> 标签：sorting, text, hadoop, mapreduce

所以我的任务是返回一个文本文件中包含的所有单词的字母排序列表，同时保留重复项。

{成为或不成为} -→ {成为或不成为}

我的想法是把每个词作为关键和价值。这样，由于 hadoop 对键进行排序，它们将自动按字母顺序排序。在 Reduce 阶段，我只需将具有相同键的所有单词（基本上相同的单词）附加到一个 Text 值。

```
 public class WordSort {

   public static class Map extends Mapper<LongWritable, Text, Text, Text> {

   private Text word = new Text();

   public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {
      String line = value.toString();
      StringTokenizer tokenizer = new StringTokenizer(line);
      while (tokenizer.hasMoreTokens()) {
        word.set(tokenizer.nextToken());
        // transform to lower case
        String lower = word.toString().toLowerCase();
        context.write(new Text(lower), new Text(lower));
      }
    }
  }

  public static class Reduce extends Reducer<Text, Text, Text, Text> {

  public void reduce(Text key, Iterable<Text> values, Context context) throws IOException, InterruptedException {
      String result = "";
      for (Text value : values){
         res += value.toString() + " ";
      }
      context.write(key, new Text(result));
    }
  } 
```

但是我的问题是，我如何简单地返回输出文件中的值？目前我有这个：

```
be be be 
not not 
or or
to to to 
```

因此，在每一行中，我都有键，然后是值，但我只想返回值以便得到这个：

```
be be
not 
or 
to to 
```

这甚至可能吗，还是我必须从每个单词的值中删除一个条目？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:31:17.857

免责声明：我不是 Hadoop 用户，但我用 CouchDB 做了很多 Map/Reduce。

如果您只需要键，为什么不发出一个空值？

此外，听起来您根本不想减少它们，因为您想为每次出现都获取一个密钥。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:18:53.653

刚刚尝试使用 Hadoop - The Definitive Guide 中的 MaxTemperature 示例，下面的代码有效

```
context.write(null, new Text(result)); 
```

# php - 我的 SQL 不工作

> ID：13208219
> 
> 赞同：-1
> 
> 时间：2012-11-03T10:22:15.217
> 
> 标签：php, sql, database, append

我正在尝试向当前具有其他值的数据库表中的行添加一个值。我只想影响表中的一个字段。这就是我正在做的事情：

```
$sql = "UPDATE users SET photo = ".$m_fname." WHERE pin = ".$_SESSION['pin'].";"; 
```

这样做的正确方法是什么？

这里还有一点：

```
 $m_fname = mysql_real_escape_string($dest_filename);
  $sql = "UPDATE users SET photo = ".$m_fname." WHERE pin = ".$_SESSION['pin'].";";
  $res = @mysql_query($sql);
  if (!$res) {
    $errors[] = "Could not run query.";
    break;
  } 
```

**在其他人投票之前..** 我​​知道我应该使用 mysqli。对不起，如果我使用旧功能冒犯了任何人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:41:43.007

也许这会有所帮助，它是一种不同的实现，它包括一种正确的数据清理方式：

```
$dbSession = new PDO('mysql:host=***;dbname=***', '***', '***');

$updateQuery = $dbSession->prepare('
  UPDATE
    `users`
  SET
    `photo` = :photo
  WHERE
    `pin` = :pin');

$updateQuery->bindParam(':photo', $m_fname,         PDO::PARAM_STR);
$updateQuery->bindParam(':pin',   $_SESSION['pin'], PDO::PARAM_INT); // or 'PARAM_STR'
$updateQuery->execute(); 
```

有关更多可用功能，请参阅文档：

*   [PHP 数据库对象](http://nl1.php.net/manual/en/pdostatement.execute.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:26:12.640

由于您将字段设置`photo`为字符串值，因此请考虑使用单引号

```
$sql = "
  UPDATE `users`
  SET `photo` = '" . $m_fname . "'
  WHERE `pin` = " . $_SESSION['pin']; // Not clear what pin is (string or int) 
```

您面临的问题是什么？代码似乎很好，只要该`PIN`字段是主唯一键，那`photo`就是一个 varchar

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T11:02:47.790

使用“'”表示非数字

```
$sql = "UPDATE users SET photo = '".$m_fname."' WHERE pin = '".$_SESSION['pin']."';"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T10:25:13.487

```
$m_fname = mysql_real_escape_string($dest_filename);
$sql = "UPDATE users SET photo = '{$m_fname}' WHERE pin = '{$_SESSION['pin']}';";
$res = @mysql_query($sql);
if (!$res) {
  $errors[] = "Could not run query.";
  break;
} 
```

# javascript - 使用 Emscripten 将 Oniguruma 正则表达式库编译为 javascript

> ID：13208222
> 
> 赞同：3
> 
> 时间：2012-11-03T10:22:19.313
> 
> 标签：javascript, emscripten, oniguruma

我正在尝试将更强大的正则表达式库放入 javascript 中。我找到的唯一解决方案是使用[Emscripten将](https://github.com/kripken/emscripten)[Oniguruma 正则表达式库](http://www.geocities.jp/kosako3/oniguruma/)编译为 javascript

我已经安装了 Emscripten 并用他们的小测试脚本对其进行了测试，还下载了 oniguruma 源代码，但仍然不知道接下来应该做什么。

有熟悉 emscripten 的人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T10:28:49.377

当您使用*Emscripten*时，从 C/C++ 构建/编译的一般方式保持相似。更改的步骤是您不使用例如*gcc 编译器*，而是使用*Emscripten 编译器*。

也就是说，有一个普遍的问题是您是否熟悉*C/C++*以及更具体的*autotools*（这似乎是*Oniguruma*使用的构建工具）。如果你不是，你可能很难理解需要做什么以及如何做。

最后我检查了*Emscripten*不支持*Libtool*，因此使用*autotools*构建可能会失败。不过，请随时在*Emscripten* IRC 频道询问，这是否确实不可能。

我能想到的另一种方法是使用*自动工具*生成*Makefile*，然后为*Emscripten*程序编写自定义目标。请注意，这适用于熟悉*make* cruft 的高级用户。

如果这些步骤对您来说很费力，那么您可能应该看看 Javascript 库是否足以满足您的需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T16:11:02.370

一个更现实的方法是使用[http://xregexp.com](http://xregexp.com)。它向 RegExps 添加了更多功能，并将它们编译为 JavaScript 更有限的 RegExp 方言，因此它可以获得最佳功能和性能。使用 emscripten 编译正则表达式库的性能不太可能足以在生产中使用。对于某些用途，emscripten 非常出色，但在这种情况下，开销似乎不值得。

XRegExp 的作者甚至有一篇关于lookbehinds 的文章[http://blog.stevenlevithan.com/archives/javascript-regex-lookbehind](http://blog.stevenlevithan.com/archives/javascript-regex-lookbehind)

# key-value-store - g-wan main.c - 监听套接字

> ID：13208224
> 
> 赞同：-1
> 
> 时间：2012-11-03T10:22:43.510
> 
> 标签：key-value-store, g-wan

我想分叉一个子程序来做一些日常工作或听一些套接字。
如果可以做到这一点，请用一个简单的示例说明这个分叉程序如何通过持久指针访问 G-WAN KV 存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:35:06.047

我猜你想执行第三方程序而不是分叉 G-WAN。

如果您使用`fork()`G-WAN，您将有第二个进程无法侦听`host definitions`G-WAN 的第一个实例已用于侦听 IP 和端口号的进程。

从那里开始，您应该使用`maintenance`脚本或启动第三方程序（不会共享 G-WAN 的内存地址空间）。

现在，您还不能在进程之间共享内存中的 KV 存储——但这在我们的 TODO 列表中。

# javascript - reyanpapa 使用 javascript 进行表单验证

> ID：13208226
> 
> 赞同：-1
> 
> 时间：2012-11-03T10:22:47.503
> 
> 标签：javascript, html

大家好，我的 html 和 javascript 程序遇到错误。当我在姓名、电子邮件和年龄字段中提交输入信息时，它会提示错误消息，说我必须选择性别。但是，在提示错误信息后，姓名、电子邮件和年龄中的信息已被删除。这是我的代码，我希望有人可以帮助我。

```
<html>
<head>
    <!-- Creating Page Title -->
    <title>validation</title>

    <!-- For Form validation we have to use JavaScript
    JavaScript needs only a browser to run, there is no need of 
    server to run JavaScript -->

    <script language="javascript">

        //Start JavaScript Function

        function verify() {

            //for field must take some input

            if (document.form1.name.value == "") {
                alert("Please give the name");
                document.form1.name.forus();
                return false;
            }

            //for field must take some input

            if (document.form1.email.value == "") {
                alert("Please give the email");
                return false;
            }

            // for field must take some input

            if (document.form1.age.value == "") {
                alert("Please give age");
                document.form1.age.focus();
                return false;
            }

            // alert thrown when age limit is below 18 and above 60

            if (document.form1.age.value < 18 || document.form1.age.value > 60) {
                alert("Please give Age range between 18 and 60");
                document.form1.age.focus();
                return false;
            }

            // Gender must be selected

            if (document.form1.gender[0].checked == false &&
                    document.form1.gender[1].checked == false) {
                alert("Please select gender");
                document.form1.gender.focus();
                return false;
            }

            // At least one checkbox must be checked

            if (document.form1.language1.checked == false &&
                    document.form1.language2.checked == false &&
                    document.form1.language3.checked == false) {
                alert("Please Select your choice of language(Atleast One)");
                return false;
            }

            //Country must be chosed

            if (document.form1.country.value == "") {
                alert("Please give country");
                document.form1.country.focus();
                return false;
            }

            //field must take some input

            if (document.form1.myaddress.value == "") {
                alert("Please give address");
                document.form1.myaddress.focus();
                return false;
            }

            //field must take some input

            if (document.form1.u_name.value == "") {
                alert("Please give username");
                document.form1.u_name.focus();
                return false;
            }

            //field must take some input

            if (document.form1.pass.value == "") {
                alert("Please give Password");
                document.form1.pass.focus();
                return false;
            }

            //password length must be greater than 5 characters

            if (document.form1.pass.value.lenght < 6) {
                alert("Please give a Password more than 5 characters");
                document.form1.pass.focus();
                return false;
            }

            // for field must take some input

            if (document.form1.r_pass.value == "") {
                alert("Please retype your password");
                document.form1.r_pass.focus();
                return false;
            }

            //password and confirm password must matched

            if ((document.form1.pass.value) != (document.form1.r_pass.value)) {
                alert("Your password does not match");
                document.form1.r_pass.value == "";
                document.form1.r_pass.focus();
                return false;
            }
            return( true );
        }
    </script>

</head>
<body>

<!-- Creating Form -->
<form method="POST" action="" name="form1">

    <!-- Creating Table, having 11rows and 2 columns. -->
    <table border="2" align="center" cellpadding="7">

        <!-- Start First Row -->
        <tr>
            <!-- Creating First Column -->
            <td><strong>Name:</strong></td>

            <!-- Creating Second Columns -->
            <td>
                <!-- TextBox -->
                <input type="text" name="name"/>
            </td>
            <!-- Close First Row -->
        </tr>

        <!-- Creting First Columns -->
        <td><strong>Email:</strong></td>

        <!-- Creating Second Columns -->
        <td>
            <!-- Textbox -->
            <input type="text" name="email"/>
        </td>
        <!-- Close Second row -->
        </tr>

        <tr>
            <td><strong>Age:</strong></td>
            <td>
                <!-- Textbox -->
                <input type="text" name="age" size="2"/>
            </td>
        </tr>

        <tr>
            <td><strong>Gender:</strong></td>
            <td>
                <!-- Radio Butong -->
                <input type="radio" name="gender" value="Male"/>Male
                <input type="radio" name="gender" value="Female"/>Female

            </td>
        </tr>

        <tr>
            <td><strong>Language:</strong></td>
            <td>
                <!-- Check box -->
                <input type="checkbox" name="language1" value="Hindi"/>Hindi
                <input type="checkbox" name="language2" value="English"/>English
                <input type="checkbox" name="language3" value="Urdu"/>Urdu
            </td>
        </tr>

        <tr>
            <td><strong>Country:</strong></td>
            <td>
                <!-- Combo Box -->
                <select name="country"/>
                <option value="" selected/>
                --Select--
                <option value="indi"/>
                India
                <option value="pakistan"/>
                Pakistan
                <option value="beangladesh"/>
                Beangladesh
                <option value="srilanka"/>
                Srilanka
                </select>
            </td>
        </tr>

        <tr>
            <td><strong>Address:</strong></td>
            <td>
                <!-- TextArea -->
                <textarea rows="5" cols="20" name="myaddress"/></textarea>
            </td>
        </tr>

        <tr>
            <td><strong>Username:</strong></td>
            <td>

                <!-- Textbox -->
                <input type="text" name="u_name"/>
            </td>
        </tr>

        <tr>
            <td><strong>Password:</strong></td>
            <td>
                <!-- Password Field -->
                <input type="password" name="pass"/>
            </td>
        </tr>

        <tr>
            <td><strong>Retype Password:</strong></td>
            <td>
                <!-- Password Field -->
                <input type="password" name="r_pass"/>
            </td>
        </tr>

        <tr align="center">

            <td>
                <!--Submit Button, Function verify need to be called when we process
                submit button-->
                <input type="submit" value="Submit" onClick="return (verify());"/>
            </td>

            <td>
                <!--Reset Button-->
                <input type="reset">
            </td>
        </tr>

        <!--Table Close-->
    </table>

    <!--Form Close -->
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:47:46.073

这是一个小代码。你可以自己构建它

```
 <script type="text/javascript">

//Start JavaScript Function

function verify()
{

//for field must take some input

if(document.forms["form1"]["name"].value=="")
{
alert("Please give the name");

return false;
}
}
</script>
    <form method="POST" action="test3.asp" name="form1" onSubmit="return verify()">

<!-- Creating Table, having 11rows and 2 columns. -->
<table border="2" align="center" cellpadding="7">

<!-- Start First Row -->
<tr>
<!-- Creating First Column -->
<td><strong>Name:</strong></td>

<!-- Creating Second Columns -->
<td>
<!-- TextBox -->
<input type ="text" name="name"/>
<input type="submit" value="Submit" />
</form> 
```

试试看

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:01:49.600

请检查此链接 - [http://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

在这里您可以找到空白字段和​​电子邮件验证。

为了保留字段数据，您可以使用 cookie/session 或者如果您只是在页面验证中使用，您可以通过 JavaScript 代码直接设置它

```
this.form.elements["element_name"].value = 'Some Value'; 
```

此处，element_name 应替换为当前验证字段名称，Some Value 应为当前验证字段的当前值。

在返回 false 之前使用此代码。

谢谢

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-28T03:39:33.777

```
<script type="text/javascript">
function submitForm(){
     if(document.forms[0].name.value=="" ){
      window.alert("name Required");
      return false;
    }
   }
</script> 
```

# wcf - WCF 路由和服务元数据

> ID：13208232
> 
> 赞同：7
> 
> 时间：2012-11-03T10:23:36.583
> 
> 标签：wcf, web-services, soap, wsdl, wcf-routing

我正在构建一个 WCF 路由器，它需要充当许多内部 Web 服务（WCF 和 ASMX）的代理。路由部分相当简单，但我不明白服务元数据交换在这个解决方案中是如何工作的。

换句话说：客户端如何为路由器后面的内部服务获取元数据？我是否需要手动向消费者提供 WSDL 文件？我可以以某种方式设置路由器以返回适当的内部服务的元数据吗？

或者也许我的架构完全错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T12:07:41.000

我在这里看到 2 个选项：

1.  如果您不想公开内部地址，则可以选择创建“非透明”代理。优点是您可以做的不仅仅是路由消息（即这样的代理可以充当“安全边界”，解开加密消息并将它们明文传递到内部端点）。它还可以提供“可互操作级别”，将 WCF 服务公开为使用相同数据类型/消息 XML 结构的简单 SOAP。缺点是您必须更新其代码以及代理服务
2.  您可以实现 WSDL 重写器。有了它，您可以即时屏蔽内部服务 URL - 根据您的条件，简单的字符串替换可能会或可能不会足够。

参考：

*   [消息检查器](http://msdn.microsoft.com/en-us/library/aa717047.aspx)
*   [IWsdlExportExtension](http://msdn.microsoft.com/library/system.servicemodel.description.iwsdlexportextension.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-10T15:13:43.723

相同的“路由器服务”也可用于为路由器后面的内部服务获取单独的 WSDL。

看看[这个线程](https://stackoverflow.com/questions/17476156/wcf-how-to-combine-several-services-into-single-wsdl/19890944#19890944)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:03:53.107

您是否考虑过使用简单的 HTTP 代理？所有使用 REST 或 SOAP 的 WCF 都是其核心 HTTP 请求。似乎路由功能（我假设您基于主机名、URL 路径或参数）可以通过代理 HTTP 请求来执行，而无需了解内容。ASP.Net 可以很好地自行清理传入的请求，但您始终可以根据需要添加额外的自定义过滤。

# java - 相邻小区信息不准确

> ID：13208236
> 
> 赞同：2
> 
> 时间：2012-11-03T10:23:43.233
> 
> 标签：java, android, gsm, umts

我正在尝试利用有关相邻单元格的移动信息，可通过`TelephonyManager`类及其`getNeighboringCellInfo`方法在 Android 上获得。下面我发布了完成这项工作的一部分代码（主要取自公开可用的资源），以及该代码产生的一个输出示例（如所附屏幕截图所示）。代码和图像是“按原样”放置的，没有任何更改，因此将一个与另一个相关联并确保它应该正常工作应该相对容易（当然，可能会有我忽略的错误）。

问题是相邻单元格的列表确实经常包含具有“不正确”（据我理解）数据的元素，例如：

1.  a`NeighboringCellInfo`所有属性 - `lac`, `cid`, `psc`- 设置为 -1，并且只有`rssi`字段似乎有意义；
2.  a等于 0 `NeighboringCellInfo`；`lac`这是否意味着`lac`与当前活动单元格相同？
3.  a`NeighboringCellInfo`值`rssi`在 [0, 31] 范围之外且 not `UNKNOWN_RSSI`；这些值可以是正数（33，如屏幕截图所示），也可以是负数（它们看起来像一个适当的原始 rssi 值，即不需要从 转换`asu`）；
4.  在同一地理位置获得的列表元素并没有像我预期的那样表现出一致性，也就是说，在两次连续扫描中，每个扫描都可以在另一个扫描中省略一个元素，并且被省略元素的 rssi 级别不是最低的列表中的级别（实际上它们的 rssi 可能大于当前使用的单元格）；我承认如果每个小区信号都**非常**不稳定，这可能是正确的行为，但我不确定这对于 GSM 和/或 UMTS 网络是否普遍适用。当前单元始终具有良好定义的所有字段，但其 rssi 可以在 30 dBm 的范围内非常快速地变化（例如从 -60 到 -90）。
5.  与 4 相同，但关于从一天到另一天的一致性。在高度城市化和成熟的环境中，我希望每天都能看到相同的细胞列表，但它们的变化方式却如此之大，以至于有一天我什至没有看到关于以前活跃细胞的提及天。

这一切是否意味着移动技术的正常运行、某种可能的节能优化，或特定设备（在我的情况下为 LG Optimus One）的缺陷？

如果可能的话，请建议如何从 Android 上的单元环境中获得一致的读数。

```
GsmCellLocation cellLocation = (GsmCellLocation)telephonyManager.getCellLocation();

String networkOperator = telephonyManager.getNetworkOperator();
int type = telephonyManager.getNetworkType();
String mcc = networkOperator.substring(0, 3);
String mnc = networkOperator.substring(3);
textMCC.setText("mcc: " + mcc + " mnc: " + mnc);
textMNC.setText("operator: " + networkOperator);

int cid = cellLocation.getCid();
int lac = cellLocation.getLac();
int psc = cellLocation.getPsc();
textGsmCellLocation.setText(cellLocation.toString());
textCID.setText("lac: " + String.valueOf(lac) + " cid: " + String.valueOf(cid) + " psc: " + String.valueOf(psc) + " type: " + String.valueOf(type) + " rssi: " + String.valueOf(currentCellRSSI));

TextView Neighboring = (TextView)findViewById(R.id.neighboring);
List<NeighboringCellInfo> NeighboringList = telephonyManager.getNeighboringCellInfo();

String stringNeighboring = "Neighboring List - Lac : Cid : Psc : type : RSSI\n";
for(int i = 0; i < NeighboringList.size(); i++)
{
  String dBm;
  int rssi = NeighboringList.get(i).getRssi();
  if(rssi == NeighboringCellInfo.UNKNOWN_RSSI)
  {
    dBm = "Unknown RSSI";
  }
  else
  {
    if(rssi >= 0 && rssi < 32)
    {
      dBm = String.valueOf(-113 + 2 * rssi) + " dBm";
    }
    else
    {
      dBm = "Unknown value:" + Integer.toString(rssi);
    }
  }

  stringNeighboring = stringNeighboring
    + String.valueOf(NeighboringList.get(i).getLac()) + " : "
    + String.valueOf(NeighboringList.get(i).getCid()) + " : "
    + String.valueOf(NeighboringList.get(i).getPsc()) + " : "
    + String.valueOf(NeighboringList.get(i).getNetworkType()) + " : "
    + dBm + "\n";
}

Neighboring.setText(stringNeighboring); 
```

![在此处输入图像描述](../Images/8b1710611ee9d7ad0af4039bf9ccd1d6.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-03T17:16:50.177

相邻单元格以两种不同的方式报告：

在 GSM/GPRS（这似乎是您截取屏幕截图时所在的网络）上，您应该获得相邻小区的 MCC/MNC/LAC/CID 元组。我看到你得到了有效的 CID 值。如果您在 GSM (2.xG) 网络上，PSC 将始终为 -1，因为 PSC 在 GSM 上没有任何意义（PSC 是 CDMA 参数，而 GSM 是基于 TDMA 的）。

在 UMTS 上情况有所不同：对于相邻小区，仅报告 PSC，除非您连接到它们，否则您不会发现它们的其他参数。

LTE 原则上类似于 UMTS，但名称略有不同：您使用 TAC（跟踪区域代码）和 CI（小区标识）代替 LAC 和 CID；而不是 PSC，您有 PCI（物理单元 ID）。但是，它们的功能与 UMTS 对应物基本相同。

但是请注意，设备之间的实现差异很大：有些手机即使在 3G 网络上也不会报告 PSC，有些则永远不会报告相邻小区。Nexus S（与大多数三星制造的设备一样）都没有报告。

不过，不确定 LAC=0。这可能意味着“与当前小区相同的 LAC”，在这种情况下，从位置区域的边界查看输出会很有趣，手机可以在该区域中拾取具有多个 LAC 的小区。（我们会看到来自两个 LA 的小区吗？或者只是来自“我们的”LA？对于来自相邻 LA 的小区会报告什么 LAC？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T20:09:10.893

The mobile device should be aware of the neighbouring cells, so that it can hand over to a better cell if necessary. In any case, you've told it to get information about neighbouring cells, so that's what it should do. Your results don't seem to match up to what is described in the Android documentation either. I would report this problem to the device vendor as a firmware bug.

I can imagine a situation where you would see a neighbouring cell with a stronger signal if for example the cell was GSM, and the device preferred a UMTS cell with a weaker signal, but this should be obvious from the network type field.

# .net - 字典 在 xaml 中没有绑定（Metro 应用程序）

> ID：13208240
> 
> 赞同：0
> 
> 时间：2012-11-03T10:24:23.377
> 
> 标签：.net, xaml, binding, windows-8, windows-runtime

我在 ListView 的 DataTemplate 中获取绑定时遇到问题。我的绑定目标是 KeyValuePair。（我使用适用于 Windows 8 的 Metro App）

我有一本字典

```
Params = new Dictionary<string, string>();
Params.Add("Key1", "Value1");
Params.Add("Key1", "Value2"); 
```

我尝试绑定它：

```
<ListView ItemsSource="{Binding Params}">
    <ListView.ItemTemplate>
        <DataTemplate>
           <TextBlock Text="{Binding Key}"></TextBlock>
           <TextBlock Text="{Binding Value}"></TextBlock>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

但是 KeyPairValue 对此没有反应（没有绑定）。但如果我这样做绑定：

```
<ListView ItemsSource="{Binding Params}">
    <ListView.ItemTemplate>
        <DataTemplate>
           <TextBlock Text="{Binding}"></TextBlock>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

我懂了： ![输入屏幕截图 xaml 绑定](../Images/b9783038045dba50a35ec01cbf8bf819.png)

早期此绑定在 Windows Phone 7 的应用程序中正常工作。在 Windows 8 中发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:27:45.117

尝试指定`Path=`：

```
<ListView ItemsSource="{Binding Path=Params}">
    <ListView.ItemTemplate>
        <DataTemplate>
           <TextBlock Text="{Binding Path=Key}"></TextBlock>
           <TextBlock Text="{Binding Path=Value}"></TextBlock>
        </DataTemplate>
    </ListView.ItemTemplate>
</ListView> 
```

但你可能需要一个[`ObservableDictionary`](http://drwpf.com/blog/2007/09/16/can-i-bind-my-itemscontrol-to-a-dictionary/)

或者您可能只是遇到了这个错误：[http](http://social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/234a17ad-975f-42f6-aa91-7212deda4190) : //social.msdn.microsoft.com/Forums/en-AU/winappswithcsharp/thread/234a17ad-975f-42f6-aa91-7212deda4190 我通过谷歌搜索找到的`clrIkeyvaluepairimpl`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-12T20:55:03.700

另一种解决方案是使用带有自定义键/值对的列表而不是字典。原因是 IEnumerable> 将用于在绑定期间列出字典中存在的键/值对。问题出在 KeyValuPair，而不是 Dictionary 实际上，因为它被转换为 System.Runtime.InteropServices.WindowsRuntime.CLRIKeyValuePairImpl 并且绑定到此类型时出现问题。

所以创建一个类，如：

```
public class XamlFriendlyKeyValuePair<Tkey, TValue> 
{
    public TKey Key {get; set;}
    public TValue Value {get; set;} 
} 
```

像这样使用它应该可以解决问题：

```
Params = new List<XamlFriendlyKeyValuePair<string, string>>();
Params.Add{"Key1", "Value1"};
Params.Add{"Key1", "Value2"}; 
```

来源： http: [//www.sohuaz.xyz/questions/683779/binding-a-dictionary-to-a-winrt-listbox](http://www.sohuaz.xyz/questions/683779/binding-a-dictionary-to-a-winrt-listbox)

# php - 使用 PHP 从 MySQL 中提取数据

> ID：13208242
> 
> 赞同：0
> 
> 时间：2012-11-03T10:24:44.353
> 
> 标签：php, mysql

```
$query = "SELECT * FROM `status_info_private` WHERE `id`=$id ORDER BY `Status_Date` DESC LIMIT 100";
if ($query_run = mysql_query($query)) {
    while ($rows = mysql_fetch_array($query_run)) {
        echo '<a href="view_profile.php?id=' . $id . '"><font color="#009900" > ' . $rows['Name'] . ' ' . ' Says :' . '</font></a><br/>';
        echo '<p align="justify> ' . $rows['Private_status'] . '<br/>';
        echo '<p align="right">' . $rows['Status_Date'] . '<br/>';
        $like   = $rows['Like'];
        $unlike = $rows['Unlike'];
    }
} 
```

我认为这段代码中的一切都是正确的。但我仍然无法获得标题为“Private_status”的列下的输出。上面的代码除了cols“Private_status”下的消息外，一切都正确。我已经检查了 col 名称的拼写，并且该部分没有错误。那么，请告诉我到底缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:32:52.570

首先关闭你的`<p>`标签，然后`print_r`检查里面有什么`$rows` 。另外，开始使用*PDO*或*mysqli*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:37:23.467

```
$query = "SELECT * FROM `status_info_private` WHERE `id`=$id ORDER BY `Status_Date` DESC LIMIT 100";
if ($query_run = mysql_query($query)) {
    while ($rows = mysql_fetch_array($query_run)) {
        echo '<a href="view_profile.php?id=' . $id . '" color="#009900" > ' . $rows['Name'] . ' ' . ' Says :' . '</a><br/>';
        echo '<p align="justify"> ' . $rows['Private_status'] . '</p>';
        echo '<p align="right">' . $rows['Status_Date'] . '</p>';
        $like   = $rows['Like'];
        $unlike = $rows['Unlike'];
    }
} 
```

# java - 是否需要嵌套同步块？

> ID：13208243
> 
> 赞同：2
> 
> 时间：2012-11-03T10:24:45.277
> 
> 标签：java, synchronization, nested

我正在编写一个多线程程序，并且我有一个具有嵌套同步块的方法，我想知道我是否需要内部同步，或者只是外部同步就足够了。

```
public class Tester {

    private BlockingQueue<Ticket> q = new LinkedBlockingQueue<>();
    private ArrayList<Long> list = new ArrayList<>();

    public void acceptTicket(Ticket p) {
        try {
            synchronized (q) {
                q.put(p);

                synchronized (list) {
                    if (list.size() < 5) {
                        list.add(p.getSize());
                    } else {
                        list.remove(0);
                        list.add(p.getSize());
                        }
                }
            }
        } catch (InterruptedException ex) {
            Logger.getLogger(Consumer.class.getName()).log(Level.SEVERE, null, ex);
        }

    }
} 
```

编辑：这不是一个完整的课程，因为我仍在努力。但本质上我是在尝试模仿售票机。售票机在`BlockingQueue`q 中维护一张票的列表。每当客户向机器添加票时，机器也会跟踪最后 5 张票的价格（`ArrayList`列表）。所以我不相信我需要内部同步，因为只有这个类（票务系统）才能访问`list`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:47:00.623

危险：

```
 synchronized (q) {
        synchronized (list) {
         }
    } 
```

有一天你会添加一个方法，或者以这样的顺序调用方法，实际上它也会这样做：

```
 synchronized (list) {
        synchronized (q) {
         }
    } 
```

那么这只是一个死锁定时炸弹。

假设这是一个完整的类，您可以只锁定一个，或者通常`synchronized`在方法上锁定对象本身。对这些私有的所有其他访问也需要同步。

```
public class Tester {

private BlockingQueue<Ticket> q = new LinkedBlockingQueue<>();
private ArrayList<Long> list = new ArrayList<>();

public synchronized void acceptTicket(Ticket p) {
    try {
      q.put(p);

      if (list.size() < 5) {
        list.add(p.getSize());
      } else {
        list.remove(0);
        list.add(p.getSize());
      }
    } catch (InterruptedException ex) {
        Logger.getLogger(Consumer.class.getName()).log(Level.SEVERE, null, ex);
    }    
} 
```

或更清洁：

```
public class Tester {

private BlockingQueue<Ticket> q = new LinkedBlockingQueue<>();
private ArrayList<Long> list = new ArrayList<>();

public void acceptTicket(Ticket p) {
    try {
      //this is cleaner, because I don't know what logger class is doing,
      //I want to eliminate chance of deadlock and reduce time we are in lock
      synchronized (this){
        q.put(p);

        if (list.size() < 5) {
          list.add(p.getSize());
        } else {
          list.remove(0);
          list.add(p.getSize());
        }
     }
    } catch (InterruptedException ex) {
        Logger.getLogger(Consumer.class.getName()).log(Level.SEVERE, null, ex);
    }    
} 
```

更清洁，但在你的情况下不太可能是必要的（根据我所看到的）：

```
public class Tester {

private final Object lockObj = new Object(); //specific object for locking
                                //could use any other private, non-exposed final but
                                //this makes it absolutely clear what I should be
                                //using for locks
private BlockingQueue<Ticket> q = new LinkedBlockingQueue<>();
private ArrayList<Long> list = new ArrayList<>();

public void acceptTicket(Ticket p) {
    try {
      //"this" can be locked by external code outside my control here,
      //so I use a specific private final object lockObj to eliminate deadlocks and
      //provide finer grained locking - reducing contension
      synchronized (lockObj){
        q.put(p);

        if (list.size() < 5) {
          list.add(p.getSize());
        } else {
          list.remove(0);
          list.add(p.getSize());
        }
     }
    } catch (InterruptedException ex) {
        Logger.getLogger(Consumer.class.getName()).log(Level.SEVERE, null, ex);
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:46:28.373

看起来上面代码的意图是将所有操作（队列中的存储和列表中的存储）分组在一个原子操作中。所以是的，外部同步块就是你所需要的。一次持有多个锁是结束死锁的好方法，因此应尽可能避免。

不过，我不会将队列本身用作锁，而是使用专用的最终锁对象。

最重要的是：上面的代码本身没有任何意义，因为列表和队列在其他任何地方都没有使用。所以我刚才说的可能是真的，也可能是完全错误的，这取决于实际代码的其余部分。

# iphone - 按下一个按钮并在另一个 ViewController 中打开一个 URL

> ID：13208247
> 
> 赞同：0
> 
> 时间：2012-11-03T10:25:00.780
> 
> 标签：iphone, uiwebview, nsurl, viewcontroller

我正在尝试通过制作一个简单的应用程序来学习 Xcode。但是我在网上看了几个小时（几天），我无法弄清楚我是如何制作一个在另一个 ViewController 中打开 UIWebView 的按钮：S

首先让我向您展示一些我已经准备好的代码：

我的主要 Storyboard 中有几个按钮，每个按钮的标题都是一些国家/地区代码，例如 UK、CA 和 DK。

当我按下其中一个按钮时，我有一个这样的 IBAction：

```
- (IBAction)ButtonPressed:(UIButton *)sender {
// Google button pressed

NSURL* allURLS;

if([sender.titleLabel.text isEqualToString:@"DK"]) {

    // Create URL obj

    allURLS = [NSURL URLWithString:@"http://google.dk"];

}else if([sender.titleLabel.text isEqualToString:@"US"])

{

    allURLS = [NSURL URLWithString:@"http://google.com"];

}else if([sender.titleLabel.text isEqualToString:@"CA"])

{

    allURLS = [NSURL URLWithString:@"http://google.ca"];

}
NSURLRequest* req = [NSURLRequest requestWithURL:allURLS];

[myWebView loadRequest:req]; 
```

}

如何在我的另一个名为 myWebView 的 Viewcontroller 上打开这个打开的 UIWebview？

请帮助一个迷路的人：D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:58:34.953

第一视图控制器.m

```
 - (IBAction)ButtonPressed:(UIButton *)sender {
    NSURL* allURLS;
    //get your URL
    secondViewControlelr *secondView=[[secondViewControlelr alloc]init];
    second.urlToLoad=allURLS;
    [self.navigationController pushViewController:secondView animated:YES];
    } 
```

secondViewControlelr.h //声明url并设置属性

```
NSURL *urlToLoad; 
```

secondViewControlelr.m

```
- (void)viewDidLoad
{
         myWebView=[[UIWebView alloc]initWithFrame:CGRectMake(0, 0, 320, 460)];
         [self.view addSubview:myWebView];
          NSURLRequest *urlReq=[NSURLRequest requestWithURL:self.urlToLoad cachePolicy:NSURLCacheStorageNotAllowed timeoutInterval:10];
    [myWebView loadRequest:urlReq];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:51:43.893

好吧，您已经设计和编码了 firstViewController，现在您必须创建带有自身绑定的 secondViewController `UIWebView`，`IB`它还有一个 setter`NSString`变量`strUrl`，您需要在推送或呈现 secondViewController 时传递它，并将其分配给`UIWebView`在`viewDidLoad`secondViewController 中。[请参阅我关于如何通过的答案`NSString`？](https://stackoverflow.com/a/12436857/1603234)还有`UIWebView`它的委托方法（[什么是委托和数据源方法？-Apple Doc](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CocoaFundamentals/CommunicatingWithObjects/CommunicateWithObjects.html)），您可以使用它来处理`URL`请求。

这些是`delegate`of `UIWebView`，如果您要使用它，您需要将`UIWebView`委托给`self`.

```
- (void)webViewDidStartLoad:(UIWebView *)webView;
- (void)webViewDidFinishLoad:(UIWebView *)webView;
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error; 
```

# php - 如何使用 PDO 执行 2 个单独的查询并将结果数组发送回 javascript

> ID：13208249
> 
> 赞同：-2
> 
> 时间：2012-11-03T10:25:03.930
> 
> 标签：php, javascript, mysql, ajax

```
$data = $dbh->prepare('SELECT workloadformula,coursecode FROM coursedetails WHERE coursecode = ' . $dbh->quote($coursecode) . ' ; select concat(firstname," ",lastname) as name from lecturerdetails where concat(firstname," ",lastname) = ' . $dbh->quote($name) . '');

$data->execute();
do {
    $result = $data->fetchAll();
    $final  = var_dump($result);
    echo "$final";
} while
(
    $dbh->nextRowset()
); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:37:19.300

假设`$dbh`是`PDO`该类的一个实例：

1.  没有这样的方法`PDO::nextRowset()`，你可能是说`$data->nextRowset()`。
2.  `var_dump()`不返回任何内容，因此将结果分配给`$final`毫无意义。

# android - Android 通过 .net Web 服务发送 Gsm 通知

> ID：13208250
> 
> 赞同：2
> 
> 时间：2012-11-03T10:25:06.763
> 
> 标签：android, web-services, remote-server

Web服务内容如下：

```
[WebMethod]
public string SendGcm(String serviceKey,String registrationId ,string message) {
    WebClient wc=new WebClient();
    wc.Headers.Add("Authorization", "key=" + serviceKey);
    NameValueCollection nameValues=new NameValueCollection
        {
            {"registration_id", registrationId},
            {"collapse_key", Guid.NewGuid().ToString()},
            {"data.payload", message}
        };

    var resp=wc.UploadValues("https://android.googleapis.com/gcm/send",
                nameValues);

    var respMessage = Encoding.Default.GetString(resp);
            return respMessage;
} 
```

安卓代码：

```
package com.example.insertpro;
import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.os.AsyncTask;
import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.util.Log;
import android.view.Menu;
import android.widget.Toast;

public class MainActivity extends Activity {
    private static final String SOAP_ACTION = "http://tempuri.org/SendGcm";
    private static final String OPERATION_NAME = "SendGcm";
    private static final String WSDL_TARGET_NAMESPACE = "http://tempuri.org/";
    private static final String SOAP_ADDRESS = "http://*******/Demo/service.asmx";
    String s="";
    boolean flag=true;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        new UploadTask().execute();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    private class UploadTask extends AsyncTask<Void,Void, Void> {

        private ProgressDialog dialog;

        @Override
        protected void onPreExecute() {
            dialog = new ProgressDialog(MainActivity.this);
            dialog.setTitle("eAbsenceTracker");
            dialog.setMessage("Please Wait..");
            dialog.setIndeterminate(false);
            dialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
            dialog.setProgress(0);
            dialog.show();
        }

        @Override
        protected Void doInBackground(Void... arg0) {
            SoapObject request = new SoapObject(WSDL_TARGET_NAMESPACE,OPERATION_NAME);
            request.addProperty("serviceKey","*****************);
            request.addProperty("registrationId","***************");
            request.addProperty("message","Hi");

            SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

            envelope.dotNet = true;
            envelope.setOutputSoapObject(request);

            HttpTransportSE httpTransport = new HttpTransportSE(SOAP_ADDRESS);

            try {

                httpTransport.call(SOAP_ACTION, envelope);
                Object response = envelope.getResponse();

                s=response.toString();
            } catch (Exception exception) {
                Log.e("Shyam","exception",exception);
                // Toast.makeText(getApplicationContext(),"In
    Exception"+exception,Toast.LENGTH_LONG).show();
                                   flag=false;
            }
            return null;
        }
        @Override
        protected void onPostExecute(Void result) {
            // TODO Auto-generated method stub
            super.onPostExecute(result);
            dialog.dismiss();

            if(flag==false) {
                Toast.makeText(getApplicationContext(), "In Exception",Toast.LENGTH_LONG).show();
            } else {
                if(s.trim().equals("false")) {
                    Toast.makeText(MainActivity.this, "Not inserted",Toast.LENGTH_LONG).show();
                } else {
                    Toast.makeText(MainActivity.this, "Successfully inserted"+s,Toast.LENGTH_LONG).show();
                }
            }
        }
    }
} 
```

例外 ：

```
Exception SoapFault - faultcode: 'soap:Server' faultstring: 'Server was unable
to process   request. ---> The underlying connection was
    closed: An unexpected error occurred on a send. ---> Unable to read
    data from the transport connection: An existing connection was
    forcibly closed by the remote host. ---> An existing connection was
    forcibly closed by the remote host' faultactor: 'null' detail:
    org.kxml2.kdom.Node@4052ff00 
```

请帮助我，我在服务器端尝试了很多东西，但没有奏效。

# android - Google Play 仅为特定（测试）用户分发应用程序

> ID：13208255
> 
> 赞同：14
> 
> 时间：2012-11-03T10:25:30.137
> 
> 标签：android, google-play

一个简单的问题，我记得在 Play 商店的开发者控制台中有一个选项可以让应用程序只对一组电子邮件地址可见。或者至少该应用程序对于该组电子邮件是免费的。

那么是否有一个选项可以让应用只对 Play 商店中的一组特定电子邮件地址可见？

我问这个是因为我想测试我的应用程序，因此我必须通过电子邮件将它发送给 50 个人（不是问题）。但是当我在“beta”阶段更新应用程序时，我不想重新发送这些电子邮件，并要求测试用户更新当前安装。使用 Play 商店更新将更加无缝和自动。

有没有人有这种情况的经验？

**编辑：**

似乎目前只有一个简单的答案：

不，使用 Google Play 是不可能的。但是有一些替代方案，请参阅接受的答案。

如果 Google 可以将此功能添加到开发人员控制台，那就太好了，这将允许开发人员简单地推出新的更新，并轻松查看崩溃报告，而无需公开发布应用程序。

**编辑2：**

现在可以对您的应用程序进行 Alpha 和 Beta 测试！我相信自 2013 年 5 月 15 日以来。

[https://support.google.com/googleplay/android-developer/answer/3131213?hl=nl](https://support.google.com/googleplay/android-developer/answer/3131213?hl=nl)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-13T20:26:25.590

Google Play 现在内置了 alpha 和 beta 测试：https: [//support.google.com/googleplay/android-developer/answer/3131213?hl=en](https://support.google.com/googleplay/android-developer/answer/3131213?hl=en)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T11:45:22.157

我个人不记得看到您提到的选项，指定私人递送的电子邮件地址，因此，我没有这方面的经验。事实上，在开发者控制台中快速检查，发现该选项不再可用，我相信你已经知道了，因为你发布了同样的问题。

话虽如此，我知道有一个 Web 服务（从未亲自使用过，但我的很多开发人员朋友和同事都推荐它）。

该网站是：[Beta 家庭](http://thebetafamily.com/)。到目前为止，粗略查看他们的网站并没有提到创建帐户或上传应用程序进行测试的任何费用或付款。

他们还具有您在 OP 中提到的电子邮件功能，他们称之为*SuperSend*，您可以在其中指定一组电子邮件地址，然后将应用程序交付给他们。您可以在此处获得更多信息：http: [//thebetafamily.com/supersend/](http://thebetafamily.com/supersend/)

如果您专门寻找 Google Play 的解决方案，它可能没有用。但如果你愿意接受替代方案，我认为这看起来很有希望。

希望这可以帮助。

编辑：他们的[常见问题解答](http://thebetafamily.com/faq/for-developers#what-does-your-service-cost)提到他们的服务实际上是**免费**的。

# android - Android中stickyBroadcast的发送、接收和注销

> ID：13208256
> 
> 赞同：0
> 
> 时间：2012-11-03T10:25:53.050
> 
> 标签：android, broadcastreceiver

我对stickyBroadcast 有一个问题，即即使在应用程序崩溃后，通过stickyBroadcast 发送的值也不会改变。简而言之..我在后台运行一项服务，当它完成时，我通过stickyBroadcast向Activiy发送一个“真实”布尔变量。我在 TabActivity onPause 中删除了这个stickyBroadcast，当我关闭应用程序时，这个stickyBroadcast 被正确删除。当我重新打开应用程序时，通过stickyBroadcat 发送的新值。到目前为止，我的代码工作正常

当应用程序因任何原因崩溃时，此stickyBroadcast 中的值不会被删除。如果我再次重新打开应用程序旧值是由 stickyBroadcast 发送的

任何人都可以帮助我在应用程序崩溃时如何处理stickyBroadcast。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:38:49.307

尝试这个，

我认为您必须将代码放入`Try and Catch`Block 。

所以当应用程序崩溃或得到任何可以处理的异常时。现在写你的代码

`Distroy stickyBroadcast`抓住，所以它会处理。

现在，当您在崩溃应用程序后启动下一次时，它将始终是新数据。

希望它的工作。

# php - 如何获取可选参数的默认值

> ID：13208257
> 
> 赞同：5
> 
> 时间：2012-11-03T10:25:54.080
> 
> 标签：php, function, optional-parameters

可能这是 PHP 的一个限制，但是否有可能以某种方式调用函数 - 并强制执行可选参数的“默认”值 - 即使在函数调用中，给出了可选参数（和 == `null`）？

也许更容易表明我的意思：

```
<?php
    function funcWithOptParam($param1, $param2 = 'optional') {
        print_r('param2: ' . $param2);
    }

    funcWithOptParam('something'); // this is the behaviour I want to reproduce

    // this will result in 'param2: optional'

    funcWithOptParam('something', null); // i want $param2 to be 'optional', not null

    // this will result in 'param2: ' instead of 'param2: optional'
?> 
```

现在，对此最简单的答案是“`null`那时不要写”——但在我的特殊情况下，我得到了`array`一个`function`调用参数，并且只能这样做：

```
<?php
    funcWithOptParam($param[0], $param[1]);
?> 
```

所以即使`$param[1]`是`null`，`null`也会覆盖可选参数的默认值

我只看到一个解决方案 - 跳过可选参数，并这样做：

```
<?php
    function funcWithOptParam($something, $notOptional) {
         if($notOptional === null) {
              $notOptional = 'defaultvalue';
         }

         ...
    }
?> 
```

但我想知道是否有另一种解决方案。`null`PHP中有“真正的”价值吗？这真的转化为“无”吗？像`undefined`在js中的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T14:08:58.100

为什么不将整个数组作为函数参数传递？您只需这样称呼它：

```
funcWithOptParams($params); 
```

并像这样处理它：

```
function funcWithOptParams($params) {
     if(!isset($params[1])) {
          $params[1] = 'defaultvalue';
     }

     ...
} 
```

这种方法使您可以只传递您想要指定的参数，并在您不想指定的参数中使用默认值。作为奖励，您不必担心参数的顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:36:45.037

您可以使用[func_num_args](http://php.net/manual/en/function.func-num-args.php)和[func_get_args](http://www.php.net/manual/en/function.func-get-args.php)来创建您想要的行为

```
function funcWithArbitraryNumParams(){
  $args = array();
  if(!empty(func_num_args)){
   $args = func_get_args();
  }

  print_r($args);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:36:50.267

您可以获得默认值，但它相当难看......

```
$function = new ReflectionFunction('your_function_name');

foreach ($function->getParameters() as $param) {
    echo 'Name: ' . $param->getName() . PHP_EOL;
    if ($param->isOptional()) {
        echo 'Default value: ' . $param->getDefaultValue() . PHP_EOL;
    }
    echo PHP_EOL;
} 
```

[键盘](http://codepad.org/xFQKQRzN)。

您可以检查参数是否为`NULL`，如果是，则将它们替换为默认值。

# html - 跨平台轻量级母版页

> ID：13208265
> 
> 赞同：0
> 
> 时间：2012-11-03T10:27:01.477
> 
> 标签：html, master-pages, ssi

目前我有一个充满静态页面的网站。这最大限度地减少了 Web 服务器负载，并保证该站点甚至可以在基于 Linux 的小型硬件 Web 服务器上运行。

我正在寻找一种为我的网站制作母版页的能力，我喜欢 Ruby on Rails 使用的方式，但是这种技术对于简单的网站来说是多余的，对于简单的硬件 Web 服务器来说太重了。

我喜欢SSI，它确实是轻量级和跨平台的，但它不提供母版页，它只制作包含每个文档应该自己维护的内容。

我喜欢 AJAX 技术，但它依赖于客户端。

IFRAME 技术与我想要的相反 - 它从母版页引用到从页，我需要相反。

还剩下什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:00:06.213

[Template-Toolkit](http://template-toolkit.org/)，特别是[wrapper 指令](http://template-toolkit.org/docs/manual/Directives.html#section_WRAPPER)，应该可以解决问题。

您可以在构建时使用[ttree](http://template-toolkit.org/docs/tutorial/Web.html#section_Using_ttree)来生成静态页面，从而避免需要任何服务器端技术，而不是简单的 HTTPD。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:50:32.123

Em .. php 包括？

那么：CSS、Javascript、包括分别详细说明可重用样式、客户端脚本和标记的目录？

恐怕没有服务器端脚本，就无法以您所说的方式获得任何形式的母版页。您可以期望的最好的结果是加载其他 JavaScript 文件和外部样式表的 JavaScript 文件（我看到的一种不寻常的方法是创建一个通用样式表，该样式表可以导入许多其他样式表 - 但我并没有看到对组织自己有多大好处）。您总是可以使用 iframe ......但正如您所指出的，iframe 并不是为这种功能而设计的。这种功能在框架的范围内，结果令人不快。

如果您想使用 php 之类的东西，您的服务器自然必须支持 php，但它是一种简单的方法，可以轻松组织您的页面，而无需深入了解 Rails 之类的复杂框架。根据我采用 CMS 的经验，尤其是由其他人开发的 CMS 可能比它的价值更麻烦。

# wordpress - 另一个 [永久链接] 中的 Wordpress 博客

> ID：13208267
> 
> 赞同：1
> 
> 时间：2012-11-03T10:27:28.657
> 
> 标签：wordpress, iis, web-config

我有一个关于同时在同一主机上拥有两个博客的问题。这是我的场景：第一个博客托管在根目录[http://mathosproject.com/](http://mathosproject.com/)中，第二个博客托管在*子目录*[http://blog.mathosproject.com/](http://blog.mathosproject.com/)中，该目录链接到[http： //mathosproject.com/blog/](http://mathosproject.com/blog/)。

我试图操纵根的*web.config*文件，使其不包括目录*博客*，如下所示：

```
 <configuration>
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="wordpress8" patternSyntax="Wildcard">
          <match url="^(blog|sample-page)*" ignoreCase="true" />
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            <add input="{REQUEST_URI}" pattern="^/(blog|index)" negate="true" />
          </conditions>
          <action type="Rewrite" url="blog/index.php" />
        </rule>

        <rule name="wordpress" patternSyntax="Wildcard">
          <match url="*" ignoreCase="false" />
          <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" negate="true" />
            <add input="{REQUEST_URI}" pattern="^/(blog|index)" negate="true" />
          </conditions>
          <action type="Rewrite" url="index.php" />

        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</configuration> 
```

这实际上帮助我能够在 blog 中查看第二个博客*，*但是当我处理到*sample-page*时，我被重定向到了第一个博客。

我的问题是，有没有办法可以配置*web.config*，以便它完全排除文件夹？

先感谢您，

阿尔乔姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T11:26:47.023

我想这太晚了，但有答案所以发布它。

在子目录 blog 中，编辑 web.config 并将其放在元素`<Clear/>`之后。`<rules>`这将使您的两个博客都能正常工作。

# c# - WaveOut 与 WaveOutEvent

> ID：13208271
> 
> 赞同：2
> 
> 时间：2012-11-03T10:27:46.933
> 
> 标签：c#, naudio

我正在`NAudio`使用

```
WaveOutEvent Klangwiedergabegeraet;

private void Play(string Dateiname)
{
    Klangwiedergabegeraet = new WaveOutEvent();
    Klangwiedergabegeraet.DeviceNumber = comboBox1.SelectedIndex;
    ISampleProvider StueckchenHalter = null;
    StueckchenHalter = CreateInputStreamS(Dateiname);
    Klangwiedergabegeraet.Init(new SampleToWaveProvider(StueckchenHalter));  
    Klangwiedergabegeraet.Play();
}

private void Cancel()
{
    if (Klangwiedergabegeraet != null)
    {
        Klangwiedergabegeraet.Stop();
        Klangwiedergabegeraet.Dispose();
    }
} 
```

运行时`Cancel()`，它不会停止。当我使用

```
WaveOut Klangwiedergabegeraet;

private void Play(string Dateiname)
{
    Klangwiedergabegeraet = new WaveOut();
    ...
}

private void Cancel()
{
    if (Klangwiedergabegeraet != null)
    {
        Klangwiedergabegeraet.Stop();
        Klangwiedergabegeraet.Dispose();
    }
} 
```

有效。为什么会这样以及要改变什么？

**PS**我使用`WaveOutEvent`而不是`WaveOut`因为`WaveOut`没有属性`DeviceNumber`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T15:40:41.103

如果您在非 GUI 线程上运行，那么`WaveOutEvent`推荐的方法是这样做，而不是`WaveOut`因为它会选择在某些声卡上可能不可靠的函数回调。此外，`WaveOut`确实`DeviceNumber`有财产。

# c# - Http post返回错误400错误请求asp.net c#

> ID：13208274
> 
> 赞同：0
> 
> 时间：2012-11-03T10:27:52.893
> 
> 标签：c#, asp.net, http-post

Http post返回错误400 bad request，这是我的代码，你能看到我哪里出错了吗？我猜这与网址有关？

```
System.Collections.Specialized.NameValueCollection data = new System.Collections.Specialized.NameValueCollection();
        data["var1"] = source1;
        data["var2"] = source2;
        data["var3"] = source3;

    // HTTP post and redirect the values
    string str2 = string.Empty;

    System.Text.StringBuilder builder = new System.Text.StringBuilder();

    foreach (string str3 in data.AllKeys)
    {
        builder.Append(str2);
        builder.Append(HttpUtility.UrlEncode(str3));
        builder.Append("=");
        builder.Append(HttpUtility.UrlEncode(data[str3]));
        str2 = "&";
    }

    //Make a request
    string path = Request.Url.AbsoluteUri;
    string url = path + Target + builder;
    url = "http://localhost:1541/test/var1=SELEZIONA&var2=SELEZIONA&var3=SELEZIONA";
    WebRequest request = WebRequest.Create(url);
    request.Method = "POST";
    request.ContentType = "application/x-www-form-urlencoded";

    //Put the post data into the request
    byte[] byteArray = System.Text.Encoding.UTF8.GetBytes(builder.ToString());

    request.ContentLength = byteArray.Length;
    Stream reqStream = request.GetRequestStream();
    reqStream.Write(byteArray, 0, byteArray.Length);
    reqStream.Close();

    //Get response
    System.Net.HttpWebResponse response = (System.Net.HttpWebResponse)request.GetResponse();
    response.Close(); 
```

我已将实际的 url 内容放在 url 变量中，以显示它当前尝试发送的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:34:26.260

您在 URL 中缺少用于分隔查询字符串的问号。我想这可能会导致这种错误。试试这个：

```
url = "http://localhost:1541/test/?var1=SELEZIONA&var2=SELEZIONA&var3=SELEZIONA"; 
```

# c++ - 指向类的双指针

> ID：13208276
> 
> 赞同：4
> 
> 时间：2012-11-03T10:27:55.960
> 
> 标签：c++, pointers

我记得在我的期末考试中看到了这行代码，直到今天我仍然无法弄清楚它或它的用途。我厌倦了谷歌搜索“双指针”和“指向类数组的指针”，但仍然找不到答案。

我想知道你为什么会使用这样的东西（实际使用）或引导我到一个为我解释这个的网站。谢谢你。

```
vendingMachine **va = new vendingMachine*[numMachines]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T10:39:42.747

所涉及的类型是一个类并不重要。它也可以是一个基本类型：

```
int **va = new int*[numInts]; 
```

语义是一样的。您有一个指向指针的指针。由于动态分配的数组是用指针实现的，所以它变成了一个指针数组。这是一个用例：

```
int a, b;
va[0] = &a;
va[1] = &b; 
```

但是，如上所述，您可以使用指针实现数组，因此您也可以将其视为数组数组。所以你有另一个用例：

```
va[0] = new int[10];
va[1] = new int[10];
// ...
va[numInts - 1] = new int[10];

va[0][0] = 2;
va[0][1] = 8;
// ...
va[numInts - 1][9] = 3; 
```

所以你有一个数组数组。或者换句话说，s 的二维数组`int`。如果您现在从 更改回`int`，`vendingMachine`您将拥有一个二维`vendingMachine`对象数组。

# opencart - 在 Opencart 1.5.3.1 中使用产品标签作为元关键字

> ID：13208277
> 
> 赞同：0
> 
> 时间：2012-11-03T10:28:11.370
> 
> 标签：opencart

我想在每个产品页面上使用我的产品标签作为元关键字。任何人都可以帮我处理这段代码吗？

塔克斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:02:19.333

以下是一些提示，它们是一般性的，但给出了不同方法的方向。第4步有点明显。很抱歉，这不是一个模块请求论坛，我认为你的问题是公平的，所以这个方向集应该让你朝着正确的方向前进。

1 - 打开`catalog/view/theme/default/product/product.tpl`

并使用标题回显进行查找和替换：

```
<?php

$getKeysandReplace=$header;
$getKeysandReplace=str_replace("<meta name=", "");

?> 
```

理解？或者使用正则表达式从`$header`字符串中删除元关键字和元描述，然后用您自己的替换它们`product.tpl`- 只需在下面的代码中获取标签回显。

```
<?php if ($tags) { ?>
  <div class="tags"><b><?php echo $text_tags; ?></b>
    <?php for ($i = 0; $i < count($tags); $i++) { ?>
    <?php if ($i < (count($tags) - 1)) { ?>
    <a href="<?php echo $tags[$i]['href']; ?>"><?php echo $tags[$i]['tag']; ?></a>,
    <?php } else { ?>
    <a href="<?php echo $tags[$i]['href']; ?>"><?php echo $tags[$i]['tag']; ?></a>
    <?php } ?>
    <?php } ?>
  </div>
  <?php } ?> 
```

2 - 您可以编辑`header.tpl`并执行`IF($GET`或`if page is product type page`然后显示此`Meta Tag`或显示正常标签。

3 - 您可以执行复制产品标签的 SQL crob 作业，并将它们作为产品关键字每天放置在您的数据库中。

4 - 确保员工将标签作为关键字复制并粘贴到管理面板中 - 说明显而易见的

# javascript - 需要在 Javascript 中创建正则表达式来检查有效的条件字符串

> ID：13208282
> 
> 赞同：6
> 
> 时间：2012-11-03T10:29:25.123
> 
> 标签：javascript, regex

我想在 javascript 中创建正则表达式，它将检查有效的条件字符串，例如

```
-1 OR (1 AND 2) AND 1

-1 OR (1 AND 2)

-1 OR 2

-1 OR 1 OR 1

-1 AND 1 AND 1 
```

字符串不应包含“AND”和“OR”。例如**-1 OR 2 AND 3 无效**。- 它应该是**(1 OR 2) AND 3** or **1 or (2 AND 3)**。

我尝试了以下正则表达式。它适用于大多数情况，但无法检查上述情况。

```
/^(\s*\(\d+\s(AND|OR)\s\d+\)|\s*\d+)((\s*(AND|OR)\s*)(\(\d+\s(AND|OR)\s\d+\)|\s*\d+))*$/ 
```

谁能帮我解决上述问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T12:51:36.570

忘记正则表达式，他们做不到。

## 解析器生成器来救援

使用解析器生成器，您可以创建**可理解**和可**维护**的语法。

这是一个带有在线演示的 JavaScript[解析器生成器。](http://pegjs.majda.cz/online)

## 语法

据我了解，您不希望`AND`and之间有任何隐含的优先规则`OR`。

以下是它认为有效的示例：

```
-1 OR 2 OR (2 AND 2 AND (2 OR (6 AND -2 AND (6 OR 2) AND (6 OR 2)) OR 2 OR 2)) 
```

目前，语法**需要/支持**

*   “无限”嵌套
*   带括号的显式优先级控制`AND`/`OR`
*   （多）文字的否定
*   操作数和运算符之间的空格

语法**可以**很容易**地更改**为

*   允许任意空格
*   文字的可选否定，而不是可能的多重否定
*   任何子表达式的否定

如果您想要更深入的解释或无法弄清楚如何根据自己的喜好进行调整，只需发表评论即可。

这是您的语法，只需将其粘贴到[在线生成器](http://pegjs.majda.cz/online)中，然后单击`Download parser`。

```
start
  = formula

formula
 = ors
 / ands
 / literal
 / parens_formula

parens_formula
 = "(" formula ")"

ors
 = operand (whitespace "OR" whitespace  operand)+

ands
 =  operand (whitespace "AND" whitespace operand)+

whitespace
 = " "+

operand
 = literal
 / parens_formula

literal
 = integer
 / "-" literal

integer "integer"
  = digits:[0-9]+ { return parseInt(digits.join(""), 10); } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T19:20:06.610

有趣的问题。phant0m 的回答很有教育意义！（如果您了解解析器，应该使用它）。

如果您只想使用正则表达式来执行此操作，则以下解决方案使用 JavaScript 正确验证任意嵌套的逻辑语句。

## 规则/假设：

*   有效语句仅由数字、括号、空格、`AND`逻辑运算符和`OR`逻辑运算符组成。
*   该语句必须包含至少两个“标记”，由逻辑运算符分隔，其中每个标记要么是“数字”，要么是“带括号的单位”。
*   “数字”标记是一个数字整数，具有一个或多个十进制数字，前面紧接可选符号（`+`或`-`）。
*   “带括号的单元”标记是两个或多个标记，由逻辑运算符分隔，包含在匹配的开括号和右括号中。
*   整个语句可能包含两个以上的标记，但所有标记必须由相同的单个运算符分隔；要么`AND`要么`OR`。
*   每个带括号的单元可能包含两个以上的标记，但所有标记必须由相同的单个运算符分隔；要么`AND`要么`OR`。
*   在任何元素（括号、数字和逻辑运算符）之间可以使用任意数量的空格，但在数字和逻辑运算符之间至少需要一个空格。
*   和逻辑运算`AND`符`OR`不区分大小写。

## 有效逻辑语句的示例：

```
"1 AND 2"
"1 AND 2 AND 3"
"1 OR 2"
"-10 AND -20"
"100 AND +200 AND -300"
"1 AND (2 OR 3)"
"1 AND (2 OR 3) AND 4"
"1 OR ((2 AND 3 AND 4) OR (5 OR 6 OR 7))"
"( 1 and 2 ) AND (1 AND 2)" 
```

## 无效逻辑语句的示例：

```
"1x"            // Invalid character.
"1 AND"         // Missing token.
"1 AND 2 OR 3"  // Mixed logical operators.
"(1"            // Unbalanced parens.
"(((1 AND 2)))" // Too many parens.
"(1 AND) (2)"   // Missing token.
"1"             // Missing logical operator and second number
"1OR2OR3OR4"    // Missing spaces between numbers and operators.
"(1) AND (2)"   // Invalid parentheses. 
```

## 正则表达式解决方案：

这个问题需要匹配嵌套的括号结构，并且 JavaScript 正则表达式引擎不支持递归表达式，因此无法使用单个正则表达式一次性解决这个问题。但是，可以将问题简化为两个部分，每个部分都*可以*使用单个 JavaScript 正则表达式来解决。第一个正则表达式匹配最里面的括号单元，第二个验证简化的逻辑语句（没有括号）。

## 正则表达式 #1：匹配最里面的括号单元。

以下正则表达式匹配一个带括号的单元，该单元由两个或多个数字标记组成，其中数字全部由数字和逻辑运算符之间的一个`AND`或`OR`至少一个空格分隔。正则表达式经过全面注释和格式化，以便在 PHP 自由间距模式语法中易于阅读：

```
$re_paren = '/
    # Match innermost "parenthesized unit".
    \(            # Start of innermost paren group.
    \s*           # Optional whitespace.
    [+-]?\d+      # First number token (required).
    (?:           # ANDs or ORs (required).
      (?:         # Either multiple AND separated values.
        \s+       # Required whitespace.
        AND       # Logical operator.
        \s+       # Required whitespace.
        [+-]?\d+  # Additional number.
      )+          # multiple AND separated values.
    | (?:         # Or multiple OR separated values.
        \s+       # Required whitespace.
        OR        # Logical operator.
        \s+       # Required whitespace.
        [+-]?\d+  # Additional number token.
      )+          # multiple OR separated values.
    )             # ANDs or ORs (required).
    \s*           # Optional whitespace.
    \)            # End of innermost paren group.
    /ix'; 
```

## 正则表达式 #2：验证简化的逻辑语句。

这是一个（除了边界锚点几乎相同）正则表达式，它验证简化的逻辑语句（只有数字和逻辑运算符，没有括号）。这是注释的自由间距模式（PHP）语法：

```
$re_valid = '/
    # Validate simple logical statement (no parens).
    ^             # Anchor to start of string.
    \s*           # Optional whitespace.
    [+-]?\d+      # First number token (required).
    (?:           # ANDs or ORs (required).
      (?:         # Either multiple AND separated values.
        \s+       # Required whitespace.
        AND       # Logical operator.
        \s+       # Required whitespace.
        [+-]?\d+  # Additional number.
      )+          # multiple AND separated values.
    | (?:         # Or multiple OR separated values.
        \s+       # Required whitespace.
        OR        # Logical operator.
        \s+       # Required whitespace.
        [+-]?\d+  # Additional number token.
      )+          # multiple OR separated values.
    )             # ANDs or ORs (required).
    \s*           # Optional whitespace.
    $             # Anchor to end of string.
    /ix'; 
```

请注意，除了边界锚点之外，这两个正则表达式是相同的。

## JavaScript 解决方案：

以下经过测试的 JavaScript 函数使用上述两个正则表达式来解决问题：

```
function isValidLogicalStatement(text) {
    var re_paren = /\(\s*[+-]?\d+(?:(?:\s+AND\s+[+-]?\d+)+|(?:\s+OR\s+[+-]?\d+)+)\s*\)/ig;
    var re_valid =  /^\s*[+-]?\d+(?:(?:\s+AND\s+[+-]?\d+)+|(?:\s+OR\s+[+-]?\d+)+)\s*$/ig;
    // Iterate from the inside out.
    while (text.search(re_paren) !== -1) {
        // Replace innermost parenthesized units with integer.
        text = text.replace(re_paren, "0");
    }
    if (text.search(re_valid) === 0) return true;
    return false;
} 
```

该函数使用迭代技术首先匹配和替换最里面的括号单元，用单个数字标记替换每个单元，然后检查结果语句（无括号）是否有效。

## 附录：2012-11-06

在对此答案的评论中，OP 现在说数字和运算符之间必须有空格，并且数字或带括号的单位可能不会独立存在。考虑到这些附加要求，我更新了上面的答案。

# latex - 如何在 IPython Notebook 中编写 LaTeX？

> ID：13208286
> 
> 赞同：326
> 
> 时间：2012-11-03T10:29:54.500
> 
> 标签：latex, jupyter-notebook, ipython

如何在 IPython Notebook 中显示 LaTeX 代码？

* * *

## 回答 #1

> 赞同：304
> 
> 时间：2012-11-04T20:20:55.960

IPython notebook 使用[MathJax](http://www.mathjax.org/)在 html/markdown 中渲染 LaTeX。只需将您的 LaTeX 数学放入`$$`.

```
$$c = \sqrt{a^2 + b^2}$$ 
```

![平方](../Images/5e530cca856a7bf74cf5ed72039e6ca2.png)

[或者您可以显示来自 Python 的 LaTeX/Math 输出，如笔记本之旅](http://nbviewer.ipython.org/github/ipython/ipython/blob/1.x/examples/notebooks/Part%205%20-%20Rich%20Display%20System.ipynb)结束时所见：

```
from IPython.display import display, Math, Latex
display(Math(r'F(k) = \int_{-\infty}^{\infty} f(x) e^{2\pi i k} dx')) 
```

![不可缺少的](../Images/f17d9bbb511d5b6acb7dd0b6ecc7b0cd.png)

* * *

## 回答 #2

> 赞同：175
> 
> 时间：2013-05-21T01:11:53.333

这出现在我刚刚进行的搜索中，通过更多搜索找到了更好的解决方案，IPython 笔记本现在具有一种`%%latex`魔力，可以使整个单元格 Latex 没有`$$`每一行的包装器。

请参阅[富显示系统的笔记本之旅](http://nbviewer.ipython.org/github/ipython/ipython/blob/2.x/examples/Notebook/Display%20System.ipynb#LaTeX)

* * *

## 回答 #3

> 赞同：91
> 
> 时间：2017-06-05T18:50:04.217

### 乳胶参考：

Udacity 的博客有我见过 的**最好的** **[LaTeX Primer ：它清楚地展示了如何以易于阅读和易于记忆的方式使用 LaTeX 命令！](http://data-blog.udacity.com/posts/2016/10/latex-primer/)***强烈推荐*。

此链接具有显示代码和渲染结果的**[优秀示例！](http://jupyter-notebook.readthedocs.io/en/latest/examples/Notebook/Typesetting%20Equations.html)**
您可以使用此站点通过示例快速学习如何编写 LaTeX。

而且，这里是[LaTeX](https://en.wikibooks.org/wiki/LaTeX/Mathematics)命令/符号的快速参考。

* * *

## 总结：在 Jupyter/IPython 中表示 LaTeX 的各种方法：

### **[Markdown 单元格的示例](http://jupyter-notebook.readthedocs.io/en/latest/notebook.html#markdown-cells)：**

**内联，换行：`$`**

```
The equation used depends on whether the the value of  
$V​max​​$ is R, G, or B. 
```

**块，换行：`$$`**

```
$$H←  ​​​​​0 ​+​ \frac{​​30(G−B)​​}{Vmax−Vmin}  ​​, if V​max​​ = R$$ 
```

**块，换行：`\begin{equation}`**和`\end{equation}`

```
\begin{equation}
H← ​​​60 ​+​ \frac{​​30(B−R)​​}{Vmax−Vmin}  ​​, if V​max​​ = G
\end{equation} 
```

**块，换行：`\begin{align}`**和`\end{align}`

```
\begin{align}
H←120 ​+​ \frac{​​30(R−G)​​}{Vmax−Vmin}  ​​, if V​max​​ = B
\end{align} 
```

### **代码单元的[示例：](https://nbviewer.jupyter.org/github/ipython/ipython/blob/master/examples/IPython%20Kernel/Rich%20Output.ipynb)**

**LaTex Cell：** **`%%latex`**魔术命令将*整个单元格*变成一个**LaTeX Cell**

```
%%latex
\begin{align}
\nabla \cdot \vec{\mathbf{E}} & = 4 \pi \rho \\
\nabla \times \vec{\mathbf{E}}\, +\, \frac1c\, \frac{\partial\vec{\mathbf{B}}}{\partial t} & = \vec{\mathbf{0}} \\
\nabla \cdot \vec{\mathbf{B}} & = 0
\end{align} 
```

**传入**原始 LaTeX 字符串的****数学对象**：**

 **```
from IPython.display import Math
Math(r'F(k) = \int_{-\infty}^{\infty} f(x) e^{2\pi i k} dx') 
```

**乳胶类**。注意：您必须自己包含分隔符。这允许您使用其他 LaTeX 模式，例如`eqnarray`：

```
from IPython.display import Latex
Latex(r"""\begin{eqnarray}
\nabla \times \vec{\mathbf{B}} -\, \frac1c\, \frac{\partial\vec{\mathbf{E}}}{\partial t} & = \frac{4\pi}{c}\vec{\mathbf{j}} \\
\nabla \cdot \vec{\mathbf{E}} & = 4 \pi \rho \\
\nabla \times \vec{\mathbf{E}}\, +\, \frac1c\, \frac{\partial\vec{\mathbf{B}}}{\partial t} & = \vec{\mathbf{0}} \\
\nabla \cdot \vec{\mathbf{B}} & = 0 
\end{eqnarray}""") 
```

### 原始细胞**[的文档：](http://jupyter-notebook.readthedocs.io/en/latest/notebook.html#raw-cells)**

（对不起，这里没有例子，只有文档）

> 原始单元 原始单元提供了一个可以直接写入输出的地方。笔记本不评估原始单元格。通过 时`nbconvert`，原始单元格以未修改的目标格式到达。例如，这允许您将**完整的 LaTeX 输入到原始单元格**中，该单元格仅在转换后由 LaTeX 呈现`nbconvert`。

### 附加文件：

对于 Markdown 单元，引用自[Jupyter Notebook 文档](http://jupyter-notebook.readthedocs.io/en/latest/notebook.html#markdown-cells)：

> 在 Markdown 单元格中，您还可以使用标准 LaTeX 表示法以简单的方式包含数学：**$...$ 用于内联数学**，**$$...$$ 用于显示数学**。执行 Markdown 单元格时，LaTeX 部分会自动在 HTML 输出中呈现为具有高质量排版的方程式。这是由 MathJax 实现的，它支持大部分 LaTeX 功能
> 
> 由 LaTeX 和 AMS-LaTeX（amsmath 包）定义的标准数学环境也可以工作，例如**\begin{equation}...\end{equation}**和**\begin{align}...\end{align}**。可以使用标准方法定义新的 LaTeX 宏，例如 \newcommand，方法是将它们放在 Markdown 单元格中数学分隔符之间的任何位置。然后，这些定义在 IPython 会话的其余部分都可用。

* * *

## 回答 #4

> 赞同：36
> 
> 时间：2013-11-25T19:18:48.093

如果您希望数学显示在一行中，请使用 $$，例如，

```
$$a = b + c$$ (line break after the equation) 
```

如果您在数学运算后不需要换行符，请使用单个美元符号 $，例如，

```
$a = b + c$   (no line break after the equation) 
```

* * *

## 回答 #5

> 赞同：24
> 
> 时间：2013-12-02T21:06:33.380

正如上面一位响应者所说，您可以选择一个要降价的单元格，然后编写由 mathjax 解释的乳胶代码。

或者，iPython notebook 教程的 Latex 部分很好地解释了这一点。

你可以这样做：

```
from IPython.display import Latex
Latex(r"""\begin{eqnarray}
\nabla \times \vec{\mathbf{B}} -\, \frac1c\, \frac{\partial\vec{\mathbf{E}}}{\partial t} & = \frac{4\pi}{c}\vec{\mathbf{j}} \\
\nabla \cdot \vec{\mathbf{E}} & = 4 \pi \rho \\
\nabla \times \vec{\mathbf{E}}\, +\, \frac1c\, \frac{\partial\vec{\mathbf{B}}}{\partial t} & = \vec{\mathbf{0}} \\
\nabla \cdot \vec{\mathbf{B}} & = 0 
\end{eqnarray}""") 
```

或这样做：

```
%%latex
\begin{align}
\nabla \times \vec{\mathbf{B}} -\, \frac1c\, \frac{\partial\vec{\mathbf{E}}}{\partial t} & = \frac{4\pi}{c}\vec{\mathbf{j}} \\
\nabla \cdot \vec{\mathbf{E}} & = 4 \pi \rho \\
\nabla \times \vec{\mathbf{E}}\, +\, \frac1c\, \frac{\partial\vec{\mathbf{B}}}{\partial t} & = \vec{\mathbf{0}} \\
\nabla \cdot \vec{\mathbf{B}} & = 0
\end{align} 
```

**[在此链接](http://nbviewer.ipython.org/github/ipython/ipython/blob/master/examples/notebooks/Part%205%20-%20Rich%20Display%20System.ipynb#LaTeX)中找到更多信息**

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2014-04-17T01:50:29.403

我开发了[prettyPy](https://github.com/charliekawczynski/prettyPy)，它提供了一种打印方程式的好方法。不幸的是，它没有性能并且需要测试。

例子：

![在此处输入图像描述](../Images/8a21701ae23af89d3e4c82c535f0688b.png)

诚然，[sympy](http://sympy.org/en/index.html)是一个很好的选择，虽然 prettyPy 不允许评估表达式，但变量初始化不是必需的。

* * *

## 回答 #7

> 赞同：11
> 
> 时间：2016-03-03T16:56:01.667

因为，即使在使用 %%latex 关键字或 $..$ 限制器之后，我也无法在代码中使用所有的乳胶命令，我安装了 nbextensions，通过它我可以在 Markdown 中使用乳胶命令。按照此处的说明操作后：[https](https://github.com/ipython-contrib/IPython-notebook-extensions/blob/master/README.md) ://github.com/ipython-contrib/IPython-notebook-extensions/blob/master/README.md然后重新启动 Jupyter，然后重新启动 localhost:8888/nbextensions 然后激活“Latex Env​​ironment for Jupyter”，我可以运行许多 Latex 命令。示例在这里：[https ://rawgit.com/jfbercher/latex_envs/master/doc/latex_env_doc.html](https://rawgit.com/jfbercher/latex_envs/master/doc/latex_env_doc.html)

```
\section{First section}
\textbf{Hello}
$
\begin{equation} 
c = \sqrt{a^2 + b^2}
\end{equation}
$
\begin{itemize}
\item First item
\item Second item
\end{itemize}
\textbf{World} 
```

如您所见，我仍然无法使用 usepackage。但也许以后会有所改进。

[![在此处输入图像描述](../Images/a033277bf6d3f8451e78e41814753742.png)](https://i.stack.imgur.com/AFdQ7.png)

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2020-02-16T07:29:08.063

[我在这篇文章](https://towardsdatascience.com/7-essential-tips-for-writing-with-jupyter-notebook-60972a1a8901)中写了如何在 Jupyter Notebook 中编写 LaTeX 。

您需要将它们括在美元 ($) 符号中。

*   要向左对齐，请使用单个美元 ($) 符号。

`$P(A)=\frac{n(A)}{n(U)}$`

*   要与中心对齐，请使用双美元 ($$) 符号。

`$$P(A)=\frac{n(A)}{n(U)}$$`

*   使用`\limits`for`\lim`和为每个标志的顶部`\sum`和`\int`底部添加限制。

*   使用反斜杠转义 LaTeX 特殊词，例如数学符号、拉丁词、文本等。

[![在此处输入图像描述](../Images/4d26d027bfe985526eed0c30787d7999.png)](https://i.stack.imgur.com/T6NkD.png)

试试这个。

```
$$\overline{x}=\frac{\sum \limits _{i=1} ^k f_i x_i}{n} \text{, where } n=\sum \limits _{i=1} ^k f_i  $$ 
```

*   矩阵

[![在此处输入图像描述](../Images/b3f98b9cddd890a0c0c8a7730456b083.png)](https://i.stack.imgur.com/UMYVz.png)

*   分段函数

```
$$
\begin{align}
\text{Probability density function:}\\
\begin{cases}
\frac{1}{b-a}&\text{for $x\in[a,b]$}\\
0&\text{otherwise}\\
\end{cases}
\\
\text{Cumulative distribution function:}\\
\begin{cases}
0&\text{for $x<a$}\\
\frac{x-a}{b-a}&\text{for $x\in[a,b)$}\\
1&\text{for $x\ge b$}\\
\end{cases}
\end{align}
$$ 
```

上面的代码将创建它。

[![在此处输入图像描述](../Images/5d75e512ed54d2bce980996620d76d43.png)](https://i.stack.imgur.com/PRwil.png)

如果您想知道如何为方程式添加编号和对齐方程式，请阅读[本文了解详细信息](https://towardsdatascience.com/7-essential-tips-for-writing-with-jupyter-notebook-60972a1a8901)。

* * *

## 回答 #9

> 赞同：9
> 
> 时间：2016-11-29T12:38:49.733

[minrk](https://stackoverflow.com/users/938949/minrk)给出的答案（为了完整性而包含在内）很好，但还有另一种我更喜欢的方式。

您还可以通过在文本单元格中`LaTeX`键入`%%latex`第一行来呈现整个单元格。这很有用，如果你

*   想要更多的控制权，
*   想要的不仅仅是一个数学环境，
*   或者如果你要在一个单元格中写很多数学。

**[明克](https://stackoverflow.com/users/938949/minrk)的回答：**

* * *

> IPython notebook 使用[MathJax](http://www.mathjax.org/)在 html/markdown 中渲染 LaTeX。只需将您的 LaTeX 数学放入`$$`.
> 
> ```
> $$c = \sqrt{a^2 + b^2}$$ 
> ```
> 
> ![平方](../Images/5e530cca856a7bf74cf5ed72039e6ca2.png)
> 
> [或者您可以显示来自 Python 的 LaTeX/Math 输出，如笔记本之旅](http://nbviewer.ipython.org/github/ipython/ipython/blob/1.x/examples/notebooks/Part%205%20-%20Rich%20Display%20System.ipynb)结束时所见：
> 
> ```
> from IPython.display import display, Math, Latex
> display(Math(r'F(k) = \int_{-\infty}^{\infty} f(x) e^{2\pi i k} dx')) 
> ```
> 
> ![不可缺少的](../Images/f17d9bbb511d5b6acb7dd0b6ecc7b0cd.png)

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2016-10-22T21:58:49.593

如果您的主要目标是做数学，SymPy 提供了[一种很好的方法](http://docs.sympy.org/latest/tutorial/printing.html)来处理看起来很棒的函数式乳胶表达式。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2019-06-14T08:41:22.987

直接在 Markdown 单元格中使用 LaTeX 语法对我有用。我正在使用 Jypiter 4.4.0。

我坚持认为，我不必使用`%%latex`魔法命令，只需一个降价单元：

```
\begin{align}
\nabla \times \vec{\mathbf{B}} -\, \frac1c\, \frac{\partial\vec{\mathbf{E}}}{\partial t} & = \frac{4\pi}{c}\vec{\mathbf{j}} \\
\nabla \cdot \vec{\mathbf{E}} & = 4 \pi \rho \\
\nabla \times \vec{\mathbf{E}}\, +\, \frac1c\, \frac{\partial\vec{\mathbf{B}}}{\partial t} & = \vec{\mathbf{0}} \\
\nabla \cdot \vec{\mathbf{B}} & = 0
\end{align} 
```

呈现给：

[![在此处输入图像描述](../Images/12466c04ccac8d9385cc62a57aaef039.png)](https://i.stack.imgur.com/QeOTB.png)

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-03-16T10:19:43.203

有一天我在使用 colab 时遇到了这个问题。我发现最轻松的方法就是在打印之前运行这段代码。那时一切都像魅力一样。

```
from IPython.display import Math, HTML

def load_mathjax_in_cell_output():
  display(HTML("<script src='https://www.gstatic.com/external_hosted/"
               "mathjax/latest/MathJax.js?config=default'></script>"))
get_ipython().events.register('pre_run_cell', load_mathjax_in_cell_output)
import sympy as sp
sp.init_printing() 
```

结果如下所示：

[![在此处输入图像描述](../Images/dd702c4ce13a9f3766f73b96724917f8.png)](https://i.stack.imgur.com/Qe3pO.png)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-06-24T21:13:57.470

我正在使用 Jupyter 笔记本。我不得不写

```
%%latex
$sin(x)/x$ 
```

获得 LaTex 字体。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-02-05T20:59:23.990

当您想要控制文档序言时的另一种解决方案。编写一个完整的文档，发送到系统latex，将pdf转换为png，用于`IPython.display`加载和显示。

```
import tempfile
import os.path
import subprocess
from IPython.display import Image, display

with tempfile.TemporaryDirectory(prefix="texinpy_") as tmpdir:
    path = os.path.join(tmpdir, "document.tex")
    with open(path, 'w') as fp:
        fp.write(r"""
        \documentclass[12pt]{standalone}
        \begin{document}
        \LaTeX{}
        \end{document}
        """)
    subprocess.run(["lualatex", path], cwd=tmpdir)
    subprocess.run(["pdftocairo", "-singlefile", "-transp", "-r", "100", "-png", "document.pdf", "document"], cwd=tmpdir)
    im = Image(filename=os.path.join(tmpdir, "document.png"))
    display(im) 
```

[![在此处输入图像描述](../Images/551d0b9175f57df8622001d24b96650c.png)](https://i.stack.imgur.com/21BdL.png)

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2022-01-06T10:56:02.910

如果要显示笔记本代码单元格中的 LaTeX 方程，可以创建一个简单的包装类，该类使用[Jupyter 笔记本的丰富显示](https://ipython.readthedocs.io/en/stable/config/integrating.html#rich-display)表示。这个类应该有一个`_repr_latex_`输出 LaTeX 字符串的方法（注意开头和结尾的单下划线，而不是其他特殊方法的双下划线）。例如：

```
class LaTeXEquation:
    def __init__(self, eqntext):
        self.eqntext = eqntext

    def __repr__(self):
        return repr(self.eqntext)

    def _repr_latex_(self):
        """
        Special method for rich display of LaTeX formula.
        """

        # add $'s at start and end if not present
        if self.eqntext.strip()[0] != "$" and self.eqntext.strip()[-1] != "$":
            return "$" + self.eqntext + "$"
        else:
            return self.eqntext

myeqn = "x = y^2" 
```

然后在代码单元中，如果你这样做，例如，

```
LaTeXEquation(myeqn) 
```

它将显示格式化的方程式。**

# c - c89 和 c99 中的余数运算符

> ID：13208287
> 
> 赞同：5
> 
> 时间：2012-11-03T10:29:55.997
> 
> 标签：c, c99, c89

**c99**标准规定模运算的结果与第一个操作数的符号相同。所以`-9 % 7 = -2`和`9 % -7 = 2`。

我在一本书中读到，c89 标准取决于实现。那么`-9 % 7`可以产生`-2`还是`**5**`??? 剩余的`-9 / 7`可能是`5`多少？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T10:34:34.893

考虑两个数字`a`和`b`。

商`q=a/b`和余数`r=a%b`满足方程`a == q*b + r`。

C89 的（假设）实现，其中 -9 % 7 产生 5 是其中 -9 / 7 计算为 -2 的实现。

数学（欧几里得）除法约束`r`为正且小于`b`。C99 将其限制为与 和 之间的符号相同`a`且严格介于`-b`和之间`b`。这只是一个约定俗成的问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T10:35:55.787

`%`运算符定义为：

```
a == (a / b * b) + a % b 
```

所以

```
a % b = a - (a / b * b) 
```

**% 作为余数运算符**

如果向（如 C99）`/`四舍五入：`0`

```
-9 % 7 == -2 
```

你有`-9 / 7 == -1`，`%`是`-2`因为

```
-9 % 7 == -9 - (-9 / 7 * 7) + 9 == -9 + 7 == -2 
```

**% 作为模运算符**

如果`/`向负无穷舍入：

```
-9 % 7 == 5 
```

你有`-9 / 7 == -2`所以`%`是`5`

```
-9 % 7 == -9 - (-9 / 7 * 7) + 9 == -9 + 14 == 5 
```

# linux - linux上的shell脚本

> ID：13208290
> 
> 赞同：2
> 
> 时间：2012-11-03T10:30:21.543
> 
> 标签：linux, shell, cron

这是我的shell脚本

```
#!/bin/bash

crawlers(){
    nohup scrapy crawl a &
    nohup scrapy crawl b &
    wait $!
    nohup scrapy crawl f &
    nohup scrapy crawl g &
    wait $!
    nohup scrapy crawl h &
    nohup scrapy crawl i &
    wait $!
    nohup scrapy crawl i &
    nohup scrapy crawl j &
    nohup scrapy crawl k &
    wait $!
    nohup scrapy crawl l &
    nohup scrapy crawl m &
}

PATH=$PATH:/usr/local/bin
export PATH

python add_columns.py &
wait $!
crawlers &
wait $!
python final_script.py & 
```

我要运行的**第一个**add_columns.py 脚本

然后是**爬虫**脚本（**爬虫中的所有脚本都是异步的**）

终于想运行**final_script.py**

但使用上面的shell脚本

final_script.py 在结束前执行

```
nohup scrapy crawl l &
nohup scrapy crawl m & 
```

虽然我等着爬虫

```
crawlers &
wait $! 
```

最后，只有在 crawlers() 方法中的所有作业完成后，我才能调用 final_script.py。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:51:44.377

首先，为什么要费心为你立即做的事情做背景`wait`？

其次，在`crawlers`函数中，您只`wait`进行了一半的调用；另一半可能仍在运行。

使用`wait`不带参数等待所有当前活动的孩子退出。这将是一个更好的版本：

```
#!/bin/bash

crawlers(){
    nohup scrapy crawl a &
    nohup scrapy crawl b &
    nohup scrapy crawl f &
    nohup scrapy crawl g &
    nohup scrapy crawl h &
    nohup scrapy crawl i &
    nohup scrapy crawl i &
    nohup scrapy crawl j &
    nohup scrapy crawl k &
    nohup scrapy crawl l &
    nohup scrapy crawl m &

    wait
}

PATH=$PATH:/usr/local/bin
export PATH

python add_columns.py

crawlers

python final_script.py 
```

# python - 如何在 AppFog 中使用 Apache 提供静态内容（WSGI Python 应用程序）

> ID：13208293
> 
> 赞同：5
> 
> 时间：2012-11-03T10:31:06.917
> 
> 标签：python, apache, wsgi, appfog, static-content

我用了几天的[AppFog](http://www.appfog.com) PaaS 系统，我很喜欢它，它可能是我测试过的最好的 PaaS 系统（我之前使用过其他 3 个），但是没有找到关于如何服务静态的信息前端 Web 服务器的内容（Apache https 或 nginx） 我不确定正在使用什么服务器。

我的应用程序是一个带有 CherryPy 的 Python WSGI，并且在 AppFog 中完美运行，但我不希望 CherryPy 提供静态内容，我认为 Apache httpd 或 nginx 是一个更好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-29T19:58:16.830

在 Ryan 的支持下，我终于可以加载静态文件了！以下是步骤：

1.  在项目根目录中创建了一个“静态”目录——这里所有的静态文件都将通过[collectstatic](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/#collectstatic)命令被收集。

2.  编辑*settings.py*文件：

    STATIC_ROOT = os.path.join( os.path.abspath( os.path.dirname( **file** ) ), '../static' ) # 可能会根据你的 settings.py 文件的位置而改变！

    STATIC_URL = '/静态/'

3.  *在urls.py*文件的`urlpatterns`变量中添加以下行：

     *url(r'^static/(?P.*)$', 'django.views.static.serve', { 'document_root': settings.STATIC_ROOT} ) ,* 
**   最后，在本地机器上运行 collectstatic 命令。这将从您正在使用的应用程序中复制所有静态文件：

    python manage.py collectstatic* 

 *而已。推入AF :)

`collectstatic`缺点：每次我们有一个新的静态文件时都需要运行......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:40:30.920

编辑你的 nginx.conf 文件。在服务器部分输入...

```
 # serve static files
      location ~ ^/(images|javascript|css)/  {
      root    /var/www/html/appname;
    } 
```

images、javascript 和 css 将是您文档根文件夹中的文件夹。相应地更新您的所有网址。*

# javascript - Javascript 功能仅在页面刷新后有效

> ID：13208305
> 
> 赞同：3
> 
> 时间：2012-11-03T10:32:47.540
> 
> 标签：javascript, function, refresh

如果我单击“发送”按钮，则会在客户端 sql 数据库中放置一条消息并显示一条通知。

但是，这只有在我先刷新页面时才有效！

如何使该功能立即开始工作？我已经尝试将函数“addMessage”放在 $(document).ready(function() 中，但随后该函数完全停止工作。请参见下面的代码：

```
<script>
        var db;

        $(document).ready(function()    {
            //Opens the database
            try
            {
              if (!window.openDatabase) {
                    alert('Not supported -> Please use a webkit browser');
              } else {
                  var shortName = 'Rvpk';
                  var version = '1.0';
                  var displayName = 'The Rvpk databse';
                  var maxSize = 3072*1024; //  = 3MB in bytes 65536
                  db = openDatabase(shortName, version, displayName, maxSize);      
                  }  
            }
            catch(e)
            {
              if (e == 2) {
                  alert("Invalid database version.");
              } else {
                  alert("Unknown error "+e+".");
              }return;
            }

            //If needed creates the messagetable
            db.transaction(function (tx) {
                 tx.executeSql('CREATE TABLE IF NOT EXISTS message (id INTEGER PRIMARY KEY, name)')                    
            });
        });

        //The function addMessage takes the entered message from the message inputfield and places it inside the messagetable
        function addMessage(){
        var message = $('input:text[name=message]').val();

            db.transaction(function (tx) {
                     tx.executeSql("INSERT INTO message (id, name) VALUES (NULL, ?)", [message]);
            });
            console.log("Message "+ message +" added to database");

            //Shows a notification that sending the message was a success
            alert('The message has been sent');

            //Update the messages
            updateMessages();            
        }    
    </script>
    </head>

    <body>
    <?php include("includes/header2.php"); ?>

                <div data-role="content">
                    <form>
                        <fieldset>
                            <label id="messagelabel" for="message">Message:</label>
                            <input id="message" type="text" name="message" value="This can't go on like this">
                            <button onClick="addMessage()" data-theme="g">Send</button>
                        </fieldset>
                    </form>
                </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:22:00.690

请试试这个：

document.ready 仅在页面加载时运行。而是在单独的函数中使用它，并在需要时调用该函数。复制并粘贴以下脚本。

```
<script>
        var db;

        function runThis()
        {
            //Opens the database
            try
            {
              if (!window.openDatabase) {
                    alert('Not supported -> Please use a webkit browser');
              } else {
                  var shortName = 'Rvpk';
                  var version = '1.0';
                  var displayName = 'The Rvpk databse';
                  var maxSize = 3072*1024; //  = 3MB in bytes 65536
                  db = openDatabase(shortName, version, displayName, maxSize);      
                  }  
            }
            catch(e)
            {
              if (e == 2) {
                  alert("Invalid database version.");
              } else {
                  alert("Unknown error "+e+".");
              }return;
            }

            //If needed creates the messagetable
            db.transaction(function (tx) {
                 tx.executeSql('CREATE TABLE IF NOT EXISTS message (id INTEGER PRIMARY KEY, name)')                    
            });
        }

        //The function addMessage takes the entered message from the message inputfield and places it inside the messagetable
        function addMessage(){

        //call db access function.
        runThis();

        var message = $('input:text[name=message]').val();

            db.transaction(function (tx) {
                     tx.executeSql("INSERT INTO message (id, name) VALUES (NULL, ?)", [message]);
            });
            console.log("Message "+ message +" added to database");

            //Shows a notification that sending the message was a success
            alert('The message has been sent');

            //Update the messages
            updateMessages();            
        }    
    </script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:10:50.793

我将您的代码粘贴到测试文件中，并试图找出确切的问题在哪里。我不知道确切的问题是什么，但我发现打击部分有一些问题，这就是为什么警报没有第一次出现：

> db.transaction(function (tx) { tx.executeSql("INSERT INTO message (id, name) VALUES (NULL, ?)", [message]); });

尝试在上面的部分评论，警报将在不刷新页面的情况下起作用。我认为您应该检查一下您是否在上述部分中犯了错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T12:04:59.380

如果在 chrome 中打开复制粘贴到文件中的代码可以正常工作，它会在按钮单击时引发警告消息**“消息已发送”**，而无需刷新

```
<html>
<head>
<script src="jquery.min.js" type="text/javascript"></script>
<script>
          var db;

          $(document).ready(function()    {
              //Opens the database
              try
              {
                if (!window.openDatabase) {
                      alert('Not supported -> Please use a webkit browser');
                } else {
                    var shortName = 'Rvpk';
                    var version = '1.0';
                    var displayName = 'The Rvpk databse';
                    var maxSize = 3072*1024; //  = 3MB in bytes 65536
                    db = openDatabase(shortName, version, displayName, maxSize);      
                    }  
              }
              catch(e)
              {
                if (e == 2) {
                    alert("Invalid database version.");
                } else {
                    alert("Unknown error "+e+".");
                }return;
              }

              //If needed creates the messagetable
              db.transaction(function (tx) {
                   tx.executeSql('CREATE TABLE IF NOT EXISTS message (id INTEGER PRIMARY KEY, name)')                    
              });
          });

          //The function addMessage takes the entered message from the message inputfield and places it inside the messagetable
          function addMessage(){
          var message = $('input:text[name=message]').val();

              db.transaction(function (tx) {
                       tx.executeSql("INSERT INTO message (id, name) VALUES (NULL, ?)", [message]);
              });
              console.log("Message "+ message +" added to database");

              //Shows a notification that sending the message was a success
              alert('The message has been sent');

              //Update the messages
              updateMessages();            
          }    
      </script>
      </head>

      <body>
      <?php include("includes/header2.php"); ?>

                  <div data-role="content">
                      <form>
                          <fieldset>
                              <label id="messagelabel" for="message">Message:</label>
                              <input id="message" type="text" name="message" value="This can't go on like this">
                              <button onClick="addMessage()" data-theme="g">Send</button>
                          </fieldset>
                      </form>
                  </div> 
</body>
</html> 
```

当然，请确保 jquery.min.js 在同一目录中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T12:21:05.163

我也在使用谷歌浏览器。我仍然需要先使用此代码刷新。

```
<!DOCTYPE html>
<html lang="nl">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1"> 
    <link rel="stylesheet" href="jquery.mobile-1.2.0/jquery.mobile-1.2.0.css" />
    <script src="jquery.mobile-1.2.0/jquery-1.8.2.min.js"></script>
    <script src="jquery.mobile-1.2.0/jquery.mobile-1.2.0.min.js"></script>

    <link href="css/layout.css" rel="stylesheet" type="text/css" />
    <link rel="shortcut icon" href="afbeeldingen/favicon.ico" type="image/x-icon" />
    <meta name="Author" content="Tobias Boekwijt" />    <title>This can't go on like this</title>

<script>
var db;

        function runThis()
        {
            //Opens the database
            try
            {
              if (!window.openDatabase) {
                    alert('Not supported -> Please use a webkit browser');
              } else {
                  var shortName = 'Rvpk';
                  var version = '1.0';
                  var displayName = 'The Rvpk databse';
                  var maxSize = 3072*1024; //  = 3MB in bytes 65536
                  db = openDatabase(shortName, version, displayName, maxSize);      
                  }  
            }
            catch(e)
            {
              if (e == 2) {
                  alert("Invalid database version.");
              } else {
                  alert("Unknown error "+e+".");
              }return;
            }

            //If needed creates the messagetable
            db.transaction(function (tx) {
                 tx.executeSql('CREATE TABLE IF NOT EXISTS message (id INTEGER PRIMARY KEY, name)')                    
            });
        }

        //The function addMessage takes the entered message from the message inputfield and places it inside the messagetable
        function addMessage(){

        //call db access function.
        runThis();

        var message = $('input:text[name=message]').val();

            db.transaction(function (tx) {
                     tx.executeSql("INSERT INTO message (id, name) VALUES (NULL, ?)", [message]);
            });
            console.log("Message "+ message +" added to database");

            //Shows a notification that sending the message was a success
            alert('The message has been sent');        
        }    
</script>
</head>
<body>
    <div id="wrapper">
        <div data-role="page" id="page1">
            <div data-role="header" data-position="fixed" data-theme="a">                
                <h3>Test</h3>

                <a href="#popupInfo" data-rel="popup" data-position-to="window" data-role="button" data-icon="grid" data-iconpos="notext" class="ui-btn-right" data-theme="a" data-transition="pop"></a>
                    <div data-role="popup" id="popupInfo" class="ui-content" data-theme="e">
                    <a href="#" data-rel="back" data-role="button" data-theme="bl" data-icon="delete" data-iconpos="notext" class="ui-btn-right">Close</a>
                      <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
                            <a data-role="button" href="messages.php" data-theme="b">My messages</a>
                            <a data-role="button" href="logout.php" data-theme="r">Log out</a>
                      </div>
                    </div>

                <a data-role="button" href="for_who.php" data-icon="home" data-iconpos="notext" class="ui-btn-left" data-theme="a"></a>
            </div> 

            <div data-role="content">
                <form>
                    <fieldset>
                        <label id="messagelabel" for="message">Message:</label>
                        <input id="message" type="text" name="message" value="This can't go on like this">
                        <button onClick="addMessage()" data-theme="g">Send</button>
                    </fieldset>
                </form>
            </div> 
        </div>    
    </div>
</body>
</html> 
```

# c# - 为什么 C# ArrayList 没有 Resize 方法？

> ID：13208309
> 
> 赞同：5
> 
> 时间：2012-11-03T10:33:40.237
> 
> 标签：c#, arraylist, resize

来自C++，发现C#`ArrayList`没有`Resize(count)`方法很奇怪？
为什么？我错过了什么吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-03T10:38:09.290

您可能希望执行三个单独的操作：

*   改变*容量*`ArrayList`。_ 这是可以通过[`ArrayList.Capacity`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.capacity.aspx)和[`List<T>.Capacity`](http://msdn.microsoft.com/en-us/library/y52x03h2.aspx)

*   通过修剪一些元素来更改列表的*实际计数*。这可以通过[`ArrayList.RemoveRange`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.removerange.aspx)和来实现[`List<T>.RemoveRange`](http://msdn.microsoft.com/en-us/library/y33yd2b5.aspx)。

*   通过添加一些元素来更改列表的*实际计数*。这可以通过[`ArrayList.AddRange`](http://msdn.microsoft.com/en-us/library/system.collections.arraylist.addrange.aspx)和来实现[`List<T>.AddRange`](http://msdn.microsoft.com/en-us/library/z883w3dc.aspx)。（从 .NET 3.5 开始，您可以[`Enumerable.Repeat`](http://msdn.microsoft.com/en-us/library/bb348899.aspx)很容易地得出正确长度的序列。）

（我提到`List<T>`除非你*真的*停留在 .NET 1.1 上，否则最好使用泛型集合。）

如果您想执行一些其他操作，请指定它。我个人很高兴这三个操作是分开的。在我自己的经验中，我想不出任何我想添加或删除元素但不知道我实际在做什么的情况。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T10:38:18.883

您应该为此使用 Generic List<> ( [System.Collections.Generic.List](http://msdn.microsoft.com/en-us/library/6sh2ey19.aspx) )。它以恒定的摊销时间运行。或者您可以将`ArrayList.Capacity`用于您的目的。

# ruby-on-rails - Rails 回形针，ImageMagick img 上传错误 - “未选择文件”

> ID：13208311
> 
> 赞同：0
> 
> 时间：2012-11-03T10:33:59.170
> 
> 标签：ruby-on-rails, windows-7, imagemagick, paperclip, image-upload

好的，所以这是我第二次遇到这个问题 - 请参阅上一个问题[Rails paperclip img upload error: "no file selected" with rmagick installed](https://stackoverflow.com/questions/12132916/rails-paperclip-img-upload-error-no-file-chosen-with-rmagick-installed)。

由于我没有想出正确的解决方案，我不确定是什么原因造成的。从我的研究看来，这是因为我使用的是 Windows 7。

我没有对模型或表格进行任何更改。

但是当我尝试使用嵌套表单时 - 我只是得到**“没有选择文件”**

但是从控制台创建图像后：

```
<te :image => File.open('C:/sites/thrillb/app/assets/images/ins1.jpg')
identify.exe: unable to open image `file': No such file or directory @ error/blo
b.c/OpenBlob/2641.
identify.exe: no decode delegate for this image format `file' @ error/constitute
.c/ReadImage/544.
identify.exe: unable to open image `file': No such file or directory @ error/blo
b.c/OpenBlob/2641.
identify.exe: no decode delegate for this image format `file' @ error/constitute
.c/ReadImage/544.
identify.exe: unable to open image `file': No such file or directory @ error/blo
b.c/OpenBlob/2641.
identify.exe: no decode delegate for this image format `file' @ error/constitute
.c/ReadImage/544.
=> #<Image id: nil, image_file_name: "ins1.jpg", image_content_type: "image/jpeg
", image_file_size: 293718, image_updated_at: "2012-11-03 10:17:11", trip_id: ni
l, created_at: nil, updated_at: nil, title: nil, location_id: nil>
irb(main):002:0> 
```

有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:37:29.073

imagemagick 论坛上已经回答了类似的问题。见[http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=20201](http://www.imagemagick.org/discourse-server/viewtopic.php?f=1&t=20201)

请确保您的 apache 进程从您的用户 ID 而非系统用户运行；它应该可以解决您报告的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:40:11.940

解决了。答案在这里 - [Paperclip File Not Found Error](https://stackoverflow.com/questions/13056932/paperclip-file-not-found-error)。

看起来这是一个回形针错误。

需要将此 gem 添加到 gemfile：

```
 gem "cocaine", "0.3.2" 
```

# c# - 从文件生成/构建地图

> ID：13208312
> 
> 赞同：1
> 
> 时间：2012-11-03T10:34:09.707
> 
> 标签：c#, algorithm, xna

使用我想创建地图的文件，我想知道这样做的最佳方法。实际上我搜索了论坛，但我只找到了随机创建地图的地图生成算法。

让我们看一个最小的例子。例如我有一个文件包含

```
0110
1001
1000
0000 
```

万物皆为`0`水，`1`万物皆为土。我会通过简单地拥有两个不同的位图并将它们加载到正确的坐标来处理这个问题。那很简单。

但是让我们假设我们有一个 1000*1000 的大地图，并且每帧只有 16*16 个图块的空间。然后我会得到当前位置并围绕它构建地图。

假设我们只能显示 3*3 的图块，使用最小的示例并且位于 x 和 y 是元素 1..4 的位置 (2,2)，那么用户此时可以看到的是：

```
011
100
100 
```

## 解决方案

我考虑过使用文本文件，其中一行代表 x 坐标方向，一列代表 y 坐标方向。整个文件在程序开始时被加载。假设 1 个 tile 需要 1 个字节，这不应该使用太多 ram，这应该足够了。

为了在用户移动时重绘地图，我会获取移动方向并将当前位图滑动到相反方向的图块的高度/宽度，并且只查找新空白区域的位图。所以我只需要查找 m+n-1 的图块信息（其中 m 是在 y 和 x 方向上显示的图块的数量）图块（移动对角线时的最大情况）而不是每次加载 m*n 块用户移动。

## 例子

我创建了一个示例，以使上面给出的示例更容易理解。这是整个地图：

![整个地图](../Images/d9f0eaa61a18387a835488e8ac0aa05b.png)

我们只能显示 3*3 的图块，而用户位于 (2,2) 位置，所以我们实际看到的是：

![起始位置](../Images/b4082c3ac60d178397813eeafb12b302.png)

现在他正在向右下角移动：

![移动](../Images/928af274f0ced996bb5a732583145907.png)

并且黑色框部分正在向相反方向移动，因此我们得到：

![重绘后](../Images/1718e575b5bc2b0b2440155901a9f32d.png)

现在必须查找空白图块（黑框白色区域），最终结果将是：

![最终图像](../Images/c2a7a596f6ae0bd6bc1425d4f4fdadb6.png)

## 问题

这是构建地图的好方法吗？或者是否有更快的功能，可能已经在 microsoft xna-gamestudio 包中实现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:52:38.040

我会在屏幕视图之外预取 1-2 个图块范围，这样玩家移动时就不会出现奇怪的弹出窗口。

但如果你的游戏是自上而下的拼图游戏，这种解决方案就相当保守了。在当今的大多数硬件中，您可以毫无问题地围绕播放器创建一个非常大的范围。只需看看 Minecraft 可以处理和显示的块数。由于您正在重用相同的纹理，因此您只需加载一次资产并在图块中重用它们，这可能是一个内存占用非常少的对象。

您是否尝试过实施它？

# jakarta-ee - 测试 EJB 3.1 的方法

> ID：13208318
> 
> 赞同：1
> 
> 时间：2012-11-03T10:34:37.940
> 
> 标签：jakarta-ee, jboss7.x, ejb-3.1, openejb, embedded-container

我目前正在处理 3.1 版中测试 EJB 的主题，但我确实只有一些经验。所以我看了一下文献，发现了三种不同的测试 EJB 的方式/方法（3.0 版和更新版本）

1）使用简单的 POJT（Plain Old Java Tests）

2) 使用嵌入式容器

3) 在应用服务器中测试应用

在我弄清楚这些不同的方法后，我自己开始了一些研究并发现了一些可能性。

对于案例 1) 像 JUnit 或 TestNG 这样的工具几乎是完美的，为了解决注释问题，可以使用库 EasyGloss。对于非常简单的 bean，不需要 EasyGloss。“本地”测试工作正常，直到 bean 需要访问上下文（例如 sessionContext），使用事务或拦截器。

我使用 JBoss AS 7.1.1，据我所知，此应用程序服务器不提供嵌入式容器。所以我可以切换到 Glassfish（我不喜欢）或使用 OpenEJB 或 Arquillian 等替代方案来处理案例 2 的测试）。

我知道你们在测试 Jave EE 和 EJB 方面有更多的经验和知识。所以我想问你是否愿意和我分享你的经验，也许会给一些技巧和窍门，更多的想法或ejbs有效测试的示例代码。

编辑：为案例 1）添加了更多信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:31:08.870

An embedded container is a part of EJB 3.1, so even JBoss AS 7 has to implement it.

Arquillian is a very good option as well, and since AS 7 starts so fast the extra overhead of an external AS is not that much.

You can also combine Arquilluan with the embedded container that AS 7 should offer.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T13:49:54.930

正如 Vineet 指出的那样，有一个 JBoss **Embedded Container**。但是，只要您不使用特定于 AS 的类，在使用嵌入式 Glassfish 容器时应该不会出现问题（[这里](http://roland-tiefenbrunner.blogspot.co.at/2012/01/ejb-31-integration-test-embedded.html)是一个简单的示例）。如果您确实密集使用提供的 EJB 基础架构，嵌入式容器将特别有趣；正如您提到的拦截器、事务等。否则，与普通单元测试相比，优势并没有那么大。

在**应用程序服务器**中测试您的应用程序并且您的组件是远程 Bean 时，您可以通过单元测试中的 JNDI 查找直接测试它们；您还可以将远程 Beans 集成为测试挂钩。但是，如果您想测试 CDI 或本地 bean，Arquillian 尤其有趣，因为您无法远程访问它们。

我认为将嵌入式容器或 Arquillian 等工具/技术与普通单元测试进行比较是很重要的。有很大的优势吗？如果没有该工具，有没有我无法涵盖的测试？仅仅因为某些东西是新的和很酷的并不意味着你一定会从中受益:)

# c# - XNA 中的键盘按钮“事件”效率

> ID：13208320
> 
> 赞同：1
> 
> 时间：2012-11-03T10:35:02.810
> 
> 标签：c#, performance, events, xna, keyboard

我一直在努力为自己弄清楚，但是所有在线教程和我能找到的所有东西都不能真正解释我的问题，所以我希望这里有人可以帮助我。

到目前为止，我只使用 C#，主要使用 WPF，如果我想在键盘上按下一个键时引发一个事件，我只需使用该`KeyDown`事件。在那里我可以很容易地识别按下的键`e.Key`。

现在在 XNA 中，我所看到的一切都是`KeyboardState state = Keyboard.GetState();`用来获取键盘状态并不断检查`Update()`- 方法，如果例如`state.IsKeyDown(Keys.Left);`返回 true 或 false。

我的问题是：这不是真的低效吗？例如，如果我的游戏使用 15 个键进行输入，我将获取键盘状态并检查这 15 个键中的每一个，并且每秒检查 30 次。有什么原因，为什么在 XNA 中使用这种方法似乎如此普遍？我能想到的唯一解释是，确保所有内容都保留在- 方法中`Update`，以便明确执行，以免延迟事件导致游戏出现问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:42:48.997

表单应用程序和视频游戏是两个完全不同的野兽。在一个好的视频游戏中，代码会使用所有可用的线程。出于这个原因，让一个事件启动一个新线程而没有可用的线程显然是一件坏事，因为它可能会挂起另一个关键线程。游戏中没有松散的线程。

表单对您的输入是有反应的。当你不做某事时，它几乎什么都不做。没有人关心按下表单中的按钮是否需要 0.2-0.5 秒的反应时间。

游戏是主动的，并不断检查它们。无论如何，它都会为 AI、物理、声音、FX、动画等每一帧更新自己，屏幕上发生的事情总是与用户所做的事情相关联。当代码更新玩家的动作时，输入应该总是被解析。所以无论如何你都必须测试它们！最重要的是，您希望对您的输入有最好的反应时间，而做到这一点的唯一方法就是不断检查它们。用户输入的 0.2 秒延迟会使游戏无法玩。有些编码员的作用仅仅是将输入延迟降至最低。

# opencl - OpenCL 的奇怪行为 - CPU 输出与单线程 GPU 输出不匹配

> ID：13208323
> 
> 赞同：1
> 
> 时间：2012-11-03T10:35:19.563
> 
> 标签：opencl

我正在尝试在 OpenCL 内核中运行以下 LUDecomposition 代码。下面的“A”是一个单精度浮点数组。

```
for( k = 0; k < N; k++ ) 
{
  for(j=k+1; j < N; j++)    {
      A[k * N + j] = A[k * N + j] / A[k * N + k]; 
  }

  for(i=k+1; i < N; i++)    {
    for (j=k+1; j < N; j++)   { 
      A[i * N + j] = A[i * N + j] - (A[i * N + k] * A[k * N + j]); 
    }
  }
} 
```

我在 GPU 上仅在单个 GPU 线程（完全顺序）上运行此代码。所以我有内核的全局线程和本地线程映射如下。

```
globalthread[0] = 1;
globalthread[1] = 1;

localthread[0] = 1;
localthread[1] = 1; 
```

但是，当我将 GPU 输出与在 CPU 上运行的相同功能的输出（直接而不是作为 opencl 设备）进行比较时，我发现输出不匹配。（不匹配超出了浮点精度的限制）。尽管尽了最大的努力，我还是发现这是无法解释的。在试图缩小问题范围时，我发现问题出在第二个陈述中。特别是由于减法运算以及当 A[i][j] 的值变为负数时。我确保 CPU 和 GPU 都在相同的输入上工作。但是对于如此简单的计算，如此奇怪的行为似乎很奇怪。谁能帮助解释为什么输出可能会有所不同？我还在 NVIDIA 和 AMD 设备上运行它，我看到了相同的行为。（排除任何平台特定问题）

这是不匹配的示例输出：

```
platform name is NVIDIA CUDA
platform version is OpenCL 1.1 CUDA 4.2.1
number of devices is 2
device name is Tesla C2050 / C2070
GPU Runtime: 0.023669s
CPU Runtime: 0.000123s
Values differ at index (45, 40): arr1=0.946256, arr2=0.963078
Values differ at index (60, 52): arr1=-9.348129, arr2=-9.483719
Values differ at index (61, 52): arr1=11.343384, arr2=11.093756
Non-Matching CPU-GPU Outputs Beyond Error Threshold of 1.05 Percent: 3 
```

# events - 来自 cshtml 页面的主干功能事件

> ID：13208324
> 
> 赞同：1
> 
> 时间：2012-11-03T10:35:30.703
> 
> 标签：events, backbone.js

在 cshtmlpage 我有这个元素：

```
<g transform="translate(@x @y)" width="@(r * 2)" height="@(r * 2)" onclick="Topology.GroupDiagramPage.click()">
<circle r="@r" class="diagram-node" />

    @if(node.NodeStatus != NodeStatus.None)
    {
        bool isPaly = node.NodeStatus == NodeStatus.Running;
        string playVisibslityClass = isPaly ? "" : "not-visibility";
        string stopVisibslityClass = !isPaly ? "" : "not-visibility"; 

<rect id="@("topology-diagram-" + node.Id + "-status-stop")" width="16" height="16" fill="#CA3D3C" x="-8" y="-8" class="@stopVisibslityClass"/>
<polygon id="@("topology-diagram-" + node.Id + "-status-play")"  points="-5, -10 10, 0 -5, 10" fill="#009A22" class="@playVisibslityClass"/>
    }
</g> 
```

而骨干脚本中的这个元素

```
var Topology = this.MyProject.Views.Topology;

Topology.GroupDiagramPage = Backbone.View.extend({

    tagName: "div",

    className: "topology-group-diagram-page",

    initialize: function () {
        var _groupid = 0;
        var _links = 0;
        var _sendports = 0;
        var _orchestrations = 0;
        var _receiveports = 0;
        $.ajax({
            async: false,
            dataType: "json",
            url: "/api/Diagram/" + this.model.get("id"),
            success: function (data) {
                _groupid = data.GroupId;
                _sendports = data.SendPorts;
                _orchestrations = data.Orchestrations;
                _receiveports = data.ReceivePorts;
                _links = data.Links;
            }
        });
        this.groupid = _groupid;
        this.nodelinks = _links;
        this.sendports = _sendports;
        this.orchestrations = _orchestrations;
        this.receiveports = _receiveports;
    },

    render: function () {
        this.diagram();
        return this;
    },

    text: function (svg, text, x, y) {
        svg.text(x, y, text, { class: "diagram-text" });
    },

    node: function (svg, node, x, y, r) {
        var g = svg.group({ transform: "translate(" + x + ', ' + y + ')', width: r * 2, height: r * 2 });
        svg.circle(g, 0, 0, r, { class: "diagram-node" });
        if (node.NodeStatus != 0) {
            var isPaly = node.NodeStatus == 83;
            var playVisibslityClass = isPaly ? "" : "not-visibility";
            var stopVisibslityClass = !isPaly ? "" : "not-visibility";
            svg.rect(g, -8, -8, 16, 16, { id: "topology-diagram-" + node.Id + "-status-stop", fill: "#CA3D3C", class: stopVisibslityClass });
            svg.polygon(g, [[-5, -10], [10, 0], [-5, 10]], { id: "topology-diagram-" + node.Id + "-status-play", fill: "#009A22", class: playVisibslityClass });
        }
        this.text(svg, node.Name, x - 40, y + 50);
    },

    nodes: function (svg, nodes, x, ndy, height) {
        var j = ndy + height / 2;
        for (var i = 0; i < nodes.length; i++) {
            this.node(svg, nodes[i], x, j, height / 2);
            j += ndy + height;
        }
    },

    link: function (svg, x1, y1, x2, y2) {
        svg.line(x1, y1, x2, y2, { class: "diagram-link" });
    },

    links: function (svg, fromNodes, toNodes, links, usedLinks, fdy, tdy, height, x1, x2) {
        var i = fdy + height / 2;
        var j = tdy + height / 2;
        var Contains = function (links, link) {
            links.forEach(function (elem) {
                if (elem == link)
                    return true;
            });
            return false;
        };
        for (var i = 0; i < fromNodes.length; i++) {
            j = tdy + height / 2;
            for (var j = 0; j < toNodes.length; j++) {
                var link = { FromNodeId: fromNodes[i].Id, ToNodeId: toNodes[j].Id };
                if (Contains(links, link) && !Contains(usedLinks, link)) {
                    this.link(svg, x1, i, x2, j);
                    usedLinks.push(link);
                }
                j += tdy + height;
            }
            i += fdy + height;
        }
    },

    diagram: function () {
        var allWidth = 840;
        var cWidth = allWidth / 3;
        var dy = 50;
        var nd = 50;
        var rx = cWidth / 2;
        var ox = cWidth + rx;
        var sx = rx + 2 * cWidth;

        var rCount = this.receiveports.length;
        var oCount = this.orchestrations.length;
        var sCount = this.sendports.length;

        var maxCount = Math.max(Math.max(rCount, sCount), oCount);
        var allHeight = (nd + dy) * maxCount + dy;

        var rdy = (allHeight - nd * rCount) / (rCount + 1);
        var ody = (allHeight - nd * oCount) / (oCount + 1);
        var sdy = (allHeight - nd * sCount) / (sCount + 1);

        var usedLinks = new Array();
        var links = this.nodelinks;

        this.$el.svg({ id: this.groupid, class: "topology-diagram", style: "width: " + allWidth + "; height: " + allHeight });
        var svg = this.$el.svg('get');
        this.text(svg, "Receive ports", 90, 15);
        this.text(svg, "Orchestrations", 370, 15);
        this.text(svg, "Send ports", 650, 15);
        svg.line(280, 0, 280, allHeight, { class: "diagram-line" });
        svg.line(560, 0, 560, allHeight, { class: "diagram-line" });
        this.links(svg, this.orchestrations, this.sendports, links, usedLinks, ody, sdy, nd, ox, sx);
        this.links(svg, this.receiveports, this.orchestrations, links, usedLinks, rdy, ody, nd, rx, ox);
        this.links(svg, this.receiveports, this.sendports, links, usedLinks, rdy, sdy, nd, rx, sx);
        this.links(svg, this.orchestrations, this.orchestrations, links, usedLinks, ody, ody, nd, ox, ox);
        this.nodes(svg, this.receiveports, rx, rdy, nd);
        this.nodes(svg, this.orchestrations, ox, ody, nd);
        this.nodes(svg, this.sendports, sx, sdy, nd);
    },

    click: function () {
        colsole.log("Clic!");
    }
}); 
```

我需要在脚本中点击调用者“click()”。
如果我攻击 "" elemenet 这个事件：onclick="Topology.GroupDiagramPage.click()" 我得到这个： Uncaught ReferenceError: Topology is not defined

我该怎么办&

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:06:29.570

我从您的代码和问题中了解到，如果您希望在某些操作上执行视图的任何方法，您需要使用主干视图的事件哈希。

考虑到线路，

```
this.$el.svg({ id: this.groupid, class: "topology-diagram", style: "width: " + allWidth + "; height: " + allHeight }); 
```

的`diagram()`方法添加一个`div`到其`id`属性是的DOM，`div_id`如果你想执行点击它，你可以写这样的东西在`view`

```
// this event binding will execute click method whenever you click on a div 
// whose id is 'div_id'
events : {
  "click #div_id" : "click" 
} 
```

这不是您问题的解决方案，而是实现您想要实现的目标的方法，希望对您有所帮助。

# vb.net - 访问回收站

> ID：13208338
> 
> 赞同：2
> 
> 时间：2012-11-03T10:36:44.003
> 
> 标签：vb.net

我想检查回收站中的文件，就好像它是一个普通目录一样，特别是获取那里的文件列表以及每个文件到达回收站的日期。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T10:39:37.827

这段代码可以帮助你

```
'Access the recycle bin folder  
    Dim SH As New Shell32.Shell  
    Dim RecycleBin As Shell32.Folder = SH.NameSpace(Shell32.ShellSpecialFolderConstants.ssfBITBUCKET)  

    Dim SB As New StringBuilder  
    'Loop through the Recycle Bin and get each Items Name  
    For Each Item As Shell32.FolderItem In RecycleBin.Items  
        SB.AppendLine(Item.Name)  
    Next Item  

    'Display the list of filenames in a label  
    Label1.Text = SB.ToString 
```

# php - PHP - 缩短整数

> ID：13208348
> 
> 赞同：-5
> 
> 时间：2012-11-03T10:37:49.827
> 
> 标签：php, numbers

我查看了 php round 函数，但我认为它不能满足我的需要，我不想四舍五入到小数位我希望执行以下操作：

```
$variable1 = 200000000 into 200
$variable2 = 20000000 into 20
$variable3 = 2000000 into 2
$variable4 = 200000 into 0.2 
```

有人可以帮助我吗？

我应该补充一点，我不知道变量是什么，所以它可能是 20000000 一次，下一次是 380000000

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:40:28.783

将数字[除以](http://php.net/manual/en/internals2.opcodes.div.php)`1000000`。

```
$num /= 1000000; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:41:58.273

```
$millionDivide = 1000000;

echo $variable1 = 200000000/$millionDivide;
echo $variable2 = 20000000/$millionDivide;
echo $variable3 = 2000000/$millionDivide;
echo $variable4 = 200000/$millionDivide; 
```

# c# - 如何插入 BLOB 数据类型

> ID：13208349
> 
> 赞同：5
> 
> 时间：2012-11-03T10:37:50.633
> 
> 标签：c#, mysql, blob

我正在使用以下代码插入 blob 字段：

* * *

```
MySql.Data.MySqlClient.MySqlConnection conn;
MySql.Data.MySqlClient.MySqlCommand cmd;

conn = new MySql.Data.MySqlClient.MySqlConnection();
cmd = new MySql.Data.MySqlClient.MySqlCommand();

string SQL;
int FileSize;
byte[] rawData;
FileStream fs;

conn.ConnectionString = "server=192.168.1.104;uid=root;" +
        "pwd=root;database=cady234;";

fs = new FileStream(@"d:\Untitled.gif", FileMode.Open, FileAccess.Read);
FileSize = (int)fs.Length;

rawData = new byte[FileSize];
fs.Read(rawData, 0, FileSize);
fs.Close();

conn.Open();

string strFileName = "test name";
SQL = "INSERT INTO file (file_name, file_size, file) VALUES ('" + strFileName + "', "+FileSize+", '"+rawData+"')";

cmd.Connection = conn;
cmd.CommandText = SQL;

cmd.ExecuteNonQuery();
conn.Close(); 
```

* * *

插入没问题，但使用“在查看器中打开值”时图像未显示：

![在此处输入图像描述](../Images/1a81eba22cd61886e5981691d7f2f368.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-03T11:11:28.940

当您使用字符串连接时，二进制数据没有正确传递给您的插入 - 您会得到`rawData.ToString()`它可能只是打印出 TypeName （因此您的二进制数据长度为 13 个字节，而文件大小大于 3000 个字节）；试试这个：

```
byte[] rawData = File.ReadAllBytes(@"d:\Untitled.gif");
FileInfo info = new FileInfo(@"d:\Untitled.gif");

int fileSize = Convert.ToInt32(info.Length);

using(MySqlConnection connection = new MySqlConnection("server=192.168.1.104;uid=root;pwd=root;database=cady234;"))
{
    using(MySqlCommand command = new MySqlCommand())
    {
        command.Connection = connection;
        command.CommandText = "INSERT INTO file (file_name, file_size, file) VALUES (?fileName, ?fileSize, ?rawData);";
        MySqlParameter fileNameParameter = new MySqlParameter("?fileName", MySqlDbType.VarChar, 256);
        MySqlParameter fileSizeParameter = new MySqlParameter("?fileSize", MySqlDbType.Int32, 11);
        MySqlParameter fileContentParameter = new MySqlParameter("?rawData", MySqlDbType.Blob, rawData.Length);

        fileNameParameter.Value = "test name";
        fileSizeParameter.Value = fileSize;
        fileContentParameter.Value = rawData;

        command.Parameters.Add(fileNameParameter);
        command.Parameters.Add(fileSizeParameter);
        command.Parameters.Add(fileContentParameter);

        connection.Open();

        command.ExecuteNonQuery();

    }
} 
```

我在这里为你介绍了几个概念；首先，如果您要一次加载所有二进制数据，只需使用静态方法[File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx) - 它的代码要少得多。

其次，不需要每次都使用完全限定的命名空间——使用[`using`指令](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.80%29.aspx)

第三，（有点令人困惑）C# 中还有一条[using 语句](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)。这可确保实现[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)的任何对象在其自身之后被正确清理。在连接的情况下，如果您的命令成功或失败，它将显式调用 Close 和 Dispose。

最后，我已经参数化了您的查询。参数有用的原因有很多；它们有助于防止[SQL 注入](http://www.unixwiz.net/techtips/sql-injection.html)，并且在这种情况下，它们还应该确保您的数据类型得到正确处理。您可以阅读有关[SqlParameter](http://www.dotnetperls.com/sqlparameter)的更多信息（例如，MySqlParameter 是特定于数据库的实现，但使用相同的原理）。

经测试可与 MySQL 5.5.15、在 .Net 4 下运行的 MySQL Connector 5.2.7 一起使用

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2016-04-27T13:48:07.353

这个怎么样：

这对我来说可以。
Exepte 我发现这对我来说是错误的。

```
<?php
// csv invoeren naar pos.

$CSV = "uitvoer.csv";
 // The CSV file has only 2 colums; The "Reference" and the image name (in my case the barcode with "thumb_" in front of it.

$username = "Username";
$password = "Passwwoorrdd";
$database = "POS";
$counter = 0;

// Create connection
$conn = new mysqli("localhost", $username, $password, $database);

// Check connection
if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
} 
echo "Connected successfully <br>";

//$mysqli->select_db();
ini_set('max_execution_time', 1000); //300 seconds = 5 minutes

if (($handle = fopen($CSV, "r")) !== FALSE) {
    while (($data = fgetcsv($handle, 1050, ",")) !== FALSE) {
        // this loops through each line of your csv, putting the values into array elements

    $counter++;

$IDEE = $data[0]; 
        // It seems that after opening the image the $data is mixed up.

$imag = "photos/".$data[1];  // where "photos/' the folder is where this php file gets executed (mostly in /var/www/ of /var/www/html/)

$fh = fopen($imag, "r");
$data = addslashes(fread($fh, filesize($imag)));
fclose($fh);

echo " Ref: ".$IDEE." ----".$counter."----<br>";
   // If there will be a time-out. You could erase the part what is already done minus 1.
$sql =  "UPDATE PRODUCTS SET IMAGE='".$data."' WHERE CODE=$IDEE"; 
```

// 带有 IMAGE 的表 PRODUCTS。该表中有更多数据。但我只需要更新图像。其余的已经插入。

```
if ($conn->query($sql) === TRUE) {
    echo "Tabel <b>products</b> updated successfully<br>";
} else {
    echo "<br>Error updating tabel <b>Products</b>: " . $conn->error;
Exit();
}
    }
    fclose($handle);
}
?> 
```

# jquery - jQuery多个if else语句卡在第二个条件

> ID：13208352
> 
> 赞同：1
> 
> 时间：2012-11-03T10:37:58.563
> 
> 标签：jquery, jquery-selectors

有人请告诉我为什么下面的脚本只适用于第一个“else if”语句？

即使宽度低于 800 像素，我仍然可以获得 900 像素的设置。

这是实时代码[http://jsbin.com/iranof/2/](http://jsbin.com/iranof/2/)

```
<script type='text/javascript'>
$(document).ready(function(){ 

var window_width = $(window).width();  

if (window_width >= 900){
$('#adSize').attr('id','largeRectangle');    
}
else 
  if (window_width <= 800)  
  {
$('#adSize').attr('id','mediumRectangle');
}  
else 
  if (window_width <= 700)  
  {
$('#adSize').attr('id','square');
}  
else
  if (window_width <= 600)  
  {
$('#adSize').attr('id','smallSquare');
}  
else if (window_width <= 480)
{
$('#adSize').attr('id','mediumRectangle');
} 
});
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T10:41:28.307

700 <= 800。如果 window_width 小于 800，则第一个`else if`检查将返回`true`- 因此将调用其主体；所有其他`else if`将被忽略。

重建您的代码，以便`<=`检查处理越来越多的数字：

```
else if (window_width <= 480) { ... }
else if (window_width <= 600) { ... }
else if (window_width <= 700) { ... }
else if (window_width <= 800) { ... } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:42:51.357

它需要是：

```
if (window_width >= 900){   
}
else 
  if (window_width <= 800 && window_width > 700)  
  {
}  
else 
  if (window_width <= 700 && window_width > 600)  
  {
} 
```

以此类推……否则，`else if`一旦您进入800分店，您的其他分店将被放弃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T10:50:17.400

```
if (window_width >= 900)
{   
$('#adSize').attr('id','largeRectangle');
}
else 
if (window_width <= 800 && window_width > 700)  
{
$('#adSize').attr('id','mediumRectangle');
} 
```

...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T11:03:32.623

试试这个...

```
<script type='text/javascript'>
$(document).ready(function(){ 

var window_width = $(window).width();  

if (window_width >= 900){
$('#adSize').attr('id','largeRectangle');    
}
else 
  if (window_width >= 800)  
  {
$('#adSize').attr('id','mediumRectangle');
}  
else 
  if (window_width >= 700)  
  {
$('#adSize').attr('id','square');
}  
else
  if (window_width >= 600)  
  {
$('#adSize').attr('id','smallSquare');
}  
else if (window_width <= 600)
{
  $('#adSize').attr('id','mediumRectangle');
} 
});
</script> 
```

# java - httpget 从具有相同应用程序和 PHP 文件的本地和 Internet 网络服务器获得不同的响应

> ID：13208362
> 
> 赞同：1
> 
> 时间：2012-11-03T10:39:07.527
> 
> 标签：java, android, webserver

我正在尝试让 Android 设备使用 GET 方法发送一些 HTTP 请求。

这是我的代码：

```
package com.kde.httprequest;

import java.io.IOException;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.ResponseHandler;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.BasicResponseHandler;
import org.apache.http.impl.client.DefaultHttpClient;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;

public class main2 extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        final EditText edit1 = (EditText) findViewById (R.id.editText1);
        Button btn1 = (Button) findViewById (R.id.button1);

        btn1.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                grabURL(edit1.getText().toString());
            }
        });
    }

    public void grabURL(String url) {
        new GrabURL().execute(url);
    }

    private class GrabURL extends AsyncTask<String, Void, Void> {
        private final HttpClient Client = new DefaultHttpClient();
        private String Content;
        private String Error = null;
        private ProgressDialog Dialog = new ProgressDialog(main2.this);
        final TextView text1 = (TextView) findViewById (R.id.textView1);

        protected void onPreExecute() {
            Dialog.setMessage("Downloading source..");
            Dialog.show();
        }

        protected Void doInBackground(String... urls) {
            try {
                HttpGet httpget = new HttpGet(urls[0]);
                ResponseHandler<String> responseHandler = new BasicResponseHandler();
                Content = Client.execute(httpget, responseHandler);
            } catch (ClientProtocolException e) {
                Error = e.getMessage();
                cancel(true);
            } catch (IOException e) {
                Error = e.getMessage();
                cancel(true);
            }
            return null;
        }

        protected void onPostExecute(Void unused) {
            Dialog.dismiss();
            if (Error != null) {
                Toast.makeText(main2.this, Error, Toast.LENGTH_LONG).show();
                text1.setText(Error);
            } else {
                Toast.makeText(main2.this, "Source: " + Content, Toast.LENGTH_LONG).show();
                text1.setText(Content);
            }
        }
    }
} 
```

我的简单 PHP 测试：

```
<?php

$a = $_GET['user'];
$b = $_GET['pass'];
if ($a=="usr" && $b=="pass") {
    echo "success";
} else {
    echo "fail";
}

?> 
```

发送到此 URL 时，我的代码运行顺利：

```
digitalzone-btm.com/test2.php?user=user&pass=pass 
```

我的 PHP 的响应是一个字符串，说“成功”或“失败”，这就是我所期望的。

但是我的本地网络服务器使用相同的 Android 应用程序和 PHP 文件得到了不同的响应。

前网址：

```
http://192.168.1.8/test2.php?user=user&pass=pass 
```

响应正是我的 PHP 源代码。

如何从本地网络服务器获得“成功”或“失败”响应？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:41:03.973

您的本地 Web 服务器似乎没有正确安装或配置 php。检查这里寻求帮助。
[PHP：安装和配置 - 手册](http://php.net/manual/en/install.php)

# javascript - 正则表达式强制小数点后两位数

> ID：13208364
> 
> 赞同：3
> 
> 时间：2012-11-03T10:39:25.623
> 
> 标签：javascript, regex

我需要使用 JavaScript 验证数字字符串，以确保该数字恰好有两位小数。

只有在以下情况下验证才会通过

1.  该数字恰好有两位小数
2.  小数点前至少有一位数。（可能为零）
3.  小数点前的数字不能以一个以上的零开头。

有效号码：

```
0.01
0.12
111.23
1234.56
012345.67
123.00
0.00 
```

无效号码：

```
.12
1.1
0.0
00.00
1234.
1234.567
1234
00123.45
abcd.12
12a4.56
1234.5A 
```

我试过正则表达式`[0-9][\.][0-9][0-9]$`，但它允许小数点前的字母像`12a4.56`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T10:41:57.400

`.`匹配任何字符，它不会做你认为它做的事情。你必须逃避它。此外，您还有两个错误；尝试

```
^[0-9]+\.[0-9][0-9]$ 
```

相反，甚至更好，`\d`用于十进制数字：

```
^\d+\.\d\d$ 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T11:57:13.087

[这涵盖了所有要求](http://regexpal.com/?flags=gm&regex=%5E%280%7C%280?%5B1-9%5D%5Cd%2a%29%29%5C.%5Cd%5Cd%24&input=0.01%0A0.12%0A111.23%0A1234.56%0A012345.67%0A123.00%0A0.00%0A%0A.12%0A1.1%0A0.0%0A00.00%0A1234.%0A1234.567%0A1234%0A00123.45%0Aabcd.12%0A12a4.56%0A1234.5A)：

```
^(0|0?[1-9]\d*)\.\d\d$ 
```

*   该数字恰好有两位小数
    *   由于非可选，因此很满意`\.\d\d$`

其他两个条件可以重述如下：

*   小数点前的数字要么为零
*   或一个正好有一个零的数字，然后是一个*不*以零开头的数字

这在这两种情况下都有涉及：

*   `0`
*   `0?[1-9]\d*`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-03T10:41:49.330

您不需要正则表达式。

JavaScript 有一个功能[`toFixed()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)可以满足您的需求。

```
var fixedtotwodecimals = floatvalue.toFixed(2); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T10:43:35.473

```
var values='0.12';

document.write(values.match(/\d+[.]+\d+\d/)); 
```

根据需要更改值并检查它

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-09-22T14:52:47.193

我用这个

> ^[1-9][1-9]*[.]?[1-9]{0,2}$

*   0 不接受

*   123.12 接受但 123.123 不接受

*   1 接受

*   12213123 接受

*   sdfsf 不接受

*   15.12 接受

*   15@12 不接受

*   15&12 不接受

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-03T10:54:38.793

这里是：

```
^(0[.]+\d{2})|^[1-9]\d+[.]+\d{2}$ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-10-13T05:37:48.563

试试这个代码

```
pattern="[0-9]*(\.?[0-9]{1,2}$)?" 
```

*   1 有效

*   1.1 有效

*   1.12 有效

*   1.123 无效

*   只有数字有效

    模式="[0-9]*(.?[0-9]{2}$)?"

*   1 有效

*   1.1 无效

*   1.12 有效

*   1.123 无效

*   只有数字有效

# php - Foreach $_POST 结果来自表单，返回单词“Array”

> ID：13208376
> 
> 赞同：1
> 
> 时间：2012-11-03T10:40:49.450
> 
> 标签：php, mysql, forms, input, foreach

语言：**PHP** / **MySQL**

我在页面上有一个表单，带有隐藏的输入。我将这些输入中的数据转发到另一个页面，然后将它们插入到我的数据库中。

表单内的输入是：

*   复制的文件名[]
*   复制的_url []
*   复制的_userid[]

这些设置为数组，因为有时用户会附加多个*文件。*

```
<input type="hidden" id="copied_filename" name="copied_filename[]" value="<?php echo $img->filename; ?>" />
<input type="hidden" id="copied_url" name="copied_url[]" value="<?php echo $img->url; ?>" />
<input type="hidden" id="copied_userid" name="copied_userid[]" value="<?php echo $current_user->id; ?>" /> 
```

现在在接收数据的第二页上，这就是我处理它的方式：

```
 if (empty($_POST["copied_filename"])) {
    WHAT IT DOES WHEN THERE ARE NO ATTACHED FILES
    }

    else {
    $copied_filename = $_POST["copied_filename"];
    $copied_url = $_POST["copied_url"];
    $new_sessionid = $_POST['session_id'];

    foreach ($_POST["copied_filename"] as $copied_file) {
        $sql = "INSERT INTO ".$wpdb->prefix."estimate_images (code, url, filename, session_id, user_id) VALUES ('".$code."', '".$copied_url."', '".$copied_file."','".$new_sessionid."', '".$current_user->id."')";
        $wpdb->query($sql);

    } 
```

它适用于文件名，但插入到我的数据库中的 URL 是单词“ **Array** ”......

我确定它是 foreach 格式，但我很难过并且不知道如何解决它。

非常感谢您的宝贵时间，任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:47:50.777

```
if (empty($_POST["copied_filename"])) {
    //WHAT IT DOES WHEN THERE ARE NO ATTACHED FILES
}

else {
    $new_sessionid = $_POST['session_id'];

    foreach ($_POST["copied_filename"] as $k => $copied_file) {
        $copied_url = $_POST["copied_url"][$k];        

        $sql = "INSERT INTO ".$wpdb->prefix."estimate_images (code, url, filename, session_id, user_id) VALUES ('".$code."', '".$copied_url."', '".$copied_file."','".$new_sessionid."', '".$current_user->id."')";
        $wpdb->query($sql);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:45:50.060

因为它们是数组。`echo`无法正确显示数组。使用`print_r`或`var_dump`查看正确的结构。

如果要访问第一个元素，则需要 echo `$_POST["copied_filename"][0]`。

如果要访问所有元素，请使用循环对其进行迭代`foreach`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T10:49:33.097

您的 foreach 仅在 copy_filename 上工作。对于您的情况，请尝试以下方式：

```
foreach ($_POST["copied_filename"] as $key => $val) 
{
    $sql = "INSERT INTO ".$wpdb->prefix."estimate_images (code, url, filename, 
    session_id, user_id) VALUES ('".$code."', '".$copied_url[$key]."', 
    '".$val."','".$new_sessionid."', '".$current_user->id."')";
    $wpdb->query($sql);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T10:47:55.547

$copied_url 是一个数组。要获取 URL，您必须执行诸如 $copied_url[0] 之类的操作。在你的情况下，也许这样的事情可以工作：

```
for($i=0; $i< count($_POST["copied_filename"]); $i++) {
    $sql = "INSERT INTO ".$wpdb->prefix."estimate_images (code, url, filename, session_id, user_id) VALUES ('".$code."', '".$copied_url[$i]."', '".$copied_filename[$i]."','".$new_sessionid."', '".$current_user->id."')";
    $wpdb->query($sql);

} 
```

# symfony - 资产捆绑与资产管理之间的区别？

> ID：13208377
> 
> 赞同：0
> 
> 时间：2012-11-03T10:41:05.897
> 
> 标签：symfony, assetic

[资产管理](https://github.com/kriswallsmith/assetic)`assetic-bundle`之间的区别`vendors/symfony`是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:54:52.320

AsseticBundle 将 Assetic 与 Symfony 集成。Assetic 本身是一个独立的 PHP 库，可以在任何 PHP 项目中使用——不仅仅是 Symfony。

# awk - AWK - 更改第二个日期

> ID：13208379
> 
> 赞同：2
> 
> 时间：2012-11-03T10:41:22.450
> 
> 标签：awk, gsub

我有一个文件：

```
pablo tty8 Thu Nov 1 12:51:21 2012 still logged in 
(unknown tty8 Thu Nov 1 12:50:57 2012 - Thu Nov 1 12:51:21 2012 (00:00) 
pablo tty2 Thu Nov 1 12:50:39 2012 still logged in 
pablo tty7 Thu Nov 1 12:49:45 2012 - Thu Nov 1 12:50:56 2012 (00:01) 
(unknown tty7 Thu Nov 1 12:34:32 2012 - Thu Nov 1 12:49:45 2012 (00:15) 
```

我想替换上述日期的文件一秒钟。我想打印：

```
pablo tty8 1351770681 still logged in 
(unknown tty8 1351770657 - 1351770681 (00:00) 
pablo tty2 1351770639 still logged in 
pablo tty7 1351770585 - 1351770656 (00:01) 
(unknown tty7 1351769672 - 1351770585 (00:15) 
```

我试过这个命令：

```
gawk --posix 'function my()
{"date -d \047"$0"\047 +%s" | getline b; 
gsub( /[A-Za-z]{3} [A-Za-z]{3} [0-9] ([0-9]{2}:){2}[0-9]{2} [0-9]{4}/,b ); print}
{ my() }' file 
```

上面的命令不起作用：

```
$ gawk --posix 'function my()
> {"date -d \047"$0"\047 +%s" | getline b; 
> gsub( /[A-Za-z]{3} [A-Za-z]{3} [0-9] ([0-9]{2}:){2}[0-9]{2} [0-9]{4}/,b ); print}
> { my() }' ta
date: błędna data: `pablo tty8 Thu Nov 1 12:51:21 2012 still logged in '
pablo tty8  still logged in 
(unknown tty8 1351897200 - 1351897200 (00:00) 
date: błędna data: `pablo tty2 Thu Nov 1 12:50:39 2012 still logged in '
pablo tty2 1351897200 still logged in 
date: błędna data: `pablo tty7 Thu Nov 1 12:49:45 2012 - Thu Nov 1 12:50:56 2012 (00:01) '
pablo tty7 1351897200 - 1351897200 (00:01) 
(unknown tty7 1351897200 - 1351897200 (00:15) 
```

如何改进上述命令？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T12:25:26.563

如果已`vim`安装，请尝试以下命令：

```
:%s/\v\w+\s\w+\s\d+\s\d+:\d+:\d+\s\d+/\=system('date +%s -d"'.submatch(0).'" | tr -d "\n"')/g 
```

这个想法很简单。`vim`可以非常快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T12:22:21.480

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file.txt 
```

内容`script.awk`：

```
{
    line = ($0 ~ /still logged in/) ? "still logged in" : "-" OFS getstamp(10) OFS $NF
    print $1, $2, getstamp(4), line
} 

function getstamp(i) {

    split($(i + 2), T, ":")

    Y = $(i + 3)
    M = convert($i)
    D = $(i + 1)

    hrs = T[1] + 9
    min = T[2]
    sec = T[3]

    return(mktime(sprintf("%d %d %d %d %d %d", Y, M, D, hrs, min, sec)))
}

function convert(month) {

    return(((index("JanFebMarAprMayJunJulAugSepOctNovDec", month) - 1) / 3) + 1)
} 
```

结果：

```
pablo tty8 1351770681 still logged in
(unknown tty8 1351770657 - 1351770681 (00:00)
pablo tty2 1351770639 still logged in
pablo tty7 1351770585 - 1351770656 (00:01)
(unknown tty7 1351769672 - 1351770585 (00:15) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T07:28:26.413

这是使用`date`in的解决方案`awk`（可能`gawk`仅）

```
awk --posix '
{
  while(match($0,/([[:alpha:]]{3} ){2}[^[:alpha:]]+[0-9]{4}/)){
    date_str=substr($0, RSTART, RLENGTH)
    "date -d \""date_str"\" +%s" | getline date_sec
    sub(date_str,date_sec,$0)
  }
  print
}
' $1 
```

输出：

```
pablo tty8 1351745481 still logged in 
(unknown tty8 1351745457 - 1351745457 (00:00) 
pablo tty2 1351745439 still logged in 
pablo tty7 1351745385 - 1351745456 (00:01) 
(unknown tty7 1351744472 - 1351744472 (00:15) 
```

笔记：

1.  `match`-`substr`组合用于提取包含日期的子字符串。
2.  用于`date`将日期子字符串转换为秒格式 ( `+%s`) 并将秒分配给`date_sec`
3.  用第二种格式的日期替换字符串格式的日期。
4.  迭代直到找不到匹配项（`match`如果没有找到匹配项，则返回 0 终止`while`循环）
5.  区间表达式只允许在`gawk`with `--re-interval`or`--posix`选项中使用

# google-app-engine - 检查是否在 App Engine 数据存储区中保留了数字

> ID：13208383
> 
> 赞同：0
> 
> 时间：2012-11-03T10:41:37.733
> 
> 标签：google-app-engine, google-cloud-datastore

如果可能的话，我想为应用引擎实现已删除的密钥检测，而不会在删除时存储任何额外的实体/标记，因此我可以相应地显示 404 或 410 响应。

AFAIK 新实体键数字 ID 的分配没有特定顺序（至少是一个简单的顺序），但它们当然是保留/分配的，并且永远不会隐式地重用于新实体。

那么有没有办法检查以前是否分配了一个特定的键，但是存储在这个键下的实体后来被删除了？

我不在乎密钥是否是[手动分配](https://developers.google.com/appengine/docs/python/datastore/functions#allocate_ids)的并且从未用于存储任何数据，我会将其视为已删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T19:17:06.173

No, there's no way to determine if a key has already been allocated.

You mention that you'll treat allocated but unused keys as deleted, but note that this will result in returning the wrong status code in these cases - including in the potential situation where a key is allocated and later used: you'll mistakenly report it as deleted until it's first used.

# android - 任何人都可以重复使用我的 .apk 文件吗

> ID：13208384
> 
> 赞同：2
> 
> 时间：2012-11-03T10:41:39.490
> 
> 标签：android

我担心我的 android 应用程序的安全性。我开发了一个应用程序将其上传到市场并获得了超过 1 lac 的下载量。我还在 Mobango（安卓商店）上上传了我的应用程序。在 monago 上，一个 persom 可以下载我的应用程序的 .apk 文件。

因此，如果任何人 acn 下载我的应用程序的 .apk 文件，他可以将其上传到其他 android 商店。

我已经尝试过了，我从 mobango 下载了我的应用程序的 apk，并成功上传到了其他 android 商店。

我担心任何人都可以窃取我的应用程序并用他的名字重新上传。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:43:22.337

是的，我们可以重用 .apk 文件并从中提取源代码......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:45:53.960

这是 Google Play 商店中所有应用开发者的担忧。我见过谷歌浏览器插件，如果你有足够的勇气输入你的谷歌登录详细信息和手机的设备 ID，它允许从商店下载任何 apk。

你可以做的是使用 ProGuard 之类的东西来混淆 APK 的内容，这使得反编译变得困难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T11:03:55.960

[文件](http://developer.android.com/tools/help/proguard.html)说：

> ProGuard 工具通过删除未使用的代码并用语义模糊的名称重命名类、字段和方法来缩小、优化和**混淆您的代码。**结果是 **更难以逆向工程**的更小尺寸的 .apk 文件。

但是你可以看到它说`that is more difficult to reverse engineer`，所以**理论上**这**不是不可能**的。

请注意，当您使用`ProGuard`工具时，您必须创建一个。因此`key`，如果任何主体更改您的代码并从中重新创建另一个 .apk，则此 .apk 不能作为更新或您的源 .apk 的另一个版本发布。

# content-management-system - 如何在 YII nordcms 中的块内添加块

> ID：13208389
> 
> 赞同：0
> 
> 时间：2012-11-03T10:41:53.573
> 
> 标签：content-management-system, yii, yii-extensions

我已将 Crisu83-nordcms 用于 CMS 目的，因为此 CMS 提供了向页面添加块的功能，`{{block:blockname}}` 并且它可以工作，但我想在块内添加块使用

```
{{block:blockname1}}

{{block:blockname2}}

{{block:blockname3}} ...... 
```

在 CMS 块中可用的标签不包含`{{block:name}}`...我如何添加它。这样该块可以包含其他块使用`{{block:name}}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-19T11:09:48.517

NordCms 不允许在块内使用块以避免需要检查可能的递归。为了简单起见，我们省略了该功能。如果您愿意，请随意分叉项目并自己进行必要的修改。

# javascript - 如何实现 *object* 以改进我的时钟示例 javascript 程序

> ID：13208395
> 
> 赞同：7
> 
> 时间：2012-11-03T10:42:48.440
> 
> 标签：javascript, object, javascript-objects

这项工作的目标是理解和发挥我听说过的一些*对象概念的含义。*

### 关于赏金

有很多不同的方式/方法可以做到这一点。

我的[尝试](https://stackoverflow.com/a/13219373/1765658)不是很干净：为了添加第二个时钟，另一个时区，我必须编辑 3 个不同的地方。这不好（见答案底部）。

我怎样才能做一些更有*用*的事情？

### 一开始：

*后期编辑：*最初的问题是关于在 jquery 和 mootools 之间进行选择，现在已经做出了选择；目标是通过使用*mootools*来改进这一点。

我写了一个小样本/演示来玩javascript和svg：

```
var cx  =128;
var cy  =128;
var slen=120;
var mlen=116;
var hlen= 80;
var selem;
var melem;
var helem;
function setvars() {
    selem=document.getElementById("seconds");
    melem=document.getElementById("minutes");
    helem=document.getElementById("hours");
    drawtime();
};
function drawtime() {
    var now=new Date();
    var nows=now.getTime()%60000;
    var nowm=now.getMinutes()*1.0+1.0*nows/60000;
    var nowh=now.getHours()*1.0+1.0*nowm/60;
    var sposx=cx + slen * Math.sin( nows / 30000 * Math.PI );
    var sposy=cy - slen * Math.cos( nows / 30000 * Math.PI );
    var mposx=cx + mlen * Math.sin( nowm / 30 * Math.PI );
    var mposy=cy - mlen * Math.cos( nowm / 30 * Math.PI );
    var hposx=cx + hlen * Math.sin( nowh / 6 * Math.PI );
    var hposy=cy - hlen * Math.cos( nowh / 6 * Math.PI );
    selem.setAttribute("x1",sposx);
    selem.setAttribute("y1",sposy);
    selem.setAttribute("x2",sposx);
    selem.setAttribute("y2",sposy);
    melem.setAttribute("x2",mposx);
    melem.setAttribute("y2",mposy);
    helem.setAttribute("x2",hposx);
    helem.setAttribute("y2",hposy);
    window.setTimeout(drawtime,80)
};
setvars();
```

```
#box1    { stroke: black; }
#minutes { stroke: #2266AA; }
#hours   { stroke: #3388CC; }
#seconds { stroke: #CCCC22; }
line,circle {
    opacity:0.65;
    fill:none;
    stroke-width:8;
    stroke-linecap:round;
    stroke-linejoin:round;
    marker:none;
    stroke-miterlimit:4;
    stroke-dasharray:none;
    stroke-opacity:1;
    visibility:visible;
    display:inline;
    overflow:visible;
    enable-background:accumulate
}
```

```
<svg xmlns="http://www.w3.org/2000/svg" id="svg2" width="100%"
     height="100%" viewBox="0 0 900 256" version="1.0">
    <title  id="title1">Clock</title>
    <circle id="box1"    cy="128" cx="128"  r="124" />
    <line   id="hours"   x1="128" y1="128" x2="128"  y2="48" />
    <line   id="minutes" x1="128" y1="128" x2="244" y2="128" />
    <line   id="seconds" x1="128"   y1="8" x2="128"   y2="8" />
</svg>
```

（最初发布在[jsfiddle](http://jsfiddle.net/MbktF/6/)）因为我对 javascript jquery 和/或 mootools 不是很有经验，所以我想知道是否存在一些更简单的方法，也许是以不同的方式编写它。

如何使用 jquery 或 mootools 围绕固定中心进行简单旋转：

```
var hposx=cx + hlen * Math.sin( nowh / 6 * Math.PI );
var hposy=cy - hlen * Math.cos( nowh / 6 * Math.PI );
helem.setAttribute("x2",hposx);
helem.setAttribute("y2",hposy); 
```

如何*客观化*这段代码？（如果这可能是一件好事）......

欢迎所有使用面向对象、特定库或其他示例的示例！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T12:22:36.353

您的代码简单明了。如果没有 jQuery 或 MooTools，您的任务很简单，我认为您不应该尝试使用它。

对于旋转，我认为 jQuery 或 MooTools 中没有内置工具，但是您可以在 svg 对象上使用矩阵转换，请阅读：http: [//msdn.microsoft.com/en-us/library/ie/hh535760 %28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/ie/hh535760%28v=vs.85%29.aspx)

或者检查这个问题：[SVG 旋转变换矩阵](https://stackoverflow.com/questions/9701784/svg-rotate-transform-matrix)。

至于制作一个对象：

您当然可以将代码分割成更多功能，或者创建一个表示当前小时/分钟/秒的对象

```
var clock = {
    time: {
        s: 0,
        m: 0,
        h: 0    
    },
    pos: {
        x: 128,
        y: 128
    },

   .... anything else you might want to add
}; 
```

您首先在一组函数中设置它的属性

```
clock.setTime = function (date) {
    this.time.s = date.getTime()%60000;
    this.time.m = date.getMinutes()*1.0+1.0*nows/60000;
    this.time.h = date.getHours()*1.0+1.0*nowm/60;
}; 
```

并在另一组函数中阅读它们：

```
clock.getMinPos = function () {
    var x = ...;// Sine is ok.
    var y = ...;// Cosine is ok.
    // I don't like matrices anyway.
    return [x, y];
}; 
```

真的只是尝试将您的代码划分为功能性任务。一个功能应该只做一件事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-04T14:24:12.663

## 从赏金编辑：转到底部！

### 第一个答案

在阅读了*pete*（非常感谢！你给了我很好的研究方法）和*SoonDead*（也感谢转换的第一步）的第一条评论之后，我环顾了一下*jquery*和*mootools*代码，最后我选择了*mootools*为了减少我的代码，因为*mootools*让我提交一个`array`for`object.get`和一个`hash`（关联数组） for `objet.set`：

```
(function () {
    "use strict";
    var Point = function(x,y) {
         this.x=x;
         this.y=y;
    };
    var Path = function(center,length,both) {
        this.center = center;
        this.length = length;
        this.both   = both;
        this.end    = function(alpha) {
            var retx = 1.0*this.center.x +
                this.length*Math.sin(alpha);
            var rety = 1.0*this.center.y -
                this.length*Math.cos(alpha);
            if (typeof(this.both)!=='undefined')
              return { x1:retx, x2:retx, y1:rety, y2:rety }
            else return { x2:retx, y2:rety };
        };
    };
    var Hand = function(svgline,both) {
        this.elem = document.id(svgline);
        var p     = this.elem.get(['x1','y1','x2','y2']);
        this.path = new Path (
          new Point(p.x1,p.y1),Math.sqrt(
            Math.pow(1.0*p.x2-1.0*p.x1,2) +
            Math.pow(1.0*p.y2-1.0*p.y1,2)) ,both);
        this.setPos = function(angle) {
            this.elem.set(this.path.end(angle));
        };
    };
    var Clock = function(hour,minute,second,refresh) {
        this.hour    = new Hand(hour);
        this.minute  = new Hand(minute);
        this.second  = new Hand(second,true);
        this.refresh = refresh;
        this.setTime = function(timePos) {
            var self= this;
            var tps = 1.0*timePos.getTime() % 60000;
            var tpm = timePos.getMinutes()*1.0 +
                1.0* tps/60000;
            var tph = timePos.getHours()*1.0   + 1.0* tpm/60;
            this.second.setPos(tps / 30000 * Math.PI);
            this.minute.setPos(tpm / 30    * Math.PI);
            this.hour  .setPos(tph / 6     * Math.PI);
            setTimeout(function() {
              self.setTime(new Date())},this.refresh) };
    };
    var clock=new Clock('hours','minutes','seconds',120);
    clock.setTime(new Date());
}());
```

```
#box1    { stroke: black; fill:#ccc }
#minutes { stroke: #2288AA; }
#hours   { stroke: #3388CC; }
#seconds { stroke: #CCCC22; }
line,circle {
    opacity:0.65;
    fill:none;
    stroke-width:8;
    stroke-linecap:round;
    stroke-linejoin:round;
    marker:none;
    stroke-miterlimit:4;
    stroke-dasharray:none;
    stroke-opacity:1;
    visibility:visible;
    display:inline;
    overflow:visible;
    enable-background:accumulate
}
```

```
<script
  src="http://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-nocompat.js"
  ></script>
<svg xmlns="http://www.w3.org/2000/svg" id="svg2" width="100%"
     height="100%" viewBox="0 0 900 256" version="1.0">
    <title  id="title1">Clock</title>
    <circle id="box1"    cy="128" cx="128"  r="124" />
    <line   id="hours"   x1="128" y1="128" x2="128"  y2="48" />
    <line   id="minutes" x1="128" y1="128" x2="244" y2="128" />
    <line   id="seconds" x1="128" y1="128" x2="128"   y2="8" />
</svg>
```

好吧，现在我的[新代码](http://jsfiddle.net/MbktF/18/)小了 8 行，甚至总是可读的。

这是一个步骤，但`objectization`意味着*将其作为一个对象*......

1.  保持可重复使用
2.  保持高效（不要进行无用的操作或两次相同的操作）
3.  使其可重用（作为一个对象，将所有固定变量排除在外......）

一个[中间人的结果](http://jsfiddle.net/MbktF/22/)，

但现在代码看起来像：

```
(function () {
    "use strict";
    var Point = function(x,y) {
         this.x=x;
         this.y=y;
    };
    var Path = function(center,length,both) {
        this.center = center;
        this.length = length;
        this.both   = both;
        this.end    = function(alpha) {
            var retx=1.0*this.center.x+this.length*Math.sin(alpha);
            var rety=1.0*this.center.y-this.length*Math.cos(alpha);
            if (typeof(this.both)!=='undefined')
                 return { x1:retx, x2:retx, y1:rety, y2:rety }
            else return { x2:retx, y2:rety };
        };
    };
    var Hand = function(svgline,both) {
        this.elem   = document.id(svgline);
        var p=this.elem.get(['x1','y1','x2','y2']);
        this.path   = new Path ( new Point(p.x1,p.y1),
                                Math.sqrt(Math.pow(1.0*p.x2-1.0*p.x1,2)+
                                          Math.pow(1.0*p.y2-1.0*p.y1,2)),
                                 both);
        this.setPos = function(angle) {
            this.elem.set(this.path.end(angle));
        };
    };
    var Clock = function(hour,minute,second,refresh) {
        this.hour    = new Hand(hour);
        this.minute  = new Hand(minute);
        this.second  = new Hand(second,true);
        this.setTime = function(timePos) {
            var self= this;
            var tps = 1.0*timePos.getTime() % 60000;
            var tpm = timePos.getMinutes()*1.0 + 1.0* tps/60000;
            var tph = timePos.getHours()*1.0   + 1.0* tpm/60;
            this.second.setPos(tps / 30000 * Math.PI);
            this.minute.setPos(tpm / 30    * Math.PI);
            this.hour  .setPos(tph / 6     * Math.PI);
        };
    };
    var RefreshLoop = function(refresh) {
        var newdate=new Date();
        clock1.setTime(newdate);
        newdate=newdate.getTime()+newdate.getTimezoneOffset()*60000;
        clock2.setTime(new Date(newdate));
        clock3.setTime(new Date(newdate+20700000));
        clock4.setTime(new Date(newdate+28800000));
    };
    var clock1=new Clock('hours','minutes','seconds',120);
    var clock2=new Clock('hours2','minutes2','seconds2',120);
    var clock3=new Clock('hours3','minutes3','seconds3',120);
    var clock4=new Clock('hours4','minutes4','seconds4',120);
    RefreshLoop.periodical(500);
}()); 
```

在所有部分都保持较小的情况下，my`clock`是一个真正可重复使用的对象（现在可以工作 4 次）。

该函数`setTime`必须一起计算所有手，因为每个值包含其他值的一部分，但每个操作只能执行一次。

对于我的时钟， a`Path`由一个固定的、`start point`一个固定的`length`和一个变量定义`direction`，Path.end 是指定的计算终点`direction`

并且 a`Hand`是一个给定的`SVG line`，带有他的原始`Path`，和一个可选标志，指定在设置时，起点和终点都必须定位在相同的值（零长度线，圆形终止给出一个圆形点）。

（**备注（错误？）：**由于每个元素都在 SVG 中定义，并且 Path.length 是根据 Path 两端之间的距离计算的，因此`seconds`必须首先`[x1,y1]`在时钟中心绘制路径，`! = [x2,y2]`！）

希望有些人想纠正/改进/讨论我的`objectization`...

**更新2**

我想，这是现在的[最终版本](http://jsfiddle.net/MbktF/23/)，对象很简单，使用 mootools（可能不会太多，欢迎评论），我的最终时钟可以多次使用以显示不同的 timezome。

```
(function () {
    "use strict";
    var Point = function(x,y) {
         this.x=x;
         this.y=y;
    };
    var Path = function(center,length,both) {
        this.center = center;
        this.length = length;
        this.both   = both;
        this.end    = function(alpha) {
            var retx=1.0*this.center.x+this.length*Math.sin(alpha);
            var rety=1.0*this.center.y-this.length*Math.cos(alpha);
            if (typeof(this.both)!=='undefined')
                 return { x1:retx, x2:retx, y1:rety, y2:rety }
            else return { x2:retx, y2:rety };
        };
    };
    var Hand = function(svgline,both) {
        this.elem   = document.id(svgline);
        var p=this.elem.get(['x1','y1','x2','y2']);
        this.path   = new Path ( new Point(p.x1,p.y1),
                                Math.sqrt(Math.pow(1.0*p.x2-1.0*p.x1,2)+
                                          Math.pow(1.0*p.y2-1.0*p.y1,2)),
                                 both);
        this.setPos = function(angle) {
            this.elem.set(this.path.end(angle));
        };
    };
    var Clock = function(hour,minute,second,refresh) {
        this.hour    = new Hand(hour);
        this.minute  = new Hand(minute);
        this.second  = new Hand(second,true);
        this.setTime = function(timePos) {
            var self= this;
            var tps = 1.0*timePos.getTime() % 60000;
            var tpm = timePos.getMinutes()*1.0 + 1.0* tps/60000;
            var tph = timePos.getHours()*1.0 + 1.0* tpm/60;
            this.second.setPos(tps / 30000 * Math.PI);
            this.minute.setPos(tpm / 30    * Math.PI);
            this.hour  .setPos(tph / 6     * Math.PI);
        };
    };
    var RefreshLoop = function(refresh) {
        var newdate=new Date();
        clock1.setTime(newdate);
        newdate=newdate.getTime()+newdate.getTimezoneOffset()*60000;
        clock2.setTime(new Date(newdate));
        clock3.setTime(new Date(newdate+20700000));
    };
    var clock1=new Clock('hours','minutes','seconds',120);
    var clock2=new Clock('hours2','minutes2','seconds2',120);
    var clock3=new Clock('hours3','minutes3','seconds3',120);
    RefreshLoop.periodical(500);
}());
```

```
circle   { stroke: black; }
.startbg { stop-color: #eeeeee; }
.endbg   { stop-color: #777777; }
.box     { fill:url(#grad0); }
.box1    { fill:url(#grad1); }
.box2    { fill:url(#grad2); }
.box3    { fill:url(#grad3); }
.label   { stroke: #424242;fill:#eee;stroke-width:1; }
.minutes { stroke: #2288AA; }
.hours   { stroke: #3388CC; }
.seconds { stroke: #CCCC22; }
line,circle,rect {
    opacity:0.65;
    fill:none;
    stroke-width:8;
    stroke-linecap:round;
    stroke-linejoin:round;
    marker:none;
    stroke-miterlimit:4;
    stroke-dasharray:none;
    stroke-opacity:1;
    visibility:visible;
    display:inline;
    overflow:visible;
    enable-background:accumulate
}
text {
    font-size:15px;
    font-style:normal;
    font-variant:normal;
    font-weight:normal;
    font-stretch:normal;
    text-align:center;
    line-height:100%;
    writing-mode:lr-tb;
    text-anchor:middle;
    fill:#000000;fill-opacity:.7;
    stroke:none;
    font-family:Nimbus Sans L;
}
```

```
<script
  src="http://ajax.googleapis.com/ajax/libs/mootools/1.4.5/mootools-nocompat.js"
  ></script>
<svg xmlns="http://www.w3.org/2000/svg" id="svg2" width="100%"
    height="100%" viewBox="-1 -1 900 555" version="1.0"><defs>
    <linearGradient gradientUnits="userSpaceOnUse" id="g0"><stop
        class="startbg" /><stop class="endbg" offset="1" /></linearGradient>
    <linearGradient id="grad0" x1="-1"  y1="-1" x2="256" y2="277" xlink:href="#g0" />
    <linearGradient id="grad1" x1="256" y1="-1" x2="515" y2="277" xlink:href="#g0" />
    <linearGradient id="grad2" x1="512" y1="-1" x2="771" y2="277" xlink:href="#g0" />
    </defs>
    <circle class="box"   id="box1" cy="128" cx="128" r="124" />
    <line class="hours"   id="hours" x1="128" y1="128" x2="128" y2="48" />
    <line class="minutes" id="minutes" x1="128" y1="128" x2="244" y2="128" />
    <line class="seconds" id="seconds" x1="128" y1="128" x2="128" y2="8" />
    <rect class="label"   x="16"  y="256" width="224" height="20" />
    <text x="0" y="0" xml:space="preserve">
        <tspan x="128" y="271">Local time</tspan></text>

    <circle class="box1" id="box2" cy="128" cx="385" r="124" />
    <line class="hours" id="hours2" x1="385" y1="128" x2="385" y2="48" />
    <line class="minutes" id="minutes2" x1="385" y1="128" x2="501" y2="128" />
    <line class="seconds" id="seconds2" x1="385" y1="128" x2="385" y2="8" />
    <rect class="label" x="273" y="256" width="224" height="20" />
    <text x="0" y="0" xml:space="preserve">
        <tspan x="385" y="271">Universal Time Clock</tspan></text>

    <circle class="box2" id="box3" cy="128" cx="642" r="124" />
    <line class="hours" id="hours3" x1="642" y1="128" x2="642" y2="48" />
    <line class="minutes" id="minutes3" x1="642" y1="128" x2="758" y2="128" />
    <line class="seconds" id="seconds3" x1="642" y1="128" x2="642" y2="8" />
    <rect class="label" x="530"  y="256" width="224" height="20" />
    <text x="0" y="0" xml:space="preserve">
        <tspan x="642" y="271">Asia/Katmandu</tspan></text>
</svg>
```

## 新尝试完全重写

这将[momentjs](http://momentjs.com/)用于国际信息，但没有其他库。

```
"use strict";
var gv={ clockcount: 1,
         svg:'http://www.w3.org/2000/svg',
         xlnk:'http://www.w3.org/1999/xlink',
         tzlist:['Local'].concat(moment.tz.names()),
         vbox:document.getElementById('svg').getAttribute("viewBox").split(" ")
       };
function mousepos(event) {
    var minxy=innerWidth;
    if (minxy > innerHeight) minxy=innerHeight;
    return {
        x:((event.clientX-(innerWidth-minxy)/2)/minxy)*(gv.vbox[2]-gv.vbox[0]),
        y:((event.clientY-(innerHeight-minxy)/2)/minxy)*(gv.vbox[3]-gv.vbox[1])
    };
};

function myClock(cx,cy,r,tz) {
    var clock=this, elem;
    this.cx=128;
    if (typeof(cx)!=='undefined') this.cx=cx;
    this.cy=128;
    if (typeof(cy)!=='undefined') this.cy=cy;
    this.r=100;
    if (typeof(r)!=='undefined') this.r=r;
    this.tz=new Date().getTimezoneOffset();
    this.setTz=function(tz) {
        if (typeof(tz)!=='undefined') {
            this.label=tz;
            if (tz!=="Local") {
                var ndte=new Date();
                var tzoff=moment(ndte).tz(tz).format('HH mm ss').split(' ');
                var tznow=Math.floor(ndte/1000)%86400;
                this.tz=(tznow-(tzoff[0]*3600+tzoff[1]*60+1*tzoff[2]))/60;
            } else this.tz=new Date().getTimezoneOffset();
        } else this.label="Local";
    };
    this.setTz(tz);
    this.clkid=gv.clockcount++;
    this.floor=0;
    this.toggleFloor=function(e) { e.preventDefault();
                                   clock.floor=1-clock.floor; };
    this.toggleSecDraw=function(e) { e.preventDefault();
                                     clock.secdraw=1-clock.secdraw; };
    this.wheel=function(e) { e.preventDefault();
                             var sens=1;
                             if (typeof(e.detail)!=='undefined') {
                                 if ( 0 > e.detail ) { sens=-1; }
                             } else if ( 0 > e.wheelDelta ) { sens=-1; };
                             var cidx=gv.tzlist.indexOf(clock.label)*1+1*sens;
                             if (cidx < 0) cidx=gv.tzlist.length-1;
                             if (cidx >= gv.tzlist.length) cidx=0;
                             clock.setTz(gv.tzlist[cidx]);
                             clock.draw=0; };
    this.moused = function (evt) {
        evt.preventDefault(); var m=mousepos(evt);
        if ((clock.r/2 > Math.pow(Math.pow(Math.abs(clock.cx-m.x),2)+
                                  Math.pow(Math.abs(clock.cy-m.y),2),.5))) {
            clock.box.addEventListener("mousemove", clock.mousem, true);
        } else {
            clock.box.addEventListener("mousemove", clock.mouser, true);
        };
        clock.box.addEventListener("mouseup", clock.mouseu, true);
    };
    this.mouseu = function(evt) {
        evt.preventDefault(); clock.draw=0;
        clock.box.removeEventListener("mousemove", clock.mouser, true);
        clock.box.removeEventListener("mousemove", clock.mousem, true);
        clock.box.removeEventListener("mouseup", clock.mouseu, true);
    };
    this.mouser = function(evt) {
        evt.preventDefault(); clock.draw=0;
        var m=mousepos(evt);
        clock.r=1.25*Math.pow(Math.pow(Math.abs(clock.cx-m.x),2)+
                              Math.pow(Math.abs(clock.cy-m.y),2),.5);
    };
    this.mousem = function(evt) { evt.preventDefault(); clock.draw=0;
        var m=mousepos(evt); clock.cx=m.x; clock.cy=m.y; };
    this.drop = function(evt) { evt.preventDefault();clearInterval(clock.loop);
                                clock.box.remove(); };
    elem=document.createElementNS(gv.svg,'g');             
    elem.setAttribute('id','box'+this.clkid);
    document.getElementById('myClock').appendChild(elem);
    this.box=document.getElementById('box'+this.clkid);
    this.box.addEventListener("mousedown",     this.moused ,true);
    this.box.addEventListener("click",         this.toggleSecDraw,true);
    this.box.addEventListener("dblclick",      this.toggleFloor ,true);
    this.box.addEventListener('mousewheel',    this.wheel, true);
    this.box.addEventListener('DOMMouseScroll',this.wheel, true);
    this.box.addEventListener('contextmenu',   this.drop, true);

    elem=document.createElementNS(gv.svg,'circle');
    this.fill='fill: url(#g'+this.clkid+');'+
        'stroke: url(#gb'+this.clkid+');';
    elem.setAttribute('style',this.fill);
    elem.setAttribute('id','crc'+this.clkid);
    this.box.appendChild(elem);
    this.crc=document.getElementById('crc'+this.clkid);

    this.ticks=[];
    for (var i=0;i<60;i++) {
        elem=document.createElementNS(gv.svg,'line');
        elem.setAttribute('class','ticks');
        elem.setAttribute('id','t'+i+'c'+this.clkid);
        this.box.appendChild(elem);
        this.ticks.push(document.getElementById('t'+i+'c'+this.clkid));
    };

    elem=document.createElementNS(gv.svg,'rect');
    elem.setAttribute('class','label');
    elem.setAttribute('id','r'+this.clkid);
    this.box.appendChild(elem);
    this.rct=document.getElementById('r'+this.clkid);

    elem=document.createElementNS(gv.svg,'text');
    elem.setAttribute('id','x'+this.clkid);
    this.box.appendChild(elem);
    this.tbx=document.getElementById('x'+this.clkid);

    elem=document.createElementNS(gv.svg,'tspan');
    elem.setAttribute('id','t'+this.clkid);
    this.tbx.appendChild(elem);
    this.txt=document.getElementById('t'+this.clkid);

    elem=document.createElementNS(gv.svg,'line');
    elem.setAttribute('id','hr'+this.clkid);
    elem.setAttribute('class','hours');
    this.box.appendChild(elem);
    this.hhr=document.getElementById('hr'+this.clkid);

    elem=document.createElementNS(gv.svg,'line');
    elem.setAttribute('id','mn'+this.clkid);
    elem.setAttribute('class','minutes');
    this.box.appendChild(elem);
    this.hmn=document.getElementById('mn'+this.clkid);

    elem=document.createElementNS(gv.svg,'line'); 
    elem.setAttribute('id','sc'+this.clkid);
    elem.setAttribute('class','seconds');
    this.box.appendChild(elem);
    this.hsc=document.getElementById('sc'+this.clkid);

    elem=document.createElementNS(gv.svg,'linearGradient');
    elem.setAttribute('id','g'+this.clkid);
    elem.setAttributeNS(gv.xlnk,'xlink:href','#g0');
    document.getElementById('defs').appendChild(elem);
    this.deg=document.getElementById('g'+this.clkid);
    elem=document.createElementNS(gv.svg,'linearGradient');
    elem.setAttribute('id','gb'+this.clkid);
    elem.setAttributeNS(gv.xlnk,'xlink:href','#g0');
    document.getElementById('defs').appendChild(elem);
    this.dgb=document.getElementById('gb'+this.clkid);

    this.getTZ=function() { return this.tz; };
    this.setTZ=function(tz) { this.tz=tz; };
    this.draw=0;
    this.secdraw=1;
    this.adjust=function() {
        if (clock.draw!==1) {
            clock.crc.setAttribute('style','stroke-width:'+.03*clock.r+";"+
                                  clock.fill);
            clock.hhr.setAttribute('style','stroke-width:'+.11*clock.r);
            clock.hmn.setAttribute('style','stroke-width:'+.075*clock.r);
            clock.hsc.setAttribute('style','stroke-width:'+
                                  (clock.secdraw==1?.03:.09)*clock.r);
            clock.crc.setAttribute('cx',clock.cx);
            clock.crc.setAttribute('cy',clock.cy);
            clock.crc.setAttribute('r',clock.r);
            clock.rct.setAttribute('height',.2*clock.r);
            clock.rct.setAttribute('x',clock.cx-.9*clock.r);
            clock.rct.setAttribute('y',clock.cy*1+1.1*clock.r);
            clock.txt.innerHTML=clock.label;
            clock.txt.setAttribute('x',clock.cx);
            clock.txt.setAttribute('y',clock.cy*1+1.25*clock.r);
            clock.txt.setAttribute('style','font-size: '+(.15*clock.r)+"px;");
            var w=clock.label.length*.1*clock.r+20.0;
            clock.rct.setAttribute('x',clock.cx-w/2);
            clock.rct.setAttribute('width',w);
            for (var i=0;i<60;i++) {
                var x=clock.cx*1+.925*clock.r*Math.sin(i/30*Math.PI);
                var y=clock.cy*1+.925*clock.r*Math.cos(i/30*Math.PI);
                clock.ticks[i].setAttribute('x1',x);
                clock.ticks[i].setAttribute('y1',y);
                clock.ticks[i].setAttribute('x2',x);
                clock.ticks[i].setAttribute('y2',y);
                clock.ticks[i].setAttribute('style','stroke-width:'+
                                            (i%5==0?.04:.02)*clock.r);
            };
            clock.hsc.setAttribute('x1',clock.cx);
            clock.hsc.setAttribute('y1',clock.cy);
            clock.hmn.setAttribute('x1',clock.cx);
            clock.hmn.setAttribute('y1',clock.cy);
            clock.hhr.setAttribute('x1',clock.cx);
            clock.hhr.setAttribute('y1',clock.cy);
            clock.deg.setAttribute('x1',clock.cx-1.1*clock.r);
            clock.deg.setAttribute('y1',clock.cy-1.1*clock.r);
            clock.deg.setAttribute('x2',clock.cx+1.1*clock.r);
            clock.deg.setAttribute('y2',clock.cy+1.1*clock.r);
            clock.dgb.setAttribute('x1',clock.cx+1.1*clock.r);
            clock.dgb.setAttribute('y1',clock.cy+1.1*clock.r);
            clock.dgb.setAttribute('x2',clock.cx-1.1*clock.r);
            clock.dgb.setAttribute('y2',clock.cy-1.1*clock.r);
            clock.draw=1;
        };
        var now=new Date()/1000.0-this.tz*60;
        if (this.floor==1) now=Math.floor(now);
        var x=this.cx+(this.secdraw==1?.975:.925)*
            this.r*Math.sin((now % 60)/30*Math.PI);
        var y=this.cy-(this.secdraw==1?.975:.925)*
            this.r*Math.cos((now % 60)/30*Math.PI);
        this.hsc.setAttribute('x2',x);
        this.hsc.setAttribute('y2',y);
        if (this.secdraw==0) {
            this.hsc.setAttribute('x1',x);
            this.hsc.setAttribute('y1',y);
        }
        if (this.floor==1) now=Math.floor(now/60)         
        else now=now/60;
        x=this.cx+.9*this.r*Math.sin((now %60)/30*Math.PI);
        y=this.cy-.9*this.r*Math.cos((now %60)/30*Math.PI);
        this.hmn.setAttribute('x2',x);
        this.hmn.setAttribute('y2',y);
        if (this.floor==1) now=Math.floor(now/60)         
        else now=now/60;
        x=this.cx+.7*this.r*Math.sin((now % 12)/6*Math.PI);
        y=this.cy-.7*this.r*Math.cos((now % 12)/6*Math.PI);
        this.hhr.setAttribute('x2',x);
        this.hhr.setAttribute('y2',y);
    };
    this.animate = function() {        clock.adjust(); };
    this.loop=setInterval(this.animate,66);

};

document.getElementById('svg').addEventListener('dblclick', function(e){ if (e.
 target.id!=='svg')return;var m=mousepos(e);new myClock(m.x,m.y,80,'Local'); });

var clocks=['UTC','Local','Asia/Kolkata'];
for (var i=0;i<3;i++) { new myClock( 90+170*i,90,80,clocks[i]); };
```

```
circle   { stroke: black; }
.startbg { stop-color: #CCC; }
.endbg   { stop-color: #222; }
.label   { stroke: #424242;fill:#eee;stroke-width:1; }
.minutes { stroke: #2288AA; }
.hours   { stroke: #3388CC; }
.seconds { stroke: #CCCC22; }
.ticks   { stroke: black; }
line,circle,rect,point {
    opacity:0.65;
    stroke-linecap:round;
    stroke-linejoin:round;
    marker:none;
    stroke-miterlimit:4;
    stroke-dasharray:none;
    stroke-opacity:1;
    visibility:visible;
    display:inline;
    overflow:visible;
    enable-background:accumulate
}
text {
    font-style:normal;
    font-variant:normal;
    font-weight:normal;
    font-stretch:normal;
    text-align:center;
    line-height:100%;
    writing-mode:lr-tb;
    text-anchor:middle;
    fill:#000000;fill-opacity:.7;
    stroke:none;
    font-family:Nimbus Sans L;
}
```

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<?xml-stylesheet type="text/css" href="myClock2.css" ?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN"
"http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 600 600" id="svg"
    xmlns:xlink="http://www.w3.org/1999/xlink" width="100%" height="100%" >
   <defs id="defs">
     <linearGradient gradientUnits="userSpaceOnUse" id="g0"><stop
       class="startbg" /><stop class="endbg" offset="1" />
     </linearGradient></defs>
 <script type="text/ecmascript"
         xlink:href="http://momentjs.com/downloads/moment-with-locales.js" />
 <script type="text/ecmascript"
         xlink:href="http://momentjs.com/downloads/moment-timezone-with-data.js" />
 <title id="title">Clock object</title>
 <g id="myClock"></g>
 <script type="text/ecmascript" xlink:href="myClock2.js" />
 <script type="text/ecmascript">
</script>
</svg>
```

*svg 绘图*上有 3 个*对象*时钟，具有一些功能：

 ***鼠标命令：**

*   当鼠标悬停在时钟上时

    *   单击 => 切换秒：路径或点
    *   拖动中心 => 移动时钟
    *   拖动边框 => 调整时钟大小
    *   双击 => 切换*地板*模式
    *   滚动鼠标滚轮 => 更改时区
    *   右键单击（上下文菜单）=> 删除时钟
*   当鼠标悬停在背景上时：

    *   双击 => 添加新时钟

这并不完美，因为有一些错误，主要是在鼠标定位中`width="100%" height="100%"`，我认为这是封闭片段的效果，但这并不重要。

您可以在我的网站上找到完整可用的[SVG 图片](http://f-hauri.ch/vrac/myclock/myClock2.svg)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-19T19:45:23.893

**我创建了一个 D3 时钟对象**

# [普朗克](http://plnkr.co/edit/tKvSsVYekRvwmGEIgOQ3?p=preview)

![在此处输入图像描述](../Images/9bd1b1cf609427fcbc66e84f524d87ff.png)

* * *

：

*   d3Clock 可以多次实例化。

*   构造函数接受 X、Y、Width、TimeZoneOffset 对象、标签

：

```
 <script>
    $(document).ready(function() {

      var tokyoClock = new d3Clock({
        clockCenterX: 140,
        clockCenterY: 150,
        clockWidth: 130,
        title: 'Tokyo',
        TZOffset: {
          hours: 13
        }
      }); 
```

：

*   方法也公开手动设置 TZOffsets

：

```
 var iranClock = new d3Clock({
        clockCenterX: 355,
        clockCenterY: 360,
        clockWidth: 180,
        title: 'Iran'    
      });

      iranClock.Hours(8);
      iranClock.Minutes(30); 
```

* * *

d3Clock 机箱：

```
var d3Clock = function(data) {
  var clockGroup, fields, formatHour, formatMinute, formatSecond, pi, render, scaleHours, scaleSecsMins, vis;

  width = data.clockWidth;
  height = data.clockWidth;
  offSetX = data.clockWidth / 2;
  offSetY = offSetX;
  var x = data.clockCenterX;
  var y = data.clockCenterY;

  var hourOffset = 0;
  var minOffset = 0;
  var secOffset = 0;

  title = data.title;

  var clockRadius = data.clockWidth * 0.45;
  formatSecond = d3.time.format("%S");
  formatMinute = d3.time.format("%M");
  formatHour = d3.time.format("%H");

  pi = Math.PI;
  scaleSecsMins = d3.scale.linear().domain([0, 59 + 59 / 60]).range([0, 2 * pi]);
  scaleHours = d3.scale.linear().domain([0, 11 + 59 / 60]).range([0, 2 * pi]);

  // create Parent Div and set x, y
  var iDiv = document.createElement('div');
  iDiv.setAttribute("style", 'background-color: transparent; height: ' + width + ' px; width: ' + width + 'px; position: absolute; top:' + y + 'px; left: ' + x + 'px; text-align: center; v-align:bottom;');
  iDiv.innerHTML = '<span style="font-weight: bold;">' + title + '</span>';
  document.getElementsByTagName('body')[0].appendChild(iDiv);
  vis = d3.select(iDiv).append("svg:svg").attr("width", width).attr("height", height);

  clockGroup = vis.append("svg:g").attr("transform", "translate(" + offSetX + "," + offSetY + ")");
  clockGroup.append("svg:circle").attr("r", clockRadius).attr("fill", "lightgrey").attr("class", "clock outercircle").attr("stroke", "black").attr("stroke-width", 5);
  clockGroup.append("svg:circle").attr("r", 4).attr("fill", "black").attr("class", "clock innercircle");

  // private set TZ Offset methods
  var setTZSeconds = function(sec) {
    if (sec !== undefined)
      secOffset = sec;
  }
  var setTZMins = function(min) {
    if (min !== undefined)
      minOffset = min;
  }
  var setTZHours = function(hr) {
    if (hr !== undefined)
      hourOffset = hr;
  }

  // exposed TimeZoneOffset
    this.Seconds = function(Sec) {
      setTZSeconds(Sec);
    }
    this.Minutes = function(Mins) {
      setTZMins(Mins);
    }
    this.Hours = function(Hours) {
      setTZHours(Hours);
    }

  if (data.TZOffset != undefined) {
    setTZHours(data.TZOffset.hours);
    setTZMins(data.TZOffset.mins);
    setTZSeconds(data.TZOffset.secs);
  }

  // Get time values and apply offsets
  fields = function() {
    var d, data, hour, minute, second;
    d = new Date();
    second = d.getSeconds() + secOffset;
    minute = d.getMinutes() + minOffset;
    hour = d.getHours() + hourOffset + minute / 60;
    return data = [{
      "unit": "seconds",
      "text": formatSecond(d),
      "numeric": second
    }, {
      "unit": "minutes",
      "text": formatMinute(d),
      "numeric": minute
    }, {
      "unit": "hours",
      "text": formatHour(d),
      "numeric": hour
    }];
  };

  render = function(data) {
    var hourArc, minuteArc, secondArc;
    clockGroup.selectAll(".clockhand").remove();
    secondArc = d3.svg.arc().innerRadius(0).outerRadius(clockRadius * .9).startAngle(function(d) {
      return scaleSecsMins(d.numeric);
    }).endAngle(function(d) {
      return scaleSecsMins(d.numeric);
    });
    minuteArc = d3.svg.arc().innerRadius(0).outerRadius(clockRadius * .85).startAngle(function(d) {
      return scaleSecsMins(d.numeric);
    }).endAngle(function(d) {
      return scaleSecsMins(d.numeric);
    });
    hourArc = d3.svg.arc().innerRadius(0).outerRadius(clockRadius * .7).startAngle(function(d) {
      return scaleHours(d.numeric % 12);
    }).endAngle(function(d) {
      return scaleHours(d.numeric % 12);
    });
    clockGroup.selectAll(".clockhand").data(data).enter().append("svg:path").attr("d", function(d) {
      if (d.unit === "seconds") {
        return secondArc(d);
      } else if (d.unit === "minutes") {
        return minuteArc(d);
      } else if (d.unit === "hours") {
        return hourArc(d);
      }
    }).attr("class", "clockhand").attr("stroke", "black").attr("style", function(d) {
      if (d.unit === "seconds") {
        return "stroke-width: 2; stroke: white"
      } else if (d.unit === "minutes") {
        return "stroke-width: 3;"
      } else if (d.unit === "hours") {
        return "stroke-width: 4;"
      }
    }).attr("fill", "none");
  };

  setInterval(function() {
    var data;
    data = fields();
    return render(data);
  }, 1000);
}; 
```

* * *

**可以公开更多方法以允许自定义**

所有带前缀的函数`this.`都公开以用于实例化对象。所以：

```
this.Seconds = function(Sec) {
  setTZSeconds(Sec);
}
this.Minutes = function(Mins) {
  setTZMins(Mins);
}
this.Hours = function(Hours) {
  setTZHours(Hours);
} 
```

公开访问私有`setTZSeconds()`, `setTZMins()`, `setTZHours()`.

对于公共方法调用完成工作的私有方法，这被认为是一种很好的 OO 形式。公共方法可以限制或过滤结果（就像我`undefined`在私有方法中检查不一样。

公共方法可以暴露给

*   更改 x, y 以便在实例化后可以在屏幕上移动时钟对象
*   改变大小
*   更改时钟指针、标题位置/样式的样式

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-03T18:27:13.170

**更新：**

您可以使用 jQuery 或 MooTools，但我看不出这样做的意义。jQuery 和 MooTools 是使 DOM 操作或 AJAX 更简单的库，并且您使用 SVG（在这种情况下）所做的主要目的并没有做太多的 DOM 操作，并且不涉及 AJAX。

也就是说，如果您决定使用其中一个（我将在此答案中使用 jQuery，因为我还不精通 MooTools），我将首先将函数调用包装在一个`$(document).ready()`函数中的[IIFE](http://benalman.com/news/2010/11/immediately-invoked-function-expression/)。

```
$(document).ready(function {
    'use strict';
    ...
}); 
```

代替：

```
(function () {
    'use strict';
    ...
}()); 
```

您还可以在内部将元素存储为 jQuery 对象：

```
this.element = $('#' + hand); 
```

然后用稍微少一点的输入来获取/设置属性：

```
this.setPosition = function setPosition(now) {
    var x2 = this.element.attr('x2'),
        y2 = this.element.attr('y2');
    this.setInterval(now);
    x2 = this.center.x + (this.length * Math.sin(this.interval / this.frequency * Math.PI));
    y2 = this.center.y - (this.length * Math.cos(this.interval / this.frequency * Math.PI));
    this.element.attr('x2', x2);
    this.element.attr('y2', y2);
    if (this.isSeconds) {
        //special case
        this.element.attr('x1', x2);
        this.element.attr('y1', y2);
    }
}; 
```

总体上没有太大区别，在这种情况下加载库的额外开销或额外带宽（当然也不值得两者）都不值得。

如果您有一个更复杂的示例，那么可能值得包含 jQuery 或 MooTools 来提供帮助，但在这种情况下，我认为两者都不会增加足够的价值。

**原来的：**

我假设通过“对象化此代码”，您的意思是使其更加抽象。就目前而言，您拥有的代码：

*   做这项工作
*   相当紧凑
*   可读性强

因此不太可能变得更小（或必然“更好”）。

也就是说，您可以像这样抽象一个“手”对象：

```
(function () {
    'use strict';
    var Point = function Point(x, y) {
        this.x = x;
        this.y = y;
    };
    var Hand = function Hand(hand, center, length) {
        this.center = center;
        this.element = document.getElementById(hand);
        this.frequency = 0;
        this.isSeconds = (hand === 'seconds');
        this.hand = hand;
        this.length = length;
        this.interval = 0;
        this.parseMilliseconds = function parseMilliseconds(now) {
            return now.getTime() % 60000;
        };
        this.parseMinutes = function parseMinutes(now) {
            return now.getMinutes() + (this.parseMilliseconds(now) / 60000);
        };
        this.parseHours = function parseHours(now) {
            return now.getHours() + (this.parseMinutes(now) / 60);
        };
        this.setFrequency = function getFrequency() {
            switch (this.hand) {
            case 'hours':
                this.frequency = 6;
                break;
            case 'minutes':
                this.frequency = 30;
                break;
            case 'seconds':
                this.frequency = 30000;
                break;
            }
        };
        this.setInterval = function setInterval(now) {
            switch (this.hand) {
            case 'hours':
                this.interval = this.parseHours(now);
                break;
            case 'minutes':
                this.interval = this.parseMinutes(now);
                break;
            case 'seconds':
                this.interval = this.parseMilliseconds(now);
                break;
            }
        };
        this.setPosition = function setPosition(now) {
            var x2 = this.element.getAttribute('x2'),
                y2 = this.element.getAttribute('y2');
            this.setInterval(now);
            x2 = this.center.x + (this.length * Math.sin(this.interval / this.frequency * Math.PI));
            y2 = this.center.y - (this.length * Math.cos(this.interval / this.frequency * Math.PI));
            this.element.setAttribute('x2', x2);
            this.element.setAttribute('y2', y2);
            if (this.isSeconds) {
                //special case
                this.element.setAttribute('x1', x2);
                this.element.setAttribute('y1', y2);
            }
        };
        this.setFrequency();
    };
    var updateClock = function updateClock(hours, minutes, seconds) {
        var now = new Date();
        hours.setPosition(now);
        minutes.setPosition(now);
        seconds.setPosition(now);
        window.setTimeout(function () {
            updateClock(hours, minutes, seconds);
        }, 80);
    };
    var initClock = function initClock() {
        var center = new Point(128, 128),
            seconds = new Hand('seconds', center, 120),
            minutes = new Hand('minutes', center, 116),
            hours = new Hand('hours', center, 80);
        updateClock(hours, minutes, seconds);
    };
    initClock();
}()); 
```

在这里行动：http: [//jsfiddle.net/MbktF/19/](http://jsfiddle.net/MbktF/19/)*

# sql - 在数据库中组织主键的更好方法是什么？

> ID：13208403
> 
> 赞同：1
> 
> 时间：2012-11-03T10:43:23.740
> 
> 标签：sql, oracle, database-design, primary-key

我的数据库有两张表，一张是城市的距离矩阵，另一张是城市。我的第一个结构是这样的：

*   城市
    *   用户界面
    *   姓名
    *   纬度
    *   经度

和

*   距离
    *   FromCityID
    *   到城市ID
    *   距离长度

`UUID`是CITY表的主键，`FromCityID`引用`ToCityID`CITY作为外键，都是DISTANCE表的复合主键，因为两个城市之间的距离应该是唯一的。

但后来意识到我不想使用`UUID`和自动增量作为主键，因为我从 XML 上传这个数据库中的数据，其中包含城市和距离。由于距离可能不仅包括当前 XML 中提到的那些城市，还包括数据库中任何先前存储的城市。

我需要一个跨数据库和 XML 的 ID 系统。纬度/经度似乎是最好的选择，所以我将表格更改为：

*   城市
    *   姓名
    *   纬度
    *   经度

和

*   距离
    *   FromCityIDLatitude
    *   FromCityID经度
    *   ToCityIDLatitude
    *   ToCityID经度
    *   距离长度

`Latitude`并且`Longitude`是 CITY 表的复合主键；`FromCityIDLatitude`//引用CITY作为外键`FromCityIDLongitude`，所有四列都是DISTANCE表的复合主键`ToCityIDLatitude`。`ToCityIDLongitude`

但是使用 4 列作为主键是一个糟糕的设计。在这种情况下，最好的事情是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:12:11.563

我不同意这种说法：

> 但是使用 4 列作为主键是一个糟糕的设计。

一个糟糕的设计是一种没有按照您的需要做的设计，或者一种允许数据库中出现不一致的设计。在您的情况下，只要我们做出一个假设，我认为四列主键没有问题。也就是说，您对该表的主要访问路径将使用主键中的*每一*列。如果是这种情况，那很好；我会将整个表放入唯一索引，并对键的四列设置单独的唯一约束。

四列索引的问题是当您尝试通过第四个叶子访问表时。您可能根本不会使用索引。如果有必要在第四片叶子上定期进行索引查找，则必须添加另一个索引等。最终可能会得到一个可笑的过度索引表。

绕过它的方法是错开装载。不要将 XML 数据直接加载到主数据库表中。将它们加载到辅助表中并运行一个进程以查看该城市是否已存在。如果是，则不要添加它。如果没有，则生成一个新的代理键并执行 CROSS JOIN 以将所有新记录添加到 DISTANCE。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:26:09.740

不要忘记桌子的“物理”设计。对于距离矩阵，考虑使用索引组织表 (IOT)，并压缩列。

请参阅 AskTom 上类似问题（关于距离表）的讨论：

[http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:239614547000#52902724002052](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:239614547000#52902724002052)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T14:34:37.547

要回答您在标题中提出的问题，

> 在数据库中组织主键的更好方法是什么？

盲键，无论是整数还是通用唯一标识符，几乎总是作为键更好。他们永远不需要改变。数据元素可能会或可能不会改变。

在您的特定情况下，城市的纬度和经度不太可能改变。但是，如果您收到一个城市的纬度/经度校正，您现在必须在两个表中进行校正。

# .net - 确定 Date 是否在过去？

> ID：13208404
> 
> 赞同：-1
> 
> 时间：2012-11-03T10:43:32.287
> 
> 标签：.net, vb.net, datetime, compare

确定 a`Date`是否在过去的最佳方法是什么？

目前我有：

```
If MyDate < Date.Now 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:49:33.077

您所拥有的是一个合理的*起点*，但还有许多其他考虑因素需要考虑：

*   假设`MyDate`是一个`DateTime`，你真的需要考虑它[`Kind`](http://msdn.microsoft.com/en-us/library/system.datetime.kind.aspx)。例如，如果种类是 UTC，您可能应该使用[`DateTime.UtcNow`](http://msdn.microsoft.com/en-us/library/system.datetime.utcnow.aspx). 如果种类是本地的，使用`DateTime.Now`. 如果它是未指定的，那么你就有点进退两难了，因为不清楚它到底是什么意思
*   你的问题是关于“日期”的——这个值真的只是代表一个日期，还是一个日期和时间？如果它只是一个日期，您可能想要`Today`代替`Now`, 或`UtcNow.Date`UTC 版本。
*   您需要考虑时区吗？你可能会更好地使用`DateTimeOffset`? 这实际上取决于您的数据来源和您要附加的*确切含义。*

（顺便说一句，如果您使用将不同类型的值分成不同类型的日期/时间 API，那么很多这些问题会更加透明。碰巧我正在研究这样的 API - [Noda Time](http://noda-time.googlecode.com) :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:49:16.997

如果 DateDiff(DateInterval.Day, MyDate , Date.Now) < 0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T11:57:26.127

我假设您在同一时区工作。

这是一个小代码片段，展示了如何做到这一点：

```
Dim MyDate As Date = #11/4/2012#
Dim ts As TimeSpan = MyDate.Subtract(Today)
If ts.TotalDays < 0 Then
  MsgBox("MyDate is in the past")
ElseIf ts.TotalDays > 0 Then
  MsgBox("MyDate is in the future")
Else
  MsgBox("MyDate is today")
End If 
```

# wordpress - 用于 Wordpress + 修改的 CSS 2 行菜单和子菜单

> ID：13208407
> 
> 赞同：2
> 
> 时间：2012-11-03T10:43:48.373
> 
> 标签：wordpress, css, menu

我需要一个**带有 2 条水平线的菜单和子菜单的 CSS 菜单**：
悬停在菜单上，子菜单将加载到第二行。
我得到了这样一个菜单的好代码：***[HERE](http://pastebin.com/dUhMyxzM)***。

现在它的工作方式好像
--我将鼠标悬停在菜单上，如果有子菜单，它们会出现
-我将鼠标从菜单上移开，子菜单将消失

虽然颜色组合不好，但功能很好，因为我希望它们在子菜单中是水平的。

![在此处输入图像描述](../Images/601677dea6bbc27999e2a38f00f54583.png)

### 期望的修改

现在我需要稍微修改一下菜单，然后如果-
- 我将鼠标悬停在 MENU 上，如果有 SUB MENU，它们会出现
- 我将鼠标从 MENU 上移开，SUB MENU 将消失
- 我点击菜单，然后将选择菜单并加载特定页面，并且子菜单将出现并在他们指定的位置可见
-我单击子菜单，然后将选择子菜单并加载特定页面SUB MENU 也将可见

应该是这样的：**[这个菜单](http://socialchange.is)**

哪里要做修改？
我试过了：

```
.menu li:active > ul {
  position: absolute;
  display: block;
  width: 920px;
  height: 25px;
  margin: 40px 0 0 0;
  background: #315299; 
} 
```

但它不起作用。:(

**PS：**我正在使用 WordPress 网站中的菜单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T07:44:53.380

这是我最后提出的解决方案。它是**WordPress 特定**的：

```
.menu li.current-menu-item > ul,
.menu li.current-menu-parent > ul,
.menu > li > ul > li.current-menu-item > ul{
  position: absolute;
  display: block;
  width: 960px;
  height: 25px;
  margin: 23px 0 0 0;
  background: #E5E5E5; 
}

.menu li.current-menu-item > ul li a,
.menu li.current-menu-parent > ul li a,
.menu > li > ul > li.current-menu-item > ul li a{
  float: left;
  color: #000;
  text-decoration: none;
  margin: 0;
  padding: 0 30px 0 0;
  background: #E5E5E5; 
} 
```

# php - 在使用 jquery mobile 渲染网格视图时需要帮助

> ID：13208408
> 
> 赞同：-1
> 
> 时间：2012-11-03T10:43:49.220
> 
> 标签：php, javascript, jquery-mobile

嘿伙计们，我正在实现这个应用程序，我正在使用 php 从数据库中检索图像，并回显一个 div 标签，其中包含有关如何在屏幕上显示图像的所有信息（基本上是一个网格视图）。我正在使用 jquery mobile 生成网格视图。我确定我的后端以正确的格式返回正确的 div。所以我最好的猜测是，在 jquery 准备好将其呈现为网格视图之前，数据会从后端得到回显，所以您对这个问题有任何建议或解决方案，在此先感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:10:37.610

I can only guess because you didn't provide any code, but If you think that you are calling jquery when it's not yet loaded, then try wrapping your jquery code like this:

```
<script type="text/javascript">
    window.addEventListener('load', function () {
         // use jquery here: e.g. $('#content').show();
    }, false);
</script> 
```

or like this:

```
<script type="text/javascript">
    $(function(){
         // use jquery here: e.g. $('#content').show();
    });
</script> 
```

This way your code is executed when the page is loaded.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:15:28.507

对于延迟，我很抱歉，这是我今天编写的一小段代码，它似乎运行良好。sample.php 以 html 格式返回网格视图。

```
jQuery(document).bind( "pagebeforechange", function( e, data ) {
    jQuery.get('sample.php', function(data) {
            jQuery('#sample').append(data);
      }); 
```

# php - Symfony 2 形式，在嵌入集合中嵌入集合

> ID：13208410
> 
> 赞同：7
> 
> 时间：2012-11-03T10:44:08.517
> 
> 标签：php, symfony

我有一个数据结构，其中一个主题有很多问题（一对多），一个问题有很多答案（一对多）。

我已将问题设置为主题表单中的嵌入式集合，并且由于[食谱条目](http://symfony.com/doc/current/cookbook/form/form_collections.html)，我可以 100% 地工作。

当我尝试开发它以在问题表单中嵌入一组答案表单时，我遇到了一个问题。

包含顶层原型表单的 data-prototype 属性具有完整的表单深度，因此包括问题和答案的原型。但它对`__name__`每个级别使用相同的占位符。

```
<div id="topic_questions___name__">
<div class="control-group">
    <label for="topic_questions___name___questionText" class="control-label">question</label>
    <div class="form-row-errors"></div>
    <div class="controls">
        <textarea id="topic_questions___name___questionText" name="topic[questions][__name__][questionText]" required="required" class="input-block-level"></textarea>
    </div>
</div>
<div class="control-group">
    <label class="control-label">answers</label>
    <div class="controls">
        <div id="topic_questions___name___answers"     data-prototype="&lt;div class=&quot;control-group&quot;&gt;&lt;label class=&quot;control-label&quot;&gt;__name__label__&lt;/label&gt;&lt;div class=&quot;controls&quot;&gt;&lt;div id=&quot;topic_questions___name___answers___name__&quot;&gt;&lt;div class=&quot;control-group&quot;&gt;&lt;label for=&quot;topic_questions___name___answers___name___answerText&quot; class=&quot;control-label&quot;&gt;option&lt;/label&gt;&lt;div class=&quot;form-row-errors&quot;&gt;&lt;/div&gt;&lt;div class=&quot;controls&quot;&gt;&lt;input type=&quot;text&quot; id=&quot;topic_questions___name___answers___name___answerText&quot; name=&quot;topic[questions][__name__][answers][__name__][answerText]&quot; required=&quot;required&quot; maxlength=&quot;255&quot; /&gt;&lt;/div&gt;&lt;/div&gt;&lt;input type=&quot;hidden&quot; id=&quot;topic_questions___name___answers___name___sortOrder&quot; name=&quot;topic[questions][__name__][answers][__name__][sortOrder]&quot; /&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;"></div>
    </div>
</div> 
```

你可以在底部看到很长的一行，我猜这是答案表单的原型（！）。我无法看到只替换与问题相关的`[__name__]`占位符而不是与答案相关的占位符。

做正常的

```
var newForm = prototype.replace(/__name__/g, collectionHolder.children().length); 
```

在创建 Question 表单的真实实例时，当然会用`__name__`相同的值替换 的所有实例，因此当为 Answer 表单创建数据原型时，它已经替换了所有占位符。

这是答案表单的数据原型的样子，当我单击添加一个真正的问题表单时

```
<div class="control-group">
<label class="control-label">1label__</label>
<div class="controls">
    <div id="topic_questions_1_answers_1">
        <div class="control-group">
            <label for="topic_questions_1_answers_1_answerText" class="control-label">option</label>
            <div class="form-row-errors"></div>
            <div class="controls">
                <input type="text" id="topic_questions_1_answers_1_answerText" name="topic[questions][1][answers][1][answerText]" required="required" maxlength="255" />
            </div>
        </div>
    </div>
</div> 
```

如您所见，`__name__`占位符根本没有功能 - 在创建问题表单时，它已经被问题表单的计数替换。

有没有可能用 Symfony 提供的机制来实现这种多深度的嵌入式集合？

只要它尝试为每个“级别”使用相同的占位符，我就看不到如何。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-03T11:20:34.703

你至少使用 Symfony 2.1 吗？如果是这样，您可以使用以下属性更改`__name__`标签`prototype_name`：

[http://symfony.com/doc/master/reference/forms/types/collection.html#prototype-name](http://symfony.com/doc/master/reference/forms/types/collection.html#prototype-name)

在您的表格中：

```
->add('answers', 'collection', array(
    'type' => new AnswerType(),
    'allow_add' => true,
    'prototype_name' => 'another_name'
)) 
```

# sql-server - 在 SQL 中选择表时添加列

> ID：13208411
> 
> 赞同：1
> 
> 时间：2012-11-03T10:44:24.470
> 
> 标签：sql-server, sql-server-2008

我的第一个表是 ProjectCustomFields

```
CustomFieldId   ProjectId   CustomFieldName CustomFieldRequired CustomFieldDataType
69  1   User Name   1   0
72  1   City    1   0
74  1   Email   0   0
82  1   Salary  1   2 
```

我的第二个表是 ProjectCustomFieldValues

```
CustomFieldValueId  ProjectId   CustomFieldId   CustomFieldValue    RecordId
35  1   69  kaliya  1
36  1   72  Bangalore   1
37  1   74  mm@gmail.com    1
41  1   69  Yohesh  2
42  1   72  Delhi   2
43  1   74      2
50  1   69  sss 3
51  1   72  Delhi   3
52  1   74  sss@icsportal.in    3
57  1   69  Sunil   4
58  1   72  Mumbai  4
59  1   74  sunil@icsportal.in  4
60  1   82  20000   4 
```

我试过下面的查询

```
Select M.CustomFieldName
,      N.CustomFieldValue
,      N.RecordId 
From
(
    Select G.CustomFieldName
    ,      H.RecordId 
    From
    (
        Select CustomFieldName 
        From ProjectCustomFields 
        Where ProjectId = 1
    ) G 
    Cross Join
    (
        Select Distinct RecordId 
        From ProjectCustomFieldValues
    ) H
) M
Left Join 
(
    Select CustFiled.CustomFieldName
    ,      CustValue.CustomFieldValue
    ,      CustValue.RecordId 
    From ProjectCustomFieldValues CustValue 
    Left Join ProjectCustomFields CustFiled  
        On CustValue.CustomFieldId = CustFiled.CustomFieldId 
    Where CustValue.AuctionId = 1
) N 
    On M.CustomFieldName = N.CustomFieldName 
    And M.RecordId       = N.RecordId 
```

但我得到了下面的结果

```
#CustomFieldName#   CustomFieldValue    RecordId
User Name   kaliya  1
City    Bangalore   1
Email   mm@gmail.com    1
Salary  NULL    **NULL**
User Name   Yohesh  2
City    Delhi   2
Email       2
Salary  NULL    **NULL**
User Name   sss 3
City    Delhi   3
Email   sss@icsportal.in    3
Salary  NULL    **NULL**
User Name   NULL    **NULL**
City    NULL    **NULL**
Email   NULL    **NULL**
Salary  NULL    **NULL**
User Name   Sunil   4
City    Mumbai  4
Email   sunil@icsportal.in  4
Salary  20000   4 
```

但预期结果是

```
CustomFieldName CustomFieldValue    RecordId
User Name   kaliya  1
City    Bangalore   1
Email   mm@gmail.com    1
Salary  NULL    **1**
User Name   Yohesh  2
City    Delhi   2
Email       2
Salary  NULL    **2**
User Name   sss 3
City    Delhi   3
Email   sss@icsportal.in    3
Salary  NULL    **3**
User Name   Sunil   4
City    Mumbai  4
Email   sunil@icsportal.in  4
Salary  20000   4 
```

请指导我一些，我尝试了很多但我在recordId中得到了空值，所以我需要相同的recordId高于一个..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:27:05.303

尝试这个：

```
declare @ProjectCustomFields table
(
    CustomFieldId            bigint not null primary key clustered
    , ProjectId              int not null
    , CustomFieldName        nvarchar(64) not null
    , CustomFieldRequired    bit not null
    , CustomFieldDataType    int not null
)
insert @ProjectCustomFields
      select 69, 1, 'User Name', 1, 0
union select 72, 1, 'City'     , 1, 0
union select 74, 1, 'Email'    , 0, 0
union select 82, 1, 'Salary'   , 1, 2

declare @ProjectCustomFieldValues table
(
    CustomFieldValueId bigint not null primary key clustered 
    , ProjectId        int not null
    , CustomFieldId    bigint not null --foreign key references ProjectCustomFields(CustomFieldId)
    , CustomFieldValue nvarchar(max)
    , RecordId         bigint not null
)
insert @ProjectCustomFieldValues
      select 35, 1, 69, 'kaliya'            , 1
union select 36, 1, 72, 'Bangalore'         , 1
union select 37, 1, 74, 'mm@gmail.com'      , 1
union select 41, 1, 69, 'Yohesh'            , 2
union select 42, 1, 72, 'Delhi'             , 2
union select 43, 1, 74, ''                  , 2
union select 50, 1, 69, 'sss'               , 3
union select 51, 1, 72, 'Delhi'             , 3
union select 52, 1, 74, 'sss@icsportal.in'  , 3
union select 57, 1, 69, 'Sunil'             , 4
union select 58, 1, 72, 'Mumbai'            , 4
union select 59, 1, 74, 'sunil@icsportal.in', 4
union select 60, 1, 82, '20000'             , 4

select vf.CustomFieldName
, v2.CustomFieldValue
, vf.RecordId
from 
(
    select distinct 
      v.RecordId
    , f.CustomFieldName
    , f.CustomFieldId
    from @ProjectCustomFieldValues v
    cross join @ProjectCustomFields f
) vf
left outer join @ProjectCustomFieldValues v2
    on vf.RecordId = v2.RecordId
    and vf.CustomFieldId = v2.CustomFieldId
order by vf.RecordId, vf.CustomFieldId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T10:57:37.247

您正在选择`N.RecordId`，它来自`CustValue.RecordId`您`LEFT JOIN`来自表的字段`ProjectCustomFieldValues`。

记录 1、2 或 3 没有薪水条目，`ProjectCustomFieldValues`这就是为什么它`NULL`在 a 之后返回`LEFT JOIN`。

您可能在选择方面取得了更大的成功，`M.RecordId`但您的整个陈述可能需要进行一些认真的重构。

# java - 嵌入关键数据的标准

> ID：13208412
> 
> 赞同：1
> 
> 时间：2012-11-03T10:44:38.867
> 
> 标签：java, hibernate, hibernate-criteria

美好的一天，伙计们。我遇到了创建标准的问题，但无法解决。这是我的对象：

```
 @Embeddable
    public class Pk {
    @ManyToOne(optional = false)
    @JoinColumn(name = "SUBKEY1_ID", nullable = false, 
              referencedColumnName = "ID")
    private SubKey1 subKey1;
    @ManyToOne(optional = false)
    @JoinColumn(name = "SUBKEY2_ID", nullable = false, 
              referencedColumnName = "ID")
    prviate subKey2 subKey2;
    ... getters setters
}

 @Entity
    @Table(name = "TABLENAME", schema = "SCHEMANAME")
    @AssociationOverrides({
        @AssociationOverride(name = "pk.subKey1", joinColumns =
        @JoinColumn(name = "SUBKEY1_ID")),
        @AssociationOverride(name = "pk.subKey2", joinColumns =
        @JoinColumn(name = "SUBKEY2_ID"))
    })
    public class Entity1 {
    @EmbeddedId
    private Pk pk = new Pk();
    ... other fields\getters setters
    } 
```

所以，我想得到一些 pk.subkey1 的字段。我编写了加载整个对象的标准，之后，我可以通过 getter 获取所有必要的字段。

```
Criteria criteria = Entity1DAO.instance().createCriteria();
        criteria.createAlias("activity", "activity")
                .createAlias("pk.subKey1", "subKey1")
                .setProjection(Projections.projectionList()
                        .add(Projections.property("activity.product"))
                        .add(Projections.property("pk.subKey1"))
                        .add(Projections.property("field")))
                .add(Restrictions.eq("activity.prodDate", date))
                .addOrder(Order.asc("pk.subKey1.id")); 
```

**但是在这里我不能对pk**添加任何限制。*subKey1*对象（例如-我需要通过**subKey1**限制记录。*启用*标志）-因为标准不执行与 subKey1 对象相关的表的任何连接。**没关系，我可以跳过subKey1**的所有记录。*在 java 代码中启用*= **false**，但很奇怪。

现在，我试图创建标准来获取对象，而不是对象的某些特定字段。

```
criteria.createAlias("activity", "activity")
                .createAlias("pk.subKey1", "subKey1")
                .createAlias("subKey1.zone", "zone")
                .setProjection(Projections.projectionList()
                        .add(Projections.property("activity.product.id"))
                        .add(Projections.property("subKey1.id"))
                        .add(Projections.property("subKey1.zone.id"))
                        .add(Projections.property("zone.description"))
                        .add(Projections.property("dryQty")))
                .add(Restrictions.eq("activity.prodDate", date))
                .add(Restrictions.eq("subKey1.enabled", true))
                .addOrder(Order.asc("pk.subKey1.id")); 
```

但是条件不做任何连接（活动字段只有一个连接：（）必要的表（**subKey1**和**区域**表）来获取数据和sql查询粉碎异常，它无法找到列。（*subkey1*的字段*区域*是具有自己的表的对象）。

 ***那么，我在哪里犯了错误，我如何将对象的字段称为嵌入式 id 的字段？***

# mysql - 在 ruby on rails 中减去两个日期

> ID：13208413
> 
> 赞同：9
> 
> 时间：2012-11-03T10:45:40.457
> 
> 标签：mysql, ruby-on-rails, ruby-on-rails-3, date

我以这种方式在我的模型中减去两个日期：-

```
 def total_days
      self.to_date - self.from_date
  end 
```

我的日期是`Mysql Date`(YYYY-MM-DD) 格式。

在视图中显示我的日期时，它给了我`5/1`几天。即使 5 是正确的，它也会附加`'/1'`到天数上。我怎样才能删除这个。有没有更好的方法呢？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-03T10:55:31.777

试试这个，例如

```
require 'date'
$ now = Date.today
$ before = Date.today + 2.days
$ difference_in_days = (before - now).to_i 
```

为您的解决方案

```
def total_days
  difference_in_days = (self.to_date - self.from_date).to_i
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-12-27T09:48:01.343

您还可以在视图中使用：

```
<%= distance_of_time_in_words(contract['start_date'], contract['end_date'])%> 
```

# c++ - 模板类型宏参数中的括号，我不能使用可变参数宏

> ID：13208416
> 
> 赞同：2
> 
> 时间：2012-11-03T10:45:55.910
> 
> 标签：c++, templates, macros, c++03

> **可能重复：**
> [宏中使用的模板参数有问题](https://stackoverflow.com/questions/4295890/trouble-with-template-parameters-used-in-macros)

我试图找出一种方法来让它工作而不改变结构`INHERIT`：

```
#define INHERIT(t) foo<t>
template<typename A, typename B>
struct bar : INHERIT(bar<A, B>) {}; 
```

问题是调用`INHERIT`包含逗号。

我正在尝试支持较旧的编译器，因此不能选择可变参数宏和模板别名。有没有什么办法解决这一问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:58:39.363

使用一些棘手的宏：

```
#define A2(t1,t2) t1,t2
#define A3(t1,t2,t3) t1,t2,t3
#define A4(t1,t2,t3,t4) t1,t2,t3,t4
#define INHERIT(t) foo< t >
template<typename A, typename B>
struct bar : INHERIT(bar<A2(A, B)>) {}; 
```

这些宏导致预处理器停止将逗号视为其语法 - 逗号开始仅被视为参数的一部分。

另一种方法：

```
#define bar_A_B bar<A,B>
template<typename A, typename B>
struct bar : INHERIT(bar_A_B) {}; 
```

**注意**
这些示例在没有以下情况下无法编译：

```
template <class T>
class foo {}; 
```

# ios - iOS6上的轮流功能

> ID：13208418
> 
> 赞同：0
> 
> 时间：2012-11-03T10:46:06.803
> 
> 标签：ios, mapkit

您好我正在尝试在 iOS6 上使用 Mapkit 获取 2 点之间的路线。想法是在地图上获取路线和叠加层。但是通过 tun 获取 Turn 的唯一方法是使用地图应用程序或使用 URL 启动地图应用程序。

在 iOS6 上无需关闭应用程序即可获得 Turn by turn 功能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T12:22:29.700

您可以为此使用 web 视图并仅在 UIWebView 中打开 safari，现在您只需为其添加导航栏即可导航到您的应用程序。

使用下面的代码：

```
 MKCoordinateRegion region = { {0.0, 0.0 }, { 0.0, 0.0 } };
    region.center.latitude = getLatitude;
    region.center.longitude = getLongitude;

    MKCoordinateRegion currentRegion = { {0.0, 0.0 }, { 0.0, 0.0 } };
    currentRegion.center.latitude = currentLatitude;
    currentRegion.center.longitude = currentLongitude;
    region.span.longitudeDelta = 4.0f;
    region.span.latitudeDelta = 4.0f;
    currentRegion.span.longitudeDelta = 4.0f;
    currentRegion.span.latitudeDelta = 4.0f;

    CLLocationCoordinate2D start = { currentRegion.center.latitude, currentRegion.center.longitude };
    CLLocationCoordinate2D destination = { region.center.latitude, region.center.longitude };

    NSString *googleMapsURLString = [NSString stringWithFormat:@"http://maps.google.com/?saddr=%1.6f,%1.6f&daddr=%1.6f,%1.6f",start.latitude, start.longitude, destination.latitude, destination.longitude];

    NSURL *url=[NSURL URLWithString:googleMapsURLString];
    NSURLRequest *requestObj=[NSURLRequest requestWithURL:url];
    [webView loadRequest:requestObj]; 
```

# c++ - Eclipse：std 符号无法解析，Mac OSX 10.7

> ID：13208424
> 
> 赞同：2
> 
> 时间：2012-11-03T10:46:32.267
> 
> 标签：c++, eclipse, gcc, std, toolchain

我正在尝试启动并运行我的 Eclipse 编辑器，但是每当我尝试创建一个空项目时都会出现此错误：无法解析符号“std”

当我创建“Hello World C++ 项目”时没有错误，但是当我创建一个空项目时出现此错误。

我查看了包含文件、符号和路径选项以及其他一些地方。我找不到这两个项目之间的任何区别。我尝试将工作项目中的设置导出到当前项目中，但它不起作用。我安装了最新版本的 XCode (4.5.1)。对于我的工具链，我选择了 MacOSX GCC。

我的代码再简单不过了：

```
#include <iostream>
using namespace std;

int main()
{
    return 0;
} 
```

我检查了其他几个问题，但没有一个问题能帮助我解决我的问题。非常感谢所有帮助。

# sql - SQL如何避免在表中重复插入

> ID：13208427
> 
> 赞同：1
> 
> 时间：2012-11-03T10:46:53.607
> 
> 标签：sql

如何避免在表中重复插入？我使用下面的查询插入到表中：

```
insert into RefundDetails(ID,StatusModified,RefundAmount,OrderNumber) 
  select O.id,O.StatusModified,OI.RefundAmount,O.OrderNumber 
  from Monsoon.dbo.[Order] as O  
  WITH (NOLOCK) JOIN Monsoon.dbo.OrderItem as OI  
  WITH (NOLOCK)on O.Id = OI.OrderId 
  WHERE o.ID in (SELECT OrderID 
                 FROM Mon2QB.dbo.monQB_OrderActivityView 
                 WHERE ACTIVITYTYPE = 4 AND at BETWEEN '10/30/2012' AND '11/3/2012') AND (O.StatusModified < '11/3/2012') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T10:56:59.957

您可以创建将值插入表中的过程。

```
create procedure p_insert_tablename
columname datatype,
coluname datatype
begin
if exists(select 1 from tblname where [give the condition on which you cols value you dont want the duplicate value])
/*if true then update the value by update query using the condition */
/*dont forget to give condition in update query*/

else

/*insert the value*/
exit 
```

调用程序

```
exec p_insert_tablename col1, col2,... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:53:18.440

使用 DISTINCT 关键字从您的选择语句中删除重复项

```
insert into RefundDetails
(ID,StatusModified,RefundAmount,OrderNumber) 
select distinct
 O.id
,O.StatusModified
,OI.RefundAmount
,O.OrderNumber 
from Monsoon.dbo.[Order] as O WITH (NOLOCK) 
JOIN Monsoon.dbo.OrderItem as OI WITH (NOLOCK)
    on O.Id = OI.OrderId 
WHERE o.ID in 
(
    SELECT OrderID 
    FROM Mon2QB.dbo.monQB_OrderActivityView 
    WHERE ACTIVITYTYPE = 4 
    AND at BETWEEN '10/30/2012' AND '11/3/2012'
) 
AND O.StatusModified < '11/3/2012' 
```

或者如果您担心表已经包含一些值，请指定仅插入新条目尚未存在的位置：

```
insert into RefundDetails
(ID,StatusModified,RefundAmount,OrderNumber) 
select distinct
 O.id
,O.StatusModified
,OI.RefundAmount
,O.OrderNumber 
from Monsoon.dbo.[Order] as O WITH (NOLOCK) 
JOIN Monsoon.dbo.OrderItem as OI WITH (NOLOCK)
    on O.Id = OI.OrderId 
WHERE o.ID in 
(
    SELECT OrderID 
    FROM Mon2QB.dbo.monQB_OrderActivityView 
    WHERE ACTIVITYTYPE = 4 
    AND at BETWEEN '10/30/2012' AND '11/3/2012'
) 
AND O.StatusModified < '11/3/2012'

--assuming we just need to check o.id to determine a duplicate:
and O.id not in 
(
    select o.id
    from RefundDetails
)

--alternatively, if the entire record counts as a duplicate
and not exists
(
    select top 1 1 
    from RefundDetails b
    where O.id = b.id
    and O.StatusModified = b.StatusModified
    and OI.RefundAmount = b.RefundAmound
    and O.OrderNumber = b.Order Number 
```

最后，如果您想要更高级的东西（即允许您插入新订单并更新现有订单），并且如果您使用 SQL 或 Oracle，则可以使用 MERGE 语句：http: [//blog.sqlauthority.com/2008 /08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/](http://blog.sqlauthority.com/2008/08/28/sql-server-2008-introduction-to-merge-statement-one-statement-for-insert-update-delete/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T14:52:42.610

```
To ignore (with a warning) attempts to insert duplicate keys rather than raising an error and having the whole statement fail you can use the IGNORE_DUP_KEY option.

  CREATE TABLE RefundDetails
  (
   ID INT NOT NULL PRIMARY KEY NONCLUSTERED WITH (IGNORE_DUP_KEY = ON),
   ...
   --your columns  
   ) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T10:52:56.100

取决于您使用的数据库，但您不是在寻找类似 rownum < 2 的东西，它返回最上面的行吗？

# c - 将指针传递给函数会导致读取 C 中的不可访问地址

> ID：13208439
> 
> 赞同：0
> 
> 时间：2012-11-03T10:49:09.457
> 
> 标签：c, pointers, malloc

我有一个程序，在那里，我使用 malloc 动态分配内存；这是重要的部分：

```
unsigned int *hours;
unsigned int *minutes;
hours = (unsigned int *) malloc(n * sizeof(*hours));
minutes = (unsigned int *) malloc(n * sizeof(*minutes)); 
```

在此之后，我有一个 for 循环，循环 n 次；每次读取时间并在 hours[i] 存储小时，在 minutes[i] 存储分钟； `for (i = 0; i < n; i++)`

我在分配之前阅读了 n ：

```
scanf(%d, &n); 
```

接下来，我有一个函数，它需要 3 个参数，它看起来像这样：

```
void convertToMinutes(unsigned int *hours[],unsigned int *minutes[],int n)
{
     unsigned int i;
     for (i = 0; i < n; i++)
     {
         *minutes[i] =*hours[i]*60 + *minutes[i];
     }
} 
```

这是导致程序崩溃的部分。我正在使用 Dr. Memory 看看会发生什么，这里是转储：

```
Error #1: UNADDRESSABLE ACCESS: reading 0x00000005-0x00000009 4 byte(s)
# 0 convertToMinutes    
# 1 main                
Note: @0:00:11.408 in thread 1740
Note: instruction: mov    (%eax) -> %ecx 
```

如您所见，它尝试读取 0x00000005 处的地址，这导致 Windows 将其关闭。

所以在调用这个函数之前，我查看了小时和分钟数组的地址，这是我发现的：

```
for n = 3
hours base 10948584
hours+1    10948588
hours+2    19848592
minutes base 10948608
minutes+1    10948612
minutes+2    10948616 
```

（地址转换为 int）

我迷路了。我不知道出了什么问题。指针对我来说是新的（我已经使用它们几天了），我不知道为什么它突然试图在禁止的地址读取。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T10:54:57.847

此函数签名接受的参数是`pointer`unsigned int的数组

```
void convertToMinutes(unsigned int *hours[],unsigned int *minutes[],int n) 
```

但是您的数组是`unsigned int`not的数组`unsigned int *`。尝试将其更改为

```
 void convertToMinutes(unsigned int hours[],unsigned int minutes[],int n) 
```

或（因为数组参数无论如何都会衰减为指针）甚至

```
void convertToMinutes(unsigned int* hours,unsigned int* minutes,int n) 
```

函数内部删除取消引用并更改为：

```
 for (i = 0; i < n; i++)
 {
     minutes[i] = hours[i]*60 + minutes[i];
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:01:26.313

我猜你打算使用`hours`和`minutes`作为整数数组。在这种情况下，您的分配应该类似于

```
hours = (unsigned int *) malloc(n * sizeof(hours)); 
```

但这绝对不会导致崩溃。我认为问题在于您将参数传递给函数并访问它们的方式。

以下可能是您想要做的。

```
void convertToMinutes(unsigned int *hours,unsigned int *minutes,int n)
{
     unsigned int i;
     for (i = 0; i < n; i++)
     {
         *(minutes+i) =*(hours+i)*60 + *(minutes+i);
     }
} 
```

对于数组 arr[4] 将等于 *(arr+4) 你可以在[这里](http://pw1.netcom.com/~tjensen/ptr/ch2x.htm)阅读。

# c# - 遍历 Obex 目录中的每个文件夹

> ID：13208440
> 
> 赞同：0
> 
> 时间：2012-11-03T10:49:15.423
> 
> 标签：c#, obex

我正在winforms中开发一个文件传输应用程序，我想添加一个下载文件夹的功能，到目前为止我能够实现文件夹的上传，因为这个过程是在客户端完成的，但是下载是不同的故事，顺便说一句，我正在使用 C# 和 brecham.obex 库。

```
 public void UploadFolder(string directory)
        {
            string[] directoryArray = Directory.GetDirectories(directory);

            if (directoryArray.Length != 0)
            {
                UploadDelegate up = delegate(string d)
                {
                    DirectoryInfo directoryInfo = new DirectoryInfo(d);
                    FileInfo[] fileInfo = directoryInfo.GetFiles();
                    string substr = parentFolder;
                    string di = directoryInfo.FullName;

                    int start = di.IndexOf(parentFolder);
                    string result = di.Substring(start);

                    session.SetPath(BackupFirst.DoNot, result, IfFolderDoesNotExist.Create);

                    foreach (FileInfo fi in fileInfo)
                    {

                        session.PutFile(fi.FullName);
                    }
                };
                up(directory);
                foreach (var dir in directoryArray)
                {
                    up(dir);
                    UploadFolder(dir);
                }
            }
        }

        private void toolStripMenuItem1_Click(object sender, EventArgs e)
        {
            FolderBrowserDialog folderbrowse = new FolderBrowserDialog();
            string folderName;
            if (folderbrowse.ShowDialog() == DialogResult.OK)
            {

                startPath = folderbrowse.SelectedPath;
                DirectoryInfo info = new DirectoryInfo(startPath);
                DirectoryInfo folder = new DirectoryInfo(startPath);
                folderName = folder.Name;
                parentFolder = "\\" + folderName;
                bgWorker.RunWorkerAsync();
            }
        }

        private void bgWorker_DoWork(object sender, DoWorkEventArgs e)
        {
            UploadFolder(startPath);

        }

        private void bgWorker_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
        {
            session.SetPathReset();
            RefreshFolder();
        } 
```

# symfony - 根据保存的用户名条目将值保存在数据库字段中

> ID：13208444
> 
> 赞同：1
> 
> 时间：2012-11-03T10:49:18.513
> 
> 标签：symfony, doctrine, fosuserbundle, symfony-sonata, sonata-admin

我在我的 symphony2 安装（2.1.2）上安装了 sonata-admin、sonata-user 和 forsuser 一切正常。我可以创建一个用户，也可以登录到它。

然后我向我的实体/用户类添加了一个附加字段，该字段应由需要输入的用户名作为导入的方法填充。（许可证领域）。

我现在的问题是，我不知道该怎么做。我还创建了自己的 userAdmin 类来创建表单。

但是我尝试的一切我都不知道或不知道如何实现上述方面。这个想法是在表单中输入用户，在按钮创建用户之后应该调用一个方法，该方法获取用户名并返回应该存储在数据库中的值。

有人可以帮我解决问题并给我一些提示来确定我必须在哪里更改某些东西，我必须在哪里存储我的方法手如何调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:40:52.870

我不完全理解您的问题，但看起来您可以使用 Sonata 的[保存挂钩](http://sonata-project.org/bundles/admin/master/doc/reference/saving_hooks.html)来解决它。

# text - Hadoop Mapreduce：TextInputFormat 和处理线？

> ID：13208445
> 
> 赞同：0
> 
> 时间：2012-11-03T10:49:24.080
> 
> 标签：text, hadoop, mapreduce, line, textinput

我不确定我是否理解 TextInputFormat 的工作方式。在文档中它说：

> 纯文本文件的 InputFormat。文件被分成几行。

所以我假设当我简单地将我作为 map 函数的输入的值转换为 String 时，我的文件中会有一行的 String 表示。

```
 public void map(LongWritable key, Text value, Context context) throws IOException, InterruptedException {

    String line = value.toString(); \\ one line of my input file?
    ...

    } 
```

但是，在进一步处理该行后，事实证明它实际上不是我文件中的一行。我的文件 city.dat 如下所示：

```
Andorra la Vella|ad|Andorra la Vella|20430|42.51|1.51
Canillo|ad|Canillo|3292|42.57|1.6
... 
```

谁能告诉我如何在我的地图函数中处理这个文件的行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T18:41:19.983

TextInputFormat 用作纯文本文件的 InputFormat。文件被分成几行。换行或回车用于表示行结束。键是文件中的位置，值是文本行。如果在您的情况下，行尾不是换行符或回车，您必须编写自己的 InputFormat。

看看这个博客点没有。3 它肯定会在行尾分解行。 [http://blog.cloudera.com/blog/2011/01/lessons-learned-from-clouderas-hadoop-developer-training-course/](http://blog.cloudera.com/blog/2011/01/lessons-learned-from-clouderas-hadoop-developer-training-course/)

我建议通过在 UltraEdit 等 TextEditor 中打开文件来检查你的文件，然后检查换行符。

看看有没有帮助。

# ruby-on-rails-3 - 没有设备的omniauth（linkedin） - 如何使用验证消息重定向到“新”？

> ID：13208449
> 
> 赞同：2
> 
> 时间：2012-11-03T10:49:41.960
> 
> 标签：ruby-on-rails-3, omniauth, linkedin

我希望用户能够通过其他服务（链接、facebook、google 和 twitter）进行连接，而无需填写另一个密码。

我一直在关注 railscast.com 令人惊叹的 235 和 236 集，它们很好地解释了如何将 OmniAuth 与 Devise gem 一起使用。

我没有使用让我感到困惑的设计，而且我无法让它像在视频广播中那样工作。

我尝试按照 Ryan Bates 的指示并适应我的情况。我无法按照他在 no236 视频第 10 分钟的指示进行操作，他在其中覆盖了 Devise 的注册控制器和视图。

所以当没有用户登录并且没有可用的omniauth身份验证时，我的问题就会发生。在这种情况下，我需要创建一个新用户、保存、登录并最终重定向。

如果验证后保存失败，我需要重定向到带有验证错误的用户新表单。

我确实设法重定向到新的用户表单，但我没有设法得到验证错误。

CODE 认证控制器

```
def create
  omniauth = request.env["omniauth.auth"] 
  #current_user = find_current_user
  authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
  if authentication
    flash[:notice] = "Signed in successfully."
    login_and_redirect(authentication.user)
  elsif @current_user 
    @current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'])
    flash[:notice] = "Authentication successful."
    redirect_to authentications_url
  else
    user = User.new
    puts "OmniAuth: " + omniauth[:info].to_s
    user.apply_omniauth(omniauth)

    if user.save
      flash[:notice] = "Signed in successfully."
      login_and_redirect(user)
    else
      flash[:notice] = "Omniauth Extra."
      session[:omniauth] = omniauth.except('extra')
      user.valid?
      #redirect_to :controller => :users, :action => :new, :plan => 2
      redirect_to new_user_url
    end
  end 
end 
```

问题

问题 1：如何使用omniauth 用户信息和错误消息通过预先填写的表单重定向到新用户？

问题 2：在使用其他服务进行身份验证时，如何在我的非设计模型中跳过验证？

用户型号

```
class User < ActiveRecord::Base

  has_many :authentications
  belongs_to :type, :class_name => "UserType", :foreign_key => "type_id"
  has_many :logins, :class_name => "UserLogin"

  validates :email_address, :email => { :message => 'format is incorrect!' }

  validates_presence_of :email_address, :pseudo, :type_id
  validates_uniqueness_of :email_address, :message => "has already been taken"
  validates_uniqueness_of :pseudo, :message => "has already been taken"

  attr_accessor :password_confirmation
  validates_confirmation_of :password

  validate :password_non_blank, :message => "Cannot use blank password!"

  validates :agreed_terms_of_services, :presence => true, :allow_nil => false

  attr_protected :password_hash, :password_salt, :active, :activation_token, :activated_at

  ...

  ...
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:52:01.323

为了解决问题 1，我在 Authentications 控制器中创建了一个新方法。我将其命名为 new_user_apply_omniauth

```
def new_user_apply_omniauth
  @user = User.new
  @user.apply_omniauth(session[:omniauth])
  @user.valid?
end 
```

然后我复制了用户新视图（new.html.erb）并将其复制到我的 new_user_apply_omniauth.html.erb

要回答问题 2，我使用了条件验证，请观看这​​个出色的 railscast：[http: //railscasts.com/episodes/41-conditional-validations](http://railscasts.com/episodes/41-conditional-validations)

# c++ - 为什么 Bitsets 是通过模板参数实现的

> ID：13208454
> 
> 赞同：1
> 
> 时间：2012-11-03T10:50:02.940
> 
> 标签：c++, templates, stl, bitset

我知道无法动态分配位集，因为它们基于模板参数。但是为什么要以这种方式实现位集？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T10:59:53.873

这样做是为了确保位集具有尽可能接近无符号整数的特征（否则，它被广泛用于表示位集）。其中之一，负责作为模板参数的大小是没有隐式动态内存分配的要求。

对于动态大小比其他特征更重要的情况，可以使用[boost dynamic_bitset](http://www.boost.org/doc/libs/1_50_0/libs/dynamic_bitset/dynamic_bitset.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:52:36.327

效率？因为它是一个常见的用例？如果您想要动态位集，请考虑`vector<bool>`. 它甚至还定义了一些位操作。但请先阅读[此](https://stackoverflow.com/questions/670308/alternative-to-vectorbool)内容。

# c# - 在 ComboBox 中只允许不同的值

> ID：13208457
> 
> 赞同：5
> 
> 时间：2012-11-03T10:50:24.533
> 
> 标签：c#, winforms

在我的项目中，我试图`ComboBox`从`DataSet`. 我成功填充，但其中的值`ComboBox`并不明显（因为它显示了 中存在的值`DataSet`）。我无法绑定到`ComboBox`，`DataSet`因为我在填充值时首先添加了“选择”文本。

```
ComboBox --> cmb
DataSet --> ds
DataSet Column Name --> value(string) 
```

* * *

这是我的代码：

```
cmb.Items.Clear();
cmb.Items.Add("Select");
for (int intCount = 0; intCount < ds.Tables[0].Rows.Count; intCount++)
{
    cmb.Items.Add(ds.Tables[0].Rows[intCount][value].ToString());
}
cmb.SelectedIndex = 0; 
```

我将如何在 ? 中允许不同的值（或限制重复的值）`ComboBox`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T10:56:52.027

```
for (int intCount = 0; intCount < ds.Tables[0].Rows.Count; intCount++)
{
     var val=ds.Tables[0].Rows[intCount][value].ToString();

     //check if it already exists
     if(!cmb.Items.Contains(val))
     {
            cmb.Items.Add(val);
     }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T10:55:52.800

你可以试试：

```
cmb.Items.Clear();
cmb.Items.Add("Select");
cmb.Items.AddRange(dds.Tables[0].AsEnumerable()
                           .Select(x=>x[value].ToString())
                           .Distinct()); 
```

*   它使用 linq 选择值，应用[Distinct()](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.distinct.aspx)选择唯一值
*   如果要对值进行排序，可以应用[OrderBy 。](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.orderby.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T10:55:57.637

```
for(int i = 0; i < cmb.Items.Count; i++)
{
    for(int y = 0; y < cmb.Items.Count; y++)
    {
         if( y != i && cmb.Items[i].Text == cmb.Items[y].Text)
         {
              cmb.Items.RemoveAt(i);
              break;
         }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T10:55:30.920

您仍然可以绑定数据集。绑定后将选择项添加到您想要的索引位置的组合框中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-03T10:59:50.397

**在 Datatable 中获取 Disct 值，然后填充组合：**

```
DataView dvw = new DataView(ds.Tables[0]);
DataTable table = dvw.ToTable(true, value);

cmb.Items.Clear();
cmb.Items.Add("Select");
for (int intCount = 0; intCount < table.Rows.Count; intCount++)
{
    cmb.Items.Add(table.Rows[intCount][value].ToString());
}
cmb.SelectedIndex = 0; 
```

# c# - 无法在动态单选按钮单击时在组合框中添加不同的项目

> ID：13208461
> 
> 赞同：1
> 
> 时间：2012-11-03T10:51:07.610
> 
> 标签：c#, wpf, xaml, dynamic, mvvm

我正在我的 wpf 应用程序中处理单选按钮和组合框。虽然我是一名 C++ 开发人员，但我最近转向了 C#。我的应用程序处理上述组件的动态生成。基本上我在我的应用程序中创建了 4 个动态单选按钮，单击每个按钮时，我应该将不同的项目添加到我的组合框中。这是代码：

XAML：

```
<ItemsControl ItemsSource="{Binding Children}">
            <ItemsControl.ItemTemplate>
                <DataTemplate>
                    <StackPanel Orientation="Vertical" >
                        <RadioButton Content="{Binding RadioBase}"  Margin="0,10,0,0"  IsChecked="{Binding BaseCheck}" GroupName="SlotGroup"  Height="15" Width="80" HorizontalAlignment="Center" VerticalAlignment="Center"/>                            
                    </StackPanel>
                </DataTemplate>
            </ItemsControl.ItemTemplate>
        </ItemsControl>

<ComboBox Visibility="{Binding IsRegisterItemsVisible}" ItemsSource="{Binding RegComboList}" SelectedItem="{Binding SelectedRegComboList, Mode=TwoWay}" SelectedIndex="0" /> 
```

FPGARadioWidgetViewModel 类：

```
public ObservableCollection<FPGAViewModel> Children { get; set; }

    public FPGARadioWidgetViewModel()
    {
        Children = new ObservableCollection<FPGAViewModel>();
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x0", ID = 0 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x40", ID = 1 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0x80", ID = 2 });
        Children.Add(new FPGAViewModel() { RadioBase = "Base 0xc0", ID = 3 });            
    } 
```

FPGAViewModel 类：

```
private bool sBaseCheck;
    public bool BaseCheck
    {
        get { return this.sBaseCheck; }
        set
        {
            this.sBaseCheck = value;                
            AddComboItems();
            this.OnPropertyChanged("BaseCheck");
        }
    }    

private ObservableCollection<string> _RegComboList;
    public ObservableCollection<string> RegComboList
    {
        get { return _RegComboList; }
        set
        {
            _RegComboList = value;
            OnPropertyChanged("RegComboList");
        }
    }        

private void AddComboItems()
    {
        int baseRegister = 0x40 * ID;
        ObservableCollection<string> combo = new ObservableCollection<string>();            

        for (int i = 0; i < 0x40; i++)
        {
            int reg = (i * 8) + baseRegister;
            combo[i] = "0x" + reg.ToString("X");
        }

        RegComboList = new ObservableCollection<String>(combo);
        OnPropertyChanged("RegComboList");
    }

private bool isRegisterItemsVisible = false;
    public bool IsRegisterItemsVisible
    {
        get { return isRegisterItemsVisible; }
        set
        {
            isRegisterItemsVisible = value;
            OnPropertyChanged("IsRegisterItemsVisible");                
            OnPropertyChanged("RegComboList");
        }
    } 
```

如果您注意到，在单击特定单选按钮时，它应该根据 ID 在组合框中添加具有不同值的项目。必须确保在单击任何单选按钮时，仅应添加该项目，并且应清除组合框的先前内容。我正在尝试使用上面的代码做同样的事情，但是当我调试时，组合框中似乎没有出现任何内容。

请帮忙 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T03:06:20.717

我会将您的 ComboBox 的 ItemsSource 与选定的 RadioButton 相关联。从您现有的模型中，我会让每个`FPGAViewModel`人都拥有`ObservableCollection<string>`您所做的。然后，正如 Alex Curtis 所说，您将在选定的单选按钮和组合框的 ItemsSource 之间创建一个绑定。

看看[这篇](https://stackoverflow.com/questions/5891924/wpf-mvvm-radio-buttons-on-itemscontrol)文章，通过将 ItemsControl 更改为使用带有现有 DataTemplate 的 ListBox 可能更容易获得选定的单选按钮。然后，您可以将 IsChecked 属性绑定到 ListBoxItem.IsSelected。

```
 <ListBox ItemsSource="{Binding Children}" SelectedItem="{Binding YourSelectedItem}">
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Orientation="Vertical" >
                            <RadioButton Content="{Binding RadioBase}"  Margin="0,10,0,0"  GroupName="SlotGroup"  Height="15" Width="80" HorizontalAlignment="Center" VerticalAlignment="Center">
                                <RadioButton.IsChecked>
                                    <Binding Path="IsSelected"
                                     RelativeSource="{RelativeSource AncestorType=ListBoxItem}" Mode="TwoWay" />
                                </RadioButton.IsChecked>
                            </RadioButton>                            
                        </StackPanel>
                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox>

<ComboBox Visibility="{Binding YourSelectedItem.IsRegisterItemsVisible}" ItemsSource="{Binding YourSelectedItem.RegComboList}" SelectedItem="{Binding YourSelectedItem.SelectedRegComboList, Mode=TwoWay}" SelectedIndex="0" /> 
```

然后在包含 Children 集合的 ViewModel 中，您需要有一个：

```
 private FPGAViewModel _yourSelectedItem;

    public FPGAViewModel YourSelectedItem
    {
        get { return _yourSelectedItem; }
        set { _yourSelectedItem = value;
        OnPropertyChanged("YourSelectedItem");}
    } 
```

要填充您的项目，我将更改构造函数`FPGAViewModel`以接受 Base 和 ID 作为参数，以便您可以`AddComboItems()`在构造函数中调用。

```
public FPGAViewModel(string radioBase, int id)
{
    RadioBase = radioBase;
    ID = id;
    AddComboItems();
} 
```

现在

```
Children.Add(new FPGAViewModel() { RadioBase = "Base 0x0", ID = 0 }); 
```

应该成为

```
Children.Add(new FPGAViewModel("Base 0x0", 0)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:09:17.970

那是因为组合框已绑定到不同的字符串引用。每次单选单击都会更改项目并返回对列表的*新*引用。尝试通过删除其中的现有项目来重用当前 RegComboList，然后添加新项目。如果更新组合框失败，请以两种方式绑定到 RegComboList。

**编辑**：这是一个工作示例.Net 4.5，不用担心概念是一样的。

这里的组合框最初加载了 5 个单词。然后，每次用户单击按钮时，都会将一组新单词放入列表中，从而更改组合框。*请注意为集合完成的清除操作。*

图片是在初始“Lorem Ipsum”加载之后......

![第二次运行，它经过 Lorem Ipsum](../Images/dd1f09ed6699c94f9165c6b6f6a51017.png)

```
<Window x:Class="WPFCombo.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="50*" />
            <RowDefinition Height="50*" />
            <RowDefinition Height="172*" />
        </Grid.RowDefinitions>
        <Button Content="Button"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Width="75"
                Click="Button_Click_1" />
        <ComboBox HorizontalAlignment="Center"
                  Grid.Row="1"
                  ItemsSource="{Binding RegComboList}"
                  VerticalAlignment="Center"
                  Width="120" />
    </Grid>
</Window> 
```

背后的代码

```
public partial class MainWindow : Window,  INotifyPropertyChanged
{
    private const string cLorem = @"Lorem ipsum dolor sit amet consectetur adipiscing elit Maecenas
                                   et lacinia nisl Aenean nec aliquet risus Phasellus dui purus 
                                   sollicitudin nec cursus vitae cursus id purus Nam quis risus 
                                   velit Sed aliquam tellus in odio pulvinar tincidunt Sed bibendum mi";

    private int Skip { get; set; }
    private ObservableCollection<string> _RegComboList;
    public event PropertyChangedEventHandler PropertyChanged;

    public ObservableCollection<string> RegComboList
    {
        get { return _RegComboList; }
        set
        {
            _RegComboList = value;
            OnPropertyChanged();
        }
    }

    public MainWindow()
    {
        InitializeComponent();
        RegComboList = new ObservableCollection<string>();
        GenerateWords(5);

        DataContext = this;
    }

    private void GenerateWords(int toTake)
    {
        RegComboList.Clear();

        Regex.Split(cLorem, @"\s+").Skip(Skip)
             .Take(toTake)
             .ToList()
             .ForEach(word => RegComboList.Add( word ));

        Skip += toTake;

    }

    protected virtual void OnPropertyChanged( [CallerMemberName] string propertyName = "" )
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
        {
            handler( this, new PropertyChangedEventArgs( propertyName ) );
        }
    }

    private void Button_Click_1(object sender, RoutedEventArgs e)
    {
        GenerateWords(new Random().Next(1, 10));
    } 
} 
```

# ios - UICollectionView 卡在 reloadData

> ID：13208480
> 
> 赞同：4
> 
> 时间：2012-11-03T10:54:33.270
> 
> 标签：ios, reloaddata, uicollectionview

我遇到了问题，在调用我指定的委托`[UICollectionView reloadData]`之前，它似乎卡住了很长一段时间。`numberOfSectionsInCollectionView`这就是发生的事情：

应用程序以立即可见的 UICollectionView 开始，并`numberOfSectionsInCollectionView`在委托上调用，委托返回空数组（即 0）中的项目数，并立即开始从 Web 服务下载该数组的数据。下载完成后，数据被反序列化并添加到上述数组中，然后在实例`reloadData`上调用。`UICollectionView`这是应用程序似乎停止执行任何操作的地方，并且在 20-30 秒（有时长达一分钟）后，代理会收到对`numberOfSectionsInCollectionView`. 一旦收到此调用，重新加载就会迅速完成。

我相信`reloadData`在它自己的线程中运行，但我尝试在一个单独的线程中启动它，以确保它不是我的任何代码阻塞进程。当它似乎卡住时可以`reloadData`做什么？`reloadData`之间是否有任何`numberOfSectionsInCollectionView`我应该实施的中间委托方法？就 iOS 开发人员而言，我认为这是在重新加载后调用的第一个方法。

如果有人能告诉我可能出了什么问题，那太好了，但我也很感激有关如何调试它的任何提示！

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-03T12:37:13.317

永远不要从后台线程做 UIKit 的事情。因此，请确保在主线程上调用 reloadData，并且不要从后台线程修改后备数组。

# ruby-on-rails - 从 Id 标签中提取数据（红宝石）

> ID：13208482
> 
> 赞同：0
> 
> 时间：2012-11-03T10:54:44.000
> 
> 标签：ruby-on-rails, ruby, erb, mailto

我仍在学习并重新搜索了几个小时的主题。

我视图中的以下代码显示了论坛中的电子邮件地址

```
<form id="user_details" action="<%= request.path %>" method="post" >
<output id="email">
</form> 
```

我想要做的是使电子邮件文本成为超链接（就像 mailto 一样）。我只是不知道正确的语法是什么。

太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:04:51.080

有一个 Rails 助手，mail_to 就是专门用来做这个的……

从这里阅读更多信息。 [http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-mail_to)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:57:38.730

我在输出标签上读了一点，它应该是脚本计算的结果。它并不真正适合您在这里所做的事情。输出标签不是表单标签，因此您的表单不会在输出标签中发布电子邮件地址。但是 - 您正在询问如何将其显示为 mailto 链接。您可以用锚标记替换输出标记：

```
<a href="" id="email"></a> 
```

然后你必须找到用 id 填充字段的脚本，`email`并确保它也用`mailto:email@example.com`. 如果这是 jquery，它将类似于：

```
var updateEmailTag = function(email) {
    $('#email').html(email);
    $('#email').attr('href', 'mailto:' + email );
} 
```

如果您想在服务器端执行此操作，则必须找到电子邮件的来源，然后按照 Aditya Kapoor 的建议使用 mail_to 助手。

# jquery - 在 jQuery 中读取复杂的 JSON

> ID：13208485
> 
> 赞同：0
> 
> 时间：2012-11-03T10:55:22.433
> 
> 标签：jquery

我有以下复杂的 jSON 字符串，它在 jquery 1.8 的 Ajax 调用中返回

```
listCountries({"totalResults":3,"countrynames":[
{"countryName":"Afghanistan","fName":"parks,area, ...","lng":1,"code":"continent"},
{"countryName":"Albenia","fName":"parks,area, ...","lng":2,"code":"continent"},
{"countryName":"Algeria","fName":"parks,area, ...","lng":3,"code":"continent"}
]}); 
```

我想使用这个 JSON 数据填充一个选择框。

我正在做以下事情

```
 $.getJSON(someurl)
            .success(function (data) {
                var list= "";
                for (var i = 0; i < data.countrynames.length; i++) {
                    list += "<option value='" + data.countrynames[i].lng + "'>" + data.countrynames[i].countryName + "</option>";
                }
$("#names").html(list); 
```

但是，该列表不会被填充。任何人都可以提出原因。还有更好的做法来遍历这个 JSON 字符串并填充选择框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T06:12:11.393

服务器没有返回 JSON。它正在返回[JSONP](http://en.wikipedia.org/wiki/JSONP)。JSONP 是您从不同域请求数据时必须采取的额外步骤。

这是 JSON：

```
{"totalResults":3,"countrynames":[
{"countryName":"Afghanistan","fName":"parks,area, ...","lng":1,"code":"continent"},
{"countryName":"Albenia","fName":"parks,area, ...","lng":2,"code":"continent"},
{"countryName":"Algeria","fName":"parks,area, ...","lng":3,"code":"continent"}
]} 
```

您的 AJAX 调用似乎没有请求 JSONP，因此您的服务器代码似乎不正确。一种选择是修复您的服务器代码以返回 JSON。

或者，如果您不能，那么此代码将起作用。

```
$.getJSON(someurl)
    .success(function (data) {
        // remove the listCountries function name, and the two parentheses.  
        // Then convert the string into an object
        data = JSON.parse(data.substr(14, data.length - 16))

        // you forgot the select opening & closing tags
        var list= "<select>";
        for (var i = 0; i < data.countrynames.length; i++) {
            list += "<option value='" + data.countrynames[i].lng + "'>" + data.countrynames[i].countryName + "</option>";
        // you forgot the closing bracket
        }
        list += '</select>';
        $("#names").html(list);
    } 
```

# php - 如何在 OpenCart 中制作一个简单的模块？从 Wordpress 获取最新帖子并在 OpenCart 中显示的示例？

> ID：13208488
> 
> 赞同：24
> 
> 时间：2012-11-03T10:55:31.600
> 
> 标签：php, wordpress, opencart

我是这个论坛的新手，也是 OpenCart 的新手。

我需要有关在 OpenCart 中创建模块的帮助。就我而言，它将从我的 WordPress 安装的每个类别中获取最新的 5 篇文章，并将其显示在我的 OpenCart 商店的主页上。

我已经在同一主机上的同一数据库中安装了 OpenCart 和 WordPress。

有人可以建议我吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-11-04T14:18:18.640

根据您的技能，这可能非常容易。我希望对您的问题投反对票，但我将简要介绍这些步骤，因为这不是 SO 的工作方式。首先是编辑我们的主题文件。由于 OpenCart 是 MVC，我们编辑我们的主题，然后是我们的 PHP... 或 PHP，然后是主题文件.. 反之亦然..

# 指导

1 - 打开`/catalog/view/theme/default/template/common/home.tpl`

在这一行之后：

```
<h1 style="display: none;"><?php echo $heading_title; ?></h1> 
```

添加这个：

```
<?php MyWordPressFunction() ?> 
```

或这个：

```
<div>
    <h2>Latest posts from our blog</h2>
    <?php MyWordPressFunction() ?>
</div> 
```

2 - 打开我们的 PHP 代码，它现在是`home.tpl`页面的代码，这是`/catalog/controller/common/home.php`

在主类和结束`?>`PHP 标记之后的代码底部添加以下内容：

```
// WORDPRESS LATEST POSTS
//#customPHP
// The tag above is so that when you upgrade OpenCart
// Before doing so you need to make sure of all the core
// core changes you made - a unique global comment tag
// is easy to find.

function MyWordPressFunction(){

    // DB
        // GET THE POSTS
        // LIMIT BY 5
        // ORDER BY LATEST POSTS
    $sql=mysql_query("SELECT * FROM `wordpress_db`.`wp_posts` ORDER BY `wp_posts`.`post_date` DESC LIMIT 5");
    while($row = mysql_fetch_array($sql)){

        // VARS (easy to play with in the echo)

        $id=$row["ID"];
        $author=$row["post_author"];
        $date=$row["post_date"];
        $post=$row["post_content"];
        $title=$row["post_title"];

        echo '

            <div id="postID_'.$id.'>

                <h3>'.$title.'</h3>

                <p>'.$post.'</p>

                <p>Posted by '.$author.' on '.$date.'</p>

            </div>

        ';

    }

    // END DB

} 
```

这应该让您了解一些基本的 PHP 函数调用。这是一个让你开始的方向。您可以进一步扩展到链接类别、作者链接等。

顺便说一句，所有这些变量都可以使用，如您在 WP_Posts 表中所见：

```
/*

All these can be used

ID
post_author
post_date
post_date_gmt
post_content 
post_title
post_excerpt
post_status
comment_status
ping_status
post_password
post_name
to_ping
pinged
post_modified
post_modified_gmt
post_content_filtered
post_parent
guid
menu_order
post_type
post_mime_type
comment_count

*/ 
```

# 提示

通常查看 SO 上的整个 OpenCart 过滤器 - 有很多关于编写模块、修改其工作方式和创建自定义页面的文章 - 这些将真正有助于您长时间的调整。上面的代码没有样式或进一步的调整，这是一个指南。

# 进一步阅读和更好的模块类型帖子

**如何将新模块添加到 opencart 管理？**

[如何将新模块添加到 opencart 管理？](https://stackoverflow.com/questions/10971817/how-to-add-new-module-to-opencart-administration/10981636#10981636)

**如何在 opencart 中创建自定义管理页面？**

[如何在 opencart 中创建自定义管理页面？](https://stackoverflow.com/questions/10700761/how-to-create-a-custom-admin-page-in-opencart/10701414#10701414)

**如何让外部页面优惠券/优惠券表格在 OpenCart 中工作？**

[如何让外部页面优惠券/优惠券表格在 OpenCart 中工作？](https://stackoverflow.com/questions/12280666/how-do-i-get-an-external-page-coupon-voucher-form-to-work-in-opencart)

**Opencart - 我如何在产品页面上执行自定义代码？控制器产品上没有模组**

[Opencart - 我如何在产品页面上执行自定义代码？控制器产品上没有模组](https://stackoverflow.com/questions/11847785/opencart-how-i-can-execute-a-custom-code-on-product-page-without-mods-on-cont/11854987#11854987)

**如何在任何页面上显示 OpenCart 上的 SubTotal？**

[如何在任何页面上显示 OpenCart 上的 SubTotal？](https://stackoverflow.com/questions/12095789/how-can-i-display-the-subtotal-on-opencart-on-any-page-i-wa)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T09:03:12.177

感谢 TheBlankBenzKid 提供了非常有用的答案，但我认为这里有一件小事值得添加。如果您确实希望在您的 opencart 商店中显示您的 wordpress 博客，请确保您为您的 wordpress 数据库授予 opencart 数据库用户的正确用户权限，通过 cpanel 完成我的案例。

# php - 如何在jsp中执行我的php代码

> ID：13208490
> 
> 赞同：-1
> 
> 时间：2012-11-03T10:55:34.207
> 
> 标签：php, javascript, jsp, flot

```
<!-- <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> -->
<html>
 <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Flot Examples</title>
    <link href="layout.css" rel="stylesheet" type="text/css">
    <!--[if lte IE 8]><![endif]-->
    <script  type="text/javascript" src="./js/excanvas.min.js"></script>
     <script type="text/javascript" src="./js/jquery.js"></script>
    <script  type="text/javascript" src="./js/jquery.flot.js"></script>
 </head>
    <body>
    <h1>Flot Examples</h1>

    <div id="placeholder" style="width:600px;height:300px;"></div>

    <p>Simple example. </p>
<?php

$server = "localhost";
    $user="harish";
    $password="password";  
    $database = "db";

    $connection = mysql_connect($server,$user,$password);
    $db = mysql_select_db($database,$connection);

query = "SELECT xval,yval FROM flottable";
    $result = mysql_query($query);        

    while($row = mysql_fetch_assoc($result))
    {
        $dataset1[] = array($row['xval'],$row['yval']);
    }

?>

<script type="text/javascript">
$(function () {
    var dataset1 = <?php echo json_encode($dataset1); ?>;

    $.plot($("#placeholder"), [ dataset1 ]);

}); 
/* $(function () {
     var d1 = [];
        for (var i = 0; i < 14; i += 0.5)
            d1.push([i, Math.sin(i)]); 
         $.plot($("#placeholder"), [ d1 ]);     });
 */
 </script>

 </body>
</html> 
```

伙计们，这是我的 jsp 代码，我正在尝试从我的数据库中检索数据并尝试从 3dyas 将其绘制在 FLOTCHART 上$row['yval'] 都正确地从 db 中获取值。但我仍然不知道如果我运行这个 jsp 文件为什么会绘制图表。我想我做错了什么我不知道我也在哪里用谷歌搜索从数据库中获取数据在javascript中，但我也得到了相同的结果，我们应该为此使用php，任何帮助或指导表示赞赏

参考：[通过php从mysql中检索数据来创建flot graph](https://stackoverflow.com/questions/1312302/retrieve-data-from-mysql-by-php-to-create-flot-graph/13201851#13201851)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:08:15.620

我认为您混淆了 JavaScript 和 Java。JSP 是 Java 服务器页面的缩写。Java 和 JavaScript 是完全不同的语言。

您上面显示的代码不包含 Java，仅包含 PHP 和 JavaScript。

.JSP 文件扩展名用于 Java 服务器页面，运行 JavaScript 不需要。JavaScript 可以在 PHP 和 HTML 文件中运行。

# loops - 虽然循环无法正常工作

> ID：13208494
> 
> 赞同：1
> 
> 时间：2012-11-03T10:56:14.773
> 
> 标签：loops, while-loop

在下面的程序中，当程序进入 while 循环时，它停止工作。当我尝试在没有循环的情况下分配值时，它醒了。谁能告诉我问题是什么？我正在使用 Visual Studio 2010。

```
#include <stdio.h>
#include<iostream.h>
#include <conio.h>

using namespace std;
int random(int min,int max);

struct pts
{
    int x;
    int y;
};

int main()
{
    struct pts *p;
    int w = 600,h=400;
    int nmax,kmax,k=0,n=0;

    while(k<5)
    { 
        p[0].x = random(0,h-1);
        p[1].y = random(0,w-1);
        cout << p[0].x << "   " << p[1].y << "\n";
        k++;
     }
     getch();
     return 0;
}

int random(int min,int max)
{
    int n=0;
    n=(rand()%(max-min+1))+min;
    return n;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:00:39.747

`while`循环本身工作正常。只是你在破坏记忆。你的问题是：

```
struct pts *p;
p[0].x = whatever; 
```

`p`没有对有效内存块的干预设置。换句话说，您正在使用一个未定义的指针，因此是未定义的行为，因此所有的赌注都是关闭的。

由于您（当前）似乎只使用`p[0]`and `p[1]`，您可能可以更改：

```
struct pts *p; 
```

到：

```
struct pts p[2]; 
```

当然，如果你想要一个可变结构，你可以使用：

```
struct pts *p = new pts[500]; 
```

当然，用你想要的任何大小替换 500。

* * *

You might also want to consider upgrading to a more recent compiler, `iostream.h` and `conio.h` are anachronisms.

Here's a complete program that shows how to do it, at least until you decide to store things a little more "sanely" inside the loop:

```
#include <iostream>
#include <stdlib.h>

struct pts
{
    int x;
    int y;
};

int random(int min,int max)
{
    int n=0;
    n=(rand()%(max-min+1))+min;
    return n;
}

int main()
{
    struct pts p[2];
    int w = 600,h=400;
    int k=0;

    while(k<5)
    {
        p[0].x = random(0,h-1);
        p[1].y = random(0,w-1);
        std::cout << p[0].x << "   " << p[1].y << "\n";
        k++;
     }
     return 0;
} 
```

A sample run of that gives:

```
183   286
377   115
193   535
186   492
249   421 
```

(and, in fact, will probably *always* give that sequence since you don't call `srand` to set the seed - your numbers may well be different to mine but they'll give you the same sequence every time).

* * *

If you want a better baseline to start with, see:

```
#include <iostream>
#include <stdlib.h>
#include <time.h>

struct pts { int x; int y; };

int random (int min, int max) {
    return (rand() % (max - min + 1)) + min;
}

int main (void) {
    pts *p = new pts[5];
    int w = 600, h = 400;
    int k = 0;

    srand (time (0));
    while (k < 5) {
        p[k].x = random (0, h - 1);
        p[k].y = random (0, w - 1);
        std::cout << p[k].x << "   " << p[k].y << "\n";
        k++;
    }
    delete[] p;
    return 0;
} 
```

This shortens the code a bit by removing unnecessary stuff, and gets rid of your undefined-behaviour problem.

It also initialises the random number generator and populates the array properly.

# android - 运行时 Android 小部件的 java.lang.NoClassDefFoundError

> ID：13208500
> 
> 赞同：0
> 
> 时间：2012-11-03T10:57:13.503
> 
> 标签：android, android-intent, android-widget, appwidgetprovider

在运行 Android 2.3.3 及更早版本的 Android 小部件时遇到问题。

当我在屏幕上安装我的小部件时，会打印此错误：

```
11-03 10:26:31.127: E/AndroidRuntime(404): FATAL EXCEPTION: main
11-03 10:26:31.127: E/AndroidRuntime(404): java.lang.NoClassDefFoundError: com.app.myapp.StackWidgetService
11-03 10:26:31.127: E/AndroidRuntime(404):  at com.app.myapp.StackWidgetProvider.onUpdate(StackWidgetProvider.java:229)
11-03 10:26:31.127: E/AndroidRuntime(404):  at android.appwidget.AppWidgetProvider.onReceive(AppWidgetProvider.java:61)
11-03 10:26:31.127: E/AndroidRuntime(404):  at com.app.mobideals.StackWidgetProvider.onReceive(StackWidgetProvider.java:216)
11-03 10:26:31.127: E/AndroidRuntime(404):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1794)
11-03 10:26:31.127: E/AndroidRuntime(404):  at android.app.ActivityThread.access$2400(ActivityThread.java:117)
11-03 10:26:31.127: E/AndroidRuntime(404):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:981)
11-03 10:26:31.127: E/AndroidRuntime(404):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-03 10:26:31.127: E/AndroidRuntime(404):  at android.os.Looper.loop(Looper.java:123)
11-03 10:26:31.127: E/AndroidRuntime(404):  at android.app.ActivityThread.main(ActivityThread.java:3683)
11-03 10:26:31.127: E/AndroidRuntime(404):  at java.lang.reflect.Method.invokeNative(Native Method)
11-03 10:26:31.127: E/AndroidRuntime(404):  at java.lang.reflect.Method.invoke(Method.java:507)
11-03 10:26:31.127: E/AndroidRuntime(404):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
11-03 10:26:31.127: E/AndroidRuntime(404):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
11-03 10:26:31.127: E/AndroidRuntime(404):  at dalvik.system.NativeStart.main(Native Method) 
```

问题是由于编译器没有到达在 StackWidgetProvider 类的 onUpdate 方法中的这一行执行到 StackWidgetService 类的链接：

```
public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds) {

        // update each of the widgets with the remote adapter
        for (int i = 0; i < appWidgetIds.length; ++i) {

            // Here we setup the intent which points to the StackViewService which will
            // provide the views for this collection.
            Intent intent = new Intent(context, StackWidgetService.class);
            intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID, appWidgetIds[i]); 
```

该小部件适用于其他版本的 Android，如 3.0、4.0 等...

请帮我 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:54:45.270

如果您已将 eclipse 插件更新到 ADT 17，您的解决方案可能在这里：[Android java.lang.NoClassDefFoundError](https://stackoverflow.com/questions/9870995/android-java-lang-noclassdeffounderror)

也看看这里：[http ://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17](http://android.foxykeep.com/dev/how-to-fix-the-classdefnotfounderror-with-adt-17)

# android - 如何在android中获得距离公里？

> ID：13208501
> 
> 赞同：7
> 
> 时间：2012-11-03T10:57:15.047
> 
> 标签：android, distance, google-places-api

我对谷歌地图很陌生，我想计算android中两个地方之间的距离。

为此，我得到了两个位置 lat 和 lag 位置，为此我编写了以下代码：

```
private double getDistance(double lat1, double lat2, double lon1, double lon2) {
    double dLat = Math.toRadians(lat2 - lat1);
    double dLon = Math.toRadians(lon2 - lon1);
    double a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(Math.toRadians(lat1)) * Math.cos(Math.toRadians(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);
    double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
    double temp = 6371 * c;
    temp=temp*0.621;
    return temp;
} 
```

上面的代码不能给出两地之间的准确距离。找到距离的另一种方法是什么，请给我任何建议。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-03T14:35:46.443

@奇拉格帕特尔

```
double distance;
Location locationA = new Location(“Point A”);
locationA.setLatitude(latA);
locationA.setLongitude(lngA);

Location locationB = new Location(“Point B”);
locationB.setLatitude(latB);
locationB.setLongitude(lngB);

// distance = locationA.distanceTo(locationB);   // in meters
distance = locationA.distanceTo(locationB)/1000;   // in km 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-03T11:03:02.680

使用以下代码，您可以找到距离，但您想以公里为单位进行转换。

```
double distance;
Location locationA = new Location("point A");
locationA.setLatitude(latA);
locationA.setLongitude(lngA);

Location locationB = new Location("point B");
locationB.setLatitude(latB);
locationB.setLongitude(lngB);

distance = locationA.distanceTo(locationB); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-11T10:09:17.213

只需使用 Location.distanceTo(Location) 它将为您提供两个不同位置之间的真正距离。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-14T11:36:22.617

使用代码查找距离米到公里和公里到英里

```
Location locationA = new Location(“Point A”);
locationA.setLatitude(latA);
locationA.setLongitude(lngA);

Location locationB = new Location(“Point B”);
locationB.setLatitude(latB);
locationB.setLongitude(lngB);

distance = locationA.distanceTo(locationB);   // in meters
distance = locationA.distanceTo(locationB)/1000;   // in km
distance = locationA.distanceTo(locationB)/1609.344;   // in miles 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-18T07:13:37.313

```
 Location locationA = new Location("Point A");
            locationA.setLatitude(fromLatitude);
            locationA.setLongitude(fromLongitude);

            Location locationB = new Location("point B");
            locationB.setLatitude(toLatitude);
            locationB.setLongitude(toLongitude);

            distance = locationA.distanceTo(locationB); 
```

# java - 使用文件服务 URL 从 blobstore 中删除文件

> ID：13208504
> 
> 赞同：3
> 
> 时间：2012-11-03T10:57:47.153
> 
> 标签：java, google-app-engine, gwt, google-cloud-datastore, blobstore

在我的应用程序（GAE 上的 GWT）中，我们将存储在 blobstore 上的服务 URL 存储在我们的数据库中。当用户选择其中一个文件并单击“删除”时，我们需要从 blobstore 中删除该文件。

这是我们的代码，但它根本没有删除文件：

```
public void remove(String fileURL)
{
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
    String key = getBlobKeyFromURL(fileURL);
    BlobKey blobKey = new BlobKey(key);
    blobstoreService.delete(blobKey);
} 
```

哪里`fileURL`看起来像这样：

```
http://lh6.ggpht.com/d5VC0ywISACeJRiC3zkzaZug-tPsaI_LGt93-e_ATGTCwnGLao4yTWjLVppQ 
```

并且`getBlobKeyFromURL()`会返回最后一个“/”之后的内容，在这个例子中：

```
d5VC0ywISACeJRiC3zkzaZug-tPsaI_LGt93-e_ATGTCwnGLao4yTWjLVppQ 
```

****编辑：* ***似乎 getBlobKeyFromURL() 返回的不是 blobKey。blobKey 是一个不同的字符串，它与`/download?blob-key=`before 一起返回`fileURL`. 所以现在的问题是：**如何从 URL 中获取 blobKey？**

你能建议吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-01T11:45:01.993

无法从服务 URL 派生原始 blobkey。如果这是您想要做的事情，那么我建议您在生成 URL 时将 URL -> BlobKey 映射存储在数据存储中。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-03T13:29:24.367

如果您使用诸如 www.example.com/?name=yourUrlwanttodelete 之类的 URL 参数，以下代码片段将返回 blobkey

```
public class ShowImage extends HttpServlet { private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobs toreService();

public void doGet(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException { doPost(req, res); }

public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException { String par = req.getParameter("name"); if (par != null) { Query query = new Query("__BlobInfo__");

query.addFilter("filename", Query.FilterOperator.EQUAL, req.getParameter("name"));

DatastoreService datastore = DatastoreServiceFactory.getDatas toreService(); PreparedQuery pq = datastore.prepare(query); List<Entity> entList = pq.asList(FetchOptions.Builder.w ithLimit(1)); if (entList.size() > 0) { BlobKey blobKey = new BlobKey(entList.get(0).getKey(). getName()); 
```

# activemq - 设置 ActiveMQ

> ID：13208505
> 
> 赞同：6
> 
> 时间：2012-11-03T10:57:50.190
> 
> 标签：activemq, ubuntu-12.04

我按照教程安装 ActiveMQ [http://servicebus.blogspot.com/2011/02/installing-apache-active-mq-on-ubuntu.html](http://servicebus.blogspot.com/2011/02/installing-apache-active-mq-on-ubuntu.html)

我不太明白教程的这一部分

```
Now, you must create the data/jmx.password and data/jmx.access files 
```

我应该如何解决这个问题？

我尝试通过以下方式运行服务

```
sudo /etc/init.d/activemq start 
```

我得到了这个回应

```
INFO: Loading '/etc/default/activemq'
INFO: Using java '/usr/bin/java'
INFO: Starting - inspect logfiles specified in logging.properties and log4j.properties 
to get details
INFO: changing to user 'activemq' to invoke java
No directory, logging in with HOME=/
INFO: pidfile created : '/opt/activemq/data/activemq-iandjx-GA-MA785GMT-USB3.pid' (pid 
'6092') 
```

但我仍然无法连接到

```
http://localhost:8161 
```

提前致谢。

`sudo apt-get install activemq`我当时也试过

```
activemq 
```

这给了我

```
INFO: Loading '/usr/share/activemq/activemq-options'
INFO: Using java '/usr/lib/jvm/java-6-openjdk//bin/java'
mkdir: missing operand
Try `mkdir --help' for more information.
/usr/bin/activemq: 399: /usr/bin/activemq: /usr/lib/jvm/java-6-openjdk//bin/java -Xms512M -Xmx512M -Dorg.apache.activemq.UseDedicatedTaskRunner=true                -Dactivemq.classpath="/var/lib/activemq/conf;"               -Dactivemq.home="/usr/share/activemq"               -Dactivemq.base="/var/lib/activemq/"               -Dactivemq.conf="/var/lib/activemq/conf"               -Dactivemq.data="/var/lib/activemq/data"                              -jar "/usr/share/activemq/bin/run.jar" : not found
Tasks provided by the sysv init script:
    restart         - stop running instance (if there is one), start new instance
    console         - start broker in foreground, useful for debugging purposes
    status          - check if activemq process is running
    setup           - create the specified configuration file for this init script
                      (see next usage section)

Configuration of this script:
    The configuration of this script can be placed on /etc/default/activemq or /home/iandjx/.activemqrc.
    To use additional configurations for running multiple instances on the same operating system
    rename or symlink script to a name matching to activemq-instance-<INSTANCENAME>.
    This changes the configuration location to /etc/default/activemq-instance-<INSTANCENAME> and
    $HOME/.activemqrc-instance-<INSTANCENAME>. Configuration files in /etc have higher precedence. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:35:51.230

要以交互模式启动服务器，请转到 /bin 并运行`./activemq console`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-04T20:10:15.587

检查 /etc/default/activemq 的这一行并记下用户名和密码：

```
ACTIVEMQ_SUNJMX_CONTROL="--jmxurl service:jmx:rmi:///jndi/rmi://127.0.0.1:1099/j
mxrmi --jmxuser USERNAME --jmxpassword PASSWORD" 
```

您的 jmx.password 文件应包含用户名/密码对

```
USERNAME PASSWORD 
```

您的 jmx.access 文件应包含用户名，后跟 readwrite

```
USERNAME readwrite 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T12:46:46.850

> activemq 启动

应该可以启动它。

> 活动MQ状态

应该告诉服务是否正在运行。

您可能必须运行一次以创建 PID 文件，然后重新运行以使其工作，如此答案中的描述：[Activemq will not start on my Ubuntu VM](https://stackoverflow.com/questions/11231640/activemq-will-not-start-on-my-ubuntu-vm)

如果它正在运行并且您无法连接到 Web 控制台，请检查此其他 Q/A：[ActiveMQ 控制台不可用](https://stackoverflow.com/questions/6947224/activemq-console-not-available/6956587#6956587)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-30T12:55:33.980

**sudo**是必要的。

```
bin$ sudo ./activemq start
bin$ sudo ./activemq status
INFO: Loading '/opt/runtime/apache-activemq-5.11.1/bin/env'
INFO: Using java '/usr/bin/java'
ActiveMQ is running (pid '29887') 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-02-21T10:41:24.023

打开文件 vim /etc/default/activemq 和注释行 #ACTIVEMQ_USER="activemq"

现在转到 apache-activemq 中的 bin 文件夹并使用命令 ./activemq start 运行它

# java - 获取应用程序启动路径

> ID：13208506
> 
> 赞同：1
> 
> 时间：2012-11-03T10:57:55.703
> 
> 标签：java, swing, jar, setup-project

如何获取安装 Swing 应用程序的路径？

我想访问应用程序启动路径。这在 Java Swing 中怎么可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T11:04:10.403

如果您想知道启动应用程序的目录，那么

```
String startDir = System.getProperty("user.dir"); 
```

会成功的。

# objective-c - 下拉时将UITableView Header View展开到弹跳区域

> ID：13208509
> 
> 赞同：11
> 
> 时间：2012-11-03T10:58:30.950
> 
> 标签：objective-c, ios, uitableview

我已经在页眉区域实现了一个 MKMapView，我想将它完全展开到顶部，即使您将表格向下拖动到*反弹区域*- 类似于 Foursquare，请参见示例：

![四方示例](../Images/54c3228ffea10d98e45a42f7bed4254c.png)

我当前的默认标题实现（向下拖动时的灰色反弹区域）

![默认标题](../Images/31cda2a9867112bdcc92feef9c767f75.png)

向下拖动表格时，如何使标题中的地图视图适应顶部的可用标题空间？

我正在使用评论中提到的 UIScrollView 委托，然后按如下方式调整地图视图框架的大小。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGRect frame = worldmap.frame;
    frame.size.height -= scrollView.contentOffset.y;
    worldmap.frame = frame;  
} 
```

...但它的反应并不完全正确并且表现不佳。如何正确设置地图框的新尺寸？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T00:51:13.443

为表格视图实现滚动视图委托。由于它是滚动视图的子类，因此您可以使用滚动视图委托。实现`scrollViewDidScroll`委托，每当它向下滚动时，更改 headerview 的框架并确保 pin 始终位于屏幕的中心。

包含`UIScrollViewDelegate`在.h文件中执行，

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
  //set the frame of MKMapView based on scrollView.contentOffset and make sure the pin is at center of the map view
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:29:10.800

使您的 headerView 框架非常长，然后将地图居中在允许您查看地图底部有趣区域的区域中。

**编辑：** 我注意到 Foursquare 示例中的图钉位于地图中心。这意味着您可能应该使用`UIScrollViewDelegate`to`didScroll`方法并在滚动期间动态更改地图的框架。您还应该在滚动时将地图置于图钉区域的中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-10T03:56:42.047

老问题，但我已经在一个项目中实现了这个。

TableView 标题是一个 MapView，作为额外的奖励，地图也可以移动和缩放。

[https://github.com/danielbowden/DBParallaxMapTableView](https://github.com/danielbowden/DBParallaxMapTableView)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-26T18:59:13.573

我将标题视图的内容放在另一个视图中，我将其限制在标题视图的每一侧。然后使用 IBOutlet 到顶部约束，我只是将它设置为 contentOffset。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    if (_tableView.contentOffset.y < 0) {
        _mapTopConstraint.constant = _tableView.contentOffset.y;
    }
} 
```

# javascript - 在 javascript/jQuery 中检测 ctrl+tab 按键

> ID：13208512
> 
> 赞同：3
> 
> 时间：2012-11-03T10:58:38.890
> 
> 标签：javascript, jquery, onkeypress

我有一个要求，我必须限制用户查看我的网页。在完成页面中的任务之前，不应允许用户按`Ctrl`+ 。`Tab`

有没有办法在 javascript/jQuery 中检测`Ctrl`+`Tab`按键？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T11:04:06.340

此代码将检测 CTRL+Tab：

```
$(document).keydown(function(e) {
    if (e.ctrlKey && e.which == 9) {
        alert("CTRL + TAB Pressed")
    }
}) 
```

但是请注意，CTRL+Tab 功能由浏览器控制，您无法停止它，因为如果您打开了多个选项卡，此小提琴将演示：

[**示例小提琴**](http://jsfiddle.net/hBfCG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:01:57.077

你不能。也就是说，您可以检测击键，但不能阻止切换选项卡的行为。也很幸运，因为这样做的网站会让浏览变得非常痛苦。

它会破坏网络浏览器的目的。如果你需要这样的限制，不要建立一个网站，而是一个桌面应用程序。相反，如果你构建一个浏览器应用程序，让它足够聪明以保存它的状态，这样如果用户先切换到不同的选项卡，他们可以稍后再返回任务并完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T11:02:05.817

检查处理程序中事件的 ctrlKey 属性。

```
$(document).on('keypress','*',function(e){alert(e.ctrlKey);}) 
```

[http://jsfiddle.net/kDdzj/](http://jsfiddle.net/kDdzj/)

你可以发现它，但你无法阻止它。

# c - malloc 无法分配内存 + 不警告

> ID：13208514
> 
> 赞同：0
> 
> 时间：2012-11-03T10:58:43.323
> 
> 标签：c

```
 char *str=NULL;
  strsave(s,str,n+1);
  printf("%s",str-n); 
```

当我 gdb 调试此代码时，我发现 str 值为 0x0，它为空，而且我的代码没有捕获这个失败的内存分配，它不执行 str==NULL perror 代码...任何想法

```
 void strsave(char *s,char *str,int n)
 {
    str=(char *)malloc(sizeof(char)* n);
            if(str==NULL)
                    perror("failed to allocate memory");
    while(*s)
    {
            *str++=*s++;
    }
            *str='\0';
 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T11:02:09.777

您的代码的问题是您将分配内存的指针**分配**给`str`. `str`函数内部是一个局部变量，它位于与调用期间传递给的变量不同的内存地址`strsave`。

为了更改`str`指向的位置，您需要将指针传递给指向 char 的指针以解决此问题。

```
void strsave(char *s,char **str,int n) 
```

另一种选择是返回一个指向新分配的字符串的指针。

但是，最好的解决方案是在调用**之前**分配内存`strsave`并将有效指针传递给`strsave`. 当同一模块/层或函数同时负责特定资源的分配和解除分配时，更容易跟踪内存分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:29:43.327

听说过 C 中按值传递的参数吗？如果没有 - 你应该。

无论如何，分配内存而不将其指针分配给变量（或分配然后“泄漏”，如您的情况） - 严格来说不是错误。是的，这不是一个好习惯，它是资源/内存泄漏。但在某些情况下，这可能是程序员真正想要的。

从编译器的角度来看，调用函数而不将其返回值分配给变量是可以的。

# web-config-transform - 删除匹配定位器的父级

> ID：13208515
> 
> 赞同：5
> 
> 时间：2012-11-03T10:58:47.507
> 
> 标签：web-config-transform

有没有办法根据子属性定位节点？或删除匹配节点的父节点？

我需要运行 web.config 转换以删除以下第二个 <dependentAssembly> ：

```
<runtime>
 <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <!-- Don't want to delete this one -->
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Helpers" publicKeyToken="31bf3856ad364e35"/>
    <bindingRedirect oldVersion="1.0.0.0-2.0.0.0" newVersion="2.0.0.0"/>
  </dependentAssembly>
  <!-- This is the one I want to delete -->
  <dependentAssembly>
    <assemblyIdentity name="Microsoft.VisualStudio.Enterprise.AspNetHelper" publicKeyToken="b03f5f7f11d50a3a" culture="neutral"/>
    <codeBase version="11.0.0.0" href="file:///C:/Program%20Files%20(x86)/Microsoft%20Visual%20Studio%2011.0/Common7/IDE/PrivateAssemblies/Microsoft.VisualStudio.Enterprise.AspNetHelper.DLL"/>
  </dependentAssembly>
 </assemblyBinding>
</runtime> 
```

查找 <assemblyIdentity> 很容易，但我需要删除父 <dependentAssembly>（和 <codeBase>）。如果有一个 "xdt:Transform="RemoveParent" 这可以解决问题，但 AFAIK 没有。

或者，如果我可以在 <dependentAssembly> 上使用一个定位器来匹配孩子，那么它也可以工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-23T16:29:51.650

[在这里](https://stackoverflow.com/questions/12792325/web-config-transforms-the-missing-manual)找到了答案

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly xdt:Transform="RemoveAll"
                     xdt:Locator="Condition(starts-with(./_defaultNamespace:assemblyIdentity/@name,'Microsoft.VisualStudio.Enterprise.AspNetHelper'))">
       </dependentAssembly>
    </assemblyBinding>
 </runtime> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-05T08:44:01.587

您可以使用此解决方案：[Clearing out xdt element if it has no children](https://stackoverflow.com/questions/28592158/clearing-out-xdt-element-if-it-has-no-children)

2 个步骤：-首先删除子项-其次删除空的 assemblyBinding 元素。

# c# - 我应该等待像 MessageDialog 和 Launcher 方法这样的异步调用吗？

> ID：13208517
> 
> 赞同：1
> 
> 时间：2012-11-03T10:59:20.163
> 
> 标签：c#, asynchronous, windows-8, windows-runtime, async-await

Visual Studio 给了我各种关于不要等待我的方法的`MessageDialog.ShowAsync()`警告`Launcher.LaunchUriAsync()`。

它说：

> “考虑应用 await 关键字”

显然我不需要等待他们，但这对他们有好处吗？

等待调用显然会阻塞不好的 UI 线程 - 那么为什么 Visual Studio 会抛出这么多警告呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:20:42.757

> 等待调用显然阻塞了不好的 UI 线程

`await`实际上并没有阻止用户界面。`await`暂停该方法的执行，直到等待的任务完成，然后继续该方法的其余部分。阅读有关[await（C# 参考）](http://msdn.microsoft.com/en-us/library/hh156528.aspx)的更多信息。

> 显然我不需要等待他们，但这对他们有好处吗？

如果不使用`await`，则方法调用`MessageDialog.ShowAsync()`可能在完成之前`MessageDialog.ShowAsync()`完成。你不需要，但这是一个很好的做法。

例如，假设你想下载一个字符串并使用它，而不用等待：

```
async void MyAsyncMethod()
{
    var client = new HttpClient();
    var task = client.GetStringAsync("http://someurl.com/someAction");

    // Here, GetStringAsync() may not be finished when getting the result
    // and it will block the UI thread until GetStringAsync() is completed.
    string result = task.Result;
    textBox1.Text = result; 
} 
```

但是如果我们使用`await`：

```
async void MyAsyncMethod()
{
    var client = new HttpClient();
    string result = await client.GetStringAsync("http://someurl.com/someAction");

    // This method will be suspended at the await operator, 
    // awaiting GetStringAsync() to be completed,
    // without freezing the UI, and then continues this method.

    textBox1.Text = result;
} 
```

# open-source - 用于蛋白质折叠的开源 GPGPU 项目

> ID：13208522
> 
> 赞同：2
> 
> 时间：2012-11-03T11:00:35.987
> 
> 标签：open-source, cuda, opencl, gpgpu, modeling

我正在寻找一个用于蛋白质折叠的开源 GPGPU 项目（CUDA/OpenCL）。你能给我一些建议吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T05:24:51.090

Folding@home 可能是迄今为止最大的基于 GPU 的蛋白质折叠项目。所以你可能会很好地使用他们使用的任何东西：[Folding@home 开源常见问题解答](http://folding.stanford.edu/English/FAQ-OpenSource)。这似乎是 Gromacs 和[OpenMM](https://simtk.org/home/openmm)的自定义版本。

像这样的软件的完整列表在这里：[GPU 上的分子建模](http://en.wikipedia.org/wiki/Molecular_modeling_on_GPUs)。除了 GROMACS/OpenMM 之外，著名的软件包还包括 NAMD（自 1995 年以来一直存在）和 ACEMD。

这些可以分为分子动力学（使用经验势场）、从头算（使用量子力学）和混合。这些都不是蛋白质折叠特异性的，但大多数分子动力学软件包可以处理蛋白质折叠大小的问题。ab-initio 软件包还没有，但正在接近。

# exe - 如何在另一个程序返回true后运行程序

> ID：13208524
> 
> 赞同：0
> 
> 时间：2012-11-03T11:01:02.953
> 
> 标签：exe

我有2个exe文件。**文件 1.exe**和**文件 2.exe**。我需要一个包含前两个文件的**file3.exe 。**当**file3**运行时，**file1**将运行，如果**file1**返回 true，则**file2**将运行。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:06:03.027

如果是`.bat`文件

```
file1.exe
IF NOT ERRORLEVEL 0 GOTO error1
file2.exe
:error1 
```

# django - Django - 表单验证

> ID：13208529
> 
> 赞同：0
> 
> 时间：2012-11-03T11:01:28.757
> 
> 标签：django, django-forms

假设我有一个包含两个字段的类，并且两个字段都是空白的，但我希望至少填写一个字段。

```
class MyClass(models.Model):
   url1 = models.URLField(blank=True)
   url2 = models.URLField(blank=True)

   def clean(self):
      if not self.url1 and not self.url2:
      raise forms.ValidationError('message here')
      return self.url1 
```

我想是因为我将这两个字段设置为空白=真。不知道在这里使用 clean() 是否正确以及从中返回什么。

{{form.non_field_errors}} 中没有显示任何内容

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:21:02.593

您可以`clean()`在表单对象上使用该方法。当前，您尝试不在 Form 对象上而是在数据库模型上进行数据验证。

查看[https://docs.djangoproject.com/en/dev/ref/forms/validation/](https://docs.djangoproject.com/en/dev/ref/forms/validation/)以了解有关表单验证的更多信息。

```
from django.db import models
from django import forms

class MyClass(models.Model):
   "Your model"
   url1 = models.URLField(blank=True)
   url2 = models.URLField(blank=True)

class MyClassForm(forms.ModelForm):
    "Your form object"
    def clean(self):
       if not self.cleaned_data['url1'] and not self.cleaned_data['url2']:
           raise forms.ValidationError('message here')
       return self.cleaned_data

    class Meta:
        model = MyClass 
```

# facebook - Facebook 像群组的盒子

> ID：13208533
> 
> 赞同：1
> 
> 时间：2012-11-03T11:01:51.290
> 
> 标签：facebook

有人可以帮我添加一个 Facebook 喜欢的群组吗？

我试图在 Facebook 页面 URL 中添加组 url：

[https://developers.facebook.com/docs/reference/plugins/like-box/](https://developers.facebook.com/docs/reference/plugins/like-box/)

但我收到以下错误：

> 无法检索指定的页面。请验证正确的 href 是否已传入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:14:24.427

您可以喜欢页面和网站 URL，但不能喜欢群组。就这么简单。您可能只尝试使用公共团体，但我认为它也不起作用。我刚刚试过，如果你使用公共组至少没有错误，你甚至可以点击Like按钮，但它不会出现在Facebook上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-13T13:34:44.530

我同意之前的回复者，您不能为群组添加点赞框，因为他们不收集喜欢，他们收集成员。

# ruby - Ruby：从经过身份验证的 IP CAM 中获取单个 JPG 图像并保存到文件

> ID：13208541
> 
> 赞同：2
> 
> 时间：2012-11-03T11:02:42.570
> 
> 标签：ruby, ip-camera

使用 ruby​​，从需要身份验证的 IP 摄像机中获取单个 JPG 图像并将图像写入文件的最简单方法是什么？例如，使用 URL 的 IP 摄像机：

*http://192.168.69.81/cgi/jpg/image.cgi*

我不需要对图像进行任何操作。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:35:09.063

Open the remote location and write the file as a jpeg image called image.jpg:

```
require 'open-uri'

url = 'http://192.168.69.81/cgi/jpg/image.cgi'

open(url, :http_basic_authentication => ['username', 'password']) do |f|
  open('image.jpg','wb') do |file|
    file.puts f.read
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:46:15.343

你可以试试这个

```
require 'net/http'

Net::HTTP.start(url, port) do |http|
  req = Net::HTTP::Get.new('/image.cgi')
  req.basic_auth 'username', 'password'
  response = http.request(req)
  open("image.cgi", "wb") do |file|
    file.write(response.body)
  end
end 
```

# c++ - #包括 存在，但我收到一个错误：标识符“cout”未定义。为什么？

> ID：13208547
> 
> 赞同：45
> 
> 时间：2012-11-03T11:03:13.390
> 
> 标签：c++, visual-studio, com, visual-studio-2012

我通过书本学习 C++ 和 COM。在 IDE MS Visual Studio 2012 中，我创建了新的空 C++ 项目，并向其中添加了一些现有文件。我的 CPP 文件包含`#include<iostream>`行，但在编辑器中我收到了这样的消息：

> 错误：标识符“cout”未定义

结尾

> 错误：标识符“endl”未定义

代码：

```
#include<iostream>
#include"interfaces.h" // unknown.h, objbase.h, initguid.h

class CA {//: public IX, IY{
public:
    // Constructor
    CA();
    // Destructor
    ~CA();
    // IUnknown
    virtual HRESULT __stdcall QueryInterface(const IID& iid, void** ppv);
    virtual ULONG __stdcall AddRef();
    virtual ULONG __stdcall Release();
    // IX
    virtual void __stdcall Fx1();
    virtual void __stdcall Fx2();
    // IY
    virtual void __stdcall Fy1(){ cout << "Fy1" << endl; }  // errors here
    virtual void __stdcall Fy2(){ cout << "Fy2" << endl; }  // errors here also
private:
    long counter;
}; 
```

为什么会发生？

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-11-03T11:04:17.920

您需要指定`std::`命名空间：

```
std::cout << .... << std::endl;; 
```

或者，您可以使用`using`指令：

```
using std::cout;
using std::endl;

cout << .... << endl; 
```

我应该补充一点，您应该避免`using`在标头中使用这些指令，因为包含这些指令的代码也会将符号带入全局命名空间。将 using 指令限制在小范围内，例如

```
#include <iostream>

inline void foo()
{
  using std::cout;
  using std::endl;
  cout << "Hello world" << endl;
} 
```

在这里，该`using`指令仅适用于`foo()`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2014-02-25T16:03:30.453

您可以在开头添加以下内容`#include <iostream>`：

```
using namespace std; 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-11-03T11:04:31.677

`cout`位于 std 命名空间中，您应`std::cout`在代码中使用。而且你不应该`using namespace std;`在你的头文件中添加，将你的代码与 std 命名空间混合是不好的，特别是不要将它添加到头文件中。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-21T16:17:07.353

问题是您缺少 std 命名空间。`cout`位于 std 命名空间中。在#include 之后
添加`using namespace std;`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-10-31T13:30:41.420

如果您已包含它**`#include iostream`**，**`using namespace std;`**它应该可以工作。如果它仍然不起作用，请确保检查您没有删除 iostream 文件中的任何内容。要找到您的 iostream 文件，只需 Ctrl +单击您的`#include iostream`，它就会带您到该文件。您可以将以下原始 iostream 文件粘贴到您的 iostream 文件中，它应该可以工作。

```
// Standard iostream objects -*- C++ -*-

// Copyright (C) 1997-2019 Free Software Foundation, Inc.
//
// This file is part of the GNU ISO C++ Library.  This library is free
// software; you can redistribute it and/or modify it under the
// terms of the GNU General Public License as published by the
// Free Software Foundation; either version 3, or (at your option)
// any later version.

// This library is distributed in the hope that it will be useful,
// but WITHOUT ANY WARRANTY; without even the implied warranty of
// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
// GNU General Public License for more details.

// Under Section 7 of GPL version 3, you are granted additional
// permissions described in the GCC Runtime Library Exception, version
// 3.1, as published by the Free Software Foundation.

// You should have received a copy of the GNU General Public License and
// a copy of the GCC Runtime Library Exception along with this program;
// see the files COPYING3 and COPYING.RUNTIME respectively.  If not, see
// <http://www.gnu.org/licenses/>.

/** @file include/iostream
 *  This is a Standard C++ Library header.
 */

//
// ISO C++ 14882: 27.3  Standard iostream objects
//

#ifndef _GLIBCXX_IOSTREAM
#define _GLIBCXX_IOSTREAM 1

#pragma GCC system_header

#include <bits/c++config.h>
#include <ostream>
#include <istream>

namespace std _GLIBCXX_VISIBILITY(default)
{
_GLIBCXX_BEGIN_NAMESPACE_VERSION

  /**
   *  @name Standard Stream Objects
   *
   *  The &lt;iostream&gt; header declares the eight <em>standard stream
   *  objects</em>.  For other declarations, see
   *  http://gcc.gnu.org/onlinedocs/libstdc++/manual/io.html
   *  and the @link iosfwd I/O forward declarations @endlink
   *
   *  They are required by default to cooperate with the global C
   *  library's @c FILE streams, and to be available during program
   *  startup and termination. For more information, see the section of the
   *  manual linked to above.
  */
  //@{
  extern istream cin;       /// Linked to standard input
  extern ostream cout;      /// Linked to standard output
  extern ostream cerr;      /// Linked to standard error (unbuffered)
  extern ostream clog;      /// Linked to standard error (buffered)

#ifdef _GLIBCXX_USE_WCHAR_T
  extern wistream wcin;     /// Linked to standard input
  extern wostream wcout;    /// Linked to standard output
  extern wostream wcerr;    /// Linked to standard error (unbuffered)
  extern wostream wclog;    /// Linked to standard error (buffered)
#endif
  //@}

  // For construction of filebuffers for cout, cin, cerr, clog et. al.
  static ios_base::Init __ioinit;

_GLIBCXX_END_NAMESPACE_VERSION
} // namespace

#endif /* _GLIBCXX_IOSTREAM */ 
```

# php - readfile() 有时会在文件结束之前停止

> ID：13208548
> 
> 赞同：0
> 
> 时间：2012-11-03T11:03:16.010
> 
> 标签：php, filesize, readfile

我有一个发送 ZIP 文件的脚本。这是一个 12MB 的大文件，但有时，在极少数情况下，下载会停止在 4MB、5MB、6.5MB（永远不一样）......

```
<?php

$fullpath = 'foobar.zip';

header('Content-Description: File Transfer');
header('Content-Type: application/zip');
header('Content-Disposition: attachment; filename=' . $fullpath);
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate');
header('Pragma: public');
header('Content-Length: '. filesize($fullpath));
ob_clean();
flush();
readfile($fullpath);
exit();

?> 
```

在什么情况下 readfile() 可以在读取所有文件之前停止？还有什么问题吗？

# batch-file - 通过命令行/批处理文件将空白密码传递给 wbadmin（Windows 备份）

> ID：13208549
> 
> 赞同：1
> 
> 时间：2012-11-03T11:03:17.570
> 
> 标签：batch-file, passwords

我有一台 Windows 2008 R2 服务器，需要通过计划任务上的批处理文件执行 Windows 备份。我遇到的问题是备份目标是一个带有用户名但没有密码的 unix 共享驱动器（我没有添加密码的选项，因为它超出了我的控制范围）。因为没有密码，所以脚本在设置为计划任务时停止等待输入密码。我可能会补充一点，如果我手动运行这个脚本，它绝对可以正常工作，奇怪的是，甚至不需要按 Enter 键输入一个空白密码。

我的问题：当批处理文件由它也可以按下/传递“输入”的任务执行时是否可行，就好像它在返回“输入密码”时正在回答命令一样

这是代码 - 为了安全起见，我删除了目标路径和用户名。它是一条 UNC 路径。

wbadmin 开始备份 -backuptarget:DESTINATION -allCritical -include:c: -vssFull -user:USER -quiet

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:05:57.710

你可以试试这个：

```
echo. | wbadmin start backup -backuptarget:DESTINATION -allCritical -include:c: -vssFull -user:USER -quiet 
```

它将通过管道将“输入”输入 wbadmin。

编辑：更改`echo`为`echo.`，只有 echo 会打印“echo is ON/off”

# jsp - 如何将创建的pdf文件保存到jsp项目中创建的特定文件夹

> ID：13208552
> 
> 赞同：1
> 
> 时间：2012-11-03T11:03:35.323
> 
> 标签：jsp

我使用 itext 创建了一个 PDF，并希望保存在目录-/web/HR/employee_report 下创建的文件夹中。我的问题是找到路径。

我得到了通过：

```
ServletContext servletContext = getServletContext();

String contextPath = servletContext.getRealPath("File.separator"); 
```

并将路径存储在字符串中：

```
 String FILE = contextPath+"\\HR\\employee_report\\file1.pdf"; 
```

但结果为零；但是，当我手动将路径更改为

`String FILE = "F:\\\SFC\\\web\\\HR\\\employee_report\\\file1.pdf";`

然后它正在工作。

# c++ - getopt - 捕获“？”

> ID：13208553
> 
> 赞同：0
> 
> 时间：2012-11-03T11:03:48.053
> 
> 标签：c++, getopt

我正在尝试在 C++ 程序中使用 getopt 来解析命令行参数。参数是 -d xxx、-s xxx 和 -?。我无法捕捉到 -? 参数，我想打印一个标准的使用消息。

```
while ((c = getopt (argc, argv, "?d:s:")) != -1) {
    switch (c) {
        case 'd':
          ...do stuff
            break;
        case 's':
         ... do stuff
            break;
        case '?':
          // From example on GNU page, seems to capture -d, -s when no args provided.
          // Gets here when -d or -s provided, but no arguments for these options.
        default:
          // shut down
} 
```

尽我所能，我似乎无法捕捉到“-？” 自行选择。有什么特别的技巧可以捕捉'？在其自己的？我是否为 getopt 提供了正确的模式（即'?d:s:'） 目前，c 被设置为'？每当提供无效选项时，即使是“？” 不在命令行上提供。

多谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T11:07:14.307

`getopt`用作`'?'`特殊值来表示缺少的选项值或未知的选项。所以我认为没有任何方法可以`getopt`用来处理'-？'。

我会推荐“-h”作为帮助信息。这是一个常见的约定。

# ios - urlEncoding 在 iOS 上使用 JSON 失败

> ID：13208560
> 
> 赞同：0
> 
> 时间：2012-11-03T11:04:24.037
> 
> 标签：ios, json, urlencode

我有一个 URL 编码 NSStrings 的简短方法。

```
- (NSString *)urlEncodeValue:(NSString *)strToEncode
{
    NSLog(@"Testing strToEncode: %@", strToEncode);
    NSString *encodedString = (NSString *)CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)strToEncode, NULL, CFSTR(":/?#[]@!$&’()*+,;="), kCFStringEncodingUTF8));
    NSLog(@"Testing strToEncode: %@", strToEncode);
    NSLog(@"Testing urlEncode: %@", encodedString);
    return encodedString;
} 
```

NSLog 行用于调试，当我解决此问题时将被注释掉。

尝试使用字符串 ,`Testing URLencode % "hmm"`可以按预期工作。

```
2012-11-03 06:44:02.140 FoodyU[23223:c07] Testing strToEncode: Testing URLencode % "hmm" 
2012-11-03 06:44:02.141 FoodyU[23223:c07] Testing strToEncode: Testing URLencode % "hmm" 
2012-11-03 06:44:02.142 FoodyU[23223:c07] Testing urlEncode: Testing%20URLencode%20%25%20%22hmm%22%20 
```

尝试使用以下 JSONarray 不会：

```
2012-11-03 06:44:02.142 FoodyU[23223:c07] Testing strToEncode: (
        {
        dataMode = fastUpload;
        dateCreated = "373599360.708794";
        dateModified = "373599414.702938";
        dateSynced = "373632241.82217";
        entityName = CommodityTypes;
        myName = " Commodity Type";
        sortKey = 99;
        username = adamekPhoneDev;
        uuidKey = "338A0507-355F-4DF5-97A4-C0F1FF651D6F";
    },
        {
        dataMode = fastUpload;
        dateCreated = "373599366.851905";
        dateModified = "373599382.473983";
        dateSynced = "373632241.82217";
        entityName = CommodityTypes;
        myName = "Anoth Type";
        sortKey = 90;
        username = adamekPhoneDev;
        uuidKey = "6C64E7C6-4C57-4DFC-BECA-D2AB2339E204";
    }
)
2012-11-03 06:44:02.143 FoodyU[23223:c07] -[__NSArrayM length]: unrecognized selector sent to instance 0x9946ae0
2012-11-03 06:44:02.145 FoodyU[23223:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSArrayM length]: unrecognized selector sent to instance 0x9946ae0'
*** First throw call stack:
(0x1ffb012 0x1690e7e 0x20864bd 0x1feabbc 0x1fea94e 0x1f76090 0x1feba1d 0x284d8 0x28a52 0x251cb 0x21c18 0x219b5 0x6878d5 0x687b3d 0x108ee83 0x1fba376 0x1fb9e06 0x1fa1a82 0x1fa0f44 0x1fa0e1b 0x24267e3 0x2426668 0x5d865c 0x224d 0x2175)
libc++abi.dylib: terminate called throwing an exception 
```

在转换工作之前记录字符串；它是一个格式良好的 JSON 字符串。然后它从内部某处崩溃并显示该错误消息`NSString *encodedString = (NSString *)CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault, (CFStringRef)strToEncode, NULL, CFSTR(":/?#[]@!$&’()*+,;="), kCFStringEncodingUTF8));`

帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:16:36.530

`[__NSArrayM length]: unrecognized selector sent to instance 0x9946ae0`

你把 a放在预期的`NSArray`地方。`NSString`最好先将 JSON 数据序列化为字符串。

无论如何，您为什么要对 JSON 数据进行 URL 编码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:22:40.713

尝试使用这个

```
NSString *encodedString = (NSString *)CFURLCreateStringByAddingPercentEscapes(
                        NULL,
                        (CFStringRef)unencodedString,
                        NULL,
                        (CFStringRef)@"!*'();:@&=+$,/?%#[]",
                        kCFStringEncodingUTF8 ); 
```

# php - Html 选择了 php 的问题

> ID：13208568
> 
> 赞同：1
> 
> 时间：2012-11-03T11:05:05.747
> 
> 标签：php, html

我有一个 html 表单。以下是我的html代码。

如果用户忘记输入其他字段信息，我如何选择公民身份。

例如：用户选择公民身份，输入名字但忘记输入姓氏。然后它会显示一条错误消息“请选择您的姓氏”。但是当它显示错误消息时，所选项目为空。我如何使用 php.ini 选择民用项目。

```
<tr>
   <td width="400">Status</td>
   <td>
      <select name="civil_status">
         <option value="">Select..</option>
         <option value="mr.">Mr.</option>
         <option value="mrs.">Mrs.</option>
         <option value="miss">Miss</option>
      </select>
   </td>
</tr>
<tr>
   <td>Last Name</td>
   <td><input type="text" name="l_name" value="<?php if(isset($_POST['l_name'])) echo 
         $_POST['l_name']; ?>" class="tr2" /></td>
</tr>
<tr>
   <td>First Name</td>
   <td><input type="text" name="f_name" value="<?php if(isset($_POST['f_name'])) echo 
         $_POST['f_name']; ?>" class="tr2" /></td>
</tr> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:11:19.627

我会做：

```
<select name="civil_status">
<option value="">Select..</option>

<?php

$options = array('mr.' => 'Mr.', 'mrs.' => 'Mrs.', 'miss' => 'Miss');

foreach($options as $key => $value){

    if($_POST['civil_status'] == $key){
        echo '<option value="'.$key.'" selected="selected">'.$value.'</option>';
    }else{
        echo '<option value="'.$key.'">'.$value.'</option>';
    }

}

?>

</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:08:35.120

您只需将一个添加`selected="selected"`到相应的`<option>`-Tag。就像是：

```
<option value="">Select..</option>      
<option value="mr." selected="selected">Mr.</option>        
<option value="mrs.">Mrs.</option>
<option value="miss">Miss</option> 
```

这是基于 的值的原因`$_POST['civil_status']`。

**编辑：** 又快又脏：

```
<?php
if (isset($_POST['civil_status'])) $cs = $_POST['civil_status'];
else $cs = '';
?>
<option value="" <? if ($cs=='') echo 'selected="selected"'; ?>>Select..</option>      
<option value="mr." <? if ($cs=='mr.') echo 'selected="selected"'; ?>>Mr.</option>        
<option value="mrs." <? if ($cs=='mrs.') echo 'selected="selected"'; ?>>Mrs.</option>
<option value="miss" <? if ($cs=='miss') echo 'selected="selected"'; ?>>Miss</option> 
```

# php - PDO_MSSQL 和 SQL Server 7

> ID：13208569
> 
> 赞同：4
> 
> 时间：2012-11-03T11:05:09.350
> 
> 标签：php, sql-server, pdo

我在使用 PDO/PHP 与不同服务器上的 sql server 7 建立连接时遇到问题。在 win 2003 32 位/apache/php5.2.5 上一切正常，但是当服务在 win 2008R2 64bit/apache/php5.2.5 上时，我收到未找到服务器。用户/密码正确，防火墙已配置。

我检查，PHP 不使用 1433 端口，但尝试连接 445 和 139 端口。

任何的想法？

斯特凡

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:49:58.653

更新;

您可以使用 PDO ODBC 连接选项：[PHP: PDO_ODBC DSN](http://php.net/manual/en/ref.pdo-odbc.connection.php)。我以前使用此方法从 Win 2003 和 2008 连接到 SQL Server

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T04:56:09.597

在您的 PDO 语句中，第一个参数最好采用以下形式：“mssql:host=xxxx;port=xxxx;dbname=xxxxxxx;” 注意包含端口。

# cuda - 修复 Mac OS X 中的内置 Open MPI 包

> ID：13208571
> 
> 赞同：1
> 
> 时间：2012-11-03T11:05:49.350
> 
> 标签：cuda, mpi, osx-mountain-lion, openmpi, repair

几天前，我尝试编译并制作 CUDA Toolkit 5.0 示例以验证安装。但是，在制作过程中，制作 simpleMPI 样本时出错。在不详细说明的情况下，我假设我需要将 Open MPI 安装到我的主机上。我已经下载了当时的最新版本，例如 openmpi-1.6.2。然后根据我运行的[Open MPI FAQ page](http://www.open-mpi.org/faq/?category=building)

```
 ./configure --prefix=/usr/local
    make all install 
```

但不幸的是，在 make 命令期间出现了错误。我决定深入并弄清楚，Mac OS X 有一个内置的 Open MPI 包。我[为 Mac OS X 用户找到了另一个常见问题解答页面](http://www.open-mpi.org/faq/?category=osx)，并尝试以这种方式在 /opt/openmpi 文件夹中安装 Open MPI

```
 ./configure --prefix=/opt/openmpi 2>&1 | tee config.out
    shell$ make -j 4 2>&1 | tee make.out` 
```

又没有运气了。使失败。在那一刻，我明白我可以跳过 simpleMPI 示例，我就这样做了！

再一次，在不详细说明的情况下，我决定从不必要的文件中清理我的系统，并做了愚蠢的事情`make unistall`而不是`make clean`.

现在，**nvcc**编译器似乎坏了，我需要重新安装或修复内置的 Open MPI 包。

问题是我怎样才能做到这一点？我也有 TimeMachine 备份。

[PS此处](https://stackoverflow.com/questions/13157260/having-open-mpi-related-issues-while-making-cuda-5-0-samples-mac-os-x-ml)描述了 simpleMPI CUDA 示例的问题。如何制作 simpleMPI 示例构建已经有一个明确的答案。

**更新 [2012 年 11 月 3 日 22:09 UTC]**

成功安装 MPICH2 后没有运气。添加到 PATH 的正确值：

```
 vim ~/.bash_profile
    export MPI_DIR=/usr/local/Cellar/mpich2/1.5/
    export PATH=$MPI_DIR/bin:/usr/local/cuda/bin:/Developer/NVIDIA/CUDA-5.0/bin:$PATH
    export LD_LIBRARY_PATH=$MPI_DIR/lib:$LD_LIBRARY_PATH
    export DYLD_LIBRARY_PATH=/usr/local/cuda/lib:$DYLD_LIBRARY_PATH
    export EDITOR=vim 
```

通过终端调用运行 NSight `nsight`。这很重要，因为我试图将 NSight 锁定到 Docks 中。但是从 Dock NSight 运行时找不到 GPU 设备。所以每次我使用终端。

我尝试创建新的 CUDA Runtime C/C++ 项目并简单地运行它。但是 NSight make 每次都以同样的方式失败。这里是：

```
 nvcc -G -g -O0   "src/Simple CUDA RT Proj.o" "../src/Simple CUDA RT Proj.cu"
    i686-apple-darwin11-llvm-g++-4.2: src/Simple CUDA RT Proj.o: No such file or directory
    make: *** [src/Simple CUDA RT Proj.o] Error 1 
```

每个项目都缺少相同的问题主要 .o 文件。

**更新 [2012 年 11 月 4 日 10:36 UTC]**

我已经通过**brew**安装了 Fortran 编译器。并尝试使用前缀 urs/local 构建 OMPI（根据 OSX FAQ 实体）。一两个小时后，make 失败并出现错误：

```
 sh: usr/local/cuda/bin/echo: No such file or directory
    make[2]: *** [util/hostfile/orte_hosts.7] Error 127
    make[2]: *** Waiting for unfinished jobs....
    make[1]: *** [all-recursive] Error 1
    make: *** [all-recursive] Error 1 
```

**更新 [2012 年 11 月 5 日 13:40 UTC]**

尝试使用以下参数构建 open-mpi-v1.9：

```
 ./configure --enable-shared --enable-sharedlibs=osx-gcc --enable-fast=all --prefix=/usr/local --with-cuda=/usr/local/cuda --with-cudalib=/usr/local/cuda/lib 
```

现在 make 失败并出现类似错误：

```
 sh: usr/local/cuda/bin/mv: No such file or directory 
```

看起来 make-script 尝试访问 cuda/bin 目录中的顶级二进制文件并且 make 失败。似乎 make-script 错误地将相对快速的系统范围调用转换为使用 cuda bin 目录的绝对路径`mv`。`echo`这是不正确的配置选项还是 Open MPI 错误？

或者，也许 Open MPI 不是主要问题？也许我应该寻找别的东西？我的主要煤炭正在运行 CUDA 代码！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T12:01:51.253

原来问题是由文件路径中的空格引起的，类似于[这个问题](https://stackoverflow.com/questions/13237371/cuda-toolkit-5-0-nsight-build-errors-on-mac-os-x-ml)中的情况。

# linux - 在哪里可以找到用于 wicket 安装的 lib 文件夹？

> ID：13208574
> 
> 赞同：-1
> 
> 时间：2012-11-03T11:06:18.620
> 
> 标签：linux, wicket

我正在 eclipse-Juno 上为我的 Web 应用程序安装 Wicket 框架。我无法找到我必须在其中放置一些支持 jar 文件的 lib 文件夹。这是我解压缩下载的 wicket 后拥有的文件夹列表：archetypes，许可证、测试、检票口、检票口弹簧等。我安装正确还是下载了错误检票口？请帮忙

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:41:56.507

您的 Web 应用程序项目应该有一个`lib`目录，您可以在其中放置 Web 应用程序中使用的所有库（jar 文件）。这并不特定于 Eclipse、Wicket 和 Linux。然后您应该[将](http://www.wikihow.com/Add-JARs-to-Project-Build-Paths-in-Eclipse-%28Java%29)jars 添加到 Eclipse 中的构建路径中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T13:39:50.317

如果您正在为将 Wicket“安装”到 Eclipse 并解压缩某些发行版而苦苦挣扎，那么您绝对应该查看[Maven](http://maven.apache.org/)、[Gradle](http://gradle.org/)或任何其他可以帮助您管理依赖项的工具。

但是，如果你真的，真的，真的在这方面苦苦挣扎，我建议你开始学习更多关于 Java 类路径、IDE 做什么和不做什么以及库在 Java 世界中通常如何分布的知识。处理 Wicket 项目。相信我，作为一名开发人员，您将受益于在这里获得的知识。

# java - 我可以在 OS windows 7 上安装 dbpedia 聚光灯吗

> ID：13208578
> 
> 赞同：0
> 
> 时间：2012-11-03T11:06:44.430
> 
> 标签：java, eclipse, spotlight-dbpedia

我会知道我是否可以在 os windows 7 (x64) 上安装 dbpedia Spotlight 并在 Eclipse 上设置 DBpedia Spotlight 环境。

如果我可以请给我任何教程，找不到任何人谈论 dbpedia 聚光灯和 win7。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T00:53:33.300

DBpedia Spotlight 在 Java 虚拟机上运行，​​因此如果安装了一些 JVM 实现，它应该在 Win7 上运行。 [http://www.java.com/en/download/testjava.jsp](http://www.java.com/en/download/testjava.jsp)

如果你有 Java，你可以从 jar 中运行服务。

请参阅快速入门说明： [https ://github.com/dbpedia-spotlight/dbpedia-spotlight#run-your-own-server](https://github.com/dbpedia-spotlight/dbpedia-spotlight#run-your-own-server)

或者： [https ://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Run-from-a-JAR](https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Run-from-a-JAR)

人们在Windows下报告成功： [https ://github.com/dbpedia-spotlight/dbpedia-spotlight/issues/121](https://github.com/dbpedia-spotlight/dbpedia-spotlight/issues/121)

# iphone - 将相同的类对象返回给 UIPageViewController

> ID：13208585
> 
> 赞同：0
> 
> 时间：2012-11-03T11:07:56.770
> 
> 标签：iphone, ios, cocoa-touch, uipageviewcontroller

我已经使用 UIPageViewController 在 webview 中加载大约 5 个图像。所以每当下面的代码行

```
- (UIViewController *)pageViewController:(UIPageViewController *) pageViewController viewControllerBeforeViewController:(UIViewController *)viewController 
```

, 被调用，返回对象是一个类对象（在我的例子中，类名是 LoadPage）。在我的代码中一切正常，但我在这里遇到了一些奇怪的问题并且有点不舒服。

所以我计划搬到一个班级而不是两个班级。

现在这个方法的返回类型将是 self。

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerAfterViewController:(UIViewController *)viewController
{
    return self;

} 
```

我对吗？

但是当我尝试初始化 UIPageViewController 时，应用程序在某一行崩溃了。

```
- (void) createViewControllers {

    self.pageViewController = [[UIPageViewController alloc] initWithTransitionStyle:UIPageViewControllerTransitionStylePageCurl navigationOrientation:UIPageViewControllerNavigationOrientationHorizontal options: nil];

    pageViewController.delegate = self; 
    pageViewController.dataSource = self;

    NSArray*    nextScreens = [NSArray arrayWithObject:self];
    [pageViewController setViewControllers: nextScreens direction:UIPageViewControllerNavigationDirectionForward animated:NO completion:nil];

    [self addChildViewController:pageViewController];
    [self.view addSubview:pageViewController.view];
    [[self view] addSubview:[pageViewController view]];     //CRASH
    [pageController didMoveToParentViewController:self];

    CGRect pageViewRect = self.view.bounds;
    pageViewRect = CGRectInset(pageViewRect,0, 0);
    pageViewController.view.frame = pageViewRect;    

    self.view.gestureRecognizers = pageViewController.gestureRecognizers; 

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:14:18.460

你不能返回 self ，`pageViewController:viewControllerAfterViewController`因为这会在视图控制器层次结构中产生一个循环。

您将 pageViewController 作为子视图控制器添加到 self，然后 pageViewController 将 self 作为子视图控制器（页面）添加到自身。那是不允许的！

# c++ - C ++如何做2排序并合并结果为1

> ID：13208586
> 
> 赞同：0
> 
> 时间：2012-11-03T11:08:06.433
> 
> 标签：c++

家长班：

```
Character 
```

子类：

```
Elf
Human 
```

我有一个变量是

```
int myScore;
string myType; 
```

所以我所做的是按 myType 排序，然后按升序排序

意味着如果我有这样的记录

```
[1] Human, 99
[2] Elf, 91
[3] Elf, 99
[4] Human, 99 
```

如果排序它将是

```
[1] Human, 90 
[2] Human, 99
[3] Elf, 91
[4] Elf, 99 
```

之前听说过可以将2排序合并为1的merge函数。

但是我该如何使用它。

我现在所做的是

在字符.cpp

```
struct sort_by_score
{
    static bool operator()(Character* x, Character* y)
    {
        return x->getScore() < y->getScore();
    }
}; 
```

在 main.cpp

我做了这个

```
int main()
{
Character *chara[100];
vector<Character*> sortVector;

//some input of value here.. assuming now got 4 pointers to object, 2 human 2 elf. 

sortVector.clear();
sortVector.assign(chara,chara + characterCounter);

//here i got question on how to sort by Human Then Elf

//2nd sort is sort by score
sort(sortVector.begin(), sortVector.end(), sort_by_score());

for (int i=0;i<characterCounter;i++)
{
cout << sortVector.toDisplay() << endl;
}

return 0;
} 
```

**感谢大家的帮助！！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:15:37.797

您也可以使用 lambdas (C++0x/11) 轻松做到这一点：

```
vector<Character> v = ...;

sort(v.begin(), v.end(), [](const Character &lhs,const Character & hs){
    return lhs.getType() == rhs.getType() ? lhs.getScore() < rhs.getScore()
                                          : lhs.getType() < lhs.getType();
}); 
```

或者对于指针：

```
vector<Character*> v = ...;

sort(v.begin(), v.end(), [](const Character *lhs,const Character * hs){
    return lhs->getType() == rhs.getType() ? lhs->getScore() < rhs->getScore()
                                           : lhs->getType() < lhs->getType();
}); 
```

* * *

我找不到“标准组合器”，所以我自己写了一个。这应该有效：

```
template<class T, class First, class Second>
class combine {
    First first;
    Second second;
public:
    bool operator()(const T & lhs, const T & rhs) const {
        if(first(lhs, rhs)) return true;
        if(first(rhs, lhs)) return false;
        return second(lhs, rhs);
    }
}; 
```

有两个基本的比较函子

```
struct less_type
{
    static bool operator()(const Character & lhs, const Character & rhs) {
        return lhs.getType() < rhs.getType();
    }
};
struct less_score
{
    static bool operator()(const Character & lhs, const Character & rhs) {
        return lhs.getScore() < rhs.getScore();
    }
}; 
```

这可以像下面这样使用：

```
vector<Character*> v = ...;

sort(v.begin(),v.end(), combine<Character,less_type,less_score>()); 
```

这在不支持 C++0x lambda 的情况下也可以工作。

# jquery - Jquery div to div load 仅适用于歌剧

> ID：13208592
> 
> 赞同：2
> 
> 时间：2012-11-03T11:09:39.693
> 
> 标签：jquery, load, opera, href, attr

几天前，我在堆栈上找到了一些解决我的问题的方法。这是代码：

**HTML**：

```
<a class="link" data-toggle="modal" href="link1.php" >Link 1</a>
<a class="link" data-toggle="modal" href="link2.php" >Link 2</a>
<a class="link" data-toggle="modal" href="link3.php" >Link 3</a>

<div class="modal hide fade" id="myModal"></div> 
```

**jQuery** :

```
$("a.link").click(function(){
    $("#myModal").html($(this).attr("href")); 
    /*$("#myModal").load($(this).attr("href"));*/
    return false;
});​ 
```

但是，这只适用于 Opera。在所有其他浏览器中，链接永远不会在`mymodal`div 中打开。完整代码在这里

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<style>
#prvidiv {
    width:360px;
    height: 220px;
    border: 1px;
    padding: 5px;
    font-family: cool_font, sans-serif;
    font-size:24px;
    color:#0000CC;
    background-color:transparent;
}
#levideookvir{
float:left;
width: 760px;
height:800px;
margin-right:0px;
margin-top: 0px;

}
</style>
<script src="jqery/jquery.min.js"></script>

</head>

<body>
<script language="javascript">
 $(document).ready(function() {
  $("a.link").click(function(e){
        $("#levideookvir").html($(this).attr("href")); 
       $("#levideookvir").load($(this).attr("href"));
       window.alert('Request complete');
         e.preventDefault();

  })
 });​
    </script>

<div id="prvidiv">
Ovde ide link<br />
<a class="link" href="test2.html">Klikni me</a><br />
</div>
<div id="levideookvir" >OVDE REY</div>

</body>
</html> 
```

因为它很奇怪......我什至没有得到我在 Chrome、Safari 或 FF 中运行这个脚本时定义的 ALERT。正如我所说……只在歌剧中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:16:27.440

jQuery 的`.html()`方法只接受一个 HTML 字符串作为参数。您的代码中有正确的语法，但它已被注释掉。

这是您需要的（如果我正确理解了这个问题）：

```
$("a.link").click(function(e) {
    $("#myModal").load($(this).attr("href"));
    e.preventDefault();
});​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T21:52:17.273

准确地说......这是代码（自然我不会同时使用两个代码块，所以这不是错误）

```
 <script type="text/javascript">
    $(document).ready(function(){   
<!--THIS ONE IS WORKING-IT CAN BE OPENED IN ANY BROWSER   -->
 $("a.link").click(function(){
    $("#levideookvirsrcamoga233").load($(this).attr("href"));
    return false;
    });
    });
//THIS ONE BELLOW IS NOT WORKING
    $("a.link").click(function(){
    $("#levideookvirsrcamoga233").load($(this).attr("href"));
    return false;

});​
});
</script> 
```

RESOLVED! Changing charachter set while writing code on my keyboard was the problem.

# jquery - 优化 JQuery SmoothScroll 脚本

> ID：13208594
> 
> 赞同：1
> 
> 时间：2012-11-03T11:10:19.780
> 
> 标签：jquery, smooth-scrolling

下面的脚本完成了任务，但我需要它再运行 20 次左右。如何优化脚本，这样我就不需要一遍又一遍地调用同一个脚本？

“a1”更改为“a2”、“a3”等。“#thing”也需要更改，以便它可以滚动到页面的另一部分

```
$(document).ready(function() {
$(".a1").click(function() {
        $('html,body').animate({
        scrollTop: $("#thing").offset().top
    }, 500);
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:16:53.427

像这样的东西可以做我认为的工作：

```
var cnt = 0;
$(".a1").click(function() {
        $('html,body').animate({
        scrollTop: $("#schoonmaak").offset().top
    }, 500, function() {
      if (cnt++ > 20) $(".a1").click();   
}); 
```

编辑 - 在您的问题编辑完成后，我认为这将解决您的问题：

```
var items = $('body ul li[id]');
$('.nobackground h2 a').each(function(i){

  $(this).click(function() {
     $('html,body').animate({ scrollTop: $(items[i]).offset().top}, 500);
  });

}); 
```

# c# - 如何使用 C# 在 SQL Server 2005 中插入一行？

> ID：13208601
> 
> 赞同：0
> 
> 时间：2012-11-03T11:12:07.297
> 
> 标签：c#, asp.net, sql-server-2005, visual-studio-2008

我正在使用 VS 2008 和 SQL Server 2005。我正在使用下面的代码向表中插入一行。

表是`TestTable`，并且它只有一列`Name`( `varchar(50)`)。

我是 C# 编码的新手。

```
protected void Button1_Click(object sender, EventArgs e)
{
    try
    {
        string sql = "insert into TestTable(Name) values (vinayak)";
        using (SqlConnection conn = new SqlConnection("Data Source=VINAYAK-PC;Initial Catalog=TestTable;Integrated Security=True;"))
        {
            conn.Open();
            using (SqlCommand cmd = new SqlCommand(sql, conn))
            {
                cmd.Parameters.AddWithValue("@Name", "test"); // assign value to parameter 
                cmd.ExecuteNonQuery();
            }
        }
    }
    catch (SqlException ex)
    {
        string msg = "Insert Error:";
        msg += ex.Message;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:23:28.930

您没有在 SQL 语句中包含参数。

将 vinayak 更改为 @Name。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:26:55.607

在表“TestTable”中，如果您只有一列“Name”并且您想在其中插入值“vinayak”，则将 vinayak 包含在单引号中并且您不需要执行以下语句 - ：

```
cmd.Parameters.AddWithValue("@Name", "test"); 
```

如果要在 sql 命令中使用参数，请确保在 sql 命令中的“name”之前添加“@”前缀。

看到这个[链接](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparametercollection.addwithvalue.aspx)

# javascript - jQuery ui 使用 JSON 文件自动完成

> ID：13208602
> 
> 赞同：2
> 
> 时间：2012-11-03T11:12:08.877
> 
> 标签：javascript, jquery, jquery-ui

我在让自动完成功能专门用于 json 文件时遇到了一些麻烦。每当在文本框中输入内容时，它都会出现以下错误

**网址未定义**

以下是我的 jQuery 代码

```
$(document).ready(function() {
$('#autocomplete').autocomplete({
    minChars: 1,
    source: function(request, response) {
            var url='dataa.json';

        $.getJSON(url,{term: request.term},function(data){

            response($.map(data.ledgers, function(item) {
            return item.value;
        }));
    })
    }
});
}); 
```

和 JSON

```
{
"ledgers": 
[
{
    "id":"2001",
    "name":"Bharat"
},
{
    "id":"2003",
    "name":"Gaurav"
},
{
    "id":"2002",
    "name":"Pankaj"
},
{
    "id":"2022",
    "name":"Purchase"
},
{
    "id":"2007",
    "name":"Ram"
},
{
    "id":"2008",
    "name":"Ramesh"
},
{
    "id":"2009",
    "name":"Suresh"
}
]} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T16:23:41.120

您的[JSON 文件格式](https://stackoverflow.com/questions/4194572/json-format-for-jquery-ui-autocomplete)需要包含`value`或`label`（或两者）。更改`name`为`value`，它应该可以正常工作。

```
$('#autocomplete').autocomplete({
    minChars: 1,
    source: function(request, response) {
            var url='dataa.json';

        $.getJSON(url,{term: request.term},function(data){
            response($.map(data.ledgers, function (value, key) {
                return {
                    label: value,
                    value: key
                };
            }));
        })
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:08:47.640

尝试[`'use strict';`](https://stackoverflow.com/questions/1335851/what-does-use-strict-do-in-javascript-and-what-is-the-reasoning-behind-it)在`$(document).ready()`. 这可能会指出问题所在......

```
return item.value; 
```

`item`没有 a `value`，尝试返回`id`or `name`，它确实有。

# ruby-on-rails-3 - Rails 3，带有if函数的选中单选按钮

> ID：13208604
> 
> 赞同：0
> 
> 时间：2012-11-03T11:12:30.793
> 
> 标签：ruby-on-rails-3, radio-button

我的表单中有一个单选按钮，如下所示

```
 <div class="btn-group" data-toggle="buttons-radio">
      <%= f.radio_button :start_year, :class=> "btn", :value=> '2007' %> 2007
      <%= f.radio_button :start_year, :class=> "btn", :value=> '2008' %> 2008
      <%= f.radio_button :start_year, :class=> "btn", :value=> '2009' %> 2009
    </div> 
```

我正在使用推特引导程序

我想做如下的事情：

```
 <div class="btn-group" data-toggle="buttons-radio">
      <%= f.radio_button :start_year, :class=> "btn", :value=> '2007', if @dates.start_year == 2007 :checked => true end %> 2007
      <%= f.radio_button :start_year, :class=> "btn", :value=> '2008', if @dates.start_year == 2008 :checked => true end %> 2008
      <%= f.radio_button :start_year, :class=> "btn", :value=> '2009', if @dates.start_year == 2009 :checked => true end %> 2009
    </div> 
```

但我收到以下错误：

```
syntax error, unexpected keyword_ensure, expecting ')'
syntax error, unexpected keyword_end, expecting ')' 
```

我一定是在单选按钮中的 if 语句中犯了一个错误，但我不确定如何准确地纠正这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:15:57.757

尝试

```
<%= f.radio_button :start_year, :class=> "btn", :value=> '2007', :checked => Proc.new { @dates.start_year == 2007 ? true : false } %> 2007 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-15T13:11:04.637

我知道这是一个老问题，但也许它对其他人有帮助。我认为我们不需要`Proc`在这里，我们可以将布尔值传递给`:checked`键。也`@dates.start_year == 2007 ? true : false`可以简化为`@dates.start_year == 2007`.

所以，结果将很简单

```
<%= f.radio_button :start_year, :value=> '2007', :checked => @dates.start_year == 2007%> 2007 
```

# php - 如何在运行时在会话处理程序之间切换？

> ID：13208606
> 
> 赞同：1
> 
> 时间：2012-11-03T11:13:00.657
> 
> 标签：php, session, redis, phpredis

我有**DB**会话处理程序，我有一个**FILE**会话处理程序和一个**REDIS**会话处理程序

根据我的引导程序中的一些逻辑，我想在两个会话处理程序中选择一个用于当前请求。

如何？

之前的代码`session_start`是

```
$c= $redis->pconnect('127.0.0.1', 6379);
if(!$c || !$redis->ping()){
  //do logic to switch to files/db session handler
} 
```

# symfony - 具有相关实体字段的 where 子句的 Doctrine 查询构建器

> ID：13208608
> 
> 赞同：1
> 
> 时间：2012-11-03T11:13:10.893
> 
> 标签：symfony, doctrine-orm, symfony-2.1, doctrine-query

我有两个实体：`Image`和`Tags`，具有多对多关系。

`Image`有一些字段：`code`, `description`,`author`并`tags`实现了多对多关系。

`Tag`只有两个字段：`name`和`images`.

我正在构建一个非常通用的搜索表单，只有一个输入字段，您可以在其中编写任何文本，然后将返回`Image`在其或字段或其任何标签字段中包含该文本的任何内容。`code``description``author``name`

对于非关系字段，这很容易。我在我的控制器中有（`query`只是用于搜索的 de GET 参数）：

```
$em = $this->getDoctrine()->getManager();

$qb = $em->getRepository('MyBundle:Image')->createQueryBuilder('i');

$qb
->where(
      $qb->expr()->like('i.code', $qb->expr()->literal('%'.$request->get('query').'%'))
      )
->orWhere(
      $qb->expr()->like('i.description', $qb->expr()->literal('%'.$request->get('query').'%'))
      )
->orWhere(
      $qb->expr()->like('i.author', $qb->expr()->literal('%'.$request->get('query').'%'))
      ); 
```

现在，我不知道如何`name`处理`tags`.

我曾尝试在将`Image`所有标签作为字符串返回的实体中使用虚拟字段，但稍后我无法在查询生成器中使用它。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:19:42.587

```
SELECT i FROM YourBundle:Image i
LEFT JOIN i.tags t
WHERE i.code LIKE :q OR i.desc LIKE :q OR i.author LIKE :q OR t.name LIKE :q 
```

这应该有效。

带qb：

```
$qb->leftJoin('i.tags', 't')
   ->where($qb->expr()->like('t.name', $qb->expr()->literal('%' . $query . '%'))); 
```

# lucene - 在 Lucene 中使用哪个术语向量选项？

> ID：13208609
> 
> 赞同：3
> 
> 时间：2012-11-03T11:13:13.200
> 
> 标签：lucene, indexing, lucene.net

我在 Lucene 中进行索引，并且只对从 Lucene 中获取相关文档的 ID 感兴趣（即，不是字段值或任何突出显示的信息）。鉴于这些要求，我应该使用哪个术语向量，而不影响搜索性能（速度）或质量（结果）？我也将使用 MoreLikeThis 所以不想要

```
TermVector.YES—Records the unique terms that occurred, and their counts, in each document, but doesn’t store any positions or offsets information

TermVector.WITH_POSITIONS—Records the unique terms and their counts, and also the positions of each occurrence of every term, but no offsets

TermVector.WITH_OFFSETS—Records the unique terms and their counts, with the offsets (start and end character position) of each occurrence of every term, but no positions

TermVector.WITH_POSITIONS_OFFSETS—Stores unique terms and their counts, along with positions and offsets 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T14:25:50.377

这取决于您的查询类型...如果您有任何与您的 ID 相关的数据，那么您将需要职位和/或offets。

如果您有这样的文件：“blah blah blah date blah ID blah name blah”

并且您只想找到该特定 ID，然后 TermVector Yes 就可以了。但是，如果您想根据与日期或名称的接近程度（使用高级查询）来查找 ID，您将需要额外的术语位置。

你总是可以试试这个，这是一个简单的改变，假设你不必对十亿记录索引或其他东西进行单元测试:)

顺便说一句...查看我们的“Lucene in Action”，这本书涵盖了所有这些信息。

# c - 是什么导致c代码中的分段错误，跨函数动态分配

> ID：13208610
> 
> 赞同：0
> 
> 时间：2012-11-03T11:13:16.503
> 
> 标签：c, dynamic, segmentation-fault

我正在尝试动态分配结构数组并对它们执行操作，但我一直遇到分段错误。有人可以帮帮我吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

void *malloc(size_t size);

typedef struct {
  double x;
  double y;
} coords;

struct figure {
  char fig_name[128];
  int coordcount, size_tracker;
  coords *pointer;
} fig;

void init_fig(int n, struct figure **point)
{
  printf("%u\n", sizeof(coords));
  point[n]->pointer = malloc(sizeof(coords) * 20);  <-------SEGFAULT
  if (point[n]->pointer == NULL){
    exit(-1);
  }
  point[n]->pointer[19].x = 2;
  point[n]->pointer[0].x = 1;
  point[n]->pointer[0].y = 2;
  point[n]->pointer[7].x = 100;
}

int main()
{
  int numfigs = 1;
  struct figure * point;
  point = malloc(sizeof(struct figure) * 16);
  point = &fig;
  point[1].coordcount = 1;
  init_fig(numfigs, &point);
  return 0;
} 
```

我标记了第一个 seg 故障发生的位置，（使用 ddd）。我没有得到的是我可以在 main 中操作 point[1] 但不能在任何其他函数中操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:25:36.577

我同意@Maxim Skurydin。不过，我想更详细地解释您的错误。

阅读您的`init_fig`假设您传递的参数`struct figure **point`- 实际上是指向*的指针数组*`struct figure`。这个函数访问它`n`的第 'th 个元素。

但是，在您的情况下，`main`您会做其他事情。你分配一个*数组* `struct figure`，你的`point`变量指向它的头部。然后你获取这个局部变量的地址并调用你的`init_fig`.

这就是问题所在。`init_fig`假设您向它传递了一个指针数组，而实际上这个“数组”仅包含一个元素：`point`在`main`.

**编辑：**

如何正确地做到这一点。

1.  保持`main`原样，修复`init_fig`。

这意味着**实际上**有一个`figure`结构数组。手段 - 单个内存块，解释为后续结构的数组。

```
void init_fig(int n, struct figure *point)
{
  printf("%u\n", sizeof(coords));
  point[n].pointer = malloc(sizeof(coords) * 20);  <-------SEGFAULT
  if (point[n].pointer == NULL){
    exit(-1);
  }
  point[n].pointer[19].x = 2;
  point[n].pointer[0].x = 1;
  point[n].pointer[0].y = 2;
  point[n].pointer[7].x = 100;
} 
```

1.  保持`init_fig`原状。修复`main`.

这意味着我们实际上应该分配一个指针数组，每个这样的指针都应该指向一个分配的`point`结构。

```
int main()
{
  int numfigs = 1;
  struct figure ** point;
  point = malloc(sizeof(struct figure*) * 16);

  for (i = 0; i < 16; i++)
    point[i] = malloc(sizeof(struct figure));

  point[1].coordcount = 1;
  init_fig(numfigs, &point);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:22:35.460

您分配内存并将指针存储在其中，`point`但是当您分配`&fig`给它时您忘记了该指针。

```
point = malloc(sizeof(struct figure) * 16);
point = &fig; 
```

因此，您本质上是在尝试编写`fig[1]`，这没有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T11:25:00.213

```
 struct figure * point;
  point = malloc(sizeof(struct figure) * 16); 
```

这里的点是指向堆中 16 个结构的内存的指针，但在下一行你已经完成了这个

```
 point = &fig; 
```

所以它的内存泄漏和点不再指向那个分配的区域

也`init_fig`应该是这样的

```
void init_fig(int n, struct figure **point) 
```

这是段错误的问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T11:28:01.900

消除这条线`point = &fig;`

并修改功能：

```
void init_fig(int n, struct figure *point)
{
  ...
  point[n].pointer = (coords*) malloc(sizeof(coords) * 20);
  ...
} 
```

因为你应该传递一个结构数组而不是一个指针数组。

此外，向 init_fig 函数添加第三个参数，以便您可以传递要创建的点数组的大小。喜欢 ：

```
void init_fig(int n, struct figure *point, int size)
    {
      ...
      point[n].pointer = (coords*) malloc(sizeof(coords) * size);
      ...
    } 
```

因此，使函数更具可重用性。

还要修改对该函数的调用：

```
init_fig(numfigs, &point); to init_fig(numfigs, point); 
```

# firefox - 你如何将pentadactyl与萤火虫一起使用？

> ID：13208611
> 
> 赞同：3
> 
> 时间：2012-11-03T11:13:39.013
> 
> 标签：firefox, firebug

我最近在 OS X Mountain Lion 上的 FF 16.0.2 上每晚安装了最新的 Pentadactyl（截至 2012 年 11 月 2 日）。我正在慢慢掌握广泛的选项，但是我不知道如何使用我之前安装并正在使用的 FireBug 1.10.6。

我搜索了一下，发现了一些错误报告，其中提到安装 AceBug 会神奇地“修复”任何问题，但我尝试了 AceBug 1.10.0 仍然没有骰子 - 我如何查看 FireBug 控制台并与之交互等？

我在 Github 上发现了一个名为 firebug-pentadactyl 的 Pentadactyl 插件，它声称向 Pentadactyl 添加了 FireBug 支持，但是当我键入时：

```
:firebug console 
```

...什么都没发生。谁在这里成功地将 Pentadactyl 与 FireBug 一起使用，并且可以告诉我我做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T10:33:56.967

哎呀，在评论中回答了，但会在这里重复：

这个问题是因为 F12“打开 Firebug 面板”热键默认映射到“音量调高”。如果按住 Fn 并按 F12，则会显示仪表板。我通过转到“系统偏好设置”>“任务控制”并将仪表板快捷方式重新映射到不同的功能键来解决此问题。Linux 或 Windows 用户可能不会遇到。

# java - 通过 Android 应用在 facebook 中创建一个简单的帖子

> ID：13208612
> 
> 赞同：0
> 
> 时间：2012-11-03T11:13:41.100
> 
> 标签：java, android, facebook, facebook-graph-api

我正在尝试使用 facebook SDK 提交一个简单的发布请求。这是代码：

```
public void ShareLinkOnFacebook()
    {
        Facebook mFacebook = ((GlobalVars)getApplicationContext()).facebook;
         AsyncFacebookRunner mAsyncFbRunner = new AsyncFacebookRunner(mFacebook);
         Bundle params = new Bundle();
         params.putString("message",  place.name );
         params.putString("link", "http://www.facebook.com");
         mAsyncFbRunner.request("me/feed", params, "POST", new RequestListener());
    } 
```

但我有编译错误说`RequestListener`无法解析为类型。我该怎么做才能让它工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:18:11.823

请检查此侦听器。

```
 public void postOnWall(String msg) {
        Log.d("Tests", "Testing graph API wall post");
         try {
                String response = mFacebook.request("me");
                Bundle parameters = new Bundle();
                parameters.putString("message", msg);
                parameters.putString("description", "test test test");
                response = mFacebook.request("me/feed", parameters, 
                        "POST");
                Log.d("Tests", "got response: " + response);
                if (response == null || response.equals("") || 
                        response.equals("false")) {
                   Log.v("Error", "Blank response");
                }
         } catch(Exception e) {
             e.printStackTrace();
         }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T13:14:32.490

试试这个这是我的工作代码：-在wallpost按钮上单击：-

```
 mPostButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            mFacebook.dialog(Class.this, "feed",
                    new SampleDialogListener());
        } 
```

&

```
 public class SampleDialogListener extends BaseDialogListener {

    public void onComplete(Bundle values) {
        final String postId = values.getString("post_id");
        if (postId != null) {
            Log.d("Facebook-Example", "Dialog Success! post_id=" + postId);
            mAsyncRunner.request(postId, new WallPostRequestListener());

            mDeleteButton.setVisibility(View.VISIBLE);
        } else {
            Log.d("Facebook-Example", "No wall post made");
        }
    }
} 
```

& BaseDialogListner:---

```
 public abstract class BaseDialogListener implements DialogListener {

public void onFacebookError(FacebookError e) {
    e.printStackTrace();
}

public void onError(DialogError e) {
    e.printStackTrace();
}

public void onCancel() {
} 
```

}

```
 public class WallPostRequestListener extends BaseRequestListener {

    public void onComplete(final String response, final Object state) {
        Log.d("Facebook-Example", "Got response: " + response);
        String message = "<empty>";
        try {
            JSONObject json = Util.parseJson(response);
            message = json.getString("message");
        } catch (JSONException e) {
            Log.w("Facebook-Example", "JSON Error in response");
        } catch (FacebookError e) {
            Log.w("Facebook-Example", "Facebook Error: " + e.getMessage());
        }
        final String text = "Your Wall Post: " + message;
        VideoUpload.this.runOnUiThread(new Runnable() {
            public void run() {
                mText.setText(text);
            }
        });
    }
} 
```

& BaseRequestListner:--

```
 public abstract class BaseRequestListener implements RequestListener {

public void onFacebookError(FacebookError e, final Object state) {
    Log.e("Facebook", e.getMessage());
    e.printStackTrace();
}

public void onFileNotFoundException(FileNotFoundException e,
        final Object state) {
    Log.e("Facebook", e.getMessage());
    e.printStackTrace();
}

public void onIOException(IOException e, final Object state) {
    Log.e("Facebook", e.getMessage());
    e.printStackTrace();
}

public void onMalformedURLException(MalformedURLException e,
        final Object state) {
    Log.e("Facebook", e.getMessage());
    e.printStackTrace();
} 
```

# mysql - 限制来自本地主机的 MySQL 连接以提高安全性

> ID：13208614
> 
> 赞同：29
> 
> 时间：2012-11-03T11:14:15.603
> 
> 标签：mysql, database, localhost

我听说任何知道我的 MySQL 用户名和密码的人都可以访问它，即使它只收听*localhost*。

假设我的信息如下：

```
USER: root
PASS: 123456
Host: LOCALHOST (only) 
```

那里的任何人（本地）怎么可能访问它？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-11-03T11:18:56.160

如果您将远程主机的访问限制为您的用户名和密码，那么某人将无法从外部访问数据库。

您还可以将防火墙配置为仅允许从 localhost 机器到 3306（MySQL 默认端口）的流量。

**更新**

要设置您的用户，以便他们只能通过 LOCALHOST 访问，请使用：

```
GRANT ALL PRIVILEGES ON *.* TO db_user @'localhost' IDENTIFIED BY 'db_passwd';
GRANT ALL PRIVILEGES ON *.* TO db_user @'127.0.0.1' IDENTIFIED BY 'db_passwd'; 
```

此外，将您的 MySQL 服务器绑定到本地地址。您可以通过编辑以下`[mysqld]`部分来做到这一点`my.cnf`：

```
[mysqld]
bind-address = 127.0.0.1 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-10T03:30:33.470

这是我偶然发现的一个较老的问题，但如果 Darkeden 运行了 phpMyAdmin 或类似的运行，任何人都可以使用有效的 MySQL 凭据登录。

如果它被泄露，那么除了限制连接外，还要更改所有密码。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T11:41:14.627

您可以在防火墙或 MySQL 本身中阻止对 MySQL 的直接访问，但最有可能被黑客入侵的方式是通过不安全的 Web 应用程序 - 在这种情况下，攻击者很可能能够读取您的数据库登录名并从服务器。

因此，请确保您的应用程序安全 - 保持一切更新，不允许文件上传，如果您有多个帐户，请使用 suPHP 等。

如果您限制您的 mysql 应用程序，请按照以下步骤操作：

1.您可以只阻止端口 3306。如果站点在同一台服务器上，那么它仍然可以使用 localhost 作为主机名访问数据库。

2.只需将“bind-address = 127.0.0.1”添加到他们的 my.cnf 文件的“[mysqld]”部分，以限制仅访问本地主机。

大多数人使用这种类型的限制。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-10-03T18:27:02.793

我没有看到回答他（调整后的）问题的答案 - 他已将其锁定到 localhost 并且攻击者仍在进入。

**如果您确实将其限制**为本地主机（使用 netstat -an | egrep 3306 检查它正在侦听 127.0.0.1 而不是 0.0.0.0）， **那么**访问它的唯一方法是从该本地主机发起连接。

初步采取的步骤：

1.  可能从头开始重建替换系统并在公开访问之前对其进行加固（具有可重复的配方，例如使用 ansible 会有所帮助，因为您可能需要经过几次迭代才能了解他是如何进入的）与信誉良好的安全扫描程序一起检查您的内容明显的漏洞是，
2.  从安全专家那里获得帮助（取决于您是否想花费 $ 或时间和挫折来修复）
3.  应用安全补丁，
4.  删除不需要的服务，
5.  将数据库访问限制为仅对需要它的程序的访问，
6.  重做所有密码，
7.  检查已安装的根工具包和其他病毒，
8.  如果在您自己的办公室，请保护您的服务器并培训员工处理社会工程，
9.  使用一个服务来监控和过滤通过的请求并拒绝直接访问（例如，使用 cloudflare 作为一个廉价的起点）
10.  检查用于访问服务器的所有机器上的键盘记录器（物理和软件以及其他病毒），
11.  检查在访问服务器时记录击键的物理方式（例如 atm 中使用的网络摄像头样式），更奇特的包括声音（[https://en.wikipedia.org/wiki/Acoustic_cryptanalysis](https://en.wikipedia.org/wiki/Acoustic_cryptanalysis)），使用附近的 wifi 接入点打字（例如[https://www.schneier.com/blog/archives/2016/08/keystroke_recog.html](https://www.schneier.com/blog/archives/2016/08/keystroke_recog.html)）
12.  添加审计跟踪并监控数据库活动以了解他是如何通过的，但至少您需要先进行所有明显的保护，否则他只会从一个安全漏洞跳到另一个安全漏洞

他也可以通过使用：

1.  通过您正在运行的某个程序（例如 Web 服务器）进行访问，该程序可从外部访问，并且有一个安全漏洞，允许他通过其现有的数据库连接运行任意 sql 命令 - 请参阅[https://www.w3schools.com/sql/sql_injection .asp](https://www.w3schools.com/sql/sql_injection.asp)

2.  欺骗他可以从外部访问的某些程序，以代理他到 localhost:3306 的连接（例如，通过机器上配置错误的网络防火墙）

3.  欺骗某些程序运行本地程序（bash.mysql 等），然后从那里获得对数据库的访问权限 - 缓冲区溢出和其他特制数据是运行任意代码的常见问题

4.  中间人攻击具有合法访问权限的连接

5.  自动或手动处理来自外部的数据的程序中的错误，例如电子邮件，使用脚本处理处理 postscript/pdf/任何文档 - 即使查看文本文件也可能很危险 - 请参阅[https://www.proteansec.com/linux /blast-past-executing-code-terminal-emulators-via-escape-sequences/](https://www.proteansec.com/linux/blast-past-executing-code-terminal-emulators-via-escape-sequences/)

6.  社会工程是一种让人们为您提供访问权限的方法

7.  设法将硬件设备连接到可以访问的计算机上（有多少人会拿起一个躺在工作停车场的“记忆棒”并检查它而不是“可编程键盘”，并且所有计算机都信任键盘！）

8.  然后还有更多我不知道的所有其他类型的方法，但是所涉及的方法共享...

请记住，您需要有实际的安全性，我认为 xkcd 说得恰到好处：[https ://xkcd.com/538/](https://xkcd.com/538/)

# iphone - NSData dataWithContentsOfFile vs NSInputStream

> ID：13208619
> 
> 赞同：0
> 
> 时间：2012-11-03T11:14:45.430
> 
> 标签：iphone, objective-c, ios, nsdata, nsxmlparser

我必须处理 XML，现在使用 NSInputStream 会破坏我的代码，因为我必须重写很多东西。

**将 dataWithContentsOfFile 整个文件放入内存，还是只读取 getBytes 方法请求的内容？**

我使用 NSData 作为 NSXMLParser 的输入参数，我想知道有没有关于这个的文档？

苹果文档中没有关于 NSData 的 dataWithContentsOfFile 内部或其实现的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:57:37.613

当您为 NSXMALParser 分配 NSData 时，这意味着为该对象创建数据缓冲区并且每个对象都占用内存（RAM），因为 iPhone IOS 非常了解如何使用虚拟内存。当您从文件中读取整个数据时，它会占用对象数据，如果数据大小超过几个（取决于操作系统算法）内存页，则对象使用虚拟内存管理。数据对象也可以包装预先存在的数据，而不管数据是如何分配的。该对象不包含有关数据本身的信息（例如其类型）；决定如何使用数据的责任在于客户。特别是，当分布在 big-endian 和 little-endian 机器之间时，它不会处理字节顺序交换。
我建议您再次阅读此链接 [https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/BinaryData/BinaryData.html#//apple_ref/doc/uid/10000037i](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/BinaryData/BinaryData.html#//apple_ref/doc/uid/10000037i)它与iOS有关。但是是的，你关心一件事……在 IOS 中有对象所有者的类型。一个是用户，另一个是 IOS 对象。如果您创建 NSData 这意味着您分配内存缓冲区并将数据指针分配给这个可验证的，但此时整个数据都驻留在内存中。这是我们的假设，但在此期间 IOS 知道如何处理这种情况。IOS 使用虚拟内存技术来处理数据页。

# python - django 加入查询

> ID：13208620
> 
> 赞同：0
> 
> 时间：2012-11-03T11:15:01.737
> 
> 标签：python, django

我是 django 的新手。我有这个模型，在 tblperson 中，只保存了类型和状态的伪造键。如何加入所有表以显示它们的值而不是它们的 forgein 键？例如。

```
TblPerson.objects.raw('SELECT * FROM "Tblperson" INNER JOIN "Tblstatus" ON ("TblPerson"."Status" = "Tblstatus"."ID")'): 
```

谢谢。

```
class TblPerson(models.Model):
    ID = models.AutoField(primary_key=True, db_column=u'ID') 
    Type = models.IntegerField(null=True, db_column=u'Type', blank=True)
    Status = models.IntegerField(null=True, db_column=u'Status', blank=True)
    class Meta:
        db_table = u'tblPerson'

class Tblstatus(models.Model):
    ID = models.AutoField(primary_key=True, db_column=u'statStatusID')
    Status = models.CharField(max_length=25, db_column=u'statStatus', blank=True)
    class Meta:
        db_table = u'tblStatus'

class Tbltype(models.Model):
    ID = models.AutoField(primary_key=True, db_column=u'typTypeID')
    Type = models.CharField(max_length=25, db_column=u'typType', blank=True)
    class Meta:
        db_table = u'tblType' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T16:44:44.213

我建议您重新编写模型。因此，您的 TblPerson 与 Tblstatus 具有多对一的关系

```
class TblPerson(models.Model):
    ID = models.AutoField(primary_key=True, db_column=u'ID') 
    Type = models.IntegerField(null=True, db_column=u'Type', blank=True)
    Status = models.ForeignKey(Tblstatus, null=True, db_column=u'Status', blank=True)
    class Meta:
        db_table = u'tblPerson'

class Tblstatus(models.Model):
    ID = models.AutoField(primary_key=True, db_column=u'statStatusID')
    Status = models.CharField(max_length=25, db_column=u'statStatus', blank=True)
    class Meta:
        db_table = u'tblStatus' 
```

使用它，您将能够像这样查询存在 Tblstatus 的 TblPerson 对象

```
TblPerson.objects.filter(Status__isnull=False) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:48:30.900

Django 的强大之处在于[ORM](http://en.wikipedia.org/wiki/Object-relational_mapping "甲骨文")，这意味着您应该编写非常少的 SQL。

```
 class Person(models.Model):
        #don't use this because id is generated automatically
        #ID = models.AutoField(primary_key=True, db_column=u'ID')            

        type = models.ForeignKey(Type)
        status = models.ForeignKey(Status)

    #Type,Status analogous

    #filter like this
    selected = Person.objects.filter(type=SomeType)
    for p in selected:
        print p.id,p.type,p.status 
```

# php - 警告：file_put_contents() 至少需要 2 个参数 - 但我给出 2 个参数

> ID：13208621
> 
> 赞同：0
> 
> 时间：2012-11-03T11:15:17.700
> 
> 标签：php

嗨，我有下面的功能，可以抓取并保存屏幕截图。它在 50% 的时间内工作，但有时会失败并显示以下消息： **警告：file_put_contents() 需要至少 2 个参数，1 个给定**

我已经转储了 2 个参数，并且可以看到它们都存在，但错误消息表明并非如此

它让我发疯，任何帮助将不胜感激..

```
<?php

grab_screenshot('http://www.usa4ink.com', 480, 240,"myscreen.jpg")

function grab_screenshot($url, $w, $h,$filename)
{
    global $imgPath;
    $filename = make_filename($filename,"jpg");
    $url = urlencode($url);
    $url = "http://s.wordpress.com/mshots/v1/$url/?w=$w&h=$h";
    $url = str_replace("//","/",$url);
    $url = str_replace("http:/","http://",$url);
    $image = file_get_contents($url);

    if($image!='')
    {
        file_put_contents(str_replace("//","/",$imgPath."/".get_subDir($filename)."/".$filename, $image));
    }
    return get_subDir($filename)."/".$filename;
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:18:12.513

```
file_put_contents(str_replace("//","/",$imgPath."/".get_subDir($filename)."/".$filename, $image)); 
```

不，你没有。仔细看。

```
file_put_contents(str_replace(param, param, param, param)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T11:18:36.930

这是您在返回之前的代码：

```
file_put_contents(
    str_replace("//","/",$imgPath."/".get_subDir($filename)."/".$filename, $image)
); 
```

如您所见，您提供了 1 个参数

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T11:18:37.383

检查你的括号：

```
file_put_contents(str_replace("//","/",$imgPath."/".get_subDir($filename)."/".$filename, $image)); 
```

应该：

```
file_put_contents(str_replace("//","/",$imgPath."/".get_subDir($filename)."/".$filename),  $image); 
```

# crystal-reports - Crystal Reports 性能选项

> ID：13208622
> 
> 赞同：0
> 
> 时间：2012-11-03T11:15:28.180
> 
> 标签：crystal-reports

我们基于 SQL Server 创建了几个水晶报表——通常是 2005 或 2008。大致有 2 种报表

a) 表格报告 - 在表格中显示一些数据（例如，发票列表） b) 文档布局 - 以特定格式显示数据 - 通常来自一个或两个主表 - 和几个辅助表（例如，发票）

我们有时会直接在水晶中使用表格。或者在 SQL 中创建一个过程，然后使用该过程。一张发票通常可以参考大约 10-12 张桌子。其中大多数使用左外连接链接到主发票表。

什么选项更好 - 在水晶中使用表（并让水晶创建并运行 sql 查询） - 或创建查询 - 而不是在水晶中使用该查询。哪一个会提供更好的性能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:08:36.027

由“数据库专家”生成的查询与添加到命令的相同 SQL 之间的性能没有差异。一个警告：确保可以解析记录选择公式并将其发送到数据库（应用的过滤器肯定会比`WhileReadingRecords`纯 SQL 的效率低）。

喜欢“数据库专家”的原因：

*   在 v 2008 之前，Command 对象不支持多值参数
*   更容易管理（有点主观）

喜欢命令的原因：

*   你可以添加提示
*   您对 SQL 有更细粒度的控制（例如，内联视图、CTE、更复杂的 JOIN、子选择）

就个人而言，我尽量避免使用存储过程，因为它们提供的性能优势最小，但需要在开发和维护方面进行更有意义的投资。

最后，没有什么可以替代性能。尝试两种方式查询并衡量结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:23:44.763

自己编写代码几乎总是会运行得更快——毕竟，你知道你的数据是什么样的，而 Crystal 不知道。此外，您可以在手动查询（例如，窗口函数）中执行 Crystal 无法执行的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:37:52.320

水晶倾向于在幕后做一些疯狂的事情。您可以查看“数据库”菜单选项下的“显示 SQL 查询”以查看它创建的内容。如果发现用 SQL 编写查询更容易，因为我可以更轻松地自己优化它。我也更喜欢在 SQL 中执行任何计算/公式字段，并将 Crystal 用作显示界面。如果您确实将逻辑放入水晶中，请记住它正在为返回的每条记录运行该逻辑......因此，如果存在从公式中排除记录的条件，请将其放在首位以限制计算所花费的时间。

# c# - 根据 DataTable 中的值检索行号

> ID：13208623
> 
> 赞同：1
> 
> 时间：2012-11-03T11:15:33.463
> 
> 标签：c#, asp.net

我想知道确切的行号，我正在使用此代码

```
DataRow[] resultsize = dt.Select("psize like '%" + hdncurrentsize.Value + "%'"); 
```

但结果总是`1`但不是完全匹配的行号。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:45:12.783

如果你有兴趣知道行位置，你可以试试这个

```
DataRow[] resultsize = dt.Select("psize like '%" + hdncurrentsize.Value + "%'");

foreach(var row in resultsize){    
   var idx = dt.Rows.IndexOf<DataRow>(row);    
} 
```

或者

```
DataRow[] allRows;    
dt.Rows.CopyTo(allRows,0);

foreach(var row in resultsize){    
   var idx = Array.FindIndex<DataRow>
                   (allRows, (item) => { return item == row; });
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:21:39.813

您的代码似乎是正确的。你为什么确定，返回的行数是错误的？

您也可以使用[Linq to DataSet](http://msdn.microsoft.com/ru-ru/library/bb386977.aspx)来过滤行（它会做与您的相同`DataTable.Select`，但更具可读性的强类型方式）

```
var rows = from row in dt.AsEnumerable()
           where row.Field<string>("psize").Contains(hdncurrentsize.Value)
           select row;

int resultSize = rows.Count(); 
```

*顺便说一句*，它是什么类型`hdncurrentsize.Value`的字符串（我假设它是）？

*更新*因此您正在搜索行索引（下面的代码将仅循环遍历数据表一次，而不在过滤后搜索每个找到的行的索引）：

```
var indexes = dt.AsEnumerable()
                .Select((row, index) => new { row, index })
                .Where(x => x.row.Field<string>("psize").Contains(hdncurrentsize.Value))
                .Select(x => x.index); 
```

# android - TextView 只更新一次

> ID：13208625
> 
> 赞同：1
> 
> 时间：2012-11-03T11:15:42.760
> 
> 标签：android, textview, runnable

我想每 1 分钟更改一次 textview。问题是它只更改第一次，在其他情况下保持不变。这是我使用每 1 分钟调用一次的可运行文件的地方：

```
public void ReduceTimeIteration() 
{
    try
    {
        final Handler m_handler = new Handler();

        runOnUiThread(new Runnable() {  
            @Override 
            public void run() {
                DiscussArrayAdapter.MyMethod(SplashActivity.this,(long)60000);
                m_handler.postDelayed(this, 60000); 
            }
        });
    }
    catch(Exception e)
    {
        Log.e("Exception: ",e+" in ReduceTimeIteration() of SplashActivity.java");
    }
} 
```

这是我要更新的类`textview` `TimeLeft`：

```
public class DiscussArrayAdapter extends ArrayAdapter<OneComment> {

    private TextView countryName;
    private List<OneComment> countries = new ArrayList<OneComment>();
    private LinearLayout wrapper;
    public View row;
    static OneComment coment;
    static TextView TimeLeft;

    @Override
    public void add(OneComment object) 
    {
        try
        {
            countries.add(object);
            super.add(object);
        }
        catch(Exception e)
        {
            Log.e("Exception: ",e+" Exception occured in add() of DiscussArrayAdapter.java");
        }
    }

    public DiscussArrayAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    public int getCount() 
    {
        try
        {
            return this.countries.size();
        }
        catch(Exception e)
        {
            Log.e("Exception: ",e+" Exception occured in getCount() of DiscussArrayAdapter.java");
        }
        return this.countries.size();
    }

    public OneComment getItem(int index)
    {
        try
        {
            return this.countries.get(index);
        }
        catch(Exception e)
        {
            Log.e("Exception: ",e+" Exception occured in getItem() of DiscussArrayAdapter.java");
        }
        return null;        
    }

    public View getView(int position, View convertView, ViewGroup parent) 
    {
        try
        {
            row = convertView;
            if (row == null) {
                LayoutInflater inflater = (LayoutInflater) this.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                row = inflater.inflate(R.layout.listitem_discuss, parent, false);
            }

            wrapper = (LinearLayout) row.findViewById(R.id.wrapper);

            coment = getItem(position);

            countryName = (TextView) row.findViewById(R.id.comment);

            countryName.setText(coment.comment);

            TimeLeft = (TextView) row.findViewById(R.id.timeleft);

            int hours,minutes,seconds; 

            if(coment.timeLeft > 0) // When the time is greater than 0
            {
                if(TimeLeft == null)
                {
                    ((ViewGroup) row).addView(TimeLeft);
                }

                                    long t = coment.timeLeft - SecureMessagesActivity.TimeChecker();

                seconds = (int) (t  / 1000) % 60 ;
                minutes = (int) (t / (1000*60)) % 60;
                hours = minutes / 60;

                TimeLeft.setText("hello");
            }
            else
            {
                if(TimeLeft != null)
                {
                    ((ViewGroup)TimeLeft.getParent()).removeView(TimeLeft); 
                }   
            }

            return row;
        }
        catch(Exception e)
        {
            Log.e("Exception: ",e+" Exception occured in View getView(int position, View convertView, ViewGroup parent) of DiscussArrayAdapter.java");
        }
        return row;
    }

    public static void MyMethod(Activity activity,long time)
    {
        try
        {

                if(TimeLeft.getText().equals("hello"))
                {
                    TimeLeft.setText("hi"); 
                }
                else if(TimeLeft.getText().equals("hi"))
                {
                    TimeLeft.setText("hello");  
                }

            Toast.makeText(activity, "Value of TextView is "+TimeLeft.getText() , Toast.LENGTH_SHORT).show();
        }
        catch(Exception e)
        {
            Log.e("Exception: ", e+" Occured in MyMethod() of DiscussArrayAdapter.java");
        }
    }
} 
```

我不知道是什么问题，因为 TextView TimeLeft 仅更改其值一次，在其余情况下它保持不变。请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:25:17.270

我想试试这段代码：-

```
int delay = 5000; // delay for 5 sec.
    int period = 1000; // repeat every sec.

    Timer timer = new Timer();
    timer.scheduleAtFixedRate(new TimerTask()
        {
            public void run()
            {
                //your code
            }
        }, delay, period); 
```

提供另一种解决方案

```
Handler h=new Handler();
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    this.setContentView(R.layout.main);
    h.post(new Runnable(){

        @Override
        public void run() {
            // call your function
            h.postDelayed(this,5000);

        }

    }); 
```

# java - 带有 JFreeChart 切换的 CardLayout 不起作用

> ID：13208626
> 
> 赞同：0
> 
> 时间：2012-11-03T11:15:47.707
> 
> 标签：java, swing, jfreechart

我在使用 JFreeChart 时遇到了一些问题，在这里我解释了我正在创建的内容：[使用 JFreeChart 更改系列时出现随机错误](https://stackoverflow.com/questions/13205251/random-errors-when-changing-series-using-jfreechart)。但现在我有另一个相关的问题。当我单击选项卡式窗格时，我必须`ChartPanel`在图表之间切换。`CardLayout`我已经用普通的`JPanel`（`public class JPaintablePanel extends JPanel`. 它显示了一些具有不同名称的按钮，具体取决于选项卡），并且效果很好。但同样的事情`public class JPaintablePanel extends ChartPanel`不起作用，它只显示一个图表。你能告诉我如何强制`ChartPanel`切换和保存数据吗？

[http://pastebin.com/THuvGan5](http://pastebin.com/THuvGan5) ChartPanel

[http://pastebin.com/Br2swZiC](http://pastebin.com/Br2swZiC) CardLayout

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T15:15:39.120

> 很抱歉没有说清楚：`JTabbedPane`，`ChartPanel`并`JPanel`放在同一个网格上。

您的问题尚不清楚，但它可能有助于让包含层次结构反映预期用途。如果每张卡片都包含三个面板，则让每个卡片`CardPanel`包含三个相应的字段。在构造函数中传递任何必需的参数`CardPanel`。将这些卡的实例添加到 中，如此[处](https://stackoverflow.com/a/5655843/230513)和[此处](https://stackoverflow.com/a/6432291/230513)`CardLayout`的示例所示。使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)为单个卡片提供公共接口的特定实现。

```
public class CardPanel extends JPanel {

    private JTabbedPane tabPane;
    private ChartPanel chart;
    private JPanel panel;

    public CardPanel(Dataset dataset, Context context, ...) {
        super(new GridLayout(0, 1));
        // initialize fields ...
        this.add(tabs);
        this.add(chart);
        this.add(panel);
    }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:59:45.387

您不需要混合选项卡式窗格和卡片布局。`ChartPanel`只需在每个选项卡中单独放置一个。

```
JTabbedPane tabs = new JTabbedPane();
tabs.add("Graph 1", new JPrintablePanel());
tabs.add("Graph 2", new JPrintablePanel()); 
```

您不必编写任何代码来处理切换选项卡，Swing 将为您处理。如果您添加数据，ChartPanels 也会自动更新。

# c# - 中欧语言的 UNICODE 编码

> ID：13208629
> 
> 赞同：-1
> 
> 时间：2012-11-03T11:16:11.787
> 
> 标签：c#, asp.net, encoding

不认识解码怎么办？

```
var url = "http://translate.google.ru/translate_a/t?client=x&text=" + text + "&hl=en&sl=en&tl=ru";

new System.Net.WebClient().DownloadFile(url, "filePath");

StreamReader streamReader = new StreamReader("filePath", Encoding.UTF8);

string trn = streamReader.ReadToEnd();
streamReader.Close();
return trn;

Label1.Text = tr.GoogleTranslate("testers"); 
```

结果：������</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:37:00.320

在这里，您如何使用`WebRequest`

```
HttpWebResponse response = null;
StreamReader reader = null;
Stream dataStream = null;
StringBuilder sbReadBuffer = null;
int bufSizeMin = 8192;
int bufSizeMax = 65536;

try
{
    HttpWebRequest req = (HttpWebRequest)WebRequest.Create(TheWebPageToRead);

    if (req != null)
    {
        req.Method = "GET";
        response = (HttpWebResponse)req.GetResponse();

        if (response != null)
        {
            // Get the stream containing content returned by the server.
            dataStream = response.GetResponseStream();

            // Open the stream using a StreamReader for easy access.
            reader = new StreamReader(dataStream, true);

            // get the length of the content returned by the request
            int length = (int)response.ContentLength;
            int bufSize = bufSizeMin;

            if (length > bufSize)
                bufSize = length > bufSizeMax ? bufSizeMax : length;

            // allocate buffer and StringBuilder for reading response
            byte[] buf = new byte[bufSize];
            sbReadBuffer = new StringBuilder(bufSize);

            // read the whole response
            while ((length = dataStream.Read(buf, 0, buf.Length)) != 0){
                sbReadBuffer.Append(Encoding.UTF8.GetString(buf, 0, length));
            }
        }
    }
}
finally
{
    if (response != null)
        response.Close();

    if (reader != null)
        reader.Close();

    if (dataStream != null)
        dataStream.Close();
} 
```

这`TheWebPageToRead`是你的网址。
保留回报并`sbReadBuffer`要求`"testers"`我得到：

`{"sentences":[{"trans":"Тестеры","orig":"testers","translit":"Testery","src_translit":""}],"src":"en","server_time":11}`

要求`"aristos"`，我得到：`{"sentences":[{"trans":"аристократов","orig":"aristos","translit":"aristokratov","src_translit":""}],"src":"en","server_time":5}`

# c# - 查找用户身份

> ID：13208632
> 
> 赞同：1
> 
> 时间：2012-11-03T11:16:34.240
> 
> 标签：c#, .net, vb.net

是否可以使用除 IP 地址之外的 asp.net/vb.net/c# 从浏览器检测用户身份。我的目标是检测用户访问次数，而不考虑 IP 地址；可能是Mac地址等？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:25:13.630

您可以从请求对象获得的不仅仅是用户身份

```
 HttpContext context = HttpContext.Current;

        string browserInfo =
             "RemoteUser=" + context.Request.ServerVariables["REMOTE_USER"] + ";\n"
            + "RemoteHost=" + context.Request.ServerVariables["REMOTE_HOST"] + ";\n"
            + "Type=" + context.Request.Browser.Type + ";\n"
            + "Name=" + context.Request.Browser.Browser + ";\n"
            + "Version=" + context.Request.Browser.Version + ";\n"
            + "MajorVersion=" + context.Request.Browser.MajorVersion + ";\n"
            + "MinorVersion=" + context.Request.Browser.MinorVersion + ";\n"
            + "Platform=" + context.Request.Browser.Platform + ";\n"
            + "SupportsCookies=" + context.Request.Browser.Cookies + ";\n"
            + "SupportsJavaScript=" + context.Request.Browser.EcmaScriptVersion.ToString() + ";\n"
            + "SupportsActiveXControls=" + context.Request.Browser.ActiveXControls + ";\n"
            + "SupportsJavaScriptVersion=" + context.Request.Browser["JavaScriptVersion"] + "\n"; 
```

您可以通过以下方式访问用户身份：

```
context.Request.ServerVariables["REMOTE_USER"] 
```

或者

```
User.Identity.Name 
```

# javascript - 如何取消拖放选择

> ID：13208637
> 
> 赞同：0
> 
> 时间：2012-11-03T11:16:43.420
> 
> 标签：javascript, jquery, html, css, browser

尝试单击任何空白区域并放下，这将导致文本和图像等页面元素的蓝色背景选择，

要清楚地查看此行为，请立即单击 ctrl+A。

我有一个网站的黑色主题，一些控件需要拖放，许多访问者错误地将空白区域拖放，这会导致不合适的默认元素选择，有什么办法可以防止这种选择？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:50:49.240

[如何使用 CSS 禁用文本选择突出显示？](https://stackoverflow.com/questions/826782/css-rule-to-disable-text-selection-highlighting)

这个网站有一个容器 div.. 使用您的开发人员工具包并分配我在上面的帖子中给您的 css 规则。您将无法选择任何内容。

# mysql - mysql - 将多个表上的计数加入查询

> ID：13208638
> 
> 赞同：1
> 
> 时间：2012-11-03T11:16:50.993
> 
> 标签：mysql

我想从一个表中选择列，并根据另外两个表的连接进行计数，我该怎么做？

这是我写的计数查询：

```
 SELECT COUNT(*) AS num_review FROM approved_reviews  m, reviews u where 
   m.review_id_=u.id  and u.item_id =? and m.approved=1 
```

我想加入它

```
select item_id, item_name, item_price from items ? 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:21:18.423

```
select items.item_id, item_name, item_price, COALESCE(t.cnt ,0)         
from items join (
                  SELECT u.item_id , COUNT(*) cnt
                  FROM approved_reviews  m, reviews u 
                  WHERE m.review_id_=u.id and m.approved=1
                  GROUP BY u.item_id 
                ) t on items.item_id = t.item_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:21:42.227

```
select * 
from
 (SELECT COUNT(*) AS num_review, u.item_id FROM approved_reviews  m, reviews u where 
   m.review_id_=u.id  and u.item_id =? and m.approved=1 group by u.item_id) count_sub, 
(select item_id, item_name, item_price from items) item_sub
where item_sub.item_id = count_sub.item_id 
```

# python - 如何使用 python 绑定在 Selenium WebDriver 中进行数据驱动框架工作？

> ID：13208643
> 
> 赞同：0
> 
> 时间：2012-11-03T11:17:42.453
> 
> 标签：python, selenium-webdriver

我已经在 Selenium WebDriver 中看到了使用 java 的数据驱动框架的示例。请给我一个使用 Selenium WebDriver python 绑定的数据驱动框架的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T13:25:33.647

我得到了上述问题的答案。见下文

```
 `
class VCGadminlogin(unittest.TestCase):
def setUp(self):
    driver = webdriver.Firefox()
    self.driver.implicitly_wait(30)
    self.base_url = "http://example.in"
    self.verificationErrors = []

def test_Login(self):
    driver=self.driver
    driver.get(self.base_url +"/")
    driver.set_window_size(1920, 1080)
    wb=xlrd.open_workbook('/login.xlsx')
    sheetname = wb.sheet_names() #Read for XCL Sheet names
    sh1 = wb.sheet_by_index(0) #add login details
    i=1
    while (i<6):
        rownum=(i)
        rows = sh1.row_values(rownum)
        driver.find_element_by_xpath("//*[@id='form-div']/form/input[1]").clear()
        print "1.enter user name in username text field"
        driver.find_element_by_xpath("//*[@id='form-div']/form/input[1]").send_keys(rows[0])
        driver.find_element_by_xpath("//*[@id='form-div']/form/input[2]").clear()
        print "2.enter password in password text field"
        driver.find_element_by_xpath("//*[@id='form-div']/form/input[2]").send_keys(rows[1])
        print " 3.Click login button. it has to go corresponding example admin home page"
        driver.find_element_by_xpath("//*[@id='form-div']/form/input[3]").click()
        try:
            driver.find_element_by_xpath("//*[@id='navigation']/li[1]/a").click()
            driver.save_screenshot('loginpage'+ str(i) +'.png')
            driver.find_element_by_xpath("//*[@id='contact']/ul/li[2]/a").click()
        except:
            error=driver.find_element_by_xpath(".//*[@id='form-div']/form/span[2]")
            print error.text
            print "login failled"
            self.fail('login failed')
            driver.save_screenshot(''_loginpageerror'+ str(i) +'.png')
        i=i+1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T03:56:33.810

您可以查看[用于 Selenium 的 Robot Framework](http://code.google.com/p/robotframework-seleniumlibrary/)。

# php - MySQL - 从两个数据库中选择数据 - 速度

> ID：13208654
> 
> 赞同：1
> 
> 时间：2012-11-03T11:19:06.100
> 
> 标签：php, mysql

我有三个大数据库（一个包含用户和设置，第二个和第三个包含讨论数据）。我需要使用 JOINS 等连接来自第一 - 第二和第一 - 第三数据库的数据。

我知道，如何做到这一点......但性能是一个问题......它会比我在一个数据库中拥有所有数据并执行 JOIN 更慢（所有数据库都在同一台服务器上，具有相同的权限）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:24:25.053

我建议使用您当前的设置编写查询，然后将所有表移动到一个数据库中，重新编写查询，然后查看哪个最快。

此外，必须确保在列上设置正确且最有效的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T13:52:13.790

我认为您不会看到性能差异。如果您关心性能，您应该检查 EXPLAIN 输出并确保正确使用索引。您也可以考虑异步构建输出页面。加载主页，并在讨论中使用 AJAX。感知会更快，即使总体上会慢一些。

[http://dev.mysql.com/doc/refman/5.0/en/explain-output.html](http://dev.mysql.com/doc/refman/5.0/en/explain-output.html)

# python - 为python和smalltalk之间的通信搭建一座桥梁

> ID：13208657
> 
> 赞同：3
> 
> 时间：2012-11-03T11:19:36.527
> 
> 标签：python, sockets, smalltalk

我正在 pharo 中制作一个项目，该项目将对其进行扩展并使其更加可视化，以进一步扩展 3d 应用程序 Blender。Blender 主要使用 python 进行名为“Addons”的扩展，准确地说是 python 3.2。所以我想要的是在pharo（smalltalk）和blender（python）之间架起一座桥梁。

现在我专注于套接字和 XMLRPC，但我想知道是否有工具和选择可以进一步帮助我的传奇。

我没有很高的要求，现在简单地访问类属性和调用python方法就足够了，但是如果我以后可以为我的桥增加额外的功能，那就更好了。理想情况下，后来的桥可以用于使pharo使用来自其他语言（如 Java、C# 等）的库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:46:57.610

在 Smalltalk 和 Python 之间发送 JSON 消息的 WebSockets 可能是最前沿的，但从长远来看，这是一个很有前途的方法。Smalltalk 有很好的 WebSockets 支持，我想 Python 也是如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-28T13:16:22.163

试试[Apache Thrift](http://thrift.apache.org) 它是许多语言之间的一个很棒的桥梁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-04T09:38:37.443

如果您看一下 OpenQwaq [Python 集成是如何解决的，您可能会发现一些有趣的信息和想法](http://squeakingalong.wordpress.com/2011/05/04/openqwaq-python-integration/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-28T13:14:46.583

我记得一个 ruby​​->dotNet 桥，据我所知，它被移植到了一些 smalltalk。（Ruby/.Net Bridge / 2004 Benjamin Schroeder 和 John R. Pierce）。它涵盖了异常、回调等的传递。可能为您的工作提供一个良好的起点。虽然不知道在哪里以及如何获得它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-29T02:36:02.367

我认为拥有一个java api而不是java是非常有意义的。而且我相信这并不难做到。而且我敢肯定很多人已经做到了。其中之一是[http://cgchan.com/suicidator/](http://cgchan.com/suicidator/)。如果你下载它，你会看到它在 python 和 suicidator 的 java 实现之间有一个“小”的 python 桥，位于 SCG.jar 和包中包含的其他 jar 中。我只是在寻找一个开源实现，而不是破解代码并尝试对他们所做的事情进行逆向工程。

# ruby-on-rails - 添加到购物车数量逻辑 RoR

> ID：13208659
> 
> 赞同：0
> 
> 时间：2012-11-03T11:20:10.907
> 
> 标签：ruby-on-rails, ruby-on-rails-3, if-statement, model, controller

我创建了一个名为 add_to_cart 的方法，每次用户将产品添加到他们的购物车时都会调用该方法 - 然后该方法检查该项目是否已经存在，如果存在，它将数量增加 +1。

我遇到的问题是，如果购物车中不存在产品，我不确定如何从我的模型中调用我的项目“创建”操作（在项目控制器中）。

我想我可以使用 Item.create(...) 但我宁愿只调用我的 Items 控制器中已经存在的 create 操作。

目前我有：

产品#索引视图

```
 ...
 <%= button_to "Add to Cart", add_to_cart_path(:product_id => product), :method => :post %>
 ... 
```

路线

```
 ...
 post '/add_to_cart/:product_id' => 'carts#add_to_cart', :as => 'add_to_cart'
 ... 
```

推车控制器

```
 class CartsController < ApplicationController

 def show
   @cart = current_cart
 end

 def add_to_cart
   current_cart.add_item(params[:product_id])
   redirect_to cart_path(current_cart.id)
 end

 end 
```

购物车型号

```
class Cart < ActiveRecord::Base
has_many :items

def add_item(product_id)
        item = items.where('product_id = ?', product_id).first
    if item
        # increase the quantity of product in cart
        item.quantity + 1
        save
    else
        save # "THIS IS WHERE I WANT TO CALL ITEMS CONTROLLER CREATE"
    end
end 
```

物品控制器

```
class ItemsController < ApplicationController

def create
    @product = Product.find(params[:product_id])
    @item = Item.create!(:cart => current_cart, :product => @product, :quantity => 1, :unit_price => @product.price)
    redirect_to cart_path(current_cart.id)
end

end 
```

非常感谢我如何实现此重定向到我的创建操作的任何帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T20:10:07.163

您的`Cart`模型不能调用控制器方法，也不应该这样做。

您的方法应如下所示：

```
class Cart < ActiveRecord::Base
  has_many :items

  def add_item(product_id)
    item = items.find_or_create_by_product_id(product_id)
    item.quantity += 1
    item.save
  end
end 
```

然后你的`CartsController`. `add_item`方法可以将用户重定向到他们应该去的地方。

# vim - 仅当 Vim 中没有打开快速修复窗口时如何启用映射？

> ID：13208660
> 
> 赞同：2
> 
> 时间：2012-11-03T11:20:25.203
> 
> 标签：vim

我想在打开 quickfix 窗口时禁用以下映射。

```
map <F5> :ZoomWin<cr> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T11:42:58.337

你是说快修吗？如果是这样，有以下三种方法：

1.  使用`<expr>`映射：

    ```
    nnoremap <expr> <F5> (&buftype is# "quickfix" ? "" : ":\<C-u>ZoomWin\n") 
    ```

2.  使用 BufEnter 事件设置/恢复映射：

    ```
    augroup F5Map
        autocmd! BufEnter * :if &buftype is# 'quickfix' | nunmap <F5> | else | nnoremap <F5> :<C-u>ZoomWin<CR> | endif
    augroup END 
    ```

3.  仅为需要的缓冲区在本地创建映射：

    ```
    augroup F5Map
        autocmd! BufEnter * :if &buftype isnot# 'quickfix' && empty(maparg('<F5>')) | nnoremap <buffer> <F5> :<C-u>ZoomWin<CR> | endif
    augroup END 
    ```

**更新**：要在任何打开的窗口包含快速修复缓冲区时禁用映射，请使用以下命令：

```
nnoremap <expr> <F5> (&buftype is# "quickfix" || empty(filter(tabpagebuflist(), 'getbufvar(v:val, "&buftype") is# "quickfix"')) ? ":\<C-u>ZoomWin\n" : "") 
```

# macos - NSView 自动调整大小（垂直）

> ID：13208661
> 
> 赞同：0
> 
> 时间：2012-11-03T11:20:34.183
> 
> 标签：macos, cocoa, nsview

是否可以让 NSView 自动调整大小（垂直）以适应其内容？内容只是两个 NSTextField，一个（在视图顶部）始终具有相同的高度，另一个（靠近视图底部）具有可变高度。

可能使它变得更加困难的是 NSView 是 NSCollectionViewItem 的视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:18:47.970

问题是在计算高度之前需要知道宽度。一个成功的实现需要两个布局循环。第一个确定宽度。然后取该宽度并计算高度。然后添加或修改约束以反映高度和布局必须再次发生。

为了实现这一点，我将视图子类化以在本地存储帧大小的副本。当视图的内容发生变化时，我会将宽度清除为零。如果发现实际的框架矩形宽度与布局后存储的宽度不同，那么我知道需要计算高度，并且在宽度变化导致高度变化的情况下需要执行另一个布局。

# php - 搜索 PHP 和 MYSQL

> ID：13208664
> 
> 赞同：1
> 
> 时间：2012-11-03T11:20:40.357
> 
> 标签：php, mysql

我需要 mysql 代码或 php 来处理一些搜索查询

假设我们的商店中有这 5 件商品。

```
ID | TYPE   | Pattern

1\. | Kilner | scissor
2\. | Kilner | forcep
3\. | Boyd   | scissor Small
4\. | Boyd   | scissor large
5\. | Boyd   | forcep
6\. | Boyd   | clamp 
```

**你能帮我用mysql查询来处理下面的操作吗**

如果我们搜索“boyd”，那么应该会出现数字 3 4 5 和 6。

如果我们搜索“剪刀”，那么应该会出现数字 1、3 和 4。

如果我们搜索“boyd scissor”，应该会出现数字 3 和 4。

如果他们搜索“Kilner scissor”，则不应显示 1。

让我知道谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:24:59.960

在mysql中做到这一点的方法是全文搜索

```
SELECT *, MATCH(field) AGAINST ('word1 word2 word3') AS score
FROM table
WHERE MATCH(field) AGAINST('word1 word2 word3') 
```

看这个教程[http://devzone.zend.com/26/using-mysql-full-text-searching/](http://devzone.zend.com/26/using-mysql-full-text-searching/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:22:26.530

试试这个查询

```
SELECT * FROM `table` WHERE `name` LIKE '%$search_var%' 
```

PDO结构

```
$db = $this->pdo->prepare("SELECT * FROM `table` WHERE `name` LIKE :mysearch");
$db->execute( array("mysearch"=>'%'.$mysearch.'%') ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T12:59:20.387

```
$search=array('byod','scissor');
$st=""; $st2="";
foreach($search as $value){$st.="type=%$value% or ";$st2.="pattern=%$value% or ";}
$st2=substr($st2,0,-3);
echo "select * from tablename where $st $st2"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T12:18:46.830

你问的问题有点复杂。您想在*两*列中返回匹配项，但如果两列都匹配，则必须丢弃单个匹配项。

这意味着，以一种或另一种方式，运行一个需要两个匹配项和一个需要一个匹配项的查询，比较结果并返回适当的集合。

性能方面，我认为最好运行一个查询来获取两者，然后在 PHP 中处理结果（您可以通过使用超级查询在 MySQL 中处理它们）。

所以：

```
// We split keywords
$keywords = array_unique(preg_split('/\s+/', $search));
$inset    = array();
foreach($keywords as $keyword)
    $inset[] = "'".mysql_real_escape_string($keyword)."'";
$sql_in   = '('.implode(',', $inset).')';

$query    = "SELECT *, IF(type IN $sql_in, 1,0)+IF(pattern IN $sql_in,1,0) AS matches FROM mytable WHERE (type IN $sql_in) OR (pattern IN $sql_in) ORDER BY matches DESC;"; 
```

上面使用了不鼓励的 mysql_ 函数。使用 PDO，这将是：

```
$keywords = array_unique(preg_split('/\s+/', $search));
// Generate a (?,?,?..?) template as long as $keywords
$sql_in   = '('.implode(',', array_fill(0, count($keywords), '?')).')';

$query    = "SELECT *, IF(type IN $sql_in, 1,0)+IF(pattern IN $sql_in,1,0) AS matches FROM mytable WHERE (type IN $sql_in) OR (pattern IN $sql_in) ORDER BY matches DESC;";
$st       = $db->prepare($query);
$st->execute($keywords); 
```

请注意，上面使用了**完全匹配**，因此“Boyd”将检索与“Boyd”的匹配，但“Boy”不会。使用`%`匹配的字符来改变这种行为。

现在我们检索一个与 MyTable 相同但有一个额外列“matches”的表，其中包含 2 或 1。由于限制，不能包含 0 `WHERE`：两个匹配项之一必须为真并计为 1。

2 将首先返回，所以我们可以这样做

```
if (!isset($matches))
    $matches = $tuple['matches'];
else
    if ($tuple['matches'] < $matches)
        break; 
```

也就是说，我们保存第一个（也是最高的）值，并且只为后续的元组接受该值。一旦出现劣质匹配，我们就退出循环并关闭光标。

这可以在 MySQL 中完成

```
SELECT * FROM ( the above query ) AS newTable
    WHERE matches = ( 
        SELECT MAX(matches) FROM ( the above query ) AS tmpTable
    ); 
```

但它会导致性能损失。

# java - 多线程 Swing 事件调度程序线程

> ID：13208668
> 
> 赞同：1
> 
> 时间：2012-11-03T11:21:02.727
> 
> 标签：java, multithreading, swing, event-dispatch-thread

我已经有一篇与多线程问题相关的帖子，但我有一些新问题+代码。我有一个多球游戏项目，它需要我解析一个 XML 文件以获取有关球的信息（如大小、速度、初始位置等）。现在，我想创建一个不同的线程来解析 XML 文件，但我想不出办法。这是我的代码：

main() 从这里开始：

```
public class BounceBallApp extends JFrame{

    public BounceBallApp()
    {
        setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        setTitle("BounceBallApp");          
        setSize(300,300);       
        setVisible(true);
        add(new BallWorld());
        validate();
    }

    public static void main(String[] args) 
    {
        /*Create main GUI in the Event Dispatch Thread*/
        SwingUtilities.invokeLater(new Runnable()
        {
            public void run()
            {
                new BounceBallApp(); //main frame
            }
        });

    }
} 
```

在 BallWorld() 的构造函数中，我有一个内部类 BallContainer()，其中包含一个开始按钮：

```
jbtStart.addActionListener(new ActionListener()
            {public void actionPerformed(ActionEvent e)
            {
                //Populate the ballList arraylist
                if(filePathField.getText().equals(" "))
                {
                    JOptionPane.showMessageDialog(null, "Please input the XML file","Information", JOptionPane.INFORMATION_MESSAGE);        
                }
                else
                {
                    XMLFilePath = filePathField.getText();

                    ballList = new BallList(XMLFilePath);//I want to put this in a thread
                    JOptionPane.showMessageDialog(null,"Game started!","Bouncing Balls",JOptionPane.INFORMATION_MESSAGE);
                    for(Ball ball:ballList.ballsArrayList) 
                    {
                        timer.setDelay(1000/ball.getSpeed()); //change the delay of the timer to the ball's speed
                        timer.start(); //start the timer
                        bTimer = true; //timer is now on                    
                    }
                }

            }
            });

        } 
```

现在的问题是，如果我将解析过程放在另一个线程中，那么我必须等待 ballsArrayList 填充，然后才能继续应用程序。我正在考虑使用 invokeAndWait() 但我读到无法从事件调度线程调用该方法。那么，我该如何实现呢？或者它甚至值得吗？另外，我想将移动球的计算（计算 x，y 坐标）移动到一个线程，但同样，我不知道如何实现它。

```
for(Ball ball:ballList.ballsArrayList) 
            {
                ball.draw(g);                   
                ball.move(ballContainerWidth,ballContainerHeight,buttonPanel.getHeight());                  
            }

public void move(int ballContainerWidth,int ballContainerHeight,int buttonPanelHeight)
 {

     if((this.getX()+this.getsize()+this.getDx()) > ballContainerWidth) 
        {
            this.setDx(-Math.abs(this.getDx()));
        }

        //the height/depth to which the balls can bounce is the (main ball container height) minus (button panel height)
        if((this.getY()+this.getsize()+this.getDy()) > ballContainerHeight-buttonPanelHeight) 
        {
            this.setDy(-Math.abs(this.getDy()));
        }

        if((this.getX()-this.getsize()) < 0 )
        {
            this.setDx(Math.abs(this.getDx()));
        }

        if((this.getY()-this.getsize()) < 0 )
        {
            this.setDy(Math.abs(this.getDy()));
        }

        int newX = (int)Math.round((this.getX()+this.getDx()));
        int newY = (int)Math.round((this.getY()+this.getDy()));
        this.setX(newX);
        this.setY(newY);
 } 
```

很抱歉这篇文章很长，但多线程对我来说是全新的。我对此有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:52:10.213

**文件的初始加载**

我个人会选择以下方法之一

*   通过在启动期间解析所有文件来增加程序的启动时间。对于一些 XML 文件，此开销可能非常小。如果时间过长，可以考虑显示[闪屏](http://docs.oracle.com/javase/tutorial/uiswing/misc/splashscreen.html)
*   按下开始按钮时加载 XML 文件，但在加载完成之前显示进度条。之后开始游戏。A`SwingWorker`可以帮助你解决这个问题。示例可以在[Swing 文档](http://docs.oracle.com/javase/tutorial/uiswing/components/progress.html)或[这里的 SO](https://stackoverflow.com/a/8917565/1076463)中找到。

**更新球位**

如果计算像这里显示的一样简单，我会简单地使用 a`javax.swing.Timer`定期更新位置，并在 Event Dispatch Thread 上进行计算。

如果您只想为练习在后台线程上进行计算，我仍然会选择在后台线程上计算位置。计算应该使用只有该后台线程知道的局部变量。计算出新位置后，使用 更新事件调度线程上球的位置`SwingUtilities#invokeLater`。这使您可以在操作期间访问该位置，`paint`而不必担心线程问题。可能比弄乱锁更容易。

# mysql - 如何扩展此表以支持修订历史记录

> ID：13208672
> 
> 赞同：0
> 
> 时间：2012-11-03T11:21:21.243
> 
> 标签：mysql, revision-history

我有 3 张桌子：

*   **价格表（ pricelist_id**，名称）
*   **价格**（price_id、pricelist_id、价格、注释）
*   **门票**（ticket_id、price_id、姓名、时间）

所以，版本化价格的主要原因是因为价格可以在未来改变，我想保留过去价格的信息用于统计，我想门票有真实价格，而不是未来改变的价格。

你能给我一些查询的例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:43:58.010

我想一种可能的方法是制作两个价格表而不是两个：第一个将存储一些与价格相关的通用数据（如“note”和“pricelist_id”链接，因为这些不会随时间变化），第二个将存储实际价格（可能还包括其激活的时间戳——但这不是必需的）：

```
prices         (price_id, pricelist_id, note)
price_versions (price_ver_id, price_id, price, started_at, ended_at)
tickets        (ticket_id, price_ver_id, name, issued_at) 
```

如您所见，您指的是`price_versions`在您`tickets`的获得具体价格。但是您也可以轻松地收集与价格相关的通用信息（通过`prices`从那里加入表格）。

这种方法可以让您构造一个额外的约束，检查它`issued_at`不在之前`started_at`和之后`ended_at`（它在相应的行中不是 NULL）。但我想这是一个补充，而不是要求。

# c - 是否可以在函数内部分配数组并使用引用返回它？

> ID：13208673
> 
> 赞同：4
> 
> 时间：2012-11-03T11:21:35.030
> 
> 标签：c, arrays, pointers, allocation

我试过使用三重指针，但它一直失败。代码：

```
#include <stdlib.h>
#include <stdio.h>

int set(int *** list) {
  int count, i;
  printf("Enter number:\n");
  scanf("%d", &count);
  (*list) = (int **) malloc ( sizeof (int) * count);

  for ( i = 0; i<count;i++ ) {
    (**list)[count] = 123;
  }
  return count;
}

int main ( int argc, char ** argv )
{
  int ** list;
  int count;

  count = set(&list);

  return 0;
} 
```

感谢您的任何建议

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T11:43:28.833

你所说的列表实际上是一个数组。您可以通过以下方式进行操作：

```
#include <stdlib.h>
#include <stdio.h>

ssize_t set(int ** ppList) 
{
  ssize_t count = -1;

  printf("Enter number:\n");
  scanf("%zd", &count);

  if (0 <= count)
  {
    (*ppList) = malloc(count * sizeof **ppList);

    if (*ppList)
    {
      size_t i = 0;
      for (; i < count; ++i)
      {
        (*ppList)[i] = 42;
      }
    }
    else
    {
      count = -1;
    }
  }

  return count;
}

int main (void)
{
  int * pList = NULL;
  size_t count = 0;

  {
    ssize_t result = set(&pList);

    if (0 > result)
    {
      perror("set() failed");
    }
    else
    {
      count = result;
    }
  }

  if (count)
  {
    /* use pList */
  }

  ...

  free(pList);

  return 0;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-03T11:44:54.697

据我了解您的问题，您想返回一个在另一个函数中分配的数组：这是这个的简单版本

```
#include<stdio.h>
#include<stdlib.h>
int* set(int *list) {
  int count, i;
  printf("Enter number:\n");
  scanf("%d", &count);
  list = (int *) malloc ( sizeof (int) * count);

  for ( i = 0; i<count;i++ ) {
    list[i] = 123;
  }

  return list;
}

int main ( int argc, char ** argv )
{
  int *list;
  list = set(list);
  //Use whatever you want to do with that array 
  free(list); // don't forget to free
  return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T11:32:06.870

你有一个整数数组的数组。让我们仔细看看你的 set 函数：

```
for (i = 0; i < count;i++ ) {
    (**list)[count] = 123;
} 
```

如您所见，您将每个数组对象都视为整数值。那应该是一个嵌套循环：

```
for (i to n)
    // allocate each array
    for (k to m)
        // assign value for each value of array 
```

# xcode - 雪豹上的iOS6开发

> ID：13208675
> 
> 赞同：1
> 
> 时间：2012-11-03T11:21:40.650
> 
> 标签：xcode, xcode4, osx-snow-leopard, osx-mountain-lion, downgrade

我现在在山狮，但电池寿命很糟糕，我正在考虑降级回雪豹。唯一的问题是，既然我们必须为 iPhone 5 的 4 英寸屏幕提交我们的应用程序，那么在 SL 上支持的最后一个 Xcode 构建（我相信是 4.2？）能够构建这些应用程序吗？还是我完全停留在 ML 上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:25:29.830

可以使用 4 英寸 iPhone 模拟器的最新 Xcode 仅在 Mountain Lion 上运行。

**但是，**如果您不介意不使用 Xcode，您可以提取工具链的基本部分（编译器和头文件 + 库）并`clang`从命令行使用编译器 - 即使在 SnowLeopard 上它也应该可以正常运行并编译您的应用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:26:05.003

你被山狮困住了！:) Xcode 4.2 不支持 ios6，既不支持 iphone 5 也不支持 ipad mini

# c++ - 在项目中包含 Qt 插件/库

> ID：13208679
> 
> 赞同：0
> 
> 时间：2012-11-03T11:22:01.057
> 
> 标签：c++, windows, qt

有没有办法在项目中包含插件和 Qt 的库？我想制作类似于便携的可执行文件。我不喜欢 RarSFX 或类似的东西。还有其他方法吗？我听说我可以将 DLL 放在项目资源中并从那里使用，但我不知道该怎么做。谢谢！

# java - 如果没有单击任何项 目，如何清除 JTable 和 JList 中的选择？

> ID：13208682
> 
> 赞同：0
> 
> 时间：2012-11-03T11:22:33.307
> 
> 标签：java, swing, jtable, jlist

我在这里寻找这个答案，但没有找到，所以如果有人需要，我会在下面写下我自己的答案。

如果需要，请随时更正任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:22:33.307

因此，为了为这两种情况（JList 和 JTable）制定解决方案，我制作了一个自定义侦听器，该侦听器将应用于相关列表和表格。

听众是：

```
public class DeselectOnClickListener extends MouseAdapter
{   
    @Override
    public void mouseClicked(MouseEvent e) {
        super.mouseClicked(e);
        clearselection(e);      
    }

    @Override
    public void mousePressed(MouseEvent e) {
        super.mousePressed(e);
        clearselection(e);
    }

    @Override
    public void mouseReleased(MouseEvent e) {
        super.mouseReleased(e);
        clearselection(e);
    }

    public void clearselection (MouseEvent e){      
        if (e.getComponent() instanceof JTable){
            Point pClicked = e.getPoint();
            JTable table = (JTable) e.getSource();
            int index = table.rowAtPoint(pClicked);
            if (index == -1){
                table.clearSelection();
            }

        } else if (e.getComponent() instanceof JList){
            Point pClicked = e.getPoint();
            JList<?> list = (JList<?>) e.getSource();
            int index = list.locationToIndex(pClicked);
            Rectangle rec = list.getCellBounds(index, index);
            if (rec==null || !rec.contains(pClicked)){
                list.clearSelection();
            }
        }
    }
} 
```

请注意，这在 中效果很好`SINGLE_SELECCTION`，但是如果我们想使用`MULTIPLE_INTERVAL_SELECTION`或者`SINGLE_INTERVAL_SELECTION`我建议不要覆盖`mouseReleased(MouseEvent e)`，因为如果在选择范围之外释放鼠标按钮，它将清除选择。

PD：对于最后一点，我做了以下修复：

```
@Override
    public void mouseReleased(MouseEvent e) {
        super.mouseReleased(e);
        if (! isIntervalSelectionMode(e)){
            clearselection(e);
        }
    }

    public boolean isIntervalSelectionMode (MouseEvent e){
        boolean isIntervalSelection = false;
        if (e.getComponent() instanceof JTable){
            isIntervalSelection = ((JTable)e.getSource()).getSelectionModel().getSelectionMode() 
                        != ListSelectionModel.SINGLE_SELECTION;
        }else if (e.getComponent() instanceof JList){
            isIntervalSelection = ((JList<?>)e.getSource()).getSelectionModel().getSelectionMode() 
                    != ListSelectionModel.SINGLE_SELECTION;
        }
        return isIntervalSelection;
    } 
```

# python - 默认情况下未找到数据源名称且未指定驱动程序 (0) (SQLDriverConnect)。将 Python 连接到 Access

> ID：13208688
> 
> 赞同：1
> 
> 时间：2012-11-03T11:22:49.120
> 
> 标签：python, ms-access, python-2.7, ms-access-2007, pyodbc

> **可能重复：**
> [与 Access 数据库的连接错误](https://stackoverflow.com/questions/12800101/connection-error-to-access-database)

我在连接到 Northwind.accdb 数据库的 python 上编写了程序

```
import pyodbc
#import kinterbasdb
import firebirdsql
import os, sys
import json,sqlite3,sql
sys.version_info
s1='''
create table CLIENTS
    (
       ID    INTEGER NOT NULL,
       COMPANY   VARCHAR(50),
       "LAST NAME"   VARCHAR(50),
       "FIRST NAME"   VARCHAR(50),
       "E-MAIL ADDRESS"   VARCHAR(50),
       "JOB TITLE"   VARCHAR(50),
       "BUSINESS PHONE"   VARCHAR(25),
       "HOME PHONE"   VARCHAR(25),
       "MOBILE PHONE"   VARCHAR(25),
       "FAX NUMBER"   VARCHAR(25),
       ADDRESS   BLOB SUB_TYPE 1,
       CITY   VARCHAR(50),
       "STATE/PROVINCE"   VARCHAR(50),
       "ZIP/POSTAL CODE"   VARCHAR(15),
       "COUNTRY/REGION"   VARCHAR(50),
       "WEB-SITE"   VARCHAR(25),
       NOTES   BLOB SUB_TYPE 1,
       INCLUDING   BLOB,
       CONSTRAINT PK_CLIENTS_ID PRIMARY KEY(ID)
    );
'''
s2='''create ascending index IDX_CLIENTS_CITY on CLIENTS (CITY);'''
#os.remove('D:/ThirdTask/test1.fdb')
conn=firebirdsql.create_database(host='localhost', database='/test1.fdb', user='sysdba', password='masterkey')
#con=firebirdsql.connect(host='localhost',database='D:/ThirdTask/test1.fdb', user='sysdba', password='masterkey')
cur=conn.cursor()
cur.execute(s1)
#cur.execute(s2)
conn.commit()
conAcc = pyodbc.connect('DRIVER={Microsoft Access Driver (*.accdb)};DBQ=Northwind.accdb')
conn.close() 
```

结果一开始我收到了一个让我非常困惑的错误

```
Traceback (most recent call last):
  File "D:\ThirdTask\connecttwo.py", line 39, in <module>
    conAcc = pyodbc.connect('DRIVER={Microsoft Access Driver (*.accdb)};DBQ=Northwind.accdb')
Error: ('IM002', '[IM002] [Microsoft][\xc4\xe8\xf1\xef\xe5\xf2\xf7\xe5\xf0 \xe4\xf0\xe0\xe9\xe2\xe5\xf0\xee\xe2 ODBC] \xc8\xf1\xf2\xee\xf7\xed\xe8\xea \xe4\xe0\xed\xed\xfb\xf5 \xed\xe5 \xed\xe0\xe9\xe4\xe5\xed \xe8 \xed\xe5 \xf3\xea\xe0\xe7\xe0\xed \xe4\xf0\xe0\xe9\xe2\xe5\xf0, \xe8\xf1\xef\xee\xeb\xfc\xe7\xf3\xe5\xec\xfb\xe9 \xef\xee \xf3\xec\xee\xeb\xf7\xe0\xed\xe8\xfe (0) (SQLDriverConnect)') 
```

翻译成英文的意思是

```
Error: ('IM002', '[IM002] [Microsoft][Driver Manager ODBC] Data source name not found and no driver specified by default (0)(SQLDriverConnect)') 
```

我使用 32 位 Python 2.7 和 32 位 pyodbc。

# java - 线程“main”中的异常 java.lang.IndexOutOfBoundsException - Java

> ID：13208689
> 
> 赞同：0
> 
> 时间：2012-11-03T11:22:52.380
> 
> 标签：java, matrix, indexoutofboundsexception

我正在尝试使用数据库中的数据创建一个稀疏矩阵。这是我的代码：

```
package helloworld;

import cern.colt.matrix.impl.RCDoubleMatrix2D;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.PrintWriter;
import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.SQLException;
import java.sql.Statement;
import java.util.ArrayList;
import java.util.List;

public class CreateVectors {

    public static void main(String[] args) throws IOException {

        Connection conn = null;
        Statement stmt = null;
        ResultSet rs = null;

        String url = "jdbc:mysql://localhost:3306/kdd";
        String user = "user";
        String password = "pass";

        List<Integer> wordsList = new ArrayList<Integer>();
        List<Integer> adsList = new ArrayList<Integer>();

        try {
            conn = DriverManager.getConnection(url, user, password);
            stmt = conn.createStatement();
//create wordsList
            String sqlQuery = "Select wordID from wtpji_normalized_ordered group by wordID";
            rs = stmt.executeQuery(sqlQuery);

            while (rs.next()) {
                wordsList.add(rs.getInt(1));
            }
            rs.close();
            System.out.println("wordsList");
//create adsList
            sqlQuery = "Select adID from wtpji_normalized_ordered group by adID";
            rs = stmt.executeQuery(sqlQuery);
            while (rs.next()) {
                adsList.add(rs.getInt(1));
            }
            rs.close();
            System.out.println("adsList");
//create one vector     
            RCDoubleMatrix2D mymatrix = new RCDoubleMatrix2D(5, adsList.size());
            int adSayac = 0, wordSayac;
            mymatrix.assign(0);
            for (wordSayac = 0; wordSayac < 5; wordSayac++) { 
                sqlQuery = "Select adID, Nwtpji from wtpji_normalized_ordered where wordID=" + wordsList.get(wordSayac);
                System.out.println("where WordID= " + wordsList.get(wordSayac));
                rs = stmt.executeQuery(sqlQuery);                
                rs.first();
                while(!rs.isLast()){
                    if (adsList.get(adSayac) == rs.getInt(1)) {
                        float Fwtpji = rs.getFloat(2);
                        double Dwtpji = Fwtpji;
                        Dwtpji = Math.floor(Dwtpji * 100) / 100;
                        mymatrix.setQuick(wordSayac, adSayac, Dwtpji);
                        adSayac++;
                        rs.next();
                    }
                    else{
                        adSayac++;
                    }
                }

                    System.out.println(wordsList.get(wordSayac));
                    rs.close();
                    System.out.println("Close resultset");
            }

                     System.out.println("FINITO");
        } catch (SQLException ex) {
        } finally {
            try {
                if (rs != null) {
                    rs.close();
                }
                if (stmt != null) {
                    stmt.close();
                }
                if (conn != null) {
                    conn.close();
                }
            } catch (SQLException ex) {
            }
        }
    }
} 
```

我想创建具有 5 行和原始列大小 adsList.size()=641707 的备用矩阵。for (wordSayac = 0; wordSayac < 5; wordSayac++) 语句适用于 wordSayac=0 但在执行 wordSayac=1 时，我收到错误：索引超出范围。这是程序的输出：

```
0
Close resultset
where WordID= 1
Exception in thread "main" java.lang.IndexOutOfBoundsException: Index: 641707, Size: 641707
    at java.util.ArrayList.RangeCheck(ArrayList.java:547)
    at java.util.ArrayList.get(ArrayList.java:322)
    at helloworld.CreateVectors.main(CreateVectors.java:95)
Java Result: 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:30:21.240

您的代码中的问题是您在开始 for 循环之前分配了 adSayac = 0，但在第一次迭代之后您没有将其分配回 0，这意味着无论 wordSayac=0 的值结束，现在执行 wordSayac=1 时使用的第一个值，依此类推。

您可能希望将其分配回零作为 for 循环内的第一行。

# c# - File.Delete 在尝试删除打开的文件时失败，但在进程退出时删除？

> ID：13208690
> 
> 赞同：3
> 
> 时间：2012-11-03T11:23:12.223
> 
> 标签：c#, .net

在调用`File.Delete(file_path)`在另一个进程中打开的文件时，尝试失败并出现无法访问错误，但在退出应用程序时（从进行尝试的位置），文件会自动删除。尝试后`File.Delete`，任何其他操作都无法访问该路径。

我需要在删除时失败并让路径可以通过应用程序访问，或者完全删除文件，而不是在应用程序退出时。

那么我的代码是这样的：

```
 private bool DeleteFilesAsync(string FileToDelete)
 {
    try
    {
            //Set file's attribute to normal if it is ReadOnly file
            File.SetAttributes(FileToDelete, FileAttributes.Normal);

            File.Delete(FileToDelete);
           //Some bussiness logic to update file's status in database

        return true;
    }
    catch (Exception ex)
    {
        //log the error
         return false;
    }
} 
```

这里有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T13:39:35.110

Windows 确实具有最后关闭时删除功能。所有删除都以这种方式处理。这在实践中几乎从未发生过的唯一原因是因为大多数应用程序不会打开文件，`FILE_SHARE_DELETE`因此无法删除使用过的文件。但是在内核级别，所有删除都是关闭时删除。

可能有一种方法可以通过调用`NtSetInformationFile`设置`FileDispositionInfo`类来清除删除标志。这假定可以清除删除标志。很可能是这样。

无论如何，更明智的方法是在删除文件之前打开文件以确保独占访问可用：

```
using(new FileStream(path, FileMode.Open, FileAccess.ReadWrite, FileShare.None)) { } 
```

在这一行无一例外地通过之后，我们知道该文件在打开时未被使用。当然，它可能会在此行之后立即被其他人打开，但也许这个解决方案对你来说已经足够了。

# php - imagecolorset not working

> ID：13208693
> 
> 赞同：0
> 
> 时间：2012-11-03T11:23:57.237
> 
> 标签：php, image, image-processing

I'm creating a website where user can edit images. For changing the colour of a png file, I use the following code.

```
$im = imagecreatefrompng ("image/white-round.png");
$index = imagecolorclosest ( $im,  255,255,255 ); 

imagecolorset($im,$index,0,0,255); 

$imgname = "image/white-round.png";

imagepng($im,$imgname );
imagedestroy($im); 
```

I'm getting `$index`, but `imagecolorset($im,$index,0,0,255);` is not working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T17:21:41.800

imagecolorset() doesn't work for me.

But imagefill() works fine for me.

Refer [http://www.tuxradar.com/practicalphp/11/2/8](http://www.tuxradar.com/practicalphp/11/2/8)

# java - http 从 jsp 获取并解析状态码

> ID：13208696
> 
> 赞同：1
> 
> 时间：2012-11-03T11:24:22.140
> 
> 标签：java, spring, http, jsp, servlets

我需要通过 jsp 向某个 URL 发送 http 请求（通过单击链接/按钮）。根据 http 响应状态代码，我需要在 jsp 中生成相应的输出（200 - 操作 OK，404 - 未知操作等，URL 的内容无关紧要）。有没有办法实现这种行为？

我正在使用弹簧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:41:35.470

首先使用 AJAX 将您的请求发送到 servlet，然后从 servlet 调用您想要的 url。从该 url 响应中，您可以`int status = response.getStatus();`在 servlet 中的 HttpServletResponse 对象上使用，并根据`int`您获得的值，您可以编写 if else 语句和use`PrintWriter`的`println`方法将响应/文本发送到您的 jsp 上的 ajax 调用，并在该 jsp 页面中的任何位置使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:41:00.650

您可以使用 jquery 并使用其 ajax 方法进行 ajax 调用，并使用它成功/错误回调方法来获取 textStatus

# css - Joomla 模块位置不起作用

> ID：13208698
> 
> 赞同：0
> 
> 时间：2012-11-03T11:24:25.610
> 
> 标签：css, joomla, joomla-module

我正在使用 Joomla，据我所知，我已经为我的模板做了所有正确的事情，但无法让模块位置正常工作

我认为我有正确的 XML 文件设置，这是我的 HTML 标记：

```
 <jdoc:include type="modules" name="topnav"> 
```

如果您查看正在呈现该标签的页面源，该页面是 X - 我希望它会消失，并被我告诉 Joomla 后端放在那里的内容替换？

很迷茫！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:54:58.910

试试这个-

```
<jdoc:include type="modules" name="topnav" /> 
```

您缺少结束标签。

如果这不起作用，请告诉我。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:51:31.173

他们怎么不工作？职位是否在管理员中更新，但不在网站上？或者他们也没有在管理页面中更新？根据我对 Joomla 的记忆，您必须在重新排列所有位置后单击“保存”图标。

# php - 查询一段时间内的订单百分比和订单数量

> ID：13208699
> 
> 赞同：0
> 
> 时间：2012-11-03T11:24:40.453
> 
> 标签：php, mysql, count, percentage

我有一个“用户订单”表，其中包含 orderID、userID、orderStatus（可以是 1、2、3）和 orderTime。

我想计算最后 150 个订单的百分比，在过去 6 个月中，用户 ID = 1，其 orderStatus 为 1。

我尝试为两个订单状态（1、2/3）编写两个查询，然后计算订单百分比，但我的查询不正确。

我的代码和查询：

```
$rs1 = mysql_query("select count(*) as orderCount1 from userorders where 
         orderStatus = 1 and orderID in (select top 150 orderID from userorders where 
          userid = 1 and orderStatus in (1,2,3)  and  
         orderTime > ".strtotime("-6 month")." oder by orderID desc)") or  
         die (mysql_error());

$rs2 = mysql_query("select count(*) as orderCount1 from userorders where 
         orderStatus in (2,3) and orderID in (select top 150 orderID from userorders where 
          userid = 1 and orderStatus in (1,2,3)  and  
         orderTime > ".strtotime("-6 month")." order by orderID desc)") or  
         die (mysql_error());

$orderCount1 = $rs1['orderCount1'];
$orderCount2 = $rs2['orderCount2'];

$orderPercent = ($orderCount1/ $orderCount1+$orderCount2)*100; 
```

我该如何解决问题或改进我的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T22:14:15.283

我找到了正确的查询。

它有一个具有最多条件的主查询，订单百分比是根据主查询的输出计算得出的：

```
$rs = mysql_query("select (sum(case when orderStatus = 1 then 1 else 0 end) 
         /count(orderStatus))*100 as percentage from (select orderStatus from  
         userorders where orderStatus in (1,2,3) and userid = 1 and  
         orderTime > ".strtotime("-6 month")."  order by orderID desc limit 
          150) tempTable") or die (mysql_error());

$percentage1 = $rs['percentage']; 
```

对于 orderStaus 2,3

```
$percentage2 = 100 - $percentage1; 
```

# android - 单击电子邮件地址将其加载为网页以及 webview

> ID：13208713
> 
> 赞同：0
> 
> 时间：2012-11-03T11:25:58.270
> 
> 标签：android, android-webview

我正在开发一个类似于网络浏览器的应用程序。现在，当我单击通过 WebView 显示的网页中的电子邮件地址时，会发生以下情况：

1.  显示一组电子邮件客户端供我选择
2.  webview 尝试加载 url，“mailto:abc@xyz.com”，并在找不到 url 时显示错误页面。

我试图弄清楚如何解决 No.2 中的问题。

基本上，我不需要应用程序加载包含“mailto：”的 url。

这是我试图做但失败的事情：

1.  在“shouldOverrideUrlLoading()”下，

    ```
    if( url.startsWith("mailto") )
    {
        /*Do the stuff for sending email but i will not display */
         url = null;
    } 
    ```

2.  在 view.loadurl(url) 之前，添加了一个

    ```
    if( !url.startsWith("mailto:") )
         view.loadurl(url); 
    ```

我知道这些是黑客，不是很优雅。因此，有人可以指出我正确的道路吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T15:04:39.733

尝试使用`return true;`in`shouldOverrideUrlLoading()`方法。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T01:13:26.773

Ravi Bhatt 的回答是正确的。在函数结束时，它应该返回 true；

但是您必须手动捕获包含 http 或 https 的任何 url 并加载该 url。这就是我的意思：

在 shouldOverrideUrlLoading() 下，

```
else if( url.startsWith("http:") || url.startsWith("https:") )
{
    view.loadUrl(url); //u can use the default webview or your own webview            
}

/*At the end of the function*/                
return true; 
```

如果您在某处输入 return false ，它也将不起作用。url = null 也无济于事。

希望这可以帮助其他与我有类似问题的人。

# java - 比较两个arrayList中的单词 爪哇

> ID：13208717
> 
> 赞同：0
> 
> 时间：2012-11-03T11:26:21.553
> 
> 标签：java, string, arraylist, word, string-comparison

我有两个字符串数组列表，我想计算它们中的单词。

每个 ArrayList 都包含关键短语，例如几个单词的字符串，例如：

超衰退

斯特拉达隆加

奥巴马总统

[...]

我尝试了这两种方法，但我得到了 NullPointerException

```
 public boolean containsKeyword(String testKeyword, ArrayList<String> list) 
{ return list.contains(testKeyword);
}

public int compareKeywords(Quotidiano quotidiano){
    int sameKeywords=0;
    for(int i=0; i<this.Keywords.size(); i++){
            if(this.containsKeyword(this.getKeyword(i), quotidiano.Keywords))
             sameKeywords++;
          }

    return sameKeywords;
} 
```

非常感谢您的回答！

* * *

[编辑]

它使用交叉点工作，谢谢！但是如果比较单个单词会更好。

例如，如果我有关键词

“意大利的传播”，

“价差低于 300”，

我认为交集是空的，而不是我想返回“传播”。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:32:52.410

使用[Apache ListUtils 交集](http://commons.apache.org/collections/api-2.1.1/org/apache/commons/collections/ListUtils.html#intersection%28java.util.List,%20java.util.List%29)

```
public static java.util.List intersection(java.util.List list1,
                                      java.util.List list2) 
```

PS：这会抛出`java.lang.NullPointerException`- 如果任一列表为空

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:35:55.667

每当您从未知来源获得输入时，您都应该检查 null。你不应该认为输入是好的。

```
public boolean containsKeyword(String testKeyword, ArrayList<String> list) 
{ 
    return (list != null) ? list.contains(testKeyword) : false;
}

public int compareKeywords(Quotidiano quotidiano){
    if(quotidiano == null || this.Keywords == null) return 0;
    int sameKeywords=0;
     for(int i=0; i<this.Keywords.size(); i++){
        if(this.containsKeyword(this.getKeyword(i), quotidiano.Keywords))
         sameKeywords++;
    }

    return sameKeywords;
} 
```

检查 this.Keyword 是可选的，因为我假设这是您的代码，并且您知道它应该始终与 null 不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T11:38:38.333

`NullPointerException`当您使用任何对象的成员并且该对象尚未初始化时发生。确保两个列表都已初始化并且不为空。

# php - 从逗号分隔的字符串中选择 PHP 和 MySql

> ID：13208721
> 
> 赞同：-2
> 
> 时间：2012-11-03T11:28:00.803
> 
> 标签：php, mysql

我有这个：

```
$string = "battery,lighter,phone"; 
```

我有一个`users`包含每个用户标签的表。

如何`select`使用 sql`where tags = $string`和`where email = '$usermail'`;

我只想检索基于`user email`和`user stored tags`在表格中用逗号分隔的数据，如上面的字符串

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:54:07.643

如果您只选择一个标签，您可以使用

```
 select bits where tag like '%select_value' and email = 'email_value' 
```

如果您需要挑选多个标签，则需要解析 csv。这是一个更大的挑战。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:45:28.503

答案已更新：鉴于其他评论中列出的表格：

```
SELECT p.id, p.p_title, p.categoryname, u.id, u.user_email, u.my_choices
  FROM users u
  JOIN products p
    ON FIND_IN_SET(p.categoryname, u.my_choices)
 WHERE u.email = 'email_value' 
```

MySQL 有一个[FIND_IN_SET()](http://dev.mysql.com/doc/refman/5.5/en//string-functions.html#function_find-in-set)函数可能适合您的目的。在这种特殊情况下，将返回在用户的“my_choices”中具有“categoryname”的所有产品。

让我知道这是否适合你，

约翰...

# asp.net-mvc-3 - 如何维护 2 个不同浏览器的会话？

> ID：13208723
> 
> 赞同：0
> 
> 时间：2012-11-03T11:28:09.353
> 
> 标签：asp.net-mvc-3, session, browser

我在 ASP.net MVC3 中完成了项目。在我的项目中，我在 Home Controller 中创建如下会话

```
if (Session["ulclass"] == null)
     {
                    Session["ulclass"] = "list";
     } 
```

我将此会话用于我的产品列表页面.. 作为 div 标签的类，如下所示..

```
<div id="listheading" class="listHead" @if (Session["ulclass"].ToString() == "grid")
                                       {
                                           <text>style = "display:none;";</text>
                                       }> 
```

当我将此 Productlist URL 从 FireFox 复制到 Chrome 时...会话值未出现...它会产生错误...

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:32:06.963

您可以使用无 cookie 会话。这样，会话 id 会在 URL 中而不是 cookie 中发送，因此您可以将 URL 复制到任何地方，您仍然处于同一个会话中。

把它放在 web.config 中：

```
<sessionState cookieless="true" /> 
```

（当然，缺点是任何人都可以在任何地方复制 URL 并且仍然在您的会话中......）

有关无 cookie 会话的更多信息：http: [//msdn.microsoft.com/en-us/library/aa479314.aspx](http://msdn.microsoft.com/en-us/library/aa479314.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T10:02:41.807

先使用 Convert.ToString(Session["ulclass"]) == "grid" 避免报错，然后在 we.config 中添加

# java - 在 vaadin 中处理外部请求

> ID：13208724
> 
> 赞同：0
> 
> 时间：2012-11-03T11:28:27.917
> 
> 标签：java, jakarta-ee, servlets, vaadin

我有一个记录声音然后上传到服务器的小程序。录音部分已完成，但我卡在上传部分。我的小程序与 vaadin 应用程序集成。我已经成功地使用我的小程序和 vaadin 服务器端进行了请求响应周期。但我无法通过其输出流发送任何数据。我的代码是：

```
 connection = ( HttpURLConnection ) new URL( "http://localhost:8080/CheckResponse/" ).openConnection();
            connection.setRequestMethod( "POST" );  
            connection.setDoOutput( true );  
            connection.setDoInput(true);
            connection.addRequestProperty("applet", "sound recording applet");
            //CREATE A WRITER FOR OUTPUT  
            //outWriter = new PrintWriter( connection.getOutputStream() );  
            OutputStreamWriter outWriterS = new   OutputStreamWriter(connection.getOutputStream());
            buff.append( "param1=" );   
            buff.append( URLEncoder.encode( "Param 1 Value", "UTF-8" ) );  
            buff.append( "&" );  
            buff.append( "param2=" );   
            buff.append( URLEncoder.encode( "Param 2 Value", "UTF-8" ) );  

            outWriterS.write(buff.toString());
            outWriterS.flush();
            outWriterS.close();

            //RESPONSE STREAM  
            serverResponse = new BufferedReader( new InputStreamReader( connection.getInputStream() ) );  

            //READ THE RESPOSNE  
            String line2;  
            while ( (line2 = serverResponse.readLine() ) != null )   
            {  
            System.out.println( line2 );  
            } 
```

在服务器端代码：

```
 public void onRequestStart(HttpServletRequest request,
        HttpServletResponse response) {
    // TODO Auto-generated method stub
    try {
        if(request.getHeader("applet")!=null){
            System.out.println("Request started by applet");
        if(request.getHeader("applet").equalsIgnoreCase("sound recording applet")){
            System.out.println("Reading the streams");
        InputStreamReader reader = new InputStreamReader(request.getInputStream());

        BufferedReader buff = new BufferedReader(reader);
        System.out.println("Buffer"+buff);
        System.out.println("Buffer has :"+buff.readLine());
        }
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    //System.out.println("Request started");

} 
```

bufferReader.readLine() 返回空值。可能是什么原因？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:37:51.333

您正在使用`bufferReader.readLine()`从您的小程序客户端客户端读取流，但似乎没有发送任何换行符。尝试使用：

```
outWriterS.write(buff.toString() + "\n"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T12:41:56.773

如果没有在这里专门分析您的代码，我认为 Vaadin 不太支持这种方法。因此，也许正确的方法是与 Vaadin 应用程序一起使用一个单独的 servlet。（无论如何，Vaadin 应用程序本身实际上就是一个 servlet）。这样您就可以使用标准的 HTTP 请求/响应处理。

此外，当您处理潜在的大文件时，您可能会使用多部分数据。例如，请参阅[如何使用 Java 发出 multipart/form-data POST 请求？](https://stackoverflow.com/questions/1378920/how-can-i-make-a-multipart-form-data-post-request-using-java)

# drupal - Aegir-up (Aegir+Vagrant+Drush) 设置

> ID：13208727
> 
> 赞同：0
> 
> 时间：2012-11-03T11:28:46.147
> 
> 标签：drupal, vagrant, drush

我正在尝试使用[Aegir-up](http://drupal.org/project/aegir-up)（基于 Vagrant 的 Aegir 虚拟机）建立一个合适的 Drupal 开发环境。我将说明我如何遵循以下“快速启动”步骤并失败：

安装依赖项，包括 drush-vagrant 和 drush-hosts：

```
 C:\Users\Domas>drush dl drush-vagrant drush-hosts
    Install location C:\Users\Domas/.drush/drush-vagrant already exists. Do you want to overwr
    ite it? (y/n): y
    Project drush-vagrant (7.x-2.0-beta6) downloaded to                              [success]
    C:\Users\Domas/.drush/drush-vagrant.
    Project drush-vagrant contains 0 modules: .
    Install location C:\Users\Domas/.drush/drush-hosts already exists. Do you want to overwrit
    e it? (y/n): y
    Project drush-hosts (7.x-1.1) downloaded to C:\Users\Domas/.drush/drush-hosts.   [success]

    Project drush-hosts contains 0 modules: . 
```

我不知道“包含 0 个模块”是否重要。我尝试安装 aegir-up：

```
 C:\Users\Domas>drush dl aegir-up
    Install location C:\Users\Domas/.drush/aegir-up already exists. Do you want to overwrite i
    t? (y/n): y
    Project aegir-up (7.x-2.0-alpha1) downloaded to C:\Users\Domas/.drush/aegir-up.  [success]

    Project aegir-up contains 0 modules: . 
```

最后，我运行 vagrant-build 来启动一个 vagrant 项目（我想），这就是它失败的地方：

```
 C:\Users\Domas>drush vagrant-build --blueprint=aegir
    The name of your project may be used in URLs, and so should only contain lower-case letter
    s and numbers.
    It may also contain hyphens (-) and dots (.), so long as they do not come at the beginning
     or end of the name.
    What would you like to call your project?: test
    Would you like to generate entries in /etc/hosts for the VMs in your project? (y/n): y
    You are about to:
      * Create a new project called "test" at "C:\Users\Domas/vagrant/projects/test".
      * Add entries for the FQDNs of the VMs to /etc/hosts. (You will be prompted for your sud
    o password.)
      * Generate Drush aliases for the project and VMs.
      * Launch the project VMs immediately.
      * Build the project using the "aegir" blueprint from the "aegirup" extension.
    Do you want to proceed with initializing the project? (y/n): y
    Copied the "aegir" blueprint directory to C:\Users\Domas/vagrant/projects/test.       [ok]

    'egrep' is not recognized as an internal or external command,
    operable program or batch file.
    symlink(): Cannot create symlink, error code(1314) vagrant.blueprints.inc:90     [warning]

    Errors occurred when running "symlink()" in                                        [error]

    "vagrant_default_build_project_setup".
    Drush command terminated abnormally due to an unrecoverable error.                 [error] 
```

起初我以为只是缺少 Egrep，我下载了[UnxUtils](http://unxutils.sourceforge.net/)，将其添加到 PATH 并检查 Egrep 是否从命令提示符运行，确实如此。但是，在重做 aegir-up 设置步骤后，我仍然遇到相同的错误。

我对这些工具中的任何一个都不是特别熟悉。我安装了 VirtualBox、Vagrant、Drush 和 NFS 服务器、Ruby、gem。在 Win8 上运行。我整天都在寻找答案。有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T17:18:08.967

Apparently, I needed to run these commands through an elevated shell (as in, right click on Command Prompt -> Run as Administrator). `Cannot create symlink, error code(1314)` was what I should have concentrated on. The commands ran. Other problems came up, namely – Windows path wasn't getting escaped properly; however, that is off question.

Edit: At the moment of posting this problem Aegir-up was not supported on Windows, simple enough. That's why I was having a multitude of problems trying to run it on them.

# dart - Dart 中的 console.error()？

> ID：13208728
> 
> 赞同：5
> 
> 时间：2012-11-03T11:28:56.093
> 
> 标签：dart

我如何`console.error(foo);`在 Dart 中做到这一点？

该`print()`方法非常接近，但这并不是我想要的。我希望有错误通知和图标以及堆栈跟踪。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T11:41:05.993

在 Dart 中做起来其实很简单：

```
import 'dart:html';

main() {
  window.console.error('Something bad occurred');
} 
```

# ruby - Ruby：仅当函数不返回 nil 时才分配函数的输出

> ID：13208729
> 
> 赞同：9
> 
> 时间：2012-11-03T11:28:56.493
> 
> 标签：ruby, variable-assignment

在 Ruby 中编程时，我经常有如下任务

```
test = some_function if some_function 
```

通过该分配，我想分配函数的输出，但如果它返回，`nil`我想保留变量的内容。我知道有条件赋值，但既`||=`不能也`&&=`不能在这里使用。我发现描述上述陈述的最短方法是

```
test = (some_function or test) 
```

有没有更好/更短的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T12:03:46.043

我认为没有什么比您展示的最后一个片段更好的了，但请注意`or`用于流量控制，请`||`改用：

```
test = some_function || test 
```

通常最好为新名称分配新值，生成的代码更易于理解和调试，因为变量/符号在整个范围内具有相同的值：

```
some_different_and_descriptive_name_here = some_function || test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T01:55:14.610

我只是添加括号

> > `(a = b) unless b.nil?`
> > 
> > `(a = b) if b`

劣等，因为如果 b 是假的，那么 a 仍然像以前一样

请记住，这会计算 b 两次，因此如果 b 是具有副作用的函数（例如更改其范围之外的变量或打印），它将执行两次；为避免这种情况，您必须使用

> > `temp = b; (a = temp) unless temp.nil?`

（当然可以拆分成）

> > `temp = b`
> > 
> > `(a = temp) unless temp.nil?`

# php - 使用 PHP 和 MySQL 单击复选框时启用保存到数据库

> ID：13208730
> 
> 赞同：1
> 
> 时间：2012-11-03T11:29:03.883
> 
> 标签：php, mysql, joomla

首先，我在 Joomla 框架中使用 PHP 和 MySQL（但此时对 Joomla MVC 结构不感兴趣）。

我有一个来自数据库（表 A）的数据列表，并且在旁边添加了一个复选框。当我单击一个复选框时，我希望当我单击“保存”按钮并将该数据列在新的网络上时，将启用的复选框中的数据发送（插入副本）到新表（表 B）页。未选中的不应发送到新表，因此应忽略。此外，在选中复选框之前，必须首先禁用“保存”按钮。

现在，表（表A）中的现有数据与新表（表B）之间必须存在关系，因此例如当从表（表A）中删除主要现有数据时，它也应该自动删除新表（表 B）中的数据。

我知道一些 PHP 和 MySQL，但不足以弄清楚上面的一些。

一些聪明的 PHP 和 MySQL 大师能否在我拔头发时指出正确的方向，尤其是在复选框问题上。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:39:42.190

要将数据发送到另一个页面并显示消息，您需要 AJAX。并为此检查此页面： [Ajax 将数据传递给 php 脚本](https://stackoverflow.com/questions/6782230/ajax-passing-data-to-php-script)

但是没有消息（将数据发送到页面），使用这个->

假设您有：

```
<form action="insertInDatabase.php" method="post">
<input type="checkbox" name="cbs[]" value="firstValue">First value<br>
<input type="checkbox" name="cbs[]" value="secondValue">Second value 
</form> 
```

所以在这里你将你的数据发送到“insertInDatabase.php”。你有这个：

```
//connection do mySql database

if(!empty($_POST['cbs'])) {

foreach($_POST['cbs'] as $cb) {    

mysql_query("INSERT INTO table2(checkedCheckBoxValue) VALUES('$cb');");

}} 
```

# git - 获取git标签的时间和日期

> ID：13208734
> 
> 赞同：112
> 
> 时间：2012-11-03T11:30:02.740
> 
> 标签：git, date, time, git-tag

我有一个使用 git 的项目，并用标签标记了所有版本。

```
$ git tag
v1.0.0
v1.0.1
v1.0.2
v1.0.3
v1.1.0 
```

我的目标是在 Web 界面中列出版本和发布日期（标记/提交日期 = 发布日期）。目前，我们使用 列出所有版本`git tag`。

**如何获取标签的制作时间和日期（或它指向的提交）？**

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-11-03T11:42:53.077

这一直对我有用：

```
git log --tags --simplify-by-decoration --pretty="format:%ci %d" 
```

如果您想要不同的日期格式，请参阅 git-log 手册页的“漂亮格式”部分以获取格式字符串的详细信息。

* * *

## 回答 #2

> 赞同：86
> 
> 时间：2012-11-03T11:43:40.083

使用`--format`参数`git log`：

```
git log -1 --format=%ai MY_TAG_NAME 
```

* * *

## 回答 #3

> 赞同：57
> 
> 时间：2017-02-12T18:39:49.740

另一种选择：

```
git for-each-ref --format="%(refname:short) | %(creatordate)" "refs/tags/*" 
```

有关格式选项，请参阅[https://git-scm.com/docs/git-for-each-ref#_field_names](https://git-scm.com/docs/git-for-each-ref#_field_names)

`%(creatordate)`给出所指向的提交日期，以查看使用时创建标签的日期`%(taggerdate)`

您可以直接合并外壳：

```
$> git for-each-ref --shell --format="ref=%(refname:short) dt=%(taggerdate:format:%s)" "refs/tags/*"

ref='v1.10' dt='1483807817'
ref='v1.11' dt='1483905854'
ref='v1.12.0' dt='1483974797'
ref='v1.12.1' dt='1484015966'
ref='v1.13' dt='1484766542'
ref='v1.2' dt='1483414377'
ref='v1.3' dt='1483415058'
ref='v1.3-release' dt='' <-- not an annotated tag, just a pointer to a commit so no 'taggerdate', it would have a 'creator date'.
ref='v1.3.1' dt='1483487085'
ref='v1.4' dt='1483730146'
ref='v1.9' dt='1483802985' 
```

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2014-12-12T14:43:53.027

请注意，上述两种解决方案都会为您提供提交日期，这可能与该提交被标记为发布时大不相同。要获取标签本身的日期，您必须使用 找到标签本身`rev-parse`，使用 读取它`cat-file`，然后解析它。一个小管道：

`git rev-parse v1.0.0 | xargs git cat-file -p | egrep '^tagger' | cut -f2 -d '>'`

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-05-09T09:36:58.167

git tag 命令中没有简单的选项来执行此操作。我发现最方便运行

```
git log --decorate=full 
```

列出所有提交，包括标签（如果有的话）。仅列出标记使用的提交

```
git log --decorate=full --simplify-by-decoration 
```

详情请使用

```
git help log 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-12-03T12:56:24.197

可以使用`gawk`(not `awk`) 将“标记”行中的日期转换为人类可读的内容：

```
git rev-parse v4.4-rc1 | xargs git cat-file -p | gawk '/^tagger/ { print strftime(PROCINFO["strftime"], $(NF-1)) }' 
```

如果不喜欢，`gawk`那么`date`可以用来转换 unix 时间：

```
git rev-parse v2.76 | xargs git cat-file -p | awk '/^tagger/ { print "@" $(NF-1) }' | xargs date -d 
```

和示例（`dnsmasq`git repo）：

```
$ git rev-parse v2.76 | xargs git cat-file -p | awk '/^tagger/ { print "@" $(NF-1) }' | xargs date -d
Wed May 18 16:52:12 CEST 2016 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-12-15T00:37:14.150

这里的所有答案都很棒，而且是正确的 git 风格。但我需要一个标签，它的日期和它的信息，只有最后 10 个标签。所以我只是以一种非常平庸的方式做到了。但是将它保存为 shell 函数或脚本，它就变成了单行。

```
for ver in `git tag | tail -10`; do
    DATE=`git log -1 --format=%ai $ver | awk '{print $1}'`
    MESSAGE=`git tag -n $ver | cat | awk '{a=match($0, $2); print substr($0,a)}'`
    echo "$ver \t| $DATE | $MESSAGE"
done 
```

# python - 在 Python 中正交渲染 3D 模型

> ID：13208743
> 
> 赞同：0
> 
> 时间：2012-11-03T11:32:33.017
> 
> 标签：python, 3d, isometric

我想用 Python 编写一个工具来帮助我从 3D 模型创建等距图块。你看，我不是一个非常熟练的艺术家，免费的 3D 模型很多，在 3D 中创建像桌子或椅子这样的东西比在绘画中容易得多。

该脚本将在正交投影中加载 3D 模型并从四个方向拍照，以便在游戏中使用。我在 Blender 中尝试过，但结果不一致，很难控制并且需要很长时间才能创建简单的精灵。

滚动我自己的脚本也可能让我做一些整洁的事情，尤其是批量生成，也许是纹理更改、着色等。游戏本身可能会用 Python tpp 制作，所以也许我可以即时生成。（编辑：当他们面对镜头时自动创建透明墙）

现在我的问题是，哪些 Python 库可以做这样的事情？我已经检查了 Pyglet 和 Panda3D，但我什至无法加载模型，更不用说将其设置为正交投影。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:03:14.773

I found this code:

www.pygame.org/wiki/OBJFileLoader

It let me load and display an .obj file of a cube from Blender with ease. It runs PyOpenGL so it should let me do everything OpenGL can. Never knew OpenGL was so low-level, didn't realize I'd have to write my own loaders and everything.

Anyway, I'm pretty sure I can modify this to project isometrically, rotate the object and grab shots and combine them into sprites. Thanks you guys!

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T00:00:50.177

由于您查看了 Panda3D - 如果您可以将模型转换为“蛋”格式（blender/maya 可能会这样做），那么您就可以导入它。

[https://www.panda3d.org/manual/index.php/Loading_Models](https://www.panda3d.org/manual/index.php/Loading_Models)

[https://www.panda3d.org/manual/index.php/Models_and_Actors](https://www.panda3d.org/manual/index.php/Models_and_Actors)

[http://www.panda3d.org/manual/index.php/Converting_from_Blender](http://www.panda3d.org/manual/index.php/Converting_from_Blender)

注意：这个来源是流行搜索引擎中的“python 3d mesh loader”——这对我来说是可行的。我现在需要尝试安装它和一些代码......

# php - 从php导出后如何在Excel中显示多个子列

> ID：13208744
> 
> 赞同：2
> 
> 时间：2012-11-03T11:32:40.447
> 
> 标签：php, html

我想将表格从 php 导出到 Microsoft Excel，其中一列有 3 个子列。

现在我在 Excel 中得到的输出没有将子列显示为它们应该是的列的一部分。

欲了解更多信息：-

我有**6 个**主列和**15**个子列：-

*   第一列有 4 个子列。

*   第二列有 3 个子列。

*   第三无栏。

*   第 4 列有 3 个子列。

*   第 5 列有 2 个子列。

*   6th 有 3 个子列。

我得到的输出是一列和一个子列，依此类推.. 最后 9 个子列没有主列标题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T09:14:22.690

如果你只是想写一个 .xls 你可以做 \t （作为下一个单元格的选项卡）和 \n 为新的（在 excel 中也是下一个）行。

如果你想创建一个 .xlsx（新的 office 文件），它就像一个 excel-zip 文件，你应该使用这个库，首先它有点学习，但过了一会儿你可以用 php 和 excel [http做任何你想做的事情://phpexcel.codeplex.com/](http://phpexcel.codeplex.com/)

也许这也有帮助[我如何使用 PHP 将数据写入 excel](https://stackoverflow.com/questions/3968973/how-can-i-write-data-into-an-excel-using-php)

# c# - 如何从 Matlab 调用 C# dll？

> ID：13208750
> 
> 赞同：0
> 
> 时间：2012-11-03T11:33:22.973
> 
> 标签：c#, .net, matlab, dll

> **可能重复：**
> [Matlab 和 C# 之间的互操作](https://stackoverflow.com/questions/434331/interoperating-between-matlab-and-c-sharp)

我需要使用 Dot Net C# managed-dll 中的一些功能如何在 matlab 中调用这个 Dot Net C# dll？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:57:02.370

完成这项工作的一种方法是使用 COM。您可以使用 .NET 实现 COM 对象，并且 MatLab 可以使用 COM 对象（例如，参见[http://www.mathworks.co.uk/help/matlab/matlab_external/exploring-your-object.html](http://www.mathworks.co.uk/help/matlab/matlab_external/exploring-your-object.html)）。

如果您的托管 C# DLL 尚未向 COM 公开，您可能需要编写一个小包装器（取决于您是否有权访问源代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:49:05.560

您可以使用[Matlab 的`system`](http://www.mathworks.co.uk/help/matlab/ref/system.html)命令和这种方法：

[需要从命令行运行ac#dll](https://stackoverflow.com/questions/6138812/need-to-run-a-c-sharp-dll-from-the-command-line)

# ruby-on-rails - 在 Rails 中向表中添加总和的正确方法是什么？

> ID：13208753
> 
> 赞同：0
> 
> 时间：2012-11-03T11:33:52.757
> 
> 标签：ruby-on-rails, activerecord, sum

我正在显示一个列表，`items`其中包含`price`一个 HTML 表中的属性。

将总数添加到表格末尾的正确方法是什么`price`（以及应该在哪里进行计算）？

我能想到3种明显的方式，但不知道哪一种最“正统”

1-在控制器中

```
@items = Item.all
@item_total = @items.sum(:price) 
```

我只是`@item_total`在最后一行显示

2- 在视图中，在最后一行

```
<%= @items.sum(:price) %> 
```

但是我不确定在视图中执行此操作是否可以（它有效，但是可以吗？）

3-在视图中，将其添加到最后一行

```
<%= @items.inject(0){|s, e| s + e.price} %> 
```

但是在视图中添加这种逻辑感觉不对。

那么其中哪一个是正确的呢？还是我想念另一种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:01:48.480

您应该使用第一个选项，因为视图应该包含最少的代码。因此，仅在控制器中使用您的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:15:19.033

```
@items = Item.all
# this is Array#sum, calculation is done in Ruby. usually slow
@items.sum(:price) 
```

然而

```
# this is Relation#sum -> does a calculation at DB. usually faster
Item.scoped.sum(:price) # OR Item.sum(:price) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T12:27:59.607

总是希望减少从数据库中获取数据所需的查询数量......您有两种选择来获取数据......

@items = Item.all @item_total = @items.sum(:price)

这将不会运行，因为应该有 &:price 而不是 :price...如果由于不支持 ARel 而现在不鼓励这种代码风格...

因此，根据我的说法，您应该使用的代码

@items = Item.scoped @item_total = @items.pluck(:price).sum(:price)

好处是 @item 是一个 ARel 对象，可以在进一步的计算中使用......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T11:38:14.597

试试这个方法

```
# In your controller write
@item_total = Item.sum(:price) 
```

并`@item_total`在您的`view`文件中使用

**更新**

如果您使用类似的`index`操作，那么您可以这样做

```
@items = Item.all
@item_total = @items.sum(:price) 
```

但是，如果您只想这样，`item_total`就不要通过两个查询求和，您可以这样做

```
@item_total = Item.sum(:price) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-08-06T21:52:58.150

你可以试试这段代码：

```
Sum Dolars: <%= @customer_reports.sum(&:mount) %> 
```

# java - 在 JButton 的 actionperformed 中需要最终变量吗？

> ID：13208755
> 
> 赞同：1
> 
> 时间：2012-11-03T11:34:05.520
> 
> 标签：java, swing, jbutton, jlist, final

所以我有一个`JList`，我试图在一个`JButton`s`actionPerformed`方法中使用它，它要求我说明`JList` `final`为什么，下面是一个代码片段

```
public SomeClass() {    
  btnNewButton.addActionListener(new ActionListener() {
       public void actionPerformed(ActionEvent e) {
         list.clearSelection();             
    }});
} 
```

我实际上并没有问题使它成为最终版本，我只是不确定为什么我需要这样做。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T13:03:22.137

要回答您的问题，您需要了解有关 JVM 是如何工作的基础知识。当编译包含内部类的类时，生成的字节码实际上并没有将内部类实现为类中的类。

**为什么错误：局部变量是从内部类访问的，需要将其声明为 final**

```
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JMenu;
import javax.swing.JPanel;

public class foo extends JPanel
{  
  public foo()
  {
    final JMenu edit = new JMenu();
    edit.getItem(0).addMouseListener(new MouseAdapter(){ 
    @Override
        public void mouseClicked(MouseEvent e) 
        {
            if (e.getClickCount() == 1) {
                edit.getItem(0).setEnabled(true);
            }
        } 
    });
  }
} 
```

当你编译你的这个程序时，将创建两个文件，Foo.class 和 Foo$1.class。所以现在你的问题来了，因为`Second`类 ie`foo$1.class`不知道类ie中`Variable` `edit`存在。`First``foo.class`

那么如何解决这个问题呢？是什么`JVM`，***它要求开发人员将外部类的变量声明为 final***。

现在完成了，现在 JVM 悄悄地在第二个编译的类文件中放置了一个名为 val$edit 的隐藏变量，这是从`javap`

foo.class 的输出

```
C:\Mine\JAVA\J2SE\folder>javap foo.class
Compiled from "foo.java"
public class foo extends javax.swing.JPanel {
  public foo();
} 
```

现在，编辑对于构造函数来说是本地的，因此输出如上。

```
C:\Mine\JAVA\J2SE\folder>javap foo$1.class
Compiled from "foo.java"
class foo$1 extends java.awt.event.MouseAdapter {
  final javax.swing.JMenu val$edit;
  final foo this$0;
  foo$1(foo, javax.swing.JMenu);
  public void mouseClicked(java.awt.event.MouseEvent);
} 
```

val$edit 分配了与分配给 edit 相同的`Variable`值，因为现在编译器知道该值不能更改，因为它已被声明为 final，因此这次它可以工作。

现在，如果我将 the `edit` `Variable`from being更改为`Local`being怎么办`Instance`。现在类的对象知道关于这个变量的一切`edit`，如果它被改变了。所以同样改变上面的程序我们得到：

```
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import javax.swing.JMenu;
import javax.swing.JPanel;

public class foo extends JPanel
{  
    JMenu edit = new JMenu();

    public foo()
    {   
        edit.getItem(0).addMouseListener(new MouseAdapter(){ 
        @Override
            public void mouseClicked(MouseEvent e) 
            {
            if (e.getClickCount() == 1) {
                    edit.getItem(0).setEnabled(true);
                }
            } 
        });
    }
} 
```

在这种情况下，我们不假设将其声明和定义为 being `final`，因为在这种情况下，由于`Variable`对整个类是本地的，因此将与ie`Variable`一起发送到内部类`Object Reference``this`

```
C:\Mine\JAVA\J2SE\folder>javap foo.class
Compiled from "foo.java"
public class foo extends javax.swing.JPanel {
  javax.swing.JMenu edit;
  public foo();
} 
```

这是`Variable`在这种情况下发送的方式，即 this$0 ：

```
C:\Mine\JAVA\J2SE\folder>javap foo$1.class
Compiled from "foo.java"
class foo$1 extends java.awt.event.MouseAdapter {
  final foo this$0;
  foo$1(foo);
  public void mouseClicked(java.awt.event.MouseEvent);
} 
```

据我说，这似乎是解释，这种情况是如何运作的。刚才我在互联网上找到了这个关于[本地内部类可访问性之谜的](http://techtracer.com/2008/04/14/mystery-of-accessibility-in-local-inner-classes/)精彩解释，可能会帮助您以更好的方式了解情况:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T11:36:48.557

您正在创建一个匿名类，并且`list`变量的范围太有限，因此您无法访问它。除非您成功`final`或将其设为`SomeClass`.

有关更多信息，请参阅[本文](http://renaud.waldura.com/doc/java/final-keyword.shtml#vars)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-03T11:43:23.127

通过将`list`变量设为 as `final`，它们不再是真正的变量 ref，而是常量。然后编译器可以`list`将匿名类中的使用替换为常量的值（当然是在编译时），并且您将不再有访问不存在的变量的问题。

# c - 在 C 中创建结构的副本

> ID：13208759
> 
> 赞同：2
> 
> 时间：2012-11-03T11:34:34.983
> 
> 标签：c, pointers, copy

> **可能重复：**
> [将一个结构复制到另一个结构](https://stackoverflow.com/questions/4931123/copying-one-structure-to-another)

我有一个结构定义为

```
struct CKTcircuit 
{ 
    more than a 100 pointers and objects of different types  of structure.
    this structure has around 500 lines just declaring variables & pointers.
} 
```

现在我实例化了一个这种类型的对象。

我必须创建一个相同类型的副本。

任何解决方案我该怎么做？

PS：我需要这样做，因为我需要启动另一个线程来进行计算并修改 CKTcircuit 对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:51:06.713

您的计算需要哪些数据？你可以创建一个新的结构来保存你想要的数据吗：

```
struct WorkingData
{ 
    //data needed for calculations
}

struct CKTcircuit source = //whatever;
struct WorkingData work;
CKTcircuit_populateWorkingData(source, &work);
calculate(&work); 
```

或者，将 a`CKTcircuit`用于工作数据，但要小心克隆包含指针的结构。

```
struct CKTcircuit source = //whatever;
struct CKTcircuit work;
CKTcircuit_populateWorkingData(source, &work);
calculate(&work); 
```

但是 100 个成员并不是世界末日：

可能只需要咬紧牙关，了解规则并使用以下方法进行深度克隆：

注释成员以了解每个结构是浅克隆 OK，还是需要深度克隆。

```
struct CKTcircuit 
{ 
    int x; //shallow clone OK
    int *x2; //pointer - needs deep clone
    struct Y y; //shallow clone OK iff members of struct Y are all shallow clone OK
    struct Y *y2; //pointer type, needs deep clone
} //conclusion for this stuct - needs deep clone

struct CKTcircuit CKTcircuit_clone(struct CKTcircuit *source)
{
    struct CKTcircuit result = *source; //shallow clone
    //that has dealt with all value types e.g. ints, floats and
    //even structs that aren't pointed to and don't contain pointers
    //now need to call similar clones functions on all the pointer types
    result.pointerX = &x_clone(source->pointerX);
    return result;
} 
```

如果这样的东西不存在，您可能需要自定义释放方​​法来释放内存。

```
void CKTcircuit_free(struct CKTcircuit *source)
{
    x_free(source->pointerX);
    free(*source);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:44:32.047

1）困难的方式：

对于深层副本，您需要遍历整个结构并一次重新创建一个节点。但请确保您使用的是副本中的指针，而不是原始数据结构中的指针。

这是一个简化的伪代码示例。

```
node traverse_cp(node, checked_list){
   // makes sure you don't traverse back edges twice. or you'll loop.
   if ( checked_list[node] ) return checked_list[node];

   new_node = copy_node_data(node);
   new_node.left = traverse_cp(node->left, check_list + node);
   new_node.right = traverse_cp(node->right, check_list + node);   
   return node_node;
} 
```

2) 捷径

A) 连续内存如果你可以保证你的内存是连续分配的（malloc 一次然后你自己分配内存），那么你可以只 memcpy 整个块，然后在该地址空间中搜索地址并修改它们。但是，这不是很健壮。

B）结构数组使用结构和索引的预分配数组而不是指针。但这不适用于异构数据结构。这基本上是对您的程序的重写。

# android - Ubuntu 上的 GoogleTv 安卓模拟器

> ID：13208763
> 
> 赞同：0
> 
> 时间：2012-11-03T11:35:15.050
> 
> 标签：android, google-tv, kvm

我最近尝试让 GoogleTv android 模拟器在我的 Ubuntu 12 桌面版（启用 KVM）上运行。启动后，屏幕变为空白。我用 debug-all 选项检查了日志文件，这就是我得到的： 然后在最后两行一遍又一遍地重复。任何帮助都感激不尽。

迪帕克

```
 *deepak@DeepakUbuntu:~$ sudo Documents/android-sdk-linux/tools/emulator -avd GoogleTV -debug-all
[sudo] password for deepak: 
emulator: found SDK root at /home/deepak/Documents/android-sdk-linux
emulator: Android virtual device file at: /home/deepak/.android/avd/GoogleTV.ini
emulator: /home/deepak/.android/avd/GoogleTV.ini: parsing as .ini file
emulator:    1: KEY='target' VALUE='Google Inc.:Google TV Addon:12'
emulator:    2: KEY='path' VALUE='/home/deepak/.android/avd/GoogleTV.avd'
emulator: /home/deepak/.android/avd/GoogleTV.ini: parsing finished
emulator: virtual device content at /home/deepak/.android/avd/GoogleTV.avd
emulator: virtual device config file: /home/deepak/.android/avd/GoogleTV.avd/config.ini
emulator: /home/deepak/.android/avd/GoogleTV.avd/config.ini: parsing as .ini file
emulator:    1: KEY='hw.lcd.density' VALUE='213'
emulator:    2: KEY='hw.keyboard.charmap' VALUE='Emulator'
emulator:    3: KEY='sdcard.size' VALUE='1024M'
emulator:    4: KEY='skin.name' VALUE='720p'
emulator:    5: KEY='skin.path' VALUE='add-ons/addon-google_tv_addon-google-12/skins/720p'
emulator:    6: KEY='hw.cpu.arch' VALUE='x86'
emulator:    7: KEY='abi.type' VALUE='x86'
emulator:    8: KEY='vm.heapSize' VALUE='256'
emulator:    9: KEY='hw.ramSize' VALUE='1024'
emulator:   10: KEY='disk.dataPartition.size' VALUE='128'
emulator:   11: KEY='image.sysdir.1' VALUE='add-ons/addon-google_tv_addon-google-12/images/x86/'
emulator: /home/deepak/.android/avd/GoogleTV.avd/config.ini: parsing finished
emulator: using core hw config path: /home/deepak/.android/avd/GoogleTV.avd/hardware-qemu.ini
emulator: Found target field in root AVD .ini file: 'Google Inc.:Google TV Addon:12'
emulator: Found AVD target API level: 12
emulator:     found image search path: add-ons/addon-google_tv_addon-google-12/images/x86/
emulator: found a total of 1 search paths for this AVD
emulator: found skin '720p' in directory: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/skins
emulator: autoconfig: -skin 720p
emulator: autoconfig: -skindir /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/skins
emulator: found skin-specific hardware.ini: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/skins/720p/hardware.ini
emulator: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/skins/720p/hardware.ini: parsing as .ini file
emulator:    2: KEY='vm.heapSize' VALUE='256'
emulator:    3: KEY='hw.ramSize' VALUE='1024'
emulator:    4: KEY='hw.lcd.density' VALUE='213'
emulator:    5: KEY='disk.dataPartition.size' VALUE='128'
emulator:    6: KEY='hw.keyboard.charmap' VALUE='Emulator'
emulator: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/skins/720p/hardware.ini: parsing finished
emulator: adding binding BUTTON_CALL to F3
emulator: adding binding BUTTON_HANGUP to F4
emulator: adding binding BUTTON_HOME to HOME
emulator: adding binding BUTTON_BACK to ESCAPE
emulator: adding binding BUTTON_MENU to F2
emulator: adding binding BUTTON_MENU to PAGEUP
emulator: adding binding BUTTON_STAR to Shift-F2
emulator: adding binding BUTTON_STAR to PAGEDOWN
emulator: adding binding BUTTON_POWER to F7
emulator: adding binding BUTTON_SEARCH to F5
emulator: adding binding BUTTON_CAMERA to Ctrl-KEYPAD_5
emulator: adding binding BUTTON_CAMERA to Ctrl-F3
emulator: adding binding BUTTON_VOLUME_UP to KEYPAD_PLUS
emulator: adding binding BUTTON_VOLUME_UP to Ctrl-F5
emulator: adding binding BUTTON_VOLUME_DOWN to KEYPAD_MINUS
emulator: adding binding BUTTON_VOLUME_DOWN to Ctrl-F6
emulator: adding binding TOGGLE_NETWORK to F8
emulator: adding binding TOGGLE_TRACING to F9
emulator: adding binding TOGGLE_FULLSCREEN to Alt-ENTER
emulator: adding binding BUTTON_DPAD_CENTER to KEYPAD_5
emulator: adding binding BUTTON_DPAD_UP to KEYPAD_8
emulator: adding binding BUTTON_DPAD_LEFT to KEYPAD_4
emulator: adding binding BUTTON_DPAD_RIGHT to KEYPAD_6
emulator: adding binding BUTTON_DPAD_DOWN to KEYPAD_2
emulator: adding binding TOGGLE_TRACKBALL to F6
emulator: adding binding SHOW_TRACKBALL to DELETE
emulator: adding binding CHANGE_LAYOUT_PREV to KEYPAD_7
emulator: adding binding CHANGE_LAYOUT_PREV to Ctrl-F11
emulator: adding binding CHANGE_LAYOUT_NEXT to KEYPAD_9
emulator: adding binding CHANGE_LAYOUT_NEXT to Ctrl-F12
emulator: adding binding ONION_ALPHA_UP to KEYPAD_MULTIPLY
emulator: adding binding ONION_ALPHA_DOWN to KEYPAD_DIVIDE
emulator: keyset loaded from: /home/deepak/.android/default.keyset
emulator: /home/deepak/.android/avd/GoogleTV.avd/emulator-user.ini: parsing as .ini file
emulator:    1: KEY='window.x' VALUE='65'
emulator:    2: KEY='window.y' VALUE='24'
emulator:    3: KEY='uuid' VALUE='1351869589780'
emulator: /home/deepak/.android/avd/GoogleTV.avd/emulator-user.ini: parsing finished
emulator: trying to load skin file '/home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/skins/720p/layout'
emulator: skin network speed: 'full'
emulator: skin network delay: 'none'
emulator: found kernel-qemu in search dir: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86/
emulator: autoconfig: -kernel /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//kernel-qemu
emulator: found ramdisk.img in search dir: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86/
emulator: autoconfig: -ramdisk /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//ramdisk.img
emulator: found system.img in search dir: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86/
emulator: Using initial system image: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//system.img
emulator: autoconfig: -data /home/deepak/.android/avd/GoogleTV.avd/userdata-qemu.img
emulator: autoconfig: -initdata /home/deepak/.android/avd/GoogleTV.avd/userdata.img
emulator: autoconfig: -cache /home/deepak/.android/avd/GoogleTV.avd/cache.img
emulator: autoconfig: -sdcard /home/deepak/.android/avd/GoogleTV.avd/sdcard.img
emulator: Physical RAM size: 1024MB
emulator:     no Emulator.kcm in search dir: /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86/
emulator: <memoryFile>: parsing as .ini file
emulator: <memoryFile>: parsing finished
Content of hardware configuration file:
  hw.cpu.arch = x86
  hw.ramSize = 1024
  hw.screen = touch
  hw.mainKeys = yes
  hw.trackBall = yes
  hw.keyboard = no
  hw.keyboard.lid = no
  hw.keyboard.charmap = Emulator
  hw.dPad = yes
  hw.gsmModem = yes
  hw.gps = yes
  hw.battery = yes
  hw.accelerometer = yes
  hw.audioInput = yes
  hw.audioOutput = yes
  hw.sdCard = yes
  hw.sdCard.path = /home/deepak/.android/avd/GoogleTV.avd/sdcard.img
  disk.cachePartition = yes
  disk.cachePartition.path = /home/deepak/.android/avd/GoogleTV.avd/cache.img
  disk.cachePartition.size = 66m
  hw.lcd.width = 1280
  hw.lcd.height = 720
  hw.lcd.depth = 16
  hw.lcd.density = 213
  hw.lcd.backlight = yes
  hw.gpu.enabled = no
  hw.camera.back = emulated
  hw.camera.front = none
  vm.heapSize = 256
  hw.sensors.proximity = yes
  hw.sensors.magnetic_field = yes
  hw.sensors.orientation = yes
  hw.sensors.temperature = yes
  kernel.path = /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//kernel-qemu
  kernel.parameters =  androidboot.hardware=goldfish clocksource=pit android.checkjni=1
  disk.ramdisk.path = /home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//ramdisk.img

  disk.systemPartition.size = 200m
  disk.dataPartition.path = /home/deepak/.android/avd/GoogleTV.avd/userdata-qemu.img
  disk.dataPartition.size = 25m
  avd.name = GoogleTV
.
QEMU options list:
emulator: argv[00] = "Documents/android-sdk-linux/tools/emulator-x86"
emulator: argv[01] = "-android-hw"
emulator: argv[02] = "/home/deepak/.android/avd/GoogleTV.avd/hardware-qemu.ini"
Concatenated QEMU options:
 Documents/android-sdk-linux/tools/emulator-x86 -android-hw /home/deepak/.android/avd/GoogleTV.avd/hardware-qemu.ini
emulator: android_qemud_init
emulator: Registered QEMUD service boot-properties
emulator: registered 'boot-properties' qemud service
emulator: android_qemud_init
emulator: Registered QEMUD service hw-control
emulator: android_hw_control_init: hw-control qemud handler initialized
emulator: /home/deepak/.android/avd/GoogleTV.avd/hardware-qemu.ini: parsing as .ini file
emulator:    1: KEY='hw.cpu.arch' VALUE='x86'
emulator:    2: KEY='hw.ramSize' VALUE='1024'
emulator:    3: KEY='hw.screen' VALUE='touch'
emulator:    4: KEY='hw.mainKeys' VALUE='yes'
emulator:    5: KEY='hw.trackBall' VALUE='yes'
emulator:    6: KEY='hw.keyboard' VALUE='no'
emulator:    7: KEY='hw.keyboard.lid' VALUE='no'
emulator:    8: KEY='hw.keyboard.charmap' VALUE='Emulator'
emulator:    9: KEY='hw.dPad' VALUE='yes'
emulator:   10: KEY='hw.gsmModem' VALUE='yes'
emulator:   11: KEY='hw.gps' VALUE='yes'
emulator:   12: KEY='hw.battery' VALUE='yes'
emulator:   13: KEY='hw.accelerometer' VALUE='yes'
emulator:   14: KEY='hw.audioInput' VALUE='yes'
emulator:   15: KEY='hw.audioOutput' VALUE='yes'
emulator:   16: KEY='hw.sdCard' VALUE='yes'
emulator:   17: KEY='hw.sdCard.path' VALUE='/home/deepak/.android/avd/GoogleTV.avd/sdcard.img'
emulator:   18: KEY='disk.cachePartition' VALUE='yes'
emulator:   19: KEY='disk.cachePartition.path' VALUE='/home/deepak/.android/avd/GoogleTV.avd/cache.img'
emulator:   20: KEY='disk.cachePartition.size' VALUE='66m'
emulator:   21: KEY='hw.lcd.width' VALUE='1280'
emulator:   22: KEY='hw.lcd.height' VALUE='720'
emulator:   23: KEY='hw.lcd.depth' VALUE='16'
emulator:   24: KEY='hw.lcd.density' VALUE='213'
emulator:   25: KEY='hw.lcd.backlight' VALUE='yes'
emulator:   26: KEY='hw.gpu.enabled' VALUE='no'
emulator:   27: KEY='hw.camera.back' VALUE='emulated'
emulator:   28: KEY='hw.camera.front' VALUE='none'
emulator:   29: KEY='vm.heapSize' VALUE='256'
emulator:   30: KEY='hw.sensors.proximity' VALUE='yes'
emulator:   31: KEY='hw.sensors.magnetic_field' VALUE='yes'
emulator:   32: KEY='hw.sensors.orientation' VALUE='yes'
emulator:   33: KEY='hw.sensors.temperature' VALUE='yes'
emulator:   34: KEY='kernel.path' VALUE='/home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//kernel-qemu'
emulator:   35: KEY='kernel.parameters' VALUE='androidboot.hardware=goldfish clocksource=pit android.checkjni=1'
emulator:   36: KEY='disk.ramdisk.path' VALUE='/home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//ramdisk.img'
emulator:   37: KEY='disk.systemPartition.initPath' VALUE='/home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//system.img'
emulator:   38: KEY='disk.systemPartition.size' VALUE='200m'
emulator:   39: KEY='disk.dataPartition.path' VALUE='/home/deepak/.android/avd/GoogleTV.avd/userdata-qemu.img'
emulator:   40: KEY='disk.dataPartition.size' VALUE='25m'
emulator:   41: KEY='avd.name' VALUE='GoogleTV'
emulator: /home/deepak/.android/avd/GoogleTV.avd/hardware-qemu.ini: parsing finished
emulator: nand_add_dev: system,size=0xc800000,initfile=/home/deepak/Documents/android-sdk-linux/add-ons/addon-google_tv_addon-google-12/images/x86//system.img
emulator: mapping 'system' NAND image to /tmp/android-root/emulator-ouTTXo
emulator: rounding devsize up to a full eraseunit, now c810000
emulator: nand_add_dev: userdata,size=0x1900000,file=/home/deepak/.android/avd/GoogleTV.avd/userdata-qemu.img
emulator: rounding devsize up to a full eraseunit, now 1902000
emulator: android_qemud_init
emulator: Registered QEMUD service boot-properties
emulator: registered 'boot-properties' qemud service
emulator: Adding boot property: 'dalvik.vm.heapsize' = '256m'
emulator: Adding boot property: 'qemu.sf.lcd_density' = '213'
emulator: Adding boot property: 'qemu.hw.mainkeys' = '1'
emulator: android_qemud_init
emulator: Registered QEMUD service gsm
emulator: android_qemud_init
emulator: Registered QEMUD service gps
emulator: Adding boot property: 'qemu.sf.fake_camera' = 'back'
emulator: android_qemud_init
emulator: Registered QEMUD service camera
emulator: android_camera_service_init: Registered 'camera' qemud service
emulator: IP address of your DNS(s): 127.0.1.1
emulator: nand_add_dev: cache,size=0x4200000,file=/home/deepak/.android/avd/GoogleTV.avd/cache.img
emulator: Initializing hardware OpenGLES emulation support
emulator: KVM mode auto-enabled!
emulator: Kernel parameters: qemu.gles=0 qemu=1 console=ttyS0 android.qemud=ttyS1 androidboot.hardware=goldfish clocksource=pit android.checkjni=1 ndns=1
emulator:     trying to find: /home/deepak/Documents/android-sdk-linux/tools/bios.bin
emulator:     trying to find: /home/deepak/Documents/android-sdk-linux/tools/lib/pc-bios/bios.bin
emulator:     trying to find: /home/deepak/Documents/android-sdk-linux/tools/vgabios-cirrus.bin
emulator:     trying to find: /home/deepak/Documents/android-sdk-linux/tools/lib/pc-bios/vgabios-cirrus.bin
emulator: qpa_audio_init: entering
emulator: qpa_audio_init: exiting
emulator: autoconfig: -scale 0.870968
emulator: android_qemud_init
emulator: Registered QEMUD service sensors
emulator: android_hw_sensors_init: sensors qemud service initialized
emulator: emulator window was out of view and was recentered
emulator: Could not open file: (null)/system/build.prop: No such file or directory
emulator: control console listening on port 5554, ADB on port 5555
Using config file: /home/deepak/.android/modem-nv-ram-5554
Setting value of oper_name_index to 2 (2)Setting value of selection_mode to 0 (0)Setting value of oper_index to 0 (0)Setting value of oper_count to 2 (2)Setting value of in_ecbm to 0 (0)Setting value of prl_version to 0 (0)Setting value of preferred_mode to 15 (15)Setting value of cdma_subscription_source to 1 (1)Setting value of cdma_roaming_pref to 2 (2)emulator: sent '0012host:emulator:5555' to ADB server
emulator: ping program: /home/deepak/Documents/android-sdk-linux/tools/ddms
emulator: ping command: /home/deepak/Documents/android-sdk-linux/tools/ddms ping emulator 20.0.3.0 "Intel Open Source Technology Center" "Mesa DRI Intel(R) Ironlake Mobile x86/MMX/SSE2" "2.1 Mesa 9.0"
emulator: Error while connecting to socket '127.0.0.1:1970': 111 -> Connection refused
emulator: ASC 127. 
```

0.0.1:1970：重试连接。连接器 FD = 27 仿真器：连接到套接字“127.0.0.1:1970”时出错：111 -> 连接被拒绝*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T16:22:57.310

您必须配置您的 adb 连接

[https://developers.google.com/tv/android/docs/gtv_debug](https://developers.google.com/tv/android/docs/gtv_debug)

之后，您可以调试您的程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T00:55:50.047

您能否在[http://code.google.com/p/googletv-issues/](http://code.google.com/p/googletv-issues/)提出问题，我会确保对其进行查看。

# xen - xen中的内存管理

> ID：13208766
> 
> 赞同：1
> 
> 时间：2012-11-03T11:36:08.007
> 
> 标签：xen

我了解 xen 会在来宾启动时分配来宾所需的所有物理内存。它还维护一个影子页表（我假设它使用 struct page_info 来维护它。我是对的吗？如果不是，谁能解释一下？）我希望访问它，因为我需要遍历该列表以检查来宾是否此页面分配给的至少访问过一次。

```
struct page_info {
  union {
  };
  pointer next, prev;
  union {
  };
}; 
```

谁能解释我如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:29:08.830

> 我了解 xen 会在来宾启动时分配来宾所需的所有物理内存。

可能。我认为当前的 Xen 工具栈确实做到了这一点，但是有人建议只为来宾的物理内存执行*保留*，而不实际执行*分配*，直到来宾实际访问它。这样做的动机是允许内存过量使用以增加允许内存膨胀的客户机的主机容量，并避免在运行之前为安全目的和隔离强制执行耗时的所有客户机内存清理。来宾。

> 它还维护一个影子页表

对于某些客人，在某些配置中，是的。它将为完全虚拟化（又名 HVM）来宾执行此操作，其中 Xen 不使用硬件扩展页表支持（例如 Intel EPT）。对于半虚拟化的客人，它不会这样做。

> （我假设它使用 struct page_info 来维护它。我是对的吗？如果不是，有人可以解释吗？）

唔。影子页表是一个非常复杂和复杂的软件。他们使用多种数据结构来维护来宾的虚拟地址空间。我认为您需要详细研究代码才能掌握它。这超出了这里简短回答的范围。

> 我希望访问它，因为我需要遍历该列表以检查分配此页面的访客是否至少访问过一次。

您需要在访客页表中将该页标记为不存在，并修改 Xen 的影子页表代码中的页错误处理程序以将其修复为存在于陷阱中，但还需要更新您自己的数据结构以跟踪发生的访问. 有与此类似的代码用于跟踪访客页面访问*的写入*而不是读取，称为脏位图跟踪，用于执行虚拟机的实时迁移。

> 谁能解释我如何做到这一点？

如果您能解释您想要跟踪访客对物理内存位置的读取访问的动机，那将会有所帮助。

# html - 导航和内容之间的差距？

> ID：13208767
> 
> 赞同：0
> 
> 时间：2012-11-03T11:36:39.587
> 
> 标签：html, css

好吧，我很困惑为什么黑色导航和下面的内容之间有很大的差距？

[http://database.gamingonlinux.com/](http://database.gamingonlinux.com/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T11:38:44.183

两者`.left`都有`.right`一个顶部填充`20px`。

您的第 38 行`style.css`：

```
.left
{
    clear: left;
    float: left;
    width: 15%;
    **padding: 20px** 0;
    display: inline;
}

.right
{
    float: right;
    width: 83%;
    **padding: 20px** 0;
    display: inline;
}
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:41:29.093

因为您的左右 div 中有填充

```
.left {
clear: left;
float: left;
width: 15%;
padding: 20px 0;
display: inline;
}
.right {
float: right;
width: 83%;
padding: 20px 0;
display: inline;
} 
```

删除填充：20px 0；

# .net - T4MVC 错误 - T4 文件被阻止或位于不受信任的区域

> ID：13208768
> 
> 赞同：23
> 
> 时间：2012-11-03T11:36:40.850
> 
> 标签：.net, asp.net-mvc, visual-studio-2010, t4

我在 Mac Book Pro 上的 Parallels Desktop 8 内的 Windows 7 虚拟机上运行 Visual Studio 2010。

我正在尝试将 T4MVC 合并到一个新的 MVC4 项目中。我从 Nuget 安装了 T4MVC 包并立即开始收到此错误...

**无法解析文件的包含文本：路径 '\psf\Home...\T4MVC.tt.hooks.t4' 必须是此计算机本地或您的受信任区域的一部分。如果您已下载此模板，您可能需要使用 Windows 资源管理器中模板文件的属性页面“取消阻止”它。**

我进入 T4MVC.tt.hooks.t4 文件的“属性”菜单，但找不到任何选项或按钮来取消阻止它。

我的假设是这个问题与我在虚拟机上运行的事实有关，因此我的项目文件不在受信任的位置。但我不确定如何解决这个问题。

我一直在寻找，但似乎找不到任何答案。任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2014-04-19T19:07:55.940

这适用于VS2012：

使用**Internet Explorer**：

转到**工具 | Internet 选项**并单击**安全**选项卡在**受信任的站点**下，单击**站点**并取消选中“需要 https...” 最后添加一个新条目 – 它应该是您共享文件夹的位置：“file://folder_name” – 注意我们使用的是文件而不是https。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-03T12:14:01.587

在**Windows Explorer**中，右键单击文件，然后选择属性。在常规选项卡的底部，应该有一个“取消阻止”按钮。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-01-05T03:07:12.820

如果我通过 Parallels 运行共享驱动器的项目，就会发生这种情况。

Windows FIX：通过将网络驱动器添加到受信任的网站来修复。指南（从其他语言操作系统翻译）

打开 Internet Explorer 打开 Internet 设置安全窗格“受信任的网站”“网站”取消勾选“此区域中的所有网站都需要 https”添加您的网络驱动器，如 x：对我来说，它添加了“file://psf”为我工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T21:35:08.873

下面的站点有一个很好的示例，可以将 Parallels 共享添加到受信任区域，以便在没有警告的情况下打开 Visual Studio 项目。相同的技术应该消除 T4 的这个警告。

[http://blog.florianb.net/2009/10/31/loading-projects-in-visual-studio-using-the-shared-profile-feature-in-parallels/](http://blog.florianb.net/2009/10/31/loading-projects-in-visual-studio-using-the-shared-profile-feature-in-parallels/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T20:49:31.863

使用[此处](http://windows.microsoft.com/en-us/windows-vista/security-zones-adding-or-removing-websites)描述的添加安全区域的方法。在受信任的站点部分下添加您的并行共享文件夹。您可能必须取消选中需要 HTTPS 框。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-08-13T07:00:55.197

要允许 VS.NET 加载网络共享的内容，需要将它们（共享）添加到受信任的位置。[读一读](http://gunnalag.com/2011/03/23/adding-network-paths-as-trusted-locations-in-vs-net/)。这将解决 Windows 8 用户的问题，当文件实际上没有如上所述被阻止时。

要将位置添加到完整信任列表运行（显然根据您的环境需要进行修改）：

```
caspol -m -ag 1.2 -url file:///H:/* FullTrust 
```

要验证或列出现有的受信任位置，请运行：

```
caspol -lg 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-04-08T08:10:13.907

这是一个文件保护的事情。解决方法是创建同名的新文件并从旧文件中复制文本。由于这些文件是在我的本地计算机上创建的，因此没有冲突。

当我从另一个项目复制 .ttinclude 文件时，我遇到了 VS2015 / VS2017 的这个问题。从项目中创建新的 .ttinclude 文件并重命名它们是唯一的解决方案。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-05-29T21:09:56.230

他们都没有工作。我的问题的根源是，我格式化了我的电脑，并且在我的大多数项目中，我硬编码了 EF 的 tt 的通用、修改版本。路径是 e:.. 在格式化之前。

格式化后，我删除了e驱动器并将d用作同一文件夹。项目开始失败，说路径不可访问，对。之后我创建了一个带有连接链接的非常小的e驱动器，这些错误消息来了......

> 无法解析文件的包含文本：路径“.tt”必须在此计算机本地或您的受信任区域的一部分。如果您已下载此模板，您可能需要使用文件资源管理器中模板文件的属性页面“取消阻止”它。

我要解决的是，更改 tt 文件中 d 驱动器的每个路径：

```
<#@ include file="d:\BitBucket\Kahia\EF Templates\EF6 ClientModel.tt"#> 
```

实际上是；

```
<#@ include file="e:\BitBucket\Kahia\EF Templates\EF6 ClientModel.tt"#> 
```

# objective-c - NSMutableArray 没有被保存

> ID：13208769
> 
> 赞同：0
> 
> 时间：2012-11-03T11:36:45.003
> 
> 标签：objective-c, nsmutablearray

我正在这样做：

```
 for(int k=0;k<[dataWord count];k++)
     {
         NSNumber *num=[NSNumber numberWithInt:2] ;
         [preDataWord insertObject:num atIndex:k ];
     } 
```

之前`preDataWord`分配的时间。

后来当我尝试使用这个数组时，我得到了全零。这是为什么？我必须保留它吗？如何？

**编辑：** 在我的初始化中，我 在类接口中声明了`preDataWord=[[NSMutableArray alloc]init];` where 。`preDataWord`此类正在另一个线程（音频单元）中运行。当我在 for 循环之后立即记录数组时，我可以看到它的完整并且很好。后来当另一个函数试图使用它时，她看到 0....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T13:02:01.130

在没有看到 preDataWord ivar 的情况下，我首先要确保它已正确声明和分配：

```
//creates empty mutable array ...
NSMutableArray preDataWord = [NSMutableArray array]; 
```

在你的 for 循环中，将你的 NSNumber 对象添加到 preDataWord 中，如下所示：

```
[preDataWord addObject:num]; 
```

# jquery - div悬停不工作

> ID：13208770
> 
> 赞同：0
> 
> 时间：2012-11-03T11:36:46.197
> 
> 标签：jquery, html, hover, jquery-hover

我正在制作导航栏，但使用 JQuery 的 div 悬停不起作用。我不确定我哪里出错了；HTML 代码：

```
<div  id="Navigation_left_0"><a href="">click This</a>
    <ul id="navScroll_0" sizset="true">
        <li><a href="">abcd</a></li>
        <li><a href="">abxfdcd</a></li>
        <li><a href="">afgvbcd</a></li>
        <li><a href="">asfrbcd</a></li>
    </ul>
</div>
<div  id="Navigation_left_1" ><a href="">click This</a>
    <ul id="navScroll_1" sizset="true">
        <li><a href="">abcd</a></li>
        <li><a href="">abxfdcd</a></li>
        <li><a href="">afgvbcd</a></li>
        <li><a href="">asfrbcd</a></li>
    </ul>
</div> 
```

jQuery代码：

```
$(document).ready(function() {
    $('div[id^="Navigation_left"]').hover(

    function() {
        alert("Hello");
        var id = $(this).attr('id');
        var idStr = id.split('_');
        $(this).css('background-color', 'grey');
        var idNum = parseInt(idStr[2]);
        var ulID = "#navScroll_" + idNum;
        $(ulID).css({
            'display': 'block',
            'height': '3em',
            'float': 'left',
            'padding-right': '2px'
        });
    }, function() {
        var id = $(this).attr('id');
        var idStr = id.split('_');
        var idNum = parseInt(idStr[2]);
        $("#navScroll_" + idNum).css('display', 'none');
        $(this).css('background-color', 'red');
    });
});​ 
```

CSS部分：

```
ul{
  list-style-type:none;
  height:50px;
  display:none;
}
ul li {
    height: 3em;
    float:left;
    padding-right:2px;
    list-style-type:none;
    width:33%;
   }
div {
  background-color:red;
  float:left;
  width:"20%";
  height:"5%";
  padding-left:10px;
  padding-right:10px;
  position:relative;
} 
```

有多个 div，但我只放了一段代码，可以帮助理解代码。控件不会进入 div 悬停，因为即使警报没有出现。我在 document.ready 中使用 ajax 功能的另一件事是工作正常。提到的 jquery 代码是在 ajax 调用之后插入的。我检查了 IE8 和 chrome。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:41:49.437

您隐藏`ul`列表，因此`display:none;`从 ul css 中删除，然后尝试

**[演示-1](http://jsfiddle.net/pintu31/Td566/3/)**

因为你隐藏了 ul 所以 div 下没有内容可以悬停所以尝试添加`min-height:10px;`到 div

**[演示-2](http://jsfiddle.net/pintu31/Td566/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:48:37.460

由于`ul`css是`display:none;`所以它没有显示任何东西并且悬停不起作用。请`display:none;`从`ul`.

# php - 为什么jquery ajax中的值会发生变化

> ID：13208773
> 
> 赞同：1
> 
> 时间：2012-11-03T11:36:58.807
> 
> 标签：php, jquery

在这个打击代码中，打印 $tarikh_sal 后我可以`2012-10-27`正确看到，但在`$.post`更改为 时`1975`，我不会更改它。为什么？

**php代码**

```
echo $tarikh_sal; //->2012-10-27
if ( $khoms > 0) 
{?>
    <script>
        $.post("actions.php",{ kh:<?php echo $kh;?> , tarikh_sal:<?php echo $tarikh_sal;?> , postaction:'sabte_kh'},
        function(data){
            alert(data.message);
        },'json');
    </script>
<?} 
```

**萤火虫：**

```
kh=2397897533&tarikh_sal=1975&postaction=sabte_kh 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:40:43.513

那是因为`2012-10-27 = 1975` 发生这种情况是因为在脚本中它被打印为`tarikh_sal:2012-10-27`并且 javascript 在那里进行数学运算......

尝试将其放在引号中以将其用作字符串。`tarikh_sal:'2012-10-27'`

```
tarikh_sal:'<?php echo $tarikh_sal;?>' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T11:40:33.997

您没有以字符串格式包含日期。

```
echo $tarikh_sal; //->2012-10-27
if ( $khoms > 0) 
{?>
    <script>
        $.post("actions.php",{ kh:'<?php echo $kh;?>' , tarikh_sal:'<?php echo $tarikh_sal;?>' , postaction:'sabte_kh'},
        function(data){
            alert(data.message);
        },'json');
    </script>
<?} 
```

改变：

```
tarikh_sal:<?php echo $tarikh_sal;?> 
```

至

```
tarikh_sal:'<?php echo $tarikh_sal;?>' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T11:41:00.227

您需要在值周围加上引号，否则它将由 Javascript 评估：

```
'<?php echo $tarikh_sal;?>' 
```

# c# - 多次触发 ContextMenu Click 事件

> ID：13208774
> 
> 赞同：1
> 
> 时间：2012-11-03T11:37:03.963
> 
> 标签：c#, contextmenu

这真的很奇怪，由于某种原因，我的`contextmenu`点击不止一次。我将上下文菜单绑定到一个按钮，因此当单击该按钮时，`contextmenu`它会显示在其下方（带有更多选项）。

一种选择是保存`listview`到 Excel，另一种是保存到 .csv。

所以基本上这里发生的是多个excel表将打开。当然我只想打开一个excel:)

这是我的代码：

```
private void toolButtonNoBorder3_Click(object sender, EventArgs e)
{
contexMenuuu.Show(toolButtonNoBorder3, 
                                 new Point(0, toolButtonNoBorder3.Height));
contexMenuuu.ItemClicked += 
               new ToolStripItemClickedEventHandler(contexMenuuu_ItemClickedd);
}

void contexMenuuu_ItemClickedd(object sender, ToolStripItemClickedEventArgs e)
{
contexMenuuu.Hide();
contexMenuuu.Close();

if (e.ClickedItem.Text == "Excel")
{
    Microsoft.Office.Interop.Excel.Application app = 
                    new Microsoft.Office.Interop.Excel.Application();
    app.Visible = true;
    Microsoft.Office.Interop.Excel.Workbook wb = app.Workbooks.Add(1);
    Microsoft.Office.Interop.Excel.Worksheet ws = 
           (Microsoft.Office.Interop.Excel.Worksheet)wb.Worksheets[1];
    int i = 1;
    int i2 = 1;
    int iad = 1;
    foreach (ListViewItem lvi in flatListView1.Items)
    {
        i = 1;
        foreach (ListViewItem.ListViewSubItem lvs in lvi.SubItems)
        {
            if (i2 == 1)
            {
                iad = 1;
                foreach (ColumnHeader lvfi in flatListView1.Columns)
                {
                    try
                    {
                        ws.Cells[i2, iad] = lvfi.Text;
                    }

                    catch (Exception ee)
                    {

                    }

                    iad++;
                }

            }
            else
            {
                try
                {
                    ws.Cells[i2, i] = lvs.Text;
                }

                catch (Exception ee)
                {

                }
            }

            i++;
        }
        i2++;
    }
}
else if (e.ClickedItem.Text == "CSV")
{
    Stream myStream;
    SaveFileDialog saveFileDialog1 = new SaveFileDialog();

    saveFileDialog1.Filter = "csv files (*.csv)|*.csv";
    saveFileDialog1.FilterIndex = 2;
    saveFileDialog1.RestoreDirectory = true;

    if (saveFileDialog1.ShowDialog() == DialogResult.OK)
    {
        if ((myStream = saveFileDialog1.OpenFile()) != null)
        {
            myStream.Close();
            ListViewToCSV(flatListView1, saveFileDialog1.FileName, true);

        }
    }
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T18:04:21.823

它应该在您的窗口的构造函数中：

```
public MyWindow()
{

//here inicialization

contexMenuuu.ItemClicked +=
new ToolStripItemClickedEventHandler(contexMenuuu_ItemClickedd);
} 
```

这是一个非常常见的错误，多次添加事件处理程序，下次要小心

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-08T10:04:56.617

就我而言，我已经使用以下语句解决了它 -

`e.Handled = true;`

这会将事件标记为已处理（显然）。

# jquery - 识别不同文本区域中的光标位置并在选择列表框中的项目时插入文本

> ID：13208782
> 
> 赞同：0
> 
> 时间：2012-11-03T11:38:41.843
> 
> 标签：jquery, asp.net, html

谁可以帮我这个事？

我得到了一个设计有两个文本区域控件和一个列表框控件的 .aspx 页面。

```
<td>
    <p>Base Entity Attributes</p>
    <select name="drop1" id="SelectGroupApiS" size="4">
    </select>
</td>
<td>
    <p>REQUEST XML</p>
    <textarea id="txtAreaRequest" rows="" cols=""></textarea>
</td>
<td>
    <p>RESPONSE XML</p>
    <textarea id="txtAreaResponse" rows="" cols=""></textarea>
</td> 
```

当我单击任何列表框项目时，我使用 jquery 将 listitem 的当前文本置于 TextArea 中。但我希望文本位于包含光标位置的文本框中。目前我在单个文本框中。我现在希望将文本显示在包含光标位置的两个文本框之一中。

怎么做才能让它发生？

请帮帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:58:40.543

一种可能的解决方案是拥有最后一个焦点的文本区域的句柄，并在单击 lsit 项目时使用此句柄。

即类似的东西

```
var $focusTA = null;
$('textarea').focus(function() {
    $focusTA = $(this);
}); 
```

做

```
$focusTA.insertAtCaret($('#lis>option:selected').text()); 
```

用于设置文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:02:20.823

小提琴[http://jsfiddle.net/tariqulazam/LBkcV/](http://jsfiddle.net/tariqulazam/LBkcV/)

**HTML**

```
<td>
    <p>Base Entity Attributes</p>
    <select name="drop1" id="SelectGroupApiS" size="4">
        <option value="volvo">Volvo</option>
  <option value="saab">Saab</option>
  <option value="mercedes">Mercedes</option>
  <option value="audi">Audi</option>
    </select>
</td>
<td>
    <p>REQUEST XML</p>
    <textarea id="txtAreaRequest" class="tarea" rows="" cols=""></textarea>
</td>
<td>
    <p>RESPONSE XML</p>
    <textarea id="txtAreaResponse" class="tarea" rows="" cols=""></textarea>
</td>​ 
```

**JavaScript**

```
var activeArea;
$(document).ready(function(){
    activeArea = $("#txtAreaRequest");
});
$(".tarea").click(function(){
    activeArea = $(this);
}).focus(function(){
    activeArea = $(this);
});

$("#SelectGroupApiS").change(function(){
    $(activeArea).append($("#SelectGroupApiS option:selected").val());    
}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T12:05:04.090

如果我正确理解你的问题，你可以这样做：

```
$(document).ready(function(){$('#txtAreaRequest').focus()});

var dataTB = [];
$('textarea').blur(function() {
    dataTB[0] = this;
    dataTB[1] = getCaret(this);
});

$('#SelectGroupApiS').change(function() {
    var valTB =  $(dataTB[0]).val();    $(dataTB[0]).val(valTB.substring(0,dataTB[1])+$('option:selected',this).text()+valTB.substring(dataTB[1]));

});

function getCaret(node) {
    if (node.selectionStart) {
        return node.selectionStart;
    } else if (!document.selection) {
        return 0;
    }

    var c = "\001",
        sel = document.selection.createRange(),
        dul = sel.duplicate(),
        len = 0;

    dul.moveToElementText(node);
    sel.text = c;
    len = dul.text.indexOf(c);
    sel.moveStart('character', -1);
    sel.text = "";
    return len;
} 
```

见[http://jsfiddle.net/mcDhE/](http://jsfiddle.net/mcDhE/)

# android - Proguard 返回错误代码 1。请参阅控制台

> ID：13208784
> 
> 赞同：34
> 
> 时间：2012-11-03T11:38:48.653
> 
> 标签：android, proguard

我在创建应用程序的签名 apk 时收到此异常。

我的项目中也添加了 5 个库项目。

任何提示如何解决这个问题？

这是我的配置文件：

```
-optimizationpasses 5
-dontusemixedcaseclassnames
-dontskipnonpubliclibraryclasses
-dontpreverify
-verbose
-optimizations !code/simplification/arithmetic,!field/*,!class/merging/*

-keep public class * extends android.app.Activity
-keep public class * extends android.app.Application
-keep public class * extends android.app.Service
-keep public class * extends android.content.BroadcastReceiver
-keep public class * extends android.content.ContentProvider
-keep public class * extends android.app.backup.BackupAgentHelper
-keep public class * extends android.preference.Preference
-keep public class com.android.vending.licensing.ILicensingService

-keepclasseswithmembernames class * {
    native <methods>;
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet);
}

-keepclasseswithmembers class * {
    public <init>(android.content.Context, android.util.AttributeSet, int);
}

-keepclassmembers class * extends android.app.Activity {
   public void *(android.view.View);
}

-keepclassmembers enum * {
    public static **[] values();
    public static ** valueOf(java.lang.String);
}

-keep class * implements android.os.Parcelable {
  public static final android.os.Parcelable$Creator *;
} 
```

这是控制台中的异常。

```
 [2012-11-03 16:20:10 - ] Proguard returned with error code 1\. See console
[2012-11-03 16:20:10 - ] Note: there were 12 duplicate class definitions.
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find superclass or interface org.apache.tools.ant.Task
[2012-11-03 16:20:10 - ] Warning: library class android.test.AndroidTestCase extends or implements program class junit.framework.TestCase
[2012-11-03 16:20:10 - ] Warning: library class android.test.AndroidTestRunner extends or implements program class junit.runner.BaseTestRunner
[2012-11-03 16:20:10 - ] Warning: library class android.test.InstrumentationTestCase extends or implements program class junit.framework.TestCase
[2012-11-03 16:20:10 - ] Warning: library class android.test.InstrumentationTestSuite extends or implements program class junit.framework.TestSuite
[2012-11-03 16:20:10 - ] Warning: library class android.test.suitebuilder.TestSuiteBuilder$FailedToCreateTests extends or implements program class junit.framework.TestCase
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanCopier$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanGenerator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanGenerator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanGenerator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanGenerator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanGenerator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$1: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$1: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$1: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$2: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$2: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$2: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$2: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$3: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$3: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.BeanMapEmitter$3: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.beans.ImmutableBean$Generator: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.IntrospectionException
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.Introspector
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.Introspector
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.BeanInfo
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.BeanInfo
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.BeanInfo
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.PropertyDescriptor
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.core.ReflectUtils: can't find referenced class java.beans.IntrospectionException
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.Task
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.Task
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced method 'org.apache.tools.ant.Project getProject()' in class org.mockito.cglib.transform.AbstractProcessTask
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.types.FileSet
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.types.FileSet
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.types.FileSet
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.BuildException
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.BuildException
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.types.FileSet
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.types.FileSet
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.types.FileSet
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.DirectoryScanner
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractProcessTask: can't find referenced class org.apache.tools.ant.Project
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractTransformTask: can't find referenced method 'void log(java.lang.String,int)' in class org.mockito.cglib.transform.AbstractTransformTask
[2012-11-03 16:20:10 - ] Warning: org.mockito.cglib.transform.AbstractTransformTask: can't find referenced method 'void log(java.lang.String)' in class org.mockito.cglib.transform.AbstractTransformTask
[2012-11-03 16:20:10 - ] Warning: org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator: can't find referenced class sun.reflect.ReflectionFactory
[2012-11-03 16:20:10 - ] Warning: org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator: can't find referenced class sun.reflect.ReflectionFactory
[2012-11-03 16:20:10 - ] Warning: org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator: can't find referenced class sun.reflect.ReflectionFactory
[2012-11-03 16:20:10 - ] Warning: org.objenesis.instantiator.sun.SunReflectionFactoryInstantiator: can't find referenced class sun.reflect.ReflectionFactory
[2012-11-03 16:20:10 - ] Warning: org.objenesis.instantiator.sun.SunReflectionFactorySerializationInstantiator: can't find referenced class sun.reflect.ReflectionFactory
[2012-11-03 16:20:10 - ] Warning: org.objenesis.instantiator.sun.SunReflectionFactorySerializationInstantiator: can't find referenced class sun.reflect.ReflectionFactory
[2012-11-03 16:20:10 - ] Warning: org.objenesis.instantiator.sun.SunReflectionFactorySerializationInstantiator: can't find referenced class sun.reflect.ReflectionFactory
[2012-11-03 16:20:10 - ] Warning: org.objenesis.instantiator.sun.SunReflectionFactorySerializationInstantiator: can't find referenced class sun.reflect.ReflectionFactory
[2012-11-03 16:20:10 - ]       You should check if you need to specify additional program jars.
[2012-11-03 16:20:10 - ] Warning: there were 76 unresolved references to classes or interfaces.
[2012-11-03 16:20:10 - ]          You may need to specify additional library jars (using '-libraryjars').
[2012-11-03 16:20:10 - ] Warning: there were 5 instances of library classes depending on program classes.
[2012-11-03 16:20:10 - ]          You must avoid such dependencies, since the program classes will
[2012-11-03 16:20:10 - ]          be processed, while the library classes will remain unchanged.
[2012-11-03 16:20:10 - ] Warning: there were 3 unresolved references to program class members.
[2012-11-03 16:20:10 - ]          Your input classes appear to be inconsistent.
[2012-11-03 16:20:10 - ]          You may need to recompile them and try again.
[2012-11-03 16:20:10 - ]          Alternatively, you may have to specify the option 
[2012-11-03 16:20:10 - ]          '-dontskipnonpubliclibraryclassmembers'.
[2012-11-03 16:20:10 - ] java.io.IOException: Please correct the above warnings first.
[2012-11-03 16:20:10 - ]    at proguard.Initializer.execute(Initializer.java:321)
[2012-11-03 16:20:10 - ]    at proguard.ProGuard.initialize(ProGuard.java:211)
[2012-11-03 16:20:10 - ]    at proguard.ProGuard.execute(ProGuard.java:86)
[2012-11-03 16:20:10 - ]    at proguard.ProGuard.main(ProGuard.java:492) 
```

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-11-04T06:59:13.570

解决方案是忽略警告，因为它们是 lib 项目内部的，

我将这些设置添加到配置文件（proguard-project.txt）

```
-dontwarn org.mockito.**
-dontwarn sun.reflect.**
-dontwarn android.test.** 
```

# symfony - 为什么最后一个水合元素在学说2中通过引用传递？

> ID：13208788
> 
> 赞同：1
> 
> 时间：2012-11-03T11:39:27.493
> 
> 标签：symfony, doctrine-orm, symfony-2.1

我使用 Doctrine 2.3.1-DEV 版本。

最后获取的元素通过引用传递。为什么？

```
$em = $this->getDoctrine()->getEntityManager();
$rows = $em->getRepository('FMECoreBundle:TheListGridRow')
->createQueryBuilder('row')
->getQuery()
->getArrayResult();
var_dump($rows); 
```

输出：

```
array(3) {
  [0]=>
  array(2) {
    ["id"]=>
    int(5)
    ["rank"]=>
    int(1)
  }
  [1]=>
  array(2) {
    ["id"]=>
    int(6)
    ["rank"]=>
    int(2)
  }
  [2]=>
  &array(2) {
    ["id"]=>
    int(7)
    ["rank"]=>
    int(3)
  }
} 
```

为什么最后一个元素是`&array(2)`？谁能解释一下？

# eclipse-rcp - Eclipse RCP 4.2 - 是否适合商业应用

> ID：13208799
> 
> 赞同：1
> 
> 时间：2012-11-03T11:40:57.847
> 
> 标签：eclipse-rcp

Eclipse RCP 4.2 JUNO 对于开发商业应用程序是否稳定？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T10:53:20.287

E4领先一步。但！如果您现在没有被迫从 E4 开始，请至少等到第一个 SR（服务发布）。E4 是稳定的，但在相同的硬件上比 3.x 线慢得多。此外，许多著名的 Eclipse 教科书尚未针对 E4 进行更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:42:52.090

这是稳定的，您可以将 Eclipse RCP 4.2 JUNO 用于商业目的

# java - java中的哪个集合可以在元素之间插入

> ID：13208805
> 
> 赞同：-3
> 
> 时间：2012-11-03T11:41:16.903
> 
> 标签：java, list, collections

我想在 java 中使用 colllection(List like one) 可以在元素之间插入？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T11:43:21.767

List 派生的集合包含一个 add 方法，该方法采用索引，因此您可以执行此操作。java.util.ArrayList 是一个常见的...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T11:51:51.073

在元素之间添加元素是可选操作，默认情况下在 AbstractCollection 中未实现并抛出特定异常。[AbstractList](http://docs.oracle.com/javase/6/docs/api/java/util/AbstractList.html)由 AbstractCollection 派生，添加了 add(int, E) 的开箱即用实现，因此 AbstractList 的任何具体实现都将拥有它。
更重要的是，选择一个适合您在内存消耗、读取、写入等方面的性能需求的实现......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T11:56:27.433

```
The List interface has a function add(index,element) which adds an element at the specified index.

ArrayList<String> list=new ArrayList<String>();
list.add("Java") ;
list.add("JSP") ;
list.add("STRUTS") ;
list.add("EJB") ;

list.add(2,"C++"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-03T11:45:09.080

使用[List 的 add 方法](http://docs.oracle.com/javase/7/docs/api/java/util/List.html#add%28int,%20E%29) 指定要在列表中插入的位置

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-07T13:16:40.980

数组列表是轻松插入/更新/删除类似操作的最佳方式。

你也可以使用链表，但它主要用于大数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-07T05:52:32.120

list 接口声明了一个函数 add(int index, E element)。ArrayList、LinkedList 类具有上述方法的实现。因此，可以根据您的要求使用上述任何一种在两者之间添加元素。

列表 os = new ArrayList();
os.add('Windows');

os.add('Linux');
os.add('Mac');
os.add(1,'Android')

Android 将被添加到列表的第一个索引处，即：e 将是第二个元素，因为索引从 0 开始。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-11-07T06:14:00.170

您可以使用列表的 add(int index, Integer element) 函数。

在此函数中，您可以使用索引值将元素具体放在列表范围内。

这是示例：

```
List<Integer> sampleList = new ArrayList<Integer>();
   sampleList.add(1);
   sampleList.add(2);
   sampleList.add(3); //sampleList now contains {1,2,3} 
```

现在，如果你想把它放在 1 和 2 之间。

```
 sampleList.add(1,4); //sampleList now contains {1,4,2,3} 
```

我们将值 4 置于 1 和 2 之间。

# php - PHP Sockets - 接受多个连接

> ID：13208814
> 
> 赞同：17
> 
> 时间：2012-11-03T11:41:59.273
> 
> 标签：php, sockets, networking, tcp, socketserver

我正在尝试创建一个简单的客户端/服务器应用程序，因此我正在尝试使用 PHP 中的套接字。

现在我在 C# 中有一个简单的客户端，它可以很好地连接到服务器，但是我一次只能将一个客户端连接到这个服务器（我在网上找到了这个代码示例，并为了测试目的对其进行了一些调整）。

有趣的是，我发现了同样的问题，基于此处的相同示例：[https ://stackoverflow.com/questions/10318023/php-socket-connections-cant-handle-multiple-connection](https://stackoverflow.com/questions/10318023/php-socket-connections-cant-handle-multiple-connection)

我试图了解它的每个部分，并且我即将详细了解它是如何工作的，但由于某种原因，当我连接第二个客户端时，第一个客户端会断开连接/崩溃。

谁能给我一些疯狂的想法或指向我应该看的地方？

```
<?php
// Set time limit to indefinite execution
set_time_limit (0);
// Set the ip and port we will listen on
$address = '127.0.0.1';
$port = 9000;
$max_clients = 10;
// Array that will hold client information
$client = array();
// Create a TCP Stream socket
$sock = socket_create(AF_INET, SOCK_STREAM, 0);
// Bind the socket to an address/port
socket_bind($sock, $address, $port) or die('Could not bind to address');
// Start listening for connections
socket_listen($sock);
// Loop continuously
while (true) {
    // Setup clients listen socket for reading
    $read[0] = $sock;
    for ($i = 0; $i < $max_clients; $i++)
    {
        if (isset($client[$i]))
        if ($client[$i]['sock']  != null)
            $read[$i + 1] = $client[$i]['sock'] ;
    }
    // Set up a blocking call to socket_select()
    $ready = socket_select($read, $write = NULL, $except = NULL, $tv_sec = NULL);
    /* if a new connection is being made add it to the client array */
    if (in_array($sock, $read)) {
        for ($i = 0; $i < $max_clients; $i++)
        {
            if (!isset($client[$i])) {
                $client[$i] = array();
                $client[$i]['sock'] = socket_accept($sock);
                echo("Accepting incoming connection...\n");
                break;
            }
            elseif ($i == $max_clients - 1)
                print ("too many clients");
        }
        if (--$ready <= 0)
            continue;
    } // end if in_array

    // If a client is trying to write - handle it now
    for ($i = 0; $i < $max_clients; $i++) // for each client
    {
        if (isset($client[$i]))
        if (in_array($client[$i]['sock'] , $read))
        {
            $input = socket_read($client[$i]['sock'] , 1024);
            if ($input == null) {
                // Zero length string meaning disconnected
                echo("Client disconnected\n");
                unset($client[$i]);
            }
            $n = trim($input);
            if ($n == 'exit') {
                echo("Client requested disconnect\n");
                // requested disconnect
                socket_close($client[$i]['sock']);
            }
            if(substr($n,0,3) == 'say') {
                //broadcast
                echo("Broadcast received\n");
                for ($j = 0; $j < $max_clients; $j++) // for each client
                {
                    if (isset($client[$j]))
                    if ($client[$j]['sock']) {
                        socket_write($client[$j]['sock'], substr($n, 4, strlen($n)-4).chr(0));
                    }
                }
            } elseif ($input) {
                echo("Returning stripped input\n");
                // strip white spaces and write back to user
                $output = ereg_replace("[ \t\n\r]","",$input).chr(0);
                socket_write($client[$i]['sock'],$output);
            }
        } else {
            // Close the socket
            if (isset($client[$i]))
            echo("Client disconnected\n");
            if ($client[$i]['sock'] != null){ 
                socket_close($client[$i]['sock']); 
                unset($client[$i]); 
            }
        }
    }
} // end while
// Close the master sockets
echo("Shutting down\n");
socket_close($sock);
?> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-12-22T10:23:19.090

这个脚本非常适合我

```
<?php
    /*! @class      SocketServer
        @author     Navarr Barnier
        @abstract   A Framework for creating a multi-client server using the PHP language.
     */
    class SocketServer
    {
        /*! @var        config
            @abstract   Array - an array of configuration information used by the server.
         */
        protected $config;

        /*! @var        hooks
            @abstract   Array - a dictionary of hooks and the callbacks attached to them.
         */
        protected $hooks;

        /*! @var        master_socket
            @abstract   resource - The master socket used by the server.
         */
        protected $master_socket;

        /*! @var        max_clients
            @abstract   unsigned int - The maximum number of clients allowed to connect.
         */
        public $max_clients = 10;

        /*! @var        max_read
            @abstract   unsigned int - The maximum number of bytes to read from a socket at a single time.
         */
        public $max_read = 1024;

        /*! @var        clients
            @abstract   Array - an array of connected clients.
         */
        public $clients;

        /*! @function   __construct
            @abstract   Creates the socket and starts listening to it.
            @param      string  - IP Address to bind to, NULL for default.
            @param      int - Port to bind to
            @result     void
         */
        public function __construct($bind_ip,$port)
        {
            set_time_limit(0);
            $this->hooks = array();

            $this->config["ip"] = $bind_ip;
            $this->config["port"] = $port;

            $this->master_socket = socket_create(AF_INET, SOCK_STREAM, 0);
            socket_bind($this->master_socket,$this->config["ip"],$this->config["port"]) or die("Issue Binding");
            socket_getsockname($this->master_socket,$bind_ip,$port);
            socket_listen($this->master_socket);
            SocketServer::debug("Listenting for connections on {$bind_ip}:{$port}");
        }

        /*! @function   hook
            @abstract   Adds a function to be called whenever a certain action happens.  Can be extended in your implementation.
            @param      string  - Command
            @param      callback- Function to Call.
            @see        unhook
            @see        trigger_hooks
            @result     void
         */
        public function hook($command,$function)
        {
            $command = strtoupper($command);
            if(!isset($this->hooks[$command])) { $this->hooks[$command] = array(); }
            $k = array_search($function,$this->hooks[$command]);
            if($k === FALSE)
            {
                $this->hooks[$command][] = $function;
            }
        }

        /*! @function   unhook
            @abstract   Deletes a function from the call list for a certain action.  Can be extended in your implementation.
            @param      string  - Command
            @param      callback- Function to Delete from Call List
            @see        hook
            @see        trigger_hooks
            @result     void
         */
        public function unhook($command = NULL,$function)
        {
            $command = strtoupper($command);
            if($command !== NULL)
            {
                $k = array_search($function,$this->hooks[$command]);
                if($k !== FALSE)
                {
                    unset($this->hooks[$command][$k]);
                }
            } else {
                $k = array_search($this->user_funcs,$function);
                if($k !== FALSE)
                {
                    unset($this->user_funcs[$k]);
                }
            }
        }

        /*! @function   loop_once
            @abstract   Runs the class's actions once.
            @discussion Should only be used if you want to run additional checks during server operation.  Otherwise, use infinite_loop()
            @param      void
            @see        infinite_loop
            @result     bool    - True
        */
        public function loop_once()
        {
            // Setup Clients Listen Socket For Reading
            $read[0] = $this->master_socket;
            for($i = 0; $i < $this->max_clients; $i++)
            {
                if(isset($this->clients[$i]))
                {
                    $read[$i + 1] = $this->clients[$i]->socket;
                }
            }

            // Set up a blocking call to socket_select
            if(socket_select($read,$write = NULL, $except = NULL, $tv_sec = 5) < 1)
            {
            //  SocketServer::debug("Problem blocking socket_select?");
                return true;
            }

            // Handle new Connections
            if(in_array($this->master_socket, $read))
            {
                for($i = 0; $i < $this->max_clients; $i++)
                {
                    if(empty($this->clients[$i]))
                    {
                        $temp_sock = $this->master_socket;
                        $this->clients[$i] = new SocketServerClient($this->master_socket,$i);
                        $this->trigger_hooks("CONNECT",$this->clients[$i],"");
                        break;
                    }
                    elseif($i == ($this->max_clients-1))
                    {
                        SocketServer::debug("Too many clients... :( ");
                    }
                }

            }

            // Handle Input
            for($i = 0; $i < $this->max_clients; $i++) // for each client
            {
                if(isset($this->clients[$i]))
                {
                    if(in_array($this->clients[$i]->socket, $read))
                    {
                        $input = socket_read($this->clients[$i]->socket, $this->max_read);
                        if($input == null)
                        {
                            $this->disconnect($i);
                        }
                        else
                        {
                            SocketServer::debug("{$i}@{$this->clients[$i]->ip} --> {$input}");
                            $this->trigger_hooks("INPUT",$this->clients[$i],$input);
                        }
                    }
                }
            }
            return true;
        }

        /*! @function   disconnect
            @abstract   Disconnects a client from the server.
            @param      int - Index of the client to disconnect.
            @param      string  - Message to send to the hooks
            @result     void
        */
        public function disconnect($client_index,$message = "")
        {
            $i = $client_index;
            SocketServer::debug("Client {$i} from {$this->clients[$i]->ip} Disconnecting");
            $this->trigger_hooks("DISCONNECT",$this->clients[$i],$message);
            $this->clients[$i]->destroy();
            unset($this->clients[$i]);          
        }

        /*! @function   trigger_hooks
            @abstract   Triggers Hooks for a certain command.
            @param      string  - Command who's hooks you want to trigger.
            @param      object  - The client who activated this command.
            @param      string  - The input from the client, or a message to be sent to the hooks.
            @result     void
        */
        public function trigger_hooks($command,&$client,$input)
        {
            if(isset($this->hooks[$command]))
            {
                foreach($this->hooks[$command] as $function)
                {
                    SocketServer::debug("Triggering Hook '{$function}' for '{$command}'");
                    $continue = call_user_func($function,&$this,&$client,$input);
                    if($continue === FALSE) { break; }
                }
            }
        }

        /*! @function   infinite_loop
            @abstract   Runs the server code until the server is shut down.
            @see        loop_once
            @param      void
            @result     void
        */
        public function infinite_loop()
        {
            $test = true;
            do
            {
                $test = $this->loop_once();
            }
            while($test);
        }

        /*! @function   debug
            @static
            @abstract   Outputs Text directly.
            @discussion Yeah, should probably make a way to turn this off.
            @param      string  - Text to Output
            @result     void
        */
        public static function debug($text)
        {
            echo("{$text}\r\n");
        }

        /*! @function   socket_write_smart
            @static
            @abstract   Writes data to the socket, including the length of the data, and ends it with a CRLF unless specified.
            @discussion It is perfectly valid for socket_write_smart to return zero which means no bytes have been written. Be sure to use the === operator to check for FALSE in case of an error. 
            @param      resource- Socket Instance
            @param      string  - Data to write to the socket.
            @param      string  - Data to end the line with.  Specify a "" if you don't want a line end sent.
            @result     mixed   - Returns the number of bytes successfully written to the socket or FALSE on failure. The error code can be retrieved with socket_last_error(). This code may be passed to socket_strerror() to get a textual explanation of the error.
        */
        public static function socket_write_smart(&$sock,$string,$crlf = "\r\n")
        {
            SocketServer::debug("<-- {$string}");
            if($crlf) { $string = "{$string}{$crlf}"; }
            return socket_write($sock,$string,strlen($string));
        }

        /*! @function   __get
            @abstract   Magic Method used for allowing the reading of protected variables.
            @discussion You never need to use this method, simply calling $server->variable works because of this method's existence.
            @param      string  - Variable to retrieve
            @result     mixed   - Returns the reference to the variable called.
        */
        function &__get($name)
        {
            return $this->{$name};
        }
    }

    /*! @class      SocketServerClient
        @author     Navarr Barnier
        @abstract   A Client Instance for use with SocketServer
     */
    class SocketServerClient
    {
        /*! @var        socket
            @abstract   resource - The client's socket resource, for sending and receiving data with.
         */
        protected $socket;

        /*! @var        ip
            @abstract   string - The client's IP address, as seen by the server.
         */
        protected $ip;

        /*! @var        hostname
            @abstract   string - The client's hostname, as seen by the server.
            @discussion This variable is only set after calling lookup_hostname, as hostname lookups can take up a decent amount of time.
            @see        lookup_hostname
         */
        protected $hostname;

        /*! @var        server_clients_index
            @abstract   int - The index of this client in the SocketServer's client array.
         */
        protected $server_clients_index;

        /*! @function   __construct
            @param      resource- The resource of the socket the client is connecting by, generally the master socket.
            @param      int - The Index in the Server's client array.
            @result     void
         */
        public function __construct(&$socket,$i)
        {
            $this->server_clients_index = $i;
            $this->socket = socket_accept($socket) or die("Failed to Accept");
            SocketServer::debug("New Client Connected");
            socket_getpeername($this->socket,$ip);
            $this->ip = $ip;
        }

        /*! @function   lookup_hostname
            @abstract   Searches for the user's hostname and stores the result to hostname.
            @see        hostname
            @param      void
            @result     string  - The hostname on success or the IP address on failure.
         */
        public function lookup_hostname()
        {
            $this->hostname = gethostbyaddr($this->ip);
            return $this->hostname;
        }

        /*! @function   destroy
            @abstract   Closes the socket.  Thats pretty much it.
            @param      void
            @result     void
         */
        public function destroy()
        {
            socket_close($this->socket);
        }

        function &__get($name)
        {
            return $this->{$name};
        }

        function __isset($name)
        {
            return isset($this->{$name});
        }
    } 
```

[github上的源码](https://gist.github.com/navarr/459321)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-09-27T09:06:05.043

当前的最佳答案是错误的，您不需要多个线程来处理多个客户端。您可以使用非阻塞 I/O 和`stream_select`/`socket_select`来处理来自客户端的可操作消息。我建议使用`stream_socket_*`以上的功能`socket_*`。

虽然非阻塞 I/O 工作得很好，但您不能进行任何涉及阻塞 I/O 的函数调用，否则阻塞 I/O 会阻塞整个进程并且所有客户端都挂起，而不仅仅是一个。

这意味着所有 I/O 都必须是非阻塞的或保证非常快（这并不完美，但可能是可以接受的）。因为不仅您的套接字需要使用`stream_select`，而且您需要在*所有*打开的流上进行选择，所以我推荐一个库，该库提供注册读取和写入观察者的功能，这些观察者在流变得可读/可写时执行。

有多种这样的框架可用，最常见的是[ReactPHP](https://reactphp.org)和[Amp](https://amphp.org/)。底层事件循环非常相似，但 Amp 在这方面提供了更多功能。

两者之间的主要区别在于 API 的方法。虽然 ReactPHP 在任何地方都使用回调，但 Amp 试图通过使用协程并优化其 API 来避免它们。

Amp 的*“入门”*指南基本上就是关于这个主题的。[您可以在此处](https://amphp.org/getting-started/tcp-chat/)阅读完整指南。我将在下面包含一个工作示例。

```
<?php

require __DIR__ . "/vendor/autoload.php";

// Non-blocking server implementation based on amphp/socket.

use Amp\Loop;
use Amp\Socket\ServerSocket;
use function Amp\asyncCall;

Loop::run(function () {
    $uri = "tcp://127.0.0.1:1337";

    $clientHandler = function (ServerSocket $socket) {
        while (null !== $chunk = yield $socket->read()) {
            yield $socket->write($chunk);
        }
    };

    $server = Amp\Socket\listen($uri);

    while ($socket = yield $server->accept()) {
        asyncCall($clientHandler, $socket);
    }
}); 
```

`Loop::run()`运行事件循环并监视计时器事件、信号和可操作流，它们可以用`Loop::on*()`方法注册。服务器套接字是使用`Amp\Socket\listen()`. `Server::accept()`返回`Promise`可用于等待新客户端连接的 a。一旦客户端被接受，它就会执行一个协程，该协程从客户端读取并将相同的数据回显给它。有关详细信息，请参阅 Amp 的文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T11:56:09.907

如果要处理 > 1 个客户端，通常套接字服务器需要是多线程的。您将创建一个“监听”线程并为每个客户请求生成一个新的“回答”线程。我不确定 PHP 将如何处理这样的情况。也许它有一个分叉机制？

编辑：似乎 PHP 本身不提供线程（http://stackoverflow.com/questions/70855/how-can-one-use-multi-threading-in-php-applications）如果你想遵循典型的套接字服务器的范例，您可能会使用“popen”来生成一个处理子请求的进程。交出套接字 ID，并在子套接字关闭时让它自行关闭。如果您的服务器进程关闭，您需要保持在此列表的顶部以避免孤立这些进程。

FWIW：这里有一些多客户端服务器的例子：http: [//php.net/manual/en/function.socket-accept.php](http://php.net/manual/en/function.socket-accept.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-13T22:01:48.147

我在网上找到了这个。但我想在这里分享这段代码。因为我找不到其他地方。

```
<?php

  // port number
  $port = 5000;
  // IP address 
  $address = '127.0.0.1';
  // Maximum client number
  $max_clients_number = 10;
  // Create master stream sockets.
  $master_stream_socket = socket_create(AF_INET, SOCK_STREAM, 0);
  // Bind the socket to IP address and Port number.
  socket_bind($master_stream_socket, $address, $port);
  // Start to listen for the client.
  socket_listen($master_stream_socket);

  // This variable will hold client informations. 
  $clients = [$master_stream_socket];

  while(true){
    $read = $clients;

    if( socket_select($read, $write = null, $exp = null, null) ){
      if( in_array( $master_stream_socket, $read ) ){
        $c_socket = socket_accept($master_stream_socket);
        $clients[] = $c_socket;

        $key = array_search($master_stream_socket, $read);
        unset( $read[ $key ] );
      }

      if( count($read) > 0 ) {
        foreach( $read as $current_socket ) {
          $content = socket_read($current_socket, 2048);
          foreach( $clients as $client ) {
            if( $client != $master_stream_socket && $client != $current_socket ){
              socket_write($client, $content, strlen($content));
            }
          }
        }
      }
    } else {
      continue;
    }
  }

  // Close master sockets. 
  socket_close($master_stream_socket);

?> 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2014-09-19T18:52:56.500

检查这个

```
git clone https://github.com/lukaszkujawa/php-multithreaded-socket-server.git socketserver
cd socketserver
php server.php 
```

欲了解更多信息，请访问：[http ://systemsarchitect.net/multi-threaded-socket-server-in-php-with-fork/](http://systemsarchitect.net/multi-threaded-socket-server-in-php-with-fork/)

# android - 发布/创建从 android 应用到 f acebook 的投票

> ID：13208817
> 
> 赞同：1
> 
> 时间：2012-11-03T11:42:16.430
> 
> 标签：android, facebook, facebook-android-sdk

facebook 中有一个名为 poll(opinion poll) 的应用程序，您可以在其中**提出问题**和一些**选项**。创建投票后，其他人可以开始投票。我可以在我的 android 应用程序中创建投票并在 facebook 上发布它吗？即用户将提供他的 Facebook 登录凭据，并且应用程序将代表他创建投票。有没有这样的API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T00:50:17.313

是的，有可能。相关文档在这里：[https ://developers.facebook.com/docs/reference/api/question/](https://developers.facebook.com/docs/reference/api/question/)

要在您的 android 应用上执行此操作，您需要将我们的 Facebook SDK for Android 添加到您的应用中。完成后，要创建问题，您只需执行以下操作

1.  通过 Facebook 对用户进行身份验证以获取有效的访问令牌
2.  请求`publish_stream`和`user_questions`权限

然后，您只需要以下代码即可创建问题并将其发布到 Facebook：

```
Bundle params = new Bundle();
params.putString("question", "Cats or dogs?");
JSONObject questions = new JSONObject();
questions.put("Cat");
questions.put("Dog");
params.putString("options", questions.toString())

mAsyncRunner.request("me/questions", params, "POST", new RequestListener() {
    @Override
    public void onComplete(Bundle values) {
        // success
        Log.d("fb", values.toString());
    }
    @Override
    public void onFacebookError(FacebookError e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    @Override
    public void onFileNotFoundException(FileNotFoundException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }

    @Override
    public void onIOException(IOException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    }     

    @Override
    public void onMalformedURLException(MalformedURLException e, final Object state) {
        Log.e("Facebook", e.getMessage());
        e.printStackTrace();
    } 
```

# c#-4.0 - 如何在 Metro 应用程序的嵌入式播放器中播放 youtube 视频

> ID：13208818
> 
> 赞同：0
> 
> 时间：2012-11-03T11:42:34.530
> 
> 标签：c#-4.0, youtube, microsoft-metro

我正在开发一个地铁应用程序。我必须在其嵌入播放器中播放 youtube 视频，而不是在 Metro 应用程序提供的播放器中播放。我在网上搜索，发现有 iframe、flash 和对象播放器。我试图在我的应用程序中实现但没有成功。有没有可以播放的视频或者我必须使用默认的地铁播放器才能播放？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:23:53.613

您可以在 webview 元素中添加 youtube 嵌入代码。

XAML 设计
放置一个**webview**元素

*XAML.cs 在this.InitializeComponent()*下方添加此代码 ；

 *```
string htmContent = " html text here";
webview.NavigateToString(htmContent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:18:55.490

查看[MyToolkit](http://mytoolkit.codeplex.com/wikipage?title=YouTube)中的[YouTube 课程](http://mytoolkit.codeplex.com/wikipage?title=YouTube)。您给它一个视频 ID（URL 的最后一部分），它会从 Youtube 为您获取一个 MP4 文件，您可以使用标准 MediaElement 播放该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T10:11:10.537

看看[如何在 Windows8 html/javascript 应用程序中播放 YouTube 视频？](https://stackoverflow.com/questions/11491774/how-to-play-youtube-videos-in-a-windows8-html-javascript-app)*

# c++ - 对一串正负分数求和

> ID：13208820
> 
> 赞同：2
> 
> 时间：2012-11-03T11:42:45.670
> 
> 标签：c++

我有一个作业来为这个序列求和：`S = 1 - 1/2 + 1/4 - 1/6 + 1/8 - 1/10 + ... + 1/2n`如果用户输入 2，那么总和将是`1 - 1/2 = 1/2`等等。

这是我的编码：

```
int main() {

    int num, N, k;
    double S;
    cout << "enter the sequence : ";
    cin >> N;
    for (num = 1, k = 0, S = 1; num <=N; num++) {
        num++;
        k=+2;
        if (num % 2 == 0) {
            S -= 1/k;
        } else {
            S += 1/k;
        }
    }
    cout << "The sum is " << S;
    system("PAUSE");
    return 0;
} 
```

我很困惑为什么总和总是指 1 ？谁能向我解释为什么会这样？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T11:44:07.160

试试`1./k`——否则 1 除以任何整数都会产生零。（并查看有关`=+`vs`+=`错字的其他答案）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T11:44:07.417

在你的循环中，你有这个

```
k=+2; 
```

因此您将值 2 分配给`k`每次迭代。你可能想要

```
k+=2; 
```

还要注意另一个答案中突出显示的整数除法问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-03T11:47:29.537

```
for(num = 1, sum = 1; num <=N; num++){
    if(num%2==0){
        sum += 1/(num*2);
    }else{
        sum -= 1/(num*2);
    }
} 
```

如果您的序列中的第 n 个术语是 ，那么应该这样做`(1/((n-1)*2))`。

编辑：如下所述，执行除法时，其中一个操作数必须为非整数，以防止结果为整数。对我上面尝试的更正是：

```
for(num = 1, sum = 1; num <=N; num++){
    if(num%2==0){
        sum += 1.0/(num*2);
    }else{
        sum -= 1.0/(num*2);
    }
} 
```

[http://codepad.org/KgGAxKxS](http://codepad.org/KgGAxKxS)

# math - 飞机上的汽车方向

> ID：13208824
> 
> 赞同：1
> 
> 时间：2012-11-03T11:43:09.347
> 
> 标签：math, matrix, directx, game-physics

我目前正在使用 DirectX 在飞机上进行简单的汽车模拟。我在飞机上定位汽车时遇到问题。
我正在做的是这个……

```
D3DXMATRIX planeMat //matrix of the plane on which car is currently situated.
...

//calculating car rotation matrix (on XZ plane )
D3DXMATRIX carRot;
D3DXMatrixRotationY( &carRot , yaw );

//car up will same as plane
D3DXVECTOR3 carUp = D3DXVECTOR3( planeMat._12 , planeMat._22 , planeMat._32 );
//car lookat vector
D3DXVECTOR3 carLookat = D3DXVECTOR3( carRot._13 , carRot._23 , carRot._33 );
// calculating right vector
D3DXVec3Cross( &carRight , &carLookAt , &carUp );
D3DXVec3Normalize( &carRight , &carRight );
//calculating new lookat 
D3DXVec3Cross( &carLookAt , &carRight , &carUp );
D3DXVec3Normalize( &carLookAt , &carLookAt );

//car matrix
D3DXMATRIX carMat; D3DXMatrixIdentity( &carMat );
carMat._11 = carRight.x ;carMat._21 = carRight.y ;carMat._31 = carRight.z ;
carMat._12 = carUp.x ;carMat._22 =  carUp.y ;carMat._32 = carUp.z ;
carMat._13 = carLookAt.x ;carMat._23 = carLookAt.y ;carMat._33 = carLookAt.z ;
carMat._41 = carPos.x ;carMat._42 = carPos.y ;carMat._43 = carPos.z ; 
```

我无法让汽车的旋转正确。
请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T14:20:04.777

您在矩阵中设置和使用组件的方式看起来不正确。例如，在`carMat`3 个基向量中，分量的第 2 位是常数，但在最后一个（carPos）中，分量的第 1 位是常数。对于矩阵的所有 4 行/列，它要么是一种方式，要么是另一种方式。

我相信您设置汽车位置（最后一行/列）的方式是正确的，而您进行向上、正确和查看的方式是不正确的。因此，例如，它可能应该是这样的：

```
D3DXMATRIX carMat; D3DXMatrixIdentity( &carMat );
carMat._11 = carRight.x ;carMat._12 = carRight.y ;carMat._13 = carRight.z ;//11, 12, 13 instead of 11, 21, 31 
carMat._21 = carUp.x ;carMat._22 =  carUp.y ;carMat._23 = carUp.z ;
carMat._31 = carLookAt.x ;carMat._32 = carLookAt.y ;carMat._33 = carLookAt.z ;
carMat._41 = carPos.x ;carMat._42 = carPos.y ;carMat._43 = carPos.z ; 
```

此外，您填充向量`carUp`和形成&`carLookAt`的组件的方式也遇到了同样的问题。`planeMat``carRot`

# c# - 从 zip 文件中读取 Image 对象中的图像文件

> ID：13208827
> 
> 赞同：1
> 
> 时间：2012-11-03T11:43:25.390
> 
> 标签：c#, winforms, zip

我正在使用`iconic.dll`文件从压缩文件（.zip 文件扩展名）中读取数据

请检查我下面的代码

```
string zippath = txtFilePath.Text.Trim() + "\\" + foldername + ".zip";
ArrayList arrFiles = new ArrayList();
using (ZipFile zip = ZipFile.Read(enrollment))
{
     foreach (ZipEntry e1 in zip)
     {
       arrFiles.Add(e1.ToString());
     }
}

foreach (string path in arrFiles)
{
   Image img1 = Image.FromFile(path);  //geting error on this line
   imageList.Images.Add(getThumbnaiImage(imageList.ImageSize.Width, img1));
} 
```

如何从压缩文件夹中读取图像文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T11:58:06.093

试试这个 ：

```
 using (ZipFile zip = ZipFile.Read(enrollment))
{
    ZipEntry entry = zip["Image.bmp"];
    entry.Extract(outputStream);
} 
```

您还可以在图片框中显示您的图像：

```
PictureBox pb = new PictureBox();
        pb.Location = new Point(100, 100);
        pb.SizeMode = PictureBoxSizeMode.Zoom;
        var bmp = new Bitmap(outputStream);
        pb.Image = bmp;
        this.Controls.Add(pb); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T09:29:34.783

这似乎是解决方案：

```
 using (ZipFile zip = ZipFile.Read(enrollment))
        {

            foreach (ZipEntry e1 in zip)
            {

                    CrcCalculatorStream reader = e1.OpenReader();
                    MemoryStream memstream = new MemoryStream();
                    reader.CopyTo(memstream);
                    byte[] bytes = memstream.ToArray();
                    Image img1 = Image.FromStream(memstream);
                    imageList.Images.Add(getThumbnaiImage(imageList.ImageSize.Width, img1));

            }
        } 
```

# c - strtok() - 分段错误

> ID：13208828
> 
> 赞同：0
> 
> 时间：2012-11-03T11:43:28.443
> 
> 标签：c, segmentation-fault, strtok

> **可能重复：**
> [strtok 给出分段错误](https://stackoverflow.com/questions/2385697/strtok-giving-segmentation-fault)

我尝试使用 strtok 函数将字符串拆分为多个标记，但在此示例中，它返回了一个 seg。故障错误。我哪里错了？？

```
#include <stdio.h>
#include <string.h>

int main(int argc, char** argv){
    int i=0;
    char * string = "HI:HOW:ARE:YOU:?", *tmp;

    while(1){
        if(i==0) tmp=strtok(string,":");
        else tmp=strtok(NULL,":");
        if(tmp==NULL) break;
        printf("%s\n",tmp);
        i++;
    }
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:54:23.120

改变

```
char * string = "HI:HOW:ARE:YOU:?" 
```

为了

```
char string [] = "HI:HOW:ARE:YOU:?" 
```

使用 char string [] 你有一个数组，而 char * 你有一个指针。当你声明一个数组时，它会请求空间来分配你的字符串的大小。char * 字符串创建一个指向文字字符串的指针。

char *string 的问题在于不应更改该点，因为字符串文字通常存储在**只读内存中**，从而导致[未定义的行为 33](https://www.securecoding.cert.org/confluence/display/seccode/CC.+Undefined+Behavior#CCUndefinedBehavior-ub30)

（有关更多详细信息，请阅读此[https://www.securecoding.cert.org/confluence/display/seccode/STR30-C.+Do+not+attempt+to+modify+string+literals](https://www.securecoding.cert.org/confluence/display/seccode/STR30-C.+Do+not+attempt+to+modify+string+literals)）

因此，由于使用**strtok**字符串的内容被修改并分解为更小的字符串（令牌），所以您遇到了问题。

# git - 如何忽略带有 .gitignore 文件的文件？

> ID：13208833
> 
> 赞同：2
> 
> 时间：2012-11-03T11:43:59.313
> 
> 标签：git, gitignore

总是当我运行`git status`一些文件被列为未跟踪时，它应该是这样的。但我不希望每次运行时都将它们列在那里`git status`。据我了解，我应该将这些文件添加到`.gitignore`-file 中。

在我的项目中，我有一个要导入的文件`.classpath`和目录。`.gradle/*`

我的`.gitignore`文件如下所示：

```
.classpath
.gradle/* 
```

但是当我运行这些文件时，它们仍然被列为“未跟踪” `git status`。我的文件有什么问题`.gitignore`或者我应该如何解决这个问题？

* * *

这是我的`git status`输出：

```
C:\myproject>git status
# On branch master
# Changes not staged for commit:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#       modified:   src/Test.java
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       .classpath
#       .gitignore
#       .gradle/
no changes added to commit (use "git add" and/or "git commit -a") 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T12:18:42.743

我发现我的`.gitignore`文件中的路径在每一行的末尾都有一个空格。当我从每一行中删除空格字符时，`.gitignore`它工作正常。这就是我创建`.gitignore`文件的方式：

[https://superuser.com/a/498909/27037](https://superuser.com/a/498909/27037)

```
echo .classpath> .gitignore
echo .gradle/*>> .gitignore 
```

在我使用这个命令之前（不起作用）：

```
echo .classpath > .gitignore
echo .gradle/* >> .gitignore 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:10:48.763

这对我有用：

```
.classpath
.gradle/ 
```

确保`git add .`暂存 .gitignore 文件。

# mysql - 在 Nhibernate 中订购一个像数字一样的字符串

> ID：13208835
> 
> 赞同：4
> 
> 时间：2012-11-03T11:44:06.160
> 
> 标签：mysql, nhibernate, fluent-nhibernate

我有一个字段是字符串而不是 int，仅仅是因为可能存在这样的情况：

```
1, 2, 3, 3A, 5, 6 ... 
```

现在，在某种程度上，orderby 工作正常，但不像预期的那样：

```
1
10
11
111
12
2
20
3 
```

有人有这样做的想法吗？我的数据库是`MySQL`. 我在其他问题上注意到了这个解决方案..

```
ORDER BY category_id + 0 
```

如何在 Fluent Nhibernate 中实现它？

**编辑**

为了澄清，所需的顺序应该是：

```
1
2
3
3A
10
11
12
20
111
... 
```

**编辑 2**

另请注意，它可能不仅是 3A，它还可能有更多输入，例如：3B、3C。

那么订单将是：

```
1
2
3
3A
3B
3C
10
11
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:14:37.527

您可以将此列映射两次。一次完全用于所有操作。一次仅用于“选择”和订购。在**XML**映射中，它看起来像这样：（列名是 [ **AsNumber** ]）

```
<property name="AsString" column="AsNumber"  />
<property name="AsNumber"  insert="false" update="false" 
 formula="(CAST ( CASE WHEN ISNUMERIC([AsNumber]) &lt;&gt; 0 THEN [AsNumber] ELSE '99999999' END  as int))"
/> 
```

我使用的语法来自 MS SQL Server。它试图解决上面的“ **3A** ”之类的情况。它将被简单地转换为一些大值......

请注意，“AsNumber”的插入和更新设置为 false。和 C# 类片段：

```
public virtual string AsString { get; set; }
public virtual int AsNumber { get; set; } 
```

我已经对其进行了测试，并且可以正常工作。我相信在流利中使用类似不会花你很长时间......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:09:20.053

您可以创建一个公式字段，例如

```
Map(x => x.MyColumnAsNumber).Formula("CAST(MyColumn AS int)"); 
```

然后按该字段排序。

# android - 如何将位图的背景颜色更改为透明且背景不应该拖动？

> ID：13208845
> 
> 赞同：6
> 
> 时间：2012-11-03T11:45:21.707
> 
> 标签：android, image-processing, bitmap, bitmask

我用了：

```
Bitmap bitmap= Bitmap.createBitmap(255, 255, Bitmap.Config.RGB_565); 
Canvas canvas = new Canvas(bitmap); 
```

背景颜色为黑色......

如果我使用：

```
Bitmap.Config.ARGB_8888; 
```

背景颜色是白色...

我的问题是如何将位图的背景颜色更改为透明并且背景不应该拖动？只有中心图像必须拖动...

请任何人都可以说出这个解决方案或示例....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:29:31.097

尝试添加

> 位图位图= Bitmap.createBitmap(255, 255, Bitmap.Config.ARGB_8888);

之后试试这条线（A是alpha值区间是0-255，0是完全透明的）。

> bitmap.eraseColor(Color.argb(AAA,RRR,GGG,BBB));

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-19T10:14:25.237

试试这个

```
 bitmap.eraseColor(getResources().getColor(R.color.thumb)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T12:13:18.610

您需要检查图像的每个像素并更改其颜色。

您将在此链接中得到答案[参考此](https://stackoverflow.com/questions/3889667/making-specific-color-in-bitmap-transparent)

# c++ - QuarkXPress XDK

> ID：13208846
> 
> 赞同：2
> 
> 时间：2012-11-03T11:45:24.473
> 
> 标签：c++

最近，我获得了 QuarkXPress XDK（QuarkXPress SDK）来为我们的新闻编辑软件（基于 VB 6）开发 Xtension，它基本上将故事内容从数据库传输到 QuarkXPress 文档（例如分类广告）。这个新闻编辑软件可以在 PageMaker 6.0 上播放故事，但我们的客户希望它是 QuarkXPress 而不是 Pagemaker。

是否有教程（XDK 文档除外）？

如何进行，因为 XDK 是基于 C++ 的，开发 XTension 需要很长时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T09:09:48.120

Quark 仅向注册开发人员提供 XDK，他们可以访问开发人员桌面电子邮件地址。向您提供 XDK 的人应该能够授予您访问权限。Quark 也偶尔会为新开发者举办开发者训练营。除此之外，我能给出的最佳建议是从 Sample XTensions 之一开始，并以此为基础构建您的 XT。

您需要知道由 Quark 分配的基本开发人员 ID。向您提供 XDK 的人也应该知道您应该使用的基本开发人员 ID，以及基本 ID 中的哪些 XT ID 已被使用。您的 XT 将需要它自己的唯一 XT ID，该 ID 由基本开发者 ID 生成。

# php - 输入表单的附加输入集 - 隐藏额外字段，直到选择第一个字段

> ID：13208850
> 
> 赞同：0
> 
> 时间：2012-11-03T11:46:44.903
> 
> 标签：php, forms, function, multiple-conditions

我有一个关于附加一组输入字段的问题，其中一些字段默认禁用，直到第一个字段得到回答。这是我附加字段的代码。

```
 var count = 0;
    $(function(){
    $('a#add_field').click(function(){
    count += 1;
    $('#row-fluid').append(

    '<div class="span1">'
    +'<label>Type</label>'
    +'<select id="upg' + count + '" name="upg' + count + '"  class="input-small" >'
    +'<option value="" selected="&nbsp;" >&nbsp;</option>'
    +'<option value="Exp" >Exp</option>'
    +'<option value="Post" >Post</option>'
    +'<option value="Upgrade" >Upg</option>'
    +'<option value="Retail" >Retail</option>'
    +'</select>'
    +'</div>'

    +'<div id="upgDate" class="span2">'
    +'<label>Full Date</label>'
    +'<input name="upg_date' + count + '" id="upg_date' + count + '" type="text" id="upg_date" placeholder="YYYY-MM-DD" class="input-small" />'
    +'</div>'

    );
    });
    }); 
```

基本上，输入“完整日期”默认情况下应隐藏，并且仅在所选“类型”为 EXP 且此条件应存在于所有附加输入集时才会出现。谢谢你，我希望有人可以指导我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:25:17.770

试试这个：

```
$("#upg").change(function(){
    if ($("#upg").val() == "EXP") {
       $('#upg_date').show();
    } else {
       $('#upg_date').hide();
    }
}); 
```

# .htaccess - Mod_rewrite 与 $1 变量后面的常量参数

> ID：13208852
> 
> 赞同：1
> 
> 时间：2012-11-03T11:47:14.430
> 
> 标签：.htaccess, mod-rewrite

我正在尝试使用以下代码通过 mod_rewrite 将 URL example.com/username/progress 更改为 example.com/username/?id=progress：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*)/progress /$1/?id=progress [QSA] 
```

任何想法为什么它会返回 500 错误？

# php - Cake php Datasource 类 MySQL 找不到

> ID：13208855
> 
> 赞同：4
> 
> 时间：2012-11-03T11:48:08.483
> 
> 标签：php, mysql, cakephp, pdo, datasource

我在服务器上有 ubuntu 10.04。我正在尝试设置 cake php 项目，但它给了我以下错误

```
 Cake is NOT able to connect to the database.

   Datasource class MySQL could not be found. 
```

我在网上搜索了很多关于它的信息。我的配置文件看起来像这样

```
 class DATABASE_CONFIG {

public $default = array(
    'datasource' => 'Database/MySQL',
    'persistent' => false,
    'host' => 'localhost',
    'login' => 'root',
    'password' => 'mypassword',
    'database' => 'dbname',
    'prefix' => '',
    //'encoding' => 'utf8',
);
 } 
```

我检查了服务器是否已将所有东西设置为作为 PDO 连接我已经运行以下脚本并且它工作正常。

```
 $conn = new PDO('mysql:host=localhost;dbname=dbname', $username, $password); 
```

然后我进一步更改了“lib\Cake\Model\Datasource\Database”中的蛋糕 php 的 Mysql.php 文件

我试图在 Mysql.php 中提供静态连接，但这也不起作用。我确实退出了 Mysql.php 并且似乎页面控制没有到达这里。

```
 $this->_connection = new PDO('mysql:host=localhost;dbname=dbname', $username, $password);
$this->connected = true; 
```

如果我遗漏了什么，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T11:56:58.827

外壳很重要，它应该是：

```
'datasource' => 'Database/Mysql' 
```

并不是：

```
'datasource' => 'Database/MySQL' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T06:23:07.997

Mysql 不是受支持的源尝试 'datasource' => 'Database/Sqlite',

# javascript - jQuery | 获取应用于元素的插件列表

> ID：13208863
> 
> 赞同：0
> 
> 时间：2012-11-03T11:48:41.347
> 
> 标签：javascript, jquery, jquery-plugins

> **可能重复：**
> [如果检查 jQuery 插件是否已经绑定到 DOM 节点，你怎么知道？](https://stackoverflow.com/questions/13143745/how-can-you-if-check-a-jquery-plugin-is-already-bound-to-a-dom-node)

我不确定这是否存在，但有没有办法获取应用于元素的插件列表？

例如。如果我们有以下代码：

```
$('div').setHeightPlugin().setWidthPlugin().changeColorPlugin(); 
```

以后有没有办法获取应用于 div 元素和/或将其从 div 中删除的插件列表？

就像是

```
var plgs = $('div').getPlugins();
delete plgs['changeColorPlugin']; 
```

最新的片段，只是基本的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:52:50.687

这是不可能的，因为没有通用的东西将插件附加到元素上。例如，一些插件将内部功能对象的实例存储在元素的数据或属性中，例如*选择*将自身的实例存储在`element.data('chosen')`. 一些插件不存储任何东西，而只是将事件绑定到元素。其中一些向插件添加了额外的类或属性（如一些 jquery ui 小部件）。即，插件与元素关联没有单一的通用方式。因此，不存在实现您正在寻找的通用方法。

# github - 如何从 Eclipse 推送 Github 中的新项目？

> ID：13208868
> 
> 赞同：12
> 
> 时间：2012-11-03T11:49:31.827
> 
> 标签：github, egit

我正在尝试将我的新项目推送到最近创建的 Github 存储库中。但是有 SSH 身份验证问题。我不知道密钥管理，使用哪个密钥以及如何使用。在我的 github 网络仪表板中，我有 2 个键。一个是我的登录帐户，一个是 Github for Windows。

如何使用正确的密钥进行提交。因为这个密钥不是我的 Github 仪表板中提到的。我在 Eclipse 中创建了新的 RSA 密钥。用密码保存它。并将此密钥添加到我的 Github 帐户中。但它仍然显示我遵循关键指纹。

有什么帮助吗？

我的仓库：[https ://github.com/tahirakram/Likhari](https://github.com/tahirakram/Likhari)

网址信息

![位置网址](../Images/407491fe53081fc094ed1717aa29fc69.png)

收到有关 SSH 密钥的此错误

![收到有关 SSH 密钥的此错误](../Images/d769cd8a651a399007145a3c3b234522.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-03T12:09:19.457

```
ssh://git@github.com:22: org.eclipse.jgit.transport.CredentialItem$YesNoType:  
The authenticity of host 'github.com' can't be established.  
RSA key fingerprint is 16:27:ac:a5:xx:xx:xx:xx:xx:xx:a6:48\.  
Are you sure you want to continue connecting? 
```

[这个页面](http://lechmigdal.blogspot.fr/2012/08/eclipse-egit-authenticity-of-host-cant.html)（来自[Lech Migdal 的博客](http://lechmigdal.blogspot.fr/2012/08/eclipse-egit-authenticity-of-host-cant.html)）推荐：

> 理论上这没什么不好，你按下“是”按钮就完成了。
> 
> **但令我惊讶的是，没有“是”按钮**:-) 只有“确定”和“详细信息”，它们都没有导致代码被推送到 sf.net。重新启动（如某些网站上所建议的那样）没有帮助。
> 
> 1.  在 Eclipse 中切换到“ `Git Repositories`”透视图
> 2.  展开你的项目，添加`new Remote repository`（我称之为“sourceforge”）
> 3.  粘贴 sourceforge 在您的项目网站上提供的 URI 和正确的密码（是的，这次可以使用）
> 4.  现在 Eclipse 会询问您是否信任 RSA 密钥指纹并将其添加到`known_hosts`文件中
> 5.  “ `Dry-Run`”（应该工作），“ `Save`”

[此页面](http://code.google.com/p/egit/issues/detail?id=104)还要求您检查 SSH 设置。

[Egit用户指南的“](http://wiki.eclipse.org/EGit/User_Guide)[添加远程配置](http://wiki.eclipse.org/EGit/User_Guide#Adding_a_Remote_Configuration)”部分更好地说明了第2点：

> 这是使用“ `Remotes`”节点上的上下文菜单操作完成的。
> 将启动一个向导，询问新配置的名称以及是否配置`Fetch`、`Push`或两者：

![新遥控器](../Images/7a77acc890e5e6de2ac48382a4c95b6b.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:11:27.373

当您第一次使用 SSH 连接时，您将收到每个新主机的错误消息。潜在的恶意人员可能已经设置了一个服务器，该服务器现在回答了您的请求，但不是真正的 github.com 服务器。这就是您应该验证指纹的原因，这就是整个错误消息想要告诉您的内容。

如果您接受该对话框，之后它将正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-31T17:03:20.907

```
ssh-keyscan github.com >> ~/.ssh/known_hosts 
```

# javascript - 在 d3.js 中调整饼图大小的转换

> ID：13208875
> 
> 赞同：2
> 
> 时间：2012-11-03T11:50:31.353
> 
> 标签：javascript, svg, d3.js, transition, pie-chart

我正在寻找一个关于如何为饼图调整大小（弧的路径）进行转换的示例。我一直在看[这个例子](http://bl.ocks.org/1346410)，但我仍然不知道如何修改它以在调整大小时进行过渡。到目前为止，我可以通过更改圆弧对象的外半径（和内半径）来调整饼图的大小，但过渡没有运气。[这是](http://jsfiddle.net/emepyc/VYud2/8/)我正在处理的示例。

```
arc.innerRadius(newInnerRad)
   .outerRadius(newOuterRad);

path.transition().duration(500).attrTween("d", arcTween);

function arcTween(a) {
  var i = d3.interpolate(this._current, a);
  this._current = i(0);
  return function(t) {
    return arc(i(t));
  };
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-03T12:58:12.530

如果您创建`arcTween`内联并为半径添加插值器，它会起作用 - 请参阅[更新的小提琴](http://jsfiddle.net/VYud2/11/)。

# c# - 使用 Kinect 选择框架元素（如椭圆或矩形）

> ID：13208877
> 
> 赞同：0
> 
> 时间：2012-11-03T11:50:34.787
> 
> 标签：c#, wpf, kinect, picking, nui

我（从字面上看）想使用 Kinect 的 NUI 捕获框架元素。假设我的网格（或画布）上有一个椭圆，我应该能够使用我的程序选择一个椭圆。

为了做到这一点，我认为我必须确定元素的确切位置，就像`Transform.Position`在 Unity 中一样，但我在 WPF 中找不到这样的东西。

这是我的 XAML 代码，

```
<Grid VerticalAlignment="Stretch" HorizontalAlignment="Stretch">
    <my:KinectSensorChooser HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Name="kinectSensorChooser1" />
    <my:KinectColorViewer Stretch="Fill" HorizontalAlignment="Stretch" VerticalAlignment="Stretch"  Name="kinectColorViewer1" Kinect="{Binding Path=Kinect, ElementName=kinectSensorChooser1}" />
    <Ellipse Height="114"  Name="ellipse1" Stroke="Black" Fill="Black" VerticalAlignment="Top" Width="120" />
</Grid> 
```

所以我的问题是关于在网格上找到那个元素。拥有 Cursor 或代表用户手的任何元素都不是问题。但在那之后，我将不得不检测我的光标和这些元素之间的碰撞以及困扰我的部分。像 ElementHover 或 ElementPicked 这样的事件也会有所帮助，但我想我必须自己编写类似的东西。

顺便说一句，这是一个“工程教育软件”项目，旨在为工程练习开发虚拟环境，如昂贵或危险的实验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T15:46:25.787

SDK v1.6 Toolkit 中提供了来自 Microsoft 的几个示例，这些示例说明了如何确定屏幕上对象的位置并使用代表玩家手的自定义光标与它们进行交互。

我建议查看提供的几个示例，以便清楚地了解交互如何工作。该工具包与 Office Kinect for Windows SDK 位于同一位置。

[http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx](http://www.microsoft.com/en-us/kinectforwindows/develop/developer-downloads.aspx)

**形状游戏**

此示例生成从窗口顶部落下的随机形状（其中一些是椭圆）。这些形状与 Kinect 生成的骨架相互作用。您将看到如何获取窗口中元素的位置以及与骨架的关系。

**基本交互**

这个例子做了几件有用的事情。它展示了如何根据手的位置生成自定义光标。它还创建了一个`ContentControl`可以连接到 Kinect 事件（例如手进入、悬停和退出事件）的事件。它是以这种方式构建的，因为它`ContentControl`可以放入任何东西——无论是单个椭圆，还是复杂的布局。

# javascript - 在 IOS-6 Safari 中无法访问 localStorage

> ID：13208878
> 
> 赞同：6
> 
> 时间：2012-11-03T11:50:43.070
> 
> 标签：javascript, safari, local-storage

我无法在 Safari 中访问 localStorage（带有 IOS-6 的 iPad）。

例如，以下代码在所有浏览器和（带有 iOS-5 的 iPad）上的 Windows 中都可以正常工作，但在 iOS-6 中则不能：

```
localStorage.setItem("var","5");
alert(localStorage.getItem("var")); 
```

请帮忙。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T12:11:27.943

我可以通过关闭 iPad 上的隐私浏览来解决这个问题。我从参考中找到了解决方案：[https ://github.com/cloudhead/less.js/issues/312#issuecomment-2994845](https://github.com/cloudhead/less.js/issues/312#issuecomment-2994845)

# java - 如何在 2 个服务器之间划分连续请求，其中 x% 的请求被发送到一个服务器和 100-x 到另一个服务器

> ID：13208880
> 
> 赞同：1
> 
> 时间：2012-11-03T11:50:43.773
> 
> 标签：java, probability

我有一个请求队列（请求不断出现）。我必须一个一个地处理这些请求并将这些请求发送到两台服务器，以便 x% 的请求发送到第一台服务器，而 100-x % 的请求发送到第二台服务器。我需要实现 java 函数，它告诉应该将特定请求发送到哪个服务器。

我尝试生成一个介于 1-100 之间的随机数，并将 1 到 x 之间的请求发送到服务器 1，将其他请求发送到服务器 2。但这不能正常工作。有没有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:58:20.133

您正在寻找的是[加权循环](http://en.wikipedia.org/wiki/Weighted_round_robin)或动态循环，它们都已发布众所周知的实现。

# php - 比较两个数组后添加到整数变量

> ID：13208881
> 
> 赞同：0
> 
> 时间：2012-11-03T11:50:44.630
> 
> 标签：php, arrays, loops, listbox

我对php相当陌生。每次循环遍历此数组时，我都会尝试更新分数。我的代码仅在用户选择列表框的第一个值时才有效，如果未选择，它会给出零。请帮忙。这是 A.php

```
{
    $SkillsArray = array();
    $Score=0;
    $SkillsArray = $_POST['DutiesDesc'];
    //foreach($SkillsArray as $key =>$value )
    {
        $Sentence = $SkillsArray[0]." ".$SkillsArray[1]." ".$SkillsArray[2]." ".$SkillsArray[3]." ".$SkillsArray[4]." ".$SkillsArray[5]." ".$SkillsArray[6]." ".$SkillsArray[7                              ]." ".$SkillsArray[8]." ".$SkillsArray[9]." ".$SkillsArray[10];
    }

        //Get the applicants score
        for($i=0;$i<11;$i++)
            {
                if ($SkillsArray[$i] == $Text[$i])
                    {
                        $Score = $Score+$Val[$i];
                    }
            }

} //**** The following is the HTML part of the code(form)
<form action = "A.php" method ="POST" enctype="multipart/form-data">
<label for="Position">Position:</label><input type="type" name="Position" size="35" /><br />
                      </p>
                      <p>
                        <!-- <label for="DutiesDesc">Duties Description:&nbsp;</label><textarea name="DutiesDesc" cols="30" rows="5" /></textarea>--> <br />
                        Job Description
                        <select name="DutiesDesc[]" size=5 multiple="multiple">

                            <option value="<?php echo $Arow['TextF1']?>"><?php echo $Arow['TextF1']?></option>
                            <option value="<?php echo $Arow['TextF2']?>"><?php echo $Arow['TextF2']?></option>
                            <option value="<?php echo $Arow['TextF3']?>"><?php echo $Arow['TextF3']?></option>
                            <option value="<?php echo $Arow['TextF4']?>"><?php echo $Arow['TextF4']?></option>
                            <option value="<?php echo $Arow['TextF5']?>"><?php echo $Arow['TextF5']?></option>
                            <option value="<?php echo $Arow['TextF6']?>"><?php echo $Arow['TextF6']?></option>
                            <option value="<?php echo $Arow['TextF7']?>"><?php echo $Arow['TextF7']?></option>
                            <option value="<?php echo $Arow['TextF8']?>"><?php echo $Arow['TextF8']?></option>
                            <option value="<?php echo $Arow['TextF9']?>"><?php echo $Arow['TextF9']?></option>
                            <option value="<?php echo $Arow['TextF10']?>"><?php echo $Arow['TextF10']?></option>
                            <option value="<?php echo $Arow['TextF11']?>"><?php echo $Arow['TextF11']?></option>

                        </select><br /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T15:00:03.853

数组中的值`$SkillsArray`与您的数组的索引不同`$Text`。如果您选择列表中的第 3 个（假设值为“c”）和第 5 个（例如“e”）项，则数组`$SkillsArray`将包含以下内容：

```
$SkillsArray[0] = "c";
$SkillsArray[1] = "e"; 
```

因此，您需要对您的 进行简单搜索`$SkillsArray`，因为您不能依赖与您的`$Text`数组一致的索引。

```
if (is_array($SkillsArray)) {
  for($i = 0; $i < count($Text); $i++) {
    if (array_search($Text[$i], $SkillsArray) !== false) {
      $Score += $Val[$i];
    }
  }
} 
```

请记得检查，如果`$SkillsArray`确实是一个数组。如果用户没有检查任何技能，该函数`array_search`将返回`false`每个项目，这将导致最高分。

函数文档：[count](http://www.php.net/manual/en/function.count.php)、[array_search](http://www.php.net/manual/en/function.array-search.php)、[is_array](http://www.php.net/manual/en/function.is-array.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T19:52:52.170

```
for($i=0;$i<11;$i++)
            {
                for($j=0;$j<11;$j++) 
                    {
                        if (($SkillsArray[$i] == $Text[$j]))
                            {
                                $Score = $Score+$Val[$j];

                            }
                    } 
```

这需要第二个循环才能正常工作:)

# c++ - Array [] 运算符返回一个引用，那么如何更改它的值呢？

> ID：13208887
> 
> 赞同：0
> 
> 时间：2012-11-03T11:51:41.803
> 
> 标签：c++, arrays

正如我在这里读到的：http://www.cplusplus.com/reference/stl/array/operator[]/

看来，saying`a[2]`会返回 . 的第二个元素的内存地址（引用）`a`。

那么怎么样

```
a[2]=5 
```

一个有效的分配，因为这意味着我将内存地址更改`a[2]`为位置 5（这可能是可能的，但通常您想要更改值，而不是地址）。除非`=`操作员知道如何处理这种情况。

我知道它*不会*改变内存地址，那么这里到底发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T11:53:40.203

引用不是内存地址。将其视为同一对象的不同名称：

```
int i = 42;
int& j = i; // j is another name for i

j = 55;

std::cout << i << "\n"; // i now has value 55 
```

所以`a[2]`可以看作是存储在数组中某个位置的任何对象的不同名称。因此，assignemnt 就像上面的例子一样工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T11:54:25.417

引用和指针之间的区别在于引用是自动取消引用的。因此，您不需要诸如`*(a[2]) = 5`.

以下代码显示了这一点：

```
int baseVar = 42;            // This
int &sameVar = baseVar;      //   and this are the same memory
                             //   with two different names.
int *pBaseVar = &baseVar;    // This is separate memory that happens
                             //   to point to the baseVar memory. 
```

改变其中一个`sameVar`或`*pBaseVar`将改变`baseVar`自己。改变`pBasevar`本身*不会*影响`basevar`，它只会导致前者指向不同的位置。

在幕后（当然，这取决于实现，`basevar`可能（由编译器/代码）认为是`int`在特定地址（比方说`0x12345678`），`sameVar`也被认为是。

`pBaseVar`被认为是（例如）的指针，`0x11112222`它恰好包含*值* `0x12345678`：

```
 +------------+
pBaseVar (0x11112222) | 0x12345678 |--+
                      +------------+  |
   +----------------------------------+
   |
   V                  +----+
baseVar (0x12345678)  | 42 |
sameVar (same)        |    |
                      +----+ 
```

# android - 离线时适用于 Android 的 Mixpanel Analytics 是否工作？

> ID：13208891
> 
> 赞同：4
> 
> 时间：2012-11-03T11:52:26.767
> 
> 标签：android, mixpanel

我知道 Flurry 跟踪来自 android 会话的离线数据，但我想尝试 mixpanel。有人用 mixpanel 做离线应用吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T20:06:56.973

我在 Mixpanel 的 Android 库上工作，我可以告诉你，当没有可用的 Internet 连接时，我们会安全地将你的 Mixpanel 数据排队。它将在下次 Internet 连接可用时发送出去。

# vb.net - 为什么我的 VB.NET htmlelementcollection 代码在线程中使用时会抛出转换错误？

> ID：13208893
> 
> 赞同：0
> 
> 时间：2012-11-03T11:52:31.963
> 
> 标签：vb.net, multithreading

我在 VB.NET 中编写了一些代码，这些代码根据其“alt”属性“抓取”图像的 src/URL。它在某些站点上完美运行，但在其他站点上需要线程 - 等待图像加载，因为在 DocumentCompleted 发生时图像尚未加载。

我的问题是当我的代码与线程一起使用时，我得到一个`invalidcastexception`错误。

这是我的代码，以及发生错误的位置：

```
Private Sub WB1_DocumentCompleted(sender As Object, e As WebBrowserDocumentCompletedEventArgs) Handles WB1.DocumentCompleted
    urlBox.Text = e.Url.ToString()

    If urlBox.Text = "URL_GOES_HERE"
        Dim success As Integer = site.fill() 'calls another function, returns 1 on success
        If success = 1 Then
            Dim captchaThread As New Thread(New ThreadStart(AddressOf getCaptchaURL))
            captchaThread.Start()
        End If
    End If
End Sub

Public Function getCaptchaURL()
    Thread.Sleep(5000) 'Tell thread to sleep so images can load
    Dim URL As String
    Dim images As HtmlElementCollection = WB1.Document.GetElementsByTagName("img") 'This is where I get the 'invalidcastexception' error
    For Each element As HtmlElement In images
        Dim source As String = element.GetAttribute("alt").ToString
        If source = "CAPTCHA Image" Then
            URL = element.GetAttribute("src")
            MessageBox.Show(URL) 'Show URL to check the source has been grabbed
        End If
    Next
    Return URL 'Return URL for further functions
End Function 
```

因此，为了澄清，这段代码：`Dim images As HtmlElementCollection = WB1.Document.GetElementsByTagName("img")`与线程一起使用时给我一个错误，但在线程中不使用时不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T11:57:45.483

线

```
For Each element As HtmlElement In images 
```

需要重写以避免遇到转换类型的问题。

尝试以下操作：

```
For Each element In images
   If TypeOf(element) Is HtmlElement Then

         'the rest of your code goes here

   End If
Next 
```

# magento - 将 magento 购物车添加到现有网站

> ID：13208894
> 
> 赞同：0
> 
> 时间：2012-11-03T11:52:39.060
> 
> 标签：magento, e-commerce, shopping-cart

如果有人知道是否可以将 magento 添加到现有网站，我非常渴望，我希望我的网站看起来一样。该网站可能会使用客户通过单击添加按钮/链接来购买域以添加到购物车，但是截至目前，还没有购物车功能。这可能吗？如果是，是否有任何代码或文档可以按照步骤进行集成。感谢您提供任何帮助，在此先感谢。

# c++ - 无法输出复制的字符串

> ID：13208900
> 
> 赞同：0
> 
> 时间：2012-11-03T11:53:45.627
> 
> 标签：c++, string

这已经给我带来了一段时间的麻烦，而且我对代码所做的任何调整似乎都没有产生任何影响。我试图在从文件中读取的一行文本中定位数字，并将所述数字存储到另一个字符串中以供以后使用。最初的复制似乎是成功的，但是当尝试输出存储数字的字符串时，唯一的输出是一个空行。

这是代码和包含的头文件：

```
#include<iostream>
#include<string>
#include<fstream>
#include<cctype>

using namespace std;

int main()
{
    ifstream inFile;
    string temp;
    short count = 0;
    char fileName[20];  
    string info1;

    cout << "Enter the name of the file to be used: " << endl;
    cin >> fileName;

    inFile.open(fileName);

    if(!inFile)
    {
        cout << "Error opening file." << endl;      
    }
    else
    {           
        getline(inFile, info1);
        cout << info1 << endl;

        for(short i = 0; i < info1.length(); i++)
        {
            if(isdigit(info1[i]))
            {   
                temp[count] = info1[i];
                cout << temp[count] << endl;
                count++;
            }
        }
        cout << temp << endl;
    }   
    inFile.close();
    return 0;
} 
```

输出如下：

```
Enter the name of the file to be used:
input.txt
POPULATION SIZE: 30
3
0 
```

显然，它没有按预期输出*温度。*任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:06:27.610

问题是这`temp`不是简单的字符数组。这是`std::string`类。最初`temp`是空的。这意味着我们不知道为字符串分配了多少内存。`std::string::operator[]`它甚至可以是 0。那么当您使用as 应用于空字符串时，应该返回什么符号的参考？

您应该改用`std::string::operator+=`or char 数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:05:44.257

实际上，它*确实*输出了这个`temp`值——只有这个值是一个空字符串。考虑一下：

```
 string str = "A";
  for (int i=0; i < 2; i++)
  {
    str[i] = 'B';  
    cout << str[i] << endl;
  }
  cout << "And the final result is..." << str; 
```

这将输出两个`B`s （通过内部循环的 s `cout`），但最终结果的字符串将只有一个 s `B`。这样做的原因是它`operator[]`不会“扩展”字符串 - 它可以用作设置器来替换该字符串的字符，但仅适用于已经在字符串中的索引：它不会为该字符串分配额外的内存以防万一索引溢出。

因此，要构建您的字符串，您可以使用另一个运算符 - `+=`（连接分配）：

```
 string str;
  for (int i=0; i < 2; i++)
  {
    str += 'B';  
    cout << str[i] << endl;
  }
  cout << "And the final result is..." << str; 
```

`BB`这将作为最终结果打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T11:59:54.830

使用这个，
`temp+=info1[i];`
而不是
`temp[count] = info1[i];`

# c++ - 如何防止使用 ptrace 执行系统调用

> ID：13208910
> 
> 赞同：7
> 
> 时间：2012-11-03T11:55:19.207
> 
> 标签：c++, c, ptrace

我正在开发一个类似 Ideone 的系统，其中不受信任的用户代码必须在沙盒模式下运行。

为此，我一直在寻找`ptrace`第一层保护的可能性。然而，经过几次实验后，似乎：

*   我可以在调用之前拦截系统调用并修改输入参数。
*   我可以在调用系统调用后拦截它并更改返回值。
*   但是，似乎根本没有办法阻止调用发生（除了杀死整个应用程序）。

我想拦截某些系统调用并返回一个虚假的结果代码，而不会实际发生调用。有没有办法实现这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-11T20:28:29.950

Please keep in mind that your sandbox can only be secure if the code it runs is not multi-threaded. You'll also have to take great care to prevent the sand-boxed code from forking as well.

See, for example, the following discussion of a paper about the issues by Robert Watson:

[Exploiting races in system call wrappers](http://lwn.net/Articles/245630/)

The paper is linked to in that article, but I'll offer the link here directly as well:

["Exploiting Concurrency Vulnerabilities in System Call Wrappers"](http://www.watson.org/~robert/2007woot/2007usenixwoot-exploitingconcurrency.pdf)

The better approach still seems to be as is recommended by Watson: integrate the security framework entirely into the kernel and take care in its use to avoid concurrency issues. Linux and NetBSD and Mac OS X and other security-oriented systems already provide such frameworks and so all that's necessary if using those systems is to implement your policies within those existing frameworks. I.e. don't even try to implement your security policies in system call wrappers or other system call interposition mechanisms.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:00:53.003

您可以通过增加IP（指令指针）来跳转执行系统调用的指令，这样调用将不会被执行，您可以像往常一样设置返回值。

**编辑：**

[有一个名为pinktrace](http://dev.exherbo.org/~alip/pinktrace/)的 ptrace 包装器，它可以让您的工作更轻松，这里还有更多信息：

[https://security.stackexchange.com/questions/8484/wrapping-system-call-in-reliable-and-secure-way](https://security.stackexchange.com/questions/8484/wrapping-system-call-in-reliable-and-secure-way)

# excel - 在 VBA 中执行代码，找到一个特定的单元格，我想在单元格的顶部插入一个空白行......在这里我附加相同的数据

> ID：13208918
> 
> 赞同：-2
> 
> 时间：2012-11-03T11:56:30.523
> 
> 标签：excel, cell, vba

我有一个包含大量数据的文件，在“C”列中我有下面提到的数据：

```
1   Sales Order
2   minute
3   Two
4   second
5   Three
6   Sales Order
7   minute
8   Two
9   second
10  Three
11  Sales Order
12  minute
13  Two
14  second
15  Three
16  Sales Order
17  minute
18  Two
19  second
20  Three 
```

现在我想使用 VBA 代码在销售订单列的顶部插入一个空白行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T00:08:21.740

mattboy 是正确的，您必须将代码放在您的问题中；不可能在评论中阅读。

注释中的代码包括：

```
Do While ActiveCell.Row = "Sales order 
```

如果你省略它，编辑器会添加一个尾随双引号，所以我不明白这怎么可能是你的代码。

即使我更正了您的代码，我也不明白它在做什么。

您的问题是：“我想在销售订单列的顶部插入一个空白行”。您还说数据在 C 列中，所以我假设您想要 C1 下的空白单元格，并将该列的其余部分向下推。尝试：

```
With Worksheets("Sheet1")
  .Range("C2").Insert Shift:=xlShiftDown
End With 
```

# jquery - Amazon S3 CORS POST 因 JQuery-file-upload 失败

> ID：13208924
> 
> 赞同：0
> 
> 时间：2012-11-03T11:57:13.523
> 
> 标签：jquery, ruby-on-rails, amazon-s3, cors

我正在尝试通过 HTML 上传器将文件上传到 S3，我尝试按照本教程进行操作：

[http://pjambet.github.com/blog/direct-upload-to-s3/](http://pjambet.github.com/blog/direct-upload-to-s3/)

我可以通过常规的 html 表单发布文件。但是，如果我使用 JQuery-file-upload 插件发布相同的表单，我会从 Amazon 获得 403。

这是我的表格：

```
<form accept-charset="UTF-8" action="https://youboox_dev.s3.amazonaws.com" enctype="multipart/form-data" class='direct-upload' method="POST">
 <input type="hidden" name="key" value="test-file-name">
 <input type="hidden" name="AWSAccessKeyId" value="AKIZ[...]YSCA">
 <input type="hidden" name="acl" value="private">
 <input type="hidden" name="success_action_status" value="201">
 <input type="hidden" name="policy" value="<%= Facades::AmazonFacade.policy %>">
 <input type="hidden" name="signature" value="<%= Facades::AmazonFacade.signature %>">

 <input type="file" name="file">

 <input type="submit" value="Load this file"> 
```

这是我的 jquery-uploader ：

```
$('.direct-upload').fileupload({
      url: $(this).attr('action'),
      type: 'POST',
      autoUpload: true,
      dataType: 'xml',
      add: function (event, data) {
        jqXHR = data.submit();
      } 
```

我从亚马逊得到这个答案：

> 选项[https://youboox_dev.s3.amazonaws.com/](https://youboox_dev.s3.amazonaws.com/) 200（好的）
> POST [https://youboox_dev.s3.amazonaws.com/](https://youboox_dev.s3.amazonaws.com/) 403（禁止）

==================================================== ======

我很确定我的政策和签名是正确的，因为当我通过提交按钮提交此表单时，我得到了亚马逊的正常回复，并且“我能够下载我刚刚上传的文件：

```
<PostResponse>
  <Location>https://youboox_dev.s3.amazonaws.com/tottotoCVBNBV</Location>
  <Bucket>youboox_dev</Bucket>
  <Key>test-file-name</Key>
  <ETag>"d41d8cd98f00b204e9800998ecf8427e"</ETag>
</PostResponse> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:19:55.753

我有类似的选择（我从未测试过直接形式的 POST）。为我解决的问题是添加存储桶策略：

```
{
"Version": "2008-10-17",
"Id": "Policy1347277692345",
"Statement": [
    {
        "Sid": "my-user",
        "Effect": "Allow",
        "Principal": {
            "AWS": "arn:aws:iam::123456789:user/my-user"
        },
        "Action": [
            "s3:AbortMultipartUpload",
            "s3:GetObjectAcl",
            "s3:GetObjectVersion",
            "s3:DeleteObject",
            "s3:DeleteObjectVersion",
            "s3:GetObject",
            "s3:PutObjectAcl",
            "s3:PutObjectVersionAcl",
            "s3:ListMultipartUploadParts",
            "s3:PutObject",
            "s3:GetObjectVersionAcl"
        ],
        "Resource": "arn:aws:s3:::my-bucket/*"
    },
    {
        "Sid": "world-readable",
        "Effect": "Allow",
        "Principal": {
            "AWS": "*"
        },
        "Action": "s3:GetObject",
        "Resource": "arn:aws:s3:::my-bucket/*"
    }
]
} 
```

（我承认只是从其他人设置的另一个存储桶中盲目地复制它，所以我不知道其中哪些部分是实际需要的。）

# javascript - 如何在javascript中获取更改后的滑块值

> ID：13208926
> 
> 赞同：1
> 
> 时间：2012-11-03T11:57:31.983
> 
> 标签：javascript, jquery, jquery-mobile, slider

[http://jsfiddle.net/63BhY/](http://jsfiddle.net/63BhY/)

我遇到了一个奇怪的问题。我有一个带有起始值的滑块。但是当我改变滑块的值时（通过滑动它）。我在 javascript 中的滑块值未更新。怎么可能让这个工作。

var 'aantal' 必须是滑块的值。

```
//<![CDATA[ 

$(function(){
/// first off wrap all our code in our own scope, this means we keep our vars
/// to ourselves and don't mess up anyone elses code - doesn't usually matter
/// with your own app, but good practice is good practice.

    (function(){
        /// Hiermee kun je de lengte van je oefening bepalen.
        //var aantal = prompt("Tot hoever wil je oefenen? Geef een nummer op.");

        var aantal = $('#slider1').val();

        /// might as well store an array with each answer, could be improved
        /// by storing the question as well - so in the end you could give
        /// the user a summary.
        var antwoordenAnswers = [];
        var antwoordenPartituur = 0;  /// store the score count
        var antwoordVerwacht = null; /// keep a reference to the expected answer
        /// reformatted your arrays to better fit with SO layout ;)

        // all special characters: http://kompoos.nl/manuals/ascii/javascript-special-characters.html
        // \337 = ß
        // \374 = ü
            var vierdeNaamval = [
                "bis", "durch", "f\374r", "gegen",
                "ohne", "um", "entlang"
            ],
            derdeNaamval = [
                "aus", "bei", "mit", "nach", "seit",
                "von", "zu", "entgegen", "au\337er",
                "gegen\374ber", "an...vorbei"
            ],
            keuzevoorzetsel = [
                "an", "auf", "hinter", "neben", "in",
                "\374ber", "unter", "vor", "zwischen"
            ];

        /// added some translation vars for English people 
        /// out there (and to help me)
        var accusative = vierdeNaamval,
            dative = derdeNaamval,
            choicePreposition = keuzevoorzetsel;

        /// to aid with a random choice it's nice to work with arrays
        var opties = [vierdeNaamval, derdeNaamval, keuzevoorzetsel];
        var options = opties;

        /// ... then we can use a function like this to grab a random item
        var getRandomItem = function( a ){
            return a[Math.floor((a.length)*Math.random())];
        };

        /// handle writing the question, as stated 
        /// by @AvlinWong - don't use document.write()
        var vraagQuestion = function(){
            /// use our simple get random item from array function
            var a = getRandomItem( opties );
            /// set the expected answer
            if ( a === derdeNaamval ) {
                antwoordVerwacht = '3';
            }
            else if ( a === vierdeNaamval ) {
                antwoordVerwacht = '4';
            }
            else if ( a === keuzevoorzetsel ) {
                antwoordVerwacht = 'k';
            }
            /// choose a random question item from the list
            var b = getRandomItem( a );
            /// target the output element and change it's HTML
            document.getElementById('antwoord').innerHTML = b;
        };

        /// a simple function to better explain the act of updating the score
        /// in the GUI/HTML.
        var zettenPartituur = function( a ){
           document.getElementById('partituur').innerHTML = a;
        };

        /// clickOnTheButton --- hope the translation is right :)
        var klikOpDeKnop = function(e){
            /// because we are relying on pure javascript, different browsers
            /// have different event objects - srcElement for old IE, target
            /// for everything else...
            var a = e.target ? e.target : e.srcElement;
            var corrigeren = null;
            /// because each button has a unique id, we can do this
            switch ( a.id ) {
                case 'derde':
                    corrigeren = ( antwoordVerwacht == '3' );
                break;
                case 'vierde':
                    corrigeren = ( antwoordVerwacht == '4' );
                break;
                case 'keuze':
                    corrigeren = ( antwoordVerwacht == 'k' );
                break;
            }
            /// if they were correct, tell them so and update score
            if ( corrigeren ) {
                //alert('good!');
                antwoordenPartituur++;    
                document.getElementById('goed').style.visibility="visible";
                document.getElementById('fout').style.visibility="hidden";
            }
            /// otherwise tell them not and downgrade score :(
            else {
               // alert('wrong!');
                antwoordenPartituur--;
                document.getElementById('goed').style.visibility="hidden";
                document.getElementById('fout').style.visibility="visible";

            }

            /// collect the answer
            antwoordenAnswers.push( corrigeren );
            /// output the score to the user
            zettenPartituur( antwoordenPartituur );
            /// because we are storing an array of answers it's easy
            /// to tell how many there have been by .length of the array
            //if ( antwoordenAnswers.length > 10 ) {
              if ( antwoordenPartituur >= aantal ) {    
                /// all done!
                alert("Hoera! Je bent klaar!! / You're done!!");
            } else {
                /// generate a new question
                vraagQuestion();
            }
        }
        /// using a simple window.onload will mean we know that we can
        /// start messing around with the HTML on the page. This could
        /// be improved using addEventListener/attachEvent but as this
        /// is your own app with bespoke code you don't need to worry.
        /// Unless you start using any plugins or third-party libraries.
        window.onload = function(){

            /// target the button wrapper in the HTML
            var wikkelWrapper = document.getElementById('buttons'),
                /// find all buttons within wrapper
                knoppenButtons = wikkelWrapper.getElementsByTagName('button'),
                i, l = knoppenButtons.length, a;

            /// step each button found and apply an event listener using the
            /// more accepted and improved addEventListener/attachEvent methods
            /// there are many reasons as to why these are better to use
            /// just search StackOverflow for reasons as to why :)
            for(i=0; i<l; i++){
                a = knoppenButtons[i];
                /// for all good browsers
                if ( a.addEventListener ) {
                    a.addEventListener('click', klikOpDeKnop);
                }
                /// for good ol' Internet Explorer
                else if ( a.attachEvent ) {
                    a.attachEvent('onclick', klikOpDeKnop);
                }
            };

            /// set the ball rolling / stelt u de bal aan het rollen
            /// first set the output of the score
            zettenPartituur(antwoordenPartituur);
            /// then set the first question
            vraagQuestion();

        }

    })(); /// this construction can be confusing, it basically just creates
    /// a new anonymous function and then executes it straight away. we are
    /// using the anon function for it's scope so that we keep our variables
    /// and methods separated from other code.
});//]]> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T13:44:10.223

很难看出你在这里做什么（不是我的语言），但是可以像这样检索滑块的值，

```
$("#slider").slider({
  slide: function(e) {
    $(this).val(); // Value each mouse move when sliding.
  },
  change: function(e) {
    $(this).val(); // Value on slide end, or when changed programatically.
  },
  stop: function(e) {
    $(this).val(); // Value on slide end.
  }
}); 
```

# symfony1 - Doctrine SoftDelete 更新父表

> ID：13208931
> 
> 赞同：2
> 
> 时间：2012-11-03T11:58:17.667
> 
> 标签：symfony1, doctrine, symfony-1.4, doctrine-1.2

我有一个评论表，用于将对象的评论存储在 3 个不同的表中。当我对删除其中一个对象的注释运行功能测试时，它工作正常。但是，如果我运行功能测试以从其他对象中删除注释，我会收到完整性约束 MySQL 错误，因为教义试图“更新”第一个对象表，作为删除与表中对象关联的注释的一部分b 或 c。我无法弄清楚为什么删除评论是试图更新父表。

从 3 个对象表到注释表都有一个删除级联。这些表在 Symfony 1.4 的 YML 中定义

```
object_a:
  columns:
    some stuff
  relations:
    Comments:
      class: Comments
      local: id
      foreign: object_a_id
      type: many
      foreignType: one
      cascade: [delete]

object_b:
  columns:
    some stuff
  relations:
    Comments:
      class: Comments
      local: id
      foreign: object_b_id
      type: many
      foreignType: one
      cascade: [delete]

object_c:
  columns:
    some stuff
  relations:
    Comments:
      class: Comments
      local: id
      foreign: object_c_id
      type: many
      foreignType: one
      cascade: [delete]

comments:
  columns:
    object_a_id:
       type: integer(4)
    object_b_id
       type: integer(4)
    object_c_id
       type: integer(4)
  relations:
    Object_a:
       local: object_a_id
       foreign: id
       type: one
    Object_b:
       local: object_b_id
       foreign: id
       type: one
    Object_c:
       local: object_c_id
       foreign: id
       type: one 
```

此故障仅在通过 Symfony 1.4 测试工具运行测试时发生。它在开发环境中运行良好。在添加对象 b 和 c 之前，对象 a 是必填字段，但已被删除。我已经运行了 symfony cache:clear --env=test 来查看是否删除了任何可能干扰的缓存学说对象。

**编辑：** 现在在生产和开发中遇到问题。据我从数据模块和 BaseModel 文件中可以看出，没有理由更新父表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-03T10:46:51.933

在经历了很多焦虑和头疼之后，我弄清楚了这里发生了什么。

在这种情况下，模式或生成的 PHP 都没有问题。相反，它是由于子类中的 postSave() 操作而发生的。postSave() 操作正在获取父类的属性，该属性已被删除，因此 Doctrine 实际上是在创建一个新对象，然后尝试将其保存为工作单元的一部分。由于新对象没有任何必填字段，MySQL 出错。

一个例子应该更清楚。`Object A`是带有子对象的父对象`Object B`。`Object A`有财产`foo`。

```
$object_a->delete(); 
```

触发. `postSave()`_ `Object B`这个动作是：

```
function postSave($event) 
{
  //do something
  $slug = $this->Object_As->foo;
  //do more stuff
} 
```

or if 使用该`$this->Object_As->foo`事件`$event->getInvoker()->getFoo()`将尝试创建一个`Object_A`if none 存在。现在，有趣的一点是，如果您的 MySQL 表没有必填字段，这最终可能会在`Object_A`您不知道的情况下创建许多新的 s，直到它在其他地方引起问题。我怀疑这将很难追查到罪魁祸首。

在我的真实用例中，我正在删除缓存元素。当我使用softDelete时，在这种情况下我通过检查`invoker`删除字段是否为空来解决它，例如：

```
$event->getInvoker()->getDeleted_at() 
```

# android - jQuery mobile 中的链接对话框：第二个对话框在 Android 中消失

> ID：13208933
> 
> 赞同：1
> 
> 时间：2012-11-03T11:58:22.133
> 
> 标签：android, jquery, facebook, jquery-mobile, jquery-chaining

我正在使用 jQuery mobile 开发 Facebook 应用程序，我在其中创建了一个对话框，该对话框创建了第二个对话框（链接）。

问题在于，对于 Android 和 Opera，第二个对话框会显示一秒钟，然后消失。

有没有办法避免这种行为？否则，如何在不破坏第二个对话框的情况下破坏第一个对话框？

**代码：**

```
function function1(item) {        
       showDialog(..., function(){
               ...
               if (appInstalled == true) {                        
                       if(function2(item) == true) { 
                               //call to alert dialog function2
                       }
               } 
       });
}

function function2(item) {
       if (...) {
               showAlertDialog(item.name, messages.MATCH_CONFIRMATION_MSG, item.picture.data.url, '#friendsPage');
               $('#dialog').dialog('close');
               $('#alertDialogTrickLink').click();//this is event for going to dialog 
       } 

}

function showDialog(title, content, img, hrefURL, hrefURLcancel, callbackFunction) {
       $('#dialog-content').html(content);
       $('#dialogHeader').text(title);
       if (img != null) {
               $('#dialog-img').html('<img src="' + img +'" alt="" class="bigImg" />');
       } else {
               $('#dialog-img').html('');
       }
       var a = messages.ACCEPT_BUTTON_TEXT;
       var c = messages.CANCEL_BUTTON_TEXT;
       $('#dialogActions').html(
               '<a href="' + hrefURL + '" data-role="button" data-theme="c" id="confirmDialogAction" data-icon="check" data-iconpos="left">' + a + '</a>' +       
               '<a href="' + hrefURLcancel + '" data-role="button" id="skipDialogAction" data-icon="delete" data-iconpos="left">' + c + '</a>'
       );
       $('#confirmDialogAction').click(function(e) {
               e.preventDefault();
               callbackFunction();
       });
       $('#dialog').trigger('create');
} 
```

感谢磨坊

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T17:29:57.953

您是否尝试过`setTimeout`此处描述的方法[注意：不允许链接弹出窗口](http://jquerymobile.com/demos/1.2.0/docs/pages/popup/index.html)

# python - 如何交替排列两个字符串？

> ID：13208934
> 
> 赞同：1
> 
> 时间：2012-11-03T11:58:36.637
> 
> 标签：python

> **可能重复：**
> [一次遍历两个字符串python](https://stackoverflow.com/questions/13208126/traversing-two-strings-at-a-time-python)

在这里，我有一个问题，即如何连接两个字符串，因为它们的单词一个接一个出现。我的意思是，如果第一个字符串是“abc”，第二个是“defgh”，那么最终答案应该是“adbecfgh”。 ..

这是我的代码，但它出现在同一行

```
x = raw_input ('Enter 1st String: ')
y = raw_input ('Enter 2st String: ')
z = [x, y]
a = ''.join(z)
print (a) 
```

任何人都可以知道错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-03T12:03:52.453

你需要`itertools.izip_longest()`在这里或者`itertools.zip_longest()`如果你在 python 3.x 上：

```
In [1]: from itertools import izip_longest

In [2]: strs1="abc"

In [3]: strs2="defgh"

In [4]: "".join("".join(x) for x in izip_longest(strs1,strs2,fillvalue=""))
Out[4]: 'adbecfgh' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-03T12:00:34.983

您想要的是[文档](http://docs.python.org/3/library/itertools.html#itertools-recipes)[中](http://docs.python.org/3/library/itertools.html#itertools-recipes)`roundrobin()`的食谱：[`itertools`](http://docs.python.org/3/library/itertools.html#itertools-recipes)

```
from itertools import cycle, islice

def roundrobin(*iterables):
    "roundrobin('ABC', 'D', 'EF') --> A D E B F C"
    # Recipe credited to George Sakkis
    pending = len(iterables)
    nexts = cycle(iter(it).__next__ for it in iterables)
    while pending:
        try:
            for next in nexts:
                yield next()
        except StopIteration:
            pending -= 1
            nexts = cycle(islice(nexts, pending)) 
```

请注意[2.x 用户的细微差别](http://docs.python.org/2/library/itertools.html#itertools-recipes)。

例如：

```
>>> "".join(roundrobin("abc", "defgh"))
adbecfgh 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T12:06:42.950

```
x = 'abc'
y = 'defgh'
z = [x, y]

from itertools import izip_longest
print ''.join(''.join(i) for i in izip_longest(*z, fillvalue='')) 
```

# c - 如何使用编译器的命令行选项禁用易失性存储类？

> ID：13208935
> 
> 赞同：4
> 
> 时间：2012-11-03T11:58:39.040
> 
> 标签：c, linux, gcc

有没有办法在*不修改底层源代码的情况下*在 gcc 中编译时仅使用编译器设置/标志来禁用易失性存储类？

前任。

```
volatile int x;
.. use x .. 
```

需要像编写一样编译：

```
int x;
.. use x .. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T18:03:28.390

编译使用

```
gcc -Dvolatile="" ... 
```

这样预处理器就会用`volatile`空字符串替换每次出现的 。如果只使用`-Dvolatile`,`volatile`将被替换为 1，这会导致编译错误。

因为`volatile`关键字告诉编译器该值可能随时更改并且它不应该缓存该值，所以从工作代码中省略它们可能会导致出现错误（因为编译器有时会处理陈旧的值）。

# php - mySQL 查询中只有一个选项未显示

> ID：13208938
> 
> 赞同：0
> 
> 时间：2012-11-03T11:58:54.677
> 
> 标签：php, mysql

我无法在[http://www.mattmaclennan.co.uk/a2](http://www.mattmaclennan.co.uk/a2)的“新摩托车”部分显示所有子菜单项。例如，Adventure 应该有三个选项，而不是一个。这是我使用的代码。

```
<?
$output = mysqli_query("SELECT * FROM bikes, bikeTypes WHERE bikes.model_id = bikeTypes.model_id GROUP BY bikeTypes.model_id");
while($row = mysqli_fetch_array($output))
 {
   echo "<li><a href='test.php?id=" . $row['model_id'] . "'>".$row['model'].'</a><ul>';
   echo "<li><a href='details.php?id=" . $row['bike_id'] . "'>" . $row['bikeName'] . "</a></li>";
   echo '</ul>';   
   echo '</li>';
 }
//var_dump($result);
?> 
```

有什么想法吗？谢谢！

**编辑：**这是来自 phpMyAdmin 的两个表的结构：

bikeTypes 表： [自行车类型表 http://www.mattmaclennan.co.uk/a2/images/bikeTypesTable.jpg](http://www.mattmaclennan.co.uk/a2/images/bikeTypesTable.jpg)

自行车桌： [自行车桌 http://www.mattmaclennan.co.uk/a2/images/bikesTable.jpg](http://www.mattmaclennan.co.uk/a2/images/bikesTable.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:07:41.107

试试这个：

> SELECT bikeTypes.id,bikeTypes.name,bikes.name,bikes.id FROM bikeTypes LEFT JOIN bikes ON bikes.model_id = bikeTypes.model_id

如果你看到我写的查询中有一个。你在做什么被数据库引擎`LEFT JOIN`视为一个。`INNER JOIN`

但你需要的是

```
 $output = mysqli_query("SELECT * FROM bikeTypes");
    while($row = mysqli_fetch_array($output))
     {

       echo "<li><a href='test.php?id=" . $row['model_id'] . "'>".$row['model'].'</a><ul>';
       $subcat = mysqli_query("SELECT * FROM bikes WHERE model_id = $row['model_id']");

       while($rowSub = mysqli_fetch_array($subcat)){    
       echo "<li><a href='details.php?id=" . $rowSub['bike_id'] . "'>" . $rowSub['bikeName'] . "</a></li>";
       }
       echo '</ul>';   
       echo '</li>';

 } 
```

看看你想在哪里关闭 ul 和 li。

# c# - 跨页发帖

> ID：13208939
> 
> 赞同：2
> 
> 时间：2012-11-03T11:59:01.650
> 
> 标签：c#, asp.net, .net, vb.net, c#-4.0

我只是在尝试跨页发布的示例。我已将 1 个文本框和 1 个按钮添加到 default.aspx 页面

```
<asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
 <asp:Button ID="Button2" runat="server" Text="Button"  PostBackUrl="~/About.aspx"/> 
```

我已将以下代码添加到 about.aspx 页面的代码隐藏文件中

```
protected void Page_Load(object sender, EventArgs e)
    {
        if (Page.PreviousPage != null)
        {
            TextBox SourceTextBox =
                (TextBox)Page.PreviousPage.FindControl("TextBox1");
            if (SourceTextBox != null)
            {
                Label1.Text = SourceTextBox.Text;
            }
            else
                Label1.Text = "no value";
        }
        else
            Label1.Text = "no value from previous page";
    } 
```

当我在 textbox1 中输入一些文本并单击按钮时，它转到 about.aspx 但标签显示值“无值”，它没有显示 textbox1 的文本值，为什么这不能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T12:17:30.953

如果您有母版页，则代码`Page.PreviousPage.FindControl("TextBox1");`不起作用，因为`TextBox1`它在下面`ContentPlaceHolder.`并且必须先找到`ContentPlaceHolder.`然后找到`TextBox1`

但是有一种最简单的方法可以将值设为：

把它放在上一页：

```
public string TextFromBox1
{
    get
    {
        return TextBox1.Text;
    }
} 
```

并在重定向页面上声明 aspx 上的上一页是：

```
<%@ Reference Page ="~/PreviousPageName.aspx" %> 
```

并在后面的代码中获取值为：

```
if (Page.PreviousPage != null)
{
    if (Page.PreviousPage is PreviousPageClassName)
    {
        Label1.Text = ((PreviousPageClassName)Page.PreviousPage).TextFromBox1;
    }
    else
    {
        Label1.Text = "no value";
    }
}
else
    Label1.Text = "no value from previous page"; 
```

# javascript - javascript推入嵌套树对象

> ID：13208940
> 
> 赞同：2
> 
> 时间：2012-11-03T11:59:06.387
> 
> 标签：javascript, json

我尝试使用此 SO 问题中的代码片段： [如何使用父 ID 将对象添加到嵌套的 javascript 对象](https://stackoverflow.com/questions/12899609/how-to-add-an-object-to-a-nested-javascript-object-using-a-parent-id)

当您尝试进一步向下插入树时，它确实不会工作，因为未定义返回。

我试图解决这个问题，但我错过了一些东西，所以我需要一些帮助。

[http://jsfiddle.net/murray_3/EbJ85/4/](http://jsfiddle.net/murray_3/EbJ85/4/)

继承人的代码：

```
var ob = {
    name: "root",
    id: 1,
    children: [
        {
            name: "child one",
            id: 11,
            children: [
            {
                name: "grand child 1",
                id: 111,
                children: []
            },
            {
                name: "grand child 2",
                id: 112,
                children: []
            }
        ]},
        {
            name: "child two",
            id: 12,
            children: []
        }
    ]
};

function findObjectById(root, id) {
    if (root.children) {
        for (var k in root.children) {
            if (root.children[k].id == id) {
                return root.children[k];
        }
        else if (root.children.length) {
            return findObjectById(root.children[k], id);
            }
        }
    }
 };

function findObjectByLabel(obj, id) {
   for (i in obj.children) {
      if(obj.children[i].id === id) { 
          document.write( obj.children[i].id);
          l= obj.children[i].children.length +1
          return obj.children[i];
      }
      else { 
            findObjectByLabel( obj.children[i], id);
            }
        }
};

function traverse(o,spc) {
    for (i in o) {
        if(i == "name"|| i == "id") {
           document.write(spc + i + " : "+o[i]+"<br>");
        }        
        if (typeof(o[i])=="object") {
            //going on step down in the object tree!!
            ss = spc+"_"
            traverse(o[i],ss);
        }
    }
}

var s =""
traverse(ob,s)
var boo = findObjectByLabel(ob,111)
var l = boo.children.length
document.write(typeof(boo))
document.write("<br>"+"boo kids l= " +l+"<br>")
//var boo = findObjectByLabel(ob,111)
boo.children.push({
    name: "child x",
    id: 11111,
    children: []
});
var ll = boo.children.length
document.write("<br>"+"boo kids l= " +ll+"<br>")
var s =""
traverse(ob,s) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T01:42:15.877

我创建了这个功能，它可以满足我的需求：

```
function testpush(o,idd,tt,tid) {
   for(var a = 0; a < o.children.length; a++) {
    if(o.children[a].id == idd) {
       o.children[a].children.push({
            name: tt, 
            id: tid, 
            children: []
        });
    } 
    else {
        testp(o.children[a],idd,tt,tid);
        }
    }
};

testp(ob,12,"test 121",121)
testp(ob,121,"test 1211",1211) 
```

# ruby-on-rails - Rails 用外键设计奇怪的行为

> ID：13208943
> 
> 赞同：0
> 
> 时间：2012-11-03T11:59:41.460
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试创建一个简单的用户和地址模型。

我创建了一个嵌套表单，其中包含一个嵌套在 User 模型中的地址模型。我的用户模型具有设计属性等。

一切正常，除了创建用户时发生了奇怪的行为。

如果您阅读下面的内容，您会注意到首次提交记录时填充了拥有用户的地址的“user_id”。但是紧接着，看起来像是在 Devise 核心中的东西，正在将 user_id 重置为 null。

有谁知道这是什么原因造成的？

> 在 2012-11-03 22:45:20 +1100 开始 POST "/users" for 127.0.0.1 由 Member::UsersController#create as HTML 参数处理：{"utf8"=>"✓", "authenticity_token"=> "Pr8lSEJalWwosuaLPOrYqQ+sOkFCyoNujaUybxpZDAg=", "user"=>{"address_attributes"=>{"first_name"=>"HOlley", "last_name"=>"Hou"}, "email"=>"HollyHou@hisense.com。 au", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}} 创建新用户 (0.1ms) BEGIN (0.1ms) COMMIT (0.0ms) BEGIN Member::User Exists （0.3 毫秒）从`member_users`WHERE中选择 1 作为一个 `member_users`。`email`= BINARY 'hollyhou@hisense.com.au' 限制 1 SQL (0. `member_users``created_at``current_sign_in_at``current_sign_in_ip``email``encrypted_password``last_sign_in_at``last_sign_in_ip``remember_created_at``reset_password_sent_at``reset_password_token``sign_in_count`, `updated_at`) 值 ('2012-11-03 11:45:20', NULL, NULL, 'hollyhou@hisense.com.au', '$2a$10$1JvC/sO85L2esNp8xA9qseTc78.rtOyF3zSBi/fOTiWJRt9.zgYha', NULL, NULL , NULL, NULL, NULL, 0, '2012-11-03 11:45:20') SQL (0.2ms) INSERT INTO `member_addresses`( `address3`, `address_1`, `address_2`, `address_type`, `business_name`, `city`, `country`, `created_at`, `first_name`, `geo_late`, `geo_long`, `is_primary`, `last_name`, `middle_name`, `phone1`, `phone1_type`, `phone2`, `phone2_type`, `postcode`, `primary_email`, `secondary_email`, `state`, `status`, `suburb`, `title`, `updated_at`,`user_id`）值（NULL，NULL，NULL，NULL，NULL，NULL，NULL，'2012-11-03 11:45:20'，'Holley'，NULL，NULL，NULL，'侯'，NULL，NULL，NULL， NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, NULL, '2012-11-03 11:45:20', 5) (1.3ms) COMMIT
> (0.1ms) BEGIN (0.2ms) UPDATE `member_users`SET `last_sign_in_at` = '2012-11-03 11:45:20', `current_sign_in_at`= '2012-11-03 11:45:20', `last_sign_in_ip`= '127.0.0.1', `current_sign_in_ip`= '127.0.0.1', `sign_in_count`= 1, `updated_at`= '2012-11- 03 11:45:20' 在哪里 `member_users`。`id`= 5 (0.2ms) COMMIT (0.1ms) BEGIN
> (0.2ms) UPDATE `member_addresses`SET `user_id`= NULL, `updated_at` = '2012-11-03 11:45:20' WHERE `member_addresses`。`id`= 5 (0.2ms) 提交

控制器是一个自定义控制器，因为我最终（一旦我得到这个工作），需要能够在注册后重定向到 2 个不同的地方，这取决于客户从哪里登录（在这种情况下是结帐或标题）。

```
class Member::UsersController < Devise::RegistrationsController
  def create
    super
  end

  def new
    super
  end

  def edit
    Rails.logger.debug { "Editing the user" }
    super
  end

  def show
    Rails.logger.debug { "Showing the user controller" }
  end
end 
```

并来自 routes.rb

```
 devise_for :users, :class_name => "Member::User", :controllers => {:registrations => 'member/users', :sessions => 'member/sessions'} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T10:19:20.247

我终于想通了。它实际上与我从上一个关于嵌套形式的问题中得到的答案有关。

在下面的这段代码中，以前在嵌套地址字段中，我总是调用 build_address 并且因为在刷新表单时地址是一对一的关系，它正在创建一个新地址。现在我觉得应该可以了，我没有测试过，但至少地址无效问题解决了。

> resource_name,:url => registration_path(resource_name), :html => {:class => 'form-horizo​​ntal' }) 做 |f| %> 必填字段标记为 *
> 
> "alert alert-error", :id => "flash_error") if flash[:error] %> "flash_notice") if flash[:notice] %> "alert alert-error", :id => "flash_alert") if flash[:alert] %> {:class => "input-xlarge"} %> {:class => "input-xlarge"} %>
> 
> ```
>  <%= f.input :email, :input_html => {:class => "input-xlarge"} %>
>         <%= f.input :password, :required => true, :input_html => {:class => "input-xlarge"}   %>
>         <%= f.input :password_confirmation, :required => true, :input_html => {:class => "input-xlarge"} %>
>         <div class="form-actions">
>           <%= f.button :submit, "Register", :class => "btn btn-success btn-large" %>
>         </div>
>     <% end %> 
> ```

# android - 使用 google places Api 在 Android 中查找以公里为单位的距离

> ID：13208946
> 
> 赞同：1
> 
> 时间：2012-11-03T11:59:47.153
> 
> 标签：android, distance, google-places-api

我想以公里为单位显示两个地方的距离，为此我编写了以下代码：

```
hyd(17.38,78.48) eluru(16.7,81.1)
 private String getDistance(double lat1, double lat2, double lon1, double lon2) {
               double Radius = 6371;
               double dLat = Math.toRadians(lat2 - lat1);
                double dLon = Math.toRadians(lon2 - lon1);
                double a = Math.sin(dLat / 5) * Math.sin(dLat / 5)
                        + Math.cos(Math.toRadians(lat1))
                        * Math.cos(Math.toRadians(lat2)) * Math.sin(dLon / 5)
                        * Math.sin(dLon / 5);
                double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                double km = Radius * c;

                String kms=Double.toString(km);
                return kms;

                } 
```

输出 = 2995.8772

正确的 o/p = 330km

我怎样才能得到android中两个地方之间的确切距离提前谢谢.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:48:38.333

使用此方法

```
public static void distanceBetween (double startLatitude, double startLongitude, double endLatitude, double endLongitude, float[] results); 
```

例子

```
 public static double CalculateDistance(double lat1, double lng1, double lat2, double lng2) {
 float[] result=new float[1];
 Location.distanceBetween (lat1,lng1,lat2, lng2,  result);
 return (double)result[0]/1000; // in km
} 
```

# java - Java - 删除字符串后的空格（如果存在）

> ID：13208948
> 
> 赞同：0
> 
> 时间：2012-11-03T11:59:55.697
> 
> 标签：java, search, keyword, space

我实际上正在开发一个 Android 应用程序，它接受一个关键字在 MySQL 数据库中搜索（通过一个用 PHP 编写的 Web 服务）。

我这里有个问题：

当我输入一个关键字时，比如说，`"buffet"`返回结果就好了，但是如果我后面有一个空格，即`"buffet "`，它会证明没有找到匹配项。

我有点困惑，因为我实际上`trim()`是在 API 的 PHP 脚本中使用 for 关键字，但是这里的关键字仍然是传递的，后面有一个空格。因此，我正在寻找一些简单的方法来删除在搜索字段中传递关键字后的空格（如果有的话）。

请帮我解决这个问题，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T12:03:30.493

由于字符串是不可变的，`String.trim()`不会改变字符串本身的内容。确保分配结果：

```
searchString = searchString.trim(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:22:18.327

您可以使用 trim() 方法，该方法返回字符串的副本，省略前导和尾随空格。例子：

```
package com.stackoverflow.works;

public class TrimExample {

    public static void main(String[] args) {
        String  inputString = "buffet ";
            inputString = inputString.trim();
        System.out.println("Result: " + inputString);
    }

} 
```

**输出：**

```
Result: buffet 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T12:02:58.430

java 在类字符串中有一个 trim 方法。

# scala - scalatest 报告包含 $u0020 和 $colon

> ID：13208950
> 
> 赞同：3
> 
> 时间：2012-11-03T12:00:39.757
> 
> 标签：scala, scalatest

我正在使用 scalatest。问题是测试报告很难阅读。测试名称已将空格替换为`$u0020`、`:`with`$colon`等。

例如：

```
def `test: find '.gitignore' file on disk` = { 
    //...
} 
```

...在报告中将如下所示：

`test$colon$u0020find$u0020$u0027$u002Egitignore$u0027$u0020file$u0020on$u0020disk`

如何防止这种情况？

scala 和 scalatest 的版本是：

```
libraryDependencies += "org.scalatest" % "scalatest_2.10.0-M7" % "1.9-2.10.0-M7-B1" % "test"
scalaVersion := "2.10.0-M7" 
```

**已编辑**

线索。我认为它在幕后使用`Thread.currentThread().getStackTrace()(depth)`.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T12:35:43.550

[`FunSuite`](http://scalatest.org/getting_started_with_fun_suite)考虑改为扩展：

```
@RunWith(classOf[JUnitRunner])
class SomeTest extends FunSuite {

    test("test: find '.gitignore' file on disk") {
        //..
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-03T20:25:17.410

我认为当您升级到 Scala 2.10.0-M7 时，您会不小心从 ScalaTest 2.0 里程碑版本降级到 ScalaTest 1.9。反引号中漂亮的方法名称是 ScalaTest 2.0 的一个特性，该特性在 ScalaTest 2.0 之前的版本中不可用。您可能想要使用为 Scala 2.10.0-M7 构建的 ScalaTest 的 2.0.M4 版本。

```
libraryDependencies += "org.scalatest" %% "scalatest" % "2.0.M4-2.10.0-M7-B1" % "test"
scalaVersion := "2.10.0-M7" 
```

您还会注意到关于 Suite 测试方法的弃用警告，即使在 2.0.M4-2.10.0-M7-B1 下，它们可能仍会带有美元符号。那是因为 Suite 在 2.0.M4 中作为一个 stye 特性通常被弃用。要恢复漂亮的名称，您需要将 Suite 移植到 Spec。

[http://www.artima.com/docs-scalatest-2.0.M4/#org.scalatest.Spec](http://www.artima.com/docs-scalatest-2.0.M4/#org.scalatest.Spec)

# c# - 在不使用静态变量的情况下限制类的创建实例数

> ID：13208957
> 
> 赞同：0
> 
> 时间：2012-11-03T12:01:35.100
> 
> 标签：c#, static

我想限制一个类的实例数量，我不想使用静态计数来做到这一点，因为使用静态变量（如线程安全）和以下帖子中提到的其他一些缺点：[为什么静态变量被认为是邪恶的？](https://stackoverflow.com/questions/7026507/why-are-static-variables-considered-evil).

他们有什么办法我可以做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-03T12:05:14.637

这样做的唯一方法是使用工厂模式的一部分。你有一个类对象，它创建另一个类的对象，并且在每次“新”调用时，你增加你的计数器，在这种情况下它是一个非静态类变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T22:38:36.377

如果您不想使用静态字段来计算您的实例，您可以定义一个实例字段并使用 Interlocked.Decrement(out counter)，此方法以原子方式递减您的计数器。

这是一种减少整数的线程安全方法，因此在减少计数之间不会发生竞争条件。

# sql - Sql在while循环中获取名称和父级

> ID：13208958
> 
> 赞同：1
> 
> 时间：2012-11-03T12:01:39.090
> 
> 标签：sql, sql-server

我有一个名为 tblmodules 的表，它有 3 列：moduleid、name、parent_id。parent_id 列采用其他模块的值。前任：

```
Moduleid      Name       Parentid
--------     -----       --------
1           grandparent    Null
2            parent         1
3           child           2 
```

我想要一个存储过程，它采用父母的 ID 和孩子的姓名给出一个级别。所以我开发了以下内容。

```
 @moduleid bigint,
    @level int

AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

    declare @parentid bigint
    declare @name nvarchar(100)
    set @parentid = (select parentid from tblModules where ModuleId = @moduleid)

    declare @counter int
    set @counter = 1

    while @counter < @level
    begin

        set @parentid = (select parentid from tblModules where ModuleId = @parentid)
        set @name = (select Name from tblModules where ModuleId = @parentid)

        set @counter = @counter + 1
    end

    select @parentid AS ID
    select @name as Name

end 
```

该过程运行良好，并获得了正确的父级 ID，但名称与子级保持相同。例如，我正在执行它，给出值@moduleid：3 和@​​level：2。我得到的结果 ID：1 是正确的，但名称：孩子而不是祖父母。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:15:35.677

在我的脚本中，我使用 CTE 来查找将与其 ParentLevel(@level) 连接的模块

```
CREATE PROCEDURE dbo.ParentLevelName
 (
  @moduleid bigint,
  @level int
  )
AS
BEGIN
  SET NOCOUNT ON;

  ;WITH ParentTree(Parentid, Moduleid, Name, ParentLevel)
  AS
   (
    SELECT Parentid, Moduleid, Name, 0 AS ParentLevel
    FROM tblmodules
    WHERE Parentid IS NULL
    UNION ALL
    SELECT t.Parentid, t.Moduleid, t.Name, p.ParentLevel + 1
    FROM tblmodules t JOIN ParentTree p ON t.Parentid = p.Moduleid 
    )
  SELECT p.Parentid, p.Moduleid, p.Name, p2.Name PerantLevelName
  FROM ParentTree p LEFT JOIN ParentTree p2 ON p.ParentLevel - @level = p2.ParentLevel
  WHERE p.Moduleid = @moduleid
END 
```

[***SQL Fiddle***](http://sqlfiddle.com/#!3/b3c78/1/0)演示[](http://sqlfiddle.com/#!3/b3c78/1/0)

# timer - CPU中有定时器吗？

> ID：13208960
> 
> 赞同：8
> 
> 时间：2012-11-03T12:01:47.377
> 
> 标签：timer, hardware, cpu, clock

我们在代码中使用计时器；我只是对它的真正实现感到好奇。CPU 逻辑电路中或 CPU 裸片外部是否有定时器——例如，外部时钟或类似的东西？

如果没有，那么计时器在哪里？硬件定时器是如何制作的不需要任何详细的解释，只需专注于在我们拥有的硬件板上定位定时器即可。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T12:26:39.310

计算机硬件中有许多不同类型的时钟和定时器。所有基本计算机都会有一个像数字手表一样的晶体，用于同步 CPU 并形成以赫兹为单位的“时钟速度”。

大多数 CPU 都内置了许多计时器，这些计时器使用时钟速度来计算两点之间的相对时间。这允许系统程序员设置一个定时器，该定时器将在晶体的一定数量的时钟周期内“关闭”。计时器通过引发中断线来提醒 CPU 定义的时间已经过去，程序员将一段代码附加到该中断线上。

操作系统和编程语言通常将中断计时器抽象化，因此您不必直接使用它们。

大多数先进的计算机，如个人电脑，都有一个实时时钟，可以存储实际的日历时间和日期，但不经常用于计时操作。

回答你的问题：

> 在我们拥有的硬件板上找到计时器

它非常取决于您的硬件以及您对哪个计时器感兴趣。您将无法实际看到大多数计时器或时钟，但晶体通常很容易找到并且看起来像一个小金属胶囊 - 请参阅[http://www .electronicrepairguide.com/how-to-test-crystal.html](http://www.electronicrepairguide.com/how-to-test-crystal.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-03T12:25:20.450

x86 机器上有很多计时器。最著名的是 TSC（时间戳计数器）。那个在CPU里面。然后有 PIT（可编程间隔定时器）作为主板上的芯片，如 Intel 8253 和 8254。我不确定它们是否仍在使用。另一个计时器是 HPET（高精度事件计时器）。它不在 CPU 内部，是三者中最新的。

当然还有电池供电的实时时钟。不确定这是否算作计时器。可能不是。

使用哪个定时器由操作系统决定。在某些系统上使用 TSC，在其他系统上使用 HPET。TSC 通常是首选，因为它位于 CPU 内部，因此访问速度非常快。如果没有直接与硬件对话的汇编指令，您无法真正直接从 C 代码访问特定的计时器。

# r - R统计环境的尾递归

> ID：13208963
> 
> 赞同：16
> 
> 时间：2012-11-03T12:01:55.267
> 
> 标签：r, recursion, functional-programming, tail-recursion

R 是否支持正确的尾递归，我在哪里可以找到有关此的文档？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-03T12:06:13.013

很容易发现 R 不支持尾递归优化：

```
f <- function(n) {
if (n != 0) f(n-1)
}
f(100000)
# Error: evaluation nested too deeply: infinite recursion / options(expressions=)? 
```

如果尾调用针对跳转进行了优化，那么该函数将毫无问题地终止。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-03T12:04:36.717

不，R 不支持尾递归。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-03T12:04:50.567

[这个参考](https://stat.ethz.ch/pipermail/r-devel/2011-April/060599.html)，很容易在谷歌上找到，表明 R 不支持尾递归并解释了原因。

# ruby-on-rails-3 - 安装带有本机扩展的瘦（1.5.0）“...错误：无法构建 gem 本机扩展。”

> ID：13208965
> 
> 赞同：0
> 
> 时间：2012-11-03T12:02:32.987
> 
> 标签：ruby-on-rails-3, thin

我有一个新项目需要使用瘦，但是有问题。在我的 Gemfile 中。

```
gem 'thin' 
```

然后我运行“捆绑安装”。表明：

```
......
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /usr/local/Cellar/ruby/1.9.3-p194/bin/ruby extconf.rb 
checking for main() in -lc... *** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --without-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/usr/local/Cellar/ruby/1.9.3-p194/bin/ruby
    --with-thin_parser-dir
    --without-thin_parser-dir
    --with-thin_parser-include
    --without-thin_parser-include=${thin_parser-dir}/include
    --with-thin_parser-lib
    --without-thin_parser-lib=${thin_parser-dir}/lib
    --with-clib
    --without-clib
/usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:381:in `try_do': The compiler failed to generate an executable file. (RuntimeError)
You have to install development tools first.
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:461:in `try_link0'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:476:in `try_link'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:619:in `try_func'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:845:in `block in have_library'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:790:in `block in checking_for'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block (2 levels) in postpone'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:284:in `block in postpone'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:254:in `open'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:280:in `postpone'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:789:in `checking_for'
    from /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/1.9.1/mkmf.rb:840:in `have_library'
    from extconf.rb:4:in `<main>'

Gem files will remain installed in /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/thin-1.5.0 for inspection.
Results logged to /usr/local/Cellar/ruby/1.9.3-p194/lib/ruby/gems/1.9.1/gems/thin-1.5.0/ext/thin_parser/gem_make.out
An error occured while installing thin (1.5.0), and Bundler cannot continue.
Make sure that `gem install thin -v '1.5.0'` succeeds before bundling. 
```

请帮我解决这个问题。之前安装过thin，不知道为什么这次失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-22T10:03:51.557

gem install thin 或 gem install thin -v '1.5.0'

# java - 具有不同用户登录的静态变量的行为

> ID：13208967
> 
> 赞同：1
> 
> 时间：2012-11-03T12:02:41.263
> 
> 标签：java, jakarta-ee

我对一些实现有点困惑，这是我的问题，

1.  两个用户可以登录系统。（用户A，B）
2.  他们使用不同的用户名和密码同时登录

我们假设，`Employee`类有一个`static`变量调用`age`

用户 A 将年龄值更改为 45，然后用户 B 将年龄值更改为 28，然后都保存更改。

那么 A 和 B 的实际值是多少？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:05:04.700

在这种情况下，A 和 B 没有年龄。班级有`Employee`年龄。静态字段与一个类相关联，而不是与该类的实例相关联。所以该`Employee.age`字段的值为 28。

[在Java 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/classvars.html)中阅读有关静态成员的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:06:19.320

好吧，首先，“年龄”应该是一个实例变量，而不是静态变量——一个静态变量由一个类的所有实例共享。

在您给出的示例中，最后一个设置值是“坚持”的值，假设您在非集群环境中工作（即，shatic 变量在同一虚拟机中实例化的类中共享）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T13:13:35.090

**静态变量**只有**一个副本由使用它的每个对象共享**，而 **实例变量对于不同的对象具有不同的副本**

在您的情况下，变量是静态的，因此变量的第一个**值是 45**

然后被**值 28 覆盖。**

# dynamics-crm-2011 - （如何）我可以在没有插件的情况下在 Dynamics CRM 服务器上执行 C# 代码吗？

> ID：13208968
> 
> 赞同：0
> 
> 时间：2012-11-03T12:02:49.537
> 
> 标签：dynamics-crm-2011

更新数据库中的一些记录是可以生存的，但如果我需要更改它们，例如 100 条，则不能。出于多种原因，我真的不喜欢使用 XML/Excel 技术导入/导出数据。然后我意识到我**可以**在插件中做到这一点。（注意，我并不是说这是明智的也不可推荐的，只是可行的。）

当然，我不需要告诉任何人这种方法会造成多大的麻烦。这让我思考。

1.  有没有办法“按需”执行 C# 代码？您将打开一个窗口，输入代码（就像在 CRM4 中使用 JS 所做的那样），然后执行**一次**。
2.  如果创建插件是唯一的方法，我可以定义自己的消息吗？我会在`Konrad`状态前/状态后添加一条消息，并且（在大多数情况下）在它被调用时什么都不做。
3.  如果这不可行，添加我自己的一般实体是否明智？我会这样称呼它`Viltersten`，既磨练了我的自我，又拥有一个隐藏的、未使用的实体来在需要时执行代码。
4.  还有其他方法吗？

这是一个（懒惰的）疯子问题还是其他人有同样的想法？如果我不能对数据进行微观管理，我总是觉得我正在失去与数据的联系。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T15:28:25.040

1.  可以通过 JavaScript 和 SOAP 服务来完成。
2.  不是我知道的
3.  这是一个基于您的实体的插件的好主意。然后，每当您希望您的插件执行时，添加另一条记录或更新您的 Viltersten 实体中的记录。
4.  您还可以编写一个控制台应用程序或一个可以按自动计划执行的 Windows 服务。

# android - RelativeLayout 中的 Android ListView 高度

> ID：13208973
> 
> 赞同：1
> 
> 时间：2012-11-03T12:03:08.307
> 
> 标签：android, android-listview, android-relativelayout

我有这个布局：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/legend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/BannerView"
        android:text="Legend"
        android:textColor="#FFFFFF" />

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_below="@+id/legend" >

    </ListView>

    <Button
        android:id="@+id/generateBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/list"
        android:text="Generate" />

</RelativeLayout> 
```

但是按钮不在屏幕上。如何设置`ListView`高度以查看下面的按钮？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T12:25:47.980

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/mainContainer"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/legend"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/BannerView"
        android:text="Legend"
        android:textColor="#FFFFFF" />

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/generateBtn"
        android:layout_below="@id/legend" >

    </ListView>

    <Button
        android:id="@id/generateBtn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@id/list"
        android:layout_alignParentBottom="true"
        android:text="Generate" />

</RelativeLayout> 
```

# c# - 从datagridview中的自定义控件获取选定文本

> ID：13208976
> 
> 赞同：1
> 
> 时间：2012-11-03T12:03:26.723
> 
> 标签：c#, selectedtext

我有一个数据网格视图。这个 datagridview 有一些列。其中一列是托管自定义控件。在此自定义控件中，您可以键入类似于文本框的内容。然后我实现了一种机制来控制用户可以输入的内容：只有数字和一些特殊字符，如退格。此外，我将最大长度 pe 限制为 10。所以我重写了 KeyPress 方法，并在其中控制用户当前正在输入的内容。一切都好，直到这里，当用户达到最大长度时问题就来了，所以不能写入数字和特殊字符，因为它具有最大长度，但在这种情况下，如果用户选择了所有文本，然后他在文本时输入了一些内容选择并且长度是最大值，我想允许他这样做，因为当他选择文本时，当他输入时，文本将被删除，它仍将是他输入的新字符。所以在这种情况下，我需要知道是否选择了所有文本，如果是这样并且长度是最大的，我想允许这样做。如何选择文本？

# php - 使用 php/mysql 在选择框中添加带有文本的图像

> ID：13208978
> 
> 赞同：0
> 
> 时间：2012-11-03T12:03:38.700
> 
> 标签：php, html, mysql

```
 <? 
    ... 
    mysql cnx code 
    ... 

    $sql="SELECT id, thing FROM table"; 
    $result=mysql_query($sql); 

    $options=""; 

    while ($row=mysql_fetch_array($result)) { 

        $id=$row["id"]; 
        $thing=$row["thing"]; 
        $options.="<OPTION VALUE=\"$id\">".$thing; 
    } 
    ?> 

... 
html code 
... 

<SELECT NAME=thing> 
<OPTION VALUE=0>Choose 
<?=$options?> 
</SELECT> 
```

我正在使用上面的代码从我的 mysql 数据库中生成一个下拉列表，但我还希望在下拉列表中的每个文本前面都有一个图像。

例如：我有 4 个东西 - APPLE、MANGO、BANANA、CARROT，图像存储在一个文件夹中，它们的路径保存在数据库表字段中。我要做的就是将相应的图像与文本一起添加。

提前致谢

# matrix - 在 CUDA 中使用共享内存的非方阵转置

> ID：13208982
> 
> 赞同：3
> 
> 时间：2012-11-03T12:04:08.243
> 
> 标签：matrix, cuda, transpose

我试图获得各种尺寸的 SDK 矩阵转置样本的变体。简而言之，我必须获取一个输入数组 (double *a) 并将其写入一个更大矩阵 (double *tab) 的两个不同部分（您会注意到不同的偏移量）。我以行主要格式存储数据，因此我使用此宏进行索引：

```
#define IDX2L(i,j,ld) (((i)*ld))+(j)) // 0 based index +row-major format 
```

这是我使用的简单代码。

```
__global__ void cuda_a_Coalesced(double *tab, int tab_rows, int a_rows, double *a)
{
    __shared__  double tile[16*(16+1)]; 
    int col = threadIdx.x + blockIdx.x * blockDim.x;
    int row = threadIdx.y + blockIdx.y * blockDim.y;

    int col_2, row_2;
    int a_cols=tab_rows-a_rows; // tab_rows-a_rows is the number of columns of a
    int tab_cols=2*tab_rows+2;  // 2*tab_rows+2 is the number of columns of tab

    if( (col<a_cols) && (row<a_rows) ) 
    {
        // Load the data into shared mem
        tile[threadIdx.x+threadIdx.y*(16+1)]=a[IDX2L(row,col,a_cols)];

        // Normal copy (+ offsets)
        tab[IDX2L(row,col+tab_rows+a_rows,tab_cols)]= tile[threadIdx.x+threadIdx.y*(16+1)];

        // New idx
        col_2 = blockIdx.y * blockDim.y + threadIdx.x;
        row_2 = blockIdx.x * blockDim.x + threadIdx.y;
    }
    __syncthreads();

    if( (row_2<a_cols) && (col_2<a_rows) )
        // Transpose (+ other offsets)
        tab[IDX2L(row_2+a_rows,col_2+tab_rows,tab_cols)]= -tile[threadIdx.y+threadIdx.x*(16+1)];

} 
```

启动参数如下：

```
b1=(int)ceil((float)a_cols/16);
b2=(int)ceil((float)a_rows/16);
dim bck(b1,b2):dim th(16,16);

cuda_a_Coalesced<<<bck,th>>>(tab,tab_rows,a_rows,a); 
```

无论大小如何，普通副本总是能很好地执行。转置副本仅适用于块大小的整数倍的大小（如 SDK 示例中所示）。当转置复制失败时，某些操作是正确的，而另一些则不是，我无法准确预测或跟踪。请注意，该想法是更改共享内存中的索引，以便可以将转置以合并形式写入输出矩阵（由于行主格式）。

有人可以告诉我为什么代码只适用于那种尺寸的原因吗？

有什么技巧可以解决这种情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T13:27:10.670

问题是由于一些未定义的线程，因为 col_2 和 row_2 的值是在没有所有线程都访问的 if() 语句中分配的。

为了解决这种情况，我们可以在声明这些变量时为 col_2 和 row_2 赋值，并删除上述 if() 中的同调计算：

```
__shared__  double tile[16*(16+1)];

int col = threadIdx.x + blockIdx.x * blockDim.x;
int row = threadIdx.y + blockIdx.y * blockDim.y;

int col_2 = blockIdx.y * blockDim.y + threadIdx.x;
int row_2 = blockIdx.x * blockDim.x + threadIdx.y;

int a_cols=tab_rows-a_rows; 
int tab_cols=2*tab_rows+2; 
```

因此，其余代码如下所示：

```
if( (col<a_cols) && (row<a_rows) ) 
{
    // Load the data into shared mem
    tile[threadIdx.x+threadIdx.y*(16+1)]=a[IDX2L(row,col,a_cols)];
    // Normal copy (+ offsets)
    tab[IDX2L(row,col+tab_rows+a_rows,tab_cols)]= tile[threadIdx.x+threadIdx.y*(16+1)];
}
__syncthreads();

if( (row_2<a_cols) && (col_2<a_rows) )
    // Transpose (+ other offsets)
    tab[IDX2L(row_2+a_rows,col_2+tab_rows,tab_cols)]= -tile[threadIdx.y+threadIdx.x*(16+1)]; 
```

# php - 如何在 PHP 中从数组中检索数据

> ID：13208984
> 
> 赞同：1
> 
> 时间：2012-11-03T12:04:23.740
> 
> 标签：php, mysql, arrays, string

我已经使用从逗号分隔的字符串变量中的explode 填充了一个数组。现在我需要访问数组中的数据。

**我用了：**

```
print_r($values); // to see how the data was stored
//output
Array ( 
  [0] => Array ( 
         [0] => 1rv09is001 
         [1] => 07IS72 ) 
  [1] => Array ( 
         [0] => 1RV09IS064   
         [1] => 07IS72 ) 
) 
```

**我试过：**

```
$a = count($values);
for($i;$i<$a;$i++){
$sql="UPDATE subject 
      SET attendance=attendance+1 
      WHERE usn=$values[$i][0] AND subCode=$values[$i][1]
     ";

echo "$sql";
mysql_query($sql);
} 
```

它不工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:11:58.863

在字符串内部使用时，复杂的变量名（或数组）需要用大括号括起来。此外，MySQL 中的字符串需要用引号（单引号`'`或双引号`"`）指定：

```
$a = count($values);
for ($i = 0; $i < $a; $i++) {
    $sql = "UPDATE subject SET attendance=attendance+1 WHERE usn='{$values[$i][0]}'  AND subCode='{$values[$i][1]}'";
    echo "$sql";
    mysql_query($sql);
} 
```

此外，在 for 循环中使用时，您需要`$i`使用一个值进行初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T12:08:22.640

更新您的 SQL 语句：

```
$sql = "UPDATE subject SET attendance = attendance+1 where usn='" . $values[$i][0] . "' and subCode='" . $values[$i][1] . "'"; 
```

据我所见， $values 包含字符串值，需要在 SQL 中引用。此外，转义`" . $variable . "`数组访问也很有帮助。

在本地进行了测试，并且可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T12:13:12.480

You should quote strings that goes into your sql (also you should escape them). [http://dev.mysql.com/doc/refman/5.0/en/entering-queries.html](http://dev.mysql.com/doc/refman/5.0/en/entering-queries.html)

# php - php表单验证逻辑错误

> ID：13208987
> 
> 赞同：1
> 
> 时间：2012-11-03T12:04:37.763
> 
> 标签：php, validation

很大程度上基于[此电子邮件验证代码](http://www.freecontactform.com/email_form.php)（有效 - 我已经测试过）

```
<?php

require_once("include/connectionpdo.php"); 

echo("<h2>parsed1</h2> ");

function died($error) {
    // your error code can go here
    echo "We are very sorry, but there were error(s) found with the form you submitted. ";
    echo "These errors appear below.<br /><br />";
    echo $error."<br /><br />";
    echo "Please go back and fix these errors.<br /><br />";
    echo "If you have fixed any possible errors, and you believe that there is a problem with our submission system, please ";
    die();
    }

   echo("<h2>parsed2</h2> ");

   // first checks to see if any information is supplied at all in the required fields 
    if(!isset($_POST['first_name']) ||
        !isset($_POST['last_name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['phone']) ||
        !isset($_POST['addressl1']) ||
        !isset($_POST['addressl2']) ||
        !isset($_POST['town']) ||
        !isset($_POST['county']) ||
        !isset($_POST['type']))
    {
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    }

    echo("<h3>parsed3</h3> ");

    $first_name = $_POST['fname']; // required
    $last_name = $_POST['sname']; // required
    $email_from = $_POST['email']; // required
    $telephone = $_POST['phone']; // not required
    $dateofbirth = $_POST['dob']; // required
    $addresslone = $_POST['addressl1']; // required
    $addressltwo = $_POST['addressl2']; // required
    $townnm = $_POST['town']; // required
    $countynm = $_POST['county']; // required     
    $typeapp = $_POST['type']; // required
    $issubscribed = $_POST['subscribed']; // required

    // checks to see if information supplied is correct

    echo("<h4>parsed4</h4> ");

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
    $number_exp = '/^[0-9]/';  
  if(!preg_match($email_exp,$email_from)) {
    echo("errortest1 ");
    $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
  }
    $string_exp = "/^[A-Za-z .'-]+$/";
  if(!preg_match($string_exp,$first_name)) {
    echo("errortest2 ");
    $error_message .= 'The First Name you entered does not appear to be valid.<br />';
  }
  if(!preg_match($string_exp,$last_name)) {
    echo("errortest3 ");
    $error_message .= 'The Last Name you entered does not appear to be valid.<br />';
  }
    $number_exp = '/^[0-9]/';  
  if(!preg_match($string_exp,$last_name)) {
    echo("errortest4 ");
    $error_message .= 'Please just enter numerical values for your phone number.<br />';
  }

  if(strlen($addresslone) < 2) {
    echo("errortest5 ");
    $error_message .= 'The address (line one) you entered do not appear to be valid.<br />';
  }
   if(strlen($addressltwo) < 2) {
    echo("errortest6 ");
    $error_message .= 'The address (line two) you entered do not appear to be valid.<br />';
  } 
  if((!preg_match($string_exp,$townnm)) || (strlen($townnm) < 2)) {
    echo("errortest7 ");
    $error_message .= 'The town you entered does not appear to be valid.<br />';
  } 
  if((!preg_match($string_exp,$countynm)) || (strlen($countynm) < 2)) {
    echo("errortest8 ");
    $error_message .= 'The county you entered does not appear to be valid.<br />';
  } 

  if(strlen($error_message) > 0) {
    died($error_message);
  }

# the data we want to insert
$data = array($first_name, $second_name, $email_from, $telephone, $dateofbirth, $addresslone, $addressltwo, $townnm, $countynm, $typeapp, $issubscribed);
$STH = $DBH->prepare("INSERT INTO members (fname, sname, email, phone, dob, addressl1, addressl2, town, county, type, subscribed) values (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)");
$STH->execute($data);

?>
<!--<!DOCTYPE html>
<head><title></title></head><body> -->

Thank you for contacting us  We will be in touch with you very soon.

<!-- </body></html> --> 
```

代码打印出“parsed 2”，但并没有走得更远。

function dead 运行，但仅打印附加的通用消息“'我们很抱歉，但您提交的表单似乎有问题。”

奇怪的是 !isset 似乎总是返回 true （不管表单中的表单信息是什么）。我删除了所有 if !isset 块，这导致打印“parsed 3”、“parsed 4”、“errortest1”和“您输入的电子邮件地址似乎无效”。同样，这与表单中的电子邮件地址是否符合规定条件无关。删除 if!preg_match 语句会导致生成错误消息

> “致命错误：在第 88 行的 public_html/application4.php 中的非对象上调用成员函数 prepare()”

.

没有语法错误，或者至少如果有任何语法错误，它们只会产生逻辑错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:13:59.230

恕我直言，您已更改`first_name`和`last_name`字段的名称，因此如果设置了条件中的所有字段，则以下代码应返回 false：

```
if(!isset($_POST['fname']) ||
        !isset($_POST['sname']) ||
        !isset($_POST['email']) ||
        !isset($_POST['phone']) ||
        !isset($_POST['addressl1']) ||
        !isset($_POST['addressl2']) ||
        !isset($_POST['town']) ||
        !isset($_POST['county']) ||
        !isset($_POST['type']))
{
        died('We are sorry, but there appears to be a problem with the form you submitted.');       
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T12:29:08.200

在您的代码中查看差异或变量名称。

后`echo("<h2>parsed2</h2> ");`

你用过
`!isset($_POST['first_name']`

之后`echo("<h3>parsed3</h3> ");`

你用过

```
$first_name = $_POST['fname']; // required 
```

' **first_name** '如何变成' **fname** '？

first_name 将用于代码或 fname 将用于代码。

与此相同，**last_name**变为**sname**。为此更新代码并再次测试。

# r - 添加汇总值的列，直到该行

> ID：13208989
> 
> 赞同：0
> 
> 时间：2012-11-03T12:04:52.300
> 
> 标签：r, sum, dataframe

假设我有一个`df`包含一列的数据框，即`time`. 现在，我想在数据框中添加一个新列，`accumulated`如下所示，它总结了`df.time`每一行的值。

```
 time     accumulated
1   10       10
2   12       22
3   14       36
4   6        42 
```

一个快速的提示会非常好！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-03T12:07:02.200

对于这些简单的任务，通常有一个内置函数。当然，了解数学运算的名称有助于找到这些函数。你想要累积总和。

```
df <- data.frame(time=c(10,12,14,6))

df$accumulated <- cumsum(df$time)

#  time accumulated
#1   10          10
#2   12          22
#3   14          36
#4    6          42 
```

# outlook - Microsoft Office 验证加载项已加载

> ID：13208991
> 
> 赞同：0
> 
> 时间：2012-11-03T12:05:03.373
> 
> 标签：outlook, ms-office, outlook-addin, office-addins

我们为 microsoft office 开发了一个 COM 插件。我们希望确保在 Office 应用程序启动时加载我们的加载项（这意味着没有人试图在注册表中禁用它）。我们当前的解决方案是，我们正在使用一个外部应用程序，插件应该在特定时间后与之通信，从办公应用程序启动的第二个开始计算。如果它没有通信，那么我们停止办公应用程序，在注册表中验证我们应该加载，然后重新启动它。这是一个有问题的系统，因为没有人能猜出什么是合适的等待时间，而且你不想在工作 10 分钟后给用户，突然一个错误，更不用说添加对我们很重要-in 将尽快加载。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-04T12:32:45.973

也许是一个肮脏的解决方案，但您可以等到 Outlook 主窗口的标题从“正在打开 Outlook”变为其他内容？

![任务管理器中的 Outlook。](../Images/6d634d8480322fcfe53a311210fe22ab.png)

上面的屏幕截图是从我在 Outlook 仍在我的机器上加载时截取的屏幕截图。

因此，也许可以轮询 Outlook 的进程，获取它的主窗口标题并查看它是否包含正在打开。非常肮脏的解决方案，可能有两个缺陷：

1.  本地化的 Outlook 可能会显示不同的消息。
2.  您可能会错过打开消息，具体取决于查询进程、获取主窗口以及您的计时器间隔需要多少时间。

我认为在“打开”消息消失后​​ - 所有加载项都应该加载，前提是它们没有被禁用。

也许 Outlook 进程的 MainWindowTitle 属性将是检查“打开消息”的属性。还没试过：

[Process.MainWindowTitle 属性 - MSDN](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.mainwindowtitle.aspx)

更新：这有望解决 Outlook 在启动现有加载项之前正在执行一些数据完整性检查或类似事情的情况，但在考虑这种方法安全之前，您确实应该进行大量测试......

希望这会有所帮助，让我们知道它是否有效，以便我们在需要时也可以使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T02:02:23.617

如果这确实是您的“监护人”应用程序正在做的事情，您可能需要重新考虑该方法。1\. 为什么要在检查注册表之前停止office应用？2\. 如果您的检查通过了，但插件仍然没有运行，您会怎么做？

我建议如下： 1\. 如果加载项运行如此重要，请用您的应用程序替换 Office 应用程序快捷方式（如果可以，例如公司环境） 2.在关闭 Office 应用程序*之前*检查注册表，以便您可以执行无需等待 3\. 尝试在“guradian”应用程序中模拟办公应用程序 - 创建实例并检查是否加载了加载项

使用任何方法，这听起来都像是公司规则执行，在这种情况下，您可以控制快捷方式和办公应用程序的安装，或者过于强大的商业软件，在这种情况下 - 想想（即，这是正确的方法）。

高温高压

# c# - ANTLR 语法教程

> ID：13208995
> 
> 赞同：-3
> 
> 时间：2012-11-03T12:05:15.250
> 
> 标签：c#, antlr, antlrworks

> **可能重复：**
> [ANTLR 3.3 C# 教程？](https://stackoverflow.com/questions/4396080/antlr-3-3-c-sharp-tutorials)

我想为 C# 应用程序创建语法，但我对 ANTLR 一无所知。有人知道关于定义规则并将它们构建到`.cs`文件中的任何好的教程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T12:22:10.770

我认为[这](http://www.amazon.com/gp/search?index=books&linkCode=qs&keywords=0978739256)是关于 ANTLR 解析器生成器的最好的书。我在编写自己的 MSIL 编译器时阅读了这本书。您还可以查看[我的 .g 语法的编译器](http://code.google.com/p/wlcompiler/)（它可能无法正常工作）作为示例。

ps

官方 ANTLR 项目网站分享了关于语法规则和解析器生成的好示例。

# c# - 规避数据库表中已删除的数据集行

> ID：13208996
> 
> 赞同：1
> 
> 时间：2012-11-03T12:05:17.150
> 
> 标签：c#, .net, winforms, c#-4.0, dataset

我不知道该保留什么标题（仍然感到困惑，对此感到抱歉）。在我的项目中，我试图通过`DataSet`. 好吧，我实现了这一点，但是当我删除我的任何行`DataSet`并尝试更新数据库表时，VS 显示错误->“无法通过该行访问已删除的行信息”。然后我在互联网上搜索我得到了这个[答案](https://stackoverflow.com/q/4321840)的解决方案。现在我的代码没有显示任何错误，但令我感叹的是，数据库正在使用`DataSet`现有和**已删除**的新值进行更新。我不想将已删除的行添加`Dataset`到数据库表中。如何解决这个问题？

在我使用的代码中`DataRowVersion.Original`，我应该更改它吗？我还尝试了其他值`DataRowVersion`但没有结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T12:27:11.517

//是的，在将值插入数据库之前，您必须进行一些检查

```
 foreach (DataRow row in ds.Tables["Table_Name"].Rows)
        {
            if (row.RowState != DataRowState.Deleted)
            {
                if (row.RowState == DataRowState.Added)
                { 
                    // Perform insertion in to database
                }
                if (row.RowState == DataRowState.Modified)
                { 
                    // perform updation in to databse
                }
            }
        } 
```