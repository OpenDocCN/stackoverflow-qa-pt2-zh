# StackOverflow 问答 14692000-14692999

# javascript - RequireJS：查找导致错误的脚本

> ID：14692000
> 
> 赞同：17
> 
> 时间：2013-02-04T17:24:11.077
> 
> 标签：javascript, requirejs

我正在寻找一种优雅的方法来找出导致超时错误（即无法加载依赖项）的脚本的完整路径。

```
requirejs.onError = function (err) {

   // this works:
   var script_that_failed_loading = err.originalError.target.src

   // now I want:
   var the_script_responsible_for_this = <???>

}; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-18T12:14:19.173

使用[加载器级别的错误返回](http://requirejs.org/docs/api.html#errbacks)

```
require(["foo","bar"],function(foo,bar){
  // perform some action
},function(error){
  // handle error here
}); 
```

请注意，失败的模块名称在`error.requireModules`. 这样的错误反馈既可以用于加载器，也可以用于模块。如果您有多个资源的后备路径，请使用[path fallbacks](http://requirejs.org/docs/api.html#pathsfallbacks)。

根据我的个人经验，我谦虚地不同意**ddotsenko**。我们在生产环境中使用 RequireJS。如果设置正确，RJS 非常可靠。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-05T18:52:51.533

RequireJS 选择了一种有点不可靠的、不连贯的机制来捕获错误。它使用计时器来查看它是否期望得到它。其他一些 AMD 加载程序使用其他更直接的机制来检测加载期间的错误情况。

我首选的 AMD 加载程序是[CurlJS](https://github.com/cujojs/curl)，它通过硬连线来捕获加载/解析错误。

由于架构选择，它更可靠地检测错误条件，您可以将错误处理程序直接附加到每个`require`调用。如果诸如错误捕获之类的东西对您很重要，我强烈建议您查看 CurlJS。

# postgresql - 在 postgresql 中按 boxcolumn 排序查询

> ID：14692007
> 
> 赞同：2
> 
> 时间：2013-02-04T17:24:40.337
> 
> 标签：postgresql, postgresql-9.1

我无法从 pgsql 9.1 上包含 BOX 类型列的表中进行选择

```
create table test (t box);
CREATE TABLE
select * from test order by t;
ERROR:  could not identify an ordering operator for type box
LINE 1: select * from test order by t;
                                     ^
TIP:  Use an explicit ordering operator or modify the query. 
```

我发现有一类运算符（box_ops）应该处理排序和相等性，甚至尝试为列创建显式索引。

```
create index testx on test using gist (t box_ops);
CREATE INDEX 
```

但问题仍然存在。我错过了什么？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:30:03.020

您必须明确指定一个运算符。例如：

```
SELECT * FROM test ORDER BY t USING &< 
```

您必须确定实际需要的排序并选择相应的比较运算符。

中定义的运算符`box_ops`可在[http://www.leadum.com/downloads/dbscribe/samples/postgresql/web_modern/opclass/main/1325676015.html获得](http://www.leadum.com/downloads/dbscribe/samples/postgresql/web_modern/opclass/main/1325676015.html)

另见：[http ://www.postgresql.org/docs/current/interactive/functions-geometry.html](http://www.postgresql.org/docs/current/interactive/functions-geometry.html)

# c++ - 避免编译 ISO C++

> ID：14692008
> 
> 赞同：1
> 
> 时间：2013-02-04T17:24:41.473
> 
> 标签：c++, compilation, compiler-errors

默认情况下，在 Ubuntu 上，当我尝试使用 g ++ 进行编译时，例如：

```
g++ -o name file.cpp 
```

有时它会以“ISO C++ 禁止...”作为响应。

如果我不想用 ISO 编译，我应该使用什么标志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:26:38.963

利用

```
g++ -std=c++0x 
```

或者

```
g++ -std=gnu++0x 
```

注意：如果您专有启用扩展，您的代码将变得不那么可移植。

> C++11 功能在 GCC 的 Subversion 存储库的主干以及 GCC 4.3 及更高版本中作为“主线”GCC 编译器的一部分提供。要启用 C++0x 支持，请将命令行参数 -std=c++0x 添加到 g++ 命令行。或者，要启用除 C++0x 扩展之外的 GNU 扩展，请将 -std=gnu++0x 添加到您的 g++ 命令行。GCC 4.7 及更高版本也支持 -std=c++11 和 -std=gnu++11。

见[http://gcc.gnu.org/projects/cxx0x.html](http://gcc.gnu.org/projects/cxx0x.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:27:21.770

如果要使用 gcc/g++ 扩展，请使用`-std=gnu++0x`. 当然，假设这不是“您实际上不能在 C++ 中执行此操作”的情况。

# ruby-on-rails - Rails - Postgresql - 全文搜索 - Railscasts 343

> ID：14692009
> 
> 赞同：0
> 
> 时间：2013-02-04T17:24:45.750
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, full-text-search

我正在关注 PostgreSQL 中的 Railscasts #343 Full-Text Search，一开始我遇到了一个问题。

我在我的模型中替换了这一行：

```
where("name ilike :q or content ilike :q", q: "%#{query}%") 
```

经过

```
where("name @@ :q or content @@ :q", q: query) 
```

但是，它仍然没有像他在 railscasts 中那样执行搜索。如果名称中有“FOO”，内容中有“BAR”，如果我搜索“FOO BAR”，则结果为空。（就像旧代码和“ilike”函数一样）

SQL 请求如下所示：

```
* FROM "posts" where (name @@ 'foo bar' or content @@ 'foo bar') 
```

我在 Windows 7 x64 上使用 PostgreSQL 9.2.2、Rails 3.2.6 和 Ruby 1.9.3p125。

提前谢谢。

**编辑**

我的宝石文件：

```
 source 'https://rubygems.org'

gem 'rails', '3.2.6'

gem 'pg'
gem "ransack"

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

我删除了所有评论的行。

PS：为了清楚起见，在我添加“ransack”之前，我遇到了同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T02:57:15.793

在 Ryan 的示例中，文章必须同时包含超人和字符才能在结果中返回。这不是我认为你想要的方式的 OR。这就是全文搜索的用武之地（在这一集的后面）

我只是几乎完全按照 railscast 代码*。

这段代码

```
class Article < ActiveRecord::Base
  attr_accessible :content, :title

  def self.text_search(query)
    if query.present?
      where("title @@ :q or content @@ :q", q: query)
    else
      scoped
    end
  end
end 
```

生成此 SQL

```
SELECT "articles".* FROM "articles" WHERE (title @@ 'because' or content @@ 'because') 
```

哪个有效并返回标题或内容中包含“因为”的文章

*   我使用“标题”而不是名称

# c# - Techart 多轴创建

> ID：14692012
> 
> 赞同：0
> 
> 时间：2013-02-04T17:24:53.453
> 
> 标签：c#, teechart

我是 C# 编程的新手。我在一家公司工作，有人完成了一些任务并留下了图表部分。现在我必须这样做。

我在 C# 中使用 steema 图表，我想创建图表左侧有多个轴（y 轴）和所有的 x 轴。Lest 侧的每个轴将是不同的轴长度。

我为不同的传感器创建了六个复选框，当我勾选该框时，应该出现关于默认长度的轴。我已经创建了复选框，但我无法设置轴长度，也无法绘制多个轴。

不知道这样问合适吗？如果我错了，请原谅我？如果我没有提供太多信息，请问我我会做的。

我想绘制如附图所示的图表类型。X 轴（系统时间）对于所有系列都是通用的，而 Y 轴对于每个系列都是不同的。我有所有系列的复选框，所以当复选框选中时，该系列 Y 轴必须显示默认轴范围（例如 min (0) 和 max (1000)）。 ![图表](../Images/6097beaa3ff1a40fffcc51a287ba1bd0.png)

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T10:28:50.197

前段时间在 Steema 支持论坛中讨论了非常相似的事情。给它看看[这里](http://www.teechart.net/support/viewtopic.php?f=4&t=13347&p=58286#p58286)。

我在这里发布相同的代码：

```
 int nSeries = 3;
    private void InitializeChart()
    {
        tChart1.Aspect.View3D = false;
        tChart1.Header.Visible = false;
        tChart1.Legend.Alignment = LegendAlignments.Bottom;
        for (int i = 0; i < nSeries; i++)
        {
            new Steema.TeeChart.Styles.Line(tChart1.Chart);
            tChart1.Axes.Custom.Add(new Steema.TeeChart.Axis(tChart1.Chart));
            tChart1[i].CustomVertAxis = tChart1.Axes.Custom[i];
            tChart1.Axes.Custom[i].AxisPen.Color = tChart1[i].Color;
            tChart1.Axes.Custom[i].Grid.Visible = false;
            tChart1.Axes.Custom[i].Title.Visible = true;
            tChart1.Axes.Custom[i].Title.Caption = "Series" + i.ToString();
            tChart1[i].FillSampleValues(20);
            tChart1.Axes.Custom[i].PositionUnits = PositionUnits.Pixels;
        }

        tChart1.Panel.MarginUnits = PanelMarginUnits.Pixels;
        tChart1.Draw();
        PlaceAxes(0, 0, 0, 0, 0);
        tChart1.Draw();
    }

    private void PlaceAxes(int nSeries, int NextXLeft, int NextXRight, int MargLeft, int MargRight)
    {
        const int extraPos = 12;
        const int extraMargin = 105;
        //Variable
        int MaxLabelsWidth;
        int lenghtTicks;
        int extraSpaceBetweenTitleAndLabels;
        if (tChart1[nSeries].Active)
        {
            MaxLabelsWidth = tChart1.Axes.Custom[nSeries].MaxLabelsWidth();
            lenghtTicks = tChart1.Axes.Custom[nSeries].Ticks.Length;
            extraSpaceBetweenTitleAndLabels = (tChart1.Axes.Custom[nSeries].Title.Width);//- tChart1.Axes.Custom[nSeries].MaxLabelsWidth());
            if (tChart1.Axes.Custom[nSeries].OtherSide)
            {
                tChart1.Axes.Custom[nSeries].RelativePosition = NextXRight;
                NextXRight = NextXRight - (MaxLabelsWidth + lenghtTicks + extraSpaceBetweenTitleAndLabels + extraPos);
                MargRight = MargRight + extraMargin;
            }

            else
            {
                tChart1.Axes.Custom[nSeries].RelativePosition = NextXLeft;
                NextXLeft = NextXLeft - (MaxLabelsWidth + lenghtTicks + extraSpaceBetweenTitleAndLabels + extraPos);
                MargLeft = MargLeft + extraMargin;
            }

            tChart1.Panel.MarginLeft = MargLeft;
            tChart1.Panel.MarginRight = MargRight;

            nSeries++;

            if (nSeries <= tChart1.Series.Count - 1)
            {
                PlaceAxes(nSeries, NextXLeft, NextXRight, MargLeft, MargRight);
            }
        }
    } 
```

# php - Singletons - 在简单的基于 PHP 的 CMS 中使用它们

> ID：14692016
> 
> 赞同：0
> 
> 时间：2013-02-04T17:25:03.400
> 
> 标签：php, singleton

我读过很多关于单例的文章，大多数人都认为它们是不好的做法，并且要尽可能避免它们。大多数人这样说是因为很难调试使用它们的应用程序。

现在，创建一个简单的 CMS，我尝试了一些方法，在我看来它们是最好的选择。

1.  配置数据

该文件在应用程序启动时加载，我看不出在整个应用程序中调用配置数据时为什么不使用单例模式？

1.  请求数据

请求数据应该存储来自 php 服务器变量（POST、GET、COOKIE）的所有信息，因此它可以用于在整个应用程序中使用单例读取和写入（例如cookies）数据。

1.  响应缓冲区

我想使用响应类（作为单例）来保存我的模板呈现的所有数据。因此应用程序可以加载所有视图，一一渲染它们并将回显的数据存储在响应类中，最后输出存储在响应中的整个文档。

所有示例的问题：A）这真的是不好的做法，为什么？我在这里看不到邪恶。B）有替代/更好的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:31:16.567

> 这真的是不好的做法吗？为什么，因为我在这里没有看到邪恶？

设计模式是建议，而不是标准。您可以使用它们，讨厌它们，称它们为“反模式”并做任何您想做的事情，但这只是您的意见。四人团伙和那里的任何博主都像你一样表达他们对它的看法，你猜怎么着？没关系。

与其问自己是否有人认为这是一种不好的做法，不如问问自己：“我认为这是一种不好的做法吗？”。如果答案是否定的，那就去吧。

我建议您在做出此决定之前阅读双方（支持单身人士和反对单身人士）并对此发表自己的看法。但最终没有*正确*的答案，这只是**你**决定的问题。

> 有替代（更好）的方式吗？

一般来说，我倾向于使用依赖注入而不是单例。但是，如果我无法使用 DI 并且 Singleton 对我来说是一个选择，那么我肯定会选择它。我的建议是学习最重要的模式，并在特定的上下文中使用对你有意义的任何东西。

# java - 触发意图的日历事件？

> ID：14692017
> 
> 赞同：0
> 
> 时间：2013-02-04T17:25:03.503
> 
> 标签：java, android, api, android-intent, calendar

我正在编写一个应用程序，基本上我需要知道是否有某种方法可以在谷歌内置日历中添加日历事件时触发我的应用程序的意图。为了清楚起见，我不希望我的应用程序在后台运行。添加的日历事件将触发我的应用程序唤醒。

干杯，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:31:48.187

添加事件时，日历应用程序不会发送意图。您所能做的就是使用此处所述的意图读取和写入日历数据：http: [//developer.android.com/guide/topics/providers/calendar-provider.html#intents](http://developer.android.com/guide/topics/providers/calendar-provider.html#intents)

# qt - 由于不同版本的 MSVC 和 Qt 库导致链接错误

> ID：14692019
> 
> 赞同：3
> 
> 时间：2013-02-04T17:25:09.227
> 
> 标签：qt, qt5

我在使用 MSVC 2012 编译器编译 Qt 项目时遇到问题。我先下载了 Qt，然后意识到我还没有合适的编译器，然后下载了 Microsoft Visual Studio Express 2012 及其 msvc 编译器。但是，每当我尝试在 Qt Creator 中编译某些内容时，都会出现以下错误：

```
qtmain.lib(qtmain_win.obj):-1: LNK2038: mismatch detected for '_MSC_VER': value '1600' doesn't match with value '1700' in glwidget.obj 
```

所以我对这意味着什么的理解是我的 Qt 库与我的 msvc 编译器的版本不同（旧）。但我不确定如何修复它，或者如何获取其他/更新的库。一些谷歌搜索告诉我，添加到 Qt .pro 文件中的以下代码应该可以解决问题：

```
QMAKE_COMPILER_DEFINES  += _MSC_VER=1700 WIN32 
```

但这没有任何效果。此外，使用 '1600' 而不是 '1700' 也无济于事。有什么想法吗？

我正在使用 32 位 Windows 7 系统，如果有帮助的话，我正在使用 Qt 5.0.0。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:02:31.900

您需要为 Visual Studio 2012 编译的二进制文件。由于没有可用的官方（或非官方）预编译二进制文件，您需要自己编译它们。

[这应该不是一个复杂的过程](http://qt-project.org/wiki/Building_Qt_5_from_Git)，但是对于初学者来说可能很难并且**令人沮丧**，所以我建议您按照已经给出的建议并下载 VS2010（毕竟下载和安装它比下载和安装它花费的时间更少）从源代码编译 Qt）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:34:02.787

您必须使用 MSVC 2010，因为库是使用它构建的。试试[Visual C++ 2010 速成版](http://www.microsoft.com/visualstudio/eng/downloads#d-2010-express)。

# c# - 严格类型视图中的下拉菜单

> ID：14692021
> 
> 赞同：-1
> 
> 时间：2013-02-04T17:25:10.367
> 
> 标签：c#, asp.net-mvc, linq, razor, asp.net-mvc-4

我正在使用 MVC 4、LINQ to SQL 和 Razor 语法创建一个 C# 应用程序。

我创建了一个类，它根据请求的 id 获取数据库中给定行的内容。

我制作了一个具有 get 和 post 处理程序的控制器。我基于其中一个模型类创建了一个强类型视图，一切都很好。数据被检索并显示在表单中。数据可以更新和提交。

问题是下拉菜单。我不希望它显示 id 的文本字段。我想要下拉菜单。我有大约五个下拉菜单，全部从数据库中生成。我已经创建了模型来创建它们。

我可以使用 ViewData 或 ViewBag 毫无问题地传入下拉列表。但是，当用户加载页面时，如何选择选定的选项？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:27:56.400

MVC 中的“模型”应该为*页面*建模，而不是您的数据。如果您的页面上有下拉列表，那么您的模型上应该有一个表示选择的某种集合（可能是 a `List<T>`），以及表示所选值的另一个属性。此属性将用于填充下拉列表的初始值以及将所选值发送回控制器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:54:38.397

我建议避免使用 ViewData 或 ViewBag 来支持[ViewModel](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)。

[ViewModel](http://geekswithblogs.net/michelotti/archive/2009/10/25/asp.net-mvc-view-model-patterns.aspx)本质上是一个混合模型，它将 View 需要的所有数据聚合到一个实体中。而不是将视图输入到模型并传递视图所需的附加信息，这些信息不在 ViewData 或 ViewBag 中的模型中，而是在模型中输入视图所需的一切。

在您的情况下，ViewModel 可能看起来像这样：

```
public class MyViewModel
{
    public DropDown1 DropDownA { get; set; }
    public DropDown2 DropDownB { get; set; }
    public Model ModelData { get; set; }
}

public class DropDown1
{
    public int SelectedValue { get; set; }
    public List<T> DropDownValues { get; set; }
}

public class DropDown2
{ 
    public int SelectedValue { get; set; }
    public List<T> DropDownValues { get; set; }
} 
```

您的视图将通过键入到`MyViewModel`. 此时，将下拉菜单的数据源设置为 ViewModel 中的下拉菜单并设置 SelectedValue 将是微不足道的。

# javascript - CSS 是样式化 HTML 文档的唯一方法吗？

> ID：14692027
> 
> 赞同：4
> 
> 时间：2013-02-04T17:25:18.837
> 
> 标签：javascript, html, css

我是一个初学者的网页设计师。我知道 HTML、CSS 和 Javascript 的基础知识。我知道 CSS 用于设置 HTML 文档的样式，但这是唯一的方法吗？我可以以某种方式使用 JavaScript 来设置 HTML 样式吗？或者有没有其他方法而不是 CSS ？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T17:27:08.927

JavaScript 是一种脚本语言，而不是样式语言。虽然您可以使用 JavaScript 来应用 CSS，但定义样式的仍然是 CSS，而不是 JavaScript。

[很久以前就](http://www.w3.org/TR/REC-html32)存在 HTML 表示属性，但已被 CSS 取代。你仍然可以使用它们，而不是你想要的，考虑到它们很可能会被翻译成 CSS。

也存在使用自定义语言的 CSS 预处理器，例如[Sass/SCSS](http://sass-lang.com)、[LESS](http://lesscss.org)和[Stylus](http://learnboost.github.com/stylus)，但它们也都编译为 CSS，因为那是浏览器实际实现的。因此，即使您使用这些预处理器，归根结底您仍在“编写”CSS。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T17:27:52.267

> 我知道 CSS 用于设置 HTML 文档的样式，但这是唯一的方法吗？

这是唯一明智的方法

> 我可以以某种方式使用 JavaScript 来设置 HTML 样式吗？

您可以使用 JavaScript 生成 CSS。（不建议用于一般样式）。

如果您只针对 Netscape 4.x，则可以使用[JSSS 。](http://en.wikipedia.org/wiki/JavaScript_Style_Sheets)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T17:27:29.490

您还可以使用 HTML 属性本身设置 HTML 样式，但这种方式非常不切实际且过时。这些技术中的大多数已被弃用，功能非常有限。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T17:28:15.543

我想您的问题的正确答案是否定的，因为 html 本身包含一些基本样式元素。但是 CSS 是设置文档样式的最佳方式，您绝对应该学习和使用它。一旦您习惯了使用 CSS，请尝试使用[Twitter bootstrap](http://twitter.github.com/bootstrap/)等框架来让您的生活更轻松。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T17:29:05.290

这不是唯一的方法，而是推荐的方法。您可以在 html 标签中包含样式，但它会变得混乱。这就是 CSS 被发明的原因，所以使用它！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T18:36:09.320

如前所述，CSS 不是样式化 HTML 的唯一方法，但绝对是标准。如果您正在寻找一种使用 JavaScript 的更加程序化的方式，您可以查看[less](http://lesscss.org/) which (直接取自网页) ...使用动态行为扩展 CSS，例如变量、mixin、操作和函数以及函数一对一映射使用 JavaScript 代码，允许您随心所欲地操作值。

# linux - 如何安装 oracle-rdbms-server-11gR2-preinstall

> ID：14692028
> 
> 赞同：3
> 
> 时间：2013-02-04T17:25:25.407
> 
> 标签：linux, oracle11g

刚刚`oracle linux 6 update 2`在我的虚拟机上完成安装，我一直在尝试`oracle 11gr2`在同一个操作系统上安装我正在按照安装指南进行操作，但是当我在终端上运行此命令时遇到了一些问题

```
yum install oracle-rdbms-server-11gR2-preinstall 
```

我收到一个错误

```
no package oracle-rdbms-server-11gr2-preinstall available
error nothing to do 
```

有什么办法我做错了吗？我该如何安装`oracle-rdbms-server-11gR2-preinstall`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T17:35:43.143

**您似乎没有配置 oracle 存储库，请执行以下操作：**

作为授权用户（例如 root），检索配置存储库位置的文件：

```
$sudo cd /etc/yum.repos.d

$sudo wget http://public-yum.oracle.com/public-yum-ol6.repo 
```

使用文本编辑器修改文件，更改字段`enabled=0`以`enabled=1`反映与机器操作系统版本相对应的存储库。

接下来，`oracle-rdbms-server-11gR2-preinstall`使用 yum install 命令安装 RPM。

清单 1 中的输出显示了安装如何检查依赖关系，然后下载并安装所需的包。

```
$sudo yum install oracle-rdbms-server-11gR2-preinstall 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-10T08:25:15.853

```
mv /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle-ol6.repo /etc/pki/rpm-gpg/RPM-GPG-KEY-oracle.repo 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-20T01:37:10.113

我给了：

```
yum install oracle-rdbms-server-11gR2-preinstall.x86_64 
```

并且完美地工作

# python - 查找所有字母组合，从字典中的不同键中选择每个字母

> ID：14692029
> 
> 赞同：1
> 
> 时间：2013-02-04T17:25:28.183
> 
> 标签：python, algorithm, dictionary, iteration, permutation

假设我们有这个数据结构：

```
class Lock:
def __init__(self):
    self.data1 = ['a', 'd', 'e', 'l', 's']
    self.data2 = ['s', 'i', 'r', 't', 'n']
    self.data3 = ['b', 'o', 'e', 'm', 'k']
    self.data4 = ['f', 'y', 'u', 'n', 'g'] 
```

或者，

```
d = {'1': ['a', 'd', 'e', 'l', 's'], '2': ['s', 'i', 'r', 't', 'n'], '3': ['b', 'o', 'e', 'm', 'k'], '4': ['f', 'y', 'u', 'n', 'g'] } 
```

我想找到每个可能的字母组合，因为每个字母都是从不同的键或数组中选择的。顺序很重要，因此第一个字母必须始终来自“data1”，第二个字母必须来自“data2”，依此类推。

目的是然后对照字典检查这些以查看哪些是英语有效单词。我假设获得所有组合的列表，然后进行检查将是最快的，但如果不是这样，我想要一些输入。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T17:29:30.520

使用[`itertools.product()`](http://docs.python.org/2/library/itertools.html#itertools.product)：

```
for combo in itertools.product(self.data1, self.data2, self.data3, self.data4):
    # combo is a tuple of 4 characters. 
```

或者：

```
for combo in itertools.product(*[d[k] for k in sorted(d.keys())]):
    # combo is a tuple of 4 characters. 
```

演示：

```
>>> import itertools                                                                                                                >>> d = {'1': ['a', 'd', 'e', 'l', 's'], '2': ['s', 'i', 'r', 't', 'n'], '3': ['b', 'o', 'e', 'm', 'k'], '4': ['f', 'y', 'u', 'n', 'g'] }
>>> for combo in itertools.product(*[d[k] for k in sorted(d.keys())]):
...     print ''.join(combo)
... 
asbf
asby
asbu
asbn
asbg
asof
asoy
asou
ason
asog
asef

...

snkf
snky
snku
snkn
snkg 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T17:37:00.757

马丁的好回答，`itertools.product`是最好的方法。由于它是在 2.6 版本中引入的，因此您可以回到 Python 2.5 及更早版本的老式风格：

```
>>> [i1 + i2 + i3 + i4 for i1 in data1 for i2 in data2 for i3 in data3 for i4 in data4 ]
['asbf', 'asby', 'asbu', 'asbn', 'asbg', 'asof', 'asoy', 'asou', 'ason', 'asog', 'asef',
 'asey', 'aseu', 'asen', 'aseg', 'asmf', 'asmy', 'asmu', 'asmn', 'asmg', 'askf', 'asky', 
 'asku', 'askn', 'askg', 'aibf', 'aiby', 'aibu', 'aibn', 'aibg', 'aiof', 'aioy', 'aiou', 
 'aion', 'aiog', 'aief', 'aiey', 'aieu', 'aien', 'aieg', 'aimf', 'aimy', 'aimu', 'aimn', 
 'aimg', 'aikf', 'aiky', 'aiku', 'aikn', 'aikg', 'arbf', 'arby', 'arbu', 'arbn', 'arbg', 
 'arof', 'aroy', 'arou', 'aron', 'arog', 'aref', 'arey', 'areu', 'aren', 'areg', 'armf', 
 'army', 'armu', 'armn', 'armg', 'arkf', 'arky', 'arku', 'arkn', 'arkg', 'atbf', 'atby', 
 'atbu', 'atbn', 'atbg', 'atof', 'atoy', 'atou', 'aton', 'atog', 'atef', 'atey', 'ateu'
 ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-05-02T06:43:52.647

不使用迭代工具：

```
 def combination(x):
     list1 = g.values()[0]
     list2 = g.values()[1]
     for i in list1:
         for j in list2:
              print(i+j)
 combination({'1':['a','b'], '2':['c','d']}) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-12-02T13:54:13.300

```
x={'1':['a','b'], '2':['c','d']}
list1 = x.get('1')
list2 = x.get('2')
  for i in range(2):
    for j in range(2):          
      print(list1[i]+list2[j]) 
```

# c# - 报告标题部分中的 ReportViewer 分组标题？

> ID：14692030
> 
> 赞同：2
> 
> 时间：2013-02-04T17:25:28.947
> 
> 标签：c#, vb.net, reportviewer, rdlc

![在此处输入图像描述](../Images/9503e2ff6014d4a02b0dedbef669c294.png)

嗨，我正在编写一份在 VS2010 中使用 reportviewer 的报告。

这是一份发票报告。它在系统中有一些**帐户**，对于每个**帐户**，它都有一些**订单**。现在，每个月，我们都需要将发票发送到每个帐户。

在报表的顶部，我们需要列出**“Bill To”** `(the address for each account)`和**“Invoice#”**，对于每个**帐户**，它是**不同**的，并且是**连续**的。然后，在中心，它应该列出该帐户的订单详细信息。显然，每个帐户都应该有一张发票。

请参阅随附的屏幕截图。我使用分组并创建了屏幕截图中显示的发票。

但是，它有一个问题。“ **Account address”**、**“Terms”**和**“Invoice #”**，我无法将它们放在分组中（这些在组内是相同的）。因此，对于不同的组，它们显示为相同的值，尽管在 rdlc 文件中，我将它们的字段放在那里。

任何人都知道如何解决这个问题？

一种可能性是：不要在一个报告中为所有帐户创建发票（即 20 页，每页是一个帐户的发票），而是为每个帐户的每个发票创建一个报告（总共 20 个文件），然后打印发票直接地。这将起作用，因为我们可以操纵所有数据，并为帐户地址、条款、...使用报告查看器参数。

但是，这意味着我们无法在打印前浏览报告（在软件内）。有什么建议么？

谢谢

读者

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-07T04:54:27.890

您可以做的是，因为每个帐户都有一个地址、发票# 和发票详细信息或您的**订单**，

所以您可以做的是：

**编辑：** 让我以一些详细的方式进行！（请放大以清晰查看图像细节）

1.创建一个新报告并向其中添加一个 Tablix
`--Tablix has the property , it can iterate through your data`
并创建数据集，该数据集将获取帐户地址、发票和条款的数据。然后 ：
![在此处输入图像描述](../Images/1750e48ba0b28d638c7aebb405109fb4.png)

如果您无法正确查看图像..[这里](https://docs.google.com/file/d/0Bzg8dbh1CrN9bXRkVnB1NDRtSGM/edit)是为您呈现的相同

这是我以类似要求进行报告的方式...[子报告](http://msdn.microsoft.com/en-us/library/dd220581%28v=sql.105%29.aspx)将在很大程度上简化任务..

ps：

*   **编辑：**不需要去标题..正如你在你的问题中所说的那样。只是主报告和子报告应该做你需要的！
*   我刚刚看到你的是`crystal report`..但这个概念是一样的

# java - Java中的变量值

> ID：14692040
> 
> 赞同：0
> 
> 时间：2013-02-04T17:25:57.683
> 
> 标签：java, variables, coding-style

关于变量值如何工作的值，我有一个简短的问题。我现在正在开发一个程序，它看起来像这样：

```
public void run() {

    println("There are " + ATOMS + " initially.");

    int atoms = ATOMS;
    int year = 0;

    while (atoms > 0) {

        for (int i = atoms; i > 0; i--) {

            println(i);
            if( rgen.nextBoolean() ) {
                atoms--;
                println("The total atoms is " + atoms);
            }

            println("The total for i is " + i + "\n"  );

        }

         year++;

         println("There are " + atoms + " at the end of year " + year );
    }

} 
```

在带有 for 循环的部分，并将变量 i 设置为原子的值，这让我感到困惑。假设原子的值从 20 开始。它通过 for 循环并假设第一次通过 RandomGenerator 使其成为真的。所以从原子中减去 1。然后，由于 i-- 的存在，i 的值也应该被减去。所以我的问题是：当我将变量 i 设置为 atom 的值时，是否只需要 i 并将其设置为初始值 20？然后从那里每次我调整 i 的值时，它都会脱离自己的 20 版本，然后当我改变 atom 的值时，它也有自己的值。所以当我从原子中减去时，那不是也从 i 中减去吗？这是我能理解它的唯一方法，因为该程序已编写并且可以正常工作，但那部分让我感到困惑。

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:36:17.190

是的，您已经回答了自己的问题。变量`i`和`atoms`是两个单独的实例。

当您启动循环时，您设置`i`的值等于相同的值，`atoms`但它们仍然是单独的变量。因此，在循环内部，当您更改其中一个的值时，它不会影响另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:28:00.003

一旦你设置了 i=atoms 的值，它就不再改变了。它是循环初始化器，将不再被处理。

“i”当然会不断递减（因为 i--递减）。

但是您可以将原子的值更改为任何值，结果不会改变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:29:58.617

`i=atoms`是`for`循环中的初始化。于是乎，`i`独立于 的值`atoms`。

# tsql - GROUP BY 子句将所有 VARCHAR 字段视为不同

> ID：14692048
> 
> 赞同：1
> 
> 时间：2013-02-04T17:26:19.060
> 
> 标签：tsql, group-by, varchar

我在尝试**GROUP BY** **VARCHAR**字段时目睹了一种奇怪的行为。

以下面的示例为例，我尝试找出过去至少更改过一次姓名的客户。

```
CREATE TABLE #CustomersHistory
(
Id INT IDENTITY(1,1),
CustomerId INT,
Name VARCHAR(200)
)

INSERT INTO #CustomersHistory VALUES (12, 'AAA')
INSERT INTO #CustomersHistory VALUES (12, 'AAA')
INSERT INTO #CustomersHistory VALUES (12, 'BBB')
INSERT INTO #CustomersHistory VALUES (44, '444')

SELECT ch.CustomerId, count(ch.Name) AS cnt
  FROM #CustomersHistory ch
  GROUP BY ch.CustomerId  HAVING  count(ch.Name) != 1 
```

奇怪的是（好像第一个 INSERT 中的“AAA”与第二个不同）

```
CustomerId  cnt  //  (I was expecting)
12          3    //   2
44          1    //   1 
```

*   这种行为是否特定于 T-SQL？
*   为什么它会以这种相当违反直觉的方式表现？
*   通常如何克服这个限制？

**注意：这个**[问题与 VARCHAR 的 GROUP BY 问题](https://stackoverflow.com/questions/3311251/group-by-problem-with-varchar)非常相似，我没有找到为什么的答案

**旁注：**`HAVING count(ch.Name) != 1`使用而不是好习惯`HAVING count(ch.Name) > 1`吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:29:01.473

运算符将`COUNT()`计算所有行，而不考虑值。我认为您可能想使用 a`COUNT(DISTINCT ch.Name)`只计算唯一名称。

```
SELECT ch.CustomerId, count(DISTINCT ch.Name) AS cnt
  FROM #CustomersHistory ch
  GROUP BY ch.CustomerId  HAVING  count(DISTINCT ch.Name) > 1 
```

有关更多信息，请查看在线图书上的[COUNT()文章](http://msdn.microsoft.com/en-us/library/ms175997.aspx)

# haskell - 如何洗牌？

> ID：14692059
> 
> 赞同：26
> 
> 时间：2013-02-04T17:27:07.893
> 
> 标签：haskell

如何在不替换的情况下从一组数字 ( `[1, 2, 3]`) 中采样，直到我点击`x`？我的计划是打乱列表`[1, 2, 3]`并将其砍在`x`：

```
-- chopAt 3 [2, 3, 1] == [2, 3]
-- chopAt 3 [2, 1, 3] == [2, 1, 3]
-- chopAt 3 [3, 1, 2] == [3]
chopAt _ [] = []
chopAt x (y:ys)
  | x /= y    = y : chopAt x ys
  | otherwise = [y] 
```

但是我不知道如何洗牌（或理解 Monads）。

```
-- sample without replacement from [1, 2, 3] until one hits a 3
-- x <- shuffle [1, 2, 3]
-- print (chopAt 3 x)
main = do
-- shuffle [1, 2, 3]
  print (chopAt 3 [1, 3, 2]) 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-02-04T18:40:45.173

使用[随机](http://hackage.haskell.org/packages/archive/random/1.0.0.3/doc/html/System-Random.html)甚至[MonadRandom](http://hackage.haskell.org/packages/archive/MonadRandom/0.1.3/doc/html/Control-Monad-Random.html)来实现你的随机播放。[这里](http://www.haskell.org/haskellwiki/Random_shuffle)有一些很好的答案

但这确实是可操作的。这是幕后发生的事情。

## 一世。

随机性是您在 Haskell 中首先遇到并且必须处理杂质的地方之一——这似乎令人反感，因为洗牌和样本看起来如此简单，并且不觉得它们应该与打印到物理屏幕或发射核武器，但通常`purity == referentially transparent`和参考透明的随机性[是无用](https://xkcd.com/221/)的。

```
random = 9 -- a referentially transparent random number 
```

所以我们需要一个关于随机性的不同想法来让它变得纯粹。

## 二、

用于提高可重复性（非常重要）的科学代码中的典型“作弊”是修复实验的随机种子，以便其他人可以验证每次运行代码时他们得到*完全相同的结果。*这正是参考透明性！让我们试试看。

```
type Seed = Int
random :: Seed -> (Int, Seed)
random s = (mersenneTwisterPerturb s, splitSeed s) 
```

其中`mersenneTwisterPerturb`是从`Seed`s 到的伪随机映射`Int`，`splitSeed`是从`Seed`s 到`Seed`s 的伪随机映射。请注意，这两个函数都是完全确定的（并且是透明的），所以`random`也是如此，但是我们可以像这样创建一个无限的、惰性的伪随机流

```
randomStream :: Seed -> [Int]
randomStram s = mersenneTwisterPerturb s : randomStream (splitSeed s) 
```

同样，这个流是基于`Seed`值的确定性的，但是只看到流而不看到种子的观察者应该无法预测它的未来值。

## 三、

我们可以使用随机整数流来打乱列表吗？当然我们可以，通过使用模运算。

```
shuffle' :: [Int] -> [a] -> [a]
shuffle' (i:is) xs = let (firsts, rest) = splitAt (i `mod` length xs) xs
                     in (head rest) : shuffle' is (firsts ++ tail rest) 
```

或者，为了使其更加独立，我们可以预先组合我们的流生成函数来得到

```
shuffle :: Seed -> [a] -> [a]
shuffle s xs = shuffle' (randomStream s) xs 
```

另一个“种子消耗”引用透明的“随机”功能。

## 四。

所以这似乎是一个重复的趋势。事实上，如果你浏览这个模块`System.Random`，你会看到很多我们上面写的函数（我已经专门化了一些类型类）

```
random :: (Random a) => StdGen -> (a, StdGen)
randoms :: (Random a) => StdGen -> [a] 
```

其中`Random`是可以随机生成的事物的类型类，`StdGen`是 的一种`Seed`。这已经足够实际的工作代码来编写必要的改组函数了。

```
shuffle :: StdGen -> [a] -> [a]
shuffle g xs = shuffle' (randoms g) xs 
```

还有一个`IO`函数`newStdGen :: IO StdGen`可以让我们构建一个随机种子。

```
main = do gen <- newStdGen
          return (shuffle gen [1,2,3,4,5]) 
```

但是你会注意到一些烦人的事情：如果我们想要做出*不同的*随机排列，我们需要不断改变 gen

```
main = do gen1 <- newStdGen
          shuffle gen1 [1,2,3,4,5]
          gen2 <- newStdGen
          shuffle gen2 [1,2,3,4,5]

          -- using `split :: StdGen -> (StdGen, StdGen)`
          gen3 <- newStdGen
          let (_, gen4) = split gen3
          shuffle gen3 [1,2,3,4,5]
          let (_, gen5) = split gen4
          shuffle gen4 [1,2,3,4,5] 
```

`StdGen`这意味着如果你想要不同的随机数，你要么必须做大量的簿记，要么留在 IO 中。由于引用透明性，这“有意义”再次 - 一组随机数必须彼此随机*，*因此您需要将信息从每个随机事件传递到下一个。

不过，这真的很烦人。我们能做得更好吗？

## 五。

好吧，通常我们需要的是一种让函数接收随机种子然后输出一些“随机”结果和*下一个*种子的方法。

```
withSeed :: (Seed -> a) -> Seed -> (a, Seed)
withSeed f s = (f s, splitSeed s) 
```

结果类型`withSeed f :: Seed -> (a, Seed)`是一个相当普遍的结果。让我们给它一个名字

```
newtype Random a = Random (Seed -> (a, Seed)) 
```

而且我们知道我们可以在 in 中创建有意义`Seed`的 s `IO`，所以有一个很明显的函数可以将`Random`类型转换为`IO`

```
runRandom :: Random a -> IO a
runRandom (Random f) = do seed <- newSeed
                          let (result, _) = f seed
                          return result 
```

现在感觉我们有了一些有用的东西——类型的随机值的概念`a`，`Random a`只是`Seed`s 上的一个函数，它返回下一个`Seed`，这样以后的`Random`值就不会全部相同。我们甚至可以制作一些机器来组合随机值并`Seed`自动传递

```
sequenceRandom :: Random a -> Random b -> Random b
sequenceRandom (Random fa) (Random fb) = 
    Random $ \seed -> let (_aValue, newSeed) = fa seed in fb newSeed 
```

但这有点傻，因为我们只是扔掉`_aValue`。让我们组合它们，使得第二个随机数实际上在很大程度上取决于第一个随机值。

```
bindRandom :: Random a -> (a -> Random b) -> Random b
bindRandom (Random fa) getRb = 
    Random $ \seed -> let (aValue, newSeed) = fa seed
                          (Random fb)       = getRb aValue
                      in fb newSeed 
```

我们还应该注意，我们可以对`Random`值做“纯”的事情，例如，将随机数乘以 2：

```
randomTimesTwo :: Random Int -> Random Int
randomTimesTwo (Random f) = Random $ \seed -> let (value, newSeed) = f seed
                                              in (value*2, newSeed) 
```

我们可以将其抽象为 Functor 实例

```
instance Functor Random where
  fmap f (Random step) = Random $ \seed -> let (value, newSeed) = step seed
                                           in (f value, newSeed) 
```

现在我们可以创建很酷的随机效果，比如布朗运动

```
brownianMotion :: Random [Int]
brownianMotion = 
   bindRandom random $ \x -> 
       fmap (\rest -> x : map (+x) rest) brownianMotion 
```

## 六、

这触及了我一直在写的整个问题的核心。随机性可以`IO`很好地存在于 monad 中，但它也可以作为更简单的`Random`monad 单独存在。我们可以立即编写实例。

```
instance Monad Random where
  return x = Random (\seed -> (x, seed))
  rx >>= f = bindRandom rx f 
```

因为它是一个单子，我们得到免费的`do`符号

```
brownianMotion' = do x <- random
                     rest <- brownianMotion'
                     return $ x : map (+x) rest 
```

你甚至可以幻想并称之为`runRandom`单子同态，但这是一个非常不同的话题。

所以，回顾一下

1.  `Seed`引用透明语言中的随机性需要
2.  购物车`Seed`很烦人
3.  “提升”和“绑定”随机值有一个共同的模式，可以`Seed`自然地路由 s
4.  该模式形成一个单子

真正简短的回答是，您可能希望使用[随机](http://hackage.haskell.org/packages/archive/random/1.0.0.3/doc/html/System-Random.html)甚至[MonadRandom](http://hackage.haskell.org/packages/archive/MonadRandom/0.1.3/doc/html/Control-Monad-Random.html)来实现您的随机播放。通常，它们对于“采样”会派上用场。

干杯!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T17:41:15.583

你在寻找[排列](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Data-List.html#v%3apermutations)吗？

似乎也`cropAt`可以通过`takeWhile`. 我个人更喜欢标准组合器而不是手工制作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-02-19T00:42:13.687

要对列表进行洗牌，请使用[random-shuffle](http://hackage.haskell.org/package/random-shuffle-0.0.4)库：

```
import System.Random (newStdGen)
import System.Random.Shuffle (shuffle')

main = do
  rng <- newStdGen

  let xs = [1,2,3,4,5]

  print $ shuffle' xs (length xs) rng 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-05T13:16:26.833

从我的 Haskell 学习开始，您可能会发现一些简单的解决方案。如果说实话，我还处于起步阶段或稍微落后 ;-)

```
import System.Random
import Control.Applicative

shuffle :: [a] -> IO [a]
shuffle [] = return []
shuffle lst = do
    (e, rest) <- pickElem <$> getIx
    (e:) <$> shuffle rest
    where
    getIx = getStdRandom $ randomR (1, length lst)
    pickElem n = case splitAt n lst of
        ([], s) -> error $ "failed at index " ++ show n -- should never match
        (r, s)  -> (last r, init r ++ s) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-14T21:47:03.740

每个人似乎都曾在某个时间点遇到过这种情况。这是我对问题的快速解决方案：

```
import System.Random

shuffle :: [a] -> IO [a]
shuffle [] = return []
shuffle xs = do randomPosition <- getStdRandom (randomR (0, length xs - 1))
                let (left, (a:right)) = splitAt randomPosition xs
                fmap (a:) (shuffle (left ++ right)) 
```

请注意，复杂度为 O(N^2)，因此对于较大的列表来说这是非常低效的。另一种方法是通过使用可变数组（线性复杂度）来实现[Fisher-Yates shuffle ：](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

```
import Data.Array.IO
import System.Random

swapElements_ :: (MArray a e m, Ix i) => a i e -> i -> i -> m ()
swapElements_ arr i j = do a <- readArray arr i
                           b <- readArray arr j
                           writeArray arr i b
                           writeArray arr j a
                           return ()

shuffle :: [a] -> IO [a]
shuffle xs = do let upperBound = length xs
                arr <- (newListArray (1, upperBound) :: [a] -> IO (IOArray Int a)) xs
                mapM_ (shuffleCycle arr) [2..upperBound]
                getElems arr
  where shuffleCycle arr i = do j <- getStdRandom (randomR (1, i))
                                swapElements_ arr i j 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-28T17:41:26.923

将此函数添加到您的代码中，然后像这样调用它`shuffle (mkStdGen 5) [1,2,3,4,5]`

```
import System.Random

shuffle gen [] = [] 
shuffle gen list = randomElem : shuffle newGen newList
  where 
   randomTuple = randomR (0,(length list) - 1) gen
   randomIndex = fst randomTuple
   newGen      = snd randomTuple
   randomElem  = list !! randomIndex
   newList     = take randomIndex list ++ drop (randomIndex+1) list 
```

或者像这样将它包含在你的`do`块中

```
main = do
     r <- randomIO
     str <- getLine 
     putStrLn (show (shuffle (mkStdGen r) str)) 
```

# vb.net - 更改 ObservableCollection 属性的源集合

> ID：14692063
> 
> 赞同：1
> 
> 时间：2013-02-04T17:27:21.080
> 
> 标签：vb.net, data-binding, observablecollection

我的一个库类公开了一个看起来有点像这样的属性：

```
 Private _myCollection As New ObservableCollection(Of String)

    Public ReadOnly Property MyCollection As ObservableCollection(Of String)
        Get
            Return _myCollection
        End Get
    End Property 
```

我对数据绑定不太了解，但我假设框架会在项目被添加到基础字段/从基础`_myCollection`字段中删除时自动通知更改（如​​果我错了，请纠正我）。

我想知道的是当`_myCollection`被清空或替换为不同的集合时会发生什么：

```
 Sub WhatHappensToMyObservableCollectionWhen(updated As Collection(Of String))
        ' nulling underlying field
        _myCollection = Nothing

        ' changing underlying field
        _myCollection = New ObservableCollection(Of String)(updated)
    End Sub 
```

框架是否仍会通知已更改，或者当这些事情发生时`MyCollection`我是否必须手动实施`INotifyPropertyChanged`和引发？`PropertyChanged`

**编辑**

我在向 WPF 开发人员提出这个问题时，我想答案对于所有`PropertyChanged`. 如果用 WPF 编写的 GUI 绑定到`MyCollection`，我想确保当`_myCollection`字段以我描述的方式发生变化时正确更新它。

谢谢

# scheme - 设计功能数据定义

> ID：14692069
> 
> 赞同：1
> 
> 时间：2013-02-04T17:27:41.727
> 
> 标签：scheme, racket

```
; A list-of-images is either   
; empty      
;    or       (cons n lon),
; where n is an image and lon is a list-of-images. 
```

您将如何开发一个`height-total`使用图像列表并返回所有图像高度总和的函数？我很困惑。你能用这个功能`image-height`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:43:30.197

解决方案自然地遵循递归过程；因为这看起来像家庭作业，所以我会让你弄清楚细节，当然你必须使用这个`image-height`过程：

```
(define (height-total list-of-images)
  (if <???>                      ; if the list is empty
      <???>                      ; then what's the height sum of an empty list?
      (+ (image-height <???>)    ; else add the height of the first image and
         (height-total <???>)))) ; advance recursion to the rest of the list 
```

请注意，此问题和列表上的许多其他问题的解决方案都遵循相同的基本递归结构，我建议您仔细查看[如何设计程序](http://www.ccs.neu.edu/home/matthias/HtDP2e/)或[The Little Schemer](https://rads.stackoverflow.com/amzn/click/com/0262560992)以更好地了解如何解决此类问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T10:36:04.017

使用球拍：

```
(for/sum ([image image-list])
  (image-height image)) 
```

或者

```
(foldl (lambda (image sum) (+ (image-height image) sum))
       0 image-list) 
```

或者

```
(apply + (map image-height image-list)) 
```

# python - 在被调用函数和调用函数之间共享 Python 中的作用域

> ID：14692071
> 
> 赞同：12
> 
> 时间：2013-02-04T17:27:43.670
> 
> 标签：python, scope

Python中有没有办法管理范围，以便调用函数中的变量在被调用函数中可见？我想要类似下面的东西

```
z = 1

def a():
    z = z * 2
    print z

def b():
    z = z + 1
    print z
    a()
    print z

b() 
```

我想得到以下输出

```
2
4
2 
```

这个问题的真正解决方案只是将 z 作为变量传递。我不想这样做。

我有一个庞大而复杂的代码库，其中包含不同专业水平的用户。他们目前被训练通过一个变量，现在我必须添加另一个。我不相信他们会通过所有函数调用始终如一地传递第二个变量，所以我正在寻找一种维护接口的替代方法。很有可能这是不可能的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-04T19:40:38.610

我想这就是你要找的。如果您控制内部函数，并且您要查找的变量已经在调用链的某个范围内，但您不希望您的用户必须在调用本身中包含该变量。您显然不想要`global`关键字，因为您不希望内部分配影响外部范围。

使用该`inspect`模块可以让您访问调用上下文。（但是，请注意它有些脆弱。您可能应该只用于 CPython 非线程。）

```
import inspect

def calling_scope_variable(name):
  frame = inspect.stack()[1][0]
  while name not in frame.f_locals:
    frame = frame.f_back
    if frame is None:
      return None
  return frame.f_locals[name]

z = 1

def a():
  z = calling_scope_variable('z')
  z = z * 2
  print z

def b():
  z = calling_scope_variable('z')
  z = z + 1
  print z
  a()
  print z

b() 
```

这确实给出了正确答案：

```
2
4
2 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T17:40:09.907

这可能是上课的好地方：

```
class MyClass(object):
    def __init__(self, z):
        self.z = 1

    def a(self):
        self.z = self.z * 2
        print self.z

    def b():
        self.z = self.z + 1
        print self.z
        self.a()
        print self.z 
```

您可以使用全局变量获得相同的效果，但我建议您创建自己的单独命名空间（例如使用类）并将其用于您的范围。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-04T18:40:26.973

这有点难看，但它避免使用全局变量，我对其进行了测试并且它可以工作。[使用此处](https://stackoverflow.com/questions/279561/what-is-the-python-equivalent-of-static-variables-inside-a-function)找到的所选答案中的代码，该函数`getSetZ()`具有一个“静态”变量，可用于存储传递给它的值，然后在调用函数时将其检索`None`为参数。某些限制是它假定`None`z 不是可能的值，并且您不使用线程。您只需要记住`getSetZ()`在每次调用您希望调用函数`z`可用的函数之前调用，并从中取出值`getSetZ()`并将其放入该函数的局部变量中。

```
def getSetZ(newZ):
    if newZ is not None:
        getSetZ.z = newZ
    else:
        return getSetZ.z

def a():
    z = getSetZ(None)
    z = z * 2
    print z

def b():
    z = getSetZ(None)
    z = z + 1
    print z
    getSetZ(z)
    a()
    print z

getSetZ.z = 0
getSetZ(1)
b() 
```

我希望这有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T17:29:06.387

一般来说，最好的解决方案始终只是传递值 - 这将更加可预测和自然，更易于使用和调试：

```
def a(z):
    z = z * 2
    print z

def b():
    global z
    z = z + 1
    print z
    a(z)
    print z

b() 
```

您可以定义`a()`并`b()`执行类似的操作：

```
def b():
    global z
    z = z + 1
    print z
    def a():
        z = z * 2
        print z
    a()
    print z 
```

然而，这并不是最理想的。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-04T18:25:08.640

我不太明白你想要实现什么，但这会打印 2、4、2：

```
z = 1

def a():
    global z
    y = z * 2
    print y

def b():
    global z
    z = z + 1
    print z
    a()
    print z

b() 
```

# python - Python 寻找与特定格式匹配的格式

> ID：14692072
> 
> 赞同：0
> 
> 时间：2013-02-04T17:27:51.000
> 
> 标签：python, format, match

我有一个 CSV 文件中的数据列表。

我正在使用循环将它们变成字段...我需要一个代码来查找代码中与此类代码“[A9]9AA9#9”不匹配的字段让我们说“A”可以是任何字母和“ 9" 可以是任何数字。但是 [ ] 和 # 符号必须与格式中的位置相同。

```
def code():
    match= 0
    tree_file.readline() # skip first row
    for row in tree_file: 
        field=row.strip()
        field=field.split(",") # make Into fields
        code=(field[4])        
        if code != "[X9]9XX9#9":   #HERE SHOULD BE THE CODE
            match+=1 
```

请您在代码中留下一些评论，以便我理解它们，因为我无法理解其他可用的解决方案与我的问题有何关系。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:33:36.733

您可以尝试使用以下正则表达式。这将接受小写和大写字母 ( `[a-zA-Z]`) 以及各自位置 ( `\d`) 中的数字。我们首先编译`pattern`，这是我们试图匹配的正则表达式（见[这里](http://docs.python.org/2/library/re.html)更详细的正则表达式解释）。然后，您`re.match`可以尝试将输入字符串与模式“匹配”。如果模式匹配，该`group()`方法将返回匹配的组。如果没有，`re.match()`则将返回`None`（您可以比我在下面处理得更好:)）：

```
In [11]: import re

In [12]: pattern = re.compile(r'\[[a-zA-z]\d\]\d[a-zA-Z]{2}\d#\d')

In [13]: re.match(pattern, '[X9]9XX9#9').group()
Out[13]: '[X9]9XX9#9'

In [14]: re.match(pattern, '[Z7]3JK2#1').group()
Out[14]: '[Z7]3JK2#1'

In [15]: re.match(pattern, '[ZZ]3JK2#1').group()
---------------------------------------------------------------------------
AttributeError                            Traceback (most recent call last)
<ipython-input-15-48efdbbda230> in <module>()
----> 1 re.match(pattern, '[ZZ]3JK2#1').group()

AttributeError: 'NoneType' object has no attribute 'group' 
```

处理不匹配情况的一种方法是将结果分配给变量，然后根据它是否返回任何内容进行处理：

```
In [16]: match = re.match(pattern, '[ZZ]3JK2#1')

In [17]: if match:
   ...:     print match.group()
   ...:     

In [5]: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:32:04.427

您需要的正则表达式是：

```
r'\[[A-Za-z][0-9]+\][0-9]+[A-Za-z]{2}[0-9]+#[0-9]+' 
```

所以代码可以像

```
import re

if re.search(r'\[[A-Za-z][0-9]+\][0-9]+[A-Za-z]{2}[0-9]+#[0-9]+', code) is None:
    match += 1 
```

**解释**

```
[A-Za-z] : matches any alphabet
[0-9]+ : matches one or more digits
[A-Za-z]{2} : matches two alphabets 
```

**输出**

```
>>> import re
>>> s = "[X9]9XX9#9"
>>> re.search(r'\[[A-Za-z][0-9]+\][0-9]+[A-Za-z]{2}[0-9]+#[0-9]+', s) is None
False
>>> s = "ABCD"
>>> re.search(r'\[[A-Za-z][0-9]+\][0-9]+[A-Za-z]{2}[0-9]+#[0-9]+', s) is None
True
>>> s = "[A123]456BB8#789"
>>> re.search(r'\[[A-Za-z][0-9]+\][0-9]+[A-Za-z]{2}[0-9]+#[0-9]+', s) is None
False
>>> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T17:40:11.670

`reg = re.compile(r'\[[A-Z][0-9]\][0-9][A-Z]{2}[0-9]#[0-9]')`为我工作...

运算符定义了一个范围，`-`并且 [] 必须被转义，因为根据[定义](http://docs.python.org/2/library/re.html)，`[]`运算符匹配一组字符。如果您需要独立于语言环境的解决方案，您也可以使用 Unicode 字符类来执行此操作。

# iphone - 使用 Google 的 Objective-c SDK 崩溃

> ID：14692079
> 
> 赞同：1
> 
> 时间：2013-02-04T17:27:58.233
> 
> 标签：iphone, ios, google-drive-api, gdata-api, google-api-objc-client

我已经被这个问题困扰了很多天了。

我正在使用谷歌的 Objective-C SDK 来获取用户名和电子邮件以登录我的应用程序。我将项目和类添加到我的项目中（因为它没有编译）并且在测试时一切正常。

问题是，当我编译发布并将应用程序直接下载到我的 iPad（iOS 5.1，它在 iOS 6.0.1 的 ipad 上运行正常）时，创建谷歌的登录视图控制器时应用程序崩溃。

日志说：

> Dyld 错误消息：找不到符号：_objc_setProperty_atomic_copy 引用自：/var/mobile/Applications/58E1CEC8-FDAD-46B7-8684-92F919BA03A7/Nearpod.app/Nearpod 预期在：/usr/lib/libobjc.A.dylib Dyld 版本： 199.6

我一直在寻找这个错误，我发现的一切都是这样的问题：[ARC App Crashes when access @property form ARC static lib](https://stackoverflow.com/questions/12641190/arc-app-crashes-when-accessing-property-form-arc-static-lib) and [Xcode 4.5 error on IOS 5](https://stackoverflow.com/questions/12404495/xcode-4-5-error-on-ios-5)。

我已经检查了两个项目的 Base SDK 和 IOS Development Target 是否匹配（实际上，这就是让应用程序在调试模式下正常工作的原因）

我在 5.0 上设置了 iOS 开发目标，在最新的 IOS（iOS 6.1）上设置了基础 SDK

我检查了项目和目标的调试和发布配置之间的差异，并没有发现任何可疑之处......

我还在所有 gtl 类和两个项目中添加了 -fobjc-arc 标志。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T23:39:08.807

在花了两天时间对我的代码进行了重大更改之后，我发现解决方案非常简单：只要确保 GTL 项目（或 GData 项目）的部署版本与您的 main 的部署目标相同![项目](../Images/bded98351d093f2a4d19d624ff533249.png)。

# ruby - 需要检查是否安排了 eventmachine stop

> ID：14692081
> 
> 赞同：1
> 
> 时间：2013-02-04T17:28:01.180
> 
> 标签：ruby, eventmachine

在我在 eventmachine 上运行的代码中，我如何知道是否`EventMachine::stop`已被调用？

我需要这个，以便在我的延迟中我不会记录仅由关闭连接导致的错误消息，因此从操作的角度来看并不有趣。

猴子补丁代码的唯一方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T00:58:35.077

如果您查看了 EventMachine 类的纯 Ruby 实现的源代码，其中`lib/em/pure_ruby.rb`定义了一个名为`@stop_scheduled`. 它似乎在内部用于完全执行您想要执行的操作 - 如果我们当前正在关闭，请不要执行某些操作。

不幸的是，这个变量没有作为 EventMachine API 的一部分公开，所以你不能使用它。

您可能不得不自己重新实现这种功能。将实例变量添加到适当的类中，并在关闭过程中对您不希望执行的代码设置一些保护措施。

# mediawiki - 如何在 mediawiki 中为登录创建重定向

> ID：14692092
> 
> 赞同：0
> 
> 时间：2013-02-04T17:28:53.863
> 
> 标签：mediawiki

我试图从 mediawiki （当您未登录时出现要求您登录时出现的登录错误），而不是询问您，它直接将您重定向到登录页面，我已在 MediaWiki 中添加： Loginreqpagetext，以下行：

```
 #REDIRECT[http://10.101.3.21/wikitest/index.php?title=Special%3AUserLogin&returnto=Main+Page] 
```

但它不会自动重定向，有什么建议吗？

ps：也尝试了#REDIRECT [[Special:Userlogin]] 仍然不会自动重定向

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T18:55:47.907

回答我自己的 mediawiki 问题的人已经变老了，但对于任何感兴趣的人来说：

添加

```
 $this->redirect( SpecialPage::getTitleFor( 'Userlogin' )->getFullURL( $query ) ); 
```

在 \include\output 下： public function loginToUse() {

# ajax - Ajax 结果过滤和 URL 参数

> ID：14692097
> 
> 赞同：0
> 
> 时间：2013-02-04T17:29:05.663
> 
> 标签：ajax, backbone.js, backbone-routing

我正在使用 AJAX 请求构建结果过滤页面。我想在 URL 中反映过滤器。例如：对于`price_from`我要添加`?price_from=VAL`的 URL。

我有一个能够使用 URL 参数呈现页面的后端。

经过一番谷歌搜索后，我将使用 Backbone.router 解决方案，该解决方案具有不支持 HTML5 历史 API 的 IE 的哈希回退。

我在设置良好的路线理念方面遇到问题。我有一组过滤参数（`price_from`, `price_to`, `color`, ...），我想将每个参数附加到一个路由。

是否可以链接路由以匹配例如：`?price_from=0&price_to=1&color=red`？（项目顺序可以改变）

意思是：同时调用所有路由，保持ie向后兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:00:15.077

最好的办法是使用 URL 的查询部分，而不是使用 GET 参数来表示搜索条件。例如：

*   推送状态：`/search/query/price_from=0&price_to=1&color=red`
*   基于哈希：`#search/query/price_from=0&price_to=1&color=red`

您的后端当然需要进行一些更改才能解析新的 URL 结构。

# c# - WebClient 和 FtpWebRequest 都挂起（超时）

> ID：14692105
> 
> 赞同：0
> 
> 时间：2013-02-04T17:29:50.727
> 
> 标签：c#, webclient, ftpwebrequest

我正在尝试从使用被动模式的 FTP 站点下载文件。我已经尝试过 FtpWebRequest 方法和 WebClient.DownloadFile 和 DownloadFileAsync 方法。

最近，我的代码如下所示：

```
using (var client = new WebClient())
{
    client.Proxy = new WebProxy();
    client.Credentials = credentials;
    client.DownloadFileCompleted += client_DownloadFileCompleted;
    client.DownloadFileAsync(new Uri(remotePath), localPath);
} 
```

并包含在方法 DownloadFile 中。在异步处理程序中，我得到下一项并（递归地）再次调用 DownloadFile 方法，依此类推，直到我到达最后一项。

几乎每一次，我使用的每一种方法，我都会通过 6 个文件和第 7 个错误。它只有一次通过列表中的所有文件，我无法再次复制它。文件数约为 100 个，文件大小约为 30 - 120k 个。奇怪的是，我经常会看到本地文件夹中的文件计数挂在第 7 项上，但是如果我让工作进程在后台运行，然后几分钟后回来并关闭 IIS express 或 VS Web 服务器，文件将显示。但是，它太不可预测了，不能按原样在生产中使用。

我还尝试了 CodePlex 上的 FTP LIB 库并遇到了同样的问题。

他们那边似乎有什么东西正在关闭我的连接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T14:39:38.370

我有一个类似的问题。就我而言，我需要从 Linux 服务器上的许多文件夹中下载许多小文件。系统管理员建议我在每批之间延迟 3 秒。它大大减少了错误的数量。

# xml - XML FO：内容忽略页面右边距

> ID：14692109
> 
> 赞同：0
> 
> 时间：2013-02-04T17:29:58.593
> 
> 标签：xml, overflow, margin, xsl-fo

我打印的 XSL FO 文档有一个小问题。如果文本太长，它会忽略我的右边距并溢出它的容器。所有其他边距都设置得很好（如上边距、下边距和左边距）我已经尝试搜索各种帖子，但还没有找到有效的答案。我已经尝试过设置填充、边距和换行选项？

知道我哪里出错了

我得到的输出如下，你可以看到最后一行超出了限制。我放置了背景颜色，所以如果右边距被记入，我有一张照片。

[http://tinypic.com/r/11jz1j4/6](http://tinypic.com/r/11jz1j4/6)

这是我设置页面边距的代码

```
<fo:root>
<fo:layout-master-set>
<fo:simple-page-master master-name="default" 
                       page-height ="297mm"
                       page-width  ="210mm" 
                       margin-left  ="3.17cm"
                       margin-right ="3.17cm" 
                       margin-top = "2.54cm"
                       margin-bottom = "2.54cm"    
                      >
<fo:region-body margin="0cm 0cm 0cm 0cm"/>
<fo:region-before extent=".5in"/>
<fo:region-after extent=".5in"/>
</fo:simple-page-master> 
```

很难给出我的 xml 的例子，因为它最初是使用 java 转换为 xml 的 html 代码。

# sql - Sybase - 仅过滤 DATETIME 字段中前 24 小时的数据

> ID：14692113
> 
> 赞同：1
> 
> 时间：2013-02-04T17:30:13.820
> 
> 标签：sql, sap-ase

我现在有一个问题。我有一个数据库表，每隔几分钟就会填充基于患者护理的数据行。其中一列是名为“AdmissionTime”的 DATETIME（时间戳）字段，它显示捕获数据的时间。该信息是基于一个病人一个病人的基础，所以表格变得非常大。患者由患者 ID 字段确定....因此很容易按患者筛选

我想做的只是从患者活动创建的第一个 TIMESTAMP 中显示该数据的前 24 小时.....也就是说，这些数据可能收集了 4 或 5 天，但我只想要前 24 小时的数据

例如

```
Patient is admitted - first timestamp captured at Jan 01, 2013 7:20pm

|
| I want all the data in between
| 
V
Jan 02, 2013 7:19pm 
```

有任何想法吗。

提前谢谢了。

问候

加雷斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:10:40.737

也许是这样的？

```
select * from table
where patientID = patientYouWant
and AdmissionTime <= dateadd(day, 1, (select min(AdmissionTime) from table where patientID = patientYouWant) 
```

# html - 如何在有序列表项前添加英镑符号

> ID：14692123
> 
> 赞同：1
> 
> 时间：2013-02-04T17:30:37.000
> 
> 标签：html, css

是否可以在有序列表前面加上英镑符号或哈希符号？

像这样：

```
#1\. something
#2\. something else
#3\. another thing
... 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T17:43:43.093

[这是遵循](http://jsfiddle.net/pjmorse/t3LU5/)[此答案](https://stackoverflow.com/a/5945305/306084)建议的提示的解决方案：

HTML：

```
<ol class="custom">
    <li>First item</li>
    <li>Second item</li>
    <li>Third item</li>
</ol> 
```

CSS：

```
ol.custom {
  list-style-type: none;
  margin-left: 0;
}

ol.custom > li {
  counter-increment: customlistcounter;
}

ol.custom > li:before {
  content: "#" counter(customlistcounter);
  font-weight: bold;
  float: left;
  width: 3em;
}

ol.custom:first-child {
  counter-reset: customlistcounter;
} 
```

“自定义”类名只是可以恢复到原始行为；如果你把它拿出来，这将适用于所有`ol`使用这个样式表的标签。注意使用伪选择器引入的限制`:before`：IE6 和 IE7 会遇到这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:42:08.300

CSS

```
.hash-counter {
    counter-reset:hash;
    list-style-type: none;
}

.hash-counter > li:before {
    counter-increment:hash;
    content:"#" counter(hash) ". ";
} 
```

但它可能会导致一些其他问题。

# python - 在正数列表中查找所有元素加起来为数字 X

> ID：14692130
> 
> 赞同：0
> 
> 时间：2013-02-04T17:31:04.143
> 
> 标签：python

我正在尝试对遗留报告进行逆向工程并使用 python 来解决问题。

旧报告的最终总数为 200,000。

我知道一个可能最终达到 200k 的数字集合，但是这个集合中到处都是要过滤掉的许多其他数字（逻辑我还不明白）。

在 python 中，我如何遍历数字列表以找到所有可变长度的条目（子列表）（可能是 1 个 = 200k 的元素，或 15 个元素的乘积......），总和为 200k ?

我开始把它写出来，然后当我意识到元素 #1 + 2 可能溢出但列表元素 #1 + 4 + 7 可能与 200k 匹配时决定寻求帮助....

这几乎就像因式分解，但是使用总和而不是乘积，并且在可能的候选者列表中。

没有把握。有任何想法吗？有人做过这样的事吗？

**附加细节：**
通过排列和numpy，我得到了预期的结果，但是预期的输入和输出花费的时间太长了。（即天..？）

下面是我所在的位置：

下面似乎给出了正确的结果，尽管它似乎需要一段时间。

我会接受上面的答案，让它通宵达旦。

谢谢，

```
from itertools import permutations 
import numpy , pickle, random
output_results = {} 
input_array = [random.randrange(0,15000) for i in range(1000)]
desired_sum = 200000
#input_array = (1,2,9,13,12) 
#desired_sum = 23 

for r in range(1,len(input_array)): 
    for p in permutations(input_array, r):
        temp_sum = numpy.sum(p) 
        if temp_sum == desired_sum: 
            output_results[p] = numpy.sum(p) 
    if r % 10 == 0:
        print "Finished up to number %s " % r 

pickle.dump( output_results, open( "save.p", "wb" ) ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:40:22.480

[Itertools.permutations](http://docs.python.org/2/library/itertools.html#itertools.permutations)可以提供帮助。

`r`改变in的值，`permutations(iterable, r)`您可以尝试从（您的集合）中找到包含`r`条目的所有可能排列，您可以轻松地获得其中的总和（例如，使用）。`iterable``numpy.sum`

如果您对预期的内容有所了解并为您设置了合理的上限，`r`您应该在合理的时间内得到答案

**编辑**

@joefromct：您可以通过以下方式首先估计找到所需解决方案所需的最大值`r`（未经测试，但想法应该是正确的）

```
sorted_input = np.sorted(input_array)
cumsum = np.cumsum(sorted_input)
max_r = (cumsum<desired_sum).sum()
if max_r == len(input_array) and sorted_input[-1] < desired_sum:
    print("sorry I can't do anything for you")
    exit()

for r in range(1,max_r):
    [...] 
```

# sql - 如何在 SQL 中将 varchar 转换为 int 失败中定位失败？

> ID：14692131
> 
> 赞同：2
> 
> 时间：2013-02-04T17:31:13.877
> 
> 标签：sql, sql-server-2008

我有一列`varchar(50)`要转换为`int`使用这行代码：

```
ALTER TABLE [Table].[dbo].[example]
ALTER COLUMN XYZ int 
```

我观察了 column 的内容，`XYZ`它们看起来像是从不超过 9999 的整数。

我熟悉 Visual Studio 中的调试器，并且知道如何单步执行代码。但是，当我尝试使用 SQL Server Mgmt. Studio 调试器，我不知道如何归零并修复引发此错误的字段：

> 将 varchar 值“XYZ”转换为数据类型 int 时转换失败。

查询运行了大约 1 分钟，似乎可以工作，但随后弹出上述错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:33:01.640

您可以使用正则表达式来确定哪些字段不能正确转换。

```
SELECT * 
FROM example 
WHERE xyz LIKE '%[^0-9]%' 
```

返回的记录是在您 ALTER 表时无法正确 CAST 的记录。存储在 varchar 字段中的小数也不会转换为整数。

考虑：

`select CAST('1.1' as int)`-- 这会返回一个错误。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:33:25.313

您[`IsNumeric()`](http://msdn.microsoft.com/en-us/library/ms186272.aspx)用于查找列中没有`int`值的行：

```
select *
from example
where isnumeric(xyz) <> 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/60f16/3)

您还可以使用以下`CASE`语句：

```
select 
  case 
    when isnumeric(xyz) <> 1 
    then xyz end
from example
where isnumeric(xyz) <> 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8b852/1)

如果您想查找可能包含句点的记录，因此它们不是`int`值，那么您可以使用：

```
select  xyz
from example
where isnumeric(xyz) <> 1
  or charindex('.', xyz) <> 0 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/8b852/6)。一旦您识别出这些记录，您就可以确定如何处理`ALTER TABLE`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-04T21:05:41.827

确保可以转换该值的唯一方法是使用`Try_Cast/Try_Parse`SQL Server 2012 中的函数或`Try Catch`早期 SQL Server 版本中的模式。

该`Isnumeric`函数在这里几乎没有任何价值，因为如您所见，如果您运行下面的语句，它将为显示的值返回 1 (true)……但是该值不能转换或转换为任何数值数据类型。

使用正则表达式`"NOT LIKE '%[^0-9]%' "`来测试您的值将消除字符串中非数字字符的问题。但是，它不能保证该值可以转换为给定的数据类型。例如`"999999999"`，它是一个有效的整数，但如果将其强制转换为`smallint`.

```
Ex1
Select Isnumeric('$123,456.00')
--Select Cast( '$123,456.00' as int)
--Select Cast( '$123,456.00' as numeric(6,2))
--Select Cast( '$123,456.00' as decimal(6,2))
--Select Convert(int, '$123,456.00')
--Select Convert(numeric(6,2), '$123,456.00')
Select Convert(decimal(6,2), '$123,456.00') 
```

# c# - 获取有关 Azure 部署的更好的错误详细信息

> ID：14692136
> 
> 赞同：1
> 
> 时间：2013-02-04T17:31:31.187
> 
> 标签：c#, asp.net-mvc, azure, azure-web-roles

我正热切地试图追踪将新应用程序部署到 Azure 所产生的所有新错误。在 Azure 上获得与本地实例创建的错误页面的源错误部分相同的详细信息将非常有益。

例如，在本地我得到：

![在此处输入图像描述](../Images/86225e75b953f5aa2678c56b9465e64a.png)

但在 Azure 上，我只得到：

![在此处输入图像描述](../Images/c6080a84093e66fb63edd4b37f0c3cd2.png)

因此，确定是哪条线路导致了这个问题是非常困难的。任何人都知道如何启用此功能？

**编辑：**

以下是服务器“错误消息”配置： ![在此处输入图像描述](../Images/4ae27218fe94458c95fbde1aeb286572.png) ![在此处输入图像描述](../Images/94a379f445880c56aa670124847a9ffe.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T22:30:36.847

行号是 pdb 文件的一部分，因此如果您已经部署了 pdb 文件，可能是这些文件没有一起构建...尝试重新构建和部署 pdb 文件...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:39:02.000

您是否尝试过将您的应用程序部署为网站而不是 Web 角色？我不记得在我们的 Azure 网站上看到的错误消息中的细节比我在本地看到的要少。另外，你考虑过Elmah这样的东西吗？

# java - Java 在 application.conf 中获取布尔环境变量

> ID：14692138
> 
> 赞同：1
> 
> 时间：2013-02-04T17:31:34.173
> 
> 标签：java, jpa

我想在我的 application.conf 文件中做这样的事情。

```
# Debug SQL statements (logged using DEBUG level): 
jpa.debugSQL=${DEBUG_SQL} 
```

我知道问题在于它将环境变量解释为字符串而不是布尔值（从这里开始： [Boolean.getBoolean() Vs System.getenv() in Java](https://stackoverflow.com/questions/8759313/boolean-getboolean-vs-system-getenv-in-java)），但作为一个 Java 新手，我不确定是什么调用它适合在这里进行以使其正常工作。

（我也尝试在环境中设置 DEBUG_SQL=0|1 ，但没有奏效。）

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:55:21.940

假设您的配置文件将这些设置作为属性加载，您可以：

`boolean debugSQL = Boolean.parseBoolean(System.getProperty("jpa.debugSQL"));`

请注意，parseBoolean 仅对值“true”（不区分大小写）为 true。如果您想支持更多，请查看 BooleanUtils ( [http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/BooleanUtils.html#toBoolean(java.lang.String)](http://commons.apache.org/lang/api-3.1/org/apache/commons/lang3/BooleanUtils.html#toBoolean(java.lang.String)) )

看起来您正在使用 Play（基于配置文件名），因此您可以使用`Play.configuration.getProperty("jpa.debugSQL");`而不是`System.getProperty`

# android - 以编程方式创建和添加 CordovaWebView 时出现超时错误

> ID：14692157
> 
> 赞同：1
> 
> 时间：2013-02-04T17:32:45.183
> 
> 标签：android, cordova

我正在尝试创建一个 CordovaWebView 并在其 onCreate 方法中将其插入到我的活动的布局中，如下所示：

```
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);

    setContentView(R.layout.activity_main);

    ViewGroup layout = (ViewGroup) findViewById(R.id.master_layout);

    webView = new CordovaWebView(this);
    webView.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
    layout.addView(webView);
    webView.loadUrl("file:///android_asset/www/index.html");
} 
```

我从 CordovaWebView 收到超时错误，并且在 XML 文件中设置加载超时首选项没有任何区别。我错过了什么吗？

# umbraco - 内容用户在模板内移动 .net 控件/宏

> ID：14692159
> 
> 赞同：0
> 
> 时间：2013-02-04T17:32:56.277
> 
> 标签：umbraco, umbraco5

如果我在特定位置有一个带有用户控件/.net 控件/宏的模板（比如说在模板的左栏），内容用户是否可以控制其位置？

假设我有一个左右轨道，我希望内容用户能够将此控件/宏从一个轨道移动到另一个轨道。

这在 Umbraco 有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T23:05:53.460

如果是在一个地方或另一个地方的情况，您可以创建 2 个模板并让编辑器选择用于给定页面的模板。

或者，如果您希望用户将内容放置在任意位置，则根本不会将其放入模板中，而是确保在“宏属性”选项卡（开发人员）中将“在编辑器中使用”设置为“是” >宏>宏属性）

# bash - 访问未映射到有效 shell 变量名称的环境变量

> ID：14692164
> 
> 赞同：0
> 
> 时间：2013-02-04T17:33:00.903
> 
> 标签：bash

我试图弄清楚如何理智地和可移植地（尽可能地）处理名称不映射到有效 shell 变量的环境变量。结果逐字节准确至关重要，因此我不愿意经历诸如解析`env`工具输出之类的技巧。

```
env 'Invalid Name=Some Value' bash <<'EOF'
s='Invalid Name'
printf '%q\n' "${!s}"
EOF 
```

我希望上面的代码会发出`Some Value`；相反，它返回一个空字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:33:00.903

一种不可移植的方法（仅限 Linux）是解析`/proc/self/environ`：

```
declare -A environ
while IFS='' read -r -d ''; do
  var=${REPLY%%=*}
  val=${REPLY#*=}
  environ[$var]="$val"
done </proc/self/environ
printf '%q\n' "${environ["Invalid Name"]}" 
```

# javascript - JqueryUI Slider 让更改事件处理程序等待另一个更改事件

> ID：14692167
> 
> 赞同：0
> 
> 时间：2013-02-04T17:33:07.477
> 
> 标签：javascript, jquery-ui

我用两个手柄设置了我的 jqueryUI 滑块。它的更改事件处理程序如下所示：

```
change: function(event, ui){
    $("#priceFilterForm").submit();
}, 
```

一旦移动一个句柄，它就会触发表单。

* * *

我希望更改事件处理程序的行为如下：

*   如果触发更改事件，请等待 3 秒
*   如果触发另一个更改事件，则重置 3 秒计时器
*   如果 3 秒内没有其他更改事件，则提交表单

能否请您提示我有关如何实现该行为的技术。

* * *

感谢 Garry 的解决方案：

```
var timer = $.timer(function(){
   $("#priceFilterForm").submit();
});

// slider options:

slide: function(event, ui){
    timer.pause();
    // ...
},
change: function(event, ui){
    timer.stop();  // Not sure if stop is needed here..
    timer.set({ time : 1500, autostart : true });
} 
```

+ 不要忘记将计时器插件包含在您的 javascript 中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:36:42.503

```
var timer = $.timer(function() {
            alert('This message was sent by a timer.');
    });

    timer.set({ time : 5000, autostart : true });

    timer.set(options);
    timer.play(reset);  // Boolean. Defaults to false.
    timer.pause();
    timer.stop();  // Pause and resets
    timer.toggle(reset);  // Boolean. Defaults to false.
    timer.once(time);  // Number. Defaults to 0.
    timer.isActive  // Returns true if timer is running
    timer.remaining // Remaining time when paused 
```

演示

[http://jchavannes.com/jquery-timer/demo](http://jchavannes.com/jquery-timer/demo)

下载

[http://code.google.com/p/jquery-timer/downloads/detail?name=jquery-timer.zip](http://code.google.com/p/jquery-timer/downloads/detail?name=jquery-timer.zip) 查看源代码

[http://code.google.com/p/jquery-timer/source/browse/](http://code.google.com/p/jquery-timer/source/browse/)

# java - phonegap JNI 错误（应用程序错误）：尝试使用过时的本地引用 0x1

> ID：14692172
> 
> 赞同：1
> 
> 时间：2013-02-04T17:33:22.303
> 
> 标签：java, javascript, android, cordova, phonegap-plugins

我的 Android (3.2) Phonegap 插件有一个大问题：

我创建了一个插件，它打开一个 TCP 套接字，发送一个命令并接收响应，将其传递回 JS 脚本。

```
try {
        int port  = args.getInt(0);
        String host = args.getString(1);
        String message = args.getString(2);
        boolean is_pure_text = args.getBoolean(3);
        static Socket sock;
        String reply;

        try {

            if(sock==null || sock.isClosed()){

                sock = new Socket(host, port);
                sock.setSoTimeout(1000);
                Log.d("TCPSockets", "Socket created");

            }

            DataOutputStream dataOutputStream = new DataOutputStream(sock.getOutputStream());;
            DataInputStream dataInputStream = new DataInputStream(sock.getInputStream());

            Log.d("TCPSockets", "Created reader/writer");

            dataOutputStream.writeUTF(message);

            Log.d("TCPSockets", "Sent message");

            reply="";
            int i;
            int tmp;
            byte[] b = new byte[40];
            for(i=0;i<39;i++){
                tmp=dataInputStream.readUnsignedByte();
                Log.d("TCPSockets", "READED BYTE: "+tmp);
                b[i]=(byte)tmp;
            }

            byte[] buffer = new byte[i];

            System.arraycopy (b, 0, buffer, 0, i);

            reply = new String(buffer, "US-ASCII");

            callbackContext.success(reply);

            Log.d("TCPSockets", "Received reply: " + reply);

        } catch (UnknownHostException e) {
            Log.d("TCPSockets", "Unknown Host "+host+":"+port);
            callbackContext.error("Unknown Host "+host+":"+port);
        } catch (IOException e) {
            Log.d("TCPSockets", e.getMessage());
            callbackContext.error(e.getMessage());
        } catch(Exception e){
            Log.d("TCPSockets", "Errore Generico "+e.getMessage());
            callbackContext.error("Errore Generico "+e.getMessage());
        } 
```

当我跑步时......

```
02-04 18:12:15.198: D/TCPSockets(10875): Created reader/writer
02-04 18:12:15.198: D/TCPSockets(10875): Sent message
02-04 18:12:15.218: D/TCPSockets(10875): 6
02-04 18:12:16.218: E/dalvikvm(10875): JNI ERROR (app bug): attempt to use stale local reference 0x1
02-04 18:12:16.218: E/dalvikvm(10875): VM aborting
02-04 18:12:16.218: A/libc(10875): Fatal signal 11 (SIGSEGV) at 0xdeadd00d (code=1) 
```

如果我删除对回复的阅读，则代码可以正常工作。请帮助我:(谢谢

# java - Google App Engine LogService 的开发/测试版本

> ID：14692175
> 
> 赞同：2
> 
> 时间：2013-02-04T17:33:30.387
> 
> 标签：java, google-app-engine, service, jar, classpath

我正在尝试使用 Google App Engine 的“测试”或“开发”版本，[`LogService`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/log/LogService)以便可以在 GAE 之外的单元测试中使用它。

我在我的类路径中包含了`appengine-testing.jar`,`appengine-api.jar`并`appengine-api-stubs.jar`看到一个看起来像我想要的类：

> com.google.appengine.api.log.dev.LocalLogService

当我创建它的一个实例并尝试寻找一种`fetch(LogQuery)`方法时，我看不到任何方法。很明显，这不是我要找的课程。我哪里错了？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T19:06:01.890

只需使用[Mockito](http://code.google.com/p/mockito/)之类的东西来模拟 GAE `LoggingService`：

```
@Test
public void myUnitTest() {
    // Given
    MyPojo fixture = new MyPojo();

    LoggingService mockService = Mockito.mock(Logging.Service);

    Mockito.doNothing().when(mockService).fetchLogs(Mockito.any());

    fixture.setLoggingService(mockService);

    // When
    fixture.logSomethingToGAELogs("Some string to log");

    // Then - verify
    Mockito.verify(mockService).fetchLogs("Some string to log");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T21:50:16.940

我相信[com.google.appengine.api.log.dev.LocalLogService](http://www.jarvana.com/jarvana/view/com/google/appengine/appengine-java-sdk/1.6.1/appengine-java-sdk-1.6.1.zip!/appengine-java-sdk-1.6.1/docs/testing/javadoc/com/google/appengine/api/log/dev/LocalLogService.html)是您正在寻找的那个，它具有与[com.google.appengine.api.log.LogService](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/log/LogService)不同的类签名的原因是 LocalLogService 只是一个期待或半生不熟的实施。这个类可能会在未来的版本中改变。

如果您查看[LogService 源](http://code.google.com/p/googleappengine/source/browse/trunk/java/src/main/com/google/appengine/api/log/LogServiceImpl.java?r=229)，则 fetch 方法返回形成为 Iterable<RequestLogs> 的日志记录。在 LocalLogService 中，它不是从实时应用服务器获取日志记录，而是简单地从内存中读取日志记录（形成为 LogReadResponse，通常是 Iterable<RequestLogs> 的包装器）。以下示例代码演示了它是如何工作的：

```
public void foo() {
  String requestId = "1234";

  localLogService = new LocalLogService();

  // Mock a request log record:
  localLogService.addRequestInfo("sample-app", "1", requestId, null, null, startTimeUsec, endTimeUsec, 
          "GET", "", "HTTP/1.1", null, true, 200, null);

  // Mock an app log record:
  localLogService.addAppLogLine(requestId, startTimeUsec, 2, "this is a sample log message.");   

  LogReadRequest request = new LogReadRequest();
  // Filter request 1234:
  request.addRequestId(requestId);
  // Version id must match the one you just mocked, do not use dot in-between:
  request.addVersionId("1");
  request.setIncludeIncomplete(true);
  request.setIncludeAppLogs(true);

  Status status = new Status();
  status.setSuccessful(true);

  // Read mocked log records from memory:
  LogReadResponse response = localLogService.read(status, request);

  for (RequestLog log : response.logs()) {
    System.out.println("request log: " + log.getCombined());
    for (LogLine line : log.lines()) {
      System.out.println("app log: " + line.getLogMessage());
    }
  }
} 
```

样本输出：

> 请求日志：- - - [8/Feb/2013:09:51:13 -0800] "GET HTTP/1.1" 200 - - -
> 应用程序日志：这是一个示例日志消息。

为了更好的代码设计，您可以将 LocalLogService 包装到 LogService 的实现中，以使类签名更加一致。

# c# - 基于 TCP 套接字的 XML

> ID：14692181
> 
> 赞同：2
> 
> 时间：2013-02-04T17:33:46.660
> 
> 标签：c#, xml, sockets, tcp

我想知道是否有人可以帮助我解决我遇到的一个小问题。

我将收到一个将通过 tcp 套接字发送的 xml 文件。我正在尝试创建一个可以充当服务器并通过 tcp 套接字发送 xml 文件的小型应用程序。然后我可以开始测试我的初始应用程序，它将接收和处理这个 xml 文档。

我已经尝试过谷歌并在这个问题上一直遇到死胡同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T00:35:54.787

一种可能的解决方案是将 xml 作为一系列字符串或作为字节数组加载并发送。字节数组方法可能是最简洁的，使用[网络库 networkcomms.net](http://www.networkcomms.net)调用发送的应用程序看起来像这样：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NetworkCommsDotNet;

namespace Client
{
    class Program
    {
        static void Main(string[] args)
        {
            byte[] bytesToSend = File.ReadAllBytes("filename.xml");
            TCPConnection.GetConnection(new ConnectionInfo("127.0.0.1", 10000)).SendObject("XMLData", bytesToSend);

            Console.WriteLine("Press any key to exit client.");
            Console.ReadKey(true);
            NetworkComms.Shutdown();
        }
    }
} 
```

和服务器：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

using NetworkCommsDotNet;

namespace Server
{
    class Program
    {
        static void Main(string[] args)
        {
            NetworkComms.AppendGlobalIncomingPacketHandler<byte[]>("XMLData", (packetHeader, connection, incomingXMLData) => 
            {
                    Console.WriteLine("Received XMLData");
                    File.WriteAllBytes("filename.xml", incomingXMLData);
            });

            TCPConnection.StartListening(true);

            Console.WriteLine("Server ready. Press any key to shutdown server.");
            Console.ReadKey(true);
            NetworkComms.Shutdown();
        }
    }
} 
```

您显然需要从网站下载 NetworkCommsDotNet DLL，以便可以将其添加到“使用 NetworkCommsDotNet”参考中。另请参阅客户端示例中的服务器 IP 地址当前为“127.0.0.1”，如果您在同一台机器上同时运行服务器和客户端，这应该可以工作。有关更多信息，还请查看[入门](http://www.networkcomms.net/getting-started/)或[如何创建客户端服务器应用程序](http://www.networkcomms.net/how-to-create-a-client-server-application-in-minutes/)文章。

# visual-studio-2010 - 使用 Verisign 签名时未知发布者

> ID：14692182
> 
> 赞同：0
> 
> 时间：2013-02-04T17:33:48.857
> 
> 标签：visual-studio-2010, code-signing, verisign

我之前尝试过解决这个问题，但我无法完全解决它。任何建议，将不胜感激。

我有一个正在 Visual Studio 2010 中开发的解决方案，它有几个与之相关的项目。由于该解决方案安装了一项服务和一个托盘应用程序来控制它，因此该托盘必须以管理员身份运行。

我正在使用 Verisign 证书对每个 dll 和 exe 进行签名，并且日志报告签名成功。起初，我在构建安装程序之前使用脚本对所有内容进行签名。然后我尝试在之前和之后签署所有内容。最近，我认为我已经通过将每个项目的签名移动到项目的构建后事件来解决了这个问题。

安装公司名称时显示在发布者下，因此我知道安装程序文件已正确签名。安装后，应用程序启动时会出现问题。出现 UAC 安全弹出窗口，但发布者列为未知。

我为每个项目添加了一个构建后事件，类似于：

c:\Verisign\signtool.exe 签名 /f "c:\Verisign\Certificate.2012.pfx" /p 密码 /t [http://timestamp.verisign.com/scripts/timstamp.dll](http://timestamp.verisign.com/scripts/timstamp.dll) "C:\Code\Service \bin\App.dll"

看来这应该可行。谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-19T18:27:29.643

我终于设法弄清楚我在这里做错了什么。我正在使用 Windows 安装程序，该安装程序将项目输出用于文件。虽然这些文件是在 bin 文件夹中签名的，但在安装应用程序后它们不再签名。

我没有使用项目输出，而是手动添加了我想要包含在安装程序中的所有 DLL 和 EXE 文件。完成此操作后，当 UAC 弹出窗口出现时，公司名称开始出现。

我更喜欢使用项目输出，因为它看起来更加集成，但我更希望有一个可行的解决方案。

# javascript - 使用 JavaScript 阅读“hidden_ elem”评论

> ID：14692191
> 
> 赞同：2
> 
> 时间：2013-02-04T17:34:38.087
> 
> 标签：javascript, html, getelementsbyclassname

我正在尝试为我正在制作的新网站缩小一些网络代码的范围。我发现这个答案似乎是我正在寻找的，但我无法让它工作：[https ://stackoverflow.com/questions/13483194#13483649](https://stackoverflow.com/questions/13483194#13483649)

我正在尝试非 jQuery 答案，但我似乎遗漏了一些东西，因为当我将页面加载到 Firefox 中并按下按钮时它没有做任何事情。我正在使用 phpDesigner 软件，将复制粘贴到 .htm 文件中，然后在 Firefox 中运行。

这是我做的代码：

**JavaScript：**

```
// https://stackoverflow.com/a/5158301/74757
function getParameterByName(name, path) {
    var match = RegExp('[?&]' + name + '=([^&]*)').exec(path);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
}

var hiddenElHtml = document.getElementsByClassName('hidden_elem')[0].innerHTML.replace('<!--', '').replace('-->', '');

var divObj = document.createElement('div');
divObj.innerHTML = hiddenElHtml;

var itemAnchor = divObj.getElementsByClassName('itemAnchor')[0];
var href = itemAnchor.getAttribute('href');

var fbId = getParameterByName('h', href);

alert(fbId); 
```

**HTML：**

```
<code class="hidden_elem" id="ukftg4w44">
    <!-- <div class="mtm mlm">
     ...
      ....
    <span class="itemLabel fsm">Unfriend...</span></a></li>
    <li class="uiMenuItem" data-label="Report/Block...">
    <a class="itemAnchor" role="menuitem" tabindex="-1" href="/ajax/report/social.php?content_type=0&amp;cid=1352686914&amp;rid=1352686914&amp;ref=http%3A%2F%2Fwww.facebook.com%2F%3Fq&amp;h=AfjSxEzzdTSrz-pS&amp;from_gear=timeline" rel="dialog">
    <span class="itemLabel fsm">Report/Block...</span></a></li></ul></div>
     ....
    ...
    </div> -->
</code>

<button onclick="getParameterByName()">Try it</button> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:16:21.667

你几乎完成了，看看这个小提琴，它的工作原理：http:
[//jsfiddle.net/promatik/qyeWT/](http://jsfiddle.net/promatik/qyeWT/)

我把你所有的代码放在一个函数中，`getAttributes()`我添加了另一个属性只是为了更好地测试你的问题：

```
var fbId = getParameterByName('h', href);
var cId = getParameterByName('cid', href);

document.getElementById('parameter-h').innerHTML  = fbId;
document.getElementById('parameter-cid').innerHTML  = cId;

alert(fbId + "\n" + cId); 
```

HTML：

```
<div><span>HREF = </span><span id="parameter-h"></span></div>
<div><span>CID = </span><span id="parameter-cid"></span></div>
<button id="tryagain">Try it</button> 
```

该按钮有一个事件监听器：

```
document.getElementById("tryagain").addEventListener("click", getAttributes, false); 
```

# java - java中的决策

> ID：14692197
> 
> 赞同：-2
> 
> 时间：2013-02-04T17:35:25.820
> 
> 标签：java, if-statement

```
private Object artikanID(String string) {

        try {

            DAOTerjemah dao = new DAOTerjemah(ConnectionDB.getConnection()) {};
            List<Kata> terjemahan1 = new ArrayList<Kata>();
            List<Kata> terjemahan2 = new ArrayList<Kata>();
            List<Kata> terjemahan3 = new ArrayList<Kata>();

            terjemahan1 = dao.getByIndo(string);
            terjemahan2 = dao.getByIndo(string.substring(0,string.length()-1));
            terjemahan3 = dao.getByIndo(string.substring(0,string.length()-2));

            if (terjemahan1 == null) {
                return terjemahan1.get(0).getDayak();
            }            
            else {
                return terjemahan2.get(0).getDayak();
            }     
        }catch(Exception e){
            return string ;
        }
    } 
```

有 3 个条件（terjemahan1,terjemahan2 & terjemahan 3），如何创建条件来执行 terjemahan3 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:37:11.770

有一个`else`，但我不完全确定我理解你的逻辑。

```
 if (terjemahan1 == null) {
        return terjemahan1.get(0).getDayak();
    }            
    else if (terjemahan2 == null) {
        return terjemahan2.get(0).getDayak();
    }  
    else  {
        return terjemahan3.get(0).getDayak();
    } 
```

我认为你可能想要相反的结果，所以你只在不是`null`. 在这种情况下，您必须决定要优先调用哪一个（如果它们都不是）`null`。此外，如果所有这些都为空，您还必须决定该怎么做。

```
 if (terjemahan1 != null) {
        return terjemahan1.get(0).getDayak();
    }            
    else if (terjemahan2 != null) {
        return terjemahan2.get(0).getDayak();
    }  
    else if (terjemahan3 != null) {
        return terjemahan3.get(0).getDayak();
    }
    else
    {
       // decide what to do in this condition
    } 
```

# c# - 使用c#从代理服务器下载文件

> ID：14692201
> 
> 赞同：3
> 
> 时间：2013-02-04T17:35:31.803
> 
> 标签：c#, .net

我想使用代理连接下载文件。我的示例代码是：

```
 WebClient client = new WebClient();
        WebProxy wp = new WebProxy("url_proxy_server");
        //wp.Credentials = new NetworkCredential("id", "pass", "domain");
        client.Proxy = wp;
        client.DownloadFile("http:mylink", "Save Path"); 
```

这是正确的下载模式吗？我如何设置端口号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:39:10.537

使用其他构造函数 (String, Int32)

`WebProxy wp = new WebProxy("http://contoso", 80);`

[http://msdn.microsoft.com/en-us/library/xfsh37cx.aspx](http://msdn.microsoft.com/en-us/library/xfsh37cx.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-11T11:05:41.587

您还可以在代理 url 中指定端口

```
WebProxy wp = new WebProxy("url_proxy_server:proxyPort"); 
```

# java - 无法获取当前 GPS 位置坐标

> ID：14692202
> 
> 赞同：1
> 
> 时间：2013-02-04T17:35:40.150
> 
> 标签：java, android, google-maps, android-maps, google-maps-mobile

我一直在努力获取我当前位置的 GPS 坐标，但我的应用程序从不锁定 GPS 卫星。

通知区域中的 GPS 图标一直闪烁。

而我尝试在 Android 上使用谷歌地图（预安装的应用程序）并且该东西能够在大约 60 秒内锁定！在这两种情况下，我的 3G 数据连接都已打开并正常工作。

**更新**：我使用的是 Android 2.3.3（HTC Desire S（工厂安装的操作系统；未应用更新））Logcat 输出在[这里](http://pastebin.com/hvY67Lq9)。现在这没有设置`LocationUpdates()`更新到 0、0 之间的最小时间和最小距离。

**更新 #2：**我之前的代码在[这里](http://pastebin.com/Wm6h9VFV)（PasteBin 链接）。

**更新#3：**现在，在显示 Toast .."Available".. in on 后，我正在强制关闭`onStatusChanged()`。

**更新#4：**终于..我让它工作了。

——
那么，谷歌地图的应用程序是否使用了一些专有代码来锁定 GPS 信号？我尝试过使用各种版本的代码。尝试使用标准，但从未让它们与 GPS 一起使用。对我来说，通过 GPS 获得精确（约 50 英尺精度）的位置坐标是必须的。

我的代码：

```
public class LocationDemoActivity extends Activity implements LocationListener {
    LocationManager locationManager;
    StringBuilder builder;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000l, 50.0f, this);
    }

    @Override
    protected void onPause() {
        // TODO Auto-generated method stub
        super.onPause();
        locationManager.removeUpdates(this);
        locationManager = null;
        Intent i = new Intent(
                android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(i);

    }

    @Override
    public void onLocationChanged(Location location) {
//      builder = new StringBuilder();
        double lati=location.getLatitude();
        double longi=location.getLongitude();
        double alti=location.getAltitude();
        float acc=location.getAccuracy();
        float speed=location.getSpeed();
        long time=location.getTime();

        System.out.println(lati);
        System.out.println(longi);
        System.out.println(alti);
        System.out.println(acc);
        System.out.println(speed);
        System.out.println(time);

        /*Toast.makeText(this, "Lati: " + lati,Toast.LENGTH_SHORT).show();
        Toast.makeText(this, "Long: " + longi,Toast.LENGTH_SHORT).show();
        Toast.makeText(this, "Alti: " + alti,Toast.LENGTH_SHORT).show();
        Toast.makeText(this, "Acc.: " + acc,Toast.LENGTH_SHORT).show();
        Toast.makeText(this, "Speed: " + speed,Toast.LENGTH_SHORT).show();
        Toast.makeText(this, "Time: " + time,Toast.LENGTH_SHORT).show();*/

        builder.append("Longitide: " + location.getLongitude());
        builder.append('\n');
        builder.append("Latitude: " + location.getLatitude());
        builder.append('\n');
        builder.append("Altitude: " + location.getAltitude());
        builder.append('\n');
        builder.append("Accuracy: " + location.getAccuracy());
        builder.append('\n');
        builder.append("TimeStamp:" + location.getTime());
        builder.append('\n');
        System.out.println(builder.toString());

        Toast.makeText(this, builder.toString(), Toast.LENGTH_LONG).show();

    }

    @Override
    public void onProviderDisabled(String provider) {
        System.out.println("Provider Disabled:");
        Intent intent = new Intent(android.provider.Settings.ACTION_LOCATION_SOURCE_SETTINGS);
        startActivity(intent);
    }

    @Override
    public void onProviderEnabled(String provider) {
        System.out.println("Provider Enabled:");
        Toast.makeText(this, "GPS is now enabled...", Toast.LENGTH_LONG).show();
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        switch (status) {
        case LocationProvider.OUT_OF_SERVICE:
            System.out.println("Status Changed: Out of Service");
            Toast.makeText(this, "Status Changed: Out of Service",
                    Toast.LENGTH_SHORT).show();
            break;
        case LocationProvider.TEMPORARILY_UNAVAILABLE:
            System.out.println("Status Changed: Temporarily Unavailable");
            Toast.makeText(this, "Status Changed: Temporarily Unavailable",
                    Toast.LENGTH_SHORT).show();
            break;
        case LocationProvider.AVAILABLE:
            System.out.println("Status Changed: Available");
            Toast.makeText(this, "Status Changed: Available",
                    Toast.LENGTH_SHORT).show();
            break;
        }
    }

} 
```

请回答，因为这对我来说非常紧迫，任何帮助都是非常可观的:)

谢谢..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:14:17.460

很明显，您不会获得任何位置更新，因为您已将 minDistance 设置为 50 米或 164.042 英尺。您似乎将其与准确性混淆了。

该`minDistance`参数是位置更新之间的最小距离。因此，您必须至少移动 50 米才能获得位置更新。

还要确保您可以清楚地看到天空，以便获得 GPS 信号。

在文档中阅读更多信息

[http://developer.android.com/reference/android/location/LocationManager.html](http://developer.android.com/reference/android/location/LocationManager.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T07:04:14.480

[我在这里](https://stackoverflow.com/questions/14641019/experience-of-location-services-on-android-using-gps-and-network-providers)问了一个相关的问题。

在我看来，您手机上的 GPS 无法看到卫星。您需要让我们的办公室/家中露天。就我而言，我搬到了`NetworkProvider`GPS 太笨拙了。

另请注意，您为距离和时间提供的参数不是文字，它`best guess`是 api 制作的。所以不要指望 API 回调的响应时间/距离。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:39:00.580

您是否拥有所有这些清单权限？

```
ACCESS_COARSE_LOCATION

ACCESS_FINE_LOCATION

ACCESS_LOCATION_EXTRA_COMMANDS

ACCESS_MOCK_LOCATION

CONTROL_LOCATION_UPDATES

INTERNET 
```

# windows - 如何让我的 ActiveX 控件显示在 Visual Studio（和其他）的工具箱中

> ID：14692203
> 
> 赞同：3
> 
> 时间：2013-02-04T17:35:41.210
> 
> 标签：windows, visual-studio, delphi, activex, dbase

我在 Delphi 中编写了一系列 ActiveX 控件以用于其他开发环境（例如 Visual Studio 或 Windows 的 dBASE，作为两个示例）

我使用作为 RAD Studio IDE 的一部分提供的 ActiveX 向导为我的基于 VCL 的控件生成 ActiveX“绑定”（需要更好的词），但是它似乎没有生成使它们出现在 IDE 上所必需的源代码组件托盘。

通常在那些 IDE（Visual Studio 和 dBASE Plus）上，我可以简单地导入一个 ActiveX 控件，它将显示在他们的工具箱（他们的组件托盘版本）上，并带有他们定义的图标。

好吧，我自己在 Delphi 中生成的 ActiveX 控件没有（它们导入得很好，但没有出现在托盘/工具箱上），过去两周我一直在搜索谷歌试图找到一个解决方案。

惨遭失败，我决定在这里问：

**如何让我的 ActiveX 控件显示在 Visual Studio（和其他）的工具箱中？**

感谢您的任何建议/建议。

编辑：一些额外的信息......

我一直在尝试对 XE2 和 XE3 执行此操作，但每次都失败了……但是，当我对 Delphi 2007 执行相同的操作（使用向导）时，组件的图标确实出现在 Pallet/根据需要其他 IDE 的工具箱。这意味着该问题是在 Delphi 2007 之后的某个时间引入的，并且可能是某些 RTL/VCL 修改的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T02:03:14.060

我的研究得出的结论是，Unicode 版本的 Delphi（2009 到 XE3）不会使用提供的向导为 ActiveX 控件生成正确的标记。

此外，自 Delphi 2007 以来对 RTL 和 VCL 的更改意味着，即使您手动生成必要的源代码标记，您的控件在嵌入非 Delphi 应用程序（例如 Visual Studio 和 dBASE Plus）时也不会正常运行。这在很大程度上与 VCL 对符合 VCL 的`Parent`属性值的假设有关，其中属性的更新`ParentFont`将导致访问冲突错误。

就我而言，解决方案是在 Delphi 2007 中生成导出的 ActiveX 控件（它是与其他 ActiveX 控件消费者“公平竞争”的最新版本）

希望这些信息可以为您省去为了得出这个结论而必须经历的漫长而烦人的事实调查过程。

# java - 扩展和折叠表格的图标上的 Javascript 无法使用输入按钮

> ID：14692206
> 
> 赞同：0
> 
> 时间：2013-02-04T17:35:45.690
> 
> 标签：java, javascript, jsp

我在这个页面上有一个可点击的 +/- 图标，当用户在 jsp 页面中点击它时，它会展开和折叠信息表，但问题是如果用户点击这个图标并尝试展开/折叠它按回车键，javascript 不会运行；由于某种原因，它仅适用于鼠标单击。这是我在jsp页面上的内容：

```
<td>
<a onclick="hideShowTable(${count}, this.id)" style="cursor:hand"
title="Expand/Collapse Table" tabindex="40"
id="eCTable${count}"
>+  
</a>
</td> 
```

在 js 文件中执行这个函数：

```
function hideShowTable(tableCounter, id)
{
    //Loop through all rows of the month
    for(i=1; i<=12; i++)
    {
    var tableElm = document.getElementById("tableMonth"+ i +"_"+tableCounter);

    //Hide or show the div tag
    if (tableElm .style.display == "block"){
        tableElm .style.display = "none";
        document.getElementById(id).innerText="+";
    }
    else{
        tableElm .style.display = "block";
        document.getElementById(id).innerText="-";
    }

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:52:18.197

描述说：

`onclick`当指针设备按钮在元素上单击时发生该事件。此属性可用于大多数元素。

我认为您可以尝试使用表单`onsubmit()`而不是`onclick()`. 试一下..

# java - Java 命名变量的正确语法

> ID：14692209
> 
> 赞同：-3
> 
> 时间：2013-02-04T17:35:52.820
> 
> 标签：java, variables, syntax

> **可能重复：**
> [Java 编码风格的资源？](https://stackoverflow.com/questions/4581231/resources-for-java-coding-style)

所以我选择java作为我学习的第一语言，在我正在阅读的书中，他们定义了一个像这样的变量

```
int  apples; 

apples  =  20; 
```

然后我自己去尝试这个例子并像下面那样编写它，它仍然编译没有任何错误，直到现在我才注意到差异。我想知道为什么我编写它的方式有效，这是更好的写法，这样我就不会开始养成任何坏习惯。提前TY=D

```
int Var=3; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:38:29.313

查看 java 的[代码约定](http://www.oracle.com/technetwork/java/codeconv-138413.html)。

基本上，骆驼案一切。小写从变量、方法和包开始，大写从类开始。

你的两个例子都是有效的。在一个语句中声明和实例化的第二种形式是第一种形式中两个单独行的快捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:40:26.327

通常变量是小写的“var”，类型（类、对象）是大写的“Var”

你的例子是

```
int var = 3; 
```

如果 Var 是一个对象，它将是

```
Var var = new Var(); 
```

[http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:41:31.043

之间没有有用的区别

```
int a;
a = 2; 
```

和

```
int a = 2; 
```

但第二种是比第一种更受欢迎的风格。来自[官方 Java 编码约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconventions-141270.html#18761)：

> 尝试在声明它们的地方初始化局部变量。不初始化声明变量的唯一原因是初始值是否取决于首先发生的某些计算。

# html - 输入按钮样式为 FF 和 IE 中的链接

> ID：14692213
> 
> 赞同：2
> 
> 时间：2013-02-04T17:36:03.817
> 
> 标签：html, css, firefox

我正在使用 CSS 使输入按钮看起来像一个链接。

我已经这样设计了它：

```
input#linkLike {
    background: none;
    border: none;
    cursor: pointer;
    margin: 0;
    padding: 0;
    text-decoration: none;
    font-weight: bold;
    font-size: 12px;
    display: inline;
    vertical-align: baseline;
} 
```

这在 Chrome 中运行良好，但在 Ff 中的按钮周围有一个空格，在 IE 中有一个更大的空格。

[http://jsfiddle.net/S4nF9/5/](http://jsfiddle.net/S4nF9/5/)

这个空格来自哪里，我该如何删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:03:42.683

根据[这个页面](http://ovms.co/2010/06/fix-firefox-button-padding/)，

> Firefox 在按钮元素本身中使用伪元素进行绘图。正如您在上面看到的，这意味着在这个内部伪元素的顶部和底部添加了 2px 的填充，因此可以将其删除，如下所示：

```
button::-moz-focus-inner,
input[type="button"]::-moz-focus-inner,
input[type="submit"]::-moz-focus-inner,
input[type="reset"]::-moz-focus-inner {
    padding: 0 !important;
    border: 0 none !important; 
} 
```

所以这就是 Firefox 的处理。见[新小提琴](http://jsfiddle.net/S4nF9/16/)。
（注意：文章提到了顶部和底部，但它也适用于左右填充。）

我这里没有 IE，所以我现在无法测试，抱歉。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:40:35.330

你可以给它一个宽度值。

# php - php和tomcat配置

> ID：14692222
> 
> 赞同：0
> 
> 时间：2013-02-04T17:36:25.607
> 
> 标签：php, tomcat, configuration

我必须在 php 中为我的工作编辑一些项目。我也承认我完全是 php 的菜鸟。我尝试配置 php 和 tomcat 6.0 但没有成功。我制作了本教程中的所有内容：http: [//blog.jackneer.com/2008/10/php-5-on-tomcat-6-installation.html](http://blog.jackneer.com/2008/10/php-5-on-tomcat-6-installation.html) 但我遇到了一个错误：

> 类型异常报告
> 
> 消息包装器找不到 servlet 类 net.php.servlet 或它所依赖的类
> 
> 描述 服务器遇到一个内部错误，阻止它完成这个请求。
> 
> 异常 javax.servlet.ServletException: Wrapper 找不到 servlet 类 net.php.servlet 或它依赖的类 org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) org.apache.catalina.connector.CoyoteAdapter .service(CoyoteAdapter.java:293) org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:879) org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600) org.apache .tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703) java.lang.Thread.run(Thread.java:722)
> 
> 根本原因 java.lang.ClassNotFoundException: net.php.servlet org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1680) org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1526) org .apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:103) org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293) org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java :879) org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:600) org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1703) java.lang.Thread .run(Thread.java:722)
> 
> note Apache Tomcat/6.0.36 日志中提供了根本原因的完整堆栈跟踪。

我在谷歌上搜索，但没有发现任何有用的东西。你知道我该怎么做吗？我想在 tomcat 上做，但如果必须，我使用不同的服务器。但是哪个最适合使用 php？当然也很容易配置 :) 在此先感谢您的帮助。

# c - 使用单个管道的矩阵乘法

> ID：14692224
> 
> 赞同：-1
> 
> 时间：2013-02-04T17:36:34.350
> 
> 标签：c, pipe

我想编写一个`c`代码，使子级使用管道将两个矩阵发送给父级，然后父级将进行矩阵乘法并将结果矩阵发送回子级。我知道如何使用两个管道编写此程序，但我想知道如何使用单个管道编写此程序。

任何人都可以提供`c`相同的代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:04:13.743

管道不是双向的。

试试插座。或者使用两个管道。

# php - 从 php 中的数据库获取结果并将它们作为循环输出以在 javascript 中显示

> ID：14692226
> 
> 赞同：0
> 
> 时间：2013-02-04T17:36:34.640
> 
> 标签：php, javascript, mysql

我有这个代码我正在尝试输出这个：

```
{
    title:"<?php echo $sender_fullname; ?>",
    mp3:"link",
}, 
```

在 php 中使用它在 javascript 中显示它

```
//database include
require_once "db.php";

//get email from session 
$email = $_SESSION['username'];

//fetch user fullname and  id based on session
$name_query = mysql_query("SELECT fullname,id FROM users WHERE email = '$email'");
$name = mysql_fetch_object($name_query);

//fecth sender id, receiver id, audioclip, fullname and email
$query = "SELECT m.sender,m.receiver, m.audioclip, u.fullname, u.email 
                     FROM `users` AS u 
                     JOIN `messages` AS m ON m.receiver = u.id 
                     WHERE u.email = '".$email."'";

$result = mysql_query($query); 
```

这是循环我应该怎么做才能输出相同的内容

```
while(
        $row = mysql_fetch_assoc($result)) { 
        $sender = $row['sender'];
        $sender_name_query = mysql_query("SELECT fullname FROM users WHERE id = '$sender'");
        $sender_name = mysql_fetch_object($sender_name_query);
        $sender_fullname = $sender_name->fullname;
        echo '{<br/>title:".'$sender_fullname'.",<br/>mp3:"link",<br/>},';      
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:49:25.657

错误是由最后一行引起的：

```
echo '{<br/>title:".'$sender_fullname'.",<br/>mp3:"link",<br/>},'; 
```

应该是这样的：

```
echo '{<br/>title:"' . $sender_fullname . '",<br/>mp3:"link",<br/>},'; 
```

* * *

**注1**

你可以这样写：

```
$sender_fullname = $sender_name->fullname;
echo '{<br/>title:"' . $sender_fullname . '",<br/>mp3:"link",<br/>},'; 
```

容易为：

```
echo '{<br/>title:"' . $sender_name->fullname. '",<br/>mp3:"link",<br/>},'; 
```

* * *

**笔记2**

[**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://www.brightmeup.info/article.php?a_id=2)。

^(来自[http://brightmeup.info/comment.html](http://brightmeup.info/comment.html))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:46:18.177

将 php 转换为 javascript 的最佳方法是通过 php 的 [json_encode](http://www.php.net/manual/en/function.json-encode.php)使用 JSON 。

```
$rows = array();
while($row = mysql_fetch_assoc($result)) { 
    $sender = $row['sender'];
    $sender_name_query = mysql_query("SELECT fullname FROM users WHERE id = '$sender'");
    $sender_name = mysql_fetch_object($sender_name_query);
    $sender_fullname = $sender_name->fullname;
    $row['sender'] = $sender_fullname;
    $rows[] = $row;
}   

echo "<script type='text/javascript'>";
echo "var rows = " . json_encode($rows) . ";";
echo "</script>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:45:06.067

你可以做一些像：

```
while(
        $row = mysql_fetch_assoc($result)) { 
        $sender = $row['sender'];
        $sender_name_query = mysql_query("SELECT fullname FROM users WHERE id = '$sender'");
        $sender_name = mysql_fetch_object($sender_name_query);
        $sender_fullname = $sender_name->fullname;
        echo '{<br/>title:".'$sender_fullname'.",<br/>mp3:"link",<br/>},';
        print "<script>alert(\"$sender_fillname\")</script>";
    } 
```

然后脚本标记中的代码像 javascript 代码一样运行，如果你想将 php 变量的值放入 javascript 变量中，你可以这样做：

```
<?
    $mivar = "hola mundo";
    print "<script>";
    print "var mivar = \"$mivar\"";
    print "</script>";
?> 
```

# c# - Lucene.net/Lucene 的最低分数？

> ID：14692228
> 
> 赞同：2
> 
> 时间：2013-02-04T17:36:38.260
> 
> 标签：c#, lucene, lucene.net

是否可以设置在 Lucene 中返回结果的最低分数？

我有这个功能：

```
public Tuple<int,ICollection<Guid>> Search(string searchQuery,int maxResults)
{
    var booleanQuery = new BooleanQuery();
    var s1 = new TermQuery(new Term("companyName", searchQuery));
    booleanQuery.Add(s1, Occur.SHOULD);

    using (var searcher = new IndexSearcher(this.Directory))
    {
        TopDocs hits = searcher.Search(booleanQuery, maxResults);

        var ids = new List<Guid>();
        for (int i = 0; i < hits.ScoreDocs.Count(); i++)
        {
            var idString = searcher.Doc(hits.ScoreDocs[i].Doc).Get("id");
            ids.Add(new Guid(idString));
        }
        return new Tuple<int, ICollection<Guid>>(hits.TotalHits, ids);
    }
} 
```

该函数搜索我的索引并返回与 searchQuery 匹配的公司的 ID，以及与搜索匹配的公司总数 - 因此我可以编写“显示 245 家匹配公司中的 1-20 家”。

我的问题是比赛的门槛很低。如果用户输入“accountant”，则搜索返回有意义的结果，但如果他们输入“adasdfsdf”，则返回不相关的结果。如果结果不够相关，我宁愿显示一条消息，如“抱歉，没有公司符合您的查询”。

是否可以为比赛设置最低分数？物业会`TopDocs.TotalHits`尊重这个分数吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:37:16.853

简而言之，没有。您不能真正在 Lucene 中创建最低分数截止点。这是一个[关于为什么不的讨论](http://wiki.apache.org/lucene-java/ScoresAsPercentages)。请注意，所讨论的案例与您所要求的略有不同，但困难大致相同（事实上，提供一个合理的分界点以用于不同的独立查询会引入更大的，尽管密切相关，困难）。

解决这个问题的更好方法是设计您的查询，这样您就不会得到不相关的结果。在您的示例中，我真的不明白为什么您会看到很多不相关的结果，所以我假设查询中添加了其他术语。在这种情况下，如果您只想获取`new Term("companyName", searchQuery)`匹配的文档，则应使用`Occur.MUST`booleanClause 添加它，例如：

```
var booleanQuery = new BooleanQuery();
var s1 = new TermQuery(new Term("companyName", searchQuery));
booleanQuery.Add(s1, Occur.MUST); 
```

* * *

为了进一步解释，`Occur.MUST`and`Occur.SHOULD`是你的问题。如果您有如下查询：

```
category:type1 companyName:asdfdas 
```

并且在 companyName 上没有结果，那么您只会看到 query 的结果`category:type1`。如果您确实与 companyName 匹配，则这些结果将被判断为具有更高的相关性，并且会首先显示，但它仍然会显示与该类别匹配的所有内容，只是在列表中较低的位置。在该示例中，这两个术语都添加了[`BooleanClause.Occur.SHOULD`](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/BooleanClause.Occur.html#SHOULD)，因此两者都是可选的（尽管在任何结果中仍必须找到至少一个匹配的术语）。

如果您希望仅显示与类别和公司名称都匹配的术语，则应使用[`BooleanClause.Occur.MUST`](http://lucene.apache.org/core/4_0_0-BETA/core/org/apache/lucene/search/BooleanClause.Occur.html#MUST). 使用查询语法，这看起来像：

```
+category:type1 +companyName:asdfdas 
```

或者构建一个 BooleanQuery：

```
var s1 = new TermQuery(new Term("companyName", "asdfdas"));
booleanQuery.Add(s1, Occur.MUST);
var s1 = new TermQuery(new Term("category", "type1"));
booleanQuery.Add(s1, Occur.MUST); 
```

# time-series - 使用 R 组合时间序列图

> ID：14692234
> 
> 赞同：0
> 
> 时间：2013-02-04T17:26:52.143
> 
> 标签：time-series

我想在一张图上组合三个图形。来自 R 内部的数据，即“nottem”。有人可以帮助我编写代码以使用不同的颜色将季节性均值和谐波（余弦模型）及其时间序列图放在一起吗？我已经编写了模型代码，只是不知道如何将它们组合在一起进行比较。

```
Code :library(TSA)
  nottem
  month.=season(nottem)
  model=lm(nottem~month.-1)
  summary(nottem)
  har.=harmonic(nottem,1)
  model1=lm(nottem~har.)
  summary(model1)
plot(nottem,type="l",ylab="Average monthly temperature at Nottingham castle") 
points(y=nottem,x=time(nottem), pch=as.vector(season(nottem))) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:19:37.943

该图很难阅读，因为您的三组值非常相似。尽管如此，如果您只想在样本图上绘制所有这些图形，您可以使用模型生成的系数轻松完成。

**第 1 步**：绘制原始数据。这来自您的原始代码。

```
plot(nottem,type="l",ylab="Average monthly temperature at Nottingham castle") 
```

**第 2 步**：为均值图和余弦图设置 x 值。

```
x <- seq(1920, (1940 - 1/12), by=1/12) 
```

**第 3 步**：通过重复第一个模型的系数来绘制季节性均值。

```
lines(x=x, y=rep(model$coefficients, 20), col="blue") 
```

**第 4 步**：使用来自第二个模型的系数计算余弦函数的 y 值，然后绘图。

```
y <- model1$coefficients[2] * cos(2 * pi * x) + model1$coefficients[1]
lines(x=x, y=y, col="red") 
```

**ggplot 变体**：如果您决定为您的绘图切换到流行的“ggplot2”包，您可以这样做：

```
x <- seq(1920, (1940 - 1/12), by=1/12)
y.seas.mean <- rep(model$coefficients, 20)
y.har.cos <- model1$coefficients[2] * cos(2 * pi * x) + model1$coefficients[1]

plot_Data <- melt(data.frame(x=x, temp=nottem, seas.mean=y.seas.mean, har.cos=y.har.cos), id="x")
ggplot(plot_Data, aes(x=x, y=value, col=variable)) + geom_line() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:52:40.833

只需将您的时间序列放入矩阵中：

```
x = cbind(serie1 = ts(cumsum(rnorm(100)), freq = 12, start = c(2013, 2)),
serie2 = ts(cumsum(rnorm(100)), freq = 12, start = c(2013, 2)))

plot(x) 
```

或者配置绘图区域：

```
par(mfrow = c(2, 1)) # 2 rows, 1 column
serie1 = ts(cumsum(rnorm(100)), freq = 12, start = c(2013, 2))
serie2 = ts(cumsum(rnorm(100)), freq = 12, start = c(2013, 2))

require(zoo) 
plot(serie1)
lines(rollapply(serie1, width = 10, FUN = mean), col = 'red')
plot(serie2)
lines(rollapply(serie2, width = 10, FUN = mean), col = 'blue') 
```

希望能帮助到你。

PS.：本例中不需要*zoo包，可以使用**filter*功能。您可以使用以下方法提取*季节性平均值*：

```
s.mean = tapply(serie, cycle(serie), mean)
# January, assuming serie is monthly data
print(s.mean[1]) 
```

# ruby-on-rails - Ruby 占用 99.3% 的 CPU

> ID：14692236
> 
> 赞同：2
> 
> 时间：2013-02-04T17:37:02.723
> 
> 标签：ruby-on-rails, ruby, ubuntu, cpu, rackspace-cloud

我在 Rackspace 服务器上运行带有 rails 的 ruby​​ 1.9.3。Ruby 有 12 个进程，占用了我服务器 CPU 的 99.3%。是否有任何配置文件或选项可以限制进程数和占用的 CPU 数量，或者只是使其通常使用更少的 CPU？我应该如何开始解决这个问题。

更新：我正在使用带有 apache 的乘客

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:38:25.280

您正在运行应用程序服务器吗？乘客、独角兽和其他流行的 ruby​​ 应用程序服务器都允许您配置最大工作进程数。例如，如果您想将应用服务器工作人员的上限限制为 10（与您看到的 12 相比）：

对于 unicorn.rb 配置文件中的独角兽，设置：

```
worker_processes 10 
```

对于 nginx 下的乘客，在您的配置集中：

```
http {
    ...
    passenger_max_pool_size 10;
} 
```

对于Apache下的Passenger，在Passenger/apache配置中：

```
PassengerMaxPoolSize 10 
```

如果这不能回答您的问题，请告诉我们您正在运行什么应用程序服务器或 ruby​​ 基础架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T22:29:58.300

我发现了问题！New Relic 和 Resque 工作人员有一个错误（[https://github.com/defunkt/resque/issues/578](https://github.com/defunkt/resque/issues/578)）。我正在使用解决此问题的 New Relic Beta gem。我替换了这个`gem 'newrelic_rpm'`：`gem 'newrelic_rpm', "~> 3.5.6.48.beta"`

# python - 注销后发送参数到 next_page

> ID：14692238
> 
> 赞同：0
> 
> 时间：2013-02-04T17:37:08.697
> 
> 标签：python, django, authentication

我想让我的用户在注销后重定向回主页。但除了常规页面之外，我还想显示“已成功注销”消息。

我得到了注销和重定向工作：

```
'django.contrib.auth.views.logout', {'next_page': '/portal/home'} 
```

但是我似乎找不到通过注销视图将一些信息发送到主页的方法。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:58:33.920

您可能想查看 Django 中内置的消息传递框架。似乎适合您对这个问题的需求。

[https://docs.djangoproject.com/en/dev/ref/contrib/messages/](https://docs.djangoproject.com/en/dev/ref/contrib/messages/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:54:52.240

在你看来

```
def my_logout(request):
  logout(request)
  msg="logged out"
  return render_to_response('portal/home',{'check':msg}) 
```

在你的 home.html 中写

```
{{check}} 
```

# google-chrome - 为什么在 Chrome 开发工具中更改设备指标时无法滚动到页面底部？

> ID：14692248
> 
> 赞同：0
> 
> 时间：2013-02-04T17:37:30.823
> 
> 标签：google-chrome, media-queries, google-chrome-devtools

我正在尝试使用 Chrome 开发工具中的设备指标功能来帮助我查找和修复网站 CSS 中的媒体查询问题。我能够成功更改设备指标，但是当我这样做时，我无法滚动到我正在查看的页面底部。重新加载页面不会做任何事情。为什么是这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:47:20.173

在做了更多研究后想通了：

[http://code.google.com/p/chromium/issues/detail?id=171695](http://code.google.com/p/chromium/issues/detail?id=171695 "问题 171695：覆盖设备指标导致可见区域无法滚动")

如果您将 Device Metrics 中的高度设置为大于 Chrome 窗口中可用高度的值，则浏览器会以这种方式运行。将高度降低到小于窗口高度可以解决此问题。

# php - PHP中的硬编码JSON数组

> ID：14692249
> 
> 赞同：0
> 
> 时间：2013-02-04T17:37:31.387
> 
> 标签：php, json

我有两个来自两个不同 SQL 查询的变量，我想将它们放入一个 JSON 数组（即`$hometown`和`$topcat`）中。我正在尝试对其进行硬编码，但不确定它的外观。

```
 print(json_encode('{"hometown":"' . $hometown .'", "category":"'. $topcat .'"}')); 
```

我的输出是这样的：

```
{\"hometown\":\"Seattle, WA\", \"category\":\"Movies\"}" 
```

不知道斜线是从哪里来的（我想我可以做stripslashes？）而且似乎我还需要添加'['和']'？什么是正确的格式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T17:39:48.083

[`json_encode()`](http://php.net/manual/en/function.json-encode.php)接受你的数组或对象，它不接受已经被 JSON 编码的字符串。可以这样做：

```
print json_encode(array('hometown' => $hometown, 'category' => $topcat)); 
```

输出

```
{"hometown":"Seattle, WA","category":"Movies"} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T17:39:05.650

该字符串已经看起来像 JSON；你为什么要再次编码？

> 不知道斜线是从哪里来的

因为该代码对包含双引号的*字符串*进行编码，必须在 JSON 中对其进行转义。

不安全，愚蠢，但简单的解决方案：

```
print('{"hometown":"' . $hometown .'", "category":"'. $topcat .'"}'); 
```

更好的解决方案：

```
print(json_encode(array(
    'hometown' => $hometown,
    'category' => $topcat,
))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T17:44:32.020

该字符串已被格式化为 JSON 对象，编码是添加斜杠的内容。该`json_encode()`函数用于将数组转换为 JSON 对象而不是字符串，以及`print()`,`print()`已弃用且`echo()`应使用。

这是您的解决方案：

```
echo '{"hometown":"'.$hometown.'", "category":"'.$topcat.'"}'; 
```

# unix - 通过 SSH 进行 SSH 无密码登录

> ID：14692251
> 
> 赞同：3
> 
> 时间：2013-02-04T17:38:02.247
> 
> 标签：unix, ssh, ssh-keys

我正在编写一个脚本，该脚本需要能够访问具有有限访问权限的服务器。我希望通过另一个我可以访问并且也可以访问另一台计算机的 unix 服务器来做到这一点。

由于我生成了一个 SSH 密钥并使用 ssh-copy-id，因此我可以从家里 SSH 到第二台机器而不会提示输入密码。当我在第二台机器上时，我可以以相同的方式通过 SSH 连接到**第三**台机器，而不会提示输入密码。

但是，当我 SSH 进入第二台然后尝试 SSH 进入第三台时，系统会提示我输入第三台计算机的密钥和密码的密码。

为什么会发生这种情况，我该如何停止这个提示？

编辑：为了澄清一些观点。

*   我在通过 SSH 连接的任何一台机器上都没有 root 权限，只有家里的机器
*   我错过了上面输入的内容（现已修复）。在物理上在第二台机器上时，我可以通过 SSH 连接到**第三**台服务器。

**图表**

```
Machine A : Home machine, root access
|           SSH (passwordless)
v
Machine B : Publicly accessible server, no root permissions
|           SSH (passwordless while physically logged in,
|           password prompted while at machine A SSHed into machine B)
v
Machine C : Only accessable on campus 
            (which B is and A is not), no root permissions 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:41:32.533

你提到能够从第一台进入第二台机器，从第一台到第二台。因此，如果链中有第三台机器，您需要在第三台机器上设置 SSH 密钥，或者从您提到的第三台机器上获取公钥。

另一个好的提示是使用详细/调试 ( `-v`) 选项手动运行 SSH，这样您就可以准确地看到每一步发生的情况。

```
 -v      Verbose mode.  Causes ssh to print debugging messages about its
         progress.  This is helpful in debugging connection, authentica-
         tion, and configuration problems.  Multiple -v options increase
         the verbosity.  The maximum is 3. 
```

通过向我展示登录过程是如何进行的以及究竟是什么阻塞了它，这在过去为我节省了很多麻烦。

因此，如果以某种方式命名了您的第三台机器，`machine3.local`那么您使用详细模式的 ssh 命令将是：

```
ssh -v machine3.local 
```

**编辑：**原始海报说他被要求输入他为第三台机器生成的密钥的密码。如果是这样，那就是问题所在。如果您想要无密码访问，则不能在 SSH 密钥上设置密码。

**另一个编辑：**另外，请确保他们具有与以下内容匹配的权限并且由尝试访问的帐户拥有，如本例所示：

```
-rw------- [username] [usergroup] authorized_keys
-rw------- [username] [usergroup] id_rsa
-rw-r--r-- [username] [usergroup] id_rsa.pub
-rw-r--r-- [username] [usergroup] known_hosts 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:51:37.990

只需检查第二台计算机是否以 root 身份登录。
如果是这样，那么您必须像为用户一样创建 ssh 密钥。
基本上，当您再次以 root 身份登录时，即使您已经为用户创建了 ssh 密钥，您也必须创建它。

# matlab - 使用matlab允许分子中的十进制值

> ID：14692253
> 
> 赞同：0
> 
> 时间：2013-02-04T17:38:11.367
> 
> 标签：matlab, math, decimal, simplification

使用 Matlab，我希望我的输出在分子中具有十进制值，但 Matlab 会自动将其评估为分子和分母均为整数的分数。我正在使用符号数学。

这是相关输出的一部分：

```
residues =

 -0.0016          
  0.0073          
  1.3684 - 1.0258i
  1.3684 + 1.0258i
 -1.5379 + 1.0363i
 -1.5379 - 1.0363i
  0.3333          

poles =

 -50.0000          
 -40.0000          
 -3.5000 + 9.3675i
 -3.5000 - 9.3675i
 -3.0000 + 9.0000i
 -3.0000 - 9.0000i
  0          

directTerms =

 []

>> residues(1) / (s - poles(1))

ans =

-16/(10305*(s + 50)) 
```

我希望答案显示为

```
-0.0016 / (s + 50) 
```

有什么方法可以阻止matlab“简化”我的表达。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:16:18.377

首先，您需要将表达式编写为：

```
expr=(-16/10305)/(s + 50) 
```

然后使用[`vpa`](http://www.mathworks.com/help/symbolic/vpa.html)：

```
vpa(expr,3)
ans =
-0.00155/(s + 50.0) 
```

# android - 与 Android 中的 ViewPager 和 Dialogs 通信

> ID：14692254
> 
> 赞同：1
> 
> 时间：2013-02-04T17:38:11.763
> 
> 标签：android, android-layout, android-viewpager, android-button, android-dialogfragment

因此，我一直在阅读有关 Android 中的对话框的内容，并且很好奇如何在我当前的代码中实现这一点。

我按照 android[文档](http://developer.android.com/guide/topics/ui/dialogs.html#AlertDialog)创建了自定义布局。我将它创建为一个新类。

```
public class AddSiteDialog extends DialogFragment {

public Dialog onCreateDialog(Bundle savedInstanceState) {

    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());

    LayoutInflater inflater = getActivity().getLayoutInflater();

    builder.setView(inflater.inflate(R.layout.main, null))

            .setPositiveButton(R.string.signin, new DialogInterface.OnClickListener() {
                @Override
                public void onClick(DialogInterface dialog, int id) {
                    //To change body of implemented methods use File | Settings | File Templates.
                }
            })

            .setNegativeButton(R.string.cancel, new DialogInterface.OnClickListener() {

                public void onClick(DialogInterface dialog, int id) {
                    AddSiteDialog.this.getDialog().cancel();
                }
            });

    return builder.create();
}

} 
```

现在，我希望在单击 ViewPager 布局内的按钮时显示该对话框。在不同的班级。`public class FieldsActivity extends Activity {`

我有 ViewPager。

```
private class MyPagerAdapter extends PagerAdapter {

    final ViewPager mPager = (ViewPager) findViewById(R.id.fieldspager);

    public int getCount() {
        return 3;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext()
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        ListView lv = (ListView)findViewById(android.R.id.list);

        final ArrayList<String> siteList = new ArrayList<String>();
        final ArrayAdapter<String> aa;
        aa = new ArrayAdapter<String>(getBaseContext(), R.layout.list_row, siteList);

        if(lv == null) Log.v("lv", "null");
        else Log.v("aa", "null");

        if (lv != null) {
            lv.setAdapter(aa);
        }
        int resId = 0;
        View view = null;
        switch (position) {
            case 0:
                resId = R.layout.field01;
                view = inflater.inflate(resId, null);
                ((ViewPager) collection).addView(view, 0);

                return view;

            case 1:
                resId = R.layout.add_site;
                view = inflater.inflate(resId, null);
                Button addSiteButton = (Button)view.findViewById(R.id.addSiteButton);
                ((ViewPager) collection).addView(view, 0);
                addSiteButton.setOnClickListener(new View.OnClickListener() {

                    @Override
                    public void onClick(View v) {
                     //I want to click this button and the dialog show up
                    }
                });
                return view; 
```

我将如何在那里实现这一点。

我对此很陌生，所以我试图弄清楚事情是如何相互交流的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:04:36.937

首先，尝试继承 FragmentPagerAdapter 或 FragmentStatePagerAdapter 而不是 PagerAdapter。

在您的 Fragment(State)PagerAdapter 的“getItem(...)”中，您返回一个包含您提到的“addSiteButton”按钮的片段。

您的 Fragment 声明了一个回调接口：

```
public class MyFragment extends Fragment { 
  ...
  ...
  public interface Callback {
      public void showDialog();
  }

  private Callback mCallback;

  @Override
  public void onAttach(Activity activity) {
    callback = (Callback)activity;
    super.onAttach(activity);
  }

  @Override
  public void onDetach() {
    callback = null;
    super.onDetach();
  }

  ....
  ....
      // Onclick handler of 'addSiteButton'.
      onClick(View view) {
        if (callback != null) {
          callback.showDialog();
        }
      }
  ....
} 
```

并确保您的 Activity 实现回调：

```
public class FieldsActivity extends FragmentActivity implements MyFragment.Callback {

  ....
  ....
  @Override
  public void showDialog() {
    // Put the code you already have to create the dialogFragment.
  }
} 
```

# c# - 使用 c#/ASP.NET 以编程方式伪造网站登录

> ID：14692257
> 
> 赞同：4
> 
> 时间：2013-02-04T17:38:28.657
> 
> 标签：c#, asp.net, http, httpwebresponse

因此，我正在尝试在我们的公司网站上模拟多个同时生成异常的登录，以测试我们的日志框架（我们认为线程同步可能存在问题）。无论如何，所以我需要以编程方式登录我们的网站。这是我到目前为止所拥有的：

```
 // Block 1
        Uri url = new Uri("http://withheld");
        HttpWebRequest request = WebRequest.Create(url) as HttpWebRequest;
        request.Method = "GET";
        HttpWebResponse response = request.GetResponse() as HttpWebResponse;
        string viewState = string.Empty;
        string previousPage = string.Empty;
        string eventValidation = string.Empty;
        using (StreamReader reader = new StreamReader(response.GetResponseStream()))
        {
            string strResponse = reader.ReadToEnd();
            viewState = HttpUtility.UrlEncode(GetTagValue(strResponse, "__VIEWSTATE"));
            previousPage = HttpUtility.UrlEncode(GetTagValue(strResponse, "__PREVIOUSPAGE"));
            eventValidation = HttpUtility.UrlEncode(GetTagValue(strResponse, "__EVENTVALIDATION"));
        }

        // Block 2
        string username = "user01";
        string password = "password99";
        HttpWebRequest request2 = WebRequest.Create(url) as HttpWebRequest;
        request2.KeepAlive = true;
        request2.Method = "POST";
        request2.ContentType = "application/x-www-form-urlencoded";
        string postData = string.Format("__LASTFOCUS=&ctrlCreateNewPassword_scriptManagerMaster_HiddenField=&__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE={0}&__PREVIOUSPAGE={1}&__EVENTVALIDATION={2}&UserName={3}&Password={4}&LoginButton=Log+in", new string[] { viewState, previousPage, eventValidation, username, password});
        byte[] dataBytes = UTF8Encoding.UTF8.GetBytes(postData);
        request2.ContentLength = dataBytes.Length;
        using (Stream postStream = request2.GetRequestStream())
        {
            // Here's the problem
            postStream.Write(dataBytes, 0, dataBytes.Length);
        }
        HttpWebResponse httpResponse = request2.GetResponse() as HttpWebResponse;
        // At this point httpResponse.Cookies is null
        // I believe it's because the line above has actually initiated another
        // request/response which DOES NOT include the authentication cookie.
        // See fiddler output below to understand why I think that.

        // Block 3
        //Uri url2 = new Uri("http://Withheld/GenerateException.aspx");
        //http = WebRequest.Create(url2) as HttpWebRequest;
        //http.CookieContainer = new CookieContainer();
        //http.CookieContainer.Add(httpResponse.Cookies);
        //HttpWebResponse httpResponse2 = http.GetResponse() as HttpWebResponse; 
```

看起来相当简单对吧？好吧，它不起作用。我不知道我是否需要 viewState 等等，但我想我会尽可能地模仿常规浏览器的功能。

据我所知，发生了什么是这样的：

1.  我们使用简单的 GET 访问页面。这为我们提供了视图状态等，这些视图状态等被解析出来并包含在以下请求中。
2.  We now post the viewstate, username, password, etc to the server using postStream.Write(). The server at this point responds with an authentication cookie, and forwards us off to /Default.aspx.
3.  Now we execute reqest2.GetResponse(), but instead of getting the response that forwarded us to /default.aspx and had he authentication cookie, it looks like this line is actually causing ANOTHER request to get us the resource at /default.aspx. The problem is httpWebResponse DOES NOT include the authentication cookie we need for the next request (which is commented out currently).

Why? Why is this behaving in this manor, and how do I handle it properly. Here's the output from fiddler to further explain what's going on:

Block 1 generates this request/response Request Header:

```
GET http://withheld/Login.aspx HTTP/1.1
Host: withheld
Connection: Keep-Alive 
```

Response Header:

```
HTTP/1.1 200 OK
Connection: close
Date: Mon, 04 Feb 2013 16:37:37 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Set-Cookie: .EXTASPXAUTH=; expires=Tue, 12-Oct-1999 04:00:00 GMT; path=/; HttpOnly
Cache-Control: private, no-cache="Set-Cookie"
Content-Type: text/html; charset=utf-8
Content-Length: 16975
Response is the actual login webpage.  Omitted for obvious reasons. 
```

Stepping through the code, this request/response is generated immediately following the call to postStream.Write:

Request:

```
POST http://Withheld/Login.aspx HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Host: withheld
Content-Length: 2109
Expect: 100-continue

__LASTFOCUS=&ctrlCreateNewPassword_scriptManagerMaster_HiddenField=&__EVENTTARGET=&__EVENTARGUMENT=&__VIEWSTATE=%2fwEPDwUJNTE1NTIxNjkxD2QWAgIDD2QWBgIDDxYCHgVjbGFzcwUQaGVhZGVyX2Jhbm5lcl9lbhYCAgEPFgQeB29uY2xpY2sFI3dpbmRvdy5sb2NhdGlvbj0naHR0cDovL3d3dy5tZG0uY2EnHwAFFmhlYWRlcl9iYW5uZXJfZW5fc21hbGxkAgUPZBYQAgcPDxYEHhdQYXJ0aWFsUmVuZGVyaW5nQ2hlY2tlZGceGUlzUGFydGlhbFJlbmRlcmluZ0VuYWJsZWRoZGQCCQ8PFgQfAmcfA2hkZAIPDw8WBB8CZx8DaGRkAhEPDxYCHg1PbkNsaWVudENsaWNrBcEBamF2YXNjcmlwdDpQYWdlX0NsaWVudFZhbGlkYXRlKCdMb2dpbkN0cmwnKTsgaWYgKFBhZ2VfSXNWYWxpZCkgeyBMb2dpbkJ1dHRvbi5zdHlsZS52aXNpYmlsaXR5ID0gJ2hpZGRlbic7IExvZ2luQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7IExvZ2luQnV0dG9uRGlzYWJsZWQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsgfWRkAhkPDxYCHgRUZXh0Bc0BSWYgeW91IHJlcXVpcmUgYXNzaXN0YW5jZSwgb3VyIE1EIE9ubGluZSBTdXBwb3J0IFNwZWNpYWxpc3RzIGNhbiBiZSByZWFjaGVkIGF0ICg4NzcpIDQzMS0wMzMwIG9yIGJ5IGUtbWFpbCBhdCA8YSBocmVmPSJtYWlsdG86d2Vic3VwcG9ydEBjbWEuY2EiPndlYnN1cHBvcnRAY21hLmNhPC9hPi48YnI%2bPGJyPldlIGVuY291cmFnZSB5b3UgdG8gcmV2aWV3IHRoZWRkAhsPDxYCHwQFOXdpbmRvdy5vcGVuKCdodHRwOi8vMTkyLjE2OC4xNjUuMzIvbGVnYWwvJyk7cmV0dXJuIGZhbHNlO2RkAh8PDxYCHwQFRndpbmRvdy5vcGVuKCdodHRwOi8vMTkyLjE2OC4xNjUuMzIvc3lzdGVtLWVuaGFuY2VtZW50LycpO3JldHVybiBmYWxzZTtkZAIhDw8WAh8EBUZ3aW5kb3cub3BlbignaHR0cDovLzE5Mi4xNjguMTY1LjMyL3N5c3RlbS1lbmhhbmNlbWVudC8nKTtyZXR1cm4gZmFsc2U7ZGQCCQ9kFgICAQ9kFgICAg9kFgJmD2QWAgIBD2QWAgIdDw8WAh8EBfsBamF2YXNjcmlwdDpjdHJsQ3JlYXRlTmV3UGFzc3dvcmRfQ3JlYXRlTmV3UGFzc3dvcmRQdXNoQnV0dG9uLnN0eWxlLnZpc2liaWxpdHkgPSAnaGlkZGVuJzsgY3RybENyZWF0ZU5ld1Bhc3N3b3JkX0NyZWF0ZU5ld1Bhc3N3b3JkUHVzaEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOyBjdHJsQ3JlYXRlTmV3UGFzc3dvcmRfQ3JlYXRlTmV3UGFzc3dvcmRQdXNoQnV0dG9uRGlzYWJsZWQuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztkZBgBBR5fX0NvbnRyb2xzUmVxdWlyZVBvc3RCYWNrS2V5X18WAQUMaWJ0bk1vcmVJbmZvdZmFXkMbPfVWPQYtreXvFt8Bck8%3d&__PREVIOUSPAGE=1aYW5DqTKrT4ieGPkHcnrQLIq8lEcSIVkql1EugwSQNV_5102t5D7QDmOnuQFA4Tz9Mh5-CEYpkRngMROFFeeAG12Ss1&__EVENTVALIDATION=%2fwEWCQKKr%2bXcBgKvruq2CALSxeCRDwL%2bjNCfDwKH8YSKBgKN6O7XCwKz9P38DALl3I74DwLWxI74D6Nz%2f2bCBFC%2bM9glZmEyM%2byOCTZg&UserName=user01&Password=password99&LoginButton=Log+in 
```

Response:

```
HTTP/1.1 302 Found
Connection: close
Date: Mon, 04 Feb 2013 16:36:55 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Location: /Default.aspx?locale=en
Set-Cookie: .EXTASPXAUTH=65BB5BFDD274F730E26CAEAAEB417792A764E7B8E8C6C9AC8C47FA97EF35DFACF551A53EAA6EA67D868C8A9BF55EBA758A5E724C58269028EE48F56268A204CBED19B60FC1AF58892989D9546202C037E97BF0EEE6A6281FF5EEA461BC30C5C7A71DFD64027AEB796D3FD21AE97ECFB16FF0F95C; path=/; HttpOnly
Cache-Control: private, no-cache="Set-Cookie"
Content-Type: text/html; charset=utf-8
Content-Length: 140

<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="/Default.aspx?locale=en">here</a>.</h2>
</body></html> 
```

Note that the above response includes an authenication cookie. Now we run the following line of code with the intention of getting that cookie:

```
HttpWebResponse httpResponse = request2.GetResponse() as HttpWebResponse; 
```

But instead the following request/response is generated in fiddler:

Request:

```
GET http://withtheld/Default.aspx?locale=en HTTP/1.1
Content-Type: application/x-www-form-urlencoded
Host: withheld 
```

Response:

```
HTTP/1.1 302 Found
Connection: close
Date: Mon, 04 Feb 2013 16:37:38 GMT
Server: Microsoft-IIS/6.0
X-Powered-By: ASP.NET
Location: /Login.aspx?ReturnUrl=%2fDefault.aspx%3flocale%3den&locale=en
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Length: 182

<html><head><title>Object moved</title></head><body>
<h2>Object moved to <a href="/Login.aspx?ReturnUrl=%2fDefault.aspx%3flocale%3den&amp;locale=en">here</a>.</h2>
</body></html> 
```

I believe this is the response that httpResponse now contains. How can I actually get the cookie to request up another protected page after the login is done?

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T22:02:55.090

Well it turns out I had two problems here. One is that I needed to call this:

```
request.AllowAutoRedirect = false 
```

This keeps the framework from just skipping the response that had the authentication cookie in it, and actually gives back the response we're interested in.

The other issue was that you have to create a new instance of a CookieContainer and assign it to the request. Without having done that Response.Cookies contains no cookies. As soon as you've assigned your own container it's populated after the response is made. I don't know why.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:30:44.897

When you login, the authentication token will be sent as a cookie from the server to your client. You will need to store this cookie, and then re-send it with every future request. Re-sending the cookie tells the server that you have been authenticated as a certain user.

To get the cookies that were sent in response after you logged in:

```
HttpCookieCollection loginResponseCookies = Response.Cookies; 
```

This collection will include the auth cookie, any session cookies, etc.

Then, just re-send these cookies with every subsequent request, and the server will authenticate you as a result.

```
foreach(HttpCookie loginResponseCookie in loginResponseCookies)
{
    Response.Cookies.Add(loginResponseCookie);
} 
```

# c# - 如何在 WebView (Monodroid) 中更改 HTML 代码

> ID：14692259
> 
> 赞同：1
> 
> 时间：2013-02-04T17:38:29.270
> 
> 标签：c#, android, html, xamarin.android

```
WebView webView = FindViewById<WebView>(Resource.Id.webView1);
webView.HorizontalScrollBarEnabled = false;
webView.LoadUrl("res.htm"); 
```

如何更改我的文件中的一些 HTML 代码并在不更改物理文件的情况下使用 webView 显示它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:48:04.783

您可以使用此代码将 html 作为字符串加载。

```
var htmlView = new WebView(context);
htmlView.LoadData(htmlMarkup, "text/html", "utf-8"); 
```

# jquery - Chrome 在 JSONP 请求中错误地解释了相对重定向

> ID：14692263
> 
> 赞同：1
> 
> 时间：2013-02-04T17:38:47.817
> 
> 标签：jquery, http, google-chrome, jsonp

我的应用程序正在使用 jquery 向另一个域发出 JSONP 请求。它在呼唤`https://api/auth?redirect_to=%2Fping.json&authtoken=blahblah`

服务器以 302 响应相对 URL“ `/ping.json`”。

Chrome 然后发出错误

```
[blocked] The page at https://www/pageurl ran insecure content from http://api/ping.json. 
```

出于某种奇怪的原因，这是正确的行为吗？关于 jquery 如何调用 JSONP 请求的一些事情？在我看来，HTTP 的一个非常基本的规则是在解释相对 URL 时不更改协议，所以这让我感到惊讶。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:01:03.123

我必须得出结论，这是一个 Chrome 错误。我希望它得到修复。

我愿意接受其他解释。如果您知道为什么这种行为有意义，请留下另一个答案。

# facebook - 粉丝专页标签重定向到应用画布

> ID：14692268
> 
> 赞同：0
> 
> 时间：2013-02-04T17:39:05.933
> 
> 标签：facebook, tabs, facebook-canvas, facebook-page

我们正在创建一个画布应用程序，并想直接添加到我的粉丝专页。

有两种方法我不确定如何将用户带到应用程序的粉丝专页。

首先是创建一个标签并将其添加到粉丝页面中。在此选项卡上将有一些文本和一个号召性用语，以重定向到应用画布。

将创建第二个选项卡并将其添加到粉丝页面中，仅通过重定向将用户直接带到应用程序的粉丝页面。

是否有任何特定于这种做法的文档或重定向选项卡的一些限制？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:08:17.717

要查看您的应用程序是否已加载到页面选项卡中，请解析[`signed_request`](https://developers.facebook.com/docs/howtos/login/signed-request/)服务器端并查看是否有[page-id set](https://developers.facebook.com/docs/reference/login/signed-request/)。

如果是这样，请使用包含不多于一段 JavaScript 代码的最小 HTML 文档来响应该请求，以便在顶部窗口实例内重定向，如下所示：

```
top.location.href = "https://apps.facebook.com/yourappsnamespace"; 
```

对此不应该有任何限制——Facebook 只担心自动将用户从 Facebook 重定向（到外部域），但由于您正在重定向到画布应用程序，因此他们会留在他们的网站上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-09T14:41:36.723

[文档](https://developers.facebook.com/docs/apps/review)明确指出：

> 我们不接受重定向到页面选项卡的画布页面，反之亦然。

# ruby - 如何从命令行获取最新的稳定 Ruby 版本？

> ID：14692272
> 
> 赞同：0
> 
> 时间：2013-02-04T17:39:16.070
> 
> 标签：ruby, shell, terminal, version, command-line-interface

我有兴趣从命令行查询 Ruby的**最新稳定版本。**我主要对**"1.9.3p327" 形式的字符串**感兴趣。

**更新#1**

澄清一下，目标是始终查询**最新的稳定版本**，无论是 1.9.3p327 还是 3.0.2p392。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:46:08.123

就像是：

```
curl 'http://ftp.ruby-lang.org/pub/ruby/1.9/' | ruby ./extract-and-print-max-patchlevel.rb 
```

脚本的实现`extract-and-print-max-patchlevel.rb`是读者的练习，但这是一个开始：

```
#!/usr/bin/env ruby
maxpatch=0
maxstr=nil
STDIN.each_line do |line|
  next unless line =~ /1\.9\.3-p(\d+)\b/
  patch = $1.to_i
  if patch > maxpatch
    maxpatch = patch
    maxstr = $&
  end
end
puts maxstr 
```

请注意，它假定 Ruby 1.9.3 是最新的，因此您可能需要重新访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-07T01:32:24.730

Came back to this after starting to use rbenv. If you have rbenv installed, the following one-liner does the trick:

```
#!/usr/bin/env ruby

puts `~/.rbenv/bin/rbenv install --list`.split("\n").map{|item| item.strip}.select{|item| item[/^\d*\.\d*\.\d*/]}.reject{|item| (item.include? '-') && !(item =~ /-p\d*$/)}.last 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:37:21.210

你可以玩`sed`或`awk`。例如：

```
curl "http://ftp.ruby-lang.org/pub/ruby/1.9/" | sed -E 's/^.*"(ruby-)(1.9.3-p[0-9]+)(.*)".*$/\2/' | sed -e '/^1.*/!d' | sort | sed '$!d' 
```

我不是`sed`专家，这里可能是更好的解决方案，但这条线有效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T18:57:22.233

在 @maerics' 和 @YevgeniyAnfilofyev 的答案之间进行选择，我发现 Ruby 更*真实*，并将其变成单行，**假设 curl 中的列表已经排序**，所以我们只需要**最后**一行满足条件：

```
curl 'http://ftp.ruby-lang.org/pub/ruby/1.9/' 2> /dev/null | ruby -e "puts STDIN.lines.map { |x| /1\.9\.3-p\d+\b/.match(x) }.compact.last[0]" 
```

或者，Ruby 部分扩展：

```
puts STDIN.lines.map do |x|
  /1\.9\.3-p\d+\b/.match(x) # After such map we will get an array of MatchData or nils
end.compact.last[0] # Then we remove nils using Array#compact,
                    # get last MatchData and retrieve matched string with [0] 
```

遵循一个良好的传统，给这个脚本添加排序作为练习留给读者:)

**UPD:** Of course, hard-coded 1.9.3 is bad, but if we replace each digit 1, 9 and 3 with `\d`, the regex seems to become more or less independent. The other problem is that we only look into `.../ruby/1.9` folder of that ftp. This may be fixed if we, instead, look into `.../ruby` folder first, and find all version-numbered folders with regex `/\d\.\d\//`. Then repeat the above query, joining results from all folders. But, of course, this already cannot made into a one-liner...

# asp.net - 实体框架查询中的动态命名表

> ID：14692276
> 
> 赞同：0
> 
> 时间：2013-02-04T17:39:40.767
> 
> 标签：asp.net, entity-framework, repository

我正在考虑为我正在计划的应用程序管理表命名问题的方法。

目前有一个包含原材料的表格（大约 150 行），每行大约有 20 列，主要是用于计算的浮点数。作为参考，我们将此表称为“材料”。

由于这些数字列会定期更新，并且一些用户可能还希望创建自定义版本，我将创建一个管理实用程序，允许复制/编辑此材料表，但至关重要的是，它只允许在新表名下“另存为”，所以该数据永远不会被破坏。

因此，使用自动化例程，我将创建“materials_1”、“materials_2”等。当在网站的另一部分完成计算时，我将存储用于计算的材料表的名称，因此未来可以进行审计以找出结果的来源。

现在......我是否可以在实体框架/工作单元/存储库方式（如 John Papa 的 codecamper 示例）中执行此操作，而无需不断编辑数据上下文并添加新创建的表名？我看不到如何将变量传递给包含特定表名的存储库接口，即使物理表名不同，它也始终是“材料”实体？

# perl - 无法使用 DBIx::Class 从 Catalyst App 进行身份验证

> ID：14692280
> 
> 赞同：0
> 
> 时间：2013-02-04T17:39:57.583
> 
> 标签：perl, authentication, catalyst, dbix-class

我正在尝试使用`DBIx::Class`来自 Catalyst 应用程序的身份验证用户。我已经完成的步骤：

1) 创建 SQLite 数据库

```
CREATE TABLE people (
id integer primary key,
name text not null,
password text not null); 
```

2) 创建了 Catalyst 模型 People；

3) 在 MyApp.pm 中设置 auth 配置

```
__PACKAGE__->config('Plugin::Authentication' =>     {   
default => {    credential => {
                class => 'Password',
                password_field => 'password',
                password_type => 'clear' 
                    },          
                    store => {
                class => 'DBIx::Class',
                user_model => 'People'          
                    }
                } 
    }
); 
```

4）创建控制器身份验证并在其中设置方法登录：

```
sub login : Local {
   my ($self, $c) = @_;

   if (my $user = $c->req->params->{user} and my $password = $c->req->params->{password} ) {
       if ( $c->authenticate( { username => $user, password => $password } ) ) {
           $c->res->body( "hello " . $c->user->get("id") );
       } else {
           # login incorrect
           $c->res->body("Wrong pass or name!");
       }
   } else {
       # invalid form input
       $c->res->body("Type name & pass");
   }
} 
```

5) 提交带有用户和密码数据的表单时调用方法登录。我收到了这条消息：

> 在 MyApp::Controller::Auth->login “无法通过 /usr/local/share/perl/5.14.2/Catalyst/ 的包“MyApp::Model::People”定位对象方法“result_source”中捕获异常Authentication/Store/DBIx/Class/User.pm 第 35 行，第 999 行。”

如何修复？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:33:20.390

[Catalyst::Authentication::Store::DBIx::Class](https://metacpan.org/module/Catalyst%3a%3aAuthentication%3a%3aStore%3a%3aDBIx%3a%3aClass)文档声明 user_model 必须是完全合格的，在您的情况下是 MyApp::ModelName::People。

另请阅读[Catalyst::Model::DBIC::Schema](https://metacpan.org/module/Catalyst%3a%3aModel%3a%3aDBIC%3a%3aSchema)文档，了解如何将 DBIx::Class 模式作为模型集成到 Catalyst 应用程序中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T00:39:47.897

Catalyst helper 在使用它创建模型 DBIC 时有奇怪的行为。如果模型名称和表名称相同，则助手将创建一个具有其他名称的 Result 类。不是数据库表的名称，但它将是另一个。因此需要使用 Result 类的名称和 Model 的名称，如下所示：`store => { class => 'DBIx::Class', user_model => 'People::Person' }`

PS 人名由 Catalyst 助手自动选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T05:32:32.307

@edem 我认为，这是因为您尚未创建 people.pm 结果类并定义表结构。

# c# - 映射两个相同的对象

> ID：14692285
> 
> 赞同：1
> 
> 时间：2013-02-04T17:40:04.950
> 
> 标签：c#, object, reflection, mapping

我有两个具有确切属性的对象（类）。说 ：

```
class class1
{
  public string prop1{get;set;}
  public string prop2{get;set;}
}

class class2
{
    public string prop1{get;set;}
    public string prop2{get;set;}
} 
```

我想使用反射映射这些类，我已经使用了[AutoMapper](http://automapper.codeplex.com/)，但它不适用于我的情况，因为我在对象中有对象......

使用反射时，我需要传递属性名称，我不想一个一个地这样做，还有其他方法：

```
PropertyInfo propinfo = listToReturn.GetType().GetProperty(nameofproperty); 
```

**编辑：：**

这是我用自动映射器尝试过的：

```
 internal static DTO_objectclass  ConvertFOS(objectclass q)
        {
            DTO_objectclass  resultsToReturn = new DTO_objectclass();

            AutoMapper.Mapper.CreateMap<objectclass , DTO_objectclass  >();

            resultsToReturn = AutoMapper.Mapper.Map<objectclass , DTO_objectclass>(q);

            return resultsToReturn;
        } 
```

这一直有效，直到涉及到我在 objectclass 中有类似内容的属性：

```
property class3 parentClass{get; set;} 
```

在 DTO_objectclass 我得到：

```
 property guid parentClass{get; set;} 
```

我在哪里得到转换失败的例外..

```
Trying to map System.Guid to parentclient.\nUsing mapping configuration for DTO_objectclass   to objectclass \nDestination property: ParentClass\nException of type 'AutoMapper.AutoMapperMappingException' was thrown. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:04:46.047

例外解释了这个问题。AutoMapper 无法将 GUID 转换为 ParentClass。AutoMapper 将假定在没有更好信息的情况下，两个具有相同名称的属性/字段将属于相同类型。

为了克服这个问题，您需要编写一个转换方法。`ConvertGuidToParentClassInstance`例如，如果调用了该方法，则可以编写如下映射：

```
Mapper.CreateMap<DTO_objectcass, objectclass>()
  .ForMember(dest => dest.parentClass)
    .MapFrom(src => ConvertGuidToParentClassInstance(src.parentClass)); 
```

有了这样的映射，AutoMapper 就可以处理这种情况。

# android-listview - 如何在android listView中制作气泡提示

> ID：14692287
> 
> 赞同：0
> 
> 时间：2013-02-04T17:40:07.113
> 
> 标签：android-listview

我想问任何人都可以告诉我如何像这样在android ListView中制作气泡提示 ![在此处输入图像描述](../Images/0ffce86e57d72b8cc45934e848a7f9fa.png)

此提示可能会显示单击后出现的下一个 listView 的 listItems 计数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:03:15.830

使用 jquery mobile - data-count-theme 计算气泡 - 这是我知道的唯一方法。

# java - xml 解析应用程序强制关闭互联网断开连接

> ID：14692296
> 
> 赞同：0
> 
> 时间：2013-02-04T17:40:29.470
> 
> 标签：java, android, runtime-error

它适用于 wifi 或 3g，但在断开连接时强制关闭。我正在从教程中学习，所以不确定，但我相信代码中考虑了互联网断开连接。

完成 logcat [http://pastebin.com/aAEGwfFk](http://pastebin.com/aAEGwfFk)

代码：

```
package org.tatvamoksh.tml;

import java.util.ArrayList;
import java.util.HashMap;

import org.w3c.dom.Document;
import org.w3c.dom.Element;
import org.w3c.dom.NodeList;

import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Context;
import android.net.ConnectivityManager;
import android.net.NetworkInfo;
import android.os.AsyncTask;
import android.os.Bundle;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class Updates extends ListActivity {

    public ArrayList<HashMap<String, String>> mylist;
    public ListAdapter adapter;
    public ProgressDialog progressDialog; 

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.updates_item);

        mylist = new ArrayList<HashMap<String, String>>();

        adapter = new SimpleAdapter(this, mylist , R.layout.updates, 
                        new String[] { "event", "notice" }, 
                        new int[] { R.id.event_title, R.id.notice });

        final ListView lv = getListView();
        lv.setTextFilterEnabled(true);  
/*        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
                @SuppressWarnings("unchecked")
                HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
                Toast.makeText(Updates.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_LONG).show(); 

            }
        });
*/        
        progressDialog = ProgressDialog.show(Updates.this, "Getting updates", "Please wait...");
        new GetDataTask().execute();        

    }

    private Boolean isOnline()  {
        ConnectivityManager cm = (ConnectivityManager)getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();
        if(ni != null && ni.isConnected())
            return true;

        return false;
    }

    private class GetDataTask extends AsyncTask<Void, Void, Integer> {

        @Override
        protected Integer doInBackground(Void... params) {

            // Simulates some delay
            try {
                Thread.sleep(2000);
            } catch (InterruptedException e1) {
                e1.printStackTrace();
            }

            if(isOnline()){
                mylist.clear();                  

                String xml = XMLfunctions.getXML();
                Document doc = XMLfunctions.XMLfromString(xml);

                int numResults = XMLfunctions.numResults(doc);

                if((numResults <= 0)){
                    Toast.makeText(Updates.this, "Geen resultaten gevonden", Toast.LENGTH_LONG).show();  
                    finish();
                }

                NodeList nodes = doc.getElementsByTagName("update");

                for (int i = 0; i < nodes.getLength(); i++) {                           
                    HashMap<String, String> map = new HashMap<String, String>();    

                    Element e = (Element)nodes.item(i);
                    map.put("id", XMLfunctions.getValue(e, "id"));
                    map.put("event", "Event:" + XMLfunctions.getValue(e, "event"));
                    map.put("notice", "Update: " + XMLfunctions.getValue(e, "notice"));
                    mylist.add(map);            
                }
            }
            else{
                Toast.makeText(Updates.this, "No connection..", Toast.LENGTH_LONG).show();          
            }

            return 1;
        }

        @Override
        protected void onPostExecute(Integer result) {

            setListAdapter(adapter);
            progressDialog.dismiss();
            super.onPostExecute(result);
        }
    }
} 
```

我确实尝试搜索类似的问题，大多数导致 NullPointerException，调试器没有捕获任何（我认为） [调试器透视图](http://i.stack.imgur.com/7fIjz.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:31:36.000

消除

```
Toast.makeText(Updates.this, "No connection..", Toast.LENGTH_LONG).show(); 
```

现在在那个空的 else 中，让你的 AsyncTask 返回另一个值（例如 2）

```
else{
   return 2;
} 
```

如果你在`return 1;`里面移动`if(isOnline()`，那么你可以摆脱 else 并简单地写`return 2;`，但这只是可读性的问题。

然后在 中`onPostExecute()`，检查值是否为 2，然后制作 Toast。

```
 @Override
    protected void onPostExecute(Integer result) {
    if (result == 1){
        setListAdapter(adapter);
        progressDialog.dismiss();
        super.onPostExecute(result);
    }
    else
      Toast.makeText(Updates.this, "No connection..", Toast.LENGTH_LONG).show();          
    } 
```

# jquery - 无法在 javascript 加载的 JQuery UI 选项卡上使用选择

> ID：14692297
> 
> 赞同：1
> 
> 时间：2013-02-04T17:40:30.680
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我想做的很简单。我只想在单击按钮时加载 jQuery UI 选项卡。然后我希望他们显示一个特定的选项卡。第一部分有效，第二部分无效。关于我做错了什么的任何想法！

```
$('[name="testBtn"]')
.click(function(){
  $("#main").load("test.html", function() {
    $(col3).empty();
    var tabs = $("#tabs");
    $(tabs).tabs();
    $(tabs).tabs('select', 3);
  }); 
```

我也用过这种方式：

```
$('[name="testBtn"]')
.click(function(){
  $("#main").load("test.html", function() {
    $(col3).empty();
    $("#tabs").tabs('select', 3);
  }); 
```

HTML 代码如下：

```
<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Test 1</a></li>
        <li><a href="#tabs-2">Test 2</a></li>
    </ul>
    <div id="tabs-1"></div>
    <div id="tabs-2"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T14:00:53.173

终于设法找到如何实现它。非常感谢 Barmar 指出新的激活方法。我应该阅读手册 :) 按钮的代码如下：

```
$('[name="testBtn"]')
.click(function(){
  $("#main").load("test.html", function() {
    $(col3).empty();
    var tabs = $("#tabs");
    $(tabs).tabs();
    $(tabs).tabs( "option", "active", 1 );
  }); 
```

一切都在 api 页面上进行了解释：[jQuery UI Tabs api page](http://api.jqueryui.com/tabs/#option-active)

# vba - VBA 运行时错误 9：下标超出范围

> ID：14692298
> 
> 赞同：2
> 
> 时间：2013-02-04T17:40:33.950
> 
> 标签：vba, excel, for-loop, excel-2010

我一直在尝试编写一小段代码来验证以确认日期是否包含在数组中。我已经能够滚动浏览代码，`If lists(i) = TodaysDate Then`直到`lists(i)`显示`subscript out of range`. 我已通过 Internet 搜索，但无法解决此问题。

我的宏内容如下：

```
Sub size_an_array()
    Dim i As Integer
    Dim Range_of_Dates As Integer
    Dim TodaysDate As Variant, finish As String
    TodaysDate = Range("Sheet11!c2")
    ThisWorkbook.Worksheets("Sheet11").Activate
    lists = Range("Processed_Dates")

    Range_of_Dates = UBound(lists, 1) - LBound(lists, 1) + 1

     For c = 1 To UBound(lists, 1) ' First array dimension is rows.
         For R = 1 To UBound(lists, 2) ' Second array dimension is columns.
             Debug.Print lists(c, R)
         Next R
     Next c

     x = Range_of_Dates  'UBound(lists, 1)
     ReDim lists(x, 1)

     i = 1
     Do Until i = x
         If lists(i) = TodaysDate Then
             Exit Do
         End If
     Loop

     MsgBox "The date has not been found"

End Sub 
```

我比较陌生`VBA`，我一直在尝试使用命名范围来拉入数组，但我完全不知道如何解决这个问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:06:21.170

您已将数组`lists`从一维数组重新调整为二维数组，然后您尝试仅使用可疑行（下方）中的一维来引用元素，这会导致您的错误。

`If lists(i) = TodaysDate Then`

作为参考，`Run-time error 9: Subscript out of range`意味着您正在引用一个不存在的数组元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:08:04.023

我想这就是你正在尝试的？

```
Sub size_an_array()
    Dim i As Integer
    Dim TodaysDate As Variant, lists
    Dim bFound As Boolean

    '~~> Change SomeWorksheet to the relevant sheet
    TodaysDate = Sheets("SomeWorksheet").Range("c2")

    lists = Sheets("Sheet11").Range("Processed_Dates")

    i = 1
    Do Until i = UBound(lists)
        If lists(i, 1) = TodaysDate Then
            bFound = True
            Exit Do
        End If
        i = i + 1
    Loop

    If bFound = True Then
        MsgBox "The date has been found"
    Else
        MsgBox "The date has not been found"
    End If
End Sub 
```

如果我理解正确，那么使用起来会容易得多`.Find`。如果您有兴趣，请查看此[链接](http://www.siddharthrout.com/2011/07/14/find-and-findnext-in-excel-vba/)。

# php - 用于食谱的 Wordpress 自定义帖子类型或自定义插件？

> ID：14692306
> 
> 赞同：0
> 
> 时间：2013-02-04T17:41:18.363
> 
> 标签：php, wordpress

我需要为用户创建一种将食谱信息输入到可以全局显示的 wordpress 页面的方法，在他们的 buddypress 用户页面上，基于定义的 xml 标准导入/导出并接受每个食谱的评论。在一个示例中，用户将能够输入多于一种类型的成分（即西红柿），每个项目都具有相同级别的详细字段，但是当导出到 xml 时，每个西红柿都有自己的`<tomato>`标签。希望这是有道理的。

我的问题是我应该构建一个自定义插件还是自定义帖子类型可以工作？如果自定义插件可以提供最佳解决方案，您能否建议阅读材料，让我走上创建此类解决方案的最佳路径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:02:28.277

在这种情况下，自定义帖子类型可以正常工作。Types 插件可以自动化其中很大一部分，包括用于编辑食谱的管理界面。

您可以为成分定义新的分类法。

# jquery - 颜色框内框未正确加载 - jQuery

> ID：14692314
> 
> 赞同：0
> 
> 时间：2013-02-04T17:41:51.857
> 
> 标签：jquery, colorbox

我正在为一个项目使用 Colorbox，它几乎似乎工作得很好。我只是无法让“Iframe”版本工作？我究竟做错了什么？我不能用 iframe 加载 .html 吗？我需要它是 iframe，因为它正在加载时事通讯形式。

```
 $(document).ready(function(){

            // Display a welcome message on first visit, and set a cookie that expires in 30 days:
            if (document.cookie.indexOf('visited=false') === -1) {
            var expires = new Date();
            expires.setDate(expires.getDate()+30);
            document.cookie = "visited=true; expires="+expires.toUTCString();

            $.colorbox({iframe:true, href:"test.html"})
            }

        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:59:06.583

我对这件作品进行了错误的组合：

```
$.colorbox({iframe:true, href:'test.html'}) 
```

它必须如下所示：

```
$.colorbox({href:'test.html', iframe:true, width:'400px',height:'250px'}) 
```

我真的不知道为什么，如果有人想澄清它，欢迎您。我只知道它解决了我的问题。

# php - 非函数PHP中的多个条件

> ID：14692315
> 
> 赞同：1
> 
> 时间：2013-02-04T17:41:54.337
> 
> 标签：php, mysql

我正在尝试检查用户是否观看了视频。我有两张表 - 一张填充了观看视频的视频 ID 和用户 ID。另一个有视频。

```
SELECT * 
FROM videos 
WHERE Channel LIKE '%$finalmood%' 
AND WHERE NOT IN(select * from userviews 
    where userviews.videoid = videos.id 
    where userviews.userid = $tempuser 
```

我想我可能不正确地使用了 notin 函数。我将如何在 notin 函数上定位多个条件？

提前致谢-

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:45:58.923

你可以这样做`LEFT JOIN`：

```
SELECT * 
FROM videos 
LEFT JOIN userviews ON userviews.videoid = videos.id AND userviews.userid = $tempuser
WHERE Channel LIKE '%$finalmood%' AND userviews.videoid IS NULL 
```

顺便说一句，确保你消毒`$tempuser`。

# android - 使用此功能获取 Galaxy Nexus (4.2.1) 相机百万像素的问题

> ID：14692316
> 
> 赞同：0
> 
> 时间：2013-02-04T17:41:57.343
> 
> 标签：android, camera, android-camera

我正在使用此功能获得百万像素的相机：

```
private String getCameraMegapixels(Camera cam){
        Camera.Size size;
        size = cam.getParameters().getPictureSize();
        DecimalFormat localDecimalFormat = new DecimalFormat("#.#");        
        return localDecimalFormat.format(size.width * size.height / 1000000.0D);            
    } 
```

它适用于我测试过的所有手机的前置和后置摄像头，但在 Galaxy nexus 中。在galaxy nexus中出了点问题，因为我知道相机（正面和背面）有0.1兆像素......

银河系和获得百万像素的方法有问题吗？

PD：Galaxy Nexus Android 版本为 4.2.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:32:16.970

如果您的意图是获得最大支持的百万像素，您可以简单地检查每个输入`Camera.Size`并`cam.getParameters().getSupportedPictureSizes()`选择其中最高`height*width`的。

# .htaccess - .htaccess 删除文件名中的任意文本

> ID：14692320
> 
> 赞同：1
> 
> 时间：2013-02-04T17:42:11.633
> 
> 标签：.htaccess, mod-rewrite

我有一个客户，他上传了数千张名称如`1057_1.jpg`,`1057_2.jpg`等的图像`1083_1H.jpg`- 总是一个数字、一个下划线、一个数字和一个可选字母。CMS 使用这些将它们链接到相关条目。

出于 SEO 的原因，我们希望这些图像文件名包含一些取自 CMS 的关键字。所以他们会变成，比如说，`1057_1-some-keywords-here.jpg`。有没有办法使用 .htaccess 来保持文件名相同，但重定向`1057_1-any-arbitrary-words.jpg`到`1057_1.jpg`? 基本上要删除从第一个破折号到点的所有内容？

感谢您的帮助 - 我必须在某个时候正确学习 htaccess，但现在需要找到一个快速的解决方案！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:16:26.400

你可以试试这个：

```
RewriteEngine On
RewriteBase /
#RewriteCond %{REQUEST_FILENAME} !-f
#RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} /([^\-]+)-.+\.([^/]+)/?
RewriteRule .*    %1.%2     [R=301,L] 
```

永久重定向任何 URL，例如：

`http://example.com/1057_1-anything.jpg`或者

`http://example.com/any/number/of/folders/1057_1-anything.jpg`

到：

`http://example.com/1057_1.jpg`或者

`http://example.com/any/number/of/folders/1057_1.jpg`

有效地`-anything`从URL 路径中的**最后一个字符串中删除。**

图像名称必须是 URL 路径中的**最后一个字符串**，才能使规则集起作用。

对于静默映射，请`R=301`从`[R=301,L]`.

### 更新：

`anything`不包括句点，因为它用于确定名称的结尾和扩展名的开始。`anything`但是，根据先前评论中的 OP 要求，我修改了规则集以删除除最后一个以外的任意数量的句点。

# python - 将数组分组为元组数组 - 奇数长度

> ID：14692322
> 
> 赞同：1
> 
> 时间：2013-02-04T17:42:14.323
> 
> 标签：python, python-2.7

假设我有一条路径，例如`/resource/123/resourceb/b/someotherresource/`. 在这种情况下`someotherresource`，没有资源 ID。这个例子有 3 个资源，但我需要处理 1-4 个资源之间的任何地方。

什么是 pythonic 方式将其拆分为`[(a,b), (c,d), (e, None)]`

例子：

```
x =  '/resource/123/resourceb/b/someotherresource/'
xplit = x.split('/')
>>> [ 'resource', '123', 'resourceb', 'b', 'someotherresource']
import magic
# ideal result
>>> [ ('resource', '123'), ('resourceb', 'b'), ('someotherresource', None)] 
```

我知道我可以以愚蠢的方式做到这一点，但是有没有一种简单的方法来拆分和配对奇数长度的数组？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:51:07.343

```
In [24]: x
Out[24]: '/resource/123/resourceb/b/someotherresource/'

In [25]: s = x.strip('/').split('/')

In [26]: zip(s[::2], s[1::2] + [None])
Out[26]: [('resource', '123'), ('resourceb', 'b'), ('someotherresource', None)] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T17:44:33.750

使用`itertools.izip_longest()`和`iter`魔法：

```
import itertools
list(itertools.izip_longest(*[iter(xplit[1:])]*2)) 
```

我们从索引 1 开始，因为前导`/`斜杠在开始时为您提供了一个空元素。

或者，在开始和结束处去掉斜线：

```
list(itertools.izip_longest(*[iter(x.strip('/').split('/'))]*2)) 
```

输出：

```
>>> list(itertools.izip_longest(*[iter(x.strip('/').split('/'))]*2))
[('resource', '123'), ('resourceb', 'b'), ('someotherresource', None)] 
```

总结为魔术方法：

```
import itertools

def split_to_pairs(path):
    path = path.strip('/').split('/')
    return list(itertools.izip_longest(*[iter(path)]*2)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T17:46:05.427

查看来自的`grouper()` [recipie`itertools`](http://docs.python.org/3/library/itertools.html#itertools-recipes)：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx"
    args = [iter(iterable)] * n
    return zip_longest(*args, fillvalue=fillvalue) 
```

（在 2.x 中，`zip_longest()`是`izip_longest()`）

# php - 使用 Doctrine DBAL 从 SELECT 查询中计算行数

> ID：14692325
> 
> 赞同：11
> 
> 时间：2013-02-04T17:42:29.193
> 
> 标签：php, doctrine-orm

好的，所以我正在寻找一种简洁的方法来计算使用 Doctrine DBAL 的 SELECT 查询的行数。

我知道我可以，`SELECT COUNT(*)`但是当我获取结果时我需要对数组进行排序。或者，建议查看`getScalarResult()`. 但除了 DQL（这是一个不同的项目）之外，我似乎找不到任何关于此的文档。

那么最简洁的方法是什么？我想这是因为我习惯了 MySQLI 的伟大属性`num_rows`！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2015-02-04T15:56:27.430

使用 Doctrine DBAL 执行此操作的另一种方法是将计数作为字段并返回列

```
 $sql = "SELECT count(*) AS Total FROM myTable WHERE myId = :myId";
    $stmt = $conn->prepare($sql);
    $stmt->bindValue('myId', $myId, PDO::PARAM_INT);
    $stmt->execute();
    $count = $stmt->fetchColumn(0); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-02-04T17:53:15.007

其实我以为我看起来很努力，但我只是偶然发现了这个[Count Records Returned MySQL Doctrine](https://stackoverflow.com/questions/2718410/count-records-returned-mysql-doctrine)

所以方法就是通过`rowCount()`方法。

例子：

`$num_rows = $conn->executeQuery("SELECT * FROM users")->rowCount();`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2019-11-30T13:17:04.127

我喜欢使用查询生成器。一个例子：

```
 $queryBuilder = $connection->createQueryBuilder();
    $queryBuilder->select('COUNT(*)');
    $queryBuilder->from("the_table");
    $queryBuilder->where('some_column = :theValue');
    $queryBuilder->setParameter('theValue', $someValue);

    return (int) $queryBuilder->execute()->fetchColumn(); 
```

# jsf - 如何在 JSF 中创建切换按钮？

> ID：14692326
> 
> 赞同：4
> 
> 时间：2013-02-04T17:42:33.747
> 
> 标签：jsf, jsf-2, toggle, commandbutton

如何在 JSF 中创建切换按钮？

基本上，我需要两个按钮“in”和“out”。它们本质上调用相同的托管 bean，但由于每次单击都应禁用一个，而启用另一个，反之亦然。如何才能做到这一点？我应该使用 ajax 功能吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T17:54:02.800

只需有一个`boolean`您在操作方法中反转的`disabled`属性，并在两个按钮的属性中完全使用该属性，反转。

开球示例：

```
@ManagedBean
@ViewScoped
public class Bean {

    private boolean enabled;

    public void toggle() {
        enabled = !enabled;
    }

    public boolean isEnabled() {
        return enabled;
    }

} 
```

和

```
<h:form>
    <h:commandButton value="Enable" action="#{bean.toggle}" disabled="#{bean.enabled}" />
    <h:commandButton value="Disable" action="#{bean.toggle}" disabled="#{not bean.enabled}" />
</h:form> 
```

Ajax 在技术上不是必需的。随意添加`<f:ajax>`两个按钮以改善用户体验。

`@ViewScoped`豆子又是非常必要的。一个`@RequestScoped`将在请求结束时被丢弃并在下一个请求中重新创建，从而导致`boolean`重新初始化为默认值，因此在第二次单击后似乎无法工作，因为 JSF 将作为防止篡改/黑客请求的一部分还检查`disabled`（和`rendered`) 属性在实际调用操作之前。

### 也可以看看：

*   [如何选择合适的bean范围？](https://stackoverflow.com/questions/7031885/how-to-choose-the-right-bean-scope/)
*   [未调用 commandButton/commandLink/ajax 操作/侦听器方法或未更新输入值](https://stackoverflow.com/questions/2118656/commandlink-commandbutton-ajax-backing-bean-action-listener-method-not-invoked/)（第 5 点）

# php - 联系表单默认值验证

> ID：14692328
> 
> 赞同：1
> 
> 时间：2013-02-04T17:42:41.497
> 
> 标签：php, javascript, html

我有一个在网络上免费提供的联系表。手指交叉它很棒，但是对于我有默认值（例如“全名”）的表单，我不确定如何让它在 JS 和 PHP 中验证这些字段。

这是我的 HTML：

```
<input type="text" name="contactname" id="contactname" class="required" role="input" aria-required="true" onfocus="if(this.value=='Full Name') this.value='';" onblur="if(this.value=='') this.value='Full Name';" value="Full Name" /> 
```

这是我的 JS：

```
$(document).ready(function(){
// validate signup form on keyup and submit
var validator = $("#contactform").validate({
    rules: {
        contactname: {
            required: true,
            minlength: 2
        },
        email: {
            required: true,
            email: true
        },
        telephone: {
            required: true,
            minlength: 11
        },
        message: {
            required: true,
            minlength: 10
        }
    },
    messages: {
        contactname: {
            required: "Please enter your Full Name",
            minlength: jQuery.format("Your name needs to be at least {0} characters")
        },
        email: {
            required: "Please enter a valid Email Address",
            minlength: "Please enter a valid Email Address"
        },
        telephone: {
            required: "Please enter a valid Telephone Number",
            minlength: "Please enter a valid Telephone Number"
        },
        message: {
            required: "You need to enter details!",
            minlength: jQuery.format("Enter at least {0} characters")
        }
    },
    // set this class to error-labels to indicate valid fields
    success: function(label) {
        label.addClass("checked");
    }
});
});

<?php
//If the form is submitted
if(isset($_POST['contactform'])) {
  //Check to make sure that the name field is not empty
  if(trim($_POST['contactname']) == '') {
      $hasError = true;
  } else {
      $name = trim($_POST['contactname']);
  }

  //Check to make sure sure that a valid email address is submitted
  if(trim($_POST['email']) == '')  {
    $hasError = true;
  } else if (!eregi("^[A-Z0-9._%-]+@[A-Z0-9._%-]+\.[A-Z]{2,4}$", trim($_POST['email']))) {
      $hasError = true;
  } else {
      $email = trim($_POST['email']);
  }

  //Check to make sure comments were entered
  if(trim($_POST['message']) == '') {
    $hasError = true;
  } else {
      if(function_exists('stripslashes')) {
          $comments = stripslashes(trim($_POST['message']));
      } else {
          $comments = trim($_POST['message']);
      }
  }

  //If there is no error, send the email
  if(!isset($hasError)) {
      $emailTo = 'email address'; //Put your own email address here
      $subject = 'Contact Form';
      $body = "Full Name: $name \nEmail Address: $email \nDetails: $comments";
      $headers = 'From: Company <'.$emailTo.'>' . "\r\n" . 'Reply-To: ' . $email;

      mail($emailTo, $subject, $body, $headers);
      $emailSent = true;
      die(header('Location: index.html'));
  }
}
?> 
```

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T13:24:19.937

使用`placeholder`属性而不是在字段中放置默认值。

```
<input type="text" name="contactname" id="contactname" class="required" role="input" aria-required="true" placeholder="Full Name" /> 
```

然后，要在 IE 中启用占位符，请使用以下插件：

```
// ****** START jQuery Placeholder INTEGRATION ***** //

/* Adds class="placeholder" to input elements in browsers that do not support native placeholder attributes (such as IE 6-9) 
http://mths.be/placeholder v2.0.7 by @mathias
https://github.com/mathiasbynens/jquery-placeholder
 */
;(function(f,h,$){var a='placeholder' in h.createElement('input'),d='placeholder' in h.createElement('textarea'),i=$.fn,c=$.valHooks,k,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){var l=this;l.filter((a?'textarea':':input')+'[placeholder]').not('.placeholder').bind({'focus.placeholder':b,'blur.placeholder':e}).data('placeholder-enabled',true).trigger('blur.placeholder');return l};j.input=a;j.textarea=d;k={get:function(m){var l=$(m);return l.data('placeholder-enabled')&&l.hasClass('placeholder')?'':m.value},set:function(m,n){var l=$(m);if(!l.data('placeholder-enabled')){return m.value=n}if(n==''){m.value=n;if(m!=h.activeElement){e.call(m)}}else{if(l.hasClass('placeholder')){b.call(m,true,n)||(m.value=n)}else{m.value=n}}return l}};a||(c.input=k);d||(c.textarea=k);$(function(){$(h).delegate('form','submit.placeholder',function(){var l=$('.placeholder',this).each(b);setTimeout(function(){l.each(e)},10)})});$(f).bind('beforeunload.placeholder',function(){$('.placeholder').each(function(){this.value=''})})}function g(m){var l={},n=/^jQuery\d+$/;$.each(m.attributes,function(p,o){if(o.specified&&!n.test(o.name)){l[o.name]=o.value}});return l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr('placeholder')&&o.hasClass('placeholder')){if(o.data('placeholder-password')){o=o.hide().next().show().attr('id',o.removeAttr('id').data('placeholder-id'));if(m===true){return o[0].value=n}o.focus()}else{l.value='';o.removeClass('placeholder');l==h.activeElement&&l.select()}}}function e(){var q,l=this,p=$(l),m=p,o=this.id;if(l.value==''){if(l.type=='password'){if(!p.data('placeholder-textinput')){try{q=p.clone().attr({type:'text'})}catch(n){q=$('<input>').attr($.extend(g(this),{type:'text'}))}q.removeAttr('name').data({'placeholder-password':true,'placeholder-id':o}).bind('focus.placeholder',b);p.data({'placeholder-textinput':q,'placeholder-id':o}).before(q)}p=p.removeAttr('id').hide().prev().attr('id',o).show()}p.addClass('placeholder');p[0].value=p.attr('placeholder')}else{p.removeClass('placeholder')}}}(this,document,jQuery));

$(document).ready(function() {
    $('input, textarea').placeholder();
});

// ****** END jQuery Placeholder INTEGRATION ***** // 
```

**更新**

这是一个与 IE 占位符集成的小提琴：http: [//jsfiddle.net/DNX8V/1/](http://jsfiddle.net/DNX8V/1/)

验证对我来说似乎工作正常......？

**更新#2**

将电子邮件验证替换为：

```
function isValidEmailAddress(emailAddress) {
    var pattern = new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i);
    return pattern.test(emailAddress);
}; 
```

然后

```
if( !isValidEmailAddress( emailaddress ) ) { /* do stuff here */ } 
```

# javascript - Highchart 与多个 Y 轴崩溃

> ID：14692329
> 
> 赞同：0
> 
> 时间：2013-02-04T17:42:43.503
> 
> 标签：javascript, highcharts

当我添加第二个系列时，我的 highchart 崩溃了 chrome。
看不到要调试
的 Chrome 控制台.. :( 有人知道吗？

```
$(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                type: 'line',
                margin: [40,10,60,80],
            },
            title: {
                text: 'Temperature Today'
            },
            xAxis: {
                type: 'datetime',    
                dateTimeLabelFormats: {
                    day: '%H:%M'
                },
                tickInterval: 3600 * 1000,
                labels: {
                    rotation: -45,
                    align: 'right',

                    style: {
                        fontSize: '10px',
                        fontFamily: 'Verdana, sans-serif'
                    }
                },
            }, 
            yAxis: {
                title: {
                    text: 'Temperature'
                },
                minorGridLineWidth: 0,
                /* gridLineWidth: 0, */
                /* alternateGridColor: null */
            },
            tooltip: {
                formatter: function() {
                        return ''+
                        Highcharts.dateFormat('%H:%M', this.x) +': '+ this.y;
                }
            },
            plotOptions: {
                spline: {
                    lineWidth: 4,
                    states: {
                        hover: {
                            lineWidth: 3
                        }
                    },
                    marker: {
                        enabled: false,
                        states: {
                            hover: {
                                enabled: true,
                                symbol: 'circle',
                                radius: 3,
                                lineWidth: 1
                            }
                        }
                    },
                }
            },
            series: [{
                    name: 'Temperature',
                    data: temp,
                    type: 'line',
                    showInLegend: false,
                    pointInterval: 60 * 1000,
                    pointStart: Date.UTC(2006, 0, 1),
                        marker: {
                            enabled: false
                        },
                    dashStyle: 'solid',
                    yAxis: 0,
                    xAxis: 0,
                    } , {
                    name: 'Humdity',
                    data: hum,
                    yAxis: 1,
                    xAxis: 0,
                    showInLegend: false,
                    type: 'line',
             }],
            navigation: {
                menuItemStyle: {
                    fontSize: '6px'
                }
            }
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:46:27.490

你只有一个`yAxis`，所以它会中断，因为你将第二个系列设置为显示到第二个（是的，这就是`yAxis: 1`意思）。

删除它或创建第二个`yAxis`.

**更新**：

*   使用`yAxis: 0`参考第一个和`1`第二个。
*   在jsfiddle 的第 36 行`,`之后丢失。`}`
*   之前存储数据。

[**演示**](http://jsfiddle.net/ricardolohmann/vDGGj/3/)

# sql - 使用 Pivot 将多个表连接到动态表中

> ID：14692333
> 
> 赞同：0
> 
> 时间：2013-02-04T17:43:10.940
> 
> 标签：sql, sql-server-2008, join, pivot

这段代码现在显示来自多个表的信息，这些表是旋转好的，所以这段代码现在几乎可以按照我的意愿工作（目前正在处理它，没有进一步的问题 atm）：

```
if (exists (select * from tempdb.INFORMATION_SCHEMA.TABLES where TABLE_NAME = '##tempz'))
begin
drop table ##tempz
end
else
DECLARE @startDate datetime
DECLARE @enddate datetime
DECLARE @registernum int
DECLARE @storename varchar(20)
DECLARE @cashiername varchar(20)
SET @startDate = '1/1/2011'
SET @enddate = '1/1/2013'
SET @registernum = 01
SET @storename = '01'
SET @cashiername = 'admin'

DECLARE @cols AS NVARCHAR(MAX),@colsNull AS NVARCHAR(MAX),@query  AS NVARCHAR(MAX)
SELECT @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(c.CurrencyDesc)
FROM rpPay p LEFT JOIN RPTrs r ON p.ReceiptNo = r.ReceiptNo LEFT JOIN Currencies c ON c.POSCurrency = LEFT(p.paytype,1)
WHERE r.trsdate >= @startDate AND r.trsdate <= @enddate
FOR XML PATH(''), TYPE ).value('.', 'NVARCHAR(MAX)'),1,1,'')

SELECT @colsNull = STUFF((SELECT DISTINCT ', IsNull(' + QUOTENAME(c.CurrencyDesc) +', 0) as '+ QUOTENAME(c.CurrencyDesc)
FROM rpPay p LEFT JOIN RPTrs r ON p.ReceiptNo = r.ReceiptNo LEFT JOIN Currencies c ON LEFT(p.paytype,1) = c.POSCurrency
WHERE r.trsdate >= @startDate AND r.trsdate <= @enddate
FOR XML PATH(''), TYPE ).value('.', 'NVARCHAR(MAX)'),1,1,'')

--select @cols, @colsnull

SET @query = 'select date, cashregister, storeid, cashier, '+@colsNull+' into ##tempz
FROM
(SELECT cast(r.trsdate AS DATE) date,c.CurrencyDesc,p.amount,r.cashregister,r.storeid,r.cashier
FROM rpPay p LEFT JOIN RPTrs r ON p.ReceiptNo = r.receiptno LEFT JOIN Currencies c ON LEFT(p.paytype,1) = c.POSCurrency
WHERE r.trsdate >= '''+ convert(varchar(10), @startDate, 101) +''' AND r.trsdate <= '''+ convert(varchar(10), @endDate, 101) +''' 
) p
pivot
(sum(amount) FOR CurrencyDesc in('+@cols+')) piv'
execute(@query)

select * from ##tempz 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:51:05.203

您没有指定您使用的是什么 RDBMS，但我根据您之前的问题假设 SQL Server。根据有限的细节，你可以`PIVOT`得到数据。

如果您提前知道这些值，那么您可以使用静态数据透视表对这些值进行硬编码：

```
select *
from
(
    select 
        cast(r.trsdate as DATE) date,
        c.CurrencyDesc,
        p.amount
    from rpPay p
    left join RPTrs r
        on p.id = r.id
    left join Currencies c
        on p.PayType = c.PayType
    where r.trsdate >= @startDate 
        and r.trsdate <= @enddate
) src
pivot
(
    sum(amount)
    for CurrencyDesc in (Amex, Cash, Visa, Check, [Gift Card])
) piv 
```

如果值未知，则可以使用动态 sql：

```
declare @startDate datetime
declare @enddate datetime
  set @startDate = '1/1/12'
 set @enddate = '1/1/13'
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(c.CurrencyDesc) 
                    from rpPay p
                    left join RPTrs r
                        on p.id = r.id
                    left join Currencies c
                        on p.PayType = c.PayType
                    where r.trsdate >= @startDate 
                        and r.trsdate <= @enddate
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
    = 'select date, '+@cols+'
       from
       (
         select 
            cast(r.trsdate as DATE) date,
            c.CurrencyDesc,
            p.amount
        from rpPay p
        left join RPTrs r
            on p.id = r.id
        left join Currencies c
            on p.PayType = c.PayType
        where r.trsdate >= '''+ convert(varchar(10), @startDate, 101) +'''
            and r.trsdate <= '''+ convert(varchar(10), @endDate, 101) +'''
       ) p
       pivot
       (
          sum(amount)
          for CurrencyDesc in('+@cols+')
       ) piv'

execute(@query) 
```

编辑#1，根据您编辑的问题，您可以使用：

```
declare @startDate datetime
declare @enddate datetime
declare @registernum int
declare @storename int
declare @cashiername varchar(20)
set @startDate = '1/1/2012'
set @enddate = '1/1/2013'
set @registernum = 01
set @storename = '01'
set @cashiername = 'admin'

DECLARE @cols AS NVARCHAR(MAX),
    @colsNull AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT DISTINCT ',' + QUOTENAME(c.CurrencyDesc) 
                        from rpPay p 
                        left join RPTrs r 
                            on p.ReceiptNo = r.ReceiptNo 
                        left join Currencies c 
                            on p.PayType = c.POSCurrency
                        where r.trsdate >= @startDate and r.trsdate <= @enddate
                            and cashregister = @registernum
                            and r.storeid = @storename
                            and cashier = @cashiername
                        FOR XML PATH(''), TYPE ).value('.', 'NVARCHAR(MAX)'),1,1,'')

select @colsNull = STUFF((SELECT DISTINCT ', IsNull(' + QUOTENAME(c.CurrencyDesc) +', 0) as '+ QUOTENAME(c.CurrencyDesc)
                        from rpPay p 
                        left join RPTrs r 
                            on p.ReceiptNo = r.ReceiptNo 
                        left join Currencies c 
                            on p.PayType = c.POSCurrency
                        where r.trsdate >= @startDate and r.trsdate <= @enddate
                            and cashregister = @registernum
                            and r.storeid = @storename
                            and cashier = @cashiername
                        FOR XML PATH(''), TYPE ).value('.', 'NVARCHAR(MAX)'),1,1,'')

--select @cols, @colsnull

set @query = 'select date, cashregister, storeid, cashier, '+@colsNull+'
                from
                (
                    select cast(r.trsdate as DATE) date,
                        c.CurrencyDesc,
                        p.amount,
                        r.cashregister,
                        r.storeid,
                        r.cashier 
                    from rpPay p 
                    left join RPTrs r 
                        on p.ReceiptNo = r.receiptno 
                    left join Currencies c 
                        on p.PayType = c.POSCurrency
                    where r.trsdate >= '''+ convert(varchar(10), @startDate, 101) +''' 
                        and r.trsdate <= '''+ convert(varchar(10), @endDate, 101) +''' 
                        and cashregister = '''+cast(@registernum as varchar(10))+''' 
                        and r.storeid = '''+cast(@storename as varchar(50))+''' 
                        and r.cashier = '''+@cashiername+''' 
                ) p
                pivot
                (
                    sum(amount) 
                    for CurrencyDesc in('+@cols+')
                ) piv'

execute(@query) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/8eb07/18)

# android - 在 Android 元数据中指定十六进制颜色值

> ID：14692335
> 
> 赞同：2
> 
> 时间：2013-02-04T17:43:21.190
> 
> 标签：android, metadata

我正在努力让一些元数据在 Android 上运行。最具体地说，我正在获取应用程序级元数据来设置以下格式的视图背景：

```
<meta-data android:name="background"
           android:value="red" />

<meta-data android:name="background"
           android:resource="@drawable/my_red_background" />

<meta-data android:name="background"
           android:value="#FF0000" /> 
```

我正在使用以下代码来解析信息：

```
ApplicationInfo app = getPackageManager().getApplicationInfo(getPackageName(), PackageManager.GET_META_DATA);
Bundle metaData = app.metaData;
if (metaData != null) {
    int resourceID = metaData.getInt("background", -1);
    if (resourceID != -1) {
        //set the background resource of my view (THIS WORKS)
    }
    else {
        String background = metaData.getString("background");
        if (background != null) {
        try {
            backgroundColor = Color.parseColor(background);
            //Set background color (THIS WORKS for 'red', 'blue', etc.)
        }
        catch (IllegalArgumentException e) {
            e.printStackTrace();
        }
    }

} 
```

如果我使用资源方法并将其指向可绘制对象，则此方法有效。如果我使用“红色”、“蓝色”、“黄色”等颜色字符串 - 这些也可以。但是，如果我尝试使用前面带有井号（#FF0000、#FFFF0000 等）的任何格式的颜色，这将不起作用，即使[Android 文档](http://stuff.mit.edu/afs/sipb/project/android/docs/guide/topics/manifest/meta-data-element.html)建议它应该：

![android:值描述](../Images/c548268612626f524f20c4d95a469f53.png)

这是一个已知的错误？有没有简单的解决方法（除了使用简单的字符串或可绘制的引用）？还是我错过了什么？我正在使用 Asus Transformer Prime 10.1 TF301 平板电脑进行测试（Android 4.0.3）。

**编辑**

我想指出，这不是问题`Color.parseColor()`。Android 从不输入语句`if (background != null)`，因此元数据根本没有被识别为字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:00:50.767

解决了！这本身不是一个 Android 错误，而是一个 Android 文档错误（*惊喜，惊喜！*）。十六进制颜色需要一个转义字符才能正确处理：

```
<meta-data android:name="background"
           android:value="\#FF0000" /> 
```

![在此处输入图像描述](../Images/9c094920fd6544c06c47864a87dc9ebd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T18:29:55.667

**解决方案 1)**使用反斜杠，以便 value 是字符串而不是数字。

**解决方案 2）**不要调用`Color.parseColor(bundle.parseString(..))`，只需使用不带反斜杠的 getInt(..) 即可。

**背景：**

`android:value="#aabbgg"`是一个数字

`android:value="\#aabbgg"`是一个字符串

# java - GUI 多线程和套接字

> ID：14692337
> 
> 赞同：-2
> 
> 时间：2013-02-04T17:43:25.157
> 
> 标签：java, multithreading, sockets, user-interface, event-dispatch-thread

我正在为我的客户端服务器应用程序编写简单的 GUI。GUI 客户端应用程序工作正常，但是当我在客户端应用程序之前添加简单的登录表单时，客户端和服务器之间的通信不起作用。这是创建我的客户端 GUI 的代码（代码位于登录表单中的“登录”按钮中 - 当我单击按钮登录表单关闭并且客户端应用程序打开时）：

```
new testUI().setVisible(true);
dispose(); //close Login Form 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:50:27.853

如果您的登录表单不是模态的，那么方法 setVisible () 将立即返回，您将在用户看到它之前处理表单。

确保您的登录表单扩展了 JDialog 并使用`modal=true`传递给 JDialog 类的构造函数的参数创建。

# android - alarmManager 方法每 10 分钟更新一次数据

> ID：14692341
> 
> 赞同：0
> 
> 时间：2013-02-04T17:43:44.827
> 
> 标签：android, alarmmanager

我尝试使用

```
ScheduledExecutorService executor = Executors.newSingleThreadScheduledExecutor();
        executor.scheduleWithFixedDelay(new Runnable(){

            public void run() {
                // update server  (method which has asyncTask)
            }

        }, 0, 600, TimeUnit.SECONDS); 
```

并且在手机休眠后停止工作。我想使用 alarmManager 做同样的事情，但我不知道是否应该使用服务、广播服务或活动来满足上述要求。

请帮帮我。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:03:26.013

由于您要联网，因此我建议您使用[Service](http://developer.android.com/reference/android/app/Service.html)。如果您不需要在执行之间保持状态，或者不想手动处理线程，请使用[IntentService](http://developer.android.com/reference/android/app/IntentService.html)

这是我用来设置轮询服务的代码：

```
 Intent intent = new Intent( context, YourService.class );
    PendingIntent pendingIntent = PendingIntent.getService( context, 0, intent, PendingIntent.FLAG_UPDATE_CURRENT );

    AlarmManager alarmManager = (AlarmManager) context.getSystemService( ALARM_SERVICE );
    alarmManager.setRepeating( AlarmManager.ELAPSED_REALTIME, POLLING_INTERVAL, POLLING_START_DELAY, pendingIntent ); 
```

# html - 无效的 Tumblr HTML 标记：杂散的开始标记 html

> ID：14692344
> 
> 赞同：0
> 
> 时间：2013-02-04T17:44:00.793
> 
> 标签：html, validation, tumblr, w3c-validation

我不时验证我的tumblog，以解决错误。大多数这些错误和警告都是可以解释的，但我不明白这一点。

这意味着什么？（注意：我无法控制输出的标记）

**错误：**

```
Error: Stray start tag html.
From line 3, column 1; to line 3, column 14
</script>
<html lang=en>
<head 
```

**HTML：**

```
<!DOCTYPE html>
<script>var __pbpa = true;</script><script>var translated_warning_string = 'Warnung: Gib dein Tumblr-Passwort nur dann ein, wenn du \u201chttps://www.tumblr.com/login\u201d\x0ain der Adresszeile deines Browsers siehst.\x0a\x0aAu\u00dferdem sollte dort ein gr\u00fcnes \u201cTumblr, Inc.\u201d-Logo zu sehen sein.\x0a\x0aSpammer und andere Strolche benutzen gef\u00e4lschte Formulare, um an Passw\u00f6rter zu kommen.\x0a\x0aTumblr wird dich niemals bitten, dich vom Blog eines Users aus einzuloggen.\x0a\x0aWillst du ganz sicher fortfahren?';</script><script type="text/javascript" language="javascript" src="http://assets.tumblr.com/assets/scripts/pre_tumblelog.js?_v=9a8f53878980f315a039f29ddc0b2038"></script>
<html lang="en"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:46:27.037

HTML 和 HEAD 元素的开始标签是可选的。

SCRIPT 元素不能出现在 HEAD 或 BODY 之外。

由于您在 Doctype 之后立即有一个 SCRIPT，因此您*隐式*打开了 HTML 和 HEAD 元素。

移动`<script>`它，使其出现在您的`<head>`标签之后。

# iphone - 如何在 Xcode 中制作照片分组应用程序？

> ID：14692346
> 
> 赞同：0
> 
> 时间：2013-02-04T17:44:00.830
> 
> 标签：iphone, xcode, ipad

我想在 Xcode 中制作一个照片分组应用程序。我使用故事板，它包括两个视图控制器。并将这两个VC与导航栏连接起来。我在支持文件中添加图像。（例如 Friend1.jpg、Friend2.jpg、Family1.jpg、Family2.jpg）

在VC1中，共有三个按钮，朋友、家人和同事。在 VC2 中，有一个图像视图来显示图像。

当我在 VC1 中按下好友按钮时，VC2 中的图像视图显示 Friend1.jpg 然后，我从左向右滑动，它显示 Friend2.jpg

这样，当我在VC1中按下family按钮时，VC2中的图像视图显示Family1.jpg 然后，我从左向右滑动，它显示Family2.jpg

请给我一些建议，告诉我如何轻松启动它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:51:00.920

我会为此使用 UICollectionView：

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UICollectionView_class/Reference/Reference.html)

> UICollectionView 类管理数据项的有序集合，并使用可定制的布局呈现它们。集合视图提供与表视图相同的通用功能，只是集合视图能够支持的不仅仅是单列布局。集合视图支持可用于实现多列网格、平铺布局、圆形布局等的可定制布局。如果需要，您甚至可以动态更改集合视图的布局。

查看 Apples 文档或 Google 的教程，例如：

[http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12](http://www.raywenderlich.com/22324/beginning-uicollectionview-in-ios-6-part-12)

# sql-server-2008 - SSRS 图表报告，带有用于过滤或更改数据集的滑块

> ID：14692349
> 
> 赞同：1
> 
> 时间：2013-02-04T17:44:15.463
> 
> 标签：sql-server-2008, excel, charts, ssrs-2008, ms-access-2007

我有每月销售/成本数据的 Excel 表。每个月我都使用 excel 生成各种图表，然后将它们发布为 pdf。但我希望其他人能够使用他们在图表上的不同数据。我想在网页上发布报告，该报告在加载时基于表格生成图表。然后，我希望用户能够使用按钮或滑块来更改数据集的范围（主要是日期或季度或产品类型等） )，然后用新结果更新图表。

另外，谁能帮我找到[这个](http://msdn.microsoft.com/en-us/library/aa964128%28SQL.90%29.aspx)sql 2008 文档的等价物？我正在寻找这样的[图表](http://msdn.microsoft.com/en-us/library/Aa964128.moressrschartsfig10%28l=en-US,v=sql.90%29.gif)

我做了一些阅读，发现 SSRS 可以创建 Excel 可以做的所有图表。但我不知道它是否也可以完成所有计算？我还读到我们可以在 sql 中制作数据透视表，但不确定它们是否与 excel 中的相同，我们可以使用它们来过滤数据并且图表实时显示更改。我还阅读了有关使用 ASP.net 的 MS Chart Control 的信息，但我不知道 asp，我不知道在我的情况下研究它对我有多大帮助。我只是希望我的访问者能够操作在他们访问时生成图表的数据集。而已。不想存储他们的更改或任何东西。

大家有什么推荐的？顺便说一句，我考虑使用 sql 2008 来执行此操作。你们推荐我使用 Access 2007

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T14:58:48.563

他们需要在网页上查看报告还是可以在 Excel（或 Excel IE 浏览器插件）中打开报告？ [SoftArtisans OfficeWriter](http://www.officewriter.com/officewriter-for-sql-server-reporting-services.aspx)能够使用基于模板的方法为 SSRS 设计丰富的 Excel 报告。输出将是一个真正的 Excel 文件，其中包含用户可以操作的实时图表、公式和数据透视表。开箱即用的 Excel 导出功能没有真正的公式和图表。

免责声明：我为 SoftArtisans 工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:11:07.583

与 SSRS 中提供的功能相比，Excel 图表和动态自定义功能是一项非常高级的功能……矩阵相当于 SSRS 中的枢轴。您可以按照这篇 MSDN 文章了解[表、矩阵和列表（报表生成器和 SSRS）](http://technet.microsoft.com/en-us/library/dd220592.aspx)。这对于[在 SSRS 2008 中重现 Excel 数据透视表很有帮助](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/f3a9cdcb-73f4-47b2-93ff-7e237dc57f1a)

[如果您可以看一下，这是一个更好的教程。](http://www.codeproject.com/Articles/293855/Adding-Chart-Controls-to-SSRS-Report). 最重要的方面是：-

*   将数据源设置为图表控件

*   定义图表控件要使用的字段

> [使用**参数**将是过滤数据集的最佳方法。因此，您需要在主数据集之上有一个辅助数据集。](http://msdn.microsoft.com/en-us/library/ms155917.aspx)

*   [如何在 SSRS 中使用另一个数据集表值过滤一个数据集值](https://stackoverflow.com/questions/856913/how-to-filter-one-dataset-value-with-another-dataset-table-value-in-ssrs)。

参考：

*   [SSRS可以使用诸如excel拖放之类的数据透视表吗](https://stackoverflow.com/questions/7258346/can-ssrs-use-pivot-tables-such-like-excel-drag-and-drop)
*   [http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/4b4664e2-415b-41d4-99e6-1421aa70e7ac](http://social.msdn.microsoft.com/Forums/en/sqlreportingservices/thread/4b4664e2-415b-41d4-99e6-1421aa70e7ac)

# python - 如何将数组插入到我的金字塔应用程序的数据库表的列中？

> ID：14692350
> 
> 赞同：0
> 
> 时间：2013-02-04T17:44:30.083
> 
> 标签：python, sqlalchemy, pyramid, pickle

我正在尝试创建一个 sql (sqlite) 数据库，用户在其中上传 stl 文件，并且数据（所有点、三角形等）存储在数据库中，以便永久可用。是否可以使用只有两列（三列带有键）的数据库来执行此操作：名称（url 的标题）和数据（数组数据）？

数据数组的格式为：`[[[x1,y1,z1],....],[[v1,v2,v3],...]]`. 首先给出所有点，然后通过给定点的排序来定义三角形。这个数组是否可以存储在数据库中，如果可以，它将是什么数据类型（整数、字符串等）？

在更多地阅读这个问题后，酸洗似乎是一个好方法：[http ://docs.python.org/2/library/pickle.html](http://docs.python.org/2/library/pickle.html)

我无法弄清楚如何实现这一点。我应该只添加泡菜（数据）吗？

编辑：经过进一步审查，似乎酸洗引入了一些使用 JSON 时不存在的安全漏洞。是否可以简单地调用`jsondatastring=JSON.stringify(data)`然后将其保存到数据库中？如果是这样，合适的列类型是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:23:24.250

如果您的意图只是将数组存储在 DB 中并在您的 webapp 代码中使用它，那么 SQLAlchemy[`PickleType`](http://docs.sqlalchemy.org/en/rel_0_8/core/types.html#sqlalchemy.types.PickleType)是一个不错的选择。酸洗和解酸将为您透明地完成：

```
from sqlalchemy.types import PickleType

class Foo(Base):
    __tablename__ = 'foo'
    id = Column(Integer, primary_key=True)
    name = Column(String)
    array = Column(PickleType)

foo = Foo(name=u'bar', array=[1, 2, 3])
session.add(foo)
session.commit()

foo = session.query(Foo).filter_by(name=u'bar').one()
print foo.array 
```

# linux - 创建文件时执行 bash 脚本

> ID：14692353
> 
> 赞同：12
> 
> 时间：2013-02-04T17:44:40.520
> 
> 标签：linux, bash, loops

我正在寻找编写一个小的 bash 脚本，以便在启动时监视任何新创建的文件的目录。如果出现新文件，我希望它的存在触发第二个脚本运行。

我看到这被用来触发压缩最近数字化的视频，并将其添加到摄取镜头的日志中。

目前我的代码如下所示：

```
#!/bin/sh

##VIDSTAT is a global variable coming from a parent script.
##proj is the ingestion directory coming from a parent script
proj=$1

dir="/home/$USER/data/movies/$proj"
dirlist=$(ls $dir)

while { $VIDSTAT -eq 1 }:
do
    for mov in $dirlist
    do
        if [ "$(( $(date +"%s") - $(stat -c "%Y" $mov) ))" -lt "5" ]
        then
        ~/bin/compressNlog.sh $mov
        fi
    done
done 
```

有没有更简单/更清洁/更少内存密集型的方法来做到这一点？

**编辑**我将更改每个捕获会话的摄取目录。我已经相应地调整了代码

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-04T17:56:04.770

**incron**怎么样？它触发文件/目录更改命令。

```
sudo apt-get install incron 
```

例子：

```
<path> <mask> <command> 
```

where`<path>`可以是一个目录（意味着该目录和/或直接在该目录中的文件（不是该目录的子目录中的文件！）被监视）或文件。

`<mask>`可以是以下之一：

```
IN_ACCESS           File was accessed (read) (*)
IN_ATTRIB           Metadata changed (permissions, timestamps, extended attributes, etc.) (*)
IN_CLOSE_WRITE      File opened for writing was closed (*)
IN_CLOSE_NOWRITE    File not opened for writing was closed (*)
IN_CREATE           File/directory created in watched directory (*)
IN_DELETE           File/directory deleted from watched directory (*)
IN_DELETE_SELF           Watched file/directory was itself deleted
IN_MODIFY           File was modified (*)
IN_MOVE_SELF        Watched file/directory was itself moved
IN_MOVED_FROM       File moved out of watched directory (*)
IN_MOVED_TO         File moved into watched directory (*)
IN_OPEN             File was opened (*) 
```

`<command>`是事件发生时应该运行的命令。在命令规范中可以使用以下通配符：

```
$$   dollar sign
$@   watched filesystem path (see above)
$#   event-related file name
$%   event flags (textually)
$&   event flags (numerically) 
```

如果你观察一个目录，那么 $@ 保存目录路径和 $# 触发事件的文件。如果您查看文件，则 $@ 保存文件的完整路径，而 $# 为空。

**工作示例：**

```
$sudo echo spatel > /etc/incron.allow
$sudo echo root > /etc/incron.allow 
```

启动守护进程：

```
$sudo /etc/init.d/incrond start 
```

编辑`incrontab`文件

```
$incrontab -e
/home/spatel IN_CLOSE_WRITE touch /tmp/incrontest-$# 
```

测试一下

```
$touch /home/spatel/alpha 
```

结果：

```
$ls -l /tmp/*alpha*
-rw-r--r-- 1 spatel spatel 0 Feb  4 12:32 /tmp/incrontest-alpha 
```

**注意：**`Ubuntu`您需要在启动时激活 inotify 。请在 Grub menu.lst 文件中添加以下行：

```
kernel /boot/vmlinuz-2.6.26-1-686 root=/dev/sda1 ro inotify=yes 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T17:48:32.970

您可以使用神奇的`inotify`工具来做到这一点：

```
inotifywait -r -m ./YOUR_MONITORED_DIR |
    while read a b file; do
        [[ $b == *CREATE* ]] && ./another_script "$file"
    done 
```

这种方法有一个很大的优势是可以避免每 N 秒轮询一次。

> Inotify（inode notify）是一个 Linux 内核子系统，用于扩展文件系统以通知文件系统的更改，并将这些更改报告给应用程序。它取代了具有类似目标的早期设施 dnotify。

[http://en.wikipedia.org/wiki/Inotify](http://en.wikipedia.org/wiki/Inotify)
查看[inotify 文档](http://inotify.aiken.cz/?section=inotify&page=about&lang=en)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T17:52:32.350

使用[iwatch](http://iwatch.sourceforge.net/index.html)。不完全是。它将处理制作守护进程、在启动时运行、监控和记录等所有细节。您需要做的就是设置选项，并让您的 bash 脚本处理对文件进行实际操作的细节。

# javascript - 生成 html 的 Angular 过滤器

> ID：14692354
> 
> 赞同：18
> 
> 时间：2013-02-04T17:44:45.363
> 
> 标签：javascript, angularjs

我有一个小的角度过滤器，它插入一个（引导）图标来代替真值。它可以工作，但 html 已编码：

```
 var conApp = angular.module('conApp', []);
  conApp.filter('trueIcon', function($filter){
    return function(booleanValue){
        return booleanValue ? '<i class="icon-ok"></i>' : '';
    }
  }); 
```

我必须实现另一个过滤器来解码 html 吗？有这样做的“角度”方式吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-04T17:47:50.177

您需要使用 ng-bind-html 来呈现 html。

```
<span ng-bind-html="foo | trueIcon"></span> 
```

也就是说......这真的不是过滤器的用途。过滤器更多地用于清理写入视图的数据，而不是生成视图/DOM 本身的元素。您最好为此创建一个指令：

```
app.directive('trueIcon', function() {
   return {
      restrict: 'E',
      template: '<i ng-class="{\'icon-ok\': value, \'icon-not-okay\': !value}"></i>',
      scope: {
         value: '='
      }
   };
});

<true-icon value="foo"></true-icon> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T17:50:11.210

默认情况下，AngularJS 正在清理表达式评估的结果。要将 HTML 显示为标记，您有 2 个选项：

*   [http://docs.angularjs.org/api/ngSanitize.directive:ngBindHtml](http://docs.angularjs.org/api/ngSanitize.directive:ngBindHtml)（来自 ngSanitize 模块）
*   [http://docs.angularjs.org/api/ng.directive:ngBindHtmlUnsafe](http://docs.angularjs.org/api/ng.directive:ngBindHtmlUnsafe)（我不推荐这个，因为它会带来潜在的安全风险）。

虽然上述内容将使您的过滤器工作，但也许您应该考虑将其转换为指令？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-04T10:41:32.457

对于将 \r\n 转换为的情况，我发现的另一种方法
是使用一个小函数和 *ngFor。

在您的 ts 文件中，添加函数

```
splitLines(text: String): string[] {
  return text.split(/\r?\n/);
} 
```

在 html 中

```
<span *ngFor="let row of splitLines(multilineStringVariable)">
  {{row}}<br/>
</span> 
```

# php - 在 php 中编写我的 if 语句的更短方法

> ID：14692356
> 
> 赞同：0
> 
> 时间：2013-02-04T17:44:53.537
> 
> 标签：php

除了缩短变量名之外，还有没有更短的方法来编写这段代码。它伤害了我的眼睛。

```
if($day > 30 && ($month == 1 || $month == 3 || $month == 5 || $month == 7 || $month == 8 || $month == 10 || $month == 12)) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T17:48:59.773

```
if ($day > cal_days_in_month(CAL_GREGORIAN, $month, $year)) { 
# do your error handling here
} 
```

您应该始终搜索[内置函数](http://php.net/manual/en/function.cal-days-in-month.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:47:01.847

有很多方法。

最简单的是使用数组和[`in_array`](http://php.net/in_array)：

```
$months = array(1, 3, 5, 7, 8, 10, 12);
if($day > 30 && in_array($month, $months)) 
```

# c++ - 使用 C++ 的 STL 进行第 i 个顺序统计

> ID：14692361
> 
> 赞同：14
> 
> 时间：2013-02-04T17:45:06.317
> 
> 标签：c++, data-structures, stl

给定一个空数组，我需要进行两种类型的查询

1.  在数组中插入一个元素

2.  查找某个元素*k*的索引（显然数组必须保持排序）

这可以通过使用`set`容器来完成

```
set<int> st;
set.insert(t); 
```

这会将我的元素插入`O(log(n))`.

对于第二个查询

```
set<int>::iterator it;
it = st.find(k);
idx = distance(st.begin(), it); 
```

这需要`O(n)`时间。( `O(n)`[对于`distance()`[ + `O(log(n)`[对于`set::find()`] )。

有没有办法在`O(log(n))`使用 C++ 的预定义容器时进行这两个查询？

[http://www.cplusplus.com/reference/stl/](http://www.cplusplus.com/reference/stl/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:13:58.323

我认为标准库的容器不可能做到这一点，因为支持按索引访问需要更改实现（为每个节点添加一个计数器）。这将增加每个节点的大小。而 C++ 的哲学是“不要为你不使用的东西付费”。

如果您真的需要这个，建议使用一个[计数器树](http://dl.dropbox.com/u/8437476/works/countertree/doc/index.html)实现来满足您的要求（并且它至少支持一些 C++11 功能）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-05T16:04:57.093

不，这是不可能的（使用预定义的容器）。C++ 标准库的序列容器具有：

*   O(1) 随机访问和 O(N) 插入/删除或
*   O(N) 随机访问和 O(1) 插入/删除

请注意，这`deque`是一个例外，但仅当插入/删除发生在数组的末端时。一般情况仍然是O(N)。

此外，迭代器的分类不包括这种情况的类别。您有*双向迭代器*（ 、 、 和 的那些`list`）`set`，它们`multiset`需要O(N) 时间才能跳转到随机位置，下一个类别是*随机访问迭代器*（和的那些）。没有中间类别。`map``multimap`*`vector``deque``string`*

 *添加一个新类别一点也不简单。该库还实现了许多`for_each`适用于容器的算法（如 ）。每个迭代器类别都有一个实现。

顺序统计树已经在[Boost](http://boost.org)上多次提出。据我所知：

1.  2004：[第一个建议](http://lists.boost.org/Archives/boost/2004/03/62823.php)（不知道有没有实现）
2.  2006 年：[“分层数据结构”](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2006/n2101.html#tr.hierarchy.augment)
3.  2006：[AVL Array](http://sourceforge.net/projects/avl-array)（在 Boost 中更名为“Rank List”）
4.  2012：[计数器树](http://dl.dropbox.com/u/8437476/works/countertree/doc/index.html)

它们被接受的主要困难是普遍认为它们不是好处，而是危险。今天的程序员习惯于用典型的容器来解决他们所知道的所有问题。有经验的程序员担心新手可能会盲目地将建议的容器用于所有内容，而不是仔细选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-24T13:56:23.707

尽管我同意在 C++ 中没有完全内置的方法来执行此操作，但有一个很好的解决方法：使用段树。让段树表示遇到的每个元素的频率。插入元素基本上是将计数更新 1，而查询只是从索引`0`到的段求和操作`element - 1`。这两个都可以在`O(logn)`. 我知道缺点是您需要知道可以存在的元素数量，但在许多实际问题中，一个好的上限就足够了。*

# python - 渲染图像与大小无关？

> ID：14692367
> 
> 赞同：0
> 
> 时间：2013-02-04T17:45:32.457
> 
> 标签：python, pygame

我目前正在使用 pygame 开发一个小游戏。

现在我以标准方式渲染图像，通过加载它们然后将它们blitting到我的主表面。如果我想使用单个图像大小，这很棒。然而，我想接收任何 NxN 图像并以 MxM 分辨率使用它。有没有一种不使用 surfarray 和 numeric 的技术？pygame中已经存在的东西？如果不是，您认为计算它会很昂贵吗？

我想拉伸图像。因此，放大或缩小图像。对不起，我没有更清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:47:43.400

没有单一的命令可以做到这一点。您首先必须使用 更改大小`pygame.transform.scale`，然后制作一个相同大小的矩形，并设置其位置，最后是 blit。在定义中这样做可能是最明智的。

# deployment - 在 VS2012 中发布期间不能再忽略证书错误

> ID：14692368
> 
> 赞同：4
> 
> 时间：2013-02-04T17:45:34.500
> 
> 标签：deployment, visual-studio-2012, ssl-certificate, msdeploy

我一直在使用 Visual Studio 中的 MSDeploy 发布服务来发布我的项目。发布 URL 是[https://machinename.domain.com:8172/MsDeploy.axd](https://machinename.domain.com:8172/MsDeploy.axd)。它在 VS2010 中运行良好——我能够选中一个表示忽略证书错误的复选框。VS 2012 中不再显示该框。我发现一个帖子表明我应该收到有关是否忽略证书错误的提示 - 但我没有，我不能再发布我的项目。有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-05T00:38:04.343

打开您的发布配置文件并在元素`/Properties/PublishProfiles/<Profile>.pubxml`中添加以下行：`PropertyGroup`

```
<AllowUntrustedCertificate>True</AllowUntrustedCertificate> 
```

# c# - 如何启动一个新进程并等到它完成？

> ID：14692372
> 
> 赞同：14
> 
> 时间：2013-02-04T17:45:44.543
> 
> 标签：c#, process.start

我想用 C# 启动一个程序（可以使用`Process.Start()`）。然后我的程序应该等到启动的程序关闭，然后再继续。
我该怎么做呢？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-04T17:47:00.003

调用后`Start()`添加：[`Process.WaitForExit()`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.waitforexit.aspx)

```
 var myProcess = new Process {StartInfo = new ProcessStartInfo(processPath)};
 myProcess.Start().WaitForExit(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T17:50:36.933

有两种机制。您可以挂钩 Process.Exited 事件，或者您可能真正想要的是调用 Process.WaitForExit()。

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.exited.aspx)

[http://msdn.microsoft.com/en-us/library/system.diagnostics.process.waitforexit.aspx](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.waitforexit.aspx)

# c# - 从 SQL 中的一列创建类别列名

> ID：14692373
> 
> 赞同：0
> 
> 时间：2013-02-04T17:45:45.923
> 
> 标签：c#, sql, oracle11g

我有看起来像这样的 oracle 表：

```
ID---Date------------Type
1  |  01/01/2013  | Install Date 
1  |  05/01/2013  | Complete Date 
1  |  10/01/2013  | Closed Date
2  |  02/01/2013  | Install Date
2  |  03/02/2013  | Closed Date
3  |  10/01/2013  | Install Date
3  |  13/01/2013  | Closed Date
4  |  07/01/2013  | Install Date
4  |  09/01/2013  | Complete Date
4  |  17/01/2013  | Closed Date 
```

我想要实现的是查询它以获得这样的结果：

```
ID--InstallDate--CompleteDate--ClosedDate------
1 | 01/01/2013 | 05/01/2013 | 10/01/2013 
2 | 02/01/2013 | --null-----| 03/02/2013
3 | 10/01/2013 | --null-----| 13/01/2013
4 | 07/01/2013 | 09/01/2013 | 17/01/2013 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:51:23.660

这将做：

```
SELECT  ID,
        MAX(CASE WHEN Type = 'Install Date' THEN Date END) InstallDate,
        MAX(CASE WHEN Type = 'Complete Date' THEN Date END) CompleteDate,
        MAX(CASE WHEN Type = 'Closed Date' THEN Date END) ClosedDate
FROM OracleTable
GROUP BY ID
ORDER BY ID 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:53:46.697

这是一个相对标准的数据透视查询（尽管需要进行数据透视表明数据模型存在根本问题）。老式的方法是做类似的事情

```
SELECT id,
       MAX( CASE WHEN type = 'Install Date' THEN dt ELSE null END ) install_date,
       MAX( CASE WHEN type = 'Complete Date' THEN dt ELSE null END ) complete_date,
       MAX( CASE WHEN type = 'Closed Date' THEN dt ELSE null END ) closed_date
  FROM your_table_name
 GROUP BY id 
```

由于您使用的是 11g，因此您还可以使用`PIVOT`运算符

```
select *
  from (select id, dt, type 
          from your_table_name)
 pivot (max(dt) as dt FOR (type) in ('Install Date' as install, 
                                     'Complete Date' as complete, 
                                     'Closed Date' as closed)) 
```

# c# - System.Net.Mail.SmtpException：系统存储空间不足。服务器响应为：4.3.1 系统资源不足

> ID：14692376
> 
> 赞同：6
> 
> 时间：2013-02-04T17:45:52.353
> 
> 标签：c#, exchange-server, system.net.mail, smtpexception

我最近用 C# 设计了一个程序，该程序将从 SQL 数据库中提取信息，编写一个带有结果的 HTML 页面，然后自动通过电子邮件将其发送出去。我已经 [偶尔] 一切正常，我遇到的问题是我似乎正在崩溃我们公司的交换服务器。在程序的前几次成功运行后，我将开始收到此异常：

> 基本异常：System.Net.Mail.SmtpException：系统存储不足。服务器响应为：4.3.1 系统资源不足

我想知道我是否应该在我的邮件中调用某种类似 Dispose() 的方法？或者，如果有任何其他明显的原因会导致邮件系统停止响应？这会影响我们公司的所有客户，而不仅仅是我的代码。

这是 Exchange 2010，我的代码是针对 .NET 3.5 编译的。我的附件通常是 27kb。如果我登录到交换服务器，似乎消息只是无限期地留在队列中。清除队列（在不发送 NDR 的情况下删除）并重新启动服务器将使其再次运行。

邮件部分如下所示（用户名、密码和地址已更改）：

```
public void doFinalEmail()
{
     List<string> distList = new List<string>();
     string distListPath = Environment.CurrentDirectory + "\\DistList.txt";
     string aLine;

     logThat("Attempting email distribution of the generated report.");

     if (File.Exists(distListPath))
     {
         FileInfo distFile = new FileInfo(distListPath);
         StreamReader distReader = distFile.OpenText();

         while (!String.IsNullOrEmpty(aLine = distReader.ReadLine()))
         {
             distList.Add(aLine);
         }
     }
     else
     {
         logThat("[[ERROR]]: Distribution List DOES NOT EXIST! Path: " + distListPath);
     }

     MailMessage msg = new MailMessage();
     MailAddress fromAddress = new MailAddress("emailaddresshere");
     msg.From = fromAddress;

     logThat("Recipients: ");
     foreach (string anAddr in distList)
     {
         msg.To.Add(anAddr);
         logThat("\t" + anAddr);
     }
     if (File.Exists(Program.fullExportPath))
     {
         logThat("Attachment: " + Program.fullExportPath);
         Attachment mailAttachment = new Attachment(Program.fullExportPath);
         msg.Attachments.Add(mailAttachment);
         string subj = "Company: " + Program.yestFileName;
         msg.Subject = subj;
         msg.IsBodyHtml = true;
         msg.BodyEncoding = System.Text.Encoding.UTF8;
         sendMail(msg);
     }
     else
     {
         logThat("[[ERROR]]: ATTACHMENT DOES NOT EXIST! Path: " + Program.fullExportPath);
     }
 }

 public void sendMail(MailMessage msg)
 {
     try
     {
         string username = "user"; //domain user
         string password = "pass"; // password
         SmtpClient mClient = new SmtpClient();
         mClient.Host = "192.168.254.11";
         mClient.Credentials = new NetworkCredential(username, password);
         mClient.DeliveryMethod = SmtpDeliveryMethod.Network;
         mClient.Send(msg);
     }
     catch (Exception oops)
     {
         string whatHappened = String.Format("Company: \r\nFailure in {0}! \r\n\r\nError message: {1} \r\nError data: {2} \r\n\r\nStack trace: {3} \r\n\r\nBase exception: {4} \r\nOccuring in method: {5} with a type of {6}\r\n", oops.Source, oops.Message, oops.Data, oops.StackTrace, oops.GetBaseException(), oops.TargetSite, oops.GetType());
         logThat(whatHappened);
         Environment.Exit(1);
     }
 } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-04T18:04:29.077

在以下情况下可能会发生此错误：

1.  交换服务器的磁盘空间不足。
2.  收件人邮箱磁盘空间不足。

遇到问题 #2 比问题 #1 更常见。

以下是[Exchange 状态代码](http://technet.microsoft.com/en-us/library/bb232118.aspx)及其含义的列表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T18:10:45.263

要明确地缩小问题范围，您可以换一个不同的邮件客户端，例如 aspNetEmail（您可以获得一个 eval 版本来测试），它只需要几行代码。如果问题仍然存在，则在服务器上；如果没有，它在客户端上。我强烈怀疑这是服务器上的问题，但是，当客户端关闭连接并发送消息时，服务器实际上不应该因为该连接而持有任何资源。您可以通过查看 SMTP 日志并确保连接关闭时没有 SMTP 错误来验证这一点。

如果这确实是服务器上的问题（SMTP 日志显示完全断开连接，并且该问题可通过备用客户端复制），那么我将登录服务器（如果您可以访问），并按照 jeuton 的建议观察磁盘空间.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-07-14T15:16:06.793

作为交换，2007 的 c:（系统驱动器）需要大约 4GB 的可用磁盘空间。这是我们的问题。增加驱动器和邮件将再次流动。

# c - C 未检测到 EOF

> ID：14692383
> 
> 赞同：0
> 
> 时间：2013-02-04T17:46:08.340
> 
> 标签：c

我正在编写一个程序，该程序一次读取输入一个字符并确定它是十进制、八进制还是十六进制并将其转换为十进制以进行输出。那部分有效，问题是我`while((ch=getchar()) != EOF)`用来浏览文本，但 while 循环永远不会终止。听说EOF相当于-1，使用EOF的方法是control+z结束程序，但我希望它是自动的。我一直在使用标准输入以及为其提供 .txt 文本，并且程序不会终止的两种方式。我想知道是否有人可以查看我的代码并查看我哪里出错了。

（很长，对不起，我只是不知道这是否是我在案件中所做的事情）

```
int main (void) 
{
    int ch, chVal, decVal ;

    ch=getchar() ;

    while ((ch != EOF)) 
    {
        switch ( ch ) 
        {
            case ' ' :
                /* Just read until it’s not a space */
                while( ( ch == SPACE ) || ( ch== EOL ) ) 
                        ch=getchar();

            case '0' :
                /* integer, octal or hex possibilities */
                ch=getchar() ;

                /**** HEX ****/

                if ( ( ch=='x' ) || ( ch=='X' ) ) 
                {
                    /* potential hex. So far we have read in 0x.  We need to see what's next. */                
                    ch=getchar() ;

                    if ( ch== SPACE ) 
                    {
                        /* all we had was 0x entered */
                        outputIllegalToken() ;
                        break ; /* we need to end every pass through the switch with a space char (space, eoln or eof) */
                    }

                    decVal=0 ;
                    while ( ( ( '0' <= ch ) && ( ch <= '9' ) ) || ( ( 'a' <= ch ) && ( ch <= 'f' ) ) || ( 'A' <= ch ) && ( ch <= 'F' ) ) 
                    {
                        chVal = DecToHex( ch ) ;
                        decVal*=16 ;
                        decVal+=chVal ;
                        ch=getchar() ;
                    }

                    /* ch is no longer a hex val. */
                    if ( ch == SPACE || ch == EOL || ch == EOF ) 
                    {
                        /* All is good. */
                        outputHex( decVal );
                    } 
                    else 
                    {
                        if ( ch=='l' || ch=='L' ) 
                        {
                            ch=getchar() ;
                            if (( ch== SPACE ) || ( ch== EOL ) || ( ch==EOF )) 
                            {
                                outputLongHex( decVal ) ;
                            } 
                            else 
                            {
                                outputIllegalToken() ;
                                while ( ch!= SPACE && ch!= EOL && ch!= EOF ) 
                                { 
                                        getchar();
                                }
                            }
                        } 
                        else 
                        {
                            outputIllegalToken() ;
                            ch = getchar() ;
                            while ( ( ch!= SPACE ) && ( ch!= EOL ) && ( ch!= EOF ) ) 
                            { 
                                ch=getchar(); 
                            }
                        }
                    }
                    printf("do we come here? \n");
                    count++;
                     break;
                    /* end of the 0x scenario  ch is  a space char */
                }

               /****** 0 *******/

                if ( ch==' ' ) 
                {
                    /* just a 0 */
                    outputDecimal(0);
                    count++;
                    break ; /* end of 0 alone scenario. ch is a space */
                }

                /***** 0L ******/

                if ( ch=='l' || ch=='L' ) {
                    /* if there is space after the l, it's ok. otherwise illegal. */
                    ch=getchar() ;
                    if ( ( ch== SPACE ) || ( ch== EOL ) || (ch==EOF ) ) 
                    {
                        outputLongDecimal(0);
                    } 
                    else 
                    {
                        outputIllegalToken() ;
                        /* read to the next space */
                        ch=getchar() ;
                        while ( ( ch!= SPACE ) && ( ch!= EOL ) & ( ch!=EOF ) ) 
                                { 
                                ch=getchar(); 
                                }
                    }
                    count++;
                    break ;  /* end of 0L scenario.  ch is a space char. */
                }

                /**** Octal ****/

                if ( ( '0'<=ch )&&( ch<='7' ) ) 
                {
                    /* potentially octal  */
                    chVal=DecToHex( ch ) ;
                    decVal=chVal ;
                    ch=getchar() ;
                    while ( ( '0'<=ch )&&( ch<='7' ) ) 
                    {
                        decVal*=8 ;
                        decVal+=DecToHex( ch ) ;
                        ch=getchar() ;
                    }
                    /* no longer octal ch */
                    if ( ch== SPACE || ch== EOL || ch==EOF ) 
                    {
                        outputOctal( decVal ) ;

                    } 
                   else 
                    {
                        if ( ch=='l' || ch=='L' ) 
                        {
                            ch=getchar() ;
                            if (( ch== SPACE ) || ( ch== EOL ) || ( ch==EOF )) 
                            {
                                outputLongOctal(decVal) ;
                            } 
                            else 
                            {
                                outputIllegalToken() ;
                                while ( ch!= SPACE && ch!= EOL && ch!=EOF ) 
                                { 
                                        getchar();
                                }
                            }
                        } 
                        else 
                        {
                            outputIllegalToken() ;
                            ch = getchar() ;
                            while ( ( ch!= SPACE ) && ( ch!= EOL ) && ( ch!=EOF ) ) 
                            { 
                                ch=getchar(); 
                            }
                        }
                    count++;
                    break;/* end octal scenario  ch is a space character. */
                }

                count++;
                break ;

            case '1':
            case '2':
            case '3':
            case '4':
            case '5':
            case '6':
            case '7':
            case '8':
            case '9':
                /* potential decimal input */

                chVal=DecToHex( ch ) ;  /* convert the character to a number */
                decVal=chVal ;          /* keep track of the overall number */

                ch=getchar() ;
                while ( ( '0'<=ch ) && ( ch<='9' ) ) 
                {
                    chVal=DecToHex( ch ) ;
                    decVal*=10 ;
                    decVal+=chVal ;
                    ch=getchar() ;
                }

                /* integers have ended.  spaces or l is acceptable. everything else is illegal */
                if ( ( ch== SPACE ) || ( ch== EOL ) || ( ch==EOF )) 
                {
                    outputDecimal( decVal ) ;
                } 
                else if ( ( ch=='l' ) || ( ch=='L' ) ) 
                {
                    /* next char needs to be space in order to be a valid long integer */
                    ch==getchar() ;
                    if ( ( ch== SPACE ) || ( ch== EOL ) || ( ch==EOF ) ) 
                    {
                        outputLongDecimal( decVal ) ;
                    } 
                    else 
                    {
                        outputIllegalToken() ;
                        while ( ( ch!= SPACE) && ( ch!= EOL ) && ( ch!=EOF ) ) 
                        {
                            ch=getchar();
                        }
                    }
                }
                count++;
                break;
        }
    }
}

return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:14:28.770

这是一个词法分析器。[如果您使用flex/lex](http://westes.github.io/flex/manual/)，它将是一个更容易编写和维护的程序，而不是重建这个复杂的轮子。这是一个灵活的十六进制转换器，八进制从零开始，以及其他所有内容的传递：

```
%{

%}
%option 8bit outfile="scanner.c"
%option nounput nomain noyywrap
%option warn

%%

0x[0-9]+ { fprinf(yyout, "%d", yytext); /* hex conversion */ }
0[0-9]+  { fprintf(yyout, "%d", yytext); /* octal conversion */ }
.|\n { ECHO; /* print everything else out unmodified */ }

%%
int main(int argc, char **argv);

int main (argc,argv)
int argc;
char **argv;
{
yylex();
return 0;
} 
```

只需编译：

```
flex -Cf scanner.l 
gcc -O -o wordConverter scanner.c 
```

它接受标准输入上的输入并输出直到 EOF。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:01:19.537

这个：

```
 while( ( ch == SPACE ) || ( ch== EOL ) ) 
                    ch=getchar(); 
```

如果输入中的最后一个字符是空格，将导致无限循环。我认为您的意思是 simple `( ch == SPACE )`，但是用 just 替换整个语句`break;`也可以。

可能还有其他错误...

# c#-4.0 - 泛型和匿名类型

> ID：14692389
> 
> 赞同：0
> 
> 时间：2013-02-04T17:46:21.757
> 
> 标签：c#-4.0, generics, anonymous-types

我有一个功能，

```
public static IPagedResponse<T> GetPagedResponse<T, TAnon>(
        this IQueryable<TAnon> query, 
        QueryableRequestMessage request)
    where T : class
{
    //...
} 
```

我正在尝试将查询作为`IQueryable`匿名类型传递。

```
var query = _repository.All.Select(
    i => new //anon type
        {
            i.Id,
            i.Name,
        }
    );

var result = query.GetPagedResponse<EftInterfaceDto, ??????>(request); 
```

问题是我不知道用什么代替`??????`？它似乎无法推断出来。任何使用`.GetType()`或`typeof()`我尝试过的组合都失败了。

我尝试将函数更改为，`IQueryable<dynamic>`但这导致了其他错误，即表达式树中不允许动态。

**哈克：**

如果我将功能更改为此，我可以使它工作：

```
public static IPagedResponse<T> GetPagedResponse<T, TAnon>(
        this IQueryable<TAnon> query, 
        QueryableRequestMessage request,
        T typeSample)
    where T : class
{
    //...
} 
```

然后传入一个实例`T`

```
var result = query.GetPagedResponse(request, new SomeClassOfT()); 
```

这样，我可以使用类型推断来确定匿名类型`TAnon`，并且在调用泛型时不需要显式（`<types>`不需要）。

但是，我不想这样做，因为显然不清楚我在做什么。

# python - 积极的后视与非捕获组：不同的行为

> ID：14692395
> 
> 赞同：5
> 
> 时间：2013-02-04T17:46:33.270
> 
> 标签：python, regex, lookbehind, capturing-group

我在代码中使用了 python 正则表达式（`re`模块），并注意到这些情况下的不同行为：

```
re.findall(r'\s*(?:[a-z]\))?[^.)]+', 'a) xyz. b) abc.') # non-capturing group
# results in ['a) xyz', ' b) abc'] 
```

和

```
re.findall(r'\s*(?<=[a-z]\))?[^.)]+', 'a) xyz. b) abc.') # lookbehind
# results in ['a', ' xyz', ' b', ' abc'] 
```

我需要得到的只是`['xyz', 'abc']`. 为什么这些示例的行为不同以及如何获得所需的结果？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T17:53:04.860

包含在**第二种情况下**的原因是因为 会首先找到`a`并且由于环视不消耗任何字符，因此您**回到**了字符串的开头。现在匹配`b`**`(?<=[a-z]\))``a)`**`[^.)]+``a`****

 ****现在你在`)`。因为你已经进行了`(?<=[a-z]\))`可选的`[^.)]+`匹配`xyz`

重复同样的事情`b) abc`

从第二种情况中删除`?`，你会得到预期的结果，即`['xyz', 'abc']`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-10T13:49:09.553

您正在寻找的正则表达式是：

```
re.findall(r'(?<=[a-z]\) )[^) .]+', 'a) xyz. b) abc.') 
```

我相信 Anirudha 目前接受的答案解释了您使用正向后视和非捕获井之间的区别，但是，在`?`正向后视后删除的建议实际上会导致`[' xyz', ' abc']`（注意包含的空格）。

这是由于不匹配`space`字符以及不包括`space`在主要匹配字符类本身中的积极后视。****

# javascript - 如何在 AJAX 内容加载后重新附加 jQuery 函数？

> ID：14692396
> 
> 赞同：1
> 
> 时间：2013-02-04T17:46:46.647
> 
> 标签：javascript, jquery, ajax, jquery-ui

我以这种方式调用了一些 jQuery UI 函数：

```
jQuery(document).ready(function(){
    jQuery(".accordion").accordion();
}); 
```

但是我的页面是基于 AJAX 的，有些页面可能使用手风琴，有些可能不使用它。有 30 多个其他功能需要重新附加，这是一个有问题的开发任务。有什么聪明的方法可以解决这个问题，以便每个新`.accordion`的都自动附加它吗？

可能的解决方案以及为什么它们不起作用：

*   在 AJAX 调用完成时触发文档就绪是理想的，但这是不可能的
*   拥有`load()`不是一个选项，因为它是一个 CMS，用户可以在其中安装插件 - 这意味着插件添加的未知功能数量未知`jQuery(document).ready();`
*   重新附加功能`ajaxComplete`- 对于未知数量的未知功能，每次安装或卸载 jQuery 插件时，如果不修改 AJAX 脚本，这将无法工作

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:48:06.120

您可以使用该`DOMNodeInserted`事件并检查手风琴类。

```
document.addEventListener('DOMNodeInserted', function(e) {
    var el = $(e.target);
    if(el.hasClass('accordion')) {
        el.accordion();
    }
}); 
```

DOMNodeInserted 的使用示例：http: [//jsfiddle.net/qErHs/](http://jsfiddle.net/qErHs/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T17:53:51.253

我对 jQuery 小部件有类似的问题。我所做的是使用 ajaxComplete 方法来附加小部件。

```
$(document).ajaxComplete(function()
    {
        $(".accordion").accordion();
    }); 
```

这样，每次 AJAX 方法完成时都会调用该函数，并将手风琴附加到手风琴类的任何新元素上

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T18:11:14.727

[http://api.jquery.com/on/](http://api.jquery.com/on/)

“委托事件的优势在于，它们可以处理来自后代元素的事件，这些事件会在以后添加到文档中。”

```
jQuery(document).on("change", ".accordion", function() {
  jQuery(".accordion").accordion();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T17:51:19.527

您可以检查“.accordeon”的长度。只需创建一个函数...

```
function init_accordeon(){
    if($('.accordeon').length) {
        $(".accordon").accordeon();
    }
} 
```

而不是在你的 ajax_calls 之后调用这个函数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-06T17:17:18.083

您可以在 ajax 调用后触发自定义事件。

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>on demo</title>
  <style>
  p {
    color: red;
  }
  span {
    color: blue;
  }
  </style>
  <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
</head>
<body>

<p>Has an attached custom event.</p>
<button>Trigger custom event</button>
<span style="display:none;"></span>

<script>
$( "p" ).on( "myCustomEvent", function( event, myName ) {
  $( this ).text( myName + ", hi there!" );
  $( "span" )
    .stop()
    .css( "opacity", 1 )
    .text( "myName = " + myName )
    .fadeIn( 30 )
    .fadeOut( 1000 );
});
$( "button" ).click(function () {
  $( "p" ).trigger( "myCustomEvent", [ "John" ] );
});
</script>

</body>
</html> 
```

# google-apps-script - 谷歌电子表格脚本中的停止条件

> ID：14692403
> 
> 赞同：1
> 
> 时间：2013-02-04T17:47:06.977
> 
> 标签：google-apps-script, google-sheets

我有这段代码可以创建一个包含电子表格信息的列表框：

```
function Selectbox(NameBox ,Row ,ID ,NameSheet ,NameCol) {
  var sheet = SpreadsheetApp.openById(ID).getSheetByName(NameSheet);
  var lastRow = sheet.getLastRow();
  var app = UiApp.getActiveApplication();
  var ListBox = app.createListBox().setWidth(125).setName(NameBox);
  var ind = getColIndexByNamelink(NameCol, sheet);
  ListBox.setVisibleItemCount(1);
  for (var i = 2; i < lastRow + 1; i++) {
    var Item = sheet.getRange(i, (ind * 1)).getValue();
    if (Item == ' ')
      break;
    else
    ListBox.addItem(Item);
  }
  var grid = app.getElementById('grid');
  grid.setWidget(Row, 1, ListBox);
  return app;
} 
```

在与'if（item ==''）'一致时，当电子表格中的单元格为空时，我应该使用什么标准来停止此循环？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:32:59.403

我倾向于使用我的库的以下函数来检查变量（字符串）是否不为空（如果这是你的意思）。

```
 function isNotEmpty(string) 
{

    if(!string)             return false;         
    if(string == '')        return false;
    if(string === false)    return false; 
    if(string === null)     return false; 
    if(string == undefined) return false;
    string = string+' '; // check for a bunch of whitespace
    if('' == (string.replace(/^\s\s*/, '').replace(/\s\s*$/, ''))) return false;       
    return true;        
} 
```

# analysis - 潜在语义分析 (LSA) 单值分解 (SVD) 理解

> ID：14692407
> 
> 赞同：1
> 
> 时间：2013-02-04T17:47:25.173
> 
> 标签：analysis, svd, latent-semantic-indexing, latent-semantic-analysis

通过我对 LSI（机械工程背景）的适度理解，请耐心等待：

在 LSI 中执行 SVD 后，您有 3 个矩阵：

U、S 和 V 转置。

U 将单词与主题进行比较，S 是每个特征强度的一种度量。Vt 将主题与文档进行比较。

```
 U dot S dot Vt 
```

返回 SVD 之前的原始矩阵。如果不做太多（无）深入的代数，似乎：

```
 U dot S dot **Ut** 
```

返回逐项矩阵，该矩阵提供项之间的比较。即一个术语与其他术语的相关程度，一种比较单词而不是组件的DSM（设计结构矩阵）。我可能完全错了，但我在样本数据集上进行了尝试，结果似乎很有意义。但这可能只是偏见（我希望它起作用，所以我看到了我想要的）。由于文档受到保护，我无法发布结果。

不过我的问题是：这有意义吗？逻辑上？数学上？

感谢您的任何时间/回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T11:27:54.687

如果您想知道一个术语与另一个术语的相关程度，您可以计算

> > > (U 点 S)

这些术语由行向量表示。然后，您可以通过应用距离函数（例如欧几里德距离）来计算距离矩阵。一旦通过计算所有向量之间的距离来制作距离矩阵，结果矩阵应该是空心对称的，所有距离 > 0。如果距离 A[i,j] 很小，那么它们是相关的，否则它们不相关。

# java - Java：简单循环

> ID：14692410
> 
> 赞同：0
> 
> 时间：2013-02-04T17:47:38.193
> 
> 标签：java, loops

这是一个没有任何循环的简单版本。我怎样才能让它像“密码错误。再试一次”一样循环。直到用户输入正确的密码而不是停止程序（或在程序停止之前给他们 3 次机会）？

```
 import java.util.Scanner;
public class helloworld2
{
    public static void main(String[] arg)
    {
        Scanner q = new Scanner(System.in);
        long Pass;
        boolean auth = true;

        System.out.println("Enter Password :");
        Pass = q.nextLong();

        if ( Pass != 1234 )
           {
           System.out.println("Wrong Password!");
           auth = false;
           }
        else
           {
           System.out.println("Password Confirmed.");
           auth = true;
           }

        if (auth) {
            ////blablabla
            }

        else
          {
            return;
          }                 
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:50:38.293

```
public class helloworld2
{
    public static void main(String[] arg)
    {
        Scanner q = new Scanner(System.in);
        long Pass;
        boolean auth = true;
        boolean rightPassword = false;
        while(!rightPassword){//repeat until passwort is correct
          System.out.println("Enter Password :");
          Pass = q.nextLong();

          if ( Pass != 1234 )
          {
            System.out.println("Wrong Password!");
            auth = false;
          }
          else
          {
            rightPassword = true;//let the loop finish
            System.out.println("Password Confirmed.");
            auth = true;
          }
        }
        // Here do what you want to do
        //because here the user has entered a right password                 
    }
} 
```

# html - 缩放页面时出现对齐问题

> ID：14692411
> 
> 赞同：0
> 
> 时间：2013-02-04T17:47:43.810
> 
> 标签：html, css

请查看代码其工作正常，直到我缩放页面...缩放页面后，页面被扭曲，其水平菜单相互碰撞请查看代码，如果有人能告诉我“不该做什么”而不是提供正确的，那就太好了CSS 部分为此我是新手，想学习方面而不是从各种来源复制这里是 CSS 部分..

```
body{ background-color:#603}
div#hor ul{ position:relative; left:16%; }
 div#hor li,div#ver li{  float:left;list-style-type:none; background-color:#603; border-radius:22px; margin:5px; }
div#hor a,div#ver a{text-decoration:none; 
 padding-left:32px; padding-right:32px;
 font-family:"Comic Sans MS", cursive; 
 line-height::100px;padding-right: 32px;
 padding-left: 32px;
 display: block;
 line-height: 40px;
 color:#fff;
}
div#hor a:hover{background-color:#fff;color: #603;border-radius:22px; 
    }
    div#hor a:focus{background-color:#fff;color:#603;border-radius:22px; font-weight:bold;
    }
    div#ver{  position:relative; top:100px;}
    div#ver ul{ position:relative; left:-50%; float:left;  }
    div#ver li{ float:none; margin-bottom:20px;}

    div#ver a:hover,div#ver a:focus{border-radius:22px;background-color:#fff;color: #603}

    div#ver a:focus{ font-weight:bold; }

  # here is the html part ...#

  <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Untitled Document</title>

    <link rel="stylesheet" type="text/css" href="mystyle.css"  />

    </head>

    <body>
    <div id="hor">
    <ul>
    <li ><a href="#">Home</a></li>
    <li><a href="#">Products</a></li>
    <li><a href="#">Services</a></li>
    <li><a href="#">About</a></li>
    <li><a  href="#">Contact</a></li>
    </ul>
    </div>
    <div id="ver"> 
    <ul>
    <li ><a href="#">Java</a></li>
    <li><a href="#">Php</a></li>
    <li><a href="#">Asp.net</a></li>
    <li><a href="#">Android</a></li>
    <li><a  href="#">Iphone</a></li>
    </ul>

     </div>

    </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:00:09.950

您的所有`div`设置都在 中`px`，这意味着像素。例如，如果用户使文本变大，则像素不会缩放，因为他们屏幕上的像素仍然是相同的大小。如果您调整 div 的大小`em`，表示“当前字体中字母 m 的宽度”，或者`%`事情应该可以更好地缩放。此外，一旦您习惯了使用 CSS，请尝试使用[Twitter bootstrap](http://twitter.github.com/bootstrap/)等框架来让您的生活更轻松。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:16:31.933

检查这个 CSS 和 HTML 并用现有的替换它，请告诉我

```
 body
    {
background-color:#603;  
}
.page
{
width:960px;
margin:0px auto 0px auto;
}
.clear
{
clear:both;
}
div#hor
{

}
div#hor ul
{ 
list-style-type:none;
 }
div#ver
{
float:left;
}
 div#hor li
{  
float:left;
background-color:#603; 
border-radius:22px; 
}

div#ver
{

}
div#ver li
{
list-style-type:none; 
background-color:#603; 
border-radius:22px; 
margin:5px; 
}
div#hor a,div#ver a
{
text-decoration:none; 
 padding-left:32px;
 padding-right:32px;
 font-family:"Comic Sans MS", cursive; 
 line-height:100px;
display: block;
 line-height: 40px;
 color:#fff;
}
div#hor a:hover
{
background-color:#fff;color: #603;border-radius:22px; 
}
div#hor a:focus
{
background-color:#fff;color:#603;border-radius:22px; font-weight:bold;
}
div#ver
{
//position:relative; top:100px;
}
div#ver ul
{ 
position:relative;float:left;  
}
div#ver li
{
//float:none; margin-bottom:20px;
}

div#ver a:hover,div#ver a:focus
{
border-radius:22px;background-color:#fff;color: #603
}

div#ver a:focus
{
 font-weight:bold; 
} 
```

//HTML部分//

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<link rel="stylesheet" type="text/css" href="mystyle.css"  />

</head>

<body>
<div class="page">
<div id="hor">
<ul>
<li ><a href="#">Home</a></li>
<li><a href="#">Products</a></li>
<li><a href="#">Services</a></li>
<li><a href="#">About</a></li>
<li><a  href="#">Contact</a></li>
</ul>
</div>

<div class="clear"></div>

<div id="ver"> 
<ul>
<li ><a href="#">Java</a></li>
<li><a href="#">Php</a></li>
<li><a href="#">Asp.net</a></li>
<li><a href="#">Android</a></li>
<li><a  href="#">Iphone</a></li>
</ul>

 </div>

</div>

</body>
</html> 
```

# jquery - 对象选择器 jquery 验证引擎

> ID：14692413
> 
> 赞同：0
> 
> 时间：2013-02-04T17:47:44.910
> 
> 标签：jquery, jquery-validation-engine

我正在使用验证引擎的`onBeforeAjaxFormValidation(form, options)`.

我想采用表格并在没有以下内容的情况下这样做`id`：

```
$("#contactfor :input").attr("disabled", true); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:55:53.563

If`#contactfor`与`id`您使用 jQuery 验证引擎的表单相同。然后，您应该能够执行以下操作：

```
form.find(":input").prop("disabled", true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:04:29.303

尝试这个

```
$('#form1').find("INPUT").attr('disabled',true); 
```

# objective-c - 标记堆显示我有一个永久保留（启用了 ARC）。怎么修？

> ID：14692417
> 
> 赞同：0
> 
> 时间：2013-02-04T17:47:58.367
> 
> 标签：objective-c, cocoa-touch, debugging, memory-management, instruments

我登录到应用程序，然后退出，再做一个标记（冲洗并重复）。如您所见，我的登录视图在每次实例化时都会保留。找出保持保留计数的罪魁祸首的最佳/最简单方法是什么？我只是想在代码中找到东西，而且花费的时间比预期的要长..

背景信息：启用 ARC 编译的 xcode 4.6 这是唯一存在保留问题的“视图”（我已经修复了所有其他问题）

![快照](../Images/86eeabbb0a5bd51bedad9948d6e5315b.png)

****编辑****

`LoginView`实例化为：

```
- (id)initWithCoder:(NSCoder *)coder
{
    self = [super initWithCoder:coder];
    if (self) {
        [super trackPageViewFor:@"/login"];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleKeyboardWillShow:) name:UIKeyboardWillShowNotification object:nil];
        [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(handleContentChange:) name:CONTENT_CHANGE object:nil];
    }
    return self;
}
- (void)removeFromSuperview
{
    [[NSNotificationCenter defaultCenter] removeObserver:self];

    [super removeFromSuperview];
} 
```

当加载下一个视图时，我只是让前一个视图内存不足（在 ARC 的帮助下）

****编辑**对象列表 **

![循环和根源](../Images/d165ce14edcfbe37099a199967d6da68.png)

# c++ - 为什么 reinterpret_cast 不将 'unsigned char' 转换为 'char'？

> ID：14692418
> 
> 赞同：4
> 
> 时间：2013-02-04T17:47:58.547
> 
> 标签：c++, unix, visual-studio-2010

我正在尝试使用 MSVC10 编译[这个](http://www.nongnu.org/libann/index.html)库，这个函数让我很头疼：

```
/*! \brief Read bytes from a \c std::istream
    \param is The stream to be read.
    \param data A pointer to a location to store the bytes.
    \param size The number of bytes to be read.
*/
void _read(std::istream &is, unsigned char *data, int size)
{
    for (int i=0; i < size ; ++i )
      is.get(static_cast<char>(data[i]));
} 
```

> 错误 C2664: 'std::basic_istream<_Elem,_Traits> &std::basic_istream<_Elem,_Traits>::get(_Elem &)' : 无法将参数 1 从 'char' 转换为 'char &'

原来使用了static_cast，所以我按照其他地方的建议尝试使用reinterpret_cast，但这也失败了：

> 错误 C2440：“reinterpret_cast”：无法从“unsigned char”转换为“char”

这个库带有 unix makefile。解决此编译错误的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-04T17:53:40.323

因为`reinterpret_cast`根据定义，不是那样工作的。

为了执行内存重新解释，您必须应用`reinterpret_cast`到指针或引用。如果您想将数据重新解释`unsigned char`为`char`数据，您实际上必须转换为`char &`类型，而不是`char`类型。

在你的情况下，那将是

```
is.get(reinterpret_cast<char &>(data[i])); 
```

或者你可以去指针路线做

```
is.get(*reinterpret_cast<char *>(&data[i])); 
```

（这是同一件事）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T17:53:57.320

因为您需要一个`char&`引用，`char`但转换的结果是一个右值，因此不能绑定到引用。

你需要类似的东西：

```
is.get(reinterpret_cast<char&>(data[i])); 
```

~~但在这种特殊情况下，您可以/应该使用`static_cast<char&>`：~~

 ~~```
is.get(static_cast<char&>(data[i])); 
```~~  ~~* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T17:50:54.063

试试这个：

```
void _read(std::istream &is, unsigned char *data, int size)
{
    for (int i=0; i < size ; ++i )
      is.get(reinterpret_cast<char*>(data)[i]);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T17:59:18.913

除了应对铸造问题的其他答案：

为什么不直接使用一次`istream::read`读取字节？`size`这避免了您手工制作的 for 循环，并且应该更快。

```
void _read(std::istream &is, unsigned char *data, int size) {
    is.read(reinterpret_cast<char*>(data), size);
} 
```~~

# ios - 有没有办法控制在我的应用程序的 iOS 存储使用情况显示中显示的类别？

> ID：14692419
> 
> 赞同：6
> 
> 时间：2013-02-04T17:48:00.513
> 
> 标签：ios

大多数应用程序在“设置 > 常规 > 使用情况”中的显示仅显示“文档和数据”的数字和一个删除整个应用程序的按钮。

但是，该列表中的“音乐”条目显示了一个带有类别的 UI 和一个“编辑”按钮，可以选择删除一些数据而不是全部。

有没有办法为第三方应用程序获得类似的 UI？因为这样做很有用但并不常见，所以最好避免在应用程序本身中使用这个 UI。

# ant - Ant - 替换文件层次结构中的字符串

> ID：14692420
> 
> 赞同：0
> 
> 时间：2013-02-04T17:48:03.067
> 
> 标签：ant

我有以下文件层次结构

```
+ - A
    - a1.html
    - a2.html
+ - B
    + - C
       - c1.html
       - c2.html
    - b1.html
    - b2.html 
```

我想为`<base>`所有文件添加一个标签（使用`<replaceregexp>`或任何类似的东西），这样对于一层深的文件，它将是`href=".."`，对于两层深的文件`href="../.."`，依此类推。

在 Ant 中最快/最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T16:55:08.253

我最终使用了脚本语言。不幸的是，没有任务/映射器可以做到这一点。

# git - 不能推入 GIT，但要更新

> ID：14692425
> 
> 赞同：2
> 
> 时间：2013-02-04T17:48:15.590
> 
> 标签：git

谁能解释我的存储库的状态？我无法推送，因为我没有的服务器上有更改，但我无法变基，因为 git 告诉我没有新的更改。

```
$ git branch
* master

$ git push origin master
To git@github.com:asdf.git
 ! [rejected]        master -> master (non-fast-forward)
error: failed to push some refs to 'git@github.com:asdf.git'
hint: Updates were rejected because the tip of your current branch is behind
hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
hint: before pushing again.
hint: See the 'Note about fast-forwards' in 'git push --help' for details.

$ git fetch origin master
From github.com:knowitall/nlptools
 * branch            master     -> FETCH_HEAD

$ git rebase origin master
Already on 'master'
Your branch is ahead of 'origin/master' by 3 commits.
Current branch master is up to date.

$ git pull origin master 
```

它建议的合并是空的。

```
Merge branch 'master' of github.com:knowitall/nlptools

# Please enter a commit message to explain why this merge is necessary,
# especially if it merges an updated upstream into a topic branch.
# 
# Lines starting with '#' will be ignored, and an empty message aborts
# the commit. 
```

如果我创建一个分支，用 origin/master 重置，然后合并分支，我*仍然*无法推送。

```
$ git checkout -b backup
$ git checkout master
$ git fetch origin master
$ git reset origin/master --hard
$ git merge backup
$ git push origin master
 ! [rejected]        master -> master (non-fast-forward) 
```

现在，如果 I`reset`和`pull`，我会看到一个新的提交。为什么一开始没有`fetch origin master`找到这个新的提交？如何确保我的存储库表示来源是最新的？看来我需要成功拉动才能使源保持最新。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T18:24:23.223

问题似乎在于使用不当`git fetch`：`git fetch origin master`读取`master`为 refspec 并且行为不像常规获取。更具体地说，它只是`FETCH_HEAD`指向遥控器`master`。

当`fetch`在没有 refspec 的情况下使用时，它`+refs/heads/*:refs/remotes/origin/*`用作更新所有 refs 的默认值`origin/*`。

尝试`git fetch origin`或`git fetch`代替。

这是一个关于它的好文档以获取更多详细信息：[https ://git-scm.com/book/th/ch9-5.html](https://git-scm.com/book/th/ch9-5.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:23:07.397

当你完成时`checkout -b`，你完成了新的分支。因此，您已经重置并合并到备份中。试试这种方式：

```
$ git branch backup
$ git fetch origin master
$ git reset origin/master --hard
$ git merge backup
$ git push origin master 
```

如果您使用的是 Windows，请注意[`posh-git`](https://github.com/dahlbyk/posh-git)在命令行（使用 powershell）上获得状态的视觉反馈。

如果您使用的是 Mac 或 Linux，请`dot-files`查看 github 上的一些 repo 以获得类似的功能。

# c++ - 在阅读之前预填充 cin

> ID：14692429
> 
> 赞同：1
> 
> 时间：2013-02-04T17:48:33.277
> 
> 标签：c++, console

我正在用 C++ 编写一个程序（在 Borland C++ builder 6.0 中），它通过 cin 和 cout 读取和显示客户数据，并在数据库（sqlite）中存储和读取它。它使用控制台与用户进行交互。

我想要实现的是用户可以更新之前写入数据库的客户数据（例如姓名、地址等数据）

当用户要更新客户数据时，我想让他完成与创建客户时相同的步骤/数据，但是现在，用户想要输入或修改的数据已经预先填充（从数据库中读取） ) 并且已经显示在控制台上，即写入输入缓冲区 cin，就像用户输入的一样。然后，用户只需按 Enter 键即可转到下一步/数据并将数据保持原样。如果用户需要更改或更新数据，他需要更改从数据库中读取并显示的数据，但可以根据需要对其进行修改，然后将其写入/更新到数据库中。

我希望我的意思很清楚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:52:06.823

使用 cin/cout 无法做到这一点（微不足道 - 如果您付出足够的努力，几乎任何事情都可以完成，诀窍是知道何时努力以更好的方式做到这一点！）。你最好使用某种`text-mode UI library`，例如 ncurses 或类似的。

我已经编写了很多类似的代码，但我编写了自己的一组函数来管理光标位置、验证数据的输入、从列表中选择内容等。你可能需要做一些这样的事情。

我还建议您至少考虑使用更现代的编译器。

# css - 这个 CSS 中的什么导致了字体粗细的这种差异？

> ID：14692431
> 
> 赞同：0
> 
> 时间：2013-02-04T17:48:39.687
> 
> 标签：css, fonts

我有两段文字。一个是段落元素，另一个是提交按钮输入的文本。

![在此处输入图像描述](../Images/e7ee4f8d5c744065e8738faad75a7c48.png)

![在此处输入图像描述](../Images/863f5950ae25982c2a212ef5d6a67a19.png)

为什么按钮中的字体略粗？

![在此处输入图像描述](../Images/a4dd778c2911d2c3086369e8045a1944.png)

段落 CSS（取自 Chrome 开发者工具中的 Computed Style）

```
box-sizing: border-box;
color: rgb(255, 255, 255);
display: block;
float: left;
font-family: 'Din Text Pro Regular', Arial, Helvetica, sans-serif;
font-size: 16px;
font-style: normal;
font-weight: normal;
height: 24px;
line-height: 24px;
margin-bottom: 0px;
margin-left: 0px;
margin-right: 16px;
margin-top: 11.199999809265137px;
width: 119px; 
```

输入 CSS（取自 Chrome 开发者工具中的 Computed Style）

```
-webkit-appearance: none;
-webkit-border-image: none;
-webkit-box-align: center;
-webkit-box-shadow: rgba(0, 0, 0, 0.65098) 0px 1px 3px 0px, rgba(97, 232, 203, 0.701961) 0px 1px 0px 0px inset;
-webkit-rtl-ordering: logical;
-webkit-user-select: text;
-webkit-writing-mode: horizontal-tb;
background-color: rgb(192, 192, 192);
background-image: -webkit-linear-gradient(top, rgb(75, 208, 179), rgb(38, 174, 144));
border-bottom-color: rgb(255, 255, 255);
border-bottom-left-radius: 5px;
border-bottom-right-radius: 5px;
border-bottom-style: none;
border-bottom-width: 0px;
border-left-color: rgb(255, 255, 255);
border-left-style: none;
border-left-width: 0px;
border-right-color: rgb(255, 255, 255);
border-right-style: none;
border-right-width: 0px;
border-top-color: rgb(255, 255, 255);
border-top-left-radius: 5px;
border-top-right-radius: 5px;
border-top-style: none;
border-top-width: 0px;
box-shadow: rgba(0, 0, 0, 0.65098) 0px 1px 3px 0px, rgba(97, 232, 203, 0.701961) 0px 1px 0px 0px inset;
box-sizing: border-box;
color: rgb(255, 255, 255);
cursor: pointer;
display: inline-block;
font-family: 'Din Text Pro Regular', Arial, Helvetica, sans-serif;
font-size: 16px;
height: 41px;
letter-spacing: normal;
line-height: 16px;
margin-bottom: 0px;
margin-left: 10px;
margin-right: 0px;
margin-top: 0px;
padding-bottom: 10px;
padding-left: 20px;
padding-right: 20px;
padding-top: 11px;
text-align: center;
text-indent: 0px;
text-shadow: rgba(24, 97, 81, 0.34902) 0px 1px 0px;
text-transform: none;
vertical-align: baseline;
white-space: pre;
width: 159px;
word-spacing: 0px;
writing-mode: lr-tb; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-24T20:33:32.960

我能够把它放在我的 CSS 的顶部。至少到目前为止，它似乎起到了作用：

```
button {
-webkit-font-smoothing: antialiased;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T01:59:25.937

显然，Chrome 是某种错误，它会根据颜色的亮度显示更粗的字体。

更多信息在这里：[https ://code.google.com/p/chromium/issues/detail?id=163369](https://code.google.com/p/chromium/issues/detail?id=163369)

**编辑：找到更多相关信息并修复**

实际上，这是一个[已知的](https://code.google.com/p/chromium/issues/detail?id=163369 "已知") [错误](https://code.google.com/p/chromium/issues/detail?id=142584 "漏洞")：

我能够通过遵循[这篇文章](http://tanookilabs.com/your-fonts-look-bad-in-chrome-heres-the-fix/ "本文")来解决这个问题。

有点晚了，但它可能对某些人仍然有用。

# qt - Qt QTabWidget - 自动设置选项卡名称编号

> ID：14692433
> 
> 赞同：1
> 
> 时间：2013-02-04T17:48:42.923
> 
> 标签：qt, qtabwidget

我正在处理一个应用程序，但标签名称有问题。当我单击按钮（新）时，我想动态创建新选项卡。

使用此功能，我创建新文件：

```
bool MainWindow::toolbarNewFile()
{

    QWidget *page = new QWidget;

    QTextEdit *codeEditor = new QTextEdit;

    QGridLayout *layout = new QGridLayout;

    layout->addWidget(codeEditor);

    page->setLayout(layout);

    tab_widget->addTab(page,"File");

    return true;
} 
```

但是所有选项卡的名称都为“文件”

如何设置选项卡名称编号。当我像这样制作新标签时自动设置标签的编号。

**文件 1、文件 2、文件 3**

我尝试设置`counter i=0;`并`addTab(page,"File-"+ i++);`不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T17:51:53.630

您需要将整数转换为`QString`才能将其连接到`QString`. 更好的是，您可以使用[QString::arg](http://qt-project.org/doc/qt-4.8/qstring.html#arg)函数并非常容易地获得可读且可能更快的代码：

```
tab_widget->addTab(page, QString("File-%1").arg(i++)); 
```

类中的字段在哪里`i`初始化为 1。

# php - 在表中插入一行并增加之后的自动增量值

> ID：14692434
> 
> 赞同：1
> 
> 时间：2013-02-04T17:48:47.177
> 
> 标签：php, mysql, sql

我试图通过谷歌搜索找到正确的方法，但我没有发现任何有用的东西。

我想在 id 60 之前插入一行，并且`id`是一个自动递增的值。最后，我想让 的所有值都`id`增加 1，这样 . 的主键上就不会发生冲突`id`。

![当前数据库结构](../Images/047c3a54c2caa6c1eebd04e38cc35d0d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:52:24.563

试试这个：：

第1步：

```
update table set id=id+1 where id>=60 
```

第2步：

```
Insert into table(id, column1....) values (60,....) 
```

# html - 如何拉直相邻的div

> ID：14692438
> 
> 赞同：0
> 
> 时间：2013-02-04T17:49:05.510
> 
> 标签：html, css

将相邻的 div 拉直的最佳方法是什么？我已经尝试过了，但这一切似乎有点比例，我想要一种方法来保持每列彼此相邻（尽管可能发生任何变化）。

这是我的代码：http: [//jsfiddle.net/j3cY5/2/](http://jsfiddle.net/j3cY5/2/)

**更新：**似乎 jQuery datepicker 在示例中不起作用:-(

**HTML**

```
<div class="schedule_wrapper">
    <div class="schedule_item">
        <div style="background-color:#08011c; color: #FFF; padding: 5px;">Task</div>
        <div style="height: 20px; padding-top: 4px;">Item 1</div>
        <br>
        <div style="height: 20px; padding-top: 4px;">Item 2</div>
        <br>
        <div style="height: 20px; padding-top: 4px;">Item 3</div>
        <br>
        <div style="height: 20px; padding-top: 4px;">Item 4</div>
        <br>
        <div style="height: 20px; padding-top: 4px;">Item 5</div>
        <br>
    </div>
    <div class="schedule_item">
        <div style="background-color:#08011c; color: #FFF; padding: 5px;">Due Date</div>
        <div style="height: 17px; padding-top: 2px;">
            <input type="text" id="datepicker1" style="width: 100px;
                    height: 10px;" value="" class="hasDatepicker">
        </div>
        <br>

        <div style="height: 17px; padding-top: 2px;">
            <input type="text" id="datepicker2" style="width: 100px;
                    height: 10px;" value="" class="hasDatepicker">
        </div>
        <br>

        <div style="height: 17px; padding-top: 2px;">
            <input type="text" id="datepicker3" style="width: 100px;
                    height: 10px;" value="" class="hasDatepicker">
        </div>
        <br>

        <div style="height: 17px; padding-top: 2px;">
            <input type="text" id="datepicker4" style="width: 100px;
                    height: 10px;" value="" class="hasDatepicker">
        </div>
        <br>

        <div style="height: 17px; padding-top: 2px;">
            <input type="text" id="datepicker5" style="width: 100px;
                    height: 10px;" value="" class="hasDatepicker">
        </div>
        <br>
    </div>
    <div class="schedule_item">
        <div style="background-color:#08011c; color: #FFF; padding: 5px;">Status</div>
        <div>
            <select style="height: 30px; width: 100px;">
                <option></option>
                <option>----</option>
            </select>
        </div>
        <br>
        <div>
            <select style="height: 30px; width: 100px;">
                <option></option>
                <option>----</option>
            </select>
        </div>
        <br>
        <div>
            <select style="height: 30px; width: 100px;">
                <option></option>
                <option>----</option>
            </select>
        </div>
        <br>
        <div>
            <select style="height: 30px; width: 100px;">
                <option></option>
                <option>----</option>
            </select>
        </div>
        <br>
        <div>
            <select style="height: 30px; width: 100px;">
                <option></option>
                <option>----</option>
            </select>
        </div>
        <br>
    </div>
    <div class="schedule_item">
        <div style="color: #FFF; padding: 5px;">&nbsp;</div>
        <div>
            <input type="submit" id="update" value="Update" style="width: 100px;">
        </div>
        <br>
        <div>
            <input type="submit" id="update" value="Update" style="width: 100px;">
        </div>
        <br>
        <div>
            <input type="submit" id="update" value="Update" style="width: 100px;">
        </div>
        <br>
        <div>
            <input type="submit" id="update" value="Update" style="width: 100px;">
        </div>
        <br>
        <div>
            <input type="submit" id="update" value="Update" style="width: 100px;">
        </div>
        <br>
    </div>
</div> 
```

CSS

```
.schedule_wrapper {
    overflow:hidden;
    margin-bottom:10px;
}
.schedule_item {
    float:left;
    margin:2px;
}
body {
font-family: Verdana;
}
input[type="submit"] {
    background: #52A8E8;
    border: 0;
    border-bottom: 2px solid #4081AF;
    color: #fff;
    padding: 9px 21px;
    text-align: center;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    width: auto;
}
input[type="submit"]:hover, input[type="submit"]:active {
    cursor: pointer;
    background: #377AD0;
    border: 0;
    border-bottom: 2px solid transparent;
}
input[type="submit"] + a {
    margin-left: 22px;
} 
```

# php - 根据 MySql Query 返回的数据量生成页面

> ID：14692439
> 
> 赞同：0
> 
> 时间：2013-02-04T17:49:06.020
> 
> 标签：php, dynamic-pages

我为我的网站制作了一个评论部分，我想根据 MySQL 查询返回的数据量生成页面，比如 15 MySQL Rows pr 页面，我尝试查看 $_GET[pageID] 方法，但我根本不明白。

有人可以详细说明或给我一个建议吗？目前，我将 Sql 结果回显到reviews.php 页面上的一个div。

我目前拥有的是：

```
<?php
$con = mysql_connect("localhost", "cencor","cencor");
 if (!$con) {
    die('<br /><br />Could not connect: ' . mysql_error());
}

function feedbackList() {
mysql_select_db("cencor") or die(mysql_error());

$localIP = $_SERVER['REMOTE_ADDR']; // get IP

$rows = mysql_query("SELECT * FROM feedback WHERE approved=1 ORDER BY sorting DESC");

while ($row = mysql_fetch_array($rows)) {

        echo '
        <div id="reviews">
            <div id="date">'. $row['date'] . "</div> <div id='time'>" . $row['time'] .'</div>
            <h2>'. $row['name'] .'</h2>
            <br>
            <p>'. $row['feedback'] .'</p>
        </div>
        ';
        }
}       
?> 
```

时间和日期是在另一个脚本中设置的，所以不用担心，这段代码运行良好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:06:41.143

您可以在一条 SQL 语句中返回所有评论，然后使用 PHP 的数组块函数将它们拆分为多个数组。 [http://php.net/manual/en/function.array-chunk.php](http://php.net/manual/en/function.array-chunk.php) 然后您可以将页面上的每个数组存储为 JS 变量并使用 AJAX 或任何您拥有的。

您可以向此函数传递一个数组（所有评论）和一个数字（例如 15），它会输出许多可能的长度为 5 的数组。因此，在您的情况下，如果数组中有 150 条评论并且您想限制一页有 15 条评论，此函数将返回 10 个数组，每个数组包含 15 个元素。

然后，您只需获取每个评论数组并将其表示为一个页面。

或者，您可以在 SQL 中为每个页面使用 LIMIT。你会想要看起来像这样的东西：

```
LIMIT 0, 15
LIMIT 15, 15
LIMIT 30, 15 
```

... ETC

第一个数字是从哪个索引开始，第二个数字是要显示多少个结果。

因此，您可以执行 (15 * (pageNumber - 1)) 之类的操作来获取每页上的第一个数字（假设 pageNumber 从 1 开始）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:56:40.837

首先，获取表中所有行的计数：

```
SELECT COUNT(*) FROM feedback WHERE approved=1 
```

现在您知道您将拥有多少个页面，并且您可以显示每个页面的链接。

查询第一页：

```
SELECT * FROM feedback WHERE approved=1 ORDER BY sorting DESC LIMIT 0, 15 
```

这将为您提供表中的前 15 行。在接下来的页面中，您将使用：

```
LIMIT 15, 15
LIMIT 30, 15
LIMIT 45, 15 
```

等等。只需将第一个 LIMIT 参数替换为您想要的行的偏移​​量。第二个 LIMIT 参数是要返回的行数。

# encryption - 加密类型 symfony2

> ID：14692442
> 
> 赞同：0
> 
> 时间：2013-02-04T17:49:14.143
> 
> 标签：encryption, passwords

我有这个密码：cJU6fIvqSrHJq8ErBo0mU9fFjzPdSl/94iZyzX/VZ9RJ+GLm3PopuABNopq4UcqcMJTPOBu8KHadfcXl7DEE4Q==

我想知道使用的加密类型。我从一个用 symfony2 编码的脚本使用的数据库中获得了这个密码和 salt。

开发人员说他使用了 sha512 加密，但我认为使用了另一种编码方法。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T20:50:59.763

你是对的，还有进一步的编码，因为这可能是哈希输出的 base64 编码。将 base64 字符串解码为十六进制字符串是：

```
70953a7c8bea4ab1c9abc12b068d2653d7c58f33dd4a5ffde22672cd7fd567d449f862e6dcfa29b8004da29ab851ca9c3094cf381bbc28769d7dc5e5ec3104e1 
```

这很奇怪，因为它的长度为 128 字节/1024 位，而 sha512 的长度为 64 字节/512 位。可能是盐已附加到哈希或类似的东西上。将您的 sha512 散列与上面的十六进制字符串进行比较，看看它是否匹配其中的某些部分。

# maven - Maven/Spring：如何将外部 jar 添加到类路径而不将其安装为 Maven 依赖项？

> ID：14692443
> 
> 赞同：1
> 
> 时间：2013-02-04T17:49:15.323
> 
> 标签：maven

在 Maven 项目的类路径中包含外部非 maven jar 的常用方法是使用“addjar-maven-plugin”（我无法使用它来编译 maven）或“mvn install:install-file "，然后为外部 JAR 添加一个依赖部分。这种方法本质上是在您的 repo 中安装客户端 JAR，并使其在 maven 的类路径中可用。但是有没有更好的方法来做到这一点（或）上面提到的选项是唯一可用的选项吗？我只想将外部 JAR 添加到类路径以供 Spring 扫描组件，但不希望将 JAR 本身添加到我的存储库中，因为它是客户端的 JAR？我希望这是一个有效的案例（如果不是，请解释）
谢谢，
Paddy

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:19:10.793

您可以在项目的 src 文件夹下创建 lib 文件夹，并将此文件夹引用为 maven 存储库。

```
<repository>
  <id>local</id>
  <url>file://${basedir}/src/lib</url>
</repository> 
```

然后你应该在你的 pom.xml 中添加对你的 jar 的依赖

```
<dependency>
  <groupId>com.company</groupId>
  <artifactId>dependency</artifactId>
  <version>1.0</version>
</dependency> 
```

之后，您应该重命名 jar 文件并将其放在以下路径上`src/lib/com/company/dependency/1.0/dependency-1.0.jar`。此路径取决于您希望如何引用您的 jar。

# jquery - 在父框架和子 iframe 之间拖放元素

> ID：14692448
> 
> 赞同：13
> 
> 时间：2013-02-04T17:49:34.907
> 
> 标签：jquery, drag-and-drop, jquery-ui-sortable, jquery-ui-draggable, droppable

我正在尝试使用 jQuery 在父框架和 iframe 之间拖放元素。我在父框架中有一个面板，其中包含一些可拖放到子框架上的可拖动项目。我试图搜索很多，但找不到很多...

我试图通过在子框架内附加元素然后尝试以编程方式在新插入的元素上触发可拖动来解决它，但我也被困在那里。找不到触发拖动功能的正确方法。（可拖动元素有一个助手。当我通过触发“mousedown.draggable”触发拖动时，ui-draggable 元素上的位置会发生变化，但我看不到助手。

谢谢！！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2014-03-06T07:29:57.647

使用 HTML5 拖放 API 创建跨框架和跨浏览器实现。 [http://blog.stackhive.com/post/137799349684/building-a-seamless-drag-and-drop-interface](http://blog.stackhive.com/post/137799349684/building-a-seamless-drag-and-drop-interface)

编辑 - 上一个链接无效（dockPHP 更名为 StackHive），因此写了一篇更完整的帖子，可以帮助创建史诗般的拖放界面。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-04T17:58:27.870

AFAIK，如果 iframe 来自不同的域，这不能以“常见”方式实现（除非您同时控制两个 iframe），浏览器安全措施会阻止它，否则您可能会包装银行网站并窃取密码，例如，当您登录时在。

有关解决方法的一些信息：http: [//softwareas.com/cross-domain-communication-with-iframes](http://softwareas.com/cross-domain-communication-with-iframes)

如果您控制两个 iframe：

通过示例在 iframe 之间拖放：[http ://www.dhtmlx.com/docs/products/dhtmlxTree/samples/05_drag_n_drop/06_pro_drag_frame.html](http://www.dhtmlx.com/docs/products/dhtmlxTree/samples/05_drag_n_drop/06_pro_drag_frame.html)

跨浏览器 HTML5 拖放：[http ://www.useragentman.com/blog/2010/01/10/cross-browser-html5-drag-and-drop/](http://www.useragentman.com/blog/2010/01/10/cross-browser-html5-drag-and-drop/)

另一个示例：http: [//jqfaq.com/how-to-implement-drag-and-drop-between-iframes/](http://jqfaq.com/how-to-implement-drag-and-drop-between-iframes/)

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2019-01-04T02:08:07.657

不管框架的结构如何，总是可以使用[Robot 类](https://docs.oracle.com/javase/7/docs/api/java/awt/Robot.html)在框架上拖放元素。我提供了一个示例代码以防万一：

```
//Setting up chrome driver
WebDriverManager.getInstance(CHROME).setup();
WebDriver driver = new ChromeDriver();
driver.manage().window().maximize();

//Redirecting to the website
driver.get("https://codepen.io/rjsmer/full/vvewWp");

Robot robot = new Robot();
robot.mouseMove(x-coordinate1, y-coordinate1);
robot.mousePress(InputEvent.BUTTON1_DOWN_MASK);

Thread.sleep(2000);
robot.mouseMove(x-coordinate2, y-coordinate2);

Thread.sleep(2000);
robot.mouseRelease(InputEvent.BUTTON1_DOWN_MASK); 
```

# html - 加载 HTML 脚本的内容

> ID：14692451
> 
> 赞同：0
> 
> 时间：2013-02-04T17:49:44.000
> 
> 标签：html, caching, browser, web, src

大家好，大家好！

这行得通吗？还是有更好的选择？这可能不需要我们重做第二页...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:55:59.443

不要这样做。将有先见之明的加载留给浏览器。无论如何，将所有 CSS 和 Javascript 包含在一个文件中并将其加载到主页上，但您不需要 iframe。

像其他人一样进行适当的优化。研究如何[优化 CSS 和 JS 加载。](https://stackoverflow.com/questions/4090017/optimizing-javascript-and-css-requests)考虑[缩小你的 CSS](https://stackoverflow.com/questions/787789/any-recommendations-for-a-css-minifier)和 JS。使用[YSlow 之](http://yslow.org/)类的工具来查找页面交付中的瓶颈。

# php - 在 PHP 中选择没有类名的图像

> ID：14692453
> 
> 赞同：2
> 
> 时间：2013-02-04T17:49:49.663
> 
> 标签：php

我试图通过我的 DOMDocument 对象选择没有类的图像。

我有以下

```
 $imgParser=new DOMDocument;

@$imgParser->loadHTML($html);

  foreach($imgParser->getElementsByTagName('img') as $imgNode){
        //the code below will display images with and without class name
        echo $imgParser->saveHTML($imgNode);

        //I can't user javascript at this point...

        //I need to save the images without class into my DB...
        //save to DB codes..

      } 
```

有没有办法做到这一点？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T17:52:04.390

您可以使用[`DOMElement::hasAttribute()`](http://www.php.net/manual/en/domelement.hasattribute.php)来确定节点是否具有特定属性。

您可以将其放在循环体的顶部以跳过该节点：

```
if ($imgNode->hasAttribute('class')) {
    continue; // skip node if class attribute is present
} 
```

# c# - 如何让水晶报表在客户端电脑上找到数据库

> ID：14692456
> 
> 赞同：0
> 
> 时间：2013-02-04T17:50:00.747
> 
> 标签：c#, sql, crystal-reports

我的 C# 应用程序使用 Crystal Report 并且工作正常，但是当我的应用程序在客户端上工作时，除了 Crystal Report 之外的所有东西都可以工作，它说 Crystal Report 找不到数据库路径！！！我都准备好安装 Crystal Report 运行时包。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:13:34.607

数据源 .\SQLEXPRESS 正在查找本地 (.) 计算机上的数据库。例如，如果您将其更改为使用机器名称，它将起作用

```
Data Source=Servername\SQLEXPRESS 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-04T17:57:33.443

我删除了不起作用的报告（手动创建），然后使用水晶报告向导创建一个新的报告，解决了问题！

# ruby-on-rails - Rails 3.2.6：从生产服务器中删除所有数据和公共文件

> ID：14692459
> 
> 赞同：1
> 
> 时间：2013-02-04T17:50:09.560
> 
> 标签：ruby-on-rails, ruby, deployment, capistrano

我已经成功地从优秀的[Railscasts 剧集](http://railscasts.com/episodes/335-deploying-to-a-vps)中设置了一个 VPS 生产服务器（Ubuntu 10.04 LTS） 。它是一个“内部”服务器（尚未上线），所以我一直在本地构建我的应用程序并`cap deploy`定期执行以检查事情是否顺利运行。

然而，我现在想做的是删除生产服务器上的所有记录（因为我刚刚测试了一些东西）——也就是说，从一个完全空的数据库开始，以便网站真正向公众开放。

显然，我可以通过运行类似的东西在本地执行此`rake db:reset`操作，但是如何在生产服务器上执行此操作？我应该在我的`deploy.rb`文件中添加一些代码吗？

我对此有点菜鸟，但我无法通过谷歌搜索找到任何东西。

** 编辑 ** 哦，显然这是一次性的 - 一旦上线，我将删除任何删除记录的代码！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:53:26.623

您可以 ssh 进入服务器并`rake`从应用程序目录运行任何命令。你可以创建一个 Capistrano 任务来运行这个 rake 任务，但由于这个任务对于任何实际系统都非常危险，我不推荐它。您最不想做的就是意外运行它。

# c# - 将可见性属性绑定到变量

> ID：14692461
> 
> 赞同：30
> 
> 时间：2013-02-04T17:50:13.173
> 
> 标签：c#, wpf, xaml, border, visibility

我有一个`Border`with `Label`inside a `Window`，

```
<Border x:Name="Border1" BorderBrush="Black" BorderThickness="1" HorizontalAlignment="Left" Height="21" Margin="229,164,0,0" VerticalAlignment="Top" Width="90" Opacity="0.5">
    <Grid>
        <Label Content="test"/>
    </Grid>
</Border> 
```

我还有一个`Variable`：

```
public bool vis = false; 
```

如何将`vis`变量与边框`Visibility`属性绑定？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2016-05-20T17:42:14.673

你不需要做任何转换器。

为边框的 Visibility 属性添加绑定：

```
<Border x:Name="Border1" Visibility="{Binding Visibility}"    BorderBrush="Black" BorderThickness="1" HorizontalAlignment="Left" Height="21" Margin="229,164,0,0" VerticalAlignment="Top" Width="90" Opacity="0.5">
    <Grid>
        <Label Content="test"/>
    </Grid>
</Border> 
```

然后在您的 ViewModel 中创建 Visibility 属性：

```
private Visibility visibility;
public Visibility Visibility
    {
        get
        {
            return visibility;
        }
        set
        {
            visibility = value;

            OnPropertyChanged("Visibility");
        }
    } 
```

现在您可以将 Visible 或 Hidden 设置为 Visibility 属性，如下所示：

```
Visibility = Visibility.Visible;
// or
Visibility = Visibility.Hidden; 
```

Visibility 枚举位于 System.Windows 命名空间中，因此您的 ViewModel 必须包含`using System.Windows;`.

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-02-04T17:58:19.403

如果你已经在视图模型中有你的 bool 变量，你有两件事要做：

1.  使其成为一个属性，例如：

    `public bool vis { get; set; }`

然后，您需要为您的财产使用可见性转换器：

这里描述：

[http://social.msdn.microsoft.com/Forums/en/wpf/thread/3c0bef93-9daf-462f-b5da-b830cdee23d9](http://social.msdn.microsoft.com/Forums/en/wpf/thread/3c0bef93-9daf-462f-b5da-b830cdee23d9)

该示例假设您有一个视图模型并使用`Binding`

这是我从您的代码段中制作的一些演示代码：

视图模型：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.ComponentModel;

namespace StackOverflowWpf2
{
    public class BorderViewModel : INotifyPropertyChanged
    {
        private bool borderVisible = false;

        public bool BorderVisible 
        {
            get
            {
                return borderVisible;
            }

            set
            {
                borderVisible = value;
                NotifyPropertyChanged("BorderVisible");
            }
        }

        private void NotifyPropertyChanged(string info)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(info));
            }
        }

        public event PropertyChangedEventHandler PropertyChanged;
    }
} 
```

XAML：

```
<Window x:Class="StackOverflowWpf2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisConverter" />
    </Window.Resources>
    <Grid>
        <Border x:Name="Border1" BorderBrush="Black" BorderThickness="1" HorizontalAlignment="Left" Height="21" Margin="229,164,0,0" VerticalAlignment="Top" Width="90" Opacity="0.5"
                Visibility="{Binding Path=BorderVisible, Converter={StaticResource BoolToVisConverter} }" >
            <Grid>
                <Label Content="test"/>
            </Grid>
        </Border>
        <Button Content="Button" Height="23" HorizontalAlignment="Left" Margin="381,35,0,0" Name="button1" VerticalAlignment="Top" Width="75" Click="button1_Click" 
                />
    </Grid>
</Window> 
```

一些 Codebehind 快速测试代码：（实际上是 MainWindow.xaml.cs）

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Data;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Navigation;
using System.Windows.Shapes;

namespace StackOverflowWpf2
{
    /// <summary>
    /// Interaktionslogik für MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public BorderViewModel ViewModel { get; set; }

        public MainWindow()
        {
            InitializeComponent();

            ViewModel = new BorderViewModel();

            this.DataContext = ViewModel;

        }

        private void button1_Click(object sender, RoutedEventArgs e)
        {
            var vis = (this.DataContext as BorderViewModel).BorderVisible;

            (this.DataContext as BorderViewModel).BorderVisible = !vis;

        }
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-04T18:11:12.433

你不能绑定字段。您只能绑定公共属性或依赖属性。

使用公共属性（您必须实现`INotifyPropertyChanged`接口才能拥有属性->绑定）：

```
public partial class MainWindow : Window, INotifyPropertyChanged
{
    private bool vis;
    public bool Vis
    {
        get { return vis; }
        set
        {
            if (vis != value)
            {
                vis = value;
                OnPropertyChanged("Vis");  // To notify when the property is changed
            }
        }
    }

    public MainWindow()
    {
        InitializeComponent();

        Vis = true;
        // DataContext explains WPF in which object WPF has to check the binding path. Here Vis is in "this" then:
        DataContext = this;          
    }

    private void Button_Click(object sender, RoutedEventArgs e)
    {
        Vis = !Vis;  // Test Code
    }

    #region INotifyPropertyChanged implementation
    // Basically, the UI thread subscribes to this event and update the binding if the received Property Name correspond to the Binding Path element
    public event PropertyChangedEventHandler PropertyChanged;
    protected virtual void OnPropertyChanged(string propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
    #endregion
} 
```

XAML 代码是：

```
<Window x:Class="WpfApplication1.MainWindow"
        xmlns="http://schemas.microsoft.com/netfx/2009/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:WpfApplication1"
        xmlns:System="clr-namespace:System;assembly=mscorlib"
        Title="MainWindow2" Height="233" Width="392">

    <Window.Resources>
        <!-- You can implement your own BooleanToVisibilityConverter but there is one already implemented. So the next line creates an instance of the BooleanToVisibilityConverter that you will be able to reference with the specified key -->
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    </Window.Resources>

    <Grid>
        <Button Content="Click on the button to test" Click="Button_Click" Margin="0,0,0,165" />
        <Border x:Name="Border1" BorderBrush="Black" BorderThickness="1" HorizontalAlignment="Left" Height="21" Margin="229,164,0,0" VerticalAlignment="Top" Width="90" Opacity="0.5"
                Visibility="{Binding Vis, Converter={StaticResource BooleanToVisibilityConverter}}">
            <!-- The previous line define the binding : the path = Vis and the Converter to use -->
            <Grid>
                <Label Content="test"/>
            </Grid>
        </Border>
    </Grid>
</Window> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T18:11:32.130

首先你需要做一个财产：

```
private bool _vis;

public bool Vis
{
    get{return _vis;}
    set
    {
        if(_vis != value)
        {
            _vis = value;
        }
    }
} 
```

然后你需要一个 ValueConverter。

```
[ValueConversion(typeof(bool), typeof(Visibility))]
    public class VisibilityConverter : IValueConverter
    {
        public const string Invert = "Invert";

        #region IValueConverter Members

        public object Convert(object value, Type targetType, object parameter,
            System.Globalization.CultureInfo culture)
        {
            if (targetType != typeof(Visibility))
                throw new InvalidOperationException("The target must be a Visibility.");

            bool? bValue = (bool?)value;

            if (parameter != null && parameter as string == Invert)
                bValue = !bValue;

            return bValue.HasValue && bValue.Value ? Visibility.Visible : Visibility.Collapsed;
        }

        public object ConvertBack(object value, Type targetType, object parameter,
            System.Globalization.CultureInfo culture)
        {
            throw new NotSupportedException();
        }
        #endregion
    } 
```

您将需要在资源中创建转换器的实例，如下所示：

```
<UserControl.Resources>
    <cvt:VisibilityConverter x:Key="VisibilityConverter" />
</UserControl.Resources> 
```

然后你可以像这样绑定你的边框：

```
<Border x:Name="Border1" Visibility="{Binding vis, Converter={StaticResource VisibilityConverter}}>
    <Grid>
        <Label Content="test"/>
    </Grid>
</Border> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-16T20:17:36.160

另一种解决方案是使用触发器样式：

```
<Border x:Name="Border1" BorderBrush="Black" BorderThickness="1" HorizontalAlignment="Left" Height="21" Margin="229,164,0,0" VerticalAlignment="Top" Width="90" Opacity="0.5">
    <Border.Style>
        <Style TargetType="Border">
            <Setter Property="Visibility" Value="Visible"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=vis, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged }" Value="False">
                    <Setter Property="Visibility" Value="Hidden"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </Border.Style>
    <Grid>
        <Label Content="test"/>
    </Grid>
</Border> 
```

在模型类中：

```
public class ModelClass: INotifyPropertyChanged
{
    public event PropertyChangedEventHandler PropertyChanged;

    private void NotifyPropertyChanged(string name)
    {
        PropertyChanged?.Invoke(this, new PropertyChangedEventArgs(name));
    }

    private bool _vis;
    public bool vis
    {
        get => _vis;
        set
        {
            _vis = value;
            NotifyPropertyChanged("vis");
        }
    }
} 
```

不要忘记将 DataContext 与您的模型绑定！

```
DataContext = new ModelClass(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-12-31T03:40:14.900

使用 INotifyPropertyChanged 和 @Ladislav Ondris 的示例。连同以下绑定 Visibility="{x:Bind Visibility, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 为我工作。没有显示更新，否则使用 Visibility.Collapsed 和 Visbility.Visible。

# javascript - ASP.NET MVC4 捆绑脚本在子文件夹中找不到脚本 - 为什么？

> ID：14692468
> 
> 赞同：0
> 
> 时间：2013-02-04T17:50:40.747
> 
> 标签：javascript, asp.net-mvc, asp.net-mvc-4, web-optimization

在我的 ASP.NET MVC4 应用程序的 RegisterBundles 方法中，我创建了以下脚本包：

```
bundles.Add(new ScriptBundle("~/bundles/whatever")
    .Include("~/Scripts/whatever1.js")
    .Include("~/Scripts/Whatever/whatever2.js")); 
```

因此，“whatever1.js”直接位于 Scripts 文件夹下，而“whatever2.js”位于 Scripts 下的子文件夹中。

当我运行我的代码（在调试中）时，这会加载“whatever1.js”脚本文件，而不是子文件夹中的那个。

这是一个很大的站点，为了理智起见，到目前为止，将脚本文件隔离在单独的文件夹下已被证明是有用的。

所以问题是：这对我来说是不好的做法，还是捆绑机制还没有（或者我只是弄乱了语法）？

提前致谢

格里夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T13:31:06.747

重新启动后问题消失了。

# php - 需要帮助按深度嵌套值对 PHP 数组进行排序

> ID：14692469
> 
> 赞同：0
> 
> 时间：2013-02-04T17:50:51.493
> 
> 标签：php, multidimensional-array

提前感谢大家的帮助。

我有以下多维数组：

```
[list] => Array (
    [0] => Array (
        [retailer] => ABC Store
        [locations] => Array (
            [0] => Array (
                [distance] => 2.86
            )
            [1] => Array (
                [distance] = 5.50
            )
        )
    )

    [1] => Array (
        [retailer] => XYZ Store
        [locations] => Array (
            [0] => Array (
                [distance] => 1.25
            )
            [1] => Array (
                [distance] = 7.50
            )
        )
    )
) 
```

我想根据位置数组中的最近距离对零售商进行排序。所以新的`Array`会列`XYZ Store`在前面`ABC Store`。

我尝试过使用`array_multisort`，但是我在将主数组与嵌套了几层的键进行排序时遇到问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:10:16.110

```
$list = array(
    array(
        "retailer" => "ABC Store",
        "locations" => array(
            array(
                "distance" => 2.86
            ) ,
            array(
                "distance" => 5.50
            )
        )
    ) ,
    array(
        "retailer" => "XYZ Store",
        "locations" => array(
            array(
                "distance" => 1.25
            ) ,
            array(
                "distance" => 7.50
            )
        )
    )
);

foreach($list as $info) {
    $storeinfo[$info["retailer"]] = $info;
    foreach($info["locations"] as $location) {
        $distances[] = $location["distance"];
    }
    $stores[$info["retailer"]] = min($distances);
}

natsort($stores);

foreach($stores as $store => $distance) {
    $newlist[] = $storeinfo[$store];
}

echo "<pre>";
print_r($newlist);
echo "</pre>"; 
```

# - QGLWidget

> ID：14692473
> 
> 赞同：0
> 
> 时间：2013-02-04T17:50:54.827
> 
> 标签：

QGLWidget 类是 Qt 框架的一部分，是用于渲染 OpenGL 图形的小部件。

# javascript - YYYY-MM-DD 的 d3 时间格式，即。2013-02-04

> ID：14692476
> 
> 赞同：3
> 
> 时间：2013-02-04T17:51:03.753
> 
> 标签：javascript, d3.js, date-format

我正进入（状态

未捕获的类型错误：无法读取未定义的属性“长度”

从我的控制台在这一行

`var parseDate = d3.time.format("%Y-%m-%d").parse;`

`data.forEach(function(d) { d.Day = parseDate(d.Day); });`

这是我的日期在我的 json 对象中的格式`day: "2013-02-04"`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T18:50:55.863

我怀疑'day'的情况是不正确的。我可以执行：

```
var parseDate = d3.time.format("%Y-%m-%d").parse;
parseDate( "2013-02-03" ) 
```

没有问题（它显示正确的日期）。很可能，您需要将代码更改为：

```
data.forEach(function(d) { d.day = parseDate(d.day); }); 
```

（注意，“day”中的小写“d”）

# ruby - 没有网络的 Ruby HTTP 服务器

> ID：14692477
> 
> 赞同：0
> 
> 时间：2013-02-04T17:51:03.800
> 
> 标签：ruby, http, networking, select, httpserver

我正在尝试将 HTTP 服务器添加到现有的 Ruby 应用程序。该应用程序基于一个`select`循环，我也想在那里处理传入的 HTTP 请求（在同一个线程中处理请求很重要，否则我必须跳过箍来编组它们）。

Ruby 为独立的 HTTP 服务器提供了很多解决方案，但我似乎找不到在现有套接字上实现 HTTP 服务器的库。我不想让 HTTP 库打开一个端口并等待，我想给它提供套接字。

我正在寻找的基本逻辑是这样的：

```
handler = SomeHTTPParsingLibrary.new
# set up handler callbacks, etc on handler...

while socket = get_incoming_connection()
    handler.handle_request(socket)
end 
```

是否有任何现有的 Ruby 库可以像这样工作？HTTP 是一个足够简单的协议，但其中涉及到很多令人讨厌的细节（我需要 cookie、基本身份验证等），我不想自己动手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:26:28.277

您可能需要卷起袖子来弄清楚要调用哪些方法，但我建议您`HTTPParser`从[mongrel](https://github.com/mongrel/mongrel)中尝试该类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-20T01:49:23.243

快速浏览`httprequest.rb`（webrick - 来自 ruby​​ stdlib）中的代码似乎可能适合您的目的。

一个`WEBrick::HTTPRequest`对象能够接受一个套接字作为其`parse()`方法的参数。然后它将阻塞，并在请求对象已完全填充传入的 HTTP 请求时返回。

例如：

```
 res = HTTPResponse.new(@config)
    req = HTTPRequest.new(@config)

    # some code to "select" a socket goes here

    # sock is active, hand it over to the req object for reading.
    req.parse(sock)
    res.request_method = req.request_method 
```

当然，这假设这个线程将阻塞当前请求处理完成。

OTOH，类似的东西[**`tmm1/http_parser.rb`**](https://github.com/tmm1/http_parser.rb)也可能满足您的需求，但为了速度而牺牲了其他东西（如处理 cookie）。

# javascript - 防止文本字段在按钮单击时模糊

> ID：14692485
> 
> 赞同：0
> 
> 时间：2013-02-04T17:51:27.013
> 
> 标签：javascript, css, html

假设我有一个字段和一个按钮。该按钮提交字段并触发一些将数据返回到同一页面的 AJAX 请求。每次单击按钮时，都会取消选择/模糊该字段。这可以通过使按钮在单击时聚焦文本字段来部分解决。但是，在单击期间，字段会出现短暂的模糊。我设置页面的方式看起来不太好。我想完全防止该字段在整个点击过程中模糊。最简单的方法是什么？谢谢！

代码：

```
<input type="text" id="f" autofocus/><span id="btn" onclick="document.getElementById('f').focus()"></span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T17:55:53.357

您可以将焦点移到按钮焦点上，而不是处理按钮单击，超时时间非常短：

jQuery：

```
$('#btn').focus(function (event) {
    setTimeout(function () {
        $('#f').focus();
    }, 5);
}); 
```

JavaScript：

```
document.getElementById('btn').onfocus = function (event) {
    setTimeout(function (event) {
        document.getElementById('f').focus();
    }, 5);
}; 
```

# c# - WPF 数据绑定问题 - 可能的菜鸟问题

> ID：14692486
> 
> 赞同：0
> 
> 时间：2013-02-04T17:51:29.430
> 
> 标签：c#, .net, wpf, data-binding, binding

我正在尝试将 Visibility 类型的 ViewModel 属性绑定到 Dock 面板上的可见性属性：

***更新了 ViewModel 代码***：

```
public class SelectWaferButtonViewModel : INotifyPropertyChanged
{
    private bool isClicked;

    public SelectWaferButtonViewModel()
    {
        isClicked = false;
    }

    public bool IsControlVisible
    {
        get
        {
            return isClicked;
        }
        set
        {
            isClicked = value;
            OnPropertyChanged("IsControlVisible");
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public void OnButtonClick()
    {
        if (isClicked)
        {
            IsControlVisible = false;
        }
        else
        {
            IsControlVisible = true;
        }
    }
    protected virtual void OnPropertyChanged(string property)
    {
        if (PropertyChanged != null)
        {
            PropertyChanged(this, new PropertyChangedEventArgs(property));
        }
    }
} 
```

***这是我更新的 XAML 代码***：

```
 <DockPanel
                Name="tvwDockPanel"
                Width="200"
                Visibility="{Binding IsControlVisible, FallbackValue=Collapsed, Converter={StaticResource BoolToVisConverter}}"
                DockPanel.Dock="Left">
                <DockPanel
                    DockPanel.Dock="Top"
                    Height="22">
                </DockPanel> 
```

我在后面的代码中设置了数据上下文：

```
 tvwDockPanel.DataContext = btnSelectWaferViewModel; 
```

其中 btnSelectWaferViewModel 是这种情况下的 ViewModel 对象。

***为了好玩，这是我背后的代码***：

```
public partial class WaferTrackerWindow : Window
{
    List<ISubscribeEvents> subscriptionList;
    SelectWaferButtonViewModel btnSelectWaferViewModel;

    public WaferTrackerWindow()
    {
        InitializeComponent();

        this.InstantiateObjects();
        this.SubscribeEvents();
        this.SetDataContexts();
    }

    #region Methods

    private void SetDataContexts()
    {
        tvwDockPanel.DataContext = btnSelectWaferViewModel.IsControlVisible;
    }
    private void SubscribeEvents()
    {
        foreach (ISubscribeEvents subscriber in subscriptionList)
        {
            subscriber.SubscribeEvents();
        }
    }
    private void InstantiateObjects()
    {
        btnSelectWaferViewModel = new SelectWaferButtonViewModel();
        subscriptionList = new List<ISubscribeEvents>();
        subscriptionList.Add(
            new Classes.WaferTrackerWindow.SelectWaferButtonView(btnSelectWafer, btnSelectWaferViewModel));
    }

    #endregion
} 
```

我想做的就是单击按钮 btnSelectWafer 并让 tvwDockPanel 的可见性属性通过绑定设置为可见性。然后，当您再次单击 btnSelectWafer 时，tvwDockPanel 的可见性属性将再次设置回 Collapsed。tvwDockPanel 的可见性只会是 Collapsed 或 Visible。

任何帮助都会很棒，我对整个数据绑定概念相当陌生。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:01:04.433

您在这里有几个问题：

首先，MVVM 的目的（如果您尝试使用 MVVM 来执行此操作）是**将逻辑与表示分离**。这意味着您的 ViewModel 决不能引用`System.Windows.Controls.Button`，也不能`System.Windows.Visibility`，也不能引用命名空间内的任何其他类`System.Windows`。

我不清楚您的`SelectWaferButtonViewModel`班级对 Button 做了什么，但您需要从那里删除 Button。

此外，如果您需要从 ViewModel 层操作控件的可见性，则最好使用`Boolean`属性和`BooleanToVisibilityConverter`XAML 中的：

视图模型：

```
public bool IsControlVisible {get;set;} //Don't forget INotifyPropertyChanged!! 
```

XAML：

```
<Window.Resources>
    <BooleanToVisibilityConverter x:Key="BoolToVisConverter"/>
</Window.Resources>
<DockPanel Visibility="{Binding IsControlVisible, Converter={StaticResource BoolToVisConverter}}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T19:16:30.953

问题是您将您绑定`DockPanel`到视图模型的布尔属性，然后将`Visiblity`UI 元素的`IsControlVisible`属性设置为 datacontext 的属性（不存在）。

改成：

```
private void SetDataContexts()
{
    tvwDockPanel.DataContext = btnSelectWaferViewModel;
} 
```

# python - 用 nltk 分块

> ID：14692489
> 
> 赞同：4
> 
> 时间：2013-02-04T17:51:40.777
> 
> 标签：python, nlp, nltk, chunking

如何从给定模式的句子中获取所有块。示例

```
NP:{<NN><NN>} 
```

标记的句子：

```
[("money", "NN"), ("market", "NN") ("fund", "NN")] 
```

如果我解析我得到

```
(S (NP money/NN market/NN) fund/NN) 
```

我还想有另一种选择

```
(S money/NN (NP market/NN fund/NN)) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-05T00:11:42.590

@matchkarov 关于 nbest_parse 文档是正确的。为了代码示例，请参见：

```
import nltk
# Define the cfg grammar.
grammar = nltk.parse_cfg("""
S -> NP
S -> NN NP
S -> NP NN
NP -> NN NN
NN -> 'market'
NN -> 'money'
NN -> 'fund'
""")

# Make your string into a list of tokens.
sentence = "money market fund".split(" ")

# Load the grammar into the ChartParser.
cp = nltk.ChartParser(grammar)

# Generate and print the nbest_parse from the grammar given the sentence tokens.
for tree in cp.nbest_parse(sentence):
    print tree 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T17:56:36.607

我认为您的问题是关于获得`n`最有可能的句子解析。我对吗？如果是，请参阅[2.0 文档](http://nltk.org/api/nltk.parse.html)`nbest_parse(sent, n=None)`中的功能。

# ios - 使用 uitextview 获取 UITableViewCell 的高度

> ID：14692493
> 
> 赞同：1
> 
> 时间：2013-02-04T17:52:00.193
> 
> 标签：ios, uitableview, uitextview, heightforrowatindexpath, sizewithfont

我发现了很多类似的问题，但没有给我答案。

我正在尝试执行相同的单元格，例如 iOS 联系人应用程序中的注释单元格。左边有label，右边有uitextview。当我无法设置正确的单元格高度时，只有一个问题。当委托第一次询问单元格高度时，我调用此方法：

```
 -(float)getHeight:(NSString *)descriptionFieldText
 {
  UITableViewCell * cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:@"Tmp"] autorelease];
  cell.detailTextLabel.text = @"temp string";
  [cell layoutSubviews];

  float beg = cell.contentView.frame.size.width -  cell.textLabel.frame.origin.x * 2 - cell.textLabel.frame.size.width;

  return [m_balloon.descriptionField sizeWithFont:[cell.detailTextLabel.font fontWithSize:[cell.detailTextLabel.font pointSize]] constrainedToSize:CGSizeMake(beg, MAXFLOAT) lineBreakMode:UILineBreakModeWordWrap].height;
} 
```

但我无法在所有设备和所有方向上获得适当的高度。请帮忙。

# c# - 尝试发送 CSV 数据时出现 PageRequestManagerParserErrorException

> ID：14692498
> 
> 赞同：0
> 
> 时间：2013-02-04T17:52:06.747
> 
> 标签：c#, asp.net, csv

在 C# 中，我无法打印出 csv 文件

截至目前，它只是抛出一个错误，它不会打印文件

错误是：

> Sys.WebForms.PageRequestManagerParserErrorException：无法解析从服务器接收到的消息。

这是我的代码，感谢您的帮助，但我认为我做对了

```
 protected void csvbutton_Click(object sender, EventArgs e)
    {
        string filename = App_Name_L.ToString();

        StringBuilder sb = new StringBuilder();

        string[] columnNames = new string[]
        {
            "APPLICATION NAME",
            "DESCRIPTION",
            "APPLICATION OWNER",
            "TSO",
            "RESPONSIBLE MANAGER",
            "SIGN OFF",
            "CO-EXISTENCE STATUS",
            "CO-EXISTENCE PROGRESS",
            "MIGRATION PHASE",
            "NEXT STEPS",
            "LAST UPDATE"
        };
        sb.AppendLine(string.Join(",", columnNames));
        sb.AppendLine(Environment.NewLine);

        string[] fields = new string[]
        {
            App_Name_L.Text.ToString(),
            Description_L.Text.ToString(),
            App_Owner_L.Text.ToString().Replace(",", "."),
            TSO_L.Text.ToString().Replace(",", "."),
            Responsible_Manager_L.Text.ToString().Replace(",", "."),
            Sign_Off_L.Text.ToString().Replace(",", "."),
            this.status_export(0, Convert.ToInt16(CS_H.Value.ToString())),
            this.status_export(1, Convert.ToInt16(CP_H.Value.ToString())),
            Migration_Phase_L.Text.ToString(),
            Next_Steps_L.Text.ToString().Replace(",", "."),
            Last_Update_L.Text.ToString()
        };
        sb.AppendLine(string.Join(",", fields));

        stringout.Text = sb.ToString();

        Response.Clear();
        Response.ContentType = "text/csv";
        Response.AddHeader("Content-Disposition", "attachment; filename=\"" + filename + ".csv\"");
        Response.Write(sb.ToString());
        Response.End();
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:11:05.343

乔尔这是我刚刚测试过的东西，它在我的环境中工作看看这个，看看你是否可以将它应用到你的代码中，以及`data`用你的替换我的位置`sb.Tostring();`

```
private static void ExportToExcel(string data)
{
    HttpContext.Current.Response.Clear();
    HttpContext.Current.Response.AddHeader("content-disposition", "attachment;filename=\"" + filename + ".csv\"");
    HttpContext.Current.Response.ContentEncoding = System.Text.Encoding.GetEncoding("UTF-8");
    HttpContext.Current.Response.ContentType = "text/csv";
    HttpContext.Current.Response.Write(data);
    HttpContext.Current.Response.End();
} 
```

# php - 我可以使用 PHP 从 URL 获取图片到服务器吗？

> ID：14692499
> 
> 赞同：0
> 
> 时间：2013-02-04T17:52:08.617
> 
> 标签：php, facebook, codeigniter, graphics

我正在使用 PHP 和 Codeigniter 开发我的第一个 Facebook 应用程序。我正处于一个数组中向我提供以下信息的地步：

```
array(11) {
  ["urlPic"]=>
  string(94) "https://sphotos-a.xx.fbcdn.net/hphotos-ash4/s720x720/486147_10151513597963642_1435805055_n.jpg"
  ["first"]=>
  string(6) "Vinnie"
  ["last"]=>
  string(7) "Saletto"
  ["street"]=>
  string(17) "123 Main Street"
  ["city"]=>
  string(10) "Manchester"
  ["state"]=>
  string(2) "MO"
  ["zip"]=>
  string(5) "63021"
  ["plus"]=>
  string(0) ""
  ["phone"]=>
  string(12) "555-555-5555"
  ["x"]=>
  string(3) "158"
  ["y"]=>
  string(2) "38"
} 
```

一切都很好。然后我需要做的是（在 PHP 的范围内）从值 $_POST['urlPic'] 中获取 URL 并将其下载到我的服务器上，然后使用指向我创建的新文件的链接。以前有没有人这样做过，这可能吗？如果是，请告诉我如何。请理解这是针对大型***打印***项目的，因此我*需要*从 URL 下载图像，而不是仅仅链接 URL。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T17:57:17.890

您可以尝试快速而肮脏`file_get_contents() -> file_put_contents()`地从其他服务器上获取文件-

```
$newFilePath = '/path/on/your/server';
$data = file_get_contents($urlPic);
file_put_contents($newFilePath,$data); 
```

参考 -

*   [file_put_contents()](http://php.net/manual/en/function.file-put-contents.php)
*   [文件获取内容（）](http://www.php.net/manual/en/function.file-get-contents.php)

# c# - UserControl、WndProc 和焦点的奇怪行为

> ID：14692502
> 
> 赞同：1
> 
> 时间：2013-02-04T17:52:12.627
> 
> 标签：c#, winforms, user-controls, wndproc

我有一个`UserControl-derived`带有几个子控件的控件（这里：三个停靠标签）。为了对用户控件上任意位置的点击做出反应，我`override WndProc()`寻找

> WM_PARENTNOTIFY/WM_LBUTTONCLICK

- 这是在[MSDN](http://social.msdn.microsoft.com/forums/en-US/winformsdesigner/thread/f3892382-8648-4357-95e3-a3522b70b676)上提出的，并且效果很好。

用户点击鼠标的反应是打开一个（模态）弹出对话框。但是，当我尝试实现这一点时，出现了一个奇怪的行为：有时，对话框会闪烁几次，并且会出现 Windows 声音。关闭对话框后，用户必须单击主窗口（包含 UserControl）才能重新设置焦点。有时，没有闪烁也没有声音，但主窗体也失去了焦点。

与此相反，UserControl 旁边的按钮也会打开该弹出对话框。没有闪烁，没有声音，关闭弹出窗口后，主窗口自动重新获得焦点。

UserControl/WndProc 构造有什么问题？

我包括一个示例项目（VS2008）来说明行为：（[通过 DropBox](http://db.tt/dvkCesvv)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:19:52.580

`BeginInvoke`在 WndProc 方法完成后尝试使用启动事件：

```
protected override void WndProc(ref Message m) {
  //0x210 is WM_PARENTNOTIFY
  if (m.Msg == 0x210 && m.WParam.ToInt32() == 513)    //513 is WM_LBUTTONCLICK
    {
    Console.WriteLine("## MouseClick on UserControl1 ");
    this.BeginInvoke(new Action(() => UserControlClicked(this, new EventArgs())));
    return;
  }
  /*
  else if (m.Msg == 0x2a1) // WM_MOUSEHOVER
      TTrace.Debug.Send("## WMsg " + m.Msg + " / WParam " + m.WParam.ToInt32());
  */
  base.WndProc(ref m);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:09:42.913

这可能会发生，因为您在处理事件的同时打开了一个表单。根据计时器的时间和/或位置，可能会为主窗体或对话框窗体触发挂起的单击事件。

我建议一种解决方法。

检测到点击后，启动一个计时器，在短时间（50 毫秒左右）后打开对话框表单。这将点击事件处理与表单打开分离。这个技巧帮助我多次解决了这类问题。

# php - 当前时间是否在两个给定时间之间？

> ID：14692506
> 
> 赞同：16
> 
> 时间：2013-02-04T17:52:30.457
> 
> 标签：php, time, timestamp

我正在尝试计算**当前时间是否在餐厅的营业时间内**。

这个问题在 Stackoverflow 上被问了很多，但我还没有找到一个可以解释我遇到的问题的问题。此外，很高兴看到有更好的方法来做到这一点。

目前，如果当天关闭（本例中为星期日）或“星期六”凌晨 1 点（从技术上讲是星期天早上 1 点），它会中断。我有一种感觉，我必须改变数据的存储方式，以解决午夜之后的问题，但我正在尝试使用我现在拥有的东西。这是一个问题，因为大多数餐厅将特定日期的营业时间列为下午 5 点至凌晨 2 点，而不是下午 5 点至凌晨 12 点、凌晨 12 点至凌晨 2 点。

无论如何，这就是我所拥有的。请告诉我一个更好的方法来做到这一点。

我有这样存储的时间：

```
$times = array(
    'opening_hours_mon' => '9am - 8pm',
    'opening_hours_tue' => '9am - 2am',
    'opening_hours_wed' => '8:30am - 2am',
    'opening_hours_thu' => '5:30pm - 2am',
    'opening_hours_fri' => '8:30am - 11am',
    'opening_hours_sat' => '9am - 3pm, 5pm - 2am',
    'opening_hours_sun' => 'closed'
); 
```

这是我现在使用的代码：

```
// Get the right key for today
$status = 'open';
$now = (int) current_time( 'timestamp' );
$day = strtolower( date('D', $now) );
$string = 'opening_hours_'.$day;

$times = $meta[$string][0]; // This should be a stirng like '6:00am - 2:00am' or even '6:00am - 11:00am, 1:00pm to 11:00pm'.

// Does it contain a '-', if not assume it's closed.
$pos = strpos($times, '-');
if ($pos === false) {       
    $status = 'closed';
} else {

    // Maybe a day has multiple opening times?
    $seating_times = explode(',', $times);
    foreach( $seating_times as $time ) {

        $chunks = explode('-', $time);
        $open_time = strtotime($chunks[0]);
        $close_time = strtotime($chunks[1]);

        // Calculate if now is between range of open and closed
        if(($open_time <= $now) && ($now <= $close_time)) {
            $status = 'open';
            break;
        } else {
            $status = 'closed';             
        }

    }

} 
```

注意：[current_time('timestamp',0) 是一个 WordPress 函数](http://codex.wordpress.org/Function_Reference/current_time)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-19T20:49:20.227

这是我的面向对象的解决方案，基于 PHP [DateTime 类](http://www.php.net/manual/en/class.datetime.php)的使用（从 5.2 版本开始可用）：

```
<?php 

class Restaurant {
    private $cw;
    private $times = array();
    private $openings = array();

    public function __construct(array $times) {
        $this->times = $times;
        $this->setTimes(date("w") ? "this" : "last");
        //print_r($this->openings);       // Debug
    }

    public function setTimes($cw) {
        $this->cw = $cw;
        foreach ($this->times as $key => $val) {
            $t = array();
            $buf = strtok($val, ' -,');
            for ($n = 0; $buf !== FALSE; $n++) {
                try {
                    $d = new DateTime($buf);
                    $d->setTimestamp(strtotime(substr($key, -3)." {$this->cw} week {$buf}"));
                    if ($n && ($d < $t[$n-1])) {
                        $d->add(new DateInterval('P1D'));
                    }
                    $t[] = $d;
                } catch (Exception $e) {
                    break;
                }
                $buf = strtok(' -,');
            }
            if ($n % 2) {
                throw new Exception("Invalid opening time: {$val}");
            } else {
                $this->openings[substr($key, -3)] = $t;
            }
        }
    }

    public function isOpen() {
        $cw = date("w") ? "this" : "last";
        if ($cw != $this->cw) {
            $this->setTimes($cw);
        }
        $d = new DateTime('now');
        foreach ($this->openings as $wd => $t) {
            $n = count($t);
            for ($i = 0; $i < $n; $i += 2) {
                if (($d >= $t[$i]) && ($d <= $t[$i+1])) {
                    return(TRUE);
                }
            }
        }
        return(FALSE);
    }
}

$times = array(
    'opening_hours_mon' => '9am - 8pm',
    'opening_hours_tue' => '9am - 2am',
    'opening_hours_wed' => '8:30am - 2am',
    'opening_hours_thu' => '9am - 3pm',
    'opening_hours_fri' => '8:30am - 11am',
    'opening_hours_sat' => '9am - 3pm, 5pm - 2am',
    'opening_hours_sun' => 'closed'
);

try {
    $r = new Restaurant($times);
    $status = $r->isOpen() ? 'open' : 'closed';
    echo "status=".$status.PHP_EOL;
} catch (Exception $e) {
    echo $e->getMessage().PHP_EOL;
}

?> 
```

如您所见，构造函数构建了一个内部表单（`openings`DateTime 对象数组），然后在`isOpen`方法中使用该表单进行简单比较，以检查在调用时餐厅是打开还是关闭。

您还会注意到我使用了[DateTime:add](http://www.php.net/manual/en/datetime.add.php)方法来计算明天的日期，而不是在当前日期时间戳中添加 86400 (24*60*60)，以避免[DST](http://en.wikipedia.org/wiki/Daylight_saving_time)时间偏移问题。
概念证明：

```
<?php

ini_set("date.timezone", "Europe/Rome");
echo "date.timezone = ".ini_get("date.timezone").PHP_EOL;

$d1 = strtotime("2013-10-27 00:00:00");
$d2 = strtotime("2013-10-28 00:00:00");
// Expected: 86400, Result: 90000
echo "Test #1: ".($d2 - $d1).PHP_EOL;
// Expected: 2013-10-28 00:00:00, Result: 2013-10-27 23:00:00
echo "Test #2: ".date("Y-m-d H:i:s", $d1 + 86400).PHP_EOL;

$d1 = strtotime("2014-03-30 00:00:00");
$d2 = strtotime("2014-03-31 00:00:00");
// Expected: 86400, Result: 82800
echo "Test #3: ".($d2 - $d1).PHP_EOL;
// Expected: 2014-03-30 00:00:00, Result: 2014-03-29 23:00:00
echo "Test #4: ".date("Y-m-d H:i:s", $d2 - 86400).PHP_EOL;

?> 
```

这给出了以下结果：

```
date.timezone = Europe/Rome
Test #1: 90000
Test #2: 2013-10-27 23:00:00
Test #3: 82800
Test #4: 2014-03-29 23:00:00 
```

因此，似乎一天并不总是有 86400 秒；至少一年两次……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-22T09:16:31.673

假设我们有另一个具有以下类型条目的数组，而不是这样的数组：

```
Array ( [from] => 1382335200 [to] => 1382374800 ) 
```

和值是时间戳`from`，`to`通过将数组的信息投影到*当前（运行）周*来计算。

然后，为了检查餐厅现在是否营业，我们必须做一些简单的事情：

```
$slots=..... /* calculate time slots array */
$status='closed';
$rightnow=time();
foreach($slots as $slot)
  if($rightnow<=$slot['to'])
    {
    if($rightnow>=$slot['from']) $status='open';
    break;
    }
echo "The restaurant is <strong>$status</strong> right now<br>"; 
```

给定一个工作日，以 , 等的形式`mon`和`tue`两个`wed`定义时间范围的字符串，例如`8:30am`和`3:15pm`，下面的函数将返回相应的时隙，如上所述：

```
function get_time_slot($weekday,$fromtime,$totime)
  {
  $from_ts=strtotime("this week $weekday $fromtime");
  $to_ts=strtotime("this week $weekday $totime");
  if($to_ts<$from_ts)
    {
    $to_ts=strtotime("this week $weekday +1 day $totime");
    if($to_ts>strtotime("next week midnight")) 
      $to_ts=strtotime("this week mon $totime");
    }
  return array('from'=>$from_ts,'to'=>$to_ts);
  } 
```

`strtotime()`能创造奇迹吧？请注意，如果时间段的结束时间早于开始时间，我们假设它指的是第二天，并且我们重新计算它。

**编辑：**起初，我天真地以为我会通过增加一天的秒数来纠正它。这并不完全准确，因为操作时间戳不会保留 DST 信息。因此，如果一个时间段包括一个白班（午夜）和*一个 DST 班次*，它会给出一个小时的不准确结果。再次使用`strtotime()`相同的论点加上一天，将使它变得直截了当。

**yaEDIT：**另一个错误（希望是最后一个）已修复：当餐厅在周日营业到午夜之后，`$to_time`应该在本周的星期一同一时间结束。*呸！*

现在，为了转换您的数组，您需要执行以下操作：

```
$slots=array();
foreach($times as $key=>$entry)
  {
  list(,,$dow)=explode('_',$key);
  foreach(explode(',',$entry) as $d)
    {
    $arr=explode('-',$d);
    if(count($arr)==2) $slots[]=get_time_slot($dow,$arr[0],$arr[1]);
    }
  } 
```

这是[一个小 phpfiddle 来演示这一点](http://phpfiddle.org/main/code/6nz-ugw)。

* * *

**编辑**：受另一个答案中的“简洁”讨论的启发，我想我会给出我的“紧凑”版本。使用*完全相同的逻辑*，归结为以下内容：

```
$status='closed';
$rightnow=time();
foreach($times as $key=>$entry)
  {
  list(,,$dow)=explode('_',$key);
  foreach(explode(',',$entry) as $d)
    if(count($arr=explode('-',$d))==2)
      {
      $from_ts=strtotime("this week $dow {$arr[0]}");
      $to_ts=strtotime("this week $dow {$arr[1]}");
      if($to_ts<$from_ts) $to_ts=strtotime("this week $dow +1 day {$arr[1]}");
        {
        $to_ts=strtotime("this week $dow +1 day {$arr[1]}");
        if($to_ts>strtotime("next week midnight")) 
          $to_ts=strtotime("this week mon {$arr[1]}");
        }
      if($rightnow<=$to_ts)
        {
        if($rightnow>=$from_ts) $status='open';
        break 2; // break both loops
        }
      }
  }
echo "<hr>The restaurant is <strong>$status</strong> right now<br>"; 
```

不过，我自己还是更喜欢原版。除了拥有函数的明显好处外，`$slots`数组还可以很好地被缓存和重用，这使得相关计算比重新解析原始数据容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-10-22T14:55:01.553

周计时数组

```
$times = array(
    'opening_hours_mon' => '9am - 8pm',
    'opening_hours_tue' => '9am - 2am',
    'opening_hours_wed' => '8:30am - 2am',
    'opening_hours_thu' => '9am - 3pm',
    'opening_hours_fri' => '8:30am - 11am',
    'opening_hours_sat' => '9am - 3pm, 5pm - 2am',
    'opening_hours_sun' => 'closed'
); 
```

用法示例：

```
ini_set( "date.timezone", "Pacific/Auckland" ); // Make sure correct timezone is set

echo ( isOpen( $times ) ? 'Open' : 'Closed' );    

echo ( isOpen( $times ,"10am" ) ? 'Open' : 'Closed' ); 
```

函数定义：

```
/*
 *  First parameter : Weeks timings as array
 *  Second parameter : Time to check as string
 *  Return value : boolean
 */
function isOpen( $times ,$timeToCheck = 'now' )
{
    $timeToCheckAsUnixTimestamp = strtotime( $timeToCheck );

    $yesterdayTimes = $todayTimes = '';
    //  Find yesterday's times and today's times
    foreach( $times as $day => $timeRange )
    {
        $yesterdayTimes = ( stripos( $day ,date( "D" ,time() - 60 * 60 * 24 ) ) !== false ? $timeRange : $yesterdayTimes );
        $todayTimes = ( stripos( $day ,date( "D" ) ) !== false ? $timeRange : $todayTimes );
    }
    //  Handle closed
    if( strcasecmp( $todayTimes ,'closed' ) == 0 ) return false;
    if( strcasecmp( $yesterdayTimes ,'closed' ) == 0 ) $yesterdayTimes = '12am - 12am';
    //  Process and check with yesterday's timings
    foreach( explode( ',' ,$yesterdayTimes ) as $timeRanges )
    {
        list( $from ,$to ) = explode( '-' ,$timeRanges );
        list( $fromAsUnixTimestamp ,$toAsUnixTimestamp ) = array( strtotime( $from .' previous day' ) ,strtotime( $to .' previous day'  ) );
        $toAsUnixTimestamp = ( $toAsUnixTimestamp < $fromAsUnixTimestamp ? strtotime( $to ) : $toAsUnixTimestamp );
        if( $fromAsUnixTimestamp <= $timeToCheckAsUnixTimestamp and $timeToCheckAsUnixTimestamp <= $toAsUnixTimestamp ) return true;
    }
    //  Process and check with today's timings
    foreach( explode( ',' ,$todayTimes ) as $timeRanges )
    {
        list( $from ,$to ) = explode( '-' ,$timeRanges );
        list( $fromAsUnixTimestamp ,$toAsUnixTimestamp ) = array( strtotime( $from ) ,strtotime( $to ) );
        $toAsUnixTimestamp = ( $toAsUnixTimestamp < $fromAsUnixTimestamp ? strtotime( $to .' next day' ) : $toAsUnixTimestamp );
        if( $fromAsUnixTimestamp <= $timeToCheckAsUnixTimestamp and $timeToCheckAsUnixTimestamp <= $toAsUnixTimestamp ) return true;
    }
    return false;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-26T12:15:07.600

这是另一种无需重新格式化数据的解决方案。

```
$times = array(
    'opening_hours_mon' => '9am - 8pm',
    'opening_hours_tue' => '9am - 2am',
    'opening_hours_wed' => '8:30am - 2am',
    'opening_hours_thu' => '5:30pm - 2am',
    'opening_hours_fri' => '8:30am - 11am',
    'opening_hours_sat' => '9am - 3pm, 5pm - 2am',
    'opening_hours_sun' => 'closed'
);

function compileHours($times, $timestamp) {
    $times = $times['opening_hours_'.strtolower(date('D',$timestamp))];
    if(!strpos($times, '-')) return array();
    $hours = explode(",", $times);
    $hours = array_map('explode', array_pad(array(),count($hours),'-'), $hours);
    $hours = array_map('array_map', array_pad(array(),count($hours),'strtotime'), $hours, array_pad(array(),count($hours),array_pad(array(),2,$timestamp)));
    end($hours);
    if ($hours[key($hours)][0] > $hours[key($hours)][1]) $hours[key($hours)][1] = strtotime('+1 day', $hours[key($hours)][1]);
    return $hours;
}

function isOpen($now, $times) {
    $open = 0; // time until closing in seconds or 0 if closed
    // merge opening hours of today and the day before
    $hours = array_merge(compileHours($times, strtotime('yesterday',$now)),compileHours($times, $now)); 

    foreach ($hours as $h) {
        if ($now >= $h[0] and $now < $h[1]) {
            $open = $h[1] - $now;
            return $open;
        } 
    }
    return $open;
}

$now = strtotime('7:59pm');
$open = isOpen($now, $times);

if ($open == 0) {
    echo "Is closed";
} else {
    echo "Is open. Will close in ".ceil($open/60)." minutes";
}

?> 
```

我进行了几次测试，它似乎按预期工作，考虑了我能想到的所有方面。如果您发现这个有问题，请告诉我。我知道这种方法看起来有点讨厌，但我只想使用简单的函数（除了棘手的部分`array_map`）并尽可能短。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-22T10:38:02.400

这可能不是最有效的，但它应该可以很好地解决您手头的问题：

```
$times = array(
    'opening_hours_mon' => '9am - 8pm',
    'opening_hours_tue' => '9am - 2am',
    'opening_hours_wed' => '8:30am - 2am',
    'opening_hours_thu' => '9am - 3pm',
    'opening_hours_fri' => '8:30am - 11am',
    'opening_hours_sat' => '9am - 3pm, 5pm - 2am',
    'opening_hours_sun' => 'closed'
);

var_dump(is_open($times, strtotime('sun 1am'))); // true 
```

这是第一个功能，设计简单；它使用开盘和关盘时间网格，并确定给定时间是否与任何范围匹配：

```
function is_open($times, $now)
{
    $today = strtotime('today', $now);

    $grid = get_time_grid($times);
    $today_name = strtolower(date('D', $today));
    $today_seconds = $now - $today;

    foreach ($grid[$today_name] as $range) {
        if ($today_seconds >= $range[0] && $today_seconds < $range[1]) {
            return true;
        }
    }

    return false;
} 
```

这个函数构建了实际的网格；如果范围结束出现在其相应的开始之前，它将创建两个范围，一个用于跨越的每一天。

```
function get_time_grid($times)
{
    static $next_day = array(
        'mon' => 'tue', 'tue' => 'wed', 'wed' => 'thu',
        'thu' => 'fri', 'fri' => 'sat', 'sat' => 'sun',
        'sun' => 'mon'
    );
    static $time_r = '(\d{1,2}(?::\d{2})?(?:am|pm))';

    $today = strtotime('today');
    $grid = [];

    foreach ($times as $key => $schedule) {
        $day_name = substr($key, -3);
        // match all time ranges, skips "closed"
        preg_match_all("/$time_r - $time_r/", $schedule, $slots, PREG_SET_ORDER);
        foreach ($slots as $slot) {
            $from = strtotime($slot[1], $today) - $today;
            $to = strtotime($slot[2], $today) - $today;

            if ($to < $from) { // spans two days
                $grid[$day_name][] = [$from, 86400];
                $grid[$next_day[$day_name]][] = [0, $to];
            } else { // normal range
                $grid[$day_name][] = [$from, $to];
            }
        }
    }

    return $grid;
} 
```

代码中只有几条注释，但我希望你能关注正在做的事情。如果您需要任何澄清，请告诉我。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-10-24T23:49:16.780

我过去做过类似的事情，但采取了完全不同的方法。我将营业时间存储在单独的表格中。

```
CREATE TABLE `Openinghours`
(
    `OpeninghoursID` int, // serial
    `RestaurantID` int, // foreign key
    `Dayofweek` int, // day of week : 0 (for Sunday) through 6 (for Saturday)
    `Opentime` int, // time of day when restaurant opens (in seconds)
    `Closetime` int // time of day when restaurant closes (in seconds)
); 
```

如果一家餐厅每天有多个营业时间，您只需添加 2 条记录（或需要更多 id）。使用这样的表的好处是您可以简单地查询以查看哪些餐厅营业。

```
$day = date('w');
$now = time()-strtotime("00:00");
$query = "Select `RestaurantID` from `Openinghours` where `Dayofweek` = ".$day." and `Opentime` <= ".$now." and `Closetime` > ".$now; 
```

使用这样一个系统的另一个好处是，您可以调整查询以获得不同的结果，例如：哪些餐厅现在营业并至少再营业一个小时（没有必要在关闭前几分钟去餐厅）

```
$day = date('w');
$now = time()-strtotime("00:00");
$query = "Select `RestaurantID` from `Openinghours` where `Dayofweek` = ".$day." and `Opentime` <= ".$now." and `Closetime` > ".($now+3600); 
```

当然，它需要重新格式化您当前的数据，但它带来了不错的功能。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-04T19:24:28.017

如果您为此使用数据库，为什么您没有为此使用**日期**时间。

样本：

```
sunday 14:28, saturday 1:28 
```

您可以在字符串时间（第 2 部分）中拆分这两部分并比较它们。您可以使用**strtotime**将字符串时间转换为时间戳并进行比较。

样本：

```
$date = "sunday 14:28"; 
echo $stamp = strtotime($date); 
```

输出：

```
1360492200 
```

像这样的代码：

```
$Time="sunday  14:28 , saturday 1:28";
$tA=explode(",",$Time);
$start=strtotime($tA[0]);
$end=strtotime($tA[1]);
$now=time();
if($now>$start and $now<$end){
   echo "is open";
}else{
   echo "is close";
} 
```

但是您在更新它们时遇到问题，您可以这样做。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-24T12:30:44.567

也许我不完全理解这一点，但通过一个基本的循环，也许这可以工作：

```
if( ($date('D') == "3" ) )
{
    $open = "8";
    $close = "17";
    $now = time();

    if( ($now > $open) and ($now < $close) )
    {
        echo "open";
    }
    else
    {
        echo "closed";
    }
} 
```

也许不是解决它的最佳方法，因为这不包括假期等，并且需要一些条件语句，但我认为这可以工作。好吧，不是最佳的，但总是为我工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-10-24T11:24:09.570

将您的数组作为参数传递给此函数，您将在当前时间为打开和关闭为 false。这是简单直接的功能。我只是检查今天的开放时间，如果有必要的话，我只检查昨天的开放时间，而无需在整个工作日中进行不必要的循环。也许它可以改进一点，但它的工作原理并不复杂。

```
function isOpen($times) {
    $times = array_values($times); //we will use numeric indexes
    $now = new DateTime();
    $day = $now->format('N'); 
    $day--; //days are counted 1 to 7 so we decrement it to match indexes
    $period = $times[$day];
    if($period!='closed') {
        $opening = explode('-', $period);
        $open = new DateTime($opening[0]);
        $close = new DateTime($opening[1]);
        if($close<$open) {
            //it means today we close after midnight, it is tomorrow
            $close->add(new DateInterval('P1D'));
        }
        if($open<$now && $now<$close) {
            //we are open
            return true;
        }
    }
    if($period=='closed' || $now<$open) {
        //now we check if we still open since yesterday
        $day = $day==0 ? 6 : $day-1;
        $period = $times[$day];
        if($period=='closed') return false;
        $opening = explode(' - ', $period);
        $open = new DateTime($opening[0]);
        $close = new DateTime($opening[1]);
        if($close<$open) {
        //it means yesterday we closed after midnight
            if($now<$close) {
                //we are before closing time
                return true;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-22T08:34:10.440

**不改变时间存储格式的解决方案**

```
<?php
    $times = array(
        'opening_hours_mon' => '9am - 8pm',
        'opening_hours_tue' => '5pm - 2am',
        'opening_hours_wed' => '8:30am - 2am',
        'opening_hours_thu' => '9am - 3pm',
        'opening_hours_fri' => '8:30am - 11am',
        'opening_hours_sat' => '9am - 3pm, 5pm - 2am',
        'opening_hours_sun' => 'closed'
    );

    //$time_go = '13:00';
    $time_go = date('H:i');

    //$day_go = 1; //monday
    $day_go = (date('N') - 1);

    if(Are_they_open($time_go, $day_go, $times)){
        echo 'jep';
    }
    else{
        echo 'nope';
    }

    function Are_they_open($time_go, $day_go, $times){
        // the magic
        $times = array_values($times);
        $day_go = explode(',', $times[$day_go]);
        $time_go = hh_mm_toSeconds($time_go);

        foreach($day_go as $time){

            if((!$time) || ($time == 'closed')){
                return false;
            }

            $time = explode(' - ', $time);
            $time_open = hh_mm_toSeconds(date('H:i', strtotime($time[0])));
            $time_close = hh_mm_toSeconds(date('H:i', strtotime($time[1])));

            if(($time_go > $time_open) && ($time_go < $time_close)){
                return true;
            }
            elseif (($time_open > $time_close) || ($time_go > $time_open)){
                return true;
            }

        }

        return false;
    }

    function hh_mm_toSeconds($str_time){
        sscanf($str_time, "%d:%d", $hours, $minutes);
        return ($hours * 3600) + ($minutes * 60);
    }
?> 
```

**更改时间格式的解决方案**

```
$times = array(
    1 => array(
        array('07:00', '17:00')
    ),
    2 => array(
        array('07:00', '14:30'),
        array('15:00', '20:00')
    ),
    3 => array(
        array('07:00', '17:00')
    ),
    4 => false, //closed
    5 => array(
        array('07:00', '17:00'),
        array('20:00', '24:00')
    ),
    6 => array(
        array('00:00', '03:00'),
        array('07:00', '17:00'),
        array('20:00', '24:00')
    ),
    7 => array(
        array('00:00', '03:00')
    ),
); 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2013-10-21T20:59:39.403

这是我的解决方案：

**输入数据：**

> ```
> $meta = array(
>    'opening_hours_mon' => '9am - 8pm',
>    'opening_hours_tue' => '9am - 2am',
>    'opening_hours_wed' => '8:30am - 2am',
>    'opening_hours_thu' => '9am - 3pm',
>    'opening_hours_fri' => '8:30am - 11am',
>    'opening_hours_sat' => '9am - 3pm, 5pm - 2am',
>    'opening_hours_sun' => 'closed' 
> ```
> 
> );

current_time('timestamp') （如作者所说）`time()`在 WordPress 中 的模拟
**和解决方案：**

> ```
>  $now = (int) current_time( 'timestamp' );
>     $day = strtolower(date('D', $now));
>     $yesterday = strtolower(date('D', strtotime('-1 day')));
>     $days = array(
>         'yesterday' => $meta['opening_hours_'.$yesterday],
>         'today' => $meta['opening_hours_'.$day],
>     );
>     $status = false;
>     foreach($days as $when=>$times)
>     {
>         $parts = explode(',',$times);
>         foreach($parts as $p)
>         {
>             if($p == 'closed')
>                 break;
>             else{
>                 list($b,$e) = explode('-',$p);
>                 $b = strtotime("$when $b");
>                 $e = strtotime("$when $e");
>                 if($b > $e)
>                     $e += strtotime("$when $e +1 day");;
>                 if($b <= $now && $now <= $e)
>                 {
>                     $status =true;
>                     break;
>                 }
>             }
>         }
>     } 
> ```

**测试：**
您可以将前 3 行更改为以下内容：

> ```
> $now = (int) strtotime('today 3:00am');
> $day = strtolower(date('D', $now));
> $yesterday = strtolower(date('D', strtotime('yesterday 3:00am'))); 
> ```

# c# - 模拟存储库返回具有空属性的对象

> ID：14692512
> 
> 赞同：1
> 
> 时间：2013-02-04T17:53:01.950
> 
> 标签：c#, unit-testing, moq

这是我的一个单元测试类的示例（简化为基础）。在控制器中，当调用 Index() 操作方法时，对 GetByID(1234) 的调用总是会产生一个新的 Ticket 对象实例。该对象存在，但它的所有属性都是空的，即使我已经在我的假对象中设置了它们。关于为什么的任何想法？

我正在使用起订量。

**单元测试**

```
 [TestClass]
    public class TicketControllerTests : ControllerTestBase
    {
        protected Mock<ITicketRepository> MockTicketRepository = new Mock<ITicketRepository>();

        [TestMethod]
        public void IndexActionModelIsTypeOfTicketModel()
        {
            //ARRANGE
            Mock<HttpContextBase> context = FakeHttpContext();
            context.Setup(ctx => ctx.Session[SessionKeys.TokenData.ToString()]).Returns(Constants.TOKENDATA_SUBMITTER);

            MockTicketRepository.Setup(x => x.GetById(It.IsAny<int>())).Returns(Constants.CLIENT_TICKET);

            //ACT
            var result = GetController(context.Object).Index(Constants.TICKET_ID);
            var model = ((ViewResult)result).Model;

            //ASSERT
            Assert.IsInstanceOfType(model, typeof(TicketModel), "ViewModel should have been an instance of TicketModel.");
        }

        private TicketController GetController(HttpContextBase context)
        {
            var controller = new TicketController(MockTicketRepository.Object);
            controller.ControllerContext = GetControllerContext(context, controller);
            return controller;
        }
    } 
```

**常量.CLIENT_TICKET**

```
public static Ticket CLIENT_TICKET
        {
            get
            {
                var ticket = new Ticket
                {
                    CategoryID = 1,
                    CreatedByUserId = 4
                };

                ticket.Clients.Add(new Client { ShortName = "Test Client 1"});
                ticket.Clients.Add(new Client { ShortName = "Test Client 2" });

                ticket.User = new User {FirstName = "First", LastName = "Last"};

                return ticket;
            }
        } 
```

**控制器**

```
private readonly ITicketRepository _ticketRepository;

public TicketController(ITicketRepository ticketRepository)
{
    _ticketRepository = ticketRepository;
}

public ActionResult Index(int id)
{
    var ticket = _ticketRepository.GetById(id);

    // etc...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:08:25.797

你能显示正在测试的控制器代码吗？这可能与您如何设置模拟上下文有关，但如果不查看控制器代码就很难判断。

此外，如果您`MockBehavior.Strict`在创建模拟时添加，如果调用没有相应的期望，它将被炸毁：

```
protected Mock<ITicketRepository> MockTicketRepository = new Mock<ITicketRepository>(MockBehavior.Strict); 
```

更新我试图剥离一切，以便测试尽可能简单地尝试和隔离问题。这是我想出的：

```
[TestClass]
public class TicketControllerTests : ControllerTestBase
{
    protected Mock<ITicketRepository> MockTicketRepository;

    [TestMethod]
    public void IndexActionModelIsTypeOfTicketModel()
    {
        //ARRANGE
        MockTicketRepository = new Mock<ITicketRepository>(MockBehavior.Strict);
        MockTicketRepository.Setup(x => x.GetById(Constants.TICKET_ID)).Returns(Constants.CLIENT_TICKET);
        var controller = new TicketController(MockTicketRepository.Object);

        //ACT - try to keep ACT as lean as possible, ideally just the method call you're testing
        var result = controller.Index(Constants.TICKET_ID);

        //ASSERT
        var model = ((ViewResult)result).ViewData.Model;
        Assert.That(model, Is.InstanceOfType<TicketModel>(), "ViewModel should have been an instance of TicketModel.")
    }
} 
```

# ios - Salesforce MobileSDK iOS 在卸载后保留 OAuth 令牌

> ID：14692518
> 
> 赞同：1
> 
> 时间：2013-02-04T17:53:31.927
> 
> 标签：ios, oauth, salesforce

我们正在使用适用于 iOS 的 Salesforce 移动 SDK 来创建使用 OAuth 登录到 SFDC 组织的本机 iPhone 应用程序。

卸载并重新安装应用程序后，应用程序当前使用卸载前提供的 OAuth 令牌成功登录。

例如时间线

*   首次下载并安装
*   提供登录凭据
*   登录成功
*   卸载应用
*   从 Safari 清除浏览历史记录、cookie 和数据
*   再次下载并安装应用程序
*   尝试登录
*   无需再次提供登录凭据即可登录

问题：SDK 将令牌存储在哪里，我们可以在卸载应用程序时将其删除或清空吗？这是预期的行为吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T14:39:26.813

该信息将存储在设备的钥匙串中，因此如果您在卸载应用程序时不告知将其删除，该信息将持续存在[。](http://forcedotcom.github.com/SalesforceMobileSDK-iOS/Documentation/SalesforceOAuth/Classes/SFOAuthCredentials.html)可以在[此处的另一个线程上找到对此的一个很好的讨论。](https://stackoverflow.com/questions/4747404/delete-iphone-keychain-items-when-application-uninstall)

保罗

# c# - 从非托管代码返回字节*（大小未知）

> ID：14692519
> 
> 赞同：0
> 
> 时间：2013-02-04T17:53:32.973
> 
> 标签：c#, c++-cli, marshalling, unmanaged

我有一个导出以下函数的非托管 dll：

```
__declspec(dllexport) BYTE* GetVolumeData(); 
```

`Byte*`是一个字节数组，其中包含我不知道大小的图像数据。我需要从 C# 调用这个函数。我能找到的所有示例，喜欢`Marshal.Copy`或`memcpy`确实需要数组大小（我不知道）。

有什么方法可以在不知道其大小的情况下将 C++ 转换`BYTE*`为 .NET ？`byte[]`

我可以在不复制数据的情况下返回它（类似于参考）吗？

# jquery - jQuery .submit() 在 iPad 上被忽略

> ID：14692523
> 
> 赞同：2
> 
> 时间：2013-02-04T17:53:44.987
> 
> 标签：jquery, ios, ipad, submit

我有一个要通过 jQuery ajax 提交的表单。它适用于除 iPad/iPhone 之外的所有浏览器。我似乎无法弄清楚为什么它不起作用。iPad 完全忽略了来自 ajax 的调用，只是“提交”了表单。

这是该特定部分的java（它已放置在准备好的文档中）：

```
$(".add_to_cart").bind('submit', function(e) {

var productID = $(this).attr('id');
var quantity = $(this).find("#quantity").val();

$.ajax({
    type: 'post',
    url: '/add/',
    data: 'quantity='+quantity+'&product_id='+productID,
    success: function(callback) {
            window.location = '/cart/';
    }

});

e.preventDefault();
}); 
```

这是html

```
<form id="481" class="add_to_cart" method="post">
<input type="hidden" name="product_id" value="481">
<select name="quantity" id="quantity"><option value="1">1</option><option value="2">2</option><option value="3">3</option><option value="4">4</option><option value="5">5</option><option value="6">6</option><option value="7">7</option><option value="8">8</option><option value="9">9</option></select>
<input type="submit" value="Add to cart" />
</form> 
```

我已经尝试过 live、bind 和 submit()。在这个示例中，我已经绑定了，但这也不适用于 iPad 或任何其他 iOS 设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:57:07.660

它实际上可能正在“工作”但出现错误。

事实上，即使是函数中某处的语法错误也会阻止阻止默认值的工作。这就是为什么您总是将 the`e.preventDefault();`视为函数的第一行。这是我建议你先做的。

此外，ajax 调用也可能会出错，请使用错误处理程序来确定：

```
 error: function (request, status, error) {
    alert(request.responseText);
 } 
```

# java - 不使用迭代器从 Vector 中删除元素

> ID：14692526
> 
> 赞同：0
> 
> 时间：2013-02-04T17:53:48.823
> 
> 标签：java, algorithm, collections, iterator

嗨，我正在尝试从向量中删除某些元素。我有一个可行的解决方案，但对我来说它并不优雅或不理想。我在 MIDP 中，所以我无权访问 Iterator 类。任何想法什么是实现它的最佳方式？

当前代码：

```
 int size = myVector.size();
    Object[] copyofObjects = new Window[size];
    myVector.copyInto(copyofObjects);
    boolean didDelete = false;

    for(int i = 0; i < size; i++)
    {
        Object o = copyofObjects[i];
        if(o.shouldBeDeleted())
        {
            myVector.removeElementAt(myVector.indexOf(o));
            continue;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:08:33.053

您可以使用他们在 c++ 中执行此操作的方式（[std::remove_if](http://www.cplusplus.com/reference/algorithm/remove_if/)）。基本思想是将要删除的所有元素推到向量的末尾，然后一次性调整向量的大小。它是这样的：（对不起，如果我的 java 有点生锈了）

```
for (int i = 0 , j = 0; i < size ; i++){
     MyObject o = (MyObject)myVector.get (i);
    if (!o.shouldBeDeleted ()){
        //swap the element
        temp = myVector[i]
        myVector[i] = myVector[j]
        myVector[j] = temp;
        j++;
}
} 
```

所有来自 [0-j[ 的元素都是好元素，来自 [j-size-1[ 的元素是坏元素：

```
myVector.resize(j); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:58:18.690

对我来说最好的方法是：

```
Vector newVector = new Vector ();
for (int count = myVector.size (), i = 0; i < count; i++)
{
    MyObject o = (MyObject)myVector.get (i);
    if (!o.shouldBeDeleted ())
        newVector.add (o);
}
myVector = newVector; 
```

或者，如果您只需要删除很少的元素：

```
for (int i = myVector.size () - 1; i >= 0; i--)
{
    if (((MyObject)myVector.get (i)).shouldBeDeleted ())
        myVector.remove (i);
} 
```

# java - Guice 设计模式：要求显式绑定有什么好处？

> ID：14692527
> 
> 赞同：3
> 
> 时间：2013-02-04T17:53:49.617
> 
> 标签：java, dependency-injection, guice

我对 Guice 比较陌生，所以这可能是基本问题。看起来 Guice 可以选择[要求显式绑定](https://google.github.io/guice/api-docs/latest/javadoc/com/google/inject/Binder.html#requireExplicitBindings--)。要求显式绑定有什么明显的优势吗？有没有人在实践中经常使用这个选项？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-07T21:36:47.603

我们在实践中使用此选项。我们只使用 Guice 将我们的应用程序连接在一起，而不是用于任何类型的每个请求的对象构造。结果，我们的大多数绑定都在单例范围内——例如，我们希望我们的业务逻辑和统计接口都在同一个持久层对象上工作。

在没有显式绑定的情况下，Guice 将尝试使用 JIT 绑定来满足注入点。此绑定将在“无范围”范围内完成，它为每个注入点提供一个新的对象实例。这几乎不是我们想要的，并且会导致奇怪的运行时错误。强制显式绑定迫使人们思考和列举每个绑定的范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-18T14:34:20.067

我最近参加了一个 1 小时的调试会议，因为我们没有使用这个配置。问题是，当我默认需要一个单例时，创建了多个实例。强制显式绑定是一个很好的提醒，要考虑它是否应该是单例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-25T12:39:13.447

我也花了几个小时调试。原因是我忘记将具体类的绑定添加到单例范围。为了始终具有显式绑定，我使用了[如何防止 Guice 注入未在模块中绑定的类的一个答案？](https://stackoverflow.com/questions/12468483/how-do-you-prevent-guice-from-injecting-a-class-not-bound-in-the-module)（不是当前选择的）：（`binder().requireExplicitBindings();`在 AbstractModule 的 configure 方法中）。

# jquery - 未在 Safari 和 IE 中设置 jQuery Cookie

> ID：14692529
> 
> 赞同：1
> 
> 时间：2013-02-04T17:53:55.730
> 
> 标签：jquery, cookies

我使用 jquery.cookie 插件来保存我的应用程序数据，如下所示：

```
$.cookie('cookieTest', 'appDataHere', { expires: 7, path: '/' });
alert( $.cookie("cookieTest") ); 
```

但由于某种原因，上述在 Safari 和 IE 中输出“未定义”。

有任何想法吗？

在 FF 和 Chrome 中运行良好..

# selenium - 无法在 IE 中找到元素，但在 FF 中可以正常工作

> ID：14692533
> 
> 赞同：1
> 
> 时间：2013-02-04T17:54:02.737
> 
> 标签：selenium, css-selectors, selenium-webdriver, xpath

**编辑：**

我的 CSSSelector 是这样的：（在 FF 中运行良好）

```
for (int i = 1; i < _count; i++)
{
    ..................
    ..................
    div#ctl00_ContentPlaceHolder1 table.gv tbody tr.item:nth-child(" + i + ") > td:nth-of-type(3)
    ..................

} 
```

**编辑结束**

我在 FF 中使用 Selenium 2.29 和 IE (8) 和 FF (17.1) 我的所有测试用例都通过了，当我在 IE 中运行时，我的大多数测试用例都失败了，这是错误消息：

```
Test method threw exception: 
OpenQA.Selenium.WebDriverTimeoutException: Timed out after 30 seconds ---> OpenQA.Selenium.NoSuchElementException: 
Unable to find element with css selector == 
```

div#ctl00_ContentPlaceHolder1 table.gv tbody tr.item:nth-child(1) > td:nth-of-type(3)

我正在使用 CSSSelector。

我是否必须更改 CSSSelector 才能使 IE 工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T17:57:55.003

根据：[http ://www.quirksmode.org/css/contents.html#t38](http://www.quirksmode.org/css/contents.html#t38)

IE8 及以下不支持`:nth`选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:58:46.440

IE8 不支持 CSS nth-of-type

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T14:46:46.870

由于 IE8 不支持 :nth 选择器，请尝试注入 Sizzle。Sizzle（jQuery 使用的选择器引擎）带有一个内置的`:nth-child()`选择器，但缺少一个`:nth-of-type()`选择器。尝试`:nth-of-type`用`:nth-child`

# java - Java中的多重继承与否？

> ID：14692537
> 
> 赞同：0
> 
> 时间：2013-02-04T17:54:23.410
> 
> 标签：java, class, inheritance, multiple-inheritance

据说，Java 语言只支持单继承。但是，如何同时从 Object 和任何其他类继承？这不是多重继承吗？

其次，我们为什么需要继承所有 11 个 Object 方法？我几乎无法想象为什么我在 I/O 中需要它们，例如

最后，JDK 8 将为我们提供接口中的默认方法实现，如果这可能会导致 Java 中的多重继承。

如果接口 A 提供了具有默认实现的方法 a() 并且接口 B 还提供了具有另一个默认实现的 a() 方法，而我们的自定义类 C 实现了这两个接口并依赖于默认实现——那不就是[Diamond of Death](http://en.wikipedia.org/wiki/Multiple_inheritance#The_diamond_problem)吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-04T17:56:30.137

> 但是，如何同时从 Object 和任何其他类继承？这不是多重继承吗？

不，这不是发生的事情。并非所有类都直接从类扩展`Object`。但只有继承层次结构顶层的类从`Object`类（*隐式*）扩展。层次结构中较低的其余类从`Object`该类扩展到*超类*。而且，这就是我们所说*的多级继承*。

因此，请考虑以下层次结构：-

```
class A { }

class B extends A { } 
```

在上述情况下，`class A`等价于`class A extends Object`。

> 其次，我们为什么需要继承所有 11 个 Object 方法？我几乎无法想象为什么我在 I/O 中需要它们

我怀疑您说的意思是*override**继承*。您不需要覆盖任何`Object`类的方法。是否覆盖任何方法都取决于您的要求。例如： - 您经常想要覆盖`equals()`方法，以便为您的实例编写自定义相等测试。在这种情况下，您还应该重写该`hashCode()`方法，以维护`equals()`and的合同`hashCode()`。

> 最后，JDK 8 将为我们提供接口中的默认方法实现，如果这可能会导致 Java 中的多重继承。
> 
> 如果接口 A 提供具有默认实现的方法 a() 并且接口 B 还提供具有另一个默认实现的 a() 方法，而我们的自定义类 C 实现了这两个接口并依赖于默认实现——那不就是 Diamond of Death 吗？

我无法评论这个概念，因为我还没有读到这件事。可能，我稍后会更新答案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T18:02:45.667

> 但是，如何同时从 Object 和任何其他类继承？这不是多重继承吗？

除非另有说明，否则类扩展`Object`. 也就是说，这个：

```
class A { ... } 
```

相当于：

```
class A extends Object { ... } 
```

> 其次，我们为什么需要继承所有 11 个 Object 方法？我几乎无法想象为什么我在 I/O 中需要它们，例如

*   `equals()`并`hashCode()`用于比较和哈希表。
*   `notify()`并`wait()`形成了跨线程通信的底层基础。
*   `getClass()`是所有反射代码的起点。

通过将它们放在 上`Object`，它们可以在 JVM 中的每个对象上使用。*您可以获取任何*对象的哈希码和类，可以检查*任何*两个对象之间的相等性，可以监视和通知*任何*对象。

> 如果接口 A 提供具有默认实现的方法 a() 并且接口 B 还提供具有另一个默认实现的 a() 方法，而我们的自定义类 C 实现了这两个接口并依赖于默认实现——那不就是 Diamond of Death 吗？

正如[在 SO 上的另一个问题](https://stackoverflow.com/a/7857884/1321716)中所解释的那样（实际上只是对“jdk8 默认方法”的一次搜索）：

> 为了解决多重继承问题，实现两个接口的类为相同的方法名称和签名提供默认实现，必须提供该方法的实现。

因此，该类必须提供自己的实现，可能委托给默认方法之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T18:04:53.713

您对“死亡钻石”的看法是正确的，但是...

这是 D 实现接口 C 和 B 并且两者都实现 A 的情况。此外，在两个或多个这些接口中定义了默认方法。

![在此处输入图像描述](../Images/4e51780d8c2151a9711def606b0a74bf.png)

在 Java 8 中，他们定义了一种对两个默认方法定义进行排序的方式。

我记得，如果 A 和 B 都定义了默认方法，那么 D 使用 B 的版本，因为它在类层次结构中较低。

如果 B 和 C 都定义了相同的默认方法，则存在冲突，D 将需要自己实现该方法，尽管它可以通过回调在 B 或 C 中实现的版本来实现（或者它可以有条件并使用两者都在不同的情况下）。

```
interface A {  } 
interface B implements A { void m() default {println("In A");} } 
interface C implements A { void m() default {println("In B");} } 
}  
class D implements B, C {  
    public void m() { println("In D"); B.super.m(); } 
} 
```

但是您可以访问 Oracle 的有关 Java 8 新特性的页面并阅读所有相关信息。我通过谷歌搜索“Java 8 新特性”到达了那里。[在http://cr.openjdk.java.net/~briangoetz/lambda/Defender%20Methods%20v4.pdf](http://cr.openjdk.java.net/~briangoetz/lambda/Defender%20Methods%20v4.pdf)找到了我的想法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T17:57:12.527

您继承自一个类，该类继承自对象。Java 不允许您从两个不同的类链继承。但是，解决此问题的方法是使用接口。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T17:58:53.330

> 但是，如何同时从 Object 和任何其他类继承？

你不能这样做，你听错了。

> 其次，我们为什么需要继承所有 11 个 Object 方法？我几乎无法想象为什么我在 I/O 中需要它们，例如

不知道你在说什么。

> 如果接口 A 提供具有默认实现的方法 a() 并且接口 B 还提供具有另一个默认实现的 a() 方法，而我们的自定义类 C 实现了这两个接口并依赖于默认实现——那不就是 Diamond of Death 吗？

对JDK8一无所知，但是您已经可以在两个接口中实现具有相同名称/类型签名的方法，这可能不合逻辑，但Java允许这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T17:59:30.293

首先，Java 中的一切都是对象或原语，所以这里没有问题。Object 是层次结构顶部的类。

目前，您已经可以将多个接口应用到 Java - 然后您编写您的实现。我想在 Java 8 中，如果你定义了你的接口，那么你就有了实现。如果不是，则使用一些默认值。如果定义了多个默认值（或方法由多个接口声明）- 不使用默认值。这可以很简单。

# java - 无法使用 xstream 将 xml 字符串反序列化为扩展 genericType 的对象

> ID：14692545
> 
> 赞同：0
> 
> 时间：2013-02-04T17:55:04.677
> 
> 标签：java, generics, xstream

首先，我想展示用于反序列化 xml 字符串的核心代码

```
 public XMLClient<T> xmlToClient(String xmlString,T t) throws Exception{
    //according to the generic class's name,insert the name after input tag
    //to make the xstream to know which class is going to deserialize to
        String insertClassName = t.getGenericTypeRecord();
        xmlString.replaceAll("<INPUT>", "<INPUT input."+insertClassName+">");
        XMLClient<T> xmlClient = new XMLClient<T>();
        XStream xs = new XStream(new DomDriver());
        xs.processAnnotations(XMLClient.class);
        xmlClient = (XMLClient<T>)xs.fromXML(xmlString);
        logger.info(xmlString);
        return xmlClient;
    } 
```

T 是从超基类扩展而来的一个类。就像

> T 扩展 baseInputXml

但是当应用程序运行在

```
xmlClient = (XMLClient<T>)xs.fromXML(xmlString); 
```

会有错误消息告诉我 XMLClient 中没有匹配的属性。虽然该属性在超 T 类中不存在，但在子 T 类中存在

我希望你能明白我的想法，我真的对这些 genericType 和 xstream 转换感到困惑，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T01:31:32.610

```
xs.processAnnotations(XMLClient.class); 
```

此行应编辑为

```
xs.processAnnotations(XMLClient.class);
xs.processAnnotations(XMLClientsSuperClass.class); 
```

# iphone - 在应用程序运行时阻止 Iphone iOS 中的呼叫和短信

> ID：14692551
> 
> 赞同：0
> 
> 时间：2013-02-04T17:55:40.723
> 
> 标签：iphone, ios, objective-c

在使用应用程序时，我想阻止所有来电和短信。我怎样才能做到这一点？我知道示例链接[http://tech.ruimaninfo.com/?p=83](http://tech.ruimaninfo.com/?p=83)。但是代码中有错误。它至少应该在越狱的iphone上工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T18:05:13.767

以下是我从该网站改编的一些代码，适用于我的非越狱设备：

首先将“CoreTelephony.framework”添加到您的项目中，然后将其导入您的视图控制器，如下所示：

```
#import <CoreTelephony/CoreTelephonyDefines.h> 
```

接下来，添加以下代码：

```
extern NSString const *kCTSMSMessageReceivedNotification;
extern NSString const *kCTSMSMessageReplaceReceivedNotification;
extern NSString const *kCTSIMSupportSIMStatusNotInserted;
extern NSString const *kCTSIMSupportSIMStatusReady;

typedef struct __CTCall CTCall;
extern NSString *CTCallCopyAddress(void*, CTCall *);

void * CTSMSMessageSend(id server,id msg);
typedef struct __CTSMSMessage CTSMSMessage;
NSString *CTSMSMessageCopyAddress(void *, CTSMSMessage *);
NSString *CTSMSMessageCopyText(void *, CTSMSMessage *);

int CTSMSMessageGetRecordIdentifier(void * msg);
NSString * CTSIMSupportGetSIMStatus();
NSString * CTSIMSupportCopyMobileSubscriberIdentity();

id CTSMSMessageCreate(void* unknow/*always 0*/,NSString* number,NSString* text);
void * CTSMSMessageCreateReply(void* unknow/*always 0*/,void * forwardTo,NSString *text);

id CTTelephonyCenterGetDefault(void);
void CTTelephonyCenterAddObserver(id, id, CFNotificationCallback, NSString *, void *,int);
void CTTelephonyCenterRemoveObserver(id,id,NSString*,void*);
int CTSMSMessageGetUnreadCount(void);

void * CTCallDisconnect(CTCall *call);

static void callback(CFNotificationCenterRef center, void *observer, CFStringRef name, const void *object, CFDictionaryRef userInfo) {

    NSString *notifyname = (__bridge NSString *)name;

    if ([notifyname isEqualToString:@"kCTCallIdentificationChangeNotification"]) {

        NSDictionary *info = (__bridge NSDictionary *)userInfo;

        CTCall *call = (__bridge CTCall *)[info objectForKey:@"kCTCall"];

        NSString *caller = CTCallCopyAddress(NULL, call);

        NSLog(@"RECEIVED CALL: %@", caller);

        CTCallDisconnect(call);

    }

}

static void signalHandler(int sigraised) {

    printf("\nInterrupted.\n");
    exit(0);

} 
```

并在 viewDidLoad 或其他一些适当的方法中，添加以下内容：

```
id ct = CTTelephonyCenterGetDefault();
CTTelephonyCenterAddObserver(ct, NULL, callback, NULL, NULL, CFNotificationSuspensionBehaviorHold);

sig_t oldHandler = signal(SIGINT, signalHandler);
if (oldHandler == SIG_ERR) {

    printf("Could not establish new signal handler");
    exit(1);

}

printf("Starting run loop and watching for notification.\n");
CFRunLoopRun(); 
```

目前，此代码只是概念证明，必须扩展以进行错误处理等，但您应该明白这一点。

# ios - 如何将启动图像添加到 Sencha Touch 2 应用程序？

> ID：14692554
> 
> 赞同：4
> 
> 时间：2013-02-04T17:55:57.170
> 
> 标签：ios, extjs, sencha-touch-2

iOS 指南要求所有应用程序的启动图像。据我了解，这是一个位于应用程序根文件夹中的“default.png”文件。
我使用 Sencha CMD v3 打包了我的应用程序，但在加载时我没有看到任何启动图像。
有一些默认启动图像位于 root/webapp/resources/loading/ 文件夹中，但它们没有显示在我的应用程序中。任何想法？

“ [startupImage”](http://docs.sencha.com/touch/2-1/#!/api/Ext.app.Application-cfg-startupImage)似乎只适用于添加到主屏幕的应用程序，无论如何，这是我的 app.js 的一部分：

```
startupImage: {
    '320x460': 'resources/startup/320x460.jpg',
    '640x920': 'resources/startup/640x920.png',
    '768x1004': 'resources/startup/768x1004.png',
    '748x1024': 'resources/startup/748x1024.png',
    '1536x2008': 'resources/startup/1536x2008.png',
    '1496x2048': 'resources/startup/1496x2048.png'
} 
```

添加了相关帖子：

*   [[2.1] Android 和 iOS 开机启动画面为白色](http://www.sencha.com/forum/showthread.php?252028-2.1-Splash-screen-is-white-on-startup-on-Android-and-iOS)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T16:39:36.643

我在我的应用程序开始时有这个 - 我没有为 iOS 打包它，但这似乎是你可能需要的：

```
Ext.require([    
    'Ext.XTemplate',
    'Ext.Panel',
    'Ext.Button',
    'Ext.List'
]);

// Main application entry point
Ext.application({
    phoneStartupScreen: 'images/sencha_logo.png',
    name: 'Analytics',

// setup our MVC items 
```

这是一个方便的 api 文档链接：

[http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-cfg-phoneStartupScreen](http://docs.sencha.com/touch/2-0/#!/api/Ext.app.Application-cfg-phoneStartupScreen)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-21T06:29:47.353

对于启动图像，您需要修改应用目录中的**index.html 。**在这里，您会在**body**标签内找到一个 ID**为 appLoadingIndicator的 div。**在我的应用程序中，我已将 #appLoadingIndicator 的内容替换为 img 标记，该标记引用我的启动图像。

 **```
<div id="appLoadingIndicator">
  <img src="resources/images/splash.png" /> 
</div> 
```

为了自定义 css，您可能希望删除**index.html**中的默认嵌入样式，这些样式存在于 head 标记内的 style 标记中，这些样式应用于**#appLoadingIndicator**。

现在添加您的自定义 css，您将准备好启动图像。**

# jsf - 注释掉的 Facelets 代码仍然调用 EL 表达式，如 #{bean.action()} 并在 #{bean.action} 上导致 javax.el.PropertyNotFoundException

> ID：14692560
> 
> 赞同：8
> 
> 时间：2013-02-04T17:56:25.490
> 
> 标签：jsf, comments, el, facelets, propertynotfoundexception

我的 Facelet 中有以下代码片段：

```
<h:commandLink id="cmdbtn">
    <f:ajax event="click" execute="@form"
            listener="#{screenShotBean.takeScreenshot}" />
</h:commandLink> 
```

它工作正常，但是当我这样评价它时，

```
<!--        <h:commandLink id="cmdbtn"> -->
<!--            <f:ajax event="click" execute="@form" -->
<!--                    listener="#{screenShotBean.takeScreenshot}" /> -->
<!--        </h:commandLink> --> 
```

然后它抛出以下异常：

```
javax.el.PropertyNotFoundException: Property 'takeScreenshot' not found on type monstage.test.com.ScreenShotBean
    at javax.el.BeanELResolver$BeanProperties.get(BeanELResolver.java:237)
    at javax.el.BeanELResolver$BeanProperties.access$400(BeanELResolver.java:214)
    at javax.el.BeanELResolver.property(BeanELResolver.java:325)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:85)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELResolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELResolver.java:203)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:217)
    at com.sun.faces.facelets.el.ELText$ELTextComposite.toString(ELText.java:157)
    at com.sun.faces.facelets.compiler.CommentInstruction.write(CommentInstruction.java:77)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:82)
    at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:183)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1779)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1782)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:424)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:125)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:594) 
```

当我用括号更改方法表达式时，如下所示，

```
<!--        <h:commandLink id="cmdbtn"> -->
<!--            <f:ajax event="click" execute="@form" -->
<!--                    listener="#{screenShotBean.takeScreenshot()}" /> -->
<!--        </h:commandLink> --> 
```

然后不抛出异常，但它仍然被调用。

这是如何引起的，我该如何解决？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-02-04T18:21:34.167

仔细查看堆栈跟踪。这是相关部分：

```
...
org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
com.sun.faces.facelets.el.ELText$ELTextVariable.toString(ELText.java:217)
com.sun.faces.facelets.el.ELText$ELTextComposite.toString(ELText.java:157)
com.sun.faces.facelets.compiler.CommentInstruction.write(CommentInstruction.java:77)
... 
```

因此，它在注释块中评估 EL（可通过 识别`CommentInstruction`）。注释块被视为模板文本。`#{}`默认情况下，Facelets 也在模板文本中评估 EL 。就像您在`<p>#{screenShotBean.takeScreenshot}</p>`没有任何 JSF 标记的情况下编写一样。

你有几个选择：

1.  完全删除评论块。

2.  `\`通过在注释中添加前缀来 转义 EL 表达式

    ```
    \#{screenShotBean.takeScreenshot} 
    ```

    这样他们就不会被评估。

3.  将整个注释块包裹起来，[`<ui:remove>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/ui/remove.html)这样它就不会出现在组件树中（也不会出现在生成的 HTML 输出中）。

4.  通过将以下上下文参数添加到，禁用 Facelets 对**所有**`web.xml`注释的解析：

    ```
    <context-param>
        <param-name>javax.faces.FACELETS_SKIP_COMMENTS</param-name>
        <param-value>true</param-value>
    </context-param> 
    ```

    请注意，没有任何评论会以这种方式生成 HTML 输出。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-09-21T14:10:56.160

除了[BalusC 已经提供的选项](https://stackoverflow.com/a/14692966/880619)之外，您还可以将属性添加`rendered="false"`到您的`commandLink`.

如果您希望能够快速切换多个组件，则可能需要考虑在 bean 中创建调试属性或使用项目阶段：

```
rendered="#{facesContext.application.projectStage == 'Development'}" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-29T17:37:13.277

您还可以使用在 web.xml 中跳过注释的上下文参数。

这是参数：

```
javax.faces.FACELETS_SKIP_COMMENTS 
```

# spring - 如何覆盖范围 bean 进行测试？

> ID：14692561
> 
> 赞同：5
> 
> 时间：2013-02-04T17:56:26.963
> 
> 标签：spring, proxy, scope, javabeans

我的 Spring Java 配置中有这个 bean：

```
@Bean
@Scope( proxyMode=ScopedProxyMode.TARGET_CLASS, value=SpringScopes.DESKTOP )
public BirtSession birtSession() {
    return new BirtSession();
} 
```

对于测试，我需要一个没有范围的模拟（测试中没有“桌面”范围）。但是当我为我的测试创建一个配置时，它会导入上述配置并包含：

```
@Bean
public BirtSession birtSession() {
    return new MockSession();
} 
```

我得到了一个“桌面”范围的模拟 bean :-(

如何让 Spring“忘记”`@Scope`注释？

PS：当我不使用`@Import`和使用复制和粘贴但我不想这样做时它可以工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:10:56.043

问题似乎`ConfigurationClassBeanDefinitionReader.loadBeanDefinitionsForBeanMethod()`在于使用`ScopedProxyCreator.createScopedProxy()`静态方法来创建作用域 bean 定义：

```
// replace the original bean definition with the target one, if necessary
        BeanDefinition beanDefToRegister = beanDef;
        if (proxyMode != ScopedProxyMode.NO) {
            BeanDefinitionHolder proxyDef = ScopedProxyCreator.createScopedProxy(
                    new BeanDefinitionHolder(beanDef, beanName), this.registry, proxyMode == ScopedProxyMode.TARGET_CLASS);
            beanDefToRegister = proxyDef.getBeanDefinition();
    } 
```

由于`BeanDefinitionHolder`返回 a`RootBeanDefinition`而不是`ConfiguratioClassBeanDenition`作用域代理 bean 定义（即`ScopedProxyFactoryBean`）不能被另一个 Java 配置类覆盖。

一种解决方法可能是在 xml 配置文件中声明要覆盖的范围 bean 并将其导入`@ImportResource.`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:27:53.510

问题不在于 Spring 保留注释，问题在于 Spring 首先尝试解析“生产性”配置，为了做到这一点，它检查范围是否可用。Spring 急切地检查范围。所以它永远不会到达第二个/覆盖 bean 定义。

创建一个虚拟范围：

```
import java.util.HashMap;
import java.util.Map;
import org.springframework.beans.factory.ObjectFactory;

public class MockSpringScope implements org.springframework.beans.factory.config.Scope {

    private Map<String, Object> objects = new HashMap<String, Object>();

    @Override
    public Object get( String name, ObjectFactory<?> objectFactory ) {
        Object result = objects.get( name );
        if( null == result ) {
            result = objectFactory.getObject();
            objects.put( name, result );
        }
        return result;
    }

    @Override
    public Object remove( String name ) {
        return objects.remove( name );
    }

    @Override
    public void registerDestructionCallback( String name, Runnable callback ) {
        // NOP
    }

    @Override
    public Object resolveContextualObject( String key ) {
        // NOP
        return null;
    }

    @Override
    public String getConversationId() {
        // NOP
        return null;
    }

} 
```

并将其注册为“桌面”范围。这将 Spring 允许成功解析生产配置。

# inno-setup - Inno setup 编译器：不同语言的不同类型描述

> ID：14692567
> 
> 赞同：3
> 
> 时间：2013-02-04T17:56:48.907
> 
> 标签：inno-setup, pascal

我正在尝试使用“Inno Setup Compiler 5.5.3 (a)”编译安装程序。我已经包含了 2 种不同的语言（对特定语言使用默认的 .isl），但不是我无法弄清楚如何以不同的方式更改我拥有的每种类型的“描述”字段（即“完整”、“紧凑”和“自定义”）对于每种语言，但保留任何其他功能，即类型的“名称”应保持不变。我的代码现在看起来像这样：

```
[Languages]
Name: "en"; MessagesFile: "compiler:Default.isl"
Name: "sl"; MessagesFile: "compiler:Slovenian.isl"

[Types]
Name: "full"; Description: "Full installation"; Languages: en 
Name: "compact"; Description: "Compact installation"; Languages: en
Name: "custom"; Description: "Custom installation"; Languages: en; Flags: iscustom 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T18:21:05.033

不要使用该`[Types]`部分的语言参数，除非您希望某些安装程序类型仅适用于特定语言或语言集。

要为显示的类型名称提供翻译，请使用该[`[CustomMessages]`](http://www.jrsoftware.org/ishelp/topic_custommessagessection.htm)部分，如下所示：

```
[CustomMessages]
en.TypeFullDesc=Create a &desktop icon
es.TypeFullDesc=Crear ícono en el &escritorio
sl.TypeFullDesc=The way you say create desktop icon in Slovenian

[Tasks]
Name: "full"; Description: {cm:TypeFullDesc}; 
```

CustomMessages 部分中的前缀用于标识条目适用于哪种语言。

# php - 用 php 发送电子邮件 - swiftmailer

> ID：14692573
> 
> 赞同：1
> 
> 时间：2013-02-04T17:57:14.560
> 
> 标签：php, email, swiftmailer

在用户完成我的表单后，我一直在寻找如何在 php 中自动发送简单电子邮件的几天甚至几周。我尝试过 Pear、PHP 邮件、Swiftmailer，更改了我的 php.ini，尝试了不同的服务器，但我都因为没有工作而发疯。我还没有成功发送一封电子邮件。我无休止地搜索，但我仍然不知道该做什么以及为什么没有任何工作。目前我正在使用 Swiftmailer（第二轮）。我用代码设置了一个测试页面：

```
<?php
require_once 'swift/lib/swift_required.php';

// CREATE TRANSPORT CONFIG
$transport = Swift_MailTransport::newInstance();

// CREATE MSG
$message = Swift_Message::newInstance();

// SET PRIORITY TO HIGH
$message->setPriority(2);

// SUBJECT
$message->setSubject('Subject');

// FROM
$message->setFrom(array('example@btopenworld.com'));

// TO
$message->setTo(array('example@googlemail.com'));

// EMAIL BODY
$message->setBody('Test');

// SEND
$mailer = Swift_Mailer::newInstance($transport);
$mailer->send($message);

if (!$mailer->send($message, $failures)) {
echo "Failures:";
print_r($failures);
}

?> 
```

看一个类似的帖子有人建议代码的最后一部分来查看错误，我的错误是：

```
Failures:Array ( [0] => example@googlemail.com ) 
```

无论我将其更改为什么电子邮件（全部使用我拥有的电子邮件，所以是真实的电子邮件），它都不起作用。如果有人有任何帮助或建议，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:59:58.227

`example@btopenworld.com`

除非您使用 btopenworld 服务器来发送电子邮件，否则这是行不通的。电子邮件 `from`地址需要与您发送消息的服务器相关联。您可以将BT地址放入`reply-to`标头中。

此外，SwiftMailer 应该有一个“调试”开关，可以准确地告诉你出了什么问题，但我现在在文档中找不到它。[这](http://swiftmailer.org/docs/plugins.html#logger-plugin)是一个 Swiftmailer 的记录器插件，如果其他所有方法都失败了，它应该会有所帮助。

# facebook - 请验证我对扩展 Facebook 访问令牌的理解

> ID：14692579
> 
> 赞同：0
> 
> 时间：2013-02-04T17:57:23.840
> 
> 标签：facebook, oauth

我有一个应用程序，它将在多个用户个人资料页面和粉丝页面上发布帖子。

为了获得执行此操作的权限，应用程序将处理客户端身份验证并为使用该应用程序的每个用户获取短期访问令牌。

然后，我的应用程序将立即将其交换为 60 天的长期访问令牌，并将其存储在本地数据库中以备将来使用。然后，该应用程序将能够在长达 60 天的时间内更新该用户的个人资料和页面，无论用户是否登录 FB。

下一点是重要的一点：

每次用户使用我的应用程序时，我的应用程序都会测试当前访问令牌的有效性，以防用户更改密码等，或者 60 天已过。

如果访问令牌不再有效，我的应用程序将寻求获得一个新的。

如果用户此时*未登录*Facebook，据我了解，我将不得不提示登录并强制客户端身份验证，以获取新的短期访问令牌，我必须将其换成新的 60天长命的令牌。

这个对吗？即用户必须再次登录？即没有办法在服务器端处理 access_token 更新？

此外，60 天到期是否仅适用于用户访问令牌，而不适用于页面访问令牌？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:01:42.697

> 这个对吗？即用户必须再次登录？即没有办法在服务器端处理 access_token 更新？

不，您首先需要一个有效的短期用户访问令牌，并且您需要通过客户端登录过程。

> 此外，60 天到期是否仅适用于用户访问令牌，而不适用于页面访问令牌？

正确，默认情况下页面令牌不会过期，如果它们是使用*长期*用户访问令牌获得的。

# visual-studio-2010 - 程序集致命错误 LNK1190：找到无效修复，类型 0x0001

> ID：14692582
> 
> 赞同：2
> 
> 时间：2013-02-04T17:57:50.457
> 
> 标签：visual-studio-2010, assembly, x86, masm

我想在 Visual Studio 2010 中编写 16 位 8086 汇编代码，但给了我错误：代码：

```
.MODEL small
.STACK 100h
.data
message BYTE "Hello, world!","$"
.code
mov ah,9
mov dx,OFFSET message ; addr of buffer
int 21h
END 
```

输出给了我这个错误：

```
fm.obj : fatal error LNK1190: invalid fixup found, type 0x0001 
```

我使用**masm32v11**。我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-05T03:36:05.573

汇编器在哪里知道起始地址在哪里？使用`Microsoft (R) Segmented Executable Linker Version 5.60.339 Dec 5 1994`（16 位链接器）并添加`start`和`end start`代码汇编和链接就好了。MASM32 在 bin 目录中包含一个 16 位链接器。但是，您**必须**将不同的命令行参数传递给 ML 才能正确组装 16 位代码。

```
.MODEL small
.STACK 100h
.data
message BYTE "Hello, world!","$"
.code
start:
mov ah,9
mov dx,OFFSET message ; addr of buffer
int 21h
END start 
```

回顾一下 - 您的代码需要一个起始地址和一个结束地址，您可以使用 MASM32 随附的当前 ML 来组装 16 位和 32 位代码。要链接 16 位代码，您必须使用 16 位链接器，要链接 32 位代码，您必须使用 32 位链接器。

从我的 16 位 DOS 应用程序之一：

```
ML.EXE /DMASM /DDOS /Zm /c /nologo /I"f:\masm32\Include" "dosdisplay.asm"
link16.exe /NOLOGO "dosdisplay.obj" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T17:41:16.583

使用以下命令编译：

> ml.exe /omf 文件名.asm
> 
> link16.exe 文件名.obj

**信息：**

当您在没有任何特定参数的情况下调用 ml.exe 时，它​​生成的目标文件类型将采用 coff 格式。coff 格式名称修改要求您的代码应具有“_start”和“end _start”。您所写的内容适用于英特尔的 omf 目标文件。

# twitter-bootstrap - Marionette.js Region 的 $el 没有模态？

> ID：14692592
> 
> 赞同：0
> 
> 时间：2013-02-04T17:58:28.400
> 
> 标签：twitter-bootstrap, marionette

我得到的错误来自 onShow 函数的最后一行：

```
 //modalregion: shows a modal detail view in bootstrap modal
var ModalRegion = Marionette.Region.extend({
    el: "#modal",

    onShow :  function(view) {
        view.on("close", this.hideModal,this);
        this.$el.modal('show'); //<- **throws TypeError: Object [object Object] has no method 'modal'** 
    },

    hideModal: function() {
        this.$el.modal('hide'); // bootstrap modal
    }
}); 
```

[我看到其他帖子有相同形式的错误](https://stackoverflow.com/questions/11220670/unable-to-call-bootstrap-modal-window-using-javascript-in-chrome-works-in-firef) Object [object Object] has no method 'XXXX'

他们的解决方案是“停止加载 jquery 两次”。我正在使用 require.js，所以这不应该发生，但我检查了 Crome Dev 工具上的 Network 选项卡，没有加载两次。

this.$el 在调试器中定义，但不使用 modal 作为函数：

```
this.$el: jQuery.fn.jQuery.init
0: div#modal
context: #document
length: 1
selector: "#modal"
...snip...
load: function ( url, params, callback ) {
map: function ( callback ) {
mousedown: function ( data, fn ) {
mouseenter: function ( data, fn ) {
mouseleave: function ( data, fn ) {
mousemove: function ( data, fn ) {
mouseout: function ( data, fn ) {
mouseover: function ( data, fn ) {
mouseup: function ( data, fn ) {
next: function ( until, selector ) { 
```

有没有我错过的步骤？

谢谢，

安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T13:46:14.340

该区域是一个 jQuery 选择器对象，如果没有jQueryUI 或 KendoUI 之类的插件或其他提供模态功能的插件`$el`，jQuery 不会在此对象上提供函数。`modal`

提供该`modal`功能的插件未加载到您的页面中。您将需要该插件。

# objective-c - INSERT 语句 sqlite3 目标-c

> ID：14692594
> 
> 赞同：0
> 
> 时间：2013-02-04T17:58:41.340
> 
> 标签：objective-c, sqlite

希望我的问题有一个简单的解决方案。我刚刚开始使用 sqlite3，我创建了一个名为的数据库`local`和一个名为的表，其中包含一个名为text`table`的列。`name`

它可以很好地连接到数据库，只是我试图将字符串值输入到表列中，但我认为我的 INSERT 文本存在问题。我知道如果有人能让我知道我哪里出错了，这可能很简单。谢谢。

```
SString *inserStmt = [NSString stringWithFormat:@"INSERT INTO TABLE(NAME) VALUES ('%s')", [key UTF8String]];
const char *insert_stmt = [inserStmt UTF8String];

sqlite3_exec(database, insert_stmt, NULL, NULL, NULL); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:10:33.770

您的第一个问题是您忽略任何错误并且不显示错误消息，因此如果出现问题，您将毫无头绪。

您的第二个问题是`TABLE`关键字；要将其用作 SQL 语句中的名称，您必须使用双引号对其进行转义：

```
INSERT INTO "TABLE"(NAME) VALUES('...') 
```

# java - 对多数据类型字符串进行排序

> ID：14692597
> 
> 赞同：0
> 
> 时间：2013-02-04T17:58:48.443
> 
> 标签：java, sorting

有没有办法对包含多种数据类型的单个字符串进行排序？

示例： //一个包含 int 和 words(strings) 的字符串 String str1 = "1 one 2 two t"; String str2 = "1 二 3 二 t"; String str3 = "1 三 1 二 t";

假设我想按这三个字符串中的第二个 int 对其进行排序。

有没有办法告诉java搜索字符串的特定部分？

所以我想要的输出是这样的列表：

```
str3
str1
str2

or 

"1 three 1 two t"
"1 two 2 two t"
"1 one 3 two t" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:00:44.323

对单个进行排序是什么意思`String`？您应该将字符串拆分为要排序的任何分组，然后对其进行排序。如果您的数据具有特定格式，您应该编写一个简短的、简单`class`的包含拆分为适当字段的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:07:12.000

在你编辑你的问题之前，我假设你有一个字符串列表，就像你的问题中定义的那样。

在这种情况下，您可以使用自己的 Comparator 执行此操作，没有错误检查，但您会看到这个想法：

```
class CustomComparator implements Comparator<String> {
     public int compare(String s1, String s2) {
         String[] parts1 = s1.split(" ");
         String[] parts2 = s2.split(" ");
         Integer i1 = Integer.valueOf(parts1[2]);
         Integer i2 = Integer.valueOf(parts2[2]);
         return i1.compareTo(i2);
    }
}
Collections.sort(Arrays.asList("3 three 4 four", "1 one 2 two", "5 five 6 six"), new CustomComparator()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:07:37.067

编写您自己的比较器，根据需要比较字符串。像这样的东西：

```
String [] values = new String [] {"foo 7 bar 3 foobar", "why 2 by 2 is 4?"};
Arrays.sort (values, new Comparator <String> ()
{
    @Override
    public int compare (String o1, String o2)
    {
        return extract2ndInt (o1).compareTo (extract2ndInt (o2));
    }

    private Integer extract2ndInt (String s)
    {
        Matcher m = Pattern.compile ("\\d+").matcher (s);
        m.find ();
        m.find ();
        return Integer.parseInt (m.group ());
    }
});
System.out.println (values [0]);
System.out.println (values [1]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T18:09:51.133

我可以想到几种方法来做到这一点。

## 正确的方式

第一步 - 停止使用字符串。你自己承认，这个字符串“包含多种变量类型”。那不是字符串，它是一个类（字符串只是`char`s 的序列）。实际上这样表示它不仅会使这种情况更容易（并且更不容易出错），而且会在您需要使用它们的任何其他地方支付类似的红利。

因此，定义一些封装所涉及的数据类型的类，例如：

```
public class MyFoo {
    final int firstNum;
    final String firstDesc;
    final int secondNum;
    final String secondDesc;
    final boolean trueFalseBit;

    // Constructor, equals, hashcode etc. elided
} 
```

然后，每当您第一次获得像`str1`传递到系统中的字符串时，通过标记化将其转换为实例`MyFoo`，将标记转换为整数等 - 适合字符串格式的任何内容。

现在您已经有了一个具有不同具体类型字段的实际类，您可以正确地考虑按这些字段中的一个或多个进行排序。那么有两种方法可以做到这一点。

首先，您可以让您的类实现`Comparable`并定义一个`compare`按此顺序排序的方法。只有当这是您的实例的“自然排序”时，这才真正有意义；在大多数情况下，作为默认排序是有意义的。

否则，您可以定义自己的 实例`Comparator<MyFoo>`，它使用您喜欢的任何顺序对对象进行排序。使用我上面的类的一个例子可能是：

```
Comparator<MyFoo> cmp = new Comparator<MyFoo>() {
    public int compare(MyFoo a, MyFoo b) {
       return b.secondNum - a.secondNum;
    }
} 
```

## 骇客之道

只需编写一个自定义`Comparator<String>`来提取每个字符串的“第二个 int”，并相应地对它们进行排序。如果要将这些字符串转换为类，这将类似于您将使用的解析代码 - 可能类似于：

```
Comparator<String> cmp = new Comparator<String>() {
    private int getSecondInt(String s) {
        String[] parts = s.split(" ");
        // TODO check length is at least 3
        return Integer.parseInt(parts[2]);
        // TODO handle exceptions
    }

    public int compare(String a, String b) {
       return getSecondInt(b) - getSecondInt(a);
    }
} 
```

如果您只是使用这些字符串一次进行排序然后将它们丢弃，那么这种方式可能更有意义 - 因此构建完整对象几乎没有什么好处。

# sql - 在 SQL 中将变量传递给.exe

> ID：14692598
> 
> 赞同：2
> 
> 时间：2013-02-04T17:58:49.343
> 
> 标签：sql, sql-server

贴花变量后。如何将其传递给 .exe？我下面的代码不起作用。

```
DECLARE @ODBCConn varchar(10)
SET @ODBCConn = 'TestDb'

EXECUTE master..xp_cmdshell '"C:\tmt.exe"' + @ODBCConn 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:00:38.060

看起来您只是在 exe 名称后缺少一个空格。

```
EXECUTE master..xp_cmdshell '"C:\tmt.exe "' + @ODBCConn 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-04T19:06:35.260

将参数传递给存储过程时不能执行连接；参数必须是*值*，而不是会产生值的*表达式*...

相反，在调用之前执行连接：

```
DECLARE @ODBCConn varchar(10)
SET @ODBCConn = 'TestDb'

DECLARE @Cmd varchar(500)
SET @Cmd = '"C:\tmt.exe" ' + @ODBCConn

EXECUTE master..xp_cmdshell @Cmd 
```

# java - 使用 Java 7 NIO 从类路径读取文件

> ID：14692600
> 
> 赞同：16
> 
> 时间：2013-02-04T17:58:56.380
> 
> 标签：java, io, classpath, java-7

我已经为此搜索了很长时间，但所有结果都指向 Java 7 之前的 NIO 解决方案。我已经使用[NIO 的东西](http://docs.oracle.com/javase/tutorial/essential/io/file.html)从文件系统上的特定位置读取文件，这比以前容易多了（`Files.readAllBytes(path)`）。现在，我想读入一个打包在我的 WAR 和类路径中的文件。我们目前使用类似于以下的代码来执行此操作：

```
Input inputStream = this.getClass().getClassLoader().getResourceAsStream(fileName);
ByteArrayOutputStream byteStream = new ByteArrayOutputStream();

/* iterate through the input stream to get all the bytes (no way to reliably find the size of the 
 *     file behind the inputStream (see http://docs.oracle.com/javase/6/docs/api/java/io/InputStream.html#available()))
 */
int byteInt = -1;
try
{
    byteInt = inputStream.read();
    while (byteInt != -1)
    {
        byteStream.write(byteInt);
        byteInt = inputStream.read();
    }

    byteArray = byteStream.toByteArray();
    inputStream.close();
    return byteArray;
}
catch (IOException e)
{
    //...
} 
```

虽然这可行，但我希望有一种更简单/更好的方法来使用 Java 7 中的 NIO 东西来做到这一点。我猜我需要在类路径上获取一个表示该路径的[Path](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Path.html)对象，但我是不知道该怎么做。

如果这是一些超级简单的事情，我深表歉意。我就是想不通。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2015-03-04T16:51:57.047

这对我有用。

```
import java.nio.file.Files;
import java.nio.file.Paths;

// fileName: foo.txt which lives under src/main/resources
public String readFileFromClasspath(final String fileName) throws IOException, URISyntaxException {
    return new String(Files.readAllBytes(
                Paths.get(getClass().getClassLoader()
                        .getResource(fileName)
                        .toURI())));
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T18:24:52.740

Path 代表文件系统上的一个文件。从类路径中读取资源没有帮助。您正在寻找的是一个辅助方法，它从流中读取所有内容（比您的操作更有效）并将其写入字节数组。Apache commons-io 或 Guava 可以帮助你。以番石榴为例：

```
byte[] array = 
    ByteStreams.toByteArray(this.getClass().getClassLoader().getResourceAsStream(resourceName)); 
```

如果您不想仅仅为此将 Guava 或 commons-io 添加到您的依赖项中，您可以随时阅读它们的源代码并将其复制到您自己的辅助方法中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-04T18:24:43.163

据我了解，你想要的是打开`ReadableByteChannel`你的资源，所以你可以使用 NIO 来阅读它。

这应该是一个好的开始

```
// Opens a resource from the current class' defining class loader
InputStream istream = getClass().getResourceAsStream("/filename.txt");

// Create a NIO ReadableByteChannel from the stream
ReadableByteChannel channel = java.nio.channels.Channels.newChannel(istream); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T18:22:15.350

你应该看看`ClassLoader.getResource()`。这将返回一个代表资源的 URL。如果它是文件系统的本地文件，它将是一个`file://`URL。那时你可以去掉方案等，然后你就有了文件名，你可以用它做任何你想做的事情。

但是，如果它不是 file:// 路径，那么您可以回退到正常的 InputStream。

# c# - 如何更改列值以在绑定 DataGridView 中显示不同的值？

> ID：14692603
> 
> 赞同：0
> 
> 时间：2013-02-04T17:59:13.810
> 
> 标签：c#, winforms, list, data-binding, datagridview

我有一个`dataGridView`，它是绑定到某些的数据`generic List<T>`（而 T 是一些具有属性的自定义类）。问题是其中一个属性是 的类型`integer`，它代表分钟。将 List 绑定到 dataGridView 后，我希望该列默认显示小时，而不是分钟。

如何改变某些列的行为，使用一些数学来显示一些不同的值？

我必须在`DataGridView.CellFormating`活动中这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:13:16.400

您有两个选择，第一个是操作您的`Generic List<T>`第一个，这应该比使用第二个选项更快，遍历每个`RowDataBound Event`.

*   **使用`RowDataBound`事件**

    protected void gridview1_RowDataBound(object sender, GridViewRowEventArgs e) { if (e.Row.RowType == DataControlRowType.DataRow) { int minutes = int.Parse(e.Row.Cells[YourColumnIndex].Text); 小数小时 = 分钟 / 60；
    e.Row.Cells[YourColumnIndex].Text = hours.ToString(); } }

*   **使用`Evel`表达式**

ASPX 页面

```
<asp:TemplateField HeaderText="Time">
            <ItemTemplate>
                    <%# ConvertToHours(Eval("Minutes"))%>
            </ItemTemplate>
</asp:TemplateField> 
```

代码背后

```
private string ConvertToHours(object objMin)
{
    if (Convert.ToInt32(objMin) == 1)
    {
        return (int.Parse(objMin) / 60).ToString();
    }
    else
    {
        return "0";
    }
} 
```

**另一种方法。**- 一次性完成所有操作。

```
<asp:TemplateField HeaderText="Time">
<ItemTemplate>
<asp:Label ID="lblTime" runat="server" Text='<%# Convert.ToInt32(Eval("Time")) Convert.ToInt32("60")%>'></asp:Label>
</ItemTemplate>
</asp:TemplateField> 
```

**更新：**随着问题的更新，您应该使用 Windows 窗体应用程序`DataGridView.CellFormatting Event`

```
private void dataGridView1_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    // If the column is the Time column, check the 
    // value. 
    if (this.dataGridView1.Columns[e.ColumnIndex].Name == "Time")
    {
        if (e.Value != null)
        {
             //Your implementation.
        }
    }
} 
```

# ios - iOS RSS 表格图片预览

> ID：14692604
> 
> 赞同：0
> 
> 时间：2013-02-04T17:59:15.327
> 
> 标签：ios, parsing, uiimage, imageview

我想在我的表格单元格上放置一个图像预览，该单元格源自它们在推送到时加载的 RSS 项目。

我不确定对 cell.imageView.image 使用什么 UIImage 方法....

现在有了...

```
 imageWithContentsOfFile 
```

，它不会崩溃，但也不会显示任何内容，因为....

我还想知道如何最好地从 html 块中获取图像数据，因为我正在使用开源解析器（我应该尝试将它放在其中，还是创建我自己的类以从描述字符串中派生它解析器创建的？

我更喜欢尝试创建自己的解决方案，而不是用一百个开源库文件填充我的项目。

谢谢你的想法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:00:54.267

```
UIImage* myImage = [UIImage imageWithData: 
[NSData dataWithContentsOfURL: [NSURL URLWithString: @"http://example.com/image.jpg"]];
cell.imageView.image = myImage; 
```

# eclipse - Eclipse 包资源管理器在编译有问题的 java 文件时不显示 X 图标

> ID：14692605
> 
> 赞同：1
> 
> 时间：2013-02-04T17:59:17.077
> 
> 标签：eclipse, compiler-errors, package-explorer

我已经从官方网站下载了一个全新的 Eclipse。这太好了。

问题是，当我更改某些 java 文件导致另一个 java 文件中的编译错误时，包资源管理器不会在错误文件上显示小 X 图标。

当我打开出错的文件时，编辑器发现那里有错误，用红色标记有问题的行。但是，在包资源管理器中 - 什么都没有。

当我更改文件并再次保存时，它才会在包资源管理器上显示 X 图标。

我检查了项目菜单上的“自动构建”...

有谁知道出了什么问题，或者曾经解决过这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-03T21:34:41.910

转到控制台点击旁边的问题点击，右键单击它并在 PackageExplorer 中选择显示

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:51:03.273

我找到了。

我必须打开项目属性-> 构建器，并且必须只选择“java builder”，然后删除我在那里拥有的另一个 ANT 构建器。

然后它立即起作用。

:)

# java - 如何使用 Selenium WebDriver 和 Java 将鼠标悬停在 web 元素上

> ID：14692607
> 
> 赞同：2
> 
> 时间：2013-02-04T17:59:20.897
> 
> 标签：java, selenium-webdriver

如何使用 Selenium Webdriver 执行鼠标悬停功能？

测试用例就像说，打开雅虎网站，登录旁边有链接（邮件）。鼠标悬停时，它将显示一个工具提示。

当我尝试下面的代码时，它不是鼠标悬停在确切的位置，而是悬停在其他地方。我哪里错了？

还让我知道，如何捕获工具提示？

```
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.interactions.Actions;

public class Sample 
{
    public static void main(String[] args) 
    {
        WebDriver driver=new FirefoxDriver();
        driver.get("http://www.yahoo.com");

        driver.manage().window().maximize();

        try 
                {
            Thread.sleep(5000);
        } catch (InterruptedException e)
                {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        WebElement lMail=driver.findElement(By.xpath("//*[@title='Mail']"));

        Actions builder=new Actions(driver);
        builder.moveToElement(lMail).build().perform();

    }

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-05T13:20:57.487

```
Actions actions = new Actions(driver);
actions.moveToElement(element).click().build().perform(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T06:11:31.460

**试试这个代码：**

```
//Assume driver initialized properly.
WebElement element = driver.findElement(By.id("Element id"));
Locatable hoverItem = (Locatable) element;
Mouse mouse = ((HasInputDevices) driver).getMouse();
mouse.mouseMove(hoverItem.getCoordinates()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T19:29:52.957

我使用了类似的代码，它对我有用。我还在几个地方使用了以下内容： browser.executeScript("jQuery('mycss-selector').mouseover();") 您将不得不使用 css-selector，而不是 xpath。

# ajax - 如何通过ajax在jqgrid中加载数据（json）？

> ID：14692608
> 
> 赞同：1
> 
> 时间：2013-02-04T17:59:24.610
> 
> 标签：ajax, json, jqgrid

我需要在 ajax 调用后填充 jqgrid。

我有一个返回此 json 格式的函数（在 java servelet 中）：

```
[{"citta":"XXXX","via":"XXX","telefono":"1111-11111","provincia":"XX","clienteDesc":"Prova","clienteCode":"XXXXX"}] 
```

我将此代码用于jqgrid：

```
 $("#clienti-navgrid").jqGrid( { 
                            //data: c
                            //datatype: "local"
                            datatype: "json",
                url: '/project/loadnotespese.do',
                colNames:['Codice Cliente','Descrizone Cliente','Via','Città','Provincia','Telefono'],                
                colModel:[
                        {name:'clienteCode', index:'clienteCode', width:'10', sortable:false},  
                        {name:'clienteDesc', index:'clienteDesc', width:'20', sortable:false}, 
                        {name:'via', index:'via', width:'30', sortable:false},  
                        {name:'citta', index:'citta', width:'20', sortable:false},
                        {name:'provincia', index:'provincia', width:'10', sortable:false}, 
                        {name:'telefono', index:'telefono', width:'10', sortable:false} 
                ],
                rowNum:500,
                autowidth:true,
                height:'auto',
                recordtext:"Ordini trovati {2}",
                emptyrecords:"Nessun risultato",
                viewrecords: true,
                caption: 'Tabella Clienti',         
                localReader : {
                                    //
                    repeatitems: false,
                }
            });//jqGrid 
```

如果我把

```
var c = [{"citta":"XXXX","via":"XXX","telefono":"1111-11111","provincia":"XX","clienteDesc":"Prova","clienteCode":"XXXXX"}] 
```

和

```
data: c, datatype: "local", 
```

可以，但是如果我从 url: '/project/loadnotespese.do' 获取，它就行不通了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:46:06.037

如果你使用`datatype: "local"`该选项`localReader`将被使用。顺便说一下，该值`repeatitems: false`是（请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#array_data)）的*默认*值。因此，在使用情况下，您可以从选项列表中删除当前选项。`localReader``datatype: "local"``localReader: { repeatitems: false }`

另一方面，如果您使用`datatype: "json"` *另一个选项* `jsonReader`将被使用。`repeatitems`属性的默认值`jsonReader`是`repeatitems: false`（参见[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#json_data)）。所以你必须添加

```
jsonReader: { repeatitems: false } 
```

在 jqGrid 选项列表的情况下。之后，网格应该被成功填充。

另一个重要的想法是在数据行的每个项目中指定**附加**的`id`属性。该`id`值在整个页面中必须是唯一的，它将用作网格体`id`的 rows ( ) 元素的属性值。`<tr>`如果行项目的某些其他属性可以用作唯一 id，您可以在 中包含附加设置或在列的相应定义中`jsonReader`添加属性。例如，如果可以解释为您可以使用的 rowid`key: true``colModel``clienteCode`

```
jsonReader: { repeatitems: false, id: "clienteCode" } 
```

**更新**：您应该另外使用

```
root: function (obj) { return obj; } 
```

里面`jsonReader`（见[这里](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#jsonreader_as_function)）。所以决赛`jsonReader`应该是

```
jsonReader: {
    repeatitems: false,
    id: "clienteCode",
    root: function (obj) {
        return obj;
    }
} 
```

# c++ - 如何在调整大小时调整对话框中的控件大小

> ID：14692616
> 
> 赞同：0
> 
> 时间：2013-02-04T17:59:52.620
> 
> 标签：c++, winapi, anchor

我有一个对话框，上面有一些控件。下图显示了该对话框的打印屏幕：

![在此处输入图像描述](../Images/87c82c78aa84271a422e6dff3c097841.png)

我成功处理了将**OK**`WM_SIZE`按钮移动为具有相同边距的消息（请参见以下代码行）：

 **```
RECT rc;
int buttonWidth;
int buttonHeight;

::GetWindowRect(GetDlgItem(hDlg, IDOK), &rc);
buttonWidth = rc.right - rc.left;
buttonHeight = rc.bottom - rc.top;

::GetClientRect(hDlg, &rc);

MoveWindow(GetDlgItem(hDlg, IDOK), rc.right - buttonWidth - 8, rc.bottom - buttonHeight - 8, buttonWidth, buttonHeight, TRUE); 
```

但是如果标签的文本，例如*文本*标签比标签可以包含的尺寸更长，我不知道如何调整它的宽度。为了更好地理解我想要做什么，您应该注意我想要获得与`anchors`C# Winforms 项目中相同的行为。**

# perl - 解释这个巫术！！！（在 Perl 中，使用 Moose 和 namespace::autoclean）

> ID：14692623
> 
> 赞同：2
> 
> 时间：2013-02-04T18:00:08.397
> 
> 标签：perl, moose, symbol-table, mop

所以这些天我正在处理一个使用 Perl 和 Moose 的项目。我了解 Moose 是建立在 MOP 之上的。我对MOP不是太熟悉，也遇到过不明白的，可以用理论上的解释。这是模块`namespace::autoclean`的文档：

```
SYNOPSIS
    package Foo;
    use namespace::autoclean;
    use Some::Package qw/imported_function/;

    sub bar { imported_function('stuff') }

    # later on:
    Foo->bar;               # works
    Foo->imported_function; # will fail. imported_function got cleaned after compilation 
```

所以，在我使用 Moose 之前，您在对象上调用方法的方式是：Perl 解释器会在您的对象被祝福到的包的符号表中查找该方法（然后，如果没有找到，请考虑`@ISA`继承等）。它从包中调用导入函数的方式是：它在包的符号表中查找函数的名称。据我所知，无论哪种方式，这意味着相同的符号表，所以这种行为应该是不可能的。

我对源头的初步检查没有成效。从广义上讲，当使用 Moose、MOP 和 namespace::autoclean 时，这种诡计变得可能有什么不同？

**编。**要特别清楚，如果我要替换`use namespace::autoclean`为

```
CHECK { undef *Foo::imported_function } 
```

那么`Foo->bar;`文档中描述的调用会崩溃，因为`Foo->bar`不知道在哪里可以找到`imported_function`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:59:07.777

其实很简单。为了

```
some_sub() 
```

`some_sub`在编译时解决。为了

```
$o->some_method() 
```

`some_method`在运行时解决。它不能在编译时完成，因为它取决于`$o`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:29:03.497

这里没有什么是非标准的。线

```
use Some::Package qw/imported_function/; 
```

导入`imported_function`到当前包中，因此`Foo::imported_function`与`Some::Package::imported_function`. 假设`Some::Package`继承自`Exporter`对符号表进行必要的操作。

调用是方法调用，因此`Foo->bar`与`Foo::bar('Foo')`. `import`这里唯一特别的是，函数 from已经完成的魔法`Exporter`在编译时间结束时 by 被撤消了`namespace::autoclean`。

我没有看过这个模块的代码，但是由于包的符号表只是一个散列（称为*stash*，用于*符号表散列*），因此很容易在某一时刻保留其状态并在之后恢复它。所以我猜想`namespace::autoclean`在加载符号表时拍摄它的快照，并在编译时间结束时恢复该状态。这可以方便地在一个[`CHECK`块](http://perldoc.perl.org/perlmod.html#BEGIN,-UNITCHECK,-CHECK,-INIT-and-END)中完成，该块的行为类似于一个`BEGIN`块，但在编译结束和运行开始之前执行。

# c++ - 该指针的优点

> ID：14692626
> 
> 赞同：0
> 
> 时间：2013-02-04T18:00:21.820
> 
> 标签：c++

> **可能重复：**
> 
> [我什么时候应该明确使用 `this` 指针？](https://stackoverflow.com/questions/993352/when-should-i-make-explicit-use-of-the-this-pointer)

在 C++ 中，使用`this`指针有什么好处？即**以下两个片段中的哪一个是首选？**

```
class stud
{
  int a;
  public:
  void run(int a) {
      stud::a=a;
  }
}; 
```

或者

```
 class stud { 
   int a; 
   public: 
   void run(int a){ 
     this->a=a;
    }
 }; 
```

为什么不使用第一种情况？

# jquery - 在没有元素的情况下启动 Fancybox 2 全局事件错误

> ID：14692627
> 
> 赞同：1
> 
> 时间：2013-02-04T18:00:28.657
> 
> 标签：jquery, fancybox, fancybox-2, jquery-1.9

我正在动态启动fancybox。我已经在 jquery 小于 1.9.0 的情况下使用这种方法一段时间了，没有任何问题。

但是，现在在 JQuery 1.9.0 中不支持全局事件。似乎fancybox 在动态启动时尝试广播全局事件（不附加到像按钮这样的dom 元素）。

这个小提琴将在您的控制台中向您显示 jquery 迁移错误。 [http://jsfiddle.net/gMeFT/2/](http://jsfiddle.net/gMeFT/2/)

```
$.fancybox({
    openEffect: 'none',
    closeEffect: 'none',
    autoScale: true,
    href: 'http://jsfiddle.net/echo/jsonp/',
    type: 'ajax'
}); 
```

有谁知道解决这个问题的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-14T13:44:56.120

我遇到过同样的问题。我想我已经找到了解决方案，但不幸的是，您需要在源代码中修改一行。

第 764 行包含如下内容：

```
$.event.trigger(event + '.fb'); 
```

将其更改为以下应该可以完成工作：

```
D.trigger(event + '.fb'); 
```

# javascript - 访问深度嵌套的模型 - babckbone.js

> ID：14692637
> 
> 赞同：-1
> 
> 时间：2013-02-04T18:01:00.930
> 
> 标签：javascript, backbone.js

```
@model = new Client()

new_object = new Object()
new_object.site_id = ""
new_object.UserName = ""
etc..

@model.set(
  Header1: new_object,
  Header2: somethingelse
)

@model.save() 
```

如何访问深度嵌套的模型/对象？尝试以下不起作用。

```
this.get('obj1').get('childObject').propertyName 
```

**更新：**

之前看过这篇文章【backbone.js 获取和设置嵌套对象属性，但是不清楚他是如何访问childObject的。

```
{ Obj1 :{
   Obj2: {
    //List of properties
   }
  }
} 
```

当我将它设置为我的模型类时，我将如何获取 Obj2 的属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:12:33.827

它应该完全按照您上面描述的那样工作，看起来您可能正在混合属性和属性。

以下是对子模型使用这两种方法的示例：

```
var m1 = new Backbone.Model;
var c1 = new Backbone.Model, c2 = new Backbone.Model, c3 = new Backbone.Model;
c3.level = "final";
c1.set({'stuff' : 'this', 'child' : c3});
c1.prop = "go";
c2.set({'stuff' : 'that', 'child' : c3});
c2.prop = "stop";
m1.set({'child1' : c1});
m1.set({'child2': c2});
console.log(m1.get('child1').get('stuff'));
console.log(m1.get('child1').prop);
console.log(m1.get('child1').get('child').level);
console.log(m1.get('child2').get('stuff'));
console.log(m1.get('child2').prop);
console.log(m1.get('child2').get('child').level); 
```

这应该产生控制台输出：

```
this
go
final
that
stop
final 
```

# javascript - Angularjs指令替换文本

> ID：14692640
> 
> 赞同：20
> 
> 时间：2013-02-04T18:01:25.237
> 
> 标签：javascript, angularjs

我将如何在 angularjs 中创建一个指令，例如采用这个元素：

```
<div>Example text http://example.com</div> 
```

并将其转换为

```
<div>Example text <a href="http://example.com">http://example.com</a></div> 
```

我已经编写了自动链接函数中的文本并返回 html 的功能（让我们称之为函数“autoLink”），但我的指令还不够。

我还想为元素添加一个属性以将对象传递给指令。例如

```
<div linkprops="link.props" >Example text http://example.com</div> 
```

其中 link.props 是像 {a: 'bla bla', b: 'waa waa'} 这样的对象，它将作为第二个参数传递给 autoLink 函数（第一个是文本）。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-04T18:43:57.233

两种方法：

## 指示

```
app.directive('parseUrl', function () {
    var urlPattern = /(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gi;
    return {
        restrict: 'A',
        require: 'ngModel',
        replace: true,
        scope: {
            props: '=parseUrl',
            ngModel: '=ngModel'
        },
        link: function compile(scope, element, attrs, controller) {
            scope.$watch('ngModel', function (value) {
                var html = value.replace(urlPattern, '<a target="' + scope.props.target + '" href="$&">$&</a>') + " | " + scope.props.otherProp;
                element.html(html);
            });
        }
    };
}); 
```

HTML：

```
<p parse-url="props" ng-model="text"></p> 
```

## 筛选

```
app.filter('parseUrlFilter', function () {
    var urlPattern = /(http|ftp|https):\/\/[\w-]+(\.[\w-]+)+([\w.,@?^=%&amp;:\/~+#-]*[\w@?^=%&amp;\/~+#-])?/gi;
    return function (text, target, otherProp) {
        return text.replace(urlPattern, '<a target="' + target + '" href="$&">$&</a>') + " | " + otherProp;
    };
}); 
```

HTML：

```
<p ng-bind-html-unsafe="text | parseUrlFilter:'_blank':'otherProperty'"></p> 
```

注意：这`'otherProperty'`只是示例，以防您想将更多属性传递给过滤器。

**[jsFiddle](http://jsfiddle.net/bmleite/yg5gaos1/)**

**更新：**改进的替换算法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-07T19:16:35.287

要回答这个问题的前半部分，无需额外的属性要求，可以使用 Angular 的链接过滤器：[https ://docs.angularjs.org/api/ngSanitize/filter/linky](https://docs.angularjs.org/api/ngSanitize/filter/linky)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-18T17:02:10.863

如果有多个链接，投票最多的答案无效。Linky 已经为我们完成了 90% 的工作，唯一的问题是它清理了 html 从而删除了 html/换行符。我的解决方案是只编辑链接过滤器（下面是 Angular 1.2.19）以不清理输入。

```
app.filter('linkyUnsanitized', ['$sanitize', function($sanitize) {
  var LINKY_URL_REGEXP =
        /((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>]/,
      MAILTO_REGEXP = /^mailto:/;

  return function(text, target) {
    if (!text) return text;
    var match;
    var raw = text;
    var html = [];
    var url;
    var i;
    while ((match = raw.match(LINKY_URL_REGEXP))) {
      // We can not end in these as they are sometimes found at the end of the sentence
      url = match[0];
      // if we did not match ftp/http/mailto then assume mailto
      if (match[2] == match[3]) url = 'mailto:' + url;
      i = match.index;
      addText(raw.substr(0, i));
      addLink(url, match[0].replace(MAILTO_REGEXP, ''));
      raw = raw.substring(i + match[0].length);
    }
    addText(raw);
    return html.join('');

    function addText(text) {
      if (!text) {
        return;
      }
      html.push(text);
    }

    function addLink(url, text) {
      html.push('<a ');
      if (angular.isDefined(target)) {
        html.push('target="');
        html.push(target);
        html.push('" ');
      }
      html.push('href="');
      html.push(url);
      html.push('">');
      addText(text);
      html.push('</a>');
    }
  };
}]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-21T12:31:21.413

我想要一个可以交换文本的暂停按钮。我是这样做的：

在 CSS 中：

```
.playpause.paused .pause, .playpause .play { display:none; }
.playpause.paused .play { display:inline; } 
```

在模板中：

```
<button class="playpause" ng-class="{paused:paused}" ng-click="paused = !paused">
  <span class="play">play</span><span class="pause">pause</span>
</button> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-12-15T20:01:43.990

受@Neal 的启发，我从较新的 Angular 1.5.8 中制作了这个“无消毒”过滤器。它还可以识别没有 ftp|http(s) 但以 www 开头的地址。这意味着两者都`https://google.com`将`www.google.com`被链接。

```
angular.module('filter.parselinks',[])

.filter('parseLinks', ParseLinks);

function ParseLinks() {
  var LINKY_URL_REGEXP =
        /((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,
      MAILTO_REGEXP = /^mailto:/i;

  var isDefined = angular.isDefined;
  var isFunction = angular.isFunction;
  var isObject = angular.isObject;
  var isString = angular.isString;

  return function(text, target, attributes) {
    if (text == null || text === '') return text;
    if (typeof text !== 'string') return text;

    var attributesFn =
      isFunction(attributes) ? attributes :
      isObject(attributes) ? function getAttributesObject() {return attributes;} :
      function getEmptyAttributesObject() {return {};};

    var match;
    var raw = text;
    var html = [];
    var url;
    var i;
    while ((match = raw.match(LINKY_URL_REGEXP))) {
      // We can not end in these as they are sometimes found at the end of the sentence
      url = match[0];
      // if we did not match ftp/http/www/mailto then assume mailto
      if (!match[2] && !match[4]) {
        url = (match[3] ? 'http://' : 'mailto:') + url;
      }
      i = match.index;
      addText(raw.substr(0, i));
      addLink(url, match[0].replace(MAILTO_REGEXP, ''));
      raw = raw.substring(i + match[0].length);
    }
    addText(raw);
    return html.join('');

    function addText(text) {
      if (!text) {
        return;
      }
      html.push(text);
    }

    function addLink(url, text) {
      var key, linkAttributes = attributesFn(url);
      html.push('<a ');

      for (key in linkAttributes) {
        html.push(key + '="' + linkAttributes[key] + '" ');
      }

      if (isDefined(target) && !('target' in linkAttributes)) {
        html.push('target="',
                  target,
                  '" ');
      }
      html.push('href="',
                url.replace(/"/g, '&quot;'),
                '">');
      addText(text);
      html.push('</a>');
    }
  };
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T18:06:29.553

我将分析指令上链接函数中的文本：

```
directive("myDirective", function(){

  return {
        restrict: "A",
        link: function(scope, element, attrs){
          // use the 'element' to manipulate it's contents...
        }
      }
  }); 
```

# javascript - geochart：在“选择”上触发功能

> ID：14692641
> 
> 赞同：6
> 
> 时间：2013-02-04T18:01:33.047
> 
> 标签：javascript, google-visualization, dom-events

这是我试图在我的网站上实现的地理图表的代码：

```
 <script type='text/javascript'>
 google.load('visualization', '1', {'packages': ['geochart']});
 google.setOnLoadCallback(drawRegionsMap);

  function drawRegionsMap() {
  var data = google.visualization.arrayToDataTable([
          ['Country'],
          ['Italy'],
          ['Germany'],
          ['France'],
          ['Turkey'],
          ['Indonesia']
  ]);

  var options = {
  };

  var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));

    chart.draw(data, options);

  google.visualization.events.addListener(chart, 'select', function() {
    var selectedItem = chart.getSelection()[0];
    if (selectedItem) {
      var country = data.getValue(selectedItem.row, 0);
      if (country = 'France') { alert ('ciao') };
    }

  });

}; 
```

我想实现的是，如果用户选择特定区域（例如法国），则会调用 Javascript 函数。现在，变量 country 可以正常工作（如果您按 France，它将设置为 France），但 if (country=) 肯定有问题，因为即使我选择的国家不是法国，它也会执行相同的操作。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:22:30.420

您需要在这里使用相等运算符`==`而不是赋值运算符`=`：

`if (country == 'France') { alert ('ciao') };`

否则，您将国家/地区设置为“法国”，并且该`if`声明将始终为真。

# opengl - OpenGL中的定时旋转

> ID：14692647
> 
> 赞同：0
> 
> 时间：2013-02-04T18:01:52.783
> 
> 标签：opengl, timer

我正在通过 OpenGL Superbible 第 5 版工作。有在屏幕上显示旋转圆环的示例代码。为确保旋转发生独立于处理器速度，旋转量基于时间。我的问题：在下面的示例代码中，我怎样才能“确定”正确的时间将传递给`m3dRotationMatrix44()` 方法？也就是说，在 之后`rotTimer.GetElapsedSeconds()`，是什么阻止了操作系统处理其他任务，然后返回到`m3dRotationMatrix44()`？或者，这是用于教程目的的基本计时技术吗？如果是这样，还有什么其他方法存在？

```
// Set up time based animation
static CStopWatch rotTimer;
float yRot = rotTimer.GetElapsedSeconds() * 60.0f;

// <initialize some stuff>

// Create a rotation matrix based on the current value of yRot
m3dRotationMatrix44(mRotate, m3dDegToRad(yRot), 0.0f, 1.0f, 0.0f); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:19:53.083

如果一切正常，您无需担心操作系统会在 rotTimer.GetElapsedSeconds() 和计算之间进行操作。“rotTimer.GetElapsedSeconds()”将返回花费在你的东西和其他任务上的累积延迟。但是您必须在每帧上对所有基于时间的操作使用相同的值（每帧只调用一次 .GetElapsedSeconds() 并在任何地方使用它的值）。

您应该警惕的是延迟可能太大或太小。有几种方法可以解决这个问题。最简单的是设置最大帧长。像这样的东西：

```
float yRot = max(rotTimer.GetElapsedSeconds(), 0.3f) * 60.0f; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:47:22.813

只需将计时器查询放在尽可能靠近您使用它的位置，然后不要太担心它。请注意，在 60 Hz 时，无论如何您只是每 16 毫秒绘制一帧，因此您的步骤的粒度至少是这么多。在主要运行此应用程序（而不由其他进程加载）的机器上，上下文切换时间不会产生显着差异。

如果您考虑一下，您的用户空间应用程序实际上并不*能做*任何事情来保证您的执行不会被另一个进程中断。上下文切换由内核处理，为了公平起见，任何用户空间进程都不应该能够“占用”所有执行时间——上下文切换应该对它完全透明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T19:36:31.407

当您的程序默认运行时，没有什么可以阻止其他进程运行。不要这样做，但如果您确实需要使用 Windows API 函数 SetPriorityClass 和 SetThreadPriority，则可以更改进程优先级以抢占计算机上的任何其他进程。将这些设置为实时是杀死计算机的好方法。:-)

# javascript - 仅使用客户端技术重用 HTML 代码

> ID：14692648
> 
> 赞同：2
> 
> 时间：2013-02-04T18:01:57.797
> 
> 标签：javascript, html, css, partials

我的任务是仅使用 HTML、CSS 和 JavaScript 等客户端技术创建网站。我们不能使用任何服务器端技术，因为讲师懒得安装任何东西，并且不允许我们使用诸如 Heroku 之类的东西进行部署。有没有办法我可以做到这一点？特别是我想为导航和页脚创建部分，而不必将它们复制并粘贴到每个文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:04:37.517

我知道两种不同的方法：

**1\. 使用 Ajax**

您可以使用 ajax 来执行此操作 - 可能在 JavaScript 库或框架的帮助下。

JQuery[`load`](http://api.jquery.com/load/)可以做类似的事情`$('#header').load('header-partial.html');`

如果您正在使用大量视图等构建更复杂的东西......我会考虑使用 MV* javascript 框架，如 Backbone.js 或 AngularJS。

查看 GitHub 上的[AngularJS 种子项目](https://github.com/angular/angular-seed)以获取示例

**2.使用构建脚本**

如果您的站点足够简单，您只想在每个页面上包含页眉和页脚，那么您应该考虑将其作为部署过程中的构建步骤。IE 在本地编译您的 html，并在每个 html 页面上使用页眉/页脚代码上传完整页面。

如果 js 被禁用，这种方法的好处是不会破坏您的网站。

例如，查看 html5boilerplate 的[ant 构建脚本](https://github.com/h5bp/ant-build-script)

# ios - 保存高分辨率资源，以便应用知道它可以在视网膜设备上使用它们

> ID：14692649
> 
> 赞同：0
> 
> 时间：2013-02-04T18:02:00.127
> 
> 标签：ios, objective-c, image, retina-display, file-management

我的应用程序尺寸很大，因为它是通用的并且专为 Retina 显示器而设计。我想允许用户从我的服务器下载 Retina 图像，而不是最初将它们包含在应用程序中。

我用下面的代码试过这个。唯一的问题是图像存储在 Documents 文件夹中，应用程序不会将它们识别为 Retina 图像

```
UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.test.com/img2@2x.png"]]];
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *pngFilePath = [NSString stringWithFormat:@"%@/img2@2x.png",docDir];
NSData *data1 = [NSData dataWithData:UIImagePNGRepresentation(image)];
[data1 writeToFile:pngFilePath atomically:YES]; 
```

我应该如何保存图像以允许应用程序使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:12:41.540

它不起作用，因为 UI 图像的来源是 Bundle 而不是 NSDocumentDirectory 文件夹。要使用视网膜和非视网膜图像，您应该检测设备是否是视网膜并以编程方式从 NSDocumentDirectory 加载图像。

您可以将[其](https://stackoverflow.com/questions/5568911/knowing-device-type-retina-non-retina)用于视网膜检测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:11:18.760

该`imageWithData:`方法将始终创建比例为 1.0（非视网膜）的图像。从包外的自定义位置创建视网膜感知 UIImage，您需要使用以下`initWithCGImage:scale:orientation:`方法：

```
UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.test.com/img2@2x.png"]]];
UIImage *retinaImage = [UIImage initWithCGImage:[image CGImage] scale:2.0 orientation:UIImageOrientationUp]; 
```

（而且，显然，您不应该同步下载图像......）。

在我的上一个项目中，我需要做同样的事情（从文档目录加载与比例相关的图像），所以我在 UIImage 类别中编写了一个小的方便方法：

```
- (id)initWithContentsOfResolutionIndependentFile:(NSString *)path
{
    if([[UIScreen mainScreen] scale] == 2.0) {
        NSString *path2x = [[path stringByDeletingLastPathComponent]
                            stringByAppendingPathComponent:[NSString stringWithFormat:@"%@@2x.%@",
                                                            [[path lastPathComponent] stringByDeletingPathExtension],
                                                            [path pathExtension]]];

        if([[NSFileManager defaultManager] fileExistsAtPath:path2x]) {
            return [self initWithCGImage:[[UIImage imageWithData:[NSData dataWithContentsOfFile:path2x]] CGImage] scale:2.0 orientation:UIImageOrientationUp];
        }
    }

    return [self initWithContentsOfFile:path];
} 
```

用法：

```
UIImage *myImage = [[UIImage alloc] initWithContentsOfResolutionIndependentFile:@"/path/to/image.png"]; 
```

这将尝试从`/path/to/image@2x.png`视网膜上加载图像，`/path/to/image.png`否则使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T13:15:15.407

You can use `[UIImage imageWithData: scale:]` and be able to skip the "@2x" naming convention:

```
- (UIImage *)getRetinaSafeImage: (NSString *)fileName
{
    // alternatively you can use NSURL instead of path
    NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    NSData *myImageData = [NSData dataWithContentsOfFile: [NSString stringWithFormat:@"%@/%@",docDir, fileName]];

    if([[UIScreen mainScreen] scale] == 2.0)
        return [UIImage imageWithData:myImageData scale:2.0];
    else return [UIImage imageWithData:myImageData];
} 
```

# classification - Octave/Matlab 中的邻域分析实现

> ID：14692650
> 
> 赞同：1
> 
> 时间：2013-02-04T18:02:04.120
> 
> 标签：classification, analysis, projection, mathematical-optimization, nearest-neighbor

我一直在尝试在 Octave 中实现[邻域分量分析 (NCA)](http://en.wikipedia.org/wiki/Neighbourhood_components_analysis)算法，但显然我的代码有问题，我无法弄清楚它是什么。

**注意：**我正在使用 Carl Edward Rasmussen 的[`minimize`](http://learning.eng.cam.ac.uk/carl/code/minimize/minimize.m)函数来最大化负***f***。

**注 2：**我使用的测试数据是UCI 机器学习存储库中可用的[Wine 数据集。](http://archive.ics.uci.edu/ml/datasets/Wine)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T20:21:13.443

在一些外部帮助下，我得到了问题的答案。问题是我错误地假设数据点*i*和*j*的差异的向量积应该是逐列向量的行向量，而不是相反的： ![坡度](../Images/8710d6bf8b49623fda128bfc52f6aba4.png)

# php - 如何从多维数组中“提取”值

> ID：14692651
> 
> 赞同：0
> 
> 时间：2013-02-04T18:02:12.013
> 
> 标签：php, multidimensional-array

我无法弄清楚如何从这个数组中获取我需要的值 ::: 我需要 3 辆车的值是 .

1.  **[class] => span3 scrape_img**图片 Href & 图片 src
2.  **[class] => price scrape_price**价格
3.  **[class] => scrape_make**制作
4.  **[class] => scrape_year**年份

我试图通过阅读[PHP 数组文档](http://php.net/manual/en/function.array.php)来解决这个问题，但没有取得多大成功。

```
Array
(
    [query] => Array
        (
            [count] => 12
            [created] => 2013-02-04T17:46:34Z
            [lang] => en-US
            [results] => Array
                (
                    [div] => Array
                        (
                            [0] => Array
                                (
                                    [class] => span3 scrape_img
                                    [span] => Array
                                        (
                                            [class] => scrape
                                            [a] => Array
                                                (
                                                    [href] => http://cant-reveal-this.com/cars/hyundai/ix35-2-0gls-auto/
                                                    [img] => Array
                                                        (
                                                            [alt] => Featured Image
                                                            [src] => /wp-content/uploads/2013/02/01863-270x150.jpg
                                                        )
                                                )
                                        )
                                )

                            [1] => Array
                                (
                                    [class] => price scrape_price
                                    [p] => From R249,900
                                )

                            [2] => Array
                                (
                                    [class] => span3 scrape_img
                                    [span] => Array
                                        (
                                            [class] => scrape
                                            [a] => Array
                                                (
                                                    [href] => http://cant-reveal-this.com/cars/hyundai/ix35-2-0gls/
                                                    [img] => Array
                                                        (
                                                            [alt] => Featured Image
                                                            [src] => /wp-content/uploads/2013/02/1930-270x150.jpg
                                                        )
                                                )
                                        )
                                )

                            [3] => Array
                                (
                                    [class] => price scrape_price
                                    [p] => From R239,900
                                )

                            [4] => Array
                                (
                                    [class] => span3 scrape_img
                                    [span] => Array
                                        (
                                            [class] => scrape
                                            [a] => Array
                                                (
                                                    [href] => http://cant-reveal-this.com/cars/ford/everest-3-0-tdci-xlt-4/
                                                    [img] => Array
                                                        (
                                                            [alt] => Featured Image
                                                            [src] => /wp-content/uploads/2013/02/1876-270x150.jpg
                                                        )
                                                )
                                        )
                                )

                            [5] => Array
                                (
                                    [class] => price scrape_price
                                    [p] => From R279,900
                                )
                        )

                    [span] => Array
                        (
                            [0] => Array
                                (
                                    [class] => scrape_make
                                    [strong] => Make
                                    [content] => hyundai
                                )

                            [1] => Array
                                (
                                    [class] => scrape_year
                                    [strong] => Year
                                    [content] => 2011
                                )

                            [2] => Array
                                (
                                    [class] => scrape_make
                                    [strong] => Make
                                    [content] => hyundai
                                )

                            [3] => Array
                                (
                                    [class] => scrape_year
                                    [strong] => Year
                                    [content] => 2011
                                )

                            [4] => Array
                                (
                                    [class] => scrape_make
                                    [strong] => Make
                                    [content] => ford
                                )

                            [5] => Array
                                (
                                    [class] => scrape_year
                                    [strong] => Year
                                    [content] => 2011
                                )
                        )
                )
        )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:14:48.013

试试这个：如果这个数组在一个名为的变量中`$array`

1-`$array['query']['result']['div'][0]['a']['href']`

2-`$array['query']['result']['div'][1]['p']`

3-`$array['query']['result']['span'][0]['class']`

要调试并找到所需的值，请尝试这样做，

```
var_dump($array['query']); 
```

然后

```
var_dump($array['query']['result']); 
```

...ETC

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T19:44:40.893

看起来您可以从评论和其他答案中弄清楚。但是，我应该澄清一下，我对这个问题的评论有点误导，所以你可以忽略它们。我实际上假设`class`引用了 PHP 对象，而实际上`class`只是一个字符串的键（在我看来，该数组就像一些已解析的 HTML/XML）。`var_dump()`当您在评论中发布数组时，我意识到了这一点。

问题是数组结构相当复杂，所有的嵌套都在进行，所以可能很难看出是什么。总的来说，我同意另一个答案；调试`var_dump()`是一个很好的检查方法。这是我对答案的看法。

假设您的数组变量是`$array`：

1.

```
$array['query']['results']['div'][0]['span']['a']['href']
$array['query']['results']['div'][0]['span']['a']['img']['src'] 
```

2.

```
$array['query']['results']['div'][1]['span']['p'] 
```

3.

```
$array['query']['results']['span'][0]['content'] 
```

4.

```
$array['query']['results']['span'][1]['content'] 
```

# javascript - 禁用 highcharts 上的所有 UI 事件

> ID：14692652
> 
> 赞同：3
> 
> 时间：2013-02-04T18:02:21.163
> 
> 标签：javascript, events, highcharts

我正在为平板电脑优化一个网站，我们有兴趣禁用 highcharts 的所有事件，以便用户可以在页面上平移而不会受到影响。

我尝试在构造函数中将事件设置为 null，但似乎找不到通过 API 删除功能的方法。本质上，我面临的问题是用户可能会“放大”以阅读图表，然后实际上无法做太多事情，因为所有事件都被图表捕获。我希望它只是在没有任何交互性的情况下显示。

```
chart :{
 ....
  events : null;
 ...
}, 
```

...

[http://jsfiddle.net/MTyzv/26/](http://jsfiddle.net/MTyzv/26/)

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        animation: false,
        events: null
    },
    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct']
    },

    plotOptions: {
        series: {
            cursor: 'ns-resize',
            states : {
                hover : { 
                    enabled: false
                } 
            },
            stickyTracking : false
        },
        column: {
            stacking: 'normal'
        }
    },

    tooltip: {
        enabled: false,
        yDecimals: 0
    },
    series: [        
        {
        name: "test",
        data: [0, 10, 20, 30, 40, 50, 60, 70, 100, 70],
        draggable: false,
        dragMin: 0,
        dragMax: 100
    }]
});

$('document').ready(new function(){
    ('container').events = null;
    ('contener').css({'background-color':'#ff0000','pointer-events': 'none'});
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:44:38.867

你能：`$('#myChartDiv').click(function() { return false; });`并且仅在浏览器被识别为移动设备（可能使用服务器端代码）时才运行该代码？还，`$('#myChartDiv').children().click(function() { return false; });`

# grails - 在 Grails 插件中访问资源

> ID：14692657
> 
> 赞同：1
> 
> 时间：2013-02-04T18:02:42.403
> 
> 标签：grails, plugins, resources, path

我有一个名为“foo”的 Grails 插件，它使用另一个名为“ **common** ”的 Grails 插件。

```
grails.plugin.location.'common' = "../common" 
```

' **common** ' 插件包含域类以及资源文件（.properties 文件、xml 模板等）。这些文件都位于**common/grails-app/conf/**的子文件夹中。

在我的“通用”插件中有一个实现 NamespaceContext 的类，它使用这些文件来正常运行。

```
public class MyNamespaceContext implements NamespaceContext {

private Map<String, String> namespaces;

public MyNamespaceContext() {

    final String XML_NAMESPACES_FILE = "grails-app/conf/xml/xmlNamespaces.properties";

    try {
        Properties xmlNamespaces = new Properties();
        xmlNamespaces.load(new FileReader(XML_NAMESPACES_FILE));
        namespaces = new HashMap<String, String>((Map) xmlNamespaces);
    } catch (FileNotFoundException e) {
        throw new RuntimeException("XML namespaces file '" + XML_NAMESPACES_FILE + "' cannot be found");
    } catch (IOException e) {
        throw new RuntimeException("IOException");
    }
}

... 
```

}

这个类在几个类中使用，也位于形成我的域模型的“common”中，实现为 xml 装饰器。

```
 public class UserXmlDecorator implements User {

    private Document xmlDocument;
    private XPath xPath;
    private final String rawXml;

    public UserXmlDecorator(String rawXml) {
        this.rawXml = rawXml;
        this.xmlDocument = XmlDocumentFactory.INSTANCE.buildXmlDocumentInUTF8(rawXml);
        this.xPath = XPathFactory.newInstance().newXPath();
        xPath.setNamespaceContext(new MyNamespaceContext());
    }

    public String getUserName() {
        try {
            XPathExpression userNameXPathExpr = xPath.compile("...");
            String userName = userNameXPathExpr.evaluate(appendixBXmlDocument);
            return userName;
        } catch (XPathExpressionException e) {
            throw new RuntimeException();
        }
    }

    public String getAge() {
        try {
            XPathExpression ageXPathExpr = xPath.compile("...");
            String age = ageXPathExpr.evaluate(appendixBXmlDocument);
            return age;
        } catch (XPathExpressionException e) {
            throw new RuntimeException();
        }
    } 
```

在我的 Grails 插件“foo”中创建这些装饰器时，我得到一个 FileNotFound 异常，因为它正在**foo/grails-app/conf/xml/xmlNamespaces.properties**中寻找模板，而不是**common/grails-app/conf/ xml/xmlNamespaces.properties**。

我读过 [Grails：如何引用位于已安装插件中的资源？](https://stackoverflow.com/questions/4890491/grails-how-to-reference-a-resource-located-inside-an-installed-plugin)但这对我没有帮助。

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T10:55:19.063

通过将 .properties 文件放在类路径而不是 conf/ 目录中，然后使用类加载器加载资源来解决这个问题。

```
xmlNamespaces.load(this.getClass().getClassLoader().getResourceAsStream(XML_NAMESPACES_FILE)); 
```

# cakephp - CakePHP 2.3：根据当前用户过滤查找结果

> ID：14692668
> 
> 赞同：1
> 
> 时间：2013-02-04T18:03:19.013
> 
> 标签：cakephp

我有具有以下关系的模型，定义了用户可以属于多个组的情况，并且可以授予多个组访问项目的权限。

`User`HABTM `Group`_`Project`

我想进行设置，以便`find()`在 Project 模型上所做的任何操作都只会返回当前用户有权访问的结果，具体取决于她的组成员身份。

我的第一个想法是使用`beforeFind()`回调来修改查询。然而，二级协会让我难住了。我通过重新绑定模型解决了类似的问题（请参阅[此问题](https://stackoverflow.com/questions/14528492/cakephp-2-x-containable-behavior-conditions-on-deep-associations/14542665#14542665)）。但是，这是针对自定义查找方法的——我认为这种方法在我需要修改任意查询的一般情况下不起作用。

使用`afterFind()`过滤结果不是一个好主意，因为当它没有返回正确数量的记录时，它会混淆分页（例如）。

最后，我有一个挥之不去的怀疑，我正在尝试重新发明轮子。我在 CakePHP 中看到的访问控制（例如 Cake ACLs）一直是在控制器/动作级别而不是在模型/记录级别，但我觉得这应该是一个已解决的问题。

**编辑：**我最终认为这过于复杂，只是`getAccessibleByUser($id)`在我的项目模型中添加了一个方法。但是，我仍然很好奇是否可以将这种限制全局添加到所有`find()`操作中。这似乎正是您想要在 中做的事情`beforeFind()`，我怀疑（正如 DavidYell 在下面建议的那样）答案可能在于 Containable 行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T09:55:52.720

# html - 无法使用多行换行对齐标题旁边的段落

> ID：14692669
> 
> 赞同：0
> 
> 时间：2013-02-04T18:03:24.750
> 
> 标签：html, css, text, word-wrap, text-alignment

我想要的是有一个标题（h2）与标题右侧的一些文本（p）对齐。调整窗口大小时，段落文本也应该换行，以便使用标题旁边的任何可用空间。现在发生的是较小的段落文本在标题下换行，留下很大的空白。

这是一个[jsfiddle](http://jsfiddle.net/Z9A32/)。您将看到带有灰色背景的文本在标题下方环绕，留下很大的间隙。只要有足够的空间，我希望段落自己包裹起来。

如果 jsfiddle 不可用，代码如下：

HTML：

```
<section>
<div>
    <h2>Contact Me</h2>
    <p>You can Contact Me at sample@smaple.com or use the contact form below:</p>
</div>
</section> 
```

CSS：

```
section{
    background-color:#CCC;
    width:100%;
}
section div{
    background-color:#39F;
    border-bottom:3px solid #333;
}
section div h2{
    font-family:helveticaInserat;
    font-size:2.6em;
    display:inline;
    background-color:red;
}
section div p{
    font-family:helveticaInserat;
    background-color:#CCC;
    display:inline;
    vertical-align:top;
    line-height:1em;
} 
```

记住所有文本都是动态的并且在可用空间很小时需要换行，如何实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:07:44.437

```
section div h2 {
    font-family:helveticaInserat;
    font-size:2.6em;
    float: left;
    background-color:red;
}
section div p {
    font-family:helveticaInserat;
    background-color:#CCC;
    vertical-align:top;
    line-height:1em;
} 
```

[http://jsfiddle.net/Z9A32/2/](http://jsfiddle.net/Z9A32/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:10:41.057

添加浮动留在`h2`

```
section div h2{
        font-family:helveticaInserat;
        font-size:2.6em;
        background-color:red;
        float:left;
    } 
```

[jsfiddle](http://jsfiddle.net/Z9A32/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:11:18.260

您不想使用这些`display: inline;`属性。本质上，您是在尝试将两个块级元素“浮动”在一起。为此，请尝试以下操作：

```
 section div h2{
     width: 45%;
     float: left;
 }

 section div p{
     width: 45%;
     float: left;
 } 
```

我确信拥有更多 CSS-fu 的人将能够为此提供规范的解决方案，但这是我一直在做的事情。当您缩放窗口时，它应该很好地调整大小。

# python - 使用 python 更新 mySQL 中的特定单元格

> ID：14692672
> 
> 赞同：0
> 
> 时间：2013-02-04T18:03:26.793
> 
> 标签：python, mysql-python

我一直在 python 中使用 mySQLdb 将数据导入数据库，但是我也希望能够处理特定行并更新该行中的单元格，我在 mySQLdb 帮助中找不到执行此操作的命令文件，任何人都会好心地指出我正确的方向......

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:10:30.493

您可以使用 sql [UPDATE](http://www.w3schools.com/sql/sql_update.asp)语句

伪数据架构：

```
# table people
id INT, name VARCHAR(40), age INT, address VARCHAR(100)

1, john, 33, North America
2, dm03514, 28, Maryland 
```

使用 pythong [MySQLdb](https://stackoverflow.com/questions/1307378/python-mysql-update-statement)

```
cursor.execute('UPDATE people SET address = %s WHERE id = %s', ('Columbia, MD', 2)); 
```

# c# - 无需按，默认为真时（自动循环）

> ID：14692685
> 
> 赞同：1
> 
> 时间：2013-02-04T18:04:10.747
> 
> 标签：c#

```
string tastetryk;

ConsoleKeyInfo tast;
Console.ForegroundColor = ConsoleColor.White;
Console.BackgroundColor = ConsoleColor.Blue;
Console.Clear();
do
{

     Console.WriteLine("Menu");
     Console.WriteLine(" ");
     Console.WriteLine("Tryk en tast for at vælge funktion");
     Console.WriteLine(" ");
     Console.WriteLine("I - Beregn strøm");
     Console.WriteLine("U - Spænding");
     Console.WriteLine("R - Modstand");
     Console.WriteLine(" ");
     Console.WriteLine("(Esc) for at slutte ");

     tast = Console.ReadKey();
     tastetryk = tast.Key.ToString();
     Console.Clear();

     switch(tastetryk)
     {
         case "I":
             Console.WriteLine("du har tastet I");
             Console.Write("Tast Q for at komme tilbage");
             tast = Console.ReadKey();
             break;

         case "U":
             Console.WriteLine("du har tastet U");
             Console.Write("Tast Q for at komme tilbage");
             tast = Console.ReadKey();
             break;

         case "R":
             Console.WriteLine("du har tastet R");
             Console.Write("Tast Q for at komme tilbage");
             tast = Console.ReadKey();
             break;

         default:
             Console.WriteLine("forkert tast");
             Thread.Sleep(1000);
             Console.Clear(); 
             break;
    }                
}
while (tast.Key == ConsoleKey.Q); 
```

我为菜单编写了此代码，当我按 I、U 或 R 时，其中一种情况会实现，当您按 Q 时它将返回主菜单。我的问题是当默认为真时，我希望它循环到主菜单而无需按 Q，我尝试使用 tast = Consolekey.Q

对不起我的英语真的很糟糕

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:39:28.300

显然，正如您肯定注意到的那样，由于语句中断，您不能`break`从循环中退出。`break``switch`

两个简单的解决方案：

首先，添加一个布尔标志，指示您应该退出循环，在`while`语句中添加一个新条件。

```
bool bExit = false;

do
{
    switch 
    {
        /*
        code here
        */
        default:
            bExit = true;
            //etc.
    }
}
while(tast.Key == ConsoleKey.Q || !bExit) 
```

现在，我知道这可能被认为是纯粹的邪恶，但是......你有没有考虑过使用 a `goto`？

```
do
{
    switch 
    {
         /*
         code here
         */
         default:
            goto outOfLoop;
    }
}
while(tast.Key == ConsoleKey.Q)

outOfLoop:

// etc. 
```

我相信第二种解决方案实际上更干净，但人们可能会对`goto`声明做出激烈反应。

# ios - 应用程序更新之间的 CoreData，表示默认数据刷新

> ID：14692689
> 
> 赞同：0
> 
> 时间：2013-02-04T18:04:30.317
> 
> 标签：ios, core-data, xcode4.5, database-versioning

在处理 CoreData 时，我遇到了一些问题，我试图将其扼杀在萌芽状态，以便将来对系统进行校对。一个简单的事实是，我以前从未做过这样的事情（即使用 CoreData）。虽然我已经设法弄清楚如何在应用程序中使用它，但我需要知道一种体面的做法来指示应用程序在首次应用程序启动时需要刷新默认数据的版本之间。

所以现在，在我的 AppDelegate 中，我设置了我的托管对象上下文，并执行了一个获取请求以查看特定表/实体中是否有任何记录。我只希望在首次启动时发生这种情况，所以我不会在每次应用程序启动时不断重写数据库的内容。无论如何，所以它继续使用对象模型来处理在有问题的实体之间插入数据（有一些）

现在，对于这个版本的应用程序，它会在没有 API 的情况下进入商店（这是一个遥远的未来），但在发布到应用商店的版本之间，我们可能必须更新实体中的特定信息（例如：价格） ，我只希望在应用启动时进行此刷新。此外，架构可能会更改，我不确定是否或何时更改，但我想确保这可以适应这种情况以防万一。

我想，对coredata“添加模型版本”进行版本控制就可以了，将新的数据库版本设置为活动版本，但是当我在模拟器中启动应用程序时，没有任何反应告诉我里面的数据被保留了。

对我应该做些什么来适应这一点的任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:41:03.467

您应该会发现 Core Data Model Versioning and Data Migration 指南很有用：

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreDataVersioning/Articles/Introduction.html)

您可能还会发现[使用 coredata 导入初始数据的方法](https://stackoverflow.com/questions/11310795/method-for-import-initial-data-with-coredata)很有用。

# python - 通过键列表访问嵌套字典项？

> ID：14692690
> 
> 赞同：176
> 
> 时间：2013-02-04T18:04:35.410
> 
> 标签：python, list, dictionary

我有一个复杂的字典结构，我想通过一个键列表访问它以解决正确的项目。

```
dataDict = {
    "a":{
        "r": 1,
        "s": 2,
        "t": 3
        },
    "b":{
        "u": 1,
        "v": {
            "x": 1,
            "y": 2,
            "z": 3
        },
        "w": 3
        }
}    

maplist = ["a", "r"] 
```

或者

```
maplist = ["b", "v", "y"] 
```

我已经制作了以下有效的代码，但如果有人有想法，我相信有更好、更有效的方法来做到这一点。

```
# Get a given data from a dictionary with position provided as a list
def getFromDict(dataDict, mapList):    
    for k in mapList: dataDict = dataDict[k]
    return dataDict

# Set a given data in a dictionary with position provided as a list
def setInDict(dataDict, mapList, value): 
    for k in mapList[:-1]: dataDict = dataDict[k]
    dataDict[mapList[-1]] = value 
```

* * *

## 回答 #1

> 赞同：295
> 
> 时间：2013-02-04T18:07:38.353

用于`reduce()`遍历字典：

```
from functools import reduce  # forward compatibility for Python 3
import operator

def getFromDict(dataDict, mapList):
    return reduce(operator.getitem, mapList, dataDict) 
```

并重`getFromDict`用以找到存储值的位置`setInDict()`：

```
def setInDict(dataDict, mapList, value):
    getFromDict(dataDict, mapList[:-1])[mapList[-1]] = value 
```

除了最后一个元素之外的所有元素`mapList`都需要找到“父”字典来添加值，然后使用最后一个元素将值设置为右键。

演示：

```
>>> getFromDict(dataDict, ["a", "r"])
1
>>> getFromDict(dataDict, ["b", "v", "y"])
2
>>> setInDict(dataDict, ["b", "v", "w"], 4)
>>> import pprint
>>> pprint.pprint(dataDict)
{'a': {'r': 1, 's': 2, 't': 3},
 'b': {'u': 1, 'v': {'w': 4, 'x': 1, 'y': 2, 'z': 3}, 'w': 3}} 
```

请注意，Python PEP8 样式指南[规定了函数的蛇案例名称](https://www.python.org/dev/peps/pep-0008/#function-and-variable-names)。以上对于列表或字典和列表的混合同样适用，因此名称应该是`get_by_path()`and `set_by_path()`：

```
from functools import reduce  # forward compatibility for Python 3
import operator

def get_by_path(root, items):
    """Access a nested object in root by item sequence."""
    return reduce(operator.getitem, items, root)

def set_by_path(root, items, value):
    """Set a value in a nested object in root by item sequence."""
    get_by_path(root, items[:-1])[items[-1]] = value 
```

为了完成，删除键的功能：

```
def del_by_path(root, items):
    """Delete a key-value in a nested object in root by item sequence."""
    del get_by_path(root, items[:-1])[items[-1]] 
```

* * *

## 回答 #2

> 赞同：63
> 
> 时间：2016-06-08T13:47:04.693

使用循环似乎更pythonic `for`。[请参阅What's New In Python 3.0](https://docs.python.org/3.0/whatsnew/3.0.html#builtins)中的引用。

> 已删除`reduce()`。`functools.reduce()`如果您确实需要，请使用它；但是，在 99% 的情况下，显式`for`循环更具可读性。

```
def nested_get(dic, keys):    
    for key in keys:
        dic = dic[key]
    return dic 
```

请注意，接受的解决方案不会设置不存在的嵌套键（它会引发`KeyError`）。使用以下方法将创建不存在的节点：

```
def nested_set(dic, keys, value):
    for key in keys[:-1]:
        dic = dic.setdefault(key, {})
    dic[keys[-1]] = value 
```

该代码适用于 Python 2 和 3。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2016-04-29T04:38:54.187

使用 reduce 很聪明，但是如果嵌套字典中不存在父键，则 OP 的 set 方法可能会出现问题。由于这是我在谷歌搜索中看到的关于这个主题的第一篇 SO 帖子，我想让它稍微好一点。

[（在给定索引和值列表的情况下设置嵌套 python 字典中的值）中](https://stackoverflow.com/questions/13687924/setting-a-value-in-a-nested-python-dictionary-given-a-list-of-indices-and-value)的 set 方法似乎对缺少父键更健壮。复制它：

```
def nested_set(dic, keys, value):
    for key in keys[:-1]:
        dic = dic.setdefault(key, {})
    dic[keys[-1]] = value 
```

此外，有一个方法可以很方便地遍历密钥树并获取我创建的所有绝对密钥路径：

```
def keysInDict(dataDict, parent=[]):
    if not isinstance(dataDict, dict):
        return [tuple(parent)]
    else:
        return reduce(list.__add__, 
            [keysInDict(v,parent+[k]) for k,v in dataDict.items()], []) 
```

它的一种用途是使用以下代码将嵌套树转换为 pandas DataFrame（假设嵌套字典中的所有叶子都具有相同的深度）。

```
def dict_to_df(dataDict):
    ret = []
    for k in keysInDict(dataDict):
        v = np.array( getFromDict(dataDict, k), )
        v = pd.DataFrame(v)
        v.columns = pd.MultiIndex.from_product(list(k) + [v.columns])
        ret.append(v)
    return reduce(pd.DataFrame.join, ret) 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-04-29T06:02:00.523

这个库可能会有所帮助：[https ://github.com/akesterson/dpath-python](https://github.com/akesterson/dpath-python)

> 用于通过 /slashed/paths ala xpath 访问和搜索字典的 python 库
> 
> 基本上它可以让你在字典上查找，就好像它是一个文件系统一样。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-05T13:38:11.057

用递归解决了这个问题：

```
def get(d,l):
    if len(l)==1: return d[l[0]]
    return get(d[l[0]],l[1:]) 
```

使用您的示例：

```
dataDict = {
    "a":{
        "r": 1,
        "s": 2,
        "t": 3
        },
    "b":{
        "u": 1,
        "v": {
            "x": 1,
            "y": 2,
            "z": 3
        },
        "w": 3
        }
}
maplist1 = ["a", "r"]
maplist2 = ["b", "v", "y"]
print(get(dataDict, maplist1)) # 1
print(get(dataDict, maplist2)) # 2 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-03-01T02:07:58.350

与其每次要查找值时都会受到性能影响，不如将字典展平一次然后简单地查找键`b:v:y`

```
def flatten(mydict):
  new_dict = {}
  for key,value in mydict.items():
    if type(value) == dict:
      _dict = {':'.join([key, _key]):_value for _key, _value in flatten(value).items()}
      new_dict.update(_dict)
    else:
      new_dict[key]=value
  return new_dict

dataDict = {
"a":{
    "r": 1,
    "s": 2,
    "t": 3
    },
"b":{
    "u": 1,
    "v": {
        "x": 1,
        "y": 2,
        "z": 3
    },
    "w": 3
    }
}    

flat_dict = flatten(dataDict)
print flat_dict
{'b:w': 3, 'b:u': 1, 'b:v:y': 2, 'b:v:x': 1, 'b:v:z': 3, 'a:r': 1, 'a:s': 2, 'a:t': 3} 
```

通过这种方式，您可以简单地查找使用`flat_dict['b:v:y']`which will give you的项目`1`。

而不是在每次查找时遍历字典，您可以通过展平字典并保存输出来加快速度，以便从冷启动查找意味着加载展平字典并简单地执行键/值查找遍历。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-12-08T22:56:27.637

使用递归函数怎么样？

要获得一个值：

```
def getFromDict(dataDict, maplist):
    first, rest = maplist[0], maplist[1:]

    if rest: 
        # if `rest` is not empty, run the function recursively
        return getFromDict(dataDict[first], rest)
    else:
        return dataDict[first] 
```

并设置一个值：

```
def setInDict(dataDict, maplist, value):
    first, rest = maplist[0], maplist[1:]

    if rest:
        try:
            if not isinstance(dataDict[first], dict):
                # if the key is not a dict, then make it a dict
                dataDict[first] = {}
        except KeyError:
            # if key doesn't exist, create one
            dataDict[first] = {}

        setInDict(dataDict[first], rest, value)
    else:
        dataDict[first] = value 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-12-03T00:56:24.193

很高兴看到这些答案有两种静态方法来设置和获取嵌套属性。这些解决方案比使用嵌套树好得多[https://gist.github.com/hrldcpr/2012250](https://gist.github.com/hrldcpr/2012250)

这是我的实现。

**用法**：

设置嵌套属性调用`sattr(my_dict, 1, 2, 3, 5) is equal to my_dict[1][2][3][4]=5`

获取嵌套属性调用`gattr(my_dict, 1, 2)`

```
def gattr(d, *attrs):
    """
    This method receives a dict and list of attributes to return the innermost value of the give dict       
    """
    try:
        for at in attrs:
            d = d[at]
        return d
    except(KeyError, TypeError):
        return None

def sattr(d, *attrs):
    """
    Adds "val" to dict in the hierarchy mentioned via *attrs
    For ex:
    sattr(animals, "cat", "leg","fingers", 4) is equivalent to animals["cat"]["leg"]["fingers"]=4
    This method creates necessary objects until it reaches the final depth
    This behaviour is also known as autovivification and plenty of implementation are around
    This implementation addresses the corner case of replacing existing primitives
    https://gist.github.com/hrldcpr/2012250#gistcomment-1779319
    """
    for attr in attrs[:-2]:
        if type(d.get(attr)) is not dict:
            d[attr] = {}
        d = d[attr]
    d[attrs[-2]] = attrs[-1] 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-03-16T01:30:53.967

如果您不想在其中一个键不存在时引发错误，另一种方法是（这样您的主代码可以不间断地运行）：

```
def get_value(self,your_dict,*keys):
    curr_dict_ = your_dict
    for k in keys:
        v = curr_dict.get(k,None)
        if v is None:
            break
        if isinstance(v,dict):
            curr_dict = v
    return v 
```

在这种情况下，如果任何输入键不存在，则返回 None ，这可用作主代码中的检查以执行替代任务。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-02-16T14:00:54.440

纯 Python 风格，没有任何导入：

```
def nested_set(element, value, *keys):
    if type(element) is not dict:
        raise AttributeError('nested_set() expects dict as first argument.')
    if len(keys) < 2:
        raise AttributeError('nested_set() expects at least three arguments, not enough given.')

    _keys = keys[:-1]
    _element = element
    for key in _keys:
        _element = _element[key]
    _element[keys[-1]] = value

example = {"foo": { "bar": { "baz": "ok" } } }
keys = ['foo', 'bar']
nested_set(example, "yay", *keys)
print(example) 
```

输出

```
{'foo': {'bar': 'yay'}} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-08-15T09:46:38.133

如何检查然后设置 dict 元素而不处理所有索引两次？

解决方案：

```
def nested_yield(nested, keys_list):
    """
    Get current nested data by send(None) method. Allows change it to Value by calling send(Value) next time
    :param nested: list or dict of lists or dicts
    :param keys_list: list of indexes/keys
    """
    if not len(keys_list):  # assign to 1st level list
        if isinstance(nested, list):
            while True:
                nested[:] = yield nested
        else:
            raise IndexError('Only lists can take element without key')

    last_key = keys_list.pop()
    for key in keys_list:
        nested = nested[key]

    while True:
        try:
            nested[last_key] = yield nested[last_key]
        except IndexError as e:
            print('no index {} in {}'.format(last_key, nested))
            yield None 
```

示例工作流程：

```
ny = nested_yield(nested_dict, nested_address)
data_element = ny.send(None)
if data_element:
    # process element
    ...
else:
    # extend/update nested data
    ny.send(new_data_element)
    ...
ny.close() 
```

测试

```
>>> cfg= {'Options': [[1,[0]],[2,[4,[8,16]]],[3,[9]]]}
    ny = nested_yield(cfg, ['Options',1,1,1])
    ny.send(None)
[8, 16]
>>> ny.send('Hello!')
'Hello!'
>>> cfg
{'Options': [[1, [0]], [2, [4, 'Hello!']], [3, [9]]]}
>>> ny.close() 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-09T08:43:06.723

聚会很晚，但张贴以防万一这可能对将来的某人有所帮助。对于我的用例，以下功能效果最好。用于从字典中提取任何数据类型

**dict**是包含我们的值的字典

**list**是实现我们价值的“步骤”列表

```
def getnestedvalue(dict, list):

    length = len(list)
    try:
        for depth, key in enumerate(list):
            if depth == length - 1:
                output = dict[key]
                return output
            dict = dict[key]
    except (KeyError, TypeError):
        return None

    return None 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-03-06T21:30:01.930

如果您还希望能够使用包括嵌套列表和字典在内的任意 json，并很好地处理无效的查找路径，这是我的解决方案：

```
from functools import reduce

def get_furthest(s, path):
    '''
    Gets the furthest value along a given key path in a subscriptable structure.

    subscriptable, list -> any
    :param s: the subscriptable structure to examine
    :param path: the lookup path to follow
    :return: a tuple of the value at the furthest valid key, and whether the full path is valid
    '''

    def step_key(acc, key):
        s = acc[0]
        if isinstance(s, str):
            return (s, False)
        try:
            return (s[key], acc[1])
        except LookupError:
            return (s, False)

    return reduce(step_key, path, (s, True))

def get_val(s, path):
    val, successful = get_furthest(s, path)
    if successful:
        return val
    else:
        raise LookupError('Invalid lookup path: {}'.format(path))

def set_val(s, path, value):
    get_val(s, path[:-1])[path[-1]] = value 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-04-20T17:08:36.613

我用这个

```
def get_dictionary_value(dictionary_temp, variable_dictionary_keys):
     try:
          if(len(variable_dictionary_keys) == 0):
               return str(dictionary_temp)

          variable_dictionary_key = variable_dictionary_keys[0]
          variable_dictionary_keys.remove(variable_dictionary_key)

          return get_dictionary_value(dictionary_temp[variable_dictionary_key] , variable_dictionary_keys)

     except Exception as variable_exception:
          logging.error(variable_exception)

          return '' 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-05-20T19:00:32.307

您可以使用 pydash：

```
import pydash as _

_.get(dataDict, ["b", "v", "y"], default='Default') 
```

[https://pydash.readthedocs.io/en/latest/api.html](https://pydash.readthedocs.io/en/latest/api.html)

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2018-12-29T05:10:48.810

一种连接字符串的方法：

```
def get_sub_object_from_path(dict_name, map_list):
    for i in map_list:
        _string = "['%s']" % i
        dict_name += _string
    value = eval(dict_name)
    return value
#Sample:
_dict = {'new': 'person', 'time': {'for': 'one'}}
map_list = ['time', 'for']
print get_sub_object_from_path("_dict",map_list)
#Output:
#one 
```

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2019-05-01T19:00:07.467

扩展@DomTomCat 和其他人的方法，这些功能（即，通过 deepcopy 返回修改后的数据而不影响输入）设置器和映射器适用于嵌套`dict`和`list`.

二传手：

```
def set_at_path(data0, keys, value):
    data = deepcopy(data0)
    if len(keys)>1:
        if isinstance(data,dict):
            return {k:(set_by_path(v,keys[1:],value) if k==keys[0] else v) for k,v in data.items()}
        if isinstance(data,list):
            return [set_by_path(x[1],keys[1:],value) if x[0]==keys[0] else x[1] for x in enumerate(data)]
    else:
        data[keys[-1]]=value
        return data 
```

映射器：

```
def map_at_path(data0, keys, f):
    data = deepcopy(data0)
    if len(keys)>1:
        if isinstance(data,dict):
            return {k:(map_at_path(v,keys[1:],f) if k==keys[0] else v) for k,v in data.items()}
        if isinstance(data,list):
            return [map_at_path(x[1],keys[1:],f) if x[0]==keys[0] else x[1] for x in enumerate(data)]
    else:
        data[keys[-1]]=f(data[keys[-1]])
        return data 
```

* * *

## 回答 #18

> 赞同：-4
> 
> 时间：2020-02-05T07:28:11.487

您可以`eval`在 python 中使用该函数。

```
def nested_parse(nest, map_list):
    nestq = "nest['" + "']['".join(map_list) + "']"
    return eval(nestq, {'__builtins__':None}, {'nest':nest}) 
```

**解释**

对于您的示例查询：`maplist = ["b", "v", "y"]`

`nestq`将`"nest['b']['v']['y']"`是`nest`嵌套字典的位置。

`eval`内置函数执行给定的字符串。但是，重要的是要小心使用`eval`函数可能产生的漏洞。讨论可以在这里找到：

1.  [https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html](https://nedbatchelder.com/blog/201206/eval_really_is_dangerous.html)
2.  [https://www.journaldev.com/22504/python-eval-function](https://www.journaldev.com/22504/python-eval-function)

在`nested_parse()`函数中，我确保没有`__builtins__`可用的全局变量，只有可用的局部变量是`nest`字典。

# php - 通过 Apache 与数据库通信的协议是什么？

> ID：14692692
> 
> 赞同：0
> 
> 时间：2013-02-04T18:04:37.570
> 
> 标签：php

如果数据库服务器不在 Web 服务器 Apache 通过 TCP/IP 协议与数据库服务器通信，但是当数据库和 Apache 在同一台计算机上时，它们通信的协议是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:15:20.987

许多数据库服务器存在该选项 - 在类 Unix/Linux 操作系统（例如 MySQL 或 PostgreSQL）上使用**[Unix 套接字文件](http://dev.mysql.com/doc/refman/5.6/en/can-not-connect-to-server.html)**。Unix 套接字文件连接比 TCP/IP 快，但只能在连接到同一台计算机上的服务器时使用。如果您不指定主机名或指定特殊主机名，则使用 Unix 套接字文件`localhost`。

套接字文件在文件系统中显示为一个特殊文件（对于 MySQL，它默认为 /tmp/mysql.sock，除非在服务器配置中更改）。

# java - GridLayout 中 JPanel 之间的间隙

> ID：14692697
> 
> 赞同：1
> 
> 时间：2013-02-04T18:04:51.027
> 
> 标签：java, swing, awt, layout-manager, grid-layout

下面的代码生成九个单独的 JPanel，其中有 9 个按钮。九个 JPanel 使用 GridLayout 排列到一个基本 JPanel 上。然后使用 Border Layout 将此基本 JPanel 放置到 ContentPane 上。我为 JButtons 和每个单独的 JPanel 使用边框来清楚地定义它们的分隔。每个 JPanel 内的 JButton 看起来都不错，但 JPanel 之间存在间隙，这导致出现双线，这让我很烦。我尝试将每个单独的 JPanel 直接添加到 ContentPane 上，但这没有任何作用。完全被难住了，想知道是否有人有任何建议？

PS 我知道大量重复代码需要以一种糟糕的方式重新分解，它会的，这只是为了模拟目的。

谢谢，

```
import java.awt.*;
import javax.swing.*;
import javax.swing.UIManager.*;

public class View1 extends JFrame
{
    private JPanel      basePanel;
    private JPanel      childPanel1;
    private JPanel      childPanel2;
    private JPanel      childPanel3;
    private JPanel      childPanel4;
    private JPanel      childPanel5;
    private JPanel      childPanel6;
    private JPanel      childPanel7;
    private JPanel      childPanel8;
    private JPanel      childPanel9;
    private int         row = 3;
    private int         column = 3;
    private JButton[][] squares1;
    private JButton[][] squares2;
    private JButton[][] squares3;
    private JButton[][] squares4;
    private JButton[][] squares5;
    private JButton[][] squares6;
    private JButton[][] squares7;
    private JButton[][] squares8;
    private JButton[][] squares9;
    private Font        numberFont;

public View1()
{
    setSize(400,400);
    setTitle("2013");
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    basePanel  = new JPanel();
    basePanel.setLayout(new GridLayout(row, column, 0, 0));
    numberFont = new Font("sansserif", Font.BOLD, 32);

    childPanel1Setup();
    childPanel2Setup();
    childPanel3Setup();
    childPanel4Setup();
    childPanel5Setup();
    childPanel6Setup();
    childPanel7Setup();
    childPanel8Setup();
    childPanel9Setup();

    basePanel.add(childPanel1);
    basePanel.add(childPanel2);
    basePanel.add(childPanel3);
    basePanel.add(childPanel4);
    basePanel.add(childPanel5);
    basePanel.add(childPanel6);
    basePanel.add(childPanel7);
    basePanel.add(childPanel8);
    basePanel.add(childPanel9);

    Container cp = getContentPane();
    cp.setLayout(new BorderLayout());
    cp.add(basePanel, BorderLayout.CENTER);
}

public void childPanel1Setup()
{
    childPanel1 = new JPanel();
    childPanel1.setLayout(new GridLayout(row, column, 0, 0));
    childPanel1.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares1 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares1[rows][cols] = new JButton();
            squares1[rows][cols].setSize(32, 32);
            squares1[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares1[rows][cols].setBackground(Color.WHITE);
            childPanel1.add(squares1[rows][cols]);
        }
    }
}

public void childPanel2Setup()
{
    childPanel2 = new JPanel();
    childPanel2.setLayout(new GridLayout(row, column, 0, 0));
    childPanel2.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares2 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares2[rows][cols] = new JButton();
            squares2[rows][cols].setSize(32, 32);
            squares2[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares2[rows][cols].setBackground(Color.WHITE);
            childPanel2.add(squares2[rows][cols]);
        }
    }
}

public void childPanel3Setup()
{
    childPanel3 = new JPanel();
    childPanel3.setLayout(new GridLayout(row, column, 0, 0));
    childPanel3.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares3 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares3[rows][cols] = new JButton();
            squares3[rows][cols].setSize(32, 32);
            squares3[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares3[rows][cols].setBackground(Color.WHITE);
            childPanel3.add(squares3[rows][cols]);
        }
    }
}

public void childPanel4Setup()
{
    childPanel4 = new JPanel();
    childPanel4.setLayout(new GridLayout(row, column, 0, 0));
    childPanel4.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares4 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares4[rows][cols] = new JButton();
            squares4[rows][cols].setSize(32, 32);
            squares4[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares4[rows][cols].setBackground(Color.WHITE);
            childPanel4.add(squares4[rows][cols]);
        }
    }
}

public void childPanel5Setup()
{
    childPanel5 = new JPanel();
    childPanel5.setLayout(new GridLayout(row, column, 0, 0));
    childPanel5.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares5 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares5[rows][cols] = new JButton();
            squares5[rows][cols].setSize(32, 32);
            squares5[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares5[rows][cols].setBackground(Color.WHITE);
            childPanel5.add(squares5[rows][cols]);
        }
    }
}

public void childPanel6Setup()
{
    childPanel6 = new JPanel();
    childPanel6.setLayout(new GridLayout(row, column, 0, 0));
    childPanel6.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares6 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares6[rows][cols] = new JButton();
            squares6[rows][cols].setSize(32, 32);
            squares6[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares6[rows][cols].setBackground(Color.WHITE);
            childPanel6.add(squares6[rows][cols]);
        }
    }
}

public void childPanel7Setup()
{
    childPanel7 = new JPanel();
    childPanel7.setLayout(new GridLayout(row, column, 0, 0));
    childPanel7.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares7 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares7[rows][cols] = new JButton();
            squares7[rows][cols].setSize(32, 32);
            squares7[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares7[rows][cols].setBackground(Color.WHITE);
            childPanel7.add(squares7[rows][cols]);
        }
    }
}

public void childPanel8Setup()
{
    childPanel8 = new JPanel();
    childPanel8.setLayout(new GridLayout(row, column, 0, 0));
    childPanel8.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares8 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares8[rows][cols] = new JButton();
            squares8[rows][cols].setSize(32, 32);
            squares8[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares8[rows][cols].setBackground(Color.WHITE);
            childPanel8.add(squares8[rows][cols]);
        }
    }
}

public void childPanel9Setup()
{
    childPanel9 = new JPanel();
    childPanel9.setLayout(new GridLayout(row, column, 0, 0));
    childPanel9.setBorder(BorderFactory.createLineBorder(Color.BLACK));
    squares9 = new JButton[row][column];

    for(int rows = 0; rows < this.row; rows++)
    {
        for(int cols = 0; cols < this.column; cols++)
        {
            squares9[rows][cols] = new JButton();
            squares9[rows][cols].setSize(32, 32);
            squares9[rows][cols].setBorder(BorderFactory.createLineBorder(Color.BLACK));
            squares9[rows][cols].setBackground(Color.WHITE);
            childPanel9.add(squares9[rows][cols]);
        }
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-04T18:18:09.370

我相信这是因为`JPanel`s的布局管理器`FlowLayout`包含边距。创建面板时，将它们的布局设置为 GridLayout，这将为您提供 0 边距。

`setVgap(0);`你也做过`setHgap(0);`吗`GridLayout`？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:16:10.997

GridLayout 使所有组件具有相同的大小。如果它需要在 JPanel 内部布局 3x3 组件的矩阵，它是 100x100 像素，每个组件将是 33x33 像素，并且在右侧和底部会有额外的像素，因为 100 不是 3 的因数。如果 JPanel 是 101x101 像素，所有四个边缘都会有额外的像素。

考虑使用 GridBagLayout 或 Box 或其他比 GridLayout 更智能的布局。

# php - 检查与我的数据库 js 的连接的最佳方法

> ID：14692700
> 
> 赞同：0
> 
> 时间：2013-02-04T18:04:57.037
> 
> 标签：php, javascript, jquery, postgresql

我在一个 Web 界面上工作，该界面接收信息并将信息发送到远处的 PostGreSQL 数据库。

从我在互联网上找到的内容看来，最好的方法是在外部 .php 文件中创建一个小的 php 脚本。

我遵循了这个想法，

所以我有那个脚本 pg_connection.php 以这种方式测试与我的数据库的连接（使用 pg_connect）：

```
$db = pg_connect("host=localhost port=5432 dbname=**** user=**** password=****") 
or die("Not Connected");
if ($db) {echo (Connected);} else {echo (Not Connected);} 
```

如果我在我的网络浏览器中只启动那个 pg_connection.php，它工作正常（我只是用我的脚本中输入的正确登录信息写了 Connected，或者如果我输入了一个随机的 IP 地址，则没有连接）。

然后在我的 .js(+jquery) 外部脚本中使用：

```
$(document).ready(function(){
$("#dbstatus").load("php-services/pg_connection.php");
var dbstatus = new String();
dbstatus = $("#dbstatus").val();

if (dbstatus == "Connected")
{ /*jquery code to show a green light on a section in my html page*/}
else { /*jquery code to show a red light*/}
} 
```

这部分有效：

在我的 $("#dbstatus") 对象中，它将用 Connected 或 Not Connected 替换默认文本，但它不会对我的条件中的绿/红灯产生任何影响

然后我进入我的 Chrome 控制台并输入 dbstatus，我意识到我的 var 的内容是

```
<div id=​"dbstatus" class=​"span3">​Connected​&lt;/div>​ 
```

当我期望它只是“连接”时。

关于如何从所有这些额外的 html 内容中清除该 var 的任何想法？

是否有在 js 或 Jquery 中实现更简单的方法来检查 postgreSQL 数据库状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:10:28.247

而不是`$("#dbstatus").val();`使用`$("#dbstatus").html();`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:12:31.300

尝试将您的代码修改为：

```
$db = pg_connect("host=localhost port=5432 dbname=**** user=**** password=****") or die("0");
if ($db) {echo "1";} else {echo "0"} 
```

在 JS 中：

```
$(document).ready(function(){
  $.ajax({
    url: "http://fullpathto/php-services/pg_connection.php",
    cache: false
  }).done(function( result ) {
    if(result=="1") {
      /*jquery code to show a green light on a section in my html page*/
    }
    else
    {
      /*jquery code to show a red light*/}
    }
  });
}); 
```

# c++ - 返回对数据结构拥有的对象的引用

> ID：14692701
> 
> 赞同：3
> 
> 时间：2013-02-04T18:04:56.783
> 
> 标签：c++

我的套餐：

```
std::set<Object> objects; 
```

我想找到一个对象并将其作为参考返回，如果它不存在也插入它：

```
const Object& get(params...){
    Object obj(params...);
    std::set<Object>::const_iterator i = objects.find(obj);
    if(i != objects.end())
        return *i;
    objects.insert(obj);
    return * objects.find(obj);
} 
```

这可能会导致分段错误，或者这将始终有效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:08:21.977

取决于你对收藏做什么。

从 an 中插入和删除`std::set`不会使集合中其他元素的迭代器无效，但如果您要从集合中删除*该*元素，则迭代器和对它的引用将失效，您最终可能会得到一个无效的引用.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:12:13.697

不是这个代码本身。但是您可能会擦除一个对象，但稍后仍会尝试使用它的引用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:23:18.097

如果您不打算使用擦除，我也强烈反对此策略，将来的修改可能会导致讨厌的错误。

如果您的对象足够小，请通过副本返回它。

如果对象很大，也许您可​​以使用 boost 智能指针来避免分段错误。

# java - setFilterQueryAdapter 问题

> ID：14692703
> 
> 赞同：0
> 
> 时间：2013-02-04T18:05:08.950
> 
> 标签：java, android

> **可能重复：**
> [光标 setFilterQueryProvider 问题](https://stackoverflow.com/questions/14678737/cursor-setfilterqueryprovider-issue)

我正在尝试为我的列表视图设置一个编辑文本过滤器。

目前我有以下代码，但在我的 cursorAdapter 对象上的“setFilterQueryAdapter”上不断出现错误。

我的“OnCreate 方法”中有此代码，并且由于其中一个错误声称“void”的返回类型不正确，我认为它应该不在 onCreate 中，但我不确定在哪里。

希望有人能告诉我哪里出错了。这是代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

setContentView(R.layout.appointmentview);

searchedAppView = (ListView)findViewById(android.R.id.list);

searchAppoints = (ImageButton) findViewById(R.id.btnSearchAppointName); 
searchAppName = (EditText) findViewById(R.id.inputAppointName); 

    DBHandlerApp DBAppointments = new DBHandlerApp(this, null, null);

    DBHandlerApp searchApps = new DBHandlerApp(this, null, null);

    searchApps.open();

    Cursor cursor = searchApps.getAppointmentsData();
     searchApps.close();
    startManagingCursor(cursor);

    String [] from = new String [] {DBAppointments.KEY_NAMEAPP, DBAppointments.KEY_TYPEAPP, DBAppointments.KEY_TIMEAPP, DBAppointments.KEY_DATEAPP, DBAppointments.KEY_COMMENTAPP};
    int [] to = new int [] {R.id.txtAppointName, R.id.txtAppointType, R.id.txtAppointTime, R.id.txtAppointDate, R.id.txtAppointCom};

    cursorAdapter = new SimpleCursorAdapter(this, R.layout.setappointviews, cursor, from, to);
    searchedAppView.setAdapter(cursorAdapter);

    searchedAppView.setTextFilterEnabled(true);

    searchAppoints.setOnClickListener(this);

    searchAppName.addTextChangedListener(new TextWatcher()
     {

        @Override
        public void onTextChanged(CharSequence s, int start, int before,
                int count) {

        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {

        }

        @Override
        public void afterTextChanged(Editable s) {

                cursorAdapter.getFilter().filter(s.toString());

        }

     });

    DBHandlerApp changedAppoint = new DBHandlerApp (this, null, null);

             ********** ERROR **********
     cursorAdapter.setFilterQueryProvider(FilterQueryProvider()
    {
        public Cursor runQuery(CharSequence constraint)
        {
            changedAppoint.open();
            return changedAppoint.getChanges(constraint.toString());

        }
    });

    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T21:13:03.397

设法自己解决了这个问题。这主要是因为我没有导入“FilterQueryProvider”。

# brightcove - 如何检测 BrightCove 视频的结尾？

> ID：14692706
> 
> 赞同：0
> 
> 时间：2013-02-04T18:05:13.050
> 
> 标签：brightcove

这是我的javascript代码

```
$('.vdo_player1').html("<object id='myExperience185592012001' class='BrightcoveExperience'> <param name='bgcolor' value='#FFFFFF' /><param name='width' value='624' /> <param name='height' value='330' /><param name='playerID' value='1917830444001' /><param name='playerKey' value='AQ~~,AAABrLPpvnk~,7Q4Wbq_wEtPqLNVzhMk5nzVfbE6a6vSo' /> <param name='isVid' value='true' /><param name='isUI' value='true' /> <param name='dynamicStreaming' value='true' /> <param name='@videoPlayer' value='2045929343433301' /> </object> <script type='text/javascript'>brightcove.createExperiences();</script>"); 
```

视频正在正确显示。但我需要跟踪视频何时结束并基于它调用 struts 2 动作类。我该怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-06T17:05:29.700

虽然 user1190992 的答案适用于 Flash 播放器，但它不适用于 HTML5 播放器，因为它使用较旧的 Flash-only Player API。您应该使用适用于 Flash 和 HTML5 播放器的 Brightcove 的 Smart Player API。

首先为您正在使用的播放器启用 API（在 Video Cloud Studio 中，播放器设置）。

向您的播放器代码添加一些附加参数以启用 API。

```
<param name="includeAPI" value="true" /> 
<param name="templateLoadHandler" value="onTemplateLoaded" /> 
<param name="templateReadyHandler" value="onTemplateReady" /> 
```

添加 javascript 以设置事件侦听器

```
var player, modVP;

function onTemplateLoaded(experienceID) {
  player = brightcove.api.getExperience(experienceID);
  modVP = player.getModule(brightcove.api.modules.APIModules.VIDEO_PLAYER);
}

function onTemplateReady(evt) {
  modVP.addEventListener(brightcove.api.events.MediaEvent.COMPLETE, onComplete);
}

function onComplete(evt) {
  alert("Video ended");
} 
```

另请参阅 Brightcove 的文档：http: [//support.brightcove.com/en/video-cloud/docs/listening-events-using-smart-player-api](http://support.brightcove.com/en/video-cloud/docs/listening-events-using-smart-player-api)

*注意：此答案和问题是指 Brightcove 的旧版智能播放器，这不适用于当前播放器版本*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T22:25:05.617

使用[API](http://support.brightcove.com/en/video-cloud/docs/using-javascript-flash-only-player-api)，您可以编写如下函数

```
<script type="text/javascript">

   var bcExp;
   var modVP;

   function onTemplateLoaded(experienceID) {
       bcExp = brightcove.getExperience(experienceID);
       modVP = bcExp.getModule(APIModules.VIDEO_PLAYER);
       modVP.addEventListener(BCMediaEvent.COMPLETE, my_function);
   }

   function my_function(event) {
       /* DO YOUR STUFF IN HERE */
   }

</script> 
```

# java - 私有类声明

> ID：14692708
> 
> 赞同：35
> 
> 时间：2013-02-04T18:05:19.267
> 
> 标签：java, class, private

> **可能重复：**
> [Java：为什么我们可以将顶级类定义为私有的？](https://stackoverflow.com/questions/1913863/java-why-can-we-define-a-top-level-class-as-private)

为什么我们不能声明一个**私有**外部类？如果我们可以有内部私有类，那么为什么我们不能有外部私有类......？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-04T18:08:53.200

私有外部类将毫无用处，因为没有任何东西可以访问它。

查看更多详情：

[Java：为什么我们可以将顶级类定义为私有的？](https://stackoverflow.com/questions/1913863/java-why-can-we-define-a-top-level-class-as-private)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-02-04T18:07:24.410

`private`修饰符将使您的班级无法从外部访问，因此不会有任何优势，我认为这就是为什么它是非法的并且只有`public`&`abstract`是`final`允许的。

注意：即使你做不到`protected`。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-02-04T18:09:53.630

要回答您的问题：

> 如果我们可以有内部私有类，那么为什么我们不能有外部私有类......？

您可以，区别在于内部类处于“类”访问级别，而“外部”类处于“包”访问级别。来自[Oracle 教程](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)：

> 如果一个类没有修饰符（默认值，也称为包私有），则它仅在其自己的包中可见（包被命名为相关类的组 - 您将在后面的课程中了解它们。）

因此，package-private（不声明修饰符）是声明“外部”类私有所期望的效果，只是语法不同。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-04T18:19:07.020

你可以。

```
package test;

public class Test {
    public static void main(String[] args) {
        B b = new B();
    }
}

class B {
  // Essentially package-private - cannot be accessed anywhere else but inside the `test` package
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-04T18:14:21.613

你不能`private`上课，但你可以`second`上课：

```
public class App14692708 {
    public static void main(String[] args) {
        PC pc = new PC();
        System.out.println(pc);
    }
}

class PC {
    @Override
    public String toString() {
        return "I am PC instance " + super.toString();
    }
} 
```

还要记住，`static`内部类与单独的类没有区别，除了它的名称是`OuterClass.InnerClass`. 因此，如果您不想使用“闭包”，请使用静态内部类。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T18:16:47.047

private 使类只能被声明它的类访问。如果我们将整个类设为私有，则外部任何人都无法访问该类并使其无用。

内部类可以设为私有，因为外部类可以访问内部类，而如果将外部类设为私有则情况并非如此。

# java - 从 InvocationTargetException 检索 AxisFault 的示例 java 代码

> ID：14692710
> 
> 赞同：0
> 
> 时间：2013-02-04T18:05:22.077
> 
> 标签：java, invocationtargetexception

我的 InvocationTargetException 在 printStackTrace 执行时打印如下：

```
轴故障
 故障代码：file.could.not.be.created
 故障子代码：
 faultString：无法创建文件
 故障演员：
 故障节点：
 故障详情：
    {http://schemas.xmlsoap.org/soap/envelope/}故障：file.already.exists文件已经存在

无法创建文件
    在 org.apache.axis.message.SOAPFaultBuilder.createFault（SOAPFaultBuilder.java:222）
    在 org.apache.axis.message.SOAPFaultBuilder.endElement（SOAPFaultBuilder.java:129）
    在 org.apache.axis.encoding.DeserializationContext.endElement(DeserializationContext.java:1087)
    在 org.apache.xerces.parsers.AbstractSAXParser.endElement（未知来源）

```

我想从 InvocationTargetException 中检索故障代码和故障字符串：file.already.exists 文件已存在

我怎样才能做到这一点？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:28:03.327

我不确定为什么堆栈跟踪看起来像这样并且不包含实际 InvocationFailureException 的跟踪，但我假设 AxisFault 直接包装在 InvocationFailureException 中，然后解开它可能会有所帮助，例如：

```
 try {
         // here code which throws InvocationFailureException
    } catch (InvocationFailureException e) {
        Throwable rootCause = e.getRootCause();
        if (rootCause instanceof AxisFault) {
            AxisFault axFault = (AxisFault)rootCause;
            // now extract information, e.g. 
            axFault.getFaultDetails();
        }
    } 
```

如果不直接包装，您甚至可能需要递归获取根本原因。

# java - 如何限制 KeyEvent 捕获速度

> ID：14692711
> 
> 赞同：0
> 
> 时间：2013-02-04T18:05:23.970
> 
> 标签：java, awt, keylistener, keyevent

我正在制作一个相当基本的自上而下的 2D 射击游戏（想想 Space Invaders），但我遇到了 KeyEvent 每秒处理太多事件的问题。

我有这个：

```
if (e.getKeyCode() == KeyEvent.VK_SPACE){
    shoot();
} 
```

shoot() 创建一个子弹并让它向上发射，但是如果你只是按住空格来发射数百颗子弹，就会出现问题，使游戏变得微不足道。

有没有办法让它每秒只处理一个或两个按键，而忽略其余的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:10:13.720

您可以使用手工制作的计时器，使其既轻巧又易于定制，例如：

```
long lastShoot = System.currentTimeMillis();
final long threshold = 500; // 500msec = half second

public void keyPressed(KeyEvent e) { 
  if (e.getKeyCode() == KeyEvent.VK_SPACE)
  {
     long now = System.currentTimeMillis();
     if (now - lastShoot > threshold)
     {
       shoot();
       lastShoot = now;
     }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:11:51.563

在那种类型的游戏中，屏幕上一次只允许一个子弹不是通常吗？在当前子弹击中某物或从屏幕顶部消失之前，不要进行射击。

# animation - Unity3D 4 - 导入的动画 fbx 模型干扰物理

> ID：14692714
> 
> 赞同：2
> 
> 时间：2013-02-04T18:05:38.103
> 
> 标签：animation, import, unity3d, physics, fbx

我有一个 .fbx 格式的导入模型，带有预烘焙的动画。我想将物理应用于模型，但是播放动画似乎会干扰物理

当动画播放时，模型不会“坠落”/碰撞，但如果我在检查器中取消选中“动画”，我的模型会对应用于游戏对象的物理刚体/网格对撞机做出正确反应，但是当我重新打开动画模型移回其原始起始位置（但确实正确播放动画）

我究竟做错了什么？

编辑：这是我所说的“动画”复选框：

![统一显示动画组件的检查器屏幕截图](../Images/83918a3f687ee4aeee5568a17258f01f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:03:07.763

我对您所指的这个“动画”复选框有点不确定，但我有一些预感可以探索。

Unity 的物理和碰撞有多种形式，但并不是所有的都混合得很好。刚体适用于任何与物理相关的东西，但它附带了大量的字符串。例如，刚体的唯一碰撞与其他刚体（[见底部](http://docs.unity3d.com/Documentation/Components/class-CapsuleCollider.html)）。听起来你想将你的物理东西作为玩家或敌人或其他东西移动。在这方面，RigidBodys 喜忧参半。

您需要使用的设置是刚体组件的“.isKinematic”。启用此选项会关闭刚体的物理模拟，而角色控制器或其他任何东西都将作为默认设置。查看此脚本以切换物理，以便您的角色可以推动东西：[http ://answers.unity3d.com/questions/17566/how-can-i-make-my-player-a-charactercontroller-pus.html](http://answers.unity3d.com/questions/17566/how-can-i-make-my-player-a-charactercontroller-pus.html)

要记住的另一件事是，您的模型不应*在动画中*在世界范围内变换。任何转换都需要由您的游戏行为来处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:26:37.643

我能够通过遵循[这个建议](http://forum.unity3d.com/threads/60382-SOLVED-Playing-animation-moves-gameobject-to-0-0)并制作一个空的游戏对象用作容器来解决它，将刚体/网格碰撞器/脚本添加到容器游戏对象中，然后将我的模型添加为该游戏对象的子对象。这样，脚本中应用的变换将应用于容器，并且动画不再影响模型的移动！

# visual-studio - 创建将文件复制到输出目录的 Visual Studio“附加组件”

> ID：14692717
> 
> 赞同：0
> 
> 时间：2013-02-04T18:05:52.793
> 
> 标签：visual-studio, plugins

是否可以创建一个允许您将文件复制到输出目录的附加组件？我有一组用于配置的 XML 文件。我在调试时经常修改这些文件，但是当我开始调试或构建时它们不会被复制，因为它们实际上并不影响源代码文件。即使该特定文件的“复制到输出目录”设置为“始终”也是如此。

我希望能够简单地右键单击我修改的 XML 文件并选择“复制到输出目录”选项。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:28:43.510

您可以创建一个包含将这些文件复制到输出目录的命令的构建后事件。在 VB.NET 项目中，您可以在“项目设置”->“编译”->“构建事件”下找到此选项。然后在“构建后事件命令行”中键入类似 `copy .\source\file .\destination`. 也看看现有的宏。

# android - OnOptionsItemSelected() 不发送到新活动？

> ID：14692722
> 
> 赞同：0
> 
> 时间：2013-02-04T18:06:17.423
> 
> 标签：android, android-intent

```
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main_screen, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_settings:
        Intent Options = new Intent(this,
                Options.class);
        this.startActivity(Options);
        break;
    default:
        return super.onOptionsItemSelected(item);
    }

    return true;
} 
```

我的 onOptionsItemSelected() 没有将我发送到我设置的活动。它只是让我回到上一个屏幕。没有错误或任何东西，只是把我踢回屏幕？我也在清单文件中声明了 Options.class。

有任何想法吗？

**编辑：**

选项.class

```
import android.app.Activity;
import android.os.Bundle;

public class Options extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.options);
   }
} 
```

main_screen.xml

```
<menu xmlns:android="http://schemas.android.com/apk/res/android">
<item android:id="@+id/menu_settings"
    android:title="@string/menu_settings"
    android:orderInCategory="100"
    android:showAsAction="never" /> 
```

LogCat：只需将我发送到活动，然后立即返回

```
02-04 12:26:55.494: I/ActivityManager(150): Starting activity: Intent { cmp=com.app.test/.Options } from pid 7978
02-04 12:26:55.504: I/ActivityManager(150): Starting activity: Intent { cmp=com.app.test/.MainScreen (has extras) } from pid 7978 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:50:44.983

对我来说，它似乎没有进入正确的 catch 块并运行默认选项。试试看：

```
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);
    getMenuInflater().inflate(R.menu.main_screen, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
    case R.id.menu_settings:
        Intent Options = new Intent(this,
                Options.class);
        this.startActivity(Options);
        return true;
    default:
        return super.onOptionsItemSelected(item);
    }

} 
```

如果还不行，放Log或者toast之类的看看能不能进去

```
 case R.id.menu_settings: 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-24T18:57:01.180

尝试相同但没有

```
case R.id.menu_settings:
    Intent Options = new Intent(MainActivity.this, Options.class);
    startActivity(Options);
        return true; 
```

它对我有用，我希望它有所帮助。

# mongodb - MongoDB中两个字段的唯一约束

> ID：14692726
> 
> 赞同：30
> 
> 时间：2013-02-04T18:06:24.737
> 
> 标签：mongodb

我有一个包含“电子邮件”和“friends_email”字段的集合。我想使用 MongoDB 设置如下的唯一性约束：

1.  email 和friends_email 的任何记录都不会具有相同的值。所以这将是无效的：

    ```
    {"email": "abc@example.com", "friends_email": "abc@example.com" } 
    ```

2.  没有 2 条记录的所有字段的值都相同。所以下面的例子都是无效的：

    ```
    {
        { "email": "abc@example.com", "friends_email": "def@example.com" },
        { "email": "abc@example.com", "friends_email": "def@example.com" }
    }
    {
        { "email": "abc@example.com", "friends_email": null },
        { "email": "abc@example.com", "friends_email": null }
    }
    {
        { "email": null, "friends_email": "abc@example.com" },
        { "email": null, "friends_email": "abc@example.com" }
    } 
    ```

    用简单的英语来说，它类似于`email`and的连接`friends_email`将是唯一的，`null`并且`undefined`合并为空字符串。

在 MongoDB 中执行此规则的最佳方法是什么？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-02-04T18:50:04.823

听起来您需要一个复合唯一索引：

```
db.users.createIndex( { "email": 1, "friends_email": 1 }, { unique: true } ) 
```

...您可以在 ORM 层验证 email =/= friends_email。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-04T18:49:34.847

您可以在`email`和`friends_email`字段上设置复合唯一索引以确保第二种情况。但是对于第一种情况，您需要在应用程序代码中处理它，或者使用诸如 Morphia 之类的 java 映射器来进行基于字段的验证。您可能还想查看以下帖子：

> [如何在 MongoDB 中应用约束？](https://stackoverflow.com/questions/12550210/how-to-apply-constraints-in-mongodb)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-02-04T18:53:17.947

对于第二种情况，您正在寻找一个独特的复合索引吗？

```
 db.emails.ensureIndex( {email:1, friends_email:1}, { unique: true } ) 
```

至于第一种情况，我不确定是否有办法执行第一条规则。您可能需要在应用程序端执行检查。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-13T14:20:39.850

[对于#1，您可以使用Schema Validaiton](https://docs.mongodb.com/manual/core/schema-validation/)在数据库端设置检查：

```
validator: {
  "$expr": {
    "$ne": [ "$email", "$friends_email" ]
  }
}

db.runCommand( { collMod: "collectionName", validator: validator} ) 
```

# box-api - 如何通过 Box API 处理锁定的文件

> ID：14692728
> 
> 赞同：1
> 
> 时间：2013-02-04T18:06:38.187
> 
> 标签：box-api

我有一个客户在他们的 Box 帐户中有一个锁定的文件。我期望锁定文件的行为是我应该能够下载它，但不能修改它。相反，我似乎无法下载该文件或查看它的版本。以下所有请求都可以在同一用户文件夹中的相邻未锁定文件上正常工作。

这是预期的行为吗？通过 API 处理锁定文件的正确方法是什么？

**信息请求：（作品）**

```
curl 'https://api.box.com/2.0/files/<id>' -H 'Authorization: <auth_info>' 
```

回复：

```
{"type":"file","id":"<id>","sequence_id":"0"...} 
```

**版本请求：（400 错误）**

```
curl 'https://api.box.com/2.0/files/<id>/versions' -H 'Authorization: <auth_info>' 
```

回复：

```
{"type":"error","status":400,"code":"bad_request","help_url":"http:\/\/developers.box.com\/docs\/#errors","message":"Bad Request","request_id":"2054523152510ff775496b6"} 
```

**下载请求：（403错误）**

```
curl 'https://api.box.com/2.0/files/<id>/content' -H 'Authorization: <auth_info>' 
```

回复：

```
{"type":"error","status":403,"code":"access_denied_item_locked","help_url":"http:\/\/developers.box.com\/docs\/#errors","message":"Access denied - item locked","request_id":"903163092510ff81985559"} 
```

# android - 出现警报对话框时出现 IllegalStateException

> ID：14692729
> 
> 赞同：0
> 
> 时间：2013-02-04T18:06:39.477
> 
> 标签：android, android-alertdialog

我是 Android 的新手，可能我要问的是一个非常愚蠢的问题..所以请原谅我

创建 AlertDialog.... 标准方法是调用

```
AlertDialog alertDialog = new AlertDialog.Builder(Context here....).create(); 
```

然后
alertDialog.show();

但是我尝试了3种方法...

## 方式1

```
AlertDialog alertDialog = new AlertDialog.Builder(MainActivity.this).create(); 
```

## 方式2

```
AlertDialog alertDialog = new AlertDialog.Builder(this).create(); 
```

## 方式3

```
AlertDialog alertDialog = new AlertDialog.Builder(this.getApplicationContext()).create(); 
```

前 2 个工作正常，但第 3 个给出了非法状态异常......

所以我的问题是为什么它给了？？？？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:10:57.950

这个问题的答案将帮助您了解android中不同类型的上下文

[getContext() 、 getApplicationContext() 、 getBaseContext() 和“this”之间的区别](https://stackoverflow.com/questions/10641144/difference-between-getcontext-getapplicationcontext-getbasecontext-g)

与您的错误相关，android 可能不希望您的 AlertDialog 与整个应用程序上下文相关联，而只是与活动相关联。

# file - 批量比较不同文件夹中两个文件的 last-modify

> ID：14692739
> 
> 赞同：1
> 
> 时间：2013-02-04T18:07:24.057
> 
> 标签：file, batch-file

我想要一个批处理文件，它将比较`last-modify`位于两个不同文件夹中的两个不同文件的日期。如果本地文件比服务器文件旧，我想覆盖本地文件。

我所发现的只是将文件与`dir`命令进行比较，该命令仅在两个文件位于同一文件夹中时才有效（例如。`dir /b /OD file1.txt file2.txt`）。

这是我实际得到的，只需要添加比较：

```
set "source=\\server\myApp.otm"
set "target=%userprofile%\Application Data\myApp\"

copy /Y /B "%source%" "%target%"
start outlook.exe /altvba "%target%\myApp.otm" 
```

如您所见，批处理文件在此处以参数中的*VBA* *OTM* 文件启动 Outlook。如果不需要，我不想每次都从服务器复制 10MB 文件，因此需要比较`last-modify`日期（`filesize`我猜也可以）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:25:50.437

尝试`xcopy /d \\server\myapp.otm %userprofile%\...`仅当它比本地文件更新时才会复制服务器文件

# salesforce - 如何使用 SOQL 从任务对象记录中获取电子邮件

> ID：14692742
> 
> 赞同：6
> 
> 时间：2013-02-04T18:07:30.163
> 
> 标签：salesforce, soql

我正在尝试使用 SOQL 从 Task 对象获取联系人/潜在客户电子邮件（我正在 PHP 中创建一个接口来备份具有特定主题的消息）。这是我现在的查询：

```
SELECT Subject,Who.FirstName,Who.LastName,Who.Email,Who.Phone,Description FROM Task 
```

这有效/不会抛出错误并给我结果，但`Who.Email`总是空的（而且，巧合`Who.Phone`的是，但这并不是很重要）。如果我尝试仅使用`Email`，则会收到该字段不存在的错误，这很奇怪，因为`Email`它在任务字​​段下作为标准字段。

我还尝试了几次谷歌搜索，但没有找到任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-01T15:47:30.643

如前所述，Task 上的 WhoId 和 WhatId 字段是多态的（这意味着它们可以指向多个目标对象。除非您启用了[SOQL 多态](http://blogs.developerforce.com/tech-pubs/2012/09/soql-polymorphism-or-how-i-learned-to-love-the-polymorphic-relationship.html)功能，正如@eyescream 所描述的那样，您可以查询的唯一“相关”字段是那些在[“名称”API 对象](http://www.salesforce.com/us/developer/docs/api/Content/sforce_api_objects_name.htm#topic-title)上的，但也有例外，这些都记录在本文档中。

示例 1：`select Who.FirstName, Who.LastName, Who.Email from Task`

如果 Contact/Lead 填充了这些字段，这将返回 FirstName 和 LastName 的数据，但是，正如上面的文档所述，它永远不会返回 Who.Email 的结果，因为该`Who`字段的两个可能的目标对象（Contact、铅）是`User`对象。

示例 2：`select Owner.Name, Owner.Email from Case`

如果您将队列与案例对象一起使用，则案例的所有者可以是用户或组（队列是其中的一种）记录。因为`Name`和`Email`都在`Name`对象上，所以上述查询将始终返回 Name 的数据，如果目标对象是 User，它将返回 Owner.Email 的数据。

示例 3：`select What.Name, WhatId from Task where What.Type in ('Case','Account','Solution')`

这是一个非常有趣的例子，因为 Case 对象的“名称”字段实际上是`CaseNumber`，而不是名称 --- 还有一些其他标准对象具有“非标准”（讽刺）名称字段，例如 SolutionTitle，然后还有其他的甚至没有名称字段，例如`CampaignMember`. 然而，Salesforce 的多态字段在技术上指向`Name`对象的一大优点是上述查询将返回案例的结果！如果案例的 CaseNumber 为 00001234，则上述查询中的 What.Name 将返回 00001234，而对于帐户，它将返回帐户的名称，对于解决方案，它将返回解决方案标题。

在这里观察到您可以通过过滤“类型”字段来限制返回哪些目标对象也很有帮助，“类型”字段是`Name`对象上的一个特殊字段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T22:20:57.933

因为 Task 的 WhoId 和 WhatId 字段是多态的（即可以指向许多不同类型的对象），所以您不能像查询通常相关的对象那样通过它们查询关系。相反，您必须执行 2 个 SOQL 查询，第一个是获取任务信息，第二个是从联系人或线索获取谁指向的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-05T08:05:13.153

要求 Salesforce 支持在您的组织中启用“多态 SOQL”，然后您将能够确定它是潜在客户还是联系人。它目前处于开发者预览版中，但非常简洁。这是示例用法：

[http://blogs.developerforce.com/tech-pubs/2012/09/soql-polymorphism-or-how-i-learned-to-love-the-polymorphic-relationship.html](http://blogs.developerforce.com/tech-pubs/2012/09/soql-polymorphism-or-how-i-learned-to-love-the-polymorphic-relationship.html)

或者至少在您的代码中留下“TODO：重写此”注释；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-03T13:08:47.280

在控制台中尝试此操作以获取任务/事件的值

> 列表 e1=新列表（）；e1=[select Id, whoId from event WHERE id='00U9xxxxxxxxxxx']; System.debug('@@@@@'+e1);
> 
> 设置 whoId=new Set(); for（事件 e2：e1）{ whoId.add（e2.whoId）；} list c=[select name,phone,email from contact where Id IN : whoId]; System.debug('@@@@@'+c);

- - - - - - - - 结尾 - - - - - - -

谢谢

# trigger.io - iOS 上的日历崩溃

> ID：14692750
> 
> 赞同：1
> 
> 时间：2013-02-04T18:07:42.743
> 
> 标签：trigger.io

我正在使用触发日历模块，但是**在 iOS 中**调用以下代码时，它只会停止应用程序而没有任何反应——Android 上不会出现问题，但是日历中似乎没有正确输入日期：

```
var start = new Date(this.booking.startdatetime());
var end = new Date(this.booking.enddatetime());

forge.calendar.addEvent({
    title:"title",
    description:"description",
    start:start,
    end:end,
    allday:false
}, function () {            
    alert("Event added!");

}, function (content) {                    
    alert("error");

}
); 
```

永远不会到达回调，尝试捕获任何异常也不会给出结果。`new Date()`但是，当它只是作为开始/结束传递时，它可以完美地工作。

我自己的开始/日期变量具有以下格式：

```
Sun Feb 03 2013 22:00:00 GMT+0100 (Mitteleuropäische Zeit) 
```

它看起来一样`new Date()`，无论如何我猜这就是问题所在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T18:17:43.710

问题来自我的一个日期字符串格式不正确 - 通过返回网络模式并检查 Chrome 中的对象发现了这一点...

无论如何，在那方面遇到更多麻烦之后，我现在需要像这样格式化我的日期：

```
 var start = moment(this.booking.startdatetime(), "YYYY-MM-DD HH-mm-ss").toDate();
            var end = moment(this.booking.enddatetime(), "YYYY-MM-DD HH-mm-ss").toDate(); 
```

这样做通常可以工作——唯一的问题是现在，当调用日历时，它有时会从日期对象中添加或减去一到两分钟。看似随意。

日志记录告诉我在通话之前日期仍然正确`addEvent()`- 关于为什么会发生这种情况或如何调试它的任何建议？

# java - JButton 文本不在图标中并且 setBounds 不起作用

> ID：14692751
> 
> 赞同：1
> 
> 时间：2013-02-04T18:07:43.413
> 
> 标签：java, swing, jpanel, jbutton, layout-manager

我有一个这样的面板：

```
class A extends JPanel{
    private JButton button;

    A(int width, int height){
        setSize(width, height);
        button = new JButton("text");
        button.setIcon(IconLoadedHere);
        button.setBounds(50, 50, getWidth()/5, getHeight()/5);
        button.setBorder(BorderFactory.createEmptyBorder());
        add(button);
     }
} 
```

JFrame 是这样的：

```
public class window extends JFrame{
    private JPanel panel;

    public window(){
        panel = new JPanel();
         setTitle("test");
         setSize(1280, 720);
         setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
         setVisible(true);
    }
    public void loadA(){
         remove(panel);
         panel = new A(getWidth(), getHeight());
             add(panel);
         validate();
    }
} 
```

按钮有两个问题：

1.  我想在图片上加上文字，这可能吗（最好在图片中间）？目前它出现在它的左侧。（解决了）

2.  由于某些奇怪的原因`setBounds`无法正常工作，按钮总是出现在顶部中心（似乎只能在没有布局的情况下使用，是否可以将按钮的位置和大小设置为但我更喜欢？）

还有一个问题：如果我想调整窗口大小，我该怎么做才能使按钮和文本相应地调整大小？（目前只找到了一个一个改变的解决方案，有没有其他办法？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:23:08.330

要控制文本在按钮中的显示方式，您应该使用：

```
button.setHorizontalTextPosition(JButton.CENTER);
button.setVerticalTextPosition(JButton.CENTER); 
```

这会将文本放在按钮的中心。

默认情况下，水平文本位置设置为 TRAILING，这就是它位于图标一侧的原因。

对于问题的布局部分，你真的应该阅读[官方教程的相关部分](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)。TLDR：使用布局管理器，他们会为您调整大小和定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:13:48.137

setBounds() 仅在使用绝对布局时有效，而 JPanel 默认使用 FlowLayout。要禁用它，我认为它是

```
panel.setLayout(null); 
```

但是，对于绝对布局，您还必须手动设置 x/y/width/height，因此通常最好使用布局。

# python - 从其 Meta 子类中获取模型的 app_label

> ID：14692753
> 
> 赞同：1
> 
> 时间：2013-02-04T18:07:46.617
> 
> 标签：python, django

我正在尝试使用以下`db_table`配置覆盖模型：

```
class MyModel(models.Model):
    class Meta:
        db_table = "app_label_table_name" 
```

但是，我希望`app_label`以编程方式访问。

一般来说，我可以这样做：`MyModel._meta.app_label`. 但是，我没有任何运气从 Meta 旧式类范围内获得该属性。

*   `self.app_label`不起作用，因为`self`在那种情况下似乎不存在。
*   `MyModel._meta.app_label`也不起作用，可能是因为`MyModel`尚未定义。

我怎样才能`app_label`从这个上下文中以编程方式获取？还有其他方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:55:56.857

根据 django 源，`app_label`从`__module__`（[https://github.com/django/django/blob/master/django/db/models/base.py](https://github.com/django/django/blob/master/django/db/models/base.py)）属性中提取。源正在使用元类并`__module__`从传递给该元类定义的参数 attrs 中提取。这实际上是什么意思超出了我的理解，但从所有意图和目的来看，它看起来`app_label`和`__module__`在这种情况下都是一样的。

# html - 滚动页面时移动标题

> ID：14692754
> 
> 赞同：0
> 
> 时间：2013-02-04T18:07:49.640
> 
> 标签：html

我想知道是否有一个 HTML 标签可以帮助我滚动标题和滚动条？我在一些帖子中注意到它说 POSITION:FIXED，但我不确定如何将它嵌入到 html 中？另外，我想把这些 HTML 放在 JAVA 代码中，所以请帮帮我。

非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:40:48.470

你必须把“位置：固定；” 进入你的CSS。例如，如果您的标题是：

```
<h1 class="title">Title</h1> 
```

你的CSS必须是这样的：

```
.title {
    position: fixed;
} 
```

如果您没有 css 文件，则可以使用内联样式：

```
<h1 style="position: fixed;">Title</h1> 
```

# php - Formstack api一直给我同样的json

> ID：14692758
> 
> 赞同：1
> 
> 时间：2013-02-04T18:07:59.457
> 
> 标签：php, api, formstack

*于 2013 年 5 月 2 日编辑。我已经更新了 curl 代码。*

我已经建立了一个小类来使用 formstack api。我认为它有效。

问题是当我尝试从一个表单（超过 4000 个）中尝试所有潜在客户时。

我使用其页面、时间和 per_page 参数构建 url。

奇怪的是，Formstack 总是给我返回相同的 json。

我已经在浏览器中尝试了这些网址，效果很好。

```
https://www.formstack.com/api/v2/form/xxxxxxxx/submission.json?oauth_token=xxxxthisismyoauthtokenxxxxx&per_page=100&min_time=2004-11-18 18:57:45&max_time=2013-02-04 18:57:45&page=0

https://www.formstack.com/api/v2/form/xxxxxxxx/submission.json?oauth_token=xxxxthisismyoauthtokenxxxxx&per_page=100&min_time=2004-11-18 18:57:45&max_time=2013-02-04 18:57:45&page=1 
```

这是我的卷曲代码：

```
public function makeCurlGetCall($url)
{
  $curl = curl_init();
  curl_setopt($curl, CURLOPT_URL, $url);
  curl_setopt($curl, CURLOPT_HTTPGET, TRUE);
  curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);
  curl_setopt($curl, CURLOPT_HTTPHEADER,array('Content-type: application/json')); 
  curl_setopt($curl, CURLOPT_FRESH_CONNECT, 1);
  curl_setopt($curl, CURLOPT_COOKIEFILE, 'cookies.txt');
  curl_setopt($curl, CURLOPT_COOKIEJAR, 'cookies.txt');

  $result =  curl_exec($curl);
  curl_close($curl);

  return $result;
} 
```

正如我所说，如果我在 for 循环中运行 Curl 方法来构建所有页面 url，我会得到相同的 json，但如果我在浏览器中检查 url，效果会很好。

谢谢

奥斯卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:13:14.113

只需清除缓存并重新启动浏览器即可。它将起作用，浏览器正在缓存响应，并且您每次都会得到相同的响应。或者另一件事可能是循环本身可能有错误。

```
for ($i = 1; $i <=  $lead_decode->pages; $i++) 
```

# process - 进程间通信中的集合点？

> ID：14692759
> 
> 赞同：0
> 
> 时间：2013-02-04T18:08:00.650
> 
> 标签：process, operating-system, ipc, message-passing

我有两个进程通过 send() 和 receive() 进行通信。如果两者都阻塞，我知道这就是所谓的**扩展集合点**，如果发件人是非阻塞的，那么它被称为**有限集合点**。

但是当 send() 和 receive() 都是非阻塞的时会发生什么？这是另一种约会吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T22:07:35.810

如果两者都是非阻塞的，那是没有意义的。在这种情况下，会合可能发生的方式是两个人同时拨打电话。

# android - 为电话号码格式化 EditText 视图

> ID：14692764
> 
> 赞同：15
> 
> 时间：2013-02-04T18:08:15.287
> 
> 标签：android, android-edittext, format, string-formatting, phone-number

我有一个 EditText 视图，我希望它将用户的输入格式化为电话号码格式。例如，当用户输入 1234567890 时，只要输入前 3 个数字，EditText 视图就会动态地将其显示为“(123) 456-7890”。

我在我的 OnCreate 中尝试了以下操作，但它似乎对我没有任何作用......

```
EditText ET = (EditText) findViewById(R.id.add_number);
ET.addTextChangedListener(new PhoneNumberFormattingTextWatcher()); 
```

如何让用户的输入以电话号码格式显示？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2016-01-20T18:21:24.993

使用此代码，您可以制作自定义 TextWatcher 并制作您想要的任何格式：

```
ET.addTextChangedListener(new PhoneNumberFormattingTextWatcher() {
        //we need to know if the user is erasing or inputing some new character
        private boolean backspacingFlag = false;
        //we need to block the :afterTextChanges method to be called again after we just replaced the EditText text
        private boolean editedFlag = false;
        //we need to mark the cursor position and restore it after the edition
        private int cursorComplement;

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
            //we store the cursor local relative to the end of the string in the EditText before the edition
            cursorComplement = s.length()-ET.getSelectionStart();
            //we check if the user ir inputing or erasing a character
            if (count > after) {
                backspacingFlag = true;
            } else {
                backspacingFlag = false;
            }
        }

        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count) {
            // nothing to do here =D
        }

        @Override
        public void afterTextChanged(Editable s) {
            String string = s.toString();
            //what matters are the phone digits beneath the mask, so we always work with a raw string with only digits
            String phone = string.replaceAll("[^\\d]", "");

            //if the text was just edited, :afterTextChanged is called another time... so we need to verify the flag of edition
            //if the flag is false, this is a original user-typed entry. so we go on and do some magic
            if (!editedFlag) {

                //we start verifying the worst case, many characters mask need to be added
                //example: 999999999 <- 6+ digits already typed
                // masked: (999) 999-999
                if (phone.length() >= 6 && !backspacingFlag) {
                    //we will edit. next call on this textWatcher will be ignored
                    editedFlag = true;
                    //here is the core. we substring the raw digits and add the mask as convenient
                    String ans = "(" + phone.substring(0, 3) + ") " + phone.substring(3,6) + "-" + phone.substring(6);
                    ET.setText(ans);
                    //we deliver the cursor to its original position relative to the end of the string
                    ET.setSelection(ET.getText().length()-cursorComplement);

                //we end at the most simple case, when just one character mask is needed
                //example: 99999 <- 3+ digits already typed
                // masked: (999) 99
                } else if (phone.length() >= 3 && !backspacingFlag) {
                    editedFlag = true;
                    String ans = "(" +phone.substring(0, 3) + ") " + phone.substring(3);
                    ET.setText(ans);
                    ET.setSelection(ET.getText().length()-cursorComplement);
                }
            // We just edited the field, ignoring this cicle of the watcher and getting ready for the next
            } else {
                editedFlag = false;
            }
        }
    }); 
```

确保将 XML 中的 EditText 长度限制为 14 个字符

```
<EditText
    android:id="@+id/editText_phone"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="phone"
    android:lines="1"
    android:maxLength="14"/> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-12-23T18:18:41.527

第 1 步：这里是 XML 文件中输入字段的代码。

```
 <EditText
    android:id="@+id/editText_phone"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:inputType="phone"
    android:lines="1"
    android:maxLength="14"/> 
```

第 2 步：这是添加到 MainFile.java 中的代码

```
 phoneNo = (EditText)findViewById(R.id.editText_phone);
 phoneNo.addTextChangedListener(new PhoneNumberFormattingTextWatcher()); 
```

输出：它会给你像 (123)456-7890 这样的数字

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-07-19T07:39:23.020

# 尝试这个

PhoneNumberFormattingTextWatcher() 方法不起作用我尝试分配最后我得到了解决方案

1.  在你的 xml 文件中粘贴这个

    ```
    <EditText
    android:id="@+id/editTextId"
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:inputType="phone"
    android:digits="0123456789+" /> 
    ```

2.  在你的 oncreate 方法中粘贴这个

    ```
    final EditText editText = (EditText) findViewById(R.id.editTextId);
    editText.addTextChangedListener(new TextWatcher()
    {
        @Override
        public void onTextChanged(CharSequence s, int start, int before, int count)
        {
            // TODO Auto-generated method stub
        }

        @Override
        public void beforeTextChanged(CharSequence s, int start, int count, int after)
        {
            // TODO Auto-generated method stub
        }
        @Override
        public void afterTextChanged(Editable s)
        {
            String text = editText.getText().toString();
            int  textLength = editText.getText().length();
            if (text.endsWith("-") || text.endsWith(" ") || text.endsWith(" "))
                return;
            if (textLength == 1) {
                if (!text.contains("("))
                {
                    editText.setText(new StringBuilder(text).insert(text.length() - 1, "(").toString());
                    editText.setSelection(editText.getText().length());
                }
            }
            else if (textLength == 5)
            {
                if (!text.contains(")"))
                {
                    editText.setText(new StringBuilder(text).insert(text.length() - 1, ")").toString());
                    editText.setSelection(editText.getText().length());
                }
            }
            else if (textLength == 6)
            {
                editText.setText(new StringBuilder(text).insert(text.length() - 1, " ").toString());
                editText.setSelection(editText.getText().length());
            }
            else if (textLength == 10)
            {
                if (!text.contains("-"))
                {
                    editText.setText(new StringBuilder(text).insert(text.length() - 1, "-").toString());
                    editText.setSelection(editText.getText().length());
                }
            }
            else if (textLength == 15)
            {
                if (text.contains("-"))
                {
                    editText.setText(new StringBuilder(text).insert(text.length() - 1, "-").toString());
                    editText.setSelection(editText.getText().length());
                }
            }
            else if (textLength == 18)
            {
                if (text.contains("-"))
                {
                    editText.setText(new StringBuilder(text).insert(text.length() - 1, "-").toString());
                    editText.setSelection(editText.getText().length());
                }
            }
        }
    }); 
    ```

**输出**：- [![在此处输入图像描述](../Images/5f4721116abd9254380dead14e85433c.png)](https://i.stack.imgur.com/XRY0k.png)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-04T19:01:46.060

我做了一些事情，我将输入类型修改为电话，然后我使用正则表达式删除所有非数字字符： phonenumber = phonenumber.replaceAll("\D", "");

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T18:19:56.970

在您的布局中，将输入模式设置为“电话”

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputMethod](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputMethod) [http://developer.android.com/reference/android/text/InputType.html#TYPE_CLASS_PHONE](http://developer.android.com/reference/android/text/InputType.html#TYPE_CLASS_PHONE)

```
<EditText
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:inputType="phone" /> 
```

如果这不太适合您的需要，请在您的 EditText 中添加一个侦听器，并在每次击键时手动设置文本格式。

```
 editText.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            if (event.getAction() == KeyEvent.ACTION_UP) {
                // format your EditText here
            }
            return false;
        }
    }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T18:23:33.247

在您的 Java 代码中，您可以使用

`yourEditText.setInputType(InputTytpe.TYPE_CLASS_PHONE)`

或在你的 xml

`android:inputType="phone"`

[爪哇](http://developer.android.com/reference/android/text/InputType.html)

[XML](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-05T07:35:25.160

请找到以下代码：
我使用TextWatcher接口将输入的电话号码动态格式化为（XXX）XXX-XXXX。

```
UsPhoneNumberFormatter addLineNumberFormatter = new UsPhoneNumberFormatter(edittxtPhoneNo);
edittxtPhoneNo.addTextChangedListener(addLineNumberFormatter);  

public class UsPhoneNumberFormatter implements TextWatcher {
    private EditText etMobile;

    public UsPhoneNumberFormatter(EditText edt) {
        etMobile = edt;
    }

    @Override
    public void beforeTextChanged(CharSequence charSequence, int i, int i1, int i2) {
    }

    @Override
    public void onTextChanged(CharSequence charSequence, int i, int i1, int i2) {
        String text = etMobile.getText().toString();
        int textlength = etMobile.getText().length();

        if (text.endsWith(" "))
            return;

        if (textlength == 1) {
            if (!text.contains("(")) {
                etMobile.setText(new StringBuilder(text).insert(text.length() - 1, "(").toString());
                etMobile.setSelection(etMobile.getText().length());
            }
        } else if (textlength == 5) {
            if (!text.contains(")")) {
                etMobile.setText(new StringBuilder(text).insert(text.length() - 1, ")").toString());
                etMobile.setSelection(etMobile.getText().length());
            }
        } else if (textlength == 6) {
            if (!text.contains(" ")) {
                etMobile.setText(new StringBuilder(text).insert(text.length() - 1, " ").toString());
                etMobile.setSelection(etMobile.getText().length());
            }
        } else if (textlength == 10) {
            if (!text.contains("-")) {
                etMobile.setText(new StringBuilder(text).insert(text.length() - 1, "-").toString());
                etMobile.setSelection(etMobile.getText().length());
            }
        }
    }

    @Override
    public void afterTextChanged(Editable editable) {
    }
} 
```

* * *

## 回答 #8

> 赞同：-7
> 
> 时间：2013-02-04T18:13:32.317

您可以使用 JQuery validate（onkeyup 事件）来执行此操作，这样您就可以在输入时进行动态格式化（在那里考虑的不愉快体验） - 或者您可以使用 MVVM 库（例如 RAZOR 或 KnockoutJS）来执行此操作（当它们退出该字段时） .

JQuery Validate 文档站点和淘汰赛 JS 站点都提供了您想要做的示例。

# html - 是否可以用文本替换背景图像？

> ID：14692770
> 
> 赞同：0
> 
> 时间：2013-02-04T18:08:32.210
> 
> 标签：html, css

我知道可以用背景图像替换文本，但想知道是否可以以其他方式进行。我有一个 html 元素（一个 href 标记），其 background-image css 属性设置为图像，我想用一些文本替换它，但似乎不起作用。我知道我可以使用 css background-image 属性将图像删除为无，但似乎无法将其更新为文本。目前使用 CSS 将背景图像应用到它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:11:08.847

只需将您想要的文本放在 HTML 中的锚标记之间

```
<a href"#">TEXT HERE</a> 
```

注意：通常，除非给出非常好的具体原因来说明为什么您的图像上有文字，否则您应该将文字放入代码中。因此，您正在做的是转换为比以前更好的做法，这很好。

# image - 视频图像到文本提取的最佳自适应阈值方法

> ID：14692771
> 
> 赞同：1
> 
> 时间：2013-02-04T18:08:32.880
> 
> 标签：image, image-processing, threshold

我正在寻找图像二值化的最佳自适应阈值方法。我发现[了 Derek Bradley 和 Gerhard Roth 的“使用积分图像的自适应阈值”](http://people.scs.carleton.ca/~roth/iit-publications-iti/docs/gerh-50002.pdf)。您能帮我找出这次最适合对同时具有文本和其他对象的文档进行二值化的自适应阈值方法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T15:43:08.490

常用的一种是 Sauvola 二值化（如上文所述）。然而，已经提出了许多旨在改进它的系统，其中许多专门针对特定领域，例如您上面提到的论文似乎专门针对渐变照明。[这是](http://liris.cnrs.fr/christian.wolf/papers/icpr2002v.pdf)我不久前看到的一篇论文，可能是您正在寻找的。它讨论了视频中文本的二值化。作者还[为他的方法和更标准的 Sauvola 和 Niblack 方法提供了代码](http://liris.cnrs.fr/christian.wolf/software/binarize/index.html)。这可以让您比较一些结果并查看最适合您的结果。

# windows - 如何让 Git 在索引中存储 CRLF

> ID：14692773
> 
> 赞同：4
> 
> 时间：2013-02-04T18:08:37.127
> 
> 标签：windows, git, newline, git-svn

我`git-svn`在工作中使用，人们不断抱怨我使用的是`LF`'s 而不是`CRLF`'s。（我们主要是一家 Windows 商店）。

据我所知，工作副本是什么时候，什么时候`core.autocrlf`是，什么时候是原封不动的。我喜欢将其作为一个概念，但我希望它会默认出现在索引中，因为这就是 get 对 SVN 的承诺。`true``CRLF``false``LF``input``autocrlf = true``CRLF`

**有没有办法设置索引使用的结尾行？**

我见过`core.eol`，但这似乎也只设置工作副本使用的内容，而不是索引。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:19:06.077

您需要将一个名为的文件添加`.gitattributes`到项目的根目录。这将迫使每个人都提交相同的行尾。在您的情况下，如果您想强制`crlf`，您将在以下行中添加此行`.gitattributes`：

```
* text eol=crlf 
```

然后，您还可以对 repo 中的每个文件进行一次规范化，再也不用担心它：[尝试使用 git filter-branch 修复行尾，但没有运气](https://stackoverflow.com/questions/1510798/trying-to-fix-line-endings-with-git-filter-branch-but-having-no-luck/1511273#1511273)

也可以参考 github 的行尾指南：[https ://help.github.com/articles/dealing-with-line-endings](https://help.github.com/articles/dealing-with-line-endings)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T21:14:48.883

事实证明，`git-svn`使用`svn:eol-style`SVN 的属性来决定如何存储行尾。如果您进入纯 SVN 结帐并添加`svn:eol-style`set to `native`，Git 将使用 CRLF for Windows 和 LF for Linux/OSX。

我也有这些设置：

```
$ git config core.autocrlf false
$ git config core.safecrlf true 
```

`.gitattributes`我的档案里没有任何东西。

# jquery - 在jquery中顺序调用多个函数

> ID：14692776
> 
> 赞同：0
> 
> 时间：2013-02-04T18:08:46.960
> 
> 标签：jquery

> **可能重复：**
> [延迟到方法链中的下一个函数](https://stackoverflow.com/questions/14365318/delay-to-next-function-in-method-chain)

有4个功能...

```
function fn1()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 1<br/>');
    },5000);
}
function fn2()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 2<br/>');
    },4000);
}
function fn3()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 3<br/>');
    },3000);     
}
function fn4()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 4<br/>');
    },1000);
} 
```

现在，当我在按钮单击事件中一一调用这些时，它不起作用。按钮单击事件 -

```
$("#cmd_sync_tally").click(function(event){
    event.preventDefault();
    fn1();
    fn2();
    fn3();
    fn4();
}); 
```

结果应该像第一个函数 1 执行并写入值，然后是函数 2，依此类推。

```
Calling from function 4
Calling from function 3
Calling from function 2
Calling from function 1 
```

我想知道，如何使这些调用顺序，以便函数一个接一个地执行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:10:16.813

您的所有功能都是同时编程的，这是从超时计数开始的。

如果您想按顺序调用同时编程的函数，最干净的解决方案是链接它们：

```
function fn1() {   
    setTimeout(function() {
        $("#div_result_area").append('Calling from function 1<br/>');
        f2();
    },5000);
} 
```

您可以为此使用回调模式：

```
function fn1(callback) {   
    setTimeout(function() {
        $("#div_result_area").append('Calling from function 1<br/>');
        callback();
    },5000);
}
...
fn1(function(){
   fn2(function(){
      fn3(fn4)
   });
}); 
```

您还可以定义超时，以便它们相加：

```
var time = 0;
function fn1() {   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 1<br/>');
    },time+=5000);
}
function fn2()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 2<br/>');
    },time+=4000);
}
etc. 
```

但是如果你经常这样做，并且有更多想要排队的函数，那么最好的办法就是实现一个队列，就像在 jQuery 中所做的那样。[您可以在这个相关问题](https://stackoverflow.com/questions/14365318/delay-to-next-function-in-method-chain)中看到这样的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:31:22.357

您的函数以正确的顺序被调用，但超时导致它们以相反的顺序发生，因为所有超时都在脚本运行时几乎完全相同的时间设置。

换句话说，您有 4 个单独的超时设置并同时运行。

要获得您正在寻找的效果，您应该在超时时从前一个函数中调用每个函数。

```
function fn1()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 1<br/>');
        fn2();
    },5000);
}
function fn2()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 2<br/>');
        fn3();
    },4000);
}
function fn3()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 3<br/>');
        fn4();
    },3000);     
}
function fn4()
{   
    setTimeout(function()
    {
        $("#div_result_area").append('Calling from function 4<br/>');
    },1000);
}

$("#cmd_sync_tally").click(function(event){
    event.preventDefault();
    fn1();
}); 
```

[在我的jsfiddle](http://jsfiddle.net/wh1t3w0lf21/Db2cd/)上查看一个工作示例。

看起来您希望函数相隔 1 秒执行，因此如果这是您的目标，则必须将所有超时更改为 1000。

# mysql - 相同的查询每次返回不同数量的记录

> ID：14692778
> 
> 赞同：0
> 
> 时间：2013-02-04T18:09:02.653
> 
> 标签：mysql, count, records

此查询结果每次都不同：

```
update product_models
  set category_id = (select id from categories order by RAND() limit 1) 
```

重复计数： 884 条记录受到影响
878 条记录受到影响
877 条记录受到影响
892 条记录受到影响
893 条记录受到影响
883 条记录受到影响
885 条记录) 受到影响

怎么会？

### 额外信息

* * *

在类别中，产品型号中有 22 行- 产品中有 900 行
- 600
子查询没有条件，没有连接，并且始终返回单行。
主查询也没有条件或连接，所以它也应该返回一个固定的数字。

所以，每次执行应该返回 900 个产品模型，每个 pm 应该由子查询更新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:12:34.340

我不明白你为什么不明白，因为你使用随机函数来获取 categoryId 并且每次它返回一些其他 categoryId。

解释：：

每次运行此子查询时：

```
 `select id from categories order by RAND() limit 1` 
```

生成一个新的 ID，假设我们`Category1`第一次运行，`Category2`第二次等等。

所以现在每次运行你的更新都会变成::

```
First Run  :: update product_models  set category_id = Category1  
Second Run :: update product_models  set category_id = Category2
Third Run  :: update product_models  set category_id = Category3 
```

由于`product_models`不同类别的表中的行数不同，因此每次运行更新的行数都不同。希望你已经明白了原因。如果您有任何疑问，请随时询问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:14:15.980

假设您每次运行查询时数据都是相同的，原因是行数不计入`affected`数据不变的情况下。因此，如果`5`选择作为随机 ID，`5`则不计算 category_id 已有的行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:14:41.473

您正在对类别进行排序，并且每个类别都有不同数量的关联产品。或者表正在被改变。

# html - 悬停时更改链接颜色

> ID：14692779
> 
> 赞同：1
> 
> 时间：2013-02-04T18:09:17.087
> 
> 标签：html, css

对于导航栏中的链接悬停我需要给蓝色，但它不工作。相反，它显示白色。

如何解决问题？

在下面提供我的代码。

[http://jsfiddle.net/7HzPd/](http://jsfiddle.net/7HzPd/)

[http://jsfiddle.net/7HzPd/embedded/result/](http://jsfiddle.net/7HzPd/embedded/result/)

```
<div class="container">
    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </a>
    <a class="brand" href="#">
        <img alt="change" class="defieLogo" src="http://www.defie.co/designerImages/defie_logo_only.png">
    </a>
    <div class="nav-collapse collapse">
        <ul class="nav">
            <li class="active">
                <a href="/docs/examples/product.html">Product</a>
            </li>
            <li>
                <a href="/docs/examples/solution.html">Solutions</a>
            </li>
            <li>
                <a href="/docs/examples/service.html">Services</a>
            </li>
            <li class="iphonePartnerLink">
                <a href="/docs/examples/partner.html">Partners</a>
            </li>
            <li class="iphoneContactLink">
                <a href="/docs/examples/contact.html">Contact</a>
            </li>
        </ul>
        <ul class="nav" id="navSecond">
            <li class="">
                <a href="/docs/examples/partners.html">Partners</a>
            </li>
            <li>
                <a href="/docs/examples/contact.html">Contact</a>
            </li>
        </ul>
        <form class="navbar-form pull-right">
            <input class="span2" type="text" placeholder="Email">
            <input class="span2" type="password" placeholder="Password">
            <button type="submit" class="btn">Sign in</button>
        </form>
    </div>
    <!--/.nav-collapse -->
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:17:08.710

我看到的唯一悬停代码在这里：

```
.navbar-inverse .nav .active > a:hover{
       background-color: transparent;
}
.navbar-inverse .nav .active > a:hover{
      color: #14486b;
} 
```

首先你应该结合这些元素，检查你的CSS并清理一些，没有理由将它们分开。

对于您的问题，这是我看到的唯一 :hover 元素，在这种情况下，您的目标是任何具有悬停状态的锚点，该锚点也具有 .active 类，该类位于 .nav 类中，在 .navbar-inverse 类中......你是错误地定位 :hover 时，活动类一次仅适用于一个链接。

你应该有更多类似的东西：

```
.nav li a:hover {} 
```

***编辑：***

在更深的地方找到了罪魁祸首。

在第 4740 行的 bootstrap.css 中有一个悬停状态，它覆盖了您的样式。尝试在`!important`您放置的悬停上放置一个，同时确保您的样式表包含在 bootstrap.css 下方。您也可以直接编辑引导 css。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:19:53.923

这不行吗？

```
a:hover
{
background-color:blue;
} 
```

如果您愿意，只需更改`a`为更具体的内容。

# ios - 如何锁定 iPad 方向仅用于加载？

> ID：14692785
> 
> 赞同：0
> 
> 时间：2013-02-04T18:09:45.627
> 
> 标签：ios, objective-c, cocoa-touch

我有一个 iPad 应用程序，我需要它在加载过程中始终以 ladnscapeLeft 模式加载，之后它可以旋转并响应方向变化并转到任何其他方向。我怎样才能做到这一点？我尝试将 plist.info 文件更改为只有 Landscapeleft，但这会在应用程序的整个生命周期中锁定该方向。

所以澄清一下，应用程序应该只在 ladnscapeLeft 中加载，一旦加载完成，它可以响应其他方向。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-04T18:27:38.047

您需要覆盖`UIViewController`旋转事件。这是一个例子：

```
-(BOOL)shouldAutorotate
{
    return YES;
}
-(NSUInteger)supportedInterfaceOrientations
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if (appDelegate.topViewController != nil) {
        return [appDelegate.topViewController supportedInterfaceOrientations];
    } else {
        return UIInterfaceOrientationMaskPortrait;
    }
}
- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    if (appDelegate.topViewController != nil) {
        return [appDelegate.topViewController preferredInterfaceOrientationForPresentation];
    } else {
        return UIInterfaceOrientationPortrait;
    }
} 
```

# xcode - 返回#define值的函数

> ID：14692786
> 
> 赞同：0
> 
> 时间：2013-02-04T18:09:48.563
> 
> 标签：xcode, function, methods, c-preprocessor

这可能是一种奇怪的编码方式，但我仍在尝试这样做。

我有几个定义：

```
#define kVar1 @"bla bla"
#define kVar2 @"wahey"
#define kVar3 @"Unicorn" 
```

在一种方法中，我想调用一个返回这些 kVar 之一的函数。就像是

```
 -(void)method {

    int i = 1 + arc4random() %10;   
unicorn.text = [self getVarValue:i];

    } 
```

我想做getVarValue函数，问题是我不知道怎么做，也不知道在google中搜索什么关键字，因为我不知道这个东西叫什么。

```
-(????)getVarValue:(int) i {

   switch(i) {
      case 1: return kVar1; break;
      case 2: return kVar2; break;
      case 3: return kVar3; break;
      default: return kVar1; break;

    }

} 
```

那个“？？？”里面放什么 这样的事情还存在吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:12:17.603

它是一个指向`NSString`. 你的签名应该是这样`-(NSString *)getVarValue:(int) i`的。

# dataset - DataSet.xsd 的更新方法没有改变DataBase，为什么？

> ID：14692789
> 
> 赞同：0
> 
> 时间：2013-02-04T18:09:53.823
> 
> 标签：dataset, dataset-designer

我用 VS 向导制作了一个 DataSet.xds 文件。选择部分表格正常工作。现在我想从表中更新一条记录，我使用了下面的代码。

```
private void AuthorsTableAdapter(DataRow changedDataRow)
    {

            authorsTableAdapter adapter = new authorsTableAdapter();
            adapter.Update(changedDataRow);
    } 
```

此代码可以更改记录，我可以看到例如 DataGridView 中的更改，但是当我检查数据库文件或重新启动应用程序时，我意识到记录没有更改！该 Update 方法只是更改了内存中的记录，而不是数据库文件中的记录。有什么解决办法吗？

对不起我的英语，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T07:59:54.070

我删除了 DataSet，然后在没有在项目中设置数据库文件副本的情况下再次创建它。当您在项目中设置数据库文件的副本时，在构建该数据库文件的每个新解决方案中都会再次复制。这就是问题所在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:21:46.523

是否填充了适配器的 UpdateCommand 属性？

# iphone - UISlider 进度条不更新 currentTime

> ID：14692792
> 
> 赞同：0
> 
> 时间：2013-02-04T18:09:59.807
> 
> 标签：iphone, ios6, progress-bar, nstimer, uislider

我在 a`UISlider`上添加了 a 作为进度条`UIToolbar`。

```
toolbar1 = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 40)];
toolbar1.barStyle = UIBarStyleBlackOpaque;
UISlider *progressBar = [[UISlider alloc] initWithFrame:CGRectMake(105,10,175,10)];
currentTime = [[UILabel alloc] initWithFrame:CGRectMake(65,12,40,15)];
currentTime.backgroundColor = [UIColor clearColor];
currentTime.textColor = [UIColor whiteColor];
currentTime.text = @"0:00";

duration = [[UILabel alloc] initWithFrame:CGRectMake(285,12,40,15)];
duration.backgroundColor = [UIColor clearColor];
duration.textColor = [UIColor whiteColor];
duration.text = @"0:00";

NSArray *toolbarItem = [NSArray arrayWithObjects: home, flexItem1, flexItem1, slider, flexItem1, nil];
[toolbar1 setItems:toolbarItem];
[toolbar1 addSubview:progressBar];
[toolbar1 addSubview:currentTime];
[toolbar1 addSubview:duration];

// Actions
- (void)playAction:(id)sender {
if ([player isPlaying]) {
        [sender setImage:[UIImage imageNamed:@"1play.png"] forState:UIControlStateSelected];
        [player pause];
        [timer invalidate];
        timer = nil; 
    } else {
        [sender setImage:[UIImage imageNamed:@"audiopause.png"] forState:UIControlStateNormal];
        [player play];
        slidertimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(updateProgressBar:) userInfo:nil repeats:YES];
        [[NSRunLoop mainRunLoop] addTimer:progressTimer forMode:NSRunLoopCommonModes];
        timer = progressTimer;
        [timer invalidate];
    }
}
- (void)updateProgressBar:(NSTimer *)timer {

     duration.text = [NSString stringWithFormat:@"%d:%02d", (int)self.player.duration / 60, (int)self.player.duration % 60];
_progressBar.maximumValue = self.player.duration;

    currentTime.text = [NSString stringWithFormat:@"%d:%02d", (int)self.player.currentTime / 60, (int)player.currentTime % 60, nil];
    _progressBar.value = self.player.currentTime;
 } 
```

点击播放按钮时，它不显示音频的持续时间并且不更新当前时间。如果我编码错误或遗漏了什么。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:52:59.880

两件事： - 我认为您不想在 if 语句的 else 部分创建 [timer invalidate] 之后立即调用它。- 设置 currentTime.text 结束时的 ", nil" 是什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T16:23:11.860

终于解决了。

```
toolbar1 = [[UIToolbar alloc] initWithFrame:CGRectMake(0, 0, 320, 40)];

 toolbar1.barStyle = UIBarStyleBlackOpaque;

 _progressBar = [[UISlider alloc] initWithFrame:CGRectMake(105,10,175,10)];

_currentTime = [[UILabel alloc ]initWithFrame:CGRectMake(65,12,40,15)];

_currentTime.backgroundColor = [UIColor clearColor];

_currentTime.textColor = [UIColor whiteColor];

_currentTime.text = @"0:00";

_duration = [[UILabel alloc ]initWithFrame:CGRectMake(285,12,40,15)];

_duration.backgroundColor = [UIColor clearColor];

_duration.textColor = [UIColor whiteColor];

_duration.text = @"0:00";

UIBarButtonItem *sliderAsToolbarItem = [[UIBarButtonItem alloc] initWithCustomView:_progressBar];

UIBarButtonItem *flexItem1 = [[UIBarButtonItem alloc]initWithBarButtonSystemItem:UIBarButtonSystemItemFlexibleSpace
                                                                          target:nil
                                                                          action:nil];
//Add buttons to the array

NSArray *toolbarItem = [NSArray arrayWithObjects:  home, flexItem1, flexItem1, sliderAsToolbarItem, flexItem1, nil];

[toolbar1 setItems:toolbarItem];

[toolbar1 addSubview:_progressBar];

[toolbar1 addSubview:_currentTime];

[toolbar1 addSubview:_duration];

- (void)playAction:(id)sender
  {
if([player isPlaying])
{
    [sender setImage:[UIImage imageNamed:@"1play.png"] forState:UIControlStateSelected];
    [player pause];

}else{
    [sender setImage:[UIImage imageNamed:@"audiopause.png"] forState:UIControlStateNormal];
    [player play];
slidertimer = [NSTimer timerWithTimeInterval:1.0 target:self selector:@selector(updateProgressBar:) userInfo:nil repeats:YES];

   [[NSRunLoop mainRunLoop] addTimer:slidertimer forMode:NSRunLoopCommonModes];
   timer = slidertimer;

    }}

- (void)updateProgressBar:(NSTimer *)timer
 {
_duration.text = [NSString stringWithFormat:@"%d:%02d", (int)player.duration / 60, (int)player.duration % 60, nil];
_progressBar.maximumValue = player.duration;

_currentTime.text = [NSString stringWithFormat:@"%d:%02d", (int)player.currentTime / 60, (int)player.currentTime % 60, nil];
_progressBar.value = player.currentTime;

} 
```

# android - 具有 relativeLayouts 和 textView 的动态布局

> ID：14692794
> 
> 赞同：0
> 
> 时间：2013-02-04T18:10:08.323
> 
> 标签：android, android-layout, android-linearlayout

我有一个布局，侧面有 2 个 relativeLayouts，中间有一个 textView。

像这样的东西：

强化学习 || 文本视图 || 强化学习

现在，我的问题是所有东西都有一个动态大小，两个 relativeLayouts 必须始终存在于布局中，并且 textview 必须位于中心并且必须占据两个 RL 之间留下的所有空间。textView 不能位于任何 relativeLayouts 的顶部或底部。

所有这些都必须使用 xml 来完成。有什么建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T10:50:04.687

为了能够做到这一点，我在所有视图上使用了 layout_weights，并在所有视图上放置了 0dp 的宽度。

# variables - 相对于另一个变量重新排序 Stata 变量

> ID：14692797
> 
> 赞同：1
> 
> 时间：2013-02-04T18:10:15.360
> 
> 标签：variables, stata

我有这些数据：

```
Node    Time    Reorder Node
201    8:00:00  395
395    8:10:00  405
280    7:50:00  280
405    8:30:00  201 
```

我需要复制名为“时间”的向量并对其重新排序，以便保留前两列中节点号和时间之间的关系。换句话说，我想结束这个：

```
Node    Time    Reorder Node    Reorder time
201      8:00:00    395         8:10:00
395      8:10:00    405         8:30:00
280      7:50:00    280         7:50:00
405      8:30:00    201         8:00:00 
```

这在Stata中可能吗？我一直在看，`sort , stable`但`bysort`他们似乎不适合这个。

谢谢！

我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T11:12:41.040

这是一个`merge`解决方案。我把你的玩具数据集放在`ds1.dta`.

```
. use ds1, clear

. list 

       +------------------------+
       | node      time   node2 |
       |------------------------|
    1\. |  201   8:00:00     395 |
    2\. |  395   8:10:00     405 |
    3\. |  280   7:50:00     280 |
    4\. |  405   8:30:00     201 |
       +------------------------+

 . rename (node node2 time) (node2 node time2) 

 . merge 1:m node using ds1

     Result                           # of obs.
    -----------------------------------------
    not matched                             0
    matched                                 4  (_merge==3)
    -----------------------------------------

  . list 

      +------------------------------------------------+
      | node2     time2   node      time        _merge |
      |------------------------------------------------|
   1\. |   405   8:30:00    201   8:00:00   matched (3) |
   2\. |   280   7:50:00    280   7:50:00   matched (3) |
   3\. |   201   8:00:00    395   8:10:00   matched (3) |
   4\. |   395   8:10:00    405   8:30:00   matched (3) |
      +------------------------------------------------+ 
```

`rename`语法假定为 Stata 12。在 Stata 11 或更早版本中，使用单个`rename`s 或`renvars`(Stata Journal)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:50:43.037

会有一个聪明的方法基于`merge`这个数据集的一个版本本身，有人应该很高兴向你展示。

我将向您展示一种非常简单的方法，它可能有一个优点，即遵循相当透明。

我假设您的变量被调用`node`，`time`并且`node2`您`time`是一个字符串变量。

首先，我们将观察数放入一个变量中：

```
gen long obs = _n 
```

然后我们初始化一个新的时间变量。如果`time`是数字，则初始化应该是数字缺失：

```
gen time2 = "" 
```

现在我们循环观察。对于每个观察，我们找出哪个观察编号包含新节点编号的数据，然后我们使用该`time`观察的值。

```
quietly forval i = 1/`=_N' { 
    su obs if node == node2[`i'], meanonly 
    replace time2 = time[r(min)] in `i' 
} 
```

`r(min)`之后留在内存中`summarize`：它是最小值，如果每个节点在数据中恰好出现一次，这将是我们想要的值。`r(max)`甚至`r(mean)`可以正常工作。`=_N' 动态评估数据集中的观察次数。

# c++ - 提升线程：在 IOS 中，thread_info 对象在线程完成执行之前被破坏

> ID：14692802
> 
> 赞同：8
> 
> 时间：2013-02-04T18:10:17.333
> 
> 标签：c++, ios, multithreading, boost

我们的项目在多个平台上使用了一些 boost 1.48 库，包括 Windows、Mac、Android 和 IOS。在使用 IOS 时，我们能够始终如一地让项目的 IOS 版本崩溃（不平凡但可靠），并且从我们的调查中我们看到 ~thread_data_base 在线程仍在运行时在线程的 thread_info 上被调用。

这似乎是由于智能指针达到零计数而发生的，即使它显然仍在创建它并在线程中运行请求的函数的 thread_proxy 函数的范围内。这似乎发生在各种情况下 - 崩溃之间的调用堆栈并不相同，尽管有一些常见的变化。

需要明确的是 - 这通常需要运行创建数百个线程的代码，尽管同时运行的线程永远不会超过 30 个。我“很幸运”并且在跑步的早期也得到了它，但这种情况很少见。我创建了一个析构函数版本，它实际上捕获了代码：

在 libs/thread/src/pthread/thread.cpp 中：

```
thread_data_base::~thread_data_base()
 {
   boost::detail::thread_data_base* const thread_info=detail::get_current_thread_data();
   void *void_thread_info = (void *) thread_info;
   void *void_this = (void *) this;
   // is somebody destructing the thread_data other than its own thread?
   // (remember that its own which should no longer point to it anyway,
   // because of the call to detail::set_current_thread_data(0) in thread_proxy)
   if (void_thread_info) { //  == void_this) {
     __builtin_trap();
   }
 } 
```

我应该注意到（从注释掉的代码中可以看出）我之前检查过 void_thread_info == void_this 因为我只检查线程的当前 thread_info 正在杀死自己的情况。我还看到 get_current_thread_data 返回的值非零且与“this”不同的情况，这真的很奇怪。

同样，当我第一次编写该版本的代码时，我写道：

```
if (((void*)thread_info) == ((void*)this)) 
```

在运行时，我遇到了一些非常奇怪的异常，说我关于虚拟函数表或类似的东西 - 我不记得了。我决定它试图为这个对象类型调用“==”并且对此不满意，所以我如上所述重写，将转换为 void * 作为单独的代码行。这本身对我来说很可疑。我不是一个急于指责编译器的人，但是......

我还应该注意，当我们确实捕捉到这种情况发生的陷阱时，我们看到 ~shared_count 的析构函数在 Xcode 源代码的堆栈中连续出现两次。很奇怪。我们试图查看拆解，但无法从中得到太多。

再次 - 看起来这始终是 shared_count 的结果，它似乎由拥有 thread_info 的 shared_ptr 拥有，过早地达到零。

更新：似乎有可能进入达到上述陷阱的情况而不会造成任何伤害。自从解决了这个问题（见答案）我已经看到它发生了，但总是在 thread_info->run() 完成执行之后。还不明白如何......但它正在工作。

一些附加信息：

我应该注意到，通常用于为 IOS 编译 boost 的来自 Pete Goodliffe（并被其他人修改）的 boost.sh 在标题中具有以下注释：

```
: ${EXTRA_CPPFLAGS:="-DBOOST_AC_USE_PTHREADS -DBOOST_SP_USE_PTHREADS"}
# The EXTRA_CPPFLAGS definition works around a thread race issue in
# shared_ptr. I encountered this historically and have not verified that
# the fix is no longer required. Without using the posix thread primitives
# an invalid compare-and-swap ARM instruction (non-thread-safe) was used for the
# shared_ptr use count causing nasty and subtle bugs.
#
# Should perhaps also consider/use instead: -BOOST_SP_USE_PTHREADS 
```

我使用这些标志，但无济于事。

我发现以下内容非常诱人 - 看起来他们在`std::thread:`

[http://llvm.org/bugs/show_bug.cgi?format=multiple&id=12730](http://llvm.org/bugs/show_bug.cgi?format=multiple&id=12730)

这暗示了在 boost 中为 arm 处理器使用替代实现，这似乎也直接解决了这个问题： `spinlock_gcc_arm.hpp`

boost 1.48 包含的版本使用过时的臂组件。我从 boost 1.52 获取了更新版本，但我在编译它时遇到了问题。我收到以下错误：谓词指令必须在 IT 块中

我在这里找到了对该指令的类似用法的参考： [https ://zeromq.jira.com/browse/LIBZMQ-414](https://zeromq.jira.com/browse/LIBZMQ-414)

通过如下修改代码，我能够使用相同的想法来编译 1.52 代码（我插入了适当的 IT 指令）

```
__asm__ __volatile__(
 "ldrex %0, [%2]; \n"
 "cmp %0, %1; \n"
 "it ne; \n"
 "strexne %0, %1, [%2]; \n"
 BOOST_SP_ARM_BARRIER :
 "=&r"( r ): // outputs
 "r"( 1 ), "r"( &v_ ): // inputs
 "memory", "cc" ); 
```

但无论如何，这个文件中有 ifdefs 用于查找 arm 架构，但在我的环境中没有以这种方式定义。在我简单地编辑文件以便只剩下 ARM 7 代码之后，编译器抱怨 BOOST_SP_ARM_BARRIER 的定义：

在 ./boost/smart_ptr/detail/spinlock.hpp:35 包含的文件中：./boost/smart_ptr/detail/spinlock_gcc_arm.hpp:39:13: 错误：指令需要当前未启用的 CPU 功能 BOOST_SP_ARM_BARRIER : ^ ./boost /smart_ptr/detail/spinlock_gcc_arm.hpp:13:32：注意：从宏 'BOOST_SP_ARM_BARRIER' 扩展

```
# define BOOST_SP_ARM_BARRIER "dmb" 
```

有任何想法吗？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-06T20:53:36.140

想通了。事实证明，我在问题中提到的 boost.sh 脚本选择了不正确的 boost 标志来解决这个问题——而不是`BOOST_SP_USE_PTHREADS`（以及那里的另一个标志`BOOST_AC_USE_PTHREADS`），结果证明 IOS 上需要的是`BOOST_SP_USE_SPINLOCK`. 这最终给出了与问题中提到的 std::thread 问题中使用的几乎相同的解决方案。

如果您正在为任何使用 ARM 7 的现代 IOS 设备进行编译，但使用的是较旧的 bo​​ost（我们使用的是 1.48），您需要从较新的 boost（如 1.52）复制文件 spinlock_gcc_arm.hpp。该文件是针对不同 arm 架构的#ifdef，但我不清楚它正在寻找的定义是在 IOS 编译环境中使用脚本定义的。因此，您可以编辑文件（暴力但有效）或花一些时间来弄清楚如何使文件整洁和正确。

无论如何，您可能需要在问题中插入我在上面所做的额外汇编指令：“it ne; \n”我还没有回去看看我是否可以删除它，因为我有我的编译环境工作问题.

但是，我们还没有完成。如前所述，此选项在 boost 中使用的代码包括 ARM 汇编语言指令。ARM 芯片支持两个不能在给定模块中混合的指令集（不确定范围，但显然逐个文件是编译时可接受的粒度）。用于此锁定的 boost 中使用的指令包括非 Thumb 指令，但 IOS 默认使用 Thumb 指令集。升压代码知道指令集问题，检查您是否启用了**arm**但未启用**thumb**，但在 IOS 中默认情况下**thumb**处于打开状态。

让编译器生成非拇指 ARM 代码取决于您在 IOS 中使用的编译器 - Apple 的 LLVM 或 LLVM GCC。GCC 已弃用，Apple 的 LLVM 是您使用 XCode 时的默认设置。

对于默认的 Clang + Apple LLVM 4.1，您需要使用 -mno-thumb 标志进行编译。此外，您的 IOS 应用程序中使用任何使用智能指针的 boost 部分的文件也必须使用 -mno-thumb 进行编译。

要像这样编译 boost，我认为您只需将 -mno-thumb 添加到脚本中的 EXTRA_CPP_FLAGS 即可。（我实验的时候直接修改了user-config.jam，还没回去清理。）

对于您的应用程序，您需要在 Xcode 中选择您的目标，然后进入 Build Phases 选项卡，然后选择 Compile sources。您可以选择添加编译标志，因此对于每个相关文件（包括 boost），添加 -mno-thumb 标志。您可以直接在 project.pbxproj 中执行此操作，也可以在每个文件都有

```
settings = { COMPILER_FLAGS = ""; }; 
```

您只需将其更改为

```
settings = { COMPILER_FLAGS = "-mno-thumb"; }; 
```

但还有一点。您还必须修改 tools/build/v2/tools 目录中的 darwin.jam 文件。在 boost 1.48 中，有一段代码说：

```
 case arm :
    {
        options = -arch armv6;
    } 
```

这必须修改为

```
 case arm :
    {
        options = -arch armv7 ;
    } 
```

最后，在 boost.sh 脚本的 function`writeBjamUserConfig()`中，您应该删除对 -arch armv6 的引用。

如果有人知道如何更普遍、更干净地做到这一点，我相信我们都会受益。目前，这就是我已经到达的地方，我希望这将有助于其他 IOS 提升线程用户。我希望对 boost.sh IOS 脚本的各种变体进行更新。我计划稍后在此答案中添加更多链接。

**更新：**有关描述处理器级别问题的精彩文章，
请参见此处： http: [//preshing.com/20121019/this-is-why-they-call-it-a-weakly-ordered-cpu](http://preshing.com/20121019/this-is-why-they-call-it-a-weakly-ordered-cpu)

享受！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-17T08:12:04.143

我在iOS平台上使用boost.asio、boost.thread、boost.smart_ptr等，应用程序在发布模式下运行时总是崩溃，这会抛出信号sigabrt。崩溃调用堆栈是：

```
__stack_chk_fail
boost::asio::detail::completion_handle
boost::asio::detail::task_ios_service_operation::complete
boost::asio::detail::task_io_service::do_run_one
boost::asio::detail::task_ios_service::run
boost::asio::io_service::run
![when create a asio work with creating new thread and io_service][1] 
```

在尝试解决问题时，我发现了以下文章：

```
[boost-thread-threads-not-starting-on-the-iphone-ipad-in-release-build][2]

[The issue of spin_lock and thumb on iOS][3] 
```

然后我尝试在`-mno-thumb`我的项目中添加编译标志，发布模式下出现的问题就消失了。

但是，出现了一个新错误：**EXC_ARM_DA_ALIGN**，它在我尝试将网络数据转换为主机端时崩溃。

正如[本文][4] 所说，**ARM**指令严格要求内存数据必须对齐。

并按照文章，我通过使用数据转换来`[Exc_arm_da_align][5]`修复它，而不是直接从指针转换。`memcpy`

```
 [1]: http://i.stack.imgur.com/3ijF4.png
  [2]: http://stackoverflow.com/questions/4201262/boost-thread-threads-not-starting-on-the-iphone-ipad-in-release-builds/4245821#4245821
  [3]: http://groups.google.com/group/boost-list/browse_thread/thread/7dc1e80659182ab3
  [4]: https://brewx.qualcomm.com/bws/content/gi/common/appseng/en/knowledgebase/docs/kb95.html
  [5]: http://www.cnblogs.com/unionfind/archive/2013/02/25/2932262.html 
```

# android - 没有标题栏 Android 主题

> ID：14692808
> 
> 赞同：15
> 
> 时间：2013-02-04T18:10:40.673
> 
> 标签：android, android-layout, android-theme

在我的应用程序中，我想使用 Theme.NoTitleBar，但另一方面我也不想松开 Android 操作系统的内部主题。我在网上搜索并找到了以下答案。我已经修改了我的styles.xml 并添加了以下代码行..

里面的 values/styles.xml

```
<style name="Theme.Default" parent="@android:style/Theme"></style>
<style name="Theme.NoTitle" parent="@android:style/Theme.NoTitleBar"></style>
<style name="Theme.FullScreen" parent="@android:style/Theme.NoTitleBar.Fullscreen"></style> 
```

里面 values-v11/styles.xml

```
<style name="Theme.Default" parent="@android:style/Theme.Holo"></style>
<style name="Theme.NoTitle" parent="@android:style/Theme.Holo.NoActionBar"></style>
<style name="Theme.FullScreen" parent="@android:style/Theme.Holo.NoActionBar.Fullscreen"></style> 
```

里面 values-v14/styles.xml

```
<style name="Theme.Default" parent="@android:style/Theme.Holo.Light"></style>
<style name="Theme.NoTitle" parent="@android:style/Theme.Holo.Light.NoActionBar"></style>
<style name="Theme.FullScreen" parent="@android:style/Theme.Holo.Light.NoActionBar.Fullscreen"></style> 
```

在 Manifest 文件的**应用程序**标记中，我添加了以下属性：

```
android:theme="@style/Theme.NoTitle" 
```

但是当我尝试运行代码时，我的应用程序中的图像变得模糊。但是当我使用以下标签时：

```
android:theme="@android:style/Theme.NoTitleBar" 
```

或者

```
android:theme="@android:style/Theme.Light.NoTitleBar" 
```

或者

```
android:theme="@android:style/Theme.Black.NoTitleBar" 
```

应用程序中的图像以正确的形式出现......但在这种情况下，我失去了新 Android 操作系统上的所有主题......

请帮助我如何在不丢失图像和本机主题的情况下使用 NoTitleBar 主题..

布局代码：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/mainScreen"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

<include
    android:id="@+id/main_top_bar"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    layout="@layout/top_bar_title" />

<RelativeLayout
    android:id="@+id/container_bar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/main_top_bar"
    android:layout_marginTop="-3dp"
    android:background="@drawable/tab_nav_bar" >
</RelativeLayout>

<RelativeLayout
    android:id="@+id/container_bar2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/container_bar1"
    android:background="@drawable/location_nav_bar" >

    <TableLayout
        android:id="@+id/map_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginLeft="10dp"
        android:paddingBottom="5dp"
        android:background="@drawable/map_bar_bg" >

        <TableRow
            android:id="@+id/tableRow1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/MapPointer"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="8dp"
                android:background="@drawable/map_pointer" />

            <TextView
                android:id="@+id/MapSeperator"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="2dp"
                android:layout_marginTop="2dp"
                android:text="|"
                android:textColor="#979ca0"
                android:textSize="20dp" />

            <com.pnf.myevent.CustomTextView
                android:id="@+id/DisplayLocation"
                android:layout_width="80dp"
                android:layout_height="wrap_content"
                android:ellipsize="marquee"
                android:fadingEdge="horizontal"
                android:marqueeRepeatLimit="marquee_forever"
                android:paddingLeft="5dp"
                android:scrollHorizontally="true"
                android:singleLine="true"
                android:textColor="#adabad"
                android:textSize="12dp" />

            <Button
                android:id="@+id/RefreshBtn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_marginLeft="3dp"
                android:background="@drawable/refresh_button" />
        </TableRow>
    </TableLayout>

    <TableLayout
        android:id="@+id/calendar_bar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_centerVertical="true"
        android:layout_marginRight="10dp" >

        <TableRow
            android:id="@+id/tableRow2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <Button
                android:id="@+id/MonthBtn"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/month_button" />

            <Button
                android:id="@+id/TodayBtn"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/today_button" />

            <Button
                android:id="@+id/WeekBtn"
                android:layout_width="40dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:background="@drawable/week_button" />
        </TableRow>
    </TableLayout>
</RelativeLayout>

<RelativeLayout
    android:id="@+id/container_bar3"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/container_bar2"
    android:background="@drawable/cal_nav_bar" >

    <Button
        android:id="@+id/CalPrevious"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="30dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/left_arrow_button" />

    <com.pnf.myevent.CustomTextView
        android:id="@+id/CalTitle"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="5dp"
        android:shadowColor="#ffffff"
        android:shadowDx="0"
        android:shadowDy="2"
        android:shadowRadius="1"
        android:text="Title"
        android:textColor="#666666"
        android:textSize="15dp" />

    <Button
        android:id="@+id/CalNext"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_marginRight="30dp"
        android:layout_marginTop="5dp"
        android:background="@drawable/right_arrow_button" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/container_bar4"
    android:layout_width="match_parent"
    android:layout_height="200dp"
    android:layout_below="@+id/container_bar3"
    android:background="#c8c9cc" >

    <GridView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/gridView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:gravity="center"
        android:horizontalSpacing="2dp"
        android:listSelector="#00000000"
        android:numColumns="7"
        android:stretchMode="columnWidth"
        android:verticalSpacing="2dp" />
</RelativeLayout>

<RelativeLayout
    android:id="@+id/footer_bar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@+id/container_bar4" >

    <ListView
        android:id="@+id/CalendarList"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:listSelector="#00000000"
        android:cacheColorHint="#00000000"
        android:divider="#dedede"
        android:dividerHeight="1dp"
        android:drawSelectorOnTop="false" />
</RelativeLayout> 
```

![图像变得模糊](../Images/ec866aaf7453dc7895c0a7f87ec05aa1.png)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-23T15:18:47.987

如果您希望保留 Ui 的原始样式并删除标题栏而不对此产生任何影响，则必须删除活动中的标题栏而不是清单。保留您在清单中的原始主题样式以及您希望在**之前**`this.requestWindowFeature(Window.FEATURE_NO_TITLE);`的`oncreate()`方法中不使用标题栏的每个活动，如下所示： **`setcontentview()`**

 **```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE);
    setContentView(R.layout.activity_signup);
    ...
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2014-02-07T17:29:19.910

要隐藏操作栏，请在值/样式中添加以下代码

```
<style name="CustomActivityThemeNoActionBar" parent="@android:style/Theme.Holo.Light">
    <item name="android:windowActionBar">false</item>
    <item name="android:windowNoTitle">true</item>
</style> 
```

然后在您的 AndroidManifest.xml 文件中，在所需的活动中添加以下代码

```
<activity
        android:name="com.newbelievers.android.NBMenu"
        android:label="@string/title_activity_nbmenu"
        android:theme="@style/CustomActivityThemeNoActionBar">
</activity> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-04-29T22:12:35.063

In your manifest use:-

```
 android:theme="@style/AppTheme" > 
```

in styles.xml:-

```
<!-- Application theme. -->
<style name="AppTheme" parent="AppBaseTheme">
       <item name="android:windowActionBar">false</item>
   <item name="android:windowNoTitle">true</item>
</style> 
```

Surprisingly this works as yo desire, Using the same parent of AppBaseTheme in AppTheme does not.

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-02T07:01:34.127

为什么要更改 android os 内置**主题**。

根据您的活动要求您必须以这种方式实施

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

按照`@arianoo`说你必须使用这个功能。

我认为这是**隐藏标题栏主题的更好方法。**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-24T06:46:03.380

在您的styles.xml 中，修改样式“AppTheme”，如

```
 <!-- Application theme. -->
    <style name="AppTheme" parent="AppBaseTheme">
        <item name="android:windowActionBar">false</item>
        <item name="android:windowNoTitle">true</item> 
    </style> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-05-16T04:43:03.583

在清单文件的应用程序标签中使用`android:theme="@android:style/Theme.NoTitleBar`以删除整个应用程序的标题栏，或将其放在活动标签中以从单个活动屏幕中删除标题栏。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-05T07:21:39.403

```
 this.requestWindowFeature(getWindow().FEATURE_NO_TITLE); 
```**

# ios - NSError 没有被填充

> ID：14692813
> 
> 赞同：1
> 
> 时间：2013-02-04T18:10:51.473
> 
> 标签：ios, objective-c, nserror

在我使用该方法之前几次...

```
NSURLResponse *response;
NSError *error;

NSData *data = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error]; 
```

在 NSOperation 中同步发送/接收数据并且它已经工作。

我现在正在开发一个新项目（新 API、新服务器），但没有填充错误。

我正在使用 Charles 代理来窥探网络流量，我可以看到来自 Charles 中的失败请求的“响应代码 500 内部服务器错误”，但在应用程序中，错误对象始终为零。

就像我说的，我之前使用过这个负载，如果发生错误，总是会填充错误。

服务器端有什么我可以向服务器端开发人员指出的东西吗？他坚持认为我一定做错了什么。我唯一不明白的是查尔斯正在从中获取响应代码 500。

注意问题不在于错误正在发生。问题是，当它确实发生时，NSError 对象没有将它报告给我。只是为了清除它，以防有人告诉我要求服务器开发人员修复错误。:-)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T18:31:56.050

你的错误对象没有被填充，因为从 NSURLConnection 的角度来看请求是成功的——也就是说，它能够向服务器发送数据并接收响应。

对于特定于协议的错误，您需要检查返回的 NSURLResponse。在这种情况下，将响应转换为 NSHTTPURLResponse 并调用`-statusCode`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T19:45:06.387

仅当服务器没有响应或不是有效的 HTTP 响应（例如连接丢失等）时才会填充错误。

“Response Code 500 Internal Server Error”是指发生了内部服务器错误，你的服务器返回了一个响应码为500的HTTP报文。你应该使用`NSHTTPURLResponse`代替`NSURLResponse`并调用该`statusCode`方法来检查HTTP响应码。如果响应代码以 2 开头，一切都很好。所以我通常有这样的支票：`statusCode / 100 == 2`.

有关更多 HTTP 响应代码，请参阅[http://en.wikipedia.org/w/index.php?title=HTTP_response_codes](http://en.wikipedia.org/w/index.php?title=HTTP_response_codes)

# algorithm - 迷宫算法生成最难的迷宫？

> ID：14692818
> 
> 赞同：7
> 
> 时间：2013-02-04T18:11:05.087
> 
> 标签：algorithm, maze

我一直在玩递归回溯算法，但它总是会产生非常简单的迷宫。什么算法产生最难解决的迷宫（如果合适，请包括关于辫子和偏向方向的信息）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-04-24T20:28:55.930

定量定义迷宫的“难度”并不容易。所以让我定性。

首先，Recursive Backtracker 是一种“完美迷宫”算法；它生成具有一种且只有一种解决方案的迷宫。大多数关于迷宫生成的工作都与生成完美迷宫有关，所以我将把我的答案限制在这些方面。

迷宫算法有很多很多变体和分支。但实际上，只有 12 种基本的迷宫算法。我将它们按照我个人（定性和传闻）认为最困难的顺序列出在这里：

1.  [克鲁斯卡尔的](http://weblog.jamisbuck.org/2011/1/3/maze-generation-kruskal-s-algorithm)
2.  [普里姆](http://weblog.jamisbuck.org/2011/1/10/maze-generation-prim-s-algorithm)
3.  [递归回溯](http://weblog.jamisbuck.org/2010/12/27/maze-generation-recursive-backtracking)
4.  [奥尔德斯-布罗德](http://weblog.jamisbuck.org/2011/1/17/maze-generation-aldous-broder-algorithm)
5.  [生长的树](http://weblog.jamisbuck.org/2011/1/27/maze-generation-growing-tree-algorithm)
6.  [猎杀](http://weblog.jamisbuck.org/2011/1/24/maze-generation-hunt-and-kill-algorithm)
7.  [威尔逊](http://weblog.jamisbuck.org/2011/1/20/maze-generation-wilson-s-algorithm)
8.  [埃勒的](http://weblog.jamisbuck.org/2010/12/29/maze-generation-eller-s-algorithm)
9.  [元胞自动机](https://en.wikipedia.org/wiki/Maze_generation_algorithm#Cellular_automaton_algorithms) （简单）
10.  [递归除法](http://weblog.jamisbuck.org/2011/1/12/maze-generation-recursive-division-algorithm) （非常简单）
11.  [响尾蛇](http://weblog.jamisbuck.org/2011/2/3/maze-generation-sidewinder-algorithm) （可预测）
12.  [二叉树](http://weblog.jamisbuck.org/2011/2/1/maze-generation-binary-tree-algorithm) （有缺陷）

我的榜单前四名的难度差别不大。对于那个很抱歉。您的实施中可能存在缺陷。很可能，你只是擅长做迷宫。尝试使它们更大。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-21T00:47:44.760

虽然不是一个直接的答案，[但这篇关于可视化迷宫生成算法](http://bost.ocks.org/mike/algorithms/#maze-generation)的文章是必看的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-23T13:33:26.867

深度优先搜索可以产生非常复杂的迷宫。这是一个开源 C++ 实现：[https ://github.com/corporateshark/random-maze-generator](https://github.com/corporateshark/random-maze-generator)

尝试设置`ImageSize`为 4096 和`NumCells`2047。结果将非常困难。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-13T07:32:42.167

您可以从这里检查迷宫生成算法：

[迷宫分类](http://www.astrolog.org/labyrnth/algrithm.htm)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-28T04:29:36.677

洪水填充算法是 IEEE 推荐的。

这个算法有很多版本。我在谷歌上搜索了洪水填充算法的实现。
但我没有找到实现

# module - 在另一个果园模块中使用 imageresizer 不起作用

> ID：14692819
> 
> 赞同：1
> 
> 时间：2013-02-04T18:11:05.983
> 
> 标签：module, namespaces, orchardcms, image-resizing

我想 在( )中使用[Image Resizer 模块。](https://github.com/pnmcosta/orchardcontribthumbnails)`Nwazet.ZenGallery Module``ZenGallery.cshtml`

但不知何故，它不起作用。当我`@Html.Thumnail(...)`在主题中使用内部视图时，它可以工作，但不能在 ZenGallery 模块的视图中使用。为什么？

它说`The type or namespace name 'Contrib' could not be found (are you missing a using directive or an assembly reference?)`

我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-10T16:30:38.747

我强烈建议直接使用[ImageResizer而不是](http://imageresizing.net)[Orchard Contrib.Thumbnails](https://github.com/pnmcosta/orchardcontribthumbnails)。

Contrib.Thumbnails 违反了[ImageResizer 最佳实践](http://imageresizing.net/docs/best-practices)，并采用了已知稳定性问题的方法。

也不需要 Contrib.Thumbnails；ImageResizer 已经提供[了一个可以直接使用的 URL API](http://imageresizing.net/docs/basics)，具有更好的性能、稳定性和更简洁的语法。

# python - 从可执行文件编译 py2exe

> ID：14692822
> 
> 赞同：3
> 
> 时间：2013-02-04T18:11:09.813
> 
> 标签：python, py2exe

我在这个网站上看到了一个类似的问题，但没有正确回答我的要求。我对 py2exe 相当熟悉。

我想创建一个程序（在 python 和 py2exe 中），我可以分发给我的客户，这将使他们能够添加自己的数据（不是代码，只是数字）并作为新的/修改后的 exe 重新分发以进一步分发（如一个文件，所以我的代码+数据）。我知道这可以通过多个文件来完成。

如果我的客户没有安装 python，这在概念上是否可行？我想我在问如何执行“bundlefiles”选项？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:10:27.093

我认为这是可能的。我不确定 py2exe 是如何工作的，但我知道 pyinstaller 是如何工作的，因为两者都做同样的事情，所以它应该工作类似。

也就是说，一个文件标志并没有真正创建一个文件。对于最终用户来说看起来像这样，但是当用户运行应用程序时，它会自行解包，文件会物理存储在某个地方。您可以尝试编辑一些源文件（即 numbers.py 或 data.py）并使用更改的数据再次打包。

我知道这不是最好的解释，你必须自己进一步思考。我只是向你展示可能的方法。

# jquery - HTML 表格和悬停图像和链接

> ID：14692828
> 
> 赞同：1
> 
> 时间：2013-02-04T18:11:23.493
> 
> 标签：jquery, html, css, html-table, hover

我有一个客户，他有一个 HTML 表格布局（我知道，我知道），其中一行中有图像，然后在下一行中有相应的文本链接。图像和文本都是单独的超链接，没有下划线的样式（此处代码中未显示）。

```
<table>
<tr>
<td><a href="product1"><img src="productimage1.jpg" /></a></td>
<td><a href="product2"><img src="productimage2.jpg" /></a></td>
<td><a href="product3"><img src="productimage3.jpg" /></a></td>
<td><a href="product4"><img src="productimage4.jpg" /></a></td>
</tr>
<tr>
<td><a href="product1">Product1</a></td>
<td><a href="product2">Product2</a></td>
<td><a href="product3">Product3</a></td>
<td><a href="product4">Product4</a></td>
</tr>
</table> 
```

我知道在 CSS 中，可以在文本链接上实现下划线悬停。问题是，用户是否可以将鼠标悬停在图像上（在表格行中）并让相应的文本链接（在下一个表格行中）有下划线？例如，如果我将鼠标悬停在“productimage3.jpg”上，那么我希望 Product3 链接带有下划线（并且在悬停关闭时不带下划线）。我想用 jQuery 可以做一些事情，但我是一个 jQuery 菜鸟。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:17:37.053

CSS：

```
.hovered {
    text-decoration : underline;
} 
```

jQuery：

```
$('a').hover(function(){
    $('a[href="' + $(this).attr('href') + '"]').toggleClass('hovered');
}); 
```

演示：http: [//jsfiddle.net/Gs5Q5/1/](http://jsfiddle.net/Gs5Q5/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:15:34.197

你可以这样做：

```
$('img').closest('td').hover(function(){
    $(this).closest('tr').next()
      .find('td').eq(this.cellIndex)
      .find('a').css('text-decoration','underline');
},function(){
    $(this).closest('tr').next()
      .find('td').eq(this.cellIndex)
      .find('a').css('text-decoration','none');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6EYpD/3/)。

但是在相关方面使用类会更容易一些`td`：

```
$('img').closest('td').hover(function(){
    $(this).closest('tr').next()
      .find('td').eq(this.cellIndex)
      .addClass('underlines');
},function(){
    $(this).closest('tr').next()
      .find('td').eq(this.cellIndex)
      .removeClass('underlines');
}); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/6EYpD/2/)。

参考：

*   jQuery，来自[jQuery API](http://api.jquery.com/)。
    *   [`addClass()`](http://api.jquery.com/addClass/).
    *   [`closest()`](http://api.jquery.com/closest/).
    *   [`css()`](http://api.jquery.com/css/).
    *   [`eq()`](http://api.jquery.com/eq/).
    *   [`find()`](http://api.jquery.com/find/).
    *   [`next()`](http://api.jquery.com/next/).
    *   [`removeClass()`](http://api.jquery.com/removeClass/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:34:33.487

使用 Jquery，您可以执行类似的操作

```
<head>
    <script src="jquery.js"></script>
    <style>
    a{text-decoration: none}
    </style>
</head>

<body>

<table>
    <tr>
        <td class="image"><a href="product1"><img src="http://placehold.it/50x50" /></a></td>
        <td class="image"><a href="product2"><img src="http://placehold.it/50x50" /></a></td>
        <td class="image"><a href="product3"><img src="http://placehold.it/50x50" /></a></td>
    <td class="image"><a href="product4"><img src="http://placehold.it/50x50" /></a></td>
    </tr>
    <tr>
        <td class="title"><a href="product1">Product1</a></td>
        <td class="title"><a href="product2">Product2</a></td>
        <td class="title"><a href="product3">Product3</a></td>
        <td class="title"><a href="product4">Product4</a></td>
    </tr>
    </table>

<script>
    $(function() {

    var items  = $('.image');
    var titles  =  $(".title");
    var index;
    var title;

    $(".image").on("mouseover", function(){
        index = items.index(this);
        title = titles[index];
        $(title).css("text-decoration", "underline");
    });

    $(".image").on("mouseout", function(){
        $(titles).css("text-decoration", "none");
    });

    });

</script>

</body> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T18:24:07.587

我会这样做（[演示](http://jsfiddle.net/Mottie/fMtCM/)）：

```
$('img').on('mouseover mouseleave', function(e){
    // figure out which table cell we're in
    var column = $(this).closest('td').index();
    // find tr, then jump to the next row
    $(this).closest('tr').next()
        // now find the correct column, then the link inside
        .find('td').eq(column).find('a')
        // add/remove hover class depending on the event
        .toggleClass('hover', e.type === 'mouseover');
}); 
```

使用这个 CSS：

```
a:hover, a.hover {
    text-decoration: underline;
} 
```

# visual-studio-2010 - Visual Studio 2010，QT 和智能感知/高亮错误

> ID：14692830
> 
> 赞同：3
> 
> 时间：2013-02-04T18:11:34.143
> 
> 标签：visual-studio-2010, visual-c++, qt5

您好，VisualStudio 2010 和 QT5 插件有问题，VisualStudio 似乎无法识别 QT 库（尽管我已经安装了插件并遵循了整个过程）。

这就是我所看到的： [https ://www.dropbox.com/s/yyzvfev0zoj8x9n/visualstrudel.jpg](https://www.dropbox.com/s/yyzvfev0zoj8x9n/visualstrudel.jpg)

因此，IDE 会突出显示 QT 内容，例如文件是否不存在，并且 Intellisense 无法正常工作。但是，如果我编译该应用程序，它编译时不会出错，并且工作起来就像一个魅力。

突出显示/智能感知问题的原因可能是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-15T07:12:50.343

您不能直接启动 Visual Studio 2010。

您需要从 Program Files->Qt 5.0.1->5.0.1 启动 QT 5.0.1 for Desktop(MSVC 2010) 命令行

之后，您需要运行 vcvarsall.bat 和 devenv。

```
x:\program files(x86)\Microsoft Visual Studio 10.0.\VC\vcvarsall.bat
x:\program files(x86)\Microsoft Visual Studio 10.0.\Common7\IDE\devenv.exe 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-29T04:00:44.840

这适用于**VS2012**和**Qt4.5.0**，尽管我相信 Qt 版本无关紧要。我不确定它是否与 VS2010 相同/相似，但我在寻找 VS2012 相同问题的答案时偶然发现了这篇文章。

这是您可以执行的操作：

1.  右键单击解决方案中的项目并选择**Properties**。
2.  选择**配置属性**-> **VC++ 目录**。
3.  编辑**包括目录**条目。
4.  将**$(QTDIR)\include\QtCore**和任何其他（项目需要）Qt 文件夹添加到列表中（这取决于您使用的 Qt 头文件）。
5.  不幸的是，必须对解决方案中使用 Qt 的每个项目执行此操作。

现在，还有另一个注意事项：我们正在将我们的解决方案从 VS2005 转移到 VS2012，当我在设置**QTDIR**环境变量**之前转换解决方案 2005->2012 时，这个问题发生在我身上。**当我再次重新转换解决方案时（创建了**AFTER** * *QTDIR* * 变量），问题没有出现。因此，在您第一次打开/转换您的解决方案之前，请确保您拥有此变量。

 *****根据前面的说明，我认为与该问题相关的一些信息存储在以下文件之一中：**.sdf**和/或**.v11.suo**。因此关闭 VS，删除这些文件并再次打开 VS 可能会有所帮助。在你做之前备份它们 - 我自己没有尝试过（我只是重新导入了重新生成这些文件的整个解决方案）。*****

# ios - 在越狱的 iDevice 上测试应用程序（有证书）

> ID：14692834
> 
> 赞同：-1
> 
> 时间：2013-02-04T18:11:48.937
> 
> 标签：ios, objective-c, jailbreak

我想越狱我的 iDevice 并在越狱设备上测试我的应用程序（它使用 Game Center，因此需要沙盒环境）。现在我知道越狱就是要走出沙箱——在那种情况下，我该怎么办？

谢谢！

注意：我有 Apple 的合法证书

编辑：我是一名注册的 Apple 开发人员，我只想在我的越狱设备上测试我的应用程序 - 我想知道我是否可以做到这一点，如果不能，我只会无缘无故地打扰自己，因为我需要恢复...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T20:26:25.767

官方应用程序，例如来自应用程序商店的应用程序，仍然遵循 Apple 制定的规则。我看到人们在越狱设备后遇到 Game Center 问题，但他们不是开发人员/开发任何东西，问题通常得到解决。

无论如何，我有一个用于测试我制作的应用程序的越狱设备。我是一名注册开发者，我的手机越狱没有遇到任何问题。

# c# - 将DataTable绑定到ComboBox，返回所选项目WPF c#的主键

> ID：14692835
> 
> 赞同：0
> 
> 时间：2013-02-04T18:11:49.397
> 
> 标签：c#, wpf, data-binding, wpf-controls

这似乎是一个非常简单的问题，但我无法弄清楚（我是 XAML 的新手）。我通过将组合框绑定到数据表来填充它。我的表中的主键是 S_ID，我需要为在 SelectionChanged 事件中选择的项目检索此值，以便我可以根据此值加载更多详细信息。我尝试过 int i = cboSites.SelectedItem，但即使 S_ID 是 int，也会得到类型不匹配。如果我将 i 设置为类型对象，我可以在调试模式下查看 DatarRowView 中的值，但不能以任何其他方式访问数据。请让我知道我做错了什么。我做了很多研究，从我读到的代码看起来没问题，但显然不是！顺便说一句，组合框完全可以填充数据。非常感谢。

C＃

```
try
{
     SqlDataAdapter sqlAd = new SqlDataAdapter();
     SqlCommand sqlComm = new SqlCommand("SP_SelectAllSiteNamesForCust", sqlConn);
     sqlComm.CommandType = System.Data.CommandType.StoredProcedure;
     DataSet dSet = new DataSet();
     sqlAd.SelectCommand = sqlComm;
     sqlAd.Fill(dSet);
     DataTable sitesTable = dSet.Tables[0];
     cboSites.ItemsSource = sitesTable.DefaultView;

 } 
```

XAML

```
 <ComboBox Height="28" IsEditable="True" Margin="630,15,28,10" 
           Name="cboSites" TabIndex="6" 
           ItemsSource="{Binding}" 
           DisplayMemberPath="S_Name" 
           SelectedItem="{Binding Path=S_ID}"  
           SelectionChanged="cboSites_SelectionChanged" /> 
```

SQL 存储过程

```
SELECT 
[S_ID],
[S_Name]
FROM
[dbo].[tbl_Site]
WHERE [C_ID] = @CUSTID 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:14:40.693

使用 SelectedValue 代替 SelectedItem：

```
<ComboBox ItemsSource="{Binding}" DisplayMemberPath="S_Name" 
          SelectedValuePath="S_ID" SelectedValue="{Binding Path=Int_Property_In_The_ViewModel}"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:25:14.020

您遇到了类型不匹配，因为您的集合中的每个项目都像您绑定到的 DataView 中的表中的一行。所以在你的 cboSites_SelectionChanged 你可以得到这样的 S_ID ：

```
var s_id = int.Parse(((DataRowView)cboSites.SelectedItem)["S_ID"].ToString()); 
```

在这里，您要转换`cboxSites.SelectedItem`为`DataRowView`类型，然后使用索引器获取 S_ID 值。然后你只需将该值转换为字符串并将其解析为整数变量。

# wordpress - 如何在事件触发时在 wp 上发送自动电子邮件

> ID：14692837
> 
> 赞同：1
> 
> 时间：2013-02-04T18:11:57.397
> 
> 标签：wordpress

我是 PHP/Wordpress 开发的新手，我想修改 eshop，现在当我们将订单标记为已发货时，eshop 插件不会发送自动电子邮件，为此我们必须在单击电子邮件 ID 后手动编写电子邮件。

我想在订单更改为发货时自动发送电子邮件。为此，我尝试找到一个插件，但直到现在还没有这样的插件，或者至少我没有找到它

下面我提到了实际上将详细信息发布到 PHP_Self 的表单代码，但问题是 id 不是 id，我想在页面中创建一个单独的函数，它不会影响任何其他功能，但是当用户发送信息功能发送电子邮件。

**在这里它检查复选框的ID，选中的字段**

```
 <td headers="transid numb'.$c.'">'.$myrow->transid.'</td>'.

                '<td headers="bulk numb'.$c.'"><label for="move'.$c.'">Move #'.$c.'</label><input type="checkbox" value="'.$checkid.'" name="move[]" id="move'.$c.'" />'

                ."</td></tr>\n"; 
```

**在这里它检查选择操作并发送它**

```
 <fieldset id="changestat"><legend><?php _e('Change Orders Status','eshop'); ?></legend>

            <p class="submit eshop"><label for="mark"><?php _e('Mark orders as:','eshop'); ?></label>

            <select name="mark" id="mark">

            <option value="Sent"><?php _e('Shipped','eshop'); ?></option>

            <option value="Completed"><?php _e('Active','eshop'); ?></option>

            <option value="Pending"><?php _e('Pending','eshop'); ?></option>

            <option value="Waiting"><?php _e('Awaiting Payment','eshop'); ?></option>

            <option value="Failed"><?php _e('Failed','eshop'); ?></option>

            <option value="Deleted"><?php _e('Deleted','eshop'); ?></option>

            </select>

            <input type="hidden" name="action" value="<?php echo $_GET['action']; ?>" />

            <input type="hidden" name="change" value="yes" />

            <input type="submit" id="submit1" value="<?php _e('Change','eshop'); ?>" /></p>

            </fieldset></form> 
```

**这里实际处理**

```
if(isset($_POST['mark']) && !isset($_POST['change'])){

$mark=$_POST['mark'];

$checkid=$_POST['checkid'];

$query2=$wpdb->get_results("UPDATE $dtable set status='$mark' where checkid='$checkid'");

do_action( 'eshop_order_status_updated', $checkid, $mark );

echo '<div class="updated fade">'.__('Order status changed successfully.','eshop').'</div>';

}

if(isset($_POST['change'])){

if(isset($_POST['move']) && $_POST['move'][0]!=''){

    foreach($_POST['move'] as $v=>$ch){

        $mark=$_POST['mark'];

        $query2=$wpdb->get_results("UPDATE $dtable set status='$mark' where checkid='$ch'");

        do_action( 'eshop_order_status_updated', $ch, $mark );

    } 
```

请指导我如何在标记为已发货时发送自动电子邮件，即

```
 <option value="Sent"><?php _e('Shipped','eshop'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T18:27:09.427

从您的代码中可以看出，每次更新订单状态时，shop 都会执行一个操作。这将允许您在不修改核心插件文件的情况下挂钩操作（使用代码创建自己的插件或将其放入主题的 functions.php 中），这意味着插件将是升级安全的。[您可以在此处](http://codex.wordpress.org/Plugin_API "Here")阅读有关 wordpress 操作如何工作的更多信息

```
add_action('eshop_order_status_updated', 'send_user_email', 2);

function send_user_email($id, $mark) {
    if ($mark == 'Sent') {

         // your email code here

    }
} 
```

首先我们添加一个动作，我们指定我们希望我们的函数从动作接收 2 个参数。然后是函数本身，我们检查新状态是否为“已发送”（因为此操作在每次状态更改时运行），然后我们可以插入任何自定义代码。

# c# - 如何设置 jQuery UI 选项卡控件的 tabindex

> ID：14692839
> 
> 赞同：1
> 
> 时间：2013-02-04T18:12:05.723
> 
> 标签：c#, jquery, asp.net, tabs

我希望能够使用 Tab 键来选择 jQuery UI 选项卡控件，但我看不到可以在哪里设置其 TabIndex。我看到很多关于选项卡控件中选项卡索引的帖子，但我指的是控件本身的整体 TabIndex。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:16:51.933

JQuery UI 1.9.0以上版本，可以访问

```
 ui.newTab.index() 
```

在你的函数里面，得到你需要的东西。

对于早期版本，请使用

```
 ui.index 
```

这应该够了吧！

雷切尔：）

# node.js - 使用 upstart 运行 node.js 服务器会导致“ubuntu 10.04”上的“以状态 127 终止”

> ID：14692843
> 
> 赞同：7
> 
> 时间：2013-02-04T18:12:20.397
> 
> 标签：node.js, ubuntu-10.04, upstart

我已经为 ubuntu 编写了一个 upstart 脚本来手动或在启动时启动我的 node.js 服务器。但它总是以状态 127 终止，我找不到更多关于出了什么问题的信息。如果我手动执行它，那么它可以工作，并且我还在 ubuntu 12.10 上对其进行了测试，它也可以工作......它只是无法在我正在使用的生产服务器 ubuntu 10.04 上工作。

剧本：

```
description ""
author      ""

start on started mountall
stop on shutdown
respawn
respawn limit 20 5

# Max open files are @ 1024 by default. Bit few.
limit nofile 32768 32768

env HOME=/home/projects/<project_name>/data/current

script
    export HOME=$HOME
    chdir $HOME
    exec sudo -u <user_to_launch_the_script> /usr/bin/node /home/projects/<project_name>/data/current/server.js 2>&1 >> /var/log/node.log
end script 
```

知道在哪里可以找到有关状态 127 的更多信息吗？或者我该如何解决这个问题？我查看了 /var/log/daemon.log 和 /var/log/syslog.log .. 但除了“主进程 (29520) 以状态 127 终止”之外没有相关信息。

亲切的问候，

大安

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-04T18:30:10.543

bash 中的 127 表示：“找不到命令”、非法命令、$PATH 可能有问题或拼写错误。

来源：[http ://tldp.org/LDP/abs/html/exitcodes.html](http://tldp.org/LDP/abs/html/exitcodes.html)

这可能是服务器故障的问题，因为它与 bash 相关，但这个问题/答案可能会对您有所帮助：

[https://serverfault.com/questions/277706/cron-fails-with-exit-status-127](https://serverfault.com/questions/277706/cron-fails-with-exit-status-127)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-05T20:03:26.973

有相同的错误消息，在失败的自定义新贵日志中跟踪它`/usr/bin/env: node: No such file or directory`，这是我的修复：

[https://github.com/joyent/node/issues/3911](https://github.com/joyent/node/issues/3911)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-18T15:11:44.523

有这个问题。我正在 ubuntu 服务器 14.04 中使用 gunicorn 部署 Web 应用程序。将您的核心指令移至 bash 脚本。并记住使脚本可执行。我忽略了使 bash 脚本可执行，所以我得到了 127。

```
description "Gunicorn  app running myproject"

start on runlevel [2345]
stop on runlevel [!2345]

respawn

setuid <user> 
setgid <group>

exec bash /path/to/bash/script/ 
```

然后是我的 bash 脚本

```
#!/bin/bash
# description "bash script that handles loading env and running gunicorn"

# load up the project's virtualenv 
source /path/to/virtualenv/bin/activate

# minimal settings 
exec gunicorn app:app 
```

# oracle - 迁移到托管 ODP.NET 后 OracleDataAdapter.SafeMapping 出现 NotSupportedException

> ID：14692846
> 
> 赞同：0
> 
> 时间：2013-02-04T18:12:27.383
> 
> 标签：oracle, managed, odp.net, notsupportedexception

我最近将我的代码从 ODP.NET 的本机版本迁移到托管版本，突然间，访问*OracleDataAdapter上的***SafeMapping**属性会出现以下异常：

 *> System.NotSupportedException 发生
> 消息=不支持指定的方法。
> Source=Oracle.ManagedDataAccess
> StackTrace：
> 在 Oracle.ManagedDataAccess.Client.OracleDataAdapter.get_SafeMapping()

阅读了**SafeMapping**的目的后，是否有可能在 Managed ODP.NET 中根本不需要它？或者，我做错了什么？例如，现在是否有另一种方法来做**SafeMapping**所做的事情？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T15:29:11.150

在来自 Oracle 的 Windows 和 .NET 产品经理 Alex Keh 的帮助下，我找到了解决方案。解决方案是设置`OracleDataAdapter.ReturnProviderSpecificTypes`为`true`.

完整的讨论可以在[这里](https://community.oracle.com/tech/developers/discussion/2496563/notsupportedexception-on-oracledataadapter-safemapping-on-managed-odp-net)找到。*

# c# - 使用 C# Rally RestApi 添加和更新 Rally 项目变更集

> ID：14692850
> 
> 赞同：2
> 
> 时间：2013-02-04T18:12:41.360
> 
> 标签：c#, rest, rally

我们是一家使用 C#、Team Foundation Server 和 Rally 作为主要项目跟踪的商店。

我们想使用 Rally Item ChangeSets 来遵循 TFS Changesets。使用 Rally 的 C# RestApi 似乎与用 Java 制作的有点不同。

有没有办法使用 Rally C# RestApi 完成本文中描述的相同操作？ [Rally 使用 Java Toolkit for Rally REST API 从 Java 更新变更集数据](https://stackoverflow.com/questions/11521986/rally-update-changeset-data-from-java-using-java-toolkit-for-rally-rest-api)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:10:53.900

你绝对可以在 .NET 中做同样的事情。一个好处是它比 Java 等价物要简洁得多。这是一个例子：

```
// System Libraries
using System;
using System.Collections.Generic;
using System.Collections;
using System.Linq;
using System.Text;
using System.Web;

// Rally REST API Libraries
using Rally.RestApi;
using Rally.RestApi.Response;

namespace RestExample_AddChangesetToUserStory
{
    class Program
    {
        static void Main(string[] args)
        {
            // Set user parameters
            String userName = "user@company.com";
            String userPassword = "topsecret";

            // Set Rally parameters
            String rallyURL = "https://rally1.rallydev.com";
            String rallyWSAPIVersion = "1.40";

            //Initialize the REST API
            RallyRestApi restApi;
            restApi = new RallyRestApi(userName,
                                       userPassword,
                                       rallyURL,
                                       rallyWSAPIVersion);

            // Changeset Owner Username
            String changesetOwner = "scm_integration@company.com";

            // SCM Repository Name
            String scmRepositoryName = "MySCMRepo";

            // FormattedID of Artifact to associate to
            String storyFormattedID = "US14";

            // Create Request for User
            Request userRequest = new Request("user");
            userRequest.Fetch = new List<string>()
                {
                    "UserName",
                    "Subscription",
                    "DisplayName"                    
                };

            // Add a Query to the Request
            userRequest.Query = new Query("UserName", Query.Operator.Equals, changesetOwner);

            // Query Rally
            QueryResult queryUserResults = restApi.Query(userRequest);

            // Grab resulting User object and Ref
            DynamicJsonObject myUser = new DynamicJsonObject();
            myUser = queryUserResults.Results.First();
            String myUserRef = myUser["_ref"];

            //Set our Workspace and Project scopings
            String workspaceRef = "/workspace/12345678910";
            String projectRef = "/project/12345678911";
            bool projectScopingUp = false;
            bool projectScopingDown = true;

            // Get handle to SCM Repository
            Request scmRequest = new Request("SCMRepository");
            scmRequest.Fetch = new List<string>()
                {
                    "ObjectID",
                    "Name",
                    "SCMType"
                };

            // Add query
            scmRequest.Query = new Query("Name", Query.Operator.Equals, scmRepositoryName);

            // Query Rally
            QueryResult querySCMResults = restApi.Query(scmRequest);
            DynamicJsonObject myRepository = new DynamicJsonObject();
            myRepository = querySCMResults.Results.First();

            // Find User Story that we want to add Changeset to

            // Tee up Story Request
            Request storyRequest = new Request("hierarchicalrequirement");
            storyRequest.Workspace = workspaceRef;
            storyRequest.Project = projectRef;
            storyRequest.ProjectScopeDown = projectScopingDown;
            storyRequest.ProjectScopeUp = projectScopingUp;

            // Fields to Fetch
            storyRequest.Fetch = new List<string>()
                {
                    "Name",
                    "FormattedID",
                    "Changesets"
                };

            // Add a query
            storyRequest.Query = new Query("FormattedID", Query.Operator.Equals, storyFormattedID);

            // Query Rally for the Story
            QueryResult queryResult = restApi.Query(storyRequest);

            // Pull reference off of Story fetch
            var storyObject = queryResult.Results.First();
            String storyReference = storyObject["_ref"];

            // Pull existing Changesets off of Story
            var existingChangesets = storyObject["Changesets"];

            Console.WriteLine("Story: " + storyFormattedID);
            Console.WriteLine("Number of Existing Changesets: " + existingChangesets.Count);

            // DynamicJSONObject for New Changeset
            DynamicJsonObject newChangeset = new DynamicJsonObject();

            // Commit Time Stamp
            String commitTimeStamp = DateTime.UtcNow.ToString("yyyy-MM-ddTHH:mm:ssZ");

            // Populate Changeset Attributes
            newChangeset["SCMRepository"] = myRepository;
            newChangeset["Author"] = myUserRef;
            newChangeset["Revision"] = "2451";
            newChangeset["Uri"] = "https://svnrepo.company.com:8001";
            newChangeset["CommitTimestamp"] = commitTimeStamp;

            // Artifacts list
            var changeSetArtifacts = new ArrayList();
            changeSetArtifacts.Add(storyObject);

            // Update attribute on Changeset
            newChangeset["Artifacts"] = changeSetArtifacts;

            try
            {
                // Create the Changeset
                Console.WriteLine("Creating Rally Changeset...");
                CreateResult myChangesetCreateResult = restApi.Create("ChangeSet", newChangeset);
                String myChangesetRef = myChangesetCreateResult.Reference;
                Console.WriteLine("Successfully Created Rally Changeset: " + myChangesetRef);

                List<string> createWarnings = myChangesetCreateResult.Warnings;
                for (int i = 0; i < createWarnings.Count; i++)
                {
                    Console.WriteLine(createWarnings[i]);
                }

                List<string> createErrors = myChangesetCreateResult.Errors;
                for (int i = 0; i < createErrors.Count; i++)
                {
                    Console.WriteLine(createErrors[i]);
                }

            }
            catch (Exception e)
            {
                Console.WriteLine("Exception occurred creating Rally Changeset: " + e.StackTrace);
                Console.WriteLine(e.Message);
            }
            Console.ReadKey();
        }
    }
} 
```

# python - Python：假设您可以倒退，找到到达列表中另一个索引的最短距离

> ID：14692852
> 
> 赞同：-4
> 
> 时间：2013-02-04T18:13:02.997
> 
> 标签：python, algorithm, list, shortest-path

假设您可以倒退并最终到达列表的另一侧，您将如何找到列表中字母之间的最短路径，Pacman Style

```
letters = ['a', 'd', 'e', 'l', 's']
letters.loopDistance('a', 's') 
```

返回 1

```
letters.loopDistance('a', 'l') 
```

返回 2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:15:19.083

找到向前的距离（必要时环绕）。如果这超过了列表长度的一半，那么向另一个方向移动将涉及更短的距离，您可以立即通过从列表长度中减去来计算。

如果字母可以出现不止一次，事情会变得有点复杂，主要是因为你想要的答案是模棱两可的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:20:42.517

```
def distance(l, first, second):
    ifirst = l.index(first)
    isecond = l.index(second)
    return min((ifirst - isecond) % len(l), (isecond - ifirst) % len(l)) 
```

基本上，您测量两个方向的距离并选择最小的。

# android - 显示多行 Horizo ntalListView

> ID：14692856
> 
> 赞同：2
> 
> 时间：2013-02-04T18:13:19.473
> 
> 标签：android

我正在尝试在线性布局中显示多个[Horizo](http://www.dev-smart.com/archives/34) ​​ntalListView。但是，我只能看到第一个Horizo​​ntalListView。之后的所有东西都消失了。以下是layout.xml`

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/main_layout"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:background="#fff"
        android:orientation="vertical">

            <com.devsmart.android.ui.HorizontalListView
                android:id="@+id/saladMenuView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ddd"
                android:fillViewport="false" />

            <com.devsmart.android.ui.HorizontalListView
                android:id="@+id/pizzaMenuView"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content"
                android:background="#ddd"
                android:fillViewport="false" />
    </LinearLayout>` 
```

我总是可以看到salaMenuView，但是pizzaMenuView 从来没有出现过。

有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-10-09T13:31:18.103

我找到了原因，我设置了 android:weightSum 属性。以下是我的 layout.xml ：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center_horizontal"
android:gravity="center_horizontal"
android:orientation="vertical"
android:weightSum="2" >

 <TextView
    android:id="@+id/show_text_ricerca_ingredienti"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:text="@string/show_text_ricerca_ingredienti"
    android:layout_marginTop="10dp"/>

 <com.devsmart.android.ui.HorizontalListView
    android:id="@+id/hlistviewIngredienti"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_weight="1"
    android:layout_marginTop="10dp"/>

  <TextView
       android:id="@+id/show_text_ricerca_per_categorie"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:gravity="center_horizontal" 
       android:text="@string/show_text_ricerca_per_categorie"
       android:layout_marginTop="10dp"/>

   <com.devsmart.android.ui.HorizontalListView
        android:id="@+id/hlistview"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" 
        android:layout_weight="1"
        android:layout_marginTop="10dp"/>

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:gravity="center_horizontal"
    android:layout_alignParentBottom="true" >

    <Button
        android:id="@+id/button1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:onClick="buttonNext"
        android:text="@string/btn_next"
        android:layout_gravity="center_horizontal"
        android:gravity="center_horizontal" /> 
```

# asp.net - 更改链接按钮文本时的奇怪行为

> ID：14692859
> 
> 赞同：0
> 
> 时间：2013-02-04T18:13:33.343
> 
> 标签：asp.net, vb.net

在我的项目中，我有一个数据中继器，在一个更新面板中，带有一个链接按钮。当用户单击链接按钮时，会发生部分回发并更改链接按钮的文本属性。问题是：当用户再次单击同一个按钮时，即使我可以在网页上实际看到新的文本值，但当调试器命中事件时，发送者对象说文本值是旧值，而不是最后一个更新。有谁知道为什么？这是代码：

```
<asp:LinkButton runat="server" ID="lbEdit" Text="Edit" EnableViewState="true"  OnClick="edit_click" CommandArgument='<%# Eval("user.networkId") %>'></asp:LinkButton> 
```

代码隐藏：

```
 Protected Sub edit_click(ByVal sender As Object, ByVal e As EventArgs)
    Dim btn As LinkButton = CType(sender, LinkButton)
    Dim userId As String = btn.CommandArgument
    If (btn.Text = "Edit") Then
       btn.Text = "Save"
    else
       btn.Text = "Edit"
    end if
  end sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:35:03.457

您很可能在回发时重新绑定数据，因此它正在重置您的值。然后按钮单击事件正在触发，所以是的，您设置`Text`正确。但是当您再次回发时，文本正在重置。

`DataBind`将您的活动包装在`If Not IsPostBack`：

```
If Not IsPostBack
    'Bind your datasource
End If 
```

# javascript - jQuery .slideUp() 效果运行问题

> ID：14692864
> 
> 赞同：3
> 
> 时间：2013-02-04T18:13:55.807
> 
> 标签：javascript, jquery

谁能告诉我为什么效果运行如此频繁是悬停的。我的意思是你悬停 3 次而不等待效果完成，然后你可以等到效果运行 3 次。

```
 $(function() {
            $('#dropdown_nav li').find('.sub_nav').hide();
            $('#dropdown_nav li').hover(function() {

                $(this).find('.sub_nav').slideDown(300);
            }, function() {

                $(this).find('.sub_nav').delay(2000).slideUp(300);
            });
        }); 
```

在这里可以测试：http: [//jsfiddle.net/QTGvJ/](http://jsfiddle.net/QTGvJ/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:14:35.090

使用`.stop()`将清除动画队列

`**[LIVE DEMO](http://jsfiddle.net/QTGvJ/2/)**`

```
$('#dropdown_nav li').on('mouseenter mouseleave',function() {
      $('.sub_nav', this).stop().slideToggle();
}); 
```

鼠标离开延迟：

```
$('#dropdown_nav li').on('mouseenter mouseleave',function( e ) {
    var delayTime = e.type=='mouseleave' ? 1000 : 0;
    $('.sub_nav', this).stop().delay( delayTime ).slideToggle();
}); 
```

`**[LIVE DEMO 2 WITH DELAY](http://jsfiddle.net/QTGvJ/3/)**`

了解更多：[http ://api.jquery.com/stop/](http://api.jquery.com/stop/)

# php - 在php中创建一个具有动态键和值的关联数组

> ID：14692866
> 
> 赞同：10
> 
> 时间：2013-02-04T18:14:03.433
> 
> 标签：php, arrays, associative

我想在 php 中创建一个关联数组，其中包含动态键以及来自特定 mysql 表的动态值。

表名`monthly_salary`有两列分别命名为`month`和`salary`。

我得到里面的数据：

```
$sql = mysql_query('SELECT * FROM monthly_salary');
$sql2 = mysql_query('SELECT * FROM monthly_salary'); 
```

然后将收集到的数据分配并连接到`$mon`和`$sal`：

```
$mon = "";
$sal = "";
while($row = mysql_fetch_array($sql)){
    $mon .= $row['month'].", ";
}
while($row = mysql_fetch_array($sql2)){
    $sal .= $row['salary'].", ";
} 
```

之后，我将其转换为数组并将其连接起来，直到它成为关联数组：

```
$monArray = array(substr(trim($mon), 0, -1));
$salArray = array(substr(trim($sal), 0, -1));
$key = "";
$keyWithVal = "";
foreach($monArray  as $k){
    $key .= $k." => ";
}
foreach($salArray  as $k){
    $keyWithVal .= $key.$k.",";
}

$associativeArray = array(substr(trim($keyWithVal), 0, -1)); 
```

我的问题是，当我回显它时，结果总是这样 **3500=>Jan=>3500**：

```
foreach($associativeArray  as $k => $id){
    echo $k."=>".$id;
} 
```

那么如何修复它并使用正确的输出**Jan=>3500**？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-04T18:20:02.087

你把这个问题复杂化了。这可以通过更少的循环简单地完成。

首先，您只需要运行一次 SQL。其次，在第一个循环中构建数组。

```
$sql = mysql_query('SELECT * FROM monthly_salary');

$associativeArray = array();
while($row = mysql_fetch_array($sql)){
   // Put the values into the array, no other variables needed
   $associativeArray[$row['month']] = $row['salary'];
}

foreach($associativeArray as $k => $id){
    echo $k."=>".$id;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-04T18:21:51.023

你为什么不这样做：

```
$associativeArray = array();
while($row = mysql_fetch_array($sql)){
    $associativeArray[$row['month']] = $row['salary'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-14T03:34:09.520

以下为我创建了关联数组。array_push 不适用于关联数组，但使用一元运算符确实有效：

```
$associativeArray += [$key => $value]; 
```

# javascript - RequireJS 优化器是否可以在没有“app.js”和依赖于内联模块的模块上工作？

> ID：14692876
> 
> 赞同：1
> 
> 时间：2013-02-04T18:14:50.393
> 
> 标签：javascript, requirejs

在 RequireJS 示例中，它表明您可以从 script 标签引用 app.js（或任何您想调用的启动文件），如下所示：

```
<script data-main="js/app.js" src="js/require.js"></script> 
```

由于我无法控制的原因，我不能这样做。模板层中生成的几个动态变量需要保留。因此，我创建了一个其他模块可以读取的内联“配置”模块。

```
<script type="text/javascript">
        define('config', function() { 
            return {
                markup_id: {
                    "content": "search",
                    "page": "index",
                    "media": "mobile"
                },
                page_context: {
                    "siteconfig": {
                        "mobile_video_player_id": /* */,
                        "mobile_video_player_key": /* */,
                        "mobile_ad_site": /* */,
                        "omniture_mobile_env": /* */,
                        "searchserver": /* */,              
                    },
                    "omniture": {
                        "gn": /* */,

                    }
                }
            }
        });
    </script> 
```

我所做的是对于每个模板，我放置了一个内联的 require.config。举个例子（具体路径信息去掉）：

```
<script type="text/javascript">
/* This code is on a template page inside a script tag. */
require.config({
            baseUrl: /* */,
            paths: {
                'jquery': /* */,
                'jquery-mobilead': /* */,
                'jquery-photogalleryswipe': /* */
            },
            /* Enforce ordering of jQuery plugins - which require jquery */
            shim: {
                'jquery-mobilead': {
                    deps: ['jquery'],
                    exports: 'jQuery.fn.mobileAd'
                },
                'jquery-photogalleryswipe': {
                    deps: ['jquery'],
                    exports: 'jQuery.fn.photoGallerySwipe'
                },
                'gallery': {
                    deps: ['jquery-photogalleryswipe', 'jquery-mobilead']
                }
            },
            urlArgs: 'buildlife=@buildlife@'
        });

        require( ['jquery', 'site', 'gallery', 'jquery-photogalleryswipe', 'jquery-mobilead'], function($, site, gallery) {
                //This function will be called when all the dependencies
                //listed above are loaded. Note that this function could
                //be called before the page is loaded.
                //This callback is optional.

                /* Initialize code */
                $(document).ready(function() {
                    /* sitewide code - call the constructor to initialize */
                    site.init();
                    /* homepage contains a reference to a function - execute the function */
                    gallery.initGallery();
                });
            }
        );
</script> 
```

我认为优化器无法优化模板内的代码。

**但是**，根据 RequireJS API 文档，我确实有模块 JS 文件。
/modules/gallery.js /modules/channel.js /modules/site.js /* 等等 */

这些模块确实依赖于其他模块，但这些模块依赖于'config'模块，该模块是与模板内联定义的。如果我对这些文件运行优化器，优化器会正常工作吗，因为模板之一是模块吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T17:02:12.530

我想我解决了我自己的问题，基于阅读 [How to load bootstrapped models in Backbone.js while using AMD (require.js)](https://stackoverflow.com/questions/9916073/how-to-load-bootstrapped-models-in-backbone-js-while-using-amd-require-js/10288587#10288587)

我已将模板变量重组为一个 require 全局对象，并在 require.js 之前声明它。现在，模板仍然可以生成这些值，但是由于 require.config 和 require 代码可以放入外部 JS 文件中，优化器现在应该能够看到这些文件。我还没有尝试运行优化器。

```
<script>
        /* This script block is in the template */
        var require = {
            config: {
                markup_id: {
                "content": "search",
                "page": "index",
                "media": "mobile"
                },
                page_context: {
                   "siteconfig": {
                    "mobile_video_player_id": /* */,
                    "mobile_video_player_key": /* */,
                    "mobile_ad_site": /* */,
                    "omniture_mobile_env": /* */,
                    "searchserver": /* */,              
                  },
                "omniture": {
                    "gn": /* */,

                }
            }
        };
    </script>
 <script data-main="/m/j/main-search" src="/m/j/require.js"></script> 
```

# wpf - 如何将可移动容器添加到 WPF 表单？

> ID：14692884
> 
> 赞同：0
> 
> 时间：2013-02-04T18:15:34.803
> 
> 标签：wpf

WPF新手所以请温柔。

希望用 C#/WPF 重写现有的 VFP 应用程序

所有表单都有容器，这些容器又包含文本框、标签等。

使用此配置，用户可以使用鼠标移动容器和包含的控件，在容器内设置焦点以启用放大和缩小表单等。

因此，不是直接将控件添加到 WPF 表单中，而是需要先添加一个可移动的容器，然后再将控件添加到容器中。

那么从哪里开始呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T03:33:03.090

你可以试试[AvalonDock](http://avalondock.codeplex.com/)库，看看它是否能满足你的要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T15:38:19.353

听起来您正在寻找的主要内容之一是为标准 WPF 面板/容器添加拖放功能。正如 Mash 所说，AvalonDock 可能对您有用，特别是如果您有兴趣将面板停靠在某些位置。但我还建议您查看仅向标准 WPF 面板添加可拖动性的选项。这将是一个轻量级的选项，可以让您快速入门，而不必担心 AvalonDock 的限制。

当然有很多方法可以实现拖放，但我认为非常适合此任务的非常方便的功能是附加“行为”的概念。附加行为基本上允许您向现有 WPF 控件“添加”功能，而无需更改或扩展实际控件。依附行为有两种基本类型。一种使用 WPF 附加属性，另一种使用通常称为“混合”的行为。如果你只是想开始使用一种行为来解决你眼前的问题，你不一定需要了解这两种方法的所有细微差别，但最终你可能会发现这两种方法都有它们的位置，所以我' d 建议阅读[**这篇**](http://briannoyes.net/2012/12/20/AttachedBehaviorsVsAttachedPropertiesVsBlendBehaviors.aspx)关于它们的文章。

特别是，有一个名为[MouseDragElementBehavior](http://wpftutorial.net/Behaviors.html)的混合行为，它允许您向 WPF 面板添加拖放功能（这里的“e”和“d”是 xmlns 命名空间前缀）：

```
<Border Background="LightBlue" >
    <e:Interaction.Behaviors>
        <b:DragBehavior/>
    </e:Interaction.Behaviors>
    <TextBlock Text="Drag me around!" />
</Border> 
```

同样，您提到了可缩放性，还有[另一种混合行为](http://blog.galasoft.ch/archive/2009/04/05/using-a-behavior-to-magnify-your-wpf-applications.aspx)可能对您有用。

如果您使用的是 Expression Blend，则混合行为很容易添加元素，但您也可以将它们与 Visual Studio 一起使用。要解释如何做到这一点，请参阅 Laurent 关于他的[放大行为](http://blog.galasoft.ch/archive/2009/04/05/using-a-behavior-to-magnify-your-wpf-applications.aspx)的部分帖子。

# java - 切换 Android 活动的最佳方式是什么？

> ID：14692887
> 
> 赞同：1
> 
> 时间：2013-02-04T18:15:54.493
> 
> 标签：java, android, android-activity

我一直在为 Android 开发地图应用程序。最初我打算让主屏幕成为地图本身。在与我的老板讨论后，我决定制作一个普通（非地图）布局作为我的第一个屏幕，然后有一个按钮来访问该地图。

我已经准备好使用第一个屏幕。这个活动的名字是`LocateActivty.java`。地图活动的名称是`MainActivity.java`。由于我最初首先开发了地图活动，因此它显然继续作为第一个屏幕打开。

我应该对文件（如果有）和任何配置文件进行哪些更改以进行`LocateActivity.java`我的主要活动？

编辑 - 清单代码

```
<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.aquamet.saramap.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity
        android:name="com.aquamet.saramap.LocateActivity"
        android:label="@string/title_activity_locate"
        android:parentActivityName="com.aquamet.sara.MainActivity" >
        <meta-data
            android:name="android.support.PARENT_ACTIVITY"
            android:value="com.aquamet.sara.MainActivity" />
    </activity>
</application> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:19:26.463

清单中的 XML 行：

```
<intent-filter>
    <action android:name="android.intent.action.MAIN" />
    <category android:name="android.intent.category.LAUNCHER" />
</intent-filter> 
```

需要从 MainActivity 的 Activity 标记中移出，并放入 LocateActivity 的标记中。这意味着当用户打开您的应用程序时，LocateActivity 会收到 Launcher 意图

# css - Firefox 和 Opera：SVG 和背景尺寸导致渲染效果不佳

> ID：14692888
> 
> 赞同：5
> 
> 时间：2013-02-04T18:15:56.823
> 
> 标签：css, vector, svg, opera, vector-graphics

我在页面上有一些元素使用 SVG 文件作为背景图像。它在 Opera、Chrome 和 Safari 中运行良好，只有 Firefox 才能将图形真正像素化。

我已经对该主题进行了搜索，甚至在 SO 上也有一些类似的问题：
[SVG rendering bad in Firefox](https://stackoverflow.com/questions/5623436/svg-rendering-badly-in-firefox)
[Firefox not anti-aliasing scaled background svg](https://stackoverflow.com/questions/11879836/firefox-not-anti-aliasing-scaled-background-svg)
[Firefox SVG graphics blurry](https://stackoverflow.com/questions/8954028/firefox-svg-graphics-blurry)

一些建议是不要过度使用 SVG`background-size`并提供它`width="100%" height="100%"`。

我只将 SVG 缩放 5%，所以这真的不应该太多。添加`width="100%" height="100%"`解决了像素化问题，但与其他浏览器相比，它仍然*非常模糊。*

*这个链接评论有*什么帮助：http:* [//coding.smashingmagazine.com/2012/01/16/resolution-independence-with-svg/#comment-573707](http://coding.smashingmagazine.com/2012/01/16/resolution-independence-with-svg/#comment-573707)*

 *最初的宽度和高度是 22px。现在我将两者都设置为 200 像素，瞧，SVG 渲染得尽可能清晰 - 但现在 Opera 渲染它有点模糊/非常糟糕！此外，放大时，图形会被“截断”。所以不是按比例缩放，图形似乎在它的盒子里被放大了。有什么解决办法吗？

有趣的是：作为按钮的背景图像，它呈现模糊。作为输入字段中的背景图像，它呈现为“过于清晰”，我称之为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T07:28:23.457

请在您的样式表中添加以下元素类

```
img {
-ms-interpolation-mode: bicubic;
image-rendering: -moz-crisp-edges;
background:transparent; } 
```*

# bash - sed：仅在两个位置之间替换一个字符

> ID：14692889
> 
> 赞同：1
> 
> 时间：2013-02-04T18:15:58.023
> 
> 标签：bash, sed

很抱歉这个看似简单的问题，但花了太长时间试图在任何地方找到解决方案并尝试不同的 sed 选项。我只需要用逗号替换文本文件中的所有点，但只是在两个位置之间。例如，来自：

```
1.3.5.7.9 
```

至

```
1.3,5,7.9 
```

所以，更换 . ，在位置 3 到 7 之间。谢谢！

编辑：对不起，我假装简化了问题，但由于我的问题缺乏细节，前 3 个答案都不起作用，让我再深入一点。重要的一点是在不知道字符串的其余部分的情况下用逗号替换位置间隔中的所有点：

```
Here some text. I don't want to change. 10.000 usd  234.566 usd Continuation text.
More text. No need to change this part.    345 usd   76.433 usd Text going on. So on. 
```

这是一个固定宽度的文本文件，以列为单位，我需要更改数字的国际格式，用逗号替换点。我只知道我需要搜索并最终替换点的初始和最终位置。显然，并不是所有的数字都有点（只有超过 1000 个的）。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:19:15.627

澄清问题后重写答案：

这很难处理`sed`，但可以使用其他标准实用程序来简化，例如`cut`and `paste`：

```
$ start=40
$ end=64
$ paste -d' ' <(cut -c -$((start-1)) example.txt) \
> <(cut -c $((start+1))-$((end-1)) example.txt | sed 'y/./,/') \
> <(cut -c $((end+1))- example.txt)
Here some text. I don't want to change. 10,000 usd  234,566 usd Continuation text.
More text. No need to change this part.    345 usd   76,433 usd Text going on. So on. 
```

（`>`只是表示上一行的延续。`<`是真实的）。这当然是非常低效的，但在概念上很简单。

我用了所有的`+1`东西`-1`来摆脱多余的空间。不确定你是否需要它。

一个纯 sed 解决方案（支撑自己）：

```
$ sed "s/\(.\{${start}\}\)\(.\{$((end-start))\}\)/\1\n\2\n/;h;s/.*\n\(.*\)\n.*/\1/;y/./,/;G;s/^\(.*\)\n\(.*\)\n\(.*\)\n\(.*\)$/\2\1\4/" example.txt
Here some text. I don't want to change. 10,000 usd  234,566 usd Continuation text.
More text. No need to change this part.    345 usd   76,433 usd Text going on. So on. 
```

`GNU sed`：

```
$ sed -r "s/(.{${start}})(.{$((end-start))})/\1\n\2\n/;h;s/.*\n(.*)\n.*/\1/;y/./,/;G;s/^(.*)\n(.*)\n(.*)\n(.*)$/\2\1\4/" example.txt 
Here some text. I don't want to change. 10,000 usd  234,566 usd Continuation text.
More text. No need to change this part.    345 usd   76,433 usd Text going on. So on. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:45:33.567

这在 pure 中做起来相当尴尬`sed`。如果您不受严格限制`sed`，我建议您使用其他工具来执行此操作。Ed Morton`gawk`基于 - 的解决方案可能是解决这个问题的最不尴尬（没有双关语）的方法。

这是一个`sed`用于完成繁重工作的示例，但为简单起见，将其包装在 bash 函数中：

```
function transform () {
    line=$1
    start=$2
    end=$3
    # Save beginning and end of line
    front=$(echo $line | sed -e "s/\(^.\{$start\}\).*$/\1/")
    back=$(echo $line | sed -e "s/^.\{$end\}//")
    # Translate characters
    line=$(echo $line | sed -e 'y/\./,/')
    # Restore unmodified beginning/end
    echo $line | sed -e "s/^.\{$start\}/$front/" -e "s/\(^.\{$end\}\).*$/\1$back/"
} 
```

像这样调用这个函数：

```
$ transform "1.3.5.7.9" 3 7
1.3,5,7.9 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T19:17:42.437

```
$ echo "1.3.5.7.9" |
gawk -v s=3 -v e=7 '{
   print substr($0,1,s-1) gensub(/\./,",","g",substr($0,s,e-s+1)) substr($0,e+1)
}'
1.3,5,7.9 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-04T19:08:02.793

我尝试简化正则表达式，但它更宽松。

```
echo 1.3.5.7.9 | sed -r "s/^(...).(.).(..)/\1,\2,\3/"
1.3,5,7.9 
```

PS：它不适用于 BSD sed。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-06T09:23:22.043

谢谢你们。我发现（不是我的优点）作为简单的解决方案是：

1.  对于固定宽度文件：

    ```
    awk -F "" 'OFS="";{for (j=2;j<= 5;j++) if ($j==".") $j=","}'1 
    ```

将从第 2 个位置到第 5 个位置将所有点更改为逗号。

1.  对于制表符分隔的字段文件：

    ```
    awk -F'\t' 'OFS="\t" {for (j=2;j<=5;j++) gsub(/\./,",",$j)}'1 
    ```

将从第 2 场到第 5 场将所有点变为昏迷。

希望可以帮助某人：无法想象一开始会如此艰难。

# wordpress - 在 WordPress 管理列帖子/产品自定义帖子类型中显示 Slug

> ID：14692890
> 
> 赞同：3
> 
> 时间：2013-02-04T18:15:58.213
> 
> 标签：wordpress, slug

我已经搜索了很多，除了一个破坏 WP 的插件之外找不到任何东西。

我正在使用 WooCommerce，因此涉及自定义帖子类型。在产品列表页面中，我想添加一个新列，在每个产品旁边显示每个产品 url 的 Slug。

我找到了一种非常容易显示 ID 的方法，但不是蛞蝓。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-02-06T07:10:05.850

这是确切的工作代码：

```
// Add product slug column after product name
    function add_product_slug_column_heading( $columns ) {
        $slug_column = array(
            'product_slug' => __( 'Slug' )
        );
        $columns = array_slice( $columns, 0, 3, true ) + $slug_column + array_slice( $columns, 3, count( $columns ) - 1, true );

        return $columns;
    }
    add_filter('manage_edit-product_columns','add_product_slug_column_heading');

    // Display product slug
    function add_product_slug_column_value( $column_name, $id ) {
        if ( 'product_slug' == $column_name ) {
            echo get_post_field( 'post_name', $id, 'raw' );
        }
    }
    add_action( "manage_product_posts_custom_column", 'add_product_slug_column_value', 10, 2 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-23T09:19:45.270

首先，您要在产品名称后添加一个 slug 列。

```
// Add product slug column after product name
function add_product_slug_column_heading( $columns ) {
    $slug_column = array(
        'product_slug' => __( 'Slug' )
    );
    $columns = array_slice( $columns, 0, 3, true ) + $slug_column + array_slice( $columns, 3, count( $columns ) - 1, true );

    return $columns;
} 
```

然后使用 manage_product_posts_custom_column 过滤器来显示 slug 值。

```
// Display product slug
function add_product_slug_column_value( $column_name, $id ) {
    if ( 'product_slug' == $column_name ) {
        echo get_post_field( 'post_name', $id, 'raw' );
    }
}
add_action( "manage_product_posts_custom_column", 'add_product_slug_column_value', 10, 2 ); 
```

**无编码解决方案**

如果您只是在寻找无需编码的快速解决方案，您可以使用完全免费的[管理列](https://wordpress.org/plugins/codepress-admin-columns/)。它使您只需单击几下即可添加相同的 slug 列。

# php - 在 textarea 中获取选定的多个值

> ID：14692896
> 
> 赞同：0
> 
> 时间：2013-02-04T18:16:21.917
> 
> 标签：php, html, selected

我有一个 db_field （短代码），它在提交查询时返回一个字符串。该返回的值是 AB,EF,GH（正是这个！

第二部分是我有一个带有短代码列表的文本区域。所以我试图突出显示（选择）相同的 macthed 元素。例如：

```
$String_in_Database = AB,EF,GH; 
```

希望拥有：

```
<select name="Country[]" id="Country" multiple="multiple" size="5">
<option value="AB" selected>AB</option>
<option value="CD">CD</option>
<option value="EF" selected>EF</option>
<option value="GH" selected>GH</option>
......
</select> 
```

这就是我生成选项的方式：

```
<?php $MyArray = $settingsUser['set_disallowcountries']; ?>
<?php foreach($disallCountry as $key => $value) { ?>
<option value="<?php echo $value['short'] ?>" <?php if(is_array($value['short'], $MyArray)) { echo 'selected'; }?>><?php echo $value['long'] ?></option>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:55:15.757

我对这个问题有点不确定，所以你想检查用户是否选择了国家并在选项下拉/框中选择了它？

```
<?php
$userSelected= explode(",", $string_in_database);
$allCountries = array('AA', 'BB', 'CC');
foreach($allCountries as $country)
    if(in_array($country["short"], $myArray){
        $selected = 'selected';
    } else {
        $selected = '';
    }
    echo '<option value="'.$country["short"].'" '.$selected.'>'.$country["long"].'</option>';
} 
```

这样，如果数据库中的用户字符串（我猜是用户设置）与 AA、BB 或 CC 相同，则它们将被选中，如果不是，则不会被选中。

据我所知，我认为这应该可行，但我可能错了，因为我还没有测试过。只是我的想法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:24:40.143

也许你想把这个字符串分解成数组？

```
 $MyArray = explode(",",$String_in_Database); 
```

# actionscript-3 - 使用 GreenSock 补间 alpha

> ID：14692901
> 
> 赞同：0
> 
> 时间：2013-02-04T18:16:44.677
> 
> 标签：actionscript-3, alpha, tween, flash-cs6, gsap

尝试`graphics`使用 GreenSock 对 AS3 中对象的 alpha 进行补间，但这些功能不起作用。尝试在 2 秒内从 alpha 0 补间到 0.7。该`fromTo();`方法也不起作用。我不想，但我是否必须改为使用增量 for 循环来执行此操作？——因为这不会让我控制补间的时间。

```
public function overlayBox():void {

    var overlaySquare:Sprite = new Sprite();

    overlaySquare.graphics.beginFill(0x00000);
    overlaySquare.graphics.drawRect(0, 0, displayRes, displayRes);
    overlaySquare.graphics.endFill();
    overlaySquare.x = xScreenPos;
    overlaySquare.y = yScreenPos;
    TweenMax.from(overlaySquare, 2, {autoAlpha:0});
    TweenMax.to(overlaySquare, 2, {autoAlpha:0.7});

    addChild(overlaySquare);
    trace("overlaySquare index: " + getChildIndex(overlaySquare));
} 
```

编辑：我通过将上面的 TweenMax 函数替换为以下内容，修复了从 alpha 0 到 0.7 的渐变：

```
overlaySquare.alpha = 0;
TweenMax.to(overlaySquare, 5, {alpha:0.7}); 
```

但是，当它与程序的其余部分一起运行时，alpha tween 会出现问题。补间“闪烁”并立即变为 0.7（它看起来像是从 0 到 0.7 的“跳跃”），只要你能看到它。该问题已被隔离到在`overlayBox();`程序概述之后调用的函数：使用加载器加载图像。在装载机内部，有一个`myTimer.start();`. 这用于在加载图像后运行程序的其余部分。这`overlayBox();`是遵循并运行良好的第一种方法。下一个方法`textAnimation();`是破坏它，我不知道为什么：

```
public function textAnimation():void {

        //set text format
        textFormat.font = "Helvetica Neue Light";
        textFormat.size = 28;
        textFormat.bold = false;
        textFormat.color = 0xFFFFFF;
        //textFormat.letterSpacing = 5;

        //set text size
        var size18bold:TextFormat = new TextFormat();
        size18bold.size = 36;
        size18bold.bold = true;

        // pass text format
        textOne.defaultTextFormat = textFormat;
        textTwo.defaultTextFormat = textFormat;

        var xScreenPosStart:Number = xScreenPos + 440;
        var xScreenPosEnd:Number = xScreenPos - 300;

        textOne.text = "Blah blah blah";
        textOne.autoSize = TextFieldAutoSize.LEFT;
        textOne.x = xScreenPosStart;
        textOne.y = yScreenPos + 240;
        TweenMax.to(textOne, 14, {x:xScreenPosEnd, ease:SlowMo.ease.config(1, 0), repeat:-1});

        textTwo.text = "Blah blah blah";
        textTwo.autoSize = TextFieldAutoSize.LEFT;
        textTwo.x = xScreenPosStart;
        textTwo.y = yScreenPos + 140;
        TweenMax.to(textTwo, 12, {x:xScreenPosEnd, ease:SlowMo.ease.config(1, 0), repeat:-1, delay:4});

        //add to stage
        addChild(textOne);
        trace("textOne index: " + getChildIndex(textOne));
        addChild(textTwo);
        trace("textTwo index: " + getChildIndex(textTwo));

        textOne.setTextFormat(size18bold);

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:22:08.820

不要使用 TweenMax.from，而是手动设置 alpha。

```
overlaySquare.alpha = 0;
TweenMax.to( overlaySquare, 2, { alpha : .7 } ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:20:27.167

给 alpha 一个初始值并且只使用 tweenMax.To

您是否激活了自动 Alpha 插件？如果没有，那么通过

```
import com.greensock.TweenLite; 
import com.greensock.plugins.TweenPlugin; 
import com.greensock.plugins.AutoAlphaPlugin; 

//activation is permanent in the SWF, so this line only needs to be run once.
TweenPlugin.activate([AutoAlphaPlugin]); 
```

如果您不需要自动 alpha，则只需使用 alpha 属性

我试过这个：

```
private function _Show() : void {
    var overlaySquare:Sprite = new Sprite();
    overlaySquare.graphics.beginFill(0x00000);
    overlaySquare.graphics.drawRect(0, 0, 200, 200);
    overlaySquare.graphics.endFill();
    overlaySquare.x = 100;
    overlaySquare.y = 100;
    TweenMax.to(overlaySquare, 2, {alpha:0.7});

    addChild(overlaySquare);
    trace("overlaySquare index: " + getChildIndex(overlaySquare));
} 
```

这行得通。

# javascript - 如何在选定元素上调用函数？

> ID：14692904
> 
> 赞同：2
> 
> 时间：2013-02-04T18:16:58.257
> 
> 标签：javascript, jquery

警告：愚蠢的问题！但是我已经尝试查找此内容，但我无法弄清楚要搜索什么或我做错了什么。我正在尝试使图像淡入，这是我的代码：

```
$('.Middle-Tennessee').show().showNice(this); 
```

后来我有了我的功能：

```
function showNice(x){
    x.css('opacity', '0');
    x.animate({
        opacity: 1,
    }, 5000);
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:21:36.710

这里有很多不同的选项，主要取决于您要如何编写代码：

您用于`.each()`迭代 jQuery 函数并在集合中的每个项目上调用您自己的函数：

```
$('.Middle-Tennessee').show().each(function(index, element) {
    showNice($(element));
}); 
```

* * *

或者，因为您的`showNice()`函数已经需要一个 jQuery 集合，您也可以这样做：

```
var items = $('.Middle-Tennessee').show();
showNice(items); 
```

* * *

或者，您可以放弃该`showNice()`函数而只使用 jQuery 链接：

```
$('.Middle-Tennessee').show().css("opacity", 0).animate({opacity: 1}, 5000); 
```

* * *

或者你可以使用内置的 jQuery 动画来代替显示、不透明度和动画：

```
$('.Middle-Tennessee').fadeIn(5000); 
```

* * *

或者，你可以做`showNice()`一个像这样的 jquery 插件：

```
jQuery.fn.showNice = function() {
    this.css('opacity', '0').animate({
        opacity: 1,
    }, 5000);
    return this;
} 
```

然后，您可以像使用 jQuery 方法一样使用 showNice：

```
$('.Middle-Tennessee').show().showNice(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-04T18:17:59.540

```
showNice($('.Middle-Tennessee').show());

function showNice(x){
    x.css('opacity', '0');
    x.animate({
        opacity: 1,
    }, 5000);
} 
```

或者

你可以使用 jquery 淡入淡出

```
$('.Middle-Tennessee').hide().fadeIn(5000); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-04T18:19:31.230

`showNice`不是 jQuery 方法，它期望 jQuery 集合作为它的参数：

```
showNice($('.Middle-Tennessee').show()); 
```

要使其与 一起使用`$('.Middle-Tennessee').show().showNice();`，您需要将其添加到 jQuery 集合原型中（通过快捷方式`$.fn`）：

```
$.fn.showNice = function showNice() {
    this.css('opacity', '0');
    this.animate({
        opacity: 1,
    }, 5000);
    return this;
}; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-04T18:20:57.200

您可以简单地将 jQuery 对象作为*参数*传递给您的函数：

```
showNice($('.Middle-Tennessee')); 
```

- 或者 -

您还可以使用 jQuery 的*方法*：[`fadeIn()`](http://api.jquery.com/fadeIn/)

 *```
$('.Middle-Tennessee').fadeIn(5000); 
```

*请注意第一个示例中 Javascript函数*的使用与第二个示例中使用本机 jQuery*方法*之间的区别。*

# perl - 在子外壳上执行命令

> ID：14692906
> 
> 赞同：0
> 
> 时间：2013-02-04T18:17:06.597
> 
> 标签：perl, shell

这是更新的问题

**脚本：**

```
open (my $pipe, "| ptsetenv.sh $ProductType $Release");

print $pipe "genidasack.py -v --alignment=mips64 -a -s $WORKSPACE/dbgen/ose_signals_ADA.sdt -o $WORKSPACE/$Product/\n";

close ($pipe); 
```

**命令 2：**

```
ptsetenv.sh $ProductType $Release  # Sets Environment Variables and creates a Child Shell 
```

**命令 3：**

```
genidasack.py -v --alignment=mips64 -a -s $WORKSPACE/dbgen/ose_signals_ADA.sdt -o $WORKSPACE/$Product/\n #this has to be executed on child Shell created by Command 2 
```

目前，当我在调用第一行子 shell 后在 perl 脚本中运行脚本时，当从子 shell 中键入 exit 时，脚本仍保留在子 shell 中，执行后续脚本行，这不是需要的！

**这是 ptsetenv.sh 的内容**

```
 envsetup.py $*

 ./export_env.sh 
```

export_env.sh 是基本上创建子外壳的脚本

如果您需要 export_env.sh 的内容，请告诉我

**这里是 export_env.sh 的内容**

```
has_dir()

    {
                 if [ -d $1 ]; then
                     return 0
                else
                 return 1
                fi
           }
            has_dir $DXENVROOT
             if [ "$?" != "0" ]; then
                echo "Directory $DXENVROOT does not exist. Exiting the script."
                exit -1
            fi
 echo "Environment set to ${DXENVNAME} ${DXENVVERSTR}"

 echo $SHELL

 $SHELL

echo "Exiting ${DXENVNAME} ${DXENVVERSTR} shell" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:26:55.410

这将在子 shell 中运行一系列命令：

```
system("Command 1; python script; Command 2"); 
```

你也可以这样做：

```
system("Command 1");
system("python script");
system("Command 2"); 
```

如果命令中没有特殊的 shell 字符，这可以避免创建 shell 进程。

更新：

现在您已经阐明了 python 脚本启动了一个子 shell，下面是如何向它发送命令：

```
open (my $pipe, "| Command 1; python script");
print $pipe "Command 2\n";
close ($pipe); 
```

# node.js - 停止一个目录中的所有节点进程，除了我刚刚开始的一个

> ID：14692912
> 
> 赞同：1
> 
> 时间：2013-02-04T18:17:34.730
> 
> 标签：node.js, unix, process, sublimetext2

我正在使用 sublime text 2 的构建系统来帮助开发我的 mongodb + node.js 服务器，这真的很方便，因为它使我能够测试我的代码而不必继续返回到终端。缺点是很容易心不在焉地让多个节点进程在后台运行，当其中一个节点使用我需要的端口来测试另一个模块时，这有时会导致冲突。

每当我从该目录启动新进程时，是否有某种方法可以停止在给定目录中运行的所有节点进程？一个bash脚本或类似的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:42:53.230

尝试这样的事情：

```
ps auxwwwe | egrep " [n]ode .+ PWD=$PWD" | awk '{ print $2 }' | xargs kill 
```

这将执行以下操作：

1.  用于`ps`获取流程的完整路径。
2.  在当前工作目录中搜索使用该`node`命令启动的所有进程（您可以使用绝对路径、另一个环境变量等进行修改）。
3.  查找第二列：pid（使用`awk`或`nawk`取决于您的系统）。
4.  `kill`在每个 pid 上运行。

# c# - 创建包含多个工作表的 Excel 文件

> ID：14692914
> 
> 赞同：0
> 
> 时间：2013-02-04T18:17:52.923
> 
> 标签：c#, asp.net, excel

您是否编写此代码来创建带有两个选项卡的 Excel 电子表格？目前只做一个。

```
string attachment = string.Empty;
StringWriter sw = new StringWriter();
HtmlTextWriter htw = new HtmlTextWriter(sw);

HtmlForm frm = new HtmlForm();
frm.Attributes["runat"] = "server";

attachment = "attachment; filename=MyFile.xls";
GridView1.Parent.Controls.Add(frm);
frm.Controls.Add(GridView1);

Response.ClearContent();
Response.AddHeader("content-disposition", attachment);
Response.ContentType = "application/ms-excel";

frm.RenderControl(htw);

Response.Write(sw.ToString());

Response.End(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:48:33.623

我敢肯定，除非您使用 Excel 的 MS Office Interop 程序集或诸如[Open XML SDK](http://msdn.microsoft.com/en-us/library/office/bb448854.aspx)之类的库，否则您无法做到这一点。

请注意，您不是使用上述方法创建真正的 excel 文件，而只是诱使 excel 打开您发送的数据，就好像那些是真正的 excel 文件一样。这就是为什么您在 MS Excel 中打开它时很可能会收到警告消息的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:57:27.620

似乎有一篇 Microsoft 文章详细说明了如何将数据从应用程序导出到 Excel，尽管它有点过时 (2005) [http://support.microsoft.com/kb/306023](http://support.microsoft.com/kb/306023)

它似乎涵盖了多个工作表，尽管我自己从未使用过这些方法。

# java - 我的 tcp 客户端/服务器程序中没有写入任何值

> ID：14692922
> 
> 赞同：0
> 
> 时间：2013-02-04T18:18:29.663
> 
> 标签：java, sockets, tcp, io

在我的 TCP 套接字程序中，我必须将数据从客户端发送到服务器。在服务器端，我必须读取流并将其写入文件。但是文件被创建了，里面没有写任何东西。

发送文件的客户端编码：

```
try
{

    Socket ss = new Socket("localhost", 5010);

    BufferedOutputStream put = new BufferedOutputStream(ss.getOutputStream());
    BufferedReader st = new BufferedReader(new InputStreamReader(ss.getInputStream()));

    File f = new File("e://read.txt");
    FileInputStream fis = new FileInputStream(f);
    byte buf[] = new byte[1024];
    int read;
    while((read = fis.read(buf, 0, 1024)) != -1)
    {
        put.write(buf,0,read);
        put.flush();
    }
    //d.close();
    System.out.println("File transfered");
    ss.close();

}
catch(Exception e)
{
    System.out.println(e);
} 
```

服务器读取输入流并将其写入文件：

```
try
{
    ServerSocket ss = new ServerSocket(5010);
    Socket s = ss.accept();
    BufferedReader get = new BufferedReader(new InputStreamReader(s.getInputStream()));

    FileWriter writedata = new FileWriter("c://write.txt");

    BufferedWriter bw = new BufferedWriter(writedata);

    String line=bw.toString();
    while ((line = get.readLine()) != null) {
        bw.write(line + "\n");
    }
}
catch(Exception e)
{
    System.out.println(e);
} 
```

问题是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:26:48.543

您忘记了 bw.close 和 bw.flush ....以下是有效的代码...

```
import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.FileWriter;
import java.io.InputStreamReader;
import java.net.ServerSocket;
import java.net.Socket;

public class TestServer
{
    public static void main(String[] args)
    {
        try
        {
        ServerSocket ss=new ServerSocket(5010);
        Socket s=ss.accept();
        BufferedReader get= new BufferedReader(new InputStreamReader(s.getInputStream()));

        FileWriter writedata=new FileWriter("c://Test//testoutput.txt");

        BufferedWriter bw=new BufferedWriter(writedata);

        String line=bw.toString();
        while ((line = get.readLine()) != null) {

            bw.write(line + "\n");

        }
        bw.flush();
        bw.close();
        }
        catch(Exception e)
        {
            System.out.println(e);
        }
    }
}

import java.io.BufferedOutputStream;
import java.io.BufferedReader;
import java.io.File;
import java.io.FileInputStream;
import java.io.InputStreamReader;
import java.net.Socket;

public class TestClient
{
    public static void main(String[] args)
    {
        try
        {

           Socket ss=new Socket("localhost",5010);

           BufferedOutputStream put=new BufferedOutputStream(ss.getOutputStream());
           BufferedReader st=new BufferedReader(new InputStreamReader(ss.getInputStream()));

           File f=new File("c://Test//testinput.txt");
           FileInputStream fis=new FileInputStream(f);
           byte buf[]=new byte[1024];
           int read;
           while((read=fis.read(buf,0,1024))!=-1)
           {
               put.write(buf,0,read);
               put.flush();
           }
           //d.close();
           System.out.println("File transfered");
           ss.close();
           ss.close();

        }
        catch(Exception e)
        {
            System.out.println(e);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T22:52:11.507

除非您知道数据是文本，否则不要使用 Readers 和 Writers。使用 InputStreams 和 OutputStreams，并复制它们：

```
while ((count = in.read(buffer)) > 0)
{
  out.write(buffer, 0, count);
}
out.close();
in.close(); 
```

在客户端和服务器中都使用此逻辑。

笔记：

1.  `flush()`将一个循环放入该循环会适得其反。
2.  如果`buffer`大于 4096（应该是），那么使用 a 是没有意义的`BufferedInputStream`。

# html - 填充影响 利润

> ID：14692925
> 
> 赞同：2
> 
> 时间：2013-02-04T18:18:49.713
> 
> 标签：html, css, margin, padding

我有一个使用创建的设计`html`，`css`并且遇到了一个让我感到困惑的问题。

我的`div`标签周围的标签`p`有一个`padding`. `0 20px;`该`p`标签是默认的（根据`font-size`）或在`css`.

**问题：***除非*周围至少有一个`margin`of ，否则`p`不会显示标签的。*`padding``1px``div`*

 ***HTML**

```
<div>
    <p>Why hello there Sir!</p>
</div> 
```

**CSS**

```
div {
    padding:0 20px;
    /* padding:1px 20px; */
    /* fixes the issue but adds an extra pixel, which I don't want */
    background:#ccc;
}
p {
    margin:20px 0;
} 
```

这是一个工作示例（带有修复问题的按钮）：http: [//jsfiddle.net/hrRNu/](http://jsfiddle.net/hrRNu/)

我真的很希望它可以在没有任何填充的情况下工作。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-04T18:36:45.263

这就是所谓的“折叠边距”，是正常行为。在此处查看更多信息：http: [//www.w3.org/TR/CSS2/box.html#collapsing-margins](http://www.w3.org/TR/CSS2/box.html#collapsing-margins)

设置 p——一个自然的块级元素——`inline-block`对于你的问题并不是一个合适的“修复”。

您可以改为将边距设置为 div 本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:21:23.147

试试这个

```
div {
    background:#ccc;
    padding:0 20px;
}
p {
    display: inline-block;
    margin:20px 0;
} 
```*

# ruby-on-rails - Rails 环境中的“私有”Rake 任务

> ID：14692926
> 
> 赞同：7
> 
> 时间：2013-02-04T18:18:53.337
> 
> 标签：ruby-on-rails, ruby, syntax, rake

我知道我可以通过以下方式调用子任务列表，并让每个任务都使用我项目的 Rails 环境：

```
task :main_task => [:sub_task1, :sub_task2] do
end

task :sub_task1 => :environment do
  Model1.some_class_method
end

task :sub_task2 => :environment do
  Model2.some_class_method
end 
```

我的问题是

1.  有什么办法`:main_task`可以通过，`:environment`这样我就不必明确地将它放在每个子任务中？
2.  有没有办法让子任务被认为是“私有的”？也就是说，我不希望单独显式调用它们。他们只会从`:main_task`. 基本上我需要从一个数据库（SQLServer）中读取数据并填充另一个数据库（MySQL - Rails 项目的数据库），但我想将“读取”任务与“填充”任务分开以提高可读性。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-04T19:35:24.573

您可以`:environment`在其他两个任务之前在父任务中列出一次任务，使其仅列出一次。

```
task :main_task => [:environment, :sub_task1, :sub_task2] do
end 
```

没有“私人”任务，但是您可以`rake -T`通过不在它们上方放置一条`desc`线来防止它们被列出。如果直接调用它们（检测父母所做的事情或类似的事情），您可以通过抛出异常来手动强制它们。

但是，您可能会有更好的时间将代码放在不直接公开为 rake 任务的共享方法或类中。

# android - 如何停止 TimerTask 处理程序？

> ID：14692927
> 
> 赞同：2
> 
> 时间：2013-02-04T18:18:58.387
> 
> 标签：android, handler, timertask

我正在尝试停止 Timer 或 TimerTask，但该方法不会破坏任务......

首先是我如何设置timertask的代码：

```
 scanTask = new TimerTask() {
    public void run() {
            handler.post(new Runnable() {
                    public void run() {
                     load_unread();
                     Log.d("TIMER", "Timer set off");
                    }
           });
    }}; 
```

t=新计时器（）；t.schedule(scanTask, 300, 10000);

现在我正试图在 onDestroy 上“杀死”这个任务：

```
@Override
protected void onDestroy() {
    super.onDestroy();
    scanTask.cancel();
    t.cancel();
    t.purge();
    handler.removeCallbacksAndMessages(null);
    System.out.println("Chat destroyed");
} 
```

但这不起作用？你能帮我找到解决办法吗？

谢谢！

编辑：我终于找到了答案。不知道为什么我的没有工作...

这里是每个有相同问题的人的代码。无论如何，我认为这是一个更好，更有效的解决方案：

`private Handler handler = new Handler(); runnable.run();`

 ````
private Runnable runnable = new Runnable() 
{

    public void run() 
    {
         //
         // Do the stuff
         //

         handler.postDelayed(this, 1000);
    }
}; 
````  `并停止：

 `````
handler.removeCallbacks(runnable); 
````  `取自这里：

[https://stackoverflow.com/a/11640073/1956197](https://stackoverflow.com/a/11640073/1956197)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T17:45:30.607

查看您的编辑后，我建议的唯一方法是使用`handler.post(runnable);`这种`runnable.run();`方式，您始终在单独的线程上执行您的可运行文件。否则，您的第一次执行将在主线程上运行，然后未来的执行将在单独线程上的处理程序内运行。

```
 final Handler handler = new Handler();

    Runnable runnable = new Runnable() {

        public void run() {
            //
            // Do the stuff
            //

            handler.postDelayed(this, 1000);
        }
    };

    handler.post(runnable); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:38:25.687

在将 TimerTask 设置为空之前取消它。

```
scanTask.cancel(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-06-19T12:25:32.847

这个例子启动定时器 unitl 被销毁

```
 private lateinit var timerTask: TimerTask

 timerTask = object : TimerTask() {
        override fun run() {
            Log.d("KTZ", "$minutes:$seconds");
            timeRecordingLiveData.postValue("$minutes:$seconds")
            seconds += 1;
            if (seconds == 60) {
                Log.d("KTZ", "$minutes:$seconds");
                timeRecordingLiveData.postValue("$minutes:$seconds")
                seconds = 0;
                minutes += 1;
            }
        }

    } 
```

在 onDestroy() 中取消 timertask

```
 timerTask.cancel() 
``````

# wpf - 如何在 WPF 中设置我的 ComboBox 及其项目的样式？

> ID：14692930
> 
> 赞同：1
> 
> 时间：2013-02-04T18:19:09.463
> 
> 标签：wpf, combobox, itemtemplate

我有一个 ComboBox，我想用一些自定义样式对其进行样式设置。我成功地提供了所需的样式。在风格中，我有以下元素：

*   切换按钮的模板
*   包含 ComboBox 项目的弹出窗口

我提到的几乎所有链接都使用了相同的方法。但是使用这种方法，我无法为 ComboBox 中的项目提供模板。由于某种原因，我定义的项目模板没有用于渲染项目。有人可以帮我吗？我正在粘贴一个代码示例以使我的问题陈述清楚（代码中可能有错误，我只是想要一个想法继续进行）。

```
 <Window.Resources>
    <Style x:Key="{x:Type ComboBox}" TargetType="{x:Type ComboBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate>
                    <Grid>
                        <ToggleButton Template="{StaticResource MyToggleButton}"/>
                        <Popup >
                            <StackPanel>
                                <Border/>
                                <ItemsPresenter/>
                            </StackPanel>
                        </Popup>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
</Window.Resources>
<Grid>
    <ComboBox Style="{StaticResource MyStyle}">
        <ComboBox.ItemTemplate>
            <DataTemplate>

            </DataTemplate>
        </ComboBox.ItemTemplate>
    </ComboBox>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T18:29:53.980

如果您尝试为 ComboBoxItem 控件提供不同的 ControlTemplate，则需要将 ComboBox 上的 ItemContainerStyle 属性设置为类似于您已经对父控件所做的样式，但针对 ComboBoxItem。ItemTemplate 定义了一个 DataTemplate 以应用于每个项目的数据，然后将其注入该 ComboBoxItem ControlTemplate。

```
<ComboBox Style="{StaticResource MyStyle}">
    <ComboBox.ItemContainerStyle>
        <Style TargetType="{x:Type ComboBoxItem}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                        <Border>
                            <ContentPresenter/> <!--ItemTemplate is injected here-->
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </ComboBox.ItemContainerStyle>
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding Path=SomePropertyOnMyDataObject}"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

# php - 从 passthru 和 top 获取某些信息

> ID：14692934
> 
> 赞同：0
> 
> 时间：2013-02-04T18:19:16.240
> 
> 标签：php, linux, passthru, system-information

我尝试使用这种可能的解决方案，但没有任何运气：

```
$test = passthru('/usr/bin/top -b -n 1');
preg_match('([0-9]+ total)', $test, $matches);
var_dump($matches); 
```

该代码显示以下文本：

```
top - 19:15:43 up 31 days, 23 min, 1 user, load average: 0.00, 0.01, 0.05 Tasks: 85 total, 1 running, 84 sleeping, 0 stopped, 0 zombie Cpu(s): 0.1%us, 0.0%sy, 0.0%ni, 99.8%id, 0.1%wa, 0.0%hi, 0.0%si, 0.0%st Mem: 247980k total, 224320k used, 23660k free, 68428k buffers Swap: 521212k total, 37120k used, 484092k free [...] 0.4 0:00.00 top array(0) { } 
```

如何获取某些信息，例如任务总数，以便仅显示`84 total`？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:46:26.793

感谢 Barmar 和 Satish，我得到了它的工作。这是正确的代码：

`exec("/usr/bin/top -b -n 1 | grep Tasks: | awk -F' ' '{print $4}'")`

非常感谢！:)

# javascript - 图像旋转与钛平移

> ID：14692938
> 
> 赞同：0
> 
> 时间：2013-02-04T18:19:35.723
> 
> 标签：javascript, titanium-mobile

我想将图像从左到右移动，不断旋转，并且它的大小不断减小，直到图像消失。它想在 javascript 中为钛执行此操作。我试过，但图像会自发跳跃，然后向下移动，然后改变位置，但移动并不顺畅。我只是希望它不会跳。我不是经验丰富的程序员，所以需要你的帮助。我在这里分享一些代码。

```
var tr_start = Titanium.UI.create2DMatrix();
tr_start = tr_start.rotate(30);

var tr_end = Titanium.UI.create2DMatrix();
tr_end = tr_end.scale(1);
tr_end = tr_end.translate(10,0);
tr_end = tr_end.scale(.5);
tr_end = tr_end.translate(20,0);
tr_end = tr_end.rotate(360);
tr_end = tr_end.translate(100,0);
var view = Titanium.UI.createView({
    width:'30%',
    height:'30%',
    transform:tr_start,
}); 
var headerimg = Titanium.UI.createImageView({     
    backgroundImage:'header.png',
    height:'100%',
    width:'100%',
    zIndex:2   
});
view.add(headerimg); 
win.add(view);
view.animate({
    transform:tr_end,
    repeat:0,
    //autoreverse:true,
    duration:1000,
    curve:Titanium.UI.ANIMATION_CURVE_EASE_IN_OUT
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T10:53:47.950

将自动反转设置为 false 它可能会有所帮助。

# sql - 模块化 SQL，即使只是语法糖

> ID：14692947
> 
> 赞同：15
> 
> 时间：2013-02-04T18:20:02.957
> 
> 标签：sql, abstraction

有没有办法将 SQL 代码模块化，使其更具可读性和可测试性？

我的 SQL 代码经常变成一长串复杂的嵌套连接、内连接等，难以编写和调试。相比之下，在像 Javascript 或 Java 这样的过程语言中，人们会将离散的元素作为单独的函数捏出来，你可以按名称调用。

是的，可以将每个查询编写为完全独立的查询，存储在数据库中或存储过程，但通常我不想更改/混乱数据库，只需查询就可以了，特别是如果 DBA 不希望授予所有用户写入权限。

例如，从概念上讲，一个复杂的查询可能很容易用伪代码描述，如下所示：

```
(getCustomerProfile) 
left join 
(getSummarizedCustomerTransactionHistory) 
using (customerId) 
left join
(getGeographicalSummaries) 
using (region, vendor)
... 
```

我意识到从理论上的优势（下面有几个链接）写了很多关于这个主题的文章，但我只是在寻找一种方法来使代码更容易正确编写，并且在编写后更容易阅读。也许只是语法糖来从视觉中抽象出复杂性，如果不是从执行中抽象出来，它会在我试图不看的文字 SQL 中编译下来。类推...

*   **手写笔**：CSS ::
*   **CoffeeScript** : Javascript ::
*   **SAS 宏语言**: SAS 语言 ::
*   **?** : SQL

如果特定的 SQL 风格很重要，我的大部分工作都在 PostgresQL 中。

[http://lambda-the-ultimate.org/node/2440](http://lambda-the-ultimate.org/node/2440)

[SQL 中的代码重用和模块化](https://stackoverflow.com/questions/457032/code-reuse-and-modularity-in-sql)

[数据库和函数式编程有矛盾吗？](https://stackoverflow.com/questions/330371/are-databases-and-functional-programming-at-odds)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T18:48:29.777

在大多数数据库中，您可以使用 CTE（通用表表达式）做您想做的事情：

```
with CustomerProfile as (
      getCustomerProfile
     ),
     SummarizedCustomerTransactionHistory as (
      getSummarizedCustomerTransactionHistory
     ),
     GeographicalSummaries as (
      getGeographicalSummaries
     )
select <whatever> 
```

这适用于单个查询。它的优点是您可以定义一次 CTE，但可以多次使用它。此外，我经常定义一个`const`具有常量值的 CTE。

下一步是采用这些结构并从中创建视图。这在多个模块之间共享代码时特别有用，以确保常量定义。在某些数据库中，您可以在视图上放置索引以“实例化”它们，从而进一步优化处理。

最后，我建议在存储过程中包装插入/更新/删除。这使您可以拥有一个一致的框架。

不过还有两条评论。首先，SQL 通常用于事务或报告系统。通常，一旦您为目的获得了正确格式的数据，数据就说明了一切。您的示例可能只是要求一个数据集市，其中包含三个专门用于这三个主题领域的表，这些表每周或每天填充一次。

而且，SQL 不是抽象的思想语言。通过良好的实践、命名约定和缩进样式，您可以使其变得有用。我非常想念“真实”语言中的某些东西，例如宏、错误处理（为什么数据错误如此难以识别和处理超出了我的范围）、通用功能的一致方法（有人可以说组字符串连接）和其他一些特征。也就是说，因为它以数据为中心并且易于并行化，所以它对我来说比大多数其他语言更有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:24:17.050

这里的问题是您需要以关系的方式考虑数据。我不相信这种类型的抽象正确地适合关系模型。就使 SQL 模块化而言，这就是存储过程和/或函数的用途。请注意它们如何具有与 Java 中的方法相同的特征。你可以这样抽象出来。另一种方法是将您关心的数据抽象为物化视图。通过这样做，您可以在这些物化视图之上放置一个常规视图（参见虚函数），这允许您在不触及“原始”表的情况下测试数据结构。

# networking - 确定慢启动阶段的结束

> ID：14692948
> 
> 赞同：1
> 
> 时间：2013-02-04T18:20:18.283
> 
> 标签：networking, tcp, network-programming

我对慢启动阶段有很好的理解，即它最初只允许发送几个数据包，但是这个数量会增加，直到找到最大值以避免拥塞。

然而，对于下图，我如何确定慢启动阶段何时结束？我假设它从 0 秒开始，也就是建立连接的时间。我猜慢启动在 0.65 秒结束？什么时候我们才开始看到一个接一个的两个点（数据包）......或者更确切地说这只是因为避免拥塞？

[![替代文字](../Images/07dc5de50ff2170a7e3c506ebe5b7b3d.png)](https://i.stack.imgur.com/5GWvi.jpg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T11:24:35.043

我同意。如果你加入了这些点会更容易，但我看到在 t=0.65s 时达到最大坡度，然后随着避免拥塞的开始而减速。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T08:50:35.790

有点难以看到（图中没有网格线），但似乎最大窗口大小达到了约 0.76 秒（150000 字节） - 所以慢速开始到此为止。

# objective-c - 按钮检查正确答案objective-c

> ID：14692950
> 
> 赞同：0
> 
> 时间：2013-02-04T18:20:32.083
> 
> 标签：objective-c, ipad, nsstring, uibutton, nsarray

我有一个 UIViewController，里面有 NSArray，我输入了我的正确答案，还有 3 个按钮和 3 个 NSArray 的标题，我想检查我的按钮标题是否等于正确答案然后转到正确的页面否则转到错误的页面

你能帮我完成这个实现吗：

提前致谢！

这是我的代码：

```
NSString *correctOne = @"test1";
NSString *correctTwo = @"test2";
NSString *correctThree = @"test3";
NSString *correctFour = @"test4";
NSString *correctFive = @"test5";
NSString *correctSix = @"test6";
NSString *correctSeven = @"test7";
NSString *correctEight = @"test8";

correctComments = [[NSArray alloc] initWithObjects: correctOne, correctTwo, correctThree, 
correctFour, correctFive, correctSix, correctSeven, correctEight, nil];

int rand = arc4random()%8;
  NSString *correct = [correctComments objectAtIndex:rand];
[test setTitle:(firstAnswer) forState:UIControlStateNormal];
[test setTitleColor:[UIColor blueColor] forState:UIControlStateSelected];
[test setTag:0];

[ansONE setTitle:(secondAnswer) forState:UIControlStateNormal];
[ansONE setTitleColor:[UIColor blueColor] forState:UIControlStateSelected];
[ansONE setTag:1];

[ansTWO setTitle:(threeAnswer) forState:UIControlStateNormal];
[ansTWO setTitleColor:[UIColor blueColor] forState:UIControlStateSelected];
[ansTWO setTag:2];

 - (IBAction)suivant:(id)sender { 
```

//我的问题是我应该如何检查我的按钮标题和正确的评论

```
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:29:07.943

首先，您必须将代码片段中的**正确答案存储到属性中：**

```
self.correctAnswer = correct; 
```

然后对这些字符串**进行比较：**

```
- (IBAction)suivant:(UIButton *)sender {
    // You wanted to check for title:
    if ([sender.currentTitle isEqualToString:self.correctAnswer]) {
        // Correct...
    }
    else {
        // Wrong...
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T18:24:05.650

```
- (IBAction)suivant:(id)sender {
    UIButton *button = (UIButton *)sender;
    int correctIndex = ...;

    BOOL thisIsTheCorrectButton = (button.tag == correctIndex);
    // Do whatever
} 
```

# java - 无法使用 pdfbox 打印任何内容

> ID：14692951
> 
> 赞同：3
> 
> 时间：2013-02-04T18:20:36.600
> 
> 标签：java, pdf, printing, pdfbox

我正在尝试使用 apache 的 pdfbox 来打印 pdf 文件，所以我创建了一个负责打印任何 pdf 文件的控制器。正如您在下面的代码中看到的，控制器只有一个带有文件路径参数的公共方法。控制器无异常运行，但不打印任何内容：

```
public class ControladorImpressao {

    @Value("${nome.impressora}")
    private String nomeImpressora;
    private PDDocument arquivoPDF;
    private Logger logger = LoggerFactory.getLogger(this.getClass());

    public boolean imprimir(String arquivo) {
        try {
            carregarArquivoPDF(arquivo);
            iniciarImpressao(arquivo);
            return true;
        } catch (Exception e) {
            logger.error("Erro ao tentar imprimir documento!",e);
        }
        return false;
    }

    private void carregarArquivoPDF(String arquivo) {
        try {
            arquivoPDF=new PDDocument();
            arquivoPDF.load(arquivo);
        }
        catch (Exception e) {
            logger.error("Erro ao abrir pdf!",e);
        }
    }

    private void iniciarImpressao(String nomeArquivo) throws PrinterException {
        PrintService impressora=recuperarImpressora();
        PrinterJob job = PrinterJob.getPrinterJob();
        job.setPrintService(impressora);
        job.setJobName(nomeArquivo);
        job.setCopies(1);
        arquivoPDF.silentPrint(job);
    }

    private PrintService recuperarImpressora() {
        PrintService[] printServices = PrinterJob.lookupPrintServices();
        for (int count = 0; count < printServices.length; ++count) {
            if (nomeImpressora.equalsIgnoreCase(printServices[count].getName())) {
                return printServices[count];
            }
        }
        return null;
    }
} 
```

我正在使用带有 maven 的 pdfbox 1.7.0 版：

```
 <dependency>
        <groupId>org.apache.pdfbox</groupId>
        <artifactId>pdfbox</artifactId>
        <version>1.7.0</version>
 </dependency> 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T19:49:17.370

解决了更改我实例化 PDDocument 的方式（现在我正在使用静态负载）和更改我使用 PrinterJob 的方式的问题：

```
public class ControladorImpressao {

    @Value("${nome.impressora}")
    private String nomeImpressora;
    private PDDocument arquivoPDF;
    private Logger logger = LoggerFactory.getLogger(this.getClass());

    public boolean imprimir(String arquivo) {
        try {
            arquivoPDF=PDDocument.load(new File(arquivo));
            PrinterJob job = PrinterJob.getPrinterJob();
            job.setPrintService(recuperarImpressora());
            job.setJobName(arquivo);
            job.setPageable(arquivoPDF);
            job.print();
            return true;
        } catch (Exception e) {
            logger.error("Erro ao tentar imprimir documento!",e);
        }
        return false;
    }

    private PrintService recuperarImpressora() {
        PrintService[] printServices = PrinterJob.lookupPrintServices();
        for (int count = 0; count < printServices.length; ++count) {
            if (nomeImpressora.equalsIgnoreCase(printServices[count].getName())) {
                return printServices[count];
            }
        }
        return null;
    }
} 
```

我注意到的一件有趣的事情是，如果改为使用静态加载方法，我会使用：

```
arquivoPDF=new PDDocument();
arquivoPDF.load(arquivo); 
```

我仍然无法打印任何东西，可能问题出在加载方法中。感谢@yms，如果他没有告诉我有关 PdfBox 文档中的注释，我可能会走另一条路。

# sql - 从关卡完成表创建排行榜

> ID：14692952
> 
> 赞同：0
> 
> 时间：2013-02-04T18:20:38.000
> 
> 标签：sql, group-by, leaderboard

我有一张桌子`completion_log`，有`team_id`,`level`和`completion_time`。当每个团队完成一个关卡时，将插入一条记录，其中包含相应的关卡和时间值。从数据中创建排行榜的最佳 SQL 查询是什么 - 按最高值的降序列出团队，`level`如果最高级别相同，则按`completion_time`升序排序？

我试过类似的东西：

```
SELECT team_id, max(level) FROM completion_log GROUP BY team_id ORDER BY max(level) 
```

虽然这几乎可以完成这项工作，但当每个团队`completion_time`的值相同时，这并不能排序。`max(level)`怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:23:41.783

```
SELECT team_id, max(level), completion_time FROM completion_log GROUP BY team_id ORDER BY max(level), completion_time 
```

您可以按多个字段排序。

# html - 为网络视频添加注释

> ID：14692957
> 
> 赞同：2
> 
> 时间：2013-02-04T18:21:07.673
> 
> 标签：html, video, web, popcornjs

我想实现一个 Web 应用程序，您可以在其中**上传视频**（例如 mp4 格式）并向其**添加自定义消息**或**标记特定帧**。我需要能够确定包含文本的气球的位置、大小和持续时间。该界面应该足够容易使用，并允许您添加简单的文本或链接。

我怎么能实现这个？有我可以使用的平台吗？环顾四周，我发现这个名为**WireWax**的平台基本上可以满足我的一切需求，但是没有定价部分，我怀疑您必须直接与他们联系。

我发现的另一个有趣的产品是**Popcorn.js**，它允许您为视频添加注释，但我必须从头开始创建界面来添加消息。

你有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:48:51.863

Popcorn.js 确实有一个接口。它被称为爆米花机，它在这里： [https ://popcorn.webmaker.org/](https://popcorn.webmaker.org/)

它是开源的，所以你可以随意修改它。来源在这里：[https ://github.com/mozilla/butter](https://github.com/mozilla/butter)

# android - Eclipse 在使用 R.layout.camera_surface 时出现错误，因为 camera_surface 无法解析或不是字段

> ID：14692964
> 
> 赞同：0
> 
> 时间：2013-02-04T18:21:26.687
> 
> 标签：android, android-camera

我正在尝试访问 Android 中的摄像头以获取实时视频。我正在尝试将我的内容视图设置为`camera_surface`. 但是，Eclipse 给了我错误`camera_surface cannot be resolved or is not a field`

我的代码如下：

```
public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.camera_surface);
            surfaceView = (SurfaceView) findViewById(R.id.surface_camera);
            surfaceHolder = surfaceView.getHolder();
            surfaceHolder.addCallback(this);
            surfaceHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    } 
```

谁能告诉我出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T04:24:53.113

问题是我需要在文件夹中创建一个名为`camera_surface.xml`的`res->layout`文件并解决了问题。

# android - 依赖Android 3.0并放弃以前的版本是否合理？

> ID：14692970
> 
> 赞同：2
> 
> 时间：2013-02-04T18:21:51.707
> 
> 标签：android

我是 Android 开发新手，用户手中似乎有一千个 Android 版本变体。

Android 3.0+ 上提供了许多 Android 功能（例如 Fragments）。从市场份额的角度来看，为 Android 3.0+ 开发应用程序并放弃使用旧版本 Android 的用户是否合理，或者这是否意味着 50% 的 Android 设备用户将无法使用该应用程序？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-04T18:25:41.313

2.3 是迄今为止使用中最大的版本。 [http://developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)

47.7%，对我来说似乎太大了，无法完全排除。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T19:20:07.617

2.3 占**了很多市场**的人：http: [//developer.android.com/about/dashboards/index.html](http://developer.android.com/about/dashboards/index.html)。

但是 2.3**并没有占到很多潜在收入**（考虑广告商对不同类型用户的重视程度：[tapjoy 研究](http://info.tapjoy.com/wp-content/uploads/2012/10/Tapjoy-Insights_Issue4_Final.pdf)）。毕竟，2.3 的用户要么拥有更便宜的手机，要么懒得购买更新的手机。

而且，支持 2.3 需要**付出更多的努力**。如果支持 2.3，则需要执行以下操作：

*   兼容性库，如果您希望能够使用 Fragments 等功能来支持平板电脑
*   支持多个主题，因为 Holo 主题仅在 4.0+ 上（如果你想要一个有吸引力的应用程序，你*需要使用它）*
*   不要使用方便的 Property Animation 框架和其他很棒的新框架

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-04T19:37:45.090

2.3 ppl 比 4.0 ppl 便宜。

你在卖你的应用程序吗？也许您正试图建立一个庞大的用户群，目的是在以后收费。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T18:30:06.837

除了[Action Bar Sherlock ，](http://actionbarsherlock.com/) [Android 支持库](http://developer.android.com/tools/extras/support-library.html)还提供了许多 Android 3.0+ 功能，您可以支持旧版本的 android。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-04T18:26:49.130

可以依赖fragment并使用正式的兼容包来添加对Android 1.6+的支持

[http://android-developers.blogspot.co.il/2011/03/fragments-for-all.html](http://android-developers.blogspot.co.il/2011/03/fragments-for-all.html) [http://developer.android.com/tools/extras/support-library.html](http://developer.android.com/tools/extras/support-library.html)

Android 上的操作系统更新率低于 iOS，而且更多人使用旧的 Android 版本。在许多情况下，他们根本无法更新他们的操作系统，因为他们的设备制造商没有发布官方更新。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-04T18:27:04.100

支持库和 ActionBarSherlock 可以让您的应用在所有相关版本的 Android 上运行。暂时不要放弃 2.x 支持。

# python - 阅读“BeautifulSoup”页面的具体问题

> ID：14692971
> 
> 赞同：0
> 
> 时间：2013-02-04T18:21:54.323
> 
> 标签：python, beautifulsoup, urllib

我不想为任何产品做广告。

但是错误非常具体，我不知道如何询问。

我想在代码中的页面 A 上的菜单中获取链接，但该页面有另一个页面关联，B

当我阅读菜单时，它从 B 页获取菜单，我不明白为什么。

在 html 中，我看到所有函数和库都在域的页面 B 中。

有什么建议么？

```
from bs4 import BeautifulSoup
import http.cookiejar, urllib.request

mainurl="http://uk.example.com"

cookijar = http.cookiejar.CookieJar()
opener = urllib.request.build_opener(urllib.request.HTTPCookieProcessor(cookijar))
opener.addheaders = [('User-agent', 'Mozilla/5.0')]
mainPage = opener.open(mainurl)
mainPageRequest = mainPage.read()
mainPagesoup = BeautifulSoup(mainPageRequest)

menu=mainPagesoup.find("div", { "class" : "mainNavigation_linkList_content" })
print(menu) 
```

我想要[http://uk.example.com](http://uk.example.com) 和程序读取[http://uk.example.co.uk/](http://uk.example.co.uk/)菜单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T01:21:46.740

urllib 似乎没有按照服务器预期的方式处理重定向。

首次安装[请求](http://docs.python-requests.org/en/latest/)：

```
pip install requests 
```

然后试试这个：

```
import requests
from bs4 import BeautifulSoup

s = requests.Session()
mainPage = s.get("http://uk.accessorize.com")

mainPagesoup = BeautifulSoup(mainPage.text)
menu=mainPagesoup.find("div", { "class" : "mainNavigation_linkList_content" })
print(menu) 
```

# c - Ubuntu 11.04 中的信号处理功能

> ID：14692979
> 
> 赞同：0
> 
> 时间：2013-02-04T18:22:22.013
> 
> 标签：c, unix, signals, ubuntu-11.04

我曾尝试在 ubuntu 中编写信号处理函数。代码如下：

```
 #include<signal.h>
   void abc();

   main(){

   printf("Press Ctrl-z key to send SIGINT signal");
   signal(SIGINT,abc);
   for(;;);
   }
   void abc(){
   printf("The key has been pressed");
   } 
```

有趣的因素是： a) 第一个 printf() 未显示 b) 以及第二个 printf()；

我从一本书中编写了代码。谁能告诉我我犯了什么错误，或者代码是否会针对ubuntu进行更改。

提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:47:08.710

`stdout`是行缓冲的。

您可能希望将 a 附加`\n`到传递给的字符串`printf()`：

```
printf("The key has been pressed.\n"); 
```

* * *

如果`Crtl-C`按下`SIGINT`则发送到在前台运行的进程。`SIGINT`结束应用程序的默认处理程序。

由于 OP 的应用程序安装了一个`SIGINT`不会结束应用程序的信号处理程序，因此如果`Ctrl-C`按下它并因此`SIGINT`引发 a ，它将继续运行。`Ctl-C`只要它保持安装状态，它就会被调用。

要实现`abc()`只调用一次的行为，请修改信号处理程序，如下所示：

```
void abc(int sig) /* 'sig' gets the signal nuber passed in (here: 'SIGINT') */
{
  printf("The key has been pressed.\n");
  signal(sig, SIG_DFT); /* (re-)sets the signal handler for `sig` to the default handler. */
} 
```

* * *

进一步阅读：`man signal`，`man sigaction`

# c# - 如何使用 .NET 4.0 MVC3 将控制器文件连接到视图

> ID：14692981
> 
> 赞同：0
> 
> 时间：2013-02-04T18:22:26.163
> 
> 标签：c#, asp.net-mvc-3

我花了几个小时四处寻找，但是我必须要么在寻找错误的东西，要么做错了什么，因为我似乎找不到我要找的东西。

这似乎是一个新手问题（可能是）。我创建了一个名为 dbconnect.cs 的 C# 文件，现在我正试图弄清楚如何将所有内容连接在一起。我的文件结构如下...

```
-Controllers
  -AcountController.cs
  -dbconnect.cs (not sure if this should go here or in models folder)
  -HomeController.cs

-Models 
  -AccountModels.cs

-Views
   -Account
   -Home
      -About.cshtml
      -Index.cshtml
      -Reviews.cshtml 
```

所以基本上我想弄清楚的是几件事。

1.  使用 MVC3 数据库的正确方法（我的文件应该在控制器或模型中）
2.  如何将我的 dbconnect.cs 文件夹与我的视图连接，以便我可以对其进行故障排除。

非常感谢任何帮助/有用的文档站点。提前致谢。

**编辑：**

我不确定这是否相关。我使用的是 MySql 而不是 SQL。另外我假设我需要使用`using dbconnect;`，但我不确定如何将它与 HTML 文件集成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T21:53:31.683

您应该真正尝试了解模型、视图和控制器的功能。

从理解控制器开始，然后是视图，然后是模型，然后一切都会清楚：

=================***控制器***=================

控制器是用户界面 (UI) 和“后端”之间的中间人。在控制器内部，您可以定义当用户从某个 URL 请求某些内容时会发生什么。控制器通常与 URL 相关联。

这意味着当您转到 URL：/Home/TestFunction 时，您的*HomeController*函数*TestFunction将运行（GET）*

=================***浏览量***=================

视图是用户界面。的 HTML。“它会是什么样子” 视图通常从控制器获取它的“数据”。

这个“数据”是什么——这就是模型：

==============***模型***=================

从 Controller 传输到 View (UI) 之间的数据。

您的代码应在*控制器*中获取数据并应作为*模型*返回到*视图* 顺便说一句，我将使用 EF（实体框架）来操作数据并从控制器调用 EF（通常通过 HelperClass）

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:24:18.570

对于数据库，您应该使用实体框架。

对于视图，每个控制器都应该有一个同名的视图文件夹（例如，`~/Views/Home/`对于 HomeController），每个操作都有一个视图文件。
您还可以将视图名称显式传递给`return View()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T18:30:15.097

假设`dbconnect.cs`在这样的命名空间中包含类定义：

```
namespace MyProject.DbConnect
{
    public class Repository
    {
        // ...
    }
} 
```

在您的控制器类文件中，您可以简单地添加`using MyProject.DbConnect`以引用该命名空间中的任何内容。如果您想从视图中执行此操作，只需添加`@using MyProject.DbConnect`

话虽如此。你真的应该使用像实体框架这样成熟的 ORM。

# python - 如何根据日期创建单独的跟踪列？

> ID：14692982
> 
> 赞同：2
> 
> 时间：2013-02-04T18:22:28.677
> 
> 标签：python, pandas

我有一个数据框，df：

```
df:
            val
date
2012-01-01  4.2      
2012-01-02  3.7
2012-01-03  6.2
2012-01-04  1.2
2012-01-05  2.4
2012-01-06  2.3 
```

我要创建的是一个从 0 开始的指定日期的列，并相应地填写该列（假设本例中的日期是 2012-01-04）：

```
df2:
            val  tracking
date
2012-01-01  4.2  -3
2012-01-02  3.7  -2
2012-01-03  6.2  -1
2012-01-04  1.2  0
2012-01-05  2.4  1
2012-01-06  2.3  2 
```

我尝试使用 np.arange() 但无法集中在我需要的行上。日期列设置为索引（pandas df）。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:45:17.940

我认为最简单的方法是分两部分进行：

```
df['tracking'] = pd.np.arange(len(df))

In [12]: df
Out[12]: 
            val  tracking
date                     
2012-01-01  4.2         0
2012-01-02  3.7         1
2012-01-03  6.2         2
2012-01-04  1.2         3
2012-01-05  2.4         4
2012-01-06  2.3         5

df['tracking'] -= df.ix['2012-01-04']['tracking']

In [14]: df
Out[14]: 
            val  tracking
date                     
2012-01-01  4.2        -3
2012-01-02  3.7        -2
2012-01-03  6.2        -1
2012-01-04  1.2         0
2012-01-05  2.4         1
2012-01-06  2.3         2 
```

# java - 如何在Java中将视频分割成帧

> ID：14692987
> 
> 赞同：0
> 
> 时间：2013-02-04T18:22:39.647
> 
> 标签：java, image, video

> **可能重复：**
> [在 Java 中操作视频的库/教程](https://stackoverflow.com/questions/809646/libraries-tutorials-for-manipulating-video-in-java)

我想知道是否有任何将视频分割成帧的开源库？我正在开发一个程序，该程序接收视频并制作一个新视频，视频上有一些标记（人脸检测）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T18:29:41.780

你可以使用[Xuggler](http://www.xuggle.com/xuggler.)。

本[教程](http://www.javacodegeeks.com/2011/02/xuggler-tutorial-frames-capture-video.html)可能有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T18:34:10.480

您可以使用[Xuggler](http://www.xuggle.com/xuggler)，它既完美又简单

你也可以使用FFMPEG

# apache-camel - 骆驼 CXFRS 响应

> ID：14692988
> 
> 赞同：1
> 
> 时间：2013-02-04T18:22:42.987
> 
> 标签：apache-camel

骆驼保险丝 2.8

我有一个骆驼 jaxrs 服务器，它接受请求然后启动 2 条骆驼路线。

第一个路由，使用来自 cxfrs 端点/bean 的请求并将它们发送到 jms queue *inbox*。

第二条路线，使用来自 jms queue *inbox*的请求进行业务逻辑处理，然后将**结果**发送到 jms queue *outbox*。

我的问题与 http 响应和将**结果**发送给 jaxrs 服务器消费者有关。

是否可以从第一条路由将 http 响应发送回 http 客户端，并从第二条路由返回**结果**？（同步）

```
 from("cxfrs:bean:personLookupEndpoint")   <-- http client waits for response...
            .setExchangePattern(ExchangePattern.InOut)
            .process(new RequestProcessor())
            .to(inbox);

        from(inbox)
            .unmarshal(jaxb)
            .process(new QueryServiceProcessor())
            .to("bean:lookupService?method=processQuery(${body})")
            .convertBodyTo(String.class)
            .to(outbox);  <-- need to send results to font-end consumer synchronously ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T05:15:28.720

你真的需要使用队列吗？我认为使用 direct: 路由会更好。

可以将 InOut 交换模式用于 JMS 端点，但它有一些限制： http: [//fusesource.com/docs/router/2.2/transactions/JMS-Synchronous.html](http://fusesource.com/docs/router/2.2/transactions/JMS-Synchronous.html)

# android - 如何在android中单击按钮开始新活动？

> ID：14692991
> 
> 赞同：0
> 
> 时间：2013-02-04T18:23:01.807
> 
> 标签：android, android-intent, android-activity

单击“登录”按钮时，我试图从一项活动转到另一项活动，这是我的按钮单击代码-

```
public void onClick(View v) {
                // TODO Auto-generated method stub

                if(id.getText().toString().equals("ajay")&&pass.getText().toString().equals("sainy"))
                {
                    Intent i = new Intent(MainActivity.this,adminhome.class);
                    MainActivity.this.startActivity(i);

                }
                else if(id.getText().toString().equals("aj")&&pass.getText().toString().equals("sa"))
                {
                    Intent i = new Intent(MainActivity.this,userhome.class);
                    MainActivity.this.startActivity(i);                 
                }
                else
                    res.setText("Incorrect Credentials...Retry");
            }
        }); 
```

但是当我输入正确的凭据时，“adminhome”或“userhome”活动没有开始。相同的“MainActivity”再次打开。我认为我在以下代码中有问题-

```
Intent i = new Intent(MainActivity.this,adminhome.class);
                    MainActivity.this.startActivity(i); 
```

或在，

```
Intent i = new Intent(MainActivity.this,userhome.class);
                    MainActivity.this.startActivity(i); 
```

问题是什么？请帮忙，我正在学习android。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T18:42:43.760

答案在评论中，但无论如何，当你们中的任何人遇到这种行为时：

*   确保其他活动没有相同的布局，因此，当它是另一个活动时，您会认为同一个活动正在打开。只需仔细检查活动的布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-11T07:38:50.853

您可以检查并查看新活动是否放在清单中，如下所示

```
 <activity
        android:name="com.hossa.multitask.activity2"
        android:label="@string/app_name" >
        </activity> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-15T14:43:53.237

实现 View.OnClickListener 接口并覆盖 onClick 方法。

```
ImageView btnWatchVideo;

@Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_search1);
        ImageView btnSearch = (ImageView) findViewById(R.id.btnSearch);
        btnSearch.setOnClickListener(this);
    }
 @Override
    public void onClick(View v) {
        switch (v.getId()) {
            case R.id.btnSearch: {
                Intent intent = new 
             Intent(Search.this,SearchFeedActivity.class);
                startActivity(intent);
                break;
            }
} 
```

# sql - 使用 ExecuteSqlCommand 从文本文件创建存储过程

> ID：14692996
> 
> 赞同：0
> 
> 时间：2013-02-04T18:23:15.133
> 
> 标签：sql, sql-server, entity-framework, stored-procedures

我正在尝试执行 sql 文本文件以在 sql server db 上创建存储过程。我还使用此方法创建存储过程将使用的用户定义表类型。

表类型的创建工作完美。但是，当我创建存储过程时出现错误，“CREATE/ALTER PROCEDURE”必须是查询批处理中的第一条语句。

这是读取文件并针对数据库执行它的代码：

```
public static void LoadStoredProcedures()
    {
        const string procedureLocation = "C:\\StoredProcedures.txt";

        var reader = File.ReadAllText(procedureLocation);

        var context = new prismEntities();
        context.Database.ExecuteSqlCommand(reader);

    }

    public static void CreateTables()
    {
        const string tableLocation = "C:\\CreateTables.txt";

        var reader = File.ReadAllText(tableLocation);

        var context = new prismEntities();
        context.Database.ExecuteSqlCommand(reader);
    } 
```

用户定义表的示例：

```
if not exists (select * from sys.table_types
where name like 'TextbookTable')
create type [dbo].[TextbookTable] as table (
[TXUID] [int] NOT NULL,
[SKU] [int] NOT NULL,
[UsedSKU] [int] NOT NULL,
[BindingID] [int] NOT NULL,
[TextStatusID] [int] NOT NULL,
[StatusDate] [datetime] NULL,
[Author] [char](45) NOT NULL,
[Title] [char](80) NOT NULL,
[ISBN] [char](30) NULL,
[Imprint] [char](10) NULL,
[Edition] [char](2) NULL,
[Copyright] [char](2) NULL,
[Type] [char](10) NULL,
[Bookkey] [varchar](10) NULL,
[Weight] [decimal](10, 4) NULL,
[ImageURL] [char](128) NULL,
primary key clustered
(
    [TXUID] ASC
) with (ignore_dup_key = on)
) 
```

我正在尝试创建的存储过程的示例：

```
if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[AddTextbook]') and OBJECTPROPERTY(id, N'IsProcedure') = 1)
drop procedure [dbo].[AddTextbook]

create procedure [dbo].[AddTextbook]
(
@textbook TextbookTable readonly
)
as
begin
set nocount on;
set identity_insert textbook on

begin try

merge Textbook txt
using (select * from @textbook) as source
    on txt.TXUID = source.TXUID
when not matched then
    insert (TXUID, SKU, UsedSKU, BindingID, TextStatusID, StatusDate, Author,
            Title, ISBN, Imprint, Edition, Copyright, Type, Bookkey, Weight, ImageURL)
    values ( source.TXUID, source.SKU, source.UsedSKU, source.BindingID, source.TextStatusID,
             source.StatusDate, source.Author, source.Title, source.ISBN,
             source.Imprint, source.Edition,
             source.Copyright, source.Type, source.Bookkey, source.Weight, source.ImageURL);

set identity_insert textbook off    
end try

begin catch
    declare @message varchar(128) = error_message()
    select
     ERROR_NUMBER() as ErrorNumber,
     ERROR_SEVERITY() as ErrorSeverity,
     ERROR_STATE() as ErrorState,
     ERROR_PROCEDURE() as ErrorProcedure,
     ERROR_LINE() as ErrorLine,
     ERROR_MESSAGE() as ErrorMessage;
     raiserror(@message, 16, 10)
end catch
end

grant execute on [dbo].[AddTextbook] to [public] 
```

现在，调用的顺序是首先调用 CreateTables，然后调用 LoadStoredProcedures。表的创建没有问题。未创建存储过程并生成上述错误。我已经删除了“如果存在...”行，存储过程将被创建，但是，如果我试图在同一个文件中创建其他存储过程，它们将出错并且不会被创建。我希望能够用一个文件来管理它，而不是每个存储过程的多个文件。

有谁知道解决这个问题？希望我提供了充足的信息。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T18:26:53.140

基本上，您在命令之间缺少一堆`GO`语句，例如：

你必须改变

```
if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[AddTextbook]') and OBJECTPROPERTY(id, N'IsProcedure') = 1)
drop procedure [dbo].[AddTextbook]

create procedure [dbo].[AddTextbook] 
```

成为

```
if exists (select * from dbo.sysobjects where id = object_id(N'[dbo].[AddTextbook]') and OBJECTPROPERTY(id, N'IsProcedure') = 1)
drop procedure [dbo].[AddTextbook]
GO
create procedure [dbo].[AddTextbook] 
```

# url - 通过 URL 的 SSRS 渲染报告

> ID：14692997
> 
> 赞同：0
> 
> 时间：2013-02-04T18:23:17.383
> 
> 标签：url, ssrs-2008, reporting-services

我有一个通过 URL 传递参数的报告，但希望在用户必须单击“查看报告”按钮之前默认加载报告。我在 URL 中有 rs:Command=Render 但这似乎没有这样做。我在这里缺少另一个标签吗？目前网址如下：

```
https://server/subfolder/viewreport.aspx?Report%Name&rs:Command=Render&Parameter1=Value1&Parameter2=Value2 
```

该报告提供了默认选择的适当值，如上所示，但在我点击查看报告之前它不会运行。我是否需要通过 URL 指定报告中的所有其他参数才能使其默认运行，即使这些参数已经具有默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T19:35:37.383

找到它，只要所有参数都指定了“默认”值，报告就会自动呈现。报告中的两个文本参数需要将其默认表达式设置为 =“”

# django-south - django-south 安装

> ID：14692999
> 
> 赞同：0
> 
> 时间：2013-02-04T18:23:31.140
> 
> 标签：django-south

嗨，我正在尝试安装 south 并将其设置为与我当前的 django 应用程序一起使用，但是当我安装它并运行 syncdb 时，我遇到了以下错误，我该怎么办？

```
File "/usr/local/lib/python2.7/dist-packages/django/utils/functional.py", line 185, in inner  return func(self._wrapped, *args) AttributeError: 'Settings' object has no attribute 'DATABASE_ENGINE' 
```

我确实有一个正在运行的数据库，并且正在使用 django 1.4，而南方正在安装的是最近安装的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T04:03:31.970

猜测一下，您还没有在 settings.py 中配置 DATABASE_ENGINE （也许它被注释掉了）。