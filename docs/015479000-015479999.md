# StackOverflow 问答 15479000-15479999

# sql - 将一列中的值拆分为 2 列

> ID：15479001
> 
> 赞同：2
> 
> 时间：2013-03-18T14:17:15.820
> 
> 标签：sql, sql-server, database, sql-server-2008, pivot

我需要在 sql 中执行以下操作。

表格1：

```
Year  Client Investment

1999   X     100

1999   Y     200

2000   X     1000

2000   Y     2000 
```

我想为我的报告以以下格式显示它：

```
Client 1999Year   2000Year 

X      100         1000 
```

知道如何执行上述操作吗？我正在使用 sql server 2008

请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T14:20:01.223

这种类型的数据转换称为 a `PIVOT`。一些数据库产品具有将数据从行转换为列的功能。

`CASE`您可以在任何数据库中使用带有表达式的聚合函数：

```
select client,
  sum(case when year = 1999 then investment end) Year_1999,
  sum(case when year = 2000 then investment end) Year_2000
from yourtable
group by client 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/ed9ee/1)

由于您使用的是 SQL Server 2008，因此可以使用该`PIVOT`函数将数据转换为列：

```
select *
from
(
  select client, 
    'Year_'+cast(year as varchar(4)) year, 
    investment
  from yourtable
) src
pivot
(
  sum(investment)
  for year in (Year_1999, Year_2000)
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/ed9ee/3)。

如果你有一个已知数量的值，其他查询会很好用`year`，但如果你有一个未知的数量，那么你会想要使用动态 SQL：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT distinct ',' + QUOTENAME('Year_'+cast(year as varchar(4))) 
                    from yourtable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT client,' + @cols + ' from 
             (
                select client, 
                  ''Year_''+cast(year as varchar(4)) year, 
                  investment
                from yourtable
            ) x
            pivot 
            (
                sum(investment)
                for year in (' + @cols + ')
            ) p '

execute(@query) 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/ed9ee/5)。

这也可以通过多次加入表来完成：

```
select t1.client,
  t1.investment Year_1999,
  t2.investment Year_2000
from yourtable t1
left join yourtable t2
  on t1.client = t2.client
  and t2.year = 2000
where t1.year = 1999 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/ed9ee/7)

所有查询都会给出结果：

```
| CLIENT | YEAR_1999 | YEAR_2000 |
----------------------------------
|      X |       100 |      1000 |
|      Y |       200 |      2000 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T14:19:26.320

对此有许多可能的解决方案。一种是使用`MAX()`and `CASE`,

```
SELECT  Client,
        MAX(CASE WHEN YEAR = 1999 THEN Investment END) [1999Year],
        MAX(CASE WHEN YEAR = 2000 THEN Investment END) [2000Year]
FROM    TableName
WHERE   Client = 'X'
GROUP   BY Client 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/62c2f/1)

或使用`PIVOT`功能

```
SELECT Client,
       [1999] AS [1999YEAR],
       [2000] AS [2000YEAR] 
FROM
(
    SELECT  YEAR, CLient, Investment
    FROM    TableName
    WHERE   Client = 'X'
) pvt
PIVOT
(
    MAX(InvestMent)
    FOR YEAR IN ([1999],[2000])
) s 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/62c2f/10)

# javascript - javascript下划线 - 调用

> ID：15479002
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:17:18.690
> 
> 标签：javascript, underscore.js

使用 underscore.js 如何提醒数组中的每个项目？这甚至可能吗？我尝试使用调用函数，但它不起作用。你能帮忙吗？

```
_.invoke([1,3,7],alert(this)); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T14:18:46.973

[调用](http://underscorejs.org/#invoke)不是此任务的正确方法。尝试[每个](http://underscorejs.org/#each)：

```
_.each([1,3,7], alert); 
```

或者您可以`alert`显式调用：

```
_.each([1,3,7], function(el) {
    alert(el);
}); 
```

# c# - TranslationByMarkupExtension：在启动时使用自定义值填充 MainApplication.xaml

> ID：15479008
> 
> 赞同：1
> 
> 时间：2013-03-18T14:17:33.680
> 
> 标签：c#, wpf, xaml, internationalization

我关注了这篇文章：[使用自定义 MarkupExtension](http://wpftutorial.net/LocalizeMarkupExtension.html "使用自定义 MarkupExtension 本地化 WPF 应用程序")对我的应用进行国际化的 WPF 应用程序的本地化。

在我的 MainWindow.xaml 我有：

```
<Button x:Name="ServiceButton" Content="{l:Translate service.button.start}" Click="toggle_service_click" /> 
```

如您所见，翻译标记**{l:Translate service.button.start}**是为了在加载应用程序时在我当前的语言环境资源文件中检索字符串*service.button.start*，但如果服务已经启动，则标记字符串应该成为*service.button.stop*

所以，在实践中，当我运行我的应用程序时，如果服务启动：

```
<Button x:Name="ServiceButton" Content="{l:Translate service.button.stop}" Click="toggle_service_click" /> 
```

除此以外

```
<Button x:Name="ServiceButton" Content="{l:Translate service.button.start}" Click="toggle_service_click" /> 
```

在translationManager解析它之前，我如何直接在xaml文件中设置正确的标记“即时”？

**编辑：** 我试图将它绑定到我的 DataContext 中，如下所示： *dataContext*

```
public object ServiceTplString
{
    get
    {
        var isr = ServiceHandler.Instance.serviceIsRunning("service_alias", "service_name");
        return "{l:Translate service.button." + ( (isr) ? "stop" : "start" ) + "}";
    }
} 
```

*MainApplication.xaml：*

```
<Button x:Name="ServiceButton" Content="{Binding ServiceTplString}" Click="toggle_service_click" /> 
```

但不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T17:00:53.990

你想多了。像您所做的那样绑定到一个对象，`ServiceTplString`然后只需更改 的值`ServiceTplString`：

```
ServiceTplString = Resources.StartLabel 
```

或者

```
ServiceTplString = Resources.StopLabel 
```

取决于你需要什么。

我假设您在资源文件中有国际化文本；你可能有它在别处。

这是您要使用的属性：

```
private string serviceTplString;

public string ServiceTplString
{
    get
    {
        return serviceTplString;
    }
    set
    {
        serviceTplString = value;
        OnPropertyChanged("ServiceTplString");
    }
} 
```

这样，当您更新其值时，该值将传播到绑定控件。

# machine-learning - 在 RapidMiner 中使用测试数据集

> ID：15479011
> 
> 赞同：1
> 
> 时间：2013-03-18T14:17:42.433
> 
> 标签：machine-learning, classification, rapidminer

我正在尝试使用训练数据集创建模型，并希望在测试数据集中标记记录。

我在网上找到的所有教程或帮助都包含有关仅对一个数据集（即训练数据集）使用交叉验证的信息。我找不到如何使用测试数据。我试图将结果模型应用于测试集。但是测试集似乎给出了不同的答案。属性比预处理后的训练集。这是一个文本分类问题。

最后我得到一些这样的输出

```
18.03.2013 01:47:00 Results of ResultWriter 'Write as Text (2)' [1]: 
18.03.2013 01:47:00 SimpleExampleSet:
5275 examples,
366 regular attributes,
special attributes = {
confidence_1 = #367: confidence(1) (real/single_value)
confidence_5 = #368: confidence(5) (real/single_value)
confidence_2 = #369: confidence(2) (real/single_value)
confidence_4 = #370: confidence(4) (real/single_value)
prediction = #366: prediction(label) (nominal/single_value)/values=[1, 5, 2, 4]
} 
```

但我想要的是我所有的例子都被贴上标签。

看来我的测试数据和训练数据有不同的编号。属性，我在日志中看到了许多以下内容。

2013 年 3 月 18 日上午 1:46:41 警告：内核模型：给定的示例集不包含名称为“无线”的常规属性。这可能会导致某些模型出现问题，具体取决于此特定属性。

但是我们如何解决文本分类中的这种我们不知道不知道的问题。of 和属性名称。

有人可以请指点一下。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T13:50:10.197

您可能使用 Process Documents 运算符来预处理训练集和测试集。这里重要的是这两个运算符的设置相同。要“同步”单词表，即考虑两个单词中的相同单词集，您必须将用于训练的 Process Documents 运算符的单词表（wor）输出连接到用于预处理的 Process Documents 运算符的相应输入端口测试集。

# windows-8 - Win8上标准安装VSExpress2012，IDE无法启动

> ID：15479013
> 
> 赞同：0
> 
> 时间：2013-03-18T14:17:51.340
> 
> 标签：windows-8, visual-studio-2012

我有一台 Windows 8 x64 机器，非常新的图像，我刚刚安装了 VS2012 C# express，安装完成得很好。但是当我启动 IDE 时，什么也没有发生，我也没有在任务管理器中看到一个新进程。

谷歌搜索了一下，人们建议它可能是扩展并运行“devenv.exe /safemode”。我没有安装任何扩展，并且我的系统中不存在“devenv.exe”。我只能找到 %SystemDrive%\Program Files (x86)\Microsoft Visual Studio 11.0\Common7\IDE\WDExpress.exe。这也是在我的桌面上创建的快捷方式指向的地方。我曾尝试在该 .exe 中使用“/safemode”开关，但没有任何反应。

我目前正在对程序进行修复，也许这会修复它。

任何建议，将不胜感激。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:23:54.823

我发现了问题，Microsoft Application Compatibility Toolkit 5.6 锁定了一些文件。取出后。VS2012 直接打开。

# ajax - 如何防止 Varnish 缓存 ajax？

> ID：15479023
> 
> 赞同：1
> 
> 时间：2013-03-18T14:18:23.797
> 
> 标签：ajax, caching, varnish

这样的问题，我需要通过ajax接收一些有用的数据，但是varnish一直缓存它。所以我需要一些解决方案来停止清漆缓存ajax。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-21T15:19:44.093

只要后端服务器要求，Varnish 只会缓存内容。如果后端服务器没有发送类似的东西，默认是缓存 120 秒。

这样做的正确方法是修改后端应用程序以发送`Cache-Control: max-age=0`响应标头。

还应该注意的是，即使缓存一秒钟（max-age=1），在具有大量并发用户的站点上也会产生良好的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T12:33:06.630

如果您可以根据 URL 识别您的 AJAX 请求，则可以使用以下 VCL 轻松地将所有请求通过管道传输到后端：

```
sub vcl_recv {
  if (req.url ~ "(ajax\.php|dynamic\.php)") {
    return(pipe);
  }
} 
```

这将通过管道传输 URL 包含`ajax.php`或的所有请求`dynamic.php`。

# python - 使用辅助表时 SQLAlchemy ON DELETE SET NULL

> ID：15479024
> 
> 赞同：3
> 
> 时间：2013-03-18T14:18:24.900
> 
> 标签：python, foreign-keys, sqlalchemy, relationship

我遇到了一个基本用例——我有两个表，Nodes 和 Networks，它们使用第三个表 IPAddr 作为辅助关联表互连：

```
class Node(Base, BasicValidator):
    __tablename__ = 'nodes'
    id = Column(Integer, primary_key=True)

class IPAddr(Base):
    __tablename__ = 'ip_addrs'
    id = Column(Integer, primary_key=True)
    network = Column(Integer, ForeignKey('networks.id'))
    node = Column(Integer, ForeignKey('nodes.id'))
    ip_addr = Column(String(25), nullable=False)

class Network(Base, BasicValidator):
    __tablename__ = 'networks'
    id = Column(Integer, primary_key=True)
    nodes = relationship(
        "Node",
        secondary=IPAddr.__table__,
        backref="networks") 
```

现在，当我从数据库中删除网络对象时，我收到以下错误：

> 详细信息：密钥 (id)=(9) 仍从表“ip_addrs”中引用。'从网络中删除 WHERE networks.id = %(id)s' ({'id': 6}, {'id': 7}, {'id': 8}, {'id': 9}, {' id': 10})

我需要做的就是*在删除 Network 和 IPAddr 的同时保留节点*。

我尝试这样做： http: [//docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#association-object](http://docs.sqlalchemy.org/en/rel_0_7/orm/relationships.html#association-object)但它没有帮助，即使使用[AssociacionProxy](http://docs.sqlalchemy.org/en/rel_0_7/orm/extensions/associationproxy.html)，因为这一次一切正常，但 Network.nodes 返回**[无]**如果我做这样的事情然后删除节点：

```
class Node(Base, BasicValidator):
    __tablename__ = 'nodes'
    id = Column(Integer, primary_key=True)

class IPAddr(Base):
    __tablename__ = 'ip_addrs'
    id = Column(Integer, primary_key=True)
    network = Column(Integer, ForeignKey('networks.id'))
    node = Column(Integer, ForeignKey('nodes.id'))
    nodes = relationship("Node", backref="networks_assocs")
    ip_addr = Column(String(25), nullable=False)

class Network(Base, BasicValidator):
    __tablename__ = 'networks'
    id = Column(Integer, primary_key=True)
    nd = relationship("IPAddr", backref="networks")
    nodes = association_proxy('nd', 'nodes') 
```

有人可以帮忙吗，正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:49:43.780

如果您的数据库支持，您需要使用类似 ON DELETE CASCADE 的东西。

在这里查看更多信息： http: [//docs.sqlalchemy.org/en/latest/orm/session.html#unitofwork-cascades](http://docs.sqlalchemy.org/en/latest/orm/session.html#unitofwork-cascades)

# c++ - 编译库

> ID：15479025
> 
> 赞同：0
> 
> 时间：2013-03-18T14:18:26.850
> 
> 标签：c++, visual-studio-2010, boost, cmake, liblas

我正在尝试安装库 libLAS。我正在使用 Microsoft Visual Studio 2010 、 windows 7 和 Cmake 2.8.10.2 。到目前为止，我已经安装了 Boost 1.51，并遵循了本教程： [http ://www.liblas.org/compilation.html#using-visual-studio-9-2008-on-windows](http://www.liblas.org/compilation.html#using-visual-studio-9-2008-on-windows)

在 cmake 遇到很多问题后，我创建了 .sln，我现在正在尝试编译它。特别是，我正在尝试构建项目“liblas”。我收到 37 个错误，都像这样：

```
Error   1   error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)  C:\temp\libLAS\buildout\src\writer.cpp.obj 
```

编辑添加其他错误：

```
2>     Creating library C:/temp/libLAS/buildout/bin/Release/liblas.lib and object C:/temp/libLAS/buildout/bin/Release/liblas.exp
2>writer.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>header.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>reader.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>header.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>point.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>point.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>reader.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>utility.cpp.obj : error LNK2019: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ) referenced in function "public: __cdecl std::basic_ostringstream<char,struct std::char_traits<char>,class std::allocator<char> >::basic_ostringstream<char,struct std::char_traits<char>,class std::allocator<char> >(int)" (??0?$basic_ostringstream@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@QEAA@H@Z)
2>writer.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>index.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>transform.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>cachedreader.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>header.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>indexoutput.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>chipper.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>factory.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>filter.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::generic_category(void)" (?generic_category@system@boost@@YAAEBVerror_category@12@XZ)
2>writer.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>libboost_thread-vc100-mt-1_51.lib(thread.obj) : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>header.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>reader.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>header.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>point.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>point.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>reader.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>utility.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>writer.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>index.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>transform.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>cachedreader.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>header.cpp.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>indexoutput.obj : error LNK2019: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ) referenced in function "void __cdecl boost::system::`dynamic initializer for 'native_ecat''(void)" (??__Enative_ecat@system@boost@@YAXXZ)
2>chipper.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>factory.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>filter.obj : error LNK2001: unresolved external symbol "class boost::system::error_category const & __cdecl boost::system::system_category(void)" (?system_category@system@boost@@YAAEBVerror_category@12@XZ)
2>libboost_thread-vc100-mt-1_51.lib(thread.obj) : error LNK2019: unresolved external symbol "public: static class boost::chrono::time_point<class boost::chrono::system_clock,class boost::chrono::duration<__int64,class boost::ratio<1,10000000> > > __cdecl boost::chrono::system_clock::now(void)" (?now@system_clock@chrono@boost@@SA?AV?$time_point@Vsystem_clock@chrono@boost@@V?$duration@_JV?$ratio@$00$0JIJGIA@@boost@@@23@@23@XZ) referenced in function "public: bool __cdecl boost::thread::try_join_until(class boost::chrono::time_point<class boost::chrono::system_clock,class boost::chrono::duration<__int64,class boost::ratio<1,1000000000> > > const &)" (?try_join_until@thread@boost@@QEAA_NAEBV?$time_point@Vsystem_clock@chrono@boost@@V?$duration@_JV?$ratio@$00$0DLJKMKAA@@boost@@@23@@chrono@2@@Z)
2>C:\temp\libLAS\buildout\bin\Release\liblas.dll : fatal error LNK1120: 3 unresolved externals
2>
2>Build FAILED. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-14T02:30:39.687

BlueGo 可以为您构建 libLAS： [https ://bitbucket.org/Vertexwahn/bluego](https://bitbucket.org/Vertexwahn/bluego)

您可以通过以下方式使用 VS2017 在 Windows 上构建它：

```
set dest=C:\thirdparty\vs2017\x64
set cmake_command=cmake
set boost_root=C:/thirdparty/vs2017/x64/boost_1_65_0
if NOT [%1]==[] set dest=%~1
if NOT [%2]==[] set cmake_command="%~2"
if NOT [%3]==[] set boost_root=%~3
if [%1]==["--boost-root"] set boost_root=%~2
wget.exe --no-check-certificate https://github.com/libLAS/libLAS-1.6/archive/master.zip -O%cd%\master.zip
7za.exe x %cd%\master.zip -o%dest%
call "C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\VC\Auxiliary\Build\vcvarsall.bat" amd64
%cmake_command% -DBUILD_STATIC_LIBS=ON -DBOOST_ROOT=%boost_root% -G"Visual Studio 15 2017 Win64" -H%dest%\libLAS-1.6-master -B%dest%\libLAS-1.6-master\build
del %cd%\master.zip
C:
cd %dest%\libLAS-1.6-master\build
%cmake_command% --build . --config Debug --target liblas
%cmake_command% --build . --config Release --target liblas
%cmake_command% --build . --config RelWithDebInfo --target liblas
%cmake_command% --build . --config Debug --target liblas_c
%cmake_command% --build . --config Release --target liblas_c
%cmake_command% --build . --config RelWithDebInfo --target liblas_c 
```

# magento - 在magento注册中获取所有美国状态下拉列表

> ID：15479028
> 
> 赞同：0
> 
> 时间：2013-03-18T14:18:35.617
> 
> 标签：magento, registration, state, country

我希望你们一切都好

我在 magento 1.6.0.1 中工作。我当前的站点仅适用于美国，因此在注册页面中不需要国家下拉列表，并且必须在州下拉列表中显示所有美国州。

现在我在隐藏字段中设置国家值“美国”。

那么我怎样才能在州下拉列表中获得所有美国州

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T07:50:30.277

在 register.phtml 中添加它以显示美国的所有州：

```
 <div class="field">
                    <label for="region_id" class="required"><em>*</em><?php echo $this->__('State/Province') ?></label>
                    <div class="input-box">
                        <select id="region_id" name="region_id" title="<?php echo $this->__('State/Province') ?>" class="validate-select">
                            <option value=""><?php echo $this->__('Please select region, state or province') ?></option>
                    <?php
                    $this->setData('country_id','US'); // or 'FR'..., default is 'US'
                    $regions     =   $this->getRegionCollection();
                    foreach($regions as $region)
                    {
                        echo "<option value=$region[name]>".$region['name'] . "</option>";
                    }
                    ?>

                        </select>
                        <script type="text/javascript">
                        //<![CDATA[
                            $('region_id').setAttribute('defaultValue', "<?php echo $this->getFormData()->getRegionId() ?>");
                        //]]>
                        </script>

                        <input type="text" id="region" name="region" value="<?php echo $this->escapeHtml($this->getRegion()) ?>" title="<?php echo $this->__('State/Province') ?>" class="input-text <?php echo $this->helper('customer/address')->getAttributeValidationClass('region') ?>" style="display:none;"   />
                    </div>
                </div>
            </li>
            <li class="fields">
                  <div class="field">
                    <label for="country" class="required"><em>*</em><?php echo $this->__('Country') ?></label>
                    <div class="input-box">
                        <?php echo $this->getCountryHtmlSelect() ?>
                    </div>
                </div> 
```

并将底部javascript替换为：

```
 <script type="text/javascript">
        var dataForm = new VarienForm('form-validate', true);
        new RegionUpdater('country', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>);
    </script> 
```

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-24T11:42:20.440

来自[Magento 的国家和地区](http://blog.decryptweb.com/country-and-states-magento/)：

```
 <script type="text/javascript">
        var dataForm = new VarienForm('form-validate', true);
        new RegionUpdater('country', 'region', 'region_id', <?php echo $this->helper('directory')->getRegionJson() ?>);
    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-26T06:21:51.900

这对我有用。

```
 <div class="field">
                        <label for="region_id" class="required"><em>*</em><?php echo $this->__('State/Province') ?></label>
                        <div class="input-box">
                            <select id="region_id" name="region_id" title="<?php echo $this->__('State/Province') ?>" class="validate-select">
                                <option value=""><?php echo $this->__('Please select region, state or province') ?></option>
                            <?php                        
                            $regions = Mage::getModel('directory/country')->load('US')->getRegions();
                            foreach($regions as $region)
                            {
                                echo "<option value=$region[name]>".$region['name'] . "</option>";
                            }
                            ?>

                        </select>                       

                        </div>
</div> 
```

# ios - UITableView - 在每个单元格内水平滑动内容

> ID：15479031
> 
> 赞同：2
> 
> 时间：2013-03-18T14:18:52.957
> 
> 标签：ios, uitableview

**这是我的第一个原生 iOS 应用程序...**

就像 iOS 上的 iTunes 应用程序一样，通过有一个可以垂直滚动的表格视图，然后每一行，您可以独立水平滚动。至少这是我想象的工作。

我将如何实现这一点？我想象每个 tableCell 内的视图可以水平滚动？

任何人都可以阐明这一点以及我可能会阅读或尝试做什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:42:51.083

您可以将滚动视图添加到单元格内容视图中，然后将滚动视图的内容大小属性添加到您想要的任何长度。这里我将滚动视图的宽度设置为 1000，高度设置为 44（这是 UITableViewCell 的默认大小）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    UIScrollView *vwScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, 320, 44)];
    vwScroll.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];
    vwScroll.contentSize = CGSizeMake(1000, 44);

    [cell.contentView addSubview:vwScroll];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:27:29.270

我能想到的唯一选择是`UIScrollView`在`UITableViewCell's`视图中放置一个。

但请注意，这可能会导致 UITableView 本身的垂直滚动行为出现问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-12T15:47:11.803

为了实现类似于 iOS 上的**App Store**应用程序的独立滚动行，一种方法是将**Collection View**嵌套在**Table View Cell**中。

我编写了一个[Swift 教程](http://www.thorntech.com/2015/08/want-your-swift-app-to-scroll-in-two-directions-like-netflix-heres-how/)，其中包含有关设置的分步说明，包括如何将**Collection View** **dataSource 连接**到**Table View Cell**。

该教程包括[GitHub 上的一个工作示例项目](https://github.com/ThornTechPublic/HorizontalScrollingCollectionView)和一个[Objective-C 教程](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)的链接。

[![在此处输入图像描述](../Images/3cbe9c4d49fe68400f1bf70ccde805d8.png)](https://i.stack.imgur.com/WBlIO.gif)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T03:26:20.730

我相信免费的 Sensible TableView 框架开箱即用地提供了这些单元格。应该给你一个良好的开端，因为你还在开始。希望这可以帮助。

# php - 如何在`collection`字段Symfony 2.1中将选项传递给CustomType？

> ID：15479032
> 
> 赞同：25
> 
> 时间：2013-03-18T14:18:55.747
> 
> 标签：php, forms, symfony, doctrine-orm

我有`SuperType`实体表格`Super`。

在这个表单中，我有一个实体`collection`的表单类型字段`ChildType``Child`

**`class SuperType:`**

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('childrens', 'collection', array(
            'type' => new ChildType(null, array('my_custom_option' => true)),  
} 
```

**`class ChildType:`**

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    if ($options['my_custom_option']) {
        $builder->add('my_custom_field', 'textarea'));
    }
}

public function setDefaultOptions(OptionsResolverInterface $resolver)
{
  $resolver->setDefaults(array(
      ...
      'my_custom_option' => false
  ));
} 
```

如何`my_custom_option`仅更改此`SuperType`表单的值？

当然，我尝试通过构造函数传递此选项的方法不起作用。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2013-03-18T14:27:13.457

您可以将一[组选项](http://symfony.com/doc/current/reference/forms/types/collection.html#entry-options)传递给您的 childType，如下所示：

```
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('childrens', 'collection', array(
            'entry_type' => new ChildType(),  
            'entry_options'  => array(
                'my_custom_option' => true,
            ),
    // ...

} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-10-19T10:04:11.717

在 Symfony 3 中，这称为[entry_options](http://symfony.com/doc/current/reference/forms/types/collection.html#entry-options)。

```
$builder->add('childrens', CollectionType::class, array(
    'entry_type'   => ChildType::class,
    'entry_options'  => array(
        'my_custom_option'  => true
    ),
)); 
```

# sql-server - 安装 VS2012 后的 SQL Server Express 名称是什么？

> ID：15479041
> 
> 赞同：2
> 
> 时间：2013-03-18T14:19:16.290
> 
> 标签：sql-server, visual-studio-2012

我刚刚在我的机器上安装了 VS2012。

我正在尝试创建一个数据库，但为了创建一个 sql 连接，我需要服务器名称，它在 VS2010 中曾经是 .\sqlexpress，但显然它已更改，但我不知道新名称。

谁能告诉我这个名字是什么？

[![图片](../Images/b635582b34d75e2fc2fceb119f8e3af2.png)](https://i.stack.imgur.com/yaJV8.jpg)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T12:31:16.763

实例名称为：“(LocalDb)\v11.0”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:25:15.870

我认为默认实例被称为`.\SqlExpress`

但是，如果您不确定 SQL Server 实例的名称，您可以随时打开 SQL Server 配置管理器，它应该会在其中列出该本地实例。

# java - 使用 Hazelcast 而不是 MongoDB 存储用户会话/密钥有什么好处？

> ID：15479042
> 
> 赞同：7
> 
> 时间：2013-03-18T14:19:17.190
> 
> 标签：java, spring, mongodb, caching, hazelcast

我们正在运行 mongodb 实例以将数据存储在集合中，这没有问题，mongo 是我们的主要数据存储。

今天，我们将为产品开发 Oauth2 支持，并且必须存储用户会话（安全密钥、访问令牌等），并且访问令牌必须在定义的超时后才针对身份验证服务器进行验证，这样就不会每个请求都将等待身份验证服务器的验证。对安全资源的首次请求（创建）应始终针对认证服务器进行认证。任何后续请求都将在内部进行验证（缓存）并检查内部超时，只有在过期时，才会向身份验证服务器发出另一个请求。

为了解决这个要求，我们必须引入某种分布式缓存，以存储（支持 TTL）用户会话等，基于 ttl 使其过期......我在上面写过。

**这里有两个选项：**

1.  将用户会话存储在 hazelcast 中并在所有应用服务器之间共享 - 不错的选择，将所有用户会话保留在驱逐地图中。
2.  在 MongoDb 中存储用户会话 - 并执行相同操作。

您是否看到使用 Hazelcast 而不是将临时数据存储在**Mongo**中的任何好处？您知道任何显着的性能改进吗？

我是**Hazelcast**的新手，所以不了解所有杀手级功能。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-20T02:12:09.130

免责声明：我是 Hazelcast 的创始人......

1.  Hazelcast 更简单，简单性也很重要。
2.  您可以将 Hazelcast 嵌入到您的应用程序中（如果您的应用程序是用 Java 编写的）。无需部署和维护远程nosql集群。
3.  Hazelcast 直接与您的应用程序对象一起工作。没有 JSON 或任何其他格式。写入和读取 java 对象。
4.  您可以对内存中的数据执行 Java 代码。无需获取和处理数据；将您的代码发送到数据。
5.  您可以收听数据的更新。“当此地图或密钥更新时通知我”。
6.  Hazelcast 具有丰富的数据结构集，如队列、主题、信号量、锁、多映射等。想象一下跨多个节点共享一个队列并能够进行阻塞队列轮询/获取操作......这真的很酷:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-19T20:36:00.237

Hazelcast is an in-memory grid so it should be significantly faster than MongoDB for that kind of usage. They also have pre-made session clustering code for Java servlets if you do not want to create that yourself.

Code for the session clustering [here on github](https://github.com/hazelcast/hazelcast-wm/tree/master/src/main/java/com/hazelcast/web). Or here for [Maven artifact](http://search.maven.org/#artifactdetails%7Ccom.hazelcast%7Chazelcast-wm%7C2.5%7Cjar).

# perl - 根据值的相似性分离和输出数值。

> ID：15479047
> 
> 赞同：0
> 
> 时间：2013-03-18T14:19:26.307
> 
> 标签：perl

我认为 perl 可以做到这一点，但我对 perl 很陌生。
希望有人可以帮助我。我有这样的文件（实际文件超过一万行，值按升序排列，有些值重复）。

* * *

1

2

2

35

45

* * *

我想根据值的相似性将这些行分成单独的文件（例如，值的差异小于 30）。

输出文件1

* * *

1

2

2

* * *

输出文件2

* * *

35

45

* * *

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:40:44.320

这非常简单，只需在每次需要时打开一个新文件，即第一行数据，然后每次有 30 或更多的间隙。

该程序需要输入文件的名称作为命令行上的参数。

```
use strict;
use warnings;
use autodie;

my ($last, $fileno, $fh);

while (<>) {
  my ($this) = /(\d+)/;
  unless (defined $last and $this < $last + 30) {
    open $fh, '>', 'outfile'.++$fileno;
  }
  print $fh $_;
  $last = $this;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:28:22.113

这应该很容易。只要记住变量中的前一个值，您就可以看到差异是否足够大。您还必须计算到目前为止创建的输出文件，以便在需要时命名新文件。

```
#!/usr/bin/perl
use warnings;
use strict;

my $threshold = 30;

my $previous;
my $count_out = 0;
my $OUTPUT;
while (<>) {
    if (not defined $previous or $_ > $previous + $threshold) {
        open $OUTPUT, '>', "outfile" . $count_out++ or die $!;
    }
    print $OUTPUT $_;
    $previous = $_;
} 
```

# jquery-mobile - 通过 JS 添加 Font Awesome 图标

> ID：15479062
> 
> 赞同：2
> 
> 时间：2013-03-18T14:20:04.503
> 
> 标签：jquery-mobile, font-awesome

我正在使用 Font Awesome 图标构建 JQM 应用程序，如果我添加到 HTML 中，一切都很好`<i class=icon-XXX></i>`。如果我通过javascript创建它，就会出现问题。它永远不会出现！

这个图标是一个`<ul /><li />`，我试过触发“刷新”，“创建”，......但没有任何反应。

有没有办法解决这个问题？提前致谢。

问候，

PS。我也在使用引导程序，我首先加载引导程序，然后加载 FA，如 FA 网页中所述...

**更新**（简单的代码...）

**JS**

```
var elemHtml = "" +
"<div data-type=\"tlf\" id=\"XXX\">
    <ul data-role=\"listview\" data-inset=\"true\" data-theme=\""+selectedTheme+"\">
        <li data-icon=\"false\">
            <a href=\"tel:600123456\"><i class=\"icon-phone\"></i>600123456</a>
        </li>
    </ul>
</div>";

$("#screen").contents().find("#screenBody").append(elemHtml); 
```

**JSP**

```
<link rel="stylesheet" href="resources/css/bootstrap.min.css" />
<link rel="stylesheet" href="resources/css/font-awesome.min.css" />

<div id="screen">
    <div id="screenBody"></div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T13:36:26.483

我确实测试了下面的代码，它使用 Font-Awesome（没有 Bootstrap.js）正常工作。我还提供了`listview`一个 ID ( `#listviewtest`)。

```
$(document).on('pagebeforeshow', function(){
 var elemHtml = 
  "<div data-type='tlf'>"
  + "<ul data-role='listview' data-inset='true' data-theme='' id='listviewtest'>"
   + "<li data-icon='false'><a href='tel:600123456'>"
   + "<i class='icon-phone'></i>600123456</a>"
   + "</li>"
   + "<li data-icon='false'><a href='tel:600123456'>"
   + "<i class='icon-remove-sign'></i>600123456</a>"
   + "</li>"
  + "</ul>"
  + "</div>";
 $("div[data-role='content']").append(elemHtml); // append to data-role='content'
 $('#listviewtest').listview();
}); 
```

# web-services - Websphere 7：JAX-WS 消息编码错误

> ID：15479063
> 
> 赞同：0
> 
> 时间：2013-03-18T14:20:08.220
> 
> 标签：web-services, websphere, jax-ws

调用应该返回带有特殊字符（一种交叉）的字符串的 Web 服务时，出现以下错误：

```
Caused by: javax.xml.stream.XMLStreamException: An invalid XML character (Unicode: 0x10) was found in the element content of the document.
at com.ibm.xml.xlxp2.api.stax.msg.StAXMessageProvider.throwWrappedXMLStreamException(StAXMessageProvider.java:76)
at com.ibm.xml.xlxp2.api.stax.XMLStreamReaderImpl.produceFatalErrorEvent(XMLStreamReaderImpl.java:2013)
at com.ibm.xml.xlxp2.api.jaxb.JAXBXMLStreamReader.produceFatalErrorEvent(JAXBXMLStreamReader.java:316)
at com.ibm.xml.xlxp2.scan.DocumentScanner.reportFatalError(DocumentScanner.java:4821)
at com.ibm.xml.xlxp2.scan.DocumentScanner.reportFatalError(DocumentScanner.java:1205)
at com.ibm.xml.xlxp2.scan.DocumentScanner.scanContent2(DocumentScanner.java:1942)
at com.ibm.xml.xlxp2.scan.DocumentScanner.scanContent(DocumentScanner.java:1862)
at com.ibm.xml.xlxp2.runtime.VMContext.scanContent(VMContext.java:501)
at com.ibm.xml.xlxp2.scan.DocumentScanner.nextEvent(DocumentScanner.java:1276)
at com.ibm.xml.xlxp2.api.stax.XMLStreamReaderImpl.next(XMLStreamReaderImpl.java:586)
at com.ibm.xml.xlxp2.api.stax.XMLInputFactoryImpl$XMLStreamReaderProxyImpl.next(XMLInputFactoryImpl.java:183)
at com.ibm.xml.xlxp2.api.wssec.WSSXMLInputFactory$WSSStreamReaderProxy.next(WSSXMLInputFactory.java:55)
at org.apache.axiom.om.impl.builder.StAXBuilder.parserNext(StAXBuilder.java:567)
at org.apache.axiom.om.impl.builder.StAXOMBuilder.nextToken(StAXOMBuilder.java:634)
at org.apache.axiom.om.impl.builder.StAXOMBuilder.next(StAXOMBuilder.java:175)
at org.apache.axiom.om.impl.llom.OMElementImpl.getNextOMSibling(OMElementImpl.java:341)
at org.apache.axiom.om.impl.traverse.OMChildrenQNameIterator.next(OMChildrenQNameIterator.java:118)
at org.apache.axiom.om.impl.llom.OMElementImpl.getFirstChildWithName(OMElementImpl.java:279)
at org.apache.axiom.soap.impl.llom.soap11.SOAP11FaultImpl.getReason(SOAP11FaultImpl.java:128)
at org.apache.axis2.AxisFault.initializeValues(AxisFault.java:202)
at org.apache.axis2.AxisFault.<init>(AxisFault.java:196)
at org.apache.axis2.util.Utils.getInboundFaultFromMessageContext(Utils.java:521)
at org.apache.axis2.description.OutInAxisOperationClient.handleResponse(OutInAxisOperation.java:370)
at org.apache.axis2.description.OutInAxisOperationClient.send(OutInAxisOperation.java:416)
at org.apache.axis2.description.OutInAxisOperationClient.executeImpl(OutInAxisOperation.java:228)
at org.apache.axis2.client.OperationClient.execute(OperationClient.java:163)
at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.execute(AxisInvocationController.java:581)
at org.apache.axis2.jaxws.core.controller.impl.AxisInvocationController.doInvoke(AxisInvocationController.java:130)
... 113 more 
```

我该如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-09T17:39:37.373

显然，即使编码是有效的，XML 文档也不是。

我发现的唯一方法在本文中进行了描述：

[http://blog.mark-mclaren.info/2007/02/invalid-xml-characters-when-valid-utf8_5873.html](http://blog.mark-mclaren.info/2007/02/invalid-xml-characters-when-valid-utf8_5873.html)

```
public String stripNonValidXMLCharacters(String in) {
    StringBuffer out = new StringBuffer(); // Used to hold the output.
    char current; // Used to reference the current character.

    if (in == null || ("".equals(in))) return ""; // vacancy test.
    for (int i = 0; i < in.length(); i++) {
        current = in.charAt(i); // NOTE: No IndexOutOfBoundsException caught here; it should not happen.
        if ((current == 0x9) ||
            (current == 0xA) ||
            (current == 0xD) ||
            ((current >= 0x20) && (current <= 0xD7FF)) ||
            ((current >= 0xE000) && (current <= 0xFFFD)) ||
            ((current >= 0x10000) && (current <= 0x10FFFF)))
            out.append(current);
    }
    return out.toString();
} 
```

# jquery - jQuery 动态添加行和更改表单输入名称

> ID：15479064
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:20:08.163
> 
> 标签：jquery

我需要添加新行并将新添加行的表单输入名称更改为新的唯一名称，例如，当我单击添加脚本时，将添加具有输入名称的新行：

```
 <input type="text" name="11" id="11" />
 <input type="text" name="12" id="12" />
 <input type="text" name="13" id="13" /> 
```

现在我需要将新行输入名称更改为

```
 <input type="text" name="21" id="21" />
 <input type="text" name="22" id="22" />
 <input type="text" name="23" id="23" /> 
```

我需要在 addTableRow 函数的和添加一些代码才能做到这一点

```
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script> 
<script type="text/javascript">
function addTableRow(jQtable){
    jQtable.each(function(){
        var tds = '<tr>';
        jQuery.each($('tr:last td', this), function() {tds += '<td>'+$(this).html()+'</td>';});
        tds += '</tr>';
        if($('tbody', this).length > 0){$('tbody', this).append(tds);
        }else {$(this).append(tds);}
    });
}

$(function(){
    $('table').on('click','tr a',function(e){
       e.preventDefault();
      $(this).parents('tr').remove();
    });
});

</script>
<form id="form1" name="form1" method="post" action="">
<table width="100%" border="1" cellspacing="0" cellpadding="0" id="mans">
  <tr>
    <td>11
        <label for="11"></label>
        <input type="text" name="11" id="11" />
      </td>
    <td>12
        <label for="12"></label>
        <input type="text" name="12" id="12" />
      </td>
    <td>13
        <label for="13"></label>
        <input type="text" name="13" id="13" />
      </td>
    <td><a onclick="delTableRow($('#mans'));" href="#">del</a></td>
  </tr>
</table>
</form>
<button type="button" onclick="addTableRow($('#mans'));">add row</button> 
```

我的想法（不工作）：

```
var MaxLegnth=1;    
function addTableRow(jQtable){

    MaxLegnth++;
    //alert(MaxLegnth);
    jQtable.each(function(){
        var tds = '<tr>';
        jQuery.each($('tr:last td', this), function() {tds += '<td>'+$(this).html()+'</td>';});
        tds += '</tr>';
        if($('tbody', this).length > 0){$('tbody', this).append(tds);
        }else {$(this).append(tds);}
    });

    jQuery.each($('tr:last td input', this), function() {$(this).attr('name', 'new_name'); alert($(this).attr('name'));});
} 
```

这是一个 jsFiddle：http: [//jsfiddle.net/lolipop/yKjuw](http://jsfiddle.net/lolipop/yKjuw)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:40:55.870

您正在使用 jquery 并尝试使用默认的 html onclick 操作，在这里您将面临一个错误，即`ReferenceError: addTableRow is not defined`.

`addTableRow`由于未在 jquery 中定义函数，因此将引发此错误。

为了克服这个问题，通过在 jquery 定义中写入来使用 jquery 编写你的 onclick 函数。

## HTML：

```
<form id="form1" name="form1" method="post" action="">
    <table width="100%" border="1" cellspacing="0" cellpadding="0" id="mans">
        <tr>
            <td>11
                <label for="11"></label>
                <input type="text" name="11" id="11" />
            </td>
            <td>12
                <label for="12"></label>
                <input type="text" name="12" id="12" />
            </td>
            <td>13
                <label for="13"></label>
                <input type="text" name="13" id="13" />
            </td>
            <td><a href="#">del</a>

            </td>
        </tr>
    </table>
</form>
<button type="button" id="addTableRow">add row</button> 
```

## jQuery：

```
$(function () {
    $('table').on('click', 'tr a', function (e) {
        e.preventDefault();
        $(this).parents('tr').remove();
    });

    $("#addTableRow").click(function() {
        $("#mans").each(function () {
            var tds = '<tr>';
            jQuery.each($('tr:last td', this), function () {
                tds += '<td>' + $(this).html() + '</td>';
            });
            tds += '</tr>';
            if ($('tbody', this).length > 0) {
                $('tbody', this).append(tds);
            } else {
                $(this).append(tds);
            }
        });
    });
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/yKjuw/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:25:17.727

**HTML：**

```
<table id="table">
    <tr>
        <td>
            <label for="13">13</label>
            <input type="text" name="13" id="13" value="13" />
        </td>
    </tr>
    <tr>
        <td>
            <label for="11">11</label>
            <input type="text" name="11" id="11" value="11" />
        </td>
    </tr>
    <tr>
        <td>
            <label for="12">12</label>
            <input type="text" name="12" id="12" value="12" />
        </td>
    </tr>
</table>
<a id="addRow" href="#">Add Row</a> 
```

**jQuery：**

```
$(function(){
    var table=$('#table');
    $('#addRow').on('click',function(event){
        var tmpArr=[];
        $('tr',table).each(function(){
            var id=$('input',this).attr('id');
            tmpArr.push(id);
        });
        tmpArr.sort();
        var rowsLength=tmpArr.length;
        var lastElementId=tmpArr[rowsLength-1];
        var nextElementId=parseInt(lastElementId)+1;
        var newRow='<tr><td>'+
                        '<label for="'+nextElementId+'">'+nextElementId+'</label>'+
                        '<input type="text" name="'+nextElementId+'" id="'+nextElementId+'" value="'+nextElementId+'" />'+
                  '</td></tr>';
        $(newRow).appendTo(table);
        event.preventDefault;
    })
}); 
```

在这里你可以检查它：http: [//jsfiddle.net/shandro/UVgyF/](http://jsfiddle.net/shandro/UVgyF/)

# c# - System.Drawing.Image.FromStream() Windows XP 上的“参数无效”

> ID：15479071
> 
> 赞同：7
> 
> 时间：2013-03-18T14:20:27.967
> 
> 标签：c#

以下在我的 Windows 7 开发机器上运行良好，但是在 Windows XP 上运行时，我得到最后一行的异常声明“参数无效”？

```
private string base64String = "AAABAAQAEBAAAAAAAABoBQAARgAAABAQAAAAAAAAaAMAAK4FAAAgIAAAAAAAAKgIAAAWCQAAICAAAAAAAACoDAAAvhEAACgAAAAQAAAAIAAAAAEACAAAAAAAQAEAAAAAAAAAAAAAAAAAAAAAAACmyaQAocifAKDGnQCexJsAl8CUAJe+lACRvI4AjrqKAIm3hgCFsoEAha6CAIKyfgB6sHYAfK15AHqudgB2rXMAcKJsAG6qagBup2kAaqZlAGejYgBjol4AZ59jAGWWYQBimV4AX55bAFiZUwBekVsAXJdXAFGYTABdi1oATZZJAEqSRABGkEAARJA+AEOOPQBEhj8AOIkxAD6HOAA7hjUANoMwAC2CJwBCfz0AN30zADdrNAAreiUAKnElACZ1IAAvaysAKG8iACZoIAAkdh4AIW8cACZfIwAfbxkAHW0XAB1gGAAXYBEAEmQOAB1cGQAcXRYAHVQaABdbEgATUxAAEU8OABBHDQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A/v7+/v7+/ggD/v7+/v7+/v7+/v7+/gAkDf7+/v7+/v7+/v7+/v4BNxj+/v7+/v7+/v7+/v7+AzQY/v7+/v7+/v7+/v7+/hA6F/7+/v7+/v7+/v7+/v4TOh7+/v7+/v7+/v7+/v7+ETc9Cf7+/v7+/v7+/v7+/g8tQR7+AxYcFhP+/v7+/v4MJTg1KjYtGg4GCwj+/v7+FCkvPDEUA/7+/iswCgkbKjMpMzEF/v7+/v4pLjs7OS0jHy1AEP7+/v7+GRQdISAVDxMjPywJAgMDBv4HDg8DAP4PEyY+Pi0oJxT+/v7+/v7+BxQUIiALAwL+/v7+/v7+/v4EEAn+/v7+/v5/AAD8fwAA/H8AAPx/AAD8fwAA/H8AAPw/AAD8IAAA/AAAADwHAAAAHwAAAB8AAAAAAACCAAAA/gEAAP8fAAAoAAAAEAAAACAAAAABABgAAAAAAEADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAiraHnMOZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAApcmjRIY/fK15AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAocifHm4XYJlcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAnsWbIW8cY5lfAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbadoEmUOZZZhAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAaqdlEWINX4xbAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAbqpqHGwWHVQahbOBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdq1yKn0jEEcNW4pYAAAAm8GZZ59jXJdXZp5ia6RnAAAAAAAAAAAAAAAAAAAAAAAAerB2OIkxHWAYJl8jQH47H28ZK3wlWJlTe653kbyOgbJ+iLeFAAAAAAAAAAAAAAAAZ6NjLoMnJnUgHF0WKG8iZ6Nin8WdAAAAAAAAAAAAN30zL2srha6ChrCDXpFbRH8/JHUeLIImJHceJmggl76UAAAAAAAAAAAAAAAAAAAALoAnKnElHVwZHVsZF2ARK3glQo08TZZJK3smEU8OcKJsAAAAAAAAAAAAAAAAAAAAX55bZ6ViUZhMRpBASpREY6JedatxaqZlQ449E1MQN2s0g7GAoMWdnsObnsObkbyOAAAAjrqLea51d610nsWcp8mkAAAAdq1zaKZkPoc4F1oSF1wRLHgmNoMwO4Y1Z6FkAAAAAAAAAAAAAAAAAAAAAAAAAAAAjbqJZqNiZaRhRJA+SZBDgrJ+nsWcoMadAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAl8CUbqdqhLWAAAAAAAAAAAAAAAAAAAAA/n8AAPx/AAD8fwAA/H8AAPx/AAD8fwAA/D8AAPwgAAD8AAAAPAcAAAAfAAAAHwAAAAAAAIIAAAD+AQAA/x8AACgAAAAgAAAAQAAAAAEACAAAAAAAgAQAAAAAAAAAAAAAAAAAAAAAAAChx54AjbyKAIO2fwB5sHUAb6prAGWkYABbnlYAUZlMAEeTQQA9jTcAM4csACmBIgB0dHQAbW1tAGVlZQBeXl4AVlZWAE9PTwBBQUEAQno+AEJxPgA+fTkAMHQrADdvMwAxaS0AL34oACp9IwArdyUAJnYgAC5lKQAmZSEAI2sdACJlHAA2XDIAJlEjACFeHAAfWhoAHlUZAB1OGQAbShcAH0UbABlEFgA5OTkAMjIyACsrKwAkJCQAGD4VABg3FwAWORMAFzEWABMuEQAUFBQACgoKAAAAAAAfbxkAHW0XAB1gGAAXYBEAEmQOAB1cGQAcXRYAHVQaABdbEgATUxAAEU8OABBHDQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v4DEv7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+AxcS/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v4DHSv+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/gMeLf7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+CB8t/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/gMLHzP+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+AwscNP7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v4DCws0/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/gMLCzQP/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+BwsLLhD+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/gMJCwspK/7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+AwsLCyM0Dv7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v4DCwsLCzAr/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/gMLCwsLIzQM/v7+/v7+DxISEg/+/v7+/v7+/v7+/v7+AwsLCwsLMhH+/v4RLC4mIx0hDw/+/v7+/v7+/v7+/v4DCwsLCwsnLA0qJiALCxkFAwMD/v7+/v7+/v7+/v7+/gMLCwsLCyAvJBoLGhUD/v7+/v7+/v7+/v7+/v7+/v7+AwsLCwsLGgsLCxMD/v7+/v7+/v7+/hIR/v7+/v7+/v4DGgsLCwsLCxYD/v7+/v7+/v7+/v4DJjMP/v7+/v7+KQsLCwsLCwsmEf7+/v7+/v7+/v7+AxoaLjQzLS0xKSkLCwsLCwsLCycS/v7+/v7+/v7+/v4DCwsLHB8fHx8fCwsLCwsLCwsLJSr+/v7+/v7+/v7+/gMLCwsLCwsLCwsLCwsLCwsLCwskM/7+/v7+/v7+/v7+AwoLCwsLCwsLCwsDAwYLCwsLCxw0Kwz+/v7+/v7+/v7+AwoLCwsLCwsEA/7+AQsLCwsLCyMyMxEPDw8PEBISEf7+AwMDAwIDA/7+/v4DCgsLCwsLCxonLi4uKCIYFxT+/v7+/v7+/v7+/v7+/v4CCwsLCwsLCwsLCwkHAwEA/v7+/v7+/v7+/v7+/v7+/v4FCwsLCwsLGwP+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v4DCgsLGgQD/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v4DAwMD/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////n////x////8f////H////x////4f///+H////h////4P///+D////A////wH///8B////APwf/wDgD/8AAB//AAP//wAP/P8AP/h+AH/wAAB/8AAAf/AAAH/wAAAf+AGAAAwHgAAf/8AAP//gD///8B////h///////KAAAACAAAABAAAAAAQAYAAAAAACADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdUBAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdTdvM0BAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdS9mKjIyMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSZlISQkJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEeTQSNrHSQkJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIiNrHRYWFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIiZ2IAoKCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIgoKCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIgoKCl5eXgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFGZTCmBIimBIhg+FVZWVgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdT2NNymBIimBIhlEFjIyMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIiBfGwoKCmVlZQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIimBIhY5EzIyMgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIimBIiBfGwoKCnR0dAAAAAAAAAAAAAAAAAAAAAAAAF5eXkdHR0BAQEBAQF5eXgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIimBIimBIhMuEU9PTwAAAAAAAAAAAE9PTysrKxg+FRxPGCJZHixkKDZcMl5eXl5eXgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIimBIimBIhtKFysrK21tbTk5OR1MGiJlHCmBIimBIi9+KGWkYHmwdXmwdXmwdQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIimBIimBIiJlHBg3Fx9aGih7ISmBIip+Iz59OXmwdQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIimBIimBIih7ISmBIimBIimBIkJ6PnmwdQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBAQE9PTwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSx/JSmBIimBIimBIimBIimBIimBIjB0K3mwdQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdR1MGhAQEF5eXgAAAAAAAAAAAAAAAAAAAAAAABlEFimBIimBIimBIimBIimBIimBIimBIhxPGE9PTwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSx/JSh7IRg+FQoKChYWFiQkJCQkJBcxFhlEFhlEFimBIimBIimBIimBIimBIimBIimBIimBIhtKF0BAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIiZ2ICNrHSNrHSNrHSNrHSNrHSmBIimBIimBIimBIimBIimBIimBIimBIimBIh5VGTk5OQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdSmBIimBIimBIimBIimBIimBIimBIimBIimBIimBIimBIimBIimBIimBIimBIimBIimBIimBIh9aGhYWFgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdTOHLCmBIimBIimBIimBIimBIimBIimBIimBIimBInmwdXmwdVueVimBIimBIimBIimBIimBIiZ2IAoKCjIyMnR0dAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdTOHLCmBIimBIimBIimBIimBIiyAJW+qa3mwdQAAAAAAAI28iimBIimBIimBIimBIimBIimBIiBfGxMuERAQEE9PT15eXl5eXl5eXl5eXlZWVkBAQEBAQE9PTwAAAAAAAHmwdXmwdXmwdXmwdYO2f3mwdXmwdQAAAAAAAAAAAAAAAHmwdTOHLCmBIimBIimBIimBIimBIimBIih7IRtKFxg+FRg+FRg+FR9FGyZRIzFpLTdvM0JxPgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIO2fymBIimBIimBIimBIimBIimBIimBIimBIimBIimBIj2NN1GZTHmwdY28iqHHngAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGWkYCmBIimBIimBIimBIimBIimBIit3JXmwdQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdTOHLCmBIimBIix/JW+qa3mwdQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHmwdXmwdXmwdXmwdQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP///////n////x////8f////H////x////4f///+H////h////4P///+D////A////wH///8B////APwf/wDgD/8AAB//AAP//wAP/P8AP/h+AH/wAAB/8AAAf/AAAH/wAAAf+AGAAAwHgAAf/8AAP//gD///8B////h///////";

byte[] bytes = Convert.FromBase64String(base64String);
System.IO.MemoryStream ms = new System.IO.MemoryStream(bytes);
System.Drawing.Image b = System.Drawing.Image.FromStream(ms, false, false); 
```

这个 base64 字符串在两个操作系统上都可以正常工作。它也是一个图标，但尺寸更小：

```
"AAABAAEAEBAAAAEACABoBQAAFgAAACgAAAAQAAAAIAAAAAEACAAAAAAAQAEAAAAAAAAAAAAAAAAAAAAAAACmyaQAocifAKDGnQCexJsAl8CUAJe+lACRvI4AjrqKAIm3hgCFsoEAha6CAIKyfgB6sHYAfK15AHqudgB2rXMAcKJsAG6qagBup2kAaqZlAGejYgBjol4AZ59jAGWWYQBimV4AX55bAFiZUwBekVsAXJdXAFGYTABdi1oATZZJAEqSRABGkEAARJA+AEOOPQBEhj8AOIkxAD6HOAA7hjUANoMwAC2CJwBCfz0AN30zADdrNAAreiUAKnElACZ1IAAvaysAKG8iACZoIAAkdh4AIW8cACZfIwAfbxkAHW0XAB1gGAAXYBEAEmQOAB1cGQAcXRYAHVQaABdbEgATUxAAEU8OABBHDQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD///8A/v7+/v7+/ggD/v7+/v7+/v7+/v7+/gAkDf7+/v7+/v7+/v7+/v4BNxj+/v7+/v7+/v7+/v7+AzQY/v7+/v7+/v7+/v7+/hA6F/7+/v7+/v7+/v7+/v4TOh7+/v7+/v7+/v7+/v7+ETc9Cf7+/v7+/v7+/v7+/g8tQR7+AxYcFhP+/v7+/v4MJTg1KjYtGg4GCwj+/v7+FCkvPDEUA/7+/iswCgkbKjMpMzEF/v7+/v4pLjs7OS0jHy1AEP7+/v7+GRQdISAVDxMjPywJAgMDBv4HDg8DAP4PEyY+Pi0oJxT+/v7+/v7+BxQUIiALAwL+/v7+/v7+/v4EEAn+/v7+/v5/AAD8fwAA/H8AAPx/AAD8fwAA/H8AAPw/AAD8IAAA/AAAADwHAAAAHwAAAB8AAAAAAACCAAAA/gEAAP8fAAA=" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T18:18:04.530

XP 真的很长。它缺少的一件事是 gdiplus.dll 的 1.10 版，这是对首先随 Vista 一起提供的 GDI+ 的更新。该版本中的许多修复，其中一个它现在实际上支持 ImageFormat.Icon。

您的图像数据代表一个 .ico 文件。请改用 Icon(Stream) 构造函数。您可能仍然对 24bpp 图标有问题，我无法再检查了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-01T15:20:39.557

```
using (MemoryStream ms = new MemoryStream())
    {
        image.Save(ms,System.Drawing.Imaging.ImageFormat.Jpeg);
        ms.Seek(0,0);
        byte[] data = new byte[0];
        data = ms.ToArray();          
    } 
```

我想访问括号外的数据。怎么办

# javascript - grails 链接 - 将 javascript 变量添加到参数中

> ID：15479074
> 
> 赞同：0
> 
> 时间：2013-03-18T14:20:32.827
> 
> 标签：javascript, grails

```
$('#andiebox').append('<g:link controller="search" action="search" params="[where:'+destination+', what:what, sort:sort, type:type, distance:distance]">Psychos in HH</g:link>'); 
```

这不被 grails 接受，我怎样才能正确插入变量？

该变量是从输入生成的客户端：

```
var destination = $(this).attr("id");

            var metaSection = $("#metaSection").val(); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:52:55.427

`<g:link`是服务器端标签，因此它只能为您的链接准备基础。所有客户端参数都应在客户端填写。就像是：

```
var params = { 
   what: '${what.encodeAsJavaScript()}', //as I understand all this variables are server side variables
   sort: '${sort.encodeAsJavaScript()}', 
   type: '${type.encodeAsJavaScript()}', 
   distance: '${distance.encodeAsJavaScript()}' 
}; 
params.destination =  $(this).attr("id");
var urlBase = '${createLink(controller:"search", action: "search").encodeAsJavaScript()}';

$('#andiebox').append('<a href="' + url + '?' + $.serialize(params) + '">Psychos in HH</a>'); 
```

# jquery - Django：可以直接从 Media 子类执行 javascript 或 jquery 吗？

> ID：15479078
> 
> 赞同：0
> 
> 时间：2013-03-18T14:20:45.953
> 
> 标签：jquery, python, django, forms, media

我只有一个小的 django 表单，它需要在创建时执行同样小的 jquery 代码（只有半行），我想知道我是否可以在 django 中给出一行代码，不知何故......这可能吗? 我要执行的行如下所示：

`$("#my_text_box").my_plugin_apply();`

我在想类似以下的事情：

```
class MyForm(forms.Form):

    #Here for example only one input field...

    class Media:
        js = (
            'http://code.jquery.com/jquery-1.8.3.js',
            'http://code.jquery.com/ui/1.10.1/jquery-ui.js',
            'load_my_plugin_here.js',
            '$("#my_text_box").my_plugin_apply();',
            ) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:31:31.220

这太疯狂了，你不应该那样做，但实际上你可以。

```
class MyForm(forms.Form):

#Here for example only one input field...

class Media:
    js = (
        'http://code.jquery.com/jquery-1.8.3.js',
        'http://code.jquery.com/ui/1.10.1/jquery-ui.js',
        'load_my_plugin_here.js" onload="$("#my_text_box").my_plugin_apply();',
        ) 
```

我已经在 django 1.4.5 上测试过了，当然还有 $(document).bind('ready', function() {}); 可能有用（没有测试）。

更合适的解决方案是将此行添加到它自己的 javascript 中并将其包含到您的类中，或者如果您更喜欢为管理员修改 html 来执行 line。

# c# - GCM ASP.NET Android 教程

> ID：15479081
> 
> 赞同：2
> 
> 时间：2013-03-18T14:20:58.990
> 
> 标签：c#, android, asp.net, google-cloud-messaging

我正在计划一个推送通知服务，并且当前有一个使用 Windows Phone 的“测试项目”。我现在正在尝试使用 Android，但运气不佳。有没有人创建了关于如何将 GCM 与 ASP.NET (C#) 一起用于 Android 应用程序的分步教程？Microsoft 为他们的推送通知服务提供了很好的示例，但我没有获得关于使用 Android 进行此操作的基本、详细级别的教程

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:31:01.943

你应该用谷歌搜索找到这些：

*   [ASP.net 和 GCM](http://steveloper.com/android-google-cloud-messaging-and-asp-net/)
*   [使用 C# 将 GCM 用于 ASP.NET 的 CodeProject 教程](http://www.codeproject.com/Tips/434338/Android-GCM-Push-Notification)

你应该找到[官方教程和指南](http://developer.android.com/google/gcm/gs.html)来启动 GCM 很容易..按照它一步一步。然后在您的设备注册后实现服务器逻辑以触发推送通知。

基本上，一旦您的设备ID被注册。您需要根据您的逻辑将此ID保存到数据库中，稍后您可以通过参考这些设备ID发送推送..例如：

```
AndroidGCMPushNotification apnGCM = new AndroidGCMPushNotification();

string strResponse =
apnGCM.SendNotification(deviceID,
"Test Push Notification message ") 
```

# .net - 复杂 Silverlight 图表

> ID：15479084
> 
> 赞同：-3
> 
> 时间：2013-03-18T14:21:07.790
> 
> 标签：.net, silverlight, xaml, charts

可以使用标准 Silverlight 控件来完成吗？

![在此处输入图像描述](../Images/1161eae4ca8892f11cd55d8804c6658c.png)

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:51:04.170

OK完成！

![在此处输入图像描述](../Images/5d8054467b5277ab4d52f6cfab2be47c.png)

我可以找到 XAML 来做到这一点。

```
 <toolkit:Chart Height="400" Width="600" Title="Cumulative Age Dispersions" >
                <toolkit:ColumnSeries  ItemsSource="{Binding MaleSerie}" IndependentValueBinding="{Binding ItemName}"
                    DependentValueBinding="{Binding Count}"  
                    HorizontalAlignment="Left" Height="304" VerticalAlignment="Top" Width="266">
                </toolkit:ColumnSeries >

                <toolkit:ColumnSeries  ItemsSource="{Binding FemaleSerie}" IndependentValueBinding="{Binding ItemName}"
                    DependentValueBinding="{Binding Count}"  
                    HorizontalAlignment="Left" Height="304" VerticalAlignment="Top" Width="266">
                </toolkit:ColumnSeries >

            </toolkit:Chart> 
```

和 C#

```
 public class Sex
    {
        public string ItemName { set; get; }

        public int Count { set; get; }
    }

  public class MergedData
    {     
        public List<Sex> MaleSerie { set; get; }

        public List<Sex> FemaleSerie { set; get; }
    }

  void UC_Loaded(object sender, RoutedEventArgs e)
        {
            MergedData md = new MergedData();
  List<Sex> maleSerie = new List<Sex>();
            maleSerie.Add(new Sex() { ItemName = "Car", Count = 10});
            maleSerie.Add(new Sex() { ItemName = "Water", Count = 20 });
            maleSerie.Add(new Sex() { ItemName = "Sport", Count = 30 });

            md.MaleSerie = maleSerie;

            List<Sex> femaleSerie = new List<Sex>();
            femaleSerie.Add(new Sex() { ItemName = "Car", Count = 40 });
            femaleSerie.Add(new Sex() { ItemName = "Water", Count = 34 });
            femaleSerie.Add(new Sex() { ItemName = "Sport", Count = 87 });

            md.FemaleSerie = femaleSerie;

            this.DataContext = md;
} 
```

PS这里有一些有趣的图表生成器[http://blogs.msdn.com/b/delay/archive/2008/12/10/great-silverlight-charts-are-still-just-a-click-away-chartbuilder- sample-and-source-code-updated-for-charting-s-december-08-release.aspx](http://blogs.msdn.com/b/delay/archive/2008/12/10/great-silverlight-charts-are-still-just-a-click-away-chartbuilder-sample-and-source-code-updated-for-charting-s-december-08-release.aspx) 它很旧，但您可以轻松地将其转换为 Visual Studio 2012。:)

# android - 无法在 android 中使用 htts 协议从 url 播放 mp3 文件

> ID：15479090
> 
> 赞同：0
> 
> 时间：2013-03-18T14:21:18.487
> 
> 标签：android, https, media-player

我正在从包含 https 协议扩展的 url 播放一个 mp3 文件，我得到一个媒体播放器未能准备异常，但是当我使用 http 协议时，代码运行良好

/ *** *

```
 import com.erkutaras.media.audio.url.R;

                            import android.app.Activity;
                            import android.media.MediaPlayer;
                            import android.media.MediaPlayer.OnBufferingUpdateListener;
                            import android.media.MediaPlayer.OnCompletionListener;
                            import android.media.MediaPlayer.OnPreparedListener;
                            import android.os.Bundle;
                            import android.os.Handler;
                            import android.util.Log;
                            import android.view.MotionEvent;
                            import android.view.View;
                            import android.view.View.OnClickListener;
                            import android.view.View.OnTouchListener;
                            import android.widget.Button;
                            import android.widget.SeekBar;

                            public class StreamAudioFromUrlSampleActivity extends Activity implements OnClickListener, OnTouchListener, OnCompletionListener, OnBufferingUpdateListener{
                                private Button btn_play,
                                btn_pause,
                                btn_stop;
                            private SeekBar seekBar;
                            private MediaPlayer mediaPlayer;
                            private int lengthOfAudio;
                            //  private final String URL = "http://android.erkutaras.com/media/audio.mp3";
                            private final String URL = "https://icanbeanything.com/en/Fearless/afraid-of-change.mp3";
                                private final Handler handler = new Handler();
                            private final Runnable r = new Runnable() { 
                            @Override
                            public void run() {
                            updateSeekProgress();   
                            }
                            };
                            /** Called when the activity is first created. */
                                @Override
                                public void onCreate(Bundle savedInstanceState) {
                                    super.onCreate(savedInstanceState);
                                    setContentView(R.layout.main);
                                    init();
                                }

                            private void init() {
                            btn_play = (Button)findViewById(R.id.btn_play);
                            btn_play.setOnClickListener(this);
                            btn_pause = (Button)findViewById(R.id.btn_pause);
                            btn_pause.setOnClickListener(this);
                            btn_pause.setEnabled(false);
                            btn_stop = (Button)findViewById(R.id.btn_stop);
                            btn_stop.setOnClickListener(this);
                            btn_stop.setEnabled(false);
                            seekBar = (SeekBar)findViewById(R.id.seekBar);
                            seekBar.setOnTouchListener(this);
                            mediaPlayer = new MediaPlayer();
                            mediaPlayer.setOnBufferingUpdateListener(this);
                            mediaPlayer.setOnCompletionListener(this);
                            }

                            @Override
                            public void onBufferingUpdate(MediaPlayer mediaPlayer, int percent) {
                            seekBar.setSecondaryProgress(percent);
                            }

                            @Override
                            public void onCompletion(MediaPlayer mp) {
                            btn_play.setEnabled(true);
                            btn_pause.setEnabled(false);
                            btn_stop.setEnabled(false);
                            }

                            @Override
                            public boolean onTouch(View v, MotionEvent event) {
                            if (mediaPlayer.isPlaying()) {
                            SeekBar tmpSeekBar = (SeekBar)v;
                            mediaPlayer.seekTo((lengthOfAudio / 100) * tmpSeekBar.getProgress() );
                            }
                            return false;
                            }

                            @Override
                            public void onClick(View view) {

                            try {
                            mediaPlayer.setDataSource(URL);
                            mediaPlayer.prepare();
                            lengthOfAudio = mediaPlayer.getDuration();
                            } catch (Exception e) {
                            Log.e("Error", e.getMessage());
                            }
                            switch (view.getId()) {
                            case R.id.btn_play:
                            playAudio();
                            break;
                            case R.id.btn_pause:
                            pauseAudio();
                            break;
                            case R.id.btn_stop:
                            stopAudio();
                            break;
                            default:
                            break;
                            }
                            updateSeekProgress();
                            }

                            private void updateSeekProgress() {
                            if (mediaPlayer.isPlaying()) {
                            seekBar.setProgress((int)(((float)mediaPlayer.getCurrentPosition() / lengthOfAudio) * 100));
                            handler.postDelayed(r, 1000);
                            }
                            }

                            private void stopAudio() {
                            mediaPlayer.stop();
                            btn_play.setEnabled(true);
                            btn_pause.setEnabled(false);
                            btn_stop.setEnabled(false);
                            seekBar.setProgress(0);
                            }

                            private void pauseAudio() {
                            mediaPlayer.pause();
                            btn_play.setEnabled(true);
                            btn_pause.setEnabled(false);
                            }

                            private void playAudio() {
                            mediaPlayer.start();
                            btn_play.setEnabled(false);
                            btn_pause.setEnabled(true);
                            btn_stop.setEnabled(true);
                            }

                            }

                                                    ///////////////////////////////////////////////////////////////////// 
```

///////////////////////////////////////// /////////////////////////

***** /

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:36:33.640

如果您在 Android 3.1 之前开发

> Android 3.1 之前不支持 HTTPS。

看到这个链接

[Android 支持的媒体格式](http://developer.android.com/guide/appendix/media-formats.html#network)

# javascript - 两个类似的javascript函数，一个有效，另一个无效，为什么？

> ID：15479091
> 
> 赞同：0
> 
> 时间：2013-03-18T14:21:21.377
> 
> 标签：javascript, html, css

我是 Javascript 初学者，我正在尝试让一些简单的代码工作。我添加了一个片段作为检查，以确保 Javascript 在页面中正常工作，它确实如此。它只是将一些文本从蓝色变为红色。

第二段代码应该隐藏 a `<div>`，或者根据所选值显示它。它不起作用有人能指出我正确的方向吗？感谢您的任何建议。

```
<!DOCTYPE html>
<html>
<head>
  <title>getElementById example</title>
  <script>
  function changeColor(newColor) {
    var elem = document.getElementById("para1");
    elem.style.color = newColor;
  }
  </script>

  <script>
       // EXPAND
    function Hide(elementid){
        document.getElementById(elementid).style.display = 'none';
    }

    function Show(elementid){
        document.getElementById(elementid).style.display = '';
    }
  </script>

</head>
    <body>
        <p id="para1">Some text here</p>
        <button onclick="changeColor('blue');">blue</button>
        <button onclick="changeColor('red');">red</button>

        <div id="one">ONE</div>
        <div id="two">TWO</div>

        <select>
            <Option value="javascript:Show('one');javascript:Hide('two')">one</option> 
            <Option value="javascript:Hide('one');javascript:Show('two')">two</option>
        </select>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T14:23:27.290

该`value`属性不运行 JavaScript。

您需要将一个`change`事件绑定到 select 元素，然后查看选定的值以确定显示或隐藏哪一个。

[例如](http://jsbin.com/alimel/1/edit)：

```
<div id="one">ONE</div>
<div id="two">TWO</div>
<div id="three">THREE</div>

<select>
    <option>one
    <option>two
    <option>three
</select>

<script>
  function show(id) {
    document.getElementById(id).style.display = '';
  }
  function hide(id) {
    document.getElementById(id).style.display = 'none';
  }
  function whichDiv(event) {
    var select = event.target;
    var options = select.options;
    for (var i = 0; i < options.length; i++) {
      var option = options[i];
      if (option.selected) {
        show(option.value);
      } else {
        hide(option.value);
      }
    }
  }

  document.querySelector('select').addEventListener('change', whichDiv);
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:22:36.310

我认为你应该使用 `block`：`document.getElementById(elementid).style.display = 'block';`

# svn - 如果我想保留本地更改，解决与 TortoiseSVN 的树冲突的最佳方法是什么？

> ID：15479092
> 
> 赞同：6
> 
> 时间：2013-03-18T14:21:21.770
> 
> 标签：svn, tree, tortoisesvn, conflict, directory

最近在我正在从事的这个项目中，我很不幸地与自己发生了很多树木冲突。如果我只想保留本地更改，我想知道解决树冲突的最佳和最简单的方法是什么。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-25T18:12:31.073

右键单击文件 > 编辑冲突 > 标记为已解决。

# spring - Spring MVC 中的 ModelAndView

> ID：15479097
> 
> 赞同：0
> 
> 时间：2013-03-18T14:21:33.710
> 
> 标签：spring, spring-mvc

我正在通过 Spring API。我经历了 ModelAndView 类。我在类中有两个返回 Map 的方法。一个是getModel()，另一个是getModelInternal()。他们都返回地图。这些方法有什么区别。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:26:19.380

检查 javadoc 的方法：

```
/**
 * Return the model map. May return {@code null}.
 * Called by DispatcherServlet for evaluation of the model.
 */
protected Map<String, Object> getModelInternal() {
    return this.model;
}

/**
 * Return the model map. Never returns {@code null}.
 * To be called by application code for modifying the model.
 */
public Map<String, Object> getModel() {
    return getModelMap();
} 
```

因此，一个由客户端调用-另一个由框架调用，一个可为空-另一个非空。

# mysql - MySQL选择没有重复uid的前十条记录

> ID：15479100
> 
> 赞同：2
> 
> 时间：2013-03-18T14:21:47.413
> 
> 标签：mysql, sql, select

我有下表（user_record），其中包含数百万行，如下所示：

```
no    uid   s
================
1       a   999
2       b    899
3       c   1234
4       a    1322
5       b    933
----------------- 
```

uid 可以重复。我需要的是显示前 10 条记录（需要包括 uid 和 s），没有重复的 uid 顺序按 s（desc）。我可以通过以下 SQL 语句中的两个步骤来做到这一点：

```
SELECT distinct(uid) FROM user_record ORDER BY s DESC LIMIT 10
SELECT uid,s FROM user_record WHERE uid IN(Just Results) 
```

我只是想知道在一个语句中是否有更有效的方法？

任何帮助是极大的赞赏。

ps：我也有以下SQL语句：

```
 select * from(select uid,s from user_record order by s desc) as tb group by tb.uid order by tb.s desc limit 10 
```

但它很慢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:23:56.930

最简单的方法是使用`MAX()`to get the highest `s`for each 并根据最高对其进行`uid`排序`s`。

```
SELECT  uid, MAX(s) max_s
FROM    TableName
GROUP   BY uid
ORDER   BY max_s DESC
LIMIT   10 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/3be43/1)

上述查询的缺点是它不处理重复项，例如，如果有多个`uid`具有相同`s`的值并且结果是最高值。如果您想`s`通过重复获得最高值，您可以通过在子查询上计算它并将结果连接到原始表中来实现。

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT  DISTINCT s
            FROM    TableName
            ORDER   BY s DESC
            LIMIT 10
        ) b ON a.s = b.s
ORDER   BY s DESC 
```

# javascript - 可以使用 beforeunload/unload 可靠地发送 XmlHttpRequests

> ID：15479103
> 
> 赞同：21
> 
> 时间：2013-03-18T14:22:03.420
> 
> 标签：javascript, html, dom, w3c, specifications

最近，我迫切需要通知我的服务器，我的 webapp 的特定页面即将关闭。“*容易的peasy* ”我想，`beforeunload`可以使用相当长的一段时间。HTML5“东西”甚至刷新了关于它的*规范*（这就是我的想法......），就像我们可以选择来自事件处理程序和东西`return`的*字符串值*`beforeunload`一样，这让用户可以选择拦截。

[请参阅 MDN 页面关于`onbeforeunload`](https://developer.mozilla.org/en-US/docs/DOM/Mozilla_event_reference/beforeunload?redirectlocale=en-US&redirectslug=Mozilla_event_reference/beforeunload)

然而，事实证明，没有任何“*官方*”规范可用，它描述了`beforeunload`迄今为止的行为。我找到的唯一官方文档是关于*WHATWG*的，当然这只是对 W3C 的提议。

[见 WHATWG](http://www.whatwg.org/specs/web-apps/current-work/multipage/history.html#unloading-documents)

到现在为止还挺好。我们能够在事件处理程序中创建*同步的 XHR 请求。*`beforeunload`“大多数”浏览器会给该请求大约 1-2 秒的时间来完成，之后它就会被杀死。标准*异步请求*立即被终止。话虽如此，我什至无法分辨我从“哪里”知道这一点，现在看起来像是八卦和口耳相传。即便如此，它也可以在 Firefox+Chrome 中运行，我们不能依赖它，可以吗？

关于 WHATWG 是否有任何正在进行的讨论/建议`beforeunload`？
关于该事件的任何其他官方资源我可能还没有找到？

对我来说最重要的是，我们在那里通过 sync-XHR 发送数据的可靠性如何？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-18T14:48:25.843

看一下[`navigator.sendBeacon()`](https://developer.mozilla.org/en-US/docs/Web/API/navigator.sendBeacon)，它允许您可靠地将数据发送到服务器，即使在页面正在卸载时也是如此。它目前处于[规范草案](http://www.w3.org/TR/beacon/)中，并受 Firefox 31、Chrome 39（在 37 的标志后面）和 Opera 24 的标志后面支持。

您可以使用以下内容“某种”填充它：

```
navigator.sendBeacon = navigator.sendBeacon || function (url, data) {
    var xhr = new XMLHttpRequest();

    // Need to send synchronously to have the best chance of data getting
    // through to the server
    xhr.open('POST', url, false);
    xhr.send(data);
}; 
```

### 进一步阅读：

*   [HTML5 摇滚文章](http://updates.html5rocks.com/2014/10/Send-beacon-data-in-Chrome-39)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T14:40:16.447

要记住的是，它`beforeunload`最初是 Internet Explorer 的扩展。自动地，这使它成为网络上的二等公民。没有规范，浏览器实现各不相同。例如，Firefox 仅通过不显示字符串而仅部分实现它，仅显示通用消息。

此外，即使完全实施，它也不能防止所有可能的卸载情况，例如，用户已终止处理器、浏览器已崩溃或计算机已关闭。即使忽略这些极端情况，我怀疑有可能将您的浏览器配置为忽略此类请求。

我的感觉是你不应该依赖这个消息来拯救你。如果这个网络应用程序是内部的，我建议培训他们使用`Save`或`Close`或其他按钮，而不是仅仅关闭选项卡。如果它是外部的，也许在用户做他们的事情时考虑自动保存？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:44:51.953

Sync XHR 是浏览器挂起的主要来源，占挂起的近 10%：http: [//blogs.msdn.com/b/ieinternals/archive/2011/08/03/do-not-use-xmlhttprequest-in -同步模式，除非你喜欢挂起.aspx](http://blogs.msdn.com/b/ieinternals/archive/2011/08/03/do-not-use-xmlhttprequest-in-synchronous-mode-unless-you-like-to-hang.aspx)

在 IE 中，如果请求需要 Windows 身份验证往返，或者如果要发送 POST 正文，则即使同步 XHR 也可能被“中断”。您可能会发现只发送了第一个未经身份验证的请求的标头。

# svn - TortoiseSVN Diff 颜色代码

> ID：15479104
> 
> 赞同：39
> 
> 时间：2013-03-18T14:22:04.177
> 
> 标签：svn, tortoisesvn, diff, tortoisemerge

任何人都可以解释在 SVN 中进行差异时的颜色代码，即某些行被标记为红色、黄色、蓝色等。

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2013-03-18T14:38:02.880

查看 TortoiseSVN 手册：[TortoiseMerge | 颜色设置页面](https://tortoisesvn.net/docs/nightly/TortoiseMerge_en/tmerge-dug-settings.html#tmerge-dug-settings-color)。

这是默认的配色方案（在**TortoiseMerge | File | Settings | Colors**中查看）：

![tortoisemerge 默认配色方案](../Images/3c3d990482982e8b153dd731a615b138.png)

了解[线路状态图标](https://tortoisesvn.net/docs/nightly/TortoiseMerge_en/tmerge-dug-icons.html)的含义也很有意义。

# mongodb - MongoDB Grails 插件 ObjectId VS String id

> ID：15479105
> 
> 赞同：1
> 
> 时间：2013-03-18T14:22:10.150
> 
> 标签：mongodb, grails, groovy, mongodb-java

我有一个关于 grails 的 MongoDB id 的问题。我在域类中使用了字符串 id，它会在域类中创建字符串 id，这很好。但是当我在 mongodb 中手动插入条目时（运行 db.Things.insert()），它会为新条目创建一个 ObjectId（不是字符串），我想知道我们如何解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-18T14:12:25.323

引用自：[Mongo Collections - 参考文档](http://springsource.github.io/grails-data-mapping/mongo/manual/guide/3.%20Mapping%20Domain%20Classes%20to%20Mongo%20Collections.html)

> 默认情况下，GORM 实体提供一个基于整数的标识符。例如以下实体： class Person {} 有一个名为 id 的 java.lang.Long 类型的属性。在这种情况下，用于 Mongo 的 GORM 将使用 Mongo 原子操作文档中描述的技术生成基于序列的标识符。
> 
> 然而，基于序列的整数标识符对于需要分片（Mongo 的一个更好的特性之一）的环境来说并不理想。因此，通常建议使用基于字符串的 id：
> 
> class Person { String id } 或原生 BSON ObjectId：
> 
> 导入 org.bson.types.ObjectId 类人 { ObjectId id }
> 
> BSON ObjectId 实例的生成方式与 UUID 类似。

因此，您应该使用 org.bson.types.ObjectId 替换您的域类的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:59:37.737

我发现我可以先创建一个新的 ObjectId，然后当我将它插入 mongoDb 时，我将 ObjectId.str 传递给“_id”属性，然后问题解决，mongo db 级别和 grails 级别都将具有 String 类型的 id场地。

mongo javascript脚本的代码片段如下：

```
conn = new Mongo();
db = conn.getDB("dbName");

db.user.find().forEach( function(userDoc) {

    // Create a new object Id
    objectId = new ObjectId();

    db.userRole.insert({
        _id: objectId.str,  // Before we insert, convert it as a String
        role: "51437d742cd1d9e80a3f0644",
        user: userDoc._id
    });

}); 
```

# unit-testing - 在单元测试中清除 Angular 模块

> ID：15479106
> 
> 赞同：3
> 
> 时间：2013-03-18T14:22:15.517
> 
> 标签：unit-testing, angularjs

我正在为我的 AngularJS 控制器做一些多用户测试，因为我的用户有不同的角色和设置。第一个总是很好用，但随后的尝试永远不会发出 HTTP 模拟请求的尝试，因为控制器是单例的。我有什么办法可以清除所有现有的控制器，甚至整个 Angular 模块设置并重新启动它，以便我可以执行这些类型的测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:55:13.247

您是否尝试过在 beforeEach 函数中创建控制器？这样，您的控制器将为每个测试重新创建。

```
beforeEach(inject(function ($rootScope, $controller, $location) {
    root = $rootScope;
    scope = $rootScope.$new();
    location = $location;
    controller = $controller('AccountInfoController', { $scope: scope, $location:$location, customer: customer });
})); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-06-07T02:56:43.027

如果您想要清除模块，请尝试此代码

`angular.module('app',[]);`

# java - 可以使用哪些语言在 sql server 报告中添加自定义代码？

> ID：15479109
> 
> 赞同：2
> 
> 时间：2013-03-18T14:22:21.930
> 
> 标签：java, sql-server, reporting-services

我有一些 sql server 报告 - .rdl 文件，我想在其中添加自定义代码来进行一些时区转换。经过一番谷歌搜索，我发现我可以在 Visual Basic 中编写自定义代码。是否有任何其他支持编写自定义代码的语言？像java？

我不知道 VB 在 VB 中编写代码。报告中的自定义代码是否支持 java？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:39:05.343

在不了解 VB.Net 的情况下，您的问题很容易解决 :)，您可以使用此功能进行转换（它将没有时区 (+00) 的时间通过 id 转换为给定时区）：

```
Shared Function ConvertServerTimeNow(ByVal systemDate As Date, ByVal timeZoneId As String, Optional ByVal daylightSavingsTime As Boolean = False) As Date
        Dim timeZoneInfo As TimeZoneInfo
        If timeZoneId Is Nothing Then
            Return systemDate
        Else
            timeZoneInfo = timeZoneInfo.FindSystemTimeZoneById(timeZoneId)
            If daylightSavingsTime = False Then
                timeZoneInfo = timeZoneInfo.CreateCustomTimeZone(timeZoneInfo.Id, timeZoneInfo.BaseUtcOffset, timeZoneInfo.DisplayName, timeZoneInfo.StandardName, timeZoneInfo.DaylightName, Nothing, True)
            End If
        End If
        Return (timeZoneInfo.ConvertTime(systemDate, timeZoneInfo))
End Function 
```

关于 TimeZoneID 列表可以参考这个答案：[https ://stackoverflow.com/a/7908482/1048105](https://stackoverflow.com/a/7908482/1048105)

关于其他语言：您可以通过添加自定义程序集来使用 .NET 平台上的任何语言，但您不能在 rdl 中以除 VB.NET 之外的其他语言编写代码。关于自定义程序集，您可以在此处阅读[http://support.microsoft.com/kb/920769](http://support.microsoft.com/kb/920769)，但很难部署它，我不建议在没有必要的情况下这样做。

# arrays - 在 BlackBerry 中的 Horizo ntalFieldManager 的可单击数组上设置焦点颜色

> ID：15479112
> 
> 赞同：0
> 
> 时间：2013-03-18T14:22:29.470
> 
> 标签：arrays, blackberry, onfocus, horizontalfieldmanager

我有一个水平字段数组，每个字段都包含一个位图和一个标签字段。到目前为止，整行应该是可点击的，但是如何正确设置焦点颜色？目前 onFocus 和 onUnfocus 函数被完全忽略。

这是我的数组的定义：

```
for (int i = 0; i < listSize; i++) {
        logInDetailManager[i] = new HorizontalFieldManager(
                Manager.USE_ALL_WIDTH | Field.FOCUSABLE) {

            protected void onFocus(int direction) {
                super.onFocus(direction);
                background_color = Color.RED;
                invalidate();
            }

            protected void onUnfocus() {
                invalidate();
                background_color = Color.GREEN;
            } 
```

这就是我添加水平字段的方式：

```
logInDetailManager[i].setChangeListener(this);
logInDetailManager[i].add(dummyIcon[i]);
logInDetailManager[i].add(new LabelField("hello"));
logInDetailManager[i].add(new NullField(Field.FOCUSABLE));
add(logInDetailManager[i]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T15:26:51.733

抱歉，昨天我无法对自己的帖子发表评论，因为我是 Stackoverflow 的新手；）这是我解决它的方法：

我从 HFM 中删除了 onFocus() 和 onUnfocus() 并在paint方法中设置了背景颜色，以便在聚焦时更改整行颜色：

```
 protected void paint(Graphics graphics) {

        graphics.setBackgroundColor(isFocus() ? Color.RED : Color.GREEN);
        graphics.clear();
        invalidate();
        super.paint(graphics);
} 
```

我还发现，如果您想设置更复杂的背景（即带有渐变），您还可以使用 setBackground(int visual, Background background) 方法：

```
 Background bg_focus = (BackgroundFactory
        .createLinearGradientBackground(Color.GREEN, Color.LIGHTGREEN,
        Color.LIGHTGREEN, Color.GREEN));

 loginDetailManager[i].setBackground(VISUAL_STATE_FOCUS, bg_focus); 
```

确保在使用这样的 setBackground 函数时删除您的绘制方法！

# iphone - ABAddressBookSave 上的随机崩溃

> ID：15479113
> 
> 赞同：2
> 
> 时间：2013-03-18T14:22:29.793
> 
> 标签：iphone, ios, contacts, addressbook, abaddressbook

我在解决随机崩溃时遇到问题：有时会崩溃/有时不会。执行 ABAddressBookSave 时根据[EXC_BAD_ACCESS ！](https://stackoverflow.com/questions/2494830/exc-bad-access-when-executing-abaddressbooksave)，我应该将 multivalueref 用于正确的值，

日期、地址、电子邮件、电话：都被视为 multiValueRef。

参考代码：

```
CFErrorRef error = NULL;
ABRecordRemoveValue (record,kABPersonFirstNameProperty,&error);
ABRecordRemoveValue(record, kABPersonLastNameProperty,&error);
ABRecordRemoveValue(record, kABPersonOrganizationProperty,&error);
ABRecordRemoveValue(record, kABPersonPrefixProperty,&error);
ABRecordRemoveValue(record, kABPersonSuffixProperty,&error);
ABRecordRemoveValue(record, kABPersonNicknameProperty,&error);
ABRecordRemoveValue(record, kABPersonMiddleNameProperty,&error);
ABRecordRemoveValue(record,kABPersonDepartmentProperty,&error);
ABRecordRemoveValue(record,kABPersonJobTitleProperty,&error);
ABRecordRemoveValue(record,kABPersonNoteProperty,&error);
ABRecordRemoveValue(record,kABPersonBirthdayProperty,&error);
ABRecordRemoveValue(record,kABPersonAddressProperty,&error);
ABRecordRemoveValue(record,kABPersonEmailProperty,&error);
ABRecordRemoveValue(record,kABPersonPhoneProperty,&error);
bool success = false;

string  m_strDisplayName = item->getDisplayName();
string m_strFirstName = item->getFirstName();
string m_strLastName = item->getLastName();
string m_strMiddleName = item->getMiddleName();
string m_strAddress = item->getAddress();
string m_strHomeAddr = item->getHomeAddress();
string m_strWorkAddress = item->getWorkAddress();
string m_strCompany = item->getCompany();
string m_strTitle = item->getTitle();
string m_strPhoto = item->getPhoto();
string m_strNotes = item->getNotes();
string m_strPrefix = item->getPrefix();
string m_strSuffix = item->getSuffix();
string m_strNickName = item->getNickName();
string m_strDepartment = item->getDepartment();
string m_strBirthDay = item->getBirthDay();
string m_strAnniversary = item->getAnniversary();
CFStringRef c1 = NULL;
CFStringRef c2 = NULL;
CFStringRef c3 = NULL;
CFStringRef c4 = NULL;
CFStringRef c5 = NULL;
CFStringRef c6 = NULL;
CFStringRef c7 = NULL;
CFStringRef c8 = NULL;
CFStringRef c9 = NULL;
CFStringRef c10 = NULL;
NSDateComponents *components1 = nil;
NSDateComponents *components2  = nil;
if (m_strBirthDay.length()!=0) {
    U_STRING bdayyear =m_strBirthDay.substr (0,4);
    U_STRING bdaymonth = m_strBirthDay.substr(4,2);
    U_STRING bdayday = m_strBirthDay.substr(6, 2);
    components1 = [[NSDateComponents alloc] init];
    [components1 setDay:STRING_TO_INT(bdayday)]; 

    [components1 setMonth:STRING_TO_INT(bdaymonth)]; 
    [components1 setYear:STRING_TO_INT(bdayyear)];
    NSCalendar *gregorian = [[NSCalendar alloc]
                             initWithCalendarIdentifier:NSGregorianCalendar];
    NSDate *bday = [gregorian dateFromComponents:components1];
    c10 = CFStringCreateWithCString(kCFAllocatorDefault,m_strBirthDay.c_str(),kCFStringEncodingUTF8);
    ABRecordSetValue(record, kABPersonBirthdayProperty,bday, &error);
}
if (m_strAnniversary.length()!=0) {
    U_STRING anniyear =m_strAnniversary.substr (0,4);
    U_STRING annimonth = m_strAnniversary.substr(4,2);
    U_STRING anniday = m_strAnniversary.substr(6, 2);
    components2 = [[NSDateComponents alloc] init];
    [components2 setDay:STRING_TO_INT(anniday)];

    [components2 setMonth:STRING_TO_INT(annimonth)]; 
    [components2 setYear:STRING_TO_INT(anniyear)];
    NSCalendar *gregorian1 = [[NSCalendar alloc]
                              initWithCalendarIdentifier:NSGregorianCalendar];
    NSDate *anni = [gregorian1 dateFromComponents:components2];
    ABMutableMultiValueRef multiDate = ABMultiValueCreateMutable(kABPersonDateProperty);
    ABMultiValueAddValueAndLabel(multiDate,anni,kABPersonAnniversaryLabel, NULL);
    ABRecordSetValue(record, kABPersonDateProperty, multiDate,&error);
}

if(m_strPhoto.length()!=0)
{
    CFDataRef pho  = CFDataCreate( NULL, (const UInt8*) m_strPhoto.data(), m_strPhoto.size() );
     ABPersonSetImageData (record,pho,&error);  
}

    string chome=m_strHomeAddr;
string cwork=m_strWorkAddress;
NSString *nhome,*nwork;
nhome=[[NSString alloc]initWithCString:chome.c_str() encoding:NSUTF8StringEncoding];
nwork=[[NSString alloc]initWithCString:cwork.c_str() encoding:NSUTF8StringEncoding];
NSArray *ahome = [nhome componentsSeparatedByString:@";"];
NSArray *awork = [nwork componentsSeparatedByString:@";"];

NSMutableDictionary *addressDictionary  = nil;

 ABMutableMultiValueRef multiAddress =ABMultiValueCreateMutable(kABMultiDictionaryPropertyType);

if([ahome count]>=2 &&([[ahome objectAtIndex:2] length] !=0 ||[[ahome objectAtIndex:3] length] !=0 ||[[ahome objectAtIndex:4] length] !=0 ||[[ahome objectAtIndex:5] length] !=0 ||[[ahome objectAtIndex:6] length] !=0 ))
{

   addressDictionary  = [[NSMutableDictionary alloc] init];

    if([[ahome objectAtIndex:2] length] !=0){
[addressDictionary setObject:[ahome objectAtIndex:2] forKey:(NSString *) kABPersonAddressStreetKey];
        }
    if([ahome count]>3 && [[ahome objectAtIndex:3] length] !=0){
[addressDictionary setObject:[ahome objectAtIndex:3] forKey:(NSString *)kABPersonAddressCityKey];
        }
    if([ahome count]>4 && [[ahome objectAtIndex:4] length] !=0){
[addressDictionary setObject:[ahome objectAtIndex:4] forKey:(NSString *)kABPersonAddressStateKey];
        }
    if([ahome count]>5 && [[ahome objectAtIndex:5] length] !=0){
[addressDictionary setObject:[ahome objectAtIndex:5] forKey:(NSString *)kABPersonAddressZIPKey];
    }
    if([ahome count]>6 && [[ahome objectAtIndex:6] length] !=0){

[addressDictionary setObject:[ahome objectAtIndex:6] forKey:(NSString *)kABPersonAddressCountryKey];
        }

ABMultiValueAddValueAndLabel(multiAddress, addressDictionary, kABHomeLabel, NULL);
 }
NSMutableDictionary *addressDictionary1 = nil;
if([awork count]>=2&&([[awork objectAtIndex:2] length] !=0 ||[[awork objectAtIndex:3] length] !=0 ||[[awork objectAtIndex:4] length] !=0 ||[[awork objectAtIndex:5] length] !=0 ||[[awork objectAtIndex:6] length] !=0 ))
{

    addressDictionary1 = [[NSMutableDictionary alloc] init];

if([[awork objectAtIndex:2] length] !=0)
    [addressDictionary1 setObject:[awork objectAtIndex:2] forKey:(NSString *) kABPersonAddressStreetKey];
    if([[awork objectAtIndex:3] length] !=0)
    [addressDictionary1 setObject:[awork objectAtIndex:3] forKey:(NSString *)kABPersonAddressCityKey];
    if([[awork objectAtIndex:4] length] !=0)
    [addressDictionary1 setObject:[awork objectAtIndex:4] forKey:(NSString *)kABPersonAddressStateKey];
    if([[awork objectAtIndex:5] length] !=0)
    [addressDictionary1 setObject:[awork objectAtIndex:5] forKey:(NSString *)kABPersonAddressZIPKey];
    if([[awork objectAtIndex:6] length] !=0)
    [addressDictionary1 setObject:[awork objectAtIndex:6] forKey:(NSString *)kABPersonAddressCountryKey];

    ABMultiValueAddValueAndLabel(multiAddress, addressDictionary1, kABWorkLabel, NULL);

}
success = ABRecordSetValue(record, kABPersonAddressProperty, multiAddress,&error);
if (addressDictionary) [addressDictionary release];
if (addressDictionary1) [addressDictionary1 release];

     //setting Emails
vector<U_STRING> emails = item->getEmails();
vector<U_UINT32> emailAttrs = item->getEmailAttrs();
NSString *em = NULL;
CFStringRef c1pe = NULL;
string s="Primary Email";
c1pe=CFStringCreateWithCString(kCFAllocatorDefault,s.c_str(),kCFStringEncodingUTF8);
ABMutableMultiValueRef multiEmail = ABMultiValueCreateMutable(kABMultiStringPropertyType);
if (emails.size()>0) {
    for (int i = 0; i < emails.size(); i++) {
        string attr = "";
        string email =emails.at(i);
        if (email.length() == 0) {
            continue;
        }
        em = [NSString stringWithCString:email.c_str() encoding:NSUTF8StringEncoding];          
        int emailAttr = emailAttrs.at(i);

        if ((emailAttr & item->ATTR_HOME) != 0) {
            attr += ";HOME";
            ABMultiValueAddValueAndLabel(multiEmail, em, kABHomeLabel, NULL);

        }
        else if ((emailAttr & item->ATTR_WORK) != 0) {
            attr += ";WORK";
            ABMultiValueAddValueAndLabel(multiEmail, em, kABWorkLabel, NULL);
        }

        else if ((emailAttr & item->ATTR_NONE) != 0) {
            attr += ";OTHER";
            ABMultiValueAddValueAndLabel(multiEmail, em, kABOtherLabel, NULL);
        }
        else {

            ABMultiValueAddValueAndLabel(multiEmail,em,c1pe, NULL);
        }

    }

    ABRecordSetValue(record, kABPersonEmailProperty, multiEmail,&error);

}

//setting Phones
vector<U_STRING> phoneNumbers = item->getPhoneNumbers();
vector<U_UINT32> phoneNumberAttrs = item->getPhoneNumberAttrs();
NSString *ph = NULL;
CFStringRef c1hp = NULL;
c1hp=CFStringCreateWithCString(kCFAllocatorDefault,s.c_str(),kCFStringEncodingUTF8);
CFStringRef c1wp = NULL;
c1wp=CFStringCreateWithCString(kCFAllocatorDefault,s.c_str(),kCFStringEncodingUTF8);
ABMutableMultiValueRef multiPhone = ABMultiValueCreateMutable(kABMultiStringPropertyType);
if (phoneNumbers.size()>0) 
{
    for (int i = 0; i < phoneNumbers.size(); i++) {
        string attr = "";
        string phoneNumber =phoneNumbers.at(i);

        if (phoneNumber.length() == 0) {
            continue;
        }
        ph=[NSString stringWithCString:phoneNumber.c_str() encoding:NSUTF8StringEncoding];

        int phoneAttr = phoneNumberAttrs.at(i);
        if ((phoneAttr & item->ATTR_PAGER) != 0) {
            attr += ";PAGER";
            if ((phoneAttr & item->ATTR_HOME) != 0) {
                attr += ";HOME";
                ABMultiValueAddValueAndLabel(multiPhone,ph,kABPersonPhonePagerLabel, NULL);

            }else if ((phoneAttr & item->ATTR_WORK) != 0) {
                attr += ";WORK";
                ABMultiValueAddValueAndLabel(multiPhone,ph,kABPersonPhonePagerLabel, NULL);
            }
        }
        else if ((phoneAttr & item->ATTR_FAX) != 0) {
            attr += ";FAX";
            if ((phoneAttr & item->ATTR_HOME) != 0) {
                attr += ";HOME";
                ABMultiValueAddValueAndLabel(multiPhone,ph,kABPersonPhoneHomeFAXLabel, NULL);

            }else if ((phoneAttr & item->ATTR_WORK) != 0) {
                attr += ";WORK";
                ABMultiValueAddValueAndLabel(multiPhone,ph,kABPersonPhoneWorkFAXLabel, NULL);

            }
        }
        else if ((phoneAttr & item->ATTR_MOBILE) != 0) {
            attr += ";CELL";
            if ((phoneAttr & item->ATTR_HOME) != 0) {
                attr += ";HOME";
                string s="Mobile (Home)";

                ABMultiValueAddValueAndLabel(multiPhone,ph,c1hp, NULL);
            }else if ((phoneAttr & item->ATTR_WORK) != 0) {
                attr += ";WORK";
                string s="Mobile (Work)";
                ABMultiValueAddValueAndLabel(multiPhone,ph,c1wp, NULL);
            }
            else {
                ABMultiValueAddValueAndLabel(multiPhone,ph,kABPersonPhoneMobileLabel, NULL);
            }

        }
        else {
            attr += ";VOICE";
            if ((phoneAttr & item->ATTR_HOME) != 0) {
                attr += ";HOME";
                ABMultiValueAddValueAndLabel(multiPhone,ph, kABHomeLabel, NULL);

            }else if ((phoneAttr & item->ATTR_WORK) != 0) {
                attr += ";WORK";
                ABMultiValueAddValueAndLabel(multiPhone,ph, kABWorkLabel, NULL);

            }
            else {
                ABMultiValueAddValueAndLabel(multiPhone,ph,kABPersonPhoneMainLabel, NULL);
            }

        }
    }
 ABRecordSetValue(record, kABPersonPhoneProperty, multiPhone,&error);
}

//saving to address book
if(ABAddressBookAddRecord(addressBook, record, &error)){
        success = ABAddressBookSave(addressBook, &error);//EXC_BAD_EXCESS only sometimes(may be only for some contacts or their property. I am not sure)
    if (error !=NULL) {
        NSLog(@"error:%@",error);
    }
    } 
```

注意：仔细检查后，我发现 ABAddressBookSave 是线程运行被卡住的地方，而其他线程却发生了崩溃，请参阅下面的堆栈跟踪： ![在此处输入图像描述](../Images/91c0431460d69bf75b922146164776fc.png)

但这并不总是相同的。

谁能发现这段代码有什么问题？请帮忙。

**编辑：**我评论了这个方法中的所有代码，只是写道：

```
 if(ABAddressBookAddRecord(addressBook, record, &error)){
        success = ABAddressBookSave(addressBook, &error);//EXC_BAD_EXCESS 
    if (error !=NULL) {
        NSLog(@"error:%@",error);
    }
    } 
```

它仍然与 bt 崩溃： ![在此处输入图像描述](../Images/c39bb86030f20bbf3ec4da39b9e9c52d.png)

我怀疑这是一些**线程**问题。如果有知情人士可以评论并确认这一点，将有很大帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-26T07:20:59.723

遇到问题了：有一些 C++ 代码产生了问题。我使用`strcpy(str1, str2)`的函数中的字符串有特殊的章程，因此不以 /0 结尾。使用`strncpy(str1,str2,len)`解决了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-23T17:42:07.190

在您的代码中，我没有看到您寻求用户许可的任何地方您可以要求用户获得他/她的许可，以允许您的应用访问联系人，如此[处所述](https://stackoverflow.com/questions/12648244/programmatically-request-access-to-contacts-in-ios-6/12838224#12838224)

# c++ - 如何在 C++ 中获取 NT 服务的域名

> ID：15479114
> 
> 赞同：0
> 
> 时间：2013-03-18T14:22:31.210
> 
> 标签：c++, windows

如果我从服务管理器启动我的服务，它只会将 exe 文件名传递给主程序。如何在 Visuall c++ 6.0 中获取当前正在运行的 NT 服务的域名？编辑：

让我重新表述一下。我有一个进程可以在不同的域上工作，而与用户帐户无关。假设我们使用域 A 登录机器，该进程可以在域 A、域 B、域 C eTc 上运行。是否有任何 Windows API 来检索当前运行的 NT 服务的域，可以在 c++ 中使用。

# c++ - char 指向数组的指针转换为 char 指向指针

> ID：15479117
> 
> 赞同：0
> 
> 时间：2013-03-18T14:22:40.027
> 
> 标签：c++, pointers

我有一个功能：

```
void add(char const**); 
```

我调用它如下：

```
template<typename T>
void anotherAdd(T const& t) {
  add(&t);
}
...
anotherAdd("some string"); 
```

结果我得到了错误：

```
 no known conversion for argument 1 from 'const char (*)[10]' to 'const char**' 
```

为什么不能进行转换？

因为我认为以下是正确的：

```
"some string" <=> char const* =>
&"some string" <=> char const** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:38:33.583

数组不是指针。

此代码需要一个**指向指针的指针**

```
void add(char const**); 
```

编译器告诉您它无法生成**指向指针的指针，**因为您的代码没有指向的指针。您实际上是在尝试评估`&"some string"`，这没有任何有效意义。

此代码将起作用，因为它会创建`char const*`您尝试获取地址的缺失。

```
template<typename T>
void anotherAdd(T const& t) {
  char const *pt = &t; // Now there's a pointer that you can take the address of.
  add(&pt);
} 
```

# java - 如何以utf8格式保存邮件附件

> ID：15479122
> 
> 赞同：0
> 
> 时间：2013-03-18T14:22:50.523
> 
> 标签：java, jakarta-mail

我需要将电子邮件附件保存在 utf8 中。我尝试了这段代码，但仍然缺少一些字符：

```
public static void main(String args[]) throws Exception {
    File emlFile = new File("example.eml");

    InputStream source;

    source = new FileInputStream(emlFile);

    MimeMessage message = new MimeMessage(null, source);

    Multipart multipart = (Multipart) message.getContent();

    for (int x = 0; x < multipart.getCount(); x++) {

        BodyPart bodyPart = multipart.getBodyPart(x);
        String disposition = bodyPart.getDisposition();

        if (disposition != null && (disposition.equals(BodyPart.ATTACHMENT))) {
            System.out.println("Mail have some attachment : ");

            DataHandler handler = bodyPart.getDataHandler();
            System.out.println("file name : " + handler.getName());

            //start reading inpustream from attachment
            InputStream is = bodyPart.getInputStream();
            File f = new File(bodyPart.getFileName());
            OutputStreamWriter sout = new OutputStreamWriter(new FileOutputStream(f), "UTF8");
            BufferedWriter buff_out = new BufferedWriter(sout);
            int bytesRead;
            while ((bytesRead = is.read()) != -1) {
                buff_out.write(bytesRead);
            }
            buff_out.close();

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:41:04.493

您正在从附件中读取*字节*，忽略任何编码，并将*字符*输出到文件中。你很可能想要做或不混合两者。

如果附件包含原始字节，则对输出进行 UTF 编码是没有意义的，您可以使用原始流。

如果它包含文本，您还需要将附件作为文本而不是原始字节读取，并使用编码进行读取和写入。

在后一种情况下，类似于；

```
InputStream is = bodyPart.getInputStream();
InputStreamReader sin = new InputStreamReader(is, 
                                              "UTF8"); // <-- attachment charset 

File f = new File(bodyPart.getFileName());
OutputStreamWriter sout = new OutputStreamWriter(new FileOutputStream(f), "UTF8");
BufferedReader buff_in = new BufferedReader(sin);
BufferedWriter buff_out = new BufferedWriter(sout);

int charRead;
while ((charRead = buff_in.read()) != -1) {
    buff_out.write(charRead);
}

buff_in.close();
buff_out.close(); 
```

# silverlight-5.0 - Silverlight 应用程序的 Dotfuscator

> ID：15479127
> 
> 赞同：1
> 
> 时间：2013-03-18T14:23:10.453
> 
> 标签：silverlight-5.0, dotfuscator

Visual Studio 版本 = Visual Studio 2010 高级版

众所周知，silverlight应用程序生成**.XAP**文件，如果我们将扩展名更改为**.ZIP**，我们可以获得应用程序和应用程序DLL中使用的所有dll，如果我们使用反射器并反汇编dll文件，用户可以获得代码。我想保护这种东西。

我们可以将**Dotfuscator**放在构建和生成 xap 文件的过程之间吗

构建（生成 dll）-> Dotfuscator -> 生成 XAP 文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T17:52:04.600

混淆 Silverlight 应用程序的最佳方法是构建 XAP 包，然后在 XAP 文件本身上运行 Dotfuscator（即，使用独立 GUI 并将 XAP 文件添加到新项目）。请注意，这需要 Dotfuscator Professional Edition。

# mysql - 显示 2 个没有重复数据的表中的内容的查询是什么？

> ID：15479129
> 
> 赞同：0
> 
> 时间：2013-03-18T14:23:11.580
> 
> 标签：mysql, sql

我有两个表如下

```
forum_t (forum_id PK, question,description).

forum_answer (forum_answer_id PK,comment,forum_id). 
```

现在我想要通过组合这两个表来获取特定 forum_id 的问题、描述和评论的结果（这是第一个表中的主键和第二个表中的外键）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:26:28.093

```
SELECT question,description,comment
FROM
  forum_t 
  INNER JOIN 
  forum_answer
  ON forum_t.forum_id=forum_answer.forum_id
WHERE
  forum_t.forum_id={your forum id} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:27:39.457

要删除重复项，请使用`DISTINCT`关键字，但每个问题您不会得到一条记录，因为您可能有很多答案和评论。

```
SELECT DISTINCT F.forum_id,F.question,F.description,A.comment
FROM forum_t F INNER JOIN forum_answer A on F.forum_id = A.forum_id
WHERE F.forum_id = 1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:41:27.057

如果您真的想每个问题得到一行，那么您将不得不使用某种聚合函数。

首先是计数（每个问题的答案数）。

```
select q.forum_id, q.question, q.description, count(*) as answer_count 
from forum_t q
inner join forum_answer a on (q.forum_id = a.forum_id)
where q.forum_id between 1 and 10  -- first 10 questions
group by q.forum_id 
```

如果你想要实际的答案，你可以使用 group_concat 然后放在一起

```
select 
  q.forum_id
  , q.question
  , q.description
  , count(*) as answer_count
  , group_concat(a.comment) as comments_in_csv_form 
from forum_t q
inner join forum_answer a on (q.forum_id = a.forum_id)
where q.forum_id between 1 and 10  -- first 10 questions
group by q.forum_id 
```

您现在可以使用 php 或您在客户端使用的任何语言来展开评论。

请参阅：[http ://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat](http://dev.mysql.com/doc/refman/5.5/en/group-by-functions.html#function_group-concat)

# ruby - Ruby NArray 优化下采样和条件更改

> ID：15479131
> 
> 赞同：1
> 
> 时间：2013-03-18T14:23:16.780
> 
> 标签：ruby, narray

我正在为 ruby​​-fann 创建输入，出于性能原因在 narray 中进行尽可能多的操作。通常我正在处理 2D 200x200 浮点数组，并且需要重复处理 1000 次。

仅使用 NArray，我可以获得可接受的性能。但是，据我所知，我已经完成了一些我想做的操作，但我无法让 NArray 批量执行操作。这意味着我最终使用 Ruby 的循环控件来处理单个 NArray 条目。这对我的代码性能有直接和有害的影响，我想知道我有哪些解决方法或方法。我有能力但不希望分叉 NArray 并为我的工作添加一些功能。这不适合我，因为我需要的功能不够通用，无法进入该库。

我可能会考虑编写一个以某种方式直接使用 NArray 的本机扩展 - 欢迎提供有关如何做到这一点的指针，我不确定如何从另一个中引用一个本机扩展的 gem。

如果我能以不同的方式构建代码，以使 Ruby 部分更快，或利用任何 NArray 功能或相关库，我也将不胜感激任何见解或反馈。

我的两段慢代码非常相似，因此发布了一个问题。

1) 将浮点矩阵限制在一个范围内

我目前在做什么（简化）：

```
 # In reality, nn_input contains real-world data, and I want to 
  # re-normalise it, clipping high values to a maximum of 1.0
  nn_input = NArray.float(200,200).random
  nn_input *= 1.1 
  # The test for "anything needs clipping" is fast, the 200x200 loop is somewhat slower!
  if (nn_input.gt 1.0).sum > 0
    (0...200).each do |x|
      (0...200).each do |y|
        nn_input[x, y] = 1.0 if nn_input[x, y] > 1.0
      end
    end
  end 
```

2）根据平均值将大矩阵下采样到较小的矩阵（想想“图像重新调整大小”）

我目前在做什么（简化）：

```
 # In reality, nn_input contains real-world data, and I want to 
  # downsize it, re-sampling a 200x200 array to a 20x20 one
  large_input = NArray.float(200,200).random
  small_output = NArray.float(20,20) 

 (0...20).each do |x|
   (0...20).each do |y|
     small_output[x, y] = large_input[x*10..x*10+9,y*10..y*10+9].mean
   end
 end 
```

我`mean`在第二个例子中使用了 NArray 的方法，它比第一个例子的问题要小，我最终为每个项目执行了一个小的 Ruby 循环 40000 次（因此整个数据集超过 2 亿次！）

* * *

在 masa16 回复之后，这是一个非常快速的 irb 基准测试，显示了速度的差异：

```
irb
1.9.3-p327 :001 > require 'narray'
 => true
1.9.3-p327 :002 > t0 = Time.now; 250.times { nn_input = NArray.float(200,200).random() * 1.1; (0...200).each {|x| (0...200).each { |y| nn_input[x,y]=1.0 if nn_input[x,y]> 1.0 }} }; Time.now - t0
 => 9.329647
1.9.3-p327 :003 > t0 = Time.now; 250.times { nn_input = NArray.float(200,200).random() * 1.1; nn_input[nn_input.gt 1.0] = 1.0; }; Time.now - t0
 => 0.764973 
```

因此，对于那个快 10 倍的小代码段，并且我通常运行的不是 250 次，而是 50,000 次，这为我节省了 30 分钟到 1 小时的运行时间，而这在之前需要 3 到 4 小时。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:24:11.657

1) `nn_input[nn_input.gt 1.0] = 1.0`

2) `small_output = large_input.reshape(10,20,10,20).mean(0,2)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:51:10.600

您是否对代码进行了基准测试以确定是否存在任何瓶颈？
有什么方法可以并行计算以利用多核环境？如果是这样，您是否考虑过使用 JRuby 来利用出色的 JVM 多线程支持？

这些是我能想到的一些事情。可能只是因为您正在处理大量数据，因此您需要找到解决此问题的替代方法。

# sql - 引用游标在 XMLType.createxml 中丢失

> ID：15479135
> 
> 赞同：2
> 
> 时间：2013-03-18T14:23:22.673
> 
> 标签：sql, oracle, cursor, xmltype

我正在调用一个返回引用游标的函数，并且我正在使用`XMLType.createxml`将结果转换为 XML，例如

```
select XMLType.createxml(package_name.storedProcName('PARAM1', 'PARAM2', 'PARAM3')) as sresult from dual; 
```

但是，我发现这有一个不受欢迎的副作用。用于检索 XMLType 数据的游标似乎从未关闭。使用此技术多次调用该函数后，我总是遇到以下错误：

```
ORA-01000: maximum open cursors exceeded 
```

我没有光标的句柄，因此我无法手动关闭它。此外，我们使用的是池连接，因此没有连接重置，这些游标可以自动释放。关于这个还能做什么？

* * *

这是我的 Oracle 版本（从 v$version 返回）：

```
Oracle Database 10g Enterprise Edition Release 10.2.0.5.0 - 64bi
PL/SQL Release 10.2.0.5.0 - Production                          
CORE    10.2.0.5.0  Production                                      
TNS for HPUX: Version 10.2.0.5.0 - Production                   
NLSRTL Version 10.2.0.5.0 - Production 
```

* * *

（对于那些感兴趣的人，[这里是](https://stackoverflow.com/questions/13854265/handling-nulls-when-using-oracle-xmltype)我之前与 XMLType 相关的问题的链接。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:55:07.430

似乎有一个错误，您应该向 Oracle 支持提出服务请求。我将发布一个测试用例，重现您在 9i 和 11.2.0.3 中的发现：

```
SQL> SHOW parameter open_cursors

NAME                                 TYPE        VALUE
------------------------------------ ----------- ------------------------------
open_cursors                         integer     600

SQL> CREATE OR REPLACE FUNCTION ret_cursor RETURN SYS_REFCURSOR IS
  2     l SYS_REFCURSOR;
  3  BEGIN
  4     OPEN l FOR
  5        SELECT * FROM dual;
  6     RETURN l;
  7  END;
  8  /

Function created 
```

使用上述函数调用 XMLType 时，不会正确关闭游标，但它适用于静态 SQL：

```
SQL> /* Works as expected with static cursor */
  2  DECLARE
  3     l XMLTYPE;
  4  BEGIN
  5     FOR i IN 1 .. 1e4 LOOP
  6        SELECT xmltype.createXML(CURSOR(SELECT * FROM DUAL)) INTO l FROM dual;
  7     END LOOP;
  8  END;
  9  /      

PL/SQL procedure successfully completed

SQL> /* Fails with call to dynamic cursor */
SQL> DECLARE
  2     l XMLTYPE;
  3  BEGIN
  4     FOR i IN 1 .. 1e4 LOOP
  5        SELECT xmltype.createXML(ret_cursor) INTO l FROM dual;
  6     END LOOP;
  7  END;
  8  /
DECLARE
*
ERROR at line 1:
ORA-01000: maximum open cursors exceeded
ORA-06512: at "APPS.RET_CURSOR", line 4
ORA-06512: at line 5 
```

您应该能够使用包装函数来防止 ORA-01000 发生（在 9iR2、11gR2 上测试）：

```
SQL> CREATE OR REPLACE FUNCTION wrap_xml(p SYS_REFCURSOR) RETURN XMLTYPE IS
  2     l XMLTYPE;
  3  BEGIN
  4     l := xmltype.CreateXML(p);
  5     IF p%ISOPEN THEN
  6        CLOSE p;
  7     END IF;
  8     RETURN l;
  9  END;
 10  /

Function created

SQL> DECLARE
  2     l XMLTYPE;
  3  BEGIN
  4     FOR i IN 1 .. 1e4 LOOP
  5        l := wrap_xml(ret_cursor); -- a SELECT FROM dual will still fail here
  6                                   -- on 9i but not on 11g 
  7     END LOOP;
  8  END;
  9  /

PL/SQL procedure successfully completed 
```

# android - 如何为 android 实现 mbtowc？（或者，理想情况下，如何不这样做？）

> ID：15479136
> 
> 赞同：4
> 
> 时间：2013-03-18T14:23:22.283
> 
> 标签：android, c, boost, android-ndk, arm

我正在尝试构建一个使用 boost 序列化的 Android 应用程序。我已经使用 arm 4.7 的 g++ 构建了针对 NDK r8d 的库。但是，当我使用 ndk-build 将本机代码编译到库中时，当编译器尝试在 boost 中链接存档标头中的一些代码时，我得到“未定义的对 'mbtowc' 的引用”和“未定义的对 'wctomb' 的引用” .

关于 NDK 是否支持这些功能，我似乎无法得到明确的答案。

根据 Boost 邮件列表，虽然它实现了这些功能，但 CrystaX NDK 不是一个选项，因为它已知在与 Boost 一起使用时会崩溃。

那么，如果 NDK 确实以某种方式实现了这些功能，为什么 NDK-build 无法链接它们呢？我可以在 NDK 的 cstdlib 中找到对它们的引用，并且我相信可能需要设置一个标志，但我不确定如何或在哪里设置。

如果没有实现它们，是否有人对我如何自己编写它们有任何建议？我大致知道 mbtowc 及其补充应该做什么，但没有太多编写低级 C 的经验，也没有太多的 Android / ARM 架构知识，我真的可以使用一些建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-03T10:41:17.593

```
#ifdef ANDROID
int wctomb(char *s, wchar_t wc) { return wcrtomb(s,wc,NULL); }
int mbtowc(wchar_t *pwc, const char *s, size_t n) { return mbrtowc(pwc, s, n, NULL); }
#endif 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:27:09.817

发现！是的，boost 可以通过将预处理器定义添加到 boost 构建脚本来构建它而无需 wchar 支持。在我尝试将对象序列化到文件的代码行中使用它们构建时，Boost 仍然崩溃。（崩溃是 0x00000000 处的通用段错误，我无法获得任何有用的信息）。

所以，我没有费心写 wctomb 或它的逆。我不需要，是我问题的答案，尽管最终问题的答案并不重要。

进一步澄清：不要费心去做我一直想做的事情。如果你一直在使用 Boost 的序列化库，并希望你的代码在 android ndk r8d 或更早版本上运行，那就放弃吧。自己编写一个序列化程序，因为没有关于如何使序列化工作的有用信息。希望 ndk 的未来版本可以解决这个问题，但现在我别无选择，只能重写所有内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-12T17:26:38.063

我有同样的问题。我正在为使用 boost::serialization 的代码创建一个 android 端口。

由于缺少`mbtowc`/ `wctomb`(mb: multi-byte (char), wc: (wide-char)' 的实现，我的代码无法编译

据我所知，这些函数的实现可能会很棘手，因为 android 的宽字符是单字节字符而不是真正的宽字符。

但是，当我编译 boost 时`-DBOOST_NO_STD_WSTRING`链接错误消失了，我可以在 android 上使用`boost::archive::text_iarchive`& 。`boost::archive::text_oarchive`

我现在可以毫无问题地序列化 STL 数字和 std::strings 容器。

我按照此链接上的建议为 android 编译了 boost：http: [//www.codexperiments.com/android/2011/05/tips-tricks-building-boost-with-ndk-r5/](http://www.codexperiments.com/android/2011/05/tips-tricks-building-boost-with-ndk-r5/)

我正在使用 boost-1.55_0 和 NDK r9c。

我 `<compileflags>-DBOOST_NO_STD_WSTRING`在构建命令中添加了以下内容，这样它就可以构建没有宽字符支持的序列化库。

# javascript - Javascript/Jquery if 语句和 hasClass

> ID：15479140
> 
> 赞同：2
> 
> 时间：2013-03-18T14:23:31.260
> 
> 标签：javascript, jquery

我有一堆不透明度为 80% 的图像。
当我将鼠标悬停在图像上时，我使用`mouseenter`和`fadeTo('fast' 1);`将不透明度设为 100%。
当我将鼠标悬停在图像之外时，我使用`mouseleave`和`fadeTo('fast' 0.8);`将不透明度恢复到 80%。

但是，如果我悬停的图像有一个特定的类，我希望不透明度保持 100%，而不是在鼠标离开时变为 80%。

我试过但失败了，希望大家能帮帮我！

```
$(document).ready(function(){

var subject = 'null';

$('.subject').mouseenter(function(){
    if ($(this).hasClass(subject) == false) {
        $(this).find('.info').fadeTo('fast', 1);
        $(this).find('img').fadeTo('fast', 1);
    }
});
$('.subject').mouseleave(function(){
    if ($(this).hasClass(subject) == false {
        $(this).find('.info').fadeTo('fast', 0);
        $(this).find('img').fadeTo('fast', 0.8);
    }
});

$('.english-link').click(function(){
    $('.english').find('.info').fadeTo('fast', 1);
    $('.english').find('img').fadeTo('fast', 1);
    var subject = 'english';
});
$('.math-link').click(function(){
    $('.math').find('.info').fadeTo('fast', 1);
    $('.math').find('img').fadeTo('fast', 1);
    var subject = 'math';
});
$('.electives-link').click(function(){
    $('.electives').find('.info').fadeTo('fast', 1);
    $('.electives').find('img').fadeTo('fast', 1);
    var subject = 'electives';
}); 
```

});

[http://jsfiddle.net/JDfpc/](http://jsfiddle.net/JDfpc/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:27:20.147

您可以`:not`在淡出图像的函数上使用 jQuery 选择器，例如`$('.math:not(.otherclass)').doSomething()`

[http://api.jquery.com/not-selector/](http://api.jquery.com/not-selector/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:35:29.997

```
$(#subject).hover(function () {
      (this).fadeTo('fast', 1)
 }, function () {
      if(this).hasClass("subject") {
           (this).css('opacity','1');
      }
      else if {
           (this).fadeTo('fast',.8)
      }
    }
 }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:33:16.517

当您计划淡入`subject`var 的功能时，您必须使其全局化。

目前，您`subject`每次都在重新声明 with ，因此在您的and`var`范围内， the没有改变。`mouseenter``mouseleave``subject`

```
var globals = {};            //Your global array

$(document).ready(function(){

   globals.subject = 'null'; //Subject is accessible everywhere in your code now

   ...

    $('.english-link').click(function(){
        $('.english').find('.info').fadeTo('fast', 1);
        $('.english').find('img').fadeTo('fast', 1);
        globals.subject = 'english';
    });
} 
```

请参阅[更新的小提琴](http://jsfiddle.net/bigood/JDfpc/1/)以获取工作示例。

*注意：您也可以使用 HTML 5`localStorage`来存储主题之类的`localStorage.subject = 'english'`。*

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-03-18T14:26:44.347

You have syntax error,try with this

```
$('.subject').mouseenter(function(){
if (($(this).hasClass('subject')) == false) {
    $(this).find('.info').fadeTo('fast', 1);
    $(this).find('img').fadeTo('fast', 1);
  }
}); 
```

[check here](http://api.jquery.com/hasClass/)

# selenium - WebDriver 在桌面浏览器中模拟触摸事件

> ID：15479143
> 
> 赞同：2
> 
> 时间：2013-03-18T14:23:45.497
> 
> 标签：selenium, webdriver, selenium-chromedriver, touch-event

我正在尝试使用 Chrome 和 Firefox 浏览器模拟一些触摸事件，例如交换、点击基于 Web 的应用程序。我尝试使用[Actions](https://code.google.com/p/selenium/wiki/AdvancedUserInteractions)、[Hummber.js](http://eightmedia.github.com/hammer.js/)、 " [Yahoo](http://yui.yahooapis.com/3.8.1/build/yui/) " lib(YUI) 模拟触摸事件，但它们都不适合我。

在桌面浏览器中使用 webdriver 模拟触摸事件的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-06T11:32:45.380

我正在使用[幻肢](http://viewinglens.com/phantom-limb/)将鼠标事件转换为触摸事件。它对我有用。我认为在 Chrome 中模拟触摸事件的最佳方法是使用内置的模拟机制。就像在[这篇](https://developers.google.com/chrome-developer-tools/docs/mobile-emulation?hl=ru)文章中一样。不幸的是，我找不到通过 webdriver 打开此功能的方法。找到了 Chrome 选项，如“启用触摸事件”、“触摸事件”等。但它没有用。

UP：Chrome 驱动程序允许在移动设备上模拟 chrome 浏览器。阅读这篇[文章](https://sites.google.com/a/chromium.org/chromedriver/mobile-emulation)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T10:01:56.883

使用 jQueryMobile 非常简单，我执行一些 Javascript 来触发来自 jQueryMobile 的相应触摸事件。

```
((JavascriptExecutor)driver).executeScript("window.jQuery('#myId').trigger('swiperight')"); 
```

也许这有帮助。

# java - java - 如何解析JSON数组并存储在java中的arraylist中？

> ID：15479145
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:23:52.173
> 
> 标签：java, json

我想解析以下 JSON 数组并存储在数组列表中。

```
[{"type":{"Male":"1","Female":"2"}}] 
```

我试过以下代码

```
JSONObject object=getJSONObject(0).getString("type"); 
```

结果：

```
{"Male":"1","Female":"2"} 
```

这里类型是键，其他是值。

它带有逗号，引号。如何存储这些值`ArrayList`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:31:13.503

像下面这样的东西应该可以为您的 JSON 解决问题。看到您的 JSON，我在任何地方都看不到数组。

```
String resultJson; // Assuming this has the JSON given in the question.
JSONObject object = new JSONObject(resultJson);
JSONObject type = object.getJSONObject("type"); //Get the type object.

HashMap<String, Integer> map = new HashMap<String, Integer>(); //Creating the Map

String male = type.getString("male"); //Get the male value
String female = type.getString("female"); //Get the female value

map.put("male", Integer.parseInt(male));
map.put("female", Integer.parseInt(female)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:28:58.587

像这样的东西？

```
ArrayList<String> list = new ArrayList<String>();     

if (jsonArray != null) {          //In this case jsonArray is your JSON array
   int len = jsonArray.length();
   for (int i=0;i<len;i++){ 
       list.add(jsonArray.get(i).toString());
   } 
} 
```

# ruby - 我如何知道我需要明确要求哪些 Ruby 标准库？

> ID：15479147
> 
> 赞同：3
> 
> 时间：2013-03-18T14:23:53.167
> 
> 标签：ruby

我一直在查看 1.9.3 的[Ruby 标准库文档](http://www.ruby-doc.org/stdlib-1.9.3/)。我想知道如何找出我需要明确要求的库。

例如，有人告诉我需要显式地要求`json`库，但不需要`rubygems`，尽管它们都出现在标准库列表中。

是否有其他地方可以查找有关要求的信息，甚至可以运行 pry/irb 命令来查看已经“需要”的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T14:31:13.203

如果您想使用它，则必须要求/加载每个库。

性能方面，`require`很聪明，如果库已经加载，则不会加载它们。

但是，如果您想检查是否需要某个库，您应该查看它定义的顶级命名空间，并检查它是否在您当前的范围内定义。例如打开一个 IRB 会话并执行以下操作：

```
defined? JSON  # => nil (it's not loaded)
require 'json' # => true (load it)
defined? JSON  # => "constant" (it's loaded)
require 'json' # => false (it's already loaded, so it's not loaded it again) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:30:46.073

无论如何，要求东西通常没有什么坏处。如果它们已经被加载，一般来说，该`require`语句无效。

一些核心库组件要么自动加载，要么通过引用其顶级符号自动加载。此列表因 Ruby 的一个版本而异。

# c# - 代码优先级联删除不使用 Fluent API

> ID：15479150
> 
> 赞同：1
> 
> 时间：2013-03-18T14:23:57.900
> 
> 标签：c#, asp.net-mvc, entity-framework

我有这两个实体

```
class AUT
{
    public Guid ID { get; set; }
    public string Name { get; set; }

    public Engineer Engineer { get; set; }
}

class InstallationSetup
{
    public virtual AUT ApplicationUnderTesting { get; set; }

    public Guid ID { get; set; }
    // Loads of properties etc
}

class Engineer
{
    public Guid ID { get; set; }
    public string Name { get; set; }
} 
```

使用代码优先和一些数据注释，这些实体创建了一个数据库。我正在使用 EF 5，当我删除一个应用程序时，它应该只删除它自己和任何引用它的 InstallationSetup。它不应该删除工程师。但是，当我尝试删除它时，出现错误：

> DELETE 语句与 REFERENCE 约束“FK_dbo.InstallationSetups_dbo.AUTs_ApplicationUnderTesting_ID”冲突。冲突发生在数据库“UXLab”、表“dbo.InstallationSetups”、列“ApplicationUnderTesting_ID”中。该语句已终止。

所以，我猜是因为有另一个表的条目依赖于 AUT 存在，通过删除 AUT，您将留下带有空外键的 InstallationSetup，因此是一个损坏的行。

我应该能够（最好不使用 Fluent API）告诉实体框架任何引用 AUT 的东西也应该被删除？这就是我想要实现的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:46:42.170

您只需添加与生成的外键列类似的列，当实体框架生成此 FK 列时，它会将级联删除设置为禁用。

```
class AUT
{
   public Guid ID { get; set; }
   public string Name { get; set; }

  public Engineer Engineer { get; set; }
}

class InstallationSetup
{
    public virtual AUT ApplicationUnderTesting { get; set; }
    public int ApplicationUnderTestingId {get; set;}   <--- Add this.

   public Guid ID { get; set; }
// Loads of properties etc
}

class Engineer
{
 public Guid ID { get; set; }
 public string Name { get; set; }
} 
```

如果您再次生成数据库，您会发现有些事情发生了变化。自动生成的 AUTs_ApplicationUnderTesting_ID 列不再存在，ApplicationUnderTestingId 列现在用于您的外键关系。

EF 现在将自动启用级联删除。

# php - 关于从android将图像文件上传到服务器的问题

> ID：15479155
> 
> 赞同：0
> 
> 时间：2013-03-18T14:24:15.497
> 
> 标签：php, android

我创建了一个应用程序，使用它可以将存储在手机图库中的图像上传到服务器。我使用的服务器端语言是 PHP。我面临的问题有点奇怪。我可以上传使用手机相机拍摄的小于 2 MB 的照片。但是某些照片没有上传。以下是未上传照片的详细信息：

**第一张照片：**

标题：2013-03-15 09.17.22.jpg

类型：JPEG

大小：2645Kb

**第二张照片：**

标题：2013-03-12 11.48.04.jpg

类型：JPEG

大小：2781Kb

在上传上述照片不成功后，我尝试上传另一张照片，它成功了。以下是我能够上传的照片的详细信息：

标题：2013-03-14 10.20.16.jpg

类型：JPEG

大小：1238Kb

然后尝试使用少于 2000 kb 的其他几张照片，所有这些照片都上传了。

然后我从网上下载了一张 6 MB 的 jpg 图片并尝试上传。莫名其妙就上传了。现在我完全糊涂了，真正的问题是什么。最后我得出一个结论，问题只在于那些使用我手机的相机拍摄的并且大小超过 2000 kb 的照片。

**这是我用来将照片上传到服务器的 android 函数：**

```
public String doFileUpload(String selectedPath,String page)
        {
            String response=null;
            HttpURLConnection conn = null;
            DataOutputStream dos = null;
            DataInputStream inStream = null;
            String lineEnd = "\r\n";
            String twoHyphens = "--";
            String boundary =  "*****";
            int bytesRead, bytesAvailable, bufferSize;
            byte[] buffer;
            int maxBufferSize = 1*1024*1024;
            String urlString = Connector.URL+page;
            try
            {
                //------------------ CLIENT REQUEST
                FileInputStream fileInputStream = new FileInputStream(new File(selectedPath) );
                // open a URL connection to the Servlet
                URL url = new URL(urlString);
                // Open a HTTP connection to the URL
                conn = (HttpURLConnection) url.openConnection();
                // Allow Inputs
                conn.setDoInput(true);
                // Allow Outputs
                conn.setDoOutput(true);
                // Don't use a cached copy.
                conn.setUseCaches(false);
                // Use a post method.
                conn.setRequestMethod("POST");
                conn.setRequestProperty("Connection", "Keep-Alive");
                conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);
                dos = new DataOutputStream( conn.getOutputStream() );
                dos.writeBytes(twoHyphens + boundary + lineEnd);
                dos.writeBytes("Content-Disposition: form-data;name=uploadedfile;filename=" + selectedPath + "" + lineEnd);

                dos.writeBytes(lineEnd);
                // create a buffer of maximum size
                bytesAvailable = fileInputStream.available();
                bufferSize = Math.min(bytesAvailable, maxBufferSize);
                buffer = new byte[bufferSize];
                // read file and write it into form...
                bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                while (bytesRead > 0)
                {
                    dos.write(buffer, 0, bufferSize);
                    bytesAvailable = fileInputStream.available();
                    bufferSize = Math.min(bytesAvailable, maxBufferSize);
                    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
                }
                // send multipart form data necesssary after file data...
                dos.writeBytes(lineEnd);
                dos.writeBytes(twoHyphens + boundary + twoHyphens + lineEnd);
                // close streams
                fileInputStream.close();
                dos.flush();
                dos.close();
            }
            catch (MalformedURLException ex)
            {
                Log.e("Debug", "error: " + ex.getMessage(), ex);
            }
            catch (IOException ioe)
            {
                Log.e("Debug", "error: " + ioe.getMessage(), ioe);
            }
            //------------------ read the SERVER RESPONSE
            try 
            {
              inStream = new DataInputStream ( conn.getInputStream() );
              response = inStream.readLine();
              inStream.close();

            }
            catch (IOException ioex){
                Log.e("Debug", "error: " + ioex.getMessage(), ioex);
            }
            return response;
        } 
```

这是我用来上传图片的页面的 PHP 代码：

```
<?php
$tt=$_GET["id"];
// Where the file is going to be placed
$target_path = "uploads/";

/* Add the original filename to our target path.
Result is "uploads/filename.extension" */
$target_path = $target_path . basename( $_FILES['uploadedfile']['name']);

if(move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $target_path)) 
{   
    include("../../classes/Registration.php");
    $Obj=new register();
    $Obj->insert_photo_data($tt,basename( $_FILES['uploadedfile']['name']));
}
else
{
    echo '[{"flag":"0"}]';
}
?> 
```

当图像上传问题发生时，我得到的是：

```
[{"flag":"0"}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:00:05.463

改变。dos.write(buffer, 0, bufferSize); 到 dos.write(buffer, 0, bytesRead)。如果图片没有上传，什么会到达服务器？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T07:22:01.633

我找到了解决方案。这个问题与 wamp 有关。我打开了 php.ini 并更改了行

```
upload_max_filesize = 2M 
```

至

```
upload_max_filesize = 10M 
```

现在图片上传没有任何问题。

# php - 如何检查 DOM 元素是否包含字符串

> ID：15479156
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:24:18.580
> 
> 标签：php, javascript, jquery

有没有办法查看字符串是否包含在元素中？具体是链接？

例如：

```
<a href="#">Some text foo_string more text</a> 
```

将返回“a”作为元素。jQuery 或 PHP - 没关系。谢谢！

**澄清：**

我想知道的是包含 foo_string 的元素。NOT 元素是否包含字符串。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:27:16.203

**检查元素是否包含字符串**

要检查一个元素是否符合这个标准，请尝试使用 jQuery[`contains`](http://api.jquery.com/contains-selector/)选择器：

```
if ($('#some-element').is(':contains("foo_string")')) {
    // Do something...
} 
```

请注意，此选择器区分大小写。

* * *

**选择包含字符串的元素**

要选择符合此标准的元素，只需将选择器作为参数传递给主 jQuery 函数，就像使用任何其他选择器一样：

```
var element_with_foo = $(':contains("foo_string")'); 
```

请记住，建议限制选择的范围，否则它将适用于整个 DOM。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:25:31.147

您可以使用 innerText 或 textContent DOM 属性和 JavaScript 的正则表达式方法。

例如

```
var el = document.getElementById('my-link');
var txt = el.innerText;
return txt.match(/str/); 
```

在这里使用 jQuery 更简单，但这是一个纯 JavaScript 解决方案。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T14:26:10.707

using jquery

```
if($('a').text().length < 1 ){
   alert("empty")
}else{
  alert("not");
} 
```

**updated**

```
$(":contains('Some text foo_string')"); //this get all the element with the text in it 
```

u can use `.prop('tagName')` to get the tag name..

[fiddle here](http://jsfiddle.net/bipen/C96r8/) [updated fiddle here](http://jsfiddle.net/bipen/C96r8/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T14:26:03.700

尝试这个...

`if ($('a').html().indexOf('foo_string') != -1) // doSomething`

# java - Log4j PatternLayout - 将值添加到 %c

> ID：15479167
> 
> 赞同：1
> 
> 时间：2013-03-18T14:24:51.397
> 
> 标签：java, log4j, pattern-layout

我的 log4j.xml 文件中的当前转换模式如下：

```
<param name="ConversionPattern" value="%d (%F:%L) %-5p %c - %m%n"/> 
```

我有一个简单的要求，即在 %c（即 'ERROR'）前面加上“运行时”这个词。无论如何使用模式布局，我可以简单地将这个词添加到模式中，以便将其打印到日志文件中？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:32:56.223

只需将字符串添加到模式中：

`%d (%F:%L) %-5p Runtime%c - %m%n`

# javascript - 让jQuery忽略事件中的孩子

> ID：15479171
> 
> 赞同：0
> 
> 时间：2013-03-18T14:24:57.617
> 
> 标签：javascript, jquery

如果我有以下标记：

```
<ul id="level1">
    <li>
        <a href="#">Test</a>
        <ul id="level2">
            <li>
                <a href="#">Test</a>
            </li>
        </ul>
    </li>
</ul> 
```

基本上，如果我将鼠标悬停在 1 级上，我需要它来做某事。但是，当我将鼠标悬停在 level2 上时，它会触发它，因为它在 level1 内。如果我将鼠标悬停在 level1 上，有没有办法做到这一点。

我的意思的一个例子：

[http://scottymeuk.in/Netr](http://scottymeuk.in/Netr)

左边的盒子是右边盒子的父级。但是当悬停在左框（父）而不是右框（子）上时，我需要发生一些事情。

谢谢你。

抱歉，如果我未能很好地解释我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:28:05.203

一种解决方案是打电话`event.stopPropagation`给孩子：

```
$("#parent").on("someevent", function(){
  // do stuff
});

$("#child").on("someevent", function(e){
  e.stopPropagation(); // prevent the event from bubbling to the parent.
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:28:37.437

请参阅事件对象文档...

[http://api.jquery.com/category/event-object/](http://api.jquery.com/category/event-object/)

`event.stopPropagation();`

是你需要的

```
$('#level2').hover)function(e) {
    e.stopPropagation(); // stops events from triggering in children
},function (e) {} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:55:56.347

`$('level1').hover(function(){ if(!IsMouseOver($(this).find(level2)){ do what you want it to do }; });`

我还没有测试它，但你明白了逻辑。鼠标在level1上吗？是的。如果它超过 1 级并且它没有超过 2 级做我想要的

# c# - 如何重载具有不同输入参数的两个方法

> ID：15479174
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:25:02.133
> 
> 标签：c#, refactoring, overriding, overloading

我有这两个功能

```
private void calcResults()
{
   MakePath(id, results, _resultCount);
   MakePath(id, "XYZ", _resultSICount)
}

private string MakePath(string subFolder, object obj, int index)
{
    string dir = System.IO.Path.Combine(_outputDir, subFolder);
    string fileName = string.Format("{0} {1} {2}.xml",
           obj.GetType().Name, _dateTimeSource.Now.ToString(DATE_FORMAT), index.ToString());
    return System.IO.Path.Combine(dir, fileName);
}

private string MakePath(string subFolder, string tempFileName, int index)
{
    string dir = System.IO.Path.Combine(_outputDir, subFolder);
    string fileName = string.Format("{0} {1} {2}.xml",
           tempFileName, _dateTimeSource.Now.ToString(DATE_FORMAT), index.ToString());
    return System.IO.Path.Combine(dir, fileName);
} 
```

请有人帮忙。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T14:40:25.597

如果我正确理解你的问题，你的意思是你想重载方法以避免代码重复......这就是我的处理方式。

```
 private void calcResults()
    {
       MakePath(id, results.GetType(), _resultCount);
       MakePath(id, "XYZ", _resultSICount)
    }

    private string MakePath(string subFolder, Type type, int index)
    {
        return MakePath(subFolder, type.Name, index);
    }

    private string MakePath(string subFolder, string tempFileName, int index)
    {
        string dir = System.IO.Path.Combine(_outputDir, subFolder);
        string fileName = string.Format("{0} {1} {2}.xml",
               tempFileName, _dateTimeSource.Now.ToString(DATE_FORMAT), index.ToString());
        return System.IO.Path.Combine(dir, fileName);
    } 
```

我会避免使用 object 作为您的第二个参数的类型，因为在这种情况下似乎模棱两可，使用 Type 表示参数的预期用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:28:34.297

你可以考虑这样的事情：

```
 private string MakePath(string subFolder, object obj, int index)
    {        
        //tempFileName here is created beased on the TYPE of the object passed
        string tempFileName = obj.GetType().Name;
        return MakePath(subFolder,tempFileName , index); 

    }

    private string MakePath(string subFolder, string tempFileName, int index)
    {
        //combine directory path
        string dir = System.IO.Path.Combine(_outputDir, subFolder);

        //compute final file name based on the several 
        //parameters and tempFileName parameter
        string fileName = string.Format("{0} {1} {2}.xml",
            tempFileName, _dateTimeSource.Now.ToString(DATE_FORMAT), index.ToString());

        return System.IO.Path.Combine(dir, fileName);
    } 
```

按照所呈现代码的逻辑，如果我错了，请纠正我，这两种方法之间的唯一区别是，首先`tempFileName`是基于*类型 name*，而在第二个中，它只是*调用者*传递的第二个参数.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:29:03.777

这里的问题是字符串也是一个对象，所以编译器无法选择使用什么方法。您可以更改参数顺序，或重命名其中一种方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T14:29:29.443

```
private string MakePath(string subFolder, object obj, int index)
{
    if(obj.GetType()==typeof(string))
    {
        //copy the strong typed version to here;
        return;
    }
    string dir = System.IO.Path.Combine(_outputDir, subFolder);
    string fileName = string.Format("{0} {1} {2}.xml",
        obj.GetType().Name, _dateTimeSource.Now.ToString(DATE_FORMAT), index.ToString());
    return System.IO.Path.Combine(dir, fileName);
} 
```

然后，您可以使用一项功能完成两项工作。这会吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T14:35:21.193

您可以将“结果”值转换为对象：

```
class Program
{
    static void Main(string[] args)
    {

        var ret1 = GetValue("String");
        Console.WriteLine(ret1);
        var ret2 = GetValue((object)"test");
        Console.WriteLine(ret2);

        Console.ReadKey();
    }

    private static object GetValue(string p0)
    {
        return p0;
    }

    private static object GetValue(object p0)
    {
        return "Object";
    }
} 
```

对 GetValue 的第二次调用被路由到带有对象参数的那个。

# c# - Windows Phone 联系人和修改日期

> ID：15479178
> 
> 赞同：1
> 
> 时间：2013-03-18T14:25:10.160
> 
> 标签：c#, windows-phone-7, contacts

有什么办法可以知道联系人的最后修改日期或添加时间？因为在我的应用程序中，我需要例如同步并获取所有新添加的联系人等。联系人或至少帐户是否没有任何唯一标识符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:27:58.613

没有唯一标识符，也没有修改日期或创建日期的属性。

我怀疑其目的是通过阻止构建跟踪联系信息的应用程序来尝试保护用户隐私。

最好的办法是使用不太可能频繁更改的字段组合（即姓名和出生日期），并将这些字段用作识别因素。然后，您可以根据 ID 存储所有信息的哈希值，如果将来检查时哈希值不匹配，您就会知道某些内容发生了变化。

# ios - 设置http请求消息头ios

> ID：15479181
> 
> 赞同：0
> 
> 时间：2013-03-18T14:25:19.863
> 
> 标签：ios, wcf, nsmutableurlrequest

我的 .net 应用程序中有以下代码。

```
MessageHeader<string> mhg = new MessageHeader<string>(SomeTicket);
     MessageHeader header = mhg.GetUntypedHeader("MessageName", "Namespace");
     OperationContext.Current.OutgoingMessageHeaders.Add(header); 
```

所以我想通过使用 NSMutableUrlRequest 类从 ios 应用程序中放置相同的消息头，如何从 ios 实现相同的功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:07:47.477

您可以使用以下`NSMutableURLRequest`类的实例方法。如果您使用第一个，则必须传递带有要在请求标头中发送的键值对的字典。如果使用第二个，则可以直接一个一个添加标题。

```
- (void)setAllHTTPHeaderFields:(NSDictionary *)headerFields

- (void)addValue:(NSString *)value forHTTPHeaderField:(NSString *)field 
```

有关更多详细信息，请阅读[文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSMutableURLRequest_Class/Reference/Reference.html)

# sockets - 使用 sierra 无线调制解调器设置 TCP 客户端连接时是否需要用户名和密码？

> ID：15479182
> 
> 赞同：0
> 
> 时间：2013-03-18T14:25:25.027
> 
> 标签：sockets, tcp, gprs

尝试与 Sierra Wireless 调制解调器建立 GPRS 连接时，我使用以下命令序列： at+wipcfg=1

at+wipbr=1,6

at+wipbr=2,6,11,"APN 名称"

at+wipbr=2,6,0,"用户名"

at+wipbr=2,6,1,"密码"

at+wipbr=4,6,0

at+wipcreate=2,1,"IP 地址",80

at+wipdata=2,1,1

我的问题是我不使用用户名或密码，因为它们是在我购买当前使用的 sim 卡时给我的。我需要向移动公司询问这些吗？还是在通信链接的服务器端设置了用户名和密码字段？我尝试忽略它们，但在使用 at+wipbr=4,6,0 时出现错误，或者有时我只得到调制解调器的回声（没有 OK，没有错误）。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-11T17:43:10.280

在 GPRS 的情况下，用户名/密码用于通过运营商网络内部的 RADIUS 进行身份验证（在 GGSN 节点上）。是否应该使用它取决于移动运营商。如今，大多数运营商都不关心用户名和密码字段。

# gwt - 使用 GWTP 处理常见呼叫

> ID：15479183
> 
> 赞同：0
> 
> 时间：2013-03-18T14:25:25.200
> 
> 标签：gwt, gwt-platform, gwtp, gwt-dispatch

我有一个演示者，它调用 Handler 并从服务器获取数据 另一个小部件需要相同的数据，它是现有视图的微型版本，但这将一直显示在应用程序中。

这里我的共同点是调用处理程序、相同的处理程序和操作对象。

什么是最好的设计方法。

我可能的解决方案：1）编写一个可以访问调度程序对象的通用类（通过Ginjector注入），使用方法获取数据。但是根据 MVP 架构，调度程序的使用仅限于演示者，但这是非演示者类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:29:17.500

If you are using event bus, your presenter(which makes calls to Handler) can fire events with new data and your miniature widget can register with event bus to receive them. This way only one presenter would call to server and anything on client can be notified using events.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-19T09:09:33.833

AFAIK 没有任何内容`MVP`表明一切都必须在`Presenter`. `Presenters`将多个通用的逻辑封装在一个公共类中 是有意义的。

`MVP`与其说是一成不变的规则，不如说是一种模式。因此，当它有意义时，您可以稍微偏离模式。

恕我直言，通用类是正确的方法。
使用通用类来处理对后端的请求还可以轻松实现缓存和身份验证等。

有两种方法可以在你`Presenters`的类和普通类之间进行通信：

1.  将公共类的单例实例注入到所有`Presenters`需要数据的地方。您可以从演示者调用公共类的 a 方法并注册回调。
2.  将全局注入公共类并从相应的类中`EventBus`触发`Event`（即）并在公共类中处理它。当从后端接收到数据时，您可以从公共类中触发另一个（即）并在相应的.`LoadDataEvent``Presenters``Event``Event``DataLoadedEvent``Presenters`

**解决方案 1** 可能更容易实现，但是您在公共类和公共类之间存在一些耦合`Presenter`（如果您使用依赖注入，这还不错）。

**解决方案 2**需要更多代码（您必须定义事件），但提供了很大的灵活性和解耦。例如，如果您创建一个`Presenter`对数据也感兴趣的新对象，您只需`DataLoadedEvent`在 Presenter 中注册一个 Handler 即可。

# c# - 使用 Open XML 和 C# 在 Excel 中创建数据透视表

> ID：15479192
> 
> 赞同：0
> 
> 时间：2013-03-18T14:25:54.890
> 
> 标签：c#, openxml, pivot-table

我曾经将数据存储到 DataTable 中，并希望使用这些数据创建一个数据透视表。

我浏览了许多帖子，还阅读了 Microsoft 关于通过 Open XML 创建数据透视表的文档，但无法获得解决方案。任何人都可以发布一些代码来创建数据透视表。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:18:40.357

安装[Open XML SDK](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&sqi=2&ved=0CDEQFjAA&url=http://www.microsoft.com/en-us/download/details.aspx?id=5124&ei=LRBIUcW2KMebO86ogcgK&usg=AFQjCNFVh7-OHeQJmw_KdtM4Cws37jGYbw&sig2=-Aa_eTuVdbI-uknFVWTO_Q&bvm=bv.43828540,d.d2k)，它包含一个名为 Open XML SDK Productivity Tool 的工具。

如何使用它：

打开 Excel 并创建一个包含数据透视表的文件。保存并使用生产力工具打开它。在此工具中有一个“反映代码”选项，这样您就可以看到如何使用 C# 代码创建相同的 Excel。

# android - 启用 USB 共享后，我可以启动服务吗？

> ID：15479193
> 
> 赞同：0
> 
> 时间：2013-03-18T14:26:00.307
> 
> 标签：android, tethering

我正在编写一个内部企业应用程序，需要在用户启动 USB 共享时启动后台服务。

我一直无法找到一个意图来倾听它告诉我 USB 网络共享已经开始。

我曾尝试收听 ConnectivityManager.CONNECTIVITY_ACTION，但似乎也没有要求 USB 网络共享。

我可以通过广播来启动我的服务，还是只需要让用户在启动我的应用程序（启动服务）之前开始网络共享？

# php - 将纯文本从 textarea 正确存储到 MySQL 数据库

> ID：15479196
> 
> 赞同：0
> 
> 时间：2013-03-18T14:26:09.133
> 
> 标签：php, html, mysql, textarea

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:28:13.940

如果您确定传递给数据库连接的数据是 unicode（并且没有被转义等），那么您的问题可能出在数据库驱动程序本身。

确保将其设置为`UTF-8`。

### 清单

1.  确保输入的数据未转义（撇号、引号等除外）
2.  确保数据库驱动程序设置为以`UTF-8`编码方式发送数据（例如，对于 PDO: `$dbHandle = new PDO("mysql:host=$dbHost;dbname=$dbName;charset=utf-8", $dbUser, $dbPass);`。请注意该`charset`部分。
3.  确保列排序规则设置为`UTF-8`兼容的编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:32:42.483

使用：**html_entity_decode**

```
<textarea class="textarea"><?php echo html_entity_decode($text_to_show); ?></textarea> 
```

或者可能：

```
<textarea class="textarea"><?php echo html_entity_decode($text_to_show, ENT_COMPAT, 'UTF-8'); ?></textarea> 
```

确保有一些 utf8 数据库，而不是默认的 latin1。

此外，如果您使用的是 html5 doctype，请不要忘记输入：

```
<meta charset="utf-8"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:33:37.120

在你的服务器上运行这个：

```
SHOW VARIABLES LIKE 'character_set%'; 
```

查看您的服务器配置为什么字符集，如果需要将其更改为`UTF-8`

看一看：[配置 MySQL 以使用 UTF-8](http://cameronyule.com/2008/07/configuring-mysql-to-use-utf-8/)

# .net - Is there a convention for project-local NuGet Repositories?

> ID：15479198
> 
> 赞同：3
> 
> 时间：2013-03-18T14:26:12.817
> 
> 标签：.net, nuget, dependency-management

I've nearly finished migrating a large solution to use NuGet for dependencies. Prior to this, the project simply had a *Lib* directory with all binary dependencies in sub-directories within it. There are, however, a few dependencies that aren't available in the official NuGet feed. Therefore, I have a few options:

1.  Add them to the official NuGet feed.
2.  Keep the existing *Lib* directory with any non-NuGet binaries within it.
3.  Create a project-local NuGet feed that contains only those packages that aren't available in the official feed.

I don't like #1 because it implies I'll be taking on responsibility for keeping the packages up-to-date. I don't like #2 because it's messy having two mechanisms for managing dependencies within the one solution.

Therefore, I'm leaning towards #3, but cannot find any documentation on conventions. I understand how to create the local feed, how to tell Visual Studio about it et cetera. What I can't find is whether there is a convention around the naming of the directory containing the local feed and anything else this approach may entail. Does anyone know what the standard practice is?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T05:57:38.517

您缺少的是选项 #4 - 设置私有 NuGet 存储库。这是解决此问题的标准做法。

有几个可用的私有 NuGet 服务器，包括我公司 ( [Inedo](http://inedo.com) ) 的一个：

*   Nuget.Server - 免费/开源之一；非常有限
*   ProGet - 用于防火墙后面；提供免费版本
*   MyGet - 托管服务；提供免费版本
*   Artifactory - 多平台（Java 等）

“依赖管理器”（即NuGet）的全部意义在于管理项目之间的依赖关系，因此拥有“项目本地存储库”实际上没有意义——这实际上只是一个非常复杂的“lib”文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T07:03:55.830

项目本地 NuGet 提要...相对于您的项目，您希望将该提要放在哪里？你想如何与你的队友分享这个“本地”信息流？只是想知道，因为 NuGet 已经安装了所有项目本地包 ($(SolutionDir)\Packages)，所以您也可以禁用包还原并将包提交到 VCS？

可能有另一种选择：您是否已经尝试[过 MyGet.org](http://www.myget.org)？我们为您提供托管在 Windows Azure 上的 NuGet 即服务：注册、创建提要（或更多）、可选择保护提要、邀请其他人并开始使用。以下是在默认 NuGet 服务器功能之上提供的[功能列表。](http://www.myget.org/Home/Features)MyGet 还免费确保与我们所有计划中的最新 NuGet 客户端工具兼容。

还有一个免费计划，您也可以开始试用任何其他计划。检查[http://www.myget.org/plans](http://www.myget.org/plans)或发送电子邮件以获取更多信息。例如，如果您正在寻找与本地 Active Directory 的集成，请查看企业计划。如果您不想要托管解决方案并希望自己维护所有内容，那么 ProGet 可能适合您。

# java - 如何在 Android 上加载 OpenCV？

> ID：15479203
> 
> 赞同：0
> 
> 时间：2013-03-18T14:26:21.440
> 
> 标签：java, android, opencv

我想用 OpenCV 处理从图库中获取的图像，并使用类似 `org.opencv.android.Utils.bitmapToMat` 或 的函数将它们显示在屏幕上`org.opencv.imgproc.Imgproc.cvtColor`。我用 `OpenCVLoader.initDebug()`.

当我想运行应用程序时，我收到以下错误消息：`"Unfortunately * has stopped`“。

我还有以下日志消息：

```
Trying to get library list
   Cannot load info library for OpenCV
   Library list: ""
   First attempt to load libs
   Trying to init OpenCV libs
   Trying to load library opencv_java
   Cannot load library "opencv_java" 
```

你知道如何解决这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-26T04:49:30.693

如果要静态加载库，

```
if(!OpenCVLoader.initDebug()){
    Log.d("CVerror","OpenCV library Init failure");
}else{
    // load your library and do initializing stuffs like System.loadLibrary();
} 
```

您的 onCreate() 方法中的 initDebug

# python - 加载夹具 Django

> ID：15479209
> 
> 赞同：1
> 
> 时间：2013-03-18T14:26:46.200
> 
> 标签：python, django, django-fixtures

我试图在我的 Django 测试中加载一些固定装置，但它们似乎没有加载。

在我的 settings.py 中，我指定：

```
FIXTURE_DIRS = (os.path.join(PROJECT_DIR, 'dhtmlScheduler\\fixtures\\')) 
```

现在，在我的测试用例中：

```
def setUp(self):
    fixtures = ['users.json', 'employee.json'] 
```

我还应该提到我正在使用 Nose 测试运行器：

```
TEST_RUNNER = 'django_nose.NoseTestSuiteRunner' 
```

和单元测试：

```
class TestEmployee(unittest.TestCase): 
```

我一定错过了一些明显的东西，有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:37:12.483

FIXTURE_DIRS 应该是一个列表或元组，而不是一个字符串。请记住，定义元组文字的是逗号，而不是括号，IOW 你的设置应该是

```
FIXTURE_DIRS = (
    os.path.join(PROJECT_DIR, 'dhtmlScheduler\\fixtures\\'), 
    ) 
```

附带说明一下，硬编码路径分隔符会破坏使用 os.path.join() 的全部意义，所以这应该是：

```
FIXTURE_DIRS = (
    os.path.join(PROJECT_DIR, 'dhtmlScheduler', 'fixtures'), 
    ) 
```

编辑：最后，您必须在类级别声明您的 TestCase 固定装置，而不是在 setUp() 方法中......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:38:06.810

```
FIXTURE_DIRS = (os.path.join(PROJECT_ROOT, 'fixtures'),) 
```

*或者*

```
from django.test import TestCase

class MyTestCase(TestCase):
     fixtures = [
        '/myapp/fixtures/users.json', 
        '/myapp/fixtures/employee.json'
     ] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-13T01:57:36.017

在您的测试用例文件中，只需以这种方式引用您的预定义夹具，如下所示 [![在此处输入图像描述](../Images/302ab1fc4ac9e56c4ab1069b10a3e723.png)](https://i.stack.imgur.com/V1ffg.png)

# spring - 生产（https）服务器上的“jsessionid”问题

> ID：15479210
> 
> 赞同：0
> 
> 时间：2013-03-18T14:26:47.773
> 
> 标签：spring, spring-mvc

我在 web.xml 文件中使用以下代码来防止 URL 上显示“jsessionid”。

```
<session-config>
    <tracking-mode>COOKIE</tracking-mode>
</session-config> 
```

它适用于我的本地主机/暂存（http），但是当我将它部署到生产环境时，它仍然显示 jsessionid。对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-08T14:56:23.527

Found the solution. The code I mentioned in my question works only for Tomcat 7\. Our prod servers use tomcat 6\. Our server admin have resolved this issue.

# java - 如何使用 Spring 提供 .html 文件

> ID：15479213
> 
> 赞同：70
> 
> 时间：2013-03-18T14:26:52.673
> 
> 标签：java, spring, spring-mvc

我正在使用 Spring 开发一个网站，并尝试提供不是 .jsp 文件的资源（例如 .html）

现在我已经注释掉了我的 servlet 配置的这一部分

```
 <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
        p:prefix="/WEB-INF/jsp/" p:suffix=".jsp" /> 
```

并试图从控制器返回资源的完整路径。

```
@Controller
public class LandingPageController {

protected static Logger logger = Logger.getLogger(LandingPageController.class);

@RequestMapping({"/","/home"})
public String showHomePage(Map<String, Object> model) {
    return "/WEB-INF/jsp/index.html";   
   }
} 
```

index.html 文件存在于该文件夹中。

注意：当我将 index.html 更改为 index.jsp 时，我的服务器现在可以正确地为页面提供服务。

谢谢你。

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2013-03-18T15:17:54.350

最初的问题是配置指定了一个属性`suffix=".jsp"`，因此 ViewResolver 实现类将添加`.jsp`到从您的方法返回的视图名称的末尾。

但是，由于您注释掉了`InternalResourceViewResolver`then，根据您的应用程序配置的其余部分，可能没有任何其他 ViewResolver 注册。您可能会发现现在没有任何效果。

由于`.html`文件是*静态*的并且不需要 servlet 处理，因此使用[`<mvc:resources/>`映射](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/mvc.html#mvc-config-static-resources)更有效、更简单。这需要 Spring 3.0.4+。

例如：

```
<mvc:resources mapping="/static/**" location="/static/" /> 
```

这将*通过*`/static/`从目录开始的所有请求`webapp/static/`。

因此，通过从您的方法中放入`index.html`和`webapp/static/`使用`return "static/index.html";`，Spring 应该会找到视图。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-12-03T12:07:08.927

我只是补充一点，您不需要为此实现控制器方法，因为您可以在 servlet 配置文件中使用**view-controller**标记（Spring 3）：

```
<mvc:view-controller path="/" view-name="/WEB-INF/jsp/index.html"/> 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-09-17T10:56:34.583

**问题的背景**

首先要了解的是：呈现jsp文件的不是spring。是 JspServlet (org.apache.jasper.servlet.JspServlet) 做的。这个 servlet 带有 Tomcat（jasper 编译器）而不是 spring。这个 JspServlet 知道如何编译 jsp 页面以及如何将其作为 html 文本返回给客户端。默认情况下，tomcat 中的 JspServlet 只处理匹配两种模式的请求：*.jsp 和 *.jspx。

`InternalResourceView`现在，当 spring 用(or )渲染视图时`JstlView`，真正发生了三件事：

1.  从模型中获取所有模型参数（由您的控制器处理程序方法返回，即`"public ModelAndView doSomething() { return new ModelAndView("home") }"`）
2.  将这些模型参数公开为请求属性（以便 JspServlet 可以读取）
3.  将请求转发给 JspServlet。`RequestDispatcher`知道每个 *.jsp 请求都应该转发给 JspServlet（因为这是默认的 tomcat 配置）

当您简单地将视图名称更改为 home.html 时，tomcat 将*不*知道如何处理请求。这是因为没有 servlet 处理 *.html 请求。

**解决方案**

如何解决这个问题。有三个最明显的解决方案：

1.  将 html 公开为资源文件
2.  指示 JspServlet 也处理 *.html 请求
3.  编写您自己的 servlet（或将请求传递给另一个现有的 servlet 到 *.html）。

有关如何实现此目的的完整代码示例，请参阅我在另一篇文章中的回答：[如何在 Spring MVC 中将请求映射到 HTML 文件？](https://stackoverflow.com/questions/16598594/how-to-map-requests-to-html-file-in-spring-mvc/32628600#32628600)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-03-18T14:56:13.203

您仍然可以继续使用相同的 View 解析器，但将后缀设置为空。

```
<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver" 
    p:prefix="/WEB-INF/jsp/" p:suffix="" /> 
```

现在您的代码可以选择返回 index.html 或 index.jsp，如下例所示 -

```
@RequestMapping(value="jsp", method = RequestMethod.GET )
public String startJsp(){
    return "/test.jsp";
}

@RequestMapping(value="html", method = RequestMethod.GET )
public String startHtml(){
    return "/test.html";
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-05T04:05:08.513

> 我遇到了同样的问题并尝试了各种解决方案来从 Spring MVC 加载 html 页面，以下解决方案对我有用

服务器的 web.xml 中的第 1 步注释这两行

```
<!--     <mime-mapping>
        <extension>htm</extension>
        <mime-type>text/html</mime-type>
    </mime-mapping>--> 
<!--     <mime-mapping>
        <extension>html</extension>
        <mime-type>text/html</mime-type>
    </mime-mapping>
 --> 
```

Step-2 在应用程序的 web xml 中输入以下代码

```
 <servlet-mapping>
    <servlet-name>jsp</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping> 
```

Step-3 创建一个静态控制器类

```
@Controller 
public class FrontController {
     @RequestMapping("/landingPage") 
    public String getIndexPage() { 
    return "CompanyInfo"; 

    }

} 
```

Step-4 在Spring配置文件中修改后缀为.htm .htm

Step-5 将页面重命名为 .htm 文件并将其存储在 WEB-INF 中并构建/启动服务器

```
localhost:8080/.../landingPage 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-23T20:47:18.817

html 文件的 Java 配置（在本例中为 index.html）：

```
@Configuration
@EnableWebMvc
public class DispatcherConfig extends WebMvcConfigurerAdapter {

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {

        registry.addResourceHandler("/index.html").addResourceLocations("/index.html");
    }

} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T14:37:24.833

相应地更改 p:suffix=".jsp" 值，否则我们可以开发自定义视图解析器

[http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/view/UrlBasedViewResolver.html](http://static.springsource.org/spring/docs/3.1.x/javadoc-api/org/springframework/web/servlet/view/UrlBasedViewResolver.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-06-24T22:45:17.317

听起来你正在尝试做这样的事情：

*   静态 HTML 视图
*   服务于 AJAX 的 Spring 控制器

如果是这种情况，如前所述，最有效的方法是让 Web 服务器（而不是 Spring）将 HTML 请求作为静态资源处理。因此，您需要以下内容：

1.  将所有 .html、.css、.js、.png 等请求转发到网络服务器的资源处理程序
2.  将所有其他请求映射到弹簧控制器

这是实现这一目标的一种方法...

**web.xml** - 将 servlet 映射到根 (/)

```
<servlet>
            <servlet-name>sprung</servlet-name>
            <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
            ...
<servlet>

<servlet-mapping>
            <servlet-name>sprung</servlet-name>
            <url-pattern>/</url-pattern>
</servlet-mapping> 
```

**春天的 Java 配置**

```
public class SpringSprungConfig extends DelegatingWebMvcConfiguration {

    // Delegate resource requests to default servlet
    @Bean
    protected DefaultServletHttpRequestHandler defaultServletHttpRequestHandler() {
        DefaultServletHttpRequestHandler dsrh = new DefaultServletHttpRequestHandler();
        return dsrh;
    }

    //map static resources by extension
    @Bean
    public SimpleUrlHandlerMapping resourceServletMapping() {
        SimpleUrlHandlerMapping mapping = new SimpleUrlHandlerMapping();

        //make sure static resources are mapped first since we are using
        //a slightly different approach
        mapping.setOrder(0);
        Properties urlProperties = new Properties();
        urlProperties.put("/**/*.css", "defaultServletHttpRequestHandler");
        urlProperties.put("/**/*.js", "defaultServletHttpRequestHandler");
        urlProperties.put("/**/*.png", "defaultServletHttpRequestHandler");
        urlProperties.put("/**/*.html", "defaultServletHttpRequestHandler");
        urlProperties.put("/**/*.woff", "defaultServletHttpRequestHandler");
        urlProperties.put("/**/*.ico", "defaultServletHttpRequestHandler");
        mapping.setMappings(urlProperties);
        return mapping;
    }

    @Override
    @Bean
    public RequestMappingHandlerMapping requestMappingHandlerMapping() {
        RequestMappingHandlerMapping handlerMapping = super.requestMappingHandlerMapping();

        //controller mappings must be evaluated after the static resource requests
        handlerMapping.setOrder(1);
        handlerMapping.setInterceptors(this.getInterceptors());
        handlerMapping.setPathMatcher(this.getPathMatchConfigurer().getPathMatcher());
        handlerMapping.setRemoveSemicolonContent(false);
        handlerMapping.setUseSuffixPatternMatch(false);
        //set other options here
        return handlerMapping;
    }
} 
```

**其他注意事项**

*   隐藏 .html 扩展名 - 如果您委托静态资源请求，这超出了 Spring 的范围。查看 URL 重写过滤器。
*   模板 - 您不想在每个 HTML 页面中为常见元素重复标记。如果将 HTML 作为静态资源提供，这可能无法在服务器上完成。查看客户端 *VC 框架。我是 YUI 的粉丝，它有许多模板机制，包括 Handlebars。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-11-09T06:11:19.257

如果您使用 spring boot，则不能在 application.properties 文件中设置属性`spring.mvc.view.prefix`，而是从配置类`spring.mvc.view.suffix`配置 bean 。`ViewResolver`

应用程序属性

```
# Configured in @Configuration GuestNav
#spring.mvc.view.prefix=/WEB-INF/views/
#spring.mvc.view.suffix=.jsp
# Live reload
spring.devtools.restart.additional-paths=.
# Better logging
server.tomcat.accesslog.directory=logs
server.tomcat.accesslog.file-date-format=yyyy-MM-dd
server.tomcat.accesslog.prefix=access_log
server.tomcat.accesslog.suffix=.log 
```

主要方法

```
@SpringBootApplication
public class WebApp extends SpringBootServletInitializer {

    @Override
    protected SpringApplicationBuilder configure(SpringApplicationBuilder application) {
        return application.sources(WebApp.class);
    }

    public static void main(String[] args) throws Exception {
        SpringApplication.run(WebApp.class, args);
    }

} 
```

配置类

```
@Configuration
@EnableWebMvc
public class DispatcherConfig implements WebMvcConfigurer {

    @Override
    public void addResourceHandlers(ResourceHandlerRegistry registry) {
        registry.addResourceHandler("/views/**").addResourceLocations("/views/");
    }

    @Bean
    public ViewResolver viewResolver() {
        InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();
        viewResolver.setViewClass(JstlView.class);
        viewResolver.setPrefix("/WEB-INF/notinuse/");
        viewResolver.setSuffix("");
        return viewResolver;
    }

} 
```

控制器类

```
@Controller
public class GuestNav {

    @GetMapping("/")
    public String home() {
        return "forward:/views/guest/index.html";
    }
} 
```

您必须将文件放在目录`/webapp/views/guest/index.html`中，请注意，webapp 目录位于资源目​​录之外。
通过这种方式，您可以使用 spring-mvc 的 url 模式，但提供静态上下文。

# html - 如何使用上传的文件在 HTML 电子邮件中发送 HTML 表单？

> ID：15479214
> 
> 赞同：0
> 
> 时间：2013-03-18T14:26:58.517
> 
> 标签：html, forms, email, file-upload, submit

我知道可以在 HTML 电子邮件中发送 HTML 表单。[这是一个例子](http://css-tricks.com/html-forms-in-html-emails/)

我想知道的是是否可以以这种形式附加文件。这意味着这封邮件的接收者将填写不同的字段并从他的计算机上传一个文件。然后他提交表格。

填写的信息和上传的文件不会通过电子邮件发送，而是直接发送到 IT 系统。然后一个适当的脚本将存储它们。

可能吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:59:18.767

不，您不能在 HTML 电子邮件中包含表单。

大多数邮件客户端将去除 FORM 标记和字段。考虑到许多网络邮件客户端出于自己的目的使用表单，而嵌入在电子邮件中的表单会破坏电子邮件客户端。

您最好链接到基于 Web 的表单。

现在您可以在电子邮件中使用分隔符并自动解析它们，但这很脆弱，因为用户可以轻松地编辑您的分隔符。

例如，用户将填写冒号后的内容，您的代码将解析这些值。

> 姓名：
> 
> 电子邮件：

# javascript - 基于文本的刽子手 - JavaScript

> ID：15479216
> 
> 赞同：-3
> 
> 时间：2013-03-18T14:27:04.113
> 
> 标签：javascript, text-based

我有一个非标记的头脑风暴练习要做，这与进一步标记的课程有关，这将是相似但更复杂的。基于非标记文本的 Hangman 的任务基本上是创建一个使用以下四个随机单词中的任何一个的 JavaScript Hangman 游戏：

```
var words =["programming", "practical", "software", "development"]; 
```

程序应该首先告诉用户`"Guess the word: _______ ;`现在下划线代表要猜测的单词，它必须是上述四个单词之一。程序然后要求用户输入一个字母，如果正确，用户将被告知他在游戏中还有“十个围棋”并填写一个下划线。如果不是，用户会被告知他剩下 9 个 go 并且下划线保持原样。

`'Guess the word: _____-'`我知道如何向用户询问输入-例如，对于如何创建更改为的程序部分，我真的非常困惑`"Guess the word: __I___"`。

我必须在这里使用什么方法？任何建议或通用示例都会非常有帮助！万分感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:53:08.940

在学校我们做了同样的事情，但是在 C# 中，如果我没记错的话，我们做了这样的事情：

```
 //this part creates the number of stripes depending on your word.
        //this part also breaks up the complete word into an array.
        var word = "programming";
        var letters = word.length;
        var loose_letters = new Array();
        var stripes = new Array();

        for(i = 0; i <= letters; i++)
        {
           stripes[i] = "_";
           loose_letters[i] = word.substring(i, i+1);
        } 
```

现在制作一个文本框之类的东西，用户可以在其中用按钮填写字母

```
<input type = "text" id = "letter" name = "letter" />
<input type = "button" onClick="checkLetter();" value = "OK" id= "btn_OK" /> 
```

checkLetter 函数：

```
function checkLetter()
{
   letter = document.getElementById("letter").value;

   for(i = 0; i < letters; i++)
   {
     if(letter == loose_letters[i])
     {
        stripes[i] = letter;
     }
     var complete_string += stripes[i]
   }     
} 
```

我希望这会有所帮助，不要忘记添加`complete_string`到您希望您的人们看到结果的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:47:06.410

我会使用正则表达式。

```
var answer = "programmer";
var guessed = "aeiou";
var pattern = new RegExp("[^" + guessed + "]*", "gi");
var display = answer.replace(pattern, "_"); 
```

当他们猜出一个字母时，将其添加到`guessed`. 您可以使用长度`guessed`来查看他们是否向左转，并`display.indexOf("_")`查看他们是否得到正确的答案。

# sql - 同时使用 DISTINCT 和 TOP

> ID：15479224
> 
> 赞同：35
> 
> 时间：2013-03-18T14:27:25.873
> 
> 标签：sql, sql-server, tsql

我想同时使用 distinct & top ，我做到了

`SELECT distinct TOP 10 * FROM TableA`

但我仍然有一个重复的 PersonId 所以我很难做到：

`SELECT distinct (personID) TOP 10 * FROM TableA` 但是语法错误，所以我想知道是否有任何解决方案

谢谢，

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2013-03-18T14:28:28.587

您正在使用 a `SELECT *`which 正在提取所有记录。如果您想使用真正的 DISTINCT 仅列出您想要接收不同值的列。如果您有多个列，则所有这些列组合起来构成一个不同的记录。

```
SELECT distinct TOP 10 personID 
FROM TableA 
```

请注意，没有`ORDER BY`this 将返回前 10 条记录，没有特定的顺序。每次运行查询时，结果都可能不同。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T15:51:16.420

您似乎想要为不同的人提供 10 条随机记录。尝试这个：

```
select t.*
from (select t.*,
             row_number() over (partition by personid order by (select NULL)) as seqnum
      from t
     ) t
where seqnum = 1 
```

不过，一般来说，在使用时，`top`您还应该使用 an`order by`来指定“top”的含义。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-25T11:35:37.117

如果您使用这样的查询，它很简单：

```
SELECT DISTINCT TOP 2 name FROM [ATTENDANCE] ; 
```

在上面的查询中，`name`是 column_name，`[ATTENDANCE]`是 table_name。

您也可以使用`WHERE`它来制作过滤条件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-02-28T13:27:46.963

从 tablea 示例 10 中选择不同的 personid

这适用于 teradata

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-06-28T09:36:38.970

也许你可以这样做：

SELECT TOP 10 t.* FROM (SELECT distinct personID FROM TableA) t

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-06-28T09:58:35.597

我看到这是一个老问题，但我可以提出一个更**优雅的解决方案**：

```
SELECT personDetails.*
FROM
(
    SELECT      TOP (10)
                personID
                personID
    FROM        TableA
    GROUP BY    personID    --> use this instead of distinct
)   AS          distinctIds

OUTER APPLY
(
    SELECT  TOP (1) *       --> fetch only one result matching personID
    FROM    TableA
    WHERE   TableA.personId = distinctIds.personID
)   AS      personDetails 
```

您可以使用 GROUP BY 代替 DISTINCT，并且可以将 OUTER APPLY 与 TOP(1) 一起使用以仅获取一个匹配结果。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-26T16:02:07.230

几个选项：

1: SELECT TOP 10 personID FROM (SELECT distinct personID FROM TableA)

2: ;with cte as (SELECT distinct personID FROM TableA) SELECT top 10 personID FROM cte

3: ;with cte as (SELECT personID,row_count=row_number() over (partition by personID order by personID) FROM TableA) SELECT top 10 personID FROM cte where row_count=1

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-11T14:16:56.047

根据帖子标题，Matt Busche 的答案是正确的。
但是，如果从您的代码示例中可以看出，您的问题是拥有来自不同的前 10 个 personID 的所有记录字段，则可以将其用作子查询：

```
SELECT TableA.* 
FROM TableA
INNER JOIN (SELECT DISTINCT TOP 10 personID FROM TableA) AS B
ON TableA.ID = B.ID 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2019-06-13T10:31:42.030

`SELECT DISTINCT ta.personid FROM (SELECT TOP 10 * FROM TableA) ta`

ta 是子查询的对象，使用 ta 对象我们可以区分值

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2013-03-18T15:23:12.200

我修好了

```
select distinct  personid from (SELECT  TOP 10 * FROM TableA) 
```

* * *

## 回答 #11

> 赞同：-3
> 
> 时间：2017-10-02T18:23:01.547

如果目标是选择每个 personID 的前 1 条记录，则使用

```
select * from TableA group by personid 
```

由于您正在执行“分组依据”，它将返回每一列，但会忽略（不显示）具有相同 personId 的任何其他行

# java - 有没有办法确定 Java 线程何时启动？

> ID：15479230
> 
> 赞同：7
> 
> 时间：2013-03-18T14:27:48.420
> 
> 标签：java, multithreading

我有一个请求，要创建对 JVM 中正在运行的线程的分析，以监视长时间运行的作业。有没有办法找到 Java 线程的开始日期/时间？获取线程没有问题，但我无法找出任何方法来找出线程已激活多长时间或何时开始。为了获取线程，我只是枚举了 ThreadGroup。

请注意，我无法控制实际线程本身，因此我无法输入任何时间或属性并自己记录开始时间。我只有实际线程本身，需要从中确定数据。我可以在线程上找到两种方法——“getThreadCpuTime()”和“getThreadUserTime()”，但我不确定这些是否足够，因为显然线程偶尔会调用 sleep() 方法，我担心“睡眠”时间不会包含在这两种方法中。

有没有办法确定线程的开始时间？或者这两种时间方法中的任何一种都会返回线程活动的时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:49:38.593

虽然您可能无法扩展 Thread，但您可以考虑使用面向方面的编程来拦截新的 Runnable 启动并记录该点的开始时间。

看看 AspectJ / Spring AOP

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:38:56.540

这可能是XY问题吗？

[http://www.perlmonks.org/index.pl?node_id=430320](http://www.perlmonks.org/index.pl?node_id=430320)

我不知道有什么方法可以确定线程何时开始。但我不确定这是否真的相关信息。您是否正在尝试分析性能？您是否正在寻求使用长时间运行的线程作为性能不佳的指标？

问题在于线程一直被重用。Tomcat 汇集了它的 AJP 和 HTTP 线程。当他们收到一个新的请求时，一个线程将跳出它的循环并执行一些操作，然后返回到等待状态。你想衡量那个动作，而不是整个线程。

再举一个例子，垃圾收集器线程。这将始终是一个长时间运行的线程，因为它在 JVM 启动时开始！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:40:43.093

如果您有能力定义自己的`Thread`子类，则可以执行以下操作：

```
class WugThread extends Thread
{
    // constructors

    long timeStarted = -1;

    public void start()
    {
        super.start();
        timeStarted = System.currentTimeMillis();
    }
} 
```

# windows - 确保 DHCP 服务已批量准备就绪

> ID：15479231
> 
> 赞同：0
> 
> 时间：2013-03-18T14:27:48.553
> 
> 标签：windows, batch-file, windows-services, dhcp, netsh

我想制作一个批处理脚本来更改 Windows XP 上接口的 IP。可以通过该`netsh`实用程序：

```
netsh interface ip set address name="Local Area Connection 2" static 10.0.2.2 255.255.255.0 none 
```

但是，该`netsh`实用程序需要`dhcp`启用该服务，即使我们设置的是静态地址。

脚本本身不是由用户运行的，而是在系统启动时自动运行的，不能保证`dhcp`服务已经准备好。

当我尝试调用`sc start dhcp`时，系统会立即返回输出，即使服务还没有准备好（`netsh`之后调用命令将导致 a `Failed to configure the DHCP service. The interfrace may be disconnected`）。

当我在启动服务和运行命令之间等待 30 秒时`netsh`，一切正常。然而，只是等待并不是处理这种情况的正确方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:57:37.187

`wmic`并且`sc`可以显示服务的运行状态。看到[这个答案](https://stackoverflow.com/a/15207787/1683264)。

还有一点值得注意：

在测试时，我想到`net start`会阻塞直到完成，而`sc start`非阻塞。您可以使用`net`代替`sc`吗？

# ios - 如何将 UIScrollView 的背景图片设置为可拉伸图片？

> ID：15479236
> 
> 赞同：7
> 
> 时间：2013-03-18T14:28:05.877
> 
> 标签：ios, objective-c, uiscrollview, stretch

我想将 UIScrollView 的背景图像设置为可拉伸图像。我试过：

```
UIImage* backgroundImage =[[UIImage imageNamed:@"background"]
                               resizableImageWithCapInsets:UIEdgeInsetsMake(100, 0, 0, 0) ];
self.scrollView.backgroundColor = [UIColor colorWithPatternImage:backgroundImage]; 
```

但它不是伸展的。

我能做些什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:41:00.873

如果您想利用 的可调整大小的属性`UIImage`，您需要使用`UIImageView`. 正如您所注意到的，如果您将其设置为背景颜色，它将不起作用。如果必须修复它，只需创建一个`UIImageView`并将其放在具有相同框架的后面，或者如果您希望它滚动，则在您的内部具有相同的大小......`UIScrollView``UIScrollView``contentSize`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:51:17.693

`UIImageView`在您的案例集中添加图像

```
yourImageView.contentMode = UIViewContentModeScaleAspectFill; 
```

您可以将其设置为以下任何一项

```
UIViewContentModeScaleToFill,
UIViewContentModeScaleAspectFit,
UIViewContentModeScaleAspectFill,
UIViewContentModeRedraw,
UIViewContentModeCenter,
UIViewContentModeTop,
UIViewContentModeBottom,
UIViewContentModeLeft,
UIViewContentModeRight,
UIViewContentModeTopLeft,
UIViewContentModeTopRight,
UIViewContentModeBottomLeft,
UIViewContentModeBottomRight 
```

Ans`UIImageView`在你里面加这个`scrolView`。

另一种方法是您可以根据需要使用以下方法获取/创建图像大小。

使用以下具有特定**高度**和**宽度**的方法与**图像**

```
+ (UIImage*)resizeImage:(UIImage*)image withWidth:(int)width withHeight:(int)height
{
    CGSize newSize = CGSizeMake(width, height);
    float widthRatio = newSize.width/image.size.width;
    float heightRatio = newSize.height/image.size.height;

    if(widthRatio > heightRatio)
    {
        newSize=CGSizeMake(image.size.width*heightRatio,image.size.height*heightRatio);
    }
    else
    {
        newSize=CGSizeMake(image.size.width*widthRatio,image.size.height*widthRatio);
    }

    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0,0,newSize.width,newSize.height)];
    UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    return newImage;
} 
```

此方法返回**NewImage**，具有您指定的特定大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:02:29.757

试试这个

```
UIImage* backgroundImage =[[UIImage imageNamed:@"back.jpg"]
                           resizableImageWithCapInsets:UIEdgeInsetsMake(100, 0, 0, 0) ];
UIGraphicsBeginImageContextWithOptions(self.scrollView.bounds.size, NO, 0.0);
[backgroundImage drawInRect:self.scrollView.bounds];
UIImage* newImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

self.scrollView.backgroundColor = [UIColor colorWithPatternImage:newImage]; 
```

# javascript - Javascript：在 Express 应用程序中分解出相同的回调

> ID：15479241
> 
> 赞同：1
> 
> 时间：2013-03-18T14:28:25.230
> 
> 标签：javascript, node.js, express, socket.io

全部！

使用 Node/Express/Socket.IO，我想重构出相同的回调。

我有：

```
io.sockets.on('connection', function(socket) {
    socket.on('find all notes' , function() { noteProvider.findAllNotes(function(err, result) {
        if(err) {
            socket.emit('err', err);
        } else {
            socket.emit('result', result);
        }
    }) });
    socket.on('find note by id', function(id) { noteProvider.findNoteById(id, function(err, result) {
        if(err) {
            socket.emit('err', err);
        } else {
            socket.emit('result', result);
        }
    }) });
} 
```

但想要类似的东西：

```
io.sockets.on('connection', function(socket) {
    socket.on('find all notes' , function() { noteProvider.findAllNotes(callback) });
    socket.on('find note by id', function(id) { noteProvider.findNoteById(id, callback) });
} 
```

如何重构回调？这两个例子不起作用：

不工作1：

```
var callback = function(err, result) {
    if(err) {
        socket.emit('err', err);
    } else {
        socket.emit('result', result);
    }
} 
```

不起作用2：

```
io.sockets.on('connection', function(socket) {
    socket.on('find all notes' , function() { noteProvider.findAllNotes(callback(socket, err, result)) });
    socket.on('find note by id', function(id) { noteProvider.findNoteById(id, callback(socket, err, result)) });
} 
```

和

```
var callback = function(socket, err, result) {
    if(err) {
        socket.emit('err', err);
    } else {
        socket.emit('result', result);
    }
} 
```

我怎样才能保持我的代码干燥？

弗罗德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:44:16.527

如果您声明“不起作用 1”，它可以访问套接字变量，它应该可以工作。可以这样做：

```
io.sockets.on('connection', function(socket) {
  var callback = function(err, result) {
    if(err) {
      socket.emit('err', err);
    } else {
      socket.emit('result', result);
    }
  }

  socket.on('find all notes' , function() { noteProvider.findAllNotes(callback) });
  socket.on('find note by id', function(id) { noteProvider.findNoteById(id, callback) });
}); 
```

似乎您试图在“不起作用 2”中解决这个问题，如果您在回调中返回一个函数，这将起作用：

```
var callback = function(socket) {
  // Returning the callback which will be called when noteProvider is done.
  // Since it's in the closure of this function it will have a reference to socket.
  return function (err, result) {
    if(err) {
        socket.emit('err', err);
    } else {
        socket.emit('result', result);
    }
  }
}

io.sockets.on('connection', function(socket) {
  socket.on('find all notes' , function() { noteProvider.findAllNotes(callback(socket)) });
  socket.on('find note by id', function(id) { noteProvider.findNoteById(id, callback(socket)) });
} 
```

# sql - 如何在单个 stmt 中编写以获得预期结果

> ID：15479243
> 
> 赞同：0
> 
> 时间：2013-03-18T14:28:27.930
> 
> 标签：sql, sql-server, sql-server-2008, tsql

这个查询：

```
select audit_id, Count(TRAINING_RESULT_ID ) safe
from TBL_T_AUDIT_DETAILS
where TRAINING_RESULT_ID =1 
group by audit_id
order by audit_id 
```

给了我这些结果：

```
audit_id  safe
117       5
118       3
123       5
130       7
131       39
136       38 
```

这个查询：

```
select audit_id, Count(TRAINING_RESULT_ID ) unsafe
from TBL_T_AUDIT_DETAILS
where TRAINING_RESULT_ID =2
group by audit_id
order by audit_id 
```

给了我这些结果：

```
audit_id    unsafe
117           2
118           3
123           2
131           2
136           3
141           3
148           3
151           4
157           4 
```

最后，这个查询：

```
select audit_id, Count(TRAINING_RESULT_ID ) na
from TBL_T_AUDIT_DETAILS
where TRAINING_RESULT_ID =3
group by audit_id 
order by audit_id 
```

给了我这些结果：

```
audit_id  na
118      1
147      124
148      8
157      116
218      79
226      47 
```

我怎样才能得到以下结果？

```
audit_id  na  unsafe  safe
117       0    0       2
118       1    3       3
147       124  0       0
148       8    0       0 
157       116  0       0
218       79   0       0
226       47   0       0
141       0    3       0
148       0    3       0
123       0    0       2
131       0    0       2
136       0    0       3 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:33:21.627

```
select audit_id, 
 sum(case when TRAINING_RESULT_ID = 1 then 1 else 0 end) safe
 sum(case when TRAINING_RESULT_ID = 2 then 1 else 0 end) unsafe
 sum(case when TRAINING_RESULT_ID = 3 then 1 else 0 end) na
from TBL_T_AUDIT_DETAILS
where TRAINING_RESULT_ID in (1, 2, 3)
group by audit_id
order by audit_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:47:28.610

也是带有 COUNT() 函数的选项

```
SELECT audit_id, 
       COUNT(case when TRAINING_RESULT_ID = 1 then TRAINING_RESULT_ID end) safe
       COUNT(case when TRAINING_RESULT_ID = 2 then TRAINING_RESULT_ID end) unsafe
       COUNT(case when TRAINING_RESULT_ID = 3 then TRAINING_RESULT_ID end) na
FROM TBL_T_AUDIT_DETAILS
WHERE TRAINING_RESULT_ID IN (1, 2, 3)
GROUP BY audit_id
ORDER BY audit_id 
```

# lua - 如何获得两个Lua表的补码

> ID：15479246
> 
> 赞同：1
> 
> 时间：2013-03-18T14:28:33.530
> 
> 标签：lua, lua-table

在 Lua v. 5.2 中，我怎样才能得到两个表的键都是字符串的补码？

理想情况下，我希望有一个类似的功能：

```
 table.complement ( t1, t2 ) 
```

...其中返回的是一个表，它是表 1 和表 2 中键/值对的补集。也就是说，返回的表仅包含两个表中都不包含的键。

让我眼前一亮的用例是 NoteCase Pro 大纲的脚本，它将在执行将当前节点拆分为多个兄弟节点的操作之前获取唯一兄弟节点 ID 的“之前”列表（每个 22 个字符），获取一个新的“后”兄弟节点 ID 列表，将该列表简化为两个列表的补集，然后将新创建的节点降级为子节点或层次结构中的原始当前节点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T17:52:19.630

```
local function symm_diff(t1, t2)
  local t = {}
  for k, v in pairs(t1) do
    if t2[k] == nil then t[k] = v end
  end
  for k, v in pairs(t2) do
    if t1[k] == nil then t[k] = v end
  end
  return t
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T18:04:12.487

没有任何理由你不能自己写这个……像这样的东西？

```
function table.complement(t1, t2)
    local res = {}

    for _,v1 in pairs(t1) do
        local found = false
        for _,v2 in pairs(t2) do
            if (v1 == v2) then
                found = true
                break
            end
        end
        if not found then table.insert(res, v1) end
    end

    for _,v2 in pairs(t2) do
        local found = false
        for _,v1 in pairs(t1) do
            if (v2 == v1) then
                found = true
                break
            end
        end
        if not found then table.insert(res, v2) end
    end

    return res
end

local t1 = {"stuff", "more", "things"}
local t2 = {"stuff", "junk", "things"}

table.foreach(table.complement(t1, t2), print) 
```

哪个打印

```
1    more
2    junk 
```

# javascript - Google 分享按钮 - 自定义 href url

> ID：15479250
> 
> 赞同：3
> 
> 时间：2013-03-18T14:28:38.057
> 
> 标签：javascript, google-plus

我正在努力解决这个问题。

您会认为文档会提供简单直接的示例。

我想要做的就是获取共享按钮来共享自定义 URL，而不是它所在的当前页面。

此处的文档... [https://developers.google.com/+/web/share/](https://developers.google.com/+/web/share/)

然后这就是我在下面尝试过的，但都失败了......

**#1**

```
<div id="g-plus-footer" class="g-plus" data-action="share" data-annotation="bubble"></div>

<script>
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
      gapi.plus.render('g-plus-footer', {'href':'http://mysite.co.uk'});
    })();
<script> 
```

**#2**

```
<div id="g-plus-footer" class="g-plus" data-action="share" data-annotation="bubble"></div>

<script>    
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();

    gapi.plus.render('g-plus-footer', {'href':'http://mysite.co.uk'});
</script> 
```

**#3**

```
<div onClick="gapi.plus.render('g-plus-footer', {'href':'http://mysite.co.uk'});" id="g-plus-footer" class="g-plus" data-action="share" data-annotation="bubble" ></div>

<script>   
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script> 
```

我似乎对所有这些错误（除了第 3 个）都是......

```
Uncaught ReferenceError: gapi is not defined 
```

任何人都可以帮助理解我哪里出错了。

谢谢乔什

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T15:07:19.260

你有两个概念在这里有点混淆，但你在正确的轨道上。

异步加载gapi库，这就是你正在做的，将导致所有带有“g-plus”类的东西在它完成加载时被渲染。所以你不需要显式调用任何东西。

但是，您确实需要已经在有问题的 div 上设置了“data-href”属性。所以你应该使用类似的标签

```
<div id="g-plus-footer" class="g-plus" data-href="http://example.com/" data-action="share" data-annotation="bubble"></div> 
```

并在您在示例 3 中指定的结束正文标记之前加载库：

```
<script>   
(function() {
  var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
  po.src = 'https://apis.google.com/js/plusone.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
})();
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:38:57.663

您是否确保在引用您的之前包含 Google API 库`gapi`？

```
<script src="https://apis.google.com/js/plusone.js"></script>

<script type="text/javascript">
 // gapi should now be defined
</script> 
```

您当前正在异步加载它，这意味着`gapi`在检索脚本之前它将是未定义的。同步执行此操作，您应该一切顺利。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T14:44:51.180

你必须添加一个`data-href`：

```
<div id="g-plus-footer" data-href="http://mysite.co.uk" class="g-plus" data-action="share" data-annotation="bubble"></div>

<script>   
    (function() {
      var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
      po.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
    })();
</script> 
```

# httpmodule - 发生异常时，INIT 方法不会触发 Application_Error 事件

> ID：15479251
> 
> 赞同：0
> 
> 时间：2013-03-18T14:28:52.393
> 
> 标签：httpmodule

我们在 httpmodule INIT 方法中编写了一些代码，它只会执行一次。该代码连接到第三方 Web 服务，有时可能会出错（如 Web 服务已关闭）。我们正在使用 Application_Error 事件全局处理应用程序错误。

当从 init 方法发生错误时，它不会重定向到错误页面。请帮忙。

开发：分享点网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:16:29.677

我的猜测是，最终调用 Init() 方法的方法与在未处理的异常上调用 Application_Error 的行为不同。

但是……这真的是你想要的行为吗？似乎如果 Web 服务调用在一个请求上失败，您希望它向用户返回一个错误，但在下一个请求上重试。否则，您必须重新启动您的应用程序才能让 Init() 再次运行。

# c++ - u_char* memcpy segfault - 尝试了其他答案

> ID：15479253
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:28:54.793
> 
> 标签：c++, segmentation-fault, memcpy

我有一个 u_char 数组，每次我进入循环时都会改变，还有一个结构体，其成员为 u_char 数组。我正在尝试创建一个结构向量，其中包含 u_char 数组的所有迭代。但是我得到一个段错误（当我使用 memcpy 时）或相同的值重复（当我不这样做时）。帮助？这是代码

```
u_char * data; //contains the data I want to copy from each iteration
unsigned char mem1[bytes];
for(int i=0; i<bytes; i++) {
    mem1[i] = data[i];
}
struct load l1; //contains one member (pload of type u_char*)
l1.pload = mem1; //this gives me the same value in all elements of the vector
//I also tried using memcpy, like this:
//memcpy(&l1.pload, mem1, bytes); //this gave me a segfault 
recd.push_back(l1) //recd is a std::vector<load> 
```

我这样打印出来：

```
for(std::vector<load>::iterator it1 = recd.begin(); it1 != recd.end(); ++it1) {
     cout<<"\nhere\n"<<endl;
     cout<<it1->pload<<endl;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:39:47.370

`memcpy`对于 Steve-o 和 hmjd 在评论中所说的话，你会得到一个分段错误：`li.pload`可能只是一个指针，它没有指向它自己的任何空间，所以`memcpy`失败了。根据您的编译器，它未初始化或指向 0x0，在任何一种情况下，复制到该位置都应该正确导致该错误。

只是`li.pload`作为一个指针是可以的。诀窍是，`mem1`每次都应该指向新的有效数据：

```
`u_char * mem1 = new u_char[bytes];` 
```

然后你的 for 循环（可以被`memcpy`那里替换）将正常工作，并且你可以保留你的`l1.pload = mem1`，因为你每次都将存储一个指向不同内存区域的指针。就像现在一样，每个`li.pload`都指向相同的内存区域，这就是您在每条记录中看到相同值的原因。

当然，由于您正在分配内存，当您使用完向量后，您必须记住删除向量`pload`中的每个`load`。

# ios - 核心图 - 如何在单象限图中的轴顶部放置刻度？

> ID：15479254
> 
> 赞同：0
> 
> 时间：2013-03-18T14:28:56.090
> 
> 标签：ios, core-plot

所以我有一个运行良好的单象限图，除了当一个点正好落在一个轴上时，它会被切断。

![在此处输入图像描述](../Images/58afe8ada3f47284688d3956d7001064.png)

上面 x 轴右侧的蓝色和绿色三角形应该是完整的菱形。

有没有什么简单的方法可以让刻度显示在 x 轴的顶部而不是被截断？我想保留原点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T00:29:10.877

您需要在绘图区域内移动轴，以免绘图符号被切断。最好的方法是稍微扩大绘图范围并使用`visibleRange`和`gridLinesRange`属性来限制轴和网格线的可见部分。

*Plot Gallery*示例应用程序中的“控制图”图演示了这种技术。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:07:50.040

您可以在使用的“numberForPlot”方法中更改点的值：

如果该值等于 0，则向其中添加一些内容，以使菱形的底部接触 x 轴。您必须添加的数量取决于您的规模，并且应该可以通过编程方式计算。

如果您在此图中有用户交互，例如如果用户可以选择一个点并显示其值，那么您应该保留“修改”点的记录，以便能够显示“真实”值。

# ios - Appcelerator：黑莓和 iOS？

> ID：15479258
> 
> 赞同：0
> 
> 时间：2013-03-18T14:29:03.933
> 
> 标签：ios, blackberry, titanium-mobile, appcelerator-mobile

我需要创建一个适用于 BlackBerry (10%) 和 iOs (90%) 的应用程序。Appcelerator Titanium 看起来可以，但 BlackBerry dev 仅在 Windows 上受支持，而 iOs dev 仅在 Mac 上受支持。我错过了什么吗？人们是如何克服这一点的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:40:42.377

这是原生 SDK 的限制。要创建 iOS 应用程序，您总是需要有一台 Mac，因为 Xcode 拥有编译 iOS 应用程序所需的所有库。Blackberry 可以在所有平台上编译，但模拟器仅适用于 Windows。[可在此处](http://preview.appcelerator.com/studio/bb/)获取详细信息。因此，使用 Titanium for iOS 和 Blackberry 进行开发至少需要一台带有用于 BB 模拟器的 VM 的 Mac。

例如，Android 具有适用于所有市长平台的 SDK 及其模拟器。

# r - 如何根据另一个文件中的条件计算一个文件的平均值？

> ID：15479261
> 
> 赞同：-2
> 
> 时间：2013-03-18T14:29:14.827
> 
> 标签：r

我有两个具有相同维度的二进制文件：第一个代表两个数据之间的相关性，第二个代表土地利用图。我想根据土地利用值（间隔）取我的相关性（第一个文件）的平均值，这个值文件范围从0到7。每当第二个文件中的值在0-1之间时，计算第一个文件中相应的平均值并返回结果，对2-3,3-4,5-6做同样的事情， 7-8。

这是两个文件：

1-读取第一个文件相关图：

```
 conne <- file("C:\\corr.bin","rb")
  corr<- readBin(conne, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

2-读取第二个文件土地覆盖图：

```
 conne1<- file("C:\\use.bin","rb")
   cus<- readBin(conne1, numeric(), size=4,  n=1440*720, signed=TRUE) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:43:34.543

您可以使用`cut()`来创建区间并`aggregate()`计算平均值。

```
 (cusBREAK <- cut(cus,0:6))
 (corrMEAN <- aggregate(corr, list(cusBREAK), mean)) 
```

# zend-framework2 - ZF2视图渲染

> ID：15479262
> 
> 赞同：0
> 
> 时间：2013-03-18T14:29:22.203
> 
> 标签：zend-framework2

在 ZF1 我可以做这样的事情：

```
$view = new Zend_View();
$view->setScriptPath($viewDir);
$html = $view->render('template_name.phtml'); 
```

我怎么能在 ZF2 中做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:50:18.887

```
public function abcAction()
{
    $view = new ViewModel(array('variable'=>$value));
    $view->setTemplate('module/controler/action.phtml'); // path to phtml file under view folder
    return $view;
}

 public function differentViewScriptAction()
    {
        // Use a different view script

        $viewModel = new ViewModel();
        $viewModel->setTemplate('application/view/arbitrary');
        return $viewModel;
    } 
```

感谢[akrabat](http://zf2test.akrabat.com/)几乎涵盖了所有场景。

# performance - 性能方面，为什么 facebook 不一次加载所有 JS 文件？

> ID：15479265
> 
> 赞同：3
> 
> 时间：2013-03-18T14:29:33.220
> 
> 标签：performance, seo

登录后我正在查看 facebook 中的 html 代码，他们似乎对 JS 文件做了很多请求（根据萤火虫最多 20 个）。我在这里发现[了这个问题](https://stackoverflow.com/questions/7577850/why-doesnt-facebook-combine-its-css-js-files)，它几乎总结了我最初想知道的内容，但是这个问题现在已经相当老了，它链接到的博客文章是 2010 年的，Facebook 似乎并不关心 SEO。

所以，虽然我知道 facebook 需要加载许多 JS 和 CSS 文件（而不是一个 JS 和一个 CSS 文件），但我的问题是针对更通用的网站和网络爬虫的状态。我们是否应该担心这些技术（通过 ajax 加载主要内容）会影响网络爬虫（googlebot 和朋友）？

我想提高性能并加载“以后需要”内容（text/js/css）似乎是个好主意，但如果爬虫无法使用（当然是内容），那就不行了。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:47:59.027

[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=81766](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=81766)

> 虽然 Googlebot 擅长理解 HTML 链接的结构，但它可能很难在使用 JavaScript 进行导航的网站中找到自己的方式。我们正在努力更好地理解 JavaScript，但创建一个可供 Google 和其他搜索引擎抓取的网站的最佳选择是提供指向您的内容的 HTML 链接。

googlebot 和大多数搜索引擎爬虫不执行 javascript 代码，这是因为加载 javascript 和 css 意味着页面渲染的热性能，没有蜘蛛可以忍受。

然而，蜘蛛可以偷看 js 代码以检查特定模式（例如正在使用黑帽技术）。

最好（但很难）的解决方案是为无法执行 javascript 的代理提供基本内容（主页内容必须可用），以及为现代浏览器提供更多功能的优化

# ruby-on-rails - Rails 测试/单元测试辅助方法，NoMethodError: undefined method

> ID：15479276
> 
> 赞同：3
> 
> 时间：2013-03-18T14:29:59.223
> 
> 标签：ruby-on-rails, module, helper, testunit

如何避免此错误：

```
Error: test_update_location(LocationControllerTest)
NoMethodError: undefined method `show_previous_version' for test_update_location(LocationControllerTest):LocationControllerTest/usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-2.1.1/lib/action_controller/test_process.rb:467:in `method_missing' 
```

我想测试`show_previous_version`定义的帮助方法`app/helpers/description_helper.rb`：

```
def show_previous_version(obj)
    ...
  return html
end 
```

在`app/helpers/application _helper.rb`：

```
module ApplicationHelper
  .....
  require_dependency 'description_helper'
  ...
end 
```

在`test/functional/location_controller_test.rb`

```
def test_update_location
  ...
  loc = Location.find(loc.id)
  html = show_previous_version(loc)
  ...
end 
```

当我运行测试时，我得到：

```
Error: test_update_location(LocationControllerTest)
NoMethodError: undefined method `show_previous_version' for test_update_location(LocationControllerTest):LocationControllerTest/usr/local/rvm/gems/ruby-1.9.3-p327/gems/actionpack-2.1.1/lib/action_controller/test_process.rb:467:in `method_missing' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:18:12.453

辅助方法可用于控制器实例，而不是测试本身。要么直接在测试中包含帮助器（混乱），要么使用控制器（或包含帮助器的其他对象）来调用该方法。

要使用控制器进行测试，您可以在 @controller 内部使用实例变量`ActionController::TestCase`：

```
class LocationControllerTest < ActionController::TestCase

  def test_update_location
    ...
    loc = Location.find(loc.id)
    html = @controller.show_previous_version(loc)
    ...
  end
end 
```

# algorithm - 在距离比较中避免嵌套 for 循环

> ID：15479278
> 
> 赞同：1
> 
> 时间：2013-03-18T14:30:06.527
> 
> 标签：algorithm, matlab, scilab

我有两个对象列表；我想对给定的列表 2 对象执行操作，前提是它位于当前列表 1 对象的边界内。

像这样的东西：

```
for k=1:size(object_list1)
    for l=1:size(object_list2)
        if euclideanDstSqt(object_list1(k).centroid,object_list2(l).centroid) < toleranceRadius then
            // do something ...
        end
    end        
end 
```

这有什么问题，我每次都会检查距离，即使是彼此相距很远的物体。有算法更聪明的方法吗？也许是某种树？

然后可以将该算法翻译成 C++，因此我必须忘记所有面向矩阵的 Matlab 技巧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:19:51.990

也许将列表 2 中的对象放入[kd 树](http://en.wikipedia.org/wiki/Kd_tree)中，然后对于列表 1 中的对象，继续寻找最近的邻居，直到与下一个邻居的距离超出边界。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:37:38.603

我可以说你总是要计算距离。唯一的解决方案是对点进行空间排序，或者进行某种预计算。例如，创建一个空间网格，并丢弃所有属于同一象限的点而不是任何点。

# ios - 适用于 iOS 的 Yandex 地图

> ID：15479279
> 
> 赞同：3
> 
> 时间：2013-03-18T14:30:07.007
> 
> 标签：ios, yandex, yandex-api

我需要集成到我的 iOS 应用程序 Yandex Map 中。你有很好的例子吗？我使用[https://github.com/yandexmobile/yandexmapkit-ios](https://github.com/yandexmobile/yandexmapkit-ios)，但这对我没有帮助。如何初始化 YMKMapView？请帮我。谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:35:08.743

你看过`YandexMapKitSample`那里提供的示例项目吗？它几乎显示了您需要的一切。

我也希望您确实向 Yandex 请求了使用 iOS 工具包的密钥 - 我已经等了大约一周左右。你需要把它放在这里：`-[YMKConfiguration setApiKey:]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-23T10:32:32.230

您确定在项目设置中的其他链接器标志中添加了标志“-all_load”吗？

# svn - Googlecode：直接从 svn 源查看 html 文件

> ID：15479280
> 
> 赞同：0
> 
> 时间：2013-03-18T14:30:12.050
> 
> 标签：svn, google-code

是否可以将文件视为真正的 HTML 而不是 googlecode svn 中的原始文本？

例如：http: [//jquery-json.googlecode.com/svn/trunk/test/index.html](http://jquery-json.googlecode.com/svn/trunk/test/index.html)

与[http://dropdown-check-list.googlecode.com/svn/trunk/doc/dropdownchecklist.html相反](http://dropdown-check-list.googlecode.com/svn/trunk/doc/dropdownchecklist.html)

不知何故，包括 CSS 和脚本在内的所有源代码都没有被处理并包装在一个大的*pre*标记中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:58:22.810

我找到了答案。摘自： http: [//manjeetdahiya.com/2010/09/29/serving-html-documentation-from-google-code-svn/](http://manjeetdahiya.com/2010/09/29/serving-html-documentation-from-google-code-svn/)

基本上你必须使用你的 svn 客户端设置文件的 mime 类型

# android - 尝试从 json 字符串获取 json 数组或 json 对象时出现 nullpointerexception

> ID：15479281
> 
> 赞同：4
> 
> 时间：2013-03-18T14:30:13.780
> 
> 标签：android, json

您好，当我尝试从我的 jsonString 获取对象时，我不断收到 NPE。我尝试了很多事情，甚至多次更改了我的 json，但它只是不起作用。HTTPResponse 工作正常，当我记录“myObject”时，它给出了正确的对象。但是当我尝试将对象放入其中时，它给了我一个 NPE。我测试了json，它是有效的。我也尝试检索一个数组而不是一个对象，但它也给出了一个 NPE。有人可以告诉我如何解决这个问题。

我做了一个简单的 jsontester 活动来测试我的 json：

```
public class JSONTester extends Activity {

private DefaultHttpClient createHttpClient() {
    HttpParams my_httpParams = new BasicHttpParams();
    HttpConnectionParams.setConnectionTimeout(my_httpParams, 3000);
    SchemeRegistry registry = new SchemeRegistry();
    registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
    ThreadSafeClientConnManager multiThreadedConnectionManager = new ThreadSafeClientConnManager(my_httpParams, registry);
    DefaultHttpClient httpclient = new DefaultHttpClient(multiThreadedConnectionManager, my_httpParams);
    return httpclient;
}

MikeyJSON mJSON;

Button mBtnGo;
TextView mTxt1;
TextView mTxt2;
TextView mTxt3;
TextView mTxt4;
ProgressDialog mProgressDialog;
private String lang;        
private int length;     // 0 - 6 (length 7 to length 12)
private int wordPos;        // 0 - array length

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_jsontester);

    mTxt1 = (TextView) findViewById(R.id.txt1);
    mTxt1 = (TextView) findViewById(R.id.txt1);
    mTxt1 = (TextView) findViewById(R.id.txt1);
    mTxt1 = (TextView) findViewById(R.id.txt1);
    mBtnGo = (Button) findViewById(R.id.btnGo);

}

public boolean isNumeric(String str) {

    for(int i=0;i<str.length();i++) {

        if(Character.isDigit(str.charAt(i))) {
            return true;
        }
    }
    return false;
}

public void testJSON(View view) {
    if(view==mBtnGo) {

        mProgressDialog = new ProgressDialog(this);
        mProgressDialog.setMessage("loading");
        mProgressDialog.show();
        new DownloadNewWords().execute();
    }

}
private class DownloadNewWords extends AsyncTask<Void, Void, Void> {

    int mStatusCode = 0;
    String mResultString;
    Exception mConnectionException;

    @Override
    protected Void doInBackground(Void... args) {

            String fetchUrl = "http://www.mikeywebs.nl/json/jsonexample.html";
            DefaultHttpClient httpclient = createHttpClient();
        HttpGet httpget = new HttpGet(fetchUrl);

        try {
            HttpResponse response = httpclient.execute(httpget);
            StatusLine statusLine = response.getStatusLine();
            mStatusCode  = statusLine.getStatusCode();
                if (mStatusCode == 200){
                mResultString = EntityUtils.toString(response.getEntity());
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
            mConnectionException = e;
        } catch (IOException e) {
            e.printStackTrace();
            mConnectionException = e;
        }
        return null;            
    }

        @Override
    protected void onPostExecute(Void arg) {
        mProgressDialog.dismiss();
        if (mStatusCode  == 200){
            mJSON = new MikeyJSON(mResultString);   
            lang = "English";   //Integer.parseInt(langu);
            length = 7;  //Integer.parseInt(wordl);
            wordPos = 0;
            String getWord = mJSON.getResult(lang, length, wordPos);
            mTxt4.setText(getWord);

        }
        else {
            Toast.makeText(JSONTester.this, "Gegevens konden niet worden opgehaald. Controleer uw internetverbinding en probeer het opnieuw (" +mConnectionException.toString() + ")" , Toast.LENGTH_LONG).show();
            mJSON = null;
        }
    }
}

} 
```

我使用的 jsonclass 是：

```
public class MikeyJSON {

private JSONObject myObject;
private JSONArray jsonArray;

int i;

public MikeyJSON(String jsonString) {
    Log.i("JSON", "jsonString: " + jsonString);
    try {
        JSONObject myObject = new JSONObject(jsonString);
        Log.i("JSON", "myObject_Object: " + myObject.toString());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

public String getResult(String lang, int length, int wordPos) {
    String word = "0";  
    //0 is Nederlands 1 is English
    int la = 0;
    if(lang.equals("English")) { 
        la = 1;
    }
    //make String length
    String le = "length" + Integer.toString(length);
    Log.i("PARSE", "get_length: " + le);

    //the json
    try {
        jsonArray = myObject.getJSONArray("galgjejson");
        Log.i("JSON", "jsonArray: " + jsonArray.toString());
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    return word;        
}
} 
```

这是json：

```
{ "galgjejson" : [
                { "Nederlands" :  [
                                        { "length7" : [ 
                                                            { "word" : "android" }, 
                                                            { "word" : "camping" },
                                                            { "word" : "koekjes" }
                                                        ]
                                        }
                                ]   
                },
                { "English" : [
                                        { "length7" : [ 
                                                            { "word" : "android" }, 
                                                            { "word" : "camping" },
                                                            { "word" : "koekjes" }
                                                        ]
                                        }
                                ]
                }               
            ]                                               
} 
```

这是日志：

```
03-18 14:06:23.178: I/JSON(6719): myObject_Object: {"Nederlands":[{"length7":
[{"word":"android"},{"word":"camping"},{"word":"koekjes"}]}]}
03-18 14:06:23.178: I/PARSE(6719): get_length: length7
03-18 14:06:23.178: D/AndroidRuntime(6719): Shutting down VM
03-18 14:06:23.178: W/dalvikvm(6719): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
03-18 14:06:23.207: E/AndroidRuntime(6719): FATAL EXCEPTION: main
03-18 14:06:23.207: E/AndroidRuntime(6719): java.lang.NullPointerException
03-18 14:06:23.207: E/AndroidRuntime(6719):     at me.mikey.my.games.galgjex.MikeyJSON.<init>(MikeyJSON.java:38)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at me.mikey.my.games.galgjex.JSONTester$DownloadNewWords.onPostExecute(JSONTester.java:128)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at me.mikey.my.games.galgjex.JSONTester$DownloadNewWords.onPostExecute(JSONTester.java:1)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at android.os.AsyncTask.finish(AsyncTask.java:631)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at android.os.AsyncTask.access$600(AsyncTask.java:177)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at android.os.AsyncTask$InternalHandler.handleMessage(AsyncTask.java:644)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at android.os.Handler.dispatchMessage(Handler.java:99)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at android.os.Looper.loop(Looper.java:137)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at android.app.ActivityThread.main(ActivityThread.java:4745)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at java.lang.reflect.Method.invokeNative(Native Method)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at java.lang.reflect.Method.invoke(Method.java:511)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-18 14:06:23.207: E/AndroidRuntime(6719):     at dalvik.system.NativeStart.main(Native Method) 
```

哦，第 38 行是：

```
jsonArray = myObject.getJSONArray("galgjejson"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:36:06.077

`myObject`很可能是 null，因为您在课堂上拥有它，然后在 mikeyJSON 中私下拥有它。您可能应该尝试：

```
private JSONObject myObject;
private JSONArray jsonArray;

int i;

public MikeyJSON(String jsonString) {
Log.i("JSON", "jsonString: " + jsonString);
try {
    myObject = new JSONObject(jsonString);
    Log.i("JSON", "myObject_Object: " + myObject.toString());
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

} 
```

看看那个 JSON，我很确定您可以使用构造函数中的字符串而不是 JSONObject 创建 JSONArray。

编辑示例。

```
private JSONArray jsonArray;

int i;

public MikeyJSON(String jsonString) {
try {
    jsonArray = new JSONArray(jsonString);
} catch (JSONException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
}

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:37:25.217

正如 Logcat 的第一行所示：

> 03-18 14:06:23.178: I/JSON(6719): myObject_Object: {"Nederlands":[{"length7": [{"word":"android"},{"word":"camping"}, {"word":"koekjes"}]}]}

此时，您已经将 JSONArray 标记为“galgjejson”，因此您需要将第 38 行更改为：

> jsonArray = myObject.getJSONArray("荷兰");

这将为您提供下一个 JSONArray 进行处理

# jquery - 每条推文（如推特）的单独评论框切换？

> ID：15479282
> 
> 赞同：1
> 
> 时间：2013-03-18T14:30:28.507
> 
> 标签：jquery, css

我对 jQuery 和 JS 很陌生。我正在尝试构建类似 Twitter 的东西，当然，是一个更简单的版本。[这是 JSFiddle：](http://jsfiddle.net/9cLfR/1/)基本上我希望每条不同的推文都有自己的评论框。（注意：评论不会有重新评论选项；所有评论都将连续出现在根推文下）现在发生的事情是，因为所有（不同的）推文，评论框出现在最后一条推文的末尾。我将如何实现我想要做的事情？

**Javascript：**

```
$(document).ready(function () {
$("#btn1").click(function () {
    $("p").append(" <b>Appended text</b>.");
});

$(".commentbutton").click(function v() {
    var text = $("#txt1").val();

    $("body").append('<br><div class="x"><label class="gp">' + text + '</label><button id="b1"</button>Comment</div>');
    $("body").find(".x:last").hide().slideDown("slow");

});

$(document).on('click', '.x>button', function () {
    $('body').find('.x:last').append('<input id="txt1" type="text">');
    });
}); 
```

**HTML：**

```
<div style="position:absolute;left:230px;top:30px;border:solid;display:inline-block">
<p>Type a tweet</p>
<input id="txt1" type="text">
<br>
<button id="btn2" class="commentbutton">Tweet</button>
</div> 
```

**CSS：**

```
.gp {
border-style:solid;
max-width:30%;
padding:2px;
display:block;
}
.x {
width:200px;
background-color:#93bbd4;
border-style:solid;
}
#txt1 {
width:200px;
height:28px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:35:35.190

看到这个：[样本](http://jsfiddle.net/9cLfR/5/)

```
$(document).on('click', '.x>button', function () {
    var id = "twt" + $(this).parent().index() +  "txt" + ($(this).parent().find('input').length+1);
    $(this).parent().append('<input id="' + id+ '" type="text">');
}); 
```

我已经解决了 textbox appendind 的问题。除此之外，我还修复了您遇到的**多个 id问题。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:33:49.327

更改`append()`为`prepend()`。如果我理解你的问题是正确的，那就是你所需要的。

# ios - 使用 UIActivityViewController 发送的 UIImage 的控制文件名

> ID：15479284
> 
> 赞同：10
> 
> 时间：2013-03-18T14:30:32.490
> 
> 标签：ios, uiimage, uikit, uiactivityviewcontroller

我正在使用`UIActivityViewController`. 一切都很好，除了图像文件名始终是没有扩展名的“Image-1”。在某些情况下，这会导致一个大问题，例如在邮件应用程序中根本不会打开没有扩展名的图像。

该图像由应用程序生成并以`UIImage`.

有没有办法控制文件名并为图像添加正确的扩展名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:43:14.540

如果其应用程序生成图像（`UIImage`参考），那么您可以使用以下代码：

```
[mailComposer addAttachmentData: UIImagePNGRepresentation(viewImage) mimeType:@"" fileName:@"myImage.png"]; 
```

我在我的项目中使用了相同的代码，可以使用方法创建自己的*PNG*格式图像`UIImagePNGRepresentation()`。

如果您需要*JPEG*图像，请使用`UIImageJPEGRepresentation()`方法。`.jpg`然后用扩展名更改上述方法中的文件名。

有关这两种方法的更多详细信息，请参阅[UIKit 类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T04:11:28.073

我知道控制 UIImage 的文件名或编码类型的唯一方法是将其保存到设备上的文件中，然后将文件的 URL 提供给 UIActivityViewController。查看[此答案](https://stackoverflow.com/a/15826633/406797)以获取可用于完成此操作的代码。这种方法有一些明显的缺点，但对于大多数应用程序来说可能已经足够了。

# javascript - 通过标签名称将属性更改为元素

> ID：15479292
> 
> 赞同：0
> 
> 时间：2013-03-18T14:30:55.787
> 
> 标签：javascript

我有一个要上课的元素。但是循环一直给我

*未定义 getElementsByTagName*

```
<script>
var textarea = getElementsByTagName("textarea");
for(i = 0; i<textarea.length; i++){
textarea .setAttribute("class" "textbox")
}
</script>

 <textarea></textarea>
 <textarea></textarea> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:32:18.167

`getElementsByTagName`不位于全局/`window`对象中，而是位于`document`例如。

```
document.getElementsByTagName(); 
```

您需要像上面那样或在任何`Node`元素上显式调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:31:35.807

利用

```
textarea[i].className="textbox";
//       ^     ^
//       |     |
//   index     |
//         className is the property to change 
```

# c# - 将 Windows Azure 中继服务总线与 Windows Phone 一起使用

> ID：15479297
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:08.567
> 
> 标签：c#, azure, windows-phone-8, azure-servicebusrelay

我使用 Windows azure 设置了一项服务，该服务与控制台应用程序完美配合

我不会过去我所有的服务代码，因为它很多，但这里是客户端代码：

```
static void Main(string[] args)
        {
            // Determine the system connectivity mode based on the command line
            // arguments: -http, -tcp or -auto  (defaults to auto)
            ServiceBusEnvironment.SystemConnectivity.Mode = GetConnectivityMode(args);
            string serviceNamespace = "******";
            string issuerName = "*****";
            string issuerSecret = "*******************************************";

            // create the service URI based on the service namespace
            Uri serviceUri = ServiceBusEnvironment.CreateServiceUri("sb", serviceNamespace, "EchoService");

            // create the credentials object for the endpoint
            TransportClientEndpointBehavior sharedSecretServiceBusCredential = new TransportClientEndpointBehavior();
            sharedSecretServiceBusCredential.TokenProvider = TokenProvider.CreateSharedSecretTokenProvider(issuerName, issuerSecret);            

            // create the channel factory loading the configuration
            ChannelFactory<IEchoChannel> channelFactory = new ChannelFactory<IEchoChannel>("RelayEndpoint", new EndpointAddress(serviceUri));

            // apply the Service Bus credentials
            channelFactory.Endpoint.Behaviors.Add(sharedSecretServiceBusCredential);

            // create and open the client channel
            IEchoChannel channel = channelFactory.CreateChannel();
            channel.Open();

            Console.WriteLine("Enter text to echo (or [Enter] to exit):");
            string input = Console.ReadLine();
            while (input != String.Empty)
            {
                try
                {
                    Console.WriteLine("Server echoed: {0}", channel.Echo(input));
                }
                catch (Exception e)
                {
                    Console.WriteLine("Error: " + e.Message);
                }
                input = Console.ReadLine();
            }

            channel.Close();
            channelFactory.Close();
        }

        static ConnectivityMode GetConnectivityMode(string[] args)
        {
            foreach (string arg in args)
            {
                if (arg.Equals("/auto", StringComparison.InvariantCultureIgnoreCase) ||
                     arg.Equals("-auto", StringComparison.InvariantCultureIgnoreCase))
                {
                    return ConnectivityMode.AutoDetect;
                }
                else if (arg.Equals("/tcp", StringComparison.InvariantCultureIgnoreCase) ||
                     arg.Equals("-tcp", StringComparison.InvariantCultureIgnoreCase))
                {
                    return ConnectivityMode.Tcp;
                }
                else if (arg.Equals("/http", StringComparison.InvariantCultureIgnoreCase) ||
                     arg.Equals("-http", StringComparison.InvariantCultureIgnoreCase))
                {
                    return ConnectivityMode.Http;
                }
            }
            return ConnectivityMode.AutoDetect;
        }       
    } 
```

使用此代码，一切正常，我运行服务，然后运行客户端，当我通过客户端发送消息时，我可以在服务屏幕中看到它...

我试过使用这段代码：

```
private void webClient_UploadStringCompleted(object sender, UploadStringCompletedEventArgs e)
    {
        if (token == "")
        {
            token =
             e.Result.Split('&').Single(x => x.StartsWith("wrap_access_token=",
             StringComparison.OrdinalIgnoreCase)).Split('=')[1];
        }
        string decodedToken = HttpUtility.UrlDecode(token); 

    var uriBuilder =
    new UriBuilder("https://locations.servicebus.windows.net/EchoService");

    uriBuilder.Path += 
    string.Format("HelloWorld"); 

    var webClient = new WebClient();

    if (autho == "")
    {
        autho = string.Format("WRAP access_token=\"{0}\"", decodedToken);
    }
    webClient.Headers["Authorization"] = autho;
    webClient.DownloadStringCompleted += 
    (s, args) => ParseAndShowResult(args);
    webClient.DownloadStringAsync(uriBuilder.Uri);
}
   public void ParseAndShowResult(DownloadStringCompletedEventArgs args)
{
    string result = args.Result;

}

   private void PhoneApplicationPage_Loaded_1(object sender, RoutedEventArgs e)
   {
       var webClient = new WebClient();
       string acsUri = "https://locations-sb.accesscontrol.windows.net/WRAPv0.9/";
       string data = string.Format("wrap_name={0}&wrap_password={1}&wrap_scope={2}",
       HttpUtility.UrlEncode("owner"),
       HttpUtility.UrlEncode("qP/TCHlDzIUidlHC4Q3xNgQn84CLmDx/lYFbDimhj/o="),
       HttpUtility.UrlEncode("http://locations.servicebus.windows.net"));
       webClient.Headers["Content-Type"] = "application/x-www-form-urlencoded";
       webClient.UploadStringCompleted += webClient_UploadStringCompleted;
       webClient.UploadStringAsync(new Uri(acsUri), "POST", data); 
   } 
```

但它唯一做的就是返回一个 xml，说明我拥有的服务列表我需要的是发送一个服务将看到的消息

这里有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:28:26.663

在控制台应用程序中，您的地址前缀是`sb`，而对于您的手机应用程序，它是`https`。我猜您需要将其更改`sb`为使其正常工作。

所以应该是：

```
new UriBuilder("sb://locations.servicebus.windows.net/EchoService"); 
```

此外，您的控制台应用程序根本不在`HelloWorld`URI 上使用，所以我不确定您为什么在电话应用程序中使用它。

# c++ - 如何投射矢量 ::iterator（在堆上）作为 shared_ptr

> ID：15479301
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:13.993
> 
> 标签：c++, boost, iterator, shared-ptr

*恐怕这个领域的每个现有问题/答案似乎都略有不同：*

我有一个**`shared_ptr<vector<Point>> profile`**使用迭代器循环的。我想**`shared_ptr<Point>`**为各种目的保留一个循环外，但我在语法上苦苦挣扎。请问你能建议吗？

这是一个基本示例：

```
shared_ptr<Point> peak;
for (vector<Point>::iterator point=profile->begin(); point!=profile->end(); point++)
{
    ...
    peak = shared_ptr<Point>(*point); // fails
    ...
} 
```

*注意我想使用一个简单的引用/指针`Point`会很简单，但我试图避免这种情况，特别是当涉及到堆时。我也意识到在这种情况下我可以使用索引，但这在容器类之间的可转移性较差。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:34:03.770

你需要的是，`shared_ptr<vector<shared_ptr<Point>>>`如果你想安全地绕过`shared_ptr<Point>`

您遇到的问题是，如果您`shared_ptr<vector<Point>>`超出范围，则任何`shared_ptr<Point>`由成员构造的`vector`都将指向无效内存。

另一方面，如果您新创建`shared_ptr<Point>`的超出范围，那么您将尝试释放由 管理的内存，`vector`这不是一件好事！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:34:00.990

`*point`有类型`Point`，没有`Point*`。

但是，即使您获取了该地址（通过`&*point`），您也无法`shared_ptr`为它创建 a，因为对象的生命周期具有自动存储，它不能（也不需要）由 a 管理`shared_ptr`。

只要原始向量没有被修改，获取对其中`Point`对象的引用（或者实际上是原始指针）是安全的。然而，对向量的修改可能会移动其元素，并且对它们的任何引用都将变为无效。

最后我想知道为什么你的向量被包裹在一个`shared_ptr`. 这很少有道理。你确定你需要这个吗？

# c# - 面板中的标签数组

> ID：15479302
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:15.560
> 
> 标签：c#, arrays, 2d, multidimensional-array

我需要为游戏制作一个 6x6 网格，但所有标签似乎都不起作用，

这可能是小事。

```
Label[][] map = new Label[6][];
for (int i = 0;i < columns;i++)
{
    map[i] = new Label[6];
    for (int j = 0; j < columns; j++)
    {
        map[i][j] = new Label();
        map[i][j].AutoSize = true;
        map[i][j].BackColor = Color.Black;
        map[i][j].Location = new Point(i * spacing, j * spacing);
        map[i][j].Name = "map" + i.ToString() + "," + j.ToString();
        map[i][j].Width = spacing;
        map[i][j].Height = spacing;
        map[i][j].TabIndex = 0;
        map[i][j].Text = "test" + i.ToString() + j.ToString();
        panel1.Controls.Add(map[i][j]);
    }
    this.Controls.AddRange(map[i]);
}
MessageBox.Show("greatsuscces");
return; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:43:25.130

确保你`Panel`的尺寸足够大，首先，可能是 500x500。其次，您需要将所有标签添加到`Panel`而不是`this.Controls`

```
 int spacing = 75;
        int columns = 6;

        //Use your variable above to create the array
        Label[][] map = new Label[columns][];

        for (int i = 0; i < columns; i++) {
            //Create a new sub array
            map[i] = new Label[columns];
            for (int j = 0; j < columns; j++) {
                map[i][j] = new Label();
                map[i][j].AutoSize = true;
                map[i][j].BackColor = Color.Black;
                map[i][j].Location = new Point(i * spacing, j * spacing);
                map[i][j].Name = "map" + i.ToString() + "," + j.ToString();
                map[i][j].Width = spacing;
                map[i][j].Height = spacing;
                map[i][j].TabIndex = 0;
                map[i][j].Text = "test" + i.ToString() + j.ToString();
            }
            //Add the range to the panel
            panel1.Controls.AddRange(map[i]);
        } 
```

# php - mdecrypt_generic 的结果不一致

> ID：15479303
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:15.903
> 
> 标签：php, encryption

我正在尝试使用 PHP“动态”解密文件。我正在使用 mdecrypt_generic 函数，并且我正在分块解密文件，而不是一次解密整个文件。我正在解密的文件托管在远程服务器上。我使用 cURL 以块的形式检索文件并解密并输出每个块。当我从第一个块开始时，这很好用。但是，如果我从不同的块（例如第二个）开始，mdecrypt_generic 会为该块返回不同的结果。现在 PHP 手册说在每次调用 mdecrypt_generic 之前必须重新初始化加密缓冲区。然而，这只会让事情变得更糟，因为当我这样做时，它无法解密除第一个之外的所有块（即使我从第一个开始）。我的代码如下所示：

```
$td = mcrypt_module_open('rijndael-128', '', 'ctr', '');
$init = mcrypt_generic_init($td, $key, $iv);
foreach($chunks as $chunk=>$size){  
    $data = get_chunk($chunk,$size);
    echo mdecrypt_generic($td, $data);
}
mcrypt_generic_deinit($td);
mcrypt_module_close($td); 
```

正如我所提到的，我不会在每次调用 mdecrypt_generic 之前重新初始化加密缓冲区，因为那样会完全破坏它。

**编辑 1（找到问题）：** 我找到了问题，但没有找到解决方案。问题是，文件正在被分块解密，这意味着描述符（$td）正在记住当前位置。但是，我想解密文件而不必从第一个块开始，但我必须修改描述符才能做到这一点，但据我所知，没有这样的选项。我使用的“临时”解决方案是从解密长度等于先前块的随机数据开始，以获得正确的描述符位置。但是因为有些文件非常大，所以这是一个有限的解决方案。

**编辑2（找到解决方案）：** 文件以ctr模式加密，$iv（初始值）就像一个计数器，必须在每个块解密后增加。

# java - JTextPane 中的文本换行在不同的 Java 版本中是否不同？

> ID：15479304
> 
> 赞同：2
> 
> 时间：2013-03-18T14:31:20.580
> 
> 标签：java, swing, java-7, jtextpane, word-wrap

下面是一个 SSCCE，它在我的计算机上用 java 版本 1.6.0_23 包装文本，但不在另一台用 java 版本 1.7.0_17-b02 的计算机上。

两者的操作系统：Windows7 64bit

如果我在文本中添加一些空格，它适用于两者。所以word-wrapping似乎没有问题，但是letter-wrapping。

这似乎是一个错误，但我找不到任何关于它的信息。有谁知道解决方法？谢谢！

这是SSCCE：

```
 import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.SwingUtilities;
import javax.swing.text.DefaultStyledDocument;

public class TextWrapping
{
    public static void main(final String[] args)
    {
        SwingUtilities.invokeLater(new Runnable()
        {

            public void run()
            {
                final JTextPane p = new JTextPane();
                p.setStyledDocument(new DefaultStyledDocument());
                p.setText("123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x123456789x");
                final JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                f.getContentPane().add(new JScrollPane(p));
                f.setSize(400, 400);
                f.setLocation(0, 0);

                f.setVisible(true);
            }
        });

    }
} 
```

# machine-learning - Weka中的混合聚类（Kmeans + Hierarchical）？

> ID：15479305
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:21.087
> 
> 标签：machine-learning, cluster-analysis, weka, hierarchical-clustering

是否可以进行混合聚类`Weka Knowledge Flow`？所以我们可以将 K-means 算法的输出重定向到层次聚类的输入？谢谢。

# vb.net - 双击事件不会在 datagridviewcomboboxcell 上触发

> ID：15479308
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:25.387
> 
> 标签：vb.net, winforms

我有一个 datagridview，我需要在 celldoubleclick 上写一些东西。这适用于除组合框单元之外的所有单元格。它是第一次工作，但一旦焦点放在组合框单元上，它就不起作用了。我试图以编程方式将editmode现在双击工作，但它不显示我的组合框项目。所以我将编辑模式设置为 EditOnEnter 现在它显示所有项目但双击不起作用。就像无限循环。

任何人都可以请提供任何解决方案？

# javascript - chrome 扩展如何在无需重新请求的情况下将对象保存在网页中？

> ID：15479309
> 
> 赞同：1
> 
> 时间：2013-03-18T14:31:26.587
> 
> 标签：javascript, google-chrome, google-chrome-extension

假设我的用户将使用一个定期显示新图像的网站。我希望能够下载这个图像，而不必发送另一个网络请求来检索它（例如，从缓存中或拦截原始请求并将响应写入磁盘，类似的东西）。这可能吗？如果是这样，我将如何将此功能添加到我的扩展程序中？

# wpf - 使用 Style 稍微修改控件模板

> ID：15479310
> 
> 赞同：3
> 
> 时间：2013-03-18T14:31:28.207
> 
> 标签：wpf, combobox, styles, controltemplate

我只需要在`ComboBox`. 您可能已经知道，ComboBox 的`BorderThickness`属性没有多大用处。所以我试图修改`Template`使用以下样式，但无法弄清楚我需要在`Border`标签内写什么来表示 ComoboBox 本身：

```
<Style TargetType="{x:Type ComboBox}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="ComboBox">
                <Border BorderBrush="Black" BorderThickness="2">
                    WHAT GOES HERE?
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我已经尝试过`ContentPresenter`，`ContentControl`但老实说，我对它们在这种特定情况下的用法知之甚少。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:42:40.073

好吧，如果我猜对了，你想把原件放进去`ComboBox`，`Border`对吧？[您可以在此处](http://msdn.microsoft.com/en-us/library/ms752094%28v=vs.85%29.aspx)找到示例模板自定义。
因此，如果您将重要部分（`Grid`）复制到您的文件中，`Border`它应该看起来像标准`ComboBox`的较厚的`Border`。也许您将不得不做一些小的修改，以使其看起来完美。顺便说一句，*MS Blend*在这里会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:58:31.587

您必须编辑完整的 controlTemplate。这是一个你可以随意扩展的小例子。首先是打开组合框的 ToggleButton 的 controlTemplate：

```
 <ControlTemplate x:Key="ComboBoxToggleButton" TargetType="{x:Type ToggleButton}">
        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition Width="15" />
            </Grid.ColumnDefinitions>
            <Border x:Name="Border"  Grid.ColumnSpan="2" BorderThickness="1" />
            <Path x:Name="Arrow" 
              Fill="Black" 
              SnapsToDevicePixels="True" 
              StrokeThickness="1" 
              VerticalAlignment="Center" 
              HorizontalAlignment="Center" 
              Grid.Column="1" 
              Data="M0,0 L0,3 L1,3 L1,4 L2,4 L2,5 L3,5 L3,6 L4,6 L4,5 L5,5 L5,4 L6,4 L6,3 L7,3 L7,0 L6,0 L6,1 L5,1 L5,2 L4,2 L4,3 L3,3 L3,2 L2,2 L2,1 L1,1 L1,0 L0,0 Z" />
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsMouseOver" Value="True">
                <Setter Property="Background" Value="Gray" TargetName="Border"/>
                <Setter Property="BorderBrush" Value="DarkGray" TargetName="Border"/>
            </Trigger>
            <Trigger Property="IsFocused" Value="true">
                <Setter Property="BorderBrush" Value="DarkGray" TargetName="Border"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate> 
```

这是使用此模板的组合框的样式。

```
<Style TargetType="{x:Type ComboBox}">
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBox}">
                    <Border CornerRadius="5" BorderThickness="2" BorderBrush="Red">
                        <Grid>
                        <ToggleButton x:Name="ToggleButton" 
                                      Grid.Column="2"
                                      Focusable="false"
                                      ClickMode="Press"
                                      IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                                      Template="{StaticResource ComboBoxToggleButton}"/>
                        <ContentPresenter x:Name="ContentSite"
                                        IsHitTestVisible="False"
                                        Content="{TemplateBinding SelectionBoxItem}"
                                        ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}"
                                        ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}"
                                        Margin="3,3,21,3"
                                        VerticalAlignment="Stretch"
                                        HorizontalAlignment="Left">
                        </ContentPresenter>
                        <TextBox x:Name="PART_EditableTextBox"
                               Style="{x:Null}"
                               HorizontalAlignment="Left"
                               VerticalAlignment="Bottom"
                               Margin="3,3,21,3"
                               Focusable="True"
                               Background="Transparent"
                               Visibility="Hidden"
                               IsReadOnly="{TemplateBinding IsReadOnly}" />
                        <Popup x:Name="Popup"
                             Placement="Bottom"
                             IsOpen="{TemplateBinding IsDropDownOpen}"
                             AllowsTransparency="True"
                             Focusable="False"
                             PopupAnimation="Slide">
                            <Grid x:Name="DropDown"
                                  Background="WhiteSmoke"
                                  SnapsToDevicePixels="True"
                                  MinWidth="{TemplateBinding ActualWidth}"
                                  MaxHeight="{TemplateBinding MaxDropDownHeight}">
                                    <Border x:Name="DropDownBorder"  BorderThickness="1" Margin="0 0 2 0" />
                                    <ScrollViewer SnapsToDevicePixels="True">
                                        <StackPanel IsItemsHost="True" KeyboardNavigation.DirectionalNavigation="Contained" />
                                    </ScrollViewer>
                            </Grid>
                        </Popup>
                        </Grid>
                    </Border>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

希望能帮助到你。

# css - 选择不属于同一个父元素的第一个子元素

> ID：15479313
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:31.100
> 
> 标签：css, css-selectors

我可能措辞不正确，所以我很抱歉。有没有办法使用 CSS 来定位元素的第一个子元素，而不是其他元素，当它们没有分组在同一个父元素中时？例如：

```
 <div class="parent">
       <div class="littlekid">
    </div>
    <div class="parent">
       <div class="littlekid">
    </div>
    <div class="parent">
       <div class="littlekid">
    </div> 
```

所以说我希望第一个“父母”中的第一个“小孩子”班级是红色的，而所有其他班级都是蓝色的。我尝试过第一个孩子、第 n 个类型、第 n 个孩子、第一个类型，但似乎都没有。他们最终都针对所有“小孩子”课程。我无法为第一个“小孩子”添加额外的课程来定位它。这需要用 javascript 完成吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:33:11.323

假设`<div class="parent"></div>`在其父元素中的第一个元素之前没有其他元素，您可以使用它：

```
div.parent > div.littlekid {
    color: blue;
}

div.parent:first-child > div.littlekid {
    color: red;
} 
```

如果每个父母中有不止一个`<div class="littlekid">`，你也可以使用这个：

```
div.parent:first-child > div.littlekid:first-child {} 
```

# awk - 在 awk 中选择仅日期列

> ID：15479316
> 
> 赞同：-2
> 
> 时间：2013-03-18T14:31:33.280
> 
> 标签：awk, gawk

我有这段代码：

```
{ 
    if ($4 ~search) 
    {
        match ($4, /([0-9]{2}\/([a-zA-z]{3})\/([0-9]{4}))/, dates)

        print dates[1] "\t" dates[2] "\t" dates[3]
    }
} 
```

当它运行时，它会产生这个：

```
[19/Oct/2012:12:34:32
[19/Oct/2012:12:34:32
[19/Oct/2012:12:34:33 
```

所以理论上它正在工作并产生我想要的一些东西，但我如何让它产生`19/Oct/2012`任何建议？

我的问题是我希望输出只生成 2012 年 10 月 19 日的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:47:46.267

您需要修复您的正则表达式：

```
{
    match ($4,/[0-9]{2}\/[a-zA-z]{3}\/[0-9]{4}/,date)
    print date[0] 
} 
```

将输出：

```
19/Oct/2012
19/Oct/2012    
19/Oct/2012 
```

笔记：

*   您当前`regexp`查找带有数字月份的日期，*例如* `19/10/2012`not `19/Oct/2012`。

*   您的捕获组未匹配*（不平衡括号）*。

*   在您给出的示例中，年份`20012`不是`2012`！？

*   你从`dates`到`date`。

*   `date[0]`存储整个匹配，同时`date[n]`引用第 n 个捕获组。

*可能有更好的方法来解决您的整体问题，但是给出的信息非常少（而且非常错误）*是不可能的。

**编辑：**

似乎剩下的唯一问题是放错位置的捕获组。

```
{
    match ($4, /([0-9]{2})\/([a-zA-z]{3})\/([0-9]{4})/, dates)    
    print dates[1] "\t" dates[2] "\t" dates[3]
} 
```

将输出：

```
19    Oct   2012
19    Oct   2012
19    Oct   2012 
```

但是在您的问题中，您声明您想要格式的输出`19/Oct/2012` *（这是我的第一个建议）*！？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:07:13.543

忽略代码示例和输出中的错误，如果您只想去掉前导`[`，那么您可以只`substr`匹配从第二个字符开始的匹配：

```
print substr(date[0], 2)
```

但是，我建议修改您的正则表达式以输出正确的匹配开始。

# php - 在 php 中更改动画 gif 的颜色

> ID：15479318
> 
> 赞同：2
> 
> 时间：2013-03-18T14:31:36.023
> 
> 标签：php, animated-gif

是否有任何工作示例如何读取动画 gif，使用 GD 库或 ImageMagick 更改其任何帧中任何像素的颜色并将其再次保存为动画 gif？

我已经在谷歌上搜索了 2 天，但在任何地方都没有找到答案。

编辑：我有几乎完美的解决方案。但是一些透明（动画）gif 不能正确保持其透明度（只有部分透明度被破坏）。

资源：

*   错误图像之一：[http ://commons.wikimedia.org/wiki/File:Animation30.gif](http://commons.wikimedia.org/wiki/File:Animation30.gif)
*   GifFrameExtractor 类：[https ://github.com/Sybio/GifFrameExtractor](https://github.com/Sybio/GifFrameExtractor)
*   GIFEncoder 类：[http ://www.phpclasses.org/package/3163-PHP-Generate-GIF-animations-from-a-set-of-GIF-images.html](http://www.phpclasses.org/package/3163-PHP-Generate-GIF-animations-from-a-set-of-GIF-images.html)

    ```
    require_once('GIFEncoder.class.php');
    require_once('GifFrameExtractor-master/src/GifFrameExtractor/GifFrameExtractor.php');

    $gifFilePath = "input.gif";
    // check this is an animated GIF
    if (!\GifFrameExtractor\GifFrameExtractor::isAnimatedGif($gifFilePath)) {
        \die('not an namiated image');
    }

    $gfe = new \GifFrameExtractor\GifFrameExtractor();
    $gfe->extract($gifFilePath);
    // frames as a GD source
    $frameImages = $gfe->getFrameImages();
    $frameDurations = $gfe->getFrameDurations();
    // color used as a transparent color, if any
    $tColor = array('red' => -1,'green'=>-1,'blue'=>-1);

    foreach($frameImages as $i => $gdSource) {
        // do something with gdSource
        colorize($gdSource);
        if($i == 0) {
            //get the color used as transparent
            // should be for any frame the same
            $tColor = getTransparentColor($gdSource);
        }
        //GIFEncoder works only with binary data or files
        //It cant work with gd source
        //Therfore i output the gd source to stdout, catch it
        //and use it as binary data.
        //It could be memory consuming, so you might write the
        //frames as a file and then use them instead of binary data.
        \ob_start();          // catch output
        \imagegif($gdSource); // write binary data to output
        $frameImages[$i] =  \ob_get_contents(); //replace GD source by the binary data
        \ob_end_clean();
    }

    // create animated gif
    $gif = new \GIFEncoder(
            $frameImages, //binary data (or path to images on file system)
            $frameDurations,
            0, // infinite loop
            2, // dont know what is this for (number 0-3 or -1 to ignore)
            $tColor['red'], $tColor['green'], $tColor['blue'],
            'bin' // or 'url' if $frameImages is array of paths to images on file system
    );
    // write image to file system
    \FWrite ( \FOpen ( "output.gif", "wb" ), $gif->GetAnimation ( ) );
    // send image to browser
    //Header ( 'Content-type:image/gif' );
    //echo  $gif->GetAnimation ( ); 
    ```

//有用的函数

```
 /**
     * Make grayscale color
     * @param $color array('red'=>,'green'=>,'blue'=>);
     * @return array('red'=>,'green'=>,'blue'=>);
     */
    function transformColor($color) {
        $gst = $color['red']*0.15+$color['green']*0.5+$color['blue']*0.35;
        $color['red'] = $color['green'] = $color['blue'] = $gst;
         return $color;
    } 
```

//有用的函数

```
 /**
     * Get the transparent color from GD resource.
     * If no tranpsarent color, all returned RGB values are -1
     * @param $rs GD resource
     * @return array('red'=>,'green'=>,'blue'=>)
     */
    function getTransparentColor($rs) {
        $transparentIndex = \ImageColorTransparent($rs);
        $transparentColor = NULL;

        if ($transparentIndex >= 0 && $transparentIndex < \ImageColorsTotal($rs)) {
            $transparentColor = @\ImageColorsForIndex($rs, $transparentIndex);
        }
        return $transparentColor ? $transparentColor : array('red' => -1,'green'=>-1,'blue'=>-1);
    } 
```

// 用透明度转换 GD 资源 // 可能有问题，因为如果我单独保存帧，它们会出现上述透明度问题

```
 function colorize($rs) {
        assert('gd' === \get_resource_type($rs));
            // you might want to create copy of the source here 
            // (instead of resource alias)
            $bild = $rs;

            //width
            $x = \imagesx($bild);
            // height
            $y = \imagesy($bild);

            $transparentIndex = \ImageColorTransparent($rs);
            $transparentColor = NULL;

            if ($transparentIndex >= 0 && $transparentIndex < \ImageColorsTotal($bild)) {

                $transparentColor = @\ImageColorsForIndex($rs, $transparentIndex);
            }

            \ImageSaveAlpha($bild, TRUE);
            \ImageAlphaBlending($bild, FALSE);

            $transparentNewIndex = NULL;
            $transparentNewColor = NULL;

            if (!empty($transparentColor)) {
                $transparentIndexNew = \ImageColorAllocate($bild, 255, 0, 255);
                \ImageColorTransparent($bild, $transparentIndexNew);
                $transparentColorNew = @ImageColorsForIndex($bild, transparentIndexNew);
            }
             // transform pixels
            for ($i = 0; $i < $y; $i++) {
                for ($j = 0; $j < $x; $j++) {
                    $index = \imagecolorat($rs, $j, $i);
                    $color = \imagecolorsforindex($rs, $index);
                    if ($index === $transparentIndex) {
                        $col = $transparentIndexNew;
                    } else {
                        $rgb = transformColor($color);
                        //TODO: we have a problem here, if $rgb ~= $transparentColorNew,
                        //      then this pixel will be transparent and not the desired  color
                        $col = \imagecolorresolvealpha($bild, $rgb['red'], $rgb['green'], $rgb['blue'], intval($color['alpha']));
                        if($col == $transparentIndexNew) {
                            //TODO: fix the color not to be transparent
                            // it do not die with the example gif 
                            //die('This might be a problem, but not the problem describlet above this example');
                        }
                    }
                    \imagesetpixel($bild, $j, $i, $col);
                }
            }

            return $bild;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:36:38.970

我相信动画 GIF 有多个帧，因此算法是将 gif 读取为多个帧，更改每个帧中的像素颜色，然后再次保存。你能在 GD 中加载动画 gif 吗？

也许这个库可以帮助你写回 GIF 图像：[http ://www.phpclasses.org/package/3163-PHP-Generate-GIF-animations-from-a-set-of-GIF-images.html](http://www.phpclasses.org/package/3163-PHP-Generate-GIF-animations-from-a-set-of-GIF-images.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:39:13.933

```
$file = "yourImage.gif";
$im = imagecreatefromgif ($file);

$index = imagecolorclosest ( $im,  255,255,255 ); // get your color (rgb)
imagecolorset($im,$index,92,92,92); // set new color (rgb)

$file= "yourResult.gif";
imagegif($im, $file); // save image as gif
imagedestroy($im); 
```

我不确定这是否适用于动画 gif。

# c# - ListView 中具有不同 ItemsSources 的 WinRT MVVM-Light ComboBox

> ID：15479319
> 
> 赞同：2
> 
> 时间：2013-03-18T14:31:36.417
> 
> 标签：c#, listview, combobox, mvvm-light, winrt-xaml

我正在开发一个 WinRT 应用程序，其中我有一个带有 ComboBox 的 Listview。Listview 有一个特定的 ObservableCollection 作为 Itemssource，ComboBox 应该有另一个 ObservableCollection 作为 ItemsSource，因为我应该能够动态更改 ComboBox 的内容。

我使用的是 MVVM-Light 框架，ObservableCollections 填充在 ViewModel 中并通过数据绑定显示。

我会给你一个示例 Xaml 代码：

```
<Page x:Class="MvvmLight2.MainPage"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:ignore="http://www.ignore.com"
  mc:Ignorable="d ignore"
  d:DesignHeight="768"
  d:DesignWidth="1366"
  DataContext="{Binding Main, Source={StaticResource Locator}}">

<Page.Resources>

</Page.Resources>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ListView ItemsSource="{Binding CollectionOne}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding StringOne}"></TextBlock>
                    <ComboBox ItemsSource="{Binding CollectionTwo}" Width="500">
                    <ComboBox.ItemTemplate>
                        <DataTemplate>
                                <TextBlock Text="{Binding StringTwo}"></TextBlock>
                        </DataTemplate>
                    </ComboBox.ItemTemplate>
                </ComboBox>
               </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>  
    </ListView>
</Grid> 
```

和对应的ViewModel：

```
 public class MainViewModel : ViewModelBase
{
    private readonly IDataService _dataService;
    public MainViewModel(IDataService dataService)
    {
        _dataService = dataService;
        CollectionOne = new ObservableCollection<ClassOne>();
        for (int i = 0; i < 4; i++)
        {
            var temp = new ClassOne()
            {
                StringOne = "String " + i.ToString()
            };
            CollectionOne.Add(temp);
        }

        CollectionTwo = new ObservableCollection<ClassTwo>();
        CollectionTwo.Add(new ClassTwo("ADV"));
        CollectionTwo.Add(new ClassTwo("Wettelijk"));

    }

    private ObservableCollection<ClassOne> _collectionOne;
    public ObservableCollection<ClassOne> CollectionOne
    {
        get { return _collectionOne; }
        set
        {
            if (_collectionOne == value)
            {
                return;
            }
            _collectionOne = value;
            RaisePropertyChanged(() => CollectionOne);
        }
    }

    private ObservableCollection<ClassTwo> _collectionTwo;
    public ObservableCollection<ClassTwo> CollectionTwo
    {
        get { return _collectionTwo; }
        set
        {
            if (_collectionTwo == value)
            {
                return;
            }
            _collectionTwo = value;
            RaisePropertyChanged(() => CollectionTwo);
        }
    }

} 
```

例如，在 ClassOne 和 ClassTwo 中，每个类中只有一个带有字符串的属性。

两个集合必须保持分开，因为随机填充时它们的长度可能不同。

**编辑** @Josh 我按照您的指示进行操作，但它似乎仍然不起作用，这是我的调整：

```
<Page x:Class="MvvmLight2.MainPage"
  x:Name="MyControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ignore="http://www.ignore.com"
    mc:Ignorable="d ignore"
    d:DesignHeight="768"
    d:DesignWidth="1366"
    DataContext="{Binding Main, Source={StaticResource Locator}}">

<Page.Resources>

</Page.Resources>

<Grid Background="{StaticResource ApplicationPageBackgroundThemeBrush}">
    <ListView ItemsSource="{Binding CollectionOne}">
        <ListView.ItemTemplate>
            <DataTemplate>
                <StackPanel>
                    <TextBlock Text="{Binding StringOne}"></TextBlock>
                    <ComboBox ItemsSource="{Binding ElementName=MyControl, Path=CollectionTwo}" Width="500">
                        <ComboBox.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding StringTwo}"></TextBlock>
                            </DataTemplate>
                        </ComboBox.ItemTemplate>
                    </ComboBox>
                </StackPanel>
            </DataTemplate>
        </ListView.ItemTemplate>
    </ListView>
</Grid> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:30:11.927

您需要在 datacontext 中上移一级来搜索视图模型，而不是使用 RelativeSource 在列表视图级别绑定的项目：

```
<ComboBox ItemsSource="{Binding RelativeSource={RelativeSource AncestorType={x:Type Page}}, Path=CollectionTwo}" /> 
```

对于 WinRT 情况，请使用控件名称：

```
ElementName=MyControl 
```

而不是通过 AncestorType 搜索并将页面命名为“MyControl”。然后看起来像

```
 <ComboBox ItemsSource="{Binding ElementName=MyControl, Path=DataContext.CollectionTwo}" /> 
```

你的页面看起来像

```
<Page x:Name="MyControl" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:55:26.633

由于您使用 ViewModel Locator 来设置数据上下文，因此您可以重复使用它来查找属性 CollectionTwo。

您的绑定将如下所示：

```
<ComboBox ItemsSource="{Binding Path=Main.CollectionTwo, Source={StaticResource Locator}}" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:47:26.930

ComboBox 绑定相对于 ListItem 的绑定。所以它搜索 CollectionTwo 作为 ClassOne 的一个属性。查看要绑定到的 RelativeSource 或将 CollectionTwo 移动到 ClassOne 类。这样，您可以轻松地为每个 ListViewItem 构建不同的列表。

# ruby-on-rails - Rails 中的 ActionController::Base 如何知道它的模型是什么类？

> ID：15479323
> 
> 赞同：1
> 
> 时间：2013-03-18T14:31:40.610
> 
> 标签：ruby-on-rails, ruby-on-rails-3, metaprogramming, polling, actioncontroller

我正在用 Ruby 进行一些元编程。我正在编写一个库来为我定义一些方法，特别是在控制器中（自动化一些我必须为我的应用程序编写的 find_by 方法）。

目前，我通过将特定控制器的模型名称传递给我的元编程方法来生成这些方法。控制器中**是否**有与 ActiveRecord 模型相关联的方法。

所以，这是一个糟糕的例子

```
module AwesomeGem
  module ClassMethods
    def write_some_methods_for(model)
      raise "Class #{model.class} does not inherit ActiveRecord::Base" unless model < ActiveRecord::Base

      define_method "money_remaining" do |id=nil|
         moolah = id ? model.find(id).money : model.find(params[:id]).money
         render text: moolah
      end

      define_method "money_remaining_poller" do |id=nil|
         obj = id ? model.find(id) : model.find(params[:id])
         # composes some ajax
         render js: moneyjs
         moneyjs
      end
    end
  end
end 
```

所以，要使用这种方法，我打算

```
GamblerController < ApplicationController
  write_some_methods_for Gambler
end 
```

再说一次，我怎样才能做到这样我就不必将 Gambler 类传递给我的方法？是否有某种方法或属性可以直接调用模型？例如。self.send(:model)

一个简单的问题，一个复杂的解释。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:00:54.933

默认情况下，控制器不绑定到特定模型。您可以让一个控制器使用多个不同的模型，甚至可以让一个控制器完全不使用模型。

如果您仍然希望您的代码在“经典”情况下自动运行，您可以查看控制器的名称，并查找具有相同名称的模型（遵循 rails 命名约定）。

# javascript - 单击后如何隐藏我的 ajax 操作链接？

> ID：15479324
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:41.000
> 
> 标签：javascript, asp.net, ajax, asp.net-mvc-3

我正在使用 asp.net mvc 3。我有这个代码在我看来。

```
 <%
                  foreach(Team t in Model.AvailableTeams.AvailableTeams)
                    { %>
                     <%= Ajax.ActionLink(t.Title
                    , "InviteTeamToChallenge"
                    , "Challenge"
                    , new{id = t.TeamId
                    , challengeId = Model.ChallengeId
                    , teamId = t.TeamId
                    , invitedByUserId = Model.userId}
                    , new AjaxOptions
                     {
                          OnSuccess = "hideLabel(teamId)"       
                     } ) %>
                    <% } %> 
```

我试图以任何可能的方式将 teamId 传递给一个 javascript 函数，该函数可以在点击后隐藏操作链接。现在，没有调用 javascript 方法。这是我的javascript：

```
 function hideLabel(teamId) {
          alert("in JS");
          alert(teamId);
          $('.teamId').hide();
       } 
```

我还想刷新页面上的部分视图，其中列出了已选择的团队，但这是我得到这篇文章后要处理的另一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:42:37.770

您需要为每个操作链接设置唯一 ID：

```
new AjaxOptions
                     {
                          OnSuccess = "hideLabel(" + t.TeamId + ")"       
                     },
new { id="actionLink" + t.TeamId  ) 
```

然后

```
function hideLabel(teamId) {
          $('#actionLink' + teamId).hide();
       } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:35:05.500

猜测：

`OnSuccess = "hideLabel(" + t.TeamId + ")"`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-18T14:03:40.563

只需使用

```
OnBegin="javascript:this.style.display='none'"
or 
OnComplete="javascript:this.style.display='none'" 
```

例如

```
@Ajax.ActionLink("Hide button before ajax", "myAction", new AjaxOptions { OnBegin="javascript:this.style.display='none'" }) 
```

或者

```
@Ajax.ActionLink("Hide button after ajax", "myAction", new AjaxOptions { OnComplete="javascript:this.style.display='none'" }) 
```

# html - 如何删除 Html5 中的 Html 表格单元格空间？

> ID：15479326
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:49.297
> 
> 标签：html, cellspacing

我有如下的html脚本

```
 <header>
            <div id="header">
                <table class="headertable">
                    <tr>
                        <td>
                            <table class="headertable">
                                <tr>
                                    <td colspan="2">
                                        <div id="site-title" class="site-title">
                                            <img src="~/Images/site-title.gif" alt="site-title", title="site-title" id="img-site-title" style="display:block" />
                                        </div>
                                    </td>
                                 </tr>
                                 <tr>
                                    <td>
                                        <div id="fullbannerad" class="fullbannerad">
                                            <img src="~/Images/fullbanner.gif" alt="fullbannerad", title="fullbannerad" id="img-fullbannerad" />
                                        </div>
                                    </td>
                                    <td>
                                        <div id="halfbannerad" class="halfbannerad">
                                            <img src="~/Images/halfbanner.gif" alt="halfbannerad", title="halfbannerad" id="img-halfbannerad" />
                                        </div>
                                    </td>
                                 </tr>
                              </table>
                        </td>
                        <td>
                           <div class="site-logo">
                              <img src="~/Images/site-logo.gif" alt="site-logo", title="site-logo" id="img-site-logo" />
                           </div>
                        </td>
                      </tr>
                   </table>
            </div>
        </header> 
```

下面是css

```
table.headertable {
border-spacing: 0;
border-collapse:collapse;}

.headertable td {
padding:0;} 
```

在下面的代码中，页面的 td & table(nested table) 元素之间添加了一个空格（我在 chrome 调试器中检查了这个）

```
<td>
   <table class="headertable"> 
```

我该如何解决这个问题？请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:04:14.967

我通过使用具有浮动属性的嵌套 div 解决了这个问题。HTML5 不鼓励在布局设计中使用嵌套表格。有关更多详细信息，请参阅[此链接](http://webdesign.about.com/od/layout/a/aa111102a.htm)。谢谢詹妮弗，你让我开心。

以下是我的代码更改

```
 <div id="header" class="clearfix">
                <div id="sitetitle" style="float:left">
                    <a href="/Publication/Config/title">
                        <img src="/images/site-title.gif" alt="site-title" , title="site-title" id="img-site-title" />
                    </a>
                </div>
                 <div id="logo" style="float:right">
                     <a href="/Publication/Config/logo">
                        <img src="/images/site-logo.gif" alt="site-logo" , title="site-logo" id="img-site-logo" />
                     </a>
                 </div>
                  <div id="bannerad" style="float:left">
                      <a href="/Publication/Config/fullbanner">
                        <img src="/images/fullbanner.gif" alt="fullbannerad" , title="fullbannerad" id="img-fullbannerad" />
                       </a>
                      </div>
                    <div id="halfbannerad" style="float:right">
                        <a href="/Publication/Config/halfbanner">
                            <img src="/images/halfbanner.gif" alt="halfbannerad" , title="halfbannerad" id="img-halfbannerad" />
                        </a>
                    </div>

            </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:35:42.737

浏览器应忽略文档中的额外空白。如果您的页面布局有问题，则不是因为该位置有多余的空间。

# windows-8 - 我可以在非 Microsoft 平板电脑上调试 Windows Store 应用程序吗？

> ID：15479328
> 
> 赞同：0
> 
> 时间：2013-03-18T14:31:51.553
> 
> 标签：windows-8, visual-studio-2012, microsoft-metro, windows-runtime

我即将创建一个 Windows Store 应用程序，需要购买一个 Windows RT 设备进行测试。Microsoft Surface 是唯一支持从 Visual Studio 进行远程调试的设备吗？或者它是否也适用于三星等第三方平板电脑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:38:50.673

要在平板电脑上进行调试，您需要在平板电脑上安装远程调试工具。其次，两台机器（您的开发设备和平板电脑）需要在同一个网络上，并且本地防火墙必须允许访问。然后在VS2012中选择Remote Debugging，就可以选择平板了。在 Surface RT 上，我必须手动输入名称，因为它没有通过搜索本地网络找到它。

Tim Heuer 有一篇关于这个主题的博客文章：http: [//timheuer.com/blog/archive/2012/10/26/remote-debugging-windows-store-apps-on-surface-arm-devices.aspx](http://timheuer.com/blog/archive/2012/10/26/remote-debugging-windows-store-apps-on-surface-arm-devices.aspx)在最后他说：

> 现在您拥有 Surface（或其他 Windows RT 设备）

如果您的平板电脑是 x86，那么它就是一台 PC，并且也能够运行远程调试代理。注意：下载正确的版本（x86、x64 或 ARM）

# jquery - jQuery 纹理插件？

> ID：15479331
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:31:57.323
> 
> 标签：jquery, textures

我正在开发一个应用程序，我希望用户能够为某些文本选择背景纹理。我喜欢 JQuery Theme Roller 如何让您为事物选择纹理。是否有用于选择随处可用的纹理的 JQuery 插件？我搜索过没有任何运气。我希望有人比我知道的更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:36:45.297

您在寻找这种 [纹理和颜色](http://jquerydoodles.com/texture/)吗？

Ps：我没有尝试这个。只是给你一个提示以推动你更进一步。

# c++ - NUL 和 NULL 在 C 中可以互换吗？

> ID：15479335
> 
> 赞同：13
> 
> 时间：2013-03-18T14:32:24.060
> 
> 标签：c++, c

只需阅读 Kenneth Reek 的 C 书指针。它说一个 NUL 字节是一个位全为 0 的字节，这样写`'\0'`，NULL 的值为 0，它指的是一个值为 0 的指针。

> 两者都是整数并且具有相同的值，因此它们可以互换使用。

这段代码也：

```
char const *keyword[] = { "do", "for", "if", "register", 
                              "return", "switch", "while", NULL }; 
```

在此代码中，NULL 让搜索表的函数检测到表的结尾。那么，我们可以互换 NULL 和 NUL 宏吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-18T14:34:20.017

`NUL`是 ASCII 字符代码 0 的表示法。

`NULL`是**[`stddef`](http://www.cplusplus.com/reference/cstddef/)**为空指针定义的宏。

所以，*不*，它们不能互换使用。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-18T14:34:20.347

没有标准化`NUL`的宏，至少在 C 中没有。

此外，`NULL`与普通文字相比，它的优势`0`在于它向读者发出信号“嘿，我们正在处理一个指针”，这可能被认为是一个优势。

在 C++ 中，这个习语很长一段时间只是 write `0`，但后来他们似乎已经扭转了这一点，并`nullptr`出于某种原因引入了一个新的文字。

`NULL`在 C 中，我建议为指针和`'\0'`字符编写。

# java - 将资源添加到 netbeans 项目中

> ID：15479341
> 
> 赞同：0
> 
> 时间：2013-03-18T14:32:36.760
> 
> 标签：java, netbeans, embedded-resource

我想知道如何将文件添加到我的 NetBeans 项目，然后通过 getResource 或 getResourceAsStream 访问它们。但显然我无法弄清楚我的问题出在哪里。

我在项目的根文件夹中添加了一些 xml 文件，当我尝试通过

```
InputStream is = this.getClass().getClassLoader().getResourceAsStream("some_file.xsd"); 
```

结果我得到`null`了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:42:29.317

确保`some_file.xsd`存在于**classpath**中，然后还验证文件的路径是否正确。

如果没有，您可以改为使用`FileInputStream`. 像这样的东西： -

```
InputStream fileStream = new FileInputStream(filePath); 
```

并确保这`filePath`是一个正确的相对 URL。

# notifications - 服务堆栈中的通知

> ID：15479344
> 
> 赞同：1
> 
> 时间：2013-03-18T14:32:43.887
> 
> 标签：notifications, servicestack

在我的服务中执行某些操作（例如 PUT 或 DELETE）之后，我想向用户或一组用户发送通知，这是在发送操作响应之前完成的。

我实现通知的方法很简单，我有一个接口：

```
public Interface INotification{
    void send(string mail, string content);
    void send(Group group, string content);
} 
```

代表每种类型的通知。我注入了在给定服务中使用的通知类型，但我不认为这是最佳解决方案。有没有更好的方法来实现这一点？是否有任何框架可以轻松与 ServiceStack 集成来帮助我实现这一目标？

从我的角度来看，另一个问题是加载模板，每次发送通知时都会这样做。我不喜欢这种方法，因为我认为这不是最优的。（但这是一个不同的问题）

感谢您为我提供的所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:14:01.983

我正在考虑将 EventStore 添加到我的应用程序以处理类似的场景，并增加了对象更改的可审计历史记录的要求：

[https://github.com/joliver/EventStore](https://github.com/joliver/EventStore)

我还没试过。

# javascript - 在 jQuery 插件中访问原始目标元素

> ID：15479350
> 
> 赞同：1
> 
> 时间：2013-03-18T14:33:02.243
> 
> 标签：javascript, jquery

我整理了一个 jQuery 插件来查询服务器并显示一个工具提示弹出窗口。是的，我知道可能有更好的可用，但我一半的动机是自己学习如何做到这一点。现场演示位于[http://jsfiddle.net/sVZah/](http://jsfiddle.net/sVZah/)，脚本如下所示。将鼠标悬停在元素上时，我希望允许开发人员添加要发送到服务器的其他数据。我的想法是将 getData() 方法添加到我的插件中（请注意，jsfiddle 示例没有这样做，因为它需要传递 demoJSON 对象来模拟 ajax）。问题是`this`在方法中指的是工具提示而不是初始元素（即`p.myElement`），因此我无法访问与原始元素关联的数据（即`data-id`）。我应该如何访问 getData 方法中的原始目标元素？如果我的整个一般方法并不理想，请让我知道并推荐一种更好的方法，因为这在很大程度上是一种学习体验。

作为一个非官方的问题，如何防止悬停在元素右侧启动弹出窗口？我认识到这可能更像是一个 HTML 问题，虽然我不希望得到答案，但我很乐意得到答案。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
    <head> 
        <meta http-equiv="content-type" content="text/html; charset=ISO-8859-1" /> 
        <title>screenshot</title>  
        <script src="http://code.jquery.com/jquery-latest.js" type="text/javascript"></script> 
        <script src="jquery.ajaxTip.js" type="text/javascript"></script> 
        <style type="text/css">

            .myElement{margin:100px;}
            .ajaxToolActive{color:blue;}

            .myAjaxTip {
                position:absolute;
                border:1px solid #CECECE;
                background:white;
                padding:10px;
                display:none;
                color:black;
                font-size:11px;-moz-border-radius:4px;
                box-shadow: 3px 1px 6px #505050;
                -khtml-border-radius:4px;
                -webkit-border-radius:4px;
                border-radius:4px;
            }
        </style> 

        <script type="text/javascript">
            $(function(){
                $('.myElement').ajaxTip({
                    display: function(d){return '<p>'+d.name+'</p><p>'+d.address+'</p><p>'+d.city+', '+d.state+'</p>';},
                    getData:function(){console.log(this);return {id:123}},
                    'class':'myAjaxTip'
                });
            });
        </script>
    </head>

    <body>
        <p class="myElement" data-id="1" title="ajaxTip Popup">John Doe</p>
        <p class="myElement" data-id="2" title="ajaxTip Popup">Jane Doe</p>
        <p class="myElement" data-id="3" title="ajaxTip Popup">Baby Doe</p>
    </body> 
</html> 

/*
* jQuery ajaxTip
* Copyright 2013 Michael Reed
* Dual licensed under the MIT and GPL licenses.
* 
* Notes
*/
(function( $ ){

    var methods = {
        init : function( options ) {
            // Create some defaults, extending them with any options that were provided
            var settings = $.extend({
                'url'      : 'getAjaxTip.php',        //To include extra data sent to the server, included it in the url
                'class'    : 'standardAjaxTip',
                'mouseMove': true,
                'delay'    : 250,   //miliseconds to delay before requesting data from server
                'xOffset'  : 20,
                'yOffset'  : 10,
                'dataType' : 'json',
                'getData'  : function(){return {}}, //Use to set additional data to the server
                'display'  : function(data){   //User function must include function(data) {... return string}
                    var string='';
                    for (var key in data) {string+='<p>'+data[key]+'</p>';}
                    return string;
                }
                }, options  || {});     //Just in case user doesn't provide options

            return this.each(function(){
                var showing,title,timeoutID,ajax,$t=$(this),ajaxTip;
                $t.hover(function(e) {
                    if(!showing){
                        title = this.title;this.title = "";//Prevent title from being displayed,and save for later to put back    
                        timeoutID=window.setTimeout(function() {
                            ajax=$.get( settings.url,settings.getData(),function(data){
                                ajaxTip=$('<div />').addClass(settings.class).html(((title != '')?'<h3>'+title+'</h3>':'')+settings.display(data))
                                .css("top",(e.pageY - settings.yOffset) + "px")
                                .css("left",(e.pageX + settings.xOffset) + "px")
                                .appendTo('body').fadeIn("fast");                    
                                showing = true;
                                $t.addClass('ajaxToolActive');
                                }, settings.dataType);
                            },settings.delay); //Delay before requesting data from server
                    }
                    },
                    function()
                    {
                        //When not hover
                        if (typeof ajax == 'object') {ajax.abort();}
                        window.clearTimeout(timeoutID);
                        this.title = title;    
                        $t.removeClass('ajaxToolActive');
                        if(showing){ajaxTip.remove();}
                        showing = false;
                });

                $t.mousemove(function(e) {
                    if(settings.mouseMove && showing) {ajaxTip.css("top",(e.pageY - settings.yOffset) + "px").css("left",(e.pageX + settings.xOffset) + "px");}
                });
            });
        },

        //Add additional methods as needed
        //destroy : function() {}

    };

    $.fn.ajaxTip = function(method) {
        if ( methods[method] ) {
            return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
        } else if ( typeof method === 'object' || ! method ) {
            return methods.init.apply( this, arguments );
        } else {
            $.error( 'Method ' +  method + ' does not exist on jQuery.ajaxTip' );
        }    
    };

})( jQuery ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:39:32.160

您可以使用 apply 或 call 方法更改 getData 的上下文

```
ajax=$.get( settings.url, settings.getData.call($t),function(data){ 
```

在这种情况下，在您的`getData`函数中，这将是`$t`jquery 对象，因此您可以调用

```
$('.myElement').ajaxTip({

    display: function(d){
        return '<p>'+d.name+'</p><p>'+d.address+'</p><p>'+d.city+', '+d.state+'</p>';
    },
    getData:function(){
       alert(this.data('id'));
    },
    'class':'myAjaxTip'
}); 
```

# loops - 在 Clojure 中，如何正确终止此循环

> ID：15479351
> 
> 赞同：0
> 
> 时间：2013-03-18T14:33:03.220
> 
> 标签：loops, clojure

我刚刚进入 Clojure，想做一些简单的函数来弄湿我的脚，并尝试摆脱我的命令式编程背景。

下面只是简单地搜索一个字符串中的重复元素，但是循环似乎使它失去了控制；我做错了什么？是的，这可能看起来势在必行；我仍在尝试围绕函数式编程和非状态更改。是的，html 没有经过验证，我只是以它为例。

```
(def src "
  <html>
  <head>
  <title>Astronomy
  </title>
  <title>Science
  </title>
  </head>
  </html>
")

(defn findit [ele body i]
  (let [n (.indexOf body (clojure.string/join ["<" ele ">"]) i)]
    (if (> n -1)
      (let [n2 (.indexOf body (clojure.string/join ["</" ele ">"]) (+ n 1))] ;if we found opening element, then find closing element
        (if (> n2 -1) ;found both open and close of element?
          [(subs body (+ n (.length ele) 2) n2) (+ n2 1)]))))
  )

; (let [[r i] (findit "title" src 69)] (println i) (if r (println r,i)))

(defn findthem [ele body]
  (loop [x 0]
    (let [[r i] (findit ele body 0)]
      (println r,i)
      (if i
        (recur i)))
    )
  )

(findthem "title" src) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:35:15.347

在`let`循环的每次迭代中发生的语句中，`findit`使用索引为`0`，而不是`x`（或，`i`）调用。

```
(defn findthem [ele body]
  (loop [i 0]
    (let [[r i] (findit ele body i)]
      (println r i)
      (when i
        (recur i))))) 
```

# javascript - 如何在指定浏览器中打开 Windows 8 中的 URL

> ID：15479352
> 
> 赞同：1
> 
> 时间：2013-03-18T14:33:05.573
> 
> 标签：javascript, windows-8, windows-store-apps, winjs

我创建了一个 JavaScript Windows Store 空白应用程序，并添加了以下代码以在默认浏览器中启动 Google。

```
var url = new Windows.Foundation.Uri("http://www.google.com")
Windows.System.Launcher.launchUriAsync(url); 
```

我可以做些什么来指定一个特定的浏览器来启动谷歌？可能吗？我想我在某个地方读到了我无法做到这一点，但我似乎再也找不到那个论坛了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:23:42.873

你不能这样做。您的应用对安装了哪些浏览器一无所知，因此即使框架允许这样做（它不允许），它也无法定位特定的浏览器。要记住的另一件事是您的用户应该处于控制之中（在这种情况下，通过指定他们的默认浏览器）。您不应尝试覆盖此选择。

# xslt - XSLT for-each，遍历文本和节点

> ID：15479353
> 
> 赞同：0
> 
> 时间：2013-03-18T14:33:08.513
> 
> 标签：xslt, text, foreach

我仍在学习 XSLT，并且对 for-each 循环有疑问。

这就是我所拥有的 XML

```
<body>Here is a great URL<link>http://www.somesite.com</link>Some More Text</body> 
```

我想要的是 for-each 循环是否遍历这些块 1\. 这是一个很棒的 URL 2\. [http://www.somesite.com](http://www.somesite.com) 3\. 更多文本

这可能很简单，或者不可能，但是如果有人可以帮助我，我将不胜感激！

谢谢，迈克尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:45:32.703

您应该可以通过以下方式执行此操作：

```
<xsl:for-each select=".//text()">
  <!-- . will have the value of each chunk of text. -->
  <someText>
    <xsl:value-of select="." />
  </someText>
</xsl:for-each> 
```

或者这可能更可取，因为它允许您拥有一个可以从多个不同位置调用的模板：

```
<xsl:apply-templates select=".//text()" mode="processText" />
<xsl:template match="text()" mode="processText">
  <!-- . will have the value of each chunk of text. -->
  <someText>
    <xsl:value-of select="." />
  </someText>
</xsl:for-each> 
```

# shell - 需要帮助确认这条线的作用

> ID：15479359
> 
> 赞同：-2
> 
> 时间：2013-03-18T14:33:17.063
> 
> 标签：shell, unix

我想我对这条线的实际作用有一个很好的了解。此行是整个一周运行的系统清理脚本的一部分。

```
DBSBAKDIR=/home/dbtmp/backups
find $DBSBAKDIR -type f -mtime +4 -exec rm -f {} \; 
```

据我了解，这是否会删除`/home/dbtmp/backups`目录中超过 4 天的所有文件？

如果我想更改逻辑以删除所有超过 2 天的文件，我只需`+4`将`+2`.

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:25:18.323

如您所料，`-mtime`开关是`find`操作的天数。

所以你的假设是好的。您还可以执行更复杂的技巧，例如：

```
find "$DBSBAKDIR" -type f -mtime +4 -mtime -10 -exec echo rm -f {} \; 
```

在几天的范围内删除文件 > 4 && < 10

* * *

要更进一步，请参阅

[`man find`](http://linux.die.net/man/1/find)

# geolocation - 如何检测 Android 相机地理标记设置是否打开/关闭（EXIF 数据中的 GPS 信息）

> ID：15479360
> 
> 赞同：5
> 
> 时间：2013-03-18T14:33:18.393
> 
> 标签：geolocation, settings, android-camera, exif

我试图找出是否有办法检测 Android 设备上相机的“地理标签”或“商店位置”设置。我不是指我非常熟悉的一般位置访问设置，而是在您使用相机时更“隐藏”的设置。

大多数用户甚至都不知道它的存在，默认情况下它是关闭的，我希望能够告诉用户这个设置是关闭的，这样他们就可以根据需要打开它，这样图片就会有所有的有关其位置的 EXIF 数据。

我希望这个问题之前没有得到回答，如果是这样，我很抱歉，请您将我链接到正确的线程。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T20:49:02.640

每个 Android 设备通常都带有自己的自定义相机应用程序，由该设备的制造商制作。每个都有自己的 UI，并且可能有自己的方式/位置来存储此设置，如果它甚至存在于该设备。所以这个问题的任何答案都将严重依赖于设备。

但是，即使您只使用 AOSP 相机应用程序（Nexus 设备上使用的应用程序），也没有适用于此的 API。该应用程序会在第一次运行应用程序时询问您是否要启用 GPS 标记，之后可以在设置中找到启用/禁用地理标记的选项。

无法确认该设置是否开启，因为它不是任何公共或标准 Android API 的一部分。您可能可以使用辅助功能 API 执行某些操作来读取这些设置，但这样做需要大量权限[（此处为辅助功能服务文档）](http://developer.android.com/guide/topics/ui/accessibility/services.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:10:03.973

要从文件中提取`EXIF`信息，您可以考虑一个类似于此[代码片段](http://androidxref.com/4.2.2_r1/xref/pdk/apps/TestingCamera/src/com/android/testingcamera/SnapshotDialogFragment.java#148)`updateExif`中所示示例的示例。这将使您能够获取存储在文件中的所有信息，包括品牌、闪光灯、焦距等。`EXIF`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-13T17:25:00.843

谈到 Nexus 设备附带的 Android 4.3 相机应用程序，您可以查看和更改设置，如下所示：

1.  打开相机应用程序。

2.  白色圆圈（应用程序屏幕底部三个图标中最右边的）用于调出主菜单。如果“商店位置”被关闭，该圆形图标将显示一个带有一条线的小位置图标。如果打开“存储位置”，则没有肯定的指示。如果要更改设置，请点击它继续。

3.  点击设置图标（中间的五个图标）以调出“更多选项”菜单。

4.  “商店位置”图标是五个图标中最左边的。点击该图标可切换设置（并关闭菜单）。如果“商店位置”关闭，则显示该图标并带有一条穿过它的线，否则没有。

# asp.net - Windows 7 页面重定向上的 IE10 未按预期运行

> ID：15479364
> 
> 赞同：2
> 
> 时间：2013-03-18T14:33:26.517
> 
> 标签：asp.net, windows-7, internet-explorer-10

我正在 IE 10 标准模式下进行测试。我有一个`Login.aspx`页面位于登录目录（即`Login/Login.aspx`）中。我`response.redirect`对一个页面进行处理`Default.aspx`，该页面是根目录中的页面（即。`Response.Redirect("../Default.aspx",true);`）。还尝试`~/Default.aspx`导航到根目录。但不是去 Default.aspx 控制达到`Login.aspx`.

我确实在 IE 开发人员的工具中观察到它命中`Default.aspx`但事务时间 < 1 毫秒。我看到它没有命中定义在`default.aspx`. 如果我使用 Server.transfer 它可以代替重定向，但我希望它仅与重定向一起使用。

它也可以在我的同事机器上正常工作而无需进行任何更改，并且在我机器上最新的 Firefox 和 chrome 上也可以正常工作。它在我的机器上也适用于 IE9 标准，但不适用于 IE 10 标准。

任何人碰巧知道我是否缺少任何设置或某些东西。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T10:10:22.873

检查您的防病毒设置，在工作中遇到同样的问题...

对于另一个现实生活样本

到这里

[http://www.trojaner-board.de/133535-redirect-problem-ihavenet-ie10-win7.html](http://www.trojaner-board.de/133535-redirect-problem-ihavenet-ie10-win7.html)

希望它会有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:43:06.037

您可以使用 DestinationPageUrl 参数吗？

```
<asp:Login ID="Login1" runat="server" PasswordRecoveryText="Password forgotten?"
                    DestinationPageUrl="~/Default.aspx"  
                    >
                </asp:Login> 
```

# java - 以编程方式更改 deployment.properties 文件

> ID：15479368
> 
> 赞同：2
> 
> 时间：2013-03-18T14:33:41.270
> 
> 标签：java

有没有办法以编程方式更改deployment.properties（用户的appdata文件夹中的那个）中的选项（不直接写入文件）？

例如，对于我可以使用的系统选项：

```
System.setProperty("My Property", "My Value"); 
```

**编辑：**基于@eis 答案，以下代码（作为示例）有效：

```
import com.sun.deploy.config.Config;

public class Main {
    public static void main(String[] args) {
        Config.setMixcodeValue(Config.MIXCODE_ENABLE);
        Config.store();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:57:50.637

这些选项旨在从 java 控制面板进行更改。

如果它被锁定，用户[无法更改它](http://docs.oracle.com/javase/1.5.0/docs/guide/deployment/deployment-guide/properties.html)：

> 任何系统部署属性，比如 SomeKey=SomeValue，都可以通过包含另一个键 SomeKey.locked 来锁定。键 SomeKey.locked 可能会也可能不会被设置为一个值；在任何一种情况下， SomeKey=SomeValue 都将被锁定，因此用户无法更改它。如果系统部署属性未锁定，则允许用户更改它。

如果不是，用户可以通过控制面板进行更改。

现在，就编程访问而言，在 sun 实现类中有一个[Config 类](https://web-beta.archive.org/web/20120826070914/http://javasourcecode.org/html/open-source/jdk/jdk-6u23/com/sun/deploy/config/Config.java.html)，它提供对至少其中一些属性的访问，例如 setCacheDirectory()。对于那些暴露的人来说，这种改变机制可能是有效的。

至于其他：基于上面提到的那个类，deployment.properties 在内部保存为系统属性，所以我看不出 System.setProperty() 也不会改变这些的原因。然而，改变这样的属性可能会也可能不会有任何影响。

# c++ - 带有 Qt5 的 OpenGL：#error gl.h 包含在 glew.h 之前

> ID：15479374
> 
> 赞同：3
> 
> 时间：2013-03-18T14:34:00.140
> 
> 标签：c++, qt, opengl, qt5, glew

我在 Qt4.8 上有项目，并试图用 Qt5.1 构建它。我收到很多

```
#error gl.h included before glew.h 
```

和

```
#error glext.h included before glew.h 
```

错误。似乎 Qt5 与 OpenGL 发生了很大变化。所有包括

```
#include "GL/glew.h"
#include "GL/gl.h"
#include "GL/glu.h" 
```

glew.h 总是第一个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-16T20:24:03.487

假设您只在使用需要使用 GLEW 加载的函数的类中使用 OPENGL 调用，那么这将起作用。

我解决这个问题的方法是将所有 GLEW h 包含在 .CPP 文件中，但在包含头文件之前（其中 QTGUI 又包含 OPENGL）。

所以这就是我在 GLWIDGET.CPP 中的方式：

```
#include <GL/glew.h>
#include <GL/gl.h>
#include <GL/glu.h>

#include <GLWidget.h> 
```

如您所见，我的 GLWidget 是来自 QGLWidget 的派生类，它需要包含 QTGUI 和所有这些。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T16:56:47.113

标头是否首先包含在某些 .h 文件中并不重要。头文件不是独立的。重要的是从源文件中看到包含的顺序。

您似乎有太多的标题包含（一般来说，您应该将标题到标题的包含保持在绝对最低限度）。我们无法解决这个问题。你只需要解开你的标题问题。

# rest - 使用提琴手编写 ServiceStack REST 方法的请求

> ID：15479378
> 
> 赞同：2
> 
> 时间：2013-03-18T14:34:11.347
> 
> 标签：rest, servicestack, fiddler

我可以通过设置 Content-Type : "application/json" 并使用 fiddler 传递参数或组合主体来测试 Web 服务，例如：{"name":"test"}。但是，如何为 POST 方法编写 XML 内容类型的请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:46:44.650

大概，您将**Content-Type**设置为**application/xml**并使用 XML 来格式化请求正文。例如测试，尽管格式取决于 API 的预期。

# jquery - $.focus() 在 JQuery 1.9.1 中没有触发？

> ID：15479380
> 
> 赞同：1
> 
> 时间：2013-03-18T14:34:16.287
> 
> 标签：jquery

$('#id').focus() 在 JQuery 1.9.1 中似乎没有触发。

这个小提琴（[http://jsfiddle.net/qnLVR/12/](http://jsfiddle.net/qnLVR/12/)）在以前版本的 JQuery 中工作，但在 1.9.1 中中断。您可以通过更改 JSFiddle 中的 JQuery 版本并重新运行脚本来看到这一点。

手动聚焦输入将触发事件，但调用 .focus() 不会。知道为什么会这样吗？

这是我的标记：

```
<input type="text" id="inp"> </input>
<button id='button'>Is Focused?</button> 
```

这是我的 JavaScript：

```
var focused = false;

$('#inp').focus(function() {
  focused = 'true';  
})

$('#inp').focus();
$('#button').click(function() {alert(focused)}); 
```

我正在使用 Firefox，它似乎可以在 Chrome/IE9 中使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T17:31:40.947

You're running into this bug: [http://bugs.jquery.com/ticket/13363](http://bugs.jquery.com/ticket/13363)

If you're triggering the event just to make the handlers run, use `$('#inp').triggerHandler("focus")` instead.

# c# - C# 中的位置类型（solr）

> ID：15479381
> 
> 赞同：2
> 
> 时间：2013-03-18T14:34:18.280
> 
> 标签：c#, .net, solr, lucene, solrnet

我在我的 solr schema.xml 中有这个字段

```
<field name="geocode"
       type="location"
       indexed="true" 
       stored="true"
       multiValued="false" /> 
```

我想知道，我的 c# 类中需要什么类型的对象？

我正在尝试这样做，但 solr 会引发错误。

```
 [SolrField("geocode")]
 public System.Drawing.PointF GeoCode { get; set; }

SEVERE: java.lang.NumberFormatException: For input string: "{X=0"
    at sun.misc.FloatingDecimal.readJavaFormatString(Unknown Source)
    at java.lang.Double.parseDouble(Unknown Source)
    at org.apache.lucene.spatial.DistanceUtils.parsePointDouble(DistanceUtil
    s.java:410) 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:51:19.187

截至 2012 年 10 月，SolrNet 带有一个内置的[Location](https://github.com/mausch/SolrNet/blob/master/SolrNet/Location.cs)类，用于支持 GeoSpatial 搜索。我建议从源代码获取最新版本 - [GitHub 上的 SolrNet](https://github.com/mausch/SolrNet)或从[夜间构建](http://teamcity.codebetter.com/project.html?projectId=project36&guest=1)并使用此类。

对于查询，SolrNet 添加`SolrQueryByDistance`了用于创建 geofilt 或 bbox 查询。请参阅[SolrNet - 查询](https://code.google.com/p/solrnet/wiki/Querying)更多详细信息。

# javascript - 逻辑相似代码的圈复杂度

> ID：15479384
> 
> 赞同：3
> 
> 时间：2013-03-18T14:34:22.893
> 
> 标签：javascript, cyclomatic-complexity

考虑以下三个函数，它们都以相同的方式运行，使用不同的代码来实现相同的事情（示例是用 JavaScript 编写的，我对应用于 JavaScript 的答案特别感兴趣，但这个问题真的适用于任何具有相似结构的语言）：

```
// Random number from 0-9
var x = Math.floor(Math.random() * 10);

// JSHint reports a cyclomatic complexity of 3
function a() {
    if (x === 0) {
        return "First";
    } else if (x === 1 || x === 2) {
        return "Second"; 
    }
    return "Third";
}

// JSHint reports a cyclomatic complexity of 4
function b() {
    switch (x) {
    case 0:
        return "First";
    case 1:
    case 2:
        return "Second";
    default:
        return "Third";
    }
}

// JSHint reports a cyclomatic complexity of 1
function c() {
    return x === 0 ? "First" : x === 1 || x === 2 ? "Second" : "Third";
}

// All three functions return the same value
console.log(a(), b(), c()); 
```

JSComplexity工具报告所有三个函数的复杂度为 4，这意味着[运算](http://jscomplexity.org/)`||`符被视为独立分支，贯穿`case`语句也是如此。JSHint 似乎并不关心`||`操作符，但它确实`case`以相同的方式处理失败语句。似乎让条件运算符完全错误。

在计算圈复杂度时，是否应将贯穿`case`语句和逻辑“或”运算符视为独立分支？那么三元条件呢（我相信这更简单，JSHint 在这种情况下显然是错误的）？上述所有三个函数都应该具有相同的圈复杂度吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T15:20:08.720

圈复杂度是通过代码的线性独立路径的数量。虽然失败`case`是空洞的，但我相信这无疑是一条不同的道路。所以问题是是否`||`引入了一个新的分支？

我只是在这里大声思考，但我认为因为 JavaScript 对条件执行短路评估，我们确实从析取中得到了两个分支。例如，您的`a`函数相当于：

```
function a() {
    if (x === 0) {
        return "First";
    } else if (x === 1) {
        return "Second"; 
    } else if (x === 2) {
        return "Second";
    } else {
       return "Third";
    }
} 
```

...它有 4 个分支，即使其中两个执行相同的功能。（即，边的线性独立，而不是顶点。）但是，如果 JS 不做短路评估，我会倾向于考虑`x === 1 || x === 2`只调用一个分支。

因此，要回答您的问题，我认为您的所有三个函数都应该具有相同的圈复杂度：4。

# javascript - 图像未正确放入 Dropbox

> ID：15479390
> 
> 赞同：1
> 
> 时间：2013-03-18T14:34:46.427
> 
> 标签：javascript, jquery-plugins, coverflow

嘿伙计们，我正在使用拖放功能基本上将列表中的图像拖放到将触发某种偶数的下拉框。但是，当我将图像拖放到顶部时，它只会在顶部重复，而不是在下拉框中。

（*编辑*：jQuery Coverscroll 插件主页：[http](http://slobodan.99k.org/plugins/coverscroll.html) ://slobodan.99k.org/plugins/coverscroll.html ）

对于我的生活，我无法弄清楚为什么要这样做。我正在使用我下载的外部脚本来添加滑动图像效果，这是我的代码：

## CSS

```
body {
    font-family:Arial, Helvetica, sans-serif;
}
#container2 {
    width:850px;
    height:200px;
    margin-left:25px;
}
#container2 img, #container2 .item {
    width:100%;
    height:100%;
    -webkit-border-radius: 10px;
    -moz-border-radius: 10px;
    -o-border-radius: 10px;
    border-radius: 10px;
    -moz-box-shadow: 0px 5px 5px #777;
    -webkit-box-shadow: 0px 5px 5px #777;
    box-shadow: 0px 5px 5px #777;
}
#dragBox {
    width:336px;
    height:221px;
    margin:10px;
    padding:10px;
    border:1px solid #aaaaaa;
} 
```

## 脚本

*   **标签**

    ```
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
    <script src="scripts/jquery.coverscroll.min.js"></script> 
    ```

*   **javascript**

    ```
    function allowDrop(ev) {
        ev.preventDefault();
    }

    function drag(ev) {
        ev.dataTransfer.setData("Text", ev.target.id);
    }

    function drop(ev) {
        ev.preventDefault();
        var data = ev.dataTransfer.getData("Text");
        var theNode = document.getElementById(data);
        var nodeCopy = theNode.cloneNode(true);
        ev.target.appendChild(nodeCopy);
        if (data == "drag1") {
            foodOne();
        }
        if (data == "drag2") {
            foodTwo();
        }
        ev.target.removeChild(nodeCopy);
    }

    function foodOne() {
        alert("You choose Food One");
    }

    function foodTwo() {
        alert("You choose Food Two");
    } 
    ```

## HTML

```
<div id="container2">
    <img id="drag1" src="foodOne.jpg" draggable="true" ondragstart="drag(event)"
    width="336" height="221">
    <img id="drag2" src="foodTwo.jpg" draggable="true" ondragstart="drag(event)"
    width="336" height="221">
    <img id="drag1" src="foodThree.jpg" draggable="true" ondragstart="drag(event)"
    width="336" height="221">
    <img id="drag2" src="foodFour.jpg" draggable="true" ondragstart="drag(event)"
    width="336" height="221">
</div>
<script>
    $('#container2').coverscroll();
</script>
<br/>
<br/>
<br/>
<br/>
<div div align="center">
    <div id="dragBox" ondrop="drop(event)" ondragover="allowDrop(event)"></div>
</div> 
```

如果有人可以帮助解决这个问题，那就太棒了。

这是我进行实际拖放之前的样子：

![图 1](../Images/997aaf984f7ff759c0634e5dd7a2d505.png)

在我将图像放入框中后：

![图 2](../Images/a28de8e91f747baa869a22150429e32a.png)

# c# - Mono 中的 NamedPipeServerStream

> ID：15479392
> 
> 赞同：1
> 
> 时间：2013-03-18T14:34:51.260
> 
> 标签：c#, monodevelop, .net, namedpipeserverstream

我正在尝试将 C#.Net 项目转换为 Mono。在 Mono 中不支持 NamedPipeServerStream 和 NamedPipeClientStream 类并抛出 Unhandle 异常。你能帮帮我吗？

**代码：**

```
class Program
{
    static string _PipeName = "testPipe";
    static void Main(string[] args)
    {

        ListenForPipeServer();
    }

    static void ListenForPipeServer()
    {
        using (NamedPipeServerStream pipeServer = new NamedPipeServerStream(
                          _PipeName,
                          PipeDirection.InOut,
                          2,
                          PipeTransmissionMode.Message,
                          PipeOptions.None

                          ))
        {
            StreamReader sr = new StreamReader(pipeServer);
            StreamWriter sw = new StreamWriter(pipeServer);

            do
            {
                try
                {
                    pipeServer.WaitForConnection();
                    sw.WriteLine("Testing");
                    sw.Flush();
                    pipeServer.WaitForPipeDrain();
                    Console.WriteLine(sr.ReadLine());

                }
                catch (Exception)
                {

                    throw;
                }
                finally
                {

                    pipeServer.WaitForPipeDrain();
                    if (pipeServer.IsConnected) pipeServer.Disconnect();
                }

            } while (true);

        }
    }

} 
```

**未处理的异常：**

> System.IO.IOException：创建命名管道时出错：错误代码 -1
> 在 System.IO.Pipes.UnixNamedPipe.EnsureTargetFile（System.String 名称）[0x0001f] 在 /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono -2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/mcs/class/System.Core/System.IO.Pipes/PipeUnix.cs:131 在 System.IO.Pipes .UnixNamedPipeServer..ctor（System.IO.Pipes.NamedPipeServerStream 所有者，System.String pipeName，Int32 maxNumberOfServerInstances，PipeTransmissionMode 传输模式，PipeAccessRights 权限，PipeOptions 选项，Int32 inBufferSize，Int32 outBufferSize，HandleInheritability 可继承性）[0x00012] in /Users/builder/数据/车道/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/ mcs/class/System.Core/System.IO.Pipes/PipeUnix.cs:265 在 System.IO.Pipes。NamedPipeServerStream..ctor (System.String pipeName, PipeDirection direction, Int32 maxNumberOfServerInstances, PipeTransmissionMode transmissionMode, PipeOptions options, Int32 inBufferSize, Int32 outBufferSize, System.IO.Pipes.PipeSecurity pipeSecurity, HandleInheritability 可继承性, PipeAccessRights additionalAccessRights) [0x0004b] in /Users/ builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.11/_build/mono-2.10.11。 git/mcs/class/System.Core/System.IO.Pipes/NamedPipeServerStream.cs:100 在 System.IO.Pipes.NamedPipeServerStream..ctor （System.String pipeName，PipeDirection 方向，Int32 maxNumberOfServerInstances，PipeTransmissionMode 传输模式，PipeOptions 选项， Int32 inBufferSize, Int32 outBufferSize, System.IO.Pipes.PipeSecurity pipeSecurity,HandleInheritability 可继承性）[0x00000] in :0 at System.IO.Pipes.NamedPipeServerStream..ctor （System.String pipeName，PipeDirection 方向，Int32 maxNumberOfServerInstances，PipeTransmissionMode 传输模式，PipeOptions 选项，Int32 inBufferSize，Int32 outBufferSize，System.IO.Pipes。 PipeSecurity pipeSecurity) [0x00000] in :0 at System.IO.Pipes.NamedPipeServerStream..ctor (System.String pipeName, PipeDirection direction, Int32 maxNumberOfServerInstances, PipeTransmissionMode transmissionMode, PipeOptions options, Int32 inBufferSize, Int32 outBufferSize) [0x00000] in :0在 System.IO.Pipes.NamedPipeServerStream..ctor（System.String pipeName，PipeDirection 方向，Int32 maxNumberOfServerInstances，PipeTransmissionMode 传输模式，PipeOptions 选项）[0x00000] 中：0 at (wrapper remoting-invoke-with-check) System.IO.Pipes.NamedPipeServerStream:.ctor (string,System.IO.Pipes.PipeDirection,int,System.IO.Pipes.PipeTransmissionMode,System.IO.Pipes.PipeOptions ) 在 ConsoleTestPipeApp1.Program.ListenForPipeServer () [0x00000] 在 /Users/Vadivelu/Project/Service_Test/ConsoleTestPipeApp1/ConsoleTestPipeApp1/Program.cs:21 在 ConsoleTestPipeApp1.Program.Main (System.String[] args) [0x00000] 在 / Users/Vadivelu/Project/Service_Test/ConsoleTestPipeApp1/ConsoleTestPipeApp1/Program.cs:16 [错误] 致命的未处理异常：System.IO.IOException：创建命名管道时出错：System.IO.Pipes.UnixNamedPipe.EnsureTargetFile 处的错误代码 -1 （System.String 名称）[0x0001f] 在 /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono -2.10。11/_build/mono-2.10.11.git/mcs/class/System.Core/System.IO.Pipes/PipeUnix.cs:131 在 System.IO.Pipes.UnixNamedPipeServer..ctor (System.IO.Pipes.NamedPipeServerStream所有者，System.String pipeName，Int32 maxNumberOfServerInstances，PipeTransmissionMode 传输模式，PipeAccessRights 权限，PipeOptions 选项，Int32 inBufferSize，Int32 outBufferSize，HandleInheritability 可继承性）[0x00012] 在 /Users/builder/data/lanes/mono-mac-ui-refresh-2 -10/2baeee2f/source/bockbuild/profiles/mono-2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/mcs/class/System.Core/System.IO.Pipes /PipeUnix.cs:265 at System.IO.Pipes.NamedPipeServerStream..ctor (System.String pipeName, PipeDirection 方向, Int32 maxNumberOfServerInstances, PipeTransmissionMode transmissionMode, PipeOptions options, Int32 inBufferSize, Int32 outBufferSize,System.IO.Pipes.PipeSecurity pipeSecurity，HandleInheritability 可继承性，PipeAccessRights additionalAccessRights) [0x0004b] 在 /Users/builder/data/lanes/mono-mac-ui-refresh-2-10/2baeee2f/source/bockbuild/profiles/mono- 2-10/build-root/mono-2.10.11/_build/mono-2.10.11.git/mcs/class/System.Core/System.IO.Pipes/NamedPipeServerStream.cs:100 在 System.IO.Pipes。 NamedPipeServerStream..ctor (System.String pipeName, PipeDirection direction, Int32 maxNumberOfServerInstances, PipeTransmissionMode transmissionMode, PipeOptions options, Int32 inBufferSize, Int32 outBufferSize, System.IO.Pipes.PipeSecurity pipeSecurity, HandleInheritability 可继承性) [0x00000] in :0 在 System.IO .Pipes.NamedPipeServerStream..ctor (System.String pipeName, PipeDirection 方向, Int32 maxNumberOfServerInstances,PipeTransmissionMode transmissionMode, PipeOptions options, Int32 inBufferSize, Int32 outBufferSize, System.IO.Pipes.PipeSecurity pipeSecurity) [0x00000] in :0 at System.IO.Pipes.NamedPipeServerStream..ctor (System.String pipeName, PipeDirection direction, Int32 maxNumberOfServerInstances, PipeTransmissionMode transmissionMode, PipeOptions options, Int32 inBufferSize, Int32 outBufferSize) [0x00000] in :0 at System.IO.Pipes.NamedPipeServerStream..ctor (System.String pipeName, PipeDirection direction, Int32 maxNumberOfServerInstances, PipeTransmissionMode transmissionMode, PipeOptions options) [0x00000] in :0 at (wrapper remoting-invoke-with-check) System.IO.Pipes.NamedPipeServerStream:.ctor (string,System.IO.Pipes.PipeDirection,int,System.IO.Pipes.PipeTransmissionMode,System.IO.Pipes .PipeOptions) 在 ConsoleTestPipeApp1.Program.ListenForPipeServer () [0x00000] 在 /Users/Vadivelu/Project/Service_Test/ConsoleTestPipeApp1/ConsoleTestPipeApp1/Program.cs:21 在 ConsoleTestPipeApp1.Program.Main (System.String[] args) [0x00000] 在/Users/Vadivelu/Project/Service_Test/ConsoleTestPipeApp1/ConsoleTestPipeApp1/Program.cs:16

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-06-09T13:33:55.313

唯一的问题是当 C# 代码访问管道时，您正在使用的名为“testPipe”的管道不存在。如果您首先运行命令`mkfifo testPipe`（在 unix 上）然后运行以下 C# 代码，它应该可以工作。

# r - R的tm包中的findassoc函数给出错误

> ID：15479393
> 
> 赞同：0
> 
> 时间：2013-03-18T14:34:52.237
> 
> 标签：r, text-mining

我有一个从 youtube 评论构建的术语文档矩阵

约 977 份文件

使用以下方法创建了一个术语文档矩阵：

```
dtm <- DocumentTermMatrix(doc_corpus) 
```

然后应用该功能

```
findAssocs(dtm,"hello", 0.6) 
```

得到以下（从法语翻译）

```
Error in which (x [term],> corlimit): index out of bounds 
```

所有其他功能都像 findFreqTerms 和 hclus 等一样工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:11:45.180

您会收到错误消息，因为术语集中不存在该词。您可以使用以下方法检查：

```
'hello' %in% Terms(dtm) 
```

应该返回 FALSE。

# c# - 从脚本任务中写入对象变量

> ID：15479395
> 
> 赞同：1
> 
> 时间：2013-03-18T14:35:07.767
> 
> 标签：c#, sql, sql-server, tsql, ssis

我正在 SSIS 中创建维护作业，其中一个步骤要求我从变量中读取，检查一个值，如果该值在特定范围内，则将该行写入一个新对象以进行以下处理步。我已经编写了大部分脚本，但我无法将如何从脚本任务中将值写入对象。

这是我现在拥有的：

![ssis_example](../Images/f6d6d8b4c0a94d396cefd7675b386523.png)

为了快速完成此操作，它从服务器获取所有数据库名称，然后运行数据库完整性检查。之后，它会拉出所有数据库的列表及其最后一次已知的良好完整性检查。最后的 ForEach 循环是我遇到问题的地方。我希望它从上一个 SQL 任务中获取对象，读取变量，如果最后一个已知的良好日期接近当前时间，则将其输入一个新对象，以便在接下来的步骤中使用以备份该数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:37:46.663

我将创建一个新的数据流并将当前的“执行 SQL 任务”代码用于新的 OLE DB 源。然后，我会将它与您当前的“脚本任务”逻辑连接到脚本转换（在数据流中）。数据流将通过记录集目标完成，该目标将加载对象变量。

# ssis - SSIS SQL任务在每个季度的第一天执行

> ID：15479397
> 
> 赞同：0
> 
> 时间：2013-03-18T14:35:12.863
> 
> 标签：ssis

在 SQL2008 中使用 SSIS 包创建。

使用了两个 SQL 脚本任务“Initiation Job”和“Update Table”。

我在“更新表”中有几个更新查询，我必须在每个季度的第一天更新这些查询。

所以请帮我在“启动工作”中写什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T21:07:09.967

不清楚您是在询问如何在特定日期运行完整的包，还是在特定日期只运行包中的两个任务并在其他日期跳过它们。但无论哪种方式，解决方案都是一样的。

如果您还没有，我将创建一个[日历表](http://web.archive.org/web/20070611150639/http://sqlserver2000.databases.aspfaq.com/why-should-i-consider-using-an-auxiliary-calendar-table.html)，其中包含一个名为`IsFirstDayOfQuarter`您根据您对季度定义设置的列。一般来说，日历表非常有用，在这种情况下它很方便，因为 a) 没有标准定义季度或第一天是什么时候，b) 您可以在必要时轻松更改日期。

然后我会添加一个包变量，也称为包变量`IsFirstDayOfQuarter`，并在包执行开始时从表中设置它。之后，您可以在包内的任何位置使用它来决定是否应执行特定任务，包括在[优先约束](http://msdn.microsoft.com/en-us/library/ms141261(v=sql.110).aspx)中。

如果您需要在一周的第一天、仅工作日等运行，这通常是一种有用的技术。

# java - JavaFX 中的自动检测代理设置 - webview

> ID：15479401
> 
> 赞同：1
> 
> 时间：2013-03-18T14:35:21.480
> 
> 标签：java, webview, proxy, javafx-2, javafx

我的浏览器 ( `webview`) 以`HTML`页面开头

`FILEJAVA.class.getResource ("FILEHTML.html"). ToExternalForm ()`

我想要..当我访问谷歌时他检查网络是否有**代理**（代理工作手册）

因此他选择并显示一个对话框来输入用户名和密码。

`Javascript`还是一样`javafx`？

我谢谢你 ..

# entity-framework - EF Code First 错误地重命名表，这是一个错误吗？

> ID：15479408
> 
> 赞同：3
> 
> 时间：2013-03-18T14:35:42.527
> 
> 标签：entity-framework, ef-code-first, database-migration

我有两个实体，客户和电子邮件。我已经剥离了它们以仅显示重要的内容。

```
public class Customer
{
    [DatabaseGenerated(DatabaseGeneratedOption.None)]
    [StringLength(6)]
    public string Id { get; set; }

    [Required]
    [StringLength(50)]
    public string Name { get; set; }

    //Relationships
    public ICollection<Email> MainEmails { get; set; }
    public ICollection<Email> OrderEmails { get; set; }
    public ICollection<Email> InvoiceEmails { get; set; }
    public ICollection<Email> APEmails { get; set; }
}

public class Email
{
    [Key]
    [StringLength(50)]  
    public string Address { get; set; }

    public ICollection<Customer> MainCustomers { get; set; }
    public ICollection<Customer> OrderCustomers { get; set; }
    public ICollection<Customer> InvoiceCustomers { get; set; }
    public ICollection<Customer> APCustomers { get; set; }
} 
```

我在我的上下文类中覆盖了 OnModelCreating() ，它包括以下内容：

```
modelBuilder.Entity<Customer>()
    .HasMany(e => e.MainEmails)
    .WithMany(c => c.MainCustomers)
    .Map(m =>
    {
        m.ToTable("CustomerMainEmails");
        m.MapLeftKey("CustomerId");
        m.MapRightKey("Address");
    });

modelBuilder.Entity<Customer>()
    .HasMany(e => e.OrderEmails)
    .WithMany(c => c.OrderCustomers)
    .Map(m =>
    {
        m.ToTable("CustomerOrderEmails");
        m.MapLeftKey("CustomerId");
        m.MapRightKey("Address");
    });

modelBuilder.Entity<Customer>()
    .HasMany(e => e.InvoiceEmails)
    .WithMany(c => c.InvoiceCustomers)
    .Map(m =>
    {
        m.ToTable("CustomerInvoiceEmails");
        m.MapLeftKey("CustomerId");
        m.MapRightKey("Address");
    });

modelBuilder.Entity<Customer>()
    .HasMany(e => e.APEmails)
    .WithMany(c => c.APCustomers)
    .Map(m =>
    {
        m.ToTable("CustomerAPEmails");
        m.MapLeftKey("CustomerId");
        m.MapRightKey("Address");
    }); 
```

这工作正常，并在 DB、Customers、Emails 和四个 M2M 表、CustomerAPEmails、CustomerInvoiceEmails、CustomerMainEmails 和 CustomerOrderEmails 中创建五个表。

现在，如果我尝试将 Email 实体重命名为 CustomerEmail 并执行迁移，迁移中的前几行是：

```
RenameTable(name: "dbo.CustomerMainEmails", newName: "CustomerEmails");
DropForeignKey("dbo.CustomerMainEmails", "CustomerId", "dbo.Customers");
DropForeignKey("dbo.CustomerMainEmails", "Address", "dbo.Emails");
DropForeignKey("dbo.CustomerOrderEmails", "CustomerId", "dbo.Customers"); 
```

执行更新数据库然后失败并出现以下错误：

*System.Data.SqlClient.SqlException (0x80131904)：找不到对象“dbo.CustomerMainEmails”，因为它不存在或您没有权限。*

我认为原因是表被重命名，然后它尝试在不存在的表上删除键。这对我来说似乎是错误的。它是一个错误吗？为什么要重命名 dbo.CustomerMainEmails 表开头？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:33:52.470

尝试移动`RenameTable()`下面的方法

```
DropForeignKey("dbo.CustomerMainEmails", "CustomerId", "dbo.Customers");
DropForeignKey("dbo.CustomerMainEmails", "Address", "dbo.Emails");
DropForeignKey("dbo.CustomerOrderEmails", "CustomerId", "dbo.Customers");
RenameTable(name: "dbo.CustomerMainEmails", newName: "CustomerEmails"); 
```

# php - 检查是否显示远程图像

> ID：15479416
> 
> 赞同：0
> 
> 时间：2013-03-18T14:36:18.757
> 
> 标签：php, image, proxy, filtering

我有一个 PHP 站点，允许用户搜索和显示图像。图像来自多种来源，因此，有些被网络过滤服务阻止。

网站针对希望拥有不同 Web 过滤服务的多个用户。

如何确定图像是否显示？

已经累了，`getimagesize()`没有运气。这些函数正确报告图像细节（我得到 200 OK 响应等），但是 webfiltering 然后阻止图像显示。`get_headers()``file_exists()`

我当前的流程是`cURL`图片搜索请求（使用谷歌的图片搜索 API），json 解码结果，然后以远程 URL 作为 src 显示图片。

我可以为每个搜索请求将所有图像保存到我的服务器，但这似乎太占用带宽了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:46:54.507

尝试这样的事情：

```
<img src="image.gif" onerror="imgError('image.gif')"> 
```

而 imgError(string) 应该是一个使用 ajax 向服务器报告用户没有看到图像的函数

# ruby - RVM 无法在 Mountain Lion 上构建 OpenSSL

> ID：15479418
> 
> 赞同：0
> 
> 时间：2013-03-18T14:36:30.000
> 
> 标签：ruby, openssl, rvm

Ruby 可以很好地构建，但它不会在 OpenSSL 支持下构建。我尝试将 CC 设置为指向 XCode 4.6 命令行工具的 GCC 副本和 MacPorts 的 gcc 4.2 版本。那是行不通的。我添加了`--with-openssl-dir=$rvm_path/usr`和`--with-opt-dir=$rvm_path/usr`。这些都不起作用。每次失败时，我都会检查日志，它只是说配置 OpenSSL 时出错并且将被跳过。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:52:46.440

我最近安装后遇到了同样的问题`ruby 2.0`，这就是我解决的方法：

```
rvm get head
rvm pkg remove
rvm requirements run
rvm reinstall 2.0.0 
```

我在[本期报告的评论中找到了解决方案](https://github.com/wayneeseguin/rvm/issues/1588)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:13:26.663

我昨天在我的新闪亮 mac 上安装 ruby​​ 时正在修复 openssl 问题。

必须按照@fmendez 的建议重新安装 ruby​​，但在此之前我必须安装 openssl 。我是通过 brew 做到的。

实际上还有很多其他的库你必须安装，比如 automake 、 libxslt 等。

我做到了，

`rvm requirements`

它向我展示了要安装的所有内容。请在重新安装 ruby​​ 之前先安装它。

我在安装 1.8.4 时也遇到了问题，因为我必须这样做

`rvm install 1.18.4--with-gcc=clang --without-tcl --without-tk`

为了安装 ruby​​ 1.9.2 ，我必须这样做

`rvm install --with-gcc=clang`

希望能帮助到你

# javascript - 在 Delphi 中执行 JavaScript，没有结果

> ID：15479419
> 
> 赞同：1
> 
> 时间：2013-03-18T14:36:31.020
> 
> 标签：javascript, delphi, delphi-7

我正在尝试在 Delphi 7 中执行一些 javascript。我修复了原来的问题，即缺少分号，但不，我只是没有得到任何结果。似乎没有调用 oncalc，只是一个猜测。

```
unit fMain;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  OleCtrls, SHDocVw, MSHTML;

type
  TfrmMain = class(TForm)
    WebBrowser1: TWebBrowser;
    procedure FormCreate(Sender: TObject);
  private
    { Private declarations }
    HTMLWindow2: IHTMLWindow2;
  public
    { Public declarations }
  end;

var
  frmMain: TfrmMain;

implementation

uses
   ActiveX;

{$R *.dfm}

const

HTMLStrMap: AnsiString =
'<!DOCTYPE html> '+
'<html> '+
'  <head> '+
'    <meta name="viewport" content="initial-scale=1.0, user-scalable=no"> '+
'    <meta charset="utf-8"> '+
'    <title>Google Maps JavaScript API v3 Example: Directions Simple</title> '+
'    <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet"> '+
'    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script> '+
'    <script> '+
'      var directionsService = new google.maps.DirectionsService(); '+
'      var map; '+
''+
'      function initialize() { '+
'        directionsDisplay = new google.maps.DirectionsRenderer(); '+
'        var chicago = new google.maps.LatLng(41.850033, -87.6500523); '+
'        var mapOptions = { '+
'          zoom:7, '+
'          mapTypeId: google.maps.MapTypeId.ROADMAP, '+
'          center: chicago '+
'        }; '+
'        map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions); '+
'        directionsDisplay.setMap(map); '+
'      } '+
''+
'      function calcRoute() { '+
'        var start = document.getElementById("start").value; '+
'        var end = document.getElementById("end").value; '+
'        var request = { '+
'            origin:start, '+
'            destination:end, '+
'            travelMode: google.maps.DirectionsTravelMode.DRIVING '+
'        }; '+
'        directionsService.route(request, function(response, status) { '+
'          if (status == google.maps.DirectionsStatus.OK) { '+
'            directionsDisplay.setDirections(response); '+
'          } '+
'        }); '+
'      } '+
'    </script> '+
'  </head> '+
'  <body onload="initialize()"> '+
'    <div> '+
'    <b>Start: </b> '+
'    <select id="start" onchange="calcRoute();"> '+
'      <option value="chicago, il">Chicago</option> '+
'      <option value="st louis, mo">St Louis</option> '+
'      <option value="joplin, mo">Joplin, MO</option> '+
'      <option value="oklahoma city, ok">Oklahoma City</option> '+
'      <option value="amarillo, tx">Amarillo</option> '+
'      <option value="gallup, nm">Gallup, NM</option> '+
'      <option value="flagstaff, az">Flagstaff, AZ</option> '+
'      <option value="winona, az">Winona</option> '+
'      <option value="kingman, az">Kingman</option> '+
'      <option value="barstow, ca">Barstow</option> '+
'      <option value="san bernardino, ca">San Bernardino</option> '+
'      <option value="los angeles, ca">Los Angeles</option> '+
'    </select> '+
'    <b>End: </b> '+
'    <select id="end" onchange="calcRoute();"> '+
'      <option value="chicago, il">Chicago</option> '+
'      <option value="st louis, mo">St Louis</option> '+
'      <option value="joplin, mo">Joplin, MO</option> '+
'      <option value="oklahoma city, ok">Oklahoma City</option> '+
'      <option value="amarillo, tx">Amarillo</option> '+
'      <option value="gallup, nm">Gallup, NM</option> '+
'      <option value="flagstaff, az">Flagstaff, AZ</option> '+
'      <option value="winona, az">Winona</option> '+
'      <option value="kingman, az">Kingman</option> '+
'      <option value="barstow, ca">Barstow</option> '+
'      <option value="san bernardino, ca">San Bernardino</option> '+
'      <option value="los angeles, ca">Los Angeles</option> '+
'    </select> '+
'    </div> '+
'    <div id="map-canvas" style="top:30px;"></div> '+
'  </body> '+
'</html> ';

procedure TfrmMain.FormCreate(Sender: TObject);
var
    aStream     : TMemoryStream;
begin
    WebBrowser1.Navigate('about:blank');
    if Assigned(WebBrowser1.Document) then
    begin
      aStream := TMemoryStream.Create;
      try
         aStream.WriteBuffer(Pointer(HTMLStrMap)^, Length(HTMLStrMap));
         aStream.Seek(0, soFromBeginning);
         (WebBrowser1.Document as IPersistStreamInit).Load(TStreamAdapter.Create(aStream));
      finally
         aStream.Free;
      end;
      HTMLWindow2 := (WebBrowser1.Document as IHTMLDocument2).parentWindow;
    end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:29:06.953

该示例的 CSS 是指向 google 站点上示例的相对链接。如果您要复制他们的示例，请将其更改为绝对链接或将 CSS 文件移动到您的域。

# javascript - JS中的函数构造函数初始化？

> ID：15479422
> 
> 赞同：2
> 
> 时间：2013-03-18T14:36:41.837
> 
> 标签：javascript

我应该如何初始化`Function constructor`函数：

（两者似乎都有效。）

像这样 ：

```
var t= new Function ("a","alert(a)");
t(3)//3
alert(Object.prototype.toString.apply(t)); //[object Function] 
```

或者

```
var t= Function ("a","alert(a)"); //without new 
t(3) //3
alert(Object.prototype.toString.apply(t));//[object Function] 
```

有什么区别吗？

[*jsbin*](http://jsbin.com/upazac/2/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:37:53.987

它们是相同的。从[规格](http://es5.github.com/#x15.3.1)：

> 当`Function`作为函数而不是构造函数调用时，它会创建并初始化一个新的 Function 对象。因此，函数调用`Function(…)`等效于`Function(…)`具有相同参数的对象创建表达式 new。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:38:44.473

> 两者都是一样的。

但是如果你使用new，对象内部的每个属性都会有一个新的实例。

# php - 如何解析所有维基百科的网页？

> ID：15479426
> 
> 赞同：-3
> 
> 时间：2013-03-18T14:36:50.227
> 
> 标签：php, wikipedia

我需要解析所有维基百科的网页。我怎样才能做到这一点？

我可以通过它的站点地图来做到这一点吗？如果是这样，维基百科的站点地图在哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:39:00.430

[Wikipedia 允许您下载他们的数据库](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download)，而不是解析所有网页。这是首选方法，因为它通常会更快，因为维基百科有超过 400 万篇文章。

这对 Wikipedia 来说也更公平，并且不会因为激进的爬行而被他们阻止。请阅读[本政策](http://en.wikipedia.org/wiki/Wikipedia%3aDatabase_download#Why_not_just_retrieve_data_from_wikipedia.org_at_runtime.3F)

# jquery - JQuery 切换框 - Firefox 和 IE 中奇怪的文本中断

> ID：15479428
> 
> 赞同：1
> 
> 时间：2013-03-18T14:36:57.063
> 
> 标签：jquery, css, html, text

我正在尝试通过 Jquery 在页面中添加一个切换框，如果用户单击一个按钮，则屏幕中心的一个框将滑动打开并显示一些信息。我让它在 Chrome 和 Safari 中运行良好：

![在此处输入图像描述](../Images/5ec1a367f3f4c62b4b0a968ff0240087.png) 但 Firefox 和 IE 在第一行文本中有一个奇怪的中断：

![在此处输入图像描述](../Images/e9befec2393c3d6b675f408c655aebbc.png)

错误只发生在第一行，所以如果我删除第一行（h7），下一行（p）也会发生同样的中断，依此类推......唯一解决这个问题的是添加“溢出；隐藏;" 到红色框 div，但这样做也会将框移动到页面的右下方而不是居中，尽管我的“margin：0 auto;”......我也尝试过“left：50％，right：50 %”但无济于事。但是，如果我将浏览器宽度减小到 1480 像素，那么 div 就会神奇地居中。是什么赋予了？

任何建议将不胜感激。谢谢，麻烦您了！

# jquery - 使用 jquery 单击更改文本区域内容

> ID：15479429
> 
> 赞同：0
> 
> 时间：2013-03-18T14:36:58.463
> 
> 标签：jquery, html, css

如何在单击时将我的 textarea 内容更改为空？

这是代码：

[http://jsfiddle.net/QMfyP/](http://jsfiddle.net/QMfyP/)

```
<textarea name="adventage" style="width:400px; border-radius: 3px; border-left: 4px solid #6C3" id="adventage" cols="45" rows="5">Share with everyone what are the advantages of this vehicle. </textarea> 
```

这个想法是点击这个区域，输入新文本时它将是空的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:39:40.830

您可以使用该`placeholder`属性获得该功能

```
<textarea placeholder='Share with everyone what are the advantages of this vehicle.'></textarea> 
```

这是标准且最简单的方法（不涉及 javascript，您可以在本页顶部的 stackoverflow 的搜索文本框中看到它工作！）。

但它不适用于旧浏览器（IE9 和更早版本），如果您需要它在这些浏览器中工作，您可以检查这个[问题](https://stackoverflow.com/questions/6366021/placeholder-in-ie9/6366162#6366162)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:39:44.783

给 textarea 一个唯一的`id`（因为您可能不想将其应用于所有 textarea），例如`thetextarea`：

```
$("#thetextarea").click(function(){
   $("#thetextarea").empty();
}); 
```

这是一个有效的[jsFiddle](http://jsfiddle.net/QMfyP/8/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:39:43.070

```
$('YOURSELECTOR').click(function(e) {
    $('#adventage').empty();
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T14:40:39.600

[http://jsfiddle.net/QMfyP/6/](http://jsfiddle.net/QMfyP/6/)

HTML

```
<textarea class="my_textarea" name="adventage" id="adventage" cols="45" rows="5">Share with everyone what are the advantages of this vehicle. </textarea> 
```

查询

```
$("#adventage").click(function() {
  $(this).empty();
}); 
```

CSS

```
#adventage { width:400px; border-radius: 3px; border-left: 4px solid #6C3; } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T14:42:36.437

```
$(document).ready(function(){
    $("textarea[name='adventage']").click(function({
        $(this).innerHTML("");
    }))
}) 
```

这应该工作！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T14:43:24.350

试试这样。

占位符第一次起作用。但是，如果您在 ( `in case of editing`) 中已经有一些文本，请执行一些`scripting`。

```
$(document).ready(function(){
        $('#adventage').click(function(){
            $(this).val('');
        })

}); 
```

# android - 从 uiwebview 文本字段 ANDROID 获取数据？

> ID：15479431
> 
> 赞同：0
> 
> 时间：2013-03-18T14:37:05.707
> 
> 标签：android, uiwebview

嗨，我正在开发一个将 HTML 页面加载到 uiwebview 中的应用程序 - 该 html 文件包含文本归档和下拉列表、文本框等。

此处如何获取用户在该文本文件中输入的值以及从下拉（选择器）中选择的答案。

否则有什么方法可以从网页读取响应？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:36:56.343

您特别无权访问这些值。这是当您使用 facebook 登录到第三方应用程序时，facebook 使用的 OAuth 身份验证如何确保安全的一部分。

如果应用程序开发人员可以在“使用 facebook”登录他们的应用程序时从输入 facebook 用户名和密码的 web 视图中提取信息，这将是一个完全不安全的模型。

如果 webview 正在加载您自己的网站，您可能会让它以几种不同的方式将值发送到设备，但例如，如果您将它们发送到 google.com，您将看不到它们在任何文本字段中输入的内容.

# java - 捕获异常，e == null

> ID：15479432
> 
> 赞同：0
> 
> 时间：2013-03-18T14:37:06.187
> 
> 标签：java, android, exception

我看到很多类似的问题，但我没有找到一个好的答案。

问题是，当我`Debug`在 catch 块中使用模式时，`e == null`应用程序因未处理的 NullPointerException 而崩溃。`Run`但是如果我使用模式，我可以捕获异常并查看堆栈跟踪。

可能是什么原因？提前致谢！

![在此处输入图像描述](../Images/db84b35d8724427288fc689c950f735c.png)

# c# - 相位一致性边缘/角点检测算法

> ID：15479436
> 
> 赞同：1
> 
> 时间：2013-03-18T14:37:15.417
> 
> 标签：c#, computer-vision, fft, aforge, edge-detection

是否有任何可用的代码，甚至是伪代码，可以让我在 C# 中实现相位一致性边/角检测算法？

在频域方面，我远非数学专家。

我能找到的唯一可用（正常工作）源是 matlab，它有一个巨大的数学库，C# 不可用。如果我能更好地理解这些函数并找到类似的 C# 函数，那将有很大帮助。

我正在使用 Accord.NET（包括 AForge.NET），因此有一些函数可以处理图像和 FFT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T07:42:14.213

好吧，您当然可以尝试使用：

```
 Harris corner detector (implemented in Accord.NET)

       SIFT (although it reacts on blobs it can react on edges as well)  (implemented in Accord.NET)

       SUSAN (AForge or Accord.NET ?) 
```

...

阅读 Accord.NET 和 AForge.NET 文档。我知道他们实现了几个角落寻找算法。

# android - Android上的启动画面不起作用

> ID：15479437
> 
> 赞同：0
> 
> 时间：2013-03-18T14:37:17.347
> 
> 标签：android, splash-screen

我正在开发一个 Android 应用程序。该应用程序应在启动时显示启动画面，同时检查文件是否已更新。如果文件没有更新，它会启动一个异步任务来更新文件。问题是，启动画面的图像只显示文件实际需要更新的时间。否则，在执行检查时会显示黑屏。

我的 SplashScreen 活动：

```
 public class SplashActivity extends Activity
{
    private final static String placesFile = "places";
    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        this.requestWindowFeature(Window.FEATURE_NO_TITLE);
        setContentView(R.layout.activity_splash);
    }

    @Override
    protected void onResume()
    {
        super.onResume();

        if(!isFileUpdated()){
            new PlacesService(this).execute();
        }else{
            intentAndFinish();
        }

    }
    private void intentAndFinish() {
        finish();
        Intent mainIntent = new Intent(this, MainActivity.class);
        startActivity(mainIntent);  
    }

    /**
     * 
     * @return false if Places Data is too old
     */
    private boolean isFileUpdated() {
        int daysOld = 0;
        File f = new File(this.getFilesDir().getAbsolutePath() +"/"+placesFile);
        if(f.exists()){
            System.out.println("existe");
        }
        Date d = new Date();
        Date currentDate = new Date(System.currentTimeMillis());
        d.setTime(f.lastModified());
        if(currentDate.compareTo(d)>0)
            daysOld = determineDifferenceInDays(d, currentDate);
        return daysOld < Consts.PLACES_DAYS_OLD_QTY_PERMITTED?true:false;
    }
    private static int determineDifferenceInDays(Date date1, Date date2) {
        Calendar calendar1 = Calendar.getInstance();
        calendar1.setTime(date1);
        Calendar calendar2 = Calendar.getInstance();
        calendar2.setTime(date2);
        long diffInMillis = calendar2.getTimeInMillis() - calendar1.getTimeInMillis();
        return (int) (diffInMillis / (24* 1000 * 60 * 60));
    }

    public void onResultFromAsyncTask(boolean finished) {
        if(finished){
            intentAndFinish();
        }
    }
} 
```

activity_splash.xml

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">

    <ImageView android:src="@drawable/splash_es"
               android:layout_width="fill_parent"
               android:layout_height="fill_parent"
               />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:57:11.673

你正在杀死你的飞溅，然后它出现在屏幕上。因为您在 onResume 方法中杀死了它。看这段文档：

> 活动的**前台生命周期**发生在对 onResume() 的调用与对 onPause() 的相应调用之间。在此期间，活动位于所有其他活动之前并与用户交互。一个活动经常会在恢复和暂停状态之间切换——例如，当设备进入睡眠状态、传递活动结果时、传递新意图时——因此这些方法中的代码应该是相当轻量级的。

您可以使用处理程序，它比 Thread 更优雅地解决此问题，但主要思想与 @sheetal 相同。

在 onCreate 方法上：

```
 handler = new Handler(); 
```

关于 onResume 方法：

```
 handler.postDelayed(new Runnable() {
    public void run() {
      if(!isFileUpdated()){
        new PlacesService(this).execute();
      }else{
        intentAndFinish();
      }
    }
}, 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:47:02.007

如果您的文件已更新您正在 onResume 中关闭您的活动并切换到主要活动，并且该过程将花费几毫秒的时间来执行此操作..因此您很可能永远不会看到您的闪屏..如果您愿意，可以采用

```
 private void intentAndFinish() {
     Thread.sleep(10000)
    finish();
    Intent mainIntent = new Intent(this, MainActivity.class);
    startActivity(mainIntent);  
} 
```

只是为了赶上你的splashScreen。

请参阅@bruno 的帖子...我们应该使用处理程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:19:27.707

你调用 isFileUpdated() 需要时间把它放在后台你 asyntask 应该是这样的

```
 public class PlacesService extends Asynctask<Void,Void,Void>{
    boolean flag=false
    public Void doInBackground(){
    flag=isFileUpdated()
    if (!flag){
    return
    }else {
    // Do your file update
    }
    return 

    }

public onPostExcecute(){
intentAndFinish();

}
    } 
```

# nunit - NUnit 和 AppDomain 的 UnhandledExceptionEventHandler

> ID：15479440
> 
> 赞同：4
> 
> 时间：2013-03-18T14:37:22.300
> 
> 标签：nunit, backgroundworker, appdomain, unhandled-exception

我在 NUnit 中编写单元测试时遇到了一些问题，该测试检查后台工作人员在其 RunWorkerCompleted 事件中是否抛出了自定义异常 (ProcessException) - 为了论证，我们假设我们无法更改该代码。

我试图做的是在我的单元测试中连接到 AppDomain 的 UnhandledExceptionHandler，如下所示：

```
 AppDomain currentDomain = AppDomain.CurrentDomain;
        UnhandledExceptionEventHandler handler = null;

        handler = (s, e) =>
        {
            // Need to make it clear that an exception is expected in the output window
            Console.WriteLine("==== Unhandled exception has been caught ====");
            processExceptionWasThrownByBackgroundWorker = true;
            currentDomain.UnhandledException -= handler;
            Assert.AreEqual(typeof(ProcessException), e.GetType());
        };

        currentDomain.UnhandledException += handler;

        CallMyBackgroundWorkerThatThrows();

        Assert.AreEqual(true, processExceptionWasThrownByBackgroundWorker); 
```

此单元测试运行良好，并且在使用 TestDriven.Net 从 Visual Studio 中运行时通过。但是，当它在构建机器上运行时，NUnit 控制台**似乎**也在捕获未处理的异常 [1] 并为 NUnit 进程返回失败，同时报告测试全部通过。事实上，它正试图反序列化自定义异常 - ProcessException - 并且失败，这就是我认为这里描述的内容 [2]

[1]： http: [//www.mail-archive.com/nunit-core@lists.launchpad.net/msg00326.html](http://www.mail-archive.com/nunit-core@lists.launchpad.net/msg00326.html)

[2]：[http ://groups.google.com/forum/?fromgroups#!topic/nunit-discuss/7LF_X-yBWJ8](http://groups.google.com/forum/?fromgroups#!topic/nunit-discuss/7LF_X-yBWJ8)

构建机器的输出：

```
[exec] Tests run: 147, Errors: 0, Failures: 0, Inconclusive: 0, Time: 27.6745774 seconds
[exec] Not run: 0, Invalid: 0, Ignored: 0, Skipped: 0
[exec] Unhandled exceptions:
[exec] 1) Blah.ShelledProcessBackgroundRunnerTests.A_background_process_will_be_killed_if_the_timeout_is_exceeded : System.Runtime.Serialization.SerializationException: Unable to find assembly 'Blah, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null'.
[exec] at System.Runtime.Serialization.Formatters.Binary.BinaryAssemblyInfo.GetAssembly()
[exec] at System.Runtime.Serialization.Formatters.Binary.ObjectReader.GetType(BinaryAssemblyInfo assemblyInfo, String name)
[exec] at System.Runtime.Serialization.Formatters.Binary.ObjectMap..ctor(String objectName, String[] memberNames, BinaryTypeEnum[] binaryTypeEnumA, Object[] typeInformationA, Int32[] memberAssemIds, ObjectReader objectReader, Int32 objectId, BinaryAssemblyInfo assemblyInfo, SizedArray assemIdToAssemblyTable)
[exec] at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectWithMapTyped(BinaryObjectWithMapTyped record)
[exec] at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectWithMapTyped(BinaryHeaderEnum binaryHeaderEnum)
[exec] at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Run()
[exec] at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
[exec] at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
[exec] at System.Runtime.Remoting.Channels.CrossAppDomainSerializer.DeserializeObject(MemoryStream stm)
[exec] at System.AppDomain.Deserialize(Byte[] blob)
[exec] at System.AppDomain.UnmarshalObject(Byte[] blob)
[exec] c:\build_work\ourcibuild(229,26): External Program Failed: C:\Program Files (x86)\NUnit 2.5.10\bin\net-2.0\nunit-console-x86.exe (return code was -100) 
```

这是对可能发生的事情的准确反映吗？考虑到我在单元测试中处理它，我可以更改 NUnit 的行为以忽略未处理的异常吗？

# php - 使用 Excel 电子表格中的信息填充 Web 服务器上的用户帐户字段

> ID：15479445
> 
> 赞同：1
> 
> 时间：2013-03-18T14:37:36.167
> 
> 标签：php, excel, client-server, client-side, server-side

所以这就是交易，我得到了一个包含约 1600 个用户列表的 excel 文件，所有这些用户都需要在我们的 Web 应用程序服务器上进行更新。在这个列表中，有他们的名字、用户名文件/交换服务器、建筑物、楼层和各种信息。我应该手动更新所有这些，也就是进入他们的每个个人资料并手动更改每个小字段，但我没有办法这样做。

我想知道的是：有没有办法使用 PHP 或客户端语言来读取该 excel 文件并自动填充所有这些用户配置文件？

***附加信息：***

*   服务器是基于网络的
*   我可以要求访问服务器以运行 PHP 脚本
*   如果您指定 value=""，则所有信息都可以通过 HTML 添加，但是您必须激活“提交按钮”：

`<input type="text" name="firstName" maxlength="30" tabindex="405" value="Mark" id="ES5_firstName" title="">`

随意询问有关此事的任何其他需要的信息，我会尽力回答。

感谢您的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:49:02.747

有几个可以读取 Excel 的 PhP 库。另一种方法是将 Excel 工作表保存为 CSV，然后可以很容易地被任何编程语言解析。然后，您可以使用 Python Robot Framework 等工具读取 CSV 文件并填充 HTML 表单并一次提交一个。

# python - 狮身人面像自动模块显示模块名称？

> ID：15479448
> 
> 赞同：2
> 
> 时间：2013-03-18T14:37:39.850
> 
> 标签：python, python-sphinx

我`.. automodule:: mypath.mymodule`在我的文档中使用过。我想要没有其他成员信息的普通模块文档字符串。出现模块文档字符串，但没有指明模块名称，也没有特殊的段落格式。

是否有一种标准方法来包含实际模块的名称，并可能强调该特定段落以将其与普通文本区分开来？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T12:08:31.177

我会说“标准”方式是添加带有模块名称的标题：

```
mypath.mymodule
===============

.. automodule:: mypath.mymodule 
```

一些包中的示例（单击“显示源代码”以查看 reST 标记）：

*   芹菜：[http ://docs.celeryproject.org/en/latest/reference/celery.events.html](http://docs.celeryproject.org/en/latest/reference/celery.events.html)
*   PyMongo：[http ://api.mongodb.org/python/current/api/bson/index.html](http://api.mongodb.org/python/current/api/bson/index.html)
*   matplotlib： http: [//matplotlib.org/api/dates_api.html](http://matplotlib.org/api/dates_api.html)

# unix - Unix 上 GMT、GMT+0、GMT-0、GMT0 的区别

> ID：15479451
> 
> 赞同：5
> 
> 时间：2013-03-18T14:37:56.870
> 
> 标签：unix, time

在下面`/usr/share/lib/zoneinfo`

我可以看到以下 4 种不同类型的信息`GMT`

```
GMT
GMT+0
GMT-0
GMT0 
```

`GMT`这 4 种区域时间之间有什么区别吗？如果是这样，有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-18T14:49:14.047

我认为它们都是相同的，或者至少具有相同的价值观。

Yoo 可以在这里看到所有内容：[TimeZones](http://www.gsp.com/support/virtual/admin/unix/tz/gmt/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T14:50:29.590

在我的系统（也可能是你的系统）上`GMT`，`GMT+0`和`GMT0`都符号链接到`GMT-0`. 所以没有区别。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T15:00:35.960

添加到@Hasturkun 的答案 - 在基于 glibc 的系统上`GTM`，`GMT+0`等将始终是符号链接的，因为它是在`glibc/timezone/backward`映射文件中定义的。具体来说：

```
Link    Etc/GMT                 GMT+0
Link    Etc/GMT                 GMT-0
Link    Etc/GMT                 GMT0
Link    Etc/GMT                 Greenwich 
```

# ios - 为什么自定义字体会移动文本（更改垂直对齐）？

> ID：15479454
> 
> 赞同：1
> 
> 时间：2013-03-18T14:38:06.983
> 
> 标签：ios, objective-c, ios5, uilabel

我有这段代码，用一些文本和默认字体创建简单的 UILabel

```
 self.reviewCountLabel = [[UILabel alloc] initWithFrame:someFrame];
        self.reviewCountLabel.text = @"1231 REVIEWS";
        self.reviewCountLabel.textAlignment = NSTextAlignmentRight;
        self.reviewCountLabel.backgroundColor = [UIColor lightGrayColor];
//        self.reviewCountLabel.font = [UIFont fontWithName:kSTGFontAvantGardeBold size:18];
        [self addSubview:self.reviewCountLabel]; 
```

在屏幕上我得到这个：

![在此处输入图像描述](../Images/e4a29ff22ce524df4cafe5fd6ccddfcc.png)

但是如果我**取消注释**添加自定义字体的代码，我会得到这个：

![在此处输入图像描述](../Images/caad5c10d95435e924ccadd8c6bc236c.png)

有人可以解释为什么我在这里垂直对齐到顶部吗？（或帮助解决）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:35:18.280

它可能没有与顶部对齐，但新字体的几何形状（上升线、基线等）与系统字体完全不同。在这方面，并非所有字体都像其他字体一样干净。

[您可以使用Apple 的 Font Tool Suite](https://developer.apple.com/fonts/)调整几何图形，特别是`ftxdumperfuser`命令。 [这是一篇较旧的 SO 帖子](https://stackoverflow.com/questions/7535498/uibutton-custom-font-vertical-alignment/8314197#8314197)，其中非常详细地描述了如何使用该工具来解决您的问题。

# .net - 无法为 c# .net 下拉列表获取 linq string & int concat

> ID：15479457
> 
> 赞同：3
> 
> 时间：2013-03-18T14:38:09.833
> 
> 标签：.net, asp.net-mvc-3, linq

```
public ViewResult Index()
{
     var theList = from p in db.theTable
                   select p.Id + p.lastName;

     ViewBag.theList = new SelectList(theList);                             
     return View();
} 
```

前面的代码在我的控制器中并产生以下错误：

> *“无法将类型 'System.Int32' 转换为类型 'System.Object'。LINQ to Entities 仅支持转换实体数据模型原始类型。”*

我相信问题是试图连接一个 int (id) 和 string (lastName)，因为任何一个都可以正常工作，我能够将 firstName 和 lastName 连接在一起。

我试过`ToString()`and `Convert()`，但没有用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:39:49.877

你需要使用[`StringConvert`](http://msdn.microsoft.com/en-us/library/dd487158.aspx)

```
 var theList = from p in db.theTable
               select SqlFunctions.StringConvert((double)p.Id) + p.lastName; 
```

但就个人而言，我更喜欢在客户端上进行字符串操作。无论如何，它为您提供了更多的灵活性来格式化字符串......就像这样

```
var theList = from p in db.theTable
               select new { p.Id, p.lastName };
ViewBag.theList = new SelectList(theList);   

...

@foreach(var p in ViewBag.theList)
{
    var str = string.Format("{0}{1}", p.Id, p.lastName);
} 
```

# django - Django Celery 减少时间，5小时完成1000个任务

> ID：15479462
> 
> 赞同：2
> 
> 时间：2013-03-18T14:38:36.133
> 
> 标签：django, django-celery

我在开发环境中运行，所以这在生产中可能有所不同，但是当我从 Django Celery 运行任务时，它似乎每 10-20 秒才从代理获取任务。我现在只是在测试，但可以说我要发送大约 1000 个任务，这意味着它需要 5 个多小时才能完成。

这是正常的吗？它应该更快吗？还是我做错了什么？

**这是我的任务**

```
class SendMessage(Task):
    name = "Sending SMS"
    max_retries = 10
    default_retry_delay = 3

    def run(self, message_id, gateway_id=None, **kwargs):
        logging.debug("About to send a message.")

        # Because we don't always have control over transactions
        # in our calling code, we will retry up to 10 times, every 3
        # seconds, in order to try to allow for the commit to the database
        # to finish. That gives the server 30 seconds to write all of
        # the data to the database, and finish the view.
        try:
            message = Message.objects.get(pk=message_id)
        except Exception as exc:
            raise SendMessage.retry(exc=exc)

        if not gateway_id:
            if hasattr(message.billee, 'sms_gateway'):
                gateway = message.billee.sms_gateway
            else:
                gateway = Gateway.objects.all()[0]
        else:
            gateway = Gateway.objects.get(pk=gateway_id)

        #response = gateway._send(message)
        print(message_id)

        logging.debug("Done sending message.") 
```

**从我的角度来看**

```
 for e in Contact.objects.filter(contact_owner=request.user etc etc):
            SendMessage.delay(e.id, message) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:32:12.127

是的，这很正常。这是要使用的默认工作人员。他们设置了这个默认值，这样它就不会影响应用程序的性能。

还有另一种方法可以改变它。任务装饰器可以采用许多选项来改变任务的行为方式。传递给任务装饰器的任何关键字参数实际上都将设置为结果任务类的属性。

您可以设置速率限制，以限制在给定时间范围内可以运行的任务数量。

```
//means hundred tasks a minute, another /s (second) and /h (hour)
CELERY_DEFAULT_RATE_LIMIT = "100/m" --> set in settings 
```

# liquibase - 更改列中的数据类型时将 int 转换为 value

> ID：15479463
> 
> 赞同：5
> 
> 时间：2013-03-18T14:38:39.230
> 
> 标签：liquibase

liquibase 是否可以在执行时进行某种映射`modifyDataType`？

考虑以下示例：

```
<changeSet id="1" author="me">
    <createTable tableName="person">
        <column name="id" type="int">
            <constraints primaryKey="true" nullable="false" />
        </column>
        <column name="firstName" type="varchar(100)"></column>
        <column name="lastName" type="varchar(100)"></column>
        <column name="marital_status" type="int">
            <constraints nullable="false" />
        </column>
    </createTable>
</changeSet>
<changeSet id="2" author="me">
    <modifyDataType tableName="person" columnName="type"
        newDataType="varchar(36)" />
</changeSet> 
```

我希望在我的列“类型”中发生以下映射：

```
0->single
1->married
etc.. 
```

这可能与 liquibase 吗？我通过命令行使用它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-20T09:41:33.930

我认为这不可能直接通过某种映射或重构来实现。

一种方法是使用`sql`并将其放入另一个变更集中，该变更集在更改数据类型之后立即运行：

```
<changeSet id="3" author="me">
    <sql>
        update person set martial_status = 'single' where martial_status = 0;
        update person set martial_status = 'married' where martial_status = 1;
    </sql>
</changeSet> 
```

我只是把这个写下来作为一个想法。它未经测试。

仅当 id 为 2 的变更集成功运行时，您才可以添加执行此变更集的[先决条件。](http://www.liquibase.org/documentation/preconditions.html)

# git - 具有机器特定变更集的点文件的版本控制

> ID：15479466
> 
> 赞同：4
> 
> 时间：2013-03-18T14:38:47.150
> 
> 标签：git, bash, git-config, dotfiles

我将点文件存储在 git repo 中，但是我确实有不同的本地更改集`.gitconfig`（受版本控制） - 它可能是不同的环境（autocrlf true）或不同的用户名。

现在每次我检查我去的回购时：

```
git stash save && git pull && git stash apply 
```

这对我来说似乎不是最佳实践。我应该如何在不同的机器上进行不同的本地更改集？什么是最干净和最明确的方式？还是我什至一开始就解决了错误的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T16:48:45.630

您可能希望将特定于主机的设置拆分为非跟踪文件。`include`-statement 在 git>=1.7.10 中可用。

像下面这样的东西可以做到这一点：

```
 [include]
 path = ~/.gitconfig.local 
```

我想，真正漂亮的东西会是这样的：

```
 [include]
 path = ~/.gitconfig.${HOSTNAME}.local 
```

然后在存储库中跟踪`.gitconfig.foo.local`和`.gitconfig.bar.local`，但前者 get 在 host 上使用，`foo`后者在 host 上使用`bar`。不幸的是，目前不支持变量扩展。

* * *

或者，您可以将 GIT_CONFIG 环境变量设置为`.bash_profile`/ `.profile`/`.bashrc`

* * *

最后，git`${prefix}/etc/gitconfig`用于主机范围的配置，也许您可​​以将其用于主机范围的配置。

# c# - htmlagilitypack 解析链接和内部文本

> ID：15479468
> 
> 赞同：1
> 
> 时间：2013-03-18T14:38:50.120
> 
> 标签：c#, html-agility-pack

我是 htmlagilitypack 的新手，我正在尝试找出一种方法，我可以从这样的 HTML 设置中获取链接

```
<div class="std"><div style="border-right: 1px solid #CCCCCC; float: left; height: 590px; width: 190px;"><div style="background-color: #eae3db; padding: 8px 0 8px  20px; font-weight: bold; font-size: 13px;">test</div>
    <div>
    <div style="font-weight: bold; margin: 5px 0 -6px;">FEATURED</div>
    <span class="widget widget-category-link"><a href="http://www.href1.com"><span>cat1</span></a></span>
     <span class="widget widget-category-link"><a href="http://www.href1.com"><span>cat2</span></a></span>
</div></div> 
```

我还没有在 c# 中编写任何代码，但我想知道是否有人可以建议在没有 HTML ID 时应该指向哪些标签来获取链接和内部文本。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:55:05.990

如果您熟悉[XPATH](http://www.w3schools.com/xpath/default.asp)，您将能够浏览 html 的元素和属性以获取您想要的任何内容。要获取上面的每个 href，您可以编写如下代码：

```
 const string xpath = "/div//span/a";

 //WebPage below is a string that contains the text of your example
 HtmlNode html = HtmlNode.CreateNode(WebPage);
 //The following gives you a node collection of your two <a> elements
 HtmlNodeCollection items = html.SelectNodes(xpath);
 foreach (HtmlNode a in items)
 {    
      if (a.Attributes.Contains("href"))
      //Get your value here
      {
           yourValue = a.Attributes["href"].Value
      }
 } 
```

注意：我没有运行或测试过这段代码

# jquery - 如何在 html 元标记中编辑内容属性？

> ID：15479475
> 
> 赞同：2
> 
> 时间：2013-03-18T14:39:07.990
> 
> 标签：jquery, meta-tags

我正在使用以下代码将“内容”属性编辑为元数据元素：

```
$("meta[property='og\\:title']").attr("content", my_title_var);
$("meta[property='og\\:description']").attr("content", my_desc_var); 
```

这是我的html代码：

```
 <meta property="og:title" content="" />
 <meta property="og:description" content=""/> 
```

当我检查 html 代码时，javascript 代码的结果是好的，但是当我尝试通过 Facebook 或 Google+ 共享我的网页时，它似乎无法正常工作并且社交网络无法正确获取我的网页数据（标题和描述）。

手动编写元内容属性，而不是社交网络以这种方式正确获取我的 webapge 数据：

```
 <meta property="og:title" content="My title" />
 <meta property="og:description" content="My description"/> 
```

这行得通。

有没有更好的方法可以使用 javascript 将 contet 属性编辑为 html 元标记元素？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:49:56.547

Javascript 在创建 HTML 之后运行，因此如果某个页面加载您的 HTML 并搜索您通过 Javascript 创建的某些标签，那么该页面将永远找不到它......

# c# - 使用 WCF 自动刷新异步数据网格

> ID：15479480
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:39:18.273
> 
> 标签：c#, asp.net, ajax, wcf, silverlight

我有一个 asp.net 数据网格，它显示来自 WCF Web 服务的数据。我的要求是我希望数据网格能够根据快速变化的 WCF 数据不断刷新。我可以使用计时器并设置刷新间隔，但是有没有一种方法可以仅根据可以从 WCF 消息触发的数据更改来进行刷新。例如，交易仪表板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:40:47.243

您可以使用双工 WCF 服务将内容推送到您的 Web 服务器。[您可以在此处阅读有关它们的信息](http://msdn.microsoft.com/en-us/library/ms731064.aspx)。从那里，您将不得不使用长轮询或网络套接字之类的东西来刷新页面。

# android - 如何将单个静态项添加到 ListView

> ID：15479481
> 
> 赞同：0
> 
> 时间：2013-03-18T14:39:19.850
> 
> 标签：android, listview

我有并且我用特定`SherlockListActivity`的项目填写。`ListView`我用我自己`Adapter`的。

但在一种情况下，我必须只填写`ListView`一项在以下指定的项目`single_list_item.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:gravity="top" >

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:text="@string/singleItem1"/>

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="top"
            android:text="@string/singleItem2"/>

</LinearLayout> 
```

我怎样才能做到这一点？我需要在这里使用适配器吗？如果是这样，哪种情况最适合这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:42:48.630

使用此列表视图的页眉/页脚视图。

# c# - 将 TextBox 中的值传递给 ValidationRule

> ID：15479482
> 
> 赞同：2
> 
> 时间：2013-03-18T14:39:22.377
> 
> 标签：c#, .net, wpf, xaml, validationrule

我有两个 TextBox 控件（如下），并希望将第一个 TextBox [] 的文本传递给第二个 TextBox [ `x:Name="defPointFrom1Txt"`] 的 ValidationRule [ `MinIntegerValidationRule`]，`x:Name="defPointTo1Txt"`而不是当前值 1。我可以在代码中通过命名当第一个 TextBox 中的值更改时，验证规则和设置基于事件。但是，有没有办法在 XAML 中执行此操作以将所有验证逻辑保存在一个位置？

```
 <TextBox x:Name="defPointFrom1Txt" Grid.Row="2" Grid.Column="1" Style="{StaticResource lsDefTextBox}" 
                     Text="{Binding Path=OffensePointsAllowed[0].From}" IsEnabled="False"/>
            <TextBox x:Name="defPointTo1Txt" Grid.Row="2" Grid.Column="2" Style="{StaticResource lsDefTextBox}"
                     LostFocus="defPointTo1Txt_LostFocus">
                <TextBox.Text>
                    <Binding Path="OffensePointsAllowed[0].To" StringFormat="N1">
                        <Binding.ValidationRules>
                            <gui:MinIntegerValidationRule Min="1"/>
                        </Binding.ValidationRules>
                    </Binding>
                </TextBox.Text>
            </TextBox> 
```

为了完整性，我的验证规则代码如下。

```
 public class IntegerValidationRule : ValidationRule
{

    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {
        float controlValue;
        try
        {
            controlValue = int.Parse(value.ToString());
        }
        catch (FormatException)
        {
            return new ValidationResult(false, "Value is not a valid integer.");
        }
        catch (OverflowException)
        {
            return new ValidationResult(false, "Value is too large or small.");
        }
        catch (ArgumentNullException)
        {
            return new ValidationResult(false, "Must contain a value.");
        }
        catch (Exception e)
        {
            return new ValidationResult(false, string.Format("{0}", e.Message));
        }
        return ValidationResult.ValidResult;
    }

}

public class MinIntegerValidationRule : IntegerValidationRule
{
    public int Min { get; set; }

    public override ValidationResult Validate(object value, CultureInfo cultureInfo)
    {

        ValidationResult retValue = base.Validate(value, cultureInfo);
        if (retValue != ValidationResult.ValidResult)
        {
            return retValue;
        }
        else
        {
            float controlValue = int.Parse(value.ToString());
            if (controlValue < Min)
            {
                return new ValidationResult(false, string.Format("Please enter a number greater than or equal to {0}.",Min)); 
            }
            else
            {
                return ValidationResult.ValidResult;
            }
        }
    }
} 
```

更新：

为了响应以下答案，我正在尝试创建一个 DependencyObject。我这样做如下，但不知道如何在 ValidationRule 代码中使用它（甚至不知道我正确地创建了它）。

```
public abstract class MinDependencyObject : DependencyObject
{
    public static readonly DependencyProperty MinProperty =
      DependencyProperty.RegisterAttached(
      "Min", typeof(int), 
      typeof(MinIntegerValidationRule),
      new PropertyMetadata(), 
      new ValidateValueCallback(ValidateInt)
      );

    public int Min
    {
        get { return (int)GetValue(MinProperty); }
        set { SetValue(MinProperty, value); }
    }
    private static bool ValidateInt(object value)
    {
        int test;
        return (int.TryParse(value.ToString(),out test));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:08:42.313

您不能在 Min 属性上设置绑定，因为它不是依赖属性。我以前做的是在 viewmodel 上创建一个验证属性属性，它为我提供类实例对象，然后我根据它执行我的验证。

在你的情况下，我会创建 Min 作为依赖对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:11:25.167

好吧，如果您考虑一下，`Binding`您将不得不实现相对巨大的开销才能使用它，因为您的验证类已经从另一个类继承。问题是使用`Binding`绑定目标必须是一个`DependencyProperty`（你可以[在这里](http://msdn.microsoft.com/en-us/library/ms752347.aspx)阅读），你不能直接在你的验证类中实现它。

因此，您可以为您的验证类创建例如一个`AttachedProperty`，以便您能够使用`Binding`. [你可以在这里](http://msdn.microsoft.com/en-us/library/ms753957.aspx)找到一些信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T19:28:35.680

这篇 Josh Smith 于 2007 年 5 月 6 日[在 WPF 中将虚拟分支附加到逻辑树的帖子概述了此问题的解决方案。](http://www.codeproject.com/Articles/18678/Attaching-a-Virtual-Branch-to-the-Logical-Tree-in)

# c# - 一个从属角色具有多个具有不同值的主体

> ID：15479484
> 
> 赞同：3
> 
> 时间：2013-03-18T14:39:25.673
> 
> 标签：c#, entity-framework

我正在使用实体框架 codefirst 并且我有以下设计

```
public class Location
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool IsDeleted { get; set; }
}

public class DelieryRate 
{
    public int Id { get; set; }

    public int OriginId { get; set; }
    public Location Origin { get; set; }

    public int DestinationId { get; set; }
    public Location Destination { get; set; }

    public double Amount { get; set; }

    public bool IsActive { get; set; }
} 
```

我不想在 Location 上定义关系。当我更新数据库时，它可以工作，但是当我运行我的种子代码时出现引用完整性错误。我尝试使用 fluent api 配置它，如下所示

```
modelBuilder.Entity<DeliveryRate>()
            .HasRequired(e => e.Origin)
            .WithOptional()
            .WillCascadeOnDelete(false);

modelBuilder.Entity<DeliveryRate>()
            .HasRequired(e => e.Destination)
            .WithOptional()
            .WillCascadeOnDelete(false); 
```

尝试更新数据库时出现以下错误

> System.Data.Entity.Infrastructure.DbUpdateException：更新条目时出错。有关详细信息，请参阅内部异常。---> System.Data.UpdateException：更新条目时出错。有关详细信息，请参阅内部异常。---> System.Data.ConstraintException：违反参照完整性约束。一个从属角色有多个具有不同值的主体。--- 内部异常堆栈跟踪结束 --- System.Data.Mapping.Update.Internal.TableChangeProcessor.DiagnoseKeyCollision（UpdateCompiler 编译器，PropagatorResult 更改，CompositeKey 键，PropagatorResult 其他）在 System.Data.Mapping.Update.Internal。 TableChangeProcessor.ProcessKeys（UpdateCompiler 编译器，列表`1 changes, Set`1 个键）在 System.Data.Mapping.Update.Internal.UpdateTranslator.d__0.MoveNext() 在 System.Linq.Enumerable.d__71 的 System.Data.Mapping.Update.Internal.TableChangeProcessor.CompileCommands(ChangeNode changeNode, UpdateCompiler 编译器)`1.MoveNext() at System.Data.Mapping.Update.Internal.UpdateCommandOrderer..ctor(IEnumerable`1 个命令，UpdateTranslator 转换器）在 System.Data.Mapping.Update.Internal.UpdateTranslator.ProduceCommands() 在 System.Data.Mapping.Update.Internal.UpdateTranslator.Update(IEntityStateManager stateManager, IEntityAdapter adapter) 在 System.Data.EntityClient。 EntityAdapter.Update(IEntityStateManager entityCache) at System.Data.Objects.ObjectContext.SaveChanges(SaveOptions options) at System.Data.Entity.Internal.InternalContext.SaveChanges() --- 内部异常堆栈跟踪结束 --- 在 System. Data.Entity.Internal.InternalContext.SaveChanges() 在 System.Data.Entity.Internal.LazyInternalContext.SaveChanges() 在 System.Data.Entity.DbContext.SaveChanges() 在 System.Data.Entity.Migrations.DbMigrator.SeedDatabase( ) 在 System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator。System.Data.Entity.Migrations.DbMigrator.Upgrade 上的 SeedDatabase()（IEnumerable`1 pendingMigrations, String targetMigrationId, String lastMigrationId) at System.Data.Entity.Migrations.Infrastructure.MigratorLoggingDecorator.Upgrade(IEnumerable`System.Data.Entity.Migrations.Infrastructure.MigratorBase.Update(String targetMigration) 处 System.Data.Entity.Migrations.DbMigrator.Update(String targetMigration) 处的 1 个 pendingMigrations、String targetMigrationId、String lastMigrationId)。 System.Data.Entity.Migrations.Design.ToolingFacade.BaseRunner.Run() 处的 Migrations.Design.ToolingFacade.UpdateRunner.RunCore() 更新条目时出错。有关详细信息，请参阅内部异常

有没有更好的方法来模拟 Locations 和 DeliveryRate 之间的关系。我在流利的 api 位上犯了一个错误吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T18:51:07.767

实体框架不支持具有单独外键的一对一关系。EF 使用共享主键映射您的模型，也就是说`DeliveryRate.Id`，`DeliveryRate.Origin.Id`并且`DeliveryRate.Destination.Id`必须都具有相同的值。他们可能没有在您的`Seed`方法中，这是导致异常的原因。

共享主键对您的模型没有用处，因为您永远无法`DeliveryRate`创建`Destination`不同于`Origin`.

您可以通过将两个关系建模为一对多来解决问题：

```
modelBuilder.Entity<DeliveryRate>()
    .HasRequired(e => e.Origin)
    .WithMany()
    .HasForeignKey(e => e.OriginId)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<DeliveryRate>()
    .HasRequired(e => e.Destination)
    .WithMany()
    .HasForeignKey(e => e.DestinationId)
    .WillCascadeOnDelete(false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-27T10:17:05.630

当关系映射出错时会抛出此错误，它可能将两个关系映射到同一个外键属性：

```
modelBuilder.Entity<TipOrder>().HasRequired(c => c.Tip).WithMany(x => x.TipOrders).HasForeignKey(x => x.TipId).WillCascadeOnDelete(false);
modelBuilder.Entity<TipOrder>().HasRequired(c => c.Order).WithMany(x => x.TipOrders).HasForeignKey(x => x.TipId).WillCascadeOnDelete(false); 
```

两者都意外地映射到 TipId。

# etw - Windows 性能分析器中“焦点窗口”图形的 ETW 提供程序

> ID：15479485
> 
> 赞同：1
> 
> 时间：2013-03-18T14:39:26.290
> 
> 标签：etw, xperf

Windows 性能分析器有一个名为“焦点窗口”的图表。我应该在 xperf 命令行中指定什么提供程序/跟踪标志来获得这样的图表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:19:02.747

“焦点窗口”信息由 Microsoft-Windows-Win32k 提供程序提供。例如：

```
xperf -start uisession -on Microsoft-Windows-Win32k 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T19:59:49.980

我使用它，它还捕获所需的数据：

```
xperf -start perf!GeneralProfiles.InBuffer && timeout -1 && xperf -stop perf!GeneralProfiles.InBuffer Trace.etl 
```

这可以捕获您需要的大部分数据。

# dynamics-crm-2011 - 如何从选项集中获取值/文本？

> ID：15479487
> 
> 赞同：2
> 
> 时间：2013-03-18T14:39:30.287
> 
> 标签：dynamics-crm-2011, dynamics-crm, crm

我正在创建一个 Web 资源，它将用我试图获取的任务填充一个 HTML 表`PriorityCode`。但我不知道如何从`OptionSet`.

这是一个屏幕截图：

![在此处输入图像描述](../Images/5381ff4af02fb65e6057736d099d2efb.png)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:32:31.927

我将从 AttributeFormat 成员开始。检查此成员是否包含您的 OptionSet 的键；如果没有，那么佩德罗的建议可能是我下一个去的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:47:21.320

您有查询元数据，请参阅执行此操作的各种方法：

*   [http://crmdude.wordpress.com/2009/02/04/performing-a-javascript-web-service-call-to-the-metadata-service/](http://crmdude.wordpress.com/2009/02/04/performing-a-javascript-web-service-call-to-the-metadata-service/)
*   [http://guruprasadcrm.blogspot.com.au/2011/07/retrieving-optionset-lable-data-using.html](http://guruprasadcrm.blogspot.com.au/2011/07/retrieving-optionset-lable-data-using.html)
*   [http://mileyja.blogspot.pt/2011/08/retrieve-installed-language-packs-in_19.html](http://mileyja.blogspot.pt/2011/08/retrieve-installed-language-packs-in_19.html)

# wmi - ASSOCIATORS OF 语句中的 ObjectPath 是否有任何限制？

> ID：15479489
> 
> 赞同：1
> 
> 时间：2013-03-18T14:39:35.220
> 
> 标签：wmi

让我们以以下请求为例：

```
ASSOCIATORS OF {Win32_DiskPartition.DeviceID="Disk #2, Partition #0"} WHERE AssocClass = Win32_LogicalDiskToPartition 
```

它工作正常并返回对应的列表（在我的情况下）一个逻辑磁盘 F:。但是，如果我更改在此查询中指定对象的方法，例如，这样：

```
ASSOCIATORS OF {Win32_DiskPartition.DiskIndex=2} WHERE AssocClass = Win32_LogicalDiskToPartition 
```

我收到“无效的对象路径”错误（在 PowerShell 中）。DiskIndex 字段肯定存在（请求“SELECT * FROM Win32_DiskPartition WHERE DiskIndex=2”返回驻留在我的磁盘 #2 上的唯一一个分区），那么这样的请求有什么问题？我还尝试使用 Win32_DiskPartition 类的其他一些字段，但它们都没有在“ASSOCIATORS OF”请求中起作用。Internet 上的任何地方（即 google 发送给我的地方）都没有关于 ObjectPath 的任何限制的信息。此外，我发现了[一篇文章](http://www.ravichaganti.com/blog/?p=1580)，作者明确表示：

> 此限定符可以是源 WMI 类中的**任何属性**

那么，这个请求修改有什么问题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T17:24:45.557

是一个唯一标识类实例的[`ObjectPath`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa390350%28v=vs.85%29.aspx)字符串，并且符合 WMI 类的 key 属性，因此您不能使用任何属性来构建`ObjectPath`. 在这种情况下，对象路径`Win32_DiskPartition`使用 DeviceID 属性，该`Key`属性是此类的属性。

![在此处输入图像描述](../Images/f880d1b4149bc0be19b52aa98d693923.png)

的基本语法[`ASSOCIATORS OF`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa384793%28v=vs.85%29.aspx)是

```
ASSOCIATORS OF {ObjectPath} 
```

所以你只能将有效的对象传递给这句话。

# scheme - 成员？球拍中的功能

> ID：15479490
> 
> 赞同：4
> 
> 时间：2013-03-18T14:39:36.117
> 
> 标签：scheme, racket

我正在关注 2011 年 Brian Harvey 在[加州大学伯克利分校网站](http://webcast.berkeley.edu/playlist#c,d,Computer_Science,EC3E89002AA9B9879E)上的 SICP 讲座。他正在使用[STk 解释器](http://kaolin.essi.fr/STk/)来教授课程，而我正在使用球拍和 DrRacket 来跟随。我正在尝试定义他在课堂上使用的所有未在球拍中定义的功能（即`word`, `butfirst`, `butlast`）以进行额外练习。

我遇到了一个试图定义的问题`member?`。他能够在列表和字符串上使用它，做类似的事情

```
(member? 1 (list 1 2 3 4)) ;; works
(member? 'a '(a e i o u)) ;; works
(member? 7 17) ;; doesn't work
(member? #\e "Hello") ;; doesn't work 
```

这是我`member?`对上述适用/不适用的定义：

```
(define (member? u lst)
  (not (equal? (member u lst) #f))) 
```

所以这是一个列表，所以前两个是有意义的，他们正在工作。甚至可以创建一个`member?`在 STk 中模仿的函数吗？我正在查看文档，它看起来像字符串、列表、非负整数和一堆其他东西被定义为`sequence`数据类型，但我找不到相关的序列函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:57:51.753

您可以`sequence-ormap`为此使用：

```
(define (member? item seq)
  (sequence-ormap (lambda (x)
                    (equal? item x))
                  seq)) 
```

去测试：

```
> (member? 7 17)
#t
> (member? #\e "Hello")
#t 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:15:32.500

现在你知道了`sequence-ormap`这里的 Racket 函数对学习 Scheme 有帮助：

```
(define (member? test item sequence)
  (cond ((string? sequence) (member? test item (string->list sequence)))
        ((vector? sequence) (member? test item (vector->list sequence)))
        ;; ...
        ((list? sequence) 
         (let looking ((l sequence))
           (and (not (null? l))
                (or (test item (car l))
                    (looking (cdr l))))))
        (else 'not-a-sequence)))

(define (member?-using-test test)
  (lambda (item sequence) (member? test item sequence))

(define member-equal? (member?-using-test equal?)) 
```

# jsf-2 - 我如何通过一个菜单对所有菜单的单个方法动态加载模板。JSF 2，Primefaces

> ID：15479491
> 
> 赞同：0
> 
> 时间：2013-03-18T14:39:36.507
> 
> 标签：jsf-2, primefaces

我如何通过一个菜单对所有菜单的单个方法动态加载模板。我如何识别调用该方法的菜单项。这是我的 xhtml：

```
 <h:body>

        <p:layout fullPage="true">

            <p:layoutUnit position="north" size="80" resizable="true" closable="true" collapsible="true">
                <h:form id="form3">  
                    <ui:include src="./templates/template.xhtml" />  
                </h:form> 
            </p:layoutUnit>

            <p:layoutUnit position="south" size="100" closable="true" collapsible="true">
                Footer
            </p:layoutUnit>

            <p:layoutUnit position="west" header="Opciones" size="175">
                <h:form id="form1">
                    <p:panelMenu style="width:200px">   
                        <p:submenu label="Clientes" >
                            <p:menuitem value="Adicionar" update=":form2" actionListener="#{templateMB.templateAddCliente}" />
                            <p:menuitem value="Modificar" update=":form2" actionListener="#{templateMB.templateConfigCliente}" />
                            <p:menuitem value="Listado" update=":form2" actionListener="#{templateMB.templateListadoCliente}" />
                        </p:submenu> 
                        <p:submenu label="Contratos">  
                            <p:menuitem value="Adicionar" update=":form2" actionListener="#{templateMB.templateAddContrato}" />
                        </p:submenu>  
                        <p:separator/>  
                        <p:submenu label="Suplementos" >  
                            <p:menuitem value="Adicionar" icon="ui-icon-signal"/>  
                        </p:submenu>  
                    </p:panelMenu>
                </h:form>
            </p:layoutUnit>

            <p:layoutUnit position="center" id="centerlayout">
                <h:form id="form2">  
                    <ui:include src="#{templateMB.centerTemplate}" />  
                </h:form> 
                <p:dialog id="dialog" header="Subir Documento del Contrato" resizable="false" widgetVar="fileDialog" showEffect="explode" hideEffect="explode" width="500" height="200"> 

                    <h:form enctype="multipart/form-data">  
                        <p:panel id="panelDialog">
                            <p:fileUpload value="#{contratosMB.fileContrato}" mode="simple" style="width: 400px"/>  
                            <br/>
                            <br/>
                            <p:commandButton value="Guardar" ajax="false"  
                                             actionListener="#{contratosMB.upload}"/>  
                        </p:panel>
                    </h:form>  

                </p:dialog> 
            </p:layoutUnit>

        </p:layout>

    </h:body> 
```

这是我的支持 bean：

```
 public String templateAddCliente() {
    try {
        this.centerTemplate = "./templates/addCliente.xhtml";
         return null;

    } catch (Exception e) {
        JsfUtil.addErrorMessage("Ha ocurrido un error: " + e.getMessage());
        return null;
    }
}

  public String templateConfigCliente() {
    try {
        this.centerTemplate = "./templates/configCliente.xhtml";
         return null;

    } catch (Exception e) {
        JsfUtil.addErrorMessage("Ha ocurrido un error: " + e.getMessage());
        return null;
    }
}
  public String templateHome() {
    try {
        this.centerTemplate = "./templates/hometemplate.xhtml";
         return null;

    } catch (Exception e) {
        JsfUtil.addErrorMessage("Ha ocurrido un error: " + e.getMessage());
        return null;
    }
}

  public String templateListadoCliente() {
    try {
        this.centerTemplate = "./templates/listadoCliente.xhtml";
         return null;

    } catch (Exception e) {
        JsfUtil.addErrorMessage("Ha ocurrido un error: " + e.getMessage());
        return null;
    }
}

  public String templateAddContrato() {
    try {
        this.centerTemplate = "./templates/addContratos.xhtml";
         return null;

    } catch (Exception e) {
        JsfUtil.addErrorMessage("Ha ocurrido un error: " + e.getMessage());
        return null;
    }
} 
```

到目前为止一切正常，但我必须为每个菜单项创建一个方法，我不喜欢。我想在 backinbean 中使用单个方法来加载页面，但找不到方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:24:39.293

请记住，使用 JSF 2，您可以处理操作方法中的参数（与 JSF 本身无关，但与 EL 实现有关）。

您可以使用枚举、数字类型或 a`String`来定义要显示的实际模板。`displayTemplate`最简单的示例是接收`String`定义要显示的模板的方法（我们称之为）。

```
public displayTemplate(String templateId) {
    centerTemplate = templateMap.get(templateId);
} 
```

作为一个想法，您可以在`Map`包含路径作为值和`templateId`作为键的 a 中注册模板，以便在模板之间轻松切换。只要记住初始化这张地图。

```
Map<String,String> templateMap = new HashMap<String,String>();
//...
templateMap.put("addCliente","./templates/addCliente.xhtml");
//The very same with the other templates 
```

最后，在您的页面中，您可以像这样调用该方法：

```
<p:menuitem value="Adicionar" update=":form2" actionListener="#{templateMB.displayTemplate('addCliente')}" /> 
```

# git - 重置后 Git 提交丢失 --hard。fsck 未找到，不在 reflog 中

> ID：15479501
> 
> 赞同：6
> 
> 时间：2013-03-18T14:40:00.697
> 
> 标签：git, git-reset

我想清除一些未提交文件的工作目录，但不小心运行了`git reset --hard`.

我意识到我丢失了之前的（未推送的）提交，所以我运行了`git reset --hard ORIG_HEAD`. 这并没有让我失去承诺。

我跑了`git reflog`，但那里没有列出提交。我也跑了`git fsck --lost-found`，但列表中没有提交，只有一些不相关的 blob 和树。

由于我找不到丢失提交的任何参考（除了`.git/COMMIT_EDITMSG`仍然有相关的提交消息和更改列表），我不确定如何恢复提交。

有什么办法可以找回丢失的提交，还是我应该为通宵做准备？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T16:49:44.387

不知道为什么你找不到你的提交，因为@twalberg 的评论`git reset --hard`是正确的。不过，这里有一些东西可以尝试。

你有你正在寻找的提交的消息（`.git/COMMIT_EDITMSG`）。如果`COMMIT_EDITMSG`是写的，那么那个特定的提交应该在*某个地方*。从消息中挑选出一些相当独特的文本，然后试试这个：

`git log -g --grep="<something specific from your commit message>"`

它将通过 reflog 并从丢失的提交消息中找到与文本匹配的提交。

如果没有运气，您可以尝试查看每个分支上的所有提交：

`git log --all --grep="<something specific from your commit message>"`

找到提交哈希后，您可以将其签出、创建新分支、将其合并回当前分支等。

但是，如果这一切都失败了，您可以尝试查看存储库中但不属于任何提交的对象（例如，添加到索引中，但未提交。）这个答案可以帮助您：

[https://stackoverflow.com/a/7376959/845716](https://stackoverflow.com/a/7376959/845716)

# ruby-on-rails - 为什么我会得到'Expected ... 来定义 ScheduledJob？

> ID：15479502
> 
> 赞同：0
> 
> 时间：2013-03-18T14:40:03.950
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有这样的课

```
class RecurringJob
  include ScheduledJob

  run_every 1.hours

  def perform
    puts "perform job"
  end
end 
```

我收到一条错误消息：

> 预期 D:/ASM/source/app/lib/jobs/scheduled_job.rb 来定义 ScheduledJob

文件定义是这样的：

```
module Delayed
 module ScheduledJob

def self.included(base)
  base.extend(ClassMethods)
  base.class_eval do
    @@logger = Delayed::Worker.logger
    cattr_reader :logger
  end
end
    ....

 end
end 
```

错误是什么意思？这不是一个定义吗？

## 编辑

我你必须知道，这个类是在一个 rake 任务中定义的（除了这个类之外它是空的，我不知道这是否允许）。

更详细的错误：

```
Expected D:/ASM/source/app/lib/jobs/scheduled_job.rb to define ScheduledJob
D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:503:in `load_missing_constant'
D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:192:in `block in const_missing'
D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:190:in `each'
D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:190:in `const_missing'
D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:514:in `load_missing_constant'
D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:192:in `block in const_missing'
D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:190:in `each'
D:/Software/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/dependencies.rb:190:in `const_missing'
D:/ASM/source/app/lib/tasks/sandbox.rake:29:in `<class:RecurringJob>'
D:/ASM/source/app/lib/tasks/sandbox.rake:28:in `block in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:09:50.853

Rails 遵循非常严格的命名约定，其中包括 lib 文件。

如果要在 Delayed 模块中定义 ScheduledJob 模块，则必须将文件命名为`/lib/delayed/scheduled_job.rb`

这将使 Rails 的期望和你的命名相匹配。

# java - 在内部类中使用非最终变量

> ID：15479503
> 
> 赞同：3
> 
> 时间：2013-03-18T14:40:15.610
> 
> 标签：java, variables, inner-classes

我是 Java 新手，几天以来一直在做一些基本的编码。今天在处理变量和内部类时，我在内部类中使用非最终变量时卡住了。

我正在为我的工作使用 testNG 框架，所以这是我正在尝试的场景，

=========

```
public class Dummy extends TestNG {
   @Override
   public void setUp() throws Exception {
      log.error("Setup Goes here");
   }

   @Override
   public void test() throws Exception {
        String someString = null;
        try { 
         someString = "This is some string";
      } catch (Exception e) {
         log.error(e.getMessage());
      }
         Thread executeCommand = new Thread(new Runnable() {
            @Override 
            public void run() {       
               try {
                  runComeCommand(someString, false); <=====ERROR LINE
               } catch (Exception e) {
                  log.error(e.getMessage());
               }
            }
         });
   }

   @Override
   public void cleanUp() throws Exception {
   }
} 
```

==========

当我写上面的代码时，它抛出了一个错误，说“不能引用内部类中的非最终变量”。所以我实现了 eclips 提供的建议之一，即在父类中声明 someString 变量。现在代码看起来像这样，

==========

```
public class Dummy extends TestNG {
   String someString = null; <=====Moved this variable from test() to here
   @Override
   public void setUp() throws Exception {
        log.error("Setup Goes here");
   }
   @Override
   public void test() throws Exception {
                <same code goes here>
   }

   @Override
   public void cleanUp() throws Exception {
   }
} 
```

==========

现在它在 eclips 中没有显示任何错误。我想知道，为什么它现在接受内部类中的变量，即使它不是最终的。它不应该因同样的错误而失败吗？现在可以吗？任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:44:21.960

在您的第一个示例`someString`中是一个局部变量`test`。您不能引用非最终局部变量，因为内部类将无法观察到该值的更改。通过将该变量声明为`final`，在内部类中保留了一个附加引用（并且该变量的值在创建实例时已经知道）。

在第二个示例`someString`中，**不是局部变量**，而是实例变量。内部类可以从容器对象中引用该变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:44:12.487

在第二种情况下，变量是一个生命周期与其包含对象相同的字段。

在第一种情况下，变量是方法的本地变量。它的生命周期可能比方法中创建的匿名类实例短。创建匿名类实例时需要其值的副本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:45:32.287

正如您所见，Java 编译器不会让您在内部类中引用非 final 的瞬态变量。您可以参考Eclipse 建议您创建的*类变量。*这是 Java 设计的。您实际上指的是内部类中的此类变量，而不是瞬态变量。

[您可能想在此处](http://en.wikipedia.org/wiki/Final_%28Java%29#Final_and_inner_classes)阅读最终变量和内部类

# xml - “ABC”不是有效的 XSLT 或 XPath 函数

> ID：15479507
> 
> 赞同：0
> 
> 时间：2013-03-18T14:40:21.220
> 
> 标签：xml, xslt, vbscript, msxsl

我正在尝试转换此 xsl 语句，因为在 windows server 2008 上不支持***selectSingleNode***并且我希望在 WS2008 上以更受支持的方式编写它。

所以使用下面的代码我得到以下错误：

“ABC”不是有效的 XSLT 或 XPath 函数

要转换的当前代码：

```
 <xsl:if expr='ContractAddress(selectSingleNode("AddressNo").text,selectSingleNode("/Object/Contract/ConAddrNo").text)'>...</xsl:if> 
```

所以请帮助我如何转换上面的代码我正在使用以下命名空间：

```
<xsl:stylesheet version="1.0" xmlns:xsl = "http://www.w3.org/1999/XSL/Transform" xmlns:msxsl = "urn:schemas-microsoft-com:xslt" xmlns:vbs = "urn:schemas-sqlxml-org:vbs" xml:space="preserve"> 
```

示例 XML：

```
<Address>
  <ConAddrNo>123</ConAddrNo>
</Address> ... <Contract>
  <AddressNo>123</AddressNo>
</Contract> 
```

当前 XSLT：

```
<xsl:if expr='ContractAddress(selectSingleNode("AddressNo").text, selectSingleNode("/Object/Contract/ConAddrNo").text)'>
  <xsl:eval> FormatAddress(selectSingleNode("Line1").text, selectSingleNode("Line2").text, selectSingleNode("Line3").text, selectSingleNode("Line4").text, selectSingleNode("PostalCode").text) </xsl:eval>
</xsl:if> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:05:15.983

带有@expr 属性的xsl:if 和xsl:eval 是XSLT 的过时Microsoft 方言的指令，该方言可追溯到1998 年，当时XSLT 成为W3C 规范之前。现在已经很少见到了，因为微软在大约一年后推出了符合标准的 XSLT 实现。

该方言有时在其使用的命名空间之后称为 WD-xsl（WD 表示工作草案），尽管 Microsoft 本身倾向于将其简称为“XSL”（与“XSLT”不同）。

我怀疑你会找到任何对 WD-xsl 有足够信心的人来理解你的代码并翻译它。

# jenkins - NoClassDefFoundError PlexusIoResourceCollection / Jenkins + Maven 3

> ID：15479510
> 
> 赞同：0
> 
> 时间：2013-03-18T14:40:23.497
> 
> 标签：jenkins, maven-3, maven-plugin, noclassdeffounderror, plexus

我正在尝试将我的一些 jenkins 工作迁移到 maven 3，但我在使用 maven 插件时遇到了一些麻烦。

例如，我在 maven 2 下的工作做得很好，当我迁移到 maven 3 时会触发以下异常

```
WARNING: Error injecting: org.apache.maven.plugin.jar.JarMojo
    java.lang.NoClassDefFoundError: org/codehaus/plexus/components/io/resources/PlexusIoResourceCollection
.
.
.
    Caused by: java.lang.ClassNotFoundException: org.codehaus.plexus.components.io.resources.PlexusIoResourceCollection
        at org.codehaus.plexus.classworlds.strategy.SelfFirstStrategy.loadClass(SelfFirstStrategy.java:50)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:244)
        at org.codehaus.plexus.classworlds.realm.ClassRealm.loadClass(ClassRealm.java:230)
        ... 93 more
    mojoFailed org.apache.maven.plugins:maven-jar-plugin:2.3.2(default-jar) 
```

我检查了所需的类是否已正确安装到我的本地存储库中。有人知道这种行为吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-12-11T15:19:56.847

只需从 .m2/repository 中删除 org/codehaus。这解决了我的问题。Maven 将再次自动下载依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T00:19:33.293

尝试将您的 jar-plugin 升级到最新的 2.4 - 使用 maven3 在本地构建时也会发生这种情况吗？

# java - Eclipse IDE：安装插件集

> ID：15479513
> 
> 赞同：9
> 
> 时间：2013-03-18T14:40:34.030
> 
> 标签：java, eclipse, eclipse-plugin, automation, installation

我有一组最喜欢的 Eclipse 插件，每次安装新的 Eclipse 时都需要安装它们。我还希望有一种方法可以为我的团队 Eclipse 以 [半] 自动化的方式安装所有这些插件。或者给他们推荐的 Eclipse 插件列表，让他们根据需要进行两次单击安装。

**如何快速安装一组插件（具有不同的更新站点）？**

更新：有很多方法可以做到这一点，我想汇总知识。stackoverflow.com 上至少有 2 个类似的问题，但有不同的建议。那是2-3年前。
[如何自动配置 Eclipse？](https://stackoverflow.com/questions/3818699/how-does-one-automate-configuration-of-eclipse)
[使用所有插件来提升新的 Eclipse 机器](https://stackoverflow.com/questions/5129165/boostrapping-new-eclipse-machines-with-all-the-plugins)

现在最好的解决方案似乎是[Bananeweizen](https://stackoverflow.com/users/44089/bananeweizen)在 2013-3-20 提出的（文件 -> 导出 -> 安装 -> 软件项到文件）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-24T06:56:37.573

正如 Bananeweizen 在 2013-3-20 所说

使用 (File -> Export -> Install -> Software Items to file) 准备插件列表文件 (*.p2f)，然后

（文件 -> 导入 -> 从文件安装软件项）

我以这种方式组装了[Eclipse Node.js IDE ，请参阅](https://github.com/PaulVI/eclipse-node-ide)[Enide - Eclipse Node.JS IDE](http://marketplace.eclipse.org/content/enide-eclipse-nodejs-ide)

![在此处输入图像描述](../Images/b55303a3393cea8090711b58facb3fc2.png)

更新：然而，这在 Eclipse Kepler 中遇到了错误

警告：在 Kepler 中不太好：Eclipse 4.3 Kepler 中有 2 个错误，这可能会使“文件 -> 导入\安装”的使用不舒适。

请通过对这 2 个错误进行投票来帮助修复 Kepler 错误（您应该在 dev.eclipse.org 上注册并登录）。

*   错误 409685 - [修复] Eclipse 4.3 Kepler - 安装修复失败；没有选择退出 [https://bugs.eclipse.org/bugs/show_bug.cgi?id=409685](https://bugs.eclipse.org/bugs/show_bug.cgi?id=409685)
*   错误 409802 - [导入/导出] 安装修复不尊重文件中的选定项目-> 导入 .. -> 从文件“导入软件配置”对话框安装软件项目 [https://bugs.eclipse.org/bugs/show_bug.cgi ?id=409802](https://bugs.eclipse.org/bugs/show_bug.cgi?id=409802)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:57:44.910

您可以使用[dropins](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/misc/p2_dropins_format.html&resultof=%22dropins%22%20%22dropin%22%20)目录来维护 Eclipse 发行版的插件。

> Eclipse 平台附带了一个名为 dropins 的默认监视目录。dropins 文件夹配置为在启动期间进行扫描。因此 dropins 文件夹可以像过去使用的 plugins 目录一样使用。

使用这种方法，每个插件都可以单独维护，而无需修改原始的 eclipse 发行版：

> 如果您有各种不同的组件被放入，并且您希望将它们分开，您可以在包含传统 Eclipse 扩展的 dropins 文件夹的正下方添加一个额外的文件夹层：

```
 eclipse/
   dropins/
     emf/
       eclipse/
         features/
         plugins/
     gef/
       eclipse/
         features/
         plugins/
     ... etc ... 
```

where`emf`和`gef`可能代表通常的插件结构。

还有一种方法可以让组中的每个人都可以引用存储在一个共享位置的插件。

这是使用`.link`放置在 dropins 目录中的文件。这些文件包含插件所在目录的路径。看看这个[链接](http://www.venukb.com/2006/08/20/install-eclipse-plugins-the-easy-way/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-18T14:46:03.253

按着这些次序。

*   将 Eclipse 解压缩到工作目录中。
*   安装插件，一次一个，测试以确保插件没有损坏您的 Eclipse。
*   完成安装和测试后，将工作目录压缩到一个新的 Eclipse zip 文件中。
*   分发新的 Eclipse zip 文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T14:52:56.083

如果我正确理解您的问题，则将插件目录复制到其他 eclipse 插件目录中应该可以。

您可以在自己的 eclipse 中安装所有您喜欢的插件，然后将您的插件文件夹压缩到您的 eclipse 安装目录下。通过将其解压缩到任何 eclipse 目录下，您可以一次安装所有您喜欢的插件。

# java - 如何使启动画面加载一次？

> ID：15479515
> 
> 赞同：2
> 
> 时间：2013-03-18T14:40:35.513
> 
> 标签：java, android, eclipse, splash-screen, dynamic-splash-screen

所以...我开发了一个成功运行的启动画面。我怎样才能让它运行一次（并且只运行一次）？我想建立一个注册屏幕，但我只希望它为用户显示一次。

帮助！

阿曼尼·斯旺

```
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.content.Intent;
import com.nfc.linkingmanager.R;

public class SplashScreen extends Activity {

private boolean mIsBackButtonPressed;
private static final int SPLASH_DURATION = 1000; 

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    setContentView(R.layout.splash_screen);

    Handler handler = new Handler();

    handler.postDelayed(new Runnable() {

        @Override
        public void run() {

            finish();

            if (!mIsBackButtonPressed) {

                Intent intent = new Intent(SplashScreen.this, NewCore.class);
                SplashScreen.this.startActivity(intent);
           }

        }

    }, SPLASH_DURATION);

}

 @Override
 public void onBackPressed() {
    mIsBackButtonPressed = true;
    super.onBackPressed();

}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:43:15.970

用于[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)存储屏幕已经显示的事实；开始时，检查此项，如果是，则通过启动下一个并[`finish()`](http://developer.android.com/reference/android/app/Activity.html#finish%28%29)立即调用启动屏幕来替换 Activity。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:45:11.407

您需要像这样在共享首选项中存储一个标志

```
SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this );
finish();
if (prefs.getBoolean("SplashFlag", false)&&!mIsBackButtonPressed){

 Intent intent = new Intent(SplashScreen.this, NewCore.class);
                SplashScreen.this.startActivity(intent);
}else {
SharedPreferences.Editor editor = preferences.edit();
editor.putBoolean("SplashFlag", true); // value to store
//again there are values for int, long, string, float, boolean
editor.commit();//This is needed or the edits will not be put into the prefs file
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:45:28.193

使用[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)你可以存储一个你可以默认`boolean`为假的实例。`seenSplash`然后使用 if 检查它是否为假，然后显示启动画面。在用户看到启动画面后`Editor`，您可以将布尔值更改为 true。

不要忘记`commit()`编辑器上的更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T14:54:31.387

在您的注册屏幕中获取登录详细信息并与您在共享首选项中保存的值进行比较。或硬编码，例如用户名是管理员，密码是管理员。这两个值都是正确的，只是为了进入启动画面，否则无论你喜欢什么都重定向到其他页面。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T14:55:59.363

有两种方法可以做到这一点

第一

```
finish();
SplashScreen.this.startActivity(intent); 
```

在您的 Android 清单中，您在其中声明了启动屏幕活动的第 2 位

添加这个

```
android:noHistory=true 
```

# python - 在 Python 中检查 Linux 上的 USB 驱动器？

> ID：15479517
> 
> 赞同：4
> 
> 时间：2013-03-18T14:40:38.780
> 
> 标签：python, linux, usb, dbus

我正在尝试在 Python 中创建一个系统来检查 USB 驱动器上是否存在文件，如果不存在驱动器，它会等待 dbus 系统注册新设备，然后再次检查。

我检查了 mtab 位。我检查文件是否存在位。我有 dbus 位工作，但我目前正在努力让它在驱动器注册时脱离 dbus 位，这样我就可以检查 mtab 然后检查文件。

我希望这是有道理的。

我会为糟糕的编码风格道歉——我才刚刚开始。

这是我到目前为止所拥有的：

```
#!/usr/bin/env python
import string, time, os, dbus, gobject, sys
from dbus.mainloop.glib import DBusGMainLoop

def device_added_callback(device):
  print ("Block device added. Check if it is partitioned")
  usbdev = "".join(device.split("/")[5:6])
  if usbdev.endswith("1") == 1:
    print ("Block device is partitioned. Waiting for it to be mounted.")
    # This is where I need to break out of the USB bit so I can check mtab and then check the file exits.

def waitforusb():
  DBusGMainLoop(set_as_default=True)
  bus = dbus.SystemBus()
  proxy = bus.get_object("org.freedesktop.UDisks", "/org/freedesktop/UDisks")
  iface = dbus.Interface(proxy, "org.freedesktop.UDisks")
  devices = iface.get_dbus_method('EnumerateDevices')()
  usbdev = iface.connect_to_signal('DeviceAdded', device_added_callback)
  mainloop = gobject.MainLoop()
  mainloop.run()
  return usbdev

def checkusbispresent():
  f = open("/etc/mtab")
  lines = f.readlines()
  f.close()
  for line in lines:
    mtpt = "".join(line.split()[1:2])
    isthere = mtpt.find("media")
    if isthere == 1:
      return mtpt

def checkserialfile(mtpt):
  _serialfile=mtpt+"/serial.lic"
  if ( not os.path.isfile(_serialfile)):
    print("Error: serial file not found, please download it now")
  else:
    print("Serial file found, attempting validation... ")

usbdrive = checkusbispresent()
if ( usbdrive is not None ):
  checkserialfile(usbdrive)
else:
  print ("USB drive is not present. Please add it now.")
  added = waitforusb()
  print added 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-21T13:44:40.810

知道了！

我非常怀疑这是最优雅的解决方案，但我会在稍后的某个阶段攻击优雅。

我将 mainloop 设为全局，然后我可以从 device_added_callback 中访问它：

```
def waitforusb():
  DBusGMainLoop(set_as_default=True)
  bus = dbus.SystemBus()
  proxy = bus.get_object("org.freedesktop.UDisks", "/org/freedesktop/UDisks")
  iface = dbus.Interface(proxy, "org.freedesktop.UDisks")
  devices = iface.get_dbus_method('EnumerateDevices')()
  iface.connect_to_signal('DeviceAdded', device_added_callback)
  global mainloop
  mainloop = gobject.MainLoop()
  mainloop.run()

def device_added_callback(device):
  usbdev = "".join(device.split("/")[5:6])
  if usbdev.endswith("1") == 1:
    mainloop.quit() 
```

# android - 在 Android 上替代 MenuCompat.setShowAsAction()

> ID：15479522
> 
> 赞同：1
> 
> 时间：2013-03-18T14:40:43.967
> 
> 标签：android, android-actionbar, compatibility

在寻找一种在 ActionBar 中显示选项并且仍然与 Honey 兼容的方法时，我遇到了兼容性库（[http://developer.android.com/reference/android/support/v4 ）中的 MenuCompat.setShowAsAction() 方法/view/MenuCompat.html](http://developer.android.com/reference/android/support/v4/view/MenuCompat.html)），但它已被弃用，我在库中找不到替代品来做同样的事情。有任何想法吗？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-08-07T07:35:51.250

`MenuItemCompat.setShowAsAction(MenuItem, int)`已在[API 级别 26.0.0 beta1](https://developer.android.com/reference/android/support/v4/view/MenuItemCompat.html#setShowAsAction(android.view.MenuItem%2C%20int))中弃用。现在可以`setShowAsAction (int actionEnum)`直接使用了。`actionEnum`定义项目应如何显示。您可以选择`SHOW_AS_ACTION_ALWAYS`、`SHOW_AS_ACTION_IF_ROOM`或之一`SHOW_AS_ACTION_NEVER`。`SHOW_AS_ACTION_NEVER`是默认值。在这个例子中，我们将使用：

```
public boolean onCreateOptionsMenu(Menu menu)
{
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu_main, menu);

    // MenuItemCompat.setShowAsAction(menu.findItem(R.id.menu_quit), 1)
    menu.findItem(R.id.menu_quit).setShowAsAction(MenuItem.SHOW_AS_ACTION_IF_ROOM);
    return true;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T14:42:55.657

如果您在上面链接到的页面[上阅读](http://developer.android.com/reference/android/support/v4/view/MenuCompat.html#setShowAsAction%28android.view.MenuItem,%20int%29)[JavaDocs`setShowAsAction()``MenuCompat`](http://developer.android.com/reference/android/support/v4/view/MenuCompat.html#setShowAsAction%28android.view.MenuItem,%20int%29)，您会找到答案：

> 使用[MenuItemCompat.setShowAsAction(MenuItem, int)](http://developer.android.com/reference/android/support/v4/view/MenuItemCompat.html#setShowAsAction%28android.view.MenuItem,%20int%29)

# eclipse - Eclipse 错误：无法获取工作区根目录/未找到类定义

> ID：15479523
> 
> 赞同：0
> 
> 时间：2013-03-18T14:40:46.827
> 
> 标签：eclipse

**问题描述：** 在一个工作空间我有很多包，每个包都有很多类文件。几乎每个类文件都定义了 main 方法。以前，无论我想运行哪个文件，我都会打开它并运行。但是现在，无论我打开并尝试运行哪个文件，它总是从我的工作区运行一个文件，说“X”。如果我删除该文件，它会抛出一个异常“NoClassDefinitionFoundError”。我还收到错误消息：无法获取工作区根目录。

在我开始收到此错误之前，它对我来说一直运行良好。具体来说，eclipse如何加载一个类来运行？可能里面有什么乱七八糟的。

PS：这些类文件在逻辑上不相关。它们是具有解决一些小问题的主要方法的单个文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T19:16:40.220

这可能是一个愚蠢的错误，但这是我今天再次遇到相同问题时发现的实际原因：

我试图运行的类有一个“私有”主方法，因此它正在获取我在 Eclipse 上运行的上一个类的主方法。

我不确定它是如何拾取的，或者这些东西是如何在 Eclipse 中管理的，但是是的，这就是导致我出现错误的原因，并且在将主要方法更改为 public 后它得到了纠正。

# matlab - 获取 Matlab 中每个 x 位置的平均 y 值

> ID：15479533
> 
> 赞同：3
> 
> 时间：2013-03-18T14:41:06.027
> 
> 标签：matlab

我不知道如何表达这个，但举个例子：

```
x = [1 4 4 5 5 5];
y = [5 1 3 3 4 5]; 
```

然后我想要输出

```
xs          = [1 4 5];
ys          = [5 2 4];
frequencies = [1 2 3] 
```

（因为 x=1 处`5`的平均 'y' 是 ， x=4 处`(1+3)/2 = 2`的平均 'y' 是 ， x=5 处的平均 'y' 是`(3+4+5)/3 = 4`）。

我可以用笨拙的方式计算这个，但也许有一个很好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:34:08.183

您可以使用直方图函数`histc`来获取每个类别：

```
x = [ 1 4 4 5 5 5];
y = [ 5 1 3 3 4 5];
xs = unique(x);
[frequencies xb] = histc(x, xs); % counts the number of each unique occurrence
ysp = sparse(1:numel(x), xb, y); % a sparse matrix is a good way to organize the numbers
ys = full(sum(ysp)./sum(ysp>0)); % each column in the matrix corresponds to a "index" 
```

这为您提供了您想要的三个数组。我认为这是非常干净和高效的——没有循环，只有四行代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T15:27:55.970

```
x = [1 4 4 5 5 5];
y = [5 1 3 3 4 5];
xs = unique(x);
[frequencies,bin] = histc(x,xs);
ys = arrayfun(@(i) mean(y(bin==i)), 1:length(xs)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-25T04:00:01.410

@ioum 的回答对我很有用，尽管在最后一行有一个小错误，当我将其他向量作为输入而不是此处发布的向量时出现了。例如，删除每个向量的最后一个元素后，答案应该是：

```
ys = [5 2 3.5] 
```

稍微更正的代码是：

```
x = [1 4 4 5 5 5];
y = [5 1 3 3 4 5];
xs = unique(x);
[frequencies,bin] = histc(x,xs);
ys = arrayfun(@(i) mean(y(bin==i)), 1:length(xs)); 
```

我试图编辑 @ioum 的帖子，但编辑没有通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:16:27.723

我不确定这个解决方案是否足够优雅，但这应该可行：

```
x = [1 4 4 5 5 5];
y = [5 1 3 3 4 5];
[xs,I,J] = unique(x);    %The value of the index vector I is not required here.
ys = zeros(size(xs));
frequencies = zeros(size(xs));
for i = 1:max(J)
    I = find(J==i);
    ys(i) = mean(y(I));
    frequencies(i) = length(I);
end
xs,ys,frequencies 
```

输出将是：

```
xs =

     1     4     5

ys =

     5     2     4

frequencies =

     1     2     3 
```

我希望这有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-18T15:28:42.853

```
x = [1 4 4 5 5 5]';
y = [5 1 3 3 4 5]'; 
```

%这可能会做得更聪明......

```
indexlong=accumarray(x,x,[],@mean)'
meanlong=accumarray(x,y,[],@mean)'
frequencieslong=accumarray(x,1)' 
```

%省略零

```
takethese=(indexlong>0);
xs=indexlong(takethese)
ys=meanlong(takethese)
frequencies=frequencieslong(takethese) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-18T23:26:01.123

这是我的代码，希望对您有所帮助...

```
 x=sort(x);
   ind=1;
    for i=1:length(x)
        if (i>1 && x(i)==x(i-1))
           continue;
        end
        xs(ind)=x(i);
        freq(ind)=sum((x==x(i)));
        ys(ind)=sum((x==x(i)).*y)/freq(ind);
        ind=ind+1;
    end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-20T13:12:04.803

虽然我会推荐其中一种直方图方法，但这是我将如何循环执行的方法。与其他一些解决方案没有太大不同，但我相信它只是更好一点，所以无论如何我都会发布它。

```
xs = unique(x)
for t = 1:length(xs)
   idx = x == xs(t);
   ys(t) = mean(y(idx));
   frequencies(t) = sum(idx);
end 
```

# facebook - Facebook错误3506“动作类型喜欢：喜欢不存在或未批准”我如何解决这个问题？

> ID：15479534
> 
> 赞同：0
> 
> 时间：2013-03-18T14:41:14.390
> 
> 标签：facebook, node.js, facebook-graph-api

我试图通过图形 api 使用 facebook 内置的点赞功能。我正在使用 App Token，因为用户已经登录了我的网站。这是我使用的源代码，它使用这个库 [https://github.com/criso/fbgraph](https://github.com/criso/fbgraph)

```
function liker(url,profile){
 graph.setAccessToken(app_token);

  var like = {
    object: url
  };

  graph.post(profile.id + "/og.likes", like, function(err, res) {
  // returns the post id
    console.log(res); // { id: xxxxx}
  });
} 
```

该应用程序与应用程序管理员/所有者我按预期工作，但与任何其他用户我收到此错误消息

```
 error:
  { message: '(#3506) The action type likes:Like does not exist or is not approved, so app      xxxxxxxxxx can only publish to administrators, developers, and testers of the app.  User yyyyyyyyyyy$
 type: 'OAuthException',
 code: 3506 } 
```

我的应用程序向用户请求发布操作权限，这是对来自 fb 的内置类似操作的要求。

预先感谢，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-08T16:12:03.210

您必须在 Facebook 批准之前提交您的操作，请在此处查看：[https ://developers.facebook.com/docs/opengraph/submission-process/](https://developers.facebook.com/docs/opengraph/submission-process/)

在此之前，只允许应用程序的管理员、开发人员和测试人员测试操作。

# java - JAXB 忽略没有注释的瞬态字段

> ID：15479538
> 
> 赞同：2
> 
> 时间：2013-03-18T14:41:27.130
> 
> 标签：java, xml, jaxb

我在基于 JDK 5 的应用程序上使用 JAXB。

XML 编组是一个附带功能，因此 POJO 模型上的注释被排除在外。应该排除的字段是`transient`（java 关键字）。

有没有办法配置`Marshaler`忽略这些字段。

这是我用来将 POJO 序列化为 XML 的代码：

```
JAXBContext context = JAXBContext.newInstance(BasePOJO.class, target.getClass());

JAXBElement<WsResponse> model = new JAXBElement<BasePOJO>(
        new QName(target.getClass().getSimpleName()), 
        (Class<BasePOJO>) target.getClass(), 
        (BasePOJO)target
    );

Marshaller marshaller = context.createMarshaller();
marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
marshaller.marshal(model, os); 
```

我需要序列化的示例 POJO：

```
public class APOJO extends BasePOJO {
  private Long id;
  private String desc;
  private transient String aFieldToIgnore;

  //and the accessors[...]
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:52:21.227

我不相信没有`@XmlTransient`在您的字段上使用注释的方法可以做到这一点。

您可以做的唯一真正的定制是在您的 XSD 中使用绑定文件或内联绑定。

检查参考以了解可能的情况：http: [//docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.5/tutorial/doc/JAXBUsing4.html](http://docs.oracle.com/cd/E17802_01/webservices/webservices/docs/1.5/tutorial/doc/JAXBUsing4.html)

# c# - ListView SetWindowTheme 问题

> ID：15479540
> 
> 赞同：2
> 
> 时间：2013-03-18T14:41:35.093
> 
> 标签：c#, winforms

我现在正在尝试使用由 SetWindowTheme() 函数设置的样式来实现 winforms listview 控件。一切正常，但默认的“Explorer”样式在列之间有垂直线。我怎样才能删除它们？

# windows - 批处理脚本设置命令无法正常工作

> ID：15479542
> 
> 赞同：1
> 
> 时间：2013-03-18T14:41:42.593
> 
> 标签：windows, batch-file, command

我正在尝试从文件中读取第一行，并将其设置为环境变量。下面是我使用的变量

```
@echo off
if EXIST "test.dat" (
    set JAVA_HOME_PATH=
    set JAVA_PATH=
    set /p JAVA_HOME_PATH=<test.dat
    echo %JAVA_HOME_PATH%
    set JAVA_PATH=%JAVA_HOME_PATH%\bin\java
    echo %JAVA_PATH%
  ) 
```

假设 test.dat 包含 JDK 的路径，如果它是 c:\JDK1.6

在我第一次运行它时

```
ECHO is off.
ECHO is off. 
```

再次运行我得到

```
c:\JDK1.6
\bin\java 
```

再次运行我得到

```
c:\JDK1.6
c:\JDK1.6\bin\java 
```

我力图更改 test.dat 文件。但是为什么会这样呢？只有当我第三次运行时所有变量都设置好了？看起来很奇怪。我在这方面做错了吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T14:57:59.083

Batch 总是将任何语句中的任何 %var% 替换为其 CURRENT 值，然后运行该语句。您的 IF 语句从 IF 关键字运行到右括号。

在第一次运行时，批处理替换（无）`Java_home_path`和 for`java_path`因此`ECHO %java_home_path%`解释为“回声”，并且批处理报告其 ECHO 状态。

但是，`java_home_path`设置为`c:\JDK1.6`从`test.dat`但`JAVA_PATH`设置为`(nothing)\bin\java`

在第二次运行时，这些现有值被适当报告，`java_home_path`设置自`test.dat`并`JAVA_PATH`设置为`c:\JDK1.6\bin\java`

在第三次运行时，您会得到您期望报告的名称。

治愈：（1）

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
if EXIST "test.dat" (
    set JAVA_HOME_PATH=
    set JAVA_PATH=
    set /p JAVA_HOME_PATH=<test.dat
    echo !JAVA_HOME_PATH!
    set JAVA_PATH=%JAVA_HOME_PATH%\bin\java
    echo !JAVA_PATH!
  ) 
```

治愈：（2）

```
@echo off
if not EXIST "test.dat" ECHO No test.dat&goto :eof
set JAVA_HOME_PATH=
set JAVA_PATH=
set /p JAVA_HOME_PATH=<test.dat
echo %JAVA_HOME_PATH%
set JAVA_PATH=%JAVA_HOME_PATH%\bin\java
echo %JAVA_PATH% 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T14:48:17.437

您的问题是[变量的延迟扩展之一](http://www.robvanderwoude.com/variableexpansion.php)。

要修复它，只需将脚本更改为 include `SETLOCAL ENABLEDELAYEDEXPANSION`，然后使用`!!`而不是`%%`这样：

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
if EXIST "test.dat" (
    set JAVA_HOME_PATH=
    set JAVA_PATH=
    set /p JAVA_HOME_PATH=<test.dat
    echo !JAVA_HOME_PATH!
    set JAVA_PATH=!JAVA_HOME_PATH!\bin\java
    echo !JAVA_PATH!
) 
```

# javascript - 当文本框与rails中模型的ID号匹配时尝试检查特定复选框

> ID：15479543
> 
> 赞同：0
> 
> 时间：2013-03-18T14:41:56.493
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, coffeescript

我有以下三个表：

`Student`，`Register`以及一个名为 的连接表`Student_Register`。 ![在此处输入图像描述](../Images/c02bd272720c13df6595be0d0ad39eb6.png)

为了更容易理解，这里是每个模型：

```
class Register < ActiveRecord::Base
  has_many :student_registers
  has_many :students, :through => :student_registers
  belongs_to :event
  attr_accessible :date, :student_ids, :module_class_id, :event_id
end

class Student < ActiveRecord::Base
  has_many :student_registers
  has_many :registers, :through => :student_registers
  attr_accessible :first_name, :last_name, :university_id
end

class StudentRegister < ActiveRecord::Base
  belongs_to :register
  belongs_to :student
  attr_accessible :present, :register_id, :student_id, :time_of_arrival
  default_scope :order => 'present DESC'
end 
```

所以现在我想做的是使用`Register`控制器打开某个寄存器并在`register/1/registration`页面上标记该寄存器。这很好用。但是我目前拥有的是以下内容： ![在此处输入图像描述](../Images/43824eef173f3a69693fb36fcbb2de6a.png) 每个复选框都有一个附加的提交按钮，但是我使用`:style => 'display: none'`. 以下代码可能会让您更好地了解正在发生的事情：

**`register/registration.html.erb`**

```
<table border="1">
  <%= text_field_tag 'Card_ID',nil,  :autofocus => true %>
      <tr><td>Present</td>
        <td>University ID</td>
    <td>First Name</td>
        <td>Last Name</td>
        <td>Time of Arrival</td>
      </tr>
  <tr>
  <% @studentregister.each do |t| %>
<%= simple_form_for t do |streg| %>
      <td><div class="present"><%= streg.check_box :present, :onChange => "submit()"%>  </div>
        <%= streg.submit :style => 'display: none' %></td>
            <td><%= streg.label Student.find(t.student_id).university_id %></td>
            <td><%= streg.label Student.find(t.student_id).first_name %></td>
            <td><%= streg.label Student.find(t.student_id).last_name %></td>
            <% if t.time_of_arrival %>
            <td><%= streg.label t.time_of_arrival.strftime('%H:%M:%S%P')%></td>
                <% else %>
            <td><%= streg.label " "%></td>
                <% end %>
             </tr>
    <% end %>
    <% end %>
</table> 
```

该页面的源代码如下所示：

![在此处输入图像描述](../Images/da92e137c4b0c1a798a40e04a230303d.png)

我想要做的是以下内容：

当放在文本框中的文本与`University ID`学生中的一个匹配时，我希望选中相应的复选框，理论上，一旦选中，它的表单就会自动提交，“嘿，presto”的表单它得到更新。

这是我当前的 JS/Coffeescript 代码：

**`registers.js.coffee`**

```
$("input[name=Card_ID]").keyup ->
  if @value.length > 3
    $("input[name=\"student_register[present]\"]").prop "checked", true
  else
    $("input[name=\"student_register[present]\"]").prop "checked", false 
```

我知道这段代码没有做我想做的事，主要是因为我的 JS/Coffeescript 知识为 0，还因为我只是想检查它是否有效，当文本框的长度值大于 3 时它应该检查一个/所有复选框（不确定此代码将检查什么，因为不是很清楚并且复选框是相同的），但是它不起作用。

我什至不知道如何使用 Ruby 代码来搜索`University ID`并与学生匹配。我现在真的很困惑，现在已经三天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:00:31.897

我试图让您的问题围绕巨型尺寸描述 O_O 进行浏览。如果我做对了，你想要这样的东西：

表单有一个`id`属性，使用它。看看你的 HTML 结构：

```
# Each 'student_register' form has an id "edit_student_register_#{id}"
# where id is the object's id
# Inside each of these forms there is a check box with name "student_register[present]"

<form id="edit_student_register_15">
  <input name="student_register[present]"/>
</form>

# So you need to get that input with a selector like this:
$("input[name=Card_ID]").keyup (e)->
  if e.wich is 13 # If enter key is pressed...
    id = this.text # To interpolate in the selector below
    $("form#student_register_#{id} input[name='student_register[present]']").attr 'checked', true 
```

在浏览器控制台中玩耍以检查您的选择器带来了什么。

# ruby-on-rails - 重置按钮在提交前有效，但在表单提交后无效

> ID：15479544
> 
> 赞同：0
> 
> 时间：2013-03-18T14:42:03.373
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms

在我单击表单提交之前，以下代码有效。因此，如果我在提交之前填写这些字段，然后单击“重置”，效果会很好。

```
<input type="reset" class="advanced-reset-btn" id="advancedResetButton" name="advancedResetButton" value="Reset" /> 
```

但是当我点击这个作品提交后，什么也没有发生。它不会像应有的那样重置字段 关于提交 onclick 后我应该如何清除表单的任何建议？

更新

```
<form id="advancedSearchOrder" name="advancedSearchForm" value="advancedSearch" action="" class=" search line" method="GET" >
<span class="advancedSearchFormlabel">Order Id</span>
      <%= text_area_tag('filters[order_id]',filter_params['order_id'],:rows=>10) %>
...
...
...
<input type="submit" class="advanced-search-btn" id="advancedSearchButton" name="advancedSearchButton" value="Search"/>
<input type="reset" class="advanced-reset-btn" id="advancedResetButton" name="advancedResetButton" value="Reset" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-19T14:37:56.103

RESET 输入类型将表单重置为页面加载时的状态，而不是重置为空表单。提交表单后，表单会预先填充提交的数据。重置表单会将其重置回此预填充状态。

您可以通过执行以下操作来测试它。

1.  在字段中输入 ABC 并提交表单。页面重新加载，表单预先填充了 ABC。

2.  将字段更改为 ABCDEF。单击重置。表格重置为 ABC。

这是 RESET 的正常行为，熟悉 RESET 按钮的人会期望它的行为是这样的。如果您想删除表单上的所有字段，您可能必须使用类似于 Amar 答案的 javascript。另一种选择是清除控制器中的值，以便在每次提交表单后向客户端发送一个新的空表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:45:36.063

相同的按钮：

```
<input class='advanced-reset-btn'>Reset</input> 
```

在你的 javascript 文件中：

```
$('.advanced-reset-btn').click(function() { $('#your-form')[0].reset() }) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T14:45:36.563

您可以使用 jquery 或 javascript 在单击时重置表单 `$('#form_id')[0].reset();`或像这样手动休息值或`$("#form_id").find("input[type=text], textarea").val("")`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-10-09T08:29:13.510

jquery val() 函数作用于元素的属性。尝试删除该属性。

$('表单输入').attr("值", "");

# jquery - 上传进度条和codeigniter出错

> ID：15479546
> 
> 赞同：0
> 
> 时间：2013-03-18T14:42:14.400
> 
> 标签：jquery, codeigniter, upload, progress-bar, pecl

我正在使用 PECL uploadprogress、codeigniter 方法（用于服务器端 php 脚本）和 jQuery（用于调用服务器和计算百分比等）实现上传栏，但是当调用运行 getProgress 脚本的 startProgress 脚本时我有一点问题循环该回调 php 方法。我查看 google chrome 控制台并看到以下内容 ![刚开始发送文件](../Images/fb8e84c5f6322343bec83c9eda1cb9f3.png)

刚开始提交文件，调用php方法的帖子就被取消了，我找不到错误在哪里。显然，将循环制动到 json_get_uploadprogress 方法查询剩余字节。预先感谢您的帮助

表格：

```
<script type="text/javascript">
     $(document).ready(function(){
        $('#uploadform').submit(function() {
        var uid = $("#uid").val();
        startProgress(uid);
     });
 });

 <div class="forms" style="margin:20px;clear: left">
     <form id="uploadform" action="/miadmin/upload_foto" enctype="multipart/form-data" method="post" class="forms">      
                <input type="hidden" id="uid" name="UPLOAD_IDENTIFIER" value="<?php echo $unique_id ?>" id="progress_key" />
                <input type="hidden" name="cliente" value="<?php echo $dir_id ?>" />                  
                <input type="file" value="Selecciona una foto" name="foto" id="foto" style="float:left;width:400px" /><br>
                <input type="submit" value="Agregar" id="agregar" style="float:left" />                   
            </form>
            <div id="progressBar" class="progressbar"></div> 
            <iframe id="uploadIframe" name="uploadIframe" src=""></iframe>
            <script type="text/javascript">var url = "<?php echo base_url();?>";</script>
            <script type="text/javascript" src="<?php echo base_url();?>js/uploadprogress.js"></script>
         <?php }  ?>
    </div> 
```

调用 php 的 Javascript 代码：

```
function getProgress(uploadKey){
$.post("json_get_uploadprogress",{"upload_id":uploadKey},
function(data)
{
   if(!data) return;
   var result = data.result;
   var percentage = 0;
   percentage = data.percentage;
   if (percentage > 0) {
   $("#progressBar").html("<h3>Upload progress...</h3><div  cass='progressGrey'>"+result+"    <div class='progressRed' style='width:"+percentage+"%'>"+result+"</div></div>");
   } else {
   $("#progressBar").html("<h3>Upload progress...</h3><div xlass='progressGrey'>"+result+"</div>");
}
if (percentage < 100) {
  var timeoutID = window.setTimeout("getProgress(theUploadKey)", 1000); //query every 1 second
}
if(percentage >= 100)
{
    $("iframe#uploadIframe").css('display','block');
    var body = $("iframe#uploadIframe").contents().find("body");
    //Remaquetamos el body del iframe por culpa de IE
    body.css('border','0px none');
    body.css('background-color',$("body").css('background-color'));
    body.css('text-align','center');
}
}, "json"
);
}

function startProgress(uploadKey) {
theUploadKey = uploadKey;
 $("#progressBar").css('display','block');
 $("#progressBar").html("<h3>Upload progress...</h3><div class='progressGrey'> </div>");
  $("form#uploadform").css('display','none');
  getProgress(uploadKey);
return null;
} 
```

和php方法：

```
public function json_get_uploadprogress()
 {
 $data = array();
 if($this->input->post('upload_id'))
 {
     $uploadKey = $this->input->post('upload_id');
     $status = false;
     $percentage = 0;
     $result = "INITIALISING UPLOAD";
     $data["percentage"] = $percentage;
     $data["result"] = $result;
     if (function_exists('uploadprogress_get_info'))
     {
        $status = uploadprogress_get_info($this->input->get('uid'));
     }
     if (is_array($status))
     {
         log_message("error", "STATUS: ".print_r($status,TRUE));
             if (array_key_exists("bytes_total", $status) && array_key_exists("bytes_uploaded", $status))
             {
             $percentage = round((($status['bytes_uploaded'] / $status['bytes_total']) * 100),2);
                 if ($status['bytes_uploaded'] >= $status['bytes_total'])
                 {
                 $percentage = 100;
                 $result = "UPLOAD COMPLETE";
                 }
                 else
                 {
                  $bytes = array('B','KB','MB','GB','TB');
                  foreach($bytes as $val)
                  {
                    if($status["bytes_total"]  > 1024)
                    {
                    $status["bytes_total"] = $status["bytes_total"] / 1024;
                    $status["bytes_uploaded"] = $status["bytes_uploaded"] / 1024;
                    }
                    else
                    {
                    break;
                    }
                  }
                $result =  $percentage."% (".round($status["bytes_uploaded"], 2)." ";
                $result.= $val." of ".round($status["bytes_total"], 2)." ".$val.")";
                }
            $data["percentage"] = $percentage;
            $data["result"] = $result;
            }

    }
}
$this->load->view('miadmin/json_response_view',array("array" => $data));
} 
```

json_response_view.php 视图只包含 json 格式的数据响应：

```
echo json_encode($array); 
```

# salesforce - 多个浏览器窗口/选项卡作为 Twilio 客户端问题

> ID：15479549
> 
> 赞同：1
> 
> 时间：2013-03-18T14:42:28.410
> 
> 标签：salesforce, apex-code, twilio

我正在使用 Twilio 客户端 API 在我的 Web 应用程序中实现软电话。我可以使用浏览器成功拨打和接听电话。

使用下面的代码生成 Twilio 所需的令牌。

```
TwilioCapability capability = new TwilioCapability(ACCOUNT_SID, AUTH_TOKEN);
capability.allowClientOutgoing(applicationSid);
capability.allowClientIncoming('MY CLIENT NAME');
token = capability.generateToken(); // token works fine 
```

现在，如果我的网页在多个浏览器窗口/选项卡中打开，每个窗口/选项卡都充当软件电话，并在每个窗口/选项卡上接收来电通知。（因为每个浏览器都使用相同的名称注册 - 'MY CLIENT NAME'）

当窗口/选项卡之一接受通知时，我想断开其他人的传入通知。

有任何想法吗。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-14T00:44:07.870

Twilio 开发人员布道者在这里。

[`Dial`您可以使用和`Client`TwiML 动词](https://www.twilio.com/docs/api/twiml/dial?utm_source=stackoverflow&utm_medium=jan2014&utm_campaign=stackathon#nouns-client)同时响铃多个客户端窗口。如果您为每个客户端窗口分配一个不同的名称，则需要同时调用所有这些 TwiML，直到有人回答为止，这将类似于以下代码段：

```
<Response>
  <Dial>
    <Client>window1</Client>
    <Client>window2</Client>
    <Client>window3</Client>
  </Dial>
</Response> 
```

# jquery - 模态关闭按钮不起作用

> ID：15479551
> 
> 赞同：0
> 
> 时间：2013-03-18T14:42:34.403
> 
> 标签：jquery, html, css, modal-dialog

我有一个简单的模式窗口，当点击链接时打开，当用户点击关闭按钮时关闭（在我的小提琴中表示为红色矩形）。

[这是我的小提琴的链接](http://jsfiddle.net/jsavage/zwN6R/30/)

这是代码：

```
// prize modal
$('.modal').on('click',function(){  
    if(!$('#prize-modal').hasClass('open')){
        $('#prize-modal').css('opacity',0.7);
        if($.browser.msie){
        $('#prize-modal').css('opacity','null').css('display','block').addClass('open');
        }else {
        $('#prize-modal').css('opacity',0).css('display','block').addClass('open').stop().animate({opacity: 1}, 500);
        }
    }
    return false;
}); 

// .close the class that you want to trigger the modal clossing

$('.close').on('click',function(){
    if($.browser.msie){
        $('.open').css('opacity','null').css('display','none').removeClass('open');
    }else {
        $('.open').stop().animate({opacity: 0}, 500,function()
        {
        $('.open').css('display','none').removeClass('open');
        });
    }
}); 
```

我无法弄清楚为什么“关闭”按钮不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:52:20.207

```
`TypeError: 'undefined' is not an object (evaluating '$.browser.msie')` 
```

> jQuery.browser() 已移除
> 
> jQuery.browser() 方法自 jQuery 1.3 以来已被弃用，并在 1.9 中被删除。如果需要，它可以作为 jQuery [Migrate 插件](https://github.com/jquery/jquery-migrate/)的一部分使用。我们建议将特征检测与 Modernizr 等库一起使用。

来源：http: [//jquery.com/upgrade-guide/1.9/#jquery-browser-removed](http://jquery.com/upgrade-guide/1.9/#jquery-browser-removed)

更新小提琴：http: [//jsfiddle.net/zwN6R/31/](http://jsfiddle.net/zwN6R/31/)

# java - Android 应用程序：将 3gp 转换为 mp3

> ID：15479561
> 
> 赞同：0
> 
> 时间：2013-03-18T14:42:48.477
> 
> 标签：java, android, eclipse, ffmpeg, mp3

我的声音文件应该从 3gp 更改为 mp3。

我试图用 ffmpeg 做到这一点：

```
ffmpeg -i input.3gp -vn -acodec libmp3lame -ab 64k output.mp3 
```

但是新的 mp3 文件只有 0 KB 大。

libmp3lame 可能是问题所在吗？甚至可以在 Java 中做到这一点吗？（因为我只找到了 c++ 示例）

# mysql - mysql中的计数列

> ID：15479566
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:42:51.953
> 
> 标签：mysql, sql, sequence

假设我在 mysql 中有这样的表：

```
userid, paymentid, datetime
blah, 123, 1/2/2011
blah, 144, 1/8/2011
foo, 151, 2/4/2011
bar, 178, 2,8,2011 
```

如何添加一个“订单”列，它基本上是每个用户的序列计数，按日期时间排序？

```
userid, paymentid, datetime, order
blah, 123, 1/2/2011, 1
blah, 144, 1/8/2011, 2
foo, 151, 2/4/2011, 1
bar, 178, 2,8,2011, 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:46:23.630

```
SELECT userid, paymentid, datetime,
        grpTotal AS `ORDER`
FROM
(
  select  userid,
          paymentid,
          datetime,
          @sum := if(@grp = userid,@sum,0) + 1 as grpTotal,
          @grp := userid
  from    TableName,
          (select @grp := '', @sum := 0) vars
  order   by  userid, datetime
) x 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/8281a/3)
*   [SQLFiddle 演示（*使用 ORDER BY 日期*时间）](http://www.sqlfiddle.com/#!2/8281a/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:50:52.067

所以如果你只想改变结构，你可以使用这个：

```
ALTER TABLE table_name ADD order integer 
```

然后，如果您想保持更新，您可以创建一个“触发器”：

[http://www.sqlteam.com/article/an-introduction-to-triggers-part-i](http://www.sqlteam.com/article/an-introduction-to-triggers-part-i)

另一种方法是创建一个“视图”，您可以在其中动态计算订单。然后，您将从该视图中进行所有选择。

[http://www.tutorialspoint.com/sql/sql-using-views.htm](http://www.tutorialspoint.com/sql/sql-using-views.htm)

# html - 背景图片未显示在 Firefox 中设置的负上边距

> ID：15479567
> 
> 赞同：0
> 
> 时间：2013-03-18T14:42:52.967
> 
> 标签：html, css, firefox, background-image

我有一个使用 top-margin: -28px; 的滚动图像部分（图像是背景图像而不是标签）将其移动到我正在制作的网站上的部分标题下方。它在 Safari、Chrome 等上完美显示，但在 Firefox 上，图像的顶部 28px 没有显示。

任何想法为什么？我不知道，这让我发疯。

该网站在这里[http://www.chelt.org.uk](http://www.chelt.org.uk)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:46:40.150

`enter code here`改用`.top`：

```
.slides{
    top: -28px;
} 
```

同时删除负边距

```
#feature {
    margin-top: -28px; <-- Remove
    overflow: hidden;
} 
```

在其他新闻中，您`#feature`不止一次出现在标记中。一个 ID 应该只出现一次。如果您需要在多个元素上使用它，它应该是一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:51:15.470

您的负边距应用于 的子`<div>`标签`#slides`。

由于您已`overflow: hidden;`申请`#slides`，因此被推到 div 之外的部分`#slides`是隐藏的。

解决方案：

1.  `margin-top`从_`#feature`

2.  添加`top: -28px;`到`#slides`

我还应该指出，`#feature`为所有幻灯片分配 Id 是无效的。ID 必须是唯一的，这意味着您不能拥有多个相同的 ID。你应该做到`#feature-1`，`#feature-2`....如果你必须为幻灯片分配一个 ID。

# c++ - 您可以通过取消引用指针来返回整数吗？

> ID：15479570
> 
> 赞同：2
> 
> 时间：2013-03-18T14:42:57.473
> 
> 标签：c++, pointers, undefined-behavior

```
int f(int *x)
{
    *x = 5;
    return *x;
}

int main()
{
    int * y = 0;
    int z = f(y);
} 
```

为什么这段代码会给我一个运行时错误？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T14:44:18.553

> 为什么这段代码会给我一个运行时错误？

因为`y`是一个`NULL`指针，它在`f()`. `NULL`请注意，取消引用指针是未定义的行为。

> 您可以通过取消引用指针来返回整数吗？

是的，假设指针指向一个有效的`int`. 例如：

```
int main()
{
    int y = 0;
    int z = f(&y);
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T14:44:28.630

你可以，如果一个指针指向一些有效的内存。在您的情况下，您正在[取消引用 NULL ( `0x00`) 指针](https://stackoverflow.com/questions/2727834/c-standard-dereferencing-null-pointer-to-get-a-reference)，这是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)（又名 UB）。例如，这可以正常工作：

```
int f(int *x)
{
    *x = 5;
    return *x;
}

int main()
{
    int value = 1986;
    int *y = &value; // Point to something valid.
    int z = f(y);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T14:45:55.827

因为 after `int *y = 0;`,`y`是一个指向空的指针（指向 address `0`）。你的代码应该是这样的：

```
int * y = new int;
*y = 0;
int z = f(y);
// ...
delete y; 
```

或者

```
int y = 0;
int z = f(&y); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-18T14:46:05.383

您正在设置`y`使其`0`成为指针的`NULL`指针：

```
int * y = 0; 
```

然后你试图在这里的*指针上执行**间接*：*`f()`*

 *```
*x = 5;
^ 
```

并在随后的行中，这是[未定义的行为](http://en.wikipedia.org/wiki/Undefined_behavior)。如果我们查看[草案 C++ 标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3485.pdf)部分`8.3.2` *参考*第*5*段说：

> [...] 注意：特别是，在定义良好的程序中不能存在空引用，因为创建此类引用的唯一方法是将其绑定到通过空指针间接获得的“对象”，这导致未定义的行为。[...]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T14:48:22.197

在取消引用之前检查指针并始终指定错误行为：

```
int f(int *x)
{
   if ( x )
   {
     // do something with x
   }
   else
   {
     // do something else in case null pointer
   }
} 
```

取消引用空指针会产生空指针异常，例如您的情况。*

# twitter-bootstrap - 简单的 jquery 事件绑定不再起作用

> ID：15479573
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:43:06.740
> 
> 标签：twitter-bootstrap, mouseevent, jquery, jquery-datatables

我曾经在这样的表格行上绑定点击事件：

```
$('#example tbody > tr').on('click', function() {
    console.log("i clicked on a row");
}); 
```

但它不再起作用了。我从 1.8.0 到 1.9.1（最新）重新尝试了 jQuery，但它什么也没做。我检查了它是否是 twitter-bootstrap（从 bootstrapcdn 检索）：从 2.1.0 到 2.3.1 没有任何变化。

我的测试配置是最新的 FireFox/Chrome。该网站在 symfony2 上运行，带有 jQ​​uery 以及 twitter bootstrap 和 Datatables plugins/css。

所以，问题：

1.  如何调试？
2.  有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:46:40.503

调用委托`on`事件的正确方法是将其委托给最近的静态元素..

试试这个

```
 $(function(){ //incase you missed the doc.ready
   $('#example tbody').on('click','tr', function () {
    console.log("i clicked on a row");
   });
}); 
```

或者

```
$(document).on('click','#example tbody tr', function () {
  console.log("i clicked on a row");
}); 
```

第一个`on`比第二个更好更快......只是当事件被调用时......委托点击的元素需要出现在文档中......

# android - 从微调器中删除文本

> ID：15479579
> 
> 赞同：1
> 
> 时间：2013-03-18T14:43:17.850
> 
> 标签：android, android-layout, android-spinner

我正在尝试设计一个微调器。我目前拥有的是这个![屏幕1](../Images/9f762414bf9e1c23477b48588a7795e0.png)

`EditText`紧随其后的是`Spinner`。

* * *

现在我使用自定义样式如下![屏幕2](../Images/d50f735b59a0f3b74ae7635d958bb7e3.png)

它还包含一个`EditText`后跟`Spinner`但`Spinner`有一些文本（在本例中为“其他”），即**项目名称 1**。

如何删除该文本，即不应在`Spinner`.
`Spinner`没有任何`textSize`属性，否则我会将其设置为**0**。

我从几个小时开始尝试这个，但没有解决方案。
任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T15:19:24.660

您必须实现自己的适配器，将标题设置为空字符串。这将做：

```
private static class CustomAdapter<T> extends ArrayAdapter<String> {
        public CustomAdapter(Context context, int textViewResourceId, String[] objects) {
            super(context, textViewResourceId, objects);
        }

        public View getView(int position, View convertView, ViewGroup parent) {
            View view = super.getView(position, convertView, parent);
            TextView textView = (TextView) view.findViewById(android.R.id.text1);
            textView.setText("");
            return view;
        }       
} 
```

如果您的微调器在您的布局中有一个 id R.id.spinner 设置适配器是这样的：

```
Spinner spinner = (Spinner) findViewById(R.id.spinner);
CustomAdapter<String> adapter = new CustomAdapter<String>(this, 
    android.R.layout.simple_spinner_dropdown_item, new String[] {"Entry 1", "Entry 2"});
spinner.setAdapter(adapter); 
```

当然，新的 String[] 部分取决于您要在微调器中显示的内容或微调器的内容来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:06:48.043

我认为你应该使用 Android QuickAction Widget。[关联](https://stackoverflow.com/questions/15341458/show-drop-down-list-below-clicked-view/15341865#15341865/%22Link%22)

它是 GitHub 中的一个开源项目。您可以使用 QucikAction 代替 Spinner。它看起来很有吸引力。

![在此处输入图像描述](../Images/276ae737535dd1d8937ccbb46021c773.png)

请通过以下链接。

[https://github.com/lorensiuswlt/NewQuickAction3D](https://github.com/lorensiuswlt/NewQuickAction3D)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:57:35.707

用“”使字符串为空。（即两个引号，中间有一个空格。）

# android - nexus 4 通过 USB 连接 app-inventor

> ID：15479586
> 
> 赞同：0
> 
> 时间：2013-03-18T14:43:33.160
> 
> 标签：android, macos, usb, app-inventor

我尝试使用 wifi 将我的 nexus4 连接到 app-inventor，它工作正常，现在当我尝试使用 USB（启用 USB 调试后）它给了我这个错误 `Detailed error: Unable to get SyncService for device`，我搜索了这个错误，我只能找到人们没有安装他们的 Windows 电脑上的驱动程序

但我使用的是 mac 山狮，它适用于我所有其他安卓手机，包括野火、欲望 C、银河王牌、S2 和 S3，但不适用于这个 nexus4

我错过了什么？有人遇到过这个问题并设法解决了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T11:31:30.630

经过大量的在线搜索，并弄乱了 adb，我发现博客文章说，对于运行 android 4.2 的手机，他们必须在他们的机器上更新 Android SDK 才能让它恢复工作，因为只有 nexus 4我正在使用的其他设备运行 4.2（果冻豆）

要更新 Android SDK，请转到 SDK 文件夹并打开`android`通常在`Documents/Android SDK/tools/android`您会看到已安装软件的列表，并且在需要更新的内容旁边会有通知

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T00:40:14.190

当我从 Mac 命令行运行“adb devices”时，我能够成功连接到 Nexus 上的 App Inventor，该命令行杀死并重新启动了 android 设备处理程序。我从块编辑器收到的错误是“无法启动同步服务”。我现在正在使用它并且它正在工作，无需更新我的 SDK。我推测，当您更新 SDK 时重新启动设备处理程序才是真正解决问题的原因，而不是 SDK 更新的内容。只是我的理论，我还是新手。

# android - 将特定于密度的可绘制对象设置为按钮背景

> ID：15479588
> 
> 赞同：0
> 
> 时间：2013-03-18T14:43:38.387
> 
> 标签：android, android-layout, android-ui

我的应用程序中有几个按钮没有任何文本，只有背景可绘制。我需要这样做，以便从适当的`drawable-?dpi`文件夹中获取可绘制对象，然后在不调整大小的情况下显示。第一部分工作，选择适当的图像文件。但是，无论按钮具有什么`layout_height`和`layout_width`属性，它仍然会调整大小。我的问题是：如何解决这个问题，并使可绘制对象映射到屏幕像素到像素？

我可以让它不调整大小的唯一方法是在 中指定宽度和高度`px`，这正是我不想做的。而我不想这样做的原因是`dimensions`文件，我可以在其中`px`为不同的密度指定可绘制大小，由屏幕大小而不是密度来区分。

这是我的布局：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" xmlns:tools="http://schemas.android.com/tools">

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:paddingBottom="3dp"
            android:paddingTop="3dp" >

            <Button
                android:id="@+id/btn"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/btn" />

        </RelativeLayout>
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:23:35.990

如果您想使用 dpi 文件夹中的精确图像尺寸，您可以将 wrap_content 用于 layout_height 和 layout_width。它将占用图像定义的确切大小。

通常不建议这样做，因为有许多不同的手机具有不同的密度、分辨率等。

使用非文本图像的另一种方法是使用[九个补丁](http://developer.android.com/tools/help/draw9patch.html)将其拉伸到您需要的任何位置。

希望这可以帮助！

# nsstring - 从 NSString 指向 xx 的不兼容指针类型

> ID：15479590
> 
> 赞同：1
> 
> 时间：2013-03-18T14:43:42.937
> 
> 标签：nsstring, uitextfield

这对大多数人来说可能是一个显而易见的问题，但我对这个警告感到非常困惑。

我正在尝试从 UI 获取一个类的值

```
request.EMPLID = @"KU0006";  // insert your zip code here. 
```

但显然 xcode 不允许这样做，我得到了错误不兼容的指针类型从 NSString 分配给 'ONT_EMPLIDTypeShape'

其中 'ONT_EMPLIDTypeShape' 是一个类生成的 wsdl2objc

如何将 UI 中的值分配给类，以便将 WSDL 提交给系统以获取值？任何建议帮助将不胜感激

# css - 使并排表匹配高度

> ID：15479593
> 
> 赞同：0
> 
> 时间：2013-03-18T14:43:48.483
> 
> 标签：css, mobile, html-table, html-email

好吧，据我所知，我在这里提出的问题似乎没有一个可以轻松通过 Google 搜索的解决方案。也许我只是在搜索和/或不了解我在看/在做什么，但我真的找不到任何东西。

这基本上是适合移动设备的电子邮件模板的结构。为了让所有内容在移动设备上查看时变成单列，所有内容都需要收集到表格中。不幸的是，众所周知，桌子不会自然地伸展到邻居的高度。下面的内容他们可以很明显的往下推，但是邻居却比不上。

显然，在正常结构下，这可以通过在 TR 内将所有内容构建为 TD 来解决，但我向您展示的结构是强制性的，并且需要很长时间才能成为它的样子。在这方面我没有太多灵活的空间（至少就我的上级而言），但如果解决方案需要进行一些密集的重组，我肯定会尝试看看如何让它发挥作用。

非常感谢任何输入，解决方案将获得一千金克鲁格朗的奖励。

代码示例如下，更完整的示例[在这里](http://jsfiddle.net/Malachite/FwTxZ/)。

```
<!-- CONTENT CLOSE -->              
</td>
<!-- CONTENT WRAPPER CLOSE -->        
</tr>
</table>
<!-- COLUMN CLOSE -->       
</td>
</tr>
</table>

<!-- COLUMN -->
<table border="0" cellpadding="0" cellspacing="0" style="width: 100%; background-color: transparent;">
<tr >
<td border="0" cellpadding="0" cellspacing="0" style="width: 100%;  border: 0; padding: 0px; margin: 0px"> 

<!-- CONTENT WRAPPER -->    
<table border="0" cellpadding="0" cellspacing="0" style="width: 100%; vertical-align: top; background-color: #000;">
<tr >

<!-- CONTENT -->
<td border="0" cellpadding="0" cellspacing="0" style="padding: 0px; vertical-align: top; margin:0px;">

<!-- CONTENT CLOSE -->              
</td>
<!-- CONTENT WRAPPER CLOSE -->        
</tr>
</table>
<!-- COLUMN CLOSE -->       
</td>
</tr>
</table>

<!-- COLUMN -->
<table border="0" cellpadding="0" cellspacing="0"  valign="top" style="width: 50%; background-color: transparent; vertical-align: top; clear: left;" align="left">
<tr >
<td  valign="top" style="width: 100%;  border: 0; vertical-align: top; padding: 10px;" > 

<!-- CONTENT WRAPPER -->    
<table border="0" cellpadding="0" cellspacing="0"  style="width: 100%; vertical-align: top; background-color: #0e616d; " >
<tr >

<!-- CONTENT -->
<td style="padding: 10px; vertical-align: top; margin:0px; font-family: Tahoma, Geneva, sans-serif; color: #005c5b;">

<p style="margin: 0px; text-align: center; font-size: 72px;  font-family: Tahoma, Geneva, sans-serif; color: #24ccca; font-weight: bold;">LONG</p>
<p style="margin: 0px; text-align: center; font-size: 16px; color: #fff;">I'm dragging out this sentence so that I can provide a good example that properly illustrates the issue I'm having. I've also upped the font size because I really shouldn't be making this example so elaborate, but I'm kinda having fun.</p>

<!-- CONTENT CLOSE -->              
</td>
<!-- CONTENT WRAPPER CLOSE -->        
</tr>
</table>
<!-- COLUMN CLOSE -->       
</td>
</tr>
</table>

<!-- COLUMN -->
<table border="0" cellpadding="0" cellspacing="0"  valign="top" style="width: 50%; background-color: transparent; vertical-align: top;   " align="left">
<tr >
<td  valign="top" style="width: 100%;  border: 0; vertical-align: top; padding: 10px;" > 

<!-- CONTENT WRAPPER -->    
<table border="0" cellpadding="0" cellspacing="0"  style="width: 100%; vertical-align: top; background-color: #0e616d; " >
<tr >

<!-- CONTENT -->
<td style="padding: 10px; vertical-align: top; margin:0px; font-family: Tahoma, Geneva, sans-serif; color: #005c5b;">

<p style="margin: 0px; text-align: center; font-size: 72px;  font-family: Tahoma, Geneva, sans-serif; color: #24ccca; font-weight: bold;">SHORT</p>

<p style="margin: 0px; text-align: center; font-size: 16px; color: #fff;">See the column to the left for an explanation for why this column is so dang short.</p>

<!-- CONTENT CLOSE -->              
</td>
<!-- CONTENT WRAPPER CLOSE -->        
</tr>
</table>
<!-- COLUMN CLOSE -->       
</td>
</tr>
</table>

<!-- COLUMN -->
<table border="0" cellpadding="0" cellspacing="0" style="width: 100%; background-color: transparent;">
<tr >
<td border="0" cellpadding="0" cellspacing="0" style="width: 100%;  border: 0; padding: 0px; margin: 0px"> 

<!-- CONTENT WRAPPER -->    
<table border="0" cellpadding="0" cellspacing="0" style="width: 100%; vertical-align: top; background-color: #000;">
<tr >

<!-- CONTENT -->
<td border="0" cellpadding="0" cellspacing="0" style="padding: 0px; vertical-align: top; margin:0px;">

<!-- CONTENT CLOSE -->              
</td>
<!-- CONTENT WRAPPER CLOSE -->        
</tr>
</table>
<!-- COLUMN CLOSE -->       
</td>
</tr>
</table>

</td>
</tr>
</table>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:20:05.163

正如我所看到的，您正在制作电子邮件模板。如果我是对的，最好的解决方案是创建适当的表，因此不要在表中嵌套表，而是尝试使用带有 colspans 和 rowspans 的单个表来解决它：

```
<table>
<tr>
    <td colspan=4>cell</td>
  </tr>
  <tr>
    <td colspan=2>cell</td>
    <td colspan=2>cell</td>
  </tr>
  <tr>
    <td colspan=4>
    <table>
      <tr>
        <td>cell</td>
        <td>cell</td>
        <td>cell</td>
      </tr>
    </table>
    </td>
  </tr>
  <tr>
    <td>cell</td>
    <td>cell</td>
    <td>cell</td>
    <td>cell</td>
  </tr>
  <tr>
  </tr>
</table> 
```

还有一些CSS：

```
table {
  border-spacing: 2px;
}
td {
  background: #999;
  text-align: center;
}

table table {
  width: 100%;
  border-spacing: 2px;
}
table table td {
  width: 33%;
} 
```

你只需要正确地设计它，它应该没问题。

[工作示例](http://codepen.io/anon/pen/Benjh)

更新：嗯，也许它不是完全单张桌子，但它有适当的结构。

# javascript - Extjs 合并对象

> ID：15479598
> 
> 赞同：8
> 
> 时间：2013-03-18T14:44:16.400
> 
> 标签：javascript, extjs, extjs4

我的应用程序中有一个超类，它定义了一个像这样的对象：

```
Ext.define('superclass', {
    myObject: {
        prop1: true,
        prop2: 200,
        ..
    } 
```

和一个继承了上面超类的子类，它声明了相同的对象：

```
Ext.define('childclass', {
    extend: 'superclass',

    myObject: {
        prop3: false,
        prop4: false,
        ..
    } 
```

问题在于，子类中的 myObject 只有 prop3 和 prop4 属性。

我需要 myObject ib 子类具有所有 prop1、prop2、prop3 和 prop4 属性。

我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:02:31.050

在构造函数中扩展对象（如果扩展 Ext.Component，则在 initComponent 中）：

```
Ext.define('childclass', {
    extend: 'superclass',

    constructor: function() {
        this.myObject = Ext.apply({}, this.myObject, {
            prop3: false,
            prop4: false
        });
        this.callParent(arguments);
    }
}); 
```

[演示](http://jsfiddle.net/molecule/9xsyS/)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T16:17:22.283

一旦构建了子类，所提供的两个答案都会更改超类原型的 myObject 属性。这可能不是你想要的。我质疑你为什么要像这样在类原型上放置一个对象。这样做通常不是一个好主意。但如果你真的想，你可以这样做

```
Ext.define('childclass', {
    extend: 'superclass',

    // I'm adding an empty object here so that myObject on the
    // prototype does not get overridden.
    myObject: Ext.merge({}, superclass.prototype.myObject, {
        prop3: false,
        prop4: false
    });

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T16:03:07.370

@Molecular man 的回答是正确的，但是我会使用合并功能。

假设您在第一个配置中有这个：

```
myObject: {
   prop1: false,
   person: {
       name: "John"
   }
} 
```

你的第二个对象

```
myObject: {
   prop2: false,
   person: {
       surname: "Doe"
   }
} 
```

您的 apply 将覆盖 person ，您将只有`person.surname`.

变成这样：

```
myObject: {
   prop1: false,
   prop2: false,
   person: {
       surname: "Doe"
   }
} 
```

合并将合并两个对象。

```
Ext.define('childclass', {
    extend: 'superclass',

    constructor: function() {
        this.myObject = Ext.merge(this.myObject, {
            prop3: false,
            prop4: false
        });
        this.callParent(arguments);
    }
}); 
```

请注意，仅在我的示例中描述的情况下才需要这样做，如果不需要，您可以使用 Molecular 的答案。

# java - 将 Lucene 从 3.6 升级到 4.1 后不同的 API 和 SegmentInfos 常量

> ID：15479599
> 
> 赞同：0
> 
> 时间：2013-03-18T14:44:16.857
> 
> 标签：java, lucene

我正在升级 Lucene 引擎，以便将我的内容从 3.6 版索引到 4.1 版。我注意到 API 的某些方面已经发生了很大变化。

特别是当涉及到来自 SegmentInfos 类的静态常量时......

我的旧代码使用以下代码来检测损坏的索引。如果有，则删除 Lucene 二进制文件：

```
for (String name : fileNames) {
    if (name != null && name.startsWith("segments_")) {
        IndexInput input = dir.openInput(name);
        int format = input.readInt();
        input.close();
        if (format != SegmentInfos.FORMAT_DIAGNOSTICS) {
            LOG.info(String.format("File %s is corrupted and it will be deleted", name));
            dir.deleteFile(name);
            }
        }
    } 
```

不幸的是，Lucene 4.1 版本中的静态常量 SegmentInfos.FORMAT_DIAGNOSTICS 消失了，我不知道现在如何识别某些索引是否已损坏......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T09:25:47.963

Lucene 4 中确实有一些不向后兼容的变化。这就是主要版本发生变化的主要原因。

但是看看你手动做的事情，我建议你看看[check index tool](http://lucene.apache.org/core/4_2_0/core/org/apache/lucene/index/CheckIndex.html)。它允许您检查索引的运行状况并可选择删除损坏的段。如果您不能使用该工具本身，您至少可以查看它的代码并了解如何将其集成到您的应用程序中。

# c# - 在单个上下文中具有多个模式的实体框架和迁移

> ID：15479606
> 
> 赞同：3
> 
> 时间：2013-03-18T14:44:22.023
> 
> 标签：c#, entity-framework, ef-code-first, entity-framework-6

我正在使用 Entity Framework Code First 开发一个多租户应用程序。每个租户在数据库中都有不同的模式，但应用程序将为所有租户提供一个上下文和模型。

Entity Framwork 6 能够在同一个数据库中使用具有多个上下文的多个模式，但是我没有找到一种方法可以在一个上下文中使用多个模式。

我已经生成迁移（通过命令行）到默认的“dbo”模式。我想使用这些迁移更新其他模式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-16T20:41:30.040

虽然我同意多上下文绝对是更好的方法（这也是我设置自己的项目的方式），但我想回答您最初的问题，即如何在单个上下文中使用多个模式：

在每个模型的映射配置中，您可以调用“ToTable(myTableName, mySchema)”来修改表所属的架构：

```
public class MyEntityMap : EntityTypeConfiguration<MyEntity>
{
    public MyEntityMap ()
    {
        HasKey(t => t.MyId);
        Property(t => t.MyId)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.Identity);

        ToTable("MyEntity", "MySchema");
    }
} 
```

这将允许您在维护单个上下文的同时分别为每个表设置架构。

由于您声明要在不同的模式中使用相同的模型，这使得在不了解更多设置的情况下变得更加困难。如果您只与少数客户打交道并且不介意在代码中维护他们的模式，那么您可以简单地为每个模式创建一个映射（如上所述），然后为每个客户添加一个新的 DbSet。如果您尝试将此扩展到大量客户，那么我强烈建议您研究一种不同的方法，因为当您的 dba 看到不同模式中的 100 多个相同的表而不是在每个表上使用 customerID 列时，他可能会尖叫.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-10-28T20:37:46.543

看着这些帖子

[http://thedatafarm.com/data-access/digging-in-to-multi-tenant-migrations-with-ef6-alpha/](http://thedatafarm.com/data-access/digging-in-to-multi-tenant-migrations-with-ef6-alpha/)

[http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/](http://romiller.com/2011/05/23/ef-4-1-multi-tenant-with-code-first/)

我想出了这个背景

```
public class DataLayerBuilder : DbContext
{
    private static  string conStr = string.Empty ;
    private DataLayerBuilder(DbConnection connection, DbCompiledModel model)
    : base(connection, model, contextOwnsConnection: false){ }
    public DbSet<Person> People { get; set; }

    private static ConcurrentDictionary<Tuple<string, string>, DbCompiledModel> modelCache
        = new ConcurrentDictionary<Tuple<string, string>, DbCompiledModel>();

    /// <summary>
    /// Creates a context that will access the specified tenant
    /// </summary>
    public static DataLayerBuilder Create(string tenantSchema)
    {
        conStr = ConfigurationManager.ConnectionStrings["ConnSTRName"].ConnectionString;
        var connection = new SqlConnection(conStr);
        var compiledModel = modelCache.GetOrAdd(
            Tuple.Create(conStr, tenantSchema),
            t =>
            {

                var builder = new DbModelBuilder();
                builder.HasDefaultSchema(tenantSchema);
                builder.Entity<Person>().ToTable("People");                   
                builder.Entity<Contact>().ToTable("Contacts");
                var model = builder.Build(connection);
                return model.Compile();
            });

        return new DataLayerBuilder(connection, compiledModel);
    }

    /// <summary>
    /// Creates the database and/or tables for a new tenant
    /// </summary>
    public static void ProvisionTenant(string tenantSchema)
    {
        try
        {
            using (var ctx = Create(tenantSchema))
            {
                if (!ctx.Database.Exists())
                {
                    ctx.Database.Create();
                }
                else
                {
                    ctx.Database.Initialize(true);

                }
            }
        }
        catch (Exception)
        {

            throw;
        }
    }
} 
```

到目前为止，我已经能够使用以下代码添加多个租户

```
 public void ProvisionTest()
    {
        //Arrange
        var tenant = "test2";

        //Act
        DataLayerBuilder.ProvisionTenant(tenant);

    }
} 
```

改进上面的代码我认为你可以编写一个简单的函数来为每个用户更新你的表结构

我希望这有帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-28T21:13:12.860

该解决方案可能最好被视为 Robert Petz 和 alfkonne 答案与一些围绕连接管理和迁移管理的更多工具的组合。对于客户特定的备份目的，我更喜欢每个客户的数据库级别而不是模式。您可以正确执行特定于模式的备份/恢复 IF 设置。但请确保所涉及的任何外部工具都可以处理基于模式的还原。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-14T15:53:52.390

您可以在单个上下文中使用多个方案。在每个实体或类中，您必须添加以下数据注释：

```
[Table("TableName", Shema = "ShemaName")]

public class Entity
{

} 
```

# git - git commit --amend 不询问消息

> ID：15479609
> 
> 赞同：123
> 
> 时间：2013-03-18T14:44:29.423
> 
> 标签：git, git-commit, git-amend

不时地，我发现自己使用相同的信息*进行提交修改。*

通常，我会：

1.  将我的更改添加到暂存区。
2.  做`git commit --amend`。
3.  等待文本编辑器打开。
4.  保存并关闭它（不更改消息）。

无论如何要告诉 git 我不想更改提交消息（跳过打开我的文本编辑器并保存消息的步骤）？像：

1.  将我的更改添加到暂存区。
2.  告诉 git 将我的暂存区域修改为最后一次提交，而不要求我提供另一条消息。

* * *

我知道我可以避免 git 通过执行`git commit --amend -m "<message>"`. 但是这样我就不得不重新输入消息。

* * *

## 回答 #1

> 赞同：230
> 
> 时间：2013-03-18T14:49:46.467

试试`git commit --amend --no-edit`。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-03-18T14:53:18.093

这将在一个命令中使用相同的消息修改最新的提交：

```
git commit --amend -C HEAD 
```

# android - 无法从 android 应用程序引用 facebook SDK

> ID：15479611
> 
> 赞同：0
> 
> 时间：2013-03-18T14:44:33.437
> 
> 标签：android, facebook

我想构建一个在用户 facebook 墙上发布简单文本消息的应用程序。我尝试按照链接 [http://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/](http://blog.doityourselfandroid.com/2011/02/28/30-minute-guide-integrating-facebook-android-application/)中指定的步骤进行操作。当我尝试从我的应用程序导入和引用 facebook SDK 时，我无法导入文件。我可以知道任何其他替代方法吗？

谢谢！

# php - 如何在产品页面 Magento 上显示自定义选项下拉菜单？

> ID：15479612
> 
> 赞同：1
> 
> 时间：2013-03-18T14:44:36.733
> 
> 标签：php, magento, magento-1.7

我有一个定制的 Magento 产品页面显示，所以没有颜色、大小等的选择器。

在产品详细信息 -> 自定义选项中，我已经设置了颜色选项，现在如果我尝试购买该产品，需要选择颜色，但现在没有下拉选项。我也看不到产品页面中未选择该选项的错误，只有当我访问为空但显示错误的购物车时才能看到它。

所以我需要的是：

1.如何在产品本身的自定义选项中显示自定义选项“颜色”[下拉]。2.在产品页面显示“产品缺货或未选择颜色选项”等错误。

提前致谢！

更新：

我得到它使用此代码但是当我想添加到购物车时仍然说未选择该选项，它有什么问题？

```
 $productSku = $_product->getSku();
$product = Mage::getModel('catalog/product');
$productId = $product->getIdBySku( $productSku );

$product = Mage::getModel("catalog/product")->load($productId);

$attVal = $product->getOptions();

$optStr = "";

// loop through the options
foreach($attVal as $optionKey => $optionVal) {

//$optStr .= "<br/>";

//$optStr .= $optionVal->getTitle().": ";

$optStr .= "<select style='display:block; clear:both;' name='options[".$optionVal->getId()."]'>";

foreach($optionVal->getValues() as $valuesKey => $valuesVal) {
$optStr .= "<option value='".$valuesVal->getId()."'>".$valuesVal->getTitle()."</option>";
}

$optStr .= "</select>";

}

echo($optStr ); 
```

阿米特的更新： `var_dump($attVal);`

```
array(1) {
  [1]=>
  object(Mage_Catalog_Model_Product_Option)#469 (19) {
    ["_product":protected]=>
    object(Mage_Catalog_Model_Product)#74 (32) {
      ["_cacheTag":protected]=>
      string(15) "catalog_product"
      ["_eventPrefix":protected]=>
      string(15) "catalog_product"
      ["_eventObject":protected]=>
      string(7) "product"
      ["_canAffectOptions":protected]=>
      bool(false)
      ["_typeInstance":protected]=>
      NULL
      ["_typeInstanceSingleton":protected]=>
      NULL
      ["_linkInstance":protected]=>
      NULL
      ["_customOptions":protected]=>
      array(0) {
      }
      ["_urlModel":protected]=>
      NULL
      ["_errors":protected]=>
      array(0) {
      }
      ["_optionInstance":protected]=>
      object(Mage_Catalog_Model_Product_Option)#286 (19) {
        ["_product":protected]=>
        NULL
        ["_options":protected]=>
        array(0) {
        }
        ["_valueInstance":protected]=>
        NULL
        ["_values":protected]=>
        array(0) {
        }
        ["_eventPrefix":protected]=>
        string(13) "core_abstract"
        ["_eventObject":protected]=>
        string(6) "object"
        ["_resourceName":protected]=>
        string(22) "catalog/product_option"
        ["_resource":protected]=>
        NULL
        ["_resourceCollectionName":protected]=>
        string(33) "catalog/product_option_collection"
        ["_cacheTag":protected]=>
        bool(false)
        ["_dataSaveAllowed":protected]=>
        bool(true)
        ["_isObjectNew":protected]=>
        NULL
        ["_data":protected]=>
        array(0) {
        }
        ["_hasDataChanges":protected]=>
        bool(false)
        ["_origData":protected]=>
        NULL
        ["_idFieldName":protected]=>
        NULL
        ["_isDeleted":protected]=>
        bool(false)
        ["_oldFieldsMap":protected]=>
        array(0) {
        }
        ["_syncFieldsMap":protected]=>
        array(0) {
        }
      }
      ["_options":protected]=>
      *RECURSION*
      ["_reservedAttributes":protected]=>
      NULL
      ["_isDuplicable":protected]=>
      bool(true)
      ["_calculatePrice":protected]=>
      bool(true)
      ["_defaultValues":protected]=>
      array(1) {
        ["url_path"]=>
        string(47) "charger.html"
      }
      ["_storeValuesFlags":protected]=>
      array(1) {
        ["url_path"]=>
        bool(true)
      }
      ["_lockedAttributes":protected]=>
      array(0) {
      }
      ["_isDeleteable":protected]=>
      bool(true)
      ["_isReadonly":protected]=>
      bool(false)
      ["_resourceName":protected]=>
      string(15) "catalog/product"
      ["_resource":protected]=>
      NULL
      ["_resourceCollectionName":protected]=>
      string(26) "catalog/product_collection"
      ["_dataSaveAllowed":protected]=>
      bool(true)
      ["_isObjectNew":protected]=>
      NULL
      ["_data":protected]=>
      array(71) {
        ["entity_id"]=>
        string(1) "9"
        ["entity_type_id"]=>
        string(1) "4"
        ["attribute_set_id"]=>
        string(1) "4"
        ["type_id"]=>
        string(6) "simple"
        ["sku"]=>
        string(6) "123456"
        ["has_options"]=>
        string(1) "1"
        ["required_options"]=>
        string(1) "1"
        ["created_at"]=>
        string(19) "2012-10-19 15:15:38"
        ["updated_at"]=>
        string(19) "2013-03-18 14:19:05"
        ["color"]=>
        NULL
        ["status"]=>
        string(1) "1"
        ["visibility"]=>
        string(1) "4"
        ["enable_googlecheckout"]=>
        string(1) "1"
        ["tax_class_id"]=>
        string(1) "4"
        ["featured"]=>
        string(1) "0"
        ["news_from_date"]=>
        NULL
        ["news_to_date"]=>
        NULL
        ["special_from_date"]=>
        string(19) "2012-10-17 00:00:00"
        ["special_to_date"]=>
        string(19) "2013-04-30 00:00:00"
        ["custom_design_from"]=>
        NULL
        ["custom_design_to"]=>
        NULL
        ["enjoyby"]=>
        NULL
        ["name"]=>
        string(42) "Charger"
        ["meta_title"]=>
        NULL
        ["meta_description"]=>
        NULL
        ["image"]=>
        string(34) "/3/1/31gzr5vwlwl._sl500_aa300_.jpg"
        ["small_image"]=>
        string(34) "/3/1/31gzr5vwlwl._sl500_aa300_.jpg"
        ["thumbnail"]=>
        string(34) "/3/1/31gzr5vwlwl._sl500_aa300_.jpg"
        ["url_key"]=>
        string(42) "charger"
        ["url_path"]=>
        string(47) "charger.html"
        ["custom_design"]=>
        NULL
        ["page_layout"]=>
        NULL
        ["options_container"]=>
        string(10) "container2"
        ["image_label"]=>
        NULL
        ["small_image_label"]=>
        NULL
        ["thumbnail_label"]=>
        NULL
        ["country_of_manufacture"]=>
        NULL
        ["msrp_enabled"]=>
        string(1) "2"
        ["msrp_display_actual_price_type"]=>
        string(1) "4"
        ["gift_message_available"]=>
        NULL
        ["starttime"]=>
        string(8) "11:59 PM"
        ["time"]=>
        string(8) "11:59 PM"
        ["target_number"]=>
        string(1) "1"
        ["percustomer"]=>
        string(1) "0"
        ["for_friend"]=>
        string(1) "0"
        ["dealcity"]=>
        string(5) "3,4,5"
        ["dealcategory"]=>
        string(1) "6"
        ["customeremail"]=>
        string(18) "test@test.com"
        ["questions"]=>
        string(10) "7185696643"
        ["customer_website"]=>
        string(16) "Electronics"
        ["merchant"]=>
        string(1) "1"
        ["price"]=>
        string(7) "19.9900"
        ["special_price"]=>
        string(6) "0.9900"
        ["weight"]=>
        string(6) "0.2000"
        ["msrp"]=>
        NULL
        ["description"]=>
        string(914) " 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:59:33.317

**[编辑]**

使用以下代码获取自定义选项

```
<?php foreach($_product->getOptions() as $options) :?>
    <?php if ($options->getType() == 'drop_down'): ?>
        <select class="required-entry product-custom-option" id="select_<?php echo $options->getOptionId() ?>" name="options[<?php echo $options->getOptionId() ?>]">
            <option value="">-- Please Select --</option>
            <?php foreach ($options->getValues() as $value): ?>
                <option value="<?php echo $value['option_type_id']; ?>"><?php echo $value['title']; ?></option>
            <?php endforeach; ?>
        </select>
    <?php endif; ?>
<?php endforeach; ?> 
```

您也可以根据选项类型进行修改

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-09T19:38:59.220

```
 <?php if ($_product->isSaleable() && $this->hasOptions()):?>

           <?php echo $this->getChildChildHtml('container2', '', true, true) ?>

           <?php endif;?> 
```

# c# - 对象的序列化（使用包含复杂类型的 xsd 创建）返回复杂类型作为元素

> ID：15479615
> 
> 赞同：0
> 
> 时间：2013-03-18T14:44:49.617
> 
> 标签：c#, xml, serialization, xsd

我有一个看起来像这样的 XSD：

```
<?xml version="1.0" encoding="utf-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema">
  <xs:element name="Example1">
    <xs:complexType>
      <xs:sequence>
        <xs:element name="Example2" type="Example2Type" minOccurs="0" maxOccurs="unbounded"/>
      </xs:sequence>
    </xs:complexType>
  </xs:element>
  <xs:complexType name="Example2Type">
    <xs:sequence>
      <xs:element name="Field1" type="xs:int"/>
      <xs:element name="Field2" type="xs:int"/>
    </xs:sequence>
  </xs:complexType>
</xs:schema> 
```

使用 VS2010，我把这个 XSD 变成了一个如下所示的类：

```
using System;
    using System.Diagnostics;
    using System.Xml.Serialization;
    using System.Collections;
    using System.Xml.Schema;
    using System.ComponentModel;
    using System.Collections.Generic;

    public partial class Example1
    {

        private List<Example2Type> example2Field;

        public Example1()
        {
            this.example2Field = new List<Example2Type>();
        }

        public List<Example2Type> Example2
        {
            get
            {
                return this.example2Field;
            }
            set
            {
                this.example2Field = value;
            }
        }
    }

    public partial class Example2Type
    {

        private int field1Field;

        private int field2Field;

        public int Field1
        {
            get
            {
                return this.field1Field;
            }
            set
            {
                this.field1Field = value;
            }
        }

        public int Field2
        {
            get
            {
                return this.field2Field;
            }
            set
            {
                this.field2Field = value;
            }
        }
    } 
```

我现在想使用上述类创建一些对象。我使用以下代码执行此操作：

```
namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            Example1 test = new Example1();
            test.Example2 = new List<Example2Type>();
            test.Example2.Add(new Example2Type());
            test.Example2[0].Field1 = 2;

            System.Xml.Serialization.XmlSerializer x = new System.Xml.Serialization.XmlSerializer(test.GetType());
            x.Serialize(Console.Out, test);
            Console.ReadLine();

        }
    }
} 
```

现在生成的 XML 看起来与我预期的不同。它现在看起来像这样：

```
<Example1>
  <Example2>
    <Example2Type>
      <Field1></Field1>
      <Field2></Field2>
    </Example2Type>
  </Example2>
</Example1> 
```

为什么在此处添加 Example2Type 元素，如何防止这种情况发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:00:09.013

找到了！我必须在 Example1 类上添加一个额外的属性，如下所示：

```
 [XmlElement("Example2")]
        public List<Example2Type> Example2
        {
            get
            {
                return this.example2Field;
            }
            set
            {
                this.example2Field = value;
            }
        } 
```

# css - 如何将 DIV 滚动条放在固定宽度的 DIV 内（溢出：自动，浮动：左）

> ID：15479617
> 
> 赞同：1
> 
> 时间：2013-03-18T14:44:53.217
> 
> 标签：css, html, scrollbar

我有一个如下所示的 DIV。我的问题是，只要滚动条可见，它就会显示在 300px 宽度之外。但无论滚动条如何，我都需要为 DIV 固定 300px 宽度。我怎样才能做到这一点？

```
<div style="width:300px; overflow:auto; float:left;"></div> 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:49:49.237

我要么将 div 放在 300px 容器中，然后将溢出应用到内部 div。这应该将其限制为您想要的尺寸。如果这不是可取的，您可以尝试一下，看看是否应用`box-sizing:border-box`，但旧版本的 IE 不支持。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:51:39.347

希望我能通过这个答案正确理解这个问题，如果不是，请指出。

[http://jsfiddle.net/hmCFh/1/](http://jsfiddle.net/hmCFh/1/)

HTML

```
<div>
Lorem ipsum dolor sit amet, vehicula vulputate, velit sapien suspendisse, ipsum nunc, integer velit aptent non quam. Erat sit consequat lectus, velit risus taciti, in sed, risus tincidunt. Egestas lacus vel voluptatem in volutpat. Sapien lacus suspendisse nec velit. Integer molestie erat, erat lectus luctus ipsum. Nulla massa netus. Odio nunc maecenas modi tortor cras in. Quis nonummy ridiculus vel sed, luctus nulla lectus bibendum justo donec.

Lorem ipsum dolor sit amet, vehicula vulputate, velit sapien suspendisse, ipsum nunc, integer velit aptent non quam. Erat sit consequat lectus, velit risus taciti, in sed, risus tincidunt. Egestas lacus vel voluptatem in volutpat. Sapien lacus suspendisse nec velit. Integer molestie erat, erat lectus luctus ipsum. Nulla massa netus. Odio nunc maecenas modi tortor cras in. Quis nonummy ridiculus vel sed, luctus nulla lectus bibendum justo donec.    

Lorem ipsum dolor sit amet, vehicula vulputate, velit sapien suspendisse, ipsum nunc, integer velit aptent non quam. Erat sit consequat lectus, velit risus taciti, in sed, risus tincidunt. Egestas lacus vel voluptatem in volutpat. Sapien lacus suspendisse nec velit. Integer molestie erat, erat lectus luctus ipsum. Nulla massa netus. Odio nunc maecenas modi tortor cras in. Quis nonummy ridiculus vel sed, luctus nulla lectus bibendum justo donec.        
</div> 
```

CSS

```
div {
    width:300px; 
    height:300px;
    overflow-y:scroll; 
    float:left;
    background:orange;    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:52:31.857

您可以使用`overflow-y: scroll`这样滚动条将始终可见，然后将 div 的宽度设置`284px`为考虑大约。滚动条的宽度。

# java - 在 Android 上接收广播消息

> ID：15479618
> 
> 赞同：6
> 
> 时间：2013-03-18T14:44:54.617
> 
> 标签：java, android, sockets, udp, broadcast

首先-对不起我的英语，我不是“母语作家”。

我正在用 C++ 发送广播消息，并希望在 Android 设备上接收它。我创建了这样的代码：

```
 System.out.println("receiveBroadcast()");
    DatagramSocket socket = new DatagramSocket(3866);
    socket.setBroadcast(true);
    System.out.println("Listen on " + socket.getLocalAddress() + " from " + socket.getInetAddress() + " port " + socket.getBroadcast());
    byte[] buf = new byte[512];
    DatagramPacket packet = new DatagramPacket(buf, buf.length);
    while (true) {
      System.out.println("Waiting for data");
      socket.receive(packet);
      System.out.println(packet.getAddress());
      System.out.println("Data received");
    } 
```

当我将它编译为标准 java SE 控制台应用程序并在连接到网络的其他计算机上运行时，它就可以工作。它不适用于Android，我不知道为什么。在 Android 上它只是等待数据但从不接收它：

```
03-18 15:47:05.045: I/System.out(16651): receiveBroadcast()
03-18 15:47:05.055: I/System.out(16651): Listen on /:: from null port true
03-18 15:47:05.065: I/System.out(16651): Waiting for data 
```

有趣的是，当我在 Windows 系统下将它作为标准 Java 控制台应用程序运行时，而不是“从空端口真监听 /::”我得到“从空端口真监听 0.0.0.0/0.0.0.0”。

我在清单中有这样的权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />   
<uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-20T13:47:17.480

我知道这是一个旧线程，但我想我在这里分享这个，因为将来它可能会帮助其他人。

[这里](http://code.google.com/p/boxeeremote/wiki/AndroidUDP)写的著名代码对我也不起作用我建议的 2 解决方案，因为它取决于您的设备和操作系统

无论如何，你们可能想尝试以下一些解决方案：

1-在你的wifi上创建一个锁，这样它就不会在一段时间不活动后被关闭

```
WifiManager wifi;
wifi = (WifiManager) this.getSystemService(Context.WIFI_SERVICE);
WifiManager.MulticastLock mLock = wifi.createMulticastLock("lock");
mLock.acquire(); 
```

2-[在此处](https://groups.google.com/forum/?fromgroups=#!topic/android-platform/OpbSdp9FTmA)检查此链接，因为在某些情况下，广播消息被操作系统阻止

# spring - Hibernate Search + Spring + JPA + 2 webapps - 正确配置

> ID：15479622
> 
> 赞同：0
> 
> 时间：2013-03-18T14:45:16.467
> 
> 标签：spring, hibernate, jpa, lucene, hibernate-search

我进行了漫长而艰苦的搜索，但找不到明确的答案。

我有 2 个 webapps 在单个 tomcat 实例上运行：`/server`和`/ROOT`

我已经为我的一个实体配置了 Hibernate Search，即`Products`.

这些实体`/server`由网站上的前端用户编辑/添加和搜索`/ROOT`

在正常操作期间，一切正常，在服务器上编辑实体将导致在前端进行搜索时反映这些更改。

但是，在未确定的时间或事件序列之后，索引不再更新。

这是配置`/server`

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="jpaDataSource" />
    <property name="packagesToScan" value="com.foo" />
    <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                    <property name="generateDdl" value="true" />
                    <property name="showSql" value="true" />
            </bean>
    </property>
    <property name="jpaPropertyMap" ref="jpaPropertyMap" />
</bean>

<util:map id="jpaPropertyMap">
    <entry key="hibernate.search.default.directory_provider" value="filesystem" />
    <entry key="hibernate.search.default.indexBase" value="${lucene.index.folder}" />
</util:map> 
```

这是配置`/ROOT`

```
<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="packagesToScan" value="com.foo" />
    <property name="jpaVendorAdapter">
            <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                    <property name="generateDdl" value="true" />
                    <property name="showSql" value="true" />
            </bean>
    </property>
    <property name="jpaPropertyMap" ref="jpaPropertyMap" />
</bean>

<util:map id="jpaPropertyMap">
    <entry key="hibernate.search.default.directory_provider" value="filesystem" />
    <entry key="hibernate.search.default.indexBase" value="${lucene.index.folder}" />
</util:map> 
```

基本相同。

这是通过 AspectJ ITD 配置我的实体的方式

```
privileged aspect Product_Search {

declare @type: Product: @Indexed;

declare @method :public Long Product.getId() : @DocumentId;
declare @method :public String Product.getTitle() : @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO);
declare @method :public String Product.getSubTitle() : @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO);
declare @method :public String Product.getAlternativeTitle() : @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO);
declare @method :public String Product.getIdentifier() : @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO);
declare @method :public String Product.getPrimaryCreators() : @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO);
declare @method :public String Product.getSecondaryCreators() : @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO);
declare @method :public String Product.getSubjectArea() : @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO);
declare @method :public String Product.getPublisher() : @Field(index=Index.YES, analyze=Analyze.NO, store=Store.NO);
declare @method :public String Product.getTags() : @Field(index=Index.YES, analyze=Analyze.YES, store=Store.NO); 
```

经过进一步搜索，我发现了主/从 DirectoryProvider

`/server`

```
 <util:map id="jpaPropertyMap">
    <entry key="hibernate.search.default.directory_provider" value="filesystem-master" />
    <entry key="hibernate.search.default.indexBase" value="${lucene.index.folder}/primary" />
    <entry key="hibernate.search.default.sourceBase" value="${lucene.index.folder}/master" />
    <entry key="hibernate.search.default.refresh" value="120" />
</util:map> 
```

`/ROOT`

```
 <util:map id="jpaPropertyMap">
    <entry key="hibernate.search.default.directory_provider" value="filesystem-slave" />
    <entry key="hibernate.search.default.sourceBase" value="${lucene.index.folder}/master" />
    <entry key="hibernate.search.default.indexBase" value="${lucene.index.folder}/slave" />
    <entry key="hibernate.search.default.refresh" value="300" />
</util:map> 
```

这似乎有效，直到今天早些时候，由于某种原因，我的索引“重置”自身，并且只包含上次产品导入的项目。我的意思是，我的数据库有 10000 个项目，但如果我做了 a `query = new MatchAllDocsQuery();`，我只有 15 个（上次导入的大小）

这真的让我发疯。

目前，我不得不关闭网站，删除索引，启动服务器，使用重新索引`FullTextEntityManager fullTextEntityManager = Search.getFullTextEntityManager(entityManager()); fullTextEntityManager.createIndexer().startAndWait();`

如果您需要更多信息，请告诉我

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:18:50.017

如果更改仅通过*服务器*应用程序进行，并且您总是希望在同一台机器上运行*服务器*和*ROOT*，则无需进行主/从设置。应该做一个简单的文件系统设置，但是，您要确保在*ROOT*应用程序上指定了 _hibernate.search.indexing_strategy = manual_。这种方式索引更新只会在*ROOT*应用上使用显式索引 API 时发生。

你打开日志了吗？日志中是否有任何内容。我认为第一步是尝试以可靠的方式重现问题。如果您只是说它最初有效，但突然开始失败，则很难找到原因。您是否尝试过一些自动负载测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:59:05.957

一个想法 - 也许您应该切换到[非独占模式](http://docs.jboss.org/hibernate/search/4.2/reference/en-US/html_single/#lucene-indexing-performance)（请参阅`exclusive_index_use`）

# file - 将文件与具有不同行数的原始文件进行比较

> ID：15479627
> 
> 赞同：1
> 
> 时间：2013-03-18T14:45:27.390
> 
> 标签：file, unix, awk, compare, row

我有一组文件、1 个答案文件和几个结果文件，我需要将每个结果文件与答案进行比较，但结果文件的数量或行数可能不同。

应答文件

```
q1, true
q2, false
q3, false
q4, true
q5, true 
```

结果 1

```
q1, true
q2, false
q3, true 
```

我想要的桌子

```
q1, 1
q2, 1
q3, 0
q4, 0
q5, 0 
```

因此，如果数据确实匹配，则其 1 否则为 0，如果该行不存在，则再次将其视为 0 --- 结果文件夹中的所有文件都应执行相同的操作。

到目前为止我尝试了什么：

```
awk -F "," '{print $0}' answer.csv | grep -f - result01.csv > me.csv 
```

仅打印正确答案

如果结果数据如下所示，是否有机会这样做？

结果 1

```
data/q1, true
data/q2, false
data/q3, true 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:01:20.170

查看[`comm`](http://unixhelp.ed.ac.uk/CGI/man-cgi?comm)可用于逐行比较两个已排序文件的命令。

例如：

```
$ comm  -2  <(sort answerFile) <(sort resultFile)
        q1 true
        q2 false
q3 false
q4 true
q5 true 
```

第一列包含 file1 独有的行，第二列包含两个文件共有的行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:11:08.577

用于将`awk`结果文件`r`与答案`a`文件进行比较：

```
$ awk 'FNR==NR{a[$1]=$2;next}$1 in a{print $1,a[$1]==$2;next}{print $1,0}' r a
q1, 1
q2, 1
q3, 0
q4, 0
q5, 0 
```

# php - 如何处理在 MVC 网站中查看特定的 Javascript

> ID：15479631
> 
> 赞同：0
> 
> 时间：2013-03-18T14:45:34.667
> 
> 标签：php, javascript, codeigniter

我知道这个问题已经被问过好几次了，但我似乎找不到合适的解决方案来解决我的问题。

我正在使用 CodeIgniter，这是一个遵循 MVC（模型-视图-控制器）原则的 PHP 框架。

我有许多 javascript 文件，如 jQuery 和其他通用库，我需要包含在**head**标记中的每个页面。我还查看了直接嵌入在脚本块中的视图中的特定 javascript。

**视图customerInfo.php**的示例：

```
<script type="text/javascript">
    // some javascript here for customerInfo view
    // I MUST be able to use PHP variables in this script block ex:
    var customerName = "<?php echo $customerName; ?>";
</script>

<p class="someClass">Hello <?=$customerName?>, may the lord provide you with bananas</p> 
```

我的网站布局如下：

```
<html>
<head>
    <script src="http://coolStorybro.com/jquery.js" type="text/javascript"></script>
    <script src="http://coolStorybro.com/commonStuff.js" type="text/javascript"></script>
</head>

<body>

<div class="header">some header stuff</div>

<div class="pageContent">
   <?php echo $view; ?>   // In this case, $view will hold the view customerInfo
</div>

</body>
</html> 
```

我的目标是将我所有的 javascript 放在同一个地方，这样我就可以缩小它并最终将它放在我的页面底部以进行加载优化。

我知道我可以将视图特定的 javascript 存储在一个名为**customerInfo.js**的单独文件中并将其加载到**head**标记中，但我觉得为每个视图创建一个单独的 javascript 文件太多了，我将无法在其中使用**PHP**，这是我必须的。

所以我问你们，有没有解决我的问题的方法，还是我注定要让我的页面到处都是脚本块？

感谢您的时间。

**编辑：**

有没有办法将视图特定的javascript（所有视图）放在一个文件中，并以某种方式将其分隔在模块中，并且只加载所需视图的特定模块？

假设**viewsJS.js**包含所有特定于视图的javascript：

```
module ("customerInfo", 
    $(".someClass").html("Bla bla bla");
);

module ("invoiceInfo", 
    // Some code to be executed when the invoiceInfo module is loaded
); 
```

一旦定义了每个模块（视图）的 javascript，就会有一种方法可以将它们加载到相应的视图中。问题是，我的视图中不能有一个脚本块来“加载”模块，所以..我一无所知。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:57:31.663

在您的文件夹中创建此文件夹结构`application/views`

```
/includes/javascript.php
/template.php 
```

然后把你的主要代码放在**template.php**：

```
<html>
<head>
  <?php echo $this->load->view('includes/javascript'); ?>
</head>

<body>

<div class="header">some header stuff</div>
... 
```

并将所有 javascript 放在**javascript.php**中

```
application/views/includes 
```

例如：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script> 
```

最后的输出在您的浏览器中看起来像：

```
<html>
<head>
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
      <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.9.2/jquery-ui.min.js"></script>
</head>

<body>

<div class="header">some header stuff</div>
... 
```

要加载特定的 javascript 文件，您可以在 javascript 视图中执行类似的操作：

```
<?php if (is_frontpage()) : ?>
   <script src="http://localhost/javascriptforfrontpage.js"></script>
<?php endif; ?>

<?php if (is_contact()) : ?>
   <script src="http://localhost/javscriptforcontactpage.js"></script>
<?php endif; ?>

<?php // this would be loaded everywhere ?>
<script src="http://localhost/javascripteverypage.js"></script> 
```

仅加载客户信息 javascript：

第一次你从你的控制器发送到你的视图，`$data['load_js_customer_info']`例如：

```
public function customerInfo()
    {

        $data['load_js_customer_info'] = "Customer Info";
        $data['customer'] = $this->mdl_admin->get_customer();
        $this->load->view('template', $data);
    } 
```

并在视图（包含所有javascript）中创建一个条件：

```
 <?php if ($load_js_customer_info) : ?>
   <script src="http://localhost/javscriptforcustomerinfo.js"></script>
 <?php endif; ?> 
```

因此，如果不是来自客户信息控制器，则不会加载 javscript。

# android - 返回并同步 App 数据到 dropBox

> ID：15479636
> 
> 赞同：2
> 
> 时间：2013-03-18T14:45:37.733
> 
> 标签：android, ios, dropbox, dropbox-api

我有一个在 3 个平台上的应用程序，iOS、android 和 windows 手机。我正在考虑为用户提供一个选项，以便将应用程序数据备份到 dropBox 或从 dropBox 同步。

我浏览了保管箱网站，我几乎没有疑问，我将在下面讨论

DropBox 有两个 api a)Sync API b)Core API,

现在，我从他们网站上的文档中了解到

同步 API，将应用数据同步到用户的 Dropbox 账户，读/写由 Dropbox 负责。

在 CoreAPI 中，我们必须发起读/写调用。

但在这两种情况下，appData 都存储在用户保管箱帐户中。

无论如何，我可以访问用户保存到 dropBox 的内容。（这将有助于分析）。

可以将其保存到我将创建的单个帐户中，而不是保存到用户的保管箱帐户吗？

由于我的应用程序适用于所有三个平台，因此如何管理数据

例如。如果用户正在使用安卓应用并且他已经将他的数据备份到dropBox，稍后他计划转移到iphone并想要同步他的应用数据。怎么可能？

问候兰吉特

# spring-mvc - 映射到外部图像文件夹不起作用（ )

> ID：15479637
> 
> 赞同：2
> 
> 时间：2013-03-18T14:45:38.553
> 
> 标签：spring-mvc, resources, servlet-mapping

我想将我的图像外包到 spring 项目文件夹之外。经过一些研究，我发现了 mvc:resources 标签，这似乎是满足我要求的完美解决方案。

**应用程序-servlet.xml**

```
xmlns:mvc="http://www.springframework.org/schema/mvc"
xsi:schemaLocation="http://www.springframework.org/schema/mvc
                http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd">

<mvc:annotation-driven/>
<mvc:resources mapping="/pics/**" location="file:/c:/Tomcat_6/webapps/external_resources/" order="0" /> 
```

**JSP 调用：**

```
<img src="<c:url value="/pics/test.png"/>" /> 
```

我不知道为什么这对我不起作用。

几个小时后，我读到删除以下行将解决问题，但什么也没发生。

```
<bean id="viewMappings" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property value="true" name="alwaysUseFullPath"></property>
    <property name="defaultHandler">    
        <bean class="org.springframework.web.servlet.mvc.UrlFilenameViewController" />
    </property>
    <property name="order" value="1"/>
</bean> 
```

也在变

```
<servlet-mapping>
    <servlet-name>onlinecatalog</servlet-name>
    <url-pattern>*.htm</url-pattern>
</servlet-mapping> 
```

至

```
<servlet-mapping>
    <servlet-name>onlinecatalog</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-30T05:21:53.623

您可以像这样使用基于 java 的配置（在 linux 中）

```
@Override
public void addResourceHandlers(ResourceHandlerRegistry registry) {
String rootPath = System.getProperty("user.home"); 
String imagePath = "file:"+rootPath + File.separator + "tmpFiles/"; //absolute path of the directory
System.out.println(imagePath);
registry.addResourceHandler("/resources/**").addResourceLocations("resources/");
registry.addResourceHandler("/tmpFiles/**").addResourceLocations(imagePath); 
```

}

现在您可以从 tmpFiles 文件夹访问外部文件。在 Windows 中，您可能需要您的 imagePath 作为

```
imagePath="file:c:/Tomcat_6/webapps/external_resources/"; 
```

# c++ - 为什么可执行文件不可执行？

> ID：15479644
> 
> 赞同：2
> 
> 时间：2013-03-18T14:46:09.520
> 
> 标签：c++, compilation, executable

我有一个 hello world cpp 文件。如果我通过编译它`c++ test.cpp -o test`得到可执行的“测试”文件（`-rwxr-xr-x`），如果我执行它，它会被执行并生成预期的结果。

但是，如果我使用`${CXX} -std=c++0x -I${INCLUDE_DIR1} -c test.cpp -o test -L{LIB_DIR1} -llib_name`我也会得到“测试”文件，但在这种情况下它是不可执行的。所以，我无法执行它。我尝试过`chmod +x`，它获得了执行权限，但是如果我尝试执行它，则会收到一条错误消息（无法执行）。

我做错了什么以及如何纠正？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T14:48:03.000

`-c`告诉编译器*不要*生成可执行文件（这意味着“仅编译”）。它只创建一个适合链接到可执行文件（可能与其他目标文件和库）的目标文件。

`-c`如果您想要一个可执行文件，请删除该开关。

有关完整编译过程的更多详细信息，请参阅： [编译/链接过程如何工作？](https://stackoverflow.com/questions/6264249/how-does-the-compilation-linking-process-work)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T16:30:09.327

# ios - NSURLResponse 未在标头中显示位置

> ID：15479656
> 
> 赞同：0
> 
> 时间：2013-03-18T14:46:45.590
> 
> 标签：ios

看起来`NSURLResponse`正在从我要返回的响应标头中修剪位置。如果我运行 curl 命令，我会得到：

```
< HTTP/1.1 302 Found
< Date: Mon, 18 Mar 2013 14:43:41 GMT
< Server: Apache/2.2.14 (Ubuntu)
< X-Powered-By: PHP/5.3.14 ZendServer/5.0
< Set-Cookie: PHPSESSID=kv1j4cjpt69q91sgd2m270d775; path=/; secure; HttpOnly
< Expires: Thu, 19 Nov 1981 08:52:00 GMT
< Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
< Pragma: no-cache
< Location: http://kt-act.s3.amazonaws.com/...
< Vary: Accept-Encoding
< Content-Length: 0
< Connection: close
< Content-Type: text/html 
```

但是，使用以下 Obj-C 代码访问相同的端点：

```
NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:[NSString stringWithFormat:@"%@%@/content",kBaseAPIURL,_document.href]]];
[NSURLConnection connectionWithRequest:request delegate:self];

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
[_resourceData setLength:0];
_progressView.progress=0.0f;
_loadingView.hidden=NO;
fileSize = [[NSNumber numberWithLongLong:[response expectedContentLength]] intValue];
NSHTTPURLResponse *httpResponse = (NSHTTPURLResponse *)response;
NSDictionary *headers = [(NSHTTPURLResponse *)response allHeaderFields];
NSLog(@"Response: %@", headers);
} 
```

给我这个：

```
2013-03-18 10:40:11.537 KTMobile[25221:1ac03] Response: {
"Cache-Control" = "no-store, no-cache, must-revalidate, post-check=0, pre-check=0";
Connection = close;
"Content-Length" = 36;
"Content-Type" = "application/json";
Date = "Mon, 18 Mar 2013 14:38:44 GMT";
Expires = "Thu, 19 Nov 1981 08:52:00 GMT";
Pragma = "no-cache";
Server = "Apache/2.2.14 (Ubuntu)";
"Www-Authenticate" = "Basic realm=\"Protected\"";
"X-Powered-By" = "PHP/5.3.14 ZendServer/5.0";
"X-Response-Time" = "0.153447";
} 
```

有谁知道为什么它会丢失位置标题？为什么 curl 报告 text/html 而 NSURLResponse 报告 application/json 返回？我还尝试按照另一个 SO 线程中的建议获取响应 URL 的查询/参数部分，但这仍然没有给我位置。

编辑：我也试过`connection:willSendRequest:redirectResponse`代表。

```
- (NSURLRequest *)connection:(NSURLConnection *)connection willSendRequest:(NSURLRequest *)request redirectResponse:(NSURLResponse *)redirectResponse
{
NSLog(@"Redirect response url! %@", [redirectResponse URL]);
NSLog(@"Redirect response! %@", redirectResponse);

return request;
} 
```

这将同时返回 null`[redirectResponse URL]`和`redirectResponse`对象。就好像服务器端点根本没有返回 obj-c 代码的位置对象。这种行为有什么理由吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:55:39.690

“HTTP 302”是一个重定向响应，“Location”标头给出了应该从哪里加载资源的新 URL。

`NSURLConnection`透明地跟随重定向，并且`NSURLResponse`是重定向请求的响应。

`connection:willSendRequest:redirectResponse:`如果您想了解重定向，我认为您可以实施，但我从未真正尝试过。

# c# - 从魅力栏启动时，Windows 商店应用程序崩溃。否则效果很好

> ID：15479658
> 
> 赞同：1
> 
> 时间：2013-03-18T14:46:49.137
> 
> 标签：c#, windows-store-apps, charms-bar

从魅力栏启动时，Windows 商店应用程序崩溃。否则效果很好

谁能告诉如何调试应用程序并在 Visual Studio 中启动，例如从魅力栏中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:50:29.167

您可以更改项目的设置。在项目设置的调试选项卡上有一个名为“开始等待程序激活”的设置（或类似的东西，在没有 VS 的 PC 上）。这样，如果您切换到开始屏幕并点击图标或使用搜索魅力调用您的应用程序，调试器就会附加到该进程。

# content-management-system - drupal 7中我的pdf文件的缩略图预览

> ID：15479660
> 
> 赞同：1
> 
> 时间：2013-03-18T14:46:52.813
> 
> 标签：content-management-system, drupal-7, thumbnails, webpage

如何在 drupal 7 中创建书籍封面缩略图？假设我要搜索所有 IT 书籍，结果应该是网格格式，书籍封面以及书名和作者。然后，如果其中一本书点击，它将查看该书的内容。就像亚马逊或其他书籍相关网站上的那些。如何实现这一目标？有没有什么模块可以做到这一点？

# c# - 反映旧版本的 System.dll

> ID：15479667
> 
> 赞同：6
> 
> 时间：2013-03-18T14:47:20.680
> 
> 标签：c#, .net, reflection, uri

我有一个构建活动，它反映了我们的一个库，以将其与域定义进行比较。在反射期间，每当我尝试反射 Uri 时，它都会返回 RunTimePropertyInfo 而不是 Uri 并且每当我检查任何反射属性时，我都会收到一个异常说明...

```
"Could not load file or assembly 'System, Version=2.0.5.0, culture=neutral, publickeytoken=7cec85d7bea7798e, retargetable=yes" 
```

构建活动使用 System.dll 版本 4.0.0.0 编译。我怀疑这是问题所在。有没有办法让我在旧版本的 System.dll 上反映类型。

到目前为止，这只在 Uri 上失败了。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:20:48.207

我认为存在版本控制问题，如果您使用项目中使用的不同版本的 dll，则可能会发生此类错误。

这是一个过去对我有用的简单解决方案，如果有同样的问题，它将对你有用。您可以通过定义有问题的 dll 的新旧版本在 web.config中使用“ **bindingRedirect ”标签。**所以这意味着它将忽略旧版本的 dll 引用并在找到时使用较新的引用。并且不会产生错误。

这是参考链接。 [http://msdn.microsoft.com/en-us/library/eftw1fys%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/eftw1fys%28v=vs.71%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T12:18:16.080

你需要使用 IKVM.Reflection 之类的东西，

[http://weblog.ikvm.net/PermaLink.aspx?guid=d0dc2476-471b-45f3-96bf-a90bc2f5800b](http://weblog.ikvm.net/PermaLink.aspx?guid=d0dc2476-471b-45f3-96bf-a90bc2f5800b)

Microsoft 的反射与托管的 .NET Framework 相关联，因此您无法根据需要加载旧版本的核心库。

# ruby - 在 tomcat 上部署带有 jruby 战争的 Rails3。我可以访问 MyApp/public/index.html 页面。无法查看所有其他页面

> ID：15479669
> 
> 赞同：0
> 
> 时间：2013-03-18T14:47:23.373
> 
> 标签：ruby, ruby-on-rails-3, tomcat6, war, jrubyonrails

我已经使用[http://guides.rubyonrails.org/initialization.html](http://guides.rubyonrails.org/initialization.html)进程彻底调试了我的应用程序。我能够看到我保存在不同初始化文件中的所有日志，能够看到在 routes.rb 中的打印消息

每当我尝试访问在 routes.rb 中定义的任何其他路径时，它都会失败并一直显示相同的错误。我也检查了日志文件，但没有得到任何有用的信息来进一步调试。以下是我的日志错误

> `Mar 18, 2013 7:53:39 PM org.apache.catalina.core.StandardWrapperValve invoke SEVERE: Servlet.service() for servlet files threw exception javax.servlet.ServletException: Failed to invoke rails, please see the log for more details at org.jruby.webapp.RailsServlet.service(RailsServlet.java:50) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:646) at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436) at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:342) at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302) at org.jruby.webapp.FileServlet.service(FileServlet.java:207) at javax.servlet.http.HttpServlet.service(HttpServlet.java:717) at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290) at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206) at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233) at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191) at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127) at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102) at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109) at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298) at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852) at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588) at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489) at java.lang.Thread.run(Unknown Source)`

编辑：我注意到我的 rails-3.2.12 gems 目录是空的。里面没有文件。有什么需要担心的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-25T06:52:18.787

它很长一段时间，我能够解决我的问题。这是由于rails不兼容，jruby版本问题。我是从非常旧版本的 rails 迁移我的应用程序，即 2.2.3 版本的 rails。

最后，我使用新的 rails 3.2.12 创建了新的应用程序，并在[Warbler](https://github.com/jruby/warbler "莺")的帮助下成功地将其部署到了 tomcat 上。还有一篇文章可以帮助在 tomcat 上进行[部署](http://thenice.tumblr.com/post/133345213/deploying-a-rails-application-in-tomcat-with)。

另一个重要的一点是在你的 tomcat 目录中不要在路径中给出任何空格。例如。C:\apache\apache tomcat-7.0.57\ 这会使你的应用程序失败，你可以给 C:\apache\apache-tomcat-7.0.57。确保名称之间没有空格。

# join - oracle：如何处理连接不匹配的场景

> ID：15479671
> 
> 赞同：1
> 
> 时间：2013-03-18T14:47:26.633
> 
> 标签：join

我有 2 张桌子`t1(id,send_date,volume)`和`t2(send_date,rate)`. 当两个日期匹配时，我需要加入这两个表并从 t2 获取速率。

```
select t1.id, t1.volume * t2.rate 
from t1, t2 
where t1.send_date = t2.send_date 
```

现在，我的要求是，如果表 t2 中没有与 t1 中的日期匹配的日期，并且如果 t1 中的日期是 SUNDAY，那么我需要获取下周一的汇率。

例如：如果 2013 年 2 月 10 日不在 t2 中，则 2 月 11 日的汇率应用于 t1 中的 2 月 10 日

问候，

萨西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T19:06:24.697

以下是我的查询和您的回答：

```
SELECT * -- Select all or any column that you want.
  FROM t2 JOIN (
  SELECT id
         , CASE
             WHEN TO_CHAR(send_date, 'DAY')
                  = TO_CHAR(TO_DATE('03-MAR-2013'), 'DAY')
                  -- The above condition returns true if send_date is a sunday
                  -- as '03-MAR-2013' is a sunday.
                  AND (SELECT COUNT(*)
                         FROM t2
                        WHERE t2.send_date = t1.send_date) = 0
                  -- This condition checks if any matching row exists
                  -- in t2 for the send_date.
             THEN send_date + 1  -- Increments the day by 1 to fetch
                                 -- the rates for a monday.
             Else send_date -- Leaves the send_date as it is for a normal date.
           END AS send_date
         , volume
    FROM t1
    ) USING (send_date) -- You can also use ON keyword to perform the join.
; 
```

[这](http://www.sqlfiddle.com/#!4/edaad/9)是供您参考的 SQLFiddle 示例。

# c - 使用 C 的套接字编程猜整数游戏

> ID：15479682
> 
> 赞同：0
> 
> 时间：2013-03-18T14:47:51.663
> 
> 标签：c, sockets, client-server

我对套接字编程比较陌生，所以请多多包涵。

我正在尝试使用具有特定协议（分隔符、“H”、“L”、“O”）的套接字编程来制作一个简单的猜整数游戏。

当客户端用户根本没有输入任何猜测整数时，我不确定为什么客户端重新发送原始空白数据。

以下是 server.c 文件的部分内容：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include <sys/types.h> 
#include <sys/socket.h>
#include <netinet/in.h>
#include <time.h> /* time for randomizer*/ 

void error(const char *msg)
{
    perror(msg);
    exit(1);
}

int main(int argc, char *argv[])
{
    int sockfd, newsockfd, portno, n;
    socklen_t clilen;
    char buffer[256];
    struct sockaddr_in serv_addr, cli_addr;

    int GuessedInteger, integerRandom, serverFlagCorrect;
    char charGuess[4], answerServer[1];
    char* delimiter = "\\n";

    /** initialization of variables **/
    serverFlagCorrect = 0;

    /** generate random integer from 1 to 100 **/
    srand (time(NULL));
    integerRandom = (rand() % 100) + 1;

    printf("This is the random integer : %d \n", integerRandom);   

    if (argc < 2) {
        fprintf(stderr,"ERROR, no port provided\n");
        exit(1);
    }

    // Creates the socket socket() --> endpoints of sockets
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) 
       error("ERROR opening socket");
    // Creates the socket socket() --> endpoints of sockets

    // assign unique new address
    bzero((char *) &serv_addr, sizeof(serv_addr));
    portno = atoi(argv[1]);
    serv_addr.sin_family = AF_INET;
    serv_addr.sin_addr.s_addr = INADDR_ANY;
    serv_addr.sin_port = htons(portno);

    if (bind(sockfd, (struct sockaddr *) &serv_addr,
             sizeof(serv_addr)) < 0) 
             error("ERROR on binding");
    // assign unique new address

    // wait for a connection
    listen(sockfd,1);
    // wait for a connection

    // accepts the connection
    clilen = sizeof(cli_addr);
    newsockfd = accept(sockfd, 
                (struct sockaddr *) &cli_addr, 
                &clilen);
    if (newsockfd < 0) 
         error("ERROR on accept");
    // accepts the connection

    while (serverFlagCorrect != 1) 
    {

        // reads the data being received
        bzero(buffer,256);
        n = read(newsockfd,buffer,255);
        if (n < 0) error("ERROR reading from socket");
        // reads the data being received

        printf("Buffer from client: <%s>\n", buffer);
        memcpy(charGuess, buffer, sizeof(charGuess));
        printf("Message from client in charGuess: <%s>\n", charGuess);

        /* Put if statement here for error out if no \n at the end */
        int len = strlen(charGuess);
        const char *last_two = &charGuess[len-2];

        printf("Last two characters of charGuess: <%s>\n", last_two);

        if (strncmp ( last_two, delimiter, 2) )
            error (" ERROR Wrong protocol received");

        /** process the string to integer for server comparison **/
        GuessedInteger = atoi(charGuess);
        printf("Guessed Integer : %d \n", GuessedInteger);

        /** Server response for comparison**/
        if (GuessedInteger > integerRandom)
            memcpy(&answerServer, "L", sizeof(answerServer));
        else if (GuessedInteger < integerRandom)
            memcpy(&answerServer, "H", sizeof(answerServer));
        else if (GuessedInteger == integerRandom)
            {
                serverFlagCorrect = 1;
                memcpy(&answerServer, "O", sizeof(answerServer));
            }
        printf("Value of answerServer: %c\n", *answerServer);
        /** Server response for comparison**/

        // sends the answer
        n = write(newsockfd, answerServer, 1);
        if (newsockfd < 0) 
            error("ERROR on accept");
        // sends the answer

        // closes what was sent
        close(newsockfd);
        // closes what was sent

    }        

    //closes the socket if random integer was found
    close(sockfd);

    return 0; 
} 
```

下面是client.c文件：

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <string.h>
#include <sys/types.h>
#include <sys/socket.h>
#include <netinet/in.h>
#include <netdb.h> 

void error(const char *msg)
{
    perror(msg);
    exit(0);
}

int main(int argc, char *argv[])
{
    int sockfd, portno, n;
    struct sockaddr_in serv_addr;
    struct hostent *server;
    char buffer[1024];

    int integerGuess, clientFlagCorrect;
    int numberOfTries;
    char charGuess[1024], answerServer[1];
    char* delimiter = "\\n";

    if (argc < 3) {
       fprintf(stderr,"usage %s hostname port\n", argv[0]);
       exit(0);
    }
    portno = atoi(argv[2]);

    // Creates the socket socket() --> endpoints of sockets
    sockfd = socket(AF_INET, SOCK_STREAM, 0);
    if (sockfd < 0) 
        error("ERROR opening socket");
    // Creates the socket socket() --> endpoints of sockets

    server = gethostbyname(argv[1]);
    if (server == NULL) {
        fprintf(stderr,"ERROR, no such host\n");
        exit(0);
    }

    // connects to the service in connect()
    bzero((char *) &serv_addr, sizeof(serv_addr));
    serv_addr.sin_family = AF_INET;
    bcopy((char *)server->h_addr, 
         (char *)&serv_addr.sin_addr.s_addr,
         server->h_length);
    serv_addr.sin_port = htons(portno);
    if (connect(sockfd,(struct sockaddr *) &serv_addr,sizeof(serv_addr)) < 0) 
        error("ERROR connecting");
    // connects to the service

    /** initialization of variables **/
    clientFlagCorrect = 0;
    numberOfTries = 0;

    while (clientFlagCorrect != 1) 
    {
        numberOfTries = numberOfTries + 1;

        /** initialization of variables **/
        integerGuess = 0;
        memset(charGuess, 0, sizeof(charGuess));

        // ask the user for the guessed number
        printf("Guess: ");
        bzero(buffer,sizeof(buffer));
        fgets(buffer,sizeof(buffer)-1,stdin);
        printf("Buffer to be processed : <%s>\n", buffer);
        // ask the user for the guessed number

        /** process the integer to string and add a delimiter **/
        integerGuess = atoi(buffer);
        printf("integerGuess : <%d> \n", integerGuess);
        sprintf( charGuess, "%d", integerGuess);    
        strcat( charGuess, delimiter);
        printf("String Guess : <%s> \n", charGuess);

        memset(buffer,0,sizeof(buffer));
        memcpy(buffer, charGuess, sizeof(charGuess));
        printf("Buffer to send : <%s>\n",buffer);
        /** process the integer to string and add a delimiter **/

        // send the string that was processed
        n = write(sockfd,buffer,strlen(buffer));
        if (n < 0) 
             error("ERROR writing to socket");
        // send the string that was processed

        // reads the data being received
        bzero(buffer,256);
        n = read(sockfd,buffer,255);
        if (n < 0) 
             error("ERROR reading from socket");
        // reads the data being received

        printf("Buffer received : <%s>\n",buffer);

        memcpy(&answerServer, buffer, sizeof(answerServer));
        printf ("Value of answerServer : <%c> \n", *answerServer);

        /** Client response **/
        if (strncmp ( & answerServer[0],"L",sizeof(answerServer)) == 0)
            printf("Lower \n");
        else if (strncmp ( & answerServer[0],"H",sizeof(answerServer)) == 0)
            printf("Higher \n");
        else if (strncmp ( & answerServer[0],"O",sizeof(answerServer)) == 0)
            {
                printf("Correct \n");
                clientFlagCorrect = 1;
            }
        else
            error("ERROR Wrong message received");

    }

    printf ("Tries: %d \n", numberOfTries);

    printf("%s\n",buffer);

    close(sockfd);
    return 0;
} 
```

有什么建议可以解决我尝试修复了半天的这个相当烦人的错误吗？

我想我提到（如果重要的话），我还不会在这里使用 fork。在我没有先使用 fork 拉出这个简单的猜谜游戏之后，我也会做一些类似的具有 fork 功能的事情。

EDIT1：添加了我通过终端获得的内容（抱歉，我认为删除服务器和客户端代码的某些部分并不好）：

服务器端：

```
$ gcc -Wall -o server server.c
$ ./server 5678
This is the random integer : 66 
Buffer from client: <20\n>
Message from client in charGuess: <20\n>
Last two characters of charGuess: <\n>
Guessed Integer : 20 
Value of answerServer: H
ERROR reading from socket: Bad file descriptor
$ 
```

客户端：

```
$ ./client3 localhost 5678
Guess: 20
Buffer to be processed : <20
>
integerGuess : <20> 
String Guess : <20\n> 
Buffer to send : <20\n>
Buffer received : <H>
Value of answerServer : <H> 
Higher 
Guess: 
```

当来自客户端的用户尚未发送任何内容时，我已经检查它是否已从客户端发送。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:38:10.117

printf 调试输出已经表明出了什么问题。查看服务器报告的最后一行，您会偶然发现：

```
ERROR reading from socket: Bad file descriptor 
```

这个问题是由于试图从一个已经关闭的文件描述符中读取而引起的。为了稍微减轻您示例的代码丛林，我只是复制了相关部分。希望这样错误会更容易发现：

```
while (serverFlagCorrect != 1) 
{
    // ...

    /* reads pretty well in the first run */
    n = read(newsockfd,buffer,255);

    // ...

    close(newsockfd);
    /* oops - there won't be any filedescriptor to read from in the second run */
}
/* close() should be placed here instead */ 
```

虽然在进入循环后第一次运行时一切都很好，但`newsockfd`在关闭它后将不再是有效的文件描述符。将`close (newsockfd)`线移动到指示的位置应该可以解决问题。

# javascript - 所有 chrome.tabs 都出现相同的错误

> ID：15479683
> 
> 赞同：1
> 
> 时间：2013-03-18T14:47:51.917
> 
> 标签：javascript, google-chrome, google-chrome-extension

我正在尝试制作一个每 2 分钟重新加载一个选项卡的扩展程序，但我希望它尝试重新加载，即使互联网处于脱机状态（因此它会在重新启动时重新加载）。当窗口出现错误（例如离线）时，使用 location.reload() 不起作用，所以我认为最好的方法是使用 chrome.tabs.reload()。

问题是，所有 chrome.tabs 都会给我一个类似的错误，如果我尝试使用空参数它应该可以工作，因为根据文档它默认为当前选项卡，而是：

```
chrome.tabs.reload({});
Uncaught TypeError: Cannot call method 'reload' of undefined 
```

如果我尝试获取当前标签 ID：

```
chrome.tabs.query({currentWindow: true, active: true}, function (tabs) {
  console.log(tabs[0]);
});
Uncaught TypeError: Cannot call method 'query' of undefined 
```

同样，每个单曲`chrome.tabs`都有类似的错误，“无法调用未定义的 xxyyzz”。好像chrome看不到我的标签，这是怎么回事？

我的 manifest.js 是：

```
{
  "manifest_version": 2,

  "name": "test",
  "description": "",
  "version": "1.0",

  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "content_scripts": [
    {
      "matches": ["http://www.google.com/*"],
      "js": ["reload.js"],
      "run_at": "document_end"

    }
  ],
  "permissions": [
    "tabs","storage","http://www.google.com"
  ]
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:55:55.173

您[无法](http://developer.chrome.com/extensions/content_scripts.html) `chrome.tabs`从内容脚本内部访问，

> [...] 内容脚本有一些限制。他们不能：

*   使用 chrome.* API（chrome.extension 的一部分除外），*例如 chrome.tabs*
*   使用由其扩展页面定义的变量或函数
*   使用由网页或其他内容脚本定义的变量或函数

> [...]

您必须使用 a`Background Page`才能使用`chrome.tabs` [Api Methods](http://developer.chrome.com/extensions/tabs.html)。

`reload`并从那里调用。

**更新：**
*我添加了一个简单的示例`background.js`，它通过单击上下文菜单来切换选项卡（2 分钟）的自动重新加载。我尽量评论它*

剧透警告：如果您将其作为自己的学习实践*（或类似的东西） ，请***不要**单击[此链接](http://pastebin.com/mgcQXf1Q)，否则请随意使用代码做任何您想做的事情

# ios - initWithCoder 之后的 EXC_BAD_ACCESS

> ID：15479686
> 
> 赞同：-2
> 
> 时间：2013-03-18T14:48:00.097
> 
> 标签：ios, objective-c

我有这个功能：

```
-(id)initWithCoder:(NSCoder *)decoder
{
    self = [super init];
    if (self) {
        _smID = [[decoder decodeObjectForKey:@"_smID"]intValue];
        _link = [decoder decodeObjectForKey:@"_link"];        
        _trigger = [decoder decodeObjectForKey:@"_trigger"];
        _status = [decoder decodeObjectForKey:@"_status"];
        _expiration = [[decoder decodeObjectForKey:@"_expiration"]intValue];
        _timeFromRegistratio = [[decoder decodeObjectForKey:@"_timeFromRegistratio"]intValue];
        _timeFromSubsription = [[decoder decodeObjectForKey:@"_timeFromSubsription"]intValue];
        _timeFromLastOpening = [[decoder decodeObjectForKey:@"_timeFromLastOpening"]intValue];
        _timeToTrigger = [[decoder decodeObjectForKey:@"_timeToTrigger"]intValue];
    }
    return self;
} 
```

当我之前打印对象时`return self;`。但是当它返回到调用行时，对象已经消失了。这是调用线路：

```
 SMBase *oldMonkeySurvayRule = [[NSKeyedUnarchiver unarchiveObjectWithData:oldMonkeySurvayRuleData]retain]; 
```

我收到了这个错误：

```
Program received signal EXC_BAD_ACCESS, Could not access memory.
Reason: KERN_INVALID_ADDRESS at address: 0x60000008
0x0449709b in objc_msgSend ()
The program being debugged was signaled while in a function called from GDB.
GDB has restored the context to what it was before the call.
To change this behavior use "set unwindonsignal off"
Evaluation of the expression containing the function (_NSPrintForDebugger) will be abandoned. 
```

这是.h：

```
@interface SMBase : NSObject{
    NSString *_status;
    NSString *_trigger;
    int _expiration;
    int _timeFromRegistratio;
    int _timeFromSubsription;
    int _timeFromLastOpening;
    int _timeToTrigger;
    int _smID;
    NSString *_link;
}
@property  (nonatomic, strong) NSString *status;
@property  (nonatomic, strong) NSString *link;
@property  (nonatomic, strong) NSString *trigger;
@property  (nonatomic,assign)int expiration;
@property  (nonatomic,assign)int timeFromRegistratio;
@property  (nonatomic,assign)int timeFromSubsription;
@property  (nonatomic,assign)int timeFromLastOpening;
@property  (nonatomic,assign)int timeToTrigger;
@property  (nonatomic,assign)int smID; 
```

留存不够？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:51:26.453

方法`decodeObjectForKey:`返回自动释放的对象，因此您需要保留它。下面找一个例子。对所有实例变量执行此操作：

```
_link = [[decoder decodeObjectForKey:@"_link"] retain]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:50:49.890

尝试使用此代码：

```
self.link = [decoder decodeObjectForKey:@"_link"]; 
self.trigger= [decoder decodeObjectForKey:@"_trigger"]; 
//etc 
```

我有同样的问题。这段代码对我有帮助。方法返回的对象`decodeObjectForKey:`是自动释放的。将其分配给属性将保留它。

# c# - 从对象的字符串属性中删除无效的 JSON 字符 - 例如：myObj.stringProp

> ID：15479691
> 
> 赞同：3
> 
> 时间：2013-03-18T14:48:14.043
> 
> 标签：c#, json, wcf, parsing, invalid-characters

我有一个 WCF 服务返回一个序列化的对象，我使用它来解析客户端`$.parseJSON()`

99% 的时间都很好用。不幸的是，它偶尔会序列化无效字符（例如：“â€¨â€¨”）并导致解析器崩溃。

到目前为止，这些字符几乎是我遇到的唯一给我带来问题的字符，而且我确实找到了一种方法来对该字符串进行编码以删除它.. 但它看起来很草率：

```
Encoding iso = Encoding.GetEncoding("ISO-8859-1");
Encoding utf8 = Encoding.UTF8;
byte[] utfBytes = utf8.GetBytes(myString);
byte[] isoBytes = Encoding.Convert(utf8, iso, utfBytes);
var sResult = iso.GetString(isoBytes); 
```

在这些字符出现之前有效的一种方法（在此之前我遇到了其他无效字符的一些问题）是先`$.stringify()`得到结果，然后再解析它。但似乎它不处理这种情况。

无需更改每个对象在应用程序范围内的序列化方式，是否有更好的方法仅在一个属性上执行此操作？

# spring - 将 Spring Security 与在 Karaf 中运行的 CXF OSGI 包集成

> ID：15479695
> 
> 赞同：0
> 
> 时间：2013-03-18T14:48:17.280
> 
> 标签：spring, osgi, cxf, apache-karaf, blueprint-osgi

我正在使用的应用程序有一个带有基于 JavaScript 的客户端的 Web 应用程序包，它向基于 CXF 的包发出 REST 调用。后者使用蓝图与服务层捆绑包暴露的服务挂钩。主 WAB 通过 Spring 的 DelegatingFilterProxy 使用 Spring Security。

目标是将基于 CXF 的捆绑包集成到安全折叠中。我们尝试了两种方法：将 CXF 包部署为 WAB（在其中注册 CXF servlet 以及 Spring 过滤器）。问题在于解析将此捆绑包连接到服务层的蓝图文件。特定错误表明找不到蓝图的命名空间处理程序。

最新的方法是使用 blueprint.xml 来部署 CXFNonSpringServlet 以及注册 DelegatingFilterProxy 过滤器。blupring.xml 的相关部分：

```
 <service interface="javax.servlet.Servlet">
        <service-properties>
            <entry key="servlet-name" value="ozpCXFServlet"/>
            <entry key="alias" value="/ozp/rest" />
        </service-properties>
        <bean class="org.apache.cxf.transport.servlet.CXFNonSpringServlet">
            <property name="bus" ref="cxfBus"/>
        </bean>
    </service>

    <service interface="javax.servlet.Filter">
        <service-properties>
            <entry key="filter-name" value="springSecurityFilterChain"/>
            <entry key="servletNames">
                <array value-type="java.lang.String">
                    <value>ozpCXFServlet</value>
                </array>
            </entry>
            <entry key="urlPatterns">
                <array value-type="java.lang.String">
                    <value>/ozp/rest</value>
                </array>
            </entry>
        </service-properties>
        <bean class="org.springframework.web.filter.DelegatingFilterProxy" />
    </service> 
```

这部分工作，过滤器被集成到 HTTP 请求中。我得到的错误是

```
java.lang.IllegalStateException: No WebApplicationContext found: no ContextLoaderListener registered?
at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:159) 
```

如何避免此错误？如何确保创建 Spring 应用程序上下文？

谢谢，

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T14:36:14.387

在这种情况下，您需要使用 spring-dm。你可能会绑定到 spring 的 2.5.x 版本。在你的战争中，你可能需要像 OsgiBundleXmlWebApplicationContext 这样的东西。

# apache-flex - 带弹性的素面

> ID：15479696
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:48:20.287
> 
> 标签：apache-flex, jsf-2, primefaces

如何通过菜单primefaces在flex，swf中打开屏幕？我试图用纯 html 打开一个文件，它可以工作，但无法在标记为 <ui:composition> 的文件中打开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:12:51.620

我正在开发一个用 flex 制作的应用程序。让我们将一些页面移动到 primefaces，以便将来的应用程序 100% 使用 primefaces 和 jsf。

开始将是一个菜单，其中菜单可以引用两个 file.swf 作为 file.xhtml。或者一个file.swf 导入一个file.xhtml。有什么想法吗？

我试过：

索引.xhtml

```
<? Xml version = "1.0" encoding = "ISO-8859-1"?> 
<! DOCTYPE html PUBLIC "- / / W3C / / DTD XHTML 1.0 Strict / / EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<Html xmlns = "http://www.w3.org/1999/xhtml" 
xmlns: m = "http://java.sun.com/jsf/html" 
xmlns: w = "http://primefaces.org/ui" 
xmlns: ui = "http://java.sun.com/jsf/facelets"> 

<h:head> 
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /> 
<title> JSF Application </ title> 
</ H: head> 

<h:body style="font-size: 12px"> 

<embed width="100%" height="100%" src="file.swf" /> 

</ H: body> 

</ Html> 
```

有效！但我想要这个：

```
<? Xml version = "1.0" encoding = "ISO-8859-1"?> 
<! DOCTYPE html PUBLIC "- / / W3C / / DTD XHTML 1.0 Strict / / EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<Html xmlns = "http://www.w3.org/1999/xhtml" 
xmlns: m = "http://java.sun.com/jsf/html" 
xmlns: w = "http://primefaces.org/ui" 
xmlns: ui = "http://java.sun.com/jsf/facelets"> 
<ui:composition> 

<ui:define name="content"> 

<embed width="100%" height="100%" src="/file.swf" /> 

</ Ui: define> 

</ Ui: composition> 
</ Html> 
```

我想用 primefaces 标签打开。没用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T04:42:49.070

使用 Primeface 的 Media 标签加载 swf。看看 primefaces 展示

```
 <p:media value="http://www.youtube.com/v/KZnUr8lcqjo" width="420" height="315" player="flash"/> 
```

[https://www.primefaces.org/showcase/ui/multimedia/media.xhtml](https://www.primefaces.org/showcase/ui/multimedia/media.xhtml)

# java - Java 中的 PrintWriter 或任何其他输出流不知道“\r\n”

> ID：15479697
> 
> 赞同：6
> 
> 时间：2013-03-18T14:48:20.533
> 
> 标签：java, sockets, client-server, readline, printwriter

我无法使用 PrintWriter 或任何其他输出流在服务器和客户端程序之间发送消息。如果我使用 println("abc") 通信它可以正常工作，但如果我使用 print("abc\r\n")、print("abc\n") 或 print("abc\r" 则它不起作用）。我所说的“它不起作用”的意思是 readLine() 不会结束，因为它似乎看不到“换行符”字符并且它仍在等待“\r”或“\n”

为了更清楚，我将简单地在下面放一些代码： 客户端：

```
import java.net.*;
import java.io.*;

public class Server {
  public static void main(String[] args) throws IOException {

    ServerSocket serverSocket = null;
    try {
        serverSocket = new ServerSocket(1234);
    } catch (IOException e) {
        System.err.println("Could not listen on port: 1234.");
        System.exit(1);
    }

    Socket clientSocket = null;
    try {
        clientSocket = serverSocket.accept();
    } catch (IOException e) {
        System.err.println("Accept failed.");
    }
    System.out.println("Connected");

    PrintWriter out = new PrintWriter(clientSocket.getOutputStream(), true);
    BufferedReader in = new BufferedReader(new InputStreamReader(clientSocket.getInputStream()));

    String textFromClient;
    textFromClient = in.readLine(); // read the text from client
    System.out.println(textFromClient); 

    String textToClient = "Recieved";
    out.print(textToClient + "\r\n");  // send the response to client

    out.close();
    in.close();
    clientSocket.close();
    serverSocket.close();
  }
} 
```

服务器：

```
import java.net.*;
import java.io.*;

public class Client {
public static void main(String[] args) throws IOException {

    Socket socket = null;
    PrintWriter out = null;
    BufferedReader in = null;
    BufferedReader read = new BufferedReader(new InputStreamReader(System.in));

    try {
        socket = new Socket("localhost", 1234);
        out = new PrintWriter(socket.getOutputStream(), true);
        in = new BufferedReader(new InputStreamReader(socket.getInputStream()));
    } catch (UnknownHostException e) {
        System.err.println("Don't know about host");
    } catch (IOException e) {
        System.err.println("Couldn't get I/O for the connection");
    }
    System.out.println("Connected");

    String textToServer;

    textToServer=read.readLine();
    out.print(textToServer + "\r\n" );  // send to server

    System.out.println(in.readLine()); // read from server

    out.close();
    in.close();
    read.close();
    socket.close();
  }
} 
```

我想使用 print() + "\r\n" 而不是 println() 因为我正在编写的服务器程序要求从服务器发送到客户端的消息需要在末尾包含 "\r\n"，例如。“这是从服务器到客户端的消息\r\n”。我认为 println() 和 print("\r\n") 是一样的，所以我认为我不应该使用 println() + "\r\n"，否则会有 2 个换行符。（虽然我不知道客户端如何从服务器读取，因为我被要求只编写服务器程序。他们将编写客户端来测试我的服务器程序。）但是，我应该发送包含“\ r\n" 最后但 readLine() 似乎无法识别它。那么我能用它做什么呢？

如果你不明白我的问题，你可以试试上面的代码，你就会明白我的意思。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T15:00:53.430

`flush()`从客户端写入服务器后调用，如下所示：

```
out.print(textToServer + "\r\n" );  // send to server
out.flush(); // here, it should get you going. 
```

`flush()`：[刷新输出流并强制写出任何缓冲的输出字节。](https://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html#flush())

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T15:05:33.403

除了 VishalD 的回答之外，无需担心使用`println()`或发送，`\r\n`因为无论如何都会`readline()`查找。`\n`从[API](http://docs.oracle.com/javase/7/docs/api/java/io/BufferedReader.html#readLine%28%29l)：

> 读取一行文本。一行被认为是由换行符 ('\n')、回车符 ('\r') 或紧跟换行符的回车符中的任何一个终止的。

# php - HTML 表的每一行的 JQuery PHP 唯一 ID

> ID：15479700
> 
> 赞同：2
> 
> 时间：2013-03-18T14:48:30.770
> 
> 标签：php, jquery

我只是在学习 JQuery，我坚持以下。

我有一个 HTML 表（由 PHP 创建，显示 MYSQL 查询的结果）。

表格的第一列有一个下拉菜单，允许用户更改单元格的值，并更新数据库。我正在使用 .toggle 和 .post 来完成这项工作。我的问题是只有第一行有效，我相信这是因为我的目标是重复的 ID。

那么，有人可以指出我正确的技术。最大的问题是不知道要问的正确问题....

我是否以某种方式为每一行动态创建唯一 ID？但如果是这样，我如何传递这些，或者让 JQuery 以每一行为目标，并且它的内容是用户选择的？

谢谢

--

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:50:31.690

最好简单地使用类。替换`id="`为`class="`，然后根据单击的行而不是 id 定位。

```
var theRow = $(this).closest("tr.myclass");
theRow.doSomething(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T14:54:52.990

不要从ids的角度来看。从树的 POV 看它。DOM 树中的每个节点都知道它在哪里：它的父节点、兄弟节点、子节点。如果连续发生某事，您可以使用被点击的任何内容的位置来识别您所在的“位置”并以这种方式获取必要的相关数据。

例如

```
<tr>
   <td>Row 1</td>
   <td><button click="showRowNumber(this);">click</button></td>
</tr>
<tr>
   <td>Row 2</td>
   <td><button click="showRowNumber(this);">click</button></td>
</tr>
<script type="text/javascript">
function showRowNumber(el) {
   alert($(el).prev().text());  // outputs "Row 1" or "Row 2"
}
</script> 
```

没有 ID，只有一些树操作代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:54:59.397

正如凯文所说，您需要使用类而不是 id。

在类事件处理程序中，在这种情况下`click`，使用**`this`**这样您专门指的是被单击的元素，如下所示：

```
$('.toggler').click(function(){

   $(this).append('clicked element id: '+this.id); //will show the unique id for the toggled element
    //$.post(); will want to put your $.post inside to also make use of "this"
}); 
```

为了帮助您学习，您也可以在 上执行此操作**`byTagName`**，在本例中通过表格单元格 ( `td`)：

```
$('td').click(function(){

   $(this).append('clicked element id: '+this.id); //will show the unique id for the toggled element
    //$.post(); will want to put your $.post inside to also make use of "this"
}); 
```

**更多用途`this`**：如果您正在删除或向表中添加行并且需要跟踪您正在处理的行，那么您可以在点击事件中使用 jQuery 或纯 javascript，如下所示：显示您点击的数字行：

```
$("table tr").click(function(){
    alert('jQuery: '+$(this).index()); //jQuery
    alert('javascript: '+this.rowIndex); //javascript
}); 
```

最后，如果页面加载时不存在一行，则需要使用 jQuery 的方法使用**事件委托。**`on()`这也可能是您无法单击除第一行之外的其他行的原因。

```
$(document.body).on('click', "table tr", function(){
    alert('jQuery: '+$(this).index()); //jQuery
    alert('javascript: '+this.rowIndex); //javascript
}); 
```

# python - 用于大多数静态站点的轻量级 Web 框架

> ID：15479703
> 
> 赞同：3
> 
> 时间：2013-03-18T14:48:43.820
> 
> 标签：python, web-frameworks

我有多年的 PHP 经验和一些 Python/django 的良好经验。

我基本上要建立一个快速的个人网站，因为我已经很久没有一个真正能做任何事情的网站了。我不想使用 PHP（太难看），我宁愿避免使用 django，因为它确实适用于非常动态的网站，并且对于我想要的东西来说太过分了。使用 Python 的东西将是非常可取的。

特别是我想要具有以下功能的轻量级产品：

*   完全控制 HTTP 标头。
*   处理漂亮网址的好方法。
*   一个轻量级的模板引擎。
*   定期添加静态内容的简单方法。

我看过 Flask，这似乎是我迄今为止最好的选择，但即便如此，它似乎也是为了生成大部分动态内容。所以我正在寻找其他建议，或者一些证明 Flask 很好的理由。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:59:49.993

烧瓶就好了。您可以选择使用动态内容，这不会以任何方式损害您同时提供静态内容的能力。

否则总是有[Bottle](http://bottlepy.org/docs/dev/)。:)

**编辑**

当然，如果你**必须**使用 Python 3，Flask 已经出局了，你可能应该研究一下[Tornado](http://www.tornadoweb.org/en/stable/)和[PyPy](http://pypy.org/)之类的东西，它们也（可能）会给你带来显着的性能提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:15:42.827

我喜欢`Flask`，并认为它非常适合这种应用程序。它非常适合小型应用程序，并且也易于扩展。我的投票是`Flask`！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:18:45.087

如果你只想要一个小框架，你可以使用 Bottle 或 Flask。

如果要生成静态站点，有很多用 Python 编写的具有各种功能的静态站点生成器：Nikola、Hyde、Cactus、Pelican、Volt 等。谷歌“python 静态站点生成器”。它们在不同程度上与一些动态元素很好地结合在一起——你必须进行调查。

您还可以将这两种方法结合起来——静态生成一些站点，并将动态页面路由到 Bottle 或 Flask。

# angularjs - 如何将 AngularJS $resource 中的参数序列化为兼容 rails 3.2 的参数

> ID：15479704
> 
> 赞同：1
> 
> 时间：2013-03-18T14:48:53.803
> 
> 标签：angularjs, ruby-on-rails-3.2

我正在尝试获取角度资源以将我的对象正确序列化为 rails 3.2 控制器操作。数据格式是 JSON，工作和必需的输入（在 Rails 端）应该是：

```
"data"=>[{"id"=>29, "column"=>0, "position"=>0}], "id"=>"2", "page"=>{} 
```

这适用于我们的旧代码：

```
$.ajax
  type: "put"
  url: target
  dataType: "json"
  contentType: "application/json"
  data: JSON.stringify({data: widgets}) 
```

但是，如果我尝试使用角度资源，我会得到如下所示的内容：

```
"data"=>"[{\"id\":28,\"column\":2,\"position\":0}]", "id"=>"2", "page"=>{"id"=>"2"} 
```

我首先创建了一个工厂：

```
app.factory "Page", ["$resource", ($resource) ->
  $resource "/admin/pages/:collectionRoute:id/:memberRoute",
  {
    id: "@id",
    memberRoute: "@memberRoute",
    collectionRoute: "@collectionRoute",
  },
  {
    update: {method: "PUT"}
    store_widgets: { method: "PUT", params: { data: "@data", memberRoute: 'store_widgets' }, isArray: true }
  }
] 
```

...并`store_widgets`使用以下方法调用该函数：

```
Page.store_widgets(id: $scope.page_id, data: JSON.stringify(widgets) ) 
```

我已经尝试了一些设置数据参数的替代方法，但它似乎不起作用。它要么以纯字符串形式发布，`[Object object]`要么以纯字符串形式发布。

关于如何让 $resource 发送的请求与使用纯 jQuery Ajax 的请求完全相同的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:14:51.167

取决于您是要`data`在请求正文中还是在查询参数中传递：

在查询参数中：

```
// 'store_widgets' action definition
store_widgets: {
  method: "PUT",
  params: {
    id: "@id",
    data: "@data",
    memberRoute: 'store_widgets'
  },
  isArray: true
} 
```

称呼：

```
function MyCtrl($scope, Page) {

  $scope.widget = [
    {"id":29, "column":0, "position":0}
  ];

  Page.store_widgets({id: 2, data: $scope.widget, page: {}});

} 
```

[笨蛋](http://plnkr.co/edit/2OlybKTPVx61Pi3eGwzC)。

* * *

在请求正文中：

称呼：

```
Page.store_widgets({id: 2, page: {}}, {data: $scope.widget}); 
```

* * *

屁股 $resource 文档说：

> 可以使用以下参数调用类对象或实例对象上的操作方法：
> 
> 1.  HTTP GET“类”操作：Resource.action([parameters], [success], [error])
> 2.  非 GET “类”操作：Resource.action([parameters], postData, [success], [error])
> 3.  非 GET 实例操作：instance.$action([parameters], [success], [error])

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-24T17:33:38.500

我能够解决序列化参数的唯一方法是使用 JQuery.param()，以便我可以在 PHP POST 通道中看到数据。

我必须在我的 $resource 中设置标题：

```
headers : {'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8'} 
```

我对 $resource 方法的调用。这又快又脏，所以请原谅。

```
vm.save = function(item) { 
  var data = $.param({username:item.username, email:item.email});
  userFactory.save(data);
} 
```

`item`由于 $resouce 将方法附加到`item`. 如果你使用`$.param`它`item`，最终会触发所有附加到资源的 DELETE、GET、QUERY 等方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-06T08:32:57.857

这个问题在 2.0 版本的 angular(

看这里：[https ://github.com/angular/angular.js/issues/3740](https://github.com/angular/angular.js/issues/3740)

# d - 类型推断具有未知数量的已知类型参数的委托参数

> ID：15479707
> 
> 赞同：2
> 
> 时间：2013-03-18T14:49:00.330
> 
> 标签：d

如果您定义一个接受委托的函数，则 D 可以在您调用该函数时对委托参数进行类型推断。所以如果我写一个带有签名的函数：

```
void foo(void delegate(int,string) dlg) 
```

我可以使用以下方法调用它：

```
foo((a,b){}); 
```

D 会推断出`a`is`int`和`b`is `string`。

但是，如果我事先不知道代表将有多少个参数怎么办？如果我写

```
void foo(T...)(void delegate(T) dlg) 
```

我可以打电话：

```
foo((int a,string b,char c,boolean d){}); 
```

但是我必须为每个参数指定类型。

现在，我想`foo`接受一个带有**任意**数量参数的委托——所有参数都相同。所以我可以打电话：

```
foo((a,b,c,d,e,f,g){}); 
```

D 会推断出`a`to`g`都是`string`s。

请注意，我需要的**不是**可变函数。`dlg`它本身不接受任何数量的参数，而是`foo`接受具有任意数量参数的委托。

可以在D中做到这一点吗？

**编辑**：
实际上，如果我可以定义一个默认参数会更好，所以我可以写

```
foo((a,b,int c,d){}); 
```

and `a`, `b`and`d`将是字符串，而`c`will 是`int`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T01:59:59.973

这可能是一个增强请求。但是现在你可以在编译时将它作为别名传递：

```
import std.stdio;

void foo(alias dlg)()
{
    dlg(1, 2.0, [3], "a");
    dlg(1.0, 2, [[3]], "b");
}

void main()
{
    foo!((a, b, c, d) { writefln("%s %s %s %s", a, b, c, d); } )();
} 
```

# jquery - jQuery 滑动切换不起作用？

> ID：15479711
> 
> 赞同：7
> 
> 时间：2013-03-18T14:49:04.683
> 
> 标签：jquery, jquery-slide-effects

[http://jsfiddle.net/nKUgA/2/](http://jsfiddle.net/nKUgA/2/)

我只是想让一个小盒子从充当按钮的图片控件 div 向下滑动，但 slideToggle 什么也没做——它只是有点小故障，然后又回来了。阅读*大量*其他类似问题，没有任何帮助或应用。

```
 $('#pictureControls').click(function(event) {
        $('#pictureControlsMenu').slideToggle(300);
        event.stopPropagation();
    }); 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-18T15:22:19.673

`slideToggle`没有工作，因为表格不是块元素。在接下来的更新中，我将其设为块元素（而不是 display:none），然后在使用 jQuery 加载页面时将其隐藏...

[http://jsfiddle.net/nKUgA/4/](http://jsfiddle.net/nKUgA/4/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T15:03:36.303

尝试滑动 div 而不是表格：

[http://jsfiddle.net/nKUgA/3/](http://jsfiddle.net/nKUgA/3/)

```
<div id="pictureControls" onclick="" title="Picture Controls" alt="Picture Controls">
    <div id="pictureControlsWrapper">
        <table id="pictureControlsMenu"> 
```

由于我不确定 HTML click 函数和其他东西在做什么，我将它们与 stopPropogation 语句一起删除。

# content-management-system - Woocommerce - 产品页面中的描述

> ID：15479712
> 
> 赞同：4
> 
> 时间：2013-03-18T14:49:05.150
> 
> 标签：content-management-system, wordpress

我需要在 Woocommerce 插件中的“产品”描述中添加一点摘录。我有这样的页面：[http](http://exploreprague.cz/guides-buddies-2/) ://exploreprague.cz/guides-buddies-2/我需要在每个人的名字下都有一些描述文字......有什么办法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-03-19T06:10:31.653

包含产品的类别页面是：woocommerce >> 模板 >> content-product.php

您会发现只有在此页面内显示标题的功能为：

```
<h3><?php the_title(); ?></h3> 
```

在该行之后，您可以添加自己的行：

```
<br /><?php echo $product->get_sku(); ?> <br /><?php echo apply_filters( 'woocommerce_short_description', $post->post_excerpt ) ?> 
```

这些将显示 SKU 和产品的简短描述。

顺便说一句，这只是一种快速的硬编码方法，您可以尝试将这些函数添加到主题的functions.php中该页面上的钩子中。

```
add_action('woocommerce_after_shop_loop_item_title','woocommerce_template_single_excerpt', 5); 
```

正如在那个钩子评论部分中提到的那样，PRICE 已经被钩住了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-24T21:37:41.337

也许这可以帮助你

```
<?php wc_get_template( 'single-product/short-description.php' ); ?> 
```

从这个链接[https://docs.woothemes.com/wc-apidocs/function-woocommerce_template_single_excerpt.html](https://docs.woothemes.com/wc-apidocs/function-woocommerce_template_single_excerpt.html)

# mysql - 错误 1005 (HY000) | 无法创建表

> ID：15479713
> 
> 赞同：0
> 
> 时间：2013-03-18T14:49:06.517
> 
> 标签：mysql

```
create table finishedMaterials(
FinishedMaterialID VARCHAR(4) NOT NULL,
FinishedMaterialType VARCHAR(10) NOT NULL,
FinishedMaterialWeight INT(5) NOT NULL,
FinishedMaterialUnits INT(5) NOT NULL,
CONSTRAINT PRIMARY KEY (FinishedMaterialID))ENGINE=INNODB;

create table vehicles(
VehicleID VARCHAR(4) NOT NULL,
VehicleNumber VARCHAR(8),
VehicleType VARCHAR(10) NOT NULL,
VehicleCondition VARCHAR(10) NOT NULL,
VehicleRemarks VARCHAR(100),
CONSTRAINT PRIMARY KEY (VehicleID))ENGINE=INNODB;

create table transport(
TransportID VARCHAR(4) NOT NULL,
VehicleID VARCHAR(4) NOT NULL,
FinishedMaterialID VARCHAR(4) NOT NULL,
FinishedMaterialUnits INT(5) NOT NULL,
FinishedMaterialWeight INT(5) NOT NULL,
CONSTRAINT PRIMARY KEY (TransportID),
CONSTRAINT FOREIGN KEY (VehicleID) REFERENCES vehicles(VehicleID),
CONSTRAINT FOREIGN KEY (FinishedMaterialID) REFERENCES finishedMaterials(FinishedMaterialID),
CONSTRAINT FOREIGN KEY (FinishedMaterialUnits) REFERENCES finishedMaterials(FinishedMaterialUnits),
CONSTRAINT FOREIGN KEY (FinishedMaterialWeight) REFERENCES finishedMaterials(FinishedMaterialWeight))ENGINE=INNODB; 
```

* * *

• 这段代码有什么问题？是什么导致了这个错误？请帮忙。除了最后一个之外，所有其他表格，包括此代码的前 2 个，都可以正常工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:53:00.923

您的最后 2 个外键不引用主表中的索引键

编辑：他们不应该。FinishedMaterialWeight 和 FinsihedMaterialUnits 不是 finishedMaterials 表的唯一键。只需要 FinishedMaterialID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T14:53:57.143

来自维基百科。。

*“外键是关系表中与**另一个表的候选键匹配的字段。**外键可用于交叉引用表。”*

然而，

```
CONSTRAINT FOREIGN KEY (FinishedMaterialUnits) REFERENCES finishedMaterials(FinishedMaterialUnits),
CONSTRAINT FOREIGN KEY (FinishedMaterialWeight) REFERENCES finishedMaterials(FinishedMaterialWeight))ENGINE=INNODB; 
```

上面的列 FinishedMaterialUnits 和 FinishedMaterialWeight 不是其表中的候选键。

我认为您的设计有点缺陷，因为这两列不应该对表中的每一行都是唯一的。例如，单位计数可以重复。

# java - 我正在尝试在 Applet 中放置一个音频 url

> ID：15479719
> 
> 赞同：0
> 
> 时间：2013-03-18T14:49:19.907
> 
> 标签：java, user-interface, audio, applet

我在我的 getCodeBase 方法中将音频文件 url 放入我的应用程序时遇到问题：

```
public class Audioapp extends JApplet
{
    public class Sound // Holds one audio file
    {
        private AudioClip song; // Sound player
        private URL songPath; // Sound path
        Sound(String filename)
        {
            try
            {
                songPath = new URL(getCodeBase("G:\\Uni\\Programming\\Rolling assignements\\Week0\\Programming week21"),filename);  // This is the place were im getting error
                song = Applet.newAudioClip(songPath); // Load the Sound
            }
            catch(Exception e){e.printStackTrace();} 
        }
        public void playSound()
        {
            song.play(); // Play
        }
    }
} 
```

我得到的错误是：

```
The method getCodeBase() in the type Applet is not applicable for the arguments (String) 
```

我在网上按照教程进行了操作，并且正确且完整地遵循了它。但是缺少/错误的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:04:46.820

你遵循什么教程？您是否阅读了 getCodeBase 和 AudioClip 的 javadoc？

我认为这是你应该做的：

```
Audioclip song = getAudioClip(getCodeBase(),"filename"); 
```

这首歌应该在你的类文件目录中。我没有尝试过，但我认为它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:05:09.783

根据 Oracle 的[Java API for Applets](http://docs.oracle.com/javase/6/docs/api/index.html?java/applet/Applet.html)，没有可以传递字符串的方法。没有任何参数的方法共有三种。

# c - C 编程：如何找到最短路径？

> ID：15479721
> 
> 赞同：5
> 
> 时间：2013-03-18T14:49:34.323
> 
> 标签：c, path, adjacency-matrix

想象一下，我有一个 6x6 的正方形，由 36 个顶点组成（即每行 6 个顶点，每列 6 个顶点），看起来像这样：

```
•  •  •  •  •  •  
•  •  •  •  •  •  
•  •  •  •  •  •  
•  •  •  •  •  •  
•  •  •  •  •  •  
•  •  •  •  •  • 
```

每个顶点都与 1、2、3 或 4 个附近的顶点相连——所以我们基本上得到了一个包含顶点和边的图。我的问题如下：我希望机器人穿过边缘的“迷宫”，直到找到放置在某个顶点上的某个对象。一旦它找到那个对象，它应该使用**最快**的方式返回到它的起点。

现在，我不太确定如何实现这一点，所以我的问题是：在 C 中保存有关这些顶点和边的信息的最佳结构是什么？（邻接矩阵对我来说似乎效率低下，因为 36x36 非常大）。而且，使用这些信息，我怎样才能找到最快的方式回到起点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:41:53.077

我建议您研究一下寻路解决方案中经常使用的 A* 算法。

[http://theory.stanford.edu/~amitp/GameProgramming/AStarComparison.html](http://theory.stanford.edu/~amitp/GameProgramming/AStarComparison.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:28:20.873

您似乎每个顶点需要四位，以表示{上，右，下，左}中的任何一个都是“开放”方向，即有效移动。

因此，您总共需要：

```
6 * 6
----- = 18 bytes
  2 
```

保存所有连接数据。很难想象它会比这更有效率。

# java - 为什么 Gson 中的 TypeToken 构造如此奇怪？

> ID：15479724
> 
> 赞同：16
> 
> 时间：2013-03-18T14:49:40.313
> 
> 标签：java, json, constructor, gson

当我使用 Gson 在 object 和 json 之间进行解析时，TypeToken 的初始化非常奇怪：

```
Type collectionType = new TypeToken<Collection<Integer>>(){}.getType(); 
```

我只知道这种格式：`new TypeToken<Collection<Integer>>().getType();`，上面的大括号是干什么用的？提前致谢！

**PS**我查看了`TypeToken`类的源代码，它是一个`class`（不是接口或抽象）并且没有任何构造函数，这意味着它`no-parameter constructor`用作默认值。

**PS2**当我删除大括号时，它告诉我构造函数不可见。当我查看 TypeToken 类时，这是构造函数：

```
 protected TypeToken() {
        this.type = getSuperclassTypeParameter(getClass());
        this.rawType = (Class<? super T>) $Gson$Types.getRawType(type);
        this.hashCode = type.hashCode();
  } 
```

为什么不直接使用`public`呢？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-03-18T14:55:28.767

“奇怪”并不完全是一个技术术语。该类的定义方式迫使您显式指定要与它的具体实例关联的泛型参数。因为已编译的 Java 类保留了有关其泛型参数的信息，所以这些信息随后可供需要它的框架库使用。

这就是超级类型令牌的目的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-18T14:53:17.887

`new TypeToken<Collection<Integer>>(){}`意味着您正在创建一个扩展的[匿名内部类](http://docs.oracle.com/javase/tutorial/java/javaOO/anonymousclasses.html)`TypeToken<Collection<Integer>>`。同时，您正在创建该匿名类的实例。

从链接：

> 匿名类使您能够使您的代码更简洁。它们使您能够同时声明和实例化一个类。它们类似于本地类，只是它们没有名称。如果您只需要使用一次本地类，请使用它们。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T14:51:08.630

[TypeToken](https://code.google.com/p/google-gson/source/browse/trunk/src/main/java/com/google/gson/reflect/TypeToken.java?r=2)是抽象的，所以你必须创建一个具体的类来实例化它，这就是为什么你有`{}`.

此代码创建具体的匿名子类，实例化它然后调用`getType`实例。

# linux - 用于在前台但在不同终端选项卡上运行进程的脚本

> ID：15479730
> 
> 赞同：1
> 
> 时间：2013-03-18T14:50:05.560
> 
> 标签：linux, bash, shell, background, foreground

我是 shell 脚本的新手。我正在使用`gnome-terminal`. 我写了一个简单的脚本，我需要一个接一个地开始我的过程，这是我的脚本：

```
#!/bin/bash    
    cd A/
    sleep 1
    ./exe1 &
    echo "-------- exe1 STARTED------"

    cd ../../B/
    sleep 1
    ./exe2_a &
    sleep 1
    ./exe2_b &
    echo "--------exe2 STARTED------"

    cd ../C/
    sleep 1
    ./NAV_exe3_a &
    sleep 1 
    ./NAV_exe3_b &
    echo "--------exe3 STARTED------" 
```

如您所见，我正在后台启动 5 个不同的进程，但是如何通过单个脚本在终端（前台）的 5 个不同选项卡中启动它们？有什么办法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:04:50.533

如果你`gnome-terminal`有空，你可以这样做：

```
gnome-terminal \
  --tab -e "./exe1" \
  --tab -e "./exe2" \
  --tab -e "./exe3" 
```

请注意，这将并行启动所有内容。如果你需要这样的事情，你可以使用睡眠来实现定时延迟：

```
gnome-terminal \
  --tab -e "./exe1" \
  --tab -e "sh -c 'sleep 5; ./exe2'" \
  --tab -e "sh -c 'sleep 10; ./exe3'" 
```

# android - Facebook SDK 3.0 android 代码从 Eclipse 开始工作，但不在 Playstore 应用程序中工作？

> ID：15479732
> 
> 赞同：1
> 
> 时间：2013-03-18T14:50:14.053
> 
> 标签：android, facebook, release, google-play-services

在我们的应用程序中，我们将 Facebook 与新的 Facebook sdk 3.0 版集成。

如果我从 eclipse 在我的测试设备上启动应用程序，一切正常。facebook 应用程序（如果未安装本机应用程序，则为 webView）打开，登录到 Facebook 回调并发布帖子。

但是，如果我将此代码作为 google playstore 中的 apk 发布，从那里下载并测试它，facebook 应用程序将启动，用户登录并允许发布，然后什么都没有发生，没有帖子到墙上 O_o。

这是代码：

```
private void facebookLogin()
{

    Session.openActiveSession(this, true, new Session.StatusCallback() 
      {

        @Override
        public void call(Session session, SessionState state, Exception exception) 
        {
            // TODO Auto-generated method stub

            if(session.isOpened())
            {

                performPublish(PendingAction.POST_PHOTO);

            }
        }
    });
}

private void performPublish(PendingAction action) {
        Session session = Session.getActiveSession();
        if (session != null) {
            pendingAction = action;
            if (hasPublishPermission()) {
                // We can do the action right away.
                handlePendingAction();
            } else {
                // We need to get new permissions, then complete the action when we get called back.
                session.requestNewPublishPermissions(new Session.NewPermissionsRequest(this, PERMISSIONS));
            }
        }
    }
private void handlePendingAction() 
 {
        PendingAction previouslyPendingAction = pendingAction;
        // These actions may re-set pendingAction if they are still pending, but we assume they
        // will succeed.
        pendingAction = PendingAction.NONE;

        switch (previouslyPendingAction) 
        {
            case POST_PHOTO:
                postPhoto();
                break;
            case POST_STATUS_UPDATE:
                postStatusUpdate();
                break;
        }
 }
private void postPhoto() 
 {
        if (hasPublishPermission()) 
        {

            Bitmap logo = g.getLevelBitmaps()[0];
            Request request = Request.newUploadPhotoRequest(Session.getActiveSession(), logo, new Request.Callback() 
            {
                @Override
                public void onCompleted(Response response) 
                {
                    postStatusUpdate();
                    if(g.isAchievementsActivated())
                    {
                        Swarm.init(logoQuestion,3777,"831e03485c37444f9b94de8fdf2e676f");
                        SwarmAchievement.unlock(10093);
                    }
                    //Toast.makeText(logoQuestion, "Posted", Toast.LENGTH_SHORT).show();
                    performPublish(PendingAction.POST_STATUS_UPDATE);
                }
            });
            Bundle params = new Bundle();
            params.putString("description", "Who know's that logo? \n" + hintQuestionText+ " posted from Videogames Logoquiz now available for Android and iOS");
            //request.setParameters(params);
            request.executeAsync();

        } 
        else 
        {
            pendingAction = PendingAction.POST_PHOTO;
        }
 }

private void postStatusUpdate() 
 {
        if (hasPublishPermission()) 
        {
            String question = "Who know's that logo? "+hintQuestionText+" Get Videogames Logoquiz. It's now available for iOS and Android.";
            Request request = Request
                    .newStatusUpdateRequest(Session.getActiveSession(), question, new Request.Callback() 
                    {
                        @Override
                        public void onCompleted(Response response) 
                        {
                            Toast.makeText(logoQuestion, "Posted", Toast.LENGTH_SHORT).show();
                        }
                    });
            request.executeAsync();
        } 
        else 
        {
            pendingAction = PendingAction.POST_STATUS_UPDATE;
        }
 } 
```

hasPublishPermission 函数：

```
private boolean hasPublishPermission() 
 {
        Session session = Session.getActiveSession();
        return session != null && session.getPermissions().contains("publish_actions");
 } 
```

我要求的权限是：

```
private static final List<String> PERMISSIONS = Arrays.asList("publish_actions","user_photos"); 
```

在我的 Android 清单中，我有以下权限来集成 facebook：

```
<uses-permission android:name="android.permission.INTERNET"/>
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/> 
```

我不明白为什么它可以通过测试工作，但不能在相同的发行版本上工作。

有人知道有解决办法吗？

谢谢你们！

# wordpress - 如何从 HTML 中提取 jQuery 代码并执行它？

> ID：15479733
> 
> 赞同：3
> 
> 时间：2013-03-18T14:50:18.487
> 
> 标签：wordpress, jquery

我正在一个在页面之间切换时严重依赖 AJAX 的网站上工作。这是一个使用 RoyalSlider 图片幻灯片插件的 WordPress 网站。您通过插件创建幻灯片，然后在帖子中添加相关的短代码。短代码将自动生成初始化滑块的 jQuery，但它将它绑定到 document-ready 事件，当通过 ajax 加载新页面时不会触发该事件。我知道在我的 AJAX 调用中初始化滑块的位置，但这不会让我加载插件中定义的滑块选项。

正确的 jQuery 代码（包括选项）确实在 HTML 中创建。

```
<script id="new-royalslider-init-code" type="text/javascript">
...
</script> 
```

如何提取此 jQuery 代码，并使用此脚本标记中的代码手动初始化滑块？

我知道我可以像这样获取代码：

```
$('#new-royalslider-init-code').html() 
```

但我不知道如何执行它。以下是脚本标记的示例：

```
<script id="new-royalslider-init-code" type="text/javascript">
    jQuery(document).ready(function($) {
      $('.new-royalslider-2').royalSlider({...OPTIONS...});
    });
</script> 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T14:51:59.220

试试这个：

```
var a = 'alert(1)';
eval(a); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:59:09.277

这样做： -

```
$(window).load(function() { 
    alert($("#new-royalslider-init-code").html());
}); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/EZf6g/)**

# css - Eclipse 中出现奇怪的 CSS 错误 - 选择器无法识别为“错误的 CSS ID 格式”

> ID：15479736
> 
> 赞同：0
> 
> 时间：2013-03-18T14:50:27.463
> 
> 标签：css, eclipse, validation

试图构建三星智能电视的示例项目之一。基于 Eclipse 的 SDK。

我正在输入示例 CSS，而 Eclipse 对正文和 * 声明感到不满 - 报告两者的 CSS ID 格式错误。

这是一个非常简单的 CSS..我找不到让它理解这些标签的方法......

版本：Indigo Service Release 2 内部版本 ID：20120216-1857

这是导致错误的声明：

```
body {
    width: 960px; 
    height: 540px;
} 
```

'*" 也无效

```
* {
    width: 960px; 
    height: 540px;
} 
```

有趣的是，Eclipse 也拒绝了类语法，并且 .mytest 无效：

```
.mytest {
    width: 960px; 
    height: 540px;
} 
```

很快，我的 CSS 中就只剩下 id 类型选择器了……什么给出了？

任何想法如何解决这个问题？

回答 - 尽管在 Eclipse 编辑器中标记了“错误”，但它们不会影响项目，并且即使存在“错误”，所有文件也会复制到应用程序位置。所以现在这只是一个麻烦......我不会通过Eclipse上的bugzilla没有时间......

# c# - 原始打印设置 DevMode 选项（方向、副本、边距、默认来源等）

> ID：15479740
> 
> 赞同：1
> 
> 时间：2013-03-18T14:50:30.583
> 
> 标签：c#, .net, windows, winapi, printing

希望这里有人可以帮助我，因为我正用头撞墙试图让它发挥作用。基本上我需要使用winspool.Drv win32 API 将原始文本/PCL 命令发送到打印机进行打印。这可以正常工作，但是，您在打印机对话框/首选项中选择的任何打印机选项都不会做任何事情。

最终，我想从 PrinterSettings 对话框中获取 DEVMODE，并将其用于原始打印，但我什至无法手动设置它。

我曾尝试在 WritePrinter 之前或在单独的打开/关闭打印机之前更改 DEVMODE，我尝试仅使用 DocumentProperties 调用，并使用带有 PRINTER_INFO_8 结构的 GetPrinter/SetPrinter，没有任何问题。DEVMODE 结构似乎填写正确，我更改它，它似乎更改正确，但无论如何打印机总是以相同的方式打印。

这是我一直在使用的代码：

方法1：

```
public static bool SetPrinterSettings(PrinterSettings settings, IntPtr hPrinter)
{
    IntPtr hDevMode; // a handle to our current DEVMODE
    IntPtr pDevMode; // a pointer to our current DEVMODE
    String sPrinterName; // normalized printer name
    DEVMODE dm;

    // Setup
    sPrinterName = settings.PrinterName.Normalize();

    // Obtain the current DEVMODE from the PrinterSettings
    hDevMode = settings.GetHdevmode(settings.DefaultPageSettings);

    // Obtain a lock on the handle and get an actual pointer so Windows won't move
    // it around while we're futzing with it
    pDevMode = GlobalLock(hDevMode);

    // test
    dm = (DEVMODE)Marshal.PtrToStructure(pDevMode, typeof(DEVMODE));

    // Our DEVMODE is 188 bytes, but dmSize returns 220, does this matter?
    // This code doesnt seem to work
    //dm.dmSize = (short)Marshal.SizeOf(dm); // Set size to our implementation of DevMode
    //int isize = GlobalSize(pDevMode).ToInt32() - (int)dm.dmSize; // Set the print drivers extra size
    //dm.dmDriverExtra = Convert.ToInt16(isize);

    // Change things
    dm.dmFields = DM_FIELD_TYPE.DM_ORIENTATION;
    dm.dmOrientation = 2;

    // Load the structure back into the buffer
    Marshal.StructureToPtr(dm, pDevMode, true);

    //Tell the printer about the new property
    int ret = DocumentProperties(IntPtr.Zero, hPrinter, sPrinterName, pDevMode, pDevMode, (DM_IN_BUFFER | DM_OUT_BUFFER));

    if (ret <= 0)
    {
        return false;
    }

    // We're done futzing
    GlobalUnlock(hDevMode);

    // Tell our printer settings to use the one we just overwrote
    //settings.SetHdevmode(hDevMode);

    // It's copied to our printer settings, so we can free the OS-level one
    GlobalFree(hDevMode);

    //test
    dm = (DEVMODE)Marshal.PtrToStructure(pDevMode, typeof(DEVMODE));

    // ^^ this contains correct orientation

    return true;
} 
```

方法2：

```
public static bool SetLandscapeMode(PrinterSettings settings, IntPtr hPrinter)
{
    // Setup
    String sPrinterName = settings.PrinterName.Normalize();

    // get current printer settings
    int memNeeded = DocumentProperties(IntPtr.Zero, hPrinter, sPrinterName, IntPtr.Zero, IntPtr.Zero, 0);
    IntPtr pFullDevMode = Marshal.AllocHGlobal(memNeeded);
    DocumentProperties(IntPtr.Zero, hPrinter, sPrinterName, pFullDevMode, IntPtr.Zero, DM_OUT_BUFFER);

    DEVMODE dm = (DEVMODE)Marshal.PtrToStructure(pFullDevMode, typeof(DEVMODE));

    // change the settings
    dm.dmFields = DM_FIELD_TYPE.DM_ORIENTATION;
    dm.dmOrientation = 2;

    Marshal.StructureToPtr(dm, pFullDevMode, true);

    PRINTER_INFO_8 PI8 = new PRINTER_INFO_8();
    PI8.pDevMode = pFullDevMode;

    IntPtr pPI8 = Marshal.AllocHGlobal(Marshal.SizeOf(PI8));

    Marshal.StructureToPtr(PI8, pPI8, true);

    // save the printer settings
    SetPrinter(hPrinter, 9, pPI8, 0);

    Marshal.FreeHGlobal(pPI8);

    return true;
} 
```

测试打印的代码：

```
private void testPrint_Click(object sender, EventArgs e)
{
    IntPtr hPrinter;

    if (printDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        hPrinter = RawPrint.OpenRAWPrinter(printDialog1.PrinterSettings.PrinterName);

        if (hPrinter == IntPtr.Zero)
        {
            MessageBox.Show("Error opening printer");
            return;
        }

        if (!RawPrint.StartRAWDocument(hPrinter, "Test document"))
        {
            MessageBox.Show("Error starting raw document");
            RawPrint.CloseRAWPrinter(hPrinter);
            return;
        }

        // Start a page.
        if (RawPrint.StartRawPage(hPrinter))
        {
            // Set the printers settings
            //if (!RawPrint.SetPrinterSettings(printDialog1.PrinterSettings, hPrinter))
            if(!RawPrint.SetLandscapeMode(printDialog1.PrinterSettings, hPrinter))
            {
                MessageBox.Show("Error setting printer settings");
                RawPrint.CloseRAWPrinter(hPrinter);
                return;
            }

            String test = "This is \r\n test print data";
            byte[] buf = Encoding.Default.GetBytes(test);

            GCHandle gch = GCHandle.Alloc(buf, GCHandleType.Pinned);
            RawPrint.writeRAW(hPrinter, gch.AddrOfPinnedObject(), buf.Length);
            gch.Free();

            RawPrint.EndRawPage(hPrinter);
        }

        RawPrint.EndRAWDocument(hPrinter);
        RawPrint.CloseRAWPrinter(hPrinter);
    }
    else
    {
        MessageBox.Show("Error starting raw page");
    }
} 
```

唯一奇怪的是 Marshal.SizeOf(typeof(DEVMODE)) 或 Marshal.SizeOf(dm) 等于 188，而返回到结构中的 dmSize 是 220。我尝试修改这个 dmSize 以匹配我们的结构，如注释中所示输出代码，但这似乎出错或不起作用，不确定这是否重要。

除此之外，在 DevModes 中返回的信息似乎都是正确且有效的。我可以在打印对话框中设置选项，并在 PrinterSettings 开发模式中查看它们的更改。在这些函数结束时，将 pDevMode 编组回结构具有更改的设置。

然而，这一切似乎对印刷品没有任何影响。我有什么遗漏吗？

编辑：测试函数中的 RawPrint 调用只是围绕 spooler api 调用的包装器。该页面打印良好，它总是以纵向模式打印，并且没有任何选项有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T19:59:32.290

与其使用 WritePrinter 绕过打印机驱动程序，不如正常启动打印作业并使用 ExtEscape() 和[PASSTHROUGH](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162776%28v=vs.85%29.aspx)转义注入 PCL。这将允许所有 PrinterSettings 值应用于作业。[并非所有打印机驱动程序都支持 PASSTHROUGH，但您可以通过使用QUERYESCSUPPORT](http://msdn.microsoft.com/en-us/library/windows/desktop/ff686811%28v=vs.85%29.aspx)调用 ExtEscape() 来检查驱动程序支持。

# css - CSS左对齐问题

> ID：15479742
> 
> 赞同：0
> 
> 时间：2013-03-18T14:50:39.393
> 
> 标签：css, alignment

我正在设计一个新的网站设计，它的左右两侧都有边框，中间有内容。一切都很好，除了我在左边有一个图像，我想与左边框的边缘对齐。换句话说，我不希望图像左侧的边框和左侧之间有任何空间。

作为参考，这里是页面草稿的链接... [http://www.nwsccmoodledemo.com/newnwscc/](http://www.nwsccmoodledemo.com/newnwscc/)

除了讨厌的图像对齐之外，一切都正是我想要的。我尝试过更改边距、填充等，但在 IE 和 Firefox 中似乎不一致。我将不胜感激任何建议。

没有外部样式表；所有样式表代码都在 HTML 文件中，但我也在下面发布了代码。

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org /TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Northwest-Shoals Community College</title>
    <style type="text/css">
    /*CSS RESET*/
    html, body, div, span, applet, object, iframe,
    h1, h2, h3, h4, h5, h6, p, blockquote, pre,
    a, abbr, acronym, address, big, cite, code,
    del, dfn, em, font, img, ins, kbd, q, s, samp,
    small, strike, strong, sub, sup, tt, var,
    dl, dt, dd, ol, ul, li,
    fieldset, form, label, legend,
    table, caption, tbody, tfoot, thead, tr, th, td {
margin: 0;
padding: 0;
border: 0;
outline: 0;
font-weight: inherit;
font-style: inherit;
font-size: 100%;
vertical-align: baseline;
    }
    /* remember to define focus styles! */
    :focus {
outline: 0;
    }
    body {
line-height: 1;
color: black;
background: white;
    }
    ol, ul {
list-style: none;
    }
    /* tables still need 'cellspacing="0"' in the markup */
    table {
border-collapse: separate;
border-spacing: 0;
    }
    caption, th, td {
text-align: left;
font-weight: normal;
    }
    blockquote:before, blockquote:after,
    q:before, q:after {
content: "";
    }
    blockquote, q {
quotes: "" "";
    }

    strong {
font-weight:bold;color:#0289ce;
    }

    em {
font-style:oblique;
    }

    p {
margin:15px 0;
line-height:25px;
    }

    .aligncenter, div.aligncenter {
display: block;
margin-left: auto;
margin-right: auto;
    }
    .alignleft {
float: left;
    }
    .alignright {
float: right;
    }

    h1 {font-size:180%;}
    h2 {font-size:150%;}
    h3 {font-size:125%;}
    h4 {font-size:100%;}
    h5 {font-size:90%;}
    h6 {font-size:80%;}

    a:link {color:#0289ce;}
    a:hover {color:#f64274;}

    /*End RESET - Begin Full Width CSS*/
body {
    color:#DFE4ED;
    background:url(images/home_frame_925.gif) repeat top center;
    color:#2D1F16;
    font:13px Helvetica,  Arial,  sans-serif

}

.wrap {
    position:relative;
    margin:0 auto;
    width:900px;
    clear:both;
}

a:link{
    text-decoration:none;
    color:#000033;      
    }

a:hover {
    color:#0066CC; 
}

a:visited {
    color:#0066CC:
}

#header, #footer {
    width:925px;
    float:center;
    padding:0 0;
    height:103px;
    margin:auto;
}

#header {
    background:#698DA4;
}

#header .logo {
    float:left;
    /*width:400px;*/
    padding:0 0 0 0;
    margin:0;
    /*clear:both;*/
}

#header p {
    float:right;
    width:400px;
    margin:0;
}

#content {
    padding:30px 0;
    clear:both;
}

#footer {
    background:#698DA4;
    width:925px;
    text-align:right;
    /**position:fixed;**/
    bottom:0;
    float:center:
    z-index:999999;
    padding:20px 0;
}

#footer2 {

    background:#D2D8E8;
    width:925px;
    text-align:center;
    float:center;
    /**position:fixed;**/
    bottom:0;
    z-index:999999;
    margin:auto;

}

#footer a {
    color:#fff;
}

    </style>
    </head>

    <body bgcolor="#DFE4ED">

    <div id="header">
    <!--    <div class="wrap">-->
    <div class="logo">
        <a href="http://www.nwscc.edu">

        <p><img src="images/banner.png" alt="NW-SCC Homepage Banner" /></p>
        </a></div>
    <!--    </div>-->
    </div>

    <div class="wrap">
<div id="content">

    <table>

    <tr><td style="vertical-align:top;padding="30px;";>
    <img  src="images/homepage_students_smaller.png"><br><br>

   <table style="margin:auto"><tr><td style="vertical-align:top;padding:5px">
   <a href=http://www.facebook.com/pages/Northwest-Shoals-Community-
   College/105177256819">
   <img src="images/facebooknew.png"></td></a></td><td style="vertical-align:
   top; padding:5px"><a href="http://twitter.com/#!/NWSCC">
   <img src="images/twitternew.png"></a></td><td style="vertical-align:
   middle;padding:0px"><a href="http://www.youtube.com/user/OfficialNWSCC">
   <img src="images/youtubenew.png"></a></td>
          </tr></table>
   </td>

   <td style="padding:30px">

<table style="vertical-align:top;padding:0px;">

<tr style="vertical-align:top;"><td style="vertical-align:top;width:40%;">

<h1>Quick Links</h1>

   <p><a href="http://www.nwsccmoodle.com">Moodle</a> | <a href="
   http://nwscc.edu/moodlehandout.pdf">Login Instructions</a><br>
   <a href="http://www.nwscc.edu/collectionfees.html">Online Services</a> 
   | <a href="http://www.nwscc.edu/onlineserviceslogin.pdf">Login Instructions</a><br>
   <a href="http://www.nwscc.edu/studentemail.html">Student Email</a><br>
   <a href="http://www.nwscc.edu/classschedule.html">Spring 2013 Class Schedule</a><br>
   <a href="http://www.nwscc.edu/library/library.html">Library</a><br>
   <a href="http://www.nwscc.edu/onecard/nwscconecard.html">NW-SCC OneCard</a></p>
    </td>
<td style="vertical-align:top;width:40%;"><h1><br></h1>
    <p><a href="http://www.nwscc.edu/applicationinfo.html">
    Admissions Application</a><br>
<a href="http://nwscc.edu/calendar.html">College Calendar</a><br>
<a href="http://nwscc.edu/bookstorecheck.html">Bookstore</a><br>
<a href="http://nwscc.edu/financialaid/finaid.html">Financial Aid</a><br>
<a href="http://www.nwscc.edu/businessoffice.html">Financial Data</a><br />
<a href="http://www.nwscc.edu/distanceeducation/">Distance Education </a></p>
</td></tr>

   <tr style="vertical-align:top"><td style="vertical-align:top;padding:
   0px" colspan="2">

<script charset="utf-8" src="http://widgets.twimg.com/j/2/widget.js"></script>
    <script>
    new TWTR.Widget({
    version: 2,
    type: 'profile',
    rpp: 10,
    interval: 31000,
    width: 475,
    height: 150,
    theme: {
    shell: {
    background: '#698DA4',
    color: '#f9f9fc'
    },
    tweets: {
    background: '#fcfcfc',
color: '#8C0000',
    links: '#063c94'
    }
    },
    features: {
    scrollbar: true,
    loop: false,
    live: true,
    behavior: 'all'
    }
    }).render().setUser('NWSCC').start();
    </script>
</td>
    </tr>

    </table>
    </td></tr></table>

   </div>
   </div>

   <div id="footer2">

<table style="padding:0px;margin:auto;vertical-align:top"><tr>
    <td style="padding:20px">
    <a href="http://www.nwscc.edu/arra.html"><img src="images/
    arra_logo_final.jpg">  </a></td>
    <td style="padding:20px"><a href="http://nwalabamabest.org/">
    <img src="images/best_final.jpg"></a></td>
    <td style="padding:20px"><a href="http://shoalsscholardollars.com/">
    <img src="images/scholar_dollars_final.jpg"></a></td>
    <td style="padding:20px"><a href="http://www.nwscc.edu/athensstate.html">
    <img src="images/athens_final.jpg"></a></td>
     <td style="padding:20px"><a href="http://www.accs.cc/">
    <img src="images/accs_logo_final.jpg"></a></td>
     </tr></table>

     </div>

    <div id="footer">
<div class="wrap">

           800 George Wallace Blvd. | Muscle Shoals, AL 35661 | 256.331.5200<br>
     2080 College Road | Phil Campbell, AL 35581 | 256.331.6200<br>
     <a href="http://www.nwscc.edu/cyberadvisor.html">Contact CyberAdvisor</a><br>
     <p>&copy; 2007 - 2013 | Northwest-Shoals Community College

     </div>
     </div>

     </body>
     </html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T14:55:04.607

在 Chrome 中，当您为 img 提供以下 CSS 时，它可以工作： margin-left: -20px;

我没有机会在 IE 和 Firefox 上测试它，抱歉。

作为另一个提示：使用表格进行布局不是语义化的。没有表格的元素的样式和定位也会更容易。- 凯文

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:58:25.943

你可以使用位置：

```
#imageid {
    left: -18px;
    position: relative;
} 
```

但是您确实需要关注使用表格进行布局这一点。这是不可接受的。

# c# - 创建工人“任务”来处理有限的资源

> ID：15479744
> 
> 赞同：0
> 
> 时间：2013-03-18T14:50:43.083
> 
> 标签：c#, multithreading, windows-phone

我正在寻找一种已经在 c# 中的机制，它可以让我做这样的事情：

*   10张图片需要解码
*   只有足够的内存来解码 2
*   开始解码 2，将其余部分放入作业队列
*   取消任务的能力

关于使用 c# 完成这样的事情的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:05:13.480

该类`BlockingCollection<T>`使生产者/消费者队列非常易于使用。

```
var queue = new BlockingCollection<Action>();

//put work to do in the queue
for (int i = 0; i < 10; i++)
    queue.Add(() => ProcessImage());
queue.CompleteAdding();

//create two workers
for (int i = 0; i < 2; i++)
{
    Task.Factory.StartNew(() =>
    {
        foreach (var action in queue.GetConsumingEnumerable())
            action();
    });
}

//to cancel the work, empty the queue
Task.Delay(5000)
    .ContinueWith(t =>
    {
        queue.GetConsumingEnumerable().Count();
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:52:13.957

使用 Seamphore + ConcurrentQueue 组合

# angularjs - CQ5 不能与 Angular 一起正常工作？

> ID：15479746
> 
> 赞同：0
> 
> 时间：2013-03-18T14:50:49.550
> 
> 标签：angularjs, aem

我正在使用 angularjs - 我应该说我很乐意 - 用于组件实现。但是当我尝试建立一个链接时，CQ 修改了链接，让它看起来坏了。问题是，在处理完模板后，正确的数据会出现在标记中 - 链接基本上被破坏了。

```
<li ng-repeat="file in resourceChildren">{{file.name}} (<a href="{{file.path}}">link</a>)</li> 
```

变成

```
<li ng-repeat="file in resourceChildren" class="ng-scope ng-binding">
    layer-it-on.jpg (<img src="/libs/cq/linkchecker/resources/linkcheck_o.gif"
    alt="invalid link: /content/dam/geometrixx-outdoors/articles/layer-it-on.jpg" 
    title="invalid link: /content/dam/geometrixx-outdoors/articles/layer-it-on.jpg" 
    border="0">link<img src="/libs/cq/linkchecker/resources/linkcheck_c.gif" border="0">) 
</li> 
```

而不是模板的简单解析。传递给用于渲染的控制器的数据是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:02:01.350

使用 ng-source 指令！(ng-src)

[http://docs.angularjs.org/api/ng.directive:ngSrc](http://docs.angularjs.org/api/ng.directive:ngSrc)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-18T15:16:55.277

这听起来像是 CQ 中的链接检查器的问题。您可以通过 OSGi 控制台禁用链接检查器。以下是一些说明：

[http://helpx.adobe.com/cq/kb/DisableLinkChecker.html](http://helpx.adobe.com/cq/kb/DisableLinkChecker.html)

[http://www.wemblog.com/2011/10/how-to-make-sure-that-links-are-always.html](http://www.wemblog.com/2011/10/how-to-make-sure-that-links-are-always.html)

这两个链接都引用 5.4，但也适用于 5.5。希望有帮助。

# entity-framework - EntityFramework TPT + 表合并

> ID：15479750
> 
> 赞同：1
> 
> 时间：2013-03-18T14:50:52.710
> 
> 标签：entity-framework, entity-framework-4, entity-framework-5

我有错误：“错误 0114：关系约束中从属角色和主要角色中的属性数量必须完全相同。” 在这段代码上

```
 public abstract class UserBase
    {
        [Key]
        public Guid Guid { get; set; }     

        [Required]
        public string Name { get; set; }   
    }

    public class User : UserBase
    {
        public DateTime? BirthDate { get; set; }    
        public UserPassword Password { get; set; }        
    }

    public class Outsourcer : UserBase
    {
        public Guid OutsourcingCompanyGuid { get; set; }    
        public OutsourcingCompany OutsourcingCompany { get; set; }
    }

    public class UserPassword
    {
            [Key]
            public Guid UserGuid { get; set; }
            public User User { get; set; }

            public string Password { get; set; }
            public string Salt { get; set; }
    }

    public class MyContext : DbContext
    {
        public DbSet<UserBase> Users { get; set; }
        public DbSet<UserPassword> UserPasswords { get; set; }
        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<UserBase>().ToTable("UserBase");
            modelBuilder.Entity<Outsourcer>().ToTable("Outsourcer");

            modelBuilder.Entity<User>().ToTable("User");
            modelBuilder.Entity<User>().HasRequired(t => t.Password).WithRequiredPrincipal(t => t.User);
            modelBuilder.Entity<UserPassword>().ToTable("User");
        }
} 
```

我想将用户和用户密码合并到一个名为“用户”的表中。没有行的代码`modelBuilder.Entity<UserPassword>().ToTable("User");`可以工作，但我得到了两个不同的表。

# jquery - 滚动到 iframe 内的特定元素

> ID：15479753
> 
> 赞同：2
> 
> 时间：2013-03-18T14:51:04.253
> 
> 标签：jquery, asp.net-mvc-3, html, iframe, scroll

我想滚动到 iframe 中的特定元素。我的代码看起来像这样。

```
 $(document).ready(function() {
        setTimeout(function() {
            var $contents = $('#url_iframe').contents();
            $contents.scrollTo($contents.html().find('mark'));
        }, 3000); // ms = 3 sec
    }); 
```

但这似乎不起作用。非常感谢任何想法或帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:02:18.923

`iframe`s 可以像任何其他可滚动元素一样滚动。但是您需要注意它是一个嵌套文档（因此偏移量是相对于 iframe 的上/左角的 + 如果您想要 iframe 中 div 的位置，则必须使用`$("#iFrame").contents().find("#someDiv"))`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T14:58:48.313

您正在做一个跨浏览器参考。主要浏览器不允许您这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T14:52:45.433

那里不需要`html()`功能...

尝试这个

```
 $contents.scrollTo($contents.find('#mark'));
                    //-------^^-- no need html() here 
```

# .htaccess - 如何用 apache htaccess 重写 url

> ID：15479755
> 
> 赞同：0
> 
> 时间：2013-03-18T14:51:06.527
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我有一个网站：

`http://www.test.com/?city=beijing&category=1`

`http://www.test.com/?city=beijing&category=1&start=36`

`http://www.test.com/?city=beijing&category=1&start=72`

`http://www.test.com/?city=beijing&category=2`

`http://www.test.com/?city=beijing&category=1&start=36`

`http://www.test.com/?city=beijing&category=1&start=72`

`http://www.test.com/?city=beijing&category=1&keyword=test`

`http://www.test.com/?city=beijing&keyword=test&start=36`

`http://www.test.com/?city=beijing&keyword=test&start=72`

`http://www.test.com/?city=beijing`

`http://www.test.com/?city=beijing&start=36`

`http://www.test.com/?city=beijing&start=72`

如果我想将其重写为 `http://www.test.com/beiing/1/36`

谁能告诉我在 .htaccess 文件中写入的代码。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:49:24.303

您需要系统化，在这种情况下，参数的顺序很重要：

```
# ...
RewriteRule /([a-z]+)/([0-9]+)/([0-9]+) ?city=$1&category=$2&start=$3
# ... 
```

# php - 过滤大表（HTML JS PHP MYSQL）

> ID：15479764
> 
> 赞同：0
> 
> 时间：2013-03-18T14:51:16.900
> 
> 标签：php, javascript, html, mysql

我有一个包含很多字段的数据库。我希望用户能够过滤多个字段。我正在寻找一个 Javascript 实现（没有 jQuery），也可能是一个 jQuery 实现。我要的是当您仅在 html、php、js 中将过滤器应用于表头并使用 mySQL 作为数据库时，excel 提供的功能。

到目前为止，这是我的流程：

1.  PHP 为单独的字段构建下拉列表，例如：

    选项值=\"".$row[$filterby]."\">" ....

2.  用户选择一个项目，“onChange”调用一个 JS 函数来构建搜索字符串：

    ?水果=苹果&颜色=绿色

我遇到的问题是为了更新我的表格，我必须在我的 JS 中调用一个单独的 PHP 页面（使用 window.location = "filtered.php" + searchString;）

该代码适用于一个字段，但如果我想过滤多个字段，新页面将不记得我刚刚传入的内容。

我的问题有两个：

1.  我会完全错了吗？产生我想要的东西的最佳方式是什么？
2.  如果没有 JQuery 或 AJAX，这可能吗？

编辑：

为了清楚起见，我想我会添加一个视觉效果。

```
+----+--------+----------+
| id | Fruit  | Color    | 
+----+--------+----------+
| 1  | apple  | red      | 
| 2  | mango  | yellow   | 
| 3  | banana | yellow   | 
| 4  | apple  | green    | 
+----+--------+----------+ 
```

filter.php?fruit=apple&color=green

```
+----+--------+----------+
| id | Fruit  | Color    | 
+----+--------+----------+
| 4  | apple  | green    | 
+----+--------+----------+ 
```

编辑2：

使用 php 获取所有数据并让过滤器只更新 html 数据会更好吗？还是应该在每次更改下拉列表时让 JS 查询数据库？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:11:54.333

我找到了我正在寻找的东西：

[http://www.javascripttoolbox.com/lib/table/examples.php](http://www.javascripttoolbox.com/lib/table/examples.php)

它有很多纯 JS 过滤方法的好例子，我会尝试将这些用于我的解决方案（除非有人有更好的解决方案）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-10-12T10:24:19.973

```
function price_filter(str)
{       
    var subcategory = new Array();
    $('input[type="radio"]:checked').each(function(){subcategory.push($(this).val());});
    alert (subcategory);
    alert(subcategory.length);
    var price1 = str;
    if(subcategory.length == '0')
    {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {       

            if(xmlhttp.readyState == 4)
            {     
                document.getElementById("pri_fil").innerHTML = xmlhttp.responseText;    
            }
        };

        xmlhttp.open("GET","search.php?price=" + price1,true);
        xmlhttp.send(); 
    }   
    else
    {
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if(xmlhttp.readyState == 4)
            {
                document.getElementById("pri_fil").innerHTML = xmlhttp.responseText;    
            }
        };

        xmlhttp.open("GET","search.php?price=" + price1 + "&subcategory=" + subcategory,true);
        xmlhttp.send();         
    }
} 
```

# ios - 如何将 PFObject 作为数字保存

> ID：15479768
> 
> 赞同：3
> 
> 时间：2013-03-18T14:51:22.387
> 
> 标签：ios, parse-platform

主题说明了一切：如何使用 parse.com 将数字保存为数字。

使用 setObject 并使用 NSNumber？

我在哪里可以找到这些信息？我在 PFObject 的文档中没有找到它。

提前非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T16:38:33.507

你假设你可以使用一个`NSNumber`. 例如：

```
PFObject *gameScore = [PFObject objectWithClassName:@"GameScore"]; 
[gameScore setObject:[NSNumber numberWithInt:1337] 
```

iOS 开发人员指南（不同于 API 文档）[在此处为您提供](https://parse.com/docs/ios_guide#objects-saving/iOS)指导。

# asp.net - Visual Studio 发布 AjaxControlToolkit 错误 - 指定的文件无法加密

> ID：15479772
> 
> 赞同：0
> 
> 时间：2013-03-18T14:51:34.463
> 
> 标签：asp.net, ajax, visual-studio-2010

我正在尝试在 VStudio 2010 中发布一个 Web 项目，但出现以下错误：

```
Publishing directory /...
Publishing directory bin...
Publishing directory bin/ar...
Unable to add 'bin/ar/AjaxControlToolkit.resources.dll' to the Web site.  Unable to add file 'bin\ar\AjaxControlToolkit.resources.dll'.  The specified file could not be encrypted.
Error: The operation could not be completed 
========== Build: 1 succeeded or up-to-date, 0 failed, 0 skipped ==========
========== Publish: 0 succeeded, 1 failed, 0 skipped ========== 
```

我尝试在解决方案资源管理器中删除该文件，但该文件不断重新出现。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T22:39:27.470

我找到了解决方案。

关键是禁用要发布的开发文件所在文件夹的加密。

如果遇到问题，您只需要打开资源管理器，右键单击文件夹，选择高级，您将找到一个选项“加密内容以保护数据” - >确保它已禁用。

希望能帮助到你

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-18T14:56:18.840

请确保您已完成以下操作：

1) 在解决方案资源管理器的参考部分中包含对 dll 的参考。2）在ajax控件所在的aspx页面顶部对ajax工具包进行了引用。3) 确保对 ajax 工具包的引用在 webconfig.xml 中。

如果不是，那将是您的问题，如果您需要帮助。对此答案发表评论

# objective-c - Mac OSX 和 Xcode 图像视图

> ID：15479775
> 
> 赞同：2
> 
> 时间：2013-03-18T14:51:43.497
> 
> 标签：objective-c, macos

谢谢阅读！

一个简单的问题，我似乎无法找到答案，当您在 Macbook Pro 上按音量增大、音量减小、静音等时出现的“闪屏”UI 是什么？

另外，您能否将我链接到 Objective-C 库中与此类 UI 相关的任何文档？我计划让它保持图像，使屏幕的其余部分变暗，并允许用户通过从 iPhone 发送的坐标来控制这个 UI 的位置。我可以更详细地介绍，但我不想过于复杂化。

例子：

[![UIImage](../Images/bd4612bf266f9c0d750fbecbf237efa5.png)](https://i.stack.imgur.com/N9cAh.jpg)
[（来源：[edmunn.co.uk](http://www.edmunn.co.uk/i/highvolume.jpg)）]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T14:55:11.443

它通常被称为警报视图或 HUD（平视显示器）。

你可以在 github 上找到几个实现。

喜欢这个[https://github.com/mobitar/MBAlertView](https://github.com/mobitar/MBAlertView)

# jmeter - 我们可以在 Jmeter 采样器中有超过 1 个 CSV 文件吗？

> ID：15479776
> 
> 赞同：0
> 
> 时间：2013-03-18T14:51:44.063
> 
> 标签：jmeter, performance-testing, jmeter-plugins

单个采样器是否可以有多个 CSV 文件？
我的意思是，我想为单个 JMS 请求同时从文本文件和 CSV 文件中读取值。
有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:12:30.497

好吧，只需再添加一个[CSV 数据集配置](http://jmeter.apache.org/usermanual/component_reference.html#CSV_Data_Set_Config)即可从另一个 csv 文件中读取值（如果您使用此组件从 csv 中读取）或使用多次调用[__StringFromFile](http://jmeter.apache.org/usermanual/functions.html#__StringFromFile)函数（甚至一次调用以从多个文件中读取）。

您的架构可能如下所示：

```
 ...
**CSV Data Set Config**
  Filename: list_A.csv
  Variable Names: paramA1,paramA2,...
**CSV Data Set Config**
  Filename: list_B.csv
  Variable Names: paramB1,paramB2,...
**JMS Sampler**
  // use here params from both csv-files as ${paramA1},${paramB1},...
... 
```

# python - 高效算法而不是循环

> ID：15479777
> 
> 赞同：8
> 
> 时间：2013-03-18T14:51:45.353
> 
> 标签：python, algorithm, nested-loops, nested-lists

我有一个数据集，其中每个样本的结构都与此类似

```
X=[ [[],[],[],[]], [[],[]] , [[],[],[]] ,[[][]]] 
```

例如：

```
X=np.array([ [ [1,2,3], [2,4,5] ,[2,3,4] ] , [ [5,6], [6,6] ] , [[2,3,1],[2,3,10],[23,1,2],[1,4,5]]  ] ,"object")

Y=np.array([ [ [12,14,15] ,[12,13,14] ] , [ [15,16], [16,16] ] , [[22,23,21],[32,33,11],[12,44,55]]  ] ,"object") 
```

所以对于**每个样本**，我需要计算 x 的每个元素与相同索引的 y 的相应元素之间的点积，并将结果求和。IE：

```
result=0

for i in range(3):
    for n,m in itertools.product(X[i],Y[i]):
        print "%s, %s" % (n,m)
        result+=np.dot(n,m)

   .....:         
[1, 2, 3], [12, 14, 15]
[1, 2, 3], [12, 13, 14]
[2, 4, 5], [12, 14, 15]
[2, 4, 5], [12, 13, 14]
[2, 3, 4], [12, 14, 15]
[2, 3, 4], [12, 13, 14]
[5, 6], [15, 16]
[5, 6], [16, 16]
[6, 6], [15, 16]
[6, 6], [16, 16]
[2, 3, 1], [22, 23, 21]
[2, 3, 1], [32, 33, 11]
[2, 3, 1], [12, 44, 55]
[2, 3, 10], [22, 23, 21]
[2, 3, 10], [32, 33, 11]
[2, 3, 10], [12, 44, 55]
[23, 1, 2], [22, 23, 21]
[23, 1, 2], [32, 33, 11]
[23, 1, 2], [12, 44, 55]
[1, 4, 5], [22, 23, 21]
[1, 4, 5], [32, 33, 11]
[1, 4, 5], [12, 44, 55] 
```

这是我的整个代码：

```
 print "***build kernel***"
        K = np.zeros((n_samples, n_samples))
        for i in range(n_samples):
            for j in range(n_samples):

                K[i,j] = self.kernel(X[i], X[j])

def kernel(x1,x2):
    N=8 #number of objects
    result=0 
    for i in xrange(N):
        for n,m in itertools.product(x1[i],x2[i]):
            result+=np.dot(n,m)
    return result 
```

如您所见，该算法的复杂性太高，而且我的样本也比这大得多。所以即使是一个很小的数据集，即包含 400 个样本，我也必须等待 4 个小时才能得到结果。我正在寻找一种更好的方法来实现这个算法。PS：我在考虑多线程或多进程，但我不确定它是否有帮助？！

我很感激任何建议！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T15:07:45.517

您可以对每个列表中的所有向量求和，而不是对需要运算的每对的点积求和，`n * m`然后只做最终的点积，这只会进行`n + m`运算。

前：

```
def calc_slow(L1, L2):
    result = 0
    for n, m in itertools.product(L1, L2):
        result += np.dot(n, m)
    return result 
```

后：

```
def calc_fast(L1, L2):
    L1_sums = np.zeros(len(L1[0]))
    L2_sums = np.zeros(len(L2[0]))
    for vec in L1:
        L1_sums += vec
    for vec in L2:
        L2_sums += vec
    return np.dot(L1_sums, L2_sums) 
```

编辑：更快的版本，利用 numpy：

```
def calc_superfast(L1, L2):
    return np.dot(np.array(L1).sum(0),
                  np.array(L2).sum(0)) 
```

输出是一样的：

```
print X[0], Y[0], calc_slow(X[0], Y[0])
print X[0], Y[0], calc_fast(X[0], Y[0]) 
```

印刷：

```
[[1, 2, 3], [2, 4, 5], [2, 3, 4]] [[12, 14, 15], [12, 13, 14]] 711
[[1, 2, 3], [2, 4, 5], [2, 3, 4]] [[12, 14, 15], [12, 13, 14]] 711.0 
```

时间显示有显着改善。计时码：

```
import random
import time
def rand_vector(size=3):
    return [random.randint(1, 100) for _ in xrange(3)]
def rand_list(length=200):
    return [rand_vector() for _ in xrange(length)]

print "Generating lists..."
L1 = rand_list(200)
L2 = rand_list(200)

print "Running slow..."
s = time.time()
print calc_slow(L1, L2)
print "Slow for (%d, %d) took %.2fs" % (len(L1), len(L2), time.time() - s)

print "Running fast..."
s = time.time()
print calc_fast(L1, L2)
print "Fast for (%d, %d) took %.2fs" % (len(L1), len(L2), time.time() - s) 
```

示例输出：

```
Generating lists...
Running slow...
75715569
Slow for (100, 100) took 1.48s
Running fast...
75715569.0
Fast for (100, 100) took 0.03s

Generating lists...
Running slow...
309169971
Slow for (200, 200) took 5.29s
Running fast...
309169971.0
Fast for (200, 200) took 0.04s

Running fast...
3.05185703539e+12
Fast for (20000, 20000) took 1.94s 
```

两个包含 20000 个元素的列表的操作每个只需要大约 2 秒，而我预测使用旧方法需要几个小时。

* * *

这样做的原因是您可以将操作分组在一起。假设您有以下列表：

```
L1 = [a, b, c], [d, e, f], [g, h, i] 
L2 = [u, v, w], [x, y, z] 
```

然后对每对的点积求和，如下所示：

```
a*u + b*v + c*w + a*x + b*y + c*z +
d*u + e*v + f*w + d*x + e*y + f*z +
g*u + h*v + i*w + g*x + h*y + i*z 
```

您可以分解出`u`, `v`, `w`, `x`, `y`, 和`z`元素：

```
u*(a + d + g) + v*(b + e + h) + w*(c + f + i) +
x*(a + d + g) + y*(b + e + h) + z*(c + f + i) 
```

然后你可以进一步分解这些总和：

```
(u + x)*(a + d + g) + (v + y)*(b + e + h) + (w + z)*(c + f + i) 
```

这只是来自每个初始列表的求和向量的点积。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T15:09:27.927

您还可以`itertools.product`通过直接对内部矩阵进行点积来绕过对的需求：

```
def calc_matrix(l1, l2):
    return np.array(l1).dot(np.array(l2).T).sum()

def kernel(x1, x2):
    return sum(
       calc_matrix(l1, l2)
       for l1, l2 in zip(x1, x2)
    ) 
```

**编辑：**

在短名单（少于几千个元素）上，这将比克劳迪乌的（真棒）答案更快。他将在这些数字之上更好地扩展：

使用 Claudiu 的基准测试：

```
# len(l1) == 500

In [9]: %timeit calc_matrix(l1, l2)
10 loops, best of 3: 8.11 ms per loop

In [10]: %timeit calc_fast(l1, l2)
10 loops, best of 3: 14.2 ms per loop

# len(l2) == 5000

In [19]: %timeit calc_matrix(l1, l2)
10 loops, best of 3: 61.2 ms per loop

In [20]: %timeit calc_fast(l1, l2)
10 loops, best of 3: 56.7 ms per loop 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T15:00:03.417

你在这里无能为力。你想得到所有乘法的结果，你只需要做它们，这就是你的算法所做的。您可以做的唯一一件事就是将结果存储在哈希表中，以防您知道有很多重复的结果，但如果不这样做会消耗大量内存。顺便说一句，多线程可能会使您的程序运行得更快，但它永远不会提高它的复杂性，即所需的操作数量。

# classification - Weka - 给出极化/有偏结果的二元分类

> ID：15479779
> 
> 赞同：2
> 
> 时间：2013-03-18T14:51:58.350
> 
> 标签：classification, weka

让我说，首先，我是 WEKA 新手。

我将 WEKA 用于二进制分类问题，其中某些指标被用于获得实例的是/否答案。

为了举例说明这个问题，这是我使用 BayesNet 得到的一组包含 288 个实例、190 个“是”和 98 个“否”值的混淆矩阵：

```
 a   b   <-- classified as
190   0 |   a = yes
 98   0 |   b = no 
```

这种绝对分离也适用于其他一些分类器，但并非所有分类器都是如此。也就是说，即使分类器的值没有极化到这样的程度，它们确实对主要类别有明确的偏见。例如，下面是 RandomForest 的结果：

```
 a   b   <-- classified as
164  34 |   a = yes
 62  28 |   b = no 
```

我很确定我错过了一些非常明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T10:56:08.897

最初，我认为 BayesNet 是问题所在。但现在我认为这是你的数据。

正如评论中已经指出的那样，我认为问题出在不平衡的类上。大多数分类器都针对准确性进行了优化，在您的情况下是`(190 + 0) / 288 = 0.66`针对 BayesNet 和`(164 + 28) / 288 = 0.67`RandomForest。

如您所见，差异并没有那么大，但是 RandomForest 找到的解决方案稍微好一些。它看起来“更好”，因为它没有把所有东西都放在同一个类中，但我真的怀疑它在统计上是否显着。

就像 Lars Kotthoff 提到的那样，很难说。我还猜想这些功能还不足以实现更好的分离。

除了尝试其他分类器之外，您还应该重新考虑您的性能指标。*只有当每个类的实例数量大致相同时，准确性*才会好。在其他情况下，[MCC](http://en.wikipedia.org/wiki/Matthews_correlation_coefficient)或[AUC](http://en.wikipedia.org/wiki/Receiver_operating_characteristic#Area_Under_the_Curve)是不错的选择（但由于实现不兼容，AUC 不能与 WEKA 中的 LibSVM 一起使用）。

您的示例的 MCC 对于 BayesNet 和

```
 ((164*28) - (62*34)) / sqrt((164+62)*(34+28)*(164+34)*(62+28))
= (4592 - 2108) / sqrt(226 * 62 * 198 * 90)
= 2484 / sqrt(249693840)
= 0,15719823927071640929 
```

对于随机森林。所以 RandomForest 显示出稍微好一点的结果，但并没有那么好。

如果没有看到您的数据，很难分辨，但它们可能无法很好地分离。

# wordpress - Wordpress：检索附加到带有“post_parent”的帖子的图像

> ID：15479781
> 
> 赞同：1
> 
> 时间：2013-03-18T14:52:03.950
> 
> 标签：wordpress

我最近将我的一些网站升级到 Wordpress 3.5.1，并注意到您不再能够使用 get_posts() 函数和 'post_parent' 属性来获取附加到特定帖子的帖子. 似乎最新的更新不再将 post_parent 字段与数据库中的帖子 ID 附加在一起。

以前，可以使用 get_posts() 获取附加到帖子的图像；

```
$args = array(
    'post_type' => 'attachment',
    'post_parent' => $post->ID
);    
$thumbnails = get_posts($args); 
```

但是，由于 post_parent 不再附加 ID，因此这不起作用。

我还应该补充一点，在“精选图像”元框中设置图像时会发生这种情况。

这一切都始于我尝试使用 title="" 属性附加图像时，但我发现不再有办法做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T18:08:03.773

如果您需要附加到页面的图像，为什么不使用`get_the_post_thumbnail()`.

请参考[**这里**](http://codex.wordpress.org/Function_Reference/get_the_post_thumbnail)的法典中的这种方法。

# ios - 低通音频滤波器，在 iOS 上计算 RMS

> ID：15479785
> 
> 赞同：5
> 
> 时间：2013-03-18T14:52:15.780
> 
> 标签：ios, core-audio, measurement, lowpass-filter

我正在为 iPad 开发一个应用程序，我想分析我正在播放的视频中的音频。使用 MTAudioProcessingTap 一切顺利。目前我有一些测试代码来测试/测量左右声道的音量。这一切进展顺利：

```
void process(MTAudioProcessingTapRef tap, CMItemCount numberFrames,
         MTAudioProcessingTapFlags flags, AudioBufferList *bufferListInOut,
         CMItemCount *numberFramesOut, MTAudioProcessingTapFlags *flagsOut)
{
    OSStatus err = MTAudioProcessingTapGetSourceAudio(tap, numberFrames, bufferListInOut,
                                                  flagsOut, NULL, numberFramesOut);

    if (err)
        NSLog(@"Error from GetSourceAudio: %ld", err);

    float leftVolume, rightVolume;

    for (CMItemCount i = 0; i < bufferListInOut->mNumberBuffers; i++)
    {
        AudioBuffer *pBuffer = &bufferListInOut->mBuffers[i];
        int cSamples = numberFrames * pBuffer->mNumberChannels;

        float *pData = (float *)pBuffer->mData;

        float rms = 0.0f;

        for (int j = 0; j < cSamples; j++)
        {
            rms += pData[j] * pData[j];

        }

        if (cSamples > 0)
        {
            rms = sqrtf(rms / cSamples);
        }

        if (0 == i)
        {
            leftVolume = rms;
        }

        if (1 == i || (0 == i && 1 == bufferListInOut->mNumberBuffers))
        {
            rightVolume = rms;
        }
    }

    NSLog(@"Left / Right Volume: %f / %f", leftVolume, rightVolume);
} 
```

但是为了这个应用程序的目的，我希望它只测量 0-80Hz 范围内的 RMS（“强度”）（例如）。因此，我需要一个低通滤波器。

我已经在谷歌上搜索了很长时间，但我的问题是我找不到任何明显的帖子、教程或解决方案。几乎每个听起来有点像我的问题都有一段随机的代码，其中有蹩脚或缺乏注释，所以我无法弄清楚所有神奇数字在那里做什么，以及它们的含义..

有人可以在这里把我推向正确的方向吗？请注意，就我而言，我**确实**想了解代码，而不仅仅是使用工作示例。

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-27T15:52:59.377

如果你能用一个可行的例子跑掉，你会很幸运。:-)

信号处理是一个复杂而深入的领域。理论上做起来很复杂，实际做起来也很复杂。

你想要一个低通滤波器。有许多具有不同优点和缺点的选项。

当您想了解正在发生的事情时，您需要处理的最基本的概念：

**频域和时域：**频域是指频率间隔，例如 0..80Hz。时域是正常时间，或者例如您在采样缓冲区中拥有的各个样本值。上面的代码计算时域中的 RMS。

**基本规则：频域和时域是完全等价的。**

您可以在任一域中执行许多操作并获得相同的结果。您始终可以在频域和时域之间切换。由于某些操作在某个域中是微不足道的，因此通常有用的是先切换到所需域，进行微操作，然后再切换回原始域（如果需要）。

频域和时域之间的切换是使用**FT（傅里叶变换）**完成的。以编程方式，经常使用包含两个样本的幂的缓冲区的特殊情况和**FFT**算法（**快速傅立叶变换**）。

另一个有趣的属性是卷积定理：FT 在一个域中的函数乘法和另一个域中的函数卷积之间进行转换。

现在这一切与您的低通滤波器有什么关系？

您建议的低通滤波器 0-80Hz，是频域中的矩形函数。您想将其与频域中的输入相乘。这意味着让所有低于 80Hz 的频率部分通过并将所有其他频率部分设置为零。

现在您可以在频域中执行所有这些操作，这很容易，但出于效率原因，您希望在时域中执行此操作以避免来回 FFT。（在您的情况下，您只想拥有也可以在频域中以与现在相同的方式计算的能量（平方和）。）

要在时域中进行低通滤波器，而不是 FT-multiply-FT，您还可以使用 FT（矩形函数）进行卷积。FT（矩形函数）是理想的低通滤波器：sinc() 函数。

```
sinc(x) := sin(pi*x) / pi*x 
```

这个 sinc(x) 是矩形函数的*脉冲响应*。这种具体的脉冲响应是无限的，这是不切实际的。这意味着您需要计算输入与无限数量的值的卷积。

你想要的是一个具有*有限脉冲响应*的滤波器：**FIR**。这将导致您的过滤器出现错误，具体而言，您不会看到所有频率 < 80Hz 的频率都具有相同的权重，并且您还会看到能量中超过 80Hz 的一些频率。

这种妥协是不可避免的。

顺便说一句：当您使用 FFT 方法时，您可以应用完美的矩形函数而不会出现任何错误，但在执行 FFT 之前对输入信号进行窗口化时，您也会间接遭受此错误的影响。（窗口化意味着切掉输入的部分（窗口）以进行 FFT。）这将对您的输出产生相同的负面影响，并且需要与您的过滤功能和结果相同的折衷方案。

您可能需要某种 FIR 滤波器作为低通滤波器。而你在其他人的代码中看到的奇怪数字很可能是这种 FIR 滤波器的系数。

问题是没有“最佳”妥协，因为妥协很大程度上取决于您如何在过滤器中定义“错误”。有些人必须以任何方式避免超过 82 Hz 的频率部分（在您的示例中），因此他们需要非常陡峭的滤波器边缘。这通常会导致 80Hz 边界附近出现较大的伪影，此时需要接受这一点。其他人可以接受一些来自频率高达 120Hz 的能量并保持在 120Hz 以上的 10% 以下，以减少 80Hz 边界附近的伪影（更柔和的低通滤波器）。

在这里很好地涵盖了整个主题： [https ://ccrma.stanford.edu/~jos/sasp/FIR_Digital_Filter_Design.html](https://ccrma.stanford.edu/~jos/sasp/FIR_Digital_Filter_Design.html)

或者，如果您想从头开始： [https ://ccrma.stanford.edu/~jos/sasp/sasp.html](https://ccrma.stanford.edu/~jos/sasp/sasp.html)

另请查看 FIR 滤波器和 sinc 的维基百科页面。

我承认，以上内容不足以设计和实现您自己的过滤器。但它应该为您提供足够的背景知识和入门指南。

不要被有时奇怪的数学吓到。

想法：一种可视化滤波器工作情况的方法是在应用滤波器并查看频谱后进行 FFT。仅通过查看 RMS 值很难判断过滤器是否正常工作。你的 iPad 有足够的处理能力来做到这一点。

（我刚刚看到还有[http://dsp.stackexchange.com](http://dsp.stackexchange.com)用于信号处理。）

# jquery - 如何指定传单地图的“活动”区域？

> ID：15479786
> 
> 赞同：2
> 
> 时间：2013-03-18T14:52:19.503
> 
> 标签：jquery, openstreetmap, leaflet

请考虑：http: [//jsfiddle.net/msNs5/3/](http://jsfiddle.net/msNs5/3/)

我有一个地图 div，它在页面加载时扩展为全尺寸，另一个半透明 div 覆盖它的底部。从美学上讲，我真的很喜欢底部 div 与它后面的地图的外观，但我需要让它没有被透明 div 覆盖的区域是“活动”区域。

IE 当地图计算标记和多边形的边界并设置它的视图时，它会计算到该暴露区域而不是整个地图本身。人们似乎认为这是可能的，但我正在为实际实施而苦苦挣扎。

小提琴中的代码如下：

```
// JavaScript
var map = L.map('map', { center: [51.505, -0.09], zoom: 13 });
osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {});
map.addLayer(osm);

function initMap() {
  $('#map').css({"height": $(window).height() + "px"});
  map.setView(map.getCenter(),map.getZoom());
}

var id;
$(window).resize(function() {
  clearTimeout(id);

  id = setTimeout(initMap, 500);
});

$('#map').css({"height": $(window).height() + "px"});
  map.setView(map.getCenter(),map.getZoom()); 
```

* * *

```
/* CSS */
#map { position: fixed; z-index: -1; width: 100%; }
#header { height: 40px; background: black; }
#otherstuff { position: fixed; bottom: 0px; width: 100%; background-color: rgba(255,255,255,0.6); height: 30%; } 
```

* * *

```
<!-- HTML --->
<!DOCTYPE html>
<body>
    <div id="header"></div>
    <div id="map"></div>

    <div id="otherstuff">xxx</div>
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T18:14:23.390

感谢#leaflet 频道上的@mourner，我被定向到这个 Github 问题线程，特别是这个评论：

[https://github.com/Leaflet/Leaflet/issues/859#issuecomment-11436202](https://github.com/Leaflet/Leaflet/issues/859#issuecomment-11436202)

它定义了一个用于偏移地图中心的 mixin：

```
MapCenterOffsetMixin = {
    UIOffset: [550, 0], // x, y
    getBounds: function(){
        var a=this.getPixelBounds(),
            b=this.unproject(new L.Point(a.min.x+this.UIOffset[0],a.max.y+this.UIOffset[1]), this._zoom,!0),
            c=this.unproject(new L.Point(a.max.x,a.min.y),this._zoom,!0);
            return new L.LatLngBounds(b,c)
    },
    _latLngToNewLayerPoint: function (latlng, newZoom, newCenter) {
        var targetPoint = this.project(newCenter, newCenter).subtract([this.UIOffset[0]/2, this.UIOffset[1]/2]),
            newCenter = this.unproject(targetPoint, newZoom);
        var topLeft = this._getNewTopLeftPoint(newCenter, newZoom).add(this._getMapPanePos());
        return this.project(latlng, newZoom)._subtract(topLeft);
    },
    _getCenterLayerPoint: function () {
        return this.containerPointToLayerPoint(this.getSize().divideBy(2).add([this.UIOffset[0]/2, this.UIOffset[1]/2]));
    },
    _resetView: function (a, b, c, d) {
        var e = this._zoom !== b;
        // Change the center
        var targetPoint = this.project(a, b).subtract([this.UIOffset[0] / 2, this.UIOffset[1]/2]),
            a = this.unproject(targetPoint, b);
        d || (this.fire("movestart"), e && this.fire("zoomstart")), this._zoom = b, this._initialTopLeftPoint = this._getNewTopLeftPoint(a);
        if (!c) L.DomUtil.setPosition(this._mapPane, new L.Point(0, 0));
        else {
            var f = L.DomUtil.getPosition(this._mapPane);
            this._initialTopLeftPoint._add(f)
        }
        this._tileLayersToLoad = this._tileLayersNum, this.fire("viewreset", {
            hard: !c
        }), this.fire("move"), (e || d) && this.fire("zoomend"), this.fire("moveend"), this._loaded || (this._loaded = !0, this.fire("load"))
    }
}

L.Map.include(MapCenterOffsetMixin); 
```

这对我来说效果很好。

# asp.net-mvc - 将布尔属性编辑器转换为 MVC 视图中的下拉列表

> ID：15479791
> 
> 赞同：28
> 
> 时间：2013-03-18T14:52:21.633
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我目前已经搭建了一个视图，其中我的模型的布尔属性被传递给 Html.EditorFor 助手：

```
@Html.EditorFor(model => model.EndCurrentDeal) 
```

一切都很好，但我真正想做的是把它按摩成一个下拉菜单，比如：

```
<select>
    <option value="true" selected="selected">Yes</option>
    <option value="false">No</option>
</select> 
```

实现这一目标的最简单方法是什么？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-03-18T14:57:56.160

你可以试试[这里的](https://stackoverflow.com/questions/9517627/converting-html-editorfor-into-a-drop-down-html-dropdownfor)东西：

```
<%= Html.DropDownList(
    "", 
    new SelectList(
        new[] 
        { 
            new { Value = "true", Text = "Yes" },
            new { Value = "false", Text = "No" },
        }, 
        "Value", 
        "Text",
        Model
    )
) %> 
```

如果你想要一个默认值：

```
<%= Html.DropDownList(
        "", 
        new SelectList(
            new[] 
            { 
                new { Value = "", Text = "None" },
                new { Value = "true", Text = "Yes" },
                new { Value = "false", Text = "No" },
            }, 
            "Value", 
            "Text",
            Model
        )
    ) %> 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-10-02T15:47:56.267

MVC 4

```
@*/////////////////// bool ////////////////////////////////*@
@model bool

@Html.DropDownListFor(m => m, new SelectList(
        new[] 
        { 
            new { Value = "true", Text = "Yes" },
            new { Value = "false", Text = "No" },
        },
        "Value",
        "Text",
        Model
    ))

@*/////////////////// bool? ////////////////////////////////*@    
@model bool?

@Html.DropDownListFor(m => m, new SelectList(
        new[] 
        { 
            new { Value = "", Text = "(none)" },
            new { Value = "true", Text = "Yes" },
            new { Value = "false", Text = "No" },
        },
        "Value",
        "Text",
        Model
    )) 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2014-01-16T13:21:41.733

您也可以尝试使用 Dictionary 方法更简洁一些，并且可以轻松地将其添加到 View Model 的构造函数中。

视图模型

```
 //Define IDictionary interface
 public IDictionary<bool, string> options { get; set; }

public YourViewModel()
{
  // Default constructor
        this.options = new Dictionary<bool, string>();
        this.options.Add(false, "no");
        this.options.Add(true, "yes");
}

@Html.DropDownListFor(model => model.yourPropertyToEdit, new SelectList( Model.options, "Key", "Value")) 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-12-04T07:59:42.503

我从 Francois Borgies 的非常有用的答案中得到启发，因此我决定编写一个自定义方法，为可以在 **@Html.DropDownList**中使用的**布尔值创建****SelectList**。当你有一个可以在每个视图中使用的辅助方法时，它会减少剃刀视图中所需的代码量。

 ****我的项目在文件夹中有**CustomHelpers.cs**类：*App_Code/Helpers*

```
namespace YourProjectName.App_Code.Helpers
{
    public static class CustomHelpers
    {
        public static SelectList SelectListForBoolean(object selectedValue = null)
        {
            SelectListItem[] selectListItems = new SelectListItem[2];

            var itemTrue = new SelectListItem();
            itemTrue.Value = "true";
            itemTrue.Text = "Yes";
            selectListItems[0] = itemTrue;

            var itemFalse = new SelectListItem();
            itemFalse.Value = "false";
            itemFalse.Text = "No";
            selectListItems[1] = itemFalse;

            var selectList = new SelectList(selectListItems, "Value","Text", selectedValue);

            return selectList;
        }           
    }
} 
```

在*创建*视图中，您可以按如下方式使用它：

```
@model Foo
@using YourProjectName.App_Code.Helpers;
...
@Html.DropDownList("EndCurrentDeal", CustomHelpers.SelectListForBoolean(), "-select-") 
```

用于*编辑*视图

```
@model Bar
@using YourProjectName.App_Code.Helpers;
...
@Html.DropDownList("EndCurrentDeal", CustomHelpers.SelectListForBoolean(Model.EndCurrentDeal), "-select-") 
```

尽管我的辅助方法不是纯 HTML Helper，因为它创建**SelectList**，但它遵循 Rahul Rajat Singh 在他的优秀文章[An Absolute Beginner's Tutorial on HTML Helpers 和在 ASP.NET MVC 中创建自定义 HTML Helpers 中提出的相同功能](https://www.codeproject.com/articles/787320/an-absolute-beginners-tutorial-on-html-helpers-and)****

# jms - MQ 上的 EJB - 获取队列深度

> ID：15479796
> 
> 赞同：0
> 
> 时间：2013-03-18T14:52:35.087
> 
> 标签：jms, ibm-mq, ejb-3.1

我有一个带有连接工厂和注入队列的 SLSB：

```
@Stateless
public class MQTestBean {
    @Resource(mappedName = "jms/MQQCF")
    private ConnectionFactory connectionFactory;

    @Resource(mappedName = "jms/testQueue")
    private Queue testQueue;
} 
```

我希望能够在队列中查询以下属性：

*   当前深度
*   打开输入计数
*   打开输出计数

请记住，我使用的频道用户只能访问 DSP、GET、PUT、INQ。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T21:28:14.970

很抱歉，但没有办法做到这一点。至少使用 WMQ JMS 客户端 jar。您可以通过在浏览时计数来间接计算 aq 深度，仅此而已。

对于输入/输出计数，您将需要 MQ api（适合您的 MQI/PCF）。

编辑：添加 url: [MQ Classes for Java](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/index.jsp?topic=/com.ibm.mq.csqzaw.doc/ja10120_.htm)

# asp.net - 必填字段验证器仅适用于 IE - 不适用于 chrome 或 firefox

> ID：15479801
> 
> 赞同：0
> 
> 时间：2013-03-18T14:52:52.013
> 
> 标签：asp.net, vb.net, validation, webforms

在我的asp.net（服务器端的vb）应用程序中，当点击提交按钮时，我正在使用必填字段验证器。验证器检查 - 的值，`txtLatestEnd`这是一个隐藏的文本框。当用户在点击提交之前选择屏幕上的项目时，此文本框的值会通过 javascript 更改。

我注意到必填字段验证器仅适用于 IE，但不适用于 chrome 或 firefox。谁能明白为什么会这样？

**必填字段验证器**

```
<asp:RequiredFieldValidator ID="reqLinks" Runat="server" ControlToValidate="txtLatestEnd" Display="Dynamic"
EnableClientScript="true" ErrorMessage="Links are required" CssClass="detailrow" Font-Bold="true"></asp:RequiredFieldValidator> 
```

**编辑**

如果有帮助 - 这是服务器端处理按钮单击的功能

```
Private Sub btnSave_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnSave.Click
    UpdateDatabase()
End Sub 
```

这是按钮本身。

```
<asp:Button Runat="server" ID="btnSave" Text="Save Milestone" CssClass="smalltextbutton" CausesValidation="True"></asp:Button> 
```

验证器和按钮都是 asp.net 表中它们自己的表行

**编辑 2：**根据要求，这是“隐藏”字段的代码 - 通过隐藏，它位于未显示的 div 内

```
<div id="divHiddenFields" style="DISPLAY:none">
    ---------------Hidden Fields---------------------------------------------------<br>
    Latest end date:<input type="text" ID="txtLatestEnd" Runat="server"><br>
    IDs &amp; Cats<input type="text" style="WIDTH:50%" runat="server" id="IDCATList"><br>
    creator: <input type="text" runat="server" id="hdnCreator"><br>
    county county<input type="text" runat="server" id="hdnLinkCount" value="0"><br>
    preloadDateArray<input type="text" runat="server" id="hdnPreLoadDates">
</div> 
```

我还尝试将按钮和验证器移到表格之外，这对验证器的工作没有任何帮助。

# javascript - 与屏幕高度成比例地调整边距顶部/底部

> ID：15479805
> 
> 赞同：0
> 
> 时间：2013-03-18T14:53:01.840
> 
> 标签：javascript, jquery, html, css

我有多行要垂直对齐的元素，以便在不同的分辨率下，第一个屏幕（不滚动）对于每个元素都是相同的。

幸运的是，我有一些限制，我必须遵守 800 像素和 1200 像素（垂直分辨率）。所以只有在这两个值之间，我的边距必须按比例增加/减少。如果大于或小于该间隔，屏幕将保持在这些限制之一。

不幸的是，根据要求，我不能使用媒体查询或 javascript 来计算这个，所以它必须是一个纯 CSS 解决方案。

有没有办法做到这一点？不影响元素的高度、宽度或左右边距。

或者是否有一种 javascript 方法可以在不注入内联 CSS 属性的情况下对其进行修改？我还没有听说过，但可以修改 CSS 文件吗？

**编辑**首选非表格解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:04:14.413

没有javascript？我看到的唯一能够实现这一点的标记（**垂直+均匀地划分页面**）是`<table>`

我[在这里摆弄了一个例子](http://jsfiddle.net/Dpr3m/)

您必须首先在 body 和 html 上触发 100% 的高度，

```
html, body {
    height:100%
}

<table style="width:100%;height:100%">
    <tr>
        <td style="color:green;background-color:pink">a&nbsp;a</td>
    </tr>
    <tr>
        <td style="color:blue;background-color:aqua">b&nbsp;b</td>
    </tr>
    <tr>
        <td style="color:red;background-color:cyan">r&nbsp;r</td>
    </tr>
</table> 
```

玩这个，测试一下，看看这个解决方案是否适合你的情况。

否则，如果您打算使用 javascript，您可以在 css3中查看 ' [not fully supported](http://caniuse.com/#search=calc) ' **calc()**

# c# - 在 C# 中动态组合一个类

> ID：15479806
> 
> 赞同：7
> 
> 时间：2013-03-18T14:53:03.993
> 
> 标签：c#, dynamic, reflection

是否可以从其他类中包含的方法动态组合一个类？

例如。A、B 和 C 类具有命名的公共方法，以便于识别它们。它们需要被提取并添加到 D 类中。D 类包含所有实现逻辑，可以进一步传递到只接受 D 类的单个实例并将这些方法动态绑定到其他函数的系统中。

需要明确的是，这不是我正在寻找的继承。我从字面上说需要将具有不同名称的方法塞入一个类中。我传递给它的系统理解这些命名约定并动态绑定它们（对我来说这是一个黑匣子）。

我将沿着从 A、B 和 C 中提取方法的路径，将它们与内存中 D 类的源动态组合，并将它们编译成一个新的 D 类，然后创建 D 的一个实例并将其向前传递。

```
public class A{  public void EXPORT_A_DoSomething(){} }
public class B{  public void EXPORT_B_DoSomethingElse(){}}
public class C{  public void EXPORT_C_DoAnything(){}}
 //should become
public class D{ 
          public void EXPORT_A_DoSomething(){} 
          public void EXPORT_B_DoSomethingElse(){}
          public void EXPORT_C_DoAnything(){}
} 
```

有没有办法从 A、B 和 C 类中提取 MethodInfos 并以某种方式直接将它们附加到 D 类？如果有怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:02:59.773

我会考虑使用[C# Class compiler](http://support.microsoft.com/kb/304655)。据我所知，您可以构建字符串中的代码，并且可以将程序集作为输出。然后，这使您能够通过反射调用方法。

在我指定的 MSDN 链接上有一个示例，但一旦我找到我的项目，我将在这里模拟一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:37:44.063

您将无法仅导出方法。这些方法不能真正与它们所在的类分开。（它们需要访问所有成员字段/属性，包括继承的）。

我认为你唯一能做的就是发出一个接口实现。（即使您说这不是您所需要的，我也看不出需要这些对象的私有状态的方法）

您可以创建一个只包含您需要的方法的接口，并提供一个支持它的类，该类包含每种类型的对象的实例。

```
public class A{  public void DoSomething(){} }
public class B{  public void DoSomethingElse(){}}
public class C{  public void DoAnything(){}}

public interface ID 
{ 
    void A_DoSomething(); 
    void B_DoSomethingElse(); 
    void C_DoAnything(); 
}

public class D : ID 
{ 
    private A a;
    private B b;
    private C c;

    public D(A a,B b, C c) { this.a=a;this.b=b;this.c=c; }

    public void A_DoSomething(){ a.DoSomething();} 
    public void B_DoSomethingElse(){ b.DoSomethingElse();}
    public void C_DoAnything(){ c.DoSomething();
} 
```

如果您需要动态生成它，请查看 Reflection.Emit。关于如何创建新程序集，然后将其动态加载到 AppDomain 中，这将是一些事情。如果可以的话，我会尽量避免这种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:21:39.633

另一种解决方案是将函数的类 get 和 set 访问器定义为接口，并声明您感兴趣的函数。

```
interface iA
{
    public int a { get; set; }
}
interface iB
{
    public int b { get; set; }
}
interface iAB : iA, iB
{
}
class MyClass : iA, iB
{
    public int b { get; set; }
    public int a { get; set; }
}
static class MyClassExtender
{
    static public int Foo(this iAB ab)
    {
        int c = ab.a + ab.b;
        ab.a = c;
        return c;
    }
    static public int FooA(this iA a)
    {
        int c = ab.a + 1;
        ab.a = c;
        return c;
    }
    static public int FooB(this iB b)
    {
        int c = ab.b + 1;
        ab.a = c;
        return c;
    }

} 
```

所以现在“MyClass”可以使用 Foo、FooA 和 FooB 作为公共方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:25:30.367

实际上应该可以使用称为“混合”的东西和代理生成器。看看 Castle.DynamicProxy 的教程：[Mixins](http://devlicio.us/blogs/krzysztof_kozmic/archive/2009/08/12/castle-dynamic-proxy-tutorial-part-xiii-mix-in-this-mix-in-that.aspx)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-03-18T15:14:28.203

您是否考虑过在 D 类中简单地使用哈希或委托列表来指向其他类的方法？或者，使用动态对象（google ExpandoObject）。

# macos - Apple MDM 服务器，iOS 工作正常，OS X 注册失败并出现“意外错误”

> ID：15479812
> 
> 赞同：1
> 
> 时间：2013-03-18T14:53:18.610
> 
> 标签：macos, mdm

因此，正如我过去的许多问题所表明的那样，我一直在努力从头开始实施 Apple MDM 服务。现在，它几乎可以在我们扔给它的任何 iOS 设备上完美运行，这很好。但是，当我们尝试注册一个 OS X 设备时，根据 Apple 的说法，它使用相同的 API，它会因意外错误而惨遭失败（与我假设的例外错误相反）。

system.log 中显示以下 2 行：

```
Mar 18 15:33:05 dizzy mdmclient[23234]: *** ERROR *** [Agent:510] ProcessOTABootstrapPayload (Unable to receive OTA identity profile <InternalError:1>)
Mar 18 15:33:05 dizzy System Preferences[93537]: *** ERROR *** [CPInstallerUI:510] Profile installation (Device Enrollment (com.capasystems.enrollment.handshake )) (Unable to receive OTA identity profile <InternalError:1> 
```

查看 SCEP 服务器日志，我可以看到它甚至没有尝试连接，然后确定它无法接收 OTA 身份配置文件。所以我在这里有点不知所措，我已经尝试解决网络问题，但同一网络上的 iOS 设备工作正常。我尝试过使用 SSL 连接和非 SSL 连接。没有不同。

如果有任何区别，我们将 JSCEP 用于 SCEP 服务器。为了让整个 MDM 在 OS X 上工作，有没有人最清楚什么未记录的额外基础设施或其他我失踪的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T15:20:07.340

我很长一段时间都遇到了同样的问题，我花了太多时间试图解决这个问题。

对我来说，当我能够成功注册一台机器（我的 macbook pro、我的个人机器）并且无法注册另一台机器（mac mini）时，答案就来了。事实证明，要成功注册，需要具有 CN=com.apple.idms.appleid.prd.XXX... 的有效证书。该证书似乎与已登录用户的 iCloud 帐户相关联，这意味着如果您未在计算机上登录 iCloud 帐户，则您没有该证书。在我 (a) 登录到有效的 iCloud 帐户并 (b) 尝试注册我们的 mdm 解决方案后，此证书出现在登录钥匙串中，并且注册顺利完成。

希望这可以帮助某人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:21:35.197

我会仔细检查网络问题。您的 Mac 和您的 iPhone 可以位于两个不同的网络（有线和无线）上，在这种情况下，它们可以在 SCEP 服务器上访问不同的端口。

此外，在这种情况下，如果您的 SCEP 服务器受 ssl 保护（例如坐在 Apache 后面），请确保您的 Mac 已在 System Roots 中安装了根证书。

顺便提一句。如果您有 Apache 之类的东西位于 SCEP 服务器的前端，请检查它的日志。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-18T12:31:20.820

该错误意味着设备无法检索有效负载中的身份证书。将 identitycertuuid 指向 scep payloaduuid 或您包含在有效负载中的 identity.p12 payloaduuid。

# ruby-on-rails - Gem 已安装但未加载

> ID：15479815
> 
> 赞同：0
> 
> 时间：2013-03-18T14:53:28.037
> 
> 标签：ruby-on-rails, gem, jruby

我正在尝试创建一个数据库，但我不断收到以下错误：

```
$jruby -S bundle exec rake db:create
[31mCould not find json-1.7.6 in any of the sources
[33mRun 'bundle install' to install missing gem. 
```

我已经运行了 bundle install （包括 jruby -S bundle install）。这篇[文章](https://stackoverflow.com/questions/3792080/ruby-gems-wont-load-even-though-installed)让我相信我的环境可能存在问题。但是，在查看了我的 Gem 路径和 Gem 环境之后，我认为情况并非如此。

这是我的宝石之路：

```
["c:/jruby-1.7.3/lib/ruby/gems/shared", "c:/Users/Jesse Flores/.gem/jruby/1.9"] 
```

还有我的宝石环境

```
RubyGems Environment:
  - RUBYGEMS VERSION: 1.8.24
  - RUBY VERSION: 1.9.3 (2013-02-21 patchlevel 385) [java]
  - INSTALLATION DIRECTORY: c:/jruby-1.7.3/lib/ruby/gems/shared
  - RUBY EXECUTABLE: c:/jruby-1.7.3/bin/jruby.exe
  - EXECUTABLE DIRECTORY: c:/jruby-1.7.3/bin
  - RUBYGEMS PLATFORMS:
    - ruby
    - universal-java-1.7
  - GEM PATHS:
     - c:/jruby-1.7.3/lib/ruby/gems/shared
     - c:/Users/Jesse Flores/.gem/jruby/1.9
  - GEM CONFIGURATION:
     - :update_sources => true
     - :verbose => true
     - :benchmark => false
     - :backtrace => false
     - :bulk_threshold => 1000
     - "install" => "--no-rdoc --no-ri --env-shebang"
     - "update" => "--no-rdoc --no-ri --env-shebang"
  - REMOTE SOURCES:
     - http://rubygems.org/ 
```

此外，我可以在 Gemfile.lock 文件中看到 json-1.7.6 和 json-1.7.6-java。

关于这里发生了什么的任何想法？

谢谢！

哦，我用的是Windows 8。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:09:37.757

偶尔会发生，在发布问题后几分钟就找到了帮助我解决问题的正确帖子。

Kaleth 在这篇文章中的回答：[运行 rake 时缺少宝石](https://stackoverflow.com/questions/7381407/missing-gem-when-running-rake)让我指出了正确的方向。使用 jruby，它实际上是这样的：

```
jruby -S bundle install --path=vendor/bundle 
```

之后， rake -T 正常工作。

# java - 部署到 App Engine 时，指向 JSP 页面的 GWT 链接失败

> ID：15479816
> 
> 赞同：0
> 
> 时间：2013-03-18T14:53:30.593
> 
> 标签：java, google-app-engine, jsp, gwt, hyperlink

我一直在将我的 GWT 应用程序链接到用 JSP 编写的页面，用于多文件上传。

在新选项卡中打开上传页面的 gwt 代码是：

```
Window.open("/secure/newuploads", "_blank", ""); 
```

这在开发模式下工作正常，但我今天部署到 App Engine 并且链接不起作用：显示的页面是空白的，没有错误代码。

我的 JSP 和 JS 文件位于`\war`. 有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:19:58.890

假设战争的布局就像

```
-> webapps
 -> sample
  -> gwtsample
  -> jsp
  -> images
  -> css 
```

您应该使用[GWT.getHostPageBaseURL()](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/core/client/GWT.html#getHostPageBaseURL%28%29)到达示例应用程序的根目录，然后移动到相关的 jsp 文件。参考下面的图片来区分**模块 base url**和**hostpage url**。

![在此处输入图像描述](../Images/78f1253ac05988496d37f9045ecf9049.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T16:08:32.143

如果重定向 servlet 使用 HttpServlet.doPost() 和 doGet() 而不是 service()，问题就消失了。 getMethod()=="POST")

在 google 的服务器上，这些不起作用：

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-18T15:01:28.500

你必须在那里给出完整的路径。改成：

```
 Window.open(GWT.getModuleBaseURL() + "secure/newuploads", "_blank", ""); 
```

经历一次：[获取我的页面的 URL，API。](http://google-web-toolkit.googlecode.com/svn/javadoc/2.5/com/google/gwt/core/client/GWT.html)

有关您面临的问题的更多描述，请参阅此[讨论](https://stackoverflow.com/questions/9286204/gwt-getmodulebaseurl-returns-an-incorrect-value)。

# qt - 为什么 Qt 的 addWidget() 可以接受 1 个参数情况？

> ID：15479817
> 
> 赞同：0
> 
> 时间：2013-03-18T14:53:46.497
> 
> 标签：qt

```
 statusBar()->addWidget(locationLabel);
   statusBar()->addWidget(formulaLabel, 1); 
```

上面的代码来自一个 Qt 程序。下面的描述来自我按下 F1 时的 Qt 帮助`addWidget`。如您所见，`addWidget`应接受 2 个参数。我的问题是为什么上面第一句话可以正常执行？

> void QStatusBar::addWidget ( QWidget * widget, int stretch = 0 ) 将给定的小部件添加到此状态栏，如果它还不是此 QStatusBar 对象的子级，则重新设置小部件的父级。当状态栏增长和缩小时，stretch 参数用于计算给定小部件的合适大小。默认拉伸因子为 0，即为小部件提供最小空间。
> 
> 小部件位于第一个永久小部件的最左侧（请参阅 addPermanentWidget()），并且可能会被临时消息遮挡。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T14:56:58.407

这是因为 C++ 有`default argument`s 的概念，这意味着一个函数声明为

```
void f(int i, int j=1); 
```

可以调用

```
f(42); 
```

和

```
f(42,43); 
```

在第一种情况下，函数调用等价于

```
f(42,1); 
```

在你的情况下，

```
addWidget(label); 
```

相当于

```
addWidget(label,0); 
```

# java - 在 Java Breakout Game 中为 JPanel 设置背景图像

> ID：15479820
> 
> 赞同：3
> 
> 时间：2013-03-18T14:53:52.773
> 
> 标签：java, swing, jpanel, paint, imageicon

好的，这似乎是一个非常简单的任务，但我似乎无法得到它。我想要的只是有一个图像（jpg）作为我的突破游戏的背景。这是我的代码：

主类：

```
import java.awt.BorderLayout;
import java.awt.Color;
import javax.swing.ImageIcon;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class Breakout extends JFrame {

    public Breakout()
    {             
        add(new BreakBoard());
        setTitle("Breakout");
        setSize(BreakCommons.WIDTH, BreakCommons.HEIGTH);
        setLocationRelativeTo(null);
        setIgnoreRepaint(true);
        setResizable(false);
        setVisible(true);
    }

    public static void main(String[] args) {
        new Breakout();
    }
} 
```

板级：

```
import java.awt.Color;
import java.awt.Font;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Point;
import java.awt.Toolkit;
import java.awt.event.KeyAdapter;
import java.awt.event.KeyEvent;
import java.util.Timer;
import java.util.TimerTask;
import javax.swing.ImageIcon;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class BreakBoard extends JPanel implements BreakCommons {

    ImageIcon icon = new ImageIcon("../pacpix/love.jpg"); 
    Timer timer;
    String message = "Game Over";
    BreakBall ball;
    BreakPaddle paddle;
    BreakBrick bricks[];
    boolean ingame = true;
    int timerId;

    public BreakBoard() {
        setOpaque(false);
        addKeyListener(new TAdapter());
        setFocusable(true);
        //setBackground(Color.white);
        bricks = new BreakBrick[30];
        setDoubleBuffered(true);
        timer = new Timer();
        timer.scheduleAtFixedRate(new ScheduleTask(), 1000, 10);
    }

    public void paint(Graphics g) {
        super.paint(g);
        g.drawImage(icon.getImage(), 10, 10, this);

        if (ingame) {
            g.drawImage(ball.getImage(), ball.getX(), ball.getY(),
                        ball.getWidth(), ball.getHeight(), this);
            g.drawImage(paddle.getImage(), paddle.getX(), paddle.getY(),
                        paddle.getWidth(), paddle.getHeight(), this);

            for (int i = 0; i < 30; i++) {
                if (!bricks[i].isDestroyed())
                    g.drawImage(bricks[i].getImage(), bricks[i].getX(),
                                bricks[i].getY(), bricks[i].getWidth(),
                                bricks[i].getHeight(), this);
            }
        } else {

            Font font = new Font("Verdana", Font.BOLD, 18);
            FontMetrics metr = this.getFontMetrics(font);

            g.setColor(Color.BLACK);
            g.setFont(font);
            g.drawString(message,
                         (BreakCommons.WIDTH - metr.stringWidth(message)) / 2,
                         BreakCommons.WIDTH / 2);
        }

        Toolkit.getDefaultToolkit().sync();
        g.dispose();
    } 
```

所以图像存储在变量中`icon`，并且位于我的源文件（连同我的类）中，所以我知道路径是正确的。我尝试将框架和面板设置为，`setOpaque(false)`但这只是将背景更改为默认灰色。我可以通过 轻松设置背景颜色`setBackground(Color.white);`，但是如何设置图像？

我尝试将图像放在 JLabel 中，然后将其添加到 JPanel，但没有产生任何结果。我将不胜感激，并在此先感谢！我可以根据需要提供更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-03T10:45:57.267

简单的方法首先为 jpane 创建一个单独的类

```
import java.awt.Color;
import java.awt.GradientPaint;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.Image;
import java.awt.Paint;
import javax.swing.ImageIcon;
import javax.swing.JPanel;

public class JPanelDemo extends JPanel {
    /**
     * 
     */
     private static final long serialVersionUID = 1L;
     private static final Color BACKGROUND      = Color.black;
     private static final Color BACKGROUND_2    = Color.WHITE;
     String path="/img/background.jpg";

    @Override
    protected void paintComponent(Graphics g) {
        Graphics2D graphics = (Graphics2D) g.create();        
        int midY = 100;
        Paint topPaint = new GradientPaint(0, 0, BACKGROUND,0, midY, BACKGROUND_2);
        graphics.setPaint(topPaint);
        graphics.fillRect(0, 0, getWidth(), midY);        
        Paint bottomPaint = new GradientPaint(0, midY + 1, BACKGROUND_2,0, getHeight(), BACKGROUND);
        graphics.setPaint(bottomPaint);
        graphics.fillRect(0, midY, getWidth(), getHeight());
        Image img = new ImageIcon(getClass().getResource(path)).getImage();
        int imgX = img.getWidth(null);
        int imgY = img.getHeight(null);
        graphics.drawImage(img, (getWidth() - imgX) / 2, (getHeight() - imgY) / 2, imgX, imgY, null);
      //  graphics.dispose();
    }
} 
```

如何使用它

```
JPanelDemo contentPane = new JPanelDemo(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T16:18:40.603

我终于让它工作了！

```
public class BreakBoard extends JPanel implements BreakCommons {
    Image love;

    public BreakBoard() {
        ImageIcon icon = new ImageIcon(this.getClass().getResource("../pacpix/love.jpg"));
        love = icon.getImage();
    }

    public void paint(Graphics g) {
        super.paint(g);
        Graphics2D g2d = (Graphics2D) g;
        g2d.drawImage(love, 10, 10, null); 
    }
} 
```

对于未来的搜索或好奇的搜索，我使用了[http://zetcode.com/tutorials/javagamestutorial/basics/](http://zetcode.com/tutorials/javagamestutorial/basics/)。适合初学者的好网站！（或者那些需要愚蠢才能理解的人）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:16:26.320

这是一个带有背景图像的 JPanel。在您的代码中使用 IPanel 代替 JPanel。根据需要进行调整以满足您的需求。

```
public class IPanel extends JPanel {
private static final long serialVersionUID = 1L;
private Image             imageOrg         = null;
private Image             image            = null;
{
    addComponentListener(new ComponentAdapter() {
        @Override
        public void componentResized(final ComponentEvent e) {
            final int w = IPanel.this.getWidth();
            final int h = IPanel.this.getHeight();
            image = w > 0 && h > 0 ? imageOrg.getScaledInstance(w, h, Image.SCALE_SMOOTH) : imageOrg;
            IPanel.this.repaint();
        }
    });
}

public IPanel(final Image i) {
    imageOrg = i;
    image = i;
}

@Override
public void paintComponent(final Graphics g) {
    super.paintComponent(g);
    if (image != null)
        g.drawImage(image, 0, 0, null);
}
} 
```

例子：

```
 final JPanel j = new IPanel(image);
    j.setLayout(new FlowLayout());
    j.add(new JButton("YoYo"));
    j.add(new JButton("MaMa"));
    j.add(new JLabel(icon)); 
```

产生：

![在此处输入图像描述](../Images/4c12056154817dc1d13dee14f77014eb.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-20T05:11:28.627

```
JPanel panel = new JPanel()    
{       
          @Override
          public void paintComponent(Graphics g) 
          {     
                g.drawImage(ImageObject, 0, 0, null);
          }
}; 
```

# javafx-2 - JavaFX、MediaPlayer——音量问题！为什么 mediaPlayer 的音量不一点一点地变化？

> ID：15479821
> 
> 赞同：3
> 
> 时间：2013-03-18T14:53:54.873
> 
> 标签：javafx-2

我将Volume设置为0.0，然后在while循环中一点一点地改变音量。然而，音量从 0.0 跳到 1.0 ？如何顺利更改音量？我试过了

```
public class EngineSound extends Application {

    public static void main(String[] args) {
        launch(args);
    }

    @Override
    public void start(Stage primaryStage) throws Exception {
        mp3File = new File(metronom);
        media = new Media(mp3File.toURI().toURL().toString());
        mediaPlayer = new MediaPlayer(media);
        mediaView = new MediaView(mediaPlayer);
        mediaPlayer.play();
        mediaPlayer.setVolume(0.0);
        slider = new Slider();

        slider.valueProperty().addListener(new ChangeListener<Number>() {
            public void changed(ObservableValue<? extends Number> ov, Number old_val, Number new_val) {
                EventQueue.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        mediaPlayer.setVolume(slider.getValue());

                    }
                });
            }
        });

        double count = 1;
        while (count != 101) {
            for (int i = 0; i < 100000000; i++) {

            }
            slider.setValue(count / 100);
            count++;
            System.out.println(mediaPlayer.getVolume());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T19:46:45.363

您的代码有一些问题。

*   JavaFX 代码应该在 JavaFX 应用程序线程上执行，而不是在 Swing 事件调度线程上执行。

不要使用`EventQueue.invokeLater`在 Swing 线程上执行，而是使用[Platform.runLater](http://docs.oracle.com/javafx/2/api/javafx/application/Platform.html#runLater%28java.lang.Runnable%29)在 JavaFX 线程上执行。

*   根本没有理由使用 Swing 事件调度线程。

您的程序只使用 JavaFX 控件，所以不要在 Swing 线程上运行任何东西。

*   您通常不需要在`ChangeListener`.

即使使用`EventQueue.invokeLater`是错误的，在这种情况下，您甚至都不需要这样做，`Platform.runLater`因为无论如何只有 JavaFX 应用程序线程应该修改 Slider 值。您可以在 JavaFX[节点](http://docs.oracle.com/javafx/2/api/javafx/scene/Node.html)文档中看到一条规则：

> 应用程序必须在 JavaFX 应用程序线程上将节点附加到场景，并修改已附加到场景的节点。

*   不要忙于等待 JavaFX 应用程序线程。

你数到一亿的循环只会阻塞应用程序线程，导致 UI 冻结，因为控制永远不会返回给框架来更新 UI。

*   不要在循环中更改滑块值。

在 UI 控件上设置值后，必须将控件返回给 JavaFX 框架，以允许值更改反映在控件中并反映给用户。

试试下面的代码，它通过使用[Timeline](http://docs.oracle.com/javafx/2/animations/basics.htm#CJAFADFJ)和[Binding](http://docs.oracle.com/javafx/2/binding/jfxpub-binding.htm)来解决上述所有问题。

```
import javafx.animation.*;
import javafx.application.Application;
import javafx.beans.binding.Bindings;
import javafx.event.*;
import javafx.geometry.Orientation;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.*;
import javafx.scene.media.*;
import javafx.stage.Stage;
import javafx.util.Duration;

public class EngineSound extends Application {
  private static final String MEDIA_URL = 
    "http://download.oracle.com/otndocs/products/javafx/oow2010-2.flv";

  private static final Duration FADE_DURATION = Duration.seconds(2.0);

  public static void main(String[] args) { launch(args); }

  @Override public void start(Stage stage) throws Exception {
    final MediaPlayer mediaPlayer = new MediaPlayer(
      new Media(
        MEDIA_URL
      )
    );
    final MediaView mediaView = new MediaView(mediaPlayer);

    HBox layout = new HBox(5);
    layout.setStyle("-fx-background-color: cornsilk; -fx-padding: 10;");
    layout.getChildren().addAll(
      createVolumeControls(mediaPlayer), 
      mediaView
    );
    stage.setScene(new Scene(layout, 650, 230));
    stage.show();           

    mediaPlayer.play();
  }

  public Region createVolumeControls(final MediaPlayer mediaPlayer) {
    final Slider volumeSlider = new Slider(0, 1, 0);
    volumeSlider.setOrientation(Orientation.VERTICAL);

    mediaPlayer.volumeProperty().bindBidirectional(volumeSlider.valueProperty());

    final Timeline fadeInTimeline = new Timeline(
      new KeyFrame(
        FADE_DURATION,
        new KeyValue(mediaPlayer.volumeProperty(), 1.0)
      )
    );

    final Timeline fadeOutTimeline = new Timeline(
      new KeyFrame(
        FADE_DURATION,
        new KeyValue(mediaPlayer.volumeProperty(), 0.0)
      )
    );

    Button fadeIn = new Button("Fade In");
    fadeIn.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        fadeInTimeline.play();
      }
    });
    fadeIn.setMaxWidth(Double.MAX_VALUE);

    Button fadeOut = new Button("Fade Out");
    fadeOut.setOnAction(new EventHandler<ActionEvent>() {
      @Override public void handle(ActionEvent t) {
        fadeOutTimeline.play();
      }
    });
    fadeOut.setMaxWidth(Double.MAX_VALUE);

    VBox controls = new VBox(5);
    controls.getChildren().setAll(
      volumeSlider,
      fadeIn,
      fadeOut
    );
    controls.setAlignment(Pos.CENTER);
    VBox.setVgrow(volumeSlider, Priority.ALWAYS);

    controls.disableProperty().bind(
      Bindings.or(
        Bindings.equal(Timeline.Status.RUNNING, fadeInTimeline.statusProperty()),
        Bindings.equal(Timeline.Status.RUNNING, fadeOutTimeline.statusProperty())
      )
    );

    return controls;
  }
} 
```

该代码控制视频，但使其仅播放音频只需将媒体 URL 设置为仅音频格式，例如 mp3 或 aac。

![音量控制样本](../Images/220df97f56969134dc5738657ffbf7f5.png)

# c# - 在 windows phone 8 的网格视图中显示列表

> ID：15479826
> 
> 赞同：1
> 
> 时间：2013-03-18T14:54:21.403
> 
> 标签：c#, xaml, windows-phone-8

如何在 Windows Phone 8 中为应用程序显示两列列表？

项目.xaml.cs：

```
public async void Initi()
{
     var itemsManagement = new ItemsManagement();
     var itemList = await itemsManagement.GetAllItems();
     var templist = from c in itemList.Data orderby c.Name, c.Id ascending select c;
     NameList.ItemsSource = templist;
} 
```

项目.xaml：

```
<ListBox x:Name="NameList">
       <ListBox.ItemTemplate>
            <DataTemplate>
                  <TextBlock Text="{Binding Path=Name}">
                  </TextBlock>
             </DataTemplate>
       </ListBox.ItemTemplate>
 </ListBox> 
```

此解决方案在一列中显示我的列表，我希望在两列中显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-04T22:56:25.130

使用 LongListSelector，并将[LayoutMode](https://msdn.microsoft.com/en-us/library/windows/apps/microsoft.phone.controls.longlistselector.layoutmode(v=vs.105).aspx)设置为 Grid 并将[GridCellSize](https://msdn.microsoft.com/en-us/library/windows/apps/microsoft.phone.controls.longlistselector.gridcellsize(v=vs.105).aspx)设置为页面宽度的一半。

```
<phone:LongListSelector
    LayoutMode="Grid"
    GridCellSize="200,20"
    ItemsSource="{Binding Items}"
    ItemTemplate="{StaticResource ItemTemplate}"
</phone:LongListSelector> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T11:40:35.250

您是否尝试过这样做：

```
<ListBox x:Name="NameList">
   <ListBox.ItemTemplate>
        <DataTemplate>
           <StackPanel Orientation="Horizontal">
              <TextBlock Text="{Binding Path=Name}" Width="200"/>
              <TextBlock Text="{Binding Path=Id}"/>
           </StackPanel>
         </DataTemplate>
   </ListBox.ItemTemplate>
 </ListBox> 
```

# javascript - 单选按钮名称更改

> ID：15479827
> 
> 赞同：2
> 
> 时间：2013-03-18T14:54:23.390
> 
> 标签：javascript, asp.net, html

我创建了 2 个单选按钮

```
<input type="radio" name="ApprovalGroup" runat="server" id="ApprovedOnly" value="true" />Approved
<input type="radio" name="ApprovalGroup" runat="server" id="UnapprovedOnly" value="false" />Unapproved 
```

并且能够从 js 访问它们`$("input[name=ApprovalGroup]:checked").val()`但是我需要添加`runat="server"`以便我可以访问后面代码中的单选按钮。

我遇到的问题是由于内容占位符，单选按钮名称正在更改。我正在使用`ClientIDMode="Static"`，但它只保护 id 值，而不是名称。单选按钮呈现为

```
<input value="true" name="ctl00$cphContent$ApprovalGroup" type="radio" id="ApprovedOnly" />Approved
<input value="false" name="ctl00$cphContent$ApprovalGroup" type="radio" id="UnapprovedOnly" />Unapproved 
```

是否可以防止名称更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:57:13.843

您可以使用`$=`选择器，它选择值以给定子字符串结尾的属性：

```
$("input[name$=ApprovalGroup]:checked") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T14:57:15.147

.NET 需要该名称用于自己的目的，但这并不能阻止您为自己使用 CSS 类名称。

这样你就可以使用`$('.classname').val()`. 您可以为字段使用单独的类名，或共享它们以组成组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-18T15:08:26.163

```
$("input[name*=ApprovalGroup]:checked") 
```

是一个很好的解决方案，但如果有另一个输入包含这些单词，则可能会发生冲突。所以更安全的解决方案是使用你自己的属性。如;

```
 <input type="radio" name="ApprovalGroup" data-group="group1" runat="server" id="ApprovedOnly" value="true" />Approved
 <input type="radio" name="ApprovalGroup" data-group="group1" runat="server" id="UnapprovedOnly" value="false" />Unapproved 
```

然后使用下面的过滤器；

```
$("input[data-group='group1']:checked") 
```

# php - jQuery Ajax 似乎正在发布但无法捕获值

> ID：15479829
> 
> 赞同：2
> 
> 时间：2013-03-18T14:54:30.813
> 
> 标签：php, jquery, ajax

我在这里想念什么？

我正在尝试通过 jQuery AJAX POST 传递字符串数组。

```
var json = JSON.stringify( selectedTags );
var data = json; 
```

...

```
var apiCall = $.ajax({
    url: "service-getemails-multiple.php",
    data: data,
    type: "POST"
    //beforeSend: alert(data)
}).done(function(data) {
    $(".ui-dialog-titlebar-close").show();
    var html = '<textarea style="width: 100%; height: 90%" id="emailsTextbox">' + data + '</textarea>';
    html += data;
    html += "\" target=\"new\">Send Email</a></p>";
    $("#dialog").html(html);
    $("#emailsTextbox").focus();
    $("#emailsTextbox").select();
}); 
```

我的捕手（“service-getemails-multiple.php”）目前非常简单，我不明白为什么它无法捕获 AJAX 请求（POST）。

```
<?php

var_dump($_POST);

?> 
```

在 Firebug 中，我可以看到在 XHR/Post 下作为参数和源下传递的值。如果我取消注释“beforeSend：警报（数据）”，警报值就好了。

那么我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:01:06.770

我认为该功能对`data: data`部分感到困惑。

试试这个

```
var apiCall = $.ajax({
    url: "service-getemails-multiple.php",
    data: json, // <!-- Use json instead. Its the same thing
    type: "POST"
    //beforeSend: alert(data)
}).done(function(data) {
    $(".ui-dialog-titlebar-close").show();
    var html = '<textarea style="width: 100%; height: 90%" id="emailsTextbox">' + data + '</textarea>';
    html += data;
    html += "\" target=\"new\">Send Email</a></p>";
    $("#dialog").html(html);
    $("#emailsTextbox").focus();
    $("#emailsTextbox").select();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:01:14.273

试试这个：

```
var json = JSON.stringify( selectedTags );
var thedata = json;
....
var apiCall = $.ajax({
    url: "service-getemails-multiple.php",
    data: {mydata: thedata},
    type: "POST"
    //beforeSend: alert(data)
}).done(function(data) {
    $(".ui-dialog-titlebar-close").show();
    var html = '<textarea style="width: 100%; height: 90%" id="emailsTextbox">' + data + '</textarea>';
    html += data;
    html += "\" target=\"new\">Send Email</a></p>";
    $("#dialog").html(html);
    $("#emailsTextbox").focus();
    $("#emailsTextbox").select();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:06:15.827

试试这个 { dataType: 'json'}

它看起来像 ** var apiCall = $.ajax({ url: "service-getemails-multiple.php", data: data, type: "POST", dataType: 'json', //beforeSend: alert(data ) }).done(function(data) { $(".ui-dialog-titlebar-close").show(); var html = '' + data + ''; html += data; html += "\ " target=\"new\">发送电子邮件

"; $("#dialog").html(html); $("#emailsTextbox").focus(); $("#emailsTextbox").select(); });**

# matlab - 如何在主程序中使用嵌套函数作为优化主程序的遗传算法的约束？

> ID：15479836
> 
> 赞同：0
> 
> 时间：2013-03-18T14:54:55.173
> 
> 标签：matlab, genetic-algorithm

我有一个称为使用嵌套函数`loadflow`计算数量的主程序。`a,b,c and d`我必须尽量减少`loadflow`在 matlab 中使用简单的 GA。如何将计算`a,b,c and d`为约束的嵌套函数传递给 GA？

```
 function [ main ] = cost( DGvect )
     %load variables like cap_factor,puload1 etc here
      DGmat=reshape(10000*DGvect,6,[]);
      CDG=sum((100*500*[1 2 3 7 9 10])*DGmat);
      ODG=sum(87600*[4.5 4 5 5 1 0.5]*(DGmat.*repmat([.35 .55 .35 .4 .2 .25]',1,32)));
      [Vbus,Il,Ploss]=loadflow((1.04^10)*puload1,cap_factor(2,:),DGmat);
      CPE=CPV*abs(real(Il(1,1)))*8760*10.4e3;
      CEL=Ploss*(10.4e3)*CPV*8760;
      main=CDG+ODG+CPE+CEL;
    end 
```

有一个带有输入参数（Vbus、Il、Ploss）的函数，它返回 RIv、RIloss、RIflow 和 RIscc。我需要候选 DGvect 的 RI <1（约束）是一个有效的解决方案。

# c# - ASP.NET C# 将数据导出为 CSV 格式，不保留双引号

> ID：15479838
> 
> 赞同：1
> 
> 时间：2013-03-18T14:55:04.100
> 
> 标签：c#, asp.net, csv

我正在尝试使用 ASP.NET C# 将一些数据导出到 CSV。
我使用这段代码：

```
private void writeCSVfile(DataTable theData, string fileName)
{
     StringBuilder dataString = new StringBuilder();
     string currentId = Guid.Empty.ToString();
     HttpContext context = HttpContext.Current;
     context.Response.Clear();

     foreach (DataColumn column in GTDSSearchData.Columns)
     {
        if (column.ColumnName.ToString().ToLower() != "the_id")
        {
            dataString.Append(column.ColumnName + ",");
        }
     }
     dataString.Remove(dataString.Length - 1, 1);
     dataString.Append(Environment.NewLine);

     foreach (DataRow row in GTDSSearchData.Rows)
     {
        currentId = row[1].ToString();
        for (int i = 1; i < GTDSSearchData.Columns.Count; i++)
        {
            dataString.Append(row[i].ToString().Replace(",", string.Empty) + ",");
        }
        dataString.Remove(dataString.Length - 1, 1);
        dataString.Append(Environment.NewLine);
    }

    context.Response.Write(dataString.ToString());
    context.Response.ContentType = "text/csv";
    context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + fileName + ".csv");
    context.Response.End();
} 
```

我的数据字符串是

```
test1, 1  
"hello world", 10  
test2, 2 
```

结果 CSV 文件包含这些内容

```
test1, 1  
hello world, 10  
test2, 2 
```

你知道为什么我的双引号消失了，以及在导出到 CSV 文件时如何保留它们。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:17:57.027

您需要将每个引号括在双引号中。换句话说，你需要让你的程序这样写：

```
test1, 1  
"""hello world""", 10  
test2, 2 
```

然后它将保留双引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:31:47.967

使用转义序列，例如 \" - 双引号。这可以帮助你[https://stackoverflow.com/a/323670/1600531](https://stackoverflow.com/a/323670/1600531)

# javascript - 将 JSON.Stringified 数据插入 MongoDB

> ID：15479840
> 
> 赞同：4
> 
> 时间：2013-03-18T14:55:05.323
> 
> 标签：javascript, json, node.js, http, mongodb

```
var obj = {};
obj.url = hostNames[i];
obj.statusCode = res.statusCode;
obj.headers = res.headers;

db.collection.save(JSON.stringify(obj, null, 2)); 
```

我目前正在尝试通过 Node.js 请求 HTTP 响应，然后使用`JSON.stringify`（一种将事物转换为 JSON 文档格式的方法）将该输出解析为 MongoDB。出于某种原因，我在 MongoDB 中得到了一些奇怪的输出，它是这样的：

```
> db.scrape.find()
{ "_id" : ObjectId("51472849650593014a3c20da"), "0" : "{", "1" : "\n", "2" : " ", "3" : " ", "4" : "\"", "5" : "u", "6" : "r", "7" : "l", "8" : 
```

我认为它正在做的是将每个字符解释为一个新变量。我的代码做错了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T15:11:22.287

为什么要对obj进行字符串化？API 需要一个 javascript 对象。

做就是了：

```
db.collection.save(obj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:08:42.783

你检查过 JSON.stringify(obj, null, 2) 的输出了吗？我想这会返回预期的结果。

出现此错误的可能原因有两种：存储文档的方式错误或检索文档的方式错误

在[http://docs.mongodb.org/manual/tutorial/getting-started/](http://docs.mongodb.org/manual/tutorial/getting-started/) (mongodb getting-started) 没有提到在调用 insert 或其他任何东西之前将文档转换为 json。

您是否尝试过像 db.collection.save({'content': JSON.stringify(obj, null, 2)}); 那样存储它？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-27T16:52:49.357

我在 Meteor 项目中遇到了同样的问题。“response”是一个包含 json 格式数据的字符串。“保存”方法不起作用。我只是通过以下方式创建了一个新文档：

```
 obj = JSON.parse(response);
 db.collection.insert(obj); 
```

# c++ - 如何在 GPU 内存中连续存储矩阵并在需要时使用它？

> ID：15479845
> 
> 赞同：1
> 
> 时间：2013-03-18T14:55:20.937
> 
> 标签：c++, cuda, thrust

我正在尝试通过 CUDA 并行化某些功能，该功能被多次调用。每次它处理相同的矩阵。我想将此矩阵存储在 GPU 内存中，当调用函数时，我想将向量上传到 GPU 并将其乘以矩阵并返回结果。我更喜欢 C++ 模板风格，所以推力具有更高的优先级。

请向我推荐一些功能来做到这一点，如果可能的话，请推荐一些小的说明样本。我不提供代码不是因为它是一个秘密，而是因为它的复杂性和庞大的规模。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:02:07.293

对于推力，您正在寻找的是 device_vector、device_ptr 等。

[从推力：：设备向量到原始指针并返回？](https://stackoverflow.com/questions/7678995/from-thrustdevice-vector-to-raw-pointer-and-back)

但为了高效地对 GPU 进行编程，我建议您也熟悉 CUDA 内存类型：

[http://www.cvg.ethz.ch/teaching/2011spring/gpgpu/cuda_memory.pdf（pdf](http://www.cvg.ethz.ch/teaching/2011spring/gpgpu/cuda_memory.pdf)警告）

您正在寻找的内存类型是“全局内存”。请记住，所有这些内存都存储在 GPU 卡上，而不是 CPU 卡上，因此它只能用于内核和设备函数调用。

设备指针上的所有仿函数只需要使用**设备**标签进行编译（例如一元操作）：

```
template <typename T>
struct square
{   
__host__ __device__
    T operator()(const T& x) const {
        return x * x;
}
}; 
```

# ruby-on-rails - 从连接表中检索数据

> ID：15479850
> 
> 赞同：0
> 
> 时间：2013-03-18T14:55:45.013
> 
> 标签：ruby-on-rails, activerecord

我是 RoR 的新手，我正在尝试在连接表上编写一个查询，以检索我需要的所有数据

```
class User < ActiveRecord::Base
    has_many :forms, :through => :user_forms
end

class Form < ActiveRecord::Base
    has_many :users, :through => :user_forms
end 
```

在我的控制器中，我可以像这样成功检索用户的所有形式：

```
User.find(params[:u]).forms 
```

这给了我所有的 Form 对象

但是，我想在我的连接表 (user_forms) 中添加一个新列，它告诉表单的状态（关闭、已填写等）。

是否可以修改我的查询，以便它也可以从 user_forms 表中检索列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:04:02.480

`find_by_sql`可以使用和文字 sql来做到这一点。但是，我不知道如何将 rails 查询方法正确链接在一起以创建相同的查询。

但这是我之前为朋友整理的一个修改示例：

```
@user = User.find(params[:u])
@forms = @user.forms.find_by_sql("SELECT forms.*, user_forms.status as status FROM forms INNER JOIN user_forms ON forms.id = user_forms.form_id WHERE (user_forms.user_id = #{@user.id});") 
```

然后你就可以做

```
@forms.first.status 
```

它的行为就像`status`只是`Form`模型的一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:12:50.347

有可能的。将`status`列添加到 后`user_forms`，请尝试以下操作

```
>> user = User.first
>> closed_forms = user.forms.where(user_forms: { status: 'closed' }) 
```

请注意，您不需要添加连接，因为当您调用`user.forms`.

更新：要将`user_forms`表中的属性添加到表单中，请尝试以下操作

```
>> closed_forms = user.forms.select('forms.*, user_forms.status as status')
>> closed_forms.first.status # should return the status of the form that is in the user_forms table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:02:41.520

首先，我认为你犯了一个错误。

当您有 2 个具有`has_many`关系的模型时，您应该设置一个`has_and_belongs_to_many`关系。

在大多数情况下，2 个模型由

*   `has_many`-`belongs_to`
*   `has_one`-`belongs_to`
*   `has_and_belongs_to_many`-`has_and_belongs_to_many`

`has_and_belongs_to_many`是解决方案之一。但是，如果您选择它，则必须创建一个名为`forms_users`. 选择一个`has_and_belongs_to_many`意味着您不能在连接表上设置状态。

为此，您必须添加一个连接表，其中包含一个 form_id、一个 user_id 和一个状态。

```
class User < ActiveRecord::Base
    has_many :user_forms
    has_many :forms, :through => :user_forms
end

class UserForm < ActiveRecord::Base
    belongs_to :user
    belongs_to :form
end

class Form < ActiveRecord::Base
    has_many :user_forms
    has_many :users, :through => :user_forms
end 
```

然后，你可以得到

```
User.find(params[:u]).user_forms 
```

或者

```
UserForm.find(:all,
  :conditions => ["user_forms.user_id = ? AND user_forms.status = ?",
     params[:u],
     'close'
  )
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-18T15:09:38.583

鉴于状态实际上是 Form 的一个属性，您可能希望将状态添加到 Forms 表而不是连接表。

然后，当您使用查询检索表单时，它们将已经具有检索到的状态信息，即

```
User.find(params[:u]).forms.each{ |form| puts form.status } 
```

此外，如果您想查找具有特定状态的给定用户的所有表单，您可以使用如下查询：

`User.find(params[:u]).forms.where(status: 'closed')`

# maven - Maven 发布：批处理模式下的下一个开发版本

> ID：15479851
> 
> 赞同：13
> 
> 时间：2013-03-18T14:55:48.423
> 
> 标签：maven, maven-release-plugin

我已经配置了一个 Jenkins 作业来自动发布我的 Maven 项目。这是通过以下方式完成的：`mvn --batch-mode clean release:prepare release:perform` 在批处理模式下，将自动确定发布版本和开发版本。这正是我想要的。

问题是我想增加版本的第二个而不是第三个。所以当我发布1.2.0版本的时候，下一个开发版本肯定是1.3.0-SNAPSHOT。不是 1.2.1-SNAPSHOT。添加命令行参数不是一种选择，因为这迫使我不断地编辑构建作业。

有关如何更改用于确定下一个开发版本的算法的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2018-02-14T22:28:24.780

我知道这是一个有点旧的帖子，但我在网上的任何地方都没有找到我真正喜欢的答案，我能够想出一些可能对其他人有用的东西......

我想在 OP 状态下增加 minorVersion，我可以通过在我的项目 POM 中结合使用构建助手插件（解析版本）和发布插件来实现。请注意 POM 和 Maven 运行属性中引用的“初始化”阶段...

这是POM的摘录，我们使用构建助手插件来解析我们可以在发布插件中引用的版本......

```
<plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>${maven.build.helper.plugin.version}</version>
                <executions>
                    <execution>
                        <id>parse-versions-for-release</id>
                        <phase>initialize</phase>
                        <goals>
                            <goal>parse-version</goal>
                        </goals>
                        <configuration>
                            <propertyPrefix>parsedVersion</propertyPrefix>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-release-plugin</artifactId>
                <version>${maven.release.plugin.version}</version>
                <configuration>
                    <autoVersionSubmodules>true</autoVersionSubmodules>
                    <tagNameFormat>@{project.artifactId}-@{project.version}</tagNameFormat>
                    <useReleaseProfile>false</useReleaseProfile>
                    <developmentVersion>${parsedVersion.majorVersion}.${parsedVersion.nextMinorVersion}.0-SNAPSHOT</developmentVersion>
                </configuration>
            </plugin> 
```

现在我们可以运行一个非常正常的版本，但添加“初始化”阶段以触发版本解析（并确保它在查找解析的版本之前发生）......

```
mvn initialize release:clean release:prepare release:perform 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-10-24T10:40:01.620

您可以使用`build-helper-maven-plugin`. 只需在 pom.xml 中添加以下内容：

```
 <plugin>
        <groupId>org.codehaus.mojo</groupId>
        <artifactId>build-helper-maven-plugin</artifactId>
        <version>${maven.build.helper.plugin.version}</version>
    </plugin> 
```

并将命令更改为

```
mvn --batch-mode clean build-helper:parse-version release:prepare release:perform -DdevelopmentVersion=${parsedVersion.majorVersion}.${parsedVersion.nextMinorVersion}.0-SNAPSHOT 
```

（请注意，根据您运行此命令的环境，您可能需要`$`使用`\`:转义`\$`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-08-27T02:53:03.400

mojo`projectVersionPolicyId`中提供了一个参数： [http ://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#projectVersionPolicyId](http://maven.apache.org/maven-release/maven-release-plugin/prepare-mojo.html#projectVersionPolicyId)`release:prepare`

可能没有内置的版本策略来满足您的需求，但是您可以通过实现接口[VersionPolicy](https://maven.apache.org/maven-release/maven-release-api/apidocs/org/apache/maven/shared/release/policy/version/VersionPolicy.html)来开发自己的版本策略。您可以看到[maven-release-yearly-policy](https://github.com/ncredinburgh/maven-release-yearly-policy/blob/master/src/main/java/com/ncredinburgh/maven/release/policy/YearlyVersionPolicy.java)作为参考，它提供了在版本号中使用年份的版本策略。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T13:27:07.040

如果您在 Jenkins 中使用参数化构建，则可以使用命令行参数而无需编辑作业。检查作业配置页面中的“此构建已参数化”选项。

这不会让 Jenkins 完全自行执行发布（这很好；我们不希望机器人抢走我们的工作！）——当您从 Jenkins 中手动启动构建时，您将能够设置您配置的任何参数。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-17T12:30:04.437

您可以使用自定义 groovy 脚本自动为 maven-release-plugin 提供 releaseVersion 和 developmentVersion。然后 maven 命令看起来像：

mvn clean release:clean release:prepare release:perform -DreleaseVersion=${releaseVersion} -DdevelopmentVersion=${developmentVersion}

按照[此答案](https://stackoverflow.com/questions/5557659/using-maven-release-plugin-autoversionsubmodules-to-increment-major-version/17699592#17699592)中的步骤并更改 groovy 脚本的一部分以适合您的用例（例如此部分）：

```
def newFixVersion = 0;
if (hasSnapshotPart) {  
    newMinorRelVersion = minorVersion;  
    newMinorDevVersion = minorVersion + 1;  
} else {  
    //TODO: either throw an exception here or change the newMinorRelVersion newMinorDevVersion appropriately to suite your use-cases: 
        //throw new IllegalArgumentException("The pom at location " + POM_LOCATION + " contains the version " + projectVersion + " which is not a snapshot version (missing " + SNAPSHOT_PART + "). This is a released version and nothing should happen to it!");  
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-24T20:09:54.587

我遇到了同样的问题，我想在不运行多个命令或手动插入版本的情况下解决它。

这是我对 y （或次要）增量的解决方案：

**我在初始化**阶段运行了一个 Groovy 脚本。该脚本创建**release.properties**。将此添加到**pom.xml中的****project/build/plugins**部分：

 **```
 <plugin>
            <groupId>org.codehaus.gmavenplus</groupId>
            <artifactId>gmavenplus-plugin</artifactId>
            <version>1.5</version>
            <dependencies>
                <dependency>
                    <groupId>org.codehaus.groovy</groupId>
                    <artifactId>groovy-all</artifactId>
                    <version>2.4.6</version>
                </dependency>
            </dependencies>
            <executions>
                <!-- Force maven-release-plugin to increase MINOR, not PATCH, and create tag as vX.Y.Z -->
                <execution>
                    <id>release-parameters</id>
                    <phase>initialize</phase>
                    <goals>
                        <goal>execute</goal>
                    </goals>
                    <configuration>
                        <scripts>
                            <script>
                                <![CDATA[
                                    final String SNAPSHOT = '-SNAPSHOT'

                                    Properties releaseProps = new Properties()
                                    File releasePropsFile = new File('release.properties')
                                    String releaseVersion = '${project.version}'.replace('-SNAPSHOT', '')
                                    String[] vNumbers = releaseVersion.split('\\.')
                                    String snapshotVersion = vNumbers[0] + '.' + (Integer.parseInt(vNumbers[1]) + 1) + '.' + '0' + SNAPSHOT

                                    releaseProps.setProperty('scm.tag', 'v' + releaseVersion)
                                    releaseProps.setProperty('project.rel.${project.groupId}:${project.artifactId}', releaseVersion)
                                    releaseProps.setProperty('project.dev.${project.groupId}:${project.artifactId}', snapshotVersion)
                                    releaseProps.store(releasePropsFile.newWriter(), null)
                                ]]>
                            </script>
                        </scripts>
                    </configuration>
                </execution>
            </executions>
        </plugin> 
```

此脚本还会更改SCM中**vX.YZ的****标签**名称。在**release:prepare**阶段不执行**初始化**阶段。要解决此问题，您可以在发布之前运行“mvn install”，或将发布命令更改为：

 ******```
mvn --batch-mode initialize clean release:prepare release:perform 
```

[关于](https://maven.apache.org/maven-release/maven-release-plugin/examples/non-interactive-release.html)release.properties：https://maven.apache.org/maven-release/maven-release-plugin/examples/non-interactive-release.html

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2013-03-19T13:19:50.397

正如 Khmarbaise 所建议的那样，我也认为**您的问题没有解决方案。**

是否有任何规则可以自动告诉您是否必须更改第二个或第三个数字？的确，我不这么认为。话虽如此，您不能要求 Maven / Jenkins 为您选择它，一次是主要版本号，另一个是次要版本号。

您必须通过参数更改它，或者让用户通过 Jenkins M2 Release 插件对其进行配置，正如 willome 所建议的那样。**它只能是手动操作。**********

# pdf - pdf，外观流，焦点丢失后复选框未正确显示

> ID：15479855
> 
> 赞同：0
> 
> 时间：2013-03-18T14:55:57.913
> 
> 标签：pdf, pdf-generation, pdf-form

我正在开发一个将交互式表单生成为 PDF 文件的程序。

生成的文件在[这里](http://home.zcu.cz/~struharv/checkbox.pdf "这里")（源代码可读）。复选框位于页面底部。获得焦点后，它被正确渲染（带有红色/蓝色边框的白色正方形），在失去焦点后，正方形消失并显示默认外观（这对我来说不正确）。

*   在 Acrobat 9、X、XI
*   在内置的 chrome pdf 查看器中它工作正常
*   Adobe XI Pro - 预检 - 显示警告“表单域有多个外观”

我找不到错误。

谢谢你的帮助。

那里描述的相同（类似）问题： [http ://forums.adobe.com/message/5144579#5144579](http://forums.adobe.com/message/5144579#5144579)

----这是pdf文件的一部分，我预计会出错

```
2 0 obj
<<
  /Type /Catalog
  /Pages 1 0 R
  /OutputIntents [7 0 R]
  /Metadata 8 0 R
  /PageLabels 10 0 R
  /AcroForm 14 0 R
>>

endobj

14 0 obj
<< 
  /Fields [13 0 R] 
>>
endobj

13 0 obj
<<
  /Type /Annot
  /Subtype /Widget
  /Rect [20.0 20.0 120.0 120.0]
  /FT /Btn
  /F 4
  /T (name)
  /AS /Yes
  /V /Yes
  /AP << 
        /N <<
             /Yes 11 0 R
             /Off 12 0 R >>
   >>
>>
endobj

11 0 obj
<<
  /Type /XObject
  /SubType /Form
  /BBox [20.0 20.0 120.0 120.0]
  /Length 19 0 R
>>
stream
  ....
endstream
endobj

12 0 obj
<<
  /Type /XObject
  /SubType /Form
  /BBox [20.0 20.0 120.0 120.0]
  /Length 20 0 R
>>
stream
  ....
endstream
endobj 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T10:17:49.747

我对您的 PDF 的观察有些不同，但仍然很有趣：

*   Adobe Acrobat 9 Pro v9.5.4（禁用 PDF/A r/o 视图）完全符合您最初的预期：它只使用红色或蓝色框框。但是，如果一个人切换了该复选框，即使再次切换，它也希望保存一个对您的字段进行一些更改的新修订。

*   Adobe 阅读器 X！v11.0.2 以 PDF/A 只读模式启动并显示红框。但是，在离开该 r/o 模式后，它会显示默认的交叉外观。当它获得焦点时，它再次使用红色和蓝色框架。当它失去焦点时，它会回到默认外观。

我在 Adob​​e Reader X 中观察到的行为！似乎是您在更多情况下观察到的。

因此，本质上问题是在某些情况下（对我来说：不在 PDF/A r/o 模式下，不关注表单字段）一些 PDF vewers（对我来说：Adobe Reader XI）不使用您的自定义复选框外观但是一些标准的，你认为这是*不正确*的。

不幸的是，在 PDF 规范[ISO 32000-1:2008](http://www.adobe.com/content/dam/Adobe/en/devnet/acrobat/pdfs/PDF32000_2008.pdf)中有一个提示，根据该提示，查看者*可能*（甚至**应该**）这样做。12.5.6.19*小部件注释*部分中的表 189解释了外观特征字典中的条目（小部件字典中**/MK**的值；您不提供，因此应用默认值），其中**/CA**：

> 文本字符串*（可选；仅限按钮字段）*小部件注释的*正常标题*，应在不与用户交互时显示。
> 
> 与此表中列出的其余条目不同，这些条目仅适用于与按钮字段关联的小部件注释（请参阅第 12.7.4.2 节中的按钮，“按钮字段”），**CA**条目可以与任何类型的按钮字段一起使用，包括复选框（请参阅第 12.7.4.2 节中的复选框，“按钮字段”）和单选按钮（第 12.7.4.2 节中的单选按钮，“按钮字段”）。

因此，特别是*复选框，**无论何时不与用户交互，**都应**使用它们的**正常标题**而不是它们的外观来显示。*

当表单域没有焦点时，Adobe Reader 似乎认为表单没有与用户交互，因此切换到显示标题而不是外观。

不幸的是，您可以为按钮定义的正常标题只是一个文本字符串，默认情况下似乎在 Zapf Dingbats 字体的上下文中进行解释（`/MK<</CA(1)>>`例如尝试）。不过，这是你应该继续寻找的地方，也许你可以让它使用你设计的一些 Type 3 字体，其中包含一个蓝色和一个红色的方框。

# wordpress - 如果我的网站托管在我自己现有的主机提供商上，并且我切换到 wordpress 主题，我是否必须传输每个文件？

> ID：15479857
> 
> 赞同：0
> 
> 时间：2013-03-18T14:56:00.390
> 
> 标签：wordpress

我有一个包含大约 15 页内容和大约 50 页 php 脚本的站点。它们都托管在我已有很长时间的现有主机上。

我想要做的是使用 wordpress 模板。我当前主机上的文件会怎样？他们能保持现状吗？wordpress 模板本质上只是 css 和一些图像吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T04:06:31.223

最好的是将现有网站转换为工作的[Wordpress 主题](http://codex.wordpress.org/Theme_Development)。

现有页面可以制作成[页面模板](http://codex.wordpress.org/Pages#Page_Templates)。

如果您使用自定义函数等，您可以将它们包含在 Functions.php 中。

一旦你有了一个工作主题，在站点的根目录上安装 Wordpress 并激活主题。

# asp-classic - 在浏览器中执行经典 ASP 加密文件

> ID：15479859
> 
> 赞同：0
> 
> 时间：2013-03-18T14:56:11.127
> 
> 标签：asp-classic, encryption, file-security

我已经加密了我的 ASP 文件。但是当我在浏览器中运行它时它失败了。如何执行该 asp 文件以便我的应用程序可以运行？如何解密它，它是使用工具加密的，我如何在执行时解密它？我不希望我提供该文件的任何人看到该文件的代码，但只能执行并使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T15:14:26.430

啊，我想我明白了：

ASPEncrypt 是一个组件，可用于使用 ASP 或 ASP.NET 加密文件。它不是加密 ASP(.NET) 源代码文件的工具。

您正在寻找类似[Microsoft 脚本编码器](http://www.virtualconspiracy.com/content/articles/breaking-screnc)的东西（我不知道它是否仍然可用），您希望您的源代码不可读，对吗？
有一些工具声称可以做到这一点，但据我所知，没有一个是不能逆转的。因此，如果有人**真的**想获得您的代码，这只是一个小障碍。

[这里](http://www.vbs2exe.com/encrypt-vbs.html)还有一些声称可以做到这一点 的[工具。](http://dennisbabkin.com/screnc/)

我希望其中之一适合您的需求。

# ios - iOS >> 拖放问题 >> UIView 返回到原始位置

> ID：15479860
> 
> 赞同：3
> 
> 时间：2013-03-18T14:56:13.117
> 
> 标签：ios, animation, uiview, drag-and-drop

我在 IB 中设置了 4 个 UIImageViews。我还有一个描述状态的 UILabel（如下面的代码所述）。我使用 touchesBegan、touchesMoved 和 touchesEnd 方法来捕获对象移动，如下所示：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch* aTouch = [touches anyObject];
    UIView* aView = [aTouch view];
    if (aView != self.view) {
        [self.view bringSubviewToFront:aView];
        self.statusLabel.text = @"You're Dragging...";
    }
}

-(void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {

    UITouch* aTouch = [touches anyObject];
    UIView* aView = [aTouch view];
    if (aView != self.view) {
        aView.center = [aTouch locationInView:self.view];
    }
}

-(void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {

    self.statusLabel.text = @"At Ease";
} 
```

问题是，在我移动（在模拟器中）其中一个 UIImageView 之后，它们“跳”回其在 IB 中设置的原始位置，而不是留在我放下它们的位置。

为什么会这样？如何在“touchesEnd”“捕获” UIImageView 的新位置并避免这种“跳跃”？

PS我注意到，如果我不更新“touchesEnd”处的标签，UIImageView 将保持在最后一个位置，直到我点击另一个 UIImageView；这是怎么回事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T06:42:33.633

你的代码似乎是正确的..你只是在取消选中自动布局后尝试它......后来我发现作者自己发布了答案......所以，对不起这篇文章..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-19T05:12:37.000

我取消选中 IB 中的“自动布局”复选框，它工作正常。这不是做到这一点的“最佳实践”......但它确实有效。

# java - 为什么我不能在从数据库中获取的对象中使用持久化？

> ID：15479866
> 
> 赞同：1
> 
> 时间：2013-03-18T14:56:25.037
> 
> 标签：java, spring, spring-roo, entitymanager, persist

我认为我可以在我的 spring 对象中使用 entitymanager 的方法 persist 来坚持。其实我用的是spring roo。但是当我从数据库中获取一个对象时，我不能这样做：

```
object.persist(); // <--- it doesn't work 
```

有谁知道为什么？我在哪里可以找到文档？

我得到了这个例外：

```
 org.springframework.orm.jpa.JpaSystemException: org.hibernate.PersistentObjectException: detached entity passed to persist: com.movi.duckury.server.domain.LoginLog; nested exception is javax.persistence.PersistenceException: org.hibernate.PersistentObjectException: detached entity passed to persist: com.movi.duckury.server.domain.LoginLog
at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:311)
at org.springframework.orm.jpa.aspectj.JpaExceptionTranslatorAspect.ajc$afterThrowing$org_springframework_orm_jpa_aspectj_JpaExceptionTranslatorAspect$1$18a1ac9(JpaExceptionTranslatorAspect.aj:15)
at com.movi.duckury.server.domain.LoginLog_Roo_Entity.ajc$interMethod$com_movi_duckury_server_domain_LoginLog_Roo_Entity$com_movi_duckury_server_domain_LoginLog$persist(LoginLog_Roo_Entity.aj:54)
at com.movi.duckury.server.domain.LoginLog.persist(LoginLog.java:1)
at com.movi.duckury.server.domain.LoginLog_Roo_Entity.ajc$interMethodDispatch1$com_movi_duckury_server_domain_LoginLog_Roo_Entity$com_movi_duckury_server_domain_LoginLog$persist(LoginLog_Roo_Entity.aj)
at com.movi.duckury.server.web.LoginLogControllerTest.findLoginLogsBySessionIdTest(LoginLogControllerTest.java:101)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:601)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:47)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:44)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:74)
at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:27)
at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:82)
at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:72)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:240)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:238)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:63)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:236)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:53)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:229)
at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
at org.junit.runners.ParentRunner.run(ParentRunner.java:309)
at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:180)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

引起：javax.persistence.PersistenceException：org.hibernate.PersistentObjectException：分离实体传递给持久化：com.movi​​.duckury.server.domain.LoginLog at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1214) at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1147) 在 org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1153) 在 org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:678)在 sun.reflect.GeneratedMethodAccessor21.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) 在 java.lang.reflect.Method.invoke(Method.java:601) 在 org.springframework.orm .jpa。SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:240) at sun.proxy.$Proxy54.persist(Unknown Source) ... 34 更多原因：org.hibernate.PersistentObjectException：分离的实体传递给持久化：com.movi​​.duckury .server.domain.LoginLog at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:127) at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61) at org.hibernate.impl .SessionImpl.firePersist(SessionImpl.java:808) 在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:782) 在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786) 在 org.hibernate。 ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672) ... 还有 39 个在 sun.proxy.$Proxy54.persist(Unknown Source) 处调用（SharedEntityManagerCreator.java:240）... 34 更多原因：org.hibernate.PersistentObjectException：分离的实体传递给坚持：com.movi​​.duckury.server.domain .LoginLog at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:127) at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61) at org.hibernate.impl.SessionImpl.firePersist (SessionImpl.java:808) 在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:782) 在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786) 在 org.hibernate.ejb.AbstractEntityManagerImpl。坚持（AbstractEntityManagerImpl.java:672）... 39 更多在 sun.proxy.$Proxy54.persist(Unknown Source) 处调用（SharedEntityManagerCreator.java:240）... 34 更多原因：org.hibernate.PersistentObjectException：分离的实体传递给坚持：com.movi​​.duckury.server.domain .LoginLog at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:127) at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61) at org.hibernate.impl.SessionImpl.firePersist (SessionImpl.java:808) 在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:782) 在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786) 在 org.hibernate.ejb.AbstractEntityManagerImpl。坚持（AbstractEntityManagerImpl.java:672）... 39 更多34 更多原因：org.hibernate.PersistentObjectException：分离实体传递给持久化：com.movi​​.duckury.server.domain.LoginLog at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:127) at org. hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61) at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:808) at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:782)在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786) 在 org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672) ... 还有 39 个34 更多原因：org.hibernate.PersistentObjectException：分离实体传递给持久化：com.movi​​.duckury.server.domain.LoginLog at org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:127) at org. hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61) at org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:808) at org.hibernate.impl.SessionImpl.persist(SessionImpl.java:782)在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786) 在 org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672) ... 还有 39 个onPersist(DefaultPersistEventListener.java:127) 在 org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61) 在 org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:808) 在 org.hibernate.impl .SessionImpl.persist(SessionImpl.java:782) 在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786) 在 org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672) ... 还有 39 个onPersist(DefaultPersistEventListener.java:127) 在 org.hibernate.event.def.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:61) 在 org.hibernate.impl.SessionImpl.firePersist(SessionImpl.java:808) 在 org.hibernate.impl .SessionImpl.persist(SessionImpl.java:782) 在 org.hibernate.impl.SessionImpl.persist(SessionImpl.java:786) 在 org.hibernate.ejb.AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672) ... 还有 39 个AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672) ... 39 更多AbstractEntityManagerImpl.persist(AbstractEntityManagerImpl.java:672) ... 39 更多

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:42:07.590

因为它已经持续存在。基本上会发生主键冲突。

使用`object.merge()`（如果我没记错的话，Roo 创建的方法的名称）

斯特凡诺

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:00:14.253

[JPA EntityManager：为什么使用persist（）而不是merge（）？](https://stackoverflow.com/questions/1069992/jpa-entitymanager-why-use-persist-over-merge)

[http://www.objectdb.com/java/jpa/persistence/store](http://www.objectdb.com/java/jpa/persistence/store)

# facebook-graph-api - 在新闻源中添加自定义链接，如“喜欢”/“分享”/“评论”

> ID：15479871
> 
> 赞同：0
> 
> 时间：2013-03-18T14:56:32.967
> 
> 标签：facebook-graph-api, feed

我只是想知道是否可以在 Facebook 的新闻源中添加自定义按钮，例如“喜欢”/“分享”/“评论”。

我想在用户的新闻源上显示的帖子中添加一个类似“标记为未读”的操作，以便用户稍后可以查看它们。

我发现了这个浏览器插件：[http](http://socialfixer.com) ://socialfixer.com 所以这可以在用户的​​新闻源上启用某些功能。我想知道这是否可以通过 Facebook 应用程序实现，而无需浏览器插件的帮助。

谢谢 ：）

# java - p:子菜单可点击

> ID：15479873
> 
> 赞同：4
> 
> 时间：2013-03-18T14:56:39.323
> 
> 标签：java, jsf, primefaces

是否有可能制作`<p:submenu>`可点击并相应地触发动作？

这就是我的代码的样子，我也希望能够点击子菜单。

```
<p:menu styleClass="menu">
    <p:submenu label="Meine Versicherungen">
        <p:menuitem value="Polizzen"  />
        <p:menuitem value="Schäden" />
        <p:menuitem value="TopKunde-Info" />
    </p:submenu>
    <p:submenu label="Meine Daten">
        <p:menuitem value="Kundendaten" />
        <p:menuitem value="Benutzerdaten" />
    </p:submenu>
    <p:submenu label="Diverses">
        <p:menuitem value="Postfach"/>
        <p:menuitem value="eKommunikationsvereinb." />
        <p:menuitem value="Transport" />
    </p:submenu>
</p:menu> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T15:14:10.953

根据 PrimeFaces 文档，没有直接的方法......没有回调之类的`onclick`东西

但是如果你真的想调用一些 js 函数，`p:submenu`你可以使用下面的 hack

添加`styleClass`到您的`p:submenu`, 像这样

```
<p:submenu styleClass="myMeineClass" label="Meine Versicherungen"> 
```

并在 js 中使用 jQuery `bind`（例如）

```
$(".myMeineClass").bind("click",function(){ alert("myMeineClass was clicked"); }); 
```

# ssis - 在 SSIS 2005 中优化脚本转换

> ID：15479879
> 
> 赞同：0
> 
> 时间：2013-03-18T14:57:07.983
> 
> 标签：ssis

我有一个带有 DT_TEXT 列的 SSIS 2005 数据流，我需要在该列上执行一些字符串替换。我尝试在派生列任务中执行此操作，但这样的表达式将列的大小限制为 4000 个字符。否则会出现截断错误。

```
REPLACE(REPLACE(REPLACE((DT_STR, 4000, 1252) [COMMENT],"&#38;","&"),"&#09;","\t"),"&#10;","\n") 
```

所以我转向了一个脚本转换来做同样的字符串替换，如下所示：

```
Public Overrides Sub Input0_ProcessInputRow(ByVal Row As Input0Buffer)

    Dim blobData() As Byte = Row.COMMENT.GetBlobData(0, CInt(Row.COMMENT.Length))
    Dim blobString As String = Encoding.Unicode.GetString(blobData)

    blobString.Replace("&#38;", "&").Replace("&#09;", "\t").Replace("&#10;", "\n")

    Row.SCRUBBEDCOMMENT.AddBlobData(Encoding.Default.GetBytes(blobString))

End Sub 
```

这工作正常，但它太慢了。我有什么办法可以加快速度吗？或者这可以在没有截断的 SSIS 表达式中完成吗？

谢谢，

账单

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T12:07:04.937

实际上，我想出了一个快速的方法来加快速度......只有在进行替换时才调用 AddBlobData 方法。就我而言，我不希望有很多替代品。这无疑加快了转型。希望这对其他人有帮助。

账单

# javascript - 单击滑动菜单后鼠标进入/鼠标离开的不良残留效果

> ID：15479880
> 
> 赞同：0
> 
> 时间：2013-03-18T14:57:09.270
> 
> 标签：javascript, jquery

我有一个我正在安装的菜单系统的模型：http: [//djinnius.com/GFTest/gftest.html](http://djinnius.com/GFTest/gftest.html)（这里还有一个垃圾箱：http: [//jsbin.com/orejup/2/edit](http://jsbin.com/orejup/2/edit)但是绿色 div 中显示的文本无法正常工作）单击左上角的小箭头时，菜单会滑出。当鼠标悬停在菜单项上时，我在绿色 div 中提供菜单项的完整预览。

我希望菜单可以像这样优雅地滑入/看不见：http: [//jsbin.com/itogor/5](http://jsbin.com/itogor/5)

上述行为的特殊之处在于，如果我不使用 jsbin 中演示的定位和溢出属性，则菜单文本会在菜单关闭时向下挤压。这是难看和分散注意力的。

我认为我的上述效果正常工作，但我遇到了一个似乎表明并非如此的问题。我想根据滑出菜单的选择来改变绿色 div 的内容。但是，当您向下滚动到菜单的较低项目并单击某个项目时，绿色 div 的内容不正确。滑动菜单似乎正在向下挤压文本并导致在单击事件之后发生 mouseenter 和 mouseleave 事件。这会将绿色 div 的内容更改为不正确。

关于如何防止这种行为的任何想法？我试图写一个 bin（[http://jsbin.com/orejup/2/edit](http://jsbin.com/orejup/2/edit)），但由于某种原因，绿色 div 文本没有改变。通过检查控制台并查看 click 事件之后发生的 mouseenter/mouseleave 事件，您仍然可以看到不想要的效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:28:33.287

$(".i-gf-summary-wrapper").scrollTop(0); 导致了这个问题。通过将这段代码移动到 slideOut() 函数而不是 slideIn() 函数，我仍然获得了所需的效果，同时消除了不希望的副作用。

# drupal - 是否可以使用 nodeapi 将 drupal 中的字段设置为某个值

> ID：15479883
> 
> 赞同：1
> 
> 时间：2013-03-18T14:57:12.773
> 
> 标签：drupal

所以我把这个字段命名为`field_movie_cast_count`这是一个名为内容的字段，`movie`所以我想要的是每当电影更新时（比如我添加另一个演员），该`field_movie_cast_count`字段也会更新。我已经使用以下代码成功完成了它：

```
function count_cast_nodeapi(&$node, $op) {
    $id = $node->nid;
    if($op == 'update' && $node->type == 'movie')  {
        $count=count($node->field_movie_cast);
        $q = db_query("update content_type_movie set field_movie_cast_count_value = '$count' WHERE nid = '$id'");
    }
} 
```

现在，我的老板告诉我，我不应该使用查询。那么，如何通过不使用数据库查询来实现这一点？

不能只设置 field_movie_cast_count[]['value']=$count 吗？我试过这段代码它不起作用。哈哈

或者我应该重新提出问题是否有任何其他方式来显示计数演员？除了我的方式？因为也许我不明白我的老板是对的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:32:26.250

`hook_nodeapi()`有一个`presave`在节点（和字段数据）提交到数据库之前调用的操作。操作的定义是：

> 节点通过验证，即将保存。模块可以使用它在节点保存到数据库之前对其进行更改。

您可以使用它来更新字段值，而无需手动访问数据库（无论如何都会被覆盖），如下所示：

```
function MYMODULE_nodeapi(&$node, $op) {
  if ($op == 'presave' && $node->type == 'movie') {
    $node->field_movie_cast_count[0]['value'] = count($node->field_movie_cast);
  }
} 
```

# pseudocode - 我的伪代码有什么问题吗？

> ID：15479886
> 
> 赞同：0
> 
> 时间：2013-03-18T14:57:21.917
> 
> 标签：pseudocode

所以这次的问题是关于收费账户的验证。基本上，我们必须用伪代码设计一个程序，其中用户输入一个帐号，程序通过将其与我们要放入数组中的列表进行比较来验证它。数字应该存储在数组中，我们需要使用顺序搜索算法来定位用户输入的数字。如果数字在数组中，程序会显示一条消息，表明它是有效的。如果不是，则显示无效。主模块有一个需求，函数是TicketValid。我想知道我的伪代码是否正确。谢谢！

```
 Constant Integer SIZE = 18
    Declare String account[SIZE] = "5658845", "4520125", "7895122", 8777541",                           "8451277", "1302850", "8080152", "4562555", "5552012", "5050552", "7825877", "1250255",      "1005231", "6545231", "3852085", "7576651", "7881200", "4581002"

    Module main()
          Display "Please enter your charge account number"
          Input account
          isValidAccount(account)
    Main()

    Function Integer isValidAccount(account)
    Declare Boolean found
    Declare Integer index
    Set found = False
    Set index = 0
    While found == False AND index <= SIZE -1
          If account[index] == account Then
                Set found = True 
          Else
                Set index = index + 1
          End if
    End While
    If found Then
          Display "Your account is valid ", index + 1
    Else
          Display "Your account is not valid."
    End If
    End Function 
```

# php - Facebook API 调用在浏览器中有效，但在代码中无效

> ID：15479887
> 
> 赞同：1
> 
> 时间：2013-03-18T14:57:25.940
> 
> 标签：php, http, facebook-graph-api

我正在开发一个 Facebook 应用程序，并且我有一个脚本，可以在发生重要事件时向用户发送通知。该脚本遍历用户列表并循环触发通知。现在，当我激活脚本时，什么也没有发生，并且我在日志中收到以下错误，涉及我尝试访问的 url：

```
 failed to open stream: HTTP request failed! HTTP/1.1 400 Bad Request\r\n 
```

但是，当我将一个错误的 url 复制并粘贴到浏览器中时，我会收到一条成功消息，并且通知会出现在 Facebook 上。我的问题是，是否有任何理由不接受来自 pHP 程序的 URL，而只能来自浏览器访问？

这是一个代码片段：

```
$apprequest_url = "https://graph.facebook.com/".
$user_id.
"/notifications?href=apps.facebook.com/vmoodletest".
"&template='sigh'&".
$app_access_token."&method=post";

$result = file_get_contents($apprequest_url); 
```

这是生成的网址：

```
https://graph.facebook.com/xxxxxxxxxxxx/notifications?href=apps.facebook.com/vmoodletest&template='blah blah posted a comment on Does it work? in the -General Forum- forum in Senior Project.'&access_token=xxxxxxxxxxxx|xxxxxxxxxxxxxxx&method=post 
```

# java - 使用 Quartz 的计划任务 - JDBC

> ID：15479889
> 
> 赞同：0
> 
> 时间：2013-03-18T14:57:33.233
> 
> 标签：java, jdbc, quartz-scheduler

我正在尝试制作一个用于提醒的迷你 Web 应用程序，我部署 Quartz Scheduler 来处理启动事件提醒的问题，我已经了解可以使用 JDBC 从数据库配置任务（作业）和程序员（调度程序），我有搜索并找不到一个示例，我应该在表格上显示哪些信息，我运行 java 代码以开始操作计划任务。如果有人可以举一个例子或我可以达到这个目的的东西，他们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:06:05.777

你理解错了。您可以使用任何 JobStore（包括 JdbcJobStore 来存储您的作业/触发器/等。但在数据库中手动创建它们是**一个坏主意™**。

根据您使用 Quartz 的方式，您可以使用 SPRING 或使用 Fluent 语法（我相信这是当今的首选方法）来设置它。

进一步阅读：http: [//quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-09](http://quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-09)

# crystal-reports - Crystal Reports 11 水晶图表上的动态数据源列

> ID：15479890
> 
> 赞同：0
> 
> 时间：2013-03-18T14:57:35.557
> 
> 标签：crystal-reports

几天来我一直在寻找解决此问题的方法，因此如果有人可以提供帮助，我将不胜感激...

我正在使用 SAP Crystal Reports 11，我想使用 Crystal Line Chart绘制特定时间段**（从和到日期）的产品价格。**

问题是产品编号是动态的，因为每组产品都属于一个包，所以包可以包含 3、5、10 或任意数量的产品，具体取决于所选的时间段**（FROM 和 TO DATES）**。我想在日期更改时显示这些价格。

**因此，当使用水晶图表时，它要求在“更改时”**选项下方的设置面板中显示固定数量的列。我想要一种方法来确定要在运行时或其他东西上显示的列。

如果没有这样的选项，我将非常感谢任何解决方法或任何想法。

提前致谢 ：）

# c# - 调用 CS 文件中 BulletedList 中存在的 ListItem

> ID：15479893
> 
> 赞同：0
> 
> 时间：2013-03-18T14:57:40.637
> 
> 标签：c#, asp.net, .net

网

我的 aspx 文件中有以下 BulletedList

```
<asp:BulletedList ID="DocumentList" runat="server" 
DisplayMode="LinkButton" onclick="DocumentList_Click">
    <asp:ListItem Value="Documents/testpage.pdf" Text="testpage.pdf" >test page</asp:ListItem>
    <asp:ListItem Value="Documents/testpage2.pdf" Text="testpage2.pdf">test page 2</asp:ListItem>
</asp:BulletedList> 
```

我想要做的是在我的 CS 文件中，我想评估以下内容

```
Sting filepath = // here i want to get the ListItem Value
Sting filename = // here i want to get the file name present in Listitem text. 
```

我如何在下面的按钮单击事件中获得上述两个值。

```
protected void DocumentList_Click(object sender, BulletedListEventArgs e)
{

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:02:54.680

```
protected void DocumentList_Click(object sender, BulletedListEventArgs e)
{
     ListItem li = DocumentList.Items[e.Index];
     Sting filepath = li.Value;
     Sting filename = li.Text;

} 
```

但是您不需要指定文本字段来保存文件名的值，您可以从路径中获取它。

```
<asp:BulletedList ID="DocumentList" runat="server" 
DisplayMode="LinkButton" onclick="DocumentList_Click">
    <asp:ListItem Value="Documents/testpage.pdf" >test page</asp:ListItem>
    <asp:ListItem Value="Documents/testpage2.pdf" >test page 2</asp:ListItem>
</asp:BulletedList> 
```

然后

```
protected void DocumentList_Click(object sender, BulletedListEventArgs e)
{
     ListItem li = DocumentList.Items[e.Index];
     Sting filepath = li.Value;
     Sting filename = System.IO.Path.GetFileName(li.Value);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:02:26.750

```
protected void DocumentList_Click(object sender, BulletedListEventArgs e)
{
    var item = DocumentList.Items[e.Index];
    String filepath = item.Value;
    String filename = item.Text;
} 
```

# python - 从 pyqt4 gui 捕获异常

> ID：15479894
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:57:41.947
> 
> 标签：python, multithreading, pyqt4

我有一个使用 IPython QTconsole 作为命令行界面和 PyQt4 gui 作为图形界面的应用程序。GUI 被简单地设置为调用控制台命令作为插槽。我还在开发这个，所以有很多错误。当我从 IPython 窗口调用命令时，我会收到任何发生的错误消息，但是当 GUI 调用这些方法之一时，任何错误都会静默发生。如何让 GUI 按预期打印出错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T11:26:30.360

您可以使用[sys.excepthook](http://docs.python.org/2/library/sys.html#sys.excepthook)将有关未处理异常的信息打印到窗口。

# ios - 何时以及如何关闭 UIActivityViewController

> ID：15479897
> 
> 赞同：2
> 
> 时间：2013-03-18T14:57:48.953
> 
> 标签：ios, objective-c, cocoa-touch, ios6, uikit

我在我的应用程序中创建并呈现`UIActivityViewController`自定义`UIActivity`项目。

当我点击`UIActivity`图标时，`UIActivityViewController`向下滑动并显示我的模态视图控制器。但是，当我解雇我的 VC 时，`UIActivityViewController`出现了。

按下活动项时，如何使其消失并且不再出现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:08:33.610

您需要在 selected 上调用该`activityDidFinish:`方法`UIActivity`。

从文档中`UIActivity activityDidFinish:`：

> **讨论**
> 此方法关闭对象提供的共享接口`UIActivityViewController`。如果您使用该`activityViewController`方法提供了视图控制器，则此方法也会关闭该视图控制器。
> 
> 您必须在完成与此对象的服务相关的工作后调用此方法。无论您是否使用`activityViewController`or`performActivity`方法来启动服务，都是如此。调用方法时，使用布尔值表示服务是否成功完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T08:52:56.040

假设当从 UIActivityVC 中选择 Activity *A*时，您希望在当前视图 Controller *C上呈现模态视图控制器**M*。

 *如果你实现*A*的`-(UIViewController*)activityViewController`方法，你需要调用`[A activityDidFinish]`你的模态视图控制器*M*的dismiss方法；

如果你实现*了 A*的`-(void) performActivity`方法，就不可能呈现模态视图，因为当前视图控制器*C*正在关闭的过程中`UIActivityVC`。

我认为最终的解决方案有点棘手。我的基本想法是继承`UIActivityViewController`和覆盖`-(void) viewDidDisappear`方法。因此，您可以在当前视图控制器 C 上做任何您喜欢的事情（即呈现您自己的模态视图，或推送一系列其他视图控制器）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-04T13:17:12.057

我发现这个由 Ethan Huang

```
 [self presentViewController: activityController animated: YES completion:nil];

        activityController.modalPresentationStyle = UIModalPresentationPopover;
        UIPopoverPresentationController *popPC = activityController.popoverPresentationController;
        popPC.barButtonItem = saveBtn;
        popPC.permittedArrowDirections = UIPopoverArrowDirectionAny; 
```

在这里阅读所有相关信息：

[http://getnotebox.com/developer/uiactivityviewcontroller-ios-8/](http://getnotebox.com/developer/uiactivityviewcontroller-ios-8/)*

# perl - 未找到 xampp apache perl 模块

> ID：15479900
> 
> 赞同：1
> 
> 时间：2013-03-18T14:57:52.550
> 
> 标签：perl, apache, webserver, xampp

我在 xampp 中的 apache 服务器有问题。当我想启动它时，我的 xampp 日志说：

```
Busy...
Apache started [port 80] 
```

但它实际上除了 apache 启动之外什么也没做，在一两秒钟后它只是自行停止，如果我从我的 apache 服务器检查我的 error.log，它会给出以下错误： 有人知道如何解决这个问题吗？
`[Mon Mar 18 15:46:28 2013] [error] Can't locate XML/Simple.pm in @INC (@INC contains: C:/xampp/perl/lib C:/xampp/perl/site/lib . C:/xampp/apache) at (eval 19) line 3.\n
[Mon Mar 18 15:46:28 2013] [error] Can't load Perl module XML::Simple for server localhost:80, exiting...`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:51:00.370

现在可以了，请参阅我之前的回复以获得进一步的解释

# javascript - Flask 服务器发送事件套接字异常

> ID：15479902
> 
> 赞同：6
> 
> 时间：2013-03-18T14:57:55.460
> 
> 标签：javascript, python, flask, server-sent-events

我正在考虑使用 SSE 将新数据推送到客户端并使用 Flot（javascript 图表库）显示“实时”更新。我的服务器在 python Flask 框架上运行，我已经想出了如何将数据推送到客户端，但是当我离开页面时，问题就出现了：

```
Exception happened during processing of request from ('127.0.0.1', 38814)
Traceback (most recent call last):
  File "/usr/lib/python2.7/SocketServer.py", line 582, in process_request_thread
    self.finish_request(request, client_address)
  File "/usr/lib/python2.7/SocketServer.py", line 323, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/usr/lib/python2.7/SocketServer.py", line 640, in __init__
    self.finish()
  File "/usr/lib/python2.7/SocketServer.py", line 693, in finish
    self.wfile.flush()
  File "/usr/lib/python2.7/socket.py", line 303, in flush
    self._sock.sendall(view[write_offset:write_offset+buffer_size])
error: [Errno 32] Broken pipe 
```

我理解为什么会发生错误 - 由于无限循环提供“实时”数据，因此套接字永远不会关闭。问题是如何检测页面更改并干净地关闭套接字？我可以关闭客户端的连接吗？那么如何检测页面更改？

这是服务器代码框架，我当然会用包含要显示的对象列表的 json 替换文本消息：

```
def event_stream():
    import time
    while True:
        time.sleep(1)
        yield "data: This is a message number X.\n\n"

@app.route('/stream')
def stream():
    return Response(event_stream(), mimetype="text/event-stream") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-28T19:53:47.503

您可以使用其中一个`onBeforeUnload`或 jQuery`window.unload()`对关闭句柄的某些拆卸方法进行 Ajax 调用。就像是：

```
$(window).unload(
    function() {
        $.ajax(type: 'POST',
               async: false,
               url: 'foo.com/client_teardown')
    }
} 
```

`unload()`/的处理方式存在一些不一致之处`onBeforeUnload()`，因此您可能需要在 Chrome 之类的东西中做更多的工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-19T23:26:54.720

我没有更好的答案，但我认为上面对服务器的 ajax 请求不好。

在烧瓶中，SSE 在 Response 对象中使用流式传输，如果有办法检测 Response 中的断开连接或管道断开事件，则最好处理套接字事件并释放其他分配的资源。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-29T14:16:38.917

我发现了一个肮脏的（包括 mokey 补丁），但有效的解决方案。

因为在连接断开时存在[异常](https://stackoverflow.com/a/14355079/997063 "例外")`SocketServer.StreamRequestHandler.finish`，我们可以对其进行修补以捕获异常并根据需要进行处理：

```
import socket
import SocketServer

def patched_finish(self):
    try:
        if not self.wfile.closed:
            self.wfile.flush()
            self.wfile.close()
    except socket.error:
        # Remove this code, if you don't need access to the Request object
        if _request_ctx_stack.top is not None:
            request = _request_ctx_stack.top.request
            # More cleanup code...
    self.rfile.close()

SocketServer.StreamRequestHandler.finish = patched_finish 
```

如果您需要访问相应的`Request`对象，您还需要用 包装事件流`flask.stream_with_context`，在我的情况下：

```
@app.route(url)
def method(host):
    return Response(stream_with_context(event_stream()),
                    mimetype='text/event-stream') 
```

同样，这是一个非常肮脏的解决方案，如果您不使用内置的 WSGI 服务器，它可能无法正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-28T14:06:48.617

不要在 prod 环境中使用 Flask 内部开发 wsgi 服务器。考虑使用 uwsgi 可以优雅地处理这个套接字错误。

同时考虑使用python3，它也能很好地捕捉到这个sockrt。

# javascript - 用几行编写的 JavaScript 正则表达式

> ID：15479905
> 
> 赞同：0
> 
> 时间：2013-03-18T14:57:59.250
> 
> 标签：javascript, regex, coding-style

我对 javascript 编码风格有一些问题。由于 Google Closure Linter，行不应超过 80 个字符，但我有一些大约 120 个字符长的正则表达式。当我在正则表达式中间换行时，它不能正常工作。如何处理？

```
var pattern = /veeery, veeeery looooooooooooooooooong regular expressssssssssssssssssssssssssion/; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-18T14:59:02.133

一个解决方案是这样做：

```
var pattern = new RegExp(
   'veeery, veeeery looooooooooooooooooong'
   +' regular expressssssssssssssssssssssssssion'
); 
```

如果您的模式声明在循环中，这对于正则表达式文字来说很好，我建议将此声明移动到循环之前，以避免重复创建实例和编译它的成本。

注意转义序列，您必须替换`\`为`\\`：以下两个正则表达式是相同的

```
/\d/g
new RegExp("\\d", 'g') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:00:03.613

虽然我认为这对于 linter 来说是一个荒谬的规则，但解决方案是从字符串表达式创建正则表达式。

```
var regex = new RegExp(
  "first part of long regex" +
  "second part of long regex" +
  "and so on"
); 
```

您必须在正则表达式中对转义的元字符进行双重转义。也就是说，如果您的原生风格的正则表达式是：

```
var regex = /swing on a \*/; 
```

那么你的字符串需要是：

```
var regex = new RegExp("swing on a \\*"); 
```

# sql - 条件 JOIN 产生两个多行

> ID：15479908
> 
> 赞同：1
> 
> 时间：2013-03-18T14:58:14.107
> 
> 标签：sql, sqlite

我正在尝试加入两个这样的表：

表 A

```
A1, A2, A3
A, 1, 35
A, 1, 70
A, 1, 105 
```

表 B

```
B1,B2, B3
B, 1, 30
C, 1, 32
D, 1, 40
E, 1, 55
F, 1, 60
G, 1, 77
H, 1, 80 
```

预期的结果是这样的：

```
A, 1, 35, C, 32
A, 1, 70, F, 60
A, 1, 105, H, 80 
```

也就是说，对于表 A 中的每一行，我只想从表 B 中选择一行，这应该是 B3 值较小但最接近 A3 值的行。

到目前为止，我已经尝试了以下查询：

`SELECT A1, A2, A3, B1, B3 FROM A JOIN (SELECT B1, B2, B3 FROM B ORDER BY B2, B3 DESC) AS A ON A.A2 = B.B2 AND A.B3 < A.A3`

但是，这会产生如下表格：

```
A, 1, 35, B, 30
A, 1, 35, C, 32
A, 1, 70, B, 30
A, 1, 70, C, 32
A, 1, 70, D, 40
A, 1, 70, E, 55 
```

等等。我还尝试将 LIMIT 1 添加到内部 SELECT，但这不会产生任何结果。如果我自己运行内部查询（使用 LIMIT 1），我会得到预期的结果。如何更改查询以产生所需的结果？我目前正在使用 sqlite，但想以一种可移植到其他 DBMS 的方式编写它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:25:34.163

尝试以下查询：

```
SELECT 
  a.A1,
  a.A2, 
  a.A3,
  (
    SELECT b.B3
    FROM TableB AS b
    ORDER BY ABS(a.A3 - b.B3)
    LIMIT 1
  ) AS x
FROM TableA AS a; 
```

[SQL小提琴](http://sqlfiddle.com/#!3/978af/21)

SQL Fiddle 不允许我使用 sqlite，因为我的浏览器不支持它，所以我希望这对你有用。

**编辑：**这实际上应该给你最接近的价值。77 比 60 更接近 70……但我不知道这是否正是您想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:48:44.567

当您想要初始表中的一行时，您可以考虑在`select`子句中使用子查询：

```
select a.*,
       (select b3
        from TableB b
        where b.b3 <= a.a3
        order by b3 desc
        limit 1
       ) as b3
from TableA a 
```

子查询本身称为“相关子查询”，因为该`where`子句同时引用了内表 ( `b`) 和外表 ( `a`)。`a.a3`它按 b3 对表 b 结果进行排序，过滤掉每一行中除小于或等于的值之外的所有值。返回单个值，因为排序是最接近的`limit 1`值，小于或等于 中的值`a.a3`。

您的问题说的是最接近的值，但示例结果的最大值小于或等于。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:27:15.110

我没有可用的 SQLite，但以下在 SQL Server 中有效；您应该能够用 LIMIT 替换 TOP。

只要您指定 TOP 1，您应该能够从 select 中的嵌套查询中获取它：

```
select *, 
   (select top 1 B3 
    from B 
    where B3 <= A3
    order by B3 desc)
from A 
```

编辑：要从 B 添加额外的列，您需要将上述查询嵌套到子查询中：

```
select t.*, B.B1 from (
select *, 
   (select top 1 B3 
    from B 
    where B3 <= A3
    order by B3 desc) as B3
from A
) as t join B on B.B3 = t.B3 
```

# sql - 查找最小值并使用该值更新其他表

> ID：15479910
> 
> 赞同：0
> 
> 时间：2013-03-18T14:58:16.883
> 
> 标签：sql, performance, sql-update

我在 SQL 中有 2 个表：Event 和 Swimstyle Event 表有一个值 SwimstyleId，它指的是 Swimstyle.id Swimstyle 表有 3 个值：距离、relaycount 和 strokeid

通常，表格 Swimstyle 中会有 30 到 50 行，其中包含所有可能的值（这些是游泳距离，如 50（距离）、1（中继计数）、FREE（行程id））。然而，由于编程错误，现有值的查找不起作用，新结果的导入器为添加的每个事件创建了一个新的泳姿条目......我的泳姿表现在包含近 200k 行，这当然不是性能明智的最好的主意；）

为了解决这个问题，我想遍历所有事件，获取附加的泳式值，查找 Swimstyle 中具有相同距离、relaycount 和 strokeid 值的第一个现有行，并使用该值更新 Event.SwimstyleId。

当这一切都完成后，我可以删除所有孤立的 Swimstyle 行，留下一个只有 30-50 行的表格。

我一直在尝试进行这样的查询，但没有得到任何结果。有人指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:08:56.743

如果我没看错的话，这两条语句应该可以解决问题。注意我无法在任何地方尝试这个，我对表结构做了一些假设。

```
UPDATE event e
set swimstyle_id = (SELECT MIN(s_min.id)
                    FROM   swimstyle s_min,swimstyle s_cur
                    WHERE  s_min.distance   = s_cur.distance
                    AND    s_min.relaycount = s_cur.relaycount
                    AND    s_min.strokeid   = s_cur.strokeid
                    AND    s_cur.id         = e.swimstyle_id);

DELETE FROM swimstyle s
WHERE NOT EXISTS (SELECT 1 
                  FROM   event e
                  WHERE  e.swimstyle_id = s.id); 
```

# android - ListView 的高度填满了整个屏幕，虽然设置为 wrap_content

> ID：15479915
> 
> 赞同：10
> 
> 时间：2013-03-18T14:58:25.883
> 
> 标签：android, listview, height, tablelayout

我在 LinearLayout 中有这个 ListView：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        .../>

    <EditText />
      ...
    </EditText>

    <ListView
        android:id="@+id/words_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>

</LinearLayout> 
```

List 由 SimpleCursorAdapter 以编程方式填充：

```
adapter = new SimpleCursorAdapter(this, R.layout.list_row_search, mCursor, from, to); 
```

list_row_search 有一个带有两个 TableRows 的 TableLayout：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/TableLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <View
        android:layout_height="1dip"
        android:background="#FF33B5E5" />

    <TableRow
        android:id="@+id/tableRow1"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/list_lesson"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:padding="1dip"
            android:textSize="12sp" />

        <TextView
            android:id="@+id/list_name"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="5.25"
            android:padding="1dip"
            android:paddingRight="10dp"
            android:textSize="18sp"
            android:textStyle="bold" />

        <TextView
            android:id="@+id/list_flex"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="12.5"
            android:padding="1dip"
            android:paddingRight="10dp" />

        <TextView
            android:id="@+id/list_rom"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="6.25"
            android:padding="1dip"
            android:paddingRight="10dp" />
    </TableRow>

    <View
        android:layout_height="0.1dip"
        android:background="#404040" />

    <TableRow
        android:id="@+id/tableRow2"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/list_related"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="2"
            android:paddingRight="10dp"
            android:textStyle="italic" />

        <TextView
            android:id="@+id/list_ant"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingRight="10dp" />

        <TextView
            android:id="@+id/list_engl"
            android:layout_width="0dp"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:paddingRight="10dp" />
    </TableRow>

    <View
        android:layout_height="1dip"
        android:background="#FF33B5E5" />

</TableLayout> 
```

现在，当列表被填充时，即使在数据库中只找到一个元素，ListView 也会占据整个屏幕。Eclipse 中的 HierarchyView 显示得很清楚，ListView 是填充屏幕的视图。

你能说一下，问题出在哪里吗？谢谢你的时间！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-18T15:11:30.907

你不应该使用`wrap_content`a 的高度`ListView`。`wrap_content`意思是“让我变得足够大，以容纳我所有的孩子。” 当您考虑到您的数据集可能非常大时，这听起来应该是一个非常糟糕的主意。由于您使用的是 LinearLayout，因此请提供您的 ListView`layout_height="0dp"`和 `layout_weight="1"`.

可以让`ListView`屏幕的其余部分。如果它只有一排，它会显示一排，没什么大不了的。除非您试图在列表下方显示某些内容，但我在上面告诉您的内容应该可以实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:16:46.000

如果上面不起作用，您可以使用而不是线性`RelativeLayout`并将.`ListView``EditText`

# google-reseller-api - 经销商 API 似乎不发达？

> ID：15479917
> 
> 赞同：0
> 
> 时间：2013-03-18T14:58:32.657
> 
> 标签：google-reseller-api

我正在尝试使用 Google 的经销商 API 来更好地控制和运营我们的业务。

API 只能列出具有 ANNUAL 计划的 Google-Apps-For-Business 的席位。这会导致误导性统计数据，因为很大一部分是灵活的。无法查看哪些 Google-Drive-storage 已分配许可证或有多少。

有没有办法解决这个问题？- 或者它背后的任何想法？

API没有完全开发吗？- 如果是这样，什么时候？

*爱知道。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T09:15:02.263

查看订阅资源上的 planName 和 skuId 属性： [https ://developers.google.com/google-apps/reseller/v1/reference/subscriptions#resource](https://developers.google.com/google-apps/reseller/v1/reference/subscriptions#resource)

这应该会为您提供 Flex 计划数据，以及与 Google Drive 存储相关的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-24T11:07:51.257

几天前，谷歌终于添加了缺少的功能！

# ios - 如何在 iOS 中实现闪烁动画？

> ID：15479919
> 
> 赞同：-1
> 
> 时间：2013-03-18T14:58:37.550
> 
> 标签：ios, animation, core-animation, core-graphics

[我在 iPhone应用程序](https://itunes.apple.com/us/app/my-memoirs-lite/id609211557?l=en&mt=8)中注意到有趣的动画效果。当用户激活应用程序或触摸今天按钮时，当前日期的单元格闪烁/闪烁。

如何实现相同的效果？是否可以在没有图像资源的情况下实现它（例如仅使用 CoreGraphics）？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:02:17.000

使用`UIAnimation`标签的 alpha 属性并为其设置动画。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:24:31.947

使用定时器实现连续闪烁效果

```
 mytimer = [NSTimer scheduledTimerWithTimeInterval:0.06f
                                             target:self
                                           selector:
             @selector(willStartBlinkingAnimation)
                                           userInfo:nil
                                            repeats:YES]; 
```

编写一个函数来显示/隐藏您的日期标签。或者你可以在这里设置 alpha，偶数时间设置为 0.5f，奇数时间设置为 1.0f。

```
- (void) willStartBlinkingAnimation {

  [UIView animateWithDuration:1.f
                   animations:^{

                     [currentDateLabel setHidden:![currentDateLabel isHidden]];
  }];
} 
```

当你想停止这个过程时，或者在你的 viewDidUnload 方法中，停止这个过程并释放你的计时器：

```
[mytimer invalidate];
mytimer = nil; 
```

希望这将帮助您满足您的要求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-18T15:48:38.907

我假设您的意思是整个日历日“闪耀”的效果（按今天）。

**1）创建渐变。**

*选项 A*：要实现此效果，您应该创建一个具有适当高度的表格行的透明 png。示例 img 如下所示（仅供说明，请创建一个）： ![在此处输入图像描述](../Images/5099cfe1c4c8fee71350e5fe85a46324.png)

*选项 B*：使用 CAGradientLayer 创建渐变。您仍然必须使用 UIImageView 来有效地为单元格行上的渐变设置动画。我会推荐选项 A，直到您不想以编程方式操作渐变视觉效果。

**2）将图像放在行上。**

选项 A：如果您确定此动画始终发生在第一行，那么您可以在表格上简单地添加渐变图像。

选项 B：（上述应用程序可能使用的）您必须将渐变图像放在单元格内。也许最好的选择是使用自定义单元格（正如提到的应用程序使用的那样，请在框中查看左侧的日期），将渐变图像放置在单元格的左侧（放置 X coord = -gradient_img.width）。

**3）动画渐变。**

在该动作上启动您想要链接的动画序列。例如。我认为该应用程序使用表视图的 scrollViewDidEndScrollingAnimation 委托方法来触发动画。

```
[UIView animateWithDuration:2.0 delay:0.0 options:UIViewAnimationOptionCurveLinear 
                 animations:^{                       
                     viewShiningImage.frame = CGRectMake(320, 0, viewShiningImage.frame.size.width, viewShiningImage.frame.size.height);
                 } 
                 completion:^(BOOL finished) {
                     viewShiningImage.frame = CGRectMake(-viewShiningImage.frame.size.width, 0, viewShiningImage.frame.size.width, viewShiningImage.frame.size.height);
                 }
 ]; 
```

# java - Guava 重复键异常 IllegalArgumentException

> ID：15479922
> 
> 赞同：4
> 
> 时间：2013-03-18T14:58:52.233
> 
> 标签：java, guava

这是一个快速的片段。

```
Map<String, String> map = new HashMap<String, String>();
map.put("1", "1");
map.put("2", "1");          
Ordering<String> valueComparator = Ordering.from(String.CASE_INSENSITIVE_ORDER).onResultOf(Functions.forMap(map));  
Map<String, String> sortedMap = ImmutableSortedMap.copyOf(map, valueComparator); 
```

当我运行它时，我得到了这个异常。

```
java.lang.IllegalArgumentException: Duplicate keys in mappings 2=1 and 1=1
    at com.google.common.collect.ImmutableSortedMap.validateEntries(ImmutableSortedMap.java:304)
    at com.google.common.collect.ImmutableSortedMap.copyOfInternal(ImmutableSortedMap.java:281)
    at com.google.common.collect.ImmutableSortedMap.copyOf(ImmutableSortedMap.java:220)
    at com.dbs.datasource.TestBeans.test(TestBeans.java:90)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at junit.framework.TestCase.runTest(TestCase.java:168)
    at junit.framework.TestCase.runBare(TestCase.java:134)
    at org.springframework.test.ConditionalTestCase.runBare(ConditionalTestCase.java:76)
    at junit.framework.TestResult$1.protect(TestResult.java:110)
    at junit.framework.TestResult.runProtected(TestResult.java:128)
    at junit.framework.TestResult.run(TestResult.java:113)
    at junit.framework.TestCase.run(TestCase.java:124)
    at junit.framework.TestSuite.runTest(TestSuite.java:243)
    at junit.framework.TestSuite.run(TestSuite.java:238)
    at org.junit.internal.runners.JUnit38ClassRunner.run(JUnit38ClassRunner.java:83)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

看起来它在某处交换键和值。使用 guava-14.0-rc1.jar

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-18T15:01:28.640

它完全按照您的要求进行 -*按与 key 关联的值对条目进行*排序。我假设你已经知道了那部分，因为你已经调用了变量`valueComparator`。

因此，根据您使用的比较器，您的两个键相等 - 因此它抛出了记录的异常：

> `IllegalArgumentException`- 如果任何两个键根据比较器相等

也许您想按值排序，然后按键排序，以提供唯一性？

```
Ordering<String> valueThenKeyComparator = 
    Ordering.from(String.CASE_INSENSITIVE_ORDER)
            .onResultOf(Functions.forMap(map))
            .compound(Ordering.<String> natural()); 
```

# ruby-on-rails - RSpec 控制器宏不起作用

> ID：15479924
> 
> 赞同：7
> 
> 时间：2013-03-18T14:59:02.093
> 
> 标签：ruby-on-rails, rspec

导轨 3.2，RSpec 2.11。控制器宏不起作用，从我所做的所有研究来看，它似乎是正确编写的。这是代码

/spec/support/controller_macros.rb

```
module ControllerMacros
   def login_user
    before(:each) do
      @request.env["devise.mapping"] = Devise.mappings[:user]
      user = FactoryGirl.create(:user)
      @current_user = user
      sign_in user
    end
  end
end 
```

/spec/spec_helper.rb

```
RSpec.configure do |config|
  ....
  config.extend ControllerMacros, :type => :controller
end 
```

/spec/controllers/companies_controller_spec.rb

```
require File.dirname(__FILE__) + '/../spec_helper'

describe CompaniesController, "index companies" do
    context "for authenticated users" do
        login_user
        ...
    end
end 
```

执行结果：未定义的局部变量或方法 'login_user' for # (NameError)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:09:24.097

似乎已经在[这里](https://stackoverflow.com/a/12334380/979091)回答了，您需要将您的更改`extend`为`include`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-04T04:19:05.683

添加规范类型为我修复了它：

前：

```
describe Api::FooController do
   .
   .
end 
```

后：

```
describe Api::FooController, type: :controller do
   .
   .
end 
```

# android - 相机启动已取消。相机应用程序

> ID：15479926
> 
> 赞同：0
> 
> 时间：2013-03-18T14:59:02.870
> 
> 标签：android, xml, button, null, camera

嘿，我是android和eclipse环境的新手。我不知道Java。我正在尝试创建一个应用程序来打开android设备的相机。这就是我的主要activity.java的样子

```
package com.example.trycamera2;
import java.io.File;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import android.net.Uri;
import android.os.Bundle;
import android.os.Environment;
import android.provider.MediaStore;
import android.app.Activity;
import android.content.Intent;
import android.graphics.Bitmap;
import android.util.Log;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;
public class MainActivity extends Activity {
private static final int CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE = 100;
private Uri fileUri;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    Button button = (Button) findViewById(R.id.button_send);*****
    button.setOnClickListener(new View.OnClickListener() {
        public void onClick(View v) {
             Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
              File dir = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/xray");
              dir.mkdirs();
             File file = new File(dir, "tmp_avatar_"
                              + String.valueOf(System.currentTimeMillis()) + ".jpg");
              fileUri = Uri.fromFile(file); 
             intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name
             startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

}
    });
};
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE) {
        if (resultCode == RESULT_OK) {
            Bitmap tempBitmap = (Bitmap) data.getExtras().get("data"); 
            FileOutputStream out;
            try {
                out = new FileOutputStream(fileUri.getPath());
                tempBitmap.compress(Bitmap.CompressFormat.JPEG, 100, out); 
            } catch (FileNotFoundException e) {
                // TODO Auto-generated catch block
                Log.v("ManageImage-other", "another phone type"); 
                e.printStackTrace();
            } 

            // Image captured and saved to fileUri specified in the Intent
            Toast.makeText(this, "Image saved to:\n" +
                     data.getData(), Toast.LENGTH_LONG).show();
        } else if (resultCode == RESULT_CANCELED) {
            // User cancelled the image capture
        } else {
            // Image capture failed, advise user
        }
    }
    }

} 
```

在星标行中的 button_send 下有一个红色标记...它显示了替代 action_settings 而不是 button_send ....但是当我用 action_settings 替换并运行时，启动被取消。无法在模拟器上安装 .apk ..any帮助将非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:03:07.167

听起来 Android 在任何布局中都找不到您的按钮。仔细检查您的布局以确保它们在那里。

如果是，只需转到顶部的 Project 菜单，然后选择 Clean。选择您的项目，然后单击确定。清理和构建需要一些时间，但这可能会解决您的问题。

# python - 为什么字典和集合中的顺序是任意的？

> ID：15479928
> 
> 赞同：161
> 
> 时间：2013-03-18T14:59:06.220
> 
> 标签：python, dictionary, set, python-internals

我不明白如何通过“任意”顺序循环遍历字典或在 python 中设置。

我的意思是，它是一种编程语言，所以语言中的所有内容都必须 100% 确定，对吗？Python 必须有某种算法来决定选择字典或集合的哪一部分，第一，第二等等。

我错过了什么？

* * *

## 回答 #1

> 赞同：255
> 
> 时间：2013-03-18T15:01:12.857

> **注意：**`dict`此答案是在 Python 3.6 中更改类型的实现之前编写的。*此答案中的大多数实现细节仍然适用，但字典*中键的列出顺序不再由哈希值确定。设置实现保持不变。

顺序不是任意的，而是取决于字典或集合的插入和删除历史，以及具体的 Python 实现。对于此答案的其余部分，对于“字典”，您还可以阅读“设置”；集合被实现为只有键而没有值的字典。

键被散列，散列值被分配给动态表中的槽（它可以根据需要增长或缩小）。并且该映射过程可能会导致冲突，这意味着必须根据已经存在的内容将密钥插入*下一个插槽。*

*列出内容在插槽上循环，因此键按照它们当前*在表中的顺序列出。

以键`'foo'`和`'bar'`为例，假设表大小为 8 个插槽。在 Python 2.7 中，`hash('foo')`是`-4177197833195190597`，`hash('bar')`是`327024216814240868`。模 8，这意味着这两个键插入插槽 3 和 4，然后：

```
>>> hash('foo')
-4177197833195190597
>>> hash('foo') % 8
3
>>> hash('bar')
327024216814240868
>>> hash('bar') % 8
4 
```

这会告知他们的上市顺序：

```
>>> {'bar': None, 'foo': None}
{'foo': None, 'bar': None} 
```

除了 3 和 4 之外的所有插槽都是空的，循环遍历表首先列出插槽 3，然后列出插槽 4，所以`'foo'`在之前列出`'bar'`。

`bar`并且`baz`，但是，哈希值正好相隔 8 ，因此映射到完全相同的插槽，`4`：

```
>>> hash('bar')
327024216814240868
>>> hash('baz')
327024216814240876
>>> hash('bar') % 8
4
>>> hash('baz') % 8
4 
```

它们的顺序现在取决于首先插入哪个键；第二个键必须移动到下一个插槽：

```
>>> {'baz': None, 'bar': None}
{'bar': None, 'baz': None}
>>> {'bar': None, 'baz': None}
{'baz': None, 'bar': None} 
```

此处的表顺序不同，因为首先插入了一个或另一个键。

CPython（最常用的 Python 实现）使用的底层结构的技术名称是[哈希表](http://en.wikipedia.org/wiki/hash_table)，它使用开放寻址。如果您很好奇并且足够了解 C，请查看[C 实现](http://hg.python.org/cpython/file/tip/Objects/dictobject.c)以了解所有（有据可查的）细节。您还可以观看[Brandon Rhodes 的 Pycon 2010 演示文稿，](http://pyvideo.org/video/276/the-mighty-dictionary-55)了解 CPython`dict`的工作原理，或者获取[Beautiful Code](http://shop.oreilly.com/product/9780596510046.do)的副本，其中包括由 Andrew Kuchling 编写的关于实现的一章。

请注意，从 Python 3.3 开始，也使用随机哈希种子，使哈希冲突不可预测，以防止某些类型的拒绝服务（攻击者通过导致大量哈希冲突使 Python 服务器无响应）。这意味着给定字典或集合的顺序*也*取决于当前 Python 调用的随机哈希种子。

其他实现可以自由地为字典使用不同的结构，只要它们满足记录在案的 Python 接口，但我相信到目前为止所有实现都使用哈希表的变体。

CPython 3.6 引入了一个*新* `dict`的实现来维护插入顺序，并且启动速度更快，内存效率更高。新实现不是保留一个大型稀疏表，其中每行都引用存储的哈希值以及键和值对象，而是添加了一个较小的哈希*数组*，该数组仅引用单独的“密集”表中的索引（仅包含尽可能多的行）因为有实际的键值对），而密集表恰好按顺序列出了包含的项目。有关更多详细信息，请参阅[对 Python-Dev 的提案](https://mail.python.org/pipermail/python-dev/2012-December/123028.html)。请注意，在 Python 3.6 中，这被视为*实现细节*, Python-the-language 没有指定其他实现必须保留顺序。这在 Python 3.7 中发生了变化，该细节[被提升为*语言规范*](https://mail.python.org/pipermail/python-dev/2017-December/151283.html)；为了使任何实现与 Python 3.7 或更高版本正确兼容，它**必须**复制这种保持顺序的行为。并且明确地说：此更改不适用于集合，因为集合已经具有“小”散列结构。

Python 2.7 和更新版本还提供了一个[`OrderedDict`类](https://docs.python.org/2/library/collections.html#collections.OrderedDict)，它的子类`dict`添加了一个额外的数据结构来记录键顺序。以一些速度和额外内存为代价，这个类记住你插入键的顺序；然后列出键、值或项目将按该顺序进行。它使用存储在附加字典中的双向链表来有效地保持订单最新。请参阅[Raymond Hettinger 概述该想法的帖子](https://mail.python.org/pipermail/python-dev/2012-December/123028.html)。`OrderedDict`对象还有其他优点，例如*可重新排序*。

如果你想要一个有序的集合，你可以安装[`oset`包](https://pypi.python.org/pypi/oset)；它适用于 Python 2.5 及更高版本。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2014-09-29T12:13:10.043

这更像是对[Python 3.41 A set](https://stackoverflow.com/questions/26098775/python-3-41-a-set)在作为副本关闭之前的回应。

* * *

其他人是对的：不要依赖顺序。甚至不要假装有一个。

也就是说，您可以依靠*一件事：*

```
list(myset) == list(myset) 
```

也就是说，顺序是*稳定*的。

* * *

理解为什么存在*感知*顺序需要理解以下几点：

*   Python 使用*哈希集*，

*   CPython 的哈希集是如何存储在内存中的

*   数字如何被散列

从顶部：

*哈希集*是一种以非常快的查找时间存储随机数据的方法。

它有一个支持数组：

```
# A C array; items may be NULL,
# a pointer to an object, or a
# special dummy object
_ _ 4 _ _ 2 _ _ 6 
```

我们将忽略特殊的虚拟对象，它的存在只是为了使删除更容易处理，因为我们不会从这些集合中删除。

为了真正快速查找，您可以使用一些魔术来计算对象的哈希值。唯一的规则是两个相等的对象具有相同的哈希值。（但如果两个对象具有相同的哈希值，它们可能不相等。）

然后，您通过数组长度取模来创建索引：

```
hash(4) % len(storage) = index 2 
```

这使得访问元素非常快。

哈希只是故事的大部分内容，因为`hash(n) % len(storage)`并且`hash(m) % len(storage)`可以产生相同的数字。在这种情况下，可以尝试几种不同的策略来解决冲突。CPython 在做复杂的事情之前使用了 9 次“线性探测”，因此它会*在插槽的左侧*最多查找 9 个位置，然后再查找其他位置。

CPython 的哈希集是这样存储的：

*   散列集不能**超过 2/3 full**。如果有 20 个元素并且后备数组的长度为 30 个元素，则后备存储将调整为更大。这是因为您更频繁地与小型后备存储发生冲突，并且冲突会减慢一切。

*   后备存储以 4 的幂调整大小，从 8 开始，除了大型集合（50k 元素）以 2 的幂调整大小：（8、32、128，...）。

因此，当您创建一个数组时，后备存储的长度为 8。当它满 5 并且您添加一个元素时，它将短暂包含 6 个元素。`6 > ²⁄₃·8`所以这会触发调整大小，并且后备存储会翻两番到 32 大小。

最后，`hash(n)`只返回`n`数字（`-1`特殊的除外）。

* * *

那么，让我们看第一个：

```
v_set = {88,11,1,33,21,3,7,55,37,8} 
```

`len(v_set)`**是 10，因此在添加了所有项目之后**后备存储至少为 15(+1) 。2 的相关幂是 32。所以后备存储是：

```
__ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ 
```

我们有

```
hash(88) % 32 = 24
hash(11) % 32 = 11
hash(1)  % 32 = 1
hash(33) % 32 = 1
hash(21) % 32 = 21
hash(3)  % 32 = 3
hash(7)  % 32 = 7
hash(55) % 32 = 23
hash(37) % 32 = 5
hash(8)  % 32 = 8 
```

所以这些插入为：

```
__  1 __  3 __ 37 __  7  8 __ __ 11 __ __ __ __ __ __ __ __ __ 21 __ 55 88 __ __ __ __ __ __ __
   33 ← Can't also be where 1 is;
        either 1 or 33 has to move 
```

所以我们期望像这样的订单

```
{[1 or 33], 3, 37, 7, 8, 11, 21, 55, 88} 
```

1 或 33 不在其他地方的开头。这将使用线性探测，所以我们要么有：

```
 ↓
__  1 33  3 __ 37 __  7  8 __ __ 11 __ __ __ __ __ __ __ __ __ 21 __ 55 88 __ __ __ __ __ __ __ 
```

或者

```
 ↓
__ 33  1  3 __ 37 __  7  8 __ __ 11 __ __ __ __ __ __ __ __ __ 21 __ 55 88 __ __ __ __ __ __ __ 
```

您可能会认为 33 会被替换，因为 1 已经存在，但由于在构建集合时会发生大小调整，实际上并非如此。每次重新构建集合时，已添加的项目都会有效地重新排序。

现在你可以明白为什么了

```
{7,5,11,1,4,13,55,12,2,3,6,20,9,10} 
```

可能是有序的。有 14 个元素，所以后备存储至少是 21+1，也就是 32：

```
__ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ __ 
```

前 13 个插槽中的 1 到 13 个哈希。20 进入插槽 20。

```
__  1  2  3  4  5  6  7  8  9 10 11 12 13 __ __ __ __ __ __ 20 __ __ __ __ __ __ __ __ __ __ __ 
```

55 进入插槽`hash(55) % 32`，即 23：

```
__  1  2  3  4  5  6  7  8  9 10 11 12 13 __ __ __ __ __ __ 20 __ __ 55 __ __ __ __ __ __ __ __ 
```

如果我们选择 50，我们希望

```
__  1  2  3  4  5  6  7  8  9 10 11 12 13 __ __ __ __ 50 __ 20 __ __ __ __ __ __ __ __ __ __ __ 
```

你瞧：

```
{1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 20, 50}
#>>> {1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13, 50, 20} 
```

* * *

`pop`看起来很简单：它遍历列表并弹出第一个。

* * *

### 这是所有实现细节。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-11-03T01:47:49.693

“任意”与“不确定”不同。

他们的意思是“在公共接口中”没有字典迭代顺序的有用属性。几乎可以肯定，迭代顺序的许多属性完全由当前实现字典迭代的代码决定，但作者并没有向您保证它们是您可以使用的。这使他们可以更自由地在 Python 版本之间更改这些属性（或者甚至只是在不同的操作条件下，或者在运行时完全随机），而不必担心您的程序会中断。

因此，如果您编写的程序完全依赖于字典顺序的*任何属性*，那么您就是在“违反使用字典类型的合同”，并且 Python 开发人员并不承诺这将始终有效，即使它看起来有效现在当你测试它时。它基本上相当于依赖 C 中的“未定义行为”。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-02-08T02:18:25.297

这个问题的其他答案非常好，写得很好。OP询问“如何”，我将其解释为“他们如何逃脱”或“为什么”。

Python 文档说[字典](https://docs.python.org/2/tutorial/datastructures.html#dictionaries)没有排序，因为 Python 字典实现了[抽象数据类型](http://en.wikipedia.org/wiki/Abstract_data_type) [关联数组](http://en.wikipedia.org/wiki/Associative_array)。正如他们所说

> 返回绑定的顺序可以是任意的

换句话说，计算机科学专业的学生不能假设关联数组是有序的。[数学](http://en.wikipedia.org/wiki/Set_(mathematics))中的集合也是如此

> 列出集合元素的顺序无关紧要

和[计算机科学](http://en.wikipedia.org/wiki/Set_(computer_science))

> 集合是一种抽象数据类型，可以存储某些值，没有任何特定顺序

使用哈希表实现字典是一个有趣的[实现细节](https://hg.python.org/cpython/file/tip/Objects/dictobject.c)，因为就顺序而言，它具有与关联数组相同的属性。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-05-29T21:40:14.520

Python 使用[**哈希表**](http://en.wikipedia.org/wiki/Hash_table)来存储字典，因此字典或其他使用哈希表的可迭代对象中没有顺序。

[但是关于哈希对象中`hashtable.c`](https://hg.python.org/cpython/file/661cdbd617b8/Modules/hashtable.c#l317)项目的索引，python根据以下代码计算索引：

```
key_hash = ht->hash_func(key);
index = key_hash & (ht->num_buckets - 1); 
```

因此，由于整数的哈希值是整数本身^*索引是基于数字（`ht->num_buckets - 1`是一个常数）所以*按位*`(ht->num_buckets - 1)`计算的索引和数字本身之间^*（期望-1它的哈希是-2 ) ，以及其他具有哈希值的对象。

考虑以下`set`使用 hash-table 的示例：

```
>>> set([0,1919,2000,3,45,33,333,5])
set([0, 33, 3, 5, 45, 333, 2000, 1919]) 
```

对于数字`33`，我们有：

```
33 & (ht->num_buckets - 1) = 1 
```

实际上它是：

```
'0b100001' & '0b111'= '0b1' # 1 the index of 33 
```

*注意*在这种情况下`(ht->num_buckets - 1)`是`8-1=7`或`0b111`。

对于`1919`：

```
'0b11101111111' & '0b111' = '0b111' # 7 the index of 1919 
```

对于`333`：

```
'0b101001101' & '0b111' = '0b101' # 5 the index of 333 
```

有关 python 哈希函数的更多详细信息，最好阅读[python 源代码](https://hg.python.org/cpython/file/661cdbd617b8/Objects/dictobject.c#l106)中的以下引号：

> 未来的主要微妙之处：从模拟随机性的意义上说，大多数散列方案都依赖于具有“良好”的散列函数。Python 没有：它最重要的散列函数（用于字符串和整数）在常见情况下非常有规律：
> 
> ```
> >>> map(hash, (0, 1, 2, 3))
>   [0, 1, 2, 3]
> >>> map(hash, ("namea", "nameb", "namec", "named"))
>   [-1658398457, -1658398460, -1658398459, -1658398462] 
> ```
> 
> 这不一定是坏事！相反，在大小为 2**i 的表中，将低位 i 位作为初始表索引非常快，并且对于由连续范围的 int 索引的 dicts 完全没有冲突。当键是“连续的”字符串时，情况大致相同。因此，这在常见情况下提供了优于随机的行为，这是非常可取的。
> 
> OTOH，当发生冲突时，填充哈希表的连续切片的趋势使得良好的冲突解决策略至关重要。只取哈希码的最后 i 位也是易受攻击的：例如，将列表`[i << 16 for i in range(20000)]`视为一组键。 **由于整数是它们自己的哈希码，并且这适合大小为 2**15 的字典，因此每个哈希码的最后 15 位都是 0：它们*都*映射到同一个表索引。**
> 
> 但迎合不寻常的情况不应该减慢通常的情况，所以无论如何我们只取最后 i 位。剩下的工作由碰撞解决来完成。如果我们*通常*在第一次尝试时就找到了我们正在寻找的密钥（事实证明，我们通常会这样做——表加载因子保持在 2/3 以下，所以我们的胜算非常大），那么它保持初始索引计算便宜是最有意义的。

* * *

[* 类的哈希函数`int`：]

```
class int:
    def __hash__(self):
        value = self
        if value == -1:
            value = -2
        return value 
```

# javascript - 如何检查加载的 Javascript 代码的完整性

> ID：15479930
> 
> 赞同：7
> 
> 时间：2013-03-18T14:59:14.370
> 
> 标签：javascript

我运行一个使用浏览器端 Javascript 加密和解密比特币密钥的比特币钱包。

我想让 javascript 在 Github 上可供审查，然后从 github 存储库加载 javascript。

我的问题是我需要检查加载的 Javascript 的完整性，以确保在 Github 上没有被篡改。

我怎样才能最好地做到这一点？会不会是这样的。

1.  使用 ajax 调用加载远程 Javascript。
2.  MD5 哈希和比较。
3.  如果状态良好，执行它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-06-07T13:24:21.397

现在有（或很快将有）一种优雅的方式来实现这一目标（在提出问题后 2 年）。

[http://www.w3.org/TR/SRI/](http://www.w3.org/TR/SRI/)

您现在可以在脚本标签内指定“完整性”参数：

```
<script src="https://github.com/<path>/yourscript.js"
        integrity="sha256-SDf......"> 
```

这不适用于通过 AJAX 请求加载的脚本。但是您可以潜在地将脚本引用为指向 CDN 的脚本标签（最好不要直接在 github 上）

# language-agnostic - 跟踪一行中的条目数

> ID：15479940
> 
> 赞同：0
> 
> 时间：2013-03-18T14:59:48.347
> 
> 标签：language-agnostic

我有一堆用户可以参加的比赛。任何时候都有大约 10 个活跃的比赛。每小时都会举行一场新的比赛，而最古老的比赛结束。我想跟踪用户连续参加了多少场比赛。唯一的问题是用户可以无序参加比赛，但只要他们在每场比赛结束前参加比赛，他们仍然应该获得积分。

我已经研究了一些可能的解决方案，但每一个似乎都有非常难以检测的可怕边缘情况。我错过了什么还是这只是一个非常困难的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:30:01.587

所以基本上我通过在每次比赛结束时更新用户记录来跟踪用户参加的最后一场比赛。然后我检查这个比赛是否与之前结束的比赛相匹配。如果是这样，我会增加他们的 CompetitionStreak 计数器。如果没有，我将计数器重置为 1。这似乎是最好的方法，我不敢相信我以前没有意识到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T17:05:23.163

您可以使用[给定序列的最长递增子序列](http://www.algorithmist.com/index.php/Longest_Increasing_Subsequence)(O(n^2))。还有 O(n) 和 O(n log n) 方法。

你也可以看看这个问题：[Find the maximum subset of it which form a sequence](https://stackoverflow.com/q/7683077/509840)。

# forms - 带有空行的 symfony2 表单集合

> ID：15479941
> 
> 赞同：0
> 
> 时间：2013-03-18T14:59:50.243
> 
> 标签：forms, symfony

我有一个带有集合的表格：

```
$builder->add('languages', 'collection', array(
    'type'           => new LanguageType(),
    'allow_add'      => true,
    'allow_delete'   => true,
    'by_reference'   => false
)); 
```

在树枝模板中，我用空（LanguageType）渲染了一个附加行。为此，我使用原型并替换**名称**。

在控制器中，我绑定请求并丢弃设置器中的“空”语言：

```
public function addLanguage($lang)
{
    if($lang->getLanguage())
    {
        $this->languages->add($lang);
    }
    // discard the others
} 
```

由于某种原因，“空”行通过 NotBlank 验证器引发验证错误。

我唯一可行的解​​决方案是从原始请求中删除空行，但这很难看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T16:21:18.157

您的解决方案是有效的。

否则，您可以将选项设置`required`为`false`on，`$builder->add('lang')`但是您必须自己进行一些额外的检查。

```
$builder->add('lang', 'text', array(
    'required' => false
)); 
```

有关[所需选项](http://symfony.com/doc/current/reference/forms/types/text.html#required)的文档。

或者您可以创建一些 JS 代码，仅当字段不为空时才注入输入的名称（具有空名称的输入不会发送其值）。它也不是很好，但它有效。

# svn - SVN - 如何在颠覆中限制某些用户的子文件夹

> ID：15479944
> 
> 赞同：0
> 
> 时间：2013-03-18T14:59:56.707
> 
> 标签：svn, subversive

我正在使用带有授权策略的 SVN。

这是我的项目目录：

```
-project
  -grails-app
    -domain
      -compte
      -contrat
      -parametrage
      -securityplugin
      -credoc 
```

我想授予特定用户（user2），仅读取/写入 /project/grails-app/domain/compte 目录。

我在我的 authz 文件中尝试过

> ```
> [project:/project/grails-app/domain/compte]
> user2 = rw 
> ```

效果很好！但是父目录是被禁止的。

**当我想阅读 /project/grails-app/domain 时，我只想查看“compte”目录。**

太感谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T15:49:01.873

听起来事情正在按设计进行。你是如何为 svn 服务的？如果您通过 http 提供服务，您可以重写 url，类似`http://server/repo/compte`但这`http://server/repo/project/grails-app/domain/compte` 似乎很痛苦 - 我不会打扰。

# opengl - 检索着色器存储缓冲区的属性

> ID：15479945
> 
> 赞同：3
> 
> 时间：2013-03-18T14:59:58.760
> 
> 标签：opengl, glsl

我想检索着色器存储缓冲区的一些属性：

```
struct A{
   float x;
   float y;
   vec4  v;
};

struct B{
    vec3 u;
};

layout(std430) buffer foo{
   B b;
   A a[];
}; 
```

假设缓冲区处于活动状态。通过 glGetProgramResourceiv() 检索缓冲区的大小可以工作并产生 48 个机器单元。但是检索缓冲区变量的偏移量和“a”的数组步幅是行不通的。

```
const GLenum props[] = {GL_OFFSET};
GLint* offset = new GLint;
GLuint varIndex = glGetProgramResourceIndex(_progID, GL_BUFFER_VARIABLE, "b");
glGetProgramResourceiv(_progID, GL_BUFFER_VARIABLE, varIndex, 1, props, 1, NULL, offset); 
```

varIndex 始终为“GL_INVALID_INDEX”。如何获取所有缓冲区变量的偏移量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-19T00:35:45.140

这是一个无效的索引，因为*没有*变量`b`。有`b.u`，但没有`b`。[就自省 API](http://www.opengl.org/wiki/Program_Introspection#Naming)而言，唯一存在的变量是非用户定义类型的变量。

结构只是聚合；成员是这些聚合中的实际值。

# vb.net - VB中去除重复的代码优化

> ID：15479958
> 
> 赞同：0
> 
> 时间：2013-03-18T15:00:36.873
> 
> 标签：vb.net, optimization, duplicates

我正在寻找优化我的代码。具体这个过程

1.  计算一组位置（基本上是网格上的正方形）
2.  列出所有已计算的位置
3.  然后我遍历所有这些位置，一次 1 个。

我遇到的问题是删除或不包括列表中的重复位置。我试过有一个整数列表（表示位置的整数），但它仍然很慢。为了让您了解这些数字：我说的是至少 15,000 个不同的位置计算和大约 1,000,000 个可能的位置。

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T02:08:25.673

这是我从字符串数组中删除重复项的方法，也许它会对您有所帮助：

```
 Dim OneDimensionalTable(1000) As String

  ....

  OneDimensionalTable = RemoveDuplicates(OneDimensionalTable)

  .....

 Private Function RemoveDuplicates(ByVal items As String()) As String()

    Dim noDupsArrList As New ArrayList()
    For i As Integer = 0 To items.Length - 1
        If Not noDupsArrList.Contains(items(i).Trim()) Then
            noDupsArrList.Add(items(i).Trim())
        End If
    Next

    Dim uniqueItems As String() = New String(noDupsArrList.Count - 1) {}
    noDupsArrList.CopyTo(uniqueItems)
    Return uniqueItems

End Function 
```

# cocoa-touch - UINavigationController 在推送时动画，但在点击后退按钮时不动画

> ID：15479959
> 
> 赞同：2
> 
> 时间：2013-03-18T15:00:43.347
> 
> 标签：cocoa-touch, animation, ios6, uinavigationcontroller

当点击导航栏按钮项时，我正在执行情节提要，从视图控制器 A 到视图控制器 B，它与推送动画一起工作正常。但是当我点击后退按钮（没有自定义代码）时，前一个视图（A）只是弹出到位而没有滑动动画。当我做 a 时也会发生同样的情况`[self.navigationController popViewControllerAnimated:YES]`，即没有动画。我已经确定我只弹出一次。

这已经在模拟器和设备上进行了测试。

我怀疑这与卸载视图控制器 B 或类似情况时发生的事情有关，但我不能指望它。我正在处理 B 中的 ABRecordRef 属性，但我试图在适当的时候小心地在 setter 中调用 CFRetain 和 CFRelease。我正在调用各种 setter 和 getter 中的 outlet，但再次小心，仅在加载视图时才这样做，以防会导致视图在卸载后重新加载。没有成功。

终于在 B's 做了一个登录`viewWillDisappear`，并`animated`设置为 false。为什么？

我不知道接下来要做什么，我的 segue 在情节提要中具有“推动”风格。

# c# - 使用 Bit Miracle 的 LibTiff.Net 更改分辨率

> ID：15479960
> 
> 赞同：0
> 
> 时间：2013-03-18T15:00:43.823
> 
> 标签：c#, winforms, libtiff, libtiff.net

我使用 Bit Miracle 的 LibTiff.Net 将扫描图像转换为 tiff 文件，但我想保存 200dpi 的图像，即使是用 300 dpi 扫描的图像我在 Bit Miracle 站点示例中找到了这个

```
 tif.SetField(TiffTag.XRESOLUTION, img.HorizontalResolution);
 tif.SetField(TiffTag.YRESOLUTION, img.VerticalResolution); 
```

但我进行了此更改以始终将分辨率设置为 200dpi ：

```
 tif.SetField(TiffTag.XRESOLUTION, 200);
 tif.SetField(TiffTag.YRESOLUTION, 200); 
```

在 tif 文件属性中它说 200 dpi 但文件大小在更改前后不变 163 Ko，

我搜索了代码中使用的所有分辨率，并将其设为 200，但文件大小始终相同。

如果我更改了`SetField`我在文件属性中得到的值，但没有在图像的重新分辨率中得到它（所有分辨率测试的大小始终相同）

如何更改目标 tif 的分辨率？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T16:57:33.773

LibTiff.Net 是一个编解码器库。它不是为重新采样图像而设计的。

更改 dpi 值只会影响图像的打印尺寸，不会影响图像数据。您应该自己重新采样数据。

# php - php-form-b uilder-class 复选框值

> ID：15479962
> 
> 赞同：0
> 
> 时间：2013-03-18T15:00:52.573
> 
> 标签：php, arrays

我正在使用 php-form-b​​uilder-class 并尝试将数组传递给值以将框标记为已选中，但是如果有键，该数组将不起作用。无论如何要删除或返回数组

```
array("0", "1", "2", "3") 
```

代替

```
Array ( [0] => "0" [1] => "1" [2] => "2" [3] => "3") 
```

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:02:58.827

您要转储的数组等同于第一个数组（即 PHP 中始终存在“键”，即使默认情况下它们是有序整数）。也许你可以尝试使用[`array_values($array)`](http://www.php.net/manual/en/function.array-values.php)

# python - Best way to detect floating round off error in python

> ID：15479967
> 
> 赞同：0
> 
> 时间：2013-03-18T15:00:57.973
> 
> 标签：python, floating-point

So I have a list of floating numbers, some of them have round off errors and appears in the form `0.3599999`. It is trivial to detect by convert it to string and see if there is a bunch of `999` following. I wonder how a python hacker will do for this or if there is a mathematical way to do this.

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:15:13.760

Consider using Python's decimal module

```
>>> from decimal import Decimal
>>> Decimal(0.35)
Decimal('0.34999999999999997779553950749686919152736663818359375') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:20:55.107

Also have a look at Numpy's [`assert_approx_equal()`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.testing.assert_approx_equal.html) function:

```
>>> np.testing.assert_approx_equal(0.12345677777777e-20, 0.1234567e-20)
>>> np.testing.assert_approx_equal(0.12345670e-20, 0.12345671e-20,
                               significant=8)
>>> np.testing.assert_approx_equal(0.12345670e-20, 0.12345672e-20,
                               significant=8)
...
<type 'exceptions.AssertionError'>:
Items are not equal to 8 significant digits:
 ACTUAL: 1.234567e-021
 DESIRED: 1.2345672000000001e-021 
```

# mysql - 从多表 SELECT 的特定表中删除行

> ID：15479968
> 
> 赞同：1
> 
> 时间：2013-03-18T15:00:58.843
> 
> 标签：mysql, sql, sql-delete

我有这个`SQL`声明`MSQL`，可以准确地选择我想要的（我正在寻找并尝试删除旧数据）：

```
SELECT * 
FROM `reviews` as r
JOIN items as i
ON i.item_id = r.item_id
JOIN master_cat as c
ON i.cat_id = c.cat_id
WHERE category is null 
```

现在，我需要一种方法来仅从名为`reviews`. 我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T15:01:55.443

`DELETE`声明将是，

```
DELETE r
FROM   reviews r
       INNER JOIN items i ON i.item_id = r.item_id
       INNER JOIN master_cat c ON i.cat_id = c.cat_id
WHERE  category is null 
```

# drupal - drupal 7，从以前的数据中预填充字段值

> ID：15479970
> 
> 赞同：0
> 
> 时间：2013-03-18T15:01:03.207
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-forms

我的情况是，当我单击添加新内容时，可以说键入“项目”，我希望这些字段预先填充最后输入的值。由于有 40 多个字段，我不想单独填写每个字段。 .

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T10:25:57.527

那么答案可能并不那么简单。我能想到的最好方法是创建一个自定义模块，hook_form_alter 节点编辑表单并更改您关心的表单字段/元素的#default_value。

因此，在此的 defualt_value 属性中，您可以实现一个自定义函数，该函数带来您需要的数据或硬编码值

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-19T05:57:25.613

在drupal中使用devel模块它为特定的内容类型手动创建内容我认为它很有用4 u

# c# - 发起类和继承类有什么区别

> ID：15479971
> 
> 赞同：-1
> 
> 时间：2013-03-18T15:01:04.727
> 
> 标签：c#, inheritance

我有如下所示的三个 A、B 和 C 类

```
public class A
{
    public void add(int i, int k)
    {
    }
}
public class B:A
{
    public void AddInt()
    {
        add(1, 2);
    }

}
public class C
{
    public void AddInt()
    {
        A objA = new A();
       objA.add(1, 2);
    }     

} 
```

我们要访问“A”类方法Add，有两种方式

1) 启动“A”类，然后访问 Add 方法

2）继承“A”类，然后访问Add方法

如果这两种方式都提供相同的功能，那么为什么 C# 提供两种方式来实现相同的功能。

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2013-03-18T15:31:34.283

> 初始化一个类和继承一个类有什么区别？

首先，您要查找的词是**实例化**，而不是**启动**。

> 实例化类和继承类有什么区别？

*继承*表达了两个类之间的“是一种”关系：

*   《纽约时报》*是一种*报纸。
*   长颈鹿*是一种*动物。
*   苹果*是一种*水果。

在每种情况下，第一种是“更多派生”类型——它*更具体*——第二种是“更少派生”类型，或“基本”类型。它*更一般*。水果比苹果还多。

在 C# 中，当你在两个类之间建立继承关系时，你会得到两件事：

*   赋值兼容性：您可以在需要基类型表达式的情况下使用派生类型更高的表达式。
*   成员继承：基类的所有方法、事件、索引器、运算符、字段、属性和嵌套类型都自动成为派生类的成员。（构造函数和析构函数不可继承）。

*实例化*是创建一个类型的新实例的过程。

*   在这里，让我给你一份今天的《纽约时报》。
*   在这里，让我给你一只长颈鹿。
*   来，我给你一个苹果。

所以在 C# 中：

```
class Fruit {}
class Apple : Fruit { } // Apple inherits from Fruit
class Program {
  static void Main() {
    Apple apple = new Apple(); // Instantiating a new Apple
  }
} 
```

有道理？

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-03-18T15:04:23.440

它根本不是`C#`关于基本`OOP`概念的`C#`，在这种情况下，它只是简单地表现出来，是[面向对象](http://en.wikipedia.org/wiki/Object-oriented_programming)和 [强类型](http://en.wikipedia.org/wiki/Strong_typing)语言。

“初始化”是创建给定类型的实例：`A`在您的情况下。

第二个示例是[多态](http://msdn.microsoft.com/en-us/library/ms173152%28v=vs.80%29.aspx)，您从给定类型`A`派生并创建派生类型 B，能够访问`A`该类的公共/受保护成员。

**在这种情况下**访问行为是相同的，但其来源**完全不同**。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-18T15:08:30.840

您正在将人类与食物进行比较……对，没有可比性

启动会花费您系统的一些 RAM。

继承允许您启用通用代码的可重用性

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T15:03:59.517

这两种方法都是可用的，因为您的`add`方法在类 A 中是公共的。如果您只想在继承的类中使用它，请将其更改为受保护的。简单地说，继承使得除了私有属性和方法之外的所有属性和方法都可以在继承的类中使用。在您的情况下，类`B`是从类继承的，`A`并且类`B`本身的实例将是您调用方法的实例`add`。在类`C`中，您只需创建一个类的实例`A`并在其上调用方法`add`。如果您阅读有关[Access Modifiers](http://msdn.microsoft.com/en-us/library/wxh6fsc7%28v=vs.71%29.aspx)和[Inheritance](http://msdn.microsoft.com/en-us/library/ms173149%28v=vs.80%29.aspx)的内容，所有这些概念对您来说都会更加清晰。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-03-18T15:05:56.413

将类视为如何构建某物的模板或计划。然后，当您使用模板或计划建造一个时（想想建筑师的房屋计划，以及根据这些计划建造的众多房屋之一），我们用来描述此过程的词是“*实例化*”和“*初始化*”。

您使用类模板（建筑师计划）***实例化***对象的实例（建造房屋），然后对其进行***初始化***（油漆和装饰房屋）。

*另一方面，*继承指的是完全不相关的东西，在如何定义类方面，使用另一个现有类作为基础或****base** *line 来开始定义将*扩展*基础或*基*类的新类。当一个类从另一个类继承时，这意味着派生类的“实例”会自动获取在父基类中定义的所有内容，而无需在子类中重新定义它。*

 ** * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-18T15:25:48.830

类是一种类型，充当模板，允许您创建这种类型的对象。此类对象的创建也称为**实例化**。这个实例化过程包括为这个对象分配内存（**分配**）然后初始化这个对象，即给它的字段初始值。后者称为**初始化**。

**继承**是完全不同的东西。继承是关于通过从基类（也称为超类或父类）继承现有代码来创建新类（模板）。这个新的派生类（也称为子类或子类）用作创建新类型对象的模板。

派生类可以修改从其基类继承的行为并扩展其可能性。继承创建类之间的关系。子类是与继承层次结构中它们之上的超类兼容的赋值。*

# javascript - 使用 AngularJS 和 Twitter 流 API 访问 JSON 数据

> ID：15479973
> 
> 赞同：0
> 
> 时间：2013-03-18T15:01:10.557
> 
> 标签：javascript, json, angularjs, coffeescript

首先，我正在开发我的 tweetganic 应用程序，该应用程序需要访问 twitter 流 API、客户端并通过 AngularJS 管理结果。

这是我的 Coffeescript/JS：

```
@AccountCtrl = ["$scope", "$http", ($scope, $http) ->
  $scope.doSearch = ->
    $scope.twitter = $http.post("https://tweetganic:password@stream.twitter.com/1.1/statuses/filter.json",
        track: $scope.searchTerm)
] 
```

当我单击运行 doSearch() 的按钮时，我在控制台中收到此错误：

```
OPTIONS https://stream.twitter.com/1.1/statuses/filter.json 401 (Unauthorized) angular.js:9231
 (anonymous function) angular.js:9231
 sendReq angular.js:9066
 $http angular.js:8857
 $http.(anonymous function) angular.js:9012
 $scope.doSearch twitter_accounts.js:9
 (anonymous function) angular.js:6299
 (anonymous function) angular.js:12880
 Scope.$eval angular.js:7994
 Scope.$apply angular.js:8074
 $delegate.__proto__.$apply localhost:500
 (anonymous function) angular.js:12879
 (anonymous function) angular.js:1959
 forEach angular.js:134
 eventHandler angular.js:1958
XMLHttpRequest cannot load https://stream.twitter.com/1.1/statuses/filter.json. Origin http://localhost:3000 is not allowed by Access-Control-Allow-Origin. 
```

为什么我不知道如何通过 Angular 打开与流式 Twitter api 的连接？

存储库：[https ://github.com/brianpetro/tweetganic](https://github.com/brianpetro/tweetganic)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T16:24:06.397

这是一个 CORS 问题。twitter 流 api 不支持 CORS。

您可以使用代理[https://github.com/gr2m/CORS-Proxy](https://github.com/gr2m/CORS-Proxy)

# python - 在 Python 2.7 中使用语句 True 和 False

> ID：15479981
> 
> 赞同：2
> 
> 时间：2013-03-18T15:01:37.683
> 
> 标签：python, if-statement, command-prompt

我希望为我的 Python (2.7) 命令提示符使用语句“ `True`”和“ ”`False`

```
segmentation_accuracy(reference=REFERENCE, segmented=SEGMENTED, output=OUTPUT, method=METHOD, threshold=THRESHOLD, sep=SEP, header=HEADER) 
```

如果 header 是`True`打印一个带有标题的文本文件，如果 header 是`False`打印一个没有标题的文本文件。

在命令提示符中：

```
REFERENCE = raw_input("Reference (*.shp):")
SEGMENTED = raw_input("Segmented (*.shp):")
METHOD = raw_input("Method (ke, pu, clinton):")
if METHOD != "ke" and METHOD != "pu" and METHOD != "clinton":
    raise ValueError("%s is not a valid method" % METHOD)
if METHOD == "ke" or METHOD == "clinton":
    THRESHOLD = input("Threshold (0.0 - 1.0):")
    if not check_threshold(THRESHOLD):
        raise AccuracyException("Threshold of %s is not valid" % THRESHOLD)
else:
    THRESHOLD = None
SEP = raw_input("Sep:")
HEADER = raw_input("Header (True/False):")
if HEADER is not True or HEADER is not False:
    raise ValueError("%s is not valid" % HEADER)
# output 
OUTPUT = raw_input("Output (*.txt):") 
```

当我在 Windows 中运行命令提示符时，如果我设置`raw_input("Header (True/False):")` `True`或`False`，我总是得到`ValueError`

我也使用了这个组合

```
if HEADER != True or HEADER != False:
        raise ValueError("%s is not valid" % HEADER) 
```

有同样的问题

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-18T15:04:09.247

from 的返回值`raw_input`是字符串而不是布尔值。因此，尽管您的`is not True`和`is not False`测试具有明确定义的含义，但该含义并不是您想要的含义。您需要`HEADER`与字符串值进行比较。

因此，例如，您需要这样的代码：

```
if HEADER.lower() == 'true': 
```

我曾经`tolower()`进行不区分大小写的比较。您可能还想去除空白：

```
if HEADER.strip().lower() == 'true': 
```

我相信你可以填写针对`false`自己的测试。

* * *

即使你确实有一个布尔值，你也不应该使用类似`is not True`or的代码`is False`。您应该通过以下方式测试真相：

```
if somebool: 
```

或者

```
if not somebool: 
```

因为它更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:03:47.850

`HEADER`是一个字符串，而不是一个布尔值。这将导致`is`检查失败。您的比较运行如下：

```
>>> "True" is not True
True
>>> "True" is not False
True 
```

请注意，与 的比较`==`也会失败：

```
>>> "True" == True
False
>>> "True" == False
False 
```

尝试将值作为字符串进行比较：

```
if HEADER.tolower() == 'true':
    #do something
elif HEADER.tolower() == 'false:
    #do something else 
```

# c++ - 初始化结构的二维数组

> ID：15479983
> 
> 赞同：0
> 
> 时间：2013-03-18T15:01:39.580
> 
> 标签：c++, multidimensional-array, constructor, struct

通常结构的成员变量的初始化将在其构造函数中进行

```
struct line
{
  line()
  {
     length=0;
     name[0] = '\0';
  }
  int length;
  char name[10];
}; 
```

但是我如何将二维数组初始化为 0 或空值？

```
struct myValues
{
  myValues()
  {
    my2dDimension[0][0] = { 0 }; //shows error:expected an expression
  }
  int my2dDimension[20][2];
} 
```

如果我不初始化它们，它们将包含我不想要的垃圾值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-18T15:07:04.463

我会使用 memset

```
struct myValues
{
  myValues()
  {
    memset(my2dDimension, 0, sizeof my2dDimension);
  }
  int my2dDimension[20][2];
} 
```

memset 用给定的值（在这种情况下为零）填充一块内存到给定的字节大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T15:07:15.950

> 我如何将二维数组初始化为 0 或空值？

对于普通结构，波纹管初始化为 0：

```
struct SomeStruct{};
SomeStruct someStruct;
::memset ( &someStruct, 0, sizeof(SomeStruct) ); 
```

对于更高级的初始化类型，您可以查看[C++11 初始化列表](http://en.wikipedia.org/wiki/C++11#Initializer_lists)和[Boost.Assign](http://www.boost.org/doc/libs/1_39_0/libs/assign/doc/index.html)

# javascript - 原始 DOM 元素与 jQuery 对象

> ID：15479988
> 
> 赞同：1
> 
> 时间：2013-03-18T15:02:01.917
> 
> 标签：javascript, jquery

我正在查看以下来自[http://jqfundamentals.com/chapter/jquery-basics](http://jqfundamentals.com/chapter/jquery-basics)的显式迭代示例：

```
$( 'li' ).each(function( index, elem ) {
  // this: the current, raw DOM element
  // index: the current element's index in the selection
  // elem: the current, raw DOM element (same as this)
  $( elem ).prepend( '<b>' + index + ': </b>' );
}); 
```

注释被称为原始 DOM 元素，`elem`但随后代码调用`.prepend()`.`elem`

我刚刚开始使用 jQuery，但据我了解，您只能在 jQuery 对象上调用 jQuery 方法，*而不能*在原始 DOM 元素上调用。我是不是误会了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-18T15:02:54.083

该代码不调用`prepend`，`elem`它调用它`$(elem)`使其成为一个 jquery 对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-18T15:03:26.867

您再次将原始 DOM 元素转换为 jquery 对象。请参阅`elem`. `elem`是原始的，但是 `$(elem)`是 jquery 对象，因此您可以使用任何可用的 jQuery 函数（方法）`prepend`作为一个

```
 $( elem ).prepend( '<b>' + index + ': </b>' );
//-^-- here this $ sign 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-18T15:04:25.243

`elem`是一个原始的 DOM 元素。通过包装 elem`$(elem)`您正在从原始 DOM 元素创建一个 jQuery 对象。jQuery 允许你这样做。然后，您将调用`.prepend()`从创建的 jQuery 对象`elem`。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-18T15:41:13.317

这可能会有所帮助..

```
var test = document.getElementById('test') //returns a HTML DOM Object
var test = $('#test') //returns a jQuery Object
var test = $('#test')[0] //returns a HTML DOM Object 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-18T15:05:23.847

上例中的“elem”可以是任何标签（h1、p、body、标签组合、对 id 或类的特定引用），就像 CSS 一样。然后“前置”是对该元素执行的操作。在这种情况下，前置操作采用一个参数，这是另一个元素，它将作为页面上与您选择的“elem”匹配的每个元素的第一个子元素动态放置到 html 中

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-18T15:20:24.970

jQuery 创建一个“包装”元素 - 一个 jQuery 对象，所以也许这会给你一些见解：

```
$('li').each(function (index, elem) {
    alert(elem === this); // true
    alert($(this) === $(elem)); // false
    alert(elem.tagName + $(elem).tagName); // LI undefined
    alert(typeof elem + typeof $(this));// object object
    alert(elem.tagName ===  $(this).prop('tagName')); // true
}); 
```

请注意，第二个警报 = false，因此即使它们“引用”相同的元素，$(this) 和 $(elem) 也不是同一个包装对象。请注意，“原始”元素具有 .tagName 而 jQuery 包装对象没有。

所以为了你

```
$(elem).prepend('<b>' + index + ':</b>'); 
```

jquery 采用包装的 elem ( `$(elem)`)，然后在新包装的 'b' 元素前添加索引和“：”字符作为其内容文本

编辑：在另一个示例中将 tagName 的属性示例添加到 jQuery 对象并添加了前置说明。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-18T15:04:08.077

与[Prototype](http://prototypejs.org/)不同，jQuery 不扩展原生对象。这就是为什么你必须使用`$`函数来获得一个 jQuery 包装的。

# java - 哈希图中的哈希图的平均值

> ID：15479992
> 
> 赞同：0
> 
> 时间：2013-03-18T15:02:07.323
> 
> 标签：java, hashmap, simpledateformat

我正在尝试从日志文件中查找用户操作之间的时间平均差异。因此，例如，对于用户操作`ua, login, login`和下一个用户操作`ua, disclaimer ok`，我想减去这两个操作之间的时间，并且每次出现特定顺序时，将这些时间加在一起并除以该模式的出现次数。

这是我的哈希图

```
Map<String, HashMap<String, NumberHolder>> uaCount =
                        new HashMap<String, HashMap<String, NumberHolder>>(); 
```

`NumberHolder`定义为

```
private class NumberHolder
{
    public int occurences;
    public int sumtime_in_milliseconds;
} 
```

`sCurrentLine`并且`sNextLine`是他们的名字所表明的。迭代时，`sNextLine`变为 sCurrentLine 等等。

在我的代码中，我遍历日志文件，打开它们，检查一行是否是用户操作，声明`sCurrentLine`并`sNextLine`拆分这两行以隔离用户操作部分。然后我从两行中分离出动作的时间和日期，使用简单的日期格式并解析它们，然后我发现了不同之处。我想要的输出是`ua, login, login --> ua, disclaimer, ok AVERAGE = 38 seconds`. 如果您想查看整个代码，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T18:58:38.273

伪代码：

```
function void addLinePair(string1, string2, deltaTime) {
    // Assumes string1 and string2 have been stripped of variable text

    keyString = string1 + "|" + string2;

    hashValue = findInHashTable(keyString);

    if (hashValue == <not found>) {

      hashValue = new NumberHolder
      insertInHashtable(hashValue, keyString)

    }

    hashValue.sumtime_in_milliseconds += deltaTime
    hashValue.occurrences++
}

function void printAverages {

    for (key,value in hashTable) {
        string1 = first part of key
        string2 = second part of key
        average = (float)value.sumtime_in_milliseconds / (float)value.occurrences
        print (string1 + " --> " + string2 + ", AVERAGE = " + average + " seconds")
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:47:51.017

在我看来，您为什么使用两级地图并不完全清楚。如果你正在寻找平均时间，你应该经历一个然后再到下一个。即平均时间是基于每一个和它之后的时间之间的时间，而不是每个和每隔一个之间的时间。

```
List<String> logLines = new List<String();

//populate logLines

getLogTime(String a, String b){
    long logTimeA = -1;
    long totalLogTime = 0;
    long count;
    for(String logLine : logLines){
        if(logLine.equals(a)){
            logTimeA = parseForTime(logLine);
        }
        else if(logLine.equals(b) && logTimeA >= 0){
            totalLogTime += logTimeA - parseForTime(logLine);
            count++
            logTimeA = -1;
        }
        //if you want it to only do the one immediately after
        else if(!logLine.equals(b)){
            logTimeA = -1;
        }
    }
    if(count == 0){
        return 0;
    }
    return totalLogTime/count;
} 
```

# php - 使用 for 循环优化数组

> ID：15479994
> 
> 赞同：-2
> 
> 时间：2013-03-18T15:02:11.003
> 
> 标签：php, arrays, for-loop

我同意构建一个计算“priceinterval”的函数。这意味着您要构建一个数组，您希望为 1-3 之间的示例编号分配值以分配“1-3”示例 $array [2] => "1-3" 和 4-10 $array[5] = > “4-10” 我已经构建了一个可以工作但想要优化函数的函数，一个擅长 for 循环的人；）

```
public function CalcPris() {

    $Prisinterval = array();

    for ($i = 0; $i <= 3; $i++) {
        array_push($Prisintervall, "1-3");
    }
    if ($i = 4) {
        for ($i = 4; $i <= 10; $i++) {
            array_push($Prisintervall, "4-10");
        }
    }
    if ($i = 11) {
        for ($i = 11; $i <= 50; $i++) {
            array_push($Prisintervall, "11-50");
        }
    }
    if ($i = 51) {
        for ($i = 51; $i <= 100; $i++) {
            array_push($Prisintervall, "51-100");
        }
    }
    var_dump($Prisinterval);
} 
```

此功能的原因是您应该获得一个价格下限。

在我的下一步是检查数字“2”的价值，因此，请我构建一个已经完成的数组，其值为 1-100

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T15:09:19.083

你的方法完全不对......你想要这样的东西：

```
function printerval($int){
    if($int >= 1 && $int <= 3){
        return "1-3"; 
    }elseif($int >= 4 && $int <= 10){
        return "4-10";
    }elseif($int >= 11 && $int <= 50){
        return "11-50";
    }elseif($int >= 51 && $int <= 100){
        return "51-100";
    }   
    return "error";
} 
```

调用`printerval(2);`将返回字符串“1-3”

好吧，这似乎是一个愚蠢的要求：

```
function printerval(){
    $arr= array();
    for($i=1;$i<=100;$i++){
        if($i >= 1 && $i <= 3){
            $arr[$i]= "1-3"; 
        }elseif($i >= 4 && $i <= 10){
            $arr[$i]=  "4-10";
        }elseif($i >= 11 && $i <= 50){
            $arr[$i]=  "11-50";
        }elseif($i >= 51 && $i <= 100){
            $arr[$i]=  "51-100";
        }   
    }
    return $arr;
} 
```

虽然这是错误的方法，但它现在应该回答这个问题..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T15:54:35.490

好的，要优化此功能，您应该执行以下操作：

1.  前往最近的技术书店，或在 oreilly.com 上注册。
2.  购买一份[Learning PHP5](http://shop.oreilly.com/product/9780596005603.do)。
3.  `if ($x = 4)`阅读本书并了解和之间的区别`if ($x == 4)`。
4.  阅读本书并了解 for 循环和数组。

# linux - “启动-停止-守护进程：无法统计”

> ID：15479998
> 
> 赞同：10
> 
> 时间：2013-03-18T15:02:21.220
> 
> 标签：linux, bash, debian, start-stop-daemon

我有以下启动-停止脚本：

```
NAME="examplestartstop"
PATH="/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin:/opt/node/bin"
LOGFILE="/var/log/$NAME/start-stop-daemon.log"
APP_DIR="/usr/bin"
APP_BIN="tail -250f /var/log/apache2/error.log"
USER="minecraft"
GROUP="minecraft"

# Include functions
set -e
. /lib/lsb/init-functions

start() {
  echo "Starting '$NAME'... "
  start-stop-daemon --start --chuid "$USER:$GROUP" --background --make-pidfile --pidfile /var/run/$NAME.pid --exec "$APP_DIR/$APP_BIN" $LOGFILE || true
  echo "done"
} 
```

当我尝试运行脚本时，我得到以下输出：

```
$ ./test start
Starting 'examplestartstop'...
start-stop-daemon: unable to stat /usr/bin/tail -250f /var/log/apache2/error.log (No such file or directory)
done 
```

我做错了`$APP_DIR/$APP_BIN`什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-18T15:09:57.153

您将命令名称*和*命令参数作为要执行的命令传递。`start-stop-daemon`寻找一个名为`/usr/bin/tail -250f /var/log/apache2/error.log`当然不存在的命令。相反，您想调用类似（不重要的部分）：

```
APP_DIR="/usr/bin"
APP_BIN="tail"
APP_ARGS="-250f /var/log/apache2/error.log"
start-stop-daemon --start --exec "$APP_DIR/$APP_BIN" -- $APP_ARGS 
```

（注意命令及其参数之间的*-- ）*