# StackOverflow 问答 15216000-15216999

# sql - COUNT 语法的意外结果

> ID：15216003
> 
> 赞同：1
> 
> 时间：2013-03-05T04:45:24.640
> 
> 标签：sql

我想显示属于两个表的两列的行数。然而，结果不是我所期望的。我真的很困惑。你能建议吗？谢谢。

```
SELECT COUNT(TABLE1.INTEREST) FROM INCOME; // RESULT = 10

SELECT COUNT(TABLE2.LOAN) FROM EXPEND;  //RESULT = 10

SELECT COUNT(TABLE1.INTEREST), COUNT(TABLE2.LOAN) FROM INCOME, EXPEND;  //RESULT = 100 
```

为什么我执行第三条 SQL 命令的结果是“100|100”？我希望结果是“10|10”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:46:55.360

在您的最后一个查询中执行[笛卡尔积。](http://en.wikipedia.org/wiki/Join_%28SQL%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:48:39.770

这是因为您将每一行加入`INCOME`到每一行`EXPEND`（称为笛卡尔积）

而不是这样做，`FROM INCOME, EXPEND`你需要做类似的事情

```
FROM INCOME
JOIN EXPEND
ON Income.SomeColumn = Expend.SomeColumn 
```

或在当前查询中添加 where 子句：

```
FROM INCOME, EXPEND
WHERE Income.SomeColumn = Expend.SomeColumn 
```

# jquery - 如何禁用第一张图片上的上一个按钮？（基本的 JQUERY 滑块）

> ID：15216008
> 
> 赞同：0
> 
> 时间：2013-03-05T04:45:40.430
> 
> 标签：jquery, slider

我正在使用基本的 jquery 滑块，我想禁用第一个/最后一个图像上的上一个/下一个按钮。

我怎样才能做到这一点？

链接：[http ://www.wapsmag.com/archives/7996](http://www.wapsmag.com/archives/7996)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:38:54.350

使用条件语句 ..Within that use **(#rightClick).unbind('click')**。另一边的类似代码。

# javascript - 从父级中删除一个子级并将其作为兄弟级添加到父级

> ID：15216016
> 
> 赞同：1
> 
> 时间：2013-03-05T04:45:50.477
> 
> 标签：javascript

我有一个子弹区域

*   你好
*   如何
*   是
*   你

不，我在选择

*   是并更改为数字子弹。所以我的清单应该改变

*   你好
*   如何

1.  是

*   你

1.  想在第二个孩子之后结束光盘子弹。
2.  想将第三个孩子作为兄弟姐妹添加到父母。
3.  想再次为第四个孩子制作光盘子弹并将其作为兄弟姐妹添加到父母。

我怎样才能做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T21:17:41.830

这实际上是一个不平凡且非常有趣的问题。但是，您首先需要了解几件事：

1.  列表项上的项目符号由其列表决定；`ul`用于无序列表（即磁盘项目符号），并且`ol`用于有序列表（即编号项目符号）。
2.  `li`如果没有它的父母是`ul`or ，你就不能拥有 a `ol`。
3.  你不能让 a`ul`成为 a 的直接孩子，`ol`反之亦然（他们可以是 an 的孩子`li`，但它们将成为子列表）

这意味着每次切换列表时，您需要确保要切换的项目具有正确（和相反）类型的父项，并且它之前和之后的项目也在（单独的）列表中正确的类型。在许多情况下，您需要创建这些列表（或在它们为空时删除它们）。

无论如何，言语一文不值，这是代码（我使用的是jQuery，但无论您使用什么，想法都应该相同）：

```
$('li').on('click', function () { 
    var $listItem = $(this);
    var $list     = $(this).parent();
    var $items    = $list.children();
    var itemIndex = $items.index($listItem);
    var numItems  = $items.length;

    var curType = $list.is('ul')   ? 'ul' : 'ol';
    var newType = curType === 'ul' ? 'ol' : 'ul';

    var $prev = $list.prev();
    var $next = $list.next();

    if (itemIndex === 0) {
        // The item we're switching is the first Item in the list
        if (!$prev.is(newType)) {
            $prev = $('<' + newType + '/>');
            $prev.insertBefore($list);
        }
        $prev.append($listItem);
    } else if (itemIndex === numItems - 1) {
        // The item we're switching is the last Item in the list
        if (!$next.is(newType)) {
            $next = $('<' + newType + '/>');
            $next.insertAfter($list);
        }
        $next.prepend($listItem);
    } else {
        // The item is in the middle, we need to split the current list into 3.
        $tailList = $('<' + curType + '/>');
        $tailList.append($listItem.nextAll());
        $tailList.insertAfter($list);

        $middleList = $('<' + newType + '/>');
        $middleList.append($listItem);
        $middleList.insertAfter($list);
    }

    if (numItems === 1) {
        // list used to have only one Item, so it's now empty, and should be removed.
        $list.remove();

        if ($prev.is(newType) && $next.is(newType)) {
            // The two surrounding lists are of the same type and should be merged.
            $prev.append($next.children());
            $next.remove();
        }
    }
}); 
```

我正在使用列表项上的单击事件来切换列表项。这是一个 jsFiddle 链接，供您使用实现并验证一切是否按预期工作：http: [//jsfiddle.net/8Z9rf/](http://jsfiddle.net/8Z9rf/)

代码绝对可以针对速度/性能进行优化，但我的目标是简单明了，我希望我能做到这一点。

# c# - 使用内存中的压缩文件夹

> ID：15216029
> 
> 赞同：0
> 
> 时间：2013-03-05T04:47:14.733
> 
> 标签：c#, .net, io, zip, memory-mapped-files

我正在制作一个 XNA 游戏，它使用了很多（目前约 2800 个）小资源文件。在未存档的情况下将它们从一个地方移动到另一个地方已经成为一个问题，所以我想也许我可以压缩它们并让游戏自动将它们解压缩到内存中，最好是。我还不需要写作能力，现在只需要阅读。

有没有一种简单的方法可以将文件夹解压缩到内存中并像访问这些文件一样，或者像磁盘上的常规文件一样简单？

* * *

我一直在阅读一些类似的问题，我看到很多人说操作系统（在我的例子中是 Windows）可以比 ram 驱动器更好地处理文件缓存。我现在只是解压缩和读取文件，但将来我可能需要修改或创建新文件，我希望它对用户来说是快速和无缝的。考虑到我未来的目标，也许我应该采取不同的方法来解决我当前的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:58:56.963

我没有亲自尝试过，但是如果您希望能够在内存中压缩/解压缩，您可以使用 a`MemoryStream`并将其传递到库中（例如[https://github.com/icsharpcode/SharpZipLib](https://github.com/icsharpcode/SharpZipLib)）。您可能需要记住的事情是，您是否只是将瓶颈转移到另一个瓶颈？

您也可以尝试类似在 HTML 中使用 Sprites 的方法。您将所有 Zip 合并为 1，并带有它们在文件中位置的索引。然后你将你的 FileStream.Position 移动到你正在寻找的资源的位置，阅读（你需要的数量）然后用它做你需要的事情。您需要确保如果您重建任何东西，您会重建所有组合索引等。然后您只需复制 1 个文件，碰巧在该文件中您有大约 2800 个较小的感兴趣段。

# javascript - 如何获取浏览器窗口内容的实际宽度？

> ID：15216032
> 
> 赞同：0
> 
> 时间：2013-03-05T04:47:26.297
> 
> 标签：javascript, jquery, html, positioning

我正在使用 JavaScript 定位我的元素。为了完美地做到这一点，我必须获得可用的水平空间量。糟糕的是，`$(window).width()`没有考虑滚动条的宽度。结果是这样的：

[坏 http://dl.dropbox.com/u/62862049/Screenshots/fb.png](http://dl.dropbox.com/u/62862049/Screenshots/fb.png)

在这里，“Pagina 1”包含在一个应该与窗口右边框对齐的小 div 中。好吧，它确实 - 从字面上看 - 忽略了覆盖部分 div 的滚动条，将“Página 1”的“1”扔到下一行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:01:33.930

这类似于之前的两个问题：

[如何在没有滚动条的jquery中获取元素的innerWidth](https://stackoverflow.com/questions/10692598/how-to-get-innerwidth-of-an-element-in-jquery-without-scrollbar)

和

[如何在没有（减号）滚动条的情况下获得屏幕宽度？](https://stackoverflow.com/questions/8339377/jquery-how-to-get-screen-width-without-scrollbar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:05:08.007

使用这个功能

```
function scrollbar_width() {

        var calculation_content = $('<div style="width:50px;height:50px;overflow:hidden;position:absolute;top:-200px;left:-200px;"><div style="height:100px;"></div>');
        jQuery('body').append(calculation_content);
        var width_one = jQuery('div', calculation_content).innerWidth();
        calculation_content.css('overflow-y', 'scroll');
        var width_two = jQuery('div', calculation_content).innerWidth();
        jQuery(calculation_content).remove();
        return (width_one - width_two);

    } 
```

现在计算可用

```
var availableWidth = $(window).width() - scrollbar_width(); 
```

# php - 将表记录动态打印到另一个表中

> ID：15216034
> 
> 赞同：0
> 
> 时间：2013-03-05T04:47:33.863
> 
> 标签：php, mysql

我动态检索用户的姓名记录并打印在一个表中，现在我想将所有这些记录打印到另一个具有不同字段字段的表中，例如，

```
table users:
1.
2.
3.
4.
5.
6. 
```

我使用提交按钮将所有记录动态地放入表中，

```
<?php

$username=$_POST['u_name'];
echo $username;

    $link = mysql_connect("localhost","root","") or die("Could not connect now");
    mysql_select_db("wp_trainee_management") or die("Database not found");

//$image_caption = $_POST['image_caption'];
//$image_username = $_POST['attendance'];
//$u_name = $_POST['u_name'];
$today = date("Y-m-d");

$insert = "insert into attendance (attendance_date,name,presents)
   values ('$today','".$username."','yes')";
        $insertresults = mysql_query($insert) or die(mysql_error());
?> 
```

*   当我单击提交按钮时，我希望将所有这些名称插入到另一个表中。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:02:57.940

您可以使用 foreach 函数将每条记录插入到另一个表中。

```
foreach($insertdata->result() as $user)
{
   $this->db->insert('attendance',array($user->attendance_date,$user->name,$user->presents));
} 
```

# android - 4.2.2 Android Eclipse 未知

> ID：15216042
> 
> 赞同：2
> 
> 时间：2013-03-05T04:48:07.617
> 
> 标签：android, eclipse

从 4.2.2 开始 - Eclipse 在我拉入设备时显示“未知”。这是我所做的：

*   将 Android SDK 更新至最新版本（21.1、16.0.2 - 工具、ADB 1.0.29）
*   尝试再次打开和关闭手机
*   再次打开和关闭调试模式
*   手机上只有个人资料
*   不同的 USB / 端口
*   多次重启。

这里有运气吗？

更新：

设备ID：014E1F310600E01D离线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:37:16.670

您没有指定您的设备名称和型号。我认为您没有为您的移动设备安装驱动程序。如果您已经安装，它会自动检测您的设备。要允许从非电子市场应用程序安装应用程序，请点击主屏幕上的菜单按钮，然后选择设置 >> 应用程序 >> 未知来源。

![在此处输入图像描述](../Images/c80f2d41c001fd16c60a9f0f870d680c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T09:17:37.850

我会忘记使用 USB 作为传输方式的 ADB 连接。使用来自不同制造商的几种设备，我除了遇到问题之外什么都没有。在 Play 商店中查找“ADB 无线”应用程序。这些允许您使用 WIFI 设置相同的连接。

目前我正在开发一个应用程序并以这种方式将三台设备连接到 ADB。像魅力一样工作，更可靠

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T00:19:32.110

我发现 PATH 指向旧的 adb （在更新（1.0.29）之前，但是一旦我去 /platform-tools/adb （通过运行 ./adb 设备） - 一切都解决了，现在设备是积极的。

希望这对其他人有帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-16T21:49:53.220

我更改了 USB 端口，它对我也很有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-07T11:15:43.350

您必须重新启动 ADB，如果设备屏幕上有任何通知，您必须接受它。

# 解析度 ：

打开eclipse后调试前，打开cmd然后运行“adb kill-server”，等待2-3秒再运行“adb start-server”，然后再次尝试运行程序，你会发现你的设备在线。

我希望这会有所帮助

# iphone - 如何根据iOS应用程序中文件夹结构中的格式对文件进行分组？

> ID：15216043
> 
> 赞同：0
> 
> 时间：2013-03-05T04:48:13.593
> 
> 标签：iphone, ios, ipad

我正在尝试制作一个应用程序，我可以在其中将来自两个访问的服务器的不同文件分组到各自的文件夹中。例如，来自两个服务器的所有图片都应该在图片文件夹中，所有音乐文件都应该在应用程序的音乐文件夹中。

由于我必须从服务器访问所有文件，我如何将上述文件夹中的所有文件分组。

任何建议如何从上述情况开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:56:33.270

通常与应用程序的 sanboxed 文件系统的交互是通过 NSFileManager 类完成的。

[http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSFileManager_Class/Reference/Reference.html)

该类允许您移动、复制、删除等...您可能希望首先使用它来创建两个目录，然后根据需要使用它将文件保存到这些目录中。

# r - 无法从 Web 文本表创建 R data.frame

> ID：15216044
> 
> 赞同：1
> 
> 时间：2013-03-05T04:48:15.233
> 
> 标签：r, read.table

有一个包含[澳大利亚气象站](http://www.bom.gov.au/climate/data/lists_by_element/alphaAUS_269.txt)表的网站，我希望将其加载到 R data.frame 中。前几行 - 不包括标题 - 是这样的

```
 23034 ADELAIDE AIRPORT                         -34.9524  138.5204 Apr 1995 Mar 2012   16.7   81  36.8   Y
  23046 ADELAIDE AIRPORT OLD SITE                -34.9566  138.5356 Aug 2002 Jan 2005    2.4   89  37.8   Y 
```

它看起来像一个制表符分隔的文件，但是当我保存为stations.txt 并尝试read.delim、read.table 或readLines 时，我最终将所有内容都放在一列中

我也尝试在 Excel 中复制和粘贴，但没有一个分隔选项正确分隔数据

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T05:01:27.550

```
# set filepaths & widths
fn <- "http://www.bom.gov.au/climate/data/lists_by_element/alphaAUS_269.txt"
file.widths <- c( 7 , -1 , 39 , -1 , 9 , -1 , 9 , -1 , 8 , -1 , 8 , -1 , 6 , -1 , 4 , -1 , 5 , -1 , 3 )
# note: finding the file.widths is often the most
# annoying part of reading in an ASCII data set
# if you have a SAS import script,
# check ?parse.SAScii in the R SAScii package :)

# find the headers
headers <- 
    read.fwf( 
        fn ,
        widths = file.widths ,
        skip = 2 ,
        colClasses = "character" ,
        nrows = 1
    )

# remove spaces from column names
# and convert it to a character vector
cn <- gsub( " " , "" , headers[ 1 , ] )

# the % isn't a valid column name, so change that
cn[ 8 ] <- 'Pct'

# read everything in..
yourdata <-
    read.fwf( 
        fn ,
        widths = file.widths ,
        skip = 4 ,
        comment.char = "" ,
        nrows = 535 ,
        col.names = cn
    ) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-05T04:59:55.303

旧式打孔卡格式，....固定宽度。使用 utils 中的 read.fwf 函数：

```
df2 <- read.fwf(textConnection("  23034 ADELAIDE AIRPORT                         -34.9524  138.5204 Apr 1995 Mar 2012   16.7   81  36.8   Y
   23046 ADELAIDE AIRPORT OLD SITE                -34.9566  138.5356 Aug 2002 Jan 2005    2.4   89  37.8   Y"), widths =c(49,9,9,9,9,7,7,6,2) )
df2
#-----------------------
                                                 V1       V2       V3        V4        V5   V6 V7   V8 V9
1   23034 ADELAIDE AIRPORT                          -34.9524 138.5204  Apr 1995  Mar 2012 16.7 81 36.8  Y
2   23046 ADELAIDE AIRPORT OLD SITE                 -34.9566 138.5356  Aug 2002  Jan 2005  2.4 89 37.8  Y 
```

安东尼值得打勾。使用 fwf 输入更好地编码；这是我要发布的内容：

```
df2 <- read.fwf(url("http://www.bom.gov.au/climate/data/lists_by_element/alphaAUS_269.txt"), 
col.names= c('Site','Name', 'Lat', 'Lon','Start',    'End',       'Years',   'pct',    'Obs', 
'AWS'), widths=c(7,41,9,9,9,9,7,7,6,2) , row.names=NULL, skip=4, nrows=535, comment.char="")
str(df2)
#-----------------
'data.frame':   535 obs. of  10 variables:
 $ Site : int  23034 23046 23090 90180 9999 9741 68241 72160 15590 33295 ...
 $ Name : Factor w/ 533 levels " ADELAIDE (KENT TOWN)                    ",..: 2 3 1 4 5 6 7 8 9 10 ...
 $ Lat  : num  -35 -35 -34.9 -38.5 -34.9 ...
 $ Lon  : num  139 139 139 144 118 ...
 $ Start: Factor w/ 231 levels "0 Aug 200","0 Dec 199",..: 86 134 135 84 194 49 9 206 7 77 ...
 $ End  : Factor w/ 72 levels "0 Aug 201","0 Jul 200",..: 39 13 26 9 16 39 70 21 6 56 ...
 $ Years: Factor w/ 65 levels "0    0.","0    1.",..: 32 47 33 36 16 33 28 35 34 31 ...
 $ pct  : Factor w/ 173 levels "0   24 ","0   26 ",..: 116 66 59 108 51 41 153 15 139 27 ...
 $ Obs  : Factor w/ 262 levels "  1.0 ","  1.6 ",..: 145 151 223 242 230 216 141 130 138 81 ...
 $ AWS  : logi  NA NA NA NA NA NA ... 
```

# c++ - 使用 Qt 的简单多线程：我这样做对吗？

> ID：15216046
> 
> 赞同：10
> 
> 时间：2013-03-05T04:48:17.977
> 
> 标签：c++, multithreading, qt4, qthread

我是 StackOverflow 的新手，想知道我是否做得对：

我正在编写一个简单的 Qt 应用程序来测试多线程（我也是全新的）。我创建了一个包含小部件的 MainWindow，以及一个子类 QThread 并覆盖 run() 方法的类 MyThread。

该应用程序只显示两个按钮，“开始计数器”和“停止计数器”，以及一个文本字段。当按下“开始计数器”时，会创建一个工作线程并在后台运行，在 while 循环中不断增加一个计数器，并向主线程（GUI 所在的位置）发出更新值的信号。当按下“停止计数器”时，会向主线程发送一个信号以停止 while 循环，并停止计数器，直到再次按下“开始计数器”。

这工作得很好......但这是最好的方法吗？我对此很陌生，并且读过很多人说“不要子类 QThread”和其他人说“子类 QThread”，这有点令人困惑。如果这不是实现这类事情的最佳方式（在带有“开始”和“停止”按钮的后台线程中运行计算密集型循环），那是什么？如果我做错了，我该如何做对？我不想学习错误的方法。

谢谢！这是代码：

**我的线程.h**

```
#ifndef MYTHREAD_H
#define MYTHREAD_H

#include <QThread>
#include <QMutex>

class MyThread : public QThread
{
   Q_OBJECT

public slots:
    void stopRunning();

protected:
   virtual void run();

signals:
   void signalValueUpdated(QString);

private:
    bool isRunning;

}; 
```

**我的线程.cpp**

```
#include "MyThread.h"
#include <QString>

void MyThread::run()
{
    qDebug("Thread id inside run %d",(int)QThread::currentThreadId());

    static int value=0; //If this is not static, then it is reset to 0 every time this function is called.
    isRunning = 1;
    while(isRunning == 1)
    {
        QString string = QString("value: %1").arg(value++);
        sleep(1/1000); //If this isn't here, the counter increments way too fast and dies, or something; the app freezes, anyway.

        emit signalValueUpdated(string);       
    }            
}

void MyThread::stopRunning()
{
    isRunning = 0;
} 
```

**主窗口.h**

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QApplication>
#include <QPushButton>
#include <QHBoxLayout>
#include <QLineEdit>
#include "MyThread.h"

class MainWindow : public QWidget
{
  Q_OBJECT

  public:
    MainWindow(QWidget *parent = 0);

  private:
    //Widgets
    QHBoxLayout * boxLayout;
    QPushButton * startButton;
    QPushButton * stopButton;
    QLineEdit * lineEdit;

    MyThread thread;
};

#endif 
```

**主窗口.cpp**

```
#include "MainWindow.h"

MainWindow::MainWindow(QWidget *parent) : QWidget(parent)
{
    boxLayout = new QHBoxLayout(this);
    startButton = new QPushButton("Start Counter", this);
    stopButton = new QPushButton("Stop Counter", this);
    lineEdit = new QLineEdit(this);

    boxLayout->addWidget(startButton);
    boxLayout->addWidget(stopButton); 
    boxLayout->addWidget(lineEdit);

    qDebug("Thread id %d",(int)QThread::currentThreadId());

    //When the start button is pressed, invoke the start() method in the counter thread
    QObject::connect(startButton,SIGNAL(clicked()),&thread,SLOT(start()), Qt::QueuedConnection);

    //When the stop button is pressed, invoke the stop() method in the counter thread
    QObject::connect(stopButton,SIGNAL(clicked()),&thread,SLOT(stopRunning()), Qt::QueuedConnection);

    //When the counter thread emits a signal saying its value has been updated, reflect that change in the lineEdit field.
    QObject::connect(&thread,SIGNAL(signalValueUpdated(const QString&)),lineEdit,SLOT(setText(const QString&)), Qt::QueuedConnection);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T05:08:01.810

大多数时候，QThread 子类化是在 Qt 中进行线程化的错误方法。我建议您阅读[有关线程、事件循环和其他内容的文章，](http://qt-project.org/wiki/ThreadsEventsQObjects)它可以让您了解如何以更好的方式在 Qt 中使用线程。但是不要听任何人争辩说只有一种正确的方法可以使用 QThread。有两种方法，虽然通常不需要子类化，但有时它可能很有用。您只需要使用非子类化方式，直到您真正需要子类化。在您的特定情况下，您不需要子类化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-25T17:09:07.470

替换`sleep(1/1000);`为`msleep(100);`事物会很好:)

# c# - 以编程方式在 Excel 2007 中添加条件格式

> ID：15216047
> 
> 赞同：2
> 
> 时间：2013-03-05T04:48:21.703
> 
> 标签：c#, excel, excel-2007, excel-formula

我想以编程方式使用 excel 2007 的条件格式功能。我有以下情况。

我有 6 列数字

```
A   B  C  D  E  F
100 25 25 15 20 50
.... 
```

`if (C1/A1)*100 >= B1`我必须把它涂成红色。相同的规则适用于 D1、E1、F1 列。

我在 excel 2007 中看到了条件格式功能。但我想要一些关于如何在 C# 代码中实现它的指示。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:55:52.317

我假设您很乐意使用 Interop，因为您没有另外说。这是我用来在 Excel 中设置条件格式的方法。它假定您已经`Worksheet`在一个名为`xlWorksheet`.

```
// Create a FormatCondition and add it to the specified range of cells, using the
// passed-in condition and cell colour

Excel.Range range = xlWorksheet.get_Range("C1", "C1");
Excel.FormatConditions fcs = range.FormatConditions;
Excel.FormatCondition fc = (Excel.FormatCondition)fcs.Add
    (Excel.XlFormatConditionType.xlExpression, Type.Missing, "=IF($C$1/$A$1)*100 >= $B$1");
Excel.Interior interior = fc.Interior;
interior.Color = ColorTranslator.ToOle(Color.Red);
interior = null;
fc = null;
fcs = null;
range = null; 
```

我已经猜到了你的预期用途，但你可以摆弄它来获得正确的公式和单元格引用。

# html - Box Shadow 在 IE7 和 IE8 中不显示

> ID：15216048
> 
> 赞同：1
> 
> 时间：2013-03-05T04:48:22.317
> 
> 标签：html, css, internet-explorer, cross-browser

IE7 和 IE8 中没有显示我的 Box Shadow。

```
#bodyContainer{
 background: url(../images/site_bg.png)  repeat ;
 margin: 0px auto;
    width:1000px;
    float:left;
    position:relative;
    border: 1px solid #EEEEEE;
    /*background:#FFFFFF;*/
     box-shadow: 0 0 5px 0 #000000;

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T04:55:35.717

使用[CSS3 PIE](http://css3pie.com/)，它模拟旧版本 IE 中的[一些 CSS3 属性](http://css3pie.com/documentation/supported-css3-features/)。

它支持`box-shadow`（[除了](https://github.com/lojjic/PIE/issues/3)`inset`关键字）。

和

[Internet Explorer](http://placenamehere.com/article/384/css3boxshadowininternetexplorerblurshadow/)和[Box-shadow](http://www.css3.info/preview/box-shadow/)中有关于 CSS3 Box Shadow 的文章。

希望这可以帮助

你也可以使用

```
style="FILTER: DropShadow(Color=#0066cc, OffX=5, OffY=-3, Positive=1);width:300px;font-size:20pt;"

style="filter: progid:DXImageTransform.Microsoft.dropShadow (OffX='-2', OffY='-2', Color='#c0c0c0', Positive='true')" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:52:44.137

您必须使用非标准的 IE 过滤器属性。看[这篇文章](http://hedgerwow.appspot.com/demo/shadow)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:52:29.077

根据`Box-shadow`的[MDN 兼容性表](https://developer.mozilla.org/en-US/docs/CSS/box-shadow#Browser_compatibility)，Box-shadow 在 IE7 和 IE8 中不支持。

[检查相同的链接（注释部分）以获取有关Dropshadow](http://msdn.microsoft.com/en-us/library/ms532985%28VS.85,loband%29.aspx)和[阴影](http://msdn.microsoft.com/en-us/library/ms533086%28VS.85,loband%29.aspx)属性等替代属性的更多信息。

**语法**：

```
filter:progid:DXImageTransform.Microsoft.DropShadow(sProperties) 
```

* * *

```
filter:progid:DXImageTransform.Microsoft.Shadow(sProperties) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T04:53:50.083

box-shadow 是 CSS3 的一个特性，因此在 ie9 下不支持

您可以在此处检查兼容性：

[http://caniuse.com/#search=box-shadow](http://caniuse.com/#search=box-shadow)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T05:02:12.950

Box-Shadow 在 IE9 以下不兼容

始终使用以下链接检查 CSS 属性的兼容性 [http://caniuse.com/css-boxshadow](http://caniuse.com/css-boxshadow)

# javascript - 如何在执行时暂时禁用点击功能？

> ID：15216051
> 
> 赞同：5
> 
> 时间：2013-03-05T04:48:36.437
> 
> 标签：javascript, jquery, mouseevent, jquery-events

```
$("#prevPage").live("click",function(e) {
.................
}); 
```

例如，当用户已经点击了`prevPage`，里面的语句正在运行，如果用户立即点击 ，它会再次触发。但是，我希望只有在它里面的所有语句都完成执行之后才触发点击事件，如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:56:01.710

这个或类似的东西怎么样：

```
<script type="text/javascript">
    // disable command while function is being executed.
    var sample = { 
        isExecuting : 0, 
        doWork : function (e) { 
            if (sample.isExecuting === 1) return;
            sample.isExecuting = 1;
            // do work -- whatever you please
            sample.isExecuting = 0; // say: I'm done!
        }
    };
    // live or bind
    $("#prevPage").bind("click",function(e) {
         sample.doWork(e);
    });
</script> 
```

简单的“屏蔽”来阻止多呼叫场景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:52:21.080

然后在元素上设置一个标志以检查它是否可点击。

```
$("#prevPage").on("click",function(e) {

  e.preventDefault();

  //get the clickable attribute
  //if it's not existent, its undefined hence "false"
  var unclickable = this.unclickable;

  //if it's not unclickable (it's clickable)
  if(!unclickable){

    //make the flag unclickable
    this.unclickable = true;

    //do stuff

    //reset it back the way it was after operations
    this.unclickable = false;
  }

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T04:50:24.903

使用jquery的unbind功能

```
$("#prevPage").unbind("click"); 
```

你的任务完成后

```
$("#prevPage").bind("click",function(){....your code here....}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T04:54:55.777

设置您的事件触发的变量

```
var prevPageEventTriggered = false ; 
```

并将其设置为`ture`事件触发时

```
prevPageEventTriggered = true; 
```

然后在单击事件处理函数中为此添加条件

```
$("#prevPage").live("click",function(e) {

        if ( prevPageEventTriggered ) {
                return false;
        }

        // your code goes here
        // ....
}); 
```

如果它已完成执行，您可以将其设置为`false`. 希望这会有所帮助

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T05:25:38.867

*   **unbind()**将为您完成工作。

*   另一种方法可能是使用**detach()**。当您的进程正在执行分离按钮并且当您的进程完成执行时，使用 reattach **()**来取回按钮。我建议使用**unbind()**。

# php - 如何在加载页面时提交 HTML 表单？

> ID：15216052
> 
> 赞同：8
> 
> 时间：2013-03-05T04:48:37.263
> 
> 标签：php, javascript, html, jquery

如何在不使用提交按钮的情况下提交此表单。我想在加载此表单时提交它，

```
<form name="frm1" id="frm1" action="../somePage" method="post">
    Please Waite...
    <input type="hidden" name="uname" id="uname" value="<?php echo $uname;?>" />
    <input type="hidden" name="price" id="price" value="<?php echo $price;?>" />
</form> 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2014-02-10T09:13:18.077

您在这里**不需要 Jquery**！这里**最简单的解决方案**是（基于查尔斯的回答）：

```
<html>
<body onload="document.frm1.submit()">
   <form action="http://www.google.com" name="frm1">
      <input type="hidden" name="q" value="Hello world" />
   </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T05:04:12.150

您也可以尝试使用以下脚本

```
<html>
<head>
<script>
function load()
{
document.frm1.submit()
}
</script>
</head>

<body onload="load()">
<form action="http://www.google.com" id="frm1" name="frm1">
<input type="text" value="" />
</form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T04:52:41.480

做这个 ：

```
$(document).ready(function(){
     $("#frm1").submit();
}); 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2014-11-20T08:34:38.750

您可以通过使用简单的一行 JavaScript 代码来完成此操作，并且还要注意如果 JavaScript 被关闭，它将无法工作。如果 JavaScript 被关闭，下面的代码将完成它的工作。

关闭 JavaScript 并在您自己的文件上运行代码以了解它的全部功能。（如果您在此处关闭 JavaScript，下面的代码片段将不起作用）

```
.noscript-error {
  color: red;
}
```

```
<body onload="document.getElementById('payment-form').submit();">

  <div align="center">
    <h1>
      Please Waite... You Will be Redirected Shortly<br/>
      Don't Refresh or Press Back 
    </h1>
  </div>

  <form method='post' action='acction.php' id='payment-form'>
    <input type='hidden' name='field-name' value='field-value'>
     <input type='hidden' name='field-name2' value='field-value2'>
    <noscript>
      <div align="center" class="noscript-error">Sorry, your browser does not support JavaScript!.
        <br>Kindly submit it manually
        <input type='submit' value='Submit Now' />
      </div>
    </noscript>
  </form>

</body>
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-05T05:00:46.833

使用 javascript

```
 <form id="frm1" action="file.php"></form>
    <script>document.getElementById('frm1').submit();</script> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-05T04:57:22.330

您错过了输入字段的结束标签，您可以选择任何一个事件，例如：onload、onclick 等。

**(a) 加载事件：**

```
<script type="text/javascript">
$(document).ready(function(){
     $('#frm1').submit();
});
</script> 
```

**(b) Onclick 事件：**

```
<form name="frm1" id="frm1" action="../somePage" method="post">
    Please Waite... 
    <input type="hidden" name="uname" id="uname" value=<?php echo $uname;?> />
    <input type="hidden" name="price" id="price" value=<?php echo $price;?> />
    <input type="text" name="submit" id="submit" value="submit">
</form>
<script type="text/javascript">
$('#submit').click(function(){
     $('#frm1').submit();
});
</script> 
```

# wamp - HP ProLiant 100 G5/G6/G7 服务器系列 - 显示 SEL 日志中发生的不可纠正的 ECC 事件

> ID：15216054
> 
> 赞同：0
> 
> 时间：2013-03-05T04:48:50.643
> 
> 标签：wamp, wampserver

HP Insight Diagnostics 版本 8.4.0.3521A (x86_64) 计算机名称：ezsetupsystem3c4a927c9e88

在设备测试期间，它给出以下错误

总内存-ECC 测试失败说明-在 SEL 日志设备中发生不可纠正的 ECC 事件，在 CPU 0 上运行建议修复-请参阅 IPMI 传感器事件日志了解 ECC 事件错误代码-021278

请帮助我找出为什么会出现此错误。是因为安装了 WAMP 服务器吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-01T11:50:38.747

这意味着服务器的 DIMM 已超出其可接受的 ECC 错误计数。它的位置在错误中表示。根据平台，您可以识别特定的插槽。这是哪个 HP ProLiant 型号？这是标准保修维修。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T01:19:59.653

你的记忆有问题。要识别有故障的内存，请运行 HPS 报告： [http](http://update.external.hp.com/HPS/HPSreports/) : //update.external.hp.com/HPS/HPSreports/ 完成后，您必须解压缩存档并在现场打开 index.html 文件。它将收集所有硬件信息并突出显示

> 红色的

有故障的组件。

# authentication - “应用程序的使用受到限制”

> ID：15216063
> 
> 赞同：2
> 
> 时间：2013-03-05T04:49:34.617
> 
> 标签：authentication, login

当用户在没有先登录的情况下被路由到我的 Facebook 应用程序时，他们会收到错误消息“'应用程序的使用已受到限制。' 我尝试了不同的 URL 技巧（如前所述），但它似乎不起作用。启用了 HTTP 和 HTTPS，沙盒模式已关闭。该应用程序仅限于美国和 18 岁以上的个人，但我没有'认为问题不会产生相同的错误。如果有人可以提供任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T08:03:45.013

如果用户未登录，Facebook 不知道该用户是否来自美国。人们会期望这适用于 IP 地址或类似的东西，但事实并非如此。

我认为FB有一些原因。例如，如果您来自美国并且有一个在家工作的应用程序，那么即使您前往加拿大并从那里登录，您也希望它能够继续工作。

# google-maps-sdk-ios - 在自定义 iOS 应用中使用 Google Maps Engine

> ID：15216067
> 
> 赞同：0
> 
> 时间：2013-03-05T04:50:16.023
> 
> 标签：google-maps-sdk-ios

我正在尝试利用 Google Maps Engine 作为使用 Google Maps SDK 的 iOS 应用程序的数据存储。以前有人做过吗？我无法在 Internet 上找到示例或参考资料。我可以使用 HTML 和 JavaScript 在网页中显示数据层，并且可以在本地 Google 地球应用程序中查看数据层，但我想在我自己的自定义地图应用程序中显示这些数据。

以下是 Google Maps Engine 的链接供参考：[http ://www.google.com/enterprise/mapsearth/products/mapsengine.html](http://www.google.com/enterprise/mapsearth/products/mapsengine.html)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-05T04:52:18.117

我相信您需要与 Google 取得联系才能获得 Maps API。我不认为他们只是让街上的任何人拥有它。

[http://support.google.com/enterprisehelp/bin/request.py?contact_type=maps_engine&hl=en](http://support.google.com/enterprisehelp/bin/request.py?contact_type=maps_engine&hl=en)

# php - 获取编码 URL 中的预定义变量

> ID：15216077
> 
> 赞同：0
> 
> 时间：2013-03-05T04:50:44.123
> 
> 标签：php, ajax, url, get, encode

我正在尝试获取我的预定义变量 $_GET['loc'] 任何人都可以帮助我吗？问题是我不想使用 javascript 禁用我的 ajax 锚标记。所以我所做的是我只是在我的href上添加了一个井号标签（#）。网址看起来像这样

```
http://localhost/test/onspecial/index.php#filter?loc=dn 
```

我需要实现的是访问 $_GET['loc']。我真的很感激任何帮助。

我的 href 属性看起来像这样

```
<a href="#filter?loc=dn"></a> 
```

这是我在 index.php 中的完整导航栏，并希望为我的其他查询获取 $_GET['loc'] 的值：

```
<div class="navbar">
  <ul class="nav" id="nav">
    <li><a href="index.php">home</a></li>
    <li><a href="index.php">about us</a></li>
    <li><a href="index.php">contact us</a></li>
    <li class="dropdown">
      <a id="drop_tog"href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown" data-delay="1000" data-close-others="false">Location</a>
      <ul class="dopdown-menu" id="loc">
        <li id="loc1"><a tabindex="-1" href="#filter?loc=dc" >City</a></li>
        <li id="loc1"><a tabindex="-1" href="#filter?loc=ds" >South</a></li>
        <li id="loc1"><a tabindex="-1" href="#filter?loc=dn" >North</a></li>
      </ul>
    </li>

  </ul>
</div> 
```

javascript 在 getresult.php 上看起来像这样发送请求：

```
$(document).ready(function(e) {
    function getLoc(param){
    //filter url
    var encode = param.substring(7);
     if(window.XMLHttpRequest){
     xmlhttp = new XMLHttpRequest();
     }
     else{
    xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
     }

     xmlhttp.onreadystatechange = function(){
      if(xmlhttp.readyState == 4 && xmlhttp.status == 200){
      document.getElementById("li_start").innerHTML = xmlhttp.responseText;
      }
     }
     xmlhttp.open("GET","getresult.php"+encode,false);
     xmlhttp.send();
     }

    //handle anchor clicks
    $("ul#location li a").click(function(){
        var loc = $(this).attr("href");
        getLoc(loc);
    });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T04:59:00.927

改变 ：

```
http://localhost/test/onspecial/index.php#filter?loc=dn 
```

至：

```
http://localhost/test/onspecial/index.php?loc=dn#filter 
```

基本上，（几乎）`?`URL 中 a 之后的所有内容都是“查询字符串”，直到`#`到达 a。然后，（几乎）之后的所有内容都`#`成为“锚”。

`?`必须在之前`#`。

**根据额外信息和 HTML 进行**编辑。****

 **我不使用 jQuery，它在我看来就像您正在使用的一样。因此，我在以下示例中重新编写了 javascript 和一小部分 HTML。在您的 HTML 中，您没有 ID 为 的 HTML 标记`li_start`，但我假设它在您的 HTML 中的其他位置。

Javascript：

```
<script type="text/javascript">
function linkClick(id) {
    page('li_start','/getresult.php?loc='+ id);
}
function loadPage(http, id, url){
    if((http.readyState == 4) && (http.status == 200 || window.location.href.indexOf("http") == -1)) {
        document.getElementById(id).innerHTML = http.responseText;
    }
}
function page(id, url){
    var http = false;
    var bustCacheParam = (url.indexOf("?")!=-1)? "&"+ new Date().getTime() : "?"+ new Date().getTime();
    if (window.XMLHttpRequest) {
        http = new XMLHttpRequest()
    } else if (window.ActiveXObject){
        try {
            http = new ActiveXObject("Msxml2.XMLHTTP")
        } catch (e) {
            try {
                http = new ActiveXObject("Microsoft.XMLHTTP")
            } catch (e) {}
        }
    } else {
        return false;
    }
    http.open('GET', url+bustCacheParam, true);
    http.onreadystatechange = function(){ loadPage(http, id, url); }
    http.send(null);
}
</script> 
```

以及更改后的 HTML：

```
<ul class="dopdown-menu" id="loc">
    <li id="loc1"><a tabindex="-1" href="#" onclick="linkClick('dc');return false">City</a></li>
    <li id="loc2"><a tabindex="-1" href="#" onclick="linkClick('ds');return false">South</a></li>
    <li id="loc3"><a tabindex="-1" href="#" onclick="linkClick('dn');return false">North</a></li>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:58:06.010

看看[parse_url](http://php.net/manual/en/function.parse-url.php)

[http://php.net/manual/en/function.parse-url.php](http://php.net/manual/en/function.parse-url.php)

```
<?php
$url = 'http://username:password@hostname/path?arg=value#anchor';
print_r(parse_url($url));
echo parse_url($url, PHP_URL_PATH);
?>

Array
(
    [scheme] => http
    [host] => hostname
    [user] => username
    [pass] => password
    [path] => /path
    [query] => arg=value
    [fragment] => anchor
) 
```**

# javascript - 这两者有什么区别？

> ID：15216084
> 
> 赞同：7
> 
> 时间：2013-03-05T04:51:25.073
> 
> 标签：javascript, jquery, function

我看到以下 JavaScript 函数的工作原理完全相同，那么它们之间**除了语法之外**还有什么区别。功能是：

```
var functionName=function(){
    //some code here
}; 

function functionName(){
    //some code here
} 
```

我以与以下方式相同的方式调用它们：

```
functionName(); 
```

请不要告诉我语法不同，除此之外还有什么不同吗

```
1)speed of execution
2)Memory utilization etc. 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T04:55:22.257

这在 StackOverflow 中已经回答了很多次。这只是命名的方式。因此，从答案中提取一些观点，我会说：

1.  函数声明和变量声明总是被 JavaScript 解释器以不可见的方式移动（“提升”）到其包含范围的顶部。显然，函数参数和语言定义的名称已经存在。

2.  优点缺点：

    命名函数有几个优点：

    *   元分析的名称。`functionInstance.name`会告诉你名字。
    *   更重要的是，名称将打印在堆栈跟踪中。
    *   名称还有助于编写自我记录或识字代码。

    命名函数表达式有一个缺点

    *   IE 存在 NFE 内存泄漏
3.  **另一个主要区别**

    不同之处在于`functionTwo`在解析时为脚本块定义，而`functionOne`在运行时定义。例如：

    ```
    <script>
      // Error
      functionOne();

      var functionOne = function() {
      }
    </script>

    <script>
      // No error
      functionTwo();

      function functionTwo() {
      }
    </script> 
    ```

**参考**

1.  [var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)
2.  [JavaScript 中首选命名函数还是匿名函数？](https://stackoverflow.com/questions/10081593/are-named-functions-or-anonymous-functions-preferred-in-javascript)
3.  [命名函数表达式揭秘](http://kangax.github.com/nfe/)
4.  [函数声明与函数表达式](http://javascriptweblog.wordpress.com/2010/07/06/function-declarations-vs-function-expressions/)。
5.  [var functionName = function() {} vs function functionName() {}](https://stackoverflow.com/questions/336859/javascript-var-functionname-function-vs-function-functionname)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:53:47.500

1.  第一个是命名函数表达式，它应该向调用者返回一些值。
2.  第二个只是一个函数，是否返回值取决于您

# ruby - 为什么这种递归会产生重复的结果？

> ID：15216088
> 
> 赞同：1
> 
> 时间：2013-03-05T04:51:46.323
> 
> 标签：ruby, recursion

我试图解决的问题如下：

> 给定 n 美元，你有无限的便士、五分钱、一角硬币和 25 美分硬币，计算表示 n 的方法的总数。

我想出了一个递归解决方案（假设 n 是 0.25 美元，所以输出不是一些荒谬的数字）：

```
def changes(w, x, y, z)
  if 0.01 * w + 0.05 * x + 0.1 * y + 0.25 * z > 0.25
    return
  elsif 0.01 * w + 0.05 * x + 0.1 * y + 0.25 * z == 0.25
    @@counter += 1
    puts "w: #{w} x: #{x} y: #{y} z: #{z}"
  else
    changes(w + 1, x, y, z)
    changes(w, x + 1, y, z)
    changes(w, x, y + 1, z)
    changes(w, x, y, z + 1)
  end
end

@@counter = 0
changes(0, 0, 0, 0)
puts @@counter 
```

基本上这里的想法是在匹配时增加计数器，否则尝试下一个可能的面额。

但是在输出中有很多重复，例如：

```
w: 15 x: 0 y: 1 z: 0
w: 15 x: 0 y: 1 z: 0
w: 15 x: 0 y: 1 z: 0
w: 15 x: 0 y: 1 z: 0
w: 15 x: 0 y: 1 z: 0
w: 10 x: 1 y: 1 z: 0
w: 15 x: 0 y: 1 z: 0
w: 10 x: 1 y: 1 z: 0 
```

有人可以告诉我为什么吗？在我的递归中，我不是总是传入具有不同值的参数吗？为什么会多次打印相同的值？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:05:19.467

只是一个关于如何获得重复的例子

在您第一次与 通话时`changes(0, 0, 0, 0)`。
它将失败并调用：

```
changes(1, 0, 0, 0) # a
changes(0, 1, 0, 0) # b
changes(0, 0, 1, 0) # c
changes(0, 0, 0, 1) # d 
```

`a`然后将失败并调用

```
changes(2, 0, 0, 0) # aa
changes(1, 1, 0, 0) # ab
changes(1, 0, 1, 0) # ac
changes(1, 0, 0, 1) # ad 
```

同时，`b`将失败并调用

```
changes(1, 1, 0, 0) # ba
changes(0, 2, 0, 0) # bb
changes(0, 1, 1, 0) # bc
changes(0, 1, 0, 1) # bd 
```

如您所见，`ab`并`ba`使用相同的参数。等与ac / ca ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:39:16.553

让我用一些解释重写你的代码：

```
@variants = []
def changes(w, x, y, z)
  case 0.01 * w + 0.05 * x + 0.1 * y + 0.25 * z 
  when 0...0.25
    changes(w + 1, x, y, z)
    changes(w, x + 1, y, z)
    changes(w, x, y + 1, z)
    changes(w, x, y, z + 1)
  when 0.25
    @variants << [w,x,y,z] unless @variants.include?([w,x,y,z])
  end 
end

changes(0, 0, 0, 0)
puts @variants.size
@variants.each { |v| puts "w: #{v[0]} x: #{v[1]} y: #{v[2]} z: #{v[3]}" } 
```

您添加一个变体的主要思想是当且仅它还没有被计算在内。dups 源于这样一个事实，即有不同的方式可以达到一个状态`[w=1,x=1]`：`[0,0]⇒[0,1]⇒[1,1]`并且`[0,0]⇒[1,0]⇒[1,1]`（注意中间的链环。）`case`在这里比 . 的意大利面条更明显`if-elsif-end`。

# c++ - 需要有关 C++ 类模板中类型约束设计的建议，v11

> ID：15216089
> 
> 赞同：0
> 
> 时间：2013-03-05T04:51:57.673
> 
> 标签：c++, types, type-constraints

我想在`T`类模板的类型参数上放置一个 POD 类型约束`A`，然后`B`从令人满意的`A`. 此外，`B`应该根据实例的恒定性有不同的实现`A`。众所周知，这样做的目的是为了在运行前更好地进行类型检查。

我能想出的只是一个暂定的定义`A`

```
template <typename T, typename POD=void>
class A;
template <typename T>
class A <T, std::enable_if<std::is_pod<T>::value>::type>
{
    //blah...
}; 
```

这样 A 在传递非 POD 类型时就不能被实例化，因为您可能已经注意到部分参数化的作用就像类型切换一样。

但我不知道如何定义 B 。我认为它看起来像以下

```
template <typename A?>
class B;
template <>
B<const A?> : public A?
{
    //blah...
};
template <>
B<A?> : public A?
{
    //blah...
}; 
```

有什么绝妙的主意吗？

PS：就我个人而言，我倾向于高度批评。但是，请发布您认为无论如何都可以做到的方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:03:35.617

如果专业化完全不同，没有什么好主意。你必须这样做：

```
template <typename T>
class B;

template <typename T>
class B<const A<T>> : public A<T>
{

};

template <typename T>
class B<A<T>> : public A<T>
{

}; 
```

除了符号之外，这与您自己编写的*几乎相同。*`?`

您可以将此类实例化为：

```
B<A<int>>       x; //it chooses the second specialization
B<const A<int>> y; //it chooses the first specialization 
```

见[在线演示](http://stacked-crooked.com/view?id=29e2102aa33372ac23d70e20e1a7875e-18aa934a8d82d638dde2147aa94cac94)。请注意，您在`typename`这里忘记了：

```
typename std::enable_if<std::is_pod<T>::value>::type 
```

我也修好了。

如果专业中的某些代码是相同的，那么您可以做一些技巧来*共享*公共部分，但我不能提出任何建议，因为我不知道您将在专业中放入什么。

# image - 根据图像是否存在隐藏 TPL 文件中的 DIV？

> ID：15216091
> 
> 赞同：0
> 
> 时间：2013-03-05T04:52:07.150
> 
> 标签：image, html, smarty, exists

```
<div><div style="margin-left:67px"><table style="border:1px #80A0BB solid;" padding="5px"><tr><td><a href="{$link.URL|trim}" target="_blank"><img src="{$smarty.const.DOC_ROOT}/images/thumbs/{$link.ID}-300x225.png" alt="" /></a></td></tr></table></div></div> 
```

我试图根据我的服务器上是否存在图像来隐藏 div。我将如何检查图像是否存在，如果不存在则隐藏 div？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:47:41.867

最简单的方法就是在 PHP 中编写一个函数，然后在 Smarty 中使用它。

在 PHP 中：

```
function linkImageExists($link){

    //Check to see if image for link exists and return true if it does.
    // otherwise:
    return false;
} 
```

在 Smarty 模板中：

```
{if linkImageExists($link)}
<div>
    <div style="margin-left:67px">
        <table style="border:1px #80A0BB solid;" padding="5px">
            <tr>
                <td>
                    <a href="{$link.URL|trim}" target="_blank">
                        <img src="{$smarty.const.DOC_ROOT}/images/thumbs/{$link.ID}-300x225.png" alt="" />
                    </a>
                </td>
            </tr>
        </table>
    </div>
</div>

{else}
    {* image doesn't exist *}
{/if} 
```

你可能想考虑`$link`变成一个对象，然后你可以在它上面调用函数，而不是必须使用全局函数，这可能会在未来产生更清晰的代码。

# ruby-on-rails - Rails 单表继承 (STI) 的替代方案？

> ID：15216096
> 
> 赞同：3
> 
> 时间：2013-03-05T04:52:27.990
> 
> 标签：ruby-on-rails, sti

我有一个模型和表格，我认为它非常适合 STI。我的表被称为`Finances`并有两种类型：收入和费用。此外`type`还有其他三列：`description`、`amount`和`date`。

我在 Rails 中使用 STI 变得非常紧张，因为它需要一些黑客攻击。我对 Rails 太陌生，无法破解代码。尽管它有效，但我不明白它。这似乎很危险。

我的问题是，如果我不使用 STI，如何设置我的模型、控制器和视图？对我的模型中的项目进行分组的任何最佳实践？还是我只是`Finances.where("type = 'Income'")`在设置视图之前做？

编辑：我做了一个[要点](https://gist.github.com/caser85/5096447)来展示我正在使用的代码。当我运行它时，我收到错误：

```
undefined method `incomes_path' for #<#<Class:0x007fbc95f60b40>:0x007fbc93883220> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T07:33:33.667

首先，使用 STI 是 Rails 的标准，因此无需感到紧张。并且不需要“黑客”。它已被许多开发人员非常成功地使用。如您所见，您可以在网上找到教程和一般信息。

另一方面，如果您决定不使用 STI，您可以选择使用
(a) 完全独立的模型和它们自己的表，这将导致*大量重复代码*，或者
(b) 为您创建自定义的“ *STI-喜欢*“手动行为。第二种选择至少对了解有关 Rails 的更多信息很有趣。

例如，在您的`Finances`模型中，您将定义一个范围`incomes`，例如

```
scope :incomes, where(:type => 'Income') 
```

然后你可以做`Finances.incomes`。

然后，如果您有仅适用于其中一种类型的方法，则应检查所有记录是否有效地属于所需类型。

就个人而言，我建议您使用 STI。您可以免费获得很多功能，而且您正在*使用 Rails 方式*。例如，想象一下，其他开发人员阅读您的代码时，他们会问自己，您为什么不使用 STI，将其归咎于无知，并且 - 如果需要 - 使用 STI 重构它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:10:18.503

如果您使用这样的继承结构，STI 是最好的。你真的不需要使用`Finances.where("type = 'Income'")`. 您可以简单地使用`Income.all`. 如果它们对您有帮助，请查看这些帖子。 [http://www.therailworld.com/posts/18-Single-Table-Inheritance-with-Rails](http://www.therailworld.com/posts/18-Single-Table-Inheritance-with-Rails) [http://juixe.com/techknow/index.php/2006/06/03/rails-single-table-inheritance /](http://juixe.com/techknow/index.php/2006/06/03/rails-single-table-inheritance/)

# c# - 在 SQL Server 2005 中仅节省数小时和数分钟

> ID：15216097
> 
> 赞同：0
> 
> 时间：2013-03-05T04:52:28.023
> 
> 标签：c#, sql, sql-server-2005, datetime

实际上，我在 c# 的帮助下将一些行插入到 SQL Server 2005 数据库中。在我的日期时间列中，我只想保存小时和分钟。

请让我知道如何通过 SQL 和 C# 两种方法插入。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:06:46.450

Use this one for C#..It will work..

```
String.Format("{0:t}", dt); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T04:56:20.930

假设您正在寻找使用 DATETIME 字段，您不能只在 SQL 2005 中存储小时和分钟。SQL 将存储的是日期时间，例如：`1900-01-01 HH:MM:00.000`. 当你得到日期时，你需要修剪掉你不关心的部分。

2 我不推荐的其他选择是：

*   使用 2 个整数字段 - 小时和分钟；或者
*   1 个整数字段（自午夜以来的分钟数）。

这可能会导致很多其他问题，所以你不应该这样做

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:53:23.210

## 在Sqlserver中你可以很容易地处理它，通过使用下面的代码

`ist step`--> 声明两个变量 `2nd step`--> 写这段代码

```
 declare @hour int,@minute int
         set @hour=(SELECT DATEPART(hh, GETDATE()));
         set @minute=(SELECT DATEPART(minute, GETDATE()));
         print @hour
         print @minute 
```

我正在使用打印来显示小时和分钟。您可以直接将其插入数据库

# configuration - 为什么我不能在 Jetty 8.1.9 中读取静态文件

> ID：15216108
> 
> 赞同：0
> 
> 时间：2013-03-05T04:53:23.460
> 
> 标签：configuration, jetty

在 /opt/jetty/webapps 中，我在 w 目录下有 test.xml。我在上下文目录中有这个 test.xml：

```
<?xml version="1.0"  encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.eclipse.org/configure.dtd">

<Configure class="org.eclipse.jetty.server.handler.ContextHandler">
  <Set name="contextPath">/w</Set>
  <Set name="resourceBase">/opt/java/webapps/w/</Set>
  <Set name="handler">
    <New class="org.eclipse.jetty.server.handler.ResourceHandler">
      <Set name="welcomeFiles">
        <Array type="String">
          <Item>test.xml</Item>
        </Array>
      </Set>
      <Set name="cacheControl">max-age=3600,public</Set>
    </New>
  </Set>
</Configure> 
```

为什么我不能阅读`http://host/w/test.xml`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:31:09.147

您的问题有点令人困惑，正如您`test.xml`两次提到的，并且在两个不同的目录中。

无论如何，这是使用标准 jetty-distribution-8.1.9.v20130131.tar.gz 设置所需内容的基本示例，可从[download.eclipse.org/jetty/](http://download.eclipse.org/jetty/)获得。

**可部署的上下文**

创建一个名为`contexts/w.xml`以下内​​容的文件

```
<?xml version="1.0"  encoding="ISO-8859-1"?>
<!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.eclipse.org/configure.dtd">

<Configure class="org.eclipse.jetty.server.handler.ContextHandler">
  <Set name="contextPath">/w</Set>
  <Set name="resourceBase"><SystemProperty name="jetty.home" default="."/>/w/</Set>
  <Set name="handler">
    <New class="org.eclipse.jetty.server.handler.ResourceHandler">
      <Set name="welcomeFiles">
        <Array type="String">
          <Item>test.xml</Item>
          <Item>index.html</Item>
        </Array>
      </Set>
      <Set name="cacheControl">max-age=3600,public</Set>
    </New>
  </Set>
</Configure> 
```

笔记：

*   `${jetty.home}`指向你`/path/to/jetty-distribution-8.1.9.v20130131/`的任何东西
*   此上下文指向一个名为 的目录`${jetty.home}/w/`，该目录*不在*webapps 目录中，这是故意的，因为 webapps 目录用于独立的 Java Servlet 或 Java EE webapps，无论是归档形式还是展开的可部署形式。由于您正在使用`ContextHandler`并且`ResourceHandler`您的可部署不符合这些要求。

**内容**

在`${jetty.home}/w/`目录中创建几个文件。

```
$ mkdir /path/to/jetty-distribution-8.1.9.v20130131/w
$ echo "<h1>Hello World</h1>" > /path/to/jetty-distribution-8.1.9.v20130131/w/index.html 
```

**测试它**

启动码头

```
$ cd /path/to/jetty-distribution-8.1.9.v20130131
$ java -jar start.jar 
```

打开浏览器并测试它

```
http://localhost:8080/w/ 
```

# c - C（ubuntu）中的奇怪错误：由于添加调试语句而导致的意外行为变化

> ID：15216110
> 
> 赞同：0
> 
> 时间：2013-03-05T04:53:36.597
> 
> 标签：c, debugging

我正在使用现有的 pakcage 进行一些复杂的数值计算。我需要做的是自定义一个名为“loss”的函数。“损失”函数的默认行为导致预期的最终计算结果。但是我的定制并没有产生预期的结果。所以我正在尝试调试它。

(1) 我正在定制一个由其他一些函数调用的函数 int loss(int c1, int c2)。首先请注意，默认行为只是 return c1==c2 ？0：4；我想将其更改为：

```
double loss(int c1, int c2) {
    int v1 = map[c1];  // map is an int array
    int v2 = map[c2];

    return doSomething(v1, v2); 
} 
```

程序会使用“损失”函数进行一些连续的复杂数值计算，最终的计算结果并不如预期。所以我想调试“损失”功能，以确保它正常工作。

(2) 我把它简化为：

```
 double loss(int c1, int c2) {
     int v1 = map[c1];
     int v2 = map[c2];

   [1].  return v1==v2 ? 0: 4; // this should be equivalent to [4] in my application

         // double check that different position of the array have different values
   [2].  if( (c1==c2 && v1!=v2) || (c1!=c2 && v1==v2)) {
   [3].         exit(0);  // printf("%d %d %d %d", v1, v2, c1, c2);
         }

   [4].  return c1==c2 ? 0: 4;
 } 
```

请注意，如果我只使用 [4] 而没有任何其他语句，则这是默认行为，经过测试会导致预期的计算结果。

1.  现在我首先使用[1]，但是将[2]注释到[4]，相当于我的应用程序中的[4]。也就是说，我希望数组“map”中没有重复的元素。这不会导致正确的最终计算结果，这很奇怪，因为 [1]<=>[4]，并且我已经测试过 [4]，最终计算是正确的。

2.  我想通过添加 [2] 和 [3]（当然并删除 [1]）来仔细检查 [1] 和 [4] 是否等效。程序运行到最后，这意味着[3]永远不会执行，因此它确保[1]和[4]是等价的。然而，最终的计算变得不像预期的那样，尽管我没有通过添加 [2] 和 [3] 来更改 c1 和 c2 的值。在 [3] 中使用 printf 有类似的问题。但是对于某些语句它不会引起问题，例如在“if”正文中，我只是使用“int a = c1 + c2;”，结果是正确的。

3.  更奇怪的是，如果我注释 [3]（即 if 主体什么都不做），并同时使用 [2] 和 [4]，最终的计算结果符合预期！

你能帮我找出奇怪的问题吗？

谢谢，杰夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-04T12:10:05.267

> 如何反汇编编译器的输出？

您可以选择多种方式。我假设该程序名为`f1`.

*   `objdump -S f1``<loss>`在输出中 寻找。
*   制作一个汇编器列表，例如`gcc -g -Wa,-adhln=f1.lst -O -c f1.c` 确保`-O`使用与通常编译中相同的标志来代替。
*   `gdb f1`
    `(gdb) disass loss`
    在 中`gdb`，您还可以
    `(gdb) break loss`
    `(gdb) run`
    通过
    `(gdb) step`
    该功能，`-g`生成调试信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:22:55.040

我认为您假设`map`是[双射](https://en.wikipedia.org/wiki/Bijection)的，但实际上是[满射](https://en.wikipedia.org/wiki/Surjection)的；也就是说，有不同的值`c1`和`c2`这样的`map[c1] == map[c2]`。这是您所看到的最好的解释：

*   您声明使用 [1], ie`v1==v2`不会导致“正确的最终计算结果”，但使用 [4], ie`c1==c2`会。
*   [2] 正在按照您的意图执行正确的检查，但您可能没有正确检测到 [3] 的效果。您确定程序在 [3] 存在的情况下运行到最后，而不是在结尾附近终止吗？您如何判断 [3] 是否运行？即使您使用 [2][3][4] 运行，结果也与单独使用 [4] 不同，这表明实际上运行了 [3]。
*   如果您注释掉 [3] 但留下 [2]，则程序将进入 if 括号，然后退出并运行 [4] 无论如何，仅给出与 [4] 等效的输出，正如您确认的那样。这都是一致的。

# sql - 使用选择连接更新每一行

> ID：15216113
> 
> 赞同：0
> 
> 时间：2013-03-05T04:53:43.273
> 
> 标签：sql, sql-server

我有一张表，我想在整个事情中更新一列。我有这个用于连接。

```
(COALESCE(f1,'')+';'+ COALESCE(f2,'')+';'+ COALESCE(f3,'')) 
```

好吧，当我将它插入我的列时，它会添加新列并且更新失败。有没有办法更新 MS SQL 中的值并使用它来更改值？

谢谢

```
update dbo.tblGeoTable (CombinedEmail)
select (COALESCE(f1,'')+';'+ COALESCE(f2,'')+';'+ COALESCE(f3,'')) 
from dbo.tblGeoTable 
```

这是数据

F1 = f1email@email.com
F2 = f2email@email.com F3 = f3email@email.com CombinedEmail = f1+f2+f3，但我需要 ; 在那里将它们分开，我需要在它所在的当前行中替换它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:07:43.477

如果我理解正确你想要什么试试这个

```
UPDATE tblGeoTable
   SET CombinedEmail = COALESCE(f1,'')+';'+ COALESCE(f2,'')+';'+ COALESCE(f3,'') 
```

这是**[sqlfiddle 示例](http://sqlfiddle.com/#!3/93224/1)**

编辑：

如果您想添加而不是替换到 CombinedEmail 列中的值，您可以这样做

```
UPDATE tblGeoTable
   SET CombinedEmail = COALESCE(CombinedEmail,'') + ';' + COALESCE(f1,'')+';'+ COALESCE(f2,'')+';'+ COALESCE(f3,'') 
```

# java - 数组排除空值并返回所有非空值

> ID：15216117
> 
> 赞同：0
> 
> 时间：2013-03-05T04:54:00.317
> 
> 标签：java, arrays, null

我有一个基于命令行的程序，当他们输入命令“echo”时，缓冲区会将 echo 后的单词写入名为“talkfile”的文件（省略此代码）。

我选择了限制为 100 字。然而，用户可以随机写任何东西。talkfile.write 应该在数组中写入所有非空值。当我运行它时，我得到一个空指针错误。我怎样才能解决这个问题？

```
String[] inputSplit =  input.split(" ");
switch (inputSplit[0]) {  
case "echo" :
    for (int i = 0; i < inputSplit.length; i++)
    { 
        if (inputSplit[i] == null)
        talkfile.write(inputSplit[1-100]);
        }

     sysOut(talkfile.read());

break;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T04:57:12.393

我想你的意思是写：

```
for (int i = 1; i < inputSplit.length; i++)
{ 
     if (inputSplit[i] != null)
        talkfile.write(inputSplit[i]);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T04:56:15.250

```
if (inputSplit[i] != null)
        talkfile.write(inputSplit[1-100]); 
```

您检查了 == null。将其更改为 != null。

# dynamics-gp - eConnect 配置以将数据集成到 GP

> ID：15216121
> 
> 赞同：2
> 
> 时间：2013-03-05T04:54:34.870
> 
> 标签：dynamics-gp, econnect

我们需要使用 eConnect 将数据从我们的应用程序集成到 GP。我们在服务器中安装了 GP 和 eConnect。我们的应用程序从另一台机器上运行，该机器必须使用 eConnect 将数据发送到我们服务器中的 GP。

是否需要在开发人员的机器和服务器中安装 eConnect？

由于 eConnect 使用 Windows 身份验证，我们在应用程序中使用集成安全性来连接 eConnect。因此，我们现在能够集成来自在服务器中安装 eConnect 时提供凭据的用户机器的数据。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T15:10:23.717

简而言之，是的。eConnect SDK 必须安装在每台发出 eConnect 请求的客户端机器上。如果您正在构建一个 Web 应用程序，那么您需要在发出请求的 Web 服务器上安装 eConnect SDK。

如果您正在开发安装在每个用户的 PC 上的 windows 窗体应用程序，那么 eConnect SDK 也必须安装在每个用户的 PC 上。因为这通常不是一个理想的部署场景，所以很多人在实践中创建一个新服务来封装应用程序需要的特定 eConnect 请求，以便只需要在服务器上安装 SDK。

另一个值得考虑的选择是单独安装 Dynamics GP，称为 Dynamics GP Web 服务。这将允许您在无需安装 eConnect SDK 的情况下发出 Web 服务请求。但是，为 Dynamics GP 安装 Web 服务并非易事。

关于安全性，eConnect SDK 创建一个提供凭据的 Windows 服务。正是这些凭据用于向 Dynamics GP 验证 eConnect。请记住，Dynamics GP 不支持用户访问的 Active Directory 身份验证。但是，可以在 eConnect 服务中使用域服务帐户，并将其设置为直接在具有 DYNGRP 角色的 SQL Server 中访问。通常，此帐户将是为此目的创建的服务帐户，而不是用户帐户。

# windows-8 - Surface Pro SP1 上的 Visual Studio

> ID：15216123
> 
> 赞同：3
> 
> 时间：2013-03-05T04:55:01.090
> 
> 标签：windows-8, visual-studio-2010

所以，我以 Surface Pro 的形式购买了梦想，然后我安装了 Visual Studio 2010，希望能在马桶上编码。但是，我无法安装 SP1（来自此链接：[此处](http://www.microsoft.com/en-us/download/confirmation.aspx?id=34677)）。有没有人在表面上成功安装SP1？

我得到的错误是：

> KB2736182 不适用，或被您计算机上的其他情况阻止。有关详细信息，请参阅[http://go.microsoft.com/fwlink/?LinkId=225649 。](http://go.microsoft.com/fwlink/?LinkId=225649)

如果您点击链接，您会看到这个宝石：

“应用了 Service Pack 1 的产品系列 Visual Studio 2010 或 Team Foundation Server 2010 的产品”

# android - 带有actionbarsherlock的片段内的Android PopupWindow

> ID：15216125
> 
> 赞同：0
> 
> 时间：2013-03-05T04:55:23.987
> 
> 标签：android, actionbarsherlock

`PopupWindow`当用户单击操作栏上的按钮（使用 ABS）时，我使用 a来显示一些数据。我还使用翻译动画来显示和隐藏它，`PopupWindow`所以它从顶部下降。

我想要的行为是让操作栏始终保持在活动中的其他所有内容之上（例如放在前面）。但是当我显示`PopupWindow`动画时，它会随着它的移动而下降并与动作栏重叠。如果我为它设置不同的高度，`PopupWindow`它也会与操作栏重叠。

有没有办法使用 ActionBarSherlock 始终在其他所有内容（包括弹出窗口和对话框）之上显示操作栏？或者有什么方法可以将 附加`PopupWindow`到根内的底层片段`FrameLayout`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:28:46.777

在层次结构查看器中查看您的视图。这里的层次结构，包括 ABS 所在的位置，充当视图层和视图组的 z-index。您可以抓取操作栏下方的图层并向其添加自定义视图：

```
 // Grab android.R.id.content's parent to encompass the actionbar & user content
    content = ((ViewGroup) findViewById(android.R.id.content).getParent());

    // Make sure we inflate our menu resource before it is used
    if (dialog == null)
        dialog = (ViewGroup) <INFLATE SOME DIALOG/VIEWGROUP HERE>;

    // We need this to add a view beneath the action bar
    FrameLayout parent = (FrameLayout) content.getParent();
    // There needs to be some layout params set for visibility
    FrameLayout.LayoutParams layoutParams = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT, Gravity.TOP);
    // A little tricky... using negative margins can do an initial translation that hides a view
    layoutParams.setMargins(0, -(heightOfDialog), 0, 0);
    dialog.setLayoutParams(layoutParams);
    parent.addView(dialog, 0); 
```

这应该允许您在对话框下方放置一个视图，并且仍然能够使用诸如 TranslateAnimation 之类的类对其进行动画处理：

```
TranslateAnimation animation = new TranslateAnimation(leftOfContent, 0, 0, 0);
animation.setDuration(TIME_TO_AUTO_SCROLL);
dialog.startAnimation(animation); 
```

# video - 使用 Lagarith 进行编码

> ID：15216126
> 
> 赞同：1
> 
> 时间：2013-03-05T04:55:25.420
> 
> 标签：video, compression, video-encoding, video-codecs

我有一个使用 x264 编码的损失较少的 mp4 文件 (YUV 4:4:4)。我想使用 Lagarith 将其转换为损失较少的 avi。之前，为了使用 lagarith 进行压缩，我使用了 virtualDub。但是该选项现在不存在了，因为 virtualDub 不支持 mp4 文件作为输入。关于支持 lagarith 输出并将损失较少的 mp4 作为输入的可能软件有什么建议吗？

这个转换为损失较少的 avi 的练习是视频编解码器实验的一部分，因此，替代措施不会有用。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-11T01:48:01.740

几天前我遇到了同样的问题，由于这个问题在谷歌搜索结果中的位置非常高，我想提供一个解决方案。如果您要添加一个名为[FFInputDriver](http://codecpack.co/download/FFInputDriver.html)的插件包，您可以幸运地使用 Virtualdub 完成此操作。**请在此处查看我的详细答案**：[https ://softwarerecs.stackexchange.com/a/14513](https://softwarerecs.stackexchange.com/a/14513)

它将允许您导入比 avi 更多的文件，我已经成功地将 mp4 和 flv 文件渲染为 Lagarith avi 文件！对于通过 Google 访问此页面的任何访问者：如果您想将视频编码到 Lagarith 编解码器中，这很可能是您的答案！您甚至可以在之后使用 FFmpeg 更改文件容器（例如更改为 mkv）。[看看这里](https://superuser.com/questions/378726/convert-from-mov-to-mp4-container-format)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T00:12:26.907

这不是最快的答案，但迟到总比没有好：您可以使用“ **Xvid4PSP 6.04.Portable** ”。这个名字有点烦人，这个程序很糟糕，我将它用于大多数视频转换（不适用于 psp 等）。支持多线程，因此速度很快！[它是http://www.winnydows.com/](http://www.winnydows.com/)上的免费软件。玩的很开心， ...

# svn - 来自存储库的 SVN Checkout 问题

> ID：15216128
> 
> 赞同：0
> 
> 时间：2013-03-05T04:55:43.537
> 
> 标签：svn, locking, svn-checkout

在我们的项目中，我们有一段代码可以从服务器签出内容。在检查它时给出错误“svn：无法创建新文件'/home/dev761/TAPS/mydocs/.svn/lock'。请任何人告诉原因是什么问题？

# bash - grep输出多行，需要while循环

> ID：15216129
> 
> 赞同：2
> 
> 时间：2013-03-05T04:55:49.067
> 
> 标签：bash

我有一个脚本，它使用 grep 在文本文件中查找行（具体是 ics 日历）

我的脚本找到一个日期匹配，然后上下移动几行以将约会的摘要和开始时间复制到一个单独的变量中。我遇到的问题是我要同时进行多个约会，并且我需要在 grep 中为每个结果运行整个过程。

例子：

```
LINE=`grep -F -n 20130304T232200 /path/to/calendar.ics | cut -f1 d:` 
```

它只输出行，例如 86 89

然后它继续捕获我的其他变量，例如：

```
SUMMARYLINE=$(( $LINE + 5 ))
SUMMARY:`sed -n "$SUMMARYLINE"p /path/to/calendar.ics 
```

我的脚本在一个输出上运行良好，但显然它不能与超过 1 一起工作，我需要它。我应该将 grep 结果发送到数组中吗？一个单独的文本文件来读取？我确定我需要一个while循环在这里。需要一些帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:15:07.237

您可以`grep`很容易地从循环中调用：

```
while IFS=':' read -r LINE notused   # avoids the use of cut
do
    # First field is now in $LINE
    # Further processing

done < <(grep -F -n 20130304T232200 /path/to/calendar.ics) 
```

但是，如果文件不是太大，那么将整个文件读入一个数组可能会更容易，而且更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T11:17:22.993

使用您提出的解决方案，您将多次阅读该文件。使用 awk，您可以一次性完成：

```
awk -F: -v time=20130304T232200 '
    $1 == "SUMMARY" {summary = substr($0,9)} 
    /^DTSTART/ {start = $2}
    /^END:VEVENT/ && start == time {print summary} 
' calendar.ics 
```

# c# - 在以下情况下使用静态方法访问数据库是否安全

> ID：15216134
> 
> 赞同：1
> 
> 时间：2013-03-05T04:56:36.493
> 
> 标签：c#, asp.net, mysql

我正在将一个 asp 网站升级到 asp.net。我正在尝试遵循多 teir 方法。我的基本 dal 层如下，它返回一个数据表并插入一个给定的查询。

```
using System;
using System.Configuration;
using System.Data;
using MySql.Data.MySqlClient;

public class mydatautility
{
    public mydatautility()
    {
    }
    public static DataTable Table(string query)
    {
        string constr = ConfigurationManager.ConnectionStrings["db_con"].ConnectionString;
        DataTable table = new DataTable();
        try
        {
            using (MySqlConnection con = new MySqlConnection(constr))
            {
                con.Close();
                MySqlCommand com = new MySqlCommand(query, con);
                MySqlDataAdapter da = new MySqlDataAdapter(com);
                con.Open();
                da.Fill(table);
                con.Close();
                da = null;
                com = null;
                con.Dispose();
            }
        }
        catch (Exception)
        {
        }
        return table;
    }
    public static int Insert_intoemployee(string query)
    {
        string constr = ConfigurationManager.ConnectionStrings["db_con"].ConnectionString;
        int done = 0;
        try
        {
            using (MySqlConnection con = new MySqlConnection(constr))
            {
                MySqlCommand com = new MySqlCommand(query, con);
                con.Open();
                done = com.ExecuteNonQuery();
                con.Close();
                com = null;
                con.Dispose();
            }
        }
        catch (Exception)
        {
        }
        return done;
    }
} 
```

我不确定运行 2 个并发查询时会发生什么。
如何测试它的并发问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:32:56.733

在这种情况下使用静态方法是安全的。静态方法中的变量与并发调用是隔离的！也请参阅此链接：[静态类中的静态方法中的变量](https://stackoverflow.com/questions/11145993/variable-in-static-methods-inside-static-class)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T05:36:25.840

不会有并发问题，因为每个请求都有自己的线程，并且静态方法对每个线程都有单独的调用堆栈。但是，代码中有一些建议。

```
using System;
using System.Configuration;
using System.Data;
using MySql.Data.MySqlClient;

public static class mydatautility//change to Utilities
{
    public mydatautility()//not required in this scenario
    {
    }
    public static DataTable Table(string query) //change method name to GetTable
    {
        string constr = ConfigurationManager.ConnectionStrings["db_con"].ConnectionString;
        DataTable table = new DataTable();
        try
        {
            using (MySqlConnection con = new MySqlConnection(constr))
            {
                con.Close();//not required
                using(MySqlCommand com = new MySqlCommand(query, con))
                {
                MySqlDataAdapter da = new MySqlDataAdapter(com);
                con.Open();
                da.Fill(table);
                con.Close();
                da = null;// reduntant, not required
                com = null;// reduntant, not required
                con.Dispose();// reduntant, not required
                }
            }
        }
        catch (Exception)
        {
        }
        return table;
    }
    public static bool InsertEmployee(string query)// consider changing int to bool since you only require result of operation
    {
        string constr = ConfigurationManager.ConnectionStrings["db_con"].ConnectionString;
        int done = 0;
        try
        {
            using (MySqlConnection con = new MySqlConnection(constr))
            {
                Using(MySqlCommand com = new MySqlCommand(query, con))
                {
                con.Open();
                done = com.ExecuteNonQuery();
                con.Close();
                com = null;// reduntant, not required
                con.Dispose();// reduntant, not required
                }
            }
        }
        catch (Exception)
        {
        }
        return done > 0; // checks rows affected greater than 0
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-23T09:55:42.753

我认为这是安全的，但不好的做法。如果您使用静态方法访问实时资源，那么您希望如何对它们进行单元测试？您不能再真正模拟数据库访问了。

# iphone - 浏览一堆图像？

> ID：15216135
> 
> 赞同：2
> 
> 时间：2013-03-05T04:56:49.690
> 
> 标签：iphone, ios, objective-c, uicollectionview

我最近遇到了这个应用程序，tinder，它有一个非常酷的功能。

您从 X 图像开始。用户可以向左或向右滑动浏览每个图像，以表明用户喜欢或不喜欢某物。

可以在这里看到一张图片：![在此处输入图像描述](../Images/8b922bad6e78be34afa6994bbec16912.png)

我一直在寻找 UICollectionView 来做到这一点，但我对我应该使用的自定义布局有点困惑。

我一直在考虑生成一堆单元格，然后设置不同的 z-index 并使用相同的 frame.x 将它们堆叠在一起。

有任何可用的教程/建议/帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-07T17:56:55.907

这听起来很有趣，所以我构建了一个模仿您描述的界面的开源库。

[https://github.com/modocache/MDCSwipeToChoose](https://github.com/modocache/MDCSwipeToChoose)

项目中包含的示例应用程序与屏幕截图中的 UI 几乎相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T05:22:11.990

这是简单的 UIImageviews。并且 tinder 只显示两个顶部图像并设置一个背景框架，就像 facebook 图片库一样。

当您滑动顶部图像时，当前线程会触发下一个图像，并将当前图像替换为新图像。您可以根据需要添加喜欢的评论视图。

# python - 在ros中使用python的操纵杆控制/导航

> ID：15216136
> 
> 赞同：1
> 
> 时间：2013-03-05T04:56:58.290
> 
> 标签：python, drivers, joystick, ros

我是ros的初学者。我想从操纵杆获取一些数据。我是一个 python 粉丝 - 不太了解 cpp。

我想将我的操纵杆连接到 USB 端口，并想创建一个节点（/包）来提供来自操纵杆的数据，以便我可以直接使用它来控制我的机器人。

我的疑惑

如何将操纵杆运动控制链接到我的机器人？是否需要任何额外的驱动程序/安装来支持我的操纵杆？我可以使用 python 来破坏它吗？操纵杆是否需要任何其他要求/规格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T01:49:28.450

您应该尝试只使用现有的操纵杆驱动程序：[http](http://www.ros.org/wiki/joy) ://www.ros.org/wiki/joy 。如果你真的需要一个自定义的操纵杆阅读器，那么该包中的代码应该能让你很好地了解将操纵杆数据输出到 ROS 系统的正确方法。

# android - 未来日期的 DateUtils.getRelativeTimeSpanString

> ID：15216141
> 
> 赞同：3
> 
> 时间：2013-03-05T04:57:20.910
> 
> 标签：android

因此，Android SDK 中的 [DateUtils.getRelativeTimeSpanString()][1] 非常适合显示过去的相对时间。

即：5 天前，或 5 分钟前。

但对于未来的日期，似乎效果不佳。它似乎只是打印日期。

是否有任何简单的替代方法可以为将来的日期生成相对时间跨度字符串（通过比较两个日历对象来编写一些计算出天、小时、分钟、秒的东西）？

排长队的东西：在 5 天内，还是在 5 分钟内？

这基本上是我必须要做的，它看起来有点脏（注意：这段代码只是为帖子编写的，实际上并没有通过 java 编译器运行）：

```
Calendar calendarIO = Calendar.getInstance();
calendarIO.set(2013, 2, 14, 7, 0);

long milliseconds1 = calendarIO.getTimeInMillis();
long milliseconds2 = System.currentTimeMillis();
long diff = milliseconds1 - milliseconds2;
long diffSeconds = diff / 1000;
long diffMinutes = diff / (60 * 1000);
long diffHours = diff / (60 * 60 * 1000);
long diffDays = diff / (24 * 60 * 60 * 1000);   

String relativeTime = "";
if (diffDays > 1) {
    relativeTime = diffDays + " days";
} else if (diffDays > 0) {
    relativeTime = diffDays + " days " + diffHours + " hours";
} else if (diffHours > 1) {
    relativeTime = diffHours + " hours";
} else if (diffMinutes > 0) {
    relativeTime = diffMinutes + " minutes.";
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T05:26:52.247

我会尝试使用`DateUtils.getRelativeTimeSpanString(time, now, minResolution)`“in n days”格式，因为它适用于未来的日期。

[http://developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString](http://developer.android.com/reference/android/text/format/DateUtils.html#getRelativeTimeSpanString)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-06-05T07:21:01.633

按照以下步骤

```
String dateString = "06/05/2019 06:49:00 AM";

SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss aa");

 Date convertedDate = new Date();
try {
      convertedDate = dateFormat.parse(dateString);
      long cuMillis = System.currentTimeMillis();

      String timeAgo = (String) DateUtils.getRelativeTimeSpanString(convertedDate.getTime(), cuMillis, 1, FORMAT_ABBREV_RELATIVE);

      Log.d("LOG", "Time Ago==>" + timeAgo);

   } catch (ParseException e) {

    e.printStackTrace();
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T02:51:05.780

```
DateUtils.getRelativeTimeSpanString(endDate.getTime(), startDate.getTime(), DateUtils.FORMAT_ABBREV_RELATIVE); 
```

有以下警告：

给明天而不是 1 天。

# c# - JQuery 对话框未在浏览器中打开

> ID：15216149
> 
> 赞同：0
> 
> 时间：2013-03-05T04:58:28.353
> 
> 标签：c#, jquery, html

```
 <link type="text/css" rel="stylesheet" href="scripts/jquery-ui-1.8.5.custom.css" /> 
        <script src="Scripts/jquery-1.4.2.js" type="text/javascript"></script>
        <script type="text/javascript" src="scripts/jquery-ui-1.8.5.custom.min.js"></script> 

     <script type="text/javascript"> 
     function getalert1(Leave_RegisterID) 
            {
                document.getElementById('<%= hdnLeave_RegID.ClientID %>').value = Leave_RegisterID;
                $.fx.speeds._default = 1000;
                $(function () {
                    $('#reason').dialog({
                        autoOpen: false,
                        show: "blind",
                        hide: "explode",
                        display: ''
                    });
                    $('.LeaveReason1').click(function () 
                    {
                        $('#reason').html();
                        $('#reason').dialog('open');
                        return false;
                    });
                });
            }
</script> 
```

我点击的按钮：

```
 <button id="LeaveReason1" class="LeaveReason1" onclick="getalert1('<%# Eval("Leave_RegisterID") %>');" title="Decline">Decline</button> 
```

但是，当我在 firebug 中调试时，它并没有进入它应该进入的这段代码：

```
 $('#reason').html();
   $('#reason').dialog('open');
   return false; 
```

**HTML**

```
 <div id="reason" style="height: 300px; min-height: 109px; width: auto; display:none;" class="ui-dialog-content ui-widget-content"   runat="server">   
            <table width="100%" border="0" cellspacing="0" cellpadding="0">  
                <tr>
                    <td width="25%" class="body_txt" style="padding-right:2px">
                        <asp:Label ID="lblReason" runat="server" Text="Reason:" ></asp:Label>
                    </td>
                    <td width="75%">
                        <asp:TextBox ID="txtReason" Height="40%" Width="100%" MaxLength="200" TextMode="MultiLine" runat="server" CssClass="txt_bx" ></asp:TextBox>
                    </td>
                </tr>
                <tr>
                    <td colspan="2">&nbsp;</td>
                </tr>                    
                <tr>
                    <td colspan="2" align="center">
                        <asp:Button Width="30%" runat="server" Text="Submit" id="btnSubmit" Height="25px" CssClass="clButton" ></asp:Button>&nbsp;&nbsp;&nbsp;
                    </td>
                </tr>
            </table>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:01:46.030

它没有进入上面给出的代码..因为你在另一个点击事件中有那个代码..所以基本上要让它工作你必须再次点击同一个按钮..这不起作用..

尝试这个

```
 function getalert1(Leave_RegisterID)  // you are calling this function whn click
    {
        document.getElementById('<%= hdnLeave_RegID.ClientID %>').value = Leave_RegisterID;
        $.fx.speeds._default = 1000;
         //$(function () { and no need of ready function here
            $('#reason').dialog({
                autoOpen: false,
                show: "blind",
                hide: "explode",
                display: ''
            });

           // $('.LeaveReason1').click(function () {  again you have a click event here which is not necessary at all.. since the click is already fired by  getalert1()
                $('#reason').html();

                $('#reason').dialog('open');
                return false;

        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:11:53.663

```
$(document).ready(function(){

//separate your dialog init
$(function() {
    $('#reason').dialog({
         autoOpen: false,
         show: "blind",
         hide: "explode"
    });
});

//only have one click event
$('.LeaveReason1').click(function () 
                {
        document.getElementById('<%= hdnLeave_RegID.ClientID %>').value = Leave_RegisterID;
                $.fx.speeds._default = 1000;

                    $('#reason').html();
                    $('#reason').dialog('open');
                    return false;
                }); 
```

# asp.net-mvc-3 - 在 ASP MVC3 应用程序中使用 WCF 服务的最佳方式

> ID：15216158
> 
> 赞同：2
> 
> 时间：2013-03-05T04:59:02.923
> 
> 标签：asp.net-mvc-3, wcf

我是 WCF 和 MVC 世界的新手。目前我有一个 MVC3 ASP 应用程序和一个 WCF 服务应用程序公开一些服务。我想从 MVC3 ASP 应用程序访问此服务。据我所知，这可以通过将服务引用添加到 ASP 项目或通过从 WCF 服务生成代理类并将代理类添加到 ASP 应用程序来完成。

我的问题：这是我前进的正确方式（如上所述）。如果是这样，哪种方法更好（添加服务引用或生成代理类并手动添加）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:44:21.973

使用添加服务引用要容易得多。添加服务引用基本上意味着您要求 Visual Studio 完成如果您使用默认设置手动生成它会完成的工作。如果您没有任何理由不采用更简单的方法，那么我的建议是使用添加服务参考。

# eclipse - Java ME Nokia Eclipse/Netbeans 不显示异常的来源

> ID：15216162
> 
> 赞同：0
> 
> 时间：2013-03-05T04:59:43.667
> 
> 标签：eclipse, netbeans, java-me

我使用诺基亚 SDK 1.0 尝试了 Eclipse 和 Netbeans（对于旧设备，我正好需要 1.0），但是当我使用它时遇到了严重的困难——当我遇到异常时，它只显示异常的类型，而不是代码中的位置它从哪里来。

# c++ - Audiere 不完整的通用字符名称 \U 错误

> ID：15216164
> 
> 赞同：0
> 
> 时间：2013-03-05T05:00:08.537
> 
> 标签：c++, qt

嘿，所以我正在尝试使用 QT 和 Audiere 制作音乐播放器。首先我安装了 Audiere 并将头文件放在编译器的包含文件夹中。然后我将 .lib 文件添加到 QT 项目中。我写了以下代码：

```
AudioDevicePtr device(OpenDevice());
if(!device){
//failure
}
SampleSource* source = OpenSampleSource("C:\Users\Amenechi\Downloads\LMFAO - Sexy And I Know It");
OutputStreamPtr stream(OpenSound(device,source,true));
if(!stream){
//failure
}
stream->setRepeat(true);
stream->setVolume(0.5f);
stream->play(); 
```

但我得到这个错误：

[http://s20.postimage.org/u1yxk0d0s/Untitled.jpg](http://s20.postimage.org/u1yxk0d0s/Untitled.jpg)

现在我不确定哪里出了问题，也许我错误地安装了audiere库？

编辑：嘿，如果有帮助，这里是编译输出。

```
07:37:45: Running steps for project QTunesV2...
07:37:45: Configuration unchanged, skipping qmake step.
07:37:45: Starting: "C:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe" 
C:/Qt/Qt5.0.1/Tools/MinGW/bin/mingw32-make -f Makefile.Debug
mingw32-make[1]: Entering directory 'C:/Qt/Qt5.0.1/Tools/QtCreator/bin/QTunesV1/QTunesV2-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug'
g++ -Wl,-subsystem,windows -mthreads -o debug\QTunesV2.exe debug/main.o debug/mainwindow.o debug/moc_mainwindow.o  -lmingw32 -lqtmaind -LC:/Qt/Qt5.0.1/Tools/QtCreator/bin/QTunesV1/QTunesV2/../../ -laudiered -LC:\Qt\Qt5.0.1\5.0.1\mingw47_32\lib -lQt5Widgetsd -lQt5Guid -lQt5Cored -llibEGLd -llibGLESv2d -lgdi32 -luser32 
c:/qt/qt5.0.1/tools/mingw/bin/../lib/gcc/i686-w64-mingw32/4.7.2/../../../../i686-w64-mingw32/bin/ld.exe: cannot find -laudiered
collect2.exe: error: ld returned 1 exit status
Makefile.Debug:80: recipe for target 'debug\QTunesV2.exe' failed
mingw32-make[1]: *** [debug\QTunesV2.exe] Error 1
mingw32-make[1]: Leaving directory 'C:/Qt/Qt5.0.1/Tools/QtCreator/bin/QTunesV1/QTunesV2-build-Desktop_Qt_5_0_1_MinGW_32bit-Debug'
mingw32-make: *** [debug] Error 2
makefile:34: recipe for target 'debug' failed
07:37:45: The process "C:\Qt\Qt5.0.1\Tools\MinGW\bin\mingw32-make.exe" exited with code 2.
Error while building/deploying project QTunesV2 (kit: Desktop Qt 5.0.1 MinGW 32bit)
When executing step 'Make' 
```

# android - 安卓果冻豆离线语音查询

> ID：15216165
> 
> 赞同：0
> 
> 时间：2013-03-05T05:00:08.627
> 
> 标签：android, voice-recognition

只是一个查询

我为 Android 2.3.x 制作了一个语音命令应用程序。此应用程序接受语音命令并转换为文本并执行所需的操作。

现在我有果冻豆的设备。由于 jelly Bean 引入了一种新的美国英语会话文本到语音的语音，可通过 TTS API 作为网络引擎和嵌入式引擎使用。

如果我用果冻豆构建了这个应用程序并安装在新设备上，它可以正常工作吗？它会自动使用离线语音转文本吗？

请回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:25:41.117

据我所知，android 使用两种不同的语音 API。

1.语音输入，即键盘上的键

2.语音识别，即随时随地打字

已启用语音输入`offline`，但未启用语音识别**（对于 4.1 JellyBean）**。

这就是为什么键盘上的键可以离线工作，但其他地方没有。

有关更多信息，请阅读[此](http://android-developers.blogspot.com/2011/12/add-voice-typing-to-your-ime.html)。

# java - 代码中的Java编程标准偏差错误

> ID：15216167
> 
> 赞同：0
> 
> 时间：2013-03-05T05:00:25.840
> 
> 标签：java

我的标准差很远。当我进入时：2 4 4 4 5 5 7 9 n

我没有得到 2。这是我的代码。我相信一切都检查过了，所以我不明白为什么我一直得到 1.8284791953425266 而不是 2 ：

```
import java.util.Scanner;

public class stocks {

  public static void main(String[] args) {

     Scanner in = new Scanner(System.in);
     double currentNum = 0;
     double numtotal = 0;
     int count = 0;
     double mean = 0;
     double square = 0, squaretotal = 0, sd = 0;

     System.out.println("Enter a series of double value numbers, ");
     System.out.println("Enter anything other than a number to quit: ");

     while (in.hasNextDouble()) 
     {

         currentNum = in.nextDouble();
         numtotal = numtotal + currentNum;

         count++;
         mean = (double) numtotal / count;
         square = Math.pow(currentNum - mean, 2.0);
         squaretotal = squaretotal + square; 
         sd = Math.pow(squaretotal/count, 1/2.0);
     }

     System.out.println("The mean is: " +mean);
     System.out.println("The standard deviation is: " +sd);

     }

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:07:18.160

在计算标准偏差之前，您需要计算所有数字的平均值。现在，您的平均值是当前数字之前所有数字的平均值。你的问题在这里

```
square = Math.pow(currentNum - mean, 2.0); 
```

在这一点上，平均值是我们看到的数字的平均值。这是因为 numtotal 是我们看到的数字的总和。要解决此问题，您可以首先将所有数字放入数组列表之类的东西中。然后计算出所有数字的平均值，然后你可以计算出平方差和标准差。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T14:14:57.230

`count`如果要除以它，则需要为双倍。

```
mean = (double) numtotal / count; 
```

-->

```
mean = (double) numtotal / (double) count; 
```

# matlab - Matlab中如何从图形中导出数据？

> ID：15216175
> 
> 赞同：0
> 
> 时间：2013-03-05T05:01:27.857
> 
> 标签：matlab

我在 matlab 中有一个图表，我想从图表中导出数据。是否可以从图中导出数据？

我努力出口。实际上，我过去曾导出过数据，但我忘记了。

非常感谢任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:09:50.693

您可以通过以下方式从图形中导出`x`和`y`向量（假设该图形是单个数据集的 2D 图）：

```
h = plot(1:10);
xVec = get(h,'XData');
yVec = get(h,'YData'); 
```

如果您没有句柄但图形已打开，则可以使用`gcf`,`gca`作为当前活动图形或轴的句柄。

如果图中有多个数据集（行），您可以通过以下方式获取所有关联数据：

```
lines = findobj(h, 'Type', 'line'); //h is the handle to the figure
nlines = length(lines);
points = cell(nlines,2);
for i = 1:nlines
    points{i,1} = get(lines(i),'XData');
    points{i,2} = get(lines(i),'YData');
end 
```

# android - ListView 中的 onItemClick 不起作用

> ID：15216178
> 
> 赞同：1
> 
> 时间：2013-03-05T05:01:35.010
> 
> 标签：android, android-listview, onitemclicklistener

我无法收到 Toast 消息，因为从未调用过**onItemClick**。Log-cat 没有显示任何错误。如果我在任何地方出错，请检查我的代码并纠正我。我用过阵列适配器。

```
public class Open extends ListActivity {
    DbAdapter mDb = new DbAdapter(this);

    @Override
    protected void onDestroy() {
        // TODO Auto-generated method stub
        mDb.close();
        super.onDestroy();
    }

    /** Called when the activity is first created. */
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.open);

        ListView listContent = (ListView) findViewById(android.R.id.list);

        mDb.open();
        Cursor cursor =mDb.fetchAllPrograms();
        startManagingCursor(cursor);

        String[] from = new String[] { DbAdapter.KEY_TITLE };
        int[] to = new int[] { R.id.textViewName };

        SimpleCursorAdapter cursorAdapter = new SimpleCursorAdapter(this, 
    R.layout.row, cursor, from, to);
        listContent.setAdapter(cursorAdapter);

        //Onclick ListView setlistener
        listContent.setTextFilterEnabled(true);
        listContent=getListView();

            listContent.setOnItemClickListener(new OnItemClickListener() {
                public void onItemClick(AdapterView<?> parent, View 

    view,int position, long id) {
                    Toast.makeText(getApplicationContext(),
   "Working!", 
                    Toast.LENGTH_LONG).show();    
                }
            });

    }
} 
```

Row.xml 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<TextView
    android:id="@+id/textViewName"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_marginTop="10dp"
     android:layout_marginBottom="10dp"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="25sp"
    android:textColor="#0000FF"
    android:textIsSelectable="true"
     /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-08T02:49:20.780

我遇到了类似的问题。不仅我的 onItemClick 方法被忽略，而且我的列表选择器也不起作用（`android:listSelector`。）

原来它是`android:textIsSelectable`我的 TextView 行元素上的属性。尝试将其设置为`false`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-08T12:45:12.177

就我而言，问题出在`android:longClickable="true"`. 从 xml 中删除此行后，单击侦听器再次开始工作。

# css - :after 和 :before 正在崩溃？

> ID：15216180
> 
> 赞同：1
> 
> 时间：2013-03-05T05:01:38.083
> 
> 标签：css, pseudo-element, visual-glitch

参考：[http ://www.stephenkelzer.com/design.html 目前](http://www.stephenkelzer.com/design.html)
**仅针对 firefox 进行了优化**（如果在其他浏览器中查看可能会发现额外的错误）

--第一次发帖的人，我真的可以在这里得到一些帮助，谢谢！

* * *

我在这里构建了一个非常简单的投资组合页面，我计划稍后对其进行扩展。

我想像 Chris Coyier 在他的网站上所做的那样为每个模块添加分层效果：http: [//css-tricks.com/](http://css-tricks.com/)

**我将图层设为绿色和黄色以帮助它们脱颖而出**

HTML 标记：

```
<div id="mh-com" class="abc portmodule">
    <div class="portmoduleimg"></div>
        <div class="portmoduleinfo">
            <h3><a href="http://www.marlonheimerl.com/" rel="nofollow">MarlonHeimerl.com</a></h3>
            <p>...</p>
        </div>
    </div>
<div id="business-template" class="zxc portmodule">
    <div class="portmoduleimg"></div>
        <div class="portmoduleinfo">
            <h3><a href="" rel="nofollow">Business Template</a></h3>
            <p>...</p>
        </div>
    </div> 
```

CSS 标记：

```
.portmodule {
margin-top: 25px;
height:300px;
overflow: hidden;
width:969px;
background-color:rgb(98, 109, 111);
color: rgb(192,204,206);
}
.portmodule:after, .portmodule:before {
content:"";
position: absolute;
top:6px;
left:6px;
background-color: green;
width:100%;
height:100%;
z-index: -1;
}
.portmodule:before {
top:12px;
left:12px;
background-color: yellow;
} 
```

* * *

我想让它使每个单独的模块都具有分层效果。我希望你们能帮助我！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T15:33:34.810

[http://www.codepen.io/thestevekelzer/pen/ibmta](http://www.codepen.io/thestevekelzer/pen/ibmta)

我找到了一个“次要解决方案”......我的意思是我不认为这是一种首选方法。

:before & :after 伪元素的绝对定位似乎都是基于父元素，而不是我想的子元素。您会在我的分叉代码笔中注意到，我增加了“业务模板”元素的顶部调整，以适应它在页面上的较低位置。

如果有人知道更简单的解决方案，我仍然会喜欢它。谢谢！！！

# php - egroupware 中的电子邮件配置

> ID：15216188
> 
> 赞同：0
> 
> 时间：2013-03-05T05:01:59.537
> 
> 标签：php

emailadmin-依赖失败:(appname: phpgwapi; 版本: 1.7,1.8,1.9; appname: egw-pear; 版本: 1.8,1.9;))D

felamimail-安装后依赖失败：（appname：phpgwapi；版本：1.7、1.8、1.9；appname：emailadmin；版本：1.7、1.8、1.9；appname：egw-pear；版本：1.8、1.9；））P

我正在尝试在我的系统中本地安装 egroupware，但我收到这 2 个警告。由于这些警告，我无法使用 egroupware 的邮件工具。所以任何人都可以告诉我如何解决这个警告？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T08:17:30.250

您应该检查是否安装了 egw-pear。Egw-pear 不会自动安装。

# jsp - 是否可以通过附加到 URL 或使用 POST 将我当前的 JSP 路径发送到 Servlet 或其他 JSP 而不向用户显示？

> ID：15216189
> 
> 赞同：0
> 
> 时间：2013-03-05T05:02:04.087
> 
> 标签：jsp, servlets, jboss7.x, java-ee-6

**编辑：**

好的，我会尝试简化这个解释，因为我似乎无法在网上找到任何资源，而且我第一次解释它时做得很糟糕。我的目标是：

从任何 JSP 开始（它可以是用户可以在站点中访问的任何地方），但为了论证，让我们说`index.jsp`. 用户试图做一些需要登录的事情，因此在另一个名为`login.jsp`. 现在，用户通过提交发送到身份验证 servlet 的表单来登录，并且他们被重定向回原来的位置，但在本例中`index.jsp`。现在我在下面解释我到目前为止所做的事情。我尝试了 Session 但有一种奇怪的古怪行为导致我无法通过它发送 URL。我也不想通过 GET 附加 URL，因为这样做会显示它并且它看起来很丑。是否可以在向用户隐藏该逻辑的同时做到这一点？

* * *

到目前为止，我尝试过的是任何时候页面将引导用户登录，我附加 URL 但将其发送到我的`Authenticate.java`servlet。它在那里调用`doGet()`重定向到登录的 ，因此我可以`login.jsp`从`request`变量中访问它。问题是 URL 甚至没有指向`login.jsp`我的身份验证 servlet 和附加的 url。所以应该是：

```
http://localhost:8080/app/login 
```

但它说

```
http://localhost:8080/app/authenticate?url=/index.jsp 
```

我将提供我的代码，这样它就更有意义了。如果需要任何解释，请不要犹豫！谢谢。

**更新：**

好的，看来我需要更新/为了解决 Hardik Mishra 的担忧，我为重定向而道歉。我一般/松散地使用了这个术语，因为重定向到我可能意味着只是通过引导另一个页面传递一些信息，因为它是一个控制器。如您所见，我显然使用的是`RequestDispatcher`. 我有足够的能力阅读文档，因此我可以说响应有一种`sendRedirect()`我可以使用的方法。但就像我上面提到的，出于上述原因，我不想使用 Session。`sendRedirect()`不一样`request`我丢失了信息。但是由于您也对我从哪里获得这些 URL 感到困惑，所以我将提供一个调用 JSP 的示例。我从来没有包含它的原因是因为在被要求登录之前，无论他们正在与哪个 JSP 交互，始终将用户带回到他们原来的位置。为清楚起见，将在上面添加我使用的示例 JSP `Auth.java`。看来我过早地添加`isLoggedIn()`了`AuthUtilities`，这可能又增加了混乱，所以再次道歉。

**索引.jsp**

* * *

```
<%@ page import="com.myapp.app.AuthUtilities, com.myapp.app.Dbase" %>

<html>
<head>

    <title>Home</title>
</head>
<body>
    <h3><%= AuthUtilities.isLoggedIn(session, request) %></h3>
    <CENTER>
    <h2>Welcome to UniHub! <%= request.getServletPath() %></h2>

    <form ACTION="le_test" METHOD="POST">
        <input TYPE="text" name="query">
        <input TYPE="submit" value="Search"><br>
    </form>
    </CENTER>
    <hr>
    <a href = "home">home</a>
</body>

</html> 
```

**验证.java**

* * *

```
@WebServlet("/authenticate")
public class Auth extends HttpServlet {
@Override
public void doPost(HttpServletRequest req, 
    HttpServletResponse res) throws ServletException, IOException {

    String servletPath = (req.getAttribute("url") != null) ?
        ((String)req.getAttribute("url")).replaceFirst("/", "") : "home";

    if(AuthUtilities.authenticate(userName, password)) {
        res.sendRedirect(servletPath);
    }
    else
        res.sendRedirect("login");

}//end of doPost method

public void doGet(HttpServletRequest req,
    HttpServletResponse res) throws ServletException, IOException {

    RequestDispatcher dis = req.getRequestDispatcher("login");
    dis.forward(req, res);

}//end of doGet method

}//end class 
```

**登录.jsp**

* * *

```
 <%@ page import="com.myapp.app.AuthUtilities" %>

<!doctype html>
<html>

<head>
    <title>Login</title>
</head>

<body>

    <form action="authenticate" method="POST">
        <label for="username">Username</label>
        <input type="text" name="username"><br>
        <label for="password">Password</label>
        <input type="password" name="password"><br>

        <% if(request.getAttribute("url") != null) { %>
            <input type="hidden" value="<%= request.getAttribute("url") %>" name="url"><br>
        <% } %>

        <input type="submit" value="login">
    </form>
        <p>Not a member? <a href="signup">Sign Up Now</a></p>
</body>

</html> 
```

**isLoggedIn() 方法**

* * *

```
public static String isLoggedIn(HttpSession session, HttpServletRequest req) {
        String userName = (String)session.getAttribute("username");
            if(userName != null)
                userName = "You are logged in as <a href='profile'>"+
                    userName + "</a> | " +
                    "<a href='logout'>Logout :(</a>";
            else
                userName = "<a href=\"authenticate?url="+req.getServletPath()+"\">Login</a>";

            return userName;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:45:26.097

首先，您没有清楚地解释这个问题。从`Auth`Servlet 我得到的是

```
http://localhost:8080/app/login 
```

但它说

```
http://localhost:8080/app/authenticate?url=/index.jsp 
```

您将在成功时重定向到所需的页面（有效凭据），如果使用重定向无效则重定向到“login.jsp” `doPost()`。

> 到目前为止，我尝试过的是任何时候页面将引导用户登录，我附加 URL 但将其发送到我的 Authenticate.java servlet。在那里它调用重定向到登录的 doGet()，因此我的 login.jsp 可以从请求变量访问。问题是 URL 甚至没有指向 login.jsp，而是指向我的身份验证 servlet 和附加的 url。

在`doGet()`中，您不是重定向到登录页面，而是转发页面。（请参阅[Jsp forward 和 redirect 之间的区别](https://stackoverflow.com/questions/6068891/difference-between-jsp-forward-and-redirect)）。

因此，对于您的情况，浏览器 URL 将不会更新，您也可以访问请求对象中的属性。因此，在 中存储价值并在中`HttpSession`使用。`response.sendRedirect``doGet()`

另一种`request.getHeader("Referer")`从请求标头获取 JSP 页面的方法，但不建议这样做，因为发送Referer 可能会被防火墙或浏览器配置阻止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T10:45:05.810

除了重定向到`login`之外，您还可以传递一个附加参数“refererurl”，如果登录成功，它将告诉您需要重定向的 url。

```
 @Override
    public void doPost(HttpServletRequest req, 
        HttpServletResponse res) throws ServletException, IOException {

        String urlToRedirectAfterLogin = req.getParameter('refererurl');

        String servletPath = (req.getAttribute("url") != null) ?
            ((String)req.getAttribute("url")).replaceFirst("/", "") : "home";

        if(AuthUtilities.authenticate(userName, password)) {
            res.sendRedirect(urlToRedirectAfterLogin);
        }
        else{
            String fullURL = request.getRequestURL().append("?")
.append(request.getQueryString()).toString();
        res.sendRedirect("login"+"?refererurl="+fullURL);

            }

    }// 
```

# mysql - 双连接查询需要 540 秒才能运行 - 我怎样才能加快速度？

> ID：15216191
> 
> 赞同：4
> 
> 时间：2013-03-05T05:02:05.550
> 
> 标签：mysql, sql, query-performance

一个特定的查询需要*很*长时间才能运行，大约 540 秒（是的，**9 分钟！**）。这会导致负载峰值。

有没有办法可以重写查询 - 或添加索引 - 以加快速度？发生了。

### 询问

```
select DISTINCT tab3.id 
from `tab1`  
left join `tab2` on tab2.element_id = tab1.resource_id 
    and tab1.resource_type = 2 
    and tab2.element_type_id = 1 
left join `tab3` on tab2.tab3nt_id = tab3.id  
where tab1.group_tab1_id = 1 
    and tab1.domain_id = 2 
    and tab3.domain_id = 2 
    and tab3.tab3nt_start_date >= '2012-12-01'  
    and tab3.tab3nt_start_date <= '2013-03-01' 
```

### 解释计划

```
+----+-------------+-------+--------+-------------------------------------------------------------------------------------+----------------------------+---------+-------------------------------+------+-------------------------------------------+
| id | select_type | table | type   | possible_keys                                                                       | key                        | key_len | ref                           | rows | Extra                                     |
+----+-------------+-------+--------+-------------------------------------------------------------------------------------+----------------------------+---------+-------------------------------+------+-------------------------------------------+
|  1 | SIMPLE      | tab1   | ref    | group_tab1_id_resource_id,domain_id,domain_id_resource_type,tgtr_resource_domain_key | domain_id                  | 13      | const,const,const           |  962 | Using where; Using index; Using temporary |
|  1 | SIMPLE      | tab2   | ref    | FK_tab3nt,element_type_id_element_id                                                 | element_type_id_element_id | 8       | const,svr.tab1.resource_id  |   14 | Using where                               |
|  1 | SIMPLE      | tab3   | eq_ref | PRIMARY,domain_id_tab3nt_type_cd                                                     | PRIMARY                    | 4       | svr.tab2.tab3nt_id          |    1 | Using where                               |
+----+-------------+-------+--------+-------------------------------------------------------------------------------------+----------------------------+---------+-------------------------------+------+-------- 
```

### 表结构

```
mysql> show create table tab1\G
*************************** 1\. row ***************************
       Table: tab1
Create Table: CREATE TABLE `tab1` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `domain_id` int(11) NOT NULL,
  `group_tab1_id` int(11) NOT NULL,
  `resource_id` int(11) NOT NULL,
  `resource_type` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `group_tab1_id_resource_id` (`group_tab1_id`,`resource_id`),
  KEY `domain_id` (`domain_id`,`group_tab1_id`,`resource_type`,`resource_id`),
  KEY `domain_id_resource_type` (`domain_id`,`resource_type`),
  KEY `tgtr_resource_domain_key` (`resource_id`,`domain_id`)
) ENGINE=InnoDB AUTO_INCREMENT=2039461 DEFAULT CHARSET=latin1
1 row in set (0.01 sec)

mysql> show create table tab2\G
*************************** 1\. row ***************************
       Table: tab2
Create Table: CREATE TABLE `tab2` (
  `id` int(255) NOT NULL AUTO_INCREMENT,
  `element_type_id` int(11) NOT NULL,
  `tab3nt_id` int(11) NOT NULL,
  `element_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `FK_tab3nt` (`tab3nt_id`),
  KEY `element_type_id_element_id` (`element_type_id`,`element_id`)
) ENGINE=InnoDB AUTO_INCREMENT=53195543 DEFAULT CHARSET=utf8
1 row in set (0.00 sec)

mysql> show create table tab3\G
*************************** 1\. row ***************************
       Table: tab3
Create Table: CREATE TABLE `tab3` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `create_user_id` int(11) DEFAULT NULL,
  `tab3nt_type_cd` int(11) NOT NULL,
  `tab3nt_start_date` datetime NOT NULL,
  `tab3nt_end_date` datetime NOT NULL,
  `domain_id` int(11) NOT NULL,
  PRIMARY KEY (`id`),
  KEY `tab3nt_user_FK` (`create_user_id`),
  KEY `domain_id_tab3nt_type_cd` (`domain_id`,`tab3nt_type_cd`)
) ENGINE=InnoDB AUTO_INCREMENT=9393276 DEFAULT CHARSET=utf8
1 row in set (0.00 sec) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:15:11.373

我没有测试这个查询，因为目前我没有访问 MySql 数据库但尝试这样的事情：

```
SELECT DISTINCT tab3.id 
FROM 'tab1'
INNER JOIN 'tab2' 
      ON tab2.element_id = tab1.resource_id 
INNER JOIN 'tab3' 
      ON tab2.tab3nt_id = tab3.id
WHERE tab1.group_tab1_id = 1
    AND tab1.domain_id = 2
    AND tab3.domain_id = 2
    AND tab1.resource_type = 2
    AND tab2.element_type_id = 1
    AND tab3.tab3nt_start_date between '2012-12-01' and '2013-03-01' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T13:10:04.770

尝试在 tab2.element_id 上放置一个简单（非复合）索引。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T22:04:29.033

看起来你想在表 tab3 上使用不同的 id，我会重新排序表并使用内连接而不是左连接。

```
SELECT DISTINCT tab3.id 
FROM 'tab3' 
INNER JOIN 'tab2'
  ON tab2.tab3nt_id = tab3.id 
INNER JOIN 'tab1'
  ON tab2.element_id = tab1.resource_id
WHERE tab1.group_tab1_id = 1 
AND tab1.domain_id = 2
AND tab3.domain_id = 2
AND tab1.resource_type = 2
AND tab2.element_type_id = 1
and tab3.tab3nt_start_date >= '2012-12-01'  
and tab3.tab3nt_start_date <= '2013-03-01' 
```

# ruby - 尝试在 Mac OS X 中安装 ruby

> ID：15216193
> 
> 赞同：0
> 
> 时间：2013-03-05T05:02:14.463
> 
> 标签：ruby, macos, installation, osx-mountain-lion

所以我是新手。我正在尝试使用山狮在我的 Mac 上安装 ruby​​。我遵循本指南：[http ://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/](http://www.moncefbelyamani.com/how-to-install-xcode-homebrew-git-rvm-ruby-on-mac/)

当我输入“brew doctor”时，会收到很多警告：

```
$ brew doctor
Warning: /Library/Frameworks/Mono.framework detected
This can be picked up by CMake's build system and likely cause the build to
fail. You may need to move this file out of the way to compile CMake.
Warning: Unbrewed dylibs were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected dylibs:
    /usr/local/lib/libusb-0.1.4.dylib
    /usr/local/lib/libusb-1.0.0.dylib
    /usr/local/lib/libusbpp-0.1.4.dylib
Warning: Unbrewed .la files were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .la files:
    /usr/local/lib/libusb.la
    /usr/local/lib/libusbpp.la
Warning: Unbrewed .pc files were found in /usr/local/lib/pkgconfig.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected .pc files:
    /usr/local/lib/pkgconfig/fuse.pc
    /usr/local/lib/pkgconfig/libusb.pc
Warning: Unbrewed static libraries were found in /usr/local/lib.
If you didn't put them there on purpose they could cause problems when
building Homebrew formulae, and may need to be deleted.

Unexpected static libraries:
    /usr/local/lib/libusb.a
    /usr/local/lib/libusbpp.a 
```

我应该怎么办？发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T05:05:46.380

I would recommend that you manage your ruby installations with either [RVM](https://rvm.io/) or [RBENV](https://github.com/sstephenson/rbenv) it will make your life much easier to manage different versions, upgrades, etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:22:48.727

使用[RVM](https://rvm.io/)。RVM 允许您在同一台机器上安装和管理多个版本的 Ruby。

您可以按照[此处](https://rvm.io/rvm/install/)的说明安装 RVM，并按照[此处](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book#sec-install_ruby)的说明安装 Ruby。第二个链接是一个很好的初学者指南，顺便说一下 ruby​​-on-rails。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T05:24:40.000

您的 Mac 可能带有 Ruby 1.8.7。我喜欢 1.9.x 中的一些功能，并且它们最近发布了 2.0.0，因此您可能希望升级。但是，如果您不需要它，那么做任何工作都是没有意义的，所以首先确定您现在是否需要不同版本的 Ruby。（并使用 验证您的当前版本`ruby -v`）。

假设您需要一个新版本，RVM 和 rbenv 是两个工具，它们使安装和管理（也就是在）各种 Ruby 及其版本之间非常容易。有些人不喜欢 RVM，因为它会做一些奇怪的事情（比如覆盖`cd`- 更改目录的定义），但我发现它使用起来更简单，并且不需要你每次都记住 rehash。阅读并自己决定。

如果你想使用 RVM：

1.  安装它（谷歌了解如何）。
2.  确保在安装期间获取它告诉您在输出中执行的脚本。
3.  开始使用它：（`rvm install <version>`例如`rvm install 1.9.3`），`rvm use <version>`（在版本之间切换），`rvm list`（查看您安装了哪些红宝石）等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T07:08:23.940

RVM 有更多的在线资源，所以它是一个不错的选择，因为你刚开始。注意控制台中的错误日志并用谷歌搜索，您可能会看到一些非常准确的结果（因为 ruby​​ 安装问题很常见）。

# validation - cakephp 验证消息未显示

> ID：15216197
> 
> 赞同：0
> 
> 时间：2013-03-05T05:02:21.273
> 
> 标签：validation, cakephp, cakephp-2.1

我是 cakephp 新手，正在尝试在其中构建一个应用程序。我有一些文本字段，我希望对它们进行验证。我在 cakephp.org 中关注 cakephp 教程并执行了以下操作，但我在文本字段附近看不到验证消息。以下是我的代码：

cp:

```
 <?php echo $this->Form->text('Rideoffer.PickFrom', 
                                                array('class' => 'address-text',
                                                    'value' => $dropFrom));  ?> 
```

模型：

```
public $validate = array(
         'PickFrom' => array(
        'rule' => 'notEmpty',
        'message' => 'Cannot leave this field blank.'
    ),
    //'PickFrom' => 'notEmpty',
    'DropAt' => 'notEmpty',
   // 'born'  => 'date'
); 
```

我哪里错了？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T14:39:27.067

你可以使用这个Form->text('Rideoffer.PickFrom', array('class' => 'address-text', 'value' => $dropFrom, 'error'=>'Cannot leave this field空白。') ); ?>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:19:24.997

您在 dropat 中使用了逗号

```
public $validate = array(
         'PickFrom' => array(
        'rule' => 'notEmpty',
        'message' => 'Cannot leave this field blank.'
    ),
    //'PickFrom' => 'notEmpty',
    'DropAt' => 'notEmpty'
   // 'born'  => 'date'
); 
```

# php - 从 php 和 sql 创建动态自动递增的 seo 友好 url

> ID：15216201
> 
> 赞同：4
> 
> 时间：2013-03-05T05:02:49.593
> 
> 标签：php, mysql, .htaccess, seo

**在user_id** 1位置单击用户 John Smith 它应该转到 URL www.example.com/John-Smith 而不是 profile.php?uid=1

当您单击**user_id** 2 中的用户 John Smith 时，它应该转到网址 www.example.com/John-Smith-2 profile.php?uid=2

当您单击**user_id** 3 中的用户 Kia Dull 时，它应该转到网址 www.example.com/Kia-Dull profile.php?uid=3

```
Table Users

User_id    First_name    last_name
   1          John         Smith
   2          John         Smith
   3          Kia          Dull 
```

如何为此格式化我的 .Htaccess 文件和 php/sql。

单击用户配置文件时，我只是将其引导到此处。

```
<a href="<?php echo $row[first_name] ?>-<?php echo $row[last_name] ?>" 
```

这没有任何作用。

这是我的 .htaccess

```
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)$ profile.php?uid=$1 [L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T08:52:56.010

看看下面的文章。希望它描述清楚/简单，并举例说明您需要什么。

### [使用 PHP 的 SEO 友好 URL](http://www.9lessons.info/2011/04/seo-friendly-urls-with-php.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T15:37:41.397

我会在数据库中创建另一个名为“slug”的列，并使其成为唯一的字符串。现在，当添加一条新记录时，我会为这条记录生成 slug。

我找到了一个创建 slug 的函数示例作为对这个问题的回答：[PHP function to make slug (URL string)](https://stackoverflow.com/questions/2955251/php-function-to-make-slug-url-string#answers)

引用问题的答案中提供的 slugify-function 不会检查该值是否已存在于您的数据库中。如果 slug 已经存在，你必须自己做，并添加一个像“-1”这样的后缀。

如果您已完成所有这些操作，您的数据应该类似于以下内容：

```
Table Users

User_id    First_name    Last_name     Slug
   1          John         Smith     john-smith
   2          John         Smith    john-smith-1
   3          Kia          Dull       kia-dull 
```

接下来的步骤应该很容易。

这将是创建链接的一个选项：

```
<a href="<?php echo $row['Slug'] ?>"><?php echo $row['First_name'] ?> <?php echo $row['Last_name'] ?></a> 
```

.htaccess 文件应该没问题，就像你已经拥有它一样......

```
RewriteEngine on
RewriteBase /
RewriteRule ^(.*)$ profile.php?uid=$1 [L] 
```

您只需要在*profile.php*文件中查询表中的 $_GET['uid'] 之类的值。现在我将参数*uid*重命名为*slug*，因为它不再是一个 ID，但是您可以通过在 slug 之后查询很容易地获得 ID。

此解决方案的好处：

*   易于调试。蛞蝓是你可以在数据库中找到的 1:1 的东西。如果您现在有一个 URL，您无需猜测就可以知道它是哪个用户。
*   持续的。即使您删除 id=1 的行，行 id=2 仍然会有 slug "john-smith-1"

**供参考：**

> slug 是 URL 的一部分，它使用人类可读的关键字来标识页面。 [http://en.wikipedia.org/wiki/Clean_URL#Slug](http://en.wikipedia.org/wiki/Clean_URL#Slug)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:11:49.280

你错过了一点代码，确切的代码是这样的......

```
<a href="<?php echo $row['first_name']."-".$row['last_name']."-".$row['User_id']."profile.php?uid=".$row['User_id']; ?>"><?php echo $row['first_name']."-".$row['last_name']."-".$row['User_id']; ?></a> 
```

这将创建您想要的 URL，并根据需要在 HTACCESS 中进行更改。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T13:48:20.017

将此用于您的 htaccess 规则。`-`该规则基本上匹配以数字结尾的任何内容

```
RewriteEngine on
RewriteBase /
RewriteRule -([\d]+)$ profile.php?uid=$1 [L] 
```

和你的链接类似的东西。

```
<a href="<?=$row['first_name']?>-<?=$row['last_name']?>-<?=$row['user_id']?>">User</a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T05:28:34.603

您必须使用“回声”来显示该链接中的数据，

```
<a href="<?php **echo** $row[first_name] ?>-<?php **echo** $row[last_name] ?>" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-09T13:42:34.630

```
RewriteEngine on
RewriteBase /
RewriteRule ^([^.*]+)$ profile.php?uid=$1 
```

应该做的伎俩

# haskell - 在使用 Parsec 之类的解析器组合库时，我应该使用词法分析器吗？

> ID：15216202
> 
> 赞同：49
> 
> 时间：2013-03-05T05:02:52.860
> 
> 标签：haskell, lexer, parsec

在像 Haskell's Parsec 这样的解析器组合库中编写解析器时，您通常有两种选择：

*   编写一个词法分析器将您的`String`输入拆分为标记，然后执行解析`[Token]`
*   直接写解析器组合器`String`

第一种方法似乎很有意义，因为许多解析输入可以理解为由空格分隔的标记。

在其他地方，我看到人们建议不要标记化（或*扫描*或*词法分析*，有些人如何称呼它），引用简单是主要原因。

词法分析和不做词法之间的一般权衡是什么？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-03-05T05:02:52.860

最重要的区别是词法分析将*翻译您的输入域*。

一个**很好的**结果是

*   您不必再考虑空格了。在直接（非词法分析）解析器中，您必须`space`在所有允许使用空格的地方添加解析器，这很容易忘记，并且如果空格必须分隔*所有*标记，它会使您的代码混乱。

*   您可以逐个考虑您的输入，这对人类来说很容易。

但是，如果您确实执行词法分析，则会遇到以下**问题**

*   您不能再使用通用解析器`String`了 - 例如，使用库函数解析数字`parseFloat :: Parsec String s Float`（对字符串输入流进行操作），您必须执行类似的操作`takeNextToken :: TokenParser String`，并`execute`在`parseFloat`其上使用解析器，检查解析结果（通常`Either ErrorMessage a`）。这写起来很乱，并且限制了可组合性。

*   您已调整所有错误消息。如果您的标记解析器在第 20 个标记处失败，那么输入字符串在哪里？您必须手动将错误位置映射回输入字符串，这很乏味（在 Parsec 中，这意味着调整所有`SourcePos`值）。

*   错误报告通常更糟糕。`string "hello" *> space *> float`在错误的输入上运行like`"hello4"`会准确地告诉您在 之后缺少预期的空格`hello`，而词法分析器只会声称找到了`"invalid token"`.

*   许多人们认为是*原子单元*并被词法分析器分开的东西实际上对于词法分析器来说“太难”了。以字符串文字为例——突然不再`"hello world"`是两个标记`"hello`了`world"`（当然，如果引号没有被转义，比如*）*`\"` ——虽然这对于解析器来说是很自然的，但对于词法分析器来说，这意味着复杂的规则和特殊情况。

*   您也不能在令牌上重复使用解析器。如果您定义如何解析 a 中的双精度`String`，则将其导出，世界其他地方都可以使用它；他们不能先运行您的（专业）标记器。

*   你被它困住了。当您开发要解析的语言时，使用词法分析器可能会导致您做出早期决策，修复您以后可能想要更改的内容。例如，假设您定义了一种包含某些`Float`标记的语言。在某些时候，您想要引入否定文字 ( `-3.4`and `- 3.4`) - 由于词法分析器将空格解释为标记分隔符，这可能是不可能的。使用仅解析器的方法，您可以保持更灵活，更轻松地更改您的语言。这并不奇怪，因为解析器是一种更复杂的工具，它天生就对*规则*进行编码。

总而言之，我建议在大多数情况下编写无词法分析器的解析器。

最后，词法分析器只是一个“简化”* 解析器 - 如果您仍然需要一个解析器，请将它们组合成一个。

* * *

[* 从计算理论我们知道，[所有正则语言也是上下文无关语言](http://en.wikipedia.org/wiki/Chomsky_hierarchy#The_hierarchy)；词法分析器通常是常规的、上下文无关的解析器，甚至是上下文敏感的（像 Parsec 这样的单子解析器可以表达上下文敏感）。]

# ios - 附加 csv 和 pdf 文件的问题 - 目标 c

> ID：15216203
> 
> 赞同：0
> 
> 时间：2013-03-05T05:02:54.890
> 
> 标签：ios, objective-c, uti

我正在使用 PDF 生成，它生成 PDF，使用 查看`QLPreviewController`，除了邮件转发之外一切正常，我有两个**.pdf**和**.csv**类型的附件。我在发送电子邮件时遇到以下问题。

*   有时发送电子邮件时没有附件。

*   当 pdf 包含图像时，pdf 大小将非常大（如果包含图像，一页 pdf 为 10 mb）。

    问题是在设备中进行测试时..，在模拟器中一切正常...，我在这里了解了一些与导出或导入 UTI 相关的问题，因为我是初学者，我觉得很难理解，我认为我必须了解一些 UTI在某处添加..任何人都可以帮我找出问题并解决，拜托。

提前致谢。

# php - 使用 PHP Curl 与命令行 curl 的区别

> ID：15216206
> 
> 赞同：2
> 
> 时间：2013-03-05T05:03:03.497
> 
> 标签：php, api, curl

我正在将 Badgeville REST API 与我的 PHP 5.3、curl 7.22 应用程序集成。

BV 的 API 文档都使用命令行 curl 调用作为示例。当我运行这些示例时，它们运行良好。

当我尝试对 PHP Curl 类做同样的事情时，我总是从 BV 服务器收到 500 错误。

我尝试使用 Chrome 中的 Advanced Rest Client 扩展来实现同义功能。

PHP 卷曲示例：

```
$ch = curl_init('http://sandbox.v2.badgeville.com/api/berlin/[private_api_key]/users.json');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3);

if($this->getRequestType() == 'POST')
{
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, 
        array(
            'user[name]'    => 'Generic+Username',
            'user[email]'   => 'johndoe%40domainname.com'
        );
    );
}

$response   = curl_exec($ch); 
```

休息客户端示例：

> 网址：http://sandbox.v2.badgeville.com/api/berlin/[private_api_key]/users.json
> 
> POST 无标头有效负载：
> 
> 用户[名称]=通用+用户名&用户[电子邮件]=johndoe%40domainname.com

我已经手动创建了命令行 curl 调用并使用 运行它`shell_exec()`，但我真的不想这样做。

在我的研究中，我发现了一个 Drupal[模块](http://drupalcode.org/project/badgeville_gamification.git/blob/2f5c27ba3f05651b55d0e8f54d117f441033bc66:/includes/badgeville.php)，所有的 API 调用都是通过`fsockopen()`调用完成的。

有没有办法使用 PHP Curl 类成功地进行 Badgeville 调用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T19:20:48.860

事实证明，当 curl 请求进入并设置了标头时，Badgeville 会出现 500 错误。

错误返回代码：

```
$ch = curl_init('http://sandbox.v2.badgeville.com/api/berlin/[private_api_key]/users.json');
curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3);

if($this->getRequestType() == 'POST')
{
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, 
        array(
            'user[name]'    => 'Generic+Username',
            'user[email]'   => 'johndoe%40domainname.com'
        );
    );
}

$response   = curl_exec($ch); 
```

正常运行的代码：

```
$ch = curl_init('http://sandbox.v2.badgeville.com/api/berlin/[private_api_key]/users.json');
//curl_setopt($ch, CURLOPT_HTTPHEADER, $headers);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 3);

if($this->getRequestType() == 'POST')
{
    curl_setopt($ch, CURLOPT_POST, true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, 
        array(
            'user[name]'    => 'Generic+Username',
            'user[email]'   => 'johndoe%40domainname.com'
        );
    );
}

$response   = curl_exec($ch); 
```

SMH

# java - 使用回调访问父变量

> ID：15216209
> 
> 赞同：1
> 
> 时间：2013-03-05T05:03:26.913
> 
> 标签：java

我正在使用 facebook sdk 并尝试修改父函数中的变量（至少我会这么称呼它）。

如何修改变量“actor”（标记）？

```
public void getUserFeed(int limit) {
    String q = ""; // query taken out
     Bundle params = new Bundle();
     params.putString("q", q);
     Session session = Session.getActiveSession();
     Request request = new Request(session,
         "/fql",                         
         params,                         
         HttpMethod.GET,   
         new Request.Callback(){    
            public void onCompleted(Response response) {
                 GraphObject graphObject = response.getGraphObject();
                 if (graphObject != null) {
                     JSONObject jsonObject = graphObject.getInnerJSONObject();
                     try {
                      JSONArray array = jsonObject.getJSONArray("data");
                      for (int i = 0; i < array.length(); i++) {
                         String q = "" // query taken out
                         Bundle params = new Bundle();
                         params.putString("q", q);
                         String actor = ""; // Trying to access this variable *******
                         Session session = Session.getActiveSession();
                         Request request2 = new Request(session,
                             "/fql",                         
                             params,                         
                             HttpMethod.GET,   
                             new Request.Callback(){    
                                public void onCompleted(Response response) {
                                    GraphObject graphObject = response.getGraphObject();
                                     //String s = textViewResults.getText().toString();
                                     if (graphObject != null) {
                                         JSONObject jsonObject = graphObject.getInnerJSONObject();
                                         try {
                                          JSONArray array = jsonObject.getJSONArray("data");
                                          for (int i = 0; i < array.length(); i++) {
                                              JSONObject object = (JSONObject) array.get(i);
                                              actor = object.getString("name"); // Trying to access "actor" here *******
                                          }
                                         } catch (JSONException e) {
                                             e.printStackTrace();
                                         }
                                     }
                                }
                            });
                        }
                    }
                }
            }
        }
    );
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:00:28.587

您只能访问嵌套内部类中的**最终变量。**诀窍是对对象的引用可能是最终的，但可以修改对象的状态。

你可以做类似的事情，

```
AtomicReference actorRef = new AtomicReference("");
....
     public void onCompleted(Response response) {
          ....
          actorRef.set(object.getString("name")); 
```

这解决了你问的问题。但是，可能更好的方法是不使用 Request.Callback，而是在不使用 Callback 的情况下创建 Request，然后调用

```
request.executeAndWait() 
```

executeAndWait() 将返回一个 Response 对象，您可以使用它来填充 actor。

# android - 调用 startActivityForResult( - , - ) 后，程序控制如何回到 onActivityResult ( - , - , - )

> ID：15216212
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:03:38.630
> 
> 标签：android

我很困惑，因为 2nd_activity 中没有返回类型可以让我回到 1st_activity onActivityResult() 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:10:09.363

您可以使用以下方法在启动的活动中设置结果`startActivityForResult`：

```
Bundle bundle = new Bundle();
bundle.putString(key, value);

Intent intent = new Intent();
intent.putExtras(bundle);
setResult(RESULT_OK, intent);

finish(); 
```

然后在活动的 onActivityResult 函数中读回这个结果：

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == YOUR_REQ_CODE) {
        if (resultCode == RESULT_OK) {
        }
    }
} 
```

# python - south：如何在为应用程序创建迁移时忽略更改的模型

> ID：15216215
> 
> 赞同：1
> 
> 时间：2013-03-05T05:03:43.587
> 
> 标签：python, django, django-south

我在一个应用程序中有两个更改的模型，但是我想只为一个模型创建迁移而忽略另一个模型，这是否可以使用

```
./manage.py schemamigration app --auto 
```

命令？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T12:02:44.400

有很多方法可以创建迁移。但我只会定义两种方式。

```
 //migrate the changes of all models of the app
 ./manage.py schemamigration app --auto

 //migrate only the changes of the given model or 1 model
 python manage.py schemamigration app_name extend_modelname --auto 
```

# sql - SQL对关系表的依赖

> ID：15216216
> 
> 赞同：1
> 
> 时间：2013-03-05T05:03:50.497
> 
> 标签：sql, vb.net, dependencies

我有两个相关的表（tbVehicles 和 tbVehiclesDoc） 我正在运行下面的 sql 依赖项，但它运行了很多次并且我的程序冻结了。请协助。

我希望程序在其他用户修改这些表时更新它们。我的代码：

公共子 getdata()

```
 Try
        If tbdataset.Tables.Contains("tbVehicles") Then

            If tbdataset.Tables("tbVehiclesDoc") IsNot Nothing Then
                For f As Integer = tbdataset.Tables("tbVehiclesDoc").ChildRelations.Count - 1 To 0 Step -1
                    tbdataset.Tables("tbVehiclesDoc").ChildRelations(f).ChildTable.Constraints.Remove(tbdataset.Tables("tbVehiclesDoc").ChildRelations(f).RelationName)
                    tbdataset.Tables("tbVehiclesDoc").ChildRelations.RemoveAt(f)
                Next
                tbdataset.Tables("tbVehiclesDoc").ChildRelations.Clear()
                tbdataset.Tables("tbVehiclesDoc").ParentRelations.Clear()
                tbdataset.Tables("tbVehiclesDoc").Constraints.Clear()
                tbdataset.Tables.Remove("tbVehiclesDoc")
            End If
            tbdataset.Tables.Remove("tbVehicles")
            tbdataset.EnforceConstraints = True
        End If
        gridVehicles.DataSource = Nothing
    Catch ex As Exception
        MsgBox(ex.ToString)
        '   Exit Sub
    End Try
    command.Notification = Nothing
    Dim dependency As New SqlDependency(command)
    AddHandler dependency.OnChange, AddressOf dependency_OnChange

    Dim adapter As New SqlDataAdapter(command)
    adapter.Fill(tbdataset, "tbVehicles")
    '----
End Sub

Private Sub toupdate()
    If CanRequestNotifications() Then
        If connection Is Nothing Then
            connection = New SqlConnection(GetConnectionString())
            connection.Open()
        End If
        If connection.State = ConnectionState.Closed Then
            connection.Open()
        End If
        If command Is Nothing Then
            command = New SqlCommand(GETSQL(), connection)
        End If

    End If
    getdata()
End Sub

Private Function GETSQL() As String
    Return "Select Rtrim(VehcID) as VehcID,RTrim(VehcModel), Rtrim(VehcRegNo) as VehcRegNo, Rtrim(VehcFourWheel), Rtrim(VehcCondition), Rtrim(VehcLastKM),Rtrim(VehcBranch), Rtrim(VehcDepartment), Rtrim(VehcDriver), Rtrim(VehcRemarks), VehcPic from dbo.tbVehicles"
End Function

Private Sub dependency_OnChange(ByVal sender As Object, ByVal e As SqlNotificationEventArgs)

    ' This event will occur on a thread pool thread.
    ' It is illegal to update the UI from a worker thread
    ' The following code checks to see if it is safe
    ' update the UI.
    Dim i As ISynchronizeInvoke = CType(Me, ISynchronizeInvoke)

    ' If InvokeRequired returns True, the code
    ' is executing on a worker thread.
    If i.InvokeRequired Then
        ' Create a delegate to perform the thread switch
        Dim tempDelegate As New OnChangeEventHandler( _
            AddressOf dependency_OnChange)

        Dim args() As Object = {sender, e}

        ' Marshal the data from the worker thread
        ' to the UI thread.
        i.BeginInvoke(tempDelegate, args)

        Return
    End If

    ' Remove the handler since it's only good
    ' for a single notification
    Dim dependency As SqlDependency = _
        CType(sender, SqlDependency)

    RemoveHandler dependency.OnChange, _
       AddressOf dependency_OnChange

    ' Reload the dataset that's bound to the grid.
    getdata()
End Sub 
```

# sql - Concatenate in sql server query

> ID：15216220
> 
> 赞同：3
> 
> 时间：2013-03-05T05:04:03.213
> 
> 标签：sql, sql-server-2008

I try to concatenate id and date to populate in dropdown.

```
select VisitID as Value,  Convert(nvarchar(50),VisitID)+' - '+Convert(nvarchar(50),VisitDate) as Text 
from Visit 
```

above query work for me to concatenate but the result is in the form of '21 - Feb 13 2013 12:00AM'

i want the result should be in form of '21 - 02/13/2012'

what I need to do?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:20:11.063

使用[CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)并为日期和时间样式提供第三个参数。

尝试这个：

```
select VisitID as Value, Convert(nvarchar(50),VisitID)+' - '+Convert(nvarchar(50),VisitDate, 101) as Text 
from Visit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T05:21:49.500

请试试这个：

```
SELECT 
 VisitID AS Value, 
 CONVERT(VARCHAR, VisitID, 20) + '-' + ISNULL(CONVERT(VARCHAR, VisitDate, 20), '') AS Text 
FROM Visit 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:15:50.407

```
SELECT
visitid [Value]
,(CAST(VisitID AS VARCHAR) + '-' _ CAST(VisitDate AS VARCHAR)) [Text]
FROM Visit 
```

# c - how to read last n lines from a file in C

> ID：15216223
> 
> 赞同：6
> 
> 时间：2013-03-05T05:04:16.183
> 
> 标签：c, algorithm, data-structures

Its a microsoft interview question.

> Read last n lines of file using C (precisely)

Well there could be so many ways to achieve this , few of them could be :

> -> Simplest of all, in first pass , count the number of lines in the file and in second pass display the last n lines.
> 
> -> Or may be maintain a doubly linked-list for every line and display the last n lines by back traversing the linkedlist till nth last node.
> 
> -> Implement something of sort tail -n fname
> 
> -> In order to optimize it more we can have double pointer with length as n and every line stored dynamically in a round robin fashion till we reach the end of file.

for example if there are 10 lines in file and want to read last 3 lines. then we could create a array of buffer as buf[3][] and at run time would keep on mallocing and freeing the buffer in circular way till we reach the last line and keep a counter to know the current index of array.

Can anyone please help me with more optimized solution or atleast guide me if any of the above approaches can help me get the correct answer or any other popular approach/method for such kind of questions.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T05:07:30.013

您可以使用队列并存储在此队列中看到的最后 n 行。当您看到 eof 时，只需打印队列。

另一种方法是从文件末尾到开头读取一个 1024 字节的块。当您找到`n` `\n`字符并打印出最后几行时停止`n`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T06:03:34.027

您可以有两个最初指向文件开头的文件指针。

继续递增第一个指针，直到找到'\n'字符也存储文件指针的实例，当它找到'\n'。

一旦找到第 (n+1) 个“\n”，将我们之前保存的文件指针的第一个存储实例分配给第二个文件指针。继续这样做直到 EOF。

因此，当第一个文件指针位于 EOF 上时，第二个将位于 n '\n' 后面。然后将第二个文件指针中的所有字符打印到 EOF。

所以这是一个可以单次打印文件中最后 n 行的解决方案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T14:47:01.197

如何使用内存映射文件并向后扫描文件？如果行恰好比您的缓冲区空间长，这消除了每次更新缓冲区窗口的繁重工作。然后，当您找到 a 时`\n`，将该位置推入堆栈。这适用于`O(L)`其中 L 是要输出的字符数。所以没有什么比这更好的了不是吗？

# amazon-s3 - Unable to access contents from cross bucket (CORS ENABLED)

> ID：15216225
> 
> 赞同：2
> 
> 时间：2013-03-05T05:04:26.457
> 
> 标签：amazon-s3, cors

I have hosted a html5 video generated by Adobe captivate at Amazon S3\. When I access using browser its working fine.

Working url : [http://lmtestforhtmlfive.s3.amazonaws.com/html5version/test/Hello%20World/story_html5.html](http://lmtestforhtmlfive.s3.amazonaws.com/html5version/test/Hello%20World/story_html5.html)

But when I use the above working video in IFRAME at another html page, its not working.

Error : "Unsafe JavaScript attempt to access frame with URL [http://temptesttobedelete.s3.amazonaws.com/html5test.html](http://temptesttobedelete.s3.amazonaws.com/html5test.html) from frame with URL [http://lmtestforhtmlfive.s3.amazonaws.com/html5version/test/Hello%20World/story_html5.html](http://lmtestforhtmlfive.s3.amazonaws.com/html5version/test/Hello%20World/story_html5.html). Domains, protocols and ports must match."

Not working URL : [http://temptesttobedelete.s3.amazonaws.com/html5test.html](http://temptesttobedelete.s3.amazonaws.com/html5test.html)

After few research I got need to enable CORS on S3 bucket, added below CORS configuration on lmtestforhtmlfive bucket.

```
<CORSRule>
<AllowedOrigin>*</AllowedOrigin>
<AllowedMethod>GET</AllowedMethod>
<AllowedHeader>*</AllowedHeader>
<MaxAgeSeconds>3000</MaxAgeSeconds>
</CORSRule> 
```

But still I am not able to access the html5 video in iframe.

Please suggest me how to access html5 videos in IFRAME.

Thanks, Laxmilal Menaria

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:19:26.003

您的问题是`storyline_compiled.js`文件中的代码正在尝试访问它所加载的 IFRAME 的父页面的 DOM，尽管它是从不同的域加载的，特别是使用以下行：

```
if(self!=top){var meta=$('<meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>');top.document.getElementsByTagName("head")[0].appendChild(meta.get(0))} 
```

更具体地说，有问题的 JS 调用是：

```
top.document.getElementsByTagName 
```

这个问题是由于从不同域加载的 JS 试图修改它嵌入的页面，违反了大多数浏览器的 XSS 保护特性。

您有一个选择是从 JS 文件本身中删除该行代码，然后只需将它尝试创建的标记添加到嵌入 IFRAME 的页面的头部部分。即只需将以下内容添加到您的`html5test.html`文件中：

```
<meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/> 
```

# javascript - Simple Kendo UI remote DataSource returns empty

> ID：15216226
> 
> 赞同：0
> 
> 时间：2013-03-05T05:04:31.380
> 
> 标签：javascript, json, kendo-ui

Here is a simple example I'm trying to build as an exercise and my DataSource object returns with no data.

```
var data = new kendo.data.DataSource({
            transport: {
                read: {
                    url: "data.json",
                    dataType: "json"
                }
            }
        });

        console.dir( data ); 
```

data.json

```
[
    {
        "text": "Brand One"
    },
    {
        "text": "Brand Two"
    },
    {
        "text": "Brand Three"
    },
    {
        "text": "Brand Four"
    }
] 
```

Any ideas?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T05:58:21.650

您的代码有两个问题

1.  首先你需要调用**data.read()** - 所以请求被执行
2.  由于上述操作是异步操作，因此如果您在使用**data.read()后立即调用它，则调用****data.data()**不会返回任何内容。要等到数据被检索到，您需要使用[requestEnd](http://docs.kendoui.com/api/framework/datasource#requestend)事件。

 *** * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T05:44:39.387

I can load load array to datasource and returns object, see

```
var data_input= [
    {
        "text": "Brand One"
    },
    {
        "text": "Brand Two"
    },
    {
        "text": "Brand Three"
    },
    {
        "text": "Brand Four"
    }
];

var data = new kendo.data.DataSource({
            transport: {
                read: {
                    data: data_input,
                    dataType: "json"
                }
            }
        });

console.log(data) 
```**

# html - How to increase the height of a div and warp the content in it vertically

> ID：15216232
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:05:05.653
> 
> 标签：html, css

Normally the div container height increases vertically downwards has the content in it increases. Is there a way to reverse that i.e. increase the height upwards by letting the content start at the bottom and warp upwards?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:31:29.683

您可以通过定位容器来实现这一点。

**HTML**

```
<div>asdfasdfadsf safsadfsd asdfsaasdfasd asdfasd asdf</div> 
```

* * *

**CSS**

```
div{
     position:absolute;
     bottom:15px;
} 
```

**[工作小提琴](http://jsbin.com/uzijed/1/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:33:11.867

默认情况下，div从顶部开始，其内容向下增加其高度，因此您必须将其位置设置为底部，然后它不会向下增加其大小

```
div {
    position:absolute;
    bottom:30px;

} 
```

这是我为你做的[小提琴](http://bit.ly/ZjSkX7)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:10:41.010

您需要为此使用 Javascript。这是一个使用 JQuery[的示例。](https://stackoverflow.com/questions/741122/ajax-chat-auto-scroll-window)

根据您期望的行为，您可能需要更改它。请提供有关用户尝试滚动时您期望发生的情况的更多信息。此外，如何/何时/何处添加或删除内容？

# php - 从 PHP 执行 scanimage 命令

> ID：15216237
> 
> 赞同：1
> 
> 时间：2013-03-05T05:05:33.337
> 
> 标签：php, ubuntu

我是 PHP 新手，我正在尝试执行 shell 命令以在我的 Ubuntu 12.10 机器上启动命令行扫描：

我的 php 文件中有以下代码（在提交点击处理程序中）：

```
shell_exec('scanimage --format=pdf > scan.pdf') 
```

这甚至可能吗？我已经能够通过这个 API 执行其他终端命令。但是在这种情况下，什么也没有发生。我可以在终端窗口中运行上述命令

我正在尝试对表单提交进行扫描

```
<form method="post" action="printApp.php">
    <input type="submit" name="scan" value="Start New Scan" />

</form>

  <?
     if(isset($_POST["scan"])){
        shell_exec('scanimage --format=pdf > scan.pdf')
     }
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:08:30.267

创建一个名为的新 php 文件`scanimage.php`并将其放入

```
<?php
shell_exec('scanimage --format=pdf > scan.pdf');
?> 
```

在里面。`php scanimage.php`然后在与文件相同的目录中输入 bash 。

更新：在聊天之后，Apache 似乎没有访问 /dev 中某处的扫描仪所需的权限。

# android-activity - Activity lifecycle and rotate issue?

> ID：15216238
> 
> 赞同：0
> 
> 时间：2013-03-05T05:05:34.740
> 
> 标签：android-activity, lifecycle

I'm learning about activity lifecycle. When i rotate the phone (from potrait to landscape or otherwise) i can see the activity change from resume -> pause -> stop -> create.

My question is why doen't change from resume -> pause -> stop -> restart -> start ? Any one help me to understand? pls!

The log:

```
D:\PROJECTS\AndroidTraining>adb logcat System.out:I *:S
--------- beginning of /dev/log/system
--------- beginning of /dev/log/main
I/System.out(21074): -------------------- ON CREATE ------------------
I/System.out(21074): -------------------- ON START ------------------
I/System.out(21074): -------------------- ON RESUME ------------------
I/System.out(21074): -------------------- ON PAUSE ------------------
I/System.out(21074): -------------------- ON STOP ------------------
I/System.out(21074): -------------------- ON CREATE ------------------
I/System.out(21074): -------------------- ON START ------------------
I/System.out(21074): -------------------- ON RESUME ------------------ 
```

And my code here:

```
protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        System.out.println("-------------------- ON CREATE ------------------");
        setContentView(R.layout.activity_main);
    }

    protected void onSaveInstanceState(Bundle savedInstanceState){
        super.onSaveInstanceState(savedInstanceState);
    }

    protected void onStart(){
        super.onStart();
        System.out.println("-------------------- ON START ------------------");
    }

    protected void onResume(){
        super.onResume();
        System.out.println("-------------------- ON RESUME ------------------");
    }

    protected void onPause(){
        super.onPause();
        System.out.println("-------------------- ON PAUSE ------------------");
    }

    protected void onStop(){
        super.onStop();
        System.out.println("-------------------- ON STOP ------------------");
    }

    protected void onRestart(){
        super.onRestart();
        System.out.println("-------------------- ON RESTART ------------------");
    }

    protected void onDetroy(){
        super.onStop();
        System.out.println("-------------------- ON DETROY ------------------");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T07:01:46.277

检查你的代码伙伴...在

```
onDestroy() 
```

你调用的方法

```
super.onStop(); 
```

这就是为什么你没有进入`on Destroy`你的`log`. 放

```
super.onDestroy(); 
```

inside`onDestroy()`方法然后你很容易理解活动的生命周期——关于方向的改变。

# c# - Is it possible to use TextRenderingHint to get anti-aliasing on a RichTextBox?

> ID：15216239
> 
> 赞同：3
> 
> 时间：2013-03-05T05:05:37.360
> 
> 标签：c#, winforms, antialiasing

I've been experimenting with enabling anti-aliasing of text in various controls in a Windows Forms Application.

I did a bit of research and it seems like the solution is to create a custom control and to override `OnPaint()` to modify the `TextRenderingHint`. I have used this approach successfully on `Label` and `Button` controls, but it appears not to work for `TextBox` or `RichTextBox` controls.

Here is the code I am using to enable anti-aliasing in a custom `Label` control:

```
public partial class CustomLabel : Label
{
    private System.Drawing.Text.TextRenderingHint _hint = System.Drawing.Text.TextRenderingHint.AntiAliasGridFit;
    public System.Drawing.Text.TextRenderingHint TextRenderingHint
    {
        get { return this._hint; }
        set { this._hint = value; }
    }

    protected override void OnPaint(PaintEventArgs pe)
    {
        pe.Graphics.TextRenderingHint = TextRenderingHint;
        base.OnPaint(pe);
    }
} 
```

Using the same approach for a `TextBox` or a `RichTextBox` does not appear to work.

The application I'm creating deals primarily with text input and I would really like to use anti-aliasing for all of the displayed text, especially text being typed into a TextBox or RichTextBox or a custom control.

# python - Simple python list vs dictionary

> ID：15216240
> 
> 赞同：3
> 
> 时间：2013-03-05T05:05:43.147
> 
> 标签：python

So I am very new to python and I cant for the life of me figure out why these two statements evaluate differently,

> > > [3*x for x in range(1,11) if x > 5]

[18, 21, 24, 27, 30]

> > > {3*x for x in range(1,11) if x > 5}

set([24, 18, 27, 21, 30])

The top one makes perfect sense to me but why does the second print things in such a weird order? I know that hard brackets '[' are for lists and '{' for dictionaries.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-05T05:06:51.150

第二个不是字典而是集合。集合和字典都是*无序*的。元素不会以任何特定的有意义的顺序存储或显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T06:57:25.973

对于字典，您必须分配键、值对，例如 {key:value}

所以你的问题的答案如下，

{3*x:3*x for x in range(1,11) if x > 5}

输出如下所示，

{18:18、21:21、24:24、27:27、30:30}

# ios - UICollectionView 调用 scrollViewDidScroll：从导航堆栈中弹出时

> ID：15216245
> 
> 赞同：27
> 
> 时间：2013-03-05T05:05:59.857
> 
> 标签：ios, uiscrollview, uinavigationcontroller, crash, uicollectionview

我有一个导航控制器，它的根视图控制器的类型是`CollectionViewControllerA`. 选择一个项目后，我有一个淡出和扩展动画，然后调用将第二个类型的视图控制器`CollectionVewControllerB`推入堆栈：

```
CollectionViewControllerB *b = ... // construction of the view controller to be pushed
[UIView animateWithDuration:.3
                 animations:^{
                     self.collectionView.transform = CGAffineTransformMakeScale(1.5, 1.5);
                     self.collectionView.alpha = 0;
                 }
                 completion:^(BOOL s){
                     [self.navigationController pushViewController:b animated:NO];
                 }]; 
```

我以类似的方式弹出视图控制器

```
[UIView animateWithDuration:.3
                 animations:^{
                     self.collectionView.transform = CGAffineTransformMakeScale(.3, .3);
                     self.collectionView.alpha = 0;
                 }
                 completion:^(BOOL s){
                     [self.navigationController popViewControllerAnimated:NO];
                 }]; 
```

这里的问题是应用程序在弹出视图控制器时崩溃。原因：

```
*** -[CollectionViewControllerB scrollViewDidScroll:]: message sent to deallocated instance 
```

我知道问题是因为弹出的视图控制器被破坏了，但是为什么`scrollViewDidScroll:`首先调用呢？没有任何改变in 代码`contentOffset`，`collectionView`也没有用户交互。除非更改`transform`属性也会触发方法被调用？

`CollectionViewControllerB`实现`scrollViewDidScroll:`，因为我需要禁用垂直滚动。

同时我有一个非常非常混乱的黑客来防止崩溃，那就是在动画之前，我添加

```
self.collectionView.delegate = nil; 
```

这会阻止该方法被调用。但必须有更好的方法。

任何人都可以阐明为什么`scrollViewDidScroll:`被调用以及如何停止它？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-07-25T05:07:18.333

似乎解决问题的唯一方法是我已经完成的......在动画之前将委托设置为 nil 。

```
self.collectionView.delegate = nil; 
```

希望这对将来的其他人有所帮助。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-12-02T15:11:40.593

`self.automaticallyAdjustsScrollViewInsets = NO;`在您的视图控制器内设置。

我遇到了类似的问题，发现在离开页面时，`contentOffset`每次都会改变 20。

我发现在我的视图控制器中设置这个属性停止了这种变化，因此`scrollViewDidScroll`不再被调用。结果是视图控制器会自动调整内容插入以适应状态栏、导航栏等的变化。即使您离开。

我认为这是一个更好的解决方案，并且可以正确解释为什么调用滚动方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-15T05:02:32.087

你可以在你的控制器中试试这个。

```
[self setEdgesForExtendedLayout:UIRectEdgeNone]; 
```

希望这会对你有所帮助。

# xml - JPA - Is it possible to add a new persistable field to a class without updating the XML configuration file?

> ID：15216246
> 
> 赞同：1
> 
> 时间：2013-03-05T05:06:01.843
> 
> 标签：xml, jpa, openjpa, ddl, multiple-columns

I'm new to JPA. I wanted to know if there is any way to modify the xml of a class without actually making changes to it. That is add a new column to a table after the xml has been created?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:38:47.490

您的 xml 告诉 JPA 它应该如何将您的类映射到数据库。因此，如果您想修改您的类并将您的更改传播到数据库，您必须先更新您的 xml。

如果这种行为过于复杂，您可以依靠**注释**来加快速度。简单地说，你修改你的类，添加一个注释，你就可以玩了。

例子 ：

```
@Entity
class MyDomainObject {
    @Id
    private Integer id;
    private String someField;

    // Constructor ...

    // getters and setters ...

    // Other methods ....
} 
```

稍后假设您要添加另一个不可为空的字段。你会这样做：

```
@Entity
class MyDomainObject {
    @Id
    private Integer id;
    private String someField;

    @Column(nullable=false)
    private String anotherField;

    // Constructor ...

    // getters and setters ...

    // Other methods ....
} 
```

您刚刚修改了代码，并且没有带有外部 xml 文件的 headcache。

# iphone - Display the rendered feed in a view which is in NSData

> ID：15216247
> 
> 赞同：0
> 
> 时间：2013-03-05T05:06:13.927
> 
> 标签：iphone, ios, objective-c, facebook, nsdata

The below is the code I used to get a data of URL from a facebook page. I need to display those datas in a view. How to do it?

```
NSURL *URL = [NSURL URLWithString:@"https://www.facebook.com/104958162837/posts/10151442797857838"];
NSURLRequest* request = [NSURLRequest requestWithURL:URL];

[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse * response,
                                           NSData * data,
                                           NSError * error) {
                           if (!error){

                               NSLog(@"%@",data);

                               // I want to render this data in a view.

                           }

                       }]; 
```

I can get the proper values in the in NSData. I want to display those datas in a webview or uilabel or something to display those datas.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:22:09.303

请参阅此代码。

```
id dataObject = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:nil]; 
```

您可以将 json 字符串获取到 NSObject（如 NSDictionary、NSArray）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:12:11.057

您需要转换`NSData`为`NSString`然后将其`NSString`用于显示。

```
NSURL *URL = [NSURL URLWithString:@"https://www.facebook.com/xxxxxx/posts/xxxxxxxxxx"];
NSURLRequest* request = [NSURLRequest requestWithURL:URL];

[NSURLConnection sendAsynchronousRequest:request
                                   queue:[NSOperationQueue mainQueue]
                       completionHandler:^(NSURLResponse * response,
                                           NSData * data,
                                           NSError * error) {
                           if (!error){

                               NSLog(@"%@",data);

                               // I want to render this data in a view.
                               NSString *myString = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

                               //[lbl setText:myString];

                                /** EDIT : As you are getting HTML Response, you can display that in WebView like this **/

                               [webview loadHTMLString:myString baseURL:nil];

                           }

                       }]; 
```

# html - When is a tag considered empty?

> ID：15216248
> 
> 赞同：4
> 
> 时间：2013-03-05T05:06:16.280
> 
> 标签：html, cross-browser, w3c

[W3.org states](http://www.w3.org/TR/REC-html40/struct/text.html#edef-P):

> We discourage authors from using empty P elements.
> 
> User agents should ignore empty P elements.

**How do we define *empty*?**

Does a space character between the `<p> </p>` tags count?

What about a new-line character between `<p> </p>`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T05:12:55.813

[HTML4 规范将空元素定义为没有内容的元素。](http://www.w3.org/TR/REC-html40-971218/intro/sgmltut.html#h-3.2.1)自闭合标签明确定义了空元素，例如`<br/>`和`<img/>`。我认为期望一个开始标签紧跟一个结束标签是非常合理的，例如`<p></p>`也定义了一个空元素。是否`<p> </p>`符合“空”的条件可能取决于用户代理，但让我们看一下[规范中的内联内容模型定义：](http://www.w3.org/TR/REC-html40/sgml/dtd.html#inline)

```
<!-- %inline; covers inline or "text-level" elements -->
<!ENTITY % inline "#PCDATA | %fontstyle; | %phrase; | %special; | %formctrl;"> 
```

“空”内容是不包含以下*任何*内容的内容：

*   `#PCDATA`
*   [`%fontstyle;`](http://www.w3.org/TR/REC-html40/sgml/dtd.html#fontstyle)
*   [`%phrase;`](http://www.w3.org/TR/REC-html40/sgml/dtd.html#phrase)
*   [`%special;`](http://www.w3.org/TR/REC-html40/sgml/dtd.html#special)
*   [`%formctrl;`](http://www.w3.org/TR/REC-html40/sgml/dtd.html#formctrl)

那么空格字符是上述任何一个吗？[是的，它是](http://www.w3.org/TR/html4/intro/sgmltut.html#h-3.3.3.1) [`#PCDATA`](http://en.wikipedia.org/wiki/PCDATA)，所以我会推断这*不是*`<p> </p>`一个空元素。并且不管 HTML4 规范的劝阻，[,](http://validator.w3.org/)[和](http://validator.w3.org/)[都是完全有效的 HTML 片段](http://validator.w3.org/)。*`P`[`<p></p>``<p> </p>``<p/>`](http://validator.w3.org/)*

 ** * *

[这些元素现在被 HTML5 规范称为“void”。](http://www.w3.org/TR/html5-diff/#syntax-misc)

[@Alohci 澄清：](https://stackoverflow.com/questions/15216248/when-is-a-p-tag-considered-empty/15216323#comment21452657_15216323)

> [HTML5 中的术语“void 元素”](http://www.w3.org/TR/html-markup/syntax.html#syntax-elements)指的是那些其实例永远不会有 br 和 img 等内容的元素类型，而不是碰巧没有内容的实例。因此 P 元素的实例永远不会构成“无效元素”。

HTML5 规范没有对避免“空”或“空”`P`元素做出这样的评论：

*   [http://www.w3.org/TR/html5/grouping-content.html#the-p-element](http://www.w3.org/TR/html5/grouping-content.html#the-p-element)
*   [http://www.w3.org/TR/html-markup/p.html](http://www.w3.org/TR/html-markup/p.html)

......我真的不会太担心它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:14:12.343

从技术角度来看，空白是一回事。它占用内存并有自己的字符代码。它是一个只包含空格的字符。

也就是说，对于大多数浏览器来说，空格和换行符是一样的。从这个角度来看，带有任何一个的“p”标签都将被视为“某物”。

然而，W3C 对此的说法和特定浏览器供应商所说的通常是完全不同的事情。据我所知，大多数浏览器都尊重这一点，但有些浏览器可能仍将“p”标签视为有内容，而实际上它没有内容。

最佳实践是使用 CSS 来提供间距和中断。如果只需要换行符，请在段落上使用“br”标签。“p”标签是与语言结构“段落”一起使用的语义标签，因此不鼓励将其用作布局元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T05:15:40.577

`<p>`据我所知，一个空标签将包括`<p></p>`, `<p/>`,`<p />`和`<p> </p>`.

`<p><br /></p>`并且`<p>&nbsp;</p>`（如果你想获得真正的技术性，`<p> </p>`因为所有 Unicode HTML 空白在技术上都使用 1-4 个字节）在技术上不会是空的，但肯定不会鼓励这样使用它，如果你是，你应该看看为什么，因为它可能不是最佳选择。

`<p>`标签旨在包含一段文本。*

# c++ - calculate decimal fraction and show digits after decimal in a precise manner

> ID：15216253
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:06:49.347
> 
> 标签：c++, c, decimal, floating-point-precision

Given a fraction *(103993/33102)*, I need to find 50000 digits after the decimal point for this fraction.

Initially I used `setprecision(k)` in C++, but it gives only 17 digits after decimal point. I also tried

```
sprintf (str, "%.500000f", num) 
```

but the result is the same.

I need an algorithm that can solve this and which does not round off the digits after the decimal point i.e., it should be precise.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T05:27:57.020

解决此类问题的最佳方法是解决一个非常简单的问题，然后计算出算法。这样，您就不会感到困惑或失去自己的位置，并且无论问题如何，算法都是相同的。所以让我们来吧`4/3`。

1.  4 进入 3 一次。我们还剩 1 个。我们在`1.`它进入的时候输出 1。我们保留剩下的 1。

2.  我们将剩下的 1 乘以 10 得到 10。3（我们的分母）乘以 10 三倍。还剩1个。

3.  我们输出了，`3`因为它进入了 3 次。我们还剩下 1 个。

4.  我们进入第 2 步并根据需要重复多次。

无论分子和分母如何，只要它们是正整数，相同的算法就可以简单地工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:57:40.333

Float 或 double 不会这样做，因为它们不够精确。其他人建议使用 bignum 库。这可以做到，但还有另一种方法可以直接处理整数。

一种称为模幂的技术可以用来解决这个问题。这使您可以计算所有数字而不会遇到精度问题。

幸运的是，已经编写了如何执行此操作的答案：

[从任何基数的比率展开中获取特定数字（x/y 的第 n 位）](https://stackoverflow.com/questions/804934/getting-a-specific-digit-from-a-ratio-expansion-in-any-base-nth-digit-of-x-y)

# sharepoint-2010 - 用于查询 Search Server Express 2010 的 C# 应用程序

> ID：15216255
> 
> 赞同：1
> 
> 时间：2013-03-05T05:06:53.663
> 
> 标签：sharepoint-2010, search-server-2010

我一直在使用 Search Server Express 2010 并在 C# 中构建了一个小 Windows 应用程序来尝试查询服务器并返回一些结果。每当我尝试运行查询时，我都会收到错误“搜索请求无法连接到搜索服务”。

我的查询如下。我还尝试了 MSSQLFT 类型的查询。

```
<QueryPacket xmlns='urn:Microsoft.Search.Query'>
   <Query>
  <SupportedFormats>
     <Format revision='1'> urn:Microsoft.Search.Response.Document:Document</Format>
  </SupportedFormats>
  <Context>
     <QueryText language='en' type='FQL'>
     </QueryText>
  </Context>
  <ResultProvider>FASTSearch</ResultProvider>
  <Range>
     <Count>10</Count>
  </Range>
   </Query>
</QueryPacket> 
```

我的两次查询尝试都没有奏效，并且都出现了相同的错误，我正在寻找的任何内容都没有帮助解决方案。

我通过使搜索服务器脱机、在搜索中产生错误等故意以其他方式破坏它，它们都给了我不同的错误，所以我认为查询确实可以到达服务器！（另外我确定我的权限是正确的）

有人有想法吗？我真的可以以这种方式搜索搜索服务器的快速版本吗？

任何帮助将不胜感激。

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T22:08:47.720

好的，很简单，因为事实证明 FQL 不适用于 2010 express，现在我考虑一下很明显（我猜缺乏初步研究）。当我使用 MSSQLFT 查询类型时，我不小心离开了

```
<ResultsProvider>FastSearch</ResultsProvider> 
```

在那里排队。这导致了我得到的错误。

对我有用的查询是

```
<QueryPacket xmlns='urn:Microsoft.Search.Query'>
<Query>
<SupportedFormats>
<Format>urn:Microsoft.Search.Response</Format>
</SupportedFormats>
<Context>
<QueryText language='en' type='MSSQLFT'>
SELECT Filename, Title, FileExtension, Path from Scope()
</QueryText>
</Context>
<Range>
<Count>10</Count>
</Range>
</Query>
</QueryPacket> 
```

# c - 不使用 stdarg.h 的可变长度参数

> ID：15216260
> 
> 赞同：3
> 
> 时间：2013-03-05T05:07:31.017
> 
> 标签：c, printf

我试图通过检查堆栈来理解和实现一种处理可变长度参数函数的方法，但我不知道从哪里开始以及如何开始。我发现以下链接很有帮助，但我仍然不太明白如何在 c 中实现类似打印功能的功能。

[http://www.swig.org/Doc1.3/Varargs.html](http://www.swig.org/Doc1.3/Varargs.html)

[C ++中函数参数列表中的尾随点（...）](https://stackoverflow.com/questions/9763839/trailing-dots-within-function-argument-list-in-c)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T07:05:42.863

查看很久以前存在[`C Reference Manual by Dennis M. Ritchie`](http://cm.bell-labs.com/cm/cs/who/dmr/cman.pdf)的实现，并且：`printf()``...``<stdarg.h>`

```
printf ( fmt, args )
  char fmt [ ] ;
{
  ...
  int *ap, x, c ;
  ap = &args ; /* argument pointer */
  ...
  for ( ; ; ) {
    while ( ( c = *fmt++ ) != ´%´ ) {
      ...
      switch ( c = *fmt++) {
      /* decimal */
      case ´d ´:
        x = *ap++ ;
        if(x < 0) {
          x = -x;
          if ( x<0 ) { /* is - infinity */
            printf ( "-32768" ) ;
            continue ;
          }
          putchar ( ´-´);
        }
        printd(x);
        continue ;
      ...
      }
      ...
    }
    ...
  }
}

printd(n)
{
  int a ;
  if ( a=n/10 )
    printd(a);
  putchar ( n%10 + ´0´ ) ;
} 
```

您可以忽略函数和参数声明的旧 (AKA K&R) 语法：

```
printf ( fmt, args )
  char fmt [ ] ; 
```

甚至用更现代的替换它：

```
int printf ( char fmt[], int args ) 
```

但想法是一样的，您可以直接获得指向第一个可选参数 ( `args`) 的指针，就像在上面的代码中所做的那样`ap = &args;`，然后继续递增它以访问更多参数。

或者您可以使用最后一个非可选参数作为起点来间接执行此操作：

```
int printf ( char fmt[], ... )
{
  ...
  int *ap, x, c ;
  ap = &fmt ; /* argument pointer */
  ap++; /* ap now points to first optional argument */
  ...
} 
```

这说明了机制。

请注意，如果您这样编写代码，它将无法移植，甚至可能无法与您的编译器一起工作。

# arraylist - ANTLR 中的多个返回值

> ID：15216261
> 
> 赞同：1
> 
> 时间：2013-03-05T05:07:40.517
> 
> 标签：arraylist, return-value, antlr4, multiple-variable-return

我将 ANTLR4 与 Java 一起使用，我想存储规则在解析输入时返回的值。我使用这样的语法：

```
db : 'DB' '(' 'ID' '=' ID ',' query* ')'
{
System.out.println("creating db");
System.out.println("Number of queries -> "+$query.qs.size());
}
;

query returns [ArrayList<Query> qs] 
@init
{
    $qs = new ArrayList<Query>();
}
: 'QUERY' '(' 'ID' '=' ID ','  smth ')'
{
System.out.println("creating query with id "+$ID.text);
Query query = new Query();
query.setId($ID.text);
$qs.add(query);
}
; 
```

但发生的情况是打印的查询数（$query.qs 大小）始终为 1。发生这种情况是因为每次在输入中识别出 QUERY 元素时，它都会添加到 $qs ArrayList 中，但是对于每个其他 QUERY，都会实例化一个新的 ArrayList，并且此查询会添加到这个新的 ArrayList 中。当所有查询都被识别时，db : 规则的操作被调用，但 $query.qs ArrayList 只有最后一个查询。我通过维护存储查询的全局 ArrayLists 解决了这个问题。但是，当规则返回并且没有我自己的全局 ArrayLists 时，还有另一种方法可以使用 ANTLR 吗？

非常感谢，迪莫斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:00:39.837

好了，问题解决了。我刚刚将 ArrayList 添加到 db 规则中，如下所示：

db [ArrayList 查询]：'DB' ....

然后在查询规则：

$db::queries.add(查询)

所以，一切都很好！

无论如何，感谢您的关注！

# wordpress - 我们可以将 nginx 用于 wordpress 和 drupal 吗？

> ID：15216262
> 
> 赞同：3
> 
> 时间：2013-03-05T05:07:40.857
> 
> 标签：wordpress, drupal, configuration, nginx, debian

我有一台 debian 机器，我在其上为我的 Web 服务器工作进程安装了 nginx。但是我们只需要在默认的 nginx 配置中对 wordpress 进行一些更改即可`/etc/nginx/sites-enabled/`！

```
/etc/nginx/sites-enabled/wordpress.com
/etc/nginx/sites-enabled/drupal.com 
```

我可以知道这两个网站在单个 debian 机器下的示例 nginx 配置吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T11:30:41.847

您可以使用 nginx 运行多个站点，类似于 apache vhost。

在*/etc/nginx/sites-enabled*中，可以添加两个 vhost

## wordpress.example.com

```
server {
       listen 80;
       server_name wordpress.example.com;
       root /var/www/wordpress;
#      if ($http_host != "www.example.com") {
#                rewrite ^ http://www.example.com$request_uri permanent;
#      }
       index index.php index.html;
       location = /favicon.ico {
                log_not_found off;
                access_log off;
       }
       location = /robots.txt {
                allow all;
                log_not_found off;
                access_log off;
       }
       # Deny all attempts to access hidden files such as .htaccess, .htpasswd, .DS_Store (Mac).
       location ~ /\. {
                deny all;
                access_log off;
                log_not_found off;
       }
       location / {
                try_files $uri $uri/ /index.php?$args;
       }
       # Add trailing slash to */wp-admin requests.
       rewrite /wp-admin$ $scheme://$host$uri/ permanent;
       location ~*  \.(jpg|jpeg|png|gif|css|js|ico)$ {
                expires max;
                log_not_found off;
       }
       location ~ \.php$ {
                try_files $uri =404;
                include /etc/nginx/fastcgi_params;
                fastcgi_pass 127.0.0.1:9000;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
       }
} 
```

和

## drupal.example.com

```
server {
       listen 80;
       server_name drupal.example.com;
       root /var/www/drupal;
#      if ($http_host != "www.example.com") {
#                rewrite ^ http://www.example.com$request_uri permanent;
#      }
       index index.php index.html;
       location = /favicon.ico {
                log_not_found off;
                access_log off;
       }
       location = /robots.txt {
                allow all;
                log_not_found off;
                access_log off;
       }
       # Deny all attempts to access hidden files such as .htaccess, .htpasswd, .DS_Store (Mac).
       location ~ /\. {
                deny all;
                access_log off;
                log_not_found off;
       }
       location / {
                try_files $uri $uri/ /index.php?$args;
       }
       # Add trailing slash to */wp-admin requests.
       rewrite /wp-admin$ $scheme://$host$uri/ permanent;
       location ~*  \.(jpg|jpeg|png|gif|css|js|ico)$ {
                expires max;
                log_not_found off;
       }
       location ~ \.php$ {
                try_files $uri =404;
                include /etc/nginx/fastcgi_params;
                fastcgi_pass 127.0.0.1:9001;
                fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name;
       }
} 
```

# iphone - 动画后显示视图

> ID：15216268
> 
> 赞同：0
> 
> 时间：2013-03-05T05:08:07.217
> 
> 标签：iphone, ios, animation, uiview

我正在使用页面卷曲动画。我正在查看一个问题，当我单击按钮时，它会动画页面卷曲并显示黑屏。但是我想在页面卷曲后再次用不同的问题显示相同的视图。页面卷曲动画后如何用不同的问题显示相同的视图？

我正在使用下面的代码

```
[UIView beginAnimations:@"partialPageCurlUp" context:nil];
    [UIView setAnimationDuration:1.5];
    [UIView setAnimationsEnabled:YES];
    [UIView setAnimationDelegate:self];
    [UIView setAnimationsEnabled:YES];
    [UIView
     setAnimationTransition: UIViewAnimationTransitionCurlUp
     forView:self.view cache:YES];
    [UIView commitAnimations];

    [super viewDidLayoutSubviews]; 
```

只是想知道下一步该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:27:03.830

看到你只需要实现更多的东西

在您现有的代码中添加动画停止选择器，以便您可以获得动画结束点可以显示下一个问题

```
[UIView setAnimationDidStopSelector:@selector(animationDidStopFinished)]; 
```

`animationDidStopFinished`这将是另一个`method`您应该编写一些代码，当动画完成时将显示另一个问题。

或使用以下代码

```
 [UIView animateWithDuration:1.5 delay:.00 options:UIViewAnimationTransitionFlipFromLeft animations:^
   {
     //here you should write animation code 
   [UIView
      setAnimationTransition: UIViewAnimationTransitionCurlUp
      forView:self.view cache:YES];
   }

   completion:^ (BOOL finished) {

                if (finished) {
                         // Here You may show Next Question as animation  gets stop;
                     } 
               }]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:47:09.023

```
[UIView animateWithDuration:0.25 animations: ^{ // your animation code hear } completion:^ (BOOL finished) { if (finished) { // Your Animation Completion call back. NSLog(@"Is completed"); } } ]; 
```

试试这个方法。

# c# - C#从多个抽象类派生一个类

> ID：15216271
> 
> 赞同：1
> 
> 时间：2013-03-05T05:08:16.597
> 
> 标签：c#, oop, abstract-class

我创建了两个抽象类并尝试创建一个继承自两者的类。但我收到一条错误消息。

```
abstract class AbstractClassOne
{
    public abstract void ShowMessage();
    public abstract void DisplayName();
}

abstract class AbstractClassTwo
{
    public abstract void ShowMessage();
    public abstract void DisplayPlace();
}

class DerivedClass : AbstractClassOne, AbstractClassTwo // here under AbstractClassTwo it shows the error "cannot have multiple base classes:"
{

} 
```

那么一个类只能派生自一个抽象类吗？

如果可以从多个抽象类派生，那么如果两个类都定义相同的方法会发生什么，就像上面的情况一样（抽象类一和二都有一个方法`showmessage()`，那么哪一个将在派生类中）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T05:10:15.757

在 C# 中，不允许从多个类继承。要在这里做你想做的事，你需要使用接口。

```
abstract class AbstractClassOne
{
    public abstract void ShowMessage();
    public abstract void DisplayName();
}

Interface IClassTwo
{
    void ShowMessage();
    void DisplayPlace();
}

class DerivedClass : AbstractClassOne, IClassTwo
{

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-05T05:14:34.400

C# 不允许多重继承，但 C++ 允许。回答您关于 `ShowMessage()`具有多重继承的 C++ 中已知问题的方法的问题，称为“钻石问题”。见：[http ://en.wikipedia.org/wiki/Multiple_inheritance](http://en.wikipedia.org/wiki/Multiple_inheritance)

所以基本上你在调用它时必须兴奋地说明你正在裁判的方法，例如 `ParentA::ShowMessage()`

如果您想要一个与其他 2 种类型具有多态性的类型，那么您应该创建两个单独的接口并实现它们。如果您想重用相同的方法，则必须使用组合。

**接口示例：**

```
public interface ISomeInterface
{
    public void ShowMessage();
    public void DisplayName();
}
public class ClassOne : ISomeInterface
{
    public void ShowMessage()
    {
       //implementation
    }

    public void DisplayName()
    {
       //implementation
    }
}

public class ClassTwo : ISomeInterface
{
    public void ShowMessage()
    {
       //implementation
    }

    public void DisplayPlace()
    {
       //implementation
    }
} 
```

**使用组合的可重用显示消息方法的接口：**

```
public class ClassTwo : ISomeInterface
{
    private ISomeInterface _MyPrivateReusableComponent = new ClassOne();

    public void ShowMessage()
    {
       _MyPrivateReusableComponent.ShowMessage()
    }

    public void DisplayPlace()
    {
         _MyPrivateReusableComponent.DisplayName()
        //implementation
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T05:11:16.367

您不能从多个类（抽象或其他）继承，但在您的情况下，抽象类几乎是接口，因此您可以将它们转换为接口并从它们继承（您可以从任意数量的接口继承）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T05:21:55.463

不，抽象类是否具有所有抽象方法或只有一些抽象方法，就继承而言没有区别。您只能继承**一个**类（在 C# 中）和任意数量的接口。

# ios - 自动保存不适用于 UIManagedDocument 上的 NSUndoManager

> ID：15216273
> 
> 赞同：3
> 
> 时间：2013-03-05T05:08:45.500
> 
> 标签：ios, nsundomanager, uimanageddocument

# 解析度

`NSUndoManager`只能在孩子中`NSManagedObjectContext`使用（与 Core Data 一起使用时）。这是因为它`UIManagedDocument`可能会在任何时间点自动保存，之后`undo`将不起作用。因此，仅仅实现保存/取消功能是没有意义`NSUndoManager`的，因为子上下文会给你相同的结果。

真的有点难过，因为`NSUndoManager`它比子上下文更容易实现（对于后者，我必须调用`existingObjectWithID`将对象从父级复制到子级 - 很痛苦）。我个人认为如果`groupingLevel != 0`. 吐槽完了。

# 原始问题

我有一个表视图控制器，它使用 Core Data 将数据加载到`UIManagedDocument`. 它使用视图控制器来编辑表格中的每一行。在那个视图控制器中，我有取消和保存按钮。我正在通过我的对象`NSUndoManager`上的一个类别（如下）来实现取消功能。`NSManaged``self.list`

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.list beginEdit];
}

- (IBAction)cancel:(id)sender
{
    [self.list cancelEdit];
    [self close];
}

- (IBAction)save:(id)sender
{
    [self.list endEdit];
    [self close];
} 
```

类别 implements `beginEdit`，旨在处理 NSUndoManager 的东西`endEdit`。`cancelEdit`在下面的代码中，`useUndo`我将其设置为 NO 或 YES 以查看使用 NSUndoManager 的影响。

```
- (void)beginEdit
{
    if (useUndo)
    {
        NSUndoManager *undoManager = [[NSUndoManager alloc] init];
        self.managedObjectContext.undoManager = undoManager;
        [undoManager beginUndoGrouping];
    }
}

- (void)endEdit
{
    [self.managedObjectContext save:nil];
    if (useUndo)
    {
        NSUndoManager *undoManager = self.managedObjectContext.undoManager;
        [undoManager endUndoGrouping];
        self.managedObjectContext.undoManager = nil;
    }
}

- (void)cancelEdit
{
    if (useUndo)
    {
        NSUndoManager *undoManager = self.managedObjectContext.undoManager;
        [undoManager endUndoGrouping];
        [undoManager undo];
    }
} 
```

如果我保存一个对象并在`useUndo = NO`. 但是，`useUndo = YES`当我单击主页按钮时，它不会自动保存。我已经等了几分钟，它仍然没有自动保存。有什么办法可以强制自动保存吗？

谁能解释为什么使用 undoManager 会导致这种行为变化？

我怀疑我的处理方式错误，或者代码中有一些简单的问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-09T13:10:40.163

我不确定它是否正确，但 stackoverflow 上的其他答案提到 NSUndoManager 在上下文保存时清除撤消堆栈。这意味着使用具有自动保存功能的撤消管理器最多可以使用几秒钟（无论自动保存间隔是多少）。那里可能有联系，我正在尝试找出更多...

# svn - 具有目录用户权限的 SVN 主机

> ID：15216275
> 
> 赞同：1
> 
> 时间：2013-03-05T05:08:48.953
> 
> 标签：svn

我正在寻找一个好的 SVN 主机网站，它使我能够限制用户访问 repo 中的特定目录？我知道您可以通过自定义 SVN 安装来做到这一点，但目前无法设置我自己的 SVN 服务器。

有没有好的推荐的？我一直在做一些研究并发送电子邮件，但到目前为止没有人说是的，他们支持这一点。

谢谢你的帮助。

菲尔。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T00:03:06.513

检查[codespaces.com](http://www.codespaces.com)。他们支持细粒度的目录权限（可以通过他们的 web gui 设置）。

# php - 没有一个字段的MySQL表导出

> ID：15216277
> 
> 赞同：1
> 
> 时间：2013-03-05T05:09:12.130
> 
> 标签：php, mysql

我是 PHP 新手，我对它的语法和原理不太了解。我有这样的代码：

```
 function exportFromTransbase($table_name) {
 //$odbc_query = "SELECT * FROM " . $table_name. " WHERE ((CDS_CTM subrange(248 cast integer) = 1) AND (CDS_LNG_ID = 16))";
 $odbc_query = "SELECT * FROM " . $table_name. "";

 $data = odbc_exec($this->odbc_id, $odbc_query);
 odbc_longreadlen($data, 10485760);
 $oufile=fopen($table_name.".sql", 'w') or die("error writing file");

    $q1='INSERT INTO `' . substr($table_name, 4) . '` VALUES';
    fwrite($oufile, $q1);

 while($row = odbc_fetch_array($data))
 {

 foreach($row as $key => $value) {
 $keys[] = "`" . $key . "`";
 if ($value == ""){
    $value = 'NULL';
 $values[] = "" . mysql_real_escape_string($value) . "";
 }
 else{
    $values[] = "'" . mysql_real_escape_string($value) . "'";
 }
 //echo "\n \n ololo  ".$value;

 }

 $mysql_query = "\n (".implode(",", $values).")," ;
fwrite($oufile, $mysql_query);
 //mysql_query($mysql_query);
 set_time_limit(0);
 unset($keys);
 unset($values);
 unset($row);
 }
 $stat = fstat($oufile);
ftruncate($oufile, $stat['size']-1);
fseek($oufile, 0, SEEK_END);
  fwrite($oufile, ";".$r);
//} while ($r < 5 );
fclose($oufile);
    if ($mysql_query){
        print "Ýêñïîðò äàííûõ èç òàáëèöû " . $table_name . " çàâåðøåí!";
        //strtolower(substr($table_name, 4))
    }
 } 
```

*我需要自定义的内容和位置，以便导出除一个以外的所有表字段，例如称为大小，我必须在 db 中插入此字段是否为空...。*

另外，如果很容易，如何将我的 sql 查询拆分为 5000 行？所以插入（5000行）然后再插入5000....

但首先我需要导出所有字段，除了一个......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:57:41.090

据我所知，这是不可能的。

您可以简单地使用：

```
SELECT field1, field2, field3, field4 FROM table 
```

请参阅[在 MySQL 中选择除一列之外的所有列？](https://stackoverflow.com/questions/9122/select-all-columns-except-one-in-mysql)

如果你有更多的字段，`table`那么你只能使用`*`。

当时`insert`你可以做一个`condition`你不想要`ignores`的。 `field``new table`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-05T05:22:41.113

你能用吗

```
"select * from {table} where {sth} != {condition}" 
```

然后您可以获取除一个之外的所有数据。一个是根据你的情况摘录的。同时，如果要插入5000行，可以一次读取5000行并插入。

# c++ - 全局变量减慢代码

> ID：15216279
> 
> 赞同：13
> 
> 时间：2013-03-05T05:09:18.230
> 
> 标签：c++, performance, global-variables

我在搞乱我能写的最糟糕的代码，（基本上是试图破坏东西），我注意到这段代码：

```
for(int i = 0; i < N; ++i)
    tan(tan(tan(tan(tan(tan(tan(tan(x++))))))));
end
std::cout << x; 
```

其中 N 是一个全局变量，然后运行速度明显变慢：

```
int N = 10000;
for(int i = 0; i < N; ++i)
    tan(tan(tan(tan(tan(tan(tan(tan(x++))))))));
end
std::cout << x; 
```

全局变量会导致运行速度变慢怎么办？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T05:46:52.493

**tl;dr**：本地版本将 N 保存在寄存器中，而全局版本则没有。用 const 声明常量，无论你如何声明它都会更快。

* * *

这是我使用的示例代码：

```
#include <iostream>
#include <math.h>
void first(){
  int x=1;
  int N = 10000;
  for(int i = 0; i < N; ++i)
    tan(tan(tan(tan(tan(tan(tan(tan(x++))))))));
  std::cout << x;
}
int N=10000;
void second(){
  int x=1;
  for(int i = 0; i < N; ++i)
    tan(tan(tan(tan(tan(tan(tan(tan(x++))))))));
  std::cout << x;
}
int main(){
  first();
  second();
} 
```

（命名`test.cpp`）。

要查看生成的汇编代码，我运行了`g++ -S test.cpp`.

我得到了一个巨大的文件，但通过一些智能搜索（我搜索了 tan），我找到了我想要的：

从`first`功能：

```
Ltmp2:
    movl    $1, -4(%rbp)
    movl    $10000, -8(%rbp) ; N is here !!!
    movl    $0, -12(%rbp)    ;initial value of i is here
    jmp LBB1_2       ;goto the 'for' code logic
LBB1_1:             ;the loop is this segment
    movl    -4(%rbp), %eax
    cvtsi2sd    %eax, %xmm0
    movl    -4(%rbp), %eax
    addl    $1, %eax
    movl    %eax, -4(%rbp)
    callq   _tan
    callq   _tan
    callq   _tan
    callq   _tan
    callq   _tan        
    callq   _tan
    callq   _tan
    movl    -12(%rbp), %eax
    addl    $1, %eax
    movl    %eax, -12(%rbp) 
LBB1_2:
    movl    -12(%rbp), %eax ;value of n kept in register 
    movl    -8(%rbp), %ecx  
    cmpl    %ecx, %eax  ;comparing N and i here
    jl  LBB1_1      ;if less, then go into loop code
    movl    -4(%rbp), %eax 
```

第二个功能：

```
Ltmp13:
    movl    $1, -4(%rbp)    ;i
    movl    $0, -8(%rbp) 
    jmp LBB5_2
LBB5_1:             ;loop is here
    movl    -4(%rbp), %eax
    cvtsi2sd    %eax, %xmm0
    movl    -4(%rbp), %eax
    addl    $1, %eax
    movl    %eax, -4(%rbp)
    callq   _tan
    callq   _tan
    callq   _tan
    callq   _tan
    callq   _tan
    callq   _tan
    callq   _tan
    movl    -8(%rbp), %eax
    addl    $1, %eax
    movl    %eax, -8(%rbp)
LBB5_2:
    movl    _N(%rip), %eax  ;loading N from globals at every iteration, instead of keeping it in a register
    movl    -8(%rbp), %ecx 
```

所以从汇编代码中你可以看到（或看不到），在本地版本中，N 在整个计算过程中保存在寄存器中，而在全局版本中，N 在每次迭代时从全局重新读取。

我想发生这种情况的主要原因是线程之类的事情，编译器不能确定 N 没有被修改。

如果`const`在 N ( `const int N=10000`) 的声明中添加 a ，它会比本地版本更快：

```
 movl    -8(%rbp), %eax
    addl    $1, %eax
    movl    %eax, -8(%rbp)
LBB5_2:
    movl    -8(%rbp), %eax
    cmpl    $9999, %eax ;9999 used instead of 10000 for some reason I do not know
    jle LBB5_1 
```

N 被一个常数代替。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T06:35:11.837

我对@rtpg的问题和答案做了一个小实验，

**试验这个问题**

在文件 main1.h 中，全局 N 变量

```
int N = 10000; 
```

然后在main1.c文件中，1000次计算的情况：

```
#include <stdio.h>
#include "sys/time.h"
#include "math.h"
#include "main1.h"

extern int N;

int main(){

        int k = 0;
        timeval static_start, static_stop;
        int x = 0;

        int y = 0;
        timeval start, stop;
        int M = 10000;

        while(k <= 1000){

                gettimeofday(&static_start, NULL);
                for (int i=0; i<N; ++i){
                        tan(tan(tan(tan(tan(tan(tan(tan(x++))))))));
                }
                gettimeofday(&static_stop, NULL);

                gettimeofday(&start, NULL);
                for (int j=0; j<M; ++j){
                        tan(tan(tan(tan(tan(tan(tan(tan(y++))))))));
                }
                gettimeofday(&stop, NULL);

                int first_interval = static_stop.tv_usec - static_start.tv_usec;
                int last_interval = stop.tv_usec - start.tv_usec;

                if(first_interval >=0 && last_interval >= 0){
                        printf("%d, %d\n", first_interval, last_interval);
                }

                k++;
        }

        return 0;
} 
```

结果显示在以下直方图中（频率/微秒）：

![两种方法中比较输出时间的直方图](../Images/78fdf0e66c9d4b027404cb70bee6f14c.png) 红色框是基于非全局变量的循环结束（N），透明的绿色是基于 M 结束的循环（非全局）。

有证据怀疑外部全局变量有点慢。

**试验答案** @rtpg 的理由很强烈。从这个意义上说，全局变量可能会更慢。

[在不同优化级别访问 gcc/g++ 中的局部变量和全局变量的速度](https://stackoverflow.com/questions/7241035/speed-of-accessing-local-vs-global-variables-in-gcc-g-at-different-optimizati)

为了测试这个前提，我使用一个寄存器全局变量来测试性能。这是我的带有全局变量的 main1.h

```
int N asm ("myN") = 10000; 
```

新结果直方图：

![带有寄存器全局变量的结果](../Images/cf11963f799c6e1b88e3cfbd120b1fcc.png)

**结论**当全局变量在寄存器中时，性能会有所提高。不存在“全局”或“局部”变量问题。性能取决于对变量的访问。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-03-05T05:15:26.977

无法优化全局版本以将其放入寄存器中。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-03-05T05:39:04.003

我假设优化器`tan`在编译上述代码时不知道函数的内容。

即，什么`tan`是未知的——它所知道的就是把东西塞到堆栈上，跳转到某个地址，然后清理堆栈。

在全局变量的情况下，编译器不知道`tan`对`N`. `N`在本地情况下，没有`tan`可以合法获取的“松散”指针或引用：因此编译器知道`N`将采用什么值。

编译器可以使循环变平——从完全（一个 10000 行的平面块）、部分（100 个长度的循环，每个循环有 100 行）或根本不（长度为 10000 个循环，每个循环 1 行）或介于两者之间的任何地方.

当您的变量是局部变量时，编译器知道得更多，因为当它们是全局变量时，它对它们如何更改或谁读取它们知之甚少。所以可以做出的假设很少。

有趣的是，这也是人类很难对全局变量进行推理的原因。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T10:00:23.303

我认为这可能是一个原因：由于全局变量存储在堆内存中，因此您的代码每次都需要访问堆内存。可能是由于上述原因代码运行缓慢。

# vb.net - 我正在尝试将 excel 文件导出为 pdf，但对齐会消失？

> ID：15216280
> 
> 赞同：1
> 
> 时间：2013-03-05T05:09:18.353
> 
> 标签：vb.net, excel, formatting, automation, export-to-pdf

导出工作表时，对齐会消失。一半数据在下一行。我如何以编程方式对齐工作表并将其转换为 pdf 而不会发生对齐。

我需要适合页面的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T09:59:29.240

我遇到了同样的问题，所以我做了什么：

1.  对于excel文件表，我设置了以下

    ```
     xlWorkbook = xlApps.Workbooks.Add(missing);
            xlWorkSheet = (Excel.Worksheet)xlWorkbook.Worksheets.get_Item(1);
            xlApps.ActiveWindow.View = Excel.XlWindowView.xlPageLayoutView; //pagelayout view
            xlWorkSheet.PageSetup.PaperSize = Excel.XlPaperSize.xlPaperA4; //set paper to A4
            xlWorkSheet.PageSetup.Orientation = Excel.XlPageOrientation.xlPortrait; //set to portrait

            //margins 'Narrow'   
            xlWorkSheet.PageSetup.LeftMargin = 0.65; //55
            xlWorkSheet.PageSetup.RightMargin = 0.25;
            xlWorkSheet.PageSetup.BottomMargin = 0.75;
            xlWorkSheet.PageSetup.TopMargin = 0.75; //60
            xlWorkSheet.PageSetup.HeaderMargin = 0; 
    ```

2.  转换我的excel文件并缩放大小。（只需更改 120 以适合您的文档）

    ```
     //here is the scaling
            Worksheet xlmsheet = excelWorkBook.Sheets[1];
            xlmsheet.PageSetup.Zoom = 120; 
             // Save it in the target format.
            if (excelWorkBook != null)
                excelWorkBook.ExportAsFixedFormat(XlFixedFormatType.xlTypePDF, paramExportFilePath, XlFixedFormatQuality.xlQualityStandard, true,
                    true, Type.Missing, Type.Missing, false, paramMissing); 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:29:05.023

PDF 的宽度取决于您的 Excel 打印设置，默认设置为 A4 纵向，因此导出的 PDF 会将一半数据留到下一行；如果您将纸张大小设置为 A3 Landscape，然后导出为 PDF，它将显示正确的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-11T02:45:52.223

为什么不直接使用 FitToPagesWide 和 FitToPagesTall

```
 xlWorkSheet.PageSetup.Zoom = False
    xlWorkSheet.PageSetup.FitToPagesWide = 1
    xlWorkSheet.PageSetup.FitToPagesTall = 1 
```

# cuda - 当我在 Nsight 中调试时，Cuda 错误 30 消失了

> ID：15216281
> 
> 赞同：0
> 
> 时间：2013-03-05T05:09:38.077
> 
> 标签：cuda, gpu, nsight

VS 2010k 和 Nsight v3

我正在对一些 cuda 模块进行修改；当我在 VS 这个主机代码中以调试模式运行时：

```
result = cuLaunchKernel ( cuFunction, dimGrid.x, dimGrid.y, dimGrid.z, dimBlock.x, dimBlock.y, dimBlock.z, shared, stream, argsG, 0);
cudaDeviceSynchronize();
err = cudaGetLastError(); 
```

我第一次通过这部分代码和每次通过时，**结果**的值为零，但**err为 30 [或未知]。**

所以我启动了 NSight 来解决这个问题。处理了我的整个输入文件，没有任何错误。在 Nsight 中打开内存检查并重新运行。再次处理整个文件而没有投诉。

所以：在主机调试下，每次启动此代码都会导致错误 30，但在 Nsight 的控制下运行并且没有错误。

有人有解释吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-09T14:23:19.050

解决了程序问题：由于错误，正在计算错误的全局内存地址。为什么 Nsight 没有发现错误，而是直接通过了——即使打开了内存检查，我*也不*明白。

# c - 获取数组声明错误

> ID：15216284
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:10:07.043
> 
> 标签：c

我有一个名为 的数组`arr_[6]`，有一个包含六个字符串的想法……但是当我声明这个数组时，编译器会抛出错误。

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i;

    char arr_1[]= {"My_name","your Name", "His Name"};

    char *arr_p;

    arr_p = malloc(sizeof(char)*6);

    arr_p = arr_1;

    printf("%s\n",*arr_p);

    system("PAUSE"); 

    return 0; 
} 
```

显示的错误如下：

```
> main.c: In function `main': main.c:9: error: excess elements in char
> array initializer main.c:9: error: (near initialization for `arr_1')
> main.c:9: error: excess elements in char array initializer main.c:9:
> error: (near initialization for `arr_1')
> 
> make.exe: *** [main.o] Error 1 
```

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:15:36.250

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i;
    const char *arr_1[]= {"My_name","your Name", "His Name"}; // has to be an array of <char *>

    //arr_p is not necessary

    printf("%s\n",*arr_1); // will print the first string, "My_name"
    printf("%s\n",arr_1[1]); // will print the second string, "your Name"
    printf("%s\n",arr_1[2]); // will print the third string, "His Name"
    system("PAUSE"); 
    return 0; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:20:26.383

我相信您正在寻找的是：

```
#include <stdio.h>
#include <stdlib.h>

int main()
{
    int i;
    char* arr_1[]= {"My_name","your Name", "His Name", NULL};
    char** arr_p;

    arr_p = arr_1;

    i = 0;
    while (arr_p[i] != NULL)
    {
        printf("%s\n",(arr_p[i]));
        ++i;
    }

   system("PAUSE"); 
   return 0; 
} 
```

这些是我所做的更改列表：

1.  用于`char* arr_1[]`声明字符串数组，因为每个字符串都是字符数组。
2.  如果需要指向 char* 的指针，则需要将指针声明为数据类型`char**`
3.  使用 NULL 作为数组中的最后一个元素，以便您知道何时到达字符串数组的末尾。
4.  使用`while`循环遍历所有字符串。

# php - Not able to run composer.phar

> ID：15216292
> 
> 赞同：6
> 
> 时间：2013-03-05T05:10:44.943
> 
> 标签：php, composer-php, phar

[Composer](http://getcomposer.org/) is a tool for dependency management in PHP projects. It allows you to declare the dependent libraries your project needs and it will install them in your project for you. Composer is not a package manager.

I told this to declare my meaning from `Composer`. Recently I have tried to run my first Google API project. There is a [quickStart](https://developers.google.com/+/quickstart/php) witch tells I need to use `Composer`. So I tried to run composer using `php composer.phar install`, but the only output I got was some question marks `???????`, and no dependencies where fetched. I haven't noticed anything special about composer itself, it seems that there must be something with `.phar` files that I don't know. Is there anything special in the architecture of `phar` files? What should I do?

I googled a lot, but there was nobody having the same problem as mine.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T08:30:25.530

The issue you describe sounds like you have detect_unicode enabled in your php.ini. You should disable it because it really is of no use and creates problems with phars.

By the way using the composer installer would do a check of settings and warn you about such problems.

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-07-04T09:47:46.440

```
php -d detect_unicode=Off composer.phar install 
```

fixed it on MacOS X, it seems to reset my php.ini every now and then

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-03-12T11:49:03.687

Coming pretty late to this question, but I'd like to add that you can always run this command to verify php is configured correctly for Composer

```
curl -s https://getcomposer.org/installer | php -- --check 
```

That will let you know if anything needs to be amended. If you get a blank output from Composer, that's the first place to go for help.

# jquery - Jquery Ajax请求MVC 4中的查询字符串加密

> ID：15216293
> 
> 赞同：0
> 
> 时间：2013-03-05T05:10:47.387
> 
> 标签：jquery, encryption, asp.net-mvc-4, antixsslibrary

在使用 Jquery Ajax 为控制器的动作发出 POST 请求时，最好在 POST 请求中加密 URL 并在控制器动作中解密，而不涉及 SSL。

我遇到了 ANTiXSS 库，它是否提供了我需要的库。

问候， 库雷希

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:54:04.047

从简单开始 - 您无法加密 URL，但可以加密查询字符串。我将从简单的东西开始，`?q=value1|value2|value3`并使用简单的 Base64 编码值，以便查询字符串变为`?q=dmFsdWUxfHZhbHVlMnx2YWx1ZTM=`. 然后，您可以通过拆分像管道“|”这样的分隔符来解码和解析值。

如果这还不够，请搜索公钥/私钥加密。您可以使用 js 库使用公钥加密客户端并使用私钥解密服务器端。

# c - 垃圾价值不知道从哪里来

> ID：15216294
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:10:51.150
> 
> 标签：c

我的代码在某个地方有问题，我已经在某处使用了几个小时，现在试图找出问题但无法确定原因。当我打印到屏幕上时，所有值都应该为零，但是当它应该为零时，`angleY`变量会继续打印出来。`34244`我想看看是否有人能告诉我这个值来自哪里以及为什么？我有`printf("current rate: %d angle rate: %d angle rate: %d previous rate: %d \n",currentRateY, angleRateY, angleY, previousRateY);`打印所有变量值的行，因此我可以查明问题并且所有变量都保留`0`到`angleY`变量为止。我的代码如下：

```
#include <stdio.h>
#include <string.h>
#include <errno.h>
#include <unistd.h>
#include <stdlib.h>
#include <stdint.h>
#include <time.h>
#include <wiringPi.h>
#include <wiringPiI2C.h>

#define CTRL_REG1 0x20
#define CTRL_REG2 0x21
#define CTRL_REG3 0x22
#define CTRL_REG4 0x23

int fd;
short x = 0;
short y = 0;
short z = 0;
int main (){

    fd = wiringPiI2CSetup(0x69); // I2C address of gyro
    wiringPiI2CWriteReg8(fd, CTRL_REG1, 0x1F); //Turn on all axes, disable power down
    wiringPiI2CWriteReg8(fd, CTRL_REG3, 0x08); //Enable control ready signal
    wiringPiI2CWriteReg8(fd, CTRL_REG4, 0x80); // Set scale (500 deg/sec)
    delay(200);                    // Wait to synchronize

void getGyroValues (){
    int MSB, LSB;

    LSB = wiringPiI2CReadReg8(fd, 0x28);
    MSB = wiringPiI2CReadReg8(fd, 0x29);
    x = ((MSB << 8) | LSB);

    MSB = wiringPiI2CReadReg8(fd, 0x2B);
    LSB = wiringPiI2CReadReg8(fd, 0x2A);
    y = ((MSB << 8) | LSB);

    MSB = wiringPiI2CReadReg8(fd, 0x2D);
    LSB = wiringPiI2CReadReg8(fd, 0x2C);
    z = ((MSB << 8) | LSB);
}
    for (int i=0;i<1000;i++){

        getGyroValues();

    int previousRateZ = z /114;
    int previousRateY = y /114;
    int previousRateX = x /114;

        delay(100);

        getGyroValues();

    int currentRateZ = z /114;
    int currentRateY = y /114;
    int currentRateX = x /114;

    int angleRateZ = ((long)(previousRateZ + currentRateZ) * 105)/1000;
    int angleRateY = ((long)(previousRateY + currentRateY) * 105)/1000;
    int angleRateX = ((long)(previousRateX + currentRateX) * 105)/1000;

    int angleZ = angleZ + angleRateZ;
    int angleY = angleY + angleRateY;
    int angleX = angleX + angleRateX;
    printf("current rate: %d angle rate: %d angle rate: %d previous rate: %d \n",currentRateY, angleRateY, angleY, previousRateY);
        delay(100);

    if(i == 1){
        printf("Z equals: %d\n", angleZ);
        printf("Y equals: %d\n", angleY);
    printf("X equals: %d\n", angleX);
    i=0;
    }
}

}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:16:50.243

`angleY`您在此行中设置它之前正在使用：

```
int angleY = angleY + angleRateY; 
```

C 不保证将值初始化为零。我想你真的想要这样的东西：

```
int angleY = 0;
angleY = angleY + angleRateY; 
```

我还假设第二行将在未来版本中以某种循环结束。

# matlab - MATLAB - 如果for循环条件为真，则计数

> ID：15216302
> 
> 赞同：1
> 
> 时间：2013-03-05T05:11:26.663
> 
> 标签：matlab, loops, for-loop, timer, count

在使用计时器对象时，我有一个关于在 for 循环中计算条件为真的次数的问题。所以我设置我的计时器对象每 60 秒调用一次这个函数，如果 X 和 Z 等于 1，它将检查我在数据库中的条件，然后它会做一些事情。问题是我希望它每次 X 和 Z 都等于 1 时计数，因为我有另一个程序每秒更改 X 和 Z 的值。如果计数等于 1、2 和 3，它会做不同的事情。当我运行它时，即使 X 和 Z 多次等于 1，它也不会超过 1。下面是我的代码

```
a = timer('ExecutionMode', 'fixedRate','TimerFcn', 'func(1)', 'Period', 60);
start(a);

function [x] = func(y)
count = 0;
if x == y && z == y
count = count +1;
if count == 1
    disp('1')
elseif count == 2
    disp('2')
elseif count == 3
    disp('3')  
end
else
disp('same')
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T18:11:58.393

您的主要问题是`count`变量具有函数局部范围，因此每次调用函数时都会创建它，并在函数结束时销毁它。您需要它在调用函数之间保持不变。一种可能性是使`count`变量成为全局变量：

```
global count;
count = 0;

a = timer('ExecutionMode', 'fixedRate','TimerFcn', 'func(1)', 'Period', 60);
start(a);

function func(y)
global count;
if x == y && z == y
    count = count + 1;
    disp(num2str(count));
else
    disp('same');
end 
```

此代码还用一次调用替换了`if`进行各种`disp`调用的结构`disp`。如果您打算打印出计数，这是一种更好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:41:40.953

您没有结束第一个 if 语句。因此，如果 count == 1 以及随后的所有内容仅在 x== y && z == y 时执行

关闭您的第一个 if 语句，您的代码应该可以工作：

```
if x == y && z == y
  count = count +1;
end
if count == 1
... 
```

另请注意，当您编写代码时，每次进入函数时都会将 count 重置为 0，这意味着 count=count+1; 将永远是 count = 0 + 1 = 1;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T17:14:39.237

如果要计算进入函数的次数，必须使计数器变量保持不变，否则每次调用都会将其设置为零。

# ios - UIScrollView 无法识别选择器 setMaximumZoomScale：

> ID：15216317
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:12:21.220
> 
> 标签：ios, uiscrollview

我创建了三个文件：`MyViewController.h`' `MyViewController.m, MyViewController.xib. In the`xib` 文件我创建了一个 UIScrollView 作为根级元素，并与其文件所有者建立了所有必要的连接。

在我的`.m`文件中，我覆盖了`loadView`设置 ScrollView 的一些附加属性的方法。

```
-(void)loadView{
   [super loadView];
   UIScrollView *tmp = (UIScrollView *)[self view];
   [tmp setMaximumZoomScale:3.0];      // crashed here
} 
```

但是，代码在函数的最后一行崩溃了，日志说：

```
-[UIView setMaximumZoomScale:]: unrecognized selector sent to instance 0x1cda5d60 
```

尽管有明确的演员表，但似乎`tmp`被认为是 a `UIView`，而不是 a 。`UIScrollView`我的理解是`[super loadView];`从 xib 文件中加载视图并设置 ViewController 的视图。即使我将崩溃的代码行移到`viewDidLoad`函数中，它也无济于事。

编辑：

[我在 Apple 的文档站点](http://developer.apple.com/library/ios/#documentation/windowsviews/conceptual/UIScrollView_pg/CreatingBasicScrollViews/CreatingBasicScrollViews.html#//apple_ref/doc/uid/TP40008179-CH101-SW1)中发现了类似的模式：

```
- (void)viewDidLoad {

  [super viewDidLoad];

  UIScrollView *tempScrollView=(UIScrollView *)self.view;

  tempScrollView.contentSize=CGSizeMake(1280,960);

} 
```

编辑2：

我稍微缩小了问题的范围。`[self view]`现在我已经将转换为的代码移到了`viewDidLoad`，并且只有在我覆盖时才会出现错误`loadView`。如果我添加

```
-(void)loadView{
  [super loadView];
} 
```

将发生错误。如果我删除这三行，没有错误。但是，对 super 的调用与根本不覆盖不完全一样吗？为什么有区别？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:27:12.047

检查与文件所有者的连接的连接检查器是否像这样用于滚动视图...

见下图...

![在此处输入图像描述](../Images/c47341fa8f0093899e97eb8959bfab7c.png)

然后将您的代码像这样放在 viewDidLoad ...

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    UIScrollView *tempScrollView=(UIScrollView *)self.view;
    [tempScrollView setMaximumZoomScale:3.0];

} 
```

这对我来说很好。

编辑2：

```
-(void)loadView{
    [super loadView];

    UIScrollView *tempScrollView=(UIScrollView *)self.view;

    tempScrollView.contentSize=CGSizeMake(320,960);
    [tempScrollView setBackgroundColor:[UIColor grayColor]];
    [tempScrollView setMaximumZoomScale:3.0];

} 
```

这对我来说也很好。

# spring - 使用 JoinTable 的 JPA 自联接

> ID：15216321
> 
> 赞同：1
> 
> 时间：2013-03-05T05:12:36.070
> 
> 标签：spring, jpa, jpa-2.0, dao, toplink-essentials

我有 1 个实体调用 Item 我希望能够将父项链接到子项。使用连接表来创建父/子关系。我无法获得任何好的文档。因此，如果有人有任何想法，我会全神贯注。

这就是我所拥有的......大部分时间都有效。

```
public class Item implements java.io.Serializable {
     @Id
     private Long id;

     @ManyToOne(optional = true, fetch = FetchType.LAZY)
     @JoinTable(name = "ITEMTOITEM", joinColumns = { @JoinColumn(name = "ITEMID") }, inverseJoinColumns = { @JoinColumn(name = "PARENTITEMID") } )
     private Item parent;

     @OneToMany(mappedBy = "parent", fetch = FetchType.LAZY)
     private List<Item> children;
} 
```

有时，当我想带回与此项目表相关的对象时，我会收到以下错误：

```
org.springframework.web.util.NestedServletException: Request processing failed; nested exception is org.springframework.webflow.engine.ActionExecutionException: Exception thrown executing [AnnotatedAction@6669ff5 targetAction = com.assisted.movein.web.common.nav.NavAction@6edf74b7, attributes = map['method' -> 'handleEntry']] in state 'oneTimeChargesAndFeesView' of flow 'in-flow' -- action execution attributes were 'map['method' -> 'handleEntry']'; nested exception is Exception [TOPLINK-4002] (Oracle TopLink Essentials - 2.0.1 (Build b04-fcs (04/11/2008))): oracle.toplink.essentials.exceptions.DatabaseException
Internal Exception: java.sql.SQLException: ORA-00904: "PARENTITEM_ITEMID": invalid identifier

 Error Code: 904
 Call: SELECT ITEMID, ITEMSHORTDESC, EFFENDDATE, ITEMDESC, PARENTITEM_ITEMID,  ITEMTYPECODE FROM ITEM WHERE (ITEMID = ?)
    bind => [1250]
Query: ReadObjectQuery(com.domain.Item) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T08:11:33.023

尝试`@JoinColumn`改用：

```
 @ManyToOne(optional = true, fetch = FetchType.LAZY)
 @JoinColumn(name = "PARENTITEMID", referencedColumnName = "ITEMID")
 private Item parent;

 @OneToMany(
        cascade = {CascadeType.ALL},
        orphanRemoval = true,
        fetch = FetchType.LAZY
 )
 @JoinColumn(name = "PARENTITEMID")
 private List<Item> children; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-21T19:14:19.663

在大量阅读 JPA 2.0 之后，我发现我需要更新版本的 Eclipselink 2.3+ 来支持我正在尝试做的事情。这是在我的案例中实际工作的代码，但由于我们依赖于旧版本 [EclipseLink 2.0.2]，它不会工作。另一个项目仍在使用 Toplink-essentials JPA 1.0，它再次喜欢这种表示法。

```
public class Item {

@ManyToOne(optional = true, fetch = FetchType.LAZY)
@JoinTable(name = "ITEMINCENTIVESMAPPING", 
        joinColumns = { @JoinColumn(name = "INCENTIVEITEMID", referencedColumnName = "ITEMID", insertable = false, updatable = false) }, 
        inverseJoinColumns = { @JoinColumn(name = "ITEMID", referencedColumnName = "ITEMID", insertable = false, updatable = false) } )
private Item parentItem;

@OneToMany(fetch = FetchType.LAZY)
@JoinTable(name = "ITEMINCENTIVESMAPPING", 
        joinColumns = { @JoinColumn(name = "INCENTIVEITEMID", referencedColumnName = "ITEMID") }, 
        inverseJoinColumns = { @JoinColumn(name = "ITEMID", referencedColumnName = "ITEMID") } )
private List<Item> items;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T15:38:49.813

我相信@JoinTable 只允许在@OneToOne 或@OneToMany 或@ManyToMany 上使用，我认为在@ManyToOne 上没有任何意义。使用@JoinColumn 或@OneToOne。

此外，您的@OneToMany 没有意义，mappedBy 必须是一个属性并且您没有 parentItem，它应该是父项，并且父项应该使用 @JoinColumn。

# hibernate - 转换为子类时更改超类对象时休眠继承复制行

> ID：15216327
> 
> 赞同：0
> 
> 时间：2013-03-05T05:13:50.667
> 
> 标签：hibernate, jpa, spring-mvc

我有以下模型， Person 是 Patient 和 Practitioner 的超类。Person 对象可以被实例化，但是它们可以在以后更改为 Practitioner 或 Patient，但是在转换为子类对象时，Hibernate 会在 person 表中创建一个新行。这是我的班级陈述。我在 Person 类上使用复制构造函数在转换时用当前的 person 对象实例化子类对象。

```
@Entity
@Table(name="person")
@Inheritance(strategy = InheritanceType.JOINED)
public class Person extends BasePerson{

    private Set<MedicalAidCard> medicalAidCards = new HashSet<MedicalAidCard>();

    public Person() {

    }

    public Person(Person person) {
        this.setActive(person.getActive());
        this.setCity(person.getCity());
        this.setCountry(person.getCountry());
        this.setCreatedBy(person.getCreatedBy());
        this.setDateCreated(person.getDateCreated());
        this.setDateModified(person.getDateModified());
        this.setDateOfBirth(person.getDateOfBirth());
        this.setFirstName(person.getFirstName());
        this.setGender(person.getGender());
        this.setId(person.getId());
        this.setLastName(person.getLastName());
        this.setMaritalStatus(person.getMaritalStatus());
        this.setMiddleName(person.getMiddleName());
        this.setModifiedBy(person.getModifiedBy());
        this.setRace(person.getRace());
        this.setTitle(person.getTitle());
        this.setVersion(person.getVersion());
    }

    @JsonIgnore
    @ManyToMany
    @JoinTable(name="card_person", joinColumns=@JoinColumn(name="person_id"),
            inverseJoinColumns=@JoinColumn(name="card_id"))
    public Set<MedicalAidCard> getMedicalAidCards() {
        return medicalAidCards;
    }

    public void setMedicalAidCards(Set<MedicalAidCard> medicalAidCards) {
        this.medicalAidCards = medicalAidCards;
    }  

    @Transient
    public Boolean getPatient(){
        return this instanceof PersonPatient;
    }
} 
```

请注意，BasePerson 是一个包含基本人口统计信息的 @MappedSuperClass

```
@Entity
@PrimaryKeyJoinColumn(name = "id")
@Table(name="patient")
public class PersonPatient extends Person{

    private String fileNumber;
    private String oldFileNumber;
    private Date dateRegistered;

    public PersonPatient() {
    }

    public PersonPatient(Person person) {
        super(person);
    }

    @Column(name="file_number",unique=true)
    public String getFileNumber() {
        return fileNumber;
    }

    public void setFileNumber(String fileNumber) {
        this.fileNumber = fileNumber;
    }

    @Temporal(TemporalType.DATE)
    @Column(name="date_registered")
    public Date getDateRegistered() {
        return dateRegistered;
    }

    public void setDateRegistered(Date dateRegistered) {
        this.dateRegistered = dateRegistered;
    }

    @Column(name="old_file_number")
    public String getOldFileNumber() {
        return oldFileNumber;
    }

    public void setOldFileNumber(String oldFileNumber) {
        this.oldFileNumber = oldFileNumber;
    }

    @Override
    public String toString() {
        return super.getId().toString();
    } 
```

}

顺便说一句，我使用 SpringData CrudRepository 方法进行保存，而 Hibernate 是我的 JPA 提供者。我曾想过删除当前人，但我意识到如果当前人已经代表另一个子类，它就行不通了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:25:11.773

你想做的事是不可能的。继承不是合适的工具，因为在 Java 中就像在 Hibernate 中一样，一个对象有一个类型并且不能变成别的东西。

您可能应该使用组合而不是继承对此进行建模：用户*具有*从业者角色，或者用户*具有*患者角色。

# android - 通过在 fb 墙上的 facebook feed 对话发布应用程序图标

> ID：15216328
> 
> 赞同：0
> 
> 时间：2013-03-05T05:13:53.410
> 
> 标签：android, facebook

我正在使用[facebook 提要对话](http://developers.facebook.com/docs/howtos/androidsdk/3.0/feed-dialog/)在 fb 墙上发帖。为此，我正在使用以下捆绑包。

```
 Bundle params = new Bundle();
    params.putString("name", appName);
    params.putString("caption", "Any Caption");
    params.putString("description", "Any description");
    params.putString("link", "Any link);// App Link
    params.putString("picture", link);//Pic Link 
```

现在我需要传递一个从我的自定义列表视图中选择的应用程序图标，而不是上面的“图片”。我怎样才能做到这一点？任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:11:11.827

“图片”值必须是 URL。因此，如果您在网络上的某个地方有相应的图标，您可以链接到这些图标。如果您正在动态生成图标，那么不，您不能这样做。

# asp.net-mvc - 最佳实践，多次渲染相同的部分，类似的 id 问题

> ID：15216329
> 
> 赞同：1
> 
> 时间：2013-03-05T05:14:05.043
> 
> 标签：asp.net-mvc, c#-4.0

我有一个要在单个页面上显示的主-详细-主-详细（订单标题-> 订单详细信息-> 工作订单标题-> 工作订单详细信息）关系。我有一个标准表格，从订单标题开始，然后是一系列 kendo ui 选项卡，每个订单详细信息一个。在选项卡中，我显示了一个部分视图，其中显示了一个嵌套的主详细信息关系，其中显示了工作订单标题（表单）和工作订单详细信息（网格）。

这样做的问题是，由于在同一页面上多次生成部分，因此您有非唯一的元素 ID。

总而言之，它可以工作，只是它违反了非唯一的 Id 规则，并且由于我在部分中有一些剑道小部件，因此它们不起作用。

所以只是想知道处理这个问题的最佳方法是什么？我想你可以在每个 Id 上加上一个后缀，然后在表单提交给控制器之前捕获表单提交并去掉后缀......

还有其他方法吗？

# php - PayPal IPN 返回无效

> ID：15216338
> 
> 赞同：1
> 
> 时间：2013-03-05T05:15:19.963
> 
> 标签：php, paypal, paypal-ipn

这是我解释 PayPal 通知的代码。我不断从贝宝收到“无效”。很抱歉，这个问题本质上只是一个代码片段，但我已经研究了很长时间，似乎没有取得任何进展。

如果有人有任何想法，但需要查看一些调试信息，那么我设法获取它的方式是通过 php mail() 函数 - 所以只要问我就能得到它。

```
<?php
    $debugmessage = "";

    require($_SERVER['DOCUMENT_ROOT'] . '/xxxx.php');
    mysql_connect("$server", "$user", "$password") or die(mysql_error());
    mysql_select_db("$database") or die(mysql_error());

    // read the post from PayPal system and add 'cmd'
    $req = 'cmd=_notify-validate';
    foreach ($_POST as $key => $value) {
        $value = urlencode(stripslashes($value));
        $req .= "&$key=$value";
    }

    // post back to PayPal system to validate
    $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";
    $header .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $header .= "Content-Length: " . strlen($req) . "\r\n\r\n";
    $fp = fsockopen ('ssl://www.paypal.com', 443, $errno, $errstr, 30);

    if (!$fp) {
        // HTTP ERROR
        echo "http error";
    } else {
        fputs ($fp, $header . $req);
        while (!feof($fp)) {
            $res = fgets ($fp, 1024);
            $debugmessage .= "|".$res;
            $debugmessage .= "|".strlen($req);
            if (strcmp ($res, "VERIFIED") == 0) {
                // PAYMENT VALIDATED & VERIFIED!
                $debugmessage .= "|"+"payment VALID";

                $email = $_POST['payer_email'];
                $password = mt_rand(100000, 999999);
                mysql_query("INSERT INTO users (email, password) VALUES('". mysql_escape_string($email) ."', '".md5($password)."' ) ") or die(mysql_error());
                $to      = $email;
                $subject = 'Download Area | Login Credentials';
                $message = '
                Thank you for your purchase!
                Your account information
                -------------------------
                Email: '.$email.'
                Password: '.$password.'
                -------------------------
                You can now login at xxxxxxxxxxxx';
                $headers = 'From:xxxxxxx@xxxxxxx.com' . "\r\n";
                mail($to, $subject, $message, $headers);
            }
            else if (strcmp ($res, "INVALID") == 0) {
                $debugmessage .= "|"."payment INvalid";
                // PAYMENT INVALID & INVESTIGATE MANUALY!
                $to      = 'xxxxxx@xxxxxxx.com';
                $subject = 'Download Area | Invalid Payment';
                $message = '
                Dear Administrator,
                A payment has been made but is flagged as INVALID.
                Please verify the payment manualy and contact the buyer.
                Buyer Email: '.$email.'
                ';
                $headers = 'From:xxxxxx@xxxxxxx.com' . "\r\n";
                mail($to, $subject, $message, $headers);

            }
        }
        fclose ($fp);
    }
    mail("xxxxxxx@gmail.com",$debugmessage,"");
?> 
```

以防万一有人理解那可怕`$debugmessage`的混乱，一旦脚本运行就包含这个：

```
|HTTP/1.0 200 OK |840|X-Frame-Options: SAMEORIGIN |840|Strict-Transport-Security: max-age=14400 |840|Strict-Transport-Security: max-age=14400 |840|Content-Type: text/html; charset=UTF-8 |840|Date: Tue, 05 Mar 2013 04:42:09 GMT |840|Content-Length: 7 |840|Connection: close |840| |840|INVALID|840|payment INvalid 
```

我已经读过关于不使用`fsockopen`和使用名为“CURL”的东西的东西，但我对这些东西不太自信。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:18:14.370

5 小时后...我的解决方案是放弃代码并使用[本教程](http://www.micahcarrick.com/paypal-ipn-with-php.html)重做。

强烈推荐。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-02T12:25:41.423

这对很多人来说似乎很明显，但我花了一些时间弄清楚。IPN 模拟器请求已验证，但历史记录中的 IPN 无效。事实上，Sim 仅适用于沙箱，而历史仅适用于普通 url。您无法使用沙盒测试历史 IPN 消息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T06:58:50.310

您可以尝试使用 PayPal 沙盒测试工具（即时付款通知 (IPN) 模拟器）来测试 IPN。在 IPN 文件中，您可以使用 POST 数据写入文件并检查错误。

# javascript - SetInterval 发生的速度比预期的要快

> ID：15216339
> 
> 赞同：0
> 
> 时间：2013-03-05T05:15:20.850
> 
> 标签：javascript, html, setinterval

我一直在玩 HTML5 和 Canvas，所以我很高兴我正在做的事情有一个恒定的帧速率。为此，我正在尝试使用 javascript 的 setInterval，但似乎 setInterval 的循环速度比预期的要快。

出于测试目的，我编写了一个小测试脚本，如下：

```
var start = new Date();
var frames = 0;

setInterval(function() { 
    frames++;
    var d = new Date();
    if (d.getTime() - start.getTime() > 1000) {
        console.log(frames);
        frames = 0;
        start = d;
    }
}, 1000/60); 
```

这个脚本应该打印一秒钟内计算了多少“帧”。如果 setInterval 工作正常，它会在控制台上不断打印“60”。然而，Chrome 和 Firefox 给我每秒 63 帧，而 Internet Explorer 9 给我每秒 66 到 67 帧（总是最糟糕的违规者）。

将 1000 毫秒提高到 20000 后，我在 Chrome 上的平均速度为 62.5 fps，在 Firefox 上为 62.4 fps，在 Internet Explorer 上为 66.0。

我[在 Mozilla 上阅读了这篇非常有启发性的文章，](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)关于 setTimeout，他们提到了“clamping”，我认为这可能是一个可能的原因。但是，对于 60fps，超时时间为 16.6 毫秒，高于使用的任何钳位。

我还认为这可能是一个计时器错误，让我关闭了一两帧，但是 20000 毫秒的测试返回了相同的平均 fps，所以它也不是计时器。

关于我做错了什么的任何想法？这是一种非常奇怪的行为。对于任何反馈，我们都表示感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:29:31.157

setTimeout 的延迟是一个整数（毫秒）。`1000/60`是`16.67`，它被截断为`16`。`1000/16`是`62.5`。IE 的时钟以 15ms 的增量运行，因此它可能以 15ms 的间隔运行该函数，因此`66.7`fps.

所有这些都符合您观察到的行为。

最重要的是，您的 setTimeout 和 setInterval 的变幻莫测并没有完全按照请求的延迟运行，因此如果系统突然变得很忙（比如响应网络请求、滚动操作等），帧速率将变慢或变得不稳定尝试赶上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:23:14.593

不幸的是，这种方法不能产生一致的结果。您必须考虑相关脚本的实际执行时间，尽管它可能很短。

我听说 requestAnimationFrame 更适合这种用途。

[来自 Mozilla 开发者网络的关于它的片段。](https://developer.mozilla.org/en-US/docs/DOM/window.requestAnimationFrame)

[一篇关于它的好文章](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)

# java - 我需要为mysql表的每一行分配一个随机但唯一的ID。如果该行包含相同的值，则ID应该相同

> ID：15216345
> 
> 赞同：4
> 
> 时间：2013-03-05T05:15:40.863
> 
> 标签：java, mysql

我需要为 Mysql 表中的每一行分配一个随机但唯一的 ID。如果该行包含相同的值，则 ID 应该相同。

即，如果第 1 行包含 [hi,hello,bye] 第 2 行包含 [gg,hello,bye] 并且第 3 行包含 [hi,hello,bye] 那么第 1 行和第 3 行应该生成相同的 ID 并且第 2 行应该生成不同的身份证。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T05:31:23.427

MD5 哈希可以工作。下面是需要更新的快速/脏代码，但证明了这个概念。

```
System.out.println("row1=" + test1 + ":" + tst1.getHash(test1));
System.out.println("row2=" + test2 + ":" + tst1.getHash(test2));
System.out.println("row3=" + test3 + ":" + tst1.getHash(test3));

private String getHash(String inputStr){
    try{
        MessageDigest md = MessageDigest.getInstance("MD5");
        md.update(inputStr.getBytes());
        byte byteData[] = md.digest();
        StringBuffer sb = new StringBuffer();
        for (int i = 0; i < byteData.length; i++) {
         sb.append(Integer.toString((byteData[i] & 0xff) + 0x100, 16).substring(1));
        }
        return sb.toString();
    }
    catch(Exception e)
    {
        e.printStackTrace();
        return null;
    }
}

row1=hi,hello,bye:cfe40e96aa052a484208c2aefb6f39bb
row2=gg,hello,bye:f652785f0e214507e6aea44ecd3ffb7a
row3=hi,hello,bye:cfe40e96aa052a484208c2aefb6f39bb 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:19:06.303

```
SELECT CRC32(CONCAT(column1, column2, column3)) FROM MyTable. 
```

从技术上讲，CRC32 不是*随机*的（但什么是随机的？）——它产生冲突的可能性很小（不同的值映射到同一个整数）。但这是一个开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:07:23.990

你需要的是一个你关心的所有值的[哈希函数。](http://en.wikipedia.org/wiki/Hash_function)它不能是随机的，因为根据定义，它必须是确定性的——给定相同的值，你总是得到相同的 ID。如果“随机”是指“非连续”，则大多数散列函数应该满足这种需求。

从理论上讲，您不能保证唯一性，因为总是存在冲突的可能性。也就是说，不同的 ID 肯定意味着行值不同，但反过来并不总是正确的。根据您的需要，您可能希望在遇到匹配 ID 时对实际行值实施显式匹配。您也可以考虑使用像 MD5 或 SHA1 这样的[加密散列函数](http://en.wikipedia.org/wiki/Cryptographic_hash_function)，并依赖于您身边的概率（事实上，使用加密散列函数发现的任何冲突都将是该领域的某种突破）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:05:27.097

如果你真的想要证明你没有发生冲突，那么一切都归结为连接所有字段，字段中不包含分隔符。当然，这通常会很长而且很麻烦。

每个人通常做的是：在哈希函数中输入该字符串。虽然理论上不是唯一的，但给定一个具有足够大结果的合适哈希函数，应该能够找到一个在人类生存期间不太可能产生碰撞的哈希函数。例如 git 正在使用这样的哈希 (sha1) 并且 Linus Torvalds 写了关于[意外碰撞的机会](http://kerneltrap.org/mailarchive/git/2006/8/28/211065)：

> 首先，让我提醒人们，这种无意的碰撞真的非常*非常*不可能，所以我们很可能永远不会在整个宇宙历史中看到它。

不同的事情是不那么偶然的碰撞。首先，您应该确保您开始的字符串对于不同的列是不同的。这表示：

*   确保包含所有列
*   确保列 a 由列本身中不包含的内容分隔。必要时使用转义。例如，如果您只是连接两列，则值 'abc' + 'def' 将给出与 'a' + 'bcdef' 相同的结果

如果您必须担心有针对性的攻击，即有人实际上试图创建具有相同哈希的条目，那么您最好的选择是使用加密哈希，可能用于密码哈希的密码哈希通常设计得很慢，以防止暴力破解强制攻击。当然，这可能与大多数应用程序尽可能快的要求相冲突。

# ruby-on-rails - Rails：确认同时保存了两个对象？

> ID：15216349
> 
> 赞同：1
> 
> 时间：2013-03-05T05:15:50.953
> 
> 标签：ruby-on-rails, relationships

在我的站点上创建用户时，我希望执行 User.new 实例，但我还需要创建 Alias.new 对象。用户有很多别名。但是，我还需要在保存之前验证没有其他具有该名称的别名。

从控制台我的代码可能如下所示：

```
u = User.new(:name => "Bob")
a = Alias.new(:name => "SirBob", :user_id => u) 
```

但这不起作用，因为在我保存之前你没有 id。那么如何在保存它们之前验证这两个项目的名称唯一性呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:14:11.790

试试这个：

```
u = User.new  
u.aliases.build 
```

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:22:16.213

采用

```
ActiveRecord::Base.transaction do
  u = User.new(:name => "Bob")
  a = Alias.new(:name => "SirBob", :user_id => u)
end 
```

并添加`validates_uniqueness_of :name`别名模型

这将解决您的问题。

# java - 更新温度时在java中的gui上更新jlabel温度

> ID：15216352
> 
> 赞同：0
> 
> 时间：2013-03-05T05:16:19.913
> 
> 标签：java, swing, jlabel, repaint, event-dispatch-thread

嗨，我正在尝试创建一个 gui，每次温度传感器发回信号并更新 jlabel 值时都会更新温度。现在我可以通过按更新按钮来更新 gui 标签，但是我希望它自动更新而不按“更新按钮”。我尝试了很多方法，包括`repaint()`, 和`revalidate()`, 以及使用不同类型的摇摆计时器，但仍然无法使其正常工作。有人可以帮我吗？谢谢，我将在底部发布我的代码。

图形界面类：

```
import java.awt.Color;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
//import java.util.Timer;
import javax.swing.*;

import javax.sound.midi.MidiSystem;
import javax.sound.midi.MidiUnavailableException;
import javax.sound.midi.Sequencer;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class gui implements ActionListener{

SimpleRead sr = new SimpleRead();
//  SerialReader serial = new SerialReader();
static Sequencer sequencer;
long position;

// Definition of global values and items that are part of the GUI
int desiredTempAmount=74;
static String roomTempAmount="";

//String roomTempAmount=sr.bufferString;
String ACStatusOnOff ="Off";
String ventStatusOpenClose ="Close";
boolean automaticOnOff=true;
boolean openVent=true;

//String ventStatusAmount = "OPEN";

JPanel titlePanel, secondLinePanel, buttonPanel;
JLabel desiredTempLable, roomTempLabel, desiredTemp;

JLabel roomTemp;

JLabel ACstatusLabel;

JLabel ventStatusLabel;

JLabel ACstatus;

JLabel ventStatus;
JButton incTempButton, decTempButton, resetButton, TurnACOnOffButton, ManaulVentButton;

public JPanel createContentPane (){

    // We create a bottom JPanel to place everything on.
    JPanel totalGUI = new JPanel();
    totalGUI.setLayout(null);
    //totalGUI.setBounds(500, 500, 500, 200);

    // Creation of a Panel to contain the title labels
    titlePanel = new JPanel();
    titlePanel.setLayout(null);
    titlePanel.setLocation(10, 0);
    titlePanel.setSize(500, 30);
    totalGUI.add(titlePanel);

    desiredTempLable = new JLabel("Desired Temp");
    desiredTempLable.setLocation(0, 0);
    desiredTempLable.setSize(120, 30);
    desiredTempLable.setHorizontalAlignment(0);
    desiredTempLable.setForeground(Color.red);
    titlePanel.add(desiredTempLable);

    roomTempLabel = new JLabel("Room Temp");
    roomTempLabel.setLocation(130, 0);
    roomTempLabel.setSize(120, 30);
    roomTempLabel.setHorizontalAlignment(0);
    roomTempLabel.setForeground(Color.blue);
    titlePanel.add(roomTempLabel);

    ACstatusLabel = new JLabel("Automatic Mode");
    ACstatusLabel.setLocation(260, 0);
    ACstatusLabel.setSize(120, 30);
    ACstatusLabel.setHorizontalAlignment(0);
    ACstatusLabel.setForeground(Color.darkGray);
    titlePanel.add(ACstatusLabel);

    ventStatusLabel = new JLabel("Vent Status");
    ventStatusLabel.setLocation(390, 0);
    ventStatusLabel.setSize(120, 30);
    ventStatusLabel.setHorizontalAlignment(0);
    ventStatusLabel.setForeground(Color.magenta);
    titlePanel.add(ventStatusLabel);

    // Creation of a Panel to contain the score labels.
    secondLinePanel = new JPanel();
    secondLinePanel.setLayout(null);
    secondLinePanel.setLocation(10, 40);
    secondLinePanel.setSize(1000, 30);
    totalGUI.add(secondLinePanel);

    desiredTemp = new JLabel(""+desiredTempAmount);
    desiredTemp.setLocation(0, 0);
    desiredTemp.setSize(120, 30);
    desiredTemp.setHorizontalAlignment(0);
    secondLinePanel.add(desiredTemp);

    roomTemp = new JLabel(""+roomTempAmount);
    roomTemp.setLocation(120, 0);
    roomTemp.setSize(150, 30);
    roomTemp.setHorizontalAlignment(0);
    secondLinePanel.add(roomTemp);

    ACstatus = new JLabel(""+ACStatusOnOff);
    ACstatus.setLocation(260, 0);
    ACstatus.setSize(120, 30);
    ACstatus.setHorizontalAlignment(0);
    secondLinePanel.add(ACstatus);

    ventStatus = new JLabel(""+ventStatusOpenClose);
    ventStatus.setLocation(390, 0);
    ventStatus.setSize(120, 30);
    ventStatus.setHorizontalAlignment(0);
    secondLinePanel.add(ventStatus);

    // Creation of a Panel to contain all the JButtons.
    buttonPanel = new JPanel();
    buttonPanel.setLayout(null);
    buttonPanel.setLocation(10, 80);
    buttonPanel.setSize(500, 70);
    totalGUI.add(buttonPanel);

    // We create a button and manipulate it using the syntax we have
    // used before. Now each button has an ActionListener which posts 
    // its action out when the button is pressed.
    incTempButton = new JButton("Up");
    incTempButton.setLocation(0, 0);
    incTempButton.setSize(60, 30);
    incTempButton.addActionListener(this);
    buttonPanel.add(incTempButton);

    decTempButton = new JButton("Down");
    decTempButton.setLocation(65, 0);
    decTempButton.setSize(70, 30);
    decTempButton.addActionListener(this);
    buttonPanel.add(decTempButton);

    resetButton = new JButton("Update Temp");
    resetButton.setLocation(0, 40);
    resetButton.setSize(500, 30);
    resetButton.addActionListener(this);
    buttonPanel.add(resetButton);

    TurnACOnOffButton = new JButton("Auto On/Off");
    TurnACOnOffButton.setLocation(260, 0);
    TurnACOnOffButton.setSize(120, 30);
    TurnACOnOffButton.addActionListener(this);
    buttonPanel.add(TurnACOnOffButton);

    ManaulVentButton = new JButton("Open/Close");
    ManaulVentButton.setLocation(385, 0);
    ManaulVentButton.setSize(115, 30);
    ManaulVentButton.addActionListener(this);
    buttonPanel.add(ManaulVentButton);

    totalGUI.setOpaque(true);
    return totalGUI;
}

// This is the new ActionPerformed Method.
// It catches any events with an ActionListener attached.
// Using an if statement, we can determine which button was pressed
// and change the appropriate values in our GUI.

public void update(){
    int pause = 1900;
    System.out.println("updated");
    roomTemp.setText("" + sr.buff[1]);
    Timer t = new Timer(1000, new ActionListener(){

        @Override
        public void actionPerformed(ActionEvent e) {
            // TODO Auto-generated method stub

            roomTemp.setText("" + sr.buff[1]);
            roomTemp.repaint();
            roomTemp.revalidate();
        }

    });
    t.setInitialDelay(pause);
    t.start();
}

public void actionPerformed(ActionEvent e) {

    roomTemp.setText("" + sr.buff[1]);
    if(e.getSource() == incTempButton)
    {
        desiredTempAmount = desiredTempAmount + 1;
        desiredTemp.setText(""+desiredTempAmount);
    }
    else if(e.getSource() == decTempButton)
    {
        desiredTempAmount = desiredTempAmount - 1;
        desiredTemp.setText(""+desiredTempAmount);
    }
    else if(e.getSource() == resetButton)
    {
        //desiredTempAmount = 70;
        roomTempAmount = sr.bufferString;
        desiredTemp.setText("" + desiredTempAmount);
        //roomTemp.setText("" + roomTempAmount);
//            roomTemp.setText("" + sr.buff[1]);
    }
    else if(e.getSource() == TurnACOnOffButton && automaticOnOff==false)
    {
        ACStatusOnOff="Off";
        ACstatus.setText(""+ACStatusOnOff);
        automaticOnOff=true;
    }

    else if(e.getSource() == TurnACOnOffButton && automaticOnOff == true)
    {
        ACStatusOnOff="On";
        ACstatus.setText(""+ACStatusOnOff);
        automaticOnOff=false;
    }

    else if(e.getSource() == ManaulVentButton && automaticOnOff == 
                                 true && openVent==true)
    {
        ventStatusOpenClose="Open";
        ventStatus.setText(""+ventStatusOpenClose);
        openVent=false;
    }

    else if(e.getSource() == ManaulVentButton && automaticOnOff == 
                                 true && openVent==false)
    {
        ventStatusOpenClose="Close";
        ventStatus.setText(""+ventStatusOpenClose);
        openVent=true;
    }
}

public static void createAndShowGUI() 
{
    {
    JFrame.setDefaultLookAndFeelDecorated(true);
    JFrame frame = new JFrame("Techficient");

    //Create and set up the content pane.
    gui demo = new gui();

    frame.setContentPane(demo.createContentPane());

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.setSize(560, 190);
    frame.setVisible(true);

}
}
} 
```

串行阅读器类：

```
import gnu.io.CommPort;

import gnu.io.CommPortIdentifier;
import gnu.io.SerialPort;
import gnu.io.SerialPortEvent;
import gnu.io.SerialPortEventListener;

import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.Arrays;

import java.applet.Applet;
//GUI IMPORTS
import java.awt.*;
import java.awt.event.*;

import javax.net.ssl.SSLEngineResult.Status;
import javax.sound.midi.MidiUnavailableException;
import javax.swing.*;

/**
* This version of the TwoWaySerialComm example makes use of the 
* SerialPortEventListener to avoid polling.
*
*/
public class SimpleRead
{
OutputStream out;
SerialReader input;
static String bufferString;
static gui newgui = new gui();
static String [] buff;
public SimpleRead()
{
    super();
}

void connect ( String portName ) throws Exception
{
    CommPortIdentifier portIdentifier = CommPortIdentifier.getPortIdentifier(portName);
    if ( portIdentifier.isCurrentlyOwned() )
    {
        System.out.println("Error: Port is currently in use");
    }
    else
    {
        CommPort commPort = portIdentifier.open(this.getClass().getName(),2000);

        if ( commPort instanceof SerialPort )
        {
            SerialPort serialPort = (SerialPort) commPort;

   serialPort.setSerialPortParams(
   9600,SerialPort.DATABITS_8,SerialPort.STOPBITS_1,SerialPort.PARITY_NONE);

            InputStream in = serialPort.getInputStream();
            out = serialPort.getOutputStream();

            input = new SerialReader(in);                
            serialPort.addEventListener(input);
            serialPort.notifyOnDataAvailable(true);
            Thread.sleep(3000);
        }
        else
        {
            System.out.println("Error: Only serial ports are handled by this code.");
        }
    }     
}

/**
 * Handles the input coming from the serial port. A new line character
 * is treated as the end of a block in this example. 
**/
public static class SerialReader implements SerialPortEventListener 
{
    private InputStream in;
    private byte[] buffer = new byte[1024];
    String s;

    public SerialReader ( InputStream in )
    {
        this.in = in;
    }

    public void serialEvent(SerialPortEvent arg0) {
        int data;
        String delims="[ B]+";
        try
        {
            int len = 0;
            while ( ( data = in.read()) > -1 )
            {
                if ( data == '\n' ) {
                    break;
                }
                buffer[len++] = (byte) data;
            }
            newgui.roomTempAmount="no test";
            System.out.println(newgui.roomTempAmount);
            newgui.roomTempAmount= new String(buffer,0,len);                  
            bufferString =newgui.roomTempAmount;
            buff=newgui.roomTempAmount.split("\\s");
            System.out.println(buff[1]);
            newgui.roomTempAmount=buff[1];
            newgui.update();
        }
        catch ( IOException e )
        {
            e.printStackTrace();
            System.exit(-1);
        }             
    }
}

public String getTemp()
{
    try
    {
        int sending=newgui.desiredTempAmount;
        this.out.write(sending);
    }
    catch ( IOException e )
    {
        e.printStackTrace();
    }
    try 
    {
        Thread.sleep(3000);
    } 
    catch (InterruptedException e) 
    {
        e.printStackTrace();
    }
    return input.s;
}

public static void main ( String[] args ) throws IOException
{
    SimpleRead sr;
    //newgui.func();
    try
    {
        sr = new SimpleRead();
        sr.connect("COM5");
        SwingUtilities.invokeLater(new Runnable() 
        {
            public void run() 
            {
                newgui.createAndShowGUI();
                System.out.println(newgui.roomTempAmount);
            }
        });
        sr.getTemp();
        sr.getTemp();
        sr.getTemp();
        sr.getTemp();
        sr.getTemp();
        sr.getTemp();
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            
        sr.getTemp();            

        System.out.println(newgui.roomTempAmount);

    }
    catch ( Exception e )
    {
        e.printStackTrace();
    }
}
} 
```

这是我的gui的图像，

[http://i692.photobucket.com/albums/vv287/kkmoslehpour/guiimage_zps1e26756b.png](http://i692.photobucket.com/albums/vv287/kkmoslehpour/guiimage_zps1e26756b.png)

这是我的堆栈跟踪错误，我没有为我的第一个 jlabel 获得空指针，但是当我在其他地方声明它时它变为空（我为 roomTemp 标签'1'显示路径，但'2'为空'3'打印当我添加 roomTempAmount 时房间温度）

1 javax.swing.JLabel[,120,0,150x30,无效,alignmentX=0.0,alignmentY=0.0,border=,flags=8388608,maximumSize=,minimumSize=,preferredSize=,defaultIcon=,disabledIcon=,horizo​​ntalAlignment=CENTER,horizo​​ntalTextPosition =TRAILING,iconTextGap=4,labelFor=,text=,verticalAlignment=CENTER,verticalTextPosition=CENTER] 1 66 72 66

72 2 null 3 72 线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException at gui$1.actionPerformed(gui.java:321) at javax.swing.Timer.fireActionPerformed (Unknown Source) at javax.swing.Timer $DoPostEvent.run(Unknown Source) at java.awt.event.InvocationEvent.dispatch(Unknown Source) at java.awt.EventQueue.dispatchEventImpl(Unknown Source) at java.awt.EventQueue.access$200(Unknown Source) at java. awt.EventQueue$3.run(Unknown Source) at java.awt.EventQueue$3.run(Unknown Source) at java.security.AccessController.doPrivileged(Native Method) at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source) at java .awt.EventQueue.dispatchEvent(Unknown Source) at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source) at java.awt.EventDispatchThread。pumpEventsForFilter(Unknown Source) at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.pumpEvents(Unknown Source) at java.awt.EventDispatchThread.run(来源不明）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:24:48.247

`Thread.sleep()`将阻塞[事件调度线程](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html)。使用 的实例[`javax.swing.Timer`](http://docs.oracle.com/javase/tutorial/uiswing/misc/timer.html)定期调用您的`actionPerformed()`方法。

附录：我最初以为您可以从 a 轮询串行端口`javax.swing.Timer`，但看起来您可能需要使用 a `SwingWorker`。在worker的构造函数中配置端口，在worker的`doInBackground()`实现中监听端口；`publish()`结果到达时，并从该`process()`方法更新您的 GUI。[这里](https://stackoverflow.com/a/4637725/230513)有一个相关的例子。

# ember.js - 如何在ember中使linkTo动态化？

> ID：15216356
> 
> 赞同：8
> 
> 时间：2013-03-05T05:16:26.583
> 
> 标签：ember.js, ember-data

```
<script type="text/x-handlebars" data-template-name="patient">
    <ul class="nav">
    {{#each menuItem in menuItems}}
        <li>{{#linkTo "dashboard.summary" menuItem}}{{menuItem.name}}{{/linkTo}}</li>
    {{/each}}
    </ul>
    {{outlet}}
</script> 
```

在上面的代码中，如何创建`linkTo`动态链接而不是硬编码的“dashboard.summary”？例如，`"dashboard."+menuItem.name`。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-19T02:56:05.917

在当前的 Ember 中（截至本文为 1.10），助手现在接受带引号的参数或将在当前上下文中作为属性查找的参数。我相信这在 Ember 1.2 中已更改（[更改日志](https://github.com/emberjs/ember.js/blob/v1.2.0/CHANGELOG#L48)）。

如果引用，参数将用作字符串：

```
{{#link-to 'post'}}Posts{{/link-to}} 
```

如果没有引用，参数将在当前上下文中查找：

```
{{#link-to routeName}}Go To '{{routeName}}'{{/link-to}} 
```

这将是一个指向`routeName`当前设置的属性的链接。这可以动态更新。

这是一个示例 JSBin，显示了这一点：[http ://emberjs.jsbin.com/nelafep/1/edit?html,css,js,output](http://emberjs.jsbin.com/nelafep/1/edit?html,css,js,output)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-05T08:37:15.013

您可以注册一个简单的 Handlebars 助手来包装`linkTo`助手。

```
var linkTo = Ember.Handlebars.helpers.linkTo;
Ember.Handlebars.registerHelper('myLinkTo', function(name, suffixPath) {
  var suffix = Ember.Handlebars.get(this, suffixPath);    
  arguments = [].slice.call(arguments, 2);
  arguments.unshift(name + '.' + suffix);

  return linkTo.apply(this, arguments);
}); 
```

然后在你的模板中你可以写：

```
{{#each menuItems}}
    <li>{{#myLinkTo "dashboard" name this}}{{name}}{{/myLinkTo}}</li>
{{/each}} 
```

助手将解析第二个参数并将其附加到第一个参数上，前面有一个点。

**编辑：现在可以在没有自定义助手的情况下实现此行为。有关此问题的当代解决方案，请参阅[c4p 的答案](https://stackoverflow.com/a/28597917/1691511)。上述解决方案最后使用 Ember 1.0.0-rc.1 进行了测试。**

# wpf - WPF DataGrid：如何获取单元格的绑定表达式？

> ID：15216362
> 
> 赞同：5
> 
> 时间：2013-03-05T05:17:03.717
> 
> 标签：wpf, binding, datagrid

我需要访问 DataGridTextColumn 中 DataGrid 单元格的绑定表达式。例如：

```
 <DataGridTextColumn Header="Name" Binding="{Binding Name}"/> 
```

我设法获得了与单元格关联的 TextBlock：

```
 var cell = dataGrid.GetCellCtrl<TextBlock>(dataGrid.CurrentCell); 
```

细胞似乎是正确的。我可以打电话

```
 cell.SetValue(TextBlock.TextProperty, value); 
```

更新单元格文本。它似乎在网格上工作（数字已更新）。但是，正如我在一段时间后意识到的那样，源代码并没有得到更新。即使我将 UpdateSourceTrigger 转换为 PropertyChange，它也无济于事。然后，我想我需要获取绑定表达式并显式调用 UpdateSource。

```
 var bindingExpr = cell.GetBindingExpression(TextBlock.TextProperty); 
```

但 bindingExpr 始终为空。为什么？

编辑：我最初遇到的问题是我可以获取单元格的绑定 TextBlock，并设置 TextBlock.TextProperty。但是，源没有得到更新。这是我试图解决这个问题的事情。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T07:01:11.333

`TextBox`中的将`DataGridTextColumn`不具有绑定表达式，列本身具有绑定。

`DataGridTextColumn`派生自`DataGridBoundColumn`which uses a `BindingBase`property not `TextBlock.TextProperty`，但是该`Binding`属性不是 a `DependancyProperty`，因此您必须使用普通的公共属性进行访问。

因此，您必须进行一些转换，因为 in 中的`Binding`属性`DataGridTextColumn`是 type `BindingBase`。

像这样的东西应该可以工作（未经测试）

```
var binding = (yourGrid.Columns[0] as DataGridBoundColumn).Binding as Binding; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-11T10:52:15.503

您需要找到`TextBlock`：

```
var textBlock = cell.FindVisualChild<TextBlock>();
BindingExpression bindingExpression = textBlock.GetBindingExpression(
  TextBlock.TextProperty); 
```

代码`FindVisualChild()`：

```
public static class DependencyObjectExtensions
{
    [NotNull]
    public static IEnumerable<T> FindVisualChildren<T>([NotNull] this DependencyObject dependencyObject)
        where T : DependencyObject
    {
        if (dependencyObject == null) throw new ArgumentNullException(nameof(dependencyObject));

        for (int i = 0; i < VisualTreeHelper.GetChildrenCount(dependencyObject); i++)
        {
            DependencyObject child = VisualTreeHelper.GetChild(dependencyObject, i);
            if (child is T o)
                yield return o;

            foreach (T childOfChild in FindVisualChildren<T>(child))
                yield return childOfChild;
        }
    }

    public static childItem FindVisualChild<childItem>([NotNull] this DependencyObject dependencyObject)
        where childItem : DependencyObject
    {
        if (dependencyObject == null) throw new ArgumentNullException(nameof(dependencyObject));

        foreach (childItem child in FindVisualChildren<childItem>(dependencyObject))
            return child;
        return null;
    }
} 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2017-04-06T06:31:30.353

TextBox t = e.EditingElement as TextBox; 字符串 b= t.GetBindingExpression(TextBox.TextProperty).ResolvedSourcePropertyName;

# python - 拆分列表，然后拆分该列表的最后一个元素

> ID：15216363
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:17:06.833
> 
> 标签：python, python-2.7, split

对于我的作业，我必须将列表拆分两次：我需要使用“+”从输入行拆分地址字符串，然后在“，”处拆分结果列表的最后一部分</p>

```
in_file = open('yelp-short.txt')

def parse_line(text_file):
    a = text_file.strip('\n')
    b = a.split('+')
    c = b.split(',')
    print c 
```

我收到错误：“列表”对象没有属性“拆分”

我可以使用哪些其他方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:19:51.947

提示是您拆分了结果列表的*最后一部分*。

因此，您要拉出最后一部分并将其拆分：

```
def parse_line(line):
    line = line.strip('\n')
    parts = line.split('+')
    addrs = parts[-1].split(',') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:20:21.580

我会`rpartition`：

```
>>> 'a+b+c,d,e'.rpartition('+')[-1].split(',')
['c', 'd', 'e'] 
```

问题是您正在尝试拆分列表，而不是字符串。您需要从该列表中获取特定项目：

```
b = a.split('+')
c = b[-1].split(',') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:21:11.973

您`split`对字符串应用，它会产生一个列表。因此，`a`是一个字符串，`b`是一个列表。你不能`split`列出清单。比方说`a`是`"X+Y,Z"`。`b`将是列表`["X", "Y,Z"]`。您要拆分的是列表的第一个（普通人的第二个）元素`b`- `b[1].split(',')`。这样就没有错误了。你也可以说“最后”，通过说`b[-1]`。它是相同的元素。

# iphone - 解码字符串时获取垃圾和特殊字符

> ID：15216365
> 
> 赞同：0
> 
> 时间：2013-03-05T05:17:23.157
> 
> 标签：iphone, ios, objective-c, xcode, cocoa-touch

我被一个问题困住了。当我尝试使用**Base64**解码字符串时，它会返回一些特殊字符作为响应。如果我们尝试使用这个字符串，那么应用程序就会崩溃。下面是从解码值得到的代码字符串。

```
64B´%4àîÈÝ%ZÌ%
´E@/vÀ6mÔ¶ÅªÜ 
```

我必须做些什么才能使它成为普通字符串？谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:25:22.147

我使用以下方法进行 base64 编码/解码...

```
- (NSString *)base64Encode:(NSString *)plainText
 {
    NSData *plainTextData = [plainText dataUsingEncoding:NSUTF8StringEncoding];
    NSString *base64String = [plainTextData base64EncodedString];
    return base64String;
 }

- (NSString *)base64Decode:(NSString *)base64String
{
    NSData *plainTextData = [NSData dataFromBase64String:base64String];
    NSString *plainText = [[NSString alloc] initWithData:plainTextData   encoding:NSUTF8StringEncoding];
    return plainText;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:50:21.850

走这条路

1.  [从这里](http://projectswithlove.com/projects/NSData_Base64.zip)下载 Base64 文件

2.  从下载的文件夹中拉出这两个文件（**NSData+Base64.h、NSData+Base64.m**）并添加到您的项目中。

3.  为这些新添加的文件禁用 ARC（如果您在项目中启用 ARC）

4.  **#import "NSData+Base64.h"**到你的文件中

5.  使用以下两种方法来完成您的任务

    *base64编码*

    *base64解码*

这是我的代码片段，我在演示示例中是如何做到的

```
#import "ViewController.h"
#import "NSData+Base64.h"

@interface ViewController ()
@end

@implementation ViewController

@synthesize messageTextField;
@synthesize resultBase64Label;
@synthesize resultPlainTextLabel;

- (void)viewDidLoad
{
    [super viewDidLoad];    
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

- (IBAction)convertToBase64:(id)sender {

    //keypad go back
    [messageTextField resignFirstResponder];

    NSString *resultBase64String = [self base64Encode:messageTextField.text];
    resultBase64Label.text = resultBase64String;    
}

- (IBAction)convertToPlainText:(id)sender {

    NSString *resultPlainString = [self base64Decode:resultBase64Label.text];
    resultPlainTextLabel.text = resultPlainString;
}

//convert plain text o base64
- (NSString *)base64Encode:(NSString *)plainText
{
    NSData *plainTextData = [plainText dataUsingEncoding:NSUTF8StringEncoding];
    NSString *base64String = [plainTextData base64EncodedString];
    return base64String;
}

//convert base64 to plain text
- (NSString *)base64Decode:(NSString *)base64String
{
    NSData *plainTextData = [NSData dataFromBase64String:base64String];
    NSString *plainText = [[NSString alloc] initWithData:plainTextData encoding:NSUTF8StringEncoding];
    return plainText;
}

@end 
```

这是结果屏幕

![](../Images/a5939b5e1368774fb0496675f9a85887.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:27:49.813

```
NSString *bufferStr = @"64B´%4àîÈÝ%ZÌ%´E@/vÀ6mÔ¶ÅªÜ";
NSData *temp = [bufferStr dataUsingEncoding:NSASCIIStringEncoding allowLossyConversion:YES];
NSString *dst = [[[NSString alloc] initWithData:temp encoding:NSASCIIStringEncoding] autorelease];
NSLog(@"converted: %@", dst); 
```

或使用`encoding:NSNonLossyASCIIStringEncoding`

这是[官方文档参考，它可能对您有所帮助。](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-dataUsingEncoding_allowLossyConversion_)

# javascript - 按下后退或前进浏览器按钮时，日期选择器没有隐藏

> ID：15216367
> 
> 赞同：0
> 
> 时间：2013-03-05T05:17:45.893
> 
> 标签：javascript, html, jquery-ui, jquery-mobile, jquery-ui-datepicker

嗨，目前正在使用 jQuery Mobile 站点。我在文本框单击上显示了一个日期选择器。虽然显示了日期选择器，然后我单击浏览器中的后退或前进按钮，然后日期选择器（日历）没有隐藏它仍然显示在其他窗口上。请帮我减缓这个问题

日期选择器 在文本框上单击日期选择器：

![在此处输入图像描述](../Images/670fbaec6fda8454b6caed5672c696c8.png)

如果我们在上面的日期选择器处于显示状态时单击返回按钮，则日期选择器显示在其他页面中，图像如下

![在此处输入图像描述](../Images/809cf5f1e97f8cf39d7d8e5bf5a2b02e.png)

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:49:39.543

[jQuery UI](http://jqueryui.com/)没有针对 jQuery Mobile 进行优化。如果你想要一个日期选择器，我建议你使用[DateBox](http://dev.jtsage.com/jQM-DateBox2/)。

[DateBox](http://dev.jtsage.com/jQM-DateBox2/)是高度可定制的，并用于企业解决方案。最重要的是它是一个开源解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-12T07:25:55.087

您可以在 MasterPage 中添加以下代码。它会工作

$(window).on("导航", function (event, data) {

```
if (data.state.direction == "back") {
    // Make use of the directional information  
    $("#ui-datepicker-div").hide();

} 
```

});

# php - 投票按钮 - on_hover 函数不适用于 $.get 结果

> ID：15216368
> 
> 赞同：0
> 
> 时间：2013-03-05T05:17:59.003
> 
> 标签：php, javascript, jquery, mysql

我在我的漫画网站上添加了喜欢/不喜欢的功能。

我已经为它制作了自定义图形。

*   当用户将鼠标悬停在选择上时，它会改变，然后从悬停中切换回来......

*   当用户点击时，它会交换图像，直到他们再次点击相同的投票，它会切换回原来的。

* * *

因此，在他们点击之前，我运行了一个`getVoteImages();`查询投票表的函数，以查看用户之前是否投票过。

*   如果他们投票喜欢，衬衫将是绿色的，而不喜欢的衬衫将是白色的。

*   如果他们投了不喜欢的票，不喜欢的衬衫将是红色的，而喜欢的衬衫将是白色的。如果没有投票，两件衬衫都是白色的。

当鼠标悬停在上面时，下面的 javascript 将像这样交换图像：

![在此处输入图像描述](../Images/0f239de13374117749d0687982f87f8e.png)

这是 Chrome 的输出 HTML：您可以看到 onhover`this_hover();`被正确调用并且图像发生了变化：

```
<img src="./images/SiteDesign/liked.png" id="like" onclick="callBoth(this.id)">
<img src="./images/SiteDesign/dislike_hover.png" id="dislike" onclick="callBoth(this.id)" onmouseover="this_hover(this.id)"> 
```

* * *

当用户点击时，它将调用一个 javascript 函数，该函数将运行 jquery $.get AJAX 调用到 likecounter.php 脚本，该脚本会将投票加载到数据库中，并增加喜欢或不喜欢。这样做将首先隐藏 ( `$("#like, #dislike").hide();`) 并用更新后的投票替换原始投票图像......所以绿色衬衫表示喜欢，红色衬衫表示不喜欢，或者如果未选择则为白衬衫。你不能对喜欢和不喜欢都投一票。

![在此处输入图像描述](../Images/18de69aa4ce630e5f09ff0ef1594a7ed.png)

$.get AJAX 会将更新的投票图像输出到`<span id="choice"></span>`. 所以在下面，在输出的 HTML 中，您可以看到原始投票图像被隐藏`style="display: none;"`，替换图像显示在`<span id="choice"></span>`. **这很奇怪，因为替换图像包含相同的`onmouseover`调用......**

![在此处输入图像描述](../Images/1e7f62b07cdf1845e534cb619d729a24.png)

**问题：**

输出 HTML 看起来是正确的......所以我不确定为什么当从服务器返回结果时没有再次调用悬停函数。

我什`alert(id);`至尝试测试从 $.get 返回投票图像时是否调用了这些函数，并且 ID 很好地发出警报。

**Javascript：**

```
<script type="text/javascript">
    function this_hover(id) {
        alert(id);
        var images = {
            "like": [
                "./images/SiteDesign/like_hover.png",
                "./images/SiteDesign/like.png", 
            ],
            "dislike": [
                "./images/SiteDesign/dislike_hover.png",
                "./images/SiteDesign/dislike.png",
            ]
        }
        $("#"+id).on({
            mouseenter: function() {
                if (this.id in images) this.src = images[this.id][0];

            },
            mouseleave: function() {
               if (this.id in images) this.src = images[this.id][1];
            }
        });
    }

    function callBoth(choice) {
        likeCounter(choice);
    }

    function likeCounter(choice) {  

        $.get("./scripts/likecounter.php", {_choice : choice, _site : "<?php echo $site; ?>", _id : <?php echo $imgid; ?>},
            function(returned_data) {
                $("#choice").html(returned_data);
            }
        );
        $("#like, #dislike").hide();
        $("#getlikes").hide();
    }   
</script> 
```

任何想法为什么单击投票时图像交换不起作用？为什么`alert(id)`工作有效，但`$("#"+id).on({ .....`功能无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:34:39.663

原来我不应该隐藏原始图像......我应该删除它们，这样隐藏图像上的鼠标悬停不会与 $.get 中的替换图像冲突：

所以这：`$("#like, #dislike").remove();`

而不是这个：`$("#like, #dislike").hide();`

# linux - 如何计算每个目录中的文件数？

> ID：15216370
> 
> 赞同：146
> 
> 时间：2013-03-05T05:18:09.897
> 
> 标签：linux, bash, ubuntu

我可以列出所有目录

```
find ./ -type d 
```

我尝试使用以下命令列出每个目录的内容并计算每个目录中的文件数

```
find ./ -type d | xargs ls -l | wc -l 
```

但这总结了返回的总行数

```
find ./ -type d | xargs ls -l 
```

有没有办法计算每个目录中的文件数？

* * *

## 回答 #1

> 赞同：258
> 
> 时间：2016-09-21T17:26:19.617

这将打印当前目录级别的每个目录的文件计数：

```
du -a | cut -d/ -f2 | sort | uniq -c | sort -nr 
```

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2013-03-05T10:40:55.910

假设你有 GNU find，让它找到目录，然后让 bash 完成剩下的工作：

```
find . -type d -print0 | while read -d '' -r dir; do
    files=("$dir"/*)
    printf "%5d files in directory %s\n" "${#files[@]}" "$dir"
done 
```

* * *

## 回答 #3

> 赞同：71
> 
> 时间：2019-01-22T10:06:05.330

```
find . -type f | cut -d/ -f2 | sort | uniq -c 
```

*   `find . -type f``file`在当前文件夹和子文件夹中查找该类型的所有项目
*   `cut -d/ -f2`剪下他们的特定文件夹
*   `sort`对文件夹名称列表进行排序
*   `uniq -c`返回每个文件夹名称的计数次数

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2013-03-05T05:27:12.763

您可以安排查找所有文件，删除文件名，留下一行仅包含每个文件的目录名，然后计算每个目录出现的次数：

```
find . -type f |
sed 's%/[^/]*$%%' |
sort |
uniq -c 
```

唯一的问题是如果您有任何包含换行符的文件名或目录名，这是不太可能的。如果您真的需要担心文件名或目录名中的换行符，我建议您找到它们并修复它们，使它们不包含换行符（并悄悄地说服有罪的一方他们的方式错误）。

* * *

如果您对当前目录的每个子目录中的文件计数感兴趣，计算任何子目录中的任何文件以及直接子目录中的文件，那么我会将`sed`命令调整为仅打印顶级目录：

```
find . -type f |
sed -e 's%^\(\./[^/]*/\).*$%\1%' -e 's%^\.\/[^/]*$%./%' |
sort |
uniq -c 
```

第一个模式捕获名称的开头、点、斜线、直到下一个斜线和斜线的名称，并仅用第一部分替换该行，因此：

```
./dir1/dir2/file1 
```

被替换为

```
./dir1/ 
```

第二个replace直接捕获当前目录下的文件；他们最后没有斜线，而那些被替换为`./`. 然后排序和计数仅适用于名称的数量。

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2013-03-05T05:29:15.897

这是一种方法，但可能不是最有效的。

```
find -type d -print0 | xargs -0 -n1 bash -c 'echo -n "$1:"; ls -1 "$1" | wc -l' -- 
```

给出这样的输出，目录名称后跟该目录中的条目数。请注意，输出计数还将包括可能不是您想要的目录条目。

```
./c/fa/l:0
./a:4
./a/c:0
./a/a:1
./a/a/b:0 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2018-07-23T13:00:31.030

[塞巴斯蒂安](https://stackoverflow.com/a/39622947)答案的略微修改版本，使用`find`代替（以排除必须执行且从未使用过`du`的与文件大小相关的开销）：`du`

```
 find ./ -mindepth 2 -type f | cut -d/ -f2 | sort | uniq -c | sort -nr 
```

`-mindepth 2`参数用于排除当前目录中的文件。如果你删除它，你会看到一堆如下所示的行：

```
 234 dir1
  123 dir2
    1 file1
    1 file2
    1 file3
      ...
    1 fileN 
```

（就像`du`基于 - 的变体一样）

如果您还需要计算当前目录中的文件，请使用此增强版本：

```
{ find ./ -mindepth 2 -type f | cut -d/ -f2 | sort && find ./ -maxdepth 1 -type f | cut -d/ -f1; } | uniq -c | sort -nr 
```

输出将如下所示：

```
 234 dir1
  123 dir2
   42 . 
```

* * *

## 回答 #7

> 赞同：8
> 
> 时间：2016-09-21T19:14:49.350

其他人的解决方案都有一个或另一个缺点。

```
find -type d -readable -exec sh -c 'printf "%s " "$1"; ls -1UA "$1" | wc -l' sh {} ';' 
```

解释：

*   `-type d`: 我们对目录感兴趣。
*   `-readable`：如果*可以*列出其中的文件，我们只需要它们。请注意，`find`当它尝试在其中搜索更多目录时仍然会发出错误，但这会阻止调用`-exec`它们。
*   `-exec sh -c BLAH sh {} ';'`：对于每个目录，运行此脚本片段，`$0`设置为`sh`并`$1`设置为文件名。
*   `printf "%s " "$1"`: 可移植且最少打印目录名称，后跟一个空格，而不是换行符。
*   `ls -1UA`: 按目录顺序列出文件，每行一个（以避免阻塞管道），*仅*排除特殊目录`.`和`..`
*   `wc -l`: 计​​算行数

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2017-07-16T21:21:02.057

这也可以通过循环 ls 而不是 find 来完成

`for f in */; do echo "$f -> $(ls $f | wc -l)"; done`

解释：

`for f in */;`- 遍历所有目录

`do echo "$f ->`- 打印出每个目录名

`$(ls $f | wc -l)`- 为此目录调用 ls 并计算行数

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2013-03-05T05:24:15.743

这应该返回目录名称，后跟目录中的文件数。

```
findfiles() {
    echo "$1" $(find "$1" -maxdepth 1 -type f | wc -l)
}

export -f findfiles

find ./ -type d -exec bash -c 'findfiles "$0"' {} \; 
```

示例输出：

```
./ 6
./foo 1
./foo/bar 2
./foo/bar/bazzz 0
./foo/bar/baz 4
./src 4 
```

`export -f`是必需的，因为 的参数`-exec`不允许`find`执行 bash 函数，除非您显式调用 bash，并且您需要将当前作用域中定义的函数显式导出到新的 shell。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2019-11-20T20:12:53.073

这可能是浏览目录结构并提供深度结果的另一种方式。

```
find . -type d  | awk '{print "echo -n \""$0"  \";ls -l "$0" | grep -v total | wc -l" }' | sh 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-11-17T11:54:54.050

我结合[了@glenn jackman 的答案](https://stackoverflow.com/a/15221702/8893449)和@pcarvalho 的答案（在评论列表中，pcarvalho 的答案有问题，因为字符' ' （反引号）的额外样式控制功能**）**。

我的脚本可以接受路径作为预兆并将目录列表排序为`ls -l`，**它也可以处理“文件名中的空格”问题**。

```
#!/bin/bash
OLD_IFS="$IFS"
IFS=$'\n'
for dir in $(find $1 -maxdepth 1 -type d | sort); 
do
    files=("$dir"/*)
    printf "%5d,%s\n" "${#files[@]}" "$dir"
done
FS="$OLD_IFS" 
```

我在stackoverflow中的第一个答案，我希望它可以帮助某人^_^

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2022-02-10T19:43:19.780

我的回答有点不同，由于 find 的选项，您实际上可以更加灵活。试试看嘛：

```
find . -type f -printf "%h\n" | sort | uniq -c 
```

使用“-printf”的“%h”选项，find 只打印它找到的文件的目录。然后使用“uniq -c”进行排序和计数。这将打印每个目录具有相同目录的搜索结果条目的数量。

在 find 上使用更多选项，您可以更加灵活。例如，要了解某个目录在某个日期修改了多少文件，请使用：

```
find . -newermt "2022-01-01 00:00:00" -type f -printf "%TY-%Tm-%Td %h\n" | sort | uniq -c 
```

这将查找自 2022 年 1 月 1 日以来已修改的所有文件，打印（使用“-printf”）修改日期和目录，然后对它们进行排序和计数。在此示例中，结果中的每一行都有文件数、修改日期（不包括时间）和目录。

请注意，我认为并非所有版本的 find 都提供“-printf”。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2017-07-02T21:51:20.060

寻找 。-type f -printf '%h\n' | 排序 | 唯一的-c

例如：

```
 5 .
  4 ./aln
  5 ./aln/iq
  4 ./bs
  4 ./ft
  6 ./hot 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2017-11-02T23:10:06.910

我在这里尝试了其他一些，但当我只想要文件时，最终文件计数中包含了子文件夹。这将打印`./folder/path<tab>nnn`当前文件夹中每个子文件夹的文件数，不包括子文件夹。

```
for d in `find . -type d -print` 
do 
  echo -e "$d\t$(find $d -maxdepth 1 -type f -print | wc -l)"
done 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-12-27T12:37:53.427

递归查找给定类型文件的简单方法。在这种情况下，当前目录中所有文件夹的 .jpg 文件：

`find . -name *.jpg -print | wc -l`

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2018-05-20T11:21:52.743

这将给出总计数。

```
for file in */; do echo "$file -> $(ls $file | wc -l)"; done | cut -d ' ' -f 3| py --ji -l 'numpy.sum(l)' 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-08-08T08:41:24.383

一个超快速的奇迹命令，它递归地遍历文件来统计目录中的图像数量，并按图像扩展名组织输出：

```
find . -type f | sed -e 's/.*\.//' | sort | uniq -c | sort -n | grep -Ei '(tiff|bmp|jpeg|jpg|png|gif)$' 
```

学分：[https ://unix.stackexchange.com/a/386135/354980](https://unix.stackexchange.com/a/386135/354980)

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2020-08-15T10:22:53.227

我编辑了脚本以排除`node_modules`所分析目录中的所有目录。

这可用于检查项目文件数是否超过文件观察程序可以处理的最大数量。

```
find . -type d ! -path "*node_modules*" -print0 | while read -d '' -r dir; do
    files=("$dir"/*)
    printf "%5d files in directory %s\n" "${#files[@]}" "$dir"
done 
```

要检查您的系统可以观看的最大文件数：

```
cat /proc/sys/fs/inotify/max_user_watches 
```

`node_modules`在慢速系统中，应将文件夹添加到您的 IDE/编辑器排除路径中，并且其他文件数理想情况下不应超过最大值（尽管可以更改）。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2021-08-16T15:39:33.203

天哪，为什么复杂的命令。只需使用类似的东西

```
find whatever_folder | wc -l 
```

# c++ - WriteFile 失败，错误代码为 87，每扇区 4096 字节磁盘

> ID：15216374
> 
> 赞同：0
> 
> 时间：2013-03-05T05:18:46.880
> 
> 标签：c++, winapi, visual-c++, disk, hard-drive

输入缓冲区大小 = 512 的 WriteFile() Win32 调用失败。当我尝试写入每扇区字节数 = 4096.[3 TB 磁盘]的磁盘时。输入缓冲区大小 = 4096 的相同 WriteFile 工作正常。，

任何机构都可以解释这种行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-09T07:10:47.487

对于低级 I/O 操作，您的缓冲区必须是扇区大小的整数倍。在你的情况下，`k*4096`. 很可能您的硬盘驱动器不是很久以前生产的。它们被称为“高级格式”，每个扇区有 4096 个字节。我的不介意我是否将其设置为 512，因为它很旧。尝试使用该`GetDiskFreeSpace`功能来了解有关您的硬盘的更多信息。

# ios - UIScrollView 中的应用程序崩溃，索引超出范围错误

> ID：15216377
> 
> 赞同：1
> 
> 时间：2013-03-05T05:18:52.820
> 
> 标签：ios, objective-c, uiscrollview, nsmutablearray

在我的 iPhone 应用程序中，我使用来自 github 的 FGallery 来显示照片库。我的问题有时是当我多次单击图库中的图像时（我认为主要是针对第一张图像），我的应用程序崩溃并显示以下错误消息。

> *** 由于未捕获的异常 'NSRangeException' 导致应用程序终止，原因：'*** -[__NSArrayM objectAtIndex:]: index 4294967295 beyond bounds [0 .. 1]'

我将数组传递给 FGallery 类的代码在这里。

**在.h**

```
@interface ProdDetails : UIViewController<FGalleryViewControllerDelegate>   {
    NSMutableArray *networkImages;
    FGalleryViewController *networkGallery;
}
@property(strong,nonatomic) NSMutableArray *networkImages;
@property(strong,nonatomic) FGalleryViewController *networkGallery;
-(void)setNetworkImages; 
```

**米**

```
-(void)setNetworkImages {

    self.networkImages = [[NSMutableArray alloc]init];
    NSArray *data = [prodDet objectForKey:@"model_details"];
    for (id eachDic in data) {

        NSString *eachUrl = [NSString stringWithFormat:@"%@%@",IMG_INIT_URL,[eachDic objectForKey:@"model_imgurl"]];
        eachUrl = [common replaceStringWhiteSpaceinUrl:eachUrl];
        [self.networkImages addObject:eachUrl];
    }
}
-(void)showProductImageGallery    {
    networkGallery = [[FGalleryViewController alloc]initWithPhotoSource:self];

    CATransition *transition = [CATransition animation];
    transition.duration = 1.0;
    transition.type = kCATransitionFade;
    transition.subtype = kCATransitionFromTop;

    [self.navigationController.view.layer addAnimation:transition forKey:kCATransition];

    [self.navigationController pushViewController:networkGallery animated:NO];
} 
```

任何人都请帮我解决这个问题。

**编辑**

谢谢大家。最后我发现了问题。问题出在FGallery中。

```
- (void)scrollingHasEnded {

    _isScrolling = NO;

    NSUInteger newIndex = fabs(floor( _scroller.contentOffset.x / _scroller.frame.size.width ));
    //NSLog(@"%f,%f,%i",_scroller.contentOffset.x,_scroller.frame.size.width,newIndex);
    // don't proceed if the user has been scrolling, but didn't really go anywhere.
    if( newIndex == _currentIndex )
        return;

    // clear previous
    [self unloadFullsizeImageWithIndex:_currentIndex];

    _currentIndex = newIndex;
    [self updateTitle];
    [self updateButtons];
    [self loadFullsizeImageWithIndex:_currentIndex];
    [self preloadThumbnailImages];
} 
```

当我们将第一张图片滚动到上一张时，_scroller.contentOffset.x 变为负数。所以`floor( _scroller.contentOffset.x / _scroller.frame.size.width )`结果为负指数。我刚刚添加了 fabs 函数以产生正指数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:28:55.407

错误描述说，`it because you (or FGallery) trying to access object from`networkImages `array from the index which is not exist (out of bound)!`，使用此代码我们无法为您提供确切的帮助 ---**因为它还不够！**如果你找不到任何解决方案，`FGallery`你应该照顾**[MWPhotoBrowser](https://github.com/mwaterfall/MWPhotoBrowser)**。我发现它很容易使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:17:35.410

使用这行代码

```
NSMutableArray *data = [prodDet objectForKey:@"model_details"]; 
```

代替

```
NSArray *data = [prodDet objectForKey:@"model_details"]; 
```

# r - 为什么 R 会找到不在 data.frame 中的 data.frame 变量？

> ID：15216389
> 
> 赞同：5
> 
> 时间：2013-03-05T05:20:10.033
> 
> 标签：r

为什么这不会导致错误？

```
> str(u)
'data.frame':   8879 obs. of  2 variables:
 $ bundle_qty: int  1 1 1 1 1 1 1 1 1 1 ...
 $ mail_a    : num  1 1 1 1 0 0 0 1 1 0 ...

> head(u$mail)
[1] 1 1 1 1 0 0 
```

变量`mail`不在 data.frame`u`中！不应该`u$mail`回来`NULL`？？

即使我从头开始使用虚拟数据：

```
> rm(list=ls())
> u <- data.frame( bundle_qty = c(1,1,1,1), mail_a = c(1,1,1,1))
> str(u)
'data.frame':   4 obs. of  2 variables:
 $ bundle_qty: num  1 1 1 1
 $ mail_a    : num  1 1 1 1
> u <- data.frame( bundle_qty = c(1L,1L,1L,1L), mail_a = c(1,1,1,1))
> str(u)
'data.frame':   4 obs. of  2 variables:
 $ bundle_qty: int  1 1 1 1
 $ mail_a    : num  1 1 1 1
> u$mail
[1] 1 1 1 1 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T05:27:19.707

运算符使用的部分匹配`$`将返回一个值，如果它可以唯一标识给定词干（例如 - `mail`）的变量。

`mail`例如 -在 your中没有其他内容`data.frame`，所以你会被`mail_a`退回。

`u["mail"]`虽然会抛出错误。

再举一个例子来说明它在哪里工作，就像你想象的那样：

```
test <- data.frame(aa=1:10,aaa=letters[1:10])

> test$aa
 [1]  1  2  3  4  5  6  7  8  9 10
> test$aaa
 [1] a b c d e f g h i j
Levels: a b c d e f g h i j
> test$a
NULL 
```

@mnel`fortune(312)`指的是：

> “这里的问题是 $ 符号是一个神奇的捷径，如果使用不正确，就像任何其他魔法一样，可能会产生相当于把自己变成蟾蜍的程序化效果。”
> 
> *   Greg Snow（响应用户希望通过 x$y 而不是 x[[y]] 访问名称存储在 y 中的列的用户）R-help（2012 年 2 月）

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-03-05T05:50:10.503

```
u$mail 
```

调用相当于

```
u[['mail', exact = FALSE]] 
```

它将使用部分匹配来查找命名元素（列）

```
u[['mail']] 
```

不会使用部分匹配，因此不会找到任何列。

`[[` 如财富（312）所述，使用起来更安全

```
 /\_/\
( o o )
== Y ==
 - - 
```

# ruby-on-rails - RoR 中驱动程序和应用程序之间的架构不匹配

> ID：15216393
> 
> 赞同：2
> 
> 时间：2013-03-05T05:20:21.287
> 
> 标签：ruby-on-rails, ruby, sql-server, sql-server-2008, ruby-on-rails-3.2

我在尝试生成脚手架以测试数据库连接时收到此错误“指定的 DSN 包含驱动程序和应用程序之间的体系结构不匹配”。

我知道，如果我使用的是 64 位 Windows 版本，则默认使用 64 位 ODBC 版本。

我现在正在尝试使用 Windows 7 64 位运行该应用程序。我通过在以下位置运行 ODBC 驱动程序设置页面配置了 32 位 ODBC Access 驱动程序而不是 64 位驱动程序：

```
C:\Windows\SysWOW64\odbcad32.exe 
```

如何访问 64 位 ODBC 版本。它在我的系统中不可用。我可以下载吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T17:35:18.727

我对此没有太多经验，但是“控制面板 > 管理工具 > 数据源”中的数据源与 C:\Windows\SysWOW64\odbcad32.exe 不同，可能是您正在寻找的 64 位版本。

# iphone - 如何在 iPhone 应用程序中集成 paypal preauth？

> ID：15216398
> 
> 赞同：0
> 
> 时间：2013-03-05T05:21:12.220
> 
> 标签：iphone, ios, paypal, pre-authentication

我可以使用名称值隐藏变量 payment-action=authorization 在我的网站上集成 pay-pal 预授权功能支付表单。如何为我的 iPhone 应用程序实现此 pay-pal 预授权功能？i-OS 中支付操作的变量是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T14:25:12.387

不幸的是，iOS SDK 1.0 版不支持预授权。

# android - 打开图库时 Android 媒体播放器停止

> ID：15216403
> 
> 赞同：0
> 
> 时间：2013-03-05T05:21:33.243
> 
> 标签：android, gallery, android-music-player

我使用 MediaPlayer 类开发了一个简单的音乐播放器。我用它播放了一首歌曲，最小化我的音乐播放器，然后我打开本地画廊，我的应用程序变得很奇怪。

它变得像卡住了几秒钟，然后它开始播放新歌。

我也喜欢使用 android 原生播放器，当画廊打开时播放器暂停。

你们知道什么可能导致我的应用程序像这样卡住吗？

我真的很感谢你们的任何帮助，

问候，

克里斯玛·安迪卡

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:52:13.663

在您的应用程序中查看，如果您最小化您的应用程序，它会再次进入 onpause() 状态，然后返回应用程序，它将调用 onresume() 状态。所以需要一些时间。这件事没有什么奇怪的。

# android - 启动和停止接收器

> ID：15216407
> 
> 赞同：1
> 
> 时间：2013-03-05T05:21:53.230
> 
> 标签：android, broadcastreceiver

我想启动和停止一个检测屏幕是开还是关的广播接收器，这个功能应该在一个按钮点击时执行，有没有办法做到这一点。有人请帮我找出来。

# email - Postfix 无法接收来自外部域的邮件

> ID：15216412
> 
> 赞同：0
> 
> 时间：2013-03-05T05:22:10.737
> 
> 标签：email, postfix-mta, centos5

问题是我能够将邮件从 myname@mydomain.com 发送到外部域，但来自外部 (myname@gmail.com) 的所有邮件都没有到达我的域邮件 ID。我不确定我在哪里犯了错误。

这是我的后缀 main.cf ：

```

```
``inet_protocols = all
   myhostname = mail.changed.com
   mynetworks = 127.0.0.0/8
   message_size_limit = 30720000
   virtual_alias_domains = 
   virtual_alias_maps = proxy:mysql:/etc/postfix/mysql-virtual_forwardings.cf,    mysql:/etc/postfix/mysql-virtual_email2email.cf
   virtual_mailbox_domains = proxy:mysql:/etc/postfix/mysql-virtual_domains.cf
   virtual_mailbox_maps = proxy:mysql:/etc/postfix/mysql-virtual_mailboxes.cf
   virtual_mailbox_base = /home/vmail
   virtual_uid_maps = static:5000
   virtual_gid_maps = static:5000
   smtpd_sasl_type = dovecot
   smtpd_sasl_path = private/auth
   smtpd_sasl_auth_enable = yes
   broken_sasl_auth_clients = yes
   smtpd_sasl_authenticated_header = yes
   smtpd_recipient_restrictions = permit_mynetworks , permit_sasl_authenticated,       reject_unauth_destination, reject_unknown_sender_domain,                          
                reject_unknown_recipient_domain,                               
                reject_non_fqdn_sender,                               
                reject_non_fqdn_recipient,                         
                permit_mynetworks, permit_sasl_authenticated,                           
                reject_unauth_destination,                             
                reject_non_fqdn_helo_hostname,                          
                reject_invalid_helo_hostname,
          check_policy_service inet:127.0.0.1:60000

   smtpd_use_tls = yes
   smtpd_tls_cert_file = /etc/ssl/certs/postfix.pem
   smtpd_tls_key_file = /etc/ssl/private/postfix.pem
   virtual_create_maildirsize = yes
   virtual_maildir_extended = yes
   virtual_transport = dovecot
   dovecot_destination_recipient_limit = 1
   smtpd_tls_auth_only = no`` 
```

 我有强烈的感觉**smtpd_recipient_restrictions 出了点问题**

451 4.3.5 所有 gmail id 的服务器配置错误

* * *

## 回答 #1

> 赞同：4
> 
>             
> 
> 时间：2013-03-05T05:49:43.023

固定的：

我评论了以下行，问题已解决。我现在可以接收来自外部域的邮件。
**#check_policy_service inet:127.0.0.1:60000**在 smtpd_recipient_restrictions 
```

# node.js - Compound JS 中的模板引擎

> ID：15216415
> 
> 赞同：2
> 
> 时间：2013-03-05T05:22:25.603
> 
> 标签：node.js, pug, compoundjs

我试图将jade设置为复合js中的默认模板引擎。当我浏览我找到的文档时

> **模板引擎**
> 
> 默认铁路使用ejs模板引擎，但你可以切换到jade，使用设置
> 
> ```
> app.set('view engine', 'jade'); 
> ```
> 
> 并添加行
> 
> ```
> require('jade-ext'); 
> ```
> 
> 到 ./npmfile.js

但我找不到我必须编辑的文件。

你能指出要编辑哪个文件来更改模板引擎吗？

现在我添加了`app.set`但是在哪里可以找到`npmfile.js`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:08:33.387

我得到了它。这很简单。

我只需要添加`app.set('view engine', 'jade');`config/enviornment.js

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:30:29.593

默认入口脚本。从文档看起来它会是`server.js`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-17T06:15:52.753

我补充说：

```
 , "jade": "latest"
  , "jade-ext": "latest" 
```

到 package.json 中的依赖项，然后运行：

```
npm install 
```

# android - 从 drawable/assets android 在 facebook 墙上发布图片

> ID：15216416
> 
> 赞同：2
> 
> 时间：2013-03-05T05:22:33.650
> 
> 标签：android, facebook, api

我已经使用 Uri 在墙上成功发布了图像，但现在我想从 drawable/assets 文件夹中发布图像，这就是我正在做的事情。

```
 Session session = Session.getActiveSession();

    if (session != null){

        // Check for publish permissions    
        List<String> permissions = session.getPermissions();
        if (!isSubsetOf(PERMISSIONS, permissions)) {
            pendingPublishReauthorization = true;
            Session.NewPermissionsRequest newPermissionsRequest = new Session.NewPermissionsRequest(this, PERMISSIONS);
            session.requestNewPublishPermissions(newPermissionsRequest);
            return;
        }

        PackageManager m = MainTabActivity.this.getPackageManager();
        String s = MainTabActivity.this.getPackageName();

        Uri path = Uri.parse("android.resource://"+s+"/"+R.drawable.app_icon);
        Bundle postParams = new Bundle();
        postParams.putString("message", message+"\n\"App testing (no comments/likes)\"");
        postParams.putString("picture", path.getPath());

        Request.Callback callback= new Request.Callback() {

            public void onCompleted(Response response) {

                String postId = null;
                try 
                {
                    JSONObject graphResponse = response.getGraphObject().getInnerJSONObject();
                    postId = graphResponse.getString("id");
                } catch (JSONException e) {
                    Log.i(TAG,"JSON error "+ e.getMessage());
                }

                FacebookRequestError error = response.getError();

                if (error != null) 
                    Toast.makeText(getBaseContext(), error.getErrorMessage(),Toast.LENGTH_SHORT).show();
                else
                    Toast.makeText(getBaseContext(),  postId,  Toast.LENGTH_LONG).show();         

            }
        };

        Request request = new Request(session, "me/feed", postParams, HttpMethod.POST, callback);

        RequestAsyncTask task = new RequestAsyncTask(request);
        task.execute();
    } 
```

// 这就是我试图从可绘制文件夹中获取图标的方式 **Uri path = Uri.parse("android.resource://"+s+"/"+R.drawable.app_icon);**

回调获取此结果**{Response: responseCode: 400, graphObject: null, error: {HttpStatus: 400, errorCode: 100, errorType: OAuthException, errorMessage: (#100) 图片 URL 格式不正确}, isFromCache:false}**

我做错了什么？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T17:12:34.727

“图片”值必须是 URL。它不能是二进制数据。

# c# - 无法使用用于 windows8 的 visualstudio 2012 c# express 中不支持的 copyfromscreen 截屏

> ID：15216420
> 
> 赞同：-3
> 
> 时间：2013-03-05T05:22:44.470
> 
> 标签：c#, windows-8, microsoft-metro, screenshot

我想在visual studio 2012 express中使用c#为windows8截屏。windows8不支持Api copyfromscreen。有没有其他方法可以使用c#为windows8以编程方式截屏。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:51:47.533

简短的回答是：这是不可能的。

更具体地说，微软特别限制了 Metro 应用程序对自身或其他应用程序进行屏幕截图的能力。桌面应用程序仍然可以访问各种截屏方法，但 Metro 应用程序可能不行。这是设计使然，显然不可能改变。

有关这方面的更多信息，[请参阅 MSDN 论坛上的这篇文章](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/63dd9596-bf94-440b-847a-961cbf036e7b/)。（链接自 Stack Overflow 问题[How to capture the screen in a Metro C# app](https://stackoverflow.com/questions/11779095/how-to-capture-the-screen-in-a-metro-c-sharp-app) as described by Olav's comment）

# android - 处理相同类型的许多广播接收器？

> ID：15216422
> 
> 赞同：0
> 
> 时间：2013-03-05T05:22:52.343
> 
> 标签：android, broadcastreceiver, android-broadcast

我正在开发一个应用程序，它使用户能够注册许多自动服务，如自动短信回复和对蓝牙更改进行操作等。现在用户可以设置许多自动回复规则。我已将这些规则与条件一起保存在数据库中。例如，如果一条短信来自 123，它会回复一条消息“你好”，如果一条短信来自 456，它会回复一条“我很好”。现在的问题是我在数据库中保存了规则，我希望我的广播接收器可以告诉我正在触发哪个规则？问题是。是否可以为每个规则注册多个接收器，可以是 10、15 或 50？有没有办法我可以在注册时向每个接收者传递一个数字“ruleId”，以便在接收到它时可以给我那个 id，这样我就可以只为那个特定的规则行事？

请帮助我找到解决方案或解决此问题的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T11:38:35.570

Hey i also has the same requirement. I need to respond when any push notification is received in different activities based on the current active activity.

[dealing with received gcm push notification in different activities?](https://stackoverflow.com/questions/15198458/dealing-with-received-gcm-push-notification-in-different-activities)

# python - Python、循环依赖和单例

> ID：15216424
> 
> 赞同：1
> 
> 时间：2013-03-05T05:22:56.080
> 
> 标签：python, import, singleton, circular-dependency, kivy

我在这里给自己挖了一个大坑。

我正在 PyDev 中开发 Python/Kivy 应用程序。

该应用程序运行在许多系统（大约 10 个）上，所以我将它们塞进了一个引擎来处理所有事情。

为了便于访问，我通过（最糟糕的）单例来获取引擎

主文件

```
#main.py
from code import engine

class MyApp(App):
    def build(self):
        engine.GetInstance().Initialize()

if __name__ == '__main__':
    MyApp().run() 
```

引擎.py

```
#engine.py
from code import system1
from code import system2

gEngineInstance = None
def GetInstance():
    global gEngineInstance
    if (gEngineInstance == None):
        gEngineInstance = Engine()
    return gEngineInstance

class Engine():
    mSystem1 = None
    mSystem2 = None

    def Initialize(self):
        self.mSystem1 = system1.System1()
        self.mSystem2 = system2.System2()
    # Omitted 
```

不幸的是，这导致了一些令人讨厌的循环依赖。

Main 必须创建引擎，并了解它，它运行引擎导入，运行系统导入。问题：系统导入然后导入引擎，循环引用。

系统1.py

```
#system1.py
from code import engine

class System1():
    def SomeMethod(self):
        engine.GetInstance().mSystem2.DoThings() 
```

你得到图片。我暂时绕过了这个，到处都是这个可怕的代码：

系统1.py

```
#system1.py

class System1():
    def SomeMethod(self):
        from code import engine
        engine.GetInstance().mSystem2.DoThings() 
```

这会阻止导入直到该行发生，这很好，但看起来不对，感觉就像我做错了事。

我很想将 Engine 作为每个系统构造函数的引用传递，但这有点重构，我想知道将来是否有更体面的方法来解决这种单例/循环引用问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:29:21.967

有一个“注册”机制怎么样，每个模块使用一些模块级代码`system`向类“注册”自己：`Engine`

*引擎.py*

```
class Engine():
    @classmethod
    def register(cls, type):
        ... 
```

*系统1.py*

```
from engine import Engine

class System1():
    ...

Engine.register(System1) 
```

这样，`Engine`就不必直接知道插入了什么。

# java - JUnit 测试异常

> ID：15216438
> 
> 赞同：88
> 
> 时间：2013-03-05T05:24:24.787
> 
> 标签：java, junit

我对Java真的很陌生。

我在构造函数上运行一些 JUnit 测试。构造函数是这样的，如果它的参数之一被赋予 null 或空字符串，它应该抛出异常。

当我在 JUnit 中使用 null 或空字符串参数测试此构造函数时，我得到一个红色条，尽管我几乎 100% 确定构造函数方法在将此类参数传递给它时确实会引发异常。

如果该方法以应有的方式抛出异常，JUnit 中不应该有一个绿色条吗？还是当异常抛出按预期方式工作时，您应该得到一个红色条？

* * *

## 回答 #1

> 赞同：130
> 
> 时间：2013-03-05T05:27:15.400

```
@Test(expected = Exception.class) 
```

告诉 Junit 异常是预期的结果，因此当抛出异常时测试将通过（标记为绿色）。

为了

```
@Test 
```

如果抛出异常，Junit 会将测试视为失败，**前提是它是未经检查的异常**。如果检查了异常，它将无法编译，您将需要使用其他方法。此[链接](http://www.vogella.com/articles/JUnit/article.html#juniteclipse_test)可能会有所帮助。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-03-05T05:28:43.337

你确定你告诉它期待异常吗？

对于较新的junit（> = 4.7），您可以使用类似（从[这里](https://stackoverflow.com/questions/4489801/junit-test-analysing-expected-exceptions)）

```
@Rule
public ExpectedException exception = ExpectedException.none();

@Test
public void testRodneCisloRok(){
    exception.expect(IllegalArgumentException.class);
    exception.expectMessage("error1");
    new RodneCislo("891415",dopocitej("891415"));
} 
```

对于较旧的junit，这是：

```
@Test(expected = ArithmeticException.class)  
public void divisionWithException() {  
  int i = 1/0;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T05:34:49.437

如果您的构造函数与此类似：

```
public Example(String example) {
    if (example == null) {
        throw new NullPointerException();
    }
    //do fun things with valid example here
} 
```

然后，当您运行此 JUnit 测试时，您将看到一个绿色条：

```
@Test(expected = NullPointerException.class)
public void constructorShouldThrowNullPointerException() {
    Example example = new Example(null);
} 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-20T19:35:07.107

使用 ExpectedException Rule（4.7 版）的一个优点是您可以测试异常消息而不仅仅是预期的异常。

并且使用 Matchers，您可以测试您感兴趣的消息部分：

```
exception.expectMessage(containsString("income: -1000.0")); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2014-06-18T07:42:04.357

尽管[ExpectedException 规则](http://junit-team.github.io/junit/javadoc/4.10/org/junit/rules/ExpectedException.html)`@Test(expected = MyException.class)`是非常好的选择，但在某些情况下，JUnit3 风格的异常捕获仍然是最好的方法：

```
@Test public void yourTest() {
  try {
    systemUnderTest.doStuff();
    fail("MyException expected.");
  } catch (MyException expected) {

    // Though the ExpectedException rule lets you write matchers about
    // exceptions, it is sometimes useful to inspect the object directly.

    assertEquals(1301, expected.getMyErrorCode());
  }

  // In both @Test(expected=...) and ExpectedException code, the
  // exception-throwing line will be the last executed line, because Java will
  // still traverse the call stack until it reaches a try block--which will be
  // inside the JUnit framework in those cases. The only way to prevent this
  // behavior is to use your own try block.

  // This is especially useful to test the state of the system after the
  // exception is caught.

  assertTrue(systemUnderTest.isInErrorState());
} 
```

另一个声称在这里提供帮助的库是[catch-exception](https://code.google.com/p/catch-exception/)；然而，截至 2014 年 5 月，该项目似乎处于维护模式（被 Java 8 淘汰），并且很像 Mockito 捕获异常只能操作非`final`方法。

# openssl - CSR 是否需要使用匹配的私钥进行签名？

> ID：15216440
> 
> 赞同：0
> 
> 时间：2013-03-05T05:24:35.750
> 
> 标签：openssl, rsa, csr

使用 OpenSSL 生成 CSR 时，您有两种选择：1) 在生成 CSR 时生成私钥 2) 使用私钥派生公钥并使用公钥创建 CSR

CSR 是否需要使用匹配的私钥签名以供 CA 验证？

假设，如果我有两个密钥对（PubKey1、PrivKey1、PubKey2、PrivKey2）。我要做的第一件事是将 PrivKey1 移动到另一个地方。有没有办法可以使用 PubKey1 来制作 CSR（无法访问 PrivKey1），但使用 PrivKey2 对其进行签名以保持完整性？

有人可以解释为什么这种情况不适用于 CA 吗？

我一直在谷歌搜索一堆，可用的文档没有详细说明私钥在创建 CSR 中的作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:15:33.020

> CSR 是否需要使用匹配的私钥签名以供 CA 验证？

是的。PKCS #10 证书请求始终使用与公钥匹配的私钥进行签名。

> 有没有办法可以使用 PubKey1 来制作 CSR（无法访问 PrivKey1），但使用 PrivKey2 对其进行签名以保持完整性？

不可以。私钥签署 CSR 的原因是向 CA 证明您拥有与公钥对应的私钥的所有权。如果您使用不同的私钥签名，CA 将拒绝您的请求无效。

# google-chrome - 自动启用 chrome 扩展安装

> ID：15216441
> 
> 赞同：1
> 
> 时间：2013-03-05T05:24:38.560
> 
> 标签：google-chrome, google-chrome-extension

我正在使用 Chrome 25.0.1364.152 m 并开发了一个 Chrome 扩展程序。我想将它安装为外部扩展，我成功了。唯一的问题是我必须手动启用这个扩展。这意味着我必须为每个用户配置文件启用它。（我的机器上有很多 Chrome 用户配置文件）有没有办法自动启用这项工作（通过偏好或其他方式）？

# android - 在不同的 AVD 上加载 html 文件？

> ID：15216442
> 
> 赞同：0
> 
> 时间：2013-03-05T05:24:38.990
> 
> 标签：android, html, webview

我只是想知道为什么内部存储的 html 文件在不同的 API 上表现不同。像 Galaxy Nexus AVD 一样，它包装了 html 页面，而在 Nexus S 上，只有文本显示在屏幕的 2/3 处。

```
 myWebView.setInitialScale(1); 
  myWebView.getSettings().setLoadWithOverviewMode(true);
  myWebView.getSettings().setUseWideViewPort(true);
  myWebView.setWebViewClient(new WebViewClient());
  myWebView.loadUrl("file:///android_asset/FE/index.html"); 
```

有什么我可以添加/删除以使其 API 独立并适合所有 AVD 的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:14:33.810

请加

```
 myWebView.getSettings().setJavascriptenabled(true);
   myWebView.getSettings().setpluginstate(PLUGINS.ON); 
```

# python - 痛饮：如何将 void* 传递给泛型函数

> ID：15216447
> 
> 赞同：0
> 
> 时间：2013-03-05T05:24:55.993
> 
> 标签：python, pointers, interface, swig

我有一个场景，我需要通过基于 SWIG（1.3 版）实现的 C++ <-> Python 接口传递不透明的 void* 指针。我能够在这样的常规函数​​中返回并接受 void* ：

```
 void* foo();
 void goo( void* ); 
```

当我尝试使用泛型函数做同样的事情时，问题就开始了（这是我真正需要做的）。我能够处理上面的“foo”场景，函数基本上是这样的（从 SWIG 本身为上面的函数 foo 生成的代码中窃取）：

```
PyObject*
foo(...)
{
    if( need to return void* )
        return SWIG_NewPointerObj(SWIG_as_voidptr(ptr), SWIGTYPE_p_void, 0 |  0 );
} 
```

我不相信这是最好的方法，但它确实有效。“goo”场景要麻烦得多。在这里，我需要处理一些通用输入，而我可以按照 SWIG 本身为上面的函数 goo 生成的代码中的示例实现转换逻辑：

```
void
goo( PyObject* o )
{
    ...
    if( o is actually void* ) {   <==== <1>
        void* ptr;
        int res = SWIG_ConvertPtr( o, SWIG_as_voidptrptr(&ptr), 0, 0);

        if( SWIG_IsOK(res) ) do_goo( ptr );
    }
    ...
} 
```

我没有办法在 <1> 行中实现条件。而对于其他类型，我可以使用以下函数：PyInt_Check、PyString_Check 等，对于 void*，我没有这样做的选项。在 Python 方面，它由 PySwigObject 类型的对象表示，虽然它肯定知道它包装了 void*（如果我打印值，我可以看到它）我不知道如何从 PyObject* 访问这些信息。

我将不胜感激任何帮助找出解决此问题的任何方法。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:15:06.580

我是否认为您本质上想要某种方法来测试传入的 python 对象是否为“void *”？大概这与测试它是否是指向任何东西的指针相同？

如果是这样，那么使用 boost::shared_ptr （或其他指针容器）来保存您的通用对象怎么样？不过，这将需要一些 C++ 代码重写，因此可能不可行。

# c - 如何释放 Xlib 游标？XFreeCursor 没有效果

> ID：15216450
> 
> 赞同：2
> 
> 时间：2013-03-05T05:25:22.143
> 
> 标签：c, free, xlib

使用[XCreateFontCursor()](http://www.x.org/releases/X11R7.7/doc/libX11/libX11/libX11.html#XCreateFontCursor)并通过[XFreeCursor](http://www.x.org/releases/X11R7.7/doc/libX11/libX11/libX11.html#XFreeCursor) () 释放它没有效果。我一直在使用 Valgrind 退出时使用内存。

有没有办法解决这个问题？

据我所知，在[XUndefineCursor](http://www.x.org/releases/X11R7.7/doc/libX11/libX11/libX11.html#XUndefineCursor)之后没有其他资源引用它，也没有在未使用的游标上释放后引用它。

示例代码：

```
#include <stdio.h>
#include <unistd.h>

#include <X11/Xlib.h>
#include <X11/cursorfont.h>

int main(int argc, char *argv[])
{
    int i;
    Display *dpy;
    int scr;
    Window win = 0;
    Cursor curs = 0;

    if(!(dpy = XOpenDisplay(NULL))) {
        fprintf(stderr,
            "Unable to open display.\n"
        );
        return 1;
    }

    scr = DefaultScreen(dpy);

    for (i = 1; i < argc; ++i) {
        switch (argv[i][0]) {
        case 'w':
            win = XCreateSimpleWindow(
                dpy,
                XRootWindow(dpy, scr),
                200, 200,
                300, 200,
                2,
                XBlackPixel(dpy, scr),
                XWhitePixel(dpy, scr)
            );
            XMapWindow(dpy, win);
            XFlush(dpy);
            break;
        case 'c':
            fprintf(stdout, "Creating cursor.\n");
            curs = XCreateFontCursor(dpy, XC_diamond_cross);
            if (win)
                XDefineCursor(dpy, win, curs);
            break;
        case 'f':
            if (curs) {
                fprintf(stdout, "Freeing cursor.\n");
                if (win)
                    XUndefineCursor(dpy, win);
                XFreeCursor(dpy, curs);
            } else
                fprintf(stderr, "No cursor to free.\n");
            break;
        case 's':
            fprintf(stdout, "Sleep 1 second.\n");
            sleep(1);
            break;
        case 'u':
            fprintf(stdout, "Flushing display.\n");
            XFlush(dpy);
            break;
        }
    }

    fprintf(stdout, "Close and free display.\n");
    XCloseDisplay(dpy);

    return 0;
} 
```

编译：

```
gcc -Wall -Wextra -pedantic -std=c89 -o freecursor freecursor.c -lX11 
```

跑：

```
# Test without cursor:
valgrind ./freecursor s u s
  in use at exit: 0 bytes in 0 blocks
  total heap usage: 55 allocs, 55 frees, 47,438 bytes allocated

# Test with cursor:
valgrind ./freecursor c u s f u
  in use at exit: 21,680 bytes in 298 blocks
  total heap usage: 698 allocs, 400 frees, 99,849 bytes allocated

# Test with cursor and window:
valgrind ./freecursor w c u s f u s
  in use at exit: 21,680 bytes in 298 blocks
  total heap usage: 698 allocs, 400 frees, 99,849 bytes allocated

# Test with cursor and window + no free of cursor:
valgrind ./freecursor w s c u s
  in use at exit: 21,680 bytes in 298 blocks
  total heap usage: 698 allocs, 400 frees, 99,849 bytes allocated 
```

* * *

编辑：似乎已经完成了一些事情。试图创建 15 个不同的游标并且没有释放它们中的任何一个，并且 Valgrind 报告相同数量的字节*“在退出时使用”*，就好像只创建了一个一样。即便如此，它也`XCreateFontCursor`有这种效果。

# objective-c - 如何从 OS X 二进制文件中去除 Objective-C 符号？

> ID：15216453
> 
> 赞同：12
> 
> 时间：2013-03-05T05:25:33.063
> 
> 标签：objective-c, cocoa, audiounit, vst

好的，我知道还有其他帖子关于您实际上不能从**OS X**二进制文件中删除 Objective-C 符号，因为它们是 Obj-C 工作所必需的，但我的情况有点不同。

我有一个二进制文件，它是一个捆绑包。它旨在用作 VST 插件或 AudioUnit 插件。这个想法是二进制文件包含这两种格式的所有入口点，您只需编译一次，然后将一个副本命名为“ **.vst** ”用于 VST 版本， “. **component** ”用于AU 版本。 **（顺便说一句，这是使用 JUCE 框架。）**

问题是对于 AU 端，您必须导出一个 Obj-C 类来创建 Cocoa`UI`视图。在 VST 方面，永远不会使用此类。但是如果你有一个像 Ableton Live 这样的主机，它允许你同时加载同一个插件的 AU 和 VST 版本，现在我们会遇到典型的 Obj-C 命名空间冲突问题。

在 VST 方面，那个特定的 Obj-C 类永远不会被使用。所以我想做的是使用“strip”从生成的二进制文件中剥离那些 Obj-C 类。这仍然保持了只为两种格式编译一次的优势。

无论如何，我已经尝试使用`"strip -R stripfile.txt <path to binary>"`，其中 stripfile.txt 包含我想要剥离的符号，但它总是无法说在二进制文件中找不到符号。我已经尝试修改条带文件中的名称，但这没有帮助（或者我做错了）。

**以下是我要剥离的相关符号，由“nm -m”输出：**

```
000000000003bb00 (__TEXT,__text) non-external -[JuceDemoProjectAU description]
000000000003bb60 (__TEXT,__text) non-external -[JuceDemoProjectAU interfaceVersion]
000000000003ba00 (__TEXT,__text) non-external -[JuceDemoProjectAU uiViewForAudioUnit:withSize:]
0000000000b02398 (__DATA,__objc_data) external _OBJC_CLASS_$_JuceDemoProjectAU
0000000000b023c0 (__DATA,__objc_data) external _OBJC_METACLASS_$_JuceDemoProjectAU 
```

有任何想法吗？

顺便说一句，我随后能够动态注册有问题的类（使用唯一的名称），这也解决了这个问题。但是，如果我可以进行剥离工作，我可能会为现场已经存在的二进制文件部署一个解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-20T13:24:22.180

您不能只是简单地从二进制文件中剥离一个类。但是，您可以做的是欺骗 Objective-C 运行时，使其相信您的插件不包含任何 Objective-C 代码。只需更改`__objc_imageinfo`为`__objc_imageinfX`例如在您的 VST 插件二进制文件中。您可以使用 perl 轻松完成：

```
perl -pi -e 's/__objc_imageinfo/__objc_imageinfX/g' <path to binary> 
```

修补 VST 插件后，将绕过所有 Objective-C 初始化，您将不会看到此错误消息：`Class JuceDemoProjectAU is implemented in both …/VSTPlugin and …/AUPlugin. One of the two will be used. Which one is undefined.`

当心，你真的不应该使用这个技巧！您的问题的适当解决方案是编译两个不同版本的插件或按照其他人的建议动态注册类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-18T20:02:06.197

去年在 coreaudio-list 上有一个类似的主题：[Collision between Cocoa classes for AU and VST plugins](http://lists.apple.com/archives/coreaudio-api/2012/Sep/msg00016.html)。

提供的解决方案是[动态注册类](http://lists.apple.com/archives/coreaudio-api/2012/Sep/msg00066.html)，这就是您所说的您已经在工作的内容。如果有办法像你想要的那样去除符号，我相信这些人会知道的。

# jquery - 在 jQuery 中有没有更好的方法来做到这一点？

> ID：15216456
> 
> 赞同：0
> 
> 时间：2013-03-05T05:25:39.943
> 
> 标签：jquery, coffeescript

```
 $(".exercise-name").click (e) ->
    e.preventDefault()
    $(this).parent().siblings(".exercise-details").slideToggle('fast') 
```

基本上是以下结构

```
.exercise
  .exercise-header
    .exercise-name
  .exercise-details 
```

有没有办法在不必遍历父母和兄弟姐妹的情况下获得锻炼细节。某种捷径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:31:59.997

可能是这样的：

```
$(".exercise-header, .exercise-name").click(function(e){
  e.preventDefault()
  $(this).siblings(".exercise-details").slideToggle('fast');
}); 
```

或这个：

```
$(".exercise-name").click(function(e){
  e.preventDefault()
  $('.exercise').find(".exercise-details").slideToggle('fast');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:36:47.080

你可以用`next()`..

```
 $(this).parent().next().slideToggle('fast'); 
```

如果是下一个直系父母兄弟姐妹……但是我认为唯一的方法是先去找它的父母……

# php - 在网页中显示网页并绕过跨域框架？

> ID：15216459
> 
> 赞同：0
> 
> 时间：2013-03-05T05:25:53.517
> 
> 标签：php, javascript, jquery, html

有没有办法绕过阻止跨域框架并在 HTML 文档中显示网页的块？使用任何技术——js、JQuery、服务器端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:31:34.150

我不知道你为什么想做这样的事情，但你可以看看[PHP Curl](http://php.net/manual/en/book.curl.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:50:04.720

如果他们的服务器阻止跨域框架，它就会被阻止并且没有好的解决方法。

但是...回到简单的 HTML，您总是可以使用`iframe`.

# php - SugerCRM 中的多个文件上传

> ID：15216472
> 
> 赞同：0
> 
> 时间：2013-03-05T05:27:16.900
> 
> 标签：php, sugarcrm

我是 SugerCRM 的新手。请告诉我如何在 SugerCRM 中上传多个文件？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:35:05.813

如果您只想要一个简单的上传字段，则文档模块可能会过大。编写解决方案是可能的，但如果您想正确执行（支持多个文件、模块等），可能需要相当长的时间。有这个解决方案可以让您根据需要添加尽可能多的文件字段：[https ://www.sugaroutfitters.com/addons/file-upload-module](https://www.sugaroutfitters.com/addons/file-upload-module)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:36:06.910

在 PHP 和 HTML 中有很多方法可以上传文件。但是基本的文件上传过程是由 PHP 中的三种类型创建的，它们是：

# 通过表格

您必须在表单中创建文件上传的多个文件。上传的每个文件都将由程序单独处理。

# 目录选择

第二种流行的方法是目录上传。选择目录，将目录中的所有文件一一上传。

# 邮编上传

第三是将所有文件压缩为单个文件并上传，然后在解压缩并读取每个文件后进行实际处理。

# SUGUR 客户关系管理

该文件应类似于：

```
<?php
if(!defined('sugarEntry') || !sugarEntry) die('Not A Valid Entry Point');

require_once('include/formbase.php');
require_once('modules/[MODULE TYPE]/config.php');
require_once('include/SugarFields/SugarFieldHandler.php');

$focus = new [MODULE TYPE]();
$focus = populateFromPost('', $focus);

if(!$focus->ACLAccess('Save')){
    ACLController::displayNoAccess(true);
    sugar_cleanup(true);
}

//SOME CODE TO CONVERT TO BINARY AND THEN STORE VALUE INTO FIELD NAME USING
// $focus->[fieldName] = outputFromBinaryConversion($_POST['theFileField']);
// That would store the blob into the existing _cstm table
// --OR, you would get the id of the saved module using $return_id = $focus->id;
// and use the id to link to the blob stored in another (unsupported) table.

$focus->save(); 
```

我希望这能澄清你的方向，但我真的建议你考虑使用现有的文档处理类，因为它会更干净、更快地实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-12T07:13:32.327

这是一个很长的过程，简要介绍一下

1.  通过自定义代码添加 JavaScript 的多文件上传功能。
2.  创建一个自定义模块，它将与您当前的模块和新模块建立关系（这将保存所有上传的文档）。
3.  创建逻辑挂钩，将上传的文件保存在上传目录和这些模块之间的关系。

详细帖子参考

[http://www.technologyworkshops.net/php/custom-multiple-file-upload-sugar-crm-t129.html](http://www.technologyworkshops.net/php/custom-multiple-file-upload-sugar-crm-t129.html)

我可以帮助您编辑、删除当前文件、列表和子面板视图。如果你愿意，我可以在这里分享。

# spring - JBoss 部署信息

> ID：15216476
> 
> 赞同：1
> 
> 时间：2013-03-05T05:27:43.840
> 
> 标签：spring, deployment, jboss, config

更多标准练习题：

1.  将应用程序部署为 EAR 与 WAR 有什么区别吗？你如何决定？（我知道 WAR 只是一个 Web 应用程序，可能有也可能没有 Java EE 特性，比如消息传递）
2.  假设我有一个带有 Hibernate (MySQL DB) 的 Spring MVC 应用程序堆栈，应该将其部署为 War 还是 EAR？
3.  如果我不使用 EJB，我们什么时候需要担心 JBoss 部署描述符。（只是 Spring MVC）。假设我也有 JMS。我们是否需要配置/更新/创建任何其他与 JBoss 相关的配置文件？
4.  当我们打包应用程序 EAR/WAR 时，它包含了我们应用程序所需的一切。是否存在我们需要在指定的 JBoss 文件夹中将此存档之外的一些配置/xml 文件保留的情况？
5.  直接从 Eclipse 部署还是使用 Ant 等更好？优势/劣势？

显然，我是新手:-)。试图理解这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T20:32:39.263

1.  在这里检查：[.war 与 .ear 文件](https://stackoverflow.com/questions/1594667/war-vs-ear-file)
2.  如果您阅读前面的回复，您会猜到它是“WAR”。
3.  管理JBoss的模块需要部署描述符，如果你没有任何冲突或不需要任何调整，你就不需要任何部署描述符。
4.  如果您想向 JBoss 添加模块或配置数据源等，您可能需要使用一些 JBoss 文件。阅读 JBoss 文档以获取更多信息。
5.  您可以在开发阶段从 eclipse 进行部署，但是由于您的其他环境（资格、生产、测试​​等）应该与您的开发环境分开，并且它们不会安装任何 eclipse，您应该习惯于管理从命令行你的服务器并将你的战争放在正确的目录中。

这是一个简短的答案，但我希望它会有所帮助。

阅读 JBoss 文档以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T20:59:05.150

1\. 这并不总是一个容易的决定，但对于初学者和小型项目，我会说这几乎总是一场战争。使用 EAR 的原因主要是为了将业务层与 UI/Web 层隔离开来。有关更多详细信息，请参阅此问题：[如何隔离 Java EE 应用程序的逻辑层](https://stackoverflow.com/questions/13962293/how-can-one-isolate-logical-layers-of-an-java-ee-application)

2\. 我可能弄错了，但我认为 Spring 人通常更喜欢 WAR。

3\. JBoss（供应商）特定的部署描述符大多需要配置所谓的“被管理对象”和安全性。有时它们可​​用于 Java EE 规范未涵盖的额外功能（例如，为 WAR 设置 Web 根目录）。受管对象通常是数据源（与数据库的连接）和 JMS 目标（队列和主题）。

在传统的 Java EE 方法中，这些必须尽可能远离代码创建，这通常意味着系统管理员将使用某种 GUI 或管理控制台在目标 AS 内创建它们。在此设置中，作为开发人员的您将抛出一个带有“未解决的依赖关系”的 WAR，然后系统管理员（或“部署者”）将花费数天时间弄清楚这些未解决的依赖关系应该是什么。

如果开发人员和部署人员之间的沟通相对良好，那么 WAR 或 EAR 可能会连同一个自述文件一起被扔掉，这至少可以让您了解需要哪些资源。根据组织的不同，开发团队可能无法获得有关如何解决这些“未解决的依赖项”的任何访问或反馈。例如，可能已创建最多 5 个连接的数据源，但如果某些代码确实说 10 个并行查询，这可能是不够的。如果开发团队不知道确切的数据源配置，某些类别的运行时问题和性能问题可能相对难以解决。

为了缓解这些问题，对于某些工件，一些供应商提供开发人员创建那些“未解决的依赖项”，而不是使用专有的部署描述符，然后将其嵌入到 WAR 或 EAR 中。对于简单的本地 JMS 目标，在大多数情况下，这就是它的结尾，但对于数据源，还有更​​多内容。也就是说，必须有一种机制可以在不同阶段（例如 Dev、Beta、QA、Production 等）的数据源之间切换。此外，在源代码中包含生产密码并不是一个好主意。

如果您想在本地试用一个简单的应用程序，则无需担心阶段和生产密码。如果您为（大型）公司部署它。

在 Java EE 6 中，您可以使用标准描述符（web.xml、ejb-jar.xml 或 application.xml）定义数据源，而在 Java EE 7 中，您可以对 JMS 目标执行相同的操作。没有标准的方法来配置基于阶段的那些，但是 Java EE 8 将解决这个问题有一线希望（参见例如[JAVAEE_SPEC-19](http://java.net/jira/browse/JAVAEE_SPEC-19)）。供应商对这些标准化方法并不普遍满意，他们的主要文档几乎总是会扩展地告诉你如何使用他们的专有工具和描述符来做这些事情，如果你幸运的话，一个小笔记告诉你有一个标准化的方法（和然后有时会淡化这一点，或者说不建议在生产中使用它来吓唬你）。

4\. 主要看3的答案。解决如何在阶段之间切换并将生产密码排除在 WAR/EAR 之外的问题的一种选择是在 AS 内部（在您的情况下是在 JBoss 内部）拥有所述数据源的完整定义。在此设置中，每个 AS 安装都与特定服务器相关联。如果需要更新、删除或添加新数据源，您必须与您的运营团队（如果有）进行沟通。如前所述，根据您的组织，这可能是微不足道的，实际上是不可能的。

5\. 开发时，您最常使用 IDE 进行部署。对于生产，你永远不会这样做。对于生产，您可以使用 Ant（或 Maven）构建并通过诸如 Jenkins 或 Chef 之类的东西进行部署。

# ruby-on-rails - 覆盖 Rails 中的默认路由

> ID：15216477
> 
> 赞同：0
> 
> 时间：2013-03-05T05:27:48.597
> 
> 标签：ruby-on-rails, rails-routing

我们可以覆盖 Rails 提供的资源的默认路由吗？在我的应用程序中，我希望 new.html.erb 只能通过 put 方法访问。但是，通过定义`map.resources :model`将使用 get 方法访问 new.html.erb，我想改变它。我可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:59:54.213

如果你想为你的模型生成默认路由，没有新的动作，你可以在你的路由文件中使用这个指令

```
resources :model, except: :new 
```

在同一个文件中，您将为新操作添加非托管（即“手动”）路线

```
put "articles/new" => "articles#new" 
```

注意：您也可以使用此语法`match "articles/new" => "articles#new", via: :put`，以便将来轻松添加更多方法

更多信息： http: [//guides.rubyonrails.org/routing.html](http://guides.rubyonrails.org/routing.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:43:11.010

一种方法是不在 routes.rb 中将模型声明为资源，并手动设置所需的路由。

例如，如果您的模型是 Article，那么您可以在您的 routes.rb 中

```
put "articles/new" => "articles#new" 
```

这会将“articles/new”与新操作匹配，并将其限制为仅 PUT 方法。

# javascript - 如何从选定范围中删除所有节点

> ID：15216480
> 
> 赞同：6
> 
> 时间：2013-03-05T05:28:11.607
> 
> 标签：javascript, range, selection

例如，我有这样的文字：

```
Some test <span> in span1</span> sss <span>in span2</span> end of text. 
```

当我选择“在 spa 中的 span1 sss 中测试”时，我只想删除所选范围的父范围并创建包含我所选文本的新范围。

```
Some<span> test in span1 sss in spa</span>n2 end of text. 
```

我正在使用`window.getSelection()`，范围，节点

请帮忙！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T16:42:13.153

您可以使用从选择中获得的范围的`deleteContents()`,`toString()`和`insertNode()`方法来执行此操作。

以下内容适用于除 IE <= 8 以外的所有主要浏览器。对于这些浏览器，您需要采用不同的方法，如果您需要，我可以概述一下。

演示：http: [//jsfiddle.net/HUm2K/](http://jsfiddle.net/HUm2K/)

代码：

```
var sel = window.getSelection();
if (sel.rangeCount > 0) {
    var range = sel.getRangeAt(0);
    var newSpan = document.createElement("span");
    var selectedTextNode = document.createTextNode( range.toString() );
    newSpan.appendChild(selectedTextNode);
    range.deleteContents();
    range.insertNode(newSpan);
    range.selectNode(newSpan);
    sel.removeAllRanges();
    sel.addRange(range);
} 
```

# javascript - 在这种情况下，有什么办法可以消除对选择的关注

> ID：15216496
> 
> 赞同：1
> 
> 时间：2013-03-05T05:29:12.730
> 
> 标签：javascript, jquery, internet-explorer

在 IE 中，当您选择一个选项并且它成为选定选项时，蓝色突出显示将一直保持，直到您单击选择标记之外的其他位置。（在 Firefox 中不是这样）

所以我写了一个脚本，当 select 上有一个 change 事件时，它会从元素中移除焦点。

但是仍然存在一个小问题：如果我选择 Hello 然后再次选择 Hello 选项 - 焦点将保持不变并且蓝色突出显示。但是如果我选择你好然后世界选项 - 一切正常..所以当你点击一个选项来移除焦点时你会看到脚本。

然后我看到用户可以直接按回车而不点击选项 - 所以我写了回车案例

但是当我高兴的时候，我发现了一个问题。最后一种情况（我祈祷这是最后一种情况）与前一种情况几乎相同 - 您单击选择，当然您会看到所有选项，并且您会看到蓝色突出显示的选项是您想要的） - 但是这次你决定不按回车键来选择那个选项，而只是再次点击选择标签——所以在这种情况下，选项上没有点击事件，没有按回车键，也没有更改事件，高亮保持不变——是有什么办法可以解决

```
$('#select').change(function() {
    $(this).blur();
});

$('#select option').click(function(event) {
    $('#select').blur();
});

$('#select').keydown(function(event) {
    // Enter pressed
    if(event.keyCode == 13) {
        $('#select').blur();
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:53:42.970

虽然这是不好的做法，但试试这个

```
$('#select').mouseout(function(){$(this).blur();}) 
```

# android - Android多语言应用程序开发：如何从edittext中获取印地语字符或字符串？

> ID：15216502
> 
> 赞同：1
> 
> 时间：2013-03-05T05:29:35.567
> 
> 标签：android, hindi

我正在开发一个需要支持两种语言**Hindi/English**的 Android 应用程序。我能够将整个应用程序 UI 转换为印地语，但问题是我不知道如何从 edittext 中获取印地语字符或字符串。

因为我以一般方式获取数据：

```
String userName=_userEdt.getText().toString(); 
```

但是用户名字符串在印地语模式下不包含任何数据。如何从edittext中获取**हिन्दी**之类的单词。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T07:37:22.817

Download the hindi font “mangal.ttf” supported file and copy it in your font folder, which is created in assets folder. Try this way for implementing multilingual support in app development.

# jquery - 同时点击两个按钮

> ID：15216503
> 
> 赞同：0
> 
> 时间：2013-03-05T05:29:39.530
> 
> 标签：jquery

我有两个提交按钮

```
<input id="button1" value="Subscribe" type="submit" name="signUp">
<input id="button2" value="Subscribe" type="submit" name="signUp"> 
```

我想要的是当用户单击时`#button1`将`#button2`同时单击。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:31:29.043

试试下面的代码：

```
$("#button1").click(function(){
    $("#button2").trigger('click');

}) 
```

# php - 相当于 ODBC 中的 mysql_affected_rows

> ID：15216511
> 
> 赞同：1
> 
> 时间：2013-03-05T05:31:07.900
> 
> 标签：php, sql, odbc

我正在使用odbc连接与MS-SQL server 2008连接。现在我需要确认一个UPDATE命令是否正确执行到数据库中。通常我们使用mysql_affected_rows来识别受影响的行。现在得到的相应odbc函数是什么价值？我已经使用了“odbc_num_rows”，但它不能正常工作。有人可以建议吗？我的示例代码如下：

```
$update_query="UPDATE testtable SET  col1='$abc',col2='$def' WHERE id='$id'";                                   
odbc_exec($cn,$update_query);
$val= odbc_num_rows($cn);
echo "Val: ".$val;exit; 
if($val>0){
//Do someting
} 
```

这里的值被正确更新到数据库中。但我没有得到任何适当的确认。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T05:36:06.903

您必须将结果传递`odbc_exec`给`odbc_num_rows`；

```
$result = odbc_exec($cn,$update_query);
$val= odbc_num_rows($result); 
```

# ios - iOS 应用中的文件资源管理器

> ID：15216512
> 
> 赞同：0
> 
> 时间：2013-03-05T05:31:11.810
> 
> 标签：ios, objective-c

我正在 Xcode 4.2 上制作视频解码器应用程序。当我单击一个按钮时，我需要打开文件资源管理器，以便我可以选择适当的文件进行解码。

如何在我的应用程序中提供此文件资源管理器选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:36:16.603

iOS中没有文件资源管理器之类的东西。所以你不能浏览iOS中的文件。最多你可以访问相机胶卷。Apple 不允许访问其他内容，如歌曲、其他文件等

# php - 使用 php 合并音频和图像以创建视频

> ID：15216520
> 
> 赞同：1
> 
> 时间：2013-03-05T05:31:42.977
> 
> 标签：php

我想合并音频和图像以使用 PHP 创建视频。当我用谷歌搜索它时，它只显示 ffmpeg 终端命令。所以请协助解决我遇到的问题。

# php - 如何根据印度计数系统修改以下代码以将数值表示为单词值

> ID：15216527
> 
> 赞同：0
> 
> 时间：2013-03-05T05:32:58.527
> 
> 标签：php, algorithm

以下代码通过将数字分类为不同的情况并使用默认情况来查找基本单位和数字以及余数并递归调用以下函数将数字表示为单词，从而将数值表示为单词值。我想要实现的是将价值表达到印度计数系统中，而不是使用百万、十亿等。

我觉得如果默认修改这一行：`$baseUnit = pow(1000, floor(log($number, 1000)));` 正确然后我将能够解决问题。

任何帮助将不胜感激。谢谢。

```
function convert_number_to_words($number) {

    $hyphen      = '-';
    $conjunction = ' and ';
    $separator   = ', ';
    $negative    = 'negative ';
    $decimal     = ' point ';
    $dictionary  = array(
        0                   => 'zero',
        1                   => 'one',
        2                   => 'two',
        3                   => 'three',
        4                   => 'four',
        5                   => 'five',
        6                   => 'six',
        7                   => 'seven',
        8                   => 'eight',
        9                   => 'nine',
        10                  => 'ten',
        11                  => 'eleven',
        12                  => 'twelve',
        13                  => 'thirteen',
        14                  => 'fourteen',
        15                  => 'fifteen',
        16                  => 'sixteen',
        17                  => 'seventeen',
        18                  => 'eighteen',
        19                  => 'nineteen',
        20                  => 'twenty',
        30                  => 'thirty',
        40                  => 'fourty',
        50                  => 'fifty',
        60                  => 'sixty',
        70                  => 'seventy',
        80                  => 'eighty',
        90                  => 'ninety',
        100                 => 'hundred',
        1000                => 'thousand',
        //Instead of the following values I would like to have Indian counting system values
        /*
        1000000             => 'million',
        1000000000          => 'billion',
        1000000000000       => 'trillion',
        1000000000000000    => 'quadrillion',
        1000000000000000000 => 'quintillion'
       */
        100000   => 'lakhs',
        10000000 =>'crore',
        1000000000 =>'arab',
        100000000000  =>'kharab' 
    );

    if (!is_numeric($number)) {
        return false;
    }

    if (($number >= 0 && (int) $number < 0) || (int) $number < 0 - PHP_INT_MAX) {
        // overflow
        trigger_error(
            'convert_number_to_words only accepts numbers between -' . PHP_INT_MAX . ' and ' . PHP_INT_MAX,
            E_USER_WARNING
        );
        return false;
    }

    if ($number < 0) {
        return $negative . convert_number_to_words(abs($number));
    }

    $string = $fraction = null;

    if (strpos($number, '.') !== false) {
        list($number, $fraction) = explode('.', $number);
    }

    switch (true) {
        case $number < 21:
            $string = $dictionary[$number];
            break;
        case $number < 100:
            $tens   = ((int) ($number / 10)) * 10;
            $units  = $number % 10;
            $string = $dictionary[$tens];
            if ($units) {
                $string .= $hyphen . $dictionary[$units];
            }
            break;
        case $number < 1000:
            $hundreds  = $number / 100;
            $remainder = $number % 100;
            $string = $dictionary[$hundreds] . ' ' . $dictionary[100];
            if ($remainder) {
                $string .= $conjunction . convert_number_to_words($remainder);
            }
            break;
        default:
            $baseUnit = pow(1000, floor(log($number, 1000)));
            $numBaseUnits = (int) ($number / $baseUnit);
            $remainder = $number % $baseUnit;
            $string = convert_number_to_words($numBaseUnits) . ' ' . $dictionary[$baseUnit];
            if ($remainder) {
                $string .= $remainder < 100 ? $conjunction : $separator;
                $string .= convert_number_to_words($remainder);
            }
            break;
    }

    if (null !== $fraction && is_numeric($fraction)) {
        $string .= $decimal;
        $words = array();
        foreach (str_split((string) $fraction) as $number) {
            $words[] = $dictionary[$number];
        }
        $string .= implode(' ', $words);
    }

    return $string;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:57:00.347

为了公共利益，我想发布完整的解决方案。

下面的 PHP 函数为我们提供了一种将印度计数系统中表示的数字格式转换为单词格式的方法。

感谢 Patashu 和 rici 帮助我找到自己的出路：-

```
function convert_number_to_words($number) {
    $hyphen      = '-';
    $conjunction = ' and ';
    $separator   = ', ';
    $negative    = 'negative ';
    $decimal     = ' point ';
    $dictionary  = array(
        0                   => 'zero',
        1                   => 'one',
        2                   => 'two',
        3                   => 'three',
        4                   => 'four',
        5                   => 'five',
        6                   => 'six',
        7                   => 'seven',
        8                   => 'eight',
        9                   => 'nine',
        10                  => 'ten',
        11                  => 'eleven',
        12                  => 'twelve',
        13                  => 'thirteen',
        14                  => 'fourteen',
        15                  => 'fifteen',
        16                  => 'sixteen',
        17                  => 'seventeen',
        18                  => 'eighteen',
        19                  => 'nineteen',
        20                  => 'twenty',
        30                  => 'thirty',
        40                  => 'fourty',
        50                  => 'fifty',
        60                  => 'sixty',
        70                  => 'seventy',
        80                  => 'eighty',
        90                  => 'ninety',
        100                 => 'hundred',
        1000                => 'thousand',
        //Instead of the following values I would like to have Indian counting system values
        /*
        1000000             => 'million',
        1000000000          => 'billion',
        1000000000000       => 'trillion',
        1000000000000000    => 'quadrillion',
        1000000000000000000 => 'quintillion'
       */
        100000   => 'lakhs',
        10000000 =>'crore',
        1000000000 =>'arab',
        100000000000  =>'kharab' 
    );

    if (!is_numeric($number)) {
        return false;
    }

    if (($number >= 0 && (int) $number < 0) || (int) $number < 0 - PHP_INT_MAX) {
        // overflow
        trigger_error(
            'convert_number_to_words only accepts numbers between -' . PHP_INT_MAX . ' and ' . PHP_INT_MAX,
            E_USER_WARNING
        );
        return false;
    }

    if ($number < 0) {
        return $negative . convert_number_to_words(abs($number));
    }

    $string = $fraction = null;

    if (strpos($number, '.') !== false) {
        list($number, $fraction) = explode('.', $number);
    }

    switch (true) {
        case $number < 21:
            $string = $dictionary[$number];
            break;
        case $number < 100:
            $tens   = ((int) ($number / 10)) * 10;
            $units  = $number % 10;
            $string = $dictionary[$tens];
            if ($units) {
                $string .= $hyphen . $dictionary[$units];
            }
            break;
        case $number < 1000:
            $hundreds  = $number / 100;
            $remainder = $number % 100;
            $string = $dictionary[$hundreds] . ' ' . $dictionary[100];
            if ($remainder) {
                $string .= $conjunction . convert_number_to_words($remainder);
            }
            break;
        default:
            $baseUnit = 10 * pow(100, floor(log($number/10, 100)));// Thanks to rici and Patashu
            $numBaseUnits = (int) ($number / $baseUnit);
            $remainder = $number % $baseUnit;
            $string = convert_number_to_words($numBaseUnits) . ' ' . $dictionary[$baseUnit];
            if ($remainder) {
                $string .= $remainder < 100 ? $conjunction : $separator;
                $string .= convert_number_to_words($remainder);
            }
            break;
    }

    if (null !== $fraction && is_numeric($fraction)) {
        $string .= $decimal;
        $words = array();
        foreach (str_split((string) $fraction) as $number) {
            $words[] = $dictionary[$number];
        }
        $string .= implode(' ', $words);
    }

    return $string;
} 
```

# email - MIME：多部分中的多部分

> ID：15216529
> 
> 赞同：1
> 
> 时间：2013-03-05T05:33:07.840
> 
> 标签：email, mime-types, multipart

我正在为一个项目编写一个小邮件解析器并更好地理解邮件。

出现了一个关于 Multiparts 的问题。

当我有一个带有 Content-Type: multipart/alternative 或任何其他带有分隔符的 multipart 的邮件时，在该 multipart 中是否有可能是另一个 multipart（例如 multipart/mixed）或其他方式。那有什么分隔器，有自己的分隔器吗？

MIME-Type multipart/* 是一个平面结构（可以使用一个拆分分隔符解析）还是一棵树（每个拆分的部分可以再次拆分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T06:26:37.633

经过 3 个漫长的编程和密集测试之夜，我意识到 multipart/* 并不平坦。它是一个树形结构。例如，如果您有一个 html 和一个纯文本部分以及附件，则邮件是多部分/混合的，包含附件和一个多部分/替代部分。如果还有内联图像，则 HTML 部分可能是多部分/相关的，包含图像和 html。

# android-layout - 7 英寸平板电脑采用 10 英寸布局

> ID：15216532
> 
> 赞同：0
> 
> 时间：2013-03-05T05:33:21.383
> 
> 标签：android-layout

我遇到了设备选择错误布局的问题。我已经根据屏幕尺寸定义了我的布局，并将它们分组到以下 - layout-sw600dp、layout-sw720dp 和 layout-sw480dp。

我有两个用于 sw600dp 的 7" 平板电脑。

1- 三星 7 英寸 Galaxy 选项卡 - 此设备采用 layout-sw600dp 中定义的正确布局。

2- 另一个 7" 设备 [从中国经销商处订购]- 此设备采用 10" 布局。

当我使用[http://www.whatismyscreenresolution.com/](http://www.whatismyscreenresolution.com/)时，两个设备都给出 1024x600 。

为了检查我以编程方式检索了最小屏幕宽度和屏幕宽度 [getResources().getConfiguration().smallestScreenWidthDp 和 screenWidthDp]。在第二台设备上，我得到的值为 720 和 1024。

关于如何进一步确保我的第二台设备也采用 layout-sw600dp 下定义的布局的任何想法。

问候普拉迪普

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T12:08:22.600

此代码在该设备上返回什么？

```
 DisplayMetrics dm = new DisplayMetrics();
    getWindowManager().getDefaultDisplay().getMetrics(dm);
    String pxSize = dm.widthPixels + " x " + dm.heightPixels; 
```

它可能显示 720x1024。那是因为即使屏幕的物理尺寸为 600x1024 像素，您从这些方法中得到的也是制造商设置的值。这些设定值和实际值之间可能存在差异。

如果是这种情况，您无能为力。除了可能

```
 if ( "aTargetManufacturer".equals( android.os.Build.MANUFACTURER )  )
 {
     useAnotherLayout();
 } 
```

但这显然不是一个好习惯。

# batch-file - 如何从根文件夹创建批处理文件以在子文件夹中安装 bat 文件

> ID：15216534
> 
> 赞同：-4
> 
> 时间：2013-03-05T05:34:04.580
> 
> 标签：batch-file

我有三个子文件夹，每个子文件夹都包含不同的包，这三个包将通过每个文件夹中存在的三个不同的批处理文件安装。现在我需要从根文件夹创建一个批处理文件来安装这三个批处理文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T16:31:26.497

将以下内容放入根文件夹中的批处理文件中，将文件夹和批处理文件更改为您的文件夹和文件名：

```
call Folder1/install1.bat
call Folder2/install2.bat
call Folder3/install3.bat 
```

# javascript - 使用 Backbone.js 访问元素

> ID：15216536
> 
> 赞同：0
> 
> 时间：2013-03-05T05:34:19.760
> 
> 标签：javascript, backbone.js

如何从下面的 json 中访问名称并使用主干.js 查看它。

```
[
        {
            "name": "Sii",
            "eid": "E3",
            "subdomain": "PS"
        },

        {
            "name": "Shalini",
            "eid": "E8",
            "subdomain": "H"
        },
        {
            "name": "Priya",
            "eid": "E3",
            "subdomain": "HG"
        }
    ] 
```

我想通过使用 eid 来访问该名称。并在视图中呈现它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:51:43.753

转到 Backbonejs.org 并阅读那里的基本概念。一切都是用例子来解释的。

简述

*   您需要定义一个模型，其属性为 name,eid,subdomain 创建

*   包含该模型的集合和包含文件的 uri

*   json 在集合上调用 .fetch()

现在您可以遍历集合并在任何地方使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:53:24.860

这是一个很模糊的问题。您实际上已经问过如何实现主干模型和集合以供使用。

使用 eid 获取价值的一种方法是

```
var data = [
        {
            "name": "Sii",
            "eid": "E3",
            "subdomain": "PS"
        },

        {
            "name": "Shalini",
            "eid": "E8",
            "subdomain": "H"
        },
        {
            "name": "Priya",
            "eid": "E3",
            "subdomain": "HG"
        }
    ];
var coll = new Collection(data); 
```

通过 eid 获取名称：

```
model = coll.findWhere({'eid':"E8"});
var name = model.get('name'); 
```

# ios - 如何使用另一个 NSMutableArray 的值对一个 NSMutableArray 的值进行排序？

> ID：15216539
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:34:39.447
> 
> 标签：ios, sorting, nsmutablearray

我有一个`NSMutableArray *arr1`价值观：

```
{(B,abc) (E,pqr) (C,xyz)} 
```

还有`NSMutableArray *arr2`一个

`{(B) (C) (E)}`.

现在我想`arr1`使用`arr2`value 进行排序，这样`arr1`就变成了`{(B,abc) (C,xyz) (E,pqr)}`. 我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:47:17.237

因此，您似乎有一个数组和一个数组数组：

```
NSArray *sorter = @[@"B", @"C", @"E"];
NSMutableArray *sortee = [@[
    @[@"B", @"abc"],
    @[@"E", @"pqr"],
    @[@"C", @"xyz"]
] mutableCopy];

[sortee sortUsingComparator:^(id o1, id o2) {
    NSString *s1 = [o1 objectAtIndex:0];
    NSString *s2 = [o2 objectAtIndex:0];
    NSInteger idx1 = [sorter indexOfObject:s1];
    NSInteger idx2 = [sorter indexOfObject:s2];
    return idx1 - idx2;
}]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:25:39.440

试试这个，

```
 NSMutableArray *unsortedArray = [NSMutableArray arrayWithObjects:[NSArray arrayWithObjects:@"B",@"abc", nil],[NSArray arrayWithObjects:@"E",@"pqr", nil],[NSArray arrayWithObjects:@"C",@"xyz", nil],nil];
    NSArray *guideArray = [NSArray arrayWithObjects:@"B",@"C",@"E", nil];

    for(int i=0; i< [guideArray count];i++)
    {
        for(int j=0; j< [unsortedArray count];j++)
        {
            if([[unsortedArray objectAtIndex:j] containsObject:[guideArray objectAtIndex:i]])
            {
                [unsortedArray exchangeObjectAtIndex:j withObjectAtIndex:i];
                break;                
            }
        }
    }

    NSLog(@"%@",unsortedArray); 
```

我已经对此进行了测试并为我工作。希望这对您有所帮助。

# java - 为什么这段代码的输出是这样的？

> ID：15216543
> 
> 赞同：0
> 
> 时间：2013-03-05T05:34:55.460
> 
> 标签：java

```
class MainDemo{ 

     public static void main(String args[]){ 
        float arrayOne[] = {1, 2, 3, 4,5}; 
        for(int iIndex=0; iIndex<arrayOne.length; iIndex++) 
        { 
               arrayOne[iIndex] = iIndex; 
               iIndex=iIndex+1; 
         } 
         for(int iIndex=0; iIndex<arrayOne.length; iIndex++) 
         { 
               System.out.println(arrayOne[iIndex]); 
         } 
 } 
} 
```

为什么是输出？

```
0.0
2.0
2.0
4.0
4.0 
```

代替

```
0.0
1.0
2.0
3.0
4.0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T05:37:43.560

because youre only replacing indexes 0 2 and 4 in the original array and leaving 1 and 3 untouched (iIndex is incremented by 2 each loop iteration)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T05:39:46.233

因为增量已经完成了两次：

```
 for(int iIndex=0; iIndex<arrayOne.length; iIndex++)  
 /* Forloop itself increments iIndex*/ 
```

和

```
 iIndex=iIndex+1; 
 /*You are manually incrementing iIndex*/ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T05:54:59.077

伙计，因为当您开始第一个循环时，它会更改索引 0,2 和 4 的值，其先前的值分别为 1,3 和 5，并且对于这些索引，循环后的新值分别为 0,2 和 4，这就是您得到输出

```
0.0
2.0
2.0
4.0
4.0 
```

代替

```
1.0
2.0
3.0
4.0
5.0 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T05:37:27.097

Because you are updating only 0,2 and 4th index of array. As `iIndex` is updated twice once in loop in once if for statement
Original array

```
float arrayOne[] = {1, 2, 3, 4,5}; 
```

Updated array

```
 float arrayOne[] = {0, 2, 2, 4,4};
                       |_____|____|______ Are updated 
```

Remove

```
iIndex=iIndex+1; 
```

If you want to update every value.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T05:37:51.643

In your first loop:

```
for(int iIndex=0; iIndex<arrayOne.length; iIndex++) //<-- here
{ 
      arrayOne[iIndex] = iIndex; 
      iIndex=iIndex+1; //<-- here - get rid of this
} 
```

You add to `iIndex` twice. I've made notes above.

Get rid of the second one as you already increment `iIndex` as part of your for loop definition.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-05T05:38:52.170

Beacuse of this line `iIndex=iIndex+1;` .

```
for(int iIndex=0; iIndex<arrayOne.length; iIndex++) //iIndex get incremented by 1 here.
    { 
           arrayOne[iIndex] = iIndex; 
           iIndex=iIndex+1; //iIndex get incremented by 1 here.
     } 
```

The above loop will start from 0 and get incremented by 2 each time as mentioned above. So iIndex values will be 0,2,4... .Value at index 1,3... remains unchanged and values at 0,2,4... get replaced by iIndex value.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-05T05:57:42.720

```
public static void main(String args[]){ 
            float arrayOne[] = {1, 2, 3, 4,5}; 
            for(int iIndex=0; iIndex<arrayOne.length; iIndex++) 
            { 
                   arrayOne[iIndex] = iIndex; 
                  // iIndex=iIndex+1; comment this line, twice increment is not required. 
             } 
             for(int iIndex=0; iIndex<arrayOne.length; iIndex++) 
             { 
                   System.out.println(arrayOne[iIndex]); 
             } 
     } 
```

# ide - Blogger 离线工具

> ID：15216545
> 
> 赞同：1
> 
> 时间：2013-03-05T05:35:06.800
> 
> 标签：ide, editor, blogger

我已经下载了一些博客免费模板，我希望能够在将设计应用到我的在线博客之前使用一些更高级的工具对其进行离线编辑

谁能推荐我一些工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-21T06:23:18.640

记事本或记事本 Plus 可以很好地进行编辑但是，据我所知，您无法离线预览输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T06:11:09.977

在查看输出时会遇到问题，尽管您可以使用记事本和记事本++，并将这些文件保存为 HTML，然后查看结果，但大多数扩展不太可能以这种方式工作。

相反，如果您想要实时更改，但现在在您的博客上，请随时尝试这个网站 - [http://htmledit.squarefree.com/](http://htmledit.squarefree.com/)

它会立即提供输出，并且可以帮助您避免您的博客出现格式问题！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-03T15:49:24.470

当然，您可以使用[Notepad++](https://notepad-plus-plus.org/download/v6.8.8.html)作为编辑器离线编辑您的模板，但问题是您无法在编辑后预览博客模板，因为它是 XML 格式的。

# hibernate - JPA：如何使用 HQL 检查 NULL 查询参数值？

> ID：15216547
> 
> 赞同：7
> 
> 时间：2013-03-05T05:35:14.500
> 
> 标签：hibernate, jpa

```
Query query =  em.createQuery(
        "select count(u) from User u where (u.id=:a) and (u.photo=:b)")
        .setParameter("a",userId).setParameter("b",null); 
```

就我而言，我想检查用户照片是否上传（照片值是否为空）。我试过上面的查询。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T05:46:34.847

请参阅[Hibernate 文档中的示例](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-where)。

您应该检查参数是否为空：

```
Query query =  em.createQuery(
        "select count(u) from User u where (u.id=:userId) and (u.photo is null)")
        .setParameter("userId",userId); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-03T16:57:12.103

如果您的目标是概括“b”，以便方法可以接收给定的搜索值或 null，这通常有效：

```
Query q = em.createQuery (
  "SELECT ... WHERE ... ( :b IS NULL AND u.photo IS NULL OR u.photo = :b )" 
);
q.setParameter ( "b", searchValue ); // can be null
... 
```

[这里](https://github.com/marco-brandizi/jUtils/blob/master/jutils-j2ee/src/main/java/uk/ac/ebi/utils/sql/HqlUtils.java)有一个使用这种方法的助手（参见 parameterizedWithNullHql()）。

# jquery - 我怎么知道可拖动项目真的被放到了 Jquery UI 的指定可排序容器中

> ID：15216549
> 
> 赞同：0
> 
> 时间：2013-03-05T05:35:22.480
> 
> 标签：jquery, jquery-ui-sortable, jquery-ui-draggable

总而言之，我知道我们可以实现一个可拖动的元素，只需简单地调用`.draggable`jquery ui 中的方法。这是一个示例，包括连接到可排序的。

```
$(".draggable").draggable({
            helper : function(){
                   //return something dom.},
            cursor : 'move',
            connectToSortable : '.sortableLayoutSection'});

$(".sortableLayoutSection").sortable({
            appendTo : parent,
            containment : "parent",
            cursor : "pointer",
            placeholder : 'li-placeholder',
            forcePlaceholderSize : false
        }); 
```

但我的问题是我怎么知道可拖动项目真的落入指定的容器（在这个例子中是类名为的元素`.sortableLayoutSection`）？谢谢。

**更新**

```
$(".sortableLayoutSection").sortable({
                appendTo : parent,
                containment : "parent",
                cursor : "pointer",
                placeholder : 'li-placeholder',
                forcePlaceholderSize : false,
                receive: function( event, ui ) {alert('ok.got something.')}
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:09:10.170

首先，您也应该将可排序元素初始化为可放置元素，同时请参考：[http](http://api.jqueryui.com/droppable/#event-drop) ://api.jqueryui.com/droppable/#event-drop 。它有 drop 事件，这意味着有一个拖动元素已被拖动到 droppable 中。所以你可以编写函数来确定你想要做什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:28:17.250

答案就[在这里](https://stackoverflow.com/questions/3257925/jquery-draggable-sortable-how-to-tell-if-item-was-actually-added-to-my-sortab)，经过我的测试，它解决了我的问题，只有放到指定的容器中才会触发一个名为的事件`receive`，请查看我更新的内容。谢谢。

# android - 适用于 android 的 Google plus：凭据无效

> ID：15216550
> 
> 赞同：8
> 
> 时间：2013-03-05T05:35:22.473
> 
> 标签：android, google-plus, access-token

在连接到 Google+ 后，我正在使用以下代码获取访问令牌，以获取个人资料信息和电子邮件：

```
String sAccessToken = GoogleAuthUtil.getToken(this,mPlusClient.getAccountName() + "",
                          "oauth2:" + Scopes.PLUS_PROFILE + " 
                          https://www.googleapis.com/auth/userinfo.profile 
                          https://www.googleapis.com/auth/userinfo.email"); 
```

这个访问令牌我没有存储和尝试重复使用。相反，我每次都要求一个访问令牌，期待一个新的（不同的）令牌，这样我就不需要检查它是否过期等。

但是每次我要求时我都会得到相同的访问令牌。我卸载了该应用程序，清除了**Google+ 应用程序**的数据，但我仍然获得了相同的访问令牌。

实际问题是，使用此访问令牌会出现 401 错误 -`"message": "Invalid Credentials"`

```
{
 "error": {
  "errors": [
   {
    "domain": "global",
    "reason": "authError",
    "message": "Invalid Credentials",
    "locationType": "header",
    "location": "Authorization"
   }
  ],
  "code": 401,
  "message": "Invalid Credentials"
 }
} 
```

这是浏览器上的响应。

在设备上，我在 Logcat 中得到了这个：

```
02-25 02:09:46.919: W/System.err(3022): java.io.FileNotFoundException: https://www.googleapis.com/oauth2/v1/userinfo
02-25 02:09:46.929: W/System.err(3022):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:521)
02-25 02:09:46.929: W/System.err(3022):     at org.apache.harmony.luni.internal.net.www.protocol.https.HttpsURLConnectionImpl.getInputStream(HttpsURLConnectionImpl.java:258)
02-25 02:09:46.929: W/System.err(3022):     at com.example.gmaillogin.MainActivity$connectAsyncTask.doInBackground(MainActivity.java:269)
02-25 02:09:46.929: W/System.err(3022):     at com.example.gmaillogin.MainActivity$connectAsyncTask.doInBackground(MainActivity.java:1)
02-25 02:09:46.929: W/System.err(3022):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
02-25 02:09:46.929: W/System.err(3022):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
02-25 02:09:46.929: W/System.err(3022):     at java.util.concurrent.FutureTask.run(FutureTask.java:138)
02-25 02:09:46.929: W/System.err(3022):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
02-25 02:09:46.929: W/System.err(3022):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
02-25 02:09:46.929: W/System.err(3022):     at java.lang.Thread.run(Thread.java:1019) 
```

**第 269 行：**

```
urlConnection = (HttpURLConnection) url.openConnection(); 
```

**完整代码：**

```
URL url = new URL("https://www.googleapis.com/oauth2/v1/userinfo");
String sAccessToken = GoogleAuthUtil.getToken(
                        MainActivity.this,
                        mPlusClient.getAccountName() + "",
                        "oauth2:" + Scopes.PLUS_PROFILE + " 
                                            https://www.googleapis.com/auth/userinfo.profile 
                                            https://www.googleapis.com/auth/userinfo.email");

            Log.d("sAccessToken = ", "" + sAccessToken);
            urlConnection = (HttpURLConnection) url.openConnection();
            urlConnection.setRequestProperty("Authorization", "Bearer "
                    + sAccessToken);

            BufferedReader r = new BufferedReader(new InputStreamReader(
                    urlConnection.getInputStream(), "UTF-8"));
            StringBuilder total = new StringBuilder();
            String line;
            while ((line = r.readLine()) != null) {
                total.append(line);
            }
            line = total.toString(); 
```

**编辑：**

这肯定是因为访问令牌已过期。这是意料之中的，但我想我每次打电话都会得到一个新的访问令牌。

但正如[这里](https://stackoverflow.com/questions/9527751/authenticating-with-google-api-using-accountmanager#answers-header)所说：

> 如果 android 设备已经有一个身份验证令牌（对于您尝试访问的特定 GData 服务），它将返回给您

所以，我必须这样做：

```
if (server indicates token is invalid) {
              // invalidate the token that we found is bad so that GoogleAuthUtil won't
              // return it next time (it may have cached it)
              GoogleAuthUtil.invalidateToken(Context, String)(context, token);
              // consider retrying getAndUseTokenBlocking() once more
              return;
          } 
```

就像[文档](http://developer.android.com/reference/com/google/android/gms/auth/GoogleAuthUtil.html)说的

但是如何检查访问令牌是否已过期或无效？

通过捕捉异常 - 是唯一的解决方案吗？

实际上例外是`java.io.FileNotFoundException`没有意义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T18:51:15.757

Covering the bases here: Did you [register a Google APIs Console project](https://code.google.com/apis/console/) and create a OAuth 2.0 client ID for your Android app, by specifying your app's package name and the SHA-1 fingerprint of your certificate (test or prod)?

Often the 401 invalid credentials message is due to the APIs Console project either not being configured or one of the settings being invalid.

The steps to walk through that set up process specifically for the Google+ SDK are here: [https://developers.google.com/+/mobile/android/getting-started](https://developers.google.com/+/mobile/android/getting-started)

**Edit**

The `PlusClient` can automatically handle your tokens for you. I'd suggest using the methods that the `PlusClient` provides and allowing the client to manage the tokens rather than doing it manually. If you need email or profile data via the `PlusClient` see `PlusClient.loadPerson()` and for email `PlusClient.getAccountName()`, more details at [https://developers.google.com/+/mobile/android/people](https://developers.google.com/+/mobile/android/people)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-11T12:10:11.690

我有类似的问题。为了解决访问令牌过期的问题，我在客户端解码令牌，并检查令牌有效负载中的“exp”字段。这样，我可以在发送到服务器之前识别令牌过期。更多细节在这篇[博文中](http://www.tbray.org/ongoing/When/201x/2013/04/04/ID-Tokens)

# jquery - 制作 , 无标签可点击

> ID：15216552
> 
> 赞同：2
> 
> 时间：2013-03-05T05:35:31.910
> 
> 标签：jquery, html, css

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-05T05:37:39.833

您应该添加`style="cursor:pointer"`手形指针和`onclick="window.location='somewhere'"`.

```
<div style="cursor:pointer" onclick="window.location='index.html'">My Link</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T05:38:24.607

```
var myel = document.querySelector('#myel'); // your element

myel.addEventListener('click', function() {
  // do stuff
}); 
```

在 CSS 中：

```
#myel { cursor: pointer } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T05:39:40.997

你可以通过多种方式做到这一点。一种方法是在你的 CSS 中分配伪类。如果 div 有一个 div1 类，那么我们的 css 将显示为：

```
.div1:hover{
    cursor:pointer;
} 
```

你也可以在javascript中做到这一点

```
$('.div1').on("hover", function(){
    $(this).css("cursor", "pointer");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T05:39:14.057

## 设置css：

```
ul li{
  cursor:pointer; /*  <------this will change the cursor to hand cursor*/
} 
```

## 和 jQuery：

```
$(function(){
   $('li').click(function(){
      alert('li clicked.');
   });
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-05T05:39:57.580

```
 $("div").hover(function(){
        $(this).css('cursor','pointer')
}); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T07:26:00.050

希望这可以帮助...

**CSS**

```
li:hover {
    cursor: pointer //on hover change the cursor to pointer
} 
```

**jQuery**

```
$(document).ready(function() { 
    $("#click_me").bind("click", function(){ //bind a click event on an element with id = click_me
        $.ajax({ 
            url: "./file.txt", //note: file must be in the same domain as the current script http://en.wikipedia.org/wiki/Same_origin_policy
            dataType: "text",
            success: function(data) { //if ajax request is successful
                $("#result_container").html(data); //append the resulting data into a div with id = result_container
        }
    });
}); 
```

});

干杯:)

# mysql - 如何在 Mysql 中的字符串末尾插入反斜杠？

> ID：15216556
> 
> 赞同：1
> 
> 时间：2013-03-05T05:35:56.620
> 
> 标签：mysql, phpmyadmin

如何`\`在字符串末尾插入（反斜杠）？我正在尝试这个查询：

```
INSERT INTO myTable (data) VALUES('testData\ '); 
```

但无法在字符串末尾插入反斜杠。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:37:21.457

试试双斜线。The`\`是一个转义字符，因此您需要尝试`\\`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:41:12.523

试试这个：

```
INSERT INTO myTable (data) VALUES('testData\\ '); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-07T18:12:16.607

更改[SQL Server 模式](http://dev.mysql.com/doc/refman/5.0/en/server-sql-mode.html)会有所帮助。

要更改模式以忽略黑色斜线，请运行： SET sql_mode='NO_BACKSLASH_ESCAPES';

当您对更新不满意时，请记住将其设置回常规默认模式。

# c# - Gridview 不保留 c# 和 ASP.Net 中的旧值

> ID：15216558
> 
> 赞同：4
> 
> 时间：2013-03-05T05:36:00.267
> 
> 标签：c#, asp.net, gridview

我有一个正确绑定的 ASP.Net gridview。在编辑时我正在编辑某些字段。然后在我还需要编辑其他行之后。但是当我尝试编辑其他行时，以前编辑的行被重置 n 保留它们的旧价值观。

要求是这样的，我必须编辑许多行并且单击按钮我需要将所有编辑值推送到数据库

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:39:35.890

您需要在回发之间维护 GridView 的数据源。

您可以通过将 DataTable 存储在 Cache、Session 或任何持久性存储中来做到这一点。

编辑一行后，将更改保存到此 DataTable，然后重新绑定 Gridview（来自此 DataTable）。

当用户点击“全部保存”时，您可以将DataTable的更改行保存到数据库中。

如果您需要跟踪哪些行已更改，您可以维护缓存或 Session 中已更改的 PrimaryKey 列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:41:40.657

在绑定网格之前，您是否在 Page_Load 事件中检查 !IsPostBack ？如果您没有在 Page_Load 事件中绑定网格，请发布绑定网格的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-06T06:27:03.157

protected void grdRepayment_RowEditing（对象发送者，GridViewEditEventArgs e）

{

```
 grdRepayment.EditIndex = e.NewEditIndex;
    myDatatable = (DataTable)Session["TempTable"];
    grdRepayment.DataSource = myDatatable;
    grdRepayment.DataBind();

} 
```

这就是我们需要在 RowEditing 和 RowCancelingEdit 中绑定网格的方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:00:42.673

您的代码的问题是，您在页面加载时绑定了网格。所以当页面加载时，它可以绑定数据库中的值。对于 Post back 上的 write bind 方法，并在您单击保存按钮时使用该会话或隐藏字段更新数据库时，还维护您在会话或隐藏字段上的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-06T06:19:58.790

早上布莱恩......这是从gridview获取值到数据表的代码

私人无效getGridInfo（）

{

```
 DataTable dt = new DataTable();
    DataRow dr;
    dt.Columns.Add(new System.Data.DataColumn("Select", typeof(byte)));
    dt.Columns.Add(new System.Data.DataColumn("Client", typeof(string)));
    dt.Columns.Add(new System.Data.DataColumn("PrincipleAmt", typeof(double)));

    foreach (GridViewRow row in grdRepayment.Rows)
    {
        CheckBox Select = (CheckBox)row.FindControl("ChkSelect");
        Label ClientName = (Label)row.FindControl("lblClientName");
        Label Principal = (Label)row.FindControl("lblPricipal");

        dr = dt.NewRow();
        dr[0] = Convert.ToByte(Select.Checked);
        dr[1] = ClientName.Text;
        dr[2] = Convert.ToDouble(Principal.Text);

        dt.Rows.Add(dr);
    }
    Session["TempTable"] = dt;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-06T06:23:48.197

现在这里是更新保存数据表的会话变量的代码，这必须在 Gridview 的 RowUpdating 事件中完成。

protected void grdRepayment_RowUpdating（对象发送者，GridViewUpdateEventArgs e）

{

```
 DataTable myDatatable;
        GridViewRow row = grdRepayment.Rows[e.RowIndex]; 
        grdRepayment.EditIndex = -1; 

        if (row != null)
        {
            myDatatable = (DataTable)Session["TempTable"];
            for (int i = 0; i < myDatatable.Rows.Count; i++)
            {
                if (e.RowIndex == i)
                {

                    myDatatable.Rows[i][1] = Convert.ToString(Client);
                    myDatatable.Rows[i][2] = Convert.ToString(Principal);

                    Session["TempTable"] = myDatatable;
                    grdRepayment.EditIndex = -1;
                    grdRepayment.DataSource = myDatatable;
                    grdRepayment.DataBind();

                }
            }
        }
      } 
```

并确保仅在 RowEditing 和 RowCancellingEdit 事件中从该会话变量绑定网格。完成编辑后，只需单击按钮，将编辑的内容推送到数据库...

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-06T06:24:51.487

请检查您的 gridview 绑定方法是调用页面加载和内部！isPostBack？

为了

```
Void page_load()
{
if(!IsPostBack)

{
//Call GridView Binding method
}

} 
```

# qtp - 如何在没有鼠标像素的情况下使用winobject

> ID：15216561
> 
> 赞同：0
> 
> 时间：2013-03-05T05:36:08.580
> 
> 标签：qtp

*   Browser("Echo'Net - Home_2").WinObject("DirectUIHWND").Click 743,22
*   我在这里标识为 winobject 的对象，有两个按钮有 2 个按钮打开和保存
*   我需要单击其中一个但不指定鼠标像素
*   有什么简单的方法吗
*   仅供参考 - 天真到 QTP

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T08:13:31.017

您可以使用`.GetTextLocation`找到文本的位置，然后单击它。

```
posLeft = -1
posTop = -1
posRight = -1
posBottom = -1 
Set myObj = Browser("Echo'Net - Home_2").WinObject("DirectUIHWND")

If myObj.GetTextLocation ("Open", posLeft, posTop, posRight, posBottom) Then
    ' the text was found within the object, click in the middle.
    myObj.Click posLeft + (posRight - posLeft)/2, posTop + (posBottom - posTop)/2
End If 
```

# javascript - 只有在 javascript 加载后，链接才应变为可点击

> ID：15216563
> 
> 赞同：0
> 
> 时间：2013-03-05T05:36:22.447
> 
> 标签：javascript, html

我有一个“登录”链接，可在灯箱式 iframe 中打开登录页面 (login.php)。

通常它工作正常，但是如果观众的互联网连接非常慢，他们可能会在灯箱 javascript 加载之前点击登录链接。然后导致 login.php 在窗口本身而不是灯箱 iframe 中加载，这是一个问题。

那么，是否可以延迟该链接的点击能力，直到特定的 .js 文件加载之后？即当页面第一次加载时，“登录”是不可点击的，然后在 javascript 加载后，“登录”成为一个活动链接。

或者 - 这个问题的最佳解决方案是什么？

谢谢！~丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:39:10.203

是的。你可以有一个惰性加载器之类的东西。

```
<a href="#" data-href="login.php" class="lazy">log in</a> 
```

现在，具有该类的元素`lazy`将具有一个虚拟的非工作链接。窗口加载后，我们将替换正确的链接，使其正常工作。

```
$(document).ready(function(){
  $('.lazy').removeClass('lazy').attr('href', $(this).data('href'));
}); 
```

此外，如果您觉得这可能是一个问题，您可以隐藏登录按钮并在文档加载后显示它，如下所示：

```
<a id="login" ... style="display: none;">Login</a> 
```

和 JavaScript：

```
$(document).ready(function(){
  $('#login').show();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:41:26.767

看看[Document.Ready](http://api.jquery.com/ready/)

> DOM 准备好后执行的函数。

代码示例：

```
$(document).ready(function() {
    var login = $("<a href='login.php' >Login</a>");
    $('#elementName').append(login);
}); 
```

或者 `if (typeof something != 'undefined')`在做任何事情之前检查是否存在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:41:40.297

没有代码很难说。但是，我最好的猜测是它在引导您正在使用的灯箱之前等待文档加载。这是该灯箱要做的正确事情。

正如@Matt Ball 在您的帖子中的评论所建议的那样，您需要有一个非 javavascript 选项，该选项在页面加载时替换为更漂亮的 javascript 选项。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T05:44:46.147

关于脚本的一个简单信息。总是把你的脚本放在你的 body 标签下以便快速加载。如果您想要快速响应，则不在 head 标签中。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-05T05:45:25.050

@Praveen Kumar 的解决方案有效，但这是一种更简单的方法，不需要真正“延迟加载”链接：

HTML：

```
<a href="login.php" class="lazy">log in</a> 
```

JS（在加载灯箱后将其添加到您的灯箱脚本中）：

```
$('.lazy').removeClass('lazy'); 
```

或者没有 jQuery（简化示例）：

```
document.querySelectorAll('.lazy')[0].className=''; 
```

CSS：

```
.lazy { -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none; } 
```

# html - 制作可拖动的 HTML5 画布曲线区域

> ID：15216565
> 
> 赞同：0
> 
> 时间：2013-03-05T05:36:24.920
> 
> 标签：html, html5-canvas, jquery-draggable

如果我有一个在其中绘制图像的画布。图像在曲线中有四个点。我需要使这个曲线区域可拖动。但没有使用`kinetic Js`

附图片。

![在此处输入图像描述](../Images/fbd8507e3de9e5feb803f9603f849c12.png)

**HTML**

```
<div id='curveAreaDrag'  class="ui-widget-content" >
    <div id="point1" class="ui-widget-content"></div>
    <div id="point2" class="ui-widget-content"></div>
    <div id="point3" class="ui-widget-content"></div>
    <div id="point4" class="ui-widget-content"></div>
</div>    
    <canvas id="myCanvas" width="400px" height="400px"
 style="border:1px solid #d3d3d3;top:0;left:0"></canvas> 
```

**jQuery**

```
$("#curveAreaDrag").draggable({drag:function(){save();}}); 
```

**更新：**

我有四个贝塞尔曲线点。我也在缩放每个点，然后浅黑色区域也在缩放。我需要拖动浅黑色区域。它不是图像。它是由贝塞尔曲线选择的区域。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:56:50.280

**[编辑：以适应OP的附加信息]**

此代码使用 2 个三次贝塞尔曲线和 6 个控制手柄来让您选择图像中的眼球。

红色手柄控制眼睛顶部的曲线。蓝色手柄控制眼睛底部的曲线。白色手柄可让您固定在眼角。橙色显示生成的路径（=2 曲线）。

下面是应用程序的图片，这里是它的 Fiddle：http: [//jsfiddle.net/m1erickson/98G9F/](http://jsfiddle.net/m1erickson/98G9F/) ![应用程序的图像](../Images/ecf4792a67607eda7bbd88831c0ad2f2.png)

这是代码：

```
<!doctype html>
<html>
  <head>

    <link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
    <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
    <script src="http://code.jquery.com/ui/1.10.1/jquery-ui.js"></script>

    <style>
      body { font-family: arial; }
      .anchor { background: #fff; position: absolute; display: block; height: 10px; width: 10px; border: 1px solid #333; border-radius:5px;}
      .control { background: #fff; position: absolute; display: block; height: 20px; width: 20px; border: 1px solid #333; border-radius:10px;}
      .p1, .p2 { background: red; z-index: 50; }
      .p3, .p4 { background: blue; }
      .pStart { background:white;}
      .pEnd {background:white;}
      .pStart { left: 54px; top: 166px; }
      .pEnd { left: 346px; top: 189px; }
      .p1 { left: 150px; top: 39px; }
      .p2 { left: 276px; top: 97px; }
      .p3 { left: 219px; top: 227px; }
      .p4 { left: 147px; top: 224px; }
      canvas { border: 1px solid #333;}
      #start,#end2{color:green;}
      #end1{color:purple;}
      #c1,#c3{color:red;}
      #c2,#c4{color:blue;}
    </style>

  </head>
  <body>

        <a href="#" class="anchor pStart"></a>
        <a href="#" class="control p1"></a>
        <a href="#" class="control p2"></a>
        <a href="#" class="anchor pEnd"></a>
        <a href="#" class="control p3"></a>
        <a href="#" class="control p4"></a>

        <canvas height="400" width="400" id="canvas"></canvas>

        <p>context.moveTo(
            <span id="start"></span>);
        </p>
        <p>context.bezierCurveTo(
            <span id="c1"></span>,
            <span id="c2"></span>,
            <span id="end1"></span>);
        </p>
        <p>context.bezierCurveTo(
            <span id="c3"></span>,
            <span id="c4"></span>,
            <span id="end2"></span>);
        </p>

    <script>
      var $p1,$p2,$codeMove,$codeBez1,$codeBez2;

      $(function() {
        var canvas=document.getElementById("canvas");
        var ctx = canvas.getContext("2d");

        $pStart=$(".pStart");
        $pEnd=$(".pEnd");
        $p1 = $(".p1");
        $p2 = $(".p2");
        $p3 = $(".p3");
        $p4 = $(".p4");
        $codeMove=$("code-move");
        $codeBez1=$("code-bez1");
        $codeBez2=$("code-bez2");

        $(".pStart, .pEnd, .p1, .p2, .p3, .p4").draggable({ 
          containment: 'parent',
          drag: function(event, ui) { renderWrap(ctx); },
          stop: function(){ renderWrap(ctx); }
        });

        var eyeImage=new Image();
        eyeImage.onload=function(){
            canvas.width=eyeImage.width*1.5;
            canvas.height=eyeImage.height*1.5;
            renderWrap(ctx);
        }
        eyeImage.src="http://i.stack.imgur.com/SbcL4.png";

      function renderWrap(ctx) {
        var pStart=$pStart.position();
        var pEnd=$pEnd.position();
        var p1 = $p1.position();
        var p2 = $p2.position();            
        var p3 = $p3.position();
        var p4 = $p4.position();    
        render({x:pStart.left, y:pStart.top}, {x:pEnd.left, y:pEnd.top}, {x:p1.left, y:p1.top}, {x:p2.left, y:p2.top}, {x:p3.left, y:p3.top}, {x:p4.left, y:p4.top} );
      };

      function render(start, end, p1, p2, p3, p4) {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.drawImage(eyeImage,0,0,eyeImage.width,eyeImage.height,0,0,eyeImage.width*1.5,eyeImage.height*1.5);
        ctx.beginPath();
        ctx.lineWidth = 2;
        ctx.strokeStyle = "orange";
        // start-->end
        ctx.moveTo(start.x,start.y);
        ctx.bezierCurveTo(p1.x,p1.y,p2.x,p2.y,end.x,end.y);
        ctx.stroke();
        // end-->start
        ctx.bezierCurveTo(p3.x,p3.y,p4.x,p4.y,start.x,start.y);             
        ctx.stroke();
        ctx.closePath();
        // connectors
        ctx.beginPath();
        ctx.strokeStyle = "#999";
        ctx.lineWidth = 1;
        connector(start,p1);
        connector(end,p2);
        connector(end,p3);
        connector(start,p4);
        ctx.closePath();
        // display code
        $("#start").html(start.x+","+start.y);
        $("#c1").html(p1.x+","+p1.y);
        $("#c2").html(p2.x+","+p2.y);
        $("#end1").html(end.x+","+end.y);
        $("#c3").html(p3.x+","+p3.y);
        $("#c4").html(p4.x+","+p4.y);
        $("#end2").html(start.x+","+start.y);       
      }

      function connector(pt1,pt2){
          ctx.moveTo(pt1.x,pt1.y);
          ctx.lineTo(pt2.x,pt2.y);
          ctx.stroke();
      }

    });
    </script>

  </body>   
</html> 
```

# java - 使用霍纳算法评估多项式并计算步骤（Java）

> ID：15216569
> 
> 赞同：2
> 
> 时间：2013-03-05T05:36:41.223
> 
> 标签：java, evaluation, polynomial-math

我需要有关我的 java 代码的帮助。我想要完成的是计算多项式上每一步的大小：`double s = (b-a)/nsteps;` 要创建的多项式的输入是度、系数、 的起始值`x`、 的停止值`x`和步数。每当我尝试运行测试时，我的输出都是`0`for`x`并且`y`我不确定我的代码中缺少什么。这是我关于它应该如何工作的运行测试，但我对`x`and的结果`y`是`0`：

```
Enter degree:2
Enter coefficient 2:1
Enter coefficient 1:0
Enter coefficient 0:0
f(x) = 1.0x^2 + .0x^1 + 0.0
Enter initial x:0
Enter final x:10
Enter number of steps:20
x = 0.0; f(x) = 0.0
x = 0.5; f(x) = 0.25
x = 1.0; f(x) = 1.0
x = 1.5; f(x) = 2.25
x = 2.0; f(x) = 4.0
x = 2.5; f(x) = 6.25
x = 3.0; f(x) = 9.0
x = 3.5; f(x) = 12.25
x = 4.0; f(x) = 16.0
x = 4.5; f(x) = 20.25
x = 5.0; f(x) = 25.0
x = 5.5; f(x) = 30.25
x = 6.0; f(x) = 36.0
x = 6.5; f(x) = 42.25
x = 7.0; f(x) = 49.0
x = 7.5; f(x) = 56.25
x = 8.0; f(x) = 64.0
x = 8.5; f(x) = 72.25
x = 9.0; f(x) = 81.0
x = 9.5; f(x) = 90.25
x = 10.0; f(x) = 100.0 
```

这是我的java代码：

```
import java.util.*;

public class PolyAreaTwo{
   //method evalpoly Horner's rule
        public static double evalpoly(double[] c, double x) {
                    int n = c.length - 1;
                    double y = c[n];
                    for (int i = n - 1; i >= 0; i--) {
                        y = c[i] + (x * y);
                    }
                    return y;
        }

    //main method
        public static void main(String[] args){
        Scanner in = new Scanner(System.in);
                 int n;
                 double a, b;
                 int nsteps;

                //input degree
                 System.out.print("Enter degree of polynomial:");
                 n = in.nextInt();

                //input n+1 coefficients
                 double[] c = new double[n+1];

                    for (int i=n; i>=0; i--) {
                            System.out.print("Enter coefficent " + i + ":");
                            c[i] = in.nextDouble();
                 }
                    for (double d : c) { 
                    System.out.print(" x ^ " + d); 

                    }

                //input starting value x = a
                 System.out.println("Enter starting x: ");
                 a = in.nextDouble();

                //input stopping value x = b
                 System.out.print("Enter stop x: ");
                 b = in.nextDouble();

                //input number of steps between starting x and stopping x
                 System.out.print("Enter steps: ");
                 nsteps = in.nextInt();

                //calculate size of each step
                 double s = (b-a)/nsteps;
                 int steps = 0;

             //loop to call the evalpoly method         
                for (double x = a; x <= b; x += s) {
                   double y = evalpoly(c, x);

                   System.out.println("x ="+x+ " , y ="+y);

                } 

            }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:53:51.040

去掉不必要的外`while`循环后；`for`考虑在循环中使用您计算的步长： `x += s`.

[顺便说一句](http://rosettacode.org/wiki/Horner%27s_rule_for_polynomial_evaluation#Java)，通过初始化为最高阶系数，您可以更高效地实现[*Horner 方法*](http://en.wikipedia.org/wiki/Horner_scheme)，如此处和[此处所示。](http://en.wikipedia.org/wiki/Horner_scheme#Description_of_the_algorithm)`evalpoly()``y`

```
public static double evalpoly(double[] c, double x) {
    int n = c.length - 1;
    double y = c[n];
    for (int i = n - 1; i >= 0; i--) {
        y = c[i] + (x * y);
    }
    return y;
} 
```

# objective-c - Why is my app crashing during Table View Insert Row?

> ID：15216577
> 
> 赞同：0
> 
> 时间：2013-03-05T05:37:15.530
> 
> 标签：objective-c, uitableview, uiviewcontroller, nsstring, uitextview

My app is only crashing in a specific way. Here's a break down of what's going on.

I can type in text in a UITextView and tap a button that saves the text and adds a row to a UITableView in another UIViewController. I can then tap on the desired cell from the UITableView and that UIViewController will dismiss and the text will appear again on the main UIViewController.

I have another button that simply clears out the UITextView so I can type in new text.

If I view the text from an added row and then tap the "Add" button to input new text and then tap the "Save" button my app crashes.

Here's some of the code:

didSelectRow Code:

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{    
     //Setting the text stored in an array into a NSString here
    _displayString = [_savedNoteArray objectAtIndex:indexPath.row];

    [self dismissViewControllerAnimated:YES completion:nil];
} 
```

save button code:

```
- (IBAction)saveNote
{
    if (_noteView.aTextView.text == nil)
    {
        [_noteArray addObject:@""];

        Note * tempNote = [[Note alloc] init];
        _note = tempNote;

        [_savedNotesViewController.savedNoteArray addObject:tempNote];
        NSIndexPath * tempNotePath = [NSIndexPath indexPathForRow: [_savedNotesViewController.savedNoteArray count]-1 inSection:0];
        NSArray * tempNotePaths = [NSArray arrayWithObject:tempNotePath];
    [_savedNotesViewController.noteTableView insertRowsAtIndexPaths:tempNotePaths withRowAnimation:NO];

       [[NSNotificationCenter defaultCenter] postNotificationName:@"AddNote" object:nil];

    }
    else
    {
        [_noteArray addObject:self.noteView.aTextView.text];

        Note * tempNote = [[Note alloc] init];
       _note = tempNote;

        [_savedNotesViewController.savedNoteArray addObject:tempNote];
        NSIndexPath * tempNotePath = [NSIndexPath indexPathForRow:[_savedNotesViewController.savedNoteArray count]-1 inSection:0];
        NSArray * tempNotePaths = [NSArray arrayWithObject:tempNotePath];

        //**** This is where the app is crashing *****
        [_savedNotesViewController.noteTableView insertRowsAtIndexPaths:tempNotePaths withRowAnimation:NO];

        [[NSNotificationCenter defaultCenter] postNotificationName:@"AddNote" object:nil];

    }

    Note * myNote = [Note sharedNote];
    myNote.noteOutputArray = _noteArray;

} 
```

add butt code (makes a new UITextView):

```
- (IBAction)addButtonTapped
{
    [[NSNotificationCenter defaultCenter] postNotificationName:@"AddNote" object:nil];
} 
```

in my viewWillAppear to show the selected row text I do this:

```
- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    self.noteView.aTextView.text = _savedNotesViewController.displayString;
} 
```

note code (singleton class):

```
 static Note * sharedNote = nil;

 - (id)initWithNote:(NSString *)newNote
 {
    self = [super init];

    if (nil != self)
    {
        self.note = newNote;
    }

    return self;
}

+ (Note *) sharedNote
{
    @synchronized(self)
    {
        if (sharedNote == nil)
        {
            sharedNote = [[self alloc] init];
        }
    }

    return sharedNote;
} 
```

When the app crashes I get this:

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[Note isEqualToString:]: unrecognized selector sent to instance 0x8875f20' 
```

Stepping through my code, the text is being added to the array, but when it comes time to insertRowsAtIndexPaths the app blows up.

Any advice is much appreciated!

*** EDIT // TableView Code ****

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [_savedNoteArray count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString * CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    //I have a feeling this could be where an issue is. 
    NSString * cellString = [_savedNoteArray objectAtIndex:indexPath.row];
    cell.textLabel.text = cellString;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:48:52.443

一个潜在的问题（可能不是您的崩溃，但无论如何都会导致问题）是您将 Note 对象存储在`savedNoteArray`但您试图将它们用作字符串（您的代码如下）：

```
//Setting the text stored in an array into a NSString here
_displayString = [_savedNoteArray objectAtIndex:indexPath.row]; 
```

然后将该 displayString 分配给 UITextView 的文本属性（应该是 NSString*）：

`self.noteView.aTextView.text = _savedNotesViewController.displayString;`

这个问题的简短形式可以概括为......

```
Note *note = [[NSNote alloc] init];
[array addObject:note];
textView.text = array[0]; 
```

这显然会导致问题。您基本上是在将“Note”对象分配给应该是字符串的东西。

`cellForRowAtIndexPath:`这可能会导致您在表视图数据源的方法中遇到的崩溃。您是否也在使用 Note 对象，或者您是否正确地将 NSStrings 分配给视图？

# solrj - Group by date field in solrj

> ID：15216580
> 
> 赞同：1
> 
> 时间：2013-03-05T05:37:22.503
> 
> 标签：solrj

i want to group the output i am getting through date type. But i am storing the data in solr using datetime type. Date Format i am using is

```
 Date format :: "yyyy-MM-dd'T'HH:mm:ss.SSSZ"

 For e.g. Date is stored in solr as "2013-03-01T20:56:45.000+00:00" 
```

What i want as output is count of dates :: for .e.g.

```
 Date1:: "2013-03-01T20:56:45.000+00:00"
   Date2:: "2013-03-01T21:56:45.000+00:00"
   Date3:: "2013-03-01T22:56:45.000+00:00"
   Date3:: "2013-03-02T22:56:45.000+00:00"
   Date4:: "2013-03-02T23:56:45.000+00:00" 
```

So i want the output as two columns ::

```
     Date           Count
     2013-03-01       3  
     2013-03-02       2  
```

Here is the code i am using

```
 String url = "http://192.168.0.4:8983/solr";
SolrServer server = new HttpSolrServer(url);
SolrQuery query = new SolrQuery();

query.setQuery("*:*");
query.addFilterQuery("sessionStartTime:[2013-03-01T00:00:00Z TO 2013-03-04T24:00:00Z]");

query.add("group", "true");
query.add("group.field","uniqueId"); // uniqueId is grouping the data 
query.add("group.main","true");
query.setRows(9999);

QueryResponse rs=server.query(query);

Iterator<SolrDocument> iter = rs.getResults().iterator(); 
```

Help is appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-25T16:43:10.827

我知道这是一个较老的问题，但我正在研究与此相关的事情，所以我想我会分享我的解决方案。由于您正在使用分组，`rs.getResults()`因此可能为空。在阅读完 SolrJ API 并在我这边做了一些测试之后，你会发现结果确实是按照你想要的方式分组的。要访问它们，请创建如下变量：

```
List<Group> groupedData = rs.getGroupResponse().getValues().get(0).getValues() 
```

请注意，这`Group`是类`org.apache.solr.client.solrj.response.Group`

然后，遍历`groupedData`, usinig`groupedData.get(i).getResult()`以获得`SolrDocumentList`每个分组值的结果。在您的示例中，（假设数据按您所说的那样排序），`groupedData.get(0)`将为您提供`SolrDocumentList`日期为 2013-03-01 的三个匹配项中的一个。

我知道这是一连串的方法调用，但它最终会为您提供结果。如果有人确实知道获取数据的更快方法，请随时让我知道，因为我也想知道。

有关更多信息，请参阅[GroupResponse的 API](https://lucene.apache.org/solr/5_2_0/solr-solrj/org/apache/solr/client/solrj/response/GroupResponse.html#getValues())

请注意，此答案适用于 Solr 5.4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T12:42:51.823

您试图实现的输出，我相信更适合[Faceting](http://wiki.apache.org/solr/SolrFacetingOverview)而不是分组。[更具体地查看有关日期分](http://wiki.apache.org/solr/SimpleFacetParameters#Date_Faceting_Parameters)面的文档，并且 SolrJ 完全支持分面，请参阅[SolrJ - Advanced Usage](http://wiki.apache.org/solr/Solrj#Advanced_usage)。有关 Faceting 的介绍，我建议您阅读 Faceted [Search with Solr](http://wiki.apache.org/solr/SolrFacetingOverview)

# entity-framework - How to delete records that have same value in a column in Entity Framework?

> ID：15216592
> 
> 赞同：0
> 
> 时间：2013-03-05T05:37:52.237
> 
> 标签：entity-framework

I have a table in database that has some columns.I get a list of some records from this table in my repository class.So I will have something like this:

![enter image description here](../Images/37e427b24ac1eafc6a5970b41ec3a49e.png)

Now I want to delete records that have the same value in a special column(here in Code column),like this:

![enter image description here](../Images/c3dc20ba369b2276802465b53ba62421.png)

I mean I want to have just one of the records that have the same Code column value. How can I do that in Entity Framework?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T09:22:40.103

让您有两个表`Table1`，`table2`并且您想删除table2 `table1`中具有相同编号的所有记录。**这是你的要求**`code`

 **1.首先你必须得到表2的代码列的所有值

1.  `var x = db.table2.Select(p => p.code);` 然后，您必须在删除这些代码的记录后将其与 table1 进行比较。
2.  为此，您必须在下面编写一段代码。

    foreach (var item in x) { var y = db.table1.Where(p => p.code== item).FirstOrDefault(); if (y != null) { db.table1.DeleteObject(y); db.SaveChanges(); } 别的 { } }

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T09:46:46.483

按`Code`列分组，跳过每组的第一条记录并删除其余记录：

```
var query = db.Records.GroupBy(r => r.Code)
              .Select(grouping => grouping.OrderBy(ent => ent.EntityId).Skip(1));

foreach (var element in query.SelectMany (q => q))
{
    db.Records.Remove(element);
}

db.SaveChanges(); 
```**

# c# - System.Linq.Dynamic - How to convert from Linq to Dynamic syntax

> ID：15216593
> 
> 赞同：0
> 
> 时间：2013-03-05T05:37:54.527
> 
> 标签：c#, visual-studio-2010, linq, dynamic

I'm using the class called System.Linq.Dynamic ([http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx](http://msdn.microsoft.com/en-us/vstudio//bb894665.aspx)). It is used to define dynamic Linq queries. I need my queries to be dynamic so they can be defined at runtime.

I'll use an example to explain: There is a Transactions object containing a list of Transaction objects.

```
public class Transactions : List<Transaction>
{
    public Transactions() { }
    public Transactions(List<Transaction> trans) : base(trans) { }
}
public class Transaction
{
    public string Type;
    public int Value;
} 
```

Lets say I declare the Transactions object and fill it with some data:

```
Transactions trans = new Transactions
{
    new Transaction {
        Type = "A",
        Value = 20,
    },
    new Transaction {
        Type = "B",
        Value = 34,
    },
    ... and so on
}; 
```

I can then run a Linq query like so to extract some data from trans:

```
var mySum = from tran in trans
            group tran by tran.Type into tranGroup
            select new
            {
                Type = tranGroup.Key,
                Total = tranGroup.Sum(s => s.Value)
            }; 
```

That can be (not so easily) transcribed to the following dynamic query

```
var mySum = trans
    .AsQueryable()
    .GroupBy("new(Type)", "new(Value)")
    .Select("new(Key.Type as Type, Sum(Value) as Total)"); 
```

What this does is does is give an object with Type as the grouped Type and Total as the Summed Value for the particular group. For example it may look like this:

```
mySum = [{Type:"A", Total: 120},{Type:"B", Total: 200},{Type:"C", Total: 60}] 
```

I understand the basics of how dynamic queries work but there doesn't seem to any clear examples of any complex dynamic queries that includes an explanation of what is happening.

**This is the part I cannot work out. Given the following Linq query:**

```
var myQuery = from tran in trans
              group tran by tran.Type into tranGroup
              select new
              {
                  Type = (tranGroup.Key == "A" ? "Alfa" : (tranGroup.Key == "B" ? "Bravo" : (tranGroup.Key == "C" ? "Charlie" : (tranGroup.Key == "D" ? "Delta" : "")))),
                  Data = (from tranValue in tranGroup
                          select tranValue.Value).ToList()
              }; 
```

Would ultimately give me a result that looks like this:

```
myQuery = [{Type:"Alfa", Data: [50,60,10]},{Type:"Bravo", Data: [60,70,40,30]},{Type:"Charlie", Data: [10,30,5,15]}] 
```

This is how it would be written dynamically **but without the nesting**:

```
var myQuery = trans
    .AsQueryable()
    .GroupBy("new(Type)", "new(Value)")
    .Select(@"new((Key.Type == ""A"" ? ""Alfa"" : (Key.Type == ""B"" ? ""Bravo"" : (Key.Type == ""C"" ? ""Charlie"" : (Key.Type == ""D"" ? ""Delta"" : ""Other"")))) as Type, """" AS Data)"); 
```

**How do I write the dynamic query above to include the nested array of values?**

**Can anyone point me in the direction of some good examples or give me some examples including how to group and sum?**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T00:16:24.503

我自己想通了。

问题是我在上面做**"new(Value)"**，而我应该只做**"Value"**。我看到了一个使用**它**作为参数的示例查询。基本上**它**意味着当前项目。

**这是一个 Linq 查询**

```
var myQuery = from tran in trans
              group tran by tran.Type into tranGroup
              select new
              {
                  Type = (tranGroup.Key == "A" ? "Alfa" : (tranGroup.Key == "B" ? "Bravo" : (tranGroup.Key == "C" ? "Charlie" : (tranGroup.Key == "D" ? "Delta" : "")))),
                  Data = (from tranValue in tranGroup
                          select tranValue.Value).ToList()
              }; 
```

**可以转录成动态查询**

```
var myQuery = trans
    .AsQueryable()
    .GroupBy("new(Type)", "Value")
    .Select(@"new((Key.Type == ""A"" ? ""Alfa"" : (Key.Type == ""B"" ? ""Bravo"" : (Key.Type == ""C"" ? ""Charlie"" : (Key.Type == ""D"" ? ""Delta"" : ""Other"")))) as Type, it AS Data)"); 
```

**这会给我一个看起来像的结果**

```
myQuery = [{Type:"Alfa", Data: [50,60,10]},{Type:"Bravo", Data: [60,70,40,30]},{Type:"Charlie", Data: [10,30,5,15]}] 
```

# javascript - 如何隐藏选项卡的内容

> ID：15216595
> 
> 赞同：4
> 
> 时间：2013-03-05T05:38:03.220
> 
> 标签：javascript, jquery, html, css

我有 4 个选项卡，每个选项卡包含不同的数据。当我单击复选框时，会显示相应的选项卡。但是当我取消选中时，选项卡是不可见的，但内容是不可见的。如何解决这个问题呢？我的页面是

```
<style>
    .ui-state-disabled {
    display: none;
}
</style>
    <script>
    $(function() {
  $("#tabs").tabs();
  $("#tabs").tabs("option", {
    "selected": 2,
    "disabled": [1,2,3]
  });

$( "input[type=checkbox]" ).click(function(){
    if ($(this).is(':checked')) {
     $('#tabs').tabs("enable", $(this).val());
     $('#tabs').tabs("select", $(this).val() );
    }
    else{
         $('#tabs').tabs("disable", $(this).val());
    }
});
});
</script> 
```

.

```
<body>
 <div id="tabs">
  <ul>
    <li><a href="#tabs-1">Nithin</a> </li>
    <li><a href="#tabs-2">Vipin</a></li>
    <li><a href="#tabs-3">Sachin</a></li>
    <li><a href="#tabs-4">Ganguly</a></li>
  </ul>
  <div id="tabs-1">
    <p>Nithin</p>
  </div>
  <div id="tabs-2">
    <p>Vipin</p>
  </div>
   <div id="tabs-3">
    <p>Sachin</p>
  </div>
   <div id="tabs-4">
    <p>Ganguly</p>
  </div>
</div>
<input type="checkbox" name="tabs-1" value="1">tabs-1 
<input type="checkbox" name="tabs-2" value="2">tabs-2 
<input type="checkbox" name="tabs-3" value="3">tabs-3 
<input type="checkbox" name="tabs-4" value="4">tabs-4 
<br>
</body>
</html> 
```

[您可以在http://jsfiddle.net/2aQ2g/12/](http://jsfiddle.net/2aQ2g/12/)上查看工作代码

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:08:25.470

只需检查`else`部分... **[工作演示](http://jsfiddle.net/2aQ2g/28/)**

```
$(function() {
  $("#tabs").tabs();
  $("#tabs").tabs("option", {
    "selected": 2,
    "disabled": [1,2,3]
  });

$( "input[type=checkbox]" ).click(function(){
    if ($(this).is(':checked')) {
     $('#tabs').tabs("enable", $(this).val());
     $('#tabs').tabs("select", $(this).val() );
    }
    else{
        // $('#tabs').tabs("disable", $(this).val());
        $('#tabs').tabs("disable", $(this).val());
         $('#tabs').tabs("select", $(this).prev().val());
         $('#tabs').tabs("enable", $(this).prev().val());
    }
});
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T05:44:22.183

试试这个

```
$( "input[type=checkbox]" ).click(function(){
    if ($(this).is(':checked')) {
     $('#tabs').tabs("enable", $(this).val());
     $('#tabs').tabs("select", $(this).val() );
    }
    else{
         $('#tabs').tabs("disable", $(this).val());
      $("#tabs-"+$(this).val()).children().hide());
    }
}); 
```

您只需禁用选项卡。也隐藏内容

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-05T05:47:50.227

这可能会有所帮助：

```
$("input[type=checkbox]").click(function () {
    if ($(this).is(':checked')) {
        $('#tabs').tabs("enable", $(this).val());
        $('#tabs').tabs("select", $(this).val());
        $('[id="' + this.name + '"]').find('p').show();
    } else {
        $('#tabs').tabs("disable", $(this).val());
        $('[id="' + this.name + '"]').find('p').hide();
    }
}); 
```

## 笔记：

无需添加`content`类。

[**只需在此处查看小提琴**](http://jsfiddle.net/2aQ2g/26/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T05:52:18.313

添加`var hhh = $("input:checked").val(); $('#tabs').tabs("enable", hhh); $('#tabs').tabs("select", hhh ); $("#tabs-"+hhh+" p").show();`到您的其他。

[现场演示](http://jsfiddle.net/Bhs5p/2/)

```
 $(function() {
  $("#tabs").tabs();
  $("#tabs").tabs("option", {
    "selected": 2,
    "disabled": [1,2,3]
  });

$( "input[type=checkbox]" ).click(function(){
    if ($(this).is(':checked')) {
     $('#tabs').tabs("enable", $(this).val());
     $('#tabs').tabs("select", $(this).val() );
     $("#tabs-"+$(this).val()+" p").show();
    }
    else{
         $('#tabs').tabs("disable", $(this).val());
        $("#tabs-"+$(this).val()+" p").hide();
        var hhh = $("input:checked").val();
        $('#tabs').tabs("enable", hhh);
     $('#tabs').tabs("select", hhh );
     $("#tabs-"+hhh+" p").show();
    }
});
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-05T05:52:41.383

```
 $(function() {
      $("#tabs").tabs();
      $("#tabs").tabs("option", {
        "selected": 2,
        "disabled": [1,2,3]
      });

    $( "input[type=checkbox]" ).click(function(){
        if ($(this).is(':checked')) {
         $('#tabs').tabs("enable", $(this).val());
         $('#tabs').tabs("select", $(this).val() );
        }
        else{
             $('#tabs').tabs("disable", $(this).val());
             $('#'+$(this).attr('name')).hide();
        }
    });
}); 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-03-05T05:54:13.770

您可以在[JSFiddle上查看](http://jsfiddle.net/2aQ2g/22/)

```
$(function() {
  $("#tabs").tabs();
  $("#tabs").tabs("option", {
    "selected": 0,
    "disabled": [1,2,3]
  });

$( "input[type=checkbox]" ).click(function(){
    if ($(this).is(':checked')) {
     $('#tabs').tabs("enable", $(this).val());
     $('#tabs').tabs("select", $(this).val() );
    }
    else{
        $('#tabs').tabs("disable", $(this).val());
        var tab = $(this);
        $('#tabs').tabs("select", $(":checked").first().val());
        //$('#tabs').tabs("select", $(":checked").last().val());
        //It is based on you what to use. (first or last selected value)
    }
});
}); 
```

我希望这有帮助。问候

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-03-05T05:50:15.083

在元素的其他部分添加类`ui-state-disabled` ，然后它将`display: none;`

# php - phpfox ;_How to give href to variable in php

> ID：15216599
> 
> 赞同：-3
> 
> 时间：2013-03-05T05:38:26.337
> 
> 标签：php

I want to display the variable with hyperlink. Does anyone know how to give? I have applied the below method for href:

```
<div style="width:50px;height:20px;float:right">
    <a href="#" onclick="$.ajaxCall('forum.UnFlag', 'user_id={$aThread.user_id} &thread_id={$aThread.thread_id} &rate_value=i', 'GET'); return false;">
            <button class="button" name="val[button]"  value="">$i </button>
    </a>
    <?php
            for ($i=0; $i <= 10; $i++)
            {
               echo "The number is ".$i."<br />";
            }
    ?>
</div> 
```

if you need anything regarding this ask me..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:42:22.103

尝试

```
<?php
    for ($i=0; $i <= 10; $i++)
    {
       echo "The number is <a href=".$i." rel="">".$i."</a><br />";
    }
?> 
```

`php`并在代码中更改下面的包装变量。

```
<button class="button" name="val[button]"  value=""><?php echo $i; ?></button> 
```

# python - Echoprint 本地服务器返回“ 在 /query datetime.datetime(2013, 3, 5, 5, 10, 31) 不是 JSON 可序列化的”

> ID：15216610
> 
> 赞同：0
> 
> 时间：2013-03-05T05:39:27.650
> 
> 标签：python, json

我按照 echoprint 的 github 页面上提供的步骤启动了自己的 echoprint 服务器：[https ://github.com/echonest/echoprint-server](https://github.com/echonest/echoprint-server)

我能够正确设置它，并摄取了一些 echoprint 的数据。我能够使用 Solr 管理页面查看所有摄取的数据。我很确定在摄取方面我没有遇到任何问题。

但是当我尝试在浏览器中查询时，我的服务器总是返回： **datetime.datetime(2013, 3, 5, 5, 10, 31) is not JSON serializable**

这里可能是什么问题？我实际上对python并不熟悉，所以我很难解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:16:40.673

`datetime.datetime(...)`是一个 python 日期时间对象。它不是 JSON 可以识别的格式。JSON 数据类型可以在[这里](http://en.wikipedia.org/wiki/JSON#Data_types.2C_syntax_and_example)找到）。要了解如何正确序列化 datetime 对象，请参阅[这个 SO answer](https://stackoverflow.com/a/2680060/875127)。

# visual-c++ - 用于标记检测的 openCV 中的 3-d 翘曲

> ID：15216615
> 
> 赞同：0
> 
> 时间：2013-03-05T05:39:47.850
> 
> 标签：visual-c++, opencv, image-processing

我正在研究标记检测的代码。从我的网络摄像头中，我正在获取标记的输入图像，其中的这个标记有一个参考点。我必须检测那个参考点。为此我需要一些变形方法。我知道如何通过 opencv 中的**cvGetPerspectiveTransform()**和**cvWarpPerspective()**进行 2-d 翘曲。但我想问有没有什么方法可以生成一些可用于 3-d 翘曲的 3-d 透视变换矩阵。

```
 cvGetPerspectiveTransform(rectangles[rectIndex].OuterCorner, dstCorners,map_matrix);
 cvWarpPerspective(workGrayImg,projectedImg,map_matrix,CV_INTER_LINEAR |CV_WARP_FILL_OUTLIERS ,         
 cvScalarAll (0)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T08:51:05.680

我猜有一个叫做[ArUco](http://sourceforge.net/projects/aruco/)的小型图书馆可以做你想做的事情。因为它是开源的，你可以检查他们是如何做到的。

据我了解，您需要先找到标记，然后将其设为正方形，以便您可以阅读其中包含的信息。您还可以查找用于 QR 码的方法。

# android - android - 用于 ubuntu 的密钥工具

> ID：15216618
> 
> 赞同：0
> 
> 时间：2013-03-05T05:40:21.327
> 
> 标签：android, google-maps, ubuntu

我使用以下链接安装了keytool软件通过使用以下链接我们可以在ubuntu中安装keytool软件

> [http://keytool.sourceforge.net/update](http://keytool.sourceforge.net/update)
> 
> 安装此软件后，主文件夹中不会创建 .android 文件夹。那么我怎样才能在 android 中获得 .debugkeystore 用于谷歌地图。提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T05:46:39.097

这个 .android 文件夹在主目录中可用。如果您没有看到此文件夹，则认为它已隐藏。要使该文件夹可见，请转到“编辑”->“首选项”，然后标记“显示隐藏和备份文件”。

一旦你勾选了这个复选框，你肯定会得到这个文件夹，现在 debug.keystore 在 .android 目录中可用。

**或者**

在 shell 中输入：

```
 find ~ -name ".android" 
```

# ms-access - 第二个消息框

> ID：15216619
> 
> 赞同：0
> 
> 时间：2013-03-05T05:40:23.147
> 
> 标签：ms-access, vba, messagebox

这是我尝试自己编写的第一段代码，所以请原谅任何菜鸟错误。

如果第一个消息框没有选择但没有运气，我正在尝试显示第二个消息框。任何帮助都会很棒。

代码如下：

```
 Private Sub cmdUploadReady_Click()

Dim Msg, Style, Title, Help, Ctxt, Response, MyString

Msg = "Before Uploading Hole Data you must register you Work Program/POWE. Have you done this?"
Style = vbYesNo + vbCritical
Title = "Uploader"

Response = MsgBox(Msg, Style, Title, Help, Ctxt)

If Response = vbYes Then
'make pickers visible
Me.POWENumber_Label.Visible = True
Me.POWE_picker.Visible = True
Me.cmdUploadHoles.Visible = True

Else

Msg = "MsgBox do you wish to register now?"
        Style = vbYesNo + vbQuestion
        If Response = vbYes Then
        DoCmd.OpenForm "frmWorkPrograms_new"

        Else
        Cancel = True

        End If

End If

End Sub 
```

提前喝彩。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:46:34.203

试试下面的代码。需要添加这一行 Response = MsgBox(Msg, Style, Title, Help, Ctxt)

```
 Private Sub cmdUploadReady_Click()

        Dim Msg, Style, Title, Help, Ctxt, Response, MyString

        Msg = "Before Uploading Hole Data you must register you Work Program/POWE. Have you done this?"
        Style = vbYesNo + vbCritical
        Title = "Uploader"

        Response = MsgBox(Msg, Style, Title, Help, Ctxt)

        If Response = vbYes Then
            'make pickers visible
            Me.POWENumber_Label.Visible = True
            Me.POWE_picker.Visible = True
            Me.cmdUploadHoles.Visible = True

        Else

            Msg = "MsgBox do you wish to register now?"
            Style = vbYesNo + vbQuestion
            Response = MsgBox(Msg, Style, Title, Help, Ctxt) '***Add this line****'

            If Response = vbYes Then
                DoCmd.OpenForm "frmWorkPrograms_new"

            Else
                Cancel = True

            End If

        End If 
```

# php - 日期格式无效

> ID：15216620
> 
> 赞同：3
> 
> 时间：2013-03-05T05:40:38.407
> 
> 标签：php, mysql, date, yii

我有一个像这样的数组：

```
 $holiday = array(array('h_date' => $new_year, 'd_name' => 'New Year'),
    array('h_date' => $memorial_day, 'd_name' => 'Memorial Day')
 foreach($holiday as $holidays){
 $date = $holidays["h_date"];
 $name = $holidays["d_name"] 
```

当我保存在 mysql 数据库中时

```
 $model = new Holiday();
 $model->holiday_date = $date;
 $model->display_name = $name;
 $model->save(); 
```

当我写

```
 $model->save(false); 
```

**值已成功保存但没有“假”数据**
在看到验证错误时未保存而不是错误：

```
 Array ( [holiday_date] => Array ( [0] => The format of Holiday Date is invalid.)) 
```

我们用

```
protected function beforeSave(){
    if(parent::beforeSave()){
        $this->holiday_date=date('Y-m-d',strtotime($this->holiday_date));

        return TRUE;
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:30:08.373

您应该更改 beforeValidate 的日期格式，或者更改`holiday_date`属性的验证规则，因为 beforeSave 在验证通过后执行。

```
public function beforeValidate()
{
    if ($this->isNewRecord)
    {
        $this->holiday_date = date('Y-m-d', strtotime($this->holiday_date));
    }
    return parent::beforeValidate();
} 
```

# haskell - 可以将分区应用于`a -> IO Bool`吗？

> ID：15216621
> 
> 赞同：5
> 
> 时间：2013-03-05T05:40:49.217
> 
> 标签：haskell, monads

我有以下代码：

```
import System.Directory
import System.FilePath
import Control.Monad (filterM)

filesAndDirs dir = do
  entries <- getDirectoryContents dir
  let filtered = [dir </> e | e <- entries, e `notElem` [".", ".."]]
  files <- filterM doesFileExist filtered 
  dirs <- filterM doesDirectoryExist filtered 
  return (files, dirs) 
```

我想写的是类似的东西`return $ partitionM doesFileExist filtered`。有没有办法重复使用或提升`partition`或者是双重使用`filterM`的最佳方式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T08:29:10.710

`partitionM`在[Hayoo](http://holumbus.fh-wedel.de/hayoo/hayoo.html)上搜索将返回至少 2 个实现该功能的库。这意味着您可以依赖它们或研究它们的来源。

[这是此实现](http://hackage.haskell.org/packages/archive/Extra/latest/doc/html/src/Extra-List.html#partitionM)的更易读的翻译：

```
partitionM :: (Monad m) => (a -> m Bool) -> [a] -> m ([a], [a])
partitionM p xs = foldM f ([], []) xs
  where 
    f (a, b) x = do
      flag <- p x
      return $ if flag 
        then (x : a, b) 
        else (a, x : b) 
```

* * *

关于如何将`partition`功能提升到的问题`partitionM`，我提出了以下提升功能的实现：

```
liftSplitter :: (Monad m) =>
  ((a -> Bool) -> [a] -> ([a], [a])) -> 
  (a -> m Bool) -> [a] -> m ([a], [a])
liftSplitter splitter kleisliPredicate list = do
  predicateResultsAndItems <- sequence $ do
    item <- list
    return $ do
      predicateResult <- kleisliPredicate item
      return (predicateResult, item)
  return $ results $ predicateResultsAndItems
  where
    results [] = ([], [])
    results ((predicateResult, item) : tail) = (a ++ tailA, b ++ tailB)
      where
        (a, b) = splitter (const predicateResult) [item]
        (tailA, tailB) = results tail 
```

您可以使用此功能解除所有类型的功能

```
(a -> Bool) -> [a] -> ([a], [a]) 
```

（即，`partition`和`break`）`span`到

```
(a -> m Bool) -> [a] -> m ([a], [a]) 
```

# visual-studio-2010 - form1.aspx中如何使用类的成员函数

> ID：15216622
> 
> 赞同：0
> 
> 时间：2013-03-05T05:40:50.650
> 
> 标签：visual-studio-2010, c#-4.0

我创建了新网站和一个类，即 Form1.aspx 和 class1.cs。我还在那个类中创建了一些函数。现在我想在 form1.aspx 中使用该功能。谁能告诉我如何使用它？...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:55:40.237

我不确定你打算做什么，但通常当你创建一个页面时`Form1.aspx`，它会创建一个后台代码文件，如`Form1.aspx.cs`.

在`Form1.aspx.cs`文件中，您有经历页面周期的事件，例如

```
protected void Page_Load(object sender, EventArgs e)
{  
} 
```

当 Form1.aspx 加载时，您可以在其中添加您想要执行的任何操作（任何功能）。

现在，如果您创建了一个单独的类，比如说`class1.cs`您在该类中有一些可以在`Form1.aspx`页面上使用的功能，您可以在 .net 框架提供的任何功能中添加一些代码，例如“Page_Load”，或者您可以创建你自己在那个文件中。假设您将使用页面加载，那么您将执行类似的操作

```
protected void Page_Load(object sender, EventArgs e)
{  
    class1 myClass = new class1();
    //if your function in myClass returns some kind of type (i.e string, int, or if   its just void then you need to account for that
    myClass.CallAnyFunctionInClass1(send any parameters here);
} 
```

**我的建议：**阅读面向对象编程[http://cplus.about.com/od/learnc/ss/csharpclasses.htm](http://cplus.about.com/od/learnc/ss/csharpclasses.htm)面向对象编程教程

# extjs - 如何处理extjs4中复选框上的选中和未选中事件？

> ID：15216623
> 
> 赞同：0
> 
> 时间：2013-03-05T05:40:58.353
> 
> 标签：extjs, extjs4, extjs-mvc, extjs4.2

我在 extjs4 工作。我将停留在必须处理复选框上的选中和未选中事件的地方。我没有找到适合此选择的事件。我只想处理复选框上的选中和未选中事件..

这是我的一些代码

1）查看代码：----

```
Ext.define('Am.user.Login', {
    extend:'Ext.form.Panel',
    id:'loginId',
    alias:'widget.Login',
    title:'Get your key to socialize yet earn and learn (always free)',

    items:[
    {
    ----    
    },
    { 
        xtype:'checkbox',
        fieldLabel: 'Remember me',
        name: 'remember',
        //id:'checkbox1',
        action:'check'

    },
    ],
}); 
```

2）控制器代码：---

```
Ext.define('Am.sn.UserController',
        {

            extend:'Ext.app.Controller',
                 ------------   
                     -----
            init:function()
            {
                console.log('Initialized Users! This happens before the Application launch function is called'); 
                this.control(
                {
                    'Login button[action=loginAction]':
                    {
                        click:this.authenticateUser
                    },
                    'Login checkbox[action=check]':
                    {
                        change:this.checkedRemeberMe
                    },

                }); //end of control
            },//end of init function
            checkedRemeberMe:function()
            {
                console.log("check box selected");
            },
        }); 
```

在这里我将使用更改事件，但每次选择或取消选择它时都会调用它。这里需要哪个事件？请给我一些建议...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:52:11.787

为什么不直接在复选框上使用处理程序配置？通过这样做，每次选中或取消选中该框时都会触发它。在那里做你的工作。

# sql - 食物选择查询

> ID：15216625
> 
> 赞同：1
> 
> 时间：2013-03-05T05:41:07.490
> 
> 标签：sql, database, oracle-sqldeveloper

我有一种餐桌食品，它有以下限制

```
Food

Name(which has the dish name)
category (cuisine name)
DeskNo(The table that it is placed on)

Food:
Name         Category     Deskno
pasta        Mexican         1
noodles      Chines          1
friedrice    Chinese         2
Tamarindrice Indian          2 
```

我有一个直通表

```
ThroughAway

category1
category2

ThrowAway
Category1      Category2
Indian         Chinese
Mexican        Indian 
```

如果第 1 类和第 2 类放在同一张桌子上，这些菜就会被扔掉。我需要输出在同一个 DeskNo 中的菜的名称，并且两者都有可能落入 ThrowAway 的危险。需要一些帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:14:31.860

试试这个查询

```
SELECT Distinct a.Name AS Dish1, b.Name As Dish2
FROM Food a, Food b, ThroughAway c
WHERE a.Name <> b.Name AND a.Deskno = b.deskno AND 
(a.category = c.category1 AND c.category2 = b.category) ; 
```

自连接比较同桌菜品和扔掉桌菜

小提琴 [http://sqlfiddle.com/#!2/0893e6/7](http://sqlfiddle.com/#!2/0893e6/7)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:12:45.593

```
select f1.name, f2.name from ThrowAway t
inner join Food f1 on f1.Category = t.Category1
inner join Food f2 on f2.Category = t.Category2
where f1.deskno = f2.deskno 
```

但是你不应该像那样加入 varchar 或 smth，这是一个非常糟糕的做法。添加 ids、索引并加入它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:35:35.540

```
SELECT FOOD.DESKNO
FROM   FOOD INNER JOIN
THROW ON FOOD.CATEGORY = THROW.CAT1 INNER JOIN
THROW AS THROW_1 ON FOOD.CATEGORY = THROW_1.CAT2 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T06:15:40.183

食物

Name（有菜名） category（菜名） DeskNo（放的桌子）

食物： 名称 类别 Deskno 意大利面 墨西哥 1 面条 中国 1 炒饭 中国 2 罗望子 印度 2

# sencha-touch - 在 sencha touch 2 from the Store 中创建行可点击表格

> ID：15216629
> 
> 赞同：0
> 
> 时间：2013-03-05T05:41:12.927
> 
> 标签：sencha-touch

大家好，我正在使用 sencha touch 2。我想创建一个表，其中数据来自商店。单击行时，我可以获取单击行的数据。任何人都可以帮助我解决这个问题。我使用了 Ext.ux.touch.grid 但它没有解决我的问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T05:51:36.863

您可以使用 Xtemplate 将您的商店数据呈现为列表或表格或您想要的任何其他格式。您应该将每条记录的唯一 id 放在某个 dom 属性中，以便在点击时可以检查哪个元素是那个元素以及应该为该记录做什么。

查看 sdk 中的[touchstyle](http://www.shopstyleapp.com/app/)示例，他们使用类似的策略。

# jquery - 如何使文本围绕元素折叠？

> ID：15216631
> 
> 赞同：-2
> 
> 时间：2013-03-05T05:41:35.143
> 
> 标签：jquery, html, css

我有一个将文本附加到`<li>`元素的文本字段，我希望它附加到 li 元素的文本以非常具体的方式排列。我想也许可以添加一个小图像并使用 css 使该图像不可见。有没有更传统的方法？

```
I want to be able to have text like this then(invisible element)
makes the text continue here(invisible element)
and here. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:45:52.267

当您将文本弹出到该元素中时，还要向其添加一个 CSS 类

并定义css类

```
.icon{

background:url(my_desired_image.png) no-repeat size;
// other styles 
} 
```

然后每当元素从字段中获取文本时，它将添加类，并且类将同时显示她的图像

喜欢

```
I want to be able to have text like this then <i class="icon"></i>
makes the text continue here< i class="icon"></i>
and here.

<i class="icon"></i> 
```

是你的隐形元素

# svn - 没有最后一次提交的 svn 日志修订

> ID：15216632
> 
> 赞同：2
> 
> 时间：2013-03-05T05:41:38.017
> 
> 标签：svn

我用下一个命令检索 svn 日志信息

```
 svn log --xml svn://srv-vrn/sendinfo -r {2013-03-04}:{2013-03-05} 
```

但它总是返回最后一次提交信息，即使最后一次提交的日期小于修订（-r）参数的开始日期。就我而言，它返回：

```
<date>2013-03-03T12:59:29.916222Z</date> 
```

如何使其仅显示日期范围内的提交？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T10:28:13.103

您必须阅读 SVN 书籍，[“修订日期”](http://svnbook.red-bean.com/en/1.7/svn.tour.revs.specifiers.html#svn.tour.revs.dates)部分并理解“Subversion 是否提前一天？”

> 如果您将单个日期指定为修订版而不指定一天中的时间（例如 2006-11-27），您可能认为 Subversion 应该为您提供发生在 11 月 27 日的最后修订版。相反，您会从 26 日甚至更早的时间收到修订版。

如果您在 2013-03-04**有**修订并希望包含在日志中，则必须在 start-parameter 中使用 time 23:59。

顺便说一句，我不知道，如果您在此日期有多个修订版，如何从日志中获取第一个修订版

# jquery - 知道为什么在快速移动光标时没有注册 mouseleave 事件吗？

> ID：15216637
> 
> 赞同：7
> 
> 时间：2013-03-05T05:41:50.287
> 
> 标签：jquery

检查这个[小提琴](http://jsfiddle.net/abitdodgy/7rFb6/1/)：http : [//jsfiddle.net/abitdodgy/7rFb6/1/](http://jsfiddle.net/abitdodgy/7rFb6/1/)

当您快速移动光标`mouseleave`时，有时不会注册事件。为什么会这样？

当您将鼠标悬停在所选图像上时，`.controls`会出现一个允许您删除选择的图层。但是，一旦您取消悬停，该`.controls`层应该会消失。如果您在图层之间快速移动光标，这并不总是发生。

尝试选择图像并在它们之间快速移动光标，您会注意到这种情况正在发生。如果选择了图像，则`.controls`除非将鼠标悬停在该图层上，否则该图层不可见。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T10:56:32.977

尝试将`mouseleave`事件绑定到包装器 div 而不是单个元素，因为它没有悬停在`.controls` `show()`触发器上。

[**这个样本**](http://jsfiddle.net/7rFb6/3/)对你有用吗？

我建议也添加`z-index: 2;`到`.controls`元素中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:45:35.790

我迅速将我的激光鼠标移到他们所有人身上，他们立即做出了回应。似乎问题与您的硬件限制有关，而不是与软件的某些特定问题有关，我很抱歉。

# android - 广播接收器中的服务为空

> ID：15216639
> 
> 赞同：0
> 
> 时间：2013-03-05T05:42:08.920
> 
> 标签：android, null, broadcastreceiver, android-service

我想在手机启动完成后启动一项新服务。所以我为此创建广播接收器，如下所示

```
 @Override
    public void onReceive(final Context context, final Intent intent) {

    if ("android.intent.action.BOOT_COMPLETED".equals(intent.getAction())) {
        Intent mServiceIntent = new Intent("com.android.reminder.BootService");

        //mServiceIntent.setAction("com.android.reminder.BootService");
        ComponentName service = context.startService(mServiceIntent);

        if (service==null) {
            // something really wrong here
            Toast.makeText(context, "Sorry, Service is found null",
                    Toast.LENGTH_LONG).show();

        }else{
            Toast.makeText(context, "Service is not null",
                    Toast.LENGTH_LONG).show();
        }
    }
} 
```

清单文件中的声明是 -

```
 .....
    <service
        android:enabled="true"
        android:name="com.android.reminder.BootService">
    </service>

    <receiver
        android:name="AlarmReceiver"
        android:process=":remote" >
    </receiver>
    <receiver
        android:enabled="true"
        android:name=".BootReceiver" >
        <intent-filter >
            <action android:name="android.intent.action.BOOT_COMPLETED" >
            </action>
        </intent-filter>
    </receiver>
</application> 
```

我发现 Toast 是“对不起，发现服务为空”并且服务没有启动.....

请帮助我..提前谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:51:23.490

可能是你需要

```
 Intent mServiceIntent = new Intent(context, BootService.class); 
```

# ruby-on-rails - 仅在 Heroku 上出现 NilClass 错误

> ID：15216640
> 
> 赞同：0
> 
> 时间：2013-03-05T05:42:10.907
> 
> 标签：ruby-on-rails, heroku

我的 heroku 日志中出现错误，但在本地一切正常。有任何想法吗？

```
The error: ActionView::Template::Error (undefined method `+' for nil:NilClass) 
```

我的 user.rb 中只有这个小方法。

```
 def full_name
    return first_name + " " + last_name
  end 
```

这是heroku日志：

```
2013-03-05T05:34:54+00:00 app[web.1]: Started GET "/" for 98.222.28.137 at 2013-03-05 05:34:54 +0000
2013-03-05T05:34:54+00:00 heroku[router]: at=info method=GET path=/ host=objecss.herokuapp.com fwd="98.222.28.137" dyno=web.1 queue=0 wait=0ms connect=1ms service=73ms status=500 bytes=643
2013-03-05T05:34:54+00:00 app[web.1]: ActionView::Template::Error (undefined method `+' for nil:NilClass):
2013-03-05T05:34:54+00:00 app[web.1]: Processing by EntriesController#index as HTML
2013-03-05T05:34:54+00:00 app[web.1]: Completed 500 Internal Server Error in 15ms
2013-03-05T05:34:54+00:00 app[web.1]:   Rendered entries/_entries.html.erb (7.7ms)
2013-03-05T05:34:54+00:00 app[web.1]:     16:           <%=  link_to "Users", users_path %>
2013-03-05T05:34:54+00:00 app[web.1]:     12:   <% if current_user  %>
2013-03-05T05:34:54+00:00 app[web.1]:   Rendered entries/index.html.erb within layouts/application (12.5ms)
2013-03-05T05:34:54+00:00 app[web.1]:
2013-03-05T05:34:54+00:00 app[web.1]:   app/controllers/entries_controller.rb:9:in `index'
2013-03-05T05:34:54+00:00 app[web.1]:
2013-03-05T05:34:54+00:00 app[web.1]:   app/models/user.rb:21:in `full_name'
2013-03-05T05:34:54+00:00 app[web.1]:   app/views/layouts/application.html.erb:13:in `_app_views_layouts_application_html_erb___2449026742642080137_44886800'
2013-03-05T05:34:54+00:00 app[web.1]:     15:       <% if admin? %>
2013-03-05T05:34:54+00:00 app[web.1]:     13:       <%= link_to "#{current_user.full_name}", current_user %>
2013-03-05T05:34:54+00:00 app[web.1]:     11:   <%= link_to "Objecss", entries_path %>
2013-03-05T05:34:54+00:00 app[web.1]:     10: <div class="utility">
2013-03-05T05:34:54+00:00 app[web.1]:     14:       <%= link_to "Log Out", logout_path("current"), method: "delete" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:03:11.763

这是由于没有为该特定用户设置名字和姓氏。只需在 heroku 上打开 rails 控制台并为该用户分配名字和姓氏。你可以做这样的事情

```
[56] pry(main)> u=User.find(1)
  User Load (0.7ms)  SELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
[58] pry(main)> u.first_name = "John"
=> "John"
[59] pry(main)> u.last_name = "Doe"
=> "Doe"
[60] pry(main)> u.save
   (0.3ms)  BEGIN
  User Exists (1.6ms)  SELECT 1 AS one FROM "users" WHERE ("users"."username" = 'example' AND "users"."id" != 1) LIMIT 1
   (1.3ms)  UPDATE "users" SET "first_name" = 'John', "last_name" = 'Doe', "updated_at" = '2013-03-05 06:01:55.263347' WHERE "users"."id" = 1
   (24.5ms)  COMMIT
=> true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:03:36.240

> ActionView::Template::Error（nil:NilClass 的未定义方法“+”）

这告诉你返回值`first_name`是`nil`; 上没有`+`定义方法`NilClass`，因此出现错误。

简而言之，`User`您在 Heroku 上使用的实例没有`first_name`设置。

# c# - 如何以编程方式生成所有 Web 服务器错误

> ID：15216642
> 
> 赞同：1
> 
> 时间：2013-03-05T05:42:29.387
> 
> 标签：c#, asp.net, iis, httpwebrequest

如果链接不起作用，我想生成特定链接的所有错误，那么它应该显示特定的 Web 服务器错误。

这是我的代码。请建议程序应该在哪里完成如果链接不起作用，我会得到所有错误

```
 public partial class WebForm2 : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {          

        }
        protected void btnRender_Click(object sender, EventArgs e)
        {
            string strResult = string.Empty;

            WebResponse objResponse;
            WebRequest objRequest = System.Net.HttpWebRequest.Create(urltxt.Text);

            objResponse = objRequest.GetResponse();

            using (StreamReader sr = new StreamReader(objResponse.GetResponseStream()))
            {
                strResult = sr.ReadToEnd();
                sr.Close();
            }
            strResult = strResult.Replace("<form id='form1' method='post' action=''>", "");
            strResult = strResult.Replace("</form>", "");
            //strResult = strResult.Replace("<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" /><html xmlns="http://www.w3.org/1999/xhtml">");
            div.InnerHtml = strResult;

        }

        protected void btn_createlink_Click(object sender, EventArgs e)
        {
            var links = TextBox1.Text.Split(new string[] { "\n", "\r" }, StringSplitOptions.RemoveEmptyEntries);
            foreach (var link in links)
            {
                if (!IsLinkWorking(link))
                {
                    //Here you can show the error. You don't specify how you want to show it.
                    TextBox2.Text += string.Format("{0}\nNot working\n\n ", link);
                }
                else
                {
                    TextBox2.Text += string.Format("{0}\n working\n\n", link);
                }
            }
        }

bool IsLinkWorking(string url)
{
    HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(url);

    //You can set some parameters in the "request" object...
    request.AllowAutoRedirect = true;
    ServicePointManager.ServerCertificateValidationCallback = (s, cert, chain, ssl) => true;

    try
    {
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();

        return true;
    }
    catch
    { 
        //TODO: Check for the right exception here
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:27:50.783

回答“如何使用 Visual Studio 和 MSDN 查找有关方法和相关异常的帮助”：

*   在 Visual Studio 中选择您需要的信息并按 F1 的方法。将显示给定方法的帮助。或者，您可以在您最喜欢的搜索引擎（即[http://bing.com](http://bing.com)）上搜索类+方法名称 - 即[http://www.bing.com/search?q=HttpWebResponse.GetResponse](http://www.bing.com/search?q=HttpWebResponse.GetResponse)。
*   给定方法的 MSDN 页面要么来自帮助，要么通常是搜索结果中的第一个结果 - 阅读它。
*   大多数方法都包含列出异常的“异常”部分，并且通常包含包含详细信息的“备注”部分。在您的情况下， [HttpWebResponse.GetResponse](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.getresponse%28v=vs.110%29.aspx)显示它引发`WebException`异常，并且 Remarks 部分详细介绍了异常。特别是它提到[了 WebException.Response](http://msdn.microsoft.com/en-us/library/system.net.webexception.response.aspx)属性，该属性涵盖了您正在寻找的内容（包括示例代码）。

文章的部分示例显示了`Status`和的用法`Response.StatusCode`

```
try 
{
  var myHttpWebRequest = (HttpWebRequest) WebRequest.Create(pathThatReturns404);
  var myHttpWebResponse = (HttpWebResponse) myHttpWebRequest.GetResponse();
}
catch(WebException e) 
{
    if(e.Status == WebExceptionStatus.ProtocolError) 
    {
        Console.WriteLine("Status Code : {0}",
            ((HttpWebResponse)e.Response).StatusCode);
    }
} 
```

# iphone - 在标签或文本视图上显示文本在控制台上显示时需要更多时间

> ID：15216645
> 
> 赞同：1
> 
> 时间：2013-03-05T05:42:58.250
> 
> 标签：iphone, ios, twitter, nsstring, uilabel

我第一次遇到这样的问题，需要你的帮助。

我正在获取 twitter 用户信息，并且使用 NSLog 我可以在控制台中看到它，但是当我在标签或文本视图上显示它时，它需要更多时间，几乎是 1 分钟。

我正在使用的代码是....

```
_accountStore = [[ACAccountStore alloc] init];
            ACAccountType *accountType = [_accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierTwitter];

 [_accountStore requestAccessToAccountsWithType:accountType options:nil
                                                completion:^(BOOL granted, NSError *error)

             // Request access from the user to use their Twitter accounts.

             {
                 // Did user allow us access?
                 if (granted == YES)
                 {
                     // Populate array with all available Twitter accounts
                     NSArray *arrayOfAccounts = [_accountStore accountsWithAccountType:accountType];
                     [arrayOfAccounts retain];

                     // Populate the tableview
                     if ([arrayOfAccounts count] > 0)
                         NSLog(@"print %@",[arrayOfAccounts objectAtIndex:0]);
                     //
                     ACAccount *twitterAccount = [arrayOfAccounts objectAtIndex:0];

                     NSString *userID = [[twitterAccount valueForKey:@"properties"] valueForKey:@"user_id"];
                     NSLog(@"print user id is %@",userID);// Here i can see immediately 

                    testLabel.text=[NSString stringWithFormat: @"Hi ,%@",userID];// Here it is taking more time... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:52:34.453

**您正在从异步线程更新您的 UI 元素**。这就是问题发生的原因。

代替：

```
testLabel.text=[NSString stringWithFormat: @"Hi ,%@",userID]; 
```

和：

```
dispatch_sync(dispatch_get_main_queue(), ^{

   testLabel.text=[NSString stringWithFormat: @"Hi ,%@",userID];

}); 
```

请记住：您应该只从主线程更新您的 UI 元素。

在您的情况下，您在 a 中编写代码`block`，块将在异步线程中执行，而不是在主线程中。您正在从那里更新您的 UI 元素。这将导致问题，因此您需要从主线程更新 UI，因为您正在使用`dispatch_get_main_queue`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:56:45.480

您必须确保完成块在主线程上运行。

试试下面的代码..

```
dispatch_async(dispatch_get_main_queue(), ^{
  testLabel.text=[NSString stringWithFormat: @"Hi ,%@",userID];
}); 
```

# c++ - inotify_init() 函数失败

> ID：15216649
> 
> 赞同：-1
> 
> 时间：2013-03-05T05:43:18.597
> 
> 标签：c++, inotify, inotifydataerrorinfo, inotify-tools

我将[inotify](https://github.com/rvoicilas/inotify-tools/wiki)和插件代码安装到我现有的监视文件代码中。我总是收到消息`inotify failed`。

我用谷歌搜索，发现内核应该带有 inotify 选项。（不确定我在使用远程机器时将如何检查）。

我已经在编译中添加了所有共享库。（不相关但万一有可能）

`Linux machinename 2.6.9-89.ELsmp #1 SMP Mon Apr 20 10:33:05 EDT 2009 x86_64 x86_64 x86_64 GNU/Linux`

知道如何在我第一次使用 inotify 工具时调试问题

```
inotify = inotify_init();
         if(inotify<0)
         {
             loginfo<<" inotify_init fail"<<inotify<<endl;
         }

 output = -1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T06:02:48.410

我做了分析，发现inotify在2.6.13内核版本以下不起作用。这是我收到错误的主要原因，没有得到期望的结果

# java - 当我从 url 下载时，URL 自动更改导致错误“找不到文件”

> ID：15216651
> 
> 赞同：1
> 
> 时间：2013-03-05T05:43:36.280
> 
> 标签：java, android

```
try {
        URL url = new URL("http://dantri.com.vn/xa-hoi.rss");
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.connect();

        InputStream is = new BufferedInputStream(url.openStream());
        OutputStream fos = new FileOutputStream("/sdcard/xa-hoi.rss");

        byte[] buffer = new byte[1024];
        int bufferLenght = 0;
        while((bufferLenght = is.read(buffer)) != -1){
            fos.write(buffer, 0, bufferLenght);
        }
        fos.close();
        fos.flush();
        is.close();
    } catch (MalformedURLException e) {
        e.printStackTrace();
    } catch (IOException e){
        e.printStackTrace();
    } 
```

LogCat: 03-05 05:11:35.620: W/System.err(3437): java.io.FileNotFoundException: [http://m.dantri.com.vn/xa-hoi.rss](http://m.dantri.com.vn/xa-hoi.rss)。

这个问题是 url "dantri.com.vn/xa-hoi.rss" 更改为 "m.dantri.com.vn/xa-hoi.rss" 请帮助我！谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:49:30.497

确保您在清单中编写了以下内容。

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:55:49.327

使用[Environment.getExternalStorageDirectory()](http://developer.android.com/reference/android/os/Environment.html) 而不是静态字符串来获取 SDCARD 路径：

```
String sdcardpath = Environment.getExternalStorageDirectory().getAbsolutePath();
OutputStream fos = new FileOutputStream(sdcardpath+"/xa-hoi.rss"); 
```

并确保您已在以下位置添加了 sdcard 权限`AndroidManifest.xml`：-

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:48:23.737

错误在这里：

```
 OutputStream fos = new FileOutputStream("/sdcard/xa-hoi.rss"); 
```

用。。。来代替：

```
OutputStream fos = new FileOutputStream("xa-hoi.rss"); 
```

# asp.net-mvc - How to Create Checkbox in Header of Webgrid i can't create Checkbox in header of Web grid

> ID：15216654
> 
> 赞同：1
> 
> 时间：2013-03-05T05:43:48.360
> 
> 标签：asp.net-mvc, model-view-controller, web, webgrid

i have create one Webgrid which used to display the data into Tabular form but i want to add the checkbox in Header part of webgrid by using this checkbox i want to perorm the operation check all other checkbox into webgrid and perform the ACTIVE And Delete operation..so please help me how to create it ..below my code of Webgrid:

```
<div id="mygrid">
     @grid.GetHtml(tableStyle: "gridTable",
         headerStyle: "gridHead",
         footerStyle: "gridFooter",
         rowStyle: "gridRow",
         alternatingRowStyle: "gridAltRow",                                                                                                                                                                                                                                                                                                                                                                                                     
         columns: grid.Columns(
             grid.Column(header: "",format: @<text><input type="checkbox" name="chkactive[]" value="@item.User_id" /></text>),
             grid.Column("User_Id"),
             grid.Column("Name"),
             grid.Column("Username"),
             grid.Column("Fb_Id"),
             grid.Column("User_image", format: @<text><img src="@Url.Content(@item.Image_path)" height="30px" width="50px" alt="noimage"/></text>),
             grid.Column("Email"),
             grid.Column("Gender"),
             grid.Column(header: "Status", format: @<text>
             @if (@item.Is_active == true)
             { 
                 <a href="@Url.Action("UserStatus", "Admin", new { id = @item.User_id })"><img src="../../images/Active.png"/></a> 
             }
             else
             { 
                 <a href="@Url.Action("UserStatus", "Admin", new { id = @item.User_id })"><img src="../../images/Deactive.png"/></a> }</text>),
             grid.Column(header: "Edit",
                 format: @<text><a href="@Url.Action("EditeUser", "Admin", new { id = @item.User_id })"><img src="../../images/icons/editor.png" /></a></text>),
             grid.Column(header: "Delete",
                 format: @<text><a href="@Url.Action("DeleteUser", "Admin", new { id = @item.User_id })"><img src="../../images/icons/trash.png"/></a></text>)))
</div> 
```

please give me some format to display checkbox into Header .. when i create checkbox in to header error is display which is best overloaded metho....? and we also know that header is accept only string type data not to any element..! please give me hint to perform to this operation ok..it;s argent..?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T07:18:04.207

`WebGrid`助手不支持向列标题添加标记。您可以使用更高级的控件，例如[`Telerik MVC Grid`](http://demos.telerik.com/aspnet-mvc/razor/grid)或[`MVCContrib Grid`](http://mvccontrib.codeplex.com/wikipage?title=Grid)允许这种自定义。

如果您想使用 WebGrid 帮助程序，您可以使用 javascript 将复选框注入到标题中。这是一个丑陋的 hack，但是自从助手不支持呈现正确的标记以来唯一的一个。

这是一个如何使用 jQuery 完成的示例：

```
$(function () {
    $('.gridTable thead tr th:first').html(
        $('<input/>', {
            type: 'checkbox',
            click: function () {
                var checkboxes = $(this).closest('table').find('tbody tr td input[type="checkbox"]');
                checkboxes.prop('checked', $(this).is(':checked'));
            }
        })
    );
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-20T17:21:30.747

```
@{    
var grid = new WebGrid(Model);
var columns = new List<WebGridColumn>();

WebGridColumn checkBoxColumn = grid.Column(header: "{}",
   format: (item) =>
   {
       // I need access to item properties, otherwise this can be simplified    
       return Html.CheckBox("send-checkbox", false, new { @class = "singleCheckBox" });
   });
columns.Add(checkBoxColumn);
}    

string html = grid.GetHtml(columns: columns).ToString();
 @MvcHtmlString.Create(@html.Replace("{}", "<input type='checkbox' id='allCheckBox'/>"));
}        

<script>
    $().ready(function () {
    $('#allCheckBox').click(function () {
        var isChecked = $(this).is(':checked');
        $('.singleCheckBox').prop('checked', isChecked);            
    });

    $('.singleCheckBox').click(function () {
     var allChecked = ($('.singleCheckBox:checked').length == $('.singleCheckBox').length);            
      $('#allCheckBox').prop('checked', allChecked);                        
     });
});
</script> 
```

[我从http://weblogs.asp.net/imranbaloch/archive/2011/09/13/webgrid-helper-with-check-all-checkboxes.aspx](http://weblogs.asp.net/imranbaloch/archive/2011/09/13/webgrid-helper-with-check-all-checkboxes.aspx)借鉴了一些想法

# sql-server - 选择涉及日期操作的语句（最旧-中间-最新）

> ID：15216658
> 
> 赞同：0
> 
> 时间：2013-03-05T05:44:07.517
> 
> 标签：sql-server, select

![在此处输入图像描述](../Images/714db3a3a62950a9ae1984ddaaa9b319.png)

我有这张表，主页上的用户将选择一个 fa id，它将能够打印该特定数据的数据。现在我想要实现的是能够使用相同的 FAID 打印数据，例如 1 并且无法获得 6(Eff_from = 2/3/2012) 的用户 ID，这是 FAID 的下一个日期= 1 (Eff_to(2/2/2012)。

```
 $sql_exp = "SELECT top 1 b.LaptopID, b.Eff_to
FROM    dbo.users a
        INNER JOIN dbo.FA_Laptop b
            ON a.userID = b.UserID
WHERE b.LaptopID=
    (SELECT x.LaptopID 
    FROM FA_Laptop x
     WHERE x.FAID = $faidf) order by b.Eff_to desc, b.FAID" 
```

使用此代码，我只能使用后一个 FAID 打印最新日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:05:45.893

试试这个 ：-

```
Declare @FA_Laptop table 
(FAID int,LaptopID int,userId int,Eff_from date,Eff_to date)

Insert into @FA_Laptop
values
(1,39,1,'1/1/2012','2/2/2012'),
(2,39,4,'5/5/2012','7/7/2012'),
(3,39,6,'2/3/2012','5/4/2012'),
(4,39,8,'7/8/2012','12/24/2012')

;with cte as
(
 Select FAID,LaptopID,userID,Eff_to
 from @FA_Laptop where FAID=1 //Get the value from your PHP page
)
Select c.faid,f.faid as nextFAID,c.userID,f.userId as nextUserID,c.laptopId,
f.laptopId as nextLaptopID from cte c  left join   @FA_Laptop f 
on f.Eff_from=dateadd(day,1,c.eff_to)

Result :

faid  nextFAID  userID    nextUserID    laptopId    nextLaptopID
 1      3             1      6            39               39 
```

使用子查询

```
Select temp.faid,temp.userID,f.userId as nextUserID,temp.laptopId,
f.laptopId as nextLaptopID
from 
(
Select FAID,LaptopID,userID,Eff_to
from @FA_Laptop where FAID=1
) temp  
left join   @FA_Laptop f 
on f.Eff_from=dateadd(day,1,temp.eff_to) 
```

更新 ：

```
SELECT  temp.LaptopID, temp.Eff_to,f.userId as nextUserID,
        f.laptopId as nextLaptopID
FROM    dbo.users a
inner join 
(
  Select FAID,LaptopID,userID,Eff_to
  from FA_Laptop where FAID=$faidf
) temp
on a.userID = temp.UserID
left join   FA_Laptop f 
on f.Eff_from=dateadd(day,1,temp.eff_to) 
```

更新 2：

检查[sqlFiddle](http://sqlfiddle.com/#!3/2e83e/2)的结果

查询是

```
SELECT  fl.userId as nextUserID,fl.eff_from,
        fl.laptopId as nextLaptopID
FROM  FA_Laptop f
inner join   FA_Laptop fl 
on fl.Eff_from=dateadd(day,1,f.eff_to) and f.faid=$faidf
inner join users a
on a.userID=fl.userID 
```

# facebook-graph-api - Facebook graph API giving error - Unsupported get request with type - GraphMethodException

> ID：15216659
> 
> 赞同：1
> 
> 时间：2013-03-05T05:44:08.107
> 
> 标签：facebook-graph-api, access-token, facebook-access-token

I am using application access token with following API to download json -

[https://graph.facebook.com/PageId?access_token=xxxxx&method=GET&metadata=true&format=json](https://graph.facebook.com/PageId?access_token=xxxxx&method=GET&metadata=true&format=json)

I have two Facebook pages added on my Facebook account. so , for first page - I have passed correct Facebook Page Id & its Application access Token then it is is providing response properly

ex : - "Likes" : "xxx", "talking_about_count": xx.

But, when i try this API with my other Facebook page (with second page's - page id & its separately generated Application Access Token ) then it is giving error response -

```
{"error":{"message":"Unsupported get request.","type":"GraphMethodException","code":100}}. 
```

If I use same PageId & Application AccessToken of second page with following API then it is working fine & giving proper response -

PageID/insights/page_views/day?

Any one can help me on this what is the issue with second page with API : - PageId?access_token=xxxxx&method=GET&metadata=true&format=json

As the same Ids are working with Insights Page views API call then what is the issue/error with above API call ?

# ruby-on-rails - 找不到 new_post_path 等模板函数

> ID：15216680
> 
> 赞同：2
> 
> 时间：2013-03-05T05:46:17.810
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3.2

我目前收到错误：

```
undefined local variable or method `new_post_path' 
```

在我的索引页面上，模型设置为：

post.rb:

```
class Post < ActiveRecord::Base
  attr_accessible :postcontent, :poster, :postname
  belongs_to :user
end 
```

用户.rb：

```
class User < ActiveRecord::Base
  attr_accessible :email, :password, :username
  has_many :posts
end 
```

我的索引页面模板如下：

```
<h1>Listing posts</h1>

<table>
  <tr>
    <th>Postname</th>
    <th>Postcontent</th>
    <th>Poster</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>

<% @posts.each do |post| %>
  <tr>
    <td><%= post.postname %></td>
    <td><%= post.postcontent %></td>
    <td><%= post.poster %></td>
    <td><%= link_to 'Show', post %></td>
    <td><%= link_to 'Edit', edit_post_path(post) %></td>
    <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td>
  </tr>
<% end %>
</table>

<br />

<%= link_to 'New Post', new_post_path %> 
```

控制器是：

```
 def index
    @posts = Post.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @posts }
    end
  end 
```

至于路由，我的`rake routes`输出是：

```
 user_posts GET    /users/:user_id/posts(.:format)          posts#index
               POST   /users/:user_id/posts(.:format)          posts#create
 new_user_post GET    /users/:user_id/posts/new(.:format)      posts#new
edit_user_post GET    /users/:user_id/posts/:id/edit(.:format) posts#edit
     user_post GET    /users/:user_id/posts/:id(.:format)      posts#show
               PUT    /users/:user_id/posts/:id(.:format)      posts#update
               DELETE /users/:user_id/posts/:id(.:format)      posts#destroy
         users GET    /users(.:format)                         users#index
               POST   /users(.:format)                         users#create
      new_user GET    /users/new(.:format)                     users#new
     edit_user GET    /users/:id/edit(.:format)                users#edit
          user GET    /users/:id(.:format)                     users#show
               PUT    /users/:id(.:format)                     users#update
               DELETE /users/:id(.:format)                     users#destroy
          root        /                                        home#index 
```

我的路由文件是：

```
 resources :users do
    resources :posts
  end
  root :to => "home#index" 
```

然而值得注意的是，我在*所有*其他与`posts#*`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:59:58.080

您`posts`拥有`users`. 你需要有一个像`new_user_post_path(@user)`. 确保你有一个 `@user`来传递这个助手。

在控制器`index`的操作中，`posts`像这样获取用户。

```
@user = User.first 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:50:51.430

您需要`User`在 's path 中传递 object`Post`类似的东西

```
@user or current_user
new_user_post_path(@user) 
```

# ios - ios无法显示数据库中的图像

> ID：15216690
> 
> 赞同：0
> 
> 时间：2013-03-05T05:46:41.697
> 
> 标签：ios, arrays, sqlite

嘿伙计们，我正在创建一个程序，它从数据库中获取图像并将其存储在数组中。但是在将它们存储在数组中之后，我无法显示它们。引发了一个异常，当我用断点检查它时，它在一行中给了我异常，这是我的代码和那一行，

```
 data=[MyDatabase new];
    slideImages=[data OpenMyDatabase:@"SELECT pic_name FROM exterior":@"pic_name"];
    [self putImageViewsInScrollView:slideImages.count];
       self.FullScreenImageScroller.delegate=self;

}

-(void) putImageViewsInScrollView:(int)numberOfImageViews
{

     for(int i=0 ;i< numberOfImageViews; i++)
    {

        UIImageView *fullScreenImageView=[[UIImageView alloc]initWithImage:[UIImage imageNamed:[slideImages objectAtIndex:i]]];
        fullScreenImageView.frame = CGRectMake((WIDTH_OF_IMAGE * i)  , 0, WIDTH_OF_IMAGE, HEIGHT_OF_IMAGE);
        fullScreenImageView.image= [UIImage imageNamed:[slideImages objectAtIndex:i]];
        [self.FullScreenImageScroller addSubview:fullScreenImageView];
    }

    [self.FullScreenImageScroller setContentSize:CGSizeMake(WIDTH_OF_SCROLL_PAGE * ([slideImages count]), HEIGHT_OF_IMAGE)];
    [self.FullScreenImageScroller setContentOffset:CGPointMake(0, 0)];
    [self.FullScreenImageScroller scrollRectToVisible:CGRectMake(WIDTH_OF_IMAGE,0,WIDTH_OF_IMAGE,HEIGHT_OF_IMAGE) animated:NO];

} 
```

这是断点给出异常的代码行，

```
UIImageView *fullScreenImageView=[[UIImageView alloc]initWithImage:[UIImage imageNamed:[slideImages objectAtIndex:i]]]; 
```

我现在该怎么办，提前帮助n谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:49:51.703

图像存储在数据库中的**NSData**而不是**UIImage**所以你将**NSData**放在数据库中并从数据库中获取**NSData**并从此**NSData**获取图像......并将图像存储在数据库中不是一个好概念......将图像保存在文件夹中并保存路径数据库中的图像...并从此路径获取图像以显示...

如果您将 NSData 存储在数据库中，则从这行代码中获取图像

```
UIImage *image = [UIImage imageWithData:(NSData *)]; 
```

否则，如果您希望在您的文档文件夹中使用此图像，请使用此代码

将图像保存在 App 内

```
-(void) saveImage:(UIImage *)image withFileName:(NSString *)imageName ofType:(NSString *)extension inDirectory:(NSString *)directoryPath {
    if ([[extension lowercaseString] isEqualToString:@"png"]) {
        [UIImagePNGRepresentation(image) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"png"]] options:NSAtomicWrite error:nil];
    } else if ([[extension lowercaseString] isEqualToString:@"jpg"] || [[extension lowercaseString] isEqualToString:@"jpeg"]) {
        [UIImageJPEGRepresentation(image, 1.0) writeToFile:[directoryPath stringByAppendingPathComponent:[NSString stringWithFormat:@"%@.%@", imageName, @"jpg"]] options:NSAtomicWrite error:nil];
    } else {
        ALog(@"Image Save Failed\nExtension: (%@) is not recognized, use (PNG/JPG)", extension);
    }
}

and save this image path in database 
```

首先是来自数据库的这条路径，然后使用这段代码

从 URL 获取图像

```
-(UIImage *) getImageFromURL:(NSString *)fileURL {
    UIImage * result;

    NSData * data = [NSData dataWithContentsOfURL:[NSURL URLWithString:fileURL]];
    result = [UIImage imageWithData:data];

    return result;
} 
```

将图像插入 SQLite：

```
sqlite3_bind_blob(compiledStatement,i, [image_data bytes], [image_data length], SQLITE_TRANSIENT); 
```

并从 SQLite 获取图像：

```
NSData *dataForCachedImage = [[NSData alloc] initWithBytes:sqlite3_column_blob(compiledStatement, i) length: sqlite3_column_bytes(compiledStatement, i)];           
UIImage *img = [UIImage imageWithData:dataForCachedImage]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:50:56.653

我认为你没有保留`slideImages`。如果您正在填充正确的 UIImage 对象，请保留数组`slideImages`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:53:01.023

I assume you store NSData type in slideImages. In this case, you should use `[UIImage imageWithData:(NSData *)]` to initialize image object.

# ajax - 不允许使用 AJAX 来源

> ID：15216691
> 
> 赞同：0
> 
> 时间：2013-03-05T05:46:51.627
> 
> 标签：ajax

AJAX 调用有问题。我认为这个大而时髦的函数本质上会返回一个是/现在的字符串。

```
usdaurl = 'http://eligibility.sc.egov.usda.gov/eligibility/eligibilityservice?eligibilityType=Property&requestString=<?xml version="1.0"?><Eligibility xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="/var/lib/tomcat5/webapps/eligibility/Eligibilitywsdl.xsd"><PropertyRequest StreetAddress1="'+street+'" StreetAddress2="" StreetAddress3="" City="'+city+'" State="'+state+'" County="" Zip="'+zip+'" Program="RBS"></PropertyRequest></Eligibility>';
$.ajax({
    url: usdaurl,
    dataType: 'XML',
    success: function(xml){
        var usda = $('Property').attr('Eligibility');
    }
}); 
```

这是简单的版本，我已将问题深入到此功能。这是我不断收到的错误：

```
XMLHttpRequest cannot load http://eligibility.sc.egov.usda.gov/eligibility/eligibilityservice?eligibil…%2262034%22%20Program=%22RBS%22%3E%3C/PropertyRequest%3E%3C/Eligibility%3E. 
Origin http://[mydomain ;)] is not allowed by Access-Control-Allow-Origin. 
```

查询尝试访问的 URL 有效。如果我只是把它放到浏览器中，我会得到一些 XML。但是当我尝试使用 AJAX 时，我得到了这个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:48:33.203

不允许 Ajax 开箱即用地调用其他域。有一些特定于浏览器的解决方法。

# spring - beancreation异常的Spring安全错误

> ID：15216700
> 
> 赞同：2
> 
> 时间：2013-03-05T05:48:01.770
> 
> 标签：spring, spring-security, javabeans

我有一些错误，如下所示。我正在使用`struts 2`，`spring 3.2` 并且`spring 3.1`

我添加了以下 jar 文件，即

```
Spring-aop-3.2.1.jar
Spring-beans-3.2.1.jar
Spring-context-3.2.1.jar 
Spring-core-3.2.1.jar 
Spring-expression-3.2.1.jar
Spring-web-3.2.1.jar 
Spring-security-acl-3.1.3.jar
Spring-security-aspects-3.1.3.jar 
Spring-security-cas-3.1.3.jar 
Spring-security-config-3.1.3.jar 
Spring-security-core-3.1.3.jar 
Spring-security-crypto-3.1.3.jar 
Spring-security-ldap-3.1.3.jar 
Spring-security-openid-3.1.3.jar 
Spring-security-remoting-3.1.3.jar   
Spring-security-taglib-3.1.3.jar 
Spring-security-web-3.1.3.jar 
Aopalliance-1.0.jar

Mar 04, 2013 3:19:40 PM org.apache.catalina.core.StandardContext listenerStart
SEVERE: Exception sending context initialized event to listener instance of class org.springframework.web.context.ContextLoaderListener
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.filterChains': Cannot resolve reference to bean 'org.springframework.security.web.DefaultSecurityFilterChain#1' while setting bean property 'sourceList' with key [1]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.DefaultSecurityFilterChain#1': Cannot resolve reference to bean 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0' while setting constructor argument with key [2]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting bean property 'authenticationManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:329)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:608)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    at org.springframework.web.context.ContextLoader.configureAndRefreshWebApplicationContext(ContextLoader.java:389)
    at org.springframework.web.context.ContextLoader.initWebApplicationContext(ContextLoader.java:294)
    at org.springframework.web.context.ContextLoaderListener.contextInitialized(ContextLoaderListener.java:112)
    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4797)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5291)

    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:722)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.DefaultSecurityFilterChain#1': Cannot resolve reference to bean 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0' while setting constructor argument with key [2]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting bean property 'authenticationManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:329)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveManagedList(BeanDefinitionValueResolver.java:353)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:154)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:615)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1049)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:953)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323)
    ... 31 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter#0': Cannot resolve reference to bean 'org.springframework.security.authentication.ProviderManager#0' while setting bean property 'authenticationManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:329)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323)
    ... 45 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.ProviderManager#0': Cannot resolve reference to bean 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0' while setting constructor argument; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:329)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveConstructorArguments(ConstructorResolver.java:615)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:148)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1049)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:953)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:490)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323)
    ... 55 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.config.authentication.AuthenticationManagerFactoryBean#0': FactoryBean threw exception on object creation; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:149)
    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:102)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1446)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:306)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323)
    ... 67 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authenticationManager': Cannot resolve reference to bean 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0' while setting constructor argument with key [0]; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true

    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:142)
    ... 72 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.authentication.dao.DaoAuthenticationProvider#0': Cannot resolve reference to bean 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0' while setting bean property 'userDetailsService'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true

    at org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323)
    ... 88 more
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.security.provisioning.InMemoryUserDetailsManager#0': Instantiation of bean failed; nested exception is org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:288)

    ... 98 more
Caused by: org.springframework.beans.BeanInstantiationException: Could not instantiate bean class [org.springframework.security.provisioning.InMemoryUserDetailsManager]: Constructor threw exception; nested exception is java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:163)
    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:121)
    at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:280)
    ... 107 more
Caused by: java.lang.IllegalArgumentException: [Assertion failed] - this expression must be true

    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:148)
    ... 109 more 
```

我也更改了角色名称，但我仍然遇到相同的错误。一些人告诉答案如何将`hasRole([ROLE])`方法更改为`isanonymous()`

# c++ - 游戏菜单在发布模式下不关闭，但在调试模式下工作

> ID：15216703
> 
> 赞同：0
> 
> 时间：2013-03-05T05:48:18.730
> 
> 标签：c++, visual-studio-2010, sfml

我正在使用 VS 2010。我的游戏内菜单在发布模式下没有关闭有问题。它在调试模式下工作。这是我的代码，尽可能多地删除了无关代码，希望您仍然可以看到它的作用。

应该发生的是当按下 ESC 键时，菜单显示，然后用户单击一个按钮并返回一个 int 告诉 Game 类该做什么。当我单击退出时，它可以工作。但是，当我单击其他任何内容时，会执行正确的操作，菜单会关闭一闪而过，然后又重新启动。我不知道为什么它保持开放。如果我在菜单启动时按下按钮（例如 ESC），菜单会按预期关闭。

```
Game::GameLoop
{ //etc code &Update and Draw Functions
    if(currentEvent.Type == sf::Event::KeyPressed && currentEvent.Key.Code == sf::Key::Escape)
    {
        ShowGameMenu();
    }
    //Code
    //Display() - clear buffer to the screen
}

void Game::ShowGameMenu()
{
    int bMenu = 0;
    bMenu = menu.Show(m_MainWindow);

    switch (bMenu) {
    case 1: //gameOn
        m_GameState = dlb::Playing;
        break;//etc cases that aren't the problem
    }
}

int Menu::Show(sf::RenderWindow& window)
{//Various menuState code that isn't the problem removed - This passes the returnCode back to game
    int code = 0;
    code = MainMenu(window);
    return code;
}

//returns 1-gameOn, 2-SplashScreen, 0-close, 3-restartLvl, 4-restartGame, 5-option,
int Menu::MainMenu(sf::RenderWindow& window)
{
    int returnCode = -1;
    bool running = true;
    sprite.SetPosition(center);

    sf::Event currentEvent;

    while (running)
    {
        window.GetEvent(currentEvent);

        Draw(window); //Displays the menu on top of game window

        if(currentEvent.Type == sf::Event::KeyPressed && currentEvent.Key.Code == sf::Key::Escape) //This works too
        {
            returnCode = 1;
            running = false;
        }

        if (currentEvent.Type == sf::Event::MouseButtonReleased && currentEvent.MouseButton.Button == sf::Mouse::Left)
        {
            sf::Vector2f mouse = sf::Vector2f((float)currentEvent.MouseButton.X, (float)currentEvent.MouseButton.Y);

            while ((*currItr)->IsEnd() != true)
            {
                if ((*currItr)->isClicked(mouse))
                {
                    //returns 1-gameOn, 2-SplashScreen, 0-close, 3-restartLvl, 4-restartGame, 5-option,
                    switch ((*currItr)->GetType())
                    {
                    case dlb::Exit:
                        returnCode = 0;
                        break;
                    case dlb::ReturnGame:
                        returnCode = 1;
                        break;
                        //various cases removed here because they matter not
                    }
                    running = false;
                    break;
                }
                else
                {
                    ++currItr;
                }
            }
        }
    }

    return returnCode;
} 
```

很抱歉有这么多代码，我试图删除所有无助于解释发生了什么的东西。如果您需要更多，我可以发布更多代码并尝试解释我不清楚的任何内容。在这一点上，任何想法都会受到赞赏，我已经尝试了我能想到的一切，除了打破它并不得不修复它之外什么也没做。

**[更新]**

它返回正确的代码，如果我选择重新启动（任一风味）、退出或 SplashScreen，我会得到正确的行为。当我返回 1 继续游戏时，菜单闪烁关闭然后重新打开。但只有当我点击时。如果我按下代码中其他任何位置的任何其他键或按钮，它就会关闭。（例如，在单击之前按住向上箭头移动播放器，它将正确关闭菜单并移动角色。）我已经上下搜索了我的代码，并且在任何地方都没有看到任何未初始化的变量。我愿意尝试任何事情；我完全不知所措。

# c# - asp.net mvc中的服务器端html过滤库

> ID：15216706
> 
> 赞同：2
> 
> 时间：2013-03-05T05:48:27.907
> 
> 标签：c#, asp.net-mvc-4, tinymce

我正在使用 TinyMCE。我需要服务器端 Html 输入过滤函数或库。TinyMCE 推荐

*   [html法律](http://www.bioinformatics.org/phplabware/internal_utilities/htmLawed/)
*   [HTML净化器](http://htmlpurifier.org/)
*   [Zend 过滤器输入](http://framework.zend.com/manual/en/zend.filter.input.html)

所有这些都只与 PHP 兼容。但我正在使用`asp.net MVC`

请告诉我，是否有任何可用的过滤`library`或`attribute`在 asp.net MVC 中

例如像这样

```
[HtmlInputFilter] //<<--
public ActionResult Post(string html){
...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:00:08.767

您可以使用[Microsoft AntiXSS](http://wpl.codeplex.com/)库来清理 HTML。

如果您想处理自己的标签和属性白名单，AntiXSS 库不适合，因为它没有为您提供必要的自定义挂钩。一种可能性是推出自己的消毒剂（当然风险自负）。例如，您可以使用[`HTML Agility Pack`](http://htmlagilitypack.codeplex.com/)。这是[`blog post`](http://eksith.wordpress.com/2011/06/14/whitelist-santize-htmlagilitypack/)一个示例消毒剂的说明：

```
public static class HtmlUtility
{
    // Original list courtesy of Robert Beal :
    // http://www.robertbeal.com/37/sanitising-html

    private static readonly Dictionary<string, string[]> ValidHtmlTags =
        new Dictionary<string, string[]>
        {
            {"p", new string[]          {"style", "class", "align"}},
            {"div", new string[]        {"style", "class", "align"}},
            {"span", new string[]       {"style", "class"}},
            {"br", new string[]         {"style", "class"}},
            {"hr", new string[]         {"style", "class"}},
            {"label", new string[]      {"style", "class"}},

            {"h1", new string[]         {"style", "class"}},
            {"h2", new string[]         {"style", "class"}},
            {"h3", new string[]         {"style", "class"}},
            {"h4", new string[]         {"style", "class"}},
            {"h5", new string[]         {"style", "class"}},
            {"h6", new string[]         {"style", "class"}},

            {"font", new string[]       {"style", "class", "color", "face", "size"}},
            {"strong", new string[]     {"style", "class"}},
            {"b", new string[]          {"style", "class"}},
            {"em", new string[]         {"style", "class"}},
            {"i", new string[]          {"style", "class"}},
            {"u", new string[]          {"style", "class"}},
            {"strike", new string[]     {"style", "class"}},
            {"ol", new string[]         {"style", "class"}},
            {"ul", new string[]         {"style", "class"}},
            {"li", new string[]         {"style", "class"}},
            {"blockquote", new string[] {"style", "class"}},
            {"code", new string[]       {"style", "class"}},

            {"a", new string[]          {"style", "class", "href", "title"}},
            {"img", new string[]        {"style", "class", "src", "height", "width",
                "alt", "title", "hspace", "vspace", "border"}},

            {"table", new string[]      {"style", "class"}},
            {"thead", new string[]      {"style", "class"}},
            {"tbody", new string[]      {"style", "class"}},
            {"tfoot", new string[]      {"style", "class"}},
            {"th", new string[]         {"style", "class", "scope"}},
            {"tr", new string[]         {"style", "class"}},
            {"td", new string[]         {"style", "class", "colspan"}},

            {"q", new string[]          {"style", "class", "cite"}},
            {"cite", new string[]       {"style", "class"}},
            {"abbr", new string[]       {"style", "class"}},
            {"acronym", new string[]    {"style", "class"}},
            {"del", new string[]        {"style", "class"}},
            {"ins", new string[]        {"style", "class"}}
        };

    /// <summary>
    /// Takes raw HTML input and cleans against a whitelist
    /// </summary>
    /// <param name="source">Html source</param>
    /// <returns>Clean output</returns>
    public static string SanitizeHtml(string source)
    {
        HtmlDocument html = GetHtml(source);
        if (html == null) return String.Empty;

        // All the nodes
        HtmlNode allNodes = html.DocumentNode;

        // Select whitelist tag names
        string[] whitelist = (from kv in ValidHtmlTags
                              select kv.Key).ToArray();

        // Scrub tags not in whitelist
        CleanNodes(allNodes, whitelist);

        // Filter the attributes of the remaining
        foreach (KeyValuePair<string, string[]> tag in ValidHtmlTags)
        {
            IEnumerable<HtmlNode> nodes = (from n in allNodes.DescendantsAndSelf()
                                           where n.Name == tag.Key
                                           select n);

            if (nodes == null) continue;

            foreach (var n in nodes)
            {
                if (!n.HasAttributes) continue;

                // Get all the allowed attributes for this tag
                HtmlAttribute[] attr = n.Attributes.ToArray();
                foreach (HtmlAttribute a in attr)
                {
                    if (!tag.Value.Contains(a.Name))
                    {
                        a.Remove(); // Wasn't in the list
                    }
                    else
                    {
                        // AntiXss
                        a.Value =
                            Microsoft.Security.Application.Encoder.UrlPathEncode(a.Value);
                    }
                }
            }
        }

        return allNodes.InnerHtml;
    }

    /// <summary>
    /// Takes a raw source and removes all HTML tags
    /// </summary>
    /// <param name="source"></param>
    /// <returns></returns>
    public static string StripHtml(string source)
    {
        source = SanitizeHtml(source);

        // No need to continue if we have no clean Html
        if (String.IsNullOrEmpty(source))
            return String.Empty;

        HtmlDocument html = GetHtml(source);
        StringBuilder result = new StringBuilder();

        // For each node, extract only the innerText
        foreach (HtmlNode node in html.DocumentNode.ChildNodes)
            result.Append(node.InnerText);

        return result.ToString();
    }

    /// <summary>
    /// Recursively delete nodes not in the whitelist
    /// </summary>
    private static void CleanNodes(HtmlNode node, string[] whitelist)
    {
        if (node.NodeType == HtmlNodeType.Element)
        {
            if (!whitelist.Contains(node.Name))
            {
                node.ParentNode.RemoveChild(node);
                return; // We're done
            }
        }

        if (node.HasChildNodes)
            CleanChildren(node, whitelist);
    }

    /// <summary>
    /// Apply CleanNodes to each of the child nodes
    /// </summary>
    private static void CleanChildren(HtmlNode parent, string[] whitelist)
    {
        for (int i = parent.ChildNodes.Count - 1; i >= 0; i--)
            CleanNodes(parent.ChildNodes[i], whitelist);
    }

    /// <summary>
    /// Helper function that returns an HTML document from text
    /// </summary>
    private static HtmlDocument GetHtml(string source)
    {
        HtmlDocument html = new HtmlDocument();
        html.OptionFixNestedTags = true;
        html.OptionAutoCloseOnEnd = true;
        html.OptionDefaultStreamEncoding = Encoding.UTF8;

        html.LoadHtml(source);

        return html;
    }
} 
```

# c# - 使用 jquery 和 Masterpage 时不会触发 Webmethod

> ID：15216708
> 
> 赞同：1
> 
> 时间：2013-03-05T05:48:35.850
> 
> 标签：c#, jquery, asp.net

在这里，我在 jquery 中调用 webmethod...如果我在普通的 aspx 页面中运行此代码，则 webmethod 被触发..但是当我使用母版页并将此代码放入子页面（Default4.aspx）然后 web 方法没有被解雇。我使用了 colorbox jquery 插件。在这里，当我单击任何链接时，将打开一个弹出窗口并显示文件内容我的代码如下...

**Default4.aspx**

```
<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">
    <link rel="stylesheet" href="example1/colorbox.css" type="text/css" />

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js" type="text/javascript"></script>

    <script src="jquery.colorbox.js" type="text/javascript"></script>

    <script type="text/javascript">
            $(document).ready(function(){

                //Examples of how to assign the ColorBox event to elements
                $(".group1").colorbox({rel:'group1'});
                $(".group2").colorbox({rel:'group2', transition:"fade"});
                $(".group3").colorbox({rel:'group3', transition:"none", width:"75%", height:"75%"});
                $(".group4").colorbox({rel:'group4', slideshow:true});
                $(".ajax").colorbox();
                $(".youtube").colorbox({iframe:true, innerWidth:425, innerHeight:344});
                $(".vimeo").colorbox({iframe:true, innerWidth:500, innerHeight:409});

                $(".inline").colorbox({inline:true, width:"50%"});
                $(".callbacks").colorbox({
                    onOpen:function(){ alert('onOpen: colorbox is about to open'); },
                    onLoad:function(){ alert('onLoad: colorbox has started to load the targeted content'); },
                    onComplete:function(){ alert('onComplete: colorbox has displayed the loaded content'); },
                    onCleanup:function(){ alert('onCleanup: colorbox has begun the close process'); },
                    onClosed:function(){ alert('onClosed: colorbox has completely closed'); }
                });

                $('.non-retina').colorbox({rel:'group5', transition:'none'})
                $('.retina').colorbox({rel:'group5', transition:'none', retinaImage:true, retinaUrl:true});

                //Example of preserving a JavaScript event for inline calls.
                $("#click").click(function(){ 

                    $('#click').css({"background-color":"#f00", "color":"#fff", "cursor":"inherit"}).text("Open this window again and this message will still be here.");
                    return false;
                });

               $("[id$=LinkButton2]").click(function() {
              alert('child');
                $.ajax({
                  type: "POST",
                 url: "Default4.aspx/lnkbtn1",
                  data: "{}",
                  contentType: "application/json; charset=utf-8",
                  dataType: "json",
                  success: function(msg) {
                    alert(msg.d);
                    // Replace the div's content with the page method's return.
                    $("#[id$=LinkButton2]").attr('href',msg.d);

                  }
                });

             });
             $(".iframe").colorbox({iframe:true, width:"60%", height:"80%"});
            });
        </script>
    <style type="text/css">
        .arrowlistmenu
        {
            width: 180px; /*width of menu*/
        }
        .arrowlistmenu .headerbar
        {
            font: bold 14px Arial;
            color: white;
            background: black url(media/titlebar.png) repeat-x center left;
            margin-bottom: 10px; /*bottom spacing between header and rest of content*/
            text-transform: uppercase;
            padding: 4px 0 4px 10px; /*header text is indented 10px*/
        }
        .arrowlistmenu ul
        {
            list-style-type: none;
            margin: 0;
            padding: 0;
            margin-bottom: 8px; /*bottom spacing between each UL and rest of content*/
        }
        .arrowlistmenu ul li
        {
            padding-bottom: 2px; /*bottom spacing between menu items*/
        }
        .arrowlistmenu ul li a
        {
            color: #A70303;
            background: url(media/arrowbullet.png) no-repeat center left; /*custom bullet list image*/
            display: block;
            padding: 2px 0;
            padding-left: 19px; /*link text is indented 19px*/
            text-decoration: none;
            font-weight: bold;
            border-bottom: 1px solid #dadada;
            font-size: 90%;
        }
        .arrowlistmenu ul li a:visited
        {
            color: #A70303;
        }
        .arrowlistmenu ul li a:hover
        {
            /*hover state CSS*/
            color: #A70303;
            background-color: #F3F3F3;
        }
        .style1
        {
            width: 100%;
        }
        .style2
        {
            width: 99%;
        }
    </style>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="ContentPlaceHolder1" runat="Server">

 <div id="Result">
        Click here for the time.</div>

    <p>
        <a runat="server" id="a" class='iframe' href="Uploadedfiles/Education Portal.xlsx.1.html">
            Outside Webpage (Iframe)</a></p>
    <p>
        <a runat="server" id="a1" class='iframe' href="~/Images/Desert.jpg">Image
            (Iframe)</a></p>

        <asp:LinkButton ID="LinkButton2" runat="server"  CssClass="iframe"
       >LinkButton</asp:LinkButton>

</asp:Content> 
```

**。CS**

```
 [WebMethod]
    public static string lstbtn1()
    {

        return "Images/Desert.jpg";
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:03:46.023

```
[WebMethod]
public static string lstbtn1()
{

    return "Images/Desert.jpg";
} 
```

试试这样

# reporting-services - 客户端渲染时出错

> ID：15216711
> 
> 赞同：1
> 
> 时间：2013-03-05T05:48:51.310
> 
> 标签：reporting-services, ssrs-2008

我有一份可以正常工作的报告。我创建了一个具有两个分组级别的报告的新版本，它在 Visual Studio 中完美运行。我将它部署到服务器（在 SharePoint 集成模式下）。报告运行了一段时间（显示微调器），然后我收到错误：

> 客户端渲染时出错

因此，它似乎在整理数据，但在尝试渲染数据时却卡住了。

我可以将报告从服务器直接呈现为 PDF 和 Excel，并且可以正确呈现。只是当它尝试在浏览器中呈现时，它才不会呈现。

Reporting Services 日志仅显示它处理了报告并且没有任何错误。

有没有人知道可能导致这种情况的任何线索？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-20T23:35:11.437

在 Visual Studio 中渲染为 HTML 时（在 VS 中渲染后使用保存按钮），它给了我以下错误消息：

> 本地报告处理过程中发生错误。
> 
> 指数超出范围。必须是非负数且小于集合的大小。
> 
> 参数名称：索引

我发现[这篇文章](http://social.msdn.microsoft.com/Forums/sqlserver/en-US/2b921e79-a618-4cd7-8d71-84ef9c40ec6d/index-was-out-of-range-must-be-nonnegative-and-less-than-the-size-of-the-collection-parameter)表明它与页眉或页脚中的项目对于页眉或页脚来说过大有关，并且特别提到了图像。我在标题中有一张图片。我的图像看起来不错，但距左边距 0.00475 厘米，此时它应该向左齐平（并且在复制此报告的报告中向左齐平）。我将其更改为定位在 0,0 并且报告现在以 HTML 呈现。

它的小东西...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T23:41:51.313

当我收到错误时：

```
An error occurred during client rendering.
An error has occurred during report processing.
The data source 'XYZDataSource' cannot be found. 
```

它总是在我将报告从 BIDS 部署到服务器后发生。

为了解决它，我*关闭浏览器（页面）并* **启动一个新的浏览器窗口**，输入 URL 并再次工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-14T12:08:44.513

当我在标题底部有一条线以某种方式被正文覆盖时，我收到了同样的错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-06T18:35:18.287

当我在表中有表时出现此错误，并且内部表具有列可见性表达式。当每列的可见性表达式导致错误值（导致它们全部被隐藏）时，我会收到此错误。我在行中添加了一个额外的超细列，然后就可以了。

# android - SurfaceView 在播放视频时未显示带有媒体播放器的播放/暂停/后退/前进图标

> ID：15216713
> 
> 赞同：0
> 
> 时间：2013-03-05T05:49:02.370
> 
> 标签：android, surfaceview, android-mediaplayer

我正在使用媒体播放器和表面视图来播放视频，但是在播放视频时没有图标可以播放或暂停，因为我们在播放视频时使用视频视图播放或暂停图标，我应该调用任何方法来获取这些图标，或者我必须手动放置表面视图。请指导我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:01:14.570

您需要将媒体控制器与媒体播放器一起使用

通过调用 setMedaiController 方法

# google-cloud-storage - 在谷歌云存储中创建存储桶之前需要验证域的一种方法？

> ID：15216714
> 
> 赞同：4
> 
> 时间：2013-03-05T05:49:08.587
> 
> 标签：google-cloud-storage

大约一个月前，我使用谷歌云存储建立了一个静态网站。在我可以创建一个公共存储桶之前，我被要求验证我是否真正拥有我命名存储桶的域。我必须将文件从 google 上传到现有主机，以便 google 验证域所有权。

我确实理解这样做的必要性。但是，如果我刚刚购买了一个域并且没有其他主机，我看不出我将如何证明我拥有该域。

我错过了绕过这个限制的方法吗？是否有另一种更用户友好的方式在谷歌云存储上创建公共网站？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-05T06:53:12.507

验证域名所有权的三种方法：

1.  将特殊的 Meta 标签添加到网站的主页。
2.  将特殊的 HTML 文件上传到站点。
3.  将 DNS TXT 记录添加到域的 DNS 配置。

前两种需要将域托管在某处，但第三种方法是纯粹的 DNS 配置，因此无需托管域即可完成。[您可以在此处](https://developers.google.com/storage/docs/bucketnaming#verification)阅读有关这些方法的更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-15T07:47:10.307

使用 google 提供的信息添加 CName。这将解决您验证域所有权的问题。

# node.js - 如何使用nodejs从postgresql中检索数据并将其显示在我发出请求的同一页面上

> ID：15216715
> 
> 赞同：0
> 
> 时间：2013-03-05T05:49:14.347
> 
> 标签：node.js, postgresql-9.1

我在服务器端使用它：

```
app.get('/getdata', function(request, response) {
  client.query("SELECT time, name, assembly FROM timings order by time limit 10", function(err, results) {
    console.log(results.rows[0]);

    if (err) {
      throw err;
    }
  }
  //here i want to do something to send results to my html page
}); 
```

这在客户端html页面上

```
<form action="/getdata" method="get">
<input type="submit" value="Submit" ></input>
</form> 
```

另外，请帮助我了解如何在同一个 HTML 页面上显示数据。我必须在哪里放置我的代码，因为我是 nodejs 的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:59:05.313

您的代码可能如下所示：

```
app.get('/getdata', function(request, response) {
  client.query("SELECT time, name, assembly FROM timings order by time limit 10", function(err, results) {
    if (err) {
      throw err;
    }
    response.send(results.rows); // assumes 'results.rows' can be serialized to JSON
  });
}); 
```

您可以使用 AJAX 请求从 HTML 页面中检索该信息。假设您使用 jQuery（不包括错误处理）：

```
$.getJSON('/getdata', function(response) {
  // do something with the response, which should be the same as 'results.rows' above
}); 
```

# perforce - 如果文件是通过另一个客户端提交的，我可以对为“添加”打开的文件做什么

> ID：15216717
> 
> 赞同：11
> 
> 时间：2013-03-05T05:49:36.193
> 
> 标签：perforce

使用 Perforce，我有以下情况：

*   `foo.txt`在客户端创建了一个新文件`client_a`，打开它进行**添加**
*   搁置`foo.txt`,`client_a`未搁置`client_b`
*   现在`foo.txt`可以**添加**了`client_b`
*   提交`foo.txt`于`client_a`

现在我的问题是如何`foo.txt`在 client_b 中进行清理。也许它与我想保留的仓库版本相比有一行更改。理想情况下，我想对新签入的文件执行**解析**操作，但我不允许这样做，因为它已打开以供添加。

现在我`foo.txt#1 - add change default`的客户端中有这个文件。

我无法重新打开文件（'没有任何改变'），我无法将它与 depot 进行比较（'文件未打开以进行编辑'），我无法针对 depot 解决它（'没有要解析的文件'） ，我无法打开它进行编辑（'无法编辑，已打开以进行添加'）。

有没有办法让 perforce 重新打开它作为编辑而不是添加？我知道我可以将它复制到一个临时文件，还原，重新打开以添加，然后重新复制临时文件，但这似乎相当不雅。是否有任何命令可以做我想做的事，或者有充分的理由我没有看到为什么它被禁止？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-05T06:21:41.120

仅比上一段中的评论更优雅，但您应该能够：

1.  `foo.txt`中恢复`client_b`。由于它被标记为**添加**文件将保留在磁盘上，没有任何变化
2.  `foo.txt`与同步`-k`。这使服务器认为您拥有最新版本而无需修改本地文件。
3.  签出`foo.txt`以进行编辑。与有修订的差异应该显示更改。
4.  提交您的更改。

# asp.net - FancyBox 在 UserControl 中使用时不会触发

> ID：15216724
> 
> 赞同：3
> 
> 时间：2013-03-05T05:49:59.360
> 
> 标签：asp.net, user-controls, fancybox, webforms, master-pages

我有 ASP.Net Masterpage 设计并且必须使用 Fancybox 将视频显示为模态，当我在 ContenPage 上显示视频并将所有相关脚本放置到该页面上的 FB 时，它在该页面上运行良好，没有任何问题。但我还需要在某些页面上显示前 10 个视频作为用户控件。我所做的是创建一个用户控件并将所有相关脚本放在该用户控件中，除了我在母版页中使用的主 jQuery 并作为 CDE 下载。

在这种情况下，fancybox 不会触发。

如果我在所有我不想的内容页面上涂黑花式框相关的脚本，我就会让它工作。

我希望脚本在 userControl

我在下面放置了用户控件和母版页的示例代码。

**用户控制**

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="ucMostPopular.ascx.cs" Inherits="ucMostPopular"  %>

    <script src="<%= Helper.ResolveUrl("~/scripts/fancybox/jquery.fancybox-1.3.4.js") %>" type="text/javascript"></script>
    <link href="<%= Helper.ResolveUrl("~/styles/english-jquery.fancybox-1.3.4.css") %>" rel="stylesheet" type="text/css" />
  <script type="text/javascript">

   //Code to Reinitialize Fancybox script when using update panel START
    var prm = Sys.WebForms.PageRequestManager.getInstance();
    prm.add_initializeRequest(InitializeRequest);
    prm.add_endRequest(EndRequest);
    function InitializeRequest(sender, args) { }
    function EndRequest(sender, args) { InitMyFancyBox(); }
    $(document).ready(function () {
        InitMyFancyBox();
    });

    function InitMyFancyBox() {
        $(document).ready(function () {
            $(".youtube").click(function () {
                // first, get the value from the alt attribute
                var newTitle = $(this).find("img").attr("alt"); // Get alt from image
                $.fancybox({
                    'padding': 0,
                    'autoScale': false,
                    'transitionIn': 'none',
                    'transitionOut': 'none',
                    //'title': this.title, // we will replace this line
                    'title': newTitle,  //<--- this will do the trick
                    'width': 680,
                    'height': 495,
                    'href': this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
                    'type': 'swf',
                    'swf': { 'wmode': 'transparent', 'allowfullscreen': 'true' }

                });
              // alert(this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'));
                $.ajax({
                    type: "POST",
                    url: "UpdateVideoViews.aspx?youtubeVideoID="+this.href.replace(new RegExp("watch\\?v=", "i"), 'v/'),
                });
                return false;
            });
        });

    }

  </script>  
        <!-- Videos  -->  
        <div id="Videos" class="tab_text">  
            <div id="popular-videos-wrapper">
                <asp:Repeater ID="rptPopularVideos" runat="server" EnableViewState="False" >
                    <ItemTemplate>
                            <div class="popular-article-title">
                                 <asp:Label ID="lblCounter" CssClass="lblCounter" runat="server" Text='<%# Container.ItemIndex + 1 %>'  > </asp:Label> 
                                 <asp:HyperLink ID="hylnkArticle" CssClass="popular-youtube-links" ToolTip ='<%# Eval("VideoTitle")%>' NavigateUrl='<%# generateVideoURL(Eval("VideoYoutubeID")) %>' runat="server" BorderWidth="0">
                                    <asp:Label ID="lblArticleTitle" Text='<%# getVideoTitle(Eval("VideoTitle"))%>' runat="server" ></asp:Label>
                                 </asp:HyperLink>
                              </div>
                    </ItemTemplate>
                </asp:Repeater>
            </div>
         </div>  
         <!-- Videos  --> 
```

**母版页**

```
<%@ Master Language="C#"  AutoEventWireup="true" CodeFile="MasterPage.master.cs" Inherits="SiteMasterPage"  %>
<%@ Register Src="~/en/UserControls/ucLiquidCarousel.ascx" TagName="ucLiquidCarousel"  TagPrefix="uc"%>
<%@ Register Src="~/en/UserControls/ucNewsTicker.ascx" TagName="ucTicker"  TagPrefix="uc"%>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="asp" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head id="Head1" runat="server">
<title></title>
<asp:Literal ID="litCtrMetaForSM" runat="server"></asp:Literal>
<meta http-equiv="content-type" content="text/html;charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<link rel="shortcut icon" href="http://www.alshindagah.com/favicon.ico">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js" type="text/javascript"></script>
<link href="../styles/english_css.css" rel="stylesheet" type="text/css" />
<link href="../styles/horizontal-menu-english.css" rel="stylesheet" type="text/css" />
<asp:ContentPlaceHolder ID="head" runat="server"> </asp:ContentPlaceHolder>
<script type="text/javascript">
.....
//Other scripts
.....
</script> 
```

我不确定为什么这不起作用我已经在母版页上移动了与花式框相关的脚本，然后它仅适用于默认页面并在其他页面上失败。

我也用过`ResolveURL(...)`也没用

我没有收到有关脚本的任何错误。

我会很感激这方面的帮助，这样我的 fancybox 就可以通过放置所有与 fancybox 相关的脚本来`usercontrol`工作

# paypal - 使用 Paypal Website Payments Standard 购买后显示用户的电子邮件

> ID：15216725
> 
> 赞同：1
> 
> 时间：2013-03-05T05:50:01.773
> 
> 标签：paypal

我有一个使用 Paypal 的网站付款标准创建的简单按钮，并且我正在使用“在客户完成结帐时将客户带到此 URL”的功能。

在购买成功时（在我的网站上）用户被重定向到的那个页面上，我想简单地显示与他们的贝宝购买相关的电子邮件，告诉他们类似“发票将被发送到这个电子邮件地址：xxx ”。

在不使用 API 或 IPN 的情况下是否可能（我宁愿避免这样做，因为我似乎无法为不同的按钮/产品设置不同的 IPN url。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-20T15:03:23.150

最终使用 PDT，这里有一个很好的例子来说明如何简单地做到这一点：http: [//www.geekality.net/2010/10/19/php-tutorial-paypal-payment-data-transfers-pdt/](http://www.geekality.net/2010/10/19/php-tutorial-paypal-payment-data-transfers-pdt/)

谢谢 PP_MTS_Chad，如果不是您指出该选项，我就不会找到它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T14:03:39.163

您可以使用 2 种方法中的一种将信息返回到您的返回 URL，而无需使用 IPN 或 API。您可以使用 PDT 将信息返回到您的站点，或者您可以使用使用变量“rm”的返回方法。[您可以在此处](https://www.x.com/developers/paypal/documentation-tools/paypal-payments-standard/integration-guide/paymentdatatransfer)找到有关 IPN的更多信息，您还可以在该站点上使用一些示例脚本。

如果要使用return方法，这和PDT有点不同。使用退货方法，您无需将信息发回 PayPal 进行验证。如果您希望 PayPal 将信息发布到您的退货页面，您只需在您的个人资料下的帐户中启用自动退货。然后，您只需在按钮代码中包含以下代码行。

```
<input type="hidden" name="rm" value="2">
<input type="hidden" name="return" value="http://www.mysite.com/return.php"> 
```

变量“rm”控制您希望如何将信息发送回给您。您可以将其设置为 GET 或 POST。

允许的值为：

0 – 所有购物车付款都使用 GET 方法

1 – 使用 GET 方法将买家的浏览器重定向到返回 URL，但不包含付款变量

2 – 买家浏览器通过POST方式重定向到返回URL，包含所有支付变量

默认值为 0。

注意：rm 变量只有在设置了返回变量时才会生效。

# php - 每个项目的数组循环

> ID：15216729
> 
> 赞同：-2
> 
> 时间：2013-03-05T05:50:19.630
> 
> 标签：php, arrays, loops

我有这个数组，我想为数组中的每个项目执行一个命令......我只是不知道从哪里开始，这就是我得到的：

```
$xbb = array ('avotf1', 'avotf2', 'avotf3', 'avotf4');
for each $xbb [item] {
    echo "do something";
} 
```

非常感谢我能得到的任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T05:52:24.070

如果这是 PHP？

尝试

```
$xbb = array('avotf1','avotf2','avotf3','avotf4');

foreach($xbb as $item)
{
echo "$item:  do something";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:52:16.310

如果这是 PHP，请尝试：

```
$xbb = array ('avotf1', 'avotf2', 'avotf3', 'avotf4');
foreach ($xbb as $item)
{
   echo "Do something with $item";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-05T05:57:26.987

[我认为这是 PHP 代码，您可以通过http://www.php.net/manual/en/control-structures.foreach.php](http://www.php.net/manual/en/control-structures.foreach.php)搜索帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-05T05:57:32.277

试试这个

```
$xbb = array ('avotf1', 'avotf2', 'avotf3', 'avotf4');
foreach( (array) $xbb as $key => $value ) {
    echo "<br />".$key."=>".$value;
} 
```

# html - 如何开发一个马拉地语网站？

> ID：15216731
> 
> 赞同：0
> 
> 时间：2013-03-05T05:50:27.040
> 
> 标签：html, multilingual

我想开发一个马拉地语网站。该网站将是动态的，使用户能够用马拉地语提供反馈或评论。

我想使用 PHP 作为服务器端语言以 HTML5 开发网站。我用了 **标记，但它仍然无法正常工作..**

 **我还使用谷歌印地语/马拉地语字体在网站上显示马拉地语。

那么，请有人帮助我吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:06:03.233

你可以从这里购买它 [http://www.quillpad.in/hindi/demo-editor.html](http://www.quillpad.in/hindi/demo-editor.html)

它真的可以帮助你

杰欣德**

# facebook - 如何使用 javascript sdk 获取用户的帖子

> ID：15216732
> 
> 赞同：0
> 
> 时间：2013-03-05T05:50:27.243
> 
> 标签：facebook, facebook-graph-api

我正在使用 javascript sdk 创建我的第一个 facebook 应用程序。这样我就可以使用 (FB.api('me/feed', 'post', )) 将帖子发布到用户的墙上。

现在我需要的是，当用户访问我的应用程序时，它必须显示（或列出）该用户的帖子。代码是

```
FB.api('/me/posts',  function(response) {
for (var i=0, l=response.length; i<l; i++) {
var post = response[i];
alert('The value of post is:'+post);
if (post.message) {
  alert('Message: ' + post.message);
} else if (post.attachment && post.attachment.name) {
  alert('Attachment: ' + post.attachment.name);
} 
```

} });

但它不起作用。如果我删除 l=response.length 并将条件更改为 i<5 它会进入循环内部，但它给出的 post 的值是未定义的。

我不明白为什么它返回未定义。它也为 post.message 返回相同的值。

我也得到了用户的 access_token。

如果我想获得我的用户的帖子，我必须使用什么代码。任何人都可以在这方面帮助我。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:57:39.030

您可以使用 Facebook Graph API Explorer 更好地了解您将收到的数据。[https://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

你应该有`l=response.data.length`和`var post = response.data[i];`。此外，有些帖子不会有“消息”，而是会有一个“故事”（主要是“乔·史密斯和汤姆有人现在是朋友了。”之类的帖子）。确保您对尝试接收的信息也具有适当的权限（例如 user_status）。

# javascript - canvas.drawImage() 和 canvas.fillText() 表现时髦

> ID：15216734
> 
> 赞同：0
> 
> 时间：2013-03-05T05:50:37.773
> 
> 标签：javascript, html

```
<html>

<script type="text/javascript">
var name="name of troop/general"; var attack="attack"; var defense="defense"; var effect1=""; var effect2=""; var           effect3=""; var effect4=""; var effect5=""; var effect6=""; var flavortext1=""; var flavortext2=""; var flavortext3=""; var flavortext4=""; var flavortext5=""; var flavortext6=""; var username="your name here"; var a="troop"; var b="common1"; var c="human"; var d="any"; var e="agility";
function setname()
{
name = document.forms["form"]["name"].value;
alert("unit name = " + name);
}
function setattack()
{
attack = document.forms["form"]["attack"].value;
alert("attack = " + attack);
}
function setdefense()
{
defense = document.forms["form"]["defense"].value;
alert("defense = " + defense);
}
function seteffect()
{
//using document.forms to get the value of effects
alert("effect = " + effect1 + effect2 + effect3 + effect4 + effect5 + effect6);
}
function setflavortext()
{
//using document.forms to get the value of flavortext
alert("flavortext =" + flavortext1 + flavortext2 + flavortext3 + flavortext4 + flavortext5 + flavortext6);
}
function setusername()
{
username = document.forms["form"]["username"].value;   
alert("name = " + username);
}
function setimage()
{
base_image = new Image();
base_image.src = document.forms["form"]["image"].value;
base_image.onload = function
    {
    base.drawImage(base_image, 300, 30, 90, 90);
    }
}
</script>

<canvas id="canvas" width="400" height="700" style="solid"></canvas>

<script type="text/javascript">
var mathmath = defense/4;
var attackvalue = attack + mathmath;
function writeall()
{
var can=document.getElementById("canvas");
var base=can.getContext("2d");

base.fillStyle="grey"; //background
base.fillRect(0,0,400,1200);

base.fillStyle="#FFBF00"; //orangeish
base.font="15px Arial"; 
base.fillText(name, 0, 20);

base.fillStyle="#EFFBF8" //white
base.fillText("Quality:", 0, 40); //this is the only base.fillText that works...
base.fillText(attack, 50, 80);
base.fillText(defense, 60, 100);
base.fillText(attackvalue, 120, 60);
//base.fillText's like the ones above, of varying colors

if(a == "general")
{
    base.fillText(a, 350, 20);
}
//ifs like the one above

base.fillStyle="#FF4000" //dark orange
base.fillText(effect1, 0, 180);
//5 more effect vars being fillTexted; do not work...

var y = 0;

//ifs to set y

base.font="italic 15px Arial";

base.fillStyle="#EFFBF8" //white

//ifs to set y

base.font="15px Arial";

var x = 0;

//ifs to set x

base.fillText(username, 0, y+x);

if(c == "human")
{
    base_image = new Image();
    base_image.src = 'http://images2.wikia.nocookie.net/__cb20120812195219/dotd/images/c/c5/Race_human.png';
    base_image.onload = function()
    {
    base.drawImage(base_image, 0, 105);
    }
}
//ifs like the one above, a bunch of them; none work
</script>

</html> 
```

老实说，我不知道问题出在哪里，但值得注意的是，在我尝试添加 setimage() 函数之前，它都按预期工作（我稍后会介绍）......它旨在创建一个大的灰色矩形和在上面写了一堆东西，我弄乱了一点，所以看起来很奇怪；但现在它只剩下一个灰色的长方形，上面写着质量这个词；当我按下 setimage() 函数的按钮时没有任何反应，甚至没有我输入的警报...我已经浏览了几次，然后用记事本 ++ 看了几次，我很困惑...谢谢提前给你时间。

# java - 从操作系统获取事件

> ID：15216740
> 
> 赞同：25
> 
> 时间：2013-03-05T05:50:53.153
> 
> 标签：java, macos, java-native-interface, jna

我在 Windows 上工作，但我被困在 Mac 上。我有佳能 SDK 并在其上构建了一个`JNA`包装器。它在 Windows 上运行良好，在 Mac 上需要一些帮助。在 sdk 中，有一个函数可以注册一个回调函数。基本上当相机中发生事件时，它会调用回调函数。

在 Windows 上，注册后，我需要使用`User32`来获取事件并通过以下方式调度事件：

```
private static final User32 lib = User32.INSTANCE;
boolean hasMessage = lib.PeekMessage( msg, null, 0, 0, 1 ); // peek and remove
if( hasMessage ){
    lib.TranslateMessage( msg ); 
    lib.DispatchMessage( msg ); //message gets dispatched and hence the callback function is called
} 
```

在 api 中，我在 Mac 中没有找到类似的类。我该如何处理这个？

PS：unix 的`JNA` [api](http://jna.java.net/javadoc/com/sun/jna/Platform.html)很广泛，我不知道要寻找什么。参考可能会[有所](http://jna.java.net/javadoc/com/sun/jna/Platform.html)帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-22T13:28:37.723

此解决方案使用 Cocoa 框架。Cocoa 已被弃用，我不知道有任何其他替代解决方案。但下面的作品就像魅力一样。

最后我找到了使用`Carbon`框架的解决方案。这是我的`MCarbon`接口，它定义了我需要的调用。

```
 public interface MCarbon extends Library {
  MCarbon INSTANCE = (MCarbon) Native.loadLibrary("Carbon", MCarbon.class);
  Pointer GetCurrentEventQueue();
  int SendEventToEventTarget(Pointer inEvent, Pointer intarget);
  int RemoveEventFromQueue(Pointer inQueue, Pointer inEvent);
  void ReleaseEvent(Pointer inEvent);
  Pointer AcquireFirstMatchingEventInQueue(Pointer inQueue,NativeLong inNumTypes,EventTypeSpec[] inList, NativeLong inOptions);
  //... so on
  } 
```

使用以下函数解决问题的解决方案：

```
 NativeLong ReceiveNextEvent(NativeLong inNumTypes, EventTypeSpec[] inList, double inTimeout, byte inPullEvent, Pointer outEvent); 
```

这可以完成工作。根据文档 -

```
This routine tries to fetch the next event of a specified type.
If no events in the event queue match, this routine will run the
current event loop until an event that matches arrives, or the
timeout expires. Except for timers firing, your application is
blocked waiting for events to arrive when inside this function. 
```

此外，如果不是`ReceiveNextEvent`，那么`MCarbon`上面类中提到的其他功能将很有用。

我认为`Carbon`框架[文档](http://developer.apple.com/legacy/mac/library/documentation/Carbon/reference/Carbon_Event_Manager_Ref/Carbon_Event_Manager_Ref.pdf)将为解决问题提供更多见解和灵活性。除了`Carbon`，在论坛上人们提到了解决 using `Cocoa`，但我不知道。

编辑：感谢[technomarge ，](https://stackoverflow.com/users/17175/technomage)[这里](https://stackoverflow.com/questions/15759993/thread-getting-blocked-in-receivenextevent/15782744?noredirect=1#15782744)有更多信息

# c++ - How to check status when commandFinished() signal is emitted

> ID：15216741
> 
> 赞同：0
> 
> 时间：2013-03-05T05:50:54.557
> 
> 标签：c++, qt, qt4

I'm trying to create a ftp client for multiple user accounts. While adding a user account, I need to check whether the host and user details are valid or not. For that I created a method.

```
bool FtpConnect::checkConnectivity(QString remoteIP, QString username, QString password)
{
    QUrl server;
    server.setScheme("ftp");
    server.setHost(remoteIP);
    if (!server.isValid()) {
        QMessageBox::warning(0, "Error", "Invalid Host");
        return false;
    }
    server.setPort(21);
    server.setUserName(username);
    server.setPassword(password);
    QFtp *ftp = new QFtp(this);
    ftp->connectToHost(server.host(), server.port());
    int status = ftp->login(server.userName(), server.password());
    QMessageBox::information(0, "Updated", QString::number(status));
    return (ftp->list() == 4) ? true : false;
} 
```

I need the code to return true if the connection is ok and false while the connection could not complete. Noe the variable `status` returns `4` which is the `QFtp::Connecting` signal. please somebody help me.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T08:44:49.750

QFtp methods do not block execution. The command is scheduled, and its execution is performed asynchronously.
You can't check `status()` right after you call `connectToHost()` or `login()`, because at this moment state is still `Unconnected`. You should wait for a signal to be emitted instead.
`ftp->list()` and other methods return the command id, so there's no point in checking return values. What you can do is remember the id and wait for `commandFinished()` signal with this id, but there is another option.
Use [QFtp::stateChanged](http://harmattan-dev.nokia.com/docs/library/html/qt4/qftp.html#stateChanged) and check for `QFtp::LoggedIn`.

# c++ - 寻找成员函数的常数

> ID：15216746
> 
> 赞同：11
> 
> 时间：2013-03-05T05:51:44.553
> 
> 标签：c++, constants, typetraits, member-functions

如何检测成员函数是否具有 const 修饰符？

考虑代码

```
struct A {
  int member();
  int member() const;
};

typedef int (A::*PtrToMember)();
typedef int (A::*PtrToConstMember)() const; 
```

我需要这样的东西：

```
std::is_const<PtrToMember>::value // evaluating to false
std::is_const<PtrToConstMember>::value // evaluating to true 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-05T07:43:54.900

你去：

```
#include <type_traits>
#include <iostream>
#include <vector>

template<typename T>
struct is_const_mem_fn {
private:
    template<typename U>
    struct Tester {
        static_assert( // will always fail
            std::is_member_function_pointer<U>::value,
            "Use member function pointers only!");

        // if you want to report false for types other than
        // member function pointers you can just derive from
        // std::false_type instead of asserting
    };

    template<typename R, typename U, typename...Args>
    struct Tester<R (U::*)(Args...)> : std::false_type {};

    template<typename R, typename U, typename...Args>
    struct Tester<R (U::*)(Args...) const> : std::true_type {};

public:
    static const bool value =
        Tester<typename std::remove_cv<T>::type>::value;
};

struct A {
  int member();
  int member() const;
};
typedef int (A::*PtrToMember)();
typedef int (A::*PtrToConstMember)() const;

int main()
{
    std::cout
        << is_const_mem_fn<PtrToMember>::value
        << is_const_mem_fn<const PtrToMember>::value
        << is_const_mem_fn<PtrToConstMember>::value
        << is_const_mem_fn<const volatile PtrToConstMember>::value
        << is_const_mem_fn<decltype(&std::vector<int>::size)>::value;
} 
```

输出：`00111`

**编辑：**我忘记在原始答案中说明一个极端情况。

上面的 trait 会扼杀一个假设的成员函数，如下所示：

```
struct A {
  int member(int, ...) const;
}; 
```

因为没有`Tester`可以为此类签名生成的有效专业化。要修复它，请添加以下专业化：

```
template<typename R, typename U, typename...Args>
struct Tester<R (U::*)(Args..., ...)> : std::false_type {};

template<typename R, typename U, typename...Args>
struct Tester<R (U::*)(Args..., ...) const> : std::true_type {}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T07:43:03.277

[下面是一个从这里](https://stackoverflow.com/questions/8960674/is-member-function-pointer-implementation)改编的简单类型特征，应该允许这样做。

```
template <typename T>
struct is_const_mem_func : std::false_type { };

template <typename Ret, typename Class, typename... Args>
struct is_const_mem_func<Ret (Class::*)(Args...) const> : std::true_type { }; 
```

# c++ - 如何在 Windows 2008 R2 中使用 CreateVirtualDisk 创建差异 VHD

> ID：15216747
> 
> 赞同：0
> 
> 时间：2013-03-05T05:51:50.807
> 
> 标签：c++, windows, windows-server-2008-r2, hyper-v, vhd

我正在尝试使用 CreateVirtualDisk API 创建差异 VHD。MSDN 示例

[http://code.msdn.microsoft.com/windowsdesktop/Virtual-hard-disk-03108ed3](http://code.msdn.microsoft.com/windowsdesktop/Virtual-hard-disk-03108ed3)

仅在 Win 8/2012 上受支持。但是，如果我在 Win 2008 R2 上尝试相同的操作，则 CREATE_VIRTUAL_DISK_VERSION_2 不可用。尝试使用具有相应值的 CREATE_VIRTUAL_DISK_VERSION_1（指定父 VHD）CreateVirtualDisk 失败，错误代码为 87。

我尝试创建一个正在创建的新 VHD（不是差异）。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T03:51:14.460

使用 CreateVirtualDisk 而不传递任何大小，但仅传递父 VHD 路径。我们没有传递的所有参数都将从父 VHD 中获取。

CREATE_VIRTUAL_DISK_VERSION_2 在 Win 8/2012 中在线可用

# cocoa-touch - ios map- 使用纬度和经度点在 ios 地图上创建视图

> ID：15216748
> 
> 赞同：1
> 
> 时间：2013-03-05T05:51:53.060
> 
> 标签：cocoa-touch, ios4, google-maps-api-3, ios6

我使用针点和线在 ios 地图上定位地点。**现在如何在那个定位的地方创建一个视图。** ![在此处输入图像描述](../Images/2a5b1e81a420a2b2a4c4f47822327f7e.png)

`In this above picture is i located the places using pin and lines. now i want to create a view inside the locating places.`我怎样才能做到这一点。请一些人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T11:20:37.737

您在屏幕上有注释。注释是纬度和纬度值。

```
 NSArray *data = [root objectForKey:@"data"];
    for (NSArray *row in data) {
    NSNumber * latitude = [[row objectAtIndex:22]objectAtIndex:1];
    NSNumber * longitude = [[row objectAtIndex:22]objectAtIndex:2];
    NSString * crimeDescription = [row objectAtIndex:18];
    NSString * address = [row objectAtIndex:14];

    CLLocationCoordinate2D coordinate;
    coordinate.latitude = latitude.doubleValue;
    coordinate.longitude = longitude.doubleValue;
    MyLocation *annotation = [[MyLocation alloc] initWithName:crimeDescription address:address coordinate:coordinate] ;
    [_mapView addAnnotation:annotation];
} 
```

它可以帮助你 1\. [http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial](http://www.raywenderlich.com/21365/introduction-to-mapkit-in-ios-6-tutorial)

. [http://spitzkoff.com/craig/?p=1082](http://spitzkoff.com/craig/?p=1082)

# asp.net - 数据库图像未显示 asp.net

> ID：15216749
> 
> 赞同：0
> 
> 时间：2013-03-05T05:51:55.033
> 
> 标签：asp.net

试图在图像控件中显示数据库中的图像......第三天......到目前为止没有运气......

Employee.aspx 上的显示按钮

```
 Protected Sub DisplayButton_Click(ByVal sender As Object, ByVal e As EventArgs) Handles DisplayButton.Click

    bind()
    GridView1.Visible = "True"
    If EmployeeIDTextBox.Text = "" Then
        MsgBox("Please enter EmployeeID!")
    Else
        Image1.ImageUrl = "~/HttpHandler.ashx?EmployeeID=" & EmployeeIDTextBox.Text
    End If
End Sub 
```

这是处理程序：

```
Sub ProcessRequest(ByVal context As HttpContext) Implements IHttpHandler.ProcessRequest

    'context.Response.ContentType = "text/plain"
    'context.Response.Write("Hello World!")

    Dim EmployeeID As Integer
    If (Not (context.Request.QueryString("EmployeeID")) Is Nothing) Then
        EmployeeID = Convert.ToInt32(context.Request.QueryString("EmployeeID"))

    Else
        Throw New ArgumentException("No parameter specified")
    End If
    Dim imageData() As Byte = {}
    ' get the image data from the database using the employeeId Querystring
    context.Response.ContentType = "image/jpeg"
    ' You can retrieve this also from the database
    context.Response.BinaryWrite(imageData)

End Sub 
```

这是我想在其中显示图像的图像控件（在 Employee.aspx 上）

```
<asp:Image ID="Image1" runat="server" imageUrl="HttpHandler.ashx?EmployeeID=7" /> 
```

有很多帮助...似乎还不够...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:57:51.120

这些可能会有所帮助。场景类似，可以根据您的情况实现：

[在 asp 中显示数据表中的图像：代码隐藏中的图像](https://stackoverflow.com/questions/10143323/display-image-from-a-datatable-in-aspimage-in-code-behind)

[在数据表的列表视图中显示图像](https://stackoverflow.com/questions/10095376/showing-an-image-in-listview-from-datatable)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-24T07:11:46.787

这是在 c# 中，但会帮助某人。

```
 public void ProcessRequest(HttpContext context)
        {
            string querystring = context.Request.QueryString.ToString();

            try
            {
                if (querystring != null && querystring.Trim().Length == 0)
                {
                    context.Response.ContentType = "text/plain";
                    context.Response.Write("Error");
                    context.Response.Write("No");
                    return;
                }
                string DocCode = querystring;

                DataTable dt = GetDocumentInfo(DocCode); //Get Image From Database. I encapsulated it in other method.Implement it,

                if (dt.Rows.Count == 0)
                {    
                    context.Response.ContentType = "text/plain";
                    context.Response.Write("Error");
                    context.Response.Write("No");
                    return;
                }
                context.Response.Clear();
                context.Response.ClearContent();
                context.Response.ClearHeaders();
                context.Response.Cache.SetCacheability(HttpCacheability.Public);
                context.Response.Cache.SetExpires(DateTime.MinValue);

                context.Response.ContentType = MimeMapping.GetMimeMapping(System.IO.Path.GetFileName(dt.Rows[0]["DocumentFileName"].ToString()));

                context.Response.AddHeader("content-disposition", "inline; filename=" + System.IO.Path.GetFileName(dt.Rows[0]["DocumentFileName"].ToString()));
                context.Response.Buffer = true;
                context.Response.Charset = "";

                context.Response.BinaryWrite((Byte[])dt.Rows[0]["DocumentFile"]);

                context.Response.Flush();
            }
            catch (Exception ex)
            {

                context.Response.ContentType = "text/plain";
                context.Response.Write("Error");
                context.Response.Write("No");
                return;
            }
            context.Response.End();
        } 
```

# iphone - (OSStatus) 错误 = AudioToolbox 框架中的 -1500

> ID：15216757
> 
> 赞同：1
> 
> 时间：2013-03-05T05:52:27.627
> 
> 标签：iphone, audiotoolbox

我无法使用 AudioToolbox 框架播放声音。我的代码行：

```
SystemSoundID soundID;
    CFURLRef  soundFileURLRef;
    OSStatus error = AudioServicesCreateSystemSoundID((__bridge CFURLRef)(aFileURL),         &aSoundID); 
```

调试后显示错误`((OSStatus) error = -1500)`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:36:05.727

错误代码 -1500 表示常量`kAudioServicesSystemSoundUnspecifiedError`，其描述为“发生了未指定的错误。”。

我会仔细检查您的程序是否可以读取 URL，目标是受支持的格式，并且它是有效的可读文件。

当然，谷歌搜索`kAudioServicesSystemSoundUnspecifiedError`会给你一些额外的提示。

# cuda - Cuda 内存错误（分配和复制成功）

> ID：15216760
> 
> 赞同：0
> 
> 时间：2013-03-05T05:52:42.607
> 
> 标签：cuda, gpu

我目前正在学习 CUDA 以实现高性能计算。我有一个实现雅可比迭代的项目。我的程序某处出现内存错误，我很难追踪它。

我的 Jacobi 内核正确地运行了一次迭代，现在我正在计算旧矩阵和新矩阵之间的最大差异。如果我注释掉下一行代码：

```
//diff[idx] = BJacobi[idx] - AJacobi[idx]; 
```

有用。然而，包括这行代码，会导致 BJacbi 的数据被 AJacobi 的部分数据覆盖（或者至少我认为这是 AJacobi 的数据，它几乎是相同的模式）。这对我来说似乎是一个分配问题，但我不确定它在哪里。

```
__global__ 
void jacobi(float *diff, float *AJacobi, float *BJacobi, int *bitMask, int size) 
{
    int idx = blockIdx.x * blockDim.x + threadIdx.x;
    float sum = 0.0;
    int count = 0;

    if(idx < size * size)
    {
        if(bitMask[idx] == 0)
        { 
            //if left side of matrix
            if(idx - 1 > 0 && idx % size != 0) {
                sum += AJacobi[ idx - 1 ];
                count++;
            }
            //if right side of matrix
            if(idx + 1 < size * size && (idx + 1) % size != 0)
            {
                sum += AJacobi[ idx + 1 ];
                count++;
            }
            //if top of matrix
            if(idx - size > 0)
            {
                sum += AJacobi[ idx - size ];
                count++;
            }
            //if bottom of matrix
            if(idx + size < size * size)
            {
                sum  += AJacobi[ idx + size ];
                count++;
            }
            BJacobi[idx] = sum / count;
        }
        else BJacobi[idx] = AJacobi[idx];
    }

    //diff[idx] = BJacobi[idx] - AJacobi[idx];
} 
```

在我的主要功能中

```
readSparceMatrix(argv[1], &matrix);
array_size = matrix.rowSize * matrix.rowSize;

//we want as many or more threads then data.
dimGrid = array_size / THREADS + 1;
dimBlock = THREADS;

// ---------------------- START ALLOCATION OF DEVICE MEMEORY
err = cudaMalloc( (void**)&diff, array_size * sizeof(float)); 
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMalloc: %s\n", cudaGetErrorString(err));
    exit(1);
} 
err = cudaMalloc( (void**)&AJacobi, array_size * sizeof(float) );
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMalloc: %s\n", cudaGetErrorString(err));
    exit(1);
} 
err = cudaMalloc( (void**)&BJacobi, array_size * sizeof(float) ); 
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMalloc: %s\n", cudaGetErrorString(err));
    exit(1);
} 
err = cudaMalloc( (void**)&MaxDiffTree, array_size * sizeof(float) ); 
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMalloc: %s\n", cudaGetErrorString(err));
    exit(1);
} 
err = cudaMalloc( (void**)&bitMask, array_size * sizeof(int) ); 
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMalloc: %s\n", cudaGetErrorString(err));
    exit(1);
} 

// ---------------------- START INTITILIZATION OF DEVICE MEMERY 
err = cudaMemset(diff, 1.0, array_size * sizeof(float));
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMemcpy: %s\n", cudaGetErrorString(err));
    exit(1);
} 

err = cudaMemset(BJacobi, 0.0, array_size * sizeof(float));
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMemcpy: %s\n", cudaGetErrorString(err));
    exit(1);
} 

err = cudaMemset(MaxDiffTree, 0.0, array_size * sizeof(float));
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMemcpy: %s\n", cudaGetErrorString(err));
    exit(1);
} 

err = cudaMemcpy(AJacobi, matrix.data, array_size * sizeof(float) ,cudaMemcpyHostToDevice);
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMemcpy: %s\n", cudaGetErrorString(err));
    exit(1);
} 

err = cudaMemcpy(bitMask, matrix.mask, array_size * sizeof(int) ,cudaMemcpyHostToDevice);
if (err != cudaSuccess) {
    fprintf (stderr, "cudaMemcpy: %s\n", cudaGetErrorString(err));
    exit(1);
} 

// ---------------------- START MAIN JACOBI LOOP
//while(MaxDiff >  delta){

jacobi<<<dimGrid, dimBlock>>>(diff, AJacobi, BJacobi, bitMask,  matrix.rowSize); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:54:48.970

所以这实际上是一个简单的错误，我花了很长时间试图弄清楚。问题发生是因为我有更多的线程然后数据。因此，我的线程索引超出了数组的范围。我的代码中的第一个 if 语句旨在检查这一点，但我的差异分配超出了我的索引检查。在 if 检查下移动 diff 语句解决了我的问题。

```
if(idx < size * size){
    if(bitMask[idx] == 0){ 
        //if left side of matrix
        if(idx - 1 > 0 && idx % size != 0) {
            sum += src[ idx - 1 ];
            count++;
        }
        //if right side of matrix
        if(idx + 1 < size * size && (idx + 1) % size != 0)
        {
            sum += src[ idx + 1 ];
            count++;
        }
        //if top of matrix
        if(idx - size > 0)
        {
            sum += src[ idx - size ];
            count++;
        }
        //if bottom of matrix
        if(idx + size < size * size)
        {
            sum  += src[ idx + size ];
            count++;
        }
        dst[idx] = sum / count;
    }
    else dst[idx] = src[idx];

    diff[idx] = dst[idx] - src[idx];
} 
```

# java - 使用正则表达式限制特殊字符

> ID：15216761
> 
> 赞同：0
> 
> 时间：2013-03-05T05:52:58.887
> 
> 标签：java, regex

我希望我的正则表达式匹配除`.`and之外的任何带有“特殊”字符的字符串`/`。其他特殊字符在某种黑名单上。但是，在运行时，我得到一个`Illegal repetition`错误。我该如何解决？

```
Pattern regex = Pattern.compile("!@#$%^&*()-_+=|\\}]{[\"':;?><,");
Matcher matcher = regex.matcher(key);
if (matcher.find()) {
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T05:55:08.057

可能最好只指定允许的内容而不是拒绝的内容：

```
Pattern regex = Pattern.compile ("^[\\w\\s\\./]*$");
if (!regex.matcher(key).matches ()) return false; 
```

这仅允许字母、数字、空格、点 ('.') 和斜杠 ('/')。

# java - 如何在 Eclipse 中包含 Javascript 文件以解决 HTML/JSP 文件中的 Javascript 警告？

> ID：15216766
> 
> 赞同：4
> 
> 时间：2013-03-05T05:53:26.373
> 
> 标签：java, ajax, eclipse, jsp, templates

这是我的情况：我正在使用一个大量使用 JSP 的应用程序，包括 <%include ... %> 并且还使用 AJAX 动态加载大量组件。根据用户选择的内容等，所有这些都会加载到一个主模板页面中。

我的问题是编辑/维护这些通过 AJAX 包含和加载的小页面片段。由于它们是片段，因此它们的代码不包含 a 也不包含诸如 JQuery 之类的东西，它们是由主模板页面添加的。

当然，当它们在浏览器中加载时它们会起作用，因为片段是通过 AJAX 加载并添加到 DOM 中的。

**问题是：**因为这些只是片段，所以当我维护这些页面时，我会收到很多关于缺少 CSS 类和 Javascript 变量等的错误和警告。此外，我不能对片段使用任何 WYSIWYG 编辑器，因为缺少的进口。

我如何告诉 Eclipse 为这些片段文件假设某些导入（例如 JQuery 或 CSS 表）？由于使用 JSP 模板是一种常见的设计模式，我不敢相信我是唯一需要这个的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:07:50.093

你可以去

```
Eclipse - > Preferences - > JavaScript - >  Include Path -> User Libraries 
```

并添加一个新的 JavaSCript 库。

![在此处输入图像描述](../Images/fe488d3c6d4505555f68f1589a93806b.png)

你可以给你的项目JS文件夹。

之后，您可以转到项目构建路径并将该库包含在构建路径中。

或者您可以从这里直接将其添加到您的项目中，

![在此处输入图像描述](../Images/8719e296e3b1ea77b292b0ea8fa0ae6e.png)

# facebook - 更改脸书网址

> ID：15216767
> 
> 赞同：0
> 
> 时间：2013-03-05T05:53:28.010
> 
> 标签：facebook, url, customization

[http://www.facebook.com/pages/Brightmind/225959254217240](http://www.facebook.com/pages/Brightmind/225959254217240)

这是我的 Facebook 页面帐户网址。我想缩短网址，例如[http://www.facebook.com/pages/Brightmind](http://www.facebook.com/pages/Brightmind)

帮我做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:58:18.490

登录您的 Facebook 帐户

并转到此网址 [https://www.facebook.com/username](https://www.facebook.com/username)

明智的是，一旦您设置了网址，您就不允许更改超过 1 次。

# ruby-on-rails - rails中的表格形式

> ID：15216774
> 
> 赞同：0
> 
> 时间：2013-03-05T05:53:47.473
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试在 rails 3+ 中构建表格形式。

示例链接：[http ://blog.theapexfreelancer.com/wp-content/uploads/2011/02/tabular-form.png](http://blog.theapexfreelancer.com/wp-content/uploads/2011/02/tabular-form.png)

有什么宝石可以用来完成这个吗？

# 要求 ：

1.  填写表格并将数据提交到数据库后。用户必须能够就地更新表单中的数据。（表单字段兼作读写）[需要 Ajax]
2.  多行数据输入/更新。

# 我的调查：

宝石：

*   嵌套形式
*   twitter_bootstrap_form_for
*   格式引导

该文档不包括表格形式。

有没有人有建立这种表格的经验？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:08:04.937

视频教程（我个人的学习资源）：

嵌套表单第 1部分： [http](http://railscasts.com/episodes/196-nested-model-form-part-1) ://railscasts.com/episodes/196-nested-model-form-part-1第 2部分： [http ://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)

Formtastic 第 1部分： [http](http://railscasts.com/episodes/184-formtastic-part-1) ://railscasts.com/episodes/184-formtastic-part-1 第2部分： [http ://railscasts.com/episodes/185-formtastic-part-2](http://railscasts.com/episodes/185-formtastic-part-2)

就地编辑：[http ://railscasts.com/episodes/302-in-place-editing](http://railscasts.com/episodes/302-in-place-editing)

# java - 拆分 BigIntegers 数字

> ID：15216777
> 
> 赞同：3
> 
> 时间：2013-03-05T05:53:58.790
> 
> 标签：java

我正在尝试拆分一个大整数的数字。让我更具体一点。我正在使用斐波那契数列生成一个大整数，现在使用这个算法我需要循环，直到找到一个 BigInteger，其中前 9 位数字和后 9 位数字都是泛数字。唯一的问题是我必须循环的数量是 300K（现在 BigInteger 将变得如此巨大）。

我尝试将 BigInteger 转换为字符串，然后使用“substring(begin, end)”。但是，这太慢了，仅仅做 10 万个索引就花了将近 28 分钟。

对此有一个数学解决方案，但我不完全确定它是什么，如果有人能引导我朝着正确的方向前进，我将不胜感激。注意：我不是直接要求答案，只是朝着找到正确答案迈出一步。

这是我的代码，以防您想知道：

```
import java.math.BigInteger;

public class Main {

    public static void main(String...strings)
    {       
        long timeStart = System.currentTimeMillis();
        fib(300_000);
        long timeEnd = System.currentTimeMillis();
        System.out.println("Finished processing, time: " + (timeEnd - timeStart) + " milliseconds.");
    }

    public static BigInteger fib(int n)
    {
        BigInteger prev1 = BigInteger.valueOf(0), prev2 = BigInteger.valueOf(1);        
        for (int i = 0; i < n; i++)
        {
            BigInteger savePrev1 = prev1;
            prev1 = prev2;
            prev2 = savePrev1.add(prev2);
        }
        return prev1;
    }

    static BigInteger[] pows = new BigInteger[16];

    static {
        for (int i = 0; i < 16; i++) {
            pows[i] = BigInteger.TEN.pow(i);
        }
    }

    static boolean isPanDigital(BigInteger n) {
         if (!n.remainder(BigInteger.valueOf(9)).equals(BigInteger.ZERO)) {
           return false;
        }
        boolean[] foundDigits = new boolean[9];

        boolean isPanDigital = true;
        for (int i = 1; i <= 9; i++) {
            BigInteger digit = n.remainder(pows[i]).divide(pows[i - 1]);
            for (int j = 0; j < foundDigits.length; j++) {
                if (digit.equals(BigInteger.valueOf(j + 1)) && !foundDigits[j]) {
                    foundDigits[j] = true;
                }
            }
        }

        for (int i = 0; i < 9; i++) {
            isPanDigital = isPanDigital && foundDigits[i];
        }

        return isPanDigital;
    }
} 
```

更新，设法弄清楚如何生成前 9 位数字（而且它似乎并不太慢）。但是，我在生成最后 9 位数字时遇到问题。

```
import java.math.BigInteger;

public class Main {

    public static void main(String...strings)
    {       
        long timeStart = System.currentTimeMillis();
        fib(300_000);
        long timeEnd = System.currentTimeMillis();
        System.out.println("Finished processing, time: " + (timeEnd - timeStart) + " milliseconds.");
    }

    public static BigInteger fib(int n)
    {
        BigInteger prev1 = BigInteger.valueOf(0), prev2 = BigInteger.valueOf(1);        
        for (int i = 0; i < n; i++)
        {
            if (prev1.toString().length() > 19)
            {
                String leading9Digits = leading9Digits(prev1);
                if (isPanDigital(BigInteger.valueOf(Integer.valueOf(leading9Digits))))
                {
                    System.out.println("Solved at index: " + i);
                    break;
                }
            }
            BigInteger savePrev1 = prev1;
            prev1 = prev2;
            prev2 = savePrev1.add(prev2);
        }
        return prev1;
    }

    public static String leading9Digits(BigInteger x) {
        int log10 = (x.bitLength() - 1) * 3 / 10;
        x = x.divide(BigInteger.TEN.pow(Math.max(log10 + 1 - 9, 0)));
        return x.toString().substring(0, 9);
    }

    static BigInteger[] pows = new BigInteger[16];

    static {
        for (int i = 0; i < 16; i++) {
            pows[i] = BigInteger.TEN.pow(i);
        }
    }

    static boolean isPanDigital(BigInteger n) {
         if (!n.remainder(BigInteger.valueOf(9)).equals(BigInteger.ZERO)) {
           return false;
        }
        boolean[] foundDigits = new boolean[9];

        boolean isPanDigital = true;
        for (int i = 1; i <= 9; i++) {
            BigInteger digit = n.remainder(pows[i]).divide(pows[i - 1]);
            for (int j = 0; j < foundDigits.length; j++) {
                if (digit.equals(BigInteger.valueOf(j + 1)) && !foundDigits[j]) {
                    foundDigits[j] = true;
                }
            }
        }

        for (int i = 0; i < 9; i++) {
            isPanDigital = isPanDigital && foundDigits[i];
        }

        return isPanDigital;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-01T19:58:54.047

好的，我对您的代码进行了一些优化。

*   你的`leading9Digits`方法不应该返回 a `String`，它应该返回一个数字。如果他们愿意，允许代码的其他部分将其转换为字符串。
*   `BigInteger.pow()`每次代码循环调用都是浪费。您可以预先计算所有这些 10 的幂并将它们存储在一个数组中。
*   您不必使用内部循环来检查泛数字性。如果您必须将`boolean`数组中的一个单元格增加两次，那么它就不是泛数字的。此外，您可以提前退出`0`.
*   [使用mod 1000000000](http://mathworld.wolfram.com/Modulus.html)计算`trailing9digits`很容易
*   您可以预先创建常量并存储它们，而不是每次都创建它们。您的方式适用于基元，但不适用于对象。

请注意，我尝试使用 a`String`而不是余数，它们的结果大致相同。我将两者都包含在您的代码中。

而且，最后，正确的答案不在前 300,000 个；大约是329,000。在我的机器上运行大约需要 29 秒。

```
import java.math.BigInteger;

public class Main {
    private static final BigInteger NINE = BigInteger.valueOf(9);
    private static final BigInteger BILLION = BigInteger.valueOf(1000000000);
    private static final double log10_2 = Math.log10(2);
    private static final double CORRECTION = 9d;
    private static final int ARRAY_SIZE = 131072;

    static BigInteger[] pows = new BigInteger[ARRAY_SIZE];

    static {
        pows[0] = BigInteger.ONE;
        for (int i = 1; i < ARRAY_SIZE; i++) {
            pows[i] = pows[i - 1].multiply(BigInteger.TEN);
        }
    }

    public static void main(String... strings) {
        long timeStart = System.currentTimeMillis();
        fib(500_000);
        long timeEnd = System.currentTimeMillis();
        System.out.println("Finished processing, time: "
                + (timeEnd - timeStart) + " milliseconds.");
    }

    public static BigInteger fib(int n) {
        BigInteger prev1 = BigInteger.valueOf(0), prev2 = BigInteger.valueOf(1);
        for (int i = 0; i < n; i++) {
            if (prev1.bitLength() > 30) {
                if (isDualPanDigital(prev1)) {
                    System.out.println("Solved at index: " + i);
                    break;
                }
            }
            BigInteger savePrev1 = prev1;
            prev1 = prev2;
            prev2 = savePrev1.add(prev2);
        }
        return prev1;
    }

    public static BigInteger leading9Digits(BigInteger x) {
        int dividePower = (int) (x.bitLength() * log10_2 - CORRECTION);
        BigInteger y = x.divide(pows[dividePower]);
        if (y.compareTo(BILLION) != -1) y = y.divide(BigInteger.TEN);
        return y;
    }

    public static BigInteger trailing9Digits(BigInteger x) {
        return x.mod(BILLION);
    }

    static boolean isDualPanDigital(BigInteger n) {
        boolean leading = isPanDigital(leading9Digits(n));
        boolean trailing = isPanDigital(trailing9Digits(n));

        if (leading && trailing) {
            System.out.format("leadingDigits: %s, trailingDigits: %s%n",
                    leading9Digits(n), trailing9Digits(n));
        }
        return leading && trailing;
    }

    static boolean isPanDigital(BigInteger n) {
        if (!n.remainder(NINE).equals(BigInteger.ZERO)) {
            return false;
        }

        return isPanDigitalString(n);
    }

    private static boolean isPanDigitalMath(BigInteger n) {
        boolean[] foundDigits = new boolean[10];

        for (int i = 1; i <= 9; i++) {
            int digit = n.remainder(pows[i]).divide(pows[i - 1]).intValue();
            if (digit == 0)
                return false;
            if (foundDigits[digit - 1])
                return false;
            else
                foundDigits[digit - 1] = true;
        }

        return true;
    }

    private static boolean isPanDigitalString(BigInteger n) {
        boolean[] foundDigits = new boolean[9];

        String s = n.toString();
        if (s.length() < 9) {
            return false;
        }

        for (int i = 0; i < 9; i++) {
            int digit = s.charAt(i) - '1';
            if (digit == -1 || foundDigits[digit])
                return false;
            foundDigits[digit] = true;
        }

        return true;
    }
} 
```

# scrollbar - 使用向上和向下箭头键时 Bing 地图小部件坐标发生变化

> ID：15216780
> 
> 赞同：0
> 
> 时间：2013-03-05T05:54:15.507
> 
> 标签：scrollbar, coordinates, bing-maps

在我的页面中，我使用 Bing 地图功能来显示地图中的地址列表。但是当我使用键盘箭头向上或向下滚动时，它只会滚动地图并且页面滚动不起作用。在滚动之前，坐标显示在该页面中

![在此处输入图像描述](../Images/c746a5712bd90f5dc877ce4736167eec.png)

**滚动后**

![在此处输入图像描述](../Images/c84135f59357ee3e636c5958fa3e096c.png)

在该页面上滚动时，地图坐标发生了变化，而不是页面滚动。如何解决这个问题。

任何人都可以帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T22:04:16.310

将此添加到您的代码中（myMap 是您的地图的实例）

```
 Microsoft.Maps.Events.addHandler(myMap, 'keydown', function(e){
    e.handled = true;
  }); 
```

# javascript - 闭包存储数组

> ID：15216783
> 
> 赞同：0
> 
> 时间：2013-03-05T05:54:24.920
> 
> 标签：javascript, arrays, closures

这是使用闭包更新数组的最佳方法吗？我在另一个网站上看到了类似的东西。我想知道`closure1`创建的全局变量。有没有办法在不创建全局的情况下做到这一点。

```
<script>  
    var closure1=Closure(0, 0);

    function Closure(num, i) {
        var num=num;
        var index=i;
        var anArray = [];
        return function(num,index) {
          anArray[index]=(num);
          out.innerHTML=anArray;
        }
    } 
 </script>

<div id="d1" onclick=" closure1(2,0)">2 index 0</div>
<div id="d2" onclick=" closure1(5,3)">5 index 3</div>
<div id="d3" onclick=" closure1(4,1)">4 index 1</div>
<div id="d4" onclick=" closure1(9,7)">9 index 7</div>
<div id="out" >?</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:02:06.443

我认为你可以做这样的事情。如果您不想创建全局变量，请将脚本包装在自执行函数中。

```
(function(){
      var closure1=Closure(0, 0);

      function Closure(num, i) {
        var num=num;
        var index=i;
        var anArray = [];
        return function(num,index) {
          anArray[index]=(num);
          out.innerHTML=anArray;
        }
      }
  }()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:07:20.200

您需要有一种方法来调用您创建的闭包以在`onclick`属性中使用它。作为全局变量的优点`closure1`是闭包只创建一次，您可以通过调用在页面中重新使用它`closure1(num, index)`。但是，如果您不喜欢`closure1`在全局范围内命名变量，则可以通过以下方式进行*清理*。

**编辑：**我之前发布了两种建议的方式。感谢@nnnnnn 指出其中一种方法会破坏 OP 的代码。我删除了不正确的建议，并保留了正确的建议。

您可以将闭包作为属性添加到现有`Closure`函数。例如，如果你想创建一个新的闭包`closure1`，你应该像这样创建它

删除行：

```
var closure1=Closure(0, 0); 
```

在定义函数*后*添加以下行，如下所示：`Closure`

```
Closure.closure1 = Closure(0, 0); 
```

并将您的点击次数替换为

```
<div id="d1" onclick="Closure.closure1(2,0)">2 index 0</div> 
```

完整的代码如下所示：

```
<script>  
    function Closure(num, i) {
        var num=num;
        var index=i;
        var anArray = [];
        return function(num,index) {
          anArray[index]=(num);
          out.innerHTML=anArray;
        }
    } 

    Closure.closure1 = Closure(0, 0);
 </script>

<div id="d1" onclick="Closure.closure1(2,0)">2 index 0</div>
<div id="d2" onclick="Closure.closure1(5,3)">5 index 3</div>
<div id="d3" onclick="Closure.closure1(4,1)">4 index 1</div>
<div id="d4" onclick="Closure.closure1(9,7)">9 index 7</div>
<div id="out" >?</div> 
```

这是我认为最干净的方法。希望这可以帮助。

# python - python在哪里寻找脚本中的文件？

> ID：15216784
> 
> 赞同：1
> 
> 时间：2013-03-05T05:54:37.120
> 
> 标签：python, eclipse, directory, pythonpath

所以我刚刚为标题屏幕编写了这个类，它运行良好。但是，与我一起参与该项目的人之一提到我不应该使用：

```
os.chdir(os.getcwd() + "/..")

resource = (os.getcwd() + "/media/file name") 
```

进入超级目录。不过，他确实提到了一些关于 pythonpath 的事情。如果这有帮助，我们正在使用 Eclipse。

对于更多的上下文，我们正在制作一个多平台游戏，所以我们不能只同步我们的目录并对其进行硬编码（尽管我们使用 git，所以工作目录是同步的）。基本上，我需要一些方法从“src”文件夹中的脚本文件到它旁边的“媒体”文件夹（AKA 有一个超级（项目）文件夹，其中包含“src”和“媒体”文件夹） .

任何帮助将不胜感激，但请不要说“google it”，因为我在来这里之前尝试过（我不知道这是否经常发生，但我在其他地方见过太多次......当我用谷歌搜索答案时，对不起，如果我这么说听起来很混蛋）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:56:26.367

Python 程序确实有*当前工作目录*的概念，它通常是运行脚本的目录。这是具有相对路径的“他们查找文件的位置”。

但是，由于您的程序可以*从与其所在的文件夹不同的文件夹运行，因此*您的参考目录需要改为引用*您的脚本所在*的目录（当前目录通常与您的脚本的位置*无关*）。找到您的脚本的目录是通过以下方式获得的

```
script_dir = os.path.dirname(__file__) 
```

请注意，此路径可以是相对的（可能为空），因此脚本的当前工作目录与 python 解释器读取脚本时的目录（即`__file__`设置时）相同仍然很重要。如果稍后在代码中更改了当前工作目录，则将可能的相对路径转换`script_dir`为绝对路径很重要：

```
# If script_dir is relative, the current working directory is used, here. This is correct if the current
# working directory is the same as when the script was read by the Python interpreter (which is
# when __file__ was set):
script_dir = os.path.abspath(script_dir) 
```

然后您可以`media`使用与平台无关的方式进入父目录中的目录

```
os.path.join(script_dir, os.path.pardir, 'media') 
```

实际上`os.path.pardir`（或等效地`os.pardir`）是平台无关的父目录约定，并且`os.path.join()`只是以平台无关的方式加入路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:08:46.337

我会推荐类似的东西：

```
import os.path

base_folder = os.path.dirname(os.path.dirname(os.path.abspath(__file__)))
media_folder = os.path.join(base_folder, "media")
src_folder = os.path.join(base_folder, "src")

resource = os.path.join(media_folder, "filename")

for path in [base_folder, media_folder, src_folder, resource]:
    print path 
```

主要成分是：

*   `__file__`: 获取当前源文件的路径（不像`sys.argv[0]`，它给出了被调用脚本的路径）
*   `os.path.split()`: 将路径拆分为相对文件/文件夹名称和包含它的基本文件夹。使用它两次`base_folder = ...`将给出父目录。
*   `os.path.join`：独立于操作系统且正确的路径名组合。知道缺少或多个`/`s 或`\`s

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T05:57:33.853

考虑使用`os.path.dirname()`和`os.path.join()`。这些应该以独立于平台的方式工作。

# c# - 果园 CMS VB.Net

> ID：15216785
> 
> 赞同：0
> 
> 时间：2013-03-05T05:54:37.213
> 
> 标签：c#, vb.net, orchardcms

只是想知道，Orchard CMS 是否支持 VB.Net（没有明显从 C# 转换）？

我查看了 CodePlex 的源代码，它们都在 C# 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T17:40:26.930

不，VB 不支持，而且很可能永远不会支持。

# java - 在java中将一个jlist中的选定项目显示到另一个jlist

> ID：15216792
> 
> 赞同：1
> 
> 时间：2013-03-05T05:55:29.443
> 
> 标签：java, swing, jlist

我正在使用 4 `JList`s，它是一个数组，

```
JList jlst = new JList[4]; 
```

然后我从对象数组中添加第一个列表项，

```
jlst[0].setListData(getObjAL()); 
```

这里函数`getObjAL()`函数将给出对象数组。

我想将第一个列表（）的选定项目显示`jlst[0]`到第二个列表（`jlst[1]`）中。

为此，我正在编写代码，

```
jlstPrimitives[i].addListSelectionListener(new ListSelectionListener() {
    @Override
    public void valueChanged(ListSelectionEvent listevt) {
        Jlist objLstTemp = (Jlist) listevt.getSource();
        jlst[1].setListData(objLstTemp.getSelectedValue()));
    }
}); 
```

但它没有显示在`list[1]`. 请任何人帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:07:07.503

我能想到十几个可能出错的事情，但都不会影响你。为了将来获得更好的支持，请发布一个可运行的示例来演示您的问题。脱离上下文粘贴代码没有帮助（很多）。

从您的代码中，`getObjAL()`似乎返回了一个`Object[]`数组（单维），但是当您选择一个值时，您似乎假设所选值实际上是一个数组，我很确定它不是。

`JList#setListData`应为对象数组 ( `Object[]`) 或`Vector`.

试试这样的东西。

```
jlstPrimitives[i].addListSelectionListener(new ListSelectionListener() {
    @Override
    public void valueChanged(ListSelectionEvent listevt) {
        Jlist objLstTemp = (Jlist) listevt.getSource();
        jlst[1].setListData(new Object[]{objLstTemp.getSelectedValue()}));
    }
}); 
```

# php - 如何从 mysql 数据库中检索用逗号分隔的所有值？

> ID：15216794
> 
> 赞同：1
> 
> 时间：2013-03-05T05:55:41.910
> 
> 标签：php, mysql

我有以下代码，其中我有一个文本区域，它将输入作为单独的值并将其组合在一个句子中。例如，如果用户输入 andheri bandra dadar 然后存储在 $data 中，那么它显示为 andheri,bandra,dadar。文本区域也是自动完成的，这意味着如果您输入“da”，那么它将自动填充达达

我尝试了以下函数，然后它搜索句子中的所有值，但它只搜索句子中的第一个值，即 andheri。请帮我。

```
//code
$sql=mysql_query("SELECT * FROM broker_property WHERE find_in_set(area,'$data')") or die(mysql_error()) 
```

这`area`是 mysql 表中的一列，`$data`句子包含所有以逗号分隔的子值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T05:56:57.710

使用`MySQL CONCAT_WS OR CONCAT`将帮助您连接字符串的子句。

**官方文档**：[http ://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_concat-ws)

**例子**

```
select * from broker_property where concat_ws(' ',area,$data) like 'CONDITIONS'; 
```

或者您也可以在 where 子句中使用相等检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T05:57:26.877

将您的每个单词都用引号括起来，然后使用它

```
SELECT * FROM broker_property WHERE area IN ($data) 
```

例子

```
 SELECT * FROM broker_property WHERE area IN ("First","Second","Third") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:00:27.563

利用`IN`

```
$sql=mysql_query("SELECT * FROM broker_property WHERE area IN ('$data')"); 
```

# java - 为什么我收到“找不到符号”错误

> ID：15216795
> 
> 赞同：0
> 
> 时间：2013-03-05T05:55:46.137
> 
> 标签：java

我正在尝试创建一个从 URL 获取源代码的类。我不明白为什么我在这一行得到“找不到符号错误”：

`catch (MalformaedURLException e)`

如果有人能解释什么是错的，那就太好了......谢谢

这是我的整个代码：

```
import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;
import java.net.MalformedURLException;

public class SourceCode
{
private String source;
public SourceCode(String url)
{
    try
    {
        URL page = new URL(url);
        this.source = getSource(page);
    }
    catch (MalformedURLException e)
    {
        e.printStackTrace();
    }
}

public String getSource(URL url) throws Exception
{

        URLConnection spoof = url.openConnection();
        BufferedReader in = new BufferedReader(new InputStreamReader(spoof.getInputStream()));
        String strLine = "";

        spoof.setRequestProperty( "User-Agent", "Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0; H010818)" );

        while ((strLine = in.readLine()) != null)
        {
            strLine = strLine + "\n";
        }
        return strLine;
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T06:00:38.800

此代码存在多个问题。

1.  您缺少导入`java.net.MalformedURLException`
2.  `getSource()`没有返回任何内容，您需要从该方法返回一个字符串。
3.  您`spoof.setRequestProperty`在开始从源读取后进行设置
4.  您的构造函数忽略异常而不是将其抛出
5.  源没有吸气剂

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.URL;
import java.net.URLConnection;

public class SourceCode {
    private String source;

    public SourceCode(URL pageURL) throws IOException {
        this.source = getSource(pageURL);
    }

    public String getSource() {
        return source;
    }

    private String getSource(URL url) throws IOException {
        URLConnection spoof = url.openConnection();
        StringBuffer sb = new StringBuffer();

        spoof.setRequestProperty("User-Agent", "Mozilla/4.0 (compatible; MSIE 5.5; Windows NT 5.0; H010818)");
        BufferedReader in = new BufferedReader(new InputStreamReader(spoof.getInputStream()));

        String strLine = "";
        while ((strLine = in.readLine()) != null) {
            sb.append(strLine);
        }

        return sb.toString();
    }

    public static void main(String[] args) throws IOException {
        SourceCode s = new SourceCode(new URL("https://www.google.co.in/"));
        System.out.println(s.getSource());
    }
} 
```

# php - .htaccess 带有 .gif 扩展名的 php

> ID：15216800
> 
> 赞同：0
> 
> 时间：2013-03-05T05:56:00.160
> 
> 标签：php, .htaccess, gif

我知道我可以编写一个 php 脚本并将其与图像分机一起保存。通过将以下内容添加到我的`.htaccess`

`AddType application/x-httpd-php .gif`

但是，如果我只希望某个目录中的文件被这样对待呢？我该怎么做？我正在考虑为我的电子邮件帐户制作一个页脚，我想用它收集一些基本的非侵入性数据。这甚至可以工作（假设客户端没有关闭图像）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:01:19.920

```
<Files "/thisdirectory">
  AddType application/x-httpd-php .gif
</Files> 
```

有关 Apache 2.4 文档，请参见此处。

[http://httpd.apache.org/docs/current/mod/core.html](http://httpd.apache.org/docs/current/mod/core.html)

# php - 如何在所有浏览器支持的新窗口中打开视频

> ID：15216801
> 
> 赞同：0
> 
> 时间：2013-03-05T05:56:01.363
> 
> 标签：php, javascript

我想在单击链接时在新窗口中打开一个 .mp4 视频。

现在，我正在使用此功能打开新窗口：

```
function showCreateProfilePopup()
            {
                var myAjax = $.ajax({
                    url: '<?php echo $this->config->item('url'); ?>info/createProfileVideo',
                    type: "POST",
                    success: function(response) {
                        var windowWidth = 625;
                        var windowHeight = 500;
                        var centerWidth = (window.screen.width - windowWidth) / 2;
                        var centerHeight = (window.screen.height - windowHeight) / 2;
                        myWindow = window.open('','Video','width='+windowWidth+', height='+windowHeight+',scrollbars=no,resizable=no, innerWidth='+windowWidth+', innerHeight='+windowHeight+',left='+centerWidth+',top='+centerHeight);
                        myWindow.document.write(response);
                        myWindow.focus();
                    }
                });
            } 
```

肯定会打开窗口，但**所有 Browser 的大小都不相同**。

然后它通过一个视频发布到另一个视图，例如：

```
<video controls="controls" poster="<?php echo $this->config->item('content_url'); ?>/images/scrublyVideo.png" width="610" height="450">
    <source src="<?php echo $this->config->item('content_url'); ?>video/createProfileHelpVideo.mp4" type="video/mp4" />
    <object width='610' height='450' id='player' name='player'>
        <param name="movie" value="<?php echo $this->config->item('content_url'); ?>video/createProfileHelpVideo.mp4" />
        <param name="allowFullScreen" value="true" />
        <param name="wmode" value="transparent" />
        <param name="autoStart" value="false">
        <img alt="Scrubly" src="<?php echo $this->config->item('content_url'); ?>/images/scrublyVideo.png" width="640" height="360" title="Scrubly Create Profile Help" />
        <embed src='<?php echo $this->config->item('content_url'); ?>video/createProfileHelpVideo.mp4' type='Svideo/mp4' allowfullscreen='true' allowscriptaccess='always' width='600' height='450'/>
    </object>
</video> 
```

有人告诉我打开所有浏览器（Mozilla、Chrome 和 safari）支持的视频的最简单方法？？？？？？

-非常感谢....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:50:04.170

好的，我通过使用 jwPlayer 库得到了答案。

-感谢您的宝贵回复...

**[http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/22420/embedding-with-webm-and-mp4-source/](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5/22420/embedding-with-webm-and-mp4-source/)**

# c# - 如何创建自过期文件

> ID：15216803
> 
> 赞同：0
> 
> 时间：2013-03-05T05:56:03.280
> 
> 标签：c#, c++, file-format

我需要使用桌面软件来控制 STL 文件的使用。（我将开发该软件）。它可以是 C++ 或 C#。

这里的 STL 文件是指[StereoLithography](http://en.wikipedia.org/wiki/STL_%28file_format%29)文件，用于 3D 打印。

受控使用，是指经销商指定的使用。因此，它可以是 1 天、2 小时或经销商认为合适的任何时间。文件将在用户收到后自行过期。

任何想法都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:06:48.057

我查看了 STL 标准定义，看起来可能很难在其中嵌入一些许可证数据。我想到的几个选择是：

a) 创建您自己的格式作为 STL 的超集，包括一些嵌入式许可证数据。您必须限制“清除”STL 文件的使用，因为用户可能已经提取了文件的数据部分并将其保存到简单的 STL 文件中。

b) 使用您自己的结构（包括许可证）创建您自己的格式。这将使提取数据比 a) 点更难。

c) 让程序从您的服务器下载数据 - 许可证测试将在您身边。确保硬盘上没有保存任何数据，否则用户可以再次提取数据并将文件保存在其他地方

d）（首选）不要实施任何安全措施（确定的破解者最终会破坏它们，因为在某些时候您必须将未加密的 STL 数据存储在磁盘或内存中，以便可以访问）。相反，请正确许可您的文件。

请记住，没有不能破坏的安全措施。对您的客户来说，花时间开发新功能比实施新的安全措施更有价值，这会惹恼合法用户，最终会被不公平的用户忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:38:24.753

文件不会自行过期（除非我们谈论的是有故障的存储介质），并且对它们的访问需要受到软件或软硬件组合的限制。

如果您计划让 STL 文件在任何时候都可以公开使用（例如，当用户试图在查看器或编辑器中打开它们时），它们的内容就不能被隐藏或阻止复制。

即使您将它们与一个程序捆绑在一起，该程序会在编辑器启动时从您的网站中提取它们或从您的网站获取它们并在它退出时（自动）删除它们，编辑器仍然可以将副本保存为不同的文件（它甚至可以自动保存临时/备份副本）。

保护这些文件不被复制的一种方法是让它们在你的程序中可用，而不是在它之外，如果你的程序不让用户确定它们是否好，这可能会使文件完全无用（我是想象一下，`1 day, 2 hour, or whatever`暗示某种试用版）。但即便如此，他们仍然可能在运行时被熟练的黑客从中提取出来。

如果操作系统以您感兴趣的方式支持任意文件的 DRM，您可能能够使用操作系统 DRM 功能来控制文件复制和生命周期。不幸的是，我没有这方面的实际知识来指出这种解决方案的方向。

另一种选择是公开分发文件，但在其中嵌入某种水印，对于每个用户/许可证都是唯一的，并且能够在一定量的编辑中幸存下来。这并不能解决所有问题，但如果一份副本开始在网上流传，您将能够分辨出是谁“泄露”了它并追踪他们。

无论如何，只要有足够的时间和技能，所有的保护措施都可以绕过。如果你不能打破它，这并不意味着其他人就不能。

# paypal - 设置 Express Checkout 方法在 ack 中返回失败

> ID：15216804
> 
> 赞同：0
> 
> 时间：2013-03-05T05:56:28.613
> 
> 标签：paypal, payment-gateway

我想在不重定向浏览器的情况下为客户在贝宝中进行快速结帐过程。我写了这样的代码

```
 string sAPIUser = apiuser;
        string sAPIPassword = password;
        string sAPISignature = "signature";
        string sAPIEndpoint = "https://api-3t.sandbox.paypal.com/nvp";           
        string sAppID = "APP-80W284485P519543T";

        StringBuilder sRequest = new StringBuilder();

        ASCIIEncoding encoding = new ASCIIEncoding();
        string postData = ("&METHOD=SetExpressCheckout");
        postData += ("&VERSION=63.0");
        postData += ("&PAYMENTREQUEST_0_AMT=10.00");
        postData += ("&PAYMENTREQUEST_0_CURRENCYCODE=USD");
        postData += ("&PAYMENTREQUEST_0_PAYMENTACTION=Sale");
        postData += ("CANCELURL=http://www.google.com");
        postData += ("RETURNURL=http://www.google.com");
        byte[] data = encoding.GetBytes(postData); 
```

// 准备网络请求...

```
 HttpWebRequest myRequest = (HttpWebRequest)WebRequest.Create(sAPIEndpoint);
   myRequest.Method = "POST";
   myRequest.Headers.Add("X-PAYPAL-SECURITY-USERID", sAPIUser);
   myRequest.Headers.Add("X-PAYPAL-SECURITY-PASSWORD", sAPIPassword);
   myRequest.Headers.Add("X-PAYPAL-SECURITY-SIGNATURE", sAPISignature);
   myRequest.Headers.Add("X-PAYPAL-SERVICE-VERSION", "1.3.0");
   myRequest.Headers.Add("X-PAYPAL-REQUEST-DATA-FORMAT", "NV");
   myRequest.Headers.Add("X-PAYPAL-RESPONSE-DATA-FORMAT", "NV");
   myRequest.Headers.Add("X-PAYPAL-APPLICATION-ID", sAppID);
   myRequest.ContentType = "application/x-www-form-urlencoded";
   myRequest.ContentLength = data.Length;
   // Send the request, read the response
   Stream newStream = myRequest.GetRequestStream();
   newStream.Write(data, 0, data.Length);
   newStream.Close();
   HttpWebResponse response = (HttpWebResponse)myRequest.GetResponse();
   Stream responseStream = response.GetResponseStream();
   Encoding encoding2 = Encoding.GetEncoding("utf-8");
   StreamReader reader = new StreamReader(responseStream, encoding2);
   string theResponse = reader.ReadToEnd();
   theResponse = HttpUtility.HtmlDecode(theResponse); 
```

但我在`theResponse`变量中收到失败消息。我在做什么错误。错误就像

```
 TIMESTAMP=2013%2d03%2d05T05%3a55%3a38Z&CORRELATIONID=5c10035aca937&ACK=Failure&VERSION=63%2e0&BUILD=5331358&L_ERRORCODE0=10002&L_SHORTMESSAGE0=Authentication%2fAuthorization%20Failed&L_LONGMESSAGE0=You%20do%20not%20have%20permissions%20to%20make%20this%20API%20call&L_SEVERITYCODE0=Error 
```

我该如何纠正这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T13:57:23.703

确保您使用的凭据适用于您的沙盒帐户，而不是您的真实帐户。您的代码看起来像是指向沙箱，因此您需要使用沙箱凭据。此外，如果这不是您的全部代码，请确保您没有传递名为“SUBJECT”的变量并使用电子邮件地址填充它。

# twitter - twitter bootstrap 响应式菜单悬停

> ID：15216811
> 
> 赞同：0
> 
> 时间：2013-03-05T05:57:20.183
> 
> 标签：twitter, twitter-bootstrap, hover, navbar

如何在移动设备上查看菜单/导航栏的悬停文本颜色为白色。我已经尝试查看引导程序的 css 代码，但我找不到它。![屏幕](../Images/1dc61d08278fae345b73f56c7c15ef74.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T07:41:00.670

您可以编写媒体查询来满足`li`元素的特定悬停状态，例如：
Jsfiddle [Demo](http://jsfiddle.net/shail/evX7x/1/)

```
 @media (max-width: 767px) {

.navbar .nav > .active > a:hover, .navbar .nav > .active > a:focus {
background-color: #888;/* change this color*/
box-shadow: 0 3px 8px rgba(0, 0, 0, 0.125) inset;
color: #555555;
text-decoration: none;
  }
  } 
 @media (max-width: 767px) {

 .nav-collapse .nav > li > a:hover, .nav-collapse .nav > li > a:focus, .nav-collapse .dropdown-menu a:hover, .nav-collapse .dropdown-menu a:focus {
 background-color: #000;/*you can change this color to anything*/
  }
 }
  @media (max-width: 480px) {

     .nav-collapse .nav > li > a:hover, .nav-collapse .nav > li > a:focus, .nav-collapse .dropdown-menu a:hover, .nav-collapse .dropdown-menu a:focus {
 background-color: #000;/* you can change this color to anything */
}
} 
```

# php - 配置错误中未指定AuthUserFile？

> ID：15216818
> 
> 赞同：3
> 
> 时间：2013-03-05T05:57:33.060
> 
> 标签：php, .htaccess

我的错误日志文件中出现错误“未在配置中指定 AuthUserFile”。如何修复它。这是我的 .htaccess 文件，它位于亚马逊文件服务器中。

```
## mod auth_mysql
AuthBasicAuthoritative Off
AuthMYSQL on
AuthMySQL_Authoritative on
AuthMySQL_DB dbname
Auth_MySQL_Host localhost
Auth_MySQL_User username
Auth_MySQL_Password password
AuthMySQL_Password_Table tbl_name
AuthMySQL_Username_Field user_name
AuthMySQL_Password_Field password
AuthMySQL_Empty_Passwords off
AuthMySQL_Encryption_Types SHA1Sum
# Standard auth stuff
AuthType Basic
AuthName "restricted zone"

Require valid-user 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-25T16:23:29.293

你应该简单地放一个

```
AuthUserFile /dev/null 
```

在您的 .htaccess 中。这对我有用。

对于带来 auth_mysql 配置的其余痛苦，您完全理解 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T05:59:05.243

该错误不是指您的`.htaccess`，而是指主要的`httpd.conf`Apache 配置文件。将该行添加到您的`httpd.conf`然后重新启动您的`httpd`服务。

# c# - 从 Ftp 服务器下载文件，不区分大小写匹配 c#

> ID：15216835
> 
> 赞同：3
> 
> 时间：2013-03-05T05:58:29.640
> 
> 标签：c#, ftp, download, case-insensitive

这是我从 ftp 服务器下载文件的代码，但它区分大小写匹配.. 你能帮我下载不匹配大小写吗？

例如：如果我尝试下载“6Gt6hh.xml”但 ftp 服务器中的现有文件是“6GT6hh.Xml”。它不是用我的代码下载的，你能帮帮我吗？

```
private void Download(string file, ServerCredentials FtpCdrl, string DayOfYear, string dest, string ab)
    {
        try
        {
            string uri = "ftp://" + FtpCdrl.Host + "/" + FtpCdrl.DirPath.Replace("\\", "/") + "/" + DayOfYear + "/" + file;
            Uri serverUri = new Uri(uri);
            if (serverUri.Scheme != Uri.UriSchemeFtp)
            {
                return;
            }
            if (!Directory.Exists(dest))
                Directory.CreateDirectory(dest);
            if (!Directory.Exists(dest + "\\" + ab))
                Directory.CreateDirectory(dest + "\\" + ab);
            FtpWebRequest reqFTP;
            reqFTP = (FtpWebRequest)FtpWebRequest.Create(new Uri("ftp://" + FtpCdrl.Host + "/" + FtpCdrl.DirPath.Replace("\\", "/") + "/" + DayOfYear + "/" + file));
            reqFTP.Credentials = new NetworkCredential(FtpCdrl.UID, FtpCdrl.Pwd);
            reqFTP.KeepAlive = false;
            reqFTP.Method = WebRequestMethods.Ftp.DownloadFile;
            reqFTP.UseBinary = true;
            reqFTP.Proxy = null;
            reqFTP.UsePassive = false;
            FtpWebResponse response = (FtpWebResponse)reqFTP.GetResponse();
            Stream responseStream = response.GetResponseStream();

            FileStream writeStream = new FileStream(dest + "\\" + ab + "\\" + file, FileMode.Create);
            int Length = 2048;
            Byte[] buffer = new Byte[Length];
            int bytesRead = responseStream.Read(buffer, 0, Length);

            while (bytesRead > 0)
            {
                writeStream.Write(buffer, 0, bytesRead);
                bytesRead = responseStream.Read(buffer, 0, Length);
            }
            status("File Downloaded Successfully: .\\" + ab + "\\" + file, Color.Green);
            writeStream.Close();
            response.Close();
            failed = 0;
        }
        catch (WebException wEx)
        {
            failed++;
            status("[Download Error]" + wEx.Message, Color.Red);
            if (failed < 3)
                Download(file, FtpCdrl, DayOfYear, dest, ab);
        }
        catch (Exception ex)
        {
            status("[Download Error]" + ex.Message, Color.Red);
        }
    }
 public class ServerCredentials
    {
        public string Host, UID, Pwd, DirPath;
        public int Pst;
        public string Mail;
        public string facility;
        public string Batchextn;

        public ServerCredentials(string _Host1, string _DirPath1, string _Uid1, string _Pwd1, string _Mail, int _Pst1, string _facility, string _batchextn)
        {
            Host = _Host1;
            UID = _Uid1;
            Pwd = _Pwd1;
            DirPath = _DirPath1;
            Pst = _Pst1;
            Mail = _Mail;
            facility = _facility;
            Batchextn = _batchextn;
        }
    }
    public List<ServerCredentials> Svr = new List<ServerCredentials>(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:40:03.873

Uris 区分大小写，由服务器决定是否允许对文件进行不区分大小写的访问。即传统上大多数 HTTP 服务器忽略 Uri 的路径部分的大小写，但通常尊重查询部分的大小写。

在您的情况下，您访问的 FTP 服务器似乎强制文件名的大小写匹配（对于 Unix/Linux 服务器很常见），甚至可能有多个具有不同大小写的文件。

正确的实现是首先列出内容，然后从文件列表中选择文件名。[如何：使用 FTP 列出目录内容](http://msdn.microsoft.com/en-us/library/ms229716.aspx)一文涵盖了此步骤。

```
FtpWebRequest request = (FtpWebRequest)WebRequest.Create("ftp://www.contoso.com/");
request.Credentials = new NetworkCredential ("anonymous","janeDoe@contoso.com");
request.Method = WebRequestMethods.Ftp.ListDirectoryDetails;

using(var response = (FtpWebResponse)request.GetResponse())
  using(var responseStream = response.GetResponseStream())
    using(var reader =  new StreamReader(responseStream))
    {
      Console.WriteLine(reader.ReadToEnd());
    } 
```

# javascript - jQuery 遍历是否优于选择器？

> ID：15216838
> 
> 赞同：47
> 
> 时间：2013-03-05T05:58:56.627
> 
> 标签：javascript, jquery, performance

使用`$("#vacations").find("li").last()`是比 更好的做法`$("#vacations li:last")`吗？

背景和我的想法：

我正在玩一个很好的交互式[试用 jQuery 教程](http://try.jquery.com/levels/2/sections/11)，其中一项任务说：

> 在查看代码时，您注意到其他人正在选择最后一个假期：$("#vacations li:last")。你看着这个，你会想，“遍历会让这条路更快！” 您应该根据这些想法采取行动，重构此代码以使用遍历找到 #vacations 中的最后一个 li。

为什么我会这么认为？对我来说，选择器的使用看起来比遍历要高一些。在我看来，当我指定一个选择器时，jQuery 如何更好地获得我需要的单个结果（无需返回中间结果）。

使用复合选择器的额外开销是多少？是因为当前的选择器逻辑实现只是解析字符串并使用遍历 API？解析字符串这么慢吗？未来的实现是否有可能使用不需要返回中间结果并且比遍历更快的事实？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-05T06:25:09.740

对此没有直接的答案，但就`:last`您使用的选择器而言，它是 Selectors API 标准的专有扩展。`.querySelectorAll`因此，与本机方法一起使用是无效的。

Sizzle 所做的基本上是尝试将您的选择器与`.querySelectorAll`.

这意味着包括选择器之类的`:last`将导致您无法使用本机代码获得 DOM 选择的速度提升。

此外，还包含一些优化，因此当您的选择器非常简单时，例如只是一个 ID 或一个元素名称，将使用原生的`getElementById`和`getElementsByTagName`，这非常快；通常甚至比`querySelectorAll`.

而且由于该`.last()`方法只是抓取集合中的最后一个项目，而不是过滤所有项目，这是 Sizzle 过滤器通常所做*的（至少他们曾经这样做过）*，这也将起到推动作用。

IMO，远离专有的东西。现在这`.querySelectorAll`几乎无处不在，只使用符合标准的选择器有真正的优势。做任何进一步的过滤后 DOM 选择。

* * *

在 的情况下`$("#vacations").find("li")`，不要担心中期结果。这将使用`getElementById`后跟`getElementsByTagName`，并且会非常快。

如果你真的超级在意速度，那就减少 jQuery 的使用，直接使用 DOM。

* * *

您目前会在文档中找到类似 选择器的注释，这些注释会[`:last`](http://api.jquery.com/last-selector/)警告您性能损失：

> 因为 :last 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用的查询`:last`不能利用原生 DOM`querySelectorAll()`方法提供的性能提升。要在使用`:last`to 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用`.filter(":last")`.

但我不同意这`.filter(":last")`将是一个很好的替代品。更好的是这样的方法`.last()`将直接针对元素而不是过滤集合。我有一种感觉，他们只是希望人们继续使用他们不符合标准的选择器。IMO，你最好忘记它们。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-03-05T06:29:15.423

这是您的设置的测试：http: [//jsperf.com/andrey-s-jquery-traversal](http://jsperf.com/andrey-s-jquery-traversal)

[jQuery 的选择器引擎Sizzle](https://github.com/jquery/sizzle/blob/master/sizzle.js)`getElementById`使用正则表达式解析字符串，并尝试使用and来加速非常基本的选择器`getElementsByTagName`。如果您的选择器比`#foo`and更复杂`img`，它会尝试使用`querySelectorAll`，它只接受有效的 CSS 选择器（没有`:radio`,`:eq`或`:checkbox`其他 jQuery 特定的伪选择器）。

选择器字符串可读性较差*且*速度较慢，因此确实没有理由使用它。

通过将选择器字符串分解成 Sizzle 可以快速解析的简单块 ( `#id`and `tagname`)，您基本上只是将对 and 的调用链接在一起`getElementById`，`getElementsByTagName`这几乎是您可以获得的最快速度。

# sql - 求年差最大值

> ID：15216841
> 
> 赞同：4
> 
> 时间：2013-03-05T05:59:14.593
> 
> 标签：sql, date

我这里有两张桌子

```
BIODATA
ID                    NAME
1                     A
2                     B

YEAR
ID                    JOIN YEAR            GRADUATE YEAR
1                     1990                 1991
2                     1990                 1993 
```

我已经在使用

```
select 
    NAME, 
    max(year(JOIN_YEAR) - year(GRADUATE_YEAR)) as MAX 
from 
    DATA_DIRI 
right join DATA_KARTU 
    ON BIODATA.ID = YEAR.ID; 
```

但结果变成了：

```
+--------+------+
| NAME   | MAX  |
+--------+------+
| A      | 3    |
+--------+------+ 
```

我已经尝试了很多不同类型的连接，但我仍然找不到 NAME 如何成为“B”。任何人都可以帮助我吗？之前非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:07:00.590

如果您同时在选择集中使用聚合和非聚合，则用于非聚合字段的行基本上是随机选取的。

基本上， max 的工作原理是这样的 - 它通过查询收集每个组的所有行（如果没有 group by，则所有行），计算最大值并将其放入结果中。

但是由于您还输入了一个非聚合字段，因此它需要一个值 - 所以 SQL 所做的只是选择一个随机行。您可能会想“好吧，为什么它不选择与 max 相同的行呢？” 但是如果你使用 avg 或 count 呢？这些没有与之关联的行，所以它可以做的最好的就是随机选择。这就是为什么这种行为普遍存在的原因。

您需要做的是使用子查询。就像是`select d1.id from data_diri d1 where d1.graduate_year - d1.join_year = (select max(d2.graduate_year - d2.join_year from data_diri d2))`

# apache-pig - 猪配置弹簧

> ID：15216843
> 
> 赞同：1
> 
> 时间：2013-03-05T05:59:41.043
> 
> 标签：apache-pig

您是否遇到过使用 spring 配置和运行 pig 作业？

因为最近我试图整合 spring 和 pig 在此期间我无法获取`hdp:pig-runner`和`hdp:pig-factory`运行标签。提示“cvc-complex-type.2.4.c：匹配的通配符是严格的，但找不到元素‘hdp:pig-factory’的声明”。. 我尝试了所有可能的方法，但无法提出解决方案。你们中的任何人都可以帮忙吗？即使是任何小的建议都会有所帮助。

我使用的模式是

```
<beans xmlns:hdp="http://www.springframework.org/schema/hadoop" <xsi:schemaLocation="http://www.springframework.org/schema/hadoop http://www.springframework.org/schema/hadoop/spring-hadoop.xsd http://www.springframework.org/schema/hadoop http://www.springframework.org/schema/hadoop/spring-hadoop.xsd"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-31T09:43:54.627

如果你仍然面临这个问题..

首先，您在配置文件中声明了 2 个 spring-hadoop.xsd。

另外，您是否添加了必要的库。如，如果您使用 maven，您是否添加了必要的依赖项？

# ios - iOS上的文件管理器等效？

> ID：15216844
> 
> 赞同：0
> 
> 时间：2013-03-05T05:59:44.927
> 
> 标签：ios, file-manager

我正在使用 Xcode 4.2 在 iOS 上制作视频解码器应用程序。单击按钮时，我需要从文件列表中选择要解码的输入文件。由于 iOS 上没有文件管理器或文件浏览器，有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:51:51.360

正如其他人指出的那样，没有 iOS 文件管理器。有什么 FileManager 类。该课程使您能够：

*   获得对应用程序包中项目的只读访问权限
*   获得对您应用的沙盒容器的读/写访问权限

您无法访问设备上其他位置的文件，也无法访问属于其他应用程序的文件。

一些 iOS 应用程序（相机、图片、联系人等）可以通过苹果为此目的提供的 iOS API以*有限的方式进行交互。*您可以在 Apple 开发人员在线文档中获得更多相关信息。

因此，如果您的文件位于本地应用程序沙箱中，您可以使用 FileManager 手动构建一个 UI，允许用户查看那里的文件列表并选择一个。它们的关键是在 FileManager 访问文件树的功能之上“您可以构建”。

# php - PHP 和 mySQL “更新”实际上并没有更新

> ID：15216847
> 
> 赞同：2
> 
> 时间：2013-03-05T06:00:16.560
> 
> 标签：php, mysql, sql-update

所以我和我的朋友得出一个结论，就是 $_email 变量搞砸了一切。只要它是硬编码的，它就可以工作。但是，只要它作为 $_email 无处不在，它就不会。该消息作为“更新”通过，但没有更新。

```
require_once('appVars6.php');
require_once('connectVars6.php');
$_dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
$_id = $_GET['id'];
$_queryOne = "SELECT * FROM midterm WHERE id = '$_id'";
$_resultOne = mysqli_query($_dbc, $_queryOne) or die ('Error Querying Database');
while ($_row = mysqli_fetch_array($_resultOne)) {
echo '<form class="update" method="post" action="MT_vjones_udpateRecord.php?id=' . $_id . '">';
echo '<input type="hidden" name="id" id="id" value="' . $_row['id'] . '" />';
echo '<input type="text" name="firstName" id="firstName" value="' . $_row['firstName'] . '" /><br />';
echo '<input type="text" name="lastName" id="lastName" value="' . $_row['lastName'] . '" /><br />';
echo '<input type="text" name="email" id="email" value="' . $_row['email'] . '" /><br />';
echo '</form>';
}
if ( isset($_GET['firstName']) && isset($_GET['lastName']) && isset($_GET['email'])) {
$_id = $_GET['id'];
$_firstName = $_GET['firstName'];
$_lastName = $_GET['lastName'];
$_email = $_GET['email'];   
}
else if ( isset($_POST['firstName']) && isset($_POST['lastName']) && isset($_POST['email'])) {
$_id = $_POST['id'];
$_firstName = mysqli_real_escape_string($_dbc, trim($_POST['firstName']));
$_lastName = mysqli_real_escape_string($_dbc, trim($_POST['lastName']));
$_email = mysqli_real_escape_string($_dbc, trim($_POST['email']));
}
else {
echo '<br />';
echo '<p class="error">Sorry, no record was selected.</p>';
}
if(isset($_POST['submit'])) {
if ($_POST['confirm'] == 'Yes') {
//$_dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);
$_query = "UPDATE midterm " .
"SET email = '$_email'" .
"WHERE id = $_id" ;
$_result = mysqli_query($_dbc, $_query) or die (mysqli_error($_dbc));
mysqli_close($_dbc);
echo '<p>The record of ' . $_firstName . ' ' . $_lastName . ' for ' . $_email . ' was successfully updated.';
}
else {
echo '<p class="error">The record was not updated.</p>';
}
}
else if (isset($_id) && isset($_firstName) && isset($_lastName) && isset($_email)) {
echo '<p>Are you sure you want to update the following record?</p>';
/*echo '<form class="update" method="post" action="MT_vjones_updateRecord.php">';
echo '<input type="text" name="firstName" id="firstName" value="' . $_firstName . '" /><br />';
echo '<input type="text" name="lastName" id="lastName" value="' . $_lastName . '" /><br />';
echo '<input type="text" name="email" id="email" value="' . $_email . '" /><br />';
echo '</form>';*/
echo '<form class="update" method="post" action="MT_vjones_updateRecord.php?id=' . $_id . '">';
echo '<div class="yesNo"><input class="radio" type="radio" name="confirm" value="Yes" /> Yes </div><br />';
echo '<div class="yesNo"><input class="radio" type="radio" name="confirm" value="No" checked="checked" /> No </div><br /><br />';
echo '<input class="applyBtn" type="submit" value="UPDATE" name="submit" />';
echo '<input type="hidden" name="id" value="' . $_id . '" />';
echo '<input type="hidden" name="firstName" value="' . $_firstName . '" />';
echo '<input type="hidden" name="lastName" value="' . $_lastName . '" />';
echo '<input type="hidden" name="email" value="*testBACK2FUN@test.com*" />';
}
echo '<p><a href="MT_vjones_adminAccess.php">&lt;&lt; Back to the Admin Page</a></p>'; 
```

如您所见，我们将电子邮件地址放在那里用于测试目的......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:04:26.137

```
 $_query = "UPDATE midterm " .
            "SET email = '$_email' WHERE id = '$_id'" ; 
```

应该

```
$_query = "UPDATE midterm " .
          "SET email = $_email".
          "WHERE id = $_id " ; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:09:59.987

检查 id 是否与您要更新的内容相匹配。确保在更新之前和之后打印 $_id 和 $_email。

@user710502：您不需要在 PHP 中用双引号分隔引号。无论如何它都会读取它，您唯一可能会打扰的是如果您正在从数组中读取，例如：

```
"UPATE midterm SET email='".$POST['email']."'" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:19:55.157

原因是您使用的`$_`before 变量不是有效的变量声明。

因为是为php`$_`保留的。`SUPER GLOBAL``(i.e $_SESSION,$_SERVER,$_POST,$_GET,$_COOKIE etc)`

如果这对您来说不是问题，那么您需要如下连接您的变量。

```
$_query = "UPDATE midterm SET email = '".$_email."' WHERE id = '".$_id."'" ; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T05:21:28.730

解决了！形式问题。

应该：

```
<?php
require_once('appVars6.php');
require_once('connectVars6.php');

$_dbc = mysqli_connect(DB_HOST, DB_USER, DB_PASSWORD, DB_NAME);

$_id = $_GET['id'];
$_queryOne = "SELECT * FROM midterm WHERE id = '$_id'";
$_resultOne = mysqli_query($_dbc, $_queryOne) or die ('Error Querying Database');

while ($_row = mysqli_fetch_array($_resultOne)) {
    echo '<form class="update" method="post" action="MT_vjones_udpateRecord.php?id=' . $_id . '">';
    echo '<input type="hidden" name="id" id="id" value="' . $_row['id'] . '" />';
    echo '<input type="hidden" name="firstName" id="firstName" value="' . $_row['firstName'] . '" />';
    echo '<input type="hidden" name="lastName" id="lastName" value="' . $_row['lastName'] . '" />';
    echo '<input type="hidden" name="email" id="email" value="' . $_row['email'] . '" />';
    echo '</form>';
}

if ( isset($_GET['firstName']) && isset($_GET['lastName']) && isset($_GET['email'])) {
    $_id = $_GET['id'];
    $_firstName = $_GET['firstName'];
    $_lastName = $_GET['lastName'];
    $_email = $_GET['email'];   
}

    else if ( isset($_POST['firstName']) && isset($_POST['lastName']) && isset($_POST['email'])) {
        $_id = $_POST['id'];
        $_firstName = mysqli_real_escape_string($_dbc, trim($_POST['firstName']));
        $_lastName = mysqli_real_escape_string($_dbc, trim($_POST['lastName']));
        $_email = mysqli_real_escape_string($_dbc, trim($_POST['email']));
    }

        else {
                echo '<br />';
                echo '<p class="error">Sorry, no record was selected.</p>';
        }

if(isset($_POST['submit'])) {
    if ($_POST['confirm'] == 'Yes') {

    $_query = "UPDATE midterm " .
                "SET email = '$_email'" .
                "WHERE id = $_id" ;

    $_result = mysqli_query($_dbc, $_query) or die (mysqli_error($_dbc));

    mysqli_close($_dbc);
    echo '<p>The record of ' . $_firstName . ' ' . $_lastName . ' for ' . $_email . ' was successfully updated.';
    }

        else {
            echo '<p class="error">The record was not updated.</p>';
        }
}

    else if (isset($_id) && isset($_firstName) && isset($_lastName) && isset($_email)) {
        echo '<p>Are you sure you want to update the following record?</p>';
        echo '<form class="update" method="post" action="MT_vjones_updateRecord.php?id=' . $_id . '">';
        echo '<div class="yesNo"><input class="radio" type="radio" name="confirm" value="Yes" /> Yes </div><br />';
        echo '<div class="yesNo"><input class="radio" type="radio" name="confirm" value="No" checked="checked" /> No </div><br /><br />';
        echo '<input type="hidden" name="id" value="' . $_id . '" />';
        echo '<input type="text" name="firstName" value="' . $_firstName . '" /><br />';
        echo '<input type="text" name="lastName" value="' . $_lastName . '" /><br />';
        echo '<input type="text" name="email" value="' . $_email . '" />';
        echo '<input class="applyBtn" type="submit" value="UPDATE" name="submit" />';
    }

echo '<p><a href="MT_vjones_adminAccess.php">&lt;&lt; Back to the Admin Page</a></p>';
?> 
```

# ubuntu - 可以指定对 ssh 命令的接口吗？

> ID：15216856
> 
> 赞同：0
> 
> 时间：2013-03-05T06:01:04.820
> 
> 标签：ubuntu, openssh

我试图通过 ssh 连接到我的远程服务器。但是由于代理限制，这是不可能的，因为 eth0 被用作默认值。

但我有 wlan0 接口与我自己的互联网网关。

我如何指定使用 wlan0 而不是 eth0 到我的 openssh 客户端？

我尝试了以下方法，但它不起作用：

```
:~$ ssh -v 176.111.109.0
OpenSSH_5.3p1 Debian-3ubuntu7, OpenSSL 0.9.8k 25 Mar 2009
debug1: Reading configuration data /home/unmanner/.ssh/config
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to 176.111.109.0 [176.111.109.0] port 22.
debug1: connect to address 176.111.109.0 port 22: Connection refused
ssh: connect to host 176.111.109.0 port 22: Connection refused 
```

我也试过这样的“绑定”选项：

```
:~$ ssh -v -b 172.20.10.6 176.111.109.0
OpenSSH_5.3p1 Debian-3ubuntu7, OpenSSL 0.9.8k 25 Mar 2009
debug1: Reading configuration data /home/unmanner/.ssh/config
debug1: Reading configuration data /etc/ssh/ssh_config
debug1: Applying options for *
debug1: Connecting to 176.111.109.0 [176.111.109.0] port 22.
debug1: connect to address 176.111.109.0 port 22: Connection timed out
ssh: connect to host 176.111.109.0 port 22: Connection timed out 
```

其中“172.20.10.6” - 连接在 wlan0 上的 IP 地址。

如果我拔下以太网电缆 - 一切正常！但我希望有可能同时使用这两个接口。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:09:58.537

`176.111.109.0`您可以通过网关添加到您的主机的路由`w.x.y.z`

```
route add -host 176.111.109.0 gw w.x.y.z wlan0 
```

这样，所有流量`176.111.109.0`都通过指定ie`gateway IP address`上的指定。`network interface``wlan0`

`/sbin/route`您可以从断开有线网络并且仅连接无线网络时的输出中找出 wl0 的网关 IP 地址。

**注意**：如果您重新启动盒子，您手动添加的路线将被清除。要使路由在重新启动后保持不变，您需要将以下行添加到您的`/etc/sysconfig/network-scripts/route-wlan0`

```
# Host route for 176.111.109.0 through w.x.y.z on wlan0
176.111.109.0 via w.x.y.z dev wlan0 
```

# c++ - 类中的枚举，具有显式作用域，C++11 之前？

> ID：15216857
> 
> 赞同：1
> 
> 时间：2013-03-05T06:01:05.620
> 
> 标签：c++, visual-studio-2010, enums, namespaces

我使用 VS2010，它没有 C++11 的强类型枚举。我可以没有强类型，但同样，我想将枚举排除在我的类的命名空间之外。

```
class Example{
    enum Color{
        red,
        green,
        blue
    };

    int Rainbows{
        Color x = red;           // this should be impossible
        Color y = Color::green;  // this is the only way at the enumerations
    }
}; 
```

我的问题是，在 C++11 之前，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:04:07.877

```
namespace ExampleColor {
   enum Color {
     red,
     green,
     blue
   };
}

class Example {
   int Rainbows{ExampleColor::Color x = ExampleColor::red};
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:14:20.607

我会尝试以下方法：

```
class Color
{
private:
    int value;

    Color(int newValue)
    {
        value = newValue;
    }

public:
    static Color red;
    static Color green;
    static Color blue;
};

Color Color::red = Color(1);
Color Color::green = Color(2);
Color Color::blue = Color(4);

int main(int argc, char * argv[])
{
    Color color = Color::red;
} 
```

# windows - 我可以在 Windows 任务计划程序中执行 .SH 文件吗？

> ID：15216860
> 
> 赞同：2
> 
> 时间：2013-03-05T06:01:16.143
> 
> 标签：windows, bash, cygwin, scheduled-tasks, sh

.sh 脚本经过测试并在 cygwin 中运行，但现在我希望 Windows 每小时自动运行一次。

该文件具有可执行权限，现在我在 cygwin 终端中像这样运行它：

```
cd c:/users/me/documents/myfile.sh
./myfile.sh 
```

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-08T08:43:13.163

或者通过批处理执行 bash

执行：

```
 call "batch_from_below.bat  "c:\user\me\documents\myfile.sh" "parameter 1, if need" "parameter 2 ..." 
```

批：

```
 @echo off
     set _CYGBIN=change-this-to-your-path-cygwin\bin

     if not exist "%_CYGBIN%" echo Couldn't find Cygwin at "%_CYGBIN%"

     REM ------------------------------------------------------------------------
     REM SCRIPT
     REM ------------------------------------------------------------------------
     set x=%1
     set x=%x:\=\\%
     set _CYGPATH_SCRIPT=%_CYGBIN%\cygpath.exe %1
     FOR /f "delims=" %%A in ('%_CYGBIN%\cygpath.exe "%x%"') do set _SCRIPT=%%A

     REM ------------------------------------------------------------------------
     REM PATH
     REM ------------------------------------------------------------------------
     set _SCRIPT_PATH=%~dp1
     FOR /f "delims=" %%A in ('%_CYGBIN%\cygpath.exe "%_SCRIPT_PATH%"') do set          _PATH_TO_SCRIPT=%%A

     REM ------------------------------------------------------------------------
     REM EXECUTE
     REM ------------------------------------------------------------------------
     %_CYGBIN%\bash.exe --login -c 'cd %_PATH_TO_SCRIPT%;%_SCRIPT% %2 %3 %4 %5 %6 %7 %8 %9' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T22:40:08.923

您需要修改系统环境变量**PATHEXT**使其也包含*.SH；*作为一个已知的程序文件扩展名，然后将 Bash shell 文件与Windows 中的*.SH*相关联（谷歌将是我更好的朋友:)。

# android - sqlite错误在表中插入数据

> ID：15216868
> 
> 赞同：0
> 
> 时间：2013-03-05T06:01:55.967
> 
> 标签：android, sqlite, android-sqlite

我在表中插入数据，当第一次创建数据库时成功插入数据，但是当应用程序关闭并重新启动时，它给了我错误：

```
Error inserting id=1 new=1 title=sample page previous=0 color=0 next=2 state=1 header= "";
android.database.sqlite.SQLiteConstraintException: error code 19: constraint failed
at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
at android.database.sqlite.SQLiteDatabase.insertWithOnConflict(SQLiteDatabase.java:1582)
at android.database.sqlite.SQLiteDatabase.insert(SQLiteDatabase.java:1426)
at com.testjsonparse.MainActivity.parseAndIsertData(MainActivity.java:108)
at java.lang.reflect.Method.invokeNative(Native Method) 
```

这是我在我的`MainActivity.java`

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);     

    dataSource = new ContentsDataSource(this);
    dataSource.open();
    parseAndIsertData();

}

@Override
protected void onResume() {
    // TODO Auto-generated method stub
    super.onResume();
    dataSource.open();

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
    Log.i(MY_TAGT, "OnPuse() called");      
    dataSource.close();
}
private void parseAndIsertData() {
    // Creating JSON Parser instance
    MyJSONParser jParser = new MyJSONParser();

    contentDataObject = new ContentDataObject();        
    // getting JSON string from URL
    JSONObject json = jParser.getJSONFromUrl(BASE_URL); 

    try {
        // Getting Array of Contents
        jsonArray = json.getJSONArray(MOBILE_CONTENT);          
        // looping through All Contents
        for(int i = 0; i < jsonArray.length(); i++){

            contentDataObject.setId(jsonArray.getJSONObject(i).getInt(MOBILE_CONTENT_ID));
            contentDataObject.setTitle(jsonArray.getJSONObject(i).getString(MOBILE_CONTENT_TITLE));
            contentDataObject.setFulltext(jsonArray.getJSONObject(i).getString(MOBILE_CONTENT_FULLTEXT));
            contentDataObject.setState(jsonArray.getJSONObject(i).getInt(MOBILE_CONTENT_STATE));
            contentDataObject.setNewValue(jsonArray.getJSONObject(i).getInt(MOBILE_CONTENT_NEW));
            contentDataObject.setHeader(jsonArray.getJSONObject(i).getString(MOBILE_CONTENT_HEADER));
            contentDataObject.setColor(jsonArray.getJSONObject(i).getInt(MOBILE_CONTENT_COLOR));
            contentDataObject.setNext(jsonArray.getJSONObject(i).getString(MOBILE_CONTENT_NEXT));
            contentDataObject.setPrevious(jsonArray.getJSONObject(i).getString(MOBILE_CONTENT_PREVIOUS));

            contentDataObject = dataSource.create(contentDataObject);

            Log.i(MY_TAGT, "Data Inserted " + contentDataObject.getId() + " Times");

        }           

        //textView.setText(builder);
    } catch (JSONException e) {
        e.printStackTrace();
    }
} 
```

`EDIT`插入数据的代码`db`是：

```
// Insert into Database

    public ContentDataObject create( ContentDataObject dataObject) {
        // Content class
        ContentValues values = new ContentValues();

        values.put(DBHelper.MOBILE_CONTENT_ID, dataObject.getId());
        values.put(DBHelper.MOBILE_CONTENT_TITLE, dataObject.getTitle());
        values.put(DBHelper.MOBILE_CONTENT_FULLTEXT, dataObject.getFulltext());
        values.put(DBHelper.MOBILE_CONTENT_STATE, dataObject.getState());
        values.put(DBHelper.MOBILE_CONTENT_NEW, dataObject.getNewValue());
        values.put(DBHelper.MOBILE_CONTENT_HEADER, dataObject.getHeader());
        values.put(DBHelper.MOBILE_CONTENT_COLOR, dataObject.getColor());
        values.put(DBHelper.MOBILE_CONTENT_NEXT, dataObject.getNext());
        values.put(DBHelper.MOBILE_CONTENT_PREVIOUS, dataObject.getPrevious());

        long insetId = database.insert(DBHelper.MOBILE_CONTENT_TABLE_NAME, null, values, SQLiteDatabase.CONFLICT_IGNORE);// Here it gives me error for SQLiteDatabase.CONFLICT_IGNORE
        dataObject.setId(insetId);
        return dataObject;

    } 
```

`EDIT`创建表查询是：

```
private static final String MOBILE_CONTENT_DB_CREATE = "CREATE TABLE "
        + MOBILE_CONTENT_TABLE_NAME + "( " + MOBILE_CONTENT_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + 
        MOBILE_CONTENT_TITLE    + " TEXT, " +
        MOBILE_CONTENT_FULLTEXT + " TEXT , " +
        MOBILE_CONTENT_STATE    + " INTEGER , " +
        MOBILE_CONTENT_NEW  + " INTEGER, " +
        MOBILE_CONTENT_HEADER   + " TEXT , " +
        MOBILE_CONTENT_COLOR    + " INTEGER , " +
        MOBILE_CONTENT_NEXT + " TEXT , " +
        MOBILE_CONTENT_PREVIOUS + " TEXT );"; 
```

现在我无法找到为什么会发生此错误。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:45:29.740

在您的表创建中“MOBILE_CONTENT_ID”是 INTEGER PRIMARY KEY AUTOINCREMENT，因此在插入查询中不要将值放入“MOBILE_CONTENT_ID”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:45:48.703

您收到此错误是因为您的表具有字段 MOBILE_CONTENT_ID 具有主键并且是自动递增的。并且您正在更改主键。您有 2 个选项 1\. 删除该字段的主键 2\. 不要在自动递增字段中插入值。

# ios - 点击栏按钮时删除子视图

> ID：15216869
> 
> 赞同：0
> 
> 时间：2013-03-05T06:02:05.247
> 
> 标签：ios

我试图在点击条形按钮时触发添加两个子视图。但是添加子视图效果很好，但是当我尝试删除子视图时，它不起作用。

这是我正在实现的代码

```
-(IBAction)showPopover:(id)sender{

    UIView *popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)]; 

    UIView *popoverViewBackground = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 1000)];
    popoverView.alpha = 0.0;
    popoverView.layer.cornerRadius = 2;
    popoverView.layer.borderWidth = 0.1f;
    popoverView.layer.backgroundColor = [UIColor whiteColor].CGColor;
    popoverView.layer.masksToBounds = YES;

    popoverViewBackground.layer.backgroundColor= [UIColor blackColor].CGColor;
    if (popoverCount == 0) {
        [self.view addSubview:popoverViewBackground];
        [self.view addSubview:popoverView];
        popoverCount = 1;
    }else if (popoverCount ==1){
        [popoverView removeFromSuperview];
        [popoverViewBackground removeFromSuperview];
        popoverCount = 0;
    }
    [popoverViewBackground setAlpha:0.5];
    [popoverView setAlpha:1.0];    
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:10:28.123

问题是您每次单击按钮时都在创建新视图，所以旧视图没有删除像这样的代码，然后它会正常工作。我已经测试过了。

在 .h 文件中

```
@interface secondViewController : UIViewController
{

    int popoverCount;

    UIView *popoverView ;

    UIView *popoverViewBackground;
} 
```

在 .m 文件中

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, -100, 320, 100)];

    popoverViewBackground = [[UIView alloc] initWithFrame:CGRectMake(0, -100, 320, 100)];
    popoverView.alpha = 0.0;
    popoverView.layer.cornerRadius = 2;
    popoverView.layer.borderWidth = 0.1f;
    popoverView.layer.backgroundColor = [UIColor whiteColor].CGColor;
    popoverView.layer.masksToBounds = YES;

    popoverViewBackground.layer.backgroundColor= [UIColor blackColor].CGColor;
}

-(IBAction)showPopover:(id)sender {

                if (popoverCount == 0) {
        [self.view addSubview:popoverViewBackground];

        [self.view addSubview:popoverView];

                [UIView animateWithDuration:0.5
                                 animations:^{
                                     popoverView.frame = CGRectMake(0,0,320,100);
                                 }
                                 completion:^(BOOL finished){
                                     ;
                                 }];
                [UIView animateWithDuration:0.5
                                 animations:^{
                                     popoverViewBackground.frame = CGRectMake(0,0,320,100);
                                 }
                                 completion:^(BOOL finished){
                                     ;
                                 }];
        popoverCount = 1;
    }else if (popoverCount ==1){

        [UIView animateWithDuration:0.5
                         animations:^{
                             popoverView.frame = CGRectMake(0,-100,320,100);
                         }
                         completion:^(BOOL finished){
                              [popoverView removeFromSuperview];
                         }];
        [UIView animateWithDuration:0.5
                         animations:^{
                             popoverViewBackground.frame = CGRectMake(0,-100,320,100);
                         }
                         completion:^(BOOL finished){
                             [popoverViewBackground removeFromSuperview];
                         }];

        popoverCount = 0;
    }
    [popoverViewBackground setAlpha:0.5];
    [popoverView setAlpha:1.0];   

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:10:53.277

```
UIView *popoverView;
UIView *popoverViewBackground; 
```

在 .h 文件中声明 popoverView 和 popoverViewBackground 并在 popoverCount 为零时分配和初始化这些子视图。

```
-(IBAction)showPopover:(id)sender{

    if (popoverCount == 0) {
    popoverView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 100)]; 

    popoverViewBackground = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 1000)];
    popoverView.alpha = 0.0;
    popoverView.layer.cornerRadius = 2;
    popoverView.layer.borderWidth = 0.1f;
    popoverView.layer.backgroundColor = [UIColor whiteColor].CGColor;
    popoverView.layer.masksToBounds = YES;

    popoverViewBackground.layer.backgroundColor= [UIColor blackColor].CGColor;
        [self.view addSubview:popoverViewBackground];
        [self.view addSubview:popoverView];
        popoverCount = 1;
    }else if (popoverCount ==1){
        [popoverView removeFromSuperview];
        [popoverViewBackground removeFromSuperview];
        popoverCount = 0;
    }
    [popoverViewBackground setAlpha:0.5];
    [popoverView setAlpha:1.0];    
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:17:46.243

您的代码中至少有 2 个问题：

1.  每次涉及该方法时，您都在创建这些子视图的新实例
2.  您正在删除新创建的实例。也就是说，之前添加的实例仍然存在。

你应该

*   将这些子视图保存在实例变量中，以便您可以引用它们并正确删除它们。
*   将创建代码移到第一个 if 块中，这样您就不会创建太多子视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T06:19:18.250

这是因为您在不同的对象上应用 addSubview 和 removeFromSuperview 。

当第一次调用 showPopover 时，它会创建两个 UIView 对象，
名称为 popoverView 和 popoverViewBackground。
并将其添加到 self.view。

到目前为止，一切都很好，但是当此方法第二次调用
popoverView 和 popoverViewBackground 的新对象时，
您正在尝试从不存在的 self.view 中删除该新创建的对象。

**如何解决这个问题：**

有两种方法可以解决这个问题：

1) 在 .h 文件中创建此对象，以便您可以从任何地方访问它。

2）以仅在第一次方法调用时创建的方式创建对象。给出这个 UIView 标签，当你删除 UIView.subview 时找到这个标签

方法 1 很简单，方法 2 需要一些代码，但您可以在内存方面提高效率。

祝一切顺利

# javascript - jquery验证和表单提交

> ID：15216873
> 
> 赞同：1
> 
> 时间：2013-03-05T06:02:23.213
> 
> 标签：javascript, jquery, jquery-ui, validation

我正在尝试验证表单，然后使用 jquery 提交。但是提交没有被调用。我不知道出了什么问题。

```
$('#save_vehicle').click(function(e){
            validate_form(e);
});
// VALIDATION FUNCTION
    function validate_form(e) {
        if($("#manufacturer").val()=="select"){
            e.preventDefault();
            alert('Please Select Manufacturer');
            return false;
        } else if($("#models").val()=="select") {
            e.preventDefault();
            alert('Please Select Model');
            return false;
        }  else {           
            return true;
            $('#frm_add').submit();
        }
    } 
```

****注意：**** `save_vehicle`是提交按钮 ID。`frm_add`是表单的id。

有人可以指出我的错误。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:05:44.520

```
 else {     
         $('#frm_add').submit();
        } 
```

无需返回 true。

@Roger如果您在任何地方使用return语句..执行不应该转到下一行..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:05:53.253

尝试改变：

```
else {           
   return true;
   $('#frm_add').submit(); //will never be called as you returned already above
} 
```

到

```
else {           
   $('#frm_add').submit();
} 
```

# cocoa - 我应该使用哪种方法定期调用方法？

> ID：15216874
> 
> 赞同：1
> 
> 时间：2013-03-05T06:02:24.557
> 
> 标签：cocoa, nstimer

我可以使用 NSTimer 或定期唤醒线程来定期调用函数。这两种方法的行为基本相同：

```
 timer = [ NSTimer
                 scheduledTimerWithTimeInterval:1
                 target:self
                 selector:@selector(doSomething)
                 userInfo:nil
                 repeats:NO
                 ]; 
```

和

```
 @autoreleasepool {
        BOOL continueProcessingQueue = YES;
        while (continueProcessingQueue) {
            [self performSelectorOnMainThread:@selector(doSomething) withObject:nil waitUntilDone:NO];
            NSDate *curtainTime = [[NSDate alloc] initWithTimeIntervalSinceNow:10];
            NSDate *currentTime = [[NSDate alloc] init];

            while (continueProcessingQueue && ([currentTime compare:curtainTime] != NSOrderedDescending)) {
                if ([self.processThread isCancelled] == YES) {
                    continueProcessingQueue = NO;
                }
                [NSThread sleepForTimeInterval:1];
                currentTime = [[NSDate alloc] init];
            }
        }
    } 
```

使用计时器似乎要简单得多。是否存在第二种方法比使用计时器更可取的情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:29:08.993

a) 当您不跟踪辅助线程的活动状态时。一旦线程退出，您的计时器就会随之运行，这意味着您的计时器可能无法传递您期望的所有消息。

b）当您的工作线程实际上没有轮询运行循环（长任务）时，和/或当您的辅助线程的工作很少将控制权返回给运行循环并且您需要更高的里程碑/进度的准确性时发布到其他线程。如果您的辅助线程大部分时间都处于空闲/等待状态，那么这不是什么大问题。

事实上，在大多数情况下，您真的不应该使用上述任何一种方法。

# android - 在android中弹出一个带有ussd代码的对话框

> ID：15216876
> 
> 赞同：0
> 
> 时间：2013-03-05T06:02:43.073
> 
> 标签：android, ussd

我正在尝试使用`USSD`代码向我的 android 应用程序添加一些功能。假设用户`*#12345#`在我的应用程序的主屏幕上键入。然后我需要在我的应用程序中显示一个对话框或将用户发送到另一个屏幕。

我怎样才能完成这项任务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:45:45.273

试试下面的代码。

**ussd_layout.xml**

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/relative"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <TextView
        android:id="@+id/textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        android:text="@string/hello_world" />

</RelativeLayout> 
```

你`MainActivity.java`将有以下代码

```
package com.example.ussdcodetest;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.util.Log;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.view.inputmethod.InputMethodManager;
import android.widget.RelativeLayout;
import android.widget.TextView;
import android.widget.Toast;

public class USSDTestActivity extends Activity {

TextView txt;
RelativeLayout rel;
String s = "";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_ussdtest);

    txt = (TextView) findViewById(R.id.textView);
    rel = (RelativeLayout) findViewById(R.id.relative);

    txt.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            Log.d("USSD", "CLICKED");
            ((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE))
                    .toggleSoftInput(InputMethodManager.SHOW_FORCED,
                            InputMethodManager.HIDE_IMPLICIT_ONLY);
        }
    });
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_ussdtest, menu);
    return true;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {

    Log.d("USSD", "Key Down  :" + keyCode + " String : " + s);
    s += (char) event.getUnicodeChar();

    if (s.equals("action")) {
        Toast.makeText(USSDTestActivity.this, "Action will be performed",
                Toast.LENGTH_LONG).show();
        ((InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE))
                .hideSoftInputFromWindow(rel.getWindowToken(), 0);
    }
    return super.onKeyDown(keyCode, event);
}
} 
```

我的代码将做的是，它将从键盘获取输入，该输入将显示在`TextView`点击事件上，当输入与**操作**词匹配时，它将`Toast`在屏幕上隐藏键盘和消息。您可以在 if 条件中编写自己的代码。

**注意：**必须有一些动作来显示或隐藏活动键盘，这就是我使用`onClickEvent`. `TextView`您可以根据需要使用。最好的主意是使用`Gesture`.

# oracle - 是否可以对所有版本的 oracle db 使用相同的 oracle 连接器 jar？

> ID：15216878
> 
> 赞同：0
> 
> 时间：2013-03-05T06:02:45.900
> 
> 标签：oracle, connector

我正在为 oracle db 开发一个通用 java 应用程序。我的应用程序应该与所有版本的 oracle db 连接。在 oracle 站点中，他们提到了针对不同 oracle DB 版本的不同连接器 jar 文件。

oracle 有没有通用的连接器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:39:53.187

有兼容性矩阵。还有推荐的 Java 版本，需要与 JDBC 驱动程序一起使用。我假设您使用 JDBC 瘦驱动程序。
如果你现在使用 11.2 的 JDBC 驱动程序，那么从 9.0.1 开始的任何 Oracle 版本都应该没问题。
因此，作为起点，为您使用的 JDK 和 Oracle 服务器选择最合适的驱动程序，并在新的 Oracle 服务器出现时密切关注文档。最新版本的驱动程序可以“购买”您更多的时间，因为它比一些旧的 JDBC 驱动程序受支持的时间更长。
有关 11.2 版本的更多信息，请访问[http://docs.oracle.com/cd/E11882_01/java.112/e16548/getsta.htm#i1008205](http://docs.oracle.com/cd/E11882_01/java.112/e16548/getsta.htm#i1008205)

# python - 在 python networkx 中优化内存利用率

> ID：15216879
> 
> 赞同：1
> 
> 时间：2013-03-05T06:02:46.877
> 
> 标签：python, optimization, graph, networkx, graphml

我正在通过制作标签网络来分析博客网络（博客之间的边缘共享公共标签，权重=共享标签的数量/标签的总数。图中大约有 10000 个节点。我需要转换将原始数据转换为 GraphML 格式，为此，我正在使用 python networkx。但它内存不足。我是 python 新手，所以谁能告诉我我在这里做错了什么。（或者是硬件问题?我的系统是i3，3GB内存）

```
#!/usr/bin/env python
import sys
import networkx as nx
G=nx.Graph()
tags=[]
for line in open(sys.argv[1]):#Each blog has all its tags in a single line
    tags.append(set(line.split(',')))#tags are separated by comma.
for i in xrange(len(tags)):
    G.add_node(i+1)
for i in xrange(len(tags)):
    for j in xrange(i+1,len(tags)):
        p=len(tags[i].intersection(tags[j]))
        q=len(tags[i].union(tags[j]))
        if p!=0 and q!=0:
            G.add_edge(i+1,j+1,weight=float(p)/q)
nx.write_graphml(G,sys.argv[1]+'.graphml') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T20:14:52.980

我能看到的唯一改进是我可以为每个标签使用一个二进制标志位，而不是为标签制作一个 2D 列表。所以它的内存要求较低（因为标签可能很长，不同标签的数量只有~150，所以有很多重复）。这变化不大。问题出在评论中提到的 Aric 之类的 write_graphml 函数上。我终于也能在 16 GB 的机器上运行它了，它需要大约 9.5 GB。
PS：如果有人知道更好的技术，请告诉我。

# html - 添加文本时停止 div 向下移动

> ID：15216880
> 
> 赞同：8
> 
> 时间：2013-03-05T06:02:59.633
> 
> 标签：html, css

我正在尝试在方形 div 中放置一些文本。唯一的问题是它将文本所在的 div 向下移动了很多。有谁知道我怎样才能让 div 回到原来的位置？

这是html：

```
<div id="squarecontainer">
    <div id="square1">
        <p>Easy to Manage</p>
    </div>
    <div id="square2">

    </div>
    <div id="square3">

    </div>
</div> 
```

这是CSS：

```
#squarecontainer{
    text-align: center;
}

#square1{
    display: inline-block;
    position: relative;
    margin-right: 100px;
    height: 310px;
    width: 310px;
    margin-top: 72px;
    background-color: #fff;
}

#square2{
    display: inline-block;
    position: relative;
    height: 310px;
    width: 310px;
    margin-top: 72px;
    background-color: #fff;
}

#square3{
    display: inline-block;
    position: relative;
    margin-left: 100px;
    height: 310px;
    width: 310px;
    margin-top: 72px;
    background-color: #fff;
} 
```

`#square1`当我添加“易于管理”文本时，这个 div 会向下移动很多。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-05T06:12:29.447

我找到了解决方案。通过添加`vertical-align: top;`它，将 div 移回。不知道为什么它有效，但它确实有效。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-05T06:56:23.673

将补充[zachstarnes 的答案](https://stackoverflow.com/a/15217010/2129835)。

问题是[`vertical-align`默认设置为`baseline`](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp).

> 将元素的基线与父元素的基线对齐。这是默认的

由于其他 div 为空，因此它们的基线默认位于 div 的底部。请注意，当您填写文本时，它们都将开始向下移动，直到它们都包含内容。

根据您希望 div 彼此对齐的方式，将`vertical-align`属性更改为 other `baseline`。

* * *

![垂直对齐：基线](../Images/413fc9771f6772f235e4b021704ff34a.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-05T06:16:52.497

为您的`p`标签提供位置。问题将得到解决。

```
#square1 p {
      position:absolute;
      width: 100%;
      text-align: center;
} 
```

**[工作小提琴](http://jsfiddle.net/RgywE/2/)**

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-09-16T14:11:05.687

使用它可以解决问题：

```
#square1 {
    overflow: auto;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-23T08:50:58.223

**发生这种情况的原因**，它发生在`inline-block`元素上：

在行内级别（行内块）中，您必须指定文本的垂直对齐方式。所以本质上，在不设置垂直对齐位置的情况下，内容被放置在其默认位置，即基线。这就是为什么您的文本偏移了您的布局。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-03-05T06:09:55.333

使用`word-wrap`属性

```
div[id^="square"]{
  word-wrap: break-word;
} 
```

您可以使用属性指定其中一个`normal`或`break-word`值`word-wrap`。`Normal`表示文本将扩展框的边界。`Break-word`表示文本将换行到下一行。

# windows - PID 存在于 netstat 中但不存在于任务管理器中

> ID：15216881
> 
> 赞同：57
> 
> 时间：2013-03-05T06:03:02.387
> 
> 标签：windows, service, network-programming

当我尝试运行绑定到该端口的程序（作为服务）时，我发现了一个 PID 为 26376 的正在运行的进程正在侦听端口 9001 和 9002，但它失败了。

但是当我尝试使用 taskkill /PID 杀死它时，它说找不到进程 26376。同样，当我尝试在选择了“显示所有用户的进程”的任务管理器中找到该进程时，我在任何地方都找不到它。

谁能解释一下？它是一个已失效的僵尸进程吗？我怀疑在该端口上侦听的进程是我的程序运行的先前实例，但可能是什么导致了这种情况？

编辑：Sysinternals TCPView 显示该进程不存在。Sysinternals Process Explorer 不显示该进程。任务列表不显示进程。

![](../Images/71221a58f19ed28aef83cc6867864832.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-08-05T18:07:24.963

您不需要任务管理器来跟踪它。只需运行`netstat -b`它将显示与 PID 关联的 exe ..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-05-11T14:41:39.873

好吧，在我的情况下，杀死与初始进程相同的用户拥有的所有 conhost.exe 实例释放了端口。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-29T16:49:05.910

另一种选择是反弹与连接关联的 NIC。如果您通过 RDP 执行此操作，请小心，您需要编写脚本，以便 NIC 重新联机，否则您将自己锁定并需要控制台访问。

此链接解释了如何使用 CMD 和 powershell 进行操作：

[https://www.windowscentral.com/how-enable-or-disable-wi-fi-and-ethernet-network-adapters-windows-10](https://www.windowscentral.com/how-enable-or-disable-wi-fi-and-ethernet-network-adapters-windows-10)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-10T09:59:12.413

（从@mfck 的回答改进）

1.  杀死所有名为`cmd.exe`
2.  杀死所有名为`conhost.exe`

# facebook - Facebook 分享链接未显示图片

> ID：15216883
> 
> 赞同：7
> 
> 时间：2013-03-05T06:03:07.053
> 
> 标签：facebook, facebook-sharer

请帮帮我，我正在使用带有我的网站徽标的 Facebook 共享链接，但它没有显示图像，即使我按照 Facebook 的要求有适当的图像尺寸，你能帮帮我吗？

```
 http://www.facebook.com/sharer/sharer.php?s=+100&p[title]=SundtBMI&p[url]=http%3A%2F%2Fwww.redsignal.biz%2Fclients%2Fdemo%2Fsundtbmi%2F&p[images][0]=http%3A%2F%2Fwww.redsignal.biz%2Fclients%2Fdemo%2Fsundtbmi%2Fskins%2Fdefault%2Fimages%2FSB_logo.png&p[images][1]=http%3A%2F%2Fwww.redsignal.biz%2Fclients%2Fdemo%2Fsundtbmi%2Fskins%2Fdefault%2Fimages%2FSB_logo.png&p[summary]=When+I+stand+before+God+at+the+end+of+my+life%2C+I+would+hope+that+I+would+not+have+a+single+bit+of+talent+left%2C+and+could+say%2C+%27I+used+everything+you+gave+me%27.Throughout+life+people+will+make+you+mad%2C+disrespect+you+and+treat+you+bad.+Let+God+deal+with+the+things+they+do%2C+cause+hate+in+your+heart+will+consume+you+too.How+far+you+go+in+life+depends+on+your+being+tender+with+the+young%2C+compassionate+with+the+aged%2C+sympathetic+with+the+striving+and+tolerant+of+the+weak+and+strong.+Because+someday+in+your+life+you+will+have+been+all+of+these.When+I+stand+before+God+at+the+end+of+my+life%2C+I+would+hope+that+I+would+not+have+a+single+bit+of+talent+left%2C+and+could+say%2C+%27I+used+everything+you+gave+me%27.Throughout+life+people+will+make+you+mad%2C+disrespect+you+and+treat+you+bad.+Let+God+deal+with+the+things+they+do%2C+cause+hate+in+your+heart+will+consume+you+too.How+far+you+go+in+life+depends+on+your+being+tender+with+the+young%2C+compassionate+with+the+aged%2C+sympathetic+with+the+striving+and+tolerant+of+the+weak+and+strong.+Because+someday+in+your+life+you+will+have+been+all+of+these.When+I+stand+before+God+at+the+end+of+my+life%2C+I+would+hope+that+I+would+not+have+a+single+bit+of+talent+left%2C+and+could+say%2C+%27I+used+everything+you+gave+me%27.Throughout+life+people+will+make+you+mad%2C+disrespect+you+and+treat+you+bad.+Let+God+deal+with+the+things+they+do%2C+cause+hate+in+your+heart+will+consume+you+too.How+far+you+go+in+life+depends+on+your+being+tender+with+the+young%2C+compassionate+with+the+aged%2C+sympathetic+with+the+striving+and+tolerant+of+the+weak+and+strong.+Because+someday+in+your+life+you+will+have+been+all+of+these. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-07T18:32:33.640

我认为这种分享方式正在被淘汰。此处记录了新方法：http: [//developers.facebook.com/docs/reference/dialogs/feed/](http://developers.facebook.com/docs/reference/dialogs/feed/)

因此，要进行直接 url 共享，您需要使用如下链接：

```
https://www.facebook.com/dialog/feed?
  app_id=458358780877780&
  link=https://developers.facebook.com/docs/reference/dialogs/&
  picture=http://fbrell.com/f8.jpg&
  name=Facebook%20Dialogs&
  caption=Reference%20Documentation&
  description=Using%20Dialogs%20to%20interact%20with%20users.&
  redirect_uri=https://mighty-lowlands-6381.herokuapp.com/ 
```

请注意，您需要创建一个应用程序来获取 app_id。

# precision - Mac OS 和 Windows 之间的 exp() 精度

> ID：15216884
> 
> 赞同：1
> 
> 时间：2013-03-05T06:03:08.613
> 
> 标签：precision, exp

我在这里得到了一个代码，当我在 Win 和 Mac OS 上运行它们时，结果的精度是不同的，有人可以帮忙吗？

```
const double c = 1 - exp(-2.0);
double x = (139 + 0.5) / 2282.0;
x = ( 1 - exp(-2 * (1 - x))) / c; 
```

结果都是 0.979645005277687，但十六进制不同：

```
Win: 3FEF59407B6B6FF1
Mac: 3FEF59407B6B6FF2 
```

我怎样才能得到相同的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T06:05:38.657

> 我怎样才能得到相同的结果。

除非 OS X 上的数学库使用完全相同的实现/算法进行计算`e ^ x`，否则您不会也不能真正得到完全相同的结果。浮点计算不准确，处理它。

# redis - redis 如何要求 O(1) 时间进行键查找？

> ID：15216897
> 
> 赞同：44
> 
> 时间：2013-03-05T06:03:48.180
> 
> 标签：redis, time-complexity

我有一个问题 - 在索引中查找键值对 - 比如说在 cassandra 或 postgres 上 - 通常在 O(logn) 左右

来源：[https](https://github.com/tinkerpop/blueprints/wiki/Graph-Indices) ://github.com/tinkerpop/blueprints/wiki/Graph-Indices 。

在 redis 文档中，它指出运行时复杂度为 O(1)。

来源：[http ://redis.io/commands/get](http://redis.io/commands/get) [http://redis.io/commands/hget](http://redis.io/commands/hget)

并且获取多个键的值只是线性 O(m)，其中 m 是检索到的键的数量 [http://redis.io/commands/hmget](http://redis.io/commands/hmget)

这怎么可能？

* * *

## 回答 #1

> 赞同：77
> 
> 时间：2013-03-05T08:02:08.207

Redis 是一个内存存储。因此，它可以使用适用于内存存储的数据结构（允许快速随机访问）。

为了实现字典（用于主字典，也用于散列和集合对象，并与 zset 对象的跳过列表结合使用），Redis 使用[单独的链式散列表](http://en.wikipedia.org/wiki/Hash_table)，其访问复杂度为 O(1+n/k) 其中n 是项目数，k 是桶数。

Redis 确保桶的数量随着项目的数量而增长，因此在实践中 n/k 保持在较低水平。这种重新散列活动在后台逐步完成。当项目数量很大时，复杂性接近 O(1)（摊销）。

其他存储（例如 Cassandra）旨在将数据存储在磁盘上，同时出于性能原因最小化随机 I/O 的数量。哈希表不是一个好的数据结构，因为它不强制数据的局部性（它不能很好地从缓冲区缓存中受益）。因此，基于磁盘的存储通常使用 B 树变体（大多数 RDBMS）或日志结构合并（LSM）树变体（Cassandra），它们具有 O(log n) 复杂度。

所以是的，Redis 为许多操作提供了 O(1)，但有一个限制：所有数据都应该适合内存。这里没有魔法。

# java - 调试器不执行更改/最新的插件

> ID：15216903
> 
> 赞同：1
> 
> 时间：2013-03-05T06:04:25.520
> 
> 标签：java, eclipse, debugging

我试图调试一个插件，调试配置不执行修改后的插件。但是插件视图显示插件的最新版本已加载。它有些如何是坏的/旧的罐子。为了确认相同，我更改了 sysout 语句。但是在控制台中看不到任何更改的 sysout 语句。我看到新的插件版本已加载但未在运行时执行。我尝试了多种选择。

1.  将插件版本从 1.0.0.23 更改为 1.1
2.  使用 -clean 启动 Eclipse
3.  删除 .metadata 和 runtime-application 文件夹并重新导入插件项目。

然而，经过多次尝试和错误，我发现如果我更改工作区文件夹名称，那么它会接受更改。

这意味着工作区路径正在被缓存。

有人有解决方案吗？

# arrays - 在Matlab中以行方式复制或重塑维度

> ID：15216904
> 
> 赞同：0
> 
> 时间：2013-03-05T06:04:25.890
> 
> 标签：arrays, matlab, matrix

我有一个 5 x 2611 + 1 悬空的矩阵，我想从同一个矩阵`96x136`矩阵中得到我想复制每一行直到它完成 136 等等。但是，我不知道从哪里开始，也不知道哪个函数最适合这个技巧。例如：

```
 [2 3 5 6 7;
 8 9.555 10.888 20.888 3.5;
 .........................;
  ......................   5] 
```

所以矩阵看起来像 5*2611 + 1 我知道 mat 不会在一行和一列中接受它，因为上面的维度最后是 2611*5 我有最后一个元素

以行方式将其更改为 `2 3 5 6 7 8 9.555 10.888 20.888 3.5 ........ 5` 直到 136 列的末尾并以相同的顺序开始新行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T11:50:27.177

如果你有一个`5*2611`元素矩阵，你可以：

1.  将其重塑为具有一行的向量，例如`vec1 = reshape(mat1',1,5*2611)`
2.  附加价值，例如`vec1 = [vec1 dangler]`
3.  再次整形为矩阵`mat2 = reshape(vec1,96,136)`

而且，如果我的转置正确，你就有了你正在寻找的矩阵。如果我没有得到正确的转置，@Shai 会过来纠正我。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:15:29.903

您需要使用转置和`reshape`：

```
A = [ 2 3 5 6 7 8;...
      9 10 11 12 13];
B = reshape( A.', [3 4] ).'; 
```

`B`**大小为 [4 3** ]，元素根据`A`.

# nhibernate - nhibernate 映射枚举对（键 - 值）

> ID：15216907
> 
> 赞同：0
> 
> 时间：2013-03-05T06:04:58.233
> 
> 标签：nhibernate, nhibernate-mapping

在我们的系统中，我们使用 nhibernate 将对象映射到数据库中。在我们的一个对象中，我们有字段，它表示为枚举（带有键和值的枚举，fe

```
public enum Status
    {
        Draft = 0,
        Archived = 1,
        Imported = 2
    } 
```

)

因此，在我们的应用程序中，我们遇到了按枚举表示的字段对对象进行排序的问题：排序不是按枚举的键，而是按值。为了解决这个问题，我们在数据库中为枚举的字符串键创建了附加字段，并在 nhibenate 模型文件中进行了更改：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <typedef name="StatusName" class="NHibernate.Type.EnumStringType`1[[Code.Model.Status, Code.Model]], NHibernate" />
...
<property name="Status"  type="StatusName" column="StatusName" not-null="true" />
... 
```

之后更改排序开始在应用程序中正常工作（记录按枚举键排序），但在数据库中创建新对象后，仅保存枚举键（StatusName 字段）和枚举值（Status 字段）的值，它不保存。

有没有办法通过使用 nhibernate 配置将枚举的键和值映射到数据库列（Status 和 StatusName 列）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T13:35:45.147

我不确定我是否正确理解了您的问题。它认为您希望将枚举值的名称及其数值存储到数据库中的两个不同列中。

在你这样做之前，请确保你真的想要那个。这是一种冗余。冗余总是很难保持一致，并且在解决时通常会导致更多问题。

要实现它，您需要编写一个复合[自定义类型](http://nhforge.org/doc/nh/en/index.html#mapping-types-custom)，它能够将一个属性的值存储到多个列中。

网上有几个例子，例如。[这里](http://www.milkcarton.com/blog/2006/12/31/CompositeUserTypes+In+NHibernate.aspx)或[这里](https://stackoverflow.com/questions/1189418/using-nhibernate-icompositeusertype-with-a-value-type)。

# javascript - .click() 不适用于稍后加载的跨度类

> ID：15216908
> 
> 赞同：2
> 
> 时间：2013-03-05T06:05:01.140
> 
> 标签：javascript, jquery

在我的主页中，我有一个“音乐”按钮，它加载了 music.txt

**脚本.js**

```
$("#music").load("music.txt");
$('.song').click(function () {  ... }); 
```

**音乐.txt**：

```
 <span class="song"> bl </span> 
```

`$('.song').click`不起作用`music.txt`（它适用于主页）。我也试过`live()`了`delegate()`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-05T06:05:48.660

使用`.on()`jQuery 方法。

```
$('.song').on('click',function () { /*...*/ }); 
```

**或者**

```
$(document).on('click','.song',function(){ /*...*/ }); 
```

因为`.live()`已从较新版本中弃用。

在第一个示例中，该`.on()`方法的行为类似于`bind`并且仅适用于**已存在**的元素。

第二个示例的行为类似于`.live()`或`delegate()`在许多方面。并且适用于**稍后添加的元素。**

# ios - 在 iOS 照片中调整对比度

> ID：15216909
> 
> 赞同：0
> 
> 时间：2013-03-05T06:05:01.437
> 
> 标签：ios, ios6, photo

我们的 iOS 6 应用程序（通常由商业用户在第 4 代 iPod Touch 上运行，尽管有时也可以在其他 iOS 设备上运行）具有通过`UIImagePickerController`.

有时，在某些光照条件下使用该应用程序拍摄的照片对比度太高，照片明亮部分的细节会被冲掉。图片很少对比度太低而无法阅读。所以我们想“调低”应用程序中拍摄的所有照片的对比度。

显然，我们可以在事后应用图像过滤来调整对比度，但如果图像太褪色以至于细节不足，那么稍后进行调整将无济于事。

有没有办法在 iOS 6 中拍摄照片时以编程方式控制亮度和对比度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T07:26:59.220

您可以添加`showsCameraControls`方法来显示相机控件，其中包括调整以控制亮度/对比度等。让用户决定他需要什么。

来自苹果的[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)

showsCameraControls 指示图像选择器是否显示默认的相机控件。

@property (nonatomic) BOOL showsCameraControls 讨论 此属性的默认值为 YES，它指定默认相机控件在选取器中可见。如果您想使用 cameraOverlayView 属性提供自定义覆盖视图，请将其设置为 NO 以隐藏默认控件。

注意：在 iOS 3.1.3 和更早版本中，隐藏默认相机控件会限制您仅拍摄静态照片，无论设备上是否可以拍摄电影。如果将此属性设置为 NO 并提供自己的自定义控件，则可以在关闭图像选择器界面之前拍摄多张照片。但是，如果您将此属性设置为 YES，则您的委托必须在用户拍摄一张照片或取消操作后关闭图像选择器界面。

仅当图像选择器的源类型设置为 UIImagePickerControllerSourceTypeCamera 时，您才能访问此属性。尝试访问其他源类型的此属性会导致抛出 NSInvalidArgumentException 异常。根据您分配给 mediaTypes 属性的值，默认控件会显示静态相机或电影相机界面，或允许用户选择选取器界面的选择控件。

# php - 从目录中删除图像及其从目录中的链接

> ID：15216912
> 
> 赞同：0
> 
> 时间：2013-03-05T06:05:16.320
> 
> 标签：php, database

我将图像存储在目录中，并将它们的路径存储在表中。我希望当用户删除图像时，它首先从目录中删除，然后从表中删除其链接。我为此使用了**取消链接**功能。查询选择记录

```
$file_link_query="SELECT picture FROM pics_catalogue WHERE catalogue_id=".$_GET['catalogue_id']; 
```

以及从目录中删除图像的代码

```
mysql_select_db($database_connection, $connection);
  $file_link_result=mysql_query($file_link_query,$connection) or die(mysql_error());
  while($row=mysql_fetch_assoc($file_link_result))
  {echo $row['picture'];
      unlink("user_data/".$vendor_id."/".$row['picture']);} 
```

然后我从表中删除数据

```
$pics_delete_query="DELETE FROM pics_catalogue WHERE catalogue_id=".$_GET['catalogue_id'];
$pics_delete_result=mysql_query($pics_delete_query,$connection) or die(mysql_error()); 
```

**问题是它从数据库中删除条目但不删除文件。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:37:47.753

路径可能错误，或者您可能没有该目录的权限。检查并确认。如果您有权限，则路径可能不正确，请检查您指定的路径。它是相对于您当前工作目录的路径，否则您也可以使用`$_SERVER['DOCUMENT_ROOT']`然后附加路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T07:39:10.323

检查完整路径

取消链接（$路径）；

# ember.js - Ember 1.0.0-RC.1 中 toJSON 方法的替代方法

> ID：15216916
> 
> 赞同：0
> 
> 时间：2013-03-05T06:05:40.757
> 
> 标签：ember.js, ember-data

在最新的 emberjs 版本中，在 Ember 对象和 DS 中不再支持 toJSON 方法。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:19:24.697

当然，这就是实现序列化程序的目的。

```
var serializer = DS.RESTSerializer.create();
var post = App.Post.find(1);
var json = serializer.serialize(post); 
```

哲学是序列化方法应该独立于模型，因为它取决于适配器的选择。你只需要实例化你想要的，然后你可以根据需要应用它。

# asp.net - 未加入域时 asp.net 请求超时

> ID：15216917
> 
> 赞同：0
> 
> 时间：2013-03-05T06:05:44.023
> 
> 标签：asp.net, iis, windows-server

我将我的项目上传到 Windows Server 2008。

该项目生成一些报告需要超过 2 分钟。（有时需要 4 到 5 分钟）

问题是当用户没有加入域时，会出现错误请求超时。

错误的原因是生成报告所花费的时间。这是错误的屏幕截图：

[IMG]http://i47.tinypic.com/34i5vd0.png[/IMG]

这里的代码

```
Protected Sub btnOSA_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles btnOSA.Click
        Dim apps As New MyApps
        Dim connsql As New SqlCommand
        apps.OpenConnection()

        connsql.Connection = apps.oConn
        connsql.CommandTimeout = 3600
        connsql.CommandText = "GetWeeklyPICDetail @pmon, @pyear"
        connsql.Parameters.AddWithValue("@pmon", SqlDbType.Int)
        connsql.Parameters.AddWithValue("@pyear", SqlDbType.Int)
        connsql.Parameters("@pmon").Value = cmbMonthParam.Value
        connsql.Parameters("@pyear").Value = cmbYearParam.Value

        connsql.ExecuteNonQuery()

        apps.CloseConnection()

        btnExportSPC.Visible = True

    End Sub 
```

这是我的 web.config 行

```
<appSettings>
    <add key="connStr" value="Data Source=xxx;initial catalog=xxx;user ID=sa;Password=password;Connection Timeout=3600;   "/>
  </appSettings>
  <connectionStrings>
    <add name="connStr" connectionString="Data Source=xxx;Initial Catalog=xxx;User ID=sa;Password=password;Timeout=3600" providerName="System.Data.SqlClient" />
  </connectionStrings> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:17:29.707

您应该增加超时配置。

在您的网络配置中定义以下部分

`<httpRuntime executionTimeout="800" />`

以秒为单位定义的参数。

如果在页面加载上的 Asp.Net 对您没有帮助，请添加此行

// 将会话超时增加到 8 分钟 Session.Timout = 8;

# c++ - 没有调用虚拟覆盖函数

> ID：15216921
> 
> 赞同：0
> 
> 时间：2013-03-05T06:05:48.580
> 
> 标签：c++, virtual

我正在使用以下代码片段尝试多态性：

```
#include <iostream>
#include <vector>

using namespace std;

struct Foo {
    virtual void f() {
        cout << "f from Foo" << endl;
    }
};

struct Bar : public Foo {
    void f() {
        cout << "f from Bar" << endl;
    }
};

int main() {
    Foo foo;
    Bar bar;
    vector<Foo> fooV;
    fooV.push_back(foo);
    fooV.push_back(bar);
    for(auto it = fooV.begin(); it != fooV.end(); ++it)
        it->f();
} 
```

我预计由于`f()`被覆盖，其中一个会打印“f from Foo”，另一个会打印“f from Bar”。但是，程序的输出是

```
f from Foo
f from Foo 
```

我还应该注意，我还尝试将关键字添加`override`到 in 的声明`f()`中`Bar`，因为我使用的是 C++11。它没有任何效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-05T06:09:35.173

尝试这个

```
int main()
{
    Foo foo;
    Bar bar;
    vector<Foo*> fooV;
    fooV.push_back(&foo);
    fooV.push_back(&bar);
    for (auto it = fooV.begin(); it != fooV.end(); ++it)
        (*it)->f();
} 
```

要获得多态优势，您应该使用指向派生对象的指针或引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:07:27.810

这个

```
fooV.push_back(bar); 
```

只复制`Foo`一部分`bar`- 一个`struct Foo`对象最终在里面`vector`。由于新对象是类型的，因此稍后会调用`struct Foo`它也就不足为奇了。`Foo::f()`

您只能存储一种不同类型的对象，`vector`因此对于您的情况，您必须存储指向对象的指针而不是对象本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:08:06.410

你有一个向量`Foo`。`Bar`向该向量添加 a只是将其中的`Foo`一部分复制`Bar`到向量中（忽略其他数据）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T12:30:34.447

```
vector<Foo> fooV; 
```

当您创建 Foo 的向量时，Foo 的函数只会被称为而不是 Bar

# javascript - 如何动态存储有关 HTML 元素的信息？

> ID：15216925
> 
> 赞同：1
> 
> 时间：2013-03-05T06:06:02.450
> 
> 标签：javascript, html, typescript

我应该使用数据结构，如数据对象字典，以元素 ID 为键，还是简单地将带有所需数据的“数据-”属性附加到元素？每个元素需要存储的属性数量只有一两个。

是否已经有一个用于 JavaScript 的 Dictionary 对象（或者可能是 TypeScript），或者甚至更好的内存数据库类型结构，我可以使用它来一起管理多个数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T14:47:28.467

如果您只需要存储几个值，我会使用`data-`属性 - 或 jQuery[`data`](http://api.jquery.com/jQuery.data/)访问器。

JavaScript 中的任何对象都是字典，您可以轻松地在 TypeScript 中“键入”它们：

```
interface DictionaryOfStrings {
  [key: string]: string;
}

var a: DictionaryOfStrings;

a["first"] = "first value";
a["second"] = "second value";

for (var key in a) {
  console.log("Value of '" + key + "' is '" + a[key] + "'");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:09:41.467

有什么理由不能为此使用像 Knockoutjs 这样的简单数据绑定框架？这就是我在这种情况下要做的。

（这是我的回答，不是评论，尽管被表述为问题，版主）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T08:22:08.787

如果你确实需要 JS 中的字典结构，[Linq.js](http://linqjs.codeplex.com/)有一个你可以使用或适应的。TS 定义文件可在[Definitely Typed](https://github.com/borisyankov/DefinitelyTyped/tree/master/linq)获得：

```
interface Dictionary {
    Add(key, value): void;
    Get(key): any;
    Set(key, value): bool;
    Contains(key): bool;
    Clear(): void;
    Remove(key): void;
    Count(): number;
    ToEnumerable(): Enumerable;
} 
```

您是否需要这样的东西，或者可以依赖`data-`参数，将归结为您的应用程序的详细需求和个人选择。

# android - 从android中的另一个项目访问活动

> ID：15216928
> 
> 赞同：3
> 
> 时间：2013-03-05T06:06:05.907
> 
> 标签：android, android-activity, android-manifest

从我的 android 应用程序中，我想访问属于另一个项目的一个活动。为此，我将该项目与我的应用程序相关联，并在清单中声明了该活动。但仍然无法正常工作。Logcat 显示，

```
FATAL EXCEPTION: main
java.lang.NoClassDefFoundError: com.example.apptwo 
```

清单声明：

```
<activity android:name="com.example.apptwo.Activity2"></activity> 
```

开始活动

```
Intent i = new Intent(Activity1.this, com.example.apptwo.Activity2.class);
startActivity(i); 
```

谁能帮我.....？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:23:49.743

使用您的 java 文件中的代码，您必须在其中访问来自其他项目的活动。

```
 import com.example.apptwo.Activity2; 
```

然后通过导入，您可以访问该活动中的方法和变量。使用意图从第一个活动移动到第二个活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:13:21.670

如果您已将该项目添加为库项目，则无需在`Manifest`. 您只需通过在 Java 类中导入它来访问它。

```
import com.example.apptwo.Activity2; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:13:51.533

您不需要在项目中添加任何`Manifest`不存在的类。

访问`Activity`来自任何其他项目的哪个。当您使用它时，您只需要传递整个类名，包括它的包名`Intents`。

补充： - 它工作，但库中的活动应该必须在清单文件中声明。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T06:58:10.450

使用意图并使用字符串设置组件名称：

```
final Intent intent = new Intent();
intent.setClassName("com.example.apptwo", "com.example.apptwo.Activity2");
startActivity(intent); 
```

如果安装了“com.example.apptwo”并在其清单中导出了 Activity2，它将起作用。

# c# - TraceSource for ASP.NET Web 应用程序的本地化

> ID：15216930
> 
> 赞同：0
> 
> 时间：2013-03-05T06:06:12.277
> 
> 标签：c#, asp.net, web-applications, localization, trace

如果我`TraceSource`这样定义：

```
private static TraceSource traceSource = new TraceSource("MyTrace"); 
```

然后从代码中发布消息：

```
traceSource.TraceEvent(TraceEventType.Information, 1, "My message"); 
```

当我`web.config`有以下情况时：

```
<system.diagnostics>
    <trace autoflush="true"/>
    <sources >
      <source name="MyTrace" switchName="Myswitch" >
        <listeners>
          <add name="textWriterListener" traceOutputOptions="DateTime"
              type="System.Diagnostics.TextWriterTraceListener"
              initializeData="Log\My_diagnostic.log">
          </add>
          <remove name="Default" />
        </listeners>
      </source>
    </sources>
    <switches>
      <add name="Myswitch" value="Verbose" />
    </switches>
</system.diagnostics> 
```

我在`My_diagnostic.log`跟踪文件中得到的是：

```
MyTrace Information: 1 : My message
    DateTime=2013-03-05T04:45:54.9240441Z 
```

运行此脚本的 IIS 服务器默认配置了英美代码页。

我的问题是，`My_diagnostic.log`如果代码页设置为英语以外的任何语言，跟踪文件中的输出是否相同？日期/时间格式是否与我上面引用的相同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:35:15.517

`Trace`是的，您调用的常量文本没有神奇的翻译。

本地化跟踪消息是不寻常的，因为生成的日志预计将由原始开发人员而不是用户使用。另一方面，您可以根据需要放置本地化消息。

日期格式为 UTC 时区的 ISO8601，因此无论用户或服务器的文化或时区如何，它都不会改变。

# silverlight - 无法在 Silverlight 5 中重用样式

> ID：15216933
> 
> 赞同：0
> 
> 时间：2013-03-05T06:06:47.533
> 
> 标签：silverlight, styles, visualstatemanager, visualstates

我创建了一个自定义图像按钮并添加了一些样式。一切正常。但是当我尝试在其他按钮中重用它时，它并没有很好地工作。只有 1 个按钮会遵循样式，其他按钮始终为空白。

我在运行时没有任何错误。请帮忙！！

谢谢

这是代码：

按钮：

```
 public class ImageTextButton : Button
{
    public DependencyProperty TextProperty { get; set; }
    public DependencyProperty ImageProperty { get; set; }

    public ImageTextButton()
    {
        TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(ImageTextButton), null);
        ImageProperty = DependencyProperty.Register("ImageSource", typeof(ImageSource), typeof(ImageTextButton), null);
    }

    public ImageSource ImageSource
    {
        get { return (ImageSource)GetValue(ImageProperty); }
        set { SetValue(ImageProperty, value); }
    }

    public string Text { get; set; }
} 
```

xml:

```
<Controls:ImageTextButton HorizontalAlignment="Left" Command="{Binding SendCustomerChanges}" Style="{StaticResource ImageTextButton}" IsEnabled="{Binding Path=DetailsInformation.IsAllowSave}"
                             Text="{Binding Path=CustomerResources.Button_CloseDetailedView, Source={StaticResource ResourceWrapper}}" ImageSource="{Binding Path=SaveIcon, Source={StaticResource ApplicationIcons}}" /> 
```

风格：

```
 <Style TargetType="Controls:ImageTextButton" x:Key="ImageTextButton" >
    <Setter Property="FontFamily" Value="Arial"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="Controls:ImageTextButton">
                <Grid>
                    <VisualStateManager.VisualStateGroups>
                        <VisualStateGroup x:Name="CommomStates">
                            <VisualState x:Name="Normal"/>
                            <VisualState x:Name="Pressed">
                                <Storyboard>
                                    <ColorAnimation Duration="0" To="LightGray" Storyboard.TargetProperty="(Shape.Fill).(SolidColorBrush.Color)" Storyboard.TargetName="rectangle"/>
                                </Storyboard>
                            </VisualState>
                            <VisualState x:Name="Disabled" >
                                <Storyboard>
                                    <DoubleAnimation Duration="0" Storyboard.TargetName="DisabledVisualElement" Storyboard.TargetProperty="Opacity" To="1"/>
                                    <ColorAnimation Duration="0" To="#AAAAAA" Storyboard.TargetProperty="(TextBlock.Foreground).(SolidColorBrush.Color)" Storyboard.TargetName="textBlock" />
                                </Storyboard>
                            </VisualState>
                        </VisualStateGroup>
                    </VisualStateManager.VisualStateGroups>
                    <Rectangle x:Name="rectangle" Fill="#E0E9F1"  StrokeThickness="1" Stroke="#728DA3"/>
                    <Rectangle x:Name="DisabledVisualElement" Fill="#F5F5F5" IsHitTestVisible="false" StrokeThickness="1" Stroke="#D3D3D3" Opacity="0" />
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition></ColumnDefinition>
                            <ColumnDefinition></ColumnDefinition>
                        </Grid.ColumnDefinitions>
                        <Image Grid.Column="0" Width="12" Height="12" Margin="2,0,2,0" Source="{TemplateBinding ImageSource}">
                        </Image>
                        <TextBlock Grid.Column="1" x:Name="textBlock" Margin="2,3,4,0" Text="{TemplateBinding Text}" />
                    </Grid>
                    <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Margin="5,3,5,3"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T07:32:14.647

您需要更改/修复一些事情。

1.  您的文本依赖属性格式不正确。您必须为 DP 定义一个 getter 和 setter（就像您对 ImageSourceProperty 所做的那样）。

2.  您的 ImageSource 依赖属性也需要一些注意... DP 应命名为 ImageSourceProperty ...`Dependency Properties must follow the pattern` **[描述here](http://msdn.microsoft.com/en-gb/library/ms752914.aspx)** `if they are to work under all conditions. Especially so when you are setting them from XAML`

3.  您需要一个`default style key`新课程，以便实际应用您的样式

4.  Your dependency properties should be registered in a static constructor (or as a field initializer. Not in the instance constructor.

    ```
    public class ImageTextButton : Button
    {
        public ImageTextButton()
        {
            DefaultStyleKey = typeof(ImageTextButton);
        }

        static ImageTextButton()
        {
            TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(ImageTextButton), new PropertyMetadata(null));
            ImageSourceProperty = DependencyProperty.Register("ImageSource", typeof(ImageSource), typeof(ImageTextButton), new PropertyMetadata(null));
        }

        public string Text
        {
            get { return (string)GetValue(TextProperty); }
            set { SetValue(TextProperty, value); }
        }

        // Using a DependencyProperty as the backing store for Text.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty TextProperty;

        public ImageSource ImageSource
        {
            get { return (ImageSource)GetValue(ImageSourceProperty); }
            set { SetValue(ImageSourceProperty, value); }
        }

        // Using a DependencyProperty as the backing store for ImageSource.  This enables animation, styling, binding, etc...
        public static readonly DependencyProperty ImageSourceProperty;

    } 
    ```

# ruby-on-rails - ruby-debug 如何进入函数内部

> ID：15216936
> 
> 赞同：0
> 
> 时间：2013-03-05T06:07:02.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-debug

使用 ruby​​-debug 进入函数的命令是什么？例子

```
class Hello
  def meth1
    debugger
    meth2
  end

  def meth2
    puts "hello"
  end
end 
```

我想进入 meth2 内部并查看执行情况。需要类似的命令，例如 n(next)、c(continue)、l(current line)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T07:33:53.007

我不认为你搜索得很辛苦，因为谷歌有很多有用的页面。

也许您会发现“[使用 ruby​​-debug 进行调试](http://bashdb.sourceforge.net/ruby-debug.html)”很有用，尤其[`Step`](http://bashdb.sourceforge.net/ruby-debug.html#Step)是.`Next``Finish`

# php - 返回实例变量 V/s 返回直接对象

> ID：15216937
> 
> 赞同：1
> 
> 时间：2013-03-05T06:07:03.447
> 
> 标签：php, static-members

我正在研究建于 2009 年的网站的源代码，它是一个自定义框架。

有什么区别？

```
<?php
class DbAccess {

    private static $instance;

    /**
     * Returns the instance of the DB Class
     */

    public static function getInstance()
    {
        self::$instance = new DbAccess();
        return self::$instance;
    }
} 
```

**V/s**

```
<?php
class DbAccess {

    /**
     * Returns the instance of the DB Class
     */

    public static function getInstance()
    {
        return new DbAccess();
    }

} 
```

我曾研究过几个定制框架和一组具有不同模式的库，但有时我看到返回实例的方法是 via `self::$instance`，有时它直接返回 via`new`

哪个是好习惯？考虑即将发布的 PHP 版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T11:23:17.130

在谈论 OOP 时，两者都不是好习惯。其他人已经指出的第一种方法看起来像是有人试图实现单例模式但失败了。就 OOP 而言，单例有什么不好。它引入了紧密耦合、隐藏依赖和全局状态。基本上它只是使用[关键字](https://stackoverflow.com/questions/11923272/use-global-variables-in-a-class/11923384#11923384)[的`global`](https://stackoverflow.com/questions/11923272/use-global-variables-in-a-class/11923384#11923384)一种奇特方式。

现在为您的第二个示例。它基本上是相同的东西，具有完全相同的缺点。

*请注意，这两个示例在每次调用该方法时都会创建一个新的数据库连接。这是...不是最佳的。*

现在我要做的是如下（使用[依赖注入](https://stackoverflow.com/questions/130794/what-is-dependency-injection)）：

假设您有一些需要数据库访问的类，您可以执行以下操作：

```
class Foo
{
    private $db;

    public function __construct($db)
    {
        $this->db = $db;
    }

    public function methodWhichNeedsDatabaseAccess()
    {
        // do something with $this->db
    }

}

// or whatever instance for database access you are using
$db = new PDO(dsn);
$foo = new Foo($db);
$foo->methodWhichNeedsDatabaseAccess(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:10:29.550

静态函数都返回对象的新实例。第一个示例允许您将来再次静态引用该实例，尽管它存储在私有静态中，因此只能从该类中的成员（函数）访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:11:30.587

第一个示例看起来像一个[单例](http://en.wikipedia.org/wiki/Singleton_pattern)示例，但是，它没有包含在典型的 if exists 包装器中。当您只想创建一个类的实例时，单例是一种很好的做法：

```
public static function getInstance() {
  if (!isset(self::$instance))
    self::$instance = new DbAccess();
  return self::$instance;
} 
```

它的工作方式是你只能通过那个实例访问这个类（这样你就不会打开到同一个数据库的多个连接）。

如果他们想控制构造函数，他们可能会遵循第二种模式。您可以将构造函数设为私有（以便只有该类可以调用构造函数并创建新对象）。[这在工厂](http://en.wikipedia.org/wiki/Factory_method_pattern)中很常见。

# asp.net - 向用户发送反馈的服务 URL

> ID：15216943
> 
> 赞同：1
> 
> 时间：2013-03-05T06:07:15.850
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, asp.net-web-api

我正在我的 asp.net mvc 应用程序中创建一个 url，它将接收来自客户端的短信并处理短信并将响应发送回用户。我的网址有点像这样

```
http://mydomain.com/mycont/processsms/003365478555?body=mysms 
```

该 URL 将发回“成功”、“错误”等响应

现在我的问题是应该选择`apicontroller`还是普通控制器。或者有其他更好的选择可以做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T06:14:04.187

由于 url 的行为类似于 HTTP 服务，因此 Web API 控制器（从 ApiController 继承的控制器）绝对是要走的路。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T06:20:30.600

我们通常使用 Controller 来渲染您的普通视图。ApiController 操作仅返回序列化并发送到客户端的数据。因此，在您只需要传递推荐的消息的情况下，您应该使用 API Controller。

> 技术规格

如果您使用过 ASP.NET MVC，那么您已经熟悉控制器。它们在 Web API 中的工作方式类似，但 Web API 中的控制器派生自 ApiController 类而不是 Controller 类。您会注意到的第一个主要区别是 Web API 控制器上的操作不返回视图，而是返回数据。

[参考](https://stackoverflow.com/questions/9494966/difference-between-apicontroller-and-controller-in-asp-net-mvc)

# alfresco - 尝试登录 Alfresco 社区版时出错

> ID：15216944
> 
> 赞同：1
> 
> 时间：2013-03-05T06:07:20.080
> 
> 标签：alfresco

在我的办公机器上安装 Alfresco Community Edition (4.2.c) 后，我收到 **“远程服务器可能不可用或您的身份验证详细信息未被识别”。**

但它安装正确，可以登录我的个人笔记本电脑。我想知道为什么我会收到这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T17:32:00.780

您应该首先通过登录到检查存储库部分是否已启动并运行

```
http://localhost:8082/alfresco 
```

如果这不起作用（如你所说？会发生什么？）你应该检查 alfresco.log 和 catalina.out 是否有明显的错误。也许使用 Sysinternals 的 tcpview 来检查端口是否未被其他程序占用（例如，Skype 具有抓取端口 8080 的烦人行为）。

如果此问题已解决，您应该也可以登录 /share（除非您忘记在 share-config-custom.xml 中调整端点的端口...）

# macos - 如何在 mac os Lion 上进行 cron 清除？

> ID：15216950
> 
> 赞同：0
> 
> 时间：2013-03-05T06:07:28.417
> 
> 标签：macos, shell, cron, applescript, automator

大家好，我正面临 ram 内存的问题，所以每 1 小时我在我的 mac os 上打开终端并输入 purge 以释放内存。我想知道如何编写 shell 脚本并 cron 它。我知道的 cron 部分只需要 applescript 部分的帮助

非常感谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-17T16:36:27.447

我的 2009 MacBook Pro 也有同样的内存泄漏问题，所以我创建了一个 Bash 脚本来检查我是否有少于 100MB 的可用 RAM，然后在需要时执行“很好的清除”。然后我添加了一个 crontab 以每 30 分钟自动运行一次检查，所以我现在可以解放双手了。从终端创建一个名为 free.sh 的新文件，其内容为：

```
#!/bin/bash
free=`vm_stat | grep free | awk '{print $3}'`
freer=${free%%.*}
if [ "$freer" -lt "18000" ]
then
    nice purge
fi 
```

接下来，从终端运行以下命令：

```
crontab -e 
```

输入以下内容并输入您的用户名：

```
*/30 * * * * /Users/your-username-goes-here/free.sh 
```

这告诉 cron 每 30 分钟运行一次 free.sh 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:09:19.097

如果您已经知道如何使用 cron，那么只需使用 cron 来安排清除命令。

```
$ purge #/usr/bin/purge 
```

将释放内存。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-05T06:13:56.567

老实说，我不会为此弄乱你的终端。打开automator并将其设置为执行此操作。

打开 automator 并运行 shell 脚本。看这里：![在此处输入图像描述](../Images/8aecfc3e416942b4c297728b3d5e4cde.png)

# c# - 如何通过引用将数组从 C# 传递到非托管 COM (VT_BYREF)

> ID：15216951
> 
> 赞同：1
> 
> 时间：2013-03-05T06:07:39.417
> 
> 标签：c#, com, interop, marshalling, com-interop

我有一个用 C++ 编写的 COM 组件，我无法更改其源代码，并且其中一个方法的参数之一是`VARIANT *pParamArray`. 使用`tlbimp`我可以为它创建一个托管存根并从 C# 传递一个数组。

不幸的是，COM 组件期望它的数组通过引用传递——有一个明确的检查，`pParamArray->vt != (VT_BYREF | VT_ARRAY | VT_VARIANT)`如果它没有通过检查，它会返回一个错误。

我有 COM 组件的 PDB 和源代码，因此我正在同时调试 C# 和非托管代码。我可以看到我的 C# 数组`object[]`被传递为，据我所知`VT_ARRAY | VT_VARIANT`，这本质上是 a 。`SAFEARRAY`

如何明确告诉 C# 我想通过引用传递它，以便远端的类型具有`VT_BYREF`掩码？

*   我试过把它放在一个`VariantWrapper`- 我得到一个`ArgumentException`消息“ `VariantWrappers cannot be stored in Variants.`”
*   我试过做一个`Marshal.AllocHGlobal`并使用`Marshal.GetNativeVariantForObject()`，但我只`int`在 COM 端得到一个。

`tlbimp`默认情况下，将有问题的参数编组为`UnmanagedType.Struct`. 我不确定如何将`tlbimp`其编组为`IntPtr`，或者即使这会有所作为（我也尝试使用`tlbimp2`CodePlex 的增强功能，但它似乎无法识别我`IntPtr`在其配置文件中的请求）。

我绝不是 Interop 专家，因此请随意提出一些对您来说可能很明显的建议。

## 更新 1

根据@ZdeslavVojkovic 的要求，以下是 IDL 的相关部分：

```
[
    uuid(01234567-89AB-CDEF-0123-3456789ABCDE),
    version(1.0),
    helpstring("XXX")
]
library LAbc
{
    [
        object,
        uuid(01234567-89AB-CDEF-0123-3456789ABCDE),
        dual,
        helpstring("XXX"),
        pointer_default(unique)
    ]
    interface IAbc : IDispatch
    {
            [id(1), helpstring("XXX")]
            HRESULT CallFunction([in] myEnum Function, [in, out] VARIANT* pParamArray, [out, retval] long* pVal);
    };

    [
        uuid(01234567-89AB-CDEF-0123-3456789ABCDE),
        helpstring("XXXs")
    ]
    coclass Abc
    {
        [default] interface IAbc;
    };
}; 
```

这是方法签名本身和参数类型的内部检查：

```
STDMETHODIMP XAbc::CallFunction(myEnum Function, VARIANT *pParamArray, long *pVal)
{
    ...

    // we must get a pointer to an array of variants
    if(!pParamArray ||
        (pParamArray->vt != (VT_BYREF | VT_ARRAY | VT_VARIANT)) ||
        !(psa = *pParamArray->pparray))
        return E_INVALIDARG;

    ...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T16:54:28.527

Here's how to make it work without rewriting the IL.

Please note that for simplicity I have skipped the enum param so IDL definition of the method is like this:

```
[
    object,
    uuid(E2375DCC-8B5B-4BD3-9F6A-A9C1F8BD8300),
    dual,
    helpstring("IDummy Interface"),
    pointer_default(unique)
]
interface IDummy : IDispatch
{
    [id(1)] HRESULT Fn([in, out] VARIANT *pParamArray, [out, retval]long *pVal);
}; 
```

You can call it by late binding call like this:

```
INTEROPXLib.IDummy d = new INTEROPXLib.DummyClass();

object data = new object[3]; // method argument, i.e. pParamArray value

var t = typeof(INTEROPXLib.IDummy);
object[] args = new object[1]; // array which will contain all method arguments
args[0] = data; // data is the first argument, i.e. first element of args array

ParameterModifier[] pms = new ParameterModifier[1];
ParameterModifier pm = new ParameterModifier(1);
pm[0] = true; // pass the 1st argument by reference
pms[0] = pm;  // add pm to the array of modifiers 

// invoke Fn by name via IDispatch interface
var ret = t.InvokeMember("Fn", System.Reflection.BindingFlags.InvokeMethod, null, d, args, pms, null, null);
Console.Out.WriteLine("Result = " + ret); 
```

For convenience, it would be better to wrap this into an extension method on the interface.

# android - 自定义活动动画，找不到@anim/资源

> ID：15216952
> 
> 赞同：1
> 
> 时间：2013-03-05T06:07:39.450
> 
> 标签：android, animation

我想要一个活动的自定义动画，我使用这样的代码：

```
<style name="WCCAnimation.LoadingImageShow" parent="@android:style/Animation.Activity">
    <item name="android:activityOpenEnterAnimation">@anim/zoom_enter</item>
    <item name="android:activityCloseExitAnimation">@anim/slide_out_left</item>
</style> 
```

但问题是 Eclipse 显示：

> 错误：错误：未找到与给定名称匹配的资源（在 'android:activityCloseExitAnimation' 处，值为 '@anim/slide_out_left'）。

我确定 slide_out_left.xml 文件在 sdk 的 anim 文件夹中。

我在 anim 文件夹下尝试了一些其他动画，但仍然无法正常工作。

* * *

[在这种](https://stackoverflow.com/questions/3087366/displaying-activity-with-custom-animation)情况下，我只是按照答案进行操作，但对我来说，在@anim 下找不到资源。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:19:05.440

使用您想要动画的布局中的代码。并对动画 xml 应用缩放或 alpha 效果。

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"
   android:layout_height="fill_parent"
   android:layoutAnimation="@anim/zoom_enter"
   android:orientation="vertical" > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:12:02.290

如果

> slide_out_left.xml 文件在 sdk 的 anim 文件夹中

正如您所提到的，然后提供 android 资源的路径，例如：`@android:anim/slide_out_right`.

请注意，并非平台文件中的所有资源都可以在您的应用程序中使用，有时您可能只需将精确的 xml 复制到您的应用程序。

# ios - HTML5 输入 - iOS 的日期（包括日期）

> ID：15216953
> 
> 赞同：0
> 
> 时间：2013-03-05T06:07:46.457
> 
> 标签：ios, html, forms, input, mobile-safari

我正在尝试在 MobileSafari 中使用 HTML5 输入来获取日期。当我使用“**日期**”时，它显示三个卷轴，**月**、**日 (#)**、**年**：

**一月 | 第四| 1948年**

当我选择“ **datetime** ”时，它会显示 4 个日期和时间卷轴：

**3 月 6 日星期三 | 3 | 05 | 下午**

有没有办法让它只显示' **datetime '中的****'Wed Mar 6'**和本地选择器中的年份？我希望用户能够看到他们选择日期的日期，而不必计算距离星期五还有多少天。我不需要时间选择，但我想要该输入类型的日期格式。

 *** * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:17:27.727

抱歉，这取决于浏览器实现。您必须制作自己的浏览器并让他们使用它。据我所知，HTML5 实际上还没有 100% 推出。w3c 仍在对其进行调整，浏览器无法就如何呈现新元素达成一致。

如果绝对必要，您可能不得不考虑使用 flash 或 java 插件对象。**

# c# - 如何使用主网格视图制作每个详细网格视图的总和并填充到主网格视图的页脚中

> ID：15216956
> 
> 赞同：0
> 
> 时间：2013-03-05T06:07:55.420
> 
> 标签：c#, devexpress, xtragrid

我正在使用主详细信息 xtragrid 并希望将所有详细信息网格视图的总和填充到主网格视图的页脚中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T09:46:40.993

我建议您在主行的附加列中显示详细摘要信息，如[如何在主网格视图列](http://www.devexpress.com/Support/Center/p/E1581.aspx)示例中显示对详细行计算的摘要中所述：

```
//...
GridColumn colSubTotal = gridView1.Columns.AddField("SubTotal");
colSubTotal.UnboundType = DevExpress.Data.UnboundColumnType.Integer;
colSubTotal.Visible = true;
colSubTotal.Caption = "Budget";
gridView1.CustomUnboundColumnData += gridView1_CustomUnboundColumnData;
//...
void gridView1_CustomUnboundColumnData(object sender, CustomColumnDataEventArgs e) {
    GridView view = sender as GridView;
    if(e.Column.FieldName != "SubTotal") return;
    if(!e.IsGetData) return;
    DataRow row = ((view.DataSource as IList)[e.ListSourceRowIndex] as DataRowView).Row;
    int subTotal = 0;
    foreach(DataRow childRow in row.GetChildRows("Project_Tasks")) 
        subTotal += (int)childRow["Budget"];
    e.Value = subTotal;
} 
```

然后通过指定此附加列的摘要来显示所有详细信息的总摘要：

```
colSubTotal.Summary.Add(DevExpress.Data.SummaryItemType.Sum);
gridView1.OptionsView.ShowFooter = true; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-10T19:35:22.063

将 aspx 页面中 gridview 的 showfooter 属性设置为 true。在页脚行的 gridview 的 Grid_DataBound 事件中，使页脚行的第一个单元格的列跨度等于网格中的总列数，并使除 2 之外的其余单元格不可见。将文本添加到页脚行的第一个单元格

# memory-leaks - 追踪内存泄漏的最佳方法是什么

> ID：15216959
> 
> 赞同：3
> 
> 时间：2013-03-05T06:08:14.117
> 
> 标签：memory-leaks, c++builder, vcl

在一个巨大的*C++ builder 2010*应用程序中，正在构建和链接多个 DLL 等。追踪长时间积累的内存泄漏的最佳方法是什么？假设应用程序必须在目标机器上运行一周或其他时间才能成为问题。让我们假设没有可用的分析应用程序，如 AQ Time 或类似的东西。只需使用标准 IDE 和一些代码。

我最初的想法是编写一个宏以在所有类中使用，以跟踪每个类类型开始使用的实例数量和空间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-05T19:50:59.400

RTL 使用[FastMM](http://fastmm.sourceforge.net)作为其内存管理器。FastMM 支持内存泄漏报告和跟踪。RTL 中包含的 FastMM 的本机版本是一个精简版本，但它确实支持最小的泄漏报告。您可以在运行时将 RTL 的全局[`ReportMemoryLeaksOnShutdown`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.ReportMemoryLeaksOnShutdown)变量设置为 true，FastMM 将在应用程序关闭时生成基本的泄漏报告。如需更高级的使用，您可以下载完整版 FastMM 并将其添加到您的应用程序中，这将取代 RTL 的原生版本。然后，您可以根据需要配置 FastMM。

# javascript - 加载 iframe 时使用 try 块捕获“sameorigin”错误

> ID：15216967
> 
> 赞同：0
> 
> 时间：2013-03-05T06:09:02.310
> 
> 标签：javascript

得到一个脚本，该脚本从 txt 文件中获取 url，并将它们一个接一个地放入 iframe。继承人的脚本：

```
 <script type="text/javascript">
           $.get("imones.txt", function (data) {
                var array = data.split(/\r\n|\r|\n/);
                var beforeLoad = (new Date()).getTime();
                var loadTimes = []; 
                    var beforeTimes = [];   
                $('#frame_id').on('load', function () {                                 
                    beforeTimes.push(beforeLoad);
                    loadTimes.push((new Date()).getTime()); 
                    $('#frame_id').attr('src', array.pop()); 
                        $.each(loadTimes, function (index, value) {
                            var result = (value - beforeTimes[index]) / 1000; 
                                if (result < 0) { 
                                    result = result * (-1);
                                }   
                            $("#loadingtime" + index).html(result);
                            beforeLoad = value;
                        });
                }).attr('src', array.pop());
            });
        </script> 
```

当其中一个 url 具有“同源”保护（例如 google.com）时，我遇到了一个问题，我的问题是它一旦开始加载 google 就不会加载任何其他帧（它卡住了）。有人告诉我尝试`try catch`为此使用块，但我不知道如何。我如何使用`try catch`来避免“同源”网址（请注意，我不希望它们加载，我希望它们跳过）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T06:14:28.697

我猜这里

```
<script type="text/javascript">
           $.get("imones.txt", function (data) {
                var array = data.split(/\r\n|\r|\n/);
                var beforeLoad = (new Date()).getTime();
                var loadTimes = []; 
                    var beforeTimes = [];   
                $('#frame_id').on('load', function () {                                 
                    beforeTimes.push(beforeLoad);
                    loadTimes.push((new Date()).getTime()); 
                    try {
                        $('#frame_id').attr('src', array.pop()); 
                        $.each(loadTimes, function (index, value) {
                            var result = (value - beforeTimes[index]) / 1000; 
                                if (result < 0) { 
                                    result = result * (-1);
                                }   
                            $("#loadingtime" + index).html(result);
                            beforeLoad = value;
                        });
                    } catch(ex) {}
                }).attr('src', array.pop());
            });
        </script> 
```

这将包裹您实际将 url 推入“src”属性的位置，从而触发请求。

# python - Python 生成器每次调用都会产生相同的值

> ID：15216972
> 
> 赞同：3
> 
> 时间：2013-03-05T06:09:32.867
> 
> 标签：python, generator

我希望这个生成器从列表中产生每个连续值的余弦，但每次都得到相同的值。

```
import math     
angles = range(0,361,3)

# calculate x coords:    
def calc_x(angle_list):
    for a in angle_list:
        yield round(radius * cos(radians(a)), 3) 
```

每次调用都产生相同的值：为什么会这样，我该如何解决？

```
>>>calc_x(angles).next()
5.0
>>>calc_x(angles).next()
5.0
>>>calc_x(angles).next()
5.0 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T06:10:46.173

每次调用时，`calc_x`您都会创建一个*新生*成器。您需要做的是创建一个然后继续使用它：

```
calc = calc_x(angles)
next(calc)
next(calc)
# etc. 
```

# lucene - Apache Lucene 搜索 - 关键字失败 - IN

> ID：15216977
> 
> 赞同：0
> 
> 时间：2013-03-05T06:09:44.013
> 
> 标签：lucene

我正在将 Apache Lucene Search 与我的 java 应用程序一起使用。查询建立在使用国家代码搜索人名（字母）（通常表示为两个字母的单词，例如 - IN - India、US - USA、UK- England 等）

但是问题出现了，当我尝试使用 Alphabet="Steve" 和 Country="IN" 的查询条件搜索值时，搜索查询结果没有值，即使记录存在，只有当国家被选为 IN(India )

```
alphabet = alphabet.trim() + "*";
query = new QueryParser(Version.LUCENE_30, searchFor[0], analyzer).parse(alphabet.trim());
mainQuery.add(query, BooleanClause.Occur.MUST);
}
if ((country != null) && (country.trim().length() > 0)) {
query = new QueryParser(Version.LUCENE_30, searchFor[1], analyzer).parse(country.trim());
mainQuery.add(query, BooleanClause.Occur.MUST);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T08:53:49.007

您想`KeywordAnalyzer`用于诸如国家代码之类的东西（不需要标记化或大小写/停用词折叠）；对于人名，`WhitespaceAnalyzer`可能是一个不错的选择。`PerFieldAnalyzerWrapper`将两者结合起来。例子：

```
Analyzer ka = new KeywordAnalyzer(Version.LUCENE_30)
Analyzer wa = new WhitespaceAnalyzer(Version.LUCENE_30)
PerFieldAnalyzerWrapper wrapper =
      new PerFieldAnalyzerWrapper(ka);
wrapper.addAnalyzer("countrycode", ka); 
```

现在只需创建您的`IndexWriter`using `wrapper`.

# android - 在android中顺时针和逆时针旋转一个正方形

> ID：15216983
> 
> 赞同：0
> 
> 时间：2013-03-05T06:10:10.483
> 
> 标签：android, opengl-es, android-animation

我使用 OPENGL 概念在 android 中创建了一些简单的动画，我要做的是在时钟和逆时针方向上旋转一个正方形。我的意思是在特定时间，正方形将分别顺时针和逆时针旋转。

```
 my main activity

 public class main extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
        WindowManager.LayoutParams.FLAG_FULLSCREEN);
    GLSurfaceView view = new GLSurfaceView(this);
    view.setRenderer(new OpenGLRenderer());
    setContentView(view);
} 
```

}

OpenGLRenderer.java

```
public class OpenGLRenderer implements Renderer {
private Square square;
private float angle = 0;

public OpenGLRenderer() {
    // Initialize our square. 
    square = new Square();
}

public void onSurfaceCreated(GL10 gl, EGLConfig config) {
    // Set the background color to black ( rgba ).
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);
    // Enable Smooth Shading, default not really needed.
    gl.glShadeModel(GL10.GL_SMOOTH);
    // Depth buffer setup.
    gl.glClearDepthf(1.0f);
    // Enables depth testing.
    gl.glEnable(GL10.GL_DEPTH_TEST);
    // The type of depth testing to do.
    gl.glDepthFunc(GL10.GL_LEQUAL);
    // Really nice perspective calculations.
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
}

public void onDrawFrame(GL10 gl) {
    // Clears the screen and depth buffer.
    gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
    // Replace the current matrix with the identity matrix
    gl.glLoadIdentity();
    // Translates 10 units into the screen.
    gl.glTranslatef(0, 0, -10); 

    // SQUARE 
    // Save the current matrix.
    gl.glPushMatrix();
    // Rotate square counter-clockwise.
    gl.glRotatef(angle, 0, 0, 1);
    // Draw square .    
    square.draw(gl);
    // Restore the last matrix.
    gl.glPopMatrix();

    square.draw(gl);            

    // Restore to the matrix as it was before B.
    gl.glPopMatrix();

    // Increse the angle.
    angle++;
}

public void onSurfaceChanged(GL10 gl, int width, int height) {
    // Sets the current view port to the new size.
    gl.glViewport(0, 0, width, height);
    // Select the projection matrix
    gl.glMatrixMode(GL10.GL_PROJECTION);
    // Reset the projection matrix
    gl.glLoadIdentity();
    // Calculate the aspect ratio of the window
    GLU.gluPerspective(gl, 45.0f, (float) width / (float) height, 0.1f,
            100.0f);
    // Select the modelview matrix
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    // Reset the modelview matrix
    gl.glLoadIdentity();
} 
```

}

方形.java

```
public class Square {
// Our vertices.
private float vertices[] = {
          -1.0f,  1.0f, 0.0f,  // 0, Top Left
          -1.0f, -1.0f, 0.0f,  // 1, Bottom Left
           1.0f, -1.0f, 0.0f,  // 2, Bottom Right
           1.0f,  1.0f, 0.0f,  // 3, Top Right
    };

// The order we like to connect them.
private short[] indices = { 0, 1, 2, 0, 2, 3 };

// Our vertex buffer.
private FloatBuffer vertexBuffer;

// Our index buffer.
private ShortBuffer indexBuffer;

public Square() {
    // a float is 4 bytes, therefore we multiply the number if 
    // vertices with 4.
    ByteBuffer vbb = ByteBuffer.allocateDirect(vertices.length * 4);
    vbb.order(ByteOrder.nativeOrder());
    vertexBuffer = vbb.asFloatBuffer();
    vertexBuffer.put(vertices);
    vertexBuffer.position(0);

    // short is 2 bytes, therefore we multiply the number if 
    // vertices with 2.
    ByteBuffer ibb = ByteBuffer.allocateDirect(indices.length * 2);
    ibb.order(ByteOrder.nativeOrder());
    indexBuffer = ibb.asShortBuffer();
    indexBuffer.put(indices);
    indexBuffer.position(0);
}

/**
 * This function draws our square on screen.
 * @param gl
 */
public void draw(GL10 gl) {
    // Counter-clockwise winding.
    gl.glFrontFace(GL10.GL_CCW);
    // Enable face culling.
    gl.glEnable(GL10.GL_CULL_FACE);
    // What faces to remove with the face culling.
    gl.glCullFace(GL10.GL_BACK);

    // Enabled the vertices buffer for writing and to be used during 
    // rendering.
    gl.glEnableClientState(GL10.GL_VERTEX_ARRAY);
    // Specifies the location and data format of an array of vertex
    // coordinates to use when rendering.
    gl.glVertexPointer(3, GL10.GL_FLOAT, 0, vertexBuffer);

    gl.glDrawElements(GL10.GL_TRIANGLES, indices.length, 
            GL10.GL_UNSIGNED_SHORT, indexBuffer);

    // Disable the vertices buffer.
    gl.glDisableClientState(GL10.GL_VERTEX_ARRAY);
    // Disable face culling.
    gl.glDisable(GL10.GL_CULL_FACE);
} 
```

}

在这里我的代码在两边都旋转..现在只在这部分出现

```
public class OpenGLRenderer implements Renderer {
private Square square;
private float angle = 0;

public OpenGLRenderer() {
    square = new Square();
}
public void onSurfaceCreated(final GL10 gl, EGLConfig config) {
    gl.glClearColor(0.0f, 0.0f, 0.0f, 0.5f);
    gl.glShadeModel(GL10.GL_SMOOTH_LINE_WIDTH_RANGE);
    gl.glClearDepthf(1.0f);
    gl.glEnable(GL10.GL_DEPTH_TEST);
    gl.glDepthFunc(GL10.GL_LEQUAL);
    gl.glHint(GL10.GL_PERSPECTIVE_CORRECTION_HINT, GL10.GL_NICEST);
}

public void onDrawFrame(final GL10 gl) {

     Thread t = new Thread(new Runnable() {     

            public void run(){  

                        try{

                            gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
                            gl.glLoadIdentity();
                            gl.glTranslatef(0.0f, 4.9f,-9.3f);
                            //gl.glTranslatef(2.0f, 0.0f,0.0f);
                            gl.glPushMatrix();
                            gl.glRotatef(-angle, 0, 0, 1);  

                            gl.glScalef(1.0f, 1.0f, 1.0f);
                            square.draw(gl);
                            gl.glPopMatrix();
                            angle++;
                              Thread.sleep(5000);

                        }
                        catch(InterruptedException e){
                        } 
                       // To do
                        gl.glClear(GL10.GL_COLOR_BUFFER_BIT | GL10.GL_DEPTH_BUFFER_BIT);
                        gl.glLoadIdentity();
                        gl.glTranslatef(0.0f, 4.9f,-9.3f);
                        //gl.glTranslatef(2.0f, 0.0f,0.0f);
                        gl.glPushMatrix();
                        gl.glRotatef(angle, 0, 0, 1);   

                        //gl.glScalef(1.0f, 1.0f, 1.0f);
                        square.draw(gl);    
                        gl.glPopMatrix();
                        angle++;
            }
       });
        t.start();

    }

public void onSurfaceChanged(GL10 gl, int width, int height) {
    gl.glViewport(0, 0, width, height);
    gl.glMatrixMode(GL10.GL_PROJECTION);
    //glClearColor(5.0f, 6.0f, 0.0f, 5.5f); yellow
    gl.glLoadIdentity();
    //GLU.gluPerspective(gl, 45.0f, (float) width / (float) height, 0.1f, 100.0f);
    GLU.gluPerspective(gl, 80.0f, (float) width / (float) height, 8.0f, 10.0f);
    gl.glMatrixMode(GL10.GL_MODELVIEW);
    gl.glLoadIdentity();
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T13:00:27.923

```
public class Main extends Activity {
private Runnable runnable;  

@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.requestWindowFeature(Window.FEATURE_CONTEXT_MENU); 
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
    WindowManager.LayoutParams.FLAG_FULLSCREEN);
    final GLSurfaceView view = new GLSurfaceView(this);
    view.setRenderer(new OpenGLRenderer());
    setContentView(view);

    runnable =new Runnable() {

        @Override
        public void run() {
            // TODO Auto-generated method stub
            try 
            {  

                view.setRenderer(new OpenGLRenderer());
                Thread.sleep(10);
            finish();

            }  
            catch(Exception e)  
            {  
                e.printStackTrace();  
            }  
        }  
    };  
    try  
    {  
        Thread t=new Thread(null,runnable);  
        t.start();  
        view.setRenderer(new OpenGLRenderer1());
       // Intent i=new Intent(this,OpenGLRenderer.class);  
         //   startActivity(i);  
    }  
    catch(Exception e)  
    {  

    }  

        }

} 
```

你可以试试。

# ios6 - iOS Web App Title 元标记：仅支持 12 个字符，但 Web App Titles 支持 13 个字符

> ID：15216984
> 
> 赞同：3
> 
> 时间：2013-03-05T06:10:19.620
> 
> 标签：ios6, mobile-safari, meta-tags, safari

我正在使用未记录的 iOS Web App Title 元标记（在 iOS 6 中可用）。

我将元标记放在我的 HTML5 文件的头部并将其上传到我的网络服务器。我的网页标题是“iOS Mobile Web App Title Meta Tag Test”，但我使用了 iOS Web App Title 元标记，如下所示：

```
<meta name="apple-mobile-web-app-title" content="0123456789123"> 
```

当我在 iOS 6 上打开 Safari 并将我的网络应用程序添加到主屏幕时，标题显示为“012345678912”——它正在删除最后一个字符（我可以手动添加最后一个字符）。为什么是这样？我也尝试使用常规文本（以防数字是问题）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-02T09:06:31.760

有 12 个字符的大小限制，因为这是用户“桌面”上 web 应用程序图标下显示的名称。

# php - 将 PHP 脚本更改为 PHP PDO

> ID：15216985
> 
> 赞同：-1
> 
> 时间：2013-03-05T06:10:20.027
> 
> 标签：php, pdo

编辑：谢谢你的回答。

我目前正在尝试将旧的视频显示脚本更改为 pdo，但 pdo 对我来说是一个新概念，我需要一些帮助。

任何帮助，将不胜感激。我以为我的想法是对的，但显然不是。

```
 <?php
$dsn = 'dsn';
$user = 'username';
$pass = 'password';

$db = New PDO($dsn, $user, $pass);

$sq = db->query("SELECT * FROM  videos ORDER BY `VidTitle` ASC")

$i=0
while ($i < $sq->fetch(PDO::FETCH_OBJ)) 
{
$FormattedComment = wordwrap($row->VidDesc;, 25, "\n", true);
?>

<div class="videobox1">
  <table height="230px" border="0" cellpadding="0" align="center">
  <tr>
  <td colspan="2" style="border:none;background:none;"><div class="LargeFont"><?php echo $row->VidTitle; ?></div>
  </td> 
  <td style="border:none;background:none;" align="center" valign="bottom" width="125px" colspan="2"><img style="border:none;background:none;" 
     src="../GuideResources/Words/pt.png" /><?php echo $row->VidTime; ?></td>     
  </tr>
  <tr>
  <td valign="bottom" style="border:none;background:none;"><img style="border:none;background:none;" src="../GuideResources/Words/expect.png"/></td>
  </tr>
  <tr>
  <td align="left" width="725" valign="top" ><div class="SmallFont">&nbsp;<?php echo $FormattedComment; ?></div></td>
  <td width="25px" style="border:none;background:none;">&nbsp;</td>
  <td style="border:none;background:none;" align="right"><div class="WatchNow"><a href="../Video/DisplayVideo.php?Video=<?php echo $row->ID; ?>&TrackUser=Videos">            </a></div></td>
  </tr>
  </table>

  </div>
    <?php
    $i++;
    }
    ?> 
```

当我运行它时，我收到以下错误

```
Parse error: syntax error, unexpected T_OBJECT_OPERATOR in /var/www/httpdocs/test.php on line 8 
```

通过以下更改，我可以正常工作：

```
$db = New PDO($dsn, $user, $pass);

$sq = $db->query("SELECT * FROM Videos ORDER BY VidTitle ASC");

while ($row = $sq->fetchobject()) 
{
$FormattedComment = wordwrap($row->VidDesc, 25, "\n", true);
?> 
```

感谢帮助纠正我的简单错误的少数用户，感谢我的大脑找出其他改变。

我想我开始在 PDO 下好一点，我只需要放慢速度。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-05T06:12:21.447

它与PDO无关。这是一个 PHP 语法错误：

您错过了`;`第 8 行和第 10 行的尾随

```
$sq = db->query("SELECT * FROM  videos ORDER BY `VidTitle` ASC") 
```

# ruby-on-rails - Rails/Rack ... Rack::ReverseProxy 导致请求超时

> ID：15216988
> 
> 赞同：5
> 
> 时间：2013-03-05T06:10:30.590
> 
> 标签：ruby-on-rails, heroku, rack, reverse-proxy

我想我在我的头上，无法弄清楚如何调试或从这里去哪里？！任何指导将不胜感激！

**问题：**

*   开发环境：一切正常
*   生产：我收到“请求超时”错误

**目标：**

让“www.site.com/blog”显示来自“blog.site.com”的内容，而无需重定向/更改浏览器 URL

**设置**

*   www.site.com 是 Heroku 上的 Rails 应用程序
*   blog.site.com 是 Bluehost 上的 WordPress

所以我无权访问服务器配置

**方法**

使用[rack-reverse-proxy](https://github.com/jaswope/rack-reverse-proxy) gem，如[如何使用子目录而不是子域？](https://stackoverflow.com/questions/6179398/how-can-i-use-a-subdirectory-instead-of-a-subdomain)通过[jplewicke](https://stackoverflow.com/users/1038045/jplewicke)

**执行**

宝石文件

```
gem "rack-reverse-proxy", :require => "rack/reverse_proxy" 
```

config.ru（就在运行*AppName* ::Application 之前）

```
use Rack::ReverseProxy do
  reverse_proxy(/^\/blog(\/.*)$/,'http://blog.site.com$1',
  opts = {:preserve_host => true})
end 
```

配置/路由.rb

```
match "/blog" => redirect("/blog/") 
```

**结果/问题**

它在我的机器上开发时效果很好，但是当我将它投入生产时它会超时。它不仅会超时，而且之后整个应用程序都会挂起或其他情况，即每个请求甚至 www.site.com 都会超时（在尝试 blog.site.com 之前有效）。大约 5-10 分钟后 www.site.com 再次工作，但 blog.site.com 超时。

**日志**

> 2013-03-05 05:54:19+00:00 app web.1 - - 2013 年开始为 66.108.140.26/cpe-66-108-140-26.nyc.res.rr.com 获取“/resource” -03-05 05:54:19 +0000
> 
> 2013-03-05 05:54:19+00:00 heroku 路由器 - - at=info method=GET path=/blog host=www.site.com fwd="66.108.140.26/cpe-66-108-140- 26.nyc.res.rr.com" dyno=web.1 queue=0 wait=0ms connect=1ms service=7ms status=301 bytes=105
> 
> 2013-03-05 05:54:49+00:00 heroku 路由器 - - at=error code=H12 desc="Request timeout" method=GET path=/blog/host=www.site.com fwd="66.108\. 140.26/cpe-66-108-140-26.nyc.res.rr.com" dyno=web.1 queue=0ms wait=0ms connect=2ms service=30000ms status=503 bytes=0

**调试**

我尝试在生产中打开调试...

配置/环境/production.rb

```
config.consider_all_requests_local = true
config.log_level = :debug 
```

但没有什么真正显示出来只是一个通用的，

> 应用程序错误...无法提供您的页面...再试一次...检查日志。

这是唯一有意义的事情，因为它正在开发中

关于做什么的任何建议或想法？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-02-27T15:21:16.060

我只是在 rails 4 上设置了它。它在所有子目录上工作，使用：

```
use Rack::ReverseProxy do
  reverse_proxy_options preserve_host: true
  reverse_proxy '/blog', 'http://grav.somedomain.net/'
end 
```

但是当访问没有子目录的 /blog 时，它正在响应永久重定向 (301)。

要解决此问题，只需将 /blog 重写为 /blog/home 并确保在您的博客中添加此别名链接！

```
require 'rack/rewrite'
use Rack::Rewrite do
  rewrite   '/blog',  '/blog/home'
end 
```

也许有人可以告诉我们这个假设是否正确：博客引擎经常在主页上进行重定向，这可能会破坏代理。

有一个美好的！

# python - 如何分析 fusepy 操作

> ID：15216990
> 
> 赞同：5
> 
> 时间：2013-03-05T06:10:41.507
> 
> 标签：python, python-3.x, fuse

我正在使用 Python 的 fusepy ctypes 库 ( [https://github.com/terencehonles/fusepy](https://github.com/terencehonles/fusepy) ) 编写 FUSE 文件系统。有没有办法分析熔断器操作？当我尝试使用 cProfile 运行 FUSE 的实例化时，我得到不可用的输出：

```
 924 function calls (911 primitive calls) in 5.575 seconds

   Ordered by: standard name

   ncalls  tottime  percall  cumtime  percall filename:lineno(function)
        1    0.000    0.000    5.575    5.575 <string>:1(<module>)
        7    0.000    0.000    0.000    0.000 __init__.py:1209(debug)
        2    0.000    0.000    0.000    0.000 __init__.py:1221(info)
        9    0.000    0.000    0.000    0.000 __init__.py:1452(getEffectiveLevel)
        9    0.000    0.000    0.000    0.000 __init__.py:1466(isEnabledFor)
        1    0.000    0.000    0.000    0.000 __init__.py:239(load)
        1    0.000    0.000    0.000    0.000 __init__.py:267(loads)
        1    0.000    0.000    0.000    0.000 __init__.py:363(__getattr__)
        1    0.000    0.000    0.000    0.000 __init__.py:370(__getitem__)
        1    0.000    0.000    0.000    0.000 __init__.py:372(maketree)
        1    0.000    0.000    5.573    5.573 __init__.py:384(mount)
        1    0.000    0.000    0.000    0.000 __init__.py:388(_maketree)
        2    0.000    0.000    0.000    0.000 __init__.py:42(normalize_encoding)
        8    0.000    0.000    0.000    0.000 abc.py:377(get)
        1    0.000    0.000    0.000    0.000 argparse.py:1184(__init__)
        3    0.000    0.000    0.000    0.000 argparse.py:1200(__init__)
       34    0.000    0.000    0.000    0.000 argparse.py:1252(register)
        3    0.000    0.000    0.000    0.000 argparse.py:1256(_registry_get)
        1    0.000    0.000    0.000    0.000 argparse.py:1281(add_argument)
        2    0.000    0.000    0.000    0.000 argparse.py:1328(add_argument_group)
        1    0.000    0.000    0.000    0.000 argparse.py:1338(_add_action)
        1    0.000    0.000    0.000    0.000 argparse.py:1402(_get_positional_kwargs)
        1    0.000    0.000    0.000    0.000 argparse.py:1454(_pop_action_class)
        3    0.000    0.000    0.000    0.000 argparse.py:1458(_get_handler)
        1    0.000    0.000    0.000    0.000 argparse.py:1467(_check_conflict)
        2    0.000    0.000    0.000    0.000 argparse.py:1507(__init__)
        1    0.000    0.000    0.000    0.000 argparse.py:151(__init__)
        1    0.000    0.000    0.000    0.000 argparse.py:1529(_add_action)
        1    0.000    0.000    0.001    0.001 argparse.py:1577(__init__)
        1    0.000    0.000    0.000    0.000 argparse.py:1613(identity)
        1    0.000    0.000    0.000    0.000 argparse.py:1684(_add_action)
        1    0.000    0.000    0.000    0.000 argparse.py:1696(_get_positional_actions)
        1    0.000    0.000    0.000    0.000 argparse.py:1697(<listcomp>)
        1    0.000    0.000    0.000    0.000 argparse.py:1704(parse_args)
        1    0.000    0.000    0.000    0.000 argparse.py:1711(parse_known_args)
        1    0.000    0.000    0.000    0.000 argparse.py:1749(_parse_known_args)
        1    0.000    0.000    0.000    0.000 argparse.py:1796(take_action)
        1    0.000    0.000    0.000    0.000 argparse.py:1894(consume_positionals)
        1    0.000    0.000    0.000    0.000 argparse.py:194(__init__)
        1    0.000    0.000    0.000    0.000 argparse.py:1955(<listcomp>)
        1    0.000    0.000    0.000    0.000 argparse.py:2032(_match_arguments_partial)
        1    0.000    0.000    0.000    0.000 argparse.py:2038(<listcomp>)
        1    0.000    0.000    0.000    0.000 argparse.py:2042(<listcomp>)
        1    0.000    0.000    0.000    0.000 argparse.py:2048(_parse_optional)
        1    0.000    0.000    0.000    0.000 argparse.py:2150(_get_nargs_pattern)
        1    0.000    0.000    0.000    0.000 argparse.py:2194(_get_values)
        1    0.000    0.000    0.000    0.000 argparse.py:2246(_get_value)
        1    0.000    0.000    0.000    0.000 argparse.py:2272(_check_value)
        1    0.000    0.000    0.000    0.000 argparse.py:2312(_get_formatter)
        1    0.000    0.000    0.000    0.000 argparse.py:554(_metavar_formatter)
        1    0.000    0.000    0.000    0.000 argparse.py:563(format)
        1    0.000    0.000    0.000    0.000 argparse.py:570(_format_args)
        1    0.000    0.000    0.000    0.000 argparse.py:784(__init__)
        1    0.000    0.000    0.000    0.000 argparse.py:826(__init__)
        1    0.000    0.000    0.000    0.000 argparse.py:855(__call__)
        1    0.000    0.000    0.000    0.000 codecs.py:238(__init__)
        1    0.000    0.000    0.000    0.000 codecs.py:287(__init__)
        1    0.000    0.000    0.000    0.000 codecs.py:297(decode)
        1    0.000    0.000    5.574    5.574 commands.py:159(mount)
        1    0.000    0.000    0.000    0.000 decoder.py:347(decode)
        1    0.000    0.000    0.000    0.000 decoder.py:358(raw_decode)
        6    0.000    0.000    0.000    0.000 functools.py:148(__init__)
        8    0.000    0.000    0.000    0.000 functools.py:152(__hash__)
       12    0.000    0.000    0.000    0.000 functools.py:155(_make_key)
       18    0.000    0.000    0.000    0.000 functools.py:167(<genexpr>)
    12/10    0.000    0.000    0.000    0.000 functools.py:241(wrapper)
        1    5.573    5.573    5.573    5.573 fuse.py:334(__init__)
        1    0.000    0.000    0.000    0.000 fuse.py:357(<listcomp>)
        3    0.000    0.000    0.000    0.000 fuse.py:377(_normalize_fuse_options)
        1    0.000    0.000    0.000    0.000 fuse.py:385(_wrapper)
        1    0.000    0.000    0.000    0.000 fuse.py:603(destroy)
        1    0.000    0.000    0.000    0.000 fuse.py:699(destroy)
        1    0.000    0.000    0.000    0.000 fuse.py:823(__call__)
        9    0.000    0.000    0.000    0.000 genericpath.py:15(exists)
        4    0.000    0.000    0.000    0.000 gettext.py:111(_expand_lang)
        2    0.000    0.000    0.000    0.000 gettext.py:353(find)
        2    0.000    0.000    0.000    0.000 gettext.py:393(translation)
        2    0.000    0.000    0.000    0.000 gettext.py:459(dgettext)
        2    0.000    0.000    0.000    0.000 gettext.py:497(gettext)
        4    0.000    0.000    0.000    0.000 locale.py:339(normalize)
        1    0.000    0.000    0.000    0.000 locale.py:574(getpreferredencoding)
        1    0.000    0.000    0.000    0.000 mount.py:34(__init__)
        1    0.000    0.000    5.573    5.573 mount.py:419(mount)
        9    0.000    0.000    0.000    0.000 os.py:668(__getitem__)
        9    0.000    0.000    0.000    0.000 os.py:734(encode)
        2    0.000    0.000    0.000    0.000 os.py:738(decode)
        1    0.000    0.000    0.000    0.000 path.py:16(rootdir)
        1    0.000    0.000    0.000    0.000 path.py:22(fuserootdir)
        1    0.000    0.000    0.000    0.000 path.py:40(treefile)
        1    0.000    0.000    0.000    0.000 path.py:46(ctreefile)
       12    0.000    0.000    0.000    0.000 posixpath.py:38(_get_sep)
       12    0.000    0.000    0.000    0.000 posixpath.py:71(join)
        1    0.000    0.000    0.000    0.000 re.py:153(match)
        5    0.000    0.000    0.000    0.000 re.py:212(compile)
        1    0.000    0.000    0.000    0.000 re.py:264(_compile)
      4/1    0.000    0.000    0.000    0.000 sre_compile.py:32(_compile)
        2    0.000    0.000    0.000    0.000 sre_compile.py:357(_simple)
        1    0.000    0.000    0.000    0.000 sre_compile.py:364(_compile_info)
        2    0.000    0.000    0.000    0.000 sre_compile.py:470(isstring)
        1    0.000    0.000    0.000    0.000 sre_compile.py:473(_code)
        1    0.000    0.000    0.000    0.000 sre_compile.py:488(compile)
        8    0.000    0.000    0.000    0.000 sre_parse.py:127(__len__)
       17    0.000    0.000    0.000    0.000 sre_parse.py:131(__getitem__)
        2    0.000    0.000    0.000    0.000 sre_parse.py:135(__setitem__)
        4    0.000    0.000    0.000    0.000 sre_parse.py:139(append)
      6/3    0.000    0.000    0.000    0.000 sre_parse.py:141(getwidth)
        1    0.000    0.000    0.000    0.000 sre_parse.py:179(__init__)
       10    0.000    0.000    0.000    0.000 sre_parse.py:184(__next)
        7    0.000    0.000    0.000    0.000 sre_parse.py:203(match)
        8    0.000    0.000    0.000    0.000 sre_parse.py:209(get)
      2/1    0.000    0.000    0.000    0.000 sre_parse.py:340(_parse_sub)
      2/1    0.000    0.000    0.000    0.000 sre_parse.py:418(_parse)
        1    0.000    0.000    0.000    0.000 sre_parse.py:68(__init__)
        1    0.000    0.000    0.000    0.000 sre_parse.py:702(fix_flags)
        1    0.000    0.000    0.000    0.000 sre_parse.py:714(parse)
        1    0.000    0.000    0.000    0.000 sre_parse.py:73(opengroup)
        1    0.000    0.000    0.000    0.000 sre_parse.py:84(closegroup)
        4    0.000    0.000    0.000    0.000 sre_parse.py:91(__init__)
        1    0.000    0.000    0.000    0.000 tree.py:125(__init__)
        1    0.000    0.000    0.000    0.000 tree.py:131(__iter__)
        1    0.000    0.000    0.000    0.000 tree.py:145(files)
        2    0.000    0.000    0.000    0.000 tree.py:57(__init__)
        1    0.000    0.000    0.000    0.000 tree.py:70(__iter__)
        2    0.000    0.000    0.000    0.000 tree.py:76(__setitem__)
        1    0.000    0.000    0.000    0.000 tree.py:95(__init__)
        3    0.000    0.000    0.000    0.000 {built-in method callable}
        1    0.000    0.000    0.000    0.000 {built-in method compile}
        1    0.000    0.000    5.575    5.575 {built-in method exec}
       69    0.000    0.000    0.000    0.000 {built-in method getattr}
        2    0.000    0.000    0.000    0.000 {built-in method getgid}
        2    0.000    0.000    0.000    0.000 {built-in method getuid}
        3    0.000    0.000    0.000    0.000 {built-in method hasattr}
        6    0.000    0.000    0.000    0.000 {built-in method hash}
       51    0.000    0.000    0.000    0.000 {built-in method isinstance}
        3    0.000    0.000    0.000    0.000 {built-in method iter}
    50/47    0.000    0.000    0.000    0.000 {built-in method len}
        1    0.000    0.000    0.000    0.000 {built-in method listdir}
        8    0.000    0.000    0.000    0.000 {built-in method min}
        1    0.000    0.000    0.000    0.000 {built-in method nl_langinfo}
        1    0.000    0.000    0.000    0.000 {built-in method open}
        3    0.000    0.000    0.000    0.000 {built-in method ord}
        1    0.000    0.000    0.000    0.000 {built-in method pointer}
        2    0.000    0.000    0.000    0.000 {built-in method repr}
       31    0.000    0.000    0.000    0.000 {built-in method setattr}
        2    0.000    0.000    0.000    0.000 {built-in method signal}
        1    0.000    0.000    0.000    0.000 {built-in method sizeof}
        9    0.000    0.000    0.000    0.000 {built-in method stat}
        2    0.000    0.000    0.000    0.000 {built-in method time}
        1    0.000    0.000    0.000    0.000 {built-in method utf_8_decode}
        2    0.000    0.000    0.000    0.000 {method 'add' of 'set' objects}
       74    0.000    0.000    0.000    0.000 {method 'append' of 'list' objects}
        2    0.000    0.000    0.000    0.000 {method 'decode' of 'bytes' objects}
        1    0.000    0.000    0.000    0.000 {method 'disable' of '_lsprof.Profiler' objects}
       14    0.000    0.000    0.000    0.000 {method 'encode' of 'str' objects}
        2    0.000    0.000    0.000    0.000 {method 'end' of '_sre.SRE_Match' objects}
       27    0.000    0.000    0.000    0.000 {method 'endswith' of 'str' objects}
        3    0.000    0.000    0.000    0.000 {method 'extend' of 'list' objects}
       12    0.000    0.000    0.000    0.000 {method 'find' of 'str' objects}
       34    0.000    0.000    0.000    0.000 {method 'get' of 'dict' objects}
        1    0.000    0.000    0.000    0.000 {method 'groups' of '_sre.SRE_Match' objects}
       10    0.000    0.000    0.000    0.000 {method 'isalnum' of 'str' objects}
        2    0.000    0.000    0.000    0.000 {method 'items' of 'dict' objects}
        5    0.000    0.000    0.000    0.000 {method 'join' of 'str' objects}
        4    0.000    0.000    0.000    0.000 {method 'lower' of 'str' objects}
        1    0.000    0.000    0.000    0.000 {method 'lstrip' of 'str' objects}
        3    0.000    0.000    0.000    0.000 {method 'match' of '_sre.SRE_Pattern' objects}
        4    0.000    0.000    0.000    0.000 {method 'pop' of 'dict' objects}
        1    0.000    0.000    0.000    0.000 {method 'read' of '_io.TextIOWrapper' objects}
        2    0.000    0.000    0.000    0.000 {method 'remove' of 'list' objects}
        8    0.000    0.000    0.000    0.000 {method 'replace' of 'str' objects}
        4    0.000    0.000    0.000    0.000 {method 'reverse' of 'list' objects}
       41    0.000    0.000    0.000    0.000 {method 'setdefault' of 'dict' objects}
        7    0.000    0.000    0.000    0.000 {method 'split' of 'str' objects}
       29    0.000    0.000    0.000    0.000 {method 'startswith' of 'str' objects} 
```

cProfile 仅将 fuse.py 作为一个整体进行分析，而不是单独计算 FUSE 操作。有没有办法分析 FUSE 操作？

# java - Java设计多线程

> ID：15216997
> 
> 赞同：0
> 
> 时间：2013-03-05T06:11:24.210
> 
> 标签：java, multithreading

我必须坚持不断收到的消息流。出于性能原因，我等到有一组合理的消息后再将它们发送到数据库。我将这些消息保存在一个集合 C 中。每当在数据库中添加消息时，我都会收到 JMS 的通知。

我想对数据库中存在的对象和 C 中的对象进行*查询*。

是否有解决此问题的通用设计模式？我是否必须将数据库的副本保存在内存中的集合中？如果我尝试读取数据库的内容，然后读取 C 的内容，然后将它们放在一起以对这个融合进行查询，我如何确保在这样做时另一个线程没有清空 C 并将其放入数据库？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T09:08:41.760

如果要查询数据（可能是 SQL SELECT），则必须将集合刷新到数据库。

你至少有几个选择：

1）使用互斥锁锁定数据库访问。当您需要查询、锁定、刷新集合到 DB、查询、解锁时。

2) 为处理集合/DB 的线程的输入队列设计一条消息，指示它将集合刷新到 DB，在刷新时发出“FlushComplete”condvar 信号，然后等待另一个“Continue”condvar。排队消息，等待 FlushComplete，查询，信号 Continue。

我可能会选择（2）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T06:25:43.997

你试过用AKKA吗？它是一个非常易于使用的代理系统，可以轻松解决您的 pb 问题，并在您想使用异步系统和多线程时提供一些很好的设计模式

# python - 用于复杂列表和整数组合的python正则表达式

> ID：15216999
> 
> 赞同：1
> 
> 时间：2013-03-05T06:11:26.907
> 
> 标签：python, regex

我有一个需要解析的字符串：这是示例字符串：

```
sample_string = "([0, 22, 23, 24, 25, 47, 59],36155), ([0, 1, 22, 23, 24, 25, 47, 59, 7],36154), ([0, 1, 22, 23, 24, 25, 47, 50, 59, 7],36153)" 
```

我尝试了以下正则表达式，但似乎没有正确：

```
\((\[[(\d)+][,?])+\]),(\d)+\) 
```

正则表达式的目的是轻松访问元组的列表部分以及元组的整数部分。最简单的方法是使用 ast.literal_eavl(sample_string) 但想知道为什么上面的正则表达式无法正确解析它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-05T06:30:51.403

除非有一些令人信服的理由，否则我不建议您在这里使用正则表达式。

试试这个`ast`模块

```
>>> import ast
>>> sample_string = "([0, 22, 23, 24, 25, 47, 59],36155), ([0, 1, 22, 23, 24, 25, 47, 59, 7],36154), ([0, 1, 22, 23, 24, 25, 47, 50, 59, 7],36153)"
>>> ast.literal_eval(sample_string)
(([0, 22, 23, 24, 25, 47, 59], 36155), ([0, 1, 22, 23, 24, 25, 47, 59, 7], 36154), ([0, 1, 22, 23, 24, 25, 47, 50, 59, 7], 36153))
>>> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-05T06:31:51.990

评论中提到了您的一些问题，包括不平衡的括号和不考虑空格。这是一个将提取您需要的内容的正则表达式：

```
data = re.findall(r'\((\[(\d+,?\s?)+\]),\s*(\d+)\)', sample_string)

# data:
# [('[0, 22, 23, 24, 25, 47, 59]', '59', '36155'),
#  ('[0, 1, 22, 23, 24, 25, 47, 59, 7]', '7', '36154'),
#  ('[0, 1, 22, 23, 24, 25, 47, 50, 59, 7]', '7', '36153')]

for d in data:
    int_list_str = d[0]
    trailing_int_str = d[2] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-05T06:38:59.743

使用`split`and`eval`函数代替正则表达式怎么样？

```
list_of_lists = []
list_of_ints = []
tuple_list = sample_string.split(", ")
for tup in tuple_list:
    list_part,int_part = eval(tup)
    list_of_lists.append(list_part)
    list_of_ints.append(int_part) 
```

编辑：这只有在每对元组之间始终有“，”且其他任何地方都没有（即，您需要删除列表中和元组中的逗号之后的空格）时才有效。由于您的数据不是以这种方式格式化的，因此这种方法将失败。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-05T06:31:48.043

`Regex`对于您要解决的问题来说是个坏主意。您将能够使用匹配组仅捕获最后一个项目。

**例如：**

```
>>> import re
>>> 
>>> sample_string = r'([0, 22, 23, 24, 25, 47, 59],36155), ([0, 1, 22, 23, 24, 25, 47, 59, 7],36154), ([0, 1, 22, 23, 24, 25, 47, 50, 59, 7],36153)'
>>> 
>>> regexStr = r'(\(\[((\d+, )*\d+)\],\d+\), )*\(\[(\d+, )*\d+\],\d+\)'
>>> matchObj = re.match(regexStr, sample_string)
>>> print matchObj.groups()
('([0, 1, 22, 23, 24, 25, 47, 59, 7],36154), ', '0, 1, 22, 23, 24, 25, 47, 59, 7', '59, ', '59, ') 
```

`eval`改为使用从字符串中获取列表。